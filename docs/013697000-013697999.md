# StackOverflow 问答 13697000-13697999

# objective-c - 如何将数据存储到 iPhone 应用程序

> ID：13697003
> 
> 赞同：1
> 
> 时间：2012-12-04T06:02:14.087
> 
> 标签：objective-c, ios

我们开发了 diff 员工将使用的 iPhone 应用程序。组织（实际上我们还没有做企业应用，而是将这个应用放在应用商店收费），**所以我们想要的是每当人们安装应用时，应用会第一次打开，一个弹出up 会过来询问输入 URL**（这将是指向那个人组织的服务器的 URL），所以通过代码逻辑，我想要的是当我们到达视图中的登录页面时确实加载了我想检查 URL 是否已经存储在应用程序中，如果它没有存储，那么我会弹出要求输入 URL 的弹出窗口，如果它存储了，那么我将允许他输入登录详细信息。

我的问题是我应该如何存储该 URL，我应该在哪里存储该 URL，以及我应该如何检查它是否已经存储。我试图用...存储该 URL，其中 urlfield.text 是我要存储的 URL。

```
NSError *error;
    // For error information

    // Create file manager
    fileMgr = [NSFileManager defaultManager];

    // Point to Document directory
    documentsDirectory = [NSHomeDirectory() 
                          stringByAppendingPathComponent:@"Documents"];
    fileExists = [[NSFileManager defaultManager] fileExistsAtPath:filePath];
    // File we want to create in the documents directory 
    // Result is: /Documents/file1.txt
    filePath = [documentsDirectory 
                stringByAppendingPathComponent:@"file1.txt"];
    str=urlField.text;
    // Write the file
    [str writeToFile:filePath atomically:YES 
            encoding:NSUTF8StringEncoding error:&error];

    // Show contents of Documents directory
    NSLog(@"Documents directory: %@",
          [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error]); 
```

我正在检查它是否在那里使用..

```
 // fileExists is a BOOL variable
          fileExists = [[NSFileManager defaultManager] fileExistsAtPath:filePath]; 
         NSLog(@"Boolean value:=%d",fileExists);
        if ( fileExists  == 0 ) 
        {
           .......
          ........
        } 
```

但每次我运行应用程序时，它都会返回“0”（表示 BOOL 变量 fileExists）。请有人告诉我完成任务的方法，我最终会用这种逻辑尝试所有方面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T08:48:53.473

我为此使用 NSUserDefaults。

首先在检查用户是否第一次打开应用程序时，我检查 NSUserDefault 的第一个对象的值，例如

```
 //defaults is a object of NSUserDefault 
NSString *URLEntered =[defaults objectForKey:@"URLISENTERED"];
if (!URLEntered)  {

        [defaults setValue:@"0" forKey:@"URLISENTERED"];
    } 
```

URLEntered 第一次返回 null，所以我为 Key URLISENTERED 设置了值 0

并且我允许用户输入那里的组织服务器的 URL，在其中我将键 URLISENTERED 的值设置为 1 ，例如

```
[defaults setValue:@"1" forKey:@"URLISENTERED"]; 
```

同时我又拿了一个 NSUserDefault 对象来存储服务器的 URL 并存储它

```
// defaultURL is the object of NSUserDefault, and main URL is the URL of server user entered

[defaultURL setValue:mainURL forKey:@"mainURL"]; 
```

所以接下来当用户再次登录应用程序时，值

```
[defaults objectForKey:@"URLISENTERED"] 
```

是我们设置的 1，那时我直接将用户导航到登录屏幕，并使用获取 mainURL 的值

```
mainURL=[defaultURL objectForKey:@"mainURL"]; 
```

并使用此 URL 以供进一步使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:34:36.827

据我了解您的问题，您可以使用**NSUserDefault**或**plist**

1.  使用 plist：

    ```
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"plist.plist"]; 
    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath: path]) 
    {
        path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat: @"plist.plist"] ];
    }

    NSMutableDictionary *data;
    NSString *userURL ;

    if ([fileManager fileExistsAtPath: path]) 
    {
                data = [[NSMutableDictionary alloc] initWithContentsOfFile: path];
                //To retrieve the data from the plist
                NSMutableDictionary *savedURL= [[NSMutableDictionary alloc] initWithContentsOfFile: path];

    userURL = [savedURL objectForKey:@"USER_URL"];
    NSLog(@"%@",userURL);
             // present login detail or more stuff with userURL
    }
    else
    {

        userURL = // prompt for user to enter URL 
        data = [[NSMutableDictionary alloc] init];
       [data setObject:[NSNumber numberWithInt:value] forKey:@"USER_URL"];
       [data writeToFile: path atomically:YES];

    } 
    ```

2.  使用 NSUserDefault：

    ```
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *userURL = [defaults objectForKey:@"USER_URL"];
    if(userURL) {
            NSLog(@"%@",userURL);
            //present login detail or more stuff with userURL
    }
    else {
    userURL = // prompt for userURL
    [defaults setObject:userURL forKey:@"USER_URL"];
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:31:55.137

实际上，如果您想检查客户端上的 URL。您可以使用 sqlite 数据库完成此任务。

# php - 在 Opencart 的选项框中删除价格

> ID：13697009
> 
> 赞同：2
> 
> 时间：2012-12-04T06:02:40.383
> 
> 标签：php, opencart

嗨，我是 opencart 的新手。我在 product.tpl 中有代码。我想删除选项框选择中的“价格”....如果我删除选项框中的“价格”，它会影响价格计算，即 header.tpl 中的最终价格值

我要解决方案

1.  隐藏选项框中的“价格”（或）
2.  更改选项框中“价格”的颜色（或）
3.  删除 product.tpl 中的“价格”并将值分配给 header.tpl 中的“finalpricevalue”

产品.tpl---->

```
<select name="option[<?php echo $option['product_option_id']; ?>]" width="300"style="width:200px">
<option value=""><?php echo $text_select; ?></option>

<?php foreach ($option['option_value'] as $option_value) { ?>

<option value="<?php echo $option_value['product_option_value_id']; ?>"><?php echo $option_value['name']; ?>

<?php if ($option_value['price']) { ?>

(<?php echo $option_value['price_prefix']; ?><?php echo $option_value['price']; ?>)
<?php } ?> 

</option>
<?php } ?>
</select> 
```

header.tpl----->

```
var position1 = newPriceValue.indexOf("(");
var position2 = newPriceValue.indexOf(")");
position1 = position1+3;
var **finalPriceValue** = newPriceValue.substring(position1, position2);
var txt = newPriceValue;
txt = txt.replace(/,/g, '');
array=txt.match(/(?!$)\d+(\.\d+)/g); 
```

请帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:21:53.543

在 product.tpl 中，有几个实例与`$option_value['price']`您可以在产品上拥有的不同类型的选项相关联。首先制作 product.tpl 的副本以进行备份，然后使价格“消失”搜索 product.tpl 的每个实例：

```
 <?php if ($option_value['price']) { ?>
    (<?php echo $option_value['price_prefix']; ?><?php echo $option_value['price']; ?>)
    <?php } ?> 
```

并用这样的 html 注释括起来：

```
 <!--
    <?php if ($option_value['price']) { ?>
    (<?php echo $option_value['price_prefix']; ?><?php echo $option_value['price']; ?>)
    <?php } ?>  
    --> 
```

这不应该影响标题总数，这就是我假设您的意思：

> 如果我删除选项框中的“价格”，它会影响价格计算

1.  改变价格的颜色；找到相同的代码块并使其如下所示：

    ```
    <?php if ($option_value['price']) { ?>
    <span class="price_color">(<?php echo $option_value['price_prefix']; ?><?php echo $option_value['price']; ?>)</span>
    <?php } ?> 
    ```

然后制作 /catalog/view/theme/your_theme/stylesheet/stylesheet.css 的备份副本并添加：

```
 .price_color {color: #000000} 
```

或者你想要的任何颜色。只需将其封闭在一个跨度中即可进行样式设置。可能有更好的方法来做你想做的事情。您可以将样式放在新的 css 中，以便在更新模板时不会覆盖它，如果它不是您自己的。

# android - 当异步尝试从 url 获取位图时应用程序强制关闭

> ID：13697010
> 
> 赞同：0
> 
> 时间：2012-12-04T06:02:41.373
> 
> 标签：android, bitmap, android-asynctask

我有一个 Async 正在运行以从我创建的页面中获取数据。它的文本很好，但是当我尝试通过另一个类从图像 src 获取图像时，应用程序强制关闭。这是它强制关闭的代码：

```
public class FullReportActivity extends NavigationActivity {
    private TextView textView;
    private String url = "http://www.backcountryskiers.com/sac/sac-full.html";
    private ImageView ivDangerRose;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        // tell which region this covers
        getSupportActionBar().setSubtitle("...from Sierra Avalanche Center");
        setContentView(R.layout.activity_fullreport);
        textView = (TextView) findViewById(R.id.todaysReport);
        ivDangerRose = (ImageView) findViewById(R.id.dangerRose);
        fetcher task = new fetcher();
        task.execute();
    }

    // GET THE IMAGE and RETURN IT
    public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    class fetcher extends AsyncTask<String, Void, String> {
        private ProgressDialog dialog = new ProgressDialog(
                FullReportActivity.this);
        private Document doc = null;
        private Document parse = null;
        private String results = null;
        private String reportDate = null;
        private Bitmap bimage = null;

        @Override
        protected String doInBackground(String... params) {
            try {
                doc = Jsoup.connect(url).get();
                Log.e("Jsoup", "...is working...");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.e("Exception", e.getMessage());
            }

            parse = Jsoup.parse(doc.html());
            results = doc.select("#fullReport").outerHtml();

            Element dangerRoseImg = doc.getElementById("reportRose")
                    .select("img").first();
            String dangerRoseSrc = dangerRoseImg.absUrl("src");
            Log.i("Report Rose IMG", dangerRoseSrc);
            bimage = getBitmapFromURL(dangerRoseSrc);
            ivDangerRose.setImageBitmap(bimage);

            return results;
        }

        @Override
        protected void onPostExecute(String result) {
            dialog.dismiss();
            // smooth out the long scrolling...
            textView.setMovementMethod(ScrollingMovementMethod.getInstance());
            reportDate = parse.select("#reportDate").outerHtml();
            textView.setText(Html.fromHtml(reportDate + results));
            textView.setPadding(30, 20, 20, 10);
        }

        @Override
        protected void onPreExecute() {
            dialog.setMessage("Loading Full Report from the Sierra Avalanche Center...");
            dialog.show();
        }

    }

} 
```

我已经单独运行此 Async 以在没有强制关闭的情况下获得这样的图像，除了调用该方法之外，我不明白我在做什么不同：

```
public class MainActivity extends Activity {
    public String durl = "http://www.sierraavalanchecenter.org/dangerrose.png?a=2955";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);    

        new DownloadImageTask((ImageView) findViewById(R.id.dangerrose))
        .execute(durl);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
          ImageView bmImage;

          public DownloadImageTask(ImageView bmImage) {
              this.bmImage = bmImage;
          }

          protected Bitmap doInBackground(String... urls) {
              String urldisplay = urls[0];
              Bitmap drose = null;
              try {
                InputStream in = new java.net.URL(urldisplay).openStream();
                drose = BitmapFactory.decodeStream(in);
              } catch (Exception e) {
                  Log.e("Error", e.getMessage());
                  e.printStackTrace();
              }
              return drose;
          }

          protected void onPostExecute(Bitmap result) {
              bmImage.setImageBitmap(result);
          }
        }
} 
```

这个类获取图像src并创建一个位图并将其放入ImageView中，这里与我的第一个类有什么不同？？？

沮丧的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T06:09:01.013

您不能`UI`从后台线程进行修改。

搬进`ivDangerRose.setImageBitmap(bimage);`来`onPostExecute`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:17:35.630

在方法 doInBackground

```
remove --> ivDangerRose.setImageBitmap(bimage); 
```

因为您无法在后台进程中修改 UI。

如果你仍然想要你可以试试 runOnUiThread 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:07:04.170

在 doInBackground() 我们不应该访问活动的内容。

# php - SugarCRM GetAllRoles() 检索自定义模块/页面的数据

> ID：13697011
> 
> 赞同：1
> 
> 时间：2012-12-04T06:02:45.097
> 
> 标签：php, roles, sugarcrm

我一直在通过为该模块创建自定义模块和自定义 PHP 文件来使用 SugarCRM。我需要显示用户可用的所有角色，并将数据显示在自定义 PHP 页面上。

我已经查看了 getAllRoles() 函数并且......

```
ACLRole::getAllRoles(boolean $returnAsArray=false); 
```

任何人都可以帮助我使这些功能正常工作吗？

**（请仅在您知道答案的情况下回答，不要以错误的理由结束问题。）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:54:22.020

您可以轻松获取所有未删除的角色，您将在/modules/ACLRoles/ACLRole.php 中找到该方法。它将返回 acl 角色的数组表示数组或 ACLRoles 数组。

查询是：

```
'SELECT acl_roles.* FROM acl_roles WHERE acl_roles.deleted=0 ORDER BY name'; 
```

试试这个代码：

```
$roles = array();
$roles = ACLRole::getAllRoles(true);
print_r($roles);
sugar_die(); 
```

希望有帮助。

# php - 如何选择明年的 MySQL 数据

> ID：13697012
> 
> 赞同：0
> 
> 时间：2012-12-04T06:02:47.497
> 
> 标签：php, mysql, date, datetime

我正在从事一个文件管理项目，其中每个文件都有到期日期。我需要列出明年将到期的所有文件。SQL 查询将是什么？

应该是这样的：

```
$date = date ('Y-m-j');
$newdate = strtotime ( '+1 year' , strtotime ( $date ) ) ;
$newdate = date ( 'Y-m-j' , $newdate );
$sql = "SELECT * FROM `files` WHERE `expDate` = year ($newdate)" ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:07:14.540

如果`expDate`是在 mysql timestamp( `yyyy-mm-dd hh:mm:ss`) 中，你可以使用这个

```
 DATE_ADD(`expDate`, INTERVAL 1 YEAR) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:10:05.793

您可以使用 mysql DATE_ADD 添加年份

```
$sql = "SELECT * FROM `files` WHERE `expDate` = YEAR(DATE_ADD($date, INTERVAL 1 YEAR))"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:10:08.697

尝试：

```
$sql = "SELECT * FROM `files` WHERE YEAR(`expDate`) = YEAR(NOW()) + 1" ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:15:21.703

尝试这个

```
$newdate = date ( 'Y-m-j' , strtotime('+1 year') );
$sql = "SELECT * FROM `files` WHERE `expDate` = year ($newdate)" ; 
```

或者

```
$sql = "SELECT * FROM `files` WHERE `expDate` = YEAR(NOW())+1; 
```

# android - phonegap android本地通知cancelAll不工作

> ID：13697015
> 
> 赞同：1
> 
> 时间：2012-12-04T06:02:54.727
> 
> 标签：android, cordova, localnotification

嗨，我在我的 android 项目中使用 phonegap 本地通知插件。通知工作得很好。我可以删除带有 ID 的通知，但在我的应用程序中我必须删除所有通知选项，为此插件提供了一种取消所有通知的方法。这是： -

```
 plugins.localNotification.cancelAll(); 
```

但这不起作用。我从这里使用这个插件 [https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification) 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:06:23.020

我想这可能是这个问题的答案。正如它在`cancelAllNotifications()`方法的描述中所说（LocalNotification.java 第 124 行）：

> Android 只能取消注册特定警报。没有cancelAll这样的东西。因此**，我们依靠**保存所有警报的 Shared Preferences 来遍历这些警报并一一取消注册。

但是，请看一下`cancelAllNotifications()`调用该方法的代码（第 59 行）：

```
} else if (action.equalsIgnoreCase("cancelall")) {
    unpersistAlarmAll();
    return this.cancelAllNotifications();
} 
```

如下`unpersistAlarmAll()`所示（第 181 行）：

```
private boolean unpersistAlarmAll() {
final Editor alarmSettingsEditor = this.cordova.getActivity().getSharedPreferences(PLUGIN_NAME, Context.MODE_PRIVATE).edit();

alarmSettingsEditor.clear();

return alarmSettingsEditor.commit();
} 
```

**发生的事情是在调用之前** 从 sharedPreferences 中清除了alarmIds `cancelAllNotifications()`，实际上没有留下要取消的警报。

我不确定将呼叫转移到的最佳位置在哪里`unpersistAlarmAll()`，我很乐意获得一些建议。`cancelAllNotifications()`同时，在测试返回的结果之后`alarm.cancelAll(alarmSettings)`（第 133 行），我已将其移至 within ，如下所示：

```
if (result) {
    unpersistAlarmAll();
    return new PluginResult(PluginResult.Status.OK); 
```

到目前为止，这似乎工作正常。也许另一种方法是废弃整个`unpersistAlarmAll()`方法，而是`unpersistAlarm(String alarmId)`在每个单独的警报成功取消后调用（第 168 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:37:50.447

根据您要执行的操作，您可以使用“状态栏通知”。这个插件可以让你把消息放在安卓状态栏上。

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)

# windows - Windows 中的父子关系

> ID：13697018
> 
> 赞同：4
> 
> 时间：2012-12-04T06:03:15.567
> 
> 标签：windows, unix, parent-child

我正在看一本书，偶然发现这句话：`Windows does not maintain parent-child relationships among processes like Unix does.`不幸的是，没有任何进一步的解释。那么Unix和Windows进程在父子关系方面有什么区别呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T06:29:56.427

Windows 不提供直接 getppid API，没有 Win32 API 派生进程并继承父进程的所有内存（在 windows 上，子进程仅在允许时继承句柄）。即使以间接方式（如进程资源管理器使用的方式）获得进程的父 PID，也不能保证获得指向有效进程的 PID，因为有关进程的父 PID 的信息仅在进程创建的时间，并且在父母在孩子之前去世的情况下永远不会更新。

因此，获取父 PID 的间接方法只会告诉创建此进程的进程的 PID 是什么，仅此而已。（与 Unix 或其他 init 进程将孤儿进程作为其子进程的情况不同）在 Windows 上，不谈论孤儿进程或僵尸进程。

可能还有更多。所有这些（以及更多）相当于“windows 不维护父子关系”的声明。

# java - 只运行一次 for-each 循环

> ID：13697020
> 
> 赞同：4
> 
> 时间：2012-12-04T06:03:22.387
> 
> 标签：java

我有以下循环，我只想运行一次。我怎样才能做到这一点？

```
for (AnnotationData annotations : annotation) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T06:19:57.297

运行一次的循环并不是一个循环。

如果`annotations`是一个数组，则使用`annotations[0]`. 如果是`List`，请执行`annotations.get(0)`。否则，做`annotations.iterator().next()`. 如果您不确定该集合是否至少包含一个元素，请务必先检查该元素。

这会更清楚，因为当人们看到 a`for`他们通常期望一个循环。一个实际上，嗯，循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T06:06:56.950

刚刚爆发！

```
for (AnnotationData annotation : annotations) {
    // do something with "annotation"
    break; // only execute loop body once
} 
```

其他答案是使用计数器或标志！？有些人为了做最简单的事情而编写了多少代码，这让我永远感到惊讶。通常，程序员越差，他们写的代码就越多。

### 编辑：

一些评论者误解了非循环版本会使用“更少的代码”或“更少的行”。这样的说法是不真实的......这是精确的非循环等效代码：

```
if (!annotations.isEmpty()) {
    AnnotationData annotation = annotations.get(0);
    // do something with "annotation"
} 
```

这使用了*相同*的行数，但需要多 23*个*字符的代码，尽管我承认它的意图更加明确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T06:07:15.743

不需要任何计数器。只需`break`在最后添加一个：

```
 for (AnnotationData annotations : annotation){
        //your all code
        break;
     } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T06:05:45.453

```
int i=0;
for (AnnotationData annotations : annotation){
 if(i==1)
   {
    break;
   }
 i++;
} 
```

# maven - Maven 中的本地存储库和远程存储库是什么意思？

> ID：13697021
> 
> 赞同：5
> 
> 时间：2012-12-04T06:03:26.020
> 
> 标签：maven

我是 Maven 的新手。我正在阅读[Maven - The complete reference](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-relationships.html)并遇到了这一行：

> Maven 假定父 POM 在本地存储库中可用，或者在当前项目的父目录 (../pom.xml) 中可用。如果两个位置都无效，则可以通过 relativePath 元素覆盖此默认行为。

Maven 安装和项目的本地和远程存储库到底是什么意思

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T06:07:24.963

本地存储库是一种本地目录结构，它缓存从远程存储库下载的工件或手动安装的工件（例如从命令行选项）。

远程存储库是包含版本化工件的 Web 服务（由 URL 定义）。这可能像 Apache 服务器或成熟的 Maven 存储库一样简单，例如[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)，它允许上传、基于用户目录的权限等。

[http://maven.apache.org/guides/introduction/introduction-to-repositories.html](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T08:34:01.227

默认情况下，Maven 将从本地存储库获取依赖项并将依赖项安装到本地`.m2`存储库。这是一个优先规则，你的`.m2`行为就像一个缓存，Maven 可以在远程下载它们之前获取依赖项。您可以像这样绕过这种行为：（`mvn -U ...`请参阅 参考资料`mvn --help`）。

您的本地`.m2`可以`C:\Users\{user}\.m2`在 Windows 或`/home/{user}/.m2`Linux 下找到。如果您执行`mvn install`，您的项目将本地安装在所述`.m2`存储库下。

远程存储库是一个 Maven 存储库，就像您的本地`.m2`存储库一样，托管供您从中获取依赖项，例如[Maven Central](http://search.maven.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T05:49:53.933

本地存储库是一个存储库。到您的本地系统中，当您编译或安装项目时，所有需要下载到本地 repo 的依赖项。当您使用您的项目时，maven 首先尝试从本地获取依赖关系，如果它不可用，那么它将尝试从中央存储库下载。中央回购。是一个在线回购。这是由 Maven 本身提供的。

关于每个 Maven 存储库，请[在 Maven 中检查这个不同的存储库](http://blog.rehanpathan.com/maven-repository/)

# c# - C# 并发字典添加或更新

> ID：13697026
> 
> 赞同：0
> 
> 时间：2012-12-04T06:04:18.993
> 
> 标签：c#, .net, concurrentdictionary

我对 AddOrUpdate 方法感到困惑。文档特别说 updateValueFactory 是不同步的。

在 MSDN 中给出了这个例子：

```
 Parallel.For(0, 10000, i =>
    {
        // Initial call will set cd[1] = 1\.   
        // Ensuing calls will set cd[1] = cd[1] + 1
        cd.AddOrUpdate(1, 1, (key, oldValue) => oldValue + 1);
    }); 
```

如果有多个线程尝试增加旧值，它们中的一些是否可能会更新陈旧的值？

谢谢。

# java - 从非静态字段更改静态引用？

> ID：13697033
> 
> 赞同：0
> 
> 时间：2012-12-04T06:04:55.687
> 
> 标签：java, string-length

我有一个私有 int 数组，我需要以某种方式找到长度，但我不能在静态类下做到这一点。我必须保持类静态，是否可以添加另一种方法来将 a.length 更改为其他内容？

该问题是由 a.length 引起的。

```
private int [] a;

public static IntegerSet union(IntegerSet otherSet, IntegerSet nextSet) {

                for(int i=0; i<a.length; i++) {
                  if (otherSet.isSet(i))
                    nextSet.insertElement(i);
                }

                return nextSet;
              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:09:38.100

As i said use

```
public int lenghtOfArray(){
      return this.a.lenght;
} 
```

and change your method to

```
public static IntegerSet union(IntegerSet otherSet, IntegerSet nextSet) {
      for(int i=0; i<otherSet.length(); i++) {
           if (otherSet.isSet(i))
                nextSet.insertElement(i);
           }
           return nextSet;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:07:20.097

也可以设为静态，或者`a`将类的实例作为参数传递给`union`方法并访问该实例的`a`字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:07:30.250

您需要引用对象的字段：

```
private int [] a;

public static IntegerSet union(IntegerSet otherSet, IntegerSet nextSet) {
    . . .
    for(int i=0; i<otherSet.a.length; i++) {
        . . .
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:08:51.410

您不是`a.length`从静态*类*中引用的；你是从静态*方法*做的。静态方法永远不能引用非静态成员变量。

It appears as if you have a bug there. Why would you go against `a.length`? You should inquire about the `a` member of `otherSet` or `nextSet`.

# xslt - url 查询 xml 和 xpath 转换

> ID：13697036
> 
> 赞同：0
> 
> 时间：2012-12-04T06:05:20.430
> 
> 标签：xslt, xpath, url-encoding, urldecode

简短的问题：如何处理 xml 输入文件中的原始 & 符号。

添加：我什至没有选择带有＆符号的字段。解析器抱怨文件中存在＆符号。

长解释：我正在处理通过 url 响应生成的 xml。

```
<NOTE>I%20hope%20this%20won%27t%20require%20a%20signature%3f%20%20
There%20should%20be%20painters%20%26%20stone%20guys%20at%20the
%20house%20on%20Wednesday%2c%20but%20depending%20on%20what%20time%20
it%20is%20delivered%2c%20I%20can%27t%20guarantee%21%20%20
Also%2c%20just%20want%20to%20make%20sure%20the%20billing%20address
%20is%20different%20from%20shipping%20address%3f
</NOTE> 
```

这是 url 解码成这样：

```
<NOTE>I hope this won't require a signature?  
There should be painters & stone guys at the 
house on Wednesday, but depending on what time it is delivered, I can't guarantee!  
Also, just want to make sure the billing address is different from shipping address?  
</NOTE> 
```

问题：由于“painters & stone guy”中的“&”，xslproc 在最后一个字符串上阻塞，并出现以下错误：

```
xmlParseEntityRef: no name
<NOTE>I hope this won't require a signature?  There should be painters & 
```

看起来 xsltproc 需要关闭`</NOTE>`

我在不同的地方尝试了各种方式`disable-output-escaping="yes"`。`xsl:output`和`xsl:value-of`

并且也尝试过`xsltproc --decode-uri`但无法弄清楚那个。没有文档。

注意：我想知道是否值得将输入保持为 urlencoded 格式。并使用 DOCTYPE.. 如下所示（不知道该怎么做）。输出最终是一个浏览器。

```
<!DOCTYPE xsl:stylesheet  [
    <!ENTITY nbsp   "&#160;">
    <!ENTITY copy   "&#169;">
    <!ENTITY reg    "&#174;">
]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:28:20.783

如果存在未转义的 & 符号，则 XML 格式不正确。如果你把字符串放在里面`<![CDATA[]]>`，那么它应该可以工作。

```
<NOTE><![CDATA[I hope this won't require a signature?  
  There should be painters & stone guys at the 
  house on Wednesday, but depending on what time it is delivered, I can't guarantee!  
  Also, just want to make sure the billing address is different from shipping address?]]>  
</NOTE> 
```

或者，当然，使用`&amp;`代替`&`.

**编辑：**如果 XSLT 处理器支持禁用输出转义（并且 xsltproc 支持），您还可以将 URL 转义转换为数字字符引用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="NOTE">
    <xsl:copy>
      <xsl:call-template name="decodeURL"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template name="decodeURL">
    <xsl:param name="URL" select="string()"/>
    <xsl:choose>
      <xsl:when test="contains($URL,'%')">
        <xsl:variable name="remainingURL" select="substring-after($URL,'%')"/>
        <xsl:value-of disable-output-escaping="yes" select="concat(
          substring-before($URL,'%'),
          '&amp;#x',
          substring($remainingURL,1,2),
          ';')"/>
        <xsl:call-template name="decodeURL">
          <xsl:with-param name="URL" select="substring($remainingURL,3)"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$URL"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

当然，您不必将此转换用作预处理步骤，您可以`decodeURL`在将包含 URL 编码字符串的源 XML 转换为 HTML 或其他内容的样式表中重新使用。

# php - 如何在 AJAX 的 POST 方法中访问 php 数组以将数组传递给另一个文件？

> ID：13697044
> 
> 赞同：0
> 
> 时间：2012-12-04T06:06:16.367
> 
> 标签：php, javascript, ajax, jquery

我有一个 php 文件，它有一个如下所示的数组。

```
 $selectShiftarray = array();
$shift=$_POST['selectShift'];

if ($shift)
{
    foreach ($shift as $value)
    {
        array_push($selectShiftarray,$value);
    }
} 
```

我需要访问 AJAX 中的 $selectShiftarray 以将值传递给另一个 php 文件。

```
$.ajax({
    type: 'POST',
    url: '../c/sampleTest.php', //data: {data = <?php $POST['selectShift'] ?> },//"id=78&name=Allen",
    dataType: 'json',

    success: function (json) {
        //alert('successful');
        $.plot($("#placeholder"), json, {
            series: {
                stackpercent: true,
                bars: {
                    show: true,
                    barWidth: 0.6,
                    align: "center"
                }
            },
            xaxis: {
                tickSize: 1
            },
            yaxis: {
                max: 100,
                tickFormatter: function (v, axis) {
                    return v.toFixed(axis.tickDecimals) + '%'
                }
            }
        });
    }
}); 
```

我试图将 AJAX 的数据字段中的数组值传递给 sampleTest.php 以执行计算。

如果我直接在两个 php 文件之间传递数组值，我想在当前 php 文件中包含 sampleTest.php。我的要求是，我不应该在任何 php 文件中包含 sampleTest.php 文件，因此我选择 AJAX 的 POST 方法。但我无法将数组传递给 sampleTest.php 文件。由于我是 AJAX 新手，我无法解决这个问题。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:16:26.867

将 $selectShiftarray 数组打印到 AJAX 代码中以通过 AJAX 将其发送到 ../c/sampleTest.php：

```
function sendArrayToPHP(phpFile, parameterName, jsArray) {
    $.ajax({
        url: phpFile,
        async: false, // Depending on what you want
        type: "POST",
        data: { parameterName : JSON.serialize(jsArray) }
    }).done(function( data ) {
        // Sent!
    });
}

var arrayExample = $.parseJSON("<?=$selectShiftarray?>"); // This way
// You can modify here the array if you want using JavaScript
sendArrayToPHP("../c/sampleTest.php", "arrayParameter", arrayExample); 
```

从 ../c/sampleTest.php 接收数组（解码 JSON）：

```
$selectShiftArray = json_decode($_POST['arrayParameter'], true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:57:33.563

感谢 axelbrz 和 Bergi 的指导，帮助我解决了这个问题，这对我有用，

这是我在 Controller 中的 AJAX 代码：

```
 <script type="text/javascript">
    $(document).ready(function(){

    var jsonobj = <?php echo json_encode($selectShiftarray); ?>;

    $.ajax({type:'POST',url:'../c/sampleTest.php', data :  { shift : jsonobj } ,
    dataType: 'json',

    success:function(json){
    //alert('successful');
    $.plot($("#placeholder"), json, {
    series: {
        stackpercent: true,
        bars: { show: true, barWidth: 0.6, align: "center" }
    },
        xaxis: {tickSize : 1},
        yaxis:{max:100, tickFormatter: function(v,axis){ return v.toFixed(axis.tickDecimals)+'%'}}
    });
 }
 });
 });

</script>
<div id="placeholder" style="width:600px;height:300px; top: -401px; left: 500px;">
</div> 
```

我的 sampleTest.php 代码，它接收控制器发送的数组并对其进行处理。

```
$selectShiftarray = array();
$shift=$_POST['shift'];

if ($shift)
{
    foreach ($shift as $value)
    {
        array_push($selectShiftarray,$value);
    }
} 
```

# php - 检查电子邮件发送位置的脚本

> ID：13697050
> 
> 赞同：1
> 
> 时间：2012-12-04T06:07:00.983
> 
> 标签：php, jquery, curl

我正在寻找一个 php 脚本来检查电子邮件在收件箱或垃圾邮件中的发送位置。实际上，我现在有一个邮件系统，我只想检查我发送的邮件是否已发送到收件人收件箱或垃圾邮件文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:12:54.977

不，这是不可能的。当邮件离开 MTA 时，您无法猜测会发生什么。除非目标邮件服务器以公开方式拒绝邮件并且不要只是丢弃它。

有一个用于读取确认的邮件标题，但并非所有邮件客户端都支持它，我个人从不发送它们。

# ios - 在后台接收推送通知时执行任务

> ID：13697059
> 
> 赞同：0
> 
> 时间：2012-12-04T06:07:48.257
> 
> 标签：ios, objective-c, iphone, push-notification

我想在收到推送通知时执行一项任务。我在方法中编写了我的代码`- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo`。当应用程序在前台时它工作正常，但是当应用程序在后台时，上述方法不会被调用。当应用程序在后台时，有什么方法可以调用这个方法。这个应用程序不适合提交到 iTunes，所以有什么**好的 hack**技巧吗？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:16:57.437

每当应用程序进入后台时，所有通知都开始在后台线程中发生。所以你需要做这样的事情。

```
...
[[NSNotificationCenter defaultCenter] addObserver:self       
                                         selector:@selector(processNotificationInBackground:) 
                                             name:TheNameOfTheNotification 
                                           object:nil];
...

- (void) processNotificationInBackground:(NSNotification *)not {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        /* your background notification processing code goes here */
        /* note that you should transfer control back to the main queue if you need to update your UI */
    }
} 
```

# java - 创建图像形式的字节数组，将其添加到 PDF 中并通过后端作业发送电子邮件

> ID：13697065
> 
> 赞同：1
> 
> 时间：2012-12-04T06:08:40.017
> 
> 标签：java, grails, bytearray, jobs

我的问题是，我们如何在没有响应的情况下创建图像形式的字节数组。目前我正在使用 .

```
response.setHeader('Content-length', image.imageSize)
            response.contentType = image.imageFormat // or the appropriate image content type
            response.outputStream << image.imageData
            response.outputStream.flush() 
```

但它给出了错误，因为我们确实有一个请求对象，因为我正在通过后端作业运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:14:37.323

目前不知道您是如何创建 pdf 文件的，但一种方法是使用[Grails Rendering Plugin](http://gpc.github.com/grails-rendering/docs/manual/guide/single.html)生成 pdf。有了这个，您可以使用任何视图/模板来生成 pdf 文件。

要从后端发送这些 pdf，您需要：

一个看法：

```
<html>
    <head>...</head>
    <body>
        <h1>Your PDF Content</h2>
        <g:each in="${images}" var="image">
            <img src="${createLink(action:'displayImage', id:image.id)}" alt="${image.name}"/>
        </g:each>
    </body> 
</html> 
```

控制器中的操作：

```
def displayImage = {
    def image = Image.get(params.id)
    response.setHeader("Content-disposition", "attachment; filename=${image.name}")
    response.contentType = image?.mimeType
    response.contentLength = image?.data.length
    response.outputStream.write(attachment?.data)
} 
```

一个使用渲染的 pdf发送多部分邮件（使用[邮件插件）的 grails 作业：](http://grails.org/plugin/mail)

```
def execute() {
    def pdfBytes = pdfRenderingService.render(template: '/path/to/your/template', model: [images: yourImages]).toByteArray() 

    sendMail {
        multipart true
        to "yourmail"
        subject "yoursubject"
        body (view: "/path/to/your/mailview", model: yourModel) attachBytes "yourTitle.pdf", CH.config.grails.mime.types['pdf'], pdfBytes
    } 
} 
```

代码不完整，只是演示了基础知识。

希望有帮助！

# c# - XNA 2D 自上而下游戏 - FOREACH 无法检查 Enemy 和 Switch-Tile

> ID：13697067
> 
> 赞同：0
> 
> 时间：2012-12-04T06:08:51.700
> 
> 标签：c#, xna, xna-4.0

这里是游戏玩法。有三个条件。

玩家踩到 Switch-Tile，它变成了**false**。

1）当敌人踩到它（被困）并且玩家也踩到它时，敌人将被摧毁。

2）但是当敌人踩到它并且玩家没有踩到它时，敌人就会逃脱。

3) 如果 Switch-Tile 条件为**真**，那么什么也没有发生。当 Switch tile 为 false（玩家踩到 Switch-Tile）时，效果会被激活。

因为有很多 Enemy 和很多 Switch-Tile，我不得不使用**foreach**循环。

问题是在敌人被逃跑（案例 2）并再次踩到另一个 Switch-Tile 之后，敌人什么也没发生！

我不知道出了什么问题。效果应该是一样的，但是敌人像什么都没发生一样通过 Switch tile（他们应该被困住）

有人可以告诉我有什么问题吗？

这是代码：

```
public static void switchUpdate(GameTime gameTime)
        {
            foreach (SwitchTile switch in switchTiles)
            {
                foreach (Enemy enemy in EnemyManager.Enemies)
                {
                    if (switch.Active == false)
                    {                    
                        if (!enemy.Destroyed)
                        {                                
                            if (switch.IsCircleColliding(enemy.EnemyBase.WorldCenter,
                                enemy.EnemyBase.CollisionRadius))
                            {                                    
                                enemy.EnemySpeed = 10; //reducing Enemy Speed if it enemy is step on the Tile (for about two seconds)
                                enemy.Trapped = true;
                                float elapsed = (float)gameTime.ElapsedGameTime.Milliseconds;
                                moveCounter += elapsed;
                                if (moveCounter> minMoveTime)
                                {
//After two seconds, if the player didn't step on Switch-Tile.
//The Enemy escaped and its speed back to normal
                                    enemy.EnemySpeed = 60f;
                                    enemy.Trapped = false;
                                }
                            }
                        }
                    }

                    else if (switch.Active == true && enemy.Trapped == true
                        && switch.IsCircleColliding(enemy.EnemyBase.WorldCenter,
                                enemy.EnemyBase.CollisionRadius)
                        )
                    {
//When the Player step on Switch-Tile and 
//there is an enemy too on this tile which was trapped = Destroy Enemy  

                        enemy.Destroyed = true;                            
                    }
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:32:58.490

```
 else if (switch.Active == true && enemy.Trapped == true
                && switch.IsCircleColliding(enemy.EnemyBase.WorldCenter,
                        enemy.EnemyBase.CollisionRadius)
                )
            {
                //When the Player step on Switch-Tile and 
                //there is an enemy too on this tile which was trapped = Destroy Enemy  

                enemy.Destroyed = true;                            
            } 
```

此代码永远不会为真，因为您仅在开关未激活时才设置敌人是否被困。一旦将其设置为 true，您就应该真正打破循环，然后再次测试以查看是否应该消灭敌人。

重新考虑你想要做的逻辑，并确保在每个阶段你都可以获得敌人等的正确信息。

PS 你不需要使用 foreach 循环。您可以轻松地使用 for 循环并遍历容器，或者如果您真的很虐待狂，您可以自己为每个敌人进行简单的硬编码。Foreach 循环只是解决此类问题的一种方法，只是因为它们可以使用，并不意味着您需要使用它们；）

# cakephp - cakePHP上同一模型的多重关系

> ID：13697068
> 
> 赞同：0
> 
> 时间：2012-12-04T06:08:55.217
> 
> 标签：cakephp, model

我正在尝试按照 cake kbook 中的描述在模型上建立多重关系 我有两个模型 Account 和 Tax 这样

帐户（id，名称，代码）税（id.name，sales_tax_gl，purchase_tax_gl）

与 Account.id 相关的 sales_tax_gl 和 purchase_tax_gl 这些都是我创建的模型

```
class Tax extends AppModel {
var $name = 'Tax';
var $displayField = 'name';

var $belongsTo = array(
    'SalesTax' => array(
        'className' => 'Account',
        'foreignKey' => 'sales_tax_gl',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'PurchaseTax' => array(
        'className' => 'Account',
        'foreignKey' => 'purchase_tax_gl',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);
}

Account Model
class Account extends AppModel {
var $name = 'Account';
var$primaryKey = 'id';

var $hasMany = array(        
    'TaxSalesTax' => array(            
    'className' => 'Tax',            
    'foreignKey' => 'sales_tax_gl' ),        
    'TaxPurchaseTax' => array(            
    'className' => 'Tax',            
    'foreignKey' => 'purchase_tax_gl' ) 

);

} 
```

但它失败并显示此消息“警告（2）：pg_query（）[function.pg-query]：查询失败：错误：缺少表“帐户”的 FROM 子句条目

模型有什么问题？我正在使用 postgreSql，感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:50:50.087

我在想我找到了问题所在。那是因为我在帐户模型中使用虚拟字段，如下所示

```
var $name = 'Account';
var $primaryKey = 'id';
var $displayField = 'name';
var $order=array('Account.id');
var $virtualFields = array('dropdown_name' => 'Account.id || \' \' || Account.name'); 
```

当我取消注释 $virtualFields 时，它可以正常工作，但我仍然不知道为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:28:45.320

在第一个模型中，您的模型名称是 SalesTax，在第二个模型（帐户模型）中，模型名称是 TaxSalesTax，请将其更正为正确的并尝试。

# opengl - OpenGL glOrtho 和 GL_DEPTH_TEST

> ID：13697071
> 
> 赞同：0
> 
> 时间：2012-12-04T06:09:01.283
> 
> 标签：opengl, 3d, jogl

我正在尝试绘制一个简单的三角形，但在组合`glEnable(GL_DEPTH_TEST)`and时遇到了问题`glOrtho`。三角形的显示没有深度测试，不取决于`nearVal`参数，但如果启用了深度测试并且`nearVal`不为 0，则不显示任何内容。这是代码。

```
@Override
public void init(GLAutoDrawable drawable) {
    GL2 gl = drawable.getGL().getGL2();

    gl.glShadeModel(GL2.GL_SMOOTH);
    gl.glEnable(GL2.GL_DEPTH_TEST);
    gl.glDepthFunc(GL2.GL_LEQUAL);
    gl.glClearColor(0, 0, 0, 1);
    gl.glClearDepth(100.0);

    gl.glMatrixMode(GL2.GL_PROJECTION);
    gl.glLoadIdentity();

    // the nearVal = 1 and the triangle is not displayed
    // if we set the nearVal = 1 then the triangle is displayed
    gl.glOrtho(-1, 1, -1, 1, 1, 10); 
}

@Override
public void display(GLAutoDrawable drawable) {      
    GL2 gl = drawable.getGL().getGL2();

    gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);

    gl.glBegin(GL.GL_TRIANGLES);        
    gl.glColor3f(1, 0, 0);
    gl.glVertex3f(0.0f, 0.0f, 0);       
    gl.glColor3f(0, 1, 0);
    gl.glVertex3f(1, 0.0f, 0);      
    gl.glColor3f(0, 0, 1);
    gl.glVertex3f(0f, 1f, 0);       
    gl.glEnd();

    gl.glFlush();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:00:00.397

您的 glVertex3f 调用在 z=0 平面上定义了一个三角形。如果您将 glOrtho 调用的 nearPlane 参数设置为 1，那么您的三角形将被剪裁掉。

# java - Java正则表达式检查时间格式

> ID：13697076
> 
> 赞同：0
> 
> 时间：2012-12-04T06:09:18.687
> 
> 标签：java, regex, string

我有一个字符串，我需要验证格式 -1D23H13M40S。（不区分大小写）

什么可以是正则表达式？

我试过了

```
myString.matches("[^0-9MHDS]*") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:14:37.833

试试这个：

```
\d+D(\d|[01]\d|2[0-4])H(\d|[0-5]\d|60)M(\d|[0-5]\d|60)S 
```

或者这个排除时间限制，例如`24H`,`60M`和`60S`:

```
\d+D(\d|[01]\d|2[0-3])H(\d|[0-5]\d)M(\d|[0-5]\d)S 
```

# android - 在android-marquee中动态地将文本设置为textview

> ID：13697081
> 
> 赞同：2
> 
> 时间：2012-12-04T06:09:33.943
> 
> 标签：android, textview, android-scroll

如何将 TextView 文本设置为动态滚动选框。请帮助我谢谢提前。

用于获取要在音频播放器中播放的列表项的 Listview 如下。

```
 public class Audiovediolist extends Activity implements OnItemClickListener {
        private ListView audioList;
        private Intent frmHome;
        private ArrayList<HashMap<String, String>> dataList;
        private HashMap<String, String> map;
        private HashMap<String, String> data;
        private int Screen_Id;
        String name;
        String mSign[] ={"1","2","3","4","5"}; 
        Integer mImages[] = { R.drawable.m, R.drawable.v,
                R.drawable.mm, R.drawable.k, R.drawable.s};
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_RIGHT_ICON);
            setContentView(R.layout.list);
            frmHome = getIntent();
            getIntentValues();
            initUI();
            setUI();
            uiListener();
        }
        private void initUI() {
                audioList = (ListView) findViewById(R.id.audiolist_listView);
                dataList = new ArrayList<HashMap<String, String>>();
        }
        private void uiListener() {
                audioList.setOnItemClickListener(this);
        }
        private void getIntentValues() {
            String id = frmHome.getStringExtra("Activity_Id");
            Screen_Id = Integer.parseInt(id);
            if (Screen_Id == 1) {
                getWindow().setFeatureDrawableResource(Window.FEATURE_RIGHT_ICON,
                        R.drawable.audioo);
                this.setTitle(getResources().getString(R.string.audio));
                this.setTitleColor(getResources().getColor(R.color.Beige));
            } else {
                this.setTitle(getResources().getString(R.string.video));
                this.setTitleColor(getResources().getColor(R.color.Beige));
                getWindow().setFeatureDrawableResource(Window.FEATURE_RIGHT_ICON,
                        R.drawable.videoo);
                 }
          }
        private void setAdapter() {
            SimpleAdapter adapter = new SimpleAdapter(this, dataList,
                                     R.layout.list_row, new String[] { "Image", "text" },
                                     new int[] {
                                     R.id.audiolist_row_img, R.id.audiolist_row_tv });
                         audioList.setAdapter(adapter);
        }
        private void setUI() {
                for (int a = 0; a <= 11; a++) {
                     map = new HashMap<String, String>();
                     map.put("Image", "" + mImages[a]);
                     map.put("text", mSign[a]);
                     dataList.add(map);
                     map = null;
                }
        }
        @Override
        protected void onStart() {
            super.onStart();
            setAdapter();
        }
        @Override
        public void onBackPressed() {
            super.onBackPressed();
            System.gc();
        }
    /*private class NextTask extends AsyncTask<Void,Void,Void> {
                ProgressDialog progressDailog = new ProgressDialog(Audiovediolist.this);
              @Override
              protected void onPreExecute() {
                super.onPreExecute();
                progressDailog.setTitle("Please Wait");
                progressDailog.setMessage("URL Data Loading ...");
                progressDailog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                progressDailog.setCancelable(true);
                progressDailog.show();
                }
              @SuppressWarnings("static-access")
            @Override
              protected Void doInBackground(Void... params) {
                return null;
                }
             @Override
             protected void onPostExecute(Void result) {
                progressDailog.dismiss();
                }
    }*/
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
                    data = dataList.get(position);
                try {
                      NetWorkCheck netWork = new NetWorkCheck();
                      if (netWork.isNetWorkConnection(this)) {
                          if (Screen_Id == 1) {
                            //  new NextTask().execute();
                              Intent audioInt=new Intent(getApplicationContext(),AudioView.class);
                                audioInt.setType(data.get("text"));
                                startActivity(audioInt);
                           } else if (Screen_Id == 2) {
                                 Intent vedioInt = new Intent(this, VideoPlayActivity.class);
                                 vedioInt.setType(data.get("text"));
                                 startActivity(vedioInt);
                                 }
                       } else {
                              netWork.alert();
                              }  
                    } catch (Exception e) {
                            e.printStackTrace();
                            Toast.makeText(this, "Problem while ListItemClick", Toast.LENGTH_SHORT).show();
                            }
    }
    } 
```

使用的音频播放器的代码是

```
public class AudioView extends Activity implements OnClickListener {
    private MediaPlayer mMediaPlayer;
    private ImageView mPlay;
    private ImageView mPause;
    private ImageView mBack;
    private ImageView mFar;
    private ProgressBar myProgressBar;
    // private PlayerService mService;
    private boolean boolFlag = false;
    private boolean isPausedInCall = false;
    private String url;
    private TelephonyManager mTelephoneMgr;
    private NotificationManager mNotificationManager;
    private int SIMPLE_NOTFICATION_ID;
    private TextView tv;
    // private boolean serviceRunning;
    Notification notifyDetails;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.audio_main);
        getIntentValues();
        initUI();
        uiListener();
        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        notifyDetails = new Notification(R.drawable.mulug_icon, url,
                System.currentTimeMillis());

        mTelephoneMgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
        if (mTelephoneMgr != null) {
            mTelephoneMgr.listen(phoneStateListener,
                    PhoneStateListener.LISTEN_CALL_STATE);
        }
    }

    private void getIntentValues() {
        url = getIntent().getType();

    }

    private void uiListener() {
        mPlay.setOnClickListener(this);
        mPlay.setOnClickListener(this);
        mPause.setOnClickListener(this);
        mPause.setVisibility(android.view.View.INVISIBLE);
        mBack.setOnClickListener(this);
        mFar.setOnClickListener(this);
    }

    private void initUI() {
        tv = (TextView) findViewById(R.id.text);
        mBack = (ImageView) findViewById(R.id.back);
        mPlay = (ImageView) findViewById(R.id.play);
        mPause = (ImageView) findViewById(R.id.pause);
        mFar = (ImageView) findViewById(R.id.fwd);
        myProgressBar = (ProgressBar) findViewById(R.id.progressbar_Horizontal);
        myProgressBar.setProgressDrawable(getResources().getDrawable(
                R.drawable.green_progress));
        myProgressBar.setProgress(0);
            tv.setText(url);
            tv.setFocusable(true);
    }

    private Thread myThread = new Thread() {
        public void run() {
            while (mMediaPlayer.getCurrentPosition() < mMediaPlayer
                    .getDuration()) {
                try {
                    myProgressBar
                            .setProgress(mMediaPlayer.getCurrentPosition());
                } catch (Throwable t) {
                }
            }
        }
    };

    @SuppressLint("NewApi")
    @Override
    public void onBackPressed() {
        super.onBackPressed();
        mMediaPlayer.stop();
        // myThread.stop();
        // mMediaPlayer.release();
        mNotificationManager.cancel(SIMPLE_NOTFICATION_ID);
        System.gc();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        System.gc();
    }
    @SuppressLint("NewApi")
    @Override
    protected void onStart() {
        super.onStart();
        this.setProgressBarIndeterminateVisibility(true);
        try {
            if (boolFlag == false) {
                System.out.println(FinalConstants.URL + "mobile-audio/" + url
                        + ".mp3");
                mMediaPlayer = MediaPlayer.create(
                        this,
                        Uri.parse(FinalConstants.URL + "mobile-audio/" + url
                                + ".mp3"));
            }
            myProgressBar.setMax(mMediaPlayer.getDuration());
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Loading Problems",
                    Toast.LENGTH_SHORT).show();
            Log.e("ERRORS", "ServerFailed to Load...");
            super.onBackPressed();
            e.printStackTrace();
        }
    }

    public PhoneStateListener phoneStateListener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_RINGING) {
                System.out.println("ringing state");
                if (mMediaPlayer != null) {
                    pauseMedia();
                    isPausedInCall = true;
                }
                notificationShow();
            }
            if (state == TelephonyManager.CALL_STATE_IDLE) {
                System.out.println("callState Idle");
                if (mMediaPlayer != null) {
                    if (isPausedInCall) {
                        isPausedInCall = false;
                        playMedia();
                    }
                }
            }
            if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
            }
            super.onCallStateChanged(state, incomingNumber);
        }
    };

    private void pauseMedia() {
        mMediaPlayer.pause();
        changePlayerIcons(false);
    }

    private void playMedia() {
        mMediaPlayer.start();
        changePlayerIcons(true);
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.play:
            if (!boolFlag) {
                try {
                    notificationShow();
                    mMediaPlayer.setLooping(false);
                    // mMediaPlayer.prepareAsync();
                } catch (Exception e) {
                    Toast.makeText(this, "preparing", Toast.LENGTH_SHORT)
                            .show();
                }
                boolFlag = true;
                mMediaPlayer.start();
                myThread.start();
            } else {
                notificationShow();
                mMediaPlayer.getCurrentPosition();
                mMediaPlayer.start();
            }
            changePlayerIcons(true);
            myProgressBar.setProgress(mMediaPlayer.getCurrentPosition());
            mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer arg0) {
                    changePlayerIcons(false);
                    myProgressBar.setProgress(0);
                    onStart();
                }
            });
            mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mp) {
                }
            });
            mMediaPlayer.setOnErrorListener(new OnErrorListener() {
                @Override
                public boolean onError(MediaPlayer mp, int what, int extra) {
                    Toast.makeText(getApplicationContext(),
                            "MediaPlayer Errors", Toast.LENGTH_SHORT).show();
                    Log.e("ERRORS", "MediaPlayer Errors...");
                    return false;
                }
            });
            break;
        case R.id.pause:
            mMediaPlayer.pause();
            mPlay.setVisibility(android.view.View.VISIBLE);
            mPause.setVisibility(android.view.View.INVISIBLE);
            break;
        case R.id.back:
            int dur = mMediaPlayer.getCurrentPosition();
            int pos = (dur > 10000 ? dur - 5000 : 0);
            mMediaPlayer.seekTo(pos);
            break;
        case R.id.fwd:
            int curpos = mMediaPlayer.getCurrentPosition();
            int dur2 = mMediaPlayer.getDuration();
            int pos2 = (curpos + 5000 > dur2 ? dur2 : curpos + 5000);
            mMediaPlayer.seekTo(pos2);
            break;
        }
    }

    private void notificationShow() {
        Context context = getApplicationContext();
        CharSequence contentTitle = "Mulugu Running";
        CharSequence contentText = url + " Weekly Predictions";
        Intent notifyIntent = new Intent(AudioView.this, AudioView.class);
        PendingIntent intent = PendingIntent.getActivity(AudioView.this, 0,
                notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);

        notifyDetails.setLatestEventInfo(context, contentTitle, contentText,
                intent);
        mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
    }

    private void changePlayerIcons(boolean b) {
        if (b) {
            mPlay.setVisibility(android.view.View.INVISIBLE);
            mPause.setVisibility(android.view.View.VISIBLE);
        } else {
            mPlay.setVisibility(android.view.View.VISIBLE);
            mPause.setVisibility(android.view.View.INVISIBLE);
        }
    }
} 
```

使用的 XML 是

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/main_audio"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:gravity="center"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="0.45"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/text"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="2dp"
                    android:ellipsize="marquee"
                    android:focusable="true"
                    android:focusableInTouchMode="true"
                    android:gravity="center_horizontal"
                    android:marqueeRepeatLimit="marquee_forever"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:text="     for more details check on  "
                    android:textColor="#FF0000"
                    android:textSize="20dp"
                    android:textStyle="italic" >

                </TextView>
            </LinearLayout>

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="3dp" >

                <ImageView
                    android:id="@+id/pause"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="10dp"
                    android:src="@drawable/audio_pause" />

                <ImageView
                    android:id="@+id/play"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_marginLeft="2dp"
                    android:layout_marginTop="10dp"
                    android:src="@drawable/audio_play" />

                <ImageView
                    android:id="@+id/back"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/pause"
                    android:layout_marginRight="1dp"
                    android:layout_toLeftOf="@+id/pause"
                    android:layout_toRightOf="@drawable/audio_play"
                    android:src="@drawable/audio_bwd" />

                <ImageView
                    android:id="@+id/fwd"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignTop="@+id/pause"
                    android:layout_marginLeft="1dp"
                    android:layout_toRightOf="@+id/pause"
                    android:src="@drawable/audio_fwd" />
            </RelativeLayout>

            <ProgressBar
                android:id="@+id/progressbar_Horizontal"
                style="?android:attr/progressBarStyleHorizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:12:26.857

**这是一个例子：**

```
public class TextViewMarquee extends Activity {
    private TextView tv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) this.findViewById(R.id.tv);  
        tv.setSelected(true);  // Set focus to the textview
    }
} 
```

**带有文本视图的 xml 文件：**

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:lines="1"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:textColor="#ff4500"
        android:text="Simple application that shows how to use marquee, with a long text" />
</RelativeLayout> 
```

# sql - 基于分组和排序的条件

> ID：13697086
> 
> 赞同：-1
> 
> 时间：2012-12-04T06:09:53.520
> 
> 标签：sql, oracle11g

我有下表和数据以及我的规则的预期输出

```
drop table test_new

create table test_new (id number(9), loc1 number(9), loc2 number(9), percentage number(9));

insert into test_new values (1,1,2,0);
insert into test_new values(2,1,3,10);
insert into test_new values(3,1,4,5);
insert into test_new values(4,1,5,45);
insert into test_new values(5,2,3,0);
insert into test_new values(6,2,4,90);
insert into test_new values(7,2,5,0);
insert into test_new values(8,3,4,0);
insert into test_new values(9,3,5,0);
insert into test_new values(10,4,5,40);
insert into test_new values(11,7,5,0);
insert into test_new values(12,9,4,0);
insert into test_new values(13,10,5,90);
insert into test_new values(14,11,5,70);
insert into test_new values(15,1,15,45); 
```

需要这个表格 查询显示

```
id  loc1 loc2  percentage
15    1    15       45
2    1    3       10
6    2    4       90
13   10   5       90 
```

不是这个

```
id   loc1 loc2  percentage
2    1    3       10
15    1    15      45
6    2    4       90
13   10   5       90 
```

规则：

1.  显示`id, loc1, loc2, percentage`百分比大于零的位置。
2.  删除列中的任何冗余数据，`loc2`以便删除百分比值较低的行。
3.  `percentage asc`根据列 loc1对数据进行排序和分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:28:22.283

试试这个。

```
select t1.* from test_new t1
left join test_new t2
on t1.loc2 = t2.loc2 and t1.percentage < t2.percentage
where t1.percentage > 0 and t2.loc2 is null
order by t1.percentage 
```

但是，我认为根据您的评论（而不是您的结果表，这似乎是错误的），这就是您所期望的：

```
+----+------+------+------------+
| ID | LOC1 | LOC2 | PERCENTAGE |
+----+------+------+------------+
|  2 |    1 |    3 |         10 |
| 15 |    1 |   15 |         45 |
|  6 |    2 |    4 |         90 |
| 13 |   10 |    5 |         90 |
+----+------+------+------------+ 
```

# sql-server-2008 - where 子句和 case 语句在 select 语句中给出空记录

> ID：13697092
> 
> 赞同：1
> 
> 时间：2012-12-04T06:10:44.653
> 
> 标签：sql-server-2008

我有一张桌子叫`Tb_patientBeds`.

现在我想根据该表中的列检索设置为*占用*、*未占用*或全部的记录。`status`

这是我的其他专栏：

```
patientBedID int IDENTITY(1,1) NOT NULL,
patientBedType [varchar](20) NULL,
BedCharge [varchar](20) NULL,
status [varchar](20) NULL, 
```

我写了这样的查询

```
select * from Tb_patientBeds where [status]= case
when [status]= '0'
then 'occupied'
when [status]='1'
then 'unoccupied' else 'All'
end 
```

查询没有返回记录，它显示的是空记录。

有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:19:13.133

尝试这个：

```
SELECT
    CASE 
    WHEN [status] = 1 THEN
        'unoccupied'
    WHEN [status] = 0 THEN
        'occupied'
    ELSE
        'All'
    END,
    *
FROM Tb_patientBeds 
```

# c# - 刷新页面后保持搜索的值

> ID：13697094
> 
> 赞同：0
> 
> 时间：2012-12-04T06:10:48.913
> 
> 标签：c#, asp.net-mvc-3

我已经问过这个问题，我没有得到我的答案。所以我对此做了更多的研究，但仍然找不到合适的好答案。

我的控制器（缩短）：

```
public ActionResult SearchResult(String sortOrder, String carMake, String carModel)
    {
        var cars = from d in db.Cars
                    select d;

        if (!String.IsNullOrEmpty(carMake))
        {
            if (!carMake.Equals("All Makes"))
            {
                cars = cars.Where(x => x.Make == carMake);
            }
        }

        if (!String.IsNullOrEmpty(carModel))
        {
            if (!carModel.Equals("All Models"))
            {
                cars = cars.Where(x => x.Model == carModel);
            }
        }
        switch (sortOrder)
        {
            case "Model":
                cars = cars.OrderBy(s => s.Model);
                break;
            default:
                cars = cars.OrderBy(s => s.Make);
                break;
        }

        return View(cars);
} 
```

我的索引视图（缩短 - 这是用户通过不同输入过滤汽车的地方）：

```
@model IEnumerable<Cars.Models.Car>

@using (Html.BeginForm("SearchResult", "Home", FormMethod.Post))
{
<label>Make</label>
<select id="MakeID" name="carMake">
    <option>All Makes</option>
</select>

<label>Model</label>
<select id="ModelID" name="carModel">
    <option>All Models</option>
</select>

<button type="submit" name="submit" value="search" id="SubmitID">Search</button>
} 
```

我的 SearchResult 视图显示搜索结果（缩短）：

```
@model IEnumerable<Cars.Models.Car>

<table>
@foreach (var item in Model)
{
    <tr>
        <td>
            <label>Make:</label>
            <p>@Html.DisplayFor(modelItem => item.Make)</p>
        </td>
        <td>
            <label>Model:</label>
            <p>@Html.DisplayFor(modelItem => item.Model)</p>
        </td>
    </tr>
}
</table>

<a href="@Url.Action("SearchResult", "Home", new { sortOrder= "Model"})">Model</a> 
```

*   我的目标：当用户点击按模型排序时，页面将按模型对结果进行排序。

*   问题：当点击 sortby 时，`SearchResult`由于 SearchResult 视图中不存在搜索值，所以 action 的所有参数都将为空。

*   问题：如何解决这个问题？

谢谢，阿明

更新：任何例子都将不胜感激。我被后端卡住了在控制器和视图之间发送和获取数据的整个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:36:12.560

您可以像下面这样创建一个类

```
 public CarFilter CarFilter;
    public byte PageSize;
    public short PageNumber;
    public int TotalRows; 
```

其中 CarFilter 是另一个类，您可以在其中存储用户输入的过滤器。并将此类用作您的视图的模型。因此，当您加载视图时，您可以加载汽车过滤器数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:40:07.220

创建类如下：

```
class ManageCarSearch
{
    public CarFilter CarFilter;
    public byte PageSize;
    public short PageNumber;
    public int TotalRows;
    public String sortOrder;

}

Class CarFilter 
{
    public String carMake, 
    public String carModel

} 
```

您的 searchResult 视图如下所示：

```
@model IEnumerable<car>

<table>
@foreach (var item in Model)
{
    <tr>
        <td>
            <label>Make:</label>
            <p>@Html.DisplayFor(modelItem => item.Make)</p>
        </td>
        <td>
            <label>Model:</label>
            <p>@Html.DisplayFor(modelItem => item.Model)</p>
        </td>
    </tr>
}
</table>

<a href="@Url.Action("SearchResult", "Home", new { sortOrder= "Model"})">Model</a> 
```

和控制器如下：

```
public ActionResult SearchResult(String sortOrder, String carMake, String carModel)
    {

        var cars = from d in db.Cars
                    select d;
        ManageCarSearch objsearch = new ManageCarSearch();
       ////your Logic

        return View(objsearch);
} 
```

你的搜索视图如下所示：

```
@model IEnumerable<ManageCarSearch>

@using (Html.BeginForm("SearchResult", "Home", FormMethod.Post))
{
<label>Make</label>
<select id="MakeID" name="carMake">
    <option>All Makes</option>
</select>

<label>Model</label>
<select id="ModelID" name="carModel">
    <option>All Models</option>
</select>

<button type="submit" name="submit" value="search" id="SubmitID">Search</button>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:38:02.403

您可以通过执行以下任一操作来保留您的搜索过滤器：

1.  使用会话将过滤器存储在搜索结果视图中。这样，当您使用排序在同一视图上发布时，您仍然可以使用搜索过滤器。

2.  （我更喜欢这个）将您的模型包装在一个具有搜索过滤器属性的类中。这样，您仍然可以检索搜索过滤器。前提是您有一个接受 Wrapper Model 作为参数的 SearchResult 的 POST。

# c# - ASP.NET 404 处理代码在本地工作，但不在服务器上

> ID：13697098
> 
> 赞同：0
> 
> 时间：2012-12-04T06:11:14.107
> 
> 标签：c#, asp.net, http-status-code-404

我在 DiscountASP.NET 上托管我的网站。我最近在处理 404 错误时遇到了问题，因为没有向客户端发送 404 状态代码，而且我无法弄清楚它为什么突然启动。它曾经工作过。我尝试从一个简单的示例开始解决我的错误处理代码。我有两个页面，两者都存在：

404_start.aspx：此页面旨在模拟不存在的页面。

```
<%@ Page Language="C#" Debug="True" Strict="True" %>
<script runat="server">
public void Page_Load()
{
    Response.TrySkipIisCustomErrors = true;
    Response.StatusCode = 404;
    Response.Status = "404 Not Found";
    Server.ClearError();
    Server.Transfer("404_end.aspx");
}
</script>
<html>
<body>
Start
<br />Response.StatusCode:  <%=Response.StatusCode%>
<br />Response.Status:  <%=Response.Status%>
</body>
</html> 
```

404_end.aspx：此页面旨在模拟用户看到的错误消息。

```
<%@ Page Language="C#" Debug="True" Strict="True" %>
<html>
<body>
End
<br />Response.StatusCode:  <%=Response.StatusCode%>
<br />Response.Status:  <%=Response.Status%>
<br />This is extra text to fix this bug in Internet Explorer:  http://queenofsubtle.com/404/?page_id=2158
<br />This is extra text to fix this bug in Internet Explorer:  http://queenofsubtle.com/404/?page_id=2158
<br />This is extra text to fix this bug in Internet Explorer:  http://queenofsubtle.com/404/?page_id=2158
<br />This is extra text to fix this bug in Internet Explorer:  http://queenofsubtle.com/404/?page_id=2158
</body>
</html> 
```

所以起始页面重定向到结束页面，但 404 错误永远不会出现。Fiddler 说它是 302，然后是 200。但 404_end.aspx 页面实际上显示为“Response.StatusCode：404”。在本地，Fiddler 根据需要看到 404 错误。会不会是楼主的错？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:31:26.867

很可能是。

如果提琴手返回错误代码，应用程序将选择相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:56:28.553

我想我已经想通了。这是我的 web.config 文件的精简版：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <customErrors mode="On" defaultRedirect="~/error/default.aspx" redirectMode="ResponseRewrite">
      <error statusCode="404" redirect="~/error/404.aspx" />
    </customErrors>
  </system.web>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="Redirect to HTTPS" stopProcessing="true">
          <match url=".*" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
            <add input="{HTTP_HOST}" pattern="192\.168\." negate="true" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}{PATH_INFO}" redirectType="SeeOther" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

似乎重写规则和 customErrors 正在交互。当我删除上面显示的重写规则（这意味着当用户请求 http 时强制使用 https）时，服务器再次开始返回 404 错误。所以我在 C# 中实现了 http->https 开关，而不是 web.config 文件，一切似乎都很好。由于在 Web 上执行了 http->https 切换，因此问题并未在本地表现出来。这个问题显然不是 DiscountASP.NET 的错，尽管我不知道为什么我不能使用带有 customErrors 标记的重写规则。

# c++ - 从包含 Unicode 字符的文件中读取

> ID：13697100
> 
> 赞同：2
> 
> 时间：2012-12-04T06:11:18.820
> 
> 标签：c++, unicode, ascii, iostream, ifstream

我有一个巨大的文件，其中包含开头的 unicode 字符串（第一个 ~10,000 个字符左右）我不关心 unicode 部分，我感兴趣的部分不是 unicode 但每当我尝试阅读这些部分时，我得到了`'='`，如果我将整个文件加载到 char 数组并写入某个临时文件（不更改数据），`ofstream`我得到的数据不正确，实际上我得到的只是一个文本文件，`Í`如果我要手动删除 unicode 部分，一切工作正常，所以它似乎`ifstream`无法处理包含 unicode 数据的流，但如果这个假设是真的，有没有办法处理这个文件，向我的项目引入一个新库？

谢谢，

编辑：这是一个示例代码，程序从这个文件中读取，其中包含不能用 ASCII 表示的字符（一些，不是全部）。

```
ifstream inFile("somefile");
inFile.seekg(0,ios_base::end);
size_t size = inFile.tellg();
inFile.seekg(0,ios_base::beg);
char *book = new  char[size];
inFile.read(book,size);
for (int i = 0; i < size; i++) {
  cout << book[i] << " " << i << endl; //book[i] will always be '='
}
ofstream outFile("TEST.txt");
outFile.write(book,size);
outFile.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T06:58:20.500

Keith Thompson 的问题非常重要。根据哪种 Unicode 编码，编写一个小的 C 例程来读取（和丢弃）Unicode 字符可能很简单，或者稍微复杂一些。

假设编码是 UTF-8，您将无法确定何时停止丢弃，因为 ASCII 是 UTF-8 的子集，所以每当您遇到 ASCII 字符时，您可能会想说“就是这样，我们”重新回到 ASCII 领域”，下一个字符可能仍然在 ASCII 范围之外。

因此，您需要读取文件并确定最后一个字符>127 的位置。之后的任何内容都是纯 ASCII——希望如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:23:01.823

文本文件通常只有一种编码 utf-8、utf-16（大端或小端）或 utf-32（大或小）或 ASCII 或其他 ANSI 代码页。编码的混合只能以某些自定义方式进行。

也就是说，您将不得不读取您需要的数据以及您不需要使用相同编码的数据。如果您知道格式是 utf-8，您可以根据您要对数据执行的操作，将文件作为二进制文件逐个读取到 char 缓冲区中。然后，您可以使用类似 strnextc 的 API（在 Windows 上。等效的 API 必须在其他平台上可用）在缓冲区上逐个字符地移动。一旦到达终点 - 您可以将余额移动到缓冲区的前面并从文件中加载缓冲区的其余部分。

实际上，您通常可以将上述方法用于任何编码。但是对于 utf-16，您可以尝试使用 wifstream - 只要文件的字节序和您将运行的平台相同。并且您需要检查 wifstream 的实现是否擅长处理 endiness 的变化并且能够处理 BOM（字节顺序标记） - 通常存在于的 2 字节序列（“FE FF”或“FF FE”）文件的开头 - 不用管代理对。

# nsis - 根据我们正在安装的操作系统更改 NSIS 组件页面中的选择

> ID：13697110
> 
> 赞同：0
> 
> 时间：2012-12-04T06:12:20.543
> 
> 标签：nsis

我发现很难更改 nsis 组件页面中的选择。要求是在安装过程中我得到一个许可协议页面，如果用户同意，那么他/她将点击我同意，在用户点击我同意后，我想知道安装程序安装在哪个操作系统上是可以的在 Windows Embedded OS 或 WinXp/Win7 上。因此，如果是 Windows Embedded OS，我想更改安装包，如果不是 Windows Embedded OS，则安装包会有所不同。

我在我的项目中使用 MUI ver1 而不是 MUI2。请让我知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:52:22.553

要测试运行设置的操作系统，您可以使用`Winver.nsh`随提供的宏定义的宏`LogicLib.nsh`来进行这样的优雅测试

```
;Dont't forget to include
!include "LogicLib.nsh"                 # use of various logic statements
!include "WinVer.nsh"                   # LogicLib extension for OS tests 
```

一个平台测试示例：

```
${if} ${AtLeastWin95}
${AndIf} ${AtMostWinME}
    ;here we are on a pre-win2k
    ;do something        
${elseIf} ${isWin2008}
${orIf} ${AtLeastWin2008R2}
    ;this is post-win7
    ;do other thing
${endif} 
```

要在运行时更改要安装的组件，您可以使用以下宏`Sections.nsh`：

```
;if you have
Section "Sample Database" SecApplicationDB
;...
SectionEnd

;you can select or un select by code:
!insertmacro SelectSection ${SecApplicationDB}
;or
!insertmacro UnselectSection ${SecApplicationDB} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:20:50.323

WinVer.nsh 不支持检查 Embedded NT，但您可以自己执行检查：

```
!include Sections.nsh
!include MUI.nsh

!ifndef VER_SUITE_EMBEDDEDNT
!define VER_SUITE_EMBEDDEDNT 0x00000040
!endif

!insertmacro MUI_PAGE_LICENSE "${__FILE__}"
!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE English

Section "Embedded" SID_EMBED
SectionIn RO
SectionEnd

Section "Normal" SID_NORMAL
SectionIn RO
SectionEnd

Function .onInit
System::Call '*(i156,&i152)i.r1'
System::Call 'KERNEL32::GetVersionExA(ir1)'
System::Call '*$1(&i152,&i2.r2)'
System::Free $1
IntOp $2 $2 & ${VER_SUITE_EMBEDDEDNT}
${If} $2 <> 0
    !insertmacro SelectSection ${SID_EMBED}
    !insertmacro UnselectSection ${SID_NORMAL}
${Else}
    !insertmacro UnselectSection ${SID_EMBED}
    !insertmacro SelectSection ${SID_NORMAL}
${EndIf}
FunctionEnd 
```

# linux - linux bash脚本删除某些文本

> ID：13697113
> 
> 赞同：1
> 
> 时间：2012-12-04T06:12:28.573
> 
> 标签：linux, bash, scripting

我有一个这样的 bash 脚本：

```
#!/bin/bash
# ALL HTML FILES
FILES="*.html"
# for loop read each file
for f in $FILES
do
INF="$f"
OUTF="$f.out.tmp"
# replace javascript
sed '/<!--fff309/,/<!--\/fff309-->/d' $INF > $OUTF
/bin/cp $OUTF $INF
/bin/rm -f $OUTF
done 
```

html 是这样的：

```
<html>
<body>
<div>some normal html code</div><!--fff309-->some javascript code goes here... <!--/fff309-->

<div>
some other html....
</div>
</body>
</html> 
```

bash 脚本工作，但是它删除了下面的所有 html 部分`<!--/fff309-->`

所以它变成：

```
<html>
<body>
<div>some normal html code</div> 
```

无论如何，它只删除部分：

```
<!--fff309--> ...  <!--/fff309--> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:47:41.410

问题不在于您的 sed，而在于您的 bash 脚本。从“*.html”中删除双引号。

Bash 将双引号字符串视为唯一字符串，即它不会使用 IFS 的值分隔字符串，也不会扩展通配符，因此避免`f`脚本上的变量简单地为 a `<name>.html`，并强制它为`*.html`。

如果您回显不同的结果，您会注意到，使用双引号，变量`f`将为`*.html`，并且当您回显它时，将执行扩展，因此您将拥有：`<name_1>.html <name_2>.html ... <name_n>.html`。

例如，

*   在您的目录中创建两个或多个`.html`文件；
*   执行以下脚本：

    ```
    #!/bin/bash

    echo "Incorrect:"    
    for i in "*.html"; do
        echo $i;
    done

    echo "Correct:"
    for i in *.html; do
        echo $i;
    done 
    ```

尝试以下操作：

```
#!/bin/bash
# ALL HTML FILES
FILES=*.html
# for loop read each file
for f in $FILES
do
INF=$f
OUTF=$f.out.tmp
# replace javascript
sed '/<!--fff309/,/<!--\/fff309-->/d' $INF > $OUTF
/bin/cp $OUTF $INF
/bin/rm -f $OUTF
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:57:26.370

也许您可以使用 perl 就地替换，如下所示：我已将您的脚本更改如下，以使其更简单。

```
#!/bin/bash
# ALL HTML FILES
FILES="*.html"
# for loop read each file
for f in $FILES
do
perl -i -lne 'print unless(/\<\!--fff309--\>/.../\<\!--\/fff309--\>/)' $f
done 
```

主要任务由以下行完成：

```
perl -i -lne 'print unless(/\<\!--fff309--\>/.../\<\!--\/fff309--\>/)' 
```

这确实会直接更改文件而无需创建临时文件。我对其进行了测试，该命令对我有用。

此外，如果您坚持使用 sed，则以下内容对我有用：

```
sed '/\<\!--fff309--\>/,/\<\!--\/fff309--\>/d' your_file 
```

对于您的情况，最好使用`-i`sed 选项，它可以进行如下替换。

```
sed -i '/\<\!--fff309--\>/,/\<\!--\/fff309--\>/d' your_file 
```

所以使用这个你的脚本将更改为如下：

```
#!/bin/bash
# ALL HTML FILES
FILES="*.html"
# for loop read each file
for f in $FILES
do
sed '/\<\!--fff309--\>/,/\<\!--\/fff309--\>/d' $f
done 
```

查看 HTML 文件后：

这是你需要的东西：

```
perl -pi -e 's/\<\!--fff309--\>.*\<\!--\/fff309--\>//g' your_file 
```

所以你的脚本变成：

```
#!/bin/bash
# ALL HTML FILES
FILES="*.html"
# for loop read each file
for f in $FILES
do
perl -pi -e 's/\<\!--fff309--\>.*\<\!--\/fff309--\>//g' $f
done 
```

# java - JavaFX 表格视图颜色

> ID：13697115
> 
> 赞同：15
> 
> 时间：2012-12-04T06:12:49.087
> 
> 标签：java, tableview, javafx

我需要创建具有多色行的 JavaFx TableView（color1 表示低优先级，color2 表示中等优先级等）。我创建了 CellFactory

```
public class TaskCellFactory implements Callback<TableColumn, TableCell> {

@Override
public TableCell call(TableColumn p) {

   TableCell cell = new TableCell<Task, Object>() {
        @Override
        public void updateItem(Object item, boolean empty) {
            super.updateItem(item, empty);
            setText(empty ? null : getString());
            setGraphic(null);
            TableRow currentRow = getTableRow();
            Task currentTask = currentRow == null ? null : (Task)currentRow.getItem();
            if(currentTask != null){   
                Priority priority = currentTask.getPriority();
                clearPriorityStyle();
                if(!isHover() && !isSelected() && !isFocused()){
                    setPriorityStyle(priority);
                }
            }
        }

        @Override
        public void updateSelected(boolean upd){
            super.updateSelected(upd);
            System.out.println("is update");
        }

        private void clearPriorityStyle(){
            ObservableList<String> styleClasses = getStyleClass();
            styleClasses.remove("priorityLow");
            styleClasses.remove("priorityMedium");
            styleClasses.remove("priorityHigh");
        }

        private void setPriorityStyle(Priority priority){
            switch(priority){
                case LOW:
                    getStyleClass().add("priorityLow");
                    break;
                case MEDIUM:
                    getStyleClass().add("priorityMedium");
                    break;
                case HIGH:
                    getStyleClass().add("priorityHigh");
                    break;
            }
            System.out.println(getStyleClass());
        }

        private String getString() {
            return getItem() == null ? "" : getItem().toString();
        }
    };
    return cell;
} } 
```

和CSS

```
.priorityLow{ -fx-background-color: palegreen; }
.priorityMedium{ -fx-background-color: skyblue;}
.priorityHigh{ -fx-background-color: palevioletred;} 
```

但我仍然需要突出显示选定的行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T08:26:09.120

无需为 CSS 中的整个单元格设置背景颜色，只需设置 -fx-control-inner-background。然后，您将仍然可以使用默认的重音、悬停和聚焦环。`setPriorityStyle`当然，还要删除您呼叫周围的 if 语句。

如果您还想覆盖默认重音（选定）颜色或悬停颜色等内容，您也可以按照下面的 css 执行此操作 - 但不确定是否真的推荐高亮覆盖，猜测这取决于您的应用程序和期望的用户体验。

```
.priorityLow { 
  -fx-control-inner-background: palegreen;
  -fx-accent: derive(-fx-control-inner-background, -40%);
  -fx-cell-hover-color: derive(-fx-control-inner-background, -20%);
}

.priorityMedium { 
  -fx-control-inner-background: skyblue;
  -fx-accent: derive(-fx-control-inner-background, -40%);
  -fx-cell-hover-color: derive(-fx-control-inner-background, -20%);
}

.priorityHigh { 
  -fx-control-inner-background: palevioletred;
  -fx-accent: derive(-fx-control-inner-background, -40%);
  -fx-cell-hover-color: derive(-fx-control-inner-background, -20%);
} 
```

![行高亮](../Images/1fd2bb3a222f794f9a431341e4b07df2.png)

* * *

JavaFX 的详细样式信息可以在JavaFX 2.2的默认[caspian.css 样式表和](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css)[JavaFX 2 CSS 参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)中找到。要为您的 JavaFX 版本查找 caspian.css，您可以解压缩`jfxrt.jar`（有时在 jre/lib 目录中找到）。

**更新**

JavaFX 的默认样式表现在命名`modena.css`为`caspian.css`.

# android - 在 LIstView 中延迟加载图像非常慢

> ID：13697120
> 
> 赞同：0
> 
> 时间：2012-12-04T06:13:11.130
> 
> 标签：android, android-listview, android-image, performance, android-lazyloading

我已经在我的应用程序（twitter 类型的应用程序）中实现了图像的延迟加载（来自远程服务器），并且获取部分并将图像加载到确切的 imageView 中工作得很好。但是适配器的“getView”部分只有在我向下滚动 ListView 后才会被调用，因此只有在我向下滚动之后才能从远程服务器获取图像（我通过在适配器“getView”代码中执行 asyntask 来获取图像）看到正在加载的图像有相当大的延迟。一旦图像被加载并存储在内存缓存中，向上或向下滚动就没有问题了。唯一的问题是第一次加载图像加载缓慢

那么有没有办法纠正它，当我向下滚动时，我应该能够获得图像位图并在我向下滚动时设置位图。我希望它与 twitter 应用程序完全一样，我在加载个人资料图片时看不到延迟。

**TIA**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:07:17.623

如果你在 getView() 方法中调用你的 web 服务，它会在你每次上下滚动时被调用。由于为屏幕上可见的行调用了 getView 方法。

您可以做的是将图像加载到 a `HashMap<int, Object>`，其中 int == listview 中的位置，并且 object 是图像。在 getview 中，您可以检查位置 + (1 -> 10) 是否已加载，如果没有，则在某种后台任务中从 web 服务中检索它们。在 hashmap 中加载图像，并使 getView() 方法使用这些图像。不是直接从网络服务中检索到的图像。否则，您确实必须等待它们被检索。同样，您可以在哈希图中缓存图像，而不是在上下滚动时重复检索相同的图像。

当然已经有人做了这样的适配器，只是在这里搜索我发现[了这个](https://stackoverflow.com/questions/4667064/android-implementing-endless-list-like-android-market)SO question，其中有一个答案是指 CommonsWare[无尽的适配器](https://github.com/commonsguy/cwac-endless)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:26:43.207

好吧，您的方法不正确，您必须先获取所有图像，然后再将它们显示为每次滚动列表时调用的获取视图，因此每次调用服务并获取编号时。列表可以在屏幕上显示的图像数量（例如一次 4-5 个）。

您要做的是：- 1）获取所有图像。2）当您将所有图像集适配器获取到 listview 时，您将在列表中立即拥有所有图像，因为您已经下载了图像，

但这不是延迟加载——延迟加载意味着用户一次只能看到部分图像，如果他不滚动，那么从服务中下载图像是没有意义的。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:47:35.870

有一个名为 AALP 的库，您可以使用它来帮助您延迟加载列表视图。[https://bitbucket.org/zedvoid/aalp/src](https://bitbucket.org/zedvoid/aalp/src) 希望这可以为您节省一些时间和精力。

# javascript - 过渡/动画后CSS触发javascript

> ID：13697121
> 
> 赞同：1
> 
> 时间：2012-12-04T06:13:25.763
> 
> 标签：javascript, html, css, css-transitions

我不想从 JS 触发 CSS 动画，而是相反。

`-webkit-transition`如果我通过or类型样式表做 CSS 动画`transition: all 1000ms`，有没有办法在转换完成后触发 JS 函数？

基本上我一直在通过 javascript 制作动画，我想将其中一些转换为 CSS 动画，但我需要在动画完成后触发 javascript 事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T06:34:28.357

```
box.addEventListener('webkitTransitionEnd', function( event ) { 
     alert( "Finished transition!" ); 
}, false ); 
```

请参阅：[CSS 过渡回调](https://stackoverflow.com/questions/2087510/callback-on-css-transition)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:34:47.450

我认为您在转换之前、触发它和之后都需要 javascript。进行某种回调...但我的知识很差

# ruby-on-rails-3 - 如何在 Refinerycms 中创建新的控制器和模型以及如何使用它？

> ID：13697122
> 
> 赞同：0
> 
> 时间：2012-12-04T06:13:27.727
> 
> 标签：ruby-on-rails-3, controller, gem, ruby-on-rails-3.2, refinerycms

在这里，我想使用炼油厂创建一个应用程序，因为我需要一个新的表恢复。并访问该表我想使用我自己的控制器恢复。怎么可能？**请帮我....**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:38:10.150

正如@sevenseacat 所提到的，该炼油厂指南有一个扩展 refinirycms 的基本演练。此外，如果您还没有看过那里，[Railscasts](http://railscasts.com)有一个[2 集关于炼油厂](http://railscasts.com/episodes?utf8=%E2%9C%93&search=refinery)cms 的系列。第二个涉及您想要的主题，但它是专业剧集，您需要订阅，但如果您使用 Rails 进行任何工作，专业订阅（每月 9 美元）很快就会收回成本。注意：我与 Railscasts 没有任何关系。

# magento - 如何在 magento 中预填充我的自定义表单

> ID：13697126
> 
> 赞同：-1
> 
> 时间：2012-12-04T06:13:57.927
> 
> 标签：magento

我创建了一个自定义表单，类似于客户注册表单，在`Magento`. 当出现错误消息时，我想预先填充此表单。

有谁知道我可以如何预填充自定义表单`Magento`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:10:47.337

如果没有看到您的代码，很难说哪种方法会起作用，但是其中一种方法应该起作用。

**使用 JavaScript 验证**- 客户端验证，只有在所有需要的信息都正确时才发布

```
<form name="my-form" id="my-form" method="post">
<label for="username">
< ?php echo $this->__("User name") ?> <span>*</span></label><br />
<input type="text" id="username" name="username" class="input-text required-entry"/>
.....
</form>

<script type=”text/javascript”&gt;
//< ![CDATA[
var customForm = new VarienForm('my-form');
//]]>
</script> 
```

查看所有[验证类名称的列表](http://www.9magentothemes.com/forums/threads/259-form-validation-in-magento)

**重新填充字段** 获取客户填写的所有帖子变量信息的列表

```
Mage::app()->getRequest()->getPost(); 
```

获取表单域（例如`<input type='text' name='firstname' ... />`）

```
Mage::app()->getRequest()->getPost('firstname'); 
```

所以在你 .phtml 中尝试（如果你在错误时进行重定向，这将不起作用）

```
<input type='text' name='firstname' value="<?php echo Mage::app()->getRequest()->getPost('firstname');?>" /> 
```

如果上述方法不起作用，那么您需要将帖子信息保存到会话中。

如果验证失败，则在您的控制器中将信息保存到客户会话

```
 Mage::getSingleton( 'customer/session' )->setData( 'yourFormName', Mage::app()->getRequest()->getPost() ); 
```

在您的 phtml 模板中，如果存在“yourFormName”变量会话，则打印数据。

# c++ - 打印对象数组的每个元素时遇到问题

> ID：13697133
> 
> 赞同：0
> 
> 时间：2012-12-04T06:14:53.043
> 
> 标签：c++, arrays, class, object, loops

我正在做一个项目，并被我认为是范围和逻辑问题所困扰。我正在创建一个名为“Person”的类，其中包含四个字符串变量、姓氏、名字、最喜欢的颜色和性别。我正在创建第二个名为“PersonList”的类，其中一个变量是“Person”对象的数组。我设置了一个名为 MAX 的 const int 来确定数组的大小（当前为 3）。最终，我想将“Person”对象的字符串变量输入到 main 中声明的“newDude”对象中。例如，当“readNewPerson”函数运行时，我输入 Doe、John、Blue、Male。这一步有效！

接下来，我希望将这个“newDude”复制到主地址 dudesList[0] 中声明的“dudesList”对象中，并再次运行“readNewPerson”函数。如果一切正常，我认为应该将 Smith、Jane、Pink、Female 复制到 dudesList[1]，而 Johnson、Mike、Green、Male 应该复制到 dudesList[2]。最后，我想将所有三个对象都打印到控制台。

我在“addPersonToList”和“printList”函数中的“for”循环中的某个地方出错了，我的变量没有正确迭代。我的猜测是，由于我在函数内部声明了计数器“i”，因此每次创建“newDude”时它都会死亡并重置为零。如果我对此是正确的，那么声明计数器的最佳位置在哪里，我应该何时迭代它？

我非常感谢任何人可以提供的任何反馈，我当然不希望任何人为我做任务。在这一点上，我可以在正确的方向上稍微推动一下，因为我对应该是一个非常简单的任务感到非常沮丧，至少在概念上是这样。

到目前为止，这是我的程序：

```
// contact list with one-word strings only

#include <iostream>
using namespace std;

const int MAX = 3;

class Person

{

    private:
        string dudesLName;
        string dudesFName;
        string dudesColor;
        string dudesGender;
    public:
        void readNewPerson (); // function declaration to ask for info
        void printPerson (); //function declaration to display info to console
};

class PersonList

{

    private:
        Person dudesList [MAX];
    public:
        void addPersonToList (Person newDude); //function declaration to add my newDude to the dudesList array
        void printList (); //function declaration to print the entire array

};

//the main function is a simple switch-case asking for user choices

int main (void)

{

Person newDude; //one object contains 4 simple string variables

PersonList List; //one object contains an array of [MAX] dudes

int userChoice; //integer for the user's choice in switch-case

cout << "~~Welcome to Stephen's Contact List~~" << endl;

cout << "Please enter your choice:" << endl;

cout << " 1 - enter " << MAX << " new people" << endl;

cout << " 2 - print the contact list" << endl;

cout << " 3 - retrieve by last name" << endl;

cout << " 4 - retrieve by address" << endl;

cout << " 5 - retrieve by gender" << endl;

cin >> userChoice;

switch (userChoice)

{

    case 1:
        for (int i = 0; i < MAX; i++)
            {
            newDude.readNewPerson (); //function call to enter one person's info
            List.addPersonToList (newDude); //function call to add newDude to dudesList array
            }
        break;
    case 2:
        cout << "2 doesn't work yet" << endl;
        List.printList (); //function call to print entire list
        break;
    case 3:
        cout << "3 doesn't work yet" << endl;
        break;
    case 4:
        cout << "4 doesn't work yet" << endl;
        break;
    case 5:
        cout << "5 doesn't work yet" << endl;
        break;
}

cout << "thanks dude!!" << endl;

return 0;
}

// function definitions

void Person::readNewPerson ()

{

    cout << "enter a dude's last name please" << endl;
    cin >> dudesLName;

    cout << "enter a dude's first name please" << endl;
    cin >> dudesFName;

    cout << "enter a dude's favorite color please" << endl;
    cout << "for test purposes, just enter one word" << endl;
    cin >> dudesColor;

    cout << "enter a dude's gender please" << endl;
    cout << "male or female is fine, so is dude or dudette" << endl;
    cin >> dudesGender;

    return;
}

void Person::printPerson ()

{

   cout << "dude's name is " << dudesLName << ", " << dudesFName << endl;

   cout << "his (her?) favorite color is: " << endl;

   cout << dudesColor << endl;

   cout << "and his (her?) gender is: " << endl;

   cout << dudesGender << endl << endl;

   return;

}

void PersonList::addPersonToList (Person newDude)

{

    for (int i = 0; i < MAX; i++) //supposed to iterate the array address as it adds Person objects to the array

    dudesList [i] = newDude; //this is where the newDude object is copied to the array

    return;

}

void PersonList::printList()

{

    for (int i = 0; i < MAX; i++)
        dudesList [i].printPerson ();

    return;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:26:28.873

好的，似乎出了问题的是，您将同一个人添加到列表中 3 次。你打电话时`addPersonToList`

```
void PersonList::addPersonToList (Person newDude)
{
    for (int i = 0; i < MAX; i++) //supposed to iterate the array address as it adds Person objects to the array
    dudesList [i] = newDude; //this is where the newDude object is copied to the array
    return;
} 
```

现在你有几个选择。

什么可能是最容易做和设想的，是将索引从你调用它的地方传递到你的方法中，并使你的方法像这样：

```
void PersonList::addPersonToList (Person newDude, int index)
{
    dudesList [index] = newDude; //this is where the newDude object is copied to the array
} 
```

然后在你的 switch 语句中，像这样调用它

```
case 1:
    for (int i = 0; i < MAX; i++)
        {
        newDude.readNewPerson (); //function call to enter one person's info
        List.addPersonToList (newDude, i); //function call to add newDude to dudesList array
        } 
```

现在可能是“正确”的方法是跟踪您添加的最后一个索引是在您的 PersonList 类中

```
class PersonList
{
    private:
        Person dudesList [MAX];
        int indexToAdd = 0;  // your new index
    public:
        void addPersonToList (Person newDude); //function declaration to add my newDude to the dudesList array
        void printList (); //function declaration to print the entire array   
}; 
```

然后在你的`addPersonToList`方法中加入

void PersonList::addPersonToList (Person newDude) { for (int i = 0; i < MAX; i++) //应该在将 Person 对象添加到数组 dudesList [indexToAdd] = newDude; 时迭代数组地址 //这是将newDude对象复制到数组indexToAdd++的地方；返回; }

# android - PhoneGap中的空白屏幕？

> ID：13697135
> 
> 赞同：0
> 
> 时间：2012-12-04T06:15:02.803
> 
> 标签：android, iphone, jquery-mobile, cordova

我准备了一个使用phonegap的应用程序。

我的应用程序从服务器收集数据。数据可能超过 500 条记录，我第一次显示 10 条记录。

页面底部有四个按钮（第一个、上一个、下一个和最后一个）：当用户单击下一个按钮时，将显示下 10 条记录。如果用户想要过滤记录，只需单击过滤器按钮，它将移动到过滤器屏幕。用户可以选择过滤选项并单击提交按钮，将显示相关记录。它工作正常。

我的问题是当从过滤屏幕回来时，我已经显示了相关记录，在设备将其保留 2 或 3 分钟后，当拖动屏幕记录显示时单击显示空白屏幕的最后一个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:26:35.713

当您当时从过滤器屏幕返回时，只需在图像中添加数组并设置为`UITableView`或的委托方法`UICollectionView`并重新加载您用于显示图像和数据的`UITableView`或`UICollectionView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:25:17.480

每次回来时都用数据数组重新加载页面。

# mysql - 如何总结日期和时间？

> ID：13697136
> 
> 赞同：0
> 
> 时间：2012-12-04T06:15:09.037
> 
> 标签：mysql, date, time, sum, time-format

我试着总结一下：

```
SUM(TIME_FORMAT(TIMEDIFF(eTime, sTime),'%d d %k h %i m')) AS the_Time FROM Business 
```

但是，如果我删除 SUM 它会显示我想要的格式。如果我添加 SUM，则它返回 null。谁能告诉我如何总结日期和时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:22:04.977

你需要总结然后格式化

```
TIME_FORMAT(SUM(TIMEDIFF(eTime, sTime),'%d d %k h %i m')) AS tTime FROM Business 
```

# xaml - System.ArgumentException，值不在 Metro 应用程序的预期范围内

> ID：13697138
> 
> 赞同：-1
> 
> 时间：2012-12-04T06:15:20.220
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml

我收到了这个异常，我不知道它为什么会抛出 this `ArgumentException`。

有谁知道是什么导致这个异常发生在 Metro 应用程序中？

是由于 XAML 设计中的任何错误还是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T18:26:29.880

您可能正在将`Selector.SelectedItem`a `ComboBox`、`ListView`等设置为实际上不在绑定`ItemsControl.ItemsSource`集合中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:21:31.650

如果您的代码/xaml 中没有明显问题，请尝试[此方法](http://blog.galasoft.ch/archive/2012/09/10/adventures-in-windows-8-solving-activation-errors.aspx)

# joomla2.5 - 以下地址失败：myname@gmail.com

> ID：13697139
> 
> 赞同：4
> 
> 时间：2012-12-04T06:15:20.897
> 
> 标签：joomla2.5

我正在尝试在 Joomla 2.5 中建立联系表格。填写完所有字段并提交表单后，我收到如下错误：

> 以下地址失败：myname@gmail.com。

我使用的电子邮件是有效的。

我的 SMTP 设置如下：

**邮件设置**

```
Mailer: SMTP Server
Mail from: myname@gmail.com
From Name: joomla 
Sendmail Path: /usr/sbin/sendmail
SMTP Authentication: Yes
SMTP Security: SSL 
SMTP Port: 465 
SMTP Username: myname@gmail.com
SMTP Password: ****** 
SMTP Host: smtp.gmail.com 
```

**这是发送电子邮件的代码**

```
<?php
/**
 * @package     Joomla.Site
 * @subpackage  com_mailto
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

    defined('_JEXEC') or die;

/**
 * @package     Joomla.Site
 * @subpackage  com_mailto
 */

    class MailtoController extends JControllerLegacy
    {
    /**
     * Show the form so that the user can send the link to someone
     *
     * @access public
     * @since 1.5*/

    function mailto()

     {
         $session = JFactory::getSession();
     $session->set('com_mailto.formtime', time());
     JRequest::setVar('view', 'mailto');
     $this->display();
     }

    /**
     * Send the message and display a notice
     *
     * @access public
     * @since 1.5
     */
    function send()
    {
        // Check for request forgeries
        JSession::checkToken() or jexit(JText::_('JINVALID_TOKEN'));

        $app    = JFactory::getApplication();
        $session = JFactory::getSession();
        $db = JFactory::getDbo();

        $timeout = $session->get('com_mailto.formtime', 0);
        if ($timeout == 0 || time() - $timeout < 20) {
            JError::raiseNotice(500, JText:: _ ('COM_MAILTO_EMAIL_NOT_SENT'));
            return $this->mailto();
        }

        $SiteName   = $app->getCfg('sitename');
        $MailFrom   = $app->getCfg('mailfrom');
        $FromName   = $app->getCfg('fromname');

        $link       = MailtoHelper::validateHash(JRequest::getCMD('link', '', 'post'));

        // Verify that this is a local link
        if (!$link || !JURI::isInternal($link)) {
            //Non-local url...
            JError::raiseNotice(500, JText:: _ ('COM_MAILTO_EMAIL_NOT_SENT'));
            return $this->mailto();
        }

        // An array of email headers we do not want to allow as input
        $headers = array (  'Content-Type:',
                            'MIME-Version:',
                            'Content-Transfer-Encoding:',
                            'bcc:',
                            'cc:');

        // An array of the input fields to scan for injected headers
        $fields = array(
            'mailto',
            'sender',
            'from',
            'subject',
        );

        /*
         * Here is the meat and potatoes of the header injection test.  We
         * iterate over the array of form input and check for header strings.
         * If we find one, send an unauthorized header and die.
         */
        foreach ($fields as $field)
        {
            foreach ($headers as $header)
            {
                if (strpos($_POST[$field], $header) !== false)
                {
                    JError::raiseError(403, '');
                }
            }
        }

        /*
         * Free up memory
         */
        unset ($headers, $fields);

        $email              = JRequest::getString('mailto', '', 'post');
        $sender             = JRequest::getString('sender', '', 'post');
        $from               = JRequest::getString('from', '', 'post');
        $subject_default    = JText::sprintf('COM_MAILTO_SENT_BY', $sender);
        $subject            = JRequest::getString('subject', $subject_default, 'post');

        // Check for a valid to address
        $error  = false;
        if (! $email  || ! JMailHelper::isEmailAddress($email))
        {
            $error  = JText::sprintf('COM_MAILTO_EMAIL_INVALID', $email);
            JError::raiseWarning(0, $error);
        }

        // Check for a valid from address
        if (! $from || ! JMailHelper::isEmailAddress($from))
        {
            $error  = JText::sprintf('COM_MAILTO_EMAIL_INVALID', $from);
            JError::raiseWarning(0, $error);
        }

        if ($error)
        {
            return $this->mailto();
        }

        // Build the message to send
        $msg    = JText :: _('COM_MAILTO_EMAIL_MSG');
        $body   = sprintf($msg, $SiteName, $sender, $from, $link);

        // Clean the email data
        $subject = JMailHelper::cleanSubject($subject);
        $body    = JMailHelper::cleanBody($body);
        $sender  = JMailHelper::cleanAddress($sender);

        // Send the email
        if (JFactory::getMailer()->sendMail($from, $sender, $email, $subject, $body) !== true)
        {
            JError::raiseNotice(500, JText:: _ ('COM_MAILTO_EMAIL_NOT_SENT'));
            return $this->mailto();
        }

        JRequest::setVar('view', 'sent');
        $this->display();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T01:43:14.377

在 Linux (SELINUX) 上应用：
setsebool -P httpd_can_network_connect=1
setsebool -P httpd_can_sendmail=1

重启

在 Windows 上：
在 php.ini
中取消注释
;extension=php_openssl.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:08:36.587

只需在管理页面更改全局配置中的邮件程序即可

# mysql - Mysql查询花费大量时间来获取数据

> ID：13697141
> 
> 赞同：2
> 
> 时间：2012-12-04T06:15:25.430
> 
> 标签：mysql, c#-4.0

我正在从具有 60 万条记录的多个表中获取数据。但是要花很多时间来获取它。请让我知道如何缩短获取它的时间。我也使用过 LIMIT 案例，但仍然没有改善。

我的查询是：

```
SELECT DISTINCT 
tf_history.thefind_id, 
tf_product.product_id, 
tf_product.`name`, 
tf_product.product_url, 
tf_product.image_tpm, 
tf_product.image_thefind, 
tf_product.image_accuracy, 
(SELECT MIN(tf_h.price)
 FROM tf_history AS tf_h
 WHERE tf_h.thefind_id = tf_history.thefind_id) as price, 
oc_product.price AS priceTPM
FROM tf_product
LEFT JOIN tf_history ON tf_product.product_id = tf_history.product_id 
                     AND tf_product.thefind_id = tf_history.thefind_id
LEFT JOIN oc_product ON tf_product.product_id = oc_product.product_id 
WHERE  tf_product.product_id = @product_id 
```

我的表：

```
tf_history

history_id  int(11) NO  PRI     auto_increment
thefind_id  int(11) NO          
product_id  int(11) NO          
price   decimal(15,4)   NO          
date    datetime    NO          

AND
tf_product

thefind_id  int(11) NO  PRI     auto_increment
product_id  int(11) NO          
name    varchar(255)    NO          
store_id    int(11) NO          
product_url varchar(255)    NO          
image_tpm   varchar(255)    NO          
image_thefind   varchar(255)    NO          
image_accuracy  int(3)  NO          
date    datetime    NO 
```

但是当我使用这个查询时：

```
SELECT * from tf_history 
```

我在 0.641 秒内得到了结果，那可能是什么问题？当记录较少时，第一个查询运行顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:49:04.727

终于得到了结果，通过使用索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:47:27.207

将子选择列移动到连接中

```
SELECT DISTINCT 
th.thefind_id, 
tp.product_id, 
tp.`name`, 
tp.product_url, 
tp.image_tpm, 
tp.image_thefind, 
tp.image_accuracy, 
th.price, 
op.price AS priceTPM
FROM tf_product tp
LEFT JOIN (SELECT thefind_id, product_id, MIN(price) as price
           FROM tf_history
           group by thefind_id, product_id) th ON tp.product_id = th.product_id
                                               AND tp.thefind_id = th.thefind_id
LEFT JOIN oc_product op ON tp.product_id = op.product_id 
WHERE  tp.product_id = @product_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T18:02:07.423

使用索引将解决您的问题。

# excel - MS Excel：编写公式来计算平均时间

> ID：13697142
> 
> 赞同：0
> 
> 时间：2012-12-04T06:15:31.593
> 
> 标签：excel, datetime

我有一张以 24 小时时间格式记录的进出时间的表格。（A1 包含在时，A2 包含在外）。提供一个月内所有日期的进出时间。因此，某些单元格包含文本，例如在节假日的情况下，单元格包含“H”，而在周末的情况下，单元格包含“SAT”或“SUN”。我已经想出通过使用下面的公式来获得总时间（将单元格格式设置为 hh:mm）：

=ABS(Sheet1!A1-Sheet1!A2)

现在我想避免得到#VALUE！假期和周末的错误并计算平均总时间。

有人可以帮忙吗？以下是显示包含总时间和文本的单元格的示例数据。

```
Dates     1     2     3      4      5     6    ...           AVG
ABC1      H   4.00  12.00   7.45   SAT   SUN   ...        <avg time>
ABC2      H   8.00  13.00   8.45   SAT   SUN   ...        <avg time> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:22:53.287

您可以使用 ISNUMBER() 函数只考虑时间并忽略字母：[http ://www.techonthenet.com/excel/formulas/isnumber.php](http://www.techonthenet.com/excel/formulas/isnumber.php)

# telerik - radajaxmanager 用于在 radgrid 中进行编辑清除我的页面标题

> ID：13697146
> 
> 赞同：2
> 
> 时间：2012-12-04T06:15:57.933
> 
> 标签：telerik, master-pages, telerik-grid, radajaxmanager, radajaxloadingpanel

我有一个包含 radgrid 的 aspx 页面。我将网格放置在 radajax 管理器中，以 ajaxify 内联编辑和删除操作。问题是它使我的页面头清晰。我确实喜欢这个

```
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" >
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="radGdRatings">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="radGdRatings" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
        <telerik:AjaxSetting AjaxControlID="radGdPobabilityMultiplier">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="radGdPobabilityMultiplier" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager>
<telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server" Skin="Office2007">
</telerik:RadAjaxLoadingPanel> 
```

在我的内容页面中。我的意思是我没有将 radajaxmanager 放在内容页面本身而不是母版页中。

我尝试将 ajaxmanager 的 EnablePageHeadUpdate 属性设置为 true 或 false。它没有帮助。

另外，我尝试通过在页面加载中动态添加 ajax 设置为

```
RadAjaxManager1.AjaxSettings.AddAjaxSetting(radGdRatings, radGdRatings, RadAjaxLoadingPanel1)
RadAjaxManager1.AjaxSettings.AddAjaxSetting(radGdPobabilityMultiplier, radGdPobabilityMultiplier, RadAjaxLoadingPanel1) 
```

那也没有用。

我给我的页面标题是这样的

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
Manage RA
</asp:Content> 
```

谁能帮我解决这个问题？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:46:00.930

请尝试将`RadAjaxManager`移至母版页，然后`RadAjaxManagerProxy`在内容页面上放置并使用它。您可能会以某种方式在您的页面上使用两个 RadAjaxManager。

# html - Firefox 和 Chrome 的文本框和按钮顶部边距问题

> ID：13697150
> 
> 赞同：2
> 
> 时间：2012-12-04T06:16:22.217
> 
> 标签：html, css

有人可以修复 Firefox 和 Chrome 中发生的上边距问题...需要在两种浏览器中修复 2 像素边距...请在 chrome 和 Firefox 中检查相同...

这是[链接](http://jsfiddle.net/MP6CC/)...

```
.smalCopybtn{float:left;text-decoration: none;color: #23699A;border: solid 1px #ccc;background-color: #ddd;background-image: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#dddddd));
background-image: -moz-linear-gradient(top,  #ffffff,#dddddd);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#dddddd');text-shadow:0 1px 0 rgba(255, 255, 255, 0.5);
font:normal 11px Arial, Helvetica, sans-serif;-webkit-border-radius: 2px; -moz-border-radius:2px;border-radius:2px; padding:2px 4px 2px 4px;}

.mleft5{margin-left:5px;}
.dvleft{float:left;}

.txtbx2{padding:2px;font-size:11px; border:solid 1px #c4c4c4;outline:none;transition: all 0.25s ease-in-out; -webkit-transition: all 0.25s ease-in-out;-moz-transition: all 0.25s ease-in-out;border-radius:2px;
-webkit-border-radius:2px;-moz-border-radius:2px; box-shadow:0 1px 6px rgba(0,0,0,.1) inset;-webkit-box-shadow:0 1px 6px rgba(0,0,0,.1) inset;-moz-box-shadow:0 1px 6px rgba(0,0,0,.1) inset}

a{text-decoration:none;color:#23699a;outline:none; cursor:pointer;}a:hover{text-decoration:underline;}

<span class="dvleft mleft5">
<input class="txtbx2" type="text" value="test value here" style="width: 280px" >
</span>
<a class="smalCopybtn" style="margin-left:-2px; margin-top:2px;">
<span style="padding-left:1px;">Copy</span>
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:25:15.310

**删除** `margin-top:2px;` **您的锚链接**

***[现场演示](http://jsfiddle.net/rohitazad/MP6CC/2/)***

## ------

**你写这个**

```
<a class="smalCopybtn" style="margin-left:-2px; margin-top:2px;"> 
```

**消除** `margin-top:2px;`

## ------------

**或添加此**

```
.txtbx2{
vertical-align:top;
} 
```

***[更新的演示](http://jsfiddle.net/rohitazad/MP6CC/3/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:25:48.693

如果您问的是按钮向下移动了 2px，那么这就是您的解决方案。

在您的 CSS 中，删除导致问题的 smalCopybtn 的浮动。

Float 已将标签转换为 display:block，但它应该是内联显示。

有关浮动及其效果的更多信息，请参阅

[http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:23:52.233

为什么你的`<a>`标签不在一个`<p>`或 div 或 span 之内？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:38:49.937

Rajivs 的解决方案有效——`float:left`从你的 CSS 中删除；
或
（Carols 的解决方案）将锚点包含在`<span> </span>`. ！顺便说一句，包括锚在内`<p> </p>` **不起作用**！

**在 Firefox、Chrome 和 Safari 中测试。**

# opengl-es - OpenGL ES 2.0 状态的 UML 图？

> ID：13697152
> 
> 赞同：3
> 
> 时间：2012-12-04T06:16:31.277
> 
> 标签：opengl-es, uml, opengl-es-2.0

任何人都可以提供描述 OpenGL ES 2.0 状态机的 UML 图吗？

理想情况下，这样的图应该描述诸如纹理有宽度、高度、类型、内部格式等；程序附加了着色器，可能会或可能不会链接，有制服等；等。

我会非常感兴趣的原因是因为我经常发现自己想知道以下事情：

*   纹理参数（用 设置`glTexParameter`）是否与当前纹理或纹理单元相关联？
*   启用的广义向量属性集是当前绑定的 VBO 的一部分吗？还是当前计划的一部分？还是全球性的？

拥有 OpenGL 的 UML 图对于一目了然地回答这些问题非常有用，而不必翻阅大量的文档来试图弄清楚所有不同的组件如何协同工作。

我意识到寻找这个是一个很长的尝试，因为我认为这是一个巨大的努力。不过，我认为这将非常有用。即使是部分答案也会有很大帮助。同样，除我所针对的版本（ES 2.0）之外的某个版本的 OpenGL 图表也会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:06:49.507

OpenGL Insights 书的网站为 OpenGL 4.2 和 OpenGL ES 2.0 的整个渲染管道提供了 UML 状态图：http: [//openglinsights.com/pipeline.html](http://openglinsights.com/pipeline.html)

该图大致显示了阶段的交互以及每个状态涉及的 GL 对象，并显示了描述这些对象的规范章节。

该图没有显示的是所涉及对象的状态，但您可以在规范本身中找到它。在 OpenGL ES 2.0 规范第 6.2 章中，所有对象和方面都列出了它们的状态以及如何访问它。

因此，如果您使用规范中的表格编号注释状态图，您或多或少拥有您想要的一切。

# php - jQuery 删除 $.ajax 成功的表行

> ID：13697154
> 
> 赞同：1
> 
> 时间：2012-12-04T06:16:45.913
> 
> 标签：php, javascript, jquery

成功调用 ajax 后，我需要删除表格行，不知道该怎么做。这是我的代码：

```
function closelead(rowid){
            var rowid1 = rowid;
            alert(rowid1);
            var parent = $(this).parent();
            $.ajax({
                type: "POST",
                url: "ajax/close.php",
                data: "rowid="+ rowid1,

                success: function(html){

                }
            });

            } 
```

```
<tr><td><input type="button" onclick="closelead(<?php echo $leadlist['ID'];?>)" value="Close" class="searchbutton" /></td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:26:49.360

Onclick 是 1999 年...

```
$('#closelead').on('click', function() {
    var $row = $(this).parent().parent();
    var rowid = $(this).data("row-id");
    $.ajax({
        type: "POST",
        url: "ajax/close.php",
        data: "rowid=" + rowid,
        success: function() {
            $row.remove();
        }
    });
});​ 
```

将 HTML 更改为此。

```
<tr><td><button id="closelead" class="searchbutton" data-row-id="<?php echo $leadlist['ID'];?>">Close</button></td></tr> 
```

[演示](http://jsfiddle.net/JrWBh/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T06:17:57.647

您可以使用[**最接近（）**](http://api.jquery.com/closest/)找出包含单击按钮的行，并使用[**remove()**](http://api.jquery.com/remove/)删除按钮行。

```
success: function(html){
       $(this).closest('tr').remove();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T06:22:47.937

查看您已经`var parent = $(this).parent();`声明的代码。现在，在成功使用 ajax 响应之后，`parent.parent().remove();` 这也很容易理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:19:32.653

利用`remove().`

```
$(this).closest('tr').remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T06:22:11.383

看看 Jquery [remove](http://api.jquery.com/remove/) - 它会做的伎俩

# iphone - 在套接字连接中附加空字符串？

> ID：13697157
> 
> 赞同：1
> 
> 时间：2012-12-04T06:17:31.620
> 
> 标签：iphone, objective-c, ios, ipad, sockets

我正在做一个套接字连接并通过套接字写入数据，我需要在我的数据末尾加上空字符串，例如，

myMethod=ABC||10D=12345||phNumber=zzz||lang=english 最后在英语之后我需要附加空字符串，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:20:16.533

```
NSString *nullEndedString = @"myMethod=ABC||10D=12345||phNumber=zzz||lang=english\0"; 
```

`\0`方法`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:21:22.103

只需附加 NULL 字，即：“\0”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:24:02.250

您可以使用 null 在字符的**开头添加**

```
char bytes[] = "\0name\0surname";
NSString * mystring = [NSString mystring];
[mystring initWithBytes:bytes length:sizeof(bytes)];
NSData * data = [mystring dataUsingEncoding:NSUTF8StringEncoding]; 
```

您可以根据自己的功能使用上述代码。

# windows-phone-7 - 在视图模型中获得用户控制权

> ID：13697165
> 
> 赞同：2
> 
> 时间：2012-12-04T06:18:30.213
> 
> 标签：windows-phone-7, mvvm, silverlight-4.0, mvvm-light, windows-phone-8

在我的应用程序中，我使用内容控件来显示我的用户控件

```
<ContentControl Content="{Binding LayoutControl}" Grid.Row="0" Height="700" Width="450"/> 
```

在这里，绑定内容是具有以下元素的用户控件。

```
 <Grid x:Name="LayoutRoot" Background="#6C7172">
    <Border BorderBrush="White" BorderThickness="7">
        <Image Source="{Binding ImagePath0}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Tap">
                    <cmd:EventToCommand Command="{Binding Path=ImageTap}" PassEventArgsToCommand="True"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Image>

    </Border>
</Grid> 
```

在上面的代码中，我试图实现的是，在点击图像时，我需要在我的视图模型中触发相应的事件，但是通过这段代码，点击事件不会触发。但是，当我将交互性应用于内容控制时，点击正在工作。我不能简单地将点击事件添加到内容控件，因为在其他一些情况下，我需要处理两个以上图像控件的点击事件。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:43:34.327

为您的图像控件提供固定的高度和宽度，然后尝试。它会起作用的。如果容器中没有图像，则鼠标将无法获得点击位置。试试这个，如果您仍然遇到同样的问题，请给我反馈。

# javascript - 在 Console.Log() 中显示 HTML 而不是 jQuery 选择对象

> ID：13697170
> 
> 赞同：4
> 
> 时间：2012-12-04T06:19:06.117
> 
> 标签：javascript, jquery, google-chrome, developer-tools

我要在 Chrome 开发者控制台中输出真正的 html 以便于调试。所以我想到了做一个 chrome 扩展，也就是[Chrome Extension](https://chrome.google.com/webstore/detail/consolelog-output-real-ht/jnfjicjapkamepnbiplhcjhcjccmegna)。

我将真正的 console.log() 复制到 console.nativeLog(); 我将自己的自定义函数添加到 console.log();

这是代码：

```
 <div class="myDiv">
        <input type="text" id="inp1" title="title1" />
        <input type="text" id="inp2" title="title2" />
        <input type="text" id="inp3" title="title3" />
        <input type="text" id="inp4"  />
        <input type="text" id="test" value="">
    </div>
    <input type="button" id="btn1" value="Add" />
    <script type="text/javascript">
        console.nativeLog = console.log;
    var arr= new Array();
    for(var i=0;i<100;i++){
        arr[i] = i+','+i;
    }
    var fav = JSON.parse('[{"href":"/EMS-ILS/Modules/Supplier_Profile/Supplier_Profile.aspx?ModID=6&WebPageID=38","text":"Supplier Profile"},{"href":"/EMS-ILS/Modules/Customer_Profile/Customer_Profile.aspx?ModID=6&WebPageID=57","text":"Customer Profile"},{"href":"/EMS-ILS/Modules/Costing_Profile/Costing_Profile.aspx?ModID=6&WebPageID=50","text":"Costing Profile"}]')
        console.log = function (val){
            if(typeof(val)=='string'){
                console.nativeLog(val);
                return;
            }
            try{
                for(var x=0;x<arguments.length;x++){
                    var arr = arguments[x];
                    try{
                        if(!arr.length)
                            console.nativeLog(arr);
                        else {
                            for(var i=0;i<arr.length;i++)
                                console.nativeLog(arr[i]);
                        }
                    }catch(err1){
                        console.nativeLog(arr);
                    }
                }
            }   
            catch(err2){
                console.nativeLog(val);
            }
        }           
        $(document).ready(function(){
            console.log('-------------');
            console.log($('input'));
            console.log('-------------');
            console.log($('#inp1'));
            console.log('-------------');
            console.log($('#badId'));
            console.log('-------------');   
                            console.log($('input'), $('#bad'), $('input:text'),  fav, 0, arr)

        });
    </script> 
```

一切正常，但最后一个。如果 jquery 对象不包含任何结果，它仍然会打印上下文 jquery 对象。

这是控制台中的输出。

![在此处输入图像描述](../Images/3617c9eab6f05236e999e04ce096f63b.png)

怎么能防止呢？有任何想法吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:51:08.377

看看这个小提琴[http://jsfiddle.net/tppiotrowski/KYvDX/3/](http://jsfiddle.net/tppiotrowski/KYvDX/3/)。如果 jQuery 对象为空，这将在单独的行上打印每个参数并打印 []：

```
console.nativeLog = console.log;
console.log = function(val) {
    var x = 0;
    for (x; x < arguments.length; x++) {
        var item = arguments[x];
        // check if we are dealing with jQuery object
        if (item instanceof jQuery) {
            // jQuery objects with length property are
            // the only ones we want to print
            if (item.length) {
                for (var i = 0; i < item.length; i++) {
                    console.nativeLog(item[i]);
                }
            } else {
                console.nativeLog('[]');
            }
        } else {
            console.nativeLog(item);
        }
    }
} 
```

这是对打印多个参数的实际 console.log 行为的更准确复制，例如。`console.log('a', 'b', 2, [])`一行：http: [//jsfiddle.net/tppiotrowski/KYvDX/4/](http://jsfiddle.net/tppiotrowski/KYvDX/4/)

```
console.nativeLog = console.log;
console.log = function() {
    var x = 0;
    var output = [];
    for (x; x < arguments.length; x++) {
        item = arguments[x];
        if (item instanceof jQuery) {
            if (item.length) {
                for (var i = 0; i < item.length; i++) {
                    output.push(item[i]);
                }
            } else {
                output.push('[]');
            }
        } else {
            output.push(item);
        }
    }
    console.nativeLog.apply(this, output);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:24:14.623

试试看

```
 console.log($('#badId')[0] != undefined ? $('#badId') : 'do not exist'); 
```

[http://jsfiddle.net/bkPRg/2/](http://jsfiddle.net/bkPRg/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:24:45.903

尝试

```
.html() 
```

或者

```
.text() 
```

你也可以检查这个`jquery .length`属性：

```
var arr = arguments[x];
                    try{
                        if(!arr.length) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:29:26.857

只是在打印jQuery对象之前添加一个判断

```
console.log = function (val){
    if(typeof(val)=='string'){
        console.nativeLog(val);
        return;
    }
    else if(val instanceof jQuery && val.length==0)
    {
        console.nativeLog("A jQuery object with no html element");
        return;
    } 
```

# sql-server - 用于查找两次和总和的差异的 SQL 查询

> ID：13697181
> 
> 赞同：0
> 
> 时间：2012-12-04T06:20:21.403
> 
> 标签：sql-server

我在 SQL Server 中有这张表：

```
UserId    Date                       Start Time              End Time
------------------------------------------------------------------------------------
20       2012-04-02 00:00:00.000     NULL                    2012-04-02 09:17:57.000
20       2012-04-02 00:00:00.000    2012-04-02 09:17:57.000  2012-04-02 09:57:55.000
20       2012-04-02 00:00:00.000    2012-04-02 09:57:55.000  2012-04-02 10:04:58.000
20       2012-04-02 00:00:00.000    2012-04-02 10:04:58.000  2012-04-02 10:21:40.000
20       2012-04-02 00:00:00.000    2012-04-02 10:22:15.000  2012-04-02 10:22:20.000
20       2012-04-02 00:00:00.000    2012-04-02 10:22:56.000  2012-04-02 10:23:33.000 
```

我想找到开始时间和结束时间之间的差异，并根据日期总结差异小时

所需的输出是：

```
UserID    Time_Duration
-----------------------
 20           1:20:20      (this is example not actuals) 
```

谁能帮我写一个 SQL 查询.. 我试过下面的查询，

```
select sum(sub1.TotalSeconds / 3600) as [Hours], sum((sub1.TotalSeconds % 3600) / 60)
as [Minutes], 
sum((sub1.TotalSeconds % 3600) % 60) as [Seconds],sub1.Date
from
(
SELECT
  sub.UserID,
  sub.Date,   
sum(datepart(hour, sub.end_time-sub.start_time) * 3600) + sum(datepart(minute,        sub.end_time-sub.start_time) * 60) +
sum(datepart(second, sub.end_time-sub.start_time)) as TotalSeconds
from.......
) AS sub 
 group by sub.UserID,sub.Date,sub.start_time,sub.end_time)
  as sub1 group by sub1.Date; 
```

我得到以下结果

```
 Hours   Minutes Seconds     Date
 3      347      515    2012-04-02 00:00:00.000 
```

但是我想添加分钟，如果大于 60，它必须增加到 3+1 小时，依此类推。任何 1 都可以帮助我在我犯错的地方吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:10:03.603

嗨看看这个：

[SQLFIDDLE](http://sqlfiddle.com/#!2/fd6a3/3)

它**不是**最有效的，我相信它对于代码来说很丑陋。但是把它放在上面让你看到步骤。你可能会从中得到一个想法。主要是使用算术运算符来获得结果。有一些额外的字段，因为我主要使用它来向您展示**数据流**。我确信其他方法在性能方面非常有效。你可以试试。

询问：

```
select q.userid, t.date,
q.h + round((q.m + (q.s/60))/60,0) as hh,
round((q.m + (q.s/60)) mod 60,0) as mm,
q.s mod 60 as ss
from 
(select t.userid,t.date, 
sum(t.hours) as h,
sum(t.minutes) as m,
sum(t.seconds) as s
from (select userid,date,
TIMEDIFF(EndTime, StartTime) as duration,
TIMESTAMPDIFF(hour,starttime,endtime) as hours,
TIMESTAMPDIFF(minute,starttime,endtime) mod 60 as minutes,
TIMESTAMPDIFF(second,starttime,endtime) mod 60 seconds
from datestimes) as t
) as q
 ; 
```

结果

```
 USERID    DATE                            HH  MM  SS
  20        April, 02 2012 00:00:00+0000    13  4   25 
```

**仅使用一个嵌套查询更新查询**

事实上，您可以通过一个嵌套查询来实现这一点。道歉，因为整个答案都是`MYSQL`基于的。所以希望你可以拿出逻辑来使用`SQL Server`语法来实现它:)

```
select t.userid, t.date, 
(sum(t.hours) + round((sum(t.minutes) +
sum(t.seconds)/60)/60,0)) as h,
(round((sum(t.minutes) +
sum(t.seconds)/60) mod 60,0)) as m,
sum(t.seconds) mod 60 as s

from 

(select userid, date,
TIMEDIFF(EndTime, StartTime) as duration,
TIMESTAMPDIFF(hour,starttime,endtime) as hours,
TIMESTAMPDIFF(minute,starttime,endtime) mod 60 as minutes,
TIMESTAMPDIFF(second,starttime,endtime) mod 60 seconds
from datestimes) as t
 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:35:04.720

```
Declare @test table(start datetime,ende datetime)
insert into @test Values ('20120101 10:00','20120101 18:00')
insert into @test Values ('20120101 10:00','20120101 18:13')
insert into @test Values ('20120101 10:00','20120102 18:25')
insert into @test Values ('20120101 10:00','20120101 18:00')
insert into @test Values ('20120101 10:00','20120101 18:00')

Select 
FLOOR(Cast(Dummy as Float)) as Days
,DATEPART(Hour,dummy) as Hours
,DATEPART(MINUTE,dummy) as Minutes
,DATEPART(Second,dummy) as Seconds
from
(
Select 
DateAdd(second, SUM(DATEDIFF(SECOND,start,ende)),Cast(0 as Datetime)) as Dummy 
from @test
) a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:39:01.303

你可以这样做：

```
Select 
    CAST(DATEDIFF(SECOND, StartDate, EndDate) / 3600 as VARCHAR) + ':' + 
    CAST((DATEDIFF(SECOND, StartDate, EndDate) % 3600) / 60 as VARCHAR) + ':' + 
    CAST(DATEDIFF(SECOND, StartDate, EndDate) % 60 as VARCHAR) as DateDifference
From YourTable 
```

*DATEDIFF*函数以整数值的形式为您提供开始时间和结束时间之间的秒数差异。将该值简单地除以 3600 或 60，您就得到了小时或分钟，而使用**%**，您就得到了剩余值。

# ios - 使用 UIView 动画旋转 UIImageView 360 度？

> ID：13697182
> 
> 赞同：0
> 
> 时间：2012-12-04T06:20:28.093
> 
> 标签：ios, animation, rotation, transform

我只是想使用这个顺时针旋转 UIImageView 360 度：

```
#define DEGREES_TO_RADIANS(angle) (angle / 180.0 * M_PI) 
```

还有这个

```
imageView.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(360)); 
```

然而，即使它被调用，imageView 也不会旋转。我做错了什么吗？我不想使用 CAAnimations，所以请不要推荐我这样做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:29:00.947

问题在于 Core Animation 将通过找到从当前状态到新状态的最直接路径来应用动画。旋转 0 度与旋转 360 度相同，因此最直接的最终变换方法是完全不做任何事情。

两个 180 度的步骤会有问题，因为从 0 度到 180 度有两条同样直接的路线，Core Animation 可以选择其中任何一个。所以你可能需要把你的动画分成三个步骤。用 a 做第一个`UIViewAnimationOptionCurveEaseIn`，用 做第二个，用`UIViewAnimationOptionCurveLinear`做最后一个`UIViewAnimationOptionCurveEaseOut`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:28:36.553

也许是因为转换不会在一段时间内发生。在我看来，只要随着时间的推移无法感知，您可能需要在一小段时间内执行转换或转换序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T08:20:16.273

这是受汤米回答启发的代码。

我用了

```
NSInteger step; 
```

跟踪图像视图的当前旋转度数。

```
- (void)startAnimation
{
    [UIView animateWithDuration:0.5f 
                          delay:0.0f 
                        options:UIViewAnimationOptionCurveLinear 
                     animations:^{
        imageView.transform = CGAffineTransformMakeRotation(120 * step / 180.0f * M_PI);
    }
                     completion:^(BOOL finished) {
        step++;
        // rotation completed, reset for the next round
        if (step == 4){
            step = 1;
        }

        // perform the next rotation animation
        [self startAnimation];
    }];
} 
```

# android - 我可以用路径绘制自定义形状，然后通过 xml 用线性填充填充它吗？

> ID：13697186
> 
> 赞同：2
> 
> 时间：2012-12-04T06:20:54.540
> 
> 标签：android, xml-drawable, shapedrawable

我是否可以在 XML 中绘制路径并用线性淡入淡出填充它并将其作为 LinearLayout 或 Button 的背景可绘制对象？

干杯

# clojure - 有效检查嵌套哈希图中值变化的函 数

> ID：13697189
> 
> 赞同：1
> 
> 时间：2012-12-04T06:21:02.123
> 
> 标签：clojure

动机是检查深层嵌套地图中发生了什么变化，有点像`update-in`.

这是一个简单的例子：

```
(def p1 {:a {:a1 :1 :a2 :2}
         :b {:b1 :1 :b2 :2}})

(def p2 (update-in p1 [:a :a1] (constantly :updated))
;; => {:a {:a1 :updated :a2 :2}
;;     :b {:b1 :1 :b2 :2}}

(what-changed? p1 p2) 
;; => {:keys [:a :a1] :value :updated)

(what-changed? p2 p1) 
;; => {:keys [:a :a1] :value :2) 
```

我希望因为 clojure 映射是持久的数据结构，可能有一种智能算法可以通过查看底层结构而不是遍历嵌套映射并比较差异来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:56:23.480

我会想象一个直接的递归算法，比如`(if (= map1 map2) :no-change (recursively-check-children ...))`已经很好地利用了结构共享，除非你正在处理非常宽的树（每个节点有很多分支）。在任何情况下，您可能都想查看[clojure.data/diff](http://clojuredocs.org/clojure_core/clojure.data/diff)，它解决了您的问题的一般、非递归版本，并且还从直接开始`(= a b)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:02:46.417

持久性数据结构仅与实现有关，而与“查看底层结构”无关。正如 Joost 所说（+1），您可以使用“差异”。它只需要使用您的 "{:keys ... :value ...}" 模式转换答案：

```
(def p1 {:a {:a1 :1 :a2 :2}
         :b {:b1 :1 :b2 {:b11 :11 :b22 :22}}})

(def p2 {:a {:a1 :updated1 :a2 :2}
         :b {:b1 :1 :b2 {:b11 :updated2 :b22 :updated3}}})

(defn what-changed?* [m]
  (if (not (map? m))
    [(list m)]
    (apply concat (map (fn [k]
                         (map (fn [nest-k]
                                (conj nest-k k))
                              (nested-keys (m k))))
                       (keys m)))))

(defn what-changed? [m1 m2]
  (map (fn [l] {:keys (drop-last l) :value (last l)})
       (nested-keys (second (data/diff m1 m2))))) 
```

测试：

```
(what-changed? p1 p2)
-> ({:keys (:a :a1), :value :updated1}
    {:keys (:b :b2 :b11), :value :updated2}
    {:keys (:b :b2 :b22), :value :updated3})

(what-changed? p2 p1)
-> ({:keys (:a :a1), :value :1}
    {:keys (:b :b2 :b11), :value :11}
    {:keys (:b :b2 :b22), :value :22}) 
```

顺便说一句，在您的情况下，您可以通过“assoc-in”而不是“update-in”来修改 hashmap：

```
(assoc-in {:a {:a1 :1 :a2 :2}
           :b {:b1 :1 :b2 :2}}
          [:a :a1] :updated)
-> {:a {:a2 :2, :a1 :updated}
    :b {:b2 :2, :b1 :1}} 
```

# url-rewriting - sh404sef 在本地主机中不起作用

> ID：13697194
> 
> 赞同：0
> 
> 时间：2012-12-04T06:21:39.907
> 
> 标签：url-rewriting, joomla2.5

我已经为 Joomla 2.5 安装了 SH404SEF 组件。它在我的实时站点中工作，但在本地主机中不起作用。

我已启用 mod_rewrite 并在我的本地主机中添加了 htaccess。但它没有重定向并且发生 404 错误。请帮忙 ![在此处输入图像描述](../Images/bad3166d350c009decaa5d428719a2e6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:19:22.740

考虑更改变量 shDefaultParams['sh404SEF_USE_NON_STANDARD_PORT'。猜猜它会为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:53:45.880

*   创建 Joomla 的全新安装
*   之后检查是否有.htacsess文件，
*   否则创建一个 .htaccess 文件，最后
*   使用 Sh404sef 的控制面板安装 Sh404sef 组件
*   启动 SEF 进程，您可以看到结果

**.htaccess 示例**

**在 .htaccess 文件的末尾，您将看到**

```
## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section. 
```

# c - “int *path”和“int path[]”有什么区别吗？

> ID：13697203
> 
> 赞同：-1
> 
> 时间：2012-12-04T06:22:38.907
> 
> 标签：c, segmentation-fault

> **可能的重复：**
> [通过一个实例说明数组和指针的异同](https://stackoverflow.com/questions/1782369/similarities-and-differences-between-arrays-and-pointers-through-a-practical-exa)

我曾经将它们视为相同的数组名称。但是现在我遇到了一个错误，就是当我使用`int *path`并尝试访问数组的成员时，编译器得到一个SIGSEGV（我之前写的代码中我从来不记得发生过），但是我没关系当我使用`int path[]`.

那么为什么我在使用时会得到一个 SIGSEGV`int *path`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:33:47.873

只是猜测您正在尝试写入您以两种可能但不等效的方式声明的数组：

```
 int *path = { 4, 5, 3, -1}; /* you're saying this does not work ... when? */
 //  ^ compiler "warning" (error) expected, see edit below
    path[2] = 1;                /* .. when you try this */ 
```

但

```
 int path[] = { 4, 5, 3, -1};
    path[2] = 1;                 /* but this works */ 
```

在第一种情况下，路径是一个指向某个地方的“静态”“列表”的指针。您只有指向它的指针，可以读取内容，但如果您尝试在其上写入，则可能存在分段错误。（可能因为这些数据可能在您可以写入的内存中，即使它经常发生您也不能写入，但这取决于系统）。

在第二种情况下，堆栈上的一个区域被保留，足以容纳数据，然后将其复制到该区域。在这种情况下，您可以读取和写入它。

**编辑**

正如评论中所注意到的，第一个示例给出了警告，您将需要一个强制转换 (int []) 才能在没有警告的情况下进行编译。然后，让我们假设该数组是在您无法写入的地方创建的，尽管事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:40:52.777

```
int *path = { 4, 5, 3, -1}; 
```

当您执行上述操作时，数据将存储在只读存储器中。因此，当您尝试使用该指针更改任何索引时，您将获得一个 sigsegv。

但是当你这样做时

```
int path[]={...}; 
```

它将存储在非只读的静态内存中，您可以在其中修改数组中的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:44:53.810

*   `int path[]`: 路径指向实际数组
*   `int *path`: path 只是一个内存指针。的内存位置`path`可能不包含实际的数组。

我打赌你正在尝试`mktemp()`使用`char *path`. 我已经做过很多次了。:-( 其他人解释了这个SEGV的原因。

谢谢。

# .net - NLog 的合法日志查看器不工作

> ID：13697204
> 
> 赞同：1
> 
> 时间：2012-12-04T06:22:41.857
> 
> 标签：.net, logging, nlog, log-viewer

我正在使用[NLog](http://nlog-project.org/)来记录我所有的 .NET 应用程序。我正在寻找一种可以帮助我轻松查看这些长日志的软件。所以[合法的日志查看器](http://www.legitlog.com/Products/LegitLogViewer)来找我。但是，我无法查看日志文件，日志查看器显示“不支持的日志格式”。以下是我的 NLog.conf 文件和[合法日志查看器](http://www.legitlog.com/Products/LegitLogViewer)布局文件。谁能帮我找出错误？

NLog.config 目标布局

```
layout="${level} | ${longdate} | ${callsite:className=true:fileName=false:includeSourcePath=false:methodName=true} | ${message} ${exception:format=tostring}" 
```

我的合法日志查看器布局文件。

```
<Description>
${level} | ${longdate} | ${logger} | ${message}
</Description>
<LogLine>
  <Fields>
<LogFieldFormat Name="Level" FieldType="String" Delimiter="|" FilterColumn="true" HighlightRows="true" />
<LogFieldFormat Name="DateTime" FieldType="DateTime" Delimiter="|" Format="yyyy-MM-dd HH:mm:ss.ffff" />
<LogFieldFormat Name="Logger" FieldType="String" Delimiter="|" />
<LogFieldFormat Name="Message" FieldType="String" />
  </Fields>
</LogLine> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:33:29.850

我已修复 XML 配置以支持您的日志格式。

```
<?xml version="1.0" encoding="utf-8" ?>
<LogFormat xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema"
           xmlns="http://www.legitlog.com/LogFormatSchema.xsd"
           FormatName="NLog (Joe Melbourne)">
  <Description>
    ${level} | ${longdate} | ${callsite:className=true:fileName=false:includeSourcePath=false:methodName=true} | ${message} ${exception:format=tostring}
  </Description>
  <LogLine>
    <Fields>
      <LogFieldFormat Name="Level" FieldType="String" Delimiter="| " FilterColumn="true" HighlightRows="true" />
      <LogFieldFormat Name="DateTime" FieldType="DateTime" Delimiter=" |" Format="yyyy-MM-dd HH:mm:ss.ffff" />
      <LogFieldFormat Name="Callsite" FieldType="String" Delimiter="|" />
      <LogFieldFormat Name="Message" FieldType="String" Delimiter="&#xD;&#xA;" Multiline="true" />
    </Fields>
  </LogLine>
</LogFormat> 
```

日期周围有奇怪的空格，所以我更改分隔符以使用它们。我还为最后一个字段添加了分隔符，并使其支持每条消息多行。

在即将到来的更新中，我将让日志查看器自动修剪日期和数字周围的空格。

PS 请不要犹豫，通过 LL 网站上的电子邮件联系我以帮助您。

# objective-c - 如何设置表格视图以仅在 ios 中显示单行？

> ID：13697211
> 
> 赞同：1
> 
> 时间：2012-12-04T06:23:14.367
> 
> 标签：objective-c, ios, uitableview, tableview

在我的应用程序中，我有具有表格视图高度的表格视图单元格。当用户滚动它时，它会在两个单元格之间停止，即显示半个单元格、单元格分隔符和另一半个单元格。

在用户旋转到单个单元格后，有什么方法可以滚动表格？
![示例屏幕截图](../Images/38b020453e3e30bdf2f3250bfe85654c.png)

我们想要的是表格视图应该在用户滚动后自动滚动到单行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:59:50.857

用于`scrollToRowAtIndexPath:atScrollPosition:animated:`滚动到顶部单元格。同样，您`UITableView`也`UIScrollView`可以在 UIScrollview 的委托方法中执行此操作。

```
scrollViewDidEndDragging:willDecelerate: 
```

# iphone - 让滚动条在 UIScrollView 上始终可见？

> ID：13697215
> 
> 赞同：25
> 
> 时间：2012-12-04T06:23:40.543
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview, uikit

我需要在 viewDidLoad 上始终显示滚动条，以便用户可以了解有要滚动的内容。我做了以下事情：

```
[myscrollView flashScrollIndicators]; 
```

但随后滚动条仅在 viewDidLoad 后出现一段时间，然后再次消失，仅在用户触摸屏幕时重新出现。

我需要使滚动条始终可见。我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T11:31:54.760

[Apple 在他们的iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW30)中间接地不鼓励不断显示滚动指示器，但指南只是出于某种原因的指南，它们并不适用于所有情况，有时您可能需要礼貌地忽略它们。

任何内容视图的滚动指示器都是`UIImageView`这些内容视图的子视图。这意味着您可以像**访问**`UIScrollView`它的任何其他子视图（即`myScrollView.subviews`）一样访问a 的滚动指示器，并像您一样（例如）**修改**滚动指示器。`UIImageView``scrollIndicatorImageView.backgroundColor = [UIColor redColor];`

最流行的解决方案似乎是以下代码：

```
#define noDisableVerticalScrollTag 836913
#define noDisableHorizontalScrollTag 836914

@implementation UIImageView (ForScrollView) 

- (void) setAlpha:(float)alpha {

    if (self.superview.tag == noDisableVerticalScrollTag) {
        if (alpha == 0 && self.autoresizingMask == UIViewAutoresizingFlexibleLeftMargin) {
            if (self.frame.size.width < 10 && self.frame.size.height > self.frame.size.width) {
                UIScrollView *sc = (UIScrollView*)self.superview;
                if (sc.frame.size.height < sc.contentSize.height) {
                    return;
                }
            }
        }
    }

    if (self.superview.tag == noDisableHorizontalScrollTag) {
        if (alpha == 0 && self.autoresizingMask == UIViewAutoresizingFlexibleTopMargin) {
            if (self.frame.size.height < 10 && self.frame.size.height < self.frame.size.width) {
                UIScrollView *sc = (UIScrollView*)self.superview;
                if (sc.frame.size.width < sc.contentSize.width) {
                    return;
                }
            }
        }
    }

    [super setAlpha:alpha];
}

@end 
```

最初归功于[此来源](http://www.developers-life.com/scrollview-with-scrolls-indicators-which-are-shown-all-the-time.html)。

这定义了一个类别，`UIImageView`该类别定义了 alpha 属性的自定义设置器。这是有效的，因为在底层代码的某个时刻`UIScrollView`，它将滚动指示器的 alpha 属性设置为 0 以隐藏它。此时它将遍历我们的类别，如果主机`UIScrollView`具有正确的标签，它将忽略正在设置的值，将其显示出来。

为了使用此解决方案，请确保您`UIScrollView`具有适当的标签，例如 ![标签](../Images/3a996bceb4e609a0d040d21cc26353ac.png)

如果您想从它`UIScrollView`可见的那一刻起显示滚动指示器，只需在视图出现时闪烁​​滚动指示器。例如

```
- (void)viewDidAppear:(BOOL)animate
{
    [super viewDidAppear:animate];
    [self.scrollView flashScrollIndicators];
} 
```

其他 SO 参考：

*   [UIScrollView - 显示滚动条](https://stackoverflow.com/questions/1888647/uiscrollview-showing-the-scroll-bar)
*   [UIScrollView 指示器总是显示？](https://stackoverflow.com/questions/3290813/uiscrollview-indicator-always-show)
*   [滚动指示器可见性](https://stackoverflow.com/questions/6908095/scroll-indicators-visibility?lq=1)
*   [使滚动条在 uiscrollview 中始终可见](https://stackoverflow.com/questions/13562134/make-scrollbars-always-visible-in-uiscrollview?lq=1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-30T13:52:42.647

我想提供我的解决方案。我不喜欢最流行的类别变体（类别中的覆盖方法可能是一些不确定在运行时应该调用什么方法的原因，因为有两个方法具有相同的选择器）。我改用调酒。而且我不需要使用标签。

将此方法添加到您的视图控制器中，您可以在其中滚动视图（`self.categoriesTableView`在我的情况下）

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    // Do swizzling to turn scroll indicator always on
    // Search correct subview with scroll indicator image across tableView subviews
    for (UIView * view in self.categoriesTableView.subviews) {
        if ([view isKindOfClass:[UIImageView class]]) {
            if (view.alpha == 0 && view.autoresizingMask == UIViewAutoresizingFlexibleLeftMargin) {
                if (view.frame.size.width < 10 && view.frame.size.height > view.frame.size.width) {
                    if (self.categoriesTableView.frame.size.height < self.categoriesTableView.contentSize.height) {
                        // Swizzle class for found imageView, that should be scroll indicator
                        object_setClass(view, [AlwaysOpaqueImageView class]);
                        break;
                    }
                }
            }
        }
    }
    // Ask to flash indicator to turn it on
   [self.categoriesTableView flashScrollIndicators];
} 
```

添加新班级

```
@interface AlwaysOpaqueImageView : UIImageView
@end

@implementation AlwaysOpaqueImageView

- (void)setAlpha:(CGFloat)alpha {
    [super setAlpha:1.0];
}

@end 
```

滚动指示器（在这种情况下为垂直滚动指示器）将始终显示在屏幕上。

# 2019 年 11 月更新

从 iOS 13 开始，`UIScrollView`子类发生了变化。现在滚动指示器继承自`UIView`并有自己的**私有**类，称为`_UIScrollViewScrollIndicator`. 这意味着，它们不是`UIImageView`现在的子类，因此旧方法将不再起作用。

我们也无法实现子类，`_UIScrollViewScrollIndicator`因为它是私有类，我们无权访问它。所以唯一的解决方案是使用运行时。现在要支持 iOS 13 及更早版本，请执行以下步骤：

1.  将此方法添加到您的视图控制器中，您可以在其中滚动视图（`self.categoriesTableView`在我的情况下）

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    // Do swizzling to turn scroll indicator always on
    // Search correct subview with scroll indicator image across tableView subviews
    for (UIView * view in self.categoriesTableView.subviews) {
        if ([view isKindOfClass:[UIImageView class]]) {
            if (view.alpha == 0 && view.autoresizingMask == UIViewAutoresizingFlexibleLeftMargin) {
                if (view.frame.size.width < 10 && view.frame.size.height > view.frame.size.width) {
                    if (self.categoriesTableView.frame.size.height < self.categoriesTableView.contentSize.height) {
                        // Swizzle class for found imageView, that should be scroll indicator
                        object_setClass(view, [AlwaysOpaqueImageView class]);
                        break;
                    }
                }
            }
        } else if ([NSStringFromClass(view.class) isEqualToString:@"_UIScrollViewScrollIndicator"]) {
            if (view.frame.size.width < 10 && view.frame.size.height > view.frame.size.width) {
                if (self.categoriesTableView.frame.size.height < self.categoriesTableView.contentSize.height) {
                    // Swizzle class for found scroll indicator, (be sure to create AlwaysOpaqueScrollIndicator in runtime earlier!)
                    // Current implementation is in AlwaysOpaqueScrollTableView class
                    object_setClass(view, NSClassFromString(@"AlwaysOpaqueScrollIndicator"));
                    break;
                }
            }
        }
    }
    // Ask to flash indicator to turn it on
    [self.categoriesTableView flashScrollIndicators];
} 
```

2.  添加新类（适用于 13 之前的 iOS）

```
@interface AlwaysOpaqueImageView : UIImageView
@end

@implementation AlwaysOpaqueImageView

- (void)setAlpha:(CGFloat)alpha {
    [super setAlpha:1.0];
}

@end 
```

3.  在代码中的某处添加这些方法（与步骤 1 相同的视图控制器，或添加到所需的`UIScrollView`子类）。

```
+ (void)load {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        // Create child class from _UIScrollViewScrollIndicator since it is private
        Class alwaysOpaqueScrollIndicatorClass =  objc_allocateClassPair(NSClassFromString(@"_UIScrollViewScrollIndicator"), "AlwaysOpaqueScrollIndicator", 0);
        objc_registerClassPair(alwaysOpaqueScrollIndicatorClass);

        // Swizzle setAlpha: method of this class to custom
        Class replacementMethodClass = [self class];

        SEL originalSelector = @selector(setAlpha:);
        SEL swizzledSelector = @selector(alwaysOpaque_setAlpha:);

        Method originalMethod = class_getInstanceMethod(alwaysOpaqueScrollIndicatorClass, originalSelector);
        Method swizzledMethod = class_getInstanceMethod(replacementMethodClass, swizzledSelector);

        BOOL didAddMethod =
            class_addMethod(alwaysOpaqueScrollIndicatorClass,
                originalSelector,
                method_getImplementation(swizzledMethod),
                method_getTypeEncoding(swizzledMethod));

        if (didAddMethod) {
            class_replaceMethod(alwaysOpaqueScrollIndicatorClass,
                swizzledSelector,
                method_getImplementation(originalMethod),
                method_getTypeEncoding(originalMethod));
        } else {
            method_exchangeImplementations(originalMethod, swizzledMethod);
        }
    });
}

#pragma mark - Method Swizzling

- (void)alwaysOpaque_setAlpha:(CGFloat)alpha {
    [self alwaysOpaque_setAlpha:1.0];
} 
```

此步骤创建在运行时`_UIScrollViewScrollIndicator`调用的子类并将方法实现`AlwaysOpaqueScrollIndicator`调配到.`setAlpha:``alwaysOpaque_setAlpha:`

不要忘记添加

`#import <objc/runtime.h>`

到您插入此代码的文件。感谢@Smartcat 对此的提醒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:43:29.240

我不知道这是否可行。但只是给你一个提示。

Scrollview里面的Scrollbar是一个Imageview。这是 UIScrollview 的子视图

所以得到UIscrollview的Scrollbar Imageview。然后尝试将隐藏的图像属性设置为 NO 或更改 Alpha 值

```
static const int UIScrollViewHorizontalBarIndexOffset = 0;
static const int UIScrollViewVerticalBarIndexOffset = 1;
-(UIImageView *)scrollbarImageViewWithIndex:(int)indexOffset 
{
    int viewsCount = [[yourScrollview subviews] count];
    UIImageView *scrollBar = [[yourScrollview subviews] objectAtIndex:viewsCount - indexOffset - 1];
    return scrollBar;
}

-(void) viewDidLoad
{
    //Some Code
    //Get Scrollbar
    UIImageView *scrollBar = [self scrollbarImageViewWithIndex: UIScrollViewVerticalBarIndexOffset];

    //The try setting hidden property/ alpha value
    scrollBar.hidden=NO;
} 
```

[从这里](http://leonov.co/2011/04/uiscrollviews-scrollbars-customization/)得到参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-02T21:29:05.267

这是@Accid Bright[答案](https://stackoverflow.com/a/40890158/2697217)的 Swift 版本：

```
class AlwaysOpaqueImageView: UIImageView {

    override var alpha: CGFloat {
        didSet {
            alpha = 1
        }
    }

    static func setScrollbarToAlwaysVisible(from scrollView: UIScrollView) {
        // Do swizzling to turn scroll indicator always on
        // Search correct subview with scroll indicator image across tableView subviews
        for view in scrollView.subviews {
            if view.isKind(of: UIImageView.self),
                view.alpha == 0 && view.autoresizingMask == UIView.AutoresizingMask.flexibleLeftMargin,
                view.frame.size.width < 10 && view.frame.size.height > view.frame.size.width,
                scrollView.frame.size.height < scrollView.contentSize.height {
                // Swizzle class for found imageView, that should be scroll indicator
                object_setClass(view, AlwaysOpaqueImageView.self)
                break
            }
        }

        // Ask to flash indicator to turn it on
        scrollView.flashScrollIndicators()
    }
} 
```

一个区别是设置滚动条是作为静态方法提取出来的。

# android - 我可以在Android中垂直排列TextView的文本吗

> ID：13697218
> 
> 赞同：0
> 
> 时间：2012-12-04T06:23:47.890
> 
> 标签：android, imageview

> **可能重复：**
> [Android 中的垂直（旋转）标签](https://stackoverflow.com/questions/1258275/vertical-rotated-label-in-android)。
> [如何使 TextView 文本垂直](https://stackoverflow.com/questions/10117094/how-to-make-a-textview-text-vertical)

有没有我可以垂直排列TextView的文本。就像下面的图片，对不起，我不允许发布我的图片！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:28:39.487

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:text="a\nn\nd\nr\no\ni\nd" /> 
```

尝试这个。在每个字符后面加上 \n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:32:36.893

您可以覆盖 TextView 的 setText 方法，并且可以在每个字符之间插入 \n。如下例：

```
public void setText(CharSequence str)
{
    StringBuffer buffer=new StringBuffer();
    for(int i=0; i<str.length(); i++)
    {
          buffer.append(str.charAt(i));
          buffer.append("\n");
     }
     buffer.setLength(buffer.length()-1);
     super.setText(buffer.toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:38:48.033

其他人给出的解决方案绝对完美，但还有其他方法

```
 <TextView
    android:layout_width="2sp"   /* width of one character width*/
    android:layout_height="fill_parent"
    android:text="a\nn\nd\nr\no\ni\nd" 
    android:singleLine="false"
    /> 
```

# batch-file - 如何编写一个 .bat 文件，在我的桌面上打开一些快捷方式？

> ID：13697220
> 
> 赞同：-2
> 
> 时间：2012-12-04T06:23:50.997
> 
> 标签：batch-file, cmd

我在桌面上有一些快捷方式和文件，我想通过 .bat 文件一次打开它们。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:25:36.777

尝试：

```
start %userprofile%\Desktop\your.lnk 
```

那应该执行您的链接。

# django-forms - 在自定义 HTML 中提交 Django 表单

> ID：13697223
> 
> 赞同：0
> 
> 时间：2012-12-04T06:24:02.067
> 
> 标签：django-forms

我是 django 表单的新手，我正在尝试创建一个非常具体的用户界面，所以我不能使用模型表单（或者我可以吗？）

我创建了一个如下所示的自定义表单：

但它不会提交给数据库？

这是我的html表单：

```
 <form method="POST" action='/create/' id="big_idea_form" class="tabscontent">{% csrf_token %}
        <label class="tabpage" id="tabpage_1" ><span>next</span><p>Give it a name!</p><input type="text" id="name"  placeholder="Type your title here" onblur='changeIt("name", "name_span")'/></label>
        <label class="tabpage" id="tabpage_2" ><p>What is it about?</p><input type="text" id="subtitle" name="subtitle" placeholder="Type your subtitle here" onblur='changeIt("subtitle", "subtitle_span")'/></label>
        <label class="tabpage" id="tabpage_3" ><p>Why is it important?</p><textarea id="description" name= "description" cols="42" rows="5" placeholder="this can be any description but it becomes more interesting if you can explain why it is important as part of your description" onblur='changeIt("description", "description_span")'></textarea></label>
        <label class="tabpage" id="tabpage_4" ><p id="success_title">What is  considered success?</p><textarea id="success" name="success" cols="42" rows="5" placeholder="describe what sucess means to your students... what does mastery look like?" onblur='changeIt("success", "success_span")'></textarea></label>
        <input type="submit" value="Submit"/>        
    </form> 
```

这是我的表格：

```
from django import forms
import urlparse
from models import Lesson

class CreateLesson(forms.Form):
    name=forms.CharField()
    subtitle=forms.CharField(required=False)
    creator=forms.CharField() #automate
    description=forms.CharField()
    success=forms.CharField()
    unit=forms.CharField(required=False)
    public=forms.BooleanField()

    def save(self, request):
    data=self.cleaned_data
    Lesson.creator = request.user
    Lesson.name=data.get('name', '')
    Lesson.subtitle=data.get('subtitle', '')
    Lesson.topic=data.get('topic', '')
    Lesson.description=data.get('description', '')
    Lesson.unit=data.get('unit', '')
    Lesson.public=data.get('public', True)
    Lesson.save()
    return Lesson 
```

这是我的观点：

```
from django.shortcuts import render
from django.http import HttpResponseRedirect
from forms import CreateLesson

def Create_Lesson(request):
    if request.method == 'POST': # If the form has been submitted...
        form = CreateLesson(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            form.save()
            return HttpResponseRedirect('/create/') # Redirect after POST
    else:
        form = CreateLesson() # An unbound form

    return render(request, 'create_lesson/new_ideas.html', {
        'form': form,
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:26:07.780

问题是表单没有验证，因为模型中的字段没有在表单上表示......我通过使用 ModelForm 简化了表单并排除了

表格.py

```
class CreateLessonModel(forms.ModelForm):
    class Meta:
    model = Lesson
    exclude =('unit', 'slug', 'topic', 'public', 'created_date', 'creator') 
```

视图.py

```
from django.shortcuts import render
from django.http import HttpResponseRedirect
from forms import CreateLessonModel
from django.template.defaultfilters import slugify
def Create_Lesson(request):
    if request.method == "POST": # If the form has been submitted...
        form = CreateLessonModel(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            lesson = form.save(commit=False)
            lesson.creator = request.user
            lesson.slug = slugify(lesson.name)
            lesson.save()
            return HttpResponseRedirect('') # Redirect after POST
    else:
        form = CreateLessonModel() # An unbound form

    return render(request, 'create_lesson/new_ideas.html', {
        'form': form,
    }) 
```

# javascript - 如何为多个表中的交替行着色

> ID：13697224
> 
> 赞同：0
> 
> 时间：2012-12-04T06:24:10.263
> 
> 标签：javascript, jquery

我想为多个表中的交替行着色。这就像桌子里面的桌子。我想为内表的交替行着色。表不是固定的，它是由进程动态生成的。行也不是固定的。请帮助

```
function update_rows(){
    $("table#id2 tr:even").css("background-color", "#DEB887");
    $("table#id2 tr:odd").css("background-color", "");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T06:37:11.547

**方式一：**

*CSS*

```
tr.alt td {background-color: #e6EEEE;} 
```

*jQuery*

```
$("tr:odd").addClass("alt");​ 
```

**方式二：**

*jQuery*

```
$("tr:even").css("background-color", "#eeeeee");
$("tr:odd").css("background-color", "#ffffff"); 
```

**更新：** 现场[jsFiddle example1](http://jsfiddle.net/yxUH4/)，[jsFiddle example2](http://jsfiddle.net/JdsfL/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:28:08.190

使用 jquery 可以很容易地完成

```
$("tr:even").css("background-color", "#bbbbff"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T00:28:25.163

您可以尝试以下任何一种

```
$("div table").each(function (i) { $(this).find("tr:not(first)+tr:even").addClass("even"); }); 
```

或者

```
$("div table tr:not(first)+tr:even").addClass("even"); 
```

两者都有很小的差异，在第二个中，如果前一个表的行数是奇数/偶数，有时您会发现后续表的奇数/偶数没有正确处理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:30:51.680

仅 CSS（不在旧浏览器中）：

```
table tr:nth-child(even) {
 /** your styling **/
} 
```

# mysql - 引用复合主键的单列

> ID：13697225
> 
> 赞同：0
> 
> 时间：2012-12-04T06:24:11.610
> 
> 标签：mysql, database

我有一个`tbl1`具有这种结构的表：

```
tbl1
  col1 int(11)
  col2 int(11)
  col3 int(11)
  primary key(col1,col2,col3) 
```

我想创建一个`tbl2`有`col1`引用`col1`的表`tbl1`

```
create table tbl2
(
  col1 int(11),
  foreign key(col1) references tbl1(col1)
) 
```

MySQL 抛出 error150，为什么？我不能引用表的单列复合主键吗？

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:50:16.620

您不能引用复合主键的一部分。没有解决方法。你不能（也不应该，因为这没有意义）这样做。

# c# - APNS 中的“SSL 流无法作为客户端身份验证”

> ID：13697230
> 
> 赞同：0
> 
> 时间：2012-12-04T06:24:36.043
> 
> 标签：c#, asp.net, apns-sharp

[这是我在使用来自 github](https://github.com/Redth/PushSharp/)的Redth pushsharp 通知时的错误。内部的例外是：

```
 'The message received was unexpected or badly formatted' 
```

和消息：

```
 'A call to SSPI failed, see inner exception.' 
```

我正在向 iPhone 发送推送通知。我生成了一个**.pem**文件，并在我的 windows 中的**cermgr.msc**下的受信任用户和个人下使用[register 证书注册了该证书。](http://arashnorouzi.wordpress.com/2011/04/13/sending-apple-push-notifications-in-asp-net-%E2%80%93-part-3-apns-certificates-registration-on-windows/)我在用着：

 ***   Windows 7的
*   对比 2010
*   净4.0

**堆栈跟踪**

```
 at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.AuthenticateAsClient(String targetHost, X509CertificateCollection clientCertificates, SslProtocols enabledSslProtocols, Boolean checkCertificateRevocation)
   at PushSharp.Apple.ApplePushChannel.connect() in d:\Tiru\Projects\PushService\App_Code\ApplePushChannel.cs:line 384 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:11:43.903

这是解决方案：

我用 .p12 文件替换了 .pem 文件并为我解决了问题。**

# filter - 关于 Tomcat 7 url 编码中的 CSRF 过滤器

> ID：13697231
> 
> 赞同：1
> 
> 时间：2012-12-04T06:24:38.447
> 
> 标签：filter, tomcat7, csrf, url-encoding

我在一个容易受到 CSRF（跨站点请求伪造）攻击的 Web 应用程序上工作。Tomcat 7 有一个 CSRF 预防过滤器。我通过描述来配置这个过滤器。这个过滤器期望我们调用 HttpServletResponse#encodeRedirectURL(String) 或 HttpServletResponse#encodeURL(String)。

但是，我看到在我的应用程序中我们没有使用上述方法。我们使用 mapping.findForward(target); 转发响应 无需触及请求或响应对象。你能告诉我如何或在哪里可以在我的代码中集成 encodeURL() 或 encodeRedirectURL() 方法吗？

感谢您在这方面的任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T11:14:02.980

您可以编写一个 Servlet 并将所有 url (/*) 映射到 web.xml 文件中的此 servlet。现在您可以通过 HttpServletResponse 使用 encodeUrl 方法。

# php - PECL-Memcache 无法从 PECL-Memcached 读取 INT 集

> ID：13697235
> 
> 赞同：1
> 
> 时间：2012-12-04T06:24:59.793
> 
> 标签：php, memcached, libmemcached

我正在将应用程序从 PHP [PECL-Memcache](http://pecl.php.net/package/memcache)客户端切换到[PECL-Memcached](http://pecl.php.net/package/memcached)，但遇到了麻烦。

似乎如果我从 PECL-Memcached 设置一个 INT 值，PECL-Memcache 就无法读取它。我看到类似的东西：

```
MemcachePool::get(): Failed to unserialize data 
```

如果我将 int 值转换为字符串，则 get 操作可与 ​​memcache 一起使用。当然，这会破坏增量/减量。

从 memcache 设置 INT 并从 memcached 读取工作正常。

我在用着：

*   libmemcached 1.0.14
*   pecl-memcache 3.0.6
*   内存缓存 1.4.4
*   php-pecl-memcached 2.1.0

我怀疑这与不同库设置的标志有关。关于使这些相互兼容的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T10:43:39.400

在 memcached 服务器中标记时，pecl-memcache 和 php-pecl-memcacheD 的值类型不兼容。

pecl-memcache (memcache_pool.h) 使用以下标志：

```
#define MMC_TYPE_STRING 0x0000
#define MMC_TYPE_BOOL   0x0100
#define MMC_TYPE_LONG   0x0300
#define MMC_TYPE_DOUBLE 0x0700 
```

当 pecl-memcacheD 使用它时（php_memcached.c）：

```
#define MEMC_VAL_IS_STRING     0
#define MEMC_VAL_IS_LONG       1
#define MEMC_VAL_IS_DOUBLE     2
#define MEMC_VAL_IS_BOOL       3
#define MEMC_VAL_IS_SERIALIZED 4
#define MEMC_VAL_IS_IGBINARY   5
#define MEMC_VAL_IS_JSON       6 
```

所以实际上只输入 STRING 匹配项，并且两者都可以以相同的方式解码

# c# - 添加 window.onload 后子菜单不显示

> ID：13697243
> 
> 赞同：-1
> 
> 时间：2012-12-04T06:25:52.473
> 
> 标签：c#, javascript, asp.net

添加这些代码行后，我的子菜单不显示，我应该怎么做？

在添加此代码之前，我的子菜单运行良好，我怀疑问题是 window.onload。

下面的代码与我想要的结果完美配合，但它给我带来了另一个问题，即我的子菜单不再显示

```
 window.onload = function() 
  {
    var element = document.getElementById('<%=lblMessage.ClientID%>');
    var lblMsg = document.getElementById('<%=lblAttention.ClientID%>');

    lblMsg.style.display = 'none';

    if(element.innerHTML.length)
        lblMsg.style.display = 'inline';
    else
        lblMsg.style.display = 'none';

} 
```

浏览器中显示的错误信息

```
javascript:__doPostBack('ctl00$m$g_0248855d_ee1a_4a57_9508_a520e1f7f8b9$ctl00$MenuReport','Report') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:40:17.890

这是一个建议

看页面源码

如果你有类似的东西

```
<body onload="somefunctiontoinitialisesubmenu()" ...> 
```

像这样将代码移动到onload：

```
window.onload = function() {
  var elem = document.getElementById('<%=lblMessage.ClientID%>');
  var lblMsg = document.getElementById('<%=lblAttention.ClientID%>');
  var html = elem.innerHTML;
  lblMsg.style.display = html.length!=-1?'inline':'none';
  somefunctiontoinitialisesubmenu();
} 
```

# java - 使用ant为项目中的特定文件创建Jar

> ID：13697247
> 
> 赞同：2
> 
> 时间：2012-12-04T06:26:26.147
> 
> 标签：java, ant, build

我使用 ant 编译了所有的 java 文件并将类文件存储在一个文件夹中。
我想为输出文件夹（已编译）中的特定类文件制作 jar。
我怎么能做到这一点。
注意：类文件依赖于项目中的其他类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T06:54:15.257

将`ant` [Jar 任务](http://ant.apache.org/manual/Tasks/jar.html)与嵌套文件集一起使用，该[文件集](http://ant.apache.org/manual/Types/fileset.html)仅指定您希望包含在 jar 文件中的文件。

就像是：

```
<jar jarfile="pinky.jar">
  <fileset dir="build/classes" >
    <include name="com/example/Brain.class" />
  </fileset>
</jar> 
```

# c# - 无法将 MSI.dll 添加到 Visual Studio 2010 中的引用

> ID：13697249
> 
> 赞同：0
> 
> 时间：2012-12-04T06:26:33.767
> 
> 标签：c#, .net, visual-studio-2010, windows-installer

我正在尝试在下面的 url 中实现。

[http://www.alteridem.net/2008/05/20/read-properties-from-an-msi-file/](http://www.alteridem.net/2008/05/20/read-properties-from-an-msi-file/)

让我抓狂的是我无法使用 COM 组件添加 Microsoft Windows Installer 对象库。

有人遇到过这个问题吗？

![在此处输入图像描述](../Images/cdc69a539528914980d98e1844d813b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:40:54.190

这仅与我的系统有关，经过大量谷歌搜索后，我发现 Msi.dll 已损坏。:(

# python - 对理解 Python 的类层次结构有一点帮助吗？

> ID：13697253
> 
> 赞同：-6
> 
> 时间：2012-12-04T06:26:45.203
> 
> 标签：python, python-2.7

对理解 python 类和子类有一点帮助。这也是 python 中 BaseException 的父类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:40:14.230

尝试：`BaseException.__bases__`得到父母。`__bases__`属性将为您提供所有父类的元组，在这种情况下，父类是`object`. 并阅读[文档](http://docs.python.org/2/library/stdtypes.html#class.__bases__)。

# snmp - 是否可以使用 pySNMP 库在 SNMPv3 中设置上下文名称

> ID：13697260
> 
> 赞同：0
> 
> 时间：2012-12-04T06:27:50.837
> 
> 标签：snmp, pysnmp

有一个使用 pySNMP 的模拟器可用，称为[SNMP 模拟器](http://pypi.python.org/packages/source/s/snmpsim/snmpsim-0.1.5.tar.gz)。

它设置默认上下文名称值。无论如何要为 snmpv3 设置自定义上下文名称值吗？

这是 snmpsimd.py 的摘录，我试图在其中给出上下文名称值。

```
config.addContext(snmpEngine, '') 
```

将值作为自定义参数提供不是在那里设置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:56:19.123

如果你正在构建一个代理，你应该在 SnmpContext 类实例中注册你的 contextName。[请参阅此处](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp/v3-alternative-mib.html)和[此处](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp/v3-alternative-mib-controller.html)的示例。

如果您的应用是基于 pysnmp 的高级 API 的 Manager，则应将 contextName 传递给 getCmd/setCmd()。[请参见此处](http://pysnmp.sourceforge.net/examples/current/v3arch/oneliner/manager/setgen.html)的示例（搜索 contextName）。

如果我的建议没有帮助，请澄清您的任务。

# font-size - 行高与字体大小/行高

> ID：13697261
> 
> 赞同：1
> 
> 时间：2012-12-04T06:27:52.140
> 
> 标签：font-size, css

如果在 font-size: CSS 属性中遇到 font-size: 14px/19px，这与说 font-size: 14px; 是一样的。行高：19px，不是吗？

如果是这样，那么为什么以下两个段落标签的高度不同？：

[http://www.frostjedi.com/terra/scripts/demo/line-height.html](http://www.frostjedi.com/terra/scripts/demo/line-height.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T06:37:50.320

首先，你有`font-size: 14px/19px;`哪个是无效的。我想你的意思是`font: 14px/19px;`但这仍然是错误的......

使用 CSS 简写字体时，不能省略大小或系列值。

尝试`font: 14px/19px Arial;`

有关详细信息，请参阅[http://www.impressivewebs.com/a-primer-on-the-css-font-shorthand-property/的](http://www.impressivewebs.com/a-primer-on-the-css-font-shorthand-property/)*省略强制值*部分。

# python - 获取networkx中匹配节点的列表

> ID：13697262
> 
> 赞同：1
> 
> 时间：2012-12-04T06:27:55.000
> 
> 标签：python, networkx

目前我已经确定两个图是同构的（根据我的定义），我想要一个在 is_isomorphic() 期间匹配的节点列表。有这样做的功能吗？

应该提到我正在使用networkx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:48:34.107

您可以检索两个图之间的同构映射。那会吗？看[这里](http://networkx.lanl.gov/reference/algorithms.isomorphism.vf2.html)。

```
>>> from networkx.algorithms import isomorphism
>>> G1 = nx.path_graph(4)
>>> G2 = nx.path_graph(4)
>>> GM = isomorphism.GraphMatcher(G1,G2)
>>> GM.is_isomorphic()
True
>>> GM.mapping
{0: 0, 1: 1, 2: 2, 3: 3} 
```

# c++ - static const double 不能有类内初始化程序。为什么会这样？

> ID：13697265
> 
> 赞同：41
> 
> 时间：2012-12-04T06:28:18.487
> 
> 标签：c++

以下代码的问题是“const double”类型的静态成员不能具有类内初始化程序。为什么仅适用于以下代码中的“const double”？请帮我。

```
class sample{
   static const char mc = '?';
   static const double md = 2.2;
   static const bool mb = true;
};
const char sample::mc;
const double sample::md;
const bool sample::mb;
int main(){
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-04T06:43:37.890

C++03语言标准实现的逻辑基于以下原理。

在 C++ 中，*初始化程序*是对象*定义*的一部分。您在类中为静态成员编写的内容实际上只是一个*声明*。因此，正式地说，直接在类中为任何静态成员指定初始化程序是“不正确的”。它与语言的一般声明/定义概念相反。无论您在类中*声明*的任何静态数据都必须在以后*定义*。这就是您有机会指定初始化程序的地方。

该规则的一个例外是静态整型常量，因为 C++ 中的此类常量可以形成整型常量表达式 (ICE)。ICE 在语言中发挥着重要作用，为了让它们按预期工作，整数常量的值必须在所有翻译单元中可见。为了使某个常量的值在所有翻译单元中可见，它必须在*声明*点可见。为了实现这一点，该语言允许直接在类中指定初始化程序。

此外，在许多硬件平台上，常量整数操作数可以直接嵌入到机器命令中。或者可以完全消除或替换常数（例如，`8`可以将乘以实现为移位`3`）。为了便于生成具有嵌入式操作数和/或各种算术优化的机器代码，重要的是让整数常量的值在所有翻译单元中可见。

非整数类型没有任何类似于 ICE 的功能。此外，硬件平台通常不允许将非整数操作数直接嵌入到机器命令中。出于这个原因，上述“规则的例外”不会扩展到非整数类型。它只会一事无成。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-03-15T11:47:48.797

编译器让我使用`constexpr`而不是`const`：

```
static_consts.cpp:3:29: error: ‘constexpr’ needed for in-class initialization of static data member ‘const double sample::md’ of non-integral type [-fpermissive]
static_consts.cpp:7:22: error: ‘constexpr’ needed for in-class initialization of static data member ‘const double sample::md’ of non-integral type [-fpermissive] 
```

我刚刚接受了offer：

```
class sample{
   static const char mc = '?';
   static constexpr double md = 2.2;
   static const bool mb = true;
};
const char sample::mc;
const bool sample::mb;
int main(){
} 
```

现在它编译得很好（C++11）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-04T06:30:26.257

在 C++11 之前，只有**`const`整数类型**可以在类定义中直接初始化。这只是标准施加的限制。

对于 C++11，这不再适用。

# c# - FindAll for AutomationElement 在 MC++ 和 C# 之间的不同行为

> ID：13697268
> 
> 赞同：1
> 
> 时间：2012-12-04T06:28:24.307
> 
> 标签：c#, ui-automation, managed-c++, uia

我正在尝试使用托管 C++ 中的 UI 自动化来查找控件的`ControlType.DataItem`子级。`DataGrid`以下代码段在 C# 中对已知`HWND`值起作用：

```
var automationElement = AutomationElement.FromHandle(new IntPtr(0x000602AE));
var propertyCondition = new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.DataItem);
var dataItems = automationElement.FindAll(TreeScope.Subtree, propertyCondition).Count;
Console.WriteLine("Found {0} DataItem(s)", dataItems); 
```

这会产生以下输出：

```
Found 2 DataItem(s) 
```

将代码转换为 MC++ 会产生零结果。这是转换后的 MC++ 代码：

```
auto automationElement = AutomationElement::FromHandle(IntPtr(0x000602AE));
auto propertyCondition = gcnew PropertyCondition(AutomationElement::ControlTypeProperty, ControlType::DataItem);
auto dataItems = automationElement->FindAll(TreeScope::Subtree, propertyCondition)->Count;
Console::WriteLine("Found {0} DataItem(s)", dataItems); 
```

是否有其他人使用托管 C++ 中的 UI 自动化遇到此问题？我过去曾将 MC++ 用于 UIA，这是我在 C# 中使用它时遇到的第一个区别。提前感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:07:25.767

我不确定为什么会发生这种情况，但是每当我将 UI 自动化代码提取到另一个类中并像这样调用它时，它就会起作用。我并不声称自己是 MC++ 或它如何加载 .NET 框架的专家，但这就是我解决问题的方式。

## 创建`AutomatedTable`类

`AutomatedTable.h`

```
#pragma once
using namespace System;
using namespace System::Windows::Automation;

ref class AutomatedTable {
public:
    AutomatedTable(const HWND windowHandle);

    property int RowCount {
        int get();
    }

private:
    AutomationElement^ _tableElement;
}; 
```

`AutomatedTable.cpp`

```
#include "StdAfx.h"
#include "AutomatedTable.h"

AutomatedTable::AutomatedTable(const HWND windowHandle) {
    _tableElement = AutomationElement::FromHandle(IntPtr(windowHandle));
}

int AutomatedTable::RowCount::get() {
    auto dataItemProperty = gcnew PropertyCondition(AutomationElement::ControlTypeProperty, ControlType::DataItem);
    return _tableElement->FindAll(TreeScope::Subtree, dataItemProperty)->Count;
} 
```

## 调用自`main.cpp`

`main.cpp`

```
#include "stdafx.h"
#include "AutomatedTable.h"

int main(array<System::String ^> ^args) {
    auto automatedTable = gcnew AutomatedTable((HWND)0x000602AE);
    Console::WriteLine("Found {0} DataItem(s)", automatedTable->RowCount);
    return 0;
} 
```

### 输出

```
Found 2 DataItem(s) 
```

任何关于为什么这有任何不同的见解将不胜感激:-)

# amazon-s3 - 直接从 S3 输入文件运行 HIVE 查询

> ID：13697272
> 
> 赞同：0
> 
> 时间：2012-12-04T06:28:39.657
> 
> 标签：amazon-s3, amazon-web-services, hive, elastic-map-reduce

我在 Elastice Map Reduce 中使用交互式 Hive 会话来运行 Hive。以前我将数据从 S3 加载到 Hive 表中。现在，我想在 S3 输入文件上运行一些脚本，而不将数据加载到 Hive 表中。

这可能吗？如果是，那么如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:22:48.340

您可以直接在 S3 中对数据运行查询。

```
CREATE EXTERNAL TABLE mydata (key STRING, value INT) ROW FORMAT DELIMITED FIELDS  TERMINATED BY '\n' LOCATION 's3n://mys3bucket/'; 
```

或类似的

# c# - C#中的存储过程

> ID：13697273
> 
> 赞同：1
> 
> 时间：2012-12-04T06:28:41.317
> 
> 标签：c#, .net, sql-server, stored-procedures

我在 C# 中遇到了一个存储过程的问题，我收到了这个错误：

> *过程或函数 myQSProcedure_Delete 指定的参数过多。*

我无法解决这个问题。请帮助我。

代码如下。

```
ALTER PROCEDURE [dbo].[myQSProcedure_Delete] 
@Id int
AS
BEGIN
Delete From tblfb where Id = @Id
End 
```

我的 C# 代码是：

```
DataTable dt = (DataTable)ViewState["dt"];
DataTable dtDelete = (DataTable)ViewState["dtDelete"];
dtDelete.Rows.Add(dt.Rows[e.RowIndex]["Id"].ToString(),
dt.Rows[e.RowIndex]["name"].ToString(), dt.Rows[e.RowIndex]["session"].ToString(),
dt.Rows[e.RowIndex]["gender"].ToString(), dt.Rows[e.RowIndex]["email"].ToString(),
dt.Rows[e.RowIndex]["address"].ToString(), dt.Rows[e.RowIndex]["priority"].ToString(),       
dt.Rows[e.RowIndex]["comments"].ToString());
ViewState["dtDelete"] = dtDelete;
dt.Rows[e.RowIndex].Delete();
dt.AcceptChanges();
if (dt.Rows.Count < 1)
dt.Rows.Add(null, "", "", "", "", "", "", "");
GridView1.DataSource = dt;
GridView1.DataBind();
ViewState["dt"] = dt;
if (dt.Rows[0][0].ToString().Equals(""))
    {
        GridView1.Rows[0].Visible = false;
    }
SqlConnection conn = new SqlConnection("data source=Burhan\\SQLEXPRESS;database=mydb;integrated security=true");
    conn.Open();
    SqlCommand cmd = new SqlCommand("myQSProcedure_Delete", conn);
    cmd.CommandType = CommandType.StoredProcedure;
  foreach (DataRow row in dtDelete.Rows)
    {
        cmd.Parameters.Add(new SqlParameter("@Id",row[0]));
        cmd.ExecuteNonQuery();
    }
   conn.Close();
   GridView1.DataSource = dt;
    GridView1.DataBind();
    ViewState["dt"] = dt; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T06:33:27.310

当您遍历行时，该命令似乎保留了它的参数。您应该在每次迭代期间创建一个新命令：

```
foreach (DataRow row in dtDelete.Rows)
{
  using (var cmd = new SqlCommand("myQSProcedure_Delete", conn)
  {
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@Id",row[0]));
    cmd.ExecuteNonQuery();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T06:33:27.170

您的问题在于每次循环时都添加一个新参数。请尝试以下代码。

```
using (SqlCommand cmd = new SqlCommand("myQSProcedure_Delete", conn))
{
    cmd.CommandType = CommandType.StoredProcedure;
    foreach (DataRow row in dtDelete.Rows)
    {
        cmd.Parameters.Clear();
        cmd.Parameters.Add(new SqlParameter("@Id",row[0]));
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:11:35.553

您也可以添加一次参数并为其赋值 n 次，如下所示：

```
 using (var cmd = new SqlCommand("myQSProcedure_Delete", conn))
  {
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.Add("@Id",SqlDbType.Int);
      foreach (DataRow row in dtDelete.Rows)
      {
          cmd.Parameters["@Id"].Value = row[0];
          cmd.ExecuteNonQuery();
      }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:33:17.923

您的存储过程只需要一个 int 作为参数，您可能会发送一大堆。

您需要为要删除的每一行单独调用该过程并清除参数。

# arrays - MATLAB中整数数组的日期

> ID：13697280
> 
> 赞同：0
> 
> 时间：2012-12-04T06:29:22.463
> 
> 标签：arrays, matlab, date, delimiter, structure

在问我的问题之前，这里有一点背景，所以你明白我在做什么。我正在寻找分析一个非常大的数据集（略少于 2,000,000 行）。我已经将数据集解析到 Matlab 中，并根据这些数据构建了一个结构数组，为每个资产 i 提供名称、日期、回报等。现在，我想将我的数据集限制在两天之间，而 Matlab 似乎并不特别适合这种方法。给我的一个建议是获取格式为 MM/DD/YYYY 的日期并使用分隔符“/”以某种方式为我的数据结构构建三个整数数组（我称之为 stock(i) .month、stock(i).day 和 stock(i).year)。但是，我所做的一切似乎都不起作用，而且我非常卡住。

我一直在尝试做的事情如下：

```
%% Dates
fid = fopen('52c6d3831952b24a.csv');
C = textscan(fid, [repmat('%*s ',1,0),'%s %*[^\n]'], 'delimiter',',');
date = C{1}(2:end,1);
fclose(fid);

for i=1:numStock
    locate = strcmp(uniquePermno{i},permno);
    stock(i+1).date = date(locate);
end;

for i = 1:numStock
    stock(i+1).date = char(stock(i+1).date);
    D = textscan(stock(i+1).date, '%s %s %s', 'delimiter','/');
    stock(i+1).month = D{1}(1:end);
    stock(i+1).day = D{2}(1:end);
    stock(i+1).year = D{3}(1:end);
end 
```

我最初想将它们保存为整数（并使用 %u 代替），但我遇到了一个奇怪的情况，我的大多数条目都只是 0 而非零条目非常大（显然不是我所期望的）。但是，上面的表单返回以下错误：

```
Error using textscan
Buffer overflow (bufsize = 4095) while reading string from
file (row 1 u, field 1 u).  Use 'bufsize' option. See HELP TEXTSCAN.
44444444444444444444455555555555555555555566666666666666666666677777777777777777777778888888888888888888889999999999999999999990000000000000000000000011111111111111111112222222222222222222222111111111

Error in makeData_CRSP (line 87)
D = textscan(stock(i+1).date, '%s %s %s', 'delimiter','/'); 
```

所以老实说，我不知道如何处理这个问题。我究竟做错了什么？查看我如何为数据结构保存日期向量，这是解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:43:57.680

您可以使用该`datenum`函数将日期转换为数字。语法是`datenum(dateString, format)`. 例如，如果您的日期格式`YYYY MM DD`为

```
datenum('2012 12 04', 'yyyy mm dd') 
```

一旦你像这样转换了所有日期，你可以简单地使用`>`和比较结果数字`<`：

```
>> datenum('2012 12 04', 'yyyy mm dd') > datenum('2012 12 03', 'yyyy mm dd')

ans =

     1

>> datenum('2012 12 04', 'yyyy mm dd') > datenum('2012 12 05', 'yyyy mm dd')

ans =

     0 
```

# php - PHP/MySQL -- 什么 || 意思是？

> ID：13697285
> 
> 赞同：1
> 
> 时间：2012-12-04T06:29:37.937
> 
> 标签：php, mysql

我正在尝试在我的网站上设置一个简单的 php/mysql 数据库，示例中有一行内容：

```
 if (!$searchtype || !?searchterm) { 
```

什么是||??? 我试图复制并粘贴它们，但它们会导致语法错误。我知道菜鸟问题，但仍然希望得到答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T06:30:08.563

它的`||(OR)` [逻辑运算符](http://php.net/manual/en/language.operators.logical.php)

> $一|| $b 或 TRUE 如果 $a 或 $b 中的一个/两者为 TRUE。

它应该是

```
if (!$searchtype || !searchterm) { 
```

如在[此评论](https://stackoverflow.com/questions/13697285/php-mysql-what-does-mean/13697296#comment18808319_13697296)中，您可以通过以下方式编写

![在此处输入图像描述](../Images/a0709a3f516e3f2c8b97e6f2140ffec5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T06:30:30.467

我认为代码实际上是：

```
 if (!$searchtype || !$searchterm) { 
```

`||`表示 OR 运算符，表示如果任一条件为真，则满足条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:33:58.050

它是`OR`处理条件的逻辑运算符：

前任 ：

```
$a || $b 
```

如果 $a 或 $b 为 TRUE，则为 TRUE。

请参阅： http: [//php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

更多细节

# php - 通过执行查询克隆资源获取

> ID：13697289
> 
> 赞同：2
> 
> 时间：2012-12-04T06:29:57.547
> 
> 标签：php, mysql, clone

下面是执行我的查询并返回资源的语句。

```
$Result = mysql_query($Query); 
```

我想获得`$Result`.

我怎样才能得到它的克隆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:34:11.280

您在 $Result 中获得的并不是真正的可克隆资源，而是对指向结果集中某个位置的光标的引用（这意味着如果您复制它并在一个副本中前进，它也会在另一个副本中前进）。假设您想在不重复查询的情况下两次读取相同的查询结果，这篇文章可能会有所帮助： [如何将 mysql 指针重置回 PHP 中的第一行？](https://stackoverflow.com/questions/3817997/how-to-reset-mysql-pointer-back-to-the-first-row-in-php)

# cordova - 如何在列表视图上填充动态内容？

> ID：13697291
> 
> 赞同：0
> 
> 时间：2012-12-04T06:30:03.863
> 
> 标签：cordova, jquery-mobile, ios6

我想填充列表视图中的“数据 jsonp”格式的项目列表。我正在使用 jquery mobile 和 phonegap。我已经尝试了所有可能的方法，但数据不是以列表视图的形式出现，而是以简单的格式出现。我正在使用“jquery.mobile-1.0.1.min.css”和“jquery.mobile-1.0.1.min.js”。请帮忙。

如果有人提供一些工作示例，那就太好了。

谢谢 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:33:21.243

为了以增强的 jQuery 移动格式显示数据，您需要

1.  将数据以列表格式添加到 DOM 中，并带有一个`data-role="listview"`属性

    ```
    <ul id="listContainer" data-role="listview">
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul> 
    ```

    （您可以`</ul>`在 DOM 中已经存在，并在其中添加 JSON 列表中的项目）

2.  使用 jQuery mobile 增强内容，使用`$("#listContainer").listview("refresh");`

[您可以在此处](http://jsfiddle.net/rgJf2/)查看示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:57:47.243

首先，您应该添加一个列表视图：

```
<ul data-role="listview" id="SomeListView" class="tab">
</ul> 
```

然后，通过获取的服务数据填充列表视图：

```
$.getJSON(globalServiceUrl + "mobile/services/getSomeData.json", function (json) {
    var html = '';

    $.each(json, function (k, v) {
        var item= json[k];
        html += '<li>'+item.Title+'</li>';
    });

    $("#SomeListView").html(html);
    $("#SomeListView").listview('refresh');
 }); // $.getJSON 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:58:33.617

```
$(document).ready(function(){
$(document).bind('deviceready', function(){
    //Phonegap ready
    onDeviceReady();
});

var output = $('#output');

$.ajax({
    url: 'http://samcroft.co.uk/demos/updated-load-data-into-phonegap/landmarks.php',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data, status){
       $.each(data, function(i, item) {
              $('ul').append('<li><h4>' + item.name + '</h4><p>' + item.latitude + '<br>' + item.longitude + '</p></li>');
              });
    },
    error: function(){
       output.text('There was an error loading the data.');
    }
}); 
```

});

```
<body>
    <div>
        <ul data-role="listview" data-filter="false" id="output" >

        </ul>
    </div>
</body> 
```

这是我的代码。

# css - 调整 div 大小时，自动将 div 的子级垂直对齐底部，水平方向左对齐

> ID：13697297
> 
> 赞同：1
> 
> 时间：2012-12-04T06:30:33.243
> 
> 标签：css

我试图在调整 div 大小时自动将 div 的子元素排列到它的底部。这是我的 html 。请帮我 。谢谢。

```
<div style="width:200px;height:200px;border:1px solid red;vertical-align:bottom;">
    <a>more...</a>
    <input type="button"  value="query" />
</div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:57:00.813

选项 1：您可以为两个子元素添加一个 css 类并提供一个位置属性。像这样的东西

```
<a class = "myclass">more...</a>
<input class = "myclass" type="button"  value="query" /> 
```

然后你可以像这样设计你的CSS

```
.myclass{position:relative;top:90%;}​​​​​ 
```

选项2：您可以将两个子元素放在子 div 块中，并将 css 类添加到该 div。像这样的东西

```
<div class = "myclass">
    <a >more...</a>
    <input type="button"  value="query" />
</div> 
```

使用相同的 CSS 样式希望这有帮助..

# clojure - 如何在 clojure 中实现延迟对象构造函数？

> ID：13697300
> 
> 赞同：2
> 
> 时间：2012-12-04T06:30:43.367
> 
> 标签：clojure

这是由 Radul 和 Sussman 的“传播者的艺术”论文推动的：

[http://web.mit.edu/~axch/www/art.pdf](http://web.mit.edu/~axch/www/art.pdf)

当他们构建 a 时`compound progator`，他们说：

> 复合传播器是通过一个程序来实现的，该程序将按需构建传播器的主体。我们注意它只有在某个邻居确实有值时才被构造，并且它只被构造一次

第 10 页的代码是：

```
（定义（要构建的复合传播器邻居）
  （让（（完成？#f）（邻居（列出邻居）））
    （定义（测试）
      （如果完成了？
          '好的
        （如果（什么都没有？（地图内容邻居））
            '好的
          （开始（设置！完成？#t）
                 （建造）））））
    （传播者邻居测试）））

```

我们如何使用 clojure 的持久数据结构来做到这一点？

* * *

这可能是一个简化版本：

```
(def m {:a (delayed (some-object-constructor))}) 
```

where`(:a m)`在第一次调用时构造对象并给出，然后后续调用`(:a m)`将访问该对象。

它有点像 memoize 但在值而不是函数..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:28:01.573

至于延迟执行，[延迟](http://clojuredocs.org/clojure_core/clojure.core/delay)可能是一个开始。它只能用于在第一次取消引用时评估构造函数。它可能看起来像这样：

```
(defn some-object-constructor
  []
  (println "Making something!")
  :something)

(def m {:a (delay (some-object-constructor))})

(println "Doing some intermediate work.")

(println (deref (:a m))) 
```

# objective-c - UITextView 中的字体大小意外更改

> ID：13697303
> 
> 赞同：2
> 
> 时间：2012-12-04T06:30:58.797
> 
> 标签：objective-c, ios, uitableview, uiwebview, uitextview

我有一个带有几个表格视图单元格的表格视图。表格视图单元由标题（使用 UILabel）、图片（使用 UIWebView）和摘要（使用 UITextView）组成。

当我将 UIImage 用于图片时，一切运行良好。但后来，我决定使用调整大小的 UIWebView 而不是 UIImage 来显示图片。UITextView 中的一些摘要意外更改。

当我滚动表格时，问题有时会消失。但它可以再次随机出现在不同的表格视图单元格上。

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {`

 ````
static NSString *CellIdentifier = @"Cell";

TableViewCell *cell = (TableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"TableViewCell" owner:self options:nil];
    cell = table;
    self.table = nil;
}

//Configure the cell...

Article *article = [_articleRepository fetchArticleById:[articleIds objectAtIndex:indexPath.row]];
cell.headline.text = article.articleTitle;

// Remove html tag
NSString *substringContent = [self stringByStrippingHTML:article.articleContent];

cell.content.text = substringContent;

cell.selectionStyle = UITableViewCellSelectionStyleGray;

ImageRepository *imageRepository = [[ImageRepository alloc]init];
Image *image = [imageRepository fetchImageById:article.articleImage];

NSMutableString *mutUrl = [[NSMutableString alloc]initWithString:image.imageUrl];
[mutUrl insertString:@"_thumb" atIndex:[mutUrl length]-4];
NSString *stringUrl = [[NSString alloc]initWithString:mutUrl];

NSString *htmlImage = [NSString stringWithFormat:@"<html><head><style type=\"text/css\">body{margin: 0; padding: 0;}</style></head><body><img src=\"%@\"></body></html>", stringUrl];

[cell.image loadHTMLString:htmlImage baseURL:nil];

return cell; 
```` 

`}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:36:59.253

这可能是由于重用了表格视图中的单元格，这使您的问题在单元格中随机出现。如果您发布了您所做工作的代码，将会有所帮助。
编辑：尝试将您的代码部分更改为下面给出的代码。

```
if (cell == nil) {

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"TableViewCell" owner:self options:nil];
    cell = [topLevelObjects objectAtIndex:0];
} 
```

一些问题： 1\. 你为什么要做 cell = table & self.table = nil ？

# kendo-ui - 如何使用 kendoui 删除网格中的多条记录

> ID：13697307
> 
> 赞同：2
> 
> 时间：2012-12-04T06:31:35.893
> 
> 标签：kendo-ui

我有一个网格，网格中的每个项目都有复选框。我需要删除网格中的多个选中项。我怎么能在剑道ui中做到这一点。

问候，

斯里兰卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:54:12.617

单击按钮时，使用 jQuery 查找所有包含选中复选框的 TR 元素，然后使用[removeRow](http://docs.kendoui.com/api/web/grid#removerow)方法。就像是：

```
$.each($('#GridName :checkbox:checked').closest('tr'),function(){
    $('#GridName').data().kendoGrid.removeRow($(this));
}) 
```

# jsf-2 - 如何摆脱复合组件中自动生成的 j_idt ID

> ID：13697312
> 
> 赞同：4
> 
> 时间：2012-12-04T06:32:34.880
> 
> 标签：jsf-2, composite-component

我正在使用以下复合组件：

```
<composite:interface>
    <composite:attribute name="inputId" />
</composite:interface>
<composite:implementation>
    <h:panelGrid id="myTableId">
        <h:inputText id="#{cc.attrs.inputId}" value="..." />
        ...
    </h:panelGrid>
</composite:implementation> 
```

我以如下形式使用它：

```
<h:form id="myForm">
    <myCompositeComp:test inputId="myInputTextBoxId" />
<h:form> 
```

我已经验证了页面的视图源，这就是它的生成方式：

```
<table id="myForm:j_idt90:myTableId">
    ...
    <input type="text" id="myForm:j_idt90:myInputTextBoxId" />
</table> 
```

我怎样才能摆脱`j_idt90`这里？它`id`是我的复合组件的吗？我从 BalusC 的一篇文章中读到，如果我声明`id`为静态，这个问题将得到解决。但我无法确定在我的代码中声明它的位置。我也可以假设`<h:panelGrid>`是一种`UINamingContainer`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T06:59:22.143

是的，它是您的复合组件的 id，`<h:panelGrid>`不是 a`UINaminContainer`但复合组件是（它必须是，否则如果您在同一个表单中多次使用它，您将有重复的 ID）。

为什么你需要摆脱身份证？如果可以解决您的问题，您可以自己设置：

```
<h:form id="myForm">
    <myCompositeComp:test id="myComp" attr1="" attr2="" />
<h:form> 
```

生成的 html 应如下所示：

```
<table id="myForm:myComp:myTableId">
        ....
        <input type="text" id="myForm:myComp:myInputTextBoxId"
</table> 
```

# c# - 如何在asp.net web api中将图像流式传输到客户端应用程序？

> ID：13697315
> 
> 赞同：3
> 
> 时间：2012-12-04T06:32:41.050
> 
> 标签：c#, asp.net, asp.net-mvc, streaming, asp.net-web-api

我必须从磁盘或网络链接中检索图像，调整其大小并将其流式传输到客户端应用程序。这是我的控制器方法。

```
[HttpPost]
    [ActionName("GetImage")]
    public HttpResponseMessage RetrieveImage(ImageDetails details)
    {
        if (!details.Filename.StartsWith("http"))
        {
            if (!FileProvider.Exists(details.Filename))
            {
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound, "File not found"));
            }

            var filePath = FileProvider.GetFilePath(details.Filename);

            details.Filename = filePath;
        }                

        var image = ImageResizer.RetrieveResizedImage(details);

        MemoryStream stream = new MemoryStream();

        // Save image to stream.
        image.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);        

        var response = new HttpResponseMessage();
        response.Content = new StreamContent(stream);
        response.Content.Headers.ContentDisposition
            = new ContentDispositionHeaderValue("attachment");
        response.Content.Headers.ContentDisposition.FileName = details.Filename;
        response.Content.Headers.ContentType
            = new MediaTypeHeaderValue("application/octet-stream");

        return response;
    } 
```

这就是发送 Web 链接（在这种情况下）并在客户端应用程序端接收图像的方式。

```
HttpClient client = new HttpClient();
            client.BaseAddress = new Uri("http://localhost:27066");
            client.DefaultRequestHeaders.Accept.Add(
                new MediaTypeWithQualityHeaderValue("application/octet-stream"));

            ImageDetails img = new ImageDetails { Filename = "http://2.bp.blogspot.com/-W6kMpFQ5pKU/TiUwJJc8iSI/AAAAAAAAAJ8/c3sJ7hL8SOw/s1600/2011-audi-q7-review-3.jpg", Height = 300, Width = 200 };

            var response = await client.PostAsJsonAsync("api/Media/GetImage", img);
            response.EnsureSuccessStatusCode(); // Throw on error code.

            var stream = await response.Content.ReadAsStreamAsync();

            FileStream fileStream = System.IO.File.Create("ImageName");
            // Initialize the bytes array with the stream length and then fill it with data
            byte[] bytesInStream = new byte[stream.Length];
            stream.Read(bytesInStream, 0, (int)bytesInStream.Length);    
            // Use write method to write to the specified file
            fileStream.Write(bytesInStream, 0, (int) bytesInStream.Length);

            MessageBox.Show("Uploaded"); 
```

正在从 Web 链接检索图像并且调整大小已正确完成，但不确定它是否正确流式传输，因为它在客户端应用程序收到时创建了一个带有“ImageName”的 0kb 文件。谁能告诉我哪里出错了？我整天都在为此头疼:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:07:49.010

在将内存流传递给响应之前尝试重置内存流的位置：

```
stream.Position = 0;
response.Content = new StreamContent(stream); 
```

我想您的图像大小调整库最后会留下内存流的位置。

# java - 递归函数提升二进制ARRAY

> ID：13697316
> 
> 赞同：1
> 
> 时间：2012-12-04T06:32:44.453
> 
> 标签：java, arrays, function, recursion

如何使用递归函数提升二进制数组。该函数接收二进制数组 V 并将 V 表示的数字的值增加以下具有相同的单位数的数字的值。如果可以执行操作，函数返回true（java）

例子：

```
v = {0,0,0,1,1,0,0,1,1} => return true, v = {0,0,0,1,1,0,1,0,1} 
```

我写这个：

```
public static boolean incrementSameOnes(int[] vec)  {
    boolean succ=false;
    int[] v=new int[vec.length-1];
    if(vec.length==1){
        return false;
    }
    if (vec[vec.length-1]==1 && vec[vec.length-2]==0)
    {
        vec[vec.length-2] = 1;
        vec[vec.length-1] = 0;
        System.out.print(Arrays.toString(vec));
        return true;
    }else {
        for(int j=0;j<vec.length-1;j++)
            v[j]=vec[j];
        succ=incrementSameOnes(v);  
        }
    return succ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:57:32.727

如果我理解正确，您想在二进制表示中找到具有相同数量设置位的下一个更高整数，对吗？如果是这样，我建议：

```
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        int[] x = { 1, 1, 1, 0, 1, 1, 0 };
        System.out.println("original: " + Arrays.toString(x));
        if (promote(x)) System.out.println("promoted: " + Arrays.toString(x));
        else System.out.println("not promotable");
    }

    private static boolean promote(int[] x) {
        // convert to integer value
        int value = 0;
        for (int i = 0; i < x.length; i++) {
            value += x[x.length - 1 - i] * (1 << i);
        }
        int newValue = value + 1, maxValue = 1 << x.length;
        int nBits = getNumberOfSetBits(value);

        // increase value until same amount of set bits found
        while (newValue < maxValue && getNumberOfSetBits(newValue) != nBits)
            newValue++;

        // convert back to array
        if (newValue < maxValue) {
            for (int i = 0; i < x.length; i++) {
                x[x.length - 1 - i] = (newValue & (1 << i)) >> i;
            }
            return true;
        } else {
            return false;
        }
    }

    // kung fu magic to get number of set bits in an int
    // see http://stackoverflow.com/a/109025/1137043
    private static int getNumberOfSetBits(int i) {
        i = i - ((i >> 1) & 0x55555555);
        i = (i & 0x33333333) + ((i >> 2) & 0x33333333);
        return (((i + (i >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;
    }
} 
```

输出：

```
original: [1, 1, 1, 0, 1, 1, 0]
promoted: [1, 1, 1, 1, 0, 0, 1] 
```

**编辑：**对于您示例中的二维数组，转换为 int 并返回到您的数组格式看起来会有些不同，但我会推荐相同的方法。

# c - 如何向比特洪流跟踪器发送获取请求

> ID：13697317
> 
> 赞同：2
> 
> 时间：2012-12-04T06:32:52.637
> 
> 标签：c, get, bittorrent

我正在尝试实现一点洪流客户端。

第一步是解码 torrent 文件，我这样做了，结果如下：

```
d8:announce36:http://tracker.mininova.org/announce7:comment41:自动生成
Mininova.org 的洪流 CD13:creation
datei1212041255e4:infod5:filesld6:lengthi291e4:pathl27:分发者
Mininova.txteed6:lengthi199784e4:pathl19:cs
song.mp3.mp3eee4:name33:反恐精英歌曲版本 212:piece
lengthi1048576e6:pieces20:è¶¬oîdÏ9`•×=ü¼e6:locale2:en5:title33:The
反恐精英歌曲版本 2e。

```

第二步是向跟踪器的通告 URL 发送 HTTP GET 请求，使用“？” 并附加以下参数（如上编码）。这是我印象深刻的部分。我一直在研究如何在 C 中发送 HTTP GET；看来您需要先设置一个 TCP 套接字并首先连接到跟踪器服务器。我一直在这样做：

```
if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
{
    printf("fail create socket");
    return 0;
}
char *path = “tracker.mininova.org/announce7”;
struct hostent *hp = gethostbyname(path);
memset(&servAddr, 0, sizeof(servAddr));
servAddr.sin_family = AF_INET;
&servAddr.sin_addr.s_addr = ((struct sockaddr_in*)(res->ai_addr))->sin_addr.s_addr;
servAddr.sin_port   = htons(portNum); 
```

但是，`gethostbyname`继续返回`null`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:39:00.653

您正在调用`gethostbyname`一个不仅仅是域的字符串，`"tracker.mininova.org/announce7"`. 您需要仅在域上调用它，`"tracker.mininova.org"`. 您可以检查该`h_errno`值以解决此问题。

但是，使用`gethostbyname`和相关的功能应该被替换为使用`getaddrinfo`反正（具有相同的限制，但会提供更好的结果）。

# mysql - 带有子查询的Mysql更新查询有什么问题？

> ID：13697318
> 
> 赞同：1
> 
> 时间：2012-12-04T06:32:55.280
> 
> 标签：mysql, sql

我有这样的查询

```
UPDATE `user_plan_details` 
SET    `plan_expiry_date` = Date_add((SELECT plan_expiry_date 
                                      FROM   `user_plan_details` 
                                      WHERE  user_id = 56 
                                             AND 
                                     user_plan_details.is_current_plan = 1) 
                                   , INTERVAL 30 day) 
WHERE  `user_id` = '56' 
       AND user_plan_details.is_current_plan = 1 
```

执行此查询时收到这样的错误消息

> MySQL 数据库错误：您无法在 FROM 子句中指定目标表 'user_plan_details' 进行更新

子查询

```
SELECT DATE_ADD((SELECT plan_expiry_date FROM `user_plan_details` WHERE user_id = 56 AND user_plan_details.is_current_plan = 1 ), INTERVAL 30 DAY) 
```

给出结果

```
1/11/2013 12:00:00 AM 
```

我的查询有什么问题？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:45:57.650

[请参阅子查询错误](http://dev.mysql.com/doc/en/subquery-errors.html)“子查询中不正确使用的表”中的最后一项。

它说您可以在更新语句中使用子查询，但不能在更新*和子选择中使用**同一个*表。

 *但是你可以试试这个

```
UPDATE `user_plan_details` 
SET    `plan_expiry_date` = Date_add(plan_expiry_date, INTERVAL 30 day) 
WHERE  `user_id` = '56' 
       AND user_plan_details.is_current_plan = 1 
```

用于测试的[SQL Fiddle 。](http://www.sqlfiddle.com/#!2/2e6ed/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:49:42.237

原因是您正在更新一个表，您从该表的子查询中获取其记录。MYSQL 不允许这样做，您需要通过动态创建临时表来欺骗数据库

你可以简单::

```
UPDATE `user_plan_details` 
SET    `plan_expiry_date` = Date_add(plan_expiry_date, INTERVAL 30 day) 
WHERE  `user_id` = '56' 
       AND user_plan_details.is_current_plan = 1 
```

或者如果你想以你的风格::作为::

```
UPDATE `user_plan_details` 
SET    `plan_expiry_date` = Date_add(
Select temp_itself.plan_expiry_date from 
(SELECT plan_expiry_date 
                                      FROM   `user_plan_details` 
                                      WHERE  user_id = 56 
                                             AND 
                                     user_plan_details.is_current_plan = 1) 
                                   , INTERVAL 30 day) temp_itself
WHERE  `user_id` = '56' 
       AND user_plan_details.is_current_plan = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:03:27.860

你可以这样做：

```
update user_plan_details as t1, (select DATE_ADD((SELECT plan_expiry_date FROM 
   `user_plan_details` WHERE  user_id = 56 AND user_plan_details.is_current_plan = 1 ),
    INTERVAL 30 DAY) as t2 ) as t3  set t1.plan_expiry_date=t3.t2 where t1.`user_id` = 
    '56' AND t1.is_current_plan = 1 ; 
```*

# mysql - 找不到 my.ini 文件来设置变量 event_scheduler = on

> ID：13697319
> 
> 赞同：0
> 
> 时间：2012-12-04T06:32:55.750
> 
> 标签：mysql

我正在使用 Windows 操作系统，mysql - v5.1.66。

重新启动 MYSQL 服务器后，事件调度程序似乎不起作用，在搜索了很多论坛之后，我了解到在 my.ini 文件中设置 event_scheduler 变量可以解决问题，但是，我在系统中搜索了很多文件，但没有任何成功。

请有人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:01:35.750

也许你可以在 C:\Program Files\MySQL\MySQL Server 5.5 中找到它。但是好像没有

# java - Java 平面文件解析器 (jffp) LineFormatTest

> ID：13697321
> 
> 赞同：3
> 
> 时间：2012-12-04T06:33:20.803
> 
> 标签：java

我想使用 Java Flat File Parser (jffp) 并尝试运行 src 文件内的 TestCase (JUnit)“LineFormatTest”（在文件“test”内单击一些之后）。我得到的是这个错误：

> org.sadun.text.ffp.FieldDefinitionException：编程错误：字段 field_1_1（从位置 0 到位置 5，长度 5，键入数字）和 field_1_1（从位置 0 到位置 5，长度 5，键入数字）相交

有没有人尝试运行这个 TestCase 并偶然发现了这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:43:54.933

我在 jffp 和 JDK1.7 上遇到了这样的麻烦。我调查了来源，发现oracle纠正了在JDK1.7的TreeSet中使用的TreeMap的一些实现，因此jffp将字段定义添加到集合中，但是map的新实现调用了第一个元素的比较方法，并在其中实现了比较器jffp 包含对字段元素位置的检查，如果位置相同，则会引发“编程异常”。如果您查看异常描述，您会发现它比较了相同的字段。

因此，如果您也使用 jdk1.7，那么我看不到任何轻松的解决方案可以摆脱 jffp 或 jdk1.7（回到 1.6）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-02T15:08:14.327

刚刚在使用jdk1.7.0_55和jffp的时候遇到了这个bug。在 Java 7 中，只要将第一个元素添加到 TreeSet，就会调用比较器。因此，第一个 FieldInfo 实例 (o1) 与自身 (o2) 进行比较；o1 和 o2 明显相交。

这是我成功测试过的快速而肮脏的解决方案：

1.  在 sourceforge下载**jffp**源代码：http: [//sourceforge.net/projects/jffp/](http://sourceforge.net/projects/jffp/)

2.  获取**LineFormat.java**文件并将其复制到项目的**org.sadun.text.ffp**包中。

3.  现在修改**addFieldInfo**私有方法并将**(f1 != f2)**条件添加到**f1.intersects(f2)**测试，以确保不会针对自身测试字段的交集：

    ```
     private void addFieldInfo(int physicalLine, FieldInfo info) {
           if (physicalLine > currentPhysicalLine)
              currentPhysicalLine = physicalLine;
           final Integer pl = new Integer(physicalLine);
           SortedSet l = (SortedSet) fieldsByLine.get(pl);
           if (l == null) {
              l = new TreeSet(new Comparator() {
                 public int compare(Object o1, Object o2) {
                    FieldInfo f1 = (FieldInfo) o1;
                    FieldInfo f2 = (FieldInfo) o2;
                    // fields must not intersect
                    if ((f1 != f2)
                          && f1.intersects(f2))
                       throw new FieldDefinitionException(
                             "Programming error: the fields "
                                   + f1
                                   + " and "
                                   + f2
                                   + " intersect");
                    return f1.start - f2.start;

                 }
              });
              fieldsByLine.put(pl, l);
           }
           l.add(info);
     } 
    ```

4.  编译和测试。

我要联系开发商。也许他可以建立一个官方版本来修复这个错误。

# android - SkImageDecoder：工厂返回 null

> ID：13697327
> 
> 赞同：0
> 
> 时间：2012-12-04T06:33:40.920
> 
> 标签：android, android-layout, android-emulator

我正在尝试从 sdcard 获取图像以将其显示在 android 的 imageview 中。它显示错误为 SkImageDecoder:factory 在 android emulator2.2 中返回 null。这是我在 android 中从 SDcard 检索图像到 imageview 的代码。

```
File imgFile = new File("/sdcard/wm.png");
if (imgFile.exists()) {
     Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
     ImageView myImage = (ImageView) findViewById(R.id.imageView1);
     myImage.setImageBitmap(myBitmap);
} 
```

请解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:22:32.153

使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)或[Environment.getExternalStoragePublicDirectory](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29)而不是硬编码 sd 卡的路径（即`"/sdcard/wm.png"`）。

# javascript - 将表单发布到 iframe 并使用 javascript 从 iframe 取回内容？

> ID：13697330
> 
> 赞同：0
> 
> 时间：2012-12-04T06:33:44.860
> 
> 标签：javascript, iframe, cross-domain

我正在开发一个需要从 iframe 获取内容的网站。代码在这里。

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-lates…
</head>
<body>
    <iframe src="http://glimmertech.org/IF222.htm" width="80%" height="600" id="frameDemo">       </iframe>

    <script>
    var myFrame = $('#frameDemo');

    myFrame.load(function()
    {
       var myjQueryObject = $('#frameDemo').contents().find('#newid'…
       alert(myjQueryObject[0].innerHTML);
    });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:40:43.340

试试这个：

```
 var myIframe = document.getElementById('frameDemo');
 var myObject = myIframe.contentWindow.document.getElementById('newid');
 alert(myObject.innerHTML); 
```

# ios - UIPopoverController 内存泄漏中的 UIPickerView

> ID：13697335
> 
> 赞同：0
> 
> 时间：2012-12-04T06:34:04.943
> 
> 标签：ios, memory-leaks, uipickerview, uipopovercontroller

我对 iOS 编程比较陌生，所以我会尽力描述我遇到的问题。如果我可以提供一些额外的信息来解决问题，请告诉我。

我目前在我的应用程序的 UIPopoverController 中显示 UIPickerView。我遇到的问题是，当我使用泄漏工具进行分析时，每次弹出窗口被解除时，都会弹出内存泄漏。这是初始化弹出框和选择器视图的代码。

```
// Show the popover
CGRect cellRect = [tableView rectForRowAtIndexPath:indexPath];

UIViewController *vc = [[UIViewController alloc] init];
[vc setContentSizeForViewInPopover:CGSizeMake(320, 216)];

UIPickerView *pv = [[UIPickerView alloc] init];
[pv setShowsSelectionIndicator:YES];
[pv setDataSource:self];
[pv setDelegate:self];

[[vc view] addSubview:pv];
inputPopoverController = [[UIPopoverController alloc] initWithContentViewController:vc];
[inputPopoverController setDelegate:self];
[pv selectRow:selection inComponent:0 animated:NO];
vc = nil;
pv = nil;

[inputPopoverController presentPopoverFromRect:cellRect inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

inputPopoverController 被声明为

```
UIPopoverController *inputPopoverController; 
```

这里是我释放弹出框控制器的地方，我已经确认每次弹出框被解除时都会调用该函数。

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
inputPopoverController = nil;} 
```

仪器在以下两个位置显示泄漏

```
[pv selectRow:selection inComponent:0 animated:NO]; 
```

和

```
[inputPopoverController presentPopoverFromRect:cellRect inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:15:56.743

经过几天的努力，我发现我需要实现一个 UIPickerView 委托方法。这是我在[这里找到答案的地方](https://stackoverflow.com/questions/13045423/ios6-uipickerview-memory-leak)

# java - 程序在没有任何输入的情况下为 IntegerSet 输出十六进制？

> ID：13697336
> 
> 赞同：1
> 
> 时间：2012-12-04T06:34:06.467
> 
> 标签：java

因此，我在帮助下解决了大部分问题，但是现在当我尝试正确打印 IntegerSet 时，它并没有改变。

我不确定为什么会出现这种类型的问题，可能是因为测试很糟糕？

```
This is how it remains. 

setA: IntegerSet@1893c911  // Any ideas why this happens?
setB: IntegerSet@e7587b2   // And this?
1) insertElement into setA
2) deleteElement from setA
3) insertElement into setB
4) deleteElement from setB
5) intersection of setA and setB
6) union of setA and setB
7) equality of setA and setB
Select from the menu above (or 0 to exit): 
```

这是类代码：

```
int [] a;  // holds a set of numbers from 0 - 100

          public IntegerSet () {
            // an empty set, all a[i] are set to 0
            a = new int [101];
          }

          // A constructor that copies from an existing set.
          public IntegerSet (IntegerSet existingSet) {
            a = new int [101];
            for(int i=0; i<a.length; i++)
              a[i] = existingSet.a[i];
          }

          public void deleteElement(int i) {
            if ((i >= 0) && (i < a.length))
              a[i] = 0;  // set to 1
          }

          public void insertElement(int i) {
            if ((i >= 0) && (i < a.length))
              a[i] = 1;  // set to 1
          }

          public boolean isSet(int i) {
            return (a[i] == 1);
          }

          public int lengthOfArray(){
              return this.a.length;
        }

          public static IntegerSet union(IntegerSet otherSet, IntegerSet nextSet) {

                for(int i=0; i<otherSet.length(); i++) {
                  if (otherSet.isSet(i))
                    nextSet.insertElement(i);
                }

                return nextSet;
              }

              public static IntegerSet intersection(IntegerSet otherSet, IntegerSet nextSet) {

                for(int i=0; i<otherSet.length(); i++) {
                  if (!otherSet.isSet(i))
                    nextSet.deleteElement(i);
                }

                return nextSet;
              }

          // return true if the set has no elements
          public boolean isEmpty() {
            for (int i=0; i<a.length; i++)
              if (isSet(i)) return false;
            return true;
          }

          // return the 'length' of a set
          public int length() {
            int count = 0;
            for (int i=0; i<a.length; i++)
              if (isSet(i))
                count++;
            return count;
          }

          // Print a set to System.out
          public void setPrint() {
            System.out.print("[Set:");

            if (isEmpty())
              System.out.print("---");

            for (int i=0; i<a.length; i++) {
              if (isSet(i))
                System.out.print(" " + i);
            }

            System.out.print("]\n");
          }

          // return true if two sets are equal
          public boolean isEqualTo(IntegerSet otherSet) {
            for(int i=0; i<a.length; i++) {
              if (otherSet.isSet(i) != isSet(i))
                return false;
            }
            return true;
          } 
```

测试代码：

```
import java.util.Scanner;

public class IntegerSetTest {

    public static void main(String args[]) {

        IntegerSet setA = new IntegerSet();
        IntegerSet setB = new IntegerSet();

        Scanner scan = new Scanner(System.in);
        int input;

        do {            
            // Just for formatting purposes...
            System.out.println();            
            System.out.println("setA: " + setA);
            System.out.println("setB: " + setB);
            System.out.println("1) insertElement into setA");
            System.out.println("2) deleteElement from setA");
            System.out.println("3) insertElement into setB");
            System.out.println("4) deleteElement from setB");
            System.out.println("5) intersection of setA and setB");
            System.out.println("6) union of setA and setB");
            System.out.println("7) equality of setA and setB");
            System.out.println("Select from the menu above (or 0 to exit): ");
            input = scan.nextInt();

            switch(input) {
                case 1: 
                    System.out.print("Enter an element to insert into setA: ");
                    setA.insertElement(scan.nextInt());
                    break;
                case 2:
                    System.out.print("Enter an element to delete from setA: ");
                    setA.deleteElement(scan.nextInt());                  
                    break;
                case 3:    
                    System.out.print("Enter an element to insert into setB: ");
                    setB.insertElement(scan.nextInt());                 
                    break;
                case 4:
                    System.out.print("Enter an element to delete from setB: ");
                    setB.deleteElement(scan.nextInt());                  
                    break;
                case 5:    
                    System.out.println("The intersection of setA and setB is: " + IntegerSet.intersection(setA, setB));
                    break;
                case 6:
                    System.out.println("The union of setA and setB is: " + IntegerSet.union(setA, setB));
                    break;
                case 7:
                    System.out.println("setA and setB are " + (setA.isEqualTo(setB) ? "" : "un") + "equal");
                    break;
                default:
                    if (input != 0) {
                        System.out.println("\n*** Error, invalid input! ***\n");
                    }
            }          
        }while(input != 0);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:36:49.653

当您尝试输出对象时...

```
System.out.println("setA: " + setA); 
```

您正在尝试将对象转换为字符串。为了做到这一点：

> 字符串转换是通过 toString 方法实现的，由 Object 定义并由 Java 中的所有类继承。( [docs.oracle.com](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html) )

...您需要覆盖类中的[`toString(...)`方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)`IntegerSet`：

```
 public String toString() {
        // Maybe you should use java.lang.StringBuilder instead
        String returnValue = "[Set:";

        if (isEmpty())
          returnValue += "---";

        for (int i=0; i<a.length; i++) {
          if (isSet(i))
            returnValue += " " + i;
        }

        returnValue += "]\n";

        return returnValue;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:36:57.507

您需要编写一个`toString()`方法来`IntegerSet`创建一个`String`您想要的对象表示形式。`toString()`打印您所看到的字符串类型的默认实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:37:04.240

```
IntegerSet@1893c911  // Any ideas why this happens? 
```

这表明您的 IntegerSet 类没有覆盖 toString() 方法。所以它使用默认的 toString 实现来打印类和实例标识符。

您需要覆盖 toString 方法。Arrays.toString() 有助于很好地打印数组。

# ruby-on-rails - Rails3 表单部分重用

> ID：13697340
> 
> 赞同：0
> 
> 时间：2012-12-04T06:34:26.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

以下是有效的 Rails 标准格式。

```
<div id="content-form">
  <%= form_for @passion, url: passion_path do |f| %>
    <%#= render :partial => "form", :f => f %>
    <div class="alternate">
      <%= f.label "Status" %>
      <%= f.text_field :status %>
    </div>

  <% end %>
</div> 
```

现在我`_form.html.erb`使用以下内容提取部分内容：

```
<div class="alternate">
  <%= f.label "Status" %>
  <%= f.text_field :status %>
</div> 
```

并将表格更新为：

```
<div id="content-form">
  <%= form_for @passion, url: passion_path do |f| %>
    <%= render :partial => "form", :f => f %>
  <% end %>
</div> 
```

但是现在这会引发一个抱怨`f`变量的错误。

```
undefined local variable or method `f' for #<#<Class:0x0000012d51d3e8>:0x0000012d796ef8>

Extracted source (around line #2):

1: <div class="alternate">
2:   <%= f.label "Status" %>
3:   <%= f.text_field :status %>
4: </div> 
```

为什么是这样？其漂亮的 Rails 基础。

需要考虑的一件事是资源`@passion`是单一的。即`resource :passion`（用户 has_one 激情）

因此，我必须`url: passion_path`在`form_for ...`.

顺便说一句，使用 Rails 3.2.9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T07:07:14.377

```
try this

<div id="content-form">
<%= form_for @passion, url: passion_path do |f| %>
<%= render :partial => "form", :locals=>{:f => f } %>
<% end %>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T06:47:54.217

您正在使用该`:partial`选项，这意味着您必须通过以下方式传递局部变量`:locals`：

```
<%= render :partial => "form", :locals => { :f => f } %> 
```

不太冗长的选项是：

```
<%= render "form", :f => f %> 
```

# android - Android Polaris 像 Coverflow 或 Carousel

> ID：13697344
> 
> 赞同：1
> 
> 时间：2012-12-04T06:34:33.427
> 
> 标签：android, carousel, coverflow

我想创建一个像 android polaris office 最近的文档一样的封面流或轮播……有什么想法吗？

# c++ - 指向二维数组的指针

> ID：13697354
> 
> 赞同：2
> 
> 时间：2012-12-04T06:36:00.610
> 
> 标签：c++, typedef, multidimensional-array

假设我有一个二维数组 int m[3][4] 如果 typedef 定义为

```
typedef int array[4];
array *ptr = m; 
```

这是什么意思？它是指向 4 个元素的数组的指针吗？还是4个指针的数组？

当我们`cout << ptr or cout << *ptr`，它打印相同的地址。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:49:40.173

ptr 是指向四个 int 类型元素的数组的指针。m 是一个由 3 个类型元素组成的数组（由四个 int 类型元素组成的数组）。给你一张图片 - m 是一个由 3 个数组类型元素组成的数组。这就是 ptr 初始化为 m 的原因 - 没有问题，因为作为数组的“m”被隐式转换为指向该数组中第一个元素的指针。

ptr 是指向元素数组的指针。所以该指针被打印出来。当使用 *ptr 时——你得到一个数组，它再次隐式转换为指向数组第一个元素的指针，这又是相同的起点——所以你得到相同的值。

由于一切都从同一点开始，您将获得相同的价值。当一个人在指针上做 ++ 时，事情就会开始区分。我会把它留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:58:46.030

查看[顺时针/螺旋规则](http://c-faq.com/decl/spiral.anderson.html)。读完这篇文章后，您可以将声明视为指向 type-alias`array`的指针，换句话说，是指向四个整数数组的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:36:05.170

根据“顺时针/螺旋规则” ptr 是指向 4 int 数组的指针。

# .net - 使用自己的“网络浏览器”编写应用程序

> ID：13697355
> 
> 赞同：1
> 
> 时间：2012-12-04T06:36:00.983
> 
> 标签：.net, winforms, html, web-applications, browser

这是我自己尝试编写的第一个“真正的”程序。到目前为止，所有的事情大部分都与家庭作业有关。所以我不一定是最有经验的，但我是一个渴望学习的人:)

我想编写一个位于其他网站之上的应用程序。它的主要用途是对研究进行分类和存储。基本上把它想象成一个非常先进的书签应用程序。

如果我能让它与许多不同的操作系统兼容，那就太好了。我喜欢 Web 应用程序的想法，但我得到的印象是，我想要的一些功能远远超出了 HTML 5 和 JavaScript 现在（如果有的话）所能提供的功能。

我想要内置现代浏览器的一些功能，例如完整的选项卡支持和智能 URL 栏（例如自动搜索）。如果我正在构建一个 Windows 程序，那么最好的方法是什么？我应该尝试破解 FireFox 或 Chromium 吗？还是使用 WebBrowser 表单可能是我最好的选择？

此外，我有什么办法可以做到这一点，从而将其移植到 OSX 以及可能的 iOS 和 Android 上是可行的？

# amazon-ec2 - Amazon EC2 现场警报

> ID：13697356
> 
> 赞同：1
> 
> 时间：2012-12-04T06:36:05.540
> 
> 标签：amazon-ec2, alert

我使用 1 个 Spot 实例，并希望在我的实例大小和区域的价格高于阈值时收到电子邮件。然后，如果需要，我可以采取适当的措施并关闭并将实例移动到另一个区域。关于如何提醒价格的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:59:03.413

有两种方法可以解决这个问题，我能想到：

**1) 由于您只有一个实例，您可以在某个区域为您的实例设置 CloudWatch 警报，当现货价格上涨到您愿意支付的每小时价格以上时，该警报会通知您。**

如果您创建一个警报，并告诉它使用 AmazonEC2 服务的 EstimatedCharges 指标，并选择一个小时的时间段，那么您基本上是在告诉 CloudWatch 每当您的实例在该区域的每小时现货价格时向您发送一封电子邮件运行超过你想要支付的门槛。

收到电子邮件后，您可以关闭该实例并在另一个区域启动一个实例，并让它运行并发出自己的警报。

* * *

**2) 您可以使用客户端程序自动执行整个过程，该程序会针对您所需区域的实例大小轮询现货价格的变化。**

这样做的好处是，您可以更进一步，使用相同的程序在价格上涨时触发实例关闭，并在不同区域启动另一个实例。

亚马逊最近发布了一个示例程序，用于按地区和实例类型检测现货价格的变化：[如何使用 Spot-Notifications 示例应用程序跟踪 Spot 实例活动](http://aws.amazon.com/code/7808666890647151)。

只需将其与[ec2 命令行工具](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-StopInstances.html)结合起来即可停止和启动实例，您无需自己手动操作。

# jquery - 可以让编辑识别链接

> ID：13697359
> 
> 赞同：0
> 
> 时间：2012-12-04T06:36:33.840
> 
> 标签：jquery, asp.net, .net, ckeditor, freetextbox

我正在构建一个具有编辑器（html 编辑器）freetextbox 或 ckeditor 的系统，无论

我的问题 ！

是否可以让编辑器在将链接粘贴到编辑器后识别链接？例如：如果我复制并粘贴以下链接
[http://www.youtube.com/watch?v=uI40vztICwM&feature=g-logo](http://www.youtube.com/watch?v=uI40vztICwM&feature=g-logo)

然后编辑器将播放 youtube 视频

如果不 ！请问在编辑器中粘贴任何内容后，我可以在 javascript 中处理任何事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:40:07.830

在 CKEditor 你有`paste`编辑器实例的事件。它比原生更可靠，`paste`因为并非每个浏览器都以相同的方式触发它（Opera 根本不是这样）。此外，CKEditor 的粘贴事件很酷的一点是，您可以修改已粘贴的数据，然后再将它们插入到文档中的选择中。

这是此事件的文档：[http ://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-paste](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-paste)

**注意**： CKEditor 的新版本已于一周前发布，此事件已被修改，因此请确保您使用的是 CKEditor 4。

示例用法（您可以从例如`CKEDITOR.instances`对象获取编辑器实例，或者如果您正在使用`CKEDITOR.replace()/append()`，则这些方法返回编辑器实例）：

```
editor.on( 'paste', function( evt ) {
   var data = evt.data;
   data.dataValue = data.dataValue.replace(
       /(http:\/\/[^\s]+)/gi, '<a href="$1">$1</a>' );
   // Text could be pasted, but you transformed it into HTML so update that.
   data.type = 'html';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:47:56.733

请在代码下方：

```
<script>

    CKEDITOR.on('instanceReady', function(e){
     var editor = e.editor;
     editor.on('paste', function(evnt){

     var data = evnt.data;

      // youtube recognize 
       data.dataValue = data.dataValue.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g, '<iframe width="420" height="345" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>');

      //image recognize

         data.dataValue = data.dataValue.replace(/(https?:\/\/.*\.(?:png|jpg))/i,'<img src="$1" width="450" height="199" alt="alt description" title="image title" class="image_classes" />');

       alert(data);
       data.type = 'html';

     });
     });

        </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T12:08:10.870

No need to scratch head anymore. There is already a plugin called `autolink` available for this for `ckeditor`. Please follow below link

[autolink](http://ckeditor.com/addon/autolink)

# sql - Zend_Db_Select 与 SQL Server 的“FOR XML PATH”

> ID：13697360
> 
> 赞同：0
> 
> 时间：2012-12-04T06:36:33.860
> 
> 标签：sql, sql-server, zend-framework, zend-db

我正在尝试使用 Zend_Db_Select 编写以下查询：

```
SELECT p1.SKU,
(
 SELECT ',' + Status
 FROM "Products" "p2"
 WHERE p2.SKU = p1.SKU
 ORDER BY "Status"
 FOR XML PATH ('')
)  AS "Statuses"
FROM "Products" p1
GROUP BY SKU 
```

这是我到目前为止所拥有的：

```
$s1 = $products->select()
               ->setIntegrityCheck(false)
               ->from(array('p2' => 'Products'),
                      new Zend_Db_Expr("',' + Status")
                 )
               ->where('p2.SKU = p1.SKU')
               ->order('Status');

$s2 = $products->select()
               ->from(array('p1' => 'Products'),
                      array('p1.SKU',
                            'Statuses' => new Zend_Db_Expr('(' . $s1 . ')')
                      )
                 )
               ->group('SKU');

echo $s2;
$dbRowSet = $Products->fetchAll($s2); 
```

这给了我这个：

```
SELECT "p1"."SKU",
(
 SELECT ',' + Status
 FROM "Products" AS "p2"
 WHERE (p2.SKU = p1.SKU)
 ORDER BY "Status" ASC
) AS "Statuses"
FROM "Products" AS "p1"
GROUP BY "SKU" 
```

我不知道如何获得所需的`FOR XML PATH ('')`.

此外，不使用`.`带有`$s1`调用的运算符`__toString()`，而不是将其保留为本机 Zend_Db_Select 对象。有没有其他方法可以得到parens `$s1`？

或者，是否有另一种方法来完成整个查询？我想返回每个 SKU 和所有状态的串联分组（`GROUP_CONCAT()`在 MySQL 中）。该表很大，因此在 PHP 中迭代它们需要非常长的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:13:10.123

不幸的是，Zend Framework 对构建 MS SQL 特定查询没有很好的支持。您可以做的是完全使用`Zend_Db_Adapter_Abstract::query()`并跳过面向对象的查询抽象。或者，您可以扩展`Zend_Db_Select`，将适当的代码添加到`Zend_Db_Select::$_parts`and `Zend_Db_Select::_render*`，但是您仍然会得到不完整的支持。

我不太明白您在第二个代码示例中到底在做什么，因为`$2`根本没有分配变量。

用于字符串构造`__toString()`时不用担心被调用；`.`无论哪种方式，表达式最终都会进行字符串转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:03:32.790

看起来我很接近，并且考虑到 KSiimson 关于字符串转换的评论，这很有效：

```
$s1 = $products->select()
               ->setIntegrityCheck(false)
               ->from(array('p2' => 'Products'),
                      new Zend_Db_Expr("',' + Status")
                 )
               ->where('p2.SKU = p1.SKU')
               ->order('Status');

$s2 = $products->select()
               ->from(array('p1' => 'Products'),
                      array('p1.SKU',
                            'Statuses' => new Zend_Db_Expr('(' . $s1 .
                                " FOR XML PATH(''))")
                      )
                 )
               ->group('SKU');

echo $s2;
$dbRowSet = $Products->fetchAll($s2); 
```

这只是将 FOR XML PATH 子句与第一个查询作为字符串连接起来。没有我希望的那么优雅，但“完美是善的敌人”。

# java - 自动完成 JCombobox

> ID：13697366
> 
> 赞同：1
> 
> 时间：2012-12-04T06:37:05.150
> 
> 标签：java, jcombobox

如何让*JCombobox 自动完成*，它应该建议**在字符串中的任何位置**输入单词或短语的项目，而不仅仅是以该字符串开头。我正在使用**eclipse juno IDE**，解决方案应该**支持 JDK 1.5**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:57:58.287

您可以实现自己的 KeySelectionManager ，当键入任何键时都会调用它。默认行为是选择以给定字符开头的条目，但您可以修改它以从 jcombo 框中的文本字段组件中获取当前文本，然后选择匹配的条目。

您将需要详细查看以下方法：

```
javax.swing.JComboBox.setKeySelectionManager(KeySelectionManager) 
```

# stored-procedures - 在 SQL Server 2008 R2 的 MERGE 语句中更新插入的记录

> ID：13697368
> 
> 赞同：0
> 
> 时间：2012-12-04T06:37:11.640
> 
> 标签：stored-procedures, sql-server-2008-r2, merge-statement

我的 SQL Server 2008 R2 存储过程中有以下代码。在该存储过程中，我将一个城市及其家人和人员复制到另一个城市。

在这里，我将家庭的源和目标 id 维护在`@FamilyIdMap`.

*左栏表示代码行号。*

```
-- Copy Person
1>      DECLARE @PersonIdMap table (TargetId int, SourceId int)
2>      MERGE Person as PersonTargetTable
3>      USING (SELECT PersonID, FamilyID, PersonName, ParentID FROM Person
4>      WHERE FamilyID in (SELECT FamilyID from Family where FamilyName like '%DA%'))
5>      AS PersonSourceTable ON (0=1)
6>      WHEN NOT MATCHED THEN
7>      INSERT(FamilyID, PersonName, ParentID)
8>      VALUES
9>      ((SELECT TOP 1 TargetID from @FamilyIdMap WHERE SourceID=FamilyID),PersonName, 
10>     ParentID) OUTPUT
11>     INSERTED.PersonID, PersonSourceTable.PersonID
12>     INTO @PersonIdMap; 
```

它给出这样的输出：

**源表**

```
PersonID    FamilyID    PersonName  ParentID
1           1           ABC         Null
2           1           Son of ABC  1
3           1           Son of ABC  1
4           2           XYZ         NULL
5           2           Son of XYZ  4 
```

**目标表（使用上面给出的代码从源表复制）**

```
PersonID    FamilyID    PersonName  ParentID
6           1           ABC         Null
7           1           Son of ABC  1 <-- ParentID Remains as it is
8           1           Son of ABC  1 <--
9           2           XYZ         NULL
10          2           Son of XYZ  4 <-- 
```

上面输出中的问题是它没有更新`parentID`，我希望输出是这样的：

**预期目标表**

```
PersonID    FamilyID    PersonName  ParentID
6           1           ABC         Null
7           1           Son of ABC  6 <-- ParentID should be updated
8           1           Son of ABC  6 <--
9           2           XYZ         NULL
10          2           Son of XYZ  9 <-- 
```

我知道问题出在代码的第 10 行

```
10>     ParentID) OUTPUT 
```

但是我应该用什么`ParentID`来更新它？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:30:26.320

您尝试执行的操作在 SQL Server 2008R2 中无法一步完成。更新 ParentId 必须是第二步，因为您无法访问插入另一行结果的一行中的 OUTPUT 值。但是，您已经在为第二步收集信息。因此，您只需要添加一个简单的更新。

```
IF OBJECT_ID('dbo.Person') IS NOT NULL DROP TABLE dbo.Person;
IF OBJECT_ID('dbo.Family') IS NOT NULL DROP TABLE dbo.Family;

CREATE TABLE dbo.Family(FamilyID INT IDENTITY(1,1) PRIMARY KEY CLUSTERED, FamilyName NVARCHAR(60));
CREATE TABLE dbo.Person(PersonID INT IDENTITY(1,1) PRIMARY KEY CLUSTERED, FamilyID INT REFERENCES dbo.Family(FamilyID), PersonName NVARCHAR(60), ParentID INT);
INSERT INTO dbo.Family(FamilyName) VALUES
('DA1'),
('DA2');

INSERT INTO dbo.Person(FamilyID, PersonName, ParentID) VALUES
(1, 'ABC', NULL),
(1, 'Son of ABC', 1),
(1, 'Son of ABC', 1),
(2, 'XYZ', NULL),
(2, 'Son of XYZ', 4 );

DECLARE @FamilyIdMap table (TargetId int, SourceId int)
MERGE dbo.Family tf
USING (SELECT * FROM dbo.Family WHERE FamilyName like '%DA%') AS sf
ON 1=0
WHEN NOT MATCHED THEN
INSERT (FamilyName)
VALUES(sf.FamilyName)
OUTPUT INSERTED.FamilyID, sf.FamilyID
INTO @FamilyIdMap;

DECLARE @PersonIdMap table (TargetId int, SourceId int)

MERGE dbo.Person as tp
USING (SELECT p.PersonID, p.FamilyID, p.PersonName, p.ParentID, fm.SourceId,fm.TargetId FROM Person AS p
INNER JOIN @FamilyIdMap AS fm 
ON p.FamilyID = fm.SourceId) AS sp
ON (0=1)
WHEN NOT MATCHED THEN
INSERT(FamilyID, PersonName, ParentID)
VALUES
(sp.TargetId,PersonName, ParentID) OUTPUT
INSERTED.PersonID, sp.PersonID
INTO @PersonIdMap;

UPDATE p SET
  ParentID = pm.TargetId
FROM dbo.Person AS p
JOIN @PersonIdMap pm
ON pm.SourceId = p.ParentID
WHERE EXISTS(SELECT 1 FROM @PersonIdMap pmf WHERE pmf.TargetId = p.PersonID);

SELECT * FROM dbo.Family;
SELECT * FROM @FamilyIdMap;
SELECT * FROM dbo.Person;
SELECT * FROM @PersonIdMap; 
```

我确实添加了代码来创建和填充@FamilyIdMap 表。我还稍微清理了你原来的 MERGE。它现在使用 @FamilyIdMap 表作为选择行的一种方式，而不是再次加入 dbo.Family 表。如果您只在一小部分系列上运行它，这应该会更快。如果您有很多家庭并且您将它们全部复制，那么再次针对 dbo.Family 表可能会更快。

最后的 UPDATE 仅更新 Person 表中的新行（所有新创建的 PersonId 都可以在 @PersonIdMap 表的 TargetId 列中找到），使用 @PersonIdMap 表中的信息将旧的 ParentId 值更改为新的 ParentId 值。

我没有包括事务管理，但至少 MERGE dbo.Person 和以下 UPDATE dbo.Person 应该在同一个事务中执行。

# spring - 我们可以取消部署不再需要的 Spring 容器托管 bean

> ID：13697375
> 
> 赞同：0
> 
> 时间：2012-12-04T06:37:58.827
> 
> 标签：spring

我从 Spring 容器中得到一个 bean 说

```
MyClass obj1 = Context.getBean("obj1"); 
```

使用 obj1 后，我确信我的应用程序的其余部分将不再需要它。

那么有没有办法让Spring容器销毁这个bean。至少向 Spring 容器提示不再需要它，并且我决定是否销毁它（类似于垃圾收集）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:35:36.553

使“obj1”成为原型范围的 bean。然后 Spring 将在您每次请求时创建它的一个新实例（确保您对此感到满意），然后它将不再管理该实例，因此当您完成它并释放所有引用时，它可以被垃圾收集。原型范围就像`new`，只给你 Spring 配置的 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:11:47.497

我认为您不可能告诉 Spring 容器销毁该 bean。如果您注意到 Spring 框架创建的大多数这些 bean`Singleton`都应该在每次将其注入代码时为您提供相同的 bean 实例。单例本质上应该在应用程序的整个生命周期中都存在，因此它不能被破坏。

# php - 使用 jquery 将数据发布到同一页面

> ID：13697378
> 
> 赞同：-1
> 
> 时间：2012-12-04T06:37:59.737
> 
> 标签：php, javascript, html, jquery-post

我有一个 phtml 文件。在文件中，我编写了一些 html，其中有一些输入和一个按钮。在javascript中，我正在验证输入，然后像这样使用jquery发布

```
url = document.URL;    
$.post(url, { name: "John", time: "2pm" } ); 
```

然后在同一页面中，我编写了一些 php 来获取这样的数据，

```
<?php
if(isset($_POST['name'])) {
    $name = $_POST["name"];
    $time = $_POST["time"];
}
?> 
```

我做得对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:55:21.950

这是一种向服务器发出 AJAX 请求并异步发送 POST 数据的方法，因此您可以看一下以下代码：

```
var url = document.location.href;

$.post(url,{name: "John", time: "2pm"},function(data){
  alert(data);
}); 
```

在服务器端：

```
<?php
if(isset($_POST['name'])) {
 if(!empty($_POST['name']))
 {
    $name = $_POST["name"];
 }
 else
 {
    $name = FALSE;
 } 
}

if(isset($_POST['time'])) {
 if(!empty($_POST['time']))
 {
    $time = $_POST["time"];
 }
 else
 {
    $time = FALSE;
 } 
}

if($name && $time)
{
  echo "SUCCESS";
}
else
{
   echo "FAILED";
}

?> 
```

因此，此代码基本上将数据发布到服务器上，并且如果两个字段都成功到达服务器，则数据也会在服务器上进行验证，那么您将收到一条警报，显示成功，否则失败。

您可以相应地测试此代码以查看输出。

# c# - 从未签名的程序集中限制使用程序集

> ID：13697390
> 
> 赞同：6
> 
> 时间：2012-12-04T06:38:50.420
> 
> 标签：c#, .net

我要求对程序集进行限制，以便只有使用给定密钥签名的程序集才能使用它。我没有经验，但我理解的是签名是为了帮助确定谁创建了程序集。因此，仅签署此程序集不足以确保所有调用程序集都已签署。可能反过来是正确的，即如果一个程序集被签名，它所依赖的所有程序集都应该被签名（也许通过相同的密钥）。满足要求的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:39:27.647

您可以使用[PublisherIdentityPermissionAttribute](http://msdn.microsoft.com/en-us/library/system.security.permissions.publisheridentitypermissionattribute.aspx)。

如果将 PublisherIdentityPermissionAttribute 应用于 MyClass 类，则只有由`mycert.cer`证书签名的程序集中的类才能使用您的类。你需要把`SecurityAction.Demand`

> 调用堆栈中的所有调用者都必须被授予当前权限对象指定的权限

使用喜欢

```
[PublisherIdentityPermission(SecurityAction.Demand, CertFile = "mycert.cer")]
public class MyClass 
```

您还可以在程序集级别使用它来保护整个程序集（但是，除非您在配置中设置，否则程序集级别的安全性自 .Net 4.0 起将不起作用`<NetFx40_LegacySecurityPolicy enabled="true"/>`）。

# javascript - FOR循环遍历数组

> ID：13697396
> 
> 赞同：1
> 
> 时间：2012-12-04T06:39:31.450
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我有一个数组，我想用 a 进行迭代`for loop`以避免过多的代码。我想采取以下措施：

```
var mySchool = document.getElementById(varID[0]);
google.maps.event.addDomListener(mySchool,'click', function() {
    filterMap(layer, tableId, map);                 
}); 
```

让它更像：

```
for(var i=0; i < varID.length; i++){
    var mySchool = document.getElementById(varID[i]);
    google.maps.event.addDomListener(mySchool,'click', function() {
        filterMap(layer, tableId, map);
    }); 
} 
```

我一直在做一些阅读，我怀疑它与 Javascript 闭包有关，但我一生都无法让它与我找到的各种代码示例一起工作。我希望有经验的人能发现我从这个 Javascript 新手身上遗漏的东西。

我的完整代码如下所示：

```
//There are more items in my array but i wanted to keep it short here   
var varID = [
    "adamRobertson",
    "blewett",
    "brentKennedy"
];

var tableId = '1yc4wo1kBGNJwpDm6e-eJY_KL1YhQWfftjhA38w8';

function initialize() {
    var map = new google.maps.Map(document.getElementById('map-canvas'), {
      center: new google.maps.LatLng(49.491052,-117.304484),
      zoom: 10,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var layer = new google.maps.FusionTablesLayer();
    filterMap(layer, tableId, map);

    //Trying to get this to work
    for(var i=0; i < varID.length; i++){
        var mySchool = document.getElementById(varID[i]);
            google.maps.event.addDomListener(mySchool,'click', function() {
                filterMap(layer, tableId, map);                 
        });
    }

    //Trying to avoid this 25 times     
    /*
    google.maps.event.addDomListener(document.getElementById(varID[0]),
        'click', function() {
            filterMap(layer, tableId, map);
    });
    */
}

// Filter the map based on checkbox selection.
function filterMap(layer, tableId, map) {
    var where = generateWhere();

    if (where) {
      if (!layer.getMap()) {
        layer.setMap(map);
      }
      layer.setOptions({
        query: {
          select: 'Location',
          from: tableId,
          where: where
        }
      });
    } else {
      layer.setMap(null);
    }
}

// Generate a where clause from the checkboxes. If no boxes
// are checked, return an empty string.
function generateWhere() {
    var filter = [];
    var schools = document.getElementsByName('school');
    for (var i = 0, school; school = schools[i]; i++) {
      if (school.checked) {
        var schoolName = school.value.replace(/'/g, '\\\'');
        filter.push("'" + schoolName + "'");
      }
    }
    var where = '';
    if (filter.length) {
      where = "School IN (" + filter.join(',') + ')';
    }
    return where;
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

HTML 基本上包含用于打开和关闭我的多边形的复选框的输入。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:31:49.727

我认为如果您将代码更改为以下内容会有所帮助：

```
var mySchool; var limit = varID.length;
for(var i=0; i < limit; i++){
    mySchool = document.getElementById(varID[i]);
    (function(){

        google.maps.event.addDomListener(mySchool,'click', function() {
            filterMap(layer, tableId, map);                 
        });

    }());
} 
```

我将 for limit 计算排除在循环之外，这样也可以节省一些速度。

我没有使用 maps api，所以你可能需要在闭包中添加一些参数。

```
var mySchool; var limit = varID.length;
for(var i=0; i < limit; i++){
    mySchool = document.getElementById(varID[i]);
    (function(s, l, t, m){

        google.maps.event.addDomListener(s,'click', function() {
            filterMap(l, t, m);                 
        });

    }(mySchool, layer, tableId, map));
} 
```

我不确定需要哪些参数，但您可能会弄清楚。

# wireshark - 在 Ubuntu 命令行上启动 wireshark 时出现“无法打开显示”错误

> ID：13697397
> 
> 赞同：11
> 
> 时间：2012-12-04T06:39:32.017
> 
> 标签：wireshark

我已经在 Ubuntu 上安装了 wireshark，当我运行它时：

```
/usr/bin/wireshark 
```

我收到一个错误：

```
(wireshark:27945): Gtk-WARNING **: cannot open display: 
```

我想在命令提示符下运行 wireshark。

我不想使用用户界面。我不确定它为什么抱怨显示器，我想在端口上运行它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T06:51:59.440

您可以尝试**tshark** - 这是一个“基于控制台的wireshark”，它是wireshark 项目的一部分。

您应该阅读阅读[man tshark](http://www.wireshark.org/docs/man-pages/tshark.html)。

例如在 80 端口上捕获 http 数据包运行：

```
tshark -f 'tcp port 80 and http' 
```

PS 示例已修复为使用捕获过滤器而不是显示过滤器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T06:48:02.953

在 Ubuntu 上，运行 wireshark 会抱怨显示：

```
el@apollo:~$ wireshark
(wireshark:20619): Gtk-WARNING **: cannot open display: 
```

设置 DISPLAY 环境变量：

```
export DISPLAY=:0.0
/usr/bin/wireshark 
```

然后它工作：

```
el@apollo:~$ wireshark -Y
wireshark: option requires an argument -- 'Y'

Usage: wireshark [options] ... [ <infile> ]

Capture interface:
  -i <interface>           name or idx of interface (def: first non-loopback)
  -f <capture filter>      packet filter in libpcap filter syntax
  -s <snaplen>             packet snapshot length (def: 65535)
  -p                       don't capture in promiscuous mode
  -k                       start capturing immediately (def: do nothing)
  -S                       update packet display when new packets are captured
  -l                       turn on automatic scrolling while -S is in use
  -I                       capture in monitor mode, if available
  -B <buffer size>         size of kernel buffer (def: 2MB)
  -y <link type>           link layer type (def: first appropriate)
  -D                       print list of interfaces and exit
  -L                       print list of link-layer types of iface and exit 
```

wireshark 是一个 X 应用程序，因此它需要知道将 X11 显示输出发送到哪里。

# ruby-on-rails - Rails 复合 WHERE 子句 - OR, not and

> ID：13697398
> 
> 赞同：1
> 
> 时间：2012-12-04T06:39:41.577
> 
> 标签：ruby-on-rails

我正在编写一个简单的搜索函数，它使用搜索参数检查记录的多个字段是否相似。当我只比较一个字段时它起作用：

```
 key = params[:searchform][:keyword]
  fkey = '%' + key + '%'
  @games = Game.where('title LIKE ?', fkey).all 
```

但我也想检查其他字段（例如“类别”和“规则”）是否相似，并返回与这些字段中的任何一个匹配的记录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:57:12.713

假设这些字段属于 Game 类，您应该执行以下操作：

```
rules = params[:searchform][:rules]
@games = Game.where('title LIKE ? and rules = ?', fkey, rules).all 
```

等等。

# java - 在Android中将Stream转换为String时出现OutOfMemoryError

> ID：13697399
> 
> 赞同：3
> 
> 时间：2012-12-04T06:39:45.227
> 
> 标签：java, android, out-of-memory, bufferedreader

正在从 Assets 文件夹加载 xml 文件。我得到 OutOfMemoryError。我使用的代码是

```
private String convertStreamToString(InputStream is) {  
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + NEW_LINE);
        }
        reader.close();

    } catch (IOException e) {
        //do nothing.
    } finally {
        try {
            reader.close();
        } catch (IOException e) {
            //do nothing.    
        }
    }
    reader=null;
    return sb.toString();
} 
```

有没有另一种方法来摆脱这个异常。如果您发布任何代码，它将更有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:50:43.933

使用字符串解析大型 Xml 不是一个好主意。您应该转向解析器的流式传输版本。Google Http Java Client 提出了这样一个库：[http ://code.google.com/p/google-http-java-client](http://code.google.com/p/google-http-java-client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:50:27.363

把线=空；在附加到某人之后的while循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T08:15:44.020

试试下面

您是否尝试过将流转换为字符串的内置方法？它是 Apache Commons 库 (org.apache.commons.io.IOUtils) 的一部分。

那么您的代码将是这一行：

**字符串总计 = IOUtils.toString(inputStream);**

它的文档可以在这里找到：[http ://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream%29](http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream%29)

Apache Commons IO 库可以从这里下载：[http ://commons.apache.org/io/download_io.cgi](http://commons.apache.org/io/download_io.cgi)

# c++ - C++ Connect 4 检查下一步错误

> ID：13697400
> 
> 赞同：0
> 
> 时间：2012-12-04T06:39:45.973
> 
> 标签：c++, algorithm, connect

我正在编写一个带有 minimax 的 Connect 4 游戏，但我的下一步检查功能有时会给我带来意想不到的结果。你能告诉我我的算法是否正确吗？

例如，如果我的电路板看起来像这样

```
0000000 
0000000
0000000
0000000
1000000
2002120 
```

对于玩家 2，它将返回第 0 列为真。

```
bool Board::check2(int player, int& bestMove)
{
    for (int i=0; i<WIDTH; i++)
    {
        if(addToColumn(i, player))
        {

            if (checkNext(2, i, player))
            {
                bestMove=i;
                removeFromColumn(i, player);
                return true;
            }
            removeFromColumn(i, player);
        }

    }
    return false;
}

    bool Board::checkNextVertical(int size, int column, int player1)
    {
        int counter=0;
        int player2;

        if (player1==1)
        {
            player2=2;
        }
        else
            player2=1;

        for (int i=0 ; i<DEPTH; i++)
        {
            if (arrBoard[column][i]==player1)
            {
                counter++;
            }

            if (arrBoard[column][i]==player2)
            {
                return false;
            }
            if (counter==size)
            {
                return true;
            }

        }
        return false;
    }

    bool Board::checkNextHorizontal(int size, int column, int player1)
    {
        int counter=0;
        int player2;

        if (player1==1)
        {
            player2=2;
        }
        else
            player2=1;

        for (int i=0 ; i<DEPTH; i++)
        {
            if (arrBoard[i][column]==player1)
            {

                for (int j = 0; j<WIDTH; j++)
                {
                    if (arrBoard[i][j]==player1)
                    {
                        counter++;
                    }

                    if (arrBoard[i][j]!=player1)
                    {
                        counter=0;
                    }
                    if (counter==size)
                    {
                        return true;
                    }

                }
            }
    }
        return false;

    }

    bool Board::checkNext(int size, int column, int player)
    {
        if (checkNextVertical(size, column, player))
        {
            //  printBoard();
            return true;
        }

        if (checkNextHorizontal(size, column, player))
        {
          //  printBoard();
            return true;
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:17:22.600

欢迎来到论坛。

您发布的代码存在一些问题：

您的`checkNextVertical`函数似乎试图进行水平检查，而您的`checkNextHorizontal`函数似乎试图同时进行水平和垂直检查。

如果您注意到您同时使用`arrBoard[column][i]`和`arrBoard[i][column]`。我相信你会同意其中只有一个是正确的。了解哪个是正确的很重要，否则您的代码最终将尝试访问数组中无效的位置，并且您将得到意外的行为，例如您的函数中的`j`循环当前正在执行此操作。`checkNextHorizontal`

它应该用作`array[y / depth / row][x / width / column]`- 或任何你会记得的东西。

就个人而言，这段代码似乎令人困惑：

```
 int player2;

    if (player1==1)
    {
        player2=2;
    }
    else
        player2=1; 
```

`player2=1`似乎试图将方形钉子推入圆孔中。您可以使用`int player`并将其设置为`1`或者`2`使其更易于阅读吗？

我完全同意 Joachim 的观点——如果你有这些问题，用一些数据填充数组总是一个好主意，然后使用调试器单步执行你的代码并检查正在访问的数据是否是你期望的数据访问。

或者，由于它是一个 connect4 游戏，我假设您在某些时候知道最后一步是在哪一列进行的，在这种情况下，您可以使用此函数来检查它是否是一个获胜的举动。你只需要告诉它最后一步是哪一列，以及获胜所需的“大小”。如果您确实使用它，我仍然建议您使用调试器单步执行它，以便您了解数组访问。注意：您的代码没有对角检查-所以也没有。如果您想这样做，则需要一些额外的逻辑：

```
bool winningMove(int column, int size)
{
  bool winnerWinnerChickenDinner = false;

  int player = 0;
  int row    = 0;

  // Who was the last player to go in this column
  // i.e. find the top non-zero entry
  for (int i = 0; i < DEPTH; i++)
  {
    if (arrBoard[i][column] != 0)
    {
      player = arrBoard[i][column];
      row = i;
      break;
    }
  }

  // If we found a player, check if it was a winning move
  if (player != 0)
  {
    int count = 0;

    // Loop twice, first horizontally, then vertically
    for (int i = 0; i < 2 && !winnerWinnerChickenDinner; i++)
    {
      bool horizontal = (i == 0);

      for (int j = 0; j < (horizontal ? WIDTH : DEPTH); j++)
      {
        // Check if we have 'size' consecutive entries by the same player
        // (When we check horizontally, use arrBoard[row][j]    to check the row)
        // (When we check vertically,   use arrBoard[j][column] to check the column)
        if (arrBoard[(horizontal ? row : j)][(horizontal ? j : column)] == player)
        {
          if (++count == size)
          {
            winnerWinnerChickenDinner = true;
            break;
          }
        }
        else
        {
          count = 0;
        }
      }
    }
  }

  return winnerWinnerChickenDinner;
} 
```

老游戏是最好的——Connect4很棒，祝你好运。

# javascript - 如何在javascript中验证一组选择项

> ID：13697401
> 
> 赞同：1
> 
> 时间：2012-12-04T06:39:48.737
> 
> 标签：javascript, html

一列大约有6-7`<select>`个项目。`<table>`为了按下`Submit`按钮，条件是所有`<select>`项目都应该被选中。那么如何使用 Javascript 来做到这一点..？

示例代码似乎是这样的：

```
 <table>
 <tr>
    <td><select name="name1" style="width: 90px; height: 20px"> 
                            <option value = "--" >--</option>
                <option value = "10" >10</option>
         </select>
     </td>
    </tr>
<tr>
    <td><select name="name2" style="width: 90px; height: 20px">
                            <option value = "--" >--</option> 
                <option value = "20" >20</option>
                </select>
     </td>
    </tr>
<tr>
    <td><select name="name3" style="width: 90px; height: 20px"> 
                            <option value = "--" >--</option>
                <option value = "30" >30</option>
                </select>
    </td>
    </tr>
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:22:52.677

```
<table id="mytable">
  <tr>
    <td>
      <select name="name1" style="width: 90px; height: 20px">
        <option value = "--" >--</option>
        <option value = "10" >10</option>
      </select>
    </td>
  </tr>
  <tr>
    <td>
      <select name="name2" style="width: 90px; height: 20px">
        <option value = "--" >--</option>
        <option value = "20" >20</option>
     </select>
    </td>
  </tr>
  <tr>
    <td>
      <select name="name3" style="width: 90px; height: 20px">
        <option value = "--" >--</option>
        <option value = "30" >30</option>
      </select>
    </td>
  </tr>
</table>

<form action="" method="post" onsubmit="if(!check()) return false;">
  <input type="submit" />
</form>

<script type="text/javascript">
function check() {
  elements=document.getElementById("mytable").getElementsByTagName("select");
  for(i=0;i<elements.length;i++){
    if(elements[i].value == "--") { return false; }
  }
  return true;
}
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T07:06:41.830

```
 var arr=new Array();
   status=true;
   function fnc()
   {
       elements=document.getElementById("atable").getElementsByTagName("option");
       for(i=0;i<elements.length;i++)
       {
           arr=elements[i].value;
           if(Number(arr)=='NaN')
            {
                status=false;
                break;
            }

           console.log(Number(arr));
    }
    if(status==true)
    document.getElementById("formname").submit();
    } 
```

你也给你的桌子一个ID

```
<table id="atable"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T07:00:44.103

一种选择是使用[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation)，然后将“必需”添加到所有选择字段。

```
<form id="my_form">
    <select name="select1" class="required"> ... </select>
    <select name="select2" class="required"> ... </select>
    <select name="select3" class="required"> ... </select>
    ....
</form> 
```

然后javascript就像-

```
$('#my_form').validate(); 
```

使用该插件所需要做的就是在页面头中包含 jQuery 和 jQuery 验证脚本

```
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
    ....
</head> 
```

更新

显然，您的要求非常简单，为这个用例添加一个完整的 js 库到您的站点肯定是过分的。如果这是您要进行的唯一验证，我建议您使用纯 js 解决方案（例如 polin 的答案）。但是，如果您可能对您的站点有进一步的验证要求，那么 jQuery 验证插件非常强大。

# python - AppEngine urlopen 连接中止 [Errno 10053]

> ID：13697404
> 
> 赞同：0
> 
> 时间：2012-12-04T06:39:52.310
> 
> 标签：python, google-app-engine, http-post, urllib2, urllib

我正在尝试在 App Engine 上的两个页面之间进行简单的 http 请求/响应通信。这是代码：

```
class MainHandler(webapp.RequestHandler):
    def get(self):
       values = {'id' : '9',
           'number' : '10001',
           'age' : '15828',
           'name' : 'Squeak' }
       data = urllib.urlencode(values)
       request = urllib2.Request("http://localhost:8082/post", data)
       response = urllib2.urlopen(request)
       content = response.read()
       self.response.out.write(content)

class PostHandler(webapp.RequestHandler):
    def post(self):
       self.response.out.write(str(self.request.get('id')) + '<br>'  + str(self.request.get('number')) + '<br>' + str(self.request.get('age')) + '<br>' + self.request.get('name')) 
```

我将这些处理程序分配给'/'和'/post'，发生的情况是我得到一个等待HTTP响应的DeadLineExceedError，我猜它被阻止是因为“建立的连接被主机中的软件中止”[错误号 10053]。我尝试禁用防火墙/防病毒软件，但仍然无法正常工作。显然我是 App Engine 的新手，但这些东西应该很简单。为什么会这样？我已经为此苦苦挣扎了一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:43:30.907

一开始您无法为应用引擎选择要使用（提供数据）的端口，因此请忘记尝试。

你有没有在部署的服务器上试过这个？正如评论所指出的，本地和部署的行为可能非常不同，尤其是在有多个请求的情况下。

应用引擎上的页面无法相互通信，每次请求完成时都会忘记一切。

因此，您的代码可能发生的情况是：

你提出一个帖子请求。无法处理该发布请求，因为您仍在处理原始获取。所以帖子会排队，直到获取完成。获取永远不会完成，因为它正在等待帖子完成。

或者类似的东西。

如果您解释了您试图使用此代码实现的目标并将其作为一个单独的问题重新提出，这可能会更好。因为没有真正的方法可以“修复”这个问题。

# spring - 如何设置 Web 应用程序的有效性？

> ID：13697405
> 
> 赞同：0
> 
> 时间：2012-12-04T06:39:51.970
> 
> 标签：spring, hibernate, jakarta-ee, web-applications, licensing

我使用 Spring、Hibernate 在 Java EE 中开发了我的 Web 应用程序。在某些情况下，我必须将客户端源代码与数据库一起移交，但条件是他只能在 1 年的时间内运行应用程序，但问题是客户端有代码，但显然他可以修改并使其工作。！！那么是否有任何加密/解密或代码混淆或其他方式的范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:07:08.867

不。你可以让你的客户更难，但如果他有（甚至是混淆和/或加密的）代码*并且*必须有可能运行它，你就不走运了，因为后者将需要 JVM 必须在某种意义上具有“明文”。

通常，密码与明文一起存在的*任何设置都容易受到某种形式的攻击，无论是差分加密还是其他......*

您应该专注于为您的客户提供价值，然后他将不可避免地回来获得更多业务。

# imagemagick-convert - 如何使用 Imagemagick 将 svg 转换为 eps？

> ID：13697406
> 
> 赞同：7
> 
> 时间：2012-12-04T06:39:55.227
> 
> 标签：imagemagick-convert

我正在尝试使用 Imagemagick 将 svg 图像转换为 eps。我可以使用 Imagemagick 转换图像，但是与原始图像大小相比，图像大小太高，并且与 svg 相比，内容显示不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-17T19:57:20.490

我也只是想知道这个。但是，看起来 Imagemagick 可能不是执行此操作的最佳工具。

Imagemagick 是“光栅图像处理器”，但 SVG 和 EPS 是矢量格式。因此，使用 Imagemagick 会导致这些图像丢失信息，因为它必须从矢量格式转换为光栅格式，然后再转换回矢量。这可能解释了为什么您的图像内容没有正确显示。

也许考虑使用 Inkscape 使用以下方法进行此转换

```
# Works as of Version 0.92.4
inkscape ing.svg \
    -E out.eps \
    --export-ignore-filters \
    --export-ps-level=3 
```

其中`-E`标志是`--export-eps`导出 EPS 文件的缩写。

资源：

*   [http://imagemagick.org/Usage/formats/#vector](http://imagemagick.org/Usage/formats/#vector)
*   [https://stackoverflow.com/a/30539923/6873133](https://stackoverflow.com/a/30539923/6873133)

# java - 以特定格式格式化日期

> ID：13697407
> 
> 赞同：0
> 
> 时间：2012-12-04T06:39:56.567
> 
> 标签：java, android, parsing, date, formatting

我已经解析了一个 RSS 提要，我正在寻找如何正确格式化日期。我试图让它说出类似 2012 年 12 月 4 日星期三的内容。我正在通过 for 循环运行它以生成我的数据。这是我正在使用的代码：

```
Feed = new URL(URLFeed);
DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();
db = dbf.newDocumentBuilder();
doc = db.parse(new InputSource(Feed.openStream()));
doc.getDocumentElement().normalize();
nodeList = doc.getElementsByTagName("item");

title = new String[nodeList.getLength()];
pubDate = new String[nodeList.getLength()];
link = new String[nodeList.getLength()];

for(int i=0;i<nodeList.getLength();i++){
    Node node = nodeList.item(i);

    Element fstElmnt = (Element) node;

    NodeList titleList = fstElmnt.getElementsByTagName("title");
    Element titleElement = (Element) titleList.item(0);
    titleList = titleElement.getChildNodes();
    title[i] = ((Node) titleList.item(0)).getNodeValue();

    NodeList pubDateList = fstElmnt.getElementsByTagName("pubDate");
    Element pubDateElement = (Element) pubDateList.item(0);
    pubDateList = pubDateElement.getChildNodes();
    pubDate[i] = ((Node) pubDateList.item(0)).getNodeValue();

    NodeList linkList = fstElmnt.getElementsByTagName("link");
    Element linkElement = (Element) linkList.item(0);
    linkList = linkElement.getChildNodes();
    link[i] = ((Node) linkList.item(0)).getNodeValue();

} 
```

这是它返回的内容：

![Android 日期问题](../Images/2679e5ebd5aca800b93b567c27e7ecd9.png)

如何正确格式化我的日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T06:48:51.583

目前，您只是从 XML 节点中获取数据作为字符串。您需要以输入格式*解析*该字符串，然后将其*格式化*为您想要的格式。这两者都可以使用`SimpleDateFormat`.

您需要确定要用于输出的时区 - 输入已经具有“与 UTC 的偏移量”，因此您无需担心这一点。

接下来，您需要确定如何处理国际化。大概你想在用户的语言环境中显示信息？如果是这样，您可能希望使用[`DateFormat.getDateInstance()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#getDateInstance%28int,%20java.util.Locale%29)而不是`SimpleDateFormat`. *不过*不要忘记使用`Locale.US`输入格式，因为它*不*依赖于用户。

 **因此，作为一个完整的示例，您可能想要：

```
SimpleDateFormat inputFormat = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z",
                                                    Locale.US);
DateFormat outputFormat = DateFormat.getDateInstance(DateFormat.LONG,
                                                     userLocale);
// TODO: Set time zone in outputFormat

Date date = inputFormat.parse(inputText);
String outputText = outputFormat.format(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:03:14.393

我希望您听说过[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)来格式化日期，现在您从提要中获取日期为**E, dd MMM yyyy HH:mm:ss Z**所以必须将其格式化为**EEE, MMMM d, yyyy**。要做到这一点，请尝试以下..

```
SimpleDateFormat fromFormat = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z", Locale.US);
SimpleDateFormat toFormat = new SimpleDateFormat("EEE, MMMM d, yyyy", Locale.US);

try {
       Date fromDate = fromFormat.parse(pubDate[i]) //pubDate[i] is your date (node value)
       pubDate[i] = toFormat.format(fromDate);
    } catch (Exception e) {
                    e.printStackTrace();
                } 
```

您可以[在此处获取有关 DateFormat 的信息](http://developer.android.com/reference/android/text/format/DateFormat.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:50:16.587

在 java 中查看[Parse RSS pubDate to Date 对象](https://stackoverflow.com/questions/2705548/parse-rss-pubdate-to-date-object-in-java)

```
pubDate[i] = ((Node) pubDateList.item(0)).getNodeValue();
DateFormat formatter = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
Date date = formatter.parse(pubDate[i]);

... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:37:49.760

如果您正在寻找打印/解析工作日和月份名称的全名，则模式如下：-

```
Format formatter = new SimpleDateFormat("EEEE,MMMM,dd"); 
 String s = formatter.format(new Date());
 System.out.println(s); 
```**

# ios - phonegap IOS应用程序大小

> ID：13697409
> 
> 赞同：9
> 
> 时间：2012-12-04T06:40:04.493
> 
> 标签：ios, xcode, cordova

我使用 eclips 和 xcode4.5 为 android 和 IOS 创建了 phonegap 应用程序

Andorid 应用程序大小为 650KB

IOS应用的大小是9MB！！！

我创建了空的 phonegap 应用程序（只是在终端上创建了）并得到了相同的大小

如何减小 IOS 应用程序大小？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T10:25:52.640

标准的 iOS 应用程序包括大量的艺术作品，例如 CDVCapture 插件。如果您不使用 Capture API（很可能），您可以通过删除`Capture.bundle`Resources 文件夹中的 并`CDVCapture`从`Cordova.plist`.

![捕获包](../Images/b8d4ab54ec9947b0300368ee4ac94bc7.png) ![rm CDVCapture 从插件](../Images/cffdf2fde198b31834ac66c4c5f4657f.png)

当然，大部分文件大小是由各种启动屏幕、图标以及您自己使用的艺术品引起的。有一种很好的方法可以最大限度地降低这些成本。获取[ImageOptim](http://imageoptim.com/)并将您的 Xcode 项目文件夹放在上面。这将显着减小图像的文件大小（不会降低质量）。最后一步：Xcode 重新压缩所有的艺术作品，因此它们又拥有更大的文件大小（愚蠢，对吗？）。转到`Build Settings`选项卡并`PNG`在搜索字段中键入。设置`Compress PNG files`为`NO`。 ![压缩PNG文件](../Images/742e211412a2aa20b53483f8b2d4b42d.png)

[进一步阅读 imageoptim 和 Xcode](http://imageoptim.com/xcode.html)

整个过程应该至少减少你的应用程序 50%，请报告你可以实现多少，谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:00:28.853

那将是视网膜闪屏图像。

10MB 是一个正常的应用程序大小，不用担心。

# java - 如何从列表菜单项中选择 selenium webdriver

> ID：13697410
> 
> 赞同：1
> 
> 时间：2012-12-04T06:40:04.077
> 
> 标签：java

当我单击箭头时，将出现下拉菜单。这些项目在 table->ul->li-->options 内。我尝试使用 xpath 和 id 但我无法选择项目

**这是我的java代码**

```
 Select droplist3 = new Select(driver.findElement(By.xpath("//*[@id='q1']")));   
        droplist3.selectByVisibleText("What is the name of your first  elementary/primary school? (3-20 characters)");

        driver.findElement(By.xpath("//*[@id='a1']")).sendKeys("abc");
        Select droplist4 = new Select(driver.findElement(By.xpath("//*[@id='newq2']")));   
        droplist4.selectByVisibleText("When is your mother's birthday? (format: YYYY-MM-DD");
        driver.findElement(By.xpath("//*[@id='a2']")).sendKeys("cde"); 
```

**这是html页面代码..**

```
 <input type="text" waistate="haspopup-true,autocomplete-list"                                                                        wairole="textbox"  dojoattachpoint="textbox,focusNode"                      dojoattachevent="onkeypress: _onKeyPress,compositionend" class="dijitReset" autocomplete="off" role="textbox" aria-haspopup="true" aria-autocomplete="list" id="q1" tabindex="0" aria-invalid="false" aria-required="true" value="select one" aria-owns="q1_popup">

                 <input type="hidden" name="q1" value="QD-46f03ce0-05616"> 
```

**这里选项代码...**

```
 <ul id="q1_popup" class="dijitReset dijitMenu xwtComboBoxPopup" style="top:      -9999px; overflow: hidden; width: 422px; height: 198px; visibility: hidden; position: absolute;" tabindex="-1"   dojoattachevent="onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut" widgetid="q1_popup">

           <li id="q1_popup_prev" class="dijitMenuItem dijitMenuPreviousButton" wairole="option"  dojoattachpoint="previousButton" role="option" style="display: none;">Previous choices</li>

          <li id="q1_popup0" class="dijitReset dijitMenuItem" role="option">select one</li>

           <li id="q1_popup1" class="dijitReset dijitMenuItem" role="option">What is the name of your first elementary/primary school? (3-20 characters)</li>

            <li id="q1_popup2" class="dijitReset dijitMenuItem" role="option">What is the name of your high school/secondary school? (3-20 characters)</li>

              <li id="q1_popup3" class="dijitReset dijitMenuItem" role="option">What was the name of your first pet? (3-20 characters)</li>

             <li id="q1_popup4" class="dijitReset dijitMenuItem" role="option">What is your dream car? (3-20 characters)</li>
             <li id="q1_popup5" class="dijitReset dijitMenuItem" role="option">What is your father's first name? (3-20 characters)</li>

             <li id="q1_popup6" class="dijitReset dijitMenuItem" role="option">What is the first vehicle you drove? (3-20 characters)</li>

         <li id="q1_popup7" class="dijitReset dijitMenuItem" role="option">What was your favorite toy as a child? (3-20 characters)</li>
         <li id="q1_popup8" class="dijitReset dijitMenuItem" role="option">What is your favorite food? (3-20 characters)</li>
         <li id="q1_popup9" class="dijitReset dijitMenuItem" role="option">When is your mother's birthday? (format: YYYY-MM-DD)</li>

         <li id="q1_popup10" class="dijitReset dijitMenuItem" role="option">When is your father's birthday? (format: YYYY-MM-DD)</li>

           <li id="q1_popup_next" class="dijitMenuItem dijitMenuNextButton" wairole="option" dojoattachpoint="nextButton" role="option" style="display: none;">More choices</li>

        </ul> 
```

# oracle - 显示列和返回列 LOV

> ID：13697411
> 
> 赞同：2
> 
> 时间：2012-12-04T06:40:07.807
> 
> 标签：oracle, oracle11g, oracle-apex

我在 Oracle APEX（Application Express）工作。当我想创建一个值列表 (LOV) 时，它只给了我一个显示和返回值的选项。APEX 中是否有任何方法可以显示多个列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:15:37.973

不，默认情况下无法显示超过 1 列。

*   您可以更改 lov 查询以将多个列值连接到显示列中

    ```
    select empno return_value, empno||': '||ename||' - '||job display_value
    from emp 
    ```

    如果您想使用固定宽度的字体，您也可以通过 Popup LOV 模板引导标记。

*   使用诸如[SkillBuilders SuperLov](http://skillbuilders.com/oracle-apex/Application-Express-APEX-Consulting-Training.cfm?tab=free-plugin-downloads)之类的插件。但是，此插件不适用于表格形式。
*   通过使用例如模式页面（同样，SkillBuilders 有一个[出色的模式页面插件](http://skillbuilders.com/oracle-apex/Application-Express-APEX-Consulting-Training.cfm?tab=free-plugin-downloads)）或通过使用 javascript（例如创建新窗口和处理返回）来滚动你自己

# javascript - 无法遍历 Backbone.js 中的集合

> ID：13697413
> 
> 赞同：0
> 
> 时间：2012-12-04T06:40:11.683
> 
> 标签：javascript, backbone.js, coffeescript

**更新**

这是一个愚蠢的错字。我是`Backbone.Model.extend`用来收藏的。*掌心*

* * *

试图遍历一个集合，但我认为我错误地填充了它或其他东西：

```
RecentContent = Backbone.View.extend
    initialize: ->
        @collection = new ContentAPI.ContentCollection()

        @collection.fetch
            success: (collection, response, options) =>
                console.log @collection
                # d {attributes: Object, _escapedAttributes: Object, cid: "c4", changed: Object, _silent: Object…}
                # property `attributes` contains Objects from server

                console.log @collection.models # undefined
                @render()

    #---------------------

    render: ->
        # ERROR: Object has no method 'each'
        @collection.each (model) ->
          console.log model 
```

我还注意到，如果我尝试将`reset`事件绑定到`@collection`（而不是从`success`回调中渲染），它似乎永远不会被触发。

集合很简单：

```
class ContentAPI
    @Content: Backbone.Model.extend {}

    @ContentCollection: Backbone.Model.extend
        url: "/api/content/"
        model: @Content 
```

我对 Backbone 有点陌生，所以谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:07:19.817

问题是您的集合继承自错误的基类。

```
@ContentCollection: Backbone.Model.extend 
```

应该

```
@ContentCollection: Backbone.Collection.extend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:09:14.690

我不是咖啡脚本专家，但我认为你的问题是

```
@ContentCollection: Backbone.Model.extend 
```

它应该是

```
@ContentCollection: Backbone.Collection.extend 
```

此外，在迭代您的集合模型时，请使用

```
_.each(collection.models, function(model) { console.log(model); }); 
```

# algorithm - Bellman-Ford 算法跟踪

> ID：13697414
> 
> 赞同：3
> 
> 时间：2012-12-04T06:40:12.140
> 
> 标签：algorithm, trace, directed-graph, edges, bellman-ford

我不知道在哪里发布这个问题，我只想知道我是否正确地进行了这个跟踪。我得到了这张图

![图表](../Images/b04ac8a78c07ca7ee49744483e31917a.png)

这是问题：

> 在以下有向图上显示 Bellman-Ford 算法的轨迹，使用顶点 t 作为源。在每一遍中，按照(x, t),(y, z),(u, t),(y, x),(u, y),(t, x),(t, y) 的顺序松弛边缘），（t，z），（z，x），（z，u）。每次通过后显示 d 值。图表是否有负权重的圆圈？您如何使用 Bellman-Ford 算法对其进行检查？

我得到的答案是 u=12, t=0, x=4, y=12, and z=-3，而且它没有负权重圆。这个问题值得很多分，一个错误意味着减去很多，所以我不知道还有谁必须为我检查这个。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:11:49.047

按照您指定的顺序放松 -
最初的 d 值是`<t = 0, u = inf, x = inf, y = inf, z = inf>`

```
(x, t) <0, inf, inf, inf, inf>  
(y, z) <0, inf, inf, inf, inf>   
(u, t) <0, inf, inf, inf, inf>   
(y, x) <0, inf, inf, inf, inf>   
(u, y) <0, inf, inf, inf, inf> <--Upto this no update because no relaxation started from non-inf  
(t, x) <0, inf, 7, inf, inf>   
(t, y) <0, inf, 7, 12, inf>   
(t, z) <0, inf, 7, 12, -3>   
(z, x) <0, inf, 4, 12, -3>   
(z, u) <0, 12, 4, 12, -3> 
```

第二次迭代

```
(x, t) <0, 12, 4, 12, -3>  
(y, z) <0, 12, 4, 12, -3>   
(u, t) <0, 12, 4, 12, -3>   
(y, x) <0, 12, 4, 12, -3>   
(u, y) <0, 12, 4, 12, -3>  
(t, x) <0, 12, 4, 12, -3>   
(t, y) <0, 12, 4, 12, -3>   
(t, z) <0, 12, 4, 12, -3>   
(z, x) <0, 12, 4, 12, -3>   
(z, u) <0, 12, 4, 12, -3> 
```

因为它在第二次迭代后没有改变，所以这是最终的答案，它与你的相匹配。由于整个迭代没有变化，因此也没有负权重循环。

注意 - 如果边的顺序不同，我们可能已经预料到第二次迭代会发生变化。

# javascript - 如何在 JavaScript 中创建一个新对象？

> ID：13697417
> 
> 赞同：6
> 
> 时间：2012-12-04T06:40:16.443
> 
> 标签：javascript

为什么这不起作用？

```
 var sheep = function(options){
        this.options = {sizes: 100,
                        eat: 100,
                 colors: 'white', 
                 running: function () {
                     return this.sizes + this.eat;
                 }
          }
    };

    var blacksheep = new sheep({colors:'black'});       

    alert('blackcsheep color is ' + blacksheep.colors);//error undefined
    alert('blackcsheep color is ' + blacksheep.options.colors);// it return white
    alert('blackcsheep running is ' + blacksheep.running());//error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:45:20.440

语法：

```
var sheep = {sizes:100, eat:100, colors:'white',running:function(){
        return this.sizes+this.eat;
        }
    }; 
```

是一个对象字面量。它定义了一个对象的实例，而不是定义它的类。因此，没有办法“新建”对象的另一个实例。

看看 jQuery 的`extend`功能：

```
var blacksheep = {
}

$.extend(blacksheep, sheep, { color: black }); 
```

这将复制`sheep`into的所有属性`blacksheep`，然后将第三个参数合并到`blacksheep`，有效地实现您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:44:41.517

要基于绵羊制作另一个害群之马，在这种情况下，您可以执行以下操作（使用 jQuery）：

```
var blacksheep = $.extend(sheep, { color: 'black' }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T06:44:51.553

你可以像这样创建一个绵羊对象。

```
 function Sheep(sizes,eat,colors){
    this.sizes = sizes;
    this.eat = eat;
    this.colors = colors;
    this.running = function (){
     return this.sizes+this.eat;
    }

    } 
```

或者你也可以这样写

```
 function Sheep(sizes,eat,colors){
    this.sizes = sizes;
    this.eat = eat;
    this.colors = colors;        
    }
 sheep.prototype.running = function(){
 return this.sizes + this.eat;    
} 
```

varsheep1 = new Sheep('100','100','white');

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T06:44:54.567

```
var sheep = function(){
    this.sizes = 100;
    this.eat = 100;
    this.colors = 'white';
    this.running = function(){
        return this.sizers + this.eat;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T06:58:29.583

在 JavaScript 中声明对象的方式与在强类型语言中声明的方式不同。您可以使用如下函数声明对象：

```
function sheep() {
    this.color = "white";
    this.size = 200;
    this.speed = 100;
    this.running = function () {
        return "the sheep is running!";
    };
}

var blacksheep = new sheep();

alert('sheep size is ' + blacksheep.size);
alert('sheep running is ' + blacksheep.running());​ 
```

* * *

您的新对象不起作用，因为您正在创建一个带有名为 的子对象的新对象`options`。`options`包含您的所有方法。因此，只有您给出的这三行中的第二行会给您正确的响应：

```
alert('blackcsheep color is ' + blacksheep.colors);
alert('blackcsheep color is ' + blacksheep.options.colors); // Only this one correctly references `options`.
alert('blackcsheep running is ' + blacksheep.running()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T07:16:05.343

在您的情况下，羊已经是一个对象，您无法创建对象的对象。您可以直接将该对象与属性一起使用。

但我认为你想要这样的东西

> 变羊 = {sizes:100, eat:100, colors:'white', running:function(){ return this.sizes+this.eat; } }; Object.defineProperty(sheep, 'colors', { value: 'black' , writable: true });

谢谢

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-04T06:48:03.547

Javascript 是基于原型的，而不是基于类的。它不使用类并且也是面向对象的。

```
var whitesheep =new sheep("100","100","white","running");
var blacksheep =new sheep("100","100","black","running"); 
```

# xml - 如何在“添加到购物车”之前调用或覆盖新的 XML？

> ID：13697418
> 
> 赞同：1
> 
> 时间：2012-12-04T06:40:21.093
> 
> 标签：xml, e-commerce, magento-1.7, magento

如何在 magento 中调用或覆盖 XML？我创建了一个模块并想在添加到购物车之前调用它的 XML。请解释一下我该怎么做？

对于“添加到购物车”，它使用 checkout.xml 和另一个 xml \app\design\frontend\base\default\layout\prescriptionform.xml

```
<?xml version="1.0"?>   
<layout version="0.1.0">   
<prescriptionform_index_index>   
<reference name="root">   
<action method="setTemplate"><template>page/1column.phtml</template></action>   
</reference>   
<reference name="content">   
<block type="prescriptionform/index" name="prescriptionform_index" template="prescriptionform/index.phtml"/>   
</reference>   
</prescriptionform_index_index>   
</layout> 
```

app\code\local\Louisoptical\Prescriptionform\etc\config.xml

```
<?xml version="1.0"?>
<config>
<modules>
<Louisoptical_Prescriptionform>
<version>0.1.0</version>
</Louisoptical_Prescriptionform>
</modules>
<frontend>
<routers>
<prescriptionform>
<use>standard</use>
<args>
<module>Louisoptical_Prescriptionform</module>
<frontName>prescriptionform</frontName>
</args>
</prescriptionform>
</routers>
<layout>
<updates>
<prescriptionform>
<file>prescriptionform.xml</file>
</prescriptionform>
</updates>
</layout>
</frontend>
<global>
<helpers>
<prescriptionform>
<class>Louisoptical_Prescriptionform_Helper</class>
</prescriptionform>
</helpers>
<blocks>
<prescriptionform>
<class>Louisoptical_Prescriptionform_Block</class>
</prescriptionform>
</blocks>
<models>
<prescriptionform>
<class>Louisoptical_Prescriptionform_Model</class>
<resourceModel>prescriptionform_mysql4</resourceModel>
</prescriptionform>
<prescriptionform_mysql4>
<class>Louisoptical_Prescriptionform_Model_Mysql4</class>
<entities>
<prescription>
<table>prescription</table>
</prescription>
</entities>
</prescriptionform_mysql4>
</models>
<resources>
<prescriptionform_setup>
<setup>
<module>Louisoptical_Prescriptionform</module>
</setup>
<connection>
<use>core_setup</use>
</connection>
</prescriptionform_setup>
<prescriptionform_write>
<connection>
<use>core_write</use>
</connection>
</prescriptionform_write>
<prescriptionform_read>
<connection>
<use>core_read</use>
</connection>
</prescriptionform_read>
</resources>
</global>
<admin>
<routers>
<prescriptionform>
<use>admin</use>
<args>
<module>Louisoptical_Prescriptionform</module>
<frontName>prescriptionform</frontName>
</args>
</prescriptionform>
</routers>
</admin>
<adminhtml>
<menu>
<prescriptionform module="prescriptionform">
<title>Prescriptionform</title>
<sort_order>100</sort_order>
<children>
<prescriptionformbackend module="prescriptionform">
<title>Prescription Form</title>
<sort_order>0</sort_order>
<action>prescriptionform/adminhtml_prescriptionformbackend</action>
</prescriptionformbackend>
<prescription module="prescriptionform">
<title>Manage Prescription</title>
<sort_order>0</sort_order>
<action>prescriptionform/adminhtml_prescription</action>
</prescription>
</children>
</prescriptionform>
</menu>
<acl>
<resources>
<all>
<title>Allow Everything</title>
</all>
<admin>
<children>
<prescriptionform translate="title" module="prescriptionform">
<title>Prescriptionform</title>
<sort_order>1000</sort_order>
<children>
<prescriptionformbackend translate="title">
<title>Prescription Form</title>
</prescriptionformbackend>
<prescription translate="title">
<title>Manage Prescription</title>
</prescription>
</children>
</prescriptionform>
</children>
</admin>
</resources>
</acl>
<layout>
<updates>
<prescriptionform>
<file>prescriptionform.xml</file>
</prescriptionform>
</updates>
</layout>
</adminhtml>
</config> 
```

app\design\frontend\base\default\layout\checkout.xml

```
<layout version="0.1.0">

<!--
Default layout, loads most of the pages
-->

<default>

<!-- Mage_Checkout -->
<reference name="top.links">
<block type="checkout/links" name="checkout_cart_link">
<action method="addCartLink"></action>
<action method="addCheckoutLink"></action>
</block>
</reference>
<reference name="right">
<block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml" before="-">
<action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
<block type="core/text_list" name="cart_sidebar.extra_actions" as="extra_actions" translate="label" module="checkout">
<label>Shopping Cart Sidebar Extra Actions</label>
</block>
</block>
</reference>
</default>

<checkout_cart_index translate="label">
<label>Shopping Cart</label>
<remove name="right"/>
<remove name="left"/>
<!-- Mage_Checkout -->
<reference name="root">
<action method="setTemplate"><template>page/1column.phtml</template></action>
</reference>

<reference name="content">
<block type="code/local/Louisoptical/Prescriptionform" before="cart_sidebar" name="prescriptionform" template="prescriptionform/index.phtml"/>
<block type="checkout/cart" name="checkout.cart">
<action method="setCartTemplate"><value>checkout/cart.phtml</value></action>
<action method="setEmptyTemplate"><value>checkout/cart/noItems.phtml</value></action>
<action method="chooseTemplate"/>
<action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/item/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/item/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/item/default.phtml</template></action>

<block type="core/text_list" name="checkout.cart.top_methods" as="top_methods" translate="label">
<label>Payment Methods Before Checkout Button</label>
<block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
</block>

<block type="page/html_wrapper" name="checkout.cart.form.before" as="form_before" translate="label">
<label>Shopping Cart Form Before</label>
</block>

<block type="core/text_list" name="checkout.cart.methods" as="methods" translate="label">
<label>Payment Methods After Checkout Button</label>
<block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
<block type="checkout/multishipping_link" name="checkout.cart.methods.multishipping" template="checkout/multishipping/link.phtml"/>
</block>

<block type="checkout/cart_coupon" name="checkout.cart.coupon" as="coupon" template="checkout/cart/coupon.phtml"/>
<block type="checkout/cart_shipping" name="checkout.cart.shipping" as="shipping" template="checkout/cart/shipping.phtml"/>
<block type="checkout/cart_crosssell" name="checkout.cart.crosssell" as="crosssell" template="checkout/cart/crosssell.phtml"/>

<block type="checkout/cart_totals" name="checkout.cart.totals" as="totals" template="checkout/cart/totals.phtml"/>
</block>
</reference>
<block type="core/text_list" name="additional.product.info" translate="label">
<label>Additional Product Info</label>
</block>
</checkout_cart_index>

<checkout_cart_configure translate="label">
<label>Configure Cart Item</label>
<update handle="catalog_product_view"/>
<reference name="product.info">
<block type="checkout/cart_item_configure" name="checkout.cart.item.configure.block"></block>
</reference>
</checkout_cart_configure>

<!--
Multi address shipping checkout main layout,
will be rendered on all checkout pages
-->

<checkout_multishipping translate="label">
<label>Multishipping Checkout</label>
<!-- Mage_Checkout -->
<remove name="right"/>
<remove name="left"/>

<reference name="root">
<action method="setTemplate"><template>page/1column.phtml</template></action>
</reference>
<reference name="content">
<block type="checkout/multishipping_state" name="checkout_state" template="checkout/multishipping/state.phtml"/>
</reference>
</checkout_multishipping>

<checkout_multishipping_login>
<update handle="customer_account_login"/>
</checkout_multishipping_login>

<checkout_multishipping_register>
<update handle="customer_account_create"/>
</checkout_multishipping_register>

<!--
Multi address shipping checkout selection of address per item page
-->

<checkout_multishipping_address_select translate="label">
<label>Multishipping Checkout Shipping Address Selection</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_address_select" name="checkout_address_select" template="checkout/multishipping/address/select.phtml"/>
</reference>
</checkout_multishipping_address_select>

<checkout_multishipping_address_selectbilling translate="label">
<label>Multishipping Checkout Billing Address Selection</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_address_select" name="checkout_address_select" template="checkout/multishipping/address/select.phtml"/>
</reference>
</checkout_multishipping_address_selectbilling>

<checkout_multishipping_address_newshipping translate="label">
<label>Multishipping Checkout Shipping Address Creation</label>
<update handle="checkout_multishipping"/>
<update handle="checkout_multishipping_customer_address"/>
</checkout_multishipping_address_newshipping>

<checkout_multishipping_address_newbilling translate="label">
<label>Multishipping Checkout Billing Address Creation</label>
<update handle="checkout_multishipping"/>
<update handle="checkout_multishipping_customer_address"/>
</checkout_multishipping_address_newbilling>

<checkout_multishipping_address_editshipping translate="label">
<label>Multishipping Checkout Shipping Address Edit Form</label>
<update handle="checkout_multishipping"/>
<update handle="checkout_multishipping_customer_address"/>
</checkout_multishipping_address_editshipping>

<checkout_multishipping_address_editaddress>
<update handle="checkout_multishipping"/>
<update handle="checkout_multishipping_customer_address"/>
</checkout_multishipping_address_editaddress>

<checkout_multishipping_address_editbilling translate="label">
<label>Multishipping Checkout Billing Address Edit Form</label>
<update handle="checkout_multishipping"/>
<update handle="checkout_multishipping_customer_address"/>
</checkout_multishipping_address_editbilling>

<checkout_multishipping_customer_address translate="label">
<label>Multishipping Checkout Customer Address Edit Form</label>
<reference name="content">
<block type="customer/address_edit" name="customer_address_edit" template="customer/address/edit.phtml"/>
</reference>
</checkout_multishipping_customer_address>

<!--
Multi address shipping checkout address page
-->

<checkout_multishipping_addresses translate="label">
<label>Multishipping Checkout Address (Any) Form</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_addresses" name="checkout_addresses" template="checkout/multishipping/addresses.phtml">
<action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
</block>
</reference>
</checkout_multishipping_addresses>

<!--
Multi address shipping checkout shipping information
-->

<checkout_multishipping_shipping translate="label">
<label>Multishipping Checkout Shipping Information Step</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_shipping" name="checkout_shipping" template="checkout/multishipping/shipping.phtml">
<action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>

<block type="checkout/multishipping_billing_items" name="checkout_billing_items" template="checkout/multishipping/billing/items.phtml">
<action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
</block>
</block>
</reference>
</checkout_multishipping_shipping>

<!--
Multi address shipping checkout billing information
-->

<checkout_multishipping_billing translate="label">
<label>Multishipping Checkout Billing Information Step</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_billing" name="checkout_billing" template="checkout/multishipping/billing.phtml">
<action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>

<!--<block type="checkout/multishipping_billing_items" name="checkout_billing_items" template="checkout/multishipping/billing/items.phtml">
<action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
</block>-->

</block>
</reference>
</checkout_multishipping_billing>

<!--
Multi address shipping checkout overview
-->

<checkout_multishipping_overview translate="label">
<label>Multishipping Checkout Overview</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_overview" name="checkout_overview" template="checkout/multishipping/overview.phtml">
<action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
<action method="addRowItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/overview/item.phtml</template></action>
<action method="addRowItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/overview/item.phtml</template></action>
<block type="checkout/multishipping_payment_info" name="payment_info">
<action method="setInfoTemplate"><method></method><template></template></action>
</block>
<block type="checkout/agreements" name="checkout.multishipping.agreements" as="agreements" template="checkout/multishipping/agreements.phtml"/>
<block type="checkout/cart_totals" name="totals" />
<block type="core/text_list" name="checkout.multishipping.overview.items.after" as="items_after" translate="label">
<label>Overview Items After</label>
</block>
</block>
</reference>
</checkout_multishipping_overview>

<!--
Multi address shipping checkout success
-->

<checkout_multishipping_success translate="label">
<label>Multishipping Checkout Success</label>
<update handle="checkout_multishipping"/>
<!-- Mage_Checkout -->
<reference name="content">
<block type="checkout/multishipping_success" name="checkout_success" template="checkout/multishipping/success.phtml"/>
</reference>
</checkout_multishipping_success>

<!--
One page checkout main layout
-->

<checkout_onepage_index translate="label">
<label>One Page Checkout</label>
<!-- Mage_Checkout -->
<remove name="left"/>

<reference name="root">
<action method="setTemplate"><template>page/2columns-right.phtml</template></action>
</reference>
<reference name="right">
<action method="unsetChildren"></action>
<block type="page/html_wrapper" name="checkout.progress.wrapper" translate="label">
<label>Checkout Progress Wrapper</label>
<action method="setElementId"><value>checkout-progress-wrapper</value></action>
<block type="checkout/onepage_progress" name="checkout.progress" before="-" template="checkout/onepage/progress.phtml"/>
</block>
</reference>
<reference name="content">
<block type="checkout/onepage" name="checkout.onepage" template="checkout/onepage.phtml">
<block type="checkout/onepage_login" name="checkout.onepage.login" as="login" template="checkout/onepage/login.phtml">
<block type="page/html_wrapper" name="checkout.onepage.login.before" as="login_before" translate="label">
<label>Login/Registration Before</label>
<action method="setMayBeInvisible"><value>1</value></action>
</block>
</block>
<block type="checkout/onepage_billing" name="checkout.onepage.billing" as="billing" template="checkout/onepage/billing.phtml"/>
<block type="checkout/onepage_shipping" name="checkout.onepage.shipping" as="shipping" template="checkout/onepage/shipping.phtml"/>
<block type="checkout/onepage_shipping_method" name="checkout.onepage.shipping_method" as="shipping_method" template="checkout/onepage/shipping_method.phtml">
<block type="checkout/onepage_shipping_method_available" name="checkout.onepage.shipping_method.available" as="available" template="checkout/onepage/shipping_method/available.phtml"/>
<block type="checkout/onepage_shipping_method_additional" name="checkout.onepage.shipping_method.additional" as="additional" template="checkout/onepage/shipping_method/additional.phtml"/>
</block>
<block type="checkout/onepage_payment" name="checkout.onepage.payment" as="payment" template="checkout/onepage/payment.phtml">
<block type="checkout/onepage_payment_methods" name="checkout.payment.methods" as="methods" template="checkout/onepage/payment/methods.phtml">
<action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>
</block>
</block>
<block type="checkout/onepage_review" name="checkout.onepage.review" as="review" template="checkout/onepage/review.phtml"/>
</block>
</reference>
</checkout_onepage_index>

<!--
One page checkout progress block
-->

<checkout_onepage_progress>
<!-- Mage_Checkout -->
<remove name="right"/>
<remove name="left"/>

<block type="checkout/onepage_progress" name="root" output="toHtml" template="checkout/onepage/progress.phtml">
<block type="checkout/onepage_payment_info" name="payment_info">
<action method="setInfoTemplate"><method></method><template></template></action>
</block>
</block>
</checkout_onepage_progress>

<!--
One page checkout payment methods block
-->
<checkout_onepage_paymentmethod>
<remove name="right"/>
<remove name="left"/>

<block type="checkout/onepage_payment_methods" name="root" output="toHtml" template="checkout/onepage/payment/methods.phtml">
<action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>
</block>
</checkout_onepage_paymentmethod>

<!--
One page checkout shipping methods block
-->

<checkout_onepage_shippingmethod>
<!-- Mage_Checkout -->
<remove name="right"/>
<remove name="left"/>

<block type="checkout/onepage_shipping_method_available" name="root" output="toHtml" template="checkout/onepage/shipping_method/available.phtml"/>
</checkout_onepage_shippingmethod>

<checkout_onepage_additional>
<!-- Mage_Checkout -->
<remove name="right"/>
<remove name="left"/>

<block type="checkout/onepage_shipping_method_additional" name="root" output="toHtml" template="checkout/onepage/shipping_method/additional.phtml">
<action method="setDontDisplayContainer"><param>1</param></action>
</block>
</checkout_onepage_additional>

<!--
One page checkout order review block
-->

<checkout_onepage_review translate="label">
<label>One Page Checkout Overview</label>
<!-- Mage_Checkout -->
<remove name="right"/>
<remove name="left"/>

<block type="checkout/onepage_review_info" name="root" output="toHtml" template="checkout/onepage/review/info.phtml">
<action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/onepage/review/item.phtml</template></action>
<action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/onepage/review/item.phtml</template></action>
<action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/onepage/review/item.phtml</template></action>
<block type="checkout/cart_totals" name="checkout.onepage.review.info.totals" as="totals" template="checkout/onepage/review/totals.phtml"/>
<block type="core/text_list" name="checkout.onepage.review.info.items.before" as="items_before" translate="label">
<label>Items Before</label>
</block>
<block type="core/text_list" name="checkout.onepage.review.info.items.after" as="items_after" translate="label">
<label>Items After</label>
</block>
<block type="checkout/agreements" name="checkout.onepage.agreements" as="agreements" template="checkout/onepage/agreements.phtml"/>
<block type="core/template" name="checkout.onepage.review.button" as="button" template="checkout/onepage/review/button.phtml"/>
</block>
</checkout_onepage_review>

<checkout_onepage_success translate="label">
<label>One Page Checkout Success</label>
<reference name="root">
<action method="setTemplate"><template>page/2columns-right.phtml</template></action>
</reference>
<reference name="content">
<block type="checkout/onepage_success" name="checkout.success" template="checkout/success.phtml"/>
</reference>
</checkout_onepage_success>
<checkout_onepage_failure translate="label">
<label>One Page Checkout Failure</label>
<reference name="root">
<action method="setTemplate"><template>page/2columns-right.phtml</template></action>
</reference>
<reference name="content">
<block type="checkout/onepage_failure" name="checkout.failure" template="checkout/onepage/failure.phtml"/>
</reference>
</checkout_onepage_failure>
<block type="core/list" name="additional.product.info"/>
</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:28:41.340

用这个：

根据您的要求进行更改

```
<block type="**your created module path**" before="cart_sidebar" name="name of your module" template="your template path"/> 
```

添加catalog.xml或page.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:38:13.723

用这个

```
<block type="**your created module path**" before="cart_sidebar" name="name of your module" template="your template path"/> 
```

**在这样**的默认标签下****

 **```
<default>
     <block type="**your created module path**" before="cart_sidebar" name="name of your module" template="your template path"/>
</default> 
```

**在 page.xml 或 catalog.xml**或您要显示的任何其他特定 xml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T08:50:09.243

尝试使用这个 -

```
<block type="prescriptionform/prescriptionform" before="cart_sidebar" name="prescriptionform" template="prescriptionform/index.phtml"/> 
```

确保清除 var/cache。**

# iphone - iPhone 中的弹出式视图

> ID：13697419
> 
> 赞同：1
> 
> 时间：2012-12-04T06:40:27.490
> 
> 标签：iphone, view, scrollview, popover

我在 UIView 上添加了一个垂直滚动视图。然后将下面链接中的一些“MidRight”按钮添加到滚动视图中。[https://github.com/lexrus/FPPopover](https://github.com/lexrus/FPPopover)

当我单击滚动视图中的“MidRight”按钮之一时，会出现一个弹出窗口“tableview”。当我单击表格视图的一行并单击弹出框外部时，弹出框消失。

如何实现这样的效果，当我点击表格视图的一行时，可以根据行的标签将图像添加到滚动视图的 UIView 中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:52:42.020

使用[WEPopover](https://github.com/werner77/WEPopover/issues/20)

它可能对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:47:55.417

您可以从`DemoTableController`类和委托方法中获取 selectedRaw 数字，`-didSelectRowAtIndexPath`您可以像下面这样获取标签或原始数字..

只需像下面这样导入`FPViewController.h`in`DemoTableController.m`文件..

```
#import "FPViewController.h" 
```

然后这个波纹管方法调用这个..

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
       int TagNo = indexPath.row;
       NSLog("\n Row No. : %d",TagNo);
       FPViewController *objFPView= [[ FPViewController alloc]init];
      [objFPView AddImageWithTag:TagNo];
} 
```

还在`FPViewController.h`文件中创建一种方法，如下所示

```
-(void)AddImageWithTag:(int)tag; 
```

在“FPViewController.m”中

```
-(void)AddImageWithTag:(int)tag{
    NSLog(@"\n\n Tag Number : %d",tag);
} 
```

我希望这可以帮助你...

# cakephp-2.0 - cakephp 2.x 如何仅将数据保存在 habtm 连接表中？

> ID：13697422
> 
> 赞同：1
> 
> 时间：2012-12-04T06:40:43.750
> 
> 标签：cakephp-2.0

我有一个用户和一个帖子表。当我保存帖子时，它通过 HABTM 成功保存它（也在 posts_users 表中）。

现在我希望该帖子可供多个用户访问。如何`posts_users`单独在表中添加数据，以便`post_id`现在也与`user_id`表中的其他数据相关联`users_posts`？

我尝试了以下代码：

```
<?php 
echo $this->Form->create('Post');
echo $this->Form->input('User.id',array('value'=>34));
echo $this->Form->input('Post.id',array('value'=>34));
echo $this->Form->end('Save Post');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:35:48.133

我认为您想要的是唯一的 HABTM 密钥：

```
public $hasAndBelongsToMany = array(
    'Post' => array(
        'className' => 'Post',
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'post_id',
        'joinTable' => 'posts_users',
        'unique' => 'keepExisting'
    )
); 
```

# java - 如何检查项目中设置了getParameter

> ID：13697427
> 
> 赞同：0
> 
> 时间：2012-12-04T06:41:19.690
> 
> 标签：java, jsp, servlets

我正在分析现有项目，在我看到的一个 JSP 页面中

```
String server=request.getParameter("server"); 
```

但我正在尝试检查如何找到此服务器参数的设置位置

我搜索了`setParameter("server")`，没有人可以对此提出任何建议

主要思想，我需要更改“服务器”参数中设置的值的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:43:38.340

您可以查看任何 HTML 元素，它们可能具有类似的标签`<input type='text' id='server' name='server' />`。我已经给出了文本框的例子，它可以是任何东西。不，没有这样的方法叫做`request.setParameter()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:44:02.547

您可以从提交**表单的 html/jsp 页面获取此属性。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:44:26.360

它由客户端（例如浏览器）生成的 HTTP 请求设置。例如，一个 HTML 表单在提交时会产生一个带有每个字段参数的 HTTP 请求。独立客户端（非浏览器）可以通过仅将这些参数添加到 URL 本身来设置请求参数。

因此，首先您必须确定是什么生成了导致调用 JSP 页面的 HTTP 请求。一旦你找到了谁在生成请求，你就很容易找到参数本身是如何设置的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:45:10.923

在您的`web.xml`第一次检查中，JSP/HTML 中的表单来自哪个表单`request`。

在对应的action中会获取到表单中的所有输入字段，通过在servlet中获取`request.getParameter('')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T06:46:16.807

此参数在**提交任何表单**时设置。检查**调用此 servlet 的页面**。该页面将包含一个具有类似字段的表单`<input type='text' name='server' />`。如果没有找到，请检查`URL query parameter`.

## 编辑

`web.xml`检查哪个 URL 被映射到您的 servlet 。

# visual-studio - 从 directx(x-64) 控制面板调试输出

> ID：13697428
> 
> 赞同：2
> 
> 时间：2012-12-04T06:41:24.263
> 
> 标签：visual-studio, directx, windbg

如何将 DirectX 10/11 调试输出捕获到 Visual Studio 或 windbg？

Windbg 是首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:17:53.327

也许这篇文章会有用？[http://blog.rthand.com/post/2010/10/25/Capture-DirectX-1011-debug-output-to-Visual-Studio.aspx](http://blog.rthand.com/post/2010/10/25/Capture-DirectX-1011-debug-output-to-Visual-Studio.aspx)

# c++ - 带有组合框的多语言控制

> ID：13697430
> 
> 赞同：0
> 
> 时间：2012-12-04T06:41:32.940
> 
> 标签：c++, dll, combobox, visual-studio-2012, multilingual

我试图通过在组合框中选择语言来控制语言，但我什至无法将任何选择作为简单文本写入组合。

这是源代码：[多语言](http://dl.dropbox.com/u/23976207/milti.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:10:40.097

这就是我要找的：[链接](http://msdn.microsoft.com/en-us/goglobal/bb688160.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:11:26.590

由于创建了一个文件夹 en-US（或您想要的每个语言标签），其中包含 Resources.resw（不要更改它），因此您可以将语言自动设置为系统语言。

要将项目添加到 ComboBox，请打开 ComboBox 的 Items 属性的“Collection”，选择（在 DropDown 的底部，“Add”旁边）“Other type...”并搜索“String”。现在您可以添加任意数量的内容，并在右侧编辑其文本。

# java - -Xmx 的大值会推迟垃圾收集吗？

> ID：13697433
> 
> 赞同：1
> 
> 时间：2012-12-04T06:41:55.270
> 
> 标签：java, linux, garbage-collection, heap-size

我有很多 JVM 在具有 32GB 物理内存和 32GB 虚拟内存的 Linux Redhat 上运行。这些 JVM 被配置为具有超过 32GB 的 Xmx 总值，并且可能让 Linux 使用了它的虚拟内存。
我的问题是，如果我指定的 Xmx 超过了所需的堆大小，它会延迟垃圾收集并因此分配比必要更多的堆大小吗？因此它将导致操作系统从其虚拟内存中分配内存，从而导致性能下降。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:10:45.190

JVM 在启动时保留最大堆大小（以及其他内存区域）。这意味着如果您的最大堆大小为 32 GB，它将使用大约 33-35 GB 的虚拟内存，包括共享库线程等。

如果您将最大堆大小设置为 32 GB，则它必须使用 64 位引用，并且与最大堆为 24 GB 且将使用 32 位引用的 JVM 相比，最终可用内存可能更少。有人估计，如果您将堆大小设置为 32 Gb 或更大，则必须将其增加到 48 GB 才能获得更多可用内存。

鉴于您机器的大小，我建议您将堆限制为 24 GB（或更少），并尽可能使用堆外内存，因为这可以同时具有性能优势和更大的可扩展性。

如果你有一个低 GC 程序并且你想避免收集，你可以创建一个巨大的伊甸园大小和 GC 每天或每周一次。为此，您必须将垃圾丢弃到最低限度，并且您可以创建一个 20 GB 的伊甸园大小，在这种情况下，如果您每天创建的垃圾少于 20 GB，您可以避免触发任何 GC（即使是次要的）并运行完整的 GC 作为通宵维护任务。例如凌晨 2 点。

如果您使用大堆，则要不惜一切代价避免使用交换。这是因为 GC 需要随机访问堆，并且一旦触发了足够大的交换，您的机器就会颠簸很长一段时间（可能是几个小时），并可能锁定。您甚至可能必须重新启动才能让您的机器正常运行。（很难杀死处于这种状态的进程/机器）

# wcf - 是否可以在不必运行实际服务的情况下对服务合同进行单元测试？

> ID：13697436
> 
> 赞同：2
> 
> 时间：2012-12-04T06:42:06.587
> 
> 标签：wcf, unit-testing, testing, service, servicecontract

我在使用 WCF 服务（实际上是服务客户端解决方案）的应用程序上工作。

出现的问题是，当我们进行一些重构时，结果发现一些服务合同变得无效。在服务和应用程序运行之前，这不会显示。

现在，我想编写测试用例来简单地测试服务合同，这样当它们不匹配时，测试用例就会失败。这是否可以在不必运行实际服务的情况下完成？

也就是说，我可以在测试用例中如何模拟服务部分并同时调用客户端调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:59:40.303

我在这里只是说说我的想法。.Net Reflection 会解决您的问题吗？我的意思是，检查包含您要验证的服务合同的二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:44:57.073

我会说这是不可能的，因为如果您通过网络执行函数，可能会发生很多陷阱。

例如超时、连接失败、授权问题等等。

在方法本身中为代码编写离线单元测试应该是可能的，但恕我直言，这只是工作的一小部分。

# python - 如何更改基本 url 的 DjangoBB 想法？

> ID：13697437
> 
> 赞同：0
> 
> 时间：2012-12-04T06:42:13.490
> 
> 标签：python, django, wsgi

我已经使用 mod_wsgi 设置了一个 Apache Web 服务器，并成功地修改了`basic_project`DjangoBB 以在站点的`/forum/`子树下从 Apache 调用。我遇到的问题是 WSGI 应用程序接收（正确）没有`/forum/`前缀的 URL，但在结果页面中生成没有任何前缀的 URL。

问题示例：打开`http://site/forum/`DjangoBB 论坛的首页；`Log In`链接指向`http://site/account/signin/`而不是期望的`http://site/forum/account/signin`.

如何使 DjangoBB 应用程序生成的所有 URL 包含自定义前缀（`/forum/`在我的情况下）？

更新（根据要求）：

其中部分`httpd.conf`配置项目以在 WSGI 下使用：

```
WSGIPythonPath /var/www/forum:/var/www/forum/xforum:/var/www/forum/venv/lib/python2.7/site-packages
WSGIScriptAlias /forum /var/www/forum/xforum/wsgi.py

<Directory /var/www/forum/xforum>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

请注意，如果不包括项目目录 ( `…/forum/xforum`) 及其父 ( `…/forum`)，则 WSGI 应用程序无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:57:17.283

在`settings.py`项目中，`FORCE_SCRIPT_NAME`应该是项目 URL 的前缀，以斜杠 ( )*开头*`/`：

就我而言，它应该是：

```
FORCE_SCRIPT_NAME = '/forum' 
```

# iphone - 在 CoreGraphics-iPhone 的两个不同 UIimageviews 中拆分 UIImage

> ID：13697438
> 
> 赞同：0
> 
> 时间：2012-12-04T06:42:17.640
> 
> 标签：iphone, core-graphics

**问题：**我有三个 UIImageViews。一个有一个`UIImage`，另外两个是-leftImageView & rightImageView。leftImageView 具有图像的左半部分，而右侧具有图像的另一半。我正在尝试使用 Coregraphics 来实现这一点，即在两个图像视图中绘制图像。

但是没有显示正确的图像视图。参考下面的代码：

```
UIImage *image = imgView.image;
CGSize sz = [image size];
CGRect leftRect = CGRectMake(0, 0, imgView.frame.size.width/2, imgView.frame.size.height);
CGRect rightRect = CGRectMake(imgView.frame.size.width/2, 0, imgView.frame.size.width/2, imgView.frame.size.height);

CGImageRef leftReference =  CGImageCreateWithImageInRect([image CGImage], leftRect);
CGImageRef rightReference = CGImageCreateWithImageInRect([image CGImage], rightRect);

// Left Image ...
UIGraphicsBeginImageContextWithOptions(CGSizeMake(leftRect.size.width, leftRect.size.height), NO, 0);
CGContextRef con = UIGraphicsGetCurrentContext();
CGContextDrawImage(con, leftRect,flip(leftReference));

imgViewLeft = [[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()];
UIGraphicsEndImageContext();
[self.view addSubview:imgViewLeft];

// Right Image ...
UIGraphicsBeginImageContextWithOptions(CGSizeMake(rightRect.size.width, rightRect.size.height), NO, 0);
con = UIGraphicsGetCurrentContext();
CGContextDrawImage(con, rightRect,flip(rightReference));

imgViewRight = [[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()];
UIGraphicsEndImageContext();

[self.view addSubview:imgViewRight]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:32:22.407

我认为您可以使用以下代码部分。

```
UIImage *image = [UIImage imageNamed:@"xxx.png"]; // You can change this line.
BOOL isLeft = YES; // You can change this variable(isLeft = YES : left piece, NO : right piece).

UIGraphicsBeginImageContext(CGSizeMake(image.size.width / 2, image.size.height));  

CGContextRef context = UIGraphicsGetCurrentContext();  

if (isLeft)
     CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width, image.size.height), image.CGImage);
else
     CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(- image.size.width / 2, 0, image.size.width, image.size.height), image.CGImage);

UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();  
UIGraphicsEndImageContext();

return imageCopy; 
```

我现在无法启动此代码，但我认为我的代码几乎是正确的。请试试这个。

**编辑 ：**

在您的代码中：

```
// Right Image ...
UIGraphicsBeginImageContextWithOptions(CGSizeMake(rightRect.size.width, rightRect.size.height), NO, 0);
con = UIGraphicsGetCurrentContext();
CGContextDrawImage(con, rightRect,flip(rightReference));

imgViewRight = [[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()];
UIGraphicsEndImageContext(); 
```

第三行有一个错误的部分：

```
 CGContextDrawImage(con, rightRect,flip(rightReference)); 
```

它应该是

```
 CGContextDrawImage(con, leftRect,flip(rightReference)); 
```

# windows-phone-8 - Windows Phone 8中基于位置的接近警报

> ID：13697445
> 
> 赞同：1
> 
> 时间：2012-12-04T06:42:58.520
> 
> 标签：windows-phone-8

有没有办法在 windows phone 8 中添加接近警报的位置？

例如。假设我添加了一个半径为 50 米的特定位置 xyz。一旦用户输入位置 xyx 接近警报应该被触发。

这个怎么做？

我在 android 中做过，但我不知道如何在 windows phone 8 中做。我检查了官方文档以及谷歌搜索，但我一无所获

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:46:39.563

[WP7/WP8 不允许完整的多任务处理](https://stackoverflow.com/questions/13514064/how-to-run-application-in-background-in-windows-phone/13520869#13520869)。因此，不可能始终打开后台进程以监听 geoloc 更改。

根据您的用例，您可以考虑使用 WP8 地理位置跟踪后台支持。您的应用程序首先必须由用户启动，并且只要它是跟踪位置并且没有激活其他位置跟踪应用程序，它可能会在后台保持打开状态。您可以阅读有关如何在 MSDN @ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx上创建地理定位跟踪应用程序的更多信息](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx)

当地理定位跟踪应用程序可用于接近警报时，一个很好的例子是寻找复活节彩蛋游戏。用户启动应用程序后，他们可以将其移至后台并让它弹出与用户位置相对应的 ShellToasts 和 Tile 更新。

# sql - sql oracle - 使用选择更新

> ID：13697446
> 
> 赞同：0
> 
> 时间：2012-12-04T06:42:59.147
> 
> 标签：sql, oracle, select

我在更新我的一个表中的列时遇到问题。我有一个名为 ORDERS 的表，我在表中添加了一个新列，表示订单的总成本。我通过使用计算成本的查询来获得总成本。现在我正在尝试使用该选择查询来使用更新来填充表中的该列。这就是我所拥有的：

```
update ORDERS
set TOTAL_COST = (
select sum((p.COST*i.QUANTITY)*(1-o.DISCOUNT))+delivery(o.DELIVERY) as TOTAL_COST
from PRODUCT p, ITEM i, ORDERS o
where p.ID_PRODUCT = i.ID_PRODUCT and i.ID_ORDER = o.ID_ORDER
group by o.ID_ORDER, o.DISCOUNT, o.DATE, o.DELIVERY); 
```

我的查询返回每个订单的总成本，这就是我想要在我的表中拥有的。我收到“单行子查询返回多行”错误。我不知道我做错了什么，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:50:04.293

为了使您的 UPDATE 工作，子查询 (SELECT SUM...) 需要为每个订单返回一行。但是根据错误消息，它肯定返回不止一行。

主要问题当然是没有谓词将要更新的当前行与子查询相关联。所以你至少需要在子查询中添加这样的东西：

```
o.ID_ORDER = ORDERS.ID_ORDER 
```

此外，GROUP BY 子句往往会为 UPDATE 生成不止一行。它只需要减少到 o.ID_ORDER。

第三个问题是交付成本，它应该相加但在最后加上。所以他们必须被移出子查询：

```
update ORDERS
set TOTAL_COST = (
  select sum((p.COST*i.QUANTITY)*(1-o.DISCOUNT)) as TOTAL_COST
  from PRODUCT p, ITEM i, ORDERS o
  where o.ID_ORDER = ORDERS.ID_ORDER and p.ID_PRODUCT = i.ID_PRODUCT and i.ID_ORDER = o.ID_ORDER
  group by o.ID_ORDER
) + delivery(DELIVERY); 
```

# sharepoint - 部署步骤“撤回解决方案”中发生错误：功能“GUID”未在此范围内激活

> ID：13697447
> 
> 赞同：3
> 
> 时间：2012-12-04T06:43:11.557
> 
> 标签：sharepoint, sharepoint-2010

尝试在 sharepoint 中部署解决方案时出现了一些奇怪的问题。

> 部署步骤“撤消解决方案”中发生错误：功能“GUID”未在此范围内激活。

我能够构建和重建，但是在尝试部署时，会出现上面显示的错误。

在尝试收回时，引发的错误是

> 在此范围内未激活功能“GUID”。

这一切都是突然发生的......直到昨天它都工作得很好！！！....

如何查看带 ID 的功能是否已激活？还有我如何激活该功能？

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:45:18.593

使用“SharePoint 2010 Management Shell”Install-SPSolution –Identity SharePointProject2.wsp –WebApplication -GACDeployment 收回并再次安装解决方案。

按照[http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2009/12/02/adding-and-deploying-solutions-with-powershell-in-sharepoint-2010.aspx](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2009/12/02/adding-and-deploying-solutions-with-powershell-in-sharepoint-2010.aspx)获取正确的语法。一旦它运行且没有错误，请确认在网站集中激活了所需的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:58:04.953

请确保功能已激活。请按照转到站点设置。然后在站点操作中选择管理站点功能。然后激活该特定功能，希望它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:21:45.777

我遇到了同样的问题，我用来从 Visual Studio 部署的帐户不是站点所有者。一旦我将帐户添加为站点所有者，它就可以正常部署。

# android - 滚动列表视图时，ToggleButton 状态已重置为先前状态

> ID：13697448
> 
> 赞同：1
> 
> 时间：2012-12-04T06:43:12.890
> 
> 标签：android, android-listview, togglebutton

我在列表视图中使用 ToggleButtons，我从 web 服务数据设置了切换按钮的状态，现在我更改了切换按钮的状态，但是当我滚动列表视图时它被重置为以前的状态。

我在适配器类中使用了以下内容。

```
tbtnStatus=(ToggleButton)view.findViewById(R.id.togglebtn);
tbtnStatus.setTag(new Integer(position));  

tbtnStatus.setOnCheckedChangeListener(null);

tbtnStatus.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub
        String update_status;
        String current_status=buttonView.getText().toString();
         if(current_status.equals("ON"))
         {
             update_status="NO";
         }

         else
         {
             update_status="YES";
         }

        String res=UrltoValue.getValuefromUrl(DataUrls.updateindividualstaus+"?pilotid="+DataUrls.pilotid+"&friendid="+friendid[position]+"&status="+update_status);
     }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:55:50.227

每次您将切换按钮滚动出屏幕时，切换按钮的状态都会从 Web 服务数据中清除为默认值，因为所有当前不可见行的视图都将被删除，并将使用默认值重新创建。您需要保存切换按钮的状态。例如，您可以将其保存在与该行关联的对象中，如果您使用`ArrayAdapter<Object>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:01:52.273

当您检查相应视图的切换按钮时保存您的视图位置...并在 getView() 中编写此代码

```
 if(yourposition==position)
    tbtnStatus.setChecked(true); 
```

假设您单击了第三个位置切换..将 3 保存为您的位置，并且当您滚动时调用 getView 并将满足条件检查您的切换为是

# java - 如何使 BufferedWriter 写入文本文件中最底部定义的行？

> ID：13697449
> 
> 赞同：0
> 
> 时间：2012-12-04T06:43:13.560
> 
> 标签：java

```
public static void print(String id) {
    try{
        FileWriter fstream = new FileWriter("out.txt");
        BufferedWriter out = new BufferedWriter(fstream);
        out.write(id +"\n");
        out.close();
    }catch (Exception e){
    }
} 
```

我在运行时调用这个方法数十万次，但它一直覆盖第一行。我怎样才能让它从最底线开始？（我负责用转义序列定义下一行。）

还是有更优雅的解决方案？打开和关闭一个文本文件数十万次来存储我的模拟结果不是很有效。但是话又说回来，如果我在所有执行结束时在 main 中有 out.close，我会与很多人发生冲突，他们说与 I/O 相关的所有内容都应该放在 try/catch 块中（另外，我会必须处理函数永远不会被执行并且没有被定义等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:54:39.277

我不确定您在寻找什么，但如果您正在寻找一种附加到文件的方法，您可以尝试

```
FileWriter fstream = new FileWriter("out.txt", true); 
```

作为构造函数

```
public FileWriter(File file, boolean append) 
```

将附加到给定的文件而不覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:04:57.463

是的，您可以将代码更改为使用`new FileWriter("out.txt", true)`. 那将附加到文件中。但是，还有其他选择：

*   我*强烈*建议使用`OutputStreamWriter`(环绕 a `FileOutputStream`) 而不是`FileWriter`. 这样您就可以指定文件的编码。你希望它是什么编码？（您仍然可以通过这种方式追加 - 您只需使用适当的`FileOutputStream`构造函数。）

*   你为什么用一个`BufferedWriter`？您正在向作家写一个字符串，然后关闭作家。您希望缓冲产生什么影响？

*   目前你正在吞下所有的例外。即使您*确实*想默默地吞下`IOException`，也不应该吞下*其他*异常。始终尽可能捕获特定异常。

*   如果抛出异常，您就不是文件。您应该始终使用块关闭资源`finally`，或使用[`try-with-resources`](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)Java 7 中的语句。

*   真的每次写的时候都需要重新打开文件吗？为什么不让它保持打开状态，并在需要时写信给它？然后在应用程序关闭时关闭它。

# php - 这是为我用 php 制作的网站从 MySQL 数据库中提取数据的正确方法吗？

> ID：13697450
> 
> 赞同：0
> 
> 时间：2012-12-04T06:43:18.883
> 
> 标签：php, mysql

我的数据库中有一个名为文章的表。我希望能够从那里提取最新文章到我的主页。我尝试了不同数量的 array_reverse 函数，但我无法让它们工作。这是我到目前为止的代码......

```
include('config.php');
    $sql = "SELECT Id, Subject, Content FROM articles";
    $result = mysql_query($sql, $db) or die(mysql_error());
    while( $row = mysql_fetch_array($result))
    {
        $subject = $row["Subject"];
        $content = $row["Content"];
        $Id = $row["Id"];
        echo <<<EOD
        <div style="background-color:white; border-style: solid; border-width: thin; padding: 20px">
        <a href="template.php?id=$Id">$subject</a><br>$content</div><hr>   
 EOD;
    } 
```

这是我尝试过但不起作用的代码之一......

```
$posts = count(mysql_fetch_array($result));
for($i = $posts-1; $i>=0; $i--)
{
    $subject = $row["Subject"];
    $content = $row["Content"];
    $Id = $row["Id"];
    echo <<<EOD
    <div style="background-color:white; border-style: solid; border-width: thin; padding: 20px">
    <a href="template.php?id=$Id">$subject</a><br>$content</div><hr> EOD;
    } 
```

我还希望我的链接的主题是可点击的，这样当他们被点击时，他们可以转到一个页面，该页面将根据它的 ID 显示文章。我通过创建一个 template.php 文件并在主页中放置一个链接“$subject”作为我的主题成功地实现了这一点。这可行，但我想知道这是否是正确的方法以及是否有更好的方法来做到这一点......

谢谢和抱歉，如果有人问过这个问题，我确实尝试寻找答案，但没有找到任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:59:35.157

将您的查询更改为

```
$sql = "SELECT Id, Subject, Content FROM articles ORDER By Id DESC"; 
```

如果您只需要最新的 5 篇文章，则添加任何限制以限制结果

```
$sql = "SELECT Id, Subject, Content FROM articles ORDER By Id DESC LIMIT 5"; 
```

问候

iijb

# css - How to change button background when pressed on HTML5

> ID：13697459
> 
> 赞同：0
> 
> 时间：2012-12-04T06:43:53.193
> 
> 标签：css, html

I am developing an HTML5 web page for mobile. On mobile device, we can't detect hover event. So, how to change the background of button when I press it by my finger?

Update: One simple example of what I want is the button "Google Search" of google main page: [https://www.google.com.vn/](https://www.google.com.vn/)

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:45:07.200

I found the solution as below. Hope this helps

```
button:ACTIVE {
    background: aqua;
}

button {
    background: green;
} 
```

# linq - F# 中的 EBay OData 类型提供程序，使用 LINQ 未获得任何结果

> ID：13697461
> 
> 赞同：5
> 
> 时间：2012-12-04T06:43:57.747
> 
> 标签：linq, f#, functional-programming, odata, type-providers

谁能帮我理解为什么下面的代码没有从查询中返回结果，而第二个示例却没有（尽管如果我尝试在第二个示例上使用标准，我会很痛苦！）

```
 type EbayData = 
    ODataService<"http://ebayodata.cloudapp.net">

let Ebay = EbayData.GetDataContext()

let Favourites title number = query{
    for deal in Ebay.Deals do
    where (deal.Title.Contains(title))
    take number
    }

let Esearch title number =  [for item in Favourites title number do 
                                  yield item] 
```

工作版本：

```
type Catalog = ODataService< "http://ebayodata.cloudapp.net/" >

let ebay = Catalog.GetDataContext()

let trial =
            [ for item in ebay.Deals do
               yield item] 
```

我似乎无法将第一个输出到任何类型的列表，无论使用 |> 等做什么。第二个示例似乎并没有带回许多结果来进行文本查询。但是，我真正的问题是我似乎无法从 F# 版本的 LINQ 中得到任何东西。

输出用于我使用 VB 与列表对话的 WPF 应用程序中。我已经用它填充了一个包含 10 个项目的非歧视性列表，所以这个结果确实有效。这是VB代码。

```
 For Each Deal In trial.Where(Function(p) p.Title.Contains(title.Text))
                DealResults.Items.Add(buildStackPanel(Deal))
            Next 
```

当我按下 Ctrl-K 时，这篇文章中 F Sharp 的间距似乎不起作用，所以如果有人能告诉我我做错了什么——我想这是第二个问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:22:50.650

我不知道为什么这对你不起作用。我敲掉了以下，它似乎工作：

```
open Microsoft.FSharp.Data
type Catalog = TypeProviders.ODataService< "http://ebayodata.cloudapp.net/" >

let ebay = Catalog.GetDataContext()

let trial =
            [ for item in ebay.Deals do
               yield item]
let trial2 = query {
                for deal in ebay.Deals do
                where (deal.Title.Contains "a")
                take 2
             }
let ESearch title number =
             query {
                for deal in ebay.Deals do
                where (deal.Title.Contains title)
                take number
             }

[<EntryPoint>]
let main argv = 
    trial |> Seq.take 2 |> Seq.iter (fun d -> printfn "%s" d.Title)
    trial2 |> Seq.iter (fun d -> printfn "%s" d.Title)
    ESearch "a" 2 |> Seq.iter (fun d -> printfn "%s" d.Title)

    0 
```

也许您尝试搜索不存在的东西？目前只有 6 笔交易，所以这并非不可能。

**查询项目**

在此处阅读有关 eBay OData 服务的信息：http: [//ebayodata.cloudapp.net/docs](http://ebayodata.cloudapp.net/docs) 它在查询商品时有特殊需求：

> （需要使用卖家、PrimaryCategoryId 或 SecondaryCategoryId 的搜索参数或 $filter）

因此，要查询项目，您至少需要提供一个搜索词组。您的`where`陈述不会被翻译成最终 url 中的搜索参数。要在此类型提供程序中添加自定义参数，请执行[.AddQueryOption](http://msdn.microsoft.com/library/cc646860.aspx)。

```
let ItemSearch title number =
             query {
                for item in ebay.Items
                             .AddQueryOption("search", title) do
                take number
             }
// use
ItemSearch "wario" 2 |> Seq.iter (fun d -> printfn "%s" d.Title) 
```

# java - Java 中 IO 流的目的是什么？

> ID：13697463
> 
> 赞同：0
> 
> 时间：2012-12-04T06:43:58.753
> 
> 标签：java, io

请解释 Java`InputStream`和`OutputStream`类的使用。我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:48:17.180

[没有比这](http://docs.oracle.com/javase/tutorial/essential/io/streams.html)更好的解释了。

概括：

[InputStream](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)：抽象类；表示字节输入流的所有类的超类。

![在此处输入图像描述](../Images/c8a1a70dfac773bda0713f7173d57b9f.png)

[OutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html)：这个抽象类是所有表示字节输出流的类的超类。输出流接受输出字节并将它们发送到某个接收器。

![在此处输入图像描述](../Images/6927ef6e8b56e79e68e17bf22a9205b6.png)

更多详细信息可[在此处](http://www.cs.princeton.edu/courses/archive/spr96/cs333/java/tutorial/java/io/index.html)获得。

要了解字符流，请参见[此处](https://stackoverflow.com/questions/3013996/byte-stream-and-character-stream)和[此处](http://www.iam.ubc.ca/guides/javatut99/post1.0/converting/convertingIO.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T06:46:25.623

InputStream 和 OutputStream 的目标是抽象不同的输入和输出方式：流是文件、网页还是屏幕都无关紧要。重要的是您从流中接收信息（或将信息发送到该流中。）

**InputStream**用于您从中读取的许多内容。

**OutputStream**用于您写入的许多内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T06:51:37.323

I/O 流表示输入源或输出目标。一个流可以表示许多不同类型的源和目标，包括磁盘文件、设备、其他程序和内存阵列。

# php - 如何在mysql中上传和显示图片

> ID：13697466
> 
> 赞同：0
> 
> 时间：2012-12-04T06:44:15.843
> 
> 标签：php, mysql, database

我想问你如何使用这段代码在mysql和文件夹中正确存储图像：

```
<?php

if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 

          // Temporary file name stored on the server
          $tmpName  = $_FILES['image']['tmp_name'];  

          // Read the file 
          $fp     = fopen($tmpName, 'r');
          $data = fread($fp, filesize($tmpName));
          $data = addslashes($data);
          fclose($fp);

          // Create the query and insert
          // into our database.
          $query = "INSERT INTO tbl_images ";
          $query .= "(images) VALUES ('$data')";
          $results = mysql_query($query, $conn);

          // Print results
          print "Thank you, your file has been uploaded.";

}
else {
   print "No image selected/uploaded";
}

if (!mysql_query($sql, $link))
   {
   die('Error: ' . mysql_error());
   }

?>' 
```

还有如何正确显示它。我的图像数据库是 id, images。我需要更多的东西来完成这项工作吗？或者这就足够了。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:17:00.910

从上面的代码中，图像将保存在数据库中而不是文件夹中。要保存在文件夹中，您必须在插入查询后使用以下代码。

```
move_uploaded_file($tmpName,"upload/" .$filename ); 
```

这里上传是文件夹名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:08:45.197

如果要将图像存储在数据库中，可以使用[base64_encode](http://php.net/manual/en/function.base64-encode.php)方法

```
$image = file_get_contents('filename.gif');
$imencoded = base64_encode($image);   
$query = "INSERT INTO tbl_images ";
$query .= "(images) VALUES ('$imencoded')"; 
```

但不建议将图像存储在 db 中，并且在 IE6 和 7 中不支持。

# jquery - 在jquery自动完成文本框的updatepanel中获取组合框值

> ID：13697467
> 
> 赞同：1
> 
> 时间：2012-12-04T06:44:18.567
> 
> 标签：jquery, updatepanel, jquery-ui-autocomplete

我在 ajax 更新面板中有两个组合框，在更新面板之外有一个**JQuery 自动完成**文本框

我的问题是当我从客户端组合框中选择时，我需要将值传递给服务方法

这是我的代码**`agentid`**总是空的

```
jQuery(function test(agentid) {
            agentid = $("#val_client").val();
            options = { 
                        serviceUrl: '../../proxy/workorder/WorkOrderService.svc/GetAllPropertyListAutoComplete', 
                        params: { _agency: agentid },
                        onSelect: function (value, data) {
                               var record = new Array();
                               record = data.split('|');
                               document.getElementById('workTitle').value = record[0] ? record[0] : record[1];
                               document.getElementById('workAddress').value = record[1] ? record[1] : record[0];
                               document.getElementById('workSiteContact').value = record[2];
                               document.getElementById('workSiteContactNumber').value = record[3];
                               $('#workTitle').attr('readonly', true);
                               $('#workAddress').attr('readonly', true);
                                return false;
                          }
                       }
            a = $('#txt_Properties').autocompletev2(options);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:02:00.007

您的下拉列表 ID 是“val_client”吗？

# image - 在用户墙上发布完整图像

> ID：13697470
> 
> 赞同：0
> 
> 时间：2012-12-04T06:44:30.847
> 
> 标签：image, facebook-graph-api

我正在使用最新的 php sdk。我可以用这个 api 发布到墙上。消息，图片可以发布到用户墙。但图片是缩略图和链接。但是我在 facebook 上看到了一些应用程序，它们在墙上发布了完整的图像。我怎样才能做到这一点。这样 PHP 生成的图像可以以全尺寸发布到用户墙上。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:34:02.587

您可能想研究开放图形操作的[显式共享。](https://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)通过将操作标记为明确分享，帖子将被视为状态更新，并有机会显示为带有全尺寸图片的独立故事（例如 Instagram、Foursquare 等）

# ruby-on-rails-3 - 将滑块添加到 Rails 应用程序

> ID：13697472
> 
> 赞同：2
> 
> 时间：2012-12-04T06:44:40.363
> 
> 标签：ruby-on-rails-3, jquery-ui, slider, asset-pipeline, erb

我在我的 rails 3 应用程序中添加一个简单的滑块时遇到问题。我的 JavaScript 中似乎没有任何错误：

我的 Gemfile 有：

```
gem 'jquery-rails'

group :assets do
  gem 'jquery-ui-rails'
end 
```

技能.js.咖啡：

```
jQuery ->
  $('#slider').slider 
```

技能/show.html.erb：

```
<div id="slider"></div> 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require bootstrap
//= require_tree . 
```

它没有出现在我的应用程序中。我需要采取任何其他步骤才能使其显示出来吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T21:38:30.397

需要将 jquery ui 添加到 css。

将以下内容添加到`application.css`

```
*= require jquery.ui.slider 
```

感谢 simonmorley 的解决方案

# emulation - 为什么要模拟一定数量的周期？

> ID：13697479
> 
> 赞同：4
> 
> 时间：2012-12-04T06:44:57.310
> 
> 标签：emulation, z80

我在不止一个地方看到过-以下模仿方式

即循环被传递到模拟函数

```
int CPU_execute(int cycles) {
    int cycle_count;

    cycle_count = cycles;
    do {

         /* OPCODE execution here */

    } while(cycle_count > 0);

    return cycles - cycle_count;
} 
```

我很难理解您为什么要使用这种方法进行模拟，即为什么要模拟一定数量的周期？你能给出一些这种方法有用的场景吗？

衷心感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T07:32:35.107

仿真器往往对欺骗为多个芯片设备编写的软件感兴趣——就 Z80 和最畅销的设备而言，除了 CPU 之外，您可能至少会谈论图形芯片和声音芯片。

在现实世界中，这些芯片都是同时运行的。将有一些总线逻辑允许它们所有人进行通信，但它们在其他方面处于自己的世界中。

您通常不会将不同芯片的仿真作为并发进程运行，因为执行同步事件的成本太高，尤其是在几个芯片之间共享同一个 RAM 块之类的常见安排中。

因此，最基本的方法是协同处理不同芯片的多任务——运行 Z80 几个周期，然后运行图形芯片相同的时间，等等，无止境。这就是运行n个循环并返回的方法的来源。

这通常不是重现真实计算机总线行为的准确方法，但它很容易实现，并且通常可以欺骗大多数软件。

在您发布的特定代码中，作者进一步决定仿真将四舍五入到下一条完整指令结束的周期数。同样，这与实现的简单性有关，而不是与真实机器的实际内部有关。返回实际运行的周期数，以便其他子系统可以尝试适应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T22:18:32.113

既然您提到了 z80，我恰好知道有时需要这种精确仿真的平台的完美示例：ZX Spectrum。ZX Spectrum 上的标准图形输出区域是一个 256 x 192 像素的盒子，位于屏幕中央，周围是一个由纯色填充的相当宽的“边框”区域。通过将值输出到特殊的输出端口来控制边框的颜色。计算机设计师的想法是，只需选择最适合主屏幕上正在发生的事情的边框颜色。

ZX Spectrum 没有精密计时器。但程序员很快意识到，z80 的“刚性”（按照现代标准）计时允许人们进行与显示器光束移动同步的绘图。在 ZX Spectrum 上，人们可以等待每一帧开始时产生的中断，然后按字面意思计算实现各种效果所需的精确周期数。例如，ZX Spectrum 上的一条完整扫描线在 224 个周期内被扫描。因此，可以每 224 个周期更改一次边框颜色，并在边框上生成像素粗线。

ZX Spectrum 的图形容量有限，因为屏幕被划分为 8x8 像素块，在任何给定时间只能使用两种颜色。程序员通过每 224 个周期更改这两种颜色来克服这一限制，因此，有效地将颜色分辨率提高了 8 倍。

我可以看到另一个答案下的讨论集中在一个扫描线是否可能是模拟器的足够准确的分辨率。嗯，我在 ZX Spectrum 上看到的一些边框滚动效果基本上是定时到单个 z80 周期的。想要重现此类代码的正确输出的仿真器还必须精确到单个机器周期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T08:50:33.747

如果您想将处理器与其他硬件同步，这样做可能会很有用。例如，如果您想将其与定时器同步，您想控制在定时器中断 CPU 之前可以经过多少个周期。

# android - 为不同的屏幕设计 - Android

> ID：13697482
> 
> 赞同：0
> 
> 时间：2012-12-04T06:45:12.587
> 
> 标签：android, screen

我希望我的应用程序能够在不同的屏幕尺寸、**Galaxy Tab 2**、**Galaxy Note 800**和**Galaxy Note 2**上完美运行。

但是，我的应用程序相当复杂，我无法使用`wrap_content`或`fill_parent`在所有地方都无法使用。我试过使用`layout_weight`，但即使这样也不能与`RelativeLayout`.

[除了按照Android文档](http://developer.android.com/guide/practices/screens_support.html)`layout_weight`中的建议制作不同的布局之外，是否有任何智能方法可以根据屏幕尺寸调整屏幕组件的大小， 并且有什么方法可以使用`RelativeLayout`吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:11:46.240

您可以使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)并在该[TableRow](http://developer.android.com/reference/android/widget/TableRow.html)中使用。在我的一个项目中，我更喜欢RelativeLayout，因为RelativeLayout 不支持您所说的权重属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:58:55.400

确实，您不能将重量与相对布局一起使用。如果您想确保您的布局完美地适用于每台设备。您必须使用带有视图的嵌套线性布局，并且如果您的每个设备都有良好的分辨率图像，那么您的 UI 将是完美的。

此外，在 RelativeLayout 中，复杂的布局并不完美，因为您不能使用权重，有时图像可能会倾斜或拉伸。

当然，使用带有视图的嵌套线性布局确实会增加一些额外的行，但这是唯一完美的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:05:34.967

我找到了一种有效的方法。

我没有在布局中对尺寸进行硬编码，而是在`Resources/values/dimensions.xml`. 因此，对于不同的屏幕尺寸，我只是在 Resources 中制作了不同的尺寸文件，从而降低了复杂性并避免为所有屏幕尺寸制作单独的布局。

# ubuntu - 在 Ubuntu 上启动时运行命令

> ID：13697486
> 
> 赞同：0
> 
> 时间：2012-12-04T06:45:25.547
> 
> 标签：ubuntu, startup

我想在系统启动后自动运行“xclock”并显示时钟，

所以我创建了 myclock.sh 文件，里面有命令 xclock。然后我将文件移动到 /etc/init.d/ 使其可执行：

sudo chmod +x myclock.sh

并将其包含在运行级别中：

sudo update-rc.d myclock.sh 默认值

但是我仍然没有在启动时得到时钟，我做错了什么吗？最终目标是自动启动远程机器中的某个应用程序（我只能使用 ssh 连接到该应用程序），我需要在机器开启时始终运行该应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:54:26.123

X 应用程序不能在启动脚本中，因为 X 环境尚未启动。而是尝试`.xsessionrc`在您的主目录中创建一个文件，其中包含：

```
exec xclock 
```

该文件不必是可执行的。

该文件在您登录 X 会话时执行。

# php - 迁移网站“下载”？

> ID：13697488
> 
> 赞同：0
> 
> 时间：2012-12-04T06:45:29.333
> 
> 标签：php, web, download, move

我正在尝试将网站从一台服务器移动到另一台服务器。但是，当我尝试在浏览器中访问该网站时，它只会下载一个名为“下载”的 1kb 文件。这可能是什么原因造成的？原站点有SSL证书以及大量用php、sql、json、ajax等编写的代码。

这个问题被关闭为“不是一个真正的问题”，但我没有时间回复评论。如果这是一个简单的答案，那么无论如何，请给我答案。*我已使用 ftp 客户端将所有文件从旧服务器移动到新服务器。所有文件都已成功移动。当尝试登录到基本页面或进入 index.php 页面时，所发生的只是标题为“下载”的 1kb 下载开始和结束。该文件没有扩展名，无法打开。* 这个问题也发生在多家托管公司，因为我已经尝试移动这个网站两个星期了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:33:13.080

我以前也遇到过类似的问题。

尝试使用文本编辑器打开“下载”文件（也许将其重命名为 download.txt 以便于打开）

打开文件后，您可能会看到 index.php 的源代码。这表明这是由于您的服务器配置错误，可能是由于设置服务器的人可能是由于您自己的 .htaccess。

首先尝试删除您的 .htaccess（某些 ftp 客户端可能会隐藏它）。它现在有效吗？

如果不尝试上传文本文件或图像并检查是否正在提供此文件，如果没有，则服务器配置存在严重错误，可能不是您造成的。

如果这确实有效，那么这是由于 PHP 配置，基本上脚本没有被发送到 PHP 进行处理，如果是这种情况，那么我会确保在该服务器上安装并允许 PHP。

# quartz-scheduler - 我们可以使用定制的 Quartz 线程池实现来终止作业吗？

> ID：13697491
> 
> 赞同：0
> 
> 时间：2012-12-04T06:45:51.957
> 
> 标签：quartz-scheduler

我想杀死 Quartz Thread 并且在 Quartz 中没有直接的方法来实现这一点。

我们是否可以通过添加所需的细节来识别线程并通过 java thread.interrupt 杀死相同的线程来创建自己的自定义 Quartz 线程池实现来实现相同的目标。

有人可以分享您对此的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-02T01:54:31.320

我们已经完成了使用套接字编程并且能够打开套接字并跟踪套接字并最终终止套接字。这是以不同的方式实现的。

假设一个 Job 与第三方服务器连接，并且第三方服务器在给定时间内没有发送响应。

# php - 使用带有数组的 JQuery Validate 远程方法

> ID：13697494
> 
> 赞同：0
> 
> 时间：2012-12-04T06:46:10.270
> 
> 标签：php, jquery, arrays, validation, jquery-validate

我需要在同一个屏幕上注册更多用户，所以我使用这样的表单：

```
Username*<input name="username[]" />
Password*<input name="password[]" />

Username*<input name="username[]" />
Password*<input name="password[]" /> 
```

...

并使用 jquery.validate 来控制用户是否仍在使用中：

```
rules : {
'username[]' : {
    required : true,
    remote: {
            url: "control_user.php"

          }
}, 
```

但我不知道如何在 control_user.php 中为数组中的每个“用户名”返回正确的“真”或“假”。

有什么帮助吗？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:58:22.033

验证项目文件中有一些非常有用的演示 - 您可以[在此处以 zip 格式下载它们](https://github.com/jzaefferer/jquery-validation/archive/master.zip)

您可以从您的 php 脚本中返回字符串 'true' 或 'false'。我认为您的“control_user.php”看起来很像从“marketo”演示中获取的示例

```
<?php
$request = trim(strtolower($_REQUEST['email']));
$emails = array('glen@marketo.com', 'george@bush.gov', 'me@god.com');
$valid = 'true';
foreach($emails as $email) {
    if( strtolower($email) == $request )
        $valid = 'false';
}
echo $valid;
?> 
```

# jquery - 为什么 Opera 扩展后台页面无法使用 cookie？

> ID：13697496
> 
> 赞同：2
> 
> 时间：2012-12-04T06:46:20.630
> 
> 标签：jquery, ajax, cookies, opera-extension

我尝试写 Opera 扩展，它必须能够调用 AJAX 请求到第三方站点。

我在 config.xml 中有什么：

```
<access origin="*" /> 
```

我在此第三方网站上获得授权： ![请发现cookie存在](../Images/8825fa32eba743055626ccb5d2fa5898.png)

我以非常简单的方式从后台页面使用 jQuery 调用 AJAX：

```
$.ajax(params); 
```

我在 Dragonfly 中得到了什么？AJAX 调用已发送，但请求中没有 cookie。请看截图： ![在此处输入图像描述](../Images/e8c2292616013233734b7815371bbc6c.png)

问题仅存在于扩展背景页面上。对本网站的简单访问可以很好地传输 cookie。

我究竟做错了什么？如何让后台页面看到我的cookies？或者从我的扩展程序调用第三方站点的另一种方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:16:49.137

当我阅读对第三方站点的 Ajax 请求时，我直接想到了跨域限制： [跨域 cookie](https://stackoverflow.com/questions/1084114/cross-domain-cookies)

# php - javascript字符串变量的字符限制

> ID：13697500
> 
> 赞同：22
> 
> 时间：2012-12-04T06:47:00.270
> 
> 标签：php, javascript

JavaScript 字符串可以存储 10 万个字符吗？我编写了一个脚本，其中来自 PHP 的字符串被传递给 JavaScript 中的变量。当它被缩短到近一万个字符时它工作正常，但在尝试传递长度略大于 100K 的整个字符串时会破坏脚本。虽然没有发现任何错误。对于增加 JavaScript 变量字符限制的任何方式，有什么解决方案吗？我只是一个初学者。希望有人可以为此找到解决方案。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-11-17T22:53:44.653

ECMAScript 标准[ECMA-262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)（第 6 版，2015 年 6 月）说

> 6.1.4 字符串类型
> 
> String 类型是由零个或多个 16 位无符号整数值（“元素”）组成的所有有序序列的集合，最大长度为 2 ^(53) -1 个元素。

所以不要计划使用超过 9,007,199,254,740,991 或大约 9 万亿个字符。当然，您应该为无法分配 18 PB 内存块的系统做好准备，因为这不是符合 ECMAScript 实现的要求。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2021-01-04T22:31:30.123

我认为问题是询问实际限制，而不是规格限制。而且，不，它并不总是你拥有的 RAM 量。我有 x86_64 24GB PC 运行 Linux Mint 和 x86_64 Firefox 和 x86_64 Chrome，我遇到的限制是：

*   Firefox 84 中的 1,073,741,822 限制
*   Chrome 87 中的 536,870,888 限制

任何更高，Firefox 抛出 a `Uncaught RangeError: repeat count must be less than infinity and not overflow maximum string size`，而 Chrome 抛出`Uncaught RangeError: Invalid string length`. 使用以下代码段在浏览器中运行最大字符串长度的二进制搜索：

```
for (var startPow2 = 1; startPow2 < 9007199254740992; startPow2 *= 2)
    try {" ".repeat(startPow2);} catch(e) {
        break;
    }

var floor = Math.floor, mask = floor(startPow2 / 2);
while (startPow2 = floor(startPow2 / 2))
    try {
        " ".repeat(mask + startPow2);
        mask += startPow2; // the previous statement succeeded
    } catch(e) {}

console.log("The max string length for this browser is " + mask);
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-04T07:36:32.710

JS 或 PHP 对其字符串的大小没有理论上的限制。

我认为有几种可能的情况。

首先，检查您是否没有通过 HTTP GET 发送您的字符串。GET 有一个最大大小，我认为它取决于您的 Web 服务器。

其次，如果您确实使用 POST，请在 php.ini 中检查 post_max_size 并查看它是否小于您发送给它的字符串大小以及您的 .htacccess 文件以查看 php_value post_max_size 是否太小。

第三，检查 php.ini 中的 memory_limit 是否限制脚本可以使用的内存大小。

希望这可以帮助。

# google-drive-api - 授予 APP 对 Google Drive 文件的授权

> ID：13697503
> 
> 赞同：2
> 
> 时间：2012-12-04T06:47:33.403
> 
> 标签：google-drive-api

我正在尝试使用我创建的特定 APP 授权来授权我的谷歌驱动器上的文件。由于我的谷歌驱动器上的文件只能由其授权的应用程序操作，有什么方法可以通过 APP 授权转换这些“无”授权文件？如果是，通过哪个函数？

我查看了整个教程文档，但只找到了关于权限的讨论。我能想到的唯一方法是使用我创建的应用程序的上传功能将这些文件上传到谷歌驱动器。但我想有一个更聪明的方法。有没有人有同样的经历？

这里列出我创建授权文件的步骤：

*   首先，我从使用示例代码 DrEdit 开始我的应用程序。[https://developers.google.com/drive/examples/python](https://developers.google.com/drive/examples/python)；
*   从代码中，我成功打开了新文件，并在我的谷歌驱动器上看到了它们。
*   从查看授权的应用程序中，我可以清楚地看到从我的应用程序创建的这些应用程序的授权使用应用程序 ID 签名。其他原始文件属于我，这些授权签名为“无”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T19:02:54.660

我遇到了同样的问题，不得不将范围从[https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file)更改为[https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive)，它可以完全访问所有驱动器文件，而不是不仅仅是由应用程序创建的。

# java - 如何在 google plus wall 上写帖子？

> ID：13697516
> 
> 赞同：-3
> 
> 时间：2012-12-04T06:48:40.723
> 
> 标签：java, oauth, oauth-2.0, google-plus

我为 Google+ 开发了一个使用 OAuth 2.0 身份验证的应用程序。我能够获取用户个人资料信息、图片、评论等，但我无法在 Google+ 墙上写消息或发帖。

我在哪里可以找到正确的 API 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:29:12.303

Google+ 目前不支持代表用户撰写帖子。

# php - 通过 Javascript 将 PHP 注入到 Value 属性中

> ID：13697518
> 
> 赞同：0
> 
> 时间：2012-12-04T06:48:46.930
> 
> 标签：php, javascript, jquery, html, code-injection

我正在尝试使用 javascript 将存储在 PHP $_SESSION 变量中的值注入到输入标记的“值”属性中。我能够在“value”属性中成功注入 PHP 代码，但存储的值不会出现在文本框中。我的代码如下：

HTML：

```
<input type="text" name="fname" value="" /> 
```

Javascript：

```
fields.eq(n).attr('value', "<?php echo $_SESSION['fname'] ; ?>"); 
```

问题是这***通常***会将变量的值`$_SESSION['fname']`放在输入框中。但事实*并非*如此。当单击按钮将 PHP 代码注入 value 属性时，HTML 如下所示：

```
<input type="text" name="fname" value="<?php echo $_SESSION['fname'] ; ?>" /> 
```

这就是我希望它看起来的样子，但在文本框中，它实际上显示的是 PHP 代码，而不是存储在`$_SESSION['fname']`.

有什么我想念的吗？这不应该工作吗？任何帮助表示赞赏！

![在此处输入图像描述](../Images/a409c775a82b55bbcba6a67586350583.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:08:38.120

Php 代码在请求时被解释，因此就浏览器/javascript 而言，您必须将“注入”的代码作为一个简单的字符串来处理。

你可以这样做，使用一个返回会话变量值的回调：

```
$('#someButton').click(function() {
     $.ajax({
           type: 'POST',
           url: <callbackUrl>,
           data: <params if any>
           }).done(function( msg ) {
                fields.eq(n).attr('value', msg);
                });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:25:45.000

PHP 是服务器端脚本，这意味着： PHP 将在服务器上执行。

JavaScript 是客户端脚本，这意味着： JavaScript 将由浏览器执行。

通常默认情况下，`.php`文件将由**服务器上**的 PHP 引擎处理，从而执行 PHP 脚本。结果将发送给客户端。这就是为什么当你有一个`.php`文件时，PHP 引擎会处理它们之间的事情，`<?php`而`?>`你不会在客户端中*看到*实际的 PHP 脚本。有时您可以配置 HTTP 服务器，以便`.html`PHP 引擎也处理文件。

对于其他文件，HTTP服务器（例如Apache）会直接将整个文件发送给客户端，不经过PHP引擎的处理，这样任何PHP脚本都*不会*被处理，直接发送给客户端。

现在您的问题是您试图将一些 PHP 放入一个 JavaScript 文件 ( `.js`) 中，并希望它会被执行，但实际上它*不会*。因此，当您尝试使用显示的 JavaScript 设置输入元素的值时，`<?php echo $_SESSION['fname'] ; ?>`将设置“文本”。

如果您将 JavaScript*放入*`.php`文件中，或者将 JavaScript 文件 ( `*.js`) 重命名为`*.php`，您将获得所需的值。

或者您可能可以在您的页面中添加一个额外的 JavaScript，使用您的 PHP 设置一个“全局”变量，然后在您的`.js`文件中使用该“全局变量”。
IE`window.myFname = <?php echo $_SESSION['fname'] ; ?>;`

* * *

根据您想要做什么，您可能需要选择如何设计。如果您只是想设置值，您可以只执行我提供的两个建议之一。如果您想*动态*获取值（即在需要时获取值），您会像其他人建议的那样使用 AJAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:15:23.300

假设您已经包含了[jQuery](http://jquery.com/)库。

**获取用户.php**

```
<?php echo $_SESSION['fname']; ?> 
```

对于您的**JavaScript**，

```
$(document).ready(function(){
    $.get("getUser.php", function(data) {
      fields.eq(n).attr('value', data);
    });
}); 
```

供参考，[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# objective-c - 以结尾零按升序对 NSArray 进行排序

> ID：13697520
> 
> 赞同：1
> 
> 时间：2012-12-04T06:48:50.890
> 
> 标签：objective-c, ios4, ios6, xcode4.3, xcode4.5

我正在使用排序描述符按升序对距离数组进行排序，但是很少有索引不包含距离，因此我在未找到距离的地方存储了更大的数字，这有助于我正确地对数组进行排序。但是在找不到距离的地方存储更大的数字并不是一个好方法。因此，我正在寻找一种解决方案，该解决方案在找到和未找到的位置按升序对距离进行排序，因此应该在结束索引中对其进行排序，而无需在 NSArray 中硬编码更大的数字。我的排序代码如下。

```
NSLog(@"%@", self.distanceArr);  // self.distanceArr is a Mutable Array
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"OnlyDistance" ascending:YES];
    NSArray *sort = [self.distanceArr mutableCopy];
    NSArray *sortedArray = [sort sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    NSLog(@"Sorted %@",sortedArray);
    NSLog(@"%d",[sortedArray count]);

    self.sortedBusinessDetArr = [sortedArray mutableCopy];

    [self.searchTbl reloadData]; 
```

我的数组如下

```
(
{
    OnlyDistance = "10000.0";  ///   Hard Coded Value where distance is not found.
},
    {
    OnlyDistance = "13089.53";
},
    {
    OnlyDistance = "12991.81";
}, 
{
    OnlyDistance = "10000.0";  ///   Hard Coded Value where distance is not found.
}, 
{
    OnlyDistance = "10000.0";  ///   Hard Coded Value where distance is not found.
},
    {
    OnlyDistance = "13089.53";
} 
```

)

OnlyDistance 是存储浮点值的 NSNumber。如果我存储的 0.0 是 NSNumber ，那么它也按升序排序，顶部有零。而且我希望将值保持为零或未找到结果排序为底部，并且只有保存值的索引才应该在顶部。我不能按降序排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:15:40.027

像这样做

```
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"self" ascending:NO];
[self.distanceArr sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

# asp.net-mvc - 如何在 jqgrid 中创建两个页脚行

> ID：13697523
> 
> 赞同：6
> 
> 时间：2012-12-04T06:48:53.467
> 
> 标签：asp.net-mvc, jqgrid, asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET WEB API 开发 jqgrid。

我想在 jqgrid 的页脚中添加两行。

因此，在网上进行了一些搜索，将我带到了这个链接（2010），上面写着“这是不可能的”，我在想，因为答案是 2010 年，现在可能是一些事情/一些解决方法可能已经为此成为可能.

**我想在页脚中显示什么？**

我想显示两行

*   当前页面预设数据总计
*   所有页面中存在的数据的总计

我能够传递数据并读取数据，问题是如何使用这些数据并在 jqgrid 中创建两个页脚行。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T12:35:15.920

我发现这个问题很有趣，所以我创建[了一个演示](http://www.ok-soft-gmbh.com/jqGrid/TwoFooters.htm)，演示了两行页脚的可能实现：

![在此处输入图像描述](../Images/1864d2e1d803bee52ad19fbbfe84a208.png)

主要思想是在已经存在标准页脚的表格中添加第二行。为了消除 jqGrid 代码的其他部分可能出现的问题，我`footrow`将自定义行中的类名替换为`myfootrow`. 为了使第二个页脚具有与原始图腾相同的 CSS 设置，我包含了`.ui-jqgrid tr.footrow td`from的副本，并`ui.jqgrid.css`具有相同的定义`.ui-jqgrid tr.myfootrow td`：

```
.ui-jqgrid tr.myfootrow td {
    font-weight: bold;
    overflow: hidden;
    white-space:nowrap;
    height: 21px;
    padding: 0 2px 0 2px;
    border-top-width: 1px;
    border-top-color: inherit;
    border-top-style: solid;
} 
```

您将在下面找到完整的代码

```
footerrow: true,
loadComplete: function () {
    var $this = $(this),
        sum = $this.jqGrid("getCol", "amount", false, "sum"),
        $footerRow = $(this.grid.sDiv).find("tr.footrow"),
        localData = $this.jqGrid("getGridParam", "data"),
        totalRows = localData.length,
        totalSum = 0,
        $newFooterRow,
        i;

    $newFooterRow = $(this.grid.sDiv).find("tr.myfootrow");
    if ($newFooterRow.length === 0) {
        // add second row of the footer if it's not exist
        $newFooterRow = $footerRow.clone();
        $newFooterRow.removeClass("footrow")
            .addClass("myfootrow ui-widget-content");
        $newFooterRow.children("td").each(function () {
            this.style.width = ""; // remove width from inline CSS
        });
        $newFooterRow.insertAfter($footerRow);
    }
    $this.jqGrid("footerData", "set", {invdate: "Total (page):", amount: sum});

    // calculate the value for the second footer row
    for (i = 0; i < totalRows; i++) {
        totalSum += parseInt(localData[i].amount, 10);
    }
    $newFooterRow.find(">td[aria-describedby=" + this.id + "_invdate]")
        .text("Grand Total:");
    $newFooterRow.find(">td[aria-describedby=" + this.id + "_amount]")
        .text($.fmatter.util.NumberFormat(totalSum, $.jgrid.formatter.number));
} 
```

在代码中，我在列`invdate`和`amount`页脚中设置了附加信息。

# php - cakephp 找到与此查询等效的计数

> ID：13697524
> 
> 赞同：1
> 
> 时间：2012-12-04T06:48:57.613
> 
> 标签：php, cakephp

```
SELECT COUNT(*) FROM `users` where usergroup_id = 4 AND studio_id = 380 AND userstatus_id = 1 
```

在此查询中，我得到的结果`4`是我的预期输出，但是在执行此查询时：

```
$this->User->find('count',array('conditions'=>array(
                                        'User.studio_id'=>380,
                                        'User.usergroup_id'=>4,
                                        'User.userstatus_id'=>1))) 
```

我得到的结果`8`

你认为这里的问题是什么？感觉我的第二个代码是错误的。

我是 cakePHP 的新手。

您的帮助将不胜感激和奖励！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:04:50.573

查询和 CakePHP`find('count', ...`应该产生相同的东西。可能的区别（根据一些评论）是您的`$recursive`级别（请参阅[CakePHP recursive](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)）。

我非常喜欢设置：

```
public $recursive = -1; 
```

在您的 AppModel 中 - 然后您不必再担心它，因为将其保留为 -1 是 IMO 的最佳实践。然后，如果您想检索其他关联的模型数据，只需使用[CakePHP 的 Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。

如果您不想在整个站点中将其设置为 -1，只需在查询之前将其设置为：

```
$this->User->recursive = -1;
$this->User->find('count',array('conditions'=>array(
    'User.studio_id'=>380,
    'User.usergroup_id'=>4,
    'User.userstatus_id'=>1
))); 
```

**站点注释：**设置`$recursive`为 -1 以外的任何值都应该是一个危险信号。这是一个很酷的概念，但在实践中，随着站点的增长，它会给您带来很多麻烦。像上面建议的那样在 AppModel 中将它设置为 -1，然后忘记它甚至存在。

# sql - sql查询检查输入值是否存在于值范围之间

> ID：13697527
> 
> 赞同：2
> 
> 时间：2012-12-04T06:49:06.647
> 
> 标签：sql, sql-server, sql-server-2008

我在 mssql 数据库中工作。我有以下情况，

我在行中有值

2-5,10-12,67-89....

我需要一个 sql 查询来仅获取至少一个包含用户输入范围的行。

例如，如果用户输入是 4，那么应该至少有一个范围包含 4，例如 (1-5)。

是否可以通过单个查询来实现相同的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:59:07.383

试试这个：

```
DECLARE @numberToFind INT = 4;
;WITH CTE
AS
(
    SELECT 
      arange,
      SUBSTRING(arange, 1, CHARINDEX('-', arange,1) - 1) "From",
      SUBSTRING(arange, 
                CHARINDEX('-', arange,1) + 1, 
                          LEN(arange) - CHARINDEX('-', arange,1) + 1) "To"
    FROM @ranges
) 
SELECT arange
FROM CTE
WHERE @numberToFind BETWEEN "From" AND "To"; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6919)

如果这些范围存储为单个 varchar 字符串，那么您必须首先解析这些逗号分隔的范围，如下所示：

```
DECLARE @ranges VARCHAR(100) = ('2-5,10-12,67-89');
declare @numberToFind INT = 4;

DECLARE @Xml xml =  CONVERT(xml,
                            '<root><s>' + 
                            REPLACE(@ranges, ',', '</s><s>') + 
                            '</s></root>');

;WITH ParsedRanges
AS
(
    SELECT arange = T.c.value('.','varchar(20)')
    FROM @Xml.nodes('/root/s') T(c)
), CTE
AS
(
    SELECT 
      arange,
      SUBSTRING(arange, 1, CHARINDEX('-', arange,1) - 1) "From",
      SUBSTRING(arange, 
                CHARINDEX('-', arange,1) + 1, 
                LEN(arange) - CHARINDEX('-', arange,1) + 1) "To"
    FROM ParsedRanges
) 
SELECT arange
FROM CTE
WHERE @numberToFind BETWEEN "From" AND "To"; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6924)

# bash - 当我将任何命令传送到 telnet 会话时会发生什么，为什么会话会关闭

> ID：13697529
> 
> 赞同：2
> 
> 时间：2012-12-04T06:49:12.063
> 
> 标签：bash, shell, telnet

当我将任何命令传送到 telnet 会话时会发生什么，为什么会话会关闭。我怎样才能给出一个可以是进程而不是关闭连接的命令。

我在尝试

回声“xvz” | telnet 0 abc Trying 0.0.0.0... 连接到 0。转义字符是 '^]'。

哪个终止会话而不是进程 xyz ，我还尝试过什么其他方式

telnet 0 xyz < test
Trying 0.0.0.0... 连接到 0。转义字符是 '^]'。外部主机关闭到 0 的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:51:22.037

telnet 不处理标准输入和标准输出。

您应该检查其他程序，例如“期望”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T14:54:32.860

尝试`eval`：

```
eval "{ echo; 
        sleep 5;
        echo 'xvz'; 
        sleep 10; }" | telnet your_host 
```

使用`sleep`s 保持打开连接；尝试不同的延迟时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-07T12:32:51.833

`echo`您要发送的命令，然后用于`cat`保持连接打开。

```
{ echo "commands to send"; cat -; } | telnet localhost 8080 
```

连接打开时，您可以像往常一样键入命令，但不能将转义字符发送到 telnet。

要关闭连接，请按 Ctrl+C。

# java - 如何将 TextView 添加到当前布局，以便填充我的微调器？

> ID：13697531
> 
> 赞同：0
> 
> 时间：2012-12-04T06:49:22.793
> 
> 标签：java, android, android-layout

这是我想要得到的布局。只要我实际上不尝试填充我的微调器，一切都加载得很好。根据我在搜索中发现的内容和日志，我需要将 TextView 与 ArrayAdapter 一起使用。在保留当前布局的同时，我究竟是如何做到这一点的——微调器和顶部的提交按钮以及用于在微调器下方返回结果的 ListView 是我无法实现的。

这是我的 onCreate 方法。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.master);
        DBHelper db = new DBHelper(this);
        List<Stations> st = db.getAllStations();
        List<CharSequence> stations = new ArrayList<CharSequence>();
        setList(4, 9);
        for (int i = 0; i < st.size(); i++)
        {
            stations.add(st.get(i).getStation());
        }
        ListView list = (ListView) findViewById(R.id.list);
        Spinner s1 = (Spinner) findViewById(R.id.spinnerStart);
        Spinner s2 = (Spinner) findViewById(R.id.spinnerEnd);

        ArrayAdapter<CharSequence> SimpleSpinner1 = new ArrayAdapter<CharSequence>(this, R.layout.spinner, R.id.textView1);
        ArrayAdapter<CharSequence> SimpleSpinner2 = new ArrayAdapter<CharSequence>(this, R.layout.spinner, R.id.textView1);
        SimpleAdapter nSchedule = new SimpleAdapter(this, departures, R.layout.row,
            new String[] {"train", "from", "to"}, new int[] {R.id.TRAIN_CELL, R.id.FROM_CELL, R.id.TO_CELL});
        for (CharSequence c : stations)
        {
            SimpleSpinner1.add(c);
            SimpleSpinner2.add(c);
        }
    list.setAdapter(nSchedule);
    s2.setAdapter(SimpleSpinner2);
    s1.setAdapter(SimpleSpinner1);

    } 
```

大师.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Spinner
        android:id="@+id/spinnerStart"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

    <Spinner
        android:id="@+id/spinnerEnd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/spinnerStart" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/spinnerEnd"
        android:text="Button" />

    <include
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        layout="@layout/listview" />

</RelativeLayout> 
```

微调器.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="30dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView1"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:54:07.670

试试这个

```
// set id for spinner
spinner2 = (Spinner) findViewById(R.id.spinner2);
// prepare a list 
List<String> list = new ArrayList<String>();
    list.add("list 1");
    list.add("list 2");
    list.add("list 3");
// set adapter for spinner
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// set adapter to spinner   
spinner2.setAdapter(dataAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:01:59.063

而不是 `R.id.spinnerStart`/ `R.id.spinnerEnd`你需要传递一个 textView

编辑：

微调器 spinner1 = (Spinner)findViewById(R.id.spinner1); ArrayAdapter 适配器 = new ArrayAdapter(this, R.layout.spinner_item, R.id.textView1); spinner1.setAdapter（适配器）；

textView1 存在于 spinner_item 布局中。希望这很清楚

# android - 在 android 的显示中以随机位置连续移动图像

> ID：13697533
> 
> 赞同：2
> 
> 时间：2012-12-04T06:49:29.633
> 
> 标签：android, android-layout, animation, android-intent, android-animation

谁能帮我做到这一点。我正在尝试构建一个 android 应用程序，但介于两者之间。

我使用以下代码移动图像。iv 是 ImageView 对象

```
moveImage = new TranslateAnimation( 0, xDest, 0, -yDest);
moveImage.setDuration(1000);
moveImage.setFillAfter( true );
iv.startAnimation(moveImage); 
```

代码：

```
public class gameLogic extends Activity 
{
ImageView image;
TranslateAnimation moveImage;

public void onCreate(Bundle icicle) 
{
    super.onCreate(icicle);
    setContentView(R.layout.game_logic);
    imageMoveRandom(imageList(image,0));
}

ImageView imageList(ImageView v,int i)
{
    v = (ImageView) findViewById(R.id.rabbit);
    int imgId;
    int j = i;

    TypedArray imgs = getResources().obtainTypedArray(R.array.random_imgs);
    //get resourceid by index

    imgId = imgs.getResourceId(j, 0);
    // or set you ImageView's resource to the id
    v.setBackgroundResource(imgId);

    return v;

}

void imageMoveRandom(ImageView iv)throws NotFoundException
{
    DisplayMetrics dm = new DisplayMetrics();
    this.getWindowManager().getDefaultDisplay().getMetrics( dm );

    int xDest = dm.widthPixels/2;
    int yDest = dm.heightPixels/2;

//      Toast.makeText(gameLogic.this, dm.widthPixels, Toast.LENGTH_SHORT).show();
        //      Toast.makeText(this, dm.heightPixels, 2000).show();

        moveImage = new TranslateAnimation( 0, xDest, 0, -yDest);
        moveImage.setDuration(1000);
        moveImage.setFillAfter( true );
        iv.startAnimation(moveImage);
        //moveImage.reset();
    }
} 
```

以上不是完整的代码..但可能有助于参考的部分。

但我想在随机位置但在 android 显示器内连续移动图像。任何人都可以提出解决方案。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-04T07:11:13.930

```
 class BitmapView extends View
 {
   changingX=10;
   changingY=10;
   public BitmapView(Context context) {
        super(context);
   }
   @Override
   public void onDraw(Canvas canvas) {
   Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.yourImageName);
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(bmp, changingX,changingY, null);
    changingX=changingX+5;
    changingY=changingY+10;
    invalidate();
   }
} 
```

尝试这个

# icalendar - 只有部分 Gmail 会打开 iCalendar 邀请

> ID：13697539
> 
> 赞同：2
> 
> 时间：2012-12-04T06:49:53.877
> 
> 标签：icalendar

我有一个问题，只有一些 gmail 打开/识别我的应用程序发送的 .ics 文件。似乎它适用于常规 gmail 帐户，但 google 企业帐户电子邮件不会自动打开邀请或自动将其放在用户的日历上。此外，邀请不会在某些手机上自动打开。

```
function sendevent($to, $from, $fromname, $subject, $body, $method, $start, $end, $id, $app_date, $location, $status){
    $company=Company::find_by_id($_SESSION['compid']);
    $tz = $company->timezone();
    if(!empty($tz)){$tzid = ";TZID=".$tz;}else{$tzid = ";TZID=America/Chicago";}
    $mail = new PHPMailer();
    $mail->FromName = $fromname;
    $mail->From = $from;
    $mail->AddAddress($to);
    $mail->Subject = $subject;

    $vcal = "BEGIN:VCALENDAR\n";
    $vcal .= "PRODID:-//SiteArmorInc//ContractorsCloud.com//EN\n";
    $vcal .= "VERSION:2.0\n";
    $vcal .= "CALSCALE:GREGORIAN\n";
    $vcal .= "METHOD:REQUEST\n";
    $vcal .= "BEGIN:VEVENT\n";
    $vcal .= "DTSTART".$tzid.":".date("Ymd\THi00", strtotime($start))."\n";
    $vcal .= "DTEND".$tzid.":".date("Ymd\THi00", strtotime($end))."\n";
    $vcal .= "DTSTAMP".$tzid.":".date("Ymd\THi00", time())."\n";
    $vcal .= "ORGANIZER;CN=".$from.":mailto:".$from."\n";
    $vcal .= "UID:".$id."\n";
    $vcal .= "ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=ACCEPT;RSVP=TRUE;CN=".$to.";X-NUM-GUESTS=0:mailto:".$to."\n";
    $vcal .= "CREATED".$tzid.":".date("Ymd\THi00", strtotime($app_date))."\n";
    $vcal .= "DESCRIPTION:".str_replace("\n", "\N",str_replace(",","\,",$body))."\n";
    $vcal .= "LOCATION:".str_replace(",","\,",$location)."\n";
    $vcal .= "LAST-MODIFIED".$tzid.":".date("Ymd\THi00", time())."\n";
    $vcal .= "SEQUENCE:0\n";
    $vcal .= "STATUS:CONFIRMED\n";
    $vcal .= "SUMMARY:".str_replace(",","\,",$subject)."\n";
    $vcal .= "TRANSP:OPAQUE\n";
    $vcal .= "END:VEVENT\n";
    $vcal .= "END:VCALENDAR\n";

    $mail->AddStringAttachment($vcal, "ccloud_invite.ics", "8bit", "text/calendar; charset=utf-8; method=REQUEST");
    $mail->Body = $body;
    if($mail->Send()){return true;}
} 
```

有任何想法吗？

# java - 如何获取 VK 常量的键名？

> ID：13697540
> 
> 赞同：0
> 
> 时间：2012-12-04T06:49:55.123
> 
> 标签：java, keyevent

比如一些神奇的功能

```
public String function(int key) {} 
```

以便

`function(KeyEvent.VK_A)`会回来`"A"`

`function(KeyEvent.VK_DOWN)`会回来`"DOWN"`

`function(KeyEvent.VK_COMMA)`会回来`"COMMA"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:55:32.643

没关系...我发现`public static String getKeyText(int keyCode)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:55:43.330

您可以`getKeyText(int keyCode)`在您的`KeyEvent`

# facebook - 禁用 Facebook 上的评论弹出按钮

> ID：13697543
> 
> 赞同：3
> 
> 时间：2012-12-04T06:50:13.330
> 
> 标签：facebook, facebook-like

我想隐藏 Facebook 喜欢完成后出现的评论弹出窗口。我试过给css

```
.-cx-PRIVATE-pluginCommentFlyout__fullButton {
    display: none !important;
    } 
```

但这似乎不起作用，因为我假设 css 是通过 jquery 动态添加的。如何隐藏此评论框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T08:02:04.157

点赞按钮后，评论框不再出现。

1.  前往[Facebook 点赞插件](https://developers.facebook.com/docs/reference/plugins/like/)
2.  输入您实现“赞”按钮的详细信息
3.  点击“获取代码”按钮
4.  您可以选择 4 个部分（HTML5、XFBML、IFRAME、URL），
    选择 IFRAME 并从 IFRAME 部分复制插件代码。

> 摘要：不要从 HTML5 部分复制插件代码，而是从 IFRAME 部分复制一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:15:17.587

这已经在其他一些线程中得​​到了回答：

[Facebook Like Button - 如何禁用评论弹出框？](https://stackoverflow.com/questions/10742492/facebook-like-button-how-to-disable-comment-pop-up-box)

[Facebook Like 按钮 - 如何禁用评论弹出？](https://stackoverflow.com/questions/3247855/facebook-like-button-how-to-disable-comment-pop-up)

有些答案可能已经被弃用，但值得一试。几个月前对我有用的一种解决方案是使用 iframe-version 和小于 400px 的宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T12:54:56.917

似乎所有旧版本都不再工作了。那个评论框总是出现在我的 fb like 按钮上。

# jquery - 当达到 textarea 的最大高度时，不允许用户输入

> ID：13697544
> 
> 赞同：1
> 
> 时间：2012-12-04T06:50:13.470
> 
> 标签：jquery, html

我有代码，它检查在 textarea 中输入的字符数，然后在使用时停止输入 -`$(this).val($(this).val().substr(0,charsLimit));`但这里的问题是我希望用户在达到 textarea 的最大高度而不是在达到最大字符时使用此方法。我不明白该怎么做。帮助表示赞赏。

代码 ：

```
 var countHeight = 1;

        $(dividfortextbox).keypress(function(e) {
     var v = $(this).val();
     var vl = v.replace(/(\r\n|\n|\r)/gm,"").length; 

            if ((e.keyCode || e.which) == 13 && (hIncr * iheight) < checkdivheight && countHeight <= 15) {
            $(this).parent(dividfortext).css('height', (hIncr * iheight) + 'px');
            vWidth = 0;
            countHeight++;
            hIncr++;                

            }

            if (parseInt(vl/count) == chars && countHeight<= 15) {
            $(this).parent(dividfortext).css('height', (hIncr * iheight) + 'px');
            vWidth = 0;
            $(this).val(v + '\n');
            makeDivWidthStop = true;                
            count++;
            countHeight++;
            hIncr++;
            }    

    else {                                      
        vWidth = (vWidth+1); 
        if(vWidth * widthIncreaseSize > tWidth)
            tWidth = vWidth * widthIncreaseSize;

        if (tWidth < checkdivwidth && parseInt(vl/count) <= chars ) {

            $(this).parent(dividfortext).css('width', (tWidth) + 'px');
            divwidth=tWidth;
            }
        }

        if(countHeight > 15){           
        ??? What code should i apply here..?? ???
        } 

}); 
```

# php - 将url字符串转换为数组php

> ID：13697549
> 
> 赞同：0
> 
> 时间：2012-12-04T06:50:38.570
> 
> 标签：php, jquery, arrays

我使用 jquery ajax 作为数据数组传递以下结构

```
 $_POST['data'][0] = 'results[]=stein&results[]=schere&results[]=stein&results[]=schere&results[]=stein'

 $_POST['data'][1] = '9b2c1230757e4354b384c5c93e8e8f26' 
```

我怎么说 php 解释`$_POST['data'][0]`为数组。我想得到的是`array(1 =>'stein', 2=>'schere'...)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:54:47.110

使用[`parse_str()`](http://php.net/manual/en/function.parse-str.php)——将字符串解析为变量

```
$str = "results[]=stein&results[]=schere&results[]=stein&results[]=schere&results[]=stein";
parse_str($str, $output);

echo $output['results'][0]; // stein 
```

实时[**键盘**](http://codepad.org/rqgLuepL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:57:45.693

使用`parse_str()`..

```
parse_str($_POST['data'][0]);

print_r($results);
echo $results[0];  //stein;
echo $results[1];  //schere; 
```

# metrics - 当石墨的碳聚合器可以做同样的工作时，为什么要使用 statsd？

> ID：13697553
> 
> 赞同：69
> 
> 时间：2012-12-04T06:50:47.683
> 
> 标签：metrics, graphite, statsd

我一直在探索用于显示来自多个服务器的指标的 Graphite 绘图工具，似乎“推荐”的方式是首先将所有指标数据发送到 StatsD。StatsD 聚合数据并将其发送到石墨（或者更确切地说，碳）。

就我而言，我想对跨服务器的指标进行简单的聚合，例如求和和平均，并在石墨中绘制。Graphite 带有一个碳聚合器，可以做到这一点。

StatsD 甚至不提供我所说的那种聚合。

我的问题是 - 我应该在我的用例中使用 statsd 吗？我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-04T23:46:25.580

1.  StatsD 通过 UDP 运行，这消除了 carbon-aggregator.py 响应缓慢和在应用程序中引入延迟的风险。换句话说，松散耦合。

2.  StatsD 支持入站指标的采样，当您不希望聚合器采用 100% 的所有数据点来计算描述性统计数据时，这很有用。对于大容量代码部分，通常使用 0.5%-1% 的采样率，以免 StatsD 过载。

3.  StatsD 拥有[广泛的客户端](https://github.com/etsy/statsd/wiki)支持。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-03-26T23:05:40.713

**tldr：**如果您想查看特定于服务器的总和或平均值，您可能需要 statsd （或[carbon-c-relay ）。](https://github.com/grobian/carbon-c-relay)

**carbon aggregator**旨在将来自**多个指标**的值聚合到一个输出指标中，通常是为了提高图形渲染性能。**statsd**旨在在单个指标中聚合**多个数据点**，否则石墨仅存储在最小存储分辨率中报告的最后一个值。

**statsd 示例：** 假设您的石墨 storage-schemas.conf 文件的最短保留时间为 10 秒（默认），并且您的应用程序每 10 秒向*services.login.server1.count*发送大约 100 个数据点，值为 1。如果没有 statsd，graphite 只会存储每 10 秒存储桶中收到的最后一个计数。在收到第 100 条消息后，其他 99 个数据点将被丢弃。但是，如果您将 statsd 放在应用程序和石墨之间，那么它会将所有 100 个数据点加在一起，然后再将总数发送到石墨。因此，如果没有 statsd，您的图表仅指示在 10 秒间隔内*是否发生了登录。*使用 statsd，它表示*有多少*在该时间间隔内发生了登录。（[例如](https://stackoverflow.com/questions/7095998/accumulation-of-value-in-graphite)）

**碳聚合器示例：**假设您有 200 个不同的服务器报告 200 个单独的指标（*services.login.server1.response.time*、*services.login.server2.response.time*等）。在您的操作仪表板上，您使用此石墨查询显示所有服务器的平均值图表：weightedAverage(services.login.server*.response.time, services.login.server*.response.count, 2)。不幸的是，渲染这个图需要 10 秒。要解决此问题，您可以添加碳聚合器规则来预先计算所有服务器的平均值并将值存储在新指标中。现在您可以更新仪表板以简单地提取单个指标（例如*services.login.response.time*）。新指标几乎立即呈现。

**旁注：**

1.  storage-aggregation.conf 中的聚合规则适用于 storage-schemas.conf 中的所有存储间隔，*除了*每个保留字符串的第一个（最小）保留期。可以使用碳聚合器来聚合第一个保留期的指标内的数据点。不幸的是，aggregation-rules.conf 使用“blob”模式而不是正则表达式模式。因此您需要为每个路径深度和聚合类型添加单独的 aggregation-rules.conf 文件条目。statsd 的优点是发送度量的客户端可以指定聚合类型，而不是在度量路径中对其进行编码。无论度量路径深度如何，您都可以灵活地动态添加新度量。如果您想配置 carbon-aggregator 在添加新指标时自动进行类似 statsd 的聚合，您的 aggregation-rules.conf 文件将如下所示：

    ```
    <n1>.avg (10)= avg <n1>.avg$
    <n1>.count (10)= sum <n1>.count$
    <n1>.<n2>.avg (10)= avg <n1>.<n2>.avg$
    <n1>.<n2>.count (10)= sum <n1>.<n2>.count$
    <n1>.<n2>.<n3>.avg (10)= avg <n1>.<n2>.<n3>.avg$
    <n1>.<n2>.<n3>.count (10)= sum <n1>.<n2>.<n3>.count$
    ...
    <n1>.<n2>.<n3> ... <n99>.count (10)= sum <n1>.<n2>.<n3> ... <n99>.count$ 
    ```

    注意：石墨 0.10+（当前预发布）中不需要尾随的“$”[这是 github 上的相关补丁，这是关于](https://github.com/graphite-project/carbon/commit/f80d086073bf549589ee5727241911c60410ac09)[聚合规则](http://graphite.readthedocs.org/en/latest/config-carbon.html#aggregation-rules-conf)的标准文档

2.  weightedAverage 函数是石墨 0.10 中的新功能，但通常只要您的负载均匀平衡，averageSeries 函数就会给出非常相似的数字。如果您有一些服务器速度较慢且服务的请求较少，或者您只是追求精确度，那么您仍然可以使用石墨 0.9 计算加权平均值。你只需要像这样构建一个更复杂的查询：

    ```
    divideSeries(sumSeries(multiplySeries(a.time,a.count), multiplySeries(b.time,b.count)),sumSeries(a.count, b.count)) 
    ```

3.  如果 statsd 在客户端机器上运行，这也可以减少网络负载。尽管理论上，您也可以在客户端运行 carbon-aggregator。但是，如果您使用 statsd 客户端库之一，您还可以使用采样来减少应用程序计算机 cpu 的负载（例如创建环回 udp 数据包）。此外，statsd 可以对单个输入指标（总和、平均值、最小值、最大值等）自动执行多个不同的聚合

4.  如果您在每个应用服务器上使用 statsd 来聚合响应时间，然后使用 carbon 聚合器在石墨服务器上重新聚合这些值，您最终会得到应用服务器而不是请求加权的平均响应时间。显然，这只对使用 mean 或 top_90 聚合规则进行聚合很重要，而不是 min、max 或 sum。此外，仅当您的负载不平衡时才有意义。举个例子：假设你有一个由 100 台服务器组成的集群，突然 1 台服务器发送了 99% 的流量。因此，该 1 台服务器上的响应时间增加了四倍，但在其他 99 台服务器上保持稳定。如果您使用客户端聚合，您的整体指标只会上升约 3%。但是，如果您在单个服务器端碳聚合器中进行所有聚合，那么您的整体指标将上升约 300%。

5.  [carbon-c-relay](https://github.com/grobian/carbon-c-relay)本质上是用 c 编写的 carbon-aggregator 的替代品。它改进了性能和基于正则表达式的匹配规则。结果是您可以在同一个简单的基于正则表达式的配置文件中进行 statsd 样式的数据点聚合和 carbon-relay 样式的度量聚合以及多层聚合等其他简洁的东西。

6.  如果您使用[cyanite](http://cyanite.io/)后端而不是 carbon-cache，那么 cyanite 将在内存中（从[版本 0.5.1](https://github.com/pyr/cyanite/pull/80)开始）或在读取时（在版本 <0.1.3 架构中）为您执行内部度量平均。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-18T20:08:13.283

如果 Carbon 聚合器提供您需要的一切，那么没有理由不使用它。它有两个基本的聚合函数（求和和平均），而且这些确实没有包含在 StatsD 中。（我不确定历史，但也许 Carbon 聚合器已经存在并且 StatsD 作者不想复制功能？）Carbon 也支持通过 UDP 接收数据，所以你唯一会错过的就是采样，如果您通过平均来聚合，这并不重要。

StatsD 通过添加额外的聚合值来支持不同的度量类型（例如，对于计时器：平均值、下限、上限和上限 Xth 百分位，...）。我喜欢它们，但如果你不需要它们，Carbon 聚合器也是一个不错的选择。

我一直在查看 Carbon 聚合器和 StatsD 的源代码（以及[Bucky](https://github.com/cloudant/bucky/)，Python 中的 StatsD 实现），它们都非常简单，我不会担心任何一个选择的资源使用或性能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-11T19:30:33.533

看起来碳聚合器和 statsd 支持不相交的功能集：

*   statsd 支持速率计算和求和，但不支持平均值
*   碳聚合器支持平均但不支持速率计算。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-11T13:49:44.917

因为石墨具有最小分辨率，所以您不能在定义的时间间隔内为同一度量保存两个不同的值。StatsD 通过预先聚合它们来解决这个问题，而不是说“1 个用户现在注册”和“1 个用户现在注册”它说“2 个用户注册”。

另一个原因是性能，因为：

1.  您通过 UDP 将数据发送到 StatsD，这是一种即发即忘协议，无状态，速度更快
2.  StatsD etsy 的实现在 NodeJS 中，这也大大提高了性能。

# android-pay - 谷歌钱包 DOM 异常 18

> ID：13697564
> 
> 赞同：1
> 
> 时间：2012-12-04T06:51:44.220
> 
> 标签：android-pay

Google 电子钱包似乎卡在加载屏幕并且不显示表单

```
google.load('payments', '1.0', {
             packages: ['sandbox_config'],
             callback: cbk}) 
```

回调是

```
goog.payments.inapp.buy({
    jwt: getToken,
    success: function() {
        console.log("success");
    },
    failure: function() {
        console.log("fail");
    }
}); 
```

控制台显示

```
Uncaught Error: SecurityError: DOM Exception 18 5F00.cache.js:23
com_google_checkout_inapp_client_gwt_init_init 
```

这是在谷歌浏览器上 - 版本 25.0.1337.0 开发。它适用于演示页面，但不适用于我自己的页面。

**编辑**：已安装 Google Chrome Canary - 版本 25.0.1347.2 canary

似乎不是问题，在 Canary 中完美运行 - 这只是 Google Chrome 开发故障还是其他人看到过这个？

**编辑 2**：

现在它在金丝雀中也不起作用（1348） 我还在 Chrome 稳定版中进行了测试，它可以工作。

实际上它似乎与浏览器版本无关，因为重新安装 Canary 并擦除 Application Support 数据文件使其再次工作

有没有办法以某种方式通过来自 Google 的电子邮件获得支持？我知道这是谷歌，他们不与人交谈，但也许有什么办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:44:51.580

根据您的经验，这似乎是 Chrome 开发故障。

旁注：我不确定在开发/金丝雀版本中测试您的应用程序是否是捕获潜在错误的最佳方法。您是否也在 IE/FF/Chrome 稳定版中进行测试？

# java - 如何使用通配符 ip 0.0.0.0 获取 InetAddress？

> ID：13697566
> 
> 赞同：6
> 
> 时间：2012-12-04T06:51:50.247
> 
> 标签：java, pmd

`InetAddress`不提供任何静态方法或构造函数来获取`InetAddress`通配符 IP 0.0.0.0 。唯一的办法是`InetAddress.getByName("0.0.0.0")`

`AvoidUsingHardCodedIP`但是如果我们通过硬编码的 IP，PMD 会给出。有没有办法`InetAddress`使用通配符 IP 但无需对 IP 进行硬编码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-26T22:59:58.813

我知道这有点老了。但我处于同样的情况：

```
InetAddress wildCard = new InetSocketAddress(0).getAddress(); 
```

成功了。主要构造函数

```
public InetSocketAddress(InetAddress addr, int port) 
```

将被调用

```
InetAddress.anyLocalAddress() 
```

不需要端口，所以我选择了 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T19:14:05.053

使用`InetAddress.getByAddress(new byte[] {0,0,0,0})`将起作用。但不要忘记检查 listen on `ipv4`or `ipv6`。

# java - 如何在 linux 中为我的应用程序创建安装程序

> ID：13697568
> 
> 赞同：1
> 
> 时间：2012-12-04T06:52:04.163
> 
> 标签：java, installation

我创建了一个 java 应用程序（jar 文件）并希望为我的应用程序安装包，其中包含以下项目：

1.  jre1.7.9
2.  mysql
3.  我的字体

如何为我的应用程序创建安装程序 所有 Linux 发行版上都可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:08:41.027

可能您可以从终端执行 .jar 文件。此[链接](https://askubuntu.com/questions/101746/how-can-i-execute-a-jar-file-from-the-terminal)可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:12:06.323

从运行 IzPack-install.jar下载[izpack 。](http://izpack.org/downloads/)你的电脑上应该安装了jdk。安装后打开安装它的文件夹。

请参阅本[教程](http://www.imrantariq.com/blog/?p=89)。

# iphone - 在 iOS 6 设置中登录

> ID：13697569
> 
> 赞同：0
> 
> 时间：2012-12-04T06:52:09.393
> 
> 标签：iphone, facebook, ios6

在装有 iOS 6 的 iPhone 中，我注意到您可以直接在 Facebook 的 iOS 设置中登录。这可以在普通应用程序中完成吗？

![iOS 6 Facebook 应用程序](../Images/3808ec8f332aae9731dffb2c27139e8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:34:20.760

据我所知 - 没有。Apple 在 iOS 6 中添加了 Facebook 支持，这就是为什么可以在“设置”中找到 Facebook 登录页面的原因。

# objective-c - 从Superview中删除时UITextView不会消失

> ID：13697571
> 
> 赞同：1
> 
> 时间：2012-12-04T06:52:26.967
> 
> 标签：objective-c, ios, uitextview

我有两个`UITextView`s`self.instructions`和`self.textView`，它们应该根据用户选择的内容交替出现。

我创建一个`self.textView`这样的：

```
-(void)createSpaceToWrite
{
  [self.instructions removeFromSuperview];
  [self.bar removeFromSuperview];
  [self createNavigationBar:@"Compose" selector:@"displayScreen" withDone:NO];  //This adds a UINavigationBar to the view.

  if (!self.textView)
  {
    self.textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 60, 280, 150)];
  }

  self.textView.backgroundColor = [UIColor whiteColor];
  self.textView.font = [UIFont fontWithName:@"Helvetica Neue" size:14];
  self.textView.text = @"";
  [self.view addSubview:self.textView];
  self.textView.delegate = self;
} 
```

然后我`self.instructions`像这样创建：

```
-(void)haikuInstructions
{
  [self.textView removeFromSuperview];
  [self.bar removeFromSuperview];
  [self createNavigationBar:@"Compose" selector:@"displayScreen" withDone:NO];

  if (!self.instructions)
  {
    self.instructions = [[UITextView alloc] initWithFrame:CGRectMake(10, 125, [[UIScreen mainScreen] bounds].size.width - 10, [[UIScreen mainScreen] bounds].size.height)];
  }

  self.instructions.backgroundColor=[UIColor clearColor];
  self.instructions.text = @"Text of instructions";
  self.instructions.editable=NO;
  [self.view addSubview:self.instructions];
  [self resignFirstResponder];
} 
```

`self.instructions`用户从背景图像开始显示。美好的。

用户切换。说明文本消失，取而代之的是可编辑`self.textView`的白框。美好的。

用户切换回来。说明文本出现了——但白框仍然存在，即使我认为我已将其从超级视图中删除。不仅如此，它仍然是可编辑的，并且当用户去编辑它时仍然会弹出键盘！

我究竟做错了什么？

**编辑：**好吧，我基本上废弃了所有代码并从头开始上课，试图让所有事情变得更干净，我不再遇到这个问题，所以它一定是其他一些影响它的方法。教训：随意编码是不好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:01:21.800

为什么需要交替删除文本视图？通过设置 setHidden 属性来“隐藏”它们不是更好，例如：

```
[self.textView setHidden: YES]; 
```

并另外尝试以下方法：

```
[self.textView resignFirstResponder];
[self.textView setEditable: NO];
[self.textView setBackgroundColor: [UIColor clearColor]];  
[self.textView setAlpha: 0.0]; 
```

# php - 自定义 jQuery 验证码

> ID：13697574
> 
> 赞同：0
> 
> 时间：2012-12-04T06:52:38.997
> 
> 标签：php, jquery, forms, post, recaptcha

有谁知道如何做一个自定义的 jQuery ReCaptcha？我在 Stack Overflow 上查看过相关帖子，但没有与带有客户主题/样式的表单相关的帖子。我正在使用一个将通过 JQuery AJAX 提交的 HTML 表单，并且 $POST 将被提交到一个 PHP 页面，该页面将回显一个代码（一个整数）并基于该响应（1、2、9、7、. .)，将出现一条通知。如何使用自定义样式和自定义主题来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:11:50.747

您应该向您的站点添加一些 JavaScript 代码和 CSS 样式。

检查这个：[https ://developers.google.com/recaptcha/docs/customization](https://developers.google.com/recaptcha/docs/customization)

祝你好运！

# php - PHP：array_splice() 没有给我正确的输出

> ID：13697576
> 
> 赞同：0
> 
> 时间：2012-12-04T06:52:51.000
> 
> 标签：php, arrays, multidimensional-array, push, array-splice

我正在尝试使用 array_splice 并得到这样的输出（来自 $match）

```
Array
(
    [Keep me Updated] => Array
        (
            [winner] => winnerl.jpg
            [0] => value0.jpg
        )

    [0] => valuel.jpg //this should really be inside [Leep me Updated] array
    [1] => value2.jpg //this should really be inside [Leep me Updated] array
    [2] => value3.jpg //this should really be inside [Leep me Updated] array
} 
```

from（这个 foreach 创建将值放入 $match 中）

```
foreach($data as $d)
{
    if (isset($match[$d['data']['name']])) {
        $match_loser = array($d['loser']['lrg_img']);

        array_splice($match,1,0,$match_loser);
    }else{
        $match[$d['data']['name']] = array("winner"=>$d['winner']['lrg_img'],
                                            $d['loser']['lrg_img']);        
    }
} 
```

我想要得到的是带入`[0],[1],[2]`$ `[Keep me Updated]`match 数组：

```
Array
(
    [Keep me Updated] => Array
        (
            [winner] => winnerl.jpg
            [0] => value0.jpg
            [1] => value1.jpg   // old one: [0] => valuel.jpg
            [2] => value2.jpg   // old one: [1] => value2.jpg
            [3] => value3.jpg   // old one: [2] => value3.jpg
        )
} 
```

这就是 $data 的样子

```
 $data[] = array(
    "data"=>array
    (
        "name"=>$name,
    ),
    "winner"=>array
    (
        "lrg_img"=>$img_url_winner
    ),      
    "loser"=>array
    (
        "lrg_img"=>$img_url_loser
    ) 
```

$data 具有数组值，而 $match 是我尝试对数据进行排序的地方。所以如果我的价值观匹配，它就会巩固。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:28:21.103

使用内部数组作为参数`array_splice`

```
foreach($data as $d)
{
    if (isset($match[$d['data']['name']])) {
        $match_loser = array($d['loser']['lrg_img']);

        array_splice($match[$d['data']['name']],1,0,$match_loser);
    }else{
        $match[$d['data']['name']] = array("winner"=>$d['winner']['lrg_img'],
                                            $d['loser']['lrg_img']);        
    }
} 
```

# ssis - SSIS 验证 Foreach 文件枚举器

> ID：13697577
> 
> 赞同：0
> 
> 时间：2012-12-04T06:53:24.287
> 
> 标签：ssis, foreach-loop-container

我有一个 ssis 项目，首先，我有一个 Foreach 文件枚举器，里面有多个任务。它在正常情况下可以完美运行，但是如果枚举器目录中没有文件，则会发生错误，问题是，我如何对其进行验证或某种方式来避免它在运行时引发错误？谢谢

图片链接

ssis [http://s15.postimage.org/l41py15aj/ssis.png](http://s15.postimage.org/l41py15aj/ssis.png) 错误 [http://s15.postimage.org/rj0qupc0b/ssiserror.png](http://s15.postimage.org/rj0qupc0b/ssiserror.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:00:13.610

您可以在循环之前有一个脚本任务，`Foreach`它基本上检查文件和目录。如果目录或文件不存在，则有一个[优先约束来停止包。](http://www.simple-talk.com/sql/ssis/working-with-precedence-constraints-in-sql-server-integration-services/)

创建 3 个变量

```
 Name        DataType   
 Directory   String
 Files       String
 Exists      int 
```

在脚本任务中，只需检查目录是否与文件一起存在。如果您甚至需要枚举子文件夹或检查文件夹中是否存在特定文件，您可以修改代码

```
if (Directory.Exists(Dts.Variables["User::Files"].Value.ToString()))
{
if (Directory.GetFiles(Dts.Variables["User::Files"].Value.ToString()).Length != 0)
    {
      Dts.Variables["User::Exists"].Value = 1;
     }
            else
            {
                Dts.Variables["User::Exists"].Value = 0;
            }
        }
        else 
        {
            Dts.Variables["User::Exists"].Value = 0;
        } 
```

在优先约束中检查变量的值`Exists`

```
 Evaluation operation : Expression
    Expression           : @Exists==1 
```

更新 ：

在脚本任务编辑器中，您需要`ReadOnlyVariable`在脚本标签的部分中添加变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:50:54.160

当错误发生并且您想要处理它时，您知道这种特殊情况。如果它因其他一些不可预见的错误而失败怎么办？

始终添加**“OnError”**事件处理程序。

现在，在使用事件处理程序处理您的错误情况后，您可以选择传播此错误以使任务失败（这是默认行为），或者您可以在“OnError”事件处理程序中将系统变量**Propogate设置为****false**。**这将允许For Each**之后的其余代码正常继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:02:02.477

我将在 Sql 任务的禁用上设置表达式断言文件名是否有效。

我这里没有 SSIS，但我会查一下。

# solr - 从 SQL 导入 Solr 中的数据

> ID：13697579
> 
> 赞同：1
> 
> 时间：2012-12-04T06:53:36.127
> 
> 标签：solr, indexing

我正在将数据从 MySql 索引到 Solr 。以下是我在此命令后收到的响应 XML：localhost:8080/solr/dataimport?command=full-import&flush=true

```
<response>
 <lst name="responseHeader">
   <int name="status">0</int>
     <int name="QTime">5</int></lst>
       <lst name="initArgs"><lst name="defaults">
            <str name="config">data-config.xml</str></lst></lst>
              <str name="command">full-import</str><str name="status">idle</str>
              <str name="importResponse"/>
           <lst name="statusMessages"><str name="Total Requests made to DataSource">1</str>
             <str name="Total Rows Fetched">2599</str>
           <str name="Total Documents Skipped">0</str>
          <str name="Full Dump Started">2012-12-04 11:51:45</str>
             <str name="">Indexing completed. Added/Updated: 0 documents. Deleted 0 documents.</str>
               <str name="Committed">2012-12-04 11:51:46</str><str name="Total Documents Processed">0</str>
           <str name="Time taken">0:0:1.112</str></lst
           ><str name="WARNING">This response format is experimental.  It is likely to change in the future.</str></response> 
```

索引应该在数据目录下的索引目录中吗？我尝试通过 Luke GUI 查看它，它没有显示任何内容，我什至可以在这里正确创建索引吗？（My Sql 查询只返回一列，字段类型已在 schema.xml 中定义）

这是我的 data-config.xml ：

```
<dataConfig>
   <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver"           url="jdbc:mysql://localhost/mydb" user="root" password="123"/>
    <document>
        <entity name="procname" query="Select ap.procname from cur_aprocedures ap 
                               left join test_data ts on ts.procid = ap.procid">
        <field column="procname" name="procname" />

</entity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:58:46.980

使用启用提交的完整导入选项。这会将数据提交到 solr 索引中，并可用于搜索。
如果您从 Web UI 屏幕执行 DIH，通常您将有一个 Commit 复选框，需要选中该复选框以便 Solr 在 DIH 周期结束后提交更改。

# php - 有条件地从列表中删除

> ID：13697580
> 
> 赞同：0
> 
> 时间：2012-12-04T06:53:48.420
> 
> 标签：php, regex

想象一下，如果有两个列表，并且这两个列表有一些相似的项目。我想要第三个列表，其中前两个之间共享的任何项目都被删除

所以list1.txt：

苹果

梨

公共汽车

list2.txt：

苹果

梨

输出：

公共汽车

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:59:58.230

你可以这样做：

```
// read both files into an array (each line is an element)
$list1 = file("list1.txt", FILE_IGNORE_NEW_LINES);
$list2 = file("list2.txt", FILE_IGNORE_NEW_LINES);

$merge = array_merge($list1, $list2);
$intersect = array_intersect($list1, $list2);
$not_shared = array_values(array_diff($merge, $intersect)); 
```

假设我们有以下文件：
**list1.txt**

```
apple
pear
bus 
```

**list2.txt**

```
pear
apple
banana 
```

然后输出将如下所示： ( `print_r($not_shared)`)

```
Array
(
    [0] => bus
    [1] => banana
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:02:26.673

你可以这样使用：

```
$arr_result = array_unique( array_merge($arr_1, $arr_2) ); 
```

**或者**你可以这样做：

```
$arr_1 = array_diff($arr_1, $arr_2);
$arr_2 = array_diff($arr_2, $arr_1); 
```

# java - 在运行时使用 javax.tools 编译 java 源？

> ID：13697582
> 
> 赞同：5
> 
> 时间：2012-12-04T06:53:58.283
> 
> 标签：java, compilation

因此，java 有一个内置库，专门用于将 java 源代码编译成 .class 文件，它位于`javax.tools`. 所以，我想知道你是如何让它工作的。我已经阅读了 javadoc，它在其中给出了一些示例，但是当我使用这些示例时，我得到了错误。

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null); 
```

这是 oracle 给出的示例，目的是获取`StandardJavaFileManager`类的实例，您可以从中做更多的事情。但是，我对该代码的第一行有一些问题。当我尝试做时`ToolProvider.getSystemJavaCompiler();`，它总是返回 null。在该方法的 javadocs 中，它说，“返回随该平台提供的编译器，如果没有提供编译器，则返回 null。” 但他们从未展示过任何其他方式来获取 a 的实例`JavaCompiler`。我尝试了许多其他方法，例如使用 a`ServiceLoader`找到我可以找到的任何参考，但没有占上风。我怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T06:58:20.407

您可能是从*JRE*目录而不是*JDK*目录运行 Java - 您需要运行“知道”Java 编译器所在位置的版本。

例如，在我的 Windows 拳击上，运行一个像这样的小型测试应用程序：

```
import javax.tools.*;

class Test {
    public static void main(String[] args) {
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        System.out.println(compiler);
    }
} 
```

结果是：

```
c:\Users\Jon\Test>"\Program Files\Java\jdk1.7.0_09"\bin\java Test
com.sun.tools.javac.api.JavacTool@1e0f2f6

c:\Users\Jon\Test>"\Program Files\Java\jre7\bin\java" Test
null 
```

如您所见，当我专门运行JDK版本时很好，但是在运行JRE版本时我得到了null。检查您是如何启动 Java 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T06:59:29.137

编译通常通过直接调用**javac**编译器来执行，这需要安装**Java 开发工具包 (JDK)**或调用`com.sun.tools.javac.Main`，可以在 Sun 的**tools.jar**中找到。Sun 的许可允许使用完整的 Java 运行时环境 (JRE) 重新分发**tools.jar 。**实现此类动态功能的其他方法包括使用与应用程序的实现语言（请参阅参考资料）集成的现有动态脚本语言（例如**JavaScript 或 Groovy**）或编写特定领域的语言和相关的语言解释器或编译器。

# java - Java：尝试使用 objectoutputstream/objectinputstream 读取对象 - 崩溃

> ID：13697587
> 
> 赞同：1
> 
> 时间：2012-12-04T06:54:16.390
> 
> 标签：java, objectoutputstream, objectinputstream

在我的服务器类上，我正在通过 ObjectOutputStream 写入一个 2D 字符数组，客户端使用 ObjectInputStream 读取它。之后我尝试通过相同`ObjectOutputStream`的方式发送另一个二维数组，`ObjectInputStream`但程序崩溃。我想我的换行符留在里面，`ObjectOutputStream`但我不确定如何摆脱它。我试过了`inFromServ.read()`，，，`inFromServ.readLine()`。`inFromServ.flush()`这些都没有解决问题=/。任何帮助，将不胜感激！

客户端代码：

```
ObjectInputStream inFromServ = new ObjectInputStream(socket.getInputStream());
printBoard((char[][])inFromServ.readObject()); //Prints the first 2D char array fine

System.out.println(inFromServ.readObject()); //Reads in a string fine
System.out.println(inFromServ.readObject()); //Reads in another string fine

System.out.println("Your shots board:"); //Writes this out fine
printBoard((char[][])inFromServ.readObject()); //Crashes here 
```

服务器代码：

```
ObjectInputStream in = new ObjectInputStream(clients[0].getInputStream());
ObjectOutputStream out=new ObjectOutputStream(clients[0].getOutputStream());
char p1brd[][]=new char[10][10];
char p1shots[][]=new char[10][10];

out.writeObject(p1brd); //Writes out the first board fine
out.writeObject("some string"); //Writes this string fine
out.writeObject("some more string"); //Writes this string fine
out.writeObject(p1shots); //Don't even think it gets here... If i put a thread.sleep(10000) before this line it still crashes instantaneously after writing "some more string" 
```

客户端在 while(true) 循环内。一旦 printBoard((char[][])inFromServ.readObject()); 第二次调用我的 try/catch 获取它并一遍又一遍地喷出 catch 语句，直到我停止程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:07:02.007

它根本不会“崩溃”，它*会引发*异常*，*并且您的逻辑中有一个错误，当您遇到异常时您不会放弃阅读。任何从套接字读取的异常`SocketTimeoutException`都是致命的，唯一正确的响应是关闭套接字；停止阅读；并放弃客户。

下次您报告“崩溃”时，请提供实际的异常和堆栈跟踪。

# css - Css margin-top 在浏览器中无法正常工作

> ID：13697589
> 
> 赞同：0
> 
> 时间：2012-12-04T06:54:30.607
> 
> 标签：css

我有一个文本类。在我的 windows chrome 浏览器中，它显示正确，但在 mac chrome 浏览器中。例如：如果我的名字是 John duash，它在一行中显示 John，在 mac chrome 的第二行中显示 duash .

我该如何解决 ？

```
.text{
        position: absolute;
        margin-top: px;
        margin-left: px;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:02:50.933

你应该像这样使用：-

```
.text{
        position: absolute;
        top:0px;
        left:0px;
        width:100px;
        height:20px;
        background:red;
} 
```

**Position Absolute**不考虑**保证金**

所以我们可以使用 `position`from`top:0px; left:0px; right:0px; bottom:0px;`而不是 marign 的

[**演示**](http://tinkerbin.com/t3aQRePS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:57:07.837

**你正在使用** `position absolute`

比以前`top:0; left:0; right:0; bottom:0;`

**不习惯** `margin-top, margin-left`

**像这样**

```
.text{
        position: absolute;
       top: px;
       left: px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:59:01.953

span/div/whatever 的宽度与它的声音无关，您会得到第二行，因为浏览器使用的自动宽度太小了。

# android - 从json url加载图片到listview，图片不固定

> ID：13697595
> 
> 赞同：0
> 
> 时间：2012-12-04T06:54:57.533
> 
> 标签：android, json, android-image

我是 android 应用程序的新手，我正在尝试在列表视图中添加图像和文本，并且来自服务器的响应是 JSON 响应。现在我在列表视图中添加了相应的文本，我需要为每个文本添加图像，其中图像不固定。我正在使用以下代码，但我的模拟器中没有显示任何内容。谁能纠正我我哪里错了？

```
public class CustomizedListView extends Activity {
JSONArray posts = null;

// All static variables
static final String URL = "http://website/?json=get_recent_posts";

static final String KEY_POSTS = "posts";
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
            try {
            posts = json.getJSONArray(KEY_POSTS);
    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);

                // Phone number is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                JSONObject images = c.getJSONObject(KEY_IMAGES);
                String thumbnail = images.getString(KEY_THUMB_URL);

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(KEY_ID, id);
        map.put(KEY_TITLE, title);
        map.put(KEY_DATE, date);
        map.put(KEY_NAME, name);
        map.put(KEY_CONTENT, content);
        map.put(KEY_THUMB_URL,thumbnail);
        // adding HashList to ArrayList
        songsList.add(map);
            }   
            } catch (JSONException e) {
                e.printStackTrace();

                }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing json data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    });     
}   
 } 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView date = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView content = (TextView)vi.findViewById(R.id.duration);  // duration
    TextView name = (TextView)vi.findViewById(R.id.name); 
    // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    ListView list;
    // Setting all values in listview
    title.setText(song.get(CustomizedListView.KEY_TITLE));
    date.setText(song.get(CustomizedListView.KEY_DATE));
    content.setText(song.get(CustomizedListView.KEY_CONTENT));
    name.setText(song.get(CustomizedListView.KEY_NAME));

    imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
    return vi;
} 
```

}

图像加载器.java

```
public class ImageLoader {

MemoryCache memoryCache=new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService; 

public ImageLoader(Context context){
    fileCache=new FileCache(context);
    executorService=Executors.newFixedThreadPool(5);
}

final int stub_id = R.drawable.no_image;
public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);
    }
}

private void queuePhoto(String url, ImageView imageView)
{
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

//Task for the queue
private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u; 
        imageView=i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;
    PhotosLoader(PhotoToLoad photoToLoad){
        this.photoToLoad=photoToLoad;
    }

    @Override
    public void run() {
        if(imageViewReused(photoToLoad))
            return;
        Bitmap bmp=getBitmap(photoToLoad.url);
        memoryCache.put(photoToLoad.url, bmp);
        if(imageViewReused(photoToLoad))
            return;
        BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
        Activity a=(Activity)photoToLoad.imageView.getContext();
        a.runOnUiThread(bd);
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad){
    String tag=imageViews.get(photoToLoad.imageView);
    if(tag==null || !tag.equals(photoToLoad.url))
        return true;
    return false;
}

//Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:00:30.893

使用惰性列表适配器

***例如：***

```
ArrayList<HashMap<String,String>> ar=new ArrayList<HashMap<String,String>>();

LazyAdapter adapter=new LazyAdapter(con, ar);
        list.setAdapter(adapter);

public class LazyAdapter extends BaseAdapter {

    private Context activity;
    private ArrayList<HashMap<String, String>> data;
    private LayoutInflater inflater=null;
    //public ImageLoader imageLoader; 
    private URL url;
    private Bitmap bmp;

    public LazyAdapter(Context a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.lis, null);   
        TextView title = (TextView)vi.findViewById(R.id.textView11); // title
        TextView artist = (TextView)vi.findViewById(R.id.textView21); // artist nameduration
        ImageView im=(ImageView)vi.findViewById(R.id.imageView1);

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get("name"));
        artist.setText(song.get("adr"));
        try {
            url = new URL(song.get("icon"));
             bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
               im.setImageBitmap(bmp);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return vi;
    }
} 
```

# android - android：Horizo ntal ScrollView 的滚动看起来很生涩

> ID：13697597
> 
> 赞同：3
> 
> 时间：2012-12-04T06:55:01.293
> 
> 标签：android, scroll, horizontalscrollview

我有这个警告，因为我对 Horizo​​ntal ScrollView 的 scolling 看起来很生涩。编舞：跳过30帧！应用程序可能在其主线程上做了太多工作。

谁能指导我如何解决这个问题？注意：- 此问题仅发生在 Nexus 7 设备中……在其他设备上运行良好。

# android - socialauth-android - 只有 Facebook 共享工作其他网络不工作？

> ID：13697604
> 
> 赞同：2
> 
> 时间：2012-12-04T06:55:42.120
> 
> 标签：android

我在我的应用程序中使用[socialauth-android](http://code.google.com/p/socialauth-android/)。我已经完成了教程中提到的所有内容以及示例代码。但之后在测试中只有 facebook 分享按钮有效。当单击对话框中的其他按钮时，没有任何反应。

# mysql - MySQL LEFT JOIN 在连接表上使用 MAX 和 GROUP BY？

> ID：13697607
> 
> 赞同：22
> 
> 时间：2012-12-04T06:55:49.680
> 
> 标签：mysql

我有两个表（成员和活动），我正在尝试用每个成员的最新活动查询成员。我已经使用两个查询（一个获取成员，第二个使用活动的 max(id) 和 group by(member)）和一些代码来合并数据。我确信它可以通过一个查询来完成，但我不能完全解决它。有任何想法吗？

成员表

```
id, name
 1, Shawn
 2, bob
 3, tom 
```

活动表

```
id, member_id, code, timestamp, description
 1,         1,  123,     15000, baked a cake
 2,         1,  456,     20000, ate dinner
 3,         2,  789,     21000, drove home
 4,         1,  012,     22000, ate dessert 
```

期望的结果：

```
id, name,  activity_code, activity_timestamp, activity_description
 1, shawn, 012,           22000,              ate dessert
 2, bob,   789,           21000,              drove home
 3, tom,   null,          null,               null 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-04T07:54:20.263

“每组最新”问题在 SQL 中*极为*常见。仅在这个网站上就有无数解决这个问题的例子。

如果您的时间戳对于每个成员活动都是唯一的：

```
SELECT
  m.id,
  m.name,
  a.code activity_code,
  a.timestamp activity_timestamp,
  a.description activity_description
FROM
  members m
  INNER JOIN activities a ON a.member_id = m.id
WHERE
  a.timestamp = (SELECT MAX(timestamp) FROM activities WHERE member_id = m.id) 
```

或者，如果您的活动 ID 随时间单调增加：

```
 ...
WHERE
  a.id = (SELECT MAX(id) FROM activities WHERE member_id = m.id) 
```

你不需要分组。但是查询将分别受益于`activities`over`(member_id, timestamp)`或上的索引`(member_id, id)`。

* * *

编辑

要显示尚未记录活动的任何成员，请使用这样的左连接。

```
SELECT
  m.id,
  m.name,
  a.code activity_code,
  a.timestamp activity_timestamp,
  a.description activity_description
FROM
  members m
  LEFT JOIN activities a ON 
    a.member_id = m.id
    AND a.timestamp = (SELECT MAX(timestamp) FROM activities WHERE member_id = m.id) 
```

请注意，没有`WHERE`子句。从语义上讲，连接完成*后*应用 WHERE 。因此，WHERE 子句将删除 LEFT JOIN 添加的行，从而有效地给出与原始 INNER JOIN 相同的结果。

但是，如果您在连接条件中应用附加谓词权限，则 LEFT JOIN 将按预期工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T07:23:43.530

```
SELECT 
    members.id ,
    members.name,
    activities.code AS activity_code,
    activities.timestamp AS activity_timestamp,
    activities.description AS activity_description
FROM 
    members
    LEFT JOIN activities
        ON members.id = activities.member_id
    LEFT JOIN 
        (
            SELECT
                activities.member_id
                MAX(activities.id) AS id
            FROM activities
            GROUP BY 
                activities.member_id
        ) AS t1
        ON activities.id = t1.id
WHERE
    t1.id IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T07:03:18.047

```
Select max(a.id), m.name, a.activity_code, a.activity_timestamp, a.activity_description
From members m
     Left join
     activities a on a.member_id=m.id
Group by  m.name, a.activity_code, a.activity_timestamp, a.activity_description 
```

# android - Android片段动画实际上并没有完成

> ID：13697608
> 
> 赞同：0
> 
> 时间：2012-12-04T06:55:54.367
> 
> 标签：android, android-layout, android-animation

我遇到了这个烦人的问题，我有 2 个片段，并且我在片段`getView()`组件上运行 3d 翻转动画。问题来了，翻转完成后，我尝试将另一个视图设置为不可见，但没有任何反应。似乎动画仍在视图中，如果我`setAnimation(null)`或`clearAnimation`视图，整个视图将重置为开始状态。

我还做了一些测试，只为视图运行 alpha 动画，之后我无法再更改视图的可见性。此类问题的任何解决方案或破解方法？

谢谢。

这是重现问题的小代码片段。

`onCreateView`调用 Fragment 并单击按钮时，将运行以下代码：

`AlphaAnimation fadeHalf = new AlphaAnimation(1, 0.5f); fadeHalf.setFillAfter(true);`

 ````
fadeHalf.setAnimationListener(new AnimationListener() {

@Override
public void onAnimationStart(Animation animation) {
}

@Override
public void onAnimationRepeat(Animation animation) {
}

@Override
public void onAnimationEnd(Animation animation) {
    getView().setVisibility(View.GONE);
});

getView().startAnimation(fadeHalf); 
````  `因此，当运行上面的代码时，整个片段视图被转换为 0.5f alpha，但`setVisilibity(View.GONE)`什么也不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:24:54.497

不确定这是否是您需要的，但您可能可以删除视图并在将来执行相同的动画时将其重新添加。`

# python - 如何使用 BeautifulSoup 提取 HTML 元素的嵌套级别？

> ID：13697609
> 
> 赞同：2
> 
> 时间：2012-12-04T06:55:55.413
> 
> 标签：python, beautifulsoup, lxml

我目前正在使用 BeautifulSoup 来提取 HTML 元素和属性。
我也想知道提取的每个元素的嵌套级别。

例如：

示例 HTML：

```
<html>
  <head>
    <title>Element Attributes Test</title>
  </head>
  <body>
    <div id="abc">
      <ol id="def">
        <li class="testItem"> <a href="http://testpage.html">
        </li>
        <li class="testItem"> <table id="testTable">
               <tr>
                 <td>
                   <div id="testDiv">
                   </div>
                 </td>
               </tr>
             </table>
        </li>
      </ol>
    </div>  
  </body>  
</html> 
```

我想获取特定元素的路径信息作为路径列中的输出。

```
----------------------------------
Element | Attribute | Path
----------------------------------
html    | None      | document   
----------------------------------
head    | None      | html
----------------------------------
title   | None      | html.head
----------------------------------
body    | None      | html
----------------------------------
div     | id="abc"  | html.body
-----------------------------------
ol      | id="def"  | html.body.div
-----------------------------------
li      | class=".."| html.body.div.ol
-----------------------------------
a       | href=".." | html.body.div.ol.li
-----------------------------------
li      | class=".."| html.body.div.ol
-----------------------------------
table   | id="..."  | html.body.div.old.li
-----------------------------------
tr      | None      | html.body.div.li.table
----------------------------------- 
```

我能够提取 Element 及其相关属性，但无法找到合适的方法来获取该特定元素的路径。

如何使用 BeautifulSoup 提取相同的内容？是否有任何其他库可以用来提取相同的内容？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:14:00.360

要获取路径，您可以尝试以下操作：

```
[i.name for i in soup.findAll('div',{'id':'testDiv'})[0].findParents()] 
```

输出：

```
['td', 'tr', 'table', 'li', 'ol', 'div', 'body', 'html', u'[document]'] 
```

或者：

```
 '.'.join([i.name for i in soup.findAll('div',{'id':'testDiv'})[0].findParents()][::-1]) 
```

把它作为一个字符串：

```
u'[document].html.body.div.ol.li.table.tr.td' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:22:22.857

您可以采用以下方法为所有 html 元素获取自下而上的路径

```
>>> for elem in soup.findAll():
    path = '.'.join(reversed([p.name for p in elem.parentGenerator() if p]))
    print "{:10}|{:60}|{:10}".format(elem.name,elem.attrs, path)

html      |[]                                                          |[document]
head      |[]                                                          |[document].html
title     |[]                                                          |[document].html.head
body      |[]                                                          |[document].html
div       |[(u'id', u'abc')]                                           |[document].html.body
ol        |[(u'id', u'def')]                                           |[document].html.body.div
li        |[(u'class', u'testItem')]                                   |[document].html.body.div.ol
a         |[(u'href', u'http://testpage.html')]                        |[document].html.body.div.ol.li
li        |[(u'class', u'testItem')]                                   |[document].html.body.div.ol
table     |[(u'id', u'testTable')]                                     |[document].html.body.div.ol.li
tr        |[]                                                          |[document].html.body.div.ol.li.table
td        |[]                                                          |[document].html.body.div.ol.li.table.tr
div       |[(u'id', u'testDiv')]                                       |[document].html.body.div.ol.li.table.tr.td
>>> 
```

# php - PHP/MySql 调试 SQL 查询以向数据库添加值

> ID：13697611
> 
> 赞同：0
> 
> 时间：2012-12-04T06:56:27.160
> 
> 标签：php, html, mysql

我有这个简单的代码，我试图在其中有 3 个字段，名字、姓氏和电子邮件，从网站表单标记到 mysql 数据库。当我测试表单并点击“注册”时，出现“发生错误。未添加项目”的错误。我如何调试这个，因为我不确定错误出现在哪一点？

```
<html>
<head>
<title> Nomad - New User Registration Results</title>
</head>

<body>
   <h1>Nomad - New User Registration Results</h1>
 <?php
 // create short variable names
 $First_Name=$_POST['First_Name'];
 $Last_Name=$_POST['Last_Name'];
 $Email=$_POST['Email'];
 if(!$First_Name || !$Last_Name || !$Email) {
 echo "You have not entered all the required details.<br />"
 ."Please go back and try again.";
 exit;
 }
 @ $db=new mysqli('localhost','nomad_steve','steven','nomad_prod');
 if (mysqli_connect_errno()) {
 echo "Error: Could not connect to database. Get it together Steve!";
 exit;
 }
 $query = "insert into nomad_prod values
      (' " .$First_Name.",' " .$Last_Name."',' ".$Email."')";
  $result=$db->query($query);
 if ($result) {
 echo $db->affected_rows." book inserted into database.";
  } else {
 echo "An Error Has Occured. The item was not added.";
  }
 $db->close();
 ?>
 </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:36:06.080

试试这个可能会解决你的问题

```
$query = "insert into Player(first_name,last_name,email) values('" .$First_Name."','".$Last_Name."','".$Email."')";
$result=$db->query($query); 
```

我已经检查并知道了，您必须指定您必须在其中输入数据的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:00:23.603

```
(' " .$First_Name.",' " .$Last_Name."',' ".$Email."')"; 
```

您在上面的查询中错过了`'`after `First_name`，它应该是

```
(' " .$First_Name."',' " .$Last_Name."',' ".$Email."')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:51:14.927

使用[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)而不是自己构建查询。

您将 $_POST['First_Name'] 复制为 $Email，这对我来说不合适

尝试进行上述更改，看看会发生什么。

# javascript - Javascript PHPMyAdmin Like 字段选择（ctrl + 箭头键）

> ID：13697613
> 
> 赞同：0
> 
> 时间：2012-12-04T06:56:41.927
> 
> 标签：javascript, phpmyadmin

任何人都知道 PHP My Admin 在使用`CTRL + DOWN ARROW`键添加新表或其他表单时如何将焦点从一个字段转移到另一个字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:32:27.570

当在同一行时，只需找到**最近的 td**然后切换到上**一个**或**下**一个，找到输入并聚焦它。下一个示例：

```
$(this).closest('td').next().find('input').focus(); 
```

当在不同的行上找到**最近的 tr**然后切换到**下一个**或**上**一个。使用**当前 td**的索引找到**新 td**的索引，找到输入并将其聚焦。以下一个为例：

```
$(this).closest('tr').next().find('td').eq($(this).closest('td').index()).find('input').focus(); 
```

我创建了一个[jsfiddle](http://jsfiddle.net/roine/7quJq/1/)来演示。

# inotify - inotify_add_watch 到 /proc 文件夹

> ID：13697615
> 
> 赞同：4
> 
> 时间：2012-12-04T06:56:48.760
> 
> 标签：inotify

我正在尝试将“ `inotify_add_watch`”用于流程。我这样做的目的是在进程被终止时得到通知。

我的通知代码是，

```
wd = inotify_add_watch(ifd, "/proc",IN_ALL_EVENTS); 
```

但即使进程被删除并且目录从 /proc 文件夹中删除，它也不会通知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T15:39:18.900

在许多 Linux 发行版中，*/proc*挂载为`procfs`. 确实报告和
`Inotify`中的一些但不是所有事件。 `sysfs``procfs`

参考： http:
[//en.wikipedia.org/wiki/Inotify#Limitations](http://en.wikipedia.org/wiki/Inotify#Limitations)
[http://en.wikipedia.org/wiki/Procfs](http://en.wikipedia.org/wiki/Procfs)
[http://inotify.aiken.cz/?section=inotify&pa​​ge](http://inotify.aiken.cz/?section=inotify&page=faq) =faq （搜索`procfs`）
[选择procfs 文件上的功能](https://stackoverflow.com/questions/8527772/select-function-on-procfs-file)（搜索`procfs`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-06T07:53:32.090

Inotify 不支持 sysfs 和 procfs 等伪文件

proc 和 sys 文件系统有时被称为进程信息伪文件系统。它不包含“真正的”文件，而是包含运行时系统信息（例如系统内存、安装的设备、硬件配置等）。

Inotify 仅报告用户空间程序通过文件系统 API 触发的事件。因此，它不会捕获网络文件系统上发生的远程事件。（应用程序必须回退到轮询文件系统以捕获此类事件。）此外，各种伪文件系统，如 /proc、/sys 和 /dev/pts 无法使用 inotify 进行监控。

[http://man7.org/linux/man-pages/man7/inotify.7.html](http://man7.org/linux/man-pages/man7/inotify.7.html)

# ruby - 如何在 Heroku 上运行 Tweetstream 循环？

> ID：13697618
> 
> 赞同：1
> 
> 时间：2012-12-04T06:56:59.553
> 
> 标签：ruby, heroku, sinatra, tweetstream

我在一个 Sinatra 应用程序中构建了一个相当简单的[Tweetstream](https://github.com/intridea/tweetstream)监听器，我试图在 Heroku 上运行它。它启动并运行良好，但大约一分钟后我收到以下错误：

```
2012-12-04T06:23:31+00:00 heroku[web.1]: Stopping process with SIGKILL
2012-12-04T06:23:31+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch 
```

基本上，这是我正在运行的内容：

```
require 'sinatra'

client = TwitterListener.new
puts "starting Twitter listener..."
client.restart

require 'tweetstream'

class TwitterListener

    def initialize
        @client = TweetStream::Client.new
        ...
        @events = Events.new
    end

    def restart
        ...
        @client.follow(users) do |status|
            @events.mention_artist?(status, artists)
            @events.retweet_artist?(status, artists)
        end
    end    
end 
```

它正在启动流式侦听器，如果我发推文的速度足够快，它就会接收到它，但 Heroku 似乎在推文流循环期间超时。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:50:11.373

所以我设法自己解决了这个问题。

在 Heroku 上运行诸如 Tweetstream（我相信它使用 Eventmachine）之类的长时间运行的进程时，您必须使用 worker dyno。如果进程未在 60 秒内完成，则 web dyno 超时。这就是我收到 R10 超时错误的原因。

要更改为工人测功机，我需要调整我的 Procfile

```
web: bundle exec rackup config.ru -p $PORT 
```

到

```
worker: bundle exec rackup config.ru -p $PORT 
```

然后关闭web进程并打开一个名为'worker'的工作进程

```
> heroku ps:scale web=0 worker=1 
```

因为在项目的这一点上我只需要一个测功机工作。

# html - 是否可以在dreamviwer cs6中拖放html元素

> ID：13697621
> 
> 赞同：0
> 
> 时间：2012-12-04T06:57:16.243
> 
> 标签：html, cordova, dreamweaver

我正在使用dreamviewr cs6 开发一个phonegap 应用程序。很长一段时间后我使用dreamviewr。在以前的版本中，我记得有一个 html 栏，以便我可以拖放 html 内容并设计一个站点。但在 Dream Viewer CS6 中我找不到这样的设施。是否有任何特殊配置可以让 html 列表拖放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:38:05.983

`window->insert ctr+F2`是关键

# ios - UIButton 中的 imageview 属性和 - (void)setImage:forState: 有什么区别？

> ID：13697624
> 
> 赞同：1
> 
> 时间：2012-12-04T06:57:30.797
> 
> 标签：ios, cocoa, uibutton, imageview

我只是尝试为我的 UIButton 设置一个新图像（UIImage 对象），`myBtn.imageview.image = newimg;`然后我发现它不起作用。

之后我得到了正确的解决方案，`setImage:forState:`关于 UIButton 的文档说“imageView 是按钮的图像视图。（只读）”

我应该如何得到它？有什么不同？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:00:19.470

正如文档所说（`"imageView is the button’s image view. (read-only)"`），它是一个只读属性，您不能只更改`imageView`. 你必须使用推荐的方法`setImage:forState:`。基本上`UIButton`可能具有与您期望的不同的实现，并且`myBtn.imageview.image`可能实际上并未将所需的图像设置为按钮。`setImage:forState:`可能有一个与设置完全不同的实现`myBtn.imageview.image = newimg;`。通过在你的问题中直接设置，你可能会得到一些意想不到的结果，因为实际的实现没有被执行。

# objective-c - ARC IBOutlet 存储类型 iOS 限制

> ID：13697625
> 
> 赞同：1
> 
> 时间：2012-12-04T06:57:37.590
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting, weak

我知道现在使用 Xcode，建议使用 ARC，但是我读过一些关于它与 iOS 4.x 不兼容的信息，至少在使用`__weak`. 当我创建`IBOutlet`它时，它提供了**弱**或**强**作为存储类型的选择，这是否意味着我的应用程序仅限于 iOS 5 或更高版本，或者它仍会在较旧的 iOS 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:09:04.127

绝对只使用ARC。正如您所指出的，如果您选择提供 iOS 4.3 兼容性，您将不会享受`weak`变量的一点好处功能，当它们被释放时它们会被自动`nil`-ed （但您没有那个）非 ARC 代码中的功能，因此您不会丢失任何东西）。而且，是的，当您`control`从 Interface Builder -drag 到 .h 文件时，它说您只有`strong`and`weak`选项，但在最新的 Xcode 中，至少，如果您将 iOS 4.3 作为目标并选择`weak`，它将自动为您创建它`__unsafe_unretained`，所以一切都很好。

简而言之，使用 ARC，即使您的目标是支持 iOS 4.3，您的编码寿命也会比不使用 ARC 的情况好得多。即使在 iOS 4.3 中，您也能获得如此多美妙的 ARC 好处。如果您愿意使用 iOS 5.0 作为您的目标部署，那么您将享受 ARC 的全部优势。

如果你使用 Xcode 4.5，你肯定会失去对 armv6 的支持，这是 iPhone 3G 和更早版本的处理器，所以你的应用程序将只支持 iPhone 3GS 和更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:59:51.640

不，ARC 只是编译器功能。它是每个文件的，所以它根本不会影响您现有的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:03:55.580

iOS 版本支持取决于您的 Xcode 版本。

使用最新版本的 Xcode (4.5)，您可以创建适用于 iOS 4.3 及更高版本的应用程序。如果您需要为早期版本的 iOS（4.3 之前）创建应用程序，您需要安装 Xcode 4.4.1。

# javascript - 如何识别哪个文件正在使用事件？

> ID：13697637
> 
> 赞同：0
> 
> 时间：2012-12-04T06:58:26.213
> 
> 标签：javascript

我有一个显示将文件上传到服务器的进度的功能：

```
function progress(event) {
...
}
...
for (var i = 0; i<files.length; i++) {
    xhr.upload.onprogress = progress;
} 
```

progress 函数在**for**循环中，对每个文件执行一次。进行中功能我想写上传了多少百分比，我可以为一个文件做，但如果我不上传一个文件，那么我不知道如何为每个文件取得进展。我可以在进度函数中添加循环参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:33:12.907

您可以使用匿名函数为*进度*函数提供附加参数：

```
function progress(event, file) {
   ...
}

for (var i = 0; i<files.length; i++) {
    xhr.upload.onprogress = function(event) {
        progress(event, files[i]);
    }
} 
```

但是此代码将不起作用，因为*进度*每次都会采用最后一个*文件项。*为避免这种情况，您必须使用闭包：

```
function progress(event, file) {
    ...
}

for (var i = 0; i<files.length; i++) {
    (function(xhr, file) {
        xhr.upload.onprogress = function(event) {
            progress(event, file);
        }
    })(xhr, files[i]);
} 
```

PS对不起，我的第一个答案是错误的，我已将其删除。

# performance - 内存限制 - JBoss AS 7

> ID：13697638
> 
> 赞同：1
> 
> 时间：2012-12-04T06:58:27.920
> 
> 标签：performance, jboss, scaling

我们计划将现有的 Legacy Enterprise RMI 应用程序（消耗超过 3-4 GB 内存）移植到 JBoss AS 7。这样可以更好地管理/扩展应用程序（服务器集群）。

有谁知道 JBoss AS 7 是否适合此活动或不会产生与内存相关的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:00:17.467

一般来说，这不应该是正确的 GC 策略的问题。

# javascript - 如何在javascript中将对象方法传递给数组方法

> ID：13697640
> 
> 赞同：3
> 
> 时间：2012-12-04T06:58:33.663
> 
> 标签：javascript, oop

这是我第一次尝试 OOP，所以请多多包涵：

```
(function(){

  var Ship = function(){
    this.passengers = [];
    this.hasAliens = function() {
      return this.passengers.some(function(passenger){
         return passenger.isAlien()
      });
    }        
  }; 

  var Passenger = function(){};
  Passenger.prototype.isAlien = function(){
    return this instanceof Alien;
  };
  Passenger.prototype.board = function(ship) {
    ship.passengers.push(this)
  }

  var Alien = function() { Passenger.call(this); }
  var Human = function() { Passenger.call(this); }
  Alien.prototype = Object.create(Passenger.prototype);
  Human.prototype = Object.create(Passenger.prototype);
  Alien.prototype.constructor = Alien.constructor;   
  Human.prototype.constructor = Human.constructor;  

  var ship = new Ship();   
  var john = new Human();
  var zorg = new Alien();

  //simple testing
  john.board(ship);
  console.log("Ship does not have aliens ", ship.hasAliens()===false);
  zorg.board(ship);
  console.log("Ship has aliens ", ship.hasAliens()===true);

})(); 
```

​</p>

这工作正常。但是，我想知道如何传递该`Passenger.isAlien()`方法来拯救我讨厌的嵌套匿名函数。我正在尝试这样做：

```
 var Ship = function(){
    this.passengers = [];
    this.hasAliens = function(){
      return this.passengers.some(Passenger.isAlien);          
    };
  }; 
```

但这给了我`"undefined is not a function"`

[http://jsfiddle.net/WYyxY/](http://jsfiddle.net/WYyxY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:17:29.620

正如我所说，`isAlien`是原型的属性，即构造函数的*实例*，而不是构造函数本身。`Passenger.isAlien`确实是未定义的（您的代码中没有任何地方`Passenger.isAlien = function....`）。

真的没有更简洁的方法来做到这一点。想想传递给的回调在`.some`做什么：它必须将数组的一个元素作为参数，然后用它做一些事情。在您的情况下，您想要执行该元素的方法。

调用方法并将应调用的对象作为参数传递的一种方法是使用[`.call` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。不幸的是，与 JavaScript 中的所有函数一样，您不能只获得对 的引用`Passenger.prototype.isAlien.call`，因为`.call`它丢失了它的上下文（它不知道它引用的是哪个函数）。您必须`Passenger.prototype.isAlien`先将其绑定到

```
this.passengers.some(
    Passenger.prototype.isAlien.call.bind(Passenger.prototype.isAlien)    
); 
```

而且我个人觉得这不是更具可读性。

坚持匿名功能，你的意图更清晰。或者，如果您愿意，可以让另一个函数创建该函数：

```
function callOn(funcName) {
    return function(obj) {
        return obj[funcName]();
    };
}

this.passengers.some(callOn('isAlien')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:24:31.690

对于使用 javascript 进行 OOP，我强烈建议您查看[prototypeJS](http://prototypejs.org/)。您的代码变得更具可读性，并且还支持继承！

[快速](http://prototypejs.org/learn/class-inheritance.html)浏览一下

# c - 我想知道如何将指针 p 分配给 str 的地址

> ID：13697643
> 
> 赞同：-2
> 
> 时间：2012-12-04T06:58:48.037
> 
> 标签：c, pointers

```
#include <stdio.h>
#include <string.h>

int main()
{
    char *p;
    char str[10],name_first[10];
    int i,count;

    printf("\nName before reversing the string:::::::::::::");
    scanf("%s",&name_first);

    // I have taken a name in name_variable and now i want to reverse it
    // using pointer for ex
    count = strlen(name_first);

    p=str+strlen(name_first)-1;

    for(i=0;i<count;i++)
    {
        *(p-i)=*(name_first+i);
    }

    // now I am getting a reverse of string as a o/p but I want to know
    // how p is pointing to the str as I'm not assigning any address,
    // is it done automatically by the compiler?
    printf("\nname after reversing the string::::::::::::::%s\n",str);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:05:18.683

该声明：

```
p=str+strlen(name_first)-1; 
```

将 str 指向的内存中的地址分配给 p。

因此，假设 str 从地址 0x1000 开始，长度为 10，您的 name_first 长度为 5。然后 p 指向 0x1004。

循环运行时，会更新 0x1004、0x1003、0x1002、0x1001 和 0x1000 中的字符，从而更新 str 的内容。

希望这可以消除您的疑问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:02:16.177

实际上，您正在`p`以下代码行中分配地址。

```
p=str+strlen(name_first)-1; 
```

`str`是一个数组，因此数组名称保留基地址。现在添加数组的长度`name_first`并减去`1`指针算术，因此您得到了结果。

您已经创建了一个变量`count = strlen(name_first)`。

因此无需`strlen`再次调用将地址分配给`p`.

为了更快的方式，只需使用

`p=str+count-1;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:06:01.897

str 是 str[10] 的第一个元素的指针。在此语句中：“p=str+strlen(name_first)-1;” rhs 是一个地址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:06:04.983

p，指向 char 的指针，被分配了 p= 行中 char 数组 str 中最后一个 char 的地址。

然后，您继续使用该指针来操作该内存块中的字符，然后它们打印出操作内存内容（因为 str 实际上只是指向 char 数组的指针）。

# iphone - iOS 在线程中获取 UITextField 文本，即显示“_WebThreadLockFromAnyThread”

> ID：13697647
> 
> 赞同：0
> 
> 时间：2012-12-04T06:58:58.480
> 
> 标签：iphone, objective-c, ios, uitextfield, nsthread

我想`UITextField`在一个线程中获取文本。

```
IBOutlet UITextField *textSearchBar;

{ 
   NSThread* thread ......init:@selector(test)....
   [thread start]
}

-(void)test   
{
    NSString* str = textSearchBar.text;//here to show  '_WebThreadLockFromAnyThread'
} 
```

我知道我可以使用这样的代码来修复它，但我不想用这种方式

```
{ 
   NSThread* thread ......init:@selector(test)..withObject:textSearchBar.text];....
   [thread start]
}

-(void)test:(NSString*)textStr
{
    NSString* str = textStr;
} 
```

`UITextField`所以任何人都知道没有'_WebThreadLockFromAnyThread'的任何其他方式来获取文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:25:29.037

如果你的目标是 iOS4.0 及以上的设备，那么你可以使用块。更多信息：[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)。

[使用块](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T07:01:23.117

只有一个答案：访问主线程上的 UITextView。

# java - 漂亮的打印不适用于 xsl 转换

> ID：13697651
> 
> 赞同：0
> 
> 时间：2012-12-04T06:59:16.870
> 
> 标签：java, xml, xslt, pretty-print

我需要将 xml 文档转换为另一种格式。为此，我正在使用内置的 Transformer 对象。此外，我想在同一步骤中漂亮地打印结果，但我总是得到一个丑陋的平面 xml 文件。

这是我写的代码：

```
private static void transformXML(File source, File destination, URL xslt) throws IOException, TransformerException {
    final FileOutputStream fos = new FileOutputStream(destination);
    try {
        final Source legacySource = new StreamSource(source);
        final InputStream in = xslt.openStream();
        try {
            final Source sourceApp = new StreamSource(in);
            final TransformerFactory transFact = TransformerFactory.newInstance();
            transFact.setAttribute("indent-number", 2);
            final Transformer t = transFact.newTransformer(sourceApp);
            t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
            t.setOutputProperty(OutputKeys.METHOD, "xml");
            t.setOutputProperty(OutputKeys.INDENT, "yes");
            t.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-15");
            t.transform(legacySource, new StreamResult(new OutputStreamWriter(fos, "ISO-8859-15")));
            // t.setOutputProperty("{http://xml.apache.org/xalan}indent-amount", "2");
        } finally {
            in.close();
        }
    } finally {
        fos.close();
    }
} 
```

结果总是看起来像：

```
<?xml version="1.0" encoding="ISO-8859-15"?><application xsi:noNamespaceSchemaLocation="essential-config.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<application-settings>
<gui-mode>true</gui-mode>
<db-config>false</db-config>
<application-mode>mode</application-mode>
...
</application-settings>
...
</application> 
```

这是我正在使用的 xsl

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="ISO-8859-15" indent="yes"/>
    <xsl:template match="/">
        <application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="essential-config.xsd">
                <application-settings>
                    <gui-mode><xsl:value-of select="configuration/general/gui-mode" /></gui-mode>
                    <db-config>false</db-config>
                    <application-mode><xsl:value-of select="configuration/general/application-mode" /></application-mode>
                    <process-id><xsl:value-of select="configuration/general/process-id" /></process-id>
                    <host><xsl:value-of select="configuration/translog/host" /></host>
                    <sml-client-id><xsl:value-of select="configuration/general/sml-client-id" /></sml-client-id>
                    <company-id><xsl:value-of select="configuration/general/companyId" /></company-id>
                </application-settings>
                <xsl:copy-of select="configuration/database" />
        </application>
</xsl:template> 
```

谁能帮助我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:22:07.803

尝试这个：

```
t.setOutputProperty("{http://xml.apache.org/xalan}indent-amount", "2"); 
```

# asp.net - ASP.NET v2 - RadGridView

> ID：13697655
> 
> 赞同：1
> 
> 时间：2012-12-04T06:59:27.397
> 
> 标签：asp.net, webforms, telerik

我有一个网格，我需要动态地（以编程方式）添加列。

我一直在浏览 Telerik 论坛和谷歌，但我找不到任何东西。反编译 GridTemplateColumn 显示应该有 ItemTemplate 属性，但是我的 VS 抛出错误。

```
Dim col As GridColumn = New GridButtonColumn()
col.UniqueName = stockLocation("LocationID").ToString()
col.HeaderText = stockLocation("Name").ToString()
col.ItemTemplate = ERROR HERE
rgGridCombinations.Columns.Add(col) 
```

我正在尝试创建一个类似于 ASPX 代码的列。

```
<radg:GridTemplateColumn HeaderText="Stock" UniqueName="Stock" Visible="true" HeaderStyle-Width="10%">
<ItemTemplate>
<asp:TextBox ID="tbStock" runat="server" Width="100%" />
</ItemTemplate>
</radg:GridTemplateColumn> 
```

我将如何创建这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:10:21.730

1)`GridColumn`没有`ItemTemplate`财产

2) 你在分配`GridButtonColumn`. `GridTemplateColumn`改为使用

试试这个

```
Dim col = As New GridTemplateColumn()
col.UniqueName = "Stock"
col.HeaderText = "Stock"
col.ItemTemplate = <something here>  'should be an ITemplate

rgGridCombinations.Columns.Add(col) 
```

有关[如何创建模板的更多信息，请查看此处](http://www.telerik.com/help/aspnet-ajax/combobox-templates-adding.html)

# robots.txt - 禁用 googlebot 获取 www

> ID：13697662
> 
> 赞同：0
> 
> 时间：2012-12-04T07:00:01.077
> 
> 标签：robots.txt, googlebot

我在 .htaccess 中有 www 重定向。所以`www.example.com`得到 301 重定向`example.com` 但谷歌仍然尝试获取`www.example.com`。

我可以禁用 googlebot 抓取`www.example.com`吗？例如来自 webaster 工具或 robots.txt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:09:09.010

在 Google 网站管理员工具中，您可以设置您的首选主机名 - 带或不带 www，但 Google 对此不提供任何保证。由于您有从 www 到非 www 的 301，Googlebot 可能会尊重您的意愿。

# ruby - 结构从阅读器和哈希访问器返回不同的东西

> ID：13697663
> 
> 赞同：2
> 
> 时间：2012-12-04T07:00:17.983
> 
> 标签：ruby

我有一个这样的结构：

```
class Item < Struct.new(:url, :list)
  def list
    @list ||= Array.new
  end
end 
```

我今天发现`.list()`and`[:list]`返回不同的东西：

```
i = Item.new
#=> #<struct Item url=nil, list=nil>
i.list
#=> []
i[:list]
#=> nil
i.list << 1
#=> [1]
i.list += [2]
#=> [1, 2]
i.list
#=> [1]
i[:list]
#=> [1, 2] 
```

为什么会这样，我怎样才能编写我的结构以正确地拥有默认的空数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:35:06.393

有人已经回答了“为什么”位，所以也许如果你仍然想用 来做这个`Struct`，那么为什么不试试这个：

```
class Item < Struct.new(:url, :list)
  def list
    self[:list] ||= Array.new
  end
end 
```

这是有效的，因为 while`@list`是您制作的实例变量，`Struct`提供它的访问器是自己的。( `:list`)。`self[:list]`让你得到它。

```
i = Item.new # =>  #<struct Item url=nil, list=nil>
i.list   # => []
i[:list] # => []
# Compare using OBJECT IDENTITY (is i.list internally the same thing as i[:list]?)
i[:list].equal? i.list # true
i.list << 1   # => [1]
i.list += [2] # => [1, 2]
i.list        # => [1, 2]
i[:list]      # => [1, 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:19:08.147

我认为你应该更好地使用[Dash](https://github.com/intridea/hashie)而不是 Struct。看：

```
require 'hashie'

class Item < Hashie::Dash
  property :url
  property :list, default: []
end

i = Item.new # => #<Item list=[]>
i.list # => []
i[:list] # => []
i.list << 1 # => [1]
i.list += [2] # => [1, 2]
i.list # => [1, 2]
i[:list] # => [1, 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:26:11.850

Sergio Tulentsev[回答](https://stackoverflow.com/questions/13697663/struct-returning-different-things-from-reader-and-hash-accessor/13697885#13697885)了这`how can I write my struct to have default empty array properly?`部分，所以我会写这`Why is this?`部分。
我缺少信息，但有一个结构，它被写成[*::new 创建一个新类，由 aString 命名，包含给定符号的访问器方法。*](http://www.ruby-doc.org/core-1.9.3/Struct.html#method-c-new)

所以你有一个访问器，`:list`但它仍然与你的`@list`属性不同。这意味着，您可以`@list`根据需要命名，它不会附属于`:list`结构。
您还覆盖了该结构之前提供的符号访问器`def list; end`

```
i.list << 1   # adding 1 to @list set to Array.new
#=> [1]
i.list += [2] # equals i.list = i.list + [2]
              # i.list= is the `:list` setter method.
              # i.list is the @list getter method.
              # It equals :list = @list + [2]
#=> [1, 2]
i.list        # @list
#=> [1]
i[:list]      # :list
#=> [1, 2] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T07:26:23.720

假设您想要 Struct 的其他优点并且需要坚持使用它，您可以编写自己的`initialize`方法：

```
class Item < Struct.new(:url, :list)
  def initialize(url, list = nil)
    self.url  = url
    self.list = Array(list)
  end
end 
```

`Array()`将确保传入的任何内容都将被放入一个数组中，如果它还不是一个数组，并且`[]`如果`nil`是参数，则将返回一个空数组 ( )。

# android - 在 Android NDK 中使用 linux 命令

> ID：13697666
> 
> 赞同：0
> 
> 时间：2012-12-04T07:00:22.227
> 
> 标签：android, android-ndk, ffmpeg, android-ndk-r7

我已经使用 NDK 为 android 构建了 ffmpeg，如此[处](http://webcache.googleusercontent.com/search?q=cache:http://www.roman10.net/how-to-build-ffmpeg-for-android/)所述。

我想要做的是使用[此处](http://pr0gr4mm3r.com/linux/convert-video-to-images-and-back-using-ffmpeg/)提到的图像列表创建一个视频文件。

```
ffmpeg -i ffmpeg_temp/%05d.png -b 512 video2.mpg 
```

我想知道如何在我的 C 类文件中运行这个命令。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:05:19.943

阅读 ndk 文档

编辑您的 Android.mk 以生成可执行的“ffmpeg”

运行 ndk-build

在您的 PC 上找到“ffmpeg”可执行文件（位于“obj/local/armeabi-v7a/”之类的文件夹中

使用 adb 将“ffmpeg”移动到手机上——您可能需要安装一些东西才能做到这一点

在手机上，将“ffmpeg”可执行文件移动到 /data/local/tmp

在电话上，获取一个 shell 并像您提到的那样调用 CLI 表达式：

/data/local/tmp/ffmpeg -i ffmpeg_temp/%05d.png -b 512 video2.mpg

它应该像在任何其他 linux 系统上运行一样在手机上执行

# java - 如何根据用户 TimeZone 更改 TimeZone

> ID：13697667
> 
> 赞同：0
> 
> 时间：2012-12-04T07:00:22.900
> 
> 标签：java, jsf, timezone, seam

我想`TimeZone`根据用户的`TimeZone`.

**问题：**是否有任何功能可以在`JSF`or中设置默认值`Seam`？它将影响整个应用程序。

我希望，每次我在不使用属性的情况下使用时，该功能都会产生效果`s:convertDateTime`，，等等。`f:convertDateTime``p:calendar``timezone`

我也尝试使用如下`Seam`组件。`TimeZoneSelector`

```
@In
private TimeZoneSelector timeZoneSelector;
....
timeZoneSelector.setTimeZone(user.getTimeZone()); 
```

但是，它不会`<f:convertDateTime pattern="hh:mm a"/>`自动生效。我必须`TimeZone`再次检索表单支持 bean。

```
<f:convertDateTime pattern="hh:mm a" timeZone="#{mybean.timeZone}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:29:09.787

JSF 没有默认的特殊功能允许您这样做。您需要执行此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:31:07.957

1-创建一个默认转换器`java.util.Date`

2-`getAsString`并`getAsObject`让转换器从会话中检索用户时区

3-`SimpleDateFormat.setTimezone()`在解析/格式化之前使用

# javascript - Rails 数组到 HighCharts、Highstock、二维数组中的 javascript

> ID：13697674
> 
> 赞同：0
> 
> 时间：2012-12-04T07:01:14.767
> 
> 标签：javascript, ruby-on-rails-3, highcharts, highstock

在我的应用程序中，用户记录他们的体重和体重所属的日期。我希望该数据显示在 HighStock 折线图中。应该很简单，但在过去的 2 个月里，我一直在研究这个（部分）。我看过很多不同的东西，但我无法让它发挥作用。

我想显示的确切数据是折线图中的实际线作为他们的体重，y 轴将是他们的体重，x 轴将是用户输入该体重的日期。

即用户在表格中输入他们昨天的体重为 135，他们在表格中输入的日期是 2012 年 12 月 3 日。

不知道是否重要，但用户有_许多权重，权重属于_用户。

这就是我所拥有的，我得到了一堆不同的错误。我肯定在这里错过/不理解一些东西：

重量型号：

```
class Weight < ActiveRecord::Base

 def user_weight_series(user, weight)
  weights_by_weight_date = Weights.select("date(weight_date) as dater, content as   weights")
   weights_by_weight_date.map do |record|
parts = %w[%Y %m %d].map{ |s| record.dater.send(s) }
"[Date.UTC(#{parts.join(',')}), #{record.weights}]"
  end
end 
```

应用程序.html.erb

```
 <script type="text/javascript">
    $(function () {
    var chart;
     $(document).ready(function() {
    window.chart = new Highcharts.StockChart({

        chart: {
            renderTo: 'weight_chart',
            type: 'line',
            marginRight: 20,
            marginBottom: 25
        },
        title: {
            text: 'Your Weight Over Time',
            x: -20 //center
        },
        yAxis: {
            title: {
                text: 'Weight'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },

        legend: {
            layout: 'vertical',
            align: 'center',
            verticalAlign: 'bottom',
            x: -10,
            y: 100,
            borderWidth: 0
        },

        scrollbar: {
          enabled: true
        },

        rangeSelector : {
            selected : 1
        },

        credits: {
            enabled: false
        },

        series: [{
            tickInterval: <%= 1.day * 1000 %>,
            pointStart: <%= 3.weeks.ago.at_midnight.to_i * 1000 %>,
            name: 'Weight',
            data: [ <%= current_user.user_weight_series(user, weight).join(", ") %> ],

        }]
    }, 

    function(chart){

        // apply the date pickers
        setTimeout(function(){
            $('input.highcharts-range-selector', $('#'+chart.options.chart.renderTo))
                .datepicker()
        },0)

    });
});

}); 
```

最好的方法是什么？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T20:33:12.940

这是我使用的过程，以及一些帮助您入门的技巧：

1.  从您想要创建的所需显示向后工作，使用虚拟 json 数据填充图表。
2.  弄清楚如何创建与虚拟 json 数据系列匹配的真实数据库数据的 ruby​​ 哈希。对于时间戳，将它们转换为高图表可读格式，如下所示：

    ```
    SOME_DATE.to_time.to_i * 1000 
    ```

3.  让您的一个控制器将生成的 ruby​​ 哈希呈现为 json。

    ```
    def some_controller_method
      @chart_data_series = [] // your desired series here

      respond_to do |format|
        format.json { render :json => @chart_data_series }
      end
    end 
    ```

4.  从相应页面读取此 json 并将其传递到您的图表系列中。一种方法是使用[d3](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json)：

    ```
    function buildChart(){
      d3.json("/path/to/your/data.json", function(error, json_data) {

        $('#chart_container').highcharts({
            chart: {type: 'column'}, 
            // options, options, etc
            series: json_data,
            // options, options, etc
        });

      });
    }); 
    ```

# java - Android后退按钮不起作用

> ID：13697677
> 
> 赞同：5
> 
> 时间：2012-12-04T07:01:39.030
> 
> 标签：java, android, android-activity, cocos2d-x

我正在使用 cocos2dx 制作一个小游戏，在我的游戏活动中，我提供了以下函数来处理后退按钮。

```
@Override
 public boolean onKeyDown(int keyCode, KeyEvent event)
 {
     return super.onKeyDown(keyCode, event);
 }

 @Override
 public void onDestroy()
 {
     android.os.Process.killProcess(android.os.Process.myPid());
     super.onDestroy();
 } 
```

按下后退按钮时，我在 logcat 中收到以下警告

> 无法打开 keycharmap 文件
> 
> 加载键字符映射文件“/system/usr/keychars/qtouch-touchscreen.kcm.bin”时出错。hw.keyboards.65538.devname='qtouch-touchscreen'

该调用未到达 onKeyDown 或 onDestroy 函数。

请告诉我为什么会出现此警告以及为什么我无法处理 android 后退按钮。

这些功能在我的 java android 项目上运行良好，但在我的 cocos2d-x 项目中运行良好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T07:47:45.237

已在文件中处理`Cocos2dxGLSurfaceView.java`

把它改成下面，`myActivity`cocos2dAccticity 在哪里

```
 case KeyEvent.KEYCODE_BACK:
                    AlertDialog ad = new AlertDialog.Builder(myActivity)
                    .setTitle("EXIT?")
                    .setMessage("Do you really want to exit?")
                    .setPositiveButton("YES", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            ((Cocos2dxActivity)myActivity).finish();
                        }
                    })
                    .setNegativeButton("NO", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {

                        }
                    }).create();
                    ad.show();
            return true;
        case KeyEvent.KEYCODE_MENU: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:07:28.573

要处理后退按钮按下，您需要重新定义`onBackPressed()`活动的方法，而不是这两种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:04:44.743

你启用触控了吗？如果没有，请启用它，希望它会解决您的问题。

我假设这是您游戏屏幕上的按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T07:21:05.540

只是您的应用程序实现了 onKeyDown 的覆盖方法，

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // Here to implements for your code.
        Log.d(TAG, "KEYCODE_BACK");
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-09T17:57:52.633

这是 Cocos2d-x 3+ 版本的更新

[在这里](https://stackoverflow.com/questions/24049840/back-and-home-buttons-pressed-event-for-android-devices-cocos2d-x-3)已经简单地回答了这个问题（并且有效）

以及稍微不完整的 youtube[在这里](https://www.youtube.com/watch?v=KjKLs_A0gg0)

# android - 将android模拟器作为服务器运行

> ID：13697678
> 
> 赞同：0
> 
> 时间：2012-12-04T07:01:50.753
> 
> 标签：android, tcp, android-emulator, tcpserver

我想从 android 模拟器接收 AT 命令并从用 C 编写的 TCP 客户端程序发回回复。

我通过给出命令“ `emulator -shell-serial tcp::4444,server`”在 ubuntu-10.4 系统上作为服务器运行 Android ICS 模拟器，在另一个终端中我正在运行用 C 编写的 TCP 客户端，试图连接到同一个端口。

我能够看到模拟器 GUI 出现，但我没有在客户端收到任何 AT 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:08:36.403

我得到了答案，在模拟器命令中我需要通过 -radio 而不是 -shell-serial。现在我可以在我的客户端程序中接收所有 AT 命令

# php - 正则表达式在 preg 替换中更改 $ char

> ID：13697681
> 
> 赞同：1
> 
> 时间：2012-12-04T07:02:00.363
> 
> 标签：php, regex, replace

我需要你们的帮助将 $ 替换为字符。似乎 $ 在 preg replace 中结束了该行，我想将“$”字符替换为“;$”

我已经编写了代码：

```
$search = array(
"/\$/",

    $replace = array(
";$",
    echo preg_replace($search,$replace,"example $variable to replace"); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:13:56.557

根据 RegexBuddy 的说法，以下应该有效：

```
$result = preg_replace('/\$/', ';$', $subject); 
```

您的问题与在源字符串中[使用双引号而不是单引号有关。](http://php.net/manual/de/language.types.string.php#language.types.string.syntax.double)尝试

```
$result = preg_replace('/\$/', ';$', 'example $variable to replace'); 
```

以避免源字符串中的变量插值。`$`或者在你的字符串中转义：

```
$result = preg_replace('/\$/', ';$', "example \$variable to replace"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:23:09.353

`$result = preg_replace('/\$/', ';$', $subject);`

# c - 澄清 C 中实现定义的行为

> ID：13697682
> 
> 赞同：0
> 
> 时间：2012-12-04T07:02:02.370
> 
> 标签：c, types, implementation

作为 C 中实现定义行为的一个示例。C 标准说数据类型的大小是实现定义的。所以，说`sizeof(int)`是实现定义的。

1.  这种实现定义的行为是否意味着`size(int)`依赖于平台或由编译器供应商定义或两者兼而有之？

2.  一旦我编译了我的代码，当我在不同版本的平台上运行它时，实现依赖关系是否仍然适用？在一个平台上编译实现定义的代码并在另一个平台上运行它会导致性能损失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:05:04.180

是的，实现定义意味着它取决于平台（架构 + 操作系统 ABI + 编译器）。

是的，实现定义的功能可能因平台的不同版本而异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:07:44.673

> 此实现定义的行为是否意味着 size(int) 取决于平台或由编译器供应商定义或两者兼而有之？

原则上，编译器供应商可以做出该决定。在实践中，如果编译器想要发出直接调用系统库的代码，那么它必须遵循与系统相同的“ABI”（应用程序二进制接口），除此之外，ABI 将指定`int`. 因此编译器供应商将“决定”使其达到 ABI 所说的大小。

针对多个平台和架构的编译器将作为每个平台配置的一部分单独做出决定。然后，每个目标都代表一个*不同*的C 实现，即使您将其视为“相同的编译器”。

您可以编写一个符合标准的 C 实现，其中`int`的大小与运行程序的操作系统上的大小不同。人们很少这样做，并且标准库在进行系统调用时不得不跳过额外的环节。它作为模拟器的一部分可能很有用，但是您可能会合理地争辩说“平台”是模拟平台，而不是具有不同大小 int 的主机平台。

> 一旦我编译了我的代码，当我在不同版本的平台上运行它时，实现依赖关系是否仍然适用？

`sizeof(int)`是一个编译时常量，这意味着您的编译器发出的代码可能会采用某个值。然后，该二进制代码无法在具有不同大小的平台的不同版本上正确运行`int`。

> 在一个平台上编译实现定义的代码并在另一个平台上运行它会导致性能损失吗？

如果它完全有效，那么没有特别的理由假设会有性能损失。它通常根本不起作用（见上文），因为通常用于一个平台的二进制代码在另一个平台上不起作用。如果平台足够相似以至于它确实可以工作，那么编译器为一个平台所做的优化可能在另一个平台上并不是那么好的优化。在这种情况下，会出现性能损失，解决方法是重新编译针对正确（版本）平台的代码。

这确实发生在 ARM 上，在 x86 上发生的程度较小。过去不同的芯片提供基本相同的指令集，但某些芯片上的一些指令相对于其他指令具有显着不同的成本。假设指令 X 很快的优化可能是在指令 X 很慢的不同芯片上的糟糕优化。正如你可以想象的那样，这种差异并没有使芯片制造商在编译器供应商中大受欢迎，在汇编程序员中更是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T07:22:08.877

> 此实现定义的行为是否意味着 size(int) 取决于平台或由编译器供应商定义或两者兼而有之？

在 C 标准术语中，*实现*是编译器。

这是术语*implementation*的 C 标准的实际定义：

> (C99, 3.12p1) **implementation：**特定的软件集，在特定的控制选项下在特定的翻译环境中运行，为特定的执行环境执行程序翻译，并支持在特定执行环境中执行功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:09:29.160

size(int) 确实依赖于实现。它与性能无关，而与您正在使用的平台的架构有关。32 位宽的 CPU 的行为与 64 位宽的 CPU 甚至 16 位宽的 CPU 的行为不同。

这就是他们主要指的平台依赖，但也存在交叉编译的问题，这带来了更多的问题。您可以使用 -m 之类的标志来指定架构和宽度，这会导致代码在与最初编译时不同的平台上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T07:09:40.183

根据C-标准

> ISO/IEC 9899:1999 §3.4.1
> 
> 1**实现定义的行为**
> 未指定的行为，其中每个实现都记录了如何做出选择`

这意味着编译器中记录的行为是`implementation defined`.

`sizeof()`记录在案。

> 2 示例：实现定义行为的一个示例是当有符号整数右移时高位的传播。

附件 J“可移植性问题”包括未指定行为 (J.1)、未定义行为 (J.2)、实现定义行为 (J.3) 和区域特定行为 (J.4) 的列表。

# android - 对话框关闭时是否取消doInBackground？

> ID：13697684
> 
> 赞同：1
> 
> 时间：2012-12-04T07:02:04.710
> 
> 标签：android, android-asynctask

我在 AsyncTask 中有一个自定义进度对话框，它充当下载进度，我想在按下自定义取消按钮时中断 doInBackground。似乎当对话框关闭时， doInBackground 恢复没有任何问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:01:15.757

您可以`AsyncTask.cancel(true)`从对话框的取消事件中调用。为此，您确实需要对 AsyncTask 的引用，这可能是在任务启动时初始化的实例变量。然后在`asyncTask.doInBackground()`方法中，您可以检查`isCancelled()`或覆盖该`onCancelled()`方法并在那里停止正在运行的任务。

例子：

```
//Asynctask instance variable
private YourAsyncTask asyncTask;

//Starting the asynctask
public void startAsyncTask(){
   asyncTask = new YourAsyncTask();
   asyncTask.execute();
}

//Dialog code
loadingDialog = ProgressDialog.show(ThisActivity.this,
                                               "",
                                               "Loading. Please wait...",
                                               false,
                                               true,
                                               new OnCancelListener()
                                               {

                                                 @Override
                                                 public void onCancel(DialogInterface dialog)
                                                 {
                                                   if (asyncTask != null)
                                                   {
                                                     asyncTask.cancel(true);
                                                   }
                                                 }
                                               }); 
```

编辑：如果您从 AsyncTask 内部创建对话框，则代码不会有很大不同。您可能不需要实例变量，我认为您可以在这种情况下调用 YourAsyncTask.this.cancel(true) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:28:52.367

```
I want to interrupt doInBackground when my custom cancel button pressed. 
```

=>**`cancel()`**在取消按钮单击事件中调用 AsyncTask 的方法。现在这还不足以取消 doInBackground() 过程。

例如：

```
 asyncTask.cancel(true); 
```

**`isCancelled()`要使用 cancel() 方法通知您已取消 AsyncTask，您必须使用inside`doInBackground()`**检查它是否已取消。

例如：

```
protected Object doInBackground(Object... x) 
{
  // do your work...

   if (isCancelled())  
       break;

} 
```

# jquery - 将 jquery clone 与其他功能一起使用

> ID：13697695
> 
> 赞同：1
> 
> 时间：2012-12-04T07:03:26.260
> 
> 标签：jquery, clone

**PS：之前有两个答案，我刷新这个页面，答案消失了，这是怎么回事？**

演示：[jsbin 中的演示](http://jsbin.com/itemip/2/watch)

html

```
<table>
<tr class='test_tr'>
  <td>
    <select class='test_select'>
      <option value=1>test1</option>
      <option value=2>test2</option>
      <option value=3>test3</option>
    </select>
  </td>
  <td><a href="#" class='test_clone'>clone</a></td>
</tr> 
```

js

```
$(document).ready(function(){
  $('select.test_select').selectmenu();
  $('.test_clone').click(function(){
    var tp = $(this).parents('.test_tr');
    var new_tr = tp.clone(true);
    new_tr.insertAfter(tp);
    tr_func(new_tr);
  })
});
  function tr_func(new_tr){
     $('.test_select',new_tr).selectmenu();
  } 
```

单击克隆按钮并单击新选择后，它始终影响到第一个。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:13:25.100

这个问题有几个有趣的方面：

1.  克隆行时，所有具有`id`属性的项目也将被克隆，导致两个元素具有相同的`#ID`; 这不好。它可以通过创建一个原始示例行来解决，每次您单击按钮时都会克隆该示例行，然后您必须先“装饰”才能使用它（即应用`.selectmenu()`和单击处理程序）。

2.  克隆a 时`<select>`，它不会保留所选选项。您必须保存该`selectedIndex`属性并将其应用于克隆版本。

解决的两个问题如下所示：

```
 $(document).ready(function() {
    // keep reference to the sample row
    var sample = $('.test_tr.sample');
    // click handler for the clone button
    function cloneRow()
    {
      var parentRow = $(this).parents('.test_tr'),
          selectedOption = parentRow.find('.test_select').prop('selectedIndex');

      setupRow(newRow().insertAfter(parentRow), selectedOption);
    }

    // decorates the new row and sets the correct selected option before applying
    // selectmenu()
    function setupRow(row, selectedOption)
    {
      row
        .find('.test_select')
          .prop('selectedIndex', selectedOption || 0)
          .selectmenu()
          .end()
        .find('.test_clone')
          .click(cloneRow)
          .end()
    }

    // helper function that clones the sample and shows it before handing it over
    // to other code.
    function newRow()
    {
      return sample.clone().show();
    }

    // setup the first row
    setupRow(newRow().appendTo('table'));
  }); 
```

[**演示**](http://jsbin.com/itemip/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:54:26.560

这是我想出的，更少的代码，没有外部功能。

```
$('select.test_select').selectmenu();
$('.test_clone').on('click', function(){
    var $row = $(this).parents('.test_tr');  //get parent tr row
    var $select = $row.find('.test_select'); //get select box
    var selectedIndex = ($select.prop('selectedIndex') || 0); //copy current selectedIndex
    $select = $select.clone(false); //clone select box, withDataAndEvents = false
    $select.prop('selectedIndex', selectedIndex);  //apply selectedIndex
    $select.removeAttr('id'); //remove id as selectmenu will apply the correct id
    var $tbody = $row.parent();
    var $newrow = $row.clone(true); //clone row, withDataAndEvents = true
    $('td:first', $newrow).empty(); //empty the first td
    $('td:first', $newrow).append($select); //append cloned select box
    $tbody.append($newrow); //append row to table
    $('.test_select', $newrow).selectmenu(); //apply jquery.ui.selectmenu
}); 
```

[演示](http://jsfiddle.net/syNy3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:23:18.733

生成的所有克隆选择框都具有相同的 id。那是无效 DOM 结构的一个例子。

可能这就是导致始终打开第一个选择菜单的原因，其中任何一个都被单击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:54:59.617

必须可能当你这样做时`clone()`，它也会克隆菜单小部件元素，因此会产生奇怪的行为。我尝试更新您的代码以从模板元素克隆并且它有效。

[http://jsbin.com/onozeh/1/edit](http://jsbin.com/onozeh/1/edit)

# wordpress - 哪个代码将 wordpress 小部件中的日历与帖子相关联？

> ID：13697699
> 
> 赞同：2
> 
> 时间：2012-12-04T07:03:46.013
> 
> 标签：wordpress

如果我们单击日期，小部件中的 Wordpress 默认日历会显示该特定日期发布的帖子。我需要执行此操作的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:28:45.163

它在`wp-includes/default-widgets.php`课堂上`WP_Widget_Calendar`

在那里你会找到对该[`get_calendar`](http://codex.wordpress.org/Function_Reference/get_calendar)函数的调用。`get_calendar`本身在：`wp-includes/general-template.php`它应该在第 1074 行附近。

就像小部件一样，只要放在`get_calendar()`任何地方都会生成带有可点击帖子的日历。请记住，必须有帖子才能点击。

在多个站点上进行了测试。

# ruby-on-rails - 重定向到应用程序路由时如何删除Angular JS Route“#_=_”（通过rails）

> ID：13697702
> 
> 赞同：3
> 
> 时间：2012-12-04T07:04:00.027
> 
> 标签：ruby-on-rails, url-routing, angularjs

我有一个 rails 动作，它重定向到我的应用程序的根目录，但 angular 似乎添加`#_=_`到了路由中。

我不明白为什么要添加它。它不会造成任何伤害，但看起来并不专业。

想知道如何避免将其附加到根目录。

注意：仅在重定向后添加。直接访问 root 不会追加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:01:49.390

这是由 facebook 而不是 angular 添加的

# excel - 链接到其他工作簿的 Excel 公式不会自动更新（不打开源代码）

> ID：13697703
> 
> 赞同：9
> 
> 时间：2012-12-04T07:04:02.417
> 
> 标签：excel, excel-formula

链接到其他工作簿的 Excel 公式不会自动更新（不打开源代码），但是当我打开源工作簿时，它会自动更新。

是否可以在不打开源工作簿的情况下更新数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:49:25.400

创建外部参考（也称为链接）时，您可以控制外部参考是否保持最新以及何时更新。如果另一个用户更改了单元格中的值，Microsoft Office Excel 不会查找新值，除非您告诉它这样做。

要更新链接，请在信任栏上单击选项，然后单击启用此内容。

[此文档包含](http://office.microsoft.com/en-us/excel-help/control-when-external-references-links-are-updated-HP010102348.aspx?CTT=3)您想要做的更多的完整详细信息

*   了解有关外部参考的更多信息
*   控制指向其他工作簿的链接
*   手动更新工作簿中的所有链接或不更新任何链接
*   仅手动更新一些指向其他工作簿的链接
*   更新所有链接的启动提示不要询问是否
*   打开任何工作簿时更新链接，并自动更新链接
*   不要要求更新此工作簿的链接，让我控制是否更新链接
*   决定是否在启动时提示时更新链接

# java - 部署 Coherence REST 时 DefaultCacheServer 的问题

> ID：13697704
> 
> 赞同：0
> 
> 时间：2012-12-04T07:04:02.600
> 
> 标签：java, rest, deployment, oracle-coherence

首先，我是 Java 编程的新手，因为我实际上是 PHP 程序员而不是 Java 程序员。我的团队想要使用 PHP 和 Coherence REST 构建一个系统。

第一次，我尝试使用 Glassfish 部署它，根据此网址[http://docs.oracle.com/cd/E24290_01/coh.371/e22839/rest_deploy.htm#BABBIIEE](http://docs.oracle.com/cd/E24290_01/coh.371/e22839/rest_deploy.htm#BABBIIEE)中的文章，我收到此错误“试图上传非法战争档案。确保档案文件包含描述符文件 web.xml。

之后，我尝试根据此 url [http://docs.oracle.com/cd/E24290_01/coh.371/e22839/rest_example.htm#CHDBDGHG](http://docs.oracle.com/cd/E24290_01/coh.371/e22839/rest_example.htm#CHDBDGHG)中的文章手动部署 我得到了这个错误：线程“主”中的异常" java.lang.NoClassDefFoundError: com/tangosol/net/DefaultCacheServer。找不到主类：com.tangosol.net.DefaultCacheServer。程序将会退出。

有没有人可以帮助我解决我的问题？

任何信息将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:12:18.680

我的错，我已经找到了解决方案。我有错误的环境变量。新手误区。多谢你们

# arrays - 取一些数组而不循环

> ID：13697714
> 
> 赞同：3
> 
> 时间：2012-12-04T07:04:52.503
> 
> 标签：arrays, perl

我还是 Perl 的新手。我正在尝试获取一些数组并将它们放入另一个数组而不使用循环。

```
my @array1 = ("abc", "def", "ghi", "jkl", "mno", "pqr");
my @array2=$array1[2 .. 4]; 
```

但它行不通。

我希望@array2 的结果是“def ghi jkl”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:06:34.393

您需要使用`@`for 数组切片而不是标量标记 ( `$`)：

```
my @array1 = ("abc", "def", "ghi", "jkl", "mno", "pqr"); 
my @array2=@array1[2 .. 4];              # ====> @array1 not $array1
print join(",", @array2), "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:46:29.347

列表切片的语法是`@array[EXPR]`(not `$array[EXPR]`)，所以你想要

```
my @array2 = @array1[2..4]; 
```

请注意，上面有三个循环。如果你想避免循环，你必须使用

```
my @array2;
$array2[0] = $array1[2];
$array2[1] = $array1[3];
$array2[2] = $array1[4]; 
```

不过，我怀疑你是否真的想避免循环，尽管有请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:08:41.237

将您的陈述更改为以下内容：

```
@array2=@array1[2..4]; 
```

# django - 如何在 django 的网页中包含一个小而轻的独立应用程序？

> ID：13697716
> 
> 赞同：0
> 
> 时间：2012-12-04T07:05:01.390
> 
> 标签：django, python-2.7, django-views

我需要在客户端运行的网站上添加货币转换器和计算器。类似于java中的servlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:10:48.317

在 django 项目中添加客户端“任何东西”与添加图像、视频或其他任何东西没有什么不同。Django 并不特别关心您在模板中添加了什么。它只是在服务器端呈现模板以解析您的模板语言代码，然后为客户端提供一个正常的网页。

所以你的问题的答案是......做你通常在html页面中做的任何事情，将你选择的解决方案嵌入到页面中。

这里唯一特定于 django 的问题可能是如何使用模板标签获取媒体路径，这与获取图像、javascript 和 css 等静态内容没有什么不同。您可以在 django 文档中阅读更多相关信息：[管理静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)

# java.util.scanner - 如何使当我将一个值输入到扫描仪中时，如果它不是整数，它不会给我一个错误？

> ID：13697720
> 
> 赞同：1
> 
> 时间：2012-12-04T07:05:18.113
> 
> 标签：java.util.scanner, parseint

我正在编写一个程序来解决简单的数学问题。我想要做的是使它即使我在扫描仪级别输入一个字符串也不会给我一个错误。该级别是选择数学问题的难度。我已经尝试过 parseInt，但现在不知道该做什么。

```
import java.util.Random;
import java.util.Scanner;
public class Test { 
    static Scanner keyboard = new Scanner(System.in);
    static Random generator = new Random();
    public static void main(String[] args) {
        String level = intro();//This method intorduces the program,
        questions(level);//This does the actual computation.
    }
    public static String intro() {

        System.out.println("HI - I am your friendly arithmetic tutor.");
        System.out.print("What is your name? ");
        String name = keyboard.nextLine();
        System.out.print("What level do you choose? ");
        String level = keyboard.nextLine();
        System.out.println("OK " + name + ", here are ten exercises for you at the level " + level + ".");
        System.out.println("Good luck.");
        return level;
    }
    public static void questions(String level) {
        int value = 0, random1 = 0, random2 = 0;
        int r = 0, score = 0;
        int x = Integer.parseInt("level");
        if (x==1) {
            r = 4;          
        }       
        else if(x==2) {
            r = 9; 
        }
        else if(x==3) {
            r = 50; 
        }
        for (int i = 0; i<10; i++) {
            random1 = generator.nextInt(r);//first random number.
            random2 = generator.nextInt(r);//second random number.
            System.out.print(random1 + " + " + random2 + " = ");
            int ans = keyboard.nextInt();
            if((random1 + random2)== ans) {
                System.out.println("Your answer is correct!");
                score+=1;
            }
            else if ((random1 + random2)!= ans) {
            System.out.println("Your answer is wrong!");
            }
        }
        if (score==10 || score==9) {
            if (score==10 && x == 3) {
                System.out.println("This system is of no further use.");
            }
            else {
                System.out.println("Choose a higher difficulty");
            }
            System.out.println("You got " + score + " out or 10");
        }
        else if (score<=8 && score>=6) {
            System.out.println("You got " + score + " out or 10");
            System.out.println("Do the test again");
        }
        else if (score>6) {
            System.out.println("You got " + score + " out or 10");
            System.out.println("Come back for extra lessons");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T17:25:40.700

我看到的第一个错误是您尝试`Integer.parseInt()`使用*字符串*“级别”而不是名为级别的*字符串变量*

```
 int x = Integer.parseInt("level"); 
```

应该

```
 int x = Integer.parseInt(level); 
```

此外，在定义级别时，您可以使用`keyboard.nextInt`而不是`keyboard.nextLine`

```
String level = keyboard.nextInt(); 
```

然后，您以后不必进行`Integer.parseInt()`操作

# php - CakePHP - 接受来自 URL 的参数

> ID：13697721
> 
> 赞同：0
> 
> 时间：2012-12-04T07:05:26.310
> 
> 标签：php, api, cakephp

我正在使用需要以以下形式调用 URL 的外部 API：

```
http://mysite/ussd/start?msisdn=123123123&provider=MTN 
```

start 是控制器方法。

我完全了解发送参数的格式，如下所示：

```
http://mysite/ussd/start/msisdn=123123/test=2 
```

但另一家公司无法更改他们调用 URL 的格式。

如何设置 Cake 以接受上述格式的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:12:21.997

你可以在这里使用`$this->params['url']['msisdn']`和`$this->params['url']['provider']`。您可以从蛋糕手册中了解[控制器参数。](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Controllers.html#url)

# javascript - 面向对象的 Javascript 原型，访问根变量？

> ID：13697722
> 
> 赞同：0
> 
> 时间：2012-12-04T07:05:28.690
> 
> 标签：javascript, class, object, constructor, prototype

让我们进入它。我在 Javascript 中创建了一个有效的“惯性相机”，虽然我在 Javascript 方面非常有经验，但我没有在 JS 中进行原型设计的经验。我正在尝试使用初始函数构造函数按如下方式重构我的相机：

```
 function Inertia(subject, clickable) {
        this.subject = document.getElementById(subject);
        this.clickable = document.getElementById(clickable);
    } 
```

和原型：

```
 Inertia.prototype = {
        subject : document.getElementById(''),
        clickable : document.getElementById(''),
        camera : { angleX : 85, angleY : 0, angleZ : 0, translateX : 0, translateY : -100, depth : 0, flag : 1 },
        mouse  : { x : 0, y : 0 },
        friction : 1,
        inertia : true,

        mouseEvents : {
            mouseDown   :   function( e ) {
                                var IS = this; // This will not work because I am two levels away from "this" being my object.

                                // cancel existing animation
                                clearTimeout((window).animation);

                                (IS).mouse.x = e.clientX;
                                (IS).mouse.y = e.clientY;
                                (IS).camera.flag = 0;

                                // begin logging history to animate from as a new history stack
                                (IS).tools.pushHistory('reset');
                            }, 
```

... 继续 ...

我的问题是在我的原型对象中，我无法访问根级元素，例如`mouse.x`or `mouse.y`。在创建这样的原型时，为我的“惯性”类的这个特定实例访问这些元素的最佳方法是什么？这是完全错误的想法吗？

我希望以这种方式了解原型的正确实现。我查看了有关原型设计的教程和文章，但我还没有看到任何解决此嵌套问题的示例。他们都在原型中使用了一层，所以调用`this`不是问题。

我试图`var IS`使当前对象相等，因此在这个惯性相机的每个实例中，我只会改变那个特定的对象。但是，我的原型有两个层次，所以`this`关键字不起作用。如果我只有一个 的实例，我可以硬编码它等于变量名`new Inertia()`，但这显然是不可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:19:40.080

属性通常位于原型的构造函数和方法中。我认为您可能遗漏了一些概念；在原型中创建（和复制）属性没有意义，因为属性对于实例是唯一的。如果这些变量是私有的，通常的约定是在它前面加上一个下划线：

```
function Inertia( subject, clickable ) {

  this.subject = document.getElementById( subject );
  this.clickable = document.getElementById( clickable );

  // Private vars unique to each instance
  this._camera = { ... };
  this._mouse = { ... };
  this._friction = 1;
  this._inertia = true;

}

Inertia.prototype = {

  mouseDown: function( e ) {
    var self = this;
    // Now you can access and modify the private vars:
    self._mouse.x = e.clientX;
    ...
  }

}; 
```

# android - 将 URL 数据插入 JSONArray

> ID：13697731
> 
> 赞同：1
> 
> 时间：2012-12-04T07:05:59.253
> 
> 标签：android, arrays, json

我有以下网址：

events_value = new URL("https://graph.facebook.com/me/events?access_token="+access_token);

URL 给了我以下响应：

[https://graph.facebook.com/me/events?access_token=AAAAAAITEghMBAIBxLGB3PBYH3U5eF1reKAhNQQy85HWNuqGOl9NG2hsCCF8xLgMyc4bG51uo5dgt5c3M3UNcPnqhPVCtVZC4WVLveRmYRakas9AtQ](https://graph.facebook.com/me/events?access_token=AAAAAAITEghMBAIBxLGB3PBYH3U5eF1reKAhNQQy85HWNuqGOl9NG2hsCCF8xLgMyc4bG51uo5dgt5c3M3UNcPnqhPVCtVZC4WVLveRmYRakas9AtQ)

我试图将其放入 JSONArray：

```
JSONArray jArray = new JSONArray(events_value);   //this where the problem comes     
final String[] array_spinner = new String[jArray.length()];
for(int i=0;i<jArray.length();i++){
    JSONObject json_data = jArray.getJSONObject(i);
    String jj=json_data.getString("name");
    array_spinner[i] = jj;         
} 
```

创建数组时无法输入 events_value。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:20:38.393

此代码可能会对您有所帮助。尝试这个。

```
 JSONArray jArray = null;

        try {
        JSONObject json;
        // getting JSON string from URL
        if (url != null) {
            json = jParser.getJSONFromUrl(url);
            System.out.println("reading from url" + json);
        }

        // Getting Array of jArray
        jArray = json.getJSONArray(TAG_NAME);

        // looping through All jArray
        for (int i = 0; i < jArray.length(); i++) {
            JSONObject c = jArray.getJSONObject(i);
            Log.d(TAG_TYPE, c.getString(TAG_NAME));//print in log cat

        }
    } catch (JSONException e) {
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:40:27.867

```
public static JSONObject readJsonFromUrl(String url) throws IOException, JSONException {
    InputStream is = new URL(url).openStream();
    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
      String jsonText = readAll(rd);
      JSONObject json = new JSONObject(jsonText);
      return json;
    } finally {
      is.close();
    }
  }

.... 
```

然后你的代码：

```
JSONArray jArray = (JSONArray) readJsonFromUrl(events_value);
final String[] array_spinner = new String[jArray.length()];
for(int i=0;i<jArray.length();i++){
    JSONObject json_data = jArray.getJSONObject(i);
    String jj=json_data.getString("name");
    array_spinner[i] = jj;         
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:17:08.330

也许您的问题中有错字，但 events_value 是 URL 字符串而不是 JSONArray，因此您肯定会遇到异常。由于相关 url 的令牌已过期，我无法看到确切的响应，但请尝试检查响应是 JSONObject 还是 JSONArray。一个 JSONArray 必须在开头和结尾都有 '[' 和 ']'，如果不是，它就是一个 JSONObject。

**更新**

响应字符串具有数据和分页字段。所以数据字段是一个 JSONArray 和分页 JSONObject。要检索数据，请使用以下内容：

```
JSONObject response = new JSONObject(responseString)
JSONArray data = response.getJSONArray("data"); 
```

然后为数据数组上的每个项目解析属性。

# c# - 在文件中的确切位置找到字符串

> ID：13697734
> 
> 赞同：0
> 
> 时间：2012-12-04T07:06:06.977
> 
> 标签：c#

我需要知道 .txt 文件的确切位置是否有一些字符串。我知道如何使用 Contains 方法找到具体的字符串，但由于我不需要搜索整个文件（字符串将始终位于同一位置），我试图找到最快的解决方案。

```
if (searchedText.Contains(item))
{
   Console.WriteLine("Found {0}",item);
   break;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:18:19.603

如果它是 UTF-8 格式并且不能保证是 ASCII，那么您只需要读取相关的字符数。就像是：

```
 using (var reader = File.OpenText("test.txt"))
 {
     char[] buffer = new char[16 * 1024];
     int charsLeft = location;
     while (charsLeft > 0)
     {
         int charsRead = reader.Read(buffer, 0, Math.Min(buffer.Length,
                                                         charsLeft));
         if (charsRead <= 0)
         {
             throw new IOException("Incomplete data"); // Or whatever
         }
         charsLeft -= charsRead;
     }
     string line = reader.ReadLine();
     bool found = line.StartsWith(targetText);
     ...
 } 
```

笔记：

*   这在读取从目标位置开始的完整行方面效率低下。这比循环确保读取正确的数据要简单，但是如果您的文件行*很*长，您可能需要调整它。
*   此代码不处理不在 BMP（基本多语言平面）中的字符。它将它们计为两个字符，因为它们被读取为两个 UTF-16 代码单元。这不太可能影响您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:09:59.493

```
if(searchedText.SubString(i, l).Contains(item)) 
```

where`i`是起始索引，`l` 是您要搜索的字符串的长度。
由于您使用的是 Contains，因此您在`l`.

# android - Android：图像按钮未向右对齐

> ID：13697735
> 
> 赞同：1
> 
> 时间：2012-12-04T07:06:07.123
> 
> 标签：android, button

我希望将我的图像按钮放置在碎石的 rt 侧底部。但它不可见。请参阅代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Date of Birth:" />

        <Button
            android:id="@+id/dateButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:text="Select date" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Manual labour" />

        <EditText
            android:id="@+id/ed1"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:inputType="number" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Gender :" />

        <RadioGroup
            android:id="@+id/radioSex"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RadioButton
                android:id="@+id/radioMale"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="Male" />

            <RadioButton
                android:id="@+id/radioFemale"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Female" />
        </RadioGroup>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Occupation" />

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/occuaption_arrays"
            android:prompt="@string/occupation_prompt" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Monthly Income" />

        <Spinner
            android:id="@+id/spinner2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/income_arrays"
            android:prompt="@string/income_prompt" />
    </TableRow>
</TableLayout>

    <ImageButton
        android:id="@+id/next"
        android:layout_height="50dp"
        android:layout_width="50dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        android:contentDescription="dfg"
        android:src="@drawable/next"
        android:visibility="visible"/> 
```

我尝试使用 RelativeLayout 作为父级并添加属性 android:layout_alignParentRight="true" 和 android:layout_alignParentBottom="true"

我的图像非常大。这可能是个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:08:55.577

您已将 match-parent 设置为 TableLayout 的宽度和高度。所以 TableLayout 与 ImageButton 重叠

使用下面的代码...

```
 android:layout_width="match_parent"
 android:layout_height="wrap-content" 
```

# android - 如何重启安卓设备

> ID：13697736
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:06:10.723
> 
> 标签：android

如何在我的应用程序中关闭和重新启动 android 设备。如果可能，请给我一个建议。我搜索了很多，但没有代码适合我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:29:25.527

根据您所说的意图，您想做的事情在Android中是不可能的。如果您已root，则可以关闭手机，但以后无法将其唤醒。

您可能想要研究的是尽可能简单地将手机置于睡眠状态——将其置于飞行模式并关闭声音。...然后在给定时间重新启用所有这些。

如果您不想自己编写所有代码，可以使用各种调度应用程序，包括 Tasker（可以做更多事情）。

# ruby-on-rails - 如何在活动记录中编写查询以从 Rails 3 中的两个或多个表中进行选择

> ID：13697738
> 
> 赞同：0
> 
> 时间：2012-12-04T07:06:31.380
> 
> 标签：ruby-on-rails, activerecord

我不想使用加入

我想手动将任何字段与其他表字段进行比较

例如

选择 u.user_id，t.task_id

FROM 任务 t，用户 u

WHERE u.user_id = t.user_id

我如何在 Rails 中编写此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:29:12.483

假设您的模型中有关联，您可以简单地执行以下操作

```
User.joins(:tasks).select('users.user_id, tasks.task_id') 
```

你也可以这样做

```
User.includes(:tasks).where("user.id =tasks.user_id") 
```

包括将做预先加载检查下面的例子或在[这里阅读预先加载](http://guides.rubyonrails.org/active_record_querying.html)

```
users = User.limit(10)

users.each do |user|
  puts user.address.postcode
end 
```

这将运行 11 个查询，称为 N+1 查询问题（首先查询以获取所有行，然后再次查询每一行以执行某些操作）。with include Active Record 确保使用尽可能少的查询来加载所有指定的关联。

现在当你这样做的时候；

```
users = User.includes(:address).limit(10)

user.each do |user|
  puts user.address.postcode
end 
```

它将仅生成 2 个查询，如下所示

```
SELECT * FROM users LIMIT 10
SELECT addresses.* FROM addresses
  WHERE (addresses.user_id IN (1,2,3,4,5,6,7,8,9,10)) 
```

另外，如果您没有关联，请阅读以下内容；

您应该查看[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html) 假设您正在尝试进行内部连接，默认情况下，在 Rails 中，当我们关联两个模型然后查询它们时，我们正在进行内部连接那些桌子。

您必须在模型之间创建关联示例如下所示

```
class User
  has_many :reservations
  ...# your code
end 
```

在预订中

```
class Reservations
  belongs_to :user
  ... #your code
end 
```

现在当你做

```
User.joins(:reservations) 
```

生成的查询如下所示

```
"SELECT `users`.* FROM `users` INNER JOIN `reservations` ON `reservations`.`user_id` = `users`.`id`" 
```

您可以通过`User.joins(:reservations).to_sql`在终端中执行来检查查询

希望它能回答你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:16:11.947

```
User.find_by_sql("YOUR SQL QUERY HERE") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:38:54.237

你可以如下使用..

```
 User.includes(:tasks).where("user.id =tasks.user_id").order(:user.id) 
```

# excel - Vlookup 整行

> ID：13697743
> 
> 赞同：0
> 
> 时间：2012-12-04T07:07:02.147
> 
> 标签：excel, excel-2007, vlookup

我想使用工作簿中另一张工作表中的 Vlookup 搜索整行。目前我只能使用 excel 获取名称。有样本数据 & 搜索 123

```
Sheet 1
     ID    Name     Rates
    ----  ------   -------
     123   Onions    25$
     125   Tomatoes   6$

   Sheet2
       VLOOKUP(A2,Sheet1!B3:D5,2) 
```

给我123，洋葱。我要 123，洋葱，**25 美元**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:24:08.227

**表 1**

```
 ID    Name     Rates
----  ------   -------
 123   Onions    25$
 125   Tomatoes   6$ 
```

**表 2**

```
 ID
----
 125 
```

然后你可以将它用于 cell `B1`：

```
=CONCATENATE(VLOOKUP(A1;Sheet1!A2:C5;2;0);", ";VLOOKUP(A1;Sheet1!A2:C5;3;0)) 
```

# c++ - std::chrono::time_point 设置为现在

> ID：13697747
> 
> 赞同：4
> 
> 时间：2012-12-04T07:07:18.133
> 
> 标签：c++, time, c++11, chrono

我对这些库还是很陌生，我可以在 std::chrono 上找到的文档对我不起作用。

我正在尝试实现一个包含时间戳的对象容器。所有对象都将按从最近到最近的顺序存储，我决定尝试使用 std::chrono::time_point 来表示每个时间戳。处理数据的线程将定期唤醒，处理数据，查看何时需要再次唤醒，然后在这段时间内休眠。

```
static std::chrono::time_point<std::chrono::steady_clock, std::chrono::milliseconds> _nextWakeupTime; 
```

我的印象是上面的声明使用了毫秒精度的替代时钟。

下一步是将 _nextWakeupTime 设置为现在的表示；

```
_nextWakeupTime = time_point_cast<milliseconds>(steady_clock::now()); 
```

该行不会编译：

```
error C2679: binary '=' : no operator found which takes a right-hand operand of type 'std::chrono::time_point<_Clock,_Duration>' (or there is no acceptable conversion)
        with
        [
            _Clock=std::chrono::system_clock,
            _Duration=std::chrono::milliseconds
        ]
        chrono(298): could be 'std::chrono::time_point<_Clock,_Duration> &std::chrono::time_point<_Clock,_Duration>::operator =(const std::chrono::time_point<_Clock,_Duration> &)'
        with
        [
            _Clock=std::chrono::steady_clock,
            _Duration=std::chrono::milliseconds
        ]
        while trying to match the argument list '(std::chrono::time_point<_Clock,_Duration>, std::chrono::time_point<_Clock,_Duration>)'
        with
        [
            _Clock=std::chrono::steady_clock,
            _Duration=std::chrono::milliseconds
        ]
        and
        [
            _Clock=std::chrono::system_clock,
            _Duration=std::chrono::milliseconds
        ] 
```

我知道在 Windows 系统上，stead_clock 与 system_clock 是一样的，但我不知道这里发生了什么。我知道我可以这样做：

```
_nextWakeupTime += _nextWakeupTime.time_since_epoch(); 
```

我只是觉得这不能很好地代表我应该做什么。

* * *

同样，实例化给定时钟/持续时间的 time_point 对象并将其设置为等于现在的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T15:37:52.257

对你来说最简单的事情就是给出`_nextWakeupTime`type `steady_clock::time_point`。

```
steady_clock::time_point _nextWakeupTime; 
```

您可以查询 this 的解决方案`time_point`是什么`steady_clock::time_point::period`，这为您提供`std::ratio`了静态成员`num`和`den`.

```
typedef steady_clock::time_point::period resolution;
cout << "The resolution of steady_clock::time_point is " << resolution::num
     << '/' <<resolution::den << " of a second.\n"; 
```

从您的供应商发出的错误消息中可以看出`system_clock::time_point`，它们`steady_clock::time_point`是相同的`time_point`，因此它们共享相同的时期，您可以在算术中混合两者。为了便于处理这种情况，您可以查询 a`time_point`的时钟：

```
time_point::clock 
```

即在您的实现`steady_clock::time_point::clock`中不是`steady_clock`but `system_clock`。如果你真的想要一个`time_point`兼容`steady_clock::time_point`但具有毫秒分辨率的，你可以这样做：

```
time_point<steady_clock::time_point::clock, milliseconds> _nextWakeupTime; 
```

# mysql - mysql慢查询日志中的sleep()

> ID：13697755
> 
> 赞同：0
> 
> 时间：2012-12-04T07:07:58.777
> 
> 标签：mysql, security, sql-injection

不知何故，我在 mysql 慢查询日志文件中将 sleep() 函数注入到许多查询中。在项目的源代码中没有使用这样的功能，在 apache 访问日志中它也不存在......那个注入是怎么来的？

**例子：**

```
Count         : 64  (0.05%)
Time          : 156971.170609 s total, 2452.674541 s avg, 1635.656901 s to 3269.711339 s max  (0.00%)
  95% of Time : 143892.367342 s total, 2398.206122 s avg, 1635.656901 s to 3269.692319 s max
Lock Time (s) : 13.918 ms total, 217 <B5>s avg, 39 <B5>s to 3.076 ms max  (0.00%)
  95% of Lock : 6.909 ms total, 115 <B5>s avg, 39 <B5>s to 1.026 ms max
Rows sent     : 1 avg, 1 to 1 max  (0.00%)
Rows examined : 817 avg, 817 to 817 max  (0.00%)
Database      : 
Users         : 
        hostname and IP address : 100.00% (64) of query, 87.12% (106190) of all users

Query abstract:
SET timestamp=N; SELECT COUNT(*) AS total FROM new_forum_topics WHERE status = N AND forum_id = N AND sleep(N) AND posts_count > N ORDER BY inserted ASC;

Query sample:
SET timestamp=1344768385;
SELECT count(*) as total
            FROM `new_forum_topics`
            WHERE `status` = 1
                AND `forum_id` = 6 and sleep(2) 
                AND `posts_count` > 0
            ORDER BY `inserted` ASC; 
```

但在代码中查询看起来像

```
$sql = "SELECT count(*) as total
            FROM `new_forum_topics`
            WHERE `status` = ".intval($this->STATUS_ACTIVE)."
                AND `forum_id` = ".intval($forum_id)."
                AND `posts_count` > 0
            ORDER BY `inserted` ASC;"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:26:07.553

您正在运行的应用程序中很可能存在 SQL 注入漏洞。没有细节，我们无法确定它是什么。

# android - 在 Android 上使用 JSON 连接到 WCF Web 服务

> ID：13697757
> 
> 赞同：1
> 
> 时间：2012-12-04T07:08:10.473
> 
> 标签：android, wcf, web-services

最近我正在开发 Android 应用程序，我想做的是将 .net WCF 中的 Web 服务消费到我的应用程序中

这是我的客户代码

```
import java.io.InputStream;<br>
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;<br>
import org.apache.http.HttpResponse;<br>
import org.apache.http.client.methods.HttpGet;<br>
import org.apache.http.impl.client.DefaultHttpClient;<br>
import org.json.JSONObject;<br>

import android.R.string;<br>
import android.os.Bundle;<br>
import android.app.Activity;<br>
import android.view.Menu;<br>
import android.view.View;<br>
import android.widget.TextView;<br>

public class MyPamIndex extends Activity {

    private final static String SERVICE_URI = "http://172.30.2.95:9000/JSON/MyPam.svc";
    private TextView NabVals;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_pam_index);

            NabVals = (TextView)findViewById(R.id.textView2);
    }
    public void OnRefreshClick(View button)
    {
         try {
             // Send GET request to <service>/GetVehicle/<plate>
             DefaultHttpClient httpClient = new DefaultHttpClient();
             HttpGet request = new HttpGet(SERVICE_URI + "/ProductID/" + "1");

             request.setHeader("Accept", "application/json");
             request.setHeader("Content-type", "application/json");

             HttpResponse response = httpClient.execute(request);
             HttpEntity responseEntity = response.getEntity();

             // Read response data into buffer
             char[] buffer = new char[(int)responseEntity.getContentLength()];
             InputStream stream = responseEntity.getContent();
             InputStreamReader reader = new InputStreamReader(stream);
             reader.read(buffer);
             stream.close();

             JSONObject vehicle = new JSONObject(new String(buffer));
             NabVals.setText(vehicle.getString("NabValue"));
             // Populate text fields

         } catch (Exception e) {
             e.printStackTrace();

         }
    } 
```

当我运行应用程序时，它在 HttpResponse response = httpClient.execute(request); 中有错误 我已经搜索了整个论坛但什么也没找到我已经添加了我的 android 清单文件但仍然无法工作请帮助我

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.core.mypam"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-permission android:name="anroid.permission.INTERNET"></uses-permission>
    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.core.mypam.MyPamIndex"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

“http://172.30.2.95:9000”不是我的机器IP，而是位于同一局域网内的其他PC上请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:56:31.757

您正在 UI 线程上发出网络请求。这不再被允许，并且会引发异常。您需要将代码移动到 AsyncTask 中。谷歌`NetworkOnMain`有很多例子。

# ruby - click_no_wait 不作为点击

> ID：13697758
> 
> 赞同：0
> 
> 时间：2012-12-04T07:08:14.717
> 
> 标签：ruby, watir, web-testing

我有一些这样的代码：

```
 content.button(:id,/Submit/).click_no_wait
    puts 2
    autoit = WIN32OLE.new("AutoItX3.Control")
    puts 3
    autoit.WinWait "XXXX"
    puts 4
    autoit.ControlClick "","OK","Button1" 
```

单击提交按钮后，会弹出一个警告框，之后的代码将单击确定。“单击”功能将程序挂在那里，因此我需要使用“click_no_wait”。

但结果，我可以得到3的puts，并且提交按钮没有被舔。

为什么？最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:07:46.333

如果您正在处理 javascript 弹出窗口，请参阅此页面：[http ://watirwebdriver.com/javascript-dialogs/](http://watirwebdriver.com/javascript-dialogs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:41:59.860

如果`#click_no_wait`没有打开对话框，但经常`#click`会打开，那么由于某种原因它不起作用。我在[http://itreallymatters.net/post/1366392123/debugging-and-improving-watirs-click-no-wait-method#.UMCuJoOgnvA](http://itreallymatters.net/post/1366392123/debugging-and-improving-watirs-click-no-wait-method#.UMCuJoOgnvA)`#click_no_wait`写了一篇关于调试问题的博客文章

简而言之，设置`$DEBUG`为`true`before`#click_no_wait`以获取更多故障排除信息：

```
$DEBUG=true
content.button(:id,/Submit/).click_no_wait
$DEBUG=false 
```

# php - 条件怎么写？

> ID：13697759
> 
> 赞同：0
> 
> 时间：2012-12-04T07:08:27.497
> 
> 标签：php

```
$tree = taxonomy_get_tree($vid);
print "<li>";                    // 1 line 
foreach ($tree as $term ) {      // 2 lines
   $diffdepth=0;
   if ($term->depth > $depth) {
      print "<ul class='haschild'><li>";
      $depth = $term->depth;
   } 
```

以上是原始代码，现在我想根据`$term->depth > $depth` 条件输出。（`print "<li>";` ）这一行。

即，

```
if ($term->depth > $depth) { 
   echo '<li class="parent">'; 
} 
else { 
   print "<li>"; 
} 
```

但是`$term->depth`可以在foreach循环之后使用，但是我想在1行使用它，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:20:10.573

而不是`print`in-line，将所需的输出分配给变量，然后在逻辑完成后将其发送到浏览器。

```
$tree = taxonomy_get_tree($vid);
$parent = ""; // 1 line 
$child  = "";
foreach ($tree as $term) { // 2 line
    $diffdepth=0;
    if ($term->depth > $depth) {
        $parent = "<li class='parent'>";
        $child .= "<ul class='haschild'><li>";
        $depth = $term->depth;
    } else {
        $parent = "<li>";
    }
}
echo $parent . $child; 
```

请注意，您需要通过添加所有适用`</li>`的 s 和诸如此类的东西来完成此操作，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:23:30.377

使用计数器：

```
$tree = taxonomy_get_tree($vid);
$counter = 0;
foreach ($tree as $term)
{
    ...
    if ($term->depth > $depth)
    {
        if ($counter == 0) { echo '<li class="parent">'; }
        else { echo '<li>'; }
        print "<ul class='haschild'><li>";
        $depth = $term->depth;
    }
    ...
    $counter++;
} 
```

如果你需要根据你的情况写出更多的差异，你可以把上面的 tha 变成：

```
$tree = taxonomy_get_tree($vid);
$counter = 0;
foreach ($tree as $term)
{
    ...
    if ($term->depth > $depth)
    {
        if ($counter == 0) { echo '<li class="parent">'; }
        print "<ul class='haschild'><li>";
        $depth = $term->depth;
    }
    else
    {
        if ($counter == 0) {  echo '<li>'; }
        ...
    }
    ...
    $counter++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:20:44.390

如果你想建立类似父子层次结构的东西，那么你应该[点击这里检查它](http://dipesharea.wordpress.com/2011/06/03/n-level-category/#more-60)

# php - 无法使用 jquery 设置弹出框引导选项

> ID：13697766
> 
> 赞同：1
> 
> 时间：2012-12-04T07:08:42.103
> 
> 标签：php, jquery, twitter-bootstrap

我这里有点麻烦...

可以说我有这样的元素......

```
bootstrap(document).ready(function() {

       bootstrap('#popinquiry').popover({trigger:'hover'});
}); 
```

我在我的源代码上使用 noConflict.. 然后我有一个这样的元素..

```
<a href='#' id='popinquiry' rel='popover' title='Popover Title'>heree</a> 
```

在我加载页面之后..显示了弹出窗口，但是我上面设置的触发器不起作用..所以我必须先点击“这里”也显示我的弹出窗口..但是当我直接在“popinquiry”上编写触发器时

```
<a href='#' id='popinquiry' rel='popover' data-trigger='hover' title='Popover Title'>heree</a> 
```

该选项有效..你能帮我吗？问题全部关闭弹出选项参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:27:13.340

你的JavaScript：

```
<script>  
$(function ()  
{ $('#popinquiry').popover();  
});  
</script> 
```

你的 html ：

```
<div class="well">  
<a href="#" id="popinquiry"  rel="popover" data-content="A simple tooltip for my awesome website" data-original-title="Twitter Bootstrap Popover">hover for popover</a>  
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T11:19:31.443

试试这个代码；我希望它能解决你的问题：

JavaScript：

```
<script type="text/javascript">
$(function () {
    $(".btn").popover({
        trigger: 'hover',
        placement : 'bottom'
    });
});
</script> 
```

HTML：

```
<a href="#" class="btn" data-toggle="popover" title="Popover title" data-content="Popover content">Popover</a> 
```

此外，您可以查看此页面以获取更多工作示例 - [http://www.tutorialrepublic.com/twitter-bootstrap-tutorial/bootstrap-popovers.php](http://www.tutorialrepublic.com/twitter-bootstrap-tutorial/bootstrap-popovers.php)

# python - python 模块的完全限定名称

> ID：13697769
> 
> 赞同：1
> 
> 时间：2012-12-04T07:08:56.783
> 
> 标签：python, json, python-module

在我正在处理的代码库中，默认的 python`json`模块被另`json`​​一个执行不同功能的模块覆盖。

如何导入标准`json`模块？

`import json`不起作用，因为它导入了另一个包。

`json`标准 python模块的完全限定名称是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T07:10:38.440

改用绝对导入：

```
from __future__ import absolute_import
import json 
```

您仍然可以`json`使用相对导入语法导入“屏蔽”本地模块：

```
from . import json 
```

在 python 2.5 中引入了对绝对导入作为选项的支持，并且是 python 3 中的默认设置。

但是，最好重命名“屏蔽”模块。

# ios - 如何旋转包含 UIBezierPath 的 CAShapeLayer？

> ID：13697772
> 
> 赞同：3
> 
> 时间：2012-12-04T07:09:11.070
> 
> 标签：ios, rotation, calayer

> **可能重复：**
> [旋转 CGPath 而不改变其位置](https://stackoverflow.com/questions/13738364/rotate-cgpath-without-changing-its-position)

我搜索并测试了几个小时的各种代码，但我无法让它工作。

我正在将随机位置的任意 UIBezierPath 添加到 CAShapeLayer，该 CAShapeLayer 将添加到视图中。我需要旋转路径，以便我可以处理设备旋转。我可以旋转图层而不是路径。我只需要旋转结果。

我已经有了通过缩放和平移来处理转换贝塞尔路径的方法。它工作得很好，但现在我需要简单地向左或向右旋转 90 度。

关于如何做到这一点的任何建议？

基本代码：

```
UIBezierPath *path = <create arbitrary path>
CAShapeLayer *layer = [CAShapeLayer layer];
[self addPathToLayer:layer
             fromPath:path];

// I could get the center of the box but where is the box center for the view it is in?
// CGRect box = CGPathGetPathBoundingBox(path.CGPath);

// layer.anchorPoint = ? How to find the center of the box for the anchor point?

// Rotating here appears to rotate around 0,0 of the view
layer.transform = CATransform3DMakeRotation(DegreesToRadians(-90), 0.0, 0.0, 1.0); 
```

我看到以下帖子： [BezierPath Rotation in a UIView](https://stackoverflow.com/questions/10533793/bezierpath-rotation-in-a-uiview)

我想我可以按原样旋转，然后将路径转换回原位。我只需要弄清楚翻译值是什么。

我还应该说明，我在尝试旋转后看到的是图像在某处移出屏幕。我尝试旋转 25 度来查看运动，它围绕视图的原点 0,0 旋转，这样如果我旋转 90 度，图像就会在屏幕外。我在不旋转设备的情况下运行这些测试 - 只是为了看看旋转是如何工作的。

更新＃1 - 12/4/2012：出于某种奇怪的原因，如果我将位置设置为我凭经验发现的值，它将旋转后的贝塞尔路径移动到正确的位置：

```
layer.position = CGPointMake(280, 60); 
```

该值是从启动/停止应用程序和进行调整的猜测。我不知道为什么我需要调整旋转位置。锚点应位于图层的中心。但是，我确实发现 CAShapeLayer 的框架和位置都是零，即使设置了路径，而且路径在视图中的正确位置也是如此。当旋转 +90 度时，280、60 位置将路径移动到路径边界框的中心。如果我改变旋转值，我需要调整位置。我不应该手动调整。

我认为最后的手段是以某种方式将贝塞尔路径转换为图像，然后添加它。我发现如果我将图层内容设置为图像，然后旋转，它会围绕其中心点旋转，而无需进行位置调整。设置路径并非如此。

更新 #2 12/4/2012 - 我尝试设置框架并通过摆弄我将其置于中心位置，如下所示：

```
CGRect box = CGPathGetPathBoundingBox(path.CGPath);
CGRect rect = CGRectMake(0, 0, box.origin.x + (3.5 * box.size.width), box.origin.y + (3.5 * box.size.height));
layer.frame = rect;
layer.transform = CATransform3DMakeRotation(DegreesToRadians(90), 0.0, 0.0, 1.0); 
```

为什么要乘以 3.5？我没有任何线索。我发现添加大约 3.5 倍于盒子大小的盒子原点会将旋转的 CAShapeLayer 路径移动到它应该在的位置。

必须有更好的方法来做到这一点。这是一个比我之前的帖子更好的解决方案，因为帧大小不取决于旋转角度。我只是不知道为什么需要将框架设置为我设置的值。我认为它应该是 CGRectMake(0, 0, box.origin.x + (box.size.width / 2), box.origin.y + (box.size.height / 2));

但是，它将图像向左移动太多。

我发现的另一个线索是，如果我设置[self view].frame的frame（整个父视图的frame，也就是iPhone的屏幕），然后旋转，旋转点就是屏幕的中心，一个路径/图像围绕该中心点运行。这就是为什么我尝试将框架移动到路径中心的位置，以便它围绕盒子中心运行。

UPDATE #3 12/4/2012 - 我试图将图层渲染为图像。但是，似乎仅设置图层的路径并不能使其成为图层中的“图像”，因为它是空的

```
 CGRect box = CGPathGetPathBoundingBox(path.CGPath);
    layer.frame = box;

    UIImage *image = [ImageHelper imageFromLayer:layer]; // ImageHelper library I created  

    CAShapeLayer *newLayer = [CAShapeLayer layer];
    newLayer.frame = CGRectMake(box.origin.x, box.origin.y, image.size.width, image.size.height);
    newLayer.contents = (id) image.CGImage; 
```

看起来用它的路径集旋转层与简单地旋转贝塞尔路径本身没有什么不同。我将回到旋转贝塞尔路径，看看我是否可以摆弄位置元素或其他东西。一定有办法解决这个问题。

目标：在最初创建它的视图中围绕其中心点旋转 UIBezierPath。

UPDATE #4 12/4/2012 - 我运行了一系列测试来测量翻译所需的值，以便将 UIBezierPath 放置在其先前的中心位置。

```
CGAffineTransform rotate = CGAffineTransformMakeRotation(DegreesToRadians(-15));
[path applyTransform:rotate];

// CGAffineTransform translate = CGAffineTransformMakeTranslation(-110, 70); // -45
CGAffineTransform translate = CGAffineTransformMakeTranslation(-52, -58); // -15
[path applyTransform:translate]; 
```

但是，x/y 平移的比率不对应，因此我无法根据角度推断需要什么平移。似乎“CGAffineTransformMakeRotation”使用了一些任意锚点来进行旋转，目前看来可能是（viewWidth / 2, 0）。我正在使这比需要的困难得多。我缺少一些东西来进行简单的旋转以保持中心点。我只需要将路径向左或向右“旋转”90 度。

UPDATE #5 12/4/2012 - 运行附加测试后，旋转 UIBezierPath 的锚点似乎是绘制所有点的原点。在这种情况下，原点是 0,0，所有点都相对于该点。因此，它应用了旋转，旋转围绕原点发生，这就是为什么路径在 -90 上向右上移动，在 90 上左上移动的原因。我需要以某种方式将旋转的锚点设置为中心所以它围绕中心“旋转”，而不是原始原点。在这一问题上花了 12 个小时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:41:03.563

经过一些详细的分析并在纸上绘制边界框后，我发现我的断言 0,0 的原点是正确的。

解决这个问题的方法是将路径（底层矩阵）平移到原点，边界框的中心位于原点，旋转，然后将路径平移回其原始位置。

这是将 UIBezierPath 旋转 90 度的方法：

```
CGAffineTransform translate = CGAffineTransformMakeTranslation(-1 * (box.origin.x + (box.size.width / 2)), -1 * (box.origin.y + (box.size.height / 2)));
[path applyTransform:translate];

CGAffineTransform rotate = CGAffineTransformMakeRotation(DegreesToRadians(90));
[path applyTransform:rotate];

translate = CGAffineTransformMakeTranslation((box.origin.x + (box.size.width / 2)), (box.origin.y + (box.size.height / 2)));
[path applyTransform:translate]; 
```

插入-90度以向另一个方向旋转。

当将设备从纵向旋转到横向时，可以使用此公式，反之亦然。

我仍然认为这不是理想的解决方案，但结果是我现在需要的。

如果有人对此有更好的解决方案，请发布。

2012 年 12 月 7 日更新 - 我发现我认为是最好的解决方案，而且非常简单，尽管它会很简单。我没有在贝塞尔路径上使用旋转、平移和缩放方法，而是将点数组提取为 CGPoint 对象，并根据视图大小和方向按需缩放/平移它们。然后我创建一个新的贝塞尔路径并将图层设置为此路径。

结果是完美的缩放、平移、旋转。

# objective-c - 为什么苹果有 heightForRowForIndexPath？

> ID：13697777
> 
> 赞同：-2
> 
> 时间：2012-12-04T07:09:30.360
> 
> 标签：objective-c, ios, uitableview

我的意思是这看起来有点矫枉过正。它已经有 cellForRowForIndexPath

一旦 UITableViewSourceDelegate 得到了单元格，它就可以通过计算该单元格的高度来轻松获得高度。

所以为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T07:35:01.943

`heightForRowAtIndexPath`为表中的每一行调用以计算其总高度并因此设置滚动指示器的正确大小。

另一方面`cellForRowForIndexPath`，仅对可见单元格调用。

# objective-c - 在 iOS 中使用 opencv 检测手上的钉子

> ID：13697778
> 
> 赞同：3
> 
> 时间：2012-12-04T07:09:31.327
> 
> 标签：objective-c, ios

我正在使用 OpenCv 库进行对象检测。我下载了给定的人脸检测示例。在这个例子中，他们使用`haarcascade_frontalface_default.xml`.

我必须检测手上的钉子。请建议我该怎么做？我也看到了这个-http [://docs.opencv.org/doc/tutorials/features2d/detection_of_planar_objects/detection_of_planar_objects.html#detectionofplanarobjects](http://docs.opencv.org/doc/tutorials/features2d/detection_of_planar_objects/detection_of_planar_objects.html#detectionofplanarobjects)

请建议我如何检测手上的钉子。

# java - 为 android 开发条形码扫描仪时出现 LogCat 错误

> ID：13697785
> 
> 赞同：0
> 
> 时间：2012-12-04T07:10:02.013
> 
> 标签：java, android, eclipse, zxing, android-logcat

我按照 Zxing 项目中提供的步骤进行操作。我创建了一个按钮来扫描条形码。我在 Eclipse 中使用模拟器，并且我有一个网络摄像头（根据@Sean Owen 的建议），它可以为我进行图像捕获。在我单击扫描按钮后运行项目时，提示询问我是否要安装一个名为 Barcode Scanner 的现有单独应用程序，这是开始扫描过程所必需的。因此，一旦我选择是选项，项目就会崩溃并显示应用程序停止工作。此外，我在 LogCat 中遇到以下错误。任何帮助，将不胜感激。

![运行我的 android 项目时，LogCat 中显示此错误](../Images/1fc4fe6e3db3ff03431c751ab39d1b08.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:11:41.590

我猜它很简单。您的设备上没有安装 Google Play 应用。尝试安装它或找到已安装的设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:14:32.173

您没有可以处理条形码扫描仪意图的应用程序。转到 Google Play 应用程序并安装一个条形码扫描仪。检查问题是否仍然存在

# image - 用于将图像大小调整为白色背景正方形的工具

> ID：13697786
> 
> 赞同：2
> 
> 时间：2012-12-04T07:10:03.253
> 
> 标签：image, background, resize

现在我有很多照片。它们有很多维度，纵横比。例如。**100px*500px,600px*200px,1000px*700px**。

现在我想要一个工具来调整所有图像的大小为方形，但不要扭曲或拉伸图像，**而是填充白色背景**。

我想要的结果**500*500 , 600*600, 1000*1000**，但有白色背景。

我发现 irfanview 做不到。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:44:00.113

`-extent`通过和选项使用 ImageMagick 缩略图功能`-background white`：请参阅此[文档](http://www.imagemagick.org/Usage/thumbnails/#pad)。

# asp.net - 使用 linq 将列动态添加到网格视图中

> ID：13697787
> 
> 赞同：0
> 
> 时间：2012-12-04T07:10:17.143
> 
> 标签：asp.net

我有一个网格视图，我使用 linq 查询将数据绑定到网格视图。我需要在该网格视图中添加一个单独的列。我怎样才能添加它？

我使用了如下所示的查询：

```
DataTable dt = Common.dc.TblIssueDetails.Where(id => id.AssetId == 
LeAsset.EditValue.getInteger()).Select(id => new
    {
        Select=false,
        id.TblStoreStock.TblStock.TblItem.ItemName,
        id.TblIssueMaster.IssueDate,
        Quantity=0
    }).getDataTable(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:56:55.720

将另一个属性添加到您的匿名类：

```
DataTable dt = Common.dc.TblIssueDetails.Where(id => id.AssetId == 
LeAsset.EditValue.getInteger()).Select(id => new
         {
           Select=false,
           id.TblStoreStock.TblStock.TblItem.ItemName,
           id.TblIssueMaster.IssueDate,
           Quantity=0,
           SomeSeparateColumnName = someData // someData is data that you want to write to separate column.
          }).getDataTable(); 
```

# android - Android 自定义小部件

> ID：13697797
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:11:10.560
> 
> 标签：android

我想创建一个 android 小部件，如 android 中的通知框。图片粘贴在下面。如何实现这一点。![脸书应用通知框](../Images/0fb622c04aae1eabef8ed7be92bf88ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:18:20.770

您可以查看此示例以创建自定义工具提示弹出窗口

![在此处输入图像描述](../Images/87855c1d9dba5e6fe9bcb4ec98be7f5a.png) [如何在 Android 中创建 QuickAction 对话框](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

并尝试 [NewQuickAction3D](https://dl.dropbox.com/u/69670844/lorensiuswlt-NewQuickAction3D-v1.0.1-0-g4273b56.zip) 示例

# hadoop - 使用 MapReduce 无法获得性能

> ID：13697801
> 
> 赞同：3
> 
> 时间：2012-12-04T07:11:18.280
> 
> 标签：hadoop

     我是 Map-reduce 的新手，我正在使用 Hadoop Pipes。

     我有一个输入文件，其中包含记录数，每行一个。我编写了一个简单的程序来打印其中三个单词很常见的那些行。在 map 函数中，我将单词作为键发出并记录为值，并在 reduce 函数中比较了这些记录。

     然后，我将 Hadoop 的性能与简单的 C++ 程序进行了比较，在该程序中，我从文件中读取记录并将其拆分为单词并将数据加载到 map 中。Map 包含作为键的单词和作为值的记录。加载所有数据后，我比较了这些数据。
     但是我发现，与普通的 C++ 程序相比，Hadoop Map-reduce 执行相同的任务需要很长时间。当我在 hadoop 上运行我的程序时，它大约需要 37 分钟，而简单的 C++ 程序只需要大约 5 分钟。

     请有人帮我弄清楚我是否在某个地方做错了？我们的应用程序需要性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:57:28.153

这里应该说明几点：
Hadoop 不是高性能的——它是可扩展的。本地程序在小数据集上做同样的事情总是会优于 hadoop。因此，只有当您想在机器上的集群上运行并享受 Hadoop 的并行处理时，它的使用才有意义。
Hadoop 流在性能方面也不是最好的，因为每行都有任务切换。在很多情况下，用 Java 编写的原生 hadoop 程序会有更好的性能

# javascript - 页面加载事件不会在 JavaScript 模式弹出窗口中触发

> ID：13697811
> 
> 赞同：0
> 
> 时间：2012-12-04T07:11:53.960
> 
> 标签：javascript, asp.net

我有一个 aspx 页面，我在这样的 JavaScript 弹出窗口中显示。

当在父页面中单击客户端按钮时，JavaScript 会触发以显示弹出窗口。

```
function shoeColOptions() {

    var saveColPref = document.getElementById("hdnSaveColPref").value;
    var colResult = window.showModalDialog("ColumnPreference.aspx?prefPattern=" + saveColPref, "Select Columns", 'center:yes; dialogWidth:600px; dialogHeight:250px; location:no; edge:raised; help:no; resizable:no; scroll:no; status:no; statusbar:no; toolbar:no; menubar:no; addressbar:no; titlebar:no;');

    if ((colResult != "") && (colResult != "undefined")) {

        var hdnCol = document.getElementById("hdnColPref");
        hdnCol.value = colResult;
        return true;
    }
    else {
        return false;
    }        

} 
```

`Page_Load`有一些代码可以在 aspx 页面的事件中填充几个下拉列表。

问题是，页面中的页面加载事件`ColumnPreference.aspx`仅在第一次触发。如果我关闭弹出窗口并再次打开它，Page_Load 事件不会触发，因此弹出窗口中的下拉列表不会更新。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:26:55.197

为了您的理解请注意，`PageLoad()`只有当页面回发时才会触发。如果您的按钮单击事件未发回页面，`Pageload()`则不调用该方法。

请分享您的`PageLoad()`代码，以便我改进我的答案。

# javascript - 如何通过 HTML5、JS 连接 SQL Server？

> ID：13697813
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:12:05.067
> 
> 标签：javascript, html

我们如何使用 HTML5 和 JS 连接 SQL Server（不是 WebSQL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:23:54.337

你不能直接。您必须向服务器端技术发送请求，服务器端技术将依次执行 SQL Server 命令（然后将结果返回给您的客户端）。

# objective-c - iOS中的音频控制

> ID：13697815
> 
> 赞同：0
> 
> 时间：2012-12-04T07:12:13.477
> 
> 标签：objective-c, ios, xcode, audio, mp3

是否可以在 iOS 中控制 mp3 文件的播放，以便在使用耳机收听时可以更改听到声音的一侧。

例如，如果您播放立体声 mp3 文件，其中一个人从左耳机中出来，那么您可以将其切换为来自右侧。

这个想法是改变声音的来源，而不需要为左或右设置的 2 个 mp3 文件。

如果可能的话，最好的起点是哪里。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:39:37.120

您可以使用 OpenAL 控制播放的位置。这不是最容易进入的框架，但 Apple 确实提供了一个演示项目，可以帮助您入门：

[https://developer.apple.com/library/ios/#samplecode/oalTouch/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/oalTouch/Introduction/Intro.html)

# android - 如何以编程方式禁用android中的相机功能

> ID：13697816
> 
> 赞同：2
> 
> 时间：2012-12-04T07:12:15.943
> 
> 标签：android, android-intent

我想在这里实用地禁用我的android应用程序中的相机我想制作一个应用程序，一旦我启动应用程序，当我单击开始按钮时，启动和停止中有两个按钮，我的应用程序将进入主屏幕并将完全禁用相机功能，即使在我的应用程序中单击相机图标，它也不会启用，也不会单击硬件按钮，除非我再次返回我的应用程序并单击停止按钮，该按钮也将返回主屏幕这一次我手机的拍照功能会正常工作

请帮我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:28:15.613

```
private CheckBoxPreference mDisableCameraCheckbox;
DevicePolicyManager mDPM;
ComponentName mDeviceAdminSample;
...
mDPM.setCameraDisabled(mDeviceAdminSample, mDisableCameraCheckbox.isChecked()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:23:38.857

您不能在常规应用程序中禁用摄像头。但可以在 ICS 和更高版本中使用管理员设置来禁用它。在此处查看 [http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

# mysql - phpmyadmin 在 1440 秒后注销

> ID：13697820
> 
> 赞同：143
> 
> 时间：2012-12-04T07:12:32.387
> 
> 标签：mysql, django, phpmyadmin, timeout, logout

在我的本地开发 Ubuntu 框中，我使用 MySQL 和 phpmyadmin 来处理数据库。

每当 phpmyadmin 空闲 1440 秒（24 分钟）时，会话就会过期。我失去了我的位置，必须登录并重新开始。

我尝试改变`$cfg['LoginCookieValidity'] = 3600 * 9;`内部`config.inc.php`，但它仍然在 1440 秒内超时。

我已重新启动所有内容并清除了浏览器缓存（Firefox 历史记录 -> 清除最近历史记录 -> 缓存 -> 一切）。

我不确定为什么增加的超时不生效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2015-05-20T17:40:04.643

在浏览器中转到 PHPMyAdmin

> 设置 > 功能 > 更改登录 cookie 有效性的值 > 保存![在此处输入图像描述](../Images/611ebf9baadd7272cd96d3cee78fb5b7.png)

**注意**：您必须在每个会话中执行此操作。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-10-16T16:50:01.993

将此行添加到 /config.inc.php：

```
$cfg['LoginCookieValidity'] = 36000; 
```

在 /setup/lib/index.lib.php

```
$cf->getValue('LoginCookieValidity') > 36000; 
```

如果您的 phpMyAdmin 站点还没有 .htaccess 文件，请创建一个，并添加以下行以覆盖默认的 PHP 会话超时：

```
php_value session.gc_maxlifetime 36000 
```

我不建议在您的主 php.ini 文件中更改此值，因为它会允许您所有 PHP 站点的会话超时非常长。

来源：[http ://www.sitekickr.com/blog/increase-phpmyadmin-timeout/](http://www.sitekickr.com/blog/increase-phpmyadmin-timeout/)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2014-01-18T20:15:27.970

我们可以在以下位置更改 cookie 时间会话功能：

设置->功能->常规->登录cookie有效性

我在这里找到了答案.. [1440 秒内没有活动；请重新登录](https://community.webfaction.com/questions/11343/no-activity-within-1440-seconds-please-log-in-again)

**编辑：**

此解决方案仅适用于当前会话，永久更改：

打开 phpMyAdmin 根目录中的 config.inc.php。

wamp 文件夹：wamp\apps\phpmyadmin{版本}\config.inc.php

ubuntu：/etc/phpmyadmin

添加这一行

```
$cfg['LoginCookieValidity'] = <your_timeout>; 
```

例子

```
$cfg['LoginCookieValidity'] = '144000'; 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-08-07T06:14:43.650

您可以在 phpmyadmin Web 界面更改 cookie 时间会话功能

```
Settings->Features->General->Login cookie validity 
```

或者

如果要更改配置文件中的“登录cookie有效性”，则打开phpmMyAdmin配置文件，`config.inc.php`在PHPMyAdmin的根目录下。（根目录通常是/etc/phpmyadmin/）

找到 config.inc.php 后，搜索下面的行并将其设置为您希望 phpmyadmin 超时的秒数：

```
$cfg['LoginCookieValidity'] 
```

或者

添加以下内容：

```
$cfg[ ' Servers'] [$i] [ ' LoginCookieValidity' ] = <your_new_timeout>; 
```

例如：

```
$cfg[ ' Servers'] [$i] [ ' LoginCookieValidity' ] = <3600 * 3 >; 
```

上述示例中的超时设置为 3 小时。

`session.gc_maxlifetime`可能会限制会话有效性，如果会话丢失，登录 cookie 也会失效。因此，我们可能需要在`php.ini`配置文件中设置 session.gc_maxlifetime（文件位置在 ubuntu 中是 /etc/php5 /apache2/php.ini）。

```
session.gc_maxlifetime = 3600 * 3 
```

* * *

**[关于 LoginCookieValidity 的 phpMyAdmin 文档](http://docs.phpmyadmin.net/en/latest/config.html#cfg_LoginCookieValidity)**

$cfg['LoginCookieValidity']

类型： *整数 [秒数]*
默认值： *1440*

定义登录 cookie 的有效期。请注意 php 配置选项 session.gc_maxlifetime 可能会限制会话的有效性，如果会话丢失，登录 cookie 也会失效。所以最好将 session.gc_maxlifetime 设置为至少与 $cfg['LoginCookieValidity'] 相同的值。

*笔记：*

1.  如果您的服务器崩溃并且无法加载您的 phpmyadmin 页面，请在 /var/log/apache2/error.log 检查您的 apache 日志。如果您`PHP Fatal error: Call to a member function get() on a non-object in /path/to/phpmyadmin/libraries/Header.class.php`在第 135 行上，请执行`chmod 644 config.inc.php`. 那应该处理错误。
2.  然后您将收到另一个警告：`Your PHP parameter session.gc_maxlifetime is lower that cookie validity configured in phpMyAdmin, because of this, your login will expire sooner than configured in phpMyAdmin.`. 然后`session.gc_maxlifetime` 如上所述更改。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-10-10T21:19:41.010

似乎有用于更改 phpmyadmin 配置的 UI 启动 apache 并单击以下链接

`http://localhost/phpmyadmin/setup/index.php?page=form&formset=Features#tab_Security`

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-09-06T11:59:39.223

### 使用`phpMyAdmin settings`没有任何问题或要求更改 php my.ini 中的配置或定义 .htaccess 文件的步骤：

1.  转到您的`phpMyAdmin`安装路径（例如我的 centos7 上的*/usr/share/phpMyAdmin/*`create_tables.sql` ）并在其子文件夹之一中找到（`phpMyAdmin/sql/create_tables.sql`在我的 4.4.9 版本中。）并从您的 Web 浏览器在您当前的 phpMyAdmin 站点上执行整个文件内容。这将创建一个名为的数据库，该数据库`phpmyadmin`可以永久保存所有 phpMyAdmin 选项。
2.  在 phpMyAdmin `config.inc.php`（位于我的 centos7 服务器的*/etc/phpMyAdmin/*`$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';`上）中找到注释行并取消注释（现在 phpMyAdmin 将使用我们在上一步中生成的自定义数据库）。
3.  `phpMyAdmin`从 Web 浏览器转到并转到Pavnish`Server >> Settings >> Features >> "Login Cookie Validity"`描述的图片并设置所需的值。现在可以了。

*参考*： [Niccolas 答案](https://stackoverflow.com/a/21154977/2721611)， PhpMyAdmin[配置存储](https://docs.phpmyadmin.net/en/latest/setup.html?highlight=create_tables.sql#phpmyadmin-configuration-storage)，[flashMarks 答案](https://stackoverflow.com/a/21209329/2721611)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-05-22T07:15:17.780

然后您将收到另一个警告：“您的 PHP 参数 session.gc_maxlifetime 低于 phpMyAdmin 中配置的 cookie 有效性，因此，您的登录将比 phpMyAdmin 中配置的更早过期。”。这是有道理的，因为无论如何 php 的会话都会首先超时。所以我们需要改变 /etc/php.ini 。

```
session.gc_maxlifetime = 43200
That’s 12 hours in seconds. 
```

**重启你的apache服务器，你就完成了！**

来源：[http ://birdchan.com/home/2011/06/06/phpmyadmin-timeout-after-1440-seconds/](http://birdchan.com/home/2011/06/06/phpmyadmin-timeout-after-1440-seconds/)

这对我有用！:)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-12-04T07:26:14.637

您应该重新启动 apache 或 httpd，而不是 mysqld

```
sudo service httpd restart 
```

或者

```
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-03-11T06:55:52.620

您只需增加 phpMyAdmin 会话超时，打开根 phpMyAdmin 目录中的 config.inc.php 并添加此行。

**从 wamp 文件夹路径**wamp\apps\phpmyadmin4.0.4\config.inc.php

```
$cfg['LoginCookieValidity'] = <your_timeout>; 
```

**例子**

```
$cfg['LoginCookieValidity'] = '1440'; 
```

**注意：** 较短的 cookie 生命周期对于开发服务器而非生产服务器来说都很好。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2015-07-31T09:54:16.487

1）登录到 phpMyAdmin 2）从主屏幕点击“更多设置”（我的屏幕中间底部） 3）点击屏幕顶部的“功能”选项卡/按钮。4) 在 20 天内将“登录 cookie 有效性”设置为 1728000 5) 应用。

# php xampp

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2015-05-14T10:15:09.417

要设置永久 cookie，您需要执行一些步骤

转到->`/etc/phpmyadmin/config.inc.php`文件

添加此代码

```
$cfg['LoginCookieValidity'] = <cookie expiration time in seconds > 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2014-03-31T10:53:40.917

它不工作。PHP 会话将在 1440 秒后过期。

改变`PHP.ini`这一点：

```
session.gc_maxlifetime = 3600 
```

[http://www.phpmyadmin.net/documentation/Documentation.html#config](http://www.phpmyadmin.net/documentation/Documentation.html#config)

此外，来自`PHP.ini`：

如果您使用子目录选项来存储会话文件

; （参见上面的 session.save_path），那么垃圾收集*不会*

; 自动发生。你需要自己做垃圾

; 通过 shell 脚本、cron 条目或其他方法收集。

; 例如，以下脚本相当于

; 将 session.gc_maxlifetime 设置为 1440（1440 秒 = 24 分钟）：

; cd /path/to/sessions; 找到-cmin +24 | xargs rm

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-05-01T07:27:10.107

从 wampicon/php/php 更改 php.in 文件

```
session.gc_maxlifetime = 1440 
```

到

```
session.gc_maxlifetime = 43200 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2013-10-27T05:57:45.970

如果该参数`$cfg['LoginCookieValidity']`在文件中没有生效，请尝试在 php.ini 文件中通过在左侧添加分号来`config.inc.php`禁用该参数，如下所示：`session.gc_maxlifetime`

```
; After this number of seconds, stored data will be seen as 'garbage' and
; cleaned up by the garbage collection process.
; http://php.net/session.gc-maxlifetime
; session.gc_maxlifetime = 1440 
```

或者尝试禁用两者`$cfg['LoginCookieValidity']`并将`session.gc_maxlifetime = 1440`两者都注释掉。

然后 phpMyAdmin 在您空闲时不应再注销。它适用于我在 Windows 上。不要忘记清除浏览器缓存并重新启动网络服务器。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2015-05-08T13:10:54.100

更改 cookie 过期时间的步骤

第 1 步：转到 Phpmyadmin 的设置

第 2 步：一般

第三步：登录cookie有效性

第 4 步：使用您的新值更新 1440 秒默认 cookie 过期时间

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-01-16T06:43:09.573

如果您有[phpmyadmin 配置存储](http://wiki.phpmyadmin.net/pma/Configuration_storage)设置，这些设置将从您的 phpmyadmin.pma__userconfig 表中提取，并将覆盖您在 config.inc.php 中的任何内容。在这个表中，可以为每个 MYSQL 用户分配一组不同的 phpmyadmin 设置。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-03-24T04:17:27.837

===使用http登录的方法1===

```
[php.ini]
session.gc_maxlifetime = 86400

[config.inc.php]

$cfg['Servers'][$i]['auth_type']     = 'http'; 
```

===使用cookie登录的方法2===

```
[php.ini]

session.gc_maxlifetime = 86400

[config.inc.php]

$cfg['Servers'][$i]['auth_type']     = 'cookie';

$cfg['Servers'][$i]['LoginCookieValidity'] = 86400;

$cfg['Servers'][$i]['pmadb']         = 'phpmyadmin';

$cfg['Servers'][$i]['controluser']   = 'phpmyadmin_pma';

$cfg['Servers'][$i]['controlpass']   = 'nigookike';

$cfg['Servers'][$i]['userconfig'] = 'pma__userconfig'; // there's a lot of other table required for full functionality,
                                                                         // all others can be left out unconfig except this one

[mysql]
-import phpMyAdmin/sql/create_tables.sql

-grant PRIVILEGES to phpmyadmin_pma as below

db/table

phpmyadmin  ALL PRIVILEGES 

mysql/db    SELECT

mysql/host  SELECT

mysql/tables_priv   USAGE

mysql/user  USAGE

-clear all entries should old one exists

phpmyadmin/pma__userconfig

[webUI]

-clear broswer cookie

-as normal mysql user, access http://mysql/phpmyadmin , at the bottom of page:

    The phpMyAdmin configuration storage is not completely configured, some extended features have been deactivated. [Find out why.]

-near top of the page

    [Create missing phpMyAdmin configuration storage tables.]

-access http://mysql/phpmyadmin > settings > features > Login cookie validity > 86400 > [apply]

-check phpmyadmin/pma__userconfig contain new entries of aforemention mysql user 
```

注意

1.  每个用户都有独立的设置，并且必须为每个用户重复 [webUI] 过程

2.  如果“phpMyAdmin配置存储未配置完整，部分扩展功能已停用。[找出原因。]”

链接没有出现在首页，进入设置>功能>警告>缺少phpMyAdmin配置存储表> [刷新]几次将使其出现

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-12-24T20:27:55.993

在我在这里尝试了所有建议的方法并且仍然退出后，我转向为 Tampermonkey 编写一个小的 usercsript，因为我已经有了那个扩展。它非常简单，只需每分钟向 PHPMyAdmin 的低占用脚本之一发送一个请求。这是代码：

```
// ==UserScript==
// @name         PHPMyAdmin Keep Session Alive
// @namespace    https://www.bitwizeor.io/
// @version      0.1
// @description  No more nasty PHPMyAdmin session expiries
// @match        http://localhost/phpmyadmin/*
// ==/UserScript==

(function() {
    'use strict';
    console.log('PHPMyAdmin Keep Session Alive activated');
    var url;
    window.setInterval(function(){
        url = $("#serverinfo a:eq(1)").prop("href");
        url += '&ajax_request=true&ajax_page_request=true';
        $.getJSON(url);
        console.log('pinging ...');
    }, 60000);
})(); 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-09-19T04:52:37.073

按照以下步骤增加 phpmyadmin 的会话超时：

**方法一：**

*   使用您的根凭据登录到 phpMyAdmin
*   从导航栏顶部选择*设置*
*   点击*功能*
*   *在常规*选项卡中搜索*登录 cookie 有效性*字段
**   将此字段的值更改为大于 1440 的值，例如 36000 或更高的值。*

 *> 确保您在**登录 cookie 有效性**中输入的任何值都以秒为单位

[![phpmyadmin 增加会话超时](../Images/dcbf6fe991905d21f3c0818d9f9a5d2b.png)](https://i.stack.imgur.com/rpY0w.png)

**方法二：**

找到您的`config.inc.php`文件

```
For CentOS, Fedora servers:
/etc/phpMyAdmin/config.inc.php

For Ubuntu, Debian servers:
/etc/phpmyadmin/config.inc.php 
```

搜索**LoginCookieValidity**并`config.inc.php`增加它的值

```
$cfg['Servers'] [$i] ['LoginCookieValidity'] = 1440;

//change to 
$cfg['Servers'] [$i] ['LoginCookieValidity'] = 36000; 
```

保存对 config.inc.php 文件的更改并重新启动服务器。

> 增加`session.gc_maxlifetime`以`php.ini`大于或等于您在 中输入的值`config.inc.php`。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-05-09T14:17:15.203

我已经找到了解决方案并成功使用了一段时间。

只需将此[插件](https://addons.mozilla.org/en-US/firefox/addon/phpmyadmin-timeout-preventer/)安装到您的 FF 浏览器。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-01-05T12:56:06.263

在我之后它对我有用

*   将`$cfg['LoginCookieValidity']`in 更改`(phpmyadmin folder)/libraries/config.default.php`为`999999999`.

*   检查了`php.ini`phpmyadmin 使用的`php5 -i | grep php.ini`.

*   转到`php.ini`我从 grep 命令输出中获得路径的文件并将`session.gc_maxlifetime`值更改为`999999999`.

*   重新启动了服务器。就我而言，它是`sudo service apache2 restart`。

完毕。登录 phpmyadmin 并在设置 -> 功能 -> 常规 -> 登录 cookie 有效性中检查 cookie 有效性。它是`999999999`。也没有警告“您的 PHP 参数 session.gc_maxlifetime 低于 cookie 有效性......”。在我更改`php.ini`文件之前登录 phpmyadmin 后显示警告。

检查 phpmyadmin 使用的 php 版本。您应该更改 phpmyadmin 使用的 php 的 ini 文件。我已经安装了 php5 和 php(ie 7)。但我的 phpmyadmin 使用 php5。所以我不得不搜索php5的ini文件。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-02-16T20:59:34.373

我知道这是一篇旧帖子，但我尝试了我阅读的所有解决方案，包括此页面上的解决方案，但都无济于事，然后我很幸运，所以我将其发布在这里。

我正在运行 Ubuntu 17.10。

我归档了/etc/phpmyadmin/config.inc.php 并将其内容替换为/usr/share/phpmyadmin/config.sample.inc.php 的内容。

我那时

```
 1) Enabled (uncommented) all the options under "Storage database and tables"; 
 2) Included "ini_set('session.gc_maxlifetime', 86400);" underneath the uncommented items; and 
 3) Provided a 32 character sequence for the $cfg['blowfish_secret'] = ''; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */, which is above the uncommented items. 
```

我保存了文件并重新启动了 phpMyAdmin。

我选择了服务器：localhost -> 设置 -> 功能并将“登录 cookie 有效性”的值更改为 86400（24 小时）。请注意，您指定的任何非默认值都会导致此选项的背景颜色变为黄色，因此请不要被它吓到。该值应小于或等于您在 config.inc.php 中使用的值。

我保存了设置，退出并重新启动了 phpMyAdmin。

最后，所有的消息都消失了。我的会话根据设置保持活动状态（在这种情况下是全天），并且我的设置会被记住。

我当然希望这对某人有所帮助。处理和解决问题让我很沮丧。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-11-20T22:22:49.913

在这里驱动你的 wamp 安装然后去 wamp 然后应用程序然后你的 phpmyadmin 版本文件夹然后去图书馆然后编辑 config.default.php 文件例如

> E:\wamp\apps\phpmyadmin4.6.4\libraries\config.default.php

在这里你必须改变

> $cfg['LoginCookieRecall'] = true;

到

> $cfg['LoginCookieRecall'] = false;

您也可以更改 cookie 的时间来禁用 cookie 召回

> $cfg['LoginCookieValidity'] = 1440;

到

```
$cfg['LoginCookieValidity'] = anthing grater then 1440 
```

我的是

```
 $cfg['LoginCookieValidity'] = 199000; 
```

更改后重新启动服务器 [![在此处输入图像描述](../Images/43e0027c520ce699bea0c7ca16a7c7a9.png)](https://i.stack.imgur.com/meb8B.png)

还有另一种方法，但是当我们重新启动我们的 wamp 服务器时它会重置，这也是该方法

登录到您的 phpmyadmin dashbord，然后转到设置，然后单击功能，在一般选项卡中，您将看到登录 cookie 有效性放置任何大于 14400 的值，但这在下次重新启动服务器之前有效。

[![在此处输入图像描述](../Images/1bf447209f7417af5cd57c2258306b80.png)](https://i.stack.imgur.com/uE2hL.png)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-12-11T11:34:08.093

对于 Ubuntu 18.04，我刚刚编辑了文件`/usr/share/phpmyadmin/libraries/config.default.php`

改变： `$cfg['LoginCookieValidity'] = 1440`

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-04-09T13:36:48.673

## 如果您在 DOCKER 容器中使用 phpMyAdmin：

1.  转到您的`TERMINAL`并列出您的 docker 容器以找出`phpmyadmin`一个：

```
$ docker ps

# EXAMPLE OF OUTPUT: 

CONTAINER ID   IMAGE                   COMMAND                  CREATED       STATUS       PORTS                                      NAMES
93dfa1f49775   php:7.4.1-fpm           "docker-php-entrypoi…&quot;   2 weeks ago   Up 2 weeks   9000/tcp                                   docker_localhost_app
36299ca6ce83   nginx:alpine            "/docker-entrypoint.…&quot;   2 weeks ago   Up 2 weeks   0.0.0.0:80->80/tcp, 0.0.0.0:443->443/tcp   docker_localhost_nginx
c1d8e6ffd28c   phpmyadmin/phpmyadmin   "/docker-entrypoint.…&quot;   2 weeks ago   Up 2 weeks   0.0.0.0:8080->80/tcp                       docker_localhost_myadmin
d75778f88cc6   mysql:5.6               "docker-entrypoint.s…&quot;   2 weeks ago   Up 2 weeks   0.0.0.0:3306->3306/tcp                     docker_localhost_db 
```

* * *

2.  `bash`在选择的容器中执行：

```
$ docker exec -it docker_localhost_myadmin bash

root@c1d8e6ffd28c:/var/www/html# 
```

> 在这种情况下`docker_localhost_myadmin`是`my`容器的名称。

* * *

3.  安装`vim editor`以更改具有超时变量的文件。执行：

```
$ apt update
$ apt upgrade
$ apt install vim 
```

* * *

4.  编辑文件`config.default.php`：

```
$ vim /var/www/html/libraries/config.default.php 
```

* * *

5.  找出变量并将其更改为`$cfg['LoginCookieValidity']`（8 小时）：`1440``28800`

*要找出 上的变量`vim`，请按`/`并键入`LoginCookieValidity`*

**前：**

```
 $cfg['LoginCookieValidity'] = 1440 
```

**后：**

```
 $cfg['LoginCookieValidity'] = 28800; 
```

> 注意 1：`DO NOT`设置`0`（零），因为它会使您的 phpMyAdmin 立即注销。

> 注意 2：您可能会在 phpMyAdmin 上看到一条消息，例如：
> 
> *您的 PHP 参数 session.gc_maxlifetime 低于 phpMyAdmin 中配置的 cookie 有效性，因此，您的登录可能会比 phpMyAdmin 中配置的更早过期。*
> 
> `session.gc_maxlifetime`在这种情况下，请将 docker-compose.yml 上的环境变量更改为`- session.gc_maxlifetime=28800`或更大。

* * *

6.  重启你的容器：

```
$ /etc/init.d/apache2 reload 
```

* * *

7.  注销并登录您的 phpMyAdmin 以查看结果。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-04-09T18:29:49.543

## 码头集装箱

### PHPMYADMIN NO EXIT（防止 Docker 容器 phpMyAdmin 在 1440 秒内没有交互时自动注销）

1.  在 CMD 或 Git Bash“容器”项目文件夹中运行此命令（开头有或没有“winpty”） `winpty docker-compose exec phpmyadmin bash`

2.  复制并重命名当前（phpmyadmin 容器）目录 (/var/www/html) 中的以下文件 --(syntax: 'cp oldfile newfile')：
    `cp config.sample.inc.php config.inc.php`

3.  安装（如果没有安装文本编辑器）VIM：
    `apt-get update`
    `apt-get install vim -y`

4.  用 vim 编辑我们上面复制的文件：
    `vim config.inc.php`

5.  在新行中按以下行添加`Insert key`：
    （86400 = 一天，2500000 = 一个月）

```
$cfg['LoginCookieValidity'] = 86400; 
```

6.  按`Esc key`
7.  `:wq`然后输入`Enter`

注意：来自上述用户的另一条指令：--
不要将第一行放在 phpmyadmin/config.inc.php 中，而是将其放在目录 phpmyadmin/conf.d 中的一个新文件中，这样它就不会在升级时被覆盖*

# java - 如何为以下字符串创建java regx

> ID：13697822
> 
> 赞同：0
> 
> 时间：2012-12-04T07:12:33.737
> 
> 标签：java, regex

我有命名的文件，`abc_abc0006_2012-11-26_1420_2121.11182012.zip`所以我想搜索所有以它开头`wei_wei0006`和结尾的文件，`.zip`它只包含数字、日期和允许`-._`字符串。任何人都知道如何使用 reg x 来做到这一点，我有一个`^abc_abc0006_[0-9-._]+.zip$`不工作。任何想法？

我已经测试过它工作正常，但它有一个问题，它也在以下类型的文件中拾取。

解决方案是：`"abc_abc0006_*.zip"` 结果：

*   操作1： `abc_abc0006_2012-11-26_1420_2121.11182012.zip`
*   操作1： `abc_abc0006_2012-12-02_1321_some_alfhabet_text_20121202.zip`

有效结果应仅选择以下文件 `abc_abc0006_2012-11-26_1420_2121.11182012.zip`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:17:57.790

试试`^abc_abc0006_[-0-9._]+\.zip$`。

或者不那么神奇，`^abc_abc0006_[0-9\-._]+\.zip$`. 您的问题是`-`在字符类中具有特殊含义，您需要以某种方式对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:39:28.803

利用

```
"abc_abc0006_[\\d_.-]+\\.zip" 
```

如果它不起作用，请向我们展示您是如何使用它的。错误必须在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:26:28.490

你需要把“-”放在最后

> ^abc_abc0006_[0-9._-]+\.zip$

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-04T07:22:49.423

使用以下正则表达式。我检查了一下，它工作正常。

```
[[\\w]||[\\s]||[_]||[-]||[.]]*.zip 
```

# solr - 将 jar 文件添加到太阳黑子 solr

> ID：13697825
> 
> 赞同：1
> 
> 时间：2012-12-04T07:13:06.427
> 
> 标签：solr, sunspot, sunspot-solr

我们目前正在使用 sunspot 1.3.3 gem。我们在 solrConfig.xml 中使用 JaroWinklerDistance 配置了 solr 拼写检查器组件，如下所示。但是，它会导致 ClassNotFoundException。我们如何处理这个？是否有一些我们需要复制 jar 文件的特定目录？如何配置通过太阳黑子管理的 jetty/solr？

> ```
> <lst name="spellchecker">
>      <str name="name">jarowinkler</str>
>      <str name="field">spell</str>
>      <str name="distanceMeasure">
>        org.apache.lucene.search.spell.JaroWinklerDistance
>      </str>
>      <str name="spellcheckIndexDir">./spellchecker</str>
> </lst> 
> ```

我们已经尝试将 lucene-spellchecker**.jar 放在 rails_app_root/solr/lib 下，但它不起作用。

谢谢

异常堆栈跟踪

> HTTP 错误：500
> 
> solr 配置中的严重错误。
> 
> 检查您的日志文件以获取有关可能出现问题的更多详细信息。
> 
> 如果您希望 solr 在配置错误后继续，请更改：
> 
> 错误的
> 
> 在空
> 
> -------------------------------------------------- ----------- org.apache.solr.common.SolrException：在 org.apache.solr.core.SolrResourceLoader.findClass 加载类“org.apache.lucene.search.spell.JaroWinklerDistance”时出错（ SolrResourceLoader.java:373) 在 org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:388) 在 org.apache.solr.spelling.AbstractLuceneSpellChecker.init(AbstractLuceneSpellChecker.java:95) 在 org.apache.solr .spelling.IndexBasedSpellChecker.init(IndexBasedSpellChecker.java:56) 在 org.apache.solr.handler.component.SpellCheckComponent.inform(SpellCheckComponent.java:274) 在 org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java :486) 在 org.apache.solr.core.SolrCore.(SolrCore.java:588) 在 org.apache.solr.core。CoreContainer$Initializer.initialize(CoreContainer.java:137) 在 org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:83) 在 org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:99)在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40) 在 org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:594) 在 org.mortbay.jetty.servlet.Context.startContext(Context .java:139) 在 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1218) 在 org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:500) 在 org.mortbay.jetty。 webapp.WebAppContext.doStart(WebAppContext.java:448) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40) 在 org.mortbay.jetty.handler.HandlerCollection。doStart(HandlerCollection.java:147) 在 org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:161) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40) 在 org.mortbay.jetty .handler.HandlerCollection.doStart(HandlerCollection.java:147) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40) 在 org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117) 在org.mortbay.jetty.Server.doStart(Server.java:210) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40) 在 org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:929)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect。DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at org.mortbay.start.Main.invokeMain(Main.java:183) at org.mortbay.start .Main.start(Main.java:497) at org.mortbay.start.Main.main(Main.java:115) 原因：java.lang.ClassNotFoundException: org.apache.lucene.search.spell.JaroWinklerDistance at java .net.URLClassLoader$1.run(URLClassLoader.java:217) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:205) 在 java.lang.ClassLoader.loadClass( ClassLoader.java:321) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:266) 在 java.lang.Class 的 java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:615)。forName0(Native Method) at java.lang.Class.forName(Class.java:264) at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:357) ... 还有 32 个 RequestURI=/solr/admin /
> 
> 由码头提供支持：//

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:07:55.903

该类应包含在以下罐子之一中：-

*   solr-lucene-spellchecker-XX0.jar
*   lucene-spellchecker-XX0.jar

因此，当 solr 启动并加载外部 jar 时，您可以确认 jar 是否包含在类路径中。
如果您在 Jetty 中执行它，您可以更新 SolrConfig.xml 中的[lib](http://wiki.apache.org/solr/SolrConfigXml#lib)指令以查看该库所在的 lib。

你也可以看看这个[有趣的线程](http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201108.mbox/%3C4E4CB17C.9040204@gmx.de%3E)。

把它放在一行上：-

```
<str name="distanceMeasure">org.apache.lucene.search.spell.JaroWinklerDistance</str> 
```

# javascript - javascript中的十六进制字符串

> ID：13697829
> 
> 赞同：8
> 
> 时间：2012-12-04T07:13:15.817
> 
> 标签：javascript

```
function hex2a(hex) 
{
    var str = '';
    for (var i = 0; i < hex.length; i += 2)
        str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
    return str;
} 
```

此功能在 chrome 中不起作用，但在 mozila 中运行良好。谁能帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T07:41:34.823

从你的评论看来你在打电话

```
hex2a('000000000000000000000000000000314d464737'); 
```

并提醒结果。

您的问题是您正在构建一个以 0x00 开头的字符串。此代码通常用作以空字符结尾的字符串的字符串终止符。

删除`00`at start ：

```
hex2a('314d464737'); 
```

您可以像这样修复您的函数以跳过那些空“字符”：

```
function hex2a(hex) {
    var str = '';
    for (var i = 0; i < hex.length; i += 2) {
        var v = parseInt(hex.substr(i, 2), 16);
        if (v) str += String.fromCharCode(v);
    }
    return str;
} 
```

请注意，您的充满 0x00 的字符串仍可能在其他上下文中使用，但 Chrome 无法提醒它。你不应该使用这种字符串。

# objective-c - NSWindowDelegate : windowDidBecomeKey vs windowDidBecomeMain

> ID：13697836
> 
> 赞同：4
> 
> 时间：2012-12-04T07:13:33.510
> 
> 标签：objective-c, macos, nswindow, nsnotifications

**windowDidBecomeKey:**和**windowDidBecomeMain:**通知有什么区别？

也就是说，我想知道“什么是关键窗口”和“什么是主窗口”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T07:30:46.227

来自[官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Concepts/ChangingMainKeyWindow.html)

> 根据用户与 Windows 的交互方式，Windows 具有不同的外观。作为用户注意力焦点的最前面的文档或应用程序窗口称为主窗口。每个应用程序在给定时间也只有一个主窗口。这个主窗口通常也有关键状态。主窗口是应用程序用户操作的主要焦点。通常，模态键窗口（通常是诸如字体窗口或信息窗口之类的面板）中的用户操作对主窗口有直接影响。

作为一个例子（总是来自文档）

> 在大多数表现良好的 Mac 应用程序中可以看到键窗口和主窗口之间差异的一个很好的例子。例如，在文本文档中选择“另存为...”会显示一个面板，其中包含一个用于键入文档名称的字段和一个用于保存它的位置下拉菜单。面板代表关键窗口。它将接受您的键盘输入（文件名），但会直接影响其下的主窗口（通过将其保存到您指定的位置）。保存文档后，保存面板消失，主窗口再次变为键，并再次接受键盘输入。

# ios - 想要和本地联系电话簿一样的排序

> ID：13697838
> 
> 赞同：0
> 
> 时间：2012-12-04T07:13:54.277
> 
> 标签：ios, cocoa-touch, core-data, nsfetchedresultscontroller, abaddressbook

我正在为一个应用程序进行联系人操作。我的要求是保持与本机电话簿相同的顺序。如果本机有一些变化，通过某个字段和某个订单规范进行一次提取，我应该直接了解存在的位置或要插入的位置。

在本机电话簿上应用 ABPersonComparePeopleByName 排序。发现，首先按名字排序，然后是姓氏，最后是电话号码。如果联系人中没有名字，则将按顺序首先列出具有名字的联系人。

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFMutableArrayRef peopleMutable = CFArrayCreateMutableCopy(
                                                               kCFAllocatorDefault,
                                                               CFArrayGetCount(people),
                                                               people
                                                               );

CFArraySortValues(
                      peopleMutable,
                      CFRangeMake(0, CFArrayGetCount(peopleMutable)),
                      (CFComparatorFunction) ABPersonComparePeopleByName,
                      (void*) ABPersonGetSortOrdering()
                      ); 
```

在本地电话簿上，给

```
NSFetchRequest* contactReq = [[NSFetchRequest alloc] init];
[contactReq setSortDescriptors:[NSArray arrayWithObjects:[NSSortDescriptor sortDescriptorWithKey:@"firstName" ascending:YES selector:@selector(caseInsensitiveCompare:)],[NSSortDescriptor sortDescriptorWithKey:@"lastName" ascending:YES selector:@selector(caseInsensitiveCompare:)],[NSSortDescriptor sortDescriptorWithKey:@"phoneNumber" ascending:YES selector:@selector(caseInsensitiveCompare:)], nil]]; 
```

问题是，我在本地电话簿上获得的第一个联系人既没有名字也没有姓氏。其中，它们是本地电话簿上的最后一个条目。

所以，我要求我应该指定哪种排序来获取电话簿排序。

谢谢，文奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T12:34:58.990

我可以删除它，但这个答案可能会解决iOS中联系人排序的困难和发生的事情。

1.  为程序员提供了名字和姓氏作为他/她可以指定的选项（优先顺序也是如此）。
2.  如果名字和姓氏不可用，它在内部使用电话号码。
3.  我猜它对字符有偏好级别，即`'#' or '$'`底部带有前缀的联系人。
4.  如果 name 的前缀是 ，真的很难弄清楚顺序`'(', ')', '"', '*' etc`。
5.  我认为还考虑了创建联系人的时间，即我添加了一个带有`'('`前缀的联系人，它放在旁边`')'`，后来我添加了一个`')'`放在之前添加之后的联系人`'('`。优先级可以分组，不确定，但它有点复杂和封闭。

# jquery - Safari 动画故障 - 白色闪烁

> ID：13697844
> 
> 赞同：1
> 
> 时间：2012-12-04T07:14:11.370
> 
> 标签：jquery, html, css, safari, css-animations

我在使用 Safari 时遇到问题，在动画过程中出现白色闪烁和随机晃动。关于导致这种情况的任何想法？

错误视频：[https ://brotsky.viewscreencasts.com/e48df175b5fe12f680ab0ea7bd5bc51f](https://brotsky.viewscreencasts.com/e48df175b5fe12f680ab0ea7bd5bc51f)

网址：[http ://alchemy.brotskydesigns.com/new/](http://alchemy.brotskydesigns.com/new/)

该问题仅在 Safari 上，在 Chrome 和 Firefox 上运行良好。当您在我的 iPhone 4s 上放大某些“楼层”时，该网站也会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:16:11.373

我能够解决我的问题！该问题与一起使用 3d 和 2d 元素有关（二楼作为使用 matrix3d 透视图的文本元素）。

我从以下位置编辑了我的 CSS：

```
html,
button,
input,
select,
textarea {
    color: #d7d7d0;
    -webkit-perspective: 800;
    perspective: 800;
    -webkit-transform: transform;
} 
```

到

```
html,
button,
input,
select,
textarea {
    color: #d7d7d0;
} 
```

这解决了 Safari 和 iOS 上的问题，并且 matrix3d 视角保持不变。

# esper - 权限处理的 Esper 上下文使用

> ID：13697850
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:15:12.973
> 
> 标签：esper, complex-event-processing

我想在 EPL 查询中为不同用户设置查看权限，如下所示：

```
Users   AllowedView
U1      V1,V2
U2      V1,V3
U3      V2,V3

Input Events sequence are as:
  User View Amount
1\. U1, V1,  20
2\. U2, V3,  30
3\. U3, V3,  40
4\. U3, V2,  50

Output required as Sum(amount):
1\. U1 - 20, U2 - 20 (as V1 is changed and permission to U1 & U2)
2\. U2 - 50, U3 - 30 (as V3 is changed and permission to U2 & U3)
3\. U2 - 90, U3 - 70 (as V3 is changed and permission to U2 & U3)
4\. U1 - 70, U3 - 100 (as V2 is changed and permission to U1 & U3) 
```

**我认为上下文会做到这一点，但需要一些帮助来简化事件流和配置上下文。**

所以我需要在视图组的基础上创建上下文分区。如

```
Partition1 - V1,V2
Partition2 - V1,V3
Partition3 - V2,V3 
```

这样所有的计算都可以在它们的基础上进行。如您所见，上下文的分区键不是单属性或双属性，它基本上是一组相同的属性。所以我不能写成

```
Create context TestContext 
     partition by view 
     from EventPermissibleView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:10:24.150

可以将单个传入事件传递到多个分区吗？也许 UDF 是最简单的，它为每个事件分配一个组 id，组 id 可能只是所有视图的字符串附加（排序）

# cocos2d-iphone - body有两个不同的PhysicsSprite？

> ID：13697851
> 
> 赞同：0
> 
> 时间：2012-12-04T07:15:17.950
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我正在做一个 box2d 应用程序。我在世界上创造了 2 个不同的身体。检查此代码

```
-(void)init{

 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"sheet.plist"];
    CCSpriteBatchNode *parent = [CCSpriteBatchNode batchNodeWithFile:@"sheet.png" capacity:100];
    spriteTexture_ = [parent texture];
    [self addChild:parent z:0 tag:kTagParentNode];
}
-(void)bodyCreation
{
 CCNode *parent = [self getChildByTag:kTagParentNode];

 PhysicsSprite *sprite = [PhysicsSprite spriteWithSpriteFrameName:@"bodySprite1.png"];
[parent addChild:sprite];

 b2BodyDef ballBodyDef;
 ballBodyDef.type = b2_dynamicBody;
 ballBodyDef.bullet = true;
 ballBodyDef.position.Set(1210.0f/PTM_RATIO, 250.0f/PTM_RATIO);
 randombody = world->CreateBody(&ballBodyDef);

 b2CircleShape circle;
 circle.m_radius = 16.0/PTM_RATIO;

 weightBallDef.shape = &circle;
 weightBallDef.density = 10.0f;
 weightBallDef.restitution = 0.2f;
 randomFixture = randombody->CreateFixture(&weightBallDef);
 [sprite setPhysicsBody:randombody];
}
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  CCNode *parent = [self getChildByTag:kTagParentNode];

  PhysicsSprite *sprite11 = [PhysicsSprite spriteWithSpriteFrameName:@"bodySprite2.jpg"];
  [parent addChild:sprite11];
  sprite11.position = ccp(touchBegin.x, touchBegin.y);

   b2BodyDef ballBodyDef;
   ballBodyDef.type = b2_dynamicBody;
   ballBodyDef.bullet = true;
   ballBodyDef.position.Set(touchBeginLocationWorld.x, touchBeginLocationWorld.y);
   ballbody = world->CreateBody(&ballBodyDef);

   b2PolygonShape box;
   box.SetAsBox(sprite11.contentSize.width/PTM_RATIO/2, sprite11.contentSize.height/PTM_RATIO/2);
   batShapeDef.shape = &box;
   batShapeDef.density = 10.0f;
   ballFixture = ballbody->CreateFixture(&batShapeDef);
   [sprite11 setPhysicsBody:ballbody];
} 
```

我的例外结果是这样的：![在此处输入图像描述](../Images/ebe4cbb11ecf731657acabcd8d191d5f.png)

但有时我会变成这样：![在此处输入图像描述](../Images/52b4c23516e9fff5c087454df6851314.png)

如何解决这个问题。谁来帮帮我...

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:59:02.650

在处理之前将您的触摸转换为 OpenGL（屏幕）坐标，如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
      UITouch *touch = [[event allTouches] anyObject];
      CGPoint location = [touch locationInView: [touch view]];
      location = [CCDirector sharedDirector] convertToGL: location]; 
```

然后设置你的精灵的位置：

```
sprite11.position = location; 
```

和你的球体定义：

```
ballBodyDef.position.Set(location.x/PTM_RATIO, location.y/PTM_RATIO); 
```

# mysql - MySQL中具有父ID的多用户级别

> ID：13697853
> 
> 赞同：1
> 
> 时间：2012-12-04T07:15:23.213
> 
> 标签：mysql

我有这个 4 级用户表，如下所示

```
user_id parent_id
1       NULL
2       1
3       2
4       2
5       3
6       1 
```

我想选择某个父 id 下的所有用户，例如 user_id = 1，在这种情况下应返回如下结果：

```
user_id  parent_id
2        1         // return because parent_id = 1
6        1         // return because parent_id = 1
3        2         // return because parent_id of 2 is 1
4        2         // return because parent_id of 2 is 1
5        3         // return because parent_id of 3 is 2 
```

通过提供一个 id，查询会是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:29:46.650

试试这个 ：：

```
 Select 
user_id 
from 

my_table 
where parent_id in 
(
Select 
user_id 
from my_table where parent_id in 
(Select user_id from my_table where parent_id in(Select user_id from my_table where parent_id =?))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:13:26.920

```
parentid as refid 
Select userid  from SampleTree where refid = 0 or refid in (Select userid from SampleTree where refid =0 
or refid in (Select userid from SampleTree where refid =0 or
refid in (Select userid from SampleTree where refid =0))) 
```

# c# - 在 WPF TabControl 中托管外部应用程序

> ID：13697854
> 
> 赞同：4
> 
> 时间：2012-12-04T07:15:33.603
> 
> 标签：c#, wpf, hwndhost

我设法创建了一个示例项目，该项目使用 HwndHost在 C# WPF 选项卡控件中托管记事本（*而不是我的真实项目将嵌入的内容）。*为此，非常感谢那些回复[在 WPF 窗口中托管外部应用程序的](https://stackoverflow.com/questions/5028598/hosting-external-app-in-wpf-window)人（*顺便说一句，不需要 DwayneNeed*）

此示例运行良好，直到您单击记事本的托管实例，**然后尝试更改选项卡**。如果您要导航到的新页面中没有任何内容，则必须先单击当前页面选择器，然后它才会接受对另一个选项卡的单击。如果您在其他页面上有内容（任何内容......只是一个按钮），那么您将被迫单击新选项卡选择器 TWICE 以使其导航离开。

**我尝试过但不起作用的事情：**

*   使用[AttachThreadInput()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681956.aspx)加入两个应用程序窗口的输入线程。
*   调用`this.InvalidateVisual();`Tab Control 鼠标按下事件。

**有什么诀窍：**

*   当按下按钮时，以编程方式将`TabControl.SelectedIndex`值更改为我想要的值。

为了解决这个问题，我想我只需要在选项卡选择器的位置使用按钮（使它们不可见）并以编程方式更改页面。这没什么大不了的，但我只是想知道是否有其他人遇到过这个问题，也许有一个解释！

ps 我对 WPF 和 C# 有点陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T15:02:19.850

您托管的记事本应用程序是另一个窗口，因此如果焦点在记事本中 - 首先单击选项卡选择器会激活您的 WPF 窗口并使其成为焦点，然后单击第二次单击执行您想要执行的操作。

# yii - 在 yii 中如何创建小部件来显示文本字段

> ID：13697855
> 
> 赞同：-2
> 
> 时间：2012-12-04T07:15:41.550
> 
> 标签：yii

我即将在 Yii 中构建一个项目。我想以这样的方式创建一个小部件，当用户单击按钮时，应该显示带有两个用于输入新密码和重复密码的文本字段的小部件。小部件表单上还将提供一个按钮，以提交此新密码并将其存储到数据库中。我该如何实现这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:02:30.447

你需要先为你的表创建一个模型，比如说`User`。在 User 表中，您可能有几列，其中一列用于存储密码 say `password`。在您的`User`模型中，您应该定义如下规则

```
array('password, repeat_password', 'required', 'on'=>'signup'),
array('password', 'compare', 'compareAttribute'=>'repeat_password','on'=>'signup'), 
```

**repeat_password**是一个模型变量，你应该声明它。

在形式上，使用类似下面的东西

```
<?php echo $form->labelEx($model,'password'); ?>
<?php echo $form->passwordField($model,'password'); ?>
<?php echo $form->error($model,'password'); ?>

<?php echo $form->labelEx($model,'repeat_password'); ?>
<?php echo $form->passwordField($model,'repeat_password); ?>
<?php echo $form->error($model,'repeat_password'); ?> 
```

我想你也在问一个弹出表单，检查这些地方

[http://www.yiiframework.com/doc/api/1.1/CJuiDialog](http://www.yiiframework.com/doc/api/1.1/CJuiDialog)

[http://www.yiiframework.com/wiki/72/cjuidialog-and-ajaxsubmitbutton](http://www.yiiframework.com/wiki/72/cjuidialog-and-ajaxsubmitbutton)

# perl - Perl 套接字发送哈希

> ID：13697856
> 
> 赞同：3
> 
> 时间：2012-12-04T07:15:48.637
> 
> 标签：perl, sockets

我正在尝试在 Perl 中创建一个套接字客户端。服务器端是在本地主机上运行的 C 程序。

我必须通过套接字发送哈希。这是我正在使用的一段代码。

```
sub applyGlobalConfig {
    my ($globalConfig, $ignoreData) = @_;

    my $socket = IO::Socket::INET->new(PeerAddr => $PEER_HOST,
                                       PeerPort => $PEER_PORT,
                                       Proto    => "tcp",
                                       Type     => SOCK_STREAM)
          or die "Couldn't connect to $PEER_HOST:$PEER_PORT : $@\n";

    my $reconfigResult;

    print $socket "$113\n";

    close($socket);

    unless ($reconfigResult) {
        return 0;
    }

    return ERR_NULL;
} 
```

现在，我的问题是，`$globalConfig`将包含一个哈希引用，我想通过套接字发送它。我无法弄清楚。我用谷歌搜索并找到了一些对 Dumper 的参考，但不太了解。如何发送哈希？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T07:21:56.380

要通过套接字发送数据结构，您必须将其“序列化”为字节流。然后接收程序必须对其进行反序列化以重新组装数据结构。如果接收程序期望流采用特定格式，则发送程序必须生成期望的格式。

如果您正在编写双方，那么您可以选择一种对您的情况有意义的序列化格式，例如 JSON 或 XML，其中任何一种都可以表示 Perl 哈希。但是，在不了解您的具体情况的更多详细信息的情况下，这就是可以以答案的方式提供的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:53:36.980

我更喜欢为此使用[Storable](http://search.cpan.org/~ams/Storable-2.39/Storable.pm)模块。例子：

接收端：

```
use strict;
use IO::Socket::INET;
use Storable;
use Data::Dumper;

my   $sock = IO::Socket::INET->new(Listen    => 5, LocalAddr => 'host',
                                 LocalPort => 9000,  Proto     => 'tcp');
while( my $s = $sock->accept ) {
    my $struct = Storable::fd_retrieve($s);
    print Dumper($struct);
} 
```

发送方：

```
use strict;
use IO::Socket::INET;
use Storable;

my   $sock = IO::Socket::INET->new(PeerAddr => 'host',  PeerPort => 9000,
                 Type     => SOCK_STREAM, Proto     => 'tcp') || die "Fail: $!";
my $struct = {
    a => 1,
    b => [2,3,4]
};
Storable::nstore_fd($struct, $sock); 
```

通过从 i386 Linux 发送到 amd64 FreeBSD 进行测试。

您也可以使用 Data::Dumper 从哈希生成字符串，然后通过网络发送，但它的方法很脏而且有问题。

**升级版：**

> 但是，我正在努力如何将 perl 端的哈希值转换为用空格分隔的字符串。

尝试使用连接/映射组合：

```
my $serialized = join("\n", map { "$_ ".$struct->{$_} } keys %$struct)."\n"; 
```

可能在 C 端更容易使用以空字符结尾的字符串：

```
my $keyvalue_count = scalar keys(%$struct);
my $serialized = join("\0", map { "$_\0".$struct->{$_} } keys %$struct)."\0"; 
```

在这个简单的情况下，我更喜欢使用最后一个变体，因为它是 C 的原生版本。

# .net - 如何在类的共享函数中使用私有声明？

> ID：13697861
> 
> 赞同：0
> 
> 时间：2012-12-04T07:16:27.090
> 
> 标签：.net, vb.net, class, shared, private-members

我试图在一个类中使用一个私有声明的变量/对象，来自同一个类中的一个共享函数。

我的主要目标是能够访问类之外的共享函数，但不能访问变量，因为它们是私有的。我不认为将所有变量/对象声明设置为“共享”将是一个优雅的解决方案。

这是一个更好的检查片段：

```
Module main
    Sub Main()
        MsgBox(xTest.xMain)
    End Sub
End Module

Class xTest
    Private WC As New Net.WebClient()
    Shared Function xMain() As String
        Return WC.DownloadString("http://example.com")
    End Function
End Class 
```

当然，我将如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:21:04.177

我怀疑您对 的含义感到困惑`Shared`。这与`Private`/ `Public`/etc 正交。

`Shared`意思是“特定于类型，而不是类型的任何实例”。您的`Shared`函数无法使用`WC`，因为它没有用于查找特定变量的*实例*。想象一下它是一个变量——就像问一个班级“你叫什么名字？” 相反，每个单独的*实例*都有一个名称。`xTest``WC``name``Person``Person`

 *您应该仔细考虑每个成员（无论是函数还是变量）是否符合逻辑`Shared`。

有关更多详细信息，请参阅[有关共享成员的 MSDN 页面](http://msdn.microsoft.com/en-us/library/4hbsxy95.aspx)- 尽管我不喜欢那里使用的描述。“......由类的所有实例共享......”听起来首先必须有*一个*实例。没有 - 只是成员与类型本身相关联。即使没有创建类的实例，也可以使用共享变量。

（顺便说一句，我可能一开始就不会保留 a`WebClient`作为字段。`WebClient`旨在创建、使用然后丢弃。我还建议更改您的名称以遵循 .NET 命名约定。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:19:50.550

变量需要共享才能从共享函数访问。顺便说一句，对于您正在尝试做的事情，我认为共享方法是不明智的。*

# sql - Excel 公式。外键

> ID：13697862
> 
> 赞同：0
> 
> 时间：2012-12-04T07:16:44.843
> 
> 标签：sql, excel

我有两张桌子：

```
# 计费周期表
+-----------+
| 编号 | 价值|
-------------
| 1 | 一些 |
| 2 | 否则 |
xxxxxxxxxxxxx

```

和

```
# 电表

+----------------------------+
| 计费周期| 价值 |
------------------------------
| 1 | 期望值|
| 2 | |
| 3 | |

```

我想写一个公式来接受和比较`billing period id`，`billing period`然后把`value`from放到旁边`billing period table`的单元格中`value``billing period`

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:20:44.990

正如@Tim Williams 所建议的那样，`VLOOKUP()`这是要走的路。

假设您已命名第一个 table`BILLING_PERIOD`和第二个 table `ELEC`，并使用您的标题，在`value`您将使用的列中：

```
=VLOOKUP([@[billing period]],BILLING_PERIOD,2,FALSE) 
```

额外的触摸可以是用`IFERROR`, 如果 id 不在表中，则插入一些默认值，而不是显示`#N/A`错误。

编辑：只是注意到它没有被提及，但我的假设是你在谈论两个 excel 表，如果这不是意思，请更具体。

# azure - 是否可以在多个 Azure 网站上预配相同的域名？

> ID：13697863
> 
> 赞同：4
> 
> 时间：2012-12-04T07:16:56.147
> 
> 标签：azure

我在 Azure 上设置了几个保留实例网站。我需要在多个区域的网站之间负载平衡 1x 域名。当我尝试在第二个区域的网站上设置域时，出现错误：“指定的主机名 www.mydomain.com 已为另一个站点保留。” 当然应该可以在多个站点上提供相同的域吗？它取决于为请求提供服务的 DNS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:31:21.697

> 当然应该可以在多个站点上提供相同的域吗？它取决于为请求提供服务的 DNS。

我强烈反对这种说法！**不能**为不同的站点提供相同的域。但是，完全可以为单个站点提供不同的域！此外，当您谈论负载均衡时，是负载均衡器决定了请求的服务位置，而不是 DNS 服务器。DNS 服务器在 FQDN 和 IP 地址之间具有单一的单向映射。而已。

如果你想拥有多地理区域分布/负载平衡，你不应该使用 Azure 网站，而应该使用[Azure 云服务](http://www.windowsazure.com/en-us/home/features/cloud-services/)和[Azure 流量管理器](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazuretrafficmanager.aspx)。截至今天，Azure 流量管理器仅适用于云服务，不适用于 Azure 网站。

我推测未来流量管理器也会支持 Azure 网站，但这完全是我的猜测。

**更新**

您可以通过以下方式实现您的目标：

1.  在指定地理区域创建地理网站
2.  将您的内容部署到每个站点
3.  创建[Windows Azure 虚拟机](http://www.windowsazure.com/en-us/home/features/virtual-machines/)
4.  在该 VM 上安装 IIS
5.  安装和配置[Microsoft ARR](http://www.microsoft.com/en-us/download/details.aspx?id=7173)
6.  使用 ARR 注册您的网站并配置规则。
7.  将您的单一域名指向 ARR 的公共**单一**端点

在理想情况下，您将集群两个或更多虚拟机以充当 ARR 并对它们进行负载平衡。

请注意，Windows Azure VM 仍然是预览功能。

* * *

# r - R中的箱线图，只有中值可见

> ID：13697867
> 
> 赞同：7
> 
> 时间：2012-12-04T07:17:22.723
> 
> 标签：r, median, boxplot

我只想为我的两个数据集绘制中位数。也可以使用 R 中的段函数来完成，但我不知道如何。所以，我决定使用 boxplot 函数，但仍然无法弄清楚如何隐藏所有内容并只显示中位数。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T07:41:33.880

您可以设置以下记录的图形参数`?bxp`：

```
boxlty: box outline type
whisklty: whisker line type
staplelty: staple (= end of whisker) line type 
```

设置`outline = FALSE`抑制绘制异常值。

```
boxplot(count ~ spray, data = InsectSprays, outline = FALSE, boxlty = 0,
  whisklty = 0, staplelty = 0) 
```

应该画一个只有中位数水平线的箱线图。

# java - 'mvn' is not recognized as an internal or external command,

> ID：13697874
> 
> 赞同：43
> 
> 时间：2012-12-04T07:18:05.780
> 
> 标签：java, windows, apache, maven

I get the following error when I type the command `mvn --version`:

> 'mvn' is not recognized as an internal or external command, operable program or batch file.

I have also followed [this](https://stackoverflow.com/questions/11890116/apache-maven-install-mvn-not-recognized-as-an-internal-or-external-command-a) but still I am unable to get the work done.

when I type this command `echo %M2_HOME%` I get path printed as `D:\Program Files\apache-maven-3.0.4` when I type 'echo %M2%' I get the path printed as `D:\Program Files\apache-maven-3.0.4\bin`

Environment : `Windows XP`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-04T08:30:38.463

On my Windows 7 machine I have the following environment variables:

*   JAVA_HOME=C:\Program Files\Java\jdk1.7.0_07

*   M2_HOME=C:\apache-maven-3.0.3

On my `PATH` variable, I have (among others) the following:

*   %JAVA_HOME%\bin;%M2_HOME%\bin

I tried doing what you've done with `%M2%` having the nested `%M2_HOME%` and it also works.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-04T07:19:44.387

Make sure you have your maven bin directory in the path and the JAVA_HOME property set

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-04T07:42:48.057

Add maven directory `/bin` to System variables under the name `Path`.

To check this, you can `echo %PATH%`

# android - 如何在 FAT 上构建 Android NDK 应用程序

> ID：13697880
> 
> 赞同：1
> 
> 时间：2012-12-04T07:18:24.550
> 
> 标签：android, linux, android-ndk, file-permissions, fat

我`FAT32`在 Linux 中使用文件系统（因为我还需要在 Windows 和 OSX 上访问它），但是当我编译时`ndk-build`出现错误

```
安装：设置“./libs/armeabi/libfoo.so”的权限：不允许操作

```

我收集它正在尝试为新创建的库设置更多限制性权限，但是您无法更改 FAT 分区中文件的权限。

是否有任何解决方法，例如工具链中的标志来阻止它尝试更改文件的权限？或者可能是 Linux 中的某些东西可以伪造成功的权限更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:25:32.863

[您可以尝试在fakeroot](http://fakeroot.alioth.debian.org/)下运行 NDK 构建，尽管我从未尝试过并且不确定它是否适用。

恕我直言，更好的解决方案是使用 ext3 并安装驱动程序以从 Windows 和 MacOSX 访问 ext3 文件系统：

您可以使用[Ext2 IFS for Windows驱动程序从 Windows 和](http://www.fs-driver.org/)[extfsx 或 fuse-ext2](https://superuser.com/questions/17205/free-filesystem-drivers-for-ext3-on-os-x-leopard)访问文件以从 MacOSX 执行相同操作

# python - 如何使用 Python 默认不支持的字符？

> ID：13697882
> 
> 赞同：0
> 
> 时间：2012-12-04T07:18:39.917
> 
> 标签：python, pdf, unicode, character

> **可能重复：**
> [UnicodeDecodeError，无效的继续字节](https://stackoverflow.com/questions/5552555/unicodedecodeerror-invalid-continuation-byte)

我正在尝试在 python 生成的 PDF 中使用`á`和等字符。`ô`该程序使用 dateutil 模块（以及其他几个模块）生成 PDF 日历（带图像）。日历是用 Latex 设计的。

我的目标是用法语创建日历，但是法语中的月份名称数组包含 python 似乎无法识别的字符。

在生成过程中，程序`SyntaxError: (unicode error) 'utf-8' codec can't decode byte 0xe9 in position 0: unexpected end of data`在命令行中打印。

如何告诉 python 使用这些字符？

如果它有助于数组是：

```
FRENCH_MONTHS = [u'NotAMonth', u'Janvier', u'Février', u'Mars', u'Avril', u'Mai', u'Juin', u'Juillet', u'Aôut', u'九月'，你'十月'，你'十一月'，你'十二月']
```

还使用：

*   MPS 到 PDF 转换器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:20:27.343

您必须指定用于创建 python 源的源编码。通过添加[源编码声明](http://docs.python.org/2/reference/lexical_analysis.html#encoding-declarations)来做到这一点：

```
# coding: UTF-8 
```

这应该是 python 源文件的第一行或第二行。编码*必须*与您保存文件的编码相匹配；检查您的文本编辑器设置。您添加到问题中的错误消息表明编码不匹配，我怀疑您使用的是 latin-1 (ISO 8859-1)。

或者，使用 unicode 转义来包含非 ASCII 字符；`u'\u00e9'`将 a 中带有重音符号的 e 表示为 unicode 代码点。

请在[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)中研究 Python 如何处理 Unicode 。[Joel Spolsky Unicode 文章](http://www.joelonsoftware.com/articles/Unicode.html)对于任何处理任何非 ASCII 数据的软件开发人员来说也是*必不可少的阅读材料。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:50:49.710

`# coding: UTF-8`如果您的编辑器设置为使用正确的编码保存文件，您可以使用

或者，您也可以将字符编码为仅 ASCII 的转义序列。例如，[转义序列`é`](http://www.fileformat.info/info/unicode/char/e9/index.htm)为`\u00E9`：

```
FRENCH_MONTHS = [u'NotAMonth', u'Janvier', u'F\u00E9vrier', ...] 
```

这不太可能被配置不当的编辑器搞砸，但可以实现完全相同的效果。

更好的是，您可以使用该[`calendar`](http://docs.python.org/2/library/calendar.html)模块并回避整个问题（基于[此答案](https://stackoverflow.com/questions/13037370/python-calendar-day-month-names-in-specific-locale)）：

```
import calendar

def get_month_names(locale):
    with calendar.TimeEncoding(locale) as encoding:
        months = list(calendar.month_name)

        # Could do this to match original values:
        # months = [x.title() for x in months]

        if encoding is not None:
            months = [x.decode(encoding) for x in months]

        months[0] = u"NotAMonth"
        return months

FRENCH_MONTHS = get_month_names("fr_FR.UTF-8") 
```

* * *

编辑：这与[这个问题](https://stackoverflow.com/questions/5552555/unicodedecodeerror-invalid-continuation-byte)相同- 你的 é 用 编码`latin 1`，但你的 Python 源文件编码是 UTF-8（在 Python 2 中明确设置，或者因为它是 Python 3 中的默认值）：

```
>>> print "\xe9".decode("latin1")
é
>>> print "\xe9".decode("utf-8")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".../python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 0: unexpected end of data 
```

使用上述替代解决方案之一的另一个很好的理由！

# java - jooq 的限制和偏移问题

> ID：13697886
> 
> 赞同：3
> 
> 时间：2012-12-04T07:19:18.457
> 
> 标签：java, spring, jdbctemplate, jooq, bind-variables

我已经将 jooq 与 spring 集成，对于所有类型的数据库查询（MySQL），我使用的是 spring 的 JDBC 模板。这里使用 jooq 库来生成要传递给 jdbc 模板的 sql 查询。

尽管我的其余查询工作正常，直到我向查询添加限制和/或偏移量。

我正在生成如下查询：

```
create.select(Factory.field("table_name"))
      .from("tables t")
      .where("t.table_schema LIKE '" + schemaName + "'")
      .limit(10)
      .offset(2)
      .getSQL(); 
```

我收到如下错误：

> org.springframework.jdbc.BadSqlGrammarException: StatementCallback; 错误的 SQL 语法 [select table_name from tables t where (t.table_schema LIKE 'test') 限制？抵消 ？]; 嵌套异常是 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以获取在 '? 附近使用的正确语法。抵消 ？' 在第 1 行

这清楚地表明传递给 limit 和 offset 方法的值不会附加到查询中。

我搜索了文档，但没有找到任何其他方法来实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:43:37.550

jOOQ 使用绑定值生成 SQL。当您使用 jOOQ 仅呈现 SQL 时，使用 Spring 执行它，您基本上有以下任何选项：

### 明确地使用内联绑定值：

像这样，您可以明确告诉 jOOQ 不要为您的`LIMIT .. OFFSET`子句呈现任何绑定变量

```
create.select(DSL.field("table_name"))
      .from("tables t")
      .where("t.table_schema LIKE '" + schemaName + "'")
      .limit(DSL.inline(10))
      .offset(DSL.inline(2))
      .getSQL(); 
```

### 让 jOOQ 内联所有绑定值：

像这样，你可以告诉 jOOQ 根本不要渲染任何绑定变量：

```
Settings settings = new Settings();
settings.setStatementType(StatementType.STATIC_STATEMENT);
DSLContext create = DSL.using(connection, dialect, settings);
// [...] 
```

### 从 jOOQ 的查询中提取绑定值：

像这样，您可以让 jOOQ 在适当的地方渲染绑定变量，并以正确的顺序提取它们：

```
Query query =
create.select(DSL.field("table_name"))
      .from("tables t")
      .where("t.table_schema LIKE '" + schemaName + "'")
      .limit(DSL.inline(10))
      .offset(DSL.inline(2));

String sql = query.getSQL();
List<Object> bindValues = query.getBindValues(); 
```

### 有关 jOOQ 对绑定值的理解的更多信息：

[http://www.jooq.org/doc/latest/manual/sql-building/bind-values/](http://www.jooq.org/doc/latest/manual/sql-building/bind-values/)

### 关于语法完整性和 SQL 注入的注意事项

请注意，您的查询有些容易出错，因为`schemaName`应该检查并转义它，以防它源自用户输入。您可以为它创建一个绑定值，如下所示：

```
create.select(DSL.field("table_name"))
      .from("tables t")
      .where("t.table_schema LIKE ?", schemaName) 
```

# asp.net - T4MVC 和虚拟目录

> ID：13697889
> 
> 赞同：0
> 
> 时间：2012-12-04T07:19:34.323
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, virtual-directory, t4mvc

我`T4MVC`在我的项目中使用。但是在部署到**虚拟目录**后，例如“/app”，当我运行该站点时，所有地址都是**错误**的。例如，而不是`content/site.css`它`/app/content/site.css`，浏览器**找不到**它。

例如我写：

```
<link href="@Links.Content.bootstrap_min_css" rel="stylesheet" type="text/css" /> 
```

呈现为

```
<link href="/app/Content/bootstrap.min.css" rel="stylesheet" type="text/css" /> 
```

代替

```
<link href="Content/bootstrap.min.css" rel="stylesheet" type="text/css" /> 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:22:33.660

通常，这是正确的行为。如果您的应用程序在虚拟目录 /app 下运行，则应该可以使用`/app/content/site.css`. 所以你的首要重点应该是试图理解为什么这不起作用。

如果你真的想改变这个逻辑，请查看`ProcessVirtualPath`T4MVC.tt.hooks.t4。您可以更改路径的处理方式，并根据需要轻松使其相对。确保在更改此文件后重新运行 T4MVC 自定义工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:50:19.163

如果您在视图中显示用于引用 .css 的代码，将会很有帮助。我想它是这样的：

```
<link rel="stylesheet" type="text/css" href="/content/site.css"> 
```

您可以使用以下方法（在 Razor 中）指定应用程序根相对 url：

```
<link rel="stylesheet" type="text/css" href="@Url.Content("~/content/site.css")"> 
```

希望有帮助。

# c++ - 对同一图形应用多个同时旋转

> ID：13697890
> 
> 赞同：1
> 
> 时间：2012-12-04T07:19:36.797
> 
> 标签：c++, opengl, 3d

我的应用程序中有一个简单的矩形形状，我正在旋转固定它的一侧，并围绕 X 轴旋转。旋转看起来像下图（灰色表示我用这个图得到的当前旋转）

![在此处输入图像描述](../Images/e10f8ade979e1757b276e7b3c8f3f3e4.png)

我正在使用以下代码来获取此轮换

```
glPushMatrix();
glTranslatef(position of the axis point which has to be fixed for rotation);
glRotatef(rotationAmount, 1,0,0);
glTranslatef(-position of the axis point which has to be fixed for rotation);
Rectangle(xPosition, Position,200,100);
glPopMatrix(); 
```

但是，我必须围绕其一侧（图中的绿色箭头方向）围绕 y 轴进行额外的旋转来旋转同一个图形。如何旋转这个矩形，使其同时围绕 x 轴和 y 轴旋转？

编辑：我确实尝试添加另一个`glRotatef(rotateAroundYaxis amount,0,1,0)`，但输出实际上并不像我期望的那样。该图形在两个象限中旋转，而不是像简单的翻页那样围绕 y 轴旋转。

如果我在程序中仅使用其中一个（而不是一起）独立尝试这两个旋转，即

```
glRotatef(rotateAmount,1,0,0);
glRotatef(rotateYamount,0,-1,0); 
```

我确实独立获得了所需的 X 和 Y 旋转，但是当它们组合在一起时，它会组合成一些奇怪的旋转效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:36:20.477

听起来您只想要以下内容。如果你不告诉我，我会改变它。

```
glPushMatrix();
glTranslatef(position of the axis point which has to be fixed for rotation);
glRotatef(rotationAmount, 1,0,0); // <- keep this but also
glRotatef(rotationAmountAroundYAxis, 0,1,0); // <- add this
glTranslatef(-position of the axis point which has to be fixed for rotation);
Rectangle(xPosition, Position,200,100);
glPopMatrix(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:38:32.410

你需要改变这个：

```
glRotatef(rotationAmount, 1,0,0); 
```

进入这个：

```
glRotatef(rotationAmount, 1,1,0); 
```

# asp.net - 我们可以使用电子表格在 Excel 中透视数据吗

> ID：13697893
> 
> 赞同：1
> 
> 时间：2012-12-04T07:19:46.407
> 
> 标签：asp.net, vb.net, spreadsheetgear

我有一个场景来查看天气，可以使用电子表格在 excel 中透视数据。

我们将从应用程序（vb.net）发送数据表，excel需要旋转数据并粘贴到excel单元格中。

请让我知道是否可能。

谢谢

# android - 将位图图像从 SDCard 加载到 ListView Android

> ID：13697897
> 
> 赞同：0
> 
> 时间：2012-12-04T07:20:09.503
> 
> 标签：android, android-listview, android-arrayadapter, android-mediaplayer, mediastore

我正在尝试将位图图像从 sdcard 加载到 listview，但 imageview 没有显示图像。

这是我从 SDCard 获取图像的代码：

```
public static Bitmap getArtwork(Context context, int album_id) {

        ContentResolver res = context.getContentResolver();
        Uri uri = ContentUris.withAppendedId(sArtworkUri, album_id);
        if (uri != null)
        {
            InputStream in = null;
            try 
            {
                in = res.openInputStream(uri);
                return BitmapFactory.decodeStream(in, null, sBitmapOptions);
            } catch (FileNotFoundException ex) 
            {
                // The album art thumbnail does not actually exist. Maybe the user deleted it, or
                // maybe it never existed to begin with.
            } finally
            {
                    if (in != null)
                    {
                        try {
                            in.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
             }
        return null;
    } 
```

在 listview 中显示图像和文本的代码：

```
public class AlbumList extends ListActivity{

    public final ArrayList<HashMap<String, Object>> songsList = new ArrayList<HashMap<String, Object>>();
    public final ArrayList<HashMap<String, Object>> songsListData = new ArrayList<HashMap<String, Object>>();
    private Context context; 
    ListAdapter adapter;
    private static final BitmapFactory.Options sBitmapOptions = new BitmapFactory.Options();
    private static final Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");

    //Context contentResolver;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);
        context = this;

    final String[] cursor_cols = { MediaStore.Audio.Media._ID,
                    MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM,
                    MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.DATA,
                    MediaStore.Audio.Media.ALBUM_ID,
                    MediaStore.Audio.Media.DURATION };
              Cursor cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, cursor_cols, null, null, null);
              if (cursor == null) 
              {
                  //Query Failed , Handle error.
              }
              else if (!cursor.moveToFirst()) 
              {
                 //No media on the device.
              }
              else
              {   
                  int albumName = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM);
                  int id = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID);

                  for(int i=0;i<cursor.getCount();i++)
                  {
                            String Name = cursor.getString(albumName);
                            Integer albumid = cursor.getInt(id);                        

                            Bitmap bitmap = null;
                            bitmap = getArtwork(context, albumid);
                            if(bitmap == null)
                            {
                                bitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.icon);
                            }
    //                      ImageView iv = (ImageView) findViewById(R.id.list_image);
    //                      iv.setImageBitmap(bitmap);
                            HashMap<String, Object> song = new HashMap<String, Object>();
                            song.put("albumArt", bitmap);
                            song.put("albumName", Name);  
                            // Adding each song to SongList
                            songsList.add(song); 
                            cursor.moveToNext();
                   }
               }
               cursor.close(); 

                // looping through playlist
                for (int i = 0; i < songsList.size(); i++) {
                    // creating new HashMap
                    HashMap<String, Object> song = songsList.get(i);
                    // adding HashList to ArrayList
                    songsListData.add(song);
                }

                // Adding menuItems to ListView
                 String[] from = {"albumArt" , "albumName" };
                 int[] to={R.id.list_image , R.id.albumName};
                 adapter = new SimpleAdapter(this, songsListData,R.layout.list_item, from, to);
                 setListAdapter(adapter);
} 
```

我试图在适用于相同代码的 imageview 中显示单个图像。但是对于 listview 我没有得到图像。所以我该怎么做？？请给我一些解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:48:17.867

您可以使用[LazyList](https://github.com/thest1/LazyList)项目实现您的要求。

[这是在这里](https://stackoverflow.com/questions/10597000/how-to-show-images-in-list-view-that-are-stored-in-my-sd-card-particular-locatio)提出的相同问题 希望这可能会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:58:41.840

ListViews 夸大了你告诉他们的东西。您应该制作一个 xml 布局并将其命名为 list_item，在这里按照您想要的方式排列 ImageView 和 Textview。确保将包含布局的高度设置为包装内容。

现在，当您在列表视图中扩充视图时，请改为扩充您制作的此项目。然后将此膨胀布局中的 textview 和 imageview 设置为您想要的。

例如，在您的 listview 适配器中执行与此类似的操作。

```
@Override
  public View getView(int position, View convertView, ViewGroup parent) {

 if(convertView==null){
   convertView = li.inflatelayout(R.layout.list_item);

    }
    MyListItemModel item = items.get(position);
     // replace those R.ids by the ones inside your custom list_item layout.
     TextView label = (TextView)convertView.findViewById(R.id.item_textview);
     label.setText(text);
     ImageView iv= (Imageview)convertView.findViewById(R.id.item_imageview);
    iv.setsourceimage(bitmap);

    return convertView;
} 
```

如果需要，您还可以在此处设置他们的 onclick 侦听器。

# c++ - 模板和常量字符串

> ID：13697898
> 
> 赞同：6
> 
> 时间：2012-12-04T07:20:11.760
> 
> 标签：c++, templates

我有一个想要模板化的函数，目前我有两个不同的版本`std::string`和`std::wstring`.

功能（精简）是这样的

```
template <class T, class _Tc>
std::vector<T> TokenizeArgs(const T& in) {
const T tofind = T("\"' ");
.. do stuff ..
} 
```

`T`要么`std::string`要么`std::wstring`并且`_Tc`要么`char`要么`wchar_t`。我在获取我定义的常量字符串以在模板版本中工作时遇到问题。上面的代码适用于`std::string`但不适用于，`std::wstring`因为没有构造函数`std::wstring`需要一个`char*`数组。通常要解决此问题，我会将常量字符串声明为`const T tofind = L"\"' "`，但随后它将无法与`std::string`.

我对模板没有太多经验，所以我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T07:29:10.077

您可以将 const 创建移动到它自己的工厂函数中，并分别专门化该`string`函数`wstring`。

```
const T tofind = CreateConst<T>();

template <class T>
const T CreateConst();

template <>
const std::string CreateConst<std::string>()
{
     return std::string("\"' ");
}

template <>
const std::wstring CreateConst<std::wstring>()
{
     return std::wstring(L"\"' ");
} 
```

# iphone - 在 iOS 中更快地将图像上传到服务器

> ID：13697899
> 
> 赞同：0
> 
> 时间：2012-12-04T07:20:24.257
> 
> 标签：iphone, objective-c, ios, asihttprequest, image-upload

在我的 iPhone 应用程序中，我正在使用 ASIHTTPRequest 将图像上传到服务器。但是上传需要20多秒。有没有更好的方法将图像上传到服务器。？请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:54:53.870

您可以使用`UIImageJPEGRepresentation`和设置低质量的压缩值以减小图像的大小。[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)您可以找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:27:02.457

您可以压缩图像数据并上传，如果这样可以减小图像的大小并且是可行的做法。您知道上传速度以及“更好方式”的定义取决于您的 1\. 连接带宽，2\. 图像大小。3\. 预计上传时间。如果它们可以为您提供更好的性能，您可以查看其他框架，例如[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)或[AFNetworking 。](https://github.com/AFNetworking/AFNetworking)

# xml - 使用 XPath 计数（）

> ID：13697901
> 
> 赞同：0
> 
> 时间：2012-12-04T07:20:31.920
> 
> 标签：xml, xpath, xml-parsing

我有这样的简单 XML 文件：

```
<screen>
    <object attribute="String"/>
    <object attribute="Relationship">
         <vertices>
             <vertex point_index="1" x="18" y="30" />
             <vertex point_index="2" x="91" y="30" />
             <vertex point_index="3" x="91" y="60" />
             <vertex point_index="4" x="18" y="60" />                   
         </vertices>
    </object>
</screen> 
```

如何正确使用 XPath(1.0) count() 函数接收指定类型对象中的顶点数？我正在尝试使用以下字符串，但在线 XPath 测试工具 (http://www.xpathtester.com/test) 返回错误。

```
count(/screen/object[@attribute="Relationship"]/vertices/*) 
```

似乎有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:29:54.773

XPath 没有任何问题。只是您使用的测试工具无法返回数字作为结果。试试这个测试工具：http: [//www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm](http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm)

# ios - NSFetchedResultsController 部分名称 - 跟踪效率

> ID：13697903
> 
> 赞同：0
> 
> 时间：2012-12-04T07:20:37.567
> 
> 标签：ios, core-data, nsfetchedresultscontroller

这是我的核心数据结构

实体 -**类别**

Attr - **Id** (NSString)***主键***，**名称**(NSString)

实体 -**产品**

Attr - **Id** (NSString), **name** (NSString), **parentCategoryId** (NSString)***外键***,....

从上面可以看出，*Category 中的 Id*指向*Product 中的 parentCategoryId*。

在这种情况下，我想使用与产品中相关*parentCatrgoryId关联**的类别*中的名称作为 UITableView 的部分名称。（我在 fetchrequest 中使用 @"parentCategoryId" 作为 NSSortDescriptors 的键）但是*parentCatrgoryId*只是字母数字文本。

 **如何将字母数字文本（即*parentCatrgoryId 从产品*解码为*类别名称）*

**编辑**

***这就是我所做的及其工作。但我想问的是我所做的是否有效。***

我添加了一个名为**parentCategoryIdName**的属性，并通过计算一些简单的操作来使用它来存储确切的名称。

.h 文件

```
@property (nonatomic, retain) NSMutableArray *categoryArr;
@property (nonatomic, retain) NSMutableArray *productArr; 
```

.m 文件

```
 NSEntityDescription *entity = [NSEntityDescription entityForName:@"Category" inManagedObjectContext:self.MOContext];
    // Setup the fetch request
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];
    //    [request setPredicate:[NSCompoundPredicate andPredicateWithSubpredicates:subpredicates]];

    NSError *error;
    NSMutableArray *mutableFetchResults = [[self.MOContext executeFetchRequest:request error:&error] mutableCopy];
    [self setCategoryArr: mutableFetchResults];

    NSEntityDescription *entity2 = [NSEntityDescription entityForName:@"Product" inManagedObjectContext:self.MOContext];
    // Setup the fetch request
    NSFetchRequest *request2 = [[NSFetchRequest alloc] init];
    [request2 setEntity:entity2];
    //    [request2 setPredicate:[NSPredicate predicateWithFormat:@""]];
    NSError *error2;
    NSMutableArray *mutableFetchResults2 = [[self.MOContext executeFetchRequest:request2 error:&error2] mutableCopy];
    [self setProductArr: mutableFetchResults2]; 
```

将数据插入数据库

```
 for (int i=0; i< [self.productArr count]; i++) {
        Product *productEnt = [self.productArr objectAtIndex:i];
        NSManagedObjectContext *context = self.MOContext;

            for (int j=0; j<self.categoryArr.count; j++) {
                Category *categroy = [self.categoryArr objectAtIndex:j];
                if ([categroy.objectId isEqualToString:productEnt.parentCategoryId]) {
                    [productEnt setParentCategoryIdName:categroy.name];
                }

            // Save the context.
            NSError *error = nil;
            if (![context save:&error]) {
                // Replace this implementation with code to handle the error appropriately.
                // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
                NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:59:24.923

回顾一下：
根据我的收集，您需要 id/name 来形成部分并将其显示在部分的标题中。

您的解决方案将是有效的 IMO，但它应该是最后的手段：

想法：当您必须返回 titleForSectionAtIndex 时，我会从 categoryId JIT 中获取 categoryName：

或者如果这太慢了。

重新加载结果时获取所有部分名称。

=> 不要将它们保存在数据库中并重复数据

**但**

如果你*发现*它真的太慢了​​，那么以这种方式对你的数据进行非规范化是很好的 IMO（它应该是最后一个要考虑的解决方案）**

# android-intent - 在未完成呼叫意图的情况下返回时出现 IllegalStateException

> ID：13697905
> 
> 赞同：0
> 
> 时间：2012-12-04T07:20:42.667
> 
> 标签：android-intent, android-fragments, android-lifecycle, illegalstateexception

在我的应用程序中，我有一个内部视图页面和活动。

从其中一个片段中，单击按钮，我正在触发一个意图，以查看用于拨打电话的拨号框`intent.ACTION_VIEW`

它在大多数设备中都可以正常工作，包括`2.3.5`、`4.0.8`和`4.1`，但在 中`LG Optimus 4.0.3 (L5)`，它要求用户在对话框中的`Message`和`Call`动作中进行选择。如果我按通话按钮然后按返回按钮，它可以正常工作。但是，如果我按下返回按钮而不选择两者中的任何一个，应用程序就会崩溃，但有异常，

> java.lang.IllegalStateException：onSaveInstanceState 后无法执行此操作

如果没有片段存在，相同的意图代码在 LG Optimus 中可以正常工作。

我尝试了类似错误的修复程序，但它们不起作用。

我尝试使用提交片段`commitAllowingStateLoss()`

我还尝试在我的活动的 saveInstanceState 中使用此代码

```
 @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("WORKAROUND_FOR_BUG_19917_KEY", "WORKAROUND_FOR_BUG_19917_VALUE");
        super.onSaveInstanceState(outState);
    } 
```

有人可以帮我吗？

**编辑 ：**

错误日志：

```
 java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2448)
    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2476)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4476)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1299)
    at android.support.v4.app.FragmentManagerImpl.popBackStackImmediate(FragmentManager.java:445)
    at android.support.v4.app.FragmentActivity.onBackPressed(FragmentActivity.java:164)
    at com.sample01.android.activity.ExtensionActivity.onBackPressed(ExtensionActivity.java:499)
    at com.sample01.android.activity.Main.onResume(MainActivity.java:328)
    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1156)
    at android.app.Activity.performResume(Activity.java:4710)
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2438)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:24:09.437

我找到了解决此问题的方法。

我尝试检查`exit status`并删除 saveInstanceState 中的超级调用。

`super.onSaveInstanceState( savedInstanceState );`

我正在提交允许状态丢失的片段，因为我的应用程序正在退出。

我尝试将我的应用设置`EXIT STATUS`为 false。

现在它正在检查 onBackpress() 中的退出状态，它工作正常！

感谢[**`POST`**](https://stackoverflow.com/a/10261438/1237656)这帮助我找到了解决方案。！甚至对该答案的评论也很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T14:07:23.053

如果您有 ProgressDialog 停止它并添加一些测试，例如： if (progressDialog != null && progressDialog.isShowing()){ stopProgressBarDialog(); }

# iphone - xcode中的工具栏和后退按钮问题

> ID：13697910
> 
> 赞同：0
> 
> 时间：2012-12-04T07:21:38.780
> 
> 标签：iphone, ios, xcode, ipad

我正在创建一个工具栏应用程序，在该应用程序中，所有工具栏图标和操作都已成功完成。但是当我使用该图标进行下一个视图调用并从该视图中调用一个后退按钮时，它会崩溃..这里我正在添加我的代码

/////在视图中加载

```
 objectLabel = [[UILabel alloc]init];
   objectLabel.frame = CGRectMake(10, 10, 300, 40);
   objectLabel.text = @"Press Button";
   [self.view addSubview:objectLabel];
   NSLog(@"label");
   objectToolbar=[UIToolbar new];
    objectToolbar.barStyle = UIBarStyleBlackTranslucent;
   [objectToolbar sizeToFit];
   objectToolbar.frame = CGRectMake(0, 410, 320, 50);
   NSLog(@"toolbar");

   UIBarButtonItem *systemItem1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
                                                                             target:self
                                                                             action:@selector(pressButton1:)];

   UIBarButtonItem *systemItem2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction
                                                                             target:self
                                                                             action:@selector(pressButton2:)];

   UIBarButtonItem *systemItem3 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCamera
                                                                             target:self
                                                                             action:@selector(pressButton3:)];
   UIBarButtonItem *flexItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                          target:nil
                                                                          action:nil];
   NSArray *items = [NSArray arrayWithObjects: systemItem1, flexItem, systemItem2, flexItem, systemItem3, nil];
   [objectToolbar setItems:items animated:NO];
   [self.view addSubview:objectToolbar]; 
```

///之后

```
 -(void) pressButton1:(id)sender{
   // objectLabel.text = @"Add";
       FirstViewController *objectFirstViewController=[[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
       [self.view addSubview:objectFirstViewController.view];

   }

 -(void) pressButton2:(id)sender{
objectLabel.text = @"Take Action";
 }  

-(void) pressButton3:(id)sender{
objectLabel.text = @"Camera";
} 
```

///在FirstViewController.m中

```
 -(IBAction)back:(id)sender
    {
      ViewController *objectViewController=[[ViewController  alloc]initWithNibName:@"ViewController" bundle:nil];
      [self.view addSubview:objectViewController.view];
   } 
```

当我单击后退按钮时，它会崩溃..请给我解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:25:21.803

为了返回，您不应该创建上一个类的新对象并再次添加它。相反，您需要从超级视图中删除当前子视图才能返回。

```
-(IBAction)back:(id)sender
{

  [self.view removeFromSuperview];
} 
```

最好为此使用导航或模型转换，而不是仅仅使用`addSubView`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:27:39.337

只需从当前视图的超级视图中删除，例如..

```
 [self.view removeFromSuperview]; 

 // or  if you want to call the method from your MainViewController use this line [objectFirstViewController removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:37:16.403

由于您正在这样做`[self.view addSubview:Viewcontroller.view];`，因此从逻辑上讲，您应该`[self.view removeFromSuperview];`在添加的子视图中进行操作。尽管如此，还是建议您使用导航控制器并执行推送/弹出操作来显示/删除视图。如果您的问题是导航栏，您可以通过隐藏它`self.navigationController.navigationBarHidden = YES;`并使用您的工具栏作为替代品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:36:14.503

而不是这个；

```
[self.view addSubview:objectFirstViewController.view]; 
```

采用

[self.navigationController pushViewController:objectFirstViewController 动画：YES];

并在 FirstviewController 集的 Viewdidload 处，

self.navigationController.navigationBar.hidden=YES;

并使用它

```
-(IBAction)back:(id)sender
{

        [self.navigationController popViewControllerAnimated:YES];
} 
```

就是这样。

# php - 根据外部站点的单独查询呈现结果列表

> ID：13697913
> 
> 赞同：1
> 
> 时间：2012-12-04T07:21:49.113
> 
> 标签：php, html, tumblr

这更像是“这可能吗？” 问题而不是寻求问题的特定方面的帮助。我想做的是：

假设我有一个名为 search.com 的网站，其唯一目的是搜索名为 example.org 的网站

1.  用户输入他们想在 search.com 中搜索的两个或多个术语：例如，Apples AND Oranges。

2.  Search.com 将这些术语中的每一个作为单独的搜索查询提交给 example.org。Example.org 返回其数据库中标记为 Apples 的每篇文章的列表，以及其数据库中标记为 Oranges 的每篇文章的列表。

3.  Search.com 会检查这些列表并识别带有 Apples 和 Oranges 标记的文章。

4.  仅用一个或另一个词标记的帖子将被丢弃；Example.org 上标记为 Apples AND Oranges 的文章列表显示给用户。

显而易见的问题是为什么我不能只在 example.org 上搜索 Apples AND Oranges。问题是 example.org（如果你好奇的话，实际上是 tumblr 网站）目前在其原生架构中不允许这样做。我对这种疏忽和他们对实现我愿意将我自己的外部解决方案解决问题的能力缺乏兴趣感到非常恼火，如果它是 A) 可能的并且 B) 完成起来不太复杂。

那么，这样的事情可能吗？如果是这样，实施起来会有多困难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:58:12.733

Tumblr 提供了一个[API](http://www.tumblr.com/api)，它知道一个[Tagged Method](http://www.tumblr.com/docs/en/api/v2#tagged-method)：

> `/tagged`- 获取带有标签的帖子
> 
> **例子**
> 
> *   `http://api.tumblr.com/v2/tagged?tag=gif`
> *   `http://api.tumblr.com/v2/tagged?tag=lol`

它默认输出 20 个帖子（您可以使用`limit`参数更改此值，但只有 1-20 个）。我想如果您使用参数指定时间戳，就有可能获得更多（或所有）帖子`before`。

你可以使用任何你喜欢的编程语言。对于某些人来说，可能会有特殊的 Tumblr 库，我猜这会使这项工作变得更容易。

# c# - 如何使用 VSTO 获取活动的 excel 范围？

> ID：13697914
> 
> 赞同：0
> 
> 时间：2012-12-04T07:21:50.580
> 
> 标签：c#, excel, vsto

我想在 Excel 中获取选定或聚焦的范围。更好地返回我一个 Range 对象。我知道activeCell，但它只给了我一个细胞。我需要的是一系列细胞。希望你能得到我的问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T03:05:00.600

感谢@Tim，因为他首先来到这里并为答案提供了良好的开端（给这个人打勾！）。

但只是添加到它（在 C# 中）。. .

以下代码将提供全局范围（在您的加载项应用程序中的任何位置为您提供所需的信息）。

```
Microsoft.Office.Interop.Excel.Range stuff =
     Globals.ThisAddIn.Application.Selection as Excel.Range; 
```

笔记：

1.  检查（东西！= null）
2.  “ThisAddIn”应替换为您的加载项名称。
3.  选择返回一个[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)类型的值（编译器完全忽略它）。结果（就编译器而言），它在被强制转换/分配给变量之前没有类型。

# silverlight - 是否有用于制作 WP7 游戏排行榜的库？

> ID：13697915
> 
> 赞同：0
> 
> 时间：2012-12-04T07:21:53.463
> 
> 标签：silverlight, windows-phone-7, leaderboard

我寻找了一种简单的方法来做到这一点，然后我找到了 MAGADE

但不幸的是，注册已停止：

[https://www.mogade.com/manage/accounts/new](https://www.mogade.com/manage/accounts/new)

当我听说使用 MAGADE 这样做很简单时，我很高兴，并且提供了一个工作示例。但现在，我很失望。

请问有人有替代品吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:51:47.563

分数循环怎么[样？](http://www.scoreloop.com) 它由 RIM（Blackberry 人）运营并且是免费的。它支持安卓、IOS和WP7

# oauth - 获取 oauthaccountdata 中的所有用户？

> ID：13697918
> 
> 赞同：1
> 
> 时间：2012-12-04T07:21:56.367
> 
> 标签：oauth, membership-provider

如何获取或迭代所有**oauth**用户？

会员资格中没有像 getallusers 这样的方法

# sharepoint - 如何在xslt中获取当前url

> ID：13697919
> 
> 赞同：1
> 
> 时间：2012-12-04T07:22:02.230
> 
> 标签：sharepoint, sharepoint-2010, xslt-1.0

我在 sharepoint 中编程，我需要在我的内容查询 WebPart 的 Sytle 文件（ItemStyle.xsl 或 ContentQueryMain.xsl）中获取当前 url，以便将查询字符串添加到我页面中链接的 url。

> 是否可以在类似于 javascript 的 location.href 的 XSL 中获取页面的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:41:04.290

尝试这个

我们将把这个命名空间添加到您的 XSL 文件中，您可以将其添加到 Main CQWP xsl 或 ItemStyle.xsl，以防您将其添加到 Main XSL 中，并将其作为参数传递给 Item Template。我通常添加到 Item Style XSL 。

在顶部添加 NameSpace xmlns:ddwrt=”http://schemas.microsoft.com/WebParts/v2/DataView/runtime” 在命名空间定义下方添加参数“PageUrl”

1.  将此参数作为显示 URL 的一部分作为源查询字符串参数的一部分

谢谢

# python - python列表中的元素总和

> ID：13697929
> 
> 赞同：0
> 
> 时间：2012-12-04T07:22:33.637
> 
> 标签：python, list, sum

我正在尝试编写一些代码，可以对列表中的元素求和，如下例所示：

```
list[(a,b,1),(c,d,2),(e,f,3)] 
```

我想要做的是将这个列表中的数字相加。这种列表的名称是什么？

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:26:52.110

给定一个列表，并假设您必须对示例中给出的整数求和

```
foo = [('a','b',1),('c','d',2),('e','f',3)] 
```

您可以执行以下操作

```
sum(e for e in itertools.chain(*foo) if isinstance(e, int)) 
```

*   在这里[itertools.chain 会展](http://docs.python.org/2/library/itertools.html#itertools.chain)平列表
*   [isinstance](http://docs.python.org/2/library/functions.html#isinstance)检查元素是否是整数的实例
*   仅对作为 int 实例的元素求和

如果数字元素位于定义的索引处，如示例中所示，您可以执行

```
>>> zip(*foo)
[('a', 'c', 'e'), ('b', 'd', 'f'), (1, 2, 3)]
>>> sum(zip(*foo)[2])
6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T07:27:17.353

试试这个

它是一个元组列表，您需要遍历列表的各个元素并提取值，一旦提取，您就可以`sum`在它们上

```
In [103]: l = [('a','b',1),('c','d',2),('e','f',3)]

In [104]: sum([x[2] for x in l])
Out[104]: 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:35:42.023

您可以使用 func flatten() 解析嵌套列表，如 follow list lst = [('a', 'b' , (1, 2)), ('c', 'd' , 2), ('e' , 'f', 3)]

```
def flatten(l):  
    for el in l:  
        if hasattr(el, "__iter__") and not isinstance(el, basestring):  
            for sub in flatten(el):  
                yield sub  
        else:  
            yield el 

print sum(e for e in flatten(lst) if isinstance(e, int)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:16:57.307

将一个可迭代对象减少为单个值是创建内置[reduce](http://docs.python.org/2/library/functions.html#reduce)函数的目的：

```
In [1]: l = [("a", "b", 1), ("c", "d", 2), ("e", "f", 3)]

In [2]: reduce(lambda x,y: x + y[2], l, 0)
Out[2]: 6 
```

因此，您无需显式迭代，该`reduce`函数会为您完成。您也不需要导入其他模块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:21:51.753

```
my_list = [('a','b',1),('c','d',2),('e','f',3)]

my_answer = sum(z for x,y,z in my_list) 
```

简洁明了，对未来的你来说非常易读。毫无疑问，这里发生了什么。

# php - 动作的相应模板没有被执行

> ID：13697931
> 
> 赞同：0
> 
> 时间：2012-12-04T07:22:41.123
> 
> 标签：php, symfony-1.4

我有一个代码，我在其中分配了一些变量，然后调用并显示相应的模板。但在其中一种情况下，控制器没有到达模板，我得到一个错误

> 您正在查找的页面暂时不可用。请稍后再试。

我试图调试它，发现代码总是到达操作的最后一行，而模板没有显示。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:21:52.587

尝试通过开发环境打开页面。只需将 frontend_dev.php 或任何您的应用程序调用到您拥有的主机即可。

示例：yourdomain/frontend_dev.php/module/action。

有了这个，您可以看到您遇到的确切错误。

# windows - Windows 密钥库和证书

> ID：13697934
> 
> 赞同：6
> 
> 时间：2012-12-04T06:23:05.220
> 
> 标签：windows, certificate, java

我最近继承了一个具有最少文档的项目，该项目执行文档的数字签名，我收到了一个让我有点困惑的更改请求。

该应用程序基于 Java，并利用 Java 密钥库 (JKS) 并使用指定为命令行操作的别名的私钥对输入文档进行数字签名。这一切对我来说似乎相当简单，但是更改请求让我感到困惑。

客户要求能够使用“Windows”密钥库（更具体地说，据我所知，与个人证书相关的 Windows-MY 密钥库）。现在，我最初的假设是客户端请求的内容根本不可能，因为此密钥库将只包含证书，不能用于以任何身份签署文档。我不正确，还是 Windows-MY 密钥库只包含公共证书？我不相信私钥会嵌入其中一个证书中。

不幸的是，有一些沟通困难，所以我想在继续之前确保我的推理是正确的。

以下是支持我的案例的更多证据（来自客户的沟通）：

创建 Windows 密钥库（从 Java 密钥库导出）步骤在这里 -

1.  生成 RSA 密钥

    ```
     keytool -genkey -alias mykey -keyalg RSA -keystore my.jks -keysize 2048 
    ```

2.  从上述密钥库导出证书：

    ```
     keytool -export -alias mykey -file mykey.crt -keystore my.jks

     Enter keystore password:  temp123

     Certificate stored in file <mykey.crt> 
    ```

3.  在 Windows 密钥库中安装上述证书。

一个。双击“mykey.crt”并点击安装证书

湾。选择“将所有证书放入以下存储”单选按钮，然后单击“浏览”按钮将其添加到 Windows 证书存储中。C。在 WindowsMy 商店中检查此证书。

除非我错了，否则 keytool 只会生成证书类型而不是实际的公钥/私钥对？

任何帮助甚至肯定都将不胜感激，对问题缺乏明确性表示歉意，但不幸的是，这就是我目前所要做的。Java 或 Windows 特定的答案会有所帮助，但即使只是对基本原则的确认也将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-09T09:18:17.657

也许您想查看有关提供程序的 Oracle 文档 [ [1](http://www.oracle.com/technetwork/articles/javase/security-137537.html) ]，该文档`SunMSCAPI`可用于访问存储在`Windows-MY`（个人）和`Windows-ROOT`（受信任的根证书颁发机构）存储中的证书和密钥。

还有一个小代码片段，它似乎非常合理地满足您的需求：

```
 KeyStore ks = KeyStore.getInstance("Windows-MY");
    // Note: When a security manager is installed, 
    // the following call requires SecurityPermission 
    // "authProvider.SunMSCAPI".
    ks.load(null, null); 

    byte[] data = ...
    String alias = "myRSA";

    PrivateKey privKey = (PrivateKey) ks.getKey(alias, null);
    Certificate cert = ks.getCertificate(alias);

    Provider p = ks.getProvider();
    Signature sig = Signature.getInstance("SHA1withRSA", p);
    sig.initSign(privKey);
    sig.update(data);
    byte[] signature = sig.sign();
    System.out.println("\tGenerated signature...");
    sig.initVerify(cert);
    sig.update(data);
    if (sig.verify(signature)) {
       System.out.println("\tSignature verified!");
    } 
```

总结：Windows-My 商店拥有证书和私钥，两者都可以使用`SunMSCAPI`提供程序从 Java 中读取，并可用于签署数字文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T19:32:32.060

如果只是想使用 keytool 创建的（java）密钥库的证书及其私钥，以便您可以将其导入 Windows，那么您是否只需将其导出为 PKCS12 格式（PFX）。（即；导出时，使用参数-storetype=pkcs12）

# python - 我不断收到错误列表分配索引超出范围，为什么？（Python）

> ID：13697936
> 
> 赞同：0
> 
> 时间：2012-12-04T07:23:13.293
> 
> 标签：python

问题： `Calculate the mean and standard deviation of a tightly clustered set of 1000 initial conditions as a function of iteration number. The bunch of initial conditions should be Gaussian distributed about x = 0.3 with a standard deviation of 10-3`

我写的代码：

```
from numpy import *

def IterateMap(x,r,n):
    for i in xrange(n):
        x = r * x * (1.0 - x)
    return x

output = "data"
nIterations = 1000
r = 4.0
x0 = 0.3
delta = 0.00005

L = []

for i in xrange(nIterations):
    x = x0
    x = IterateMap(x,r,1)
    L[i] = x
    x0 = x0 + delta

A = array(L)

print 'mean: ', mean(A) 
```

所以我的代码应该做的是获取 x (x0) 的初始值并调用 IterateMap 函数并返回 x 的新值并将其放入 list(L) 然后 x0 更改为新值，这过程持续 1000 次。我收到错误“列表分配索引超出范围”。另外，您认为我正确地解决了这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:25:47.180

当您处理超出当前大小的索引时，Python 列表不会自动增长。您创建了一个空列表，因此您无法处理其中的*任何*索引。

用于`.append()`将新值添加到列表末尾：

```
L.append(x) 
```

或者，您必须创建一个列表来保存您想要生成的所有索引，方法是使用 None 或其他默认值预先填充它：

```
L = [None for _ in xrange(nIterations)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:28:04.760

问题在这里：

```
L = [] # the list is empty!

for i in xrange(nIterations):
    ...
    L[i] = x 
```

要修复，请替换`L[i] = x`为`L.append(x)`.

# android - 多个异步任务未正确执行

> ID：13697938
> 
> 赞同：0
> 
> 时间：2012-12-04T07:23:18.280
> 
> 标签：android, android-asynctask

我试图在`onCreate()`活动中一次启动 6 个异步任务。但我注意到以下内容：

a）如果我保持相同的活动，所有异步任务都会`doInBackground()`正确执行。

b）如果我切换到其他活动，则只会`doInBackground()`执行 4 或 5 个异步任务。最后一个`async`任务`doInBackground()`永远不会执行。

有人可以告诉我可能做错了什么。我在 for 循环中盯着不同的异步任务。如果我在 onStart() 中执行此操作，那么如果我切换到此活动，则所有异步任务都会再次执行。请帮忙。这是示例代码：

```
For(int i=0;i<7;i++){
webServiceTask= WebServiceTask.getInstance();
webServiceTask.execute("");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:44:40.067

也许您应该考虑以下几点：

*   WebServiceTask 是否检索任何值得保留的信息（即不是很不稳定，用户反复请求相同数据的风险很高）：在这种情况下，您可以将您的工作卸载到（意图）服务并传达通过 ResultReceiver 或 ContentProvider（仅举几例）将结果返回到您的应用程序。
*   如果周围没有活动或服务来保持应用程序的进程处于活动状态，则不能保证 AsyncTasks 运行完成。
*   如果 WebServiceTask 一个接一个地运行是可以的，那么您也可以更改您的代码以仅使用一个顺序执行这些任务的 AsyncTask。你甚至可以考虑实现 AsyncTask 的进度报告机制。
*   如果 AsyncTask(s) 执行的操作在 Activity 关闭后没有任何意义，请务必在 onStop() 或 onPause() 生命周期方法中 .cancel() 取消它们。
*   请记住 Ed Rowland 的回答的第 3 条，我也在我之前对您的问题的评论中发布了它。

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:18:43.603

在用户切换后，您需要某种服务来保持您的进程处于活动状态。一旦你的活动失去焦点，Android 可以完全关闭你的进程。或您的活动。两者都会导致问题，尤其是当您使用已关闭的 Activity 的上下文时。

The Right Thing to Do (tm) 是实现一个服务，并将操作传递给服务执行。

只有四个任务同时运行的原因有很多。在我的头顶上：

*   HttpConnection 汇集到服务器的连接，并将任何给定服务器的最大连接数限制为某个合理的值。4听起来差不多。

*   您的目标服务器正在限制同时连接的数量。

*   你的线程池没有你想象的那么大。启动 API 16（我认为）默认线程池大小是一个线程！(!!) 理由：显然，Android OS 开发人员已经厌倦了 Android 应用程序开发人员的线程错误。您的任务是否有可能连续执行？这或多或少符合您描述的症状。

但这是一个单独的问题。

# multithreading - winapi apc函数参数传递-最佳实践是什么

> ID：13697940
> 
> 赞同：0
> 
> 时间：2012-12-04T07:23:23.840
> 
> 标签：multithreading, winapi

嗨，我使用 winapi 的 QueueUserAPC 在另一个线程中调用 apc 函数调用。我的问题是，将参数传递给它的最佳做法是什么。我指的是对象生命周期和分配/解除分配责任。

DWORD WINAPI QueueUserAPC(PAPCFUNC pfnAPC, HANDLE hThread, ULONG_PTR dwData);

我正在使用 dwData 传递参数以传递指向某些数据的指针，我想知道我应该如何处理它。我需要确保它一直存在，直到接收线程完成使用它。我应该使用智能指针来确保不再使用时释放数据吗？

我猜想调用线程和dealloc中的分配。在接收是可能的，但可能不是一件好事。

还有什么可以做的吗？我想我想避免两者之间的同步只是为了通知接收线程已完成数据......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:36:34.763

在发送线程中分配和在接收线程中释放很容易，但它的主要缺点是它可能会泄漏，即使您处理发送失败，接收线程也可能在有机会执行 APC 之前完成.

避免泄漏的最简单方法可能是为发送的数据创建一个队列 - 可能是每个线程一个队列 - 当线程完成时，您遍历线程队列并释放所有待处理的数据。

但像往常一样，魔鬼在细节中......

# c++ - 如何在 Linux 中获取“文件创建时间”

> ID：13697941
> 
> 赞同：5
> 
> 时间：2012-12-04T07:23:26.650
> 
> 标签：c++, linux, porting

我需要找出在 Linux 中使用 C++ 创建文件的时间和日期。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T07:48:06.077

[如何获取文件上次修改的日期？](http://www.jb.man.ac.uk/~slowe/cpp/lastmod.html).

```
struct stat attrib;                 //1\. create a file attribute structure
stat("file_name", &attrib);         //2\. get the attributes of afile.txt
clock = gmtime(&(attrib.st_mtime)); //3\. Get the last modified time and
                                    // put it into the time structure 
```

[4.8 文件时间更新](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html)：

> 在 Linux 中：与文件关联的三个不同的时间戳：
> 
> *   最后一次访问内容的时间 ( `atime`),
> *   最后一次修改内容的时间（`mtime`），
> *   和上次修改 inode 的时间（元数据，`ctime`）。

所以，不，你**找不到**文件创建时间。[（参考）](https://unix.stackexchange.com/questions/24441/get-file-created-creation-time)。一些与您的问题相关的有用链接：

*   [如何执行 ls 然后按创建日期对结果进行排序？](https://unix.stackexchange.com/questions/20460/how-do-i-do-a-ls-and-then-sort-the-results-by-date-created)
*   [获取文件创建/创建时间？](https://unix.stackexchange.com/questions/24441/get-file-created-creation-time)
*   一篇好文章，[“文件创建时间”](http://lwn.net/Articles/397442/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:34:48.073

要准确获取创建时间似乎并不容易，但您可以获得上次修改、上次访问和上次状态更改的时间。

您需要使用sys/stat.h 中定义的[结构 stat 。](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/stat.h.html)[这是](http://pubs.opengroup.org/onlinepubs/009695399/functions/stat.html)有关如何获取和使用此结构的文档。

# php - URL 未正确重定向。（有IP地址）

> ID：13697944
> 
> 赞同：0
> 
> 时间：2012-12-04T07:23:36.677
> 
> 标签：php, apache, magento, apache2

我在一些托管服务器中托管了我的网站（在 Megento 中）。他们说默认情况下`mod_redirect`是启用的。

问题是使用 IP 地址无法正确重定向。我没有在 DNS 中输入我的主机名。

看看它现在是如何工作的，如果我从 URL 请求一些链接

```
http://173.254.28.102/~finnande 
```

它继续这样

```
http://173.254.28.102/~finnande/~finnande/~finnande/~finnande/~finnande/~finnande/~finnande/~finnande/ 
```

一个人在这里问了同样的问题，但没有找到答案

[http://www.artio.net/support-forums/joomsef/community-support/joomsef-3/this-page-is-not-redirecting-properly](http://www.artio.net/support-forums/joomsef/community-support/joomsef-3/this-page-is-not-redirecting-properly)

我的 .htaccess 文件包含...

```
############################################
## uncomment these lines for CGI mode
## make sure to specify the correct cgi php binary file name
## it might be /cgi-bin/php-cgi

#    Action php5-cgi /cgi-bin/php5-cgi
#    AddHandler php5-cgi .php

############################################
## GoDaddy specific options

#   Options -MultiViews

## you might also need to add this line to php.ini
##     cgi.fix_pathinfo = 1
## if it still doesn't work, rename php.ini to php5.ini

############################################
## this line is specific for 1and1 hosting

    #AddType x-mapp-php5 .php
    #AddHandler x-mapp-php5 .php

############################################
## default index file

    DirectoryIndex index.php

<IfModule mod_php5.c>

############################################
## adjust memory limit

#    php_value memory_limit 64M
    php_value memory_limit 256M
    php_value max_execution_time 18000

############################################
## disable magic quotes for php request vars

    php_flag magic_quotes_gpc off

############################################
## disable automatic session start
## before autoload was initialized

    php_flag session.auto_start off

############################################
## enable resulting html compression

    #php_flag zlib.output_compression on

###########################################
# disable user agent verification to not break multiple image upload

    php_flag suhosin.session.cryptua off

###########################################
# turn off compatibility with PHP4 when dealing with objects

    php_flag zend.ze1_compatibility_mode Off

</IfModule>

<IfModule mod_security.c>
###########################################
# disable POST processing to not break multiple image upload

    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

    # Insert filter on all content
    ###SetOutputFilter DEFLATE
    # Insert filter on selected content types only
    #AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

    # Netscape 4.x has some problems...
    #BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
    #BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
    #BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # Don't compress images
    #SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    #Header append Vary User-Agent env=!dont-vary

</IfModule>

<IfModule mod_ssl.c>

############################################
## make HTTPS env vars available for CGI mode

    SSLOptions StdEnvVars

</IfModule>

<IfModule mod_rewrite.c>

############################################
## enable rewrites

# For security reasons, Option followsymlinks cannot be overridden.
#    Options +FollowSymLinks
    Options +SymLinksIfOwnerMatch
    RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

    RewriteBase /

############################################
## uncomment next line to enable light API calls processing

#    RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

############################################
## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

############################################
## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule>

############################################
## Prevent character encoding issues from server overrides
## If you still have problems, use the second line instead

    AddDefaultCharset Off
    #AddDefaultCharset UTF-8

<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresDefault "access plus 1 year"

</IfModule>

############################################
## By default allow all access

    Order allow,deny
    Allow from all

###########################################
## Deny access to release notes to prevent disclosure of the installed Magento version

    <Files RELEASE_NOTES.txt>
        order allow,deny
        deny from all
    </Files>

############################################
## If running in cluster environment, uncomment this
## http://developer.yahoo.com/performance/rules.html#etags

    #FileETag none 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:58:22.860

.htaccess 文件中的设置有问题，您应该检查带有 RewriteCond 和 RewriteRule 指令的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:49:24.310

回答“我会通过工程将 RewriteBase / 更改为 RewriteBase /~finnande [`Krzysztof Księżyk`](https://stackoverflow.com/users/1817915/krzysztof-ksiezyk) ”。谢谢 [Krzysztof Księżyk](https://stackoverflow.com/users/1817915/krzysztof-ksiezyk)。

# java - 将 GWT-Highchart 添加到 TabSet 中的选项卡

> ID：13697949
> 
> 赞同：0
> 
> 时间：2012-12-04T07:23:54.290
> 
> 标签：java, gwt, highcharts, smartgwt

这是我的代码：

```
HighChart chart = new HighChart(title, PIE, data); 
VLayout vlayout = new VLayout(title); 
vlayout.setHeight100();
vlayout.setWidth100();
vlayout.addMember(chart); 
Tab tab = new Tab(); 
tab.setTitle(title); 
tab.setPane(vlayout); 
tab.setCanClose(true); 
tabset.addTab(tab); 
```

该类`HighChart`包含[展示](http://www.moxiegroup.com/moxieapps/gwt-highcharts/showcase/#main)示例代码。结果是一个空选项卡，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:36:27.497

问题我解决了，<code>RootLayoutPanel 不接受图表显示，简单替换成a`layout.draw();`就行了

# java - 难以向 Roo 生成的项目添加新视图

> ID：13697950
> 
> 赞同：1
> 
> 时间：2012-12-04T07:24:17.700
> 
> 标签：java, spring, spring-mvc, view, spring-roo

我正在尝试将我的自定义视图和控制器添加到一个非常基本的 roo 生成的项目中。

通过使用 Spring Tool Suite (STS, Spring 3.1)，我创建了一个新项目，然后运行以下 3 个命令：

```
 persistence setup --database MYSQL --provider HIBERNATE --userName *** --password *** --databaseName ***
    entity jpa --class com.demoing.domain.Customer --testAutomatically 
    field string --fieldName firstName --notNull 
    field string --fieldName lastName --notNull 
    controller scaffold --class com.demoing.controller.CustomerController --entity com.demoing.domain.Customer 
```

生成这些后，可以在服务器上启动应用程序。

但是，当我添加一个新的 .jspx 文件（如 home.jspx）时，应用程序会在转到特定链接时显示“找不到资源”。我在 src/main/webapp/WEB-INF/views/home.jspx 中的其他视图旁边添加了 jspx

我在 views.xml 中添加了视图的定义并手动创建了一个控制器，如下所示：

```
package com.demoing.domain;

import javax.servlet.http.HttpServletRequest;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@Scope(value = "session")
@RequestMapping("/home")
public class HomeController {
    @RequestMapping(produces="text/html")
    public String home(HttpServletRequest request, Model uiModel ){

        return "home";
    }
} 
```

以及视图定义：

```
 <definition name="home" extends="public">
    <put-attribute name="body" value="/WEB-INF/views/home.jspx" />
  </definition> 
```

我想要的只是显示一个全新的空白页面。但是，当我转到“项目/主页”时，它会显示“找不到资源”。

我真的不明白我错过了什么，我希望对这些事情有更多经验的人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:42:57.613

请在 StackOverflow 上查看以下问答

[在 spring roo 中添加自定义页面](https://stackoverflow.com/questions/5687282/adding-a-custom-page-in-spring-roo)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:22:19.850

我有一个想法：将您的`HomeController`控制器放入包`com.demoing.controller`中，其他控制器所在的位置。

*我不确切知道，但也许 Roo 将 Spring 配置为仅扫描此包（和子包）以查找控制器。*

# eclipse - 无法在没有网络的 XP 中运行 ScalaIDE

> ID：13697953
> 
> 赞同：0
> 
> 时间：2012-12-04T07:24:34.670
> 
> 标签：eclipse, scala, eclipse-plugin, scala-ide

最近我想将我的开发环境移动到我公司的标准虚拟 XP 中，而无需连接互联网。但是我的 Scala 开发环境坏了。我通过解压缩并复制到虚拟 XP 中从 typesafe 测试 ScalaIDE。而且，我尝试在纯 Eclipse 上安装 scala 插件并将其复制到该虚拟 XP 中。这两种方法都被打破了。有谁知道为什么？我的上网本可以很好地运行 ScalaIDE。我通过 virtualbox 在带有互联网的虚拟 XP 中进行了测试。ScalaIDE 运行良好。但是在没有互联网的虚拟 XP 中，似乎所有 scala 插件都从 Eclipse 中消失了，但文件在插件/功能中。我无法打开 Scala 透视图，无法在偏好中找到 scala。发生什么了？

谢谢！

[更新] TypeSafe 的 ScalaIDE 无法在没有任何网络、Intranet 或 Internet 的环境中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T13:07:37.543

根据我收集到的问题，您遇到的是安装问题而不是构建问题。如果您有离线不可用的依赖项，构建可能会出现问题，但安装 Scala IDE 应该可以工作。

[Scala-IDE 网站](http://scala-ide.org/download/current.html)为每个版本提供了一个压缩更新站点供下载。最新版本的直接 URL 在[这里](http://download.scala-ide.org/sdk/e38/scala210/stable/update-site.zip)。

您需要将此文件提供给您正在使用的离线操作系统。如果您解压缩它，您应该能够将解压缩结果指向本地更新站点并选择您可能要安装的插件。更简单地说，您也可以尝试将该 zip 拖放到 Eclipse 的安装对话框中。

# hadoop - Hbase 启动错误

> ID：13697954
> 
> 赞同：0
> 
> 时间：2012-12-04T07:24:34.707
> 
> 标签：hadoop, hbase

我启动 hbase.some 区域文件是损坏的块

这个错误是：

HTTP 错误 500

访问 /master.jsp 时出现问题。原因：

```
Trying to contact region server null for region , row '', but failed after 10 attempts. 
```

异常：java.io.IOException: HRegionInfo 在 -ROOT-, row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,1/info 中为空或为空:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在-ROOT-中为空或为空，row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15 , .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在-ROOT-中为空或为空，row=keyvalues={.META.,,1/info: server/1354594525394/Put/vlen=15, .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在 -ROOT- 中为 null 或为空，row=keyvalues={ .META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 为 null 或为空-ROOT-, row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在 -ROOT- 中为 null 或为空，row=keyvalues={ .META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 为 null 或为空-ROOT-, row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io .IOException：HRegionInfo 在 -ROOT- 中为 null 或为空，row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15,.META.,,1/info:serverstartcode/1354594525394/ Put/vlen=8} java.io.IOException: HRegionInfo 在 -ROOT- 中为 null 或为空，row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15,.META., ,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException:HRegionInfo 在 -ROOT- 中为空或为空，row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,1/info:serverstartcode/1354594525394/Put/vlen =8}

造成的：

org.apache.hadoop.hbase.client.RetriesExhaustedException：尝试联系区域服务器 null 为区域，行 ''，但 10 次尝试后失败。异常：java.io.IOException: HRegionInfo 在 -ROOT-, row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15, .META.,,1/info 中为空或为空:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在-ROOT-中为空或为空，row=keyvalues={.META.,,1/info:server/1354594525394/Put/vlen=15 , .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在-ROOT-中为空或为空，row=keyvalues={.META.,,1/info: server/1354594525394/Put/vlen=15, .META.,,1/info:serverstartcode/1354594525394/Put/vlen=8} java.io.IOException: HRegionInfo 在 -ROOT- 中为 null 或为空，row=keyvalues={ .META.,,1/info:server/1354594525394/Put/vlen=15,.META.,,1/info:

```
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1231)
at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:187)
at org.apache.hadoop.hbase.client.MetaScanner.access$000(MetaScanner.java:45)
at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:123)
at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:120)
at org.apache.hadoop.hbase.client.HConnectionManager.execute(HConnectionManager.java:318)
at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:120)
at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:96)
at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:74)
at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:58)
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.listTables(HConnectionManager.java:649)
at org.apache.hadoop.hbase.client.HBaseAdmin.listTables(HBaseAdmin.java:217)
at org.apache.hadoop.hbase.generated.master.master_jsp._jspService(master_jsp.java:161)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:835)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

如何解决它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:55:43.503

```
1)Verify your DNS settings or what you have given in the etc/hosts
  Hbase requires both forward and reverse resolving of hostname and IP. So add all the slave   
  and master ip in etc/hosts.

2) Check your regioserver file which is inside hbase/conf/regionserver
   remove localhost from every plcae, give somename  if so, because it will not be conflicted. 
```

# php - 使用 nodejs 仅控制现有页面中的元素

> ID：13697956
> 
> 赞同：0
> 
> 时间：2012-12-04T07:25:04.293
> 
> 标签：php, node.js, long-polling

我正在用 PHP 构建一个 Web 应用程序，我想向它添加一些实时功能。我真正需要的是用nodejs控制现有页面的某些部分（通知“元素”）。那可能吗？我不想重写 node.js 上的所有页面。

我正在尝试找出 node.js 是否是满足我需求的最佳方法（我从未使用过它），或者使用 ajax 长轮询是否更好。

我读到了关于一起使用 PHP 和 nodejs，以及在另一个基础上构建的内容，但我没有找到关于我之前描述的情况的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:21:58.507

Node.js 是一个服务器端应用程序平台，因此您不能直接在浏览器中使用它。

如果您想为您的站点添加实时功能，您首先必须考虑传输架构。要么使用 ajax 进行轮询，要么使用 websockets（例如使用[socket.io](http://socket.io/)）。在这两种情况下，您都需要一个服务器端应用程序来处理这个问题。

这可能是 PHP 或 Node 或任何其他服务器端的东西。

# android - 如何在android的gridview中禁用项目

> ID：13697957
> 
> 赞同：2
> 
> 时间：2012-12-04T07:25:05.547
> 
> 标签：android, android-gridview

我的gridview中有imageview。我想禁用在android的gridview中单击的当前项目/图像。我无法做到这一点。如何做到这一点？这是一个代码-

```
 @Override
        public void onItemClick(AdapterView<?> arg0, View v, int no,long lg) {
            // TODO Auto-generated method stub

            final AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);
            id=no;

            final EditText input = new EditText(MainActivity.this);
            alert.setView(input);

            alert.setPositiveButton("Check", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

            String value = input.getText().toString();

              AlertDialog.Builder alert1 = new AlertDialog.Builder(MainActivity.this);

              if(value.equalsIgnoreCase(country[id])){

                              // here i want to disable item
            alert1.setPositiveButton("Correct", new DialogInterface.OnClickListener() { 
              public void onClick(DialogInterface dialog, int whichButton) {

                      }
                    });

              }
              else
              {

              }
            }
            });

            alert.show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T08:58:45.067

您需要一个自定义适配器。

覆盖方法

```
ListAdapter.isEnabled(int position) 
```

并覆盖 ListAdapter.areAllitemsEnabled() 以返回 false。

在 GridView 的 UI 中完全禁用单击以及选择图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:28:09.503

尝试这个，

```
 @Override
        public void onItemClick(AdapterView<?> arg0, View v, int no,long lg) {
            // TODO Auto-generated method stub

            // check for item clicked  say you have to disable image at position 4

      if (no==4){
// do nothing
}
else{
 final AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);
            id=no;

            final EditText input = new EditText(MainActivity.this);
            alert.setView(input);

            alert.setPositiveButton("Check", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

            String value = input.getText().toString();

              AlertDialog.Builder alert1 = new AlertDialog.Builder(MainActivity.this);

              if(value.equalsIgnoreCase(country[id])){

                              // here i want to disable item
            alert1.setPositiveButton("Correct", new DialogInterface.OnClickListener() { 
              public void onClick(DialogInterface dialog, int whichButton) {

                      }
                    });

              }
              else
              {

              }
            }
            });

            alert.show();
        }
}

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-12T06:30:15.240

在自定义适配器中覆盖“isEnabled()”方法，如下所示：

```
public class CustomAdapter extends BaseAdapter {

    //other implemented methods

    @Override
    public boolean isEnabled(int position) {
        return false;
    }
} 
```

# iphone - 在 Unity 中从 Disk for iphone 读取图像时遇到困难

> ID：13697959
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:25:12.467
> 
> 标签：iphone, ios, unity3d

我正在开发一个统一应用程序，在其中我为图像 url 调用 webservice 并在获取这些 url 后，我逐个调用 url 以下载图像并将这些图像存储到磁盘上，然后在某些时候我从磁盘读取这些图像并显示作为纹理，但我在阅读图像时遇到问题。它向我显示纹理上的问号，当我挖掘更多以找出问题时，我发现我使用 www.size 得到的图像为零，而使用 www.text 的文本也为零。我正在关注阅读和写作图像。 **写作**

```
if(wwwMarker.isDone)
File.WriteAllBytes(Application.persistentDataPath + "/"+ data.markerName + ".jpg", wwwMarker.bytes); 
```

**阅读**

```
//fileurl is string which contain path of file 
fileUrl = (Application.persistentDataPath + "/"+ markerDataObject.markerName + ".jpg");
if(System.IO.File.Exists(fileUrl))
if(www.isDone)
video.mIconPlane.renderer.material.mainTexture = imageToLoadPath.texture; 
```

但是，当我阅读此代码并在纹理上显示渲染图像时，它会显示问号图像，但是当我从资产加载图像时，它工作得非常好。请帮助我，我做错了什么。我是团结一致的蜜蜂，所以这就是为什么会犯愚蠢的错误。这对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:24:02.327

请注意，unity`WWW`只能下载并保存为纹理 JPG 和 PNG 图像。如果您尝试下载任何其他格式的图像，您会得到一个红色的“？” 图像作为结果。

# java - 开源语言翻译 A PI - 用于 Java 应用程序

> ID：13697960
> 
> 赞同：2
> 
> 时间：2012-12-04T07:25:14.807
> 
> 标签：java, api, machine-translation

谁能推荐一个好的开源语言翻译器，可以用于从英语翻译成西班牙语/德语？

我期待一个可靠的 API 来翻译我的应用程序中的标签和消息，我可以轻松实现。请建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:35:45.283

对于英语到西班牙语的转换，可以使用 Google API。您可以获取 Google 代码的 jar 文件 [http://code.google.com/p/google-api-translate-java/](http://code.google.com/p/google-api-translate-java/)

# javascript - Java 脚本 || 或操作员条件不起作用

> ID：13697961
> 
> 赞同：0
> 
> 时间：2012-12-04T07:25:16.210
> 
> 标签：javascript

在下面的脚本中，我添加了`or`运算符来检查条件，比如如果它是“ALL TCP”或“ALL UDP”项必须被禁用，请建议我修改代码。

```
<script type="text/javascript">
    function chgJob(pThis, pRow)
    {
        if ((pThis.value != 'All TCP') || (pThis.value != 'All UDP'))
        {
            $x_disableItem('f02_' + pRow, false);
        }
        else
        {
            $x_disableItem('f02_' + pRow, true);
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T07:30:16.273

一个字符串永远不可能同时等于`'All TCP'`和等于`'All UDP'`，所以条件永远为真。

您想使用`&&`运算符而不是`||`运算符：

```
if ((pThis.value != 'All TCP') && (pThis.value != 'All UDP')) 
```

### 编辑：

正如 Cerbrus 指出的那样，您根本不需要该`if`语句，您可以通过反转它直接使用布尔表达式（`x==y || x==z`与 相同`!(x!=y && x!=z)`）：

```
<script type="text/javascript">
function chgJob(pThis, pRow) {
    $x_disableItem('f02_' + pRow, pThis.value == 'All TCP' || pThis.value == 'All UDP');
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:37:15.467

试试这个：

```
if ((pThis.value != 'All TCP') && (pThis.value != 'All UDP')) 
```

或者 ：

```
function chgJob(pThis, pRow)
{
    if ((pThis.value == 'All TCP') || (pThis.value == 'All UDP'))
    {
        $x_disableItem('f02_' + pRow, true);
    }
    else
    {
        $x_disableItem('f02_' + pRow, false);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:45:04.817

就像已经说过的那样，在您的 中`if-else`，您将需要`&&`运算符，而不是`||`, 但是：

您也可以`if`通过这样做来完全删除：

```
function chgJob(pThis, pRow) {
    $x_disableItem('f02_' + pRow, (pThis.value == 'All TCP' || pThis.value == 'All UDP'));
} 
```

如果`pThis.value`是`"ALL TCP"`或`"ALL UDP"`，该项目将被禁用。

# node.js - 猫鼬：如何 .remove() 数据并留下给定的数字

> ID：13697965
> 
> 赞同：0
> 
> 时间：2012-12-04T07:25:30.750
> 
> 标签：node.js, mongodb, mongoose

我正在使用 nodejs (v0.8.15) 和最新的猫鼬

所以，我收集了来自聊天的消息

`{ message: String, date: Date, ... }`

我需要进行查询以删除旧消息并留下最新消息，例如 30。

示例：数据库有 50 条消息，因此当用户进入聊天时，他将删除 20 条旧消息并留下 30 条新消息；100 条消息 -> 70 条删除，30 条离开；20 条消息 -> 0 条删除，20 条离开

也许唯一的方法是制造`method`或`static`发挥作用，但我不确定。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:44:11.047

你可以尝试这样的事情：

```
Collection.statics.shift_messages = function( query, callback ) {
    Collection.find( query, "_id" ).sort( "-date" ).exec( function( err, msgs ) {
        if (err) {
            return callback( err );
        }
        var toRemove = msgs.slice( 30 );
        if (toRemove.length) {
            toRemove = toRemove.map( function(msg) { return msg._id; } );
            Collection.remove({ _id : { $in : toRemove } }, callback );
        } else {
            callback( );
        }
    });
}; 
```

然后像这样使用它：

```
Collection.shift_messages( { user : "john" }, function( err ) {
    // yay, we're done shifting messages!
}); 
```

确保设置索引`date`以提高`.sort`性能。

# java - 在另一个 Web 视图控件中打开超链接

> ID：13697974
> 
> 赞同：3
> 
> 时间：2012-12-04T07:26:17.730
> 
> 标签：java, swing, webview, javafx-2, javafx

我想在使用 Java FX 的 Swing 中单击另一个 Web 视图中的超链接时在另一个 Web 视图控件中打开链接

> 实际上，我在同一个屏幕上有两个 Web 视图控件 A n B。单击 a 中的超链接时，应在 B Web 视图控件中打开新链接

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:19:50.343

**允许 webviewA 在 webviewB 中打开内容**

使用[setCreatePopupHandler](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#setCreatePopupHandler%28javafx.util.Callback%29)：

```
webviewA.getEngine().setCreatePopupHandler(new Callback<PopupFeatures, WebEngine>() {
  @Override public WebEngine call(PopupFeatures popupFeatures) {
    return webviewB.getEngine();
  }
}); 
```

或者，如果您使用的是 jdk8 并且不喜欢输入：

```
webviewA.getEngine().setCreatePopupHandler(
  popupFeatures -> webviewB.getEngine()
); 
```

**使您的 html 链接在新窗口中打开内容**

`webviewA`定义使用加载的文档中的超链接`target="_blank"`

例如：

```
webviewA.loadContent(
  "<a href='http://sundae.triumf.ca/pub2/cave/node001.html' target='_blank'>" +
    "XYZZY" +
  "</a>"
); 
```

当你点击超链接并说出魔法词时，它将打开巨大的洞穴冒险`webviewB`。

# ant - 用于检查 Jboss 的远程实例是否正在运行的 Ant 脚本

> ID：13697975
> 
> 赞同：1
> 
> 时间：2012-12-04T07:26:20.350
> 
> 标签：ant, jboss

我有一个 Ant 脚本，用于一次在两台不同的机器上部署我的应用程序。使用本地机器我没有问题，但是当涉及到远程机器时，我想检查 Jboss 是否启动。如果它启动了，那么我想将其关闭，但如果它不是，那么什么都不应该做。我试图通过保留`<sshexec>`as的属性来做到这一点`failonerror="on"`。当 Jboss 已经关闭并且关闭命令只给出一些错误时，这很有效。但我面临的真正问题是当 Jboss 运行时，当执行关闭命令时，它没有正确关闭并给出了一些错误。正是在这些情况下，我想停止我的构建脚本并让用户知道另一台机器上的 Jboss 有问题，需要查看它。

停止远程 Jboss 的目标代码是

```
<target name="stopRemoteJboss" description="Stops Remote Instance of Jboss">
        <echo message="Stopping Remote Jboss" />
        <sshexec trust="true" host="${jboss.remote.host}" username="${jboss.remote.username}" password="${jboss.remote.password}" command="${jboss.remote.home}/bin/shutdown.sh -S" port="${jboss.remote.port}"/>
    </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:20:14.460

经过简短的检查，我发现以下内容，也许您可​​以重用/或用作脚本的灵感： http: [//shrubbery.homeip.net/c/display/W/Starting+JBoss+with+ANT](http://shrubbery.homeip.net/c/display/W/Starting+JBoss+with+ANT)

您的相关部分似乎是：

```
<java jvm="@{jdkHome}/bin/java"
      classname="org.jboss.Shutdown" fork="true" failonerror="false" resultproperty="shutdown.rc">
    <arg line="-s jnp://@{bindAddr}:@{jnpPort}"/>
    <classpath>
        <pathelement path="@{jbossInstallDir}/bin/shutdown.jar"/>
        <pathelement path="@{jbossInstallDir}/client/jbossall-client.jar"/>
    </classpath>
</java>
<echo>Shutdown rc = ${shutdown.rc}</echo>
<condition property="shutdown.okay">
    <equals arg1="${shutdown.rc}" arg2="0"/>
</condition>
<fail unless="shutdown.okay" message="Unable to shut down JBoss (maybe it hasn't fully started yet?)."/>
<echo>Waiting for @{bindAddr}:@{jnpPort} to stop listening...</echo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:09:19.663

为什么不检查远程端口是否处于活动状态？

```
<project name="demo" default="check">

    <condition property="server.running" value="running" else="not running">
        <socket server="remoteserver" port="80"/>
    </condition>

    <target name="check" description="Print status message">
        <echo message="Web server status: ${server.running}"/>
    </target>

</project> 
```

如果您的 JBoss 实例配置为反向代理，您可以使用替代[http 条件](https://ant.apache.org/manual/Tasks/conditions.html)来检查 HTTP 响应代码（如果应用服务器已关闭，则为 503“服务不可用”）

# php - 内部服务器错误 - PHP - cPanel

> ID：13697978
> 
> 赞同：0
> 
> 时间：2012-12-04T07:26:30.360
> 
> 标签：php, cpanel, directory-listing

我有一个使用 cPanel 托管的 PHP 站点。昨天，我更改了某些目录列表（使用索引管理器）。我最初将所有目录的设置从“默认系统设置”更改为“无索引”，然后我开始收到以下错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to     complete your request.

Please contact the server administrator, webmaster@***.*** and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request. 
```

然后我将所有设置恢复为原始设置，但仍然出现相同的错误。

以下错误显示在错误日志中 -

```
[Tue Dec 04 01:20:54 2012] [alert] [client 119.226.234.18] /home/***/public_html/.htaccess: ErrorDocument takes two arguments, ErrorDocument Apache configuration directive 
```

我不明白如何解决这个问题！！请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:28:58.203

这是您的 htaccess 中的错误。在文本编辑器中打开 .htaccess。带有 ErrorDocument 的行应如下所示：

```
ErrorDocument 404     /404.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-12T18:40:24.113

我也面临同样的问题。通过更改我试图在文件管理器中访问 755 的文件夹权限解决了该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T08:58:47.583

尝试检查此错误日志：

```
/usr/local/apache/logs/error_log 
```

# c++ - 使用 concurrent_hash_map 时 TBB task_group 挂起

> ID：13697979
> 
> 赞同：2
> 
> 时间：2012-12-04T07:26:35.727
> 
> 标签：c++, multithreading, tbb

我试图在正在运行的任务中使用 tbb::concurrent_hash_map，但我遇到了调用地图的 erase() 导致任务无限锁定的问题。任何想法下面的代码段可能有什么问题？

```
#include <iostream>
#include <boost/date_time.hpp>
#include <tbb/concurrent_hash_map.h>
#include <tbb/task_group.h>
#include <tbb/task_scheduler_init.h>

class BusyTask
{
public:    
    void operator()() {

        typedef tbb::concurrent_hash_map<unsigned int, int> MyMap;
        MyMap m;
        MyMap::accessor a;
        m.insert(a, 1);
        m.erase(1); // The task will lock up at this point

    }
};

int main(int argc, char* argv[])
{
    std::cout << "Started" << std::endl;

    BusyTask busyTask1;

    tbb::task_group taskGroup;
    taskGroup.run(busyTask1);
    taskGroup.wait();

    std::cout << "Finished" << std::endl;
    return 0;
} 
```

我正在使用 TBB v4.0.5 和 GCC 4.7 进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T15:05:28.743

正如评论中正确指出的那样，这是锁定范围的问题。`erase(1)`需要获取已通过 insert() 操作获取的相同锁（并且锁不是递归的）。

还请注意 hash map 的 erase(by_accessor) 方法，它保证了访问器保护的元素将被删除，而不是具有相同键的另一个元素。如果并发线程将其删除（提供相同的键）并添加具有相同键的新元素，则可能会发生后者。

# laravel - Laravel - 何时使用 ->get()

> ID：13697981
> 
> 赞同：23
> 
> 时间：2012-12-04T07:26:47.270
> 
> 标签：laravel

我对何时`->get()`在 Laravel 感到困惑......

EG`DB::table('users')->find(1)`不需要 ->get() 来检索结果，也不需要`User::find(1)`

laravel 文档说“......使用 get 或 first 方法执行查询......”

我已阅读 Fluent Query Builder 和 Eloquent 文档，但不明白何时需要使用 get()...

谢谢您的帮助![在此处输入图像描述](../Images/e7f3762388c7ef8b468f90a3b14cdb99.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T08:07:51.737

由于该`find()`函数将始终使用表的主键，因此不需要 for `get()`。因为您无法缩小选择范围，这就是为什么它总是会尝试获取该记录并返回它。

但是当您使用 Fluent Query Builder 时，您可以嵌套如下条件：

```
$userQuery = DB::table('users');
$userQuery->where('email', '=', 'foo@bar.com');
$userQuery->or_where('email', '=', 'bar@foo.com'); 
```

这允许您在整个代码中添加条件，直到您真正想要获取它们，然后您将调用该`get()`函数。

```
// Done with building the query
$users = $userQuery->get(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-07-06T18:37:33.580

*   对于`find(n)`，您根据**主键**“n”检索一行。
*   对于`first()`，您检索适合 where 子句的所有行中的**第一行。**
*   对于`get()`，您检索**所有**符合 where 子句的行。（请注意，访问所有行需要循环，否则会出现一些错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-01T21:43:17.430

`find`从数据库中返回一行并将其表示为 fluent / eloquent 对象。例如`SELECT * FROM users WHERE id = 3`相当于`DB::table('users')->find(3);`

`get`返回一个对象数组。eg`SELECT * FROM users WHERE created_at > '2014-10-12'`相当于`DB::table('users')->where('created_at', '>', '2014-10-12')->get()`将返回一个包含用户的对象数组，其中 created at 字段比 4014-10-12 更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T20:33:28.947

该`get()`方法将为您提供数据库中满足您的参数的所有值，其中`first()`您只是获得第一个结果。在搜索密钥时使用`find()`和。`findOrFail()`这就是我使用它们的方式：

当我想要一个表中的所有数据时，我使用 all() 方法

```
Model::all(); 
```

当我想通过主键查找时：

```
 Model::find(1)->first(); 
```

或者

```
 Model::findOrFail(1)->first(); 
```

如果存在主键为 1 的行，这将起作用。它应该只检索一行，所以我使用`first()`而不是`get()`. 请记住，如果您删除了使用键 1 的行，或者表中没有数据，您`find(1)`将失败。

当我在 where 子句中查找特定数据时：

```
Model::where('field', '=', 'value')->get(); 
```

当我只想要 where 子句中数据的第一个值时。

```
Model::where('field', '=', 'value')->first(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-31T07:35:30.310

您可以使用 get() 方法和 latest() 方法来获取最近添加到表中的最新记录 例如

```
$user=Student::latest()->get(); 
```

按降序返回所有数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-02T06:05:35.160

基本上您需要了解的是 get() 返回一个集合（请注意，一个对象可以在集合中，但它仍然是一个集合）为什么 first() 从查询结果中返回第一个对象（即它返回一个object) #Take_away Get() 返回一个集合 first() 返回一个对象

# javascript - 我如何处理jquery中的多个ajax错误

> ID：13697985
> 
> 赞同：1
> 
> 时间：2012-12-04T07:26:56.170
> 
> 标签：javascript, jquery

我希望我的错误函数以特定方式工作，以便它应该显示与未加载的 json 文件相对应的错误。当我单击任何相应的链接“业务”、“能量”等时，我希望错误功能显示类似`business.json not loaded`、的消息。`Energy.json not loaded`

key 变量保存每个 json 文件的值。例如，如果我单击页面上的“业务”链接，它将具有 business.json

我的代码是：

```
$.ajax({
    url: "./"+key + "?"+ new Date().getTime(),
    dataType: 'json',
    success: function(courses){
        currentResults=courses;
        populateSubCat();
        $("#kss-spinner").css({'display':'none'});
    },
    error: function(key) {  
        //console.log(xhr.Status);

        if(key != "business.json"){
            console.log('business.json not loaded ');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:59:19.157

**尝试这个：**

*jQuery Ajax 错误处理函数*

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

之后调用您的 ajax 函数，您将获得错误详细信息。

# bash - 在 unix 中解压缩具有 .done 文件的 Zip 文件

> ID：13697987
> 
> 赞同：0
> 
> 时间：2012-12-04T07:27:02.563
> 
> 标签：bash, unix, unzip

**问题陈述：**我想从 /home/a/zip_input 之类的文件夹中解压缩文件，其中将有 2 个 zip 文件，例如： /home/a/zip_input a_EOD-20121129.zip b_EOD-20121129.zip

每个 zip 也将有 1 个对应的 .done 文件（基本上，一旦 zip 完全复制，就会创建一个 .done 文件），例如：a_EOD-20121129.zip.done b_EOD-20121129.zip.done

我正在尝试编写一个脚本来解压缩具有相应 .done 文件的文件，并将文件移动到 /home/b/file_input 的位置。文件被强制移动后，我想用 .done ext 创建一个文件。例如：每个 zip 都有一个 xml 文件，例如 a_EOD-20121129.xml/b_EOD-20121129.xml

因此输出文件夹将具有以下内容：

a_EOD-20121129.xml a_EOD-20121129.xml.done b_EOD-20121129.xml b_EOD-20121129.xml.done

**我到目前为止所尝试的：**

```
for file in $(find . -name "*.zip" -type f)
do
    unzip $file -d /home/b/file_input
    rm $file    
done 
```

它解压缩 a.zip/b.zip 并创建 xml 文件。

**我面临的问题 -**

1.  如何在仅选择具有相应 .done 文件的文件的脚本中设置条件？

2.  文件解压缩和移动后如何创建相应的.done文件。（必须取文件名并创建一个同名的文件附加.done）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:38:27.270

一种方式（未测试）

```
for file in $(find . -name "*.zip" -type f)
do
    [ -f "${file}.done" ] || continue
    unzip $file -d /home/b/file_input
    for file1 in $(unzip -l $file | awk '/.xml$/{print $NF}')
    do
       cp /home/b/file_input/$file1 /home/b/file_input/${file1}.done
    done
    rm $file    
done 
```

使用 -f 条件对 .done 文件进行检查。如果它是 false 意味着 .done 文件不存在，则循环将继续选择下一个文件。cp 命令将从 .zip 文件创建一个 .done 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:42:39.260

您可以尝试以下脚本（未测试）：

```
for file in $(find . -name "*.zip" -type f)
    do
      if [ -f $file".done" ];    then         #test if there is a done file for that zip
          unzip $file -d /home/b/file_input
          for filezip in `unzip -l $file | awk '/.xml$/{print $NF}'`; do  #creates the .done files for each file inside the zip
             touch /home/b/file_input/$filezip".done"
          done
          rm $file    
      fi
    done 
```

# php - 从heroku中提取实时代码

> ID：13697991
> 
> 赞同：1
> 
> 时间：2012-12-04T07:27:18.130
> 
> 标签：php, git, heroku, ftp

我如何获得从 live 到我的 repo 的变化？在 heroku 应用程序上运行的文件已更改，现在如果我推送这些文件将被覆盖。

我的 php 代码在 heroku 上运行，并将“数据库”的东西存储在本地文件中。

```
 {
        "id":1,
        "date":"12/1/2012",
        "topImg":"/img/dates/1.jpg"
        ..... 
```

所以这些东西存储在一个 json 对象中，然后就保存了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:11:34.260

不要这样做！

本地文件是你的敌人，因为 Heroku 是一个云应用程序主机，它在多个匿名负载平衡节点上运行应用程序。

也许您现在出于开发目的正在运行一个 dyno，但如果您想让您的网站上线，您至少需要两个 dyno（因为 Heroku 免费层服务与其非免费层服务在质量上有所不同，特别是如果免费的测功机没有被使用，他们会降低它的转速，但他们永远不会对非免费的测功机这样做）。当您有多个测功机时，将本地文件用于缓存以外的任何内容将完全无法管理。

即使您以某种方式永远使用一个测功机，Heroku 测功机也不能保证维护其本地存储 - 例如，如果您的测功机所使用的机器上出现硬件故障，Heroku 会毫不犹豫地关闭您的应用程序，删除所有本地存储，并在仅加载您的应用程序代码的情况下再次启动它，因为它不希望您的应用程序将本地存储用于任何事情。

没有一种受支持的方法可以从测功机中获取文件，因为再一次，将本地文件存储在测功机上从来都不是一个好主意。但是，如果您真的非常需要这样做，您可以使用`heroku run`并运行一次性命令，例如，打开一个 shell 并将文件上传到某处。再说一遍：不要为任何严重的事情这样做，因为一旦你有多个测功机，几乎不可能管理它们上的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:30:23.470

完全同意@Andrew。如果您想在这些文档上添加搜索功能，则更喜欢将 mongoDB 数据库作为服务与 heroku 一起使用：[https ://addons.heroku.com/catalog/mongolab 或 elasticsearch：](https://addons.heroku.com/catalog/mongolab) [https ://addons.heroku.com/目录/搜索框](https://addons.heroku.com/catalog/searchbox)。有很好的设计来存储 json 文档，并且通过这些服务，您可以确保无论您的 dynos 是什么，您的数据都将是持久的。

现在，要取回您的 heroku 本地文件，我会这样做：

1.  运行 heroku bash`heroku run bash`
2.  做一个`scp -pYourPort yourFile(s) userName@yourDestination:/pathToSaveLocaion`
3.  从您的 heroku 实例注销

我希望这能帮到您。

# replication - 分布式文件系统复制

> ID：13697992
> 
> 赞同：1
> 
> 时间：2012-12-04T07:27:20.420
> 
> 标签：replication, windows-server-2008-r2, microsoft-distributed-file-system

我们拥有大量数据源，目前正在通过我们自己的服务在多台服务器上进行复制。数据大小约为 10TB，包含数百万个文件夹/文件。数据大小每天增加 10-20GB。操作系统是 Windows Server 2008 R2。

我们正在寻找更自动化和更强大的文件复制系统。Microsoft 的 DFS 复制是一种选择，但有人指出它可能不适用于如此大的数据。有没有人有这方面的经验并且可以确认这个限制？如果是这种情况，还有其他免费系统吗？

谢谢

# jquery - 将 Prototype.js 与 SugarCRM 一起使用会导致菜单溶解

> ID：13697993
> 
> 赞同：0
> 
> 时间：2012-12-04T07:27:21.780
> 
> 标签：jquery, prototypejs, sugarcrm

我在我的 tpl 文件中包含了prototype.js，它导致错误如下

`TypeError: $("#dcmenu") is null`

当我注释掉prototype.js 文件时，菜单运行良好。因为我需要这个文件来声明一些类，而 SugarCRM 默认包含一些 javascript 库和 Jquery，这两者如何并行工作而不会发生冲突。Jquery`noConflict()`不会有用，因为其他页面不包含原型文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:36:04.147

我不认为prototype.js 有像jQuery 那样的noConflict 选项，根据其他这样的讨论......

[jQuery和prototype.js冲突，jQuery怎么保持为$？](https://stackoverflow.com/questions/10034991/jquery-and-prototype-js-conflict-how-to-keep-jquery-as)

为什么需要使用prototype.js？

# iphone - 如何在 iPhone 中使用分段控制器设置时间

> ID：13697995
> 
> 赞同：0
> 
> 时间：2012-12-04T07:27:29.973
> 
> 标签：iphone

我是 iPhone 编程的新手。谁能告诉我如何使用分段控制器在这里设置时间？在下面的代码中，我给出了 0.5 时间，但现在我想使用段控制器设置时间。段控制器中的示例我采用了这样的 0.1、0.2、0.5、0.10、0.20、0.30，如果我通过段控制器选择任何一个数字，如 0.10，它会设置该数字代替 0.5。我怎样才能做到这一点？

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.5
                 target: self
                 selector: @selector(methodName:)
                 userInfo: nil
                 repeats: YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:31:25.107

一旦你选择了新的值，[`invalidate`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)旧的计时器并开始一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:34:45.363

假设对于段控制器中的示例，您采用这样的 0.1,0.2,0.5,0.10,0.20,0.30 值，然后见下文..

```
-(IBAction) segmentedControlIndexChanged{

  switch (self.segmentedControl.selectedSegmentIndex) {
    case 0:
      NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.1
             target: self
             selector: @selector(methodName:)
             userInfo: nil
             repeats: YES];
      break;
    case 1:
      NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.2
             target: self
             selector: @selector(methodName:)
             userInfo: nil
             repeats: YES];
      break;
     case 2:
      NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.5
             target: self
             selector: @selector(methodName:)
             userInfo: nil
             repeats: YES];
      break;
     case 3:
      NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.10
             target: self
             selector: @selector(methodName:)
             userInfo: nil
             repeats: YES];
      break;
     case 4:
      NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.20
             target: self
             selector: @selector(methodName:)
             userInfo: nil
             repeats: YES];
      break;
    default:
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.30
             target: self
             selector: @selector(methodName:)
             userInfo: nil
             repeats: YES];
       break;

   }
} 
```