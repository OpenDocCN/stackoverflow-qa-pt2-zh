# StackOverflow 问答 16078000-16078999

# objective-c - 我们可以在单击按钮时调用山狮的听写功能吗

> ID：16078000
> 
> 赞同：1
> 
> 时间：2013-04-18T08:26:42.043
> 
> 标签：objective-c, cocoa, wxwidgets

在文本控件中按 fn 键两次时默认调用 Mountain Lion 听写功能。

我想知道是否可以从其他控件和事件中调用相同的功能，例如在按钮单击事件之后调用它？

我希望我的应用程序使用 Mountain lion 提供的默认听写功能。我的跨平台应用程序（wxWidgets）有一个从 wxControl 派生的编辑器，它没有调用此听写功能的默认行为；如果我改用默认文本控件，该功能可以正常工作。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T11:40:33.560

你可以尝试这样的事情：

```
NSAppleScript *scriptForCMDKey = [[NSAppleScript alloc] initWithSource:@"tell application \"System Events\"\nset theProcess to first process whose frontmost is true\ntell theProcess\nrepeat 2 times\nkey down {command}\nkey up {command}\nend repeat\nend tell\nend tell"];
[scriptForCMDKey executeAndReturnError:nil];

NSAppleScript *scriptForFNKey = [[NSAppleScript alloc] initWithSource:@"tell application \"System Events\"\nset theProcess to first process whose frontmost is true\ntell theProcess\nrepeat 2 times\nkey code 63\nkey code 63\nend repeat\nend tell\nend tell"];
[scriptForFNKey executeAndReturnError:nil]; 
```

# android - Androip phonegap GPS accuracy

> ID：16078004
> 
> 赞同：1
> 
> 时间：2013-04-18T08:26:44.313
> 
> 标签：android, jquery, cordova, geolocation, phonegap-build

In the following code i am trying to get the GPS location from the phonegap example.Iam trying this on the actual device and not on the emulator i get a time out every time.I never got the on success alert.What am i doing wrong.i have enable GPS and internet

JS

```
document.addEventListener("deviceready", onDeviceReady, false);

var watchID = null;

// Cordova is ready
//
function onDeviceReady() {
// Throw an error if no update is received every 30 seconds
var options = { timeout: 30000 };
watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
}

// onSuccess Geolocation
//
function onSuccess(position) {
var element = document.getElementById('geolocation');
element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                    'Longitude: ' + position.coords.longitude     + '<br />' +
                    '<hr />'      + element.innerHTML;
}

// onError Callback receives a PositionError object
//
function onError(error) {
alert('code: '    + error.code    + '\n' +
      'message: ' + error.message + '\n');
} 
```

html

```
 <html>
 <head>
 <title>Cordova</title>
 <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
 <script type="text/javascript" src="js/jquery.mobile-1.2.0/jquery-1.8.1.min.js"></script>
 <script type="text/javascript" src="js/jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.js"> </script>
 <link rel="stylesheet" href="js/jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />
 <script type="text/javascript" src="js/index.js"></script>
 </head>
 <body >
 <h1>Hello World</h1>
 <p id="geolocation">Finding geolocation...</p>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:07:17.530

试试这个选项：

```
var options = { timeout: 30000, enableHighAccuracy: true }; 
```

# c++ - 如何从文件中删除某些内容

> ID：16078007
> 
> 赞同：-6
> 
> 时间：2013-04-18T08:26:49.963
> 
> 标签：c++

我需要从文本文件中删除一些起始内容。

有没有办法做到这一点。

我试过了，但我找不到任何解决方案

请帮我

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:31:24.397

您可以使用外部系统工具来做到这一点。在 c++ 中，可以使用该函数启动此类实用程序`system()`

# zend-framework2 - How do I use shared view script paths for partials in Zend Framework 2?

> ID：16078008
> 
> 赞同：1
> 
> 时间：2013-04-18T08:26:54.560
> 
> 标签：zend-framework2, partials, view-helpers

I'm using Zend Framework 2 (v2.1.4) and I have a partials template that I want to use in several Modules. According to [the documentation](http://framework.zend.com/manual/2.1/en/modules/zend.view.helpers.html#partial-helper) I can access partials in other Modules, but

> That said, it’s likely a better practice to put re-usable partials in shared view script paths.

This sounds like a good idea, but I can't find any documentation on this "share view script path". Where do I find it, and when I've set it, how do I tell the `partial()` helper to use them?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:33:59.220

在你的 module.config.php

```
'view_manager' => array(
        'template_path_stack' => array(
            'mymodule' => __DIR__ . '/../view',
        ),
        'template_map' => array(
            'snippets/mypartial' => __DIR__ . '/../view/snippets/mypartial.phtml',
        ),
    ), 
```

并像那样使用

```
<?php echo $this->partial("snippets/mypartial"); ?> 
```

# python - 根据文本语料库中的出现列出词汇表中的单词，使用 Scikit-Learn CountVectorizer

> ID：16078015
> 
> 赞同：14
> 
> 时间：2013-04-18T08:27:06.523
> 
> 标签：python, machine-learning, scikit-learn, text-extraction, countvectorizer

我已经`CountVectorizer`在`scikit-learn`. 我想在文本语料库中查看所有术语及其对应的频率，以便选择停用词。例如

```
'and' 123 times, 'to' 100 times, 'for' 90 times, ... and so on 
```

是否有任何内置功能？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-18T09:01:36.987

如果`cv`是你的`CountVectorizer`并且`X`是向量化语料库，那么

```
zip(cv.get_feature_names(),
    np.asarray(X.sum(axis=0)).ravel()) 
```

返回提取`(term, frequency)`的语料库中每个不同术语的对列表。`CountVectorizer`

（需要小`asarray`+`ravel`舞蹈来解决 . 中的一些怪癖`scipy.sparse`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-28T18:45:16.253

没有内置的。[根据Ando Saabas 的回答](https://stackoverflow.com/questions/16288497/find-the-most-common-term-in-scikit-learn-classifier)，我找到了一种更快的方法：

```
from sklearn.feature_extraction.text import CountVectorizer 
texts = ["Hello world", "Python makes a better world"]
vec = CountVectorizer().fit(texts)
bag_of_words = vec.transform(texts)
sum_words = bag_of_words.sum(axis=0)
words_freq = [(word, sum_words[0, idx]) for word, idx in vec.vocabulary_.items()]
sorted(words_freq, key = lambda x: x[1], reverse=True) 
```

**输出**

```
[('world', 2), ('python', 1), ('hello', 1), ('better', 1), ('makes', 1)] 
```

# objective-c - Objective-C costum drawing with draw: (CGContextRef *)context

> ID：16078017
> 
> 赞同：1
> 
> 时间：2013-04-18T08:27:15.017
> 
> 标签：objective-c, cocoa-touch

I have a home work which our professor told us to make circle, square, and triangle confirm to a protocol called

`Shape.h`:

```
#import <Foundation/Foundation.h>

@protocol Shape <NSObject>

@required
- (void)draw:(CGContextRef) context;
- (float)area;

@end 
```

and use `UIBotton` to call different class to draw..

I call the draw function from my view controller

`XYZController.m`:

```
- (IBAction)rectButton:(id)sender {
    CGRect frame = [myView bounds];

    MyRect *rectView = [[MyRect alloc] initWithFrame:frame];

    [rectView draw: UIGraphicsGetCurrentContext()];
    [myView addSubview:rectView];
} 
```

where `myView` is a `UIView` I dragged onto `.xib`

and perform draw in `MyRect` class

`MyRect.h`:

```
@interface MyRect : UIView <Shape> 
```

I changed the super class from NSObject to UIView... Not sure if I did it correctly..

`MyRect.m`:

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setNeedsDisplay];
    }

    return self;
}

- (void)draw : (CGContextRef) context
{
    CGRect bounds = [self bounds];

    CGRect originRect = CGRectMake(25.0, 25.0, 50.0, 75.0);

    CGContextAddRect(context, originRect);
    CGContextStrokePath(context);
    [[UIColor greenColor] setFill];
    CGContextFillRect(context, originRect);
} 
```

But then I got the error:

```
[...] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
[...] <Error>: CGContextAddRect: invalid context 0x0
[...] <Error>: CGContextFillRects: invalid context 0x0 
```

I guess it's from `[rectView draw: UIGraphicsGetCurrentContext()];`

Any idea of how to fix this?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:44:02.983

UIGraphicsGetCurrentContext() 将返回 nil，但在 drawRect: 中除外。UIKit 会在 drawRect: 之前创建上下文。

您也可以创建自己的上下文进行绘制。

UIKit 示例：

```
UIGraphicsBeginImageContext() 
UIGraphicsGetImageFromCurrentImageContext() to get image context
UIGraphicsEndImageContext() 
```

核心图形示例：

```
CGBitmapContextCreate() 
```

文件：

[UIKit 函数参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

[CGBitmapContext 参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGBitmapContext/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:57:43.807

您将首先覆盖`-drawRect:`MyRect 类中的方法。然后使用

```
[[UIColor greenColor] set] // or setStroke, 'cause your using stroke and not fill!
CGContextStrokeRect(UIGraphicsGetCurrentContext(), rect) 
```

您应该`-drawRect:`在 UIView 子类中使用并制作所有绘图。您**无法**从所需的位置获取上下文。仅在命名方法中。

# php - php url友好withhtaccess并获取变量

> ID：16078024
> 
> 赞同：0
> 
> 时间：2013-04-18T08:27:32.190
> 
> 标签：php, url-rewriting

有人可以帮助我使用用户友好的 URL 并获取变量。

我的文件名为 test.php，我正在使用 htaccess 删除 url 的 .php 部分。理论上我想要以下格式的以下网址结构：www.example.com/test/1234

其中 1234 是我的 id= 部分

什么是最好的方法，我该怎么做？

到目前为止，这是我的 htaccess：

```
Options -Indexes

RewriteEngine  on
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule !.*\.php$ %{REQUEST_FILENAME}.php [L, QSA]

RewriteRule ^(.*)$ test.php?/$1 [L] 
```

我正在尝试通过以下方式获取 get 变量：

```
$var = $_GET['id'];

echo $var; 
```

任何帮助将不胜感激。将来我将使用它来传递产品名称并将它们用作获取变量以增加 seo 和用户体验。如果您需要更多信息或任何问题，我很乐意回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:42:36.040

你能看看这是否有效吗？

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

 RewriteRule ^test/(.+)$ test.php?id=$1 [QSA,L] 
```

^ 以上作品

# c# - Get service path from services.msc c#

> ID：16078027
> 
> 赞同：4
> 
> 时间：2013-04-18T08:27:44.497
> 
> 标签：c#, service, servicecontroller

I'm trying to get service executable path from services.msc

I wrote the next code:

```
 var service = ServiceController.GetServices().Where(p => p.ServiceName.Equals("Service name", StringComparison.InvariantCultureIgnoreCase));
if (service.Any())
//get service data 
```

I couldn`t find where (if at all) the service executable path is located?

In services.msc I can see the path so I'm assuming it also possible to get it through code. ![Example of service info in services.msc (see that executable path exists there)](https://i.stack.imgur.com/hTRBA.png)

Any Ideas?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T08:36:00.723

您可以像这样从注册表中获取它：

```
private static string GetServiceInstallPath(string serviceName)
{
    RegistryKey regkey;
    regkey = Registry.LocalMachine.OpenSubKey(string.Format(@"SYSTEM\CurrentControlSet\services\{0}", serviceName));

    if (regkey.GetValue("ImagePath") == null)
        return "Not Found";
    else
        return regkey.GetValue("ImagePath").ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T10:18:45.787

只是@ChirClayton 代码的简化版本：

```
public string GetServiceInstallPath(string serviceName) => (string) Registry.LocalMachine.OpenSubKey($@"SYSTEM\CurrentControlSet\services\{serviceName}").GetValue("ImagePath"); 
```

它不会修剪可能的服务论点。如果不需要它们，您可以使用以下内容：

```
public string GetServiceInstallPath(string serviceName) 
{
    var imagePath = (string) Registry.LocalMachine.OpenSubKey($@"SYSTEM\CurrentControlSet\services\{serviceName}").GetValue("ImagePath");
    if (string.IsNullOrEmpty(imagePath))
        return imagePath;
    if (imagePath[0] == '"')
        return imagePath.Substring(1, imagePath.IndexOf('"', 1) - 1);
    var indexOfParameters = imagePath.IndexOf(' ');
    if (indexOfParameters >= 0)
        return imagePath.Remove(indexOfParameters);
    return imagePath;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-17T13:28:00.243

您可以使用 WMI 获取有关您的服务（本地或远程服务）的完整信息

查看 ( [Services+ on CodePlex](https://servicesplus.codeplex.com/) ) 关于如何使用 WMI的代码

# html - 引导框架的居中问题

> ID：16078030
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:09.070
> 
> 标签：html, css, twitter-bootstrap

我注意到，当我尝试将该图像居中时，它在页面上略微偏右。是什么原因造成的？似乎在图像的左侧添加了一个边距。

```
<head>
         <meta charset="utf-8">
         <title>test</title>
         <link rel="stylesheet" href="http://flip.hr/css/bootstrap.min.css">  </head>

 <body>

<div class="container">
        <img src="dovelow.jpg" alt="Dove">

</div>
       </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:38:35.233

的原因`margin-left: auto;`。`containter`

你应该这样做：

```
.container {
    width: inherit;
    text-align: center;
    background-color: pink;
}

img {
    width: 100px;
    height: 100px;
} 
```

见[http://jsfiddle.net/yuhJQ/1/](http://jsfiddle.net/yuhJQ/1/)

# c++ - Cant access remote share in explorer if software is elevated uac (c++)

> ID：16078031
> 
> 赞同：0
> 
> 时间：2013-04-18T08:28:11.897
> 
> 标签：c++, admin, uac

I have a problem to access `network share drives` mapped in explorer from my software if it runs with administrator rights. If I disable `UAC` it runs well, so I can enumerate all network drives mapped in explorer.

My question is: How can I accesss this network drives or enumerate them when `UAC` is on?

I tried to change: `LocalAccountTokenFilterPolicy` in registry, but it doesnt work.

Any solutions?

With kind regards
Xen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:17:29.390

问题不在于 UAC 本身，也不是以管理员*权限*运行。最可能的问题是您在*不同的用户帐户下*运行。“以管理员身份运行”将执行此操作。

每个用户帐户都有自己的网络共享。当您以不同的用户身份运行时，您将因此枚举不同的共享。尝试以不同的用户身份运行 Explorer.EXE；您会看到 Explorer.EXE 将找到与您相同的共享。

通过设计，这不容易解决。当每个用户帐户只能访问它真正需要的驱动器和共享时，恶意软件的传播就会更加困难。

正确的解决方案可能是不使用 UAC/管理员权限运行。如果您真的非常需要，它可能只针对一项管理任务。该任务应移至单独的进程，并且仅应提升该进程。参见例如时钟应用程序。那曾经能够显示和改变时间。但在现代 Windows 版本中，更改时间是由一个单独的提升进程完成的。

# vbscript - VBS objFile.DateLastModified 和日期格式设置

> ID：16078043
> 
> 赞同：0
> 
> 时间：2013-04-18T08:28:55.257
> 
> 标签：vbscript

我正在尝试对我的 VBS 脚本中的文件进行一些日期修改检查。但看起来比较操作取决于运行脚本的机器上设置的日期格式。我有多种机器，其中区域和日期设置可能是俄语、美国英语、英国英语，我需要针对所有机器运行我的 VBS 并能够正确比较日期。

当我尝试使用

```
If objFile.DateLastModified = cdate("19.10.2012 11:34:06") then 
do something
Else do something else
End IF 
```

它似乎可以在使用俄语格式设置的机器上进行正确比较，但在使用英语英国格式设置的机器上失败并出现以下错误

```
Type mismatch: 'cdate'
800A000D 
```

如果我使用`following DateSerial(2012,10,19)`它不会引发错误但无法正确比较日期。

无论机器日期格式设置如何，将文件修改日期与预定义值与 VBS 进行比较的最佳和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:45:04.693

长话短说：解析日期时不要使用本地化的日期格式。

ISO 8601 格式工作得很好：

```
If objFile.DateLastModified = CDate("2012-10-19 11:34:06") Then
  ' do something
Else
  ' do something else
End If 
```

如果必须，您可以显式使用该[`SetLocale()`函数](http://msdn.microsoft.com/en-us/library/5xf99h19%28v=vs.84%29.aspx)使您的脚本在不同的环境下运行：

```
SetLocale 1049  ' LCID "Russian"
MsgBox CDate("5.4.2013 15:00:00")  ' April 5, shown as 05.04.2013 15:00:00

SetLocale 1033  ' LCID "English - United States"
MsgBox CDate("5.4.2013 15:00:00")  ' Type mismatch error 
```

请参阅MSDN 上[分配的 LCID 列表](http://msdn.microsoft.com/en-us/goglobal/bb964664.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:44:23.563

1.  利用

    ```
    objFile.DateLastModified = DateSerial(2012,10,19) + TimeSerial(11,34,06) 
    ```

2.  使用 Date 文字（格式`#mm/dd/yyyy h:mm:ss AM/PM#`，与语言环境无关）：

    ```
    objFile.DateLastModified = #10/19/2012 11:34:06 AM# 
    ```

3.  使用[xkcd 告诉您](https://stackoverflow.com/questions/16078043/vbs-objfile-datelastmodified-and-date-format-settings#comment22951230_16078043)的内容。

    ```
    objFile.DateLastModified = CDate("2012-10-19 11:34:06") 
    ```

# event-handling - Error 1023 Stack overflow with as3-signals-v0.9-BETA

> ID：16078046
> 
> 赞同：0
> 
> 时间：2013-04-18T08:29:04.867
> 
> 标签：event-handling, signals, flash, robotlegs

I am using as3-signals-v0.9-BETA in a simple slide application. In my signal handler, I am dispatching the same signal again based on some conditions.

The application throws an exception after a couple of hours on the signals dispatch method. Below is a stack trace:

Error:

```
Error #1023: Stack overflow occurred.
     at com.chetansachdev.components::SlideDeck/onNextSlidePleaseEvent()[D:\cb-trunk\Solutions\Components\Slidelib\src\com\chetansachdev\components\SlideDeck.as:75]
     at org.osflash.signals::Slot/execute()[C:\Users\Robert\Documents\Flash\OSFlash\signals\as3-signals\src\org\osflash\signals\Slot.as:87]
     at org.osflash.signals::OnceSignal/dispatch()[C:\Users\Robert\Documents\Flash\OSFlash\signals\as3-signals\src\org\osflash\signals\OnceSignal.as:125]
     at com.chetansachdev.components::SlideDeck/onNextSlidePleaseEvent()[D:\cb-trunk\Solutions\Components\Slidelib\src\com\chetansachdev\components\SlideDeck.as:89]
     at org.osflash.signals::Slot/execute()[C:\Users\Robert\Documents\Flash\OSFlash\signals\as3-signals\src\org\osflash\signals\Slot.as:87]
     at org.osflash.signals::OnceSignal/dispatch()[C:\Users\Robert\Documents\Flash\OSFlash\signals\as3-signals\src\org\osflash\signals\OnceSignal.as:125]
     ...
     ... 
```

Method:

```
mysignal.add(mySignalHandler);

function mySignalHandler():void
{
    if(condition)
    {
       // do something here..
    }
    else
    {
        mysignal.dispatch();
    }
} 
```

Can some one point me, what is wrong. When I am dispatching from the signal handler, is the stack getting created? (I am not calling the method directly, I am dispatching a signal).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:48:01.853

这是一个无限循环。就像这样写：

```
function inifityAndBeyond(){
    infinityAndBeyond();
} 
```

换句话说，在信号的处理程序中调度相同的信号是没有意义的。

# php - Ignore value from assoc array when display

> ID：16078048
> 
> 赞同：0
> 
> 时间：2013-04-18T08:29:10.680
> 
> 标签：php, associative-array

```
 $result = mysql_query($sql_result);
    $newArray = array();
    $index=0;
    while($row = mysql_fetch_assoc($result)){
        $newArray[$index] = $row;   
        $index++;
    } 
```

I wanna ignore the value - from my assoc array when display. Help me please.![enter image description here](https://i.stack.imgur.com/D8Htl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:48:04.907

如果要删除包含某个值的所有列，可以使用 array_filter：

```
function removeEmpty($v){
   return $v != '-';
}
while($row = mysql_fetch_assoc($result)){
        $newArray[$index] = array_filter($row,"removeEmpty");   
        $index++;
} 
```

# c++ - Setting memory breakpoint in Visual Studio 2012

> ID：16078050
> 
> 赞同：10
> 
> 时间：2013-04-18T08:29:15.800
> 
> 标签：c++, visual-studio-2012, breakpoints, conditional-breakpoint

I need to set breakpoint that watches a specific address in memory (e.g. 0x0483d7cc) that is hit when the content changes. I am using Visual Studio 2012 and C++. How can I do that?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T08:33:22.533

只需使用菜单项：`Debug | New Breakpoint | New Data Breakpoint...`

# android - 通过 Id 获取 ImageView 后覆盖 onMeasure

> ID：16078051
> 
> 赞同：3
> 
> 时间：2013-04-18T08:29:19.237
> 
> 标签：android, overriding, android-imageview, findviewbyid

我需要通过 id 找到一个视图，然后覆盖它的`onMeasure`方法。有谁知道这是怎么做到的吗？

以下内容在 Java 中不起作用，但从概念上讲，这是我所需要的：

```
ImageView myImage = (ImageView) findViewById(R.id.some_pic);
myImage.onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
  super.onMeasure(widthMeasureSpec, heightMeasureSpec);
  int width = MeasureSpec.getSize(widthMeasureSpec);
  int height = MeasureSpec.getSize(heightMeasureSpec);
    showOther(width, height);
};

myImage.setImageBitmap(bmp); 
```

Java 提供了这个

```
ImageView myImage = new ImageView(this) {
  @Override
  protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    showOther(width, height);               }
}; 
```

或这个

```
ImageView myImage. = (ImageView) findViewById(R.id.some_pic);
myImage.setImageBitmap(bmp); 
```

我想过使用`setOnMeasureListener`但没有为 ImageView 定义这样的方法。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T12:21:05.353

我刚遇到和你一样的问题。也许您已经解决了这个问题，但这里没有明确的解决方案。只需在新类中扩展 ImageView，例如 MyImageView 并在布局定义中使用它。这样你就可以使用：

```
MyImageView myImage = (MyImageView) findViewById(R.id.some_pic); 
```

示例类和 xml 可以在第二个答案中找到： [ImageView be a square with dynamic width?](https://stackoverflow.com/questions/16506275/imageview-be-a-square-with-dynamic-width)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T12:12:17.053

我猜 some_pic ImageView 是在 XML 中声明的，然后被夸大了，可能是在你的 Activity 类中调用 setContentView 。膨胀意味着 Android 读取 XML 并将其转换为 Java 对象。一旦你调用了 setContentView，所有的对象都会被实例化，然后再去改变它们的类就太晚了，比如重写 ImageView 的 onMeasure 方法。

我可以想到两个选择：

1.  **（首选）**创建一个扩展 ImageView 并覆盖 onMeasure 的新类。当您在 XML 中声明 some_pic 时，不要使用 ImageView 标记，而是在您的新类（完全限定名称）之后命名标记：

    <com.mycompany.myproject.MyImageView
        android:id="@+id/some_pic"
        ...
    />

2.  不要在 XML 中声明 some_pic。在您的 Activity 的 onCreate 方法中，在调用 setContentView 之后，实例化一个新的 ImageView 并覆盖其 onMeasure 方法，就像您在问题的第一个 Java 选项中所做的那样。您必须手动将此 ImageView 插入到您的布局中；使用 Google 学习如何将视图插入到另一个视图中（[这里是一个示例](https://stackoverflow.com/a/4776115/720773)）。

# data-structures - 使用什么数据结构来实现 facebook like 的帖子和评论？

> ID：16078052
> 
> 赞同：-2
> 
> 时间：2013-04-18T08:29:27.620
> 
> 标签：data-structures

这是我的java面试问题之一......

有人问我，你会使用哪种数据结构来实现 Facebook 帖子、点赞和评论？

我很想听听所有成员的意见......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:45:09.663

对于数据库来说，这确实是一项更多的任务（请注意，与[此](https://stackoverflow.com/questions/7487476/facebook-like-data-structure/1711796)相比，下面的内容有多复杂（因为下面的所有内容都由具有适当索引的适当数据库处理）），但是......

注意我假设只有帖子可以被喜欢，评论是针对帖子的。

**帖子：**

Posts 可能是**post ID 到 post object 的 Map**。

如果您想查看用户发布的帖子列表，您还需要**一个用户 ID 到一组帖子 ID 的 Map**。

**喜欢：**

您想快速获取每个帖子的点赞数，并查看用户是否喜欢帖子，因此**需要将帖子 ID 映射到**喜欢它的用户的一组用户 ID。

如果您还想快速查看用户喜欢哪些内容，则需要另一种数据结构 -**用户 ID 到**喜欢的帖子 ID 集的映射。

**注释：**

评论可能是**评论 ID 到评论对象的映射**。连接的帖子 ID 将存储在评论对象中。

您想快速获取每个帖子的评论，因此**将帖子 ID 映射到一组评论 ID**。

如果您还想快速查看用户发表的评论列表，则需要另一种数据结构 -**用户 ID 到一组评论 ID 的 Map**。

# hex - 如何快速压缩一个短的十六进制字符串并在c#中解压它

> ID：16078055
> 
> 赞同：0
> 
> 时间：2013-04-18T08:29:30.337
> 
> 标签：hex, base, entropy, information-theory

我有一些像这样的 16 个字符的十六进制字符串：

```
B5A43BC5BDCEEFC6
2C7C27F05A488897
1514F4EC47C2EBF6
D91ED66BC999EB64 
```

我想缩短它们并使缩短的字符串仅包含大写字母。

DeflateStream 和 GZipStream 只是增加了长度。

任何人都可以帮我将这 16 个字符的十六进制字符串缩短到 6 个字符或更少吗？

或者，可以将 32 个字符的十六进制字符串缩短为 12 个字符或更少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-16T02:11:00.097

除非您的 16 位十六进制字符输入中有一些[冗余](http://en.wikipedia.org/wiki/Redundancy_(information_theory))，否则您所要求的在数学上**是不可能**的。[您可以通过检查输入的熵](https://en.wikipedia.org/wiki/Entropy_%28information_theory%29)来证明这一点。

*   您有 16 个十六进制字符。

16^16 = 18446744073709551616 ≈ 1.84x10^19 个可能值。

*   您希望字符串为 6 个大写*（或小写 - 数学相同）*大小写字符或更少。在英语中（我假设你想要英语）有 26 个大写字符。

26^6 = 308915776 ≈ 3.09x10^8 个可能的值。

* * *

*   为保证您可以表示16 个十六进制字符中的**每**一个，您需要**14 个**大写*（或小写）*字母。

*   13 个字符是不够的：

26^13 = 2481152873203736575 ≈ 2.48x10^18 个可能值。

*   14 个字符就足够了：

26^14 = 64509974703297150976 ≈ 6.45x10^19 个可能值。

* * *

*   您可以在**六个** *（或更少）*字符中做到这一点（假设没有冗余）的唯一方法是有一些[基础](https://en.m.wikipedia.org/wiki/Numeral_system)，其中每个字符都有**1626**个可能的值。

1626^6 = 18480905552168525376 ≈ 1.849x10^19 个可能值。

* * *

通过相同的逻辑，将32 个十六进制字符缩短为 12 个或更少的大写*（或小写）*字符是不可能的。如果没有冗余，您无法保证可以将任意 16 个（或 32 个）十六进制字符缩短为 6 个（或 12 个）大写*（或小写）*字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:33:58.000

您可以将十六进制数转换为更高的基数，例如六十进制：

[将基数为 10 的数字转换为 .NET 中任何基数的最快方法？](https://stackoverflow.com/questions/923771/quickest-way-to-convert-a-base-10-number-to-any-base-in-net)

# java - 使用 ftp4j 上传文件失败

> ID：16078060
> 
> 赞同：1
> 
> 时间：2013-04-18T08:29:53.360
> 
> 标签：java, linux, ftp, ftp4j

我使用[ftp4j](http://www.sauronsoftware.it/projects/ftp4j/)作为 FTP 客户端。

```
FTPClient client = new FTPClient();
client.connect("86.22.11.178");
client.login("usr", "pwd");
client.changeDirectory("/dir");
client.upload(file); 
```

它在 localhost 上可以正常工作，但是当包含在部署在 Web 服务器上的 JSF Web 应用程序中时，它就不起作用了。我成功地连接和登录，当代码到达上传命令时，它只是跳过那个并且什么都不做。没有抛出异常。

与 FTP 服务器完全连通，这不是问题。我还对文件设置了 chmod 777 权限，它们属于同一所有者。

这段代码在 Windows 机器上工作，是不是在 Linux 上运行的机器有不同的“规则”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:04:35.887

您的代码似乎是正确的。尝试找出它抛出的 FTP 错误。有时可能会发生超时，这是我面临的！

导入 org.apache.commons.net.ftp。*;
导入 java.io。*;

/** * 该类用于演示 Jakarta Commons Net 包的用法 */
public class TestFTP {

```
/** Creates a new instance of TestFTP */  
public TestFTP() {  
}  

/** 
 * main - Unit test program 
 * @param args Command line arguments 
 * 
 */  
public static void main(String args[]) {  
    try {  
        String ftpHost = "157.227.38.131";  
        String ftpUserName = "firebird";  
        String ftpPassword = "tcs@12345";  
        String ftpRemoteDirectory = "/etc/vlp/uploaded_files";  
        String fileToTransmit = "c:\\temp\\VLPDYN18022010174439.an";  

        //Create a Jakarta Commons Net FTP Client object  
        FTPClient ftp = new FTPClient();  

        //A datatype to store responses from the FTP server  
        int reply;  

        //  
        //Connect to the server  
        //  
        ftp.connect(ftpHost);  

        //  
        // After connection attempt, you should check the reply code to verify success.  
        //  
        reply = ftp.getReplyCode();      
        if(!FTPReply.isPositiveCompletion(reply)) {  
            try {  
                ftp.disconnect();  
            } catch (Exception e) {  
                System.err.println("Unable to disconnect from FTP server " +  
                                   "after server refused connection. "+e.toString());  
            }  
            throw new Exception ("FTP server refused connection.");  
        }                
        System.out.println("Connected to " + ftpHost + ". "+ftp.getReplyString());  

        //  
        //Try to login  
        //  
        if (!ftp.login(ftpUserName, ftpPassword)) {  
            throw new Exception ("Unable to login to FTP server " +  
                                 "using username "+ftpUserName+" " +  
                                 "and password "+ftpPassword);  
        }  

        System.out.println(ftp.getReplyString());  
        System.out.println("Remote system is " + ftp.getSystemName());  

        //  
        //Set our file transfer mode to either ASCII or Binary  
        //  
        //ftp.setFileType(FTP.ASCII_FILE_TYPE);  
        ftp.setFileType(FTP.BINARY_FILE_TYPE);  

        //  
        //Change the remote directory  
        //  
        if (ftpRemoteDirectory != null && ftpRemoteDirectory.trim().length() > 0) {  
            System.out.println("Changing to FTP remote dir: " + ftpRemoteDirectory);  
            ftp.changeWorkingDirectory(ftpRemoteDirectory);  
            reply = ftp.getReplyCode();  

            if(!FTPReply.isPositiveCompletion(reply)) {  
                throw new Exception ("Unable to change working directory " +  
                                     "to:"+ftpRemoteDirectory);  
            }  
        }  

        //  
        //Get the file that we will transfer and send it.  
        //  
        File f = new File(fileToTransmit);  
        System.out.println("Storing file as remote filename: " + f.getName());  
        boolean retValue=true;  
       try{   
        retValue = ftp.storeFile(f.getName(), new FileInputStream(f));  
       }catch(Exception e){e.printStackTrace();}  
        if (!retValue) {  
          throw new Exception ("Storing of remote file failed. ftp.storeFile() returned false.");  
        }  

        //Disconnect from the FTP server  
        //  
        try {  
            //ftp.logout();  
            ftp.disconnect();  
        } catch (Exception exc) {  
            System.err.println("Unable to disconnect from FTP server. " + exc.toString());  
        }  

    } catch (Exception e) {  
        System.err.println("Error: "+e.toString());  
    }  

    System.out.println("Process Complete.");  
    System.exit(0);  
} 
```

}

# javascript - JSON does not post data to the requested URL

> ID：16078062
> 
> 赞同：0
> 
> 时间：2013-04-18T08:30:04.013
> 
> 标签：javascript, json

Trying to post some data at URL: "

```
 $(function() {
             var frm = $(document.myform);
             var data = "?lm_po_id=154668&authentication=ThisisAuth&description=ThisIsDesc";//JSON.stringify(frm.serializeArray());

//var data = JSON.stringify(frm.serializeArray()); // Also tried this

         alert(data + "I am about to POST this:\n\n" + data);
         $.postJSON = function (url, data, callback) {
                $.ajax({
                    'url': frm.attr("action"),
                    'type': 'post',
                    'processData': false,
                    'data': JSON.stringify(data),
                    contentType: 'application/json',
                    success: function (data) { callback(JSON.parse(data)); },
                });
            };
     }); 
```

This call the right function properly but when i check it in debug mode all parameters have null values, can some one help me what wrong i am doing. Here is my HTML form

```
<form action="http://192.168.0.124:8080/Ilex-WS/service/ilexmobile/poImageUpload" name="myform" method="post" enctype="multipart/form-data">
    <input type="text" value="158664" name="lm_po_id" /><br />
    <input type="text" value="AuthCodeMD5" name="authentication" /><br />
    <input type="text" value="584" name="imagenumber" /><br />
    <input type="text" value="ImgName.png" name="name" /><br />
    <input type="text" value="This is desc" name="description" /><br />
    <input type="file" value=""  name="uploadedimage" /><br /> 
    <input type="button" value="Submit" onclick="javascript:document.myform.submit()"/><br />
</form> 
```

Thanks in advance....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:35:12.913

你的 JavaScript 唯一要做的就是警告一个字符串。

您永远不会将事件处理程序绑定到表单的提交方法，即使您这样做也不会触发，因为您使用`form.submit()`提交表单而不是提交按钮。（所以这提交表单编码数据而不是 JSON 编码数据）。

您将一个函数存储在 中`$.postJSON`，但您从不调用它，并且它有一个名为的局部变量，无论如何`data`都会屏蔽`var data = "?lm_po...`（并不是说使用该值是有意义的，因为它是一个字符串并且您运行`JSON.stringify`过`data`）。

# copy - Postgresql pgAdmin COPY 问题

> ID：16078063
> 
> 赞同：2
> 
> 时间：2013-04-18T08:30:05.847
> 
> 标签：copy, pgadmin, psql

我有一个 sql 脚本，它创建一个表，然后用 COPY FROM STDIN 命令填充它。

我在这里面临的问题是 sql 从命令行运行良好，但 pgAdmin 给了我一个语法错误。

这是我的代码。

```
 COPY ui_geoip_city (id, country_code, region_code, city_name) FROM stdin;

    1   AD  07  Andorra La Vella

    2   AD  05  Anyѓs

    3   AD  04  Arinsal

    4   AD  02  Canillo

    5   AD  03  Encamp
..... 
```

错误

```
ERROR:  syntax error at or near "1"
LINE 156: 1 AD 07 Andorra La Vella
          ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-19T16:18:07.560

请确保该列的数据类型与您要插入该列的值的数据类型相对应，否则会出现此错误。

# javascript - Table's columns width changes after adding another page to tr using ajax

> ID：16078064
> 
> 赞同：0
> 
> 时间：2013-04-18T08:30:06.747
> 
> 标签：javascript, html, ajax, html-table, width

I have a problem which is hard to explain I hope you will understand and help me, I have a table which produce rows dynamically, when a row is pressed it shows a page containing some information, the problem is that when I press on the row and the info page is shown the columns width is changed and the entire table shifts (all the widths). I have noticed that it happens after the info page is loaded but can't figure out why...

CODE: this is where I post the table:

```
echo "<table border=\"0\" width=\"100%\" cellspacing=\"0\" align=\"center\" class=\"result_table\" id=\"result_table\">

<tr align=\"right\" bgcolor=\"red\">
<th bgcolor=\"#cccccc\" align=\"right\" >עיר</th>
<th bgcolor=\"#cccccc\" >רחוב</th>
<th bgcolor=\"#cccccc\" >מספר בית</th>
<th bgcolor=\"#cccccc\" >מחיר</th>
</tr>"; 
foreach($types as $data){               
echo $data['id'];
echo "<tr onClick=\"waiting_for_post(".$data['id'].");\" 
class=\"search_row\">";
echo "<td align=\"right\" width=\"25%\">";
echo $data['city'];
    echo "</td>";
echo "<td align=\"right\">";
echo $data['street'];
echo "</td>";
echo "<td align=\"right\">";
echo $data['house'];
    echo "</td>";
echo "<td align=\"right\">";
echo $data['price'];
echo "</td></tr>";
echo "<tr class=\"info_row\" style=\"width:100%\"><td colspan=\"4\"><div id=\"div_num_".$data['id']."\" style=\"height:0px\" ></div></td></tr>";

function waiting_for_post(apart_id){
var div = document.getElementById("div_num_"+apart_id)
var xmlhttp = createXmlHttpRequestObject();

xmlhttp.onreadystatechange=function()
{
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
   {

     var responseText = xmlhttp.responseText;

     div.innerHTML = responseText;
        div.style.visibility = 'visible';
        div.style.height= "225px";
        div.style.width="100%";
   }
}
xmlhttp.open("GET","publish_data.php?id="+apart_id,true);
xmlhttp.send(); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:44:57.473

列的宽度会随着内容的变化而变化，因为你设置了“width:100%”，使用固定宽度可能会解决问题，并尝试估计最大宽度。

# css - jQuery UI - Multiple serialized .selectable lists

> ID：16078066
> 
> 赞同：0
> 
> 时间：2013-04-18T08:30:13.793
> 
> 标签：css, jquery-ui, twitter-bootstrap

I'm making a error report handling system, and I'm trying to use [jQuery UI .selectable](http://jqueryui.com/selectable/#serialize) to get all the reports a user has clicked, but the reports are grouped in lists based on the system they come from. Multiple lists can be selected from at the same time.

As in the linked demo, I'm currently just printing out IDs, which works fine for a single list. However, when I'm selecting items from two or more different lists, the IDs that are already listed disappear. They seem to still be selected in .selectable's eyes, but they don't get printed anymore. Every time I click on a different list, the previous IDs disappear and the new ones appear.

Does anyone have any idea what I can do to get everything printed?

Also, is there any way to apply the .ui-selected class to elements, given a string/array of values that are supposed to be selected? Basically, the opposite of this script's functionality. (If that made any sense..?)

JSFiddle here: [http://jsfiddle.net/Kantana/Z3SBU/1/](http://jsfiddle.net/Kantana/Z3SBU/1/)

**Javascript**

```
$(function() {
    $(".selectable").bind("mousedown", function(event) {
        event.metaKey = true;
    }).selectable({
        stop: function() {
            var result = $("#selectedItems").empty();
            $(".ui-selected", this).each(function() {
                var itemId = $(this).attr('id');
                var item = itemId.replace("report_", "");
                result.append(" #" + item);
            });
        }
    });
}) 
```

**CSS**

This example mainly uses the Twitter Bootstrap CSS.

**HTML**

```
<span id="selectedItems">None selected</span>

<div class="accordion" id="accordion2">
    <div class='accordion-group'>
        <div class='accordion-heading'><a class='accordion-toggle collapsed' data-toggle='collapse' data-parent='#accordion2' href='#1'>System 1 - All responding</a>
        </div>
        <div id='1' class='accordion-body collapse'>
            <div class='accordion-inner'>
                <ol class='selectable'>
                    <li class='report file ui-widget-content' id='report_60'>
                        Error #60 - Responding
                        <p class='tinytext'>Check type: ping</p>
                        <p class='tinytext'>Error message: unconfirmed_down</p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <div class='accordion-group'>
        <div class='accordion-heading'><a class='accordion-toggle collapsed' data-toggle='collapse' data-parent='#accordion2' href='#2'>System 2 - All responding</a>
        </div>
        <div id='2' class='accordion-body collapse'>
            <div class='accordion-inner'>
                <ol class='selectable'>
                    <li class='report file ui-widget-content' id='report_62'>
                        Error #62 - Responding
                        <p class='tinytext'>Check type: ping</p>
                        <p class='tinytext'>Error message: unconfirmed_down</p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <div class='accordion-group'>
        <div class='accordion-heading'><a class='accordion-toggle collapsed' data-toggle='collapse' data-parent='#accordion2' href='#3'>System 3 - All responding</a>
        </div>
        <div id='3' class='accordion-body collapse'>
            <div class='accordion-inner'>
                <ol class='selectable'>
                    <li class='report file ui-widget-content' id='report_56'>
                        Error #56 - Responding
                        <p class='tinytext'>Check type: Free Memory</p>
                        <p class='tinytext'>Error message: CHECK_NRPE: Socket timeout after 20 seconds.</p>
                    <li class='report file ui-widget-content' id='report_57'>
                        Error #57 - Responding
                        <p class='tinytext'>Check type: SSH</p>
                        <p class='tinytext'>Error message: CRITICAL - Socket timeout after 10 seconds</p>
                    <li class='report file ui-widget-content' id='report_55'>
                        Error #55 - Responding
                        <p class='tinytext'>Check type: ping</p>
                        <p class='tinytext'>Error message: PING CRITICAL - Packet loss = 100%</p>
                    <li class='report file ui-widget-content' id='report_54'>
                        Error #54 - Responding
                        <p class='tinytext'>Check type: Free Space All Disks</p>
                        <p class='tinytext'>Error message: CHECK_NRPE: Socket timeout after 20 seconds.</p>
                    <li class='report file ui-widget-content' id='report_58'>
                        Error #58 - Responding
                        <p class='tinytext'>Check type: Load Average</p>
                        <p class='tinytext'>Error message: CHECK_NRPE: Socket timeout after 20 seconds.</p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <div class='accordion-group'>
        <div class='accordion-heading'><a class='accordion-toggle collapsed' data-toggle='collapse' data-parent='#accordion2' href='#4'>System 4 - 1 error</a>
        </div>
        <div id='4' class='accordion-body collapse'>
            <div class='accordion-inner'>
                <ol class='selectable'>
                    <li class='report file ui-widget-content' id='report_59'>
                        Error #59 - Warning
                        <p class='tinytext'>Check type: ping</p>
                        <p class='tinytext'>Error message: unknown</p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <div class='accordion-group'>
        <div class='accordion-heading'><a class='accordion-toggle collapsed' data-toggle='collapse' data-parent='#accordion2' href='#5'>System 5 - 1 error</a>
        </div>
        <div id='5' class='accordion-body collapse'>
            <div class='accordion-inner'>
                <ol class='selectable'>
                    <li class='report file ui-widget-content' id='report_61'>
                        Error #61 - Warning
                        <p class='tinytext'>Check type: Free Space All Disks</p>
                        <p class='tinytext'>Error message: DISK WARNING - free space: / 11230 MB (15% inode=78%): /dev 989 MB (99% inode=99%): /run 398 MB (99% inode=99%): /run/lock 5 MB (100% inode=99%): /run/shm 997 MB (100% inode=99%):</p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:40:33.113

更改停止功能的范围选择`ui-selected`整个手风琴内的元素。指定`$(".ui-selected", this)`只查看被选择的单个项目，因为它包含对可选择项的引用。

```
stop: function() {
    var result = $("#selectedItems").empty();

    //changed from this to #accordion
    $(".ui-selected", $("#accordion2")).each(function() {  
        var itemId = $(this).attr('id');
        var item = itemId.replace("report_", "");
        result.append(" #" + item);
    });
} 
```

**工作示例** [http://jsfiddle.net/Z3SBU/2/](http://jsfiddle.net/Z3SBU/2/)

# c# - How do I load multiple XML files and read them?

> ID：16078067
> 
> 赞同：1
> 
> 时间：2013-04-18T08:30:19.937
> 
> 标签：c#, .net, xml, directory

I've a problem. In my code I'm looking for all xml files in one directory. Finally it works but I don't know how to read them. A single one is loaded with the string xmlFile. I think I need to replace or edit that in this way that my code now that xmlFile is not only one file, but all files who are found in the directory.

What should I be doing?

```
namespace WindowsFormsApplication11
{
    public partial class Form1 : Form
    {
        private const string xmlFile = "C:\Games\games.xml"; // single xml file works

        public Form1()
        {
            this.InitializeComponent();
            this.InitializeListView();
            this.LoadDataFromXml();
        listView.Items.AddRange(Directory.GetFiles("C:\Games\", "*.xml")
                                 .Select(f => new ListViewItem(f))
                                 .ToArray()); 
        }

        private void LoadDataFromXml()
        {
            if (File.Exists(xmlFile))
            {
                XDocument document = XDocument.Load(xmlFile);
                if (document.Root != null)
                {
                    foreach (XElement gameElement in document.Root.Elements("game"))
                    {
                        string gamename = gameElement.Element("gamename").Value;
                        string launchpath = gameElement.Element("launchpath").Value;
                        string uninstallpath = gameElement.Element("uninstallpath").Value;
                        string publisher = gameElement.Element("publisher").Value;
                        // check if gameElement.Element(ELEMENTNAME) is not null  
                        Game game = new Game(gamename, launchpath, uninstallpath, publisher);
                        AddGameToListView(game);
                    }
                }
            }
        }

        private void AddGameToListView(Game game)
        {
            ListViewItem item = CreateGameListViewItem(game);
            this.listView.Items.Add(item);
        }

        private ListViewItem CreateGameListViewItem(Game game)
        {
            ListViewItem item = new ListViewItem(game.Gamename);
            item.SubItems.Add(game.Launchpath);
            item.SubItems.Add(game.Uninstallpath);
            item.SubItems.Add(game.Publisher);
            item.Tag = game;
            return item;
        }

        private void InitializeListView()
        {
            this.listView.View = View.Details;
            this.listView.GridLines = true;
            this.listView.MultiSelect = false;
            this.listView.FullRowSelect = true;
            this.listView.Columns.AddRange(new[]
                {
                    new ColumnHeader{Text = "Gamename", Width = 200},
                    new ColumnHeader{Text = "Launchpath"},
                    new ColumnHeader{Text = "Uninstallpath"},
                    new ColumnHeader{Text = "Publisher"} 
                });
            this.listView.MouseDoubleClick += ListViewOnMouseDoubleClick;
        }

        private void ListViewOnMouseDoubleClick(object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left && this.listView.SelectedItems.Count > 0)
            {
                Game game = (Game)((this.listView.SelectedItems[0].Tag);
                try
                {
                    Process.Start(game.Launchpath);
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Can not start game.\nDetails:\n" + ex.Message, "Error", MessageBoxButtons.OK,
                                    MessageBoxIcon.Error);
                }
            }
        }
    }

    internal class Game
    {
        public Game()
        {

        }

        public Game(string gamename, string launchpath, string uninstallpath, string publisher)
        {
            this.Gamename = gamename;
            this.Launchpath = launchpath;
            this.Uninstallpath = uninstallpath;
            this.Publisher = publisher;
        }
        public string Gamename { get; set; }
        public string Launchpath { get; set; }
        public string Uninstallpath { get; set; }
        public string Publisher { get; set; }
    }
} 
```

UPDATE:

This is my current code. how can i send f to LoadDataFromXml ?

```
 public Form1()
    {
        this.InitializeComponent();
        this.InitializeListView();
        this.Height = Screen.PrimaryScreen.WorkingArea.Height;
        var files = Directory.GetFiles(@"C:\Games\", "*.xml").Select(f => new ListViewItem(f)).ToArray(); listView.Items.AddRange(files);
        foreach (var f in files)
        {
            this.LoadDataFromXml(f);
        }

    }

    private void LoadDataFromXml(//What Do I need to enter here?)
    {

               foreach (XElement gameElement in f.Root.Elements("game"))
                {
                    string gamename = gameElement.Element("gamename").Value;
                    string launchpath = gameElement.Element("launchpath").Value;
                    string portablesave = gameElement.Element("portablesave").Value;
                    string publisher = gameElement.Element("publisher").Value;
                    string gameid = gameElement.Element("gameID").Value;
                    string update = gameElement.Element("update").Value;
                    // check if gameElement.Element(ELEMENTNAME) is not null  
                    Game game = new Game(gamename, launchpath, portablesave, publisher, gameid, update);
                    AddGameToListView(game);
                }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:32:42.903

`LoadDataFromXml`简单地使用目录函数来获取所有 XML 文件，并通过调用每个文件来遍历它们。注意：您需要稍微重构代码。

您需要修改您`LoadDataFromXml`的`file`作为参数。并将您的 Form1 构造函数更改为这样的

```
public Form1()
{
    this.InitializeComponent();
    this.InitializeListView();
    var files = Directory.GetFiles("C:\Games\", "*.xml")
                         .Select(f => new ListViewItem(f))
                         .ToArray();
    listView.Items.AddRange(files); 
    foreach(var f in files)
    {
        this.LoadDataFromXml(f);
    }
} 
```

# visual-studio - Visual Studio 预构建事件；检查每个事件的退出代码

> ID：16078069
> 
> 赞同：5
> 
> 时间：2013-04-18T08:30:31.867
> 
> 标签：visual-studio, events, exit-code, pre-build-event

我有一个包含多个项目的解决方案。如果两个事件在预构建事件中都以错误代码 0 退出，则只需构建一个项目。

所以我想我可以做到以下几点：

> "C:\Path\To\Binary1.exe" & "C:\path\to\binary2.exe"

在我的测试场景中出现问题，因此 Binary1.exe 以非零值退出。但无论如何，Visual Studio 都会继续构建该项目。当我在 cmd 中运行预构建事件命令行并 echo %errorlevel% 时，我看到退出代码非零。

当我只放

> "C:\Path\To\Binary1.exe"

在预构建事件中，构建停止并且在`Error List`Visual Studio 的窗口中显示错误。

我确信 Binary1.exe 以非零值退出，因为它还在退出之前显示了一个消息框。

我可以想到一种解决方案。当 Binary2.exe 以非零退出代码退出时，Binary1.exe 调用 Binary2.exe 并以非零退出代码退出。但这并不是一个真正灵活的解决方案。

**总结一下：** 当其中一个命令返回非零值时，如何运行多个预构建事件并停止构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-14T07:02:20.013

我认为你可以这样做：

```
run command 1
if ERRORLEVEL 1 (
    exit /b 1
    )
run command 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T09:39:32.153

If the two projects are in the same solution, you can set the dependency in Visual studio. Right-click on the solution in the solution explorer and choose "Project Dependencies".

Set the 'last' project to be depending on the first two. In this case Visual studio will build in the right order and will stop building if one of the dependencies fail to build. (Visual Studio 2013)

# php - 如何使用 PHP 函数为 ORACLE 求和值

> ID：16078079
> 
> 赞同：0
> 
> 时间：2013-04-18T08:30:55.583
> 
> 标签：php, oracle, sum

请帮助我。

我想从原始数据库创建一个摘要。例子：

```
ID | Vessel Name | Tonnage |

1      ABC         1000 

2      CDE         2000 

3      EFG         3000 
```

* * *

6000 <-- 如何使用 php 和 oracle 合计这个值？

供您参考，以下是我的代码：

```
 $conn = ......;
   $strSQL = .....;
   $objParse = oci_parse ($conn, $strSQL);
   oci_execute ($objParse);
   while($objResult = oci_fetch_array($objParse,OCI_BOTH))
   {
    echo $objResult["ID"];
    echo $objResult["VSLNM"];
    echo $objResult["TON"];
   } 
```

我的问题：有没有办法使用 PHP 函数来求和所有吨位值。我想得到所有吨位的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:37:00.320

它微不足道，只需添加到您在循环之外定义的变量：

```
 $conn = ......;
   $strSQL = .....;
   $objParse = oci_parse ($conn, $strSQL);
   oci_execute ($objParse);
   $total_tonnage = 0;
   while($objResult = oci_fetch_array($objParse,OCI_BOTH))
   {
    echo $objResult["ID"];
    echo $objResult["VSLNM"];
    echo $objResult["TON"];
    $total_tonnage += $objResult["TON"];
   }
   echo $total_tonnage; 
```

# xpages - 荷兰语转换器和验证器消息

> ID：16078085
> 
> 赞同：2
> 
> 时间：2013-04-18T08:31:11.783
> 
> 标签：xpages, converter, validation

我有一个关于转换器的问题。在我的一个字段上，我添加了一个转换器来将字段值更改为日期。每当用户输入不正确的日期/时间格式时，就会显示错误“此字段不是有效日期。”。

我想强制它使用荷兰语。我可以将本地更改为简单地以荷兰语显示，还是应该编写自定义转换器（不希望如此）并返回荷兰语消息？

我认为与此相关的是验证者的消息。我有一个表达式验证器，当计算的表达式（它保存在注释文档中并在页面加载时读取）无效时返回“表达式无效”消息。我可以以某种方式将其更改为荷兰语吗？让用户知道发生了什么？

# php - 当其中一个字段为空时禁用提交按钮

> ID：16078086
> 
> 赞同：0
> 
> 时间：2013-04-18T08:31:14.663
> 
> 标签：php, jquery

**当图片中显示的一个或多个**选择器（动态生成）为空时，我试图禁用提交按钮。

![http://i.stack.imgur.com/t4nng.png](https://i.stack.imgur.com/PJ3XK.png)

我尝试了以下 jQuery 代码：

```
 <script>

    var $submit = $("input[name=store_values]");
    $(".ownlevelselect").each(function(){
    if($(".ownlevelselect:empty").length>0){
        $submit.attr("disabled","disabled");
    }else {
        $submit.removeAttr("disabled");
    }
    });

</script> 
```

这些是我表格的相关部分：

```
 echo "<select class='ownlevelselect' id='ownlevelselect' name='level-".$compi['Competence_ID']."' >"; 
```

和输入按钮：

```
 echo "<input type='submit' name='submit_values' value='Save'>";
  echo "<input type='submit' name='store_values' value='Store'></form>"; 
```

我要禁用的那个是`name='store_values'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:31:33.270

您的问题有些含糊不清，您的意思是像 DOM 一样为空（选择不包含元素）还是像选择了空值的选择一样为空？

如果你的意思是像**emtpy value**这样的空，你可以试试这个，像 Shadow Wizard 所说的那样处理更改事件：

```
$('document').ready(function(){

    var submitButton = $('input[name="store_values"]');
    /* Called to disable button on page load, done here but probably possible server-side */
    checkValues()

    /* Called on change event on dropdowns */       
    $('select.ownlevelselect').on('change',function(){
        checkValues();
    });

    function checkValues(){
        /* Disable button if found an empty <select> (mean, no <option> inside), or a select with an empty value selected */
        submitButton.prop('disabled',$(".ownlevelselect > option:selected[value=''],.ownlevelselect:empty").length > 0);
    }
}); 
```

如果您的意思是像“Dom empty”这样的空（选择中没有定义选项），您可以试试这个（您可以将它放入一个函数中，并在每次动态添加元素时调用它）

```
$('document').ready(function(){
    var submitButton = $('input[name="store_values"]');
    submitButton.prop('disabled',$(".ownlevelselect:empty").length > 0);
}); 
```

**编辑**

请注意您的 ID，我没有任何相关的代码可以确定，但您似乎为您的选择重复使用相同的 ID，这是一个坏主意:)

**编辑2**

这是一个小提琴，所以你可以看看我是否错过了什么：http: [//jsfiddle.net/d8rb9/](http://jsfiddle.net/d8rb9/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T09:28:30.060

您可以为每个选择使用 onBlur 事件来触发一个测试所有其他选择是否不为空的函数，如果是则激活提交按钮。

这是一个例子：

**选择标签：**

```
<select class="ownLevelSelect" onBlur="checkSelects()">
    <option></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

**Javascript函数：**

```
<script>
    function checkSelects(){

        // integer to count the number of select with a correct value
        var nonEmpty = 0;

        // loop on all the select in the page with the class attribute : "ownLevelSelect"
        $('.ownLevelSelect').each(function(){
            if($(this).val()) {
                nonEmpty++;
            }
        });

        //desactivate the submit button if the number of selects in the page <> nonEmpty
        ($('.ownLevelSelect').length == nonEmpty)? $('#theSubmit').removeAttr("disabled") : $('#theSubmit').attr("disabled","disabled");
                }
</script> 
```

也许您需要在页面加载时调用此函数，因此如果其中一个字段为空，则默认禁用该按钮

```
<script>
    $(document).ready(function() {
        checkSelects();
    });
</script> 
```

注意：ID 属性在页面上必须是唯一的，因此在您的代码中更改此：

```
<select class='ownlevelselect' id='ownlevelselect' name='level-".$compi['Competence_ID']."' >";

By this : 

<select class='ownlevelselect' id='ownlevelselect-".$compi['Competence_ID']."' name='level-".$compi['Competence_ID']."' >"; 
```

我希望这会有所帮助。

# css - 如何重新缩放 svg 元素

> ID：16078088
> 
> 赞同：1
> 
> 时间：2013-04-18T08:31:25.723
> 
> 标签：css, svg, d3.js, responsive-design, viewport

我从 D3.js 开始并创建一个非常基本的数字。问题是关于`<svg>`标签的宽度。当用户更改窗口大小时，如何调整 svg 宽度？这是关于制作一个响应式的svg ...

我知道 svg 的视口划定了绘制图形的区域，但是当我分配给`viewport="0 0 100% 100%"`它时，它不像我那样工作。

我有以下代码：

**HTML**

```
<div id="main">
    <h3>Graph title</h3>
    <div class="graph">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1"></svg>
    </div>
</div> 
```

**CSS**

```
body, h3 {
    position: relative;
    margin:0px; 
    padding:0px;
}

#main {
    position: relative; 
    width: 80%;
    border: 1px solid #000;
    border-radius: 4px;
    margin: 0 auto;
    padding: 10px;
}

.graph{position: relative;}

svg {
    position: relative;
    width: 100%;
} 
```

我认为是关于 css 的东西......这里有带有一些数据的[jsfiddle示例。](http://jsfiddle.net/newpatriks/P2eYK/)

# c# - Windows Forms FolderBrowserDialog hangs the application

> ID：16078094
> 
> 赞同：0
> 
> 时间：2013-04-18T08:31:46.540
> 
> 标签：c#, winforms, folderbrowserdialog

With winforms, when I right click on a folder or try to delete a folder within the `FolderBrowserDialog` the window becomes irresponsive and I've to force-close it.

Here's the code:

```
private void btnOpenFileDialog_Click(object sender, EventArgs e)
{
    folderBrowserDialog1.SelectedPath = txtBoxLog.Text;
    folderBrowserDialog1.RootFolder = Environment.SpecialFolder.MyComputer;
    if (folderBrowserDialog1.ShowDialog()==DialogResult.OK)
    {
        txtBoxLog.Text = folderBrowserDialog1.SelectedPath;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T10:17:06.127

问题是系统范围的，因此控件以不正确的方式正确运行（具有讽刺意味）。

# c# - 状态条内的自定义进度条。C＃

> ID：16078095
> 
> 赞同：0
> 
> 时间：2013-04-18T08:31:47.023
> 
> 标签：c#, forms, progress-bar, statusstrip

大家好，早上好。

我目前正在使用 Windows 窗体开发基于文本的 RPG。

我将如何在状态条上创建自定义进度条？

谢谢

卢卡斯

# java - Java中的形状模式匹配算法

> ID：16078101
> 
> 赞同：8
> 
> 时间：2013-04-18T08:31:54.993
> 
> 标签：java, android, pattern-matching, gesture, gesture-recognition

我正在寻找形状匹配算法的 Java 实现。这是一张图片来展示我的想法：

![在此处输入图像描述](https://i.stack.imgur.com/uh9O1.png)

我也很想知道是否有适用于 Android的**手势识别免费实现**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:43:31.433

你可以看看[eclipse sketch](http://www.eclipse.org/sketch/)。页面上有一段视频演示了它的使用以及它是如何工作的。Sketch 正在做用于图形编辑器的手势识别。该实现并不打算在android上运行，但也许您可以从中学习。

# php - 如何在 PHP 中验证复选框组

> ID：16078105
> 
> 赞同：0
> 
> 时间：2013-04-18T08:32:04.130
> 
> 标签：php

嗨，我正在努力解决这个问题，有人可以帮忙吗？我得到了一系列动态填充的复选框。该行如下所示，它是 While 循环的一部分。

```
echo "<td class='brc'><input type='checkbox' name='delz[]' value='$wec' ></td>"; 
```

验证时，我发现至少在循环中选中复选框时很难看到。我得到了以下工作，反之亦然，我需要什么。如何更改此设置以在未检查任何内容时为我提供输出，消息回显说“未检查任何内容”？

```
 $selectboxes = $_POST['delz'];
foreach($selectboxes as $A)
{if($selectboxes == ""){echo "Some check boxes are selected !!!"; return;}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:36:12.693

取消选中的复选框不会通过 HTML 表单传递。

所以：

```
$checkboxesSelected = isset($_POST['delz']);

if ($checkboxesSelected)
{
    echo "Some check boxes were selected";
} else {
    echo "No check boxes were selected.";
} 
```

应该管用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-18T08:46:55.713

我认为获取复选框系列的最简单方法

```
<?
$result = array();
foreach($_POST['delz'] as $checkbox){
   $result[]  = $checkbox; //u got all values that checkboxes has actually checked
}
print_r($result);
?> 
```

# javascript - 使用 rel 属性显示的 Modal 编辑 gridview 单元格

> ID：16078106
> 
> 赞同：0
> 
> 时间：2013-04-18T08:32:06.227
> 
> 标签：javascript, jquery, asp.net, modal-dialog

我使用按钮的 rel="#showEditModal" 属性打开一个（css 制作的）模态对话框。

我用它来向数据库添加值，然后更新 gridview 并最终让它工作。

问题是现在我需要在网格视图中单击时编辑此值。

它是这样的：

```
<asp:TemplateField>
<ItemTemplate>
<asp:Button ID="BtnEditDep" rel="#showEditModal" CssClass="btn showModal" 
runat="server" CausesValidation="false"  Text="Test" OnClientClick="window.scrollTo = 
function(x,y) { return true; };"  />                                    
</ItemTemplate>
</asp:TemplateField> 
```

这让我很头疼，因为我需要向该模态发送一个变量（ID）

1）如果我把它放在 Grid_RowCommand 中，它不会去那里，直到模态显示尝试将值放入 viewstate => 似乎无法从 gridview 中提取值

2）尝试通过在 Grid_RowCommand 内部动态添加属性（“rel”，“#showEditModal”）来动态打开模式，但显然我需要再次单击它以显示模式（查看以编程方式单击按钮但失败）

3）也试过这样（没用 - 无法发送参数）

```
OnClientClick="SaveValue('<%= (BtnEditDep.ClientID).Text %>); 
window.scrollTo = function(x,y) { return true; };"
....
function SaveValue(name)
{
    $("hiddenelement").value = "<%= (BtnEditDep.ClientID).Text  %>";
} 
```

我怎么能做到这一点，因为我目前很难过。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:31:44.593

我认为您应该尝试将保存数据和刷新 gridview 的功能打包在服务中，并使用 ajax 在客户端触发它，这是解决您问题的最自然的解决方案。

# javascript - Click go to modal section

> ID：16078108
> 
> 赞同：0
> 
> 时间：2013-04-18T08:32:18.963
> 
> 标签：javascript, jquery, html, css, ajax

this is what I want to achieve:

![enter image description here](https://i.stack.imgur.com/d8Y8d.png)

The modal has 4 sections, each section loads it´s content dinamically using .load() to the container on the right.

The problem is that I have a menu in the footer that opens the modal, and should put the user in the correct section:

![enter image description here](https://i.stack.imgur.com/o5Wet.png)

I just don´t know how to make it, for example if I click on the footer menu 'metodos de pago' ***it open the modal in that specified section***. any ideas on how to do it?

this is my script to load the modal:

```
function loadmodal(){
     $('.info_modal').fadeIn();
} 
```

this is my script to load the content of the sections in the modal after clicking on the left menu:

```
function loadcontent(){
     $('.info_modal_content').load('includes/text2.html');
} 
```

markup of the modal:

```
 <div class="info_modal">
        <div class="info_modal_container">
            <h2>Guia de compra</h2>
            <hr>
            <ul class="info_modal_menu">
                <li>
                    <a href="javascript:void(0)">Como Comprar</a>
                </li>
                <li>
                    <a href="javascript:void(0)" onclick="loadcontent()">Metodos de pago</a>
                </li>
                <li>
                    <a href="javascript:void(0)">Cambios y devoluciones</a>
                </li>
                <li>
                    <a href="javascript:void(0)">Tarjeta regalo</a>
                </li>
            </ul>
            <div class="info_modal_content">
                <h2>TARGETA PUEDES COMPRARLA EN...</h2>
                <p>Tu tarjeta puede ser rechazada por una de las</p>
            </div>

            <a href="javascript:void(0)" class="close_contact" onclick="closecontactmodal()"></a>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:38:48.580

为什么不通过 URL 进行初始加载？

假设您的页脚结构如下：

```
<footer>
  <ul>
    <li><a href="text1.html" class="openModal">Text 1</a></li>
    <li><a href="text2.html" class="openModal">Text 2</a></li>
    <li><a href="text3.html" class="openModal">Text 3</a></li>
    <li><a href="text4.html" class="openModal">Text 4</a></li>
  </ul>
</footer> 
```

然后您可以将处理程序附加到`.openModal`：

```
$('.openModal').on('click', function(e){
  e.preventDefault();

  var toLoad = $(this).attr('href');

  $('.info_modal_content').load(toLoad);

  $('.info_modal').fadeIn();
}); 
```

# ios - UIwebview 加载带有捆绑/本地图像的远程 html

> ID：16078117
> 
> 赞同：1
> 
> 时间：2013-04-18T08:32:43.507
> 
> 标签：ios, uiwebview

好吧，我到处搜索，但我的情况没有任何运气。我正在使用 UIWebView 使用以下代码加载我的网页：

```
NSString *fullURL;
fullURL=@"http://domain.com";
NSURL *url=[NSURL URLWithString:fullURL];
NSURLRequest *requestObj=[NSURLRequest requestWithURL:url];
[_webView loadRequest:requestObj]; 
```

我想加载远程 HTML 文件，但从捆绑资源中加载图像。HTML 文件如下所示：

```
<img src="http://domain.com/images/image.png" width="20px" height="20px"/> 
```

这可以做到吗？互联网上的大多数帖子（和这里）都是用于加载带有本地图像/资源的本地 HTML，这在我的情况下是不同的。

我的代码有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:53:57.073

使用一些更“松散耦合”的解决方案可能会更好 - 不要以某种hacky方式编辑HTML代码本身（regexp，而不是regexp......手动更改HTML代码仍然很hacky）。

事实上，我相信这是可以做到的。iOS 只需要以某种方式被告知某些资产可以从捆绑包中离线使用。

基本上，当 UIWebView 加载页面时，在后台发生的第一件事就是下载主 *.html 页面。然后正在下载所有图形/css'es/js'es 等。

您可以让 html 文件“按原样”下载，但拦截那些将下载图形（+其他资产）的请求并从本地包中提供它们。请参考这篇文章：

[http://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588](http://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588)

并应用适当的更改。这里最大的胜利是从 webview（以及通过 JavaScript 加载/维护的代码调用它的内容）的角度来看 - 没有任何改变。只有自定义的 NSURLProtocol 本身知道某些数据是从本地存储加载的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T19:04:52.687

有完全相同的问题。子类化 NSURLCache 以将缓存重定向到缓存来自本地存储的图像就像一个魅力。

这是我关注的文章：http: [//www.cocoawithlove.com/2010/09/substituting-local-data-for-remote.html](http://www.cocoawithlove.com/2010/09/substituting-local-data-for-remote.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:44:25.450

**TL;DR**复杂，尽可能避免，但可能。

如果您仍然想这样做：不要`UIWebView :loadRequest`在 URL 本身上执行 a，因为它会非常快速地触发下载图像的开始，因此使用 Javascript 修改图像源可能会为时已晚。

相反，您必须做的是在本机端下载 URL 的内容并在那里迭代图像标签以替换源（相当复杂，[不要使用正则表达式来解析 HTML btw](https://stackoverflow.com/a/1732454/288672)，有用于此的[库](http://cocoapods.org/?q=html%20parse)） ，然后使用 . 注入修改后的 HTML `UIWebView loadHTMLString:baseURL:`。

# android - Android - 意外的应用程序崩溃

> ID：16078119
> 
> 赞同：-4
> 
> 时间：2013-04-18T08:32:45.587
> 
> 标签：android, class, android-manifest

好的，所以我有一个鸡尾酒圣经应用程序，可让您从列表中选择鸡尾酒，它应该显示有关鸡尾酒的各种信息，例如文本、img 和链接 youtube 剪辑的按钮。代码正在编译，但是当我单击其中一个时应用程序意外崩溃的列表中的项目。同样，目前我的应用程序只允许两种鸡尾酒，我如何让它运行 20 种鸡尾酒？顺便说一句，我已经删除了几乎所有的进口商品。

运行列表类的代码

```
package com.drunktxtapp;

import android.app.Activity;

public class CocktailMenu extends Activity {

    String classes[] = {"Bloody_Mary", "Capirinha", "Cosmopolitan", "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita", "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada", "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour", "White_Russian"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cocktail_menu);
        Button b1 = (Button) findViewById(R.id.bByList);
        Button b2 = (Button) findViewById(R.id.bRandomCocktail);

        b1.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {

                try {
                    Class<?> menuClass = Class.forName("com.drunktxtapp.Menu");
                    Intent ourIntent = new Intent(CocktailMenu.this, menuClass);
                    startActivity(ourIntent);
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

        b2.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                String cocktailType = classes[(int) (Math.random() * classes.length)];
                try{
                Class<?> ourClass = Class.forName("com.drunktxtapp." + cocktailType);
                Intent openRandom = new Intent(CocktailMenu.this, ourClass);
                startActivity(openRandom);
            }catch (ClassNotFoundException e){
                e.printStackTrace();
            }
        };
    });
    }
} 
```

生成鸡尾酒列表的代码

```
package com.drunktxtapp;

import android.app.ListActivity;

public class Menu extends ListActivity{

    String classes[] = {"Bloody_Mary", "Capirinha", "Cosmopolitan", "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita", "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada", "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour", "White_Russian"};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this,android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);;
            Intent ourIntent = new Intent(Menu.this, CocktailDetail.class);
            ourIntent.putExtra("Bloody_Mary", "Capirinha");
            startActivity(ourIntent);
    }
} 
```

更改鸡尾酒展示页面信息的代码

```
package com.drunktxtapp;

import android.net.Uri;

public class CocktailDetail extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cocktaildetail);
        ImageView imageView1 = (ImageView)findViewById(R.id.imageCocktail);
        imageView1.setImageDrawable(getResources().getDrawable(R.drawable.bloodymary));
        Button b1 = (Button) findViewById(R.id.bYoutube);
        TextView t1 = (TextView)findViewById(R.id.textCocktailName);
        String cocktailName = getIntent().getStringExtra("Bloody Mary");
        t1.setText(cocktailName);
        b1.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=Alt-ehDc3fc")));
                }
        });
    }
} 
```

这是 LogCat

```
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.os.Looper.loop(Looper.java:137)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.app.ActivityThread.main(ActivityThread.java:4898)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at java.lang.reflect.Method.invoke(Method.java:511)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at dalvik.system.NativeStart.main(Native Method)
04-18 09:22:38.085: E/AndroidRuntime(1068): Caused by: java.lang.NullPointerException
04-18 09:22:38.085: E/AndroidRuntime(1068):     at com.drunktxtapp.CocktailDetail.onCreate(CocktailDetail.java:26)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.app.Activity.performCreate(Activity.java:5206)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
04-18 09:22:38.085: E/AndroidRuntime(1068):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
04-18 09:22:38.085: E/AndroidRuntime(1068):     ... 11 more
04-18 09:27:46.270: I/Process(1068): Sending signal. PID: 1068 SIG: 9 
```

XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/beer"
    android:id="@+id/cocktailDetail" >

    <TextView
        android:id="@+id/textCocktailName"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Cocktail Name"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageCocktail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/bloodymary" />

    <TextView
        android:textStyle="bold"
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Ingredients"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textIngredients"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Insert txt here"
        android:textAppearance="?android:attr/textAppearanceSmall" 
        android:textStyle="bold" />

    <TextView
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="2dp"
        android:text="Preparation"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textPrepration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Insert txt here"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textStyle="bold" />

    <Button
        android:id="@+id/buttonYoutube"
        android:layout_width="200dp"
        android:layout_height="75dp"
        android:layout_gravity="center"
        android:layout_marginTop="5dp"
        android:text="YouTube Clip"
        android:textSize="20dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:46:49.003

你把下划线留在了`Bloody_Mary`

该声明`String cocktailName = getIntent().getStringExtra("Bloody Mary");`必须是

`String cocktailName = getIntent().getStringExtra("Bloody_Mary");`

和`Button b1 = (Button)findViewById(R.id.buttonYoutube);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:47:45.460

我在您的 xml 文件中没有看到 ID 为“bYoutube”的按钮。看起来当您查找该按钮时，调用返回 null，因此当您尝试设置其 onClickListener 时，您的应用程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:50:03.323

尝试使用：

```
Button b1 = (Button) findViewById(R.id.buttonYoutube); 
```

因为您的 xml 文件中没有`bYoutube`按钮。

# c# - C#：将泛型函数转换为 Func 对象

> ID：16078122
> 
> 赞同：1
> 
> 时间：2013-04-18T08:32:53.060
> 
> 标签：c#, lambda

我有以下功能：

```
private int GetEnumTypeUnderlyingId<T>()
        {
            return (int)Enum.Parse(typeof(T), Enum.GetName(typeof(T), _franchise.LogonDialog));
        } 
```

我想将其转换为`Func type`. 我写的是这样的：

```
Func<int> GetEnumTypeUnderlyingIdFunc<T> = () => (int)Enum.Parse(typeof(T), Enum.GetName(typeof(T), _franchise.LogonDialog)); 
```

但这不起作用。使用 Func<>、泛型和 lambda 表达式时我不太自在，因此将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:36:40.190

您可以定义自己的委托。这是您要查找的内容：

```
//Your function type
delegate int GetEnumTypeUnderlyingIdFunc<T>();

//An instance of your function type
GetEnumTypeUnderlyingIdFunc<int> myFunction = () => //some code to return an int ; 
```

这也有效。

```
//An instance of Func delegate
Func<int> GetEnumTypeUnderlyingIdFunc = () => //some code to return an int; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:43:41.720

另一种解决方案是

```
public Func<int> GetTheFunc<T>(T val)
{
    Func<int> func = () => (int)Enum.Parse(typeof(T),Enum.GetName(typeof(T),val));
    return func;
} 
```

然后

```
var func = GetTheFunc<_franchise>(_franchise.LoginDialog);

//Now you can use the func, pass it around or whatever..
var intValue = func(); 
```

# asp.net - 具有 IIS7.5 的基于 Windows 平台的服务器是否支持 .htaccess

> ID：16078123
> 
> 赞同：0
> 
> 时间：2013-04-18T08:32:53.780
> 
> 标签：asp.net, html, .htaccess, redirect

我是 .htaccess 概念的新手。**我有一个使用 IIS 7.5**托管在 Windows 服务器上的网站。我想知道**它是否支持 .htaccess 实际上**我想用它解决规范的 url 问题，我什至尝试创建 .htaccess 并在服务器上运行它但没有奏效。

我的**托管服务提供商甚至为我提供了 Linux 服务器**，所以如果我迁移到 linux 服务器，我应该怎么做才能实现 .htaccess 功能请注意，我的网站是用 aspx 创建的，一些页面也在 html 中。

我知道规范问题也可以通过 web.config 文件解决，但即使这样也不起作用。

请帮我。

问候， 沙希坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:42:00.007

如果您的网站是 ASP.NET 网站 (.aspx)，.htaccess 文件与您无关，您通常应该在 Windows Server 上运行您的网站。

.htaccess 文件用于 Apache Web 服务器，尽管它们可以在 IIS 7.5 上使用，例如对于 Prestashop 等基于 PHP 的站点，您需要第三方插件才能使用 .htaccess 文件。

最接近的 Windows Server IIS7.5 等效文件是 web.config 文件。

# ruby-on-rails - 乘客：在任何来源中都找不到 rake-10.0.4 (Bundler::GemNotFound)

> ID：16078127
> 
> 赞同：4
> 
> 时间：2013-04-18T08:33:02.297
> 
> 标签：ruby-on-rails, apache, rake, bundle, passenger

我有一个使用 apache2 + 乘客在 debian 上运行的 rails 应用程序，但我从乘客那里收到这条消息：

```
Error message:
    Could not find rake-10.0.4 in any of the sources (Bundler::GemNotFound) 
```

奇怪的是 rake-10.0.4 似乎已经安装好了：

```
> bundle show
Gems included by the bundle:
  * ...
  * rake (10.0.4)
  * ... 
```

有人知道那是从哪里来的吗？谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-13T13:49:26.593

我想我一直在努力解决这个问题 - 我刚刚在以下位置发布了我的解决方案：

*   [https://stackoverflow.com/a/17088480/1578861](https://stackoverflow.com/a/17088480/1578861)

听起来您的乘客配置指向的 ruby​​ 版本与您用于运行捆绑器的版本不同

检查您的 rvm 使用的是哪个 ruby​​ 版本：

```
 $ rvm env --path 
```

查找`passenger.conf`并更新`PassengerRuby`- 您可以使用乘客提供的配置实用程序来执行此操作

```
 passenger-config --ruby-command 
```

确保使用之前使用完全合格的路径`passenger-config`（以避免我[令人沮丧的深夜错误](https://stackoverflow.com/a/17088686/1578861)）

# git - Git-svn合并两个SVN分支

> ID：16078135
> 
> 赞同：16
> 
> 时间：2013-04-18T08:33:34.160
> 
> 标签：git, git-svn

我已经阅读了许多关于`git-svn`和合并的 SO 问题和博客。其中一些（尤其是`git-svn`手册页）警告*不要*在我计划的分支附近的任何地方使用合并`dcommit`。

其他人，例如这个[SO answer](https://stackoverflow.com/a/4238528/465345)，声明只要我使用我之前删除**的一次性**`dcommitting`功能分支，合并就可以了。

我有两个长期存在的 SVN（和 git）分支的设置：

*   **trunk** (git-svn: `svn/trunk`, git: `master`) - 稳定的分支
*   **分支/开发**(git-svn: `svn/devel`, git: `devel`) - 我从中分出功能分支的主要开发分支（我可以忍受将它们重新定位`devel`而不是合并）。

![源树中当前状态的快照](https://i.stack.imgur.com/EwZNb.png)

在上图中，**(1)**显示了过去的 SVN 历史，其中`branches/devel`已合并到`trunk`.

**(2)**表明我已经成功地将`dcommitted`我当前的开发返回到 SVN。

**问题：**我可以`git-svn`用来合并**两个 SVN 分支**，以便历史记录显示合并点（正如 SVN 本身可以做的那样）？换句话说：如果我`dcommit`要从**(3)**`master`中显示的那样会发生什么？

 **这会弄乱我的 SVN（或 git）历史吗？或者这会完全忘记`devel`被合并`master`的吗？

**编辑：**如果`git`只是忘记`devel`合并到中，从点**(3)**和将所有提交作为单个**补丁**`master`应用之间有区别吗？`dcommiting`

 ***** * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T09:20:23.117

深入研究一下，我发现 git在'ing`svn:mergeinfo`时支持在 SVN 分支上设置属性：`dcommit`

```
git svn dcommit --mergeinfo "/branches/somebranch:1-3" 
```

**注意！**`svn:mergeinfo`被命令行上给出的任何内容**覆盖**，所以也要小心列出*以前的合并*。

虽然最近的 git 版本添加了 config 参数来自动设置这个属性：

```
config key: svn.pushmergeinfo 
```

我在使用自动合并信息时遇到了一些问题——出于某种原因或其他 GIT 计算错误，我无法让它工作。

**解决方案：[git-merge-svn](https://gist.github.com/borgand/5441827)**

为了自动化这个过程，我编写了一个 shell 脚本[git-merge-svn](https://gist.github.com/borgand/5441827)，它可以用来合并两个`svn:mergeinfo`dcommit 上正确设置的 SVN 分支。

该脚本处理两种情况：

*   分支没有在 git 中合并 - 会`git merge`事先做
*   分支已经在 git 中合并（但不在 SVN 中） - 将遍历直到合并提交修订的前一个祖先。

使用此脚本，我能够仅在 git 端生成这些合并并保留合并信息，以便 GIT 图表很好地显示日志：

![git-merge-svn 结果](https://i.stack.imgur.com/uXa2u.png)

**示例用法：**

1.  *在devel6*上做一些提交
**   `dcommit` *devel6*到 SVN（**需要**获取提交的 SVN 修订号）*   查看*testtunk6* - 是的，我知道我的名字打错了 ;-)*   `git merge-svn devel6`*

 *最后一条命令输出：

```
% git merge-svn devel6
About to do an SVN merge: devel6 -> testtunk6

* NEW MERGE COMMIT
|\
| * devel6 [7b71187] (r102)
* | testtunk6 [0682a45] (r101)
 \|
  * [273d6d6] (r100)

STEP 1: GIT merge
Executing:
  git merge devel6

Continue? (y/n) [n]: y
Merge made by the 'recursive' strategy.
 testfile | 1 +
 1 file changed, 1 insertion(+)

STEP 2: SVN dcommit

executing:
git svn dcommit --mergeinfo
/idp/branches/devel:9-32,35-41 /idp/branches/devel6:89 /idp/branches/devel6:94 /idp/branches/devel6:93 /idp/branches/devel6:96 /idp/branches/devel6:97 /idp/branches/devel6:99 /idp/branches/devel6:100 /idp/branches/devel6:102

Continue? (y/n) [n]: y
Committing to https://my.svn.host/svn/auth/idp/branches/testtunk6 ...
  M testfile
Committed r103
  M testfile
Found merge parent (svn:mergeinfo prop): 7b71187fc371d3f86658c5850009e63be88157ac
r103 = 87759323cbadd38bac78087d57b6870a926287e7 (refs/remotes/svn/testtunk6)
No changes between 3fb2168cfbbe605fbd810d76513443203a85a549 and refs/remotes/svn/testtunk6
Resetting to the latest refs/remotes/svn/testtunk6 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T20:49:15.723

Git 和 Svn 有不同的数据结构来保存历史。

Svn 使用一个简单的树。即每个提交只有一个父级，但一个提交可以有多个子级（分支）。所以，Svn 不支持合并。他们称之为“合并”的东西实际上是变更集移植，在 git 中最接近的类比是`rebase`或者可能是`cherry-pick`. 从 1.5 版开始，Svn 支持一个元信息属性`svn:mergeinfo`，它有助于以某种方式跟踪“合并”的内容，但它看起来主要是一种解决方法，这解释了为什么 Svn 中的分支如此难以使用。合并点是一种提交，它将所有合并的变更集和冲突解决方案压缩到一个变更集中，可能使用`svn:mergeinfo`属性进行注释。

Git 使用有向[无环图](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，这是一种非常自然的方式来描述历史合并和分支。合并点只是具有两个（或更多！）父母的另一个提交。因此，图片上的 (3) 是合并提交。所以，所有的历史看起来都很自然，它的所有提交都可以在历史图表上从当前点到达。

Git-Svn 桥尝试尽最大努力处理 Svn 设计缺陷，在此之前`dcommit`通常会将所有合并提交重新设置在当前 Svn 分支的顶部。Asof ~2 年前， git-svn 无法提供`svn:mergeinfo`，所以你问的事情是不可能的。此外，当你`dcommit`ing 时，git 会创建一个“几乎”链接到 svn 提交的“孪生”提交，因此它会重写原始提交。*******

# solr - 为什么这段代码 - 将 wordnet 同义词添加到索引 - 失败？

> ID：16078137
> 
> 赞同：0
> 
> 时间：2013-04-18T08:33:50.567
> 
> 标签：solr, lucene, elasticsearch, wordnet

我正在编写此代码作为我的 CustomAnalyzer 的一部分：

```
public class CustomAnalyzer extends Analyzer {

SynonymMap mySynonymMap = null;

CustomAnalyzer() throws IOException {
    SynonymMap.Builder builder = new SynonymMap.Builder(true);

    FileReader fr = new FileReader("/home/watsonuser/Downloads/wordnetSynonyms.txt");
    BufferedReader br = new BufferedReader(fr);
    String line = "";

    while ((line = br.readLine()) != null) {
      String[] synset = line.split(",");
      for(String syn: synset)
          builder.add(new CharsRef(synset[0]), new CharsRef(syn), true);
    }

    br.close();
    fr.close();

    try {
        mySynonymMap = builder.build();
    } catch (IOException e) {
        System.out.println("Unable to build synonymMap");
        e.printStackTrace();
    }
}

public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream result = new PorterStemFilter(new SynonymFilter(
                                              (new StopFilter(true,new LowerCaseFilter
                                               (new StandardFilter(new StandardTokenizer
                                                 (Version.LUCENE_36,reader)
                                                )
                                               ),StopAnalyzer.ENGLISH_STOP_WORDS_SET)), mySynonymMap, true)
                                               );

}
} 
```

现在，如果我在查询中使用相同的 CustomAnalyzer，那么如果我输入查询为

```
myFieldName: manager 
```

它使用经理的同义词扩展查询。

但是，我希望同义词只是我的索引的一部分，我不希望我的查询被同义词扩展。

因此，当我仅在查询索引时从我的 CustomAnalyzer 中删除 SynonymFilter 时，查询仍然为

```
myFieldName: manager 
```

但是，它无法检索具有 manager 同义词的文档。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:52:34.260

如果您在查询处理期间没有同义词构建器，那么它将匹配的唯一术语是您在索引期间映射到的术语。你没有在这里展示那部分。

解决此问题的最佳方法是查看 Admin/Core/Analysis 屏幕（在 Solr 4+ 中）并输入您的文本。它将显示在运行索引和查询的每个阶段后文本会发生什么。

您甚至不需要运行 reindexer。您可以只定义一堆您试图找出的不同类型，然后直接针对这些类型运行示例句子的分析。

# firefox-addon - 无法在 xul 应用程序中加载覆盖

> ID：16078143
> 
> 赞同：1
> 
> 时间：2013-04-18T08:34:08.767
> 
> 标签：firefox-addon, xul, xulrunner, xpi

我有一个独立的 xulrunner 应用程序，需要扩展才能正常工作。但是在我安装 xpi 文件后，我的 jsconsole 报告我一个错误`"Failed to load overlay from chrome://my-client/content/overlays/index.xul"`。这意味着`chrome.manifest`文件被识别，但覆盖的路径不好。

我在 xpi 中的 chrome.manifest 文件

```
content my-client file:chrome//
overlay chrome://app/content/lib/conf.xul chrome://my-client/content/overlays/index.xul 
```

文件中的扩展ID与主应用程序`install.rdf`的文件中的ID相同。`application.ini`我启用了扩展管理器

```
[XRE]
EnableExtensionManager=1 
```

我的首选项中有 extension.js 文件。

奇怪的是，当我只是将我的客户端扩展的文件夹符号链接到我的主应用程序的扩展文件夹中时，一切都按我的预期工作。这只发生在我通过扩展管理器安装 xpi 时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:43:40.453

我想到了。问题是我忘了把这行代码放在我的`install.rdf`文件中

```
<em:unpack>true</em:unpack> 
```

此处的文档：[https ://developer.mozilla.org/en/docs/Install_Manifests#unpack](https://developer.mozilla.org/en/docs/Install_Manifests#unpack)

# xpages - Best way to bind a non-managed bean to an xPage?

> ID：16078144
> 
> 赞同：0
> 
> 时间：2013-04-18T08:34:12.420
> 
> 标签：xpages

What is the best way to bind a non-managed bean to an xPage? We use xPages controller classes in java, and would like to limit some classes to a specific xPage without using managed bean in faces-config.

Tried to use dataContext and some of the methods work, but we are not able to get the document data source, using resolveVariable method. It always returns doc=null. The same java class as a managed bean returns the data source correct.

Are there better ways to connect a bean to a specific xPage?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:27:19.477

`beforePageLoad`您可以在事件中将您的 Java 控制器与 XPage 连接：

```
 <xp:this.beforePageLoad><![CDATA[#{javascript:
        viewScope.controller = new com.yourdomain.controller.MyController();
        controller.beforePageLoad()}]]>
    </xp:this.beforePageLoad> 
```

然后您可以使用 EL 调用控制器的方法，如下所示：

```
#{controller.save} 
```

或者您可以将某些事件与您的控制器连接：

```
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    afterPageLoad="#{controller.afterPageLoad}" 
```

您的控制器有权访问文档数据源。

```
 public void save() throws Exception {
        DominoDocument doc = (DominoDocument) JsfUtil.resolveVariable("currentDocument");
        System.out.println("save(" + doc.getDocument().getUniversalID() + ")");
    } 
```

# php - localStorage cleared after refresh

> ID：16078150
> 
> 赞同：0
> 
> 时间：2013-04-18T08:34:37.697
> 
> 标签：php, javascript, json, local-storage

I have a problem with saving data to the localstorage of the browser.

I have a php file and a switch. When the type is "favorites" I make a create a button and send the json data to a function "save" in my javascript.

```
case 'favorites':
            $session = $m->session;

            $data = json_encode((array)$session);

            echo "<a onclick='save(".$data.")' style='cursor:pointer;' class='metacell'>
                    <img src='".buildUri('images/icons/favorite.png')."' width='16' />
                    <span>Add to favorites</span>
                    </a>";
            break; 
```

This is my javascript:

```
function save(data)
    {
        var thedata = data;

        // STORE THE ABOVE DATA IN LOCALSTORAGE
        localStorage.setItem('data', "testje");
    } 
```

I'm currently testing with just some text "testje". When i push the button it goes in localstorage but when I refresh the page its gone ...

Does anbody know how this comes?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:22:12.037

```
function save(data)
    {

        // STORE THE ABOVE DATA IN LOCALSTORAGE
        window.localStorage.setItem('data', data);
    } 
```

试试看！localStorage 可能已经成为一个全局变量（在页面的上下文中）并且根本没有指向真正的 localStorage

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:41:17.133

尝试这个：

```
 var thedata ;

function save(data)
{
    thedata = data;

    localStorage.thedata="testje";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:41:26.733

您正在使用 HTML 属性来传输值，尽管您没有对值进行任何 HTML 编码。这可能会破坏您的代码。如果您要验证您的 HTML 源代码，您可能已经看到了。所以首先验证（安装一个自动为您执行此操作的浏览器扩展程序）。

此外，您需要对*onclick*属性值进行 HTML 编码：

```
echo "<a onclick='save(", htmlspecialchars($data), ")' s [...]
                          ^^^^^^^^^^^^^^^^ 
```

[http://php.net/htmlspecialchars](http://php.net/htmlspecialchars)

# c# - 如何以编程方式验证页面中加载的用户控件？

> ID：16078154
> 
> 赞同：1
> 
> 时间：2013-04-18T08:34:46.193
> 
> 标签：c#, asp.net, validation, user-controls

我想问在以下情况下如何验证客户端和服务器端：

我有一个网页，我像这样以编程方式加载用户控件：

* * *

# 在 page_load 中：

```
 if (Request.QueryString["PageNew"] != null && !string.IsNullOrEmpty(Request.QueryString["PageNew"]))
            {
                page_new_name = Request.QueryString["PageNew"];
                ctrl = (MyBaseControl)LoadControl("UserControls/" + page_new_name);
            }

 if (ctrl != null)
            {
                pnl_PageNew_UC.Controls.Add(ctrl);
            } 
```

* * *

此页面包含一个`button(Confirm)`. 我希望这个按钮在确认之前验证我的用户控件中的一些控件，如何做到这一点，请解释一下？

# perl - There's "0 but true", but is there "42 but false" in perl?

> ID：16078156
> 
> 赞同：4
> 
> 时间：2013-04-18T08:35:03.527
> 
> 标签：perl, exit-code

As per the question. I know there's "0 but true" which is true in a boolean context but false otherwise, but can return something false in a boolean context but with a non-zero value (the obvious place for this is return statuses where 0 is success and anything else is an error).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T08:55:28.203

不。（除了双变量和重载对象的乐趣）

Perl 标量的真实性主要取决于字符串值。如果不存在字符串值，则将使用数字字段。

错误值是：`undef`、`""`、`0`，并通过首先测试字符串化来避免问题：`"0"`。

并非所有数值为零的东西都评估为 false:`"0E0"`是 true，因此更自我记录的`"0 but true"`. 后者是特殊情况以避免非数字警告。

但是，输入**dualvars**。标量的数字和字符串字段不必同步。常见的对偶`$!`变量是数字上下文中的 errno 变量，但错误字符串包含作为字符串的原因。因此，可以创建一个具有数值`42`和字符串 value的对偶变量`""`，其评估结果为 false。

```
use Scalar::Util qw/dualvar/;

my $x = dualvar 42, "";
say $x;   # empty string
say 0+$x; # force numeric: 42
say $x ? 1 : 0; # 0 
```

然后**重载对象**。以下类的实例将很好地字符串化，但在布尔上下文中仍会评估为*false ：*

```
package FalseString;
sub new {
  my ($class, $str) = @_;
  bless \$str => $class;
}
use overload
  '""'   => sub { ${shift()} },
  'bool' => sub { 0 }; 
```

测试：

```
my $s = FalseString->new("foo");
say $s;
say $s ? "true" : "false"; 
```

印刷

```
foo
false 
```

# c# - custom conversion from T to a MultilingualValue in JSON.Net

> ID：16078158
> 
> 赞同：0
> 
> 时间：2013-04-18T08:35:09.493
> 
> 标签：c#, json.net

I have a lot of entities which previously used to have properties of type for example `string`. I need to change these to a custom type - `MultilingualValue<T>`, where T in this case would be `string`. I can easily convert from `string` to the custom Type. Is it possible to configure JSON.Net such that everywhere it encounters a conversion from any type, to a `MultilingualValue<T>`, some custom code is called rather than it's native conversion?

Sample code

```
public class ProductBefore
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class ProductAfter
{
    public int Id { get; set; }
    public MultilingualValue<string> Name { get; set; }
} 
```

I would like to be able to deserialize anything which was stored as `ProductBefore`, into `ProductAfter` automatically. The `MultilingualValue<string>` can be initialised with a `string` parameter in the constructor, so it's relatively easy to create it from the original `string`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:31:59.027

可以通过添加 Custom `Converter`。这些可以按以下方式添加：

```
 private void createJsonSerializer()
    {
        JsonSerializerSettings settingsSerialize = new JsonSerializerSettings();

        settingsSerialize.Converters.Add(CustomConverter.Instance);

        _jsonSeriazlier = Newtonsoft.Json.JsonSerializer.Create(settingsSerialize);

    } 
```

以防万一它对任何人都有帮助，下面是自定义转换器本身：

```
 public class CustomConverter : JsonConverter
    {
        public CustomConverter()
        {

        }
        public override bool CanWrite
        {
            get { return false; }
        }

        private static readonly CustomConverter _instance = new CustomConverter();

        public static CustomConverter Instance
        {
            get { return _instance; }
        }
        public override bool CanConvert(Type objectType)
        {

            return (objectType.IsAssignableFrom(typeof(MultilingualValue<MultilingualValueMetaData<string>>)));

        }

           public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
           {
               MultilingualValue<MultilingualValueMetaData<string>> result = new MultilingualValue<MultilingualValueMetaData<string>>();
               JsonToken firstToken = reader.TokenType;
               reader.Read();//skip first Token
               while (reader.TokenType != JsonToken.EndObject)
               {
                   string languageType = (string) reader.Value;
                   reader.Read();
                   MultilingualValueMetaData<string> metaData = null;
                   if (reader.TokenType == JsonToken.StartObject)
                   {
                       metaData = serializer.Deserialize<MultilingualValueMetaData<string>>(reader);
                   }
                   else
                   {
                       metaData = new MultilingualValueMetaData<string>();
                       metaData.AutoTranslation = (string) reader.Value;

                   }
                   result[languageType] = metaData;
                   reader.Read();
               }
               return result;

           }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {

        }
    } 
```

# android - 创建未签名的android apk时Eclipse关闭

> ID：16078160
> 
> 赞同：0
> 
> 时间：2013-04-18T08:35:13.200
> 
> 标签：android, eclipse, apk, shutdown, unsigned

我被eclipse吓坏了，我可以生成一个未签名的apk。当我开始生成它时，看起来一切都很顺利，但在最后一刻应该完成生成 unsinged apk eclipse 突然关闭。

奇怪的是，在尝试几次后它会正确生成它，但我不能这样，每次都尝试和尝试。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:39:45.653

**在生成签名**的 APK时，我有时会遇到这个问题。这对我有用：取消选中“自动构建”（在我的项目菜单下，我在 iOS 上），清理项目，进行构建。

# javascript - 如何使 PhantomJS 截图尺寸与实际网页相对应？

> ID：16078161
> 
> 赞同：2
> 
> 时间：2013-04-18T08:35:18.863
> 
> 标签：javascript, dom, screenshot, phantomjs, dimensions

我正在使用 PhantomJS 从我的网页中截取屏幕截图。代码很简单

```
var page = require('webpage').create();
page.open('Target_Zone_Selection.html', function () {
    page.viewportSize = {width: 1024, height: 800};
    page.render('test.png');
    phantom.exit();
}); 
```

一切正常，但我想做的是使屏幕截图与实际网页相对应（如在具有准确视口大小的浏览器上看到的那样）。我的最终目标是获取鼠标位置并在屏幕截图上对应这个位置。

还有一个问题：网页大小与 PhantomJS 的渲染不同。我尝试了几种解决方案，例如通过 DOM 并获取每个偏移位置以查找屏幕截图的尺寸，但始终存在问题。此方法适用于宽度，但不适用于高度。

有人可以描述一种使网页和屏幕截图对应的方法吗？非常感谢 ！

更新：问题被发现：我的网页包含画布、按钮、文本表单和一些 html。一旦使用 PhantomJS 渲染，唯一不会给出相同大小的元素是按钮......并且按钮的呈现在浏览器之间也不同......

有什么建议可以预测按钮的渲染大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:14:16.463

您是在谈论移动设备的视口标签吗？像 PhantomJS 这样的“桌面”浏览器不支持视口。您需要查看支持移动浏览器的工具或服务（例如[https://browshot.com/](https://browshot.com/)）

# c# - Why I cannot set ANY value in IF condition?

> ID：16078162
> 
> 赞同：0
> 
> 时间：2013-04-18T08:35:28.870
> 
> 标签：c#, if-statement, default-value

I have 2 static variables like below

```
private static DateTime _currentPollStartDate = DateTime.MinValue; //As Default
private static DateTime _currentPollEndDate = DateTime.MinValue; //As Default 
```

In a method, I try to set the values:

```
public void ProcessItems()
{
    var Items = GetItems();

    //In here, it reaches inside
    if (Items.HasItems)
    {
        //Items[0].PollStartDate.HasValue is TRUE
        //I can NOT set either Items[0].PollStartDate.Value or DateTime.MaxValue
        _currentPollStartDate = Items[0].PollStartDate.HasValue ? Items[0].PollStartDate.Value : DateTime.MaxValue;

        //Items[0].PollEndDate.HasValue is TRUE
        //I can NOT set either Items[0].PollEndDate.Value or DateTime.MaxValue
        _currentPollEndDate = Items[0].PollEndDate.HasValue ? Items[0].PollEndDate.Value : DateTime.MaxValue;
    }

    //...
} 
```

But when I do this with `IF` I don't have the problem as stated above, why?

```
public void ProcessItems()
{
    var Items = GetItems();

    //In here, it reaches inside
    if (Items.HasItems)
    {
        if (Items[0].PollStartDate.HasValue)
            _currentPollStartDate = Items[0].PollStartDate.Value;
        if (Items[0].PollEndDate.HasValue)
            _currentPollEndDate = Items[0].PollEndDate.Value;
    }

    //...
} 
```

Also, when I declare the variables `not static` this also solves my problem **even though** I use it like in my **first** code. But why can't I use both `static` and `if statement` as in my first code?

Edit: Expected Value: something like _currentPollStartDate -> 2013-04-18 10:03:03

Result Value: _currentPollStartDate -> 0001-01-01 00:00:00 (This is not even MAX value)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:09:30.340

感谢肯金。根据他的最新评论，我想使用属性而不是简单的声明。所以代替下面的：

```
private static DateTime _currentPollStartDate = DateTime.MinValue; //As Default
private static DateTime _currentPollEndDate = DateTime.MinValue; //As Default 
```

我做了

```
private static DateTime CurrentPollStartDate { set; get; }
private static DateTime CurrentPollEndDate { set; get; } 
```

它奏效了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:42:41.863

static 的意思是“每个班级只有一次”。因此，您的类的所有实例都将使用您定义为静态的相同（按单词的确切含义）变量。要使您的代码正常工作，请使用：

```
YourClassName._currentPollStartDate = Items[0].PollStartDate.HasValue ? Items[0].PollStartDate.Value : DateTime.MaxValue; 
```

我不知道您是否真的希望所有民意调查的开始和结束日期都相同，这意味着最新的民意调查会更改所有旧民意调查的开始和结束日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:42:02.480

检查 and 的类型`Items[0].PollStartDate.Value`，`DateTime.MaxValue`当它们与三元运算符一起使用时，两个分支必须是相同的类型。

`bool`and `bool?`, or `int`and`int?`不是同一类型。

* * *

更新：

我毫无问题地声明了以下内容：

```
class MyClassName {
    private static DateTime _currentPollStartDate=DateTime.MinValue; //As Default
    private static DateTime _currentPollEndDate=DateTime.MinValue; //As Default

    public void ProcessItems() {
        var Items=GetItems();

        //In here, it reaches inside
        if(Items.HasItems) {
            //Items[0].PollStartDate.HasValue is TRUE
            //I can NOT set either Items[0].PollStartDate.Value or DateTime.MaxValue
            _currentPollStartDate=Items[0].PollStartDate.HasValue?Items[0].PollStartDate.Value:DateTime.MaxValue;

            //Items[0].PollEndDate.HasValue is TRUE
            //I can NOT set either Items[0].PollEndDate.Value or DateTime.MaxValue
            _currentPollEndDate=Items[0].PollEndDate.HasValue?Items[0].PollEndDate.Value:DateTime.MaxValue;
        }

        //...
    }

    public void _ProcessItems() {
        var Items=GetItems();

        //In here, it reaches inside
        if(Items.HasItems) {
            if(Items[0].PollStartDate.HasValue)
                _currentPollStartDate=Items[0].PollStartDate.Value;
            if(Items[0].PollEndDate.HasValue)
                _currentPollEndDate=Items[0].PollEndDate.Value;
        }

        //...
    }

    Items GetItems() {
        return new Items();
    }
}

class Items: List<Item> {
    public bool HasItems {
        get;
        set;
    }
}

class Item {
    public DateTime? PollStartDate {
        get;
        set;
    }

    public DateTime? PollEndDate {
        get;
        set;
    }
} 
```

# c# - 如何运行具有大量行的 SQL 文件？

> ID：16078165
> 
> 赞同：1
> 
> 时间：2013-04-18T08:35:50.837
> 
> 标签：c#, sql-server-2008

我有一个包含超过 10k 行代码的 SQL 文件（filenameScript）。每个 SQL 块都以 GO 开头，以 GO 结尾。从 C# 执行文件时，我在 GO 语句附近遇到异常。但是当我在 SQL Server 中运行相同的文件时，它工作正常。

```
con.ConnectionString = sqlconn;
FileInfo file = new FileInfo(filenameScript);
string script = file.OpenText().ReadToEnd();
SqlCommand command = new SqlCommand(script, con);
con.Open();
command.ExecuteNonQuery();
Close(); 
```

我认为`ExecuteNonQuerry`无法处理这么多`\n`, `\r`，并且`\t`由于读取的文件存储在单行中，`\n`并且有很多`\r`. 有没有其他方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:41:57.917

不，问题不在于文件的长度，也不在于`\r`和/或`\n`字符的存在。这是因为使用该方法执行 SQL 只能运行一个批处理，而具有`GO`语句的脚本会导致多个批处理。

一种可能性是拆分关键字上的文本`GO`并执行每个单独的部分：

```
con.ConnectionString = sqlconn;
var commands = File.ReadAllText(filenameScript).Split(new []{"GO"},StringSplitOption.RemoveEmptyEntries);
con.Open();
foreach(var batch in commands)
{
    SqlCommand command = new SqlCommand(batch, con);
    command.ExecuteNonQuery();
}
con.Close() 
```

此外，您可以将其包装在 a`Transaction`中以确保所有批次都以原子方式执行。

此 SO 问题中还提供了一种替代方法：[如何从 c# 执行大型 SQL 脚本（使用 GO 命令）](https://stackoverflow.com/questions/40814/how-do-i-execute-a-large-sql-script-with-go-commands-from-c)

# android - 使用 LocalServerSocket 时出现“IOException：再试一次”

> ID：16078173
> 
> 赞同：5
> 
> 时间：2013-04-18T08:36:04.047
> 
> 标签：android, localserversocket, localsocket

有没有人有关于例外“再试一次”的更多有用信息？

我正在使用`LocalServerSocket`and的应用程序之间发送位图`LocalSocket`：

输出：

```
socket = new LocalSocket();
socket.connect(new LocalSocketAddress(SOCKET_NAME));
fos = new DataOutputStream(socket.getOutputStream());
...

public void onEvent() {
    fos.writeInt(width);
    fos.writeInt(height);
    fos.writeInt(newBuffer.length);
    fos.write(newBuffer);
} 
```

输入：

```
server = new LocalServerSocket(SOCKET_NAME);
socket = server.accept(); 
socket.setSoTimeout(60);

while(true) {

    int width = fis.readInt(); // IO Exception being thrown here
    int height = fis.readInt(); 
    int length = fis.readInt();
    byte[] bytes = new byte[length];
    fis.read(bytes);
} 
```

[为清楚起见，删除了 try/catch 等]

```
04-18 09:19:11.664: W/System.err(1268): java.io.IOException: Try again
04-18 09:19:11.664: W/System.err(1268):     at android.net.LocalSocketImpl.readba_native(Native Method)
04-18 09:19:11.664: W/System.err(1268):     at android.net.LocalSocketImpl.access$400(LocalSocketImpl.java:29)
04-18 09:19:11.664: W/System.err(1268):     at android.net.LocalSocketImpl$SocketInputStream.read(LocalSocketImpl.java:92)
04-18 09:19:11.664: W/System.err(1268):     at libcore.io.Streams.readFully(Streams.java:81)
04-18 09:19:11.664: W/System.err(1268):     at java.io.DataInputStream.readInt(DataInputStream.java:124)
04-18 09:19:11.664: W/System.err(1268):     at com.test.util.BitmapSendingUtils$BitmapReceiver$1.run(BitmapSendingUtils.java:105) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T07:48:46.450

您看到的异常可能是等同于 EAGAIN 错误的 java。参见例如[这个答案](https://stackoverflow.com/a/4058377/1143003)。

您应该处理异常并再次尝试失败的 IO 操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T09:26:53.990

我已经重新设计了这个，因为我找不到解决方案。但是在以不同的方式实现它时，我在原始代码中遇到了这些错误：

```
byte[] bytes = new byte[length];
fis.read(bytes); 
```

应该：

```
byte[] content = new byte[length];
int read = is.read(content);
while(read < content.length) {
    read += is.read(content, read, content.length - read);
} 
```

因为`.read(byte[])`不会一下子吞下整个东西。我假设它这样做时会不断地啜饮和阻塞。

还有这个：

```
socket.setSoTimeout(60); 
```

arg 以毫秒而不是秒为单位，因此应该是：

```
socket.setSoTimeout(60 * 1000); 
```

**我仍然不知道上述名称错误的异常的原因，所以希望有人知道的话仍然会回答这个问题！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T03:10:57.797

尝试作为流，使用mInputValid控制是否结束流：

```
private int fill(byte[] buffer, int offset,int length) throws IOException {
    int sum = 0, len;
    while ((sum<length) && mInputValid) {
        try{
            len = is.read(buffer, offset + sum, length - sum);
            if (len < 0) {
                throw new IOException("End of stream");
            } else{
                sum += len;
                Log.i(TAG, "is.read: " + len + " buffer:" + buffer[0]);
            }
        }
        catch (IOException e){
            e.printStackTrace();
            Log.i(TAG, "read input fail, try again");
            continue;
        }
    }
    return sum;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T15:19:50.430

我认为“再试一次” IOException 实际上应该以与处理 SocketTimeoutException 相同的方式处理。这是一个实现得很糟糕的 API，但我们已经习惯了 Android 上这种蹩脚的设计：

```
private int read(byte[] buffer) throws IOException {

    while (true) {
        try {
            return fis.read(buffer);
        } catch (SocketTimeoutException e) {
            continue;
        } catch (IOException e) {
            String message = e.getMessage();
            if (message != null && message.equals("Try again")) {
                continue;
            }
            throw e;
        }
    }
}

private int readInt() throws IOException {
    while (true) {
        try {
            return fis.readInt();
        } catch (SocketTimeoutException e) {
            continue;
        } catch (IOException e) {
            String message = e.getMessage();
            if (message != null && message.equals("Try again")) {
                continue;
            }
            throw e;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-22T19:41:14.753

我知道我迟到了，但我刚刚解决了同样的问题，有很多事情会导致这个：

1.  不要求`outputStream.flush()`发送。如果你使用作家，它是`writer.flush()`. 这将发送最后一个缓冲区。如果您不使用缓冲区，这并不意味着它们不存在。流以字节为单位发送数据，因此除非您发送单个字节，否则可能会有一些缓冲区未发送，并且接收器会获得半个 int。
2.  如果您保持流打开，则无法检测到流的结束：因此，如果您尝试执行类似`reader.read(buffer)`, 当大小`buffer`超过发送的数据量时，Java 将引发异常。在这种情况下，您必须实现某种 prototocle（标头告诉长度或某种结束标记，以知道何时停止阅读）。
3.  如果您在发送消息和调用后关闭流`output.flush()`，则此异常可能是由您的意思引起的：套接字超时以及断开连接。

# python - 字符串连接性能

> ID：16078177
> 
> 赞同：2
> 
> 时间：2013-04-18T08:36:25.157
> 
> 标签：python, string-concatenation

现在我使用一个列表来存储更改的字符串并使用 .join() 返回一个字符串

```
def applyCoder(text, coder):
    l = []
    for i in text:
        if i in coder:
            l.append(coder[i])
        else:
            l.append(i)
    return ''.join(l)

# example output, shifts all letters by 3 in a string
# print applyCoder("Hello, world!", buildCoder(3))
# buildCoder(3) returns dictionary, e.g. {'A': 'D', ...}
# >>> Khoor, zruog! 
```

是否有更快的方法来更改和返回字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:37:59.213

这应该尽可能快：

```
''.join([coder[i] if i in coder else i for i in text]) 
```

`for`与承受巨大开销的循环相比，Python 中的列表推导得到了更好的优化。我已经通过了列表理解而不是生成器，`''.join`因为它必须在加入之前提前知道输入的长度。如果你给它一个生成器，它无论如何都必须把它变成一个列表（这有点慢）。

实际上，您可以进一步简化它，~~这*应该*更快~~ （**由于方法调用，这实际上比上述方法执行得慢**）

```
''.join([coder.get(i,i) for i in text]) 
```

时间：

```
def applyCoder(text, coder):
    L = []
    for i in text:
        if i in coder:
            L.append(coder[i])
        else:
            L.append(i)
    return ''.join(L)

def list_comp(text, coder):
    return ''.join([coder[i] if i in coder else i for i in text])

def list_comp2(text, coder):
    return ''.join([coder.get(i,i) for i in text])

from timeit import timeit
from string import ascii_letters
d = dict(zip(ascii_letters, ascii_letters[3:] + ascii_letters[-3:]))

print timeit(stmt='applyCoder("Hello, world!", d)',
             setup='from __main__ import applyCoder, d;')

print timeit(stmt='list_comp("Hello, world!", d)',
             setup='from __main__ import list_comp, d;')    

print timeit(stmt='list_comp2("Hello, world!", d)',
             setup='from __main__ import list_comp2, d;')

print timeit(stmt='applyCoder("Hello, world!"*10, d)',
             setup='from __main__ import applyCoder, d;')

print timeit(stmt='list_comp("Hello, world!"*10, d)',
             setup='from __main__ import list_comp, d;')

print timeit(stmt='list_comp2("Hello, world!"*10, d)',
             setup='from __main__ import list_comp2, d;') 
```

结果：

```
''' Test 1 '''
5.0159105417    # applyCoder
3.41502481461   # listcomp1
4.76796932292   # listcomp2

''' Test 2 '''
34.9718502631   # applyCoder
22.0451702661   # listcomp1
34.1682597928   # listcomp2 
```

似乎该方法调用`coder.get`完全否定了列表理解的优点。我确实预测它可能会因此而变慢`listcomp1`，但我认为它不会产生如此大的影响。无论如何，列表理解仍然获胜。

**更新：** 如果你`list_comp2`这样修改：

```
def list_comp2(text, coder):
    coder_get = coder.get
    return ''.join([coder_get(i,i) for i in text]) 
```

时代进步很大：

从`4.76796932292`（第一次测试）->`3.95217394948`

和`34.1682597928`（第二次测试）->`27.1162974624`

# security - Hadoop 上的 Kerberos

> ID：16078181
> 
> 赞同：1
> 
> 时间：2013-04-18T08:36:29.960
> 
> 标签：security, hadoop, kerberos

我有一个 Apache Hadoop (1.0.4) 集群正在运行。我现在正在尝试通过向集群添加 Kerberos 来实现集群的安全性。我有一个独立运行的 Kerberos KDC。有什么文件可以用来链接这两者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:27:46.690

您可以参考[CDH4 安全指南](http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH4/4.2.0/CDH4-Security-Guide/cdh4sg_topic_3.html)了解详细步骤。

# php - 尽管存在于数组中，但未显示 Cake PHP 验证错误

> ID：16078182
> 
> 赞同：-2
> 
> 时间：2013-04-18T08:36:30.500
> 
> 标签：php, cakephp, validation

在模型中调用验证函数遇到问题后，我尝试从控制器进行验证。这很好用，除了一个值错误的字段没有显示为红色并且没有显示错误消息。

传递给视图的“validationErrors”数组如下所示：

```
array(
'CITY' => array(
    (int) 0 => 'Bitte eine Stadt angeben'
),
'CART' => array(
    (int) 0 => 'Bitte etwas eingeben'
),
'DATE' => array(
    (int) 0 => 'Bitte das Datum eingeben'
),
'TIME' => array(
    (int) 0 => 'Bitte die Zeit eingeben'
),
'INCOME' => array(
    (int) 0 => 'Bitte das Trinkgeld in Euro angeben'
),
'DELIVERYAREA' => array(
    (int) 0 => 'Postleitzahl existiert nicht!'
)
) 
```

“DELIVERYAREA”是使用以下代码动态内置的：

```
//form errors formatieren für plz-validierung
            $this->Post->set($this->request->data['Post']);
            $this->Post->validates();
            $errors = $this->Post->validationErrors + $this->Zipcode->validationErrors;

            //in $errors die keys ZIPCODE und DELIVERYAREA anlegen und zipcode löschen
            if ($this->request->data['Post']['B/S'] == 'S' && !isset($errors['ZIPCODE'])) {
                $errors['ZIPCODE'] = $errors['zipcode'];
            };
            if ($this->request->data['Post']['B/S'] == 'B' && !isset($errors['DELIVERYAREA'])) {
                $errors['DELIVERYAREA'] = $errors['zipcode'];
            };
            unset($errors['zipcode']);
            debug($errors);
            $this->set('validationErrors', $errors); 
```

问题是，除了 DELIVERYAREA 之外，所有字段都显示为红色，并带有特定的消息 - 我觉得很奇怪......提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:17:14.450

我找到了解决方案。我回来在更一致的 appmodel 中进行验证。

Cake 希望自定义验证规则位于调用该规则的特定类中。因此，当您在课堂帖子中调用自定义规则时，必须将自定义函数写在课堂帖子中，否则 cake 不会找到它并每次都将其验证为 false。

这里要做的魔术是在你调用验证函数的类中导入你想要使用的 appmodel-class。这适用于以下语句：

$Zipcode = ClassRegistry::init('Class to use - 在我的例子中是 "Zipcode"');

但是，如果您的表通过 hasAny 或 belongsTo 等相互关联，则自定义函数在没有这些的情况下也可以工作。您不能错过的另一个重要点是，所有验证功能都必须使用“公共功能 xyz”引入，否则蛋糕也找不到它们。

# c - 为什么 getppid() 从孩子返回 1

> ID：16078188
> 
> 赞同：14
> 
> 时间：2013-04-18T08:36:52.987
> 
> 标签：c, linux, process, fork

我正在运行程序

```
#include<stdio.h>
#include <unistd.h>
main()
{
    pid_t pid, ppid;
    printf("Hello World1\n");
    pid=fork();
    if(pid==0)
    {
        printf("I am the child\n");
        printf("The PID of child is %d\n",getpid());
        printf("The PID of parent of child is %d\n",getppid());
    }
    else
    {
        printf("I am the parent\n");
        printf("The PID of parent is %d\n",getpid());
        printf("The PID of parent of parent is %d\n",getppid());        
    }
} 
```

我得到的输出是。

```
$ ./a.out 
Hello World1
I am the parent
The PID of parent is 3071
The PID of parent of parent is 2456
I am the child
The PID of child is 3072
The PID of parent of child is 1 
```

我无法理解这条线

> 孩子的父母的PID是1

应该是3071吧？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T08:45:02.010

因为父进程在子进程请求其父进程的 pid 时完成。

当一个进程完成时，它的所有子进程都被重新分配为 init 进程的子进程，pid 为 1。

尝试[`wait()`](http://linux.die.net/man/2/wait)在父代码中使用以等待子代码执行。然后它应该按您的预期工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-21T03:16:56.363

pid 1 用于初始化进程，看起来父进程在子进程打印之前完成。

如果您像这样编辑 else 部分：-

```
else
    {
        printf("I am the parent\n");
        printf("The PID of parent is %d\n",getpid());
        printf("The PID of parent of parent is %d\n",getppid());   
        while(1);
    } 
```

您应该看到正确的输出。

# c++ - c ++ fstream不打印像ρ和Δ这样的符号来正确归档

> ID：16078198
> 
> 赞同：1
> 
> 时间：2013-04-18T08:37:31.650
> 
> 标签：c++, windows, fstream

使用 fstream 将这些符号打印到文件时，我得到了一个混乱的结果。使用：

```
file << "Δ" << endl; 
```

这在 Linux 中运行良好，但是当我为 Windows 编译它时它不起作用。

有没有一种特定的方法可以在 Windows 中进行这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:56:15.693

以下应该适用于 MSVC2010。使用[std::codecvt_utf8_utf16](http://en.cppreference.com/w/cpp/locale/codecvt_utf8_utf16)将宽字符转换为 UTF-8 字节流：

```
#include <fstream>
#include <codecvt>
int main() 
{
    std::wofstream file("myfile", std::ios::out | std::ios::binary);
    file.imbue(std::locale(file.getloc(), new std::codecvt_utf8_utf16<wchar_t>));

    file << L"Δ" << std::endl;
} 
```

# epoll - 是否可以检查某些 fd 是否属于 epoll 集？

> ID：16078199
> 
> 赞同：2
> 
> 时间：2013-04-18T08:37:32.847
> 
> 标签：epoll

假设我已经构建了一个epoll set，是否有可能找出某个fd是否属于这个epoll set？是否有可能从这个 epoll 集合中找出某个 fd 感兴趣的事件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:55:48.533

将 epoll_ctl 与您想通过 op 参数 EPOLL_CTL_ADD 检查的 fd 一起使用。如果 fd 已经注册，则注册将失败，并且分配了 EEXIST 的 errno。

如果注册成功，则它是 epoll 集合的一部分，因此使用带有 op 参数 EPOLL_CTL_DEL 的 epoll_ctl 立即将其从集合中删除，以便集合保持不变。

如果您可以为您的问题添加更多上下文，那么也许我们可以提出更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:41:04.210

您可以`epoll_ctl`与文件描述符一起使用，如果文件描述符不是集合的一部分，epoll 将返回错误：`EBADF`

# javascript - 清除闭包中的内存引用

> ID：16078203
> 
> 赞同：0
> 
> 时间：2013-04-18T08:37:49.163
> 
> 标签：javascript, jquery

我有一个关于闭包如何与垃圾收集相关的问题。我创建了一个 javascript 应用程序，它似乎在不断添加在我创建新项目时没有被清理的对象。在我的代码中，应用程序清除了对新创建对象的所有引用，我确保取消绑定所有事件并释放它们。但是，当我查看 chrome 堆分析器时，我看到的是：

![在此处输入图像描述](https://i.stack.imgur.com/AmFH9.png)

当我单击对象的引用时，我可以看到 jQuery 代理函数中有指向对象的指针。（特别是变量“上下文”）

从我所见，代理函数创建了一个闭包，并且该闭包在构造时具有对视口的引用。这就是我在 Viewport3D 中使用代理的方式：

```
//in constructor of Viewport3D
this.keydownProxy = jQuery.proxy( this.onKeyDown, this );
jQuery(document).on( "keydown", this.keydownProxy ); 
```

...

```
//In dispose method of viewport
jQuery(document).off( "keydown", this.keydownProxy );
this.keydownProxy = null; 
```

如您所见，我正在删除事件并取消存在闭包引用的代理。

那么为什么即使在事件被删除并且代理无效之后 viewport3d 仍然存在于内存中，我知道它的那部分代码，因为当我注释掉所有创建的代理时，该类被完全垃圾收集。

如果它是因为在其他地方有一个松散的指针保持它活着，有没有其他方法可以让我看到它在 Chrome 中来自哪里？

感谢您提供的任何指导。

# c# - TransactionSearch 的 PayPal Web 服务不遵守 StartDate/EndDate

> ID：16078206
> 
> 赞同：0
> 
> 时间：2013-04-18T08:37:55.260
> 
> 标签：c#, paypal

我正在努力调用 PayPal 的 Web 服务来执行 TransactionSearch，如下所示：

```
AccountType accountType = AccountType.Live;
tblPayPalAccount account = PayPalAPICallHelperSOAP.GetAccount(accountType);
DateTime endDate = new DateTime(2012, 1, 1);
DateTime startDate = new DateTime(2012, 12, 31);

using (PayPalAPIInterfaceClient client = new PayPalAPIInterfaceClient())
{
    client.Endpoint.Address = new System.ServiceModel.EndpointAddress("https://api-3t.paypal.com/2.0");
    UserIdPasswordType userIdPasswordType = PayPalAPICallHelperSOAP.GetUserIdPasswordType(account);
    CustomSecurityHeaderType header = new CustomSecurityHeaderType();
    header.Credentials = userIdPasswordType;

    TransactionSearchReq request = new TransactionSearchReq();

    request.TransactionSearchRequest = new TransactionSearchRequestType();

    request.TransactionSearchRequest.Version = account.version;
    request.TransactionSearchRequest.StartDate = startDate;

    request.TransactionSearchRequest.EndDate = endDate;

    TransactionSearchResponseType transactionSearchResponseType = client.TransactionSearch(ref header, request);
} 
```

从今天开始，我总是得到 67 个结果，无论我传递给 StartDate/EndDate 什么值（在这种情况下是 2012 年，但我只得到最近几周的值）

我错过了什么吗？这真的让我困扰了很长一段时间，无论我设置什么，结果总是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T15:15:30.060

```
request.TransactionSearchRequest.EndDateSpecified = true; 
```

告诉网络服务结束日期已设置。这解决了你的问题。不知道为什么需要它。

# android - 线程内的媒体记录器启动失败 22

> ID：16078209
> 
> 赞同：1
> 
> 时间：2013-04-18T08:38:02.243
> 
> 标签：android, multithreading, mediarecorder, android-audiorecord

嗨，我正在尝试制作一个录像机 Android 应用程序>出于某种原因，我需要获取它的音频，我尝试了一些库，但没有真正提取我的音频。所以现在我的方法是，我可以分别录制视频和音频，而不是使用本机库吗？主线程录制视频，另一个线程录制音频。当我在线程内调用媒体记录器类的 start() 方法时出现错误，我得到 Start Failed -2​​2。以下是我的代码。

```
public class MainActivity extends Activity {

 private SurfaceHolder surfaceHolder;
    private SurfaceView surfaceView;
    public MediaRecorder mrec ;
    ImageView recordingBt;
    public MediaRecorder mrec2 = new MediaRecorder();
    File video;
    private Camera mCamera;
    File audiofile = null;

    File audiofile2 = null;
    boolean recording=false;
    TextView tv;
    View myview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    recordingBt= (ImageView) findViewById(R.id.camera);
    surfaceView = (SurfaceView) findViewById(R.id.surface_camera);
    tv=(TextView) findViewById(R.id.textView1);

     myview = findViewById(R.id.MyBigView);
}

@Override
protected void onStart(){
    super.onStart();
    Log.i("Recording Activity", "we are inside Start function of Recording Activity");

    Log.i("Recording Activity", "Opening camera");

     mCamera = Camera.open();

     Log.i("Recording Activity", "Camera Opened");
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        recordingBt.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                if(recording==false){
                    try {
                        Log.i("Recording Activity", "Recording Start");
                        startRecording();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                else{
                    stopRecording();

                }

            }
        });}
public void startRecording() throws IOException 
    {

        recording=true;
        String path= Environment.getExternalStorageDirectory().toString();
        File sampleDir = new File(path+"/DCIM/Squlium Booth");
        sampleDir.mkdir();

         Log.i("Setting Path", sampleDir.toString());

            try {
              audiofile = File.createTempFile("SqB", ".3gp", sampleDir);
            } catch (IOException e) {

              return;}
            Log.i("Recording Activity", "Seting Media Recorder attributes");   
        mrec = new MediaRecorder();  // Works well

        mCamera.unlock();
        mrec.setCamera(mCamera);
    mrec.setPreviewDisplay(surfaceHolder.getSurface());
     mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
         mrec.setAudioSource(MediaRecorder.AudioSource.MIC);
         mrec.setMaxDuration(60000);
        mrec.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
        mrec.setOutputFile(audiofile.getAbsolutePath()); 
        mrec.prepare();
        mrec.start();
        startProgress(myview);

    }

 protected void stopRecording() {
     recording=false;
        mrec.stop();
        mrec.release();
        mCamera.lock();
        mCamera.release();
        mrec2.stop();
        mrec.release();

    }
 public void startProgress(View view) {
        // Do something long
        Runnable runnable = new Runnable() {

          @Override
          public void run() {

                String path= Environment.getExternalStorageDirectory().toString();
                File sampleDir = new File(path+"/DCIM/Squlium Booth");
                sampleDir.mkdir();
                try {
                      audiofile2 = File.createTempFile("myAudio", ".mp3", sampleDir);
                    } catch (IOException e) {

                      return;}

                int minBufferSize = AudioRecord.getMinBufferSize(8000, 
                         AudioFormat .CHANNEL_IN_MONO, 
                         AudioFormat.ENCODING_PCM_16BIT);

                mrec2.setAudioSource(MediaRecorder.AudioSource.MIC);

                mrec2.setAudioSamplingRate(16000);
                mrec2.setOutputFormat(MediaRecorder.OutputFormat.AMR_NB);
                mrec2.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                mrec2.setOutputFile(audiofile2.getAbsolutePath()); 
                try {
                    mrec2.prepare();
                } catch (IllegalStateException e1) {
                    Log.i("Illegal", "Exception");
                    e1.printStackTrace();
                } catch (IOException e1) {
                    Log.i("Iinput output", "Exception");
                }
                Log.i("Inside Run Method", "Starting Thread soon there will be issue");
                mrec2.start();
                Log.i("Inside Run Method", "After start method inside thread");
              Log.i("Inside Thread", "Alive");

            }

        };
        new Thread(runnable).start();

 } 
```

# iphone - 远程清除 iOS 应用程序

> ID：16078212
> 
> 赞同：3
> 
> 时间：2013-04-18T08:38:07.277
> 
> 标签：iphone, ios, apple-push-notifications, mdm

我开发了一个 iPad 应用程序，并将该应用程序分发给我的客户。现在我的客户问如果他们的 iPad 丢失或被盗会发生什么。我的 iPad 应用程序包含非常敏感的数据。因此，如果 iPad 被盗或丢失，他们需要远程清除。我找到了两个解决方案。一种是使用相同的苹果帐户在每个 iPad 中配置“查找我的 iPad”。第二个是使用推送通知配置 MDM 服务器。

如果我要配置 MDM 服务器，我需要联系支持苹果推送通知服务的第三方供应商，或者我需要购买 Lion Server 并配置配置文件管理器。

有人可以告诉我什么是实施的最佳解决方案以及这两个选项的优缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:28:55.183

推送通知在这里对您没有帮助 - 它们只会向用户弹出一条消息，您无法通过它们影响应用程序。

可能的解决方案：

*   **使用用户名/密码保护您的应用程序**：每个用户都应选择用户名和密码，将其存储在钥匙串中并检查应用程序启动。当然，在将数据存储到设备时，您还应该使用密码对所有数据进行加密。

*   如上所述，实现一个**服务器请求，它获取已安装应用程序的唯一 ID**（当然，您必须在第一次应用程序启动时先创建一个），**返回应用程序是否被报告为被盗**，然后不执行任何操作或全部删除数据。我会小心删除，以防万一您的实现中出现错误并且您清除了“正常”应用程序的数据。同样在这种情况下，我会加密存储到设备中的任何敏感数据。当然，当应用程序离线时，此解决方案也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:42:46.780

只需创建一个 Web 服务并从服务器获取响应，并在获得响应后运行您的应用程序，否则会终止。

```
if(stolen)
exit(0);
else
run 
```

# f# - 在 F# 中扩展 Core.Option 模块

> ID：16078213
> 
> 赞同：8
> 
> 时间：2013-04-18T08:38:07.217
> 
> 标签：f#

我想扩展现有的“核心”模块之一，例如`Core.Option`：

```
module Microsoft.FSharp.Core.Option

    let filter predicate op =
        match op with
        | Some(v) -> if predicate(v) then Some(v) else None
        | None -> None 
```

（我知道`bind`函数，但我认为`filter`在某些情况下选项的方法更方便）。

`filter`但不幸的是，如果没有明确打开命名空间，我就无法使用方法`Microsoft.FSharp.Core`：

```
// Commenting following line will break the code!
open Microsoft.FSharp.Core

let v1 = Some 42
let v2 = v1 |> Option.filter (fun v -> v > 40)

printfn "v2 is: %A" v2 
```

在大多数情况下，如果不打开适当的命名空间，我们就无法使用模块中的函数。F# 编译器自动“打开”一些预定义（核心）命名空间（如`Microsoft.FSharp.Core`），这不会将“模块扩展”中的方法引入范围，我们仍然应该手动打开核心命名空间。

**我的问题是：有什么解决方法吗？**

或者扩展“核心”模块的最好方法是在自定义命名空间中创建这样的扩展并手动打开这个命名空间？

```
// Lets custom Option module in our custom namespace
module CustomNamespace.Option

    let filter predicate op = ...

// On the client side lets open our custom namespace.
// After that we can use both Option modules simultaneously!
open CustomNamespace

let v1 = Some 42
let b = 
    v1 |> Option.filter (fun v -> v > 40) // using CustomNamespace.Option
    |> Option.isSome // using Microsoft.FSharp.Core.Option 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T12:05:30.783

对于生产代码，我会按照 Taha 的回答建议：创建您自己的模块并根据需要打开/为其设置别名。作为程序员，你一生的大部分时间都花在阅读代码上。在不清楚方法来自何处的 F# 代码中，阅读 F# 代码可能会非常令人沮丧。

话虽如此，我惊讶地发现这有效：

```
namespace Microsoft.FSharp.Core

module Option =

    let filter predicate op =
        match op with
        | Some(v) -> if predicate(v) then Some(v) else None
        | None -> None

namespace USERCODE

module Option = Microsoft.FSharp.Core.Option

module M =

    let test () =
        Some 1
        |> Option.filter (fun x -> x > 0)
        |> Option.map (fun x -> x + 1) 
```

它并没有消除在文件头部写入内容的需要，但它确实解决了需要打开命名空间的问题。不相关，`Microsoft.FSharp.Core`因为默认情况下它总是打开的，但对其他命名空间很有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T09:46:46.980

如果将 AutoOpen 属性添加到模块有帮助吗？

```
[<AutoOpen>]
module Microsoft.FSharp.Core.Option

    let filter predicate op =
        match op with
        | Some(v) -> if predicate(v) then Some(v) else None
        | None -> None 
```

*编辑*

这有效，但只能跨越程序集边界。它在同一个程序集中不起作用：

```
namespace Microsoft.FSharp.Core
module Option =
    let filter predicate op =
        match op with
        | Some(v) -> if predicate(v) then Some(v) else None
        | None -> None

[<assembly:AutoOpen("Microsoft.FSharp.Core")>]
do () 
```

要从另一个程序集中调用它：

```
[<EntryPoint>]
let main args = 
    let f () = Some "" |> Option.filter (fun f -> true)
    Console.WriteLine("Hello world!")
    0 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-18T09:03:09.407

为了扩展 F# 模块，请创建另一个具有相同名称的模块：

```
module Option =

    let filter predicate op =
        match op with
        | Some v  -> match predicate v with true -> Some v | false -> None
        | None    -> None

let v1 = Some 42
let v2 = v1 |> Option.filter (fun v -> v > 40)

printfn "v2 is: %A" v2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-04T20:18:45.827

根据[文档](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/type-extensions)，这样的东西应该可以扩展类型。但是我一定有什么问题，因为它不会编译并给出。以下错误：

> 此类型扩展的一个或多个声明的类型参数缺少或错误的类型约束与 'Option<_>'F# Compiler (957) 上的原始类型约束不匹配

```
open System.Runtime.CompilerServices

[<Extension>]
type Option with
    [<Extension>]
    static member fromBool predicate word =
        if predicate word
        then Some word
        else None 
```

这不是一个有效的答案，而是原始问题的附录。不确定是否值得打开一个新线程？

# html - 单页固定视口

> ID：16078216
> 
> 赞同：1
> 
> 时间：2013-04-18T08:38:20.557
> 
> 标签：html, css

我目前正在制作一个单页滚动垂直站点，该站点的视口锁定在 100% 高度。

我遇到的问题是，给我的设计是针对 1200x800（macbook 13"）视图计算的，但我使用的是 1920x1080（macmini）分辨率。

此外，每个屏幕中的可用高度区域受到浏览器使用的每个小部件的限制，因此 800 实际上可能是例如 638 高度（在 ipad 中更深，其中 768 浏览器高度根本不是 768）。此外，设计必须以宽度和高度为中心。对于**width**，我可以使用`margin:0 auto`，但 height 比较棘手，因为它需要将 div 设为绝对值。

到目前为止，我所做的是使一个 div 绝对并由 javascript 操作，但我想知道***是否有一种纯 css 方式来做到这一点，***因为 javascript 需要很多案例和多余的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:45:53.943

这就是我使用的身体高度和 html 高度为 100%

```
<div style=" display:table;width:100%;height:100%">
    <div style="display:table-cell;vertical-align:middle;">

    </div>
</div> 
```

# python - gdata BadAuthenticationServiceURL 错误

> ID：16078217
> 
> 赞同：1
> 
> 时间：2013-04-18T08:38:30.730
> 
> 标签：python, gdata, gdata-api

我一直在使用[一个使用 gdata 的简单脚本](https://code.google.com/p/youtube-upload)。`gdata.service.BadAuthenticationServiceURL: Server responded with a 302 code`最近，在没有挑衅的情况下，它在标准登录尝试期间开始失败。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:03:13.570

经过大量调查，事实证明升级到最新`gdata`软件包为我解决了这个问题。

# java - 请告知我无法创建名称为“con”的组的原因

> ID：16078218
> 
> 赞同：5
> 
> 时间：2013-04-18T08:38:34.483
> 
> 标签：java, rest

请告知我无法在 RESTXpress 中创建名称为“con”的组的原因。你能看看这个问题吗？环境：Windows7、tomcat 7、jdk 6

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T08:39:59.203

在 Windows 上，您不能创建名为“con”、“prn”、“aux”的文件和一些其他保留字，这会阻止 RESTXPress 创建相关文件夹。

请参阅[Microsoft 的相关说明](http://support.microsoft.com/kb/74496/en-us)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T08:42:58.970

RESTXpress 将组存储在单独的文件夹中（组名与文件夹名匹配）。但是 Windows 不允许创建具有“系统操作”或“设备”引用的文件夹名称，例如 con、nul 和 prn。解决方案是使用另一个名称或使用 0 代替 o,O 来表示 C0n。以下是其他：CON、PRN、AUX、CLOCK$、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、LPT6、LPT7、LPT8、LPT9

这是已知的错误，他们承诺在下一个版本中修复它。

# oracle11g - 需要指针 | 使用 JDBCTemplate | CQ 5.5

> ID：16078229
> 
> 赞同：0
> 
> 时间：2013-04-18T08:39:22.220
> 
> 标签：oracle11g, osgi, jdbctemplate, aem, osgi-bundle

我需要一些关于以下场景的指示/建议。

**设想：**

我们正在尝试使用`JDBCTemplate`in`CQ 5.5`来查询数据库 ( `Oracle 11g`)。作为第一步，我们有`integrated CQ with Spring Framework`. 现在要让 JDBCTemplate 工作，它`requires JDBC driver`需要单独加载到 CQ 中，因为 Spring jar 不提供它。所需的 jar 可在此处获得[http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html) ，在我的情况下 jar 是“<code>ojdbc6.jar”，其中包含`OracleDriver`类( **JavaDoc** : * [http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/jdbc/OracleDriver.html](http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/jdbc/OracleDriver.html) *) 需要注册驱动程序以创建与数据库的连接。

**以下几点需要的问题/建议：**

1.  由于 oracle 11g 是商业产品，因此没有可用的在线存储库（用于 pom 依赖项），我们需要为它创建一个单独的本地存储库。（**需要指针；还有其他方法吗？**）
2.  上面提到的 Jar 不是 OSGi。**那么在这种情况下如何处理呢？**（我按照此处提到的说明创建了 OSGi 包*[http://cq-ops.tumblr.com/post/21893960212/how-to-turn-a-jdbc-driver-jar-into-an-osgi-bundle-jar](http://cq-ops.tumblr.com/post/21893960212/how-to-turn-a-jdbc-driver-jar-into-an-osgi-bundle-jar)* )
3.  在将此 jar 转换为 OSGi Bundle 的过程中，我必须删除 MANIFEST.MF 文件中的 Imported Packages 中提到的版本。（据我了解，默认情况下 CQ 会选择可用于任何类的最新版本，当任何类的新版本与当前版本不兼容时，可能会出现问题。**需要指针；是否应该优先考虑？有没有人在任何项目中遇到过任何问题**）

**当前状态：**

通过将 ojdbc5.jar 转换为 OSGi 包；我能够使用 JDBCTemplate。**但是寻找一些指针来检查是否有人在其他项目中遵循了其他方法来实现上述场景？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:38:33.763

1.  oracle 驱动程序未发布到任何公共 maven 存储库。所以确实你必须把罐子放进你自己的maven repo

2.  在 Apache Karaf 中有一个不错的功能，您可以在其中编写 wrap: 在包 url 前面，它会使用 bnd 工具自动动态创建包。如果 CQ 没有这样的功能，那么您将不得不自己创建捆绑包。在这种情况下，maven bundle 插件可以帮助你。您可以使用 maven 依赖项来依赖 oracle jar。然后您可以为 oracle jar 的包定义导出。然后，Bnd 应该会自动内联捆绑 jar 中的类。另一种选择是 maven shade 插件。您可以查看 servicemix 捆绑包的来源。在那里你可以找到捆绑许多普通罐子的 pom。

3.  不知道你到底是什么意思。据我所知，oracle 驱动程序没有任何外部依赖项。

我[为 Apache Karaf 编写了一个 DB 教程](http://liquid-reality.de/display/liquid/2012/01/13/Apache+Karaf+Tutorial+Part+6+-+Database+Access)，解释了如何处理 oracle 驱动程序以及如何在不依赖具体驱动程序的情况下创建数据源。

教程中的解决方案不能1:1在CQ中使用，但一定会给你一些指点。

# jquery - Wordpress 中过时的 jQuery 版本

> ID：16078231
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:39:29.153
> 
> 标签：jquery, wordpress, fancybox

我在 wordpress 中有一个插件（easy-fancy-box），我认为它是在我的 wp 标题中添加的。 `<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js?ver=1.6.4'></script>`

这个版本已经过时并且阻止我使用较新版本的jquery，（如果我添加jquery 1.8 版，那么fancy box 插件会失败。有没有办法更新easy-fancy-box 使用的版本？

我已尝试在所有插件文件中搜索此内容，但无法找到将其更改为较新版本的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:17:22.177

首先，[Wordpress 无论如何都会加载最新版本的 JQuery](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/)，因此您最好完全删除过时的版本，而不是更新。

其次，假设 JQuery 以推荐的方式入*队*，您可以使用 WP 的`wp_dequeue_script`功能将其出队，您可以[在此处阅读。](http://codex.wordpress.org/Function_Reference/wp_dequeue_script)您将需要知道在脚本最初入队时分配给脚本的*句柄，以便将其删除。*

这里的问题是我不确定 Easy Fancy 盒子是否是您应该查看的插件；我已经快速浏览了它的文件，但我没有发现它在 JQuery 中排队的任何实例。所以你的嫌疑人可能是一个不同的插件。查看您的其他插件并留意任何`wp_register_script`指向 JQuery V1.6.4 的实例。找到罪魁祸首后，您可以注释掉相关的`wp_register_script`and`wp_enqueue_script`行，**我不建议这样做，** *或者*您可以在自己的文件 中使用`wp_dequeue_script`and函数。`wp_deregister_script``functions.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:27:42.470

您确定不是您或其他插件添加了 jQuery 吗？

我刚刚查看了您链接到的插件，它只是调用了您在 WordPress 中注册的 jQuery。

示例第 402 行`easy-fancybox.php`：

```
wp_enqueue_script('jquery.fancybox', plugins_url(FANCYBOX_SUBDIR.'/fancybox/jquery.fancybox-'.FANCYBOX_VERSION.'.pack.js', __FILE__), array('jquery'), FANCYBOX_VERSION); 
```

jQuery 在其中作为依赖项加载。

如果您取消注册 jQuery（使用`wp_deregister_script('jquery')`）并再次注册以使用 Google 的 CDN，请查看您的主题。

# c# - 兼容 dotnet 3.5 和 dotnet 4.0

> ID：16078233
> 
> 赞同：1
> 
> 时间：2013-04-18T08:39:40.187
> 
> 标签：c#, .net, wpf, winforms, windows-8

最初它设置为使用.Net3.5 以兼容win7。（实际使用WPF）

但是对于**只**支持.Net4.0的win8用户，需要用户下载安装.Net3.5，导致用户体验非常糟糕。

我的问题来了：

**如何使软件与多个 .Net 版本兼容？**

实际上，我尝试使用 .Net 2.0 作为软件，它与 win7 和 win8 都很好。然而，当谈到 .Net 3.5 时，向后兼容性似乎很糟糕。但是我确实需要 3.5 或 WPF 中提供的一些功能。

我不介意我是否必须构建多个二进制版本，只要提供自动选择机制。

PS 我在[Make same app compatible for Net3.5 & 4.0@stackoverflow](https://stackoverflow.com/questions/15024586/make-same-app-compatible-for-net3-5-4-0)中发现了一个类似的问题，但阅读后没有任何帮助。

## 编辑

我正在使用winform和WPF。我正在使用 WPF 来获得更好看的 UI，但是众所周知，WPF 中的网络浏览器无法在 WPF 应用程序中呈现。所以我使用了一个winform webbrowser。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:03:13.607

确保您不使用未包含在目标最低版本中的类型！

.NET 2、3 和 3.5 都共享相同的 CLR，这应该对您的代码和预期结果产生相同的影响。3.0 和 3.5 也有不同的类型，所以要小心。

.NET 4.0 具有不同的 CLR，您的代码可能不会 100% 以与 CLR 2.0 相同的方式运行。

但是，为什么不附带可再发行的 4.0 框架。它适用于 XP sp3、Vista sp1、7 和 8。 [使用应用程序分发 .NET 4.0 可再分发](https://stackoverflow.com/questions/7233696/distributing-net-4-0-redistributable-with-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:19:06.130

如果您正在制作一个普通的 WPF 桌面应用程序，只需将您的目标框架移动到 .Net 4 并完成它。Windows 7 和 Windows 8 完全支持 .Net 4。如果您不想让用户下载安装 .Net 4，请将其包含在您的安装分发中。

# python - 使用python将一个大数子集为较小的数字系列

> ID：16078239
> 
> 赞同：0
> 
> 时间：2013-04-18T08:39:55.490
> 
> 标签：python

我有一个很大的数字，可以说大约一百位数。我想将那个大数字子集为 5 位数字的连续数字，并找到这 5 位数字的乘积。例如，我的前 5 位数字是 73167。我需要检查 73167 中各个数字的乘积，依此类推。

样品编号如下：

```
73167176531330624919225119674426574742355349194934969835203127745063262395783180169848018694788518438586156078911294949545950173795833195285320880551112540698747158523863050715693290963295227443043557 
```

我有一个问题，从大数字中取出小数字。

我的基本起始代码是：

```
b = 73167176531330624919225119674426574742355349194934969835203127745063262395783180169848018694788518438586156078911294949545950173795833195285320880551112540698747158523863050715693290963295227443043557
jd = str(b)
for ch in jd:
    number = ch
    print (number) 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:43:07.907

**编辑：** 我认为这`grouper`在这个解决方案中是矫枉过正的，看看@Haidro [https://stackoverflow.com/a/16078696/1219006的解决方案](https://stackoverflow.com/a/16078696/1219006)

* * *

使用来自的[石斑鱼](http://docs.python.org/2/library/itertools.html#recipes)食谱`itertools`

我假设`b`是一个字符串开头，因为将一个数字弄得那么大将是一种疯狂的内存浪费。

```
from itertools import izip_longest
from operator import mul

def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args)

for g in grouper(5, b, fillvalue=''):
    # And to work out the product of the digits
    num = ''.join(g)
    prod = reduce(mul, map(int, num)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:04:53.173

尝试这个：

```
from operator import mul
def chunker(seq, size):
    return (seq[pos:pos + size] for pos in xrange(0, len(seq), size))
for i in chunker(str(myint),5): # Where myint is that big number
    reduce(mul, map(int, i)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T08:42:43.217

一行给你：

```
import re; re.findall("\d{5}", number) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T09:24:23.747

我的看法：

```
import re
from operator import mul

print [reduce(mul, map(int, group)) for group in re.findall(r'\d{5}', str(b))]
# [882, 630, 0, 648, 20, 6048, 1680, 840, 540, 3888, 11664, 0, 1960, 0, 1890, 0, 1728, 0, 16128, 480, 1920, 0, 162, 6480, 0, 1323, 360, 3600, 0, 0, 0, 12096, 1400, 864, 0, 1620, 0, 360, 0, 2100] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T08:42:12.590

第一个选项是您可以将此数字转换为字符串类型，进行文本处理并转换回数字。第二个选项，您可以将此数字除以 10000 并保存小数部分，然后对数字的底部分重复此过程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T09:19:49.533

我想出了我自己的答案版本。它可能不像此处发布的其他代码那样简洁。

```
# Read values
b = 73167176531330624919225119674426574742355349194934969835203127745063262395783180169848018694788518438586156078911294949545950173795833195285320880551112540698747158523863050715693290963295227443043557
jd = str(b)
max = 0
for i in range(0,len(jd)):
    number = jd[i:i+3]
    if len(number)==3:
        product = int(str(number)[0])*int(str(number)[1])*int(str(number)[2])
        if product > max:
            max = product
        else:
            max = max

print (max) 
```

# javascript - 如何在 ajax.jquery 中管理 location.reload

> ID：16078247
> 
> 赞同：2
> 
> 时间：2013-04-18T08:40:27.970
> 
> 标签：javascript, html, jquery

场景：“我希望我的页面在用户输入数据后自动重新加载”。我尝试搜索最好的方法。我选择使用位置重新加载

我的问题：

当我在一段脚本中使用 location.reload 时，它可以工作。

```
$("#save").click(function(){
//ambil nilai-nilai dari masing-masing input
wp = $("#wp").val();
if(wp==="- Jenis Werehouse -"){
alert("Pilih dulu jenis werehouse");
exit();
}
posisi = $("#posisi").val();
pid = $("#pid").val();
if(pid==="- Produk ID -"){
alert("Pilih dulu ID Produk");
exit();
}
pname = $("#pname").val();
if(pname==""){
alert("Pilih dulu ID Produk");
exit();
}
pdate=$("#pdate").val();
if(pdate==""){
alert("Isi dulu tanggal inputnya");
exit();
}
datanya = "&wp="+wp+"&posisi="+posisi+"&pid="+pid;
datanya = datanya+"&pdate="+pdate+"&pname="+pname;
//tampilkan status Updating dan animasinya
$("#status").html("Dalam proses...");
$("#loading").show();
$.ajax({
type:'POST',
url: "aksi.php",
data: "op=save"+datanya,
cache: false,
success: function(msg){
if(msg=="error1"){
$("#status").html("Rak ini penuh");
}else if(msg=="sukses"){
$("#status").html("Data berhasil disimpan")}else{
$("#status").html("ERROR..penyimpanan data GAGAL!");
}
$("#loading").hide();
}
});
location.reload();
}); 
```

尽管页面重新加载传递步骤以显示消息错误并成功。我忽略了一段时间以查看问题所在（c'z我的页面根据我的需要重新加载。）

但我结合了我的完整代码，如下所示

```
<script type="text/javascript">
var wp;
var posisi;
var pid;
var pname;
var pdate;
var datanya;
$(document).ready(function(){
    $("#save").click(function(){
    //ambil nilai-nilai dari masing-masing input
    wp = $("#wp").val();
    if(wp==="- Jenis Werehouse -"){
    alert("Pilih dulu jenis werehouse");
    exit();
    }
    posisi = $("#posisi").val();
    pid = $("#pid").val();
    if(pid==="- Produk ID -"){
    alert("Pilih dulu ID Produk");
    exit();
    }
    pname = $("#pname").val();
    if(pname==""){
    alert("Pilih dulu ID Produk");
    exit();
    }
    pdate=$("#pdate").val();
    if(pdate==""){
    alert("Isi dulu tanggal inputnya");
    exit();
    }
    datanya = "&wp="+wp+"&posisi="+posisi+"&pid="+pid;
    datanya = datanya+"&pdate="+pdate+"&pname="+pname;
    //tampilkan status Updating dan animasinya
    $("#status").html("Dalam proses...");
    $("#loading").show();
    $.ajax({
    type:'POST',
    url: "aksi.php",
    data: "op=save"+datanya,
    cache: false,
    success: function(msg){
    if(msg=="error1"){
    $("#status").html("Rak ini penuh");
    }else if(msg=="sukses"){
    $("#status").html("Data berhasil disimpan")}else{
    $("#status").html("ERROR..penyimpanan data GAGAL!");
    }
    $("#loading").hide();
    }
    });
    location.reload();
    });

    //jika tombol VIEW diklik
    $("#view").click(function(){
    posisi = $("#posisi").val();
    $("#status").html("Mencari Data...");
    $("#loading").show();
    $.ajax({
    type:'POST',
    url: "aksi.php",
    data: "op=view&posisi="+posisi,
    cache: false,
    success: function(msg){
    if(msg=="error"){
    $("#status").html("Tidak ada produk di RAK ini");
     $("#loading").hide();
    }
    else{//karna di server pembatas setiap data adalah |
        //maka kita split dan akan membentuk array
        data = msg.split("|");            
    //masukkan ke masing-masing textfield
     $("#pname").val(data[0]);
     $("#pdate").val(data[1]);
     //hilangkan status dan animasi loading
     $("#status").html("");
     $("#loading").hide();
       }
       }
     });
    });
    //jika tombol DEL diklik
    $("#delete").click(function(){
    posisi = $("#posisi").val();
    alert("Anda yakin untuk mengosong data produk yang ada di rak ini");
    $("#status").html("Lagi didelete...");
    $("#loading").show();
    $.ajax({
    type:'POST',
    url: "aksi.php",
    data: "op=delete&posisi="+posisi,
    cache: false,
    success: function(msg){
    if(msg=="sukses"){
    $("#status").html("Delete Berhasil...");
    }else{
    $("#status").html("ERROR..");
    }
    $("#loading").hide();
    }
    });
    location.reload();
    });
    });
    </script> 
```

location.reload 将使上面的脚本失效

在简单的问题 1\. 如何管理 location.reload 将在 ajax.jquery 功能完成后运行？2\. 让用户输入的内容自动显示在页面中的最佳方法是什么？

请告知，有代码将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:47:54.873

一起使用 document.location.reload()

```
$("#loading").hide(); 
```

内部成功函数。你的成功应该是这样的。

```
success: function(msg){
    if(msg=="error1"){
    $("#status").html("Rak ini penuh");
    }else if(msg=="sukses"){
    $("#status").html("Data berhasil disimpan")}else{
    $("#status").html("ERROR..penyimpanan data GAGAL!");
    }
    $("#loading").hide();
    document.location.reload();
    } 
```

# c# - 如何在 C# 中保护匿名和经过身份验证的用户的文件

> ID：16078248
> 
> 赞同：0
> 
> 时间：2013-04-18T08:40:29.977
> 
> 标签：c#, asp.net, security, file-upload, asp.net-mvc-4

我想建立一个媒体库系统，但不知道如何保护我的文件免受任何想要破解我系统的人的侵害。我不希望任何用户使用一个特定的链接来访问我的文件，我希望只有可以购买媒体的用户才能访问特定的文件。如果一个“朋友”访问它，然后将文件 URL 提供给未经授权的人，则该朋友应该无法访问它。

例如，如果我有以下链接，我该如何让另一个人无法访问它。

```
https://a4.sphotos.ak.fbcdn.net/hphotos-ak-ash4/296040_2530953916384_1329592446_32898884_1499197273_n.jpg 
```

我想知道如何在 Asp.Net MVC 中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:12:13.893

按照以下 [LINK] ( [http://www.wrox.com/WileyCDA/Section/id-291916.html](http://www.wrox.com/WileyCDA/Section/id-291916.html) ) 执行此操作。我相信它会有所帮助。

# forms - 使用提升框架在 scala 中验证表单中的字段

> ID：16078252
> 
> 赞同：0
> 
> 时间：2013-04-18T08:40:42.677
> 
> 标签：forms, validation, scala, lift

我正在使用 Lift 框架和 Scala。我有一个表格来注册我的应用程序，我想验证其中的所有字段。我有一个片段用于访问我的表单值，还有一个验证类用于编写验证函数。以下代码是我迄今为止尝试过的。在我的片段中：

```
if(validationClassObject.validateName(first_name)){
  if(validationClassObject.validateName(last_name)){
    if(validationClassObject.validateEmail(email)){
      if(validationClassObject.validateUserName(name)){

        // Adding values to the DB
        S.redirectTo("/")

      }
      else{
        S.notice("Invalid User Name")
      }               
    }
    else{
      S.notice("Invalid Mail Id")                 
    }
  }
  else{
    S.notice("Invalid Last name")
  }           
}
else{
  S.notice("Invalid First Name")
} 
```

在`validationClass`我写的验证代码看起来像：

```
//function for validating mail address
 def validateEmail(email: String): Boolean =
     """(\w+)@([\w\.]+)""".r.unapplySeq(email).isDefined
 //code for validating remaining fileds like above 
```

这是可行的，但我知道这不是在 Scala 中编写此操作的最佳方式。如何以更具可扩展性的方式修改我的代码？我如何在这里使用案例类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:31:48.467

你可以这样做：

```
 def av[T,V](validationFunction: => Boolean, error: => T)(f: => V)={
    if(!validationFunction) error
     else f
  }
  def v[V](validationFunction: => Boolean, error: => String)(f: => V)=av(validationFunction,S.notice(error))(f)

  import validationCalssObject._

  v(validateName(last_name),"Invalid Last name"){v(validateName(name),"Invalid User Name"){...}} 
```

`av`是一个抽象方法，`T`其`V`结果类型为`error`function 和 continue function `f`。`v`是更具体的函数，它需要一个字符串`error`并封装`notice()`调用。我们给出`f`花括号中的部分`v(validation, errormsg){/*todo when there is no problem*/}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:17:32.027

我无法在评论中进行格式化，所以我会发布一个新答案。

```
def badName() = if ("name" == "") Some("bad name") else None

def badEmail() = if ("email" == "") Some("bad email") else None

val verifications = List[() => Option[String]](badName, badEmail)

val failed = verifications.flatMap(_())
if (failed.nonEmpty) {
    // handle failed
} else {
    // your custom logic here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:47:35.587

```
if (badName) S.notice
else if (badEmail) S.notice
else if (badDay) S.notice
else { // everything OK...
    // return a JsCmd or what else do you wanted here
} 
```

可以使用 Option 和 flatMap 编写替代解决方案，而无需对所有“if”-s 进行硬编码。如果您对此感兴趣 - 问..

# extjs4 - 如何为项目选择器的“可用”和“选定”面板指定静态 ID？

> ID：16078253
> 
> 赞同：0
> 
> 时间：2013-04-18T08:40:48.677
> 
> 标签：extjs4, extjs4.1

我需要知道，如何为 itemselector 的“available”和“selected”面板指定静态 ID？原因是，基于“可用”项目选择值，我需要恢复“选择”面板值（但不是要显示的选择值，全新的存储值）。请提供你的想法？？？

# c# - 从 byte[] 创建 AudioClip

> ID：16078254
> 
> 赞同：16
> 
> 时间：2013-04-18T08:40:55.820
> 
> 标签：c#, arrays, unity3d, endianness

我有问题。我使用 sqlite 来存储声音。我在 byte[] 中得到声音。然后将 byte[] 转换为 float[]：

```
 private float[] ConvertByteToFloat(byte[] array) 
            {
                float[] floatArr = new float[array.Length / 4];
                for (int i = 0; i < floatArr.Length; i++) 
                {
                    if (BitConverter.IsLittleEndian) 
                        Array.Reverse(array, i * 4, 4);
                    floatArr[i] = BitConverter.ToSingle(array, i * 4);
                }
                return floatArr;
            } 

            float[] f = ConvertByteToFloat(bytes); 
```

然后创建音频剪辑：

```
 AudioClip audioClip = AudioClip.Create("testSound", f.Length, 1, 44100, false, false);
    audioClip.SetData(f, 0); 
```

然后播放

```
AudioSource.PlayClipAtPoint(audioClip, new Vector3(100, 100, 0), 1.0f); 
```

但结果是噪音:(。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T23:17:36.773

floatArr 需要缩放到 -1.0f 到 1.0f 的范围内。

```
floatArr[i] = BitConverter.ToSingle(array, i*4) / 0x80000000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-28T14:04:49.303

在我的情况下，`BitConverter.ToSingle`没有工作。我必须首先阅读 PCM (*.wav) 标头 ( `pcmHeader`)，然后使用：

*   直接转换为 8 位样本。
*   `BitConverter.ToInt16`对于 16 位样本
*   `BitConverter.ToInt32`对于 32 位样本

```
float[] samples       = new float[pcmHeader.AudioSampleCount];
for (int i = 0; i < samples.Length; ++i)
{
    int   byteIndex = pcmHeader.AudioStartIndex + i * pcmHeader.AudioSampleSize;
    float rawSample;
    switch (pcmHeader.BitDepth)
    {
        case 8:
            rawSample = bytes[byteIndex];
            break;

        case 16:
            rawSample = BitConverter.ToInt16(bytes, byteIndex);
            break;

        case 32:
            rawSample = BitConverter.ToInt32(bytes, byteIndex);
            break;

        default: throw new ArgumentOutOfRangeException(nameof(pcmHeader.BitDepth), pcmHeader.BitDepth, "Supported values are: 8, 16, 32");
    }

    samples[i] = pcmHeader.NormalizeSample(rawSample); // normalize sample between [-1f, 1f]
} 
```

其中使用给定位深度的相应最大值和最小值进行`NormalizeSample`缩放：`rawSample`

```
// _negativeDepth = Mathf.Pow(2f, BitDepth - 1f);
// _positiveDepth = _negativeDepth - 1f;
public float NormalizeSample(float rawSample)
{
    float sampleDepth = rawSample < 0 ? _negativeDepth : _positiveDepth;
    return rawSample / sampleDepth;
} 
```

# c# - 使用 WriteableBitmapEx 对两个 WriteableBitmap 进行 Bliting

> ID：16078255
> 
> 赞同：0
> 
> 时间：2013-04-18T08:40:57.023
> 
> 标签：c#, writeablebitmapex

我试图对两个 writeablebitmap 进行 blit。但是，调试器提示了一条错误消息，说明如下：

> 输入 WriteableBitmap 需要具有 Pbgra32 像素格式。使用 BitmapFactory.ConvertToPbgra32Format 方法自动将任何输入 BitmapSource 转换为此类接受的正确格式。

这是我的代码。

```
Rect cRect =new (320,240);
WriteableBitmap _bitmap = new WriteableBitmap(320, 240, 96, 96, PixelFormats.Bgr32, null);
_bitmap.WritePixels(new Int32Rect(0, 0, 320, 240), _image, 320*240, 0);    //_image is a image stream                  
_bitmap.Blit(cRect, _imageFrame, cRect); //_imageFrame is another writeablebitmap 
```

实际上 _imageFrame 是来自画布的 WriteableBitmap，它会定期更改其内容。有没有更有效的方法来 blit 可写位图和画布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:01:55.920

你能改成这一行吗：

```
WriteableBitmap _bitmap = new WriteableBitmap(320, 240, 96, 96, PixelFormats.Pbgra32, null); 
```

和类似的东西`_imageFrame` `WriteableBitmap`

# javascript - ajax 防止在 mouseenter 上重复发布

> ID：16078257
> 
> 赞同：1
> 
> 时间：2013-04-18T08:40:59.897
> 
> 标签：javascript, jquery

有人可以在我的代码中指出我需要什么来阻止它在超链接标签上鼠标输入时加倍数据。我在 isLoading 中放了一个标志，但它仍然继续加倍。我可能做错了，有人可以查看我的代码并查看它有什么问题 - 看看你是否可以防止它在 mouseenter 上重复发布。请告诉我你的变化 - 感谢 KDM。

```
(function($){
    $.fn.rating_display = function() {
        var _this = this;
        var id = $(_this).data('id');
        var position = $(this).parent().position();         
            var left = position.left - 15;  
            var top  = position.top + $(this).height() + 13;
        var isLoading = false;

        function clear_ratings() {
            $('.ratings-content').html(""); 
        }

        $(document).on('click', function(e) {
            var element = e.target;

            /*else if($(element).closest('.rating').length){
                $('.ratings-display').show();
            }*/

        });
        // here is where I'm having trouble with double posting
        $(this).on('mouseenter click', function(e) {
            if(isLoading == true) return false;

            $.ajax({
                type:'POST', 
                dataType:"html",
                data:{product_id:id},
                url:"../../webservices/get_rating.php",
                beforeSend: function() {
                    clear_ratings();
                    $('.ratings-display').show().css({'left':left + 'px', 'top':top + 'px'});
                    isLoading = true;   
                },
                success: function(data) {                                                                       
                    $('.ratings-content').append(data);                                             
                }, error:function(data, status, xhr) {
                    clear_ratings();
                    $('.ratings-content').html(data + "\r\n" + status + "\r\n" + xhr);  
                }
            });
        }).on('mouseleave', function(e) {
            var target = e.relatedTarget;

            if($(target).closest('.ratings-display').length) {
                return false;   
            }else{
                $('.ratings-display').hide();
                clear_ratings();
                isLoading = false;
            }
        });

        $('.ratings-display').on('mouseleave',function (e) {            
            var target = e.relatedTarget;

            if($(target).closest('.rating').length) return false;

            if(!$(target).closest('.ratings-display').length) {
                $('.ratings-display').hide();
                clear_ratings();isLoading = false;  
            }

        });
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:43:58.173

`'mouseenter click'`表示该操作在 mouseenter 处执行一次，如果单击则再次执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:56:24.950

尝试`isLoading = true;`在 ajax 调用之前而不是在`beforesend`函数中设置。而且您还想`isLoading = false`在 ajax 调用完成而不是 mouseleave 时重置。根据您是否出于键盘导航原因这样做，您也可以完全停止收听点击事件。

# java - 在 VisualVM 中自动启动预设配置

> ID：16078261
> 
> 赞同：0
> 
> 时间：2013-04-18T08:41:04.163
> 
> 标签：java, profiling, visualvm, jvisualvm

我正在尝试使用 VisualVM（eclipse 插件）在我的 java 应用程序中分析函数。现在，当我运行应用程序时，eclipse 打开 VisualVM 并将我带到分析器选项卡，我可以通过按 CPU 或内存按钮开始分析。不幸的是，在我手动执行此操作的时间里，我在应用程序的迭代中丢失了大量的数据以获得精确的结果。

我知道我可以在 Tools->Options->Profiling 下为应用程序设置默认分析器设置。但是在 VisualVM 中是否有一个选项，它可以在看到正在启动的特定主要功能/应用程序时自动触发探查器。

# css - CSS“剪辑”属性是否有相反的含义？隐藏剪切区域？

> ID：16078262
> 
> 赞同：15
> 
> 时间：2013-04-18T08:41:05.777
> 
> 标签：css, mask, clip

CSS 剪辑语法让您可以定义您希望可见的较大图像的矩形区域。有没有办法指定逆？指定您希望变得不可见的图像的矩形区域。就像在页面上打一个矩形孔以查看下面是什么？

**原因（如果您有任何其他想法）：**我想在 CMS 模板中创建 3 层图像。第 1 层（底部）是背景图像。第 2 层位于第 1 层的一部分之上，是 A4 文档的矩形截屏图像。第 3 层（在顶部）是一个透明的 PNG（在其中心和边缘），它在第 2 层文档的右上角添加了边框、投影、文档类型徽标和卷页效果。

第 1 层和第 2 层将在 CMS 中分别上传，CSS 应将它们与第 3 层图像组合在一起以创建效果。问题是要使页面卷曲效果起作用，需要遮盖第 2 层的右上角，以便您可以看到从第 3 层到第 1 层的所有路径。我希望剪辑属性允许我指定第 2 层右上角的一个小方块，应该是*不可见*的。

**替代方案：**是使用图形程序将第 1 层和第 3 层组合在一起，并为第 2 层留下一个透明区域。然后通过正确的定位，您可以将新组合的图像放在第 2 层的顶部以达到相同的效果。但是，我希望避免这样的图形准备，因为您最好以这种方式创建整个图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-24T18:40:37.950

简单的答案：CSS 剪辑对此不起作用。

我看到两个选项：

1.  尝试通过使用 Layer1 作为背景图像绘制 Layer3 来伪造“洞”。这将使 Layer3 的透明区域被 Layer1 填充。你可以在这里看到这个解决方案：http: [//cssfilter.saschaseewald.com/](http://cssfilter.saschaseewald.com/)

2.  使用 HMTL 画布元素及其复合动作来根据需要组合图层。概述：[http ://www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/)

# symfony - Swift Emailer 罕见行为

> ID：16078265
> 
> 赞同：0
> 
> 时间：2013-04-18T08:41:15.357
> 
> 标签：symfony, symfony-2.1, swiftmailer

我有一个在 Symfony 2 中开发的应用程序。我有一个捆绑包中的联系表格，可以向我发送电子邮件。它适用于此代码。

```
$message = \Swift_Message::newInstance()
->setSubject('Nueva consulta desde el formulario de contacto')
->setFrom($contacto->getEmail())
->setTo($this->container->getParameter('portada.emails.contact_email'))
->setBody($this->renderView('PortadaBundle:Page:contactoEmail.txt.twig', array('contacto' => $contacto)));

$this->get('mailer')->send($message); 
```

在同一应用程序的另一个包中，此代码不起作用

```
$message = \Swift_Message::newInstance()
->setSubject('Test to send emails from other bundle')
->setFrom('xxxx@yahoo.es') //mail commented
->setTo('xxxx@gmail.com')   //mail commented
->setBody('Hello');

$this->get('mailer')->send($message); 
```

我不明白发生了什么。它是如此罕见......我检查了手册，但一切似乎都是正确的[http://symfony.com/doc/2.1/cookbook/email/email.html](http://symfony.com/doc/2.1/cookbook/email/email.html)

我在发送方法中添加了第二个参数 ->send($message, $failures); 但它返回给我一个零项目的数组。

有什么线索吗？

**编辑**：我已经复制了第一个包中的第二个代码，它工作正常。它一定是关于捆绑的。

另一个线索？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:14:06.593

Symfony 2.1 需要返回一个[响应](http://symfony.com/doc/2.1/components/http_foundation/introduction.html#response)来发送内存中的消息。例如，您可以返回 a `redirect`、 a`render`或 a `forward`。

如果这不是问题，请尝试冲洗控制器中的线轴以强制发送电子邮件。[这里](https://stackoverflow.com/questions/15643027/swiftmailer-remove-attachment-after-send)解释

# android - Android 唯一序列号

> ID：16078269
> 
> 赞同：53
> 
> 时间：2013-04-18T08:41:21.277
> 
> 标签：android, uniqueidentifier, serial-number

我正在开发一个针对 Android 4.0 (API 14) 及更高版本的 Android 应用程序。

我正在寻找每个设备唯一且永远存在的序列号（与设备一起死亡，恢复出厂设置后不会更改）。

我在网上找到了很多关于 android 设备唯一标识符的结果，但在**android.os.Build.SERIAL**编号上却很少。

到目前为止，我消除了**ANDROID_ID**的使用，因为它可能会在恢复出厂设置后发生变化。我还取消了**IMEI**的使用，因为 android 设备可能不是电话。我无法使用 wifi 或蓝牙**MAC 地址**，因为设备可能没有此类硬件和/或如果未启用硬件（基于我在网上找到的内容），此类 MAC 地址可能无法读取。

我相信我可能会选择 android 设备序列号。

**使用android.os.Build.SERIAL**可以轻松访问它（因为它是在 API 级别 9 中添加的，不需要任何额外的权限）。

我的问题是：

*   考虑到我的应用程序针对 Android 4.0 (API 14) 及更高版本，每个设备的 android 设备的**android.os.Build.SERIAL编号是否唯一？**

*   目前，**android.os.Build.SERIAL**的文档表明：**硬件序列号，如果有的话。仅字母数字，不区分大小写。** 这是否意味着序列号可能不可用？

*   满足上述条件的另一种选择是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-06-05T00:26:32.163

> 考虑到我的应用程序针对 Android 4.0 (API 14) 及更高版本，每个设备的 android 设备的 android.os.Build.SERIAL 编号是否唯一？

根据Android 开发者博客中的这篇有用的[文章，如果可用，它](https://android-developers.blogspot.com/2011/03/identifying-app-installations.html)`android.os.Build.SERIAL` **应该**是唯一的。来自文章：

***没有电话的设备需要在此处报告唯一的设备 ID；有些手机也可能这样做。***

> 这是否意味着序列号可能不可用？

正确，它可能不可用。请注意，他们说**“需要没有电话的设备...”**，因此只有没有“电话”的设备（例如仅 wifi 的平板电脑）才需要提供`SERIAL`号码，尽管有些手机仍然需要提供号码（例如 Nexus 4）。

这个主题肯定缺乏文档，但从措辞来看，可能只有“没有电话的设备”需要提交唯一 ID，而提交 ID 的手机可能不是唯一的。

> 满足上述条件的另一种选择是什么？

对于您的情况，我认为您最好的选择是首先检查`deviceId`（IMEI，或不存在），如果`deviceId`不存在，则回退到使用`android.os.Build.SERIAL`（因为这可能是平板电脑），如下所示：

```
public static String getDeviceId(Context context) {
    final String deviceId = ((TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE)).getDeviceId();
    if (deviceId != null) {
        return deviceId;
    } else {
        return android.os.Build.SERIAL;
    }
} 
```

请记住使用`deviceId`您需要许可`android.permission.READ_PHONE_STATE`。

**因此**，由于您的应用的 minSDK 为 14，因此您可以安全地使用该字段`android.os.Build.SERIAL`。如果我们假设没有电话的设备确实总是提供唯一的 ID，`SERIAL`那么我认为这将是始终获得唯一设备 ID 的安全赌注（当然排除任何错误）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-27T22:31:34.230

我个人使用`Secure.ANDROID_ID`&`Build.SERIAL`来识别电话：

```
androidId = Settings.Secure.getString(this.getContentResolver(), 
                Settings.Secure.ANDROID_ID) + Build.SERIAL; 
```

他们可能有相同的`ANDROID_ID`，他们可能没有`SERIAL`。但两者的机会都很低。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-07T00:19:40.323

You appear to have summarized the situation pretty well.

The serial number is intended to be unique for each device, but (this being Android) there are of course bugs that create exceptions, e.g. [https://code.google.com/p/android/issues/detail?id=35193](https://code.google.com/p/android/issues/detail?id=35193)

As you point out, the docs suggest that this is intended to be a hardware serial number, but the way it is worded suggests that you shouldn't count on that. And don't mistake that for the device's actual serial number, i.e. the serial number printed on the back or on the box. As well, I believe it is much less widely used than android_id, so there could well be issues that are not reported.

I've seen it widely reported that the android_id is based on the serial number, but I believe that is not true - I recently observed that, on a tablet with the new multi-user capability, each user account gets its own android_id but the serial number is the same for both.

AFAIK 'another alternative' does not exist: your list is complete. The serial number is the closest thing to what you are after unless you are prepared to depend on wifi or bluetooth permissions.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T00:26:10.997

我通常通过对一些唯一字符串（通常是公司名称）+imei（如果没有imei，mac地址[wifi，蓝牙等]）进行SHA1哈希来获得唯一ID。这给了我看起来相同的唯一 ID，每个设备往往是唯一的（如果 MAC 被更改/伪造，则不完美）。

# java - 需要 dd/mm/yyyy HH:ss:MM 格式的 Java 日历

> ID：16078273
> 
> 赞同：-5
> 
> 时间：2013-04-18T08:41:29.467
> 
> 标签：java

我需要使用 dd/mm/yyyy HH:ss:MM 格式的**java.util.Calendar对象。**请帮我。我总是低于格式。

2013 年 11 月 21 日星期四 14:12:57 EST。

在获取 getTime() 方法时，我需要日历对象中的 dd/mm/yyyy HH:ss:MM 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:46:09.963

请参阅下面有关 Java 日期、日历和时间 API - 教程的教程。

[http://www.vogella.com/articles/JavaDateTimeAPI/article.html](http://www.vogella.com/articles/JavaDateTimeAPI/article.html)

# android - ViewPager 显示片段的问题

> ID：16078278
> 
> 赞同：4
> 
> 时间：2013-04-18T08:41:57.640
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter

我正在尝试使用 ViewPager 获取带有三个选项卡的片段。最初，我曾经使用 FragmentMgr 从 Activity 实例化片段，这很好。当我使用 ViewPager 转换此导航时，不再显示此 Fragment。

MainActivity.java

当我像这样启动 Fragment 时，它会显示出来。例如：

```
LaunchListFragment fragment = new LaunchListFragment();
fragment.newInstance(LIST_TYPE);
getSupportFragmentManager().beginTransaction()
                .add(R.id.item_detail_container,   
 fragment).commit(); 
```

我在上面的代码中尝试了这个更改来使用 ViewPager，如下所示：

```
mViewPager = (ViewPager) findViewById(R.id.pager);
mViewPager.setAdapter(new LaunchPageAdapter(getSupportFragmentManager(),LIST_TYPE));
mViewPager.setCurrentItem(0); 
```

其中 LaunchPageAdapter 调用 LaunchListFragment。

LaunchPageAdapter.java

```
public class LaunchPageAdapter extends FragmentPagerAdapter {
private static String select="";

    public LaunchPageAdapter(FragmentManager fm, String type) {
        super(fm);
        select=type;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                return LaunchListFragment.newInstance(select);
            case 1:
                return AddTeamFragment.newInstance();

        }
        return null;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 2;
    } 
```

这是 LaunchListFragment.java

```
public class LaunchListFragment extends ListFragment implements ActionBar.TabListener {
public static  String LIST_TYPE = "invalid";
GenericListData g_data[] = null;

   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }
   @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View result = inflater.inflate(R.layout.fragment_launch_list,
                container, false);

         setActionTabs();
         setList();
        return (result);
    }

   public static Fragment newInstance(String type) {
    Fragment frag = new LaunchListFragment();
    Bundle args = new Bundle();
    LIST_TYPE=type;
    args.putString(LIST_TYPE, type);
    frag.setArguments(args);
    return (frag);
} 
```

这是 MainActivity 使用的 main.xml 布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools=  "match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="16dp"
android:layout_marginRight="16dp"
android:baselineAligned="false"
android:divider="?android:attr/dividerHorizontal"
android:orientation="horizontal"
android:showDividers="middle"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/item_list"
    android:name="com.teammanager.ItemListFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    tools:layout="@android:layout/list_content" />

<FrameLayout
    android:id="@+id/item_detail_container"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="3" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
</FrameLayout> 
```

LaunchListFragment 使用的 fragment_launch_list.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" >
</ListView>

<TextView
    android:id="@+id/itemName"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp"
    android:gravity="center_vertical"
    android:textColor="#000000"
    android:textSize="22dp"
    android:textStyle="bold" /> 
```

当我调试它时，我可以看到 LaunchListFragment 正在实例化，onCreate 和 onCreate View 被调用，它只是不会被显示。:(

如果我在 ViewPager 实现中遗漏任何内容，这里有人可以告诉我吗？

**更新**

当我在不使用 Viewpager 的情况下调用 LaunchListFragment 时，我首先设置了内容视图并传递了 R.id.item_detail_container，这是我希望在其中显示片段的 FrameLayout 的 id。请参考前面的 main.xml

```
 setContentView(R.layout.main.xml);
 LaunchListFragment fragment = new LaunchListFragment();
 fragment.newInstance(LIST_TYPE);
  getSupportFragmentManager().beginTransaction()
                .add(R.id.item_detail_container,    
  fragment).commit(); 
```

当我将其更改为使用 ViewPager 时，我不确定要在哪里显示 Fragment。在我的片段 onView 中，我正在膨胀 fragment_launch_list 并返回视图。但是视图分页器如何知道在哪里设置片段视图。它在 id 寻呼机内吗？

我是一个绝对的初学者，如果所有这些都是幼稚的问题，我深表歉意。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-08T07:59:09.627

问题描述非常适合我刚刚遇到的问题。我知道这个问题很老，但这可能会帮助其他面临同样问题的人。@Geoplex 没有显示`LaunchPageAdapter`类的代码。所以我不确定这是否能解决他的问题。但对我来说，这很有效。

在我的 PagerAdapter 中， `public boolean isViewFromObject(View view, Object object)`被覆盖了。我删除了该方法并允许 superClass 处理它。这开始给出我预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:04:10.407

这对你有用，

```
public class ViewPagerAdapter extends FragmentStatePagerAdapter {
    private List<Fragment> fragments=null;
    private FragmentManager fragmentManager=null;
    public ViewPagerAdapter(FragmentManager fragmentManager,List<Fragment> fragments) {
        super(fragmentManager);
        this.fragments=fragments;
        this.fragmentManager=fragmentManager;
    }
    @Override
    public Fragment getItem(int position) {
        fragmentManager.beginTransaction().commitAllowingStateLoss();
        return fragments.get(position);
    }
    @Override
    public int getCount() {
        return fragments.size();
    }
    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object)
    {
        super.setPrimaryItem(container,0,fragments.get(0));
    }
    @Override
    public void notifyDataSetChanged()
    {
        super.notifyDataSetChanged();
    }
    @Override
    public void destroyItem(ViewGroup collection, int position, Object view) {
        fragmentManager.executePendingTransactions();
        fragmentManager.saveFragmentInstanceState(fragments.get(position));
    }
    public void replaceItem(int position,Fragment fragment)
    {
        fragments.set(position, fragment);
        this.notifyDataSetChanged();
    }
} 
```

MainActivity.java

```
public class MainActivity extends FragmentActivity implements OnPageChangeListener,TabListener
{
    private android.support.v4.view.ViewPager mViewPager=null;
    private ViewPagerAdapter mPagerAdapter=null;
    private ActionBar action=null;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);
        initilizeViewPager();
        action=getActionBar();
                action.setDisplayShowHomeEnabled(false);
                action.setDisplayShowTitleEnabled(false);
                action.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    }
         public void initilizeViewPager()
     {
                 mViewPager=(android.support.v4.view.ViewPager)findViewById(R.id.viewPager);
         List<Fragment> fragments = new Vector<Fragment>();
                fragments.add(LaunchListFragment.newInstance(select));
                fragments.add(AddTeamFragment.newInstance());
                fragments.add(thirdFragment.newInstance());
                viewPagerAdapter=new ViewPagerAdapter();
mViewPager.setAdapter(viewPagerAdapter(getSupportFragmentManager(),fragments));
                new setAdapterTask().execute();
        mViewPager.setOnPageChangeListener(this);
     }
     private class setAdapterTask extends AsyncTask<Void,Void,Void>
     {
        protected Void doInBackground(Void... params) 
        {
            return null;
        }
        @Override
        protected void onPostExecute(Void result)
        {
            mViewPager.setAdapter(mPagerAdapter);
            Tab first=action.newTab().setTag("first").setText("First").setTabListener(MainActivity.this);
            Tab second=action.newTab().setTag("second").setText("Second").setTabListener(MainActivity.this);
Tab third=action.newTab().setTag("third").setText("Third").setTabListener(MainActivity.this);
            action.addTab(first);
            action.addTab(second);
                    action.addTab(third);
            }
        }
     }
     public void onPageScrollStateChanged(int arg0) 
     {}
     public void onPageScrolled(int arg0, float arg1, int arg2)
     {}
     public void onPageSelected(int position) 
     {
         getActionBar().setSelectedNavigationItem(position);
     }
public void onTabReselected(Tab tab, FragmentTransaction ft) {}
     public void onTabSelected(Tab tab, FragmentTransaction ft) {
         mViewPager.setCurrentItem(tab.getPosition());
     }
     public void onTabUnselected(Tab tab, FragmentTransaction ft) {}
} 
```

main_layout.xml

```
<RelativeLayout 
   xmlns:android="http://schemas.android.com/apk/res/android" 
   android:layout_width="match_parent"
   android:layout_height="match_parent">
   <android.support.v4.view.ViewPager
       android:id="@+id/viewpager"
       android:layout_width="fill_parent"
       android:layout_below="@android:id/tabs"
       android:layout_height="fill_parent"/>
</RelativeLayout> 
```

# sitecore - Sitecore 搜索 Lucene 排名

> ID：16078280
> 
> 赞同：0
> 
> 时间：2013-04-18T08:41:58.407
> 
> 标签：sitecore, lucene.net

搜索时如何设置`priority`字段`Lucene .Net`

例如我有：

```
Item 1
         field 1 =contain "search text"
         field 2 ="bla bla"
Item 2
         field 1 = "loren ipsun"
         field 2 = contain "search text" 
```

我应该如何处理结果，最重要的项目：列表中的第 1 项，第 2 项，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:10:46.233

我想我理解你的问题。您希望特定字段的命中率比另一个字段的命中率更高，为此您可以使用 BoostFactor。您可以提升用于在字段一中搜索的查询。例如，如果您使用 Query qryName = queryParser.parse(keyword) 您可以执行以下操作：

```
qryName.SetBoost(1000f); 
```

这将提高您在该查询中指定的搜索特定部分的点击率。因此，您应该对这两个字段使用 2 个查询，并提升您在其中搜索字段 1 的第一个查询。您可以改变提升因子，直到适合您的需要。

希望这可以帮助 ;）

# c# - 将 2 个 POCO 合并为 1 个 Class 并执行 CRUD

> ID：16078281
> 
> 赞同：1
> 
> 时间：2013-04-18T08:41:59.370
> 
> 标签：c#, .net, orm, poco, petapoco

我将 PetaPoco 用作 ORM，并希望将 2 个 POCO 组合成 1 个类，然后使用该类执行 CRUD 操作。

## 现在我得到了这样的东西：

*表人有一个 fk address_id。*

```
public class Person
{
    public PersonPOCO Person { get; set; }
    public AddressPOCO Address { get; set; }

    public Person(string sql)
    {
        Person = Db.SingleOrDefault<PersonPOCO>(sql);
        Address = Db.SingleOrDefault<PersonPOCO>("SELECT * FROM addresses WHERE id = @0, PersonPoco.address_id");
    }

    public void Save()
    {
        var addressId = Db.Save(Address); // Returns inserted ID

        Person.address_id = addressId;
        Db.Save(Person);
    }
} 
```

到目前为止，这工作正常。但是对于每个需要的组合，这样做真的很烦人和重复。

特别是保存是一种痛苦，因为我必须将插入的 ID 映射到依赖对象。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:51:11.807

PetaPoco 被设计为快速和轻量级，所以你不会发现像 Linq-to-sql 或 EF 这样的复杂映射。

# node.js - 一个小程序在两种技术之间犹豫

> ID：16078282
> 
> 赞同：0
> 
> 时间：2013-04-18T08:42:00.060
> 
> 标签：node.js, qt

我想制作一个程序（更准确地说，是一项服务），它会定期扫描目录以查找一些视频文件（.avi、.mkv 等）并自动从一个或多个网站下载一些相关文件（主要是字幕）。
这个程序也可以在 linux 或 windows 上运行。

一方面，我很早就熟悉 Qt 并且知道它的所有好处，但另一方面，我被 node.js 所吸引，它极其灵活和活泼。

我需要与我的程序的最终用户提供一些交互性（例如，选择扫描目录等）。

您认为 2013 年的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:38:40.343

我建议*不要*将 Node.js 用于“小工具和程序”。特别是对于*迭代*任务。

## 漫长的故事

原因很简单，Node.js 的工作方式。它的异步模型使简单的任务不必要地复杂化。此外，由于从 Node.js 事件循环中调用了许多回调，因此您不能只使用 try/catch 结构，因此***每个*微小的错误都会***使您的整个应用程序***崩溃。****

 *当然，有一些方法可以[捕获这些错误](http://nodejs.org/api/process.html#process_event_uncaughtexception)或[使用它们](http://nodejs.org/api/domain.html)，但文档建议您不要使用所有这些错误，并建议您*在任何情况下*都优雅地重新启动应用程序以防止内存泄漏。这意味着您必须实现另一段代码。

Node.js 中唯一真正的解决方案是将您的应用程序编写为[集群](http://nodejs.org/api/cluster.html)，这是一个很棒的概念，但当然需要您使用某种 IPC 将您的数据返回到可以处理它的进程。

另外，由于您写了有关“定期扫描”目录的文章，因此我想指出您应该...

## 为服务使用文件系统观察程序

几乎每个语言工具包现在都有这些，我强烈建议使用这些并且只使用后备全扫描。

*   在 Qt 中有一个独立于系统的类[QFileSystemWatcher](http://qt-project.org/doc/qt-4.8/qfilesystemwatcher.html)，它在指定文件更改时提供方便的回调
*   在 Java 中有[java.nio.file.FileSystem.getWatchService()](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html#newWatchService%28%29)
*   Node.js 有[fs.watch](http://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)功能，如果你*真的*想去的话*

# vertical-alignment - 内联块未正确垂直对齐 div 元素

> ID：16078283
> 
> 赞同：7
> 
> 时间：2013-04-18T08:42:01.950
> 
> 标签：vertical-alignment, css

我的 Chrome 有问题。

我正在尝试使用 而不是浮动它们来垂直对齐一些`div`元素。`display: inline-block;`当我将一些文本放入其中时会出现问题：由于一个奇怪的原因，Chrome 显示不同的填充`divs`到不同的行。

Firefox 和 IE 工作正常。为了更好地理解检查[这个例子](http://jsfiddle.net/pHCSx/11/)

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T08:51:56.377

您需要添加全局包装器`font-size: 0;`并为内联块设置常规字体大小，您还可以添加：`letter-spacing: 0;`和`word-spacing: 0;`，如下所示：

```
.wrapper {
  font-size: 0;
  letter-spacing: 0;
  word-spacing: 0;
}

  .wrapper .inline_block {
    display: inline-block;
    font-size: 12px;
    letter-spacing: 1px;
    word-spacing: .1em;
    vertical-align: top;
  } 
```

和示例小提琴： http: [//jsfiddle.net/3ab22/](http://jsfiddle.net/3ab22/) 和更新的小提琴：http: [//jsfiddle.net/3ab22/3/](http://jsfiddle.net/3ab22/3/)

# php - TYPO3 mm-Query 没有输出也没有错误

> ID：16078286
> 
> 赞同：0
> 
> 时间：2013-04-18T08:42:09.573
> 
> 标签：php, sql, database, typo3, relation

我试图从我的两个链接表中输出一些数据，并查看了我能找到的所有示例，但我仍然没有得到任何结果。（注意：我在任一表上都尝试过 exec_SELECTquery ，它就像一个魅力）

所以这是我的代码

```
$GLOBALS['TYPO3_DB']->debugOutput = true;

$res = $GLOBALS['TYPO3_DB']->exec_SELECT_mm_query(
  'tx_pagecat_category.title',  // $select_fields
  'tx_pagecat_category',    // $local_table
  'pages_tx_pagecat_category_mm',   // $mm_table
  'pages',  // $foreign_table
  '',   //$where_clause
  '',   // $groupBy
  '',   // $orderBy
  ''    // $limit
);

while( $row = $GLOBALS['TYPO3_DB']->sql_fetch_assoc($res) ) {
    $c= $row['tx_pagecat_category.title'].chr(10);
}

return $this->pi_wrapInBaseClass($c); 
```

我完全不知道我做错了什么，即使调试输出也不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:20:25.343

可能最简单的方法是：

```
$GLOBALS['TYPO3_DB']->store_lastBuiltQuery = 1;

// query here

echo $GLOBALS['TYPO3_DB']->debug_lastBuiltQuery; 
```

这将为您提供发送到数据库的 sql。然后，您可以手动运行该查询以检查问题所在。

# c - Perl，我如何为我的 exec'd 孩子创建一个管道？

> ID：16078290
> 
> 赞同：6
> 
> 时间：2013-04-18T08:42:21.670
> 
> 标签：c, perl, unix, pipe

我正在尝试使用管道（单向）将数据从我的 perl 脚本传递到我的 c 程序。我需要找到一种方法来做到这一点，而不会弄乱子程序 STDIN 或 STDOUT，所以我尝试创建一个新句柄并传递 fd。

我创建了 2 个 IO::Handles 并创建了一个管道。我写入管道的一端并尝试将管道另一端的文件描述符传递给正在执行的子程序。我通过设置 ENV 变量来传递文件描述符。为什么这不起作用？（它不会打印出“hello world”）。据我所知，文件描述符和管道在执行时由孩子继承。

Perl 脚本：

```
#!/opt/local/bin/perl
use IO::Pipe;
use IO::Handle;

my $reader = IO::Handle->new();
my $writer = IO::Handle->new();
$reader->autoflush(1);
$writer->autoflush(1);
my $pipe = IO::Pipe->new($reader, $writer);
print $writer "hello world";
my $fh = $reader->fileno;
$ENV{'MY_FD'} = $fh;
exec('./child') or print "error opening app\n";
# No more code after this since exec replaces the current process 
```

C 程序，app.c（用 编译`gcc app.c -o child`）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

int main(int argc, char ** argv) {
  int fd = atoi(getenv("MY_FD"));
  char buf[12];
  read(fd, buf, 11);
  buf[11] = '\0';
  printf("fd: %d\n", fd);
  printf("message: %s\n", buf);
} 
```

输出：

```
fd: 3
message: 
```

消息永远不会通过管道传递到 C 程序。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:41:04.730

我找到了解决方案。有人说 exec 不可能，它不会看到管道或文件描述符，但这是不正确的。

事实证明，除非您另有说明，否则 perl 会自动关闭/使所有 fd > 2 无效。

将以下标志添加到 FD 可解决此问题（其中 READ 是此处的句柄，而不是 STDIN）：

```
my $flags = fcntl(READ, F_GETFD, 0);
fcntl(READ, F_SETFD, $flags & ~FD_CLOEXEC); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T19:40:15.010

您的管道文件描述符设置为 FD_CLOEXEC，因此在 exec() 时关闭。

Perl[`$^F`](http://perldoc.perl.org/perlvar.html#%24SYSTEM_FD_MAX)控制这种行为。在调用 IO::Pipe->new*之前*尝试这样的操作：

```
$^F = 10;  # Assumes we don't already have a zillion FDs open 
```

或者，您可以在创建管道后自己使用[Fcntl](http://perldoc.perl.org/Fcntl.html)清除 FD_CLOEXEC 标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:03:17.747

Rodrigo，我可以告诉你，当你执行到 c 应用程序时，你的文件描述符不再有效。
请注意，我只是说它是无效的，但它仍然存在于环境变量中。FD=3 将继续存在，直到整个过程结束。
您可以通过 fcntl 检查 fd。代码在下面列出

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>

int main(int argc, char ** argv) {
  int fd = atoi(getenv("MY_FD"));
  char buf[12];
  read(fd, buf, 11);
  buf[11] = '\0';
  printf("fd: %d, if fd still valid: %d\n", fd, fcntl(fd, F_GETFD));
  printf("strlen %d\n", (int)strlen(buf));
  printf("message: %s\n", buf);
} 
```

您可以看到 MY_FD=3 将始终在 ENV 中，因为进程不会自行销毁，因此您可以将 fd 设为 3。但是，此文件描述符已无效。所以 fcntl(fd, F_GETFD) 的结果将是 -1，而你从 fd 读取的长度将为 0。
这就是为什么你永远不会看到“hello world”语句的原因。

还有一件事，@dan1111 是对的，但您不需要打开新管道，因为您已经这样做了。
您只需设置 MY_FD=0，例如

```
$ENV{'MY_FD'} = 0; 
```

STDIN/OUT 是另一个始终存在的独立进程，因此当您的 perl 应用程序执行到 c 应用程序时，管道不会损坏。这就是为什么您可以阅读您在应用程序中输入的内容的原因。
如果您的要求是从另一个文件句柄写入，请尝试使该文件处理一个独立的进程并始终存在，就像 STDIN 一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:12:58.760

您的程序失败了，因为`exec` [调用了另一个程序并且永远不会返回](http://perldoc.perl.org/functions/exec.html)。它根本不是为与另一个进程通信而设计的。

*您可能根据[`IO::Pipe`文档](http://perldoc.perl.org/IO/Pipe.html)编写了上述代码，其中显示“ARGS 已传递给 exec”。不过，这不是它的意思。 `IO::Pipe`用于 Perl 脚本中的两个进程之间的通信，它们由`fork`. 它们意味着新流程的执行，而不是`exec`在您自己的代码中调用。*

**编辑：**对于单向通信，[您只需要`open`一个管道](http://perldoc.perl.org/functions/open.html)：

```
open my $prog, '|-', './child' or die "can't run program: $!";

print {$prog} "Hello, world!"; 
```

# c++ - CPLEX：抛光时发现的每个解决方案调用的任何回调？

> ID：16078291
> 
> 赞同：0
> 
> 时间：2013-04-18T08:42:26.293
> 
> 标签：c++, mathematical-optimization, linear-programming, cplex

抛光期间会调用哪些回调？更具体地说，是否有一个回调会为在抛光过程中找到的每个新解决方案调用？

我在 C++ 中有一些（旧）代码使用 MIPInfoCallback 并且在 B&B 期间可以正常调用，但是在抛光过程中它似乎没有被调用，即使抛光发现可能有 20 或 30 个改进的解决方案。该文档指出，在抛光期间通常会调用回调，但可能是 MIPInfoCallback 仅在探索每个节点之前被调用，在我的情况下，抛光不会探索任何额外的节点。

我尝试切换到使用现有回调，但这似乎对我产生了巨大的性能影响 - 只需将回调的类型从 MIPInfoCallback 更改为 IncumbentCallback 即可将获得第一个整数可行解决方案的时间从大约 20 分钟更改为超过 3小时（我真的只是改变回调的类型，保持回调的主体不变）。我怀疑这是因为使用现有回调会在搜索中关闭某些内容。

这是在带有 CPLEX 12.1 的 Windows 上的 C++ 中，但计划很快更新到 12.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:40:50.357

您是否尝试`CPXsetincumbentcallbackfunc`过 C 可调用库？我没有检查它在抛光时的行为，但它确实允许用户随心所欲地拒绝解决方案，所以我想它必须在现任者即将更新时被调用——包括在抛光期间。

# prolog - 无法访问 Prolog 中的文件，始终读取 end_of_file 原子

> ID：16078292
> 
> 赞同：0
> 
> 时间：2013-04-18T08:42:30.417
> 
> 标签：prolog

我正在使用 SWI Prolog 研究 Prolog，我发现一些与文件读写操作相关的困难。

我有这个简单的程序，它从标准输入（键盘）读取一些内容并将其写入文件：

```
processFile(File) :- see(File),
                 processFile,
                 seen.

processFile :- read(Query),
               process(Query).

process(end_of_file) :- !.

process(Query) :- Query,
                  write(Query),
              nl,
              processFile. 
```

我正在尝试在 Linux 下执行它。因此，在 bash 中，我进入 Prolog 源文件和**myFile**文件所在的文件夹，之后我咨询了程序，我执行以下语句：

```
?- processFile(myFile).
true. 
```

正如你所看到的那样，这个问题给了我真实的信息，但我无法通过键盘插入任何东西，所以任何东西都可以写入**myFile**文件。

如果我尝试追踪发生的事情，我会获得以下信息：

```
[trace]  ?- processFile(myFile).
   Call: (6) processFile(myFile) ? creep
   Call: (7) see(myFile) ? creep
   Exit: (7) see(myFile) ? creep
   Call: (7) processFile ? creep
   Call: (8) read(_G697) ? creep
   Exit: (8) read(end_of_file) ? creep
   Call: (8) process(end_of_file) ? creep
   Exit: (8) process(end_of_file) ? creep
   Exit: (7) processFile ? creep
   Call: (7) seen ? creep
   Exit: (7) seen ? creep
   Exit: (6) processFile(myFile) ? creep
true. 
```

如您所见，它可以访问**myFile**文件，并正确询问包含**read语句的****processFile**谓词，但似乎自动读取**end_of_file**原子并且无法继续。

 ****为什么？我能做些什么来解决它并写入这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:09:11.507

您必须使用 tell/1*写入*文件，然后告诉恢复到以前的。使用 see/1 你正在*阅读*它，它是空的......

但是 ISO IO 更好...****

# c# - 如何在 C# 中调用带有 char * 参数的 ActiveX 函数

> ID：16078295
> 
> 赞同：0
> 
> 时间：2013-04-18T08:42:36.637
> 
> 标签：c#, c++, activex, atl

我有这个 c++ 函数：

```
unsigned int ReadUserMemory( unsigned char *lpBuffer, unsigned int iAddress, unsigned int nNumberOfByte ); 
```

它从内存中读取`nNumberOfByte`字节`iAddress`并将其放入`lpBuffer`.
我用这个接口为它创建了一个 ATL 对象（将在 C# 中使用）：

```
[id(6), helpstring("method ReadUserMemory")] HRESULT ReadUserMemory(BYTE* lpBuffer, [in] ULONG iAddress, [in] ULONG nNumberOfByte, [out,retval] ULONG* result); 
```

我既不是 C# 程序员也不是经验丰富的 ATL 程序员！现在我将使用以下代码在 C# 中测试此函数：

```
byte [] b = new byte[100];
axObj.ReadUserMemory(b, 0, 100); 
```

但显然这段代码是错误的。如何调用这个方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:27:17.800

我认为 Peter R 有一个非常有效的观点，因为使用 COM 很复杂，因为它需要学习 COM 以及 C++ 和 C#，正如您所发现的。C++ 互操作是另一种选择，但这也需要学习第三种技术，称为 C++/CLI，它*可能*比 COM 更适合，但仍然存在问题。COM 和 C++/CLI 都是相当大而复杂的野兽，所以你最好只在 dll 中声明你需要的 C 函数并使用 P/Invoke，参见例如[http://msdn.microsoft.com/en-us /杂志/cc164123.aspx](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)。如果是这样，您可以在[如何使用 C# 中的 p/invoke 传递指向数组的指针中找到您想要的魔法？](https://stackoverflow.com/questions/289076/how-can-i-pass-a-pointer-to-an-array-using-p-invoke-in-c).

假设您想继续沿 COM 路线走下去，我尝试了一下，对我来说，您似乎需要通过嵌入在 COM dll 中的类型库来获得可以工作的东西。简而言之，我无法使 COM 互操作与 . 一起工作`unsigned char *lpBuffer`，尽管也许其他人可以！使用的类型库友好类型是 SAFEARRAY，它本质上是 VB 喜欢查看数组的方式。

在这种情况下，您的 idl 变为

```
[id(1)] HRESULT ReadUserMemory([out] SAFEARRAY(byte)* buffer, [in] ULONG iAddress, [in] ULONG nNumberOfByte, [out,retval] ULONG* result); 
```

您的 C++ 实现看起来像这样

```
STDMETHODIMP CObj::ReadUserMemory(SAFEARRAY ** pBuffer, ULONG iAddress, ULONG nNumberOfByte, ULONG* result)
{
    if (pBuffer== nullptr)
        return E_POINTER;

    SAFEARRAY*& psa = *pBuffer;
    SAFEARRAYBOUND rgsabound[1];
    rgsabound[0].lLbound = 0;
    rgsabound[0].cElements = nNumberOfByte;
    psa = SafeArrayCreate(VT_UI1, 1, rgsabound);
    if(psa == NULL)
        return E_OUTOFMEMORY;

    void* data = nullptr;
    SafeArrayAccessData(psa, &data);
    for(int i=0; i<nNumberOfByte; ++i) {
        ((char*)data)[i] = (char)i;
    }
    SafeArrayUnaccessData(psa);

    return S_OK;
} 
```

`SafeArrayUnaccessData`即使`SafeArrayAccessData`失败后的代码也应该调用。

C# 客户端现在看起来像这样，特别是我们已经从 更改`byte[]`为`System.Array`

```
 static void Main(string[] args)
    {
        RUMLib.IObj axObj = new RUMLib.Obj();
        Array a = null;
        axObj.ReadUserMemory(out a, 2, 6);
        for (int i = 0; i < a.Length; ++i)
        {
            Console.Write("{0},", a.GetValue(i));
        }
        Console.WriteLine();
    } 
```

程序的输出是

> 0,1,2,3,4,5,

请注意，当数据从 SAFEARRAY 返回到 C# 数组时，可能会进行编组，即复制数据。这对您来说可能会非常昂贵，在这种情况下建议您使用 C++/CLI 或 P/Invoke。

# xamarin.ios - 最新 Alpha 4.1.0 (build 45) 上的 MonoTouch 应用程序

> ID：16078296
> 
> 赞同：0
> 
> 时间：2013-04-18T08:42:38.187
> 
> 标签：xamarin.ios

昨天我已经更新到最新版本的 xamarin.ios，我遇到的问题是现有应用程序不再使用数据源，例如我有一个带有自定义数据源的简单表格视图，一切运行正常，无一例外，但是当它被执行时，例如 GetCell 或 RowsInSection 不会被调用。你知道为什么吗？可能需要对我的代码进行一些更改以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:57:48.103

我找到了它，在旧版本中，没有它 UITableViewDataSource 可以正常工作，只需添加此覆盖即可修复它。

```
public override int NumberOfSections (UITableView tableView)
{
    return 1;
} 
```

# android - Android：JPEG过早结束

> ID：16078300
> 
> 赞同：1
> 
> 时间：2013-04-18T08:42:45.200
> 
> 标签：android, file-upload, jpeg, bitmapfactory

我必须向服务器发送一些从相机拍摄的 JPEG 文件。当然，仅通过文件流就可以做到这一点。我的代码（对于每个文件）如下所示：

```
struct3.put("type", "image/jpeg");
f = new File(fileName);
FileInputStream fis = new FileInputStream(f);
BufferedInputStream bis = new BufferedInputStream(fis);
byte[] buffer = new byte[(int)f.length()];
bis.read(buffer);
fis.close();
struct3.put("bits", buffer); 
```

毕竟我发送了一个结构：

```
Object[] params3 = { bid, login, pass, struct3 };
Object response2 = client.send("my_function", params3); 
```

当我发送小文件时，一切都是正确的，但是当文件更大时，我收到“内存不足异常”。

我的解决方案是压缩 JPEG 文件：

```
struct3.put("type", "image/jpeg");
final Options opts = new Options();
opts.inSampleSize = 2;
Bitmap bitmap = BitmapFactory.decodeFile(fileName, opts);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 70, stream); 
byte[] byteArray = stream.toByteArray();
struct3.put("bits", byteArray);
Object[] params3 = { bid, login, pass, struct3 };
Object response2 = client.send("my_function", params3); 
```

但是这种方式在服务器端产生了一个错误：“JPEG 文件过早结束”。

有什么方法可以在发送之前更正 JPEG 文件吗？我知道JPEG应该以EOI（0xff，0xfd）结尾。

如何检查并进行更正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:58:10.450

由于照片已上传到 WordPress，因此没有日志猫报告，并且只有轨道是来自 gdlib 的警告。警告包含：“JPEG 文件过早结束”

虽然我解决了问题。我已经实现了检查 byteArray 是否以 0xFF,0xD9 结尾的过程，如果不是我添加两个字节：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 70, stream);
byte[] byteArray = stream.toByteArray();
int byteToSendSize = byteArray.length;
boolean proper = ((byteArray[byteArray.length-2])==((byte)0xff)) 
    && ((byteArray[byteArray.length-1])==((byte)0xd9));
if(!proper)
byteToSendSize +=2;
byte[] byteToSend = new byte[byteToSendSize];

for (int i = 0; i < byteArray.length; i++) {
byteToSend[i] = byteArray[i];
}
if(!proper){
  byteToSend[byteArray.length] = (byte) 0xff;
  byteToSend[byteArray.length+1] = (byte) 0xd9;
}
struct3.put("bits", byteToSend); 
```

# python - python：最好有一个适当的for循环还是几个oneliner for循环

> ID：16078308
> 
> 赞同：0
> 
> 时间：2013-04-18T08:43:11.220
> 
> 标签：python, performance, loops, numpy

我有几行看起来像这样的python代码：

```
myVar1 = np.array([d['key1'] for d in D[0]['Log']]) 
```

所有键/值都具有相同的长度。

制作一个循环并导入它们更好（性能/cpu/内存），还是更好的几个一个衬垫？

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:46:52.697

您可以随时使用[`timeit`](http://docs.python.org/2/library/timeit.html)和测量它。

# accessibility - 用于 JAWS 开发的文本控制台？

> ID：16078313
> 
> 赞同：9
> 
> 时间：2013-04-18T08:43:31.017
> 
> 标签：accessibility, wai-aria, screen-readers, jaws-screen-reader

我正在开发一个 Web 应用程序，我想通过屏幕阅读器使其易于使用。在 JAWS 中测试东西非常耗时。是否可以让 JAWS 显示文本而不是阅读文本？我不想在开发过程中真正听到内容。我只是想看看 JAWS 会读到什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T21:39:01.243

据我所知，Jaws 没有语音查看器。但是，您可以使用“/z”开关将所有语音输出写入日志文件。不幸的是，当屏幕阅读器运行时，您无法在文本编辑器中查看日志文件，因为它已被锁定。打开命令提示符或按 Win+r 调出“运行”对话框，然后键入：“jaws_executable”/z“log_file”其中“jaws_executable”是 Jaws 应用程序的完整路径和文件名，“log_file”是位置和名称的语音日志文件。重要提示：“/z”和日志文件名之间不应有空格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-08T13:33:41.747

这是一个旧线程，但由于它在我的搜索中名列前茅，我想我会更新它。JAWS 15 刚刚通过“语音历史”功能引入了此功能。请按照以下说明启用它：

> 如果您错过了 JAWS 说出的一条或多条消息，您可以按 **INSERT+SPACEBAR**，然后按**H**打开一个结果查看器窗口，其中最多包含合成器说出的最后 50 条公告。当“语音历史”窗口打开时，您将被置于包含最新公告的行中。要清除历史记录，请按 **INSERT+SPACEBAR**，然后按**SHIFT+H**。当您锁定计算机或完全注销时，历史记录也会被清除。如果您不希望 JAWS 保留语音历史记录，请清除设置中心中的启用语音历史记录复选框。

[在JAWS 15 What's New](http://www.freedomscientific.com/downloads/jaws/JAWS-whats-new.asp)文档中阅读更多内容，*位于面向纯语音用户的新语音历史*记录下。

对于那些坚持使用 JAWS 14 的人，使用“/z”日志的 Nektarios Paisios 回答对我来说效果最好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T14:17:00.397

我相信 JAWS 中有一个视觉指示器，但我的 JAWS 版本有点不稳定。如今，NVDA 的播放方式与 JAWS 非常相似，因此您可以使用它，并且它有一个语音输出控制台：右键单击系统托盘中的 NVDA 图标，选择工具，然后选择语音查看器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:21:24.707

查看屏幕阅读器“看到”的最简单的方法是禁用 CSS。这将向您显示屏幕阅读器可以访问的页面上的所有内容。这将使您对开发过程中发生的事情有一个很好的了解，直到您想要进入更复杂的东西。

请参阅[http://www.iheni.com/quick-tip-testing-web-content-for-screen-readers-without-a-screen-reader/](http://www.iheni.com/quick-tip-testing-web-content-for-screen-readers-without-a-screen-reader/)。这个网站也有很多有用的信息[http://webaim.org/articles/](http://webaim.org/articles/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T00:14:20.897

您可以在开始菜单 > 所有程序 > JAWS 14.0 > 盲文查看器中启用盲文查看器。

盲文查看器将呈现将发送到盲文显示器的可视文本输出。它有时使用缩写或速记，但它是语音输出的近似表示。

另请查看[Fangs Screen Reader Emulator](https://addons.mozilla.org/en-us/firefox/addon/fangs-screen-reader-emulator/) for Firefox。它将以正确的阅读顺序呈现屏幕阅读器在页面上宣布的内容的文本输出，尽管它不呈现动态内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T15:27:59.180

JAWS 在“实用程序”文件夹中提供了一个盲文查看器，它将呈现焦点中的任何文本。

# imagemagick - 无法将 NCL 高分辨率 postscript 转换为 png

> ID：16078316
> 
> 赞同：0
> 
> 时间：2013-04-18T08:43:40.047
> 
> 标签：imagemagick, png, postscript, imagemagick-convert, rhel5

我从 NCL 脚本中获得了一个附有 mpDataBaseVersion = "HighRes"（高分辨率地图）的后记文件。我在 RHEL 5.6 i386 中运行了 ImageMagick 6.2.8。

当我跑的时候`convert high-resolution.ps test.png`，我得到了：

```
Error: /undefinedresult in --ashow--

Operand stack:
   0   0   ( )

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1910   1   3   %oparray_pop   1909   1   3   %oparray_pop   1893   1   3   %oparray_pop   1787   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--

Dictionary stack:
   --dict:1171/1684(ro)(G)--   --dict:0/20(G)--   --dict:143/200(L)--

Current allocation mode is local
Current file position is 629039 
```

但是在使用 ImageMagick 5.5.6 的 RHEL 3 i386 中，相同的后记转换没有错误，怎么会？

我用谷歌搜索了一段时间，但我仍然不知道 undefinedresult 导致 ashow 错误。
执行堆栈是什么意思？

* * *

[更新]

谢谢@Fred 和@Ken！
我在下面重组了我的问题：

我有一个很大的 PostScript 文件 (9.3 MB)：**[high_resolution.ps](https://www.dropbox.com/s/4uylrqsal31dmjq/high_resolution.ps)**

电脑甲：

*   红帽企业 Linux ES 第 3 版（Taroon 更新 3）i386
*   转换版本：ImageMagick 5.5.6 04/01/03 Q16
*   Ghostscript 版本：GNU Ghostscript 7.05 (2002-04-22)

电脑乙：

*   红帽企业 Linux 服务器版本 5.6 (Tikanga) i386
*   转换版本：ImageMagick 6.2.8 05/07/12 Q16
*   Ghostscript 版本：GPL Ghostscript 8.70 (2009-07-31)

`convert high_resolution.ps high_resolution.png` **在 PC A 中工作，但在 PC B 中无效。**

错误在上面。
我检查了 Ghostscript 更新日志，我对此一无所知（也许我只是错过了它？）

非常感谢！谢谢！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:24:42.683

ashow 显示文本，并为字符添加了额外的空间。堆栈 0 0 告诉系统向字符添加零额外空间。( ) 是要显示的文本，它看起来是一个空格，但如果没有看到二进制文件的实际文件，它也可能是一个不可显示的字符。

如果字符是未定义的特殊字符，例如制表符或 null，则 undefinedresult 是有意义的。有一个只有 1 个字符的字符串也可能没有意义。

如前所述，什么版本的ghostscript 和查看实际文件会有所帮助。事后转储并不是特别有用，但执行堆栈看起来像是错误来自更复杂的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:28:00.323

几乎可以肯定您使用的是不同版本的 Ghostscript（ImageMagick 使用它来处理 PostScript）。您在每个版本上安装了哪个版本的 Ghostscript？

Undefinedresult 的意思是，操作的结果是未定义的（这通常是由被零除引起的）。执行堆栈告诉您解释器遇到错误时执行堆栈上的内容。除非您了解 Postscript（老实说，Ghostscript 解释器），否则它不会告诉您任何有意义的信息。

如果没有看到导致错误的文件，我就不能再说什么了。请记住，PostScript 是一种编程语言，因此错误消息只是一个起点。

更新

我已经检索了该文件，并且可以确认通过当前版本的 Ghostscript 运行它时出现错误。Adobe Acrobat Distiller 给出了一个非常相似的错误（未定义的结果与 setcachedevice），因此它实际上可以确定该文件是非法的。当我有机会确定原因时，我会说更多。

附带说明一下，这两个版本的 Ghostscript 都非常老，当前版本是 9.07

[更新 2]

违规行非常靠近文件的开头：

/Helvetica 0 Fs 0 0 ( ) 作为 Gr

因为 PostScript 是一种编程语言，所以这个片段使用了程序中定义的一些过程。它所做的是找到一个名为“Helvetica”的字体，将其缩放到 0 的大小，然后显示字符串“”，将每个字形的宽度调整为 0。

其中有几个部分显然是无稽之谈；将字体缩放到 0 将使其无用，最多一个字形将标记 1 个像素。使用运算符显示字符串以将每个字形的宽度调整为 0 显然是没有意义的。更智能的软件不会生成这样的 PostScript 程序，但从相当简单的文件序言中可以看出，制作者显然在生成 PostScript 方面不是很聪明。

基本上问题正是 GS 所说的，x 和 y 宽度是通过使用矩阵来调整的，并且将矩阵乘法应用于字体大小为 0 的结果确实是未定义的。

您最好的选择可能是返回原始应用程序并删除导致文本“ ”发出的任何内容。

如果由于某种原因这是不可能的，您可以利用 PostScript 是一种编程语言这一事实​​，您可以自己重新定义 /ashow 运算符，如果字体大小为 0，则让它不执行任何操作，例如：

/old_ashow /ashow load def /ashow {currentfont /FontMatrix get aload pop pstack 0 1 4 {pop add} for 0 eq {pop pop pop}{old_ashow}ifelse} bind def

通常我会建议把它放在一个新文件中，并在你想要处理的文件之前通过 Ghostscript 运行它（例如'gs mod.ps high_resolution.ps'），但是因为你使用的是 ImagMagick，所以你不能这样做。因此，如果您想这样做，您需要修改 high_resolution.ps 文件并将其放在文件的顶部。每当您修改 PostScript 文件时，您必须小心使用可以处理二进制文件且不会更改 CR/LF 行结尾的编辑器。

请注意，我不建议这样做，最好修复生成此 PostScript 程序的原始文件或脚本，以便您可以在其他地方使用它（例如打印）。就目前而言，它正在生产非法的 PostScript。

至于为什么（非常）旧版本的 Ghostscript 不会发生错误；这几乎可以肯定是一个疏忽。Adobe Postscript 语言参考手册列出了每个操作员可能出现的错误，但并未列出引发错误的所有可能情况。很明显，这个错误条件是在 7.05 发布之后添加的，几乎可以肯定，当问题引起开发人员注意时。

# php - PHP - 语法 [数组/变量]

> ID：16078324
> 
> 赞同：0
> 
> 时间：2013-04-18T08:44:00.203
> 
> 标签：php, arrays, variables

我想用来`stripos()`过滤一个变量`$background`，如果找到的字符返回键值为`$background`;

`if(stripos($background, $color) !== false) { $background = the value of keys in $color } else { $Background = 'No Color Found'};`

```
$color = array (
         'R' => "Red",
         'Y' => "Yellow",
         '$bgcolor' => array (
                       '#ffffd0' => "Yellow",
                       '#ddffdd' => "Green", )); 
```

变量 $bgcolor 先前定义并返回十六进制颜色代码。上面的语法正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:46:07.087

用于. `double quotes`_ 带有忽略变量的`variable key`字符串。`single quotes`

```
<?php
header('Content-Type: text/plain;');

$x = 'check';

$str = "$x";

echo $str, PHP_EOL;

$str = '$x';

echo $str, PHP_EOL;
?> 
```

显示：

```
check
$x 
```

* * *

对于您提供的其余部分代码，我想您想要这样的东西：

```
<?php
//header('Content-Type: text/plain;');

$background = '#ffffd0';

$color = array (
        'R' => "Red",
        'Y' => "Yellow",
        '#ffffd0' => "Yellow",
        '#ddffdd' => "Green"
    );

$result = array_key_exists($background, $color) ? $color[$background] : 'not set' ;

echo $result;
?> 
```

显示：

```
Yellow 
```

# php - PHP循环通过XML错误：试图获取非对象的属性

> ID：16078328
> 
> 赞同：0
> 
> 时间：2013-04-18T08:44:18.840
> 
> 标签：php, xml

```
function loadFilesToArrays(){
    $notpromo1Array = simplexml_load_file('pages/hegnar/source/1/notpromo-1_08_04_2013_1.xml');
        foreach($notpromo1Array as $xml){
            echo $xml -> getName();
            echo "<br>";
            echo $xml -> ORDREHODE -> SluttkundeNr;
            echo "<br>";
        }
} 
```

我的 XML 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<IS_DATA>
<ORDRER class="linked-list">
    <ORDREHODE>
        <ORDREKUNDENR>10541</ORDREKUNDENR>
        <SluttkundeNr>1240</SluttkundeNr>
                    <AND OTHER PROPERTIES></AND OTHER PROPERTIES>..........
    </ORDREHODE>
    <ORDREHODE>
        <ORDREKUNDENR>10541</ORDREKUNDENR>
        <SluttkundeNr>1344</SluttkundeNr>
                    <AND OTHER PROPERTIES></AND OTHER PROPERTIES>..........
    </ORDREHODE>
    <ORDREHODE>
        ETC ETC ETC ..................
    </ORDREHODE>
</ORDRER>
</IS_DATA> 
```

并且 XML 已正确结束，等等，我使用了 notepad++ 的 xml 验证器。

我不明白为什么当我调用 loadFilesToArray 函数时，我收到此错误通知：尝试在第 104 行的 /path/to/file/page1.php 中获取非对象的属性 IS_DATA 毕竟包含在大括号中，并且单引号，正如我看到很多人在想要从 XML 中回显在 XML 中的属性名称中具有特殊字符的数据时所指的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:53:36.427

请立即提供您的 xml 文件的正确路径 a.xml 和 test.php 都在同一个文件夹中

**一个.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<IS_DATA>
<ORDRER class="linked-list">
    <ORDREHODE>
        <ORDREKUNDENR>10541</ORDREKUNDENR>
        <SluttkundeNr>1240</SluttkundeNr>
                    <ANDOTHERPROPERTIES></ANDOTHERPROPERTIES>
    </ORDREHODE>
    <ORDREHODE>
        <ORDREKUNDENR>10541</ORDREKUNDENR>
        <SluttkundeNr>1344</SluttkundeNr>
                    <ANDOTHERPROPERTIES></ANDOTHERPROPERTIES>
    </ORDREHODE>
    <ORDREHODE>
        ETC ETC ETC ..................
    </ORDREHODE>
</ORDRER>
</IS_DATA> 
```

**测试.php**

```
 <?php
$notpromo1Array = simplexml_load_file("a.xml");
foreach($notpromo1Array as $xml)
  {
    foreach($xml as $child)
    {
        echo $child->getName();
        echo "<br>";
        echo $child->SluttkundeNr;
        echo "<br>";
    } 
  }

 /*RESULT
  * ORDREHODE
    1240
    ORDREHODE
    1344
    ORDREHODE
  */

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:13:41.930

您需要调试您的代码：

```
foreach ($notpromo1Array as $xml)
{
    echo $xml->getName(), "\n";
} 
```

这为您提供了由 表示的元素的名称`$xml`：

```
ORDRER 
```

由于该元素没有任何子元素`<IS_DATA>`，simplexml 为您提供`NULL`. 然后你访问`->ORDRER`哪个`NULL`不起作用，因为它不是一个对象：

> 注意：试图获取非对象的属性

就是这么简单。只需访问正确的元素，就可以了：

```
foreach ($notpromo1Array as $xml)
{
    echo $xml->getName(), "\n";
    echo $xml->ORDREHODE->SluttkundeNr, "\n";
} 
```

输出：

```
ORDRER
1240 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:12:48.147

刚刚做了一个快速测试，这就是我想出的。替换你的**foreach**代码：

```
foreach($notpromo1Array as $xml){
   echo $xml->ORDREHODE->SluttkundeNr;
   echo "<br />";
} 
```

仅供参考，我使用以下 XML 文件作为示例，它打印了 1240：

```
<?xml version="1.0" encoding="UTF-8"?>  
<IS_DATA>
    <ORDRER class="linked-list">
        <ORDREHODE>
            <ORDREKUNDENR>10541</ORDREKUNDENR>
            <SluttkundeNr>1240</SluttkundeNr>
        </ORDREHODE>
    </ORDRER>
</IS_DATA> 
```

# ruby-on-rails - 您如何找到数组中某物的位置？

> ID：16078331
> 
> 赞同：1
> 
> 时间：2013-04-18T08:44:32.693
> 
> 标签：ruby-on-rails, arrays, forms, radio-button

用户编辑视图：

```
<%= form_for(@user, :html => {:multipart => true}) do |f| %>
    <%= f.text_field :name, placeholder: :name %>
    <%= f.submit "Save" %>

    <%= f.fields_for :photos do |photo_fields| %>
        <%= image_tag(photo_fields.object.photo.url(:user_thumbnail) %>
        <%= f.radio_button :avatar, @selected_photo_number %> 
```

因此，我会显示用户上传的所有照片，并在每张照片旁边显示一个单选按钮。我怎样才能做到这一点，以便当我单击第一个 @selected = 0 和第二个 @selected = 1 等等。基本上我需要知道照片在数组@user.photos[] 中的哪个位置。谢谢！

而不是`@selected_photo_number`我需要像`photo_fields.object.place`数组一样的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:46:26.980

我想你正在寻找`index`.

```
>> array = [1,2,3,4,5]
>> array.index(1) # 0
>> array.index(3) # 2 
```

`each_with_index`但是使用您的代码，我认为您正在寻找

```
<% f.object.photos.each_with_index do |photo, index| %>
  <%= f.fields_for :photos, [photo] do |photo_fields| %>
    <%= image_tag(photo_fields.object.photo.url(:user_thumbnail) %>
    <%= f.radio_button :avatar, index %> 
```

# moodle - 从 Moodle 论坛发送电子邮件的代码

> ID：16078334
> 
> 赞同：0
> 
> 时间：2013-04-18T08:44:37.610
> 
> 标签：moodle

有人可以知道从论坛发送电子邮件的代码在哪里吗？当有人在论坛中重播用户收到电子邮件的某个帖子时，我需要更改此电子邮件，如果有人告诉我代码（函数）从哪里发送此电子邮件，我将不胜感激。

最好的问候，乔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T10:54:46.520

如果我理解正确，您可能需要使用 /lib/moodlelib.php 中的内置函数“email_to_user”。

```
function email_to_user($user, $from, $subject, $messagetext, $messagehtml = '', $attachment = '', $attachname = '',
                       $usetrueaddress = true, $replyto = '', $replytoname = '', $wordwrapwidth = 79) 
```

# java - Logcat Null 检查返回误报

> ID：16078335
> 
> 赞同：0
> 
> 时间：2013-04-18T08:44:38.500
> 
> 标签：java, android, logcat

我正在做一个简单的测试（尝试对一个值进行空检查），只是为了踢球，我决定对一个假装/不存在的值进行空检查：“striiing”，它在我的源代码中的任何地方都不存在。然后我检查了我的 logcat 并意识到这个不存在的值显示为：

```
04-18 04:40:22.197: D/com.game.demo.Level1(15800): Broken Value! Debug! Debug! 
```

执行以下操作时：

```
 if ("striiing" != null) {
            Log.d(TAG, "Broken Value! Debug! Debug!");
 prefs.getBoolean("name", true);
 prefs.getBoolean("player", true);
 prefs.getBoolean("points", true);
 prefs.getBoolean("level", true);
 prefs.getBoolean("gear", true); 
```

谁能解释为什么不存在的值可能/将显示为 NOT null？这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:49:06.800

`"striiing"`是一个字符串字面量，在 Java 中是一个非空对象。试试这个：

```
String s = null;
if (s == null) ... 
```

它应该按预期工作。

# c++ - 如何编写一个HelloWorld 头文件？

> ID：16078336
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:44:43.283
> 
> 标签：c++, header

我在单个 cpp 文件 ( `tested.cpp`) 中有以下代码：

```
class tested {
        private:
                int x;
        public:
                tested(int x_inp) {
                        x = x_inp;
                }

                int getValue() {
                        return x;
                }
}; 
```

现在我想为这段代码写一个头文件。它应该怎么看？有了头文件后，我应该在我的 cpp 文件中更改什么。我想我的头文件应该是这样的：

```
class tested {
   private:
      int x;
   public:
      tested(int x);
      int getValue();
} 
```

然后在我的 cpp 文件中我应该`#include "tested.h"`. 我还需要通过以下方式替换整个班级：

```
tested::tested(int c_inp) {
   x = x_inp;
}

tested::getValue(){
   return x;
} 
```

这样对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:22:29.700

为了使您的头文件更通用，您可以使用`#ifndef`这里 的宏[http://www.fredosaurus.com/notes-cpp/preprocessor/ifdef.html](http://www.fredosaurus.com/notes-cpp/preprocessor/ifdef.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:48:07.457

您还需要为构造函数和析构函数以外的方法键入返回类型：

```
int tested::getValue(){
   return x;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:08:29.757

是的，正如弗洛伊德之前所说，通常使用#ifndef 来保护头文件免受多次包含（尤其是在大型项目中，或者如果您的文件可能是其中的一部分）。

其他一些事情（基本上是风格问题）：

*   不必为类的第一个成员输入“private:”，因为默认情况下所有类成员都是私有的。
*   通常在类的每个属性的名称之前（或之后）放置一个字符（例如“x_”而不是“x”）

# c# - 在数据更改时异步更新 asp.net 中继器

> ID：16078339
> 
> 赞同：1
> 
> 时间：2013-04-18T08:44:58.587
> 
> 标签：c#, asp.net, .net, ajax, mvvm

我希望一个 asp.net 转发器控件在它指向的实际数据被更新时自行更新。我不是在寻找一种解决方案，其中发生按钮单击并且每次中继器（位于更新面板内）都绑定到数据源。

例如：在我的页面加载中，我有这个

```
Page_Load(){
   myRepeater.DataSource = ListOfStringObj;
   myRepeater.DataBind();
} 
```

现在，如果在某个时刻 ListOfStringObj 得到更新，那么转发器应该反映这些更改，而无需将其再次显式绑定到数据源。这甚至可能吗？我在这里并不特别关注转发器控制，它也可以是一个网格视图。如果没有，任何人都可以解释一下吗？

PS：使用基于 MVVM 的 Knockout js 可以实现此类操作

谢谢，沙拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:57:09.573

我希望这个用于 ASP.NET 的 MVVM 将帮助您实现这一目标：[asp.net MVVM](http://aspnetmvvm.codeplex.com/)

# eclipse - 如何使用 sbt 运行 Lift-2.4 网络应用

> ID：16078344
> 
> 赞同：0
> 
> 时间：2013-04-18T08:45:15.850
> 
> 标签：eclipse, scala, jetty, sbt, lift

我正在尝试按照本教程运行 Lift-2.4 Web 应用程序[http://scala-ide.org/docs/tutorials/lift24scalaide20/index.html](http://scala-ide.org/docs/tutorials/lift24scalaide20/index.html)

**问题是如何运行这个应用程序（在码头、tomcat 或其他服务器上）？！**

我正在尝试命令 jetty-run，但出现此错误：

```
> jetty-run

[error] Not a valid command: jetty-run
[error] Expected '/'
[error] Expected ':'
[error] Not a valid key: jetty-run (similar: run)
[error] jetty-run
[error]          ^ 
```

当我做容器：开始时，我也有一个错误：

```
> container:start

[error] Not a valid key: start (similar: state, target, start-year)
[error] container:start
[error] 

           ^ 
```

我的配置是：

文件“build.sbt”包含：

```
name := "lift-basic"

organization := "my.company"

version := "0.1-SNAPSHOT"

scalaVersion := "2.9.1"

EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource

libraryDependencies ++= {
val liftVersion = "2.4"
Seq(
"net.liftweb" %% "lift-webkit" % liftVersion % "compile",
"net.liftweb" %% "lift-mapper" % liftVersion % "compile",
"org.mortbay.jetty" % "jetty" % "6.1.26" % "test",
"junit" % "junit" % "4.7" % "test",
"ch.qos.logback" % "logback-classic" % "0.9.26",
"org.scala-tools.testing" %% "specs" % "1.6.9" % "test",
"com.h2database" % "h2" % "1.2.147"
)
} 
```

文件“.sbt/plugins/build.sbt”包含：

```
//Eclipse Plugin

resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.0.0") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:01:44.673

听起来您需要`xsbt-web-plugin`为`sbt`.

此处提供说明：[https ://github.com/JamesEarlDouglas/xsbt-web-plugin/wiki](https://github.com/JamesEarlDouglas/xsbt-web-plugin/wiki)

那应该为您提供`container:start`罐子包装。

# java - 在 Java 中将 ByteBuffer 导出为 Little Endian 文件

> ID：16078346
> 
> 赞同：0
> 
> 时间：2013-04-18T08:45:33.213
> 
> 标签：java, import, export, endianness, bytebuffer

我想将 ByteBuffer 作为 Little Endian 导出到文件中，但是当我再次读取文件时，我必须将其作为 Big Endian 读取才能获得正确的值。如何以可以在创建的文件中读取为 Little Endian 并获得正确值的方式导出 ByteBuffer？

```
 //In the ByteBuffer tgxImageData there are the bytes which I want to export and import again, the ByteBuffer is ordered as little endian

    //export ByteBuffer into File
    FileOutputStream fos = new FileOutputStream(outputfile);            
    tgxImageData.position(0);
    byte[] tgxImageDataByte = new byte[tgxImageData.limit()];
    tgxImageData.get(tgxImageDataByte);         
    fos.write(tgxImageDataByte);            
    fos.close();

    //import File into ByteBuffer
    FileInputStream fis2 = new FileInputStream(outputfile);     
    byte [] arr2 = new byte[(int)outputfile.length()];
    fis2.read(arr2);
    fis2.close();           
    ByteBuffer fileData2 = ByteBuffer.wrap(arr2);

    fileData2.order(ByteOrder.LITTLE_ENDIAN);           
    System.out.println(fileData2.getShort(0));          //Wrong output, but here should be right output
    fileData2.order(ByteOrder.BIG_ENDIAN);          
    System.out.println(fileData2.getShort(0));          //Right output, but here should be wrong output 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:31:12.907

这是一个如何将 shorts 写为 little endian 的示例

```
 FileOutputStream out = new FileOutputStream("test");
    ByteBuffer bbf = ByteBuffer.allocate(4);
    bbf.order(ByteOrder.LITTLE_ENDIAN);
    bbf.putShort((short)1);
    bbf.putShort((short)2);
    out.write(bbf.array());
    out.close(); 
```

你需要在你的代码中做类似的事情

# python - 课堂上的 Django 订购代码

> ID：16078352
> 
> 赞同：1
> 
> 时间：2013-04-18T08:45:47.730
> 
> 标签：python, django, django-forms

我需要一个更好的解决方案来解决我想要在下面实现的目标。我有一个表格，这个表格需要规定以下项目 的**代码顺序......**

```
class ContactCSVModel(CsvModel):
    first_name = CharField()
    last_name = CharField()
    company = CharField()
    mobile = CharField()
    group = DjangoModelField(Group)
    contact_owner = DjangoModelField(User) 
```

**例如...**

```
 class ContactCSVModel(CsvModel):
    if form.col1.value == "first_name":
        first_name = CharField()
    elif form.col1.value == "last_name":
        last_name = CharField() 
```

**或许**

```
 class ContactCSVModel(CsvModel):
         [column.col1.value] = CharField()
         [column.col2.value] = CharField() 
```

但这不会起作用，因为它会尝试分配值而不是使其成为 first_name = CharField() 等

如您所见，我最终对 col2、col3 等再次执行此操作，并最终得到了“**很多**”的“if 语句”。

**有没有更好的方法，例如？**

谢谢。

**表格.py**

```
COL_CHOICES = [
    ('NONE', 'No Import'),
    ('first_name', 'First Name'),
    ('last_name', 'Last Name'),
    ('company', 'Company'),
    ('mobile', 'Mobile Number'),
    ('email', 'Email Address'),
    ]

class ConfiguratorForm(forms.Form):
    col1 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col2 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col3 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col4 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col5 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name') 
```

**这是我现在未受影响的课程：**

```
def import_data(column, *args, **kw):
    # make custom ContactCSVModel
    class ContactCSVModel(CsvModel):
        # IF column == x

        first_name = CharField()
        mobile = CharField()
        last_name = CharField()
        company = CharField()
        group = DjangoModelField(Group)
        contact_owner = DjangoModelField(User)

        class Meta:
            delimiter = ","
            dbModel = Contact
            update = {'keys': ["mobile", "group"]}

    return ContactCSVModel.import_data(*args, **kw) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:07:14.913

之后您可以将字段添加到模型中吗，例如：

```
class ContactCSVModel(CsvModel):
    pass

for form_field in form:
    field_name = form_field.value
    model_field = CharField()
    model_field.contribute_to_class(ContactCSVModel, field_name) 
```

例如（使用 Django 1.5）：

```
from django.db import models 

class ContactCSVModel(models.Model): 
    pass 

for field_name in ('first_name', 'mobile', 'last_name'): 
    model_field = models.CharField() 
    model_field.contribute_to_class(ContactCSVModel, field_name) 

print [f.name for f in ContactCSVModel._meta.fields]

# prints:
[u'id', 'first_name', 'mobile', 'last_name'] 
```

# jquery - jquerymobile 1.3.1 & jquery 2.0 测试版

> ID：16078354
> 
> 赞同：3
> 
> 时间：2013-04-18T08:45:48.480
> 
> 标签：jquery, jquery-mobile

我看过一些人们成功实现这一点的帖子；我的目标是在 Jquery mobile 上使用更精简的 Jquery 版本，看看是否可以提高速度。

但是，在页面之间导航时出现错误（在以前版本的 Jquery 中确实有效）

错误是：

未捕获的类型错误：无法读取未定义的属性“选项” - jquery.mobile-1.3.1.custom.js:10313

```
 _create: function () {
            var self = this,
                $el = self.element,
                page = $el.closest(":jqmData(role='page')"),
                _getPageTheme = function () {
                    var $theme = $.data(page[0], "mobilePage").options.theme 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:55:59.830

可能，这是一个兼容性问题：

[http://forum.jquery.com/topic/jquery-2-0-0-compatibility](http://forum.jquery.com/topic/jquery-2-0-0-compatibility)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T01:39:34.010

在尝试了一切之后，页面加载仍然停留在加载微调器上。这似乎只是加载页面文件而不是多页面文件时的问题。

改回 jQuery 1.9.1 为我解决了这个问题

# c# - 如何在openFileDialog中保存最后一个文件夹？

> ID：16078362
> 
> 赞同：14
> 
> 时间：2013-04-18T08:46:04.057
> 
> 标签：c#, openfiledialog

如何使我的应用程序商店成为最后打开的路径，`openFileDialog`并在新打开后恢复它？

```
OpenFileDialog openFileDialog1 = new OpenFileDialog();
openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
    acc_path = openFileDialog1.FileName;
    Settings.Default.acc_path = acc_path;

    foreach (string s in File.ReadAllLines(openFileDialog1.FileName))
    {
        accs.Enqueue(s);
    }
    label2.Text = accs.Count.ToString();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T09:05:06.100

这是最简单的方法：[FileDialog.RestoreDirectory](http://msdn.microsoft.com/en-US/library/system.windows.forms.filedialog.restoredirectory%28v=vs.110%29.aspx)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-18T08:51:40.963

更改设置后，您必须致电

```
Settings.Default.Save(); 
```

在你打开你设置的 OpenFileDialog 之前

```
openFileDialog1.InitialDirectory = Settings.Default.acc_path; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T08:49:23.427

[我认为您使用SetCurrentDirectory](http://msdn.microsoft.com/it-it/library/system.io.directory.setcurrentdirectory.aspx)来管理操作系统的当前目录就足够了。因此，在下一个对话框打开时，它将选择该路径。

或者只是将路径保存到应用程序的某个变量中并使用
[FileDialog.InitialDirectory](http://msdn.microsoft.com/it-it/library/system.windows.forms.filedialog.initialdirectory.aspx)属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-22T17:59:32.247

我发现您所要做的就是不设置初始目录，对话框会记住您上次保存/打开的位置。即使在应用程序关闭并重新打开后，这也会记住。在注释掉初始目录的情况下尝试此代码。上面的许多建议也将起作用，但如果您不是在寻找额外的功能，这就是您所要做的。

```
 private void button1_Click(object sender, EventArgs e)
    {
        Stream myStream = null;
        OpenFileDialog openFileDialog1 = new OpenFileDialog();

        //openFileDialog1.InitialDirectory = "c:\\";
        openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
        openFileDialog1.FilterIndex = 2;

        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            try
            {
                if ((myStream = openFileDialog1.OpenFile()) != null)
                {
                    using (myStream)
                    {
                        // Insert code to read the stream here.
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-27T08:51:23.977

以下是确保 OpenFileDialog 将在用户上次选择的目录中打开的所有内容，在您的应用程序的生命周期内。

```
OpenFileDialog OpenFile = new OpenFileDialog();
OpenFile.RestoreDirectory = false; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-09T16:11:31.220

我知道这是一个旧线程，但我无法找到我喜欢的相同问题的解决方案，所以我开发了自己的解决方案。我在 WPF 中做到了这一点，但它在 Winforms 中应该几乎相同。

本质上，我使用一个`app.config`文件来存储我的程序的最后一个路径。

当我的程序启动时，我读取配置文件并保存到全局变量。下面是我在程序启动时调用的类和函数。

```
public static class Statics
{
    public static string CurrentBrowsePath { get; set; }

    public static void initialization()
    {
        ConfigurationManager.RefreshSection("appSettings");
        Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

        CurrentBrowsePath = ConfigurationManager.AppSettings["lastfolder"];
    }
} 
```

接下来我有一个按钮，可以打开文件浏览对话框并将`InitialDirectory`属性设置为存储在配置文件中的内容。希望这有助于任何一个谷歌搜索。

```
 private void browse_Click(object sender, RoutedEventArgs e)
    {
        OpenFileDialog open_files_dialog = new OpenFileDialog();
        open_files_dialog.Multiselect = true;
        open_files_dialog.Filter = "Image files|*.jpg;*.jpeg;*.png";
        open_files_dialog.InitialDirectory = Statics.CurrentBrowsePath;

        try
        {
            bool? dialog_result = open_files_dialog.ShowDialog();

            if (dialog_result.HasValue && dialog_result.Value)
            {
                string[] Selected_Files = open_files_dialog.FileNames;

                if (Selected_Files.Length > 0)
                {
                    ConfigWriter.Update("lastfolder", System.IO.Path.GetDirectoryName(Selected_Files[0]));
                }

                // Place code here to do what you want to do with the selected files.
            }
        }
        catch (Exception Ex)
        {
            MessageBox.Show("File Browse Error: " + Environment.NewLine + Convert.ToString(Ex));
        }
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-18T08:50:49.587

您可以使用 InitialDirectory 属性：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.filedialog.initialdirectory.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.filedialog.initialdirectory.aspx)

```
OpenFileDialog openFileDialog1 = new OpenFileDialog();
openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
openFileDialog1.InitialDirectory = previousPath;
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
    previousPath = Path.GetDirectoryName(openFileDialog1.FileName);
    acc_path = openFileDialog1.FileName;
    Settings.Default.acc_path = acc_path;

    foreach (string s in File.ReadAllLines(openFileDialog1.FileName))
    {
        accs.Enqueue(s);
    }
    label2.Text = accs.Count.ToString();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-25T21:43:46.823

如果你使用

```
Dim myFileDlog As New OpenFileDialog() 
```

然后你可以用它来恢复最后一个目录

```
myFileDlog.RestoreDirectory = True 
```

这不是

```
myFileDlog.RestoreDirectory = False 
```

（在 VB.NET 中）

# php - 用指向特定数字的链接替换关键字而不是php中的全部

> ID：16078365
> 
> 赞同：1
> 
> 时间：2013-04-18T08:46:17.200
> 
> 标签：php

我想用 php 中的链接替换一个关键字，但问题是我只想将它限制为两个关键字，如果字符串中有两个以上的关键字，那么只有两个被链接替换，其余的都是原样。

```
$string = "hi swimming,  i like to swimming, swimming is fun";
$keyword = "swimming";
$link = "http://www.mysite.com"; 
```

这里我想将前两个关键字替换为链接，第三个保持不变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:50:42.693

使用[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)，它允许您指定替换计数的限制：

```
$regex = '/'.preg_quote($keyword, '/').'/';
$result = preg_replace($regex, $link, $string, 2); 
```

# python - 通过 rauth 重用 OAuth1 授权令牌

> ID：16078366
> 
> 赞同：6
> 
> 时间：2013-04-18T08:46:19.153
> 
> 标签：python, oauth, rauth

基于[rauth](https://github.com/litl/rauth)示例中的脚本，我`twitter`使用`rauth`( )实现了以下客户端实现：`OAuth1``twitter-timeline-cli.py`

```
from rauth.service import OAuth1Service

class TwitterClient:

    KNOWN_USERS = {
        'user1' : ("xxx", "yyy", "2342354"), # These should be real tokens
    }

    def __init__(self):
        # Get a real consumer key & secret from https://dev.twitter.com/apps/new
        self.twitter = OAuth1Service(
            name='twitter',
            consumer_key=TWITTER_CONSUMER_KEY,
            consumer_secret=TWITTER_CONSUMER_SECRET,
            request_token_url='https://api.twitter.com/oauth/request_token',
            access_token_url='https://api.twitter.com/oauth/access_token',
            authorize_url='https://api.twitter.com/oauth/authorize',
            base_url='https://api.twitter.com/1/')

    def authorize(self):
        request_token, request_token_secret = self.twitter.get_request_token()
        authorize_url = self.twitter.get_authorize_url(request_token)
        print 'Visit this URL in your browser: ' + authorize_url
        pin = raw_input('Enter PIN from browser: ')
        return request_token, request_token_secret, pin

    def init_session(self, user):
        if user in self.KNOWN_USERS :
            request_token, request_token_secret, pin = self.KNOWN_USERS[user]
        else:
            request_token, request_token_secret, pin = self.authorize()
        session = self.twitter.get_auth_session(request_token,
                                                request_token_secret,
                                                method='POST',
                                                data={'oauth_verifier': pin})
        return session

    def list_tweets(self, user):
        session = self.init_session(user)
        params = {'include_rts': 1,  # Include retweets
                  'count': 10}       # 10 tweets

        r = session.get('statuses/home_timeline.json', params=params)

        for i, tweet in enumerate(r.json(), 1):
            handle = tweet['user']['screen_name'].encode('utf-8')
            text = tweet['text'].encode('utf-8')
            print '{0}. @{1} - {2}'.format(i, handle, text)

tc = TwitterClient()

tc.list_tweets('user1') 
```

这个想法是，如果用户未知，则请求他授权应用程序。另一方面，如果用户已经授权了这个应用程序，那么授权令牌（request_token、request_token_secret、pin）应该被重用（通常这些令牌将在数据库中；目前，它们被硬编码在脚本）

但这不起作用：

```
Traceback (most recent call last):
  File "my-twitter-timeline-cli.py", line 56, in <module>
    tc.list_tweets('user1')
  File "my-twitter-timeline-cli.py", line 43, in list_tweets
    session = self.init_session(user)
  File "my-twitter-timeline-cli.py", line 39, in init_session
    data={'oauth_verifier': pin})
  File ".../lib/python2.7/site-packages/rauth/service.py", line 326, in get_auth_session
    **kwargs)
  File ".../lib/python2.7/site-packages/rauth/service.py", line 299, in get_access_token
    process_token_request(r, decoder, key_token, key_token_secret)
  File ".../lib/python2.7/site-packages/rauth/service.py", line 25, in process_token_request
    raise KeyError(PROCESS_TOKEN_ERROR.format(key=bad_key, raw=r.content))
KeyError: 'Decoder failed to handle oauth_token with data as returned by provider. A different decoder may be needed. Provider returned: <?xml version="1.0" encoding="UTF-8"?>\n<hash>\n  <error>Invalid / expired Token</error>\n  <request>/oauth/access_token</request>\n</hash>\n' 
```

是否可以重用`OAuth1`授权令牌？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T12:13:35.673

我误解了整个过程。我们不需要保存和`request_token`，而是保存和。`request_token_secret``pin``access_token``access_token_secret`

过程其实是：

1.  使用`request_token`,`request_token_secret`和`pin`来获得`access_token`和`access_token_secret`
2.  保存`access_token`和`access_token_secret`（到数据库，或其他）
3.  下一次，重复使用`access_token`和`access_token_secret`

这是我更正的测试代码：

```
from rauth.service import OAuth1Service

class TwitterClient:

    KNOWN_USERS = { # (access_token, access_token_secret)
        'user1' : ("xxx", "yyy")
    }

    def __init__(self):
        # Get a real consumer key & secret from https://dev.twitter.com/apps/new
        self.twitter = OAuth1Service(
            name='twitter',
            consumer_key=TWITTER_CONSUMER_KEY,
            consumer_secret=TWITTER_CONSUMER_SECRET,
            request_token_url='https://api.twitter.com/oauth/request_token',
            access_token_url='https://api.twitter.com/oauth/access_token',
            authorize_url='https://api.twitter.com/oauth/authorize',
            base_url='https://api.twitter.com/1/')

    def new_session(self):
        request_token, request_token_secret = self.twitter.get_request_token()
        authorize_url = self.twitter.get_authorize_url(request_token)
        print 'Visit this URL in your browser: ' + authorize_url
        pin = raw_input('Enter PIN from browser: ')
        session = self.twitter.get_auth_session(request_token,
                                                request_token_secret,
                                                method='POST',
                                                data={'oauth_verifier': pin})
        print session.access_token, session.access_token_secret # Save this to database
        return session

    def reuse_session(self, user):
        access_token, access_token_secret = self.KNOWN_USERS[user]
        session = self.twitter.get_session((access_token, access_token_secret))
        return session

    def init_session(self, user):
        if user in self.KNOWN_USERS : session = self.reuse_session(user)
        else                        : session = self.new_session()
        return session

    def list_tweets(self, user):
        session = self.init_session(user)
        params = {'include_rts': 1,  # Include retweets
                  'count': 10}       # 10 tweets

        r = session.get('statuses/home_timeline.json', params=params)

        for i, tweet in enumerate(r.json(), 1):
            handle = tweet['user']['screen_name'].encode('utf-8')
            text = tweet['text'].encode('utf-8')
            print '{0}. @{1} - {2}'.format(i, handle, text)

tc = TwitterClient()

tc.list_tweets('user1') 
```

# jquery - 数据库查询后jQuery不可拖动

> ID：16078369
> 
> 赞同：1
> 
> 时间：2013-04-18T08:46:30.633
> 
> 标签：jquery, mysql, jquery-ui

我有一个 div 板，它从数据库加载可拖动和可调整大小的内容。

我使用此代码来请求代码。

```
$MBId = $_GET['id'];///the id I get from the URL
if ($MBId != null)
{
    $sqlmoodboard= "SELECT Content  FROM Moodboards WHERE Id ='$MBId' ";
    $result = mysql_query("$sqlmoodboard ");

    while($row = mysql_fetch_array($result))
    {
        echo "<div id=\"print\">";
        echo $row['Content'];
        echo "</div>";
    }
} 
```

我**从数据库中获取代码**，看起来像

```
 <div class="ui-draggable sleep ui-resizable" style="position: absolute; left: 450px; top: 117px;">

 <img src="/imgurl.jpg" class="center">

 <div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div>

 <div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div>

 <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div> 
```

页面上的来源。

```
 <div class="ui-draggable sleep ui-resizable" style="position: absolute; z-index: 1; left: 143px; top: 78px;">
                                              <img src="/imgurl.jpg" class="center">
                                        <div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;">
                                        </div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;">
                                        </div>
                                        <div class="ui-resizable-handle 
                                        ui-resizable-se
                                        ui-icon
                                        ui-icon-gripsmall-diagonal-se"
                                        style="z-index: 90;">
                                        </div>

                                              <div class="ui-resizable-handle 
                                        ui-resizable-e" 
                                        style="z-index: 90;"></div>
                                        <div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;">
                                        </div>
                                        <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;">
                                        </div></div> 
```

在我的`<head>`我有

```
<script>
$(document).ready(function()
{
    $(".sleep").draggable();
    $(".sleep").resizable();
 });
</script> 
```

图像是可拖动的，但我无法调整大小。

我用了

```
$(document).ready(function()
{ }); 
```

最后它应该像 [http://jsfiddle.net/75PvA/4/](http://jsfiddle.net/75PvA/4/)但在从数据库加载内容之后。

所以我知道在我“重置”可调整大小的功能之前加载了内容。

*注意我发布了一个类似的问题，但我问错了问题，所以我关闭了那个问题*

**我的解决方案**

在我保存到我调用destroy的数据库之前，我现在已经更改了我的保存功能（以删除可调整大小）。

然后我将 div 保存到数据库中。

然后我刷新页面以使其加载最新保存的文件，然后我使用`.resizable({aspectRatio: true})`现在一切正常，但没有回答问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:21:21.230

页面上有很多代码，因此尝试隔离问题和解决方案非常令人困惑。但是，我认为 jQueryUI 正在检测*可调整大小* `CSS`的类已经添加到要调整大小的元素中。所以它没有添加任何事件处理程序。

因此，您需要首先完全删除所有 jQueryUI 类：

```
$(".sleep").resizable('destroy') 
```

首先，然后重新添加可调整大小的功能

```
$(".sleep").resizable({handles: 'e, s, se'}) 
```

但是，在`.click`重新添加的元素上有一个事件，`.resizable()`它破坏了`south-east`调整大小手柄的位置。

同样的逻辑也适用于`.draggable()`. 在尝试重新添加功能之前，需要先将其销毁。

*当用户保存*他们的*图像*而不是所有标记时，简单地存储图片的位置会容易得多。然后标记将是干净的（并且 jQueryUI 类免费），因此调用`.resizable()`干净标记将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:42:19.183

如果你删除最后一个 div 标签

```
<div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div> 
```

如果你没有必要，那么它会正常工作。试试这个 jsfiddle.net/SanketS/75PvA/2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:45:02.150

您正在做的事情存在一些问题，尽管我不能具体说明是否有一个（或任何一个）导致了您所看到的问题。你提供了很多代码，但它是如此脱节，以至于很难隔离正在发生的事情。

1.  您正在`while`从 db 执行循环，但分配的 id 为`print`. 如果您有不止一行，则会导致问题，因为多个元素将具有相同的 id。
2.  您的“数据库代码”不平衡。你有一个`div`比关闭多一个开放。这显然会导致问题，但我不知道这是粘贴到问题中的结果还是数据真的很糟糕。
3.  正如 andyb 提到的，您实际上不需要（也不应该）`div`首先添加那些 s 。jQuery 处理这个问题。请参阅更新的小提琴工作：http: [//jsfiddle.net/75PvA/5/](http://jsfiddle.net/75PvA/5/)
4.  您的整个数据库都处于危险之中。您无需进行最基本的检查即可信任用户输入的值。停止使用 mysql_* 函数，开始使用 PDO。

最后一个绝对不是您当前问题的根源，但在未来会产生更大的破坏性影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:17:30.077

尝试这个。

```
<div id="drag" class="ui-draggable sleep ui-resizable" style="position: absolute; left: 10px; top: 17px; height: 50px; width: 50px;">
    <img src="/imgurl.jpg" class="center" />

 <div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div>

 <div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div>
</div> 
```

[http://jsfiddle.net/SanketS/75PvA/2/](http://jsfiddle.net/SanketS/75PvA/2/)

这是为您的问题提供的示例。

# android - 避免标记（Google Maps for Android API V2）在点击时以地图为中心

> ID：16078370
> 
> 赞同：5
> 
> 时间：2013-04-18T08:46:36.357
> 
> 标签：android, google-maps, google-maps-markers, centering, android-maps-v2

我在我的地图中使用标记添加了地理定位事件，当我单击它们时，我只想让它们在不居中的情况下发生变化。

当我单击标记时，有什么方法可以覆盖居中的标记（并调用 onCameraChanged）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T18:58:30.780

添加`OnMarkerClickListener`到并`GoogleMap`返回`true`。`onMarkerClick`

# login - 当 ember-data 接收到 http 状态 401 时，Ember.js 应用程序应该重定向到登录

> ID：16078374
> 
> 赞同：5
> 
> 时间：2013-04-18T08:46:50.057
> 
> 标签：login, ember.js, ember-data

我希望我的 Emberjs 应用程序能够处理未经授权的 HTTP 状态 (401)。

该应用程序使用 ember-data 来集成 JSON API (Rails)。

客户端层 (Emberjs) 在收到 HTTP 状态未授权 (401) 时应重定向到提示登录的 Emberjs 视图/模板。

如何为整个应用程序执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-28T13:44:55.617

我正在研究同一主题，看起来这里的信息有点过时了。使用 Ember 1.7.0，您应该处理路由中的错误。如果您想将此应用于整个应用程序，则应将其添加到您的`ApplicationRoute`班级，如下所示

```
// app/routes/application.js
import Ember from 'ember';

var ApplicationRoute = Ember.Route.extend({
    actions: {
        error: function (error, transition) {
            // Handle the error here
            if (error && error.status === 401) {
                return this.transitionTo('login');
            }
        }
    }
});

export default ApplicationRoute; 
```

这与文档描述的方式相同：[阅读此处](http://emberjs.com/guides/routing/loading-and-error-substates/#toc_the-code-error-code-event)

**更新：**在较新版本的 Ember 和 Ember Data 中，错误对象结构会有所不同。状态将是一个字符串，包含在错误对象中，在错误数组中：

```
actions: {
  error: function(error, transition) {
    if (error.errors[0].status === '401') {
      this.transitionTo('sign-in');
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T10:21:09.453

我一直在努力解决同样的问题。我已经成功实现了以下 hack。

```
window.App = Em.Application.extend
  ready: ->
    $(document).ajaxError( (event, request, settings) =>
      if request.status == 401 && !["/profile", "/users/sign_in.json"].contains(settings.url)
        controller = App.__container__.lookup('controller:application')
        controller.transitionToRoute('sign_in' )
) 
```

这个想法是捕获一个 jQuery ajaxError 事件。如果您可以检查错误的类型（例如 request.status == 401）、导致错误的 url（例如 settings.url），您可以根据这些信息决定做什么。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T22:14:01.563

我在想一个更好的方法是使用 Ember 的**承诺**：

```
@store.get("user").then(=>
    # Success stuff here
).fail(=>
    @transitionTo("login") # Do other fancy error stuff here too
) 
```

这样做的问题是必须在所有路线上单独完成。也许你可以用`beforeTransition`方法做一些事情，检查承诺返回什么？只是思考的食物。

# java - 如何检查 Handler 是否有活动任务？

> ID：16078378
> 
> 赞同：43
> 
> 时间：2013-04-18T08:47:00.353
> 
> 标签：java, android

如果我有一个`Handler handler = new Handler()`并为它运行一个延迟的任务`handler.postDelayed(xxx, xxx)`，是否可以检查是否`postDelayed()`被调用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T08:53:45.147

没有直接的 API 可以实现这一点，但您可以通过使用该`sendEmptyMessage`函数来解决此问题。希望这会有所帮助。

```
handler.sendEmptyMessage(some_integer);//Do this when you add the call back.
if(handler.hasMessages(some_integer))
handler.removeMessages(some_integer);//Do this after removing the call back. 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-18T08:55:43.443

> 是否可以检查是否调用了 postDelayed() ？

一种快速修复，在方法中将一些`boolean`变量分配给 true，然后执行检查。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-18T09:52:23.940

处理程序在发布 Runnable 时获取带有“what”字段 == 0 的消息，因此理论上您可以调用`hasMessages(0)`，但您无法检查它是否已给出挂起的 Runnable - 例如，在发布 r0 和 r1 时，您无法检查 r0 是否处于挂起状态或不是。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-13T02:01:46.447

`Handler.post()`只是一个方便的包装方法`sendMessageDelayed()`，所以如果你想检查一个处理程序是否有一个特定的挂起的 Runnable 仍在运行，或者是否`postDelayed()`使用特定的 Runnable 调用，然后尝试使用以下类：

```
 public class HandlerWithID extends Handler {

    public final boolean postDelayed (int runnableID, long delayMillis, Runnable r) {
        Message m = Message.obtain(this, r);
        m.what = runnableID;
        return  sendMessageDelayed(m, delayMillis);
    }

    public final boolean post(int runnableID, Runnable r) {
        return postDelayed(runnableID, 0, r);
    } 

    public final boolean hasActiveRunnable(int runnableID) {
        return hasMessages(runnableID);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-11T18:17:23.983

**第 1 步：** 首先，添加一个**类变量** *（不是**局部变量**）*。

**第 2 步：** 检查**处理程序**是否正在运行或未使用该变量。

```
 public MyClass{

    boolean isAlreadyDoing;
.
.
.
.

    if(!isAlreadyDoing){
        isAlreadyDoing=true;
        new Handler(Looper.myLooper()).postDelayed(() -> {
        isAlreadyDoing=false;
         //Do task here
        }, delaytTime);
      }
    } 
```

# python - 使用日期遍历字典

> ID：16078379
> 
> 赞同：0
> 
> 时间：2013-04-18T08:47:15.170
> 
> 标签：python, date, python-2.7, iteration

任何人都可以帮助我如何用日期遍历字典吗，我有这样的数据集

```
data=[{u'a': u'D', u'b': 100.0, u'c': 201L, u'd': datetime.datetime(2007, 12, 29, 0, 0), u'e': datetime.datetime(2008, 1, 1, 6, 27, 41)},
      {u'a': u'W', u'b': 100.0, u'c': 201L, u'd': datetime.datetime(2007, 12, 29, 0, 0), u'e': datetime.datetime(2008, 2, 4, 6, 27, 41)},
      {u'a': u'W', u'b': 100.0, u'c': 202L, u'd': datetime.datetime(2007, 12, 30, 0, 0), u'e': datetime.datetime(2008, 1, 1, 4, 20, 44)},
      {u'a': u'D', u'b': 100.0, u'c': 202L, u'd': datetime.datetime(2007, 12, 30, 0, 0), u'e': datetime.datetime(2008, 3, 11, 6, 27, 41)},
      {u'a': u'D', u'b': 100.0, u'c': 202L, u'd': datetime.datetime(2007, 12, 30, 0, 0), u'e': datetime.datetime(2008, 5, 8, 11, 2, 41)},
      {u'a': u'D', u'b': 100.0, u'c': 203L, u'd': datetime.datetime(2008, 1, 2, 0, 0), u'e': datetime.datetime(2008, 6, 1, 6, 27, 41)},
      {u'a': u'W', u'b': 100.0, u'c': 204L, u'd': datetime.datetime(2008, 2, 9, 0, 0), u'e': datetime.datetime(2008, 4, 21, 12, 30, 51)},
      {u'a': u'D', u'b': 100.0, u'c': 204L, u'd': datetime.datetime(2008, 2, 9, 0, 0), u'e': datetime.datetime(2008, 8, 15, 15, 45, 10)}] 
```

我怎样才能把它带入以下格式的字典

```
res={u'201L':(1,0,1),(2,1,0),(3,0,0),(4,0,0).. so on till (12,0,0),
u'202L':(1,1,0),(2,0,0),(3,0,1),(4,0,0),(5,0,1)...(12,0,0),
u'203L':(1,0,0),(2,0,0),(3,0,0),(4,0,0),(5,1,0)...(12,0,0),
u'204L':(1,0,0),(2,0,0),(3,0,0),(4,1,0),(5,0,0),(6,0,0,(7,0,0),(8,0,1)...(12,0,0)} 
```

其中 1, 2, 3 是从他们的卡发行日期算起的第一个月、第二个月等等，即`201L`发行日期是`datetime.datetime(2007, 12, 29, 0, 0)`，`202L`它是 `datetime.datetime(2007, 12, 30, 0, 0)`

第一个月的意思是从`2007-12-29`到`2008-1-29`

```
 (1,0,1)---where 1 is the first month
  0 is no of times W
  1 is no of times D 
```

我尝试过这样的事情

```
data_dict=defaultdict(Counter)
date_dic={}
for x in data:
  a,b,c,d=x['a'],x['c'],x['d'],x['e']
  data_dict[b][a] += 1
for key , value in data_dict.items():
   date_dic[key] = tuple(map(datetime.date.isoformat, (c,d)))
   for value in range(1,30):
      if value not x: continue 
```

在 if 循环之后我被卡住了，我可以添加什么来获得上述格式。我最终得到了这样的东西作为我的输出，

```
defaultdict(<class 'collections.Counter'>, {201L: Counter({u'D': 1, u'W': 1}), 202L: Counter({u'D': 2, u'W': 1}), 203L: Counter({u'D': 1}), 204L: Counter({u'D': 1, u'W': 1})}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:24:45.367

我会创建一个日期列表，然后从该列表中找到将每个项目放入的“桶”。

[`datetime.timedelta()`您可以使用对象](http://docs.python.org/2/library/datetime.html#datetime.timedelta)从起点创建相对的新日期：

```
startdate = data[0]['d']
buckets = [startdate + datetime.timedelta(days=30) * i for i in xrange(12)] 
```

现在您有 12 个日期来比较其他所有内容，因此您知道将每个后续值放入哪个存储桶：

```
>>> buckets
[datetime.datetime(2007, 12, 29, 0, 0), datetime.datetime(2008, 1, 28, 0, 0), datetime.datetime(2008, 2, 27, 0, 0), datetime.datetime(2008, 3, 28, 0, 0), datetime.datetime(2008, 4, 27, 0, 0), datetime.datetime(2008, 5, 27, 0, 0), datetime.datetime(2008, 6, 26, 0, 0), datetime.datetime(2008, 7, 26, 0, 0), datetime.datetime(2008, 8, 25, 0, 0), datetime.datetime(2008, 9, 24, 0, 0), datetime.datetime(2008, 10, 24, 0, 0), datetime.datetime(2008, 11, 23, 0, 0)] 
```

然后我们可以使用该[`bisect`模块](http://docs.python.org/2/library/bisect.html)找到匹配的桶：

```
from bisect import bisect

bisect(buckets, somedate) - 1  # Returns a value from 0 - 11 
```

*我们为每个用户*创建这样的存储桶，因此我们需要在单独的映射中跟踪存储桶。实际上，我们将根据需要即时创建存储桶以适应当前交易日期。

接下来，我们使用一个[`collections.defaultdict`实例](http://docs.python.org/2/library/collections.html#collections.defaultdict)来跟踪每个键的计数（`c`输入您的输入）：

```
from collections import defaultdict

res = defaultdict(list)
empty_counts = {'D': 0, 'W': 0} 
```

这将为您的存储桶创建一个列表，并为存款和取款创建一个空的计数字典。我在这里使用了字典，因为它比以后必须操作（不可变的）元组*更*容易使用。我也没有包括月份编号（1 - 12）；没意义，您已经为每个存储桶（0 - 11）建立了一个索引，并且您可以拥有可变数量的存储桶。

我们需要根据需要创建存储桶和计数器以适应当前日期；我们不是通过扫描数据来查找每个用户的最大交易日期，而是根据需要扩展我们的存储桶和计数列表：

```
def expand_buckets(buckets, bucket_counts, start, transaction):
    # This function modifies the buckets and bucket_counts lists in-place
    if not buckets:
        # initialize the lists
        buckets.append(start)
        bucket_counts.append(dict(empty_counts))

    # keep adding 30-day spans until we can fit the transaction date
    while buckets[-1] + datetime.timedelta(days=30) < transaction:
        buckets.append(buckets[-1] + datetime.timedelta(days=30))
        bucket_counts.append(dict(empty_counts)) 
```

**现在**我们可以开始数了：

```
per_user_buckets = defaultdict(list)

for entry in data:
    user = entry['c']
    type = entry['a']
    transaction_date = entry['e']
    buckets = per_user_buckets[user]
    bucket_counts = res[user]
    expand_buckets(buckets, bucket_counts, entry['d'], transaction_date)

    # count transaction date entries per bucket
    bucket = bisect(buckets, transaction_date) - 1
    bucket_counts[bucket][type] += 1 
```

该`bisect`电话使挑选合适的铲斗变得容易和快速。

您的示例输入的结果是：

```
>>> pprint(dict(res))
{201L: [{'D': 1, 'W': 0},
        {'D': 0, 'W': 1}],
 202L: [{'D': 0, 'W': 1},
        {'D': 0, 'W': 0},
        {'D': 1, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 1, 'W': 0}],
 203L: [{'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 1, 'W': 0}],
 204L: [{'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 0, 'W': 1},
        {'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 0, 'W': 0},
        {'D': 1, 'W': 0}]} 
```

# asp.net - GridView 更新导致“'nvarchar' 附近的语法不正确”错误

> ID：16078382
> 
> 赞同：1
> 
> 时间：2013-04-18T08:47:32.470
> 
> 标签：asp.net, gridview

尝试在`GridView`. 从下面的代码中，单击“编辑”后，我可以选择更改“KPI”名称和“当前目标”。但是，一旦我单击“更新”，就会收到一条错误消息：

> 'nvarchar' 附近的不正确的 sysntax

这是我的标记：

```
<p>
    <br />
    <asp:DropDownList ID="GroupSelection" runat="server" DataSourceID="Group" DataTextField="FcstGroup"
        DataValueField="FcstGroup">
    </asp:DropDownList>
</p>
<p>
    <asp:GridView ID="GridView2" runat="server" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
        </Columns>
    </asp:GridView>
</p>
<p>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:WFMConnectionString3 %>"
        SelectCommand="select 
                            case _parameter.name as KPI,
                            [target]*100 as [Current Target]
                            from _parameter inner join _reporting_group
                            on _parameter.reporting_group = _reporting_group.id

                            where _reporting_group.name = @WG " 
UpdateCommand="update _parameter set target = .80
                                where reporting_group = (select ID from _reporting_group where name = @WG)
                                and name = 'nco_i_e' ">
        <SelectParameters>
            <asp:ControlParameter ControlID="GroupSelection" Name="WG" PropertyName="SelectedItem.text" />
        </SelectParameters>
        <UpdateParameters>
            <asp:ControlParameter ControlID="GroupSelection" Name="WG" PropertyName="SelectedItem.text" />
        </UpdateParameters>
    </asp:SqlDataSource>
</p>
<asp:SqlDataSource ID="Group" runat="server" ConnectionString="<%$ ConnectionStrings:WFMConnectionString3 %>"
    SelectCommand=" SELECT     distinct _reporting_group.name AS FcstGroup
FROM         dbo._metrics INNER JOIN  
                  dbo._reporting_group ON dbo._metrics.reporting_group = dbo._reporting_group.id ">
</asp:SqlDataSource> 
```

我猜问题出在更新命令上，但是在 SQL 中运行时它可以正常工作：

```
UpdateCommand="update _parameter set target = .80
                                where reporting_group = (select ID from _reporting_group where name = @WG)
                                and name = 'nco_i_e' "> 
```

请注意，目前，更新命令仅使用固定设置的“目标”值和固定的“名称”值。最终，我需要使用“当前目标”中输入的值和 KPI 值。但是，一旦我弄清楚为什么会收到“nvarchar”错误消息，我就会解决这个问题。

如果有人能发现问题出在哪里，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:33:30.233

跳出来的第一件事是您应该将 UpdateParameter 更改为：

```
<asp:ControlParameter ControlID="GroupSelection" Name="WG" PropertyName="SelectedItem.Text" /> 
```

`SelectedItem.text`不是有效属性（`.Text`应大写）。

其他可能导致问题的因素是 SQL 中的数据类型。如果您的“目标”列不能接受 0.80 的值，或者如果您的“名称”值不能接受您在“GroupSelection”DropDownList 中选择的任何内容，则可能会导致此类语法错误。

# hyperlink - tt_news 详细信息页面的链接未更新

> ID：16078383
> 
> 赞同：1
> 
> 时间：2013-04-18T08:47:34.250
> 
> 标签：hyperlink, typo3, tt-news, realurl

我编辑了新闻的标题：

旧链接：
www.domain.com/news/article/some-article-name.html

新链接：
www.domain.com/news/article/test.html

现在我想改回标题以获得这样的网址
www.domain.com/news/article/some-article-name.html

但我仍然得到旧网址：
www.domain.com/news/article/test.html

我生成指向 tt_news 详细信息页面的链接，如下所示：

```
$typolink_conf = array(
    "title" => '',
    "ATagParams" =>'',
    "no_cache" => 0,
    "parameter" => 25,
    "additionalParams" => '&tx_ttnews[tt_news]=' . $data['uid'],
    "useCacheHash" => 0
);

$link = $this->cObj->typolink_URL($typolink_conf);
$link = $GLOBALS['TSFE']->tmpl->setup['config.']['baseURL'] . $link; 
```

我已经尝试清除所有缓存，从 real_url 中清除缓存等等。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:42:50.277

那一定是缓存问题。您是否还删除了 tt_news 的唯一别名？

去：

> Web -> 信息 -> RealUrl 管理 -> 显示：唯一别名 -> tt_news

并从此列表中删除所有或您的特定新闻。

# stringstream - 使 fprintf 写入 std::stringstream

> ID：16078387
> 
> 赞同：3
> 
> 时间：2013-04-18T08:47:44.297
> 
> 标签：stringstream, printf

函数`fprintf`写入`FILE*`. 我有一个写入字符串流的 debugPrint 函数。我不想更改我的功能，因为它在很多地方都使用过，而且会破坏代码。

如何将字符串流传递给 fprintf？

更新：我可以包装`stringstream`到 a`FILE`并解开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:57:44.790

您不能将 ostream“传递”给 fprintf。该`FILE`结构取决于平台。

这可能不是最好的方法，但是您可以创建一个邪恶的宏：

```
#undef fprintf
#define fprintf my_fprintf 
```

您可以创建两个 my_fprintfs，一个接受`FILE*`，另一个接受`std::stringstream&`作为参数。

您可以通过简单地直接调用 my_fprintf 来避免宏，但您必须修改调用站点。

您不能可移植地“将字符串流包装在 FILE* 中”，但有一些系统特定的方法。如果这就是您所追求的，那么例如 Linux 就有 fopencookie() ，它采用函数指针来读取/写入函数。然后您可以创建包装 std::stringstream 的函数。

# ruby - 在指定命名空间类时，我如何存根父类？

> ID：16078388
> 
> 赞同：2
> 
> 时间：2013-04-18T08:47:44.883
> 
> 标签：ruby, rspec, rspec2

```
# models/event.rb
class Event < ActiveRecord::Base
  # ...
end

# models/event/timeline.rb
class Event::Timeline
  # ...
end

# spec/event/timeline_spec.rb
require 'spec_helper'
require 'models/event/timeline' # <- fails since "event" is not required

describe Event::Timeline do
  it '' do
    # ...
  end
end 
```

我不想这样做，`require 'event'`因为这意味着还需要它的所有依赖项，这些依赖项对于规范来说不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:03:10.277

您使用`stub_const`RSpec 中的方法：

[https://www.relishapp.com/rspec/rspec-mocks/v/2-13/docs/mutating-constants](https://www.relishapp.com/rspec/rspec-mocks/v/2-13/docs/mutating-constants)

但可能更简单地`class Event; end`按照玛丽安的建议使用。

针对您的评论，是否需要在`describe`块上方声明？如果没有，也许试试

```
describe Event::Timeline do
  let(:fake_class) { Class.new }

  before do
    stub_const("Event", fake_class)
  end

  it '' do
  end
end 
```

# ocr - 机器打印文本的 ICR？

> ID：16078393
> 
> 赞同：2
> 
> 时间：2013-04-18T08:47:57.417
> 
> 标签：ocr, data-extraction, icr

我知道 ICR 基本上用于手写（手工打印）数据识别，但我们可以利用 ICR 来提取扭曲（质量差）的机器打印文本吗？

如果不是什么是解决以下问题的最佳方法

我有一个非结构化文档，可能会包含 2 页或更多页，文档中几乎没有日期字段可以手写。现在我想将其转换为文本文件。我尝试了一些整页 ocr（omnipage 和 abbyy 等）工具，它们具有 ICR 模块以转换为文本文件。他们擅长整页 OCR，但是当遇到手写日期时，它会在其中放置垃圾字符而不是使用 ICR 模块。我不想使用 parascript 和 A2ia 等基于位置的表单处理工具，它们仅适用于结构化文档。

或者我们可以使用 ICR 来转换机器打印的文本和手写的（无论如何在这种情况下它适用于手动返回日期）

在这里，我的目标是从非结构化文档中获取文本文件输出，手写文本很少（如日期、数字）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:24:56.463

> 我尝试了一些具有 ICR 模块的整页 ocr（omnipage 和 abbyy 等）工具

这是不正确的，这解释了糟糕的结果。如果您尝试过零售版的 OmniPage 和 ABBYY FineReader，这些软件包只是 OCR，不支持 ICR。

> 我不想使用表单处理工具

您可能必须以某种方式这样做，但该方法有一些变体。这必须是两种技术的结合，要么是开箱即用的，要么是自创的，但它比仅仅安装和运行它需要更多的努力。

今天，假设没有可以提供高质量结果的非结构化文本 ICR 软件。全页 OCR 或非结构化文本 OCR（机器文本）在机器文本上产生高质量的结果，而在手写时产生垃圾。你说得对，ICR 意味着区域识别，它允许提供数据类型和后端字典以改进对手写的识别。

对于最简单和最快的方法，也可能是最经济和劳动强度最低的方法，我会使用非结构化表单处理包，例如 ABBYY FlexiCapture ( [http://www.wisetrend.com/abbyy_flexicapture.shtml](http://www.wisetrend.com/abbyy_flexicapture.shtml) )。它需要一些非编程设置来“定位”区域。区域可能会改变位置，但该软件仍然会找到它们，然后使用适当的算法（OCR/ICR）来读取区域内容。支持 OCR、ICR、OMR（复选标记）、BCR（条形码）。还具有内置的整页 OCR。我在内部使用这个软件，转售它，并拥有超过 14 年的微调经验。

对于一种可能更经济的方式，但可能需要手动结合至少两种技术（两次购买而不是一加劳动力 - 在一天结束时可能不是最经济的），我会使用某种 OCR SDK 来处理机器文本，以及用于手写区域的某种具有 ICR 功能的 SDK。根据这些区域位置的一致性，您可能只能提供坐标。如果它们发生变化，则需要对区域位置进行更深入的分析，以将它们传递给 ICR。需要返回 ICR 识别的文本以插入到 OCRed 文本中的适当位置。

在我看来，现在有许多开箱即用的工具，我会使用开箱即用的东西而不是自己编写，因为有几个主要挑战需要解决：区域识别、两种技术集成、工作流. 几年前，当当前工具不可用时，我们已经完成了这种集成。

# android - Android 4.1（Jelly Bean）更改了应用程序行为

> ID：16078399
> 
> 赞同：0
> 
> 时间：2013-04-18T08:48:14.503
> 
> 标签：android, android-screen-support

我有一个由 ListView 组成的应用程序，并且当按下打开另一个活动（即画廊）时，活动内的每一行打开活动都有按钮，

我在 中使用了大尺寸的高分辨率图像`res -> drawable`，然后在两个设备上进行了测试：

**第一个**是运行姜饼 2.3.6 的 Galaxy Pocket Duos，它工作正常，但滚动列表速度慢，但所有应用程序功能正常。

**第二个** 是运行 Jelly Bean 4.1.2 的 Galaxy s 3 和（在 res drawable 中使用大尺寸高分辨率图像），应用程序打开显示列表但冻结您无法滚动列表，如果您尝试滚动它，它会退出应用程序（**应用程序关闭**）返回手机主屏幕，不强制关闭，

然后我用小尺寸低分辨率图像更改了图像，它在 Galaxy s3 中运行良好。

我预计相反的情况会冻结在 Galaxy Pocket Duos 而不是 Galaxy S3 上，因为它的规格比 Galaxy S3 低。

任何问题的解决方案将不胜感激。

我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.tsn.dr"
   android:versionCode="1"
   android:versionName="1.0" >
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 

<uses-sdk
   android:minSdkVersion="8"
   android:targetSdkVersion="17" />

<supports-screens 
  android:xlargeScreens="true"
  android:largeScreens="true" 
  android:normalScreens="true" 
  android:smallScreens="true" 
  android:anyDensity="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:06:19.173

问题是加载大量图像

所以你的应用滚动问题和应用崩溃了一段时间..

**在您的自定义适配器中**使用**Lazzy Loading**或使用getview 方法...

 **下面的链接对您延迟加载很有用..

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

[Android：图库中的延迟加载](https://stackoverflow.com/questions/3181728/android-lazy-loading-in-gallery)**

# elasticsearch - ES搜索查询调用并只返回选定的字段

> ID：16078400
> 
> 赞同：1
> 
> 时间：2013-04-18T08:48:25.597
> 
> 标签：elasticsearch

我正在尝试为 Elastic Search 编写一个查询，该查询将返回前 20 个最接近的匹配项。

我想返回标题字段的前 20 个匹配项。

```
curl -X POST "localhost:9200/xxx/_search?pretty=true" -d '
{
"from" : 0,
"size" : 20,
"query" : { "term" : {"title" : "art"} }}' 
```

我在这里想念什么？

更新：

我试图只返回“标题”字段，而不是整个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:19:55.680

我通过使用字段参数进行搜索得到了这个：

```
curl -X POST "localhost:9200/xxx/_search?pretty=true" -d '
{
"from" : 0,
"size" : 20,
"fields" : ["title"],
"query" : { "term" : {"title" : "art"} }}' 
```

# iphone - 具有水平和垂直滚动的复杂表格视图

> ID：16078401
> 
> 赞同：0
> 
> 时间：2013-04-18T08:48:28.470
> 
> 标签：iphone, ios, objective-c, uitableview

我正在制作一个非常复杂的表格视图。这是我应该做的

1.  它应该有带标题的部分标题
2.  当您水平滚动时，整个 tableview 应该水平滚动
3.  您不能只滚动一个部分。

这是一个小屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/abl2c.png)

现在的问题是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:25:47.753

由于我不是很熟悉`UICollectionViews`，我会尝试以下方法：

1.创建一个`UIScrollView`，将其框架设置为您的`backGroundView.frame`并将其添加到您的`backGroundView`

2\. 创建您的`UITableView`. 我猜内容将是动态的，但应该可以通过简单地将每个部分/行中元素的宽度相加来计算最大宽度。使`tableView.size.width`您计算出的宽度，添加`tableView`到您`scrollView`。

3\. 将 设置`scrollView.contentsize.width`为您计算的`tableView.size.width`。

如果我正确理解了您的问题，您现在应该有一个`UITablview`可以水平和垂直滚动的。让我知道它是否有帮助。

**编辑：**

我刚刚创建了一个简单的项目来做我上面描述的事情。到目前为止，`dataSource`是一个文本数组。但是使用你添加到`cell.contentViews`.

它似乎工作。随意测试： [点击这里](https://github.com/pmkDev/PKComplexTable/tree/master/PKComplexTable)

# image - LiipImagineBundle 和“未定义过滤器”

> ID：16078405
> 
> 赞同：2
> 
> 时间：2013-04-18T08:48:36.007
> 
> 标签：image, symfony, filter, resize, defined

我安装了 LiipImagineBundle。

配置.yml：

```
liip_imagine:
    filter_sets:
        my_thumb:
            quality: 75
            filters:
                thumbnail: { size: [120, 90], mode: outbound } 
```

应用内核.php：

```
 $bundles = array(
        ...
        new Liip\ImagineBundle\LiipImagineBundle(),
    ); 
```

当我想使用过滤器时：

```
 <td><img src="{{ asset('images/zestawy/'~entity.zdjecie) | imagine_filter('my_thumb') }}" /></td> 
```

我收到此错误：

```
An exception has been thrown during the rendering of a template ("Filter not defined: my_thumb") 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:50:50.260

您是否在您的 routing.yml 中设置了路线？

```
_imagine:
    resource: .
    type:     imagine 
```

还要确保您已清除缓存

```
php app/console cache:clear --env="dev"
php app/console cache:clear --env="prod" 
```

# html - (Drupal) 试图设置鼠标悬停图像，但 Drupal 用垃圾代码破坏了它。我该如何解决这个问题？

> ID：16078408
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:48:54.833
> 
> 标签：html, image, drupal, tags

早上好，堆栈溢出！相当简单的问题 - 我正在尝试在 Drupal 上设置鼠标悬停图像，我再次提供这个，相当简单的图像标签：

```
<img src="http://www.gameaether.com/Images/stream_n3cril.png" onmouseover=""http://www.gameaether.com/Images/stream_n3cril_hover.png" onmouseout="http://www.gameaether.com/Images/stream_n3cril.png"> 
```

但是，当我提交更改时，Drupal 将其修改为：

```
<img onmouseout="this.src=''http://www.gameaether.com/Images/stream_nanakis.png" onmouseover="this.src=''http://www.gameaether.com/Images/stream_nanakis_hover.png" src="http://www.gameaether.com/Images/stream_n3cril.png" /> 
```

注意：“Nanakis”是我正在尝试做的另一张图片。全面的结果相同。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:58:16.727

这可能与您使用的输入过滤器有关。据我所知，Drupal 在保存数据时不会更改数据，但会在显示数据时尝试清除潜在的 xss。考虑使用 jQuery 方法，例如

```
$('#imageID').hover(function() { $(this).attr('src', 'mouseover img src') }, function() {$(this).attr('src', 'mouseout img src')}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:29:58.273

您还可以创建两个函数，它们将在相应的鼠标事件上调用并在那里更改图像！

# scala - 一个简单的 Scala Given/When/Then 样式规范失败

> ID：16078412
> 
> 赞同：1
> 
> 时间：2013-04-18T08:49:13.000
> 
> 标签：scala, specs2

我是 Spec2 的新手，正在努力学习它。我想出了以下代码，

```
@RunWith(classOf[JUnitRunner])
class GWTStyleSpec extends Specification {
    "A given-when-then example for the addition" ^
       "Given the following number: ${1}" ^ number1 ^
       "And a second number: ${2}" ^ number2 ^
       "Then I should get: ${3}" ^ result ^
     end
   val number1: Given[Int] = (_: String).toInt
   val number2: When[Int, (Int, Int)] = (n1: Int) => (s: String) => (n1, s.toInt)
   val result: Then[(Int, Int)] = (n: (Int, Int)) => (s: String) => ((n._1 + n._2) must_== s.toInt)
} 
```

运行它后，我得到**java.lang.Exception: Could not instantiate class com.me.scala.start.GWTStyleSpec: null**并且在它下面有很多异常堆栈跟踪。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:19:19.687

如果要导入`org.specs2.Specification`，则应该`def is = ...`定义一个方法：

```
@RunWith(classOf[JUnitRunner])
class GWTStyleSpec extends Specification { def is = 
  "A given-when-then example for the addition" ^
     "Given the following number: ${1}"        ^ number1 ^
     "And a second number: ${2}"               ^ number2 ^
     "Then I should get: ${3}"                 ^ result ^
                                               end
  lazy val number1: Given[Int] = (_: String).toInt
  lazy val number2: When[Int, (Int, Int)] = (n1: Int) => (s: String) => (n1, s.toInt)
  lazy val result: Then[(Int, Int)] = (n: (Int, Int)) => (s: String) => ((n._1 + n._2) must_== s.toInt)
} 
```

也有可能`val`没有正确实例化 s，因此您可以尝试使用`lazy val`s。

另请注意，下一个 specs2 版本（1.15-SNAPSHOT）提出了[另一种](https://github.com/etorreborre/specs2/blob/master/src/test/scala/examples/GivenWhenThenSpec.scala#L46)基于 Scala 2.10 特性的 Given/When/Then 规范：

```
class GivenWhenThenInterpolatedSpec extends Specification with GivenWhenThen { def is = sequential ^ s2"""                   

 A given-when-then example for a calculator                                                                                  
   Given the following number: 1                             $aNumber                                                        
   And a second number: 2                                    $aNumber                                                        
   And a third number: 6                                     $aNumber                                                        
   When I use this operator: +                               $operator                                                       
   Then I should get: 9                                      $result                                                         
   And it should be >: 0                                     $greaterThan                                                    

 Now with the multiplication                                                                                                 
   Given the following number: 4                             $aNumber                                                        
   And a second number: 5                                    $aNumber                                                        
   And a third number: 6                                     $aNumber                                                        
   When I use this operator: *                               $operator                                                       
   Then I should get: 120                                    $result                                                         
   And it should be >: 10                                    $greaterThan                                                    
   But not should be >: 150                                  $lowerThan                                                      
                                                             """                                                             

  val readInt = groupAs("\\d+")                                                                                              
  val readOperator = readAs(".*: (.)$")                                                                                      
  val aNumber: Given[Int] = readInt and { s: String => s.toInt }                                                             

  // when there are too many Given[T, S] consecutive steps, it is possible to follow them with a When[Seq[T], S]             
  val operator: When[Seq[Int], Operation] = readOperator and { (numbers: Seq[Int]) => (s: String) => Operation(numbers, s) } 

  val result: Then[Operation] = readInt andThen { (operation: Operation) => (s: String) =>                                   
    operation.calculate  must_== s.toInt                                                                                     
  }                                                                                                                          
  val greaterThan: Then[Operation] = readInt andThen { (operation: Operation) => (s: String) =>                              
    operation.calculate  must be_>= (s.toInt)                                                                                
  }                                                                                                                          
  val lowerThan: Then[Operation] = readInt andThen { (operation: Operation) => (s: String) =>                                
    operation.calculate  must be_<= (s.toInt)                                                                                
  }                                                                                                                          

  case class Operation(numbers: Seq[Int], operator: String) {                                                                
    def calculate: Int = if (operator == "+") numbers.sum else numbers.product                                               
  }                                                                                                                          

} 
```

# vba - 同时更新2个Cell的值

> ID：16078413
> 
> 赞同：0
> 
> 时间：2013-04-18T08:49:20.383
> 
> 标签：vba, excel

我有 7 个工作表，其中包含有关我大学的一个房间项目的信息，我需要在每张工作表中搜索特定信息，如果它是一个计算机池与否。我想将所有池复制到一个额外的工作表，然后可以更新该工作表中的信息，它会自动更新原始工作表。

我的主要问题是我真的不知道如何调用这样的更新函数。我在底部附加了将所有房间复制到专用表格的代码。提前致谢

* * *

```
Option Explicit

Sub Start()
Dim Suche As String
Dim Blatt1 As String
Dim Blatt2 As String
Dim Blatt3 As String
Dim Blatt4 As String
Dim Blatt5 As String
Dim Blatt6 As String
Dim Blatt7 As String
Dim Result As String

Blatt1 = "1\. Stock MZG"
Blatt2 = "5\. Stock MZG"
Blatt3 = "6\. Stock MZG"
Blatt4 = "7\. Stock MZG"
Blatt5 = "8\. Stock MZG"
Blatt6 = "1\. Stock OEC"
Blatt7 = "2\. Stock OEC"

Suche = "Poolraum"
If Len(Suche) Then
    Result = "Es wurde(n) " & AuswahlKopieren(Suche, True, Blatt1) & " Zeile(n) aus '" & Blatt1 & "' kopiert!"
    Result = Result & vbCrLf & "Es wurde(n) " & AuswahlKopieren(Suche, True, Blatt2) & " Zeile(n) aus '" & Blatt2 & "' kopiert!"
    Result = Result & vbCrLf & "Es wurde(n) " & AuswahlKopieren(Suche, True, Blatt3) & " Zeile(n) aus '" & Blatt3 & "' kopiert!"
    Result = Result & vbCrLf & "Es wurde(n) " & AuswahlKopieren(Suche, True, Blatt4) & " Zeile(n) aus '" & Blatt4 & "' kopiert!"
    Result = Result & vbCrLf & "Es wurde(n) " & AuswahlKopieren(Suche, True, Blatt5) & " Zeile(n) aus '" & Blatt5 & "' kopiert!"
    Result = Result & vbCrLf & "Es wurden(n) " & AuswahlKopieren(Suche, True, Blatt6) & " Zeile(n) aus '" & Blatt6 & "' kopiert!"
    Result = Result & vbCrLf & "Es wurde(n) " & AuswahlKopieren(Suche, True, Blatt7) & " Zeile(n) aus '" & Blatt7 & "' kopiert!"
    MsgBox (Result)
End If

End Sub

Function AuswahlKopieren(SuchStr As String, Optional Ganz As Boolean = False, Optional Arbeitsblattname As String) As Integer

Dim WSq             As Worksheet
Dim WSz             As Worksheet
Dim SuchColRng      As Range
Dim FRng            As Range
Dim CRng            As Range
Dim CRangeCustom    As Range
Dim FirstAdr        As String
Dim CArr            As Variant

Set WSq = Worksheets(Arbeitsblattname)
Set SuchColRng = WSq.Range("E:E")
Set CRangeCustom = WSq.Range("A:G")
Set WSz = Worksheets("Poolräume")

With SuchColRng
    If Ganz Then
        Set FRng = .Find(SuchStr, LookIn:=xlValues, LookAt:=xlWhole)
    Else
        Set FRng = .Find(SuchStr, LookIn:=xlValues, LookAt:=xlPart)
    End If
    If Not FRng Is Nothing Then
        FirstAdr = FRng.Address
        Do
            If CRng Is Nothing Then
                Set CRng = WSq.Rows(FRng.Row)
            Else
                Set CRng = Union(WSq.Rows(FRng.Row), CRng)
                'MsgBox ("WSq.Rows(FRng.Row): " + WSq.Rows(FRng.Row))
            End If
            Set FRng = .FindNext(FRng)
        Loop While Not FRng Is Nothing And FRng.Address <> FirstAdr
    End If
End With
If Not CRng Is Nothing Then
    Set CRng = Intersect(CRng, CRangeCustom)
    CRng.Copy
    WSz.Cells(WSz.Cells(WSz.Rows.Count, SuchColRng.Column).End(xlUp).Row + 1, 1).PasteSpecial xlPasteValues
    Application.CutCopyMode = False
    AuswahlKopieren = CRng.Cells.Count / CRng.Rows(1).Cells.Count
    MsgBox ("CRng.Cells.Count: " & CRng.Cells.Count & " CRng.Rows(1).Cells.Count: " & CRng.Rows(1).Cells.Count)
Else
    AuswahlKopieren = 0
End If
End Function

Function WSExists(ByVal WSName As String) As Boolean
Dim WS As Worksheet
For Each WS In Worksheets
    If WS.Name = WSName Then
        WSExists = True
        Exit For
    End If
Next
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:46:36.777

我知道这不是您要问的，但是您可以通过将`Blatt1`...制作`Blatt7`成这样的数组来使此代码更易于使用：

```
Function BlattArray() as Variant
 Dim BlattStr as String
 BlattStr="1\. Stock MZG,5\. Stock MZG,6\. Stock MZG,7\. Stock MZG,8\. Stock MZG,1\. Stock OEC,2\. Stock OEC"
 BlattArray=Split(BlattStr,",")
End Function 
```

然后你可以构造`Result`为：

```
Result=""
For Each Blatt in BlattArray
 Result = Result & vbCrLf & "Es wurde(n) " & AuswahlKopieren(Suche, True, Cstr(Blatt)) & " Zeile(n) aus '" & Blatt & "' kopiert!"
Next 
```

这样，每当您添加另一个工作表时，您只需将其名称添加到`BlattStr`字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:23:31.717

我没有看到任何其他方式，而不是复制到您提到的其他工作表，不仅是池信息，而且还有从（工作表，单元格）获取该池的参考。之后，您可以创建一个单独的宏来恢复任何更改，因为您会知道它是从哪里获取的。希望这可以帮助。

# html - CSS块浮动左边距到整个父宽度

> ID：16078417
> 
> 赞同：3
> 
> 时间：2013-04-18T08:49:42.163
> 
> 标签：html, css

html:

```
<div class="main_block">
    <div class="block">
       <p>some title</p>
       <img src="some_image.png" />
    </div>
    <div class="block">
       <p>some title</p>
       <img src="some_image.png" />
    </div>

    <div class="block">
       <p>some title</p>
       <img src="some_image.png" />
    </div>
</div> 
```

CSS：

```
div.main_block
{
    width: 600px;
}

div.main_block div.block
{
    width: 100px;
    margin-left: 100px;
}
div.main_block div.block:first-child
{
    margin-left: 0;
}

div.main_block div.block:hover
{
    border: 1px solid orange;
}
div.main_block div.active
{
    border: 1px solid orange;
} 
```

有什么可以自动制作的吗？因此，每次主宽度发生变化时，我都必须更改子边距和宽度，或者如何使其更有效？，如果我在悬停块时将边框添加到块中，如果它在最大边距和宽度上，边框会增加更多宽度，问题就从这里开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:53:29.037

只需将其更改`margin-left: 100px`为`auto`：

```
div.main_block div.block
{
    width: 100px;
    margin-left: auto;
} 
```

演示：http: [//jsfiddle.net/aHZXx/](http://jsfiddle.net/aHZXx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:52:10.440

您可以使用 % 代替 px。举个例子 ：

```
div.main_block div.block
{

width: 10%;

   margin-left: 10%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:53:44.507

这将解决**边框更改宽度**问题（告诉浏览器在计算中包括边框和填充`width`）：

```
div.main_block div.block {
    box-sizing: border-box;
} 
```

许多专家建议在所有元素上使用它：

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; } 
```

# android - 使用 Google Maps Android API v2 绘制一条以曲线结束的折线

> ID：16078418
> 
> 赞同：1
> 
> 时间：2013-04-18T08:49:44.540
> 
> 标签：android, google-maps, google-maps-android-api-2, google-polyline

我正在将应用程序从 v1 转换为 v2，并且遇到了一个问题：旧应用程序使用 Overlay 类的绘制函数来显示不同位置之间的线条。所有这些线都以曲线结束，如下所示：

[![例子](https://i.stack.imgur.com/eVoRC.jpg)](https://i.stack.imgur.com/eVoRC.jpg)

我正在考虑用点彼此非常接近的多段线替换它，以使其从远处看起来像一条曲线。但我担心它会消耗太多内存。有人有更好的主意吗？是否可以用画布在地图上画一条线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:13:54.913

我认为您不必太担心内存问题。新的 Google 地图 API 有一个叫做 Circle 的东西，它实际上似乎是一堆折线，据我所知，它不会消耗大量内存。

另外，我有一个应用程序，其中包含多个不同的折线，每个折线有 1k 个节点，并且地图上的导航仍然比 API v1 中的几个覆盖更平滑。

# ios - 当上一个视图来自导航控制器时如何保留 TabBar 界面

> ID：16078419
> 
> 赞同：0
> 
> 时间：2013-04-18T08:49:50.367
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uistoryboard, uitabbar

这是我的应用程序中的基本导航方案

[http://i.stack.imgur.com/xaDtw.jpg](http://i.stack.imgur.com/xaDtw.jpg)

一旦我访问选项卡式视图控制器的第一个视图，TabView 按钮界面就不存在了，而只有带有“后退”按钮的顶部导航栏。我想要由两个控制器管理的视图。我在这里看到了很多关于此的帖子，但它们都已严重过时，并且链接到的任何页面都不再可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:50:23.060

你需要改变这个：

```
 NavController-->tabBarController
                               |
                               |
                               |->Item1ViewController
                               |
                               |->Item2ViewController
                               |
                               |->Item3ViewController 
```

对此：

```
 tabBarController
                               |
                               |
                               |-->NavController->Item1ViewController
                               |
                               |-->NavController->Item2ViewController
                               |
                               |-->NavController->Item3ViewController 
```

您如何管理这部分：

```
-->NavController-->ViewController-->TabBarController 
```

取决于您的目标是......例如，viewController 是 loginScreen 吗？您有多种选择，例如

```
-->NavController-->ViewController--[modal segue]-->TabBarController

-->TabBarController-->Item1ViewController--[modal segue]-->loginController 
```

这是一个更广泛的应用程序设计问题......

我在这里有相关的答案： [我的标签栏控制器在推送后消失](https://stackoverflow.com/questions/15915930/my-tab-bar-controller-disappears-after-a-push-segue/15916297#15916297)

在这里： [如何处理 UINavigationControllers 和 UITabBarControllers iOS 6.1](https://stackoverflow.com/questions/15400827/how-to-handle-uinavigationcontrollers-and-uitabbarcontrollers-ios-6-1?lq=1)

# java - JAX-WS 在生成 wsdl 时重复复杂类型

> ID：16078420
> 
> 赞同：6
> 
> 时间：2013-04-18T08:49:57.860
> 
> 标签：java, web-services, jaxb, wsdl, jax-ws

我正在使用几种方法开发一个 Web 服务，将相同的复杂数据类型作为输入。数据类型具有 JAXB 注释以及 setter 和 getter，Web 服务类具有 JAX-WS 注释。

我的 service.java 文件的模板：

```
@WebService(serviceName = "ServiceWS")
public class SericeWS {

private static ServiceIF serviceImpl;

static {
    serviceImpl = new ServiceImpl();
}

public Result Method1(Credentials credentials) {
        @WebParam(name = "credentials") Credentials credentials) { 

    return serviceImpl.Method1(credentials);
}

    public Result Method2(Credentials credentials) {
        @WebParam(name = "credentials") Credentials credentials) { 

    return serviceImpl.Method2(credentials);
} 
```

}

编辑：我的 Credentials.java 文件：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "name",
    "password"
})
@XmlRootElement(name = "Credentials")
public class Credentials implements MyBean {

    @XmlElement(required = true)
    protected String name;
    @XmlElement(required = true)
    protected String password;

    /**
     * Gets the value of the name property.
     * 
     * @return The name property of the credentials
     *     
     */
    public String getName() {
        return name;
    }

    /**
     * Sets the value of the name property.
     * 
     * @param value The name property of the credentials
     *     
     */
    public void setName(String value) {
       this.name = value;
    }

    /**
     * Gets the value of the password property.
     * 
     * @return The password property of the credentials
     *     
     */
    public String getPassword() {
        return password;
    }

    /**
     * Sets the value of the password property.
     * 
     * @param value The password property of the credentials
     *       
     */
    public void setPassword(String password) {
        this.password = password;
    }  
} 
```

该服务部署在 Tomcat 中，并且 wsdl 是自动生成的。当使用 wsimport 生成客户端存根时，我会重复生成 Credentials 类型（Credentials、Method1.Credentials 和 Method2.Credentials），即每个方法都有一个不同的（内部）类。

似乎在生成 wsdl 和模式时出现了问题：

```
<xs:schema xmlns:tns="http://service.my.package.com/"            
xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.0" 
targetNamespace="http://service.my.package.com/">
<xs:element name="Credentials">
 <xs:complexType>
  <xs:sequence>
   <xs:element name="name" type="xs:string"/>
   <xs:element name="password" type="xs:string"/>
  </xs:sequence>
 </xs:complexType>
</xs:element>  
....
<xs:complexType name="getLockBoxKeys">
 <xs:sequence>
  <xs:element name="credentials" minOccurs="0">
   <xs:complexType>
    <xs:sequence>
     <xs:element name="name" type="xs:string"/>
     <xs:element name="password" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
 </xs:element>    
 ..... 
```

我怎样才能使所有这些工作使我只有一个凭据定义？我对 Web 服务、JAX-WS 和 JAXB 很陌生，所以我不确定我的注释是否正确。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:20:37.973

我不会给出解释所有规则的完整答案，因为我不记得/理解所有规则。

但我认为，如果您将`name`元素添加到`@XMLType`注释中，您将得到您正在寻找的东西（或者至少更进一步）。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Credentials", propOrder = {
    "name",
    "password"
})
@XmlRootElement(name = "Credentials")
public class Credentials { 
```

顺便说一句，您的原始 service.java 文件似乎粘贴得不太干净（我认为有一些不正确的大括号），这使得任何人都很难重新创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:33:56.673

在 MyCredentials.java 文件中，@XmlRootElement(name = "Credentials") 的名称以大写 C 开头，而在 @WebParam(name = "credentials") 中则不然。也许是因为这个？

# cmd - 如何获取没有文件的文件夹和子文件夹列表？

> ID：16078421
> 
> 赞同：85
> 
> 时间：2013-04-18T08:49:59.997
> 
> 标签：cmd, directory, subdirectory

我正在尝试将目录的***文件夹***和***子文件夹***列表打印到文件中。

当我运行时**`dir /s/b/o:n > f.txt`**，我也会得到一个文件列表。我只需要文件夹和子文件夹。

任何人都知道这可以从命令行界面执行此操作吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-04-18T09:59:45.177

试试这个：

```
dir /s /b /o:n /ad > f.txt 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-18T08:53:47.710

```
 Displays a list of files and subdirectories in a directory.

 DIR [ drive:][path][filename] [/A[[:]attributes]] [/B] [/C] [/D] [/L] [/N]
  [/O[[:]sortorder]] [/P] [/Q] [/R] [/S] [/T[[:]timefield]] [/W] [/X] [/4]

  [drive:][path][filename]
          Specifies drive, directory, and/or files to list.

  /A          Displays files with specified attributes.
  attributes   D  Directories                R  Read-only files
           H  Hidden files               A  Files ready for archiving
           S  System files               I  Not content indexed files
           L  Reparse Points             -  Prefix meaning not 
```

只需设置所需文件属性的类型，在您的情况下为 /A:D （目录）

目录 /s/b/o:n/A:D > f.txt

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-28T16:14:50.373

我用过`dir /s /b /o:n /a:d`，它工作得很好，只要确保你让文件完成写入，否则你会得到一个不完整的列表。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-19T07:04:25.167

我没有足够的声誉来评论任何答案。在其中一条评论中，有人询问如何忽略列表中的隐藏文件夹。下面是如何做到这一点。

```
dir /b /AD-H 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-26T13:01:03.000

我在 PowerShell 中使用它：

```
dir -directory -name -recurse > list_my_folders.txt 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-10T11:57:17.037

`dir /ad /b /s`将给出所需的答案。

# javascript - Javascript：提取 URL 的一部分，清理它，并在 html 嵌入代码中使用它以用于 Flash 容器

> ID：16078423
> 
> 赞同：1
> 
> 时间：2013-04-18T08:50:03.570
> 
> 标签：javascript, sharepoint, embed, ecmascript-5

*提前抱歉，这个网站上的很多答案都与这个查询的一部分有关，尽管我没有把这些点联系起来。任何帮助将不胜感激（很高兴购买虚拟啤酒等）*

我正在寻找一个 URL，并在“&folderCTID”左侧和“RootFolder=”右侧提取部分字符串，例如：

这个： *[http](http://mysite.com/Project1/Forms/AllItems.aspx?RootFolder=%2FProject1%2FLesson%2014&FolderCTID=0x01200075C0E8AC5A64724787732A3200049D3A&View=) : //mysite.com/Project1/Forms/AllItems.aspx?RootFolder=%2FProject1%2FLesson%2014&FolderCTID=0x01200075C0E8AC5A64724787732A3200049D3A&View= {440F5454-054D-4C68-A1E2-4A52E4FD8FCB}*

变为： *%2FProject1%2FLesson%2014*

然后我希望用“/”替换“%2F”，并添加一个尾随“/presentation.swf”，留下我的**文件引用**- “/Project1/Lesson%2014/presentation.swf”

最后，我想在嵌入代码中使用文件引用，例如 src="/Project1/Lesson%2014/presentation.swf"

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:56:51.773

简短的回答：**是的**

```
var url = "http://mysite.com/Project1/Forms/AllItems.aspx?RootFolder=%2FProject1%2FLesson%2014&FolderCTID=0x01200075C0E8AC5A64724787732A3200049D3A&View={440F5454-054D-4C68-A1E2-4A52E4FD8FCB}",
i = 0, len, part;

url = url.split("?").pop().split("&");
len = url.length;

for ( ; i < len; i++ ) {
    part = url[i].split("=");
    if ( part[0] === "RootFolder" ) {
        break;
    }
}

part = decodeURIComponent(part[1]);

console.log(part); // "/Project1/Lesson 14" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:04:50.993

这对我有用

```
theURL='http://mysite.com/Project1/Forms/AllItems.aspx?RootFolder=%2FProject1%2FLesson%2014&FolderCTID=0x01200075C0E8AC5A64724787732A3200049D3A&View={440F5454-054D-4C68-A1E2-4A52E4FD8FCB}';

filePath = theURL.match(/RootFolder\=(.*?)&/)[1].replace(/%2F/g, "/")+"/presentation.swf";

alert(filePath); 
```

我认为您甚至不需要解码 url 即可在 src 中使用它，因此您可以使用

```
filePath = theURL.match(/RootFolder\=(.*?)&/)[1]+"%2Fpresentation.swf"; 
```

尝试 SWFObject [https://code.google.com/p/swfobject/wiki/documentation](https://code.google.com/p/swfobject/wiki/documentation)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>SWFObject dynamic embed - step 3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="swfobject.js"></script>

    <script type="text/javascript">
    swfobject.embedSWF(filePath, "myContent", "300", "120", "9.0.0");
    </script>

  </head>
  <body>
    <div id="myContent">
      <p>Alternative content</p>
    </div>
  </body>
</html> 
```

或者如果您使用的是 jQuery，您可以尝试[http://jquery.lukelutman.com/plugins/flash/](http://jquery.lukelutman.com/plugins/flash/)

```
$(document).ready(function(){
    $('#example').flash(
        { src: filePath,
          width: 720,
          height: 480 },
        { version: 8 }
    );
});

<div id="example">You don't have flash</div> 
```

或[http://jquery.thewikies.com/swfobject/](http://jquery.thewikies.com/swfobject/)

```
$(document).ready(
    function() {
        $('#myFlash').flash(filePath);
    }
);

<div id="myFlash">You don't have flash</div> 
```

我在上述示例中的正确位置包含了 filePath 变量

# arduino - 哪个型号的 arduino 用于基于螺线管的输出项目？

> ID：16078431
> 
> 赞同：0
> 
> 时间：2013-04-18T08:50:33.323
> 
> 标签：arduino, microcontroller

我是一名软件开发人员，没有嵌入式编程和电子方面的经验。我必须构建一个需要包含微控制器的项目。

该任务是一种（示例）我需要生成摩尔斯电码脉冲，这些脉冲将通过螺线管以振动的形式输出。我也想使用 c/c++ 作为编码语言。我进行了搜索，发现 arduino 更适合我接触该领域的任务。

如果你们能评论它是否适合这项任务，我将不胜感激。& 还请参考我应该使用哪种型号的 arduino。我正在考虑使用 arduinio 的任何 8 位变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:15:48.230

您使用哪个 Arduino 并不重要，因为您的要求看起来非常简单。一诺还好。

至于控制螺线管，使用像 TIP120 这样的晶体管非常容易——请参阅本[教程](http://bildr.org/2011/03/high-power-control-with-arduino-and-tip120/)（还有很多其他教程——只需搜索“arduino 螺线管”）。请注意，您不能（不应该）直接从 Arduino 为螺线管供电。

至于使用 C/C++ - 你可以用 Arduino 做到这一点，因为它的接线语言是基于 C/C++ 的。您可以使用 C/C++ 编写或使用 Wiring。如果准系统 Arduino IDE 与您可能习惯的相比过于原始，您也可以设置使用 Eclipse。

最后，[Arduino 论坛](http://arduino.cc/forum/)是提问的最佳场所——庞大而友好的社区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:53:52.867

由于您几乎没有任何要求 - 购买最便宜的集成编程器。也许其中之一？ [http://arduino.cc/en/Main/ArduinoBoardNano](http://arduino.cc/en/Main/ArduinoBoardNano) [http://arduino.cc/en/Main/ArduinoBoardMicro](http://arduino.cc/en/Main/ArduinoBoardMicro)

# php - Wordpress 内页上的表单提交错误

> ID：16078433
> 
> 赞同：1
> 
> 时间：2013-04-18T08:50:40.013
> 
> 标签：php, wordpress, forms, file

我在 WordPress 的内部模板上有一个表格。

```
<?php
/*
Template Name: Template Form Submission
*/

get_header(); ?>
<div class="entry-content">
<div style="width: 1000px;" align="left">
<form enctype="multipart/form-data" name="file_uplaod" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<input type="text" name="name" id="name" /><br /><br />
<input type="text" name="email" id="email" /><br /><br />
File <input type="file" name="test_file" id="test_file"/><br /><br />
<input type="submit">
</form>

</div> 
```

但问题是 PHP-SELF 在表单提交后无法正常工作，它将进入 index.php 页面。我无法使用 Javascript 重定向，因为文件上传在这里。所以任何人都可以帮我解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:54:04.650

```
<?php
function curPageURL() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
?> 
```

然后替换

```
 <form enctype="multipart/form-data" name="file_uplaod" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
```

和

```
<form enctype="multipart/form-data" name="resume_uplaod" action="<?php echo curPageURL(); ?>" method="post"> 
```

见[http://dev.kanngard.net/Permalinks/ID_20050507183447.html](http://dev.kanngard.net/Permalinks/ID_20050507183447.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:58:00.353

我相信您可以省略表单标签中的操作以提交到您当前的网址。如果 wordpress SEO url 处于活动状态，则 $_SERVER['PHP_SELF'] 将解析为 index.php。

# c++ - C++中的多线程处理，所有线程都没有完成就结束了

> ID：16078438
> 
> 赞同：0
> 
> 时间：2013-04-18T08:50:55.777
> 
> 标签：c++, multithreading, pthreads

我使用 pthread.h 运行以下代码...运行时，在线程完成之前，代码退出...

我附上代码...

```
#include<iostream>
#include<pthread.h>

using namespace std;

#define NUM_THREADS 5

void *PrintHello(void *threadid)
{
    long tid = (long)threadid;
    cout<<"Hello World! Thread ID,"<<tid<<endl;
    pthread_exit(NULL);
    return &tid;
}

int main()
{
    pthread_t threads[NUM_THREADS];
    int rc;
    int i;

    for(i=0;i<NUM_THREADS;i++)
    {
        cout<<"main() : creating thread,"<<i<<endl;
        rc = pthread_create(&threads[i],NULL,PrintHello,(void*)i);
        //sleep(1);
        if(rc)
        {
            cout<<"Error:Unable to create thread,"<<rc<<endl;
            exit(-1);
        }
    }

    pthread_exit(NULL);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:53:02.533

您应该`join`在调用`pthread_exit`main 之前的所有线程。

```
for (i = 0; i < NUM_THREADS; i++)
{
   pthread_join(threads[i], 0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:56:57.297

在你的主要工作中，

```
 pthread_exit(NULL); // this causes main to do its own work and exit. 
                       // and the other thread will keep running at its own pace 
```

[如此处](http://www.csc.villanova.edu/~mdamian/threads/posixthreads.html#preface)所述

你必须使用类似的东西

```
for (i = 0; i < NUM_THREADS; i++)
{
   pthread_join(&threads[i],NULL);
} 
```

在 main 中使其等待所有线程结束，然后再继续

# liferay - 持久性更新时的 Liferay 异常数据

> ID：16078439
> 
> 赞同：0
> 
> 时间：2013-04-18T08:50:57.687
> 
> 标签：liferay, liferay-6

我将 Liferay 与 ServiceBuilder 一起使用，但尝试使用 update 方法将代码文件读入 String 并将其保存到数据库中，但出现此错误：

```
 return irRulePersistence.update(rule, false); 
```

**错误：数据异常错误被截断到左边。**

我使用 service.xml 文件创建了此列：

```
 <column name="ruleFile" type="String" /> 
```

保存长字符串是否需要其他类型？

我可以将 .drl 文件保存到数据库中吗？如果是，我该怎么办？有没有指南解释？

非常感谢你，奥里奥尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:50:07.377

对于存储长字符串，您可以在 portlet-model-hints.xml 中作为

```
<field name="description" type="String">
            <hint-collection name="CLOB" /> 
```

```
<column name="file" type="Blob" /> 
```

您可以使用 Blob 类型将文件存储到数据库。详细可以参考 DBStore.java -->updateFile

# android - 有没有办法在我的平板电脑应用程序中呈现/显示 pdf？

> ID：16078440
> 
> 赞同：0
> 
> 时间：2013-04-18T08:50:58.637
> 
> 标签：android, pdf

我正在实现一个平板电脑应用程序，它在左侧显示我的 pdf 文件列表，在右侧我想显示 pdf 文件数据。我怎样才能做到这一点？我很好奇是否可以在片段中启动 pdf 阅读器意图，以便我自己启动另一个应用程序。可能吗？或者如果我应该使用一些 pdf 渲染 sdk，但问题是我需要避免使用 gpl 许可证，而且我发现几乎所有这些类型的 sdk 都是 gpl 许可的，在移动版本中我只需打开已安装的 pdf 阅读器。或者我可以在 webview 中打开它们吗？像 url 这样的东西将在我的文件系统中占有一席之地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:17:15.430

您可以使用这个[Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)。您将能够`PDFs`在您的`Fragments`或您使用的任何内容中显示。尽管您应该查看源代码，并且您可能必须对其进行修改，以处理所有`AsynkTasks`正在运行以“解码”PDF 文件并正确停止它们的程序。

您不能通过集成/启动外部应用程序`Intent`并将其封装在您的`Activity`或`Fragment`.

# ios - iOS静态库中的单例类方法

> ID：16078443
> 
> 赞同：0
> 
> 时间：2013-04-18T08:51:11.890
> 
> 标签：ios, static, singleton

我有一个静态库，里面有一个Singleton Class Method，我在一个`(IBAction)`函数中调用，第一次调用没问题，但是第二次crash了，也没有报错信息，singleton类方法如下：

```
 +(myClass *)sharedClient{
    static myClass *_sharedClient = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        _sharedClient = [[[myClass alloc] init] autorelease];

    });

    return _sharedClient;
    } 
```

我称之为：

```
 -(IBAction) action

    {
        [myClass sharedClient] action];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:08:51.417

您正在向共享访问器内的新对象发送自动释放。下次自动释放池弹出时，共享对象将被释放然后销毁。只需删除自动释放，崩溃应该会自行修复。

# android - 如何检查该单词是否已在用户词典中可用？

> ID：16078444
> 
> 赞同：4
> 
> 时间：2013-04-18T08:51:12.103
> 
> 标签：android, android-contentprovider

我需要最简单优雅的方式（拥有单词）来检查给定单词是否已经在用户词典中可用。词频无关紧要，语言环境才是。

有没有比查询`ContentResolver`迭代和检查更简单的方法`cursor.getString(INDEX_WORD).equals(myWord)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:10:54.733

您应该创建一个查询，它将在以下位置搜索您的单词`UserDictionary`：

```
getContentResolver().query(UserDictionary.Words.CONTENT_URI,
     new String[]{UserDictionary.Words._ID, UserDictionary.Words.WORD},
     //Selection
     UserDictionary.Words.WORD +" = ?",
     //Selection args
     new String[]{myWord}, null); 
```

比你可以检查`Cursor`：

```
if(cursor.getCount()==0){
     //Word is not in dictionary
} 
```

# php - 试图理解zend框架中的一些代码

> ID：16078451
> 
> 赞同：1
> 
> 时间：2013-04-18T08:51:45.703
> 
> 标签：php, zend-framework

项目/index.php

```
<?php
error_reporting(E_ALL|E_STRICT);
date_default_timezone_set('Europe/London');
set_include_path('.' . PATH_SEPARATOR . './library'
. PATH_SEPARATOR . './application/models/'
. PATH_SEPARATOR . get_include_path());
include "Zend/Loader.php";
Zend_Loader::loadClass('Zend_Controller_Front');
// setup controller
$frontController = Zend_Controller_Front::getInstance();
$frontController->throwExceptions(true);
$frontController->setControllerDirectory('./application/controllers');
// run!
$frontController->dispatch();
?> 
```

Zend/Controller/Front.php

```
<?php
...
class Zend_Controller_Front
{
...
    protected static $_instance = null;
...
    protected $_throwExceptions = false;
...
    protected function __construct()
        {
            $this->_plugins = new Zend_Controller_Plugin_Broker();
        }
...
    public static function getInstance()
        {
            if (null === self::$_instance) {
                    self::$_instance = new self();
            }

        return self::$_instance;
        }
...
    public function throwExceptions($flag = null)
        {
            if ($flag !== null) {
                    $this->_throwExceptions = (bool) $flag;
                    return $this;
            }

            return $this->_throwExceptions;
        }
...
}
...
?> 
```

问题：

1.  `$this->_plugins = new Zend_Controller_Plugin_Broker();` 这个类的用途是什么：`Zend_Controller_Plugin_Broker`？似乎它在 project/index.php 中没有做任何事情
2.  `public function throwExceptions($flag = null)` 为什么 ？`$flag !== null, return $this;`_ `$flag == null, return $this->_throwExceptions;`为什么不都返回 $this？
3.  `$frontController->setControllerDirectory('./application/controllers');`“。” 是指当前目录？为什么我们需要有“。”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:28:15.567

> 这个类的用途是什么：Zend_Controller_Plugin_Broker？

它用于管理控制器插件。如果您调用`$front->registerPlugin()`插件代理，则处理该调用。有关更多信息，请参阅[http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html)。

> 为什么 $flag !== null，返回 $this；而 $flag == null，返回 $this->_throwExceptions;?

它允许函数有两个目的。如果不带参数调用它，则返回 throwExceptions 的当前值。如果您使用参数调用它，则您正在设置值。

> $frontController->setControllerDirectory('./application/controllers'); “。” 是指当前目录？为什么我们需要有“。”？

为什么不？它更清楚地表明路径是相对于当前目录的。

# node.js - 从 res.end 收到奇怪的尾随字符

> ID：16078452
> 
> 赞同：0
> 
> 时间：2013-04-18T08:51:54.190
> 
> 标签：node.js, encoding

这是后端代码：

```
res.statusCode = 400
res.setHeader 'Content-Type', 'text/plain'
res.end 'Invalid API endpoint.' 
```

当我从终端卷曲它时，我得到：

```
Invalid API endpoint.% 
```

“%”符号以反色显示。

为什么那个“％”符号在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:46:16.997

这标志着部分行，因为响应发送没有尾随换行符。从

```
man zshoptions 
```

> ```
>  PROMPT_SP <D>
>           Attempt  to  preserve  a partial line (i.e. a line that did not
>           end with a newline) that would otherwise be covered up  by  the
>           command prompt due to the PROMPT_CR option.  This works by out‐
>           putting some cursor-control characters, including a  series  of
>           spaces,  that  should  make  the terminal wrap to the next line
>           when a partial line is present (note that this is only success‐
>           ful if your terminal has automatic margins, which is typical). 
> ```

```
 When  a  partial  line is preserved, by default you will see an
          inverse+bold character at the end of the partial line:   a  "%"
          for a normal user or a "#" for root.  If set, the shell parame‐
          ter PROMPT_EOL_MARK can be used to customize  how  the  end  of
          partial lines are shown.

          NOTE:  if the PROMPT_CR option is not set, enabling this option
          will have no effect.  This option is on by default. 
```

# sql - TSQL Not Equal <> 表现不同

> ID：16078455
> 
> 赞同：1
> 
> 时间：2013-04-18T08:51:59.063
> 
> 标签：sql, tsql, sql-server-2008-r2

我在 SQL Server 2008 R2 中有两个表

```
TABLE1 - Column DateCreated datetime null
TABLE2 - Column DateCreated datetime null

When I see the profiler
SELECT * from TABLE1
WHERE DateCreated <> '2011-06-10 00:00:00.000' 
```

这个日期我有 3 条记录

```
2011-06-10 00:00:00.000
2011-06-10 00:00:00.000
2011-06-10 09:45:00.000 
```

不返回任何记录

在表 2 上

```
SELECT * from TABLE2
WHERE DateCreated <> '2011-06-10 00:00:00.000' 
```

这个日期我有 3 条记录

```
2011-06-10 18:02:05.000
2011-06-10 18:05:08.000
2011-06-10 18:07:09.000 
```

返回所有 3 条记录。这很奇怪。为什么在第一种情况下我应该取回 1 条记录却没有取回任何记录？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:02:39.273

在您的 SQL 中，“2011-06-10 00:00:00.000”不是日期。它是一个转换为日期的字符串。在数据库中，“2011-06-10 00:00:00.000”实际上可能是“2011-06-10 00:00:00.00001”。也许尝试使用 DATEDIFF(mcs,DateCreated,'2011-06-10 00:00:00.000') 看看实际的区别是什么。

# php - php文件上传无法正常工作

> ID：16078457
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:52:04.677
> 
> 标签：php, file-upload

我设法将图像下载到 C:\wamp\www\images\ 。但是文件的第一个字母被删除。我不知道为什么会这样。另外，我无法在网页上显示图像。你能帮帮我吗？

此 php 文件显示有关文件的信息，并且还假设显示图像，但事实并非如此。

```
<html><head><title>File Uploads</title></head>
<body bgcolor="#33ff33">
<font face="verdana" size="+1">
<?php
   echo "The uploaded file is: ", $_FILES['picture_file']['tmp_name'], "<br />";
   $filename=$_FILES['picture_file']['name'];
   $filesize=$_FILES['picture_file']['size'];
   echo "filename".$filename;
   $directory='C:\wamp\www\images\\';
   $uploadFile = $directory . $filename;
   echo "The moved file is: $uploadFile<br />";
   if (move_uploaded_file($_FILES['picture_file']['tmp_name'],
   $uploadFile)){
   echo "The file is valid and was successfully uploaded.
   <br /> ";
   echo "The image file, $filename, is $filesize bytes.<br 
   />";
}

?>

<br/>

 <img src=<?php
    echo "\"c:\wamp\www\images\\$filename\""?>>

</font>
</body>
</html> 
```

这个html表单上传图片

```
<html><head><title>Uploading Pictures</title></head>
<body bgcolor="lavender">
<h3>Uploading Files</h3>
<form
 enctype="multipart/form-data"
 action="upload_move_file.php"
 method="post">
 Browse and select the picture you want to upload: <br />
<input name="picture_file" type="file" />
<br />
<input type=submit value="Get File"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:04:25.923

如果“www”是您的文档根目录，则图像源将是“/images/$filename”。

# for-loop - 在java中的for循环之外访问字符串变量？

> ID：16078459
> 
> 赞同：0
> 
> 时间：2013-04-18T08:52:15.877
> 
> 标签：for-loop, get, jtable

大家好，我想在 for 循环之外访问一个字符串变量，以便我可以使用它进行进一步的编码。在这里，我试图从 Jtable 中获取值并将其存储在字符串中，以创建数据库表。完整代码在这里：[http ://textuploader.com/?p=6&id=zVEWY](http://textuploader.com/?p=6&id=zVEWY)

```
Coding :
int row = table.getRowCount();

int column = table.getColumnCount();

for (int j = 0; j < row; j++) {

for (int i = 0; i < column; i++) {

 //System.out.println(table.getValueAt(j, i));
  String readstr = (String) table.getValueAt(j, i);   // I WANT TO ACCESS THIS STRING

 }

 }

 try{
   // FILE READ AND TABLE CREATE
   String tname="example";
   String dbname="DB123";
    Class.forName("com.mysql.jdbc.Driver");
    Connection conn= (Connection)    DriverManager.getConnection("jdbc:mysql://localhost:3306/DB123","root","");
    Statement stmt=(Statement) conn.createStatement();

    System.out.println("connect");

     DatabaseMetaData dmd = (DatabaseMetaData) conn.getMetaData();
     while((readstr=brr.readLine())!=null)                     // TO USE IT HERE
    {
     ResultSet rs = dmd.getTables(null,"MigrationDB", "example", null);
     //set not null column
     if (String.valueOf(readstr).contains("NO"))
  readstr=readstr.replaceAll("NO", "not null");
     else if(String.valueOf(readstr).contains("YES"))
       readstr=readstr.replaceAll("YES", "");
     if(String.valueOf(readstr).contains("PRIMARY"))
         readstr=readstr.replaceFirst("PRIMARY","primary key");
    System.out.println("replace string "+readstr);
  int k=1;
   if (!rs.next())
  {
  stmt.executeUpdate("CREATE TABLE "+tname+ "("+readstr+")");

    }
 else{
     System.out.println(readstr);
     stmt.executeUpdate("ALTER TABLE "+tname+ " ADD("+readstr+")");
      System.out.println("altered");

      }
     }

    }
     catch (Exception e){}

   }

    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:08:34.757

您需要了解局部变量是什么以及它们的生命周期是什么。我建议通读本教程：[http ://www.tutorialspoint.com/java/java_variable_types.htm](http://www.tutorialspoint.com/java/java_variable_types.htm)

在您的情况下，只需在 for 循环之外声明 readstr 就可以满足您的要求。

```
String readstr;
for(//loop condition) {
readstr = read value ;
} 
```

# sharepoint-2010 - SharePoint 2010 筛选器问题

> ID：16078460
> 
> 赞同：1
> 
> 时间：2013-04-18T08:52:22.517
> 
> 标签：sharepoint-2010, filtering

在 SharePoint 2010 中，我想自动过滤库/数据库，类似于选择过滤器的工作方式，但每个用户不同，就像当前用户过滤器一样。

有没有办法将这两个过滤器结合起来，或者是否有另一个过滤器能够自动过滤站点当前用户的信息？

如果可能的话，我希望过滤器对所有用户都不可见（如读者/贡献者）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:07:05.813

我不确定我是否理解正确，但是如果您指的是具有基于您姓名的列的视图，您可以转到 library(for doc libraries)/list(for lists) 和然后点击创建视图，创建一个标准视图，让它成为你的默认视图。在过滤器部分，放置在要过滤的列中并放置在值 [Me] 上。这将过滤所有在该字段上只有用户名的项目。如有必要，您还可以放置更多过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:38:00.573

我终于找到了实现它的方法。它需要几个选择过滤器，但这只是一个小缺点。如果您编辑选择过滤器并转到“高级过滤器选项”，则可以在“默认值”中输入需要过滤数据库的选择值，如果转到“高级”，则可以选择目标受众，从而使选择过滤器仅对所需的组和/或个人起作用。

通过将一个国家的所有不同组放在同一个选择过滤器中，并将所有相似的办公室等级放在同一个选择过滤器中，选择过滤器的数量将相对较低，我将能够维护一个易于管理的系统。

尽管我最终设法自己解决了它，但我要感谢所有试图帮助我解决问题的人，你们鼓励我继续尝试（：

# ios - UITextField 中的文本将无法正确居中

> ID：16078466
> 
> 赞同：6
> 
> 时间：2013-04-18T08:52:45.130
> 
> 标签：ios, uitextfield, alignment, placeholder

我认为我的问题与[线程](https://stackoverflow.com/questions/13917949/ios-uitextfield-changes-position-when-text-is-changed)有关。我有一个带有两个 UITextFields（用户/密码）的登录屏幕。两者都与占位符文本水平居中对齐。当我按下一个字段时，占位符文本会向左跳一点，并且标记位于第一个字符之后（看起来很糟糕）。

![焦点中的文本字段](https://i.stack.imgur.com/WhsaD.png).

当我开始输入时，会出现清除按钮（应该如此），但文本在 UITextField 视图中未正确居中。

![带有文本的文本字段](https://i.stack.imgur.com/2Omcd.png)

仅当文本字段具有第一响应者时才会出现此问题。

如何使织补文本和占位符文本保持在文本字段的中心？？？

更新：情节提要中的文本字段设置：

![情节提要中的文本字段设置](https://i.stack.imgur.com/tJHe2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-07T09:53:24.557

我遇到了同样的问题，我所做的是我创建了我的自定义控件，上面有 UITextField，下面两个控件的 UILabel 具有相同的宽度和高度。当我需要显示文本占位符时，我将标签 alpha 设置为 1，当我需要隐藏占位符时，我将 alpha 设置为 0。我还将文本输入 bg 颜色设置为清除颜色。除了做所有这些我实现 UITextFieldDelegate (textFieldDidBeginEditing/ textFieldDidEndEditing/ shouldChangeCharactersInRange)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-20T06:55:23.273

请查看下图中的控件对齐方式并进行相应设置。它会解决你的问题![在此处输入图像描述](https://i.stack.imgur.com/esOvi.png)

# iphone - 是否可以在不使用标签值的情况下将 uibutton 移动到不同的位置？

> ID：16078468
> 
> 赞同：0
> 
> 时间：2013-04-18T08:52:55.710
> 
> 标签：iphone, objective-c

这里我使用标签值来区分 uibuttons。我想在不使用标签值的情况下将 uibuttons 移动到桌子周围的不同位置（如 zynga poker）？X 和 Y 位置必须不同。例如，如果我写 x+=100; y+=12；每次 x 和 y 位置将增加相同的值，但在圆桌 x 和 y 位置不会增加相同的值。

使用下面的代码，我可以使用标签值将 uibutton（或 uiimageviews）移动到该位置，但代码会变得更多（意味着它将占用更多内存）。

我只想分发35张图片卡。

谁能给我一些关于这方面的信息？

**代码：**

```
for(int i=1 ;i<35;i++)
{
    NSLog(@"inside for loop");
    UIButton *btn_show=[UIButton buttonWithType:UIButtonTypeCustom];
    btn_show.frame=CGRectMake(190+(i/2), 20, 71, 96);
    btn_show.tag=i;
    [btn_show setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
    [self.view addSubview:btn_show];
    [self fun_Animations:btn_show];

}

-(void)fun_ViewAnimations
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.2];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

}
-(void)fun_Animations:(UIButton *)button
{
    [self fun_ViewAnimations];
    if(button.tag==1)
    {

        [UIView setAnimationDelay:1.0];

        button.frame=CGRectMake(290,10, 71, 96);

    }
    if(button.tag==2)
    {

        [UIView setAnimationDelay:1.2];

        button.frame=CGRectMake(390,110, 71, 96);

    }
    .....
    .....
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:22:00.367

您可以使用数组索引来执行类似的操作，而无需将标签设置为按钮。这是我的代码

```
 - (void)viewDidLoad
{

    btnArray=[[NSMutableArray alloc] init];

    for(int i=1 ;i<10;i++)
    {
        NSLog(@"inside for loop");
        UIButton *btn_show=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        btn_show.frame=CGRectMake(190+(i/2), 20, 71, 96);
        [btnArray addObject:btn_show];

        [btn_show setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
        [self.view addSubview:btn_show];
        [self fun_Animations:btn_show];
    }

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)fun_ViewAnimations
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.2];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
}

-(void)fun_Animations:(UIButton *)button
{
    [self fun_ViewAnimations];

    int index=[btnArray indexOfObject:button];

    switch (index) {
        case 0:
        {
            [UIView setAnimationDelay:1.0];
            button.frame=CGRectMake(290,10, 71, 96);
        }
            break;
            case 1:
        {
            [UIView setAnimationDelay:1.2];
            button.frame=CGRectMake(390,110, 71, 96);
        }
            break;
        default:
            break;
    }

    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:29:25.537

试试这个以满足您的要求......在类级别声明这个变量......

```
float animationDelay; 
```

使用此代码：

```
animationDelay = 1.0;
for(int i=1 ;i<35;i++)
{
    NSLog(@"inside for loop");
    UIButton *btn_show=[UIButton buttonWithType:UIButtonTypeCustom];
    btn_show.frame=CGRectMake(190+(i/2), 20, 71, 96);
    btn_show.tag=i;
    [btn_show setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
    [self.view addSubview:btn_show];
    [self fun_Animations:btn_show];

}

-(void)fun_ViewAnimations
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.2];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

}

float animationDelay;
-(void)fun_Animations:(UIButton *)button
{
    [self fun_ViewAnimations];

    [UIView setAnimationDelay:animationDelay];

    CGRect frame = button.frame;
    frame.origin.x += 100;    // X which I set is based on your sample code on question, if any changes in the above sample, it is needs to adjust
    frame.origin.y += 90;     // Y which I set is based on your sample code on question, if any changes in the above sample, it is needs to adjust
    [button setFrame:frame];

    animationDelay += 0.2;    // The animationDelay which I set is based on your sample code on question, if any changes in the above sample, it is needs to adjust

    [UIView commitAnimations];
} 
```

# javascript - 如何用jQuery相互替换（更改）DOM中的2个div节点？

> ID：16078469
> 
> 赞同：1
> 
> 时间：2013-04-18T08:53:01.427
> 
> 标签：javascript, jquery

假设我在变量 nodeA 和 nodeB 中有两个节点引用。我想在 DOM 中相互替换它们，保留它们的所有属性和附加的事件处理程序等。

我怎样才能用 jQuery 做到这一点？我试过 .replaceWith(...) 但我看到它适用于 html 文本，我想保留 DOM 对象本身。

将有两个 .replaceWith(...) 调用。第二个是在一个节点上，它不在 DOM 中......它似乎不起作用......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:04:48.050

它将类似于开关变量，但您需要根据 DOM 来考虑它。

```
var temp = $('<div>'); 
temp.insertAfter(first);
first.insertAfter(second);
second.insertAfter(temp);
temp.remove(); 
```

JS 小提琴：http: [//jsfiddle.net/qsutQ/](http://jsfiddle.net/qsutQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:07:17.203

使用此答案中的函数：

[jquery：在 DOM 中切换元素](https://stackoverflow.com/questions/8034918/jquery-switch-elements-in-dom)

```
function swapElements(elm1, elm2) {
    var parent1, next1,
        parent2, next2;

    parent1 = elm1.parentNode;
    next1   = elm1.nextSibling;
    parent2 = elm2.parentNode;
    next2   = elm2.nextSibling;

    parent1.insertBefore(elm2, next1);
    parent2.insertBefore(elm1, next2);
} 
```

切换应该非常简单，不需要创建任何临时元素：

```
swapElements($("#obj1")[0], $("#obj2")[0]); 
```

**小提琴： http:**
[//jsfiddle.net/JvAMq/1/](http://jsfiddle.net/JvAMq/1/)
（点击文本查看警告框，事件绑定保持）

# magento - 以管理员身份登录时显示“父角色 id 'G1' 不存在”错误消息

> ID：16078474
> 
> 赞同：6
> 
> 时间：2013-04-18T08:53:11.910
> 
> 标签：magento, magento-1.7

在magento中以管理员身份登录后端

以管理员身份登录时显示“父角色 id 'G1' 不存在”错误消息

谁能告诉我如何解决这个错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T07:21:56.517

尝试运行此查询：

```
insert into admin_role values(1,0,1,1,'G',0,'Administrator');

insert into admin_rule values (8,1,'all',null,0,'G','allow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-08T00:18:02.730

我可以通过在数据库中将所有用户的 tree_level 更新为“2”来解决这个问题......

`UPDATE admin_role SET tree_level = 2 WHERE role_type = "U";`

然后我清除了我的 Magento 缓存和会话，并能够成功登录。

[此解决方案](http://www.fly2mars-media.de/seoblog/magento/magento-parent-role-id-g4-does-not-exist-or-other-ids-101936/)建议使用此修复程序。它还建议对核心代码进行更改，但到目前为止，我的情况还不需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T10:56:51.910

*   使用“admin_rule”表中的相应“resource_id”检查“role_id”。
*   在“admin_role”表中将“role_id”与“all”资源分配为“parent_id”，同时在“admin_role”表中将“tree_level”设置为“2”，你就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-25T02:36:25.427

清除缓存为我解决了问题。

```
echo flush_all | nc localhost 11211
rm -rf var/cache 
```

# java - 将包含多个句子的字符串中的句子的第一个单词大写

> ID：16078479
> 
> 赞同：6
> 
> 时间：2013-04-18T08:53:26.160
> 
> 标签：java, string, stringtokenizer

例如：

String s="this is a.line is .over"

应该出来

“这是一个.Line is.Over”

我想过两次使用字符串标记器

```
-first split using"."

 -second split using " " to get the first word

 -then change charAt[0].toUpper 
```

现在我不确定如何使用字符串标记器的输出作为另一个输入？

我也可以使用 split 方法生成我尝试过的数组

```
 String a="this is.a good boy";
     String [] dot=a.split("\\.");

       while(i<dot.length)
     {
         String [] sp=dot[i].split(" ");
            sp[0].charAt(0).toUpperCase();// what to do with this part? 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T09:06:38.250

使用StringBuilder，不需要拆分和创建其他字符串等等，看代码

```
public static void main(String... args) {

String text = "this is a.line is. over";

int pos = 0;
boolean capitalize = true;
StringBuilder sb = new StringBuilder(text);
while (pos < sb.length()) {
    if (sb.charAt(pos) == '.') {
        capitalize = true;
    } else if (capitalize && !Character.isWhitespace(sb.charAt(pos))) {
        sb.setCharAt(pos, Character.toUpperCase(sb.charAt(pos)));
        capitalize = false;
    }
    pos++;
}
System.out.println(sb.toString());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:38:12.550

无需搞乱拆分和拼接，您可以在字符数组上就地工作：

```
String s = "this is a.line is .over ";

char[] cs = s.toCharArray();

// make sure to capitalise the first letter in the string
capitaliseNextLetter(cs, 0);

for (int i = 0; i < cs.length; i++) {
    // look for a period
    if (cs[i] == '.') {
        // capitalise the first letter after the period
        i = capitaliseNextLetter(cs, i);
        // we're assigning to i to skip the characters that 
        // `capitaliseNextLetter()` already looked at.
    }
}

System.out.println(new String(cs));

// This will capitalise the first letter in the array `cs` found after 
// the index `i`
private static int capitaliseNextLetter(char[] cs, int i) {
    for (; i < cs.length; i++) {
        // This will skip any non-letter after the space. Adjust the test 
        // as desired
        if (Character.isAlphabetic(cs[i])) {
            cs[i] = Character.toUpperCase(cs[i]);
            return i;
        }
    }
    return cs.length;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T09:08:27.197

试试这个把句子的第一个字母大写。我只是对你的代码做了一些改动。

```
public static void main(String[] args) {
    String a = "this is.a good boy";
    String[] dot = a.split("\\.");
    int i = 0;
    String output = "";
    while (i < dot.length) {
        dot[i] = String.valueOf(dot[i].charAt(0)).toUpperCase()
                + dot[i].substring(1);
        output = output + dot[i] + ".";
        i++;
    }
    System.out.println(output);
} 
```

输出：

```
This is.A good boy. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-08T19:42:55.990

如果您可以使用[Apache commons-lang3](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html#capitalizeFully(java.lang.String))中的 WordUtils ，请执行以下操作：

```
WordUtils.capitalizeFully(text, '.') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T08:59:34.490

请注意，Java 字符串是不可变的（不可修改）。

另请注意，如果在 a 之后直接有一个空格（从那时起第一个字符串将为空） ，`sp[0].charAt(0)`则会导致a。`ArrayIndexOutOfBoundsException``.`

我建议使用`char[]`，例如：

```
 String a = "this is.a good boy";
 char arr[] = a.toCharArray();
 boolean capitalize = true;
 for (int i = 0; i < arr.length; i++)
   if (arr[i] == '.')
     capitalize = true;
   else if (arr[i] != ' ' && capitalize)
   {
     arr[i] = Character.toUpperCase(arr[i]);
     capitalize = false;
   }
 a = new String(arr); 
```

`Character.isWhitespace(arr[i])`可能更喜欢`arr[i] != ' '`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-05T10:54:47.133

```
char[] strArr = str.toCharArray();
        for (int i = 0; i < strArr.length; i++) {
            if (str.charAt(i) == " ".charAt(0) && i + 1 < strArr.length) {
                strArr[i + 1] = String.valueOf(String.valueOf(strArr[i + 1])).toUpperCase().charAt(0);
            }
        }
        System.out.println(String.valueOf(strArr)); 
```

# delphi - 防止 XSLT 转换将 utf-8 XML 转换为 utf-16？

> ID：16078480
> 
> 赞同：6
> 
> 时间：2013-04-18T08:53:26.853
> 
> 标签：delphi, xslt, utf-8, delphi-xe2, utf-16

在 Delphi XE2 中，我正在对收到的 XML 文件进行 xslt 转换，以删除所有命名空间信息。
问题：它改变了

```
<?xml version="1.0" encoding="utf-8"?> 
```

进入

```
<?xml version="1.0" encoding="utf-16"?> 
```

这是我从 Exchange 服务器返回的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
<h:ServerVersionInfo MajorVersion="14" MinorVersion="0" MajorBuildNumber="722" MinorBuildNumber="0" Version="Exchange2010" xmlns:h="http://schemas.microsoft.com/exchange/services/2006/types" xmlns="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
</s:Header>
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<m:ResolveNamesResponse xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
<m:ResponseMessages>
<m:ResolveNamesResponseMessage ResponseClass="Success">
<m:ResponseCode>NoError</m:ResponseCode>
<m:ResolutionSet TotalItemsInView="1" IncludesLastItemInRange="true">
<t:Resolution>
<t:Mailbox>
<t:Name>developer</t:Name>
<t:EmailAddress>developer@timetellbv.nl</t:EmailAddress>
<t:RoutingType>SMTP</t:RoutingType>
<t:MailboxType>Mailbox</t:MailboxType>
</t:Mailbox>
<t:Contact>
<t:Culture>nl-NL</t:Culture>
<t:DisplayName>developer</t:DisplayName>
<t:GivenName>developer</t:GivenName>
<t:EmailAddresses>
<t:Entry Key="EmailAddress1">SMTP:developer@timetellbv.nl</t:Entry>
</t:EmailAddresses>
<t:ContactSource>ActiveDirectory</t:ContactSource>
</t:Contact>
</t:Resolution>
</m:ResolutionSet>
</m:ResolveNamesResponseMessage>
</m:ResponseMessages>
</m:ResolveNamesResponse>
</s:Body>
</s:Envelope> 
```

这是删除命名空间信息的函数：

```
Uses
   MSXML2_TLB; // IXMLDOMdocument

class function TXMLHelper.RemoveNameSpaces(XMLString: String): String;
const
  // An XSLT script for removing the namespaces from any document.
  // From http://wiki.tei-c.org/index.php/Remove-Namespaces.xsl
  cRemoveNSTransform =
    '<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">' +
    '<xsl:output method="xml" indent="no"/>' +

    '<xsl:template match="/|comment()|processing-instruction()">' +
    '    <xsl:copy>' +
    '      <xsl:apply-templates/>' +
    '    </xsl:copy>' +
    '</xsl:template>' +

    '<xsl:template match="*">' +
    '    <xsl:element name="{local-name()}">' +
    '      <xsl:apply-templates select="@*|node()"/>' +
    '    </xsl:element>' +
    '</xsl:template>' +

    '<xsl:template match="@*">' +
    '    <xsl:attribute name="{local-name()}">' +
    '      <xsl:value-of select="."/>' +
    '    </xsl:attribute>' +
    '</xsl:template>' +

    '</xsl:stylesheet>';

var
  Doc, XSL: IXMLDOMdocument2;
begin
  Doc := ComsDOMDocument.Create;
  Doc.ASync := false;
  XSL := ComsDOMDocument.Create;
  XSL.ASync := false;
  try
     Doc.loadXML(XMLString);
     XSL.loadXML(cRemoveNSTransform);
     Result := Doc.TransFormNode(XSL);
  except
     on E:Exception do Result := E.Message;
  end;
end; { RemoveNameSpaces } 
```

但在这之后，突然变成了一个 utf-16 文件：

```
<?xml version="1.0" encoding="UTF-16"?>
<Envelope>
[snip]
</Envelope> 
```

谷歌搜索“xsl utf-8 utf-16”后，我尝试了几件事：

*   更改行（例如[，以 UTF8 而不是 UTF16 输出 DataTable XML](https://stackoverflow.com/questions/3476883/output-datatable-xml-in-utf8-rather-than-utf16)）

    ```
    <xsl:output method="xml" indent="no"> 
    ```

    进入：

    ```
    <xsl:output method="xml" encoding="utf-8" indent="no"/>
    <xsl:output method="xml" encoding="utf-8"/>
    <xsl:output encoding="utf-8"/> 
    ```

    那没有用。
    （这将是最佳解决方案，根据[http://www.xml.com/pub/a/2002/09/04/xslt.html](http://www.xml.com/pub/a/2002/09/04/xslt.html) “编码属性实际上不仅仅是在结果文档中添加编码声明；它告诉 XSLT 处理器使用该编码写出结果。”）

*   换行（例如[XslCompiledTransform 使用 UTF-16 编码](https://stackoverflow.com/questions/5302858/xslcompiledtransform-uses-utf-16-encoding)）

    ```
    <xsl:output method="xml" indent="no"/> 
    ```

    进入

    ```
    <xsl:output method="xml" omit-xml-declaration="yes" indent="no" /> 
    ```

    这省略了起始 xml 标记，但如果我然后只是预先

    ```
    <?xml version="1.0" encoding="utf-8"?> 
    ```

    我会丢失字符，因为没有完成实际的 utf 转换。

*   IXMLDOMdocument2 没有`Encoding`属性

任何想法如何解决这一问题？

备注/背景：

*   如果一切都失败了，也许仍然可以选择将 utf-16 XML 数据更改为 utf-8，但这是一种完全不同的方法。

*   我正在尝试使用 utf-8 进行所有操作，因为我正在通过 EWS 与 Exchange 服务器通信，并且将 http 请求标头设置为 utf-16 不起作用：Exchange 告诉我内容类型 'text/xml; charset = utf-16' 不是预期的类型 'text/xml; 字符集 = utf-8'。EWS 返回 utf-8（见帖子开头）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:05:46.427

问题在于该`transformNode`方法的使用，它返回一个字符串，并且使用 MSXML，这样的字符串是 UTF-16 编码的。因此，您需要为结果创建一个空的 MSXML DOM 文档并使用[方法`transformNodeToObject`，](http://msdn.microsoft.com/en-us/library/windows/desktop/ms766561%28v=vs.85%29.aspx)将空的 DOM 文档作为第二个参数传递，然后您可以将结果文档保存到文件或流中，并且编码应该在`xsl:output`指令中指定.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:15:14.403

要在您的原始代码中使用 IXMLDocument，它应该如下所示：

```
var
  iInp, iOtp, iXsl: IXMLDocument;
  Utf8: UTF8String;
begin
  iInp := LoadXMLData(XMLString);
  iXsl := LoadXMLData(cRemoveNSTransfrom);
  iOtp := NewXMLDocument;
  iInp.Node.TransformNode(iXsl.Node,iOtp);
  iOtp.SaveToXML(Utf8);
end 
```

现在变量 Utf8 应该包含转换后的 UTF-8 编码的 XML，如果要保存到流/文件，请将 SaveToXML 替换为

```
 iOtp.Encoding := 'UTF-8';
  iOtp.SaveToFile(....); 
```

# angularjs - 如何使用 Angular e2e 进行多次点击？

> ID：16078489
> 
> 赞同：0
> 
> 时间：2013-04-18T08:53:45.100
> 
> 标签：angularjs, click, selection, slickgrid

我正在使用网格编写 E2E 测试。当我尝试使用网格进行单个选择时，它工作正常。

```
element('#wrapped_grid .item-id-2 .slick-cell').click(); 
```

但我不知道如何模拟多项选择，（点击+ ctrl键的组合）

任何想法将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:50:09.373

虽然我无法模拟您所询问的内容，但请考虑“绕过”用户界面以直接在控制器上模拟多项选择。换句话说，直接调用控制器上处理用户多选的方法。

# c# - 将通用列表从 jquery 传递到 c# 代码隐藏

> ID：16078504
> 
> 赞同：0
> 
> 时间：2013-04-18T08:54:19.043
> 
> 标签：c#, jquery, asp.net, json, jquery-ui

我有一个简单的 webmethod ，它基本上是在我的代码隐藏中过滤报告：-

```
 [WebMethod(EnableSession = true)]
    public static List<Report> FetchReports(string reportName)
    {
        List<Report> FetchedReports = dataModel.PopulateLinks().Where(r => r.Name.ToLower().Contains(reportName.ToLower())).ToList();
        return FetchedReports;
    } 
```

现在返回到这个 Jquery 函数：-

```
 $("#reports-textSearch").keyup(function () {
        var textLength = $(this).val().length;
        if (textLength > 2) {
            var args = {
                reportName: document.getElementById('reports-textSearch').value
            };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "Dashboard.aspx/FetchReports",
                data: JSON.stringify(args),
                dataType: "json",
                success: function(r) {
                    var reports = r.data;
                    $.each(reports, function (index, report) {
                        $("#div1").append("<strong>" + report.Name + "</strong>" + "<br/>" +
                        "ID: " + report.Id + "<br />" +
                        "DisplayName: " + report.DisplayName + "<br />" +
                        "Url: " + report.Url + "<br />" +
                        "ParentId: " + report.ParentId + "<br />" +
                        "ReportGroupId: " + report.ReportGroupId + "<br />" +
                        "AccessLevel: " + report.AccessLevel + "<br />");
                        alert(reports);
                    });
                    //var reports = data.d;
                    //__doPostBack('div#UPMainMenu', reports());
                },
                error: function (data) {
                    alert("Error");
                }
            });

        }
    }); 
```

我希望将其提交回另一个页面，从那里我将获得搜索结果并填充另一个面板。

目前此代码不起作用，如何更改代码的 $.each 部分以返回实际列表，然后如何在 C# 代码隐藏中对其进行操作以获得所需的过滤报告？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:00:26.863

嗨，请按照这篇详细文章了解如何将参数 frm jquery 传递给后面的代码。

[jQuery 和 WCF](http://www.west-wind.com/weblog/posts/2008/Apr/21/jQuery-AJAX-calls-to-a-WCF-REST-Service)

# java - 为什么我的基因突变代码不能重新调整整个基因？爪哇

> ID：16078507
> 
> 赞同：-2
> 
> 时间：2013-04-18T08:54:23.547
> 
> 标签：java, arraylist, genetic-programming

[http://i.imgur.com/PWVruQ0.png](http://i.imgur.com/PWVruQ0.png)

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package parentmutation;

import java.util.ArrayList;
import java.util.Random;

/**
 *
 * @author Renter
 */
public class Parentmutation {

    /**
     * @param args the command line arguments
     */
    static int population = 50;
    static int geneSize = 25;
    public static void main(String[] args) {

        char[] parenta = new char[geneSize];                     //Create parents to pull genes from
        for (int x = 0; x < geneSize; x++) {
            parenta[x] = 'A';
            System.out.print("-");
        }
        System.out.println();
        char[] parentb = new char[geneSize];
        for (int x = 0; x < geneSize; x++) {
            parentb[x] = 'B';
        }

        char[][] people = new char[population][];                //How many children to make
        Parentmutation p = new Parentmutation();
        for (int x = 0; x < population; x++) {
            people[x] = p.flopChild(parenta, parentb);           //Save it for later
            System.out.println(people[x]);                       //Output it for now
        }

    }

    public char[] flopChild(char[] a, char[] b) {
        Random r = new Random();
        int y = 0;
        ArrayList<Integer> parts = new ArrayList();
        char[] child = new char[geneSize];

        while (y < geneSize) {                                  //Break it into parts so you can easily swap genes from the parents
            int num = r.nextInt(geneSize + 1 - y);
            if (num + y > geneSize) {
                parts.add(num + y - geneSize);
                y = geneSize + 1;
            } else {
                if (num == 0) {
                } else {
                    parts.add(num);
                    y += num;
                }
            }
        }

        int last = 0;
        for (int x = 0; x < parts.size(); x++) {                //Use the pieces to get chunks from the parents var a and b
            for (int z = last; z < last + parts.get(x); z++) {
                if (r.nextInt(2) == 0) {                        //Decied which parent to pull from
                    child[z] = a[z];
                } else {
                    child[z] = b[z];
                }
            }
            last = parts.get(x);
        }
        return child;
    }
} 
```

所以我试图创建一些基于两个父母的孩子。目标是将具有“AAAAAA”特征的父母a和具有“BBBBB”特征的父母b随机分配给孩子。结果看起来像“ABABA”、“AAAAB”或它们的任何其他组合。我现在拥有的代码交换了特征并将它们返回给孩子，但它们并不总是正确的长度。我包含的代码只运行一次以简化事情。以下是一些示例结果。

```
 run:

    -------------------------

    ABBBBABBBBABAABABBBAAAB
    BBAAAAABABBBBABAAAAAA
    BAAAAAABABBBB
    BAAAABBAABBABABAABBABABBB
    BBAAAAABBABBABAABBA
    BAABBAAABBAABBBAAAABAAAB
    BBABABAABABAABBBBBAAAA
    BBBBABAAAABBBBBAABBAA
    ABAABBABBBBBAAABABBABAAB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:22:11.150

这是该`flopChild`方法的更正版本。

```
public static char[] flopChild(final char[] a, final char[] b) {
    final Random r = new Random();
    int y = 0;
    final ArrayList<Integer> parts = new ArrayList<Integer>();
    final char[] child = new char[geneSize];

    while (y < geneSize) { // Break it into parts so you can easily swap
                            // genes from the parents
        final int num = r.nextInt(geneSize + 1 - y);
        if (num + y > geneSize) {
            parts.add(num + y - geneSize);
            y = geneSize + 1;
        } else {
            if (num == 0) {
            } else {
                parts.add(num);
                y += num;
            }
        }
    }

    int last = 0;
    for (int x = 0; x < parts.size(); x++) { // Use the pieces to get chunks
                                                // from the parents var a
                                                // and b
        final int next = last + parts.get(x);
        final char[] parent = r.nextInt(2) == 0 ? a : b; /*
                                                         * You want the same
                                                         * parent for one
                                                         * given chunk,
                                                         * right?
                                                         */
        for (int z = last; z < next; z++) {
            child[z] = parent[z];
        }
        last = next; // And not parts.get(x)
    }
    return child;
} 
```

我纠正了两件事：

*   `last`变量被分配给（数组中的`parts.get(x)`一个随机位置）而不是`last + parts.get(x)`. 这导致了你的长度问题。
*   您做了很多工作来按块处理数组，但是随后您为每个元素而不是每个块随机选择父级。

输出现在看起来像：

```
-------------------------
ABBBBBBBBBBBBBBBBBBBBBBBA
AAAAAAAAAABBBBBBBBBBBBBBB
AAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAABBBBBBBBBB
BBBBBBBBBBBBBBBBBBBBBBBAA
BBBBBBBBBBBBBBBBBBBBBBBBB
AAAAAAAAAAAAAAAABBBBBBAAA
AAAAAAAAABBBBBBBBBBBBBBBB
BBBBBBBBBBBAAAAAAAAAAAABB
AAAAAAAAAAAAAAAAAAAAAAAAB
AAAAAAAAAAAAAAAAAAAAABBBB
AAAAAAAAAAAAAAAAAABBBBBBB
AAAAAAAAABBBBBBBBBBBBBBBB
AAAAAAAAAAAAAAAAAAAAAAAAA
BBBBBBBBBBBBBBBBBBBBBBBBB
AAAAAAAAAAAAAAAAAAAAAAAAA
BBBBBBBBBBBBBBBBBBBBBBAAB
BBBBBBBBAAAABBBBBBBBBBBBA
BBBBBBBBBBBBBBBBBBAABBBBB
AAAAAAAAAAAAAAAAAAAAAABAA
BBBBBBBBBBBBBBBBBBBBBBBBB
BBBBBBBBBBBBBBBBBBBAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAABBABBB
BBBBBBBBBBBBBBBBBBBBBBAAA
BBBBBBBBBBBBBBBBBBBAAAABB
BBBBBAAAAAAAAAAAAAAAAAAAB
AAAAAAAAAAAAAAAAAAAAAABBB
AAAAAAAAAAAAAABBBBBBBBBBB
AAAAAAAAABAAAAAAABBBBBAAB
BBBBBBBBBBBBBBBBBBBBBBBBB
AAAAAAAAAAAAAAAAAAAAAABBB
AAAAAAAAAAAAAAAAABAAAAAAB
BBBBBBBAAAAAAAAAAAAAAAAAA
AAAAAAAAAABBBBBBBBBBBAAAB
ABBBBBBBAAAAAAAABBBBBBBBA
BBBBBBBBBBBBBBBBBBBAAAAAB
AAAAAAAAAAAABBBBBBBBBABAA
BBBBBBBBBBBBBBBAAAAAAAAAB
AAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAABBBBBBA
BBBBAAAAAAAAAAAAAAAAAABBB
BBBBBBBBBBBBBBBBBBBBBBBBA
AAAAAAAAAAABBBBBBBBBBBBAA
BBBBBBBBBBBBBBBBBBBBBBBBA
AAAAAAAAAAAAAAAAAABBBBBBB
BBBBBBBBBBBBBBBBBBBBBBBBB
AAAABBBBBBBBBBBBBBBAAABBB
AAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAABBBBBBBBBBBAAAA 
```

# jquery - 在我的幻灯片中添加“循环模式”

> ID：16078510
> 
> 赞同：0
> 
> 时间：2013-04-18T08:54:27.747
> 
> 标签：jquery, slideshow

我得到了这个简单的水平幻灯片（我已经做了一段时间了），用左/右按钮来导航它。它没有“连续”播放 - 单击相应按钮时返回开头或结尾。这是jQuery代码：

```
var menuItem_place = 0;
var menuItem_position = 0;
var menuItem_limit = parseInt($('.menuItem').length) - 1;

$('.menuItem:first .content').css({margin: 0, height: '100%', lineHeight: '99px'})

// Rocks menu scroll LEFT button mouse events
$('#rocksMenu_btnLeft').on('mouseenter', function(){
  $(this).animate({'background-position-x':'-26px'}, 150);
});
$('#rocksMenu_btnLeft').on('mouseleave', function(){
  $(this).stop(true).animate({'background-position-x':'-52px'}, 150);
});
$('#rocksMenu_btnLeft').on('click', function(){
  $(this).animate({'background-position-x':'0px'}, 150,
    function(){
      $(this).animate({'background-position-x':'-26px'}, 150);
      // Slide items backward
      if (menuItem_place > 0){
       menuItem_place --;
      }
      menu_animateClick();
    }
  );
});

// Rocks menu scroll RIGHT button mouse events
$('#rocksMenu_btnRight').on('mouseenter', function(){
  $(this).animate({'background-position-x':'-26px'}, 150);
});
$('#rocksMenu_btnRight').on('mouseleave', function(){
  $(this).stop(true).animate({'background-position-x':'0px'}, 150);
});
$('#rocksMenu_btnRight').on('click', function(){
  $(this).animate({'background-position-x':'-52px'}, 150,
    function(){
      $(this).animate({'background-position-x':'-26px'}, 150);
      // Slide items forward
      if (menuItem_place < menuItem_limit){
        menuItem_place ++;
      }
      menu_animateClick();
    }
  );
});

function menu_animateClick() {
    menuItem_position = 0 - (menuItem_place * 200);
    $('#menuContainer').stop().animate({left: menuItem_position + 'px'}, 300);
} 
```

我想将该功能添加到我的代码中 - [FIDDLE](http://jsfiddle.net/64tu2/)

谢谢。

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:43:32.907

我在 menuItem_place 的每次递增和递减中添加了一个 else 语句。

```
if(menuItem_place > 0)
       menuItem_place --;
        else
      menuItem_place  =3; 
```

和

```
 if (menuItem_place < menuItem_limit){
    menuItem_place ++;
  }
    else
     menuItem_place = 0; 
```

[http://jsfiddle.net/64tu2/4/](http://jsfiddle.net/64tu2/4/)

# xcode - 在 Xcode 中链接 OpenCV 时架构 x86_64 错误的未定义符号

> ID：16078512
> 
> 赞同：14
> 
> 时间：2013-04-18T08:54:39.217
> 
> 标签：xcode, opencv

我在 Xcode 中链接 OpenCV 时遇到问题。我使用 brew 安装了 OpenCV：

```
brew tap homebrew/science
sudo brew install opencv 
```

我开始了一个新的 Xcode 命令行项目，添加`/usr/local/lib`到`/usr/local/include`库和标头搜索路径中。我还添加了`pkg-config --libs opencv`to的输出`other linker options`。

但是当我尝试编译这个小示例程序时：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

int main(int argc, char *argv[])
{
    cv::Mat test;
    cv::namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
    cv::waitKey(0);                                          // Wait for a keystroke in the window
    return 0;
} 
```

我收到以下链接器错误：

```
Undefined symbols for architecture x86_64:
  "cv::namedWindow(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64 
```

但我可以在命令行上使用

```
g++ `pkg-config --cflags --libs opencv` prog.cpp 
```

所以我认为问题在于 Xcode 的设置方式。但是我无法确定 Xcode 的编译方式和我的命令行参数之间到底有什么不同。

有谁知道这个错误的原因或知道我可以尝试调查这个问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T09:13:31.997

在 Xcode 中，在您的项目中创建一个新组，右键单击它，选择**Add Files to *Project***，导航到该`/usr/local/lib`文件夹​​并添加以下基本库：

> libopencv_core.dylib、libopencv_ml.dylib、libopencv_video.dylib

在以前版本的 OpenCV 中，库名称可能是：

> libcxcore.dylib、libcvaux.dylib、libcv.dylib、libhighgui.dylib、libml.dylib

（根据您在 Mac 上安装 OpenCV 的方法，这些库可能位于另一个路径中。）

编辑：

如果您在 OP 解释的链接阶段包含动态库，则不需要上述行。

选择您的项目，转到**Build Settings选项卡，按***c++ standard library*过滤，并将此参数设置为**libstdc++ (GNU C++ standard library)**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-22T14:27:43.933

我已将 Build Settings -> c++ 标准库设置为**Compiler Default**。错误消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-22T00:46:16.517

我必须添加以下库（构建阶段 -> 将二进制文件与库链接），以便构建 OpenCV：

*   加速
*   资产库
*   AV基金会
*   核心图形
*   核心图像
*   核心媒体
*   核心视频
*   石英芯
*   UIKit
*   基础

参考：[http ://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html#opencviosvideoprocessing](http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html#opencviosvideoprocessing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T12:15:14.587

对我来说，我在 iOS 的 xcode 中使用 opencv，我通过 pod install 而不是离线 opencv 框架使用 opencv 来解决错误。

您可以通过在下面添加 opencv pod 文本来尝试：

```
pod 'OpenCV', '2.4.9' 
```

# sql - 在链接数据库上创建 PLSQL 包

> ID：16078517
> 
> 赞同：1
> 
> 时间：2013-04-18T08:54:53.497
> 
> 标签：sql, oracle, plsql, database

我有两个数据库。一个包含软件包并且始终可用。另一个存储数据并且每天都在重建。

第一个数据库上的包正在对第二个数据库进行查询。现在我有查询，它们本身需要一些功能。我在第二个得到了一个星型模式，有时我需要一个包含所有详细信息的选择。
就像是`SELECT getDetails(Master-pk) FROM xyz WHERE abc;`

该函数`getDetails(pk)`将获取此键的所有详细信息并在一个字符串中返回它们：例如'detail1，detail2，...'

由于性能问题，我不能将这些功能放在其他软件包所在的数据库上，而必须将它们放在每天都在重建的数据库上。

所以我想在每次开始查询之前创建包。在本地，这适用于`DBMS_SQL.parse(curID, VARCHAR2<b>A</b>, first, last, 1);`
但`DBMS_SQL.parse@DBLink(..)`确实给了我一个 PLS-306。参数的数量或类型错误。

我的限制是：

1.  我不能将包包含在任何启动脚本或其他任何内容中。

2.  该软件包必须在第二个 DB 上可用。
    否：`dbms_sql.parse(id, 'SELECT getDetails@firstDB(pk) FROM..',1);` 表现不够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:11:47.330

为远程包创建同义词。就像是

```
create synonym remote_dbms_sql for dbms_sql@db_link
/ 
```

那么您应该能够在本地执行此操作：

```
remote_dbms_sql.parse(curID, VARCHAR2<b>A</b>, first, last, 1); 
```

# r - 对选定变量组的计算

> ID：16078529
> 
> 赞同：0
> 
> 时间：2013-04-18T08:55:50.263
> 
> 标签：r

我有一个变量名称如下的数据框：

```
a.1, a.3,  a.5,  a.6,  a.9, a.10, a.12

b.1, b.3,  b.5,  b.6,  b.9, b.10, b.12 
```

以此类推，从 a 到 j。

变量名称代表纵向研究中评估的参数和访问次数。

数据框还包含固定的基线参数。

我想为每个参数创建代表自上次访问以来的变化的新变量：

```
delta.a.3 <- a.3 - a.1
delta.a.5 <- a.5 - a.3 
```

对于所有参数的所有访问，依此类推。

有没有办法自动执行这个任务？

这是我的数据框的摘录：

```
 ID      DIAB    AGE 20MPACE.0 20MPACE.1 20MPACE.3 20MPACE.5 KOOSKPL.0 KOOSKPL.1 KOOSKPL.3 KOOSKPL.5
1 9000099       0     59    1.3280    1.2946    1.3500    1.2772    100.00     88.89     80.56     83.33
2 9000296       0     69    1.3658    1.3142        NA    1.3944    100.00    100.00    100.00    100.00
3 9000622       0     71    1.4305    1.5178        NA        NA    100.00    100.00        NA        NA
4 9000798       0     56    1.0636    1.2342    1.1969    1.1572     59.38     59.38     65.63     59.38
5 9001104       0     72    1.3924    1.3473        NA        NA    100.00    100.00     83.33        NA
6 9001400       0     75    1.6203    1.5015    1.5051    1.4264    100.00    100.00    100.00     91.67 
```

ID、DIAB、AGE - “固定”基线参数。20MPACE.0、20MPACE.1、20MPACE.3、20MPACE.5 - 在时间点 0、1、3、5 上观察 20MPACE。KOOSKPL.0、KOOSKPL.1 KOOSKPL.3 和 KOOSKPL.5 - 在时间点上观察 KOOSKPL 0、1、3、5。

我想做的事：

1.  计算不同时间点与**前一个时间点的参数变化**

    20MPACE.1-20MPACE.0

    20MPACE.3- 20MPACE.1

    20MPACE.5-20MPACE.3

    KOOSKPL.1 - KOOSKPL.0

    KOOSKPL.3 - KOOSKPL.1

    KOOSKPL.5 - KOOSKPL.3

2.  要将结果放在相应的列中：

    delta.20MPACE.1

    delta.20MPACE.3

    delta.20MPACE.5。

    delta.KOOSKPL.1

    delta.KOOSKPL.3

    delta.KOOSKPL.5

3.  要计算与时间**点 0 相关**的不同时间点的参数变化：

    20MPACE.1-20MPACE.0

    20MPACE.3- 20MPACE.0

    20MPACE.5-20MPACE.0

    KOOSKPL.1 - KOOSKPL.0

    KOOSKPL.3 - KOOSKPL.0

    KOOSKPL.5 - KOOSKPL.0

4.  同样，将结果放在列中：

    delta0.20MPACE.1

    delta0.20MPACE.3

    delta0.20MPACE.5。

    delta0.KOOSKPL.1

    delta0.KOOSKPL.3

    delta0.KOOSKPL.5

我一开始没有问最后两个问题。

可能的重点是使循环有选择地在具有相同前缀的变量上工作（例如 20MPACE.0、20MPACE.1、20MPACE.3、20MPACE.5）？有没有办法做到这一点？

我非常感谢您提出的及时且内容丰富的评论！然而，作为一个初学者，我需要一些时间来处理信息，我仍然不明白你告诉我的一切。

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:04:45.640

我看到你想要的两种可能性，但你的问题真的不清楚。可能性 #1 正如 Maxim K 所假设的那样，`diff`在每一行中都是完整的`data.frame`。可能性 #2 是您希望*按组*（“a”到“j”）`diff`跨越每一行。

 *在我们开始之前，这里有一些示例数据。我只为“a”和“b”组做过。

```
set.seed(1)
mydf <- data.frame(matrix(sample(100, 50, replace = TRUE), ncol = 10))
names(mydf) <- paste(rep(c("a", "b"), each = 5), c(1, 3, 5, 7, 9), sep = ".")
mydf
#   a.1 a.3 a.5 a.7 a.9 b.1 b.3 b.5 b.7 b.9
# 1  27  90  21  50  94  39  49  67  83  79
# 2  38  95  18  72  22   2  60  80  65   3
# 3  58  67  69 100  66  39  50  11  79  48
# 4  91  63  39  39  13  87  19  73  56  74
# 5  21   7  77  78  27  35  83  42  53  70 
```

### 可能性 #1

```
mydf[-1] - mydf[-length(mydf)]
#   a.3 a.5 a.7 a.9 b.1 b.3 b.5 b.7 b.9
# 1  63 -69  29  44 -55  10  18  16  -4
# 2  57 -77  54 -50 -20  58  20 -15 -62
# 3   9   2  31 -34 -27  11 -39  68 -31
# 4 -28 -24   0 -26  74 -68  54 -17  18
# 5 -14  70   1 -51   8  48 -41  11  17 
```

### 可能性 #2

```
lapply(letters[1:2], 
       function(x) {
         temp <- mydf[grepl(paste("^", x, sep = ""), names(mydf))] 
         temp[-1] - temp[-length(temp)]
       })
# [[1]]
#   a.3 a.5 a.7 a.9
# 1  63 -69  29  44
# 2  57 -77  54 -50
# 3   9   2  31 -34
# 4 -28 -24   0 -26
# 5 -14  70   1 -51
# 
# [[2]]
#   b.3 b.5 b.7 b.9
# 1  10  18  16  -4
# 2  58  20 -15 -62
# 3  11 -39  68 -31
# 4 -68  54 -17  18
# 5  48 -41  11  17 
```

当然，这只是为了让你开始，因为我对你的最终目标一点也不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:14:43.627

如果我正确理解您的问题，您希望在某些范围内自动分配变量名称。您需要根据您的情况调整以下代码，因为它没有准确指定，正如@SimonO101 指出的那样。假设您的原始数据框被称为`df`：

```
delta <- matrix(NA,nrow=nrow(df))         # this will be the matrix of differences

for (i in 2:(ncol(df))) {
  delta <- cbind(delta,df[,i] - df[,i-1]) # in this loop we take the differences between 
}                                         # i'th and i-1'th element. You may want to adjust this.

result.df <- cbind(delta[,-1],df)         # combine both matrices (coerced to dataframe)

# finally, name the variables using paste()
names(result.df) <- c(paste0("diff",2:ncol(df),".",1:(ncol(df)-1)),names(df)) 
```

最后一行发生的是，我们通过`paste`-ing（组合）以下值来为新变量创建一个变量名向量：新变量名前缀 (diff)、减法中第一个变量的编号、点、名称第二个变量。我们 c() 结合了原始名称向量。您可能希望`paste0("diff",2:ncol(df),".",1:(ncol(df)-1))`单独运行以查看其工作原理。`paste0`根据您的需要调整参数。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:01:54.193

我假设我自己的数据，因为你在这里没有真正的价值。

```
## create two vectors of length 10
> hello <- seq(from=1, by=5, length =10)
> hello1 <- c(5,11,13,18,25,26,54,98,78,100)

> jd <- rbind(hello,hello1)
# Create a dataframe
> h1 <- data.frame(jd)
> h1
       X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
hello   1  6 11 16 21 26 31 36 41  46
hello1  5 11 13 18 25 26 54 98 78 100
> 
> jd1 <- apply(h1,1,diff)
> jd1
    hello hello1
X2      5      6
X3      5      2
X4      5      5
X5      5      7
X6      5      1
X7      5     28
X8      5     44
X9      5    -20
X10     5     22 
```

在数据框中`jd1`，`x2`是`x2-x1`for的区别`hello`，`hello 1`它等同于`a.3 - a.1`您正在寻找的。

希望能帮助到你。*

# wcf - 负载均衡器健康检查 WCF 服务

> ID：16078530
> 
> 赞同：1
> 
> 时间：2013-04-18T08:55:51.170
> 
> 标签：wcf, load-balancing

如何让负载均衡器运行状况检查 WCF SOAP 服务是否已启动？

我当前的解决方案是确保 WCF 服务具有基地址，然后配置负载平衡器以对基地址执行 HTTP 获取请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:31:54.633

一种替代方法是广告 IsAlive (liek Ping) 方法，但这也会让您在调用此方法时知道服务状态。

它（以及您的方式）**不能保证**您在此之后的第二次，您的服务仍然可用。

也许您可以尝试一些端点，支持订阅服务失败事件处理程序？

# c# - 使用公共资源文件在 Web 应用程序和 Silver Light 应用程序之间进行本地化

> ID：16078531
> 
> 赞同：0
> 
> 时间：2013-04-18T08:55:56.673
> 
> 标签：c#, asp.net, localization, silverlight-5.0

我想在 web 应用程序和 silverlight 应用程序之间进行本地化。我已经在单个应用程序中进行了本地化，例如 Web 应用程序和 Silverlight 应用程序有单独的资源文件，我将当前文化从 Web 应用程序传递给 silverlight 对象，而不是根据该文化资源文件加载 silverlight。它工作正常。但是现在我们的需求发生了变化，我们将只有一个资源文件，并且这个资源文件将放在 Web 应用程序下，那么 silverlight 应用程序将如何从该资源文件中获取值，如何实现这一点。

# regex - 如何解决正则表达式中的问题？

> ID：16078534
> 
> 赞同：1
> 
> 时间：2013-04-18T08:56:13.097
> 
> 标签：regex, linux, bash

该文件是：

```
google.com a
go.gle.com a
google.com.google.com b
google.com.cloud.com c 
```

当我使用这种方式时：

```
grep -nre  '^\<google.com\> ' file<br> 
```

我可以得到：

```
1:google.com a 
```

但是方式：

```
grep -nre  '^\<go.gle.com\> ' file<br> 
```

也得到：

```
1:google.com a
2:go.gle.com a 
```

我想从“ `grep -nre '^\<go.gle.com\>`'文件”得到的结果是：

```
2:go.gle.com a 
```

**不是**

```
1:google.com a 
```

如何解决？
**PS： grep 命令中的域名如“google.com”是不固定的。也许是“goog.e.com”或“.oogle.com”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:57:51.713

如果你想在字面上匹配点，你必须转义它

```
grep -nre  '^\<go\.gle\.com\> ' file<br> 
```

[是正则表达式中的`.`特殊字符](http://www.regular-expressions.info/dot.html)，匹配除换行符以外的所有字符（默认情况下，表示没有修饰符）

另一种可能性是将点放入字符类中，有些人更喜欢这种表示法：

```
grep -nre  '^\<go[.]gle[.]com\> ' file<br> 
```

在字符类中，点也只是一个点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:58:22.887

看起来你需要逃离这个时期。试试`grep -nre '^\<go\.gle\.com\>' file`。

要仅匹配`google.com`第二个“o”不正确的拼写错误，您可以使用匹配*除*“o”之外的任何内容的字符类：

```
grep -nre '^\<go[^o]gle\.com\> ' file 
```

扩展它以解释前五个字符中的任何一个不正确：

```
$ grep -nre '\([^g]oogle\|g[^o]ogle\|go[^o]gle\|goo[^g]le\|goog[^l]e\|googl[^e]\)\.com' file.txt 
2:.oogle.com a
3:gRogle.com a
4:go.gle.com a
5:goonle.com a
6:googqe.com a
7:googla.com a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:26:29.523

您正在寻找的内容（**文字匹配**`grep`）对于您的选项是不可能的，因为`grep`它将被`matching pattern`视为 RegEx，因此 dot 将意味着`any character`。

`grep`您可以在OR中使用 -F 开关`fgrep`来`fixed string match`获得结果：

```
grep -nF 'go.gle.com ' inFile 
```

或者：

```
fgrep -n 'go.gle.com ' inFile 
```

**或者**，以下 awk 命令将为您提供您正在寻找的输出：

```
awk 'index($1, "go.gle.com"){print NR ":" $0}' inFile 
```

或完全匹配：

```
awk '$1 == "go.gle.com"{print NR ":" $0}' inFile 
```

请注意，我正在使用`awk's index function`或比较相等性`==`，因此匹配字符串不被视为正则表达式。

### 现场演示：http: [//ideone.com/FL37Sx](http://ideone.com/FL37Sx)

# vba - （VBA）Excel：如果两列中的内容匹配则采取行动

> ID：16078536
> 
> 赞同：1
> 
> 时间：2013-04-18T08:56:17.207
> 
> 标签：vba, excel, match

一张图抵得上一千个字，所以为了清楚起见，这里有一张图来说明情况： ![在此处输入图像描述](https://i.stack.imgur.com/GQn4e.jpg)

所以我在 C 列中有一些从**C2**到**C16**的内容（字符串和整数） 。我还有另一列 G 一些城市名称（字符串），从**G21**到**G25**。

这是我尝试做的事情：我希望我的方法 probaCity() 来查找这两列之间的匹配项。如果匹配，我希望它在 G 列的相应行（在数组“成为城市的概率”中）显示一些值（例如 10），如果不匹配，那么它将为 0。

因此，在单元格**G13**中，它应该写入 10，因为在数组的所有其他单元格中存在“Quezon”和 0 的匹配项。

这是我的代码：

```
Sub probaCity()
Dim count As Integer, myResult As Boolean

For count = 2 To lastRow
Range("C" & count).Activate
myResult = IsNumeric(Application.Match(ActiveCell.Value, Range("G21:G25"), 0))

If myResult = True Then
Range("G" & ActiveCell.Row).Value = Range("G" & ActiveCell.Row).Value + 0
Else
Range("G" & ActiveCell.Row).Value = Range("G" & ActiveCell.Row).Value + 10
End If

Next count
End Sub 
```

此代码的问题是 myResult 返回的值始终为 false（因此我的数组中的所有内容都设置为 0）。

非常感谢你的帮助。

**编辑：在尝试了一个建议后**：
1/使用 VBA（适用于除“Quezon”之外的所有内容） ![在此处输入图像描述](https://i.stack.imgur.com/wRlVu.jpg) 2/使用公式......同样的问题。 ![在此处输入图像描述](https://i.stack.imgur.com/EBMpE.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:33:18.390

> 我希望我的方法 probaCity() 查找这两列之间的匹配项。如果匹配，我希望它在 G 列的相应行（在数组“成为城市的概率”中）显示一些值（例如 10），如果不匹配，那么它将为 0。

无需为此使用 VBA。

看这个例子

使用此数组公式。输入公式后必须按`CTRL`+ `SHIFT`+`ENTER`

```
=IF(COUNT(FIND($C$9:$C$11,A1)),"10","") 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/d2kih.png)

**编辑**：既然你想要一个 VBA 方法，试试这个。

**VBA 方法（这将根据您的原始帖子使用示例数据）**

```
Sub Sample()
    Dim ws As Worksheet
    Dim LookUpRange As Range
    Dim lRow As Long

    '~~> Change this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> This is your city list
        Set LookUpRange = .Range("G21:G25")

        lRow = .Range("C" & .Rows.Count).End(xlUp).Row

        For i = 2 To lRow
            .Range("G" & i).Value = Application.Evaluate("=IF(COUNT(FIND(" & _
                                    LookUpRange.Address & _
                                    "," & .Range("C" & i).Address & ")),""10"",""0"")")
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:42:51.067

> 此代码的问题是 myResult 返回的值始终为 false（因此我的数组中的所有内容都设置为 0）。

您是否确保 myResult 始终为假，或者您是否从显示的 0 值中推断出它？

不确定它是否会有所帮助，但`IsError`感觉比`IsNumeric`这里更自然。您的原始 If 语句将按正确的顺序排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:37:23.473

不需要VBA。

1.  `=IF(ISNA(MATCH(C2,$G$21:$G$25,0)),0,10)`在 中输入公式`G2`。
2.  复制`G2`到`G3:G17`.

# jquery - 使用 jQuery 和 HTML 导出为 CSV

> ID：16078544
> 
> 赞同：77
> 
> 时间：2013-04-18T08:56:41.927
> 
> 标签：jquery, html, csv, export, export-to-csv

我有一个表格数据，我需要在不使用任何外部插件或 API 的情况下将其导出到 csv。我使用了`window.open`传递 MIME 类型的方法，但遇到了如下问题：

[如何使用 jQuery 确定系统上是否安装了 Microsoft Excel 或 OpenOffice](https://stackoverflow.com/questions/15918173/how-to-determine-whether-microsoft-excel-or-open-office-is-installed-on-the-syst)

代码应该独立于系统上安装的内容，即 OpenOffice 或 Microsoft Excel。我相信 CSV 是可以预期在两个编辑器中显示的格式。

## 代码

```
 <html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>  

<script type="text/JavaScript">
$(document).ready(function(){
    $("#btnExport").click(function(e) {
        var msg = GetMimeTypes();
        //OpenOffice
        window.open('data:application/vnd.oasis.opendocument.spreadsheet,' + $('#dvData').html());
        //MS-Excel
        window.open('data:application/vnd.ms-excel,' + $('#dvData').html());
        //CSV
        window.open('data:application/csv,charset=utf-8,' + $('#dvData').html());
        e.preventDefault();
    });
});

function GetMimeTypes () {
    var message = "";
        // Internet Explorer supports the mimeTypes collection, but it is always empty
    if (navigator.mimeTypes && navigator.mimeTypes.length > 0) {
        var mimes = navigator.mimeTypes;
        for (var i=0; i < mimes.length; i++) {
            message += "<b>" + mimes[i].type + "</b> : " + mimes[i].description + "<br />";
        }
    }
    else {
        message = "Your browser does not support this ";
       //sorry!
    }

    return ( message);
}
</script>

</head>
<body>
<div id="dvData">
<table>
    <tr>
        <th>Column One </th>
        <th>Column Two</th>
        <th>Column Three</th>
    </tr>
    <tr>
        <td>row1 Col1</td>
        <td>row1 Col2</td>
        <td>row1 Col3</td>
   </tr>
   <tr>
        <td>row2 Col1</td>
        <td>row2 Col2</td>
        <td>row2 Col3</td>
   </tr>
      <tr>
        <td>row3 Col1</td>
        <td>row3 Col2</td>
        <td>row3 Col3</td>  
   </tr>
</table>
</div>
<br/>
<input type="button" id="btnExport" value=" Export Table data into Excel " />

</body> 
```

## 错误

**CSV：**浏览器无法识别

**ODS 和 Excel：** 正在工作，但是当系统安装了 excel 或 openoffice 时，我无法找到生成哪个？

**IE** 8 版：完全不工作，在新窗口中打开，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/Ms7KU.png)

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-24T22:20:02.633

# 演示

请参阅下面的说明。

```
$(document).ready(function() {

  function exportTableToCSV($table, filename) {

    var $rows = $table.find('tr:has(td)'),

      // Temporary delimiter characters unlikely to be typed by keyboard
      // This is to avoid accidentally splitting the actual contents
      tmpColDelim = String.fromCharCode(11), // vertical tab character
      tmpRowDelim = String.fromCharCode(0), // null character

      // actual delimiter characters for CSV format
      colDelim = '","',
      rowDelim = '"\r\n"',

      // Grab text from table into CSV formatted string
      csv = '"' + $rows.map(function(i, row) {
        var $row = $(row),
          $cols = $row.find('td');

        return $cols.map(function(j, col) {
          var $col = $(col),
            text = $col.text();

          return text.replace(/"/g, '""'); // escape double quotes

        }).get().join(tmpColDelim);

      }).get().join(tmpRowDelim)
      .split(tmpRowDelim).join(rowDelim)
      .split(tmpColDelim).join(colDelim) + '"';

    // Deliberate 'false', see comment below
    if (false && window.navigator.msSaveBlob) {

      var blob = new Blob([decodeURIComponent(csv)], {
        type: 'text/csv;charset=utf8'
      });

      // Crashes in IE 10, IE 11 and Microsoft Edge
      // See MS Edge Issue #10396033
      // Hence, the deliberate 'false'
      // This is here just for completeness
      // Remove the 'false' at your own risk
      window.navigator.msSaveBlob(blob, filename);

    } else if (window.Blob && window.URL) {
      // HTML5 Blob        
      var blob = new Blob([csv], {
        type: 'text/csv;charset=utf-8'
      });
      var csvUrl = URL.createObjectURL(blob);

      $(this)
        .attr({
          'download': filename,
          'href': csvUrl
        });
    } else {
      // Data URI
      var csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csv);

      $(this)
        .attr({
          'download': filename,
          'href': csvData,
          'target': '_blank'
        });
    }
  }

  // This must be a hyperlink
  $(".export").on('click', function(event) {
    // CSV
    var args = [$('#dvData>table'), 'export.csv'];

    exportTableToCSV.apply(this, args);

    // If CSV, don't do event.preventDefault() or return false
    // We actually need this to be a typical hyperlink
  });
});
```

```
a.export,
a.export:visited {
  display: inline-block;
  text-decoration: none;
  color: #000;
  background-color: #ddd;
  border: 1px solid #ccc;
  padding: 8px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<a href="#" class="export">Export Table data into Excel</a>
<div id="dvData">
  <table>
    <tr>
      <th>Column One</th>
      <th>Column Two</th>
      <th>Column Three</th>
    </tr>
    <tr>
      <td>row1 Col1</td>
      <td>row1 Col2</td>
      <td>row1 Col3</td>
    </tr>
    <tr>
      <td>row2 Col1</td>
      <td>row2 Col2</td>
      <td>row2 Col3</td>
    </tr>
    <tr>
      <td>row3 Col1</td>
      <td>row3 Col2</td>
      <td>row3 Col3</td>
    </tr>
    <tr>
      <td>row4 'Col1'</td>
      <td>row4 'Col2'</td>
      <td>row4 'Col3'</td>
    </tr>
    <tr>
      <td>row5 &quot;Col1&quot;</td>
      <td>row5 &quot;Col2&quot;</td>
      <td>row5 &quot;Col3&quot;</td>
    </tr>
    <tr>
      <td>row6 "Col1"</td>
      <td>row6 "Col2"</td>
      <td>row6 "Col3"</td>
    </tr>
  </table>
</div>
```

* * *

# 截至 2017 年

现在使用 HTML5`Blob`并作为后备`URL`的首选方法。`Data URI`

# 在 Internet Explorer 上

其他答案建议`window.navigator.msSaveBlob`；但是，已知会**导致 IE10/Window 7 和 IE11/Windows 10 崩溃**。它是否可以使用 Microsoft Edge 是值得怀疑的（请参阅[Microsoft Edge 问题单#10396033](https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10396033/)）。

仅仅在微软自己的开发者工具/控制台中调用它就会导致浏览器崩溃：

```
navigator.msSaveBlob(new Blob(["hello"], {type: "text/plain"}), "test.txt"); 
```

 在我第一次回答四年后，新的 IE 版本包括 IE10、IE11 和 Edge。他们都在微软发明的功能上崩溃（慢拍）。

> 添加`navigator.msSaveBlob`支持需要您自担风险。

* * *

# 截至 2013 年

通常这将使用服务器端解决方案执行，但这是我对客户端解决方案的尝试。简单地将 HTML 转储为 a`Data URI`是行不通的，但这是一个有用的步骤。所以：

1.  将表格内容转换为有效的 CSV 格式字符串。（这是简单的部分。）
2.  强制浏览器下载它。该`window.open`方法在 Firefox 中不起作用，所以我使用了`<a href="{Data URI here}">`.
3.  `<a>`使用标签的属性分配默认文件名`download`，该属性仅适用于 Firefox 和 Google Chrome。由于它只是一个属性，它会优雅地降级。

* * *

# 笔记

*   您可以设置链接的样式，使其看起来像一个按钮。我会把这个努力留给你
*   **IE 有数据 URI 限制**。请参阅：[数据 URI 方案和 Internet Explorer 9 错误](https://stackoverflow.com/questions/7405345/data-uri-scheme-and-internet-explorer-9-errors)
*   关于**“下载”属性**，请参见：

    *   [在 HTML5 中下载资源：a[下载]](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)
    *   [错误 676619 - 实施建议的下载属性](https://bugzilla.mozilla.org/show_bug.cgi?id=676619)
    *   [如何检测对 HTML5“下载”属性的支持](https://stackoverflow.com/questions/12112844/how-to-detect-support-for-the-html5-download-attribute)

# 兼容性

浏览器测试包括：

*   Firefox 20+，Win/Mac（**工作**）
*   Google Chrome 26+，Win/Mac（**工作**）
*   Safari 6，Mac（**有效**，但文件名被忽略）
*   IE 9+（**失败**）

# 内容编码

CSV 已正确导出，但在导入 Excel 时，字符`ü`打印为`Ã¤`. Excel 错误地解释了该值。

引入`var csv = '\ufeff';`，然后 Excel 2013+ 会正确解释这些值。

如果您需要与 Excel 2007 兼容，请在每个数据值处添加 UTF-8 前缀。也可以看看：

*   [是否可以强制 Excel 自动识别 UTF-8 CSV 文件？](https://stackoverflow.com/q/6002256/59087)
*   [Microsoft Excel 破坏 .csv 文件中的变音符号？](https://stackoverflow.com/q/155097/59087)
*   [将 UTF-8 BOM 添加到字符串/Blob](https://stackoverflow.com/q/17879198/59087)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-21T23:26:56.217

我不确定上面的 CSV 生成代码是否如此出色，因为它似乎跳过了`th`单元格，并且似乎也不允许在值中使用逗号。所以这是我可能有用的 CSV 生成代码。

*它确实假设*你有`$table`一个 jQuery 对象的变量（例如。`var $table = $('#yourtable');`）

```
$rows = $table.find('tr');

var csvData = "";

for(var i=0;i<$rows.length;i++){
                var $cells = $($rows[i]).children('th,td'); //header or content cells

                for(var y=0;y<$cells.length;y++){
                    if(y>0){
                      csvData += ",";
                    }
                    var txt = ($($cells[y]).text()).toString().trim();
                    if(txt.indexOf(',')>=0 || txt.indexOf('\"')>=0 || txt.indexOf('\n')>=0){
                        txt = "\"" + txt.replace(/\"/g, "\"\"") + "\"";
                    }
                    csvData += txt;
                }
                csvData += '\n';
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-13T16:51:16.420

```
 <a id="export" role='button'>
        Click Here To Download Below Report
    </a>
    <table id="testbed_results" style="table-layout:fixed">
        <thead>
            <tr width="100%" style="color:white" bgcolor="#3195A9" id="tblHeader">
                <th>Name</th>
                <th>Date</th>
                <th>Speed</th>
                <th>Column2</th>
                <th>Interface</th>
                <th>Interface2</th>
                <th>Sub</th>
                <th>COmpany result</th>
                <th>company2</th>
                <th>Gen</th>
            </tr>
        </thead>
        <tbody>
            <tr id="samplerow">
                <td>hello</td>
                <td>100</td>
                <td>200</td>
                <td>300</td>
                <td>html2svc</td>
                <td>ajax</td>
                <td>200</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            </tr>
            <tr>
                <td>hello</td>
                <td>100</td>
                <td>200</td>
                <td>300</td>
                <td>html2svc</td>
                <td>ajax</td>
                <td>200</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            </tr>
        </tbody>
    </table> 
```

```
 $(document).ready(function () {
        Html2CSV('testbed_results', 'myfilename','export');
    });

    function Html2CSV(tableId, filename,alinkButtonId) {
        var array = [];
        var headers = [];
        var arrayItem = [];
        var csvData = new Array();
        $('#' + tableId + ' th').each(function (index, item) {
            headers[index] = '"' + $(item).html() + '"';
        });
        csvData.push(headers);
        $('#' + tableId + ' tr').has('td').each(function () {

            $('td', $(this)).each(function (index, item) {
                arrayItem[index] = '"' + $(item).html() + '"';
            });
            array.push(arrayItem);
            csvData.push(arrayItem);
        });

        var fileName = filename + '.csv';
        var buffer = csvData.join("\n");
        var blob = new Blob([buffer], {
            "type": "text/csv;charset=utf8;"
        });
        var link = document.getElementById(alinkButton);

        if (link.download !== undefined) { // feature detection
            // Browsers that support HTML5 download attribute
            link.setAttribute("href", window.URL.createObjectURL(blob));
            link.setAttribute("download", fileName);
        }
        else if (navigator.msSaveBlob) { // IE 10+
            link.setAttribute("href", "#");
            link.addEventListener("click", function (event) {
                navigator.msSaveBlob(blob, fileName);
            }, false);
        }
        else {
            // it needs to implement server side export
            link.setAttribute("href", "http://www.example.com/export");
        }
    }

</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-24T11:41:11.963

*@Terry Young*回答的一个小更新，即添加 IE 10+ 支持

```
if (window.navigator.msSaveOrOpenBlob) {
  // IE 10+
  var blob = new Blob([decodeURIComponent(encodeURI(csvString))], {
    type: 'text/csv;charset=' + document.characterSet
  });
  window.navigator.msSaveBlob(blob, filename);
} else {
  // actual real browsers
  //Data URI
  csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csvData);

    $(this).attr({
      'download': filename,
      'href': csvData,
      'target': '_blank'
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T03:15:21.843

据我了解，您的数据在表格中，并且您想从该数据创建 CSV。但是，您在创建 CSV 时遇到问题。

我的想法是迭代和解析表的内容，并从解析的数据中生成一个字符串。您可以查看[如何将 JSON 转换为 CSV 格式并存储在变量](https://stackoverflow.com/questions/8847766/how-to-convert-json-to-csv-format-and-store-in-a-variable)中作为示例。您在示例中使用了 jQuery，因此这不算作外部插件。然后，您只需按照建议使用`window.open`和使用来提供结果字符串。`application/octetstream`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T14:14:05.733

如果您有 CSV 格式的数据并将其转换为 HTML 以显示在网页上怎么办？您可以使用[http://code.google.com/p/js-tables/](http://code.google.com/p/js-tables/)插件。检查此示例[http://code.google.com/p/js-tables/wiki/Table](http://code.google.com/p/js-tables/wiki/Table) 由于您已经在使用 jQuery 库，我假设您能够添加其他 javascript 工具包库。

如果数据是 CSV 格式，您应该可以使用通用的“应用程序/八位字节流”mime 类型。您尝试过的所有 3 种 mime 类型都取决于客户端计算机上安装的软件。

# php - Magento：从 Varien_Data_Collection 获取数据

> ID：16078545
> 
> 赞同：1
> 
> 时间：2013-04-18T08:56:42.857
> 
> 标签：php, magento, magento-1.6

大家好！我希望你能给我一个线索，因为我仍然是 Magento 的菜鸟。

我尝试显示我在数组中获得的产品列表。在`Mage/Catalog/Block/Product/List.php`中，我创建了一个新`Varien_Data_Collection()`对象，在其中推送了我的产品对象（使用`->addItem($product)`）。

然后我返回我的自定义集合，`List.php`班级使用它来显示产品列表。

当我在浏览器中调用该页面时，显示的产品数量正确，当我单击它查看产品页面时，我得到了正确的页面。

但是，所有数据（如产品名称、价格等）都是空的。我猜 List 类用来捕获这些数据的方法在我的`Varien_Data_Collection`对象中失败了。

为了说明，这是我的代码示例：

```
// getting a particular product
$mainProduct = Mage::getModel('catalog/category')->load($currentCat->getId());
$mainProduct = $mainProduct->getProductCollection();
$mainProduct = $mainProduct->addAttributeToFilter('product_id', $_GET['cat_id']);

// creating a custom collection             
$myCollection = new Varien_Data_Collection();

foreach ($mainProduct as $product) {
    // getting my particular product's related products in an array
    $related = $product->getRelatedProductIds();                
    if ($this->array_contains($related, $_GET['cat_id'])) {
        // if it suits me, add it in my custom collection
        $myCollection->addItem($product);
    }
}
return $myCollection; 
```

这就是我在列表页面中得到的：

![在此处输入图像描述](https://i.stack.imgur.com/soqOf.jpg)

当 I 时`var_dump($myCollection)`，我可以看到`['name']`,`['price']`等字段没有被引用。只有`['product_id']`和许多其他我不关心的领域。

我的终极问题是：如何将包含这些产品数据的集合返回给我的 List 类？我知道它解释得不好，但我的英语非常有限，我尽力做到最好:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:58:43.540

`->getProductCollection()`针对类别调用仅返回已创建集合中每个产品的骨架数据。如果您想要每个产品的完整数据，则需要加载它们，因此在您的`foreach`循环中您将拥有：

```
$product = Mage::getModel('catalog/product')->load($product->getId()); 
```

但是，您构建集合的方式并不是最佳工作实践 - 您永远不必创建自己的`Varien_Data_Collection`对象，而是应该按如下方式创建产品集合：

```
$collection = Mage::getModel('catalog/product')->getCollection(); 
```

然后在加载集合之前（`foreach`循环或`->load()`对集合的调用将作为 2 个示例执行），您可以根据您的要求过滤集合。您可以使用本机 Magento 方法来执行此操作，其中一种您已经在使用 ( `addAttributeToFilter()`) 或者我更喜欢从集合中提取选择对象并以这种方式应用过滤：

```
$select = $collection->getSelect(); 
```

然后，您可以`Zend_Db_Select`针对此选择对象运行所有类方法来过滤集合。

[http://framework.zend.com/manual/1.12/en/zend.db.select.html](http://framework.zend.com/manual/1.12/en/zend.db.select.html)

加载集合后，其中的产品将包含完整的产品数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:30:34.857

首先请不要使用 $_GET 变量，使用`Mage::app()->getRequest()->getParams();` 第二个为什么不尝试从一开始就正确构建您的集合？

这是您的代码的作用：

```
$mainProduct = Mage::getModel('catalog/category')->load($currentCat->getId());
$mainProduct = $mainProduct->getProductCollection();
$mainProduct = $mainProduct->addAttributeToFilter('product_id', $_GET['cat_id']); 
```

得到一个产品，我的意思是你加载一个类别然后加载一个产品集合，然后按产品 ID 过滤.. 为什么不：

```
$mainProduct = Mage::getModel('catalog/product')->load($yourSearchedId); 
```

我也看不出你为什么按看起来像类别 ID 的 $_GET['cat_id'] 过滤产品......

总而言之，如果您准确地解释您要查找的内容，您可以获得更多帮助。看起来您正在尝试查找与给定产品相关的所有产品。那么为什么不为给定产品正确设置相关产品并获取相关产品集合。

```
$_product->getRelatedProductCollection(); 
```

更新：

既然您清除了请求，请尝试以下操作：

```
$relatedIds = $product->getRelatedProductIds();
$myCollection = Mage::getModel('catalog/category')
    ->load($currentCat->getId())
    ->getProductCollection();
$myCollection->addAttributeToFilter('product_id', array("in",$relatedIds)); 
```

//也 addAttributeToSelect 你可能需要的所有属性，比如名字等 $myCollection->load(); //也许你实际上不需要在这里加载

请记住，我没有测试这个代码，它是从我的头顶编写的，测试它。但我希望你明白这一点。

# hadoop - hadoop中的job客户端如何计算inputSplits

> ID：16078547
> 
> 赞同：1
> 
> 时间：2013-04-18T08:56:48.507
> 
> 标签：hadoop, mapreduce

我正在尝试了解 map reduce 架构。我正在咨询这篇[http://answers.oreilly.com/topic/2141-how-mapreduce-works-with-hadoop/](http://answers.oreilly.com/topic/2141-how-mapreduce-works-with-hadoop/)文章。我对 mapreduce 框架的组件 JobClient 有一些疑问。我的问题是：

JObClient 如何计算数据的输入拆分？

根据我正在咨询的资料，Job Client 在运行作业时计算位于指定 HDFS 上的输入路径中的数据的输入拆分。文章说，然后 Job Client 将资源（jar 和计算输入拆分）复制到 HDFS。现在这是我的问题，当输入数据在 HDFS 中时，为什么 jobClient 将计算的输入分割复制到 HDFS 中。

让我们假设 Job Client 将输入拆分复制到 HDFS，现在当 JOb 提交给 Job Tracker 和 Job Tracker 时详细说明作业为什么它从 HDFS 检索输入拆分？

如果我的问题不清楚，请道歉。我是初学者。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:58:41.200

输入拆分的计算取决于输入格式。对于典型的文本输入格式，计算拆分大小的通用公式是

```
 max(mapred.min.split.size, min(mapred.max.split.size, dfs.block.size)) 
```

或默认情况下

输入分割大小 = mapred.min.split.size < dfs.block.size < mapred.max.split.size

其中
mapred.min.split.size= 最小拆分大小
mapred.max.split.size - 最大拆分大小
dfs.block.size= DFS 块大小

对于 DB Input Format，拆分大小为
（总记录数/映射器数）

如上所述，输入拆分的数量和大小是给予映射器任务和记录读取器的元信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:10:13.857

不，JobClient 不会将输入拆分复制到 HDFS。您已经为自己引用了答案：

> 作业客户端在运行作业时计算位于指定 HDFS 上的输入路径中的数据的输入拆分。文章说，然后 Job Client 将资源（jar 和计算的输入拆分）复制到 HDFS。

输入本身依赖于集群。客户端仅计算从名称节点获得的元信息（块大小、数据长度、块位置）。这些`computed`输入拆分将元信息传递给任务，例如块偏移的 eG 和要计算的长度。

看一下`org.apache.hadoop.mapreduce.lib.input.FileSplit`，它包含文件路径、起始偏移量和单个任务将作为其输入操作的块的长度。您可能还想查看的可序列化类是：`org.apache.hadoop.mapreduce.split.JobSplit.SplitMetaInfo`.

将为每个将要运行的任务计算此元信息，并与 jars 一起复制到将实际执行此任务的节点。

# xpages - 在 xpage 中从我无权访问的数据库中获取图片（acl）

> ID：16078548
> 
> 赞同：0
> 
> 时间：2013-04-18T08:56:49.847
> 
> 标签：xpages

有没有办法让基于 xpages 的网页的 Web 用户能够显示（仅读取模式）数据库中的文档，而匿名用户在 acl 中没有访问权限。如果我有访问权限，我可以获取该文档，例如： `https://servername/otherdatabase.nsf/O/"+thisid+"/$FILE/"+thisdocument`

我想 SessionAsSigner 一定是可能的，但是如何？

其次，该用户有没有办法从匿名无权访问的数据库中查看视图？我该如何设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T11:27:17.893

另一种选择是使用 XAgent；例如，将`beforeRenderResponse`事件设置为以下内容：

```
var fileDb = sessionAsSigner.getDatabase((param.server || ""), param.path);
var fileDocument = fileDb.getDocumentByUNID(param.id);
var attachment = fileDocument.getAttachment(param.filename);
var inputStream = attachment.getInputStream();
var response = facesContext.getExternalContext().getResponse();
/* The following MIME type is generic, should work for all image types;
If you know what type the image will be, set a more specific MIME type */
response.setContentType("application/octet-stream");
var outputStream = response.getOutputStream();
com.acme.xsp.util.StreamUtil.copyStream(inputStream, outputStream);
inputStream.close();
outputStream.close();
attachment.recycle();
fileDocument.recycle();
facesContext.responseComplete(); 
```

`com.acme.xsp.util.StreamUtil`指用于将一个流流水线化到另一个流的 Java 便利类：

```
public class StreamUtil {
    public static void copyStream(InputStream input, OutputStream output) throws IOException {
        byte[] buffer = new byte[1024];
        int bytesRead;
        while ((bytesRead = input.read(buffer)) != -1) {
            output.write(buffer, 0, bytesRead);
        }
    }
} 
```

因此，不是将您的图像标签直接链接到附件，而是如下所示：

```
<xp:image url="/download.xsp?server=ACME01&amp;path=images.nsf&amp;id=OU812&amp;filename=photo.jpg" /> 
```

这种方法还可以为您提供其他选择：记录访问给定文件的次数、引用 URL（以防您想要实现在 Google 搜索图像时有时会看到的“无热链接”图像替换），或者您想要的任何东西.

举个具体的例子，大约十年前，我看到一位同事在内部实现了一个与 Google Analytics 相当的基本功能，甚至可以在不支持 JavaScript 的浏览器上工作，因为他在网站的每个页面上都使用了这种技术来制作公司徽标：他没有直接链接到 logo JPG，而是链接到一个 PHP 文件，该文件获取 IP、referer、用户代理等，将所有元数据写入 MySQL 数据库，然后最终将 logo 的字节流式传输到浏览器。这显然超出了您想要完成的范围，但我想您可能会发现有趣的是，这种类型的用例现在在 XPages 中相当简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T09:43:19.013

这可以使用 sessionAsSigner 并且例如重复。如果 XPage 在同一个数据库中，请确保将 XPage 标记为可供公共访问。以下简单示例将显示视图列中的内容和文档中的图像：

```
<xp:repeat id="protectedView" rows="15" removeRepeat="true" var="rowEntry" disableOutputTag="true">
    <xp:this.value><![CDATA[#{javascript:
        var thisDb = sessionAsSigner.getDatabase(database.getServer(), database.getFilePath());
        var aView = thisDb.getView("protectedView");
        return staffView.getAllEntries(); // return collection of docs
    }]]></xp:this.value>
        <xp:text>
            <xp:this.value><![CDATA[#{javascript:rowEntry.getColumnValues().elementAt(1)}]]></xp:this.value>
        </xp:text>
        <xp:br />
        <xp:text>
            <xp:this.value><![CDATA[#{javascript:rowEntry.getColumnValues().elementAt(2)}]]></xp:this.value>
        </xp:text>
        <xp:br />
        <xp:inputRichText id="inputRichText1" readonly="true">
            <xp:this.value><![CDATA[#{javascript:
                // wrap NotesDocument into NotesXspDocumenet to easily display picture
                wrapDocument(rowEntry.getDocument()).getValue("Picture");}]]></xp:this.value>
        </xp:inputRichText>
</xp:repeat> 
```

我使用[wrapDocument XSnippet](http://openntf.org/XSnippets.nsf/snippet.xsp?id=wrap-notesdocument-into-notesxspdocument)将 NotesDocument 转换为 NotesXspDocument。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T09:06:06.493

本质上这是不可能的。

您可以使用 sessionAsSigner 构造 URL，但是当用户尝试访问文档/图像时，他们将获得未经授权的异常。

显示数据视图的唯一方法是使用 sessionAsSigner 将视图的内容读入范围变量（或 bean），然后显示一个重复控件，该控件引用范围变量中的数据，而不是直接引用视图。

更大的问题是你为什么要这样做。如果 Anonymous 无法访问相关数据库，那么这是有充分理由的。另一种选择是考虑在要授予匿名访问权限的文档/视图上使用 $PublicAccess 标志。然后在 ACL 上，只要 Anonymous 可以读取公共数据，那么他们仍然无法访问数据库。

马特

# facebook - 脸书评论 ID

> ID：16078550
> 
> 赞同：1
> 
> 时间：2013-04-18T08:56:50.597
> 
> 标签：facebook, facebook-graph-api

我正在尝试将 facebook 评论与 wordpress 评论同步。

而且我想知道为什么 Facebook 评论 ID 对于状态和对象（同一个墙帖）不同。我通过 FQL 获取评论，当通过帖子 ID 查询时，评论 ID 的格式为“279659443812183_454543377958451_3088653”（fanpageid_postid_commentid）。但是当通过对象 ID 查询时，我得到了这种格式的评论 ID“454543377958452_3088653”（objectid_commentid）。

而且完全奇怪。通过app发表评论时，无论是“post id”还是“object id”，返回的comment id格式始终相同。当我想比较评论 ID 时，这很糟糕。

这在任何地方都有记录吗？找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:23:40.850

这很奇怪——Facebook 似乎刚刚开始改变他们评论的格式。这可能与评论线程有关。对此有一些注意，ID 的一致性会有所帮助。

因此，系统的某些区域似乎会返回旧版本：

`PAGEID_POSTID_COMMENTID`

而某些地区将返回新版本是：

`POSTID_COMMENTID`

我自己只是在深入研究这个——我原以为FB会对ids做出更大的改变。也许将其放在重大更改路线图页面上将是一个开始……

# c# - Launch ExceptionValidationRule from specific context

> ID：16078562
> 
> 赞同：0
> 
> 时间：2013-04-18T08:57:31.283
> 
> 标签：c#, wpf, validation, xaml, exception

**I have a class Client :**

```
public class Client : INotifyPropertyChanged
{

    private string m_strCode;
    public string strCode
    {
        get { return m_strCode; }
        set
        {

            if (CodeIsValide(strCode))
            {                  
                m_strCode = value;
                FirePropertyChangedEvent("strCode");

            }
            else
            {
                throw new ApplicationException("bad Data !");
            }

            FirePropertyChangedEvent("strCode");

        }
    }

    private string m_strName;
    public string strName
    {
        get { return m_strName; }
        set
        {

            if (NameIsValide(strName))
            {
                m_strName = value;
                FirePropertyChangedEvent("strName");

            }
            else
            {
                throw new ApplicationException("Bad Data! ");
            }

            FirePropertyChangedEvent("strName");

        }
    }

    public Client(string Code, string Name)
    {
        strCode = Code;
        strName = Name;
    }

    public Client()
    {

    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void FirePropertyChangedEvent(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

On my WPF Window, i have two textbox : on for client.strCode, and the other for client.strNom.

**Here is the XAML :**

```
<TextBox x:Name="TextBox_Code"
         HorizontalAlignment="Left"
         Height="25"
         Margin="106,230,0,0"
         TextWrapping="Wrap"
         VerticalAlignment="Top"
         Width="78">
  <TextBox.Text>
    <Binding Path="strCode"
             UpdateSourceTrigger="PropertyChanged">
      <Binding.ValidationRules>
        <ExceptionValidationRule />
      </Binding.ValidationRules>
    </Binding>
  </TextBox.Text>
</TextBox>

<TextBox x:Name="TextBox_Name"
         HorizontalAlignment="Left"
         Height="25"
         Margin="106,230,0,0"
         TextWrapping="Wrap"
         VerticalAlignment="Top"
         Width="78">
  <TextBox.Text>
    <Binding Path="strName"
             UpdateSourceTrigger="PropertyChanged">
      <Binding.ValidationRules>
        <ExceptionValidationRule />
      </Binding.ValidationRules>
    </Binding>
  </TextBox.Text>
</TextBox> 
```

The data input are verifiyng with the ValidationProcess. If the validation is false, it appear a warning label near the textbox.

My problem is : If i load bad data ( from a DataBase) to a Collection of Client object. The load use the set() of my strCode and strName, and, if the data are bad, the ExceptionValidationRule cannot be throwing ( I think it's because the ExceptionValidationRule is not invoked from the textbox binded). ( I'm not English, it's not esay to explain sorry).

I think i need to specify when i want to invoke the verifiy process.

Anyone have advices please ?

If anyone want, i create a sample VS project in order to share my problem.

**EDIT :** If i use a Custom Validator class, it OK !

Just a question, in order to force the validation test, i need to do this, when i select the line in my DataGrid :

```
 private void myDataGrid_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
    {
        // Affiche le code évt sélectionné dans le tableau, dans les champs modifiable ( en haut de l'écran )

        var item = myDataGrid.SelectedItem as Client;
        if ((item != null))
        {
            TextBox_Code.Text = item.strCode;
            TextBox_Name.Text = item.strName;
        }
    } 
```

:

```
TextBox_Code.Text = item.strCode;
TextBox_Name.Text = item.strName; 
```

If i remove this two line, the textbox are corectly initialized because of the binding, but the validation process is not invoked. Why ? Is there a way to force the the validation process and use the full binding whitout :

```
TextBox_Code.Text = item.strCode;
TextBox_Name.Text = item.strName; 
```

Thanks :)

Thanks a lot :)

Best regards,

Nixeus :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:45:28.930

好吧，如果我正确理解您的要求，

如果属性是从 xaml 视图之外的任何内容设置的，您不希望引发异常。

我首选的解决方案是根本不使用，而是`ExceptionValidationRule`更喜欢 Custom `ValidationRule`。这将解决您的问题。[示例](http://developingfor.net/2009/10/13/using-custom-validation-rules-in-wpf/)展示了如何创建和使用这样的功能。

自定义验证规则示例：

```
public class CodeRangeRule : ValidationRule {
  public override ValidationResult Validate(object value, CultureInfo cultureInfo) {
    int strCode = -1;
    if (value != null && !Int32.TryParse(value.ToString(), out strCode))
      return new ValidationResult(false, "Illegal strCode");
    if (strCode < 9999 && strCode > 0) // Modify to suit your Validity Conditions
      return new ValidationResult(true, null);
    return new ValidationResult(false, "strCode is not within acceptable code range");
  }
} 
```

和你的xml：

```
<TextBox x:Name="TextBox_Code" HorizontalAlignment="Left" Height="25" Margin="106,230,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="78">
    <TextBox.Text>
        <Binding Path="strCode"  UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:CodeRangeRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

**或者**

如果您出于某种原因不想使用自定义`ValidationRule`，您可以`ExceptionValidationRule`在视图中保持原样，并在从数据库加载调用 setter 或在您的

```
public class Client : INotifyPropertyChanged 
```

添加另一个属性（例如带有 values 的枚举`kDatabaseLoad`）`kView`以指示对象是否由视图/数据库处理。因此，在你的设置器中`strCode`检查`strName`这个枚举是否`kView`在抛出你的异常之前。

现在，当您执行数据库加载并创建对象时，在设置和之前`Client`将其分配给枚举。确保将枚举切换回加载完成后。`kDatabaseLoad``strName``strCode``kView`

# delphi - 使用 IXMLDocument 在 NTDLL 中的访问冲突

> ID：16078566
> 
> 赞同：0
> 
> 时间：2013-04-18T08:57:40.143
> 
> 标签：delphi, txmldocument

我在读取地址 0xfeeefeee 时不断遇到访问冲突，其中调试器在 Ntdll.NtRaiseException 上停止，我无法进一步调试，因为我得到一个循环条件告诉我应用程序在...处出现故障...使用步骤或运行...这让我回到了起点。这显然只发生在 IDE (Delphi XE2) 32 位中。我的应用程序正在使用以下代码

```
Var
  XMLDoc: IXMLDocument;

Begin

  If FOD.Execute Then //File Open Dialog

  Begin
    Try

      Try

        XMLdoc := NewXMLDocument(); //TXMLDocument.Create(Nil);

        Result := FOD.FileName;

        XMLDoc.FileName := XMLFilename;

        XMLDoc.Active := True; 
```

当文件打开时，我调用从 xml 数据绑定向导 (File New Other XML) 加载的函数来解析在上面的 proc 中打开的 xml 文件。我的意图只是创建一个 csv 文件，然后使用 sqlldr 将数据导出到 oracle 数据库。在 IDE 之外找到所有工作，我可以让应用程序运行，只是在一夜之间在 sring 网格中显示数据，但在 ide 中它会在几分钟内崩溃。调用堆栈没有显示任何有用的信息。如您所见，我尝试过 TXMDocument.create 和 NewXML，但无济于事。我尝试将对象放在表单上并使用该实例无济于事。任何人请有任何想法。（Windows 7 64 位，但由于 oracle 依赖，我正在编译为 32 位）

编辑，即使打开了调试 dcus，调用堆栈也显示没有任何用处，只是对 ole32.dll 和其他与 nt 相关的 dll 的引用

该应用程序的代码如下所示（其中一些）

```
Function TXMLForm.OpenFile: String;
Var
  XMLDoc: IXMLDocument;
Begin
  If FOD.Execute Then
  Begin
    Try
      Try
        XMLdoc := NewXMLDocument(); //TXMLDocument.Create(Nil);
        Result := FOD.FileName;
        XMLDoc.FileName := XMLFilename;
        XMLDoc.Active := True;
        SB1.Panels[1].Text := FOD.Filename;
      Finally
        // xmldoc := nil;
      End;
    Except
      On E: Exception Do
        ShowMessage('Excpetion in Opening or creating XML Document. ' + E.Message);
    End;
  End
  Else
    Result := '';
End; 
```

openfile 由这种类型的过程调用

```
Procedure TXMLForm.StandardProfile1Click(Sender: TObject);
Var
  Stand: Standard.IXMLProfileData;
  I, X: Integer;
Begin
  XMLFileName := Openfile;
  If Xmlfilename <> '' Then
  Begin
    Stand := Standard.LoadProfileData(XMLFileName);
    SG1.RowCount := Stand.Count;
    Sg1.ColCount := Stand.Device[Stand.Count - 1].Count + 7;
    // SG1.ColCount := 55;
    SG1.Cells[0, 0] := 'SERIALNO';
    SG1.Cells[1, 0] := 'MFGSERIALNO';
    SG1.Cells[2, 0] := 'SUPPLYTYPE';
    SG1.Cells[3, 0] := 'SERVICEPOINTNO';
    SG1.Cells[4, 0] := 'PARAMETERCODE';
    SG1.Cells[5, 0] := 'INTERVALPERIOD';
    SG1.Cells[6, 0] := 'STARTTIME';
    // For X := 0 To 47 Do
    // SG1.Cells[7 + X, 0] := 'INTERVAL' + Inttostr(X);
    For X := 0 To Stand.Device[Stand.Count - 1].Count - 1 Do
      SG1.Cells[7 + X, 0] := 'INTERVAL' + Inttostr(X);

    For I := 0 To Stand.Count - 1 Do
    Begin
      SG1.Cells[0, I + 1] := Stand.Device[I].SerialNo;
      SG1.Cells[1, I + 1] := Stand.Device[I].MfgSerialNo;
      SG1.Cells[2, I + 1] := Stand.Device[I].SupplyType;
      SG1.Cells[3, I + 1] := Stand.Device[I].ServicePointNo;
      SG1.Cells[4, I + 1] := Stand.Device[I].ParameterCode;
      SG1.Cells[5, I + 1] := Stand.Device[I].IntervalPeriod;
      SG1.Cells[6, I + 1] := Stand.Device[I].StartTime;
      // For X := 0 To 47 Do
      For X := 0 To Stand.Device[Stand.Count - 1].Count - 1 Do // 47
       Begin
        If Stand.Device[I].Interval[X] = '' Then
          SG1.Cells[7 + X, I + 1] := 'TRUE'
        Else
          SG1.Cells[7 + X, I + 1] := Stand.Device[I].Interval[X];
      End;
    End;
  End;
End; 
```

如前所述，我尝试使用 TXMDocument、IXMLDocument 并使用 Create 和 NewXMDocument，但这仍然会出现错误。DEbug dcus' 没有任何区别。我已经厌倦了在项目标题和 MadExcept 中使用 FastMM4，但他们没有发现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:04:41.253

您没有展示处理 XMLDoc 的所有代码；也许你正在释放它？

“当创建没有所有者的 TXMLDocument 时，它的行为类似于接口对象。也就是说，当释放对其接口的所有引用时，TXMLDocument 实例会自动释放。但是，当使用所有者创建 TXMLDocument 时，它的行为就像任何其他组件，并由其所有者释放。” 请参阅[Delphi - 在运行时创建的 TXMLDocument 生成 AV，表单上的组件正在工作](https://stackoverflow.com/questions/8398703/delphi-txmldocument-created-at-run-time-generates-av-with-component-on-the-fo)

完成后，设置 XMLDoc := nil;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:09:20.797

感谢 Remy，问题解决了。这确实是没有调用 CoInitialize 的情况。我完全忘记了这件事。

# c# - FaultExceptions 在 .NET 4 中的处理方式与在 .NET 4.5 中的处理方式不同吗？

> ID：16078576
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:10.637
> 
> 标签：c#, wcf, .net-4.0, .net-4.5, faultexception

根据 .NET 框架的版本，在处理 WCF 服务抛出的 FaultExceptions 时，我们的客户端会遇到不同的行为。

该服务定义了一个自定义故障：

```
[DataContract]
public class MyFault
{
    [DataMember]
    public int MyId { get; set; }
} 
```

服务接口：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    [FaultContract(typeof(MyFault))]
    MyResponse DoSomething(MyRequest request);
} 
```

客户端处理异常：

```
try 
{
    client.DoSomething(myrequest);
} 
catch (FaultException<MyFault> ex) 
{
    ...
} 
```

在**.NET 4.5 机器上**，他将识别故障`FaultException<MyFault>`并按预期进行处理。

但是，在**.NET 4 机器**上，他会将故障视为`FaultException`（非通用），因此永远无法达到问题。

我们捕获了机器上的流量，以查看通信是否存在差异。请求和响应都是相同的。我们甚至将 .NET 4 机器更新为 .NET 4.5（没有更新任何其他软件或我们的客户端软件）并且行为发生了变化。

有什么合乎逻辑的解释吗？

# c# - 无法在带参数的sql表中写入

> ID：16078577
> 
> 赞同：1
> 
> 时间：2013-04-18T08:58:14.670
> 
> 标签：c#, sql, sql-server

我想使用以下代码在 sql 表中写入数据，然后出现错误。

当我查看我的 Visual Studio 时，我可以看到 @p1 中有数据，等等......

```
SqlCommand send = new SqlCommand("INSERT INTO test(code,type,datum,uur,controller,fout,teller,omschrijving,graad,var1,var2,var3,var4,var5,var6,var7,var8,var9,var10,var11,var12,var13,var14,var15,var16,var17,var18,var19,var20,var21,var22,var23,var24,var25,var26,var27,var28,var29,var30,var31,var32,var33,var34,var35,var36,var37,var38,var39,var40)" + "values (@p1,@p2,@p3,@p4,@p5,@p6,@p7,@p8,@p9,@p10,@p11,@p12,@p13,@p14,@p15,@p16,@p17,@p18,@p19,@p20,@p21,@p22,@p23,@p24,@p25,@p26,@p27,@p28,@p29,@p30,@p31,@p32,@p33,@p34,@p35,@p36,@p37,@p38,@p39,@p40,@p41,@p42,@p43,@p44,@p45,@p46,@p47,@p48,@p49)", connection);
       while (foutinformatie[0, lusteller] != null)          //zolang uitvoeren als er data is
        {

            //rij per rij in tabel plaatsensd
            key = foutinformatie[0, lusteller] + "/" + foutinformatie[1, lusteller] + "/" + foutinformatie[2, lusteller] + "/" + foutinformatie[3, lusteller] + "/" + foutinformatie[4, lusteller];
            send.Parameters.Clear();
            SqlParameter myParam1 = new SqlParameter("@p1", SqlDbType.Text);
            myParam1.Value = key;
            SqlParameter myParam2 = new SqlParameter("@p2", SqlDbType.Text);
            myParam2.Value = foutinformatie[0, lusteller];
            SqlParameter myParam3 = new SqlParameter("@p3", SqlDbType.Text);
            myParam3.Value = foutinformatie[1, lusteller];
            SqlParameter myParam4 = new SqlParameter("@p4", SqlDbType.Text);
            myParam4.Value = foutinformatie[2, lusteller];
            SqlParameter myParam5 = new SqlParameter("@p5", SqlDbType.Text);
            myParam5.Value = foutinformatie[3, lusteller];
            SqlParameter myParam6 = new SqlParameter("@p6", SqlDbType.Text);
            myParam6.Value = foutinformatie[4, lusteller];
            SqlParameter myParam7 = new SqlParameter("@p7", SqlDbType.Text);
            myParam7.Value = foutinformatie[5, lusteller];
            SqlParameter myParam8 = new SqlParameter("@p8", SqlDbType.Text);
            myParam8.Value = foutinformatie[6, lusteller];
            SqlParameter myParam9 = new SqlParameter("@p9", SqlDbType.Text);
            myParam9.Value = foutinformatie[7, lusteller];
            SqlParameter myParam10 = new SqlParameter("@p10", SqlDbType.Text);
            myParam10.Value = foutinformatie[8, lusteller];
            SqlParameter myParam11 = new SqlParameter("@p11", SqlDbType.Text);
            myParam11.Value = foutinformatie[9, lusteller];
            SqlParameter myParam12 = new SqlParameter("@p12", SqlDbType.Text);
            myParam12.Value = foutinformatie[10, lusteller];
            SqlParameter myParam13 = new SqlParameter("@p13", SqlDbType.Text);
            myParam13.Value = foutinformatie[11, lusteller];
            SqlParameter myParam14 = new SqlParameter("@p14", SqlDbType.Text);
            myParam14.Value = foutinformatie[12, lusteller];
            SqlParameter myParam15 = new SqlParameter("@p15", SqlDbType.Text);
            myParam15.Value = foutinformatie[13, lusteller];
            SqlParameter myParam16 = new SqlParameter("@p16", SqlDbType.Text);
            myParam16.Value = foutinformatie[14, lusteller];
            SqlParameter myParam17 = new SqlParameter("@p17", SqlDbType.Text);
            myParam17.Value = foutinformatie[15, lusteller];
            SqlParameter myParam18 = new SqlParameter("@p18", SqlDbType.Text);
            myParam18.Value = foutinformatie[16, lusteller];
            SqlParameter myParam19 = new SqlParameter("@p19", SqlDbType.Text);
            myParam19.Value = foutinformatie[17, lusteller];
            SqlParameter myParam20 = new SqlParameter("@p20", SqlDbType.Text);
            myParam20.Value = foutinformatie[18, lusteller];
            SqlParameter myParam21 = new SqlParameter("@p21", SqlDbType.Text);
            myParam21.Value = foutinformatie[19, lusteller];
            SqlParameter myParam22 = new SqlParameter("@p22", SqlDbType.Text);
            myParam22.Value = foutinformatie[20, lusteller];
            SqlParameter myParam23 = new SqlParameter("@p23", SqlDbType.Text);
            myParam23.Value = foutinformatie[21, lusteller];
            SqlParameter myParam24 = new SqlParameter("@p24", SqlDbType.Text);
            myParam24.Value = foutinformatie[22, lusteller];
            SqlParameter myParam25 = new SqlParameter("@p25", SqlDbType.Text);
            myParam25.Value = foutinformatie[23, lusteller];
            SqlParameter myParam26 = new SqlParameter("@p26", SqlDbType.Text);
            myParam26.Value = foutinformatie[24, lusteller];
            SqlParameter myParam27 = new SqlParameter("@p27", SqlDbType.Text);
            myParam27.Value = foutinformatie[25, lusteller];
            SqlParameter myParam28 = new SqlParameter("@p28", SqlDbType.Text);
            myParam28.Value = foutinformatie[26, lusteller];
            SqlParameter myParam29 = new SqlParameter("@p29", SqlDbType.Text);
            myParam29.Value = foutinformatie[27, lusteller];
            SqlParameter myParam30 = new SqlParameter("@p30", SqlDbType.Text);
            myParam30.Value = foutinformatie[28, lusteller];
            SqlParameter myParam31 = new SqlParameter("@p31", SqlDbType.Text);
            myParam31.Value = foutinformatie[29, lusteller];
            SqlParameter myParam32 = new SqlParameter("@p32", SqlDbType.Text);
            myParam32.Value = foutinformatie[30, lusteller];
            SqlParameter myParam33 = new SqlParameter("@p33", SqlDbType.Text);
            myParam33.Value = foutinformatie[31, lusteller];
            SqlParameter myParam34 = new SqlParameter("@p34", SqlDbType.Text);
            myParam34.Value = foutinformatie[32, lusteller];
            SqlParameter myParam35 = new SqlParameter("@p35", SqlDbType.Text);
            myParam35.Value = foutinformatie[33, lusteller];
            SqlParameter myParam36 = new SqlParameter("@p36", SqlDbType.Text);
            myParam36.Value = foutinformatie[34, lusteller];
            SqlParameter myParam37 = new SqlParameter("@p37", SqlDbType.Text);
            myParam37.Value = foutinformatie[35, lusteller];
            SqlParameter myParam38 = new SqlParameter("@p38", SqlDbType.Text);
            myParam38.Value = foutinformatie[36, lusteller];
            SqlParameter myParam39 = new SqlParameter("@p39", SqlDbType.Text);
            myParam39.Value = foutinformatie[37, lusteller];
            SqlParameter myParam40 = new SqlParameter("@p40", SqlDbType.Text);
            myParam40.Value = foutinformatie[38, lusteller];
            SqlParameter myParam41 = new SqlParameter("@p41", SqlDbType.Text);
            myParam41.Value = foutinformatie[39, lusteller];
            SqlParameter myParam42 = new SqlParameter("@p42", SqlDbType.Text);
            myParam42.Value = foutinformatie[40, lusteller];
            SqlParameter myParam43 = new SqlParameter("@p43", SqlDbType.Text);
            myParam43.Value = foutinformatie[41, lusteller];
            SqlParameter myParam44 = new SqlParameter("@p44", SqlDbType.Text);
            myParam44.Value = foutinformatie[42, lusteller];
            SqlParameter myParam45 = new SqlParameter("@p45", SqlDbType.Text);
            myParam45.Value = foutinformatie[43, lusteller];
            SqlParameter myParam46 = new SqlParameter("@p46", SqlDbType.Text);
            myParam46.Value = foutinformatie[44, lusteller];
            SqlParameter myParam47 = new SqlParameter("@p47", SqlDbType.Text);
            myParam47.Value = foutinformatie[45, lusteller];
            SqlParameter myParam48 = new SqlParameter("@p48", SqlDbType.Text);
            myParam48.Value = foutinformatie[46, lusteller];
            SqlParameter myParam49 = new SqlParameter("@p49", SqlDbType.Text);
            myParam49.Value = foutinformatie[47, lusteller];

            send.Parameters.Add(myParam1);
            send.Parameters.Add(myParam2);
            send.Parameters.Add(myParam3);
            send.Parameters.Add(myParam4);
            send.Parameters.Add(myParam5);
            send.Parameters.Add(myParam6);
            send.Parameters.Add(myParam7);
            send.Parameters.Add(myParam8);
            send.Parameters.Add(myParam9);
            send.Parameters.Add(myParam10);
            send.Parameters.Add(myParam11);
            send.Parameters.Add(myParam12);
            send.Parameters.Add(myParam13);
            send.Parameters.Add(myParam14);
            send.Parameters.Add(myParam15);
            send.Parameters.Add(myParam16);
            send.Parameters.Add(myParam17);
            send.Parameters.Add(myParam18);
            send.Parameters.Add(myParam19);
            send.Parameters.Add(myParam20);
            send.Parameters.Add(myParam21);
            send.Parameters.Add(myParam22);
            send.Parameters.Add(myParam23);
            send.Parameters.Add(myParam24);
            send.Parameters.Add(myParam25);
            send.Parameters.Add(myParam26);
            send.Parameters.Add(myParam27);
            send.Parameters.Add(myParam28);
            send.Parameters.Add(myParam29);
            send.Parameters.Add(myParam30);
            send.Parameters.Add(myParam31);
            send.Parameters.Add(myParam32);
            send.Parameters.Add(myParam33);
            send.Parameters.Add(myParam34);
            send.Parameters.Add(myParam35);
            send.Parameters.Add(myParam36);
            send.Parameters.Add(myParam37);
            send.Parameters.Add(myParam38);
            send.Parameters.Add(myParam39);
            send.Parameters.Add(myParam40);
            send.Parameters.Add(myParam41);
            send.Parameters.Add(myParam42);
            send.Parameters.Add(myParam43);
            send.Parameters.Add(myParam44);
            send.Parameters.Add(myParam45);
            send.Parameters.Add(myParam46);
            send.Parameters.Add(myParam47);
            send.Parameters.Add(myParam48);
            send.Parameters.Add(myParam49);
            try
            {
                int pos = Array.IndexOf(keys, key);
                if (pos == -1)
                {
                    connection.Open();
                    send.ExecuteNonQuery();
                 connection.Close();
                }
                else
                {

                }

            }
            catch
            {
                connection.Close();
               // MessageBox.Show("Can not open connection ! ");
            }

            lusteller = lusteller + 1;
        }
    } 
```

错误：

> 参数化查询“（@p1 文本、@p2 文本、@p3 文本、@p4 文本、@p5 文本、@p6 文本、@p7 文本”需要未提供的参数“@p9”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:35:58.720

您的数据库中是否有可为空的列？这可能是问题所在。如果值为 null，则必须显式传递 DBNull.Value。如果不这样做，则参数可能无法正确识别并报告为丢失。您可以按以下方式完成作业：

```
myParamX.Value = foutinformatie[0, lusteller] ?? DBNull.Value; 
```

我还强烈建议您以更有效的方式创建参数。首先，在执行命令之前为命令 ONCE 创建所有参数并调用`send.Prepare()`. 比在循环中为每一行设置值并执行命令。这样效率更高。

```
connection.Open();

SqlCommand send = new SqlCommand(
    "INSERT INTO test(code,type,datum,uur,controller,fout,teller,omschrijving,graad,var1,var2,var3,var4,var5,var6,var7,var8,var9,var10,var11,var12,var13,var14,var15,var16,var17,var18,var19,var20,var21,var22,var23,var24,var25,var26,var27,var28,var29,var30,var31,var32,var33,var34,var35,var36,var37,var38,var39,var40)" + 
    "values (@p1,@p2,@p3,@p4,@p5,@p6,@p7,@p8,@p9,@p10,@p11,@p12,@p13,@p14,@p15,@p16,@p17,@p18,@p19,@p20,@p21,@p22,@p23,@p24,@p25,@p26,@p27,@p28,@p29,@p30,@p31,@p32,@p33,@p34,@p35,@p36,@p37,@p38,@p39,@p40,@p41,@p42,@p43,@p44,@p45,@p46,@p47,@p48,@p49)", 
    connection);

for (int i = 1; i <= 49; i++)
{
    send.Parameters.Add("@p" + i, SqlDbType.Text);
}

// prepare command (see documentation)
send.Prepare();

//zolang uitvoeren als er data is
while (foutinformatie[0, lusteller] != null)          
{
    //rij per rij in tabel plaatsensd
    key = foutinformatie[0, lusteller] + "/" +
        foutinformatie[1, lusteller] + "/" +
        foutinformatie[2, lusteller] + "/" +
        foutinformatie[3, lusteller] + "/" + 
        foutinformatie[4, lusteller];

    send.Parameters[0].Value = key;

    // assign values in a loop with regarding DBNull
    for (int i = 1; i < 49; i++)
    {
        send.Parameters[i].Value = foutinformatie[i-1, lusteller] ?? DBNull.Value;
    }

    send.ExecuteNonQuery();

    lusteller = lusteller + 1;
} 
```

我没有运行这段代码，可能还有一些索引偏移问题。它应该只演示如何更优雅地解决这个问题。

# java - 比较方法违反其一般合同异常

> ID：16078578
> 
> 赞同：3
> 
> 时间：2013-04-18T08:58:15.837
> 
> 标签：java, collections, comparator

下面是导致异常的代码块，

代码 ：

```
Collections.sort( arrayList, new Comparator() 
{
    public int compare( Object o1, Object o2 )
    {
        TypeAdapterSort tas1 = ( TypeAdapterSort ) o1;
        TypeAdapterSort tas2 = ( TypeAdapterSort ) o2;
        if ( tas1.order < tas2.order )
            return -1;
        else
            return 1;
    }
} ); 
```

例外 ：

```
java.lang.IllegalArgumentException: Comparison method violates its general contract!
                at java.util.TimSort.mergeLo(TimSort.java:747)
                at java.util.TimSort.mergeAt(TimSort.java:483)
                at java.util.TimSort.mergeForceCollapse(TimSort.java:426)
                at java.util.TimSort.sort(TimSort.java:223)
                at java.util.TimSort.sort(TimSort.java:173)
                at java.util.Arrays.sort(Arrays.java:659)
                at java.util.Collections.sort(Collections.java:217) 
```

当我运行与独立程序相同的代码时，问题永远不会发生。这里的比较器有什么问题？有没有办法在独立代码中重现问题？

此问题仅在 Java 1.7 上出现，因为 Arrays.sort 和 Collections.sort 的实现发生了变化。如何更改上述代码以避免该问题？另外，如何在独立代码中重现此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:59:25.767

您需要在相等的对象上返回 0。

```
 if ( tas1.order < tas2.order ){
            return -1;
        } else if ( tas1.order == tas2.order ){
            return 0;
        } else {
            return 1;
        } 
```

你可以[在这里](https://stackoverflow.com/a/8327575/1651233)阅读更多

# sql - CASE WHEN ELSE 何时改为 union？

> ID：16078579
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:16.867
> 
> 标签：sql, sql-server-2012, case-expression

我想知道是否可以将 a 更改`CASE when then else`为 a`union all`或类似的东西。

我希望这是可能的......

例子

```
CASE WHEN(C.Salutation = 'Dhr.' OR C.salutation = 'dhr.')
         THEN 'Meneer'+' '+ISNULL(C.middlename+' ','')+C.Lastname
    WHEN(C.Salutation = 'Mw.' OR C.salutation = 'mw.')
         THEN 'Mevrouw'+' '+ISNULL(C.middlename+' ','')+C.Lastname
    ELSE 'Meneer/Mevrouw '+ISNULL(C.middlename+' ','')+ISNULL(C.Lastname,'') END AS 'K5' 
```

我希望你们能帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:20:21.113

嗯，是的，你可以，但它很难看：

```
SELECT 'Meneer'+' '+ISNULL(C1.middlename+' ','')+C1.Lastname AS 'K5'
FROM table C1
WHERE C1.Salutation = 'Dhr.' OR C1.salutation = 'dhr.'
UNION
SELECT 'Mevrouw'+' '+ISNULL(C2.middlename+' ','')+C2.Lastname
FROM table C2
WHERE C2.Salutation = 'Mw.' OR C2.salutation = 'mw.'
UNION
SELECT 'Meneer/Mevrouw '+ISNULL(C.middlename+' ','')+ISNULL(C.Lastname,'')
FROM table C3
WHERE C3.Salutation != 'Mw.' AND C3.salutation != 'mw.'
AND C3.Salutation != 'Dhr.' AND C3.salutation != 'dhr.' 
```

# android - Layout: background picture stretched

> ID：16078581
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:24.303
> 
> 标签：android, android-layout, android-widget

I have difficulties with my layout.

As my first dev project, I'm trying to make a simple chronometer. I want to have a picture of a chronometer in the background and the start and stop button at the bottom of the application, side by side and filling the width of the screen.

Here is my best shot, but I'm not satisfied.

All widgets are placed properly but ... My background is streched and my buttons seem vertically compressed, even the text at the bottom is a bit cropped.

I found that if I change these lines

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

by

```
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

The background is ok, the buttons too .. but all widgets are placed in the center of the Activity.

How can I fix this ?

By the way if I want to have my buttons side by side, did I choose the better solution ?

Thanks for your help ! Charles.

... and now my xml ....

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/background"
tools:context=".Chronosv1" >

<LinearLayout
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:layout_weight="2" >

<Chronometer
    android:id="@+id/chronometer1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" />

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_weight="1" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="50"
        android:text="START" />

     <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="50"
        android:text="STOP" />
</LinearLayout> 
```

I tried relativeLayout. I don't know how to have two buttons of the same size without using a padding, I don't think it's a good idea if you want your app to run on different screens.

Anyway I come up with this, but I still have my streched image and my buttons don't have the same size.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
tools:context=".Chronosv1" >

<Chronometer
    android:id="@+id/chronometer1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Start" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@id/button1"
    android:text="Stop" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:25:17.090

你能试试这个吗？应该工作海事组织。这是获取布局的更好/防万一的方法。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
tools:context=".Chronosv1" >

<LinearLayout
android:id="@+id/layout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:weightSum="2"
android:layout_alignParentBottom="true">
<Button
android:id="@+id/button1"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:layout_weight="1"
android:layout_margin="5dp"
android:text="Start" />

<Button
android:id="@+id/button2"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:layout_weight="1"
android:layout_margin="5dp"
android:text="Stop" />
</LinearLayout>
<Chronometer
android:id="@+id/chronometer1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_above="@+id/layout1" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:43:24.507

试试RelativeLayout ;) 我认为这比LinearLayout 更容易处理。也许你可以上传一张图片，我会给你一个相对布局的解决方案；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T08:49:47.743

我终于找到了解决方案。

第一个问题：我的 9 补丁图像隐藏了我的其他组件。

解决方案：在您的线性布局中添加**android:padding="0dip"** ...这里是给我答案的主题（[Android 布局被 9-patch 背景破坏](https://stackoverflow.com/questions/3904852/android-layout-broken-with-9-patch-background)）

第二个问题：为什么我的图片被拉伸了，而我却按照屏幕的确切尺寸设计了它。这是一个愚蠢的问题......这是因为上面的操作栏和另一个栏（电池电量和其他东西）。

要摆脱这些栏（包含在主题中），请在清单中使用不同版本的主题。

我选择：Theme.Light.NoTitleBar.Fullscreen。

问题解决了。

# java - 精度损失-->需要双精度但编译器需要int？

> ID：16078584
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:31.537
> 
> 标签：java

我是java初学者，遇到了这个错误。

编写一个名为 pay 的方法，它接受一个实数作为助教的薪水和一个整数作为助教本周工作的小时数，并返回支付助教的金额。例如，调用 pay(5.50, 6) 应该返回 33.0。

对于超过 8 小时的任何时间，TA 应获得 1 ½ 正常工资的“加班”工资。例如，通话工资 (4.00, 11) 应返回 (4.00 * 8) + (6.00 * 3) 或 50.0。

```
public double pay(double x,int y){
    int sum=0;
    double hours=8.0;
    if(y>hours){
       sum=(y-hours)*(1.5*x) + (hours*x);

    }
   return sum;
} 
```

错误：

```
您的数据类型不匹配。当您尝试将实数 (double) 存储到整数 (int) 的变量或参数中时，通常会发生这种情况。
可能的精度损失
发现：双
必需：整数
       总和=（y-小时）*（1.5*x）+（小时*x）；
                             ^
1 个错误
19 个警告

```

但是错误指向+号。它有什么问题？它说找到：双。但我希望我的输出翻倍。但它说根据需要int。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T08:59:51.537

由于`sum`is an`int`并且您正在返回`sum`您的方法，这就是您收到错误的原因。

```
public double pay(double x,int y){
    double sum=0;
    double hours=8.0;
    if(y>hours){
       sum=(y-hours)*(1.5*x) + (hours*x);

    }
   return sum;
} 
```

对于第二个错误，如果你看一下类[Math](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)， `pi()`不存在，你必须调用类 Math 的静态变量，所以它应该是：

```
public double area(double x){
    x=Math.PI*Math.pow(x,2);
    return x;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:07:31.200

数据类型 `sum`为 int，而您的方法期望返回数据类型为 double。

# javascript - 如何将 json 文件放入 javascript 中的文本变量中

> ID：16078588
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:42.313
> 
> 标签：javascript, json, parsing, variables

我是使用json文件的新手，我想将文件放入javascript中的文本变量中以运行不在对象中的函数......
我一直在尝试这样的事情......但没有......

```
var jqxhr = $.getJSON( "json/test.json", function() {
                  console.log( "success" );
                })

alert (getDepth(jqxhr)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:01:18.853

您要做的是在成功回调中检索 JSON 文件的内容 -

```
var jqxhr = $.getJSON( "json/test.json", function(jsonData) { 
  console.log( jsonData );
}) 
```

请注意，结果变量 ( `jsonData`) 实际上不包含文本 - 它包含一个 JavaScript 对象。

# javascript - Why do these objects all have the same date?

> ID：16078592
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:57.967
> 
> 标签：javascript

I don't seem to understand why all the foo.dates are the same value. I was expecting it to increase by one day for each iteration.

If anyone could explain why and a possible solution that would be nice :)

Thank you.

```
Date.prototype.nextDay=function()
{
    this.setDate(this.getDate()+1);
    return this;
}

aDate = new Date(0);

function foo()
{
    this.date = aDate.nextDay();
}

ary = new Array();
for (i=1;i<5;i++){    
    ary.push(new foo());
}

console.log(JSON.stringify(ary, null, 4)); 
```

Foo Objects:

```
[
    {
        "date": "1970-01-05T00:00:00.000Z"
    },
    {
        "date": "1970-01-05T00:00:00.000Z"
    },
    {
        "date": "1970-01-05T00:00:00.000Z"
    },
    {
        "date": "1970-01-05T00:00:00.000Z"
    }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:05:11.243

因为 aDate 在 foo 函数中被引用，并且`this.date = aDate.nextDay()` *不克隆它*。它只是创建对同一对象的新引用。

因此，您对所有 foo 实例使用相同的日期 (adate) 实例。

您不需要更改 Date 的原型或使用 new，如果您想要自 1970 年 1 月 1 日以来的增量，那么此功能将起作用：-

```
var nextDate = (function() {
  var days = 0;
  return function() {
    var date = new Date(0);
    date.setDate(date.getDate() + ++days);
    return date;
  }
})(); 
```

下一个日期（）；//1970 年 1 月 2 日星期五 01:00:00 GMT+0100（西欧标准时间）

下一个日期（）；//1970 年 1 月 3 日星期六 01:00:00 GMT+0100（西欧标准时间）

如果您希望第一次调用 nextDate 给 Jan 1 则将 ++days 更改为 days++

# ios - How to write a Core Data predicate for objects which are related to an object in a to-many relationship

> ID：16078593
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:58.763
> 
> 标签：ios, cocoa, core-data

`EntityA` has a to-many relationship to `EntityB` (and `EntityB` has a to-one relationship to `EntityA`). I have an array of `EntityB`s (or more accurately, I have an `NSArray` that contains instances of `NSManagedObject` which represent `EntityB`). I want to create an `NSFetchRequest` that will fetch all `EntityA`s that have a relationship to at least one of the `EntityB`s in the array. How do I write the predicate for this fetch request?

The following works, but I think it is sub-optimal; it's hard to grok and I'm sure there must be a better way of expressing this:

```
NSArray *entityBs = ...;
NSMutableArray *containsEntityBSubPredicates = [NSMutableArray new];
for (NSManagedObject *entityB in entityBs) {
    [containsEntityBSubPredicates addObject:[NSPredicate predicateWithFormat:@"%@ IN entityBs", entityB]];
}
NSPredicate *containsEntityBsPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:containsEntityBSubPredicates]; 
```

I've also tried this, but it doesn't work:

```
NSArray *entityBs = ...;
NSPredicate *containsEntityBsPredicate = [NSPredicate predicateWithFormat:@"ANY %@ in entityBs", entityBs]; 
```

Am I missing a simpler solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:13:00.417

您的谓词几乎就在那里，只需切换参数：

```
[NSPredicate predicateWithFormat:@"ANY entityBs in %@", entityBArray]; 
```

`IN` [在此处](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-215891)查看 Apple 的示例代码以获得进一步的解释。

# php - mysqli_set_charset does not store arabic letters

> ID：16078594
> 
> 赞同：0
> 
> 时间：2013-04-18T08:58:58.950
> 
> 标签：php, database, mysqli

I would like to store all the entered information that are written in Arabic in the database. Throughout my searching, I found out that I have to change the collation to `utf8_general_ci` and in the code I have to put the following statement: `mysqli_set_charset($dbh,"utf8");`

I gave it try but it didn't work. It still stores the entered information like this `&#1607;&#1604;&#1575;`

Can someone help me please

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:00:54.433

> 它仍然像这样存储输入的信息`&#1607;&#1604;&#1575;`

它不是 mysqli，而是您自己的代码。
您很可能正在`htmlentities()`处理您的数据。

最好不要使用 HTML 格式在数据库中存储数据，或者至少改变它`htmlspecialchars()`

# objective-c - 如何找到和隐藏 NSView？

> ID：16078597
> 
> 赞同：0
> 
> 时间：2013-04-18T08:59:03.733
> 
> 标签：objective-c, xcode, cocoa, nsview

**view1.h**文件

```
@property(nonatomic,strong) NSView  *aboutView; 
```

在**view1.m**文件中创建了 NSView

```
aboutView = [[NSView alloc]initWithFrame:NSMakeRect(6, 6, width -12, height -29)];
[aboutView setHidden:YES];
[view addSubview:aboutView];

NSImageView *imgl=[[NSImageView alloc]initWithFrame:NSMakeRect(0, 0, width -12, height -29)];
[imgl setImageAlignment:NSImageAlignBottomLeft];
[imgl setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
[imgl setImageScaling:NSImageScaleAxesIndependently];
[imgl setImage:[NSImage imageNamed:@"yuan"]];
[aboutView addSubview:imgl]; 
```

ButtonController.m 中的**NSView**如何找到和隐藏 NSView ？

```
-(void)mouseUp:(NSEvent *)theEvent{
    NSView *aboutView = [(view1 *)self.superview.window aboutView];
    [aboutView setHidden:NO];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:18:29.230

怎么样

```
-(void)mouseUp:(NSEvent *)theEvent{
    view1 *viewObj=(view1 *)self.superview.window;
    NSView *aboutView = [viewObj aboutView];
    [aboutView setHidden:YES];
} 
```

# hibernate - HIbernate 查询参数绑定

> ID：16078598
> 
> 赞同：0
> 
> 时间：2013-04-18T08:59:08.923
> 
> 标签：hibernate

我想通过休眠执行本机 SQL 查询：

```
dbs.createSQLQuery("UPDATE USERS SET :balanceType = :newBalance WHERE UKEY = :ukey")
    .setString("balanceType", type.toString())
    .setBigDecimal("newBalance", newBalance)
    .setLong("ukey", uKey).executeUpdate(); 
```

由于 :balanceType 绑定，此操作失败。

我得到了例外：

```
org.hibernate.exception.SQLGrammarException: could not execute native bulk manipulation query
org.hibernate.exception.SQLGrammarException: could not execute native bulk manipulation query
java.sql.SQLException: ORA-01747: invalid user.table.column, table.column, or column specification

org.hibernate.exception.NestableDelegate@431d9f05
could not execute native bulk manipulation query
UPDATE USERS SET :balanceType = :newBalance WHERE UKEY = :ukey
java.sql.SQLException: ORA-01747: invalid user.table.column, table.column, or column specification 
```

如果我使用 String.format 在字符串中嵌入参数，那么它工作正常！

知道我的语法有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:02:44.470

`balanceType`不是参数，所以不能绑定，需要使用字符串连接来连接列名。

```
dbs.createSQLQuery("UPDATE USERS SET " + type.toString() + " = :newBalance WHERE UKEY = :ukey")
    .setBigDecimal("newBalance", newBalance)
    .setLong("ukey", uKey).executeUpdate(); 
```

# php - What is the difference between "&=" and "=&" when assigning a variable value in PHP?

> ID：16078599
> 
> 赞同：4
> 
> 时间：2013-04-18T08:59:10.027
> 
> 标签：php, pass-by-reference

I know that `=&` usually means "assign by reference", but what happens if we reverse these two characters, since I've seen this in plenty of PHP scripts?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T09:03:55.347

`$a &= $b``$a = $a & $b`是按位与运算符的缩写。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T09:01:35.170

它是复合[位与](http://www.php.net/manual/en/language.operators.bitwise.php)/赋值运算符：

```
$x = 0x01;
$y = 0x11;

$y &= $x; // bitwise AND $y and $x, assign result back to $y
var_dump($y == 0x01); // true 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T09:06:23.263

`&=`是一个[复合赋值运算符](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/topic/com.ibm.xlcpp8l.doc/language/ref/comasse.htm)，而`=&`实际上是两个独立的运算符（`=`和`&`），推到一起。这是合法的语法，因为 PHP 不要求它们之间有空格。

`&=`在左侧和右侧之间执行按位与运算，然后将结果分配给左侧变量。

```
$x = 1;
$x &= 0; // $x === 0 now. A more verbose syntax would be "$x = $x & 0;" 
```

另一方面 ，由于运营商是分开的，因此`=&`应该真正扩展到。`= &`这称为[引用分配](http://php.net/manual/en/language.operators.assignment.php#language.operators.assignment.reference)。the`=`是您的标准赋值运算符，并且在`&`变量名之前添加前缀的 when 将返回`reference`给变量。

```
$y = "foobar";
$x = &$y; // $x now holds a reference to $y. 
```

# entity-framework - Azure Hadoop 和实体框架

> ID：16078610
> 
> 赞同：3
> 
> 时间：2013-04-18T08:59:51.990
> 
> 标签：entity-framework, hadoop

我说的是一个需要可移植的新项目，在某些情况下将有 1 亿个实体。

现在随着 Azure 获得 hadoop，这当然引起了我对大数据场景的关注。但我也有 100 万行以下的小数据场景。

Entity Framework code-first 是我认为设计这个的方式，但是当然需要混合使用 hadoop 可能会使事情复杂化（当然，Entity Framework 被用来为较小的数据集提供更简单的存储提供程序）

现在的问题是有没有人有这种组合的经验？

任何人都可以推荐这是否是一个好方法，如果不是有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:20:53.993

在基于 Entity Framework Code First 的相当大的系统上工作，但需要注意的是，我一直在使用 EF4 并且无法升级到 5，您的里程可能会有所不同，并且结果将受到您打算做的事情的强烈影响，我的经验是 EF 不能很好地处理大量数据，它非常不灵活，所以如果你需要以某种方式改变它的标准行为，你很有可能最终不得不破解一些讨厌的东西变通方法，性能并不惊人。如果你想做的事情与 EF 不希望你做的事情完全一样，那么你可能会碰壁。

如果我正在考虑设计一个相对简单/小规模的 Asp.Net MVC 设置，我认为 EF 是一个非常好的选择。对于需要更大灵活性或计划超越基本操作的大规模操作，您可能会发现像 NHibernate 这样的东西效果更好。我没有这方面的经验，但与这两者合作过的同事往往更喜欢 NHibernate。（[关于比较的简短文章](http://ayende.com/blog/4351/nhibernate-vs-entity-framework-4-0)- 有点旧，所以 EF 已经解决了一些问题，但不是所有问题。当然，它在设计上也有所不同。）

对于更多高流量或不寻常的东西，您可能需要滚动自己的数据访问，以实现正确的性能或能够找到正确的数据。毫无疑问，如果您打算尝试使用 EF，我强烈建议您进行一些认真的原型设计，以确保它可以满足您的需求。

# jquery - Check JSON string from AJAX response with jQuery

> ID：16078613
> 
> 赞同：2
> 
> 时间：2013-04-18T08:59:53.847
> 
> 标签：jquery, ajax, json

I've using jQuery on my contact form for a web app we're building, I am getting a JSON response from the server which is:

```
{"success": true} 
```

Here's my jQuery so far:

```
$('.contact-form').on('submit', function(e) {

            // Prevent submitting
            e.preventDefault();

            // Loading from data-* attr
            var $submit = $('#contact-submit');
            $submit.html($submit.data('text'));

            // Form data
            var form      = $(this);
            var post_url  = form.attr('action');
            var post_data = form.serialize();

            // Ajax call
            $.ajax({
                type    : 'POST',
                url     : post_url,
                data    : post_data,
                dataType: 'json',
                success: function(){

                },
                error: function(){

                }
            });

        }); 
```

I've hit a wall as I've never 'checked' against a JSON response before in the 'success' jQuery method, can anyone help on this? I am looking for a method of checking the response I'm getting, and if 'true' is presented, I will then show a 'Sent success' message.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:06:04.890

成功回调将获取json对象作为第一个参数，可以在回调中使用如下图

```
$.ajax({
    type : 'POST',
    url : post_url,
    data : post_data,
    dataType : 'json',
    success : function(data) {
        if(data.success){
            //do something if success
        }

    },
    error : function() {

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:07:39.140

为什么不使用例如 HTTP 代码 200（OK）或 201（已创建）回复服务器。然后在 jQuery 中自动落入成功参数是一切正常的地方。

当服务器出现错误时，例如使用代码 422 (Unprocessable Entity)，则 jQuery ajax 将自动陷入错误。

如果这是不可能的，只需尝试使用 JSON.parse(data) 进行解析并沿着树向下走。如果解析失败，则 json 无效。

假设使用 Java 后端，您的回复将类似于此处所述：[如何为 Java RESTful Web 服务发送 HTTP 错误？](https://stackoverflow.com/questions/12353307/how-to-send-http-error-for-a-java-restful-web-service); 这实际上取决于您使用的类/框架。例如，将 HttpReponse 状态设置为 422。

您的 ajax 调用看起来像：

```
$.ajax({
    type    : 'POST',
    url     : post_url,
    data    : post_data,
    dataType: 'json',
    success: function(){
        // Everything went okay
    },
    statusCode: {
        422: function() {
            // Something went wrong (error in data serverside)
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:02:07.103

以下应该有效：

```
success: function(result) {
  var thing = $.parseJSON(result.d);
  if (thing.success) {

  }
} 
```

# vhdl - 8 bit ALU for microprocessor

> ID：16078615
> 
> 赞同：1
> 
> 时间：2013-04-18T08:59:59.160
> 
> 标签：vhdl, processor, modelsim, alu

I have a project where i am supposed to develop a RISC microprocessor . this involves creating an ALU in behavioral model . however there seems to be problems/errors/warnings while simulating the design . most of the operations work properly except following :

COMPARING THE 2 INPUTS : when numbers are equal , zero flag is not getting set . ( unequal numbers are working properly ) .

Warning: There is an 'U'|'X'|'W'|'Z'|'-' in an arithmetic operand, the result will be 'X'(es).

( this appears every 1 ps , presumably due to the wait statement in the process )

I Wish to work with std_logic_vector, even though i read that they are very messy .

also, there is a problem when i try to use comparing commands ( which update the flags but dont store the difference in the output register ) . How are if commands executed in VHDL ?? are they executed at the same time ?? or line by line ??

# CODE BELOW :

```
 LIBRARY IEEE;  
USE IEEE.STD_LOGIC_1164.ALL;  
USE IEEE.STD_LOGIC_ARITH.ALL;  
USE IEEE.STD_LOGIC_UNSIGNED.ALL; 

ENTITY ALU IS
  PORT(
      INPUT1 , INPUT2: IN STD_LOGIC_VECTOR(7 DOWNTO 0 ) ; 
      CARRYIN : IN STD_LOGIC ; 
       ZERO,CARRYOUT : OUT STD_LOGIC ; 
       OUTPUT : OUT STD_LOGIC_VECTOR(7 DOWNTO 0 ) ; 
       CONTROL : IN STD_LOGIC_VECTOR(7 DOWNTO 0 )  
        ) ; 
END ALU ; 

ARCHITECTURE OPERATION OF ALU IS
SIGNAL TMP : STD_LOGIC_VECTOR( 8 DOWNTO 0 ) ; 
BEGIN
PROCESS
BEGIN
  IF( CONTROL = "00110000" OR CONTROL(7 DOWNTO 3 )  = "00001" ) THEN TMP <= CARRYIN & ( INPUT1 AND INPUT2 ) ;
  ELSIF( CONTROL(7 DOWNTO 3 ) = "00010" ) THEN TMP <= CARRYIN & ( INPUT1 OR INPUT2 ) ;
  ELSIF( CONTROL(7 DOWNTO 3 ) = "00011" ) THEN TMP <= CARRYIN & ( INPUT1 XOR INPUT2 ) ;
  ELSIF( CONTROL(7 DOWNTO 3 ) = "00100" ) THEN TMP <= CONV_STD_LOGIC_VECTOR(  ( CONV_INTEGER(INPUT1)+1 ) , 9 ) ; 
  ELSIF( CONTROL(7 DOWNTO 3 ) = "00101" ) THEN TMP <= CONV_STD_LOGIC_VECTOR(  ( CONV_INTEGER(INPUT1)-1 ) , 9 ) ; 
  ELSIF( CONTROL = "10001100" ) THEN TMP <= '0' & (NOT INPUT1) ; 
  ELSIF( CONTROL(7 DOWNTO 3 ) = "11000" OR CONTROL(7 DOWNTO 2 ) = "110010" OR CONTROL = "110-11--" ) THEN TMP <= CONV_STD_LOGIC_VECTOR(  ( CONV_INTEGER(INPUT1)+CONV_INTEGER(INPUT2) ) , 9 ) ; 
  ELSIF( CONTROL(7 DOWNTO 3 ) = "11100" OR CONTROL(7 DOWNTO 2 ) = "111010" OR CONTROL = "111-11--" OR CONTROL(7 DOWNTO 3 ) = "00000" OR CONTROL = "00111000" ) THEN TMP <= CONV_STD_LOGIC_VECTOR(  ( CONV_INTEGER(INPUT1)-CONV_INTEGER(INPUT2) ) , 9 ) ; 
  ELSIF( CONTROL(7 DOWNTO 3 ) = "11010" OR CONTROL(7 DOWNTO 2 ) = "110110" ) THEN TMP <= CONV_STD_LOGIC_VECTOR(  ( CONV_INTEGER(INPUT1)+CONV_INTEGER(INPUT2)+CONV_INTEGER(CARRYIN) ) , 9 ) ;
  ELSIF( CONTROL(7 DOWNTO 3 ) = "11110" OR CONTROL(7 DOWNTO 2 ) = "111110" ) THEN TMP <= CONV_STD_LOGIC_VECTOR(  ( CONV_INTEGER(INPUT1)-CONV_INTEGER(INPUT2)-CONV_INTEGER(CARRYIN) ) , 9 ) ;
  END IF ;
  IF ( TMP( 7 DOWNTO 0 ) = "00000000" ) THEN ZERO <= '1' ;
  ELSE ZERO <= '0' ;    
    END IF ; 
      IF( CONTROL(7 DOWNTO 3 ) = "00000" OR CONTROL = "00111000" ) THEN
      TMP( 7 DOWNTO 0 ) <= INPUT1 ; 
      END IF ;
      OUTPUT <= TMP( 7 DOWNTO 0 ) ; 
    CARRYOUT <= TMP(8) ;
      WAIT FOR 1 PS;
END PROCESS ; 
END OPERATION ; 
```

# testbench code

```
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
USE ieee.std_logic_unsigned.all;

ENTITY test_tb IS
END test_tb;

ARCHITECTURE behavior OF test_tb IS
   COMPONENT ALU
  PORT(
      INPUT1 , INPUT2: IN STD_LOGIC_VECTOR(7 DOWNTO 0 ) ; 
      CARRYIN : IN STD_LOGIC ; 
       ZERO,CARRYOUT : OUT STD_LOGIC ; 
       OUTPUT : OUT STD_LOGIC_VECTOR(7 DOWNTO 0 ) ; 
       CONTROL : IN STD_LOGIC_VECTOR(7 DOWNTO 0 )  
        ) ; 
END COMPONENT ; 

   signal i1,i2,ctrl,opt : std_logic_vector(7 downto 0 ) := "00000000" ;
   signal cin,cout,zero : std_logic := '0';

BEGIN

   uut: alu PORT MAP ( i1,i2,cin,zero,cout,opt,ctrl ) ;

  stim_proc: process
   begin        

        i1 <= "10000000" ; 
        i2 <= "10000000" ; 
        ctrl <= "11011010" ; 
        cin <= '0' ; 
        wait for 5 ps;
        ctrl <= "00111000" ; 
        wait for 5 ps ; 
        wait;
  end process;

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:50:30.583

不幸的是，这段代码并没有达到您的预期：

```
CONTROL = "111-11--" 
```

它实际上比较了 CONTROL 以查看它是否将第 4、第 6 和第 7 位设置为`-`，而不是将它们用作“无关”匹配！令人难以置信，但这就是它多年来被指定工作的方式:(

你想要的是

```
 std_match(CONTROL, "111-11--") 
```

这将像您期望的那样进行无关紧要的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:37:07.773

问题在于**CONTROL = "111-11--"**形式的语句以及 'U'|'X'|'W'|'Z'|'-' 在您使用的库函数中的处理方式。

1.  CONTROL = "111-11--" 从 std_logic_unsigned 调用 '=' 函数（比较两个 std_logic_vectors）...
2.  这从 std_logic_arith 调用 '=' 函数（比较两个无符号值）...
3.  这从 std_logic_arith 调用 CONV_UNSIGNED ...
4.  这从 std_logic_arith 调用 MAKE_BINARY ...
5.  最后，这个函数检查一个位是否设置为'U'|'X'|'W'|'Z'|'-'。如果是这样，它会给出你看到的警告

--> 长答案的短消息：避免使用'U'|'X'|'W'|'Z'|'-'。改为使用“0”和“1”位的显式比较

# javascript - 如果重复多次，JavaScript 是否会缓存/优化代码？

> ID：16078619
> 
> 赞同：2
> 
> 时间：2013-04-18T09:00:24.560
> 
> 标签：javascript, performance

我目前正在编写一个小框架来测试 JavaScript 函数的速度。当我用相同的参数重复调用相同的方法时，它给了我奇怪的结果：

```
Function           Execution Time

isEvenBitwise      38.00000000046566
isEvenModulo       38.00000000046566
isEvenPointless    38.00000000046566 
```

这是我的功能：

```
var myFunctions = 
{
    isEvenBitwise: function(number) 
    {
        return !(number & 1);  
    },
    isEvenModulo: function(number)
    {
        return (number % 2 == 0);
    },
    isEvenPointless: function(number)
    {
        return 1;
    }
} 
```

运行函数的代码：

```
PerformanceTest.prototype.measureTime = function()
{
    for (var indexTests = 0; indexTests < this.testCount; indexTests++)
    {
        var results = [];

        for (var currentFunction in this.functions) {
            var contextFunction = this.functions[currentFunction];

            var startTime = performance.now();
            for (var i = 0; i < this.iterationsPerTest; i++)
            {
                var heh = contextFunction.apply(this, arguments)
            }
            var executionTime = performance.now() - startTime;

            var result = {};
            result.testName = currentFunction;
            result.executionTime = executionTime;
            results.push(result);
        }

        this.testResults.push(results);
    }
} 
```

JavaScript 解释器是否缓存/优化我的代码？如果是这样，它是如何工作的？或者还有什么我不知道的事情发生了？

编辑：这似乎只发生在 chrome 中，firefox 对这些结果很好：

```
Function           Execution Time

isEvenBitwise      9.652258097220447
isEvenModulo       37.546061799704376
isEvenPointless    8.512472488871936 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:20:10.740

在查看了您的代码后，我将猜测 Chrome 对您正在做的事情很聪明。它看到了这个：

```
 var startTime = performance.now();
 for (var i = 0; i < this.iterationsPerTest; i++)
 {
      var heh = contextFunction.apply(this, arguments)
 }
var executionTime = performance.now() - startTime; 
```

正确评估 contextFunction 没有副作用，认识到该`heh`变量仅存在于循环范围内并且从未使用过，然后优化整个循环，因为它没有做任何事情。

# java - 当我们需要 Arraylist 中的 Collections 类方法时，为什么不扩展 Collections 呢？

> ID：16078620
> 
> 赞同：-6
> 
> 时间：2013-04-18T09:00:29.853
> 
> 标签：java

`Collections.sort()`每次 `Arraylist`我们进行排序时都需要，所以为什么不开发的“伟人”`Arraylist` 不添加`Collections`类作为扩展类！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:04:43.183

这是类中的 sort(list) 实现`Collections`：

```
132     public static <T extends Comparable<? super T>> void sort(List<T> list) {
133         Object[] a = list.toArray();
134         Arrays.sort(a);
135         ListIterator<T> i = list.listIterator();
136         for (int j=0; j<a.length; j++) {
137             i.next();
138             i.set((T)a[j]);
139         }
140     } 
```

您会看到它是通用的，并且可以在任何实现的所有实例上运行`List`.

`List`作为一个接口，您不能将此实现作为 的实例方法`List`，这样可以避免在每个具体实现中重复它。这就是为什么最好在第三方类中定义这些方法，`Collections`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:02:41.370

1.  `Collections`是一个实用类，`ArrayList`是一个数据结构。它们都出于不同的目的而存在。`Collections.sort()`是一种对 a 进行排序的实用方法`List`，将其保存在一个地方可以避免代码中的冗余。

2.  `Collections.sort()`是一个静态方法，所以它不能被覆盖。

3.  如果任何`List`实现扩展`Collections`了 class ，那么将来它将无法扩展任何其他类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:06:44.343

那么可能是因为以下几个原因

1.  ArrayList 已经扩展了 AbstractList 并且您只能在 java 中扩展一个类
2.  Collections 的所有功能都是静态的
3.  他们不希望任何人覆盖这些方法，以防万一不是静态的
4.  如果有人认为它们可以转换为最终的非静态方法，那么将 Collections 作为基类将毫无用处。
5.  Collections 中的方法只是工作的一部分，可以在 ArrayList 上执行，它没有定义 ArrayList 应该做什么。因此，从 OOP 的角度来看，“伟人”都不会那样做。

# c# - MVC 4 - Centralize the create action

> ID：16078623
> 
> 赞同：1
> 
> 时间：2013-04-18T09:00:33.667
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

I'll try to be clear. I'm developing a web application based on MVC 4 and Entity Framework. Through this app, I can create some **Products** which is depending on an other table which is **Product Types** As you can see, in my create product View, I have a dropdownlist which contains the product types :

```
@model BuSIMaterial.Models.Product
@{
    ViewBag.Title = "Create";
}
<h2>
    Create</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Product</legend>
        <div class="editor-label">
            Purchase date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.PurchaseDate, new { @class = "datepicker"})
            @Html.ValidationMessageFor(model => model.PurchaseDate)
        </div>
        <div class="editor-label">
            Serial number :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.SerialNumber, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.SerialNumber)
        </div>
        <div class="editor-label">
            Product type :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductType", String.Empty)<a href="../ProductType/Create">Add
                a new product type?</a>
            @Html.ValidationMessageFor(model => model.Id_ProductType)
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Create</button>
        </div>
    </fieldset>
} 
```

And in my create product type View, I have a dropdownlist of existing product companies (so the same relation which exists between product and product type :

```
@model BuSIMaterial.Models.ProductType

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>ProductType</legend>

        <div class="editor-label">
            Model : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Model, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.Model)
        </div>

        <div class="editor-label">
            Catalog Price : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CatalogPrice)
            @Html.ValidationMessageFor(model => model.CatalogPrice)
        </div>

        <div class="editor-label">
            Company : 
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductCompany", String.Empty)<a href ="../ProductCompany/Create" >Add a new company?</a>
            @Html.ValidationMessageFor(model => model.Id_ProductCompany)
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Create</button>
        </div>
    </fieldset>
} 
```

What I tried is to "mix" these 2 views in one **Create Product View**. So I think my action will change a little bit. Also, I think I'll have to do 2 adds in my database. Is it the best way to do what I want?

**UPDATE** : by using a viewmodel, I got this :

My View Model :

```
public class ProductViewModel
{
    [Required]
    public Product Product { get; set; }
    [Required]
    public ProductType ProductType { get; set; }
} 
```

My Create Action :

```
[HttpPost]
public ActionResult CreateFullProduct(ProductViewModel pvm)
{
    ViewBag.Id_ProductCompany = new SelectList(db.ProductCompanies, "Id_ProductCompany", "Name", pvm.ProductType.Id_ProductCompany);

    if (ModelState.IsValid)
    {
        Product product = new Product { PurchaseDate = pvm.Product.PurchaseDate, 
                                        SerialNumber = pvm.Product.SerialNumber,
                                        Id_ProductType = pvm.ProductType.Id_ProductType};

        ProductType productType = new ProductType {Model = pvm.ProductType.Model,
                                                   CatalogPrice = pvm.ProductType.CatalogPrice,
                                                   Id_ProductCompany = pvm.ProductType.Id_ProductCompany};

        db.ProductTypes.AddObject(productType);
        db.Products.AddObject(product);
        db.SaveChanges();
        return RedirectToAction("Index", "Person");       

    }

    return View(pvm);
} 
```

When I try to save the new entries, I got this issue : `The INSERT statement conflicted with the FOREIGN KEY constraint "FK_bm_ProductTypes_bm_ProductCompanies".`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:04:10.823

作为`Products`“**依赖**” `ProductTypes`，将它们合并为一个是个好主意。您还必须合并 post 操作，这将有 2 个插入到您的数据库中（这是正确的，一个用于`Product`，一个用于`ProductType`.

您还必须将它们都放在一个模型中，以便您可以在视图中使用它，例如：

```
public class ProductViewModel
{
    public Product Product { get; set; }
    public ProductType ProductType { get; set; }
} 
```

**编辑：您的储蓄问题是因为没有发布 ProductComany（如聊天中所示）**

为了解决这个问题，首先我们将 Dropdown 的值放入模型中：

```
public class ProductViewModel
{
    public Product Product { get; set; }
    public ProductType ProductType { get; set; }
    public List<SelectListItem> ProductCompanies { get; set; }
} 
```

然后通过执行以下操作将其填充到您的`HttpGet`和`HttpPost`中：

```
model.ProductCompanies = db.ProductCompanies
    .ToList()
    .Select(s => new SelectListItem
    {
        Text = s.Name,
        Value = s.Id.ToString()
    })
    .ToList(); 
```

然后在您看来，您可以执行以下操作：

```
@Html.DropDownListFor(m => m.ProductType.Id_ProductCompany, Model.ProductCompanies) 
```

# c - Two struct tm info called by separate localtime returns the same value

> ID：16078627
> 
> 赞同：0
> 
> 时间：2013-04-18T09:00:43.687
> 
> 标签：c, time

I have this test code:

```
 1 #include <stdio.h>
  2 #include <time.h>
  3 
  4 int main() {
  5     struct tm *info1;                                                                                                                                      
  6     struct tm *info2;
  7     unsigned long i = 100000000;
  8     unsigned long j = 200000000;
  9     
 10     info1 = localtime((time_t *) &i);
 11     info2 = localtime((time_t *) &j);
 12     
 13     printf("%s(): info1->tm_sec = %d\n", __func__, info1->tm_sec);
 14     printf("%s(): info1->tm_min = %d\n", __func__, info1->tm_min);
 15     printf("%s(): info1->tm_hour = %d\n", __func__, info1->tm_hour);
 16     printf("%s(): info1->tm_mday = %d\n", __func__, info1->tm_mday);
 17     printf("%s(): info1->tm_mon = %d\n", __func__, info1->tm_mon);
 18     printf("%s(): info1->tm_year = %d\n", __func__, info1->tm_year);
 19     
 20     printf("%s(): info2->tm_sec = %d\n", __func__, info2->tm_sec);
 21     printf("%s(): info2->tm_min = %d\n", __func__, info2->tm_min);
 22     printf("%s(): info2->tm_hour = %d\n", __func__, info2->tm_hour);
 23     printf("%s(): info2->tm_mday = %d\n", __func__, info2->tm_mday);
 24     printf("%s(): info2->tm_mon = %d\n", __func__, info2->tm_mon);
 25     printf("%s(): info2->tm_year = %d\n", __func__, info2->tm_year);
 26     
 27     
 28 
 29     return 0;
 30 } 
```

The output is:

```
main(): info1->tm_sec = 20
main(): info1->tm_min = 33
main(): info1->tm_hour = 3
main(): info1->tm_mday = 4
main(): info1->tm_mon = 4
main(): info1->tm_year = 76
main(): info2->tm_sec = 20
main(): info2->tm_min = 33
main(): info2->tm_hour = 3
main(): info2->tm_mday = 4
main(): info2->tm_mon = 4
main(): info2->tm_year = 76 
```

Lines 7 and 8 are actually timestamps (seconds since Epoch) as unsigned long passed from a calling function (I just hardcoded it here).

Lines 10 and 11 is my concern. I need to obtain the `struct tm` info of the two timestamps `i` and `j`. Basically, I need to get the month of `info1` and compare it against the month of `info2`, etc.

Doing the prints on Lines 13 to 25, `info1` and `info2` returns the same value (i.e same seconds, same minutes, same hours, etc).

Two questions:

1.  Why do they have the same values?
2.  How should I obtain different values of `info1` and `info2`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:04:01.167

[文档](http://linux.die.net/man/3/localtime)清楚地说明了原因：

> 四个函数 asctime()、ctime()、gmtime() 和 localtime() 返回指向静态数据的指针，因此不是线程安全的。

换句话说，您在每次调用时都会获得一个指向标准库所拥有的相同静态结构的指针。您需要复制数据以防止这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:10:36.737

localtime() -> 它的返回值指向一个静态分配的结构，该结构可能被后续调用任何日期和时间函数覆盖。所以使用 localtime_r() 将数据存储在用户提供的结构中。

```
#include <stdio.h>
   #include <time.h>

   int main() {
      struct tm info1;                                                                                                                                      
      struct tm info2;
     unsigned long i = 100000000;
      unsigned long j = 200000000;

     localtime_r((time_t *) &i,&info1);
       localtime_r((time_t *) &j,&info2);

      printf("%s(): info1->tm_sec = %d\n", __func__, info1.tm_sec);
      printf("%s(): info1->tm_min = %d\n", __func__, info1.tm_min);
      printf("%s(): info1->tm_hour = %d\n", __func__, info1.tm_hour);
     printf("%s(): info1->tm_mday = %d\n", __func__, info1.tm_mday);
      printf("%s(): info1->tm_mon = %d\n", __func__, info1.tm_mon);
      printf("%s(): info1->tm_year = %d\n", __func__, info1.tm_year);

      printf("%s(): info2->tm_sec = %d\n", __func__, info2.tm_sec);
     printf("%s(): info2->tm_min = %d\n", __func__, info2.tm_min);
      printf("%s(): info2->tm_hour = %d\n", __func__, info2.tm_hour);
      printf("%s(): info2->tm_mday = %d\n", __func__, info2.tm_mday);
printf("%s(): info2->tm_mon = %d\n", __func__, info2.tm_mon);
     printf("%s(): info2->tm_year = %d\n", __func__, info2.tm_year);

      return 0;
  } 
```

# c# - how to Clear textBox after CompareValidator caught wrong datatype?

> ID：16078629
> 
> 赞同：1
> 
> 时间：2013-04-18T09:00:53.443
> 
> 标签：c#, asp.net, textbox, comparevalidator

and I am a beginner in using asp.net and C# in visual studio 2008

I have a TextBox with the ID = LimitAmount, it is supposed to accepts input of type DOUBLE, therefore I made a CompareValidator (CompareValidatorAmount) to control this, now I want to get the TextBox Cleared after an invalid input type.

thank you !

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:12:40.790

使用自定义验证器：

```
 <asp:CustomValidator id="CustomValidator1"
       ControlToValidate="LimitAmount"
       OnServerValidate="ServerValidation"
       ErrorMessage="This field requires a number"
       ForeColor="red"
       runat="server"/> 
```

在后面的代码中：

```
 void ServerValidation(object source, ServerValidateEventArgs args)
  {
     double tmp;
     if(double.TryParse(args.Value, out tmp))
     {
        args.IsValid = true;
     }
     else
     {
        args.IsValid = false;
        LimitAmount.text = string.empty;
     }
  } 
```

如果你愿意，你也可以在 Javascript 中使用`ClientValidationFunction`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:23:44.113

请尝试使用 jQuery：

```
<table style="width: 100%;">
            <tr>
                <td style="width: 30%;">
                    <asp:TextBox ID="TextBox1" runat="server" onblur="return BtnClick();"></asp:TextBox>
                </td>
                <td style="width: 70%;">
                </td>
            </tr>
            <tr>
                <td>
                    <asp:TextBox ID="TextBox2" runat="server" onblur="return BtnClick();"></asp:TextBox>
                </td>
                <td>
                    <asp:CompareValidator ID="CompareValidator1" runat="server" ErrorMessage="CompareValidator"
                        ControlToCompare="TextBox1" ControlToValidate="TextBox2"></asp:CompareValidator>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Button ID="Button2" runat="server" Text="Button" OnClientClick="return BtnClick();" />
                </td>
                <td>
                    &nbsp;
                </td>
            </tr>
        </table> 
```

和脚本

```
<script type="text/javascript">
    function BtnClick() {
        var val = Page_ClientValidate();
        if (!val) {
            var i = 0;
            for (; i < Page_Validators.length; i++) {
                if (!Page_Validators[i].isvalid) {
                    $("#" + Page_Validators[i].controltovalidate)
                    .val('');
                }
            }
        }
        return val;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:03:56.437

试试这个............当验证被调用时

```
LimitAmount.text = string.empty ; 
```

# ios - RubyMotion undefined method `addTarget' for #

> ID：16078631
> 
> 赞同：0
> 
> 时间：2013-04-18T09:00:57.393
> 
> 标签：ios, rubymotion

I am following the motioncasts screencast at: [http://motioncasts.tv/start-building-views-in-rubymotion/](http://motioncasts.tv/start-building-views-in-rubymotion/)

And there is some code:

```
button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
button.frame = [[15, 300], [280,50]]
button.setTitle("Move to next view", forState: UIControlStateNormal)
button.addTarget(self,
                 action: "moveToChildView:",
                 formControlEvents: UIControlEventTouchUpInside) 
```

Which is supposed to work, but when trying to compile produces the error:

```
(main)> 2013-04-18 18:41:06.205 12wbt[76267:c07] home_controller.rb:19:in `viewDidLoad': undefined method `addTarget' for #<UIRoundedRectButton:0x761fd40> (NoMethodError)
    from app_delegate.rb:6:in `application:didFinishLaunchingWithOptions:'
2013-04-18 18:41:06.208 12wbt[76267:c07] *** Terminating app due to uncaught exception 'NoMethodError', reason: 'home_controller.rb:19:in `viewDidLoad': undefined method `addTarget' for #<UIRoundedRectButton:0x761fd40> (NoMethodError)
    from app_delegate.rb:6:in `application:didFinishLaunchingWithOptions:'
' 
```

As far as I can tell, this is the exact code from the screencast which is supposed to work without error. What is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:23:03.047

问题解决了。最后一行应该是**forControlEvents**，而不是**formControlEvents**。

# javascript - Highcharts plotBands do not work with setExtremes function

> ID：16078632
> 
> 赞同：0
> 
> 时间：2013-04-18T09:01:05.803
> 
> 标签：javascript, jquery, highcharts

I am using latest Highcharts version (3.0) and I have a problem with using plotBands and setExtremes() function.

```
 chart: {
      renderTo: "chart01",
      defaultSeriesType: 'line',
      zoomType: 'x',
      events: {
          load: function(event) {
              this.xAxis[0].setExtremes(myStartDate, myEndDate);
              this.yAxis[0].setExtremes(0,largest);
          }
      }
    } 
```

When using this, Highcharts does not display defined plotBands. If I comment out the two setExtremes functions the plotBands are displayed (red color spaces).

See following (working) fiddle example: [http://jsfiddle.net/J8jKQ/](http://jsfiddle.net/J8jKQ/)

See following (not working) fiddle example: [http://jsfiddle.net/J8jKQ/1/](http://jsfiddle.net/J8jKQ/1/)

Whats the problem here? Did the setExtremes functions remove the plotBand infos?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:03:21.897

要设置极端值，我建议使用 min 和 max 作为轴。这就是存在的原因，请参阅：http: [//jsfiddle.net/J8jKQ/3/](http://jsfiddle.net/J8jKQ/3/)

第二个问题是您的日期是 Date 对象，而应该是时间戳：

```
myStartDate.getTime();
myEndDate.getTime(); 
```

例如：http: [//jsfiddle.net/J8jKQ/4/](http://jsfiddle.net/J8jKQ/4/)

# c# - 使用 Kinect 生成击键

> ID：16078636
> 
> 赞同：0
> 
> 时间：2013-04-18T09:01:31.773
> 
> 标签：c#, unity3d, kinect

我目前正在为我学位的最后一年做一个项目，并且在编码方面遇到了一些麻烦，对于 C# 和统一性来说是相当新的。我正在使用 Kinect、unity 和 zigfu 包，我想使用人员相对于 kinect 的位置来生成击键。例如，如果玩家离 kinect 较近，它将触发按下前进按钮，如果他们距离较远，则会触发中间有中性区域的后退按钮。

```
//has user moved back
if (rootPosition.z < -2)
{
//print(rootPosition.z);
v = -1;
}

//has user moved forward
if (rootPosition.z > -1)
{
//print(rootPosition.z);
v = 1;
} 
```

我设法找到了记录我与 kinect 相关的位置但不知道如何触发击键的部分。任何有关此事的帮助将不胜感激，因为截止日期快到了，我正在努力解决技术方面的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:06:48.237

我过去曾在模拟击键中使用过类似的东西：

[Windows 输入模拟器（C# SendInput Wrapper - 模拟键盘和鼠标）](http://inputsimulator.codeplex.com/)

# java - Eclipse fails to launch (RSEUIStartup)

> ID：16078640
> 
> 赞同：1
> 
> 时间：2013-04-18T09:01:46.323
> 
> 标签：java, eclipse

Hello all :) Just posting here to know if any of you have encountered this problem before:

Eclipse fails to launch, here is the .metadata/.log file from the workspace: [http://pastebin.com/BeUwASQ4](http://pastebin.com/BeUwASQ4)

It happened after the UI began malfunctioning after a line of length 1 500 000 got printed to the console (which I had configured to roll over 800 000 bytes, from the 100 000 default)

I think the key error in the log file is at the `org.eclipse.ui.workbench` plugin startup (line 42: `RSEUIStartup`)

IMHO the UI fails to launch because it can't handle the console again. Do you guys know how to reset the UI display from outside eclipse?

EDIT: Problem solved, thanks to Aaron! I was beginning to panic after a new install of eclipse was also crashing. I also used [this answer](https://stackoverflow.com/questions/5094786/eclipse-java-launch-configuration-file-path) for restoring the launch configurations I had.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:16:40.010

我不确定哪个插件会导致大多数问题，但是当 Eclipse 无法启动时，您应该：

1.  启用控制台和调试。启动 Eclipse`-console -consoleLog -debug`
2.  确保 Eclipse 使用`java`而不是`javaw`启动。否则，您将看不到输出。
3.  要告诉 Eclipse 您要调试什么，请`.options`在与`eclipse.ini`. 在所有插件中查找`.options`文件，以查看您可以在此文件中放置哪些选项。[这是 org.eclipse.core.runtime 包的 .options 文件](http://git.eclipse.org/c/platform/eclipse.platform.runtime.git/tree/bundles/org.eclipse.core.runtime/.options)。

这有助于缩小问题的范围。但通常，`.metadata`目录中的某些文件已损坏，Eclipse 不支持识别这些文件。

如果是这种情况，您需要清理此目录。[按照这些说明](http://blog.pdark.de/2011/09/02/restoring-a-corrupted-workspace-in-eclipse/)使其再次工作，并以最少的起雾。

# winforms - WinForms 的 MVC\MVP 框架

> ID：16078641
> 
> 赞同：4
> 
> 时间：2013-04-18T09:01:52.573
> 
> 标签：winforms, model-view-controller, mvp

是否有任何适用于 WinForms 的 MVC\MVP 活跃框架？

据我了解，MVC# 已死。

[http://www.mvcsharp.org/](http://www.mvcsharp.org/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T18:03:45.947

你试过[WinForms MVP](http://winformsmvp.codeplex.com)吗？

从 CodePlex 页面：

> 基于优秀的 Web Forms MVP，WinForms MVP 是一个简单的用于 Winforms 平台的 Model View Presenter 框架。

[这篇 CodeProject 文章](http://www.codeproject.com/Articles/522809/WinForms-MVP-An-MVP-Framework-for-Winforms)介绍了如何使用该框架。

# silverlight - Silverlight 应用程序无法运行

> ID：16078646
> 
> 赞同：0
> 
> 时间：2013-04-18T09:02:07.647
> 
> 标签：silverlight, internet-explorer, silverlight-4.0, drag-and-drop

我制作了一个用于拖放上传的 Silverlight 应用程序。现在，当我从本地服务器部署此应用程序时，它可以正常工作。但是，每当我从 QA 服务器（同一 LAN 上的机器但有一个与之关联的全局 IP）部署它时，它什么都不做。它只显示一个白色背景屏幕（默认参数）。没有找不到 xap 文件等错误，也没有任何其他控制台错误。我似乎无法弄清楚错误是什么。

正如其他一些博客和帖子所建议的那样，我尝试将扩展名从 xap 更改为 DLL，但仍然相同。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:44:01.993

要访问远程服务器上的 silverlight 应用程序，您需要在该服务器的根文件夹中放置一个 ClientAccessPolicy.xml 文件。

一个基本的，允许您从任何域使用它：

```
<?xml version="1.0" encoding="utf-8" ?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from>
        <Domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource include-subpaths="true" path="/"/>
      </grant-to>
    </policy>    
  </cross-domain-access> 
</access-policy> 
```

更多细节在这里：http: [//msdn.microsoft.com/fr-fr/library/cc197955%28v=vs.95%29.aspx](http://msdn.microsoft.com/fr-fr/library/cc197955%28v=vs.95%29.aspx)

# java - 在维护期间更改 Java EE 应用程序的欢迎页面

> ID：16078647
> 
> 赞同：0
> 
> 时间：2013-04-18T09:02:09.860
> 
> 标签：java, jsp, jakarta-ee, webserver, sunone

我需要向用户显示一条消息，例如：“应用程序将关闭两个小时”。直到现在我重命名了我的`index.htm`，我的`login.jsp`和我上传了另一个`index.html`带有该消息的。另外我上传了另一个指向我重命名的html页面`login.jsp`让我进入。有没有其他方法可以做到这一点，更简单？

我的应用服务器是 SunONE 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:11:59.907

Web 应用程序包含一个`web.xml`名为 Deployment Descriptor 的文件。

它包含以下标签，默认执行。

```
<welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
</welcome-file-list> 
```

您可以更改维护时间的默认欢迎文件列表并重新启动 Web 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:25:50.770

在部署描述符文件中定义默认登录页面。当任何访问者访问您的页面时，它应该登陆该页面。不要提供任何链接来导航到其他页面。

如果您想实现类似[这个问题](https://stackoverflow.com/questions/215912/how-can-i-show-a-temporarily-out-of-service-page-to-web-app-users-during-maint)的目标，那么您可以按照回复进行操作。

# javascript - Adding a hyperlink dynamically in html using jquery

> ID：16078649
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:02:25.423
> 
> 标签：javascript, jquery

```
for (i = 0; i < cRowCount / 5; i++) {
    link = $('<a/>').attr({
        href : '#',
        id : $(this).attr('id') + (i + 1),
        class: 'myLink'
    });

    $(this).append(link + "&nbsp;");
} 
```

When I am appending the link to my component it is not giving me the link. Instead it is showing following thing that to without a hyperlink.

```
 [object Object] [object Object] [object Object] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:06:10.753

这条线的问题 这条`$(this).append(link + "&nbsp;");`线将您的对象转换为字符串，因为您正在用字符串附加对象

你可以这样做

HTML

```
<div>abc
</div> 
```

要附加的代码

```
for (i = 0; i < 10 / 5; i++) {
    link = $('<a/>').attr({
    href : '#',
    id : $(this).attr('id') + (i + 1),
    class: 'myLink'
     });
    link.html(i );

$("div").append(link );
    $("div").html($("div").html() + "&nbsp;" );
} 
```

# [JsFiddle DEMO](http://jsfiddle.net/XnruY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:07:42.483

原因是它返回一个包含 1 个元素的数组。尝试做`$(this).append(link[0] + "&nbsp;");`

# ios - 无法为 CALayer strokeColor 设置动画

> ID：16078652
> 
> 赞同：1
> 
> 时间：2013-04-18T09:02:31.510
> 
> 标签：ios, calayer

我一直在尝试绘制一个简单的矩形并为边缘颜色设置动画。我尝试使用[以下](https://stackoverflow.com/questions/7080952/using-core-animation-to-animate-strokecolor)链接，但仍然没有帮助。我最终通过更改图层的边框颜色和动画来修复它。那工作得很好。

是否有 KVO，`strokeColor`因为我正在让它为`backgroundColor`of 层工作。

我在 XCode 4.6 上运行 iOS SDK 6.1

这就是我一直在做的事情：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 2.0);
CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);

CABasicAnimation *strokeAnim = [CABasicAnimation animationWithKeyPath:@"strokeColor"];
strokeAnim.fromValue         = (id) [UIColor redColor].CGColor;
strokeAnim.toValue           = (id) [UIColor greenColor].CGColor;
strokeAnim.duration          = 3.0;
strokeAnim.repeatCount       = 0;
strokeAnim.autoreverses      = YES;
[self.layer addAnimation:strokeAnim forKey:@"animateStrokeColor"];

CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, squareLength, 0);
CGContextAddLineToPoint(context, squareLength, squareLength);
CGContextAddLineToPoint(context, 0, squareLength);
CGContextAddLineToPoint(context, 0, 0);
CGContextStrokePath(context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T13:57:48.107

在研究了同样的问题后，我发现这`strokeColor`不是`CALayer`. 我*认为*这与 CALayer 渲染到缓存位图有关。

解决方案是使用`CAShapeLayer`可`strokeColor` ***动画***化的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T14:11:58.677

**tl;博士;** 你可能是说`@"borderColor"`

* * *

除非您确实`+ (Class)layerClass`在视图中覆盖（我怀疑您是否这样做了），否则您的视图层将是一个`CALayer`没有`strokeColor`属性的实例。

您可以使用 CAShapeLayer，但您不应该仅仅为了中风而这样做，因为 CALayer 具有`borderColor`您可能正在寻找的属性。

所以我的建议是改为动画`borderColor`。

* * *

## 与您的问题无关：

从您发布的代码看来，您正在视图`drawRect:`实现中添加动画。此方法仅应用于实际绘图，我强烈建议您将动画代码移至其他位置。每次您的视图重绘自身时都会调用此方法，这对于添加新动画来说可能过于频繁。

# rabbitmq - How to handle long asynchronous requests with pyramid and celery?

> ID：16078656
> 
> 赞同：4
> 
> 时间：2013-04-18T09:02:49.260
> 
> 标签：rabbitmq, celery, pyramid, amqp

I'm setting up a web service with pyramid. A typical request for a view will be very long, about 15 min to finish. So my idea was to queue jobs with celery and a rabbitmq broker. I would like to know what would be the best way to ensure that bad things cannot happen. Specifically I would like to prevent the task queue from overflow for example.

A first mesure will be defining quotas per IP, to limit the number of requests a given IP can submit per hour.

However I cannot predict the number of involved IPs, so this cannot solve everything.

I have read that it's not possible to limit the queue size with celery/rabbitmq. I was thinking of retrieving the queue size before pushing a new item into it but I'm not sure if it's a good idea.

I'm not used to good practices in messaging/job scheduling. Is there a recommended way to handle this kind of problems ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:43:28.180

RabbitMQ在 QoS 中内置了[流控制。](http://www.rabbitmq.com/memory.html)如果 RabbitMQ 无法处理发布速率，它将调整 TCP 窗口大小以减慢发布者的速度。如果发送到服务器的消息过多，它也会溢出到磁盘。这将使您的消费者更加天真，尽管如果您在出错时重新启动连接并淹没连接，您可能会导致问题。

我一直决定花更多时间确保发布者/消费者可以使用多个队列服务器，而不是试图让他们对单个队列服务器更加智能。好处是，如果您真的超载单个服务器，您可以添加另一个（如果使用 RabbitMQ HA，则添加另一对。Pycon 提供了一个有用的视频，关于使用 Celery 和 RabbitMQ[进行大规模消息传递](http://www.youtube.com/watch?v=E708csv4XgY)，应该有用。

# jpql - How to combine TRIM and LOWER functions in JPQL?

> ID：16078666
> 
> 赞同：6
> 
> 时间：2013-04-18T09:03:28.313
> 
> 标签：jpql

I need to perform the following select:

```
select c.address from Customer c where lower(trim(c.name)) = :name 
```

But I get the following exception:

```
javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query 
```

Any idea how can I combine `trim` with `lower`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T11:19:07.630

我发现了解决方案，您必须使用`both`才能使语句起作用：

```
select c.address from Customer c where lower(trim(both from c.name)) = :name 
```

# android - 如何在 Android 中检测到 WIFI 已打开但无法访问？

> ID：16078667
> 
> 赞同：2
> 
> 时间：2013-04-18T09:03:45.233
> 
> 标签：android, wifi, android-wifi, connectivity

有谁知道如何在 Android 中以编程方式检测 wifi 无法访问？我有一个正在运行的应用程序，我可以在其中轻松检测网络连接的类型以及是否打开（NetworkInfo 类），但我无法检测到 wifi 是否打开，但我在另一边遥不可及建筑，所以没有互联网。网络信息一直说网络类型是 WIFI，isConnected = true，getDetailedState = CONNECTED，所以这些对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:06:19.507

检测 WIFI 是否已连接或打开。如果 wifi 未连接到任何 INTERNET 连接，则显示消息“ `WIFI is unreachable or no INTERNET connection.`”

要检查 WIFI 是否已连接，请使用以下代码。

```
ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

if (mWifi.isConnected()) {
    // Do whatever
} 
```

# c - 在C中使用win32在父线程中创建未知数量的子线程？

> ID：16078673
> 
> 赞同：1
> 
> 时间：2013-04-18T09:04:07.043
> 
> 标签：c, multithreading, winapi

如何在父线程中创建未知数量的子线程，并在 C 中使用 win32 一个一个地等待它们？
父线程的生命周期是无限的，它等待请求，如果收到任何请求，则为该请求创建一个新的子线程，例如服务器。
我正在网上搜索，但我找不到任何东西。
任何教程和信息表示赞赏。
非常感谢，祝你好运。

笔记 ：

1\. 例如想象一个简单的服务器：当用户向该服务器发送请求时，服务器为该用户创建一个新线程并等待该线程终止，但如果另一个用户发送另一个请求，则服务器创建另一个与该服务器完全分离的线程旧线程，然后服务器必须等待与旧线程分开的新线程终止。

2\. 主线程在无限循环中扫描一个大小为常数 n 的全局数组，如果在每个数组的块中找到特定值，则运行新线程对该块的信息进行一些操作，然后在线程终止后更新块的信息。父线程生命周期是无限的，因为它有一个无限循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:18:19.567

也许你应该使用 WaitForMultipleObjects 函数。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:21:11.190

您将创建每个线程`CreateThread`并将线程句柄存储在动态列表或数组中。如果您希望主线程识别线程何时终止，那么您可以调用`WaitForMultipleObjects`，为它提供一个包含所有线程句柄的数组。的返回值`WaitForMultipleObjects`将告诉您哪些线程句柄已发出信号，因此哪个线程终止。不要忘记`CloseHandle`最后的线程句柄。

如果您只想生成线程并且主线程不需要知道线程何时终止，那么您可以创建线程`CreateThread`并关闭线程句柄。当线程终止时，线程的资源将被释放。

在您的主线程中，您还需要检查是否收到客户端请求。如果您有一个可以等待事件的客户端接口，那么只需将事件添加到传递给`WaitForMultipleObjects`. 如果您没有像案例 2 中那样的事件，那么您可能会考虑`WaitForMultipleObjects`使用超时调用，以便`WaitForMultipleObjects`在线程终止或超时发生时返回。在这两种情况下，您的主循环都会继续运行，您可以检查是否需要生成另一个线程。

以下是使用客户端请求事件时的一些伪代码：

```
initialize empty list of thread data (thread handles and other data for each thread);
for(;;) {
    create an array a big enough for the request event and for all thread handles;
    a[0] = request event handle;
    a[1..n] = thread handles from the list;
    DWORD ret = WaitForMultiObjects(n+1, a, FALSE, INFINITE);
    if(ret == WAIT_OBJECT_0) {
        create thread and store it's handle and other data in the list;
    }
    else if(WAIT_OBJECT_0 + 1 <= ret  &&  ret <= WAIT_OBJECT_0 + n) {
        thread (ret - WAIT_OBJECT_0 - 1) terminated, do your cleanup and don't forget CloseHandle();
    }
    else
        error occured, should not happen;
} 
```

如果您没有客户端请求的事件，那么您需要轮询：

```
initialize empty list of thread data (thread handles and other data for each thread);
for(;;) {
    create an array a big enough for the request event and for all thread handles;
    a[0..n-1] = thread handles from the list;
    DWORD ret = WaitForMultiObjects(n, a, FALSE, your desired timeout);
    if(ret != WAIT_TIMEOUT)
        ; // timeout occured, no thread terminated yet, nothing to do here
    else if(WAIT_OBJECT_0 <= ret  &&  ret < WAIT_OBJECT_0 + n) {
        thread (ret - WAIT_OBJECT_0) terminated, do your cleanup and don't forget CloseHandle();
    }
    else
        error occured, should not happen;
    // Always check for client requests, not only in case of WAIT_TIMEOUT.
    // Otherwise you might run into the situation that every time you call WaitForMultiObjects a thread ended just before the timeout occured and you only recognize it after a lot of loop runs when the last thread terminated.
    if(there is a client request) {
        create thread and store it's handle and other data in the list;
    }
} 
```

如果您不需要为每个线程存储额外的数据，那么您可以只存储线程句柄，并且可能已经将它们存储在一个大数组中。因此，您可以消除从线程句柄列表构建数组的步骤。

# java - @Column columnDefinition 使哪些属性变得多余？

> ID：16078681
> 
> 赞同：60
> 
> 时间：2013-04-18T09:04:25.523
> 
> 标签：java, hibernate, jpa

我经常`@Column`这样指定我的注释：

```
@Column(columnDefinition="character varying (100) not null",length=100,nullable=false) 
```

如您所见，我指定了`length`，`nullable`即使`columnDefinition`已经指定了这些。那是因为我不知道这些值在何处/何时准确使用。

那么，在指定 时`columnDefinition`，还有哪些其他属性`@Column`是多余的？

如果重要，我会使用 Hibernate 和 PostgreSQL

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-07-05T06:09:32.077

**我的回答：以下所有内容都应该被覆盖（即在`columndefinition`适当的情况下将它们全部描述在 内）：**

*   `length`
*   `precision`
*   `scale`
*   `nullable`
*   `unique`

即 DDL 列将包括：`name`+`columndefinition` *而没有别的*。

理由如下。

* * *

1.  包含单词“Column”或“Table”的注释是纯粹的物理属性 -*仅*用于控制 DDL/DML 对数据库的属性。

2.  其他纯逻辑注释 - 在 Java 中用于控制 JPA 处理的内存中的属性。

3.  这就是为什么有时看起来可选性/可空性设置了两次——一次 via`@Basic(...,optional=true)`和一次 via `@Column(...,nullable=true)`。前者说，在刷新时，JPA 对象模型（内存中）中的属性/关联可以为空；后者说 DB 列可以为空。通常您希望它们设置相同 -*但并非总是*如此，这取决于数据库表的设置和重用方式。

在您的示例中，长度和可为空的属性被覆盖和冗余。

* * *

> ***那么，在指定 columnDefinition 时，@Column 的其他哪些属性是多余的？***

1.  在 JPA 规范和 javadoc 中：

    *   `columnDefinition`定义： **为列生成 DDL 时使用的 SQL 片段。**

    *   `columnDefinition`默认值： **生成的 SQL 以创建推断类型的列。**

    *   提供了以下示例：

        ```
        @Column(name="DESC", columnDefinition="CLOB NOT NULL", table="EMP_DETAIL")
        @Column(name="EMP_PIC", columnDefinition="BLOB NOT NULL") 
        ```

    *   而且，呃……，真的是这样。:-$ ?!

    **columnDefinition 是否会覆盖同一注释中提供的其他属性？**

    javadoc 和 JPA 规范没有明确解决这个问题——规范没有提供很好的保护。要 100% 确定，请使用您选择的实现进行测试。

2.  JPA 规范中提供的示例可以安全地暗示以下内容

    *   **`name`&`table`可以与 结合使用`columnDefinition`，两者都不会被覆盖**
    *   **`nullable`被覆盖/冗余`columnDefinition`**
3.  从“情况的逻辑”中可以相当安全地暗示以下内容（我刚刚说过吗？？ :-P ）：

    *   **`length`, `precision`,`scale`被覆盖/冗余`columnDefinition`- 它们是类型的组成部分**
    *   **`insertable`和`updateable`单独提供并且从不包含在 中`columnDefinition`，因为它们在内存中控制 SQL 生成，然后再将其发送到数据库。**
4.  只剩下 " `unique`" 属性。它类似于 nullable - 扩展/限定类型定义，因此应该被视为类型定义的组成部分。即应该被覆盖。

* * *

**分别对“A”和“B”列**测试我的答案：****

 **```
 @Column(name="...", table="...", insertable=true, updateable=false,
          columndefinition="NUMBER(5,2) NOT NULL UNIQUE"

  @Column(name="...", table="...", insertable=false, updateable=true,
          columndefinition="NVARCHAR2(100) NULL" 
```

*   确认生成的表具有正确的类型/可空性/唯一性
*   可选地，进行 JPA 插入和更新：前者应包括 A 列，后者应包括 B 列

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-04T14:11:15.163

**columnDefinition**将覆盖休眠为此特定列生成的 sql DDL，它是不可移植的，并且取决于您使用的数据库。您可以使用它来指定可为空、长度、精度、比例...等。**

# sparql - Sparql - 如果未绑定任何一个变量，则连接失败

> ID：16078683
> 
> 赞同：4
> 
> 时间：2013-04-18T09:04:27.737
> 
> 标签：sparql, allegrograph

您好，我正在使用 AllegroGraph 和 Sparql 查询来检索结果。这是重现我的问题的示例数据。考虑以下数据，其中一个人有名字、中间名和姓氏。

```
<http://mydomain.com/person1> <http://mydomain.com/firstName> "John"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person1> <http://mydomain.com/middleName> "Paul"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person1> <http://mydomain.com/lastName> "Jai"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://mydomain.com/person>

<http://mydomain.com/person6> <http://mydomain.com/middleName> "Mannan"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person6> <http://mydomain.com/lastName> "Sathish"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person6> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://mydomain.com/person> 
```

现在我需要通过结合所有 3 个名字来计算人名。姓名是可选的，一个人可能没有名字、中间名和姓氏中的任何一个。

我试过的查询

```
select ?person ?name ?firstName ?middleName ?lastName where 
{
  ?person rdf:type  <http://mydomain.com/person>.
    optional {?person <http://mydomain.com/firstName> ?firstName}.
    optional {?person <http://mydomain.com/middleName> ?middleName}.
    optional {?person <http://mydomain.com/lastName> ?lastName}.    
    bind (concat(str(?firstName),str(?middleName),str(?lastName)) as ?name).
} 
```

但是结果集不包含 person6 (Mannan Sathish) 的名字，因为名字不存在。如果未绑定，请告诉我是否可以忽略 firstName。

![结果集](https://i.stack.imgur.com/WCfpv.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T10:05:44.803

如果变量未绑定，则 str(...) 将导致评估错误并且整个 BIND 失败。

`COALESCE`可用于为表达式提供默认值。

```
bind ( COALESCE(?firstName, "") As ?firstName1)
bind ( COALESCE(?middleName, "") As ?middleName1)
bind ( COALESCE(?lastName, "") As ?lastName1)
bind (concat(str(?firstName1),str(?middleName1),str(?lastName1)) as ?name 
```

# ipv6 - 关于以太网 IPv6 多播地址的 RFC 与实现之间的不一致

> ID：16078684
> 
> 赞同：1
> 
> 时间：2013-04-18T09:04:35.020
> 
> 标签：ipv6, multicast, rfc

在[RFC2464](https://www.rfc-editor.org/rfc/rfc2464)中，以太网 IPv6 组播地址的前缀定义为`33:33`，但是当我在 Wireshark 中捕获一些数据包时，我发现这个前缀实际上是实现为`33:33:ff`。

比如发送ICMPv6 Neighbor Solicitation报文时，我抓到的目的mac地址是`33:33:ff:f8:67:0d`，目的IP地址的最后几位是`...:d3f5:31f8:670d`。按照 RFC2464，mac 地址应该是`33:33:31:f8:67:0d`.

那么这个 RFC 被弃用了吗？我应该如何在我的程序中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:44:23.997

您正在查看请求的节点多播地址。您正在尝试将节点的 IPv6 单播地址直接转换为以太网 MAC 地址，但您缺少中间步骤。要获取多播 MAC 地址，您首先将节点的单播 IPv6 地址转换为请求的节点多播 IPv6 地址，如[RFC2373 的第 2.7.1 节](https://www.rfc-editor.org/rfc/rfc2373#section-2.7.1)所述。然后，您将获得与该 IPv6 多播地址相对应的多播 MAC 地址，如[RFC2464 的第 7 节所述](https://www.rfc-editor.org/rfc/rfc2464#section-7)。

一个例子：让我们从 IPv6 address 开始`2001:db8::d3f5:31f8:670d`。相应的请求节点 IPv6 多播地址是`ff02:0:0:0:0:1:fff8:670d`。然后应用该算法来获取 的多播 MAC 地址`33:33:ff:f8:67:0d`。

不过，在应用程序中，您不必担心邻居发现。那是操作系统的工作。在应用程序中使用多播时，您应该只绑定/订阅 IPv6 多播地址，操作系统会将发往该多播地址的所有数据包传送到您的应用程序。如果您在不同的 LAN 上进行多播，这将涉及主机和多播路由器之间的[MLDv2 （多播侦听器发现版本 2）等其他协议以及多播路由器之间的](https://www.rfc-editor.org/rfc/rfc3810)[PIM-SM](https://www.rfc-editor.org/rfc/rfc4601)（协议独立多播 - 稀疏模式）等多播路由协议。

# java - 如何拆分字符串并将其存储在数组中

> ID：16078686
> 
> 赞同：1
> 
> 时间：2013-04-18T09:04:38.097
> 
> 标签：java, arrays, string

我已经尝试了以下示例，但它给出了以下输出 `output[]`。我已将字符串“1.0”传递给函数`calculatePayout()`，并希望将 1`s[0]`和 0 存储在`s[1]`

```
import java.util.Arrays;

    public class aps {

        public void calculatePayout(String amount)
        {
            String[] s = amount.split(".");
            System.out.println("output"+Arrays.toString(s));
        }

    public static void main(String args[])
    {
        new aps().calculatePayout("1.0");
    }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T09:09:07.137

方法`split()`接受正则表达式。`.`正则表达式中的字符表示“一切”。要拆分字符串，`.`您必须将其转义，即`split("\\.")`. 需要第二个反斜杠，因为第一个转义正则表达式的点，第二个转义 Java 编译器的反斜杠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T09:07:56.410

尝试转义点：

```
String[] s = amount.split("\\."); 
```

因为点是[正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)中的“任何字符” 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T09:08:40.050

尝试 `amount.split("\\.")`

[Split](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)方法使用正则表达式，因此您需要使用正确的语法并转义点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T09:09:32.223

`.`是正则表达式世界中的**元字符**或特殊字符。`String#split(regex)`期望正则表达式作为参数，您要么必须用反斜杠转义它，要么使用字符类以将其视为普通字符

要么`amount.split("\\.");`或`amount.split("[.]");`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T09:09:36.750

尝试

```
amount.split("\\.") 
```

split 方法接受一个[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

# c++ - “无效值未被忽略”错误是什么意思以及如何删除它？

> ID：16078693
> 
> 赞同：-1
> 
> 时间：2013-04-18T09:04:48.180
> 
> 标签：c++, compilation, void

我尝试编译以下代码：

```
#include <cppunit/extensions/HelperMacros.h>
#include "tested.h"

class TestTested : public CppUnit::TestFixture
{
        CPPUNIT_TEST_SUITE(TestTested);
        CPPUNIT_TEST(check_value);
        CPPUNIT_TEST_SUITE_END();

        public:
                void check_value();
};

CPPUNIT_TEST_SUITE_REGISTRATION(TestTested);

void TestTested::check_value() {
        tested t(3);
        int expected_val = t.getValue(); // <----- Line 18.
        CPPUNIT_ASSERT_EQUAL(7, expected_val);
} 
```

结果我得到：

```
testing.cpp:18:32: Error: void-value is not ignored where it should be 
```

**编辑**

为了使示例完整，我发布了`tested.h`and的代码`tested.cpp`：

`tested.h`

```
#include <iostream>
using namespace std;

class tested {
    private:
        int x;
    public:
        tested(int int_x);
        void getValue();
}; 
```

`tested.cpp`

```
#include <iostream>
using namespace std;

tested::tested(int x_inp) {
    x = x_inp;
}

int tested::getValue() {
    return x;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:13:22.577

您`void getValue();`在测试的类中声明.. 更改为`int getValue();`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:19:04.437

void 函数不能返回值。您从 API getValue() 获得一个 int 值，因此它应该返回一个 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:20:17.330

您的类定义与实现不匹配：

在您的标头中，您已按以下方式声明它（顺便说一句，您可能需要查看一些命名约定）。

```
class tested {
    private:
        int x;
    public:
        tested(int int_x);
        void getValue();
}; 
```

您已声明`getValue()`为`void`，即没有回报。`getter`a什么都不返回没有多大意义，不是吗？

但是，在`.cpp`您实现的文件中，`getValue()`如下所示：

```
int tested::getValue() {
    return x;
} 
```

您需要更新`getValue()`标头类型中的方法签名，使其返回类型与实现 ( `int`) 匹配。

# mysql - 在“读取初始通信数据包”时失去与 MySQL 服务器的连接 - Thinking sphinx with remote sphinx server

> ID：16078694
> 
> 赞同：3
> 
> 时间：2013-04-18T09:04:48.373
> 
> 标签：mysql, ruby-on-rails-3.2, sphinx, thinking-sphinx

我尝试将 Thinking **sphinx (3.0.2)**与远程 sphinx 服务器一起使用。每当像 Model.search 一样调用搜索查询时，我都会收到错误消息：

```
Mysql2::Error: Lost connection to MySQL server at 'reading initial communication packet', system error: 0. 
```

当我尝试调试它时，

```
Mysql2::Client.new({
    :host  => address,
    :port  => port,
    :flags => Mysql2::Client::MULTI_STATEMENTS
} 
```

代码在`thinking-sphinx-3.0.2/lib/thinking_sphinx/connection.rb:5`5 中调用，端口在 thinking_sphinx.yml 中指定。

当我在控制台中尝试该代码时，我得到了同样的错误。我该如何解决？它与mysql或sphinx或thinking_sphinx有关吗？

供参考：

1.  rails(3.2.8) ，thinking-sphinx (3.0.2)，sphinx (2.0.5)
2.  sphinx, mysql 在同一个远程服务器上

# android - 用于快速测试 Android 布局的工具

> ID：16078697
> 
> 赞同：3
> 
> 时间：2013-04-18T09:04:53.497
> 
> 标签：android, layout, android-emulator, intellij-idea

Android 布局很难做到正确。特别是对于像我这样没有经验的布局者。目前我使用以下工作流程：

*   使用 IntelliJ 的 GUI 预览窗口在 IntelliJ 中设计布局
*   在我的设备上测试布局
*   在不同的模拟器图像上测试布局

这种方法有几个问题：

*   IntelliJ 非常不准确（通常设备上的布局看起来非常不同）
*   在我的设备上测试很好，但这里我只有一个固定的分辨率和 PPI
*   模拟器需要 AGES 才能启动。如果使用多个模拟器，情况会变得更糟

这就是我寻找替代解决方案的原因：一种可以快速呈现 Android 布局的工具（不需要应用程序逻辑）。此工具应支持不同的分辨率和 PPI 设置，并应尽可能接近真实设备上的实际外观。

有这样的工具吗？还有哪些其他选择？

# angularjs - AngularJS ng-click：在每次点击时添加相同的 Div/Widget

> ID：16078698
> 
> 赞同：1
> 
> 时间：2013-04-18T09:05:01.317
> 
> 标签：angularjs, angularjs-ng-repeat

以下代码依次显示所有 div：

```
<ul class="record">
   <li id="{{record.id}}" ng-repeat="record in records"> 
      <div> Widget Code.... </div>
   </li>
</ul> 
```

除此之外，我在右侧以下拉方式有以下可点击的列表菜单：

```
<li ng-repeat="choice in items">
    <a href="#">{{choice}}</a>
</li> 
```

现在单击每个列表项，我想添加相同的`<div> Widget Code.... </div>`内容，将现有的 div 附加到页面上。

我最近的观点如下现在我想在现有 div 之后单击每个列表项添加 div。

![在此处输入图像描述](https://i.stack.imgur.com/k78u0.png)

需要帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:56:25.450

这应该可以解决问题：

```
<li ng-repeat="choice in items">
    <a href="#" ng-click="addRecord()">{{choice}}</a>
</li> 
```

然后在你的控制器中：

```
var addRecord = function(){
    $scope.records.push({id: 10}); // change to generate your own id
}; 
```

# maven - 你如何处理同一个 jar 的多个版本？

> ID：16078700
> 
> 赞同：1
> 
> 时间：2013-04-18T09:05:05.240
> 
> 标签：maven, ant, ivy

我使用 Apache_Gora_0.2.1 和 Apache Nutch_2.1 。

*   Nutch 依赖于 Gora。

*   Gora 有 gora-core 和 gora-hbase 模块。

*   gora-hbase 依赖于 gora-core。

*   Gora 的所有模块都使用 avro_1.3.3.jar 。我想将 avro_1.3.3.jar 用于 gora-core ，将 avro_1.5.3.jar 用于 gora-hbase 。

*   我通过 Maven 成功编译了 Gora，并通过 Ant 和 Ivy 成功编译了 Nutch。

然后似乎是 Nutch 类路径中的两个版本（avro.1.3.3.jar 和 avro.1.5.3.jar）。如果我通过 ivy.xml 排除 avro_1.5.3.jar，gora-hbase 不要使用 avro.1.5.3。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:49:57.537

另一种可能性是将 Nutch 降级到 2.0，因为这适用于 avro 1.3.3。如果我没记错的话，gora-hbase 不适用于 avro 1.5.3，而是 1.3.3。

同时，告诉gora-hbase只使用avro来序列化值……为什么需要它来使用avro 1.5.3？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:56:38.030

当您在类路径中有不同版本的相同 jar 时，您应该避免这种情况。要解决您的问题，您需要找到使用类似 avro 版本的 Apache_Gora_0.2.1 和 Apache Nutch_2.1 版本。尝试使用 Apache Nutch_1.6，因为 Apache_Gora_0.2.1 是最新版本。然后，您排除最低版本并解决您的问题。

# python - PyMC 在 Ubuntu 12.10 上测试

> ID：16078704
> 
> 赞同：1
> 
> 时间：2013-04-18T09:05:12.803
> 
> 标签：python, pymc

我在 Ubuntu 12.10 上安装了 PyMC。

Python 2.7.3 32 位。

当我尝试运行时：

```
import pymc
pymc.test() 
```

我得到：

```
Running unit tests for pymc.tests 
NumPy version 1.7.1 
NumPy is installed in /usr/local/lib/python2.7/dist-packages/numpy 
Python version 2.7.3 (default, Apr 10 2013, 05:13:16) [GCC 4.7.2] 
nose version 1.1.2
----------------------------------------------- Ran 0 tests in 0.000s
OK 
```

我也安装了最新的 HDF5 和 PyTables。

测试不起作用是否有原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T18:22:34.160

这么晚才回复很抱歉。对于旧版本`nose`的 .egg 存档，测试无法运行。您可以尝试解压缩 (-Z) 或使用较新的鼻子安装它们。

# c# - TryParse：出现错误时设置哪个值？

> ID：16078705
> 
> 赞同：0
> 
> 时间：2013-04-18T09:05:13.310
> 
> 标签：c#, .net

int 的 TryParse 方法的签名（其他相同）如下：

```
public static bool TryParse(string s, out int result) 
```

其中“out”表示即使解析不成功，也必须初始化结果。如果解析不成功，是否记录了哪些值 TryParse(s) 设置变量？

如果解析不成功，我需要将一些值初始化为解析值或默认值，在保证默认值的情况下，我什至不需要检查结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T09:06:34.933

> 如果解析不成功，是否记录了哪些值 TryParse(s) 设置变量？

[是的，它已记录在案](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)。

> *结果*
> 当此方法返回时，如果转换成功，则包含与 s 中包含的数字等效的 32 位有符号整数值，如果转换失败，则返回零。

# python - 绘制直方图时某些文本无法完全显示

> ID：16078707
> 
> 赞同：0
> 
> 时间：2013-04-18T09:05:17.837
> 
> 标签：python, matplotlib, histogram

我使用python绘制直方图，使用以下代码从文件'data.txt'中获取数据：

```
#!/usr/bin/env python
from pylab import *

pos = []
val = []
name = []
fd = open('data.txt')
i = 0
for line in fd:
    a = line.split()
    if len(a) < 2:
        continue
    name.append(a[0])
    x = float(a[1])
    val.append(x)
    pos.append(i + 0.5)
    i += 1
fd.close()

plt.figure(1)
rects = barh(pos, val, align='center')
plt.yticks(pos, name)
plt.title('My Diagram I')
plt.savefig('a.png') 
```

data.txt 的内容是：

```
LABEL_001_AAA                       15.365
LABEL_0027                          8.640
LABEL_CEVZX                         1.639
LABEL4                              4.064
LABEL_NV_0                          4.032
LABEL_7                             10.032 
```

但是输出的图片有一些文字超出了左边缘，无法完全显示。我该如何解决这个问题？

# bash - 一段时间后终止输出重定向的 Bash 脚本

> ID：16078712
> 
> 赞同：2
> 
> 时间：2013-04-18T09:05:41.310
> 
> 标签：bash, timeout, kill

我正在寻找一种轻量级的解决方案，以在挂起时通过输出重定向终止命令。我目前的解决方案

```
if [[ -w /tmp/mypipe ]]; then
  timeout --kill-after 10 5 echo "1" > /tmp/mypipe
fi 
```

仅当命令的左侧部分不能正常工作时才有效（例如，没有人从管道中读取）。但是我发现了重定向挂起的情况——这至少是任务不完全同步的问题，我现在无法解决。

有几个相关的问题，如[this](https://stackoverflow.com/questions/5161193/bash-script-that-kills-a-child-process-after-a-given-timeout)、[this](https://stackoverflow.com/questions/10224939/bash-run-a-process-for-limited-time-period?lq=1)或[that](https://stackoverflow.com/questions/7851889/kill-process-after-a-given-time-bash)。最后一个主要涵盖了我的问题，但我仍在寻找更苗条的解决方案。它建议像这样工作

```
( CMDPID=$BASHPID; \
  (sleep 5; kill -9 $CMDPID >& /dev/null) & echo "1" > /tmp/mypipe ) 
```

但这会产生两个新的 bash 进程。有没有更轻量级的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T20:01:40.453

请记住，每个生成的 bash 进程都将与父进程共享其绝大多数内存，因此它不会像 top 让您相信的那样将内存使用量增加三倍。

如果您仍想尝试优化，`timeout 5 tee /tmp/mypipe <<< "1" > /dev/null`则会产生一个超时和一个 tee 进程。

# android - 修改 Coverflow 以使用 xml 文件

> ID：16078716
> 
> 赞同：0
> 
> 时间：2013-04-18T09:05:48.043
> 
> 标签：android

在我的应用程序中，我想修改这个封面流，以便我可以使用 xml 文件。汇流如下。当我改变下面的coverflow

```
ConverFlow cf = new Coverflow(this); 
```

至

```
CoverFlow cf = new CoverFlow(R.id.coverflowReflect); 
```

我收到此错误： ![在此处输入图像描述](https://i.stack.imgur.com/R7cC2.png) **构造函数 CoverFlow(int) 未定义**

我为这个问题做了 3 个修复。

第一个是改变构造函数

```
public CoverFlow(Context context) {
        super(context);
        this.setStaticTransformationsEnabled(true);
    } 
```

至

```
public CoverFlow(int coverflowreflect) {
        super(coverflowreflect);
        this.setStaticTransformationsEnabled(true);
    } 
```

但我在我的coverflow类中出现错误说

构造函数 Gallery(int) 未定义。

这是我的 CoverFlow 课程：

```
 public class CoverFlow extends Gallery {

        private Camera mCamera = new Camera();
        private int mMaxRotationAngle = 0;
        private int mMaxZoom = -380;
        private int mCoveflowCenter;
        private boolean mAlphaMode = true;
        private boolean mCircleMode = false;
        public CoverFlow(Context context) {
            super(context);
            this.setStaticTransformationsEnabled(true);
        }
        public CoverFlow(Context context, AttributeSet attrs) {
            super(context, attrs);
            this.setStaticTransformationsEnabled(true);
        }
        public CoverFlow(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            this.setStaticTransformationsEnabled(true);
        }
        public int getMaxRotationAngle() {
            return mMaxRotationAngle;
        }
        public void setMaxRotationAngle(int maxRotationAngle) {
            mMaxRotationAngle = maxRotationAngle;
        }
        public boolean getCircleMode() {
            return mCircleMode;
        }
        public void setCircleMode(boolean isCircle) {
            mCircleMode = isCircle;
        }
        public boolean getAlphaMode() {
            return mAlphaMode;
        }
        public void setAlphaMode(boolean isAlpha) {
            mAlphaMode = isAlpha;
        }
        public int getMaxZoom() {
            return mMaxZoom;
        }
        public void setMaxZoom(int maxZoom) {
            mMaxZoom = maxZoom;
        }
        private int getCenterOfCoverflow() {
            return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2
                    + getPaddingLeft();
        }
        private static int getCenterOfView(View view) {
            return view.getLeft() + view.getWidth() / 2;
        }
        protected boolean getChildStaticTransformation(View child, Transformation t) {
            final int childCenter = getCenterOfView(child);
            final int childWidth = child.getWidth();
            int rotationAngle = 0;
            t.clear();
            t.setTransformationType(Transformation.TYPE_MATRIX);
            if (childCenter == mCoveflowCenter) {
                transformImageBitmap((ImageView) child, t, 0);
            } else {
                rotationAngle = (int) (((float) (mCoveflowCenter - childCenter) / childWidth) * mMaxRotationAngle);
                if (Math.abs(rotationAngle) > mMaxRotationAngle) {
                    rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle
                            : mMaxRotationAngle;
                }
                transformImageBitmap((ImageView) child, t, rotationAngle);
            }
            return true;
        }
        /**
         * This is called during layout when the size of this view has changed. If
         * you were just added to the view hierarchy, you're called with the old
         * values of 0.
         * 
         * @param w
         *            Current width of this view.
         * @param h
         *            Current height of this view.
         * @param oldw
         *            Old width of this view.
         * @param oldh
         *            Old height of this view.
         */
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            mCoveflowCenter = getCenterOfCoverflow();
            super.onSizeChanged(w, h, oldw, oldh);
        }
        /**
         * Transform the Image Bitmap by the Angle passed
         * 
         * @param imageView
         *            ImageView the ImageView whose bitmap we want to rotate
         * @param t
         *            transformation
         * @param rotationAngle
         *            the Angle by which to rotate the Bitmap
         */
        private void transformImageBitmap(ImageView child, Transformation t,
                int rotationAngle) {
            mCamera.save();
            final Matrix imageMatrix = t.getMatrix();
            final int imageHeight = child.getLayoutParams().height;
            final int imageWidth = child.getLayoutParams().width;
            final int rotation = Math.abs(rotationAngle);
            mCamera.translate(0.0f, 0.0f, 100.0f);
            // As the angle of the view gets less, zoom in
            if (rotation <= mMaxRotationAngle) {
                float zoomAmount = (float) (mMaxZoom + (rotation * 1.5));
                mCamera.translate(0.0f, 0.0f, zoomAmount);
                if (mCircleMode) {
                    if (rotation < 40)
                        mCamera.translate(0.0f, 155, 0.0f);
                    else
                        mCamera.translate(0.0f, (255 - rotation * 2.5f), 0.0f);
                }
                if (mAlphaMode) {
                    ((ImageView) (child)).setAlpha((int) (255 - rotation * 2.5));
                }
            }
            mCamera.rotateY(rotationAngle);
            mCamera.getMatrix(imageMatrix);

            imageMatrix.preTranslate(-(imageWidth ), -(imageHeight / 2));
            imageMatrix.postTranslate((imageWidth ), (imageHeight / 2));

            mCamera.restore();
        }
    }

And this is where i made the call the activity

public class CoverFlowActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       int pixels = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 60, getResources().getDisplayMetrics());
        CoverFlow cf = new CoverFlow(this);
        ImageAdapter ia = new ImageAdapter(this);
        cf.setAdapter(ia);
        cf.setAnimationDuration(1000);
        cf.setSpacing(pixels);
        setContentView(cf);

    }

    public class ImageAdapter extends BaseAdapter {

        private int[] mImgs = {
                R.drawable.img1,
                R.drawable.img2,
                R.drawable.img3,
                R.drawable.img4,
                R.drawable.img5,
                R.drawable.img6,
                R.drawable.img7,
                R.drawable.img8
        };
        Context mContext;

        public ImageAdapter(Context context) {
            this.mContext = context;
        }
        @Override
        public int getCount() {
            return mImgs.length;
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return mImgs[position];

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ReflectionImage i = new ReflectionImage(mContext);

            i.setImageResource(mImgs[position]);
            i.setLayoutParams(new CoverFlow.LayoutParams(160, 160));
            i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
            BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
            drawable.setAntiAlias(true);

            return i;
        }

        public float getScale(boolean focused, int offset) {
            return Math.max(0, 1f/(float)Math.pow(2, Math.abs(offset)));
        }

    }
} 
```

第二个选项是将构造函数流更改为

```
public CoverFlow(int defStyle) {
super(context, attrs, defStyle);
... again Coverflow give an error. 
```

构造函数 overflow(int) 未定义。

是否有人遇到同样的问题，我的意思是我想让这个活动与我的 xml 布局一起工作，但不是像现在这样以编程方式工作。请帮忙

**更新：应用本杰明回答后，我收到以下错误，这是我的日志。

注意：第 32 行：setContentView(coverFlow); **

```
04-18 13:22:42.812: E/AndroidRuntime(4096): FATAL EXCEPTION: main
04-18 13:22:42.812: E/AndroidRuntime(4096): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ufida.coverflow/com.ufida.coverflow.CoverFlowActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.os.Looper.loop(Looper.java:130)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at java.lang.reflect.Method.invoke(Method.java:507)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at dalvik.system.NativeStart.main(Native Method)
04-18 13:22:42.812: E/AndroidRuntime(4096): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.view.ViewGroup.addView(ViewGroup.java:1871)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.view.ViewGroup.addView(ViewGroup.java:1851)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:228)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:218)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.Activity.setContentView(Activity.java:1668)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at com.ufida.coverflow.CoverFlowActivity.onCreate(CoverFlowActivity.java:32)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 13:22:42.812: E/AndroidRuntime(4096):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-18 13:22:42.812: E/AndroidRuntime(4096):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:09:35.640

你不能这样做，`CoverFlow cf = new CoverFlow(R.id.coverflowReflect);`因为你的构造函数`Coverflow`需要一个类型的参数`Context`。

你应该像这样调用构造函数

```
CoverFlow cf = new CoverFlow(this); 
```

如果您将构造函数更改为采用整数参数，那么您不能通过将 int 变量传递给它来调用超类方法，因为`Gallery`类构造函数将参数作为`Context`对象而不是`integer`类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:15:50.983

既然你想从 xml 中得到它，你需要通过 id 找到视图试试这个：

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.yourpackagename.CoverFlow
        android:id="@+id/coverflowid"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

活动：

```
import com.yourpackagename.CoverFlow; // the coverflow class

CoverFlow coverFlow;

public class CoverFlowActivity extends Activity{

//in your oncreate do this: 

coverFlow = (CoverFlow) findViewById(R.id.coverflowid);

} 
```

# weblogic - 关于 Oracle Coherence（和 WLS）

> ID：16078718
> 
> 赞同：1
> 
> 时间：2013-04-18T09:05:51.230
> 
> 标签：weblogic

Coherence 功能似乎基于集群概念。这是否意味着，如果我想在我的系统上安装 WLS 以供开发使用，我不需要 WLS 附带的 Coherence 组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T16:51:31.340

这可能有助于回答这个问题：

*   Coherence 现在与 WebLogic 处于同一“发布列车”上，从版本 WebLogic 版本 12.1.2（这是 WebLogic“12c”主要版本的第二个版本）开始。所以从现在开始，Coherence 和 WebLogic 版本同步，两个产品一起测试和认证。

*   Coherence 是“物理上”包含在某些 WebLogic 安装程序中的。Coherence 可以作为单独的产品购买（三个版本：标准版、企业版、网格版），也可以作为 WebLogic Suite 产品的一部分购买（企业版附带，但可以升级到网格版）。

*   WebLogic 现在有一个免费的开发人员许可证可用，并且该免费的开发人员许可证也涵盖了 Coherence 开发。（以前，客户必须为开发人员许可证付费，主要是 AFAICT，因为这就是数据库的许可方式。我们很高兴解决了这个问题！）

*   WebLogic 可以在没有 Coherence 的情况下使用。Coherence 可以在没有 WebLogic 的情况下使用。这两种产品也可以一起使用，使用 Coherence*Web 进行会话管理，使用 WebLogic Active Cache 进行简单的缓存用例，或使用 Coherence Containers 进行完整的、可部署的、生命周期管理的、集成的多层数据网格应用程序WebLogic 上的 Java EE 应用程序。

我希望这有助于澄清您可能拥有的选项。

*为了全面披露，我在 Oracle 工作。这篇文章中表达的观点和观点是我自己的，并不一定反映我雇主的观点或观点。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:44:24.407

正确，不需要使用 WLS。

# c# - 如何排除我在数据集中获取的 excelsheet 中没有数据的默认命名列

> ID：16078724
> 
> 赞同：0
> 
> 时间：2013-04-18T09:06:05.100
> 
> 标签：c#, asp.net, sql-server-2008

我有一个包含多行和多列的 excel 表，我在我的 .NET 应用程序（使用 C#）的数据集中获取它。当我通过一个简单的 SELECT 查询看到返回的数据集时，excel 表具有我想要的所需列，并且它们之间还有一些空白列，默认情况下被命名为 F1、F2、F3 等。我想要做的是删除这些列，只获取我想要的所需列。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:44:32.090

用 DataTable 和 DataView 试试：

```
DataTable oldTable = dataSet.Tables[0];
DataTable newTable = oldTable.DefaultView.ToTable(false, "Only columns you want", "Only columns you want"); 
```

如果所有列名都是动态的，您可以试试这个：

```
for (int col = dataTable.Columns.Count - 1; col >= 0; col--)
{
  bool removeColumn = true;
  foreach (DataRow row in dataTable.Rows)
  {
    if (!row.IsNull(col))
    {
      removeColumn = false;
      break;
    }
  }
  if (removeColumn)
    dataTable.Columns.RemoveAt(col);
} 
```

或更短的 LinQ 版本：

```
for (var col = dataTable.Columns.Count - 1; col >= 0; col--)
    {
        bool removeColumn = dataTable.Rows.Cast<DataRow>().All(row => row.IsNull(col));
        if (removeColumn)
            dataTable.Columns.RemoveAt(col);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:19:39.823

@Yeronimo

您对动态列的回答工作正常...非常感谢先生...

以及一些可能有帮助的相关文章

[使用asp.net检查excel工作表中的行是否为空](https://stackoverflow.com/questions/14951935/check-if-rows-in-an-excel-sheet-are-empty-with-asp-net)

[转换为 Excel 时从 GridView 中删除列](https://stackoverflow.com/questions/10278510/remove-column-from-gridview-while-converting-to-excel)

[http://www.daniweb.com/software-development/csharp/threads/297806/how-can-i-remove-empty-columns-in-spreadsheet](http://www.daniweb.com/software-development/csharp/threads/297806/how-can-i-remove-empty-columns-in-spreadsheet)

# c# - 如何知道今年到今天的天数

> ID：16078729
> 
> 赞同：2
> 
> 时间：2013-04-18T09:06:15.653
> 
> 标签：c#, days

我想知道从 1 月 1 日到今天的天数。

如果今天是 1 月 10 日，那么`numOfDays=10`，如果今天是 2 月 1 日，那么`numOfDays=32`。

我怎样才能得到总天数？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:07:36.880

您可以使用`DateTime`'`DayOfYear`属性。

```
int dayOfYear = DateTime.Now.DayOfYear; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:07:43.857

[`DateTime.DayOfYear`](http://msdn.microsoft.com/en-us/library/system.datetime.dayofyear.aspx)正是你想要的。

要找出今天是一年中的哪一天：

```
var days = DateTime.Today.DayOfYear; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:08:40.700

这应该给你你正在寻找的东西：

```
int currDayOfYear = DateTime.Now.DayOfYear; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T09:11:48.270

这显示了如何做到这一点。一步一步，使用 DateTime.Now 来获取一个代表当前日期/时间的 DateTime 对象。然后使用 DateTime.DayOfYear 属性。

[http://msdn.microsoft.com/en-us/library/system.datetime.dayofyear.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.dayofyear.aspx)

公共 int DayOfYear { 获取；}

属性值类型：System.Int32 一年中的某一天，表示为 1 到 366 之间的值。

Datetime.Now 解释：http: [//msdn.microsoft.com/en-us/library/system.datetime.now.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)

# c# - 在集合中查找控件 - 事件 ControlAvailable Disabled

> ID：16078731
> 
> 赞同：0
> 
> 时间：2013-04-18T09:06:17.987
> 
> 标签：c#, silverlight, visual-studio-lightswitch

在我的灯开关应用程序中，我需要为每一行添加一个小图像控件，单击它时，它应该将您发送到详细信息屏幕。我制作了 silverlight 控件并将其添加到 lightswitch 应用程序中。

```
 partial void VidContentItemRessources_Loaded(bool succeeded) {
  int index = 0;

  foreach (VidContentItemRessourcesItem cust in this.VidContentItemRessources) {
    this.FindControlInCollection("ImageLinkIcon", this.VidContentItemRessources.ElementAt(index))
      .ControlAvailable += (s, e) => {
        MyLinkImage = (e.Control as LinkImage);
        MyLinkImage.MouseLeftButtonDown += MyLinkImage_MouseLeftButtonDown;

      };
    index++;
  }
} 
```

但是，如果我这样做，我会收到一个错误，即可用的事件控件不能用于集合中的控件..

所以我试着这样做

```
 LinkImage neco = this.FindControlInCollection("ImageLinkIcon", this.VidContentItemRessources.ElementAt(index)) as LinkImage;
    neco.MouseLeftButtonDown += MyLinkImage_MouseLeftButtonDown; 
```

但是 neco 始终为空，因为它试图在控件可用之前加载控件......任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:10:14.977

这些类型的初始化应该放在屏幕的*Created*方法中，这样可以保证屏幕上的所有控件都已创建。如果屏幕的任何方法（如*InitializeDataWorkspace*、*Created*、*Saving*等）不在您的代码文件中，您可以使用屏幕编辑器中的*Write Code下拉框创建它们。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:53:17.190

我这样解决了：我在silverlight控件中捕获点击事件，而不是在lightsiwtch中调用方法

```
 public void MouseClick(object sender, MouseButtonEventArgs e) {
      var objDataContext = (IContentItem)this.DataContext;
      var Screen = (Microsoft.LightSwitch.Client.IScreenObject)objDataContext.Screen;

      Screen.Details.Dispatcher.BeginInvoke(() => {
        Screen.Details.Methods["DoImageLinkEvent"]
              .CreateInvocation(null).Execute();
      });
    } 
```

# php - 来自私有方法的codeigniter回调不起作用

> ID：16078742
> 
> 赞同：1
> 
> 时间：2013-04-18T09:06:41.587
> 
> 标签：php, codeigniter, callback, validation, codeigniter-2

我使用表单验证库和我的自定义回调在 CodeIgniter 中进行表单验证。

```
public function insert_user()
{
    if($this->input->post('submit')) {
        // load form validation library
        $this->load->library('form_validation');

        // configurations
        $config = array(
            array(
                'field' => 'username',
                'label' => 'Username',
                'rules' => 'required|callback_username_check'
            )
        );
        $this->form_validation->set_rules($config);

        // .... continue ....
    }   
} 
```

当方法公开时，它按预期工作。

```
public function username_check($username)
{
    // do some stuffs here
} 
```

当我将方法设为私有时，它不起作用。

```
private function username_check($username)
{
    // do some stuffs here
} 
```

为什么私有方法的回调不起作用？

**为什么我需要这个？**

CodeIgniter 控制器中的公共方法可以通过 URL 访问，例如上面的示例

> [http://example.com/controller_name/username_check/blabla](http://example.com/controller_name/username_check/blabla)

我不希望公开访问回调方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:42:21.300

回调函数必须是公共的。Codeigniter 表单验证类在当前控制器上访问您的函数，因此它可能不是私有的..

要解决您的问题，您可能会考虑使用 My_form_validation 扩展您的 CI_Form_validation 类。

```
class MY_Form_validation extends CI_Form_validation
{
    public function __construct()
    {
       parent::__construct();
    }

    function username_check($str)
    {
      /* your code */
    }

} 
```

然后在您的验证中，您必须只设置..

```
 'rules' => 'required|username_check' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:09:57.157

私有函数只能由类的对象访问。此函数仅在其自己的类中可见。[在此处](https://stackoverflow.com/questions/4361553/php-public-private-protected)阅读有关变量/函数范围的更多信息

# php - SQL 在执行查询时更新同一张表上所有输入错误的条目

> ID：16078743
> 
> 赞同：0
> 
> 时间：2013-04-18T09:06:43.957
> 
> 标签：php, sql, insert

一点帮助，我有一个名为 products 的表，其中包含以下字段

```
[Products]
pid
name
category 
```

问题是在引用同一类别的类别下有很多错误条目。

错误类别的示例：

```
Bags and wallet
Bags and Wallets
Bag and Walles
Bags & Wallets 
```

正确的应该是包和钱包

我想使用带有子查询的单个 SQL 语句来更改所有内容

```
UPDATE products
SET category = 'BAGS & WALLETS'
FROM products 
WHERE category = (select category from products WHERE category like 'BAGS AND WALL') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:11:46.243

你可以实现 MySQL 的`REGEXP`搜索：

```
UPDATE products
SET category = 'BAGS & WALLETS'
FROM products 
WHERE category REGEXP 'BAGS? AND WALL' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T09:08:59.350

查看该`LIKE`子句如何使用通配符`%`：

```
UPDATE products
SET category = 'BAGS & WALLETS'
WHERE UPPER(category) LIKE 'BAGS AND WALL%' 
```

# c - 如何运行混合的 fortran/c 项目

> ID：16078745
> 
> 赞同：1
> 
> 时间：2013-04-18T09:06:45.667
> 
> 标签：c, fortran

我正在尝试运行一个混合了 FORTRAN 和 C 的项目，主程序在 C 中（不是我自己的代码）。

我尝试使用 eclipse 进行并行应用程序，但它无法识别来自 C 的 FORTRAN 子例程的调用。

[然后我尝试在这里](http://software.intel.com/en-us/articles/configuring-visual-studio-for-mixed-language-applications)为混合编程配置 Visual Studio ，但我不知道下一步该做什么，我是否需要在 Fortran IDE 下制作两个单独的项目，一个用于 c，另一个用于 fortran？

任何人都知道我是否需要为 Eclipse 进行一些配置，或者对使用 Visual Studio 进行混合语言应用程序有什么想法？

# css - 在 a 中填充元素 实现一个可点击的框

> ID：16078746
> 
> 赞同：1
> 
> 时间：2013-04-18T09:06:45.827
> 
> 标签：css

在这个网站上：[http ://www.bestcastleintown.co.uk/pg/](http://www.bestcastleintown.co.uk/pg/)

我试图`<div class="awards_square_home">`通过在其中嵌套一个`<a>`标签`<div>`并添加填充来使每个的彩色区域成为一个可点击的链接。但是我已经在 上使用填充`<div>`来定位`<a>`. 使用此规则中的填充：

```
.awards_square_home {
    border: 10px solid rgb(195, 195, 195);
    height: 90px;
    margin-bottom: 20px;
    padding: 90px 20px 20px;
} 
```

现在，当我向元素添加填充时，它不会以我想要的方式传播填充，这是为了使 div 的整个彩色区域都可以点击。

```
.awards_square_home a {
    padding: 120px 0 20px;
} 
```

我正在尝试从`<a>`填充这个区域`<div>`：

![在此处输入图像描述](https://i.stack.imgur.com/C0XIp.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:21:13.447

我相信我已经通过如下修改 CSS 解决了这个问题：

```
.awards_square_home {    
    border: 10px solid #c3c3c3;     
    height: 200px;
    margin-bottom: 20px;
}

.awards_square_home a {
    display:block;
    padding: 90px 0px 20px 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:25:27.223

除了在 parent 上设置 background / padding / height `<div>`，您可以将`<a>`元素设置为像 div 一样，然后将它们设置在那里：

```
a {
  display: block;
  background-image: url("../images/icons/globe_v3.gif");
  background-repeat: no-repeat;
  background-position: 50% 15%;
  padding: 95px 20px 20px 20px;
  height: 90px;
} 
```

不要忘记从它们当前存在的位置删除这些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:08:47.053

为什么你不能添加`<div>`到`<a>`标签中？

```
a {
    display: block;
} 
```

并将您的内容添加到`<a>`标签中。

或者从 div 中删除填充并仅为`<a>`标签设置填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:12:21.430

如果我没有误解你，你希望你的 div 都是可点击的，而不仅仅是文本。

```
<a href="#" class="text220 centertext capitalise_text home_feature_turqoise NG">
    <div class="awards_square_home turqoise podium">
        <span>Best</span>
        <span>University</span>
        <span>Campaign</span>
    </div>
</a> 
```

[在这里提琴](http://jsfiddle.net/VRSJ5/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-18T09:11:01.830

如果你想让 a 填充 div，为什么要在 div 上使用 padding，在 tha a 上使用 margin，唯一的目的是防止 a 填充 div？

删除a上的填充，它应该可以工作

# ios - 如何在我的 NSString 中正确编码 Unicode 字符？

> ID：16078747
> 
> 赞同：2
> 
> 时间：2013-04-18T09:06:47.033
> 
> 标签：ios, objective-c, unicode, nsstring, uitextfield

# 问题陈述

我创建了许多字符串，将它们连接成 CSV 格式，然后将字符串作为附件通过电子邮件发送。

当这些字符串仅包含 ASCII 字符时，将正确构建 CSV 文件并通过电子邮件发送。当我包含非 ASCII 字符时，结果字符串格式不正确，并且 CSV 文件未正确创建。（电子邮件视图显示附件，但未发送。）

例如，这有效：

```
uncle bill's house of pancakes 
```

但这不是（注意卷曲撇号）：

```
uncle bill’s house of pancakes 
```

## 问题

如何正确创建和编码最终字符串，以便包含所有有效的 unicode 字符并正确形成结果字符串？

# 笔记

*   字符串是通过 UITextField 创建的，然后写入核心数据存储区，然后再从核心数据存储区读取。

*   这表明问题在于字符串的初始创建和编码：**[NSString unicode encoding problem](https://stackoverflow.com/questions/5447413/nsstring-unicode-encoding-problem)**

*   我不想这样做：**[在objective-c中从NSString中删除非ASCII字符](https://stackoverflow.com/questions/6361586/remove-non-ascii-characters-from-nsstring-in-objective-c)**

*   字符串被写入数据存储并从数据存储中读取。字符串在应用程序的表格视图中正确（单独）显示。该问题仅在将电子邮件附件的字符串连接在一起时才会出现。

### 字符串处理代码

我像这样将我的字符串连接在一起：

```
[reportString appendFormat:@"%@,", category];
[reportString appendFormat:@"%@,", client];
[reportString appendFormat:@"%@\n", detail];
etc. 
```

用无聊的引号替换大引号使其工作，但我不想这样做：

```
- (NSMutableString *)cleanString:(NSString *)activity {
    NSString *temp1 = [activity stringByReplacingOccurrencesOfString:@"’" withString:@"'"];
    NSString *temp2 = [temp1 stringByReplacingOccurrencesOfString:@"‘" withString:@"'"];
    NSString *temp3 = [temp2 stringByReplacingOccurrencesOfString:@"”" withString:@"\""];
    NSString *temp4 = [temp3 stringByReplacingOccurrencesOfString:@"“" withString:@"\""];
    return [NSMutableString temp4];
} 
```

**编辑：** 电子邮件已发送：

```
 NSString *attachment = [self formatReportCSV];
    [picker addAttachmentData:[attachment dataUsingEncoding:NSStringEncodingConversionAllowLossy] mimeType:nil fileName:@"MyCSVFile.csv"]; 
```

where`formatReportCSV`是连接并返回 csv 字符串的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:22:10.237

您似乎遇到了字符串编码问题。在没有看到您的核心数据模型是什么样子的情况下，我认为问题归结为以下代码重现的问题。

```
NSString *string1 = @"Uncle bill’s house of pancakes.";
NSString *string2 = @" Appended with some garbage's stuff.";
NSMutableString *mutableString = [NSMutableString stringWithString: string1];
[mutableString appendString: string2];
NSLog(@"We got: %@", mutableString);
// We got: Uncle bill’s house of pancakes. Appended with some garbage's stuff.

NSData *storedVersion = [mutableString dataUsingEncoding: NSStringEncodingConversionAllowLossy];
NSString *restoredString = [[NSString alloc] initWithData: storedVersion encoding: NSStringEncodingConversionAllowLossy];
NSLog(@"Restored string with NSStringEncodingConversionAllowLossy: %@", restoredString);
// Restored string with NSStringEncodingConversionAllowLossy: 

storedVersion = [mutableString dataUsingEncoding: NSUTF8StringEncoding];
restoredString = [[NSString alloc] initWithData: storedVersion encoding: NSUTF8StringEncoding];
NSLog(@"Restored string with UTF8: %@", restoredString);
// Restored string with UTF8: Uncle bill’s house of pancakes. Appended with some garbage's stuff. 
```

请注意第一个字符串（使用 ASCII 编码）如何无法处理非 ASCII 字符的存在（如果`dataUsingEncoding:allowsLossyConversion:`与第二个参数一起使用它可以`YES`）。

这段代码应该可以解决这个问题：

```
NSString *attachment = [self formatReportCSV];
[picker addAttachmentData:[attachment dataUsingEncoding: NSUTF8StringEncoding] mimeType:nil fileName:@"MyCSVFile.csv"]; 
```

注意：如果您需要处理日语等非 UTF8 语言，您可能需要使用其中一种 UTF16 字符串编码。

# c# - 如何命名一个唯一目的是返回布尔值的类

> ID：16078752
> 
> 赞同：1
> 
> 时间：2013-04-18T09:06:58.453
> 
> 标签：c#, .net, naming-conventions

我有一个班级，其唯一职责是告诉我远程命令是否已返回`yes`，或者`no`我不知道如何命名它。

更具体地说，我的应用程序是 Linux 命令集合的前端。我们通过 SSH 与 Linux 通信。每个业务操作（例如 GetItem、CreateItem、GetItemCount 等）都映射到一个**Command**类。每个**Command**类都派生自一个处理所有通信细节的基础 SSH **Command**类。

我最新的**命令**是检查远程文件是否属于某种类型（我们称之为涂鸦类型）。为此，远程文件通过远程程序运行，如果该程序在控制台上返回 1 行或更多行，则该文件是 Doodle。

现在我正在为如何命名我的班级而苦苦挣扎。

如果它是一个方法而不是一个类，我会调用它`IsDoodle`。但是因为该类涉及从远程位置获取信息并且还派生自**Command**基类，所以我很想使用`GetIsDoodleCommand`.

有什么想法吗？

### 更新

虽然我理解使用的建议，但`CommandResult`我认为它不符合我们使用的现有模式。或者我不明白！无论哪种方式，我认为我最初的问题可以从更多细节中受益：

*   基类是抽象的，并且有一个抽象`Execute`方法
*   派生的**Command**类负责实现`Execute`
*   基类是 Generic ( `public class CommandBase<T>`)
*   的返回类型`Execute`是`T`

所以派生类的典型用法是：

```
var nameMeCommand = new NameMeCommand();
bool isDoodle = nameMeCommand.Execute();

var getItemCommand = new GetItemCommand();
Item myItem = getItemCommand.Execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:26:08.820

我会用`IsDoodleCommandResult`.

# c++ - cocos2dx中CCCallFunc的使用

> ID：16078753
> 
> 赞同：1
> 
> 时间：2013-04-18T09:07:05.247
> 
> 标签：c++, cocos2d-x

我在这一行收到警告，指出方法 actionWithTarget 已被弃用。谁能告诉 cocos2dx 中可以使用哪种替代方法

```
CCCallFunc *callBackfunc = CCCallFunc::actionWithTarget(this,
                           callfunc_selector(GamePlay::startTrumphetAnimation)); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:11:30.050

尝试这个：

```
CCCallFunc *func = CCCallFunc::create(this, callfunc_selector(GameOverScene::MyFunction)); 
```

//也声明这个函数

```
void GameOverScene::MyFunction(CCObject* sender) 
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T09:41:33.740

如果您使用的是新版本的 Cocos2dx ，

```
auto funcCallAction = CallFunc::create([=](){
    // TODO: do you stuff here
    startTrumphetAnimation();
});

runAction(funcCallAction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T16:45:01.263

尝试这个

```
CCCallFunc *calFunc = CCCalFunc::create(this,callfunc_selector(ClassName::methodName)); 
```

如果您使用的是 cocos2dx v3：

```
CallFunc *calFunc = CalFunc::create(CC_CALLBACK_1(ClassName::methodName,this));

void ClassName::methodName(Ref* sender)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T06:29:10.693

这样写函数定义

无效 GamePlay::startTrumphetAnimation(CCObject* 发件人) {

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-05T01:42:15.087

如果您使用的是 COCOS2DX-3.0 或 3.14v

```
runAction( CallFunc::create([=]() { startTrumphetAnimation() })); 
```

但是你应该在 GamePlay 类的任何方法中写下这一行。

# php - PHP Simple HTML DOM Parser 查找具有多个属性的元素

> ID：16078754
> 
> 赞同：0
> 
> 时间：2013-04-18T09:07:09.983
> 
> 标签：php, web-scraping, simple-html-dom

我正在使用简单的 HTML DOM 解析器，但无法弄清楚如何获得以下内容：

想象一下我有这个：

```
<td style"color:#e05206" width"22" height="58">OK</td>
<td style"color:#e05206" width"22" height="58" align="center">NOT OK</td>
<td style"color:#ffffff" width"22" height="58">NOT OK</td> 
```

我想好起来。

我试过这样的事情：

```
$results = $html->find('td[style*=color:#e05206], td[width*="22"], td[height*=58], td[!align]'); 
```

我认为这将是正确的答案，但事实并非如此，因为它适用于 an`OR`而不是`AND`.

我只想得到好的而不是所有的元素。总而言之，我想要具有 V AND X AND Y AND NOT Z 的 td。这可能吗？

感谢您的回答！

**更新：** 我不是在寻找好，它可能是其他任何东西。我正在寻找具有属性 V=something AND X=something AND Y=something AND NOT Z 的 td。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:23:26.453

```
var OkElement = new Array();
$("table tr").find("td").each(function(){
   tdValue = $(this).text();
   if(tdValue == "OK"){
      OkElement.push($(this).attr('id');
   }
}); 
```

解释：这里我们循环所有的 td DOM 元素，然后检查 OK 值。对于每个循环，这表示当前的 td 元素并获取 td 值并检查文本值是否正常，如果它是正常值，那么我们将 td 元素 ID 推入数组。最后，数组仅包含包含 OK 文本的 td 元素 ID。注意：您应该为每个 td 元素提供唯一的 id。

```
 <td id="x1" style"color:#e05206" width"22" height="58">OK</td>
    <td id="x2" style"color:#e05206" width"22" height="58" align="center">NOT OK</td>
    <td id="x3" style"color:#ffffff" width"22" height="58">NOT OK</td> 
```

因为即使您正在获取 td 元素，您也无法在没有 id 的情况下操作相应的 td 元素。现在您将在 OkElement Array 中获得 x1 现在您可以根据需要操作该 div 示例

```
for(var i=0;i<OkElement.length;i++){
    $("#"+OkElement[i]).attr('style','background-color : red');
} 
```

在我的示例中，我为具有 OK 的 td 元素应用背景颜色红色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:08:34.823

```
var OkElement = new Array();
$("table tr").find("td").each(function(){
   tdValue = $(this).text();
   if(tdValue == "OK"){
      OkElement.push($(this).css('color')
   }
});

Explanation : Here We are looping all the td DOM Elements and then checking for OK Value.
    for Each loop this indicates current td elements and getting the td value and checking whether text value is OK or not if it is OK value then we pushing the td elemtnt color style into array...
    Finally array contains only #e05206 which contains OK text. 

    Now you will get #e05206 in OkElement Array now you can manipulate that tds as you wish
    Example 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:56:18.357

理想情况下，您希望能够通过以下方式获得：

```
'td:not([align])[style="color:#e05206"]' 
```

或者

```
'td[style="color:#e05206"]:not([align])' 
```

你不能用简单的 html dom 做到这一点，因为*它很简单。*

好消息是您可以使用 phpquery 来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:27:37.883

好的，这就是我所做的。

我使用了 ganon 库。

```
$results = $html('td[style + width + height + !align]'); 
```

该库几乎可以处理所有事情。

[https://code.google.com/p/ganon/](https://code.google.com/p/ganon/)

# java - 为什么我在使用此 Java 代码时收到此错误？

> ID：16078771
> 
> 赞同：-9
> 
> 时间：2013-04-18T09:07:58.567
> 
> 标签：java

这是文件的开头。它的命名正确，所有类都已定义，但它给了我一个错误。

> 错误：“{”预期；（在我给定代码的第一行）

```
public class ClassRoster extends Student extends Belt
{ 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:11:00.733

你不能有“扩展学生扩展腰带”。您不能扩展 2 个类，因为不支持多重继承（如果可以的话，它会用逗号分隔，就像使用工具一样）。

你可以做的是：

```
public class ClassRoster extends Student 
```

你的学生课延伸了腰带

```
public class Student extends Belt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:11:46.593

java中没有多重继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:14:28.397

你试图打破java的基本原则。

Java的继承特性不允许多重继承。这意味着您不能同时“扩展”两个类，但如果您可以“实现”两个以上的“接口”。

请点击[此链接](http://javapapers.com/core-java/why-multiple-inheritance-is-not-supported-in-java/)以获取更多信息。

希望我能够解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:09:53.663

您根本不能扩展一个以上的类。Java 中没有多重继承。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T09:10:01.763

您不能在 Java 中扩展两个类。任何一个

```
public class ClassRoster extends Student{ 
```

或者

```
public class ClassRoster extends Belt { 
```

但是，如果您两者都想要，那么请选择基于接口的实现

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T09:10:12.843

Java 不支持扩展多个类，因此只`extends`允许一个类

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T09:10:36.763

在 java 中，你不能扩展一个以上的 java 类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-18T09:10:38.497

鉴于 Java 只支持单继承，第二个`extends`是导致问题的原因。

也就是说，您只能从另一个类扩展一个类。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T09:10:39.033

Java 不支持多重继承。你有 2 个`extends`陈述。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-18T09:12:36.847

您不能两次使用 extend 关键字，因为 Java 不支持多重继承。如果 Belt 是一个接口，那么你必须写：

```
public class ClassRoster extends Student implements Belt {} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-18T09:17:33.117

`extends`我认为您对and`implements`关键字有误解

您只能扩展一个类，即称为超类

# git-svn - 如何使用 git-svn 仅恢复一个文件的更改？

> ID：16078772
> 
> 赞同：0
> 
> 时间：2013-04-18T09:07:59.473
> 
> 标签：git-svn

我损坏了一个文件，我想恢复它。我的项目正在使用 git-svn。那么我怎样才能恢复这个特定的文件呢？如果我可以查看此文件的整个更改集，甚至更好。

详细步骤将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:54:21.767

```
git revert SHA1_OF_FAULTY_COMMIT 
```

添加回更改但不提交

```
git cherry-pick -n SHA1_OF_FAULTY_COMMIT 
```

修改需要修改的，例如

```
git reset HEAD file_that_should_not_have_been_modified 
```

犯罪

```
git commit -m "to_be_merged" 
```

压扁这两个提交，发表有意义的评论。

```
git rebase -i HEAD~2 
```

查看您的更改，它应该只包含对您的单个文件的修改：

```
git show 
```

您现在可以将其推送到 svn

```
git svn dcommit 
```

# java - 使用 emma、junit 和 ant 没有运行时覆盖

> ID：16078776
> 
> 赞同：1
> 
> 时间：2013-04-18T09:08:16.097
> 
> 标签：java, ant, junit, emma

我有以下项目结构：

*   src/com/dummy/abc.java
*   src_tests/come/dummy/abcTest.java
*   构建.xml

我需要通过使用 emma 的测试来检查我的代码的覆盖率。通过阅读 emma + junit 示例，我得出一个结论，要获得报告，我需要执行以下操作：

1.  编译'src'
2.  编译'src_tests'
3.  仪器编译的 'src_tests' => 'instrumented_src_tests'
4.  使用附加 jvmarg 在“instrumented_src_tests”上运行 junit

问题是步骤 4 应该返回某种文件，然后与“report”命令一起使用应该创建一个报告。我越来越

```
emma-report:
   [report] processing input files ...
   [report] 1 file(s) read and merged in 67 ms
   [report] nothing to do: no runtime coverage data found in any of the data files 
```

~ 编辑我附上我的 build.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="HELL scream" default="all" basedir=".">
    <property name="build.sources.dir" location="${basedir}/src"/>
    <property name="build.sources.des" location="${basedir}/bin/classes"/>
    <property name="test.sources.dir" location="${basedir}/src_test"/>
    <property name="test.sources.des" location="${basedir}/bin/classes_test"/>
    <property name="test.reports.des" location="${basedir}/reports-junit"/>
    <property name="emma.sources.des" location="${basedir}/bin/classes_emma"/>
    <property name="emma.reports.des" location="${basedir}/reports-emma"/>
    <property name="emma.final.reports.des" location="${basedir}/reports-emma/final"/>
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <path id="emma.lib" >
        <fileset dir="/home/user1/Desktop/emma-2.0.5312/lib">
            <include name="*.jar"/>
        </fileset>
    </path>

    <taskdef resource="emma_ant.properties" classpathref="emma.lib" />
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <target name="clean-all">
        <delete failonerror="false">
            <fileset dir="${emma.final.reports.des}"/>
            <fileset dir="${emma.reports.des}"/>
            <fileset dir="${emma.sources.des}"/>
            <fileset dir="${test.reports.des}"/>
            <fileset dir="${test.sources.des}"/>
            <fileset dir="${build.sources.des}"/>
        </delete>
    </target>
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <target name="compile-sources">
        <mkdir dir="${build.sources.des}"/>
        <javac srcdir="${build.sources.dir}" includes="" excludes="" destdir="${build.sources.des}" listfiles="true" debug="true" includeantruntime="false"/>
    </target>  
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->   
    <target name="compile-tests">
        <mkdir dir="${test.sources.des}"/>
        <javac srcdir="${test.sources.dir}" includes="" excludes="" destdir="${test.sources.des}" listfiles="true" debug="true" includeantruntime="false">
            <classpath>
                <pathelement location="/home/user1/Desktop/junit-4.10.jar"/>
                <pathelement location="${build.sources.des}"/>
            </classpath>
        </javac>
    </target> 
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <target name="compile-emma-tests">
        <emma enabled="true" >
            <instr instrpath="${test.sources.des}" destdir="${emma.sources.des}" metadatafile ="${emma.reports.des}/instrumentation.emma" merge ="true"/>
        </emma>
    </target>
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ --> 
    <target name="run-tests">
        <mkdir dir="${test.reports.des}"/>
        <junit haltonfailure="no" showoutput="yes" printsummary="true">            
            <formatter type="plain" usefile="false" />
            <formatter type="xml"/>
            <classpath>
                <pathelement location="/home/user1/Desktop/junit-4.10.jar"/>
                <pathelement location="${build.sources.des}"/>  
                <pathelement location="${emma.sources.des}"/>                
                <path refid="emma.lib" />
            </classpath>

            <batchtest todir="${test.reports.des}" fork="true">
                <fileset dir="${emma.sources.des}"/>
            </batchtest>                       

            <jvmarg value="-Demma.coverage.out.file=${emma.reports.des}/coverage.emma" />
            <jvmarg value="-Demma.coverage.out.merge=false" />
        </junit>            
    </target>
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <target name="junit-tests-report">
        <junitreport todir="${test.reports.des}">
            <fileset dir="${test.reports.des}">
                <include name="TEST-*.xml"/>
           </fileset>

           <report format="frames" todir="${test.reports.des}/junit_reports"/>
       </junitreport>
    </target> 
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <target name="emma-tests-report">
        <emma enabled="true" >
            <report sourcepath="${build.sources.dir}">    
                <fileset dir="${emma.reports.des}" >
                    <include name="*.emma" />
                </fileset>

                <txt outfile="${emma.final.reports.des}/coverage.txt" depth="package" columns="class,method,block,line,name" />
                <xml outfile="${emma.final.reports.des}/coverage.xml" depth="package" />
                <html outfile="${emma.final.reports.des}/coverage.html" depth="method" columns="name,class,method,block,line" />
            </report>
        </emma>
    </target>
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <target name="all" depends="clean-all, compile-sources, compile-tests, compile-emma-tests, run-tests, junit-tests-report, emma-tests-report"/>
</project> 
```

这可能是微不足道的......

另外，当使用 emma.sources.dest 我在我的（唯一）测试中得到这个

```
run-tests:
    [junit] Running com.emma.test.MathTest
    [junit] Testsuite: com.emma.test.MathTest
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
    [junit] 
    [junit]     Caused an ERROR
    [junit] Illegal local variable table length 5 in method com.emma.test.MathTest.<init>()V
    [junit] java.lang.ClassFormatError: Illegal local variable table length 5 in method com.emma.test.MathTest.<init>()V
    [junit]     at java.lang.Class.forName0(Native Method)
    [junit]     at java.lang.Class.forName(Class.java:188)
    [junit] 
    [junit] Test com.emma.test.MathTest FAILED 
```

〜解决添加这个：

```
<jvmarg value="-XX:-UseSplitVerifier"/>
<jvmarg value="-Demma.coverage.out.file=${emma.reports.des}/coverage.emma" />
<jvmarg value="-Demma.coverage.out.merge=false" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:04:11.670

Emma 自 2005 年以来一直没有稳定的版本，并且不能很好地与较新版本的 JDK 配合使用。[自2011 年](http://sourceforge.net/p/cobertura/code/795/log/?path=/trunk)以来，Cobertura 没有进行任何新的开发。因此，我不再向开发人员推荐使用 Emma 或 Cobertura。

我已经切换到[JaCoCo](http://www.eclemma.org/jacoco/trunk/index.html)进行代码覆盖。它由 Emma Eclipse 团队发起，并正在积极开发中。

正如 JaCoCo 的[使命宣言](http://www.eclemma.org/jacoco/trunk/doc/mission.html)中所述。

> [...] EMMA 和 Cobertura 是两个最好的和广泛使用的开源工具。这两个工具不再由原作者积极维护，也不支持当前的 Java 版本。由于缺乏回归测试，维护和功能添加很困难。
> 
> 因此，我们启动了 JaCoCo 项目，为基于 Java VM 的环境中的代码覆盖率分析提供一种新的标准技术。[...]

JaCoCo 的好处在于它可以在多种环境中工作，而且您不必在编译后检测代码。在执行测试时进行检测。它看起来像这样：

```
<jacoco:coverage destfile="${target.dir}/jacoco.exec">
    <junit>
        [...]
    </junit>
</jacoco> 
```

然后用于`<jacoco:coverage>`打印覆盖率报告。

你必须使用艾玛吗？如果没有，你可能会更好地使用 JaCoCo 让一切正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:05:03.580

Emma 依赖于字节码注入（如果记忆对我有用的话）；但是，在 Java 7 中，代码还没有更新，因为 JVM 现在有一个调试接口。

JaCoCo 通过附加到调试接口并在您的代码进入方法并在不注入检查点的情况下通过字节码时进行监听来测试代码覆盖率。这显然是更好的做事方式（现在它已经存在），我怀疑 Emma 是否会全力支持 Java 7。

我建议你“升级”到 JaCoCo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T18:28:51.850

当您使用错误的命令生成报告时，您会收到此错误。大多数在线教程都在提倡错误的（可能是旧的）命令，即使我在使用以下命令生成报告时也遇到了这个错误：

{JAVA_HOME}\jre\lib\ext>java -cp emma.jar emma report -r html -in coverage.em, {ALFRESCO_HOME}\coverage.ec EMMA: 处理输入文件 ... EMMA: 1 个文件已读取并在 60 毫秒内合并 EMMA：无事可做：在任何数据文件中都找不到运行时覆盖数据

命令的正确用法是： **{JAVA_HOME}\jre\lib\ext>java -cp emma.jar emma report -r txt,html -in {JAVA_HOME}\jre\lib\ext\coverage.em -in C:\ t1_tempSetup\Alfresco\coverage.ec** EMMA：处理输入文件 ... EMMA：在 70 毫秒内读取和合并 2 个文件 EMMA：将 [txt] 报告写入 [{JAVA_HOME}\jre\lib\ext\coverage.txt ] ... EMMA：将 [html] 报告写入 [{JAVA_HOME}\jre\lib\ext\coverage\index.html] ...

# xcode - 在 OSX Mountain Lion 中使用 Qt 运行 mach_inject

> ID：16078780
> 
> 赞同：0
> 
> 时间：2013-04-18T09:08:35.743
> 
> 标签：xcode, macos, qt, compiler-construction, osx-mountain-lion

在**OSX Mountain Lion**上，我能够编译`mach_inject`并包含测试项目。这可以按预期工作，注射功能完美。

我现在正在尝试使用`mach_inject`Qt 项目中的相同框架，该框架是从**QtCreator**编译的。我已经尝试过 clang 和 gcc 编译器。

一切都编译并且应用程序运行，但是当调用 mach_inject 时，我得到了错误：

```
mach_inject failing.. (os/kern) invalid address 
```

跟踪`mach_inject`，失败发生在最后一步，当它调用`thread_create_running`.

有谁知道这里有什么问题？我假设这与 Qt 提供的编译器选项与 XCode 使用的编译器选项有关，但可能完全错误！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:40:45.267

问题原来是 32 / 64 位不兼容 - 因为（自然）您不能将 64 位捆绑包注入 32 位应用程序！

如果其他人有类似的问题，可以使用调试到 mach_inject_bundle_stub 中，因为由于其他问题可能会出现来自内核的相同错误。

# python - 如何检查模型中的特定字段更改？

> ID：16078791
> 
> 赞同：2
> 
> 时间：2013-04-18T09:09:07.553
> 
> 标签：python, django, orm, signals, django-signals

我有我的`models.py`：

```
class Hotel(models.Model):
    name = models.CharField(max_length=20)
    currency = models.ForeignKey(Currency)

class Currency(models.Mode):
    code = models.CharField(max_length=3)
    name = models.CharField(max_length=10) 
```

每当`currency`酒店领域发生变化时，我都需要能够做点什么。所以我有一个类似的功能：

```
@receiver(pre_save,sender=Hotel)
def update_something(sender,**kwargs)
    obj = kwargs['instance']
    old_object = Hotel.objects.get(pk=obj.pk)
    '''
     Now I can do anything here comparing the oldo  object with the instance
    ''' 
```

问题是我不想对此进行查询，因为那时信号的目的变得愚蠢，我变得愚蠢。

所以我应该能够做类似的事情：

```
updated = kwargs['update_fields']
new_currency = updated['currency'] 
```

他们是一种方式，我可以找出*仅*针对一个特定字段的更改`currency`，而不是进行这样的查询。我想`currency`在保存之前获取与外键相关的更改并更新内容。

对不起，我的英语不好，不能使用太专业的术语。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:47:09.653

信号的重点是更好的解耦——允许其他应用程序（你不一定知道）透明地挂接到你的应用程序和/或避免应用程序之间的循环依赖。在 afaik 中使用信号确实没有意义（除非信号处理程序在另一个应用程序中，并且您不希望具有`Hotel`和`Currency`模型的应用程序依赖于另一个应用程序）。

回答您的问题：进行查询以检索原始状态是比较存储值和当前值的唯一方法。现在，如果您只对一个特定领域感兴趣，您当然不必检索整个模型实例 - 只需使用`queryset.values_list`：

```
old_currency = Hotel.objects.filter(pk=obj.pk).values_list("currency", flat=True)[0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T12:02:19.533

相当hacky的解决方案是在初始化时保存对象状态。

```
from django.forms.models import model_to_dict

class Currency(models.Mode):
    code = models.CharField(max_length=3)
    name = models.CharField(max_length=10)

    def __init__(self):
        super(Currency, self).__init__()
        self.__state = model_to_dict(self)

    def updated(self):
        new_state = model_to_dict(self)
        return dict(set(self.__state.iteritems()) - set(new_state.iteritems())) 
```

方法`updated`将返回初始状态和新状态之间的差异。

# c++ - 梅森捻线机预热与再现性

> ID：16078794
> 
> 赞同：15
> 
> 时间：2013-04-18T09:09:14.037
> 
> 标签：c++, random, c++11, prng, mersenne-twister

在我当前的 C++11 项目中，我需要执行 M 模拟。对于每个模拟`m = 1, ..., M`，我使用一个`std::mt19937`对象随机生成一个数据集，构造如下：

```
std::mt19937 generator(m);
DatasetFactory dsf(generator); 
```

根据[https://stackoverflow.com/a/15509942/1849221](https://stackoverflow.com/a/15509942/1849221)和[https://stackoverflow.com/a/14924350/1849221](https://stackoverflow.com/a/14924350/1849221)，Mersenne Twister PRNG 受益于热身阶段，目前我的代码中没有这个阶段。为方便起见，我报告了建议的代码片段：

```
#include <random>

std::mt19937 get_prng() {
    std::uint_least32_t seed_data[std::mt19937::state_size];
    std::random_device r;
    std::generate_n(seed_data, std::mt19937::state_size, std::ref(r));
    std::seed_seq q(std::begin(seed_data), std::end(seed_data));
    return std::mt19937{q};
} 
```

我的问题是我需要结果的可重复性，即在不同的执行中，对于每个模拟，数据集必须相同。这就是为什么在我当前的解决方案中我使用当前模拟来播种 Mersenne Twister PRNG 的原因。在我看来，使用`std::random_device`阻止数据相同（AFAIK，这是 的确切目的`std::random_device`）。

**编辑：**通过*不同的执行*，我的意思是重新启动可执行文件。

如何在我的代码中引入上述预热阶段而不影响可重复性？谢谢。

## 可能的解决方案#1

这是基于@SteveJessop 的第二个提案的暂定实现

```
#include <random>

std::mt19937 get_generator(unsigned int seed) {
        std::minstd_rand0 lc_generator(seed);
        std::uint_least32_t seed_data[std::mt19937::state_size];

        std::generate_n(seed_data, std::mt19937::state_size, std::ref(lc_generator));
        std::seed_seq q(std::begin(seed_data), std::end(seed_data));
        return std::mt19937{q};
    } 
```

## 可能的解决方案#2

这是基于@SteveJassop 和@AndréNeve 共同贡献的暂定实现。该`sha256`函数改编自[https://stackoverflow.com/a/10632725/1849221](https://stackoverflow.com/a/10632725/1849221)

```
#include <openssl/sha.h>
#include <sstream>
#include <iomanip>
#include <random>

 std::string sha256(const std::string str) {
    unsigned char hash[SHA256_DIGEST_LENGTH];
    SHA256_CTX sha256;
    SHA256_Init(&sha256);
    SHA256_Update(&sha256, str.c_str(), str.size());
    SHA256_Final(hash, &sha256);

    std::stringstream ss;
    for(int i = 0; i < SHA256_DIGEST_LENGTH; i++) 
        ss << std::hex << std::setw(2) << std::setfill('0') << (int)hash[i];

    return ss.str();
}

std::mt19937 get_generator(unsigned int seed) {
    std::string seed_str = sha256(std::to_string(seed));
    std::seed_seq q(seed_str.begin(), seed_str.end());
    return std::mt19937{q};
} 
```

编译：`-I/opt/ssl/include/ -L/opt/ssl/lib/ -lcrypto`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:02:38.600

两种选择：

1.  遵循您的建议，但不要使用`std::random_device r;`为 MT 生成种子序列，而是使用不同的 PRNG 种子序列`m`。选择一个不会像 MT 那样在处理小种子数据时需要预热的问题：我怀疑 LCG 可能会这样做。对于大量的过度杀伤，您甚至可以使用基于安全哈希的 PRNG。这很像密码学中的“密钥拉伸”，如果你听说过的话。实际上，您可以使用标准密钥拉伸算法，但您使用它来生成长种子序列而不是大密钥材料。

2.  继续使用`m`为您的 MT 播种，但`discard`在开始模拟之前需要大量恒定的数据。也就是说，忽略使用强种子的建议，而是运行 MT 足够长的时间以使其达到良好的内部状态。我不知道您需要丢弃多少数据，但我希望互联网会这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T10:30:37.697

我认为您只需要为您希望重现的每次运行/模拟存储初始种子（在您的情况下为`std::uint_least32_t seed_data[std::mt19937::state_size]`数组）和`n`您所做的预热步骤数（例如`discard(n)`，如上所述使用）。

有了这些信息，您总是可以创建一个新的 MT 实例，用之前的实例播种它，`seed_data`然后运行它以进行相同的`n`预热步骤。这将产生相同的值序列，因为 MT 实例在热身结束时将具有相同的内部状态。

当您提到`std::random_device`影响再现性时，我相信在您的代码中它只是用于生成种子数据。如果您将其用作随机数本身的*来源*，那么您将无法获得可重现的结果。由于您仅使用它来生成种子，因此应该没有任何问题。如果你想重现价值，你就*不能*每次都生成一个新的种子！

从 的定义`std::random_device`：

> “std::random_device 是一个均匀分布的整数随机数生成器，它产生非确定性随机数。”

因此，如果它不是确定性的，您就无法重现它产生的值序列。话虽如此，仅使用它*来*生成良好的随机种子，然后再存储它们以供重新运行。

希望这可以帮助

**编辑 ：**

在与@SteveJessop 讨论之后，我们得出的结论是，数据集（或其中的一部分）的简单哈希足以用作您需要的合适的种子。这允许在每次运行模拟时以确定性方式生成相同的种子。正如@Steve 所提到的，您必须保证哈希的大小与`std::mt19937::state_size`. 如果它太小，那么您可以按照他的建议连接 m、m+M、m+2M、... 的哈希值，直到您有足够的数据。

我在这里发布更新的答案，因为使用哈希的想法是我的，但我会赞成@SteveJessop 的答案，因为他对此做出了贡献。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T19:25:30.667

对您链接到的答案之一的评论表明：

> 巧合的是，默认的 C++11 seed_seq 是 Mersenne Twister 预热序列（尽管现有的实现，例如 libc++ 的 mt19937，在提供单值种子时使用更简单的预热）

因此，您可以使用您当前的固定种子`std::seed_seq`为您做热身。

```
std::mt19937 get_prng(int seed) {
    std::seed_seq q{seed, maybe, some, extra, fixed, values};
    return std::mt19937{q};
} 
```

# linux - 中断消息队列原语和系统调用的信号

> ID：16078795
> 
> 赞同：0
> 
> 时间：2013-04-18T09:09:14.013
> 
> 标签：linux, qt, operating-system, signals, message-queue

我有一个 Qt 程序，其中包含：

1.  许多 Qt[信号槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)对，用于实现一些套接字编程。
2.  执行某些文件操作的系统调用
3.  一些 Posix 消息队列代码，其中，进程等待一些消息被写入队列，读取它并处理。

我面临两个问题：

一世。*有时*，当进程在队列中等待读取某些消息时，函数`mq_receive`根据文档返回的值会转换为消息`Interrupted system call`。

ii. *有时*，当进程使用系统调用执行文件操作时，应用程序崩溃。

现在我[在这里](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Interrupted-Primitives.html)阅读了如何使用`TEMP_FAILURE_RETRY`宏来重试失败的调用。

Q1。我的两个问题背后的问题是否与我使用 Qt 信号/插槽机制的原因相同？

Q2。如果是这样，是`TEMP_FAILURE_RETRY`处理这种情况的唯一好/标准方法吗？还是 Qt 提供了其他方法？

Q3。Qt 生成的信号是否会导致其他原语出现问题？为什么它只发生在消息队列和系统调用而不是其他 C++ 原语中？

有人可以发布一些文章/书籍的链接，在那里我可以理解信号/例程/系统调用如何以及为什么会导致彼此之间出现问题？我无法弄清楚我要搜索/搜索的确切关键字是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:48:03.017

尝试调查[this](http://qt-project.org/forums/viewthread/10138)和[this](http://qt-project.org/forums/viewthread/4944)。也许，使用 QThread 而不是 POSIX 消息传递是有意义的，或者如链接[Qt Local sockets](http://qt-project.org/doc/qt-4.8/qlocalsocket.html)之一所建议的那样。在所有这些之前，最好先了解一下 Qt GUI 和 QThreads 中的事件循环。

# android - 为文本到语音设置土耳其语

> ID：16078799
> 
> 赞同：5
> 
> 时间：2013-04-18T09:09:31.070
> 
> 标签：android, text-to-speech

我正在开发文本到语音应用程序，我想将土耳其语设置为：

```
tts.setLanguage(Locale.TR); 
```

但是这在 android 中不可用，以这种方式添加是错误的，还是有不同的方式将土耳其语添加到文本到语音。

任何帮助和建议将不胜感激

**文字转语音代码：**

```
 public class AndroidTextToSpeechActivity extends Activity implements
    TextToSpeech.OnInitListener {
/** Called when the activity is first created. */

private TextToSpeech tts;
private Button btnSpeak;
private EditText txtText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tts = new TextToSpeech(this, this);

    btnSpeak = (Button) findViewById(R.id.btnSpeak);

    txtText = (EditText) findViewById(R.id.txtText);

    // button on click event
    btnSpeak.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            speakOut();}  
                       });}
@Override
public void onDestroy() {
    // Don't forget to shutdown!
    if (tts != null) {
        tts.stop();
        tts.shutdown();}

    super.onDestroy();}

@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

    if (status == TextToSpeech.SUCCESS) {

        int result = tts.setLanguage(Locale.US);

        // tts.setPitch(5); // set pitch level

        // tts.setSpeechRate(2); // set speech speed rate

        if (result == TextToSpeech.LANG_MISSING_DATA
            || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "Language is not supported");
        } else {
            btnSpeak.setEnabled(true);
            speakOut();}

       } else {
            Log.e("TTS", "Initilization Failed");}}

 private void speakOut() {

    String text = txtText.getText().toString();

    tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-10T13:53:54.127

if your device is Turkish, use :

```
tts.setLanguage(Locale.getDefault()); 
```

instead of

```
int result = tts.setLanguage(Locale.US); 
```

Then EXTRA_LANGUAGE_MODEL value must be: "tr-TR".

I tried and succeeded.(But I also downloaded Turkish lang.pack from samsung market)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:18:15.210

尝试其他语音库，例如[http://dragonmobile.nuancemobiledeveloper.com/public/Help/DragonMobileSDKReference_Android/SpeechKit_Guide/Basics.html](http://dragonmobile.nuancemobiledeveloper.com/public/Help/DragonMobileSDKReference_Android/SpeechKit_Guide/Basics.html)

# c# - 基于int返回字符串

> ID：16078805
> 
> 赞同：1
> 
> 时间：2013-04-18T09:09:45.100
> 
> 标签：c#, asp.net

有没有一种更简单的方法可以根据 C# .NET2 中的 int 值返回一个字符串？

```
 if (intRelatedItems == 4)
        {
            _relatedCategoryWidth = "3";
        }
        else if (intRelatedItems == 3)
        {
            _relatedCategoryWidth = "4";
        }
        else if (intRelatedItems == 2)
        {
            _relatedCategoryWidth = "6";
        }
        else if (intRelatedItems == 1)
        {
            _relatedCategoryWidth = "12";
        }
        else
        {
            _relatedCategoryWidth = "0";
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:12:12.647

```
Dictionary<int, string> dictionary = new Dictionary<int, string>
{
    {4, "3"},
    {3, "4"},
    {2, "6"},
    {1, "12"},
};

string defaultValue = "0";

if(dictionary.ContainsKey(intRelatedItems))
    _relatedCategoryWidth = dictionary[intRelatedItems];
else
    _relatedCategoryWidth = defaultValue; 
```

或使用三元运算符，但我发现它的可读性较差：

```
_relatedCategoryWidth = dictionary.ContainsKey(intRelatedItems) ? dictionary[intRelatedItems] : defaultValue; 
```

或使用`TryGetValue`方法，如 CodesInChaos 建议：

```
if(!dictionary.TryGetValue(intRelatedItems, out _relatedCategoryWidth))
    _relatedCategoryWidth = defaultValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:25:41.367

您可以使用条件运算符：

```
_relatedCategoryWidth =
  intRelatedItems == 4 ? "3" :
  intRelatedItems == 3 ? "4" :
  intRelatedItems == 2 ? "6" :
  intRelatedItems == 1 ? "12" :
  "0"; 
```

这种写法强调一切都归结为对`_relatedCategoryWidth`变量的赋值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:13:23.747

好吧，既然你只对特殊情况下的连续小整数感兴趣，你可以通过数组查找来做到这一点：

```
var values = new[] { "0", "12", "6", "4", "3" };
if (intRelatedItems >= 0 && intRelatedItems < values.Length)
{
    return values[intRelatedItems];
}
else
{
    return "0";
} 
```

否则，最好的选择是使用普通的旧`switch`/`case`并可能将其隐藏在方法中，以免混淆代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:13:24.230

您可以使用`int[]`or `Dictionary<int, string>`，具体取决于您的键。

例如：

```
int[] values = new int[] {100, 20, 10, 5};
return values[intRelatedItems]; 
```

显然，只有在`intRelatedItems`只能将值从 0 到 values.Length -1 时才有效。

如果不是这种情况，您可以使用“字典”。如果未找到密钥，两种解决方案都可能引发异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T09:17:51.020

```
Dictionary<int, string> dictLookUp = new Dictionary<int, string>();
dictLookUp.Add(4, "3");
dictLookUp.Add(3, "4"};
dictLookUp.Add(2, "6"};
dictLookUp.Add(1, "12"};

int defaultVal = 0;

if (dictLookUp.ContainsKey(intRelatedItems))
{
    relatedCategoryWidth  = dictLookUp[intRelatedItems];
}
else
{ 
    intRelatedItems = defaultVal;
} 
```

# iphone - 使用哪个 ViewController 概念？

> ID：16078809
> 
> 赞同：1
> 
> 时间：2013-04-18T09:09:56.647
> 
> 标签：iphone, ios, objective-c, uiscrollview

我的应用程序中需要以下视图布局。

**绿色**视图是 ios 应用程序的视口。

顶部（**蓝色**）是应该可以左右滑动的视图，但一次只能看到一个视图（不同的内容）。如果我滑动，这个视图应该会卡到位。

在此之下，水平排列的视图更多（**橙色**视图）。这也应该在滑动后卡入到位（始终居中，以便一个视图位于灰色部分）。这里一次可以看到多个视图。

有 ,`PageViewController`等`UIScrollView`概念`UICollectionView`。

为这样的事情选择哪一个？

使用这种布局添加 subViewControllers 也是一个好主意吗？每个滚动视图的控制器？

提前致谢。

![在此处输入图像描述](https://i.stack.imgur.com/O9SsQ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:14:00.033

对于顶部，我会选择 3 `UIViewController's` `UIView`（取决于对象的复杂性）。如果它们是简单的东西，我只需添加 3`UIView's`并处理相同的逻辑`UIViewController`。将 3 放入`UIScrollView`(with `pagingEnabled`) 或您处理手势都是有效的可能性。按钮`UIViews`（橙色）可能带有 a `UICollectionView`（因此它可以为您处理内存）。A `UIScrollView`for the botton，可以工作，但如果你有太多，你可能会遇到性能问题。

# c# - 参数字典包含不可为空类型“System.Int32”的参数“testId”的空条目

> ID：16078815
> 
> 赞同：4
> 
> 时间：2013-04-18T09:10:13.463
> 
> 标签：c#, asp.net-mvc, web-services

我试图在我的控制器中调用一个动作：

使用这个网址： `http://localhost:5345/ManageTest/Details/5`

```
[Authorize]
public class ManageTestController : Controller
{

public ActionResult Details(int testId)
    { 
```

参数字典包含“MAMAdmin.Controllers.ManageTestController”中方法“System.Web.Mvc.ActionResult Details(Int32)”的不可为空类型“System.Int32”的参数“testId”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T09:15:02.783

看起来您正在尝试映射到默认路由，即：

```
RouteTable.Routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

为此，请将您的参数名称更改`ActionResult`为`id`：

```
public ActionResult Details(int id) 
```

否则，您必须使用 URL：

```
 http://localhost:5345/ManageTest/Details?testId=5 
```

# python - 使用 NumPy 计算梯度

> ID：16078818
> 
> 赞同：27
> 
> 时间：2013-04-18T09:10:16.290
> 
> 标签：python, numpy, scipy, gradient

我真的无法理解`numpy.gradient`函数的作用以及如何使用它来计算*多变量函数梯度*。

例如，我有这样一个功能：

```
def func(q, chi, delta):
    return q * chi * delta 
```

我需要计算它的 3 维梯度（换句话说，我想计算关于所有变量（q、chi、delta）的偏导数）。

如何使用 NumPy 计算这个梯度？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-18T11:44:48.670

问题是，numpy 不能直接给你导数，你有两个选择：

**使用 NUMPY**

您本质上要做的就是在三维上定义一个网格并评估该网格上的功能。之后，您将这个函数值表输入`numpy.gradient`到一个数组，其中包含每个维度（变量）的数值导数。

[这里](http://mindseye.no/2011/09/12/calculating-the-gradient-in-python/)的例子：

```
from numpy import *

x,y,z = mgrid[-100:101:25., -100:101:25., -100:101:25.]

V = 2*x**2 + 3*y**2 - 4*z # just a random function for the potential

Ex,Ey,Ez = gradient(V) 
```

**没有 NUMPY**

[您还可以使用居中差商](http://en.wikipedia.org/wiki/Finite_difference_coefficients)自己计算导数。 ![中心差商](https://upload.wikimedia.org/math/3/1/1/31140a8c5f69c0fbf317db0964e72f70.png)

这本质上是对预定义网格的每个点`numpy.gradient` [所做的​​事情。](http://docs.scipy.org/doc/numpy/reference/generated/numpy.gradient.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-18T10:25:38.143

Numpy 和 Scipy 用于数值计算。由于要计算解析函数的梯度，因此必须使用支持符号数学的[Sympy](http://sympy.org/en/index.html)包。[此处](http://docs.sympy.org/dev/modules/mpmath/calculus/differentiation.html)解释了差异化（您实际上可以在左下角的 Web 控制台中使用它）。

你可以在 Ubuntu 下安装 Sympy

```
sudo apt-get install python-sympy 
```

[或在任何带有pip](http://filon.us/slava/?p=189)的 Linux 发行版下

```
sudo pip install sympy 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-01T13:04:17.807

也`theano`可以自动计算梯度

[http://deeplearning.net/software/theano/tutorial/gradients.html](http://deeplearning.net/software/theano/tutorial/gradients.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-25T12:18:59.527

你可以使用[`scipy.optimize.approx_fprime`](https://docs.scipy.org/doc/scipy-0.19.1/reference/generated/scipy.optimize.approx_fprime.html)

```
f = lambda x: x**2
approx_fprime(np.array([2]), f, epsilon=1e-6)  # array([ 4.000001]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-08T02:09:39.280

Numpy 不直接支持梯度计算而不创建整个点网格。相反，我会使用[自动分化](https://en.wikipedia.org/wiki/Automatic_differentiation) 参见[https://code.activestate.com/recipes/580610-auto-differentiation/](https://code.activestate.com/recipes/580610-auto-differentiation/)了解如何在 Python 中进行。

# facebook - Safari 中的会话丢失

> ID：16078821
> 
> 赞同：1
> 
> 时间：2013-04-18T09:10:25.680
> 
> 标签：facebook, session, iframe, safari

我们有一个 facebook 应用程序。这个项目是用 MVC 3 开发的。我们使用会话数据传输。但是当我们更改页面时会话为空。对于解决方案，我们在 out 项目中添加了一些代码。

在 global.asax 中添加这个；

```
protected void Application_BeginRequest(Object sender, EventArgs e)
    {
        HttpContext.Current.Response.AddHeader("P3P", "policyref=\"/w3c/p3p.xml\", CP=\"NOI DSP COR NID CUR ADM DEV OUR BUS\"");
        HttpContext.Current.Response.AddHeader("P3P", "policyref=\"/w3c/p3p.xml\", CP=\"HONK\"");
        HttpContext.Current.Response.AddHeader("p3p", "CP=\"CAO PSA OUR\"");

    } 
```

然后添加layout.cshtml这段代码；

`@{ HttpContext.Current.Response.AddHeader("p3p", "CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""); }`

最后添加 web.config ；

`<system.web> <sessionState mode="InProc" cookieless="true" timeout="20" /> ... </system.web>`

但我们无法解决这个问题。

# command - Firebird isql 错误不显示在输出文件中

> ID：16078822
> 
> 赞同：0
> 
> 时间：2013-04-18T09:10:27.363
> 
> 标签：command, firebird, isql

当我使用脚本文件运行 isql 时：

```
isql.exe -q -e -i %1 -o %~n1.log 
```

然后在输出文件中我看到命令，但是当它运行时我在屏幕上看到的命令错误。

错误不会写入输出文件。我应该使用哪个命令，以便将错误也写入输出文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:17:51.120

您必须使用`-m(erge)`命令行开关才能将错误消息发送到输出文件中。

# python - 使用python插入后不显示数据库中的数据

> ID：16078827
> 
> 赞同：1
> 
> 时间：2013-04-18T09:10:37.730
> 
> 标签：python, mysql

我使用 python 2.7 和 MySQL 作为数据库。在我的 python 程序中有这样的`INSERT`查询：

```
cursor.execute("insert into login(username,passw)values('"+i.username+"','"+i.password+"')")
result=cursor.execute("select * from login")
print cursor.fetchall() 
```

当我检查数据库时，没有条目。但是在我的python代码中选择之后，当我打印结果时，它会显示插入的数据。我也没有使用任何交易声明。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:13:53.577

您需要为数据库*提交*事务以使您的插入永久化，并且您需要使用 SQL 参数来防止 SQL 注入攻击和一般引用错误：

```
cursor.execute("insert into login (username, passw) values (%s, %s)", (i.username, i.password))
connection.commit() 
```

在您提交之前，您插入的数据将仅对您的 python 程序可见；如果您根本不提交，那么数据库将再次*丢弃*更改。

或者，您可以打开自动提交模式：

```
connection.autocommit() 
```

打开自动提交后，您的插入将立即*提交*。请注意这一点，因为如果您需要将数据插入到相互依赖的多行和/或表中，这可能会导致数据不一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:13:07.597

您还需要在执行语句之后[提交数据。](http://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlconnection-commit.html)在完成插入或更新数据后调用此方法很重要，因为默认情况下 Python 连接器不会[自动提交](http://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlconnection-autocommit.html)。

```
# Execute & Commit
cursor.execute("insert into login(username,passw) values('%s','%s')", 
               i.username, i.password)
# Commit the insert query!
conn.commit() 

# Fetch Result
result=cursor.execute("select * from login")
print cursor.fetchall() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:33:36.783

如果您使用 mysql-python，您可以设置连接选项以启用自动提交功能。

```
conn = mysql.connection(host, port, autocommit=True)

# or
conn = mysql.connection(host, port)
conn.autocommit(True) 
```

您可以[在此处查看更多详细信息](https://stackoverflow.com/a/1029016/260793)

# indexing - Neo4j 的 cypher Query / Node by index 查找

> ID：16078829
> 
> 赞同：0
> 
> 时间：2013-04-18T09:10:38.760
> 
> 标签：indexing, neo4j, cypher

在我的数据集中，有一个节点具有类似的属性

例如）节点 4 名称“personid_10”标签“Andrew”

并且，在所有节点中，有一半同时具有“name”和“label”，而其余的只有“name”属性，这一点非常重要！

当我建立这样的查询时，

```
start n=node:nodes(name="personid_10")
return n; 
```

我可以得到这个查询的满意结果。

但在其他情况下（使用“标签”属性）

```
start n=node:nodes(label="Andrew")
return n; 
```

无法得到任何结果。

有什么办法可以解决我吗？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:22:38.107

您可以使用 lucene 查询对属性键执行“或”运算：

```
start n=node:nodes('label:Andrew name:personid_10')
return n 
```

可能必须做一个独特的，以防你得到重复

# ios6 - iOS 应用中的国际化

> ID：16078831
> 
> 赞同：2
> 
> 时间：2013-04-18T09:10:40.387
> 
> 标签：ios6, internationalization, xcode4.5

我必须在 iOS 应用程序中进行国际化。我搜索并找到了**“genstrings”**。我为特定语言创建了可**本地化的字符串。**

**我的疑问是：**如何创建一个支持所有语言的应用程序，而不是为每种语言创建可本地化的字符串？

如果任何人有想法，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:12:06.983

检查这些链接 [制作多语言 ios 应用程序](https://stackoverflow.com/questions/5748600/making-multi-language-ios-app) [https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/InternatAndLocaliz.html#//apple_ref/doc/uid/20000277-SW1](https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/InternatAndLocaliz.html#//apple_ref/doc/uid/20000277-SW1)

希望这能消除您的疑虑。

# bash - PostgreSQL - 过滤数据库列表

> ID：16078836
> 
> 赞同：5
> 
> 时间：2013-04-18T09:10:55.387
> 
> 标签：bash, postgresql, sh, postgresql-9.2

我有这个脚本（每天备份数据库）：

```
#!/bin/bash
# Location to place backups.
backup_dir="/home/user/openerp/7.0/backup/"
#String to append to the name of the backup files
backup_date=`date +%Y-%m-%d`
#Numbers of days you want to keep copie of your databases
number_of_days=7
databases=`psql -l -t | cut -d'|' -f1 | sed -e 's/ //g' -e '/^$/d'`
for i in $databases; do
  if [ "$i" != "template0" ] && [ "$i" != "template1" ]; then
    echo Dumping $i to $backup_dir$i\_$backup_date
    pg_dump -Fc $i > $backup_dir$i\_$backup_date
  fi
done
find $backup_dir -type f -prune -mtime +$number_of_days -exec rm -f {} \; 
```

当我运行这个脚本时，它开始正常进行数据库备份，但是当它确实喜欢半个数据库备份时，它只是挂起，就像它正在做一些长时间的备份并且永远不会结束它。所以我的一些数据库有时最终没有备份。

我认为这是因为它尝试备份模板0 和模板1 等数据库。我试图在文档中查看这个数据库过滤是如何工作的，但没有找到任何信息。

谁能告诉我如何过滤除template0、template1、postgres 等数据库之外的所有数据库。如果有人可以提供指向文档的链接，其中提到了这样的过滤，那也很棒：

```
`psql -l -t | cut -d'|' -f1 | sed -e 's/ //g' -e '/^$/d'` 
```

按要求输出：

```
demo
demo_empty1
dn1
dn2
dn3
da21
da22
nbb323
nd
nd2
pf12
postgres
rub_demo1
template0
template1
test
test3
testas_3 
```

所以所有数据库，除了 postgres、template0 和 template1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T01:20:15.423

我怀疑您对模板数据库的猜想是不正确的。`pg_dump`几乎会立即倾倒它们。

您的问题更有可能是`pg_dump`正在等待尝试获得其他人持有锁定的表的`ACCESS EXCLUSIVE`锁定。您必须查看哪个`pg_dump`进程被阻止并检查该`pg_locks`数据库上的视图以更好地了解正在发生的事情。您的日志应该告诉您哪个数据库正在停止转储，并`ps`会告诉您哪个数据库`pg_dump`正在运行。`pg_stat_activity`将让您识别`pg_dump`进程的连接。

顺便说一句，您完全没有在此脚本中进行任何错误处理。如果备份失败，除非您碰巧正在阅读日志并注意到 pg_dump 的一些有用的 stderr 输出，否则您永远不会知道。我个人建议使用 pgbarman 进行定期备份，尽管定期转储仍然是一个好主意。

由于您可能想要排除`template0`并且`template`即使它们很可能不是问题，您可以使用：

```
psql --tuples-only -P format=unaligned -c "SELECT datname FROM pg_database WHERE NOT datistemplate AND datname <> 'postgres'"; 
```

而不是您的文本处理解决方案。您会发现`--tuples-only`和`-P format=unaligned`选项在使用`psql`.

# css - 带有异常的备用行 > 继承背景颜色

> ID：16078842
> 
> 赞同：0
> 
> 时间：2013-04-18T09:11:10.987
> 
> 标签：css, html-table, rows, alternate

我有一个交替行背景颜色的表：

```
tr:nth-child(even) {background: #FFF}
tr:nth-child(odd) {background: #f4f4f4} 
```

该表由两种类型的单元格组成，“.main”和“.sub”。

我希望背景颜色每隔一个“.main”交替，而所有“.sub”行都获得前一个“.main”的颜色。

如果解决方案都是 CSS，那就太好了，但如果它真的是最好的方法，则对 jquery 开放。

有任何想法吗？

```
<table>
    <tr id='1' class='main'><td></td></tr>
    <tr id='2' class='main'><td></td></tr>
    <tr id='3' class='main'><td></td></tr>
    <tr id='4' class='main'><td></td></tr>
    <tr id='5' class='main'><td></td></tr>
    <tr id='6' class='sub'><td></td></tr>
    <tr id='7' class='main'><td></td></tr>
    <tr id='8' class='main'><td></td></tr>
    <tr id='9' class='sub'><td></td></tr>
    <tr id='10' class='sub'><td></td></tr>
    <tr id='11' class='main'><td></td></tr>
</table> 
```

第 1,3,5,8 行应该是 #f4f4f4

第 2、4、7、11 行应该是#fffff

并且每个 .sub 行的颜色应与前面的 .main 行颜色相同。

（这些表是动态生成的，所以它们的位置会有所不同）

编辑：这是我第一次尝试使用 jQuery [http://jsfiddle.net/xjDZm/失败的 jsfiddle](http://jsfiddle.net/xjDZm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:20:43.343

我认为这对于纯 CSS 是不可能的，因为您似乎需要设置奇数行**的`.main`**样式，而不是奇数行**和`.main`**，并且`:nth-child`不能这样做（您不能使用`(tr.main):nth-child(odd)`，更不用说您的要求`.sub`更多复杂）。

所以这是一个jQuery解决方案：

```
$("tr.main").filter(":even").css("background-color","#CCC");//change to #F4F4F4
$("tr.main").filter(":odd").css("background-color","#FFF");
$("tr.sub").each(function(i,e){
    $(this).css("background-color",$(this).prev().css("background-color"));
}); 
```

[http://jsfiddle.net/xjDZm/1/](http://jsfiddle.net/xjDZm/1/)

对不起，我不使用 jQuery，所以我不确定是否有更好的编码方式。我只是查找 API 文档以找到有效的方法。

# jsf - 在数据表列 JSF/PrimeFaces 中达到 backingbean 方法

> ID：16078843
> 
> 赞同：3
> 
> 时间：2013-04-18T09:11:13.003
> 
> 标签：jsf, primefaces

`<p:commandLink>`在数据表列内部调用它时，我无法访问我的支持 bean 方法。

当放在数据表之外时，我的命令链接工作正常，但是我不能直接传递选定的行变量。

这是我的代码：

```
 <h:form id="reviewLists" prependId="false">         
                <p:messages  />  
                <p:panel header="Beoordelingen" style="margin-bottom:10px;">              
                    <p:dataTable value="#{reviewFinderBean.employees}" var="employee" >
                        <p:column headerText="Medewerker" >
                            <h:commandLink value="#{employee.name}" action="#{reviewFinderBean.showReviewsForEmployee(employee)}" />                  
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form> 
```

在检查我的浏览器的 http 请求时，我看到它按预期执行了另一个帖子（ajax），我尝试使用 prependId="false"，因为我认为生成的组件名称可能无法解析，但这并没有帮助。

ajax 帖子被触发，但不知何故从未解析为服务器上正确的 backingbean 方法

`<f:setPropertyActionListener>`正确设置并在数据表列中使用时，也不会解析任何属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:51:43.770

首先，摆脱`prependId="false"`. 它使 ajax 处理和更新的情况变得更糟。

为了解决这个问题，您需要重写 bean，使其`#{reviewFinderBean.employees}"`在处理表单提交期间返回与显示表单期间完全相同的数据模型（后面的值）。JSF 将重新遍历它，以便找到调用命令的关联行。

如果要将 bean 保留在请求范围内，则需要在其（后）构造函数中重新创建完全相同的数据模型。如果您的 bean 已经在视图范围内，那么您需要确保 getter 方法完全没有业务逻辑，以便数据模型不会发生潜在的变化。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 4 点

# xml - 如何使用 OpenXML 访问 xml 中的嵌套元素

> ID：16078854
> 
> 赞同：2
> 
> 时间：2013-04-18T09:11:42.707
> 
> 标签：xml, sql-server-2008-r2, openxml, xml-import

我正在尝试将数据从一个相当大的 xml 文件导入到 SQL Server。经过一些在线搜索后，我决定使用 OpenXML。到目前为止我的查询是

```
DECLARE @doc INT
DECLARE @xml XML
SELECT @xml = evnt
FROM OPENROWSET (BULK 'c:\archive.xml', SINGLE_BLOB) AS Import(evnt)

EXEC sp_xml_preparedocument @doc OUTPUT, @xml

SELECT *
FROM OPENXML( @doc, '/Events/eventData/event', 2)
WITH (
  id varchar(max)
)
EXEC sp_xml_removedocument @doc 
```

通过这种方式，我可以获取“事件”中列出的元素，但是如何从“事件”中获取一个更下一级的元素。例如，我将如何获得下面的“CustId”标签？

```
<event>
    <custromAttribute>
        <CustId>... 
```

“事件”中的项目主要是需要的，因此路径不能改变。此外，任何其他方法也会很好。我需要它从 SQL Server 运行，所以不能使用 SSIS 或其他类似的外部工具。XQuery 似乎需要很多时间。

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:05:04.727

如果有人感兴趣，上述问题的解决方案很简单。

```
SELECT *
FROM OPENXML( @doc, '/Events/eventData/event')
WITH (
  ID varchar(max) 'id'
  CustID varchar(20) 'customAttribute/CustId',
  AttributeID varchar(20) '@id'
  SampleID varhcar(20) 'Ele1/Ele2[3]/id'
) 
```

引号中的值应与 xml 文档中的名称完全匹配。'@' 用于选择元素中的属性。使用“../”返回一个级别。

SampleID 在“Ele1”内的第三个“Ele2”元素中获取“id”

# python - 如何检查数据是否已经被使用过

> ID：16078856
> 
> 赞同：0
> 
> 时间：2013-04-18T09:11:45.360
> 
> 标签：python

我有一个 python 脚本，它从 mysql 数据库中检索最新的 5 条记录，并向包含此信息的用户发送电子邮件通知。我希望用户只接收新记录而不是旧记录。我可以毫无问题地从 mysql 检索数据...我尝试将其存储在文本文件中并比较文件，但是，当然，包含新检索数据的文本文件总是比旧文件多 5 条记录。

所以我在这里有一个逻辑问题，作为一个新手，我不能轻易解决。

使用列表也是一个想法，但我遇到了同样的问题。

臭名昭著的 5 条记录可以保持一周不变，然后我们可以有一个新记录，或者每天可能有 3 个新记录。

这是相当不可预测的，但或多或​​少应该是这种行为。

非常感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:23:30.217

您是否为每条记录分配了唯一的递增 ID？如果是，您可以创建一个单独的表，其中仅保存最后一条获取的记录的 ID，这样您就只能检索 ID 大于此 ID 的记录。每次获取时，您都可以使用新的最新 ID 更新此表。

如果我误解了您的问题，请告诉我，但将最后获取的 ID 保存在数据库中可能是一种解决方案。

# c# - 如何在c#中将字符串与字符串分开

> ID：16078866
> 
> 赞同：-3
> 
> 时间：2013-04-18T09:12:01.570
> 
> 标签：c#, string

在我的 c# 程序中，我有一个这样的字符串。

```
String ss = [["Karoline,Ejlstrupvej 90 90, 4100, Ringsted,07:50:00,55.48148, 11.78890","Karoline,Ejlstrupvej 101, 4100, Ringsted,07:50:00,55.47705, 11.78523","Byskovskolen, Prstevej 19,  4100,  Ringsted,55.46842, 11.80975"],["Mads,Sdr. Parkvej  27, 4100, Ringsted,08:00:00,55.44648, 11.78757","Niels,Fluebækvej  204, 4100, Ringsted,08:00:00,55.44295, 11.79137","Heldagsskolen Specialtilbud, Vestervej 27,  4100,  Ringsted,55.44050, 11.78115"]]; 
```

我怎样才能分离这样的值。

```
 ["Karoline,Ejlstrupvej 90 90, 4100, Ringsted,07:50:00,55.48148, 11.78890","Karoline,Ejlstrupvej 101, 4100, Ringsted,07:50:00,55.47705, 11.78523","Byskovskolen, Prstevej 19,  4100,  Ringsted,55.46842, 11.80975"]

  ["Mads,Sdr. Parkvej  27, 4100, Ringsted,08:00:00,55.44648, 11.78757","Niels,Fluebækvej  204, 4100, Ringsted,08:00:00,55.44295, 11.79137","Heldagsskolen Specialtilbud, Vestervej 27,  4100,  Ringsted,55.44050, 11.78115"] 
```

我在尝试

```
ss.Split('],['); 
```

但由于这只需要单个字符，我无法拆分字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:15:39.450

使用[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28v=vs.100%29.aspx)，因为您的字符串接近 json。

```
var listOfLists = new JavaScriptSerializer().Deserialize <List<List<string>>>(str); 
```

你会得到两个列表，每个列表都有 3 个项目，正如你的字符串格式化版本所暗示的那样

```
[
  [
    "Karoline,Ejlstrupvej 90 90, 4100, Ringsted,07:50:00,55.48148, 11.78890",
    "Karoline,Ejlstrupvej 101, 4100, Ringsted,07:50:00,55.47705, 11.78523",
    "Byskovskolen, Prstevej 19,  4100,  Ringsted,55.46842, 11.80975"
  ],
  [
    "Mads,Sdr. Parkvej  27, 4100, Ringsted,08:00:00,55.44648, 11.78757",
    "Niels,Fluebækvej  204, 4100, Ringsted,08:00:00,55.44295, 11.79137",
    "Heldagsskolen Specialtilbud, Vestervej 27,  4100,  Ringsted,55.44050, 11.78115"
  ]
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:15:36.297

```
var res = ss.Split(new string[]{ "],[" }, StringSplitOptions.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:14:48.073

您可以使用`string.Split`字符串数组，例如：

```
var things = thing.Split(
  new string[] { "],[" }, 
  StringSplitOptions.RemoveEmptyEntires
); 
```

然后从各自的结果中删除前导`[`和尾随。`]`

试图将字符串硬塞到字符文字中显然是行不通的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:39:16.607

```
var pattern = @"\[\[|\]\]|\],\[";
Regex r = new Regex(pattern);
var splitList = r.Split(ss).Where(s => !string.IsNullOrEmpty(s)).ToList(); 
```

# html - 在 div 中垂直居中 ul

> ID：16078868
> 
> 赞同：11
> 
> 时间：2013-04-18T09:12:10.780
> 
> 标签：html, css

这就是我的代码的样子。

```
#container {
  width: 584px;
  height: 50px;
  position: relative;
  overflow: hidden;
}

#container ul {
  position: absolute;
  margin: 0;
  padding: 0;
  width: 3504px;
}

#container ul li {
  width: 584px;
  float: left;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
```

```
<div id="container">
   <ul>
      <li>...</li>
      <li>...</li>
      <li>...</li>
   </ul>
</div>
```

正如标题所说，我想将 ul 垂直居中在 div 内。我无法更改上述 CSS 规则，因为。我一直在谷歌搜索解决方案并试图找到一种方法，但一切似乎都与我已有的规则相冲突。

知道怎么做吗？

`#container`如果我使用具有一行和一列的表格而不是 div 会有所帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T09:54:02.777

以后请使用搜索功能。完整的答案在[这里](https://stackoverflow.com/a/12417336/1081234)解释；这是您的方案的代码：

```
.container {
  display: table;
  height: 100%;
  position: absolute;
  overflow: hidden;
  width: 100%;}
.helper {
  #position: absolute; /*a variation of an "lte ie7" hack*/
  #top: 50%;
  display: table-cell;
  vertical-align: middle;}
ul{
  #position: relative;
  #top: -50%;
  margin:0 auto;
  width:200px;} 
```

这三个元素必须像这样嵌套：

```
<div class="container">
  <div class="helper">
    <ul><!--stuff--></ul>
  </div>
</div> 
```

[http://jsfiddle.net/ovfiddle/yVAW9/](http://jsfiddle.net/ovfiddle/yVAW9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:50:31.150

在 CSS 中“垂直居中”a`div`或其他容器非常棘手，这是您的选择。

**你知道你的容器的高度**

如果您知道容器的高度，则可以执行以下操作：

```
#container {
    position: absolute;
    top: 50%;
    margin-top: -half_of_container_height_here;
} 
```

所以我们基本上放在中间，然后使用等于高度一半的*负边距来偏移它。*你的父容器需要有`position: relative`.

**您不知道容器的确切高度**

在这种情况下，您需要使用 JavaScript 并计算适当的边距（不幸的是，您不能使用`margin-top: auto`或类似的东西）。

[更多信息在这里](http://phrogz.net/css/vertical-align/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-11T09:41:02.913

You can use `flex` to make your `ul` center vertical, horizontal or both like

```
.container{
  background:#f00;
  height:150px;
  display:flex;
  align-items:center;
  /*justify-content:center;=>will make ul center horizontal*/
}
.container ul{
  background:#00f;
}
```

```
<div class="container">
  <ul>
    <li>A</li>
    <li>B</li>
    <li>C</li>
  </ul>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:23:31.520

如果你可以添加 jQuery 库，你可以试试这个，

```
$(document).ready(function(){

    // Remove li float
    $("#container ul li").css("float", "none");

    // Get the full height of the UL
    var ulheight = $("#container ul li")[0].scrollHeight;

    // Based on the height of the container being 50px you can position the UL accordingly
    var pushdown = (50-ulheight)/2;
    $("#container ul li").css("top", pushdown);

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-28T21:57:20.303

现在你可以让父容器 display:flex 和 align-items:center。那应该行得通。尽管旧版浏览器不支持 flexbox 属性。

# java - 在 Java 中解析 C++ 源代码（提取元信息）的最简单方法是什么？

> ID：16078871
> 
> 赞同：2
> 
> 时间：2013-04-18T09:12:17.457
> 
> 标签：java, c++, parsing, compiler-construction

我需要从Java 代码中的*.c/* .cpp 文件中提取类、方法和参数。

我审查过：

*   **Antlr**（找不到任何适用于 Java 目标的现成 c++ 语法），

*   **gccxml**（可能有效，但我无法在 Windows 上测试），

*   **clang**（对于这个任务来说似乎太大了），但是它们都不够好（或者对于这个任务来说太大了）。

推荐什么方法？

没有外部依赖的小型库受到赞赏。

# c# - 更改 ActiveDirectory 组的 groupType

> ID：16078877
> 
> 赞同：0
> 
> 时间：2013-04-18T09:12:33.823
> 
> 标签：c#, .net, active-directory

有谁知道，如何`groupType`通过 C# 更改 AD 组的属性？

正确检索组后，我尝试了以下操作，但这会引发`DirectoryServicesCOMException`：

```
group.Properties["groupType"].Value = ActiveDs.ADS_GROUP_TYPE_ENUM.ADS_GROUP_TYPE_GLOBAL_GROUP | ActiveDs.ADS_GROUP_TYPE_ENUM.ADS_GROUP_TYPE_SECURITY_ENABLED;
group.CommitChanges(); 
```

您知道更改`groupType`现有组的属性的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:41:53.303

在不知道你得到哪个异常的情况下，我会提出以下建议：

确保您正在尝试有效的转换 Universal -> Domain Local 或 Global Domain Local -> Universal Global -> Universal

如果你不能用 ADuC 做到这一点，你将无法在你的程序中做到这一点，所以仔细检查那里。

# android-layout - 使用 Xamarin 在 Visual Studio 中编辑 android 布局时自动完成

> ID：16078880
> 
> 赞同：6
> 
> 时间：2013-04-18T09:12:40.177
> 
> 标签：android-layout, autocomplete, xamarin.android, xamarin

我目前正在使用最新的 Visual Studio 2012 运行最新的 Xamarin.Android 试用安装。

在 Visual Studio 中打开 .axml 文件时，我可以看到一个视觉设计器并且可以正常使用它，当我切换到“源”选项卡时，我可以看到一个非常精细的布局 xml，其中突出显示了语法等等。

问题是，自动完成只能建议 XML 注释和 CDATA 元素，没有别的。

有没有办法在 Visual Studio 中启用 android-aware 自动完成功能？我记得 Xamarin Studio 能够自动完成布局，但是当打开在 Visual Studio 中编辑的解决方案时，Xamarin Studio 也无法自动建议。

有任何想法吗？提前致谢。

编辑：切换到付费版本，问题在 Xamarin 和 Visual Studios 中仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T12:05:22.283

In Xamarin studio you may simply right-click on axml file and select - "Open with/Source Code Editor" Unfortunately, i can't check it in Visual Studio.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T14:51:31.650

经过这么多的努力，唯一对我有用的解决方案是使用 IntelliJ IDEA 或 Eclipse 来编辑我的 android 布局，并在 Xamarin Studio 中编写代码隐藏。放弃 Xamarin 并重新使用 Java 进行开发的效果会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T11:14:36.273

实际上，您可以轻松地在 Visual Studio 中为您的 android 布局添加类似 Intellisense 的功能。

分步教程在这里[https://kb.xamarin.com/customer/portal/articles/1920119-how-do-i-enable-intellisense-in-android-axml-files-](https://kb.xamarin.com/customer/portal/articles/1920119-how-do-i-enable-intellisense-in-android-axml-files-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T11:15:38.793

对于我们的项目，最好的解决方案是使用 - VS 编辑 cs 代码 - Android Studio 来处理样式、布局、...

我们如何工作：

*   假设项目位于**C:\projects\fun**
*   **在C:\projects\fun\AndroidStudio**中创建一个 Android 项目
***   使用下面的 bat 脚本创建指向资源文件夹和 AndroidManifest.xml 的符号链接**

 ****脚本.bat**

```
mklink /J C:\projects\fun\AndroidStudio\app\src\main\res  C:\projects\fun\Resources
mklink /H C:\projects\fun\AndroidStudio\app\src\main\AndroidManifest.xml C:\projects\fun\Properties\AndroidManifest.xml 
```

它不需要使用 axml 而不是 xml 文件，设计器工作正常，也可以预览。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-15T11:07:23.940

自动完成功能仅适用于扩展名为 .axml 的文件。如果您的文件类型是 xml，您可以创建带有 axml 扩展名的新文件并将 xml 旧文件的内容复制到新的 axml 文件中（有时只是重命名文件不起作用）**

# php - PHP toString不打印

> ID：16078881
> 
> 赞同：0
> 
> 时间：2013-04-18T09:12:40.483
> 
> 标签：php, oop

在尝试使用 __toString() 时，我不断收到以下错误：

> 可捕获的致命错误：第 36 行的 C:wamp\www\demo.php 中的类地址对象无法转换为字符串

我哪里做错了？

**演示.php**

```
 echo '<h2>Instantiating Address</h2>';
    $address = new Address;

    echo '<h2>Empty Address</h2>';
    echo '<tt><pre>' . var_export($address, TRUE) . '</pre></tt>';

    echo '<h2>Setting properties...</h2>';
    $address->street_address_1 = '555 Fake Street';
    $address->city_name = 'Townsville';
    $address->subdivision_name = 'State';
    $address->postal_code = '12345';
    $address->country_name = 'United States of America';
    echo '<tt><pre>' . var_export($address, TRUE) . '</pre></tt>';

    echo '<h2>Displaying address ...</h2>';
    echo $address->display();

    echo '<h2>Testing magic __get and __set</h2>';
    unset($address->postal_code);
    echo $address->display();

    echo '<h2>Testing Address __construct with an array</h2>';
    $address_2 = new Address(array(
        'street_address_1' => '123 Phony Ave',
        'city_name' => 'Villageland',
        'subdivision_name' => 'Region',
        'postal_code' => '67890',
        'country_name' => 'Canada',
    ));
    echo $address_2->display();

    echo '<h2>Address __toString</h2>';
    echo $address_2;
?> 
```

**oop.php**

```
<!DOCTYPE html>
<html>
<head><title>OOP</title></head>
    <body>
    <?php
        class Address {
            public $street_address_1;
            public $street_address_2;           
            public $city_name;
            public $subdivision_name;           
            public $country_name;

            protected $_postal_code;

            // Primary key of an address
            protected $_address_id;

            // When the recorded created and last updated
            protected $_time_created;
            protected $_time_updated;

            /*
                Constructor
                @param array data optional array of property names
            */
            function __construct($data = array()) {
                $this->_time_created = time();

                // Ensure that the address can be populated.
                if(!is_array($data)){
                    trigger_error('Unable to construct address with a ' . get_class($name));
                }
                // If there is at lease one value, populate the Address with it
                if(count($data) > 0) {
                    foreach($data as $name => $value){
                        // Special case for protected properties
                        if(in_array($name, array(
                            'time_created',
                            'time_updated',
                            ))){
                                $name = '_' . $name;
                            }
                            $this->$name = $value;
                    }
                }
            }

            /*
                Magic __get
                @param string $name
                @return mixed           
            */
            function __get($name){
                // Postal code lookup if unset.
                if (!$this->_postal_code){
                    $this->_postal_code = $this->_postal_code_guess();
                }

                /*
                    Magin __set.
                    @param string $name
                    @param mixed $value
                */
                function __set($name, $value){
                    // Allow anything to set the postal code.
                    if ('postal_code' == $name){
                        $this->$name = $value;
                        return;
                    }
                    // Unable to access property; trigger error,
                    trigger_error('Undefined or unallowed property via __set(): ' . $name);                 
                }

                /*
                    Magic __toString
                    @return string                  
                */

                function __toString() {
                    return $this->display();
                }

                $protected_property_name = '_' . $name;
                if(property_exists($this, $protected_property_name)){
                    return $this->$protected_property_name;
                }
                // unable to access property; trigger error
                trigger_error('Undefined_property via __get: ' . $name);
                return NULL;

            }

            /*
                Guess the postal code given the subdivision and city name.
                @todo Replace with a database lookup
                @return string
            */
            protected function _postal_code_guess(){
                return 'LOOKUP';
            }

            /*
                display an address in HTML
                return string.
            */
            function display(){
                $output = '';

                // Street address
                $output .= $this->street_address_1;
                if ($this->street_address_2){
                    $output .= '<br />' . $this->Street_address_2;
                }

                // City, Subdivision Postal
                $output .= '<br />';
                $output .= $this->city_name . ', ' . $this->subdivision_name;
                $output .= ' ' . $this->postal_code;

                // Country
                $output .= '<br />';
                $output .= $this->country_name;         

                return $output;             
            }
        }
    ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:17:37.457

`function __get()`没有正确关闭。我已经删除了一些代码以使其工作。检查差异。

```
<?php
class Address {
    public $street_address_1;
    public $street_address_2;
    public $city_name;
    public $subdivision_name;
    public $country_name;

    protected $_postal_code;

    // Primary key of an address
    protected $_address_id;

    // When the recorded created and last updated
    protected $_time_created;
    protected $_time_updated;

    /*
        Constructor
        @param array data optional array of property names
    */
    function __construct($data = array()) {
        $this->_time_created = time();

        // Ensure that the address can be populated.
        if(!is_array($data)){
            trigger_error('Unable to construct address with a ' . get_class($name));
        }
        // If there is at lease one value, populate the Address with it
        if(count($data) > 0) {
            foreach($data as $name => $value){
                // Special case for protected properties
                if(in_array($name, array(
                    'time_created',
                    'time_updated',
                    ))){
                        $name = '_' . $name;
                    }
                    $this->$name = $value;
            }
        }
    }

    /*
        Magic __get
        @param string $name
        @return mixed
    */
    function __get($name){
        // Postal code lookup if unset.
        if (!$this->_postal_code){
            $this->_postal_code = $this->_postal_code_guess();
        }

        $protected_property_name = '_' . $name;

        if(property_exists($this, $protected_property_name)){
            return $this->$protected_property_name;
        }
        // unable to access property; trigger error
        trigger_error('Undefined_property via __get: ' . $name);
        return NULL;
    }

        /*
            Magin __set.
            @param string $name
            @param mixed $value
        */
        function __set($name, $value){
            // Allow anything to set the postal code.
            if ('postal_code' == $name){
                $this->$name = $value;
                return;
            }
            // Unable to access property; trigger error,
            trigger_error('Undefined or unallowed property via __set(): ' . $name);
        }

        /*
            Magic __toString
            @return string
        */

        function __toString() {
            return $this->display();
        }

    /*
        Guess the postal code given the subdivision and city name.
        @todo Replace with a database lookup
        @return string
    */
    protected function _postal_code_guess(){
        return 'LOOKUP';
    }

    /*
        display an address in HTML
        return string.
    */
    function display(){
        $output = '';

        // Street address
        $output .= $this->street_address_1;
        if ($this->street_address_2){
            $output .= '<br />' . $this->Street_address_2;
        }

        // City, Subdivision Postal
        $output .= '<br />';
        $output .= $this->city_name . ', ' . $this->subdivision_name;
        $output .= ' ' . $this->postal_code;

        // Country
        $output .= '<br />';
        $output .= $this->country_name;

        return $output;
    }
} 
```

# java - htop 和 top 显示多个进程实例？

> ID：16078883
> 
> 赞同：7
> 
> 时间：2013-04-18T09:12:47.200
> 
> 标签：java, postgresql, ant, multiprocessing

我目前正在用 ant 运行一个 java 进程。我只运行一个进程。

当我使用 htop 时，我看到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/JPbtk.png)

向右滚动给出： ![在此处输入图像描述](https://i.stack.imgur.com/ZqQNu.png)

基本上，中间部分只包含**我**的 java 进程。

当我这样做时`ps aux | grep java`，我看到：

```
$ ps aux | grep java
victor   27982  1.0  1.9 3799504 163112 pts/1  Sl+  02:00   0:06 /usr/bin/java -classpath /usr/share/ant/lib/ant-launcher.jar:/usr/share/java/xmlParserAPIs.jar:/usr/share/java/xercesImpl.jar -Dant.home=/usr/share/ant -Dant.library.dir=/usr/share/ant/lib org.apache.tools.ant.launch.Launcher -cp  tag
victor   28003 19.0  6.6 3523136 544812 pts/1  Sl+  02:00   1:51 /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java -Xmx2048m -classpath /home/victor/Giordano/java/lib/commons-math3-3.0.jar:/home/victor/Giordano/java/lib/guava-14.0.1.jar:/home/victor/Giordano/java/lib/joda-time-2.2.jar:/home/victor/Giordano/java/lib/postgresql-9.2-1002.jdbc4.jar -jar /home/victor/Giordano/java/build/jar/Giordano.jar 15
victor   28135  0.0  0.0   9388   924 pts/3    R+   02:10   0:00 grep --color=auto java 
```

知道为什么我的进程在 htop 中有这么多实例吗？

仅供参考，我在四核机器上运行。

如果你们有兴趣，这是我的构建文件。

```
<project name="Giordano" basedir="." default="main">

  <!-- Keep Eclipse's bin away from our build, use separate folder -->
  <property name="build.dir" value="build" />
  <property name="src.dir" value="src" />
  <property name="lib.dir" value="lib" />
  <property name="classes.dir" value="${build.dir}/classes" />
  <property name="jar.dir" value="${build.dir}/jar" />

  <!-- Main Classes for different processes -->
  <property name="like.main.class" value="com.crowdy.learn.SimilarityLike" />
  <property name="model.main.class" value="com.crowdy.learn.SimilarityModel" />
  <property name="tag.main.class" value="com.crowdy.learn.SimilarityTag" />

  <path id="lib.path">
    <fileset dir="${lib.dir}">
      <include name="*.jar" />
    </fileset>
  </path>

  <target name="clean">
    <delete dir="${build.dir}" />
  </target>

  <target name="compile">
    <mkdir dir="${classes.dir}" />
    <javac srcdir="${src.dir}" destdir="${classes.dir}">
      <classpath refid="lib.path" />
    </javac>
  </target>

  <target name="main">
    <echo>ant is not defined. Use ant like, ant tag or ant model.</echo>
  </target>

  <!-- Running Like -->
  <target name="like" depends="clean,like.run" />

  <!-- Ant properties are not mutable.
       So if we have -Ddb=xyz passed in via cmd line then this will not be defined. -->
  <property name="simThreshold" value="0.05"/>
  <property name="minFeedback" value="40"/>

  <target name="like.jar" depends="compile">
    <mkdir dir="${jar.dir}" />
    <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
      <manifest>
        <attribute name="Main-Class" value="${like.main.class}" />
      </manifest>
      <fileset dir="${classes.dir}" includes="**/*.class" />
      <zipgroupfileset dir="${lib.dir}" includes="**/*.jar" />
    </jar>
  </target>

  <target name="like.run" depends="like.jar">
    <echo>SETTING parameter simThreshold to ${simThreshold}</echo>
    <echo>SETTING parameter minFeedback to ${minFeedback}</echo>
    <java jar="${jar.dir}/${ant.project.name}.jar" fork="true" maxmemory="1024m">
      <classpath refid="lib.path" />
      <arg value="${simThreshold}" />
      <arg value="${minFeedback}" />
    </java>
  </target>

  <!-- Running Model -->
  <target name="model" depends="clean,model.run" />
  <property name="minFeedbackCount" value="15"/>

  <target name="model.jar" depends="compile">
    <mkdir dir="${jar.dir}" />
    <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
      <manifest>
        <attribute name="Main-Class" value="${model.main.class}" />
      </manifest>
      <fileset dir="${classes.dir}" includes="**/*.class" />
      <zipgroupfileset dir="${lib.dir}" includes="**/*.jar" />
    </jar>
  </target>

  <target name="model.run" depends="model.jar">
    <java jar="${jar.dir}/${ant.project.name}.jar" fork="true" maxmemory="1024m">
      <classpath refid="lib.path" />
      <arg value="${minFeedbackCount}" />
    </java>
  </target>

  <!-- Running Tag -->
  <target name="tag" depends="clean,tag.run" />
  <property name="minTagCount" value="20"/>

  <target name="tag.jar" depends="compile">
    <mkdir dir="${jar.dir}" />
    <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
      <manifest>
        <attribute name="Main-Class" value="${tag.main.class}" />
      </manifest>
      <fileset dir="${classes.dir}" includes="**/*.class" />
      <zipgroupfileset dir="${lib.dir}" includes="**/*.jar" />
    </jar>
  </target>

  <target name="tag.run" depends="tag.jar">
    <java jar="${jar.dir}/${ant.project.name}.jar" fork="true" maxmemory="1024m">
      <classpath refid="lib.path" />
      <arg value="${minTagCount}" />
    </java>
  </target>

</project> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T09:52:15.073

Htop 也显示线程。我认为所有这些进程都是您的应用程序创建的线程。如果您不想看到它们，请按 shift+H。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:40:37.250

使用`fork attribute`in`java task`打开一个新的 Java 进程/VM，参见
[Ant 手动 java 任务](http://ant.apache.org/manual/Tasks/java.html)：
..“
`if enabled triggers the class execution in another VM (disabled by default)`
..”

这意味着每个 fork=true 都会打开一个新的 java 进程。

# sharepoint - 使用客户端对象模型创建文档库

> ID：16078885
> 
> 赞同：8
> 
> 时间：2013-04-18T09:12:54.873
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-clientobject

只是一个简单的问题，是否可以使用 SharePoint 2010 中的客户端对象模型创建文档库？

我知道您可以创建列表等。我是否正确地说文档库只是一种“特殊”类型的列表？

如何指定我创建的列表将是一个文档库？

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T09:33:46.753

是的。您可以`TemplateType`为您的`List`.

[模板类型列表](http://techtrainingnotes.blogspot.ch/2008/01/sharepoint-registrationid-list-template.html "模板类型列表")

```
using (ClientContext clientCTX = new ClientContext(url))
{
     ListCreationInformation lci = new ListCreationInformation();
     lci.Description = "My own DocLib";
     lci.Title = "Library";
     lci.TemplateType = 101;
     List newLib = clientCTX.Web.Lists.Add(lci);
     clientCTX.Load(newLib);
     clientCTX.ExecuteQuery();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-24T13:57:15.217

您还可以使用以下代码设置模板类型，我认为这让新程序员更清楚：

```
lci.TemplateType = (int) ListTemplateType.DocumentLibrary; 
```

# html - 框大小边框出现在悬停内容移动

> ID：16078894
> 
> 赞同：2
> 
> 时间：2013-04-18T09:13:23.013
> 
> 标签：html, css

代码：

```
 <div class="block">

    </div>

div.block
{
   box-sizing: border-box;
}
div.block:hover
{
   border: 1px solid orange;
} 
```

当使用 box-sizing 悬停块时，里面的内容正在移动，如何防止这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T09:15:19.853

```
div.block {
   box-sizing: border-box;
   border: 1px solid [your bg color];

}
div.block:hover {
   border: 1px solid orange;
} 
```

尝试这个 ：）

当您悬停时，它会添加一个边框。所以它会产生额外的像素。如果您为原始项目（此案例块）添加边框，则无需添加新像素，因为它们已经存在。

如下所述：border 1px solid transperparent 可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:17:19.667

如果您不关心旧的 IE 版本，最好尝试：

```
div.block:hover {
   box-shadow: 0 0 1px orange inset;
} 
```

或使用以下

```
div.block {
   border: 1px solid transparent;
}
div.block:hover {
   border-color:orange;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T09:18:24.350

添加填充，然后在悬停时删除等于边框像素。

```
div.block
{
   box-sizing: border-box;
   padding: 10px;
}
div.block:hover
{
   border: 1px solid orange;
   padding: 9px;
} 
```

# entity-framework - 在实体框架中创建动态复杂类型

> ID：16078902
> 
> 赞同：0
> 
> 时间：2013-04-18T09:13:30.670
> 
> 标签：entity-framework, entity-framework-4

我创建了一个动态返回列的存储过程，但我无法将其导入实体框架

有谁知道如何导入动态返回列的存储过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:59:18.613

EF 不支持具有动态结果集的存储过程。EF 必须修复结果集才能将其映射到复杂类型/实体类型。

# ruby - 有更好的方法吗？( Mongoid + TaggableWithContext )

> ID：16078907
> 
> 赞同：1
> 
> 时间：2013-04-18T09:13:44.560
> 
> 标签：ruby, mongodb, tags, sinatra, mongoid

有几天我正在尝试学习如何使用 MongoID，但我发现自己面临一个问题：

有更好的方法吗？

```
 Group.find_by(name: params[:group]).subgroups.tags.each do |l|
   puts l
   puts Group.find_by(params[:group]).subgroups.tags_tagged_with(l).to_a
  end 
```

我将 MongoID 与[mongoid_taggable_with_context组合使用](https://github.com/lgs/mongoid_taggable_with_context)

这个想法是找到属于一个组的所有标签，并为每个标签找到带有该标签的项目。

预期结果（示例）：

标记 1 ：
子组 2 子组 3
标记 2

：
子组 1
子组 2

等等

谢谢你的耐心

# php - php - 获取 shell 脚本中定义的变量的值

> ID：16078908
> 
> 赞同：0
> 
> 时间：2013-04-18T09:13:46.750
> 
> 标签：php, shell, exec

如何获取 shell 脚本中定义的变量的值？（脚本是一个配置文件，只包含变量定义）我不能在 exec 中使用“source”命令：

```
echo exec('var=2; echo $var'); //writes "2"
echo exec('source config.sh; echo $var'); //writes "" 
```

如何获取 shell 脚本中定义的变量的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:31:47.550

userThis 刚刚在终端上为我工作：

```
echo var=2 > shellscript
echo "<?php echo exec('source /home/user/shellscript; echo $var'); ?>" > phpscript.php
ls | grep script
phpscript.php
shellscript
php phpscript.php 
2 
```

所以我写了shellscript，然后是一个php来读取shell脚本并运行php脚本。它做了你想要的。

也许您可以添加其他 exec 组件来获得线索？

```
<?php 
echo exec('source /home/user/shellscript; echo $var',$out,$ret); 
echo "\nout0: ". $out[0]. "\nret: $ret\n";
?> 
```

这向我展示了：

```
~]$ php phpscript.php 
2
out0: 2
ret: 0 
```

# php - 将 hexdata 从 PHP 传递给 externam 程序

> ID：16078913
> 
> 赞同：0
> 
> 时间：2013-04-18T09:13:55.287
> 
> 标签：php, linux, exec, echo, stripslashes

这是我的问题：我希望将一些十六进制数据从 PHP 传递给外部应用程序：

```
exec('echo "'.$message.'" | /usr/bin/gateway'); 
```

$message 来自用户输入：

> 测试'”/'\'/”\””//

addslashes(), stripslashes() 不能解决我的问题。使用时：

```
$message = stripslashes($_POST['message']); 
```

我可以看到控制台日志：

```
sh: 1: Syntax error: Unterminated quoted string 
```

或空值

所以我开始思考，将输入转换为十六进制值并传递它们可能会有所帮助：

```
exec('echo -e '.$message.' | /usr/bin/gateway'); 
```

但是后来我在将十六进制数据传递给那个回声时遇到了麻烦。

所以我的问题是如何做到这一点？我需要将用户写入的完全相同的字符串传递给网关服务。- 将用户输入转换为十六进制形式，并将其放在 echo -e 中（如何？） - 或者以某种方式与引号和斜杠进行斗争

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:25:07.290

在一般情况下，由于 shell 的转义规则，您不能通过 shell 传递用户输入。您应该做的是处理新生成的进程的标准输入流并直接提供它。

您可以使用它[`popen`](http://www.php.net/manual/en/function.popen.php)来执行此操作：

```
$handle = popen('/usr/bin/gateway', 'w');
fwrite($handle, $_POST['message']);
pclose($handle); 
```

如果您需要做的比示例显示的更多并且`popen`没有提供足够的功能，[`proc_open`](http://www.php.net/manual/en/function.proc-open.php)这是一个更复杂和更强大的替代方案。

**警告：**将未经过滤的用户输入提供给外部进程会使您容易受到与进程如何解释和处理该输入相关的攻击。如果不受信任的用户可以访问您的应用程序，请强烈考虑将输入列入白名单！

# c# - NopCommerce：如何在订单详情页面中显示额外信息？

> ID：16078916
> 
> 赞同：3
> 
> 时间：2013-04-18T09:14:13.443
> 
> 标签：c#, e-commerce, payment-gateway, nopcommerce

我正在为 NopCommerce 开发一个支付网关。我有一些额外的信息（分期付款数）需要出现在“订单详情”页面的“信息”选项卡上 - 在管理区域中。基本上，我想在某处添加一个额外的字段，以显示客户选择支付的分期付款次数。

Nop 是否已经有办法做到这一点（添加自定义值）？还是我需要破解它？我真的不想更改主要项目中的源代码，除非我别无选择。

实际上，我对购物车页面也有相同的要求。我需要显示一些文字，例如“您可以分 [n] 期付款”。有没有办法让 Nop 从我的支付插件中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:59:54.997

实际上，为简单起见，如果您只想添加一些简单的信息，您可以使用订单备注或管理员评论。在这种情况下，我会去订购订单。

对于您的第二个要求，结帐期间有“付款信息”步骤，因此您可以在此步骤中显示您想要的任何消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-20T16:29:05.943

您可以通过使用 IGenericAttributeService 的实例来完成此操作。

**插入**

```
_genericAttributeService.SaveAttribute(customer, "CustomFieldName", "CustomValue"); 
```

**选择**

```
var customValue = customer.GetAttribute<string>("CustomFieldName"); 
```

看一下 CustomerController 的 Register post 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T07:24:12.870

好的，对于购物车页面，我添加了一个小部件，对于分期付款的数量，客户对订单备注的想法不满意，所以我决定将其添加到授权 ID 中......，因为它只是一个字符串。 . 所以现在我有这样的（例如）：“授权 ID：1234567890（5 个分期付款）”，这让我的客户很高兴。

# mysql - 触发器中的 MySQL IF 语句 - ELSE 不执行任何操作

> ID：16078917
> 
> 赞同：0
> 
> 时间：2013-04-18T09:14:20.293
> 
> 标签：mysql, if-statement, triggers, phpmyadmin

我正在尝试在 MySQL 中构建一个触发器，该触发器将在将新行插入表后运行。如果检测到错误，那么我想将该触发器写入表。否则，我不想将错误写入表。我想尝试避免添加无尽的空白行。

这是我的代码：

```
CREATE 
TRIGGER character_validation4 AFTER INSERT 
ON address FOR EACH ROW 
Begin 
IF(New.city REGEXP '^[^a-zA-Z0-9]') 
THEN 
INSERT INTO errorlog (city, mainprocessid) Values("There is an error with the city", New.ID));
END 
```

但我在最后一个括号上看到一个错误。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:33:38.080

```
DELIMITER \\

CREATE 
TRIGGER character_validation4 AFTER INSERT 
ON address FOR EACH ROW 
Begin 
IF(New.city REGEXP '^[^a-zA-Z0-9]') 
THEN 
INSERT INTO errorlog (city, mainprocessid) Values("There is an error with the city", New.ID);
END IF;
END \\

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:33:32.410

看来您在 New.ID 之后有一个额外的“）”。试试这个方法

```
CREATE TRIGGER character_validation4 
AFTER INSERT ON address FOR EACH ROW Begin 
IF(New.city REGEXP '^[^a-zA-Z0-9]') THEN INSERT INTO errorlog (city, mainprocessid) 
Values("There is an error with the city", New.ID);
END IF;
END; 
```

# spring - Spring: link between WebApplicationContext and ApplicationContext?

> ID：16078922
> 
> 赞同：1
> 
> 时间：2013-04-18T09:14:42.290
> 
> 标签：spring, model-view-controller, applicationcontext

I am working on a Spring application. I started from creating a small java app using spring. Later, it became necessary to add a web interface. I decided to use Spring MVC. Now I am confused. In my web.xml I have

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/mvc-dispatcher-servlet.xml,
        /WEB-INF/applicationContext.xml
    </param-value>
</context-param> 
```

where mvc-dispacher-servlet.xml contains beans necessary for web logic while applicationContext.xml contains beans performing some specific operations. My question is: Are beans in these files going to be aware of each other? Is it going to be a one big container which includes beans from both config files? or these containers are separate?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:34:27.010

是的，它将在一个从 Web 应用程序上下文加载的上下文中。它与使用应用程序上下文并向其传递多个文件时所做的相同。

# javascript - How does Google hide HTML source of search results?

> ID：16078926
> 
> 赞同：3
> 
> 时间：2013-04-18T09:14:51.807
> 
> 标签：javascript, html, search, google-search

When you try to view the source code of a Google [search results page](http://goo.gl/jWjA8) you just see a [bunch of javascript code](http://goo.gl/Ucbek) instead of readable text. How does Google do that?

I have searched through the web but couldn't find a good explanation, only thing I found was this: [http://goo.gl/FIvD6](http://goo.gl/FIvD6) and it is not really helpful.

I am not a web developer but I just got curious. A brief explanation would be nice. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:29:12.553

Google 使用您记下的 javascript 构建 DOM。它这样做有几个原因：

*   减少服务器上的负载以使用 HTML 标记生成每个动态结果集。
*   Google 在 JSON 提要（[示例](http://pastebin.com/VArKZ9Rc)）中返回结果 - pastebin。与完整的 HTML 片段或全新的页面相比，生成 JSON 响应所需的处理能力更少
*   速度。假设用户有良好的互联网连接，与服务器端相比，客户端的页面渲染速度可以忽略不计。

如上所述，跳进萤火虫并环顾四周:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:19:27.233

Google 通过 Ajax 加载其他元素，因此如果您查看源代码，您将无法获得它们。进行新查询后，您可以使用 Firebug 之类的工具来检查 DOM 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:17:09.327

谷歌通过使用一堆客户端 JavaScript 生成页面来做到这一点。这几乎可以肯定是副作用，而不是设计目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T09:27:52.740

该链接实际上解释得很清楚。真正的重点是，谷歌并没有“隐藏”任何东西。所有这些都有一个额外的层，称为 DOM（文档对象模型）。当从 Web 服务器请求页面时，Web 服务器可能会以一些基本的 HTML 和大量的 JavaScript 代码进行响应。然后，您的浏览器会解释此响应。它将 HTML 元素加载到 DOM 中，然后开始处理所有 JavaScript 代码，该 JavaScript 通常包含许多操作 DOM 的指令（页面的内存表示）。它可能会加载一些额外的数据并插入新的点点滴滴来显示。如果您愿意，“浏览器窗口”会呈现 DOM 中的任何内容。这不一定与原始请求中的内容相同，

# asp.net - Add gridview nested dropdown.selectedValue to database

> ID：16078931
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:08.250
> 
> 标签：asp.net, gridview

I have two tables relevant to this question...

```
tblCellTechnology
  CellTechnologyID, PK
  Description
  CellName

tblActionSchedule
  ActionID, PK
  ActionPhase
  ActionPeriod
  CellTechnology, FK 
```

I have a bulk edit grid view with text boxes displaying the ActionID, Phase, Period and a dropdownlist linked directly to the CellTechnologyID from tblCellTechnology (as per image). I also have another textbox displaying the cell name based on the value in tblScheduleAction.CellTechnologyID (ActionDescription is pulled from another table).

How can I get the selected value from the ddl and write that to tblScheduleAction.CellTechnologyID? When I hard add a CellTechnologyID to tblScheduleActionID, the cellname textbox displays the correct value. I just need to be able to store the ddl.SelectedValue to tblScheduleAction.CellTechnologyID. I am using masterpages and sqldatasources to handle the inserting/updating/deleting of records.

I want the celltechnologyid column in the bottom gridview to display the list of potential celltechnologyid, it does as it is directly linked to that column from the top grid view, the selected value should also be stored in tblScheduleAction.CellTechnologyID. The cellname column should display the respective cellname. As they say, a picture is worth a thousand words... [http://imgur.com/21FjOzh](http://imgur.com/21FjOzh)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:22:38.523

通过嵌套的网格视图，我假设您指的是每个父网格视图行内的子网格视图。获取子 gridview 控件的值非常容易。

> 如何从 ddl 中获取选定的值并将其写入 tblScheduleAction.CellTechnologyID？

1.  您可以在保存记录`FindControl`的循环中找到 childgridview`foreach`
2.  然后您将使用查找控件查找下拉列表并保存到您的数据库

检查工作示例（Aspx）

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="NestedGridviews.aspx.cs" Inherits="WebApplication1.NestedGridviews" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:GridView ID="gvParent" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="CategoryID" DataSourceID="sdsParentGrid" 
            onrowdatabound="GridView1_RowDataBound">
            <Columns>
                <asp:BoundField DataField="CategoryID" HeaderText="CategoryID" 
                    InsertVisible="False" ReadOnly="True" SortExpression="CategoryID" />
                <asp:BoundField DataField="CategoryName" HeaderText="CategoryName" 
                    SortExpression="CategoryName" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:GridView ID="gvChildGrid" runat="server" AutoGenerateColumns="False" 
                            DataKeyNames="ProductID" DataSourceID="sdsChildGrid">
                            <Columns>
                                <asp:BoundField DataField="ProductID" HeaderText="ProductID" 
                                    InsertVisible="False" ReadOnly="True" SortExpression="ProductID" />
                                <asp:BoundField DataField="ProductName" HeaderText="ProductName" 
                                    SortExpression="ProductName" />
                                <asp:BoundField DataField="SupplierID" HeaderText="SupplierID" 
                                    SortExpression="SupplierID" />
                                <asp:BoundField DataField="CategoryID" HeaderText="CategoryID" 
                                    SortExpression="CategoryID" />
                                <asp:CheckBoxField DataField="Discontinued" HeaderText="Discontinued" 
                                    SortExpression="Discontinued" />
                                <asp:TemplateField HeaderText="My DropDown Column">
                                    <ItemTemplate>
                                        <asp:DropDownList ID="ddlTest" runat="server">
                                            <asp:ListItem>Potatoes</asp:ListItem>
                                            <asp:ListItem>Tomatoes</asp:ListItem>
                                            <asp:ListItem>Mangoes</asp:ListItem>
                                        </asp:DropDownList>
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                        </asp:GridView>
                        <asp:SqlDataSource ID="sdsChildGrid" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" 
                            SelectCommand="SELECT [ProductID], [ProductName], [SupplierID], [CategoryID], [Discontinued] FROM [Alphabetical list of products] WHERE ([CategoryID] = @CategoryID)">
                            <SelectParameters>
                                <asp:Parameter Name="CategoryID" Type="Int32" />
                            </SelectParameters>
                        </asp:SqlDataSource>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="sdsParentGrid" runat="server" 
            ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" 
            SelectCommand="SELECT [CategoryID], [CategoryName], [Description] FROM [Categories] ORDER BY [CategoryName]">
        </asp:SqlDataSource>

    </div>
    <asp:Button ID="btnSave" runat="server" onclick="btnSave_Click" 
        Text="Save to Database" />
    </form>
</body>
</html> 
```

代码隐藏

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class NestedGridviews : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                GridView gvChild = e.Row.FindControl("gvChildGrid") as GridView;
                SqlDataSource sdsTemp = e.Row.FindControl("sdsChildGrid") as SqlDataSource;
                if (sdsTemp!=null)
                {
                    sdsTemp.SelectParameters[0].DefaultValue = gvParent.DataKeys[e.Row.RowIndex]["CategoryID"].ToString();
                    if (gvChild != null)
                    {
                        gvChild.DataBind();
                    }
                }
            }
        }

        protected void btnSave_Click(object sender, EventArgs e)
        {
            foreach (GridViewRow growParent in gvParent.Rows)
            {
                // Find child gridview for each row
                GridView gvChild = growParent.FindControl("gvChildGrid") as GridView;
                if (gvChild != null)
                {
                    // use a foreach loop to find your control
                    foreach (GridViewRow growChild in gvChild.Rows)
                    {
                        DropDownList ddlTemp = growChild.FindControl("ddlTest") as DropDownList;
                        if (ddlTemp != null)
                        {
                            Response.Write(ddlTemp.SelectedValue.ToString());
                        }
                    }
                }
            }
        }
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/cgcX2.png)

# c# - Drawing a GUI in XNA

> ID：16078932
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:09.447
> 
> 标签：c#, user-interface, xna, overlay, projects

I'm currently working on making an XNA 2D platformer, and I'm wondering if it's possible to draw a kind of static GUI over the game?

What i mean here is that while the game updates and the players position changes etc, the GUI would be drawn on a kind of static layer (overlay?), that would be the size of the window the game is being run in. That way the game wouldn't have to constantly update the GUI's position and thus be a little bit nicer to handle.

Any ideas?

Thanks for your time

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:39:31.900

是的，你可以使用 spritebatch 来绘制它们 :)

```
//HudTexture is a transparent texture the size of the window/screen, with hud drawn onto it.
SpriteBatch.Draw(HudTexture, Vector2.Zero, Color.White);
//Let's say that it works well to draw your score at [100,100].
SpriteBatch.DrawString(HudFont, Points.ToString(), new Vector2(100,100), Color.White); 
```

如果您打算制作更多 GUI（按钮等），您可能想查看我写给另一篇文章的这个答案： [XNA DrawString() draws only a partial string](https://stackoverflow.com/questions/15078203/xna-drawstring-draws-only-a-partial-string/15084931#15084931)

还; 对于绘图分数等，由于 ToString，我经历了相当多的装箱/拆箱。出于这个原因，我经常有一个字符串数组来表示分数：

```
String[] ScoreText = new String[100000]; //As big as your max score

//In Initializing method:
for (int i = 0; i < ScoreText.Length; i++)
    ScoreText[i] = i.ToString();

//In draw:
SpriteBatch.DrawString(HudFont, ScoreText[Points], new Vector2(100,100), Color.White); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:42:18.533

`SpriteBatch`当然，您可以使用例如在任何您想要的地方绘制任何精灵。

你如何管理它取决于你。只是不要给出任何转换矩阵，事物将在您指定的坐标处绘制。

你最终会绘制你的关卡（例如，它会被一些相机位置偏移），然后在上面绘制你的 GUI 元素，没有偏移。

# jquery - Qunit Assert mockajax response

> ID：16078933
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:11.323
> 
> 标签：jquery, mocking, qunit

To test the Jquery Ajax reponse, I am using mock ajax with Qunit. I have to assert the Mock Ajax reponse, but in my test case,Assert statements are running first and then i am getting response from Mock ajax.

How to make sure that mock ajax response is available before calling assert statements in Qunit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:08:13.227

你需要做`asyncTest`一个简单的`test`调用。这是我使用的一个示例：

```
...
asyncTest("test title", function() {
  $.mockjaxClear(); // clear any existing mock jax entries (could be in a setup method)
  $.mockjax({ // pass in your request matcher / response object
    url: '/some/file.php',
    type: 'post',
    status: 200,
    dataType: 'json',
    response: function(req) {
      this.responseText = JSON.stringify({some: "data"});
    }
  });

  $.ajax({
    url: '/some/file.php',
    type: 'post',
    dataType: 'json',
    success: function(d) {
      a.deepEqual(d, {some: "data"}, "Object data is correct in callback");

      // other tests

      start(); // this tells QUnit to start back up, async is done
  });
  ...
}); 
```

[以及QUnit 中 Async 控制的](http://api.qunitjs.com/category/async-control/)一些文档。

# java - 向 ARFF 文件添加注释

> ID：16078936
> 
> 赞同：5
> 
> 时间：2013-04-18T09:15:19.700
> 
> 标签：java, comments, weka, arff

这是我在这个论坛上的第一个问题....我正在使用 WEKA API 在 java 中制作数据挖掘应用程序。我首先进行预处理阶段，当我保存 ARFF 文件时，我想添加几行（作为注释）指定我对文件所做的预处理任务......问题是我没有知道如何从 java WEKA API 向 ARFF 文件添加注释。为了保存文件，我像这样使用 ArffSaver 类...

```
 try {
        ArffSaver saver = new ArffSaver();
        saver.setInstances(dataPost);
        saver.setFile(arffFile);
        saver.writeBatch();
        return true;
    } catch (IOException ex) {
        Logger.getLogger(Preprocesamiento.class.getName()).log(Level.SEVERE, null, ex);
        return false;
    } 
```

如果有人能给出一些想法，我会非常高兴......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:15:41.643

您应该避免在 .arff 文件上编写注释，在使用 Java 编写时更是如此。这些文件非常“解析器敏感”。由于这个特殊原因，用于创建这些文件的 Weka API 受到限制。

尽管如此，您始终可以使用**%**符号手动添加您的评论。这就是说，我不建议您将实例、属性和值以外的任何内容写入 .arff 文件。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-18T02:18:56.050

我没有理由**不**将注释写入 ARFF 文件的标题。[规范](https://www.cs.waikato.ac.nz/ml/weka/arff.html)清楚地说：

> 以 % 开头的行是注释。

因此，虽然它在技术上是有效的，但如果您想使用该`ArffSaver#setFile`方法可能会很困难。这个方法在内部做了很多（方便，但有些随意和未指定）工作，直到它最终调用

```
setDestination(new FileOutputStream(m_outputFile)); 
```

如果这不是必需的，最简单的选择是直接写入`OutputStream`，然后可以简单地将其设置为`ArffSaver`. 这可以包装在一个小的辅助方法中，例如，像这样：

```
static void writeArff(
    Instances instances, 
    List<String> commentLines, 
    OutputStream outputStream) throws IOException
{
    ArffSaver saver = new ArffSaver();
    saver.setInstances(instances);
    if (commentLines != null && !commentLines.isEmpty())
    {
        BufferedWriter bw = new BufferedWriter(
            new OutputStreamWriter(outputStream));
        for (String commentLine : commentLines)
        {
            bw.write("% " + commentLine + "\n");
        }
        bw.write("\n");
        bw.flush();
    }
    saver.setDestination(outputStream);
    saver.writeBatch();
} 
```

当这样称呼它时

```
 List<String> comments = Arrays.asList("A comment", "Another one");
writeArff(instances, comments, outputStream); 
```

然后给定的注释将被插入到 ARFF 文件的顶部。

# php - 在标头标签中传递参数

> ID：16078938
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:21.843
> 
> 标签：php, html

我正在尝试将值传递给标题。

有没有办法将参数传递到新网页。

下面是我的标题代码（它不起作用），我想将“myCode”的参数传递给页面。

```
header("Location: http://evon1991-z.comp.nus.edu.sg/Kxclusive/insertDetail.php".'$myCode'); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:17:00.090

变量不会在单引号内展开。字符串连接的结果将类似于：

```
http://evon1991-z.comp.nus.edu.sg/Kxclusive/insertDetail.php$myCode 
```

你需要：

```
header("Location: http://evon1991-z.comp.nus.edu.sg/Kxclusive/insertDetail.php?param=$myCode"); 
```

..假设`$myCode`是一个普通的值。如果 `$myCode`是完整的百分比编码查询字符串格式，`?`请在主 URL 前面加上 a 并附加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:16:57.690

这取决于你想如何通过它。如果你想通过 GET 这里的解决方案来做到这一点。

```
Header("Location: http://evon1991-z.comp.nus.edu.sg/Kxclusive/insertDetail.php?myCode=".$myCode); 
```

其他方法例如 $_SESSION

此外，如果您将变量放入 '' 文字中，PHP 将不会对其进行解析

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:18:53.117

我认为您的问题是由于您将变量包含在单引号中：

```
'$myCode' 
```

这实际上会添加`$myCode`到字符串中，因为变量解析不是在单引号字符串中完成的。相反，完全删除引号并将其放在您的字符串中：

```
header("Location: http://evon1991-z.comp.nus.edu.sg/Kxclusive/insertDetail.php$myCode"); 
```

这假设`$myCode`包含您需要传递给附加的完整字符串（即格式`?param=value&param2=value2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:18:04.853

用这个

```
 header("Location: http://evon1991-z.comp.nus.edu.sg/Kxclusive/insertDetail.php?data=".$myCode); 
```

# iphone - iphone中的自定义动画

> ID：16078940
> 
> 赞同：1
> 
> 时间：2013-04-18T09:15:25.970
> 
> 标签：iphone, ipad, animation, core-graphics

我正在创建具有如此多自定义的应用程序。从某种意义上说，定制，我想给我的应用程序带来新的面貌。在自定义部分，我想在我的应用程序中添加[这种](http://dribbble.s3.amazonaws.com/users/124059/screenshots/976474/gif2.gif)动画。

我在互联网上搜索了最后我发现了这么多 3d 动画。但这些结果并不能满足我的需求。

建议我一些代码来使动画成为可能。

如果你提供任何源代码，那对我来说真的很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:49:49.397

这正是你想要的。像这样设置你的视图。_transitionFrame 是标签出口。该标签放置在您的显示视图上。

包括 QuartzCore 框架并定义一个将度数转换为弧度的方法，如下所示

```
#import <QuartzCore/QuartzCore.h>
#define DEGREES_TO_RADIANS(angle) ((angle) / 180.0 * M_PI) 
```

在视图中确实加载方法编写了以下代码。

```
 - (void)viewDidLoad
{
    CGRect preFrame=_transitionFrame.frame;
    preFrame.origin.y+=preFrame.size.height/2;
    [_transitionFrame setFrame:preFrame];

    [UIView beginAnimations:nil context:nil];
    CATransform3D _3Dt = CATransform3DRotate(_transitionFrame.layer.transform,DEGREES_TO_RADIANS(90), 1.0, 0.0,0.0);
    [UIView setAnimationRepeatAutoreverses:YES];
    [UIView setAnimationRepeatCount:100];
    [UIView setAnimationDuration:1];

    [_transitionFrame.layer setAnchorPoint:CGPointMake(0.5, 1)];
    _transitionFrame.layer.transform=_3Dt;
    [UIView commitAnimations];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/x9kdS.png)

# jquery - jquery fullcalendar：初始化完成了吗？

> ID：16078941
> 
> 赞同：3
> 
> 时间：2013-04-18T09:15:27.480
> 
> 标签：jquery, initialization, fullcalendar

我使用此功能更改一个日历的日期（arshaw 的 jquery fullcalender）。

```
function cal_gotoDate(d){
    console.log('cal_gotoDate ' + curCal + ' ' + d);    
    $('#calendar'+curCal).fullCalendar('gotoDate', d);
    cal_setTitle();
    return false;
} 
```

问题：日历将使用ajax动态加载。当用户尝试更改日期时，可能会发生未加载日历的情况。因此，如果它们未初始化，我会收到错误消息：

```
TypeError: $(...).fullCalendar is not a function 
```

我想检查 fullcalender`$('#calendar'+curCal)`是否已初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:34:13.153

我不确定它是否是最好的解决方案，但它可以完美运行 - 使用完整日历[加载](http://arshaw.com/fullcalendar/docs/event_data/loading/)回调并设置全局布尔标志，例如：

```
<script type="text/javascript">
    var globalflag = false;
    $(document).ready(function() {
        $('#calendar').fullCalendar({
            //calendar initialization code
            loading: function (bool) { 
                if (!bool){
                    globalflag = true;
                }
                else{
                    globalflag = false;
                }
            }
        })
    });
</script> 
```

现在您可以检查`globalflag`状态。

例如，我使用加载回调来显示/隐藏进度指示器。

# c# - Published Web files, can they be converted back to solution?

> ID：16078942
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:29.970
> 
> 标签：c#, asp.net, vb.net, publishing

Is it possible to take a set of published web files and convert them back into a solution? I say this because a solution has been lost from our system, and the only files that can be found are the actual published files. I have looked around and can't seem to find anything on the matter, any help would be great!

Thanks a lot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:00:00.937

对于 Web 应用程序，源代码被编译成 DLL。据我所知，没有简单的方法可以将 Web 应用程序反向工程回源代码。如果您想进一步研究，请使用“反向工程 Web 应用程序 DLL”或“从 DLL 中检索源代码”等搜索词。祝你好运！

# jakarta-ee - 在表示实体 JPA 中日期的字段上指定约束

> ID：16078943
> 
> 赞同：1
> 
> 时间：2013-04-18T09:15:32.273
> 
> 标签：jakarta-ee, jpa

我必须对我的实体干预的字段“heureFin”和“heureDebut”设置一个约束，我想知道如何精确这个约束：heureFin>heureDebut？这是我的实体：

```
public class Intervention implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Size(min = 1, max = 50)
    @Column(name = "IdIntervention", length = 50)
    private String idIntervention;
    @Basic(optional = false)
    @NotNull
    @Column(name = "HeureDebut", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date heureDebut;
    @Basic(optional = false)
    @NotNull
    @Column(name = "HeureFin", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date heureFin;
} 
```

是否有可能，或者我应该在其他地方处理这个约束？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:37:10.400

在会员级别是不可能的。您应该使用**类级别约束**并实现自己的约束验证器（它将实例作为 isValid() 方法的参数，便于比较）。

创建您的自定义验证器：

```
public class HourRangeValidator implements Constraint<InterventionHourRange, Intervention> { 
```

`isValid`并使用您需要的比较逻辑实现方法。

创建自定义注释：

```
@ConstraintValidator(HourRangeValidator.class)
@Target(TYPE)
@Retention(RUNTIME)
public @interface InterventionHourRange {
    String message() default "{your.error.message}";
    String[] groups() default {};
} 
```

并注释您的实体：

```
@InterventionHourRange
public class Intervention implements Serializable { 
```

见[http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html)

# javascript - 从数据库预加载图像

> ID：16078944
> 
> 赞同：-2
> 
> 时间：2013-04-18T09:15:35.650
> 
> 标签：javascript, jquery, database, image, preload

我需要从我的数据库中预加载图像，然后将它们显示在 8 x 8 的滑块中。我该怎么做？

```
<script type="text/javascript">
                function preload(arrayOfImages) {
                $(arrayOfImages).each(function(){
                $('<img/>')[0].src = this;
                // Alternatively you could use:
                // (new Image()).src = this;
    });
}
            </script>
<script>
 preload([HERE HAVE I TO DO THE SELECT FROM MY DATABASE??]);
</script> 
```

滑块是这样的：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#foo1").carouFredSel({
        items               : 8,
        direction           : "left",
        width               : "100%",
        scroll : {
            items           : 1,
            easing          : "swing",
            duration        : 300
        }                   
}); 

    $("#foo1_next").click(function() {
        $("#foo1").trigger("next", 4);
    });
    $("#foo1_prev").click(function() {
        $("#foo1").trigger("prev", 4);
    });
});
</script> 
```

那我该怎么办？

谢谢大家 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:42:37.870

你可以有这样的`prefetch`链接关系：

```
<link rel="prefetch" href="location/of/image.png" /> 
```

这里推荐：http: [//davidwalsh.name/html5-prefetch](http://davidwalsh.name/html5-prefetch)用于幻灯片。

# extjs - 在 sencha touch 容器中设置活动项目

> ID：16078948
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:40.987
> 
> 标签：extjs, sencha-touch, containers

我是使用 sencha touch 2 开发的新手，我有一个包含商家列表的容器

我的容器有以下代码

```
Ext.define('WL.view.tablet.Container2', {

    extend: 'Ext.Container',
    xtype: 'tabletContainer2',

    config: {

        layout: 'card',

        items: [
            {
                xtype: 'merchants',
                docked: 'left',
                width: 320,
                style: 'border-right: 2px solid #000'
            },
            {
                xtype: 'container',
                cls: 'tabletSplash',
                flex: 1
            }
        ]
    }
}); 
```

当点击列表中的任何商家时，我想与商家列表一起显示商家产品列表，这两个列表将并排显示

我尝试使用以下代码来实现

```
 var products = Ext.widget('products');
    Ext.widget('tabletContainer').setActiveItem(products); 
```

但它对我来说没有按预期工作，关于如何在我的容器中设置活动项目的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:24:08.330

我不确定您的代码中有什么`products`或内容`tabletContainer`，但如果您想使用卡片布局将任何视图添加到某个视图，我会这样做：

```
var prods = Ext.getCmp("WL.view.tablet.Products");
Ext.getCmp("tabletSplashId").animateActiveItem(prods, {type: 'slide', direction: 'left', duration : 500}); 
```

`tabletSplashId`您要在其中设置此视图的容器的 ID 在哪里。

# port - Port Forwarded; Port Check says port is open but unable to connect

> ID：16078951
> 
> 赞同：0
> 
> 时间：2013-04-18T09:15:53.280
> 
> 标签：port, portforwarding

I have setup the Swann DVR Surveillance System. I am able to access the web client at 192.168.1.99:85 (static ip in internal LAN). I have port forwarded 85 packets to 192.168.1.99\. But when I access my external ip eg xxx.xxx.xxx.xxx:85 I get unable to connect error.

I checked if the port is open in an online tool and it says port 85 is open. HEre is my port forwarding page:

![enter image description here](https://i.stack.imgur.com/gghR0.png)

Please Help me. Thanks in advance

EDIT: I have tried changing ports to 89, 9001, 8080 and no luck..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T05:51:34.383

我终于从朋友那里弄清楚我做错了什么。似乎有一种叫做 NAT Loopback ( [https://en.wikipedia.org/wiki/Network_address_translation#NAT_loopback](https://en.wikipedia.org/wiki/Network_address_translation#NAT_loopback) ) 的东西，它允许您从自己的网络中访问您的公共 IP 地址。大多数路由器默认禁用此功能。因此，每当您尝试访问您的 IP 地址时，数据包都会被丢弃，并且您会收到 Host Unreachable ICMP 数据包。

无论如何，要使用它，请尝试在您的路由器上启用 NAT 反射或 NAT 环回。

如果您没有该功能，您可以从网络外部测试您的系统，它会正常工作。很抱歉没有尽快报告答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T18:34:51.843

是的，同样的问题。正如史蒂夫罗宾逊所说，你不能总是从你的 NAT 访问你的公共 IP。尝试运行 Apache 并使用您的手机（关闭 WiFi 并打开移动数据）来测试是否是这种情况。

# lotus-domino - domParser.Process throws Dom parser operation failed in lotus script

> ID：16078954
> 
> 赞同：0
> 
> 时间：2013-04-18T09:16:01.017
> 
> 标签：lotus-domino, lotus, lotusscript, domparser

I need to read xml file from local disk using lotus script. I added the code in the script library and called from the notes view.

```
 origXML = "d:\dxl\xmldom.xml"
  outputFile = "d:\dxl\DOMtree.txt"

  On Error Goto errh

  Set session = New NotesSession    
  Set db = session.CurrentDatabase

  'create the output file
  Set outputStream =session.CreateStream
  outputStream.Open (outputFile)
  outputStream.Truncate

  Set inputStream = session.CreateStream
  inputStream.Open (origXML)

  'create DOM parser and process
  Set domParser=session.CreateDOMParser(inputStream, outputStream)
  domParser.Process 
```

output and input stream , all are getting. But It throws the following error in domParser.Process

Dom parser operation failed

Please help me to solve this. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T12:34:48.240

我有同样的错误。详见`domParser.log`. 可能不正确的编码类型或未通过 url 找到 xsd|xslt 样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T20:36:35.257

我遇到了同样的问题。除了删除 XML 标头属性之外，您还可以执行以下操作。 [InputValidationOption 属性](http://notes.helsinki.fi/help/help8_designer.nsf/f4b82fbb75e942a6852566ac0037f284/f515ba63257774168525731b004a2632?OpenDocument)

```
'create DOM parser and process
Set domParser = session.CreateDOMParser(inputStream, outputStream)
domParser.InputValidationOption = VALIDATE_NEVER
domParser.Process 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T16:24:10.210

问题出在 xml 标头中。它是

```
<xml xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" 
    xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" 
    xmlns:rs="urn:schemas-microsoft-com:rowset" 
    xmlns:z="#RowsetSchema"> 
```

我删除了所有属性。我更改为`<xml>`，并且可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:47:19.523

取自设计器帮助：

> 注意 在 7.0 版中，此方法已得到增强，可以处理位于 URL 的 DTD。但是，当使用 URL 时，如果服务器上的负载过重，DOMParser.Process() 将间歇性地失败并引发错误 #4602:"DOM parser operation failed"，从而导致超时。如果发生这种情况，调用应用程序将需要重试。

所以很可能是dtd的问题，要么dtd服务器没有响应，要么响应慢。我遇到了同样的问题，如果进程失败，只需重试即可解决。请参见下面的代码：

```
Public Sub ParseString(s As String)
    On Error 4602 GoTo ParserOperationFailed

    Const MAX_RETRIES = 10

    Dim isProcessed As Boolean
    Dim numOfRetries As Integer

    Set domParser = session.Createdomparser(s)

    Do While numOfRetries < MAX_RETRIES And isProcessed = False
        Call domParser.Process()
        isProcessed = true
Retry:
    Loop

    If Not isProcessed Then
        Error 1000, "Unable to get dtd, DOM parser operation failed, tried " + CStr(numOfRetries+1) + "times"
    End If

    Set xmlDoc = domParser.Document

    Set Me.m_rootNode = xmlDoc.Documentelement

    Exit Sub
ParserOperationFailed:
    isProcessed = False
    numOfRetries = numOfRetries + 1
    Resume Retry
End Sub 
```

# batch-file - How can I copy a particular file from a source directory to a destination directory while recreating the folder structure

> ID：16078955
> 
> 赞同：0
> 
> 时间：2013-04-18T09:16:01.910
> 
> 标签：batch-file, dos

I have to use batch only . The destination folder should have the copied file along with the directory structure of the source directory (for the file copied only). Example :

Source: C:\folder1\folder2\folder3\text1.txt Destination: C:\backup

After the command is executed The destination folder should look like : C:\backup\folder1\folder2\folder3\text1.txt

I must use the command from C:\ (root directory) only . In my source there are multiple files with name ="text1.text" ,but with different folder structure. I want only that "text1.txt" to be copied whose path i am providing (source), and not all files named "text1.txt" [this can be achieved using--- xcopy Source\text1.txt* Destination /S /Y].PLease help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:06:20.643

```
@ECHO OFF
SETLOCAL
:: This command alone will accomplish the task using ONLY XCOPY
:: BUT I'm changing the directorynames to suit my system
::
XCOPY c:\sourcedir\a\b\text1.txt u:\backup\sourcedir\a\b\
::
:: Or leave the last XCOPY out and this batch will do the same
:: if you supply the parameter "c:\sourcedir\a\b\text1.txt"
::
:: IE. at the prompt, enter
::
:: thisbatchname "c:\sourcedir\a\b\text1.txt"
::
:: (where the quotes are optional UNLESS the parameter contains 
::  a special character or a space"
::
XCOPY "%~1" "u:\backup2%~p1" 
```

第一个 XCOPY 应该很明显。

第二个通过使用`%~1`which 是第一个参数，减去封闭引号（如果有） - 然后重新引用以确保生成的字符串被解析为单个字符串。

XCOPY 字符串的第二个参数`U:\BACKUP2`加上`%~p1`-`p`参数 1 的 - PATH，然后引用整个内容。

因此，`"c:\sourcedir\a\b\text1.txt"`作为参数执行的命令将是

```
xcopy "c:\sourcedir\a\b\text1.txt" "u:backup2\sourcedir\a\b\" 
```

根据需要创建目标树。

# ajax - Youtube API、nexturl 和 XMLHttpRequest

> ID：16078958
> 
> 赞同：2
> 
> 时间：2013-04-18T09:16:14.417
> 
> 标签：ajax, youtube-api

我已经设法通过 CORS 和 XMLHttpRequest 将视频上传到 YouTube，以便我可以在上传时提供进度条。但是，在上传达到 100% 并且视频出现在 YouTube 频道中后，将调用错误处理程序。

我认为这与必须作为表单操作的一部分提供的 nextUrl 参数有关。有没有人遇到过这个问题，有没有人有解决方法？

我在 StackOverflow 上看到了这个（[我可以在没有使用 FormData 刷新整页的情况下上传到 youtube 吗？](https://stackoverflow.com/questions/13340903/can-i-upload-to-youtube-without-a-full-page-refresh-using-formdata)），但这并没有帮助，因为我不想在我们的服务器上托管视频。

干杯西蒙

# javascript - 我应该在网络游戏中使用固定时间步长还是动态时间步长？

> ID：16078964
> 
> 赞同：1
> 
> 时间：2013-04-18T09:16:36.300
> 
> 标签：javascript, box2d, timedelta, vert.x

我目前正在开发一个使用 Box2D JS 和 Vert.x 作为服务器->客户端框架的在线网络游戏。

我已经搜索了每种方法的优缺点，我真的相信动态时间步长要好得多，因为它并不假设每个客户端都具有相同的处理能力，但是，有一些（很多）人认为固定时间步长是好多了。

请赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:55:23.327

如果您的时间步不同步，您基本上可以将确定性抛到脑后。即使是这样，确定性也很困难。

在模拟上花费更少的计算将产生最初可能并不明显的实际成本。对于每个不同的设置（在动态时间步长/迭代的情况下，对于每个不同的单独执行），相同输入上的结果行为可能不同。您可以让用户在非常慢的硬件上运行，这可能会完全欺骗您的关卡。

在多人游戏引擎环境之外，确定性可能稍微不那么重要，但是仅仅没有确定性系统会使推理几乎任何事情（游戏机制，游戏难度，漏洞）变得更加困难，这几乎可以影响我的所有类型的游戏能想到。想象一个不确定的益智游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:23:28.683

我真的相信修复时间步长是最好的方法。我记不太清楚了，但在我们的一款游戏中，我们遇到了碰撞期间动态时间步长的问题。当然，大多数人会说我们的碰撞检测代码要么写得不好，要么我们可以使用一些先进的技术，如光线投射，但我们最终以固定的时间步长着陆，使用 for 循环在延迟似乎更长时进行物理更新，因为设备处理能力缓慢或其他原因（CPU 忙？）等。这个过程很简单，我们都对结果很满意 :)

我认为 Box2D 的创建者本人赞成固定时间步长，虽然找不到资源 atm，但我在某处读过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:08:46.810

我们可以假设您正在尝试在所有客户端上获得相同的模拟结果吗？如果是这样，我认为您需要解释为什么让他们都进行不同的计算是个好主意！

或者您的意思是所有客户端都将执行相同的计算，但时间步长会随着模拟的进行而变化，但这是*相当*令人头疼的实现和调试。为了让每个客户端得出相同（或至少相似）的结果，他们需要为每个步骤使用相同长度的时间步长，因此您也需要通过网络发送它，例如。物理步 32241 是 16 毫秒，步 32242 是 18 毫秒。除了需要额外的网络流量之外，每个客户端在收到此信息之前都不知道要使用多长的时间步长。它从哪里接收它？大概最慢的客户端将决定每个人应该走多快？我看不出它以任何其他方式工作。所以客户端也必须不断地让服务器知道他们可以处理多少处理，速度越快的客户端就会被拖到那个级别的性能上。

但正如史蒂文所说，即使解决了这些技术难题，也会出现其他问题。最值得注意的是重力的影响会随着不同的时间步长而变化，因此例如在平台游戏中，玩家可以跳跃的高度会不断变化。如果有通常可以访问的平台，当较慢的客户端加入时，它们可能会突然变得无法访问。

如果您确实意味着每个客户端将使用任何感觉的时间步长，那将起作用，但服务器需要以非常频繁的间隔发送世界状态的官方快照，以使所有客户端都被 snyced。从技术上讲，这将更容易实现，并且每个客户端都将尽可能顺利地运行，但随着世界状态被更正为官方状态，对于运行速度比服务器更快或更慢的客户端来说，会有更多的抖动。嗯……也许这毕竟是最好的办法。您可能会对这篇解释 Quake3 如何执行以下操作的文章感兴趣：http: [//trac.bookofhook.com/bookofhook/trac.cgi/wiki/Quake3Networking](http://trac.bookofhook.com/bookofhook/trac.cgi/wiki/Quake3Networking)

# mysql - 在 mysql 5.59 中创建 teigger 错误

> ID：16078965
> 
> 赞同：0
> 
> 时间：2013-04-18T09:16:38.303
> 
> 标签：mysql, sql, triggers, count

每个人。我想在插入记录后计算 A（表）中的 id 计数，我的 sql 出现故障：

```
CREATE TRIGGER check_data_count
AFTER
INSERT
ON A
FOR EACH ROW
BEGIN
     SELECT @data_count:=COUNT(*) FROM A WHERE id = NEW.id;
END; 
```

如我们所见，我犯了一些错误（^_^）。

我的 mysql 版本信息：Ver 14.14 Ditrib 5.5.9，适用于 Win64(X86)。错误消息是：

```
Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL    server version for the right syntax to use near '' at line 8

Execution Time : 00:00:00:000
Transfer Time  : 00:00:00:000
Total Time     : 00:00:00:000
---------------------------------------------------

Query : end

Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'end' at line 1

Execution Time : 00:00:00:000
Transfer Time  : 00:00:00:000
Total Time     : 00:00:00:000 
```

最后，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:26:55.963

无法对触发触发器的同一个表执行选择、更新、删除操作。

来自[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.5/en/faqs-triggers.html#qandaitem-B-5-1-9)：

```
B.5.9: Can triggers access tables?

A trigger can access both old and new data in its own table. A trigger can also affect other tables, but it is not permitted to modify a table that is already being used (for reading or writing) by the statement that invoked the function or trigger. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:00:01.780

您忘记在`CREATE TRIGGER`查询中使用分隔符：

```
DELIMITER $$
CREATE TRIGGER check_data_count AFTER INSERT ON A
FOR EACH ROW BEGIN
 SELECT @data_count:=COUNT(*) FROM A WHERE id = NEW.id;
END$$
DELIMITER ; 
```

# android - Android Layout 定位不正确

> ID：16078969
> 
> 赞同：0
> 
> 时间：2013-04-18T09:16:42.677
> 
> 标签：android, android-layout, android-widget

我正在尝试为列表子项创建布局。这是它的样子： ![在此处输入图像描述](https://i.stack.imgur.com/zk6dD.png)

但是当 Name 的文本很大时，它会被替换为： ![在此处输入图像描述](https://i.stack.imgur.com/zGDBf.png)

我正在使用以下代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="35dp"
    android:background="@color/text_blue"
    android:orientation="horizontal"
    android:weightSum="51" >

    <TextView
        android:id="@+id/tranID"
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:layout_marginBottom="1dp"
        android:layout_marginRight="1dp"
        android:layout_weight="11"
        android:background="@color/app_bg"
        android:gravity="center_vertical|center_horizontal"
        android:lines="2"
        android:text="@string/tranid"
        android:textSize="9sp" />

    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:layout_marginBottom="1dp"
        android:layout_marginRight="1dp"
        android:layout_weight="9"
        android:background="@color/app_bg"
        android:gravity="center_vertical|center_horizontal"
        android:lines="2"
        android:text="@string/name"
        android:textSize="9sp" />

    <TextView
        android:id="@+id/number"
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:layout_marginBottom="1dp"
        android:layout_marginRight="1dp"
        android:layout_weight="10"
        android:background="@color/app_bg"
        android:gravity="center_vertical|center_horizontal"
        android:lines="2"
        android:text="@string/phone"
        android:textSize="9sp" />

    <TextView
        android:id="@+id/date"
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:layout_marginBottom="1dp"
        android:layout_marginRight="1dp"
        android:layout_weight="10"
        android:background="@color/app_bg"
        android:gravity="center_vertical|center_horizontal"
        android:lines="2"
        android:text="@string/date"
        android:textSize="9sp" />

    <TextView
        android:id="@+id/amount"
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:layout_marginBottom="1dp"
        android:layout_weight="11"
        android:background="@color/app_bg"
        android:gravity="center_vertical|center_horizontal"
        android:lines="2"
        android:text="@string/amount"
        android:textSize="9sp" />

</LinearLayout> 
```

我需要它紧急。你愿意帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:25:43.393

像`layout_height`下面一样为`TextView`.![在此处输入图像描述](https://i.stack.imgur.com/v95Qo.png)

```
android:layout_height="fill_parent" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:20:18.453

你可以试试：android:singleline="true"

# selenium - 使用 selenium 和 phpunit 在输入字段中插入一个值

> ID：16078971
> 
> 赞同：0
> 
> 时间：2013-04-18T09:16:48.330
> 
> 标签：selenium, phpunit

```
<table id="RegTable" class="GSTable" cellspacing="0" cellpadding="0" style="margin: 20px auto 0px; width: 450px; padding: 5px; font-size: 12px;">
<tbody>
<tr>
<td width="50%">Email Address</td>
<td>
<input id="UserEmail" class="validate[required,custom[email]]" type="text" name="UserEmail" style="border: 1px solid rgb(187, 187, 187); box-shadow: 0px 0px 0px rgb(255, 255, 255);"> 
```

如何使用 selenium 和 phpunit 在输入字段中插入值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T07:24:34.887

好吧，这个问题并不那么精确，但假设你已经安装了 selenium 和 phpunit 并且只想知道使用什么方法，我会做这样的事情：

```
$this->byId('UserEmail')->value('testmail@live.com'); 
```

这应该将文本“testmail@live.com”插入到 ID 为“UserEmail”的输入字段中。

# twitter-bootstrap - 尽管在这里阅读了许多回复，但根本无法让 Bootstrap 弹出窗口工作

> ID：16078972
> 
> 赞同：0
> 
> 时间：2013-04-18T09:16:48.593
> 
> 标签：twitter-bootstrap, tooltip, popover, mybb

好的，我正在尝试让 twitter Bootstrap 弹出框在我正在编码的论坛主题上工作，但我根本无法让它们工作。

我已经阅读了无数类似的线程并且尝试了一切都没有运气，所以我希望如果我可以发布我的确切代码，有人可以告诉我哪里出错了。

好的，所以我在我的页面中包含了 Javascript，以及头部中所需的工具提示和弹出 js 文件：

```
<script src="{$mybb->settings['bburl']}/jscripts/bootstrap-tooltip.js"></script>
<script src="{$mybb->settings['bburl']}/jscripts/bootstrap-popover.js"></script> 
```

现在这是我的 HTML/Javascript 标记：

```
<a id="pop" title="" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.    <p>hi</p><p>hihowareyou</p><p>hi</p>" data-placement="bottom" data-toggle="popover"     class="btn" href="#" rel="popover" data-original-title="Popover on bottom"     data-html="true">Popover on Bottom</a>
<script>
$(function(){                         
$("#pop").popover();
});
</script> 
```

我还包含了 bootstrap.css 通常附带的必要 CSS（尽管我没有包含所有 CSS，仅包含工具提示和 popover css）。

您可以在演示链接上确切地看到我遇到此问题的位置：

[http://mybbwebdesign.com/demo/index.php?action=mytheme&style=28](http://mybbwebdesign.com/demo/index.php?action=mytheme&style=28) [编辑 - 链接可能已过时，抱歉]

在显示“底部弹出窗口”的警报栏中。我希望单击它，然后在下方出现一个弹出框。

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:21:49.943

您必须包含完整的`bootstrap.min.js`文件，而不是部分弹出文件。

```
<script src="/js/bootstrap.min.js"></script> 
```

此外，您还包括两个不同版本的 jQuery，这可能会破坏一切。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js" type="text/javascript">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"> 
```

# visual-studio-2010 - 自重启应用程序在某些情况下崩溃

> ID：16078975
> 
> 赞同：3
> 
> 时间：2013-04-18T09:16:54.183
> 
> 标签：visual-studio-2010, winapi, visual-c++

如果我需要重新加载它，我会使用[RestartAPI重新启动我的应用程序。](http://www.codeproject.com/Articles/15184/How-To-Create-a-Self-Restartable-Application)它工作正常，直到我启动任何 Windows 对话框（例如打开对话框），最后单击打开按钮！在这种情况下，如果我稍后选择重新启动新应用程序（重新启动后）将无法打开任何文件。如果我单击取消按钮，新重新启动的应用程序将正常工作。

我花了很长时间才弄清楚两次重启之间的区别在于打开按钮和一些与应用程序重启完全无关的打开对话框。请注意，我已经消除了单击“打开”按钮后执行的代码，因此它不可能是由“打开”按钮刚刚启动的一些内存损坏代码引起的。

单击“打开”按钮一次就足够了（因此我可能会单击 5 次“取消”而不是“打开”一次，然后单击 3 次“取消”）并且任何重新启动应用程序的尝试但是“延迟”将导致新实例无法打开任何文件（甚至没有`std::ifstream`）。

一些细节：

*   视觉工作室 2010
*   Windows 7 x64（但在 32 位 XP 上是一样的）
*   对话框在单独的线程中启动
*   我将 Allegro 5.0 用于图形，但这不应该相关
*   该对话框由 GetOpenFileName 函数启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:30:50.030

我不知道 RestartAPI，但您可以创建临时批处理文件，它将重新启动该过程而不会出现任何问题。

# mysql - 与 mysql 与 netbeans for jsp 的连接

> ID：16078978
> 
> 赞同：1
> 
> 时间：2013-04-18T09:17:01.490
> 
> 标签：mysql, jsp, servlets

我正在为 JSP/servlet 使用 NetBeans 7.0.1 IDE 我正在尝试为我的项目建立数据库连接。已经下载了 jar 文件 'mysql-connector-java-5.1.24-bin.jar' 并将其粘贴到 jdk 的 jre/lib 目录中，并将其添加到我的 netbean 项目库目录中。然后我创建了一个 servlet 并编写了以下代码：

```
import java.sql.*;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class tstJDBC extends HttpServlet {
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    try{
    String dbURL = "jdbc:mysql://localhost:3306/murach";

         String username="root";
         String password="1234";

         Connection con2 = DriverManager.getConnection(dbURL, username, password);
          String query = "insert into tblUser1(firstname) values('shaon')";

          Statement statmnt = con2.createStatement();
          statmnt.executeUpdate(query);
    }

    catch(SQLException e)
    {
        e.printStackTrace();
    }
} 
```

}

但它可以建立连接。从 Connection con2 行，它直接进入 catch() 块；不执行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T17:20:59.583

只需将“mysql-connector-java”保留在“C:\Program Files\Java\jdk1.7.0_25\jre\lib\ext”中，“jdk1.7.0_25”是我的 jdk 版本可能是你有不同的版本但是里面必须有子文件夹“\jre\lib\ext”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:23:14.740

`DriverManager`在使用该类之前尝试加载驱动程序。

```
try{
     String dbURL = "jdbc:mysql://localhost:3306/murach";

     String username="root";
     String password="1234";

     Class.forName("com.mysql.jdbc.Driver");//load driver

     Connection con2 = DriverManager.getConnection(dbURL, username, password);
     String query = "insert into tblUser1(firstname) values('shaon')";

     Statement statmnt = con2.createStatement();
     statmnt.executeUpdate(query);
} 
```

**来自奥莱利：**

> 在您可以使用驱动程序之前，必须向 JDBC DriverManager 注册它。这通常通过使用 Class.forName( ) 方法加载驱动程序类来完成：

这是必需的，因为您已将库放在 JDK/lib 文件夹中，我假设该文件夹是使用与您的应用程序使用的不同的 ClassLoader 加载的。由于使用了不同的类加载器，JDBC 4.0+ 驱动程序发生的自动注册不会生效。您可以尝试将驱动程序 jar 文件放在应用程序服务器的 lib 中，它应该使用与应用程序相同的 ClassLoader。请参阅：[在 Web 应用程序中通过 JDBC 连接到数据库时何时需要 Class.forName？](https://stackoverflow.com/questions/8072832/when-is-class-forname-needed-when-connecting-to-a-database-via-jdbc-in-a-web-app)

**关于自动注册**

> 在 JDBC 4.0 中，我们不再需要使用 Class.forName() 显式加载 JDBC 驱动程序。当调用 getConnection 方法时，DriverManager 将尝试从初始化时加载的 JDBC 驱动程序和使用与当前应用程序相同的类加载器显式加载的 JDBC 驱动程序中找到合适的驱动程序。
> 
> DriverManager 方法 getConnection 和 getDrivers 已得到增强，以支持 Java SE 服务提供者机制 (SPM)。根据 SPM，服务被定义为一组众所周知的接口和抽象类，服务提供者是服务的具体实现。它还指定服务提供者配置文件存储在 META-INF/services 目录中。JDBC 4.0 驱动程序必须包含文件 META-INF/services/java.sql.Driver。此文件包含 java.sql.Driver 的 JDBC 驱动程序实现的名称。例如，要加载 JDBC 驱动程序以连接到 Apache Derby 数据库，META-INF/services/java.sql.Driver 文件将包含以下条目：
> 
> org.apache.derby.jdbc.EmbeddedDriver
> 
> 让我们快速看一下如何使用这个新特性来加载 JDBC 驱动程序管理器。以下清单显示了我们通常用于加载 JDBC 驱动程序的示例代码。假设我们需要连接到 Apache Derby 数据库，因为我们将在本文后面解释的示例应用程序中使用它：
> 
> ```
> Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
> Connection conn =
>     DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPassword); 
> ```
> 
> 但是在 JDBC 4.0 中，我们不需要 Class.forName() 行。我们可以简单地调用 getConnection() 来获取数据库连接。

[资源](http://www.onjava.com/2006/08/02/jjdbc-4-enhancements-in-java-se-6.html)

**关于服务加载器**

> 出于加载的目的，服务由单一类型表示，即单一接口或抽象类。（可以使用具体类，但不推荐这样做。）给定服务的提供者包含一个或多个具体类，这些具体类使用提供者特定的数据和代码扩展此服务类型。提供者类通常不是整个提供者本身，而是一个代理，它包含足够的信息来决定提供者是否能够满足特定请求以及可以按需创建实际提供者的代码。提供者类的细节往往是高度特定于服务的；没有一个类或接口可以统一它们，所以这里没有定义这样的类型。
> 
> 通过在资源目录 META-INF/services 中放置提供者配置文件来识别服务提供者。该文件的名称是服务类型的完全限定二进制名称。该文件包含具体提供程序类的完全限定二进制名称列表，每行一个。每个名称周围的空格和制表符以及空白行将被忽略。注释字符为'#'（'\u0023', NUMBER SIGN）；在每一行中，第一个注释字符之后的所有字符都将被忽略。该文件必须以 UTF-8 编码。
> 
> 如果一个特定的具体提供者类在多个配置文件中被命名，或者在同一个配置文件中被命名不止一次，那么重复的将被忽略。命名特定提供者的配置文件不必与提供者本身位于相同的 jar 文件或其他分发单元中。必须可以从最初查询配置文件的同一个类加载器访问提供程序；请注意，这不一定是实际加载文件的类加载器。

[资源](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)

# facebook - FQL 或 GraphSearch 来查询/抓取用户的所有公共项目？

> ID：16078980
> 
> 赞同：0
> 
> 时间：2013-04-18T09:17:07.113
> 
> 标签：facebook, facebook-graph-api, facebook-fql, web-crawler

有没有办法查询/获取所有设置为“公开”可见的用户项目（状态/帖子/喜欢/照片/信息/等）？

我发现了以下内容，`like`例如：

```
SELECT object_id, post_id, user_id
FROM like
WHERE user_id = me() 
```

但它只适用于`myself`而且也只适用于`likes`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:17:52.287

您的问题太宽泛（获取所有公开的项目？）

我可以向您展示与公共项目相关的示例，例如

```
SELECT post_id, privacy FROM stream WHERE source_id = me() AND privacy.value='EVERYONE' 
```

请查看[https://developers.facebook.com/docs/reference/api/privacy-parameter/](https://developers.facebook.com/docs/reference/api/privacy-parameter/)了解隐私参数教程。

# flops - 具有相同 gigaflops 数量的两个不同处理器之间的执行时间是否存在差异？

> ID：16078981
> 
> 赞同：0
> 
> 时间：2013-04-18T09:17:08.193
> 
> 标签：flops

我有一个与朋友讨论过的硬件相关问题。

考虑来自两个不同制造商的两个处理器，将相同数量的 gigaflops 放入同一台计算机（即两台计算机的 RAM 等相同）。

现在给定一个简单的程序，两台具有相同处理器的计算机之间的执行时间会有所不同。即两台计算机会以不同的方式处理代码（for 循环、while 循环、if 语句等）吗？

如果，这种差异是否显着，或者可以说计算机的性能大致相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:25:00.087

简短的回答：是的，它们会有所不同，可能非常不同。

触发器只是关于浮点运算，因此它是 CPU 性能的非常粗略的衡量标准。一般来说，它是某种科学计算性能的一个不错的代理，但不是一般性能。

有些 CPU 在 FLOPS 中很强大 - Alpha 是一个历史例子 - 但在整数计算中性能更温和。这意味着具有相似 FLOPS 的 alpha 和 x86 CPU 将具有非常不同的 MIPS 性能。

事实是，尽管许多人已经尝试过，但很难做出一个好的通用基准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:49:32.007

比较具有相同 FLOP 度量的两个处理器的性能的另一个关键因素是它们可以在 CPU 和 RAM 之间移动数据的速率。将内存缓存添加到您的想法中，以使事情进一步复杂化。

# linux - 为什么存在僵尸进程？

> ID：16078985
> 
> 赞同：11
> 
> 时间：2013-04-18T09:17:14.580
> 
> 标签：linux, unix, process, fork, zombie-process

维基百科说“一个终止但从未被其父进程等待的子进程成为僵尸进程。” 我运行这个程序：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
int main()
{
    pid_t pid, ppid;
    printf("Hello World1\n");
    pid=fork();
    if(pid==0)
    {
        exit(0);    
    }
    else
    {
        while(1)
        {
        printf("I am the parent\n");
        printf("The PID of parent is %d\n",getpid());
        printf("The PID of parent of parent is %d\n",getppid());        
        sleep(2);
        }
    }
} 
```

这会创建一个僵尸进程，但是我不明白为什么这里会创建一个僵尸进程？

程序的输出是

```
Hello World1
I am the parent
The PID of parent is 3267
The PID of parent of parent is 2456
I am the parent
The PID of parent is 3267
The PID of parent of parent is 2456
I am the parent
....
..... 
```

但是为什么在这种情况下“子进程终止但没有被父进程等待”？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T10:35:24.863

在您的代码中，zombie 是在以下位置创建的`exit(0)`（用下面的箭头注释）：

```
pid=fork();
if (pid==0) {
    exit(0);  // <--- zombie is created on here
} else {
    // some parent code ...
} 
```

为什么？因为你从来没有`wait`接受过它。当调用`waitpid(pid)`时，它会返回有关进程的事后信息，例如其退出代码。不幸的是，当进程退出时，内核不能仅仅处理这个进程入口，否则返回码将会丢失。所以它会等待有人`wait`打开它，并留下这个进程条目，即使它除了进程表中的条目之外并没有真正占用任何内存——这正是所谓的*僵尸*。

**你有几个选项可以避免创建僵尸：**

1.  **`waitpid()`在父进程的某处添加**。例如，这样做将有助于：

    ```
    pid=fork();
    if (pid==0) {
        exit(0);    
    } else {
        waitpid(pid);  // <--- this call reaps zombie
        // some parent code ...
    } 
    ```

2.  **执行双重`fork()`**以获得孙子并在孙子还活着的时候退出子。如果他们的父母（我们的孩子）去世，孙子将自动被收养`init`，这意味着如果孙子去世，它将被自动`wait`收养`init`。换句话说，您需要执行以下操作：

    ```
    pid=fork();
    if (pid==0) {
        // child
        if (fork()==0) {
            // grandchild
            sleep(1); // sleep a bit to let child die first
            exit(0);  // grandchild exits, no zombie (adopted by init)
        }
        exit(0);      // child dies first
    } else {
         waitpid(pid);  // still need to wait on child to avoid it zombified
         // some parent code ...
    } 
    ```

3.  **显式忽略 parent 中的 SIGCHLD 信号**。当孩子死亡时，父母会收到`SIGCHLD`信号，让它对孩子的死亡做出反应。您可以`waitpid()`在收到此信号时调用，或者您可以安装显式忽略信号处理程序（使用`signal()`or `sigaction()`），这将确保孩子不会变成僵尸。换句话说，是这样的：

    ```
    signal(SIGCHLD, SIG_IGN); // <-- ignore child fate, don't let it become zombie
    pid=fork();
    if (pid==0) {
        exit(0); // <--- zombie should NOT be created here
    } else {
         // some parent code ...
    } 
    ```

# jquery - 应测试哪些浏览器功能以选择正确的文件上传插件？

> ID：16078994
> 
> 赞同：2
> 
> 时间：2013-04-18T09:17:34.680
> 
> 标签：jquery, file-upload, modernizr

我们将基于 flash 的 Uploadify 和基于 HTML5 的 UploadiFive 上传器打包在一个新插件中，这样我们就不必一直提供两组选项。

这隐藏了他们在两个插件版本之间所做的所有讨厌的名称和功能更改（为什么哦，为什么他们不使设置兼容或自己包装两个控件？？？）。

我们遇到的问题是检测何时使用每个上传器版本。如果我们只是检测到`Modernizr.canvas`它会尝试在 IE9 上使用 HTML5 上传器（它有一个画布，但就文件上传而言不是 HTML5）。

在此特定情况下要测试的最准确的浏览器功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:03:05.967

我找到了这个答案：[How to determine the presence of HTML5 drag'n'drop file upload API (like the one from FF3.6)](https://stackoverflow.com/questions/2311887/how-to-determine-presence-of-html5-dragndrop-file-upload-api-like-the-one-fro) which does the trick well (not the main answer but one followups):

```
if (!!window.FileReader && Modernizr.draganddrop) {
  // sexy drag and drop action
} else {
  // no drag and drop support available :(
} 
```

# javascript - 跨域访问控制允许来源错误

> ID：16078997
> 
> 赞同：-2
> 
> 时间：2013-04-18T09:17:49.287
> 
> 标签：javascript, jquery

我正在尝试访问 Web 服务，但出现跨域访问控制允许来源错误

```
$.getJSON("https://beevou.net/oauth/token?grant_type=password&username="+user+
 "&password="+pass+"&client_id=NTEzZGU5MThlNDQ0YWM0&client_secret=45d1002085db5dca4dbdbc5f83731     d19662cb265",
 function(data) {
 console.log(JSON.stringify(data)); 
}); 
```

这是网址。无法在 Web 服务端更改任何内容。让我知道一些解决方案来摆脱这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:19:59.417

基本上，如果您无法获得 JSONP 访问或从服务器获取他们设置必要的 CORS 标头，则唯一可能的解决方案是在您的服务器上：

*   在您的服务器上发出请求并为您的页面提供结果
*   在您的服务器上设置一个代理，让浏览器认为一切都来自同一个来源（这是最简单的解决方案，例如，如果您的服务器基于 Apache ，则使用[mod_proxy ）](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#forwardreverse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:24:29.947

把dataType改成JSONP能得到结果吗？喜欢：

```
$.ajax({
    dataType: 'jsonp', 
    url: "https://beevou.net/oauth/token?grant_type=password&username="+user+
 "&password="+pass+"&client_id=NTEzZGU5MThlNDQ0YWM0&client_secret=45d1002085db5dca4dbdbc5f83731     d19662cb2652",
    success: function(data) {
        console.log(data);
    },
    error: function() {
        alert('nok');
    }
}); 
```