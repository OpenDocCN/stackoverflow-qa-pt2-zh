# StackOverflow 问答 15721000-15721999

# android-intent - 如何使用 Intents 将数据从 Activity 传递到 BroadcastReceiver

> ID：15721000
> 
> 赞同：1
> 
> 时间：2013-03-30T16:49:46.873
> 
> 标签：android-intent, broadcastreceiver, locationmanager, locationlistener, smsmanager

我刚刚开始了我的第一个主要项目——一个简单的防盗应用程序，当我的手机被发短信时，如果它包含某个字符串，它会向原始地址发送一条短信，告诉它的位置电话。但是，我目前只试图让手机接收短信，检查它是否包含字符串，获取位置，然后在手机上烘烤该位置。我的问题是，因为我对 android 编程/Java（只有 15 岁）非常陌生，所以我无法将我的位置从 MainActivity 传递到我的广播接收器。

这是我的 MainActivity - 我的 LocationListener 在哪里，如您所见，我已经在 onLocationChanged 上注释掉了 Toast.makeText()，如果我取消注释它，我确实得到了正确的坐标。

```
package com.SMS;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

public class MainActivity extends Activity 
{

    private LocationManager lm;
    private LocationListener locationListener;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lm = (LocationManager)
            getSystemService(Context.LOCATION_SERVICE);

        locationListener = new MyLocationListener();

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);    
    }

 public class MyLocationListener implements LocationListener
 {
    @Override
    public void onLocationChanged(Location loc) {
            if (loc != null) 
            {
                int Longitude = (int) (loc.getLongitude() * 1E6);
                int Latitude = (int) (loc.getLatitude() * 1E6);
                // Toast.makeText(getBaseContext(), "Location Changed : Lat: " + Latitude + " Longitude : " + Longitude, Toast.LENGTH_LONG).show();                 sendBroadcast(intent);

                Intent intent = new Intent(MainActivity.this, SMSReceiver.class); 
                intent.putExtra("Longitude", Longitude);
                intent.putExtra("Latitude", Latitude);
                sendBroadcast(intent);
            }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
  }
} 
```

这是我的 SmsReceiver 类，这是检索短信以检查包含字符串的地方。我已经尝试了我在这类事情上看到的一切（我的历史充满了这些东西），但是无论我做什么，纬度和经度仍然返回 300 - 我设置的默认值。我确信这与我的意图设置和接收意图有关，只是不知道这是什么问题。因此，请通读并就您发现的任何错误给我反馈。

```
package com.SMS;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent) 
    {

        //--get the sms message passed in--
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null) 
        {
            //--- retrieve the sms message received
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);

                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " : ";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                if(str.contains("hi"))
                {
                    int longitude = intent.getIntExtra("Longitude", 300);
                    int latitude = intent.getIntExtra("Latitude", 300);
                    //--display the new sms message
                    Toast.makeText(context, "Location Changed : Lat: " + latitude + " Longitude : " + longitude, Toast.LENGTH_LONG).show();
                }
            }
        }
    }
} 
```

最后，我的清单，出于某种原因，我有一种暗示，这可能是我的问题的一部分，但我真的不知道为什么 - 如果你发现任何错误或不合适的地方，或者可以简化，请告诉我

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SMS"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.SMS.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SMSReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" >
                    <action android:name=".com.SMS.Broadcast" >
                    </action>
                </action>
           </intent-filter>
        </receiver>
    </application>

    <uses-permission android:name="android.permission.SEND_SMS" >
    </uses-permission>
    <uses-permission android:name="android.permission.RECEIVE_SMS" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COURSE_LOCATION" >
    </uses-permission>
    <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
</manifest> 
```

因此，如果您可以就问题所在以及如何更改问题给我反馈，或者对此有任何疑问，请回复，因为我已经花了几个小时在网上搜索。此外，如果您看到任何“糟糕的编码”，请不要犹豫，告诉我正确的。如果您能解决问题，非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T16:20:00.580

您的代码中的基本错误之一是here

```
Intent intent = new Intent(MainActivity.this, SMSReceiver.class); 
                intent.putExtra("Longitude", Longitude);
                intent.putExtra("Latitude", Latitude);
                sendBroadcast(intent); 
```

您正在发送带有经度和纬度的意图，并且在接收器中您正试图获取带有意图的短信数据。如果同一个接收者正在响应接收短信，那么这种情况下的意图只包含短信数据，没有经度和纬度数据。您无法从来自不同来源的同一意图接收两个数据。为两者使用不同的广播接收器或通过不同的方法连接。我希望它清除。

# processmaker - Processmakers 的 Http 设置

> ID：15721004
> 
> 赞同：1
> 
> 时间：2013-03-30T16:50:04.033
> 
> 标签：processmaker

我知道有一种方法可以设置您的 processmaker，您可以使用以下格式访问它：

```
processmaker.example.com 
```

但是有没有办法配置它，您可以使用以下方式访问它：

```
example.com/processmaker/ 
```

谢谢你，美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T22:12:51.157

ProcessMaker 配置为尊重结构：xxx/sysworkflow/en/classic/login/login，因此将其更改为：

`http://XXX.XXX.XXX.XXX/processmaker/`

它不像 wordpress 那样工作，你可以创建子文件夹。

在 ProcessMaker 的情况下，创建域或端口以具有访问权限。在您的情况下，您可以创建一个规则将您的 URL 重定向到 processmaker 登录，这意味着当您输入

`XXX.XXX.XXX.XXX/processmaker/`

它重定向到：

`xxx/sysworkflow/en/classic/login/login`

您需要根据您安装 ProcessMaker的方式修改您的`.htaccess`文件或文件。`pmos.conf`

[此信息](https://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file?)可能会帮助您重定向您的 URL。

问候。

[加工制造者](/questions/tagged/processmaker "显示标记为“流程制造者”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:15:10.437

不幸的是，ProcessMaker 需要位于任何服务器配置的根目录上。这是由于 .htaccess 配置文件，它转到 sysGeneric.php。

另一个问题是应用程序使用完整路径（例如/js/maborak.js），除非您修改模板，否则它不能在文件夹上工作。

# php - php register_shutdown_function 用法

> ID：15721009
> 
> 赞同：0
> 
> 时间：2013-03-30T16:50:18.087
> 
> 标签：php

我正在尝试使用`register_shutdown_function`. 我想在调用此函数时显示一个错误页面，如下所示：

`

```
register_shutdown_function('en795HandleShutdown');
...
function en795HandleShutdown() {
echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';
echo '<html xmlns="http://www.w3.org/1999/xhtml">';
echo '<head>';
echo '  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>';
echo '  <meta http-equiv="Content-Style-Type" content="text/css"/>';
echo '  <meta http-equiv="Content-Script-Type" content="text/javascript"/>';
echo '  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />';
echo '  <title>SOMETITLE</title>';
echo '</head>';
echo '<body >';
echo '<div><div>';
echo '      <h1>Error</h1>';
echo '      <h2>Dead End.<h2>';
echo '  </div></div>';
echo '</body>';
echo '</html>';
} 
```

`

我通过在`ini_set('max_execution_time', 5);`没有数据库的情况下设置和执行来获取`Fatal error: Maximum execution time...`. 但是当函数被调用时什么都没有发生。我猜出了什么问题。忘了提：`ini_set('display_errors', 0);`TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:59:52.307

如果您希望处理致命错误。你最好使用：

[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

链接，是`set_error_handler();`

```
function myErrorHandler($errno, $errstr, $errfile, $errline)
{
echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';
echo '<html xmlns="http://www.w3.org/1999/xhtml">';
echo '<head>';
echo '  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>';
echo '  <meta http-equiv="Content-Style-Type" content="text/css"/>';
echo '  <meta http-equiv="Content-Script-Type" content="text/javascript"/>';
echo '  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />';
echo '  <title>SOMETITLE</title>';
echo '</head>';
echo '<body >';
echo '<div><div>';
echo '      <h1>Error</h1>';
echo '      <h2>Dead End.<h2>';
echo '  </div></div>';
echo '</body>';
echo '</html>'; 

}

 set_error_handler('myErrorHandler'); 
```

`register_shutdown_function();`当你的脚本完成处理时，在最后执行，所以一旦你的整个脚本完成。您将看到您的“处理程序”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T20:41:51.687

The answer contributed is wrong for the question. set_error_handler callbacks do not work for fatal errors. For that you must use register_shutdown_function. One way to tell if it is being called when a fatal error occurs is to call error_get_last ([http://php.net/manual/en/function.error-get-last.php](http://php.net/manual/en/function.error-get-last.php)) and, if it returns an array, check the type if it is E_ERROR.

# ubuntu - fopen（dbinfo.php）：无法打开流：权限被拒绝 Ubuntu 12.04 LTS

> ID：15721012
> 
> 赞同：1
> 
> 时间：2013-03-30T16:50:39.557
> 
> 标签：ubuntu, xampp, permission-denied, lampp

我正在尝试在 UBuntu 上运行一个 php 项目。它有一个创建 mysql 数据库的安装脚本。当我尝试运行脚本时，出现以下错误：

```
Warning: fopen(dbinfo.php): failed to open stream: Permission denied in /opt/lampp/htdocs/project/install.php on line 12

Warning: fwrite() expects parameter 1 to be resource, boolean given in /opt/lampp/htdocs/project/install.php on line 19

Warning: fclose() expects parameter 1 to be resource, boolean given in /opt/lampp/htdocs/project/install.php on line 20

Warning: include(dbinfo.php): failed to open stream: No such file or directory in /opt/lampp/htdocs/project/install.php on line 21

Warning: include(): Failed opening 'dbinfo.php' for inclusion (include_path='.:/opt/lampp/lib/php') in /opt/lampp/htdocs/project/install.php on line 21

Notice: Undefined variable: host in /opt/lampp/htdocs/project/install.php on line 23

Notice: Undefined variable: user in /opt/lampp/htdocs/project/install.php on line 23

Notice: Undefined variable: password in /opt/lampp/htdocs/project/install.php on line 23

Notice: Undefined variable: database in /opt/lampp/htdocs/project/install.php on line 25

Notice: Undefined variable: database in /opt/lampp/htdocs/project/install.php on line 26
Error connecting to database. 
```

我知道这些错误是由于权限被拒绝造成的。但我不知道如何解决这个问题。似乎该脚本没有编辑或创建数据库的权限。我是 Ubuntu 新手，无法解决这个问题。抱歉英语不好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T02:57:29.053

我假设您的用户可能拥有权限`/opt/lampp`，因此您可以编辑文件。但是，如果不是这种情况，您可以授予对您的用户和 apache 组的访问权限。下一个显示首先是用户，然后是组：

`sudo chown -R youruser:www-data /opt/lampp`

In that way you're setting the ownership to the user and then the group. After that you must grant the access for the three groups: User, group and others:

`sudo chmod -R xxx /opt/lampp`

**Note**: The rightmost refer to permissions for the file owner, then the group and other users.

Now, what does the xxx mean?

## No - Permission - rwx

7 - full - 111

6 - read and write - 110

5 - read and execute - 101

4 - read only - 100

3 - write and execute - 011

2 - write only - 010

1 - execute only - 001

0 - none - 000

Or you can use:

`chmod [reference][operator][mode] fileOrFolder`

Where the reference is: u(ser), g(roup), o(thers) and a(ll).

The operator is: + (adds the specified modes to the specified references), - (removes) and = (the modes specified must be made the exact modes for the specified references)

Finally the modes are: r(ead), w(rite), x(execute), [X(special execute), s and t (that are not so common)].

Hope this is what you're looking for.

# asp.net - 我怎样才能减去两个日期 asp.net

> ID：15721013
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:50:51.297
> 
> 标签：asp.net, sql, date-format

我怎样才能减去两个日期（LblExpirydate.Text - Label3.Text）

```
 LblExpirydate.Text = String.Format("{0:dd/MM/yyyy}", dataReader(0))
        Label3.Text = System.DateTime.Now.ToString(("dd/MM/yyyy")) 
```

LblExpirydate.Text = 01/05/2013

Label3.Text = 01/04/2011

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:07:20.660

您可以从另一个日期中减去一个日期以获得 TimeSpan。您不应该尝试对字符串进行日期计算：您的程序可能会在某处违反假定的日期格式。

```
Dim dateFormat As String = "dd/MM/yyyy"
Dim rightNow As DateTime = DateTime.Now

Dim expiryDate As DateTime = rdr.GetDateTime(0)

Dim daysToExpiry As Integer = (expiryDate - rightNow).Days

LblExpirydate.Text = expiryDate.ToString(dateFormat)
Label3.Text = expiryDate.ToString(dateFormat)
LabelExpires.Text = daysToExpiry.ToString & " days" 
```

# php - 如何使用 Zend Framework 2 将管理文件和文件夹与公共文件和文件夹分开？

> ID：15721015
> 
> 赞同：0
> 
> 时间：2013-03-30T16:51:10.783
> 
> 标签：php, content-management-system, zend-framework2

我是**zend框架2的新手**

我想使用zend framework2编写一个简单的cms，但在开始时我想将管理模块（文件和文件夹）与公众分开。

我之前用这个策略构建了一个简单的 cms

```
 -public
        -admin
              index.php
              -other folders related to admin

        index.php
        about.php
        -other folder and files related to public view 
```

谁能给我一个使用 Zend 框架 2 构建的简单 Cms 或解释我该怎么做？

对不起我的英语不好谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:11:57.370

ZF2 模块已经可以包含它自己的路由、控制器、视图和公共资源（后者通过 zf2-assetic-module）。具有两个自主开发模块的单个 ZF2 应用程序（一个用于前端，一个用于管理后端）应该满足您的分离标准。

请注意，您通常仍会使用`public/index.php`单个`.htaccess`路由将所有非资源（img、css、js 等）请求路由到该`index.php`文件。

在我看来，深入了解 ZF2 的工作原理可以解决您的大部分问题。

# php - 使用 Ajax 和 PHP 输出数据

> ID：15721017
> 
> 赞同：1
> 
> 时间：2013-03-30T16:51:16.857
> 
> 标签：php, javascript, ajax

我将把这个问题分成几段，以便于参考。

1.  我有一个使用 Ajax 调用 php 文件的脚本；一旦按下按钮，脚本就会执行。

2.  PHP 文件包含一个简单的代码，该代码将一个数字加上 1。

    ```
    <?php 
    $response = $response + 1;
    echo $response;
    ?> 
    ```

3.  但是，多次按下按钮时会出现问题。我做了一些研究，可以得出结论，要么是我制作的简单 PHP 脚本有问题，要么代码在每次页面重新加载时只执行一次。

4.  如果我希望 Ajax 命令在同一个脚本期间执行多次，我阅读了一篇文章解释了使用 Javascript 进行的大量工作，但我看不出按下按钮时它不能多次执行的原因。

    问题：PHP 文件“post.php”是否在每次按下按钮时都会被执行？我的 PHP 文件有问题吗？每次按下按钮时，如何使脚本加上数字加 1？是不是因为我需要一些额外的 Javascript 才能做到这一点？

脚本的其余部分在这里：

```
 <head>
        <script>
        function loadXMLDoc()
        {
        var xmlhttp;
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            }
          }
        xmlhttp.open("POST","post.php",true);
        xmlhttp.send();
        }
    </script>

</head>
<body>
    <p>This button will execute an Ajax function</p> 
    <button type="button" onclick="loadXMLDoc()">Press here!</button>
    <div id="myDiv"></div>
    <script type="text/javascript" src="http://www.parameter.dk/counter/5b0d9873158158e08cad4c71256eb27c"></script>
</body> 
```

如果我在某些时候不够清楚，请选择段落编号，我将加深该部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:54:15.420

在您的代码中，$response 始终为 1，因为 php 默认情况下没有状态。您可以通过在会话中保存响应来修复它。

```
session_start();
if (isset($_SESSION['response'])) {
    $_SESSION['response'] = $_SESSION['response'] + 1;
} else {
    $_SESSION['response'] = 1;
}
echo $_SESSION['response']; 
```

# bison - %prec 似乎不起作用？

> ID：15721020
> 
> 赞同：0
> 
> 时间：2013-03-30T16:51:56.380
> 
> 标签：bison

这是我的 y 文件的示例。

```
| rval '<' rval
| rval '<' '<' rval
| rval '>' rval
| rval '>' '>' rval

| rval LSHIFT rval
| rval RSHIFT rval 
```

我想让 << 和 >> 像 << 和 >> 一样工作。我认为他们会很困难，但发现“上下文相关的优先级” [http://www.gnu.org/software/bison/manual/html_node/Contextual-Precedence.html](http://www.gnu.org/software/bison/manual/html_node/Contextual-Precedence.html)

但是它似乎不起作用。写作 | rval '<' '<' rval %prec LSHIFT

似乎什么都不做。我试着把它放在这里 * = "%prec LSHIFT" 除了我一次只有一个

```
| * rval * '<' * '<' * rval  * 
```

每个插槽似乎都不起作用。我没有注意到任何警告，除非我在规则中有多个 %prec LSHIFT。

如何让野牛将 > > 和 << 视为 >> 和 <<。注意：我不能在词法分析器中制作 rshift >\s*> 因为这会干扰其他事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:36:11.893

您不能在解析器中执行此操作（没有`%glr-parser`），因为它需要两个前瞻标记。问题是“优先规则”并没有真正进行优先解决。它们只是解决转移/减少冲突的一种技巧，有利于一个令牌而不是另一个令牌。在这种情况下，相关的比较是在左边`rval`的标记和`'<'`或`'>'`标记之间。解析器需要比较这些以确定是否减少“内部”的任何规则`rval`，或者是否转移。没有更多的前瞻，它不知道`'<'`后面是另一个`'<'`还是其他东西。

# django - 如何处理 Django South 迁移中的旧 pip 要求？

> ID：15721021
> 
> 赞同：2
> 
> 时间：2013-03-30T16:52:01.113
> 
> 标签：django, django-south

我有一个应用程序由 South 管理了很长一段时间。在开发的某个时刻，我向具有 pip 要求（sorl-thumbnail）的模型添加了一个自定义字段，但后来我删除了这个要求。我的问题是，当我尝试将这个应用程序迁移到一个全新的数据库中时，South 喊道：

```
./manage.py migrate my_app
...
ValueError: Cannot import the required field 'sorl.thumbnail.fields.ImageField' 
```

我应该如何处理这个旧要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:03:30.073

也许是一个肮脏的解决方案，但如果你真的想摆脱你的 sorl-thumbnail 依赖，你没有太多选择：

找到添加该字段的迁移文件并替换`sorl.thumbnail.fields.ImageField`为类似`django.db.models.fields.files.ImageField`

它应该可以工作，除非您有[DataMigrations](http://south.readthedocs.org/en/latest/tutorial/part3.html#data-migrations)，具体取决于 sorl-thumbnail 的特殊功能。

# c++ - binary tree traversal why need to check pre->right != current

> ID：15721022
> 
> 赞同：2
> 
> 时间：2013-03-30T16:52:15.910
> 
> 标签：c++, algorithm, binary-tree

In a binary tree traversal algorithm like below cited from [this question](https://stackoverflow.com/questions/5502916/explain-morris-inorder-tree-traversal-without-using-stacks-or-recursion), why do we need to check the second condition `pre->right != current`? is this a loop condition? when would this happen?

```
 pre = current->left;
  while(pre->right != NULL && pre->right != current)
    pre = pre->right; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:58:54.360

Because the latter code makes a cycle (i.e. child pointing to a parent):

```
pre->right = current; 
```

The cycle is deleted later, however, but the `pre->right != current` test tris to avoid following the cycle endlessly.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T17:07:59.370

Consider the tree given below,

```
 A
   / \
  B   C
 / \  /\
D  E F  G 
```

The node A which is the root is initialized as current. Now the code given by you tries to find out the immediate predecessor of A in inoreder traversal. As we know the inorder traversal of the given tree is as follows,

```
D  B  E  A  F  C  G 
```

So the code identifies E as the immediate predecessor of A.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T15:17:51.720

[Pertaining to your [Question-code]](https://stackoverflow.com/questions/5502916/explain-morris-inorder-tree-traversal-without-using-stacks-or-recursion)
Assume tree:

```
 A
  / \
 B   C 
```

It's In-order traversal = B,A,C

Now consider, B was already printed by

```
if(current->left == NULL)
    {
      printf(" %d ", current->data);
      current = current->right;
    } 
```

So, **The Condition:**

```
pre->right != current 
```

**is required to break while loop (which may be cyclic at times), exactly when our aim is to print node `A`.**

![enter image description here](../Images/4cce277dde08c73eabbffa29c6cfd25a.png)

In this case, at the end of the while loop i.e. `while(pre->right != NULL && pre->right != current)`, we'll have :

1) `pre` pointing to left node `B` - which is already printed
2) `current` pointing to middle node `A` - Next to be print, thus breaking cycle link we've created just for this. Following part takes care of this:

```
else
      {
        pre->right = NULL;           // Break cyclic link we've created for printing 'A'
        printf(" %d ",current->data);// prints 'A'
        current = current->right;    // Now, Aim for 'C'
      } 
```

# perl - 引用变量中的变量 - 哈希？

> ID：15721024
> 
> 赞同：1
> 
> 时间：2013-03-30T16:52:30.337
> 
> 标签：perl, variables, hash, reference

我一直在寻找解决我的问题的方法，在阅读了几篇文章后，哈希似乎是答案，但我不确定如何根据我的要求实现这一点，有人可以建议如何甚至更好的选择吗？

在我的代码中，变量`$host`是从数据库中的值设置的。我循环遍历这些值，改变`$host`每次的值。

我想丢弃某些类型的主机名，并确定要丢弃哪些主机，我在用户可配置文件中读取该文件，该文件包含该排除的 Perl 正则表达式。即配置文件有一行

```
 EXCLUDE=\d+DAT\d+,\d+INF\d+ 
```

然后我想建立 Perl 正则表达式匹配（逻辑或），即

```
if ( $host =~ m/\d+DAT\d+/ || $host =~ m/\d+INF\d+/ ) {
  # do something
} 
```

目前我的代码与上面的示例一样是硬连接的，但是在读取配置文件后如何动态构造 Perl 正则表达式？

我已将配置文件读入一个数组，并将从那里开始。上面的代码需要像这样结束：

```
if ($exclude clause) {
  # do something
} 
```

这就是我着手实现从数组中读取的方式：

```
for ($i = 1; $i < @conf; $i++) {
  $exclude_clause .= "$host =~/" . @conf[$i] . "/ || "; 
}
$exclude_clause =~ s/ \|\| $//; 
```

问题是`$host`在`$exclude_clause`. 我的正则表达式字符串除了`$host`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:46:29.597

我认为您应该将完整的正则表达式存储在配置文件中，但如果需要，它可以是一组逗号分隔的替代方案。

您将使用该`qr//`构造来构建正则表达式：

```
my $exc1 = "\d+DAT\d+";  # Read from configuration file
my $ecc2 = "\d+INF\d+";

my $rex1 = qr/$exc1/;
my $rex2 = qr/$exc2/;

...populate $host...

if ($host =~ $rex1 || $host =~ $rex2)
{
    ...exclude $host...
}
else
{
    ...include $host...
} 
```

或者，您可以构建单个正则表达式：

```
my $exc1 = "\d+DAT\d+";  # Read from configuration file
my $ecc2 = "\d+INF\d+";

my $rex = qr/$exc1|$exc2/;

...populate $host...

if ($host =~ $rex)
{
    ...exclude $host...
}
else
{
    ...include $host...
} 
```

单个正则表达式可以由任意数量的替代排他性正则表达式片段构建。当然，如果文件中的值为：

```
EXCLUDE=\d+DAT\d+|\d+INF\d+ 
```

然后您的代码再次简化，假设正则表达式字符串被读入`$exc`：

```
my $exc = "\d+DAT\d+|\d+INF\d+";  # Read from file
my $rex = qr/$exc/;

...populate $host...

if ($host =~ $rex)
{
    ...exclude $host...
}
else
{
    ...include $host...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:12:54.153

我会建议一种不同的方法，它不需要您构建一个大的正则表达式字符串然后对其进行评估。相反，如何使用[`List::MoreUtils`](http://search.cpan.org/~adamk/List-MoreUtils-0.33/lib/List/MoreUtils.pm)模块的`any`函数，它接受一个代码块，为列表的每个成员评估它，并在该块为列表中的至少一个条目返回 true 时返回 true。例如：

```
use List::MoreUtils qw{ any };

if ( any { $host =~ $_ } @conf ) {
    # do something
} 
```

在传递给 的代码块中`any`，临时变量`$_`包含列表中的当前条目。这样一来，您就可以避免构建正则表达式。

# android - SurfaceTexture 已被放弃/无法使 gralloc 缓冲区出列/flushSurface() 失败

> ID：15721026
> 
> 赞同：3
> 
> 时间：2013-03-30T16:52:35.063
> 
> 标签：android, android-camera

我的相机应用程序在显示之前使用 OpenCV 处理帧。尽管相机预览有效，但 logcat 仍会出现以下错误：

> E/BufferQueue(22797): [unnamed-22797-0] dequeueBuffer: SurfaceTexture 已被废弃！E/SecCameraHardware(2078): 无法使 gralloc 缓冲区出列！05-03 13:29:12.716 E/ISecCameraHardware(2078): bool android::ISecCameraHardware::previewThread()::flushSurface() 失败

以下是相关代码，改编自 OpenCV 的示例代码：

```
mCamera.setPreviewCallbackWithBuffer(new PreviewCallback() {
    public void onPreviewFrame(byte[] data, Camera camera) {
        synchronized (CameraView.this) {
            System.arraycopy(data, 0, mFrame, 0, data.length);
            CameraView.this.notify();
        }
        camera.addCallbackBuffer(mBuffer);
    }
}); 
```

[...]

```
mBitmap = Bitmap.createBitmap(mFrameWidth, mFrameHeight, 
    Bitmap.Config.ARGB_8888); 

try {
    mCamera.setPreviewTexture(new SurfaceTexture(10));
} catch (IOException e) {};

mCamera.startPreview(); 
```

[...]

```
public void run() {
    mThreadRun = true;
    Log.i(TAG, "Starting processing thread");
    while (mThreadRun) {
        synchronized (this) {
            try {
                this.wait();
                processFrame(mFrame);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        Canvas canvas = mHolder.lockCanvas();
        if (canvas != null) {
            canvas.drawBitmap(mBitmap,
                    (canvas.getWidth() - mFrameWidth) / 2,
                    (canvas.getHeight() - mFrameHeight) / 2, null);
            mHolder.unlockCanvasAndPost(canvas);
        }
    }
} 
```

我注意到一个与此错误相关的[现有问题](https://stackoverflow.com/questions/14006337/opencv-android-bufferqueue-error-surface-texture-has-been-abandoned)，但建议的解决方案 - 在设置预览纹理之前创建位图以进行显示 - 对我没有影响。

# android - How can I create a layout like this?

> ID：15721031
> 
> 赞同：2
> 
> 时间：2013-03-30T16:53:05.430
> 
> 标签：android, android-layout

Two tiles SORT and REMINDER and having Sub Item as shown in image. I have tried this by using Listview but nothing made up like this.

![enter image description here](../Images/84415e2eda30ecd32df46675f967a601.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:55:24.153

That is easy with Shared Preferences, take a look at [this](http://androidresearch.wordpress.com/2012/03/09/creating-a-preference-activity-in-android/) tutorial

In brief: for all Preference Category you have the possibility to add a title, in your case SORT and REMINDER.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:57:12.417

You need to use [**PreferenceCategory**](http://developer.android.com/reference/android/preference/PreferenceCategory.html) to acheive this.

The **Settings** screen usually makes use of the [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html) and you could use a PreferenceActivity to do it or you can handle all the interaction manually.

The preference category helps you to categorize all the preference settings into various groups, so as to make it easy for the user to understand which setting is for which functionality.

An excerpt from the documentation :

> Used to group Preference objects and provide a disabled title above the group.

# swi-prolog - 在 prolog 中运行 scriptname

> ID：15721034
> 
> 赞同：0
> 
> 时间：2013-03-30T16:53:28.940
> 
> 标签：swi-prolog

prolog（SWI-Prolog）中是否有某种方法可以让我获得执行脚本的名称，就像 perl 中的**FILE**或 C 中的 arg[0] 一样？

我阅读了文档，但对此一无所知..文档实际上并没有提供太多支持，并且示例很少：/

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:02:35.053

`current_prolog_flag(argv, Argv)`将为您提供用于调用 Prolog 的命令行参数，[http: //www.swi-prolog.org/pldoc/doc_for?object=current_prolog_flag/2](http://www.swi-prolog.org/pldoc/doc_for?object=current_prolog_flag/2)

# google-bigquery - Bigquery : Unexpected. Please try again when loading a 53GB CSV/ 1.4GB gZIP

> ID：15721036
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:53:59.593
> 
> 标签：google-bigquery

I was trying to load 1.4Gb gZIP data in to my BigQuery table and i am getting the error Unexpected. Please try again consistently

job_7f1aa8d29ae641459c82243530eb1c65

I was trying to load a structure Row ID,Order Priority,Discount,Unit Price,Shipping Cost,Customer ID,Customer Name,Ship Mode,Product Category,Product Sub-Category,Product Base Margin,Region,State or Province,City,Postal Code,Order Date,Ship Date,Profit,Quantity ordered new,Sales,Order ID

the error is not clear on whats going wrong.

anyone else encountered this error?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:03:58.443

It looks like your job ran out of time-- a 53 GB CSV file is a lot to process in one thread. Best practice is to either split your data in multiple chunks, or upload uncompressed data which can be processed in parallel.

I'm in the process of raising the allowed time somewhat, and we'll work on improving the error message when this happens.

# c++ - 在地图的地图中查找值并返回主地图的键（或替代）

> ID：15721041
> 
> 赞同：2
> 
> 时间：2013-03-30T16:54:15.700
> 
> 标签：c++, map, websocket, find, key-value

我正在为一个网站编写一个 websocket++ 服务器，该网站主要是几页，其中包含您在任何社交新闻网站上看到的文章列表或堆栈上的问题链接；但是，我通过人造按钮和滑块动态更改显示的文章，并使用 websocket 推送更新它们。

当然，我需要存储每个连接，但我还希望站点记住每个用户在每个页面上的位置。这是每页文章的索引位置。

如果我使用 (psuedocode): `map<sessionid, map<page, index>>`，我可以`index`直接找到吗？如果不是，我应该使用什么代码来实现这一点？

如果可以，请在最少的代码行数和最大的性能之间取得平衡。

**多个`sessionid`_**

抱歉，忘记了很多人可能会看同一个`index`per `page`，所以它需要输出一个`set`（除非有更好的东西）只有`sessionid`s。

因此，在伪代码中，它可能看起来像`findPageIndex(map<sessionid, map<page, index>>, page, index)`return `set<sessionid>`。

**`page`s**

每次创建会话时，`index`es 将默认为`0`for each `page`，直到用户更改它们。

**推理**

这种格式的目的是在另一个用户通过投票、评论等更改文章时更新用户。我希望将新数据立即发送回查看这些文章的客户端。

所以：

1.  User1 更新数据库中的 article1
2.  服务器找到所有正在查看文章 1 的用户
3.  服务器更新所有查看文章的用户1

这是我对堆栈和其他高级网站如何做到这一点的最佳猜测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:05:58.270

如果我正确理解了您的问题，并且为您提供了 a`sessionId`和 a `page`，则您可以进行嵌套搜索（这里我假设`sessionId`,`page`和`index`都是 的类型别名`int`，但显然不必如此）。

这就是你可以在 C++11 中做到的方式：

```
#include <map>
#include <algorithm>
#include <stdexcept>

int find_index(
    std::map<int, std::map<int, int>> const& m,
    int sessionId,
    int pageId)
{
    auto i = m.find(sessionId);
    if (i != m.end())
    {
        auto j = i->second.find(pageId);
        if (j != i->second.end())
        {
            return j->first;
        }
    }

    throw std::logic_error("Invalid coordinates");
} 
```

这是您可以使用它的方式：

```
#include <iostream>

int main()
{
    std::map<int, std::map<int, int>> m;
    m[42] = std::map<int, int>{{1729, 6}};

    std::cout << find_index(m, 42, 1729);
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx%24132)。

* * *

**更新：**

编辑后，结果发现要求完全不同。如果我理解正确，给定 a`page`和 an `index`，您想检索在相应的内部映射中`sessionId`存在 page -> index` 关联的所有 s 。`在这种情况下，算法可能如下所示：`

 ````
#include <map>
#include <algorithm>
#include <vector>

std::vector<int> find_sessions_by_page_and_index(
    std::map<int, std::map<int, int>> const& m,
    int page,
    int index)
{
    std::vector<int> result;
    for (auto const& p : m)
    {
        auto i = p.second.find(page);
        if ((i != p.second.end()) && (i->second == index))
        {
            result.push_back(p.first);
        }
    }

    return result;
} 
```

这就是你将如何使用它：

```
#include <iostream>

int main()
{
    std::map<int, std::map<int, int>> m;
    m[42] = std::map<int, int>{{1729, 6}};
    m[24] = std::map<int, int>{{1729, 6}};
    m[5] = std::map<int, int>{{1729, 12}};
    m[10] = std::map<int, int>{{9271, 6}};

    auto v = find_sessions_by_page_and_index(m, 1729, 6);
    for (auto x : v)
    {
        std::cout << x << " ";
    }
} 
```

当然还有[活生生的例子](http://liveworkspace.org/code/48Ihhx%24143)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:39:53.347

```
typedef map<page, index> page_map;
typedef map<sessionid, page_map> ses_map;

ses_map the_map; // The main map
index index_wanted;  // The index you are looking for.

for(ses_map::iterator ses_it = the_map.begin(); ses_it != the_map.end(); ++ses_it) {
    for(page_map::iterator page_iter = ses_it->second.begin(); page_iter != ses_it->second.end(); ++page_iter) {
        if(index_wanted == page_iter->second) {
            // Found it!
        }
    }
} 
````

# android - How to find my sharedPreferences xml file for use of getSharedPreferences() in Android

> ID：15721043
> 
> 赞同：0
> 
> 时间：2013-03-30T16:54:18.883
> 
> 标签：android, sharedpreferences, preferences

I'm trying to have a checkbox in preferences to check if user wants the application to run on boot.
The settings file is called `settings.xml` in is under `PROJECT.res.xml.setting.xml`.
But when I try to use this file to read the checkbox on my Receiver, I can't find the setting.xml file.
I've tried the following combinations:

```
SharedPreferences sharedPrefs = context.getSharedPreferences("R.res.xml.settings.xml", Context.MODE_PRIVATE);
SharedPreferences sharedPrefs = context.getSharedPreferences("R.xml.settings.xml", Context.MODE_PRIVATE);
SharedPreferences sharedPrefs = context.getSharedPreferences(".settings", Context.MODE_PRIVATE);
SharedPreferences sharedPrefs = context.getSharedPreferences("settings", Context.MODE_PRIVATE); 
```

I really don't know what is the correct way ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:04:25.353

This is the way I get SharedPreferences (notice I don't give it a XML file name):

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T17:04:03.863

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:08:00.663

I use this code for saving a String on SharedPreferences:

```
 SharedPreferences prefs = this.getSharedPreferences("your.project.app", Context.MODE_PRIVATE);
    String stringToSave = "your.project.app.nameOfString";
    prefs.edit().putString(stringToSave, "string content").commit(); 
```

And if you want to open it later use this:

```
 SharedPreferences prefs = this.getSharedPreferences("your.project.app", Context.MODE_PRIVATE);
    String savedString = "your.project.app.nameOfString";
    String content = prefs.getString(savedString, "none"); 
```

# android - how to add popup window for long texts Android

> ID：15721044
> 
> 赞同：2
> 
> 时间：2013-03-30T16:54:25.583
> 
> 标签：android, text, popup, dialog

How to write a long text in a pop up window. I tried this `dlgAlert.setMessage("Long Text");` but it is not good for long text's like descriptions. i want a new popup window with long text and OK button, so that users can read the text without any problem. how can i do this ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:46:47.510

Create an AlertDialog:

```
 String loremIpsum = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam";

    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("My Title");
    builder.setMessage(loremIpsum);

    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            // Do something
        }
    });
    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            // User cancelled the dialog
        }
    });
    builder.show(); 
```

Which will look like this(It scrolls):

![enter image description here](../Images/eaba4a9deaf443b8d57e3331ff1ff4eb.png)

# objective-c - Mac 自定义协议在某些机器上失败

> ID：15721047
> 
> 赞同：0
> 
> 时间：2013-03-30T16:54:49.720
> 
> 标签：objective-c, macos, cocoa, custom-protocol

Mac 操作系统 10.8.3。当单击浏览器中的链接时，这个简单的应用程序从自定义协议运行，例如 run 。

使用 xCode 编译 .app，未签名。

适用于大多数机器，但不适用于某些机器。一个不工作的是 Mac OS 10.8.2 与关守关闭。它给出了错误“由于奇怪的原因（13）失败”。我想这与许可或安全有关。我尝试将 Contents/MacOS/Binary chmoding 到 777，但还是一样。

我是否必须签署 Apple 开发证书才能使其工作，或者在代码或 plist 中执行其他操作以使其在所有机器上工作？

列表

```
<key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>protocoltest</string>
            </array>
            <key>CFBundleURLName</key>
            <string>com.TestWebLauncher</string>
        </dict>
    </array> 
```

AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    if ([invokeUrl length] == 0)
    {
        invokeUrl = @"no url";
    }

    [txt setStringValue:invokeUrl];

}

- (id)init
{
    [[NSAppleEventManager sharedAppleEventManager] setEventHandler:self andSelector:@selector(handleURLEvent:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL];
    return [super init];
}

- (BOOL)handleURLEvent:(NSAppleEventDescriptor*)event withReplyEvent:(NSAppleEventDescriptor*)replyEvent
{
    NSString* url = [[event paramDescriptorForKeyword:keyDirectObject] stringValue];
    NSLog(@"%@", url);
    invokeUrl = url;
    return YES;
}

@end 
```

# php - self:: 到相同的函数名返回

> ID：15721048
> 
> 赞同：-5
> 
> 时间：2013-03-30T16:54:51.150
> 
> 标签：php

```
public static function TestDB(){
    if (self::TestDB()){
        echo "Yes";
    }else{
        echo "No";
    }
} 
```

我正在尝试一种递归形式，通过相同的函数推送相同的变量是失败的（不要问为什么）当我这样做时，我会看到：

> 致命错误：允许的内存大小为 134217728 字节已用尽（尝试分配 65488 字节）

为什么这会*耗尽*我的内存限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:59:05.860

您有没有终止条件的递归。递归永远不会完成，填充调用堆栈并使用越来越多的内存。您需要添加终止条件。

以下是终止条件的示例：

```
public static function TestDB($x) {
    if ($x < 10) {
        self::TestDB($x + 1);
    } else {
        echo '>= 10!';
    }
} 
```

# ios - iOS：推送带有动画的视图控制器只能工作一次

> ID：15721049
> 
> 赞同：0
> 
> 时间：2013-03-30T16:55:16.423
> 
> 标签：ios, pushviewcontroller

我正在为我的一个具有 API 的应用程序创建一个 iPhone 客户端。我正在使用 GTMOAuth2 库进行身份验证。图书馆会使用正确的 url 为我打开一个 web 视图。但是我必须自己推动视图控制器。让我向您展示一些代码以使事情更清楚：

```
- (void)signInWithCatapult
{
    [self signOut];

    GTMOAuth2ViewControllerTouch *viewController;
    viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithAuthentication:[_account catapultAuthenticaiton]
                                                                 authorizationURL:[NSURL URLWithString:kCatapultAuthURL]
                                                                 keychainItemName:kCatapultKeychainItemName
                                                                         delegate:self
                                                                 finishedSelector:@selector(viewController:finishedWithAuth:error:)];

    [self.navigationController pushViewController:viewController animated:YES];
} 
```

我有一个“加号”/“添加”按钮，我动态添加到视图中并指向该方法：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(signInWithCatapult)]; 
```

当我按下“添加”按钮时，应该发生的是打开带有动画的 Web 视图，然后将帐户添加到填充表格视图的帐户实例变量中。如果我添加一个帐户，这可以正常工作，但是一旦我尝试添加第二个帐户，屏幕就会变黑，并且控制台中会出现两个错误：

```
nested pop animation can result in corrupted navigation bar

Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted. 
```

我发现避免这个问题的唯一方法是在推动视图控制器时禁用动画。

请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T23:35:01.273

`nested pop animation can result in corrupted navigation bar`当我试图在视图控制器出现之前弹出它时，我收到了这条消息。覆盖`viewDidAppear`以在您的 UIViewController 子类中设置一个标志，指示该视图已出现（记住也要调用`[super viewDidAppear]`）。在弹出控制器之前测试该标志。如果视图尚未出现，您可能需要设置*另一个*标志，指示您需要在视图控制器`viewDidAppear`出现后立即从内部弹出视图控制器。像这样：

```
@interface MyViewController : UIViewController {
    bool didAppear, needToPop;
} 
```

……在`@implementation`……

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    didAppear = YES;
    if (needToPop)
        [self.navigationController popViewControllerAnimated:YES];
}

- (void)myCrucialBackgroundTask {
    // this task was presumably initiated when view was created or loaded....
    ...
    if (myTaskFailed) {  // o noes!
        if (didAppear)
            [self.navigationController popViewControllerAnimated:YES];
        else
            needToPop = YES;
    }
} 
```

重复的`popViewControllerAnimated`调用有点难看，但我可以让它在我目前疲倦的状态下工作的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:31:32.800

典型情况

1.  你`push`或者`pop`控制器里面`viewWillAppear:`或者类似的方法。

2.  您覆盖`viewWillAppear:`（或类似方法）但您没有调用`[super viewWillAppear:]`.

3.  您正在同时启动两个动画，例如运行动画`pop`然后立即运行动画`push`。然后动画发生碰撞。在这种情况下，`[UINavigationController setViewControllers:animated:]`必须使用 using。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:24:36.923

您是否尝试过以下方法来解雇您？

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# python - What's the error of numpy.polyfit?

> ID：15721053
> 
> 赞同：30
> 
> 时间：2013-03-30T16:55:34.987
> 
> 标签：python, numpy, curve-fitting

I want to use `numpy.polyfit` for physical calculations, therefore I need the magnitude of the error.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-30T17:37:57.167

If you specify `full=True` in your call to [`polyfit`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html), it will include extra information:

```
>>> x = np.arange(100)
>>> y = x**2 + 3*x + 5 + np.random.rand(100)
>>> np.polyfit(x, y, 2)
array([ 0.99995888,  3.00221219,  5.56776641])
>>> np.polyfit(x, y, 2, full=True)
(array([ 0.99995888,  3.00221219,  5.56776641]), # coefficients
 array([ 7.19260721]), # residuals
 3, # rank
 array([ 11.87708199,   3.5299267 ,   0.52876389]), # singular values
 2.2204460492503131e-14) # conditioning threshold 
```

The residual value returned is the sum of the squares of the fit errors, not sure if this is what you are after:

```
>>> np.sum((np.polyval(np.polyfit(x, y, 2), x) - y)**2)
7.1926072073491056 
```

In version 1.7 there is also a `cov` keyword that will return the covariance matrix for your coefficients, which you could use to calculate the uncertainty of the fit coefficients themselves.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-30T17:43:21.567

As you can see in the [documentation](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html):

```
Returns
-------
p : ndarray, shape (M,) or (M, K)
    Polynomial coefficients, highest power first.
    If `y` was 2-D, the coefficients for `k`-th data set are in ``p[:,k]``.

residuals, rank, singular_values, rcond : present only if `full` = True
    Residuals of the least-squares fit, the effective rank of the scaled
    Vandermonde coefficient matrix, its singular values, and the specified
    value of `rcond`. For more details, see `linalg.lstsq`. 
```

Which means that if you can do a fit and get the residuals as:

```
 import numpy as np
 x = np.arange(10)
 y = x**2 -3*x + np.random.random(10)

 p, res, _, _, _ = numpy.polyfit(x, y, deg, full=True) 
```

Then, the `p` are your fit parameters, and the `res` will be the residuals, as described above. The `_`'s are because you don't need to save the last three parameters, so you can just save them in the variable `_` which you won't use. This is a convention and is not required.

* * *

@Jaime's answer explains what the residual means. Another thing you can do is look at those squared deviations as a function (the sum of which is `res`). This is particularly helpful to see a trend that didn't fit sufficiently. `res` can be large because of statistical noise, or possibly systematic poor fitting, for example:

```
x = np.arange(100)
y = 1000*np.sqrt(x) + x**2 - 10*x + 500*np.random.random(100) - 250

p = np.polyfit(x,y,2) # insufficient degree to include sqrt

yfit = np.polyval(p,x)

figure()
plot(x,y, label='data')
plot(x,yfit, label='fit')
plot(x,yfit-y, label='var') 
```

So in the figure, note the bad fit near `x = 0`:
![polyfit](../Images/6d317df08ad38f7b5eaa928bc7788f16.png)

# file - .htaccess 拒绝某些 IP 的某些文件访问

> ID：15721054
> 
> 赞同：0
> 
> 时间：2013-03-30T16:55:36.290
> 
> 标签：file, .htaccess, ip

我必须拒绝访问特定 IP 范围的服务器上的三个 php 文件，我应该选择哪种方式？这些例子正确吗？

```
<FilesMatch "\register.php|\login.php|\admincp\index.php|\modcp\index.php">
order allow,deny
allow from all
deny from x.x.x.x
</FilesMatch> 
```

或者

```
<Files "\register.php|\login.php|\admincp\index.php|\modcp\index.php">
order allow,deny
allow from all
deny from x.x.x.x
</Files> 
```

感谢帮助

# python - 平面图/地图的实现（带有嵌入）

> ID：15721064
> 
> 赞同：9
> 
> 时间：2013-03-30T16:56:39.197
> 
> 标签：python, graph, planar-graph

就本文而言，**平面图**或**平面图**是指可以在平面上（或等效地在球体上）绘制的抽象图，以及每个顶点的边的圆形顺序到特定的此类绘图。这个额外的信息决定了球体上的嵌入（直到移动顶点和边，使其永远不会与任何其他顶点/边相交）。我*确实*想允许循环和多个边缘。

例如，假设我们已经构建了如下图。在平面中绘制两个顶点（A 和 B），以及连接这两个顶点的两条边。两条边共同形成一条简单的闭合曲线 γ。现在再添加两个顶点，A' 和 B'，并将 A 和 A' 与一条边连接，同时将 B 和 B' 连接起来。

这个抽象图将有两个不等价的嵌入，根据顶点 A' 和 B' 是否被曲线 \gamma 分开。

* * *

我的问题是：**有没有实现这种平面图的 Python 包？**

我对一个可以创建平面图绘图（当然是关于嵌入）以及执行一些标准操作（例如，给出面数，形成对偶图等）的包感兴趣

如果 Python 中不存在这样的包，我也会对其他语言的实现感兴趣。

* * *

当然，有各种包可以实现图形的绘制和图形理论算法。但是，我没有注意到在任何这些中使用已经带有嵌入的图形的可能性。参考将不胜感激。

**编辑。**让我进一步详细说明。如果球体与自身的同胚相关，则同一图在球体中的两个嵌入是等价的。如上所述，平面图的嵌入通常不是唯一的，所以我所要求**的**与测试图形的平面性并绘制一些嵌入不同。

有几种组合方式可以对嵌入进行编码，直到达到这个等价。可能最简单的方法是记录每个顶点的边的循环顺序（“旋转系统”），但还有很多其他的。有关讨论和参考，请参阅[Wikipedia 上有关图嵌入的文章。](https://en.wikipedia.org/wiki/Graph_embedding#Combinatorial_embedding)

人们可能希望对这种组合嵌入执行一些明显的操作，例如找到图形的面，找到边/顶点相邻的面，在面中插入顶点，细分边，绘制图片嵌入等

是否有一种或几种表示 Python 中可用的组合图嵌入的数据结构的实现？（我注意到图嵌入在一般表面上是有意义的，尽管我主要对球体的情况感兴趣。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-18T01:21:25.703

我刚刚注意到 networkx 确实包含一个用于我描述的目的的类，即 PlanarEmbedding。请参阅[https://networkx.github.io/documentation/latest/reference/algorithms/planarity.html](https://networkx.github.io/documentation/latest/reference/algorithms/planarity.html)

（我不确定自从我问这个问题以来是否已经介绍过，或者我当时是否错过了。）

该类附带的方法看起来确实非常基础，而这仅实现了平面嵌入的一种可能数据结构。我会进一步调查；如果有人知道其他实现，将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T07:45:50.550

我不确定我是否完全理解您的要求，但您是否看过这个 [平面库](https://github.com/hagberg/planarity/)。它是平面算法的 ac(++?) 实现的 cython 包装器，包括绘图。我一直在将它与networkX一起使用。

# c# - 运行时出错

> ID：15721066
> 
> 赞同：0
> 
> 时间：2013-03-30T16:56:42.663
> 
> 标签：c#, process

我编写代码以显示从一个列表到另一个列表的任何进程，但出现错误！我错过了什么？

```
private void lsvproccess_SelectedIndexChanged(object sender, EventArgs e)
{
    lsvitems.Items.Clear();
    ListView lsvview = new ListView();
    int index = lsvview.FocusedItem.Index;  /*( get error in run time )*/

    Process p = new Process();
    p = (Process)process_array[index];

    Detail_process(p);    // detailing each process in right side listview
    try
    {
        // calling Get_modules() method to acquire whole modules 
        // cooperating in this process
        if (chbxmodule.Checked)
            Get_modules(p.Modules);
    }
    catch (Win32Exception err)
    {
        MessageBox.Show(err.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:01:52.703

我不完全确定我理解你想要做什么，但我很确定这是因为你试图在你刚刚实例化的 ListView 上设置焦点项目的索引。

尽管如此，如果没有更好地了解您要完成的工作，我认为我无法在解决问题的方式上提供更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:12:52.007

你在这里创建了一个新的 listItem

```
 ListView lsvview = new ListView();
 int index = lsvview.FocusedItem.Index; 
```

然后尝试从这个空列表中获取所选项目，这是错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:11:33.240

```
private void lsvproccess_SelectedIndexChanged(object sender, EventArgs e)
{
    lsvitems.Items.Clear();
    ListView lsvview = new ListView();
    if (lsvview.FocusedItem != null) { // <-- google "C# null reference"
        int index = lsvview.FocusedItem.Index;

        Process p = new Process();
        p = (Process)process_array[index];

        Detail_process(p);    // detailing each process in right side listview
        try
        {
            // calling Get_modules() method to acquire whole modules 
            // cooperating in this process
            if (chbxmodule.Checked)
                Get_modules(p.Modules);
        }
        catch (Win32Exception err)
        {
            MessageBox.Show(err.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T17:19:35.520

你已经清除了你的清单。我想你想看看下面的代码

请删除以下行

```
lsvitems.Items.Clear();
    ListView lsvview = new ListView(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T17:15:45.520

线

```
int index=lsvview.FocusedItem.Index;  /*( get error in run time )*/ 
```

应该

```
int index=lsvproccess.FocusedItem.Index; 
```

这是根据您的事件：`lsvproccess_SelectedIndexChanged`

这个事件是因为你改变了它的项目的选择而触发的，所以`lsvproccess`会有一个`FocusedItem`，那么你不应该得到 NRE。

除非您专门更改了事件的名称。

# java - How do you implement a binary search for object arrays in a general program?

> ID：15721067
> 
> 赞同：1
> 
> 时间：2013-03-30T16:56:45.540
> 
> 标签：java, generics, binary-search, comparable

So, I am in a course to learn java, and I'm learning about sorting, searching, algorithms, and generics. I am trying to recreate a binary search method/class that accepts any type of `Comparable` object (like the ArrayList<*Type*>).

I understand how to do it with `int`s, but I dont really know how to go about it with non-primitive types. This is what I assume it should roughly look like:

```
public class Objects<T> implements Comparable //I'm not sure about this,
//but I need to call compareTo() to compare the objects?
{
    /**
     * called from other program to find an element index in an array
     */
    public static int binSearchAll(T find, T array[])
    {
        return binarySearch(array, 0, (array.length)-1, find);
    }

    public static int binarySearch(T array[], int lower, int upper, T X)
    //x is the element to find
    {
        if (upper < lower)
            return -1;
        int middle = (lower + upper) / 2;
        if (array[middle].compareTo(X))
            return middle;
        if (array[middle] < X)
            return binarySearch(a, middle+1, upper, X);
        else
            return binarySearch(a, lower, middle-1, X);
    }
} 
```

I tried to figure out how to make this work, but I'm at a loss. In the `int` version, it works, but then it's only for `integer` types and doesn't accept `double` or `string` types as the problem asks.

in the driver class, I want to be able to create a new object and use it like this:

```
String[] str = {"a", "b", "c"};
Objects<String> s = new Objects<String>();
int indexOfB = s.binSearchAll("b", str); 
```

or, if it's possible, like this:

```
String[] str = {"a", "b", "c"};
int indexOfB = Object<String>.binSearchAll("b", str); 
```

The exact wording of the problem is:

> Create an ObjectBinarySearcher class that can search an array of Comparable objects. Demonstrate the class in a program that searches for a String in an array of String objects.

I'm almost sure I'm overthinking this.

Thanks for any help you can give!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:00:43.420

These two lines are the problem:

```
if (array[middle].compareTo(X))
...
if (array[middle] < X) 
```

... `compareTo` returns an `int` rather than a `boolean`, and you can't use `<` on arbitrary types. I suspect you've realized that much, but I'll just give you a hint: read the [`Comparable.compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29) documentation. You need to use `compareTo` instead of `<`... read the documentation for the return value to work out what you need to do.

(You probably just want to call `compareTo` once, and then check the result twice. There are three possibilities to consider, as documented...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:00:58.153

You need that your template class `T` implements the `Comparable` interface. Your actual code means that only your `Objects` class implement the interface. You must turn

```
public class Objects<T> implements Comparable {
    //class content...
} 
```

Into

```
public class Objects<T extends Comparable<T>> {
    //class content...
} 
```

And also, follow the advice from [JonSkeet's answer](https://stackoverflow.com/a/15721110/1065197) about `compareTo` method.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T04:45:50.563

> You need that your template class T implements the Comparable interface. Your actual code means that only your Objects class implement the interface. You must turn
> 
> ```
> public class Objects<T> implements Comparable {
>     //class content...
> } 
> ```
> 
> Into
> 
> ```
> public class Objects<T extends Comparable<T>> {
>     //class content...
> } 
> ```
> 
> [Luiggi Mendoza](https://stackoverflow.com/users/1065197/luiggi-mendoza)

And...

> These two lines are the problem: if (array[middle].compareTo(X)) ... if (array[middle] < X) ... compareTo returns an int rather than a boolean, and you can't use < on arbitrary types. I suspect you've realized that much, but I'll just give you a hint: read the Comparable.compareTo documentation. You need to use compareTo instead of <... read the documentation for the return value to work out what you need to do.
> 
> (You probably just want to call compareTo once, and then check the result twice. There are three possibilities to consider, as documented...) [Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)

Thanks for the answers. combined, I managed to get the program working. It now works with:

```
String[] str = {"a", "b", "c"};
Objects<String> s = new Objects<String>();
int indexOfB = s.binSearchAll("b", str); 
```

# asp.net-mvc-3 - 如何在部分 asp.NET MVC3 项目上应用单页应用程序功能？

> ID：15721069
> 
> 赞同：1
> 
> 时间：2013-03-30T16:56:46.773
> 
> 标签：asp.net-mvc-3, single-page-application

所以我正在创建一个 asp.NET MVC3 应用程序，并希望将单页应用程序功能应用于应用程序的某些部分。我认为最简单的解释方法是举个例子：

该应用程序由管理区域和公共区域组成，使用普通链接结构构建。我想将管理区域转换为单页应用程序，重用现有应用程序中的视图和模型。是否有可能做到这一点，在这种情况下怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:30:00.970

您必须面对两个主要问题，这使得 SPA 和标准应用程序之间存在差异：

*   链接：在标准应用程序中，每个链接都会将您重定向到不同的页面。
*   表单：提交表单时，会使用您在帖子中指定的 HTTP 方法（通常是 POST）发出请求，并且它在有效负载中包含用户输入的数据。

为了解决这些问题，您必须在客户端和服务器端都采取行动。为了解释提议，让我们使用以下代码：

HomeController.cs：

```
public class HomeController : Controller {
    public ActionResult Index() {
        return View();
    }

    public ActionResult Contact() {
        return View(new ContactUsViewModel());
    }

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Contact(ContactUsViewModel model) {
        if (ModelState.IsValid) {
            /* Send mail / Save in DB etc. */
            return Redirect("Index");
        }

        return View(model);
    }
} 
```

索引.cshtml：

```
<p>This is a simple page.</p>
<p>@Html.ActionLink("Click here to contact us", "Contact") 
```

**客户端：** 我们应该修复页面之间的链接，以及表单提交。

*   链接：您可以在 JS（如果您愿意，可以使用 jQuery）中连接一个事件，该事件将观察您希望在 SPA 上应用的区域中的每个链接点击 - 然后，而不是重定向用户 - 您将加载通过 AJAX 的内容。例如，看看这个示例：

    ```
    $("a").click(function(e) {
        e.preventDefault(); // Disable standard redirecting
        var href = $(e.currentTarget).attr("href");

        $.get(href, function(responseText) {
            $("#main-content-wrapper").html(responseText);
        });
    }); 
    ```

*   表单：就像我们用于链接的方法一样，我们可以将观察者连接到 JS 中的表单提交事件，然后使用 AJAX 传输数据。例如：

    ```
    $("form").submit(function(e) {
        e.preventDefault(); // Disable standard submittion
        var data = $(e.currentTarget).serialize(); // Serializing the form data
        var method = $(e.currentTarget).attr("method");
        if (typeof (method) == "undefined") { method = "POST"; }

        $.ajax({
            method: $(e.currentTarget).attr("method"),
            parameters: data,
            statusCodes: {
                404: function() { /* Handle it somehow */ }
                403: function() { /* Handle it... */ }
                200: function(response) {
                    /* Since we've done a form submittion, usurally if we're getting standard OK (200) status code - we've transffered a data - such as JSON data - indicating if the request success or we got errors etc. The code you're writing here depends on how your current application works. */
                },
        });
    }); 
    ```

**服务器端：** 由于您不希望破坏当前的应用程序逻辑 - 您仍然必须能够使用标准的 ASP.NET MVC 方法 - 例如 View()、Redirect() 等。在这种情况下，我建议创建您自己的自定义控制器基类——它将覆盖 ASP.NET 基本实现。

例如，这是一个起点：

```
public class MyController : System.Web.Mvc.Controller {
    public override View(string viewName) {
        if (Request.IsAjaxRequest()) {
            return PartialView(viewName); // If this is an AJAX request, we must return a PartialView.
        }
        return base.View(viewName);
    }
} 
```

您必须记住的几件事：

*   您必须以某种方式区分标准请求和 AJAX 请求——我使用 Request.IsAjaxRequest() 的方式是一种很好的方式。
*   Many times when you're handling a form, In the form submittion action, after you finish with the form logic, you're using Redirect() to redirect the user to another page. As you may have guessed, you can't take this approch when developing SPA. However, I can think of few solutions for this problem:
    *   You can create a status handler in the JS code so when redirecting is been issued by the server - you can load the content via AJAX / display a message and so on.
    *   You can override Redirect() and add a specific logic to perform in case of redirection when the request was done by AJAX - for instance, you can request from ASP.NET to perform the action that you're going to be transfered into and then return its content etc.
    *   You can decide that although its an SPA app - when a redirect was issued - you allows the server to perform this redirection.

As you can see - there're many approches you can take, and they depends on the way you've developed your site, how you wish it to work and what is the basic rules you're defining (e.g. "No redirection is permitted never - even after submitting a form", "After form submittion - always in case that the operation success - I'm displaying a message or performing other JS action. Because of that, I can override Redirect() and if this is an AJAX request I can return a JSON object." etc.)

# node.js - 处理异步函数。自定义回调？

> ID：15721076
> 
> 赞同：0
> 
> 时间：2013-03-30T16:57:45.997
> 
> 标签：node.js, asynchronous

**我有下面的代码，并在_.each**函数完成后尝试访问**all_records**数组。但是，由于它是异步的，我想知道是否可以将回调强制到**每个**下划线？

 ****```
var request = require('request'),
    cheerio = require('cheerio'),
    _       = require('underscore');

var all_records = [];

_.each([0,100], function(start) {

  var base_url = "http://www.example.com/search?limit=100&q=foobar&start=";
  var url = base_url + start;

  request(url, function(err, res, body) {
    var $ = cheerio.load(body),
      links = $('#results .row');
    $(links).each(function(i, link) {
      var $link = $(link);
      var record = {
        title: $link.children('.title').text().trim()
      };
      all_records.push(record);
    });
  });
});

// Need to run this once _.each has completed final iteration.
console.log(all_records); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:02:28.033

这是使用[简单同步方法](http://en.wikipedia.org/wiki/Asynchronous_semaphore)的简单解决方案：

```
var count = 101;//there are 101 numbers between 0 and 100 including 0 and 100
_.each([0,100], function(start) {

  var base_url = "http://www.example.com/search?limit=100&q=foobar&start=";
  var url = base_url + start;

  request(url, function(err, res, body) {
    var $ = cheerio.load(body),
      links = $('#results .row');
    $(links).each(function(i, link) {
      var $link = $(link);
      var record = {
        title: $link.children('.title').text().trim()
      };
      all_records.push(record);
      count--;
      if(count===0){//101 iterations done
         console.log(all_records);
      }
    });
  });
}); 
```

使用[`async`](https://github.com/caolan/async)'s`.parallel`方法可以实现更优雅的解决方案。

```
var requests = []; //an array for all the requests we will be making

for(var i=0;i<=100;i++){
   requests.push((function(done){ //create all the requests
       //here you put the code for a single request. 
       //After the push to all_records you make a single done() call 
       //to let async know the function completed
   }).bind(null,i));//the bind is that so each function gets its own value of i   
}
async.parallel(requests,function(){
    console.log(all_records);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:41:17.097

**async.each**最终成为最容易实现的。

```
async.each([0,100], function(start) {
  var base_url = "http://www.example.com/search?limit=100&q=foobar&start=";
  var url = base_url + start;

  request(url, function(err, res, body) {
    var $ = cheerio.load(body),
      links = $('#results .row');
    $(links).each(function(i, link) {
      var $link = $(link);
      var record = {
        title: $link.children('.title').text().trim()
      };
      all_records.push(record);
    });
  });
}, function(err){
  console.log(all_records);
}); 
```****

# mysql - Accessing last N-m records in MySQL

> ID：15721077
> 
> 赞同：2
> 
> 时间：2013-03-30T16:57:46.810
> 
> 标签：mysql, sql

I do know how to access last N records from the table i.e,

```
SELECT * FROM table_name ORDER BY auto_incremented_id DESC LIMIT N; 
```

There are N records means and table records keep incrementing every day, each record having unique serial ID from 1 to N. now i want to retrieve 10 records of last N-10 rows.

please consider the example

```
 Record 1
  Record 2
  Record 3
  Record 4
  Record 5
  Record 6
  Record N-M
  Record N-2
  Record N-1
  Record N 
```

How do i can retrieve ***N-2 to N-M*** rows

The solution required for an website - **1st** page displays last 10 records, **2nd** Page displays last next 10 records from the reverse except rows are displayed in first page and it goes on up to 1st record of the table.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:03:41.040

For dynamically limiting the output rows you can use inline views (as MySQL doesn't support common table expressions using `WITH` clause). An example code is as follows:

```
SELECT *
  FROM (SELECT id, name
               , @i := @i + 1 as result
          FROM table_name
               , (select @i := 0) temp
      ORDER BY id) v
  CROSS JOIN (SELECT COUNT(id) AS M FROM table_name) w
 WHERE result BETWEEN w.m-2 AND w.m; 
```

[Fiddle](http://www.sqlfiddle.com/#!2/27b83/1).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T17:24:08.603

you can play with ordering and your limit conditions

```
SELECT * from (SELECT * from table_name ORDER BY auto_incremented_id DESC LIMIT N) as temp ORDER BY auto_incremented_id ASC LIMIT M 
```

assuming as you say a paging size of 10

first page:

```
SELECT * from as temp ORDER BY auto_incremented_id DESC LIMIT 10; 
```

second page:

```
SELECT * from (SELECT * from table_name ORDER BY auto_incremented_id DESC LIMIT 20) as temp ORDER BY auto_incremented_id ASC LIMIT 10; 
```

third page:

```
SELECT * from (SELECT * from table_name ORDER BY auto_incremented_id DESC LIMIT 30) as temp ORDER BY auto_incremented_id ASC LIMIT 10; 
```

# python - Python 列表作为列表索引

> ID：15721079
> 
> 赞同：2
> 
> 时间：2013-03-30T16:58:06.533
> 
> 标签：python, list

假设我们有两个列表

```
list_A = [1,3,4,54,3,5,6,2,6,77,73,39]
list_B = [0,3,2,8] 
```

我想访问`list_A`将值`list_B`作为索引的元素（不使用循环）。

执行后，对于上述情况，结果应该如下：

```
[1, 54, 4, 6] 
```

有没有什么简单的方法可以做到这一点而不用担心`for`循环（在代码中显式调用它）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T17:00:17.200

一切都将在内部使用循环**，但它不必像您想象的那么复杂。您可以尝试列表理解：*

 *```
[list_A[i] for i in list_B] 
```

或者，您可以使用[`operator.itemgetter`](http://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
list(operator.itemgetter(*list_B)(list_A)) 
```

* * *

```
>>> import operator
>>> list_A = [1,3,4,54,3,5,6,2,6,77,73,39]
>>> list_B = [0,3,2,8]
>>> [list_A[i] for i in list_B]
[1, 54, 4, 6]
>>> list(operator.itemgetter(*list_B)(list_A))
[1, 54, 4, 6] 
```

* * *

*******好的！也许你不需要递归循环，但我认为这样的事情肯定是矫枉过正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T17:11:31.050

# 递归答案

这里没有迭代/循环。只是递归。

```
>>> list_A = [1,3,4,54,3,5,6,2,6,77,73,39]
>>> list_B = [0,3,2,8]
>>> def foo(src, indexer):
...     if not indexer:
...         return []
...     else:
...         left, right = indexer[0], indexer[1:]
...         return [src[left]] + foo(src, right)
... 
>>> foo(list_A, list_B)
[1, 54, 4, 6] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T17:00:28.340

如果您使用的是 numpy，则可以执行以下操作：

```
list_A[list_B]  // yields [1, 54, 4, 6] 
```

编辑：正如尼克 T 指出的，不要忘记先转换为数组！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-30T17:25:04.100

# 地图答案

```
>>> list_A = [1,3,4,54,3,5,6,2,6,77,73,39]
>>> list_B = [0,3,2,8]
>>> map(lambda i: list_A[i], list_B)
[1, 54, 4, 6] 
```

# 免责声明

我认为这在技术上不符合没有`for-loop`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T17:00:43.967

Numpy 可以通过[其索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)以一种相当直接的方式做到这一点。将列表转换为数组，然后你就是黄金。您可以将任何类型的可迭代作为索引传递。

```
>>> import numpy
>>> list_A = [1,3,4,54,3,5,6,2,6,77,73,39]
>>> list_B = [0,3,2,8]
>>> numpy.array(list_A)[list_B]
array([ 1, 54,  4,  6]) 
```*

# java - Making on-screen buttons scrollable

> ID：15721081
> 
> 赞同：0
> 
> 时间：2013-03-30T16:58:31.810
> 
> 标签：java, android, android-ui

I have screen with 18 buttons, Is it possible to make this group of buttons scrollable so that user can see buttons which are out of the viewable area. I tried putting these buttons in ScrollView but got the exception that only their can be only 1 child of scroll view.

Currently the buttons are present in a RelativeLayout like:

```
<Button
    android:id="@+id/btnChapter2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btnChapter1"
    android:layout_below="@+id/btnChapter1"
    android:text="Chapter 2" />

<Button
    android:id="@+id/btnChapter3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btnChapter2"
    android:layout_below="@+id/btnChapter2"
    android:text="Chapter 3" />

<Button
    android:id="@+id/btnChapter4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btnChapter3"
    android:layout_below="@+id/btnChapter3"
    android:text="Chapter 4" />

<Button
    android:id="@+id/btnChapter5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btnChapter4"
    android:layout_below="@+id/btnChapter4"
    android:text="Chapter 5" />

<Button
    android:id="@+id/btnChapter6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btnChapter5"
    android:layout_below="@+id/btnChapter5"
    android:text="Chapter 6" /> 
```

The current screen with buttons 9, 17 and 18 being screwed up looks as:

![enter image description here](../Images/15a57c6afc8367e37c78945bbfe92487.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:27:35.423

Well, ScrollView may have only one child. In this case, put a LinearLayout or RelativeLayout as the ScrollView's child. The put your button inside the LinearLayout or RelativeLayout. That should've done it. Example code:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout>
</ScrollView> 
```

# mysql - Can't access model attributes using has many through rails query

> ID：15721083
> 
> 赞同：0
> 
> 时间：2013-03-30T16:58:43.443
> 
> 标签：mysql, ruby-on-rails-3, activerecord

I have a has many through association that I have included below. I can retrieve the record, but cannot access any of the attributes by a direct call. Below are the results of

*   `Lead.first.case_details`
*   `Lead.first.case_details.case_number`

I think i should note that all my attr_accessible are :as => admin. If that is causing the problem then i am just looking for a secure way to get and set the attributes so that the users cannot

### Lead.first.case_details

```
Lead Load (0.0ms)  SELECT "leads".* FROM "leads" LIMIT 1
CaseDetail Load (0.0ms)  SELECT "case_details".* FROM "case_details" INNER JOIN "case_detail_leads" ON "case_details"."id" = "case_detail_leads"."case_detail_id" WHERE "case_detail_leads"."lead_id" = 1
[#<CaseDetail id: 1, case_number: "131", style_of_case: "V", case_type: "CC", judge: "DIAL", date_filed: "2013-03-17 05:00:00", first_charge_id: nil, first_lead_id: 1, location_id: nil, legalscraper_id: nil, created_at: "2013-03-30">] 
```

### Lead.first.case_details.case_number

```
Lead Load (1.0ms)  SELECT "leads".* FROM "leads" LIMIT 1
#<Class:0x5d351d8>: undefined method `case_number' for #<ActiveRecord::Relation:0x5d360d8>
from D:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/delegation.rb:45:in `method_missing'
from D:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/collection_proxy.rb:100:in `method_missing'
from (irb):69
from D:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
from D:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
from D:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
from E:/Sites/aws/script/rails:6:in `require'
from E:/Sites/aws/script/rails:6:in `<top (required)>'
from -e:1:in `load'
from -e:1:in `<main>' 
```

### Models

```
class Lead < ActiveRecord::Base
  has_many :case_detail_leads
  has_many :case_details, :through => :case_detail_leads

class LeadOffense < ActiveRecord::Base
  belongs_to :lead
  belongs_to :offense

class Offense < ActiveRecord::Base
  has_many :lead_offenses
  has_many :leads, :through => :lead_offenses 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:59:42.490

`Lead.first.case_details` results as an Array which doesn't have a methode `case_number`. What you can do:

*   `Lead.first.case_details.first.case_number`
*   `Lead.first.case_details.map{|case_detail| case_detail.case_number}`

# php - 比较 CSV 文件中 1 列中的值与 1 列中的 MySQL 值并在 PHP 中删除

> ID：15721084
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:58:49.987
> 
> 标签：php, mysql, sql, csv, compare

我是 mysql 和 php 的新手，在[http://answers.yahoo.com/question/index?qid=20080717110807AAsXkGL](http://answers.yahoo.com/question/index?qid=20080717110807AAsXkGL)找到了类似的功能：

但是这段代码比较了 mysql 和 mysql：

第一个表 t1 中的 3 列：第一、最后、电子邮件。t2 中的相同列。

```
DELETE FROM t1 WHERE t1.email IN (SELECT t2.email from t2) 
```

`names`但是，如果名称值存在于 A 列（名称）的 CSV 文件中，我需要一个 PHP 代码，该代码将从列中的 MySQL 表中删除整行。

在此先感谢您的帮助！我已经花了 4 个小时在网上寻找，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:07:48.420

将结果的数组`tmpArray`从`SELECT t2.email from t2`

并做这样的事情：

```
$in = implode(',', $tmpArray);

DELETE FROM t1 WHERE t1.email IN ($in) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:58:07.010

以下是寻求者的完整答案：

```
$dbhost = "localhost";
$dbuser = "root";
$dbpass = "root";

$dbname = "yourdatabase";

$link = mysql_connect($dbhost, $dbuser, $dbpass);

$lines =file('active.csv');
foreach($lines as $line){
$na[]=trim($line);
}

$in=implode(',',$na);

$query = "DELETE FROM table1 WHERE t2.value IN ($in)";
$del=mysql_query($query,$link); 
```

If you want to delete in Table 1 entire row if the value is not present in CSV file then change the query to:

```
 $query = "DELETE FROM table1 WHERE t2.value NOT IN ($in)"; 
```

IMPORTANT NOTE: the header in CSV file should NOT be present because otherwise this script will delete entire Table 1.

# javascript - 检查是否加载了背景图片，响应版

> ID：15721085
> 
> 赞同：-1
> 
> 时间：2013-03-30T16:58:52.957
> 
> 标签：javascript, html, css, background

我已经为body标签（大图片）设置了一个背景图像，我想在加载后淡入它（因为图像很大，加载时它会滚动）。

我已经看到这个基本上使用隐藏的 img 标签并利用浏览器缓存的答案：[如何检查是否加载了背景图像？](https://stackoverflow.com/questions/5057990/how-can-i-check-if-a-background-image-is-loaded)

这对于固定布局的网站非常有用，但是响应式网站呢？我不想同时加载所有 3 张背景图片，但我希望能够选择必须在隐藏的 img 标签中加载的一张。

在这里查看网站：http: [//jll.is](http://jll.is)

谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T17:29:02.427

首先应用`opacity:0`到图像，这将阻止它被显示。并像这样使用 jquery 使你的淡入淡出效果

```
$('#imgid').load(function(){

Fade in effect

}); 
```

# ios - 程序因未知原因崩溃

> ID：15721092
> 
> 赞同：0
> 
> 时间：2013-03-30T16:59:28.410
> 
> 标签：ios, xcode, uiviewcontroller, crash, segue

我无法弄清楚为什么会发生此错误。我已经坚持了好几天了。我有一个名为 ADViewController 的 VC，它显示来自 plist 文件的问题。它有自己的类，是 ViewController 的子类，而不是 UIViewController（这可能值得一提）。我很难执行Segue“LevelCleared”，这是它自己的类ClearedAd1ViewController。如果这是一个愚蠢的问题，我深表歉意，但我自己无法弄清楚。这是 ADViewController.m

```
- (void)viewDidLoad
{
[super viewDidLoad];
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Addition1" ofType:@"plist"]];
currentQuestion = -1;
[self showNextQuestion];

}
-(void) showNextQuestion{
currentQuestion++;
if (currentQuestion <= 2) {

    int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *addimage = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *Answer = [NSMutableArray arrayWithCapacity:numItems];

    for (NSDictionary *itemData in rootArray) {
        [question addObject:[itemData objectForKey:@"question"]];
        [A addObject:[itemData objectForKey:@"A"]];
        [B addObject:[itemData objectForKey:@"B"]];
        [C addObject:[itemData objectForKey:@"C"]];
        [addimage addObject:[itemData objectForKey:@"ImageUse"]];
        [Answer addObject:[itemData objectForKey:@"ANS"]];

    }
    self.questionasked.text = question[currentQuestion];
    self.answer1.text = A[currentQuestion];
    self.answer2.text = B[currentQuestion];
    self.answer3.text = C[currentQuestion];
    additionImage.image = [UIImage imageNamed:addimage[currentQuestion]];
    self.correctAns = Answer[currentQuestion];}
else{
    NSLog(@"End of Array ");
    [self performSegueWithIdentifier:@"LevelCleared" sender:nil];

}
} 
```

我会将 NSLog 消息写入控制台，但不会执行 Segue。当它到达数组中的第 3 项时，我想执行 segue，但我不断收到此错误

```
 2013-03-30 16:37:15.912 thefyp[1268:c07] End of Array 
2013-03-30 16:37:15.915 thefyp[1268:c07] -[ClearedAd1ViewController setCurrentQuestion:]: unrecognized selector sent to instance 0x757fcd0
2013-03-30 16:37:15.916 thefyp[1268:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ClearedAd1ViewController setCurrentQuestion:]: unrecognized selector sent to instance 0x757fcd0'
***First throw call stack:
 (0x1cb8012 0x10f5e7e 0x1d434bd 0x1ca7bbc 0x1ca794e 0x834b 0x481b87 0x11bdd2 0x8f87 0x9050 0x1109705 0x3d2c0 0x3d258 0xfe021 0xfe57f 0xfd6e8 0x6ccef 0x6cf02 0x4ad4a 0x3c698 0x1c13df9 0x1c13ad0 0x1c2dbf5 0x1c2d962 0x1c5ebb6 0x1c5df44 0x1c5de1b 0x1c127e3 0x1c12668 0x39ffc 0x2a8d 0x29b5 0x1)
 libc++abi.dylib: terminate called throwing an exception 
```

(lldb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:30:58.887

我认为您非常困惑我认为您想说的是 ADViewController 是 UIView 的子类而不是 ViewController 类。在这种情况下

```
[self performSegueWithIdentifier:@"LevelCleared" sender:nil]; 
```

不能调用，因为它是视图控制器方法而不是 UIView 方法。这就是错误说选择器被识别的原因。

因此，您需要在 UIView 控制器中实现代码来解决此问题。

# image-processing - Detecting mouse event in an image with matplotlib

> ID：15721094
> 
> 赞同：4
> 
> 时间：2013-03-30T16:59:35.680
> 
> 标签：image-processing, matplotlib, mouseevent

So I'm trying write a program that detects a mouse click on an image and saves the x,y position. I've been using matplotlib and I have it working with a basic plot, but when I try to use the same code with an image, I get the following error:

> cid = implot.canvas.mpl_connect('button_press_event', onclick) 'AxesImage' object has no attribute 'canvas'

This is my code:

```
import matplotlib.pyplot as plt

im = plt.imread('image.PNG')
implot = plt.imshow(im)

def onclick(event):
    if event.xdata != None and event.ydata != None:
        print(event.xdata, event.ydata)
cid = implot.canvas.mpl_connect('button_press_event', onclick)

plt.show() 
```

Let me know if you have any ideas on how to fix this or a better way to achieve my goal. Thanks so much!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T23:28:10.523

The problem is that `implot` is a sub-class of `Artist` which draws to a `canvas` instance, but does not contain a (easy to get to) reference to the canvas. The attribute you are looking for is an attribute of the `figure` class.

You want to do:

```
ax = plt.gca()
fig = plt.gcf()
implot = ax.imshow(im)

def onclick(event):
    if event.xdata != None and event.ydata != None:
        print(event.xdata, event.ydata)
cid = fig.canvas.mpl_connect('button_press_event', onclick)

plt.show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T18:00:25.333

Simply replace `implot.canvas` with `implot.figure.canvas`:

```
cid = implot.figure.canvas.mpl_connect('button_press_event', onclick) 
```

# angularjs - 如何使用AngularJS从选择列表中选择一个值填充第二个选择列表中的选项

> ID：15721098
> 
> 赞同：0
> 
> 时间：2013-03-30T16:59:57.307
> 
> 标签：angularjs

我正在使用以下 HTML 和 javascript 来填充选择框：

```
 <select data-ng-model="selectedTestAccount" data-ng-options="item.Id as item.Name for item in testAccounts">
      <option value="">Select Account</option>
   </select>

   <script type="text/javascript">
        angular.module('test', []).controller('TestCtrl', function ($scope, $http) {
            $scope.selectedTestAccount = null;
            $scope.testAccounts = [];

            $http({
                method: 'GET',
                url: '/Admin/Exams/GetTestAccounts',
                params: { applicationId: 3 }
            }).success(function (result) {
                $scope.testAccounts = result;
            });
        });
        angular.bootstrap(angular.element("body")[0], ["test"]);
    </script> 
```

这工作正常，但现在我需要另一个选择列表，当用户从第一个选择列表中选择一个值时选择主题。我认为这是我设置选择并从服务器获取数据的方式：

```
 <select data-ng-model="selectedTestAccount" data-ng-options="item.Id as item.Name for item in testAccounts">
      <option value="">Select Account</option>
   </select>
   <select data-ng-model="selectedSubject" data-ng-options="item.Id as item.Name for item in subjects">
      <option value="">Select Subject</option>
   </select>
   ...
   $http({
      method: 'GET',
      url: '/Admin/GetSubjects',
      params: { testAccountId: selectedTestAccount }
   }).success(function (result) {
      $scope.subjects = result;
   }); 
```

我怎样才能做到这一点，以便当用户从第一个选择框中选择一个值时，它将转到数据库并选择主题并填充第二个选择框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:09:24.017

`$watch`您可以在回调中使用和操作应用程序的其他部分来观察范围变量的变化。

```
$scope.$watch('testAccounts', function(){
  /* get updated values and update other select "model" on success*/
}); 
```

Might consider creating service(s) for $http requests and move them out of controller(s) then get data from service within controller

# twitter - 如何从 Twitter 获取超过一周的推文？

> ID：15721099
> 
> 赞同：1
> 
> 时间：2013-03-30T17:00:02.053
> 
> 标签：twitter, tweets

对于我的研究项目，我需要包含特定链接的推文（即搜索查询）。我使用了用 Python 构建的 Twitter API——Twython 和 Tweepy（REST 和 Streaming API）。但他们都不能给我超过一周的推文。我明白，这是 Twitter 的一般政策。我找到了可以给我更旧的推文的应用程序，但它们只是以图形方式显示推文。但为了分析数据，我需要下载数据或将它们存储在文件中。还有一个只给我实时推文，但没有历史推文。还有一些其他的只允许我下载我自己的推文，这对我来说又没用。所以，如果有任何其他方法可以做到这一点，我需要找到它。帮助！

# objective-c - Custom System Notification, Similar to the Volume Notification

> ID：15721102
> 
> 赞同：0
> 
> 时间：2013-03-30T17:00:08.057
> 
> 标签：objective-c, xcode, macos, notifications

How would you go about creating a popup system notification in OS X, just like the volume notification. Xcode also shows one of these notifications when it completes a build.

You can see what I mean [here](http://i.stack.imgur.com/IB04z.png).

I would prefer to use a built in API call (which I would assume exists somewhere) over building it myself.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-09T19:04:47.653

Seems like there's some fork of MBProgressHUD with macOS in mind: [https://github.com/Foxnolds/MBProgressHUD-OSX](https://github.com/Foxnolds/MBProgressHUD-OSX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:15:53.610

There are many open source projects that implement HUD notification views. Two notable projects are [MBProgressHUD](https://github.com/jdg/MBProgressHUD) and [SVProgressHUD](https://github.com/samvermette/SVProgressHUD). Either of them should be suitable for your needs.

**EDIT for OS X**: There are no open source projects that I know of that could be used for this on OS X. However, it would not be difficult to make this yourself. Here are the key details that you need and should get you up and running:

1.  Create a custom borderless, transparent `NSWindow` as shown [here](http://www.cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html).
2.  Create a custom frame view that draws the rounded transparent black HUD background. You can use `NSBezierPath` to create a round rectangle drawing path.
3.  Add subviews to the window's content view (e.g. image view to display an icon and a text field to show text underneath it).
4.  You can use the animator proxy to fade this window in and out. e.g. `[[window animator] setAlphaValue:1.f]`.

# objective-c - Need some clarification on id data type in Objective-C

> ID：15721104
> 
> 赞同：0
> 
> 时间：2013-03-30T17:00:10.493
> 
> 标签：objective-c, syntax

Lets say I have made a Fraction class in Objective-C (as in the book "Programming with Objective-C"). One of the methods, add:, was first created like so:

```
//Fraction.h & most of Fraction.m left out for brevity's sake.
-(Fraction *)add: (Fraction*) f {
    Fraction *result = [[Fraction alloc] init];

    //Notice the dot-notation for the f-Fraction
    result.numerator = numerator * f.denominator + denominator * f.numerator;
    result.denominator = denominator * f.denominator;

    return result;
} 
```

Then in one of the later exercises, it says change the return type and argument type to id & make it work. The dot-notation, as shown above doesn't work any more, so I changed it to this:

```
-(id)add: (id)f {
    Fraction *result = [[Fraction alloc] init];

    result.numerator = numerator * [f denominator] + denominator * [f numerator];
    // So forth and so on...
    return result;
} 
```

Now my guess to why the dot-notation needs to be changed is because up until run-time, the program doesn't know what type of object that was passed to the add argument(f), therefore the compiler doesn't know of any accessor methods for f.

Am I anywhere close to understanding this? If not, can someone please clarify?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T17:15:46.517

The dot syntax and properties actually have absolutely nothing to do with each other save for that they were introduced at the same time.

Properties are a convenience for defining accessors on a class while also adding the ability to specify atomicity policy and/or memory management policy.

Dot syntax is a convenience for accessing any accessor-like API on an object. The dot is not limited to use with properties; you can say `myArray.length`, for example.

When creating dot syntax, it was desired to limit the ambiguity as much as possible. Thus, it was specifically chosen that use of the dot would require that the object in the expression would be explicitly typed; that the `id` generic type would not be allowed.

The motivation was the number of times that Key-Value Coding type expressions had blown up in various programs. Since the dot is a sort of compiled KVC expression, the goal was to eliminate that fragility.

* * *

In general, the `id` type is to be avoided. This is further encouraged through the introduction of the `instancetype` keyword (totally unrelated to the original question, but of relevance to the discussion above).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T17:09:54.380

This is correct. The compiler can not determine the actual type of the object at compile-time and therefore can not determine whether `denominator` is a property. Changing it to use bracket syntax allows it to send `denominator` as a message to the object without needing to know the object type. The only thing required to get this to compile without error is the method `-denominator` being defined *anywhere*. As you can imagine, using `id` and avoiding type checking is dangerous as you may send messages to objects that do not implement that method, resulting in a runtime exception being raised.

**EDIT**: As [bbum points out](https://stackoverflow.com/questions/15721104/need-some-clarification-on-id-data-type-in-objective-c/15721190?noredirect=1#comment22331634_15721190), `denominator` does not have to be a property and this is a general restriction over using dot syntax with objects using the `id` generic type.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T21:19:53.447

@bbum is right, to put it in simple words, if you have an object "obj" of type "id" and call a method with a dot-syntax like: `obj.methodName`, the compiler will check the type of "obj", and produce an error: `"Property 'methodName' not found"`, whereas `[obj methodName]` would bypass the compiler check. Later on it might crash in runtime, for example if "methodName" is misspelled. See more examples in the article clarifying [Objective C id type checking](http://dobegin.com/objc-id-type/) and other id behaviours.

Note that dot-syntax is limited to methods without arguments, so calls like `[objc setStuff:123]` would be unchecked.

# c#-4.0 - TypeConverter 不会转换为布尔值

> ID：15721108
> 
> 赞同：3
> 
> 时间：2013-03-30T17:00:30.947
> 
> 标签：c#-4.0, type-conversion

我有以下测试代码，这给了我一些问题。我希望能够将布尔值作为字符串传递，例如“true”或“false”并返回一个布尔值。该函数应该能够处理其他类型，所以我不能只使用 Convert.ToBoolean() 等。

```
 protected static T GetDefaultValue<T>(object propertyName)
    {
        var tc = new TypeConverter();

        return (T)tc.ConvertTo(propertyName, typeof(T));
    } 
```

当我用这行代码调用上面的函数时，它会抛出一个异常：

```
bool b = GetDefaultValue<bool>("false"); 
```

它说“'TypeConverter' 无法将 'System.String' 转换为 'System.Boolean'。”

谁能指出如何以我想要的方式使用 TypeConverter 或者它不能以这种方式工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T17:17:52.810

你可能会在这里受到很多伤害。首先，不仅仅是任何 TypeConverter 都可以，您必须找到知道如何将字符串转换为布尔值的特定类型。您可以使用 TypeDescriptor.GetConverter() 获得一个。对于 bool 来说不是问题，您将获得 System.ComponentModel.BooleanConventer。而且您必须使用它的 ConvertFrom() 方法，而不是 ConvertTo。所以这很好用：

```
 protected static T GetDefaultValue<T>(object propertyName) {
        var tc = TypeDescriptor.GetConverter(typeof(T));
        return (T)tc.ConvertFrom(propertyName);
    }
    ...
        bool b = GetDefaultValue<bool>("false");    // fine 
```

但请注意，.NET 仅内置一组有限的转换器。只是您通常在“属性”窗口中找到的类型。自定义类型需要从 TypeConverter 类派生的自己的转换器。

# jquery - Rails 折叠嵌套表单

> ID：15721109
> 
> 赞同：1
> 
> 时间：2013-03-30T17:00:35.357
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, formtastic, form-for

是否有人对如何在 Rails 中创建可以使用引导程序“折叠”或 Jqueries“手风琴”功能的表单有任何想法/资源？

基本上，我有一个包含许多嵌套属性的巨大表单，我想折叠它们，以便用户只需打开他或她想要编辑的部分。我必须相信肯定有这样的东西，但我所看到的只是人们试图将 bootstrap 或 jquery 与 formtastic 或 form_for 集成的未回答的问题。

基本上，我正在寻找可以与 Rails 集成的东西，看起来类似于：[http ://www.alpacajs.org/examples/forms/customer-profile/edit-form.html](http://www.alpacajs.org/examples/forms/customer-profile/edit-form.html)

更新：

抱歉，我刚刚意识到我的原始帖子可能有点含糊。我正在尝试使用 Formtastic（或 rails form_for）DSL，并将其与折叠功能集成。我真的没有在网络上看到人们成功地将这些放在一起的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:03:46.740

如果您想保持简单并更好地控制您在应用程序中包含的内容，您可以使用几行 javascript 轻松实现所需的效果。

我在这里举了一个例子：http: [//jsfiddle.net/iKindred/pYgLY/2/](http://jsfiddle.net/iKindred/pYgLY/2/)

这是JS：

```
jQuery(document).ready(function($){
    $('.collapsable-section').each(function(i){
        var $label = $(this).find('.label').filter(':first');
        var $fields = $(this).find('.fields').filter(':first');
        $label.click(function(e){
            $fields.slideToggle(200);
        });
    });
}); 
```

随意根据您的需要定制它，或者如果您需要帮助，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:30:43.353

我使用[引导 sass gem](https://github.com/thomas-mcdonald/bootstrap-sass)。在 Gemfile

```
group :assets do
  # ...
  gem 'bootstrap-sass'
  # ...
end 
```

您必须添加到`application.js.coffee`以下行

```
#= require bootstrap-collapse 
```

在包含表单的视图中（例如`_form.html.erb`，您只需封装要折叠的表单标签，如下所示：

```
<div class="collapse">
  <%= label_tag(:q, "Search for:") %>
  <%= text_field_tag(:q) %>
</div> 
```

# java - static public boolean vs public static boolean

> ID：15721115
> 
> 赞同：0
> 
> 时间：2013-03-30T17:01:21.357
> 
> 标签：java, android

What is the difference between using `static public boolean` and `public static boolean` for methods?

I just tried both and both seem to compile fine and have the same effect unless I am doing it wrong. Which one is better and why?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T17:04:12.747

There's absolutely no difference, but putting `public` first is slightly preferred in terms of conventions. From [section 8.4.3 of the Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3):

> `MethodModifier`: one of
> 
> ```
> Annotation public protected private abstract
> static final synchronized native strictfp 
> ```
> 
> ...
> If two or more (distinct) method modifiers appear in a method declaration, it is customary, though not required, that they appear in the order consistent with that shown above in the production for MethodModifier.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:04:52.853

> I just tried both and both seem to compile fine and have the same effect unless I am doing it wrong. Which one is better and why?

They are pretty same. No difference only first case is less readable. I think second case is more human-readable and you should program for humans so choose option that is more readable. Also by conventions you should use first.

This is similar if you ask for `null != obj` or `obj != null` both are same but first case is sometimes used but is much less readable and for me it's annoying.

`public static boolean` is more readable than `static public boolean`

# nsnotificationcenter - NSNotificationCentre without date?

> ID：15721122
> 
> 赞同：1
> 
> 时间：2013-03-30T17:01:52.123
> 
> 标签：nsnotificationcenter, nsnotifications

I want an NSNotification to be triggered when a non date based event occurs. Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:29:25.383

You have to create an NSNotification and add this notification to the default notification centre. You can do this in that unique line :

```
[[NSNotificationCenter defaultCenter] postNotificationName:notificationName object:object userInfo:dictionary]; 
```

You then have to say to your project that when a notification is sent with the name *notificationName*, trigger this specific method on my code. And this is done with :

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationMethod) name:notificationName object:object]; 
```

There is a full tutorial [here](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/).

# python - Changing color of background of tkinter window by using colorchooser in python 3 and tkinter

> ID：15721126
> 
> 赞同：1
> 
> 时间：2013-03-30T17:02:21.483
> 
> 标签：python, colors, background, window, tkinter

How can I change color of tkinter window(background) in python 3, by using colorchooser?

for now I made this:

```
from tkinter import colorchooser

def color1():
    color = colorchooser.askcolor() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:12:45.413

For a window named root, to change the background color using colorchooser, you would do:

```
color = colorchooser.askcolor()
color_name = color[1]    #to pick up the color name in HTML notation, i.e. the 2nd element of the tuple returned by the colorchooser
root.configure(background=color_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:43:24.800

Assuming the root window is name `root`, you would do:

```
root.configure(background=color) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T15:39:39.273

Bryan Oakley code is correct

```
root.configure(background="color") 
```

but, `color` must be enclosed with quotes single(`''`) or double(`""`)

# c# - 当我想使用它时，sql数据阅读器会变空

> ID：15721127
> 
> 赞同：0
> 
> 时间：2013-03-30T17:02:24.327
> 
> 标签：c#

我真的需要你的帮助，我正在做一个学校项目。我使用 SqlDataReader 来存储我的数据，在存储数据后（它可以工作，我在调试 sqldatareader 结果视图时检查了它是否充满了我的数据）当我尝试使用具有所有数据的 sqldatareader 变量时，它直接变为空？在到达 if 行之前，我的 sqlreader 中包含所有数据，但是当我调试 if 行时，它显示 sqlreader 为空！

```
 class ServicesProvider
    {
     public static SqlConnection connection = new SqlConnection(myprovider);
      public static bool LogInVerification(string NickName,string Password)
        {
            SqlDataReader SqlReader;
            SqlCommand command;
            try
            {
                command = new SqlCommand("Check_LogIn", connection);
                command.CommandType = CommandType.StoredProcedure;

            SqlParameter prm=null;
            prm = new SqlParameter("@Password", SqlDbType.VarChar);
            prm.Value=NickName;
            prm.Direction=ParameterDirection.Input;
            command.Parameters.Add(prm);

            prm = new SqlParameter("@NickName", SqlDbType.VarChar);
            prm.Value=Password;
            prm.Direction=ParameterDirection.Input;
            command.Parameters.Add(prm);

            try
            {
                connection.Open();
                SqlReader = command.ExecuteReader();

                    if (SqlReader["NickName"].ToString()== "1")
                return true;;
            }
            catch (Exception ERROR)
            {
                Console.WriteLine(ERROR.Message);
            }

        }
        catch (Exception error)
        {
            Console.WriteLine(error.Message);
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T17:05:41.520

这段代码是问题所在：

```
SqlReader = command.ExecuteReader();
if (SqlReader["NickName"].ToString()== "1") 
```

返回时`ExecuteReader`，阅读器位于第一个结果*之前。*你需要打电话`Read`来阅读结果。通常是：

```
using (SqlDataReader reader = command.ExecuteReader())
{ 
    while (reader.Read())
    {
        // Handle the data for this row
    }
} 
```

笔记：

*   如果您只想读取单个值，请考虑使用`ExecuteScalar`
*   You should have a `using` statement for each disposable resource (the connection, the command, the reader)
*   Local variables are conventionally camelCased (not PascalCased like `SqlReader`)
*   Using a single static connection is a really bad idea. Create the connection and open it each time you want to perform a database operation, and dispose it when you're done with that operation (which will happen automatically with a `using` statement)
*   It *looks* like you're probably storing passwords in plain text. This is obviously a *huge* security problem.

# java - ReadWriteRentrantLock

> ID：15721129
> 
> 赞同：0
> 
> 时间：2013-03-30T17:02:39.737
> 
> 标签：java, concurrency, reentrantreadwritelock

我对[RentrantReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)的理解是，它允许同时读取很多次但只允许一次写入。

当我们尝试获取读锁时，[文档](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.ReadLock.html#lock%28%29)状态

```
Acquires the read lock if the write lock is not held by another thread and returns immediately.

If the write lock is held by another thread then the current thread becomes disabled 
for thread scheduling purposes and lies dormant until the read lock has been acquired. 
```

这里是什么`held`意思？

*   另一个线程请求了写锁并且执行比写？

或者

*   上述情况以及另一个线程已请求写锁但正在等待获取它的情况。

因为当请求写锁时，如果

*   别人有写锁
*   别人有读锁

从[写锁定](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.WriteLock.html#lock%28%29)文档：

```
Acquires the write lock if neither the read nor write lock are held by another 
thread and returns immediately, setting the write lock hold count to one.

...

If the lock is held by another thread then the current thread becomes 
disabled for thread scheduling purposes and lies dormant until the write lock has 
been acquired, at which time the write lock hold count is set to one. 
```

因此，当一个线程在请求​​它之后等待写锁时，我只想了解读取锁调用的后续行为。他们是否让写锁的请求等待更长的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:14:48.090

**在**这种情况下保持意味着锁已被请求**和提供**。如果您只是在等待，则不认为已**持有。**

`ReentrantReadWriteLock`当大量线程请求锁定时，存在已知问题。Heinz Kabutz 博士与他们一起制作了一篇关于锁饥饿的有趣[通讯。](http://www.javaspecialists.eu/archive/Issue165.html)

[我知道新的 Java 7 Phaser](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)已经解决了许多这些问题，但我还不够熟悉它，无法以一种或另一种方式说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:30:56.223

> 是什么意思？

lock has been requested AND acquired.

> So when a thread is waiting for a write lock after requesting it, I just want to get an idea of subsequent behaviour of invocations for read locks. Do they make the request for the write lock wait even longer or not?

If at some stage all your read locks have been released a call to `lock.writeLock().lock()` will succeed in acquiring the write lock. Note however that more than one thread can hold the read lock - so if you have one thread or more holding the read lock at all time, no other thread will be able to acquire the write lock and you will have a serious liveness issue.

# yii - How to deal with guid or uuid type primary key in Yii's urlManager instead of only digital type?

> ID：15721131
> 
> 赞同：0
> 
> 时间：2013-03-30T17:02:45.377
> 
> 标签：yii, primary-key, guid, uuid

I'm trying to figure out how to pass the guid type primary key value in the HTTP GET method to the controller. I have changed my urlManager as follows:

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<id:^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$>'=>'<controller>/view',
            '<controller:\w+>/<action:[a-zA-Z_]+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:[a-zA-Z_]+>/<id:^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$>'=>'<controller>/<action>',
            '<controller:\w+>/<action:[a-zA-Z_]+>'=>'<controller>/<action>',
        ),
    ), 
```

When I browse like

```
http://localhost/mywebapp/index.php/account/2BE9515F-F388-4974-BCBB-C485C58BDF7A 
```

, the result is still HTTP 404 not found.

But when I browse like

```
http://localhost/mywebapp/index.php/account/index 
```

, it works fine. So what's the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:12:41.270

The first matching rule wins. In your case, it's likely that the URL rule `'<controller:\w+>/<id:\d+>'` matches `/account/2BE9515F-F388-4974-BCBB-C485C58BDF7A` (`<controller>`=`account` and `<id>`=`2`). You should move your second rule to the top.

Rule of thumb: More specific URL rules should be listed before more general rules.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:08:39.070

Thanks agian, Michael! I have found what the problem lays on! The regular expression can not match properly. So I changed as follows and it works fine:

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:[({]?(0x)?[0-9a-fA-F]{8}([-,]?(0x)?[0-9a-fA-F]{4}){2}((-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})|(,\{0x[0-9a-fA-F]{2}(,0x[0-9a-fA-F]{2}){7}\}))[)}]?>'=>'<controller>/view',
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:[a-zA-Z_]+>/<id:[({]?(0x)?[0-9a-fA-F]{8}([-,]?(0x)?[0-9a-fA-F]{4}){2}((-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})|(,\{0x[0-9a-fA-F]{2}(,0x[0-9a-fA-F]{2}){7}\}))[)}]?>'=>'<controller>/<action>',
            '<controller:\w+>/<action:[a-zA-Z_]+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:[a-zA-Z_]+>'=>'<controller>/<action>',
        ),
    ), 
```

Thanks!

# javascript - 创建播放列表

> ID：15721135
> 
> 赞同：0
> 
> 时间：2013-03-30T17:03:13.913
> 
> 标签：javascript, spotify

我正在尝试构建自定义播放列表。有一个带有轨道路径的数组。

这是我的尝试代码。

```
var c = new models.BridgeCollection(models.Track,"CustomList");     
c.load('type','uri').done(function(){
    for (var i = 0; i < data.length; i++) {
        var artist = data[i];
        var s = models.Track.fromURI(artist.song); // this is track path
        s.load('name').done(function(){
            var d = c.add(s);
        });
    }
}); 
```

在此之后，我试图查看数据是否存在这样的快照，但没有成功。

```
c.snapshot().done(function(snapshot) {
    var len = Math.min(snapshot.length, 50);
    for (var i = 0; i < len; i++) {
        var d = snapshot.get(i);
    }
}); 
```

在编辑器中看了很多之后，我发现添加曲目时的响应如下所示。错误消息“未知请求：undefined_append”。 ![在此处输入图像描述](../Images/87fa1407fe58f4f5dedbc9afdaa4a2fa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:28:45.677

现在我终于让它工作了。不得不说新的API有点怪！

这会循环一个带有对象 {song:'spotify:track:xxxxxx'} 的数组。将它们添加到临时播放列表中，完成后创建列表视图并添加到 html。

```
require(['$api/models','$api/models#Playlist','$views/list'], function(models,playlists,lists) {

    var listClass = lists.List;
    var sList = data;
    var p = models.Playlist.createTemporary("CustomList");
    p.done(function(pList){
        pList.load('tracks').done(function(loadedPlaylist){
            for (var i = 0; i < sList.length; i++) {
                var artist = sList[i];
                var track = models.Track.fromURI(artist.song); // this is track path
                track.load('name','uri').done(function(loadedTrack){
                    loadedPlaylist.tracks.add(loadedTrack);
                });
            }

            var listObj = listClass.forPlaylist(loadedPlaylist,{header:'fixed',type:'tracks',fetch:'scroll',fields:['artist'], height:'fixed', unplayable:'disabled'});
            document.getElementById('playlistHolder').appendChild(listObj.node);
            listObj.init();

        });
    });

}); 
```

# cakephp - CakePHP 包含条件不限制结果？

> ID：15721136
> 
> 赞同：3
> 
> 时间：2013-03-30T17:03:33.643
> 
> 标签：cakephp, containable

我正在尝试在分类列表中查找用户的杂货。关联是 Category hasMany Item hasMany User through Grocery。我正在使用 Containable Behavior，它没有过滤掉所有其他 Grocery。它基本上返回每个项目。

我的控制器功能：

```
function showlist() {
$categories = $this->Category->find('all', array(
    'contain' => array(
        'Item' => array(
            'Grocery' => array(
                'conditions' => array(
                    'Grocery.user_id =' => $this->Auth->user('id')
                )
            )
        )
    )
)); 
```

返回的数组：

```
Array
(
    [0] => Array
        (
            [Category] => Array
                (
                    [id] => 10
                    [parent_id] => 
                    [name] => Dairy
                    [lft] => 1
                    [rght] => 6
                )

            [Item] => Array
                (
                )

        )

[1] => Array
    (
        [Category] => Array
            (
                [id] => 11
                [parent_id] => 10
                [name] => Milk
                [lft] => 2
                [rght] => 3
            )

        **[Item] => Array
            (
            )**

    )

[2] => Array
    (
        [Category] => Array
            (
                [id] => 12
                [parent_id] => 10
                [name] => Cheese
                [lft] => 4
                [rght] => 5
            )

        [Item] => Array
            (
            )

    )

[3] => Array 
```

我不想返回下面没有 Grocery(ItemUser) 的任何 Item 数组。

* * *

这有效，但现在它只显示平坦。我需要它来显示该嵌套数组中某一类别的所有项目。

它显示：

```
Array
(
[0] => Array
    (
        [Category] => Array **<--This could be the same category as**
            (...)

        [Item] => Array
            (...)

        [Grocery] => Array
            (...)
    )
[1] => Array
    (
        [Category] => Array **<--This**
            (...)

        [Item] => Array
            (...)

        [Grocery] => Array
            (...)
    )
[2]... 
```

我需要它是：

```
Array
(
[0] => Array
    (
        [Category] => Array 
            (...
            [Item] => Array
            (...)

            [Item] => Array
            (...)
            )
    )
[1] => Array
    (
        [Category] => Array
            (...)

        [Item] => Array
            (...)
    )
[2]... 
```

甚至不需要 Grocery 数组，只需通过它们搜索条件即可。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T18:31:47.737

You cannot limit your main Model's results based on conditions within the Contain. When you use `contain()`, it actually creates multiple queries - that keeps you from being able to limit based on contained conditions.

To resolve this, you need to use JOINs [[ see CakePHP Joining Tables ]](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables) instead of contain.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:15:46.310

If you want nested formatting, could you move all this to another (e.g Groceries) controller which would allow you to limit by user_id or (but I have to admit that I'm not sure whether this is good Cake practice, although I have successfully used this approach...in 1.3 anyway) something along the lines of:

```
$groceries = $this->Category->Item->Grocery->find('all', array(
    'conditions' => array(
         Grocery.user_id =' => $this->Auth->user('id')
    )
)); 
```

# magento - Magento：付款完成后，paypal 标准付款未重定向到 Magento 成功页面

> ID：15721140
> 
> 赞同：2
> 
> 时间：2013-03-30T17:04:10.870
> 
> 标签：magento, paypal, magento-1.7, payment-gateway

我面临贝宝标准付款的问题。一切都很好，直到成功页面。当客户完成付款时。那么贝宝没有重定向到magento成功页面。它仍然在贝宝页面。但是从客户的贝宝帐户收费并且没有付款信息进入magento后端，这就是它显示订单为待处理的原因。

如果有人可以提供解决方案，那将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:01:28.003

1.  贝宝在贝宝账户级别有一些配置设置，用于自动退货。将此设置为真。

2.  还要确保 Paypal IPN 设置为 true。

这两个一旦完成应该解决我们的问题。

如果没有，那么您需要收集发布到贝宝的内容以及从贝宝收到的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-24T01:25:46.993

Paypal 标准不提供这种类型的重定向，因此最好使用 Express checkout 而不是 PayPal 标准版本。

# javascript - Adding a function to an array

> ID：15721143
> 
> 赞同：3
> 
> 时间：2013-03-30T17:04:24.260
> 
> 标签：javascript, anonymous-function

I am adding an anonymous function to an array and attempting to iterate over that array executing its contents. Even with a simple test case, I am getting a TypeError: is not a function.

Am I missing something simple?

```
//an array of functions
var signInFunctions = [];

//add a function to the array
signInFunctions.push(function() {
    console.log("hello world");
});

function userSignedIn() {
    //execute all functions in the signInFunctions array 
    for (var i = 0; i < signInFunctions.length; i++) {
        signInFunctions(i);
    }
}

userSignedIn(); 
```

Here's the error:

```
TypeError: 'function () {
console.log("hello world");
}' is not a function (evaluating 'signInFunctions(i)') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T17:05:46.467

This is an array of functions, so first you need to access the function at that index and *then* call it:

```
signInFunctions[i](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:06:34.303

instead of `signInFunctions(i);` use `signInFunctions [i] ();`

# excel - 在 Excel 工作表中找到行中最后使用的单元格

> ID：15721147
> 
> 赞同：2
> 
> 时间：2013-03-30T17:04:38.433
> 
> 标签：excel, delphi

我正在开发一个修改 Excel 文件的应用程序。

如何找到任何行上最后使用的单元格？

**示例：行号中最后使用的单元格 => 5**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:56:27.217

要定位一行中的最后一个单元格，您需要`End`a 的属性`Range`。

根据[文档](http://msdn.microsoft.com/en-us/library/office/ff839539.aspx)：

> 返回一个 Range 对象，该对象表示包含源范围的区域末尾的单元格。相当于按 END+UP ARROW、END+DOWN ARROW、END+LEFT ARROW 或 END+RIGHT ARROW。只读范围对象。

例如（VB代码）

```
Range("B4").End(xlToRight) 
```

将当前单元格移动到 B4 右侧第一个空单元格之前的最后一个单元格

```
Range("B4").End(xlToRight).Select 
```

将选择该单元格。

笔记

请记住，当您处理在您正在执行此操作的行中有空单元格的工作表时，您可能需要多次执行此操作。End+Right 仅从当前开始移动到“第一个空单元格之前的最后一个非空单元格”。如果在第一个空单元格之后还有其他非空单元格，您将不得不重复。因此，最后一个非空单元格将是“结束”之前的单元格，它返回工作表中的绝对最后一列。

# java - 如何解析带有数组数组的json数组

> ID：15721149
> 
> 赞同：0
> 
> 时间：2013-03-30T17:04:55.937
> 
> 标签：java, json, parsing, neo4j, gson

我想我在解析这个 json 对象时遗漏了一些东西。我收到的输出格式如下：

```
 {
  "columns" : [ "type", "relation" ],
  "data" : [ [ "SOURCE", {
    "paged_traverse" : "localhost/db/data/node/26/paged/traverse/{returnType}{?pageSize,leaseTime}",
    "outgoing_relationships" : "localhost/db/data/node/26/relationships/out",
    "data" : {
      "DATUM" : "December"
    },
    "all_typed_relationships" : "localhost/db/data/node/26/relationships/all/{-list|&|types}",
    "traverse" : "localhost/db/data/node/26/traverse/{returnType}",
    "self" : "localhost/db/data/node/26",
    "all_relationships" : "localhost/db/data/node/26/relationships/all",
    "property" : "localhost/db/data/node/26/properties/{key}",
    "outgoing_typed_relationships" : "localhost/db/data/node/26/relationships/out/{-list|&|types}",
    "properties" : "localhost/db/data/node/26/properties",
    "incoming_relationships" : "localhost/db/data/node/26/relationships/in",
    "incoming_typed_relationships" : "localhost/db/data/node/26/relationships/in/{-list|&|types}",
    "extensions" : {
    },
    "create_relationship" : "localhost/db/data/node/26/relationships"
  } ]]
} 
```

我设法在 GSON 中正确解析了最里面的部分：

```
public class Data
{
    private String paged;
    private String out;
    private Map<String, String> data;  
        ...
} 
```

但是当我提供全身时，我得到以下异常：

```
Exception in thread "main" com.google.gson.JsonParseException: The JsonDeserializer MapTypeAdapter failed to deserialize json object
  {
      "columns" : [ "type", "relation" ],
      "data" : [ [ "SOURCE", {
        "paged" : foo/{returnType}{?pageSize,leaseTime}",
        "out" : "bar",
        "data" : {
          "DATUM" : "December"
          }
        } ], 
        [ "SOURCE", {
        "paged" : "test/{returnType}{?pageSize,leaseTime}",
        "out" : "baz",
        "data" : {
          "DATUM" : "Steve"
           }
         } 
        ]
      ] 
    }  given the type java.util.Map<java.lang.String, java.lang.String> 
```

> java:498) 在 com.google.gson.Gson.fromJson(Gson.java:467) 在 com.google.gson.Gson.fromJson(Gson.java:417) 在 com.google.gson.Gson.fromJson(Gson .java:389) 在 com.skyscraper.transformer.NodeTransformer.fromGson(NodeTransformer.java:24) 在 com.skyscraper.query.read.Retriever.queryNode(Retriever.java:128) 在 com.skyscraper.query.read。 Retriever.main(Retriever.java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个 467) 在 com.google.gson.Gson.fromJson(Gson.java:417) 在 com.google.gson.Gson.fromJson(Gson.java:389) 在 com.skyscraper.transformer.NodeTransformer.fromGson(NodeTransformer.java :24) at com.skyscraper.query.read.Retriever.queryNode(Retriever.java:128) at com.skyscraper.query.read.Retriever.main(Retriever.java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个 467) 在 com.google.gson.Gson.fromJson(Gson.java:417) 在 com.google.gson.Gson.fromJson(Gson.java:389) 在 com.skyscraper.transformer.NodeTransformer.fromGson(NodeTransformer.java :24) at com.skyscraper.query.read.Retriever.queryNode(Retriever.java:128) at com.skyscraper.query.read.Retriever.main(Retriever.java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个 389) 在 com.skyscraper.transformer.NodeTransformer.fromGson(NodeTransformer.java:24) 在 com.skyscraper.query.read.Retriever.queryNode(Retriever.java:128) 在 com.skyscraper.query.read.Retriever.main (Retriever.java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个 389) 在 com.skyscraper.transformer.NodeTransformer.fromGson(NodeTransformer.java:24) 在 com.skyscraper.query.read.Retriever.queryNode(Retriever.java:128) 在 com.skyscraper.query.read.Retriever.main (Retriever.java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个 java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个 java:67) 原因：java.lang.IllegalStateException：这不是 JSON 对象。在 com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:83) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:66) 在 com.google.gson.MapTypeAdapter.deserialize(MapTypeAdapter.java:33 ) 在 com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51) ... 还有 14 个

所以问题再次是我如何正确解析这个 json 输出。如果有任何价值，它来自neo4j 休息调用。

当前实施：

```
 import java.util.ArrayList;
import java.util.List;

public class Wrapper {

    private String[] columns = new String[] { "type", "relation" };
    private List<List<Object>> f = new ArrayList<List<Object>>();

    public String[] getColumns() {
        return columns;
    }

    public void setColumns(String[] columns) {
        this.columns = columns;
    }

    public List<List<Object>> getF() {
        return f;
    }

    public void setF(List<List<Object>> f) {
        this.f = f;
    }
}

public class NodeTransformer {

    public static void main(String[] a) {

        Gson gson = new Gson();
        Wrapper w = new Wrapper();
        List<List<Object>> blah = w.getF();
        List<Object> objects = new ArrayList<Object>();
        objects.add(new DataNode());
        objects.add(new DataNode());

        blah.add(objects);
        w.setF(blah);
        System.out.println(gson.toJson(w));
    } 
```

产量：

```
{
    "columns":["type","relation"],
    "f": [ [ 
        {"paged_traverse":"localhost/db/data/node/25/paged/traverse/{returnType}{?pageSize,leaseTime}",
        "outgoing_relationships":"localhost/db/data/node/25/relationships/out",
        "data":{},
        "all_typed_relationships":"localhost/db/data/node/25/relationships/all/{-list|\u0026|types}",
        "traverse":"localhost/db/data/node/25/traverse/{returnType}",
        "self":"localhost/db/data/node/25",
        "all_relationships":"localhost/db/data/node/25/relationships/all",
        "property":"localhost/db/data/node/25/properties/{key}",
        "outgoing_typed_relationships":"localhost/db/data/node/25/relationships/out/{-list|\u0026|types}",
        "properties":"localhost/db/data/node/25/properties",
        "incoming_relationships":"localhost/db/data/node/25/relationships/in",
        "incoming_typed_relationships":"localhost/db/data/node/25/relationships/in/{-list|\u0026|types}",
        "extensions":{},
        "create_relationship":"localhost/db/data/node/25/relationships"}}
        ]
    ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:29:26.053

尝试使用这个：

```
private List<List<Object>> f = new ArrayList<List<Object>>(); 
```

然后`f.get(0).get(0)`会给你一个“类型”的字符串，然后`f.get(0).get(1)`会给你一个`JsonObject`

[http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html)

或者，从单独列中的关系数据中返回您需要的内容，而不是整个关系图。

更新：也许你应该只使用 springdata-neo4j。:)

# postgresql - 请求的未知数据库类型 tsvector

> ID：15721151
> 
> 赞同：1
> 
> 时间：2013-03-30T17:05:32.317
> 
> 标签：postgresql, symfony, doctrine-orm, tsvector

所以我的问题是我在表中添加了一列类型为 tsvector 的列，而没有将其添加到实体类中，现在当我想运行`doctrine:schema:update --force`它时，它给了我这个错误

```
Unknown database type tsvector requested, 
Doctrine\DBAL\Platforms\PostgreSqlPlatform may not support it. 
```

我现在应该怎么做，我必须在教义中创建一个 tsvector 类型还是删除 tsvector 列使用命令行更新架构，然后重新添加 tsvector 列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:03:26.830

您应该始终注册您使用的任何类型并且学说不支持，这是注册 tsvector 类型的最明显示例[https://gist.github.com/darklow/3129096](https://gist.github.com/darklow/3129096)并在您的 config.yml 中添加：

```
dbal:
    driver:   %database_driver%
    host:     %database_host%
    port:     %database_port%
    dbname:   %database_name%
    user:     %database_user%
    password: %database_password%
    charset:  UTF8
    types:
        tsvector:
            class: myProject\myBundle\Type\tsvectorType
    mapping_types:
        tsvector: tsvector 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T11:13:04.797

如果您不打算将它与 Doctrine 一起使用，您可以将以下内容添加到您的教义配置中。

```
dbal:
    driver:   %database_driver%
    ...
    ...
    types:
        tsvector: string
        hstore: string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:49:25.703

显然学说抽象层不知道这种类型，所以它不能使用这种类型的列，即使列已经在数据库表中定义......

考虑注册新的学说[自定义类型](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#custom-mapping-types)。有 tsvector 类型实现的例子[https://gist.github.com/darklow/3129096](https://gist.github.com/darklow/3129096)

# android - Android：MenuDrawer/SlidingMenu/SlidingDrawer 作为系统覆盖

> ID：15721157
> 
> 赞同：-1
> 
> 时间：2013-03-30T17:06:17.580
> 
> 标签：android, slidingdrawer, slidingmenu

对于我的应用程序，我想添加某种类型的抽屉作为系统覆盖。抽屉的把手必须很小，而菜单本身应该能够覆盖整个屏幕。有人可以帮忙吗？

每种抽屉的问题： MenuDrawer：

*   菜单和内容的大小始终相同。我想要一个带有滑动打开的大菜单的小内容。

滑动菜单：

*   与 MenuDrawer 相同，但我也没有让顶部的抽屉工作。

滑动抽屉：

*   内容显示而句柄没有。

任何帮助表示赞赏。我已经在 XDA 上查看了答案，但没有一个可以帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:09:54.080

您可以使用以下语法将 SlidingMenu 的大小设置为您想要的任何值：

```
menu.setBehindWidthRes("300dp"); 
```

# javascript - 将特定 JS 转换为通用 jQuery 脚本（示例）

> ID：15721159
> 
> 赞同：1
> 
> 时间：2013-03-30T17:06:31.310
> 
> 标签：javascript, jquery, button, checkbox

我比 jQuery 更熟悉 JS，但看起来我需要扩展我对后者的了解才能实现我想要做的事情。

我有这个代码：它有一个在黑色、绿色和红色之间切换的按钮，并且分别不选中框、框 1 或框 2。

JS中的示例：[JS 演示](http://jsfiddle.net/7Tjvj/1/)

```
var colors = ["green", "red", "black"];

function setColor(el) {
   el.colorIdx = el.colorIdx || 0;
   el.style.color = colors[el.colorIdx++ % colors.length];
document.getElementById('box1').checked = el.style.color == 'green';
document.getElementById('box2').checked = el.style.color == 'red';
} 
```

但我需要使脚本更加通用，以便它适用于任何按钮/复选框。这是我到目前为止已经开始的，但我不知道如何将它与像 JS 这样的颜色属性结合起来。

[jQuery](http://jsfiddle.net/LKDCM/1/)

```
$("input").on('click', function () {
    $("[name^=" + this.value + 1 + "]").attr('checked', true)
    $("[name^=" + this.value + 2 + "]").attr('checked', true) 
}) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:30:22.173

您不必使用 jQuery 来完成此操作。这是一个纯 JS 解决方案，我将您的复选框/按钮集包装在`<div class="color-set">`一个简单的方法中以允许更多，然后使用该`data-color`属性设置哪个颜色*索引*（也可以轻松地检查文本）是否我们设置了复选框.

[jsFiddle](http://jsfiddle.net/Tyriar/dKE5X/1/)

**HTML**

```
<div class="color-set">
    <input type="checkbox" data-color="0" />
    <input type="checkbox" data-color="1" />
    <input type="button" value="box" />
</div> 
```

**JavaScript**

```
var colors = ["green", "red", "black"];

function setColor() {
    this.colorIdx = (this.colorIdx || 0) % colors.length;
    this.style.color = colors[this.colorIdx];

    for (var i = 0; i < this.checkboxes.length; i++) {
        this.checkboxes[i].checked = this.colorIdx == this.checkboxes[i].getAttribute('data-color');
    }

    this.colorIdx++;
}

window.addEventListener('load', function() {
    var colorSet = document.getElementsByClassName('color-set');

    for (var i = 0; i < colorSet.length; i++) {
        var button = colorSet[i].querySelector('input[type=button]');
        button.checkboxes = colorSet[i].querySelectorAll('input[type=checkbox]');
        button.addEventListener('click', setColor);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:55:31.293

这是使用 jQuery 的更通用的选项：

内容：

```
<div class='example-container'>
    <input type="checkbox"  />
    <input type="checkbox"  />
    <input type="button"  value="box" />
</div> 
```

代码：

```
function colorCycle(container, colors) {
  colors = colors || ["black", "green", "red"];
  var button = container.find(':button');
  var checkboxes = container.find(':checkbox');
  var index = 0;

  function setIndex(newIndex) {
    index = newIndex;
    checkboxes.attr('checked', false);
    if (index > 0)
      $(checkboxes[index - 1]).attr('checked', true)

    button.css('color', colors[index]);
  }

  button.click(function () {
    setIndex((index + 1) % (checkboxes.length + 1));
  });

  // Optional bidirectional support:
  checkboxes.change(function () {
    var checkbox = $(this);
    if (!checkbox.attr('checked')) {
      setIndex(0);
    } 
    else {
      setIndex(checkboxes.index(checkbox) + 1);
    }
  });
}

$(function () {
  colorCycle($('.example-container'));
}); 
```

[http://jsfiddle.net/Lmyfr/](http://jsfiddle.net/Lmyfr/)

它对 HTML 元素的依赖较少，并支持任意数量的复选框和双向更新。

# objective-c - 如何在动画到达屏幕上的某个点时发出警报。目标 C

> ID：15721162
> 
> 赞同：1
> 
> 时间：2013-03-30T17:07:31.837
> 
> 标签：objective-c, xcode, cocoa-touch

我有一个动画，它连续在屏幕上运行。现在，当您触摸屏幕某个部分的动画时，我正试图获得警报。

目前我已经到了这样的地步，如果你触摸屏幕中间你会得到一个警报。

**SelectedCellViewController.h**

```
#import <Accounts/Accounts.h>
#import <QuartzCore/QuartzCore.h>

@interface SelectedCellViewController : UIViewController {
IBOutlet UIImageView *rocket;
}

@end 
```

**SelectedCellViewController.m**

```
#import "SelectedCellViewController.h"

@interface SelectedCellViewController ()

@end

@implementation SelectedCellViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
}
return self;
}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad {

[super viewDidLoad];

[self performSelector:@selector(imageSpawn:) withObject:nil afterDelay:3];

  }

     - (void) imageSpawn:(id) sender
   {

      UIImage* image = [UIImage imageNamed:@"ae"];
      rocket = [[UIImageView alloc] initWithImage:image];
       rocket.frame = CGRectMake(-25, 200, 25, 40);
       [UIView animateWithDuration:5
                      delay:0.2f
                    options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                 animations:^(){rocket.frame=CGRectMake(345, 200, 25, 40);}
                 completion:^(BOOL fin) {
                 }];

   UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(ballTapped:)];
tapped.numberOfTapsRequired = 1;
[self.view addGestureRecognizer:tapped];
[self.view setUserInteractionEnabled:YES];
[self.view addSubview:rocket];

}

-(void)ballTapped:(UIGestureRecognizer *)gesture
{

//  [rocket.layer removeAllAnimations];
NSLog(@"Tag = %d", gesture.view.tag);

 CGPoint location = [gesture locationInView:gesture.view]; 
```

Rocket.frame = CGRectMake(location.x,location.y,25,40);

```
 CGPoint location1 = [gesture locationInView:gesture.view];
CGRect rectToCompare =  CGRectMake(10.0f, 200.0f, 200.0f, 42.0f);

if (CGRectContainsPoint(rectToCompare, location1)) {

    //trigger an event.
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Tapped row!"
                                                    message:[NSString stringWithFormat:@"Shot"]
                                                   delegate:nil
                                          cancelButtonTitle:@"Yes, I did!"
                                          otherButtonTitles:nil];
    [alert show];
}

}

- (void)viewDidUnload {

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:14:00.727

要在动画中间获取视图属性的值，您必须使用视图层的`presentationLayer`. 正如[文档所述](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)：

> 此方法返回的图层对象提供了当前显示在屏幕上的图层的近似值。当动画正在进行时，您可以检索此对象并使用它来获取这些动画的当前值。

因此，您可以使用`view.layer.presentationLayer.frame`where `view`is your`UIImageView`来获取屏幕上动画层的当前位置。使用它，测试框架是否在您想要检测的边界内是微不足道的。

# php - 如何使用 php 和 mysql 在下拉列表中显示价格

> ID：15721164
> 
> 赞同：0
> 
> 时间：2013-03-30T17:07:47.860
> 
> 标签：php, mysql, drop-down-menu

我试图在以下代码的下拉列表中显示价格，但它显示的是产品名称而不是价格：

```
<?php
  //-----------------------PROCESSOR---------------------------
    $query="SELECT product_name, price FROM processor";
    $result = mysql_query($query);
    $options="";
    echo "<select name='processor' value=''>
    <option>Please Select A Processor</option>";

    while($nt=mysql_fetch_array($result))
    {
      echo "<option value='".$nt['price']."'>".$nt['product_name']."</option>";
    }
    echo "</select>";
?> 
```

谁能帮助我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:09:57.323

只需更换

```
echo "<option value='".$nt['price']."'>".$nt['product_name']."</option>"; 
```

和

```
echo "<option value='".$nt['price']."'>".$nt['price']."</option>"; 
```

看看文档： [http ://www.w3schools.com/tags/tag_option.asp](http://www.w3schools.com/tags/tag_option.asp)

# android - 任何人都可以识别这个右手可转位蓝条吗

> ID：15721165
> 
> 赞同：1
> 
> 时间：2013-03-30T17:07:53.473
> 
> 标签：android, android-listview, indexing

嗨，我在许多不同的应用程序上看到了这个，我只是对这是什么感到慌张，这是 BW 中的图片

![神秘小部件](../Images/abc61006d0b2b69cf6a322baabad988f.png)

它只是让我困惑它是什么。我知道它是蓝条的，可以用来向上或向下导航到页面，但谁能告诉我这是什么以及如何使用它的指南？也有可能实现同样的事情，但是在一个里面有大量文本的 ScrollView 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:20:54.927

该 BlueBar 被称为`FastScrollBar`，它用于启用快速滚动`listview`。您在大多数应用程序中看到的栏实际上是默认 FastScrollBar 的主题版本。它可以通过设置`enableFastScroll=true`属性在列表视图上启用`listview`。例如。

```
<ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:fastScrollEnabled="true" /> 
```

它将在您当前的滚动条上显示一个拇指。您可以通过为其提供不同的可绘制对象`thumb`和`scrollbar`.

为此，您必须将这些属性设置到 style.xml

```
<style name="Theme_app" parent="@android:style/Theme.Holo.Light">
    <item name="android:fastScrollThumbDrawable">@drawable/fastscroll_thumb_holo</item>

 </style> 
```

然后在 Drawable 中为图片创建一个 xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/fastscroll_thumb_pressed_holo" />
    <item android:drawable="@drawable/fastscroll_thumb_default_holo" />
</selector> 
```

请注意，该`android:fastScrollThumbDrawable`属性仅适用于 Android API 级别 11 及更高版本。

# python - Django Blogpost absolute_url 未按预期工作

> ID：15721168
> 
> 赞同：0
> 
> 时间：2013-03-30T17:08:02.013
> 
> 标签：python, django, blogs

所以我有以下应用程序，它应该类似于一个多用户博客，只需为每个作者提供视图。

除了帖子的绝对网址外，一切正常。（我想保持非常简单 - 无需使用发布/草稿等）

这是我的代码：

模型.py：http : [//pastebin.com/pT91DUdZ](http://pastebin.com/pT91DUdZ)

```
@permalink
def get_absolute_url(self):
    return ('blog_detail', None, {
        'year': self.created.year,
        'month': self.created.strftime('%b').lower(),
        'day': self.created.day,
        'slug': self.slug
    }) 
```

view.py：http://pastebin.com/FTb0s97u [_](http://pastebin.com/FTb0s97u)

```
def post_list(request, page=0, paginate_by=20, username=None, **kwargs):
    author = None
    if username is not None:
        author = get_object_or_404(User, username=username)

    return list_detail.object_list(
        request,
        queryset=author.post_set.created(),
        extra_context = {'author' : author},
        paginate_by=paginate_by,
        page=page,
        **kwargs
    ) 
```

urls.py：http://pastebin.com/Nv2SRbhe [_](http://pastebin.com/Nv2SRbhe)

```
from django.conf.urls.defaults import patterns, url

urlpatterns = patterns('userblog.views',
     url(r'^(?P<username>.*)/(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{1,2})/(?P<slug>[-\w]+)/$',
         view='post_detail',
         name='blog_detail'
     ),
     url(r'^(?P<username>.*)/(?P<page>\d+)/$',
         view='post_list',
         name='blog_index_paginated'
     ),
     url(r'^(?P<username>.*)/$',
         view='post_list',
         name='blog_index'
), 
```

谢谢参观 ：）

编辑：我现在做了以下事情。我知道这很丑陋，但我不知道如何正确地做到这一点！

```
def get_absolute_url(self):
    return '/blogs/%s/%s/%s/%s/%s/' % (self.author.username, self.created.year, self.created.strftime('%b').lower(), self.created.day, self.slug) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:58:08.360

您的`blog_detail`urlpattern 期望用户名购买您没有通过的用户名。

# c++ - Clang ++不理解mac终端中的c ++ 11

> ID：15721169
> 
> 赞同：5
> 
> 时间：2013-03-30T17:08:02.787
> 
> 标签：c++, macos, c++11, terminal, clang++

我正在尝试在 mac 终端中编译一些 c++ 代码（使用 c++11）。我试过了

```
clang++ -std=c++11 main.cpp 
```

但我得到了错误

```
error: invalid value 'c++11' in '-std=c++11' 
```

我的 xcode 完全是最新的，我假设我在终端做错了什么？代码在 xcode 本身中运行良好，我只是无法让它在终端中运行。任何提示都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T18:10:24.817

正如安迪已经说过的，你的编译器只接受`-std=c++0x`. 它可能已经很老了。

[仅回答以从未回答的问题队列中删除问题]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T22:10:29.840

我对此不确定，但根据我的经验，在 Xcode 中保持最新可能并不意味着您在 clang 中也是最新的，我在尝试在 mac osx 山上使用 g++ 编译 c++ 代码时遇到问题狮子。我的 xcode 是最新的，但 gcc 是旧的（4.2.1）。我必须从[http://hpc.sourceforge.net](http://hpc.sourceforge.net) (4.8.1) 安装最新版本的 gcc。现在它可以工作了。我`g++ -std=c++11`用于编译。

# python - 剪贴板访问

> ID：15721172
> 
> 赞同：1
> 
> 时间：2013-03-30T17:08:31.527
> 
> 标签：python, windows

我正在尝试使用名为 win32clipboard 的 Python 模块从剪贴板中检索文本，如此处[所述](https://stackoverflow.com/questions/101128/how-do-i-read-text-from-the-windows-clipboard-from-python?answertab=active#tab-top)。但是 Windows 7 不允许在`1418 - ERROR_CLIPBOARD_NOT_OPEN`我使用时访问带有错误的剪贴板：

```
data = win32clipboard.GetClipboardData() 
```

我怎样才能打败系统并获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T07:25:53.507

确保您没有打开剪贴板两次。您必须关闭它然后重新打开它。

开闭操作不能嵌套。

# objective-c - 在代码中指定高度约束

> ID：15721176
> 
> 赞同：2
> 
> 时间：2013-03-30T17:08:44.393
> 
> 标签：objective-c, height, autolayout

我想在代码中指定一个固定的 NSView 高度。使用该方法`addConstraint:`，我可以指定对象属性之间的关系，但我不能说：“这个 NSView 应该是 50 像素高”。有谁知道该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-18T22:22:02.230

如果你不喜欢视觉约束格式，你也可以这样设置。

```
 var heightCosntraint    = NSLayoutConstraint(item: seperationView,
    attribute: NSLayoutAttribute.Height, 
    relatedBy: NSLayoutRelation.Equal, 
    toItem: nil, 
    attribute: NSLayoutAttribute.NotAnAttribute, 
    multiplier: 1, 
    constant: 5.0)

    seperationView.addConstraint(heightCosntraint) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:13:42.167

关于什么：

```
[myView addConstraint:
    [NSLayoutConstraint
        constraintsWithVisualFormat:@"V:[myView(50)]"
                                options:0
                                metrics:nil
                                  views:NSDictionaryOfVariableBindings(myView)
    ]
]; 
```

但请记住，您现在只向视图添加了一个约束。您可能希望将它放在与其他对象相关的某种控制器中。让视图设置自己的约束是非常好的。这就是在 InterfaceBuilder 中一直发生的事情。其他视图和 UI 元素之间的关系应该在视图树的下一个更高级别。

# oracle11g - How do I check table to see if row already exists before inserting?

> ID：15721180
> 
> 赞同：0
> 
> 时间：2013-03-30T17:08:59.080
> 
> 标签：oracle11g, sqlplus

This is my script. Trying to determine the best way to check if the row already exists by comparing the deptno

```
CREATE OR REPLACE PROCEDURE insert_rows
    (pl_deptno dept.deptno%TYPE, pl_dname dept.dname%TYPE, pl_loc dept.loc%TYPE
    ) AS
    BEGIN
    INSERT INTO dept 
    (deptno,dname,loc) 
    values ( pl_deptno,pl_dname,pl_loc);
    end insert_rows;
    / 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:22:29.187

If deptno is a unique key, just insert a row. If there is a duplicate, catch the exception and do what is needed.

Otherwise, you get all kinds of race conditions that require transactions to handle if two users are inserting/checking at the same time.

# c - Segmentation Fault in Binary Search

> ID：15721182
> 
> 赞同：0
> 
> 时间：2013-03-30T17:09:08.050
> 
> 标签：c, segmentation-fault

This code has no problem without `QueryPerformanceFrequency(&frequency);` and `QueryPerformanceCounter(&start);` functions. Also when I use this functions with a sequential search program it works too. I could not figure out what is the problem here. Why I get segmentation fault?

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

int main()
{
LARGE_INTEGER frequency;
LARGE_INTEGER start;
LARGE_INTEGER end;
double interval;

int i, c, first, last, middle, n, search, array[20000];

FILE *fptr;

//read sorted list file!
if((fptr = fopen("sorted.txt","r"))==NULL){
printf("Error in reading file !\n");
return 0;
}
//array of sorted list!
while(!feof(fptr)){
if(!feof(fptr)){
fscanf(fptr,"%d",&array[i]);
i++;}

}

printf("Enter value to find\n");
scanf("%d",&search);

first = 0;
last = 20000 - 1;
middle = (first+last)/2;

QueryPerformanceFrequency(&frequency);
QueryPerformanceCounter(&start);

while( first <= last )
{
  if ( array[middle] < search )
     first = middle + 1;    
  else if ( array[middle] == search ) 
  {
     printf("%d found at location %d.\n", search, middle+1);
     break;
  }
  else
     last = middle - 1;

  middle = (first + last)/2;
}
if ( first > last )
  printf("Not found! %d is not present in the list.\n", search);

  QueryPerformanceCounter(&end);
interval = (double) (end.QuadPart - start.QuadPart) / frequency.QuadPart;

printf("%f\n", interval);

system("pause");

return 0;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:20:40.493

As far as I can tell, you are never defining i to something yet have a i++. At least that is the error I get when I try this code.

# prolog - 约束规划，列表中数字的重复，序言

> ID：15721185
> 
> 赞同：4
> 
> 时间：2013-03-30T17:09:37.557
> 
> 标签：prolog, clpfd, constraint-programming

如何限制列表中数字的重复？

以下代码示例中合适的约束是什么？

```
limit(X) :-
    length(X,10),
    domain(X,1,4),
    % WANTED CONSTRAINT: maximum repetition of each number is 5 times.
    labeling([],X). 
```

一些示例查询和预期答案：

```
?- limit([1,1,1,1,1,1,1,1,1]).
false.

?- limit([1,1,1,1,1,2,2,2,2,2]).
true. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:17:46.937

这有效，L 是从 1 到 4 的每个数字的重复次数列表。

```
:- use_module(library(clpfd)).

limit(X) :-
    length(L, 4),
    L ins 0..5,
    sum(L, #=, 10),
    label(L),    
    maplist(make_list, [1,2,3,4], L, LX),
    flatten([LX],X).

make_list(Val, Nb, L) :-
    length(L, Nb),
    L ins Val .. Val. 
```

问题是这些数字是按值分组的。代码可以概括为

```
limit(X, Min, Max, Len, Rep) :-
    Nb is Max -Min + 1,
    length(L, Nb),
    L ins 0..Rep,
    sum(L, #=, Len),
    label(L),
    numlist(Min, Max, Lst),
    maplist(make_list, Lst, L, LX),
    flatten([LX],X). 
```

你试试： **limit(X, 1, 4, 10, 5)。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T13:12:24.377

[在上一个答案](https://stackoverflow.com/a/33580288/4609915)中，我们使用了 SICStus Prolog [clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")谓词[`global_cardinality/2`](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/Arithmetic_002dLogical-Constraints.html)。作为非约束替代方案，我们也可以[`selectd/3`](https://stackoverflow.com/a/30207770/4609915)这样使用：

```
multi_selectd_rest([],Ds,Ds)。
multi_selectd_rest([Z|Zs],Ds0,Ds) :-
   选择（Z，Ds0，Ds1），
   multi_selectd_rest（Zs，Ds1，Ds）。

```

充分利用它，`limited_repetitions__selectd/3`我们定义：

```
limited_repetitions__selectd(Zs) :-
   长度（Zs，10），
   multi_selectd_rest(Zs,[ 1 ,1,1,1,1, 2 ,2,2,2,2, 3 ,3,3,3,3, 4 ,4,4,4,4],_)。

```

再次，让我们测量计算解决方案数量所需的时间！

```
?- call_time ( call_succeeds_n_times (limited_repetitions__selectd (_),N), T_ms)。
N = 965832，T_ms = 4600。

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-07T07:22:22.163

在这个答案中，我们使用了两种不同[的 clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题") “风味”：[sicstus-prolog](/questions/tagged/sicstus-prolog "显示标记为“sicstus-prolog”的问题")和[gnu-prolog](/questions/tagged/gnu-prolog "显示标记为“gnu-prolog”的问题")。

```
:- use_module ( library(clpfd) )。

limited_repetitions__SICStus(Zs) :-
   长度(Zs, 10),
   域(Zs, 1, 4),
   域([C1,C2,C3,C4], 0, 5),
   global_cardinality (Zs, [1-C1,2-C2,3-C3,4-C4])，
   标签([], Zs)。

limited_repetitions__gprolog(Zs) :-
   长度(Zs, 10),
    fd_domain (Zs, 1, 4),
    maplist ( fd_atmost (5,Zs), [1,2,3,4]),
    fd_labeling (Zs)。

```

[使用SICStus Prolog](https://sicstus.sics.se/)版本 4.3.2 和[GNU Prolog](http://www.gprolog.org/) 1.4.4运行的简单示例查询：

```
?- limited_repetitions__SICStus(Zs)。% ?- limited_repetitions__gprolog(Zs)。
  Zs = [1,1,1,1,1,2,2,2,2,2] % Zs = [1,1,1,1,1,2,2,2,2,2]
; Zs = [1,1,1,1,1,2,2,2,2,3] % ; Zs = [1,1,1,1,1,2,2,2,2,3]
; Zs = [1,1,1,1,1,2,2,2,2,4] % ; Zs = [1,1,1,1,1,2,2,2,2,4]
; Zs = [1,1,1,1,1,2,2,2,3,2] % ; Zs = [1,1,1,1,1,2,2,2,3,2]
; Zs = [1,1,1,1,1,2,2,2,3,3] % ; Zs = [1,1,1,1,1,2,2,2,3,3]
; Zs = [1,1,1,1,1,2,2,2,3,4] % ; Zs = [1,1,1,1,1,2,2,2,3,4]
; Zs = [1,1,1,1,1,2,2,2,4,2] % ; Zs = [1,1,1,1,1,2,2,2,4,2]
... % ...

```

让我们测量计算解决方案数量所需的时间！

```
call_succeeds_n_times(G_0, N) :-
    findall (t, call(G_0), Ts),
   长度(Ts, N)。

?- call_time (call_succeeds_n_times(limited_repetitions__SICStus(_), N), T_ms)。
N = 965832，T_ms = 6550。% w/SICStus Prolog 4.3.2

?- call_time(call_succeeds_n_times(limited_repetitions__gprolog(_), N), T_ms)。
N = 965832，T_ms = 276。% w/GNU Prolog 1.4.4

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T19:43:04.813

这是一种方法，但不适用于序列：

```
:- [library(clpfd)].

limit_repetition(Xs, Max) :-
    maplist(vs_n_num(Xs, Max), Xs).

vs_n_num(Vs, Max, X) :-
    maplist(eq_b(X), Vs, Bs),
%   sum(Bs, #=, EqC),
%   EqC #=< Max.
    sum(Bs, #=<, Max).

eq_b(X, Y, B) :- X #= Y #<==> B. 
```

vs_n_num/3 是您可以在[docs](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29)中找到的内容的改编版本。

这是一种分隔序列的方法：

```
limit_repetition([X|Xs], Max) :-
    limit_repetition(X, 1, Xs, Max).

limit_repetition(X, C, [Y|Xs], Max) :-
    X #= Y #<==> B,
    ( B #/\ C + B #=< Max #/\ D #= C + B ) #\/ ( (#\ B) #/\ D #= 1 ),
    limit_repetition(Y, D, Xs, Max).
limit_repetition(_X, _C, [], _Max). 
```

产量

```
?- length(X,4), X ins 1..4, limit_repetition(X, 1) ,label(X).
X = [1, 2, 1, 2] ;
X = [1, 2, 1, 3] ;
... 
```

似乎以前的版本与您的示例更相关。

# matlab - 如何在 MATLAB 的同一个 GUI 中的不同轴上显示不同的图像？

> ID：15721186
> 
> 赞同：0
> 
> 时间：2013-03-30T17:09:38.433
> 
> 标签：matlab, 3d, axes, figures

我正在使用 MATLAB R2012a 开发用于手动医学图像分割的 GUI。特别是，我希望这些区域能够训练用于自动脑组织分类的分类器。

我设计的 GUI 包含 2 个轴，分别带有标签“figureImage”和“figureVOI”。在第一个中，我想显示 3D MRI 扫描的单个切片，而在另一个中，我想显示与该切片相关联的蒙版。我允许用户使用滚动条在切片之间移动。

我使用 3D 矩阵来表示图像（'image'），并使用 3D 矩阵来表示掩码（'voi'），它们都在句柄结构中。加载 GUI 时，我用零初始化“voi”矩阵。

我在用户点击滚动条时应用的代码是下一个：

```
% update the number of the actual slice
handles.actualSlice = round(get(handles.sliceSelector, 'Value'));
% update the image and the mask
axes(handles.figureImage)
imshow(handles.image(:, :, handles.actualSlice));
axes(handles.figureVOI)
imshow(handles.voi(:, :, handles.actualSlice)); 
```

但是，当我点击滚动条时，GUI 只是滚动到大约 70 度，然后 GUI 停止更新轴。如果我关闭窗口并尝试再次运行 GUI，MATLAB 会显示系统错误。

我想知道我做错了什么，以及是否有其他方法可以做我需要做的事情。非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T15:37:47.487

这是一个相当简单的问题。您可能有不同的轴名称和位于不同位置的轴。然后您将图像路由到相应的轴，具体取决于您要选择使用哪个轴作为轴，您可以同时选择两者。希望这可以帮助。祝你好运。

# javascript - Inspecting javascript variables as code popups in chrome

> ID：15721187
> 
> 赞同：6
> 
> 时间：2013-03-30T17:09:47.350
> 
> 标签：javascript, google-chrome-devtools, web-inspector

Anyone know how you get the yellow popup to appear when inspecting javascript variables in chrome? Apparently you just hover over the variable when the debugger is paused to see a variables current state but for whatever reason I can't get this to work.

If you have no idea what I'm talking about checkout this screenshot:

[![](../Images/d1dbe583827c3b11f26e2a2e1e220e65.png)](https://i.stack.imgur.com/qeM7s.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:13:33.033

This happened to me before. Just close all Chrome instances or restart it. This should fix the problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:00:19.470

I have no idea why this wasn't working but I tired a clean install of chrome on a different user profile on my mac and worked fine. So I went back and dumped all the preferences and application support files and turned off all extension on my profile and it worked!!! So moral of the story do a clean install of Chrome.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-16T14:30:37.413

The same thing happened to me on 16/12/19, with version 79\. But in Chrome canary, it is working fine. People who need can download it [here](https://www.google.com/chrome/canary/) (you can use it for now) or you can use Chrome Dev [here](https://www.google.com/chrome/dev/)

For the people who don't know about Chrome Canary or Dev

Chrome Canary is an experimental version of the popular Chrome browser. Google offers four release channels for its Chrome browser: Stable, Beta, Dev, and Canary. Most people use the Stable release of Chrome, which is rigorously tested and considered very reliable.

By contrast, Chrome Canary may appeal to people who like noodling around with new technology and want to get an advance look at what the standard Chrome browser may look like in the future.

# variables - Erlang 循环遍历一个列表（或集合）来处理文件

> ID：15721195
> 
> 赞同：4
> 
> 时间：2013-03-30T17:10:45.637
> 
> 标签：variables, for-loop, erlang, user-defined-functions

我想在 Erlang 中创建 16 个目录。for ( create_dir("work/p" ++ A, 其中 A 是列表 [0, 1, ... f]) 中的一个元素（十六进制表示法中的十六个数字）。

我当然可以写 16 行，例如：mkdir ("work/p0")、mkdir("work/p1") 等。

我看过列表：foreach。在使用 fun 的示例中，是否可以在循环外定义一个函数并调用它？

我是 Erlang 的新手，习惯于 C++ 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T17:16:27.133

是的，可以在对`lists:foreach/2`. 你为什么要呢？这是匿名函数非常方便的情况：

```
lists:foreach(fun(N) ->
                  file:make_dir(
                      filename:join("work", "p"++integer_to_list(N, 16)))
              end, lists:seq(0, 15)). 
```

该`filename:join/2`调用将使用适当的目录分隔符来构造字符串`work/pN`，其中`N`是使用构造的十六进制表示的整数`integer_to_list/2`，它将整数转换为给定基数 (16) 中的字符串（列表）。

`lists:seq/2`是一个友好的小函数，它返回`[A,A+1,A+2,...,B-1,B]`给定的列表`A`和`B`.

请注意，您也可以在这里使用[列表推导](http://www.erlang.org/doc/programming_examples/list_comprehensions.html)语法，但由于我们仅将函数应用于列表以产生副作用，因此我选择坚持使用`foreach`.

如果你*真的*想定义一个单独的函数——让我们调用它`foo`并假设它有 42 个参数——你可以`fun foo/42`在你的代码中引用它。这个表达式的计算结果是一个函数对象，就像一个内联定义的匿名函数一样，可以传递给`lists:foreach/2`.

# yacc - 关于编译器构造的疑问（Flex/Bison）

> ID：15721196
> 
> 赞同：0
> 
> 时间：2013-03-30T17:10:48.347
> 
> 标签：yacc, flex-lexer, compiler-construction

我试图在我的课堂上构建一个简单的编译器，它的第二周并且我完全停留在这些点上：我提供我的 simple.l as（flex 和 bison 文件被剪断以节省空间）：

```
..snip..
end     {return(END);}
skip        {return(SKIP);}
in      {return(IN);}
integer {return(INTEGER);}
let     {return(LET);}
..snip..
[ \t\n\r]+ 
```

和 simple.y 为：

```
%start program
%token LET IN END 
%token SKIP IF THEN ELSE WHILE DO READ WRITE FI ASSGNOP
%token NUMBER PERIOD COMMA SEMICOLON INTEGER
%token IDENTIFIER EWHILE LT
%left '-' '+'
%left '*' '/'
%right '^'
%%

program : LET declarations IN commands END SEMICOLON
declarations :  
|INTEGER id_seq IDENTIFIER PERIOD
;
id_seq:
|id_seq IDENTIFIER COMMA
;
commands : 
| commands command SEMICOLON
;
command : SKIP
;
exp : NUMBER
| IDENTIFIER
| '('exp')'
;
..snip..
%% 
```

我的第一个问题是当我编译并执行它时，它正确地接受我的输入直到最后，但它并没有在最后停止；即它再次进入开始状态，它是否应该在遇到结束时终止：

在输入：

```
let
integer x.
in
skip;
end; 
```

这是一个输出：

```
Starting parse
Entering state 0
Reading a token: let
Next token is token LET ()
Shifting token LET ()
Entering state 1
Reading a token: integer x.
Next token is token INTEGER ()
Shifting token INTEGER ()
Entering state 3
Reducing stack by rule 4 (line 22):
-> $$ = nterm id_seq ()
Stack now 0 1 3
Entering state 6
Reading a token: Next token is token IDENTIFIER ()
Shifting token IDENTIFIER ()
Entering state 8
Reading a token: Next token is token PERIOD ()
Shifting token PERIOD ()
Entering state 10
Reducing stack by rule 3 (line 20):
   $1 = token INTEGER ()
   $2 = nterm id_seq ()
   $3 = token IDENTIFIER ()
   $4 = token PERIOD ()
-> $$ = nterm declarations ()
Stack now 0 1
Entering state 4
Reading a token: in
Next token is token IN ()
Shifting token IN ()
Entering state 7
Reducing stack by rule 6 (line 25):
-> $$ = nterm commands ()
Stack now 0 1 4 7
Entering state 9
Reading a token: skip;
Next token is token SKIP ()
Shifting token SKIP ()
Entering state 13
Reducing stack by rule 8 (line 28):
   $1 = token SKIP ()
-> $$ = nterm command ()
Stack now 0 1 4 7 9
Entering state 19
Reading a token: Next token is token SEMICOLON ()
Shifting token SEMICOLON ()
Entering state 29
Reducing stack by rule 7 (line 26):
   $1 = nterm commands ()
   $2 = nterm command ()
   $3 = token SEMICOLON ()
-> $$ = nterm commands ()
Stack now 0 1 4 7
Entering state 9
Reading a token: end;
Next token is token END ()
Shifting token END ()
Entering state 12
Reading a token: Next token is token SEMICOLON ()
Shifting token SEMICOLON ()
Entering state 20
Reducing stack by rule 1 (line 18):
   $1 = token LET ()
   $2 = nterm declarations ()
   $3 = token IN ()
   $4 = nterm commands ()
   $5 = token END ()
   $6 = token SEMICOLON ()
-> $$ = nterm program ()
Stack now 0
Entering state 2
Reading a token: 
```

为什么我进入 end 后准备再次读取令牌；?? 我错过了什么？不应该到此结束吗？如果我现在输入任何内容，它会给我以下错误：

```
Reading a token: let 
Next token is token LET ()
syntax error, unexpected LET, expecting $end
Error: popping nterm program ()
Stack now 0
Cleanup: discarding lookahead token LET ()
Stack now 0 
```

我的第二个疑问是实现这个编译器的下一步应该是什么？我的意思是这和代码生成部分之间还需要什么步骤？我现在如何实现符号表？以及如何让这个解析器接受来自文件的代码。直到现在在终端中提供输入，如果我想让这个接受来自 my_program.simple 之类的文件的代码怎么办？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:28:08.113

```
declarations :  
|INTEGER id_seq IDENTIFIER PERIOD
;
... 
```

我认为您使用了错误的语法：您声明`declarations`（以及`idseq`and `commands`）可能是`epsilon`，即空产生式。那是因为`|`它是`alternative`运营商。空体和实际形态之间的选择。没有意义。

我认为可能是您的解析器循环的原因。

对于符号表，您可以使用在解析器外部声明为全局的映射（我希望您正在生成 C++）。然后在看到它们时插入符号。

*在获得编译器之前，拥有一个工作解释*器可能很有用，它更容易并阐明了将重用构建编译器的许多方面。

# css - 在css中对齐两个div

> ID：15721198
> 
> 赞同：0
> 
> 时间：2013-03-30T17:11:13.563
> 
> 标签：css, html, alignment

我有 2 个 div：头像和 secondClass。我希望这 2 个 div 对齐，所以我给他们两个 css 属性“显示：内联块；”

在“secondClass”中，我有 div“消息”，我是 css 属性“word-wrap: break-word;”。

“avatar”和“secondClass”仅在“message”不太长时对齐，无论如何我都希望它们对齐。

我的CSS是：

```
.firstClass{
    width: 80%;
}

.avatar{
    display: inline-block;
    padding-right: 5px;
    vertical-align: top;
}

.secondClass{
    display: inline-block;
    vertical-align: top;
}

.message{
    width: 50%;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    -ms-hyphens: auto;
    -o-hyphens: auto;
    hyphens: auto;
    word-wrap: break-word;   
} 
```

我的html代码是

```
<div class="firstClass">
    <div class="avatar">
        <a href="aaaa"><img src="avatar.jpg"></a>
    </div>
    <div class="secondClass">
        <div class="message">
        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
        </div>
    </div>
</div>

<br>

<div class="firstClass">
    <div class="avatar">
        <a href="aaaa"><img src="avatar.jpg"></a>
    </div>
    <div class="secondClass">
        <div class="message">
        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
        </div>
    </div>
</div> 
```

例如，在这个小提琴中，它在第一次尝试但不是在第二次尝试：http: [//jsfiddle.net/ZZ8Dr/](http://jsfiddle.net/ZZ8Dr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:21:55.870

你必须给他们一个，`max-width`所以两者都不会超过 100% 。看看那个[小提琴](http://jsfiddle.net/ZZ8Dr/2/)。`avatar``secondClass``firstClass`

For example:

```
.secondClass{
    max-width: 80%;
}

.avatar{
    max-width: 20%;
} 
```

Use `box-sizing: border-box;` to include margin and padding in the percentage calculation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:23:48.757

In this case, I'd let `.avatar` float left. Then the width of `.secondClass` is not important for the alignment.

```
.avatar {
    float: left;
} 
```

and eventually (if you prefer):

```
.secondClass {
    margin-left: <width of .avatar>;
} 
```

# java - 未处理的异常错误未解决的编译

> ID：15721204
> 
> 赞同：0
> 
> 时间：2013-03-30T17:11:49.987
> 
> 标签：java

```
public void useSkill(Champion target, int skillIndex, boolean enemy) throws UtilitiesException {
    if (champSkills[skillIndex].getManaCost() > this.currentMana) {
        throw new RequirmentNotMetException("Not Enough mana");
    } 
```

我想抛出一个带有“法力不足”消息的`requirmentNotMetexception`（哪个）。`extends``utilitiesException`

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    Unhandled exception type UtilitiesException

    at eg.edu.guc.lol.game.champions.Tank.useSkill(Tank.java:27)
    at eg.edu.guc.lol.game.champions.asfasf.main(asfasf.java:33) 
```

我想使用例外来向用户展示冠军没有法力，而不是使用 if/else 语句检查冠军的法力并打印没有足够的法力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:35:41.173

你的`useSkill`方法看起来不错。它在方法签名的 throws 子句中声明了异常类型，因此问题可能出在调用此方法的位置。在我看来，您遇到了错误运行时，这可能表明您在更改签名后尚未使用 Tank 类重新编译所有类。尽管如此，您还是需要在使用该`useSkill`方法的地方捕获异常，或者通过声明这些方法来传递它以抛出该异常类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:37:36.890

调用堆栈中的某个人必须处理`RequirmentNotMetException`，或者调用堆栈上的每个方法都必须声明它抛出异常（或父级），或者异常必须扩展`RuntimeException`。显然，您的主要方法没有声明为抛出它，我不希望它这样做。因此，检查调用链，确定谁应该处理异常，让该方法处理它，并让介于两者之间的所有内容都声明为抛出异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T17:35:59.157

要么您没有导入 UtilitiesException，要么您的 UtilitiesException 类有错误。

# java - JPA Eclipse 链接（MySQL）- 成功写入数据库后未检索到数据

> ID：15721206
> 
> 赞同：0
> 
> 时间：2013-03-30T17:12:06.657
> 
> 标签：java, hibernate, jakarta-ee, jpa, eclipselink

我正在将 Eclipse Link JPA 与 Tomcat 和 MySQL 一起使用。我将实体管理器的静态对象保留为

```
em = factory.createEntityManager(); 
```

此实体管理器在应用程序的整个生命周期中保持打开状态。我确实使用存储实体。

```
em.getTransaction().begin();
        em.persist(obj);
        em.flush();
        em.getTransaction().commit(); 
```

条目已成功写入 MySQL，我可以从 MySQL 控制台检查它们。问题是当我尝试使用检索条目时。em.find(MyType.class, id); 它什么都不返回，但如果我重新启动 tomcat 则 retreival 成功。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:02:25.573

我不确定这是否是您的问题的原因，但是将单个 EntityManager 作为 Web 应用程序中的静态变量通常不是一个好主意，因为 EntityManager 不是线程安全的。相反，您应该保留对 EntityManagerFactory 的静态引用，并为每个 HTTP 请求创建一个 EntityManager 实例（在其自己的线程中运行）。

# sql - PostgreSQL - 我应该如何使用 first_value()？

> ID：15721207
> 
> 赞同：21
> 
> 时间：2013-03-30T17:12:13.940
> 
> 标签：sql, postgresql, postgresql-9.2, window-functions

这个答案显示了如何从股票代码中产生高/低/打开/关闭值：
[检索任意时间间隔的聚合](https://stackoverflow.com/questions/11533700/postgresql-retrieve-open-high-low-close-with-arbitrary-time-windows/11533808#11533808)

我正在尝试基于此（PG 9.2）实施解决方案，但难以获得正确的`first_value()`.

到目前为止，我已经尝试了两个查询：

```
SELECT  
    cstamp,
    price,
    date_trunc('hour',cstamp) AS h,
    floor(EXTRACT(minute FROM cstamp) / 5) AS m5,
    min(price) OVER w,
    max(price) OVER w,
    first_value(price) OVER w,
    last_value(price) OVER w
FROM trades
Where date_trunc('hour',cstamp) = timestamp '2013-03-29 09:00:00'
WINDOW w AS (
    PARTITION BY date_trunc('hour',cstamp), floor(extract(minute FROM cstamp) / 5)
    ORDER BY date_trunc('hour',cstamp) ASC, floor(extract(minute FROM cstamp) / 5) ASC
    )
ORDER BY cstamp; 
```

这是结果的一部分：

```
 cstamp         price      h                 m5  min      max      first    last
"2013-03-29 09:19:14";77.00000;"2013-03-29 09:00:00";3;77.00000;77.00000;77.00000;77.00000

"2013-03-29 09:26:18";77.00000;"2013-03-29 09:00:00";5;77.00000;77.80000;77.80000;77.00000
"2013-03-29 09:29:41";77.80000;"2013-03-29 09:00:00";5;77.00000;77.80000;77.80000;77.00000
"2013-03-29 09:29:51";77.00000;"2013-03-29 09:00:00";5;77.00000;77.80000;77.80000;77.00000

"2013-03-29 09:30:04";77.00000;"2013-03-29 09:00:00";6;73.99004;77.80000;73.99004;73.99004 
```

如您所见，77.8*不是*我认为的正确值`first_value()`，应该是 77.0。

我虽然这可能是由于 中的模棱两可`ORDER BY`，`WINDOW`所以我将其更改为

```
ORDER BY cstamp ASC 
```

但这似乎也令人不安`PARTITION`：

```
 cstamp         price      h                 m5  min      max      first    last
"2013-03-29 09:19:14";77.00000;"2013-03-29 09:00:00";3;77.00000;77.00000;77.00000;77.00000

"2013-03-29 09:26:18";77.00000;"2013-03-29 09:00:00";5;77.00000;77.00000;77.00000;77.00000
"2013-03-29 09:29:41";77.80000;"2013-03-29 09:00:00";5;77.00000;77.80000;77.00000;77.80000
"2013-03-29 09:29:51";77.00000;"2013-03-29 09:00:00";5;77.00000;77.80000;77.00000;77.00000

"2013-03-29 09:30:04";77.00000;"2013-03-29 09:00:00";6;77.00000;77.00000;77.00000;77.00000 
```

因为 max 和 last 的值现在*在分区内有所不同*。

我究竟做错了什么？有人可以帮助我更好地理解 a 之间的关系`PARTITION`吗？`ORDER``WINDOW`

* * *

虽然我有一个答案，但这里有一个精简的 pg_dump，它允许任何人重新创建表。唯一不同的是表名。

```
CREATE TABLE wtest (
    cstamp timestamp without time zone,
    price numeric(10,5)
);

COPY wtest (cstamp, price) FROM stdin;
2013-03-29 09:04:54 77.80000
2013-03-29 09:04:50 76.98000
2013-03-29 09:29:51 77.00000
2013-03-29 09:29:41 77.80000
2013-03-29 09:26:18 77.00000
2013-03-29 09:19:14 77.00000
2013-03-29 09:19:10 77.00000
2013-03-29 09:33:50 76.00000
2013-03-29 09:33:46 76.10000
2013-03-29 09:33:15 77.79000
2013-03-29 09:30:08 77.80000
2013-03-29 09:30:04 77.00000
\. 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-30T21:52:50.920

[SQL小提琴](http://www.sqlfiddle.com/#!12/61e1c/1)

您使用的所有功能都作用于窗框，而不是隔板。如果省略，则帧结束是当前行。要使窗框成为整个分区，请在 frame 子句 ( `range...`) 中声明：

```
SELECT  
    cstamp,
    price,
    date_trunc('hour',cstamp) AS h,
    floor(EXTRACT(minute FROM cstamp) / 5) AS m5,
    min(price) OVER w,
    max(price) OVER w,
    first_value(price) OVER w,
    last_value(price) OVER w
FROM trades
Where date_trunc('hour',cstamp) = timestamp '2013-03-29 09:00:00'
WINDOW w AS (
    PARTITION BY date_trunc('hour',cstamp) , floor(extract(minute FROM cstamp) / 5)
    ORDER BY cstamp
    range between unbounded preceding and unbounded following
    )
ORDER BY cstamp; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-07T17:19:56.170

这是一个快速查询来说明行为：

```
select 
  v,
  first_value(v) over w1 f1,
  first_value(v) over w2 f2,
  first_value(v) over w3 f3,
  last_value (v) over w1 l1,
  last_value (v) over w2 l2,
  last_value (v) over w3 l3,
  max        (v) over w1 m1,
  max        (v) over w2 m2,
  max        (v) over w3 m3,
  max        (v) over () m4
from (values(1),(2),(3),(4)) t(v)
window
  w1 as (order by v),
  w2 as (order by v rows between unbounded preceding and current row),
  w3 as (order by v rows between unbounded preceding and unbounded following) 
```

可以在这里看到上述查询的输出（此处为[SQLFiddle](http://sqlfiddle.com/#!12/d41d8/2687)）：

```
| V | F1 | F2 | F3 | L1 | L2 | L3 | M1 | M2 | M3 | M4 |
|---|----|----|----|----|----|----|----|----|----|----|
| 1 |  1 |  1 |  1 |  1 |  1 |  4 |  1 |  1 |  4 |  4 |
| 2 |  1 |  1 |  1 |  2 |  2 |  4 |  2 |  2 |  4 |  4 |
| 3 |  1 |  1 |  1 |  3 |  3 |  4 |  3 |  3 |  4 |  4 |
| 4 |  1 |  1 |  1 |  4 |  4 |  4 |  4 |  4 |  4 |  4 | 
```

很少有人会想到应用于带有`ORDER BY`子句的窗口函数的隐式框架。在这种情况下，窗口默认为 frame `ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW`。这样想：

*   在`v = 1`有序窗口的框架跨度的行上`v IN (1)`
*   在`v = 2`有序窗口的框架跨度的行上`v IN (1, 2)`
*   在`v = 3`有序窗口的框架跨度的行上`v IN (1, 2, 3)`
*   在`v = 4`有序窗口的框架跨度的行上`v IN (1, 2, 3, 4)`

如果你想阻止这种行为，你有两个选择：

*   *对有序*窗口函数使用显式`ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING`子句
**   Use no `ORDER BY` clause in those window functions that allow for omitting them (as `MAX(v) OVER()`)*

 *More details are explained in [this article about `LEAD()`, `LAG()`, `FIRST_VALUE()` and `LAST_VALUE()`](http://blog.jooq.org/2014/11/07/dont-miss-out-on-awesome-sql-power-with-first_value-last_value-lead-and-lag/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-30T21:51:26.390

as 窗口函数的结果`max()`是基于**框架定义**的。

默认的帧定义（带有`ORDER BY`）是从帧的开始到当前行的**最后一个对等点**（包括当前行和可能更多的行，根据*相同*排名`ORDER BY`）。在没有`ORDER BY`（就像您所指的我的回答中），或者如果`ORDER BY`将分区中的每一行视为相等（如在您的第一个示例中），则分区中的所有行都是对等的，并且`max()`对中的每一行产生相同的结果分区，有效地考虑分区的*所有*行。

[根据文档：](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)

> 默认框架选项是`RANGE UNBOUNDED PRECEDING`，与 相同`RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW`。**使用`ORDER BY`**，这会将框架设置为从分区开始 **到当前行的最后一个 peer 的**所有行。如果没有`ORDER BY`，则分区的所有行都包含在窗口框架中，因为所有行都成为当前行的对等点。

大胆强调我的。

简单的解决方案是在窗口定义中**省略`ORDER BY`**- 就像我在您所指的示例中演示的那样。

[**手册中的窗口函数调用**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)一章中有关框架规范的所有详细信息。*

# vb.net - 我想在每次单击按钮时增加！VB.NET 2008

> ID：15721208
> 
> 赞同：0
> 
> 时间：2013-03-30T17:12:18.050
> 
> 标签：vb.net, visual-studio-2008

它总是显示第一个条件。就像它点击了两次一样，我希望 a1 和 a2 可见，并且 label7 和 label8 以及很快......这是我的代码。任何帮助表示赞赏

```
Private Sub cmdLap_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdLap.Click

Dim a As Integer

a = a + 1

If a = 1 Then

   a1.Visible = True

   Label7.Text = Label1.Text & " hour(s) " & Label2.Text & " minute(s) " &   Label3.Text & " second(s) "

ElseIf a = 2 Then

   a2.Visible = True

   Label8.Text = Label1.Text & " hour(s) " & Label2.Text & " minute(s) " & Label3.Text & " second(s) "

ElseIf a = 3 Then

    a3.Visible = True

    Label9.Text = Label1.Text & " hour(s) " & Label2.Text & " minute(s) " & Label3.Text & " second(s) "

End If
End Sub** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:19:38.430

您的变量`a`是声明的 Sub 的本地变量。这意味着：每次调用此子（用户单击按钮）时，`a`都会在本地堆栈上创建一个新副本，并且其值再次从零开始。

您需要在 Sub 之外声明该变量。

```
Dim a As Integer

Private Sub cmdLap_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdLap.Click
  ......
End Sub 
```

当然现在你有相反的问题。该变量保持其先前的值，因此，在单击 4 次后，它达到值 4，并且不再与您的测试匹配。

By the way, do not use so undescriptive names for variables and controls. Try to use a more significative name to help your future coding efforts when six month from now, you will look back at this code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:20:00.200

`a` is local to the function so it's 0 each time you click, increments to 1, and you get that condition.

Move it to a class level property or field.

# android - 如何动态更改列表视图项？

> ID：15721211
> 
> 赞同：1
> 
> 时间：2013-03-30T17:12:28.487
> 
> 标签：android, android-layout, android-listview, listviewitem

我基本上想要类似于 Twitter 或 Pocket 应用程序的东西，您在列表视图中长按一个项目，它为您提供一组选项，通过更改该项目的布局来执行该项目，以显示一组按钮。

```
ListView lv= getListView();
lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> av, View v,
            int pos, long id) {
        // TODO Auto-generated method stub
        Context ctx = getApplicationContext();
        mDbHelper.deleteNotes(id);
        fillData();
        Toast.makeText(ctx, "Long Clicked at" + id, Toast.LENGTH_SHORT).show();
        return false;
    }       
}); 
```

我的长点击代码在这里。知道我只是直接删除了长按的项目，但是我希望用户在长按一个项目时看到 3-4 个按钮来代替所述项目。

有谁知道该怎么做？

编辑这是推特图片：

![在此处输入图像描述](../Images/1d4a187098741ac190ee9952c4671b57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:57:07.900

您可以做的是，当用户长按时，只需在您的适配器内，隐藏或显示一个，例如，包含所有按钮的 LinearLayout 等等。

确保您展示的这个元素适合自己低于或高于所有其他常用元素。

你明白我想说的吗？霍拉，如果您需要更多信息。

## 更新 1

好的，所以在回复您的评论时，您不需要创建单独的 xml 文件等。例如，请参阅此，

您的自定义行 xml 有两种布局：

相对布局主视图

相对布局额外视图

在您的行中，xml 有一个额外的布局（我的偏好是相对的，无论如何这取决于您），并将此布局设置为低于主要内容（确保它们都适合行）。因此，在这种情况下，mainView 是您始终想要显示的内容的布局，而 extraView 是您仅在长按时才想要的内容。确保 extraView 的默认可见性设置设置为 GONE

然后，只需长按，特定行 extraView.setVisibility(View.VISIBLE);

当不再长按时，显然反之亦然。

如果您感到困惑，请联系我，并为非格式化回复道歉，因为我目前正在通勤并通过手机回复，将在电脑上格式化答案。

# delphi - 在 Delphi 7 中使用 WinAPI 从网络摄像头拍照

> ID：15721213
> 
> 赞同：4
> 
> 时间：2013-03-30T17:12:50.743
> 
> 标签：delphi, camera, delphi-7, media

我有一个挑战：创建一个程序，该程序在按下按钮时从网络摄像头获取图像。附加条件：不要使用第三方组件（如 DSPack），只使用 WinAPI。我写了以下代码。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms,
Dialogs, ExtCtrls, StdCtrls,ShellAPI;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    Panel1: TPanel;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

const WM_CAP_START = WM_USER;
    WM_CAP_STOP = WM_CAP_START + 68;
    WM_CAP_DRIVER_CONNECT = WM_CAP_START + 10;
    WM_CAP_DRIVER_DISCONNECT = WM_CAP_START + 11;
    WM_CAP_SAVEDIB = WM_CAP_START + 25;
    WM_CAP_GRAB_FRAME = WM_CAP_START + 60;
    WM_CAP_SEQUENCE = WM_CAP_START + 62;
    WM_CAP_FILE_SET_CAPTURE_FILEA = WM_CAP_START + 20;

function capCreateCaptureWindowA(lpszWindowName : PCHAR;
    dwStyle : longint;
    x : integer;
    y : integer;
    nWidth : integer;
    nHeight : integer;
    ParentWin : HWND;
    nId : integer): HWND;
    stdcall external 'AVICAP32.DLL';

var
    Form1: TForm1;

implementation
{$R *.dfm}

var hWndC : THandle;

procedure TForm1.Button1Click(Sender: TObject);
begin
 hWndC := capCreateCaptureWindowA('My Own Capture Window',
    WS_CHILD or WS_VISIBLE ,
    0,
    0,
    Panel1.Width,
    Panel1.Height,
    Panel1.Handle,
    0);

if hWndC <> 0 then 
    SendMessage(hWndC, WM_CAP_DRIVER_CONNECT, 0, 0); 

end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  hWndC := 0;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  if hWndC <> 0 then
  begin
    SendMessage(hWndC, WM_CAP_DRIVER_DISCONNECT, 0, 0); 
    hWndC := 0;
  end;
end;

end. 
```

表单上有两个按钮和一个面板。程序编译成功，首次启动运行良好；但是，在第二次和后续启动时，会出现一个窗口，提示您选择设备，但即使在选择后也无法正常工作。我猜想在第一次启动后，程序并没有将相机的驱动程序恢复到原始状态。

是这样吗？如果是，我该如何纠正？如果不是，为什么该程序在第二次和其他启动时不起作用？感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:37:16.793

First of all, I wont be able to really help you with your current code, then again i think no one will so here is an alternative.

I understand you don't want to use a 3e party component but I think using AVICAP32.DLL is not a better option.

This page offers a great way to use webcams under windows, its very reliable and allows you to set any cam property. Its all opensource, easy to use and based on native windows DirectX libraries.

It has never failed me.

[http://www.delphibasics.info/home/delphibasicsprojects/directxdelphiwebcamcaptureexample](http://www.delphibasics.info/home/delphibasicsprojects/directxdelphiwebcamcaptureexample)

Good luck and have fun, Delphi rocks.

# c# - 显示层次结构 - 缺少/无效的数据上下文

> ID：15721216
> 
> 赞同：0
> 
> 时间：2013-03-30T17:13:00.463
> 
> 标签：c#, wpf, xaml, datacontext, hierarchicaldatatemplate

我正在尝试显示这种层次结构：

```
public interface IProgressIndicator
{
    CancellationToken CancellationToken { get; }
    string Name { get; set; }
}

public interface IPercentageProgressIndicator : IProgressIndicator
{
    int ProgressPercentage { get; set; }
}

public interface ICountProgressIndicator : IProgressIndicator
{
    int ProgressPercentage { get; }
    int CurValue { get; set; }
    int MaxValue { get; set; }
}

public interface ICompositeProgressIndicator : ICountProgressIndicator
{
    ObservableCollection<IProgressIndicator> SubProgressItems { get; }

    void MarkAsComplete(IProgressIndicator progress);

    IPercentageProgressIndicator CreatePercentageIndicator();
    ICountProgressIndicator CreateCountIndicator();
    ICompositeProgressIndicator CreateCompositeIndicator();
} 
```

视图不应该假设层次结构已经到位；即应显示常规 IProgressIndicator（使用 ContentControl）并使用 DataTemplates 显示其他类型。

因此，当 IProgressIndicator 属于 ICompositeProgressIndicator 时，整个层次结构的根应该是 TreeView，根树视图项显示信息（如 ProgressPercentage 和 Name）。然后孩子应该再次显示为 IProgressIndicator 并使用 DataTemplates 选择适当的方式来查看其数据。嵌套的 ICompositeProgressIndicator 对象应该只添加另一个树视图项（而不是整个 TreeView）。

这就是我想出的。我不得不使用[复杂的分层数据模板](http://complexdatatemplates.codeplex.com "复杂数据模板 Codeplex 主页")。我也在使用自定义 DataTemplateSelector，这很简单：

```
public class ProgressIndicatorTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        var element = (container as FrameworkElement);

        if (item is ICompositeProgressIndicator)
            return element.FindResource("CompositeProgressIndicatorTemplate") as DataTemplate;
        else if (item is ICountProgressIndicator)
            return element.FindResource("CountProgressIndicatorTemplate") as DataTemplate;
        else if (item is IPercentageProgressIndicator)
            return element.FindResource("PercentageProgressIndicatorTemplate") as DataTemplate;
        return null;
    }
} 
```

这是 XAML：

```
<StackPanel Grid.Row="2" Margin="5" Orientation="Vertical">
    <StackPanel.Resources>
        <editorUtil:ProgressIndicatorTemplateSelector x:Key="progressIndicatorTemplateSelector" />
        <Converters:ObjectToTypeConverter x:Key="objectTypeConverter" />

        <DataTemplate x:Key="CompositeProgressIndicatorTemplateBase">
            <StackPanel Orientation="Vertical">
                <TextBlock Text="CompositeProgressIndicatorTemplateBase" />
                <TextBlock Text="{Binding Name}" />
                <TextBlock Text="{Binding SubProgressItems.Count}" />
                <TextBlock Text="{Binding Converter={StaticResource objectTypeConverter}}"  Margin="5" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="CompositeProgressIndicatorTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0" Orientation="Vertical">
                    <TextBlock Text="CompositeProgressIndicatorTemplateBase" />
                    <TextBlock Text="{Binding Name}" />
                    <TextBlock Text="{Binding SubProgressItems.Count}" />
                    <TextBlock Text="{Binding Converter={StaticResource objectTypeConverter}}"  Margin="5" />
                </StackPanel>
                <TreeView Grid.Row="1" DataContext="{Binding}">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="{x:Type TreeViewItem}">
                            <Setter Property="IsExpanded" Value="true"/>
                        </Style>
                    </TreeView.ItemContainerStyle>
                    <TreeViewItem ItemsSource="{Binding SubProgressItems}" DataContext="{Binding}"
                          ItemTemplateSelector="{StaticResource progressIndicatorTemplateSelector}" IsExpanded="True">
                        <TreeViewItem.HeaderTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Vertical">
                                    <StackPanel.DataContext>
                                        <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type coreUtil:ICompositeProgressIndicator}}"
                                                 Path="."/>
                                    </StackPanel.DataContext>
                                    <TextBlock Text="CompositeProgressIndicatorTemplate" />
                                    <ContentControl ContentTemplate="{StaticResource CompositeProgressIndicatorTemplateBase}">
                                        <ContentControl.DataContext>
                                            <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type coreUtil:ICompositeProgressIndicator}}"
                                                 Path="."/>
                                        </ContentControl.DataContext>
                                    </ContentControl>
                                </StackPanel>
                            </DataTemplate>
                        </TreeViewItem.HeaderTemplate>
                    </TreeViewItem>
                </TreeView>
            </Grid>
        </DataTemplate>

        <HierarchicalDataTemplate DataType="{x:Type coreUtil:ICompositeProgressIndicator}" ItemsSource="{Binding Path=SubProgressItems}">
            <ContentControl ContentTemplate="{StaticResource CompositeProgressIndicatorTemplateBase}" />
        </HierarchicalDataTemplate>
        <DataTemplate x:Key="CountProgressIndicatorTemplate" DataType="{x:Type coreUtil:ICountProgressIndicator}">
            <Grid>
                <ProgressBar Height="20" Value="{Binding ProgressPercentage, Mode=OneWay}" />
                <TextBlock Margin="5" HorizontalAlignment="Center" Text="{Binding ProgressPercentage, Converter={StaticResource percentageConverter}, StringFormat=P}" />
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="PercentageProgressIndicatorTemplate" DataType="{x:Type coreUtil:IPercentageProgressIndicator}">
            <Grid>
                <ProgressBar Height="20" Value="{Binding ProgressPercentage, Mode=OneWay}" />
                <TextBlock Margin="5" HorizontalAlignment="Center" Text="{Binding ProgressPercentage, Converter={StaticResource percentageConverter}, StringFormat=P}" />
            </Grid>
        </DataTemplate>
    </StackPanel.Resources>
    <ContentControl Content="{Binding ProgressIndicator}" ContentTemplateSelector="{StaticResource progressIndicatorTemplateSelector}">
    </ContentControl>
</StackPanel> 
```

这是它目前的样子：

[![XAML 的当前可视化](../Images/85320b0c7c28aa985622656ad10d16af.png)](http://img585.imageshack.us/img585/2675/currentx.jpg)

根树视图项缺少 DataContext。

# json - 使用方向服务渲染 json

> ID：15721218
> 
> 赞同：0
> 
> 时间：2013-03-30T17:13:12.880
> 
> 标签：json, google-maps, google-maps-api-3

当我使用相同的 json 请求特定的 latlang 方向服务响应时。因此，我不想总是发出相同的请求，而是想以某种方式存储 json。我尝试解析 json 并将其发送到我呈现响应的函数，但它没有用。这样的事情甚至可能吗？

```
var direction = JSON.parse('{"routes":[{"bounds":......}');
directionRenderer.setDirections(direction); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:40:07.897

使用 是不可能的`directionRenderer.setDirections()`，因为并非方向结果的所有属性都可以存储在 JSON 中。

但是您当然可以自己绘制路线，从方向结果中获取重要的细节（LatLng、描述等，并使用它们来 1\. 绘制折线和 2\. 提供路线细节）

# sql - SQL attributes depending on type

> ID：15721220
> 
> 赞同：4
> 
> 时间：2013-03-30T17:13:22.367
> 
> 标签：sql, attributes

Let's say I have an entity CLIENT, which can be either PERSON or ORGANIZATION. Depending on which type it is, I have to choose attributes (address, name for organization, date_of_birth,first_name,last_name for person). I have created all three entities, but how can I make the attributes type-dependent?

Seen [Database design: objects with different attributes](https://stackoverflow.com/q/2714206/1319392), didn't help...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:16:11.723

One typical choice is a `1:1` extension table:

```
create table client (id int primary key);
create table person (id int foreign key references client(id), ...columns...);
create table organization (id int foreign key references client(id), ...columns...); 
```

However, my preferred choice is to include all columns in the `client` table. You can have a column for type that is either `person` or `organization`. Columns that are not relevant for the row's type can be null. Your queries will be much simpler that way.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T17:17:30.307

Either you use 3 tables or you use 1 table and leave the not needed columns null. Which design is superior depends on the use case. Using only 1 table gives simpler queries but requires to change the table for each new subclass. Using multiple tables allows to add more types easily but gives more complicated queries. In doubt I would start with only 1 table but your mileage may vary.

# android - C2D_MESSAGE permission error?

> ID：15721221
> 
> 赞同：3
> 
> 时间：2013-03-30T17:13:30.600
> 
> 标签：android

This seems to be a fairly common question without a good answer. I've just followed the google guide for GCM push messaging and am getting this error:

```
E/AndroidRuntime(21779): java.lang.RuntimeException: Unable to start activity ComponentInfo{eric.bander.app/eric.bander.app.MenuScreen}: java.lang.IllegalStateException: Application does not define permission eric.bander.app.permission.C2D_MESSAGE
E/AndroidRuntime(21779): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
E/AndroidRuntime(21779): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
E/AndroidRuntime(21779): at android.app.ActivityThread.access$600(ActivityThread.java:127)
E/AndroidRuntime(21779): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
E/AndroidRuntime(21779): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(21779): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(21779): at android.app.ActivityThread.main(ActivityThread.java:4507)
E/AndroidRuntime(21779): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(21779): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(21779): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
E/AndroidRuntime(21779): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
E/AndroidRuntime(21779): at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(21779): Caused by: java.lang.IllegalStateException: Application does not define permission eric.bander.app.permission.C2D_MESSAGE
E/AndroidRuntime(21779): at com.google.android.gcm.GCMRegistrar.checkManifest(GCMRegistrar.java:137)
E/AndroidRuntime(21779): at eric.bander.app.MenuScreen.onCreate(MenuScreen.java:43)
E/AndroidRuntime(21779): at android.app.Activity.performCreate(Activity.java:4469)
E/AndroidRuntime(21779): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
E/AndroidRuntime(21779): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932) 
```

Here is my manifest file:

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<permission android:name="eric.bander.app.permission.C2D_MESSAGE"  android:protectionLevel="signature" />
<uses-permission android:name="eric.bander.app.permission.C2D_MESSAGE" />

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="eric.bander.app" />
        </intent-filter>
    </receiver> 
```

This is the piece of code in MainMenu:

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, "808426403545");
} else {
    Toast.makeText(this, GCMRegistrar.getRegistrationId(this), Toast.LENGTH_LONG).show();
} 
```

And I don't know if its relevant but my app strucutre is like this with the GCM intent service in another package:

```
eric.bander
         -MainMenu.class
eric.bander.misc
         -GCMIntentService.class 
```

I hope someone can help with this, always frustrating when you are following a tutorial.

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T17:51:05.650

My error was having GCMIntentService in a different package to the class that registered the GCM.

# syntax - （Clojure）制作一个部分函数而不是抛出一个参数太少的arity异常？

> ID：15721222
> 
> 赞同：0
> 
> 时间：2013-03-30T17:13:41.507
> 
> 标签：syntax, clojure

如果你给一个函数的参数太少，它会抱怨：

```
user=> (map-indexed vector)
ArityException Wrong number of args (1) passed to: core$map-indexed
clojure.lang.AFn.throwArity (AFn.java:437) 
```

假设我想让它做一些方便的事情，比如自动调用`(partial map-indexed vector)`，并且我希望这个新规则适用于每个函数，而不必重写所有函数。有没有办法做到这一点，或者有什么充分的理由不可能/不习惯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:20:02.980

你已经回答了你自己的问题，`partial`是要走的路。您应该更多地解释您的用例，以便给出更好的答案。

此外，`map-indexed`期望 arity 2 的函数作为第一个参数，集合作为第二个参数。

以下返回一个执行您想要的功能（我猜）。

`(defn foo [f] (fn [] (map-indexed f vector)))`

**编辑**

我误解了`vector`amalloy 指出的 as 的用法。它不是作为数据的向量，而是作为*函数*。

除了使用`fn`如上所示和`partial`前面提到的，也许您可​​以创建一个单字符名称的同义词（或一个非常简单的宏），它将扩展为对`partial`. 如果你选择`$`，那就是`($ map-indexed vector)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T19:01:27.750

换能器（将）为序列函数执行此操作，以及其他很酷的事情。

见： http: [//blog.cognitect.com/blog/2014/8/6/transducers-are-coming](http://blog.cognitect.com/blog/2014/8/6/transducers-are-coming)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T02:30:41.047

你可以为你定义的任何函数做这样的事情

```
(defn f
  ;; The "real" f
  ([x y z] (whatever-f-does x y z))
  ;; Overloads to "automagically" construct partial applications
  ([x] (partial f x))
  ([x y] (partial f x y))) 
```

当然，这可以用宏来抽象，但这就是模式。

我不知道这是否是个好主意。这可能不是大多数 Lispers 对大多数功能的期望，但我认为它在某些情况下可能非常有用。

这种方法也有一些限制。以下是我想到的几个：

1.  它仅对您编写的函数有用，或者碰巧由也使用该模式的其他人编写。
2.  当涉及多个参数时，它会引入歧义（即，如果 f 是 2 个或 3 个参数的函数，（fxy）是 f 的完整应用还是部分应用？）
3.  它也不能真正处理可变参数（你会遇到同样的歧义问题）。

也许更好的方法是引入不同的函数来执行部分应用程序。例如：

```
(defn partial-f [& args] (apply partial f args)) 
```

当然，您会想要选择一个比“partial-f”更好的名称。例如对于地图，您可以使用映射器。对于地图索引，也许索引映射器是有意义的。

# http - Web 服务器如何向客户端发送文件

> ID：15721224
> 
> 赞同：0
> 
> 时间：2013-03-30T17:13:47.400
> 
> 标签：http

我正在尝试创建一个具有一些客户端的 Web 服务器，该 Web 服务器有一些用户（未注册）请求一些文件，并且 Web 服务器应该将请求的文件发送给用户。现在我的问题是网络服务器应该如何发回文件？我不想让它像一个 ftp 服务器，所以我应该创建一个套接字并发送文件吗？其他 Web 服务器在做什么来发送文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:31:59.920

服务器将不得不监听某个接口。客户端将通过打开一个套接字并请求一些内容来启动该过程并连接到服务器。在同一连接上，服务器将响应请求的内容或错误。

客户端（通常是浏览器）使用 HTTP 与 Web 服务器通信。在[http://www.ietf.org/rfc/rfc2616.txt](http://www.ietf.org/rfc/rfc2616.txt)你可以找到协议的描述。对于基本的东西，这很简单。

如果客户要求提供 HTML 文件（网页）或其他文件，变化不大。在服务器响应的头部（发送的第一部分）中，客户端会找到一些关于内容类型的信息，以便他知道如何显示它。标头后面是实际数据（文件或某些程序生成的数据）。

希望这可以帮助

# forms - Codeigniter 如何将数据从表单保存到数据库

> ID：15721227
> 
> 赞同：0
> 
> 时间：2013-03-30T17:14:04.157
> 
> 标签：forms, codeigniter, send

代码点火器

你好。我想将表单数据发送到数据库。数据检查正常，但下一步该怎么做？

我的控件

```
 <?php

class Form extends CI_Controller {

    function index()
    {
        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

            $this->form_validation->set_rules('name', 'Imie', 'required|min_length[5]|max_length[25]|required|alpha'); 
            $this->form_validation->set_rules('surname', 'Nazwisko', 'required|min_length[5]|max_length[25]|required|alpha'); 
            $this->form_validation->set_rules('email', 'Email', 'required|valid_email'); 
            $this->form_validation->set_rules('number', 'Numer telefonu', 'required|alpha_numeric|max_length[10]'); 
            $this->form_validation->set_rules('brand', 'Marka', 'required|alpha'); 
            $this->form_validation->set_rules('model', 'Model', 'required|alpha'); 
            $this->form_validation->set_rules('year', 'Rok produkcji', 'required|alpha_numeric|max_length[5]'); 
            $this->form_validation->set_rules('km', 'Ilosc KM', 'required|alpha_numeric|max_length[5]'); 
            $this->form_validation->set_rules('licenceseplate', 'Tablica rejestracyjna', 'required|max_length[15]'); 
            $this->form_validation->set_rules('description', 'Opis', 'required|max_length[300]'); 
            $this->form_validation->set_rules('city', 'Miasto', 'required|max_length[30]'); 

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('myform');

        }
        else
        {
            $this->load->view('formsuccess');
        }

    }

}
?> 
```

我的观点

```
 <html>
<head>
<title>My Form</title>
</head>
<body>

<?php echo form_open('form'); ?>

<h5>Wpisz swoje imię</h5>
<?php echo form_error('name'); ?>
<input type="text" name="name" value="<?php echo set_value('name'); ?>" size="50" />

<h5>Nazwisko</h5>
<?php echo form_error('surname'); ?>
<input type="text" name="surname" value="<?php echo set_value('surname'); ?>" size="50" />

<h5>Email Address</h5>
<?php echo form_error('email'); ?>
<input type="text" name="email" value="<?php echo set_value('email'); ?>" size="50" />

<h5>Numer telefonu</h5>
<?php echo form_error('number'); ?>
<input type="text" name="number" value="<?php echo set_value('number'); ?>" size="50" />

<h5>Marka</h5>
<?php echo form_error('brand'); ?>
<input type="text" name="brand" value="<?php echo set_value('brand'); ?>" size="50" />

<h5>Model</h5>
<?php echo form_error('model'); ?>
<input type="text" name="model" value="<?php echo set_value('model'); ?>" size="50" />

<h5>Rok produkcji</h5>
<?php echo form_error('year'); ?>
<input type="text" name="year" value="<?php echo set_value('year'); ?>" size="50" />

<h5>km</h5>
<?php echo form_error('km'); ?>
<input type="text" name="km" value="<?php echo set_value('km'); ?>" size="50" />

<h5>Rejestracja </h5>
<?php echo form_error('licenceseplate'); ?>
<input type="text" name="licenceseplate" value="<?php echo set_value('licenceseplate'); ?>" size="50" />

<h5>Opis </h5>
<?php echo form_error('description'); ?>
<input type="text" name="description" value="<?php echo set_value('description'); ?>" size="50" />

<h5>Miasto </h5>
<?php echo form_error('city'); ?>
<input type="text" name="city" value="<?php echo set_value('city'); ?>" size="50" />

<div><input type="submit" value="Submit" /></div>

</form>

</body>
</html> 
```

我不指望最终的解决方案，但我需要帮助下一步是什么

我的数据库：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:47:59.657

表单验证后，您可以保存数据

在您的控制器中

```
 if ($this->form_validation->run() == FALSE){
        $this->load->view('myform');
    }
    else {
     $this->your_model->save($data);           
    } 
```

your_model.php

```
 public function save($data) {
   $this->db->set($data);
   $this->db->insert(table name here);
   $this->db->insert_id();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:40:13.703

好的，我的视图如下所示：

```
 <?php

class Form extends CI_Controller {

    function index()
    {
        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

            $this->form_validation->set_rules('name', 'Imie', 'required|min_length[5]|max_length[25]|required|alpha'); 
            $this->form_validation->set_rules('surname', 'Nazwisko', 'required|min_length[5]|max_length[25]|required|alpha'); 
            $this->form_validation->set_rules('email', 'Email', 'required|valid_email'); 
            $this->form_validation->set_rules('number', 'Numer telefonu', 'required|alpha_numeric|max_length[10]'); 
            $this->form_validation->set_rules('brand', 'Marka', 'required|alpha'); 
            $this->form_validation->set_rules('model', 'Model', 'required|alpha'); 
            $this->form_validation->set_rules('year', 'Rok produkcji', 'required|alpha_numeric|max_length[5]'); 
            $this->form_validation->set_rules('km', 'Ilosc KM', 'required|alpha_numeric|max_length[5]'); 
            $this->form_validation->set_rules('licenceseplate', 'Tablica rejestracyjna', 'required|max_length[15]'); 
            $this->form_validation->set_rules('description', 'Opis', 'required|max_length[300]'); 
            $this->form_validation->set_rules('city', 'Miasto', 'required|max_length[30]'); 

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('myform');

        }
        else
        {
            /*$this->load->view('formsuccess');*/
            $this->load->model ( 'form' );
            $this->form->save($data);
        }

    }

}
?> 
```

我的模型

```
 class form extends Model{

  function form(){
    parent::Model();
    $this->load->helper('url');             
  }

public function save($data) {
   $this->db->set($data);
   $this->db->insert(form);
   $this->db->insert_id();

 }

} 
```

日期基名称形式的表格

我不知道你想要什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:15:56.470

您必须将数据发送到模型

在那里您可以使用活动记录或普通查询来保存数据

必须注意，您需要在控制器中包含模型

`$this->load->model ( 'Your model name' );`这应该包含在控制器中

`$this->yourmodelname->functioninmodel`这是对模型的控制器函数调用

# tfs - Team Foundation Server 中的共享 DLL

> ID：15721234
> 
> 赞同：0
> 
> 时间：2013-03-30T17:15:00.133
> 
> 标签：tfs, projects-and-solutions, helpers

以前可能有人问过这个问题，但我无法在以前的所有帖子中解决我的需求（我已经搜索了几个小时）。所有帖子都针对其特殊需求。（我已经写了几年的项目，但是 TFS 的新手）

我的需要是：我在默认集合下有一个常见的帮助项目。（简单的辅助类和函数可以帮助我避免重写所有内容）

我试图在不同集合下的每个 tfs 项目中使用这个助手项目。

最好的使用场景是什么？

*   默认集合——HelperProj

*   集合 1 -- 项目 1 -- 项目 2

*   收藏 2 -- 项目 3 -- 项目 4

在此先感谢 Onur

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:12:46.187

这是一个链接，可以帮助您满足您的需求。查看工作空间映射和分支功能以实现您的需要。

[Team Foundation Server 中的代码共享](http://blogs.msdn.com/b/jmeier/archive/2007/03/17/code-sharing-in-team-foundation-server.aspx)

[使用团队项目集合组织您的服务器](http://msdn.microsoft.com/en-us/library/vstudio/dd236915.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:02:42.300

我的建议是在单个集合中使用单个项目，除非您有令人信服的理由不这样做。

原因是尽管 TFS 在很多方面看起来都像一个大型文件系统，但有些东西在项目和集合边界之间并不能很好地工作。根据我的经验，将代码放入不同的项目/集合中只有在代码块之间没有（并且永远不会）依赖的情况下才能干净地工作，因此您可以单独处理单个项目/集合。

我们公司开始时每个“真实”项目都有一个 TFS 项目，但我们不断遇到问题，直到我们将整个代码库重组为一个包含 3 个项目的集合，分别用于文档、资产和代码（三个不同的区域没有相互依赖）

在一个项目中，您仍然可以将代码组织到文件夹中，因此 IMO 使用不同的项目和集合确实没有多大意义，除非您对不同的代码库有非常不同的访问/安全要求（如果它们没有依赖关系则不太可能）。

另一种方法是使用您描述的 3 个集合，但通过在 DefaultCollection 中预先构建库来消除它们之间的“实时”依赖关系，以提供一个共享的二进制存储库，您可以从其他集合中的代码链接到该存储库。这也有助于版本控制，其中库代码可以更新，但二进制文件不会立即合并到您的其他集合之一中，从而允许处理其他集合的团队仅在适合他们时提取库代码的更新。这可以帮助阻止由团队 B 立即使用团队 A 的更改引起的问题。

# testng - 如何通过命令提示符运行 testng

> ID：15721237
> 
> 赞同：0
> 
> 时间：2013-03-30T17:15:25.803
> 
> 标签：testng

请让我知道如何通过命令行运行 testng

当我运行以下命令时

```
java org.testng.TestNG TestNG.xml 
```

得到如下错误

```
Error: Could not find or load main class org.testng.TestNG 
```

这意味着我们必须在运行测试之前进行编译吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-12-26T07:01:02.253

请在 System 的 ClassPath 中添加您的 TestNG Jar 的完整路径，然后它将起作用。像这样：

> C:\ProgramData\Oracle\Java\javapath;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;%JAVA_HOME%\bin;C: \Program Files\TortoiseSVN\bin;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files \Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\ IDE\PrivateAssemblies\;C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files\SourceGear\Common\DiffMerge\;C:\Users\105451\Downloads\Compressed\testng -6.8.7.jar

# testing - 包测试的串行执行

> ID：15721238
> 
> 赞同：26
> 
> 时间：2013-03-30T17:15:26.847
> 
> 标签：testing, go

我已经为 Web API 实现了几个包，每个包都有自己的测试用例。当使用测试通过测试每个包时`go test ./api/pkgname`。如果我想一次运行所有测试，`go test ./api/...`测试用例总是失败。

在每个测试用例中，我使用`DROP SCHEMA public CASCADE`后跟重新创建整个架构`CREATE SCHEMA public`并应用所有迁移。测试套件随机报告错误，说关系/表不存在，所以我猜每个测试套件（每个包）都以某种方式并行运行，从而弄乱了数据库状态。

我试图传递一些测试标志`go test -cpu 1 -parallel 0 ./src/api/...`，比如没有成功。

这里的问题可能是并行运行的测试，如果是，我该如何强制串行执行？

***更新：***

目前我使用这种解决方法来运行测试，但我仍然想知道是否有更好的解决方案

```
find <dir> -type d -exec go test {} \; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-10-03T18:40:57.203

正如其他人指出的那样， -parallel 不能完成这项工作（它只适用于包中）。但是，您可以使用标志 -p=1 来连续运行包测试。这记录在这里：

[http://golang.org/src/cmd/go/testflag.go](http://golang.org/src/cmd/go/testflag.go)

但是（afaict）不在命令行上，去帮助等等。我不确定它是否会留下来（尽管我认为如果它被删除，-parallel 应该被修复。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-31T20:22:24.793

提供 go 工具是为了使用 *_test.go 文件中包含单元测试的约定来更轻松地运行单元测试。因为它假设它们是单元测试，所以它也假设它们是密封的。听起来您的测试要么不是单元测试，要么它们违反了单元测试应该满足的假设。

如果您的意思是这些测试是单元测试，那么您可能需要一个模拟数据库来进行单元测试。您的数据库的模拟（最好在内存中）将确保单元测试是封闭的，并且不会受到其他单元测试的干扰。

如果您的意思是这些测试是集成测试，您最好不要使用 go 工具进行这些测试。您可能想要的是创建一个单独的测试二进制文件，您可以控制其运行并在其中编写集成测试脚本。

好消息是在 Go 中创建一个 mock 非常容易。更改您的代码以使用您关心的数据库方法的接口，然后为测试目的编写该接口的内存实现并将其传递到您要测试的应用程序代码中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-02T10:05:57.637

澄清一下，@Jeremy 的回答仍然是公认的：

由于我的集成测试只在一个包`api`（

*   单元测试使用正常`TestX`名称
*   集成测试使用`Test_X`

我创建了 shell 脚本 ( `utest.sh`/ `itest.sh`) 来运行其中的任何一个。

*   对于单元测试`go test -run="^(Test|Benchmark)[^_](.*)"`
*   用于集成测试`go test -run"^(Test|Benchmark)_(.*)"`
*   使用正常运行两者`go test`

# python - Python Tkinter 输入值方法错误

> ID：15721246
> 
> 赞同：-1
> 
> 时间：2013-03-30T17:15:50.770
> 
> 标签：python, variables, methods, tkinter

该代码旨在将一些内容写入文本文件中的一行。

```
from tkinter import *
Tag=0
x="txt.txt"
w=open(x,"w")
root=Tk()
win1=Frame(root)
Label(root,text="Tag").pack()
tagE=Entry(root)
tagE.pack()
def get_it():                    
    Tag=(tagE.get())                                                                       
v=Button(root,text="Submit",command=get_it)
v.pack()
win1.pack()
w.write("%s var=%s"%(Tag,"text"))
w.close()
root.mainloop() 
```

Tag=(tagE.get()) 缩进的空格多于实际。当我运行此代码时，我将得到一个“AttributError：'NoneType' 对象没有属性'get'，或者标签值将等于其原始值 0。非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:04:28.483

除了获取条目的值之外，您还必须将值写入文件中的同一函数中：

```
from tkinter import *

filename = "txt.txt"
root=Tk()
Label(root,text="Tag").pack()
tagE=Entry(root)
tagE.pack()

def get_it():
    w=open(filename, "w")
    tag = tagE.get()
    w.write("%s var=%s"%(tag,"text"))
    w.close()

v=Button(root,text="Submit",command=get_it)
v.pack()
root.mainloop() 
```

由于您不使用`Frame` 任何小部件的父级，您可以直接使用根元素。作为旁注，我建议您按照[PEP8](http://www.python.org/dev/peps/pep-0008/)中的建议对变量使用小写符号，并尝试使用更清晰的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:46:11.097

你误解了 Tkinter 的工作原理。您的打印语句将在您有机会单击按钮之前执行。您需要将您的打印语句放入`get_it`.

# smtp - PHPMailer - 无法连接到 SMTP

> ID：15721248
> 
> 赞同：0
> 
> 时间：2013-03-30T17:15:53.803
> 
> 标签：smtp, phpmailer, outgoing-mail

我正在尝试通过 PHPMailer 从我的 gmail 发送邮件，但出现以下错误：

> SMTP 错误：无法连接到 SMTP 主机。

我从以下网址下载了 phpmailer 类：[https](https://github.com/Synchro/PHPMailer) ://github.com/Synchro/PHPMailer 。

我已经尝试了三十多个小时，所以我尝试了端口 25、465、587 的大多数组合。我什至尝试了一些奇怪的东西，比如从我的 SMTP 用户名中删除 @gmail.com，所以请帮助我。

```
<?php
/**
* Simple example script using PHPMailer with exceptions enabled
* @package phpmailer
* @version $Id$
*/

require '../class.phpmailer.php';

try {
    $mail = new PHPMailer(true); //New instance, with exceptions enabled

    $body             = file_get_contents('contents.html');
    $body             = preg_replace('/\\\\/','', $body); //Strip backslashes

    $mail->IsSMTP();                           // tell the class to use SMTP
    $mail->SMTPAuth   = true;                  // enable SMTP authentication
    $mail->SMTPSecure = 'ssl';
    $mail->Port       = 465;                    // set the SMTP server port
    $mail->Host       = "smtp.gmail.com"; // SMTP server
    $mail->Username   = "mymail@gmail.com";     // SMTP server username
    $mail->Password   = "mypass";            // SMTP server password

//  $mail->IsSendmail();  // tell the class to use Sendmail

    $mail->AddReplyTo("name@domain.com","First Last");

    $mail->From       = "name@domain.com";
    $mail->FromName   = "First Last";

    $to = "reciever@gmail.com";

    $mail->AddAddress($to);

    $mail->Subject  = "First PHPMailer Message";

    $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
    $mail->WordWrap   = 80; // set word wrap

    $mail->MsgHTML($body);

    $mail->IsHTML(true); // send as HTML

    $mail->Send();
    echo 'Message has been sent.';
} catch (phpmailerException $e) {
    echo $e->errorMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:25:04.913

我尝试从我的网页通过 php mailer 发送电子邮件，但遇到了同样的问题.. 然后我将我的代码上传到服务器上，然后它工作了.. 我认为 PHPMailer 在网络服务器上工作，它不会在你的本地主机机器上工作......尝试将您的代码上传到网络服务器，然后尝试...如果您的代码已上传到服务器，请使用此...。

```
<?php

       require_once "../class.phpmailer.php";

        $from = "<from.gmail.com>";
        $to = "<to.gmail.com>";
        $subject = "Hi!";
        $body = "Hi,hows goin??";

        $host = "ssl://smtp.gmail.com";
        $port = "465";
        $username = "myaccount@gmail.com";  //<> give errors
        $password = "password";

        $headers = array ('From' => $from,
          'To' => $to,
          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
          array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password));

        $mail = $smtp->send($to, $headers, $body);

        if (PEAR::isError($mail)) {
          echo("<p>" . $mail->getMessage() . "</p>");
         } else {
          echo("<p>Message successfully sent!</p>");
         }

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T14:47:39.007

我认为你犯的错误是你需要错误的类，你的要求应该加载 `require_once '../PHPMailerAutoload.php';` PHPMailer 类依赖于其他子类来处理发送邮件的其他方面。您需要的类更像是一个包装类，这应该可以修复许多错误或至少为您提供更好的错误消息。

# jquery - Django/JQuery CSRF: 403 错误

> ID：15721250
> 
> 赞同：0
> 
> 时间：2013-03-30T17:16:07.117
> 
> 标签：jquery, django, csrf, django-csrf

我不断从 Django 收到 403 错误。

我设置了我的 settings.py 以使用 CSRF 保护，并在我的模板中使用了 csrf_token 令牌。

这是我在 HTML 标头之后包含的 JS 文件：http: [//bpaste.net/show/87791/](http://bpaste.net/show/87791/)

使用 Firebug 我可以检查 CSRF cookie 是否存在。稍后在页面上，用户单击触发此代码的按钮：

```
myFunction: function() {
  $.ajax({
  type: 'POST',
  url: window.localtion.href + 'myajaxview',
  async: false
  });
} 
```

我正在使用从 TemplateView 继承的基于类的简单视图来显示此页面。'myajaxview' 继承自 View 和 JSON Mixin。但是它的代码永远不会执行，因为 django 无法验证 CSRF 令牌。

在我看来，ajax 并没有按照应有的方式发送带有 POST 标头的令牌。还是我错过了什么？

**编辑：**我在调用 $.ajax() POST 函数之前移动了 $.ajaxSetup 调用，它起作用了。我试图将它移到其他地方，但失败了。我认为这个问题与 Ajax 的关系比与 Django 的关系更大。所以，我的问题仍然存在，我不想把 $.ajaxSetup 调用放在每个 $.ajax 调用之前，我不认为这是事情的处理方式，我不想重复自己。所以这只是一种解决方法，我正在寻求解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:52:40.937

```
myFunction: function() {
  $.ajax({
  type: 'POST',
  data: { 
    'csrfmiddlewaretoken': '{{csrf_token}}'
  }, 
  url: '/myajaxview/',
  async: false
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:05:42.627

这是我认为您正在寻找的代码片段

```
var csrfToken = $('input[name="csrfmiddlewaretoken"]').val();
$.ajax({
    url: 'blah.com/',
    //snipped for brevity
    csrfmiddlewaretoken: csrfToken,
    success: function(data){ doStuff(); }
}); 
```

这是我为了能够对 django 应用程序进行 jquery ajax 调用而使用的。希望它有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:44:41.850

感谢您的帮助。答案真的很讨厌，我从一个简单的示例开始测试 ajaxSetup + ajax 发现它，然后我添加了更多复杂性以匹配我的原始代码。

这是因为 jquery-tools。当我开始使用 bootstrap-twitter 时，我看到他们建议将 javascript 包含在页面末尾。所以我把 jquery-tools.js 也包括在内。我几乎不知道在这个脚本文件中对 $.ajaxSetup 的调用覆盖了我自己的调用。

解决方案是将 jquery 工具包含在顶层。但是在这一点上，我不确定它会与我的代码有多少冲突。因为我需要为每个 ajax 请求设置 ajaxSetup，所以我会这样做。

我花了一天的时间才发现，我在#jquery 和#django 上，很多人不遗余力地试图找出解决方案。如果您遇到无法共享的复杂代码库以及想要解决的问题，我的建议是：尝试使最简单的示例正常工作并更改它，直到它与您失败的设置相匹配。这将节省每个人的时间，尤其是您自己的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T17:30:20.443

首先，您是否检查了 CSRF 代码是否实际发送到服务器？如果是，服务器是否希望散列在 post 值或 header 中？现在您设置请求标头。如果两者都不能解决问题，请验证服务器是否知道正确的哈希。当客户端发送正确的哈希并且服务器将 NULL 作为哈希时，验证当然会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-16T08:22:23.567

我通过在 DOM 准备好并重新加载 AJAX 时计算令牌的值来解决问题。

javascript 代码使用 reload_ajax() 函数来处理令牌，以及在初始页面加载和后续 AJAX 调用时我需要刷新的任何其他内容。

```
<script type="text/javascript">

function reload_ajax() {
    // Useful on initial page load, and after calling AJAX.
    $("input#token").val("{{ csrf_token }}");
}

$(document).ready(function() {
    $("form#stats").unbind("submit");      // Prevents calling document-ready multiple times
    $("form#stats").submit(function(event) {
        event.preventDefault();
        $.ajax({
            type:"POST",
            url: $(this).attr("action"),
            data: $(this).serialize(),     // Serialize the form
            dataType: "json",
            success: function(response){
                $("#stats_ajax").html(response.html);  // Object to refresh after AJAX 
                reload_ajax();
            }
        });
        return false;
    });

    reload_ajax();
});
</script> 
```

我正在使用两个 HTML 文件，在 main.html 中，我有上面的 javascript 代码，以及以下内容：

```
<div id="stats_ajax">
    {% include "stats_ajax.html" %}
</div> 
```

在 stats_ajax.html 中，我有实际的表单（加上我需要刷新的其他内容）

```
<form id="stats" action="/main/" method="post">
    <!-- The value will be inserted when the DOM reloads. -->
    <input id="token" type="hidden" name="csrfmiddlewaretoken" value="" />
    <!-- Other input elements -->
    <button type="submit">Submit</button>
</form> 
```

In my views.py file,

```
# Not all imports may be needed for this example
from django.http import HttpResponse
from django.shortcuts import render, redirect
from django.template.loader import render_to_string
import json

def main(request):
    # This request should only be posting AJAX
    if request.is_ajax():
        data = {}
        data["message"] = "Awesome"
        # This is the template to load on the DOM object to update
        html = render_to_string("stats_ajax.html", data)
        res = {"html": html}
        return HttpResponse(json.dumps(res), mimetype='application/json')

    # Handle GET to this view
    return redirect("/main") 
```

Finally, my urls.py has

```
# Replace "application_name" with your own value
url(r'^main', 'application_name.views.main'), 
```

# scala - 为什么这种模式匹配不起作用？

> ID：15721251
> 
> 赞同：0
> 
> 时间：2013-03-30T17:16:10.457
> 
> 标签：scala, pattern-matching

我有一个泛型类`Book[T](index: Int, type: T)`和一个`foo`类型的对象`Book`。我不确定如何访问索引和类型。我试过了：

```
1\. foo match { case Book[T](index: Int, type:T) => {} }
2\. foo match { case Book(index: Int, type:T) => {} }
3\. foo match { case foo: Book[T] => { foo.index } } 
```

全部失败并显示消息：

```
1\. class Book does not take type parameters
2\. class Book not found
3\. index is not a member of Book 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:51:20.437

Well`type`是 scala 已经使用的关键字。您可以尝试通过使用其他关键字而不是`type`使用`case class`模式匹配来实现相同的目的。

```
 case class Book[T](index: Int, bookType : T)

  val foo =  Book(1,Book)                         

  // foo  : stack.Book[stack.Book.type] = Book(1,Book)

  foo match {
    case Book(i,t) => "index : " + i + ", type : " + t // play around with i & t
  }                                     

 //> res0: String = index : 1, type : Book 
```

# windows-8 - 如何在 Windows 8 中将图像控制保存到本地文件？

> ID：15721253
> 
> 赞同：-1
> 
> 时间：2013-03-30T17:16:26.910
> 
> 标签：windows-8, winrt-xaml

我正在编写客户端-服务器应用程序，在其中我使用 Image Url 获取项目。此 Url 与 Image 控件绑定：

```
<Image Source{Binding ImageUrl} x:Name="img_avatar" Stretch="UniformToFill" Width="48" Height="48"/> 
```

我想将 Image.Source 中的图像保存到本地文件夹，而不使用任何使用下载操作的方法。

请帮助我的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:51:01.647

没有办法做你问的事情。当您将 Image 控件的源设置为 Uri 时 - 它会转换为 BitmapImage，它不会公开任何可以让您保存文件甚至提取位图的 API。如果要避免多次下载图像，可以将其作为文件下载一次，然后从文件中加载 BitmapImage 而不是 Uri。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:42:52.670

我相信稍微反思一下hackery，它应该是可行的。但是存在很多更好的解决方案，所以是的..

子类 Image 或编写附加属性来处理逻辑。您所要做的就是自己将图像加载到 MemoryStream 中并手动创建 BitmapImage（在子类 Image 或附加属性之后）。

通过这种方式，您可以公开直接访问 MemoryStream 的新属性，然后您可以从那里将文件保存到 HDD，而不会浪费宝贵的内存。

如果您还可以在提供此功能的同时保留 Source="{Binding}" 语法，则可以加分。

# c# - 将使用文件系统存储的 .NET 2.0 应用程序迁移到 Azure

> ID：15721255
> 
> 赞同：0
> 
> 时间：2013-03-30T17:16:28.630
> 
> 标签：c#, asp.net, azure

我有一个旧的 ASP.NET 2.0 站点，此时我真的对重建或更新没有兴趣。我想将它移到 Windows Azure，但我对 Azure 不是很熟悉，所以我想知道它是否易于移植。

最大的潜在障碍是用户可以上传多张照片。上传后，我以预定义的尺寸创建图像的多个副本，并使用 Server.MapPath("{location}") 将它们存储在本地文件系统中，以指示应存储的位置。

*   我是否可以在 Azure 上托管一个站点（使用其免费或共享层）并继续使用这种上传和存储文件的方法，或者我是否必须切换到 blob 存储？只有大约 400MB 的图像。

基本上，我正在寻找一种低成本/无成本的方式来轻松地在 Azure 上托管该站点，该站点不涉及代码更改（或者至少是极少的更改，例如将 Server.MapPath 更改为某个相对位置）这样我就可以将其他更当前的也移动到 Azure。我的情况是，如果我不能移动这个站点，那么移动其他站点是没有意义的，因为无论如何我都必须继续为这个站点支付服务器费用（它们都托管在同一台服务器上）现在）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:25:42.680

不能保证在虚拟机重新启动之间存储 Azure 驱动器，因此您可能需要使用 blob 存储。但是您可以[将 blob 挂载为 NTFS 卷](http://msdn.microsoft.com/en-us/library/windowsazure/jj156162.aspx)并将其存储在那里。这将使代码中的转换变得非常简单。

# eclipse-emf - EMF 中的域模型 - 我可以使用 Acceleo 生成 POJO 吗？

> ID：15721257
> 
> 赞同：0
> 
> 时间：2013-03-30T17:16:30.770
> 
> 标签：eclipse-emf, acceleo

我有一个使用 ecore EMF 创建的域模型。

我想生成 POJO。我希望能够自定义 POJO，所以我正在考虑使用 Acceleo。

但是，我只能看到从 UML 在 Acceleo 中创建 POJO。使用 EMF 时，它会产生 EObjects、Estrings 等。

是否可以只生产 POJO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:58:34.497

使用 Acceleo，您可以生成任何您想要的东西。如果您只想从 UML 模型生成 POJO，您可以使用或派生[Github](https://github.com/ObeoNetwork/UML-Java-Generation)上提供的 UML 到 Java 生成器。如果您这样做，请确保使用与您正在使用的 UML 版本匹配的版本（UML2 v4.0.0 的主分支，UML2 v3.xx 的 R1_1_maintenance 分支）。

如果您使用的是 UML2 v3.xx，您可以使用[Eclipse Marketplace](http://marketplace.eclipse.org/content/uml-java-generator-eclipse-37-version#.UVqBhpO-18E)简单地安装它。UML2 v4.0.0 生成器的 2.0.0 版本即将发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:06:25.550

请参阅以下链接以使用 EMF 生成 POJO： http: [//eclipseo.blogspot.be/2007/10/creating-pojos-using-emf.html](http://eclipseo.blogspot.be/2007/10/creating-pojos-using-emf.html)

如果您想进一步自定义，还可以使用其他方法：

*   XPand
*   XText
*   Acceleo ECore 生成模板
*   ETC

# php - PHP Drop down box from MySQL query option definition

> ID：15721261
> 
> 赞同：0
> 
> 时间：2013-03-30T17:16:55.350
> 
> 标签：php, mysql, drop-down-menu

I have been trying to decipher the option part of this: `echo "<option value='" . $row['PcID'] . "'>" . $row['PcID'] . "</option>";` taken from [Populate a Drop down box.....](https://stackoverflow.com/questions/5189662/populate-a-drop-down-box-from-a-mysql-table-in-php)

can someone kindly explain what the periods do? and why when i do this: `print "<option value='".$wrow['week_num']."'>".$wrow['week_name']."</option><br>\n";` I only get only the week name in the list.

```
$wquery="select week_num,week_name from stats_week";
$wresult=mysql_query($wquery);
print "Select Week:<select name=Week_select><br>\n";
while ($wrow=mysql_fetch_assoc($wresult)){
    print "<option value='".$wrow['week_num']."'>".$wrow['week_name']."</option><br>\n";    
}
print "</select>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:19:39.313

In PHP, the period is the concatentation operator. Putting the periods in tells PHP to concatenate strings, See this page:

[http://www.php.net/manual/en/language.operators.string.php](http://www.php.net/manual/en/language.operators.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:19:56.147

The periods "break up" the string, and allow you to run PHP code (mainly variables/ternary operators/functions) in it's place, between them.

It's also a method of joining strings. This is called Concatenation.

See [String Operators](http://php.net/manual/en/language.operators.string.php)

* * *

Also, you only see the week name in the list because that's the only output you've got between your `<option></option>` tags.

Does this help,

```
$wquery="select week_num,week_name from stats_week";
$wresult=mysql_query($wquery);
print "Select Week:<select name=Week_select>";
while ($wrow=mysql_fetch_assoc($wresult)){
    print "<option value='".$wrow['week_num']."'>".$wrow['week_num']." - ".$wrow['week_name']."</option>\n";    
}
print "</select>"; 
```

This will display the week number and name in the list. I've also removed the `<br />` tags after your select/options.

Please familiarise yourself with [HTML Selects/Options](http://www.w3schools.com/tags/tag_select.asp).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T17:20:12.550

Replace with;

```
print "<option value='{$wrow['week_num']}'>{$wrow['week_name']}</option><br>\n"; 
```

This will print the correct values and not return the php in html

You will also want to look at concatenation on the PHP documentation

# tumblr - 将 Photoset 最大宽度更改为 340 像素？

> ID：15721263
> 
> 赞同：0
> 
> 时间：2013-03-30T17:16:57.553
> 
> 标签：tumblr

在尝试将我的照片集宽度设置为 340 像素时遇到一些问题，而不会弄乱照片集中较小照片的显示方式。[http://d.pr/icuf](http://d.pr/icuf)

```
{block:Photoset}
              {block:IndexPage}
              <div class="photo_set">
              <div class="header">
                  <a href="{Permalink}"><h1>photoset</h1></a>
                  {block:NoteCount}<a href="{Permalink}">
                  <div class="note">{NoteCountWithLabel}</div></a>
                  {/block:NoteCount}
                  <div class="clear"></div>
              </div>
              <div class="view">
                  <a href="{Permalink}">
                  <div class="link">View Photoset ↦&lt;/div></a>
              </div>
              {Photoset-250}
              </div>{/block:IndexPage}

              {block:PermalinkPage}
              <div class="perma_width">{Photoset-500}</div>
              {/block:PermalinkPage}
      {/block:Photoset} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:41:19.167

使用 Tumblr 的默认代码将无法获得 340 像素的宽度。你有两个选择：

1) 不要使用 Tumblr 的`{Photoset}`标签并单独显示每张照片`{block:Photos}...{/block:Photos}`并根据需要设置它们的样式。

2）使用这样的插件：[https](https://github.com/PixelUnion/Extended-Tumblr-Photoset) ://github.com/PixelUnion/Extended-Tumblr-Photoset （完全公开，这是我写的）

# highcharts - 将标记符号图像更改为高图中的垂直线

> ID：15721271
> 
> 赞同：0
> 
> 时间：2013-03-30T17:18:08.433
> 
> 标签：highcharts, highstock

是否可以用简单的 LINE[垂直线] 替换图像以突出显示图表上的最高点或点？

[以符号（图像）为标记的 HighChart](http://www.highcharts.com/demo/spline-symbols/gray)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:56:46.353

一种方法是使用 highcharts 情节线：

```
 plotLines: [{
            color: '#FF0000',
            width: 2,
            value: 7
        }] 
```

[http://jsfiddle.net/xDVTJ/](http://jsfiddle.net/xDVTJ/)

在这种情况下，plotLine 位于 xAxis 上，使其垂直。我已经指定了一个值 7，它把它放在类别号 7 上（从 0 开始）。

# linux-kernel - 我的引导加载程序是否足以启动 Linux 映像

> ID：15721273
> 
> 赞同：1
> 
> 时间：2013-03-30T17:18:42.153
> 
> 标签：linux-kernel, x86, bootloader, bootstrapping

我是引导加载程序和 Linux 内核的新手。我一直在做一个项目，我们必须用 Linux 内核替换引导 QNX 内核。我们当前的引导加载程序代码支持引导 QNX 内核。似乎引导加载程序也支持引导 Linux（不确定），我需要知道它是否足以启动 Linux 内核。

下面是我们的引导加载程序正在做的事情。

Bootloader 正在调用 start_kernel 函数，该函数有两个参数传递给它，一个是内核入口点，第二个是指向引导行的指针

1.地址0X90000ULL，类型转换为boot_params结构。

2.重新定位initrd

3.复制引导扇区，设置数据和命令行到最后的位置

4.初始化Linux GDT

5.跳转到内核入口点

6.禁用中断

7.Lunch_kernel()

现在在上面的代码中，有两个棘手的事情怀疑对 Linux 内核引导的支持。

首先是跳转到内核入口点的方式，通常我看到在 uboot 或 Linux 源代码中跳转到内核入口是在汇编中，但在我们的引导加载程序中它只是归档一个结构。

```
struct

{

long Kery;
long kernel_code_segment;
}

jumpv;

void *jump_s;

 jumpv.kery=first argument pass to start_kernel;
 jumpv.kernel_code_segment=0x10;
 jump_s=(void *)&jumpv; 
```

第二件事是Lunch_kernel()，其定义在代码库中根本不存在。

现在上面的东西足以将控制权传递给 Linux 映像或我可以添加/修改的其他内容以在我们当前的引导加载程序代码中引导 Linux 映像。

我们正在研究 X86 架构。

由于某种原因，在我们确定事情之前，我们不能在我们的板上进行打击和试验。

# web-services - 连接到远程队列的 Web 服务

> ID：15721274
> 
> 赞同：0
> 
> 时间：2013-03-30T17:18:54.253
> 
> 标签：web-services

我正在开发一个托管在 JBoss 4.2.3 服务器内的 Web 服务解决方案（如下所示），并且我的代码连接到远程 JMS 队列帽托管在另一台服务器上（192.168.35.25）

```
 public static Context getInitialContext () throws JMSException,NamingException
    {
        Properties prop = new Properties();
        prop.setProperty("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");
        prop.setProperty("java.naming.factory.url.pkgs", "org.jboss.naming");
        prop.setProperty("java.naming.provider.url", "192.168.35.20:1099");
        Context context = new InitialContext(prop);

        return context; 
```

## }

```
 public String SendMessages(String msg) throws ServletException, IOException, URISyntaxException {
    String body="";
    try
    {

        Context init =ClsSat.getInitialContext();
        javax.jms.Queue destination = (javax.jms.Queue) init.lookup("Queue/RemoteQueue");

          ConnectionFactory connectionFactory =   (ConnectionFactory) init.lookup("ConnectionFactory");
          Connection connection = connectionFactory.createConnection("un","pwd");//
          Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

;

          MessageProducer producer = session.createProducer(destination);

          TextMessage message = session.createTextMessage();
          message.setText(msg);

          connection.start();

          producer.send(message);
          body = message.getText();

          session.close();
          connection.close();

      } 
    catch (Exception e)
      {
          return(e.toString());
      }

return body    ;

} 
```

但是我遇到了一个错误... RemoteQueue 未绑定，因此任何人都对连接到远程队列抛出 Web 服务或任何有关从本地计算机上托管的 Web 服务连接到远程计算机上的远程队列的文档有任何想法或帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:03:11.613

可能是因为您的 getInitialContext() 中的 IP 地址错误，请检查是否可以提供更多详细信息。

# scheduling - 循环调度 - 如果突发时间长/量子短，优先级是否重要？

> ID：15721276
> 
> 赞同：0
> 
> 时间：2013-03-30T17:19:05.013
> 
> 标签：scheduling, round-robin

不确定我是否正确理解了 RR 的概念。

假设我已经准备好三个进程进行 CPU 处理：

A - 第一优先级 - 需要 2 分钟的 CPU 时间；

B - 第三优先级 - 5 分钟；

C - 第二优先级 - 10 分钟；

因此，为了计算“纸上”的平均周转时间，我可以假设quantum=1 分钟并根据它们的优先级（ACB 等）处理所有内容。

但是一分钟对于“真正的”量子来说太大了，对吧？如果quantum=10-100毫秒，一切都会切换得如此之快以至于任务顺序变得无关紧要吗？我是否应该假设每个作业只会消耗等量（1/3）的 CPU 时间并从那里开始？例如，A 将在 2*3=6 分钟后结束，B 将在 (5-2)*2+6=12 分钟后结束，C 将在 10-2-3+12=17 分钟后结束。因此平均 tat 是 (6+12+17)/3=11.66？或者这只是荒谬的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:27:53.207

如果进程 A、B 和 C 需要如下执行时间，

```
A -  2 minutes
B -  5 minutes
C - 10 minutes 
```

然后循环调度将为您提供以下周转时间，如果优先级顺序是 A 后 C 后 B。

```
A -  4 minutes
B - 12 minutes
C - 17 minutes 
```

进程的执行如下：

```
Time->  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17 
        A - C - B - A - C - B - C - B - C - B - C - B - C - C - C - C - C
                    ^                               ^                   ^ 
                    |                               |                   |
                 Process A                       Process B           Process C
                 Completed                       Completed           Completed 
```

记住顺序在循环调度中确实很重要，因为在这种情况下，平均周转时间仅为 (4+12+17)/3=11。

# php - PHP File Uploading Issues

> ID：15721285
> 
> 赞同：0
> 
> 时间：2013-03-30T17:20:00.353
> 
> 标签：php, file-upload, windows-server-2008

I'm trying to implement script that will allow a file to be uploaded, and then moved to a designated directory. **This is running on a Windows server & IIS.** I'm having 2 issues in doing so.

First, I get an error when trying to move the file.

```
Warning: move_uploaded_file(reports/ff.jpg) [function.move-uploaded-file]: failed to open stream: Permission denied in C:\inetpub\wwwroot\betterinsight\betterinsight\upload_file.php on line 29

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move 'C:\Windows\Temp\php1EAB.tmp' to 'reports/ff.jpg' in C:\inetpub\wwwroot\betterinsight\betterinsight\upload_file.php on line 29
Stored in: reports/ff.jpg 
```

When searching, almost everything says it's a permission problem. I have added full rights (will pare down later) to the user: IIS_IUSRS. Even did it to the parent directory as one site recommended.

Second: As a possible solution to the above issue, I tried changing the directory in which files are saved. But the files are still uploaded into **C:\windows\temp**.
I've run phpinfo, and it says that uploads should be in (as defined by **upload_tmp_dir**):

Again, this is on a Windows Server 2008\. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:40:25.507

```
Permission denied 
```

You need to set the folder permissions to 777 or enable read write to the folder. I think the permissions are messing...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:26:49.740

OK, the answer was simple. I was adding permissions for user: IIS_USRS, when it should have been just user: USRS.

# php - 带有 html2canvas 的 div 的屏幕截图。发送到 php，保存：损坏的图像

> ID：15721286
> 
> 赞同：4
> 
> 时间：2013-03-30T17:20:08.710
> 
> 标签：php, png, base64, html2canvas

我生成画布并将其传递给 php，因此：

```
$('body').on('click','#save_image',function(){
                html2canvas($('.myImage'), {
                    onrendered: function(canvas) {
                        //$('.imageHolder').html(canvas);
                            var dataURL = canvas.toDataURL("image/png");

                           // $('.imageHolder').append('<img src="'+dataURL+'" />');
                            $('.imageHolder').html('Generating..');
                            $.post('image.php',{image: dataURL},function(data){
                                $('.imageHolder').html(data);
                            });
                    }
                });
 }); 
```

图像.php：

```
<?
    $image = $_POST['image'];
    echo "<img src='$image' alt='image' />";
    $decoded = str_replace('data:image/png;base64,','',$image);
    $name = time();
    file_put_contents("/home/toni005/public_html/toniweb.us/div2img/" . $name . ".png", $decoded);
    echo '<p><a href="download.php?img='.$name.'.png">Download</a></p>';
?> 
```

下载.php：

```
 <? $file = $_GET['img'];
header('Content-Description: File Transfer');
header("Content-type: image/jpg");
header("Content-disposition: attachment; filename= ".$file."");
readfile($file);
?> 
```

问题是图像已生成，当我单击下载链接时，下载被强制但无法打开图像（似乎已损坏）

我错过了什么？

可以在这里测试：http: [//toniweb.us/div2img/](http://toniweb.us/div2img/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T17:22:15.133

您可能应该是[`base64_decode()`](http://php.net/base64_decode)数据 URL。它甚至在 URL 本身中说：`data:image/png;base64,...`

```
$decoded = base64_decode(str_replace('data:image/png;base64,', '', $image)); 
```

# jquery - 如何在 NicEditor 中添加按钮

> ID：15721293
> 
> 赞同：0
> 
> 时间：2013-03-30T17:21:15.937
> 
> 标签：jquery, nicedit

我在测试应用程序中使用 NicEditor，所以我想到了放置一个按钮来从你的管中添加视频，但是直到我在示例站点 niceeditor 中找到示例之前都不起作用，这个和那个 cogido 添加按钮但未出现在按钮栏上 niceeditor

```
var nicCodeOptions = {
buttons : {
    'xhtml': { name: 'Edit HTML', type: 'nicCodeButton' },
    'youTube' : {name : 'YouTube', type : 'nicYouTubeButton'}
},
iconFiles: {
    'youTube': '/nicedit/youtube.gif'
}
};

var nicYouTubeButton = nicEditorAdvancedButton.extend({
width: '350px',

addPane: function () {
    this.addForm({
        '': { type: 'title', txt: 'YouTube Url' },
        'youTubeUrl': { type: 'text', txt: 'URL', value: 'http://', style: { width: '150px'} },
        'height': { type: 'text', txt: 'Height', value: '560', style: { width: '150px'} },
        'width': { type: 'text', txt: 'Width', value: '315', style: { width: '150px'} }
    });
},

submit: function (e) {
    var code = this.inputs['youTubeUrl'].value;
    var width = this.inputs['height'].value;
    var height = this.inputs['width'].value;

    if (code.indexOf('watch?v=') > 0) {
        code = code.replace('watch?v=','embed/');
    }

    var youTubeCode = '<iframe width="' + width + '" height="' + height + '" src="' + code + '" frameborder="0" allowfullscreen></iframe>';

    this.removePane();
    this.ne.nicCommand('insertHTML', youTubeCode);
}
});
nicEditors.registerPlugin(nicPlugin,nicYouTubeOptions); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T14:25:35.470

*您是将此插件脚本添加到 nicedit 脚本还是添加到您的页面？* 我遇到了这个问题，这就是我解决它的方法：

确保`'youTube': '/nicedit/youtube.gif'` 与您的页面相关而不是脚本相关，并删除第一个正斜杠“youTube”：`'nicedit/youtube.gif'`这完全取决于您是在页面上还是在 Nicedit.js 脚本中使用插件。

这就是我将代码添加到页面的方式（我发现您执行此操作的顺序很重要）

```
<script> Nicedit.js </script>
<script> YOUR PLUGIN CODE (above)</script>
###CONFIG ###
<script>
bkLib.onDomLoaded(function() {
new nicEditor({buttonList : ['youTube','bold','italic','underline','strikeThrough','fontSize','fontFormat','left','center','right','justify','ol','ul','removeformat','indent','outdent','hr']}).panelInstance('article');
});
</script> 
```

# angularjs - AngularJS：$watch不会因对象数组的更改而被触发

> ID：15721295
> 
> 赞同：18
> 
> 时间：2013-03-30T17:21:34.823
> 
> 标签：angularjs

我有一个表，用户可以选择根据某些列和这些列的某些值来过滤表中的行。跟踪此过滤器的对象结构如下所示：

```
$scope.activeFilterAttributes = [
    {
        "columnName": "city",
        "values": ["LA", "OT", "NY"]
    },
    {
        "columnName": "weather",
        "values": ["humid", "sunny"]
    }
]; 
```

所以数组中的对象包含“columnName”和“values”键。“columnName”表示要为过滤器考虑的列，而“values”包含过滤器值。基本上，上面的数组将导致表中的行包含城市列包含“LA”、“OT”或“NY”作为值，而天气列包含“潮湿”或“晴天”作为值。不显示不包含这些值的其他行。

为了帮助更好地理解这个对象，如果用户希望只看到那些在“city”列中具有“LA”或“NY”的行，则结果数组将如下所示：

```
$scope.activeFilterAttributes = [
    {
        "columnName": "city",
        "values": ["LA", "NY"]
    },
    {
        "columnName": "weather",
        "values": []
    }
]; 
```

用户设置或删除这些过滤器。每当发生这种情况时，都会更新上述数组。此更新正确发生并且我已经验证了它 - 这里没有问题。

问题在于 $watch()。我有以下代码：

```
$scope.$watch('activeFilterAttributes', function() {
    //Code that should update the rows displayed in the table based on the filter
}} 
```

虽然`$scope.activeFilterAttributes`在用户更新 UI 中的过滤器时正确更新，但更新时不会触发 $watch。它在应用程序加载时第一次触发，但未来的更新对此没有影响。

我创建了一个小提琴来证明这一点：http: [//jsfiddle.net/nCHQV/](http://jsfiddle.net/nCHQV/)

In the fiddle, `$scope.info` represents the rows of the table, so to speak;
`$scope.data` represents the filter.
Clicking on the button is equivalent to updating the filter(in the case of the fiddle - the data) and thus updating the rows displayed in the table(in the case of the fiddle - the info). But as can be seen, the info is not updated on clicking the button.

Shouldn't `$scope.$watch` be triggered when the array of objects changes?

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-30T17:36:15.760

The `$watch` method takes an optional third parameter called `objectEquality` that checks that the two objects are equal, rather than just share the same *reference*. This is not the default behavior because it is a more expensive operation than the reference check. Your watch isn't being triggered because it still refers to the same object.

See the [docs](http://docs.angularjs.org/api/ng.$rootScope.Scope) for more info.

```
$scope.$watch('activeFilterAttributes', function() {
  // ...
}, true); // <-- objectEquality 
```

Add that parameter and all is well.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-06T13:45:25.500

Accepted answer is a bit out of date now as with AngularJS 1.1.4 the `$WatchCollection` function was added for use with arrays and other collections, which is far less expensive than a `$Watch` with the deep-equality flag set to true.

So this new function is now preferable in most situations.

See [this article](http://www.bennadel.com/blog/2566-scope-watch-vs-watchcollection-in-angularjs.htm) for more detailed differences between `$watch` functions

# javascript - 如何从子范围内的指令中设置角度控制器对象属性值

> ID：15721298
> 
> 赞同：18
> 
> 时间：2013-03-30T17:22:02.210
> 
> 标签：javascript, angularjs

我在 ng-repeater 中有一个指令，应该设置一个范围属性。请在此处查看小提琴：http: [//jsfiddle.net/paos/CSbRB/](http://jsfiddle.net/paos/CSbRB/)

问题是 scope 属性是作为属性值给出的，如下所示：

```
<button ng-update1="inputdata.title">click me</button> 
```

该指令应该将范围属性 inputdata.title 设置为某个字符串。这不起作用：

```
app.directive('ngUpdate1', function() {
    return function(scope, element, attrs) {
        element.bind('click', function() {
            scope.$apply(function() {
                scope[ attrs.ngUpdate1 ] = "Button 1";
            });
        });
    };
}); 
```

但是，直接分配有效：

```
scope["inputdata"]["title"] = "Button 1"; 
```

你能告诉我如何使用 . 指令名称中的符号？

PS：小提琴使用中继器的原因是因为它使指令位于子范围内。当它们在子作用域中时，您不能写入作为原语的作用域属性。这就是为什么我需要一个带有“。”的对象属性。在名字里。请参阅此处的详细说明：[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-31T01:28:02.750

[$parse](http://docs.angularjs.org/api/ng.%24parse)将解决您的问题。

```
<button ng-update1="inputdata.title"> 
```

```
app.directive('ngUpdate1', function($parse) {
    return function(scope, element, attrs) {
        var model = $parse(attrs.ngUpdate1);
        console.log(model(scope));  // logs "test"
        element.bind('click', function() {
           model.assign(scope, "Button 1");
           scope.$apply();
        });
    };
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/J4ccY/)

每当指令不使用隔离范围并且您使用属性指定范围属性，并且您想要修改值时，请使用`$parse`.

如果不需要修改值，可以`$eval`改用：

```
console.log(scope.$eval(attrs.ngUpdate1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:08:11.803

不确定总体目标是什么，但一种方法是创建 2 个属性，一个用于目标对象，另一个用于该对象的属性：

```
<button ng-update1  obj="inputdata" prop="title"> 
```

```
app.directive('ngUpdate1', function() {
    return function(scope, element, attrs) {
        element.bind('click', function() {
            scope.$apply(function() {                
                scope[ attrs.obj ][attrs.prop] = "Button 1";               

            });
        });
    };
}); 
```

演示：http: [//jsfiddle.net/CSbRB/9/](http://jsfiddle.net/CSbRB/9/)

或者使用现有格式，您可以`split()`对当前`ng-update1`属性进行赋值，并将结果数组用于对象和属性的符号

```
 element.bind('click', function() {
           var target=attrs.ngUpdate1.split('.');
            scope.$apply(function() {                
                scope[ target[0] ][target[1]] = "Button 1";               

            });
        }); 
```

两种方法的演示：http: [//jsfiddle.net/CSbRB/10/](http://jsfiddle.net/CSbRB/10/)

另一种方法是在指令中创建一个隔离范围，并可以传入对`inputdata`对象的引用并从属性中提取属性名称（与第二版相同的标记）：

```
app.directive('ngUpdate3', function () {
    return {
        scope: {
           targetObject: '=obj'
        },
        link: function (scope, element, attrs) {
            element.bind('click', function () {  
               scope.$apply(function () {
                    scope.targetObject[attrs.prop]='Button 3';

                });
            });
        }
    }
}); 
```

[http://jsfiddle.net/CSbRB/11/](http://jsfiddle.net/CSbRB/11/)

# php - 动态更新php网站

> ID：15721299
> 
> 赞同：1
> 
> 时间：2013-03-30T17:22:03.783
> 
> 标签：php, c++, sockets

好的...我对 php 很陌生（我知道这可能是一个愚蠢的问题），但我正在将 C++ 套接字程序连接到 php 网站。目前我可以将字符串发送到网站和一切都很好......除了......它只显示一旦php完成执行发送的东西......

我认为可行的解决方案： 1\. 使页面在执行时以某种方式运行 echo 2\. 找到一个合适的解决方案，即设置一个 tcp 连接并通过用户会话进行维护（如何？？）然后执行一个脚本，该脚本在接收时打印到页面数据

我试过冲洗...没有用

其实想了想……有没有解决方案，即使客户端改变页面，我也可以保持socket tcp连接？那将是有用的......继承人的来源：

服务器（c++）： http: [//pastebin.com/QfaUrF92](http://pastebin.com/QfaUrF92)

客户端（php）： http: [//pastebin.com/hZXKsGN0](http://pastebin.com/hZXKsGN0)

请注意，我知道代码有多垃圾。它只是在测试和摆弄以弄清楚我能做什么以及如何做到这一点

编辑：

我正在尝试通过将 php 会话连接到 C++ 服务器来实现我自己的长轮询系统...如果会很困难，我愿意放弃会话，但最终我希望能够维护一个会话，以便我可以通过浏览器更改页面来分叉一个进程来管理客户端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:03:49.613

PHP 在服务器端执行，因此一旦生成页面，它就是静态的。如果您需要不断更新页面内容，您可以使用 Web 套接字或 ajax。基本上，一旦页面被渲染，AJAX 会让您的浏览器使用 Javascript 与您的服务器对话。像 jQuery 这样的库使它变得非常简单。

来自 jQuery 文档（[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)）：

```
$.post("test.php", { name: "John", time: "2pm" })
.done(function(data) {
  alert("Data Loaded: " + data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:04:00.687

你可以使用 NodeJS。它是服务器端 JavaScript。

使用 NodeJS，您可以在浏览器页面和 Web 服务器之间建立套接字连接。使用它，您可以根据服务器的意愿将数据推送到浏览器。

但您可能需要一些时间才能开始。

推荐阅读：

*   [www.nodejs.org](http://nodejs.org/)

*   [www.nodebeginner.org](http://www.nodebeginner.org)

*   [套接字.io](http://socket.io)

*   [hacksparrow.com/tcp-socket-programming-in-node-js.html](http://hacksparrow.com/tcp-socket-programming-in-node-js.html)

# java - 我怎样才能得到最底层的结果？

> ID：15721307
> 
> 赞同：0
> 
> 时间：2013-03-30T17:22:49.857
> 
> 标签：java

这是我到目前为止所做的递归，但它似乎不正确，这主要是出于兴趣。任何帮助或提示将不胜感激。

```
public class CompareStrings { 
    public static boolean match(String x, String y) {
        //turn each string into a char[], sort that array,
        //then compare the two Simple 
        char[] first  = x.toCharArray();
        char[] second = y.toCharArray();
        java.util.Arrays.sort(first);
        java.util.Arrays.sort(second);
        String sorted_str1 = new String(x);
        String sorted_str2 = new String(y);

        if(sorted_str1.equals(sorted_str2)){
            return true;
        }
        else{
            return false;
        }

    } 

    public static void main(String args[]) { 
        System.out.println(match("hello", "hello.")); // should return false
        System.out.println(match("hello", "jello")); // should return false
        System.out.println(match("hello", "h@llo")); // should return true
        System.out.println(match("hello", "h@@@@")); // should return true
        System.out.println(match("hello", "h*")); // should return true
        System.out.println(match("hello", "*l*")); // should return true
        System.out.println(match("anyString", "*")); // should return true
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:29:14.827

你必须记住，如果你想使用*递归*，你必须在函数内部使用你的函数。看看和例子：

```
void myMethod( int counter)
{
if(counter == 0)
else
{
System.out.println("hello" + counter);
myMethod(--counter);
System.out.println(""+counter);
}
} 
```

我的函数是 myMethod，我在它自己内部使用它。但是你没有这样做，所以你没有使用*Recursion*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:34:08.753

我不知道递归，但为什么不做一些简单的事情

```
public static boolean match(String x, String y) {
    return x.matches(y.replace("@", ".").replace("*", ".*"));
} 
```

在正则表达式中，

*   `.`匹配任何字符
*   `X*`匹配`X` *0 次或多次*
*   因此，`.*`匹配任何字符串，包括空字符串

Judging by your examples, you want `@` to match a single character and `*` to match any string. So, we replace all `@`s in `y` with `.` and replace all `*`s with `.*`, and use the resulting string as a regular expression, checking if `x` matches it.

* * *

```
System.out.println(match("hello", "hello."));
System.out.println(match("hello", "jello"));
System.out.println(match("hello", "h@llo"));
System.out.println(match("hello", "h@@@@"));
System.out.println(match("hello", "h*"));
System.out.println(match("hello", "*l*"));
System.out.println(match("anyString", "*")); 
```

```
false
false
true
true
true
true
true

```

# php - PHP Session Login 返回错误的用户名和密码

> ID：15721308
> 
> 赞同：0
> 
> 时间：2013-03-30T17:22:56.407
> 
> 标签：php, session, login, mysqli, credentials

尝试登录我的站点时，脚本返回 Im 使用了错误的用户名或密码。

index.html 的负责人：

```
<?php
session_start();
require_once 'classes/Membership.php';
$membership = new Membership();
if ($_POST && !empty ($_POST['username']) && !empty ($_POST['password'])) {
$response = $membership->validate_user($_POST['username'], $_POST['password']);
}
?> 
```

index.html 中的表格：

```
 <div class="login" id="register">
     <form method="POST" action="" accept-charset="utf-8">
      <fieldset>
       <p>
        <label for="username">Username</label><br />
        <input type="text" name="username" value="" id="username">
       </p>
       <p>
        <label for="password">Password</label><br />
        <input type="password" name="password" value="" id="password">
       </p>
      </fieldset>
      <input type="submit" class="button" value="Sign in">
     </form>
    </div>
<?php if(isset($response)) echo "<p class = 'error-msg'>" .$response.".</p>"; ?> 
```

会员资格.php

```
<?php
require 'MySQL.php';

    class Membership
    {
        function validate_user($username, $password)
        {
            $mysql = new MySQL();
            $ensure_credentials = $mysql->verify_in_db($username,md5($password));

            if ($ensure_credentials)
            {
                $_SESSION['status'] = 'authorized';
                header("location: index_member.php");
            }
            else return "Please enter a correct username and password";
        }
    } 
```

MySQL.php

```
<?php
require_once 'includes/constants.php';

    class MySQL
        {
            private $conn;

            function __construct()
            {
             $this->conn = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME) 
             or die ('There was a problem connecting to the database.');
            }

            function verify_in_db($username, $password)
            {
                $query = "SELECT * 
                                FROM users
                                WHERE username = ? AND password = ?
                                LIMIT 1";
                if ($stmt = $this->conn->prepare($query))
                {
                $stmt->bind_param('ss', $username, $password);
                $stmt->execute();

                    if ($stmt->fetch())
                    {
                        $stmt->close();
                        return true;
                    }
                }
            }
        } 
```

常量.php

```
<?php
// Define constants

define ('DB_SERVER', 'localhost');
define ('DB_USER', 'root');
define ('DB_PASSWORD', '');
define ('DB_NAME', 'membership'); 
```

没有数据库密码，不要混淆。xampp 上的标准数据库。我尝试使用的凭据是 100% 正确的，sql 常量也是如此。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T17:32:40.580

可能是因为您所说的密码。它的

```
'密码'
```

但它应该是这样的，因为 MD5

```
'fglsdgjdfnfjlsmg905760657604657604jtvymwy'

```

# url - Stackoverflow-like permalinks with Jekyll

> ID：15721310
> 
> 赞同：3
> 
> 时间：2013-03-30T17:23:09.300
> 
> 标签：url, stack-overflow, jekyll, permalinks

I really have taken a liking to Stackoverflow's permalinks. The way I understand them to work is as follows:

```
https://stackoverflow.com/questions/uniqueid/post-title-for-seo 
```

The following gets the job done too [https://stackoverflow.com/questions/15721310](https://stackoverflow.com/questions/15721310/stackoverflow-like-permalinks-with-jekyll):

```
https://stackoverflow.com/questions/uniqueid 
```

Interestingly, if you put anything after `uniqueid` you will get to the question

```
https://stackoverflow.com/questions/100001/hello-world
https://stackoverflow.com/questions/100001/hello-cruel-world
https://stackoverflow.com/questions/100001/hello-strange-world 
```

All of the above work, this allows you to change the question's title without losing all your permalinks.

I'm using jekyll and I plan to launch on github with github-pages (which doesn't allow `.htaccess`). If it can be done with jekyll without github-pages (which I'm sure is much easier) then I'd be willing to deploy it to a hosted VPS. I'm open to any solution!

I would also like `questions` to be a specific variable in the post like `post.category` or `post.template` such as `blog` or `portfolio`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T10:36:19.047

The only close this I found in [Jekill Docs](http://jekyllrb.com/docs/frontmatter/) is to define permalink in every post:

```
---
layout: share
title: CoffeeScript Spaces and Tabs
date: 2013-09-17
categories: [coffee, eclipse, nodeclipse, enide, studio, monster]
permalink: /share/coffeescript-spaces-and-tabs
--- 
```

I see no trace of post ID concept in Jekyll. I hope someone can suggest how to do that with [variables](http://jekyllrb.com/docs/variables/) or some other way.

# php - 如果 mysql 查询为空，则隐藏标题

> ID：15721312
> 
> 赞同：-3
> 
> 时间：2013-03-30T17:23:17.050
> 
> 标签：php, mysql

如果它用于显示返回为空的 php/mysql 查询结果，有没有办法隐藏一段 html。以下是查询：

```
try
{
$park_id = $_GET['park_id'];
$query2="SELECT `name` FROM  `tpf_rides` WHERE  `park_id` = $park_id AND  `top_ride` = 1 ORDER BY `name` ASC";
$result2 = $pdo->query($query2);
}
catch (PDOException $e)
{
$output = 'Unable to pull rides.';
include 'output.html.php';
}

$output = 'Sucessfully pulled rides';
//include 'output.html.php';// 
```

以及用于显示结果的代码部分：

```
<h2>Top Attractions</h2>
<ul>
<?php foreach ($result2 as $row2): ?>

<li><h3><?php echo $row2['name']; ?></h3></li>

<?php endforeach; ?>
</ul>
<hr> 
```

网站上有许多公园还没有热门景点 - 用“ `top_ride`= 1”表示。`"<h2>Top Attractions</h2>"`如果没有特定公园的“topride = 1”，我最好不要显示上面的整个代码，而不是显示下面没有列出的游乐设施。

这可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:27:37.250

尝试这个;

```
 <?php

       if($count = $query2->rowcount() < 1) {

       echo "No results found";
        }   else { 

 echo "<h2>Top Attractions</h2>";

    foreach($result2 as $row2) {

    if(!empty($row2['name'])) {

    echo "<li><h3>{$row2['name']}</h3></li>";

    } else {

    }

    }

}
    ?> 
```

# css - 无法在 chrome 开发者工具中保存 style.css

> ID：15721317
> 
> 赞同：0
> 
> 时间：2013-03-30T17:24:05.307
> 
> 标签：css, wordpress-theming, google-chrome-devtools, file-access

我已经使用 Google Chrome 内置的开发者工具对[我的博客进行了所有这些小的 CSS 修改，以改进 +WordPress 博客。](http://longgame.org/)

我在**修改后的 style.css**文档中使用了上下文相关的*Save As*命令。但是，我的任何更改都没有反映在服务器上替换的 styles.css 文档中。

 **一些补充细节：

1.  我正在使用 FileZilla 连接并手动删除旧文件，然后上传修订版（我发现无论出于何种原因，替换并不总是有效。
2.  我在博客的主主题文件夹中执行此操作。我不知道这可能存在的任何其他可能的位置。

想法？我的原始 G+ ​​查询（附有截图）可以在[这里](https://plus.google.com/111803955882817854729/posts/SfrP7RADjFY)找到。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:47:44.543

而不是覆盖样式，您应该将它们附加到样式表的末尾。我通常会在结尾创建一个评论，比如`/* New Styles Here */`更好的是，您应该创建一个子主题以及子主题 style.css 的所有样式

[http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)**

# php - 如何使用jquery动态创建和删除行

> ID：15721319
> 
> 赞同：0
> 
> 时间：2013-03-30T17:24:24.843
> 
> 标签：php, jquery

这是我的代码

```
<table id="cont">    
<tr>
<td><input type="text" name="no" id="no"/></td>
<td><input type="text" name="qty" id="qty"/></td>
</tr>
</table> 
```

这是我的 jQuery 代码

```
$(document).ready(function() {
     var no="";
     $('#no').keyup(function(){
     no = $("#no").val();
     for(var i=1; i<no; i++)
     {
        ++j;

        $('<tr class="field"><td></td><td><input name="qty[]" type="text" id="qty[0]" /></td></tr>').fadeIn('slow').appendTo('#cont');
     }
     });

    if(i==1)
    {
        $('.field').remove();
    }

}); 
```

我想根据输入字段（无 id）动态创建和删除行，它可以正常工作到 19，但如果我输入 20，那么它会创建 20 和额外的 1 行以及我从 20 中删除零，那么它应该被保留2 行，但它显示所有行（21）。

我该如何解决它，请任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:52:33.390

您的代码的主要问题是您只添加行。这是一个解决方案，它在 keyup 后提供一点超时，然后替换所有行。尚不完全清楚您使用此 UI 的总体目标是什么。

请注意，顶行被包裹`<thead>`并`<tbody>`用于数据行：

```
var row = '<tr class="field"><td>Row text</td><td><input name="qty[]" type="text" /></td></tr>';
var num_rows=0;
$('#no').keyup(function () {
   num_rows= $(this).val();;
    if (!isNaN(num_rows)) {/* make sure is a number, can add extra condition to limit number*/
        setTimeout(createRows, 300);/* slight delay to give user time to type*/
    } else {
        alert('numbers only please')
    }
});

function createRows(){
    var rowHtml='';
    for ( i=0;i<num_rows;i++){
        rowHtml+=row;
    }
    $('#cont tbody').html( rowHtml)

} 
```

演示：http: [//jsfiddle.net/H4MHs/](http://jsfiddle.net/H4MHs/)

**编辑：**我怀疑这种方法与您真正想要的完全不同，但遵循您的方法。由于从未明确说明目标，因此我们只能继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:28:52.137

`parseInt`在循环中使用之前，您可能希望将字段中的值转换为整数。

我很确定 jQuery`.val()`总是会返回一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:52:24.200

我觉得这就是你需要的：

html:

```
Number of field:<div id='nbElem'></div>
<table id="cont">    
 <tr>
  <td><input type="text" name="no" id="no"/></td>
  <td id='field'></td>
 </tr>
</table> 
```

JS：

```
$('#no').keyup(function(){
    var $val = parseInt($(this).val(),10);
    var $nbQtity = $('.qtity').length;

    if($val <= $nbQtity){
        for(var i = $val; i < $nbQtity; i++){
            $('#q_'+i).remove();
        }
    }else{
        for(var i = $nbQtity; i < $val; i++){
         $('<input name="qty[]" class="qtity"'
           +' type="text" id="q_'+i+'" />')
             .fadeIn('slow')
             .appendTo('#field');
        }
    }
    $('#nbElem').text($val);
}); 
```

[http://jsfiddle.net/pYtbs/](http://jsfiddle.net/pYtbs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T09:15:15.097

这是添加行的最简单和最简单的方法

```
<table id="options-table">
<tbody>
    <tr>
        <td>Input-Box-One</td>
        <td>Input-Box-Two</td>
        <td></td>
    </tr>
    <tr>
        <td><input type="text" name="input_box_one[]" /></td>
        <td><input type="text" name="input_box_one[]" /></td>
        <td><input class="del" type="button" value="Delete" /></td>
    </tr>
    <tr>
        <td><input type="text" name="input_box_one[]" /></td>
        <td><input type="text" name="input_box_one[]" /></td>
        <td><input class="add" type="button" value="Add More" /></td>
    </tr>
</tbody> 
```

如果我们想要更多行，那么我们必须向表中添加新行。将此代码放入脚本中

```
$('.add').live('click',function(){
$(this).val('Delete');
$(this).attr('class','del');

var appendTxt = "<tr><td><input type="text" name="input_box_one[]" /></td><td><input type="text" name="input_box_two[]" /></td><td><input class="add" type="button" value="Add More" /></td></tr>";
$("tr:last").after(appendTxt); }); 
```

从表中删除一行。

```
$('.del').live('click',function(){
$(this).parent().parent().remove(); }); 
```

# php - 在同一页面的多个字段上实现money.js

> ID：15721322
> 
> 赞同：1
> 
> 时间：2013-03-30T17:24:41.173
> 
> 标签：php, javascript, jquery, cakephp

我在概念上苦苦挣扎如何实现这一点（绑定什么事件等）。

我正在使用 CakePHP 并查看以下内容：

*   要显示的产品数组和相关价格 ($products['Product']['price'])
*   每个产品都有一个基础货币集（$product['Currency]['currency']）
*   我有 money.js、accounting.js 和另一个为 fx.rates 和 fx.base 设置 JSON 数据的 JS
*   我知道用户希望看到的货币并且可能与产品基础货币不同 (SessionComponent::read('User.Preferences.Currency')
*   显示货币短名称 (USD) 和转换值的 div，每个 div 都有唯一的 id

我的简单测试工作正常 - 使用 inline-php 我在两个脚本标签之间的页面上放置了一些 JS。

```
<script>
var value = accounting.unformat(<? echo $product['Product']['price'] ?>); // clean up number (eg. user input)
var target = "<? echo SessionComponent::read('User.Preference.currency'); ?>"; // or some user input
var convertedValue = fx(value).from("<? echo $product['Currency']['currency']  >").to(target);

accounting.formatMoney(convertedValue, {
    symbol: target,
    format: "%v %s"
}); // eg. "53,180.08 GBP"   

alert(convertedValue);
</script> 
```

美好的。效果很好。但我无法解决的是如何在有 N 个产品的页面上实现这一点。

我假设我创建了一个 JS 函数，例如：

```
fx_convert(divid, price, fromcurrency, tocurrency) 
```

在我的 Cake 视图中，我使用内联 php 来回显函数参数。

为这个函数使用 jQuery 的干净方法是什么，让价格“divs”调用 fx_convert 并用转换后的值更新它们的内容？

还是我的想法完全倒退了？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:06:11.670

好好睡了一觉，终于明白了。:)

使用内联 PHP，我通过 div 属性传递往返货币并设置统一的类名。例如

```
<div class="fx" fx-from="<?php echo $product['Currency']['currency']; ?>" fx-to="<?php echo SessionComponent::read('User.Preference.currency') ?>" fx-value="<?php echo $product['Product']['price']; ?>"></div> 
```

然后使用下面的 jQuery 片段循环遍历类“fx”的所有元素并进行所需的计算（使用优秀的 money.js 和 accounting.js）

```
$(document).ready(function() {

$(".fx").each( function( index, element ){

    var value = accounting.unformat($(this).attr("fx-value")); // clean up number (eg. user input)
    var target = $(this).attr("fx-to"); // or some user input
    var convertedValue = fx(value).from($(this).attr("fx-from")).to(target);

    $(this).html(accounting.formatMoney(convertedValue, {
        symbol: target,
        format: "%v %s"
    }));

});

}); 
```

仍然需要重构和整理，但解决方案就在那里。

# ios - 适合 UITableViewDataSource 的数据表示

> ID：15721327
> 
> 赞同：0
> 
> 时间：2013-03-30T17:25:21.597
> 
> 标签：ios, uitableview

目前，我在我的应用程序中进行了以下设置：

例如，我有一个游戏列表，其中游戏有不同的状态，我希望某个状态位于某个部分等。

由于我有 3 个不同的状态，我将使用 NSDictionary，其中 State 作为键，Array 作为值，并将具有特定状态的特定游戏放入正确的数组中。

然后我的代码`numberOfRowsInSection`将类似于：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSString* state = [self getStateForSection:section];
    return [[obj objectForKey:state] count];
} 
```

问题是我不喜欢将对象放在数组中，从那时起，每当我想访问某个匹配项时，我都必须查看整个数组。

相反，我希望将所有匹配项放在一个 NSDictionary 中，其中 matchID 作为键，NSDictionary 作为值（匹配项）。

但那时我该怎么办`UITableView`？

我可以做一些事情，我返回我的 NSDictionary 的 allKeys 但我仍然必须迭代它以找到它们的当前状态并将它们的键添加到适当的列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:08:47.850

您也可以在旁边构建一个`NSDictionary`from `matchID`to `match`，只需重用相同的对象并将 of 保留`NSDictionary`为`NSArray`表数据源。那么问题是您必须在数据更改时更新两者。您可能还想研究`NSArray filteredArrayUsingPredicate:`

另一种可能性是使用另一种称为[排序字典](https://code.google.com/p/cocoa-sorted-dictionary/wiki/StartHere)的数据结构，它将其键保持在特定顺序。这样，您可以请求所有值作为表格视图的数组并获得恒定顺序，但仍然可以`matchID`直接使用 a 进行查找 a `match`。

# r - 将 R 容器名称转换为字符

> ID：15721328
> 
> 赞同：0
> 
> 时间：2013-03-30T17:25:24.110
> 
> 标签：r

由于使用以下代码出现错误，如何将容器名称转换为字符：

```
tenv = new.env()
evalq({    }, tenv)

y = function(myEnv) {
  print(as.character(myEnv))
}

y(tenv)

Error in as.character(myEnv) :
cannot coerce type 'environment' to vector of type 'character' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:44:42.953

如果您只想获取传递给`myEnv`参数的对象的名称，那么一个常见的习惯用法是`deparse(substitute( ))`. 函数可以写成：

```
y <- function(myEnv) {
  deparse(substitute(myEnv))
} 
```

在使用中给出

```
> tenv = new.env()
> evalq({    }, tenv)
> y(tenv)
[1] "tenv" 
```

[注意我没有明确`print`的结果`deparse(substitute( ))`，我只是返回它并将打印留给 R 环境]

另一种方法是获取匹配的函数调用，`match.call()`然后从生成的语言对象中提取您想要的位。例如：

```
yy <- function(myEnv) {
  .call <- match.call()
  .call[[2]]
} 
```

在使用中给出

```
> yy(tenv)
tenv
> yy(myEnv = tenv)
tenv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:12:08.003

您不能将“容器”（环境）转换为字符串，因为环境不具有这样的属性。如果您想要存储环境并作为参数传递给 function 的变量的名称，请`y`使用上面@Gavin 提出的解决方案。

OTOH，如果要转储环境内容，请使用以下命令：

```
y = function(myEnv) {
  print(as.list(myEnv))
} 
```

顺便说一句，我必须指出，我不明白你为什么要跑步`evalq({ }, tenv)`。它不会改变环境。尝试以下操作（运行命令后）：

```
> uenv <- new.env()
> identical(as.list(uenv),as.list(tenv)) 
```

# c++ - Passing char* through several methods doesn't work at the end

> ID：15721329
> 
> 赞同：2
> 
> 时间：2013-03-30T17:25:30.110
> 
> 标签：c++

I'm having problem with getting the value of class member after assigning like that:

```
bool ModeData::setPasswd(char* _pass)
{
    return (this->setString(this->passwd_, _pass) ? true : false);
}

bool ModeData::setOutput(char* _out)
{
    return (this->setString(this->output_, _out) ? true : false);
} 
```

where setString is like that:

```
bool ModeData::setString(char* _toStr, char* _fromStr)
{
    // check if already exists and delete
    this->delIfPresent(_toStr);

    // allocate space for the new string
    _toStr = new char[strlen(_fromStr) + 1];

    // copy new string
    if(strcpy(_toStr, _fromStr))
    {
        return true;
    }

    // if something gone wrong return 'false'
    return false;
} 
```

and then if I want to print the value of this->passwd_, I get nothing. I think the pointers are lost somewhere when passing through methods, but I'm not sure.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:27:52.380

You should pass your pointers by ref... No, NO! Wait a moment. You should **not** use pointers, you should use [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string) instead! That will make your life so much easier.

This said, if you *really* want to use pointers, then the problem is that you are passing them by value. The changes done to those pointers (in particular, the assignment in `_toStr = new char[strlen(_fromStr) + 1];`) won't be visible to the caller once the function returns - and as a side effect, your program is leaking memory.

To fix this, pass your pointers *by reference*:

```
 bool ModeData::setString(char*& _toStr, char*& _fromStr)
//                                ^              ^ 
```

And don't forget to `delete[]` arrays allocated with `new[]`, or you will have a memory leak. But let me give you that advice once more: use [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string) instead of doing manual memory management through raw pointers.

# azure - ServiceManagement API to Delete Deployment

> ID：15721333
> 
> 赞同：0
> 
> 时间：2013-03-30T17:26:08.350
> 
> 标签：azure, service-management

Im referring to this for deployment to Cloud Service [http://www.packtpub.com/article/managing-azure-hosted-services-with-service-management-api](http://www.packtpub.com/article/managing-azure-hosted-services-with-service-management-api)

For Deleting the Package there is no straight forward way to delete package from cloud service. I'm referring to below code [http://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c) As per above code, It uses ServiceManagermentHelper class, But I cant use the code in ServiceManagementHelper class, since it is been uploaded in Code plex. But i need better solution from ServiceManagement API. Im unable to find dll or API for ServiceManagement API. Are there any dll available for Azure Client SDK 1.7 or above? Please let me know how to delete cloudservice functionality along with check the service is deployed or not.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:37:07.217

There is currently not a managed DLL available from Microsoft that wraps the Management API; however, there are a few other options. First, there are command line tools such as the PowerShell CmdLets and the CLI tools found at [http://www.windowsazure.com/en-us/downloads/](http://www.windowsazure.com/en-us/downloads/). If you only need to script these calls to delete the deployment these will work for you just fine. In my opinion I would suggest NOT looking at csmanage as that is an old sample and not maintained. The command line tools are the replacement.

Second, you can do so using code to call the REST based management API much like Neil indicated in the first link you included in your question. The documentation for the API can be found at [http://msdn.microsoft.com/en-us/library/windowsazure/ee460812.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460812.aspx). Note that there is a Delete Deployment specifically at [http://msdn.microsoft.com/en-us/library/windowsazure/ee460815.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460815.aspx). Just like Neil's examples you'll use calls direct to the REST API.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:27:50.687

Thanks to Mike for providing help. I'm able to fix problem by using Service Management API to delete Deployment. There are some Hiccups when I was deleting Deployment. If the Service Status is "Running" , Azure Service Management API throws Error, that Azure Service is in Running State. I have to change the Deployment Status to Suspended State before deleting deployment.

-Mahender

# java - Android游戏中加速度计的滞后响应

> ID：15721336
> 
> 赞同：0
> 
> 时间：2013-03-30T17:26:14.323
> 
> 标签：java, android

我目前正在开发的游戏对球对加速度计的响应有一点问题。我将传感器延迟设置为最快，因此它应该接近对手机移动的即时响应。但是，当球在移动时，反应似乎有轻微的滞后，有时球似乎有点生涩。我买不起这个，因为它是一款基于策略和手部稳定性的游戏。游戏代码是用Java编写的。我将如何减少响应的滞后？

问候

# html - 列表样式类型：无；不适用于 Tumblr 主题（在 Safari 中）

> ID：15721337
> 
> 赞同：0
> 
> 时间：2013-03-30T17:26:24.167
> 
> 标签：html, css

我有 Tumblr Esquire 主题。我添加了一些 css 和 html 来添加社交媒体按钮，使用我在这里得到的一些代码。除了显示项目符号外，将按钮排成一行非常有效。列表样式类型：无；（或列表样式）属性在头部或主体中都没有摆脱它。

任何想法将不胜感激。在我的脑海里有这个：

```
<style>
    .social-media-container{width:600px; margin:auto; height:10px;}
    .social-media-share-list ul div{width:250px;}
    .social-media-share-list li{display:ablock; float: left; width:25%; text-align:     
    center; margin: 0 auto;}
</style> 
```

身体是这样的：

```
 <div class="social-media-container">
    <ul class="social-media-share-list">
      <li>
        <div class="fb-like" data-send="false" data-layout="button_count" data width-                                                                                                       =              ="450" data-show-faces="false></div>        
        <div id="fb-root"></div>
         <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
           if (d.getElementById(id)) return;
           js = d.createElement(s); js.id = id;
           js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
           fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));</script>
    </li>
    <li>
        <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>                                                                       <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)) {js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.in sertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </li>
    <li> 
        <div class="g-plusone" data-size="medium"></div>
    </li>
    <li>
        <a href="http://tmv.proto.jp/reblog.php?post_url={Permalink};">
        <img src="http://assets.tumblr.com/images/iframe_reblog_alpha.png?4"/></a>
    </li>
  </ul>
</div> 
```

fb 中的一些项目（如代码）和 twitter 按钮在这张图片中被切断了，但除此之外，一切都在那里，我没有从他们的网站更改这些按钮的标准代码。

在 head 部分，我在 ul div 部分尝试了 list-style-type，在 li 部分尝试了它，即使它应该在 ul 中。我知道被赋予最高优先级的 css 样式是内联的，所以我在正文中尝试了它，但可能没有正确的语法。那应该覆盖其他任何东西，但到目前为止还没有运气。

这就是它的样子： [http ://the-nomads-prayer-book.tumblr.com](http://the-nomads-prayer-book.tumblr.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:43:06.040

您可能需要编写更具体的选择器。像`ul#navigation li{list-style:none}` 假设你的标记是这样的

```
<ul id="navigation">
   <li>blah</li>
</ul> 
```

# jquery - Dropdown created via jquery ajax: how to keep the user choice after form submit

> ID：15721338
> 
> 赞同：0
> 
> 时间：2013-03-30T17:26:25.340
> 
> 标签：jquery, ajax, forms, drop-down-menu, selected

I populate a dropdown (dropdown2) based on the user choosing something in a first dropdown (dropdown1). Dropdown1 contains a list of partners and dropdown2 fills a list of people that belong to the partner. This is my jquery code below (it works):

```
$("select[name='dropdown1']").change(function() {
$.ajax({
    type: "POST",
    url: "ajax/getPeoplebyPartner",
    data: "partnerId="+$("select[name='dropdown1']").val(),
    dataType: 'json',
    success: function(data){
        $("select[name='dropdown2']").empty();
        $("select[name='dropdown2']").append($("<option />").val("").text("select the person").attr('selected','selected').attr('disabled','disabled').attr('style','display:none;'));
        $.each(data, function() { //Filling each option
            $("select[name='dropdown2']").append($("<option />").val(this.id).text(this.name));
        });
    }
});
});
$("select[name='dropdown1']").change(); 
```

However if a user submits the form but there was any error anywhere, dropdown2 is repopulated but the option the user may have made there is lost. I want to fix that.

I think the best way would be to modify this part: `$("select[name='dropdown2']").append($("<option />").val(this.id).text(this.name));`

Into: `if(this.id == WHAT THE USER HAD SELECTED BEFORE THE FORM WAS SUBMITTED) $("select[name='dropdown2']").append($("<option />").val(this.id).text(this.name).attr('selected','selected')); else $("select[name='dropdown2']").append($("<option />").val(this.id).text(this.name));`

How can I find what the user had selected before submitting the form?

thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:31:10.417

You have two options:

1.  After the user submitted the form - using the server side you will need to analyze the content of the `POST` header - or if your form use `GET`, you will need to parse the querystring (that's something that you can also do using javascript)
2.  You validate your form without the 'submit' action but by using an Ajax call. This Ajax call can return you an error code based on the error made by the user and then you can update the user interface accordingly.

I recommend the second option. You have a good example here: [http://jqueryfordesigners.com/using-ajax-to-validate-forms/](http://jqueryfordesigners.com/using-ajax-to-validate-forms/)

# git - 将 git 存储库推送到服务器

> ID：15721339
> 
> 赞同：0
> 
> 时间：2013-03-30T17:26:25.633
> 
> 标签：git

我已经将许多内容提交到我的本地存储库中，甚至将内容推送到与团队成员在线保存的共享存储库中。我现在正在寻找一种方法将我在服务器上我的 html 目录中的文件存储到我的在线 git 中，然后我可以与我的本地存储库共享，当我在本地进行更改以自动提交并推送到远程网站反过来更新我的服务器文件。目前，我每次点击保存时都使用 Coda 将文件自动 ssh 到服务器。

我最近遇到了一个问题，我在编码过程中不小心删除了服务器上的一些文件，这让我觉得如果我安装了 git，我可以恢复到以前的日期！所以事不宜迟，我真的很想实现这样的东西。

我已经对如何推送到服务器上的远程存储库进行了一些研究，并找到了本教程， [教程链接](http://caiustheory.com/automatically-deploying-website-from-remote-git-repository)

但是我有一个亚马逊 EC2 实例，我不确定如何在服务器上运行命令行，这是我假设我在教程的第一步中必须做的，我需要在服务器目录上创建一个 git

谁能给我一些关于如何有效地做到这一点的指导，以便最终一切顺利？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:15:56.523

周围有很多教程。[这里](https://stackoverflow.com/questions/279169/deploy-a-project-using-git-push)解释了一个非常有趣的（因为它很容易）。它基本上使用 git 挂钩通过推送到特定的远程存储库来更新 EC2 实例上的代码。

所有你需要它 ssh 访问服务器和安装在那里的 git。

# autoit - Whats is the command/function to select a radio button in AutoIT script while automating Software Installation

> ID：15721342
> 
> 赞同：-1
> 
> 时间：2013-03-30T17:26:39.743
> 
> 标签：autoit

I am using AutoIT to automate installation of a software. In a window, I am being shown with 2 radio buttons, say radio1 and radio2\. By default the radio2 is selected. The default control is on radio2 radio button. I have to select the radio1\. I am able to make the control go to the radio1 by using Send("{TAB}") as many times so that the control goes to the radio1 but I am not getting what should be the command to click on the first radio button. The SEND("{ENTER}") doesnt work in this condition. Please guide.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:00:35.927

As you'd know, using ControlCommand is better practice than Send. I understand that you found it difficult to get the control's ID using AutoIT v3 Window Info, which happens some times. There are some other good window information tools I use in those circumstances: winspector / AccExplorer32.exe / inspect32.exe / WindowHandlePicker.exe.

You have several options:

1) Use the following snippet and increase the number in CLASSNN until you get the right checkbox:

```
ControlCommand("Options", "", "[CLASSNN:Button5]", "Check") 
```

2) Some of the window info tools listed above tell you the shortcut key for the control (eg. alt+u). If that's the case, it's sometimes possible to send the shortcut without specifying the control:

```
ControlSend("Options", "", "", "!u") 
```

3) Using _[CtrlGetByPos](http://www.autoitscript.com/forum/topic/30554-controlid-and-classnamenn-are-changing-from-day-to-day/page__p__218527), get the control's ID/CLASSNN/Handle then use it in a ControlClick.

4) Just use `Send("{SPACE}")` as mrt's mentioned

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:30:02.620

You mean by using `Send("{TAB}")` you are able to give focus to the radio buttons (the dotted line) but you can't activate them? If this is the case then you can try `Send("{SPACE}")` to activate the proper radio-button.

# javascript - Style - Replacing named function with named IIFE

> ID：15721346
> 
> 赞同：4
> 
> 时间：2013-03-30T17:27:05.240
> 
> 标签：javascript

I'm refactoring some code. Can I replace

```
function next () {
    // call next using setTimeout
}
next(); 
```

with

```
(function next () {
    // call next using setTimeout
}()); 
```

next has to be initiated and from there it will call itself a certain amount of times.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T17:31:15.057

Both are possible, both enable recursive call (that's the point in naming the IIFE).

The only difference between them is that the second one doesn't pollute the external namespace with the function's name, which is only visible from the function. Of course a consequence is that you won't be able to call the function from elsewhere.

# javascript - 为什么我的笑脸解析代码会调用原生 javascript 函数？

> ID：15721347
> 
> 赞同：3
> 
> 时间：2013-03-30T17:27:05.677
> 
> 标签：javascript, jquery, html, function, native

我正在为我的网站编写笑脸解析功能。我想要完成的是转换某些字符串，例如`":)"`变成这样的图像：![在此处输入图像描述](../Images/0f4d7f79c342d5fed6440f518fa2ab0f.png)

或者以实际的 html 为例：

```
":)" ===> <img src="images/smilies/smile.png" /> 
```

我的函数做了它应该做的事情，但它也在解析原生 javascript 函数名！我的意思是，如果我键入包含字符串`"push"`、`"pop"`或`"some"`（可能还有其他负载）的注释，我的函数会将这些字符串解析为无效图像，如下所示：

![在此处输入图像描述](../Images/1d32b09084d32c649266c09cb3e7713b.png)

这是一个显示此内容的 html 字符串：

```
<img src="images/smilies/function some() { [native code] }" alt=""> 
```

这会导致浏览器控制台中出现 404 not found 错误。

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
```

为什么会这样？正如您在此处看到的，我没有在我的代码中做任何不寻常的事情：

```
 function parse_new_comment(commentElem){
            $(commentElem).html(parse_comment($(commentElem).text()));
        }

        function parse_comment(comment){
            var formatted_comment = "";

            var smilies = new Array();
            smilies[":)"] = "smile.png";
            smilies[":D"] = "smile-big.png";
            smilies[":p"] = "tongue.png";
            smilies["[sheep]"] = "sheep.png";
            smilies["<3"] = "love.png";
            smilies["[love]"] = "love.png";

            var words = comment.split(" ");

            for (var i = 0; i < words.length; i++) {
                if(smilies[words[i]] !== undefined){
                    formatted_comment += ' <img src="images/smilies/'+smilies[words[i]]+'" alt="" />';
                }else{
                    formatted_comment += ' ' + words[i];
                }
            }
            return formatted_comment;
        } 
```

我有一种感觉，这行代码导致了问题`if(smilies[words[i]] !== undefined){`，就像数组函数一样`push`，`pop`虽然我不太确定......如果有人能就我的函数失败的原因提出任何想法，我将不胜感激。

哦，我忘了提，我的页面使用 ajax 来做所有的事情，所以新的评论是通过调用这样的函数来解析的：

```
parse_new_comment($("#comment_343")); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T17:29:18.457

检查对象是否具有属性本身，而不是对象的属性未定义。这可以使用[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty).

```
if(smilies.hasOwnProperty(words[i])){ 
```

代替

```
if(smilies[words[i]] !== undefined){ 
```

另外，由于您没有将`smilies`其用作数组，因此我同意 Pointy 的评论，即应将其声明为对象。值得一提的是，当您`Array`在 JavaScript 中将键附加到 an 时，只有当[它们可以被视为无符号整数](http://es5.github.com/#x15.4)时，它们才会被视为数组索引。

```
var smilies = {};//short for new Object();
smilies[":)"] = "smile.png";
smilies[":D"] = "smile-big.png";
smilies[":p"] = "tongue.png";
smilies["[sheep]"] = "sheep.png";
smilies["<3"] = "love.png";
smilies["[love]"] = "love.png"; 
```

您可能对使用 Explosion Pills 建议的答案所建议的文字语法感兴趣。只是为了澄清，`hasOwnProperty`仍然需要使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T17:39:50.500

我会这样做：

```
function parse_new_comment(commentElem) {
    commentElem.html(parse_comment(commentElem.text()));
}

function parse_comment(comment) {
    return comment.replace(/(\:\)|\:D|\:p|\[sheep\]|\<3|\[love\])/gi, function (match) {
        var smilies = {
                ":)": "smile.png",
                ":D": "smile-big.png",
                ":p": "tongue.png",
                "[sheep]": "sheep.png",
                "<3": "love.png",
                "[love]": "love.png"
        }
        return '<img src="images/smilies/' + smilies[match] + '" alt="" />';
    });
} 
```

[**小提琴**](http://jsfiddle.net/6bwZt/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T17:30:37.693

不要`Array`像对象一样使用和访问它。使用一个对象。您所看到的是使用对象访问语法访问 Array 方法的行为。您应该只使用数字键来访问数组。

```
var smilies = {
    ":)": "smile.png",
    ":D": "smile-big.png",
}; 
```

...等等。

您应该能够保持其余代码相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-30T18:04:01.643

我将使用动态创建正则表达式的实现（也可能更快）：

```
RegExp.escape = function(text) {
  return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
};

function SmileyParser(smiles) {
    var smilepatterns = [], k;
    for (k in smiles) {
        if (smiles.hasOwnProperty(k)) {
            smilepatterns.push(RegExp.escape(k));
        }
    }
    this.smiles = smiles;
    this.re_smiles = RegExp("(^|\\s)("+smilepatterns.join("|")+")($|\\s)", 'g');
}
SmileyParser.prototype.replace = function (text) {
    var smiles = this.smiles;
    function replacer(m, p1, p2, p3) {
        console.log(m);
        return p1
        +"<img src='/images/smiles/"+smiles[p2]+"'>"
        +p3;
    }
    return text.replace(this.re_smiles, replacer);
}; 
```

然后像这样使用：

```
var smiles = {
                ":)": "smile.png",
                ":D": "smile-big.png",
                ":p": "tongue.png",
                "[sheep]": "sheep.png",
                "<3": "love.png",
                "[love]": "love.png"
        };

var sp = new SmileyParser(smiles);
var text = 'This comment parses my smiley fine :)';
var newtext = sp.replace(text); 
```

`newtext`将会：

```
This comment parses my smiley fine <img src='/images/smiles/smile.png'> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T17:34:03.207

是的，你是对的，你的代码应该变成：

```
if(smilies[words[i]] !== undefined && (typeof smilies[words[i]]) == 'string'){ 
```

或者

```
if(words[i] in smilies && (typeof smilies[words[i]]) == 'string'){ 
```

# java - Android STT onResult 在 TTS onUtteranceCompleted 后未触发

> ID：15721356
> 
> 赞同：0
> 
> 时间：2013-03-30T17:27:53.487
> 
> 标签：java, android, text-to-speech, speech-to-text, onutterancecompleted

我正在尝试制作一个为视力障碍者提供方向的应用程序。该应用程序将提供说明（使用 TTS）并获取用户命令（使用 STT）。这是我的 MainActivity 的代码

```
//InteractionCompletedEvent is my custom event for callback
public class MainActivity extends Activity implements InteractionCompletedEvent,TextToSpeech.OnUtteranceCompletedListener
{

TTS tts;
STT stt;
Handler mHandler;
int flag;
boolean answer = false;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    stopService(new Intent(MainActivity.this,StartServices.class));
    mHandler = new Handler();

    try
    {
        stt = new STT(this,this);
        tts = new TTS(this,this,this);
        mHandler.postDelayed(new Runnable() {
        public void run() 
        {
            tts.Speak("Welcome to my application");
        }}, 1000);
    }
    catch(Exception e)
    {

    }
}

//event button clicked on "Save Place"
public void savePlaceOnClick(View v)
{
    flag = 1;
    answer = true;
    tts.Speak("Do you want to save this place ?");
}

//event button clicked on "Start Navigation"
public void navigationOnClick(View v)
{
    flag = 2;
    answer = true;
    tts.Speak("Do you want to go to some place ?");
}

//Callback from my STT.java
public void onListeningCompleted() {
    tts.Speak("on listening completed ?");
    if(stt.matching("yes"))
    {
        if(flag == 1)
        {
            tts.Speak("Let's save this place !");
        }
        else if(flag == 2)
        {
            tts.Speak("Let's find place !");
        }
    }
    else if(stt.matching("no"))
    {
        tts.Speak("action canceled");
    }
    else
    {
        tts.Speak("Please repeat your answer");
    }
}

public void onUtteranceCompleted(String utteranceId) {
    if(answer)
    {
        try{
            answer = false;

            stt.start();
        }
        catch(Exception e)
        {
        }
    }
}
} 
```

我的 STT.java

```
public class STT implements RecognitionListener{

SpeechRecognizer speech;
ArrayList<String> data = null;
Intent intent;
InteractionCompletedEvent event;
private boolean dataReady;

public STT(Context con,InteractionCompletedEvent event)
{
    this.event = event;
    speech = SpeechRecognizer.createSpeechRecognizer(con);
    speech.setRecognitionListener(this);
    intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,con.getPackageName());
    intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS,2000);
}

public void start()
{
    data = null;
    final ToneGenerator tg = new ToneGenerator(AudioManager.STREAM_NOTIFICATION, 100);
    tg.startTone(ToneGenerator.TONE_PROP_BEEP);
    speech.startListening(intent);
}

public void stop()
{
    speech.stopListening();
}

public ArrayList<String> getresult()
{
    return data;
}

public void onResults(Bundle hasil) {
    data = hasil.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
    final ToneGenerator tg = new ToneGenerator(AudioManager.STREAM_NOTIFICATION, 100);
    tg.startTone(ToneGenerator.TONE_PROP_BEEP2);
    event.onListeningCompleted();
}

public boolean resultAvailable() {
    if(data == null) {
        return false;
    }
    else {
        return true;
    }
}
public boolean matching(String match)
{
    for(int i = 0; i< data.size() ; i++)
    {
        if( data.get(i).equalsIgnoreCase(match) )
        {
            return true;
        }
    }
    return false;
}
} 
```

和我的 TTS.java

```
public class TTS implements TextToSpeech.OnInitListener{
private TextToSpeech tts;
Context c;
InteractionCompletedEvent event;
HashMap<String, String> myHashAlarm;
OnUtteranceCompletedListener ouct;

public TTS(Context context, InteractionCompletedEvent event,OnUtteranceCompletedListener ouct)
{
    c = context;
    tts = new TextToSpeech(c, this);
    this.event = event;
    this.ouct = ouct;
}

public void Speak(String words)
{
    Intent intent = new Intent();
    intent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);

    myHashAlarm = new HashMap<String, String>();
    myHashAlarm.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, "utteranceId");
    tts.speak(words, TextToSpeech.QUEUE_FLUSH, myHashAlarm);
}

@Override
public void onInit(int initStatus) {
    if (initStatus == TextToSpeech.SUCCESS) 
    {
       if(tts.isLanguageAvailable(Locale.US)==TextToSpeech.LANG_AVAILABLE)
          tts.setLanguage(Locale.US);

        tts.setOnUtteranceCompletedListener(ouct);
    }
    else
    {
    }
}

public void stop()
{
    tts.stop();
} 
} 
```

没有 onUtteranceCompletedListener，它工作得很好（STT onResult 被触发）。但是在 onUtteranceCompleted 之后，我无法触发任何 STT onResult。

注意：我正在使用 onUtteranceCompletedListener（已弃用），因为我的测试设备处于 API 级别 10（Android 2.3.3）

编辑：TTS onUtteranceCompleted 被解雇就好了，问题只是 STT onResult 无论如何都不会被解雇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:36:47.393

answer is false and you never set it to true in any of the code, thus sst is never start. Thus there is no speech recognition to begin with.

```
public void onUtteranceCompleted(String utteranceId) {
if(answer) 
{
        **// this if block is never reached.**

        try{
        answer = false;

        stt.start();
    }
    catch(Exception e)
    {
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:01:27.443

Okay so I think I found the problem, I debugged the app on Jellybean (4.2.2) and the app crashed, then I tried to change the deprecated interface (onUtteranceCompletedListener) into onUtteranceProgressListener (only works on API lv 15+) and it worked just fine, so here is my conclusion:

This problem MIGHT be caused by the deprecated interface, possibly a bug, that could be the reason for the interface's deprecation

# security - Yammer background authentication without user/browser session

> ID：15721360
> 
> 赞同：2
> 
> 时间：2013-03-30T17:28:16.990
> 
> 标签：security, yammer

I'm trying to build a background application without user interaction, which would synchronize data with Yammer. The problem is - how to authentication it with Yammer, given that there is no user and no browser session. My understanding is that Yammer has no support for this type of applications, running in server background. Is there any workaround?

UPDATE: I've taken a look at Google implementation. They seem to be using OAuth 2.0 "refresh tokens", while it is still necessary to authenticate with browser UI for the first time. Yammer seem not to have those "refresh tokens", but they also don't set validity time for access tokens. This leads me to conclude, that it is necessary to give such "background" apps access token for the first time through some administrative UI, keeping them using this token (or "refresh" token) while they run in background. Is this a valid conclusion?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T22:09:25.773

You need to have a user that is able to to access Yammer via their browser to acquire an OAuth token. Once this has been acquired that token is long lived and will be killed off if a user is suspended, or they manually revoke the token.

If I was developing an application that did some kind of background processing:

*   I'd present the user with a way to authenticate in the app.
*   Then I would take the user through the [OAuth flow](https://developer.yammer.com/oauth2-quickstart/) and acquire a token.
*   Finally I'd persist the token acquired for this background user.

This might require you to setup a "service" account in a Yammer network, but that's generally not too big a problem. I guess it depends on what you are trying to build.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T21:00:41.967

My understanding was same as yours and I had built a custom .Net Web Application that was using Yammer access token. My application was working fine with this access token for more than a month and then, it suddenly stopped working.

After some analysis, I found that the access token had changed. Not sure why and how that happened.

# python - 使用 JSON 保存 Python 元组

> ID：15721363
> 
> 赞同：51
> 
> 时间：2013-03-30T17:28:56.153
> 
> 标签：python, json, tuples

我对此还是有点陌生​​，所以我可能不知道所有事物的常规术语：

使用 JSON 编码时是否可以保留 Python 元组？现在`json.loads(json.dumps(tuple))`给我一个清单。我不想将我的元组转换为列表，但我想使用 JSON。那么，有选择吗？

原因：我正在创建一个使用多维数组的应用程序，并不总是相同的形状。我有一些使用递归来探测数组并将端点转换为字符串或整数的类方法。我最近意识到（基于我的递归工作方式）我可以使用元组来防止对数组进行更深层次的递归搜索（Python rawks）。在我确信我不需要深入研究我的数据结构的情况下，这可能会派上用场。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-30T17:58:24.290

您可以编写高度专业化的编码器和解码器挂钩：

```
import json

class MultiDimensionalArrayEncoder(json.JSONEncoder):
    def encode(self, obj):
        def hint_tuples(item):
            if isinstance(item, tuple):
                return {'__tuple__': True, 'items': item}
            if isinstance(item, list):
                return [hint_tuples(e) for e in item]
            if isinstance(item, dict):
                return {key: hint_tuples(value) for key, value in item.items()}
            else:
                return item

        return super(MultiDimensionalArrayEncoder, self).encode(hint_tuples(obj))

def hinted_tuple_hook(obj):
    if '__tuple__' in obj:
        return tuple(obj['items'])
    else:
        return obj

enc = MultiDimensionalArrayEncoder()
jsonstring =  enc.encode([1, 2, (3, 4), [5, 6, (7, 8)]])

print jsonstring

# [1, 2, {"items": [3, 4], "__tuple__": true}, [5, 6, {"items": [7, 8], "__tuple__": true}]]

print json.loads(jsonstring, object_hook=hinted_tuple_hook)

# [1, 2, (3, 4), [5, 6, (7, 8)]] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-30T17:32:04.257

不，这是不可能的。JSON 格式中没有元组的概念（请参阅[此处](http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example)了解 JSON 中存在哪些类型的简明细分）。Python 的`json`模块将 Python 元组转换为 JSON 列表，因为这是 JSON 中最接近元组的东西。

您在这里没有详细介绍您的用例，但是如果您需要存储包含元组的数据结构的字符串表示形式，那么您会立即想到一些可能性，根据您的情况，这可能合适也可能不合适：

1.  创建自己的编码和解码函数
2.  使用[pickle](http://docs.python.org/3/library/pickle.html)（小心；`pickle.loads`在用户提供的输入上使用不安全）。
3.  使用[`repr`](http://docs.python.org/3/library/functions.html#repr)and[`ast.literal_eval`](http://docs.python.org/3/library/ast.html#ast.literal_eval)代替`json.dumps`and `json.loads`。`repr`将为您提供外观上与 相当相似的输出`json.dumps`，但`repr`不会将元组转换为列表。`ast.literal_eval`是一个功能更弱、更安全的版本，[`eval`](http://docs.python.org/3/library/functions.html#eval)它只会解码字符串、数字、元组、列表、字典、布尔值和`None`.

选项 3 可能是您最简单和最简单的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-13T19:41:52.980

python 列表和元组之间的主要区别在于可变性，这与 JSON 表示无关，只要您不打算在 JSON 列表为文本形式时修改其内部成员。您可以将返回的列表转换为元组。如果您不使用任何自定义对象解码器，则您必须考虑的唯一结构化数据类型是 JSON 对象和数组，它们以 python 字典和列表的形式出现。

```
def tuplify(listything):
    if isinstance(listything, list): return tuple(map(tuplify, listything))
    if isinstance(listything, dict): return {k:tuplify(v) for k,v in listything.items()}
    return listything 
```

如果您专门进行解码，或者希望某些 JSON 数组是 python 列表而其他的是 python 元组，则需要将数据项包装在注释类型信息的 dict 或元组中。这本身是一种影响算法控制流的更好方法，而不是基于某事物是列表还是元组（或其他可迭代类型）的分支。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-28T02:09:21.217

它与 simplejson

```
import simplejson

def _to_json(python_object) :
    if isinstance(python_object, tuple) :
        python_object = {'__class__': 'tuple',
                         '__value__': list(python_object)}
    else :
        raise TypeError(repr(python_object) + ' is not JSON serializable') 

    return python_object

def _from_json(json_object):                                   
    if json_object['__class__'] == 'tuple':
        return tuple(json_object['__value__'])
    return json_object

jsn = simplejson.dumps((1,2,3), 
                       default=_to_json, 
                       tuple_as_array=False)

tpl = simplejson.loads(jsn, object_hook=_from_json) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-12T12:02:41.470

Pavel Anossov 很好地回答了这个问题。要对元组等对象进行编码，代码可以工作。将元组作为 Python dict 键也很有用，并且上面的代码没有将元组作为 dict 键处理。要将元组作为键进行管理，可以使用表示元组是否为 dict 键的布尔标志，并且元组被包装在 json.dumps(...) 输出层中；在解码期间，json 通过递归处理。

解决方案可以允许传递元组与值的数据结构，从而更容易散列。Python`def __hash__(self):`经常返回对象中项目元组的哈希值，有时使用不包含在类中的更简单的数据结构很有用。

1.  hint_tuples 可以有一个命名参数 dict_key - 元组的标志是一个字典键。Python dict 类型不能作为 dict 的键，最好使用 json.dumps(...) 将其转换为字符串，在解码期间应将其恢复为 dict，并且递归应注意将其转换为元组。
2.  可选地`__tuple__`可以被混淆，以便如果有人将字符串编码`__tuple__`为 dict 键的一部分，它可以通过编码器/解码器。

下面的代码是我想出的用于在 Python dict 键中编码元组的方法。包括几个基本测试作为`__main__`演示解决方案的一部分。放弃编码输出的可读性以增加通过解决方案的案例数量。

```
 # Pavel Anossov's solution hinted this:

    import json
    tuple_signifier = '__tuple__s_i_g_n_i_f_i_e_r__'

    class StreamTuple(dict):
         def __hash__(self):
             return hash(str(self))

    class MultiDimensionalArrayEncoder(json.JSONEncoder):
        def encode(self, obj):
            def hint_tuples(item, dict_key=False):
                global tuple_signifier
                ret_val = None
                if isinstance(item, tuple):
                    if dict_key:
                        ret_val = json.dumps(dict(
                            [(
                                tuple_signifier,
                                json.dumps(hint_tuples(list(item))),
                            ),],
                        ))
                    else:
                        ret_val = dict(
                            [(
                                tuple_signifier,
                                json.dumps(hint_tuples(list(item))),
                            ),],
                        )

                elif isinstance(item, list):
                    ret_val = [hint_tuples(e) for e in item]
                elif isinstance(item, dict):
                    ret_val = dict([
                        (hint_tuples(key, dict_key=True), hint_tuples(value))
                        for key, value in item.items()
                    ])
                else:
                    ret_val = item
                return ret_val
            return super(MultiDimensionalArrayEncoder, self).\
                         encode(hint_tuples(obj))

    def hinted_tuple_hook(obj):
        global tuple_signifier

        ret_val = {}
        if tuple_signifier in obj:
            ret_val = tuple(json.loads(obj[tuple_signifier], object_hook=hinted_tuple_hook,))
        else:
            for k, v in obj.items():
                inner_k = k
                inner_v = v
                if isinstance(k, str) and tuple_signifier in k:
                    inner_k = json.loads(k, object_hook=hinted_tuple_hook,)
                if isinstance(v, str) and tuple_signifier in v:
                    inner_v = json.loads(v, object_hook=hinted_tuple_hook,)
                ret_val[inner_k] = inner_v
        return ret_val

    #
    # Some tests that show how to use the above hinted tuple hook to encode 
    # / decode Python tuples.
    #
    if __name__ == '__main__':
        enc = MultiDimensionalArrayEncoder()
        test_input_1 = (2,)
        test_input_2 = {(2,): 'a'}
        test_input_3 = {'a': {(2,): {1:'a'}}}
        print('test_input_1 encoded:', enc.encode(test_input_1), test_input_1)
        print('test_input_1 decoded:',
            json.loads(enc.encode(test_input_1),
                object_hook=hinted_tuple_hook,)
        )
    #"""
        print('test_input_2 encoded:', enc.encode(test_input_2))
        print('test_input_2 decoded:',
            json.loads(enc.encode(test_input_2),
                object_hook=hinted_tuple_hook,)
        )

        print('\n' * 3)
        print('test_input_3 encoded:', enc.encode(test_input_3))
        print('test_input_3 decoded:',
            json.loads(enc.encode(test_input_3),
                object_hook=hinted_tuple_hook,)
        )

        print('\n' * 3)
        test_input_4 = {'a': 'b'}
        print('test_input_4  encoded:', enc.encode(test_input_4))
        print('test_input_4 decoded:',
            json.loads(enc.encode(test_input_4),
                object_hook=hinted_tuple_hook,)
        )

        #""" 
```

# cfml - 禁用查询的 HTML 输出

> ID：15721368
> 
> 赞同：3
> 
> 时间：2013-03-30T17:29:06.330
> 
> 标签：cfml

我创建了一个表单（在 ColdFusion 中），它将一个值提交到数据库中，然后显示插入的值。问题是当用户或黑客插入 HTML 标签或 javascript 标签时，ColdFusion 也会将其显示为输出值。

我知道有一些方法可以过滤使用 CFset 提交的特殊字符，但我不想使用那种方法。所以不是这样的：

```
<cfset cleanmessage = ReReplace(getmessages.message, "[^\w]*", "", "ALL")> 
```

显示输出时是否有其他方法*仅*过滤特殊字符 (<@#!$%^*(&>)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:36:42.957

您应该（至少）做这两件事来清理用户输入：

1.  使用 为 SQL 清理数据`<cfqueryparam ... >`。这通过转义特殊的 SQL 字符和序列来防止 SQL 注入攻击。
2.  在显示数据时使用`HTMLEditFormat()`. 这通过转义特殊的 HTML 字符来防止各种客户端漏洞。

如果您想进一步提高安全性，[Portcullis](http://portcullis.riaforge.org/)看起来是一个很好的解决方案（虽然我自己没有使用过）。

关于使用`<cfset ... >`：您可以使用类似`HTMLEditFormat()`不使用的功能`cfset`。无需创建新变量来存储函数的结果，只需在调用函数时显示结果，如下所示：`<cfoutput>#HTMLEditFormat(data)#</cfoutput>`

# vim - Vim 高亮嵌套区域

> ID：15721369
> 
> 赞同：0
> 
> 时间：2013-03-30T17:29:14.420
> 
> 标签：vim, vim-syntax-highlighting

我已经使用 vim 几个月了，我仍然在尝试改善我对这个伟大编辑器的体验。

我尝试做的是为香料网表（电子资料）创建一个语法高亮文件。

我试图强调以下模式：

> .SUBCKT or_gate AB OUT

（*or_gate* 是该单元的单元
*A*、*B*和*OUT* bieng 引脚的名称）

我尝试做的是用 3 种不同的颜色突出显示它：

*   一个用于 .SUBCKT
*   一个用于 or_gate （单元格）
*   一个用于 A、B 和 OUT（引脚）

所以我正在查看以 .SUBCKT 开头的行，并试图找到一种方法来匹配该行的不同单词。

我尝试了很多不同的**syn match**组合或嵌套**syn region**但我只是觉得我做错了。

这是我尝试之一的示例：

> **syn region** spiceCKT **start** ="\.SUBCKT" **end** ="$"**包含**=spiceCell,spicePins
> 
> **syn region** spiceCell **start** ="\.SUBCKT"rs=e **end** ="$"**包含**
> 
> **syn region** spicePins **start** ="\.SUBCKT\s\S*"rs=e **end** ="$"**包含**

I tried to play with the pattern (\s\S*), to add/remove the rs=e parts, or even to define the *start* or *end* patterns adding \zs and \ze.

In the end I did not manage to make it work and I just feel like I'm making it way more complicated that it should be.

Anyone could help me figuring out what are my mistakes and how to handle such pattern highlighting?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:47:49.917

You could try `syn match` with `look-behind`:

```
syn match spiceCKT /^\s*\.SUBCKT/
syn match spiceCell /\v(^\s*\.SUBCKT\s+)@<=or_gate/
syn match spicePins /\v(^\s*\.SUBCKT\s+or_gate\s+)@<=A B OUT/ 
```

I just did a small test. I don't have your syntax groups, I just tried with default groups, it looks like this:

![enter image description here](../Images/0131fc418908b5ccb593a6cd73e536b9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:43:27.023

Thank you for your answer! It does work. Thank you for the tip.

The only drawback is that it's a bit slow when the file has to load complete lines.

I complete your code to fit my needs:

> syn match spiceCKT /^\s*.SUBCKT/
> 
> syn match spiceCell /\v(^\s*.SUBCKT\s+)@<=\S*\s+/
> 
> syn match spicePins /\v(^\s*.SUBCKT\s+or_gate\s+)@<=(\s*\S*)*/

The lines with @<= are making the screen a bit laggy when I scroll down. I'm still trying to work on it.

# markdown - 如何确保在 Markdown 中保留空格？

> ID：15721373
> 
> 赞同：73
> 
> 时间：2013-03-30T17:29:30.810
> 
> 标签：markdown

目前，我在 Markdown 文件中有这一行，详细说明了命令输出：

```
1\. Work (00:10:00)  
    1\. Mail letter (00:05:00, Est. 00:03:00)  
      Send letter to Foo Bar  
2\. Personal (00:02:00) 
```

但是，当我预览 Markdown 文件时，所有的空格都会被忽略。

> 1\. 工作 (00:10:00)
> 1\. 邮寄信件 (00:05:00, Est. 00:03:00)
> 寄信给 Foo Bar
> 2\. 个人 (00:02:00)

如何保留此空白？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-30T17:31:55.773

Markdown 主要用于生成 HTML，默认情况下 HTML 会折叠空格。使用`&nbsp;`而不是空格字符。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-01-14T00:23:54.477

# 使用不间断的空格

要在 Markdown 文档中保留空格，请使用不间断空格：
*“防止连续空白字符折叠成单个空格的空格字符，并防止在其位置自动换行*”。

## 例子

[在此处](http://tpcg.io/1VgtlFdW)查看在线和可编辑的示例。

这条线在很多地方都使用了不间断的空格；他们没有倒塌。
                                   无需使用代码块。

这条线在很多地方使用了很多连续的空格；他们都崩溃了。

**注意：**
复制和粘贴前面的示例无法正常工作，因为有时不间断空格会在复制粘贴操作中更改为普通空格:-(。

## 或托盘桌

但是，如果您打算使用不间断空格来对齐文本，则更喜欢使用表格。

示例代码：

```
| Country  | Capital |
| -------- | --------|
| Portugal | Lisbon  |
| Spain    | Madrid  |
| Cuba     | Havana  | 
```

但并不是所有的 Markdown 实现都能识别前面的语法。

## 如何引入非中断空间？

*   在 macOS 中，您需要按 `⌥ Opt`+`Space`
*   在 Windows 中，有时工作 `Alt`+ `0`+ `1`+ `6`+`0`或 `Alt`+ `2`+ `5`+`5`
*   在众多商业软件中 `Ctrl`+`Space`
*   在 Linux 中，Compose 键已启用 `Compose` `Space` `Space`

这个解决方案的美妙之处在于您不需要在 Markdown 文档中使用任何代码。例如，在 HTML 中，您必须使用`&nbsp;`.

**PS:**
Reader, please, let us know in the comments is this method does not work in your particular markdown editor. I have tested this method in two apps and several online editors.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2020-03-05T12:31:17.037

One alternative is to use

`<pre></pre>`

like:

```
<pre>

    1 
   / \ 
  2   2 
 / \ / \ 
3  4 4  3 
</pre> 
```

the pyramid will be preserved.

Of cause, you can use `&nbsp;` . I use them both, depending on needs.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-20T20:35:19.457

I find `&nbsp;` very cumbersome to use, ie. if you have large document, it may become ugly for edit, and you would need lot's of copy pasting of `&nbsp;`, and in the end you will also need to adjust indentation.

instead use 3 accents (```) to denote code (well, you only care about indentation and whitespace here).

**for example this is how text looks without any formatting:**

Enabled = "True"

Profile = ("Domain", "Private")

Direction = "OutBound"

RemotePort = ("8080", "8081")

LocalPort = ("9080", "9081")

**And this is how it looks with `&nbsp;` doing quick copy paste**

Enabled      = "True"

Profile      = ("Domain", "Private")

Direction      = "OutBound"

RemotePort      = ("8080", "8081")

LocalPort      = ("9080", "9081")

**And here is my sulution, very simple, quick and effective:**

```
Profile               = ("Domain", "Private")
Direction             = "OutBound"
RemotePort            = ("8080", "8081")
LocalPort             = ("9080", "9081")```

**EDIT:**

This last example is surrounded by 3 accents at the beginning and at the end, ex:
(```)
your text here
(```) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-02-10T21:06:56.637

In vscode, add the extension "Trailing Spaces." Then to exclude by syntax, go to Preferences > Settings and check Markdown>Preview:Breaks or in settings.json, add `"markdown.preview.breaks": true`

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-10-09T12:34:33.000

1.  如果它尚未退出，则`Markdown.sublime-settings`在`Packages > User`（在 mac OSX 中）中创建一个新文件。`Preferences → Browse Packages...`

2.  将以下内容添加到`Markdown.sublime-settings`

```
 {  
        "trim_trailing_white_space_on_save": false  
    } 
```

**注意**：您可以使用您想要创建的任何其他语言特定设置来执行相同的技巧）。

# c++ - 在循环中使用多个 _kbhit()

> ID：15721376
> 
> 赞同：0
> 
> 时间：2013-03-30T17:29:52.307
> 
> 标签：c++, kbhit

我有一个 Spaceship 对象，它有 2 种方法。第一种方法是 move()

```
char touche;

if(_kbhit() != 0)
{
    touche = _getch();
    if(touche == 'k' || touche == 'l')
    {
        modifyPosition(touche);
    }
} 
```

第二种方法是shoot()

```
char touche;

if(_kbhit() != 0)
{
    touche = _getch();
    if(touche == char(32))
    {
        if(nbLasers < 30)
        {
            addLaser();
            compteur++;
        }
    }
} 
```

这两种方法都会在一段时间内被调用，一个接一个，所以第二种方法几乎永远不会起作用，因为我需要在它通过 move() 方法之后准确地按下“空格”。我想把这两种方法分开，有没有办法让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:34:14.557

一种简单的方法是制作一种新方法`read_keyboard()`。

该函数应该**存储**键盘状态，而您的其他方法可以读取该存储状态。

```
if(_kbhit() != 0)
{
    // I'm only explicitly writing "this->" to show that it's a member variable.
    this->touche = _getch();
}
else
{
    this->touche = 0;
} 
```

例如，`move`现在简单地变成：

```
if(touche == 'k' || touche == 'l')
{
    modifyPosition(touche);
} 
```

# facebook - 像localy一样实现facebook进行测试

> ID：15721381
> 
> 赞同：1
> 
> 时间：2013-03-30T17:30:16.213
> 
> 标签：facebook, facebook-like

我从[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)得到了我的“like-code” 。由于某种原因它不起作用。

我看到这是谷歌开发工具的问题之一。

```
GET file://connect.facebook.net/en_US/all.js#xfbml=1 
```

是否可以从未部署在服务器上的 html 页面测试类似按钮？

```
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>Cats Who Code demo</title>
<link href="col.css" type="text/css" rel="stylesheet" media="screen">
<script src="http://connect.facebook.net/en_US/all.js"></script>

</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.mysite.com" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="arial"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:21:46.890

只需部署在本地主机上。这样可行。

# windows-8 - Comparing Image.Source

> ID：15721393
> 
> 赞同：2
> 
> 时间：2013-03-30T17:31:18.890
> 
> 标签：windows-8, windows-runtime, winrt-xaml

In WinRT app I have 2 different images but with the same source:

```
 <Image Name="image1" Source="mySource.png"/>
 <Image Name="image2" Source="mySource.png"/> 
```

When I compare image1.Source with image2.Source it returns false . How to compare Sources so as to get true if they show the same picture?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:56:29.717

You have to cast the `Source` objects as bitmaps. Then you can compare the `AbsoluteUri`:

```
BitmapImage bm1 = (BitmapImage)image1.Source;
BitmapImage bm2 = (BitmapImage)image2.Source;

bool same = 
    (string.Compare(bm1.UriSource.AbsoluteUri, bm2.UriSource.AbsoluteUri) == 0); 
```

# ruby - Guard：批量观看通知

> ID：15721402
> 
> 赞同：5
> 
> 时间：2013-03-30T17:32:05.633
> 
> 标签：ruby, guard

是否可以批量发送[警卫的](https://github.com/guard/guard) `watch`通知？

例如，如果移动子文件夹，`watch`则为每个文件发出一个事件。如果有变化，我真正想要的是一个通知，而不是几个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-14T20:20:58.797

虽然这不会批量更改，因此没有这样做的所有好处，但如果您需要做的只是在一次保存多个文件后防止多次构建，您可以使用如下的去抖动机制：

```
LAST_REBUILD = Time.now
DEBOUNCE = 2 #seconds
guard :shell do
  watch(%r{PATTERN}) do |m|
    since_last = Time.now - LAST_REBUILD
    if since_last > DEBOUNCE
      n 'Rebuilding'
      if system('LONG_RUNNING_PROCESS')
        n 'Build complete'
        LAST_REBUILD = Time.now
      end
    else
      n "Skipping rebuild after only #{since_last} seconds"
  end
end 
```

# scons - 使用 Scons 从命令行修改多个变量的默认值？

> ID：15721406
> 
> 赞同：0
> 
> 时间：2013-03-30T17:32:48.193
> 
> 标签：scons

如何从命令行修改此多选项变量的默认值：

```
options = Variables()

options.Add(
    "FLAGS",
    "Compiler Flags.",
    ["-Wall", "-Werror", "-O2"]
) 
```

这没有做正确的事情：

> scons FLAGS=-Wall,-Werror

这是 scons 1.1.0 和 tcsh。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:01:29.363

我不确定这些函数是在哪个版本的 SCons 中引入的，并且它们可能在您的版本中不可用，但是您可以使用 ParseFlags() 和 MergeFlags()*自动*将命令行选项放入它们的构造变量中，如前所述[在这里](http://www.scons.org/doc/production/HTML/scons-user/c1818.html)。

# algorithm - 解释这个动态规划爬n-stair代码

> ID：15721407
> 
> 赞同：14
> 
> 时间：2013-03-30T17:33:11.460
> 
> 标签：algorithm, dynamic-programming

问题是

“你在爬楼梯。每次你可以走1级或2级。楼梯有n级。你可以用多少种不同的方式爬上楼梯？”

以下是此问题的代码解决方案，但我无法理解它。谁能解释我

```
int stairs(int n) {
  if (n == 0) return 0;
  int a = 1;
  int b = 1;
  for (int i = 1; i < n; i++) {
    int c = a;
    a = b;
    b += c;
  }
  return b;
 } 
```

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-30T17:38:58.037

好吧，首先您需要了解递归公式，以及我们如何从中得出迭代公式。

递归公式为：

```
f(n) = f(n-1) + f(n-2)
f(0) = f(1) = 1 
```

（`f(n-1)`一步，`f(n-2)`两步，总数是使用这些选项之一的方法的数量 - 因此是总和）。

如果你仔细看 - 这也是一个众所周知的系列 -[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)，并且解决方案只是从头开始计算每个数字，而不是一遍又一遍地重新计算递归，从而产生更有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-27T15:35:09.513

使用 DP 爬楼梯

```
class Solution {
   public:
     int climbStairs(int n) {
    int dp[n+1];

    if (n <= 1)
        return 1;

    if (n ==2)
        return 2;

    dp[0] = 1;
    dp[1] = 1;
    dp[2] = 2;

    for (int i = 3; i <=n; i++){
        dp[i] = dp[i-1]+dp[i-2];
    }

    return dp[n];
   }}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-22T01:32:15.950

In the act of write down the possible options of 1 step, 2 steps to reach a determined floor; For me, somebody saw that the number of combinations was exactly a number into the Fibonacci series. Then, this is the answer. There is a relation between the amount of options (2 options: 1 step, and 2 steps) and the amount of numbers summed to obtain the next number in the Fibonacci series: two numbers. Then if you try to solve a climbing stairs with for example 3 options (1 step, 2 steps, 3 steps) then the result is equivalent to adapt the Fibonacci series but summing 3 numbers, the series will be 0, 1, 1, 2, 4, 7, 13, 24\. I don't know if this series has a name but if you check, the result is correct.

Going back to the climbing stairs with 1-2 steps, for the next code, instead of using 3 variables or an array (other solutions that you can find on the web), I'm using an array as a stack. I pop the two previous numbers, calculate the current number in the series, then push the most recent of the previous numbers and then push the current number. These two numbers will be the previous numbers in the next cycle of the while loop.

```
 /**
 * Using Fibonacci and a stack.
 * @param {number} n
 * @return {number}
 */
const climbingStairs = (n) => {
    if (n === 0) return 0;
    if (n === 1) return 1;
    if (n === 2) return 2;

    let stack = [];
    stack.push(1);
    stack.push(2);
    let current_steps = 3;
    let current_combinations = 0;
    while (current_steps <= n) {
        let previous = stack.pop();
        let previous2 = stack.pop();
        current_combinations = previous + previous2;
        stack.push(previous);
        stack.push(current_combinations);
        current_steps++
    }
    return current_combinations
}

console.log(climbingStairs(5)); 
```

# java - 直接在java桌面应用中获取google drive api的授权码，无需用户显式复制

> ID：15721408
> 
> 赞同：1
> 
> 时间：2013-03-30T17:33:26.193
> 
> 标签：java, oauth-2.0, google-drive-api, google-oauth

我能够在**java中成功实现****google drive api**示例，如此处所述在此处[输入链接描述](https://developers.google.com/drive/quickstart-java#step_3_set_up_the_sample)。但是这里客户端/用户需要手动将 oauth 2 授权代码从 Web 浏览器复制并粘贴到桌面应用程序（这不是一个好的用户体验）。我不知道如何解决这个问题，即使用自动化这个过程爪哇代码。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:24:25.183

在这种情况下没有理想的解决方案，但这里有几个可行的解决方案： - 桌面应用程序可以运行嵌入式 Web 服务器，使用 localhost 重定向，在 Windows 上，您可能会遇到防火墙默认阻止访问 localhost 的问题，不确定 - 使用自定义方案，该方案可以在注册期间由桌面应用程序注册 - 代码是页面标题的一部分，此标题显示在操作系统控制的窗口标题中，您的应用程序可以启动外部浏览器然后跟踪进程及其主窗口**

# unix - 如何在 UNIX ssh 中将同一目录中除一个以外的所有文件移动到该目录中

> ID：15721409
> 
> 赞同：1
> 
> 时间：2013-03-30T17:33:32.943
> 
> 标签：unix, ssh, mv

如何在 UNIX ssh 中将同一目录中除一个以外的所有文件移动到该目录中？

例如。拥有备份目录并将所有其他文件移动到备份中

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:36:07.627

使用`rsync`是一种可能性

```
rsync -av from/ to/ --exclude=file_to_exclude 
```

有关该`rsync`命令的更多信息：http: [//linux.about.com/library/cmd/blcmdl1_rsync.htm](http://linux.about.com/library/cmd/blcmdl1_rsync.htm)

# c# - 使用 linq 连接/联合具有不同列的两个对象

> ID：15721412
> 
> 赞同：1
> 
> 时间：2013-03-30T17:34:10.550
> 
> 标签：c#, linq

我有两个对象，一个从 csv ( `fileAuto,first`) 创建，另一个从 datatable( `dbAuto,second`) 创建。两者都有`count`专栏。

我想在多列和结果中加入这两者，以包含第二个与第一个不匹配的项目，还包含该`count`列和第一个并将其添加到列表中。

我以为我想使用`.Except()`，但我不知道如何有一个比较器来比较多列。我认为 join 会起作用，但我收到一个错误，提示*join 子句中的表达式之一不正确*。

我对 Linq 有一个松散的理解，所以我不太确定如何实现这一点。我已经包含了后者的代码。

```
public class FileAuto
{
    public string DealerCode;        
    public string ModelCode;
    public int ModelYear;
    public string ExteriorCodeCode;
    public string InteriorColorCode;
    public int FileVehicleCount;
}

public class DbAuto
{
    public string DealerCode;
    public string DealershipName;
    public string ModelCode;
    public int ModelYear;
    public string ExteriorCodeCode;
    public string InteriorColorCode;
    public int DbVehicleCount;
}

public class IDiscObj // INVENTORY DISCREPANCIES object
{
    public string DealerCode;
    public string DealershipName;
    public string ModelCode;
    public int ModelYear;
    public string ExteriorCodeCode;
    public string InteriorColorCode;
    public int FileVehicleCount;
    public int DbVehicleCount;
}

var autoscombined = 
    from f in fileInv
    join d in dbInv
        on 
            new {f.DealerCode, f.ModelCode, f.ModelYear, f.ExteriorCodeCode, f.InteriorColorCode} 
        equals 
            new {d.DealerCode, d.ModelCode, d.ModelYear, d.ExteriorCodeCode, d.InteriorColorCode}
    select (a => new IDiscObj {
        DealerCode = f.DealerCode,
        DealershipName = d.DealershipName,
        ModelCode = f.ModelCode,
        ModelYear = f.ModelYear,
        ExteriorCodeCode = f.ExteriorCodeCode,
        InteriorColorCode = f.InteriorColorCode,
        FileVehicleCount = f.FileVehicleCount,
        DbVehicleCount = d.DbVehicleCount
        }); 
```

我也希望得到这些结果，并将按我在下面列出的经销商代码分组的车辆数量相加。如果有人能告诉我我是否在这些解决方案的正确轨道上或更合适的方式来实现这一点，那就太好了。

```
if (DDOlst.Count > 0) //list of IDiscObj 
{
    var ddos = 
        from d in DDOlst
        group d by new { d.DealerCode, d.DealershipName } into g
        select 
            new { 
                g.Key.DealerCode, 
                g.Key.DealershipName, 
                filecnt = g.Sum(d => d.FileVehicleCount), 
                dbcnt = g.Sum(d => d.DbVehicleCount) 
                };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:38:37.377

你不需要`a=>`在你的选择子句中：

```
var autoscombined = from f in fileInv
    join d in dbInv
    on new {f.DealerCode, f.ModelCode, f.ModelYear, f.ExteriorCodeCode, f.InteriorColorCode} 
        equals new {d.DealerCode, d.ModelCode, d.ModelYear, d.ExteriorCodeCode, d.InteriorColorCode}
    select new IDiscObj {
        DealerCode = f.DealerCode,
        DealershipName = d.DealershipName,
        ModelCode = f.ModelCode,
        ModelYear = f.ModelYear,
        ExteriorCodeCode = f.ExteriorCodeCode,
        InteriorColorCode = f.InteriorColorCode,
        FileVehicleCount = f.FileVehicleCount,
        DbVehicleCount = d.DbVehicleCount
    }; 
```

# jquery - 没有得到如何排队动画序列

> ID：15721418
> 
> 赞同：0
> 
> 时间：2013-03-30T17:34:30.070
> 
> 标签：jquery, jquery-animate

我正在编写一个小脚本。我差不多完成了，只需要做一些修改。在此处查看[演示](http://jsfiddle.net/nW5JW/1/)。我想要做的是，只有一个框应该说“你好朋友”，但如果你立即点击 2-3 个框，它会在多个框中显示“你好朋友”。

```
$(document).ready(function(){
$(".main").click(function(){

  if($('.active').length){
    // Slide down previous theater 
    $(this).animate({
        top: '+=0',
    }, 200, function() {
        $(".main").removeClass("active");
    });     
    $(".active").next("div").animate({
        top: '+=270',
    }, 200, function() {
    }); 
  }

    // slide up new theater
    $(this).animate({
        top: '-=0',
    }, 200, function() {
        $(this).addClass("active");
    });     
     $(this).next("div").animate({
        top: '-=270',
    }, 200, function() {
    }); 

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:38:20.440

如果您试图防止动画期间发生的快速点击，那么您可能需要`.stop(true, true)`在开始下一个动画之前停止任何现有动画。这保证了在您开始下一个动画之前它处于一致的状态。

一旦我在这里添加`.stop(true, true)`到您的每个动画：http: [//jsfiddle.net/jfriend00/uquB3/](http://jsfiddle.net/jfriend00/uquB3/)，那么快速点击就不会再混淆它了。

* * *

此外，动画`top: '+=0'`或`top: '-=0'`什么都不做。你告诉 jQuery 获取 top 的当前值并添加`0`到它没有可见的结果。

也许您的意思是取出`+=`并直接使用`top: 0`，或者您根本不需要该动画？

# ios - Loading a core data database without having the data model?

> ID：15721420
> 
> 赞同：0
> 
> 时间：2013-03-30T17:34:49.293
> 
> 标签：ios, database, core-data, xcdatamodel

Is it possible to load an existing core data database into an app and access it like a normal core data store if I don't have the corresponding .xcdatamodeld file? Is there a possibility to rebuild a fitting .xcdatamodeld from the database? Either per hand or programmatically? Thanks for your help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:47:00.787

If you have access to the Core Data database file generated by Core Data from the datamodel you don't have, it is a Sqlite database you can open in an [Sqlite database browser](http://sourceforge.net/projects/sqlitebrowser/). You may be able to inspect it and make queries into it, and possibly recreate a datamodel similar to it, but you will probably have to trick Core Data into thinking it's the same *version* as the original datamodel by copying the information in the version table from a database file created by Core Data with your new datamodel into the old database file.

# java - Java Client/Server 读写不工作且无错误

> ID：15721426
> 
> 赞同：0
> 
> 时间：2013-03-30T17:35:25.810
> 
> 标签：java, string, client-server, utf

客户端.java

```
package Client;

import java.io.*;
import java.net.*;

class Client {
        /*
     To send string to server use "out.print(data)"
     To use info sent from server use "in.readLine()"
     */
    int port = 1234;
    String hostname = "localhost";
    String input,output;

    public void send(String text) {
    try {
         Socket skt = new Socket(hostname, port);           /*Connects to server*/

         BufferedReader in = new BufferedReader(new
         InputStreamReader(skt.getInputStream()));          /*Reads from server*/
         System.out.println("Server:" + in.readLine());

         PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
         out.print(text);                                   /*Writes to server*/

         skt.close();
         out.close();    /*Closes all*/
         in.close();
      }

      catch(Exception e) {
         System.out.print("Error Connecting to Server\n");
      } 
    }
   public static void main(String args[]) {
     Client c = new Client();
     c.send("Server is online");    //sends message to server
   }
} 
```

服务器.java

```
package Server;

import java.io.*;
import java.net.*;

class Server {
    /*
     To send string to client use "out.print(data)"
     To use info sent from client use "in.readLine()"
     */
        int port = 1234;
    String input,output;

    public void send(String text) {
    try {
         ServerSocket srvr = new ServerSocket(port);
         Socket skt = srvr.accept();                    /*Waiting for Connection from client*/
         System.out.print("Server has connected!\n");

         PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
         out.print(text);                                                  /*Write/Send to Client*/

          BufferedReader in = new BufferedReader(new
            InputStreamReader(skt.getInputStream()));                   /*Read from Client*/
         System.out.println("Client:" + in.readLine());

         out.close();
         in.close();
         skt.close();               /*Closes all*/
         srvr.close();
      } catch( Exception e) {
         System.out.print("Error Connecting\n");
      } 
    }

   public static void main(String args[]) {
       Server s = new Server();
       s.send("Client is online");  //sends a message to client

   }
} 
```

`Server has connected!` 当我从服务器和客户端发送时，为什么除了任何 事情都没有发生

```
s.send("X is online"); 
```

哪个应该在另一边阅读并在cmd中打印出来？

（是不是因为 bufferreader 在 printwriter 之后被激活并且没有拾取它？如果是这样我该如何解决这个问题？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:43:04.050

`BufferedReader#readLine`除非您发送换行符，否则您的通话将无限期阻塞。代替

```
out.print(text); 
```

和

```
out.println(text); 
```

匹配`BufferedReader#readLine`来自客户端和服务器的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T17:40:09.113

一种可能性 - 看看这里的顺序：

```
 PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
 out.print(text);

 skt.close();
 out.close(); 
```

*在关闭writer*之前，您正在关闭*套接字*。这意味着如果写入器有任何缓冲数据，它就没有机会写入它。尝试切换关闭事物的顺序 -*最后*关闭套接字。

 **（通常你会把这些放在一个`finally`街区里，请注意......）

编辑：然后我注意到您没有在服务器端打印*一行*。您应该同时进行*这两项*更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:07:07.270

```
package client;

import java.io.*;
import java.net.*;

class Client {
        /*
     To send string to server use "out.print(data)"
     To use info sent from server use "in.readLine()"
     */
    int port = 1234;
    String hostname = "localhost";
    String input,output;

    public void send(String text) {
    try {
         Socket skt = new Socket(hostname, port);           /*Connects to server*/

         BufferedReader in = new BufferedReader(new
         InputStreamReader(skt.getInputStream()));          /*Reads from server*/
         System.out.println("Server:" + in.readLine());

         PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
         out.println(text);                                   /*Writes to server*/
         out.close();    /*Closes all*/
         in.close();
         skt.close();

      }

      catch(Exception e) {
         System.out.print("Error Connecting to Server\n");
      } 
    }
   public static void main(String args[]) {
     Client c = new Client();
     c.send("Server is online");    //sends message to server
   }
}
package server;

import java.io.*;
import java.net.*;

class Server {
    /*
     To send string to client use "out.print(data)"
     To use info sent from client use "in.readLine()"
     */
        int port = 1234;
    String input,output;

    public void send(String text) {
    try {

        ServerSocket srvr = new ServerSocket(port);
         Socket skt = srvr.accept();                    /*Waiting for Connection from client*/
         System.out.println("Server has connected!\n");

         PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
         out.println(text);                                                  /*Write/Send to Client*/

          BufferedReader in = new BufferedReader(new
            InputStreamReader(skt.getInputStream()));                   /*Read from Client*/
         System.out.println("Client:" + in.readLine());

       out.close();
         in.close();
         skt.close();              /*Closes all*/
        srvr.close();
      } catch( Exception e) {
         System.out.print("Error Connecting\n");
      } 
    }

   public static void main(String args[]) {
       Server s = new Server();
       s.send("Client is online");  //sends a message to client

   }
} 
```

上面的代码对我有用看看你是否遗漏了什么**

# ios - IOS - 获取 Xib 帧大小

> ID：15721430
> 
> 赞同：1
> 
> 时间：2013-03-30T17:35:59.767
> 
> 标签：ios, uiview, frame, xib, addsubview

在 myViewController.m 我试图添加一个名为*AlbumView*的自定义 UIView 作为子视图：

```
-(void)viewDidLoad {

 AlbumView *album = [[AlbumView alloc]init];

 [self.view addSubView:album];

 NSLog(@"album-frame: %@",NSStringFromCGRect(album.frame));

} 
```

NSLog 正在打印：*专辑帧：{{0, 0}, {0, 0}}*

由于 AlbumView 类具有以下 Xib，即使我没有使用任何 initWithFrame: 方法来初始化它，我在构建和运行我的应用程序时仍然可以看到它的大小正确。所以我想知道：

-**为什么在 viewDidLoad（或 viewDidAppear）中 NSLogging 时无法访问其正确的帧大小？**

![在此处输入图像描述](../Images/57f0e7a98c1ca3f219e25d411162898c.png)

**编辑：**以下是 Xib 类 - AlbumView.m

```
-(void)setupView{

    [[NSBundle mainBundle] loadNibNamed:@"AlbumView" owner:self options:nil];
    [self addSubview:self.view]; //where self.view is IBOutlet connected with the actual Xib view I posted above 

}

-(id)initWithFrame:(CGRect)frame{
    if((self = [super initWithFrame:frame])){
        [self setupView];
    }

    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder{
    if((self = [super initWithCoder:aDecoder])){
        [self setupView];
    }

    return self;
}

- (void) awakeFromNib
{
    [super awakeFromNib];

    [self addSubview:self.view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:46:25.403

您正在`AlbumView`通过向其发送`init`消息进行初始化，这相当于发送它`initWithFrame:CGRectZero`。然后，在您加载 nib 后，您无需更改框架以匹配 xib 的内容。试试这个：

```
-(void)setupView{
    [[NSBundle mainBundle] loadNibNamed:@"AlbumView" owner:self options:nil];

    // Make my frame size match the size of the content view in the xib.
    CGRect newFrame = self.frame;
    newFrame.size = self.view.frame.size;
    self.frame = newFrame;

    [self addSubview:self.view]; //where self.view is IBOutlet connected with the actual Xib view I posted above 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:30:45.227

```
// AlbumView.h

+ (instancetype)getView;

// AlbumView.m

+ (instancetype)getView {
    return [[[UINib nibWithNibName:@"AlbumView" bundle:nil] instantiateWithOwner:self options:nil] lastObject];
}

// myViewController.m

...

- (void)viewDidLoad {

 AlbumView *album = [AlbumView getView];

 [self.view addSubView:album];

 NSLog(@"album-frame: %@",NSStringFromCGRect(album.frame));

}

... 
```

# jsp - 从 JSP 中的外部 JAR 文件导入类

> ID：15721431
> 
> 赞同：0
> 
> 时间：2013-03-30T17:36:03.783
> 
> 标签：jsp, lucene

为了在 Lucene 索引中搜索，我通过 JSP 中的 Web 用户界面捕获了用户的查询。在 JSP 中，我编写了简短的 JAVA 代码来解析查询并调用 Lucene 索引搜索器来搜索查询。但问题是它反复给出编译错误，因为“无法解析查询，无法解析 MultiFieldQueryParser ...”。所以没有一个 Lucene 类得到解决。代码如下：

文件名：result.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" import="java.util.*,java.io.*,org.apache.lucene.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%! String query; %>
<%
    query=request.getParameter("myQuery");
%>
<form name="frm" method="post" action="result.jsp">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="22%">&nbsp;</td>
<td width="78%">&nbsp;</td>
</tr>
<tr>
<td>&nbsp; </td>
<td><input type="text" name="myQuery" placeholder="Type here"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input type="submit" name="submit" value="Submit"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</table>
</form>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<%
  Directory dir=new FSDirectory.open(new File(path of index directory));
  QueryParser parser=new MultiFieldQueryParser(Version.LUCENE_30, new String[] 
  {"title","address","city"},new BooleanClause.Occur[]{BooleanClause.Occur.MUST,
  BooleanClause.Occur.SHOULD, BooleanCaluse.Occur.SHOULD},new StandardAnalyzer());
  Query query=parser.parse(query);
  IndexSearcher searcher=new Indexsearcher(dir,true);
  TopDocs hits=searcher.search(query,20);
  searcher.close();
  dir.close();
%>
<p>Query phrase is : <%=query%></p>
</body>
</html> 
```

我不明白为什么即使在上面导入了 Lucene 之后，任何 Lucene 类都没有得到解决。所以我问是否有人可以帮我修复上面的代码。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:01:04.313

**经验法则：**导入 abc.xyz.* 只会导入包 abc.xyz 中的所有类，但不会导入包 abc.xyz.ijk 中的类。

例如：“org.apache.lucene.*”不会导入“org.apache.lucene.store.Directory”

要解决上述错误，请导入以下包/类。

1）“org.apache.lucene.store.Directory”或“org.apache.lucene.store.*”

2）“org.apache.lucene.queryParser.QueryParser”

3）“org.apache.lucene.queryParser.MultiFieldQueryParser”

4）“org.apache.lucene.search.BooleanClause”

5）“org.apache.lucene.analysis.standard.StandardAnalyzer”

6) org.apache.lucene.search.TopDocs

7) org.apache.lucene.search.IndexSearcher

我可能错过了一两节课。只需遵循“经验法则”并使用全长包名称导入缺失的类。

顺便说一句，**[永远不要在 JSP 中使用 scriptlet](https://www.coderanch.com/how-to/java/WhyNotUseScriptlets)**，即在 JSP 中直接使用 Java 代码。这是一个不好的方法。

您可以找到其他资源来更好地理解它。

# javascript - use r.js in order to optimize require.js files

> ID：15721433
> 
> 赞同：2
> 
> 时间：2013-03-30T17:36:14.627
> 
> 标签：javascript, jquery, requirejs, require, r.js

I am writing jquery plugin. Because the plugin contains a lot of code I decided to separate the code into several files and use require.js. I am trying to achieve two things:

1.  The ability to run my test page using require.js with the separated version of the plugin, and by this be able to debug the code.
2.  The ability to use require.js optimizer (called r.js) and create one optimized (combined and minified) file from those several plugin's files.

My index.html contains:

```
<script data-main="js/site" src="js/vendor/require.js"></script> 
```

My js/site.js contains:

```
require([
    'jquery',
    ....
    ....
    'main' //<---- main plugin file
], function($) {

    $(function() {
        $('#elem').photosGrid();
    });
}); 
```

And my main.js file contains:

```
define([
    'photos-grid' //<---- Class that initialized and build the plugin
], function(PhotosGrid) {
    jQuery.fn.photosGrid = function(options) {
        var photosGrid = new PhotosGrid(this, options);
        this.data('photosGrid', photosGrid);
        return this;
    };

    return jQuery;
}); 
```

In order to configure r.js, I added build.js file:

```
({
    baseUrl: '.',
    name: "main",
    out: "main-built.js"
}) 
```

When I run my index.html my plugin works great. But when I run `node r.js` I get the following error:

```
Error: Mismatched anonymous define() module 
```

When I define main.js with a name:

```
define('module-name', ['photos-grid'], function(PhotosGrid) { ..... 
```

`node r.js` returns no error but no output come out. Moreover, index.html don't load the dependencies of main.js ('photos-grid') and as a result the website doesn't work.

What am I doing wrong? How can I use r.js properly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:17:22.107

You forgot to pass the `-o` flag to run `r.js` in the optimizer mode! More details in the [official docs](https://github.com/jrburke/r.js#optimizer)

(...this seems to be [one of the most popular problems](https://stackoverflow.com/questions/15670655/amd-optimizer-r-js-doesnt-produce-any-output) with `r.js`)

# c# - 使用 Web 表单和 C# 的动态所需页面标题

> ID：15721435
> 
> 赞同：0
> 
> 时间：2013-03-30T17:36:27.610
> 
> 标签：c#, asp.net, html, css, web

我有一个文本框，用户可以在其中输入他们想要的页面标题并保存它。一旦他们保存它并且他们碰巧刷新了网站，网站标题应该填充他们保存的最后一个标题信息以显示，并且用户仍然可以更改它并重新保存。我正在使用网络表单：请问我该如何完成。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:39:51.720

如果您希望始终保留标题，则必须将其存储在数据库中并在页面加载时动态设置标题。如果您只在会话的剩余部分需要它，您可以将它存储在会话状态中。

我将完整的实现留给读者作为练习——因为在这个答案中涵盖的内容太多了:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:40:39.570

使用 !ISPostBack

见下面的代码

```
 protected override void OnPreInit(EventArgs e)
   {    
    if (!IsPostBack)
       {

       Page.Title = YourTextBox.Text;
       }

    } 
```

# jquery - 如何让 jQuery printElement 打印带有 css 类的 div？

> ID：15721437
> 
> 赞同：1
> 
> 时间：2013-03-30T17:36:41.787
> 
> 标签：jquery, css, printing

我正在尝试使用 printElement 插件打印一个 div。我打印了，一切都很好，除了它根本不打印 css 类。我已经尝试了很多事情，比如向打印元素添加一个类或添加 css 代码。

这是我没有的代码

```
<script type="text/javascript">
$("#print").click(function() {
    $("#fullReport").printElement(
    { 
    styleToAdd:'padding:10px; margin:10px; color:red; width:100%;'
    }
    );
});
</script> 
```

当我单击打印 div 时，这至少应该使 div 的颜色变为红色。打印预览不会改变颜色或宽度！

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T09:27:36.703

也许您还应该添加 printBodyOptions: { styleToAdd:'padding:10px; 边距：10px；红色; 宽度：100%；' 并确保您使用彩色打印机打印

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T16:41:53.887

打印页面颜色是浏览器中的一项设置，我认为没有办法强制浏览器打印被视为背景颜色的内容。

你需要做一个替代方案，比如使用背景图像来填充 DIV，或者使用服务器上的 COM 服务来获取页面的“快照”以转换为 JPG 或其他内容。

我使用基于 jQuery 的条形图软件遇到了这个问题。我最终做的是运行一个 COM 服务，我可以在将页面转换为 JPG 的服务器上调用该服务。

如果我必须再做一次，我可能只会使用重复的背景图像而不是颜色。

# css - 使 HTML 表格内联

> ID：15721438
> 
> 赞同：1
> 
> 时间：2013-03-30T17:36:42.510
> 
> 标签：css, html-table

我试图并排放置两张桌子：

```
<table class="inline">
</table>
<table class="inline">
</table> 
```

但是我分配给 inline 的 display 属性的值从 inline-table 到 inline 到 inline-block 都不起作用，所以我很难过，希望得到任何建议。我只发现了另一个相关问题：[如何使 HTML 表格内联](https://stackoverflow.com/questions/7457319/how-do-i-make-an-html-table-inline)，不幸的是，解决方案不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:47:29.930

默认情况下，表格是块级元素，您需要更改显示属性以每行获取两个或更多表格，例如：

```
<table class="inline">
    <tr><td>First table row 1</td></tr>
    <tr><td>First table row 2</td></tr>
</table>
<table class="inline">
    <tr><td>Second table row 1</td></tr>
    <tr><td>Second table row 2</td></tr>
</table> 
```

使用以下 CSS：

```
.inline { 
    outline: 1px solid blue;
    width: 49%;
    display: inline-block;
} 
```

您也可以使用`inline-table`，两者都给出相同的结果。如果不设置宽度，每个表格都会确定适合内容的最小宽度。如果设置宽度，则可以使两个表具有相同的宽度，这可能是可取的。

如果您尝试`display: inline`，表格宽度将缩小以适合内容，这在某些应用程序中可能更可取。在这种情况下，将忽略宽度设置。

我在下面的小提琴中展示了这三种情况。

小提琴参考：http: [//jsfiddle.net/audetwebdesign/m4fdG/](http://jsfiddle.net/audetwebdesign/m4fdG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:46:09.390

它不应该是：

```
<table class="inline">
</table>
<table class="inline">
</table> 
```

它应该是：

```
<table style="display:inline">
</table>
<table style="display:inline">
</table> 
```

# windows-phone-7-emulator - creating multiple instances of windows phone 7 emulator

> ID：15721439
> 
> 赞同：1
> 
> 时间：2013-03-30T17:36:46.900
> 
> 标签：windows-phone-7-emulator

Is it possible to create multiple instances of windows phone 7 emulator (need not be done simultaneously) ? I am designing an android app which acts as the client and will be used by multiple users (not simultaneously) and in the server side I have a windows console application in C#. I want to launch windows phone 7 emulator instance corresponding to each user.

Also, each time I launch the emulator, only Internet Explorer is present. The apps which I deployed previously using Application Deployment are not there.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:16:28.497

The following link may just be enough to solve your problem.

[http://dotnet.dzone.com/articles/how-run-multiple-instances](http://dotnet.dzone.com/articles/how-run-multiple-instances)

# javascript - Embedded tumblr image size

> ID：15721441
> 
> 赞同：0
> 
> 时间：2013-03-30T17:36:56.863
> 
> 标签：javascript, image, tumblr, image-size

I have just embedded my tumblr into my website (which is not visible to anyone yet), with this code:

`<script type="text/javascript" src="http://www.thegoodbad.tumblr.com/js" ></script>`

It worked out, and shows the posts BUT the problem is: it shows all the pictures on the website with a 400px width even though on my tumblr they are bigger.

So far I:

*   played around with the photo url, and changed it to high reslolution
*   tried to add some css code to my website
*   tried to use other tumblr themes with high resolution pictures

I read that tumblr hard-coded the pictures to max. 400px. I don´t know if I actually have to change something in my tumblr code to change the image size output or if I can change this in the code of the new site.

I am kinda new to all of this and so far I managed but now I would really appreciate some help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:46:33.330

You are correct that Tumblr "hard coded" the pictures to a maximum width of 400px, although their documentation says up to 500px. They didn't do this doing CSS; they did it by only serving you the 400px version of the picture, [as seen here](http://24.media.tumblr.com/tumblr_lsphpbVgA91qai041o1_400.jpg).

If you apply any CSS to these images to make them bigger, you'll only downgrade the quality of the image.

> [Note:](http://features.tumblr.com/post/1154189/uploading-images-to-use-in-themes) Based on Tumblr’s image resize, you will be limited to an image width of 500px unless you specify the width differently in the IMG tag.

# java - 循环的drawString没有出现在JFrame中

> ID：15721444
> 
> 赞同：1
> 
> 时间：2013-03-30T17:37:08.833
> 
> 标签：java, swing, jframe, drawstring

我正在尝试创建一个以`JFrame`从 4 到 24 的每个偶数字体大小显示一个字符串。为此，我正在尝试执行一个 for 循环，该循环创建一个`drawString`使用`Font`每次都会增加 +2 字体大小的 a 的 for 循环。试图通过获取上一个并将其添加到变量来将下一个`drawString`放置在上一个下方。但是，当程序运行时，它是空的。我哪里出错了？`getHeight()``y``JFrame`

```
import javax.swing.*;
import java.awt.*;

public class JFontSizeDemo extends JFrame {
    int x = 10;
    int y = 40;
    int heightOfFont;
    public void paint(Graphics g) {
        super.paint(g);
        for(int size = 4; size <= 24; size += 2) {
            g.setFont(new Font("Arial", Font.BOLD, size));
            g.drawString("Name", x, y);
            heightOfFont = g.getFontMetrics().getHeight();
            y += heightOfFont;
        }
    }
    public static void main(String[] args) {
            JFontSizeDemo frame = new JFontSizeDemo();
            frame.setSize(300, 300);
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:44:59.170

不要直接在`JFrame`顶级容器上绘画。使用`JComponent`或`JPanel`。覆盖`paintComponent()`绘画而不是`paint()`.

查看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)教程以获取更多详细信息和示例。

这是您的代码稍作修改的示例：

```
import javax.swing.*;
import java.awt.*;

public class FontSizeDemo {
    private static void createAndShowUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                int y = 0;
                for(int size = 4; size <= 24; size += 2) {
                    g.setFont(new Font("Arial", Font.BOLD, size));
                    g.drawString("Name", 0, y);
                    int heightOfFont = g.getFontMetrics().getHeight();
                    y += heightOfFont;
                }
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300); 
            }
        };

        frame.add(panel);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        frame.pack();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

除了引入`JPanel`用于绘画之外，还有一个快速的小`y`坐标修复，以确保重绘后文本保持在同一位置。还有`SwingUtilities.invokeLater`. 此外，通常根本不需要扩展`JFrame`。

# ajax - 构建功能类似于单页站点的多页站点是否有限制？

> ID：15721448
> 
> 赞同：3
> 
> 时间：2013-03-30T17:37:38.430
> 
> 标签：ajax, web-applications, seo, single-page-application

我决心将一个新项目构建为一个单页网站，但一位开发人员在考虑 SEO 时种下了怀疑的种子。我已经阅读了双方的大量文章，并了解了差异和注意事项。

但是，一旦用户最初登陆给定页面，就不能用多个页面构建一个站点，但可以作为一个页面站点运行吗？

看起来很简单，我想知道我是否忽略了一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:25:00.003

关键是不要在您的不同页面上重复内容，并且不会受到搜索引擎算法的重复内容惩罚。为了完成您的要求，我认为您必须在每个单独页面的内容中进行 AJAX，然后将其显示在您的单个交互式页面上。

# javascript - jQuery/Javascript 全局和局部变量混淆 - 基本

> ID：15721449
> 
> 赞同：3
> 
> 时间：2013-03-30T17:37:39.523
> 
> 标签：javascript, jquery, variables, global-variables

```
$(document).ready(function() {

var v = $("input[name=link]").val();

$('p').on('click', function () {
    console.log(v);
    console.log('hello'); 

})  
}); 
```

上面是我编写的 jQuery/JS 代码。它应该在输入字段中获取值，并在我单击段落时将其打印到控制台。

我已经声明`v`为全局变量，但它没有打印到控制台。仅当我将`var v`声明放入使其成为局部变量的函数中时，它才有效。为什么会这样？我认为全局变量总是应该在整个代码中起作用。请教育我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:39:34.627

这不是范围问题，`v`从您作为事件处理程序提供给 jQuery 的回调中可以完全看到。

您的代码的问题在于`v`，一旦文档准备好，就会立即对其进行评估。如果您更改输入的值，`v`则不会更改，如果最初为空，则它保持为空。`v`不是某种指向输入字段的指针，当输入改变时它没有理由改变。

要确保使用单击时字段的值，请使用以下代码：

```
$(document).ready(function() {
    $('p').on('click', function () {
        var v = $("input[name=link]").val();
        console.log(v);
        console.log('hello'); 
    })  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:40:45.363

`v`问题是您在更改文本后没有更改值`textbox`

准备好调用后，您将 textbox.ie 的值分配为空。

请参阅下面的代码如何工作。

```
 var v = 10;
   alert("" + v);
   myFunction();

    function myFunction()
       {
       v = 20;
       }

    alert("" + v); 
```

# android - 在 MALI 400 上使用 Android Videoplayer 获取 SurfaceTexture 时出现问题

> ID：15721450
> 
> 赞同：4
> 
> 时间：2013-03-30T17:37:45.950
> 
> 标签：android, opengl-es, android-video-player, mali

我编写了一个应用程序，它基本上使用此处许多帖子中的代码将视频渲染为纹理。我猜原件来自一些 nVidia 示例 (VideoSurfaceView) 在这里找到：[Using SurfaceTexture in Android](https://stackoverflow.com/questions/6414003/using-surfacetexture-in-android/14999648#14999648)

这个例子在移动设备和平板电脑上都能正常工作——两者都基于 Tegra。然后，我在基于 MALI 400 的 android 系统（Minix Neo5）上尝试了相同的代码，我可以看到视频播放，但主要是黑屏，上面有一些垃圾（只有 3 或 4 行）

我尝试使用 OpenGL ES 跟踪器检查从 SurfaceTexture 复制回纹理本身的内容，但看起来跟踪器无法正确显示它（无论是在 tegra 系统上还是在 tegra 设备上。请注意，我没有不会出现任何 OpenGL 错误或任何警告。看起来一切正常。

如果将任何内容复制到 TEXTURE_EXTERNAL ，是否有任何其他工具可以告诉我怎么办？所有 TEXTURE_2D 在示踪剂上都可用。

我在 MALI 系统上注意到的一件奇怪的事情是它根本无法播放高清视频。我的视频 1280x720 在调试器上报告他们正在使用 SoftwareRenderer。也许这就是为什么帧没有正确复制到将用作纹理的 OGL_IMAGE 的原因。

我想我需要更好地了解幕后发生的事情，但我预计会出现一个错误，告诉系统无法执行此操作，或者它应该可以正常工作，即使性能很差。也许这是 android 的修改版本，并且媒体播放器代码刚刚被破坏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:29:54.103

谢谢你的文章！这正是我在另外两台 Android 设备（均为 Mali-400 MP）上观察到的，我不知道为什么会发生这种情况。好像视频是在后台播放的。我在 GLSurfaceView 类的构造函数中添加了以下几行：

```
setEGLConfigChooser(8,8,8,8,0,0);
getHolder().setFormat(PixelFormat.RGBA_8888); 
```

然后视频在我的 OpenGL 场景“后面”可见。这两款设备都声称支持“GL_OES_EGL_image_external”扩展。

# mysql - In Rails ActiveRecord, why is one of the columns in my JOINed table throwing an error message?

> ID：15721452
> 
> 赞同：0
> 
> 时间：2013-03-30T17:37:46.507
> 
> 标签：mysql, ruby-on-rails, activerecord

I am trying to display data from a database via Rails ActiveRecord. Two relevant sections from my model are shown below. However, when I try to execute this, I am getting `undefined methodalert_message`. When I comment `outrecord.alert_message`, I don't get this error.

I am assuming that my `JOIN` is combining the two tables into one, and I think that means I could access the column named `alert_message` from the combined table. Why, then, is `alert_message` said to be undefined?

Thank you.

```
def maintenance_history
  MyRecord.where('my_records.org_id=?', self.org_id).order('vehicle_id')
end

self.my_history.joins("JOIN 
          alerts ON 
          my_records.id = my_record_id").group("box_id, 
          meter, alert_message, box_id").each do |record|
            # record.alerts.each do |item|
                csv << [record.id, 
                record.box.name,            
                number_with_precision(record.meter.to_s,
                         :precision => 0, :delimiter=> ','),
                record.alert_message, currency(0, record.parts, 1),           
                currency(0, record.labor, 1),
                currency(record.parts, record.labor, 1),
                record.vendor.name] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:55:19.103

In my experience you need to add a .select in order to specify the additional fields from the joined table. See [http://guides.rubyonrails.org/active_record_querying](http://guides.rubyonrails.org/active_record_querying).

Add

```
 .select(my_records.*, alerts.field1, alerts.field2) 
```

Although you can try just alerts.* I have found issues with an id field breaking objects later.

# emacs - ido-mode 过期文件列表

> ID：15721454
> 
> 赞同：1
> 
> 时间：2013-03-30T17:38:01.633
> 
> 标签：emacs, emacs23, emacs24, ido-mode

我在 Windows 7 上使用 Emacs，发现 ido-mode 没有拾取自我开始使用它以来创建的一些文件。

例如目录包含：

```
foo.txt
bar.txt 
```

`foo.txt`在 Emacs 中打开。稍后，`blah.txt`在目录中创建（也在 Emacs 中）。

当我`C-x C-f`启用 ido-mode 时，我看到`foo.txt`但`bar.txt`不是新创建的`blah.txt`.

无论我打开这个文件多少次，它都不会显示。我要么跳出 ido ，`C-f`要么准确地输入名称以获取它。

有什么想法可以解决这个问题吗？我没有启用 FileNameCache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-10T21:21:41.373

使用 ido-reread-directory (Bound to Cl) 应该可以解决这个问题。

阅读文件做

Cx Cf 然后 Cl 在必要时重新读取目录。

# c++ - Microsoft VC++ PPL 和睡眠

> ID：15721455
> 
> 赞同：3
> 
> 时间：2013-03-30T17:38:11.587
> 
> 标签：c++, visual-c++, c++11, task, ppl

以下程序根据使用的睡眠机制运行不同。

```
#include <ppltasks.h>
#include <chrono>
#include <thread>
#include <iostream>
#include <atomic>
#include <windows.h>
using namespace std;
#define MODERN_MAN
int main()
{
    atomic<int> cnt;
    concurrency::task_group tg;
    for (int i =0; i<1000; ++i )
    {
        tg.run([&cnt](){cout << "."; cnt++; 
        #ifdef MODERN_MAN
        this_thread::sleep_for(chrono::seconds(5));
        #else
        Sleep(5000);
        #endif
        });
    }
    tg.wait();
    cout << cnt;
    return 0;
} 
```

不同之处在于，`sleep_for`从我所看到的任务安排中，1 睡眠不会阻止其他人运行。

从`Sleep`我看到的情况来看，他们阻止了进一步的任务运行。

我的问题是：
a）PPL 线程池如何巧妙地解决问题`sleep_for`（我认为这是一个告诉操作系统的系统调用（将此线程放在非活动线程列表中 x 秒）

b）我在这里看到的行为是否有`sleep_for`保证（也就是它是否定义了我不会得到与 with 相同的行为`Sleep`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T06:31:45.253

> a）PPL线程池如何巧妙地解决问题`sleep_for`（我认为这是一个告诉操作系统的系统调用（将此线程放在非活动线程列表中x秒）

在 Microsoft VC++2012 上，C++ 标准线程库和 PPL 是基于具有[协作和工作窃取调度程序的](http://msdn.microsoft.com/en-us/library/dd998048.aspx)[并发运行时（ConcRT）](http://msdn.microsoft.com/en-us/library/dd504870.aspx)实现的。所以 ConcRT 调度器可以巧妙地处理任务。`std::this_thread::sleep_for`

> b）我在这里看到的行为是否有 sleep_for 保证（也就是它定义我不会得到与 with 相同的行为`Sleep`）

可能不。`Sleep`是原生的WinAPI，我猜ConRT调度*器不能*协同处理。

旁注：微软表示[ConcRT](http://blogs.msdn.com/b/nativeconcurrency/archive/2010/07/26/the-promise-of-ums.aspx)在 Windows 7/Server 2008 R2 **64 位**版本上使用用户模式调度（UMS）。在这样的平台上，行为可能会改变......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T10:04:19.577

查看相关标题（即`#include <thread>`）并了解它的不同之处可能会有所帮助。例如，这是`sleep_for()`定义：

```
template<class _Rep, class _Period> inline
void sleep_for(const chrono::duration<_Rep, _Period>& _Rel_time)
{
    // sleep for duration
    stdext::threads::xtime _Tgt = _To_xtime(_Rel_time);
    sleep_until(&_Tgt);
} 
```

它使用“绝对时间”过载`sleep_until()`：

```
inline void sleep_until(const stdext::threads::xtime *_Abs_time)
{   
    // sleep until _Abs_time
    if (::Concurrency::details::_CurrentScheduler::_Id() != -1)
    {
        stdext::threads::xtime _Now;
        stdext::threads::xtime_get(&_Now, stdext::threads::TIME_UTC);
        ::Concurrency::wait(_Xtime_diff_to_millis2(_Abs_time, &_Now));
        return;
    }
    _Thrd_sleep(_Abs_time);
} 
```

在 CRT 调用处，线索就停止了`_Thrd_sleep()`，要弄清楚条件代码在做什么并不容易。看起来它对非默认调度程序采取了不同的操作，但我现在不明白为什么。无论如何，也许这已经说明了*一些*问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:05:51.953

一个原因可能是两种睡眠方法的准确性不同。要找出你应该在你的平台上通过测量两个相邻`Sleep(0)`和两个相邻`Sleep(1)`且相同的时间来测试准确度`sleep_for()`

请注意，定时器值的精度与其实际精度之间可能存在显着差异。例如，clock() 提供毫秒精度，但在我的机器上，精度为 15 毫秒（平均）。

# android - AOSP 基于自定义设备构建

> ID：15721457
> 
> 赞同：13
> 
> 时间：2013-03-30T17:38:17.667
> 
> 标签：android, android-source

我正在建造`AOSP 4.2 Jelly Bean`。当我构建默认`full-eng`配置并在模拟器上运行它时，一切都很好。

我需要构建自定义设备并运行它（在`emulator`- 用于测试它是否真的有效，并且在真实设备上）。当我基于`full_base.mk`文件创建自定义设备并运行它时`emulator`-`emulator`只是挂断了带有 ANDROID 文本的第一个屏幕，并且根本不会加载。我`system.img, userdata.img, ramdisk.img`在建立目录之后。这就是我构建自定义 AOSP 并在设备上运行它所需的全部内容吗？我可以在模拟器上运行我的构建，还是只在真实设备上运行？

我是否应该有一些额外的东西来为真实设备构建 AOSP：内核、设备驱动程序等？

自定义设备文件夹文件（device/my_company/my_product）：

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

ifneq ($(filter my_product,$(TARGET_DEVICE)),)
include $(call all-makefiles-under,$(LOCAL_PATH))
endif 
```

**安卓产品.mk**

```
PRODUCT_MAKEFILES := \
    $(LOCAL_DIR)/full_myproduct.mk 
```

**BoardConfig.mk**

```
TARGET_NO_BOOTLOADER := true
TARGET_NO_KERNEL := true

TARGET_ARCH := arm

TARGET_ARCH_VARIANT := armv7-a
TARGET_CPU_VARIANT := generic
TARGET_CPU_ABI := armeabi-v7a
TARGET_CPU_ABI2 := armeabi

HAVE_HTC_AUDIO_DRIVER := true
BOARD_USES_GENERIC_AUDIO := true

# no hardware camera
USE_CAMERA_STUB := true

# Enable dex-preoptimization to speed up the first boot sequence
# of an SDK AVD. Note that this operation only works on Linux for now
ifeq ($(HOST_OS),linux)
  ifeq ($(WITH_DEXPREOPT),)
    WITH_DEXPREOPT := true
  endif
endif

# Build OpenGLES emulation guest and host libraries
BUILD_EMULATOR_OPENGL := true

# Build and enable the OpenGL ES View renderer. When running on the emulator,
# the GLES renderer disables itself if host GL acceleration isn't available.
USE_OPENGL_RENDERER := true 
```

**full_myproduct.mk**

```
$(call inherit-product, $(SRC_TARGET_DIR)/product/languages_full.mk)
$(call inherit-product, $(SRC_TARGET_DIR)/product/full_base.mk)

#DEVICE_PACKAGE_OVERLAYS :=
#PRODUCT_PACKAGES +=
#PRODUCT_COPY_FILES +=

PRODUCT_NAME := full_myproduct
PRODUCT_DEVICE := myproduct
PRODUCT_MODEL := Customized Android
PRODUCT_BRAND := Android 
```

**供应商设置.sh**

```
add_lunch_combo full_myproduct-userdebug 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T03:05:51.553

您似乎对 AOSP 构建系统有很好的把握，尤其是在如何添加新设备方面。

`full-eng`只针对模拟器。通常你会为有问题的设备构建自定义`.img`，因为硬件驱动程序在设备是否工作方面起着重要作用。

例如，如果您有 a`grouper`或 a `maguro`，您最终会为该设备构建而不是`full-eng`. `lunch`应该在您将它们添加到您的`device/`和`vendor/`树时列出其他设备。Google 在其 [网站][https://developers.google.com/android/nexus/drivers] 上提供了为 Nexus 设备系列构建所需的文件。

What is the custom device that you are building for? If your device is commercially sold, chances are someone on XDA is trying to port AOSP and friends (CM, AOKP, etc) to your device.

Even if your device isn't on XDA, chances are it has hardware common with a bunch of other devices that you can find on AOSP. At that point, you'd have to go cherry pick driver-specific bits of code, like wifi chipsets, sound devices, etc.

I don't have a good primer for building off the top of my head, but [http://wiki.cyanogenmod.org/w/Main_Page](http://wiki.cyanogenmod.org/w/Main_Page) should be fairly helpful to you. This wiki has improved a lot since its creation and now has a chockful of useful information.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T19:34:11.983

You are missing some of the vendor's drivers. goto: [https://developers.google.com/android/nexus/drivers](https://developers.google.com/android/nexus/drivers)

download the appropriate drivers for the exact device. put the *.sh file in your aosp top directory. run each of the shell file and accept the terms.

then recompile the code!

# c++ - 异步纹理加载工具

> ID：15721458
> 
> 赞同：5
> 
> 时间：2013-03-30T17:38:19.293
> 
> 标签：c++, windows, visual-c++, opengl, c++11

如何在 3D 应用程序运行时异步加载纹理？我所理解的是 OpenGL 上下文不是线程安全的，我应该将它们分开在不同的线程上。

但我的主要问题是选择适当的多线程工具/框架来实际使用 Windows 和 C++ 实现这一点，我听说过很多关于 C++11 的信息，包括其标准库中的线程支持，但有人可以只列出基本步骤吗？

最安全的方法是什么？以及如何更新另一个上下文的状态，它注册了在另一个线程上完成的更改？我怀疑`glFlush`和`glBind*`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T17:57:12.383

纹理加载最耗时的部分通常是磁盘访问和任何格式转换，这两者都独立于 OpenGL，因此可以安全地在另一个线程上进行。一旦纹理被读入内存并以所需的格式，实际复制到 OpenGL 缓冲区是相当快的。

进入线程编程的细节对于这个答案来说太复杂了，但是周围有很多文档，一旦它在你的脑海中点击，它就很容易（比如指针和内存）。

这里的一般概念是创建一个纹理持有者对象列表（例如，包含文件/名称、初始空缓冲区和加载完成标志），并在创建时将其传递给加载线程。加载线程然后遍历列表，打开每个文件，将其加载到内存中并将缓冲区附加到列表条目，然后设置加载标志并可能增加一个计数器。主线程获取新加载的纹理，将其复制到 OpenGL 纹理中，并增加进度条或任何加载指示器。一旦列表中的所有纹理都有缓冲区并被标记为已加载，另一个线程的工作就完成了，它可以停止（或保持活动状态以加载未来的纹理）。

该模型的主要优点是不必共享实际的图形上下文。在可以是线程安全的 API (DirectX) 中，这样做会降低性能，而 OpenGL 需要您做大量工作才能拥有多个上下文或确保正确共享它们。加载纹理时的繁重工作通常是文件读取和参数检查，除非您进行格式转换或旋转，这甚至可能使磁盘访问相形见绌。实际复制到视频内存是高度优化的，不太可能成为瓶颈（如果您担心这一点，请尝试使用能够识别 GPU 调用成本的工具进行分析，然后查看）。这些工作都没有直接依赖于 OpenGL，因此您可以将其推送到另一个线程而无需担心。

If you're on Windows specifically, there are built-in threading functions that can be used, working off of a simple callback model (provide a function and initial params, in this case your texture list, and make the API call). I'm not personally familiar with C++11's threading support or how it works in Visual Studio, if at all, so you'd have to check on that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-23T15:48:42.273

The answer by @ssube is correct about the complexity breakdown of the task, but assumes that "OpenGL requires a decent bit of work on your part to have multiple contexts or make sure you're sharing them properly", and I disagree.

An easy solution is to create a main context (for drawing) and a secondary context (for texture loading), at the start of the program, for example with:

```
m_hRCDrawing = wglCreateContext(m_hDC);
m_hRCSecondary = wglCreateContext(m_hDC); 
```

And then sharing the data between the `m_hRCSecondary` and the `m_hRCDrawing` contexts can be done with:

```
wglShareLists(m_hRCSecondary, m_hRCDrawing); 
```

Finally, when you are about to read a texture from a "texture loading" thread that has no GL context, you can simply call:

```
wglMakeCurrent(m_hDC, m_hRCSecondary); 
```

after which any assets loaded within this thread are shared by the drawing thread's context.

A slightly more thorough explanation is available [here](http://higherorderfun.com/blog/2011/05/26/multi-thread-opengl-texture-loading/).

# javascript - HTML 表单元素隐藏 onload javascript

> ID：15721466
> 
> 赞同：2
> 
> 时间：2013-03-30T17:39:07.080
> 
> 标签：javascript, html, forms

尝试在加载时隐藏 HTML 文本输入，但如果选中单选按钮，则表单将显示。

[http://pastie.org/private/ah39ul5h4jtmlntkbmmda](http://pastie.org/private/ah39ul5h4jtmlntkbmmda)

我已经让它工作了，我只需要在页面加载时隐藏该字段。

```
<form action="profile_edit_gravatar.php" method="post">
    <label class="radio inline">
        <input type="radio" <?php if($row[16]=='account') {echo ' checked';}?> onload="this.form.otheremail.style.visibility='hidden';" onclick="
            if (this.checked) {
            this.form.otheremail.style.visibility='hidden';
            } else {
            this.form.otheremail.style.visibility='visible';
            }
            return true;
        ">
        Use <?php echo $row[3];?>
    </label>
    <input type="text" name="otheremail">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:46:44.120

我给收音机和字段一个 ID 怎么样 - 实际上现在我写了一个使用 getElementsByName 的脚本不太重要......

[演示](http://jsfiddle.net/mplungjan/MQD9Z/)

```
<?php $hide = $row[16]=='account'; ?>
<style>
<?php if ($hide) { echo '#otheremail {visibility:hidden;}'; ?>
</style>
<script>
 window.onload=function() {
   var rads = document.getElementsByName("gravatarradios");
   rads[0].onclick=rads[1].onclick=function() {
     this.form.otheremail.style.visibility=(this.value=="Use")?'hidden':'visible';
   }
   if (<?php echo $hide; ?>) rads[0].click(); else rads[1].click();
 }
 </script> 
```

HTML

```
<form action="profile_edit_gravatar.php" method="post">
<label class="radio" for="gravatarradios1">
    <input type="radio" name="gravatarradios" id="gravatarradios1" value="Use">
    Use     </label>
<label class="radio" for="gravatarradios2">
    <input type="radio" name="gravatarradios" id="gravatarradios2" value="Use other">
    Use another email:
</label>
<input type="email" name="otheremail" id="otheremail" placeholder="Gravatar email address">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:42:25.593

您可以使用 CSS 对其进行样式设置。默认情况下，这将隐藏所有输入：

```
input {
    visibility: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:49:44.987

输入元素没有 onload 事件，您可以默认使用 CSS 隐藏元素，然后在单击单选框时对其进行处理。

另一种选择是将 onload 用于正文。

```
<body onload="document.forms[0].otheremail.style.visibility='hidden';" > 
```

# c++ - 光不断覆盖旋转立方体的 2 个相同侧面

> ID：15721467
> 
> 赞同：1
> 
> 时间：2013-03-30T17:39:10.677
> 
> 标签：c++, opengl, glsl

我为旋转的彩虹立方体制作了基本照明：

着色器：

```
attribute  vec4 vPosition;
attribute  vec4 vColor;
attribute  vec4 vNormal;

varying vec4 color;

uniform mat4 ModelView;
uniform mat4 Projection;
uniform mat3 NormalMatrix;
uniform vec4 lPosition;
uniform vec4 lDiffuse;
uniform vec4 Shininess;
uniform vec4 lSpecular;
uniform vec4 lAmbient;

varying vec3 v_normal;
varying vec3 v_eye;

void main() 
{

    vec4 ambient, diffuse, specular;
    vec3 N,L,E,H;

    //gl_Position = projection * view * model * vPosition;
    ambient = vColor*lAmbient;

    N = normalize((ModelView*vNormal).xyz);
    L = normalize((ModelView*lPosition).xyz - (ModelView*vPosition).xyz);
    diffuse = max(dot(L,N), 0.0)*(vColor*lDiffuse);

    E = -normalize((ModelView * vPosition).xyz);
    H = normalize(L + E);
    specular = max(pow(max(dot(N, H), 0.0), 20.0)
                *lSpecular, 0.0);

    color = vec4((ambient+diffuse+specular).rgb, 1.0);

    gl_Position = Projection * ModelView * vPosition;
} 
```

当立方体旋转时，我只能看到 2 面被着色，其余的都是黑色的。灯光始终处于同一位置（立方体的前面），但即使从一开始就被遮蔽的墙壁没有面向光源，也可以看到其余部分。建议？

// 编辑法线计算如下：

无效法线（int a，int b，int c，int d）{

```
vec4 U, V;
U = vertices[b] - vertices[a];
V = vertices[c] - vertices[a];

vec4 firstNormal;
firstNormal.x = (U.y * V.z)-(U.z * V.y);
firstNormal.y = (U.z * V.x)-(U.x * V.z);
firstNormal.z = (U.x * V.y)-(U.y * V.x);
firstNormal.w = 1.0f;

normal[normalCount] = firstNormal;
normalCount++;

vec4 X, Y;

X = vertices[c] - vertices[a];
Y = vertices[d] - vertices[a];

vec4 secondNormal;
secondNormal.x = (X.y * Y.z)-(X.z * Y.y);
secondNormal.y = (X.z * Y.x)-(X.x * Y.z);
secondNormal.z = (X.x * Y.y)-(X.y * Y.x);
secondNormal.w = 1.0f;

normal[normalCount] = secondNormal;
normalCount++; 
```

}

它们发送到 vbo abcd 的位置是立方体边角上的顶点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:23:35.727

1) what are your normals? you can have a bug there, it would show like that. you can check that by assigning and testing, in turns:

```
color = vNormal; 
color = N; 
color = L; 
```

and so on.

2) you're using per-vertex, not per-fragment shading, which, on a cube, might not be the best idea - it's too imprecise.

# hibernate - 如何在 Grails 的 hasMany relashionship 中指定查询？

> ID：15721469
> 
> 赞同：1
> 
> 时间：2013-03-30T17:39:22.330
> 
> 标签：hibernate, grails, grails-orm, grails-2.0, grails-domain-class

我在 Grails 中有这个域类：

```
class User {
   String name

   Status status
   enum Status {
    ACTIVE(1),
    BLOCKED(2)
   }

 static hasMany = [friends:User]
} 
```

所以用户可以有一个或多个朋友（用户）。

当我做这样的事情时：

```
User someone = User.get(1)
someone.friends // all friends from this user 
```

但我只想在状态为 ACTIVE 的情况下结交朋友。如何在域类中指定它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:07:58.657

覆盖`getFriends()`方法。这当然没有经过测试。

```
Set<User> getFriends() {

User.executeQuery("Select f from User u join u.friends as f where u = :user and  f.status = :status", [user: this, status: Status.ACTIVE])

} 
```

# rspec - 如何让 rspec 读取我的 gemspec 中的依赖项？

> ID：15721474
> 
> 赞同：3
> 
> 时间：2013-03-30T17:39:34.937
> 
> 标签：rspec, gemspecs

当我运行“rspec”或“bundle exec rspec”时，它不允许我使用 .gemspec 文件中的依赖项。我是否必须重复自己并打破 DRY 原则并在 Gemfile 和 .gemspec 中显示我的宝石？（ps。我正在为我的模型文件做这个作为 Rails 引擎）

宝石文件：

```
gemspec 
```

.gemspec：

```
 s.add_dependency "rails", "~> 3.2.13"
  s.add_dependency "mongoid"
  s.add_dependency "mongoid_commentable" 
```

例子：

“bundle exec rspec”显示错误：

```
uninitialized constant Mongoid::Commentable
uninitialized constant Comment::Mongoid_Commentable
uninitialized constant Mongoid::Commentable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:43:01.407

与使用 Bundler/Gemfile 相比，Gem 依赖项不会自动加载。因此，您必须拥有`require`您所依赖的宝石。

# python - Saving in PNG (using PIL library) after taking ImageChops.difference of two PNG files is producing transparent (or white) PNG image file

> ID：15721484
> 
> 赞同：2
> 
> 时间：2013-03-30T17:40:12.497
> 
> 标签：python, image, png, python-imaging-library

Here in this code I am taking difference of two same resolution PNG images ,then saving the difference,. Saving in JPEG works fine but in PNG, it produces a total tranparent PNG image file. look at the comments in the last two lines

```
import Image
import ImageChops
js_black_im = Image.open("/js_black.png")
js_white_im = Image.open("/fb_white.png")
diff_im = ImageChops.difference(js_black_im, js_white_im)
diff_im.save("/js_onlytext.jpeg", "JPEG") #this works as expected
diff_im.save("/js_onlytext.png", "PNG") #this produces a total tranparent PNG image file![js_black.png][1]![fb_black.png][2] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:48:24.987

Perhaps your original images have an alpha channel (RGBA), you should know that beforehand, and/or check the result the image type that Image.open produces (looking at `Image.mode` or `Image.info`). Anyway, you can force the RGB type (no alpha channel) by calling `<image>.convert('RGB')`, before or after doing the difference.

# internet-explorer-10 - Internet Explorer 10 认为同一域上带有 target="_blank" 的链接是弹出窗口并阻止它们

> ID：15721489
> 
> 赞同：1
> 
> 时间：2013-03-30T17:40:48.103
> 
> 标签：internet-explorer-10

我刚刚安装了 IE 10，例如我去一个网站

[http://www.example.com/a_page.html](http://www.example.com/a_page.html)

其中有一些链接指向

[http://www.example.com/another_page.html](http://www.example.com/another_page.html)

与目标 =“_blank”

在 Firefox 和其他链接中，在新选项卡中打开，但在 IE 10 中，当我单击时，我会在屏幕底部收到通知：

```
Internet Explorer blocked a pop-up from www.example.com [Allow once] [Options for this site] 
```

当然没有新标签，没有加载。

为什么为什么为什么……这么惨……

版本：10.0.9200.16521

重现它的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
   <body>
      <a href="http://www.example.com" target="_blank">6 maybe is dead, but 10 is alive.</a>
   </body>
</html> 
```

注意：此代码可以托管在[http://www.example.com](http://www.example.com)和指向同一域的链接。

# objective-c - Xcode 使用 NSUserDefaults 在主视图控制器上保存数据

> ID：15721490
> 
> 赞同：0
> 
> 时间：2013-03-30T17:41:07.523
> 
> 标签：objective-c, xcode, uitableview, nsuserdefaults

我正在为 ipad 创建一个主详细信息应用程序，该应用程序应保存用户在主视图控制器的表视图 cel 中键入的任何内容（使用弹出视图上的按钮，该按钮将一些文本放在该弹出视图中的标签上）。

所以基本上我有一个弹出视图，其中包含一个名为 inputDisplayLabel 的 UILabel，用户按下该按钮文本的任何按钮都会进入该 UILabel。当按下输入按钮时，它会将该文本添加到 tableviews cel。现在我想保存该表格视图中的所有内容，以便当我退出应用程序并重新开始时，文本仍保留在表格视图 cel 中。

我尝试添加一个名为 SaveValue 的按钮并将其编码如下：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:self.inputDisplayLabel.text forKey:@"savedValue"];
[defaults synchronize]; 
```

现在我尝试使用以下代码添加另一个名为 loadValue 的按钮来加载它：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
self.tableView = [defaults objectForKey:@"SavedValue"]; 
```

但它不起作用。我实际上将加载代码放在哪里，以便在应用程序启动时它就在那里，这样我就不必使用另一个按钮。

我希望有一个人可以帮助我。谢谢。

编辑：

```
-(void)setTheTextOfLabelWith:(NSString *)str
{
    text = str;
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }
    //[_objects insertObject:[NSDate date] atIndex:0];
    [_objects insertObject:[[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.frame.size.width, self.view.frame.size.height)] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

    [self.inputViewPopover dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:45:42.997

Objective C 区分大小写“savedValue”不同于“SavedValue”。当然tableview不能直接取字符串。您必须将字符串/文本分配给例如 tableviewcell 中的标签。将代码放在 viewDidLoad 中，因此在此处设置标签的文本，如果它在 tableViewCell 中，则必须在“cellForRowAtIndexPath”方法中设置它。也许应该看看 viewcontroller 生命周期以及 UITableViewDelegate 和 DataSource 协议。

// 编辑：我不这么认为.. 基本上你有一个动态的 tableview 并且想要多个单元格显示一些你保存在用户默认值中的文本？要拥有一个动态的 tableview，你通常在你的 ViewController 中实现 UITableViewDataSource 和 UITableViewDelegate 协议，它显示/管理 tableview。在那里，您使用 UITableViewDataSource 协议中的“cellForRowAtIndexPath”方法创建单元格。当您想要保存多个条目时，您可以使用数组将所有内容保存在用户默认值中，然后在 cellForRow.. 中对其进行迭代以获取单元格中的所有文本。

例如

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.yourArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *theCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(theCell == nil)
    {
        theCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                         reuseIdentifier:CellIdentifier];
    }

    theCell.textLabel.text = [self.yourArray objectAtIndex:indexPath.row];

    return theCell;
} 
```

如果您想保存大量数据，请考虑使用 CoreData 或某种 XML 来保存数据，因为用户默认值通常用于保存某种设置（但对于某些“文本”，它应该完全可以工作出去）。

// edit2: After checking out your project, I noticed that you tried to save the labels in NSUserDefaults, which is not possible. You have to save the texts of these labels and then restore the labels with these texts after loading them from NSUserDefaults. The easiest solution (or at least the one without many modifications) is to modify your load and save methods like so:

```
- (IBAction)load
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSArray *texts = [defaults objectForKey:@"items"];
    for(NSString *currentText in texts)
    {
        [self setTheTextOfLabelWith:currentText];
    }
}

- (void)savingData
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSMutableArray *textToSave = [[NSMutableArray alloc] init];
    for(UILabel *currentLabel in _objects)
    {
        [textToSave addObject:currentLabel.text];
    }

    [defaults setObject:textToSave forKey:@"items"]; 
    [defaults synchronize];
} 
```

You can also find that solution as a reply to your mail.

# java - 从 Swing 按钮 ActionPerformed 访问 DatagramSocket 对象

> ID：15721492
> 
> 赞同：0
> 
> 时间：2013-03-30T17:41:56.483
> 
> 标签：java, swing, sockets, udp

我正在使用 swing jFrame 为我的客户端-服务器预订系统创建一个 GUI。我在客户端上遇到了我想使用在此声明的 DatagramSocket 的问题：

```
public BookingClientUI() throws SocketException {
        DatagramSocket clientSocket = new DatagramSocket(9876);
        initComponents();
        RecvPacket recvProcess = new RecvPacket(clientSocket);
        Thread recvThread = new Thread(recvProcess);
        recvThread.start();
} 
```

稍后在此按钮 ActionPerformed 中：

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try {
        String passwordString = new String(passwordfield.getPassword());
        byte[] passwordBytes = passwordString.getBytes();
        byte[] packetData = new byte[1500];
        packetData = SendPacketHandler.packetConstructor(SendOpcodes.REGISTER_USER,usernamefield.getText(),EncryptionHandler.hashPassword(passwordBytes));
        DatagramPacket packet = new DatagramPacket(packetData,packetData.length,InetAddress.getByName("127.0.0.1"),9876);
        clientSocket.send(packet);
    } catch (NoSuchAlgorithmException | UnknownHostException | IOException ex) {
        Logger.getLogger(BookingClientUI.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

显然，这条线：

```
 clientSocket.send(packet); 
```

由于声明的 DatagramSocket 不在范围内，因此出现“找不到符号”错误。但是我不知道如何解决这个问题，因为我只用 Java 编程了几天。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:44:54.980

您只需要将套接字存储到稍后可供按钮处理程序访问的类的数据成员中。您没有对您的类层次结构进行足够的解释来说明如何做到这一点。如果按钮处理程序在里面`BookingClientUI`，那很简单。你会有类似的东西：

```
public BookingClientUI() extends JFrame {

  final DatagramSocket clientSocket;

  public BookingClientUI() throws SocketException {
    // Initialize the data member with the open socket.
    clientSocket = new DatagramSocket(9876);
    initComponents();
    RecvPacket recvProcess = new RecvPacket(clientSocket);
    Thread recvThread = new Thread(recvProcess);
    recvThread.start();
  }

  // Any member function can now use clientSocket, including a button action.

} 
```

在这一切中，不要忘记（几乎）所有 Swing 代码都必须在 UI 线程中运行。

# objective-c - Youtube API video duration format

> ID：15721497
> 
> 赞同：4
> 
> 时间：2013-03-30T17:42:34.877
> 
> 标签：objective-c, youtube-api

```
{
 "kind": "youtube#videoListResponse",
 "etag": "\"XlbeM5oNbUofJuiuGi6IkumnZR8/ny1S4th-ku477VARrY_U4tIqcTw\"",
 "items": [
  {

   "id": "9bZkp7q19f0",
   "kind": "youtube#video",
   "etag": "\"XlbeM5oNbUofJuiuGi6IkumnZR8/HN8ILnw-DBXyCcTsc7JG0z51BGg\"",
   "contentDetails": {
    "duration": "PT4M13S",
    "dimension": "2d",
    "definition": "hd",
    "caption": "false",
    "licensedContent": true,
    "regionRestriction": {
     "blocked": [
      "DE"
     ]
    }
   }
  }
 ]
} 
```

Youtube API v3 provides its video durations in this format `"duration": "PT4M13S"` Is this a standard time format? I'm trying to get a user friendly format using Objective-C. I would like to know if this is a Objective-C DateTime class supported format. If not what are those P,T, charactors stands for?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T17:49:09.267

That is an ISO 8601 time format. `PT` indicates that we are dealing with a time peroid. `H`, `M`, `S` and similar ones are obviously the duration in hours, minutes and seconds, etc. I am not sure if Objective-C is able to handle this natively, but you may be able to find something useful knowing how it works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T00:14:41.077

this might help a bit, nevertheless this this an overkill, just to show video length.

[http://en.wikipedia.org/wiki/ISO_8601#Durations](http://en.wikipedia.org/wiki/ISO_8601#Durations)

# javascript - 我需要更新我的 jQuery 代码

> ID：15721499
> 
> 赞同：1
> 
> 时间：2013-03-30T17:42:57.750
> 
> 标签：javascript, jquery, menu, navigation

我从 CSSTRICKS 获得了一段代码，即魔术线导航，它将在我的菜单项下放置一条线，并在我悬停的项目上移动。我希望它是这样的，当我单击菜单时，该行将停留在该菜单项上，而不是像往常一样回到第一个。

该脚本使用类选择器来告诉默认情况下该行应该去哪里。有了这个，我用jQuery做了一个toggleClass，它将类传递给单击的菜单项，但它没有更新。我必须重新加载页面才能更新。而且，它再次卡在同一位置。我希望有人知道如何做到这一点。这是我的代码：

```
$(window).bind("load", function () {
    var $el, leftPos, newWidth;
    $mainNav2 = $("#example-two");

    /*
    EXAMPLE ONE
*/

    /* Add Magic Line markup via JavaScript, because it ain't gonna work without */
    $("#line-menu").append("<li id='magic-line'></li>");

    /* Cache it */
    var $magicLine = $("#magic-line");

    $magicLine.width($(".current_page_item").width())
        .css("left", $(".active a").position().left)
        .data("origLeft", $magicLine.position().left)
        .data("origWidth", $magicLine.width());

    $("#line-menu li").find("a").hover(function () {
        $el = $(this);
        leftPos = $el.position().left;
        newWidth = $el.parent().width();

        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        });
    }, function () {
        $magicLine.stop().animate({
            left: $magicLine.data("origLeft"),
            width: $magicLine.data("origWidth")
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:42:58.637

将魔术线移动到它自己的功能。编辑评论如下。

```
 $(document).ready(function(){
        magicline();
    });

function magicline() {

    var $el, leftPos, newWidth,
        $mainNav = $("#example-one");
    //remove the old magic line before creating a new one.
    $("#magic-line").remove();
    $mainNav.append("<li id='magic-line'></li>");
    var $magicLine = $("#magic-line");

    $magicLine
        .width($(".current_page_item").width())
        .css("left", $(".current_page_item a").position().left)
        .data("origLeft", $magicLine.position().left)
        .data("origWidth", $magicLine.width());

    $("#example-one li a").hover(function() {
        $el = $(this);
        leftPos = $el.position().left;
        newWidth = $el.parent().width();
        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        });
    }, function() {
        $magicLine.stop().animate({
            left: $magicLine.data("origLeft"),
            width: $magicLine.data("origWidth")
        });    
    });
}
//on click on a new menu item iterate through and remove the class
//then add the class back to the parent of the a clicked and recall the 
//magicline function
$('li a').on('click',function(){
    $('li').each(function(){ 
       $(this).removeClass('current_page_item');               
    });
    $(this).parent().addClass('current_page_item');
    magicline();
}); 
```

演示：http: [//jsfiddle.net/calder12/vtuKH/1/](http://jsfiddle.net/calder12/vtuKH/1/)

PS. I used the code from CSSTRICKS, you'll have to change the id's to match your id's.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:11:17.187

I more or less guess at the CSS and markup, but this is much more concise:

```
$(window).bind("load", function () {
    var $lineMenu = $("#line-menu"),
        $active = $lineMenu.children('.current_page_item'),
        $magicLine = $("<li id='magic-line'></li>");

    $magicLine
        .width($active.width())
        .css("left", $active.position().left)
        .appendTo($lineMenu);

    $lineMenu.on('mouseenter mouseleave click', 'li:not(#line-menu)', function (e) {
        var $el = e.type == 'mouseleave' ? $active : $(this);

        if (e.type == 'click') {
            $el.addClass('active').siblings().removeClass('active');
            $active = $el;
        } else {
            $magicLine.stop().animate({
                left: $el.position().left,
                width: $el.width()
            });
        }
    });
}); 
```

[http://jsfiddle.net/userdude/tTsk6/](http://jsfiddle.net/userdude/tTsk6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:18:13.647

那条线回到原来的位置，因为有回调附加到`hover`. 在这种情况下您需要做的是，当单击菜单项时，您需要避免该行转到原始位置。

这就是我要做的 -

附加单击处理程序，当用户单击菜单项时设置一个标志以显示该菜单已被选中。在hover的回调函数中检查这个标志，如果设置则返回。否则，如果不是平置，则将线移至先前的位置。

```
var $magicLine = $("#magic-line");
var isClicked = false;  // to show whether menu is clicked or not

$magicLine.width($(".current_page_item").width())
    .css("left", $(".active a").position().left)
    .data("origLeft", $magicLine.position().left)
    .data("origWidth", $magicLine.width());

$("#line-menu li").find("a").hover(function () {
    $el = $(this);
    leftPos = $el.position().left;
    newWidth = $el.parent().width();

    $magicLine.stop().animate({
        left: leftPos,
        width: newWidth
    });
}, function () {
   if(!isClicked){         // if no item is clicked, take line to old position
      $magicLine.stop().animate({
          left: $magicLine.data("origLeft"),
          width: $magicLine.data("origWidth")
      });
    }else{                 // else, just keep it there  
       isClicked = false;
       return false;
    }
}).click(function(e){   // added click listener 
    isClicked = true;       // flag is set to indicate menu item is clicked.
    $magicLine.css({
        left: leftPos,
        width: newWidth
    });                             
}); 
```

首先，我想过`unbinding hover`会阻止回调被调用，但没有成功。所以用标志试了一下。请阅读代码注释，我没有回答所有问题。

# view - PL/SQL 过程 X 引用视图 Y

> ID：15721500
> 
> 赞同：1
> 
> 时间：2013-03-30T17:43:00.063
> 
> 标签：view, reference, plsql, procedure

“参考视图”是什么意思？程序中是否有任何陈述提到给定的观点。任何命令，例如“从 Y 中删除 ....”或类似的命令，好吗？这是否意味着引用是包含该视图 Y 的任何命令？

这是我在这里的问题和答案的一部分，答案之一是“Y 是 X 的直接依赖项”？这是否意味着该程序创建了该视图？

这是整个问题和答案。

考虑这种情况：过程 X 引用基于表 Z 的视图​​ Y。哪两个陈述是正确的？（选择两个。）

Y 是一个被引用的对象。

Y 是 X 的直接依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:43:37.597

如果一个过程引用了一个视图，这意味着 PL/SQL 编译器已经确定该过程以某种方式使用该视图。

例如，以下过程引用了 view `v_some_view`，因此对它有依赖关系：

```
PROCEDURE example (p_count OUT INTEGER)
IS
BEGIN
  SELECT COUNT(*) INTO p_count FROM v_some_view;
END; 
```

如果视图不存在，则该过程不能有效。如果我们要删除视图，该过程将不再有效，因为它会尝试从不存在的视图中进行选择。如果视图不存在，PL/SQL 编译器将无法编译此过程。

视图存在是不够的；它也必须是有效的。视图中的错误将导致过程无法编译。

过程可以引用视图的唯一方法是使用视图的、`SELECT`、`INSERT`或`UPDATE`语句。没有PL/SQL中的视图是不可能的，即使您这样做，该过程也不能随后引用新创建的视图，因为该视图在编译时将不存在。`MERGE``DELETE``CREATE``EXECUTE IMMEDIATE`

例如，如果`my_view`不存在，则以下过程将无法编译：

```
PROCEDURE invalid
IS
  p_count    INTEGER;
BEGIN
  EXECUTE IMMEDIATE 'CREATE VIEW my_view AS SELECT * FROM DUAL';
  SELECT COUNT(*) INTO p_count FROM my_view;
  dbms_output.put_line('Count was ' || p_count);
END; 
```

因此，考虑依赖关系的一种方式是“对象 Y 只有在 X 存在且有效时才有效吗？”。如果这个问题的答案是肯定的，那么 Y 依赖于 X。

如果您有权访问 Oracle 数据库，请查看数据字典视图`USER_DEPENDENCIES`并`ALL_DEPENDENCIES`查看对象之间依赖关系的一些示例。

# jsf - PrimeFaces 3.5 数据表中的文件上传

> ID：15721505
> 
> 赞同：1
> 
> 时间：2013-03-30T17:43:16.823
> 
> 标签：jsf, primefaces

我正在尝试`<p:cellEditor>`使用`<p:fileUpload>`. 当我尝试上传文件时，它以`null`. 这是如何引起的，我该如何解决？

我正在使用 PrimeFaces 3.5 和 JSF 2.0。

这是视图：

```
<p:dataTable id="question" var="question" value="#{editor.questions}" editable="true" widgetVar="carsTable" resizableColumns="true">
    <f:facet name="header">Economic</f:facet>
    <p:ajax event="rowEdit" listener="#{editor.onEdit}"  />
    <p:ajax event="rowToggle" listener="#{editor.onRowToggle}" />

    <p:column style="width:6%">
        <p:rowEditor />
    </p:column>

    <p:column style="width:2%">
        <p:rowToggler />
    </p:column>

    <p:column headerText="Performance Indicator" style="width:25%">
        <h:outputText value="#{question.performanceIndicator}" title="#{question.performanceIndicator}"/>
    </p:column>

    <p:column headerText="Description" style="heigh:200px;width:200px">
        <h:outputText value="#{question.description}" />
    </p:column>

    <p:column headerText="CSR Label" style="width:25%">
        <h:outputText value="#{question.csrLabel}" />
    </p:column>

    <p:column headerText="Response" style="width:25%">
        <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{question.response}" />
            </f:facet>
            <f:facet name="input">
                <h:selectOneMenu value="#{question.response}" style="width:100%">
                    <f:selectItem value="#{tableBean.manufacturers}"  itemLabel="Yes" itemValue="Y" />
                    <f:selectItem value="#{tableBean.manufacturers}"  itemLabel="No" itemValue="N" />
                    <f:selectItem value="#{tableBean.manufacturers}"  itemLabel="Partial" itemValue="P" />
                </h:selectOneMenu>
            </f:facet>
        </p:cellEditor>
    </p:column>

    <p:column headerText="File" style="width:25%">
        <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{question.file.fileName}" />
            </f:facet>
            <f:facet name="input">
                <p:fileUpload value="#{question.file}" mode="simple"/>
            </f:facet>
        </p:cellEditor>
    </p:column>

    <p:rowExpansion>
        <h:panelGrid id="display" columns="2">
            <h:outputText id="model" value="#{question.description}" />
        </h:panelGrid>
    </p:rowExpansion>
</p:dataTable> 
```

* * *

**更新**：是的，它在一个`<h:form>`.

这是支持bean：

```
package org.zicon.web.jsf;

import java.util.ArrayList;
import java.util.List;
import java.util.logging.Logger;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

import org.primefaces.event.CellEditEvent;
import org.primefaces.event.FlowEvent;
import org.primefaces.event.RowEditEvent;
import org.primefaces.event.ToggleEvent;
import org.primefaces.model.UploadedFile;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;
import org.zicon.domain.GRI;
import org.zicon.domain.User;

@ManagedBean(name="userWizard")
@RequestScoped
public class UserWizard {

    private List<GRI> questions;
        private User user = new User();

        private boolean skip;

        private String effect = "fade";

        private static Logger logger = Logger.getLogger(UserWizard.class.getName());

        public User getUser() {
                return user;
        }

        public void setUser(User user) {
                this.user = user;
        }

        public void save(ActionEvent actionEvent) {
                //Persist user

            for(GRI gri:questions)
            {
                System.out.println("Response"+gri.getResponse());
                System.out.println("File Name"+gri.getFile().getFileName());

            }

                FacesMessage msg = new FacesMessage("Successful", "Welcome :" + user.getFirstname());
                FacesContext.getCurrentInstance().addMessage(null, msg);
        }

        public String getEffect() {
                return effect;
        }

        public void setEffect(String effect) {
                this.effect = effect;
        }

        public boolean isSkip() {
                return skip;
        }

        public void setSkip(boolean skip) {
                this.skip = skip;
        }

        public String onFlowProcess(FlowEvent event) {
                logger.info("Current wizard step:" + event.getOldStep());
                logger.info("Next step:" + event.getNewStep());

                if(skip)
                        return "confirm";
                else
                        return event.getNewStep();
        }

        public UserWizard() {
            questions=new ArrayList<GRI>();
                GRI gri=new GRI();
                gri.setPerformanceIndicator("EC1");
                gri.setDescription("Direct economic value generated and distributed, including " +
                        "revenues, operating costs, employee compensation, donations and other community investments, " +
                        "retained earnings, and payments to capital providers and governments.");
                gri.setCsrLabel("3.1");

                questions.add(gri);

                GRI gri1=new GRI();
                gri1.setPerformanceIndicator("EC2");
                gri1.setDescription("Financial implications and other risks and opportunities for the organization's activities due to climate change" );

                questions.add(gri1);

                GRI gri2=new GRI();
                gri2.setPerformanceIndicator("EC1");
                gri2.setDescription("Direct economic value generated and distributed, including " +
                        "revenues, operating costs, employee compensation, donations and other community investments, " +
                        "retained earnings, and payments to capital providers and governments.");
                gri2.setCsrLabel("3.1");

                questions.add(gri2);

                GRI gri3=new GRI();
                gri3.setPerformanceIndicator("EC3");
                gri3.setDescription("Coverage of the organization's defined benefit plan obligations. ");

                questions.add(gri3);

                GRI gri4=new GRI();
                gri4.setPerformanceIndicator("EC4");
                gri4.setDescription("Significant financial assistance received from government. ");

                questions.add(gri4);

                GRI gri5=new GRI();
                gri5.setPerformanceIndicator("EC5");
                gri5.setDescription("Range of ratios of standard entry level wage compared to local minimum wage at significant" +
                        " locations of operation.");
                gri5.setCsrLabel("1.2");

                questions.add(gri5);

        }

          public void onCellEdit(CellEditEvent event) {
                Object oldValue = event.getOldValue();
                Object newValue = event.getNewValue();

                if(newValue != null && !newValue.equals(oldValue)) {
                    FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Cell Changed", "Old: " + oldValue + ", New:" + newValue);
                    FacesContext.getCurrentInstance().addMessage(null, msg);
                }
            }

        public List<GRI> getQuestions() {
            return questions;
        }

        public void setQuestions(List<GRI> questions) {
            this.questions = questions;
        }

        public void onRowToggle(ToggleEvent event) {
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO,
                                                "Row State " + event.getVisibility(),
                                                "Model:" );

            FacesContext.getCurrentInstance().addMessage(null, msg);
        }

         public void onEdit(RowEditEvent event) {
                FacesMessage msg = new FacesMessage("Question Edited", ((GRI) event.getObject()).getResponse());

                GRI gri=((GRI) event.getObject());

                FacesContext.getCurrentInstance().addMessage(null, msg);
            }

         private UploadedFile file;

            public UploadedFile getFile() {
                return file;
            }

            public void setFile(UploadedFile file) {
                this.file = file;
            }

            public void upload() {
                if(file != null) {
                    FacesMessage msg = new FacesMessage("Succesful", file.getFileName() + " is uploaded.");
                    FacesContext.getCurrentInstance().addMessage(null, msg);
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:04:53.630

在*p:fileUpload*中使用属性*fileUploadListener="#{Bean.handleFileUpload}"*

 *和豆：

```
public void handleFileUpload(FileUploadEvent event) throws FileNotFoundException, IOException {
        upFile = event.getFile();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:04:00.810

您是否有一个包含 JSF 代码片段的 <h:form> 标记？否则，我在 Primefaces dataTable 中看不到任何明显的问题。

也许您应该提供您的 Bean (Java) 代码。*

# ruby-on-rails-3 - can't convert Symbol into Integer when trying to access hash

> ID：15721510
> 
> 赞同：0
> 
> 时间：2013-03-30T17:43:25.893
> 
> 标签：ruby-on-rails-3

So I'm trying to access the test variable in this hash:

```
a = {:info=>#<test: "Testvar">} 
```

I tried it with a[:info]['test'] or a[:info].test but I always get "can't convert Symbol into Integer" as error. What am I doing wrong? I guess it's pretty basic stuff but I can't find a solution.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:50:16.823

It looks like the `#<test: "Testvar">` is just the string representation of an object, which would be accessible at `a[:info]`. You could try printing `a[:info].inspect` or `a[:info].to_yaml` to try to figure out what that object is.

# postgresql - QBSDK giving error

> ID：15721514
> 
> 赞同：0
> 
> 时间：2013-03-30T17:43:53.880
> 
> 标签：postgresql, qbxml

I have been using the QuickBooks SDK (QBSDK) to develop a connection from QuickBooks to a postgres database and then also a connection from the postgres database back to QuickBooks. The data is the customer name and after a huge amount of time, it is all mostly working. From the QuickBooks side I am using the sample EventHandler to get the data and then I call a program to load into the postgres db. On the postgres side I have a NOTIFY/LISTEN as described [here](http://www.postgresql.org/docs/current/static/libpq-notify.html) with a program going back to QuickBooks. As I indicated, everything works fine except at the end. When my program tries to add the customer name to QuickBooks, It gives the error below indicating that QuickBooks is open. Well, I know it is open, because I opened it and it is running. I want the SDK to just add the name into QuickBooks without giving the error message.

The error is: QuickBooks can't start because it is already running. Only QB Accountant, QuickBooks bookkeeper and QuickBooks enterprise can open more than one company file.

Everything is in C++ except for the postgres LISTEN/NOTIFY. I am using Windows 7, and postgres 9.2\. QuickBooks is QuickBooks Pro 2012. If I run the postgres part without QuickBooks running, it adds it without a problem.

So, I know that QuickBooks is running but I just want to have it add the name in the background without the error. Right now it does not add it to QuickBooks . Is there some switch somewhere? Would buying one of those suggested solve the problem? I was hoping to just use the plain QuickBooks instead. Can I use a QBXML to exit QuickBooks, run the customer name addition and then start QuickBooks again? I do not see an XML action that exits the application.

BTW, I discussed the PG part of this [here](https://stackoverflow.com/questions/15316860/python-not-calling-an-external-program-part-3)

[EDIT] Also, another problem is if there is a change in Postgres and QB is open, the same error occurs.

Thanks!

Jim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:27:34.957

It turns out that there is no way to do TWO connections to QuickBooks. You can have only one so the QuickBooks app needs to be shut down when the sdktest app is run. I did not test to see if one of the other QuickBooks apps (QB Accountant, QuickBooks bookkeeper and QuickBooks enterprise ) will work...

# ios - 如何获取当前显示在 uiscrollview 中的 uiimage？

> ID：15721523
> 
> 赞同：1
> 
> 时间：2013-03-30T17:45:05.433
> 
> 标签：ios, uiscrollview, uiimage

我有以下代码，它采用包含 uiimage 路径的 nsdictionaries 数组，并将它们一一添加到 uiscrollview。

```
- (void)displayAssets:(NSArray*)postAssets //configured for search
{
    for (UIView *v in self.scrollview.subviews) {
        [v removeFromSuperview];
    }

    CGRect workingFrame = self.scrollview.frame;
    workingFrame.origin.x = 0;

    self.scrollview.delegate = self;
    //    self.scrollview.contentInset=UIEdgeInsetsMake(10.0,0.0,10.0,0.0);

    NSString *pathOfNoImageFile = [[NSBundle mainBundle] pathForResource:@"noimage" ofType:@"png"];

    if (postAssets == nil || [postAssets count] == 0) {

        UIImage *noImage = [UIImage imageWithContentsOfFile:pathOfNoImageFile];
        UIImageView *imageview = [[UIImageView alloc] initWithImage:noImage];

        [imageview setContentMode:UIViewContentModeScaleAspectFit];
        imageview.frame = workingFrame;
        [self.scrollview addSubview:imageview];
    }
    else
    {

            //at this moment we have an actual NSArray/NSDictionarry of images that has keys etc.

            for (NSDictionary *asset in postAssets) //we have to differentiate between images and videos in future
            {

                //ASSUMING FIRST VALUE IN ASSETS IS AN Image   THIS WILL NEED REFACTORING FOR VIDEOS LATER
                NSString * assetID = [asset valueForKeyPath:@"id"];
                NSString * imageURL = [NSString stringWithFormat:@"%@post/7777/images/%@.jpg", WEB_SERVICE_BASE_URL, assetID];

                UIImage *waitingImage = [UIImage imageWithContentsOfFile:pathOfNoImageFile];
                UIImageView *imageview = [[UIImageView alloc] init];

                [imageview  setImageWithURL:[NSURL URLWithString:imageURL] placeholderImage:waitingImage];

                [imageview setContentMode:UIViewContentModeScaleAspectFit];
                imageview.frame = workingFrame;

                [self.scrollview addSubview:imageview];
                workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;
            }
            [self.scrollview setContentSize:CGSizeMake(workingFrame.origin.x, workingFrame.size.height)];

    }

    //    [[self tableView] reloadData];

} 
```

我在同一文件的另一个功能中尝试做的是获取第一个 uiimage 或当前显示的 uiimage 并且无法这样做。uiscrollview 似乎没有一种方法可以让人们深入了解各个视图，以便我可以获取 uiimage。我看过其他 SO 问题，但它们似乎很复杂。

有人可以指导我吗？我对 uiscrollviews 相当陌生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:47:47.647

假设每个图像与滚动视图的宽度相同，您可以：

1.  保留指向您添加的 UIImages 的指针数组，然后使用获取当前显示图像的索引`scrollview.contentOffset.x / scrollview.bounds.size.width`

2.  调用`hitTest:(CGPoint)point withEvent:(UIEvent *)event`使用`scroller.contentOffset`作为点 - 这应该返回此时应该是你的 UIImageView 的最上面的视图

# ruby - IRB 会话中的 module_function？

> ID：15721524
> 
> 赞同：0
> 
> 时间：2013-03-30T17:45:07.953
> 
> 标签：ruby, metaprogramming, irb

我很难理解为什么[`Module#module_function`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-module_function)在接下来的 irb 会话中缺少 ？

```
> class << self      # open singleton for the session's object instance
>   p is_a? Module   # true
>   p respond_to? :module_function   # false ??
> end 
```

我想达到什么目的？在 irb 会话中直接使用外部模块，即。无需将其包装在新模块中。外部模块使用 module_eval 动态创建方法，然后在新方法名称上调用 module_function。

```
> require 'dlx/normalize'  # true
> class << self
>   extend DLX::Normalize   # main
>   generic_bind 'laplace-inverse'  # calling DLX::Normalize.generic_bind
> end
NoMethodError: undefined method `module_function' for #<Class:#<Object:0x0000000092e6e0>> 
```

我在这里想念什么？是否以正确的方式访问irb 中*最外层*的Module 类？即使班级*是*的后代，为什么失踪？`class << self``singleton_class.module_exec``module_function`*`Module`*

 ***更新：** 为了使我的问题更加明确，将上述代码包装在新的模块定义中确实有效。我不明白为什么需要这种包装。

```
> require 'dlx/normalize'  # true
> module Dummy
>   extend DLX::Normalize   # main
>   generic_bind 'laplace-inverse'  # calling DLX::Normalize.generic_bind
>                                   # this method calls module_function
> end
> Dummy.generated_laplace(1.234)    # got new module's method
>                                   # previous call to module_function
>                                   # did succeeded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:27:34.043

```
Module.new.respond_to? :module_function
=> false 
```

还

```
module Foo
  p respond_to? :module_function
end
=> false 
```

所以你会在我期望的任何后代中得到相同的答案。*

# php - 将文本文件读入数组，分解分隔符，并在网页的垂直列表中显示

> ID：15721525
> 
> 赞同：-6
> 
> 时间：2013-03-30T17:45:21.180
> 
> 标签：php, arrays, explode

到目前为止，我有下面的代码，但结果，唯一显示的是页面标题。我正在尝试将下面的文本文件读入数组：

```
pear|apple|strawberry|lime|elderberry|watermelon|orange|banana|fig|mango|plum 
```

在网页上显示此文本时，我需要爆炸“|” 分隔符并在垂直列表中显示水果。有什么帮助吗？这是我在正文中的代码：

```
<h1>Sorted Fruits</h1>
<?php
$file = "Exercise5/exercise5.txt";
$FruitList = file($file);
$lines = explode("| ", $c);
foreach ( $lines as $l ) {
    echo $l;
    die();
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:50:59.820

```
$fruits = "pear|apple|strawberry|lime|elderberry|watermelon|orange|banana|fig|mango|plum";
$fruitlist = implode('</li><li>', array_filter(explode('|', $fruits)));
$fruitlist = "
<ul>
  <li>$fruitlist</li>
</ul>
"; 
```

[http://codepad.org/xJcrN1UG](http://codepad.org/xJcrN1UG) (w/example using `ucwords`to capitalize each term)

或者：

```
$fruits = "pear|apple|strawberry|lime|elderberry|watermelon|orange|banana|fig|mango|plum";
$fruitlist = str_replace('|', '</li><li>', $fruits);
$fruitlist = "
<ul>
  <li>$fruitlist</li>
</ul>
"; 
```

前一种方法用 删除空，可能会发生`array_filter()`类似的事情`pear||apple`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:48:33.747

```
<?php
  $string = 'pear|apple|strawberry|lime|elderberry|watermelon|orange|banana|fig|mango|plum';
  $fruits = explode("|", $string);
?>
<ul>
<?php foreach ($fruits as $fruit) : ?>
    <li><?= $fruit; ?></li></li>
<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:48:33.183

简单的任务，但是好的，我为你解决。

```
$string = "pear|apple|strawberry|lime|elderberry|watermelon|orange|banana|fig|mango|plum" ;
$fruits = explode("|", $string) ;
foreach ($fruits as $fruit){
  echo $fruit . "<br/>" ;
} 
```

# c# - 从接口继承一个属性到类

> ID：15721526
> 
> 赞同：0
> 
> 时间：2013-03-30T17:45:24.027
> 
> 标签：c#, winforms, interface

```
interface IRestrictionUserControl
{
    public GeneralRestriction Foo{ get; protected set; }
}

public partial class RestrictionUserControl : UserControl, IRestrictionUserControl
{
    public RestrictionUserControl(Restriction r)
    {
        InitializeComponent();
        Foo = r;
    }
 } 
```

我得到错误：`The name 'Foo' does not exist in the current context`。我究竟做错了什么？

注意：`Restriction`继承自`GeneralRestriction`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:48:08.243

您必须在类中定义 Foo 的实现，因为接口仅定义属性的合同。此外，您必须从接口定义中删除 public 关键字，因为接口定义的所有方法/属性始终是公共的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T17:48:43.870

您必须在派生类中**实现**Foo。

```
public partial class RestrictionUserControl : UserControl, IRestrictionUserControl
{
    public RestrictionUserControl(GeneralRestriction r)
    {
        InitializeComponent();
        Foo = r;
    }

    public GeneralRestriction Foo
    {
        get; protected set;
    }
} 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)

> 接口**仅**包含方法、委托或事件的签名。方法的实现在实现接口的类中完成

**One more point:** Interface members cannot be defined with access modifiers. So you have to change your interface declaration like this otherwise it will not even compile.

```
interface IRestrictionUserControl
{
    public GeneralRestriction Foo{ get; /*protected set;*/ }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T17:47:18.003

RestrictionUserControl = RestrictionUserControl？

我相信你有一个错字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T17:51:34.653

You only inherit members and methods from classes not interfaces. Interface is a template of things which it's going to force the implementing class to have.

So if your interface has a public member property, you will need to implement it in the class, just like you do with the methods.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T17:53:50.533

When you write `GeneralRestriction Foo{ get; protected set; }` in an interface definition, it doesn't mean the same as in a class definition.

In a class the compiler will generate the getter and the setter (since C# 2.0 if I remember well), but in the interface you just say that your property must have a public getter and a protected setter.

So you have to implement them in the derived class as it was said in other answers, and by implement I mean just declare a getter and a setter (you can even copy paste the code from your interface into your class)

# math - OCaml 中的类型级算术

> ID：15721528
> 
> 赞同：5
> 
> 时间：2013-03-30T17:46:07.350
> 
> 标签：math, types, ocaml

好的，更多类型的黑客失败。:) :P

在我为期一周的摆脱（运行时）`assert(n > 0)`而不是静态检查它的追求中，我想出了这个模块：

```
module Nat : sig 
  type z
  type 'n s

  type ('a, 'n) nat = 
          Zero : ('a, z) nat 
        | Succ : ('a, 'n) nat -> ('a, 'n s) nat 

  val add : ('a, 'n) nat -> ('a, 'n s) nat

end = struct          
  type z
  type 'n s
  type ('a, 'n) nat = 
          Zero : ('a, z) nat 
        | Succ : ('a, 'n) nat -> ('a, 'n s) nat 

  let add n = Succ n

  (*  
  let rec to_int n = function 
        | Succ a -> 1 + (to_int a)
        | Zero -> 0
        *)
end 
```

这给出了 Peano 数字，其中数字以它自己的类型编码：

```
# Zero;;
- : ('a, Nat.z) Nat.nat = Zero
# Succ (Zero);;
- : ('a, Nat.z Nat.s) Nat.nat = Succ Zero
# add (Succ Zero);;
- : ('_a, Nat.z Nat.s Nat.s) Nat.nat = Succ (Succ Zero) 
```

但是，最后一个函数`to_int`不会编译：

```
Error: This pattern [Zero -> 0] matches values of type ('a, z) nat
   but a pattern was expected which matches values of type
     ('a, ex#0 s) nat 
```

我认为这是因为 z 和 s 是不同的类型。是否可以使它们成为相同的类型，并且仍然将它们作为幻像类型？

（可能重复：[在 ocaml 中键入级别整数](https://stackoverflow.com/questions/7243780/type-level-integers-in-ocaml)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T18:12:55.757

首先，您的代码中有一个真正的错误：它是`let to_int = function`，不是`let to_int n = function`。

The real problem is that you are using a *polymorphic* recursive function: you are calling it recursively with different types for the second parameter of the `nat` type. As type inference of code using polymorphic recursion is undecidable in the general case, OCaml won't try to guess it for you, so you have to be explicit with a polymorphic recursion annotation:

```
let rec to_int : type n . ('a, n) nat -> int =
   ... 
```

Another point that is not a problem right now but may become one in the future (and show that you still need a bit of training with GADTs): the fact that `'a s` and `z` are distinct types is *essential* to your function working as you want. It tells you that if you have a value of type `('a, z) nat` (note that the `'a` parameter is useless in all this stuff), it can *only* be a `Zero`. You can write the following functions and they're total, you get no exhaustivity warning:

```
let is_zero : ('a, z) nat -> unit = function
  | Zero -> ()
  (* case Succ not considered *)

let equal : type n . ('a, n) nat * ('a, n) nat -> bool = function
  | Zero, Zero -> true
  | Succ n1, Succ n2 -> equal (n1, n2)
  (* cases (Zero, SUcc _) or (Succ _, Zero) not considered *) 
```

If there was a possibility that the types `z` and `'a s` overlap (for example if you define `type 'a s = z`), the type-checker could not reason on these cases being distinct, and you would have to handle the cases that I have omitted here.

The problem with your current definition is that the types `'a s` and `z` are abstracted through a module interface. Inside the definition of the module, the definitions (as distinct abstract types) are visible, but outside the module you don't know anymore how they've been defined, and in fact maybe it was `type 'a s = z`. So when you are outside the module, you also won't be able to write those functions anymore. The solution is to pick concrete definitions for those types, and let them be visible through the module interface, so that the type-checker always know that they don't overlap:

```
module Nat : sig
  type z = Z
  type 'a s = S of 'a
  ...
end ... 
```

It doesn't matter that you will never use those `Z` and `S` constructors, they're just here to let the type-checker know that `z` is never equal to `'a s`. One could have used `int` and `bool` instead.

# html - 语义上标记品牌（网站名称和徽标）

> ID：15721535
> 
> 赞同：0
> 
> 时间：2013-03-30T17:47:00.303
> 
> 标签：html

在网页上进行语义标记品牌的理想方式是什么？当我在 2011 年使用 HTML 4 时，我会执行以下操作之一（取决于是否需要徽标）

```
<div id="top">
    <a href="/">
        <p id="branding">JJ Media Limited</p>
    </a>
</div> 
```

或者

```
<div id="top">
    <a href="/">
        <p id="branding"><img id="logo" src="images/logo.png"/> JJ Media Limited</p>
    </a>
</div> 
```

我反对将品牌包装在标题中，或者将徽标添加为 CSS 的背景，因为我觉得徽标是上下文相关的。

但是，使用 HTML5，您在语义上标记品牌的方式有什么改变吗？约定是否有任何合乎逻辑的变化？

PS我知道id标签'top'是模棱两可的，我纯粹是为了演示目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:11:44.913

是的，但还是差不多。。

```
<header>
    <a href="/"><img src="img.png" alt="image description"/></a>
</header> 
```

# c - Expects char* but is char(*) [20]

> ID：15721539
> 
> 赞同：1
> 
> 时间：2013-03-30T17:47:08.637
> 
> 标签：c, cgi, scanf

I'm trying to write a script to except data from GET request using sscanf. I seem to be having a problem with parsing it with sscanf and passing it on to a variable. I think that the issue is something to do with my char type, but may also have to do with my Regex string because the error gives the group as "%[a-z,A-Z" and not "%[a-z,A-Z]" like I'd expect it to. You can see the full source code at [http://cs.mcgill.ca/~phwang3/cgi-bin/searchRecord.c](http://cs.mcgill.ca/~phwang3/cgi-bin/searchRecord.c), but I've highlighted the main stuff here.

I seem to be getting an error

```
 warning: format ‘%[a-z,A-Z’ expects argument of type ‘char *’, but argument 3 has type ‘char * (*)[20]’ [-Wformat] 
```

at this line

```
if(sscanf(data,"firstName=%[a-z,A-Z]&lastName=%[a-z,A-Z]",&firstName, &lastName)!=2) { 
```

the variables in question are declared before the above line as

```
char firstName[20] = {0};
char lastName[20] = {0}; 
```

also relevant, I suppose, is that the query is stored in the variable "data", and also declared before the poblematic string.

```
char* data;
data = getenv("QUERY_STRING"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:52:30.847

```
if(sscanf(data,"firstName=%[a-z,A-Z]&lastName=%[a-z,A-Z]",
    &firstName, &lastName)!=2) { 
```

You have to pass `firstName` and `lastName` and not `&firstName` and `&lastName`.

# ruby-on-rails-3 - ROR：使用部分

> ID：15721541
> 
> 赞同：0
> 
> 时间：2013-03-30T17:47:19.147
> 
> 标签：ruby-on-rails-3, partial-views

在我的页面左侧有一个用户已经创建的文档列表。以及用于创建/编辑文档的表单。遵循页面设计方式的表示。

```
| list of documents| Edit/Create documents|
|                  |                      |
|                  |                      | 
```

我正在尝试执行以下操作

1）在页面首次加载时显示用于创建新文档的表单。然后在按钮上单击重新加载包含更新列表和新创建文档的页面。

2）当用户单击现有文档之一时，我想更新表单以显示文档的详细信息。

我在想partials将是做到这一点的方法。

我已经完成了（1）的一部分。现在我正在尝试加载现有文档的详细信息。

当我尝试显示现有文档的详细信息时会显示此错误。

```
documents/_form.html.erb where line #1 raised:

undefined local variable or method `document' for #<#<Class:0x007ffe96ff30b0>:0x007ffe96f0e118>
Extracted source (around line #1):

1: <%= form_for document do |f| %>
2: <table>
3:      <tr>
4:      <div class="field">
Trace of template inclusion: app/views/documents/edit.html.erb 
```

**EDIT.html.erb**

```
<h1>Editing document</h1>

<%= render 'form' %> 
```

**索引.html.erb**

```
 <div id="docList">
    <%= search_field(:user, :document) %>

    <% @documents.each do |document| %>
            <li><%= link_to document.name, edit_document_path(document.id) %></li>
    <% end %>
    <br />

    <%= link_to 'New Document', new_document_path %>
    </div>
    <div id="docEdit">
            <%= render :partial => "form", :locals => { :document => Document.new } %>
    </div> 
```

**_form.html.erb**

```
<%= form_for document do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :notes %><br />
    <%= f.text_area :notes %>
  </div>
   <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**更新** **documents_controller.rb**

```
 #GET /documents/new
  # GET /documents/new.json
  def new
    @document = Document.new
    @document.user = current_user

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @document }
    end
  end

  # GET /documents/1/edit
  def edit
    @document = Document.find(params[:id])
  end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:19:22.823

尝试这个：

```
<div id="docEdit">
    <%= render "Folder_name/form", document: Document.new  %>
</div> 
```

UPD：当您访问 /documents/10/edit 时，控制器在编辑操作中找到 id=10 的 doc，并将 var @document 中的 doc 返回到 edit.html.erb。在此模板中，您调用了 render 'form'，将 var @document (render 'form', document: @document) 传入本地 var 文档。只需添加您的 edit.html.erb：

```
<%= render 'form', document: @document %> 
```

# c++ - Destructors and noexcept

> ID：15721544
> 
> 赞同：35
> 
> 时间：2013-03-30T17:47:35.943
> 
> 标签：c++, c++11, destructor, noexcept

I am a little bit confused with destructors and `noexcept`. My understanding was that in C++11 any destructor, including user-defined, is implicitly `noexcept(true)`, even if we `throw` from it. And one has to specify explicitly `noexcept(false)` if they want it to be that way for some reason.

I'm seeing quite the opposite - with GCC 4.7.2, the user-defined destructor, no matter how primitive the class and destructor are, is implicitly `noexcept(false)`. What am I missing here? Is there some hidden gotcha with user-defined destructors?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-30T17:55:07.297

This is a [known bug](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56191) (credits to the OP for finding the bug report), and it seems it has been fixed in GCC 4.8.0\. For instance, the static assertion below will fire on GCC 4.7.2, but not on GCC 4.8.0:

```
struct X
{
    ~X() { };
};

int main()
{
    X x;

    // This will not fire even in GCC 4.7.2 if the destructor is
    // explicitly marked as noexcept(true)
    static_assert(noexcept(x.~X()), "Ouch!");
} 
```

# android - Android SQLite 创建表

> ID：15721545
> 
> 赞同：0
> 
> 时间：2013-03-30T17:47:43.160
> 
> 标签：android, sqlite, activeandroid

我正在尝试使用 1 个表创建简单的数据库并将 activityandroid 用作它的 ORM。但是在开始项目后，我有这样的错误：

```
 03-30 17:41:01.379: INFO/Database(345): sqlite returned: error code = 1, msg = duplicate column name: id
    03-30 17:41:01.379: ERROR/Database(345): Failure 1 (duplicate column name: id) on 0x1e2140 when preparing 'CREATE TABLE IF NOT EXISTS Quote (Id INTEGER PRIMARY KEY AUTOINCREMENT, author TEXT, id INTEGER, text TEXT);'.
    03-30 17:41:01.398: DEBUG/AndroidRuntime(345): Shutting down VM
    03-30 17:41:01.398: WARN/dalvikvm(345): threadid=1: thread exiting with uncaught exception (group=0x40015560)
    03-30 17:41:01.418: ERROR/AndroidRuntime(345): FATAL EXCEPTION: main
            java.lang.RuntimeException: Unable to create application com.activeandroid.app.Application: android.database.sqlite.SQLiteException: duplicate column name: id: CREATE TABLE IF NOT EXISTS Quote (Id INTEGER PRIMARY KEY AUTOINCREMENT, author TEXT, id INTEGER, text TEXT);
            at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3275)
            at android.app.ActivityThread.access$2200(ActivityThread.java:117)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
            at android.os.Handler.dispatchMessage(Handler.java:99)
            at android.os.Looper.loop(Looper.java:123)
            at android.app.ActivityThread.main(ActivityThread.java:3683)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:507)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
            at dalvik.system.NativeStart.main(Native Method)
            Caused by: android.database.sqlite.SQLiteException: duplicate column name: id: CREATE TABLE IF NOT EXISTS Quote (Id INTEGER PRIMARY KEY AUTOINCREMENT, author TEXT, id INTEGER, text TEXT);
            at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
            at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
            at com.activeandroid.DatabaseHelper.createTable(DatabaseHelper.java:138)
            at com.activeandroid.DatabaseHelper.onCreate(DatabaseHelper.java:51)
            at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
            at com.activeandroid.Registry.openDatabase(Registry.java:149)
            at com.activeandroid.Registry.initialize(Registry.java:107)
            at com.activeandroid.ActiveAndroid.initialize(ActiveAndroid.java:8)
            at com.activeandroid.app.Application.onCreate(Application.java:9)
            at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
            at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3272)
            ... 10 more 
```

我什至在任何地方都没有这样的代码。我的 SQL 代码：

```
public class QuoteDatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_NAME = "DB1";
    private static final String TABLE_NAME = "Quote";
    private static final String KEY_ID = "id";
    private static final String KEY_TEXT = "text";
    private static final String KEY_AUTHOR = "author";

    public QuoteDatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String createQuery = "CREATE TABLE " + TABLE_NAME +
                "(" +
                KEY_ID + " INTEGER PRIMARY KEY," +
                KEY_TEXT + " TEXT," +
                KEY_AUTHOR + " TEXT" +
                ")";
        db.execSQL(createQuery);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
} 
```

一些建议为什么会这样？我试图调试它，但在创建数据库之前它失败了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T19:38:04.053

Active Android 将尝试为您创建表格。我认为问题出在这样一个事实，即活动的 android 会在创建的每个表中自动创建一个名为“Id”的列。您的代码还有一个名为 id 的列。

看这里：

```
duplicate column name: id: CREATE TABLE IF NOT EXISTS Quote
  (Id INTEGER PRIMARY KEY AUTOINCREMENT, author TEXT, id INTEGER, text TEXT) 
```

有 Id 整数主键和 id 整数。

# redis - 如何使用 ServiceStack.Redis 消息队列发送电子邮件通知？

> ID：15721547
> 
> 赞同：4
> 
> 时间：2013-03-30T17:47:46.627
> 
> 标签：redis, message-queue, servicestack

我正在深入研究 ServiceStack.Redis 客户端的消息传递功能，并试图理解事物。我最初的用途是将通知消息排队，然后在发送电子邮件的 Windows 服务中处理这些消息。

1.  我可以运行多个 RedisMqServer 实例（在不同的机器上）来处理消息吗？（从我所看到的，它看起来会很好）

2.  如果 redis 服务器死了，当它重新启动时，RedisMqServer 会从它停止的地方拾取并继续处理队列中的消息吗？（我意识到如果redis进程在保存到磁盘之前就死掉了，可能会丢失一些消息）

3.  您还有其他入门技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:07:55.763

我发现默认情况下 Redis 大约每 5 分钟保存一次数据。我对我的 redis.conf 文件进行了这些更改，以确保在最坏的情况下我最多会丢失 1 秒的数据：

告诉 redis 使用事务日志并每 1 秒将其刷新到磁盘。appendonly 是 appendfsync 每隔一段时间

我测试了运行多个 RedisMqServer 进程，它工作正常。

# java - 在 Java 绑定中循环遍历 OpenCV Mat

> ID：15721550
> 
> 赞同：4
> 
> 时间：2013-03-30T17:48:03.563
> 
> 标签：java, c++, opencv, image-processing, javacv

我正在尝试将 C++ 方法从使用 OpenCV 收到的[先前答案](https://stackoverflow.com/a/15699181/131194)转换为使用 OpenCV Java 绑定的 Java

C++ 代码：

```
cv::Mat gray;
cv::Mat element = cv::getStructuringElement(cv::MORPH_CROSS,
                                       cv::Size(2 * erosion_size + 1, 2 * erosion_size + 1),
                                       cv::Point(erosion_size, erosion_size) );
cv::erode(gray, gray, element);
 // Scan the image searching for points and store them in a vector
std::vector<cv::Point> points;
cv::Mat_<uchar>::iterator it = gray.begin<uchar>();
cv::Mat_<uchar>::iterator end = gray.end<uchar>();
for (; it != end; it++)
{
    if (*it) 
        points.push_back(it.pos()); 
} 
```

我不知道如何`gray`像在 C 代码中那样循环变量。以下是我到目前为止所得到的：

Java 代码：

```
Mat gray = new Mat();
Mat element = Imgproc.getStructuringElement(
                Imgproc.MORPH_CROSS, new Size(2 * erosion_size + 1, 2 * erosion_size + 1), new Point(erosion_size, erosion_size)
        );
Imgproc.erode(img, gray, element);
List <Point> p = new ArrayList<Point>();
//How to loop through the gray variable? 
```

我浏览了[API](http://docs.opencv.org/java/org/opencv/core/Mat.html)，似乎`Mat`确实有获取方法`rows`，`cols`但我无法调用`Iterator`任何东西..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:09:18.797

如果`Mat`是真的*gray*，它可能是类型`CV_8U`：

```
for (int i = 0; i < gray.rows; i++)
{
    for (int j = 0; j < gray.cols; j++)
    {
        byte pixel = gray.get(i, j);
    }
} 
```

我没有设置环境来测试此代码。有关更多信息，请查看[此线程](http://answers.opencv.org/question/5/how-to-get-and-modify-the-pixel-of-mat-in-java/?answer=8#post-id-8)。

如果您使用的是**JavaCV**，前段时间我编写了一个代码来迭代彩色图像的像素并将其转换为灰度，如下所示：

```
 IplImage imageSrc = cvLoadImage("pipeline.png", CV_LOAD_IMAGE_COLOR);
    if (imageSrc == null) 
    {
        System.out.println("!!! Failed loading image");
        return;
    }

    double r, g, b;
    r = g = b = 0.0;               

    IplImage imageDst = IplImage.create(imageSrc.width(), imageSrc.height(), IPL_DEPTH_8U, 3);

    CvMat imagePixels = CvMat.createHeader(imageDst.height(), imageDst.width(), CV_32FC1);  
    cvGetMat(imageDst, imagePixels, null, 0); 
    int x, y;
    for(y=0; y<imageSrc.height(); y++)
       for(x=0; x<imageSrc.width(); x++)
       {
            CvScalar rgb = cvGet2D(imagePixels, y, x);
            r = rgb.val(0);
            g = rgb.val(2);
            b = rgb.val(1);

            double gray = (r + g + b) / 3;

            CvScalar scalar = new CvScalar();
            scalar.setVal(0, gray);
            scalar.setVal(1, gray);
            scalar.setVal(2, gray);
           cvSet2D(imagePixels, y, x, scalar);
       }
       imageDst = new IplImage(imagePixels);  

       IplImage result = new IplImage(imagePixels); 
       cvSaveImage("manual_gray.png", result);

       cvReleaseImage(imageSrc); 
```

# ios - ios UICollectionView - 设置自动高度

> ID：15721559
> 
> 赞同：2
> 
> 时间：2013-03-30T17:48:45.227
> 
> 标签：ios, uicollectionview

我正在使用 UICollection 视图创建 3x4 按钮矩阵。它在 iPhone4 中很好看，但高度很小。集合视图也不滚动，因为它在可用空间中显示 3x4 矩阵按钮。
现在，当我在 iPHone5 上运行相同的应用程序时，我看到按钮矩阵下方底部有很多空间。我想收集视图来增加单元格之间的垂直间距。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T07:50:06.527

通过数学制作 UICollectionViewFlowLayout，例如：

```
CGRect mainRect = [[UIScreen mainScreen] bounds];
CGFloat mainWidth = mainRect.size.width;
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
flowLayout.minimumLineSpacing = mainWidth/10;
flowLayout.itemSize = CGSizeMake(mainWidth/4, mainWidth/4); 
```

然后分配，因为 UICollectionViewFlowLayout ： UICollectionViewLayout

```
self.collectionView.collectionViewLayout = flowLayout; 
```

# amazon-web-services - 使用 EC2 在 S3 上备份

> ID：15721560
> 
> 赞同：2
> 
> 时间：2013-03-30T17:49:02.630
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, backup

我想在 S3 上备份我的 Web 服务器数据。我的想法是每天两次启动 EC2 实例，从 Web 服务器（不在亚马逊上）提取数据，将其存储在 S3 上并关闭。

我不想将备份从我的网络服务器直接推送到 S3，因为我更喜欢使用 rsync 并且我不想在网络服务器上存储 s3 详细信息。

我是 AWS 新手，所以我的问题是：

*   这似乎是一个很好的解决方案？
*   如果我关闭我的 EC2 实例，它会保留数据（配置）吗？
*   在 EC2 上将 S3 挂载为文件系统的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:53:27.753

启动一个 EC2 实例只是为了进行同步似乎有点过分——任何机器都足够了。除非您将 EBS 用于根磁盘或创建包含配置的新机器映像，否则不会保存您添加到 EC2 实例的数据。

至于实际同步，请查看[s3sync](https://github.com/ms4720/s3sync)或[s3fs](http://code.google.com/p/s3fs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T04:03:21.740

> 1）这似乎是一个好的解决方案吗？

使用 EC2 似乎有点矫枉过正——但如果您愿意，您可以使用微型实例甚至现货实例来降低开销。否则，每年**3 欧元**的廉价[vps](http://bhost.net/)甚至[迷你 vps](https://clients.inceptionhosting.com/cart.php?gid=13)就足够了。

 **> 2）如果我关闭我的 EC2 实例，它会保留数据（配置）吗？

是的。只要您停止实例（而不是终止）。如果您想要一个永久 IP 地址，您可以使用 Amazon Eleastic IP - 随 EC2 免费（但有限）提供。

> 3) 将 S3 挂载为 EC2 上的文件系统的好方法是什么？

我认为在您的第一台 Web 服务器上安装您的 S3 指令就足够了。但是由于您确实提到您不希望您的网络服务器上有任何 S3 详细信息（尽管您可以将敏感详细信息放在 apache 容器之外），[所以 s3f3](https://code.google.com/p/s3fs/wiki/FuseOverAmazon)将适合这种情况。在您启动实例的那一刻，您设置的自动挂载将自动将您的实例与 S3 同步。否则，您也可以选择通过 cron 作业执行此操作 - 但这需要更多脚本。**

# html - CSS/HTML 下拉导航 - 更改高度和宽度

> ID：15721567
> 
> 赞同：1
> 
> 时间：2013-03-30T17:49:46.080
> 
> 标签：html, css

我有这个导航菜单的 CSS 代码：

```
ul#css3menu_top,ul#css3menu_top ul {
    margin:0;
    list-style:none;
    padding:0;
}
ul#css3menu_top,ul#css3menu_top .submenu {
    background-color:#EEEEEE;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
}
ul#css3menu_top .submenu {
    visibility:hidden;
    position:absolute;
    left:0;
    top:100%;
    opacity:0;
    -moz-transition:all 0.5s;
    -webkit-transition:opacity 0.5s;
    -o-transition:opacity 0.5s;
    -moz-box-shadow:3.5px 3.5px 5px #000000;
    -webkit-box-shadow:3.5px 3.5px 5px #000000;
    box-shadow:3.5px 3.5px 5px #000000;
    float:left;
    background-color:#EEEEEE;
    border-width:2px;
    border-radius:6px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-color:#FFF;
    padding:0 10px 10px;
}
ul#css3menu_top li:hover>.submenu {
    visibility:visible;
    opacity:1;
}
ul#css3menu_top li {
    position:relative;
    display:block;
    white-space:nowrap;
    font-size:0;
    float:left;
}
ul#css3menu_top li:hover {
    z-index:1;
}
ul#css3menu_top ul .submenu {
    z-index:2;
    position:absolute;
    left:100%;
    top:0;
}
ul#css3menu_top {
    font-size:0;
    width:100%;
    z-index:999;
    position:relative;
    display:inline-block;
    zoom:1;
    padding:0 0%;
    margin:0 0%;
    *display:inline;
}
ul#css3menu_top .column {
    float:left;
}
* html ul#css3menu_top li a{
    display:inline-block;
}
ul#css3menu_top>li {
    margin:0;
    width:17%;
}
ul#css3menu_top li.toplast{
    width:15%;
}
ul#css3menu_top a:active, ul#css3menu_top a:focus {
    outline-style:none;
}
ul#css3menu_top a{
    display:block;
    vertical-align:middle;
    text-align:left;
    text-decoration:none;
    font:bold 14px Calibri;
    color:#EEEEEE;
    text-shadow:#FFF 0 0 1px;
    cursor:pointer;
    padding:6px 15px 6px 3px;
    background-color:#666666;
    background-image:url("mainbk.png");
    background-repeat:repeat;
    background-position:0 0;
    border-width:0 0 0 1px;
    border-style:solid;
    border-color:#c0c0c0;
}
ul#css3menu_top ul li {
    float:none;
    margin:10px 0 0;
}
ul#css3menu_top ul a {
    text-align:left;
    padding:4px;
    background-color:#EEEEEE;
    background-image:none;
    border-width:0;
    border-radius:0px;
    -moz-border-radius:0px;
    -webkit-border-radius:0px;
    font:14px Calibri;
    color:#666666;
    text-decoration:none;
}
ul#css3menu_top li:hover>a,ul#css3menu_top li a.pressed {
    background-color:#EEEEEE;
    color:#666666;
    background-position:0 100px;
    text-decoration:none;
}
ul#css3menu_top img {
    border:none;
    vertical-align:middle;
    margin-right:6px;
}
ul#css3menu_top span {
    display:block;
    overflow:visible;
    background-position:right center;
    background-repeat:no-repeat;
    padding-right:0px;
}
ul#css3menu_top ul span {
    padding-right:8px;
}
ul#css3menu_top ul li:hover>a,ul#css3menu_top ul li a.pressed {
    background-color:#EEEEEE;
    background-image:none;
    color:#666666;
    text-decoration:none;
}
ul#css3menu_top li.topfirst>a {
    padding-left: 7px;
    border-width:0;
    border-radius:4px 0 0 4px;
    -moz-border-radius:4px 0 0 4px;
    -webkit-border-radius:4px;
    -webkit-border-top-right-radius:0;
    -webkit-border-bottom-right-radius:0;
}
ul#css3menu_top li.toplast>a {
    padding-right: 7px;
    border-radius:0 4px 4px 0;
    -moz-border-radius:0 4px 4px 0;
    -webkit-border-radius:0;
    -webkit-border-top-right-radius:4px;
    -webkit-border-bottom-right-radius:4px;
}

@media only screen and (max-width:900px),only screen and (max-device-width:900px){
ul#css3menu_top>li{width:33%;}ul#css3menu_top>li:nth-child(3){width:34%}ul#css3menu_top>li:nth-child(n+4){width:33%;}ul#css3menu_top>li:nth-child(6){width:34%}}
@media only screen and (max-width:600px),only screen and (max-device-width:600px){
ul#css3menu_top>li{width:50%;}ul#css3menu_top>li:nth-child(n+3){width:50%;}ul#css3menu_top>li:nth-child(n+5){width:50%;}}
@media only screen and (max-width:450px),only screen and (max-device-width:450px){
ul#css3menu_top>li{width:100%;}ul#css3menu_top>li:nth-child(n+2){width:100%;}ul#css3menu_top>li:nth-child(n+3){width:100%;}ul#css3menu_top>li:nth-child(n+4){width:100%;}ul#css3menu_top>li:nth-child(n+6){width:100%;}}

/*opera hack*/
@media only screen and (min-width:900px){
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top{
            display:table;
        }
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top>li{
            width:auto;
            float:none;
            display:table-cell;
        }
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top li.toplast{
            width:auto;
            display:table-cell;
        }

} 
```

我需要一种方法来解决如何更改主要链接的高度和宽度，即：DEMO / DOWNLOAD / CONTACT 链接

这是一个小提琴：http: [//jsfiddle.net/EZh85/](http://jsfiddle.net/EZh85/)

有什么想法我能做什么？

编辑：如何将悬停时打开的子菜单更改为在顶部有一个边距，这样它就不会显示在主菜单上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:58:23.817

添加`height: 24px;`到`ul#css3menu_top a`，对于其他 2 个选项卡，您正在使用内联样式，以便您可以通过修改内联样式来更改高度

[**JS小提琴**](http://jsfiddle.net/EZh85/2/)

> 旁注：重写样式，一团糟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:00:31.397

您要定位的选择器如下：

```
/* For width */
ul#css3menu_top .topmenu
ul#css3menu_top .toplast
/* For height */
ul#css3menu_top a 
```

不幸的是，有一些内联样式和像这样的非常具体的样式在尝试正常设置样式时会导致问题：

```
ul#css3menu_top>li:nth-child(n+3) {
    width: 50%;
} 
```

Ideally you should remove all inline styles and rules with width/height conflict with yours and include these styles:

[jsFiddle](http://jsfiddle.net/Tyriar/JQ5kG/)

```
ul#css3menu_top .topmenu,
ul#css3menu_top .toplast {
    width:100px;
}
ul#css3menu_top a{
    height: 50px;
    line-height: 50px;
} 
```

I just added `!important` so they are overridden but this is bad practice and you should remove the inline styles and other rules if you want cleaner CSS.

```
ul#css3menu_top .topmenu,
ul#css3menu_top .toplast {
    width:100px!important;
}
ul#css3menu_top a{
    height: 50px!important;
    line-height: 50px!important;
} 
```

# ruby-on-rails - 如何将正确数量的参数传递给 Rails 控制器

> ID：15721569
> 
> 赞同：1
> 
> 时间：2013-03-30T17:50:12.523
> 
> 标签：ruby-on-rails

我正在尝试通过 interviews_participants 控制器删除 interview_participant 表中的一个条目。我已经解决了许多问题，但遇到了一个错误：

InterviewsParticipantsController#destroy 中的 ArgumentError “参数数量错误（0 代表 1）”

interview_participant 的模型是...

```
class InterviewParticipant < ActiveRecord::Base
  belongs_to :interview
  belongs_to :participant

  attr_accessible :interview_id, :participant_id 
```

并且 interview_participants 控制器中的销毁方法是

```
 def destroy
    @interview_participant = InterviewParticipant.where(:interview_id => params[:interview_id]).where(:participant_id => params[:participant_id])
    @interview_participant.destroy

    respond_to do |format|
      format.html { redirect_to interview_participant_url }
      format.json { head :no_content }
    end
  end 
```

我希望能够通过这种销毁方法删除 interview_participant 表中的行来从面试中删除参与者。在采访的“显示”视图中，我正在列出参与者，并且想要一个按钮来删除参与者。在采访的显示视图中，我有...

```
<p>
  <b>Participants</b>
  <% @interview.participants.each do |participant| %>
    <dd><%= participant.name %></dd>
    <dd><%= button_to( "Remove", {
                     :controller => "interview_participants",
                     :action => "destroy",
                     :interview_id => @interview.id,
                     :participant_id => participant.id },
                     :method => :delete,
                     :confirm => "Are you sure?"
                     ) %></dd>
  <% end %>
</p> 
```

我认为我传递了正确的论点，因为我的 URL 是`/interview_participants/1?interview_id=3&participant_id=2`（当我按下参与者 2 和采访 3 旁边的按钮时）。但是我在浏览器中收到“错误数量的参数”错误。我已经看了几个小时了，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:11:05.473

您遇到的问题是您的查询：

```
@interview_participant = InterviewParticipant.where(:interview_id => params[:interview_id]).where(:participant_id => params[:participant_id]) 
```

由于您使用的是`where`.

您要么需要调用`.first`它来获取单个对象，要么调用`.destroy_all`

我建议更新您的查询以改为使用`find`，以便它返回一个单一的资源，例如：

```
@interview_participant = InterviewParticipant.find_by_interview_id_and_participant_id(params[:interview_id], params[:participant_id]) 
```

以便您可以`.destroy`正确调用

# sql - 如何使用 hive ql 生成序列号

> ID：15721577
> 
> 赞同：0
> 
> 时间：2013-03-30T17:51:12.773
> 
> 标签：sql, hadoop, hive

如何编写配置单元 sql 以从表 A 中获取表 B（没有任何 UDF）？

## 表A

```
PLATFORM    USER_ID CLICK_TIME  CLICK_URL 
```

WEB 12332321 2013-03-21 13:48:31.324 /home/

WEB 12332321 2013-03-21 13:48:32.954 /selectcat/er/

WEB 12332321 2013-03-21 13:48:46.365 /er/viewad/12.html

WEB 12332321 2013-03-21 13:48:53.651 /er/viewad/13.html

WEB 12332321 2013-03-21 13:49:13.435 /er/viewad/24.html

WEB 12332321 2013-03-21 13:49:35.876 /selectcat/che/

WEB 12332321 2013-03-21 13:49:56.398 /che/viewad/93.html

WEB 12332321 2013-03-21 13:50:03.143 /che/viewad/10.html

WEB 12332321 2013-03-21 13:50:34.265 /home/

WAP 32483923 2013-03-21 23:58:41.123 /m/home/

WAP 32483923 2013-03-21 23:59:16.123 /m/selectcat/fang/

WAP 32483923 2013-03-21 23:59:45.123 /m/fang/33.html ......

## 表 B

平台 USER_ID SEQ FROM_URL TO_URL

WEB 12332321 1 NULL /home/

WEB 12332321 2 /home/ /selectcat/er/

WEB 12332321 3 /selectcat/er/ /er/viewad/12.html

网页 12332321 4 /er/viewad/12.html /er/viewad/13.html

网页 12332321 5 /er/viewad/13.html /er/viewad/24.html

WEB 12332321 6 /er/viewad/24.html /selectcat/che/

WEB 12332321 7 /selectcat/che/ /che/viewad/93.html

网页 12332321 8 /che/viewad/93.html /che/viewad/10.html

网页 12332321 9 /che/viewad/10.html /home/

WAP 32483923 1 NULL /m/home/

WAP 32483923 2 /m/home/ /m/selectcat/fang/

WAP 32483923 3 /m/selectcat/fang/ /m/fang/33.html

WAP 32483923 4 /m/fang/33.html /m/fang/54.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:13:26.997

没有 UDF 的 Rank() 现在是不可能的。您可以使用 PIG 或使用伪 UDF。这是类似的帖子（[来源](https://stackoverflow.com/questions/14219969/rank-over-in-hive)）。GL！

# android - 调用另一个线程后应用程序崩溃，但并不总是发生

> ID：15721582
> 
> 赞同：0
> 
> 时间：2013-03-30T17:51:29.197
> 
> 标签：android, android-alertdialog

我无法确定我错过了什么......

我有一个在后台运行的线程，`doWork()`它监听一个等待新电子邮件的 gmail 帐户。当它收到一封新电子邮件时，我会显示一个对话框屏幕，其中包含打印或不打印电子邮件的选项，并且任何选项都会`doWork()`再次调用该方法。

此外，当该方法`doWork()`仍在监听后台运行的 gmail 帐户时，用户可以打印之前已经下载并插入数据库的电子邮件。打印后`doWork()`再次调用该方法。

下面的例外情况会在打印电子邮件后立即发生，而它仍在收听 gmail 帐户。...

以下是我得到的例外情况：

```
 04-01 16:39:52.365: I/System.out(22358): Subject : 
            04-01 16:39:55.705: D/dalvikvm(22358): GC_CONCURRENT freed 364K, 11% free 7106K/7943K, paused 3ms+3ms
            04-01 16:39:56.400: E/get message(22358): java.lang.NullPointerException
            04-01 16:39:56.400: W/dalvikvm(22358): threadid=11: thread exiting with uncaught exception (group=0x40c781f8)
            04-01 16:39:56.405: E/AndroidRuntime(22358): FATAL EXCEPTION: Thread-2153
            04-01 16:39:56.405: E/AndroidRuntime(22358): java.lang.NullPointerException
            04-01 16:39:56.405: E/AndroidRuntime(22358):    at com.example.gmailreceiver.MainActivity.retrieveEmails(MainActivity.java:578)
            04-01 16:39:56.405: E/AndroidRuntime(22358):    at com.example.gmailreceiver.MainActivity$6.run(MainActivity.java:312)
            04-01 16:39:56.405: E/AndroidRuntime(22358):    at java.lang.Thread.run(Thread.java:856)
            04-01 16:40:00.290: I/System.out(22358): Total MSG: 4 unreaed: 4 
```

这是一个执行的方法，直到在 Gmail 帐户中找到新电子邮件，然后它调用该行中的对话框`dialogMessage();`：

```
 public void doWork(){
    try {
        Thread.sleep(11000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        disableHotspot();
        enableWifi();
        while(!isOnline()){
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    tvStatus.setText("Waiting for a WiFi connection....");                 
                    tvStatus.setTextColor(Color.RED);   
                }
            });
        }

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                tvStatus.setText("Connected!");
                tvStatus.setTextColor(Color.BLUE);                }
        });

        boolean temp = false;
        //while(!temp){
            //retrieveEmails();

        receiptPrint = new Thread(new Runnable() {

            @Override
            public void run() {
                retrieveEmails();

                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        if(newemail){
                            getOrderDB();
                            etOrder.setText(lOrder.get(0).toString());
                            dialogMessage();
                        }
                    }
                });

            }
            });
            receiptPrint.start();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        //e.printStackTrace();
        Log.e("doWork()", e.toString());
    }
} 
```

这是我的`dialogMessage():`

```
 public void dialogMessage() {

        final Dialog dialog = new Dialog(this);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.dialog_safe_bag);
        dialog.getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        //dialog.setTitle(this.getString(R.string.alert_title_Confirm));
        dialog.setCancelable(false);

       // dialog.setOnDismissListener();

        final Button btnOK = (Button) dialog.findViewById(R.id.dialog_btnOK);
        final Button btnCancel = (Button) dialog.findViewById(R.id.dialog_btnCancel);

        getWindow().setSoftInputMode(
                  WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

       // getOrderDB();

        EditText etOrderDialog = (EditText)dialog.findViewById(R.id.etorderDialog);

        if(qtyOrder > 0){
            etOrderDialog.setText(lOrder.get(0).toString());
        }

        btnOK.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(final View v) 
        {               
                Log.d("","Clicked on (Dialog) OK Button");

                // TODO: create an Alert
                //printing();

                new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected void onPreExecute() {

                        //Show your progress dialog in here
                         printingDialog = ProgressDialog.show(v.getContext(), "Printing...", "Please wait", true, false);
                        super.onPreExecute();
                    }

                    @Override
                    protected Void doInBackground( Void... params ) {

                        printing();
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute( Void result ) {
                        //Dismiss your progress dialog here
                        printingDialog.dismiss();
                        doWork();
                    }
                }.execute();

                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        btnPrint.setEnabled(false);
                    }
                });

                dialog.dismiss();
        }

        }); 

        btnCancel.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
        {               
                Log.d("","Clicked on (Dialog) Cancel Button");
                dialog.cancel();
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        btnPrint.setEnabled(false);
                    }
                });
                 doWorkForDialog();
        }

        }); 

        dialog.show();
    } 
```

# ruby-on-rails - can't run server or bundle update

> ID：15721588
> 
> 赞同：2
> 
> 时间：2013-03-30T17:52:01.050
> 
> 标签：ruby-on-rails

Ruby and Rails has been running fine on my Mac, but I'm suddenly having some problems. When I try to run the server or generate a model (i.e. use the 'rails' command in anyway) I get this error

```
/Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:187:in `stub_source_index170': uninitialized constant Gem::SourceIndex (NameError)
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:353:in `stub_rubygems'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:250:in `replace_entrypoints'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:14:in `setup'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:116:in `setup'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/setup.rb:7:in `<top (required)>'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:110:in `require'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:110:in `rescue in require'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:35:in `require'
    from /Users/tm/Sites/anwaltythree/config/boot.rb:6:in `<top (required)>'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/tm/.rbenv/versions/1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require'
    from script/rails:5:in `<main>' 
```

I randomly tried to run bundle update and got this error

```
Fetching gem metadata from https://rubygems.org/..

NoMethodError: private method `open' called for Gem::Package:Class
An error occurred while installing rake (10.0.4), and Bundler cannot continue.
Make sure that `gem install rake -v '10.0.4'` succeeds before bundling. 
```

Following its instructions, I installed rake

```
gem install rake -v '10.0.4'
Successfully installed rake-10.0.4
Installing ri documentation for rake-10.0.4 
```

However, I get the same errors with the 'rails' command and bundle update as described above.

The error is occurring across multiple project folders.

The only difference between today and yesterday (when everything worked fine) is that I installed jekyll last night and, while troubleshooting that, ran some 'sudo' commands, which I normally don't ever have to run. I have no idea whether that's related to the current problem. I'm just providing context.

I'm at a loss for what to do next. Can you suggest what I might try

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T18:07:06.817

Its quite possible that the versioning of ruby/gem/bundler might have switched or changed. Couple of things you could do is

1.  Check what version of ruby you are on `ruby -v`.
2.  Then pass in `rvm use 1.9.3` your terminal again.
3.  I remember reading Gem::Package no longer supports the open method. So try updating your gem system (`gem update --system`).
4.  You can then bundle your gem file again (its a good idea to update your bundle again, this could be the issue, so `gem install bundler`)
5.  Make sure to delete the .lock file before bundle.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T07:08:43.317

I just ran

`gem update bundler`

Then all good to go.

# javascript - 任何确定透明背景颜色 CSS 的方法

> ID：15721594
> 
> 赞同：0
> 
> 时间：2013-03-30T17:52:34.820
> 
> 标签：javascript, background-color

这里有很多关于在 javascript 中确定背景颜色的文章，但我还没有看到这个问题得到解决：假设我有一个空文档，没有别的，没有样式。两个元素的getcomputedstyle，背景颜色是“透明的”。但那是什么颜色？用户选择的默认值，通常是白色，但可以是任何值。所以没有办法找出那是什么？似乎是 DOM 中的一个缺陷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:56:02.953

看看[这家伙使用的技巧。](http://www.ruzee.com/blog/2006/07/retrieving-css-styles-via-javascript/)本质上，获得真实颜色的唯一方法是继续处理父元素，直到找到提供颜色定义的元素。

> 当为 ID 为 someid 的元素调用时，上述方法将返回“透明”，但有两个例外：
> 
> Safari 将返回“rgba(0, 0, 0, 0)”，表示透明，因为第四个值代表不透明度，即 0。Konqueror 3.5 将返回“#000000”，它同时是黑色的Konqueror 的一个已知错误。我曾尝试使用 getPropertyCSSValue，但那个完全无聊......
> 
> 现在，如果要检索元素的“真实”背景颜色，则必须递归地向上移动层次结构，直到找到没有透明背景的元素。但是，您必须在 document.body 处停止并假定白色作为背景色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:44:54.447

透明色是`rgba(0,0,0,0)`。它是 A=0 的任何 RGB，即 Alpha 必须设置为 0。

# asp.net - 检查行是否已经存在

> ID：15721596
> 
> 赞同：0
> 
> 时间：2013-03-30T17:52:55.483
> 
> 标签：asp.net, sql-server, vb.net, validation, sql-server-2012

我正在尝试对注册表单进行验证，以检查用户名/姓名+姓氏是否已经存在。

这是我尝试过的：

```
Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
    Dim registerSQL As SqlCommand
    Dim checkCredentialsSQL As SqlCommand
    Dim sqlComm As String
    Dim sqlCommName As String
    Dim sqlCommUsername As String

    sqlComm = "INSERT INTO users(Username, Password, Name, Surname, Address1, Address2, " +
        "City, Country, date_of_birth, age, Occupation, department, work_location, " +
        "project_manager,team_leader, team_leader_id, project_manager_id, " +
        "date_registration, contract_type, contract_duration) " +
        "VALUES(@p1, @p2,@p3,@p4,@p5,@p6,@p7,@p8,@p9,@p10,@p11,@p12,@p13,@p14,@p15," +
        "@p16,@p17,@p18,@p19,@p20)"

    sqlCommName = "SELECT name, surname FROM users WHERE name='" + txtName.Text + "' and surname='" + txtSurname.Text + "'"
    sqlCommUsername = "SELECT username FROM users WHERE username='" + txtUsername.Text + "'"

    conn.Open()

    checkCredentialsSQL = New SqlCommand(sqlCommName, conn)

    If checkCredentialsSQL.ExecuteScalar IsNot Nothing Then

        lblName.Text = txtName.Text + " " + txtSurname.Text + "is already registered."
        lblName.Visible = True

    Else

        checkCredentialsSQL = New SqlCommand(sqlCommUsername, conn)

        If checkCredentialsSQL.ExecuteScalar IsNot Nothing Then

            lblUsername.Text = "'" + txtUsername.Text + "' is already taken."

        Else

            registerSQL = New SqlCommand(sqlComm, conn)
            registerSQL.Parameters.AddWithValue("@p1", Username)
            registerSQL.Parameters.AddWithValue("@p2", Password)
            registerSQL.Parameters.AddWithValue("@p3", Name)
            registerSQL.Parameters.AddWithValue("@p4", Surname)
            registerSQL.Parameters.AddWithValue("@p5", Address1)
            registerSQL.Parameters.AddWithValue("@p6", Address2)
            registerSQL.Parameters.AddWithValue("@p7", City)
            registerSQL.Parameters.AddWithValue("@p8", Country)
            registerSQL.Parameters.AddWithValue("@p9", DOB)
            registerSQL.Parameters.AddWithValue("@p10", Age)
            registerSQL.Parameters.AddWithValue("@p11", Occupation)
            registerSQL.Parameters.AddWithValue("@p12", Department)
            registerSQL.Parameters.AddWithValue("@p13", WorkLocation)
            registerSQL.Parameters.AddWithValue("@p14", ProjectManager)
            registerSQL.Parameters.AddWithValue("@p15", TeamLeader)
            registerSQL.Parameters.AddWithValue("@p16", TeamLeaderID)
            registerSQL.Parameters.AddWithValue("@p17", ProjectManagerID)
            registerSQL.Parameters.AddWithValue("@p18", RegistrationDate)
            registerSQL.Parameters.AddWithValue("@p19", ContractType)
            registerSQL.Parameters.AddWithValue("@p20", ContractDuration)

            registerSQL.ExecuteNonQuery()

        End If

    End If

    conn.Close() 
```

这样做是否可行/安全/建议这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:17:30.877

这是一个简单的存储过程，它检查您要检查的两个条件（更多内容见下文）：

```
CREATE PROCEDURE dbo.CreateUser
  @username NVARCHAR(255),
  @name     NVARCHAR(64),
  @surname  NVARCHAR(64)
  /* ... other params ... */
AS
BEGIN
  SET NOCOUNT ON;

  IF EXISTS (SELECT 1 FROM dbo.users WHERE username = @username) 
  BEGIN
    RAISERROR('Username %s is already registered.', 11, 1, @username);
    RETURN -1;
  END

  IF EXISTS (SELECT 1 FROM dbo.users WHERE name = @name AND surname = @surname) 
  BEGIN
    RAISERROR('Name %s %s is already registered.', 11, 1, @name, @surname);
    RETURN -2;
  END

  BEGIN TRY
    INSERT dbo.Users(username,  name,  surname,  ...other columns...)
             SELECT @username, @name, @suername, ...other params...;
  END TRY
  BEGIN CATCH
    DECLARE @msg NVARCHAR(255) = ERROR_MESSAGE();
    RAISERROR(@msg, 11, 1);
    RETURN -3;
  END CATCH
END 
```

现在您的 VB.Net 代码要简单得多：

```
Dim conn As New SqlConnection("...conn string...")
conn.Open()
Dim sql As New SqlCommand("dbo.CreateUser", conn)
sql.CommandType = CommandType.StoredProcedure
rv = sql.Parameters.Add("@rv", SqlDbType.Int)
rv.Direction = ParameterDirection.ReturnValue    

sql.Parameters.AddWithValue("@username", Username)
sql.Parameters.AddWithValue("@name",     Name)
sql.Parameters.AddWithValue("@surname",  Surname)
... other params ...

sql.ExecuteNonQuery()
Debug.Print "Return value: " & rv.ToString

...act accordingly depending on error raised and/or return value     
...maybe you want TRY/CATCH here?

conn.Close() 
```

虽然尝试插入（使用`WHERE`子句，或者只是让约束引发错误）在技术上可能是一种可行的方法，但我认为这不是一个好主意。第一个是因为您的代码无法告诉您是哪个条件导致了问题，第二个是因为让 SQL Server 为您引发异常非常昂贵：

*   [不同错误处理技术的性能影响](http://www.sqlperformance.com/2012/08/t-sql-queries/error-handling)
*   [在进入 SQL Server TRY 和 CATCH 逻辑之前检查潜在的约束违规](http://www.mssqltips.com/sqlservertip/2632/checking-for-potential-constraint-violations-before-entering-sql-server-try-and-catch-logic/?utm_source-AaronBertrand)

当然，这并不意味着你不应该有潜在的限制。它们应该存在于用户不通过您的存储过程、应用程序层等的情况下。

哦，我同意其他人的观点。你真的认为只有一个约翰史密斯会注册吗？与其他人同名并不是阻止某人注册恕我直言的非常正当的理由。

* * *

PS 如果我的 VB.Net 代码远非完美，我深表歉意。我不是用VB写的，其中一些是有根据的猜测......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:51:59.180

虽然我不同意您使用的标准（因为姓名+姓氏几乎肯定*不是*一个人的唯一标识符），但一般形式应该是一种尝试`INSERT`：

```
INSERT INTO TabA (Val1,Val2,Val3)
SELECT @Val1,@Val2,@Val3
WHERE NOT EXISTS (SELECT * FROM TabA where Val1 = @Val1 or (Val2 = @Val2 and Val3 = @Val3) 
```

否则，您仍然将自己暴露在竞争条件下。

而且，根据您正在运行的并发设置，您可能*仍*需要处理违反约束（我假设您*正在*执行您在数据库级别也有的任何唯一性约束）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:05:03.753

该`sqlCommName`命令不受 SQL 注入的保护。如果`txtName.Text`包含`existing_username AND 1 = 0`用户可以注册两次。

# windows - 来自 Windows Cmd 的 Cygwin Bash 未运行可执行文件

> ID：15721597
> 
> 赞同：2
> 
> 时间：2013-03-30T17:52:56.160
> 
> 标签：windows, bash, cygwin, exe

我有一个我在 cygwin 中编译的程序，我试图从一个批处理文件中调用它：

```
D:\cygwin\bin\bash --login -i C:/ILS/trunk/NAVAID/test.exe 
```

但我收到错误：

```
bash: C:/ILS/trunk/NAVAID/test.exe: cannot execute binary file 
```

当我在 cygwin 中提交 test.exe 时，我得到：

```
test.exe: PE32 executable (console) Intel 80386, for MS Windows 
```

任何想法为什么它不会运行？我在网上发现的大多数错误都来自试图运行 Linux 应用程序的人，但这是直接在 cygwin（在同一台机器上）中编译的（通过 g++）。

如果重要的话，在 Windows 8 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T02:42:27.613

你可以试试`-c <command >`

```
D:\cygwin\bin\bash --login -c C:/ILS/trunk/NAVAID/test.exe 
```

这将在 bash shell 下运行 test.exe。[-c 选项的详细信息](http://www.gnu.org/software/bash/manual/html_node/Invoking-Bash.html)

> 调用时可能会提供几个单字符选项，这些选项在 set 内置函数中不可用。
> 
> -c string Read and execute commands from string after processing the options, then exit. Any remaining arguments are assigned to the positional parameters, starting with $0.

`-i` starts an [interactive shell](http://www.gnu.org/software/bash/manual/html_node/Interactive-Shells.html#Interactive-Shells), that is not something you want in this case.

Finally for the sake of completion - bash has `--rcfile <file path>` option to give a startup file.

# java - Java：每次插入元素时如何对数组进行排序

> ID：15721600
> 
> 赞同：0
> 
> 时间：2013-03-30T17:53:12.767
> 
> 标签：java, arrays, sorting

我正在研究一个非常简单的java类，它允许客户端创建一个整数数组并插入、删除和检查一个元素是否在这个数组中。类限制之一是数组应始终按升序排序。每次插入元素时 insert(int x) 方法调用私有排序方法是否有效还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:59:49.983

如果它必须是一个数组，最好的方法是进行二进制搜索以找到插入点，将较高值的元素向上移动一位，然后将新元素放入打开的间隙中。

对于每个插入，这平均移动了一半的数组元素。

如果您可以选择使用不同的数据结构，我建议您使用 TreeMap，其中键是您要插入的整数，值是该元素被插入次数的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:01:18.967

Java 数组具有固定大小，如果您需要进行删除和插入，您可能需要一个列表（ArrayList 或 LinkedList）

一些替代方案：

1.  一个列表; 对每个插入进行二进制搜索以找到插入点。

2.  列表加地图；您保留在地图中，告诉您列表中每个整数的（第一个）索引。

3.  一个列表; 做一个插入加一个`Collections.sort(list)`

1 不太直接，但最有启发性。2在速度上效率最高，但浪费空间。三是最直接、最务实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:23:02.710

数组可能不是实现您所追求的最佳方式，但这取决于您想要从您的课程中获得什么，以及哪些方法很重要，并且速度很快。

为了实现您对数组的要求，您将能够获得的最佳结果是（假设数组是无限大小/您只存储最大数量的整数）：

*   插入：最坏情况：O(n)，平均情况：O(n)
*   移除：最坏情况：O(n)，平均情况：O(n)
*   按索引获取元素：始终：O(1)
*   检查元素是否存在：最坏情况：O(log n) *[二进制搜索]*

**如果这是您所追求的那种效率和行为**，那么这就是您问题的答案：

所以你问这是否有效：

*   将新整数添加到数组末尾：效率：O(1)
*   对整个数组进行排序：效率：O(n * log(n))

**总效率：** O(n * log(n))

有一种更有效的方法，这将涉及执行以下操作：

*   执行二分查找以查找数组中需要插入新整数的点。O(logn)
*   将所有内容沿 1 移动到该点的右侧（以在正确的位置腾出空间）。上）
*   插入新整数：O(1)

**总效率：** O(n)

**不同的数据结构：**

如果这不是您所追求的那种行为，那么您可能会研究一些不同类型的数据结构。例如，基于树的东西，如[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)将提供非常不同的效率：

*   插入：O(log n)
*   移除：O(log n)
*   按索引获取元素：（我相信不可能？不熟悉此类的完整实现）
*   检查元素是否存在：O( log n )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T17:54:06.887

> 每次插入元素时如何对数组进行排序

这样做

```
 Arrays.sort(array); 
```

> 将指定的整数数组按数字升序排序。排序算法是一种调整过的快速排序，改编自 Jon L. Bentley 和 M. Douglas McIlroy 的“Engineering a Sort Function”，Software-Practice and Experience，Vol。23(11) P. 1249-1265（1993 年 11 月）。该算法在许多数据集上提供 n*log(n) 性能，导致其他快速排序降低到二次性能。

[在此处](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)阅读 java 文档。

并在运行时增长项目而不是使用 ArrayList。

在 arrayList 中这样做。

```
List<String> unsortList = new ArrayList<String>();
unsortList.add("111");
unsortList.add("333");
unsortList.add("222");

//before sort
System.out.println("ArrayList is unsort");
for(String temp: unsortList){
    System.out.println(temp);
}

//sort the list
Collections.sort(unsortList);

//after sorted
System.out.println("ArrayList is sorted");
for(String temp: unsortList){
    System.out.println(temp);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T17:58:31.807

我建议您使用像[SortedSet< Integer >](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)（实现类[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)）这样的排序集合。

始终排序并删除重复项。

如果您绝对想要一个`int[]`，[java.util.Arrays](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)实用程序包含[搜索](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch%28int%5B%5D,%20int%29)和[排序](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)。

# java - How do I detect the selected object in a JComboBox?

> ID：15721604
> 
> 赞同：0
> 
> 时间：2013-03-30T17:53:42.060
> 
> 标签：java, swing, object, selection, jcombobox

I have made a JComboBox and populated it with the result of toString of an object type which I created myself.

I want to be able to call upon the selected object from the JComboBox and then use a method from its class. However, even though my JComboBox only contains one object type (The one I made), Java doesn't know this and therefore I can;t use something like...

```
MyObject selectedObject = MyComboBox.getSelectedItem(); 
```

as Java cannot accept that only a "MyObject" will ever be selected.

How am I supposed to get the user to select an object of my own?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:56:31.853

I think you need cast it, like

MyObject selectedObject = (MyObject) MyComboBox.getSelectedItem();

# c++ - How do I load an image from a url into a picturebox?

> ID：15721606
> 
> 赞同：0
> 
> 时间：2013-03-30T17:53:44.120
> 
> 标签：c++, .net, winforms, picturebox

I am using windows form applications and am wondering how i can load this image [http://legionrpg.archstudios.net/Images/226x192/Horde.png](http://legionrpg.archstudios.net/Images/226x192/Horde.png) into my picturebox in my form.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:15:18.083

You need to learn how to send HTTP GET/POST request follow this article I skimmed through and it uses the right stuff.

[http://www.codeproject.com/Articles/5256/Classes-for-Writing-HTTP-Clients-in-C](http://www.codeproject.com/Articles/5256/Classes-for-Writing-HTTP-Clients-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T01:48:45.473

SOLUTION: Turns out there's actually a property for picturebox's where you can enter a URL and it will load the image in there. Look in the properties and mess around to find the attribute.

I don't code in C++ anymore so I don't remember what the property is called.

# linux - 内核和正常进程

> ID：15721608
> 
> 赞同：0
> 
> 时间：2013-03-30T17:53:53.643
> 
> 标签：linux, process, linux-kernel

我知道一个进程有自己的地址空间，范围从 0x0 到 0xffffffff（如果我错了，请更正）。Linux内核是否也是一个具有自己地址空间的特殊进程？如果 CPU 遇到从进程 A 到代码驻留在内核地址空间中的函数的调用，CPU 如何切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T12:59:04.597

内核根本不像一个进程。它没有被调度，它要么代表进程运行（所谓的进程上下文或用户上下文），要么作为中断或异常的结果运行（所谓的中断上下文）。

也就是说，Linux 内核生成内核线程来执行某些任务，或者避免在中断上下文中运行太长时间（这就是“ksoftirqd”线程所做的，避免可能导致例如：音频丢失、.. .)。

您可以在 ps 命令的输出中看到内核线程。它们很容易识别：它们的名字在括号之间。其中一些每个 CPU 运行一个实例，CPU 用斜线后面的数字标识，因此 [ksoftirqd/0] 是 CPU 0 上的 ksoftirqd 实例。

进程只是意味着一些执行代码。是的，内核在 init 之前执行（甚至在此之前的引导加载程序）。但是“过程”有一个特定的定义：

*   在用户空间运行
*   使用进程 ID 运行
*   很多交互需要经过内核
*   所有资源都需要来自内核
*   需要内核调度

因此，一旦内核初始化，它就会运行 init 进程，然后它会生成它的配置所说的任何其他进程。

当一个进程调用作为内核代码一部分的函数时，该函数仅作为进程的一部分执行，否则内核本身的一部分代表这个进程。

# wordpress - 使用自定义字段制作“独家”帖子

> ID：15721612
> 
> 赞同：0
> 
> 时间：2013-03-30T17:54:17.907
> 
> 标签：wordpress, plugins, custom-fields

我想要一个自定义字段，一次只能分配给一个帖子。理想情况下直接来自仪表板。

假设我有一个带有 value的自定义字段`featured post`。 如果我分配给，则-custom 字段的值需要获取值或完全删除。`/post-123``true`
`featured post: true``post-111``post-123``featured post``false`

这意味着我的自定义字段只能分配给一个帖子。
或
具有指定值的自定义字段只能存在一次。

有没有可以做到的插件？或者是否可以使用 WordPress 插件[Types](http://wordpress.org/extend/plugins/types/)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:10:58.397

自定义字段保存/更新/删除是在动作钩子中完成的[`save_post`](https://wordpress.stackexchange.com/search?tab=relevance&q=%2badd_action%20%2bsave_post%20is%3aanswer)。

在更新当前帖子元数据之前，我们会查询所有其他可能包含相同元数据的帖子并将其删除。

基本上：

```
if ( isset( $_POST['exclusive_post'] )  )
{
    // CHECK FOR OTHER POSTS THAT HAVE THE META DATA SET 
    $args = array(
        'numberposts'     => -1, 
        'offset'          => 0,
        'meta_key'        => 'exclusive_post', 
        'post_type'       => 'post', 
        'post_status'     => 'publish' 
    );
    $results = get_posts( $args );
    foreach( $results as $other_post)
    {
        // REMOVE THE META DATA FROM OTHER POSTS
        delete_post_meta( $other_post->ID, 'exclusive_post' );
    }

    // UPDATE THE CURRENT POST META DATA
    update_post_meta( $post_id, 'exclusive_post', $_POST['exclusive_post'] );
} 
else 
{
        // NO POST META DATA IN CURRENT POST, REMOVE META
    delete_post_meta( $post_id, 'exclusive_post' );
} 
```

在这里，一个完整的工作示例使用基于[Add a checkbox to post screen 的元框，将类添加到标题](https://wordpress.stackexchange.com/q/61041/12615)：

> ![在此处输入图像描述](../Images/f8feba26ea59b6819e9f439cb8a9eb76.png)

```
<?php
/**
 * Plugin Name: Exclusive Post Meta Box
 * Description: Creates a custom field that can only be assigned to one post.
 * Plugin URI:  http://stackoverflow.com/q/15721612/1287812
 * Author:      brasofilo
 * Author URI:  https://wordpress.stackexchange.com/users/12615/brasofilo
 */

/* Define the custom box */
add_action( 'add_meta_boxes', 'wpse_61041_add_custom_box' );

/* Do something with the data entered */
add_action( 'save_post', 'wpse_61041_save_postdata', 10, 2 );

/* Adds a box to the main column on the Post and Page edit screens */
function wpse_61041_add_custom_box() {
    add_meta_box( 
        'wpse_61041_sectionid',
        'Exclusive Post',
        'wpse_61041_inner_custom_box',
        'post',
        'side',
        'high'
    );
}

/* Prints the box content */
function wpse_61041_inner_custom_box($post)
{
    // Use nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'wpse_61041_noncename' );

    // Get saved value, if none exists, "default" is selected
    $saved = get_post_meta( $post->ID, 'exclusive_post', true);

    printf(
        '<input type="checkbox" name="exclusive_post" value="exclusive_post" id="exclusive_post" %1$s />'.
        '<label for="exclusive_post"> This is the one.' .
        '</label><br>',
        checked($saved, 'exclusive_post', false)
    );

}

/* When the post is saved, saves our custom data */
function wpse_61041_save_postdata( $post_id, $post_object ) 
{
      // verify if this is an auto save routine. 
      // If it is our form has not been submitted, so we dont want to do anything
      if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) 
          return;

      // verify this came from the our screen and with proper authorization,
      // because save_post can be triggered at other times
      if ( !wp_verify_nonce( $_POST['wpse_61041_noncename'], plugin_basename( __FILE__ ) ) )
          return;

    // don't run if saving revision.
    if ( 'revision' == $post_object->post_type )
        return;

    if ( isset( $_POST['exclusive_post'] )  )
    {
        // CHECK FOR OTHER POSTS THAT HAVE THE META DATA SET 
        $args = array(
            'numberposts'     => -1, 
            'offset'          => 0,
            'meta_key'        => 'exclusive_post', 
            'post_type'       => 'post', 
            'post_status'     => 'publish' 
        );
        $results = get_posts( $args );
        foreach( $results as $other_post)
        {
            // REMOVE THE META DATA FROM OTHER POSTS
            delete_post_meta( $other_post->ID, 'exclusive_post' );
        }

        // UPDATE THE CURRENT POST META DATA
        update_post_meta( $post_id, 'exclusive_post', $_POST['exclusive_post'] );
    } 
    else 
    {
        // NO POST META DATA IN CURRENT POST, REMOVE META
        delete_post_meta( $post_id, 'exclusive_post' );
    }

} 
```

# php - 更新和插入数组等

> ID：15721615
> 
> 赞同：0
> 
> 时间：2013-03-30T17:55:05.863
> 
> 标签：php, mysql, arrays, insert

我有一个名为`table_music` 这里的 MySQL 数据库，我存储艺术家、歌曲……这是我将从页面上的表单更新的内容。

现在我也想在这个表格中添加流派，所以我做了一个表格，叫做`song_genre` Here I have `song_genre_id`, `song_id`,`genre_id`

在我的表单中，我列出了我的歌曲标题，`table_music` 然后我有可以更新作曲家、长度、年份等的字段。我的表格中还有一个名为流派的复选框列表`song_genre`，所有流派都按字母顺序排序。我将这些放在不同的表中，因为我以后可能想添加流派。

但我不知道如何将这些选中的类型插入我的`song_genre`表中。我以前从未使用过数组，所以我在这里迷路了。

首先，我想要`UPDATE`我的`table_music`，而且效果很好。然后我想要`INSERT INTO`我的新表 ( `song_genre`)，所以我`song_id`在这里得到了流派和。

我认为这是正确的做法，所以我可以在以后更改流派，或者如果有一天我也需要，我可以添加或删除一种流派。

我尝试了以下方法：但它似乎不起作用：

```
foreach(echo $row_rs_genres['genre_id'] as $checked_value)
{
   $query = "INSERT INTO song_genre (genre_id, song_id) VALUES ('$checked_value',    $_POST['song_id'])"; 
   $result = mysql_query($query) or die ("Unable to execute query: " . mysql_error()); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:59:21.630

删除`echo`：

```
foreach($row_rs_genres['genre_id'] as $checked_value) 
```

你需要`$_POST`用大括号括起来：

```
"INSERT INTO song_genre (genre_id, song_id) VALUES ('$checked_value', {$_POST['song_id']})" 
```

或者跳出字符串：

```
"INSERT INTO song_genre (genre_id, song_id) VALUES ('" . $checked_value . "', " . $_POST['song_id'] . ")" 
```

尽管您在这里很容易受到[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的影响。您应该[转义](http://php.net/manual/en/function.mysql-real-escape-string.php)您的输入或切换到[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:02:41.023

首先，就表结构而言，您应该为您的流派提供一个表，该表只存储genre_id 和genre_name（以及您可能需要的任何其他数据）。然后创建一个单独的表来进行查找。该表将只有 song_id、genre_id，在两个字段上都有唯一索引。

其次，当您从公共表单捕获数据并插入数据库时​​，请确保您首先清理数据以防止 SQL 注入等。例如，如果您知道某个数据值只能是数字，则在尝试使用数据之前通过使用 intval() 函数来强制执行。

如果您还没有，请阅读关于不在[新代码中使用 mysql_* 函数的](https://stackoverflow.com/q/12859942/)信息。它们不再被维护并被[正式弃用](https://wiki.php.net/rfc/mysql_deprecation) 。了解一下[，并使用](https://en.wikipedia.org/wiki/Prepared_statement)[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)；[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪一个。如果你选择 PDO，这里有一个很好的教程

# javascript - 如何在测试期间存根 node.js 内置 fs？

> ID：15721619
> 
> 赞同：32
> 
> 时间：2013-03-30T17:55:21.480
> 
> 标签：javascript, node.js, testing

我想存根 node.js 内置插件，`fs`这样我实际上不会进行任何系统级文件调用。我唯一能想到的就是将`fs`所有其他内置函数作为参数传递给我的所有函数，以避免使用真正的 fs。这似乎有点傻，并创建了一个冗长的函数签名，其中包含作为参数的内置函数。

```
var fs = require('fs');

function findFile(path, callback) {
  _findFile(fs, path, callback);
}

function _findFile(fs, path, callback) {
  fs.readdir(path, function(err, files) {
     //Do something.
  });
} 
```

然后在测试期间：

```
var stubFs = {
  readdir: function(path, callback) {
     callback(null, []);
  }
};

_findFile.(stubFs, testThing, testCallback); 
```

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-30T23:26:35.990

我喜欢使用[rewire](https://github.com/jhnns/rewire)来删除 require(...) 语句

# 被测模块

模块-a.js

```
var fs = require('fs')
function findFile(path, callback) {
  fs.readdir(path, function(err, files) {
     //Do something.
  })
} 
```

# 测试代码

模块-a-test.js

```
var rewire = require('rewire')
var moduleA = rewire('./moduleA')
// stub out fs
var fsStub = {
  readdir: function(path, callback) {
     console.log('fs.readdir stub called')
     callback(null, [])
  }
}
moduleA.__set__('fs', fsStub)
// call moduleA which now has a fs stubbed out
moduleA() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-28T13:59:18.323

如果被测模块是对`fs`自身进行调用的模块，则重新布线和其他存根解决方案是很好的。但是，如果被测模块使用了在底层使用的库`fs`，那么重新布线和其他存根解决方案很快就会变得棘手。

现在有一个更好的解决方案：[mock-fs](https://github.com/tschaub/mock-fs)

> mock-fs 模块允许 Node 的内置`fs`模块由内存中的模拟文件系统临时支持。这使您可以针对一组模拟文件和目录运行测试，而不是拖着一堆测试装置。

示例（无耻地从自述文件中删除）：

```
var mock = require('mock-fs');

mock({
  'path/to/fake/dir': {
    'some-file.txt': 'file content here',
    'empty-dir': {/** empty directory */}
  },
  'path/to/some.png': new Buffer([8, 6, 7, 5, 3, 0, 9]),
  'some/other/path': {/** another empty directory */}
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-09-04T11:56:13.750

存根是模拟组件/模块行为的函数/程序。存根为测试用例期间进行的函数调用提供预设答案。

一个例子可以是写一个文件，但实际上并没有这样做。

```
var fs = require('fs')

var writeFileStub = sinon.stub(fs, 'writeFile', function (path, data, cb) {  
 return cb(null)
})

expect(writeFileStub).to.be.called  
writeFileStub.restore() 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-30T23:55:26.260

另一种选择（尽管我认为诺亚建议重新布线更好）：

写一个包装器`require`，命名`requireStubbable`左右。将它放在您配置一次的模块中，在测试设置代码中。因为 node 缓存了 require 的结果，所以当你再次需要 requireStubbable 模块时，你会得到相同的配置函数。您可以对其进行配置，以便对任意数量的模块进行存根，而所有其他模块都将被原封不动地传递。

您想要支持传入存根的任何模块都需要使用该`requireStubbable`函数而不是常规函数`require`。rewire 模块没有这个缺点，而是将控制权交给了调用代码。

### 添加于 4 月 26 日

我从来没有意识到，但由于返回的对象（或更准确地说：对象引用）`require("fs")`被缓存，你可以简单地做：

```
const fs = require("fs")
fs.readFile = function (filename, cb) {
  cb(null, new Buffer("fake contents"));
};
// etc 
```

当您在任何地方包含此代码时，`fs.readFile`将到处指向上述函数。这适用于存根只是功能集合的任何模块（如大多数内置模块）。如果模块返回唯一函数，则它不起作用的情况。为此，`rewire`需要类似的东西。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-10T14:16:40.417

这是一个适用于 fs.promises api 的版本：

```
const fsMock = sinon.mock(fs.promises);
fsMock.expects('readFile').withArgs('test.json').returns(Promise.resolve(Buffer.from('{}')));

const val = await fs.promises.readFile('test.json');

expect(val.toString()).toEqual('{}');
fsMock.verify(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-30T18:27:41.160

这是我的想法：

你这样做的方式是显而易见的第一步，但是必须在任何地方传递这些东西很糟糕——你的函数的调用者不应该关心你想用模拟测试。您不想只是覆盖或猴子补丁全局命名空间中的全局模块进行测试。并且正常的依赖注入模型在 Javascript 中非常冗长，因为没有类本地范围。

所以围绕整个模块，我已经完成了`(function(fs, net, http) { … })(fs, net, http);`

然后在模块内部，如果有一个类构造函数，则将模拟作为构造函数的可选额外参数（或单个`mocks`对象参数的可能属性或其他东西），并且您的测试通过模拟。您的构造函数仅覆盖模块的本地范围内的真实节点模块。

或者，如果模块只有静态功能；有一个这样的函数来初始化模拟，您可以验证该函数未在您的产品代码中调用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-03T11:49:57.623

看看[using-stubs](https://github.com/carlosouro/using-stubs)，特别是在[require()](https://github.com/carlosouro/using-stubs#require)部分。

**像往常**一样保留模块代码，例如：

```
//myApp.js
var fs = require('fs');

fs.readdir(path, function(err, files) {
  //Do something.
}); 
```

然后，在您的测试模块（或任何单元测试框架）上，使用**using-stubs**修改（甚至匹配或验证）**fs**的行为：

```
var using = require('using-stubs');

//get a reference to require('fs')
var fs = using.require('fs');

//override behaviour of fs.readdir
using(fs)('readdir').stub(function(path, callback){

    //override fs.readdir() logic
    var err = null;
    var files = [];
    // (...)

    //mock original behaviour
    callback(err, files)
})

//then run the app normally to test it (some frameworks do this for you)
require('myApp') 
```

现在运行您的测试将覆盖*myApp.js中***fs**的内部行为，而无需更改任何一个组件中的代码。

 *您还可以做其他很酷的事情，例如验证方法被调用的次数，匹配精确的方法调用参数或范围，甚至覆盖*myApp.js*内部使用的新 Class 实例的行为。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-13T22:16:07.193

使用[`memfs`](https://github.com/streamich/memfs)内存文件系统。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-05T19:44:38.820

查看 mock-fs 和 fake-fs，它们已经做了很多。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-30T18:29:42.187

```
var fs = require('./myStubFs'); 
```

似乎会有很大的进步。无论您找到什么解决方案，都可能涉及编写您自己的存根函数。理想的解决方案将是较低级别的，因此您不必触摸所有您想要执行此操作的文件，例如，也许您希望 3rd 方库也被删除。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-29T11:00:19.697

对我来说，不需要模拟/存根文件，我通常在临时文件夹中创建一个临时文件。*

# c# - 用于数据库数据和文件复制的书面传输脚本

> ID：15721622
> 
> 赞同：2
> 
> 时间：2013-03-30T17:55:56.517
> 
> 标签：c#, sql, sql-server, entity-framework, ado.net

我知道这是一个关于标准的一般性问题，`SO`但我已经阅读了几篇关于类似主题的文章，每个人都说“这是一个临时工作”，但我越想办法做到这一点，我就越困惑. 我需要找到一些解决方案，最后它可能是任何解决方案，但如果它确实是标准和简单的东西，我想至少获得我应该遵循的基本步骤来做到这一点甚至更好 - 教程或类似的东西涵盖与我类似的主题。

我所拥有的 - 一个继承的数据库，其中有 3 个表，其中有一列`Picture`。在旧数据库中，此列是一个`String`包含文件源的完整路径的字段，例如`C:\Images\SomeFolder\SomeImage.jpeg`. 还有一个新的数据库，其中`Picture`也存在相同的列，但它只包含图片的名称。路径在`Config`表格中，但我认为这并不重要，因为路径将在传输脚本中硬编码（或者我认为这是要完成的方法）。

所以在旧数据库和新数据库之间发生了这个传输脚本，我需要这个逻辑步骤：

1.  从`Picture`列中获取值
2.  检查是否存在现有文件（就像`File.Exist`我想象的那样）
3.  更改图像文件的名称（有新的命名约定，因此必须相应地更改所有名称）
4.  将图像文件复制到目标文件夹（路径在脚本中硬编码或取自表格`Config`）
5.  在新的数据库列中复制新的图像文件名`Picture`
6.  对表中的所有行和所有具有`Picture`列的表执行此操作（再次硬编码，因为只有 3 个表）
7.  针对未成功复制的文件和详细信息的某种报告（表格、行、文件名 - 我不确定在这里显示什么最好）

我已经阅读了很多，`BulkCopy`但到目前为止，我认为这不是我应该寻找的解决这个问题的方法。我有一些棘手的部分 - 不一定是与从旧数据库获取的路径相关联的现有图像，所以如果是这种情况，我必须继续，但还要记录该信息。此外，即使不可能发生，在执行过程中，更准确地说，在将图像文件再次复制到新位置期间，某些事情可能会导致错误，我想我应该只记录错误但不太确定，因为存在实际图像。

但是 - 您建议采用什么方法来实现这一点？使用什么，是否有专门为我应该知道的这种情况设计的东西。我现在唯一知道的就是我要把它写在`C#`. 它很可能是`Command Line`应用程序，可能需要运行`.exe`，我不确定仅此一项是否会造成任何困难。

附言

我不确定这对当前情况是否重要，但新应用程序是使用`ADO.NET Entity Framework`代码优先方法构建的。开发服务器是`MS SQL Server 2012`，但工作服务器将使用`MS SQL Server 2008`. 我不确定这是否也会成为问题，因为现在我们没有任何兼容性问题，除了不同的排序规则，但这已经解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:40:26.623

我更愿意深入解决方案。

**Designing an Intermediate table**, something called `PictureRepository` table, this table will have all columns you need to read data from sources and all columns neede to save on target table and **extra columns like status, error description and** ...

1.  `Reading Data` (fill PictureRepository by reading source tables).
2.  `Validating Data` (verifying picture existence and ... by reading PictureRepository. updating stats and error description columns if required)
3.  `Operation` (creating new image file name and updating the column in PictureRepository)
4.  `Saving data` (reading no error data rows from PictureRepository and saving them to target table)

Reporting will be done by reading error data from PictureRepository.
you can do the phases in C# or SQL based on your problem complexity and your experience (reading data and saving data could be done by stored procedures).

Hope be helful

# c# - Linq To Sql - Making a dynamic search for the Application layer without exposing DAL layer as DLL

> ID：15721627
> 
> 赞同：1
> 
> 时间：2013-03-30T17:56:24.650
> 
> 标签：c#, linq-to-sql, data-access-layer, business-logic-layer, application-layer

**Linq to SQL, C#.**

I have 3 layers: DAL,BL,Application. I want to build functions of search in the BL for each table so those functions get as a parameter 'where' expresstion from the Application layer. The advantage in this approach is one function for each table so the client can search in a free and dynamic way insted of givving him 5 (for example) ways; restrict his search.

For that I need to give my Application layer a DLL of my DAL layer. Doing that is not a good approach to solve the problem (givving the user to build his search dynamicly insted of restrict him with a builded up search functions). If the Application layer have a DLL to my DAL layer, the Aplication layer can declare a ContextObject and do bad things for my Data-Base.

What can I do for solving this problem?

Thanks alot, Stav Alfi.

**Update 1:**

As you know, the Linq to Sql build a class to each table. I dont want to expose the DAL DLL to the Application layer so I can not use Linq to Sql's classes in the Application layer. The solution I found is to build classes that look the same to the Linq to Sql's classes, so the Application layer can use them. The BL layer is resposnibol for convring those classes. From the fact that the Application layer does not use Linq to Sql's classes, I can't give to the Application layer a IQueryable (Any result of Any function of the BL layer is converted to the Application layer's classes).

**Update 2:**

The Linq to Sql have LinqClientDB.designer.cs and it Build up those classes

```
[global::System.Data.Linq.Mapping.DatabaseAttribute(Name="ClientDB")]
public partial class LinqClientDBDataContext : System.Data.Linq.DataContext

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Clients")]
public partial class Client : INotifyPropertyChanging, INotifyPropertyChanged 
```

If I expose the DAL layer to the Application layer, the Application layer can have access to the LinqClientDBDataContext class. this is not a good approach. So in the BL layer I convert the DAL.Client class to a BL.Client class but then I cant have a dynamic search on the Client's table. What can I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:08:31.050

Exposing `IQueryable<T>` through your BL does not expose your DAL. Since you want to encapsulate the database entities in separate classes for the application layer, you can still do this, although the application will be more limited in the types of queries it can run.

```
// DAL
public class Entity { ... }

// BL
public class EntityInfo : Entity { ... }

...

public IQueryable<EntityInfo> GetEntities()
{
    return from e in dbContext.Entities
           select new EntityInfo
           {
               // populate your application layer object
           }
} 
```

Here's an alternative way of coding it that provides the same result

```
public Expression<Func<Entity, EntityInfo>> materializeEntityInfo =
    e => new EntityInfo { .. };

public IQueryable<EntityInfo> GetEntities()
{
    return dbContext.Entities.Select(materializeEntityInfo);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:10:07.080

You can make the context class `internal` while the entity classes are `public`.

![enter image description here](../Images/43ff4a29de4d84c317b06b7e803ce3eb.png)

This would allow you to create service classes in your DAL that return entity classes (as `IEnumerable`s) from a context that is not exposed to the client.

Although this is true, it is often advisable (as p.s.w.g said) to have DTO or view model objects exposed to the client (or application layer) because is abstracts the DAL.

# java - Java 错误：转换为相同类型

> ID：15721630
> 
> 赞同：0
> 
> 时间：2013-03-30T17:56:46.637
> 
> 标签：java, weka

类型不匹配：无法从实例转换为实例

```
DataSource source = new DataSource("C:/Users/EP/Desktop/epark60/vote.arff");
        Instances data = source.getDataSet();
        if (data.classIndex() == -1)
          data.setClassIndex(data.numAttributes() - 1);

        Instance[] instances =  new Instance[data.numInstances()];
        for (int i = 0; i < instances.length; i++) {
            instances[i] = data.instance(i);    //<-- error @ data.instance(i);
        } 
```

数据实例（i）；给出实例，我想放入实例数组，但上面给出了错误。

为什么它不仅可以存储而且必须转换为相同的类型（实例到实例）？

# mongodb - 为什么 MongoDB 'find' 忽略 WHERE 字段？

> ID：15721633
> 
> 赞同：0
> 
> 时间：2013-03-30T17:57:28.117
> 
> 标签：mongodb, nosql

我只想选择具有“Foo”作为“类别”的对象，但以下查询将返回所有类别。

> db.collection.findOne({"data.category:"Foo"})

结果

```
{
  "data": [
    {
      "category": "Foo",
       "name" : "A"
    },
    {
      "category": "Bar",
      "name" : "A"
    },
    {
      "category": "Bar",
      "name" : "A"
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:59:20.587

`db.collection.findOne(...)`返回基于查询文档的**文档**`({"data.category:"Foo"} )`。您的查询只是说：“返回在磁盘上找到的第一个文档，其数据字段值包含一个子文档，其类别字段值为'Foo'（或数据包含一个子文档数组，其中至少一个项目具有一个类别字段其值为“Foo”

返回数组子文档（或您所称的对象）的查询是：

`db.collection.findOne( {"data.category:"Foo"} , {"data.category.$" : 1, _id : 0})`

# jsf - Can MyFaces + CDI be used on WebLogic 12c?

> ID：15721636
> 
> 赞同：13
> 
> 时间：2013-03-30T17:57:46.737
> 
> 标签：jsf, cdi, myfaces, weblogic12c

I've been trying to get this setup running for a couple of days now but still no luck. Here's the test application i've been using:

```
@Named
@RequestScoped
public class Test {

    private String test = "test";
    public String getTest() { return test; }
    public void setTest(String test) { this.test = test; }
} 
```

And in the jsf page:

```
<h:outputText value="#{test.test}"/> 
```

Running this sample without MyFaces works fine (renders "test" like it should), but when i deploy MyFaces in the WAR file and do the necessary configuration within weblogic.xml CDI seems to stop working (or at least, the integration bewteen JSF and CDI) and nothing is displayed in the output html. MyFaces itself seems to be ok, though.

My basic configuration is as follows:

*   WebLogic Server 12c (12.1.1.0), patches should be up-to-date as i just downloaded a development version yesterday just to be sure
*   MyFaces-2.1.10, deployed within WEB-INF/libs
*   Beans.xml is in place
*   org.apache.myfaces.webapp.StartupServletContextListener has been registered in web.xml
*   WebLogic is configured to use MyFaces using weblogic.xml

Weblogic.xml contents:

```
<prefer-application-packages>
    <package-name>javax.faces.*</package-name>
    <package-name>com.sun.faces.*</package-name>
    <package-name>com.bea.faces.*</package-name>
</prefer-application-packages>
<prefer-application-resources>
    <resource-name>javax.faces.*</resource-name>
    <resource-name>com.sun.faces.*</resource-name>
    <resource-name>com.bea.faces.*</resource-name>
    <resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</resource-name>
    <resource-name>META-INF/services/com.sun.faces.spi.FacesConfigResourceProvider</resource-name>
</prefer-application-resources> 
```

What i've learned so far:

*   WL12c is equipped with Weld 1.1.3 as it's CDI implementation.
*   I read somewhere (can't remember where) that whenever you decide to switch JSF implementation you're responsible for integrating JSF/CDI yourself. Is this true (sure hope not)?

Things i've tried so far:

*   Add MyFaces CODI into the mix, hoping it would somehow glue Weld and MyFaces together, but it didn't.
*   Replace Weld by OpenWebBeans as the CDI implementation. This seemed to work at first but gave all kinds of interesting ClassCastExceptions later on in some internal sun.reflection package. This is a solution i'd rather avoid anyway.
*   Manually trigger Weld using various options in web.xml and faces-config.xml. This seems to get Weld going in that it floods the log with all kinds of error messages. To some degree these can be "fixed" by upgrading weblogic to a newer Weld version but each time i do this i bump into the next error. Again, i'd rather avoid this route also.

Is it really that hard to use MyFaces on WL12c while preserving CDI support or am i just missing the obvious ? Thanks for any help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-01T07:52:47.433

There are quite a few things which are not clear in your example. E.g. what package is the @RequestScoped from? Is it the javax.enterprise.context.RequestScoped (should work) or the javax.faces.bean.RequestScoped (will not work)? If you are using CDI beans only (and no javax.faces.bean stuff) then the only way the JSF container and the CDI container integrate with each other is actually the Unified Expression Language javax.el.ELResolver. And this must work out of the box.

org.apache.myfaces.webapp.StartupServletContextListener is not really needed imo. All you need is to set the FacesServlet.

The problematic spot might be that the JSF EG got forced to use the ServletContainerInitializer [1] to blindly activate the JSF impl, even if the app does not use JSF at all. This is hard to get around as the servlet-3.0 spec only defines how to automatically *activate* those features but there is NO way to disable them again.

[1] [http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContainerInitializer.html](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContainerInitializer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T13:35:55.653

I'm afraid there is no way to do it. The weld glue code needs to be there. Those tiny little integration layer that is part of the wls deployable libraries for jsf isn't available for myfaces ....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T20:15:17.377

Just wondering, did you try enabling weld servlet within your app?

The reason I asked is because of this statement:

> I read somewhere (can't remember where) that whenever you decide to switch JSF implementation you're responsible for integrating JSF/CDI yourself

Which is fairly accurate. The container is the one that does the whole combined layering of the JSF impl and CDI impl together. If you replace it with your own JSF impl, you are bypassing what the container gives you. If you haven't yet, I would strongly recommend you to try enabling Weld Servlet in your app to see if CDI boots up w/ the custom JSF impl.

# scala - Extension, super constructor and static methods

> ID：15721637
> 
> 赞同：0
> 
> 时间：2013-03-30T17:58:03.347
> 
> 标签：scala

I have this class

```
class Tester(round: Int, x: Int, y: Int,sparringPartners:Array[RobotSpecification]) {
  def this(s:Array[RobotSpecification]) = {
    this(5, 800, 600, s)

  }

 def getRandomRobot(eng: RobocodeEngine): Array[RobotSpecification] = {//blabla}
} 
```

and i want to extend doing something like this

```
class EasyTester() extends Tester(getRandomRobot()){} 
```

Obviously it doesn't work.

Probably the problem is trivial but i'm just recently approaching the OO part of Scala so i never worked with this stuff.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:15:49.263

If `getRandomRobot` belongs to `Tester` logically, but doesn't depend on the state of a tester, you can turn it into a method on a [companion](http://twitter.github.com/scala_school/basics2.html#object) object:

```
object Tester {
    def getRandomRobot(eng: RobocodeEngine): Array[RobotSpecification] = { ... }
} 
```

One way would be just to pass `sparringPartners` into `EasyTester`'s constructor:

```
class EasyTester(sparringPartners: Array[RobotSpecification]) extends Tester(sparringPartners) { ... }

import Tester._
val eng = ...
val easyTester = new EasyTester(getRandomRobot(eng)) 
```

To make the instantiation simpler than that, `EasyTester` could have a companion object with an `apply` method that instantiates it:

```
import Tester._
object EasyTester {
    def apply(implicit eng: RobocodeEngine) = {
      new EasyTester(getRandomRobot(eng))
   }
}

implicit val eng: RobocodeEngine = ...
val easyTester = EasyTester 
```

# java - Given 6 integers and 1 target value, write a function to get the target value using 6 integers with any on these operations ,*,-,/

> ID：15721643
> 
> 赞同：3
> 
> 时间：2013-03-30T17:58:33.670
> 
> 标签：java

Given 6 integers and 1 target value, write a function to get the target value using 6 integers with any on these operations +,*,-,/

This is what I did

```
public class Solution {
    public static void main(String[] args) {

int target =5;
int a[]={1,3,2,10,15,8};
int i,j;

for(j=0;j<6;j++)
for(i=0;i<6;i++)
    if(a[i]/a[j]==target)       System.out.println(a[i]+"/"+a[j]+"="+target);

for(j=0;j<6;j++)
for(i=0;i<6;i++)
    if(a[i]+a[j]==target)       System.out.println(a[i]+"+"+a[j]+"="+target);   

for(j=0;j<6;j++)
for(i=0;i<6;i++)
    if(a[i]*a[j]==target)       System.out.println(a[i]+"*"+a[j]+"="+target);

for(j=0;j<6;j++)
for(i=0;i<6;i++)
    if(a[i]-a[j]==target)       System.out.println(a[i]+"-"+a[j]+"="+target);

    }
} 
```

I know this is wrong because I'm just using 1 operation at a time, what can I do to do multiple operations at once. For example, if it were a complex array like {45, 4, 84, 63, 91, 20, 400} and my target value was 455 which is (91*20)/4, then how can my program do that? How can it try all possible operations?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:07:44.400

It looks to me like you're trying to write a solver for the [Countdown numbers game](http://en.wikipedia.org/wiki/Countdown_%28game_show%29#Numbers_round).

It's not a trivial task, and you do generally end up with a 'brute-force' search running through many combinations. I've written solvers for it before, but I'd struggle to write one in 20 minutes.

Here's some pseudocode that I hope illustrates the process. I am assuming all of your numbers are positive:

```
// Assume numbers is sorted in ascending order
// progress_so_far lists the steps we have taken to get the solution.
void search(numbers, progress_so_far, target) {    
    for each a in numbers {
        for each b in numbers after a {
            for each op in + - * / {
                if (b op a is valid) {
                    result = b op a;

                    if (result == target) {
                       // Success !
                       // Print out how we got there.
                    }
                    else if (numbers.size() > 2) {
                        new_numbers = copy of numbers with a and b removed and result added, sorted in ascending order;
                        new_progress = copy of progress_so_far with 'b op a' added;
                        search(new_numbers, new_progress, target);
                    }
                }
            }
        }
    }
} 
```

By `b op a is valid`, I mean that the calculation is not a subtraction resulting in zero or a division with a nonzero remainder. As the numbers are sorted in ascending order and `b` comes after `a` in the list, `b` will be greater than or equal to `a`. By making this restriction, we avoid duplicating effort thanks to the commutativity of `+` and `*` and ending up with negative numbers with `-`.

We can also check for and filter out 'useless' operations such as multiplying or dividing by 1, subtractions such as 8 - 4 (which 'wastes' the 8) or divisions such as 25 / 5 (which 'wastes' the 25).

Once you've found a target, you may want to keep going to see if you can hit the target using fewer steps. It's possible that the first time a target is found there are redundant steps; by searching for the shortest you guarantee to remove these.

# java - winInColumn 方法应该可以工作，但不能。为什么？

> ID：15721644
> 
> 赞同：0
> 
> 时间：2013-03-30T17:58:33.783
> 
> 标签：java, for-loop, bluej

我有这个方法用于连接 4 游戏，这样你就可以在列中获胜。但是我得到一个索引数组越界异常-1。它经过的数组大小为 8x8（private int [][] values = new int [8][8];）。

我哪里出错了？

```
public int winInAColumn(){
    int sum; //set sum as an integer
    for(int j=0;j<8;j++){ //loop through the rows
        for(int i=4;i>-1;i--){ //loop through columns. I must equal 4 as there must be three disks next to  
            sum = 0; //set sum to 0
            for(int k=i;k>i-4;k--){ //loop backwards through k while k is bigger than i minus 4
                sum+=values[k][j]; //sum + sum = the value in  i and j
            }
            if(Math.abs(sum)==4){
                if(sum/4 == 1){
                    if(JOptionPane.showConfirmDialog(null, "Blue Has Won", "Game over", JOptionPane.OK_CANCEL_OPTION) == 0){
                        //
                    }
                    else 
                    {
                        System.exit(0);
                    } 
                }

                else if (sum/4 == -1){
                    if(JOptionPane.showConfirmDialog(null, "Blue Has Won", "Game over", JOptionPane.OK_CANCEL_OPTION) == 0)
                    {
                        //
                    }
                    else
                    {
                        System.exit(0);
                    } 
                }
            }
        }
    }
                return 0;
        //JOptionPane.showMessageDialog(null, "No one won this time.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:09:22.297

在第二个循环中，i 从 4 倒退到 0，在第三个循环中，k 从 i 倒退到 i - 3，可能低至 -3，因此例外。

我并没有真正尝试详细了解您的算法，但也许替换`k>i-4`为`k>i-4 && k>=0`可以解决问题...

# python - Python GUI - 将一个类中的一个 GUI 链接到另一个类

> ID：15721645
> 
> 赞同：1
> 
> 时间：2013-03-30T17:58:39.620
> 
> 标签：python, widget, tkinter

我想要做的是将一个 GUI 从一个单独的文件中的一个类链接到另一个。我的第一堂课是一个主菜单，它将显示一些链接到另一个窗口的按钮。第二类显示一个不同的窗口，但我现在遇到的问题是我不知道如何链接第一类中的按钮来调用第二类。这是我到目前为止的代码：

第一个文件，主菜单：

```
from tkinter import *
import prac2_link

class main:
    def __init__(self,master):
        frame = Frame(master, width=80, height=50)
        frame.pack()
        self.hello = Label(frame, text="MAIN MENU").grid()
        self.cont = Button(frame,text="Menu option 1", command=prac2_link.main2).grid(row=1)

root = Tk()
application = main(root)
root.mainloop() 
```

第二个文件：

```
from tkinter import *

class main2:
    def __init__(self):
        frame1 = Frame(self, width=80, height=50)
        frame1.pack()
        self.hello = Label(frame1, text="hello, its another frame").grid(row=0,column=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:37:57.313

要创建新窗口，您必须使用`Toplevel`小部件。您可以将它用作您的班级的超`main2`类：

```
class main2(Toplevel):
    def __init__(self):
        Toplevel.__init__(self)
        self.frame= Frame(self, width=80, height=50)
        self.label = Label(self.frame, text='this is another frame')
        self.frame.grid()
        self.label.grid() 
```

然后你只需要`Button`在另一个类的事件处理程序中创建一个实例：

```
class main1:
    def __init__(self, master):
        # ...
        self.cont = Button(frame,text="Menu option 1", command=self.open_main2).grid(row=1)
    def open_main2(self):
        prac2_link.main2() 
```

# dns - DNS 在 EC2 中使用内部 IP 中继站点之间的流量

> ID：15721649
> 
> 赞同：0
> 
> 时间：2013-03-30T17:59:01.933
> 
> 标签：dns, amazon-ec2

我在 2 个不同站点的 Amazon EC2 上运行 Hadoop，但是当组件启动时，它们会获得内部 IP。我想将组件放在使用内部 IP 相互通信的不同站点中。我不讨论它是否安全。我有一个想法，即放置一个将内部 IP 转换为外部 IP 的 DNS 服务器，而无需通知组件。因此，当流量通过内部 IP 传输时，DNS 会将流量中继到另一个站点。

可能吗？关于如何在 EC2 中放置 DNS 服务器的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:19:01.627

两种选择：

1.  使用 VPC，在这种情况下，您可以控制分配给您的实例的内部 ip。但是有一些限制。

2.  使用弹性 IP。连接到弹性 ip 的 DNS 名称将解析为 aws 区域内的内部 IP。

# git - Gerrit - how to auto publish change after Jenkins run

> ID：15721653
> 
> 赞同：2
> 
> 时间：2013-03-30T17:59:27.390
> 
> 标签：git, jenkins, continuous-integration, gerrit

I'm working with Git + Gerrit + Jenkins. I would like Gerrit to automatically submit a change after Jenkins success run. Is there any way to skip the review part (only verify is needed) and auto submit without user actions?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T00:36:57.020

You can do that.

from the gerrit help pages.

[http://gerrit-documentation.googlecode.com/svn/Documentation/2.5.1/cmd-review.html](http://gerrit-documentation.googlecode.com/svn/Documentation/2.5.1/cmd-review.html)

ssh -p 29418 review.example.com gerrit review --verified +1 --code-review +2 --submit --project this/project commit

Cheers

# html - 从 class 和 id 中获取宽度的奇怪事情

> ID：15721655
> 
> 赞同：1
> 
> 时间：2013-03-30T17:59:48.947
> 
> 标签：html, css

所以那里有一个简单的网站：[JsFiddle 链接！](http://jsfiddle.net/kppTt/2/)我很难理解为什么这些代码不等于：[另一个 jsFiddle 链接](http://jsfiddle.net/eaxFU/)

这两个链接之间唯一改变的是：在＃2中有

```
#panel{
    width:100%;
min-width: 960px;
} 
```

首先，相同的代码在

```
 960f{

width:100%;
    min-width: 960px;
} 
```

但它不是从课堂上读到的。我很困惑。你怎么看？写入每个面板的代码浪费我希望在每个 div id 中宽度为 100% 和最小 960px - 每次都使用相同的类更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T18:03:25.243

Class names can't begin with numbers. It can begin only with dash, underscore or a letter. See [here.](http://www.w3.org/TR/CSS2/syndata.html#value-def-identifier)

(And I guess that if the first character is a dash, the second must be letter or underscore.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:01:47.853

你不能用这样的数字开始一个类名。

> "In CSS2, identifiers (including element names, classes, and IDs in selectors) can contain only the characters [A-Za-z0-9] and ISO 10646 characters 161 and higher, plus the hyphen (-); they cannot start with a hyphen or a digit."

Quote from [W3C](http://www.w3.org/).

# javascript - 无法提交具有多个 div id 的表单...？请帮我

> ID：15721659
> 
> 赞同：1
> 
> 时间：2013-03-30T17:59:55.657
> 
> 标签：javascript, html, forms

无法提交具有多个 div id 的表单，当我只有一个 div id 表单正确提交时，当我使用多个 div id 表单未提交时。我想在按下单选按钮时显示新字段，为了隐藏和可见性，我使用了 div id（具有不同 id 名称的四个 div id）请帮忙

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
    <title>Report Generation</title>
    <link rel="stylesheet" media="screen" href="../css/formstyle.css">
    <script language="javascript" type="text/javascript">
    function setVisible(id, visible) {
        var o = document.getElementById(id);
        if (typeof(o) != 'undefined') o.style.visibility = visible ? 'visible' : 'hidden';
        if (typeof(o) == 'undefined') alert("Element with id '" + id + "' not found.");
    }

    function setDisplay(id, visible) {
        var o = document.getElementById(id);
        if (typeof(o) != 'undefined') o.style.display = visible ? 'block' : 'none';
        if (typeof(o) == 'undefined') alert("Element with id '" + id + "' not found.");
    }
    </script>
</head>

<body   onLoad="setVisible('Div4', false); setVisible('Div1', false);setVisible('Div3', false);setVisible('Div2', false);">
<form class="reg_form" action="pr.php" method="post" name="reg_form">

<ul>
    <li>
        <p>What type of Report you want to Create ?</p><br/>
     </li> 
     <li>
        <input type='radio' name='myradio' value='1' onclick="setVisible('Div1', true); setVisible('Div2', false);setVisible('Div3', false);setVisible('Div4', false);" />Based on Date<br/>
        <input type='radio' name='myradio' value='2' onclick="setVisible('Div2', true); setVisible('Div1', false);setVisible('Div3', false);setVisible('Div4', false);"  />Based on Income<br/>
        <input type='radio' name='myradio' value='3' onclick="setVisible('Div3', true); setVisible('Div1', false);setVisible('Div2', false);setVisible('Div4', false);" />Based on District<br/>
        <input type='radio' name='myradio' value='4' onclick="setVisible('Div4', true); setVisible('Div1', false);setVisible('Div3', false);setVisible('Div2', false);" />Based on Age<br/>
    </li>
    <li>
    <div id='Div1'>

                        <p>From Date:</p> <input type="date" name= "from" required><br/>
                        <p>To Date:</p> <input type="date" name= "to" required><br/>

    </div>
    </li>
    <li>

    <div id='Div2'>
                        <p>Select Slab:</p>
                        <input type="radio" name="slab" value="s1">Slab-1<br/>  
                        <input type="radio" name="slab" value="s2">Slab-2<br/>
            <input type="radio" name="slab" value="s3">Slab-3<br/>
    </div>
    </li>
    <li>
    <div id='Div3'>
                        <p>Enter District:</p><br/>   
                        <input type="text" name= "dist" required>
    </div>
    </li>
    <li>
    <div id='Div4'>
                        <p>Select Age From:</p><br/>     
                        <input type="number" name= "afrom" required>
                        <p>To:</p>      
                        <input type="number" name= "ato" required>
    </div>
    </li>
    <li>
        <button class="submit" type="submit">Submit Form</button>
    </li>
</ul>
    </div>

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:10:33.287

问题是您`required`在隐藏的输入字段上有属性。当表单提交时隐藏了这些字段（并且它们没有值），您会收到错误消息：

```
An invalid form control with name='from' is not focusable.
An invalid form control with name='to' is not focusable.
An invalid form control with name='dist' is not focusable.
An invalid form control with name='afrom' is not focusable.
An invalid form control with name='ato' is not focusable. 
```

通过显示所有字段或删除`required`属性，表单可以正常提交。对此的解决方案是`required`在显示时添加属性并在隐藏时将其删除。

为此，首先定义以下函数：

```
function setRequired()
{

  var r = document.getElementsByClassName('required')

  for (var i in r)
  {

    if (r[i].parentNode && r[i].parentNode.style.visibility == 'visible')
    {
      r[i].required = true
    }

    else
    {
      r[i].required = false
    }

  }

} 
```

其次，将所有`required`属性替换为`class="required"`. 第三，添加四个单选按钮`;setRequired()`的`onclick`事件（最后，在`setVisible`s 之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:13:45.457

改变：

`<button class="submit" type="submit">Submit Form</button>`

到：

`<input type="submit">Submit Form</input>`

# ruby - Testing a ruby block with minitest

> ID：15721666
> 
> 赞同：0
> 
> 时间：2013-03-30T18:00:29.247
> 
> 标签：ruby, tdd, block, minitest

What would be the best way of testing a Ruby block with minitest. Rspec seems to have a set of yield matchers. Is there something similar in minitest

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:02:12.250

RSpec's yield matchers are simple syntactic sugar over a fairly simple way of testing blocks.

1.  Initialize a local variable before the block
2.  Call the method, and pass a block that mutates the local variable you declared in #1.
3.  Verify the value of the variable afterwards.

So, you can do something like this:

```
block_called = false
do_something { block_called = true }
assert_true block_called 
```

Alternately, if you like the syntax and failure output of rspec-expectations, you can easily use it with minitest (or any other testing framework); I [blogged about this](http://myronmars.to/n/dev-blog/2012/07/mixing-and-matching-parts-of-rspec#using_minitest_and_rspecexpectations) if you want the nitty-gritty details.

# mysql - MySQL 连接限制建议

> ID：15721668
> 
> 赞同：0
> 
> 时间：2013-03-30T18:00:31.987
> 
> 标签：mysql

我的 MySQL 查询遇到了问题，希望有人能提供一些帮助/建议。

我正在开发一个基于 PHP 的系统，它在一个页面上的不同选项卡中组合了大量数据（tab1 = 个人资料，tab2 = 地址，tab3 = 付款等），因此，一个页面最多可以有 34 个/ 40 个 MySQL 查询来自不同的表或具有不同的条件。

页面加载变得非常缓慢，我问我的网络主机他们是否知道出了什么问题，他们建议这是因为 MySQL 查询速度慢（有些超过 2 秒）。他们还说我的 MySQL 用户一次只允许 15 个连接。

如果我的页面有 40 个查询并且一次只允许 15 个连接，这是否意味着它们有效地排队并等待一个完成？如果是这种情况，那么我可以理解为什么页面需要一段时间才能加载，但我不确定解决方案。15 个 MySQL 查询是否被考虑了很多，或者这是我的主机 (HostMonster) 的严格限制？

此外，如果有 15 个用户同时访问系统，这 15 个连接会在每个用户之间拆分，还是每个登录站点的用户有 15 个连接？我假设他们的意思是每个数据库用户，但是所有访问系统的人都将使用同一个数据库用户，所以似乎不可能创建一个可以同时访问多个用户的系统？

整个连接的事情让我有点困惑。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:05:35.147

1.  每页有一个连接。将查询按顺序排列
2.  优化这些查询 - 请参阅解释和使用索引
3.  也许结合查询以减少吞吐量。

顺便说一句，每页 10 多个查询是过多的恕我直言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:27:13.173

如果遇到最大连接错误问题，请从命令行使用此命令

```
mysqladmin flush-hosts  -uuser -p'password' 
```

这将刷新 MySQL 已记录的主机并再次构建列表。在较新版本的 MYSQL 5.6 中，您可以获得有关此方面的更多信息，但在以前的版本中没有。

您可以设置以下

```
max_connect_errors 10000 
```

以避免消息再次出现。

15 个查询或连接根本不是问题，在繁忙的数据库中，我们已经看到每秒数千个连接和数万个查询。

# javascript - fileReader 在 IE 中不起作用

> ID：15721671
> 
> 赞同：2
> 
> 时间：2013-03-30T18:01:19.130
> 
> 标签：javascript, internet-explorer, filereader

我试图通过使用这样的 JavaScript 来读取文件内容

```
function readFile (evt) {
   var files = evt.target.files;
   var file = files[0];   
   var reader = new FileReader();
   reader.onload = function(){
     alert(this.result);            
   }
   reader.readAsText(file)
} 
```

它工作正常，但不能在 IE 浏览器中工作。
如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:04:16.113

假设您没有使用 IE10，*则无法解决*此问题，这[不是 IE9 及更早版本具有的功能](http://caniuse.com/#feat=fileapi)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T18:04:23.503

[FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader)仅在 IE 10+ 中受支持

[MDN](https://developer.mozilla.org/en-US/docs/DOM/FileReader#Browser_compatibility)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:04:42.507

在尝试使用它们之前，您确实应该检查浏览器功能。

版本 10 之前的[IE 不支持文件 API](http://caniuse.com/#feat=fileapi)。

# mysql - 选择时触发的 MySQL 替代方案

> ID：15721673
> 
> 赞同：0
> 
> 时间：2013-03-30T18:01:29.603
> 
> 标签：mysql, database, triggers

对于我目前正在进行的项目，我需要使用触发器来限制用户对数据库的访问。但是，由于 SELECT 语句没有触发器，我需要在执行 SELECT 语句之前找到一些替代方法来添加限制。“SELECT 上的触发器”有什么替代品吗？如果有，它们是什么？

注意：这是一项分配，因此我无法在应用程序级别添加限制，因为分配的目的是在数据库级别添加限制。

我还阅读了我能找到的所有其他帖子，请不要关闭这篇指向我其他相关帖子的帖子，除非他们有几个我可以选择的替代品。我并不是说这些帖子没有用或解决方案不合适，但是，我想探索所有可能的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:51:51.723

一种解决方案是将表更改为视图，这样查询视图会调用存储的函数，并且存储的函数会记录对表的访问。

这是伟大的 Roland Bouman 的博客，详细描述了该过程： [http ://rpbouman.blogspot.com/2005/08/mysql-create-dirty-little-tricker-for.html](http://rpbouman.blogspot.com/2005/08/mysql-create-dirty-little-tricker-for.html)

# java - java中的地图入口键

> ID：15721675
> 
> 赞同：0
> 
> 时间：2013-03-30T18:01:40.463
> 
> 标签：java, map, equals

我正在尝试调试我在脚本上遇到的问题，我是 Java 新手，我认为这是最简单的事情，但我需要理解。这个 ：

```
for( Map.Entry<String,int[]> entry : this.indexMap.entrySet())
{
     if( !entry.getKey().equals("nickname"))
     {
         System.out.print("'"+ entry.getKey() +"' contains "+ entry.getKey().length() +" chars");
         System.out.print("'"+ name +"' contains "+ name.length() +" chars");
     }
     else if( entry.getKey().trim().equals("nickname") )
     {
         System.out.print("Yes are sames");
     } 
} 
```

对于字符串名称 =“昵称”，向我显示：

```
18:56:15 [INFOS] 'nickname' contains 94 chars

18:56:15 [INFOS] 'nickname' contains 8 chars 
```

我试图理解这一点。

问题是`entry.getKey()`返回与我的字符串名称相同的内容，但并不完全相同。在第一次测试中，我们看到两个 var 不同，所以打印了，但是两个 var 的值相同，长度不同。在 else-if 中，我尝试删除空格但未打印，那么这 94 个字符在哪里？

[https://code.google.com/p/imdbparsers/source/browse/trunk/imdb+parsers/src/imdb/parsers/xmltosql/NamedParameterStatement.java?r=6](https://code.google.com/p/imdbparsers/source/browse/trunk/imdb+parsers/src/imdb/parsers/xmltosql/NamedParameterStatement.java?r=6)

是代码，关注的方法是

```
private String parse(String query) 

private int[] getIndexes(String name) 
```

第 161 行和第 89 行我的这个 for 循环只是为了调试

```
 int[] indexes = (int[]) indexMap.get(name); 
```

返回始终为空

查询字符串是：

```
SELECT COUNT(`account_id`) AS `total` FROM `game_accounts` WHERE `nickname`=:nickname 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:09:10.023

和...之间的不同

```
entry.getKey().equals("nickname") 
```

和

```
entry.getKey().trim().equals("nickname") 
```

是`trim()`。

第一个考虑空间，第二个不考虑。

这是因为它们是地图上的一个循环：找到“坏”键......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:21:36.107

我认为如果你反转你的 if 子句，你可能会得到一些行为更像你所期望的东西，尽管你在问什么有点不清楚。比较键作为 if 块中的第一个子句使代码更简单。

```
if( entry.getKey().trim().equals("nickname") ) 
{
     System.out.print("Yes are sames");
}
else
{
     System.out.print("'"+ entry.getKey() +"' contains "+ entry.getKey().length() +" chars");
     System.out.print("'"+ name +"' contains "+ name.length() +" chars");
} 
```

# javascript - 定期更新和渲染来自 Flask 的值

> ID：15721679
> 
> 赞同：33
> 
> 时间：2013-03-30T18:02:01.267
> 
> 标签：javascript, python, flask, jinja2

我想动态显示我的 CPU 使用率。我不想重新加载页面以查看新值。我知道如何在 Python 中获取 CPU 使用率。现在我用这个值渲染一个模板。如何使用 Flask 中的值不断更新页面？

```
@app.route('/show_cpu')
def show_cpu():
    cpu = getCpuLoad()
    return render_template('show_cpu.html', cpu=cpu) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-29T08:05:14.697

# 使用 Ajax 请求

`Python`

```
@app.route('/_stuff', methods= ['GET'])
def stuff():
    cpu=round(getCpuLoad())
    ram=round(getVmem())
    disk=round(getDisk())
    return jsonify(cpu=cpu, ram=ram, disk=disk) 
```

`Javascript`

```
function update_values() {
            $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
            $.getJSON($SCRIPT_ROOT+"/_stuff",
                function(data) {
                    $("#cpuload").text(data.cpu+" %")
                    $("#ram").text(data.ram+" %")
                    $("#disk").text(data.disk+" %")
                });
        } 
```

# 使用 Websocket

`project/app/views/request/websockets.py`

```
# -*- coding: utf-8 -*-

# OS Imports
import json

# Local Imports
from app import sockets
from app.functions import get_cpu_load, get_disk_usage, get_vmem

@sockets.route('/_socket_system')
def socket_system(ws):
    """
    Returns the system informations, JSON Format
    CPU, RAM, and Disk Usage
    """
    while True:
        message = ws.receive()
        if message == "update":
            cpu = round(get_cpu_load())
            ram = round(get_vmem())
            disk = round(get_disk_usage())
            ws.send(json.dumps(dict(received=message, cpu=cpu, ram=ram, disk=disk)))
        else:
            ws.send(json.dumps(dict(received=message))) 
```

`project/app/__init__.py`

```
# -*- coding: utf-8 -*-
from flask import Flask
from flask_sockets import Sockets

app = Flask(__name__)
sockets = Sockets(app)
app.config.from_object('config')
from app import views 
```

使用 Flask-Websockets 让我的生活变得轻松多了。这是启动器： `launchwithsockets.sh`

```
#!/bin/sh

gunicorn -k flask_sockets.worker app:app 
```

Finally, here is the client code :
`custom.js`
[The code is a bit too long, so here it is.](http://pastebin.com/MCbEJjqD)
Note that I'm NOT using things like socket.io, that's why the code is long. This code also tries to reconnect to the server periodically, and can stop trying to reconnect on a user action. I use the Messenger lib to notify the user that something went wrong. Of course it's a bit more complicated than using socket.io but I really enjoyed coding the client side.

# ios - 检测用户是否复制 UITextView

> ID：15721686
> 
> 赞同：0
> 
> 时间：2013-03-30T18:03:23.697
> 
> 标签：ios, objective-c, copy, uitextview

我的应用程序中有一个 UITextView，有什么方法可以检测用户是否选择了它并复制了里面的文本？

或者

无论如何我可以阻止复制按钮出现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:09:26.170

如果您想禁用*复制、粘贴*功能，您应该继承 UITextView 并将此代码添加到您的新类中：

```
- (BOOL)canBecomeFirstResponder
{
   return NO;
} 
```

如何检测粘贴板事件，例如复制，粘贴看这里..

[如何在 UITextView 中禁用复制、剪切、选择、全选](https://stackoverflow.com/questions/1426731/how-disable-copy-cut-select-select-all-in-uitextview)

或在这里..

[如何以编程方式从 UITextField 禁用复制粘贴选项](https://stackoverflow.com/questions/6701019/how-to-disable-copy-paste-option-from-uitextfield-programmatically)

# mysql - Mysql search, match words if similar

> ID：15721690
> 
> 赞同：0
> 
> 时间：2013-03-30T18:03:45.910
> 
> 标签：mysql, database, full-text-search

I have a db with a table called sections. In that is a field called head that has a full text index with 3 entries each a string. 2 entries have the word motorcycle and one has motorcycles. I can't seem to find a way to return all 3 if the term "motorcycles" is search.

I have tried

```
SELECT * FROM sections
     WHERE MATCH (head) AGAINST ('Motorcycles') 
```

but it only returns the plural entry. I have also tried.

```
SELECT * FROM sections
   WHERE head like '%motorcycles%' 
```

but that also only returns the plural entry. Is there a way to return all three rows based on "motorcycles"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:07:33.670

Have you tried boolean mode?

```
where match (head) against ('+ Motorcycle*' in Boolean mode) 
```

More information is [here](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html).

Your where clause has an extra "s":

```
 SELECT * FROM sections WHERE head like '%motorcycle%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:09:53.047

Assuming your question is more general than the specific motorcylce example you've given...I'm not aware of a way that you can relax the contraints directly in the SQL (without a stored proc to pre process the input). I'd suggest pre processing your input with a regex to remove/replace the chars that make the word plural. Then use like in the way that you have shown on the singular version of the word.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:12:41.680

If i have got your **Questions** correctly I think you want something like this:

```
if (SELECT count(1) FROM sections WHERE head like '%motorcycles%')>1
begin
    select * FROM selections
     WHERE head like '%motorcycle%'
end 
```

# php - Automatically Update Bootstrap Layout With PHP

> ID：15721695
> 
> 赞同：0
> 
> 时间：2013-03-30T18:03:59.780
> 
> 标签：php, twitter-bootstrap, layout

I'm trying to generate a layout with php and jQuery which lists certain profiles and organizes them in a certain way.

Specifically, I have an array of program titles and I'd like to list all of the program titles on the page as headers with two program titles per row. Then, I have an array of names which each contain an array of program names. I'd like to list all of the users that have a certain program in their array underneath the relevant program title. Additionally, the names start off hidden and each program title has a button underneath it which hides and shows tutors. I've created this layout using Bootstrap here:

```
 <?php
        include ('objects.php');

        function tutorCreator($tutorName, $boxNum, $spanClass){
            include ('objects.php');
            echo "<div class='" . $spanClass . " tutorBox" . $boxNum . "'>";
            }
    ?>
        <div class="row-fluid">
            <span class="programHeader span5">DreamWeaver</span>
            <span class="programHeader offset1 span5">GIMP</span>
        </div>
        <div class="row-fluid">
            <span class="span2 showTutors">Show tutors</span>
            <span class="span2 offset4 showTutors">Show tutors</span>
        </div>
            <div class="row-fluid">
                <?php 
                    tutorCreator('Kevin Marks', '1', "span4");
                    tutorCreator('Kevin Marks','2', "span4 offset2");
                ?>
            </div>
            <div class="row-fluid">
                <?php 
                    tutorCreator('Helen Larson', "1", "span4");
                    tutorCreator('Helen Larson','2', "span4 offset2");
                ?>
            </div>
        <div class="row-fluid">
            <span class="programHeader span5">Google Analytics</span>
            <span class="programHeader offset1 span5">HootSuite</span>
        </div>
        <div class="row-fluid">
            <span class="span2 showTutors">Show tutors</span>
            <span class="span2 offset4 showTutors">Show tutors</span>
        </div>
            <div class="row-fluid">
                <?php 
                    tutorCreator('Ken Gato', '3', "span4");
                    tutorCreator('Julien Mans', '4', "span4 offset2");
                ?>
            </div>
            <div class="row-fluid">
                <?php 
                    tutorCreator('Ommed Kosh', '3', "span4");
                ?>
            </div> 
```

The classes added to the tutor names are for the purpose of being shown when the appropriate "show tutors" button is listed and to help with the layout.

The objects.php file contains the arrays with the list of tutors and the list of programs. This layout works fine. However, I'm trying to change the php code so that this layout is automatically updated each time I add a program or a tutor to the arrays in objects.php. I've been trying to figure it out for a few days and I just can't get an automatically updated layout which works well. I realize this is probably too broad a question but I've hit a road block so any help would really be appreciated. You can see a fuller version of the current layout here: [http://www.tutorgrams.com/tutors](http://www.tutorgrams.com/tutors). Thanks for any help.

这是 objects.php 文件（为简洁起见，删除了一些导师和程序）：

```
<?php

$programs = array();

$programs['DreamWeaver'] = array(
'name' => 'DreamWeaver');

$programs['GIMP'] = array(
'name' => 'GIMP');

$programs['Google Analytics'] = array(
'name' => 'Google Analytics');

$programs['HootSuite'] = array(
'name' => 'HootSuite');

$tutors['Helen Larson'] = array(
'name' => 'Helen Larson',
'programs' => array('DreamWeaver', 'GIMP')
);

$tutors['Kevin Marks'] = array(
    'name' => 'Kevin Marks',
'programs' => array('DreamWeaver', 'GIMP')
);

$tutors['Ommed Kosh'] = array(
'name' => 'Ommed Kosh',
'programs' => array('Google Analytics')
);

$tutors['Julien Mans'] = array(
'name' => 'Julien Mans',
'programs' => array('HootSuite')
);

$tutors['Ken Gato'] = array(
'name' => 'Ken Gato',
'programs' => array('Google Analytics')
);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:17:05.380

这看起来怎么样？

```
<?php 
$numProgs = count($programs);
$progs = array_keys($programs);

$i = 0; ?>

<?php while($i < $numProgs): ?>

    <div class="row-fluid">
        <span class="programHeader span5"><?php echo $progs[$i]; ?></span>
        <span class="programHeader offset1 span5"><?php echo $progs[$i + 1]; ?></span>
    </div>
    <div class="row-fluid">
        <span class="span2 showTutors">Show tutors</span>
        <span class="span2 offset4 showTutors">Show tutors</span>
    </div>

    <div class="row-fluid">
    <?php foreach($tutors as $name => $data) {
        $tutProgs = $data['programs'];
        if(in_array($progs[$i], $tutProgs)) {
            tutorCreator($name, $i, "span4");
        }
    } ?>
    </div>

    <div class="row-fluid">
    <?php
        foreach($tutors as $name => $data) {
            $tutProgs = $data['programs'];
            if(in_array($progs[$i + 1], $tutProgs)) {
                tutorCreator($name, $i + 1, "span4 offset2"); 
            }
        }
    ?>
    </div>

    <?php $i += 2; ?>
<?php endwhile; ?> 
```

它可能会进行一些优化，但它似乎对我有用。唯一的问题是我没有你的主题，所以它可能看起来还不正确。

# javascript - 使用 Knockout JS 级联 select2 组合框

> ID：15721699
> 
> 赞同：0
> 
> 时间：2013-03-30T18:04:13.780
> 
> 标签：javascript, jquery, knockout.js, combobox

**这是代码：http:** [//jsfiddle.net/W4qPT/](http://jsfiddle.net/W4qPT/)

组合框脚本包含*在底部*，如果删除它，一切正常。

我似乎无法使用 Knockout Ajax 提供给我的新内容来刷新组合框。

**HTML**

```
 <div>
        <div class="cbp-content" id="didScreen">
            <div>
                <table width='100%'>
                    <thead>
                        <tr>
                            <th width='25%'>State</th>
                            <th width='25%'>City</th>
                            <th class='quantity' width='10%'>Quantity</th>
                            <th width='10%'></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: items">
                        <tr>
                            <td>
                                <select class="combobox" data-bind="options: $parent.states, optionsText: 'name', value: state, optionsCaption: 'Select State'"></select>
                            </td>
                            <td>
                                <select class="combobox" data-bind="options: cities, optionsText: 'rc_abbr', optionsValue: 'id', value: city"></select>
                            </td>
                            <td>
                                <input name="quantity" data-bind="value: quantity" />
                            </td>
                            <td>
                                <button class="btn" data-bind="click: $parent.remove"><i class="icon-remove"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <button class="btn" data-bind="click: newItem">Add Item</button>
        </div>
    </div>
</fieldset> 
```

* * *

**JavaScript（淘汰赛 JS）**

```
var Item = function () {
    var self = this;
    self.state = ko.observable();
    self.city = ko.observable();
    self.quantity = ko.observable();

    self.cities = ko.observableArray([]);
    self.state.subscribe(function (state) {
        self.city("");
        self.cities.removeAll();
        $.ajax({
            url: '/echo/json/',
            type: 'POST',
            data: {
                json: ko.toJSON([{"id":"29","rc_abbr":"ANCHORAGE"}]),
            },
            success: function (response) {
                self.cities(response);
            }
        });
    });
};

var ViewModel = function (states) {
    var self = this;
    self.states = states;
    self.items = ko.observableArray([new Item()]);

    self.newItem = function () {
        self.items.push(new Item());
    };
    self.remove = function (item) {
        self.items.remove(item);
    };
};

var usStates = [{
    name: 'ALASKA',
    abbreviation: 'AK'
}];

window.vm = new ViewModel(usStates);
ko.applyBindings(window.vm, document.getElementById('didScreen'));
$(".combobox").select2(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:06:13.453

您必须`.select2()`再次调用您创建的所有新组合框。您现在只在 DOM 准备好时存在的组合框上调用它。

你可以改变这个：

```
self.newItem = function () {
    self.items.push(new Item());
}; 
```

对此：

```
self.newItem = function () {
    self.items.push(new Item());
    $(".combobox").not('.select2-container').select2();
}; 
```

# ruby-on-rails - 从“belongs_to”一个（rails）的形式创建两个关联模型

> ID：15721701
> 
> 赞同：0
> 
> 时间：2013-03-30T18:04:21.380
> 
> 标签：ruby-on-rails, forms, rails-activerecord

希望我连续的问题对任何人都没有问题，我想请你帮忙，如何实现从一个表格创建两个模型。

两个相关的模型是

```
class Employee < ActiveRecord::Base
  attr_accessible :name

  belongs_to :company
  attr_accessible :company_id
end

class Company < ActiveRecord::Base
  attr_accessible :name

  has_many :employees
end 
```

当我创建员工并且输入公司尚不存在时，我想要创建一家公司。没有“当公司不存在时”的要求，这是我的代码：

`employees/_form.html.erb`

```
<%= simple_form_for(@employee) do |f| %>
  <%= simple_form_for(@company) do |cf| %>
    <%= f.input :name, label: 'Employee Name', :required => true %>
    <%= cf.input :title, label: 'Company Name', :required => true %>
  <% end %>
<% end %> 
```

和`employees_controller.rb`

```
def new
  @employee = Employee.new
  @company = Company.new
end 
```

[...]

```
def create
  @employee = Employee.new(params[:employee])
  @company = Company.new(params[:company])
  @employee.company_id = params[:company_id]

  respond_to do |format|
    if @employee.save
      format.html { redirect_to @employee, notice: 'Employee was successfully created.' }
      format.json { render json: @employee, status: :created, location: @employee }
    else
      format.html { render action: "new" }
      format.json { render json: @employee.errors, status: :unprocessable_entity }
    end
  end
end 
```

这种员工和公司之间的某种关联（员工“持有”公司 ID）但它并没有创建（或者，如果我理解得很好，实际上并没有拯救）公司。

If I go on and add `@company.save` before the id assignment, everything seems okay. Is it, however? Shouldn't I render the `new company form` and have everything saved after that is submitted?

I have been searching online all day for the solution but in every case the implementation was performed the opposite way: How to create a bunch of employees from a new company form.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:26:00.950

Okay, after a lot of experimenting, I 've came down to this:

`employees/_form.html.erb`

```
<%= simple_form_for(@employee) do |f| %>
  <%= simple_fields_for(@company) do |cf| %>
    <%= f.input :name, label: 'Employee Name', :required => true %>
    <%= cf.input :title, label: 'Company Name', :required => true %>
  <% end %>
<% end %> 
```

`employees_controller.rb`

```
def create
  @employee = Employee.new(params[:employee])

  @company = Customer.find_or_create_by_name(params[:company][:name])
  @company.employees << @employee
  @company.save

  @employee.save
end 
```

It is slightly more elegant than the answer provided by @RadBrad but also influenced by it.

*if you need to know how to actually fill in all the attributes of the `company` model, follow [this](https://stackoverflow.com/questions/15887732/how-to-redirect-from-one-action-of-controller-a-to-an-action-of-controller-b-and)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:32:21.737

There are lot's of ways to go, here is one:

```
def Employee << ActiveRecord::Base
  def title
    return nil
  end
end

<%= simple_form_for(@employee) do |f| %>
  <%= f.input :name, label: 'Employee Name', :required => true %>
  <%= f.input :title, label: 'Company Name', :required => true %>
  <%= f.submit 'Create'
<% end %> 
```

Then in your EmployeesController:

```
def create
   co = Company.find_by_title(params[:employee][:title]).first
   unless co
      co = Company.new({:company=>params[:employee][:title]})
   end
   co.employees.build({:name=>params[:employee][:name]});
   co.save
end 
```

# ruby - Rails.vim - 如何测试所有功能和/或规格？

> ID：15721704
> 
> 赞同：1
> 
> 时间：2013-03-30T18:04:31.380
> 
> 标签：ruby, vim, rails.vim

我正在使用非常棒的**rails.vim 插件**。但是，我看不到如何在一个命令中测试所有规范。现在我需要打开一个特定的规范并做`:Rake`它只是测试当前打开的规范。但是，我如何测试所有规格？哪个命令？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T19:02:58.967

您是否尝试过将 rake 任务与 ViM 领导者映射配对？

在您的 Rakefile 中，您可以设置如下内容：

```
desc 'Continuous integration task'
task :ci do
  ['rspec',
   'cucumber -f progress',
   'rake konacha:run'].each do |cmd|
    system("bundle exec #{cmd}")

    raise "#{cmd} failed!" unless $?.exitstatus == 0
  end
end 
```

然后你可以在 ViM 中设置一个 leader 命令来执行你的 ci rake 任务：

```
nnoremap <leader>T :w\|:!bundle exec rake ci<CR> 
```

然后当你`<leader> T`在正常模式下执行时，ViM 会脱壳并运行`bundle exec rake ci`.

我使用 tmux，所以我更喜欢以下领导者映射，它在底部窗格中运行 rake 任务：

`nnoremap <leader>T :w\|:silent !tmux send-keys -t bottom C-u 'bundle exec rake ci' C-m <CR>\|:redraw!<CR>`

# javascript - 用于记住 javascript 功能的 Cookie

> ID：15721705
> 
> 赞同：0
> 
> 时间：2013-03-30T18:04:34.100
> 
> 标签：javascript, cookies

cookie 可以记住 javascript 功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:09:25.680

您不能将函数存储在 cookie 中，因为函数不能序列化为字符串。但是，这个函数看起来不像序列化它会有任何帮助。为什么你需要这样做？如果您尝试存储身份验证状态，那么您应该这样做而不是尝试存储功能。

# jquery - jquery 可排序乘法列表保存到 mySQL

> ID：15721706
> 
> 赞同：0
> 
> 时间：2013-03-30T18:04:36.583
> 
> 标签：jquery, ajax, jquery-ui-sortable

我相信问题是我没有通过序列化获得身份证号码？我从 php 得到的响应如下：

```
Array 
( 
    [sort1]=> menu[]=1&menu[]=2&menu2[]=3
    [sort2]=> menu2[]=4
) 
```

每个菜单项不应该编号为：menu[0]、menu[1] 等...？

下面是我的代码..

```
$(function() 
{
    $("#sortable1, #sortable2").sortable(
    {
    connectWith: '.connectedSortable',
    update : function () 
    { 
        $.ajax(
        {
            type: "POST",
            url: "sort_menu.php",
            data: 
            {
                sort1:$("#sortable1").sortable('serialize'),
                sort2:$("#sortable2").sortable('serialize')
            },
            error: function(res)
            {
            alert("theres an error "+ res);
            },
            success: function(res)
            {
            alert("theres a response "+ res);
            }
        });
    } 
    });
}); 
```

php：

```
 $result = mysql_query("SELECT * FROM menu WHERE crew='1' ORDER BY sort ASC") or die(mysql_error());
while($row = mysql_fetch_array($result)) {
echo "<li id=\"menu_".$row['id']."\">".$row['title']."</li>\n";
} 
```

以及接收ajax信息的表单

```
print_r($_POST);

$menu = $_REQUEST['sort1'];
for ($i = 0; $i < count($menu); $i++) {
mysql_query("UPDATE menu SET sort=" . $i . ", list='1' WHERE id='" . $menu[$i] . "'") or die(mysql_error());
} 
```

# php - How to stop Doctrine2 Migrations:Diff from always adding foreign key relationships that already exist in Database?

> ID：15721712
> 
> 赞同：26
> 
> 时间：2013-03-30T18:05:06.393
> 
> 标签：php, mysql, symfony, doctrine-orm, doctrine-migrations

I'm using doctrine2 with a symfony2.1 project. I have an entity that has a few many to one relationships to other tables. The foreign key relationships for these many-to-one's have already been updated in the database, but every time I run migrations:diff or schema:update --dump-sql it adds the same update commands to add the foreign key relationships again. When I run schema:validate it says my mapping is out of sync with my database.

My application works fine, the relationships are working properly, and the schema in my database looks correct. Why is doctrine still trying to add these foreign keys?

Here's my code (for one of the problematic parameters):

In my "Ticket" entity I have:

```
/**
 * Authenticated User who scored the ticket. 
 *
 * @ORM\ManyToOne(targetEntity="CS\SecurityBundle\Entity\User")
 * @ORM\JoinColumn(name="scoring_user_id", referencedColumnName="id")
 */
protected $scoringUser; 
```

I currently have it set up to be one-directional, so there is no inversedBy in the User entity.

This generates the following in my migrations or schema:update dump even though it's in the database already:

```
$this->addSql("ALTER TABLE tickets ADD CONSTRAINT FK_54469DF4BB0D9452 FOREIGN KEY (scoring_user_id) REFERENCES users (id)"); 
```

Any idea what I'm doing wrong here?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-27T07:34:17.307

> Why is doctrine still trying to add these foreign keys?

The correct term here is "foreign key constraint". Without the constraint, the column in question is just a column. It's the constraint that enforces that the value of that column exists as a primary key in another table.

> Why is doctrine still trying to add these foreign keys?

Because the database vendor/engine doesn't support foreign key constraints, but Doctrine fails to recognize that.

If I have to guess, you're using MySQL with the MyISAM engine. MyISAM doesn't support foreign key constraints. Unfortunately Doctrine isn't "smart" enough to see that. It sees that MySQL is used, therefor blindly assumes that foreign key constraints are supported.

My advise is to switch to the InnoDB engine, unless you have a good reason for using MyISAM.

```
ALTER TABLE table_name ENGINE=InnoDB; 
```

[Converting Tables from MyISAM to InnoDB](http://dev.mysql.com/doc/refman/5.5/en/converting-tables-to-innodb.html)

# sencha-touch-2 - Sencha Touch 2 中的配置文件功能导致生产模式构建出现问题

> ID：15721716
> 
> 赞同：1
> 
> 时间：2013-03-30T18:05:50.433
> 
> 标签：sencha-touch-2, sencha-touch-2.1

我创建了一个 Sencha Touch 2 应用程序并构建了一个生产模式版本。但是，我在生产版本中遇到了一个大问题，它在手机/平板电脑模式下运行。

ST2 的当前配置文件实现似乎存在缺陷，因为即使您激活了特定配置文件，所有视图仍会加载。在我的应用程序中，我希望能够使用视图配置中的 xtype 别名指定视图，并拥有正确的视图用于在没有任何特殊编码的情况下加载的手机或平板电脑配置文件。如果加载了配置文件中的所有视图，那么这将不起作用（一个视图将始终覆盖另一个视图）。

我能做到这一点的唯一方法是在启动阶段（在 app.js 中）动态添加配置文件，如下所示：

```
Ext.application({
    name: 'MyTestApp',

    var activeProfile = Ext.os.is.Phone ? ['Phone'] : ['Tablet'];

    requires: [ ... ],

    profiles: activeProfile

}); 
```

这工作得很好。这意味着我可以加载正确的视图，并且仍然只在另一个视图的配置中使用 xtype 别名和/或控制器中的 ref。但是，我注意到当我生成生产版本并加载控制台窗口时，定义了以下两个：

```
MyTestApp.views.phone.Login
MyTestApp.views.tablet.Login 
```

通常，平板电脑或手机版本将根据配置文件未定义。我假设是这种情况，因为生产模式构建已解析所有依赖项，然后包含所有视图，而不管配置文件如何。

所以在我的启动控制器中，我有一个按钮处理程序，然后从 xtype 创建一个登录视图。

控制器：

```
refs: {                
            loginView: {
                selector: 'loginview',
                xtype: 'loginview',
                autoCreate: true
            }
 } 
```

处理程序：

```
var loginView = this.getLoginView(); 
```

在开发模式下，loginView 变量将是**MyTestApp.views.tablet.Login**或**MyTestApp.views.phone.Login**，具体取决于配置文件。

在生产模式下，如何确保此处实例化的登录视图根据配置文件获得正确的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-08T14:26:57.480

我一直在为此苦苦挣扎，当我将任何一种解决方案移动到设备上时，我会被所有视图都引用的事实所困扰，并且总是会遇到一些 xtype 冲突给我电话视图。（我最终不得不改用别名——不知道为什么:(）。我终于设法为我的用例破解了这个，只是分享以供将来参考。

我正在使用最新的 cmd 4.0.2.67 运行 touch 2.3.1 和 cordova 3.3.1

我使用 Christopher 的解决方案，除了我必须更改 sencha touch 源目录中的源代码，而不是将其保留在 app.js 中

此外，我必须按以下方式配置视图，以便：

*   define a base class for the view with an alias so the controller to understand the ref as it loads first
*   dynamically assign the alias to the view instantiated by the profile
*   strip out (using Christopher code)

Base class for the views

```
 Ext.define('MyApp.view.CatalogView', {
        extend: 'Ext.Container',
        alias: 'widget.catalogview'
    }); 
```

Assign an alias to the profile specific view

```
 Ext.define('MyApp.profile.Phone', {
        extend: 'Ext.app.Profile',

        config: {
            name: 'Phone',
            views: ['CatalogView'],
        },

       isActive: function() {
           return Ext.os.is('Phone');
       },

       launch: function() {
           Ext.ClassManager.setAlias('MyApp.view.phone.CatalogView', 'widget.catalogview');
       }
    }); 
```

Repeat for the tablet view

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:35:11.530

对于所有想知道我是如何解决这个问题的人，我现在把头发都拔掉后就秃了；）

我希望 xtype 名称保持不变的所有配置文件视图，即使它们可能属于手机或平板电脑配置文件，我必须删除类上的别名/xtype 配置。然后，我使用共享辅助函数定义了一个配置文件基类：

```
Ext.define('MyApp.profile.Base', {
    extend: 'Ext.app.Profile',

    config: {

    },

    mapViewAliases: function () {
        var self = this;

        var views = this.getDependencies().view;
        var newAliasMap = null;

        Ext.each(views, function (view) {
            Ext.Array.some(self.getViewsToAliasMap(), function (map) {
                if (map[view]) {
                    if (!newAliasMap) {
                        newAliasMap = {};
                    }

                    newAliasMap[view] = [map[view]];                    
                    return true;
                }
            });
        });

        if (newAliasMap) {
            console.log('view aliases being mapped for: ' + this.$className);
            Ext.ClassManager.addNameAliasMappings(newAliasMap)
        }
    }
}); 
```

然后我有从基类继承的配置文件类（这与平板电脑配置文件重复，除了 viewsToAliasMap 包含属于平板电脑配置文件而不是手机配置文件的类）：

```
Ext.define('MyApp.profile.Phone', {
    extend: 'MyApp.profile.Base',

    config: {
        name: 'Phone',
        views: ['Login', 'Home', 'Welcome' ],

        viewsToAliasMap: [
             { 'MyApp.view.phone.Login': 'widget.loginview' },
             { 'MyApp.view.phone.Home': 'widget.homeview' },
             { 'MyApp.view.phone.Welcome': 'widget.welcomeview' }
        ]
    },

    isActive: function () {
        return Ext.os.is.Phone;
    },

    launch: function () {
        console.log("Phone profile launched");

        this.mapViewAliases();

    }
}); 
```

所以基本上，配置文件在启动函数中调用基类上的函数 mapViewAliases()。mapViewAliases() 使用类管理器的配置文件中定义的别名注册视图类名称。因此，xtype 名称有效地在运行时解析。

我确信这段代码可以改进和/或更好的方法来做到这一点。请随时告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T06:57:24.390

我正在使用一个非常幼稚的实现......我确信它可以变得更强大，但我已经在这个方面进行了 5 个小时左右的破解。

```
Ext.define('MyApp.override.Application', {
    override : 'Ext.app.Application',

    onProfilesLoaded: function() {
        var profiles  = this.getProfiles(),
            length    = profiles.length,
            instances = [],
            requires  = this.gatherDependencies(),
            current, i, profileDeps;

        for (i = 0; i < length; i++) {
            var instance = Ext.create(profiles[i], {
                application: this
            });

            /*
             * Note that we actually require all of the dependencies for all Profiles - this is so that we can produce
             * a single build file that will work on all defined Profiles. Although the other classes will be loaded,
             * the correct Profile will still be identified and the other classes ignored. While this feels somewhat
             * inefficient, the majority of the bulk of an application is likely to be the framework itself. The bigger
             * the app though, the bigger the effect of this inefficiency so ideally we will create a way to create and
             * load Profile-specific builds in a future release.
             *
             CMK - PSHAW!
             */

            if (instance.isActive() && !current) {
                console.log('Profile active: ' + instance.getName());
                current = instance;

                profileDeps = instance.getDependencies();
                requires = requires.concat(profileDeps.all);
                var ns = instance.getNamespace();

                this.setCurrentProfile(current);

                // Merge Controllers, Models, Stores, and Views
                this.setControllers(this.getControllers().concat(profileDeps.controller));
                this.setModels(this.getModels().concat(profileDeps.model));
                this.setStores(this.getStores().concat(profileDeps.store));
                this.setViews(this.getViews().concat(profileDeps.view));

                // Remove the view ref and requires for default views, when a profile specific one exists
                Ext.each(profileDeps.view, function(className) {
                    if (className.indexOf('view.' + ns + '.') !== -1) {

                        // Requires
                        var index = requires.indexOf(className.replace('view.' + ns, 'view'));
                        if (index !== -1) {
                            requires.splice(index, 1);
                        }
                        // Views
                        index = this.getViews().indexOf(className.replace('view.' + ns, 'view'));
                        if (index !== -1) {
                            this.getViews().splice(index, 1);
                        }
                    }
                }, this);

                instances[0] = instance;
                break;
            }
        }

        this.setProfileInstances(instances);
        Ext.require(requires, this.loadControllerDependencies, this);
    }
}); 
```

把它放在你的 Ext.application 之前，它会替换配置文件加载器...这个删除与活动配置文件命名空间中同名的默认视图。

它要求您为匹配的视图定义一个 xtype，然后即使您在控制器中的 refs 也可以工作......

我需要继续对此进行测试，但到目前为止它看起来很有希望。

# iphone - 在 iPhone SDK 的 Youtube API 中，我试图获取每个搜索结果的 videoID。但是每次都报错，我该怎么办？

> ID：15721720
> 
> 赞同：0
> 
> 时间：2013-03-30T18:06:16.807
> 
> 标签：iphone, search, youtube-api

这是我的代码：

```
 // Create a service object for executing queries
GTLServiceYouTube *service = [[GTLServiceYouTube alloc] init];
// Services which do not require sign-in may need an API key from the
// API Console
service.APIKey = @"AIzaSyD9pvsUtnegJvwv5z5XrBO5vFTBVpErYN8";
// Create a query
GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id"];
query.maxResults = 50;
query.q = @"hiking boots";
//query.country = @"US";
// Execute the query
GTLServiceTicket *ticket = [service executeQuery:query
                               completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
                                   // This callback block is run when the fetch completes
                                   if (error == nil) {
                                       GTLYouTubeSearchListResponse *products = object;

                                       // iteration of items and subscript access to items.
                                       for (GTLYouTubeSearchResult *item in products) {

                                           //NSLog(@"%@",item.identifier); - THIS WORKS, BUT GIVES ME THE WHOLE IDENTIFIER, I JUST WANT THE VIDEO ID
                                           NSLog(@"%@",item.identifier.videoId);
                                       }
                                   }else{
                                       NSLog(@"Error: %@", error.description);
                                   }
                               }]; 
```

如果您注意到我的第一个 NSLog 上方的评论，我可以毫无问题地打印出许多内容。但是，如果我尝试打印 item.identifier 的属性，应用程序将完全崩溃。崩溃日志是这样的：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[GTLYouTubeVideo videoId]: unrecognized selector sent 
```

现在，item.identifier 是一个 GTLYouTubeResourceId，那么为什么它认为我正在尝试从 GTLYoutubeVideo 获取属性？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T00:48:13.440

Try accessing the JSON of the identifier object directly. There appears to be a "videoId" value in there. like this:

> [item.identifier.JSON objectForKey:@"videoId"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:16:47.687

> 现在， item.identifier 是一个`GTLYouTubeResourceId`

显然，它不是。

> 那么为什么它认为我正在尝试从`GTLYoutubeVideo`???

~~Because you wrote three consecutive question marks.~~ Because it's a `GTLYoutubeVideo` instance, in fact. Sorry, C (and thus Objective-C) is not a very type-safe language. You can declare objects to be of some type, and they can be assigned a pointer to some other kind of object at runtime.

Here, I suspect you either misread something in the documentation or there's a bug in the client library or this is a weird memory management error, but one thing is sure: the runtime is always right.

# filepicker.io - 我可以使用文件选择器将图像转换为渐进式 jpeg 吗？

> ID：15721721
> 
> 赞同：1
> 
> 时间：2013-03-30T18:06:33.410
> 
> 标签：filepicker.io

如果由 filepicker 的方便转换 API 生成的 jpeg 文件可以生成渐进式 jpeg，那将非常有帮助。已经可以完成了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:42:35.673

我们目前不支持渐进式 jpeg。这是个好主意，我已经创建了一个功能请求票。谢谢。

# javascript - 使用 coffescript 有条件地将表添加到 dom

> ID：15721729
> 
> 赞同：0
> 
> 时间：2013-03-30T18:07:17.083
> 
> 标签：javascript, jquery, coffeescript, html-table

我有一些包含事件对象数组的 json，每个事件都有一个日期和一个名称。在coffeescript中，我想遍历json，检查每个对象是否已经在页面上有一个表，其id与事件日期相同；如果确实如此，则将事件名称添加到具有相同事件日期的表中，如果没有，则创建一个以事件日期为 id 的新表并将名称添加到表中。

我不确定为什么我不能让它工作，即使不考虑将事件名称添加为表数据，我的代码也会为每个事件创建一个表，而不是每个日期只创建一个表。

```
for event,i in events
  date = event["date"]
  if $("table ##{date.replace(/\s+/g, '')}").length is 0
  table = "<table id='#{date.replace(/\s+/g, '')}'>
    <thead><tr><th>#{date}</th></tr></thead>
    <tbody></tbody></table>"
    $('#matches').append table 
```

我遍历 events 数组，检查是否有一个 id 与当前项目的日期相同的表，如果没有，则创建表并将其添加到页面，但这会为每个项目添加一个表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:12:50.537

选择器中的空格将查找元素的后代 ID，而不是元素本身。

如果没有看到 html 和数组示例，很难进一步提供帮助，但是如果您有`<table id="someval">`并且想要检查该 id ，则选择器肯定会出现问题。

由于页面中的 ID 在定义上必须是唯一的，因此仅在选择器中使用 ID 实际上更有效。ID 搜索是最快的 DOM 搜索。

还有我读书`coffee`不好。不确定双标`##`是什么。输出应该只有一个，并且选择器的输出中`#`不应该有任何输出`{}`

# windows-phone-8 - Choosing right live tile type

> ID：15721731
> 
> 赞同：2
> 
> 时间：2013-03-30T18:07:29.520
> 
> 标签：windows-phone-8, live-tile

I'm a bit confused about what kind of tile I should choose to make my scenario work.

Scenario is as follows: my application supports small and medium tiles. By default in both these modes it shows an app icon on transparent background but user can choose a particular image to be a tile cover. When tile is covered with image I don't want it to flip or move - just a static image with app name on top of it.

I've tried `TemplateCycle` with app icon as default and user's selected image as an alternative but cycle tile moves these images up and down all the time and I don't want that. I've was considered `TempalteIconic` but it turned out it only supports images with transparent background so no option for user's image. So what kind of tile should I choose?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:35:32.203

Use a normal fliptile but don't set anything(text, image) on the back. It won't flip if you do that.

# c - POSIX 中的消息队列

> ID：15721732
> 
> 赞同：0
> 
> 时间：2013-03-30T18:07:31.360
> 
> 标签：c, linux, posix, ipc

如果我有一个消息队列

`mqd_t m; m = mq_open(NAME,O_CREAT | O_RDWR, 0666, NULL);`

是否可以在其上发送消息并在同一消息上执行接收的相同过程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:14:30.750

为什么不？它可能。请参阅此处的官方手册： http: [//man7.org/linux/man-pages/man3/mq_open.3.html](http://man7.org/linux/man-pages/man3/mq_open.3.html) 参数 O_RDWR 表示：

> O_RDWR 打开队列以发送和接收消息。

就像文件对象一样，您可以在一个进程中读取和写入它。

# css - 无法让我的 div 移动（位置）

> ID：15721733
> 
> 赞同：1
> 
> 时间：2013-03-30T18:07:32.677
> 
> 标签：css, positioning

我今天正在做我的第一段 HTML 和 CSS，我在尝试移动`div`. 我阅读了一些关于 CSS 的教程，并尝试复制我所看到的内容。但由于某种原因，我无法`div`移动。

任何人都可以直接告诉我我做错了什么吗？

CSS

```
#seax {
  position:static;
  top:400;
  left:400;
} 
```

HTML

```
<div id="seax">
  <form autocomplete="off" method="post" action="/search.html">
    <table>
      <tbody>
        <tr>
          <td>Search:</td>
          <td>&nbsp;
            <input type="text" size="40" name="for" class="ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">
             &nbsp;&nbsp; 
          </td>
          <td>
            <input type="hidden" name="brand" value="0">
            <input type="image" src="/user/templates/custom/search.gif" value="Go" alt="Go" style="padding: 0px">
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:10:21.880

更改`position:static;`为`position:relative;`。静态位置将 div 显示在它的默认位置，就像它在您看到的文档流中出现的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:17:11.747

给`div`一个`position`_`absolute`

```
#seax {
  position: absolute;
  top:400;
  left:400;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:21:30.280

将“px”添加到您的 CSS，并使用绝对

```
#seax {
position:absolute;
top:100px;
left:100px;
} 
```

[http://jsfiddle.net/djwave28/tnvQz/](http://jsfiddle.net/djwave28/tnvQz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T18:21:42.817

这实际上取决于您要如何定位 div。

`position: static;`绝对是您的问题，因为静态位置（如@Omega 所述）在其默认位置显示 div 。你的意思是写要么`position: absolute`要么`position: relative`。两者之间的区别在[这里](https://stackoverflow.com/questions/10426497/position-relative-vs-position-absolute "这里")得到了最好的概述，但我会给你一个 tl;dr。

`position: absolute`相对于整个页面定位 div，而`position: relative`相对于父级定位它。

此外，您在和属性值（即和）`px`的末尾缺少`top``left``top:10px;``left:10px;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-20T02:34:48.880

尝试改变

```
<div id="seax"></div> 
```

至

```
<div class="seax"></div> 
```

和

```
#seax {
position:static;
top:400;
left:400;
 } 
```

至

```
.seax {
 position:absolute;
 top:400px;
 left:400px;
} 
```

如果要`seax`用于多个元素。

你甚至可以尝试：

```
<form autocomplete="off" method="post" action="/search.html">
  <div class="seax">
    <table>
      <tbody>
        <tr>
          <td>Search:</td>
          <td>&nbsp;
            <input type="text" size="40" name="for" class="ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">
             &nbsp;&nbsp; 
          </td>
          <td>
            <input type="hidden" name="brand" value="0">
            <input type="image" src="/user/templates/custom/search.gif" value="Go" alt="Go" style="padding: 0px">
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</form> 
```

那应该解决它。否则，您的 HTML 文档应如下所示：

```
<!DOCTYPE html>
<html>
  <head>
  <title>Page Title</title>
  </head>
  <style>
   .seax {
    position:absolute;
    top:400px;
    left:400px;
    }
</style>
<body>

<div class="seax">
 <form autocomplete="off" method="post" action="/search.html">
  <table>
    <tbody>
     <tr>
      <td>Search:</td>
       <td>&nbsp;
        <input type="text" size="40" name="for" class="ui-
autocomplete-input" autocomplete="off" role="textbox" aria-
autocomplete="list" aria-haspopup="true">
         &nbsp;&nbsp; 
        </td>
        <td>
        <input type="hidden" name="brand" value="0">
        <input type="image" src="/user/templates/custom/search.gif" 
   value="Go" alt="Go" style="padding: 0px">
         </td>
        </tr>
      </tbody>
     </table>
   </form>
 </div>

</body>
</html> 
```

# visual-studio - why F# debugger lies?

> ID：15721736
> 
> 赞同：6
> 
> 时间：2013-03-30T18:07:40.667
> 
> 标签：visual-studio, error-handling, f#

Can anyone explain me why debugger of VS2012 is showing different values for same member of object? (See the figure)

[http://s2.uploads.ru/jlkw0.png](http://s2.uploads.ru/jlkw0.png) (Sorry for nonEnglish interface of VS, but I think the situation is clear.)

Here the code:

[http://pastie.org/7186239](http://pastie.org/7186239)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T18:57:43.220

The debugging experience seems to do a poor job of identifying the correct binding for identifiers. In your example, this means that any identifier called `Source` is really showing the value of `this.Source`, rather than the corresponding property of the correct object. Note that you can get the right value by hovering over `y` and expanding the members (although this is obviously not a great experience).

There are even more confusing ways that this issue manifests itself:

```
type T() =
    member val P = 1

    member this.DoSomething() =
        let P = "test"      // set breakpoint here, hover over P
        printfn "%i" this.P // set breakpoint here, hover over P

T().DoSomething() 
```

Now, whichever instance of `P` you hover over, you get the wrong thing!

# java - Android AsyncTask 总是崩溃

> ID：15721737
> 
> 赞同：0
> 
> 时间：2013-03-30T18:07:41.023
> 
> 标签：java, android, crash, android-asynctask

很抱歉提出这样的问题，但我已经尝试修复它几个小时，但它不起作用。我正在使用`AsyncTask`下载文件并显示进度。

我已经在我的应用程序中使用过一次，效果很好，所以我只是将代码复制到另一个类中并进行了一些编辑。但是无论我做什么，当我单击按钮下载时，它都会崩溃。

我确实有互联网许可，以及写入外部存储的许可。这是代码：

`BootAnimation.class`：

```
package com.cydeon.plasmamodz;

import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.concurrent.TimeoutException;

import com.koushikdutta.urlimageviewhelper.UrlImageViewHelper;
import com.stericson.RootTools.RootTools;
import com.stericson.RootTools.exceptions.RootDeniedException;
import com.stericson.RootTools.execution.CommandCapture;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class BootAnimation extends Activity{

String fileName;

private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
        out.write(buffer, 0, read);
    }
}

private class DownloadFile extends AsyncTask<String, Integer, String>{
    @Override
    protected String doInBackground(String... sURL) {
        try{
            URL url = new URL(sURL[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            //Shows 0-100% progress bar
            int fileLength = connection.getContentLength();

            //Download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/plasma/boot/bootanimation.zip");
            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                //Publish the Progress
                publishProgress((int) (total * 100/fileLength));
                output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();

    } catch (Exception e) {

    }
    return null;
        }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress){
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        mProgressDialog.dismiss();
        Context context = getApplicationContext();
        CharSequence text = "Installing " + fileName;
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
        CommandCapture command = new CommandCapture(0, "su", "#!/system/bin/sh", "busybox mount -o remount, rw /system", "cd /sdcard/plasma/boot", "rm /system/media/bootanimation.zip", "cp /sdcard/plasma/boot/bootanimation.zip /system/media", "chmod 644 /system/media/bootanimation.zip", "busybox killall system_server");
        try {
            RootTools.getShell(true).add(command).waitForFinish();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (TimeoutException e) {
            e.printStackTrace();
        } catch (RootDeniedException e) {
            e.printStackTrace();
        }
    }
}

ProgressDialog mProgressDialog;

@Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.battery);

    ProgressDialog mProgressDialog;
    ImageView batteryView = (ImageView) findViewById(R.id.ivBattery);

    Bundle battery;
    battery = getIntent().getExtras();
    final String android = battery.getString("Android");
    final String dragon = battery.getString("Dragon");
    final String gameboy = battery.getString("GameBoy");
    final String gamecube = battery.getString("GameCube");
    final String nexus = battery.getString("Nexus");
    final String nightmare = battery.getString("Nightmare");
    final String xbox = battery.getString("Xbox");
    final String xbox1 = battery.getString("Xbox1");

    if (android != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "https://dl.dropbox.com/s/kl2bbv7vp2sq9mh/0038.jpg", R.drawable.default_img, 60000);
    }else if (dragon != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm9.staticflickr.com/8158/7454334802_31641ae875_m.jpg", R.drawable.default_img, 60000);
    }else if (gameboy != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm9.staticflickr.com/8153/7457111720_6d74056a02_m.jpg", R.drawable.default_img, 60000);
    }else if (gamecube != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm9.staticflickr.com/8015/7457111876_ca01535a4d_m.jpg", R.drawable.default_img, 60000);
    }else if (nexus != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm9.staticflickr.com/8149/7462059092_86088934b2_m.jpg", R.drawable.default_img, 60000);
    }else if (nightmare != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm9.staticflickr.com/8014/7490899268_6b812e99f4_m.jpg", R.drawable.default_img, 60000);
    }else if (xbox != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm8.staticflickr.com/7254/7457111536_4d1924a1d4_m.jpg", R.drawable.default_img, 60000);
    }else if (xbox1 != null){
        UrlImageViewHelper.setUrlDrawable(batteryView, "http://farm9.staticflickr.com/8012/7457111956_8ca4ee912f_m.jpg", R.drawable.default_img, 60000);
    }

    mProgressDialog = new ProgressDialog(BootAnimation.this);
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setMessage("Downloading " + fileName);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mProgressDialog.setCancelable(false);
    Button bInstallB = (Button) findViewById(R.id.bInstallBattery);
    Button bReturnB = (Button) findViewById(R.id.bReturnBattery);
    bInstallB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (android != null){
                fileName = "Android Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("https://dl.dropbox.com/s/mqan6ly3g8t4r5j/bootanimation.zip");
            }if (dragon != null){
                fileName = "Dragon Ball Boot Animation (46.35MB)";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://205.196.122.234/snexuws5kfeg/vjzk5v33fu1u6ca/DBbootanimation.zip");
            }if (gameboy != null){
                fileName = "GameBoy Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://205.196.120.109/j9ye9cznxazg/oqu704icx2kxx30/Gbootanimation.zip");
            }if (gamecube != null){
                fileName = "GameCube Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://199.91.154.113/hzdvf89m0vag/r86xilqqq8mursc/GCbootanimation.zip");
            }if (nexus != null){
                fileName = "Nexus Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://forum.xda-developers.com/attachment.php?attachmentid=1162570&d=1340907701");
            }if (nightmare != null){
                fileName = "The Nightmare Before Christmas Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://199.91.154.15/75mtt4zeb4yg/co5d822mralvmn4/The+Nightmare+Before+Christmas.zip");
            }if (xbox != null){
                fileName = "New Xbox Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://205.196.121.24/n4ccp4ps8zzg/j2on8mnc7rqo2q2/NXbootanimation.zip");
            }if (xbox1 != null){
                fileName = "Old Xbox Boot Animation";
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http://205.196.120.108/31oc4yj1njxg/un8leuns2md21fq/OXbootanimation.zip");
            }

        }
    });

    bReturnB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
        }
    });

    }
} 
```

我想也许是按钮让它崩溃了，我`AsyncTask`的很好，但是如果说`if(android != null){`，我改变了图像，然后，当我测试它时，它改变了图像。因此，与按钮或字符串无关，一切正常。

它与我的`AsyncTask`. 这`AsyncTask`在以前的课程中基本相同，效果很好，所以我不确定问题是什么。

这是一个日志：

```
E/AndroidRuntime(24151): FATAL EXCEPTION: main
E/AndroidRuntime(24151): java.lang.NullPointerException
E/AndroidRuntime(24151):    at com.cydeon.plasmamodz.BootAnimation$DownloadFile.onPreExecute(BootAnimation.java:76)
E/AndroidRuntime(24151):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)  
E/AndroidRuntime(24151):    at android.os.AsyncTask.execute(AsyncTask.java:534)
E/AndroidRuntime(24151):    at com.cydeon.plasmamodz.BootAnimation$1.onClick(BootAnimation.java:189)
E/AndroidRuntime(24151):    at android.view.View.performClick(View.java:4204)
E/AndroidRuntime(24151):    at android.view.View$PerformClick.run(View.java:17355)
E/AndroidRuntime(24151):    at android.os.Handler.handleCallback(Handler.java:725)
E/AndroidRuntime(24151):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(24151):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(24151):    at  android.app.ActivityThread.main(ActivityThread.java:5235)
E/AndroidRuntime(24151):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(24151):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(24151):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
E/AndroidRuntime(24151):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
E/AndroidRuntime(24151):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:53:52.243

从上面显示的代码，

看来您没有`mProgressDialog`在调用 show 之前初始化。并且如前所述，还有第二个声明`mProgressDialog`也需要删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T03:37:06.587

Your mProgressDialog is null when execute onPreExecute() method.

In your code:

```
@Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.battery);

    ProgressDialog mProgressDialog;

    ......

    mProgressDialog = new ProgressDialog(BootAnimation.this);
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setMessage("Downloading " + fileName);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
} 
```

You initialize local file mProgressDialog in method but not in class.

# node.js - 如何使用 angularjs 和 nodejs 处理浏览器缓存？

> ID：15721739
> 
> 赞同：3
> 
> 时间：2013-03-30T18:07:49.447
> 
> 标签：node.js, angularjs

目前我正在使用 angularjs 和 nodejs

我的服务器中有一些角度模板，当角度请求模板时，模板将在浏览器中呈现并由浏览器缓存，如果假设我正在更改模板的布局并更新服务器中的模板，现在当用户被重定向到同一个模板时，浏览器会从旧的浏览器缓存中呈现模板。

如何克服这个问题？

注意：我不想清除我的整个浏览器缓存，因为它会影响我的整体网站性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:13:52.640

## 实际的

在您未缓存的某些页面上，您可以附加`?ver=`到 url 以“破坏”缓存。每当您更改 URL 时，都会导致浏览器重新加载资源。添加`?ver=`到缓存资源并在需要重新加载时更改它。

## 有趣但不太实用

[创建一个单页应用程序，我使用AppCache](http://www.html5rocks.com/en/tutorials/appcache/beginner/)解决了这类问题。使用应用程序缓存，您可以要求页面重新加载资源。从链接页面：

```
// Check if a new cache is available on page load.
window.addEventListener('load', function(e) {

  window.applicationCache.addEventListener('updateready', function(e) {
    if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
      // Browser downloaded a new app cache.
      // Swap it in and reload the page to get the new hotness.
      window.applicationCache.swapCache();
      if (confirm('A new version of this site is available. Load it?')) {
        window.location.reload();
      }
    } else {
      // Manifest didn't changed. Nothing new to server.
    }
  }, false);

}, false); 
```

请注意，这仅适用于 Chrome、Firefox、Safari、Opera 和 IE10 等新浏览器。我想提出一种新方法。

# java - Akka（java），对所有孩子的非阻塞广播

> ID：15721741
> 
> 赞同：3
> 
> 时间：2013-03-30T18:08:15.290
> 
> 标签：java, akka, broadcast, router

假设我有一个 Region Actor，每个区域里面都有一定数量的人。你如何向每个人广播消息，知道人员列表可以随时间变化，广播路由器似乎是选择，但问题是它们有最大数量的路由，我无法动态追加人员路由器。

我的问题是：我知道有一个 EventBus，我可以为我的人订阅事件总线，但我不希望他们收到发布的每条消息，我希望他们收到该地区的消息。

现在在akka中，我们必须创建一个具有一定数量routee的路由器，例如：

```
Router router = new router(person1, person2) 
```

这很糟糕，因为一开始该地区没有人，我不知道将加入我的地区的人。

有没有办法制作一种动态路由器：示例：

```
Region region = new region()
region.router = new Router()
Person person1 = new Person()
region.router.subscribe(person1);     
region.router.tell("hello",null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:14:49.227

您的解决方案已经非常接近：您需要一个路由器，但不需要一个特制的预制路由器。相反，只需编写一个将消息转发给订阅者的 actor：

```
class MyRouter extends UntypedActor {
  final Set<ActorRef> subscribers = new HashSet<ActorRef>();

  @Override public void onReceive(Object msg) {
    if (msg instanceof Subscribe) {
      subscribers.add(getSender());
    } else if (msg instanceof Unsubscribe) {
      subscribers.remove(getSender());
    } else {
      for (ActorRef target: subscribers) {
        target.tell(msg, getSender());
      }
    }
  }
} 
```

# assembly - 使用 DOS 系统调用附加到文本文件

> ID：15721746
> 
> 赞同：1
> 
> 时间：2013-03-30T18:08:51.827
> 
> 标签：assembly, file-io, x86, dos, x86-16

再会！我这里有一个 TASM 代码，当我再次运行程序时它不会附加新字符串。追加的代码行是什么？非常感谢！

```
; This example program creates a file and then writes to it.
.model small
.stack

.data 
CR equ 13
LF equ 10

StartMessage DB "This program creates a file called NEW.TXT"
         DB ,"on the C drive.$"

EndMessage DB CR,LF,"File create OK, look at file to"
       DB ,"be sure.$"

WriteMessage  DB "An error has occurred (WRITING)$"
OpenMessage   DB "An error has occurred (OPENING)$"
CreateMessage DB "An error has occurred (CREATING)$"

WriteMe  DB "HELLO, THIS IS A TEST, HAS IT WORKED?",0
FileName DB "new.txt",0 ; name of file to open 
Handle   DW ?   ; to store file handle 

.code 
START:
mov ax,@data    ; base address of data segment
mov ds,ax   ; put it in ds
mov dx,offset StartMessage 
mov ah,09h 
int 21h 

mov dx,offset FileName  ; put offset of filename in dx 
xor cx,cx       ; clear cx - make ordinary file
mov ah,3Ch      ; function 3Ch - create a file
int 21h         ; call DOS service

jc CreateError      ; jump if there is an error

mov dx,offset FileName  ; put offset of filename in dx
mov al,2        ; access mode -read and write
mov ah,3Dh      ; function 3Dh - open the file
int 21h         ; call dos service

jc OpenError        ; jump if there is an error
mov Handle,ax       ; save value of handle 

mov dx,offset WriteMe   ; address of information to write 
mov bx,Handle       ; file handle for file
mov cx,38       ; 38 bytes to be written
mov ah,40h      ; function 40h - write to file
int 21h         ; call dos service

jc WriteError       ; jump if there is an error
cmp ax,cx       ; was all the data written?
jne WriteError      ; no it wasn't - error!

mov bx,Handle       ; put file handle in bx 
mov ah,3Eh      ; function 3Eh - close a file
int 21h         ; call dos service

mov dx,offset EndMessage 
mov ah,09h 
int 21h 

ReturnToDOS:

mov ax,4C00h        ; terminate program 
int 21h 

WriteError:
mov dx,offset WriteMessage 
jmp EndError

OpenError:
mov dx,offset OpenMessage 
jmp EndError

CreateError:
mov dx,offset CreateMessage 

EndError:
mov ah,09h 
int 21h 
mov ax,4C01h 
int 21h 

END START 
```

另外，在将字符串放入文件之前是否需要终止程序？非常感谢！

**编辑**
@us2012：按照你的回答，我应该替换

```
mov bx,Handle       ; file handle for file
mov cx,38       ; 38 bytes to be written
mov ah,40h      ; function 40h - write to file
int 21h         ; call dos service 
```

和

```
mov dx,offset WriteMe   ; address of information to write 
mov bx,Handle       ; file handle for file
mov cx,38       ; 38 bytes to be written
;xor dx, dx
mov ah,40h      ; function 40h - write to file
mov al, 02h
int 21h         ; call dos service 
```

? 当我再次运行程序时它仍然没有附加。还是单身`HELLO, THIS IS A TEST, HAS IT WORKED?`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:33:42.357

int21h 参考说要移动文件指针，你可以使用 function `42h`。详细信息在 [这里](http://stanislavs.org/helppc/int_21-42.html)，因此在写入之前，以下内容应该适用于寻找文件末尾：

```
mov bx, Handle
xor cx, cx
xor dx, dx
mov ah, 42h
mov al, 02h
int 21h 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2019-12-24T02:15:56.963

```
.data
filename db 'myfile.txt',0
handler dw ?
msg db "hello$"
buffer db 1000 dup (?)
writeme db "world$"
.code
;;;;;;;;;;APPENDING
    append proc
        mov dx,offset writeme
        mov bx,handler
        mov cx,5  ;length of appended string
        mov ah,42h
        mov ah,09h
        int 21h
    append endp
end 
```

# cmake - cmake在Windows上“导出”共享库

> ID：15721748
> 
> 赞同：3
> 
> 时间：2013-03-30T18:08:59.577
> 
> 标签：cmake

我正在写一个小图书馆。我想将它构建为共享库并生成“MyLibraryConfig.cmake”文件，然后我的其他项目可以使用该文件来查找我的库。

我唯一的问题是找出用于在 Windows 下链接的文件的名称/路径 - 生成了两个文件：mylibrary.dll 和 mylibrary.dll.a。

所以我想生成 MyLibraryConfig.cmake 文件，如下所示：

“设置（MYLIBRARY_LIBRARIES /blah/blah/mylibrary.dll.a）”

因此 MYLIBRARY_LIBRARIES 可以与 target_link_libraries 一起用于我的其他项目。

如何获取此可链接文件的名称？如果解决方案独立于平台，我会很好（在 Linux 上返回 .so wile，在 Windows 上返回 .dll.a）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:28:43.350

如果您打算在*不安装它*的情况下将您的库提供给您的其他项目，那么您需要 CMake 命令[`export`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aexport "CMake v2.8.10 文档")。例如：

```
export(TARGETS MyLib FILE ${CMAKE_SOURCE_DIR}/MyLibraryConfig.cmake) 
```

这会在与顶级 CMakeLists.txt 相同的目录中创建文件 MyLibraryConfig.cmake，并且只能[`include`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3ainclude "CMake v2.8.10 文档")在其他 CMake 项目中使用。

* * *

如果您打算*安装*库，那么您想[`install(EXPORT ...)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3ainstall "CMake v2.8.10 文档")改用：

```
install(TARGETS MyLib EXPORT MyLibraryConfig
            RUNTIME DESTINATION bin
            LIBRARY DESTINATION lib
            ARCHIVE DESTINATION lib/static)
install(EXPORT MyLibraryConfig DESTINATION cmake) 
```

这会将文件 MyLibraryConfig.cmake 安装到`<install path>/cmake`，然后可以`include`由其他项目 d。

# python - wxPython中带有附加文本标签的位图按钮

> ID：15721749
> 
> 赞同：0
> 
> 时间：2013-03-30T18:09:05.367
> 
> 标签：python, wxpython, wxwidgets

如何在 wxpyython 中创建带有附加文本标签的位图按钮。到目前为止，我还没有遇到过任何这样的通用按钮。我相信我必须自己创造一个。我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:52:47.633

查看 wx.lib.buttons 模块，了解各种风格的通用按钮。

此外，在 2.9 版本系列中，常用按钮类 (wx.Button) 可以具有位图 + 文本标签。

# javascript - 如何为传入的 socket.io 消息设置最大大小限制

> ID：15721751
> 
> 赞同：4
> 
> 时间：2013-03-30T18:09:10.413
> 
> 标签：javascript, node.js, socket.io

我们希望我们的服务器阻止任何包含大于 7 kb 数据的消息。

我们的服务器端代码：

```
socket.on('startdata', function (data) {

        console.log(data.text);}); 
```

我们的客户端代码：

```
 socket.emit('startdata', { text: 'testtext blah blah' }); 
```

有没有办法在数据传递给`socket.on`函数之前检查数据大小并拒绝接受消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T12:08:29.303

我也对此感到好奇并进行了一些挖掘。

似乎`destroy buffer size`可以使用，默认为 100mb

重要说明： `Used by the HTTP transports. The Socket.IO server buffers HTTP request bodies up to this limit. This limit is NOT applied to websocket or flashsockets.` （[https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)）

很遗憾，它不适用于 websockets 或 flashsockets。有人确实为此尝试了拉取请求：[https ://github.com/LearnBoost/socket.io/pull/888](https://github.com/LearnBoost/socket.io/pull/888)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-11T15:08:53.137

使用缓冲区大小

```
require('socket.io')(server, {
    maxHttpBufferSize: 1e9
}); 
```

# php - How do I remove a key from an array if any of it's values contain any string in a separate array?

> ID：15721752
> 
> 赞同：1
> 
> 时间：2013-03-30T18:09:16.417
> 
> 标签：php, arrays, strpos, unset, array-filter

I have an array, `$search_results`. Each key has multiple elements. I also have a single column array called `$outofstock`. If any of the elements within a particular key of `$search_results` exactly match any of the entries in `$outofstock`, I would like to remove the key, and re-arrange the key structure, so as to not have a gap in key ordering - and then create a new array of the same name: `$search_results`.

I've tried a few solutions found here - namely

*   [Search an Array and remove entry if it doesn't contain A-Z or a A-Z with a dash](https://stackoverflow.com/questions/6330748/search-an-array-and-remove-entry-if-it-doesnt-contain-a-z-or-a-a-z-with-a-dash), and
*   [PHP - get all keys from a array that start with a certain string](https://stackoverflow.com/questions/4979238/php-get-all-keys-from-a-array-that-start-with-a-certain-string)

But I can't seem to get them to match the text exactly and then re-create the array, while using `array_filter` to remove the entries I need to remove.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:34:41.840

You can loop through one array and remove the index where you find string you are searching for.

```
for($i=0;i$<count($outofstock);$i++){   
    foreach($search_result as $k=>$v){   
        if($outofstock[$i]==$v){    
            unset($search_result[$k]);
        }    
    }    
}

$search_result = array_values($search_result); 
```

# css - 如何将伪元素固定在滚动元素中？

> ID：15721753
> 
> 赞同：8
> 
> 时间：2013-03-30T18:09:18.803
> 
> 标签：css, pseudo-element, css-content

我怎样才能得到这个效果：

```
<pre class="default prettyprint prettyprinted" data-codetitle="homepage.html" style=""><code>
body{
  position: relative; 
  @include background(linear-gradient(left, lighten($me, 11%), lighten($me, 11%) 
    $half, $darkbackground $half, $darkbackground));
  color: $text;
  width: 100%;
  height: 100%;
  @include breakpoint(baby-bear) {
    @include background(linear-gradient(left, lighten($me, 11%), lighten($me, 11%) 
    45%, $darkbackground 45%, $darkbackground));
  }
}
</span></code></pre> 
```

我需要使用数据标签作为标题：

```
.prettyprint {
    margin: 0 0 0 0.5%;
    border-left: 2px solid #ce8f80;
    overflow: auto;
    position: relative;
    width: 300px;
}
.prettyprint:before {
    content: attr(data-codetitle);
    background: #ce8f80;
    display: block;
    width: 100%;
} 
```

这就是[结果](http://jsfiddle.net/r8aNC/1/)。问题是当你滚动时，`:before`元素也会滚动。有没有办法保持这个元素固定。我尝试了不同的变化，但我无法让它工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-11T14:14:13.077

对于支持的浏览器`position: sticky`

```
.prettyprint {
  margin: 0 0 0 0.5%;
  border-left: 2px solid #ce8f80;
  overflow: auto;
  position: relative;
  width: 300px;
}

.prettyprint:before {
  position: sticky;
  left: 0;
  content: attr(data-codetitle);
  background: #ce8f80;
  display: block;
  width: 100%;
}
```

```
<pre class="default prettyprint prettyprinted" data-codetitle="homepage.html" style="">
  <code>
        body{
          position: relative; 
          @include background(linear-gradient(left, lighten($me, 11%), lighten($me, 11%) 
          $half, $darkbackground $half, $darkbackground));
          color: $text;
          width: 100%;
          height: 100%;
          @include breakpoint(baby-bear) {
            @include background(linear-gradient(left, lighten($me, 11%), lighten($me, 11%) 
            45%, $darkbackground 45%, $darkbackground));
          }
        }
  </code>
</pre>
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-30T18:37:24.090

试试这个：

```
.prettyprint:before {
    content: attr(data-codetitle);
    background: #ce8f80;
    display: block;
    position: fixed;
    width: inherit;
} 
```

设置`position: fixed`为使元素不跟随滚动，然后设置`width: inherit`为保持伪元素与父元素的宽度相同。

小提琴参考：http: [//jsfiddle.net/audetwebdesign/r8aNC/2/](http://jsfiddle.net/audetwebdesign/r8aNC/2/)

# c++ - C++：如何获得解耦的多态行为

> ID：15721760
> 
> 赞同：0
> 
> 时间：2013-03-30T18:09:44.010
> 
> 标签：c++, qt, design-patterns, plugins, decoupling

在 C++ 中的 Qt 项目中，我正在使用 QtPlugin 为动态加载的插件编写接口。这个界面应该允许插件注册它们的不同参数，并且在加载插件时主程序应该显示代表每个参数的适当的 GUI 控件。例如，参数可以是 0 到 20 a 之间的 int，由 QLabel 和 QSlider 表示，或者是由 QColorDialog 表示的颜色值。

这里有一个问题：我尝试了一种标准的 OOP 方法（？），让每个参数类型继承一个抽象类并通过实现一个虚函数来创建 GUI 表示。这导致大量 Qt GUI 头文件链接到每个插件文件，将其大小从 ~20 KB 增加到 ~50 KB。

这不是为了节省这些千字节，而是为了更好地理解 OOP。我考虑了这一点并试图找到合适的设计模式，然后我用谷歌搜索了“解耦多态”、“外部多态”等，发现一个页面说这是可能的，但通常你不想去那里，因为*它坏了哎呀*。
是这样吗？要么我从插件界面隐藏 GUI 代码，并用枚举或其他东西识别每种类型，然后“打破 OOP”，还是这个类完全对自己负责，但在内部也完全耦合？

如果每种参数类型都由数据模型、持久性和带有信号的 GUI 控件组成，您会推荐哪些解决方案？什么去哪里？

编辑：换句话说，我想知道插件是否可以是纯数据和算法，不知道如何在 Qt 中创建数据控件并且独立于 Qt GUI 标头。它可能会使用 Q_OBJECT 作为信号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:12:41.747

我建议让插件担心其参数的*类型*，并有一个单独的组件知道如何将每种类型映射到 GUI 控件上。

这几乎是一个直接的模型/视图分解，所以似乎是一个很好理解的习语。

现在，您的*类型*模型可以被枚举，或者您可以使用可以说是更多的 OO 访问者模式，但是您基本上仍然提前提出了一个固定且不可扩展的类型系统。这够吗？

您最终可能会得到某种类型，该类型既知道给定参数的特定派生类型，又知道如何在 Qt 中呈现它的详细信息。这将处理 Qt 信号，并将值传递回参数。

* * *

> ...通过尝试 dynamic_cast 或阅读某种识别代码（例如枚举），我在想。我仍然不明白如何使用访客 DP 来代替这些......

访问者模式*专门*用于避免`dynamic_cast`，所以我不确定这里有什么混淆。诚然，有一个事后版本确实使用`dynamic_cast`了 ，但它隐藏在实现中，无论如何都不是常见的情况。

因此，举一个具体的例子，让我们创建一个具有几个参数类型的模型：

```
struct ArgumentHandler; // visitor
class Argument { // base class for visitable concrete types
public:
    virtual void visit(ArgumentHandler&) = 0;
};
// sample concrete types
class IntegerArgument: public Argument {
    int value_;
public:
    IntegerArgument(int value = 0) : value_(value) {}

    void set(int v) { value_ = v; }
    int get() const { return value_; }

    virtual void visit(ArgumentHandler&);
};
class BoundedIntegerArgument: public IntegerArgument
{
    int min_, max_;
public:
    virtual void visit(ArgumentHandler&);
    // etc...
}; 
```

现在我们有了一些具体的类型供它访问，我们可以写抽象的访问者

```
struct ArgumentHandler {
    virtual ~ArgumentHandler() {}

    virtual void handleInteger(IntegerArgument&);
    virtual void handleBoundedInteger(BoundedIntegerArgument&);
    // ...
}; 
```

我们的具体类型像这样实现访问：

```
void IntegerArgument::visit(ArgumentHandler& handler) {
    hander.handleInteger(*this);
}

void BoundedIntegerArgument::visit(ArgumentHandler& handler) {
    hander.handleBoundedInteger(*this);
} 
```

现在，我们可以只根据数据模型类型编写一个抽象插件——它不需要了解有关 GUI 工具包的任何信息。假设我们现在只提供一种查询其参数的方法（注意每个具体的子类型都应该有 set/get 方法）

```
class PluginBase
{
public:
    virtual int arg_count() const =  0;
    virtual Argument& arg(int n) =  0;
}; 
```

最后，我们可以绘制一个视图，它知道如何查询抽象插件的参数、如何显示每个具体的参数类型以及如何处理输入：

```
// concrete renderer
class QtView: public ArgumentHandler
{
    struct Control {};
    struct IntegerSpinBox: public Control {
        QSpinBox control_;
        IntegerArgument &model_;
    };
    struct IntegerSlider: public Control {
        QSlider control_;
        BoundedIntegerArgument &model_;
    };
    std::vector<std::unique_ptr<Control>> controls_;
public:
    // these overloads know how to render each argument type
    virtual void handleInteger(IntegerArgument &arg) {
        controls_.push_back(new IntegerSpinBox(arg));
    }
    virtual void handleBoundedInteger(BoundedIntegerArgument &arg) {
        controls_.push_back(new IntegerSlider(arg));
    }
    // and this is how we invoke them:
    explicit QtView(PluginBase &plugin) {
        for (int i=0; i < plugin.arg_count(); ++i) {
            plugin.arg(i).visit(*this);
        }
    }
}; 
```

我省略了所有的虚拟析构函数、Qt 信号处理等等。但是，希望您能看到一个`QtView::IntegerSpinBox`对象如何处理`valueChanged`来自其捕获的 spinbox 小部件的信号，并调用`model_.set()`将其推回插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T07:28:08.727

您可以将任何类型的消息发送到任何地方，并在另一端使用任何带有[模板的虚拟包](http://templatious.org/goodstuff/virtual-packs)来捕获它，这些包完全是为了与任何东西松散耦合而制作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:01:31.753

如果我对您的理解正确，您应该重新考虑这种行为。您可以为模块特定的渲染器创建一个基类，并在每个模块中创建一个工厂，以实例化模块的具体渲染器，而不是让模块在主应用程序中注册所有内容（实际上可能很多）。然后，您可以要求模块呈现您提供给模块的信息。

# excel - 用于调用复制到下一张工作表上的下一个单元格值的 excel 宏

> ID：15721761
> 
> 赞同：0
> 
> 时间：2013-03-30T18:09:45.047
> 
> 标签：excel, vba

我想要这样一个宏，当我运行一个宏时，它会从 sheet1 A3 复制单元格值并将其粘贴到 sheet2 A3 中，一旦完成，当我再次单击下一步按钮然后复制 A4 值并将其粘贴到 sheet2 A3 单元格上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:02:56.660

您可以将迭代器放入单元格中，例如 Sheet1 A1 = 3 然后使用它来选择放置复制值的位置

```
Sub sample()
    'This is your iterator
    x = Range("A1")
    Value = Worksheets("Sheet1").Cells(x, 1)
    Worksheets("Sheet2").Range("A3") = Value
    Range("A1") = Range("A1") + 1
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:16:54.233

试试下面的代码：

将此复制到您的模块。

```
Dim i As Integer
Sub sample()

    If i = 0 Then
        Sheets("sheet1").Range("A3").Copy Sheets("Sheet2").Range("A3")
    Else
        Sheets("sheet1").Range("A4").Copy Sheets("Sheet2").Range("A3")
    End If
     i = i + 1
End Sub 
```

# json - 自引用循环检测到序列化异常

> ID：15721762
> 
> 赞同：0
> 
> 时间：2013-03-30T18:09:48.047
> 
> 标签：json, serialization, asp.net-web-api

这是我的课：

```
public partial class Event
{
    public Event()
    {
        this.Comments = new HashSet<Comment>();
        this.Rates = new HashSet<Rate>();
        this.RawDates = new HashSet<RawDate>();
    }

    public int ID { get; set; }
    public string Title { get; set; }
    public string Summary { get; set; }
    public string SiteURL { get; set; }
    public string ContactEmail { get; set; }
    public string LogoURL { get; set; }
    public int EventType_ID { get; set; }
    public Nullable<int> Location_ID { get; set; }
    public Nullable<System.DateTime> BegginingDate { get; set; }
    public string nTrain { get; set; }
    public string Content { get; set; }

    public virtual ICollection<Comment> Comments { get; set; }
    public virtual Conference Conference { get; set; }
    public virtual ICollection<Rate> Rates { get; set; }
    public virtual ICollection<RawDate> RawDates { get; set; }
    public virtual EventType EventType { get; set; }
    public virtual Location Location { get; set; }
} 
```

当我调用 web api post 方法时，标题中提到的异常会在这一行中抛出：

```
var response = await client.PostAsJsonAsync("api/event", event); 
```

我`[JsonIgnore]`在 Event 类中的每个虚拟字段上方添加了。这次序列化工作了，但是忽略的字段没有被序列化，它们的值为空。我真的需要 Event 对象中包含的所有信息。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T11:29:27.013

在 WebAPIConfig.cs 中添加以下配置可解决该错误。

```
var json = config.Formatters.JsonFormatter;
//Below configuration to mandatory to resolve the Self referencing loop detected with       
"Newtonsoft.Json.JsonSerializationException" ,
json.SerializerSettings.PreserveReferencesHandling =    
Newtonsoft.Json.PreserveReferencesHandling.Objects;
config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:27:02.410

循环引用对象不能被 JSON 序列化。我建议您使用视图模型，其中包含您需要的属性，然后让您的操作返回此视图模型而不是实际的域模型。

# java - Java构造函数继承？

> ID：15721764
> 
> 赞同：13
> 
> 时间：2013-03-30T18:09:54.627
> 
> 标签：java, inheritance, constructor

我一直认为构造函数不是继承的，但是看看这段代码：

```
class Parent {
    Parent() {
        System.out.println("S1");
    }
}

class Child extends Parent {
    Child() {
        System.out.println("S2");
    }
}

public class Test5 {
    public static void main(String[] args) {
        Child child = new Child();
    }
}

//RESULT:
//S1
//S2 
```

它表明 Child 继承了构造函数。为什么结果上有 S1？是否有可能创建 2 个没有参数的构造函数，并且在没有基本构造函数的结果上只有子构造函数（只有 S2）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-30T18:19:55.787

无论您在这里看到什么，都称为*构造函数链接*。现在什么是构造函数链：

> 构造函数链接通过使用继承发生。子类构造方法的首要任务是调用其超类的构造方法。这确保了子类对象的创建从继承链中它上面的类的初始化开始。
> 
> 继承链中可以有任意数量的类。每个构造函数方法都会调用链，直到到达并初始化顶部的类。然后，随着链回到原始子类，初始化下面的每个后续类。这个过程称为构造函数链接。（[来源](http://java.about.com/od/c/g/constchaining.htm)）

这就是你的程序中发生的事情。当你编译你的程序时，你`Child`的编译方式是这样的`javac`：

```
class Child extends Parent 
{ 
  Child()
  {
    super();//automatically inserted here in .class file of Child
    System.out.println("S2");
  }
} 
```

并且您的 Parent 类转换为以下内容：

```
Parent() 
{
    super();//Constructor of Object class
    System.out.println("S1");
} 
```

这就是为什么您的输出显示为：

```
S1 //output from constructor of super class Parent
S2 //output from constructor of child Class Child 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-30T18:17:04.423

Java 文档说：

> 子类从其超类继承所有成员（字段、方法和嵌套类）。构造函数不是成员，所以子类不能继承，但是子类可以调用超类的构造函数。

如果您不声明任何类型的构造函数，则会添加默认值。

如果您没有在子类的第一行调用任何其他构造函数，则会调用 super()。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T18:17:56.157

你写：

> 它表明 Child 继承了构造函数。

构造函数不能被继承。类可以被继承，所以 Child 不继承任何构造函数。Child继承类Parent。Parent 继承类 Object。当您调用 Child 构造函数时，在运行 Child 构造函数的代码之前，会自动调用 Object 构造函数，然后调用 Parent 构造函数。

这就是为什么你会得到这个结果：

```
S1
S2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T18:17:11.413

> 构造函数不被继承。

超类构造函数不会在派生类中继承。

> 是否有可能创建 2 个没有参数的构造函数，并且在没有基本构造函数的结果上只有子构造函数。

不，它不可能在 Java 中每个派生类构造函数都调用超类构造函数。如果不添加它，则调用无参数构造函数。

```
public SuperClass() {
   ...
}

public DerivedClass() {
  //Compiler here call no argument constructor of Super class.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T19:43:13.233

除非已定义显式构造函数，否则构造函数将始终调用其超类构造函数。来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7)：

> 如果构造函数体不是以显式构造函数调用开始，并且被声明的构造函数不是原始类 Object 的一部分，则构造函数体隐式地以超类构造函数调用“super();”开始，对构造函数的调用它的直接超类不带参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-23T06:11:23.473

```
public class HelloWorld{

    private static class A {
        A(String x) {
            System.out.println(x);
        }
    }

    private static class B extends A {

    }

    public static void main(String []args){
        B b =  new B();
        System.out.println("Hello World");
    }
} 
```

输出：

```
/*
error: constructor A in class A cannot be applied to given types;
    private static class B extends A {
                   ^
  required: String
  found: no arguments
  reason: actual and formal argument lists differ in length
1 error
*/ 
```

所以这意味着构造函数**永远不会被继承**

因此，这里发生的是**B 类的**无参数构造函数尝试调用**A 类的无**参数构造函数，但它没有发现因此给出错误。

如果我们在**类 A**中添加参数少的构造函数，那么这个程序将正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-05T06:34:22.707

如果超类没有默认构造函数，那么子类也需要定义显式构造函数。否则会抛出编译时异常。在子类构造函数中，在这种情况下必须调用超类构造函数，它应该是子类构造函数中的第一条语句。

# javascript - 获取注册表 KEY 中某个值名称的值数据

> ID：15721766
> 
> 赞同：0
> 
> 时间：2013-03-30T18:10:06.110
> 
> 标签：javascript, vbscript, dom-events

我有下面的Javascript。我想获取特定注册表项中值名称的数据。例如，如果键是`HKEY_LOCAL_MACHINE\\SOFTWARE\\VideoLAN\\VLC`，值名称是`InstallDir`，我怎样才能得到`InstallDir`（这是一个路径，即`D:\Program Files\VideoLAN\VLC`）的数据。如何在 JavaScript 或 VBScript 中获取此路径？

```
<html>
<head>
<script language="JavaScript" type="text/javascript">
  MyObject = new ActiveXObject( "WScript.Shell" )
  function Goto()
  {
    var bat= MyObject.RegRead("HKEY_LOCAL_MACHINE\\SOFTWARE\\VideoLAN\\VLC\\InstallDir");
    MyObject.Run("bat/GoToLine2.bat 10 /examples/helloWorld/helloWorld.txt") ;
  }
</script>
</head>
<body>
<button onclick="Goto()">Run BatFile</button>
</body>
</html> 
```

如您所见，我希望将 的文件路径`InstallDir`保存在变量 (bat) 中以运行`GoToLine2.bat`位于`InstallDir`(ie ) 的值数据中的批处理文件 ( `D:\Program Files\VideoLAN\VLC`)。你能告诉我如何获得这条路径，这样我就不必使用

```
MyObject.Run("D:/Program Files/VideoLAN/VLC/GoToLine2.bat 10 /examples/helloWorld/helloWorld.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:58:35.937

在某些语言中，您可以使用变量插值/替换将变量的内容放入字符串文字中：

```
perl -e 'my $v = "c"; my $s = "${v}x"; print $s, "\n";'
cx 
```

VBScript 和 J(ava)script 都没有这个特性：

```
% v = "c" // given variable v containing "c"
c
% s = "vx" // j(ava)script does not interpolate
vx
% s = v + "x" // so use concatenation
cx 
```

Another option is to use Replace instead of concatenation:

```
>> v = "c"
>> s = Replace("$vx", "$v", v)
>> WScript.Echo s
>>
cx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:05:56.820

```
MyObject.Run(bat + "\\GoToLine2.bat 10 /examples/helloWorld/helloWorld.txt"); 
```

Ok, I think I get what's wrong. The path has space, so you need to enclose it with quotes, i.e.:

```
MyObject.Run("\"" + bat + "\\GoToLine2.bat\" 10 /examples/helloWorld/helloWorld.txt"); 
```

# android - Build a timeline using custom view

> ID：15721767
> 
> 赞同：5
> 
> 时间：2013-03-30T18:10:09.860
> 
> 标签：android, android-layout

I'm building an Android App with a timed events and i'm not sure what layout i should use to build my timeline.

Events can have different heights and can grow when user tap them but they have the same width;

```
 .
              .
              .
------------- |
| Event 4   > | --------------
------------- | < Event 7    |
              | |            |
              | --------------
              .
              .
              . 
```

I have two view types :

*   `EventView` witch hold the event info and drow his outline
*   `TimeBarView` witch is the bar on the middle (have some property and is extended on a very long span

How can i place my items so it's respectful of the time on my time-line (for example 1 week could be 10px)

Any help is appreciated. Thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T21:52:09.003

I'm tackling the same problem now.

I don't have a full solution yet, but I have an idea:

Since you have to sides to the timeline, `ListView` is not appropriate because events can overlap.

Instead consider using a 2-column [GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html). I recommend using [AndroidStaggeredGrid](https://github.com/etsy/AndroidStaggeredGrid), that support different item sizes.

For the actual "Time bar" that runs in the middle, I'll simply use a narrow line as the background for the GridView.

There will be no markers on the timeline. Instead, the markers will be on the EventView themselves, either on the left or the right, in such a way that the marker falls exactly on the Time Bar.

This way, when you scroll the grid, it will give the illusion that the Time bar itself is scrolling.

To signify an empty time interval, just add an empty view which it's height is proportional to the interval it represents.

Hope it helps...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T01:41:25.247

I'm not sure there's enough information in your post to determine exactly what's happening during layout, but RelativeLayout will probably do what you need. You can either use leftMargin as an absolute position, or "rules" like RelativeLayout.LEFT_OF

That said, it's very easy to create a custom layout with the Android framework. Just override onMeasure and onLayout. onMeasure should report how large the container is (often, just as large as the parent lets it be), and is pretty straightforward.

onLayout usually looks like this:

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    int count = getChildCount();
    for (int i = 0; i < count; i++) {
        View child = getChildAt(i);
        if (child.getVisibility() != GONE) {
            // do the layout for each child here, with child.layout
            // e.g., child.layout(0, 0, r, b);
    }
} 
```

View.layout takes 4 arguments - top, left, bottom, and right - pretty simple. You have access to the dimensions of the container in l, t, r and b.

HTH

# c# - How to Console.Beep while (during) mouse click down?

> ID：15721768
> 
> 赞同：0
> 
> 时间：2013-03-30T18:10:14.033
> 
> 标签：c#, console, beep

So, I'm trying to do a simple GUI to make music with Beeps on C#. I've been trying but I'm not sure if it's even possible to make a Console.Beep play as I hold down a button for example.

There's the normal Beep() method that just plays a short beep with a medium frequency and there's an overload Beep(int frequency, int duration). What I want to do is actually play it the whole time I'm holding the button, but obviously I can't previously state the duration.

I'm thinking this isn't possible but maybe there is a way?

This is also my first question on the site, so, hey.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:37:09.020

You could do it like this, i just tested it and it works, and does not lock up the form while running.

```
 private void Window_MouseDown_1(object sender, MouseButtonEventArgs e)
    {
        // Starts beep on background thread
        Thread beepThread = new Thread(new ThreadStart(PlayBeep));
        beepThread.IsBackground = true;
        beepThread.Start();
    }
    private void PlayBeep()
    {
        // Play 1000 Hz for max amount of time possible
        // So as long as you dont hold the mouse down for 2,147,483,647 milliseconds it should work.
        Console.Beep(1000, int.MaxValue);
    }

    private void Window_MouseUp_1(object sender, MouseButtonEventArgs e)
    {
        //Aborts the beep with a new 1ms beep on mouse up which finishes the task.
        Console.Beep(1000, 1);
    } 
```

# javascript - 为什么用 JS 插入特殊字符时不会在 DOM 中被解释？

> ID：15721770
> 
> 赞同：0
> 
> 时间：2013-03-30T18:10:15.077
> 
> 标签：javascript, special-characters, htmlspecialchars

我在页面加载后加载了一个脚本（不是立即加载，只是当用户从书签中调用它时）。此脚本将检查当前页面并将某些文本从当前值更改为脚本指定的值。

更具体地说，这用于翻译。例如，它将“Friends”更改为另一种语言的“Freunden”等等。

我通过使用“switch”语句从所选语言中进行选择来做到这一点。问题是，我有异国语言，例如阿拉伯语，语句看起来像这样（伪代码）：

`if (Arabic) { var f = '&#1044;&#1088;&#1091;&#1079;&#1100;&#1103;'}`

然后，此变量用于更改 DOM 中指定节点的内部文本，如下所示：

`dI('change').childNodes[0].childNodes[0].textContent = f;`

文本将在 DOM 中显示为未更改，所有实体都未解释，而不是其结果语言中应有的方式。如何让浏览器在传递实体时解释它们，就像上面一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:12:58.107

使用`innerHTML`代替`textContent`，就像你的情况一样：

```
dI('change').childNodes[0].childNodes[0].textContent = f; 
```

变成：

```
dI('change').childNodes[0].childNodes[0].innerHTML = f; 
```

# java - 在 Java 中将字符串转换为 BigInteger 数组

> ID：15721771
> 
> 赞同：0
> 
> 时间：2013-03-30T18:10:15.847
> 
> 标签：java

我正在尝试将 BigInteger 或包含 no.s 的 String 变量转换为 BigInteger 数组。我怎样才能做到这一点。请回复。例如。

```
BigInteger = 278490638904984
BigInteger Array = [2,7,8,4,9,0,6,3,8,9,0,4,9,8,4] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:18:41.937

```
public static void main(String[] args) {
    String s = "278490638904984";
    BigInteger[] big = new BigInteger[s.length()];
    for (int i = 0; i < s.length(); i++) {
        big[i] = new BigInteger(String.valueOf(s.charAt(i)));
    }
    System.out.println(Arrays.toString(big));
} 
```

输出：

```
[2, 7, 8, 4, 9, 0, 6, 3, 8, 9, 0, 4, 9, 8, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:13:27.577

你应该能够做到这一点：

```
BigInteger bi = new BigInteger(myString); 
```

然后，您必须将其分配给 BigIntegers 数组中的一个位置。

请注意，如果您的字符串无法转换，则会抛出 NumberFormatException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:17:14.447

出于什么目的？有点奇怪……

```
BigInteger   bi = new BigInteger( "278490638904984" );
String       s  = bi.toString();
int          len = s.length();
BigInteger[] digits = new BigInteger[len];
for( int i = 0; i < len; ++i ) {
   digits[i] = BigInteger.valueOf( s.charAt(i)-'0' );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T18:23:27.853

尝试将 BigInteger 值转换为 String()，然后像 str.length() 一样获取字符串的长度并创建所需大小的数组。

在此之后，您可以用值填充数组：

```
array[i] = new BigInteger(str.substring(i, i+1)); 
```

这不是出色的解决方案，但应该可以完成工作。

# web-services - 如何获取 Apple 的 iTunes Web 对象服务的文档或参考列表

> ID：15721777
> 
> 赞同：2
> 
> 时间：2013-03-30T18:11:08.413
> 
> 标签：web-services, itunes, webobjects

Apple 的 Search API 并没有为我提供我需要的所有信息。我从这篇文章中看到[如何从 iTunes Store 获取有关应用程序/歌曲/视频等的信息？](https://stackoverflow.com/questions/1460364/how-can-i-fetch-information-about-the-app-song-video-etc-from-itunes-store)有一个网络服务（例如[http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=) $appID&mt=8）。

搜索了一段时间后，我可以看到苹果还有其他类似的服务，例如

*   [https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping?cc=us&id=29520&mt=12](https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping?cc=us&id=29520&mt=12)
*   [http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/wa/wsSearch](http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/wa/wsSearch)？
*   ETC

是否有任何地方的列表（例如 WSDL）或文档来指定可用的 Web 服务？

# android - ADB 未找到设备

> ID：15721778
> 
> 赞同：249
> 
> 时间：2013-03-30T18:11:08.640
> 
> 标签：android, adb

我正在尝试在我全新的[Nexus 10上安装](https://en.wikipedia.org/wiki/Nexus_10)[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29)应用程序。我有一个 .apk 文件。我已经下载了 Android SDK，安装了“Android SDK Tools”、“Android SDK Platform-tools”和 Google USB Driver。我检查了 Nexus 10 上的“未知来源”设置。

当我从命令终端运行“adb devices”时，它没有列出任何设备。我试图遵循[这个建议](http://blog.fh-kaernten.at/wehr/?p=1182)，因为它与我之前在 Stack Overflow 上找到的建议相同。执行这些步骤后，“adb devices”仍然返回一个空列表，更糟糕的是，当我将 Nexus 10 连接到我的 PC 时，Windows 不会显示设备中的任何文件夹。

我已经撤消了该链接中的步骤，以及到目前为止我所做的一切，以及从[设备管理器](http://en.wikipedia.org/wiki/Device_Manager)中卸载我的 Nexus 10并重新安装它，但我仍然没有在设备中看到任何文件夹。

为了让我的设备出现在 ADB 设备中，我有什么遗漏吗？

如何让 Windows 查看设备中的文件夹？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-05-28T16:35:32.730

Windows 8 无法识别我的 Nexus 10 设备。通过设备上的设置对话框将传输模式设置为相机 (PTP) 已修复。

设置 > 存储 > 菜单 > USB 计算机连接到“相机 (PTP)”

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2014-02-16T23:00:25.840

**对于 Windows 8 用户：**

在尝试了这里给出的每个解决方案后，都没有成功，我发现了这个：

转到*设备管理器*

![更新驱动软件...](../Images/629650e1a7c8ea1714f77b5f96837d73.png)

* * *

*浏览我的计算机以查找驱动程序*->*让我从计算机上的设备驱动程序列表中进行选择*

选择*Android Device*，然后选择*Android ADB Interface*。

![安卓亚行接口](../Images/89822051038c3f61641fb0cacba9a461.png)

* * *

现在我的设备列在`adb devices`.

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-08-16T12:17:01.720

这种情况似乎出现在某些 ADB 驱动程序中。我在几个谷歌设备上遇到了同样的事情，安装[通用 ADB Windows 驱动程序](https://adb.clockworkmod.com/)每次都为我修复了它。

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2013-11-16T10:35:24.407

使用另一**根电缆**。

刚刚发现我的一根常规充电线有 Vcc、Gnd 对，但没有 Data+、Data-。

[https://en.wikipedia.org/wiki/USB#Pinouts](https://en.wikipedia.org/wiki/USB#Pinouts)

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2013-03-30T18:35:13.717

确保在*设置*->*开发人员选项中***启用 USB 调试**

 **此外，在进入 Android SDK 中的平台工具文件夹后运行“adb devices”（除非您的系统路径中已经有该文件夹），否则将找不到该命令。

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2015-05-31T09:32:47.447

如果设备处于 MTP 模式，则可能无法看到设备进行调试。某些设备仅在 PTP 模式下工作（甚至在“仅充电”模式下）。

这可以在*Settings* > *Developer Options* > *Networking* > *Default USB configuration* > *PTP*中进行更改。

此外，您将在您的 android 设备上收到一条通知，要求您确认 USB 配置设置更改并允许更改。

注意：您可以通过以下链接打开开发者选项： **启用**[开发者选项](https://www.howtogeek.com/129728/how-to-access-the-developer-options-menu-and-enable-usb-debugging-on-android-4.2/)

* * *

## 回答 #7

> 赞同：44
> 
> 时间：2013-06-19T08:35:48.253

我找到了一个解决方案（适用于 Windows 7）：

1.  将您的 Nexus 10 连接到 PC

2.  转到 Windows 设备管理器

3.  R单击 ADB 接口 -> 属性

4.  详细信息 -> 硬件 ID。

您将看到如下两条记录：

> **USB\VID_18D1&PID_4EE2**
> **USB\VID_18D1&PID_4EE2&MI_01**

5 打开 android_winusb.inf 文件（我有它在 " `C:\Users\<username>\AppData\Local\Android\android-sdk\extras\google\usb_driver" directory`）

6 使用 ADB 接口属性中的硬件 ID 在 [Google.NTx86] 和 [Google.NTamd64] 部分中创建此类记录：

> ;谷歌 Nexus 10
> %SingleAdbInterface% = USB_Install, **USB\VID_18D1&PID_4EE2**
> %CompositeAdbInterface% = USB_Install, **USB\VID_18D1&PID_4EE2&MI_01**

7 保存文件，并更新 ADB 接口的驱动程序，显示“C:\Users\\AppData\Local\Android\android-sdk\extras\google\usb_driver”目录的路径

* * *

## 回答 #8

> 赞同：32
> 
> 时间：2013-03-30T18:39:30.167

有时 ADB 会失去与设备的连接，需要重置。如果其他一切正常（即安装了 USB 驱动程序，在设备上启用了开发人员设置），但仍然看不到您的设备，则需要重置 ADB 进程。

这在 DDMS Perspective（在 Eclipse 中）、Devices 选项卡（最右侧的三角形包括一个用于执行重置的菜单项）中可用。

否则，从命令行，您可以使用以下 2 个命令重置它：

```
adb kill-server 
```

然后

```
adb start-server 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2015-01-30T14:24:45.700

在您的设备中启用开发人员选项。要启用开发者模式，请`setting->About phone`连续点击版本号选项 8 次

转到`Settings-> Developer options`并打开 USB 调试

从上面的步骤它不起作用尝试这一步，转到`Settings->Security`并打开`Allow Unknown Resources`

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2014-12-04T09:32:21.417

您必须从 SDK 管理器下载驱动程序（附加 → Google USB 驱动程序）

然后你必须在 Windows 中安装 USB 驱动程序（它适用于我在 Windows 8.1 中）：

[（从http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)复制并粘贴:)

1.  将 Android 设备连接到计算机的 USB 端口。
2.  在桌面或 Windows 资源管理器中右键单击“计算机”，然后选择“管理”。
3.  在左侧窗格中选择“设备”。
4.  在右侧窗格中找到并展开“其他设备”。
5.  右键单击设备名称（例如 Nexus S）并选择“更新驱动程序软件”。这将启动“硬件更新向导”。
6.  选择“浏览我的计算机以查找驱动程序软件”，然后单击“下一步”。单击“浏览”并找到 USB 驱动程序文件夹。（Google USB 驱动程序位于`<sdk>\extras\google\usb_driver\`.）
7.  单击“下一步”安装驱动程序。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-06-11T15:17:29.747

通过 Android SDK 管理器（可通过 Eclipse、Intellij 或 Android Studio 获得）下载 Google 驱动程序后，我必须在计算机管理 > 设备管理器 > 其他设备 > ADB 中更新驱动程序 - 右键单击​​并单击更新驱动程序并浏览更新的驱动程序终于成功了。

顺便说一句，对我来说也是一场噩梦。我仍然感到困惑的是，建立一个开发环境应该是可以想象的最困难的任务，每一个新的莫名其妙的失败都会导致另一个失败。天哪！祝你好运。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2014-07-13T07:50:20.963

这对我来说是一条糟糕的 USB 电缆。在尝试了一套解决方案后，我换了一条不同的 USB 数据线，我的设备出现了。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-02-23T23:08:39.083

在我的 Windows 8.1 64 位（Nexus 5 没有出现）上，只能手动安装 USB 驱动程序修复它： http: [//developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html) “Android SDK”中的“Google USB 驱动程序”经理”已经安装。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2016-05-27T16:17:23.893

我仍然偶尔会得到这个，如果我拔下它并将其重新插入另一个端口，它通常会起作用。我在 Linux 上，但以前在 Windows 上也发生过同样的事情。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2015-02-10T08:06:06.347

安装[Samsung Kies](http://www.samsung.com/us/kies/)并使用他们的工具重新安装设备驱动程序，最终对我的 Galaxy S3 和 Tab S 8.4 有用

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-02-01T23:07:12.643

我刚刚在我的 Mac OS X 中解决了这个问题，它与设备驱动程序或设备电缆无关。

**您必须启用“开发者选项”并启用“USB 调试”**

请参阅 CyanogenMod wiki [“找不到设备”错误](https://wiki.cyanogenmod.org/w/Doc:_adb_intro#.22Device_not_found.22_errors)和[文档：开发人员选项](https://wiki.cyanogenmod.org/w/Doc:_developer_options)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-02-17T15:46:22.503

我尝试了大多数答案（最受欢迎）中的几乎所有建议，但没有任何帮助。最后，我在我的案例中找到了原因。我使用了坏的 USB 电缆。我换了另一根原装 USB 电缆 - 它立即起作用了！！！。

我希望它可以帮助别人。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-10-01T14:55:16.027

通常SDB会在**android-sdk-windows\extras\google\usb_driver**路径下下载驱动

以下是对我有用的步骤：

1.  启用 USB 调试。
2.  做设备管理器，右键单击ADB设备，然后单击更新驱动程序软件。
3.  选择“浏览我的计算机以查找驱动程序软件”
4.  选择“让我从计算机上的设备驱动程序列表中选择”
5.  单击“从磁盘安装”选项。
6.  选择驱动程序路径**android-sdk-windows\extras\google\usb_driver**（sdk 的路径） 7.从显示的驱动程序列表中选择第一个驱动程序。

希望它会奏效。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2013-05-07T04:29:18.433

编辑：如果您使用的是 Windows 主机，我建议您*不要在 VirtualBox 下运行 ADB。*不知何故，我让 VirtualBox 锁定主机上的设备驱动程序，最终使 ADB 无法在客户端或我插入的任何设备的主机上运行。为了修复，我删除了主机上的 VirtualBox 扩展并运行[http ://www.nirsoft.net/utils/usb_devices_view.html](http://www.nirsoft.net/utils/usb_devices_view.html)删除不正确的驱动程序。在安装 VirtualBox 扩展时，我无法加载正确的驱动程序，而这个问题是一个完全无法诊断和修复的问题。

编辑 2：由于谷歌已经发布了 Chrome 的集成 ADB 扩展，因此以下内容可能已过时。

多么可怕的安装噩梦……以下是在 VirtualBox 下运行的 XP 虚拟机上识别我的 Nexus 10 所需的步骤：

*   如果您被要求安装 Nexus 10 驱动程序，请确保取消勾选“不再询问”（您*希望*再次被询问！）。
*   插入 Nexus 10 USB 连接
*   在 Nexus 10 设置开发者菜单中打开调试（点击“关于平板电脑”7 次以获取该菜单）。
*   在您的虚拟机设置（主机）中，将 samsung Nexus 10 设备添加到 USB 设备过滤器（重要 - 从设备菜单中选择它似乎不起作用）。
*   在来宾中安装 java jre（如果您没有安装 java）。在控制面板中，更改 Java 设置，使 java 不在浏览器中运行（以帮助防止安全问题）。
*   在 guest 中获取 adk zip 文件并将其永久保存在某处。我需要从用户目录中删除 .android config 目录，因为我移动了该目录。
*   运行 SDK Manager.exe - 如果它不起作用，请尝试运行 sdk\tools\android.bat，这似乎可以提供更好的错误报告。
*   从 SDK Manager 安装 Google USB 驱动程序包。
*   将 Nexus 10 拔掉再插上，安装 Google USB 驱动包。
*   重新启动来宾。
*   运行 c:>[...]\sdk\platformtools>`adb devices`终于向我展示了设备...

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2014-06-19T06:12:29.780

对于 Blu Studio 5.5s ADB 驱动程序，您必须经过这个环节。我确定所有 Blu 手机或所有非 Google mfg 手机都一样，我不确定。首先，如果您使用 USB 电缆连接 Blu 设备并关闭 USB 调试，您将看到 Windows 7 加载通用驱动程序，以便您将打开/关闭文件复制到手机和 SD 存储。这将在首次插入 USB 电缆时出现，并在控制面板、设备管理器、便携式设备、BLU STUDIO 5.5 S（或您正在使用的设备）下显示为设备图标。不要费心获取硬件 ID - 只需观察发生这种情况（这表明您到目前为止很好，并且没有坏电缆或其他东西）。

转到手机并在手机的开发人员部分打开 USB 调试。请注意，现在在设备管理器列表中，一个附加项目显示为未定义的设备，它将带有黄色感叹号，并且它可能与您在便携式设备下看到的手机名称相同。暂时忽略这个项目。现在，无需对手机进行任何操作（它应该已经处于 USB 调试模式）返回到设备管理器中的便携式设备，然后右键单击 BLU STUDIO 5.5 S 或您正在使用的任何手机，其中列出**的没有感叹号标记**（列在便携式设备下）。右键单击便携式设备下的图标，在此示例中出现的名称是 BLU STUDIO 5.5 S。在该图标上选择属性、详细信息，然后在下拉菜单下选择硬件 ID 并复制您看到的内容。

对于 BLU STUDIO 5.5 SI，获得：

```
USB\VID_0BB4&PID_0C02&REV_0216&MI_00
USB\VID_0BB4&PID_0C02&MI_00 
```

（注意如果你不按顺序这样做，HW ID会在手机USB调试关闭时不同。你想复制它在USB调试打开时更改的值）

现在按照上面的说明进行操作，当然要自定义添加 INF 文件的行以及与您自己的手机相关的行，而不是与 Nexus 10 相关的行。这是要自定义的内容；当您下载 SDK 时，您应该有一个从 ZIP 扩展的文件结构，例如：

```
\adt-bundle-windows-x86_64-20140321\sdk\extras\google\usb_driver 
```

找到名为：`android_winusb.inf`在 usb_driver 文件夹中的文件 复制它并将其命名为任何名称，例如 myname.inf 编辑 myname.inf 并按照上面的说明添加仅针对您的特定手机修改的行。例如，对于 BLU STUDIO 5.5 S，我按照说明在 2 个位置添加了以下 2 行。

```
;BLU STUDIO 5.5 S
%SingleAdbInterface%        = USB_Install, USB\VID_0BB4&PID_0C02&REV_0216&MI_00
%CompositeAdbInterface%     = USB_Install, USB\VID_0BB4&PID_0C02&MI_00 
```

请注意，您将这些行添加到 32 位和 64 位部分，与教程中示例的读取方式相匹配。

现在回到打开设备USB调试时出现在设备管理器中的未知设备并右键单击该项目（有黄色感叹号），右键单击它然后选择更新驱动程序软件，然后浏览我的电脑，让我选择，单击从磁盘安装按钮并浏览以找到 myname.inf。继续同意所有提示，警告您它可能不是正确的驱动程序。作为最后一步，Windows 应该已将设备识别为 Android ADB 接口，一旦完成，您应该能够返回，打开 CMD 窗口并按照本教程中的说明运行命令“adb devices”，现在您应该看到电话现在已被发现并正在通信。

现在您可以使用 adb 命令玩得开心了。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2020-01-24T12:04:42.283

首先感谢[@rmsyk 的帖子](https://reameizu.com/adb-shell-to-meizu-cellphone/)。

对于我的问题，并且在长时间使用***魅族 C9 Pro***女巫后，只需要参考制造商的 android ADB 驱动程序（没有特殊驱动程序），它通过以下步骤在我的 Windows 7 PC 中解决。

1.  确保

    *   使用所需的驱动程序安装最新版本的 ADB 和 Fastboot。
    *   启用开发人员选项和 USB 调试。
    *   启用媒体文件传输（MTP 模式）。
2.  **手动替换为** [**此处**](https://mega.nz/#!sglBgD6Y!0CzbEIQ9MscSN8B-1ZxqO9APw58ga-6TigYFChS2TSg)`C:\Users\USERNAME\.android` **包含的文件夹** **，然后如果从 Windows 任务管理器中找到并使用****并终止进程“adb.exe”，最后我的设备成功列出，只需确认 PC 为受信任。**[](https://mega.nz/#!sglBgD6Y!0CzbEIQ9MscSN8B-1ZxqO9APw58ga-6TigYFChS2TSg) ****`adb devices`****

 ******笔记：

1.  Android Studio 早些时候被卸载，我也尝试重新安装，但根本不是解决方案。
2.  尝试过`adb kill-server`，`adb start-server`但也不是解决方案。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-09-04T02:10:11.780

我已经在开发者模式下打开了所有设置，但是 adb 仍然没有显示任何设备。

我没有使用手机随附的电缆。一旦我切换到它，一切都正常。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-06-23T22:54:27.250

确认您拥有正确的平台 SDK 工具

对于 Windows 10，必须从 Android 手动下载最新的平台 SDK 工具，因为通过 Visual Studio 2017 EMDK 为 Xamarin 提供的版本不够用。除了工作以外的一切`adb.exe devices`。

[https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools)

手动下载平台工具后，无论 USB 配置如何（充电、MTP 等）都显示设备

在此阶段安装模拟器设备也有助于查看问题是出在 adb 还是您的物理设备上。

```
List of devices attached
12345D1234      device
emulator-5554   device 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-10-11T15:14:40.163

除了常规设置（启用 USB 调试），我还必须`Enable OEM unlock`在开发人员选项中进行选择。

据说这会降低设备的安全性，但它是您的设备，您知道自己想做什么。

检查后，设备会按预期运行并显示在`adb devices`列表中。

完成后，您始终可以撤消所有这些设置。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-11-22T20:12:29.767

`adb devices`命令不适合您的原因可能有两个。您的手机 USB 驱动程序未正确安装或您未启用 USB 调试模式。

我创建了一个工具，可以一键安装 USB 驱动程序。

1.  只需将手机以 USB 调试模式连接到 PC。

2.  运行我的[工具](https://github.com/fawazahmed0/Latest-adb-fastboot-installer-for-windows)

它将检测并安装特定于您手机的驱动程序，并使用它安装最新的 ADB 和 Fastboot 二进制文件。

该工具可在我的[GitHub 存储库中获得](https://github.com/fawazahmed0/Latest-adb-fastboot-installer-for-windows)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-10-21T11:35:04.053

这很简单，只需关闭您的 Android 设备，然后同时按住“降低音量”键和“电源”键即可。等待几秒钟，直到它以恢复模式启动，完成。现在输入`adb devices`，您将看到您的设备。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-04-29T23:29:40.217

你最近有安卓更新吗？我更新到棒棒糖，突然间我没有 adb 设备。嘘！我花了一段时间尝试了一些事情无济于事。然后我进入我的开发人员选项，你瞧，“USB 调试”已被关闭。愚蠢的谷歌。重新打开后，它立即出现，我又开始营业了！

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-08-04T01:33:37.373

我有一部摩托罗拉 Razr，但我无法识别我的设备。我所做的是：

1 - 从命令提示符（以管理员身份） ->`adb kill-servers`

2 - 在此处下载摩托罗拉设备管理器 -> [https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)

3 - 我等到安装完成。

4 - 从命令提示符（以管理员身份） ->`adb devices`

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-01-23T17:52:38.650

在 Nexus 设置开发者菜单中打开调试（点击“关于平板电脑”7 次以获取该菜单）。

可怕的谷歌技巧！

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2013-09-19T19:00:35.063

我的 Windows 8 也有同样的问题[。Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29) / [SDK](http://en.wikipedia.org/wiki/Software_development_kit) [USB](http://en.wikipedia.org/wiki/USB)驱动程序安装正确，但我忘记从手机安装 USB 驱动程序。安装手机 USB 驱动后，[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)工作正常。

我希望这将有所帮助。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2015-05-19T17:39:24.150

转到DeviceManager，然后右键单击android设备并单击卸载驱动程序。拔下并重新插入设备......然后当您的电脑安装所需的驱动程序时，您的设备上会弹出一个弹出窗口。在弹出窗口中单击“允许”。当您在命令提示符下键入“adb devices”时，您可以看到您的设备。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2015-06-04T09:39:12.417

对于 Windows，只需结束与 Blue 堆栈或任何此类仿真器相关的所有进程（如果您正在使用）。

为我工作。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-02-04T12:48:57.127

### 安装 ADB 驱动程序的简单方法

我总是使用[ADB Driver Installer](http://adbdriver.com/)为任何移动设备安装 adb 驱动程序。您只需要单击**安装**按钮。一切就绪！

[![图片](../Images/d080851339775ef391b42f12ceb49e7a.png)](https://i.stack.imgur.com/NXbg8.jpg)

如果您的设备未在此处列出，那么您可以检查启用您的[开发人员设置](https://developer.android.com/studio/debug/dev-options)，检查您的 USB 电缆。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-10-27T15:51:38.923

**使 ADB 处于 MTP 模式**

如果您在设备管理器中没有找到任何 ADB 设备（没有感叹号）（检查了手机上的所有开发人员设置），请执行以下操作：

在设备管理器中：

UpdateDriver->Manuel Install->在我的电脑上搜索->从已安装的驱动程序列表中选择->然后选择其中带有usb字样的驱动程序（不是MTP）。

编辑：之后，您将拥有 2 或 3 个外围设备，一个用于 USB，一个用于 ADB，使用常规方法安装 adb 驱动程序（见第一个答案）

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2019-08-05T08:20:21.917

这是清单的新增内容。

检查您的防病毒软件是否没有阻止/存储平台工具目录中的 adb.exe。如果您在 SDK“平台工具”目录中找不到 adb.exe，则可能是它。

C:\Users\\AppData\Local\Android\Sdk\platform-tools\adb.exe

我使用 AVG，它有 vaulte dit，因为它认为它是 IDP.Generic 病毒。您可以将其添加为例外以允许其运行，并从保管库中恢复它。

我的症状是 android-studio“工具”-> 连接助手会识别列表中的 USB 设备，但 adp 重启按钮将保持灰色。因为它找不到exe，但它没有抱怨，只是挂了。

只有当我手动尝试通过命令行反弹 adp 进程时，我才看到 adp.exe 丢失了。

希望这会为其他人节省很多时间。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-01-13T18:29:21.050

显然有很多不同的问题可能会导致这种情况（以及很多不同的解决方案来解决这些问题）。所以想想所有的解决方案！

如果您之前已经让这对手机和计算机一起工作，但它们不再工作，那么它可能是**您计算机上的特定程序，**而不是手机上的问题。有些程序会安装/使用自己的 adb，并且一次只能连接其中一个程序到您的手机。我认为这是一个竞争条件，所以有时它会很好地连接。

一些运行 adb 的程序：

HTC Sync Manager - 卸载它。

`chrome://inspect`- 让您在手机上查看本地主机。完成后关闭窗口即可。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2018-03-15T07:27:35.543

如果您为 Nexus 启用了开发人员选项和 USB 调试，那么 win-usb 应该可以工作。

您的驱动程序是否正确的一个标志是设备管理器中的名称中是否包含 ADB。

对于我的 Galaxy 系列，我安装了驱动程序，但不是 ADB 驱动程序。

对于许多非 Nexus 的 Android，win-usb 驱动程序将不起作用。相反，您需要安装 OEM 驱动程序之一：[https ://developer.android.com/studio/run/oem-usb.html](https://developer.android.com/studio/run/oem-usb.html)

这终于让我得到了一个与 ADB 兼容的驱动程序，在切换到 PTP 之后 adb 终于能够找到我的设备。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2019-06-16T15:06:29.850

如果您完全熟悉 Linux，请使用它而不是 Windows。在树莓派上，做

```
apt-get install android-tools-adb andoid-tools-fastboot 
```

不需要特殊的 USB 驱动程序，它就可以工作。Android 基于 Linux，因此您更多地在本机模式下工作。我在这里看到的许多问题都是 Windows 问题。osx 在这里也可能比 Windows 有优势。adb 和 fastboot 都有可以从 Linux 访问的 man（手册）页面。

原始问题：手机在fastboot模式下，我看到adb中没有设备，adb和fastboot似乎是互斥的，一次只能使用一个或另一个。USB调试必须打开。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2021-09-21T16:53:11.807

没有单一的解决方案适用于所有人，根本原因可能对我们每个人都不同，所以请一个接一个地尝试这些步骤。如果您有疑问，请观看此视频。 [https://youtu.be/We45D_TjKdc](https://youtu.be/We45D_TjKdc)

解决方案 1\. 启用开发人员选项、USB 调试和保持清醒。解决方案 2\. 撤销 USB 调试授权，重新启用 USB 调试 解决方案 3\. 更换 USB 电缆。解决方案 4\. 在 PC 上尝试不同的 USB 端口。解决方案 5\. 更改 Android 设备中的 USB 首选项。解决方案 6\. 在 PC 中下载最新的 ADB 文件。解决方案 7\. 在 PC 中安装最新的 Android USB 驱动程序。解决方案 8\. 添加或替换最新的 ADB 路径作为环境变量 解决方案 9\. 重新启动 ADB 服务器。解决方案 10\. 关闭、拔下、重新插入和打开。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2019-05-29T07:54:33.540

我的 Redmi 4A 也面临同样的问题。必须在PC上安装**adnroid调试桥**，我按照下面链接中给出的步骤解决了isuue。

[**安装android调试桥的步骤**](https://software.intel.com/en-us/xdk/docs/installing-android-debug-bridge-adb-usb-driver-on-windows)

这将解决大多数安卓设备的问题。我试过三星和红米设备。

确保您启用了**USB 调试**，**通过 USB 安装**。和**USB 配置**应该**是 MTP（媒体传输协议）**

希望这会有所帮助。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2018-11-11T19:24:15.013

我已经为我的情况找到了解决方案。

1.  转到**工具->布局检查器**。
2.  按几次**重新启动按钮。**

我不知道它是如何与**亚行**联系的，但它可以工作。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2017-05-10T04:48:53.040

同样在 android studio 中，您可以通过 SDK 管理器安装 google USB 驱动程序，您应该在此之后进行设置。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2020-11-19T19:58:34.593

问题：设备未出现在 vscode 和 ABD 界面中 - 未找到驱动程序

解决方案：

1.  在移动设备中启用 USB 调试。

2.  使用 USB 数据线连接您的手机和笔记本电脑

3.  转到[https://developer.android.com/studio/run/win-usb](https://developer.android.com/studio/run/win-usb)点击“点击此处下载 Google USB 驱动程序 ZIP 文件 (ZIP)”

4.  转到设备管理器 -> 其他设备 -> 右键单击​​ ADB 设备，然后单击更新驱动程序软件。选择“浏览我的计算机以查找驱动程序软件”选择“让我从我的计算机上的设备驱动程序列表中选择”双击“显示所有设备”单击“从磁盘安装”选项。选择驱动路径**android-sdk-windows\extras\google\usb_driver。**选择android_winusb.inf文件选择Android ADB接口->点击下一步点击是安装，成功后关闭窗口。

    现在您将看到设备出现在 VSCODE 中。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2017-03-12T13:09:56.657

对于我的 Nexus 6P，从 Google 下载驱动程序帮助解决了这个问题。这是带有文档的[URL 。](https://developer.android.com/studio/run/win-usb.html)[在这里](https://dl-ssl.google.com//android/repository/latest_usb_driver_windows.zip)您可以下载驱动程序本身。

PS 我看到有人建议从互联网上的随机位置下载一些驱动程序。虽然这可能会有所帮助，但在我看来，从非官方场所下载未知驱动程序太危险了。所以谷歌的那个对我来说效果很好:)

* * *

## 回答 #45

> 赞同：-1
> 
> 时间：2013-06-16T05:25:39.133

1.  转到设备管理器并检查硬件ID。
2.  检查`usb.inf`文件中是否列出了设备
3.  如果没有，请添加设备硬件 ID 并从设备管理器安装它。

* * *

## 回答 #46

> 赞同：-3
> 
> 时间：2014-07-31T21:22:06.137

我有同样的问题，现在它已经修复了，他是如何：去设备管理器使用 Windows 更新更新 android 驱动程序然后去手动从手机移动应用程序到 sd********

# haskell - Haskell YAML QuasiQuotation?

> ID：15721779
> 
> 赞同：2
> 
> 时间：2013-03-30T18:11:15.633
> 
> 标签：haskell, yaml

I see there is `Data.Aeson.QQ`, and there is `Data.Yaml`, but there is no `Data.Yaml.QQ` on Hackage.

Did I miss a package or am I going to have to roll my own if I want to parse YAML at compile time in Haskell?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:34:38.887

Such a module doesn't exist to my knowledge, but you can still use Data.Yaml to perform parsing at compile time. I'm not sure of exactly you want to do, so I can't really give you more details.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T12:02:49.633

It's been added to `Data.Yaml.TH` in the `yaml` package (the quasiquoter name is `yamlQQ`).

# sensors - 软件罗盘传感器

> ID：15721783
> 
> 赞同：0
> 
> 时间：2013-03-30T18:11:42.367
> 
> 标签：sensors, compass-geolocation, emulation

有没有办法开发罗盘传感器模拟器（基于 GPS 行进方向），所以对于没有罗盘传感器（但有 GPS）的设备可以模拟硬件传感器？这样，想要使用指南针的应用程序仍然可以相当准确地工作。

有什么想法吗？

# jquery - 损坏的 jQuery 选项卡切换器

> ID：15721785
> 
> 赞同：0
> 
> 时间：2013-03-30T18:11:44.477
> 
> 标签：jquery, jquery-tabs

**肝脏演示：** [https ://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html](https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html)

**jQuery Tab Switch 代码** *忽略第 2-6 行*

```
$(function () {
    $("#clickme").toggle(function () {
        $(this).parent().animate({right:'-300px'}, {queue: false, duration: 500});
    }, function () {
        $(this).parent().animate({right:'-0px'}, {queue: false, duration: 500});
    });
    $('#tab-content div').hide();
    $('#tab-content div:last').show();

    $('#Info-Side-Tabs li').click(function() {
        $('#Info-Side-Tabs li').removeClass("current");
        $(this).find('li').addClass("current");
        $('#tab-content div').hide();

        var indexer = $(this).index(); //gets the current index of (this) which is #nav li
        $('#tab-content div:eq(' + indexer + ')').fadeIn(); //uses whatever index the link has to open the corresponding box 
    });
}); 
```

我在我的网站中实现 jQuery 选项卡切换时遇到问题：

```
"$(this).find('li').addClass("current");" 
```

用于查找“a”，但是我需要它来更改 li 的类而不是 a。

唯一显示的选项卡切换内容是顶部第二个的一部分，而不是全部。我现在很困惑，真的可以得到一些帮助。

* * *

**更新：**

```
 $('#Info-Side-Tabs li').removeClass("current");

Seems to be removing the class upon clicking, however

    $(this).find('li').addClass("current");

Does not seem to add the class to the new clicked tab.

    $("#tab-3").toggle(function () {
        // $('#Map-Selection-Info').animate({right:'-976px'}, {queue: false, duration: 500});
        $('#Map-Selection-Info').animate({marginLeft: '976px'}, 1000).addClass('current');
    }, function () {
        $('#Map-Selection-Info').animate({right:'670px'}, {queue: false, duration: 500});
    });

I am trying to apply the above to the 'Hide This' tab, so when you click on it, it move further right out of view and recliick to show.

Full Script So Far:
$(function () {
    $("#tab-3").toggle(function () {
        // $('#Map-Selection-Info').animate({right:'-976px'}, {queue: false, duration: 500});
        $('#Map-Selection-Info').animate({marginLeft: '976px'}, 1000).addClass('current');
    }, function () {
        $('#Map-Selection-Info').animate({right:'670px'}, {queue: false, duration: 500});
    });
    $('#tab-content div').hide();
    $('#tab-content div:last').show();

    $('#Info-Side-Tabs li').click(function() {
        $('#Info-Side-Tabs li').removeClass("current");
        $(this).find('li').addClass("current");
        $('#tab-content div').hide();
        var href = $(this).find('a').attr("href");
        $('#tab-content div' + href).fadeIn().find('*').show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:21:58.467

删除`.find('li')`.

您不需要这样做，因为在 li 元素上触发了 click 事件。`$(this)`li 元素也是如此。

然后你做：

```
$('#Info-Side-Tabs li').click(function() {
    $('#Info-Side-Tabs li').removeClass("current");
    $(this).addClass("current");
    $('#tab-content div').hide();
    var href = $(this).find('a').attr("href");
    $('#tab-content div' + href).fadeIn()
}); 
```

That works for me, other than there being no "#tab2" and "#tab3" content divs. The index code wouldnt work because the index is numerical and you are trying to match a content div, it won't match because the divs have string id's

**Edit**

You can show all child elements using the following:

`$('#tab-content div' + href).fadeIn().find('*').show();`

**Edit 2**

The `:last` selector is finding the deepest div element inside `#tab-content` and showing it, which is: `<div id="Social-Fun" style="display: none;">`

That's why you don't see anything.

You could add a class to each div, something like `class='country'` and then you could do:

`$('#tab-content div.country').last().show()`

# mysql - MySQL按ID选择不同的顺序

> ID：15721793
> 
> 赞同：3
> 
> 时间：2013-03-30T18:12:53.607
> 
> 标签：mysql, select, sql-order-by, distinct

我有一个如下表：

```
身份证类别
1个
2个
3乙
4乙
5℃
6℃

```

如果我想选择按 id 降序排序的前 2 个不同类别，mysql 中的正确查询是什么？我试过`select distinct category from table order by id desc limit 2`了，但这给了我以下结果：

```
类别
C
C

```

代替

```
类别
C
乙

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T18:18:16.617

前 2 名似乎是指列表末尾的那些。试试这个：

```
select category
from t
group by category
order by max(id) desc
limit 2 
```

如果您的意思是行数最多的那些。

试试这个：

```
select category
from t
group by category
order by count(*) desc
limit 2 
```

您还可以将 包括`count(*)`在选择列表中以查看计数是多少。

# django - Problems integrating MongoDB and Django 1.5

> ID：15721795
> 
> 赞同：1
> 
> 时间：2013-03-30T18:12:57.933
> 
> 标签：django, mongodb, mongoengine

I want to use MongoDB as database backend for my Django project. Although there are many discussions on the net, I'm having troubles to integrate them well.

My goals:

*   use default Django (so no django-nonrel, which is still to 1.3)

*   integrate them so that authentication is backed by MongoDB (i.e. the default `User` model) as well as the sessions thing.

*   if possible, still have a ORM-like query system

As I understand that, [`mongoengine`](http://mongoengine.org/) could meet all my requirements, but I'm having troubles making it work correclty.
Docs say to ignore DATABASES setting. If I don't specify it, Django raises an error, while if I fill it, Django creates that database and does not use my MongoDB instance, even though I call connect() later in the file. When I run `syncdb` Django uses the other database (the one I specified in the DATABASES setting) and not MongoDB. So when I fire up MongoDB shell I can see the database is created, but the only collection is startup_log, which I never created and I suspect it's created automatically.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:06:11.563

This might be a change in the default requirements does adding a dummy backend to your settings help?

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.dummy'
    }
} 
```

# variables - 变量未定义 - Applescript

> ID：15721798
> 
> 赞同：-1
> 
> 时间：2013-03-30T18:13:03.787
> 
> 标签：variables, applescript

我正在制作这个applescript来启动带有注释的应用程序：

```
tell application "Notes"
if exists note starts with applaunch then
    set LCommands to {"Launch", "Open"}
    repeat with y from 1 to count LCommands
        set applaunch to (item y of LCommands)
        set AppleScript's text item delimiters to applaunch
        set myApp to text items 2 thru 1 of note
        set AppleScript's text item delimiters to {""}
        set myApp to myApp as text
        if y = 1 or y = 2 then
            tell application myApp to launch
        end if
    end repeat
    delete note starts with applaunch
end tell 
```

并返回错误“未定义变量 applaunch”，但我定义了它。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:48:13.293

您可以尝试以下方法：

```
set LCommands to {"Launch ", "Open "}

tell application "Notes"
    repeat with aCommand in LCommands
        set aCommand to (contents of aCommand)
        set myNotes to (notes whose name begins with aCommand)
        repeat with aNote in myNotes
            set aNote to contents of aNote
            set noteName to aNote's name
            set AppleScript's text item delimiters to aCommand
            set myApp to text items 2 thru -1 of noteName
            set AppleScript's text item delimiters to {""}
            set myApp to myApp as text

            -- If you need to work with the Note's content as plain text
            --set noteBody to do shell script "echo " & (quoted form of (aNote's body as text)) & " | textutil -stdin -convert txt -stdout "
            my launchDelete(aNote, myApp)
        end repeat
    end repeat
end tell

on launchDelete(theNote, theApp)
    try
        tell application theApp to launch
        tell application "Notes" to delete theNote
    end try
end launchDelete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:05:09.770

您`applaunch`在第 2 行中引用，但直到第 5 行才定义它。

`end if`此外，您的代码示例缺少`if exists note starts with applaunch then`.

# squeak - TextMorph 默认字体大小

> ID：15721799
> 
> 赞同：1
> 
> 时间：2013-03-30T18:13:05.030
> 
> 标签：squeak

我正在尝试使用默认字体大小为 12 点的空 TextMorph，其中原始默认值为 9pts。如果我调出光环并将字体大小更改为 12pts，当输入文本时，空的 TextMorph 仍将默认为 9pts。我可以通过在 TextMorph 中放置一个空格，然后通过光环将字体更改为 12pts 来解决这个问题。然而，这似乎相当笨重，因此想知道是否有另一种方法来实现这一点？

谢谢。

# c++ - 无法设置 ostringstream 对象的 streambuf

> ID：15721800
> 
> 赞同：4
> 
> 时间：2013-03-30T18:13:21.983
> 
> 标签：c++, streambuf, ostringstream

我想`std::ostringstream`在我的程序中包含一些对象以用于记录和错误报告的目的。根据编译时给定的设置，日志和错误流将收集它们各自的数据（要保存或其他），或者它们将被重定向到`std::cout`和`std::cerr`（用于调试目的）。据我从[参考资料](http://www.cplusplus.com/reference/sstream/basic_ostringstream/)（和[这里](http://en.cppreference.com/w/cpp/io/basic_stringstream)）可以看出，`std::ostringstream`对象继承了该`rdbuf()`方法，并且我应该能够`rdbuf()`在流对象上调用该方法，将指针作为参数传递给与`std::streambuf`流相关联的指针。

但是，当我尝试编译时，我收到一个错误，因为没有匹配的函数调用，`rdbuf()`没有任何参数的方法被列为候选。

我从 g++ 得到的错误（Ubuntu 12.04 x86_64 上的 4.6.3）：

```
sigma@SigmaSys:~/Scripts/http/test$ g++ test.cc -c -o test.o
test.cc：在构造函数'Logger::Logger()'中：
test.cc:23:43: 错误: 没有匹配函数调用'std::basic_ostringstream::rdbuf(std::basic_streambuf*)'
test.cc:23:43: 注意：候选人是：
/usr/include/c++/4.6/sstream:449:7: 注意：std::basic_ostringstream::__stringbuf_type* std::basic_ostringstream::rdbuf() const [with _CharT = char, _Traits = std::char_traits, _Alloc = std::allocator, std::basic_ostringstream::__stringbuf_type = std::basic_stringbuf]
/usr/include/c++/4.6/sstream:449:7：注意：候选人需要 0 个参数，提供 1 个

```

这是源文件和头文件的精简版本：

**http_utils.h**

```
#include <string>
#include <sstream>
#include <streambuf>

#define HTTP_DEBUG_MODE 1

class Logger {
    private:
        static std::ostringstream errOut;
        static std::ostringstream logOut;

        static std::streambuf* cerrStreamBuffBackup;
        static std::streambuf* coutStreamBuffBackup;

        static std::streambuf* errOutStreamBuffBackup;
        static std::streambuf* logOutStreamBuffBackup;
    public:
        Logger();
        ~Logger();
}; 
```

**http_utils.cc**

```
#include "test.h"
#include <string>
#include <iostream>
#include <sstream>
#include <streambuf>

std::ostringstream Logger::errOut;
std::ostringstream Logger::logOut;
std::streambuf* Logger::cerrStreamBuffBackup = NULL;
std::streambuf* Logger::coutStreamBuffBackup = NULL;
std::streambuf* Logger::errOutStreamBuffBackup = NULL;
std::streambuf* Logger::logOutStreamBuffBackup = NULL;

Logger::Logger() {
    if (HTTP_DEBUG_MODE) {//Redirect logging/error to stdout/stderr
        Logger::errOutStreamBuffBackup = Logger::errOut.rdbuf();
        Logger::logOutStreamBuffBackup = Logger::logOut.rdbuf();

        Logger::errOut.rdbuf( std::cerr.rdbuf() );
        Logger::logOut.rdbuf( std::cout.rdbuf() );
    } else {//Redirect stdout/stderr to custom logging/error functionality
        cerrStreamBuffBackup = std::cerr.rdbuf();
        coutStreamBuffBackup = std::cout.rdbuf();

        std::cerr.rdbuf( errOut.rdbuf() );
        std::cout.rdbuf( logOut.rdbuf() );
    }
}
Logger::~Logger() {
    if (HTTP_DEBUG_MODE) {

    } else {//Restore stdout/stderr streambuf
        std::cerr.rdbuf( Logger::cerrStreamBuffBackup );
        std::cout.rdbuf( Logger::coutStreamBuffBackup );
    }
} 
```

如果有人可以帮我解决这个问题，或者根据我正在尝试做的事情提出替代方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:24:30.173

> `std::ostringstream`对象继承该`rdbuf()`方法，我应该能够`rdbuf()`在流对象上调用该方法，将指针作为参数传递给与`std::streambuf`流关联的指针。

你应该根据[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，但你不能。

[`std::basic_stringstream::rdbuf`](http://en.cppreference.com/w/cpp/io/basic_stringstream/rdbuf)隐藏`std::basic_ios::rdbuf()`. 你可以用一些丑陋的演员来称呼他们，但我认为这没有效果。字符串流始终保证写入字符串缓冲区。

# silverlight - How to style child of a UserControl in XAML in Silverlight?

> ID：15721803
> 
> 赞同：0
> 
> 时间：2013-03-30T18:13:38.290
> 
> 标签：silverlight, xaml, silverlight-5.0

I have a `UserControl MyParentControl` which has another control inside (TreeView). I expose this control as a dep property say `TreeView MyChildControl`.

Then in XAML which uses MyParentConrol I want to access all the TreeView properties, for example Style.

I want to write something like:

```
<my:MyParentControl>
    <my:MyParentControl.MyChildControl.Style>
        <Style />
    </my:MyParentControl.MyChildControl.Style>
</my:MyParentControl> 
```

Is there a way to achieve that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:41:38.717

By exposing the DependencyProperty for your inner control you have solved half of the problem - ie you can set individual properties in xaml.

The next step is to have those property setters affect the child control.

There are two options to achieve that.

1.  In your control template, define your child control and use Bindings on each property you want to set.

2.  Define a container element in your parent control template and set it's content to your child whenever the dependency property changes.

Although both of these methods could work, you may find that the solution involving the least amount of code, and the greatest amount of flexibility, is to expose a Style property for your child control and apply that in the control template.

```
public class ParentControl : Control
{
    public Style ChildControlStyle
    {
        get { return (Style)GetValue(ChildControlStyleProperty); }
        set { SetValue(ChildControlStyleProperty, value); }
    }

    public static readonly DependencyProperty ChildControlStyleProperty =
        DependencyProperty.Register("ChildControlStyle", 
                                    typeof(Style), 
                                    typeof(ParentControl), 
                                    new PropertyMetadata(null));
} 
```

* * *

```
<Style TargetType="ParentControl">
    <Setter Property="ChildControlStyle">
        <Setter.Value>
            <Style TargetType="ChildControl">
                <!-- setters -->
            </Style>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ParentControl">
                <Grid>
                    <ChildControl Style="{TemplateBinding ChildControlStyle}" />
                    <!-- other stuff -->
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:11:15.817

You would get that effect by writing XAML like this:

```
<my:MyParentControl>
   <my:MyParentControl.Resources>
      <Style TargetType="my:MyChildControl">
         <Setter Property="Background" Value="Red"/>
      </Style>
   </my:MyParentControl.Resources>
<my:MyParentControl> 
```

In this example, this XAML creates a MyParentControl in which all the children of type MyChildControl have red backgrounds.

# javascript - 在页面加载时检查 Facebook 登录状态

> ID：15721806
> 
> 赞同：1
> 
> 时间：2013-03-30T18:13:48.533
> 
> 标签：javascript, facebook

根据 Facebook Javascript SDK[文档](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)，

> 调用 FB.init 时，可以通过设置 status: true 来检查用户的状态。
> 
> 要接收此调用的响应，您必须订阅 auth.statusChange 事件。

我相信我这样做是正确的，但是我的示例中的“状态更改”日志永远不会触发：

```
window.fbAsyncInit = function() {
    FB.init({
        appId      : 'xxxxxxxxxxxx', // App ID
        channelUrl : '../channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });

    FB.Event.subscribe('auth.statusChange', function(response) {
        console.log("status change!");
    });
    ...
}); 
```

该文档不正确吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-09T16:55:40.587

我认为最后而不是 }); 是 };

也可能是你没有开始。这对我有用：

```
$(document).ready(function() {

  var app_id = 'xxxxxxxxxxxxxx';

  var start = function (){

    window.fbAsyncInit = function() {

     FB.init({

        appId     : app_id,
        status    : true,
        cookie    : true,
        xfbml     : true,
        version   : 'v2.7'

     });

     FB.Event.subscribe('auth.statusChange', function(response) {
        var status = response.status;
        console.log(response.status);

        if (status === "connected") {
         //
        }

     });
   };

  }

  start();

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T05:32:44.870

你可以试试这个方法。

```
<script type="application/javascript">

    function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
        console.log('statusChangeCallback');
        console.log(response);                   // The current login status of the person.
        if (response.status === 'connected') {   // Logged into your webpage and Facebook.
            console.log("User connected, name: " + response.name);
        } else {                                 // Not logged into your webpage or we are unable to tell.
            console.log("user not conneted");
        }
    }

    window.fbAsyncInit = function () {
        FB.init({
            appId: '{your-app-id}',
            cookie: true,
            xfbml: true,
            version: '{api-version}'
        });

        FB.getLoginStatus(function (response) {   // Called after the JS SDK has been initialized.
            statusChangeCallback(response);        // Returns the login status.
        });
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script> 
```

# java - 用 Java 将客户端连接到多个服务器

> ID：15721808
> 
> 赞同：1
> 
> 时间：2013-03-30T18:13:54.713
> 
> 标签：java, sockets, tcp

我希望客户端连接到多个服务器。即我希望我的客户发送一个数字，该数字将`server1`其平方并将其回显给客户端。但是，我希望客户端将这个平方数发送到在不同端口上侦听的第二台服务器。

我不确定如何实现这个功能，我可以通过线程来做到这一点，还是只打开第二个套接字`server2`？

这是我的客户的代码。

```
import java.io.*;

import java.net.*;

public class ClientA {
    public static void main(String[] args) {

    String serverhost = "localhost";
    int serverport = 6789;

        Socket clientSocket = null;  
        DataOutputStream os = null;
        BufferedReader is = null;

   try {
            clientSocket = new Socket(serverhost, serverport);
            os = new DataOutputStream(clientSocket.getOutputStream());
            is = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: " + serverhost);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: " + serverhost);
        } //end try

if (clientSocket == null || os == null || is == null) {
        System.err.println( "An error has occured, please restart." );
        return;
    } //end if

    try {
        while ( true ) {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String keyboardInput = br.readLine();
        os.writeBytes( keyboardInput + "\n" );

        int n = Integer.parseInt( keyboardInput );
        if ( n == 0 ) {
            break;
        }

        String responseLine = is.readLine();
        System.out.println("Server returns its square as: " + responseLine);
        }

        os.close();
        is.close();
        clientSocket.close();   
    } catch (UnknownHostException e) {
        System.err.println("Trying to connect to unknown host: " + e);
    } catch (IOException e) {
        System.err.println("IOException:  " + e);
    } //end try
    } //end main
} //end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:36:49.383

Based on the info you've given, I don't see the need to make it a multi-threaded application as you're only sending (i.e. not receiving) data to the second server when you receive a reply from the first server. Just set up a second socket to the other address and send the data when you get it from the first server.

# mysql - Performance of MySQL View is Worse than that of Underlying Query

> ID：15721809
> 
> 赞同：5
> 
> 时间：2013-03-30T18:13:57.753
> 
> 标签：mysql, performance, view

I have a MySQL view defined using the below (`JOIN` statements omitted for brevity).

```
CREATE VIEW vw_example AS 
SELECT a, b, c FROM x, y, z 
```

Over many repetitions `SELECT a, b, c FROM x, y, z` is 5 times faster than `SELECT a, b, c FROM vw_example`.

I'm looking to understand why this is and how to bring the `SELECT FROM vw_example` performance inline with the underlying `SELECT FROM x, y, z`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-17T06:22:53.197

Although you don't show a DISTINCT in your example query, I recently discovered this to be the one single distinguishing factor in the performance difference between a query run directly, vs run as a view.

With SELECT DISTINCT on my query doing an INNER JOIN on a 726,000 row table and a 303,000 row table, joining ON 3 columns for which each table has an index, the direct query is running about 0.15-0.16s duration. When I use the VIEW created with the same query (and nothing else) the duration is about 142-145s or about 10^3 times as long.

Removing DISTINCT reduced both the query itself and the view it is based on to 0.016s--there is virtually no difference at all.

I can't help with understanding why--only with recognizing one cause in one particular case.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T13:22:07.527

I am not sure, but maybe mysql is using tmp tables much better for one of the queries. Please adjust these settings and then try again:

```
tmp_table_size   100M
max_heap_table_size 128M
query_cache_limit  350M
query_cache_size 300M 
```

Use `set global` before them so that you can set them on the fly, hope this might just work. If not then you might need to look into re writing the query.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:09:30.437

It's hard to be precise - the best way to investigate is to [run EXPLAIN on both flavours of the query](http://www.mysqlperformanceblog.com/2007/08/12/mysql-view-as-performance-troublemaker/).

However, my suspicion is that the [query cache](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html) is at the heart of this - re-running the same query will seed the query cache, and unless the underlying data changes, or the cache gets flushed, you're likely to benefit from the caching.

You'd expect to get that benefit when hitting the view, too, but caching is non-deterministic, and my guess is that, somehow, your queries against the view aren't benefiting from the caching.

If the EXPLAINs are identical, that would be the best explanation...

# ruby-on-rails - 如何通过link_to传递params参数？

> ID：15721810
> 
> 赞同：0
> 
> 时间：2013-03-30T18:14:29.817
> 
> 标签：ruby-on-rails

在控制器中

```
class FeedEntriesController < ApplicationController
  def index
    @search = FeedEntry.search(params[:is_star])
    @feed_entries = @search.page(params[:page])
    @app_keys = AppKey.all
  end
end 
```

在视图中 - feed_entries/index.html.erb

```
<%= link_to "Stared", {:controller => "feed_entries", :action => "index", :is_star => false } %> 
```

feed_entries 表包含`is_star:boolean`属性。所以，我只想将参数 is_star == true 传递给`params[:is_star]`.

但是上面的代码不起作用。请有人帮助我。

如果，我点击`Stared`链接。我在浏览器中收到如下错误：

```
undefined method `stringify_keys!' for "false":String 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:50:56.373

看起来您的 FeedEntry#search 方法需要一个响应 #stringify_keys 的参数！方法，所以我假设你应该传递一个 Hash ：

```
@search = FeedEntry.search(is_star: params[:is_star]) 
```

顺便说一句，带有 'controller' 和 'action' 选项的 link_to 是陈旧而冗长的语法，您应该使用足智多谋的风格：

```
link_to 'Stared', feed_entries_path 
```

在这里阅读更多：http: [//api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

# ruby-on-rails - 如何向 gmaps4rails 添加 addPolylines 功能？

> ID：15721811
> 
> 赞同：0
> 
> 时间：2013-03-30T18:14:32.957
> 
> 标签：ruby-on-rails, ruby, gem, gmaps4rails

我正在使用[gmaps4rails](https://rubygems.org/gems/gmaps4rails) gem（版本 1.5.6），我想添加向地图添加更多折线的功能，而不是替换已经存在的折线。在 github 上，此代码可[在此处](https://github.com/apneadiving/Google-Maps-for-Rails/tree/1.x)查看。

[标记](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies#markers)已经存在此功能： `Gmaps.map.replaceMarkers(your_markers_json_array);` `Gmaps.map.addMarkers(your_markers_json_array);`。

标记功能似乎分布在两个地方：

1）在[gmaps4rails.base.js](https://github.com/apneadiving/Google-Maps-for-Rails/blob/1.x/public/javascripts/gmaps4rails/gmaps4rails.base.js#L342)中：

```
Gmaps4Rails.prototype.addMarkers = function(new_markers) {
  this.markers = this.markers.concat(new_markers);
  this.create_markers();
  return this.adjustMapToBounds();
}; 
```

2）在[gmaps4rails.base.js.coffee](https://github.com/apneadiving/Google-Maps-for-Rails/blob/1.x/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee#L314)中：

```
 #add new markers to on an existing map
  addMarkers : (new_markers, adjustBounds = true) ->
    #update the list of markers to take into account
    @markers = @markers.concat(new_markers)
    #put markers on the map
    @create_markers()
    @adjustMapToBounds() if adjustBounds 
```

我想我可以使用`replacePolylines`代码来进行自己的`addPolylines`调用：

1）在[gmaps4rails.base.js](https://github.com/apneadiving/Google-Maps-for-Rails/blob/1.x/public/javascripts/gmaps4rails/gmaps4rails.base.js#L393)附近的`replacePolylines`代码为：

```
Gmaps4Rails.prototype.addPolylines = function(new_polylines) {
  this.polylines = this.polylines.concat(new_polylines);
  this.create_polylines();
  return this.adjustMapToBounds();
}; 
```

2）在[gmaps4rails.base.js.coffee](https://github.com/apneadiving/Google-Maps-for-Rails/blob/1.x/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee#L387)附近的`replacePolylines`代码为：

```
 #add new polylines to on an existing map
  addPolylines : (new_polylines) ->
    #update the list of polylines to take into account
    @polylines = @polylines.concat(new_polylines)
    #put polylines on the map
    @create_polylines()
    #.... and adjust map boundaries
    @adjustMapToBounds() 
```

我已经对已添加到我的 Rails 项目中的 gem 进行了这些更改，并且我已经重新启动了我的 Rails 服务器。`replacePolylines`我用.的方式来称呼它`Gmaps.map.addPolylines(your_polylines_json_array);`。它在控制台中产生错误：`Uncaught TypeError: Object #<Gmaps4RailsGoogle> has no method 'addPolylines'`.

gmaps4rails 项目中似乎没有其他任何地方我必须为我的`addPolylines`电话做任何事情，但我显然没有做正确的事情。任何人都可以根据这些信息解释我需要做什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:05:48.783

作为一种解决方法，在我弄清楚如何将功能构建到 gmaps4rails 本身之前，我已经采取这些措施将折线异步加载到地图上......

在我的`UsersController`中，我设置了`show`构建空白`@polylines_json`集的操作：

```
def show
  @user = User.find(params[:id])
  @polylines_json = {}
end 
```

这里的想法是让 gmaps4rails 在其初始地图加载时不显示任何内容，以便初始页面显示尽可能快。在视图中，我正在使用这一行加载地图：

```
<%= gmaps( :polylines => { :data => @polylines_json }, :map_options => { :type => 'HYBRID', :zoom => 12, :auto_adjust => false, :center_latitude => "-77", :center_longitude => "21" } ) %> 
```

回到 中`UsersController`，我已经`maps`设置了一个自定义操作来处理包含`from`和`to`参数的 json 请求（以便我可以找到特定范围内的项目）。正是在这个动作中，我根据`from`/`to`参数构建了实际的折线 json 数据：

```
def items
  items = items.find(:all, :conditions => ['id >= ? AND id <= ?', params[:from], params[:to]])

  polyline = []
  i=0
  items.each do |item|
    polyline[i] = []
    polyline[i] += [{:lng=>item.longitude.to_f,:lat=>item.latitude.to_f}]
    i += 1
  end
  @polylines_json = polyline.to_json

  respond_to do |format|
    format.json { render json: @polylines_json }
  end
end 
```

最后，回到视图以将它们组合在一起，我一次异步地构建十个折线集合，直到我从数据库中检索它们：

```
<% content_for :scripts do %>
  <script type="text/javascript" charset="utf-8">
    numberOfItems = <%= @user.items.count %>;
    var polylines= [];
    function LoadMap(from, to) {
      if (to < numberOfItems){
        nextFrom = to + 1;
        nextTo = to + 10;
      }
      if(nextTo <= numberOfItems){
        $.ajax({
          dataType: 'json',
          url: "http://<%= request.host %>/users/<%= @user.id %>/maps.json?from="+from+"&to="+to,
          success: function(response) {
            polylines = polylines.concat(response);
            Gmaps.map.replacePolylines(polylines);
            LoadMap(nextFrom, nextTo);
          }
        });
      }
    }
    LoadMap(1,10);
  </script>
<% end %> 
```

# macos - Qt Creator Mac OS X 10.8.3 调试助手不起作用

> ID：15721814
> 
> 赞同：1
> 
> 时间：2013-03-30T18:14:40.007
> 
> 标签：macos, qt, gdb, qt-creator, macports

即使用于为 Qt 4.8.4 构建调试助手的 Qt Creator 2.7.0 中的日志显示成功，并且在 Preferences > Debugger > Locals & Expressions 下选中了“Use Debugging Helper”，我仍然无法`QString`正确检查 s等值调试。正在调试的应用程序的控制台窗口中没有显示错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:44:52.740

我在最新的 OSX 上使用自建 Qt4.8.4 的 QtC2.7.0（以及 2.6）也遇到了同样的问题：我自己构建了调试器助手，完成了以下操作。

```
copy this to the head of the dumper.pro

macx:QMAKE_CC = gcc
macx:QMAKE_CXX = g++
macx:QMAKE_LINK = g++

run the following commands

 2761  cd "/Users/Shared/current_qt/qtc-debugging-helper/" 
 2766  /Users/Shared/current_qt/bin/qmake -spec macx-g++42 dumper.pro -nocache CONFIG+=x86_64
 2767  make all -k 
```

# ios - 将原始数据转换为 iOS 的可显示视频

> ID：15721816
> 
> 赞同：4
> 
> 时间：2013-03-30T18:15:13.080
> 
> 标签：ios, video, encoding, opengl-es, core-video

我有一个有趣的问题，我需要研究与非常低级的视频流相关的问题。

有没有人有将原始字节流（分隔为每个像素信息，但不是标准的视频格式）转换为低分辨率视频流的经验？我相信我可以将数据映射为每像素字节的 RGB 值，因为与原始数据中的值对应的颜色值将由我们确定。我不确定从那里去哪里，或者每个像素需要什么 RGB 格式。

我看过 FFMPeg，但它的文档非常庞大，我不知道从哪里开始。

我的具体问题包括，是否可以使用该像素数据创建 CVPixelBuffer？如果我要这样做，我需要将每像素数据转换为哪种格式？

另外，我是否应该更深入地研究 OpenGL，如果是的话，在哪里可以找到有关该主题的信息的最佳位置？

那么 CGBitmapContextCreate 呢？例如，如果我使用类似[这样](https://stackoverflow.com/a/1581805/695570)的东西，典型的像素字节需要是什么样的？这是否足够快以将帧速率保持在 20fps 以上？

**编辑**：

我认为在你们两个的出色帮助下，以及我自己的一些研究，我已经制定了一个计划，如何构建原始 RGBA 数据，然后从该数据构建一个 CGImage，然后从该 CGImage 创建一个 CVPixelBuffer从这里[CVPixelBuffer 来自 CGImage](https://stackoverflow.com/questions/3741323/how-do-i-export-uiimage-array-as-a-movie/3742212)。

但是，要在数据输入时实时播放，我不确定我会看到什么样的 FPS。我是否将它们绘制到 CALayer，或者是否有一些与 AVAssetWriter 类似的类，我可以在附加 CVPixelBuffers 时使用它来播放它。我的经验是使用 AVAssetWriter 将构建的 CoreAnimation 层次结构导出到视频，因此视频总是在开始播放之前构建，而不是显示为实时视频。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T16:32:24.600

I've done this before, and I know that you found my GPUImage project a little while ago. As I replied on the issues there, the GPUImageRawDataInput is what you want for this, because it does a fast upload of RGBA, BGRA, or RGB data directly into an OpenGL ES texture. From there, the frame data can be filtered, displayed to the screen, or recorded into a movie file.

Your proposed path of going through a CGImage to a CVPixelBuffer is not going to yield very good performance, based on my personal experience. There's too much overhead when passing through Core Graphics for realtime video. You want to go directly to OpenGL ES for the fastest display speed here.

I might even be able to improve my code to make it faster than it is right now. I currently use `glTexImage2D()` to update texture data from local bytes, but it would probably be even faster to use the texture caches introduced in iOS 5.0 to speed up refreshing data within a texture that maintains its size. There's some overhead in setting up the caches that makes them a little slower for one-off uploads, but rapidly updating data should be faster with them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:55:41.020

我的 2 美分：

I made an opengl game which lets the user record a 3d scene. Playback was done via replaying the scene (instead of playing a video because realtime encoding did not yield a comfortable FPS.

There is a technique which could help out, unfortunately I didn't have time to implement it: [http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/](http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/)

This technique should cut down time on getting pixels back from openGL. You might get an acceptable video encoding rate.

# iphone - NSNotificationCenter 关于 ViewWillAppear 和 ViewWillDisapper

> ID：15721818
> 
> 赞同：2
> 
> 时间：2013-03-30T18:15:17.973
> 
> 标签：iphone, ios, objective-c, nsnotificationcenter, viewwillappear

我有一个简单的 viewController 想听`UIKeyboardWillHideNotification`。因此我有以下代码：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden)
                                                 name:UIKeyboardWillHideNotification object:nil];
}

- (void) keyboardWillBeHidden
{
    [self.scrollView setContentOffset:CGPointMake(0, 0) animated:YES];
} 
```

我正在尝试决定何时将 viewController 作为通知中心观察者删除。我只需要知道`UIKeyboardWillHideNotification`视图控制器何时出现在屏幕上，因此我正在考虑添加以下内容：

```
- (void) viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

**这足够了吗？当 viewController 仍在屏幕上时，是否有机会`viewDidUnload`或将被调用？`dealloc`** 请注意，我使用的是非常基本`UINavigationController`的应用程序流程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:20:38.373

Registering the notification in `viewWillAppear` and unregistering it in `viewWillDisappear` seems to be a clean and symmetric solution to me.

Note that `viewWillAppear` can be called multiple times before `dealloc` (e.g. if another view controller is pushed onto your VC, or if you switch between tab bar controllers.) If you register the notification in `viewWillAppear` and unregister it only in `dealloc` then you will get duplicate registrations (compare [Warning for iOS/iPhone users about duplicate NSNotification observations](https://stackoverflow.com/questions/3072811/warning-for-ios-iphone-users-about-duplicate-nsnotification-observations)) and the registered selector is called multiple times for a single notification event.

I actually prefer the block-based observer registration method

```
addObserverForName:object:queue:usingBlock: 
```

which returns an opaque object which is used for removing the observer again. Storing this return value into an instance variable of your view controller helps to keep track if the observer is already registered or not, and therefore helps to avoid duplicate registrations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:21:22.390

To answer your direct question, `dealloc` will never be called while your view is still on screen unless you directly call it which you shouldn't be.

dealloc will only be called when there are no strong pointers remaining that point to your viewController.

As Anoop Vaidya suggests, it is totally doable to put removeObserver in `dealloc` and be confident that `dealloc` won't get called while your viewController is on screen, and if it does... well you have much bigger problems than removing an observer

Edit: Since I can't actually reply to comments yet, when your viewController is off screen it is actually deallocated. It is then re-instantiated when it is called back on screen.

Edit: I'm wrong

# php - 使用 SESSION 时必须两次提交表单才能从 POST 填充变量

> ID：15721820
> 
> 赞同：0
> 
> 时间：2013-03-30T18:15:41.447
> 
> 标签：php, html, forms, session

以下代码按预期工作：

```
<?php
//filename is noproblem.php
//Assign each letter a ratio
$ratios = array(
'A' => 1,
'B' => 0.5
);

//Assign each letter a quantity retrieved from POST
$quantities = array(
                'A' => $_POST['AQuantity'],
                'B' => $_POST['BQuantity']
        );

//Assign each letter a value 
$values = array(
                'A' => ($ratios['A']*$quantities['A']),
                'B' => ($ratios['B']*$quantities['B'])
        );

echo "Quantity A = "; echo($quantities['A']); echo "<br>";
echo "Value A = "; echo($values['A']); echo "<br>";
echo "Quantity B = "; echo($quantities['B']); echo "<br>";
echo "Value B = "; echo($values['B']);
?>  

<html>
<form name="Quantities" action="noproblem.php" method="post">
<br>
<input type="submit" value="Insert">
<br>                                    
Quantity for A<input type="text" name="AQuantity" size="4 "value="<?php if($_POST['AQuantity']>0) {echo htmlspecialchars($_POST['AQuantity']);} else {echo 0;} ?>">
<br>
Quantity for B<input type="text" name="BQuantity" size="4" value="<?php if($_POST['BQuantity']>0) {echo htmlspecialchars($_POST['BQuantity']);} else {echo 0;} ?>">
</form> 
</html> 
```

但是，问题是我需要 Quantities 和 Values 变量稍后转移到另一个 PHP 文件中，该文件只能包含 PHP 代码（JPGraph）。这可以通过使用 $_SESSION 变量来实现，但随后表单提交突然需要按两次。违规代码：

```
<?php
//filename is problem.php
session_start();

//Assign each letter a ratio
$ratios = array(
'A' => 1,
'B' => 0.5
);

$_SESSION = array(
        //Assign each letter a quantity retrieved from POST
        'quantities' => array(
                'A' => $_POST['AQuantity'],
                'B' => $_POST['BQuantity']
        ),
        //Assign each letter a USD Value from API data and their respective quantities
        'values' => array(
                'A' => ($ratios['A']*$_SESSION['quantities']['A']),
                'B' => ($ratios['B']*$_SESSION['quantities']['B'])
        ));
echo "Quantity A = "; echo($_SESSION['quantities']['A']); echo "<br>";
echo "Value A = "; echo($_SESSION['values']['A']); echo "<br>";
echo "Quantity B = "; echo($_SESSION['quantities']['B']); echo "<br>";
echo "Value B = "; echo($_SESSION['values']['B']);
?>  

<html>
<form name="Quantities" action="problem.php" method="post">
<br>
<input type="submit" value="Insert">
<br>                                    
Quantity for A<input type="text" name="AQuantity" size="4 "value="<?php if($_POST['AQuantity']>0) {echo htmlspecialchars($_POST['AQuantity']);} else {echo 0;} ?>">
<br>
Quantity for B<input type="text" name="BQuantity" size="4" value="<?php if($_POST['BQuantity']>0) {echo htmlspecialchars($_POST['BQuantity']);} else {echo 0;} ?>">
</form> 
</html> 
```

我不能理解 SESSION 是如何工作的，所以在这方面的一些启示将不胜感激。首先，我需要知道如何修复代码，以便在使用 SESSION 时只需按一下按钮即可正确计算。我知道一个不太理想的解决方案是将每个需要的变量复制到 $_SESSION 数组中，并在该文件的主体中使用非 SESSION 变量。当然，还有比这更优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:29:21.390

试试这个，但是，这不是最佳实践，它只是解决了你的问题：

```
<?php
//filename is problem.php
session_start();

//Assign each letter a ratio
$ratios = array(
'A' => 1,
'B' => 0.5
);
$quantities = array(
                'A' => $_POST['AQuantity'],
                'B' => $_POST['BQuantity']
        );

//Assign each letter a value 
$values = array(
                'A' => ($ratios['A']*$quantities['A']),
                'B' => ($ratios['B']*$quantities['B'])
        );

$_SESSION['quantities'] = $quantities;
$_SESSION['values'] = $values;

echo "Quantity A = "; echo($_SESSION['quantities']['A']); echo "<br>";
echo "Value A = "; echo($_SESSION['values']['A']); echo "<br>";
echo "Quantity B = "; echo($_SESSION['quantities']['B']); echo "<br>";
echo "Value B = "; echo($_SESSION['values']['B']);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:45:42.473

这与 $_SESSION 无关，而是与函数调用（在本例中为 arra()）有关。

您尝试使用在它返回后设置的值调用对 array() 的第一次调用。所以你第一次乘以0。就这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:46:10.347

不确定您到底要做什么，但是您可以执行以下操作：

```
<?php
//filename is noproblem.php
//Assign each letter a ratio
$ratios = array(
'A' => 1,
'B' => 0.5
);

if ( !empty($_POST) ) {
   //Assign each letter a quantity retrieved from POST
   $_SESSION['quantities'] = array(
                'A' => intval($_POST['AQuantity']),
                'B' => intval($_POST['BQuantity'])
        );

   //Assign each letter a value 
   $_SESSION['values'] = array(
                'A' => ($ratios['A'] * $_SESSION['quantities']['A']),
                'B' => ($ratios['B'] * $_SESSION['quantities']['B'])
        );

   echo "Quantity A = "; echo($_SESSION['quantities']['A']); echo "<br>";
   echo "Value A = "; echo($_SESSION['values']['A']); echo "<br>";
   echo "Quantity B = "; echo($_SESSION['quantities']['B']); echo "<br>";
   echo "Value B = "; echo($_SESSION['values']['B']);
}
?>  

<html>
<form name="Quantities" action="noproblem.php" method="post">
<br>
<input type="submit" value="Insert">
<br>                                    
Quantity for A<input type="text" name="AQuantity" size="4 "value="<?php if(!empty($_SESSION['quantities']['A'])) {echo htmlspecialchars($_SESSION['quantities']['A']);} else {echo 0;} ?>">
<br>
Quantity for B<input type="text" name="BQuantity" size="4" value="<?php if(!empty($_SESSION['quantities']['B'])) {echo htmlspecialchars($_SESSION['quantities']['B']);} else {echo 0;} ?>">
</form> 
</html> 
```

This sets the SESSION values and then uses them if they are not empty. Notice that I wrapped your POST values in intval() to enforce a number also. Not sure if this will help, but here is a [session tutorial](http://www.w3schools.com/php/php_sessions.asp). Assuming you use session_start() in your next PHP script, the variables you set here should be availabe.

# java - 使用 NetBeans 使用 java 程序导出图像

> ID：15721823
> 
> 赞同：0
> 
> 时间：2013-03-30T18:15:48.883
> 
> 标签：java, image

我知道这个问题的留言板上有一千个答案，我已经尝试了所有答案，但无论出于何种原因，它们都没有奏效。这是我的代码的摘录：

```
 ImageIcon icon = new ImageIcon("/home/james/programmingpics/A_Flute");        
    ImageIcon icon1 = new ImageIcon("/home/james/programmingpics/C_D_Flute");
    ImageIcon icon2 = new ImageIcon("/home/james/programmingpics/D_E_Flute");
    ImageIcon icon3 = new ImageIcon("/home/james/programmingpics/E_Flute");       
    ImageIcon icon4 = new ImageIcon("/home/james/programmingpics/F_G_Flute");        
    ImageIcon icon5 = new ImageIcon("/home/james/programmingpics/G_Flute");
    ImageIcon icon6 = new ImageIcon("/home/james/programmingpics/B_Flute");
    ImageIcon icon7 = new ImageIcon("/home/james/programmingpics/C_Flute");
    ImageIcon icon8 = new ImageIcon("/home/james/programmingpics/D_Flute");        
    ImageIcon icon9 = new ImageIcon("/home/james/programmingpics/F_Flute"); 
```

非常简单，在我的电脑上运行完美。每当我压缩 dist 文件夹时，将图片从计算机上的目录中移出并运行程序，我会得到空的 JFrame。所以我然后做了 project/properties/sources/add 文件夹的事情，编译它，结果还是一样。然后我将classes文件夹移动到dist文件夹中，尝试更改路径，看看是否有效，仍然没有。听起来有一个简单的答案，但我显然错过了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:28:08.940

您在构造函数中使用**绝对路径名**。绝对路径名的示例是“/home/myusername/folder/foo/bar.png”或“C:\Folder\Graphics\foo\bar.png”。您在帖子中给出的代码总是希望在运行时从给定的路径中准确读取。如果您将图形移动到不同的文件夹，您的程序将无法找到它们。这样，图形不会包含/打包到您的程序中，而是在运行时（不是编译时！）从构造函数中指定的路径加载。

这种绝对路径是非常糟糕的做法，因为它们会阻止您的程序可移植。其他人将无法在他们的计算机上运行您的程序。因为如果您尝试在另一台机器上运行它，代码可能会失败，因为该计算机上可能不存在路径“/home/james/...”。也许您的用户甚至不使用 Linux，或者至少他的用户名不是“james”。

所以你必须**摆脱绝对路径**。相反，您应该注意将您的图形包含在您的项目中，并将它们放入 JAR 存档中。

一种方法是将您的图形放入项目的目录结构中，然后执行以下操作：

```
URL imageURL = getClass().getClassLoader().getResource("images/A_Flute.png");
ImageIcon fluteIcon = new ImageIcon(imageURL); 
```

当然，如果您的图形保留在您的主文件夹中，这将不起作用。您必须复制图形。

# android - Android - Is posible save entire Bundle into SharedPreferences?

> ID：15721827
> 
> 赞同：3
> 
> 时间：2013-03-30T18:15:54.430
> 
> 标签：android, save, bundle, sharedpreferences, parcelable

I would like to save a Bundle object (parcelable) into SharedPreferences... is this possible?

There is any other option ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:34:42.823

According to the [documentation](http://developer.android.com/reference/android/content/SharedPreferences.html) it looks like there is no method to save a parcelable object inside shared preferences. Depending on the size of the object you want to save you could choose between serializing it in a string and saving in shared preferences as a string or save it to a file.

# java - 更新某些字段以防止覆盖

> ID：15721828
> 
> 赞同：0
> 
> 时间：2013-03-30T18:16:25.910
> 
> 标签：java, stackmob

我正在使用 StackMob 开发一个 Android 应用程序。现在我想保存一个对象，但不是他的所有属性，让我们以这个例子为例。

```
class A extends StackMobModel
{
    String UserOneInput;
    String UserTwoInput;
} 
```

现在我有两个人同时使用 A 类的一个实例。用户一将他的信息放在 UserOneInput 中，用户二在 UserTwoInput 中。现在，如果用户一保存命中信息，而用户二已经获取了该对象，情况将是

```
class A extends StackMobModel
{
    String UserOneInput = "User one his input";
    String UserTwoInput = null;
} 
```

对于用户一，而用户二有

```
class A extends StackMobModel
{
    String UserOneInput = null;
    String UserTwoInput = null;
} 
```

现在，如果玩家二保存了他的数据，它就按照他的情况保存了，所以我们得到

```
class A extends StackMobModel
{
    String UserOneInput = null;
    String UserTwoInput = "User two input";
} 
```

用户一他的输入被覆盖。我可以在保存之前再次获取该对象，但如果您在移动网络上使用它，延迟仍然会导致同样的问题。（用户二在使用一个提取和保存的时间之间保存他的信息）

我查看了javadoc，只找到了一个可以用来选择某些字段的函数，但它说这对保存不起作用。有没有这样一种方法可以只保存类的某些字段？或者我应该使用一些不同的模型来防止覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:42:23.927

该类不知道谁是所有者，以便知道要保存哪一个 String。
这个类必须分解为

```
class Answer {
    String answer;
    ....
} 
```

和

```
class Question {
    Answer userOne;
    Answer userTwo;
    ....
} 
```

每个用户都可以访问并保存自己的答案，并且问题知道用户的答案。

# c - C在循环中将输入读入char数组

> ID：15721831
> 
> 赞同：0
> 
> 时间：2013-03-30T18:16:51.060
> 
> 标签：c, stdin

我正在读取来自`stdin`例如汽车名称、汽车类型的输入。

我面临的问题是，如果我输入了汽车数量 2 并在循环中输入，第二个值将通过`scanf`.

输入汽车数量：2

输入列名称：chevy

可用的汽车类型可以是电动，汽油 - 输入汽车类型：汽油

输入列名称：chevy2

可用的汽车类型可以是电动，汽油 - 输入汽车类型：电动

现在如果我打印我看到的都是电动的

```
 #include <stdio.h>

    int main(int argc, char *argv[])
    {
        setbuf(stdout, NULL);
        int carNum;
        int i;

        char carName[50];
        char carType[200];

        printf("\nEnter number of cars:");
        scanf("%d",&carNum);
        for(i=0;i<carNum;i++)
         {
             printf("\nEnter name of car :");
     scanf("%s", &carName[i]);

     printf("\nType of car available can be electric,gas - Enter type of car %d: ");                             
     scanf("%s", &carType[i]);
         }

         for(i=0;i<carNum;i++)
         {

             printf("\nName of car %d: ",i+1);
             printf("\n%s", &carName[i]);

             printf("\nType of car %d: ",i+1);
             printf("\n%c", &carType[i]);
         }  

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:19:20.153

**编辑** 新答案：

正如您所展示的，您需要读取一些汽车名称和类型您需要字符串数组`carName`而`cartype`不是简单的字符数组。喜欢（对于论文解决方案）：

```
 #define LEN 100     // declare sufficient length size 

 char carName[50][LEN];   // in main()
 char carType[50][LEN]; 
```

你正确的 scanf 和 printf 语句应该是这样的：

```
scanf("%d",&carNum);
for(i=0;i<carNum;i++){
    printf("\nEnter name of car :");
    scanf("%s", carName[i]);
    printf("\nType of car available can be electric,gas - Enter type ofcar: ");
    scanf("%s", carType[i]);
}
for(i=0;i<carNum;i++){
    printf("\nName of car %d: ",i+1);
    printf("\n%s", carName[i]);
    printf("\nType of car %d: ",i+1);
    printf("\n%s", carType[i]);
} 
```

（*注意：当我用户时，我在 scanf 和 printf 中作为参数`%s`给出`char*`*）
**旧答案：** 在第一个 for 循环中，您的 scanf 语句是错误的：

```
 scanf("%s", &carName[i]);
                          ^  remove [i]
     scanf("%s", &carType[i]);
                          ^  remove [i] 
```

你只需要这样写：

```
 // printf
    scanf("%s", &carName);
    //print                    
    scanf("%s", &carType); 
```

在 printf 语句的第二个循环中是错误的。

```
printf("\n%c", &carType[i]);
               ^  not need 
```

正确的是

```
printf("\n%c", carType[i]); 
```

另外我认为您的要求是：

```
printf("\n%s", carType); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:24:19.510

您声明的数组不代表字符串，它代表由 50 个字节和 200 个字节组成的连续内存。这足以分别存储一个 50 个字符的字符串和 200 个字符的字符串。你需要的是一个字符串数组，像这样声明。

```
char * carnames[MAX_INPUT]; 
```

我建议你创建一个缓冲区来读取每个字符串，然后使用`strdup()`它将复制字符串并将其分配到它在 carnames 中的位置。

Here's an example:

```
char buffer[80];
char * carnames[MAX_INPUT];

for(i=0;i<carNum;i++)
{
  scanf("%s", buffer);
  carnames[i] = strdup(buffer);
} 
```

Be aware that strdup allocates memory for the string, so once you're done you should free the memory.

# javascript - Generating Jquery Mobile site from Json

> ID：15721833
> 
> 赞同：1
> 
> 时间：2013-03-30T18:16:58.247
> 
> 标签：javascript, jquery, json, jquery-mobile

Using [jQuery Mobile](http://jquerymobile.com/) I would like to generate pages using the json below. By generate I mean this json represents the layout and the structure of the whole mobile site. I somehow want to loop over this data (client site) and create the home page with page list and page. Can someone get me started with this with an example.

Many thanks

```
{
    "name": "My Site Name",
    "logo": "",
    "theme": "a",
    "fullSiteLink": "http://www.google.com",
    "pages": [
        {
            "id": "1364666933727",
            "name": "I'm a page",
            "type": "basic",
            "components": {
                "img": "url here",
                "text": "This is the page content."
            }
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:29:57.123

Try to start by firstly making up a page how you think it should look like, then make some placeholders and write a script that feills them with data from your JSON.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:40:42.263

You should also have a look at using [requireJs](http://requirejs.org/) alongside JQM. If you store your pages (or page elements) as templates, you can easily pull them in via the [!text](https://github.com/requirejs/text) plugin and then loop over your JSON to fill the necessary data.

Has the added benefit of your page/widget templates being cached after having them requested the first time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:19:03.070

To get JSON array, use `$.ajax`.

```
$.ajax({
 Type: "GET",
 url: URL,
 dataType: "json",
 contentType: "application/json",
  success: function(data) {
  $.each(data, function(index, value) {
   // your code here
   });
  }
}); 
```

# iphone - 使用不同的分发配置文件 - 我的应用程序仍然可以工作吗？

> ID：15721840
> 
> 赞同：0
> 
> 时间：2013-03-30T18:17:24.517
> 
> 标签：iphone, ios, objective-c, xcode, app-store

我正在使用新的分发配置文件将我的应用程序的最新版本放到应用程序商店中，并且想知道这是否会影响任何事情，即它是否仍然可以与应用程序商店中的应用程序的早期版本一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:40:20.467

更改分发配置文件不会影响任何现有用户，您的应用程序将完全按预期运行。

来源：我使用了多个分发配置文件来更新同一个应用程序。

# php - 在 PHP 中解析 json 数组

> ID：15721843
> 
> 赞同：0
> 
> 时间：2013-03-30T18:17:39.487
> 
> 标签：php, arrays, json

我一直在尝试解析一个 json 数组，但没有成功。我可以得到一个根元素，但不能得到任何数组元素。下面是我的来自 Foursquare 的 json 数组的开头，它具有重复出现的场地元素。

```
 response: {
          keywords: {}
          suggestedRadius: 10000
          headerLocation: "here"
          headerFullLocation: "here"
          headerLocationGranularity: "unknown"
          headerMessage: "Suggestions for Friday evening"
          totalResults: 214
             groups: [
               {
                  type: "Recommended Places"
                  name: "recommended"
                  items: [
                      {
                       reasons: {
                       count: 0
                       items: [ ]
                        }
                       venue: {
                            id: "4b799a05f964a520b1042fe3"
                            name: "Green Gables"
                            contact: {
                            phone: "3097472496"
                            formattedPhone: "(309) 747-2496"
                                  }
                            location: {
                            address: "17485 East 2500 North Rd" 
```

下面是我尝试获取餐厅名称的 PHP 代码。

```
 $obj = json_decode($uri, true);

   foreach($obj['response']['groups'] as $p)
   {
   if(isset($p['items']))
   {
     foreach($p['items'] as $p1)
 {
  if(isset($p1['venue']))
  {
//   echo varDumpToString($p1['venue']);  // this dump works ok and shows the elements
 foreach($p1['venue'] as $p2)
 {

     echo varDumpToString($p2['name']);   //  This is where I get the error
   }
   }
   }
   }   
   } 
```

程序深入到 name 元素，然后给我一个错误，说“未定义的索引：名称”和“非法字符串偏移名称”。此消息出现 14 次，这是数组中每个项目的一次。那么为什么是“名称”无法识别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:21:20.960

`response.groups[x].items[y].venue` is not an array. You are currently trying to access `response.groups[x].items[y].venue[z].name`, but you are actually accessing `response.groups[x].items[y].venue.id.name`, which does not exist. That last `foreach` iterates over the venue properties, not the venues. There is only one venue for each item.

This is what it should look like:

```
$obj = json_decode($uri, true);

foreach ($obj['response']['groups'] as $group) {
    if (isset($group['items'])) {
        foreach ($group['items'] as $item) {
            if (isset($item['venue'])) {
                echo varDumpToString($item['venue']['name']);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:25:23.007

Try changing this line,

```
 foreach($p1['venue'] as $p2) 
```

to

```
 foreach($p1['venue'] as $p2Key => $p2) 
```

# pdf - Cidfonts 和映射

> ID：15721846
> 
> 赞同：0
> 
> 时间：2013-03-30T18:18:02.647
> 
> 标签：pdf, character-encoding, fonts

好的，我已经对该主题进行了一些研究，但正如标题所示，我不是专家。所以这就是问题所在：我正在使用 python 和 lib pdfminer 从 pdf 中提取一些文本。

我只尝试了带有拉丁字符的文档，并且在大多数情况下效果很好，除非字体不是拉丁/西方。现在困扰我的文档是使用日文字体中的拉丁字符。Adobe 告诉我编码是`Adobe-Identity`. 我得到的只是char的cid，我找不到相关的cidmap。

我知道我没有使用正确的术语，我的意思是 pdf 告诉我`cid=3`并且我知道 char 是一个空格。我已经为 range 中的字符手动编写了一个映射`0x00-0xFF`。一些消息来源告诉它匹配“mac-roman”编码，其他不同意。其他消息来源说它与 OpenType 映射匹配，但我找不到任何超越`0xFF`. 而且我的cids > 3000。

您可以看出我很困惑，因此请您更正我的术语，但我想要的是一张与我自己的地图相匹配但扩展了 range 的地图`0x0100-0xFFFF`。

ETA：窃听 pdf 的链接[http://www.sas.upenn.edu/~jtigay/JapanVol.pdf](http://www.sas.upenn.edu/~jtigay/JapanVol.pdf)
ETA2：我找到了这个[ftp://ftp.oreilly.com/pub/examples/nutshell/cjkv/adobe /aj14.tar.Z](ftp://ftp.oreilly.com/pub/examples/nutshell/cjkv/adobe/aj14.tar.Z)存档中的 cid2code.txt 是我正在寻找的那种地图。但是对于所有这些字体， cid 列似乎“移动”了两个： cid1 映射到空间。
ETA3：更正编码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:07:59.233

您可能正在搜索 Adob​​e 开发人员支持技术说明 #5078 中提供的表格

> [Adobe-Japan1-6 用于 CID 键控字体的字符集](http://partners.adobe.com/public/developer/en/font/5078.Adobe-Japan1-6.pdf)

结合技术说明 #5014 提供的背景知识

> [Adobe CMap 和 CIDFont 文件规范](http://www.adobe.com/content/dam/Adobe/en/devnet/font/pdfs/5014.CIDFont_Spec.pdf)。

不幸的是，您没有提供*困扰您的文档*；因此，我无法检查链接是否真的合适。

**编辑**

正如您更正了您的问题并现在要求[使用特殊用途的 Adob​​e-Identity-0 ROS](http://blogs.adobe.com/CCJKType/2012/05/sp-ai0-ros.html) *（“ROS”是 /Registry、/Ordering 和 /Supplement 的缩写，它们代表三个 /CIDSystemInfo 字典元素存在于CIDFont 和 CMap 资源）*而不是*Adob​​e-Japan1-* ?，上面的链接不再对您感兴趣。然而，不幸的是，只要公共 ROS 都不适用，**Adobe-Identity**似乎就是首选的 ROS。因此，对于将 CID 映射为 unicode 的问题，似乎没有通用答案。

此外， PDF 中*Times字体的***/ToUnicode**映射都如下所示：

 *```
/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><FFFF>
endcodespacerange
endcmap
CMapName currentdict /CMap defineresource pop
end
end 
```

（这里的 CIDSystemInfo 有趣地不同于 PDF 字体对象本身，Adobe-Identity-0。）

但是，根据 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 9.10.3 节，

> 它应使用 beginbfchar、endbfchar、beginbfrange 和 endbfrange 运算符来定义从字符代码到以 UTF-16BE 编码表示的 Unicode 字符序列的映射。

因此，没有定义可用的映射，根据相同的规范结合这些字体的其他方面意味着

> 无法确定字符代码代表什么，在这种情况下，符合要求的读者可以选择他们选择的字符代码。*

# xml - What is this special feed format?

> ID：15721848
> 
> 赞同：1
> 
> 时间：2013-03-30T18:18:12.423
> 
> 标签：xml, rss, itunes, podcast, itunesu

I noticed some podcasts in iTunes have a different sort of feed. For example:

[https://itunes.apple.com/us/course/exploring-the-hobbit/id598674517](https://itunes.apple.com/us/course/exploring-the-hobbit/id598674517)

has a feed that includes `<itms:storelink>` tags on some items, urls on other items:

[https://itunesu.itunes.apple.com/WebObjects/LZDirectory.woa/ra/directory/courses/598674517/feed](https://itunesu.itunes.apple.com/WebObjects/LZDirectory.woa/ra/directory/courses/598674517/feed)

What are these for, is this a sort of new url-shortening Apple invented?

Here is another podcast:

[https://itunes.apple.com/WebObjects/DZR.woa/wa/viewPodcast?cc=us&mt=10&id=524106825](https://itunes.apple.com/WebObjects/DZR.woa/wa/viewPodcast?cc=us&mt=10&id=524106825)

which links to a standard rss:

[https://deimos.apple.com/WebObjects/Core.woa/Feed/umich-public-dz.15286326948.015286326950](https://deimos.apple.com/WebObjects/Core.woa/Feed/umich-public-dz.15286326948.015286326950)

So why are there two different formats on the same iTunesU service? Is this new format of feed with `<itms:storelink>` documented anywhere?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T04:08:05.963

itms links open in the iTunes store directly. After reviewing the first feed, I'd suggest that the items including the itms:storelink tag are hosted by iTunes, as there are items that use the enclosure tag instead, which are probably hosted on some other server.

The two feeds are different because one is ATOM and the other is RSS.

See: [How to link to apps on the app store](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)

# php - ->bind_global() hides view in Kohana 3.3

> ID：15721851
> 
> 赞同：3
> 
> 时间：2013-03-30T18:18:21.517
> 
> 标签：php, kohana

I would like to pass some data from my `Controller_Template` to my `template.php`.

Here's my controller:

```
class Controller_User extends Controller_Template {

    public $template = 'template';

    public function action_index() {

        $user = "Alice";

        $view = View::factory('user/user')
            ->bind('user', $user);

        $this->template->content = $view;
    }
} 
```

Doing this means I can access `$user` in `user/user.php`, and whatever markup I have in `user/user.php` is available in `$content`.

However, I want to access `$user` in `template.php`. If I change the `bind()` method to `bind_global('user', $user)` then I can indeed access `$user` in `template.php`.

The problem though, is that if I do that, there seems to be nothing in `$content`. Where am I going wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:56:31.693

The `$view` (or the `$content` template variable) ends up being empty when you use `bind_global()` method for one good reason — it is a static method which doesn't return anything, and since it's the last method called in the `$view` definition the `$view` variable ends up being equal `NULL`.

It is a bit unfortunate (if you ask me) that PHP allows using static methods in an object context, while at the same time it doesn't allow that with properties. And it is this inconsistency (among many others) that causes your problem here.

The way to achieve what you're after would be to bind the `$user` variable globally in via calling the `bind_global()` method statically. Full working example:

```
class Controller_User extends Controller_Template {

    public $template = 'template';

    public function action_index()
    {
        $user = "Alice";
        View::bind_global('user', $user);

        $view = View::factory('user/user');
        $this->template->content = $view;
    }
} 
```

And this should work for you like a charm.

# jenkins - 是否可以将一些信息添加到要从 QueueTaskDispatcher 构建的项目中？

> ID：15721853
> 
> 赞同：0
> 
> 时间：2013-03-30T18:18:39.760
> 
> 标签：jenkins, hudson

QueueTaskDispatcher 决定是否可以启动某个项目。
但我不仅需要决定是否可以启动某个项目，还需要决定应该使用哪些自定义参数来启动它。
并且只有在可以设置所有自定义参数时才启动项目。
是否可以从 QueueTaskDispatcher 对项目进行此类配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:49:50.900

是的，只需将 Actions 添加到您获得的 Queue.Item 中。如果您想调整构建的参数，请查找 ParametersAction，您可以摆弄它。

# javascript - JavaScript/jQuery in ASP .NET MVC layout page not working

> ID：15721854
> 
> 赞同：1
> 
> 时间：2013-03-30T18:18:40.650
> 
> 标签：javascript, jquery, asp.net-mvc, alert

JavaScript is enabled in the Chrome browser. I want an alert to appear when a paragraph is clicked. WHY is it not working?! If I had got the JavaScript working I assume the jQuery would also work.

Here is the _Layout.cshtml page:

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/Scripts/jquery-1.7.1.js")
    @Scripts.Render("~/bundles/modernizr")

    <script>
        $(document).ready(
            $("#para").click(function() {
                alert("you clicked the paragraph");
            })
        );
    </script>
</head>
<body>
    <p id="para">Some paragraph</p>

 @Scripts.Render("~/bundles/jquery")
 @RenderSection("scripts", required: false)
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T18:20:50.847

You have included jquery twice. Once in the head section and once at the end. Try like this:

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <p id="para">Some paragraph</p>

    @Scripts.Render("~/bundles/jquery")
    <script type="text/javascript">
        $("#para").click(function() {
            alert("you clicked the paragraph");
        });
    </script>
    @RenderSection("scripts", required: false)
</body>
</html> 
```

The `@Scripts.Render("~/bundles/jquery")` call uses ASP.NET MVC 4 new bundling mechanism which is including jQuery. Look at your `~/App_Start/BundleConfig.cs` file to see how this is configured. Also notice how in my example I have removed the `document.ready` call because it is no longer necessary since I have placed the script at the end of the document.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T18:20:36.287

```
$(document).ready(
        $("#para").click(function() {
            alert("you clicked the paragraph");
        })
    ); 
```

Should be:

```
$(document).ready(function(){
//                ^^^^^^^^^^^  <<<<--------------------------------
    $("#para").click(function() {
        alert("you clicked the paragraph");
    });
}); 
```

# .net - Code First Enums not added to Database

> ID：15721858
> 
> 赞同：0
> 
> 时间：2013-03-30T18:19:05.730
> 
> 标签：.net, entity-framework, visual-studio-2012, entity-framework-5

I have created .NET4.0 application and using Entity Framework v5.0 with it. Then I read that enums could not be mapped with .NET4.0, it should be .NET 4.5

Then I changed all projects' targeting framework to .NET 4.5 but it doesnt work either, until I created newly .NET 4.5 projects and copying files from .NET 4.0 version.

So is setting targeting framework doesnt work or should I do an extra step if I came across similar situation again ?

*Note: I am using VS 2012*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:54:19.247

You need to update EF package once you change target framework to .NET 4.5 because EF 5.0 for .NET 4.0 is different (it is actually EF 4.4) than EF 5.0 for .NET 4.5.

# c - C 指向字符的指针

> ID：15721859
> 
> 赞同：0
> 
> 时间：2013-03-30T18:19:10.590
> 
> 标签：c, pointers, char

我对 C 指针有误解：

```
void putString(char* StringPtr, int length){
  for(int i=0; i< length; i++)       
  {                   
    USART_send(*StringPtr);      
    StringPtr++;
  }
}

void parseMsg(char* in_string, int str_len) {
  int i = 0;
  putString(in_string, str_len);
  for(i = 0; i <= str_len; i++) 
  {
    char* temp_pt = &in_string[i];
    putString(temp_pt, 1);
  }
}

int main(int arg) {
  char* myChar = "abcdefg";
  parseMsg(myChar, 7);
} 
```

**编辑：** 在`parseMsg`，当我打电话给第一个时`putString`，它工作得很好。当我尝试循环单独打印每一个时，它没有。`USART_send`只是将字符吐到我的终端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:21:09.053

那是因为`test[i]`is 属于 type`char`而不是 type `char *`。

您可以分配给 char：

```
 char temp = test[i]; 
```

或获取其地址：

```
 char *temp = &test[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:29:30.670

你的线路`char* temp = test[i];`错了。它创建一个名为 temp 的指针，并使其指向`255`计算机内存中字节 0 和字节之间的某个地址。这几乎可以肯定是一件非常糟糕的事情。您可能指的是 char `temp = test[i];`，它创建了一个名为 temp 的 char 并为其分配`test[i]`. 另请注意，`test[2]`这也是无效的，因为`myChar`它是一个只有 1 个字符加上`null`终止符的字符串。

# matlab - 在运行时修改 simulink 模型

> ID：15721863
> 
> 赞同：0
> 
> 时间：2013-03-30T18:19:32.650
> 
> 标签：matlab, simulink

我是 simulink 新手，我想知道是否可以在运行时修改 simulink 模型。我正在使用 goto 和 from 块构建家庭交换数据的模型，我可以在运行时更改 goto 标签值，还是可以在运行时向总线创建器添加新输入。

我会很感激任何重播，这是紧急的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:27:43.993

不，您不能在模拟运行时更改模型的拓扑。您只能更改参数和信号数据。

（请注意，GoTo 和 From 块是“虚拟的”——它们实际上只是为了图形方便，这样您就不必画一条可能会使模型混乱的线。在引擎盖下，这些块就像它们通过一条线。）

您需要弄清楚如何以另一种方式进行数据传输。

# ruby-on-rails - Ruby on Rails + Filemaker Database

> ID：15721868
> 
> 赞同：0
> 
> 时间：2013-03-30T18:20:34.313
> 
> 标签：ruby-on-rails, database, filemaker

I want to use RoR to interact with data stored in a Filemaker Database. I've looked at RFM and tried reading trough the documentation, but it's really elaborate and demands a certain knowledge about Filemaker (which I do not possess). Could anyone explain the basics of a FM database, and how RFM (ginjo) works? If possible, a reference app would be perfect.

Many thanks! T.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:17:09.417

I'm aware that my question was rather lacking, and kinda bad. After some time invested in it, I've come up with a solution. If anyone sees this and has a similar question, don't hesitate to PM or send me an email.

Thanks!

# android - 使用 AsyncTask 加载数据

> ID：15721873
> 
> 赞同：0
> 
> 时间：2013-03-30T18:21:04.773
> 
> 标签：android, android-asynctask, linked-list

我需要你的帮助，拜托。A 必须读取 XML 文件并将此数据加载到 ListView 中。使用 AsyncTask 执行此操作的最佳方法是什么？

```
private class ListaEventosTask extends AsyncTask<Void, Void, LinkedList<Map<String,?>>> {
    @Override
    protected LinkedList<Map<String,?>> doInBackground(Void... params) {

        xml = AuxXMLfunctions.getXML("http://xxx.com/list.php");
        doc = AuxXMLfunctions.XMLfromString(xml);
        List<Map<String,?>> listaItens = new LinkedList<Map<String,?>>(); 

        NodeList nodes = doc.getElementsByTagName("evento");

        for (int i = 0; i < nodes.getLength(); i++) {    
            Element e = (Element)nodes.item(i);
                listaItens.add(createItem(AuxXMLfunctions.getValue(e, "nome"),AuxXMLfunctions.getValue(e, "qtde_atividades") + " atividades programadas",AuxXMLfunctions.getValue(e, "codigo"),"0"));               
        }   

        return (LinkedList<Map<String, ?>>) listaItens;
    } 
```

这是 onPostExecute 代码：

```
 @Override 
    protected void onPostExecute(LinkedList<Map<String,?>> result) {

        adapter.addSection("Selecione o evento", new SimpleAdapter(ListViewEventos.this, result, R.layout.lista, new String[] {ITEM_TITLE, ITEM_CAPTION}, new int[] { R.id.list_complex_title, R.id.list_complex_caption}));
        list.setAdapter(adapter);
        ListViewEventos.this.setContentView(list);

        super.onPostExecute(result);

    } 
```

所以现在，我有以下例外：

```
03-30 18:33:21.889: E/AndroidRuntime(605): Uncaught handler: thread main exiting due to uncaught exception
03-30 18:33:21.909: I/Teste(605): Evento não encontrado
03-30 18:33:21.909: E/AndroidRuntime(605): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{br.com.lwu.eventus/br.com.lwu.eventus.ListViewEventos}: java.lang.NullPointerException
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.os.Looper.loop(Looper.java:123)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.ActivityThread.main(ActivityThread.java:4363)
03-30 18:33:21.909: E/AndroidRuntime(605):  at java.lang.reflect.Method.invokeNative(Native Method)
03-30 18:33:21.909: E/AndroidRuntime(605):  at java.lang.reflect.Method.invoke(Method.java:521)
03-30 18:33:21.909: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-30 18:33:21.909: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-30 18:33:21.909: E/AndroidRuntime(605):  at dalvik.system.NativeStart.main(Native Method)
03-30 18:33:21.909: E/AndroidRuntime(605): Caused by: java.lang.NullPointerException
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.view.View.<init>(View.java:1777)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.view.View.<init>(View.java:1821)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.view.ViewGroup.<init>(ViewGroup.java:290)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.widget.AdapterView.<init>(AdapterView.java:228)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.widget.AbsListView.<init>(AbsListView.java:508)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.widget.ListView.<init>(ListView.java:152)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.widget.ListView.<init>(ListView.java:148)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.widget.ListView.<init>(ListView.java:144)
03-30 18:33:21.909: E/AndroidRuntime(605):  at br.com.lwu.eventus.ListViewEventos.<init>(ListViewEventos.java:54)
03-30 18:33:21.909: E/AndroidRuntime(605):  at java.lang.Class.newInstanceImpl(Native Method)
03-30 18:33:21.909: E/AndroidRuntime(605):  at java.lang.Class.newInstance(Class.java:1479)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-30 18:33:21.909: E/AndroidRuntime(605):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
03-30 18:33:21.909: E/AndroidRuntime(605):  ... 11 more 
```

下面是ListViewEventos的部分代码：

```
public class ListViewEventos extends Activity {

public final static String ITEM_TITLE   = "title";
public final static String ITEM_CAPTION = "caption";
public final static String ITEM_ID      = "id";
public final static String ITEM_LISTA   = "lista";

public Map<String,?> createItem(String title, String caption, String id, String lista) {
    Map<String,String> item = new HashMap<String,String>();
    item.put(ITEM_TITLE, title);
    item.put(ITEM_CAPTION, caption);        
    item.put(ITEM_ID, id);
    item.put(ITEM_LISTA, lista);

    return item;
}

String xml;
Document doc;
NodeList nodes;
String codEvento, nomeEvento;

AuxDAO         myDAO           = new AuxDAO(this);
AuxUtilitarios meusUtilitarios = new AuxUtilitarios(this);
ListView       list            = new ListView(this);
BaseAdapterListas adapter      = new BaseAdapterListas(this);

private ProgressDialog progressDialog;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    list.setBackgroundColor(Color.WHITE);
    list.setCacheColorHint(Color.WHITE);

    list.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, final int position, long id) {

            @SuppressWarnings("unchecked")
            HashMap<String, String> objSelecionado = (HashMap<String, String>) list.getItemAtPosition(position);

            // 1 - Sincroniza a programação do evento selecionado:
            importaProgramacao(objSelecionado.get("id"));

            // 2 - Armazena o código da Unidade e o seu nome para serem passados para o Menu Principal:
            codEvento  = objSelecionado.get("id");
            nomeEvento = objSelecionado.get("title");
        }

    });            

    // Verifica se existe rede disponível:
    if (meusUtilitarios.haveInternet(this)) {

        try {
            ListaEventosTask asyncTask = new ListaEventosTask();
            asyncTask.execute(); 

        } catch (Exception e) {
            Log.i("Teste", "Erro: " + e);
        }

    }
    else {
        Toast.makeText(ListViewEventos.this, "Sem conexão à Internet", Toast.LENGTH_LONG).show();
        finish();
    }                       
}

private class ListaEventosTask extends AsyncTask<Void, Void, LinkedList<Map<String,?>>> {
    @Override
    protected LinkedList<Map<String,?>> doInBackground(Void... params) {

        xml = AuxXMLfunctions.getXML("http://kanegae.com.br/eventus/api/1.0/eventos.php");
        doc = AuxXMLfunctions.XMLfromString(xml);
        List<Map<String,?>> listaItens = new LinkedList<Map<String,?>>(); 

        NodeList nodes = doc.getElementsByTagName("evento");

        for (int i = 0; i < nodes.getLength(); i++) {    
            Element e = (Element)nodes.item(i);
                listaItens.add(createItem(AuxXMLfunctions.getValue(e, "nome"),AuxXMLfunctions.getValue(e, "qtde_atividades") + " atividades programadas",AuxXMLfunctions.getValue(e, "codigo"),"0"));               
        }   

        return (LinkedList<Map<String, ?>>) listaItens;
    }       

    @Override 
    protected void onPostExecute(LinkedList<Map<String,?>> result) {

        adapter.addSection("Selecione o evento", new SimpleAdapter(ListViewEventos.this, result, R.layout.lista, new String[] {ITEM_TITLE, ITEM_CAPTION}, new int[] { R.id.list_complex_title, R.id.list_complex_caption}));
        list.setAdapter(adapter);
        ListViewEventos.this.setContentView(list);

        super.onPostExecute(result);

    }       

}   

.
.
.
.   

} 
```

解决。但是，我不知道这是否是最好的方法。见下面的代码：

```
public void onCreate(Bundle icicle) {
        super.onCreate(icicle);     

        myDAO           = new AuxDAO(this);
        meusUtilitarios = new AuxUtilitarios(this);     
        adapter         = new BaseAdapterListas(this);          
        list            = new ListView(this);

        list.setBackgroundColor(Color.WHITE);
        list.setCacheColorHint(Color.WHITE);

        list.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, final int position, long id) {

                @SuppressWarnings("unchecked")
                HashMap<String, String> objSelecionado = (HashMap<String, String>) list.getItemAtPosition(position);

                // 1 - Sincroniza a programação do evento selecionado:
                importaProgramacao(objSelecionado.get("id"));

                // 2 - Armazena o código da Unidade e o seu nome para serem passados para o Menu Principal:
                codEvento  = objSelecionado.get("id");
                nomeEvento = objSelecionado.get("title");
            }

        });            

        // Verifica se existe rede disponível:
        if (meusUtilitarios.haveInternet(this)) {

            ListaEventosTask asyncTask = new ListaEventosTask();
            asyncTask.execute();                
        }
        else {
            Toast.makeText(ListViewEventos.this, "Sem conexão à Internet", Toast.LENGTH_LONG).show();
            finish();
        }                       
    }

    private class ListaEventosTask extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... params) {

            xml = AuxXMLfunctions.getXML("http://kanegae.com.br/eventus/api/1.0/eventos.php");
            doc = AuxXMLfunctions.XMLfromString(xml);
            List<Map<String,?>> listaItens = new LinkedList<Map<String,?>>(); 

            NodeList nodes = doc.getElementsByTagName("evento");

            for (int i = 0; i < nodes.getLength(); i++) {    
                Element e = (Element)nodes.item(i);
                    listaItens.add(createItem(AuxXMLfunctions.getValue(e, "nome"),AuxXMLfunctions.getValue(e, "qtde_atividades") + " atividades programadas",AuxXMLfunctions.getValue(e, "codigo"),"0"));               
            }

            adapter.addSection("Selecione o evento", new SimpleAdapter(ListViewEventos.this, listaItens, R.layout.lista, new String[] {ITEM_TITLE, ITEM_CAPTION}, new int[] { R.id.list_complex_title, R.id.list_complex_caption}));

            return null;
        }       

        @Override 
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);

            list.setAdapter(adapter);       
            ListViewEventos.this.setContentView(list);          
        }       

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:04:47.237

目前，在从布局访问视图之前，您不需要`setContentView`为当前 Activity 设置布局。

第二个问题，您将需要`ListView`使用`findViewById`而不是创建调用默认构造函数的 ListView 类的实例来初始化实例。

```
public class ListViewEventos extends ListActivity {
//...your code here...
AuxDAO myDAO;
AuxUtilitarios meusUtilitarios;
ListView list;
BaseAdapterListas adapter;

private ProgressDialog progressDialog;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
// set Activity layout here

   myDAO= new AuxDAO(this);
   meusUtilitarios = new AuxUtilitarios(this);
   list =this.getListView();
   adapter= new BaseAdapterListas(this);
//....your code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:48:53.063

解决。但是，我不知道这是否是最好的方法。见下面的代码：

public void onCreate(Bundle icicle) { super.onCreate(icicle);

```
 myDAO           = new AuxDAO(this);
    meusUtilitarios = new AuxUtilitarios(this);     
    adapter         = new BaseAdapterListas(this);          
    list            = new ListView(this);

    list.setBackgroundColor(Color.WHITE);
    list.setCacheColorHint(Color.WHITE);

    list.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, final int position, long id) {

            @SuppressWarnings("unchecked")
            HashMap<String, String> objSelecionado = (HashMap<String, String>) list.getItemAtPosition(position);

            // 1 - Sincroniza a programação do evento selecionado:
            importaProgramacao(objSelecionado.get("id"));

            // 2 - Armazena o código da Unidade e o seu nome para serem passados para o Menu Principal:
            codEvento  = objSelecionado.get("id");
            nomeEvento = objSelecionado.get("title");
        }

    });            

    // Verifica se existe rede disponível:
    if (meusUtilitarios.haveInternet(this)) {

        ListaEventosTask asyncTask = new ListaEventosTask();
        asyncTask.execute();                
    }
    else {
        Toast.makeText(ListViewEventos.this, "Sem conexão à Internet", Toast.LENGTH_LONG).show();
        finish();
    }                       
}

private class ListaEventosTask extends AsyncTask<Void, Void, Void> {
    @Override
    protected Void doInBackground(Void... params) {

        xml = AuxXMLfunctions.getXML("http://kanegae.com.br/eventus/api/1.0/eventos.php");
        doc = AuxXMLfunctions.XMLfromString(xml);
        List<Map<String,?>> listaItens = new LinkedList<Map<String,?>>(); 

        NodeList nodes = doc.getElementsByTagName("evento");

        for (int i = 0; i < nodes.getLength(); i++) {    
            Element e = (Element)nodes.item(i);
                listaItens.add(createItem(AuxXMLfunctions.getValue(e, "nome"),AuxXMLfunctions.getValue(e, "qtde_atividades") + " atividades programadas",AuxXMLfunctions.getValue(e, "codigo"),"0"));               
        }

        adapter.addSection("Selecione o evento", new SimpleAdapter(ListViewEventos.this, listaItens, R.layout.lista, new String[] {ITEM_TITLE, ITEM_CAPTION}, new int[] { R.id.list_complex_title, R.id.list_complex_caption}));

        return null;
    }       

    @Override 
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        list.setAdapter(adapter);       
        ListViewEventos.this.setContentView(list);          
    }       

} 
```

# java - 按下通知时重新创建活动 - 如何？

> ID：15721874
> 
> 赞同：0
> 
> 时间：2013-03-30T18:21:07.900
> 
> 标签：java, android

我有一个可点击的通知，点击后会打开我的应用程序。但是，旧的活动没有被删除，所以，当我关闭应用程序时，以前的活动有相同的......希望你理解。

那么，如何删除旧活动？下面的代码处于服务状态。我需要销毁主要活动。

```
void sendNotif() {
        Intent in = new Intent(this, MainActivity.class);
        PendingIntent pin = PendingIntent.getActivity(this, 0, in, 0);
        Notification notif = new Notification.Builder(this)
         .setContentTitle("App launched")
         .setContentText("Press to open app")
         .setSmallIcon(R.drawable.ic_launcher)
         .setContentIntent(pin)
         .build();            
        notif.flags |= Notification.FLAG_NO_CLEAR;
        nm.notify(1, notif);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-11-09T08:09:10.200

科特林：

```
 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK or Intent.FLAG_ACTIVITY_NEW_TASK)

    val pendingIntent = PendingIntent.getActivity(applicationContext, 0,
            intent, PendingIntent.FLAG_CANCEL_CURRENT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:56:21.583

当您像这样创建 PendingIntent 时，为什么不向您的 Intent 添加一个标志：

```
Intent in = new Intent(this,  getClass()).addFlags(Intent.FLAG_CANCEL_CURRENT));
PendingIntent pin = PendingIntent.getActivity(this, 0, in, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:24:10.500

尝试将这些标志添加到您的意图中。

```
in.setFlags(FLAG_ACTIVITY_CLEAR_TASK | FLAG_ACTIVITY_NEW_TASK); 
```

请参阅[此](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)进行解释。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-30T18:23:22.140

```
onPause()
{
    MainActivity.this.finish();
} 
```

# cocoa - Writing data from multiple NSTextView element into a single file

> ID：15721882
> 
> 赞同：1
> 
> 时间：2013-03-30T18:21:30.073
> 
> 标签：cocoa, file, nsdata, nstextview

I have a simple application with 4 NSTextView element. I would like to be able to write a content of these views into a single file. What I am doing write know I am getting the NSData out of each of the elements using: `dataFromRange`, then I concatenate the data and write to a file.

There is however a problem. Each set of NSData I get contains a full file structure; e.g. if I use `NSHTMLTextDocumentType` in `dataFromRange`, in the output file I am getting four HTML files from to .

How can I avoid that? Is there a common solution for different file types.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:25:02.770

Prompted by Anoop Vaidya's answer I found solution. What I am doing is: -for my need I need to start with extra text, here "HEADER"

```
[data [[NSAttributedString alloc] initWithString:@"HEADER"]] mutableCopy]; 
```

-next I append the NSAttributedText from each NSTextView like that

```
[data insertAttributedString:[textView1 textStorage] atIndex:[data length]]; 
```

-finally, I write the combined text to a file using format of choice

```
[[data dataFromRange:range documentAttributes:dict error:error] writeToFile:path atomically:true]; 
```

# asp.net - Asp.net static object appears sometimes as non global

> ID：15721883
> 
> 赞同：1
> 
> 时间：2013-03-30T18:21:31.493
> 
> 标签：asp.net

I have an android application as client and ASP.Net + ADO.Net hosted on GoDaddy server. The asp.net has static data structure which stores (among other) the android locations, this data structure is persist also to SQL server 2008 data base. each time the android client change position it send its location to the server which update the data structure and data base. each time the applicaton start the data structure is filled according to the persist data from the data base.

The Problems : altough the data structure is static thus should be global it looks like sometimes there are more then one instances of this static data structure.

Is anyone aware of this issue ? How can i prevent this from hapening ?

Nathan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:43:16.400

> This object is has actually a dictionary with name as key and info as value. This object is updated according to android client which access the asp.net via HTTP thorugh aspx Page_Load : HttpContext.Current.Application.Lock() .

The first error is that you use that kind of lock and not the correct one.

The [`Application.Lock()` and `Application.Unlock()`](http://msdn.microsoft.com/en-us/library/ms525184(v=vs.90).aspx) are designed as lock mechanism only for [the Application variables](https://stackoverflow.com/questions/10960695/using-static-variables-instead-of-application-state-in-asp-net/10964038#10964038).

To correct lock your static Dictionary you need to use the `lock(){}` as:

```
private static readonly object syncLock = new object();    
public static Dictionary<int, int> DictMem = new Dictionary<int, int>();

... inside some function....
lock (syncLock)
{
    // actions with your dictionary
    DictMem[2]=3;
} 
```

Also I like to tell you that the static is not guaranty that you have only one on your program. If the provider use web garden you have more than one, and when the pool recycles then you loose them.

# c# - 继承的控件不在表单设计器生成的代码中生成代码

> ID：15721888
> 
> 赞同：1
> 
> 时间：2013-03-30T18:22:08.167
> 
> 标签：c#, winforms

我正在尝试继承 DevExpress PictureEdit（但是，我认为这个问题不是 DevExpress 特有的）。我添加了一些属性。

```
public class RepositoryItemFotoEdit:RepositoryItemPictureEdit
{
    private Size _imageSize;
    public Size ImageSize
    { 
        get
        {
            return _imageSize;
        } 
        set 
        { 
            _imageSize = value;
            OnPropertiesChanged();
        }
    }

    [DefaultValue(InterpolationMode.HighQualityBicubic)]
    public new InterpolationMode PictureInterpolationMode
    {
        get { return base.PictureInterpolationMode; }
        set { base.PictureInterpolationMode = value; }
    }

    [DefaultValue(PictureSizeMode.Zoom)]
    public new PictureSizeMode SizeMode
    {
        get { return base.SizeMode; }
        set { base.SizeMode = value; }
    }        

    public RepositoryItemFotoEdit()
    {
        PictureInterpolationMode = InterpolationMode.HighQualityBicubic;
        SizeMode = PictureSizeMode.Zoom;            
    }
}

public sealed class FotoEdit : PictureEdit
{
    private FotoMenu _menu;

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (_menu != null)
                _menu.Dispose();
        }
        base.Dispose(disposing);
    }

    public override Image Image
    {
        get
        {
             return base.Image;
        }
        set
        {
            if(Properties.ImageSize.Width == 0 || Properties.ImageSize.Height == 0 || value == null)
                base.Image = value;
            else
            {
                var heightProp = (double) Properties.ImageSize.Height/value.Height;
                var widthProp = (double) Properties.ImageSize.Width/value.Width;
                var prop = heightProp < widthProp ? heightProp : widthProp;

                base.Image = ImageHelper.ResizeImage(value, (int)(prop*value.Width), (int)(prop*value.Height));
            }
        }
    }

    public new RepositoryItemFotoEdit Properties
    {
        get { return base.Properties as RepositoryItemFotoEdit; }
    }

    protected override PictureMenu Menu
    {
        get { return _menu ?? (_menu = new FotoMenu(this)); }
    }

    protected override EditorClassInfo EditorClassInfo
    {
        get
        {
            var beci = base.EditorClassInfo;
            var eci = new EditorClassInfo("FotoEdit", typeof (FotoEdit), typeof (RepositoryItemFotoEdit),
                                          beci.ViewInfoType, beci.Painter, beci.DesignTimeVisible);
            return eci;
        }
    }
} 
```

属性`ImageSize`出现在 PropertyEditor 上。

![在此处输入图像描述](../Images/055da8479dd49f4b388c3d5ce3499923.png).

但是，如果我将它更改为某个值（例如 150；150），它不会在表单设计器生成的代码中生成代码。

请注意，这`ImageSize`是内部`Properties`属性。

```
// 
// fotoEdit1
// 
this.fotoEdit1.Cursor = System.Windows.Forms.Cursors.Default;
this.fotoEdit1.Location = new System.Drawing.Point(583, 370);
this.fotoEdit1.Name = "fotoEdit1";
this.fotoEdit1.Size = new System.Drawing.Size(150, 150);
this.fotoEdit1.TabIndex = 18; 
```

这将导致`ImageSize`值恢复为 0;0。如何解决这个问题呢？

**编辑 ：**

我试图按照某人的建议添加`[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]`到财产（我忘记了他的名字，他删除了他的答案）。`Properties`这导致属性内`Properties`的属性出现在设计器生成的代码中，但那些被覆盖的代码除外。

![在此处输入图像描述](../Images/a8358665c75fec9583faaba12daaa00e.png)

我的设计器生成的代码如下所示：

```
 // 
        // fotoEdit1
        // 
        this.fotoEdit1.Cursor = System.Windows.Forms.Cursors.Default;
        this.fotoEdit1.Location = new System.Drawing.Point(583, 370);
        this.fotoEdit1.Name = "fotoEdit1";
        this.fotoEdit1.Properties.Padding = new System.Windows.Forms.Padding(5, 2, 0, 0);
        this.fotoEdit1.Size = new System.Drawing.Size(150, 150);
        this.fotoEdit1.TabIndex = 18; 
```

注意`Properties.Padding`出现，但`Properties.ImageSize`不出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:16:26.430

`[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]`我只是通过添加到`Properties`属性和属性`[DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]`来解决问题`Properties.ImageSize`。

# java - 获取单词频率的更有效方法

> ID：15721890
> 
> 赞同：1
> 
> 时间：2013-03-30T18:22:19.407
> 
> 标签：java, optimization

我想通过单词的开头来计算 ArrayList 中每个单词的频率。例如 [cat, cog, mouse] 表示有 2 个以**c**开头的单词和 1 个以**m**开头的单词。**我的代码工作正常，但字母表中有 26 个字母，如果**s需要更多。有没有其他方法可以做到这一点？

```
public static void  countAlphabeticalWords(ArrayList<String> arrayList) throws IOException
{
    int counta =0, countb=0, countc=0, countd=0,counte=0;
    String word = "";
    for(int i = 0; i<arrayList.size();i++)
    {

        word = arrayList.get(i);

          if (word.charAt(0) == 'a' || word.charAt(0) == 'A'){ counta++;}
          if (word.charAt(0) == 'b' || word.charAt(0) == 'B'){ countb++;}    

    }
    System.out.println("The number of words begining with A are: " + counta);
    System.out.println("The number of words begining with B are: " + countb);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T18:33:33.130

## 使用地图

```
public static void  countAlphabeticalWords(List<String> arrayList) throws IOException {
  Map<Character,Integer> counts = new HashMap<Character,Integer>();
  String word = "";

  for(String word : list) {
    Character c = Character.toUpperCase(word.charAt(0));
    if (counts.containsKey(c)) {
      counts.put(c, counts.get(c) + 1);
    }
    else {
      counts.put(c, 1);
    }
  }

  for (Map.Entry<Character, Integer> entry : counts.entrySet()) {
    System.out.println("The number of words begining with " + entry.getKey() + " are: " + entry.getValue());
  } 
```

## 或者使用 Map 和 AtomicInteger（根据 Jarrod Roberson）

```
public static void  countAlphabeticalWords(List<String> arrayList) throws IOException {
  Map<Character,AtomicInteger> counts = new HashMap<Character,AtomicInteger>();
  String word = "";

  for(String word : list) {
    Character c = Character.toUpperCase(word.charAt(0));
    if (counts.containsKey(c)) {
      counts.get(c).incrementAndGet();
    }
    else {
      counts.put(c, new AtomicInteger(1));
    }
  }

  for (Map.Entry<Character, AtomicInteger> entry : counts.entrySet()) {
    System.out.println("The number of words begining with " + entry.getKey() + " are: " + entry.getValue());
  } 
```

## 最佳实践

永远不要`list.get(i)`，`for(element : list)`改用。并且永远不要`ArrayList`在签名中使用接口，`List`而是使用接口，以便您可以更改实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T18:33:17.427

这个怎么样？考虑到单词仅以 开头`[a-zA-Z]`：

```
public static int[] getCount(List<String> arrayList) {
    int[] data = new int[26];
    final int a = (int) 'a';

    for(String s : arrayList) {
        data[((int) Character.toLowerCase(s.charAt(0))) - a]++;
    }

    return data;
} 
```

**编辑：**

**只是出于好奇**，我做了一个非常简单的测试，将我的方法和 Steph 的方法与 map 进行比较。列出 236 个项目，10000000 次迭代（不打印结果）：我的代码花费了大约 10000 毫秒，而斯蒂芬花费了大约 65000 毫秒。

测试： http: [//pastebin.com/HNBgKFRk](http://pastebin.com/HNBgKFRk)

资料： http: [//pastebin.com/UhCtapZZ](http://pastebin.com/UhCtapZZ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:33:33.187

现在，每个字符都可以转换为整数，表示 ASCII 十进制。比如`(int)'a'`是97。`'z'`的ASCII十进制是122。http [://www.asciitable.com/](http://www.asciitable.com/)

您可以为字符创建查找表：

`int characters = new int[128]`

然后在你的算法循环中使用 ASCII 十进制作为索引并增加值：

```
word = arrayList.get(i);
characters[word.charAt(0)]++; 
```

最后，您可以打印字符的出现：

```
for (int i = 97; i<=122; i++){
  System.out.println(String.format("The number of words beginning with %s are: %d", (char)i, characters[i]));
} 
```

# c++ - c++ 类是从特定类派生的吗？

> ID：15721893
> 
> 赞同：2
> 
> 时间：2013-03-30T18:22:37.907
> 
> 标签：c++, derived

这可能是我想要实现的目标吗？这就是问题：

```
class Content{};

class Content1 : public Content{};
class Content1_1 : public Content1{};
class Content1_2 : public Content1{};

class Content2 : public Content{};
class Content2_1 : public Content2{};
class Content2_2 : public Content2{};

class Container{
public:
    Content* c;
}; 
```

是否可以确定`Container`类的指针指向的对象`Content1`或派生自的类的对象`Content1`？

谢谢。

**编辑：**

如果我在类中查找指针的`container`类型，它被视为一种`content`类型，尽管它实际上可能是 a `content1`or`content2`类型，因此 dynamic_cast 不起作用。

```
class content{};
class content1 : public content{};
class content2 : public content{};

class container{
public:
    content* c;
};

int main(void)
{
    container* x = new container;
    x->c = new content2;

    if( dynamic_cast<content1*>((content1*)x->c) == NULL){
        //This doesn't fail, eventhough 'content1' and 'content2' shouldn't be compatible.
        //This means that every class, derived from 'content' will be treated as 'content1' when using dynamic_cast.
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:26:01.873

如果你的类型是多态的（即如果它们至少有一个`virtual`函数），你可以使用`dynamic_cast<>`. 如果指向的对象实际上不是指定类或其派生类的实例，则结果`dynamic_cast<>`将为空指针（即`nullptr`，对于 C++11，对于 C++03）：`NULL`

```
Container cont;
Content1* pContent1 = dynamic_cast<Content1*>(cont.c);
if (pContent1 != nullptr)
{
     // cont.c points to an instance of Content1 
     // or a class derived from Content1
} 
```

一种常见的做法是使基类的*析构函数*成为虚拟的，以便从基类派生的类的对象可以`delete`通过基类指针进行 d（如果析构函数不是`virtual`，则尝试这样做会导致未定义的行为）：

```
class Content //Abstract.
{
public:
    virtual ~Content() { }
//  ^^^^^^^
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:26:52.467

是的，使用`dynamic_cast`- [http://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)

它将为您提供 RTTI - 运行时类型信息。

```
Content1 * p = dynamic_cast<Content1 *>(c); 
```

if p is non-NULL, then c points to an object which is Content1 or derived from Content1. However, your class heirarchy needs to be polymorphic. Since your class `Content` is Abstract (I am assuming you have a pure virtual function in Content), your whole heirarchy automatically is polymorphic.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:42:49.753

If you have to know the exact runtime type of a polymorphic class, you should rethink your design. Usually it is better to either keep objects of different types in different containers (additionally or, instead of one central container) or add a virtual function to each of the derived classes which performs the action where you would have to discriminate between the types.

There is an entry in the C++ FAQ which might help you: [I have a heterogeneous list of objects, and my code needs to do class-specific things to the objects. Seems like this ought to use dynamic binding but can't figure it out. What should I do?](http://www.parashift.com/c++-faq/inversion.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T18:53:47.977

If you want to see if `Content*` points to an object of a class derived from `Content2` class just cast it with `dynamic_cast` and see.

This works:

```
#include <iostream>
#include <typeinfo>

using namespace std;

class Content{public: virtual ~Content(){}};

class Content1 : public Content{public: virtual ~Content1(){}};
class Content1_1 : public Content1{public: virtual ~Content1_1(){}};
class Content1_2 : public Content1{public: virtual ~Content1_2(){}};

class Content2 : public Content{public: virtual ~Content2(){}};
class Content2_1 : public Content2{public: virtual ~Content2_1(){}};
class Content2_2 : public Content2{public: virtual ~Content2_2(){}};

class Container{
public:
    Content* c;
};

int main()
{
    Content* cnt=new Content2_1;
    if(dynamic_cast<Content2_1*>(cnt))
        cout << "True" << endl;
    return 0;
} 
```

# php - Suggestions for saving cron based scheduled data

> ID：15721894
> 
> 赞同：-3
> 
> 时间：2013-03-30T18:22:42.843
> 
> 标签：php, mysql

I have an algorithm which requires scheduled task that runs a script on a regular basis (every minute). I want to store this data and access those values ranging from last hour to last 24 hrs.

I've looked into saving an array of data to a single mysql field. I know serialize() and unserialize() functions will do.

Can you suggest any other way to store those cron scheduled task values or will array be sufficient?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:25:26.200

memcache can store for a particualer time. Seeing its basically an array it should do fine.

Set the timeout to (60*60*24=) 86400

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:28:26.050

The solution to this problem is simply to insert the data into a table in MySQL. The table should look something like this:

```
create table MinuteStats as (
    MinuteStatsId int not null auto_increment,
    TimeOfMeasurement datetime,
    Measure1 int,
    Measure2 int,
    CreatedAt TimeStamp default CURRENT_TIMESTAMP
); 
```

Then, every minute, do something like:

```
insert into MinuteStats(TimeOfMeasurement, Measure1, Measure1)
    select <time>, <measure1>, <measure2> 
```

You will then have the data in a nice format for subsequent processing.

# ruby - Ruby - 如何评估两个数字和一个运算符？

> ID：15721897
> 
> 赞同：2
> 
> 时间：2013-03-30T18:22:54.217
> 
> 标签：ruby, eval

在 Ruby 中，如果我设置变量：

```
1.9.3-p327 :002 > a=20;b=5;c="-" 
```

然后我怎么能做“ab c”并让它返回 15

我试过这个

```
class Dummy < Object
  def self.calc(a,b,operation)
    return eval(a,operation,b)
  end
end

1.9.3-p327 :006 > Dummy.calc(a,b,c) 
```

但我明白了

```
TypeError: can't convert Fixnum into String
    from (irb):6:in `eval' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T18:25:18.383

从技术上讲，做你想做的事情的方法是`eval "#{a}#{c}#{b}"`——这会将所有变量插入到一个字符串中。

但是，我不明白您为什么要使用`eval`它。由于`-`它是所有 Numeric 类的一种方法，所以`a.send(c, b)`如果你想这样做，你可以这样做`a - b`。

# html - 如何将jsp页面中的div链接到mysql表

> ID：15721899
> 
> 赞同：0
> 
> 时间：2013-03-30T18:23:01.677
> 
> 标签：html, mysql, jsp, servlets, jsp-tags

我正在构建一个 Java Web 应用程序并遇到问题。我的申请是这样的。

用户将登录到应用程序，在主页中他们将能够看到来自不同用户的查询。登录用户可以评论任何查询。我在 mysql 中为每个查询管理不同的表。当用户对查询发表评论时，应使用包含用户评论的新行更新相应的表。

我网页中的每个用户查询都位于不同的 div 标签中。我如何将这些 div 关联到 mysql 表？

我如何确保在我的代码中，当用户输入查询评论并单击提交时，相应的表应该被更新？

我使用 JSP 和 mysql 作为数据库。

感谢您的评论。

# javascript - 从不同的 .html 文件附加到在 .js 文件中声明的数组

> ID：15721900
> 
> 赞同：1
> 
> 时间：2013-03-30T18:23:19.860
> 
> 标签：javascript, html

我有一个外部 javascript 函数，它只声明一个空数组。我有两个使用这个数组的文件，第一个文件使用 push 方法附加到数组中，第二个文件在数组中搜索并查找添加到数组中的值（如果存在）。我的问题是，每次我尝试搜索数组时，它都是空的，这意味着没有任何东西添加到数组中。

这是我的 .js 文件的内容：

```
 var users = []; 
```

这是我的 .html 文件的 javascript 部分：

```
 <script type="text/javascript" src="array.js"></script>
  <script type="text/javascript">
           var uname = "someone";
           var pword = "something";
           users.push(uname);
           users.push(pword);
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:55:56.970

我建议您命名您的应用程序以避免冲突。以下将有所帮助：

```
//array.js
var myApp = {
    users: [] //This will create a new var users with empty array
};

//JS in the HTML file
<script type="text/javascript" src="array.js"></script>
<script type="text/javascript">
    var uname = "someone";
    var pword = "something";
    if (myApp && myApp.users) {
        myApp.users.push(uname);
        myApp.users.push(pword);
    }
</script> 
```

另外我建议您在 HTML 的顶部加载 array.js，并将内联脚本放在 HTML 的末尾。

# perl - 如何将子例程的参数展平为数组？

> ID：15721906
> 
> 赞同：1
> 
> 时间：2013-03-30T18:24:14.257
> 
> 标签：perl

考虑以下脚本：

```
use strict;
use Data::Dumper;

my @arr=('1A','2A');
my $arr_ref=['1','2'];

sub routine1
{
my @arr=@_;
print Dumper(\@arr);
}

routine1(@arr,'one_A');

sub routine2
{
my $arr_ref=[@_];
print Dumper($arr_ref);
}

routine2($arr_ref,'one'); 
```

`routine1`正在使用`@arr`，routine2 正在使用`$arr_ref`。

`routine1`打印以下内容：

```
$VAR1 = [
         '1A',
         '2A',
         'one_A'
        ]; 
```

`routine2`打印如下：

```
$VAR1 = [
         [
           '1',
           '2'
         ],
         'one'
        ]; 
```

我想继续使用`@_`and `arr_ref`in`routine2`但想得到以下输出：

```
$VAR1 = [
         '1',
         '2'
         'one'
        ]; 
```

有人可以建议出路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:42:48.687

使用该函数[`ref`](http://p3rl.org/ref)，您可以查看标量是否为引用（如果是，则为哪种类型）。在仅传递数组引用的简单情况下，您可以简单地使用它来展平输入。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Data::Dumper;

sub test {
  my @arr = map { ref() ? @$_ : $_ } @_;
  print Dumper \@arr;
}

test( ['a', 'b'], 1 ); 
```

附带的好处是，如果传递了对另一种类型的引用，则此代码将显示一条消息，因为您尝试将其作为数组进行引用。如果需要处理更多，则需要检查引用类型。这开始迅速增加复杂性。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Data::Dumper;

sub test {
  my @arr = map { 
    my $type = ref;
    if ( ! $type ) {
      $_;
    } elsif ( $type eq 'ARRAY' ) {
      @$_;
    } elsif ( $type eq 'HASH' ) {
      %$_;
    } else {
      ()
    }
  } @_;
  print Dumper \@arr;
}

test( ['a', 'b'], { p => 'q' }, 1 ); 
```

通过为其他引用类型返回一个空列表，我默默地忽略了所有其他引用类型。或者您可能更愿意对其他引用类型强制进行字符串化。

```
...
} else {
  "$_";
}
...
test( ['a','b'], sub{}, bless({},'MyClass'), 1 ); 
```

当然，要使用哪些处理取决于您的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T05:48:05.110

前几天上班写的。

```
sub flatten {
    return map { ref($_) ? flatten(@{$_}) : ($_) } @_;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T22:13:55.217

该程序显示了一个子例程`flatten`，它将扁平化简单数据和数组引用的混合列表，嵌套到任何级别。

```
use strict;
use warnings;

use Data::Dump;

my @arr = qw/ 1A 2A /;
my $arr_ref = [1, 2];

sub flatten;

routine1(@arr, 'one_A');
routine2($arr_ref, 'one');

sub routine1 {
  my @arr=@_;
  dd \@arr;
}

sub routine2 {
  my $arr_ref = [flatten @_];
  dd $arr_ref;
}

sub flatten {
  my $i = 0;
  while ($i < @_) {
    my $item = $_[$i];
    if (ref $item eq 'ARRAY') {
      splice @_, $i, 1, @$item;
    }
    else {
      ++$i;
    }
  }
  @_;
} 
```

**输出**

```
["1A", "2A", "one_A"]
[1, 2, "one"] 
```

# symfony - Symfony2 - Twig - 无法验证文本区域

> ID：15721907
> 
> 赞同：1
> 
> 时间：2013-03-30T18:24:15.540
> 
> 标签：symfony

我在我的 twig 文件中自定义 texarea 字段时遇到问题如果我自定义 textarea，则表单验证不起作用当我自定义 textarea 以外的其他字段并使用 {{form_rest(form)}} 时，验证工作正常。如果我删除表达式 if($form->isvalid()) 持久性工作正常。请帮助我这是我的代码

# 控制器：

```
public function addAction()
{
    $produit = new Produit();  
$formBuilder = $this->createFormBuilder($produit);  
$formBuilder->add('nom','text',array('required'=>false))
                ->add('prix','text')
                ->add('marque','text')
                ->add('description','textarea');
$form = $formBuilder->getForm();
return $this->render('zmsite1Bundle:Produit:add.html.twig', array( 'form' => $form->createView() ));
}

public function createAction()
{  
    $produit = new Produit();       
    $formBuilder = $this->createFormBuilder($produit);       
    $formBuilder->add('nom','text')
                ->add('prix','text')
                ->add('marque','text')
                ->add('description','textarea');       
    $form = $formBuilder->getForm();       
    $request = $this->getRequest();       
    if($request->getMethod() == 'POST'){           
        $form->bind($request);           
        if($form->isValid())
        {
            $em = $this->getDoctrine()->getEntityManager();               
            $em->persist($produit);
            $em->flush();               
            return $this->redirect($this->generateUrl('produit_show',array('id' => $produit->getId())));
        }
        return $this->render("zmsite1Bundle:Produit:add.html.twig",array('form'=>$form->createView()));           
    }
} 
```

# 文件 add.html.twig

```
<form method="post" {{ form_enctype(form) }} action="{{path('produit_create')}}">
  <table>         
      <tr>
          <td>{{form_label(form.nom,"Nom du produit")}}</td>
          <td>{{form_widget(form.nom)}}</td>
          <td>{{form_errors(form.nom)}}</td>
      </tr>
      <tr>
          <td>{{form_label(form.marque,"Marque du produit")}}</td>
          <td>{{form_widget(form.marque)}}</td>
          <td>{{form_errors(form.marque)}}</td>
      </tr>         
      <tr>
          <td>{{form_label(form.prix,"Prix du produit")}}</td>
          <td>{{form_widget(form.prix)}}</td>
          <td>{{form_errors(form.prix)}}</td>
      </tr>      

      <tr>
          <td>{{textarea_label(form.description,"Description du produit")}}</td>
          <td>{{textarea_widget(form.description)}}</td>
          <td>{{textarea_errors(form.description)}}</td>
      </tr>         
  </table>   
<input type="submit" name="Valider" /> 
```

# 实体产品

```
<?php

namespace zm\site1Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
* produit
*
* @ORM\Table()
* @ORM\Entity(repositoryClass="zm\site1Bundle\Entity\produitRepository")
*/
class produit
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="nom", type="string", length=255)
 */
private $nom;

/**
 * @var string
 *
 * @ORM\Column(name="marque", type="string", length=255)
 */
private $marque;

/**
 * @var float
 *
 * @ORM\Column(name="prix", type="decimal")
 */
private $prix;

/**
 * @var string
 *
 * @ORM\Column(name="description", type="text")
 */
private $description;

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set nom
 *
 * @param string $nom
 * @return produit
 */
public function setNom($nom)
{
    $this->nom = $nom;

    return $this;
}

/**
 * Get nom
 *
 * @return string
 */
public function getNom()
{
    return $this->nom;
}

/**
 * Set marque
 *
 * @param string $marque
 * @return produit
 */
public function setMarque($marque)
{
    $this->marque = $marque;

    return $this;
}

/**
 * Get marque
 *
 * @return string
 */
public function getMarque()
{
    return $this->marque;
}

/**
 * Set prix
 *
 * @param float $prix
 * @return produit
 */
public function setPrix($prix)
{
    $this->prix = $prix;

    return $this;
}

/**
 * Get prix
 *
 * @return float
 */
public function getPrix()
{
    return $this->prix;
}

/**
 * Set description
 *
 * @param string $description
 * @return produit
 */
public function setDescription($description)
{
    $this->description = $description;

    return $this;
}

/**
 * Get description
 *
 * @return string
 */
public function getDescription()
{
    return $this->description;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:55:27.310

您的表单可能具有未呈现的 csrf 保护，因此导致表单无法完全验证。`{{ form_rest(form) }}`像以前一样使用（呈现隐藏的 csrf 令牌）。或者在您的表单中将其关闭（我不确定这是否可以在内联表单中）否则它将在您的表单类型中（来自：[http://symfony.com/doc/2.1/book/forms. html#csrf-保护](http://symfony.com/doc/2.1/book/forms.html#csrf-protection)）...

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class'      => 'Acme\TaskBundle\Entity\Task',
        'csrf_protection' => true,
        'csrf_field_name' => '_token',
        // a unique key to help generate the secret token

    ));
} 
```

# c - c程序如何在strcat中创建多个文本文件

> ID：15721912
> 
> 赞同：0
> 
> 时间：2013-03-30T18:24:31.610
> 
> 标签：c, file, file-io, strcat

如何在strcat中创建多个文本文件

就我而言，例如我输入三个名字

./test paul tony john，所以我使用 strcat 添加“.dat”

但我不能设置三个名字是 paul.dat tony.dat john.dat

结果是 paul.dat.dat.dat dat.dat.dat .dat.dat

```
int main(int argc, char *argv[]){

int pid, myid ,cid; 
int num_name;
int i, n, returnpid;
int val;

num_name = argc-1;

for (i =1; i<=num_name; i++) {
       strcat(argv[i],".dat");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:28:52.373

当您调用 strcat() 时，您需要确保为您尝试添加的字符串的第一个参数分配的缓冲区中有足够的空间。

您不能使用 strcat() 将内容直接添加到 argv[] 的元素中。

为两个字符串分配一个足够大的新缓冲区（包括末尾的 nul 字符），strcpy() 将 argv[] 元素放入该缓冲区，然后执行 strcat()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:29:44.103

您不能`".dat"`直接附加到，`argv[i]`因为`argv[i]`分配的大小只能容纳其原始内容。

要了解正在发生的事情，想象一下`argv`是这样的：

```
char buffer[] = "./test\0paul\0tony\0john\0";
char *argv[4] = { &buffer[0], &buffer[7], &buffer[12], &buffer[17] }; 
```

如您所见，如果您在写完某些内容后`"paul"`会覆盖`"tony"`并破坏整个内容，因为它们是在同一个缓冲区中序列化的。

要解决此问题，您必须将每个缓冲区复制`argv[i]`到一个更大的缓冲区，您可以在其中安全地进行修改。例如：

```
int i;
char filename[1024];
for (i = 1; i < argc; ++i) {
    sprintf(filename, "%s.dat", argv[i]);
    // ... do stuff
} 
```

然后，您将拥有一个`filename`包含所需文件名的变量，而不会损坏`argv`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T20:22:26.150

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[]){
    int pid, myid ,cid; 
    int num_name;
    int i, n, returnpid;
    int val;

    num_name = argc-1;

    for (i =1; i<=num_name; i++) {
        char *p;
        p=(char*)malloc(sizeof(char)*(strlen(argv[i])+5));//5= 4(.dat) + 1(EOS)
        sprintf(p, "%s.dat", argv[i]);
        argv[i]=p;
    }
    for(i =1; i<=num_name; i++)
        printf("%s\n", argv[i]);
   return 0;
} 
```

# valgrind - 安装 valgrind，启动时出现致命错误

> ID：15721919
> 
> 赞同：17
> 
> 时间：2013-03-30T18:25:25.463
> 
> 标签：valgrind

我正在安装 Valgrind，但遇到了一些问题。我的平台信息：

```
Linux xx-ThinkPad-X61 3.2.0-39-generic-pae #62-Ubuntu SMP Wed Feb 27 22:25:11 UTC 2013 i686 i686 i386 GNU/Linux 
```

我按照 valgrind 文件夹中 README 文件的安装说明进行操作。./configure -> make -> sudo make install。

看不懂README文件下面的提示，只是忽略了。

```
Important!  Do not move the valgrind installation into a place
different from that specified by --prefix at build time.  This will
cause things to break in subtle ways, mostly when Valgrind handles
fork/exec calls. 
```

输入“valgrind ls -l”后，出现错误：

```
xx@xx-ThinkPad-X61:~/Downloads/valgrind-3.8.1$ valgrind ls -l
==7674== Memcheck, a memory error detector
==7674== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==7674== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==7674== Command: ls -l
==7674== 

valgrind:  Fatal error at startup: a function redirection
valgrind:  which is mandatory for this platform-tool combination
valgrind:  cannot be set up.  Details of the redirection are:
valgrind:  
valgrind:  A must-be-redirected function
valgrind:  whose name matches the pattern:      strlen
valgrind:  in an object with soname matching:   ld-linux.so.2
valgrind:  was not found whilst processing
valgrind:  symbols from the object with soname: ld-linux.so.2
valgrind:  
valgrind:  Possible fixes: (1, short term): install glibc's debuginfo
valgrind:  package on this machine.  (2, longer term): ask the packagers
valgrind:  for your Linux distribution to please in future ship a non-
valgrind:  stripped ld.so (or whatever the dynamic linker .so is called)
valgrind:  that exports the above-named function using the standard
valgrind:  calling conventions for this platform.  The package you need
valgrind:  to install for fix (1) is called
valgrind:  
valgrind:    On Debian, Ubuntu:                 libc6-dbg
valgrind:    On SuSE, openSuSE, Fedora, RHEL:   glibc-debuginfo
valgrind:  
valgrind:  Cannot continue -- exiting now.  Sorry. 
```

有人可以提出一些建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-04-01T14:59:15.840

我也遇到了这个错误，但最终以以下方式解决。

我有 64 位 Ubuntu 14.04，我的可执行文件是 32 位。当我使用 valgrind 运行我的 32 位可执行文件时，我遇到了同样的错误。即使在安装后`libc6-dbg`（使用 command `apt-get install libc6-dbg`），此错误也没有解决。

后来我发现`libc6-dbg`我的机器中存在的任何东西都是 64 位的，而 valgrind 需要 32 位`libc6-dbg`才能运行我的 32 位可执行文件。安装 32 位后`libc6-dbg`（使用命令`apt-get install libc6-dbg:i386`）它开始工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:46:33.367

Valgrind 表示它无法工作，因为它缺少 libc 调试信息，并且它指示必须安装哪个软件包才能解决该问题。在您的情况下（Ubuntu），您必须安装 libc6-dbg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-17T17:14:14.583

```
apt install -y libc6-dbg 
```

它对我有用。（注意：*没有* `:i386`。）
预感自从写了 rashok 的答案以来，Valgrind 可能已经升级到 64 位。

# nosql - NoSQL 用于搜索任意属性值而无需预先指定索引

> ID：15721923
> 
> 赞同：2
> 
> 时间：2013-03-30T18:25:46.900
> 
> 标签：nosql

我花了很多时间研究 NoSQL 系统来做一些听起来应该很常见的事情。我想存储 JSON 数据（或我猜的任何结构化文档），然后搜索任何标签/值对。

挑战在于我不提前知道将包含在数据中的顶级属性，所以我真的想避免必须提前定义每个可能的索引。

例如，我可能有很多联系人，例如

名：鲍勃 姓：史密斯 地址：... 城市：昆西

一些数据集将具有额外的解决方案特定属性，例如：

推特：@blah 性别：男

而其他人可能有：

公司名称：工作的好地方公司城市：波士顿工作年限：7

我希望能够搜索 companycity = Boston AND city = Quincy 以获得一个数据集和 city = Boston AND gender = male，而无需最初定义这些索引。

那么，尽管有一个相当人为的例子，对于这种类型的任意搜索，最好的 nosql 系统是什么？目前我所知道的只是使用全文索引解决方案，例如 Lucene。除非我遗漏了什么，否则 Cassandra、MongoDB、CouchDB 都需要提前编写索引才能获得真正的性能。

一些额外的信息：

每个数据集可能有 100000 条记录。搜索是交互式的。

任何帮助和链接表示赞赏。如果您有实际解决方案的经验，这样做会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T17:35:25.177

[ElasticSearch](http://www.elasticsearch.org/)提供了我的问题的关键要求（感谢@ryan1234 的提示）。它通过简单的 HTTP API 支持快速索引和查询数据。

*   JSON 文档自动索引
*   任意结构化文档模式
*   在运行时定义的搜索
*   无需提前生成索引或查询定义
*   可扩展性（我目前在 2GB 内存实例中有大约 1000 万个文档）

基于在几个项目中使用 ElasticSearch 的几个月经验，我绝对是一名拥护者。

# linux - shell 必须解析 ls -Al 输出并获取最后一个字段（文件或目录名称） 任何解决方案

> ID：15721925
> 
> 赞同：1
> 
> 时间：2013-03-30T18:25:56.977
> 
> 标签：linux, bash, shell, unix, scripting

我必须解析`ls -Al output`并获取文件或目录名称

`ls -Al`输出 ：

```
drwxr-xr-x  12 s162103  studs         12 march 28 2012 personal domain
drwxr-xr-x   2 s162103  studs          3 march 28 22:32 public_html
drwxr-xr-x   7 s162103  studs          8 march 28 13:59 WebApplication1 
```

我应该只使用`ls -Al | <something>`

例如：

```
ls -Al | awk '{print $8}' 
```

但这不起作用，因为`$8`如果目录名称中有空格，则不是名称，它是名称的一部分。也许有一些实用程序可以删除姓氏或删除之前的任何内容？我需要找到任何解决方案。请帮忙！

已编辑：我知道什么 parse ls -Al 是个坏主意，但我应该用上面的构造完全解析它！没有办法使用这样的东西

```
for f in *; do
    somecommand "$f"
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:32:21.963

`ls -Al`如果您只需要文件名，请不要解析。

您可以将所有文件名放在一个数组中：

```
files=( * ) 
```

或者您可以直接遍历文件：

```
for f in *; do
    echo "$f"
done 
```

如果`ls`您需要某些特定内容，请更新您的问题以指定您需要什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T19:42:20.880

这个怎么样，`ls -Al |awk '{$1=$2=$3=$4=$5=$6=$7=$8="";print $0}'` 我知道这是一个便宜的把戏，但既然你不想使用任何东西，除了`ls -Al`我想不出更好的东西......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T18:36:31.747

根据[@squiguy](https://stackoverflow.com/users/1114966/squiguy)对评论的请求，我发表我的评论作为答案：

就这个怎么办？

```
 ls -1A 
```

而不是`l`（L，字母），a `1`（一，数字）。它只会列出文件的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T18:38:23.597

还值得注意的是，`find`可以做你正在寻找的东西：

此目录中的所有内容，相当于`ls`：

```
find . -maxdepth 1 
```

递归，类似于`ls -R`：

```
find . 
```

只有给定目录中的目录：

```
find /path/to/some/dir -maxdepth 1 -type d 
```

`md5sum`每个常规文件：

```
find . -type f -exec md5sum {} \; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T13:55:52.423

希望 awk 适合你：

```
ls -Al | awk 'NR>1{for(i=9;i<NF;i++)printf $i" ";print $i}' 
```

如果您对 sed 感兴趣：

```
ls -Al | sed '1d;s/^\([^ ]* *\)\{8\}//' 
```

# javascript - 在最后一次按下“G”后 2 秒将变量设置为 true

> ID：15721929
> 
> 赞同：1
> 
> 时间：2013-03-30T18:26:47.863
> 
> 标签：javascript, jquery

标题说明了一切，我知道通过 Javascript 解决这个问题的一种非常愚蠢的方法，但我想知道......是否有更聪明的方法？大概有。用户可以随心所欲地按“G”，这会调用函数**g_pressed();** . jquery 中的解决方案也很好。

这是我的解决方案：

```
var allowed = false;
var allowed_key = 0;

function g_pressed(){
    allowed = false;
    allowed_key++;
    setTimeout('allowed_check('+allowed_key+');', 2000);
}

function allowed_check(key){
    if(key==allowed_key){
        allowed = true;
    }
} 
```

* * *

如您所见，它有 12 行长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:28:59.420

您想将 存储`Timeout`在一个变量中，`clear`并在`g_pressed()`触发时存储它：

```
var myTimeout;
function g_pressed(){
    clearTimeout(myTimeout);
    allowed = false;
    allowed_key++;
    myTimeout = setTimeout('allowed_check', 2000, allowed_key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:33:18.053

如果要发送参数，需要做一个匿名函数：

```
var allowed = false;
var allowed_key = 0;
function g_pressed(){
allowed = false;
allowed_key++;
setTimeout(function(allowed_key){
if(key==allowed_key){
    allowed = true;
}, 2000);
} 
```

# javascript - 从外部 JS 调用函数

> ID：15721934
> 
> 赞同：1
> 
> 时间：2013-03-30T18:27:28.117
> 
> 标签：javascript, html, canvas

我正在尝试从外部 .js 文件调用函数，但控制台返回错误并且未调用该函数。如何更正我的代码并能够正确调用该函数。

**这是主要的 .html 文件：**

```
<html>
<head>
    <script type="text/javascript" src="xp.js">
    </script>
    <script type="text/javascript">
        window.onload = xyz.makeShape.Circle();
    </script>
</head>
<body>
    <canvas id="xyz" width="600" height="600"></canvas>
</body>
</html> 
```

**这是 .js 文件：**

```
var xyz = xyz || {};
var canvas = document.getElementById('xyz');
var context = canvas.getContext('2d');
xyz.makeShape = {
    Circle : function() {
        console.log('working');
    }
} 
```

**编辑**

我在控制台中收到 2 个错误：

**错误 1**

```
TypeError: canvas is null
window.onload = xyz.makeShape.Circle; 
```

**错误 2**

```
TypeError: xyz.makeShape is undefined
window.onload = xyz.makeShape.Circle; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T18:33:52.200

Change this:

```
window.onload = xyz.makeShape.Circle(); 
```

to this:

```
window.onload = xyz.makeShape.Circle; 
```

`window.onload` needs to be set to a function reference, not to the results of calling a function.

* * *

You also can't do these two lines from the `<head>` section before the DOM is loaded:

```
var canvas = document.getElementById('xyz');
var context = canvas.getContext('2d'); 
```

You need to execute those after the DOM has been loaded. There are multiple possible strategies for doing that. The easiest for what you already have would be to execute them in your onload handler since you know the DOM is already loaded there. You could also move the script tag that loads your external .js file to the end of the `<body>` section and the DOM will already be ready then when that js file runs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:29:14.250

您只需要`js`使用标签包含文件`<script>`- 在页眉或页脚中。

```
<script type="text/javascript" src="js/yourjsfile.js"></script> 
```

现在您可以从该脚本调用函数，就好像它们在当前文件中一样

**编辑**

如果您确定该文件已被包含（首先确保您的路径正确），那么您需要检查您的控制台是否存在可能由包含文件引起的错误。您提供的代码看起来正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:56:30.383

External js:

```
var xyz = xyz || {};
xyz.makeShape = {
    Circle: function () {
        console.log('working');
    }
} 
```

Internal js:

```
window.onload = function () {
    var canvas = document.getElementById('xyz');
    var context = canvas.getContext('2d');
    xyz.makeShape.Circle();

} 
```

Tested and works

# ruby-on-rails - 在同一视图中处理模型需求？

> ID：15721939
> 
> 赞同：1
> 
> 时间：2013-03-30T18:27:55.193
> 
> 标签：ruby-on-rails, ruby, nested-forms

首先，感谢您花时间阅读并回答我的问题。对此，我真的非常感激。

我不是在寻找关于如何实现以下目标的确切代码，而是更多我应该遵循的方向或路径。

登录的用户可以创建不同的课程。我已经为每门课程添加了一个要求（提供者），并且我希望用户在这样做之前至少有一个提供者关联（为此使用 rolify），但我希望这在同一个视图中（课程＃新的）

我尝试了以下方法：

*   嵌套表单（不起作用，因为我在创建课程时至少需要一个提供者）
*   在页面的模式中添加 providers#new（不能使用 form_form(@provier) 从另一个控制器调用控制器

我想到了以下几点：

*   将用户重定向到提供者#new，如果他们没有先创建一个
*   添加一个带有 form_tag 元素的模式，该元素创建一个提供程序，然后刷新基础页面。

你怎么认为？更好的想法？

谢谢！弗朗西斯

我的课程#new (_form) 视图

```
<%= simple_form_for(@course) do |f| %>
  <%= f.error_notification %>
    <%= f.input :name %>
    <%= f.input :description, as: :text, input_html: { rows: '2' } %>
    <%= f.association :provider, :value_method => :id, collection:      Provider.with_role(:provider_admin, current_user), input_html: { class: 'input-large' },   include_blank: false %>
  <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
    <%= link_to "Cancel", :back, class: 'btn' %>
  </div>
<% end %> 
```

模型/提供者.rb

```
class Provider < ActiveRecord::Base
  attr_accessible :description, :name
  validates :name, :presence => true
  validates :description, :presence => true
  validates :name, :length => { :minimum => 6, :maximum => 100 }
  validates :description, :length => { :minimum => 6, :maximum => 100 }
  has_many :courses

end 
```

模型/课程.rb

```
class Course < ActiveRecord::Base

  attr_accessible :description, :name, :provider_id
  validates :name, :presence => true
  validates :name, :length => { :minimum => 6, :maximum => 100 }
  validates :description, :presence => true
  validates :description, :length => { :minimum => 6, :maximum => 256 }
  validates :provider_id, :presence => true

  belongs_to :provider
  has_many :sessions, :dependent => :destroy

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:46:06.780

我喜欢你重定向`courses#new`到`providers#new`when的想法`!current_user.provider.any?`。

但我可能会采用嵌套形式。如果用户没有提供者，您可以使用一个表单来创建新课程和新提供者。看看[http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)以获得一个快速的想法。我认为这将是最好的 UI 明智。

# oauth - Omniauth-twitter 返回 401

> ID：15721940
> 
> 赞同：2
> 
> 时间：2013-03-30T18:27:58.690
> 
> 标签：oauth, ruby-on-rails-3.2, omniauth

**阶段**：

我有一个 Rails 应用程序，它应该使用他们的 Twitter 帐户对用户进行身份验证，所以我使用 Omniauth-Twitter gem。

我已经配置了一个应用程序来`dev.twitter.com`启用`Sign in with twitter`标志和获取`consumer_key`和`consumer_secret`。

我正在关注本指南[https://github.com/arunagw/omniauth-twitter#readme](https://github.com/arunagw/omniauth-twitter#readme)

在 Rails 应用程序中，我配置了一些文件：

*   `config/initializers/omniauth.rb`：

    ```
    Rails.application.config.middleware.use OmniAuth::Builder do
      # Twitter consumer data
      CONSUMER_KEY='xxxxxxxxxxxxxxxxx'
      CONSUMER_SECRET='yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy'
      provider :twitter, CONSUMER_KEY, CONSUMER_SECRET
    end 
    ```

*   `sessions_controller.rb`好像：

    ```
    class SessionsController < ApplicationController
      def create
        raise request.env["omniauth.auth"].to_yaml
      end
    end 
    ```

*   `applications.html.erb`布局：

    ```
    <div id="user_nav">
      <%= link_to "Sign in with Twitter", "/auth/twitter" %>
    </div> 
    ```

    所以我除了当我点击`Sign in with Twitter`链接时，我会引发一个异常，显示我的身份验证数据或要求我进行 Twitter 授权。

**问题**：

而不是这个，它返回这个：

```
OAuth::Unauthorized (401 Unauthorized):
oauth (0.4.7) lib/oauth/consumer.rb:216:in `token_request'
oauth (0.4.7) lib/oauth/consumer.rb:136:in `get_request_token'
omniauth-oauth (1.0.1) lib/omniauth/strategies/oauth.rb:29:in `request_phase'
omniauth-twitter (0.0.15) lib/omniauth/strategies/twitter.rb:63:in `request_phase'
omniauth (1.1.3) lib/omniauth/strategy.rb:207:in `request_call'
omniauth (1.1.3) lib/omniauth/strategy.rb:174:in `call!'
omniauth (1.1.3) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.3) lib/omniauth/builder.rb:48:in `call' 
```

这里有什么问题？

# c# - ListBox 和独立存储

> ID：15721941
> 
> 赞同：1
> 
> 时间：2013-03-30T18:28:03.570
> 
> 标签：c#, windows-phone-7

我有两个关于 Windows Phone 开发的问题：

我有两个`ListBox`( `ListBox1`, `ListBox2`)

我将我的物品保存在`ListBox1`隔离存储中。

我想从中获取所选项目`ListBox1`并将其放入`ListBox2`隔离存储中的保存中2

当我单击按钮以获取所选项目`Listbox1`并为`ListBox2`我的应用程序放置时，我的应用程序保存了所有项目`ListBox1`并保存在 `Listbox2`.

我的代码：

```
//Isolated Storage

private IsolatedStorageSettings _ListaCompras;
private IsolatedStorageSettings _ListaComprado;
_ListaCompras = IsolatedStorageSettings.ApplicationSettings;
_ListaComprado = IsolatedStorageSettings.ApplicationSettings;

//Save Item in ListBox1
private void button1_Click(object sender, RoutedEventArgs e)
{
     if (textBoxProduto.Text != string.Empty)
     {
         _ListaCompras.Add(textBoxProduto.Text, "Produto");
         _ListaCompras.Save();
         salvarLista();
         contador();
     }
     else MessageBox.Show("Informe o Produto"); 
 } 

 //Get the Selected item for ListBox1 and put the ListBox2

 private void button3_Click(object sender, RoutedEventArgs e)
 {
     if ((listBoxComprar.Items.Count <= 0) || (this.listBoxComprar.SelectedIndex == -1))
     MessageBox.Show("Selecione um item na lista de pendentes");
     else
     {
       _ListaComprado.Add(listBoxComprar.SelectedItem.ToString(), "ProdutoComprado");
       _ListaComprado.Save();
       salvarLista2();
     }
  }

//BIND KEYS

  public void salvarLista() 
  {
       listBoxComprar.Items.Clear();
       foreach (string key in _ListaCompras.Keys)
       {
           this.listBoxComprar.Items.Add(key);
       }
       textBoxProduto.Text = "";
   }
   public void salvarLista2()
   {
       listBoxComprado.Items.Clear();
       foreach (string key2 in _ListaComprado.Keys)
       {
            this.listBoxComprado.Items.Add(key2);       
       }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:15:37.447

The question is not very clear but I think I figured it out. You are saving the value as key and a string as value in the applicationsettings. This should be the other way around, the string (Produto and ProdutoComprado) as keys and the values as values.

I think you have the Add(key, value) statement mixed up. [msdn](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.add%28v=vs.95%29.aspx)

So

```
_ListaCompras.Add(textBoxProduto.Text, "Produto"); 
```

should be:

```
_ListaCompras.Add("Produto", textBoxProduto.Text); 
```

and

```
_ListaComprado.Add(listBoxComprar.SelectedItem.ToString(), "ProdutoComprado"); 
```

should be:

```
_ListaComprado.Add("ProdutoComprado", listBoxComprar.SelectedItem.ToString()); 
```

# java - 试图在 MainActivity 之外给 PopupWindow 充气

> ID：15721942
> 
> 赞同：2
> 
> 时间：2013-03-30T18:28:06.290
> 
> 标签：java, android, popupwindow

我正在尝试在 MainActivity 类之外为 PopupWindow 充气。我可以在 MainActivity 内给它充气，但是当我尝试在它之外进行充气时出现以下错误。

> 致命异常：主 E/AndroidRuntime(7820)：android.view.WindowManager$BadTokenException：无法添加窗口 -- 令牌 null 无效；您的活动正在运行吗？

以下方法适用于 MainActivity：

```
public void popUp() {
    LayoutInflater layoutInflater 
    = (LayoutInflater)this
    .getSystemService(MyGameActivity.LAYOUT_INFLATER_SERVICE);  
    View popupView = layoutInflater.inflate(R.layout.gameover, null);  
    PopupWindow popupWindow = new PopupWindow(
            popupView, 
            LayoutParams.WRAP_CONTENT,  
            LayoutParams.WRAP_CONTENT);  
    popupWindow.showAtLocation(popupView, 0, 87, 120);
} 
```

下面的方法是我试图在 MainActivity 类之外使用的方法（这个方法给出了错误）：

```
public void popUp(Context context) {
    LayoutInflater layoutInflater 
    = (LayoutInflater)context
    .getSystemService(MyGameActivity.LAYOUT_INFLATER_SERVICE);  
    View popupView = layoutInflater.inflate(R.layout.gameover, null);  
    PopupWindow popupWindow = new PopupWindow(
            popupView, 
            LayoutParams.WRAP_CONTENT,  
            LayoutParams.WRAP_CONTENT);  
    popupWindow.showAtLocation(popupView, 0, 87, 120);
} 
```

知道如何让这个 PopupWindow 在我的 MainActivity 之外工作吗？

- - 编辑

LogCat 结果：

```
03-30 19:53:18.596: W/dalvikvm(8437): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
03-30 19:53:18.596: E/AndroidRuntime(8437): FATAL EXCEPTION: main
03-30 19:53:18.596: E/AndroidRuntime(8437): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.view.ViewRoot.setView(ViewRoot.java:533)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.widget.PopupWindow.invokePopup(PopupWindow.java:907)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.widget.PopupWindow.showAtLocation(PopupWindow.java:767)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at nl.saxion.act.playground.GameView.popUp(GameView.java:314)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at nl.saxion.act.playground.GameView.movePlayerLeft(GameView.java:299)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at nl.saxion.act.playground.MyGameActivity$1.onClick(MyGameActivity.java:93)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.view.View.performClick(View.java:2538)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.view.View$PerformClick.run(View.java:9152)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.os.Handler.handleCallback(Handler.java:587)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.os.Looper.loop(Looper.java:130)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at java.lang.reflect.Method.invokeNative(Native Method)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at java.lang.reflect.Method.invoke(Method.java:507)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-30 19:53:18.596: E/AndroidRuntime(8437):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:32:09.240

在这里 ：

```
context = MyGameActivity.getContext(); //<< 
```

this is not right way to get Context of Activity in non Activity class(in normal java class). you just need to create `popUp()` with context parameter and pass Activity context to `popUp()` method from Activity as:

```
public void popUp(Context context) {
    this.context = context;
    /....your code here
} 
```

and call `popUp` method from MainActivity by passing context as:

```
popUpClass popObj=new popUpClass();
popObj.popUp(MainActivity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:34:43.453

In your second method

```
 MyGameActivity.getContext(); 
```

refers to the static method that holds an instance of your `MyGameActivity` class. This is a very bad idea.

Indeed, you should understand, and it takes time at the beginning, that Android Activities or Fragments, Contexts in general, have a life cycle. This means that once they have been stopped, they should not be used any more. This would have 2 side-effets :

*   you prevent this instance from being garbage collected as you hold a reference to it, thus polluting memory.
*   this context can't be used and using it can, and will, create bugs related to memory leaks, dialog leaks, etc.

So, don't use your second method. It has no meaning to keep a reference on an activity when it has been closed.

The solution here is to add the first method in every activity that would need it, or put it in a common super class. Then it will always be related to the "current/vivid" instance of the activity class.

An alternative would be to provide you method a context and always pass it current active activity.

---BTW

```
LayoutInflater layoutInflater 
= (LayoutInflater)this
.getSystemService(MyGameActivity.LAYOUT_INFLATER_SERVICE); 
```

can be written :

```
LayoutInflated.from( this ); 
```

# javascript - 使用 ReadStream 和 Lazy 将大文件读入 Node.js 时文件意外结束

> ID：15721943
> 
> 赞同：0
> 
> 时间：2013-03-30T18:28:07.037
> 
> 标签：javascript, node.js, mongodb

### 背景

我正在协助一个项目，分析 Twitter 上关于 2013 年 NCAA 男子篮球锦标赛比赛的对话量。我们使用简单的 Node.js 请求和[Twitter 流 API 的](https://dev.twitter.com/docs/streaming-apis) [状态过滤器](https://dev.twitter.com/docs/api/1.1/post/statuses/filter)方法收集推文，并将响应保存在纯文本文件中。到目前为止，我们已经收集了大约 1500 万条推文，这些推文占据了大约

现在我们正在尝试处理这些推文，并使用另一个简单的 Node.js 脚本仅将相关信息（uid、时间戳、文本和语言）上传到 MongoDB 数据库中，显示在[这个 Gist](https://gist.github.com/RyanMullins/5277353)中，其中也有一个非常小的原始推文样本我们收集了。一旦推文被加载到数据库中，我们将过滤和聚合它们以导出我们需要的信息。

### 问题

所以这就是问题所在：当运行将推文保存在数据库中的脚本时，它会引发意外的文件结束错误并死掉。我已经验证了 ReadStream 和 Lazy 的实例已被初始化，当脚本尝试对每一行进行操作并将该行解析为有效的 JSON 对象时，问题似乎正在发生。

关于为什么会发生这种情况或如何解决它的任何想法？

*示例堆栈跟踪*

```
undefined:1
3","indices":[3,10]}]},"favorited":false,"retweeted":false,"filter_level":"low
                                                                          ^
SyntaxError: Unexpected end of input
    at Object.parse (native)
    at /home/ubuntu/ncaa/savetodb.js:31:34
    at Lazy.<anonymous> (/home/ubuntu/ncaa/node_modules/lazy/lazy.js:91:13)
    at Lazy.<anonymous> (/home/ubuntu/ncaa/node_modules/lazy/lazy.js:73:19)
    at Lazy.EventEmitter.emit (events.js:95:17)
    at yieldTo (/home/ubuntu/ncaa/node_modules/lazy/lazy.js:181:18)
    at Function.<anonymous> (/home/ubuntu/ncaa/node_modules/lazy/lazy.js:219:25)
    at Lazy.<anonymous> (/home/ubuntu/ncaa/node_modules/lazy/lazy.js:187:21)
    at Lazy.EventEmitter.emit (events.js:95:17)
    at ReadStream.<anonymous> (/home/ubuntu/ncaa/node_modules/lazy/lazy.js:50:22) 
```

# git - Git is not showing all branches on local

> ID：15721949
> 
> 赞同：18
> 
> 时间：2013-03-30T18:28:55.980
> 
> 标签：git, github, moodle, git-remote

I forked a repo from Github. On doing `git remote -v` it displays:

```
origin  https://github.com/myusername/moodle.git (fetch)
origin  https://github.com/myusername/moodle.git (push)
upstream    https://github.com/moodle/moodle.git (fetch)
upstream    https://github.com/moodle/moodle.git (push) 
```

The `moodle.git` has about 10 branches, but the repo shows only 2 of them. On doing `git branch -a` (show all branches) I get:

```
 MOODLE_24_STABLE// just these two on local..how?
* master//
  origin/MOODLE_13_STABLE
  origin/MOODLE_14_STABLE
  origin/MOODLE_15_STABLE
  origin/MOODLE_16_STABLE
  origin/MOODLE_17_STABLE
  origin/MOODLE_18_STABLE
  origin/MOODLE_19_STABLE
  origin/MOODLE_20_STABLE
  origin/MOODLE_21_STABLE
  origin/MOODLE_22_STABLE
  origin/MOODLE_23_STABLE
  origin/MOODLE_24_STABLE
  origin/master
  upstream/MOODLE_13_STABLE
  upstream/MOODLE_14_STABLE
  upstream/MOODLE_15_STABLE
  upstream/MOODLE_16_STABLE
  upstream/MOODLE_17_STABLE
  upstream/MOODLE_18_STABLE
  upstream/MOODLE_19_STABLE
  upstream/MOODLE_20_STABLE
  upstream/MOODLE_21_STABLE
  upstream/MOODLE_22_STABLE
  upstream/MOODLE_23_STABLE
  upstream/MOODLE_24_STABLE
  upstream/master 
```

How do I resolve my problem without any loss of data or any irregularities?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-30T18:45:37.100

Cloning a repo won't duplicate all the remote branches on the local repo: for a large remote repo with a lot of branches, that would pollute your local namespace with tons of branches.

I have a [one-liner command](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches/6300386#6300386) in order to create local branches tracking all the remote branches of a remote repo, but this is usually not needed.
You only create a local branch tracking a remote one when needed.

```
git checkout -b aBranch --track origin/aBranch

# or, shorter:
$ git checkout --track origin/aBranch 
Branch aBranch set up to track remote branch refs/remotes/origin/aBranch.
Switched to a new branch "aBranch"  

# even shorter at the end of this answer. 
```

Adding a `--track` allows for setting up the configuration to mark the start-point branch as "**[upstream](https://stackoverflow.com/a/6244487/6309)**" from the new branch.
This configuration will tell git to show the relationship between the two branches in `git status` and `git branch -v`.
Furthermore, it directs git pull without arguments to pull from the upstream when the new branch is checked out.

* * *

[kostix](https://stackoverflow.com/users/720999/kostix) mentions that `--track` is implied when forking a branch off a remote branch (unless `branch.autosetupmerge` is set to `false`)

This could be enough

```
git checkout aBranch 
```

The exact explanation from [`git checkout` man page](http://git-scm.com/docs/git-checkout) is:

> If `<branch>` is not found but there does exist a tracking branch in exactly one remote (call it `<remote>`) with a matching name, treat as equivalent to:

```
$ git checkout -b <branch> --track <remote>/<branch 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-07T10:57:21.030

Some times , if you havn't pulled the latest code, you wont be allowed to checkout the newly created branch.Because your changes are not in synch.

So first -pull the latest -checkout from newly created branch

# ruby-on-rails - 在 Textmate 2 的 Rails 应用程序中编辑 CSS 时如何查看实时预览？

> ID：15721961
> 
> 赞同：0
> 
> 时间：2013-03-30T18:30:05.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, textmate2

我要防止的只是必须不断刷新页面（并随后在视图上进行数据库调用），这需要很长时间。

我希望能够只进行 CSS 更改并立即看到它反映在文档/页面/站点中。

无论如何要在 OS X 和 Rails 3.2.x 上的 Textmate 2 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T17:43:59.243

[Livereload.com](http://livereload.com)有针对 OSX、windows 和 linux 的解决方案，如果您不介意多一点额外设置，最后一个是免费的。

# java - .java 文件数组

> ID：15721963
> 
> 赞同：-1
> 
> 时间：2013-03-30T18:30:42.983
> 
> 标签：java, arrays, file

到目前为止，我在当前目录中创建了一个名为“src”的文件夹

```
new File("src").mkdir(); 
```

然后如果 src 文件夹中有任何 .java 文件，我想将它们存储在数组中

```
JavaFileObject javaFileObjects[] = new JavaFileObject[]{}; 
```

有人可以提供一个解决方案，用 src 文件夹中的 .java 文件填充这个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:32:10.933

是的，正如评论所说，使用 a`FileFilter`并检查`.java`扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:34:13.423

像这样：

```
File parentDirectory = new File("src");
File [] javaFiles = parentDirectory.listFiles(new RecursiveExtensionFileFilter(".java")); 
```

这是一个您可能会发现有用的过滤器类：

```
package util;

import org.apache.commons.lang3.StringUtils;

import java.io.File;
import java.io.FileFilter;

/**
 * RecursiveExtensionFileFilter for filtering only Word .doc files
 * @author Michael
 * @link
 * @since 2/13/13 10:21 AM
 */
public class RecursiveExtensionFileFilter implements FileFilter {
    public static final String DEFAULT_WORD_EXTENSION = ".doc";
    private final String extension;
    private final boolean makeLowerCase;

    public RecursiveExtensionFileFilter(String extension) {
        this(extension, false);
    }

    public RecursiveExtensionFileFilter(String extension, boolean makeLowerCase) {
        if (StringUtils.isBlank(extension))
            throw new IllegalArgumentException("file extension cannot be blank or null");
        this.extension = extension;
        this.makeLowerCase = makeLowerCase;
    }

    @Override
    public boolean accept(File pathname) {
        boolean isWordDocOrDirectory = false;
        if (pathname != null) {
            if (pathname.isDirectory()) {
                isWordDocOrDirectory = true;
            } else {
                String absolutePath = pathname.getAbsolutePath();
                if (this.makeLowerCase) {
                    absolutePath = absolutePath.toLowerCase();
                }
                isWordDocOrDirectory = (absolutePath.lastIndexOf(this.extension) == (absolutePath.length() - this.extension.length()));
            }
        }
        return isWordDocOrDirectory;
    }
} 
```

# iphone - 替换变量子字符串

> ID：15721965
> 
> 赞同：0
> 
> 时间：2013-03-30T18:31:00.830
> 
> 标签：iphone, ios, parsing

我有这个字符串：`<div id="attachment_16696" class="wp-caption alignnone" style="width: 460px">`

我想拥有： `<div id="attachment_16696" class="wp-caption alignnone" style="width: 275px">`

我几乎工作。唯一的问题是，例如`1000px`，当它不匹配时，它不起作用，如果不匹配`460px`并且我想拥有它，我该如何处理`260px`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T21:18:40.837

以下代码使用[NSRegularExpression](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类来替换 divs HTML 标记的宽度样式属性（当以您指定的格式提供时）：

```
// Takes Div markup in the following formats:
// <div id="something" class="something" style="width: Xpx">
// <div id="something" class="something" width="X">
// And replaces X with desired value.
- (NSString *)setDivMarkup:(NSString *)markup width:(NSInteger)width
{
    NSString *regexToReplaceWidth = @"width(:|=)(\")?\\s*\\d+\\s*(px)?";

    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexToReplaceWidth
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];

    return [regex stringByReplacingMatchesInString:markup
                                           options:0
                                             range:NSMakeRange(0, markup.length)
                                      withTemplate:[NSString stringWithFormat:@"width$1$2%d$3", width]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:34:45.807

使用正则表达式：`string.replace(/width:\s*\d+px/, 'width: 275px')`

编辑：再想一想，如果这只是更大字符串的一部分，您可能不想用`275px`（或`260px`）替换所有宽度。您仍然应该使用正则表达式，但我不确定在没有看到它所在的上下文以及知道您做什么和不想替换的情况下它会寻找什么。

# c# - How do I convert this VB.NET array expression to C#

> ID：15721967
> 
> 赞同：0
> 
> 时间：2013-03-30T18:31:12.630
> 
> 标签：c#, arrays, vb.net, vb.net-to-c#, array-initialization

In VB.net, I can write:

```
If {"red", "blue"}.Contains("blue") Then Return True 
```

and the `Contains` seems to be from Linq.Enumerable(Of T).

I'm having trouble converting it to C# - when I use an online conversion tool like the one from [Developer Fusion](http://www.developerfusion.com/tools/convert/vb-to-csharp/), it gives me:

```
if ({"red", "blue"}.Contains("blue")) return true; 
```

but it doesn't compile, saying it's unable to resolve the symbol `Contains` which isn't very helpful. I'm sure it's a simple syntax issue, but I'm not sure what you call an example like this.

I don't need to instantiate the array, since I'm just using it to evaluate the expression inline. This seems to be possible in VB.NET. What do you call this - a static array? constant array? anonymous array? some combination of those listed?

I'd like to know how to write this in C#, and also what this is called (I'll update the question title and tags to better reflect what I'm asking when someone can answer that). Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:37:31.860

This would be your direct conversion

```
if (new []{"red", "blue"}.Contains("blue")) return true; 
```

Oh, it's called an [array initializer](https://stackoverflow.com/questions/5678216/all-possible-c-sharp-array-initialization-syntaxes)

# asp.net - asp.net 4.5 会话丢失并在几秒钟后返回

> ID：15721974
> 
> 赞同：0
> 
> 时间：2013-03-30T18:31:50.040
> 
> 标签：asp.net, session-state, iis-8

我对 Windows 2012 上的 ASP.NET 4.5 会话有一个非常奇怪的问题

描述：会话工作正常。我浏览网站、登录、访问例如个人资料和使用会话的其他 aspx 页面。然后从一秒到另一秒，在任何 aspx 页面上，会话都会丢失，在每个 aspx 页面上。几秒钟后，会话又回来了。因此，如果我在问题出现之前登录，我会丢失会话值，几秒钟后它们又回来了。每个浏览器（IE、FF、Chrome）都会发生这种情况。我还没有尝试过使用 InProc、State Server、Appfabric，但都是一样的，所以必须对“顶级”上的 .net 会话处理或 IIS 做一些事情……不确定，但主要是，主观上我认为在会话“丢失”之前请求非常慢。疯了，他们“回来”之后……所以他们并没有真正迷路。

任何的想法 ？

**更新**

我添加了一些调试代码。看看登录，它最容易重现。这里是代码隐藏：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Response.Write("StepA/")
End Sub

Protected Sub btnSignin(ByVal sender As Object, ByVal e As EventArgs)

    Response.Write("Step0/")
    If System.Web.Security.Membership.ValidateUser(loginEmail.Value, loginPassword.Value) = True Then

        Response.Write("Step1/")

        FormsAuthentication.SetAuthCookie(loginEmail.Value, False)
        Response.Write("Step2/")

        Dim ui As New UserInfo
        Response.Write("Step3/")
        ui.InitUserInfo(loginEmail.Value)
        Response.Write("Step4/")

        If Request.UrlReferrer.OriginalString.Contains("Login.aspx") = True Then
            Response.Write("Step5/")
            Response.Redirect("/admin/Default.aspx")
        Else
            Response.Write("Step6/")
            Response.Redirect(Request.UrlReferrer.OriginalString)

        End If

    Else
        Response.Write("Step7/")
        loginfailed.Visible = True
    End If

End Sub 
```

所以...运行一切正常，初始加载，打印出“stepA”。然后登录后Step0到5或6

然后，出于任何原因，会话“丢失”，上面的代码不会打印出步骤 0 到 6。看起来点击事件不会触发。嗯......但是，然后，重新启动 AppFabric 缓存，哦，奇怪......它可以工作，正如我之前写的......状态服务器也会发生同样的情况，然后重新启动 StateServer 解决了问题和 Inproc，重新启动 IIS 或应用程序解决了它。 ...

只是要清楚。此会话丢失或所有 aspx 页面上出现任何问题，而不仅仅是登录。至少使用会话的任何地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:53:49.780

after a lot of reading, new relic monitoring etc i found the real problem and a working solution. the problem is related to the fact, that asp.net, until 4.5 block sessions in some scenarios (eg if you have iframes, updatepanel etc), until a page is fully loaded. if a user goes on another page on my side,and the session is blocked, it comes to the described results, waiting time for x seconds etc.

The solution, which works for me, x times better performance but resolved blocking problem:

I use Couchbase (www.couchbase.com) as cash and session "store", with this excellent session and cache provider for couchbase: [https://github.com/evereq/couchbase-aspnet](https://github.com/evereq/couchbase-aspnet)

Important here, related to the blocking probem is the config part: exclusiveAccess="false" for the session provider

2 problems i had, related to Win 8 Dev PC and Win 2012 server. On Win 2012 we need to replace a dll, described here:

For anyone interested this is a x64 version of a 'wrapper' for libtcmalloc. Just place it in your couchbase 'bin' directory and restart the couchbase service.

x64 version of the dll [http://www.mediafire.com/?xc8nurnxjqr8klb](http://www.mediafire.com/?xc8nurnxjqr8klb)

PS: Thanks to Chris Wundram for the hint!

On Win 8 this blog post describes well what to do:

[http://blogs.southworks.net/mkrikorian/2013/02/06/installing-couchbase-under-windows-8/](http://blogs.southworks.net/mkrikorian/2013/02/06/installing-couchbase-under-windows-8/)

as i said, after this, blocking problems gone and much better performance

# angularjs - Can .$inject be used on Services in AngularJS, or is it needed only for Controllers?

> ID：15721975
> 
> 赞同：4
> 
> 时间：2013-03-30T18:31:54.240
> 
> 标签：angularjs, minify, angularjs-service

I'm aware that for the purposes of minification and obfuscation we should always use the $injector (by way of `controllerName.$inject = ['$service', '$service2']`) to specify the actual service names that are required.

If I write a custom service that relies on other services, however, can/should I do the same thing? The only examples I can find for using the .$inject method are called on Controllers.

If I am doing

```
 myModule.factory('myService', function($rootScope, anotherService) {
  return {
    foo: 'bar'
  }); 
```

Should I append this?

`myService.$inject = ['$rootScope', 'anotherService'];`

Or perhaps it's applied to the module as a whole then?

`myModule.$inject = ['$rootScope', 'anotherService'];`

...But maybe in that case, the module is already keeping track of its services, and hence minification is not a concern?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:33:42.120

Check the [dependency injection guide](http://docs.angularjs.org/guide/di), section **Inline Annotation**.

The following is also a valid syntax, and it is safe for minification:

```
myModule.factory('myService', ['$rootScope', 'anotherService', 
      function($rootScope, anotherService) {

        ....
}]); 
```

# c# - WPF - Highlighting rows in listview with binded XML

> ID：15721984
> 
> 赞同：0
> 
> 时间：2013-03-30T18:32:28.330
> 
> 标签：c#, wpf, xml, listview, data-binding

First of all I apologise for my bad english.

I have xml binded to a listview, where each row stands for one person. I want row's background color blue or pink depending on sex element in xml. I've created style with triggers, but they seems to check only first xml node and all rows are colored same as 1st row. Xml element sex is 0 for male, 1 for female.

One DataTrigger (second is similar):

```
<DataTrigger Binding="{Binding Source={StaticResource Data}, XPath=People/Person/Sex}" Value="0">
    <Setter Property="Background" Value="{StaticResource MaleBrush}" />
</DataTrigger> 
```

This is xml and style binding to listview (data is XmlDataProvider):

```
<ListView ... ItemsSource="{Binding Source={StaticResource Data}, XPath=People/Person}" ItemContainerStyle="{StaticResource SexStyle}"> 
```

And this is style header:

```
<Style x:Key="SexStyle"  TargetType="{x:Type ListViewItem}"> 
```

Thanks for help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:32:52.987

You should use a ValueConverter for this.

You bind the background of the datatemplate to the gender. Then you create a value converter class like this:

```
 public sealed class GenderToBackgroundConverter : IValueConverter
   {

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is string) {
            if (Convert.ToString(value) == "m") {
                return Colors.Blue;
            } else {
                return Colors.Pink;
            }
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

This value converter you then add to your resources like this:

```
<local:GenderToBackgroundConverter x:Key="GenderToBackgroundConverter" /> 
```

And in your datatemplate:

```
<Stackpanel Background={Binding Sex, Converter={StaticResource GenderToBackgroundConverter}}">

</Stackpanel> 
```

# java - 使用 MBROVERLAP 在 java 中的 mysql 查询

> ID：15721986
> 
> 赞同：0
> 
> 时间：2013-03-30T18:32:51.963
> 
> 标签：java, mysql

我尝试运行此 mysql 查询，但出现此错误：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'SET @r2 = GeomFromText('Polygon((1 1,5 1,5 5,1 5,1 1))'); 附近使用正确的语法；在第 2 行选择 MBROVERLAPS(@r1'

代码：

```
public String getoverlap(Rectangle recA, Rectangle recB){
    String result = "-1";
    String query;

    query =    
            "SET @r1 = GeomFromText(\'Polygon((1 1, 5 1,5 5,1 5,1 1))\');\n" +
            "SET @r2 = GeomFromText(\'Polygon((1 1,5 1,5 5,1 5,1 1))\');\n" +
           "select MBROVERLAPS(@r1,@r2);" ;

     System.out.println("query--:\n "+query);

     try {
        this.statement = this.connection.createStatement();
        ResultSet  rs = this.statement.executeQuery(query);
        System.out.println("kkk:" +rs.toString());

        if(rs!=null){
            result = rs.getString("MBROVERLAPS(@r1,@r2)");
        }
        else{
            System.out.println("Debug: lathos sthn getoverlap");
        }

         statement.close();
    } catch (SQLException ex) {
        System.out.println("debug: sqlEcxeption");
        Logger.getLogger(Database.class.getName()).log(Level.SEVERE, null, ex);
    }

     return result;
} 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:28:24.770

JDBC API 不*模拟*您的典型 SQL 客户端 - 您不能以您拥有的方式将多个语句合并在一起。具体来说，这个查询：

```
query =    
    "SET @r1 = GeomFromText(\'Polygon((1 1, 5 1,5 5,1 5,1 1))\');\n" +
    "SET @r2 = GeomFromText(\'Polygon((1 1,5 1,5 5,1 5,1 1))\');\n" +
    "select MBROVERLAPS(@r1,@r2);" ; 
```

需要拆分，每个语句单独运行。如图所示，通过语句直接运行每个部分：

```
statement = connection.createStatement();
statement.executeQuery("SET @r1 = GeomFromText(\'Polygon((1 1, 5 1,5 5,1 5,1 1))\')";
statement.executeQuery("SET @r2 = GeomFromText(\'Polygon((1 1,5 1,5 5,1 5,1 1))\')");
ResultSet  rs = statement.executeQuery("SELECT MBROVERLAPS(@r1,@r2)");
System.out.println(rs.toString()); 
```

A dead giveaway is that you should never have delimiting semi-colons in your JDBC query strings.

# flash - flash 网站内容框隐藏菜单

> ID：15721987
> 
> 赞同：0
> 
> 时间：2013-03-30T18:32:55.247
> 
> 标签：flash, onmouseover, onmousemove

我的网站是：[http](http://harringtonplanningdesign.com) ://harringtonplanningdesign.com 当我将光标移到 Flash 框上时，菜单消失了。当光标在 Flash 内容框上时，如何使菜单不隐藏？这意味着我不想在移动鼠标时隐藏菜单。

主页代码在这里：

```
<html>
<head>
    <title>Harrington Planning + Design</title>
    <script type="text/javascript" src="com/swfobject/swfobject.js"></script>
    <script type="text/javascript" src="com/swfaddress/swfaddress.js"></script>
    <script type="text/javascript" src="com/pixelbreaker/swfmacmousewheel.js"></script>
    <style type="text/css">
        html {
            height: 100%;
            overflow: hidden;
            overflow-y: hidden;
        }
        #flashcontent {
            height: 100%;
        }
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            overflow-y: hidden;
        }
    </style>
</head>
<body>
    <div id="flashcontent">

    </div>
    <script type="text/javascript">
    // <![CDATA[
        var so = new SWFObject('container.swf', 'container', '100%', '100%', '9', '#FFFFFF');
        so.useExpressInstall('com/swfobject/expressinstall.swf');
        so.addParam('allowFullScreen','true');  
        so.addParam('menu','false');
        if( so.write('flashcontent') )
            {
            var macmousewheel=new SWFMacMouseWheel(so);
        }
    // ]]>
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:57:15.240

您必须编辑 .swf 的代码，在其中添加一些 MouseEvent。如果此变体适合您，请告诉我您的 AS 代码，我会提供帮助。

# ios - 在 Objective C 中跨类共享方法的最佳方式是什么？

> ID：15721992
> 
> 赞同：14
> 
> 时间：2013-03-30T18:33:22.523
> 
> 标签：ios, objective-c

我有几个从根视图控制器推送的视图控制器和表视图控制器。在所有这些中，我想在导航控制器中使用自定义后退按钮。我没有将设置后退按钮的方法复制到每个类文件中，而是创建了一个辅助类，其中包含一个执行设置的类方法。下面的代码有效，但我想知道我是否以错误的方式处理这个问题。有没有更好的方法来实现这一目标？另外，我仍然在我的所有课程中复制 -(void)myCustomBack 方法，并且想知道是否也有办法避免这种情况。

```
@interface NavBarBackButtonSetterUpper : NSObject
+ (UIButton *)navbarSetup:(UIViewController *)callingViewController;
@end

@implementation NavBarBackButtonSetterUpper

+ (UIButton *)navbarSetup:(UIViewController *)callingViewController
{
    callingViewController.navigationItem.hidesBackButton = YES;

    UIImage *backButtonImage = [[UIImage imageNamed:@"back_button_textured_30"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 5)];

    UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];

    [backButton setBackgroundImage:backButtonImage forState:UIControlStateNormal];

    [backButton setTitle:@"Back" forState:UIControlStateNormal];
    backButton.titleLabel.font = [UIFont fontWithName:@"AmericanTypewriter-Bold" size:12];
    backButton.titleLabel.shadowOffset = CGSizeMake(0,-1);

    UIView *customBackView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
    [customBackView addSubview:backButton];

    callingViewController.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:customBackView];

    return backButton;
}
@end

@interface MyCustomTableViewController : UITableViewController
@end

@implementation MyCustomTableViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *backButton = [NavBarBackButtonSetterUpper navbarSetup:self];

    [backButton addTarget:self  action:@selector(myCustomBack) forControlEvents:UIControlEventTouchUpInside];
}

- (void)myCustomBack
{
    [self.navigationController popViewControllerAnimated:YES];
}
@end

@interface MyCustomViewController : UIViewController
@end

@implementation MyCustomViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *backButton = [NavBarBackButtonSetterUpper navbarSetup:self];

    [backButton addTarget:self  action:@selector(myCustomBack) forControlEvents:UIControlEventTouchUpInside];
}

- (void)myCustomBack
{
    [self.navigationController popViewControllerAnimated:YES];
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:39:43.287

我认为解决您的问题的方法是继承。

您可以创建一个子类，`UIViewController`并让您的所有自定义视图控制器都继承自该自定义子类。“父”子类将具有`-(void)myCustomBack`设置代码，您无需再重复它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T02:31:47.840

谢谢大家的回复，并为我指明了正确的方向。我最终创建了一个 UIViewController 类别，其中包含我想在其他类中使用的方法。如果有更优雅的方式来做到这一点，我很高兴听到建议。这就是我的选择：

```
// UIViewController+BackButtonSetup.h

@interface UIViewController (BackButtonSetup)
- (void)backButtonSetup;
- (void)myCustomBack;
@end

// UIViewController+BackButtonSetup.m

@implementation UIViewController (BackButtonSetup)

- (void)backButtonSetup
{
    self.navigationItem.hidesBackButton = YES;

    // A Bunch of code to set up the custom back button

    [backButton addTarget:self action:@selector(myCustomBack) forControlEvents:UIControlEventTouchUpInside];

}

- (void)myCustomBack
{
    [self.navigationController popViewControllerAnimated:YES];
}

@end

// MyCustomTableViewController.m

#import "UIViewController+BackButtonSetup.h"

@implementation MyCustomTableViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self backButtonSetup];
}
@end

//MyCustomViewController.m

#import "UIViewController+BackButtonSetup.h"

@implementation MyCustomViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self backButtonSetup];
}
@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T18:40:05.327

setup 方法实际上并不需要在一个单独的类中；我会说你应该把它变成一个函数。

该`myCustomBack`方法，只要它在所有子类中完全相同，就可以轻松放入以下类别`UIViewController`：

```
@interface UIViewController (DylanBack)
- (void)DylanCustomBack;
@end

@implementation UIViewController (DylanBack)
- (void)DylanCustomBack
{
    [self.navigationController popViewControllerAnimated:YES];
}
@end 
```

（使用首字母作为前缀，由您的姓名或公司或项目的名称组成。即使它很丑陋，您也需要避免任何冲突的可能性。类别冲突破坏方法并且会产生粗糙的错误。）

只要你这样做，你也可以将辅助方法放入类别中。将其转换为实例方法，然后使用`self`而不是传入的控制器。

然后您的所有子类都将继承这些方法，您可以像在其中定义它们一样使用它们。如果任何类确实需要以某种方式专门化，您可以覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T18:51:55.770

有一个更好的方法来解决这个问题：使用[`UIAppearance`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)协议。您可以设置所有这些属性，并使自定义视图类型或任何导航栏中包含的每个后退按钮都继承外观。

[这是一个可以帮助您的截屏视频](http://nsscreencast.com/episodes/21-customizing-uinavigationbar)。那里的一些代码：

```
UIImage *back = [UIImage imageNamed:@"nav-backbutton.png"];
back = [back stretchableImageWithLeftCapWidth:ArrowLeftCap topCapHeight:0];

[[UIBarButtonItem appearanceWhenContainedIn:[CustomNavigationBar class], nil]
               setBackButtonBackgroundImage:back
                                   forState:UIControlStateNormal
                                 barMetrics:UIBarMetricsDefault]; 
```

请注意，`CustomNavigationBar`该类可以只是`UINavigationBar`，这将导致所有后退按钮获得该外观。

您可能无法做到的一件事是“返回”标题。那必须在您的所有视图控制器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T18:57:08.963

在大多数语言中，最简单的解决方案是拥有几个`Utils`具有静态（类）方法的类。

在 Obj-C 中，常用的方法是使用类别。

在您的示例中`UIBarButtonItem`，例如`UIBarButtonItem (CustomizedButtons)`使用方法创建一个类别`+(UIBarButton*)customBackButton`会更好。

但是，有一种更简单的方法。您可以在一个地方修改所有后退按钮的外观，让我们看一个示例

```
NSDictionary* titleAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [UIFont titilliumBoldWithSize:14.0f], UITextAttributeFont,
                                    [UIColor colorWithIntegerRed:181 green:201 blue:210], UITextAttributeTextColor,
                                    [UIColor clearColor], UITextAttributeTextShadowColor,
                                    [NSValue valueWithUIOffset:UIOffsetMake(1.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                    nil];

NSDictionary* titleAttributesHighlighted = [NSDictionary dictionaryWithObjectsAndKeys:
                                               [UIFont titilliumBoldWithSize:14.0f], UITextAttributeFont,
                                               [UIColor whiteColor], UITextAttributeTextColor,
                                               [UIColor clearColor], UITextAttributeTextShadowColor,
                                               [NSValue valueWithUIOffset:UIOffsetMake(1.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                                nil];

[[UIBarButtonItem appearance] setTitleTextAttributes:titleAttributes forState:UIControlStateNormal];    
[[UIBarButtonItem appearance] setTitleTextAttributes:titleAttributesHighlighted forState:UIControlStateHighlighted];

[[UIBarButtonItem appearance] setTitlePositionAdjustment:UIOffsetMake(0.0f, 1.0f) forBarMetrics:UIBarMetricsDefault];

UIImage* backButtonImage = [UIImage imageNamed:@"navigation_button_back_bg"];
UIImage* backButtonImageHighlighted = [UIImage imageNamed:@"navigation_button_back_bg_highlighted"];

UIEdgeInsets backButtonCapInsets;
backButtonCapInsets.top = 0.0f;
backButtonCapInsets.bottom = backButtonImage.size.height;
backButtonCapInsets.left = 14.0f;
backButtonCapInsets.right = 5.0f;

backButtonImage = [backButtonImage resizableImageWithCapInsets:backButtonCapInsets];
backButtonImageHighlighted = [backButtonImageHighlighted resizableImageWithCapInsets:backButtonCapInsets];    

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage
                                                  forState:UIControlStateNormal
                                                barMetrics:UIBarMetricsDefault];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImageHighlighted
                                                  forState:UIControlStateHighlighted
                                                barMetrics:UIBarMetricsDefault]; 
```

请注意，您不必使用自定义视图，也不必使用特殊的后退按钮选择器。

# c# - 将已编译的 Func 方法添加在一起的目的是什么？

> ID：15721993
> 
> 赞同：7
> 
> 时间：2013-03-30T18:33:30.390
> 
> 标签：c#, linq, lambda, compiled

我已经看到可以将编译的方法一起添加。

```
Expression<Func<Customer, bool>> ln = c => c.lastname.Equals(_customer.lastName, StringComparison.InvariantCultureIgnoreCase);
Expression<Func<Customer, bool>> fn = c => c.firstname.Equals(_customer.firstName, StringComparison.InvariantCultureIgnoreCase);
Expression<Func<Customer, bool>> fdob = c => c.DOB.ToString("yyyyMMdd").Equals(_customer.DOB.ToString("yyyyMMdd"));

var filter = ln.Compile() + fn.Compile() + fdob.Compile(); 
```

这样做有意义吗？

我打算使用过滤器代替 lambda 表达式来过滤客户存储库：

```
IEnumerable<Customer> customersFound = _repo.Customers.Where(filter); 
```

根据业务逻辑，我可能会也可能不会将三个编译方法添加在一起，但会选择并可能会添加更多编译方法。

谁能解释将它们加在一起是否会建立一个查询字符串？有人有更好的建议吗？

我可以链接“Where”语句并使用常规 lambda 表达式，但我对编译方法并将它们相加可能获得的东西很感兴趣！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T18:47:25.810

[这是Compile](http://msdn.microsoft.com/en-us/library/bb345362.aspx)方法返回委托这一事实的副作用。

在内部，委托是一个多播委托，它可以涉及对方法的多个链接引用。

在这种`+`情况下，这只是将它们链接在一起的一种快速方法。[您可以在 MSDN 上的How to: Combine Delegates](http://msdn.microsoft.com/en-us/library/ms173175(v=vs.80).aspx)中阅读有关组合委托的更多信息。

这是一个演示的[LINQPad](http://linqpad.net)程序：

```
void Main()
{
    var filter = GetX() + GetY() + GetZ();
    filter().Dump();
}

public int X() { Debug.WriteLine("X()"); return 1; }
public int Y() { Debug.WriteLine("Y()"); return 2; }
public int Z() { Debug.WriteLine("Z()"); return 3; }

public Func<int> GetX() { return X; }
public Func<int> GetY() { return Y; }
public Func<int> GetZ() { return Z; } 
```

输出：

```
X()
Y()
Z()
3 
```

请注意，它似乎只是忽略了第一个方法调用的返回值，只返回最后一个，尽管它也完全调用了先前的方法。

请注意，上面的代码与此类似：

```
void Main()
{
    Func<int> x = X;
    Func<int> y = Y;
    Func<int> z = Z;

    var filter = x + y + z;
    filter().Dump();
}

public int X() { Debug.WriteLine("X()"); return 1; }
public int Y() { Debug.WriteLine("Y()"); return 2; }
public int Z() { Debug.WriteLine("Z()"); return 3; } 
```

因此，简短的回答是不，这不会做你想做的事。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T18:48:14.537

当您调用 时`Compile()`，您正在创建类型的实例`Func<Customer, bool>`，它是一个委托。

代表重载`operator+`返回多播代表，这就是这里发生的事情。

见 MSDN：[`How to: Combine Delegates (Multicast Delegates)`](http://msdn.microsoft.com/en-gb/library/ms173175%28v=vs.110%29.aspx)

所以，不 - 将它们加在一起不会建立查询字符串。

* * *

如果这是用于 EF，您想使用表达式树，而不是 Lambda。

您可以使用命名空间创建和修改表达式树`System.Linq.Expressions`：

MSDN：[`System.Linq.Expressions Namespace`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx)

和

MSDN：[`How to: Use Expression Trees to Build Dynamic Queries`](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T20:17:27.740

链接谓词是一种创造性的努力，可惜它不起作用。Lasse 和 Nicholas (+2) 很好地解释了原因。但你也问：

> 有人有更好的建议吗？

编译表达式的缺点是它们不再是表达式，因此不能与`IQueryable`受 SQL 查询提供程序（如 linq to sql 或 linq to entity）支持的 s 一起使用。我假设`_repo.Customers`是这样的`IQueryable`。

If you want to chain expressions dynamically, [LINQKit's](http://www.albahari.com/nutshell/linqkit.aspx) PredicateBuilder is an excellent tool to [do this](http://www.albahari.com/nutshell/predicatebuilder.aspx).

```
var pred = Predicate.True<Customer>();

pred = pred.And(c => c.lastname.Equals(_customer.lastName, StringComparison.InvariantCultureIgnoreCase);
pred = pred.And(c => c.firstname.Equals(_customer.firstName, StringComparison.InvariantCultureIgnoreCase);
pred = pred.And(c => c.DOB.ToString("yyyyMMdd").Equals(_customer.DOB.ToString("yyyyMMdd"));

var customersFound = _repo.Customers.Where(pred.Expand()); 
```

This is what the `Expand` is for:

> Entity Framework's query processing pipeline cannot handle invocation expressions, which is why you need to call AsExpandable on the first object in the query. By calling AsExpandable, you activate LINQKit's expression visitor class which substitutes invocation expressions with simpler constructs that Entity Framework can understand.

Or: without it an expression is `Invoke`d, which causes an exception in EF:

> The LINQ expression node type 'Invoke' is not supported in LINQ to Entities.

BTW. If you use linq to sql/entities you may as well use `c.lastname == _customer.lastName` because it is translated into SQL and the database collation will determine case sensitiveness.