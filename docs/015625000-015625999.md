# StackOverflow 问答 15625000-15625999

# javascript - InputRichText - 如何使用 Icefaces InputRichText？

> ID：15625004
> 
> 赞同：1
> 
> 时间：2013-03-25T21:21:43.630
> 
> 标签：javascript, jsf, components, ckeditor, icefaces-1.8

我正在使用冰：inputRichText。我想获取选定的文本-这与客户端有关，我的意思是-在服务器端对其进行操作并将其放回编辑器（与所选文本在同一位置）。您能否建议我一些最佳实践 - 如何使用此 JSF 组件？

非常感谢。

* * *

我还是不明白，ice:inputRichText 是如何工作的。目前，CKEDITOR 和服务器之间的通信存在很大问题。

我有一个带有 onclick 操作和服务器操作的 commandLink。onclick 操作从 CKEDITOR 中获取选定的文本并将其放入隐藏字段。然后我可以在服务器端操作它。第一次它工作正常。但是在动作之后 inputRichText 组件正在刷新（或类似的东西），然后不可能重复该动作（仅启动 onclick 部分，也不启动服务器端）。如果我将 commandLInk 标记中的 immediate 属性设置为 true，它可以工作，但是我失去了我的应用程序的一些功能。所以我说，ice:inputRichText 的上下文中存在一些验证错误。你能给我建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:08:46.803

IceFaces 将负责更新服务器中客户端编辑器的数据，您可以在服务器上执行操作并将值绑定保留在 xhtml 中，IceFaces 将负责在客户端显示服务器上所做的更改。

下面是一个如何使用icefaces 富文本编辑器的示例。

```
<ice:inputRichText id="inptTxtSelected" value="#{mybean.note}"
      rendered="#{!empty mybean.note}"
      height="295px" toolbar="editorToolbar" width="625px"
      customConfigPath="/templates/js/richTextEditorConfig.js" saveOnSubmit="true"/> 
```

您可以使用richTextEditorConfig.js 配置编辑器上的按钮

```
CKEDITOR.editorConfig = function(config) {
        config.toolbarCanCollapse = false;
        config.resize_enabled = false;
    config.toolbar = 'editorToolbar';
    config.height ='180px';
    config.baseFloatZIndex = 20000; 
    config.resize_maxWidth = "100%";    
    config.uiColor = '#E4E8F7';
    config.skin='office2003';
    config.toolbar_editorToolbar = [
 ['Preview','-','Link','Unlink','-','Bold','Italic',
       'Underline','- ','NumberedList','BulletedList']        
];
}; 
```

您的 Bean 应该具有类似的值，

```
public class MyBean {

    private String note;
    //getter and setter to follow

    public void manipulateText(ActionEvent e){ 
        note = "set from server";
    }
} 
```

# python - 使用 python mechanize 库登录 https 站点

> ID：15625008
> 
> 赞同：2
> 
> 时间：2013-03-25T21:21:59.403
> 
> 标签：python, https, mechanize

我有以下代码：

```
import requests
import sys
import urllib2
import re
import mechanize
import cookielib
#import json
#import imp
#print(imp.find_module("requests"))
#print(requests.__file__)
EMAIL = "******"
PASSWORD = "*******"

URL = 'https://www.imleagues.com/Login.aspx'
address = "http://www.imleagues.com/School/Team/Home.aspx?Team=27d6c31187314397b00293fb0cfbc79a"
br = mechanize.Browser()
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.add_password(URL, EMAIL, PASSWORD)
br.open(URL)

#br.open(URL)
#br.select_form(name="aspnetForm")
#br.form["ctl00$ContentPlaceHolder1$inUserName"] = EMAIL
#br.form["ctl00$ContentPlaceHolder1$inPassword"] = PASSWORD
#response = br.submit()
#br= mechanize.Browser()
site = br.open(address)

    # Start a session so we can have persistant cookies
#session = requests.Session()

    # This is the form data that the page sends when logging in
#login_data = {
 #   'ctl00$ContentPlaceHolder1$inUserName': EMAIL,
 #   'ctl00$ContentPlaceHolder1$inPassword': PASSWORD,
  #  'aspnetFrom': 'http://www.imleagues.com/Members/Home.aspx',
#}
#URL_post = 'http://www.imleagues.com/Members/Home.aspx'
    # Authenticate
#r = session.post(URL, data=login_data)

    # Try accessing a page that requires you to be logged in
#r = session.get('http://www.imleagues.com/School/Team/Home.aspx?Team=27d6c31187314397b00293fb0cfbc79a')

website = site.read()

f = open('crypt.txt', 'wb')
f.write(website)

#print(website_html) 
```

我正在尝试登录该站点以监控游戏时间并确保它们不会（再次）在我身上改变。我已经尝试了各种方法来做到这一点，大多数都在上面注释掉了，但所有这些方法都将我重定向回登录页面。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:43:00.343

正如我在给定的网站登录按钮中看到的，它不在`submit`标签中。登录是javascript函数

`<a ... href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$btnLogin','')" </a>`

并且`mechanize`无法处理javascript。我遇到了非常相似的问题并想出了使用的解决方案[`Spynner`](https://code.google.com/p/spynner/)。它是无头网络浏览器。因此，您可以完成与使用 mechanize 相同的任务，并且它具有 javascript 支持。

# string - 字符串到表格

> ID：15625011
> 
> 赞同：2
> 
> 时间：2013-03-25T21:22:07.350
> 
> 标签：string, lua, lua-table

我知道这是一个非常奇怪的问题，但是说我有这种类型的字符串

```
local string_1 = "{ [name] = "string_1", [color] = "red" }"
local string_2 = "{ [name] = "string_2", [color] = "blue" }"
local string_3 = "{ [name] = "string_3", [color] = "green" }" 
```

我可以使用 table.insert 或其他东西将它们变成这个

```
local table_1 = {
    { [name] = "string_1", [color] = "red" };
    { [name] = "string_2", [color] = "blue" };
    { [name] = "string_3", [color] = "green" };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:40:39.800

这些字符串似乎是 Lua 代码。假设这些字符串的格式是固定的，即您不能选择 JSON 或其他一些表示，那么正确的做法可能是简单地将它们加载为 Lua 代码并执行它们。不过，您可能希望对代码进行沙箱处理，具体取决于这些字符串的来源。

Lua 5.1 和 Lua 5.2 的方法不同。您使用的是哪个版本？

* * *

这是在 Lua 5.1 中执行此操作的示例。我在这里假设您的示例输入实际上不是您想要的，并且应该`name`是`color`字符串键，而不是对变量的引用。如果它们是变量，您将需要处理环境。

```
local strings = {
    "{ name = \"string_1\", color = \"red\" }",
    "{ name = \"string_1\", color = \"red\" }",
    "{ name = \"string_3\", color = \"green\" }"
}

-- parses a string that represents a Lua table and returns the table
local function parseString(str)
    local chunk = loadstring("return " .. str)
    -- Sandbox the function. Does it need any environment at all?
    -- Sample input doesn't need an environment. Let's make it {} for now.
    setfenv(chunk, {})
    return chunk()
end

local tables = {}
for _, str in ipairs(strings) do
    table.insert(tables, parseString(str))
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:27:13.103

在我看来，您需要解析一些 JSON 字符串。这可以通过使用[LuaJSON](http://luaforge.net/projects/luajson/)或[其他](http://www.google.com/?q=lua%20json%20parser)...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:56:38.700

这适用于 Lua 5.1 和 5.2

```
local string_1 = '{ [name] = "string_1", [color] = "red" }'
local string_2 = '{ [name] = "string_2", [color] = "blue" }'
local string_3 = '{ [name] = "string_3", [color] = "green" }'

local function str2tbl(str)
   return assert((loadstring or load)('return '..str:gsub('%[(.-)]','["%1"]')))()
end

local table_1 = {}
table.insert(table_1, str2tbl(string_1))
table.insert(table_1, str2tbl(string_2))
table.insert(table_1, str2tbl(string_3)) 
```

# javascript - 使第一成分永远无法被删除

> ID：15625017
> 
> 赞同：5
> 
> 时间：2013-03-25T21:22:31.703
> 
> 标签：javascript, jquery, html

我正在制作一个成分应用程序，用户可以在其中插入成分

我的应用程序如下所示：![在此处输入图像描述](../Images/2872765330e808b73da6a7ff63db78f3.png)

如您所见，第一个成分跨度的末尾没有**X**，因为您必须至少有一个成分，但其​​余的成分跨度有。我还在使用[Jquery 可排序插件](http://jqueryui.com/sortable/)，因此如果您在任何成分跨度的外部附近单击，您可以更改成分的顺序。这很好用，除非您移动第一个成分跨度，然后该跨度的末尾没有**X**，即使您将其移动到最后一个位置。

所以我想做的是让第一个成分范围最后总是没有**X**，即使用另一个成分范围切换顺序也是如此。我试过这个：

```
$('ingredientsCOUNT > span:first').hide(deleteButton); 
```

但它没有用？还有其他建议吗？非常感谢所有帮助，这是我的代码：

HTML（可以忽略 php！）

```
<div class='formelementcontainer funky'>
        <label for="ingredient">Ingredients</label>
        <div id='ingredientsCOUNT' class='sortable'>
            <span>
                <input type="text" class='small' name="ingredient" id="ingredient" placeholder='QTY'/>
                <select name='measurements'>
                    <option value='' name='' checked='checked'>--</option>
                    <?foreach ($measurements as $m):?>
                        <option value='<?=$m->id;?>'><?=$m->measurement;?></option>
                    <?endforeach;?>
                </select>
                <input type="text" name="ingredient" id="ingredient" placeholder='Ingredient'/>
            </span>
        </div>
        <div class="clear"></div>
        <div class='addSPAN tabover'>
            <a class='float-right' id='btnAddIngredients' href='#'>Add Ingredient</a>
        </div>
</div> 
```

jQuery

```
(function($) { 
$(document).ready(function () {
    $('#btnAddIngredients').click(function () {
        var num = $('#ingredientsCOUNT span').length;
        var newNum = new Number(num + 1);
        var deleteButton = $("<a class='float-right' style='margin:10px 2px;' href='#'><img src='<? echo base_url()."public/img/delete.png";?>' height='11' width='11' /></a>");
        deleteButton.click(deleteThis);
        $('#ingredientsCOUNT > span:first')
            .clone()
            .attr('name', 'ingredient' + newNum)
            .append(deleteButton)
            .appendTo('#ingredientsCOUNT')
            .fadeIn();
        $('ingredientsCOUNT > span:first').hide(deleteButton); //THIS IS MY SOLUTION THAT DIDN'T WORK
    });
    function deleteThis() {
        var span = $(this).closest('span')
        span.fadeOut('slow', function() { span.remove(); });
    }
    $( ".sortable" ).sortable();       //jQuery Sortable initialized
});

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:26:30.930

用 CSS 隐藏它怎么样？以下假设您向`delete-button`删除链接添加了一个类：

```
#ingredientsCOUNT > span:first-child .delete-button { display: none; } 
```

使用该 CSS，您可以重新排序列表、添加或删除项目，并且第一个删除按钮将永远不会显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:41:35.807

由于`:first-child`在 oldIE ( [https://developer.mozilla.org/en-US/docs/CSS/:first-child#Internet_Explorer_notes](https://developer.mozilla.org/en-US/docs/CSS/:first-child#Internet_Explorer_notes) ) 中很古怪，因此可以像这样使用`Sortable`API：

```
$(".sortable").sortable({
    update: function (event, ui) {
        var rows = $("#ingredientsCOUNT").children("span");
        rows.removeClass("first-child");
        rows.first().addClass("first-child");
    }
}); 
```

（可能有更好的方法来利用`event`和/或`ui`参数）

这样，您就不必确定要向哪一行添加删除按钮；您将始终在 HTML 的每一行中包含一个删除按钮。然后，当排序完成时，`stop`事件中的 jQuery（**编辑：** `update`事件）将隐藏第一行的删除按钮并显示其余部分（通过类）。

当然，你需要这个 CSS：

```
#ingredientsCOUNT > span.first-child a.delete-button {
    display: none;
} 
```

`delete-button`并为您的删除按钮添加一个类`<a>`

**编辑：**

我将`Sortable`方法从更改`stop`为，`update`以便它仅在排序安排实际更改时运行代码，在排序完成后。

# asp.net-mvc-3 - 如何创建水晶报表来列出父子记录？

> ID：15625019
> 
> 赞同：1
> 
> 时间：2013-03-25T21:22:34.657
> 
> 标签：asp.net-mvc-3, linq-to-sql, crystal-reports

我在 .Net 2010 项目中使用 linq to sql，我正在准备列表中的数据以加载 rpt 文件中的数据。

父表（护照）：

```
ID   name   passport_number

1    Donnie 123456

2    Monica 789797

3    John   587123 
```

子表（passport_addons）：

```
ID     parent_id   addon_name

1      2           Bob

2      2           Beverly 
```

我希望 rpt 文件显示所有护照的列表，以及它们下面的 passport_addons 记录（如果存在），例如：

```
ID      NAME     PASSPORT NUMBER

1       Donnie   123456

2       Monica   789797

        Bob

        Beverly

3       John     587123 
```

那可能吗？如果可能的话，如何使用 linq to sql 来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:57:28.870

由于护照上的插件数量有限，最多为 5 个。

我在护照表中添​​加了 10 列，如下所示： addon_1 addon_1_birthday addon_2 addon_2_birthday addon_3 addon_3_birthday addon_4 addon_4_birthday addon_5 addon_5_birthday

可能它不是最好的解决方案，但它已经满足了要求，只为 Crystal Report 使用了 1 个表。

我希望这可以帮助其他有同样问题的人。

# c# - 不能有所需的类 - 具有实体框架的表结构

> ID：15625022
> 
> 赞同：0
> 
> 时间：2013-03-25T21:22:46.243
> 
> 标签：c#, entity-framework, ef-code-first, ef-database-first

这是我的问题的简化版本。考虑一个调查应用程序：

*   有问题，
*   一个问题有很多选项，一个选项只能属于一个问题
*   一个问题应该有一个类别，一个类别可以属于多个问题
*   一个问题可能有很多标签，一个标签可以属于很多问题

此外，我想定义一个问题和其他问题的选项之间的依赖关系，例如，如果用户对“你有车吗？”投了“否”选项。问题，他/她不会被问到“你的车是什么牌子的？”。

由 Code First 创建的自动生成的数据库模式和由数据库首先创建的自动生成的代码都不令人满意。下面是为这两种方法生成的代码和数据库模式。

EF 可以按预期处理 Question - Tag 关系，但它无法处理 Question 和 Option 之间的依赖关系（据我所知），因为 Question 已经有自己的选项。

就 EF 而言，这种情况下理想的代码/数据库设计是什么？

## 代码优先 - 代码

```
public class Question
{
    public long Id { get; set; }
    public string Text { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
    public virtual ICollection<Option> Options { get; set; }
    public virtual ICollection<Option> DependencyOptions { get; set; }

    [ForeignKey("CategoryId")]
    public virtual Category Category { get; set; }
    public long CategoryId { get; set; }
}

public class Option
{
    public long Id { get; set; }
    public string Text { get; set; }

    public virtual ICollection<Question> DependencyQuestions { get; set; }

    [ForeignKey("QuestionId")]
    public virtual Question Question { get; set; }
    public long QuestionId { get; set; }
}

public class Tag
{
    public long Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Question> Questions { get; set; }
}
public class Category
{
    public long Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Question> Questions { get; set; }
} 
```

## 代码优先 - 表格

![代码优先 - 表格](../Images/4402e4a78a893582ff5e916894a5e27b.png)

## Db First - 表

![Db First - 表](../Images/3308cd658a068b7ac913f107a1e9415b.png)

## 数据库优先 - 代码

```
public class Question
{    
    public long Id { get; set; }
    public string Text { get; set; }
    public long CategoryId { get; set; }

    public virtual Category Category { get; set; }
    public virtual ICollection<Option> Options { get; set; }
    public virtual ICollection<Option> Options1 { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
}

public class Option
{    
    public long Id { get; set; }
    public string Text { get; set; }
    public long QuestionId { get; set; }

    public virtual Question Question { get; set; }
    public virtual ICollection<Question> Questions { get; set; }
}

public class Tag
{    
    public long Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Question> Questions { get; set; }
}

public class Category
{    
    public long Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Question> Questions { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:19:55.550

我不确定我是否理解正确，但我认为您将需要（并且已经拥有）一个`many-to-many`on `Option/Question`- 另外，您在它们之间还有一个一对多（所有者）关系。

我没有足够的知识来讨论这是否是最好的解决方案——但是相信你的“依赖”关系（和另一个）......

...为此，您需要“微调”您的关系和索引表。EF/CF 在后台创建默认的，我认为你需要的是在流畅的配置中创建关系 - 并自己添加额外的列。

> 而且我通常建议在代码中进行自己的配置 - 与属性/默认配置 - 就像在任何复杂的场景中一样，它可以为您提供更多选项和控制，更少的错误等。就我而言，我只想知道哪些表和列是为我创建的。

这是一个特定的示例代码（我删除了其他不必要的表，只是 Q/O）...

```
public class QuestionContext : DbContext
{
    public DbSet<Question> Questions { get; set; }
    public DbSet<Option> Options { get; set; }
    public DbSet<QuestionOption> QuestionOptions { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<QuestionOption>()
            .HasKey(i => new { i.OptionID, i.QuestionID });

        modelBuilder.Entity<QuestionOption>()
            .HasRequired(i => i.Opiton)
            .WithMany(u => u.DependencyOptions)
            .HasForeignKey(i => i.OptionID)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<QuestionOption>()
            .HasRequired(i => i.Question)
            .WithMany(u => u.DependencyOptions)
            .HasForeignKey(i => i.QuestionID)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Option>()
            .HasRequired(i => i.Question)
            .WithMany(u => u.Options)
            .HasForeignKey(i => i.QuestionId)
            .WillCascadeOnDelete(false);
    }
}
public class Question
{
    public long Id { get; set; }
    public string Text { get; set; }
    public virtual ICollection<Option> Options { get; set; }
    public virtual ICollection<QuestionOption> DependencyOptions { get; set; }
}
public class Option
{
    public long Id { get; set; }
    public string Text { get; set; }
    // [ForeignKey("QuestionId")]
    public virtual Question Question { get; set; }
    public long QuestionId { get; set; }
    public virtual ICollection<QuestionOption> DependencyOptions { get; set; }
}
public class QuestionOption
{
    public long OptionID { get; set; }
    public Option Opiton { get; set; }
    public long QuestionID { get; set; }
    public Question Question { get; set; }
    public int DependencyType { get; set; }
    public string DependencyNote { get; set; }
    public bool Active { get; set; }
    public bool UseEtc { get; set; }
} 
```

通过以下迁移...

```
 CreateTable(
            "dbo.Questions",
            c => new
                {
                    Id = c.Long(nullable: false, identity: true),
                    Text = c.String(maxLength: 4000),
                })
            .PrimaryKey(t => t.Id);

        CreateTable(
            "dbo.Options",
            c => new
                {
                    Id = c.Long(nullable: false, identity: true),
                    Text = c.String(maxLength: 4000),
                    QuestionId = c.Long(nullable: false),
                })
            .PrimaryKey(t => t.Id)
            .ForeignKey("dbo.Questions", t => t.QuestionId)
            .Index(t => t.QuestionId);

        CreateTable(
            "dbo.QuestionOptions",
            c => new
                {
                    OptionID = c.Long(nullable: false),
                    QuestionID = c.Long(nullable: false),
                    DependencyType = c.Int(nullable: false),
                    DependencyNote = c.String(maxLength: 4000),
                    Active = c.Boolean(nullable: false),
                    UseEtc = c.Boolean(nullable: false),
                })
            .PrimaryKey(t => new { t.OptionID, t.QuestionID })
            .ForeignKey("dbo.Options", t => t.OptionID)
            .ForeignKey("dbo.Questions", t => t.QuestionID)
            .Index(t => t.OptionID)
            .Index(t => t.QuestionID); 
```

您定义了两个单独的关系（一个一对多和另一个 m-to-m），并排。

在`QuestionOption`表中，您现在可以手动指定您需要为依赖项添加的所有内容（这就是您的 DependencyOption - 我只是认为这个命名可以更清楚地说明它）。所以你会有类似的东西`Question(A) -> allows Option(B)`- 但考虑到你的逻辑，你可能需要添加更多。

看起来您需要在两者之间建立关系`Question, Question, Option`- 所以 3 个索引等。鉴于上面的代码，如果需要，您可以通过一个简单的扩展来做到这一点。

```
modelBuilder.Entity<QuestionOption>()
    .HasKey(i => new { i.OptionID, i.QuestionLeftID, i.QuestionRightID });
modelBuilder.Entity<QuestionOption>()
    .HasRequired(i => i.Opiton)
    .WithMany(u => u.DependencyOptions)
    .HasForeignKey(i => i.OptionID)
    .WillCascadeOnDelete(false);
modelBuilder.Entity<QuestionOption>()
    .HasRequired(i => i.QuestionLeft)
    .WithMany(u => u.DependencyOptionsLeft)
    .HasForeignKey(i => i.QuestionLeftID)
    .WillCascadeOnDelete(false);
modelBuilder.Entity<QuestionOption>()
    .HasRequired(i => i.QuestionRight)
    .WithMany(u => u.DependencyOptionsRight)
    .HasForeignKey(i => i.QuestionRightID)
    .WillCascadeOnDelete(false);
modelBuilder.Entity<Option>()
    .HasRequired(i => i.Question)
    .WithMany(u => u.Options)
    .HasForeignKey(i => i.QuestionId)
    .WillCascadeOnDelete(false);
public class Question
{
    public long Id { get; set; }
    public string Text { get; set; }
    public virtual ICollection<Option> Options { get; set; }
    public virtual ICollection<QuestionOption> DependencyOptionsLeft { get; set; }
    public virtual ICollection<QuestionOption> DependencyOptionsRight { get; set; }
}
public class QuestionOption
{
    public long QuestionLeftID { get; set; }
    public Question QuestionLeft { get; set; }
    public long QuestionRightID { get; set; }
    public Question QuestionRight { get; set; }
    public long OptionID { get; set; }
    public Option Opiton { get; set; }
    public int DependencyType { get; set; }
    public string DependencyNote { get; set; }
    public bool Active { get; set; }
    public bool AllowForbid { get; set; }
} 
```

* * *

对于更复杂的场景（在流畅的代码中使用多对多和手动定义关系 - 我推荐） - 看看我刚才制作的这些详细示例 - 它具有您可能需要的大部分映射。

[使用codefirst或fluent API与同一实体的多对多（连接表）关系？](https://stackoverflow.com/questions/10041695/many-to-many-join-table-relationship-with-the-same-entity-with-codefirst-or-fl/10048992#10048992)

[联接表中的 Code First Fluent API 和导航属性](https://stackoverflow.com/questions/10154512/code-first-fluent-api-and-navigation-properties-in-a-join-table/10155439#10155439)

[带有附加数据的 EF 代码优先多对多](https://stackoverflow.com/questions/10199158/ef-code-first-many-to-many-with-additional-data/10199455#10199455)

...如果您需要任何快速指示 - 让我知道问题 - 以及更多细节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:58:00.343

我的理解是您希望后续问题依赖于先前问题的答案...

我的建议是在问题和选项之间建立一个关系表，称为RequiredAnswer。这种关系将表示用户必须已使用相关选项的一个或全部（由您实施）回答了一个或多个问题（您的图表不包括答案表）。然后由代码实现来决定如何使用这种关系。

# c# - .net 中的 IP 路由表查找

> ID：15625023
> 
> 赞同：4
> 
> 时间：2013-03-25T21:22:46.257
> 
> 标签：c#, .net, routing, ip

我有一台多宿主机，需要回答这个问题：

给定远程机器的 IP 地址，哪个本地接口适合用于通信。

这需要在 C# 中完成。我可以使用 Win32 Socket 和 SIO_ROUTING_INTERFACE_QUERY 进行此查询，但在 .net 框架文档中四处寻找我还没有找到它的等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-28T14:54:48.830

有人很好地编写了代码，请参阅[https://searchcode.com/codesearch/view/7464800/](https://searchcode.com/codesearch/view/7464800/)

```
private static IPEndPoint QueryRoutingInterface(
          Socket socket,
          IPEndPoint remoteEndPoint)
{
    SocketAddress address = remoteEndPoint.Serialize();

    byte[] remoteAddrBytes = new byte[address.Size];
    for (int i = 0; i < address.Size; i++) {
        remoteAddrBytes[i] = address[i];
    }

    byte[] outBytes = new byte[remoteAddrBytes.Length];
    socket.IOControl(
                IOControlCode.RoutingInterfaceQuery, 
                remoteAddrBytes, 
                outBytes);
    for (int i = 0; i < address.Size; i++) {
        address[i] = outBytes[i];
    }

    EndPoint ep = remoteEndPoint.Create(address);
    return (IPEndPoint)ep;
} 
```

使用如下（例如！）：

```
IPAddress remoteIp = IPAddress.Parse("192.168.1.55");
IpEndPoint remoteEndPoint = new IPEndPoint(remoteIp, 0);
Socket socket = new Socket(
                      AddressFamily.InterNetwork, 
                      SocketType.Dgram, 
                      ProtocolType.Udp);
IPEndPoint localEndPoint = QueryRoutingInterface(socket, remoteEndPoint );
Console.WriteLine("Local EndPoint is: {0}", localEndPoint); 
```

请注意，尽管使用端口指定`IpEndPoint`了端口，但端口是无关紧要的。此外，返回`IpEndPoint.Port`的始终是`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:31:49.840

我不知道这一点，所以只是查看了 Visual Studio 对象浏览器，看起来您可以从`System.Net.Sockets`命名空间执行此操作。

在该命名空间中是一个`Socket`包含方法的类`IOControl`。此方法的重载之一采用`IOControlCode`（同一命名空间中的枚举），其中包含“RoutingInterfaceQuery”的条目。

我现在尝试将一些代码放在一起作为示例。

# image-processing - 使用绝对像素值裁剪图像

> ID：15625026
> 
> 赞同：0
> 
> 时间：2013-03-25T21:23:02.783
> 
> 标签：image-processing, imagemagick, crop, imagemagick-convert

我正在尝试裁剪图像的一小部分。我为此使用了 ImageMagick 命令，如下所示：

```
convert image.jpg -crop 6x6+16+16 +repage image_crop.jpg 
```

但是，当我尝试比较同一块的两个图像中的像素值时，它不匹配。例如，位置 (16,16) in`image.jpg`的像素值应与 (0,0) in 的像素值匹配`image_crop.jpg`。关于如何裁剪图像以便不修改像素值的任何想法？

注意：我通过将图像数据转储到文本文件中来比较像素值，如下所示：

```
convert image.jpg image.txt 
```

# java - 使用 COM4J 连接到 Quality Center v11

> ID：15625032
> 
> 赞同：3
> 
> 时间：2013-03-25T21:23:29.380
> 
> 标签：java, com4j, hp-quality-center

我正在尝试使用 Java 代码和 com4j 连接到 HP Quality Center V11，但我不断收到以下错误。有人可以看看错误吗？

当我在浏览器中使用 URL 并使用相同的凭据登录时，我能够登录。我仔细检查了我的域、网址、ID 和密码的所有拼写。

我得到的错误：

```
 com4j.ComException: 800403ea (Unknown error) : Failed to Login : .\invoke.cpp:517
    at com4j.Wrapper.invoke(Wrapper.java:166)
    at $Proxy5.connectProjectEx(Unknown Source)
    at com.testpack.TestClass.main(TestClass.java:23)
Caused by: com4j.ComException: 800403ea (Unknown error) : Failed to Login : .\invoke.cpp:517
    at com4j.Native.invoke(Native Method)
    at com4j.StandardComMethod.invoke(StandardComMethod.java:35)
    at com4j.Wrapper$InvocationThunk.call(Wrapper.java:340)
    at com4j.Task.invoke(Task.java:51)
    at com4j.ComThread.run0(ComThread.java:153)
    at com4j.ComThread.run(ComThread.java:134) 
```

我用来连接的代码

```
public static void main(String[] args) {
String url="http://XXXX/qcbin/";
    String domain="ACTIVE";
    String project="QC_2013_Projects";
    String username="XXXX";
    String password="XXXXX";
    try{
        ITDConnection itd=ClassFactory.createTDConnection();
        itd.initConnectionEx(url);
        System.out.println("Test1:"+ itd.connected());

        itd.connectProjectEx(domain,project,username,password);

        //System.out.println(itd.connected());
    }catch(Exception e){

        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-25T13:46:15.703

我按照这些步骤在 Windows 7 32 位机器上使用 com4j 从 Java 代码连接到 HP QC 11

1.  [从https://github.com/downloads/kohsuke/com4j/com4j-20120426-2.zip](https://github.com/downloads/kohsuke/com4j/com4j-20120426-2.zip)下载 Com4j 人工制品 com4j-20120426-2.zip

2.  解压它。打开命令提示符并导航到解压缩的文件夹。然后运行以下命令在 CCCC 位置创建 Wrapper 类，包结构为 DDDD。

```
java -jar tlbimp.jar -o "C:\CCCC" -p "DDDD" "C:\Users\MYACC\AppData\Local\HP\ALM-Client\10\OTAClient.dll"
```

3.  现在从 C:\Users\MYACC\AppData\Local\HP\ALM-Client\10 复制 OTAClient.dll 和 WebClient.dll 并将其保存在 Windows/System32 文件夹中。

4.  执行第 2 步后，您必须在 tlbimp.jar 所在的位置有一个 com4j-x86.dll。现在将该 dll 复制到 Windows/System32 文件夹。

5.  现在具有管理员权限，使用命令 1 逐 1 注册所有 3 个 dll 文件，如下所示。

```
regsvr32 com4j-x86.dll
regsvr32 OTAClient.dll
regsvr32 WebClient.dll
```

6.  现在在 Eclipse 中创建一个 Java 项目。在 src 文件夹中复制步骤 2 中创建的 DDDD 文件夹。在类构建路径中添加 com4j.jar。然后在 java 文件中添加以下代码来测试 HP QC 连接。运行 java 文件以检查结果。

```
ITDConnection itd=ClassFactory.createTDConnection();
itd.initConnectionEx("http://10.10.10.10:8080/qcbin");
System.out.println(itd.connected());
itd.connectProjectEx("DOMAIN_NAME", "PROJECT_NAME", "HPQC_USERID", "HPQC_CREDENTIAL");
System.out.println(itd.projectConnected());
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:05:13.483

我终于能够解决这个问题。我已经安装了 HP ALM QC 客户端。它将安装在以下路径中->您的程序文件->HP->HP ALM 客户端。

安装后，我能够连接到 QC。

希望这可能对其他人有用。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-12T14:03:32.520

```
 // This is a fairly important section for x64 bit machines,
                    // as a note this took me forever to figure out. Basically,
                    // if the DLL is not registered in the SysWOW64 dir then we
                    // are unable to use this as it was created when 32-bit
                    // computers were still all the rage. This is a quick little
                    // hack that registers it if it is needed to be registered.
                    // If it's already registered, this does nothing.
                    try {
                        Runtime.getRuntime()
                                .exec("C:\\windows\\SysWOW64\\regsvr32 /s lib\\OTAClient.dll")
                                .waitFor();
                        Runtime.getRuntime()
                                .exec("C:\\windows\\SysWOW64\\regsvr32 /s lib\\com4j-amd64.dll")
                                .waitFor();
                        Runtime.getRuntime()
                                .exec("C:\\windows\\SysWOW64\\regsvr32 /s lib\\com4j-x86.dll")
                                .waitFor();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Utilities
                                .showError(
                                        new JFrame(),
                                        "OTAClient.dll, com4j-amd64.dll or com4j-x86.dll could not "
                                                + "be registered, program may or may not work on a 64-bit machine "
                                                + "without these files. You can attempt to manually register them, "
                                                + "but this rarely works.");
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

在代码中的任何其他内容之前运行它，这是我用来强制任何机器注册它们的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T15:30:35.260

我在 c:\Windows\SysWOW64 中添加了所有 3 个 .dll 文件并执行了相同的代码。

# c# - 如何通过在 ToolStripSplitButton 上移动鼠标来打开 ToolStripMenuItem 窗口

> ID：15625034
> 
> 赞同：2
> 
> 时间：2013-03-25T21:23:33.947
> 
> 标签：c#, toolstrip

我的一个 c# 应用程序的 ToolStrip 中有四个 ToolStripSplitButton，如下所示。

![在此处输入图像描述](../Images/7c5a126fdf03fefdd54174eb33cc013c.png)

要打开 ToolStripMenuItem 窗口，我必须单击四个 ToolStripSplitButtons 中的任何一个。与此相反，我只想在任何 ToolStripSplitButtons 上移动鼠标（而不是单击它）并将其保留在那里直到 ToolStripmenuItems 窗口出现。我想我需要一个 MouseHover 事件，但不知道该怎么做。我会感谢解决这个问题的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:28:37.867

像这样的东西：

```
public Form1() {
  InitializeComponent();
  toolStripDropDownButton1.MouseEnter += toolStripDropDownButton1_MouseEnter;
}

void toolStripDropDownButton1_MouseEnter(object sender, EventArgs e) {
  toolStripDropDownButton1.ShowDropDown();
} 
```

或者，您可以改用 Hover 事件。

# database - db.query 中的变量使用不当

> ID：15625035
> 
> 赞同：0
> 
> 时间：2013-03-25T21:23:34.707
> 
> 标签：database, web.py

我正在尝试使用 webpy 开发博客。

```
def getThread(self,num):
        myvar = dict(numero=num)
        print myvar
        que = self.datab.select('contenidos',vars=myvar,what='contentTitle,content,update',where="category LIKE %%s%" %numero)

        return que 
```

我已经使用了您在此网络上回答的一些提示，但我只得到了一个

> <type 'exceptions.NameError'> at / global name 'numero' 未定义
> 
> Python C:\xampp\htdocs\webpy\functions.py 在 getThread，第 42 行 `Web GET http://:8080/` ...

我正在尝试选择一些分类的帖子。有一个带有类别名称和 ID 的表。内容表中有一列采用格式为“1,2,3,5”的字符串。

然后我认为我可以使用 LIKE 语句和一些 %something% 魔法来选择正确的条目。但我有这个问题。

我从构建网络的 .py 文件中调用代码，导入语句正常工作 getThread 在此类中定义：

```
class categoria(object):
    def __init__(self,datab,nombre):

        self.nombre = nombre
        self.datab = datab
        self.n = str(self.getCat()) #making the integer to be a string 
        self.thread = self.getThread(self.n)
        return self.thread

    def getCat(self):
        '''
        returns the id of the categorie (integer)
        '''
        return self.datab.select('categorias',what='catId', where='catName = %r' %(self.nombre), limit=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:36:50.937

请检查`db.select`( [http://webpy.org/cookbook/select](http://webpy.org/cookbook/select) ) 的正确语法，您不应使用“%”格式化查询，因为它会使代码容易受到 sql 注入的影响。相反，将 vars 放入 dict 并`$`在查询中引用它们。

```
myvars = dict(category=1)
db.select('contenidos', what='contentTitle,content,`update`', where="category LIKE '%'+$category+'%'", vars=myvars) 
```

将产生这个查询：

```
SELECT contentTitle,content,`update` FROM contenidos WHERE category LIKE '%'+1+'%' 
```

请注意，我反引号`update`是因为它是 SQL 中的保留字。

# selenium - 需要获得相同的 webelement 定位器的出现和任何存在的地方然后单击它

> ID：15625040
> 
> 赞同：1
> 
> 时间：2013-03-25T21:24:00.240
> 
> 标签：selenium, webdriver, selenium-rc, selenium-webdriver

我需要 java webdriver 来单击页面上存在的按钮。元素的出现次数没有固定，但不超过 20。

我尝试使用：

```
 for(i=0; i<=20; i++){
            try{
                driver.findElement(By.cssSelector(".btn.btn-small.btn-list")).isDisplayed();
                present = true;
            } catch(Exception g) {
                present = false;
            }
        if(present) {
            driver.findElement(By.cssSelector(".btn.btn-small.btn-list")).click();
            WaitForPageToLoad(5);
        } else {
            System.out.println(i);
            break;
            }
        } 
```

但这仅适用于单击元素 1 次，而不适用于所有情况。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:37:40.500

在这里，尝试这样的事情：

```
boolean present = false;
List<WebElement> els= d.findElements( By.cssSelector(".btn.btn-small.btn-list"));
d.manage().timeouts().implicitlyWait( 10, TimeUnit.SECONDS );
for ( WebElement we : els ) {
    try{
        if ( we.isDisplayed() ) {
            we.click();
            present = true;
        } else {
            System.out.println("Invisible.");
        }
    } catch( StaleElementReferenceException|NoSuchElementException g) {
        System.out.println("WARNING: " + g.getMessage() );
    }
}
if ( present ) {
    System.out.println("Found bookoo!");
} else {
    System.out.println("Found nada!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:25:31.207

这是另一种不使用隐式等待但显式的方法，它在跨浏览器和跨平台测试时更具可移植性和可维护性。您无需检查元素是否可见/显示，因为 WebDriverWait 明确为您执行此操作。

有关不同类型等待的更多信息，[请参阅以下内容](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)

```
 String CSS_SELECTOR = ".btn.btn-small.btn-list";

   webDriverWait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(By.cssSelector(CSS_SELECTOR)))

   List<WebElement> elements = driver.findElements(By.cssSelector(CSS_SELECTOR));

   for ( WebElement element : elements ) {

        element.click();

   } 
```

# vector - 在给定 4 个浮点数的情况下找到平面的表面法线

> ID：15625041
> 
> 赞同：0
> 
> 时间：2013-03-25T21:24:00.350
> 
> 标签：vector, linear-algebra, normals, plane, cross-product

我的任务是找到一个平面的表面法线，该平面的定义为：

```
struct Plane
{
   float a;
   float b;
   float c;
   float d;
}; 
```

这可能吗？我已经看到了 3 个向量和一个浮点数的计算，但是我不知道该怎么做。我知道如果你有 2 个向量，你可以对它们执行一个叉积来接收表面法线，但是我不知道如何处理 4 个浮点数。

# c++ - 重载运算符<<: 无法绑定 'std::basic_ostream ' 左值到 'std::basic_ostream &&'

> ID：15625042
> 
> 赞同：1
> 
> 时间：2013-03-25T21:24:06.053
> 
> 标签：c++, g++

搜索这个问题的标题给了我很多人引用相同的错误，但在不同的情况下，不幸的是，那里提供的答案是针对他们的情况的，我看不出他们能如何帮助我。

我正在尝试`operator<<`为模板类重载。下面是一个测试用例：

矢量.h：

```
#ifndef __INCL_VECTOR_H__
#define __INCL_VECTOR_H__

#include <array>

template < class T, unsigned int N >
class Vector
{
public:
    Vector();
    Vector( std::array< T, N > );

    template < class U, unsigned int M > friend Vector< U, M > operator+ ( const Vector< U, M >&, const Vector< U, M >& );

    template < class U, unsigned int M > friend std::ostream& operator<< ( std::ostream&, Vector< U, M >& );

    T& operator[] ( const unsigned int& );

protected:
    std::array< T, N > _values;
};

#include "Vector.hpp"

#endif 
```

矢量.hpp：

```
#include "Vector.h"
#include <iostream>

template < class T, unsigned int N >
Vector< T, N >::Vector()
{
}

template < class T, unsigned int N >
Vector< T, N >::Vector( std::array< T, N > otherArray )
{
    _values = *( new std::array< T, N >( otherArray ) );
}

template < class U, unsigned int M >
Vector< U, M > operator+ ( const Vector< U, M > &lhVector, const Vector< U, M > &rhVector )
{
    Vector< U, M > sumVector;

    for( unsigned int i = 0; i < M; i++ )
        sumVector[i] = lhVector[i] + rhVector[i];

    return sumVector;
}

template < class U, unsigned int M >
std::ostream& operator<< ( std::ostream &out, Vector< U, M > &cVector )
{
    out << "< ";

    for( int i = M - 1; i >= 0; i-- )
    {
        out << cVector[i];
        if( i )
            out << ", ";
    }

    out << " >";

    return out;
}

template < class T, unsigned int N >
T& Vector< T, N >::operator[] ( const unsigned int &index )
{
    return _values[ index ];
} 
```

矢量测试.cpp：

```
#include "Vector.h"

#include <iostream>
#include <array>

using namespace std;

int main( int argc, char* argv[] )
{
    Vector< int, 3 > u( array< int, 3 > {  1, 4,  2 } );
    Vector< int, 3 > v( array< int, 3 > { -2, 3, -1 } );

    cout << "u = " << u << endl;
    cout << "v = " << v << endl;
    cout << "u + v = " << u + v << endl;

    return 0;
} 
```

导致错误的行是`cout << "u + v = " << u + v << endl;`; 前两行按预期工作。

报错信息如下（编译为`g++ -std=c++11 Vector.h vectorTest.cpp`）：

```
vectorTest.cpp: In function ‘int main(int, char**)’:
vectorTest.cpp:15:31: error: cannot bind ‘std::basic_ostream<char>’ lvalue to ‘std::basic_ostream<char>&&’
In file included from /usr/include/c++/4.7/iostream:40:0,
                 from Vector.hpp:2,
                 from Vector.h:34:
/usr/include/c++/4.7/ostream:600:5: error:   initializing argument 1 of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char; _Traits = std::char_traits<char>; _Tp = Vector<int, 3u>]’
In file included from Vector.h:34:0:
Vector.hpp: In instantiation of ‘Vector<U, M> operator+(const Vector<U, M>&, const Vector<U, M>&) [with U = int; unsigned int M = 3u]’:
vectorTest.cpp:15:31:   required from here
Vector.hpp:40:9: error: passing ‘const Vector<int, 3u>’ as ‘this’ argument of ‘T& Vector<T, N>::operator[](const unsigned int&) [with T = int; unsigned int N = 3u]’ discards qualifiers [-fpermissive]
Vector.hpp:40:9: error: passing ‘const Vector<int, 3u>’ as ‘this’ argument of ‘T& Vector<T, N>::operator[](const unsigned int&) [with T = int; unsigned int N = 3u]’ discards qualifiers [-fpermissive] 
```

我无法理解这些错误消息告诉我什么。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:29:15.217

**第一个问题：**

要使您的程序编译，只需使用左值引用`const`作为您的第二个参数`operator <<`（在`friend`-declaration 和该函数的定义中）：

```
template < class U, unsigned int M >
std::ostream& operator<< ( std::ostream &out, Vector< U, M > const& cVector )
//                                                           ^^^^^ 
```

您的程序无法编译的原因是您的重载`operator <<`接受对 non- 的左值引用`const`作为其第二个参数，并且对 non- 的左值引用`const` *不能*绑定到右值。

由于`operator +`两个实例之间的结果`Vector`是一个临时的，而一个临时的是一个右值，编译器无法调用您的`operator <<`，因此无法解析调用。

**第二个问题：**

解决上述问题后，您将不得不解决第二个问题：您的`Vector`类模板不提供 的`const`版本`operator []`，因此您的 rewritten `operator <<`（现在接受对`const`向量的引用）将无法访问向量的元素.

```
template < class T, unsigned int N >
class Vector
{
    // ...

    T& operator[] ( const unsigned int& );

    T const& operator[] ( const unsigned int& ) const; // <== ADD THIS!

    // ...
}; 
```

当然还有相应的定义：

```
template < class T, unsigned int N >
T const& Vector< T, N >::operator[] ( const unsigned int &index ) const
{
    return _values[ index ];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:27:47.000

改变这个：

```
std::ostream& operator<< ( std::ostream&, Vector< U, M >& ); 
```

对此：

```
std::ostream& operator<< ( std::ostream&, const Vector< U, M >& );
//                                        ^^^^^ 
```

编译器告诉您，C++ 不允许您将临时变量绑定`Vector`到`u + v`non **-const** `Vector&`。

而且你不修改它`Vector`，所以它*应该*是`const`开始的。

# php - 在 simplecart-js 中的 sendform 结帐后，如何在 php var 中获取 item_size？

> ID：15625044
> 
> 赞同：0
> 
> 时间：2013-03-25T21:24:12.840
> 
> 标签：php, javascript, simplecart

我是一个真正的 javascript 菜鸟，我自己找不到解决方案......我想在一些 php 变量中的 sendform 结帐后取回我的项目的大小。

上下文：
1 - 我有一个产品页面，客户可以在其中选择尺寸和数量并将产品添加到购物篮。
2 - 结帐页面，带有拇指、数量、尺寸价格等，并通过 sendform 进行验证（我在结帐页面上没有任何表单，它只是用于获取 php 中的所有项目变量）
3 - 一个返回的页面php中的所有项目，（客户必须为每个项目上传图片）：

```
$content = $_POST;

$item_number = array(); // compteur d items
$item = array(); // tableaux qui récupere les valeurs de chaque items

for($i=1; $i < $content['itemCount'] + 1; $i++) 
{
$name = 'item_name_'.$i;
$quantity = 'item_quantity_'.$i;
$price = 'item_price_'.$i;
$thumb = 'item_thumb_'.$i;
$id = 'item_id_'.$i;
$size = 'item_size_'.$i;

$item_number['total'] = $i;

$item[$i]['name'] = $content[$name];
$item[$i]['quantity'] = $content[$quantity];
$item[$i]['price'] = $content[$price];
$item[$i]['thumb'] = $content[$thumb];
$item[$i]['id'] = $content[$id];
$item[$i]['size'] = $content[$size];
}

$total = $item_number['total'];
$line = 0;

while ($line <= $total -1) 
{
$line++;
echo $item[$line]['name'];
    echo $item[$line]['size'];
}?> 
```

除了尺寸之外，一切似乎都很好......在项目页面上，我只是使用带有“item_size”类的尺寸选择表单，其正确显示在结帐页面上但是......我的第三页上没有任何内容。 ..

任何人都可以帮我解决这个请求...

编辑：如果有人在我之后想知道这一点，我已经找到了解决方案：
您添加到项目的自定义类属性，在这种情况下

```
class="item_size" 
```

存储在一个名为

```
item_options 
```

因此，您必须在 php 变量中获取 item_option 并使用explode 函数拆分字符链：

```
$content = $_POST;

$item_number = array(); // compteur d items
$item = array(); // tableaux qui récupere les valeurs de chaque items

for($i=1; $i < $content['itemCount'] + 1; $i++) 
{
  //I passed two params in item_options, the size and a path to an picture
  $options = 'item_options_'.$i; //let s get the name of the java var in a php var

  $item_number['total'] = $i; //let s count the number of items

  $item[$i]['options'] = $content[$options]; //let s get the values of item_options
}

$total = $item_number['total'];
$line = 0;

while ($line <= $total -1) 
{
$line++;
$split_options = explode(",", $item[$line]['options']); // explode the chain in few chains                                                  
$split_thumb = explode(":", $split_options[0]); // for each chain, cut the useless part before ":", for exemple thumbPath: ../pictures                                           
$split_size = explode(":", $split_options[1]);

echo $split_thumb[1]; // display the path of my thumb
echo $split_size[1]; // display the size of my item
}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T21:05:28.730

您可以 `data["item_size_" + counter] = item.get("size");` 在 SendForm 函数中将项目添加到文件 simplecart.js

# string - 在多个文件中搜索字符串以将行写入一个文件

> ID：15625045
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:24:15.893
> 
> 标签：string, search, batch-file

我在命令提示符下尝试事情相对较新。最后我想写一个可以做以下事情的批处理文件。

在当前目录（包括所有子目录）中查找名称不包含“foo”或“bar”且扩展名为“txt”的文件，并搜索以“create file”或“create table”开头的行，以便所有相应的匹配行将被放入一个名为“y”的新文件中，格式为找到该行的文件名、文件位置和包含该字符串的实际行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:03.227

从查看这些命令开始。

### 命令

`for`, `find`, `findstr`

使用`/?`论据寻求帮助。

### 批量参考

[SS64](http://ss64.com/nt/) , [DosTips](http://www.dostips.com/) , [Rob van der Woude](http://www.robvanderwoude.com/batchfiles.php) , [Technet](http://technet.microsoft.com/en-us/library/cc772390.aspx)

# gstreamer - 将视频转换为一系列帧图像

> ID：15625046
> 
> 赞同：5
> 
> 时间：2013-03-25T21:24:17.513
> 
> 标签：gstreamer, video-processing

我需要使用网络摄像头捕获视频，并为捕获的每个视频帧输出一个图像。

我曾尝试将 gstreamer 与 multifilesink 一起使用，例如：

```
gst-launch v4l2src device=/dev/video1 ! video/x-raw-yuv,framerate=30/1 ! ffmpegcolorspace ! pngenc ! multifilesink location="frame%d.png" 
```

但是，这实际上并没有输出每一帧，这意味着如果我以 30 fps 录制 2 秒，我不会得到 60 张图像。我假设这是因为编码不能那么快，所以我需要另一种方法。

我认为如果我有一个管道捕获视频，并且一个单独的管道将该视频转换为帧，它可能会起作用，但我对编解码器的了解不够。我是否需要将视频编码为 h264 或 mp4 等文件，然后再次解码？

有没有人有任何想法或建议？请记住，我需要能够在代码中执行此操作，而不是使用诸如 Adob​​e Premiere 之类的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T21:40:20.600

您可以像这样简单地在其中添加一个队列：

```
gst-launch v4l2src device=/dev/video1 ! video/x-raw-yuv,framerate=30/1 ! queue ! ffmpegcolorspace ! pngenc ! multifilesink location="frame%d.png" 
```

这应该确保允许视频捕获以 30 fps 的速度运行，然后可以按照自己的速度将其写入磁盘。请注意，如果您离开此设置太久，队列将变得非常大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-25T08:22:56.337

我最终分两部分进行。

将视频写入文件。

```
gst-launch v4l2src device=/dev/video2 ! video/x-raw-yuv,framerate=30/1 ! xvidenc ! queue ! avimux ! filesink location=test.avi 
```

后期处理。

```
gst-launch-1.0 --gst-debug-level=3 filesrc location=test.avi ! decodebin ! queue ! autovideoconvert ! pngenc ! multifilesink location="frame%d.png" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T13:21:51.177

我必须提供的解决方案不使用 gstreamer，而是使用 ffmpeg。我希望这对你也很好。

如[本论坛帖子](http://ubuntuforums.org/showthread.php?t=1042249)中所述，您可以使用以下内容：

```
ffmpeg -i movie.avi frame%d.png 
```

为视频的每一帧获取 png/jpg 图像。
但根据您使用的输入文件，您可能必须在运行 ffmpeg 之前将其转换为 MPEG vid。

注意：
如果您想在图像文件名中使用前导零，请`%05d`改用（对于 5 位数字，如 C's 中`printf()`）：

```
ffmpeg -i movie.avi frame%05d.png 
```

输出文件格式取决于文件扩展名，因此您可以使用`.jpg`, `.bmp`, ... 而不是`.png`.

# c# - 从列表框选定项添加到数组列表无法正常工作

> ID：15625052
> 
> 赞同：0
> 
> 时间：2013-03-25T21:24:31.807
> 
> 标签：c#, winforms, arraylist, listbox

我有一个程序，我试图`arrayList`通过 a 将项目从一个移动到另一个`listbox`，然后打印出 XML 中的信息，但我遇到的错误是当我经常添加它时，值会重复，当没有重复。

```
ArrayList list1 = new ArrayList();
ArrayList list2 = new ArrayList();
list1.Add(new RandomClass(var1, var2, var3, var4, var5, var6, var7));
foreach (object o in list1)
{
    RandomClass m = (RandomClass)o;
    selectionBox.Items.Add(m);
} 
```

这是我的初始化代码。

```
bool req = true;

if (selectionBox.SelectedItem != null)
{
    Count++;
    errorLabel.Text = "";

    for (int i = 0; i < selectionBox.Items.Count; i++)
    {
        if (selectionBox.GetSelected(i) == true)
        {

            RandomClass m = selectionBox.SelectedItem as RandomClass;
            if (m.var2 == ((RandomClass)selectionBox.Items[i]).var2)
            {
                list2.Add(list1[i]);
            }
        }
    }
}
else
{
    errorLabel.Text = "Error";
} 
```

这是我添加到另一个数组列表的地方。但是，正如我经常说的那样，该项目会重复并且不会有所不同，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:20:57.097

每次扫描并添加第一个列表中的项目时，请尝试清除第二个列表。

```
list2.Clear();
 for (int i = 0; i < selectionBox.Items.Count; i++)
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:22:10.630

我已经用我的班级列表解决了这个问题，似乎没有问题。

```
 List<RandomClass> list2 = new List<RandomClass>(); 
```

然后在添加时，我只需将以下内容放在 if 语句中

```
 list2.Add(m); 
```

# c# - 字符串作为资源文件名

> ID：15625054
> 
> 赞同：1
> 
> 时间：2013-03-25T21:24:40.620
> 
> 标签：c#, resources

我不确定这里的术语，但我需要访问一个特定的资源文件，其名称是计算的字符串。

例如：

我有一个名为**"resFile-en-GB"**的资源文件，我可以使用**"resFile-en-GB.stringKey"**访问里面的字符串。现在我需要将文化信息添加到字符串的末尾。

```
string stringA = "resfile-";
string stringB = "en-GB";
string stringC = stringA + stringB; 
```

现在我需要使用**“stringC”**作为资源文件名，如**“stringC.stringKey”**我将如何去做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:37:30.743

您可以通过[ResourceManager](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx)访问资源，然后使用 GetString(key)，在这种情况下可能更容易：

```
var resourceManager = new ResourceManager(stringC, Assembly.GetExecutingAssembly())
resourceValue = resourceManager.GetString(key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:00:07.430

您可以使用资源文件使您的应用程序多语言。

## 将资源文件添加到您的解决方案

这是显而易见的第一步。例如，将文件夹添加到您的解决方案`ResourceFiles`并添加 resx 文件：

*   语言字符串.resx
*   LanguageStrings-fr-FR.resx
*   LanguageStrings-nl-NL.resx

LanguageStrings.resx 将包含`default`语言，比如说英语。fr-FR 将包含法语，nl-NL 将包含荷兰语。您可以将项目添加到资源文件中。例如 HelloWorld = 你好世界。

对，所以您将 HelloWorld 键添加到您的三个语言字符串 .resx 文件中，并具有正确的翻译。

## 设置文化

在您的应用程序中的某个地方，您希望能够设置语言。它可能在某个事件处理程序中（列表框或您想到的任何东西）。在那里，您想在`LanguageStrings`.

```
var cultureInfo = new System.Globalization.CultureInfo("nl-NL");
System.Threading.Thread.CurrentThread.CurrentCulture = cultureInfo;
LanguageStrings.Culture = cultureInfo; 
```

这会将语言硬编码为荷兰语。显然，您想要创建“nl-NL”变量，以便您可以将语言设置为用户选择的任何语言。

## 获取本地化字符串

最后，您想从资源文件中检索本地化字符串。例如：

```
 label.Text = LanguageStrings.HelloWorld; 
```

魔术就在这里发生了。**您**不必定义应使用哪种语言资源文件来检索本地化字符串。这是*为*您完成的，因为您已经为资源文件 ( `LanguageStrings.Culture = ..`) 设置了所需的语言。

以上是基础，希望对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:37:56.307

[ResourceManager.GetString](http://msdn.microsoft.com/en-us/library/d17ax2xk.aspx)方法应该可以帮助您实现这一点。

# applescript - 如何通过applescript将我的outlook电子邮件的主题发送到mac剪贴板？

> ID：15625056
> 
> 赞同：0
> 
> 时间：2013-03-25T21:24:43.907
> 
> 标签：applescript

我是applescript的新手。我正在尝试使用以下 applescript 获取所选 Outlook (2011) 电子邮件的主题。

```
tell application "Microsoft Outlook"
    set theMessage to the current messages

    get the subject of theMessage

end tell 
```

但我收到以下错误消息。

无法获取 {incoming message id 392990 of application "Microsoft Outlook"} 的主题

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T13:40:22.493

我对 AppleScript 完全陌生......并且我想要一个脚本来从 Outlook 2011 中的特定电子邮件批次中提取“主题行”和“收到日期”的列表。这可能吗？上面的脚本非常适合从一封突出显示的电子邮件中提取主题行。非常感谢西蒙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:41:33.883

这不起作用的原因是将 theMessage 设置为当前消息会返回一个列表。注意 { }

```
tell application "Microsoft Outlook"
    set theMessage to first item of (get current messages)
    set theSubject to the subject of theMessage
end tell

set the clipboard to theSubject 
```

# php - PHP mysqli 准备语句删除前导零

> ID：15625057
> 
> 赞同：1
> 
> 时间：2013-03-25T21:24:44.463
> 
> 标签：php, mysqli, prepared-statement

我试图在我的数据库中输入一个电话号码，该列设置为 varchar(15) 并且在 phpmyadmin 中它将接受一个带有前导 0 的电话号码（例如 07712123123）。

在我的 PHP 脚本中，我有变量 $contactNo ，它是一个包含 07712123123 的字符串

但是当我使用我准备好的语句将数据输入数据库时​​，前导零被删除。我怎样才能阻止这个？

```
// Insert data into customer_accounts
if($stmt = $mysqli -> prepare("INSERT INTO customer_accounts (username, password, firstname, lastname, email, number) VALUES (?,?,?,?,?,?)")) {
    $stmt -> bind_param("ssssss", $username, $password, $firstname, $lastname, $emailAddress, $contactNo);
    $stmt -> execute();
    $stmt -> close();
} 
```

我已经在语句之前和之后回显了变量，并且 0 在那里，因此必须在将其放入数据库时​​将其删除。我是准备好的陈述的新手，我不知道该怎么做才能解决它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:07.627

您在问题中提供的准备好的语句没有流程，所以我猜测存在数据类型的静默转换。

仔细检查该列`number`确实是 type `VARCHAR`。我很确定你在`INT`那里有一个（或类似的）类型。

# c# - 如何将变量从方法拉到主方法？

> ID：15625058
> 
> 赞同：-2
> 
> 时间：2013-03-25T21:24:45.380
> 
> 标签：c#, methods

我试图将返回变量从一些完全像这样设置的方法中提取到另一个方法中。我想以一种对计算机有效的方式来完成它，因为我正在编写一个控制台应用程序，因为这是我目前知道如何使用的主要内容。这样做的原因是使用 SQL 连接到数据库，但我的连接将在连接测试中，然后将在 main 方法中保持连接，因此我需要帮助传递变量。这是相关的代码。

```
 //Create a method to get database name
public static string databname()
{
    Console.WriteLine("Enter the database name.\n");
    string dbasename = Console.ReadLine();
    Console.WriteLine();
    return dbasename;
}

//Create a method to get database password
public static string databpass()
{
    Console.WriteLine("Enter database password.\n");
    string dbasepass = Console.ReadLine();
    Console.WriteLine();
    return dbasepass;
}

//Create a method to get username
public static string usernames()
{
    Console.WriteLine("Enter access username.\n");
    string username = Console.ReadLine();
    Console.WriteLine();
    return username;
}

//Create a method to get user's password
public static string pass()
{
    Console.WriteLine("Enter access password.\n");
    string password = Console.ReadLine();
    Console.WriteLine();
    return password;
} 
```

我想尝试将上述方法中的变量传递到以下位置，因为我不知道如何在 C# 中。我已经尝试并查找了教程和代码片段，但到目前为止没有一个对我有用。

```
//Try to run program
try
{
    //Create display for user to enter info through the methods
    string databaseName = databname();
    string databasePass = databpass();
    string username = usernames();
    string password = pass(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:52:17.387

您有几个选项可以从一个方法返回多条数据，这是我认为您应该考虑的选项排序。

**制作复杂的返回类型**

您可以创建一个表示所需数据的复杂类型，然后返回该类型的实例。在我看来，这通常是您应该追求的模式。例如：

```
public class SomeType
{
    public string Password { get; set; }
    public string SomeOtherValue { get; set; }
} 
```

你的方法是这样的：

```
public SomeType pass()
{
    SomeType instance = new SomeType();
    instance.Password = // get your password
    instance.SomeOtherValue = // get another value

    return instance;
} 
```

**设置全局/实例变量**

在您的对象内部，您可以在代码中设置共享变量，只要您处于同一范围级别，就可以读取这些变量。例如：

```
public class Sample
{
    public static string _sharedVariable = string.Empty;

    public static void DoSomething()
    {
        string result = DoSomethingElse();
        // Can access _sharedVariable here
    }

    protected static string DoSomething()
    {
        _sharedVariable = "hello world";
        return "sup";
    }
} 
```

**制作参考/输出参数**

您可以返回单个数据类型，并将参数指定为`out`参数，这些参数是指定要由方法返回/更改的参数。此方法实际上应该只在特定情况下使用，当方法的返回类型需要是特定类型或者您试图强制执行某种 API 限制时。例如：

```
int outputGuy = 0;

string password = pass(out outputGuy); 
```

你的方法看起来像这样：

```
public string pass(out string outputGuy)
{
     outputGuy = "some string"; // compiler error if you dont set this guy!
     return // some password
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:51:07.273

这是如何使用`out`参数的示例代码

在你的**Main()**

```
{
...
string name,pass;
GetInputData(out name, out pass);
...

} 
```

用一种方法获取所有内容：

```
public static void GetInputData(out string pass, out string name)
{
Console.WriteLine("Enter name:");
name = Console.ReadLine();
Console.WriteLine("Enter pass:");
pass = Console.ReadLine();
} 
```

# jakarta-ee - 从 Java EE Web 应用程序传递 cookie 以连接到另一个应用程序

> ID：15625059
> 
> 赞同：0
> 
> 时间：2013-03-25T21:24:49.990
> 
> 标签：jakarta-ee, post, cookies

有一个 Java EE Web 应用程序。在应用程序中，一旦用户登录，他们可以单击一个链接，该链接将打开另一个浏览器窗口，该窗口将向他们转发第二个应用程序。

但是，我需要能够将第一个应用程序 Java EE Web 应用程序中的 cookie 设置到为第二个应用程序打开的浏览器中。这是因为第二个应用程序依赖该 cookie 来验证第二个应用程序的用户身份：如果您愿意，可以进行身份​​验证。第二个应用程序检查该 cookie 以验证用户的真实性，并打开第二个应用程序。

我很想知道我将如何实施这个解决方案。是否有任何 Java 库可以让我这样做？如果是这样，哪些是推荐的？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:46:59.717

看起来您正在寻找的是单点登录解决方案，请查看[JOSSO](http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home)

您可能还会发现[此其他相关帖子](https://stackoverflow.com/questions/173704/which-sso-framework-to-use)很有用。

[此演示文稿](http://www.slideshare.net/craigsdickson/fast-and-free-sso-a-survey-of-open-source-solutions-to-single-sign-on)应该是决定选择哪种解决方案的良好开端。

# javascript - 发布 json stringify 响应 403 Forbidden

> ID：15625063
> 
> 赞同：0
> 
> 时间：2013-03-25T21:25:10.693
> 
> 标签：javascript, json, post

我正在尝试发布 json 数据

```
 var details= jQuery("#list").jqGrid('getRowData');
$.post("someurl", { szVoucherNo: VoucherNo, dtmTransaction: Transaction, details: JSON.stringify(details) } ); 
```

但后来我收到了来自服务器的 403 禁止响应。

请你能告诉我我做错了什么吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:30:38.883

从客户端您不能向任何其他域（甚至不是相同的域，不同的端口，如：81）然后主机本身发出请求。这是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

但是有一些解决方法来代理此类请求，请参阅[Q: Make cross-domain ajax JSONP request with jQuery](https://stackoverflow.com/questions/11736431/make-cross-domain-ajax-jsonp-request-with-jquery?lq=1)和[Q: Ajax cross domain call](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call?rq=1)

# sql-server - 将 sql server 查询输出从 ssis 导出到文本文件，包括列标题

> ID：15625064
> 
> 赞同：4
> 
> 时间：2013-03-25T21:25:23.747
> 
> 标签：sql-server, sql-server-2008, ssis

我一直在尝试将 SqlServer sql 查询（存储过程）的输出导出到文本文件。我使用具有 OLEDB 源和平面文件目标的数据流任务来实现它。

我还想在文本文件中获取列标题以及查询结果，但我不知道如何包含列标题。

我想在 SSIS 中动态执行此操作

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T22:26:01.793

1.  OLEDB Source，连接数据库。使用表格或最好使用 SELECT 语句（不是 select *，正如您所知，我敢肯定）。
2.  平面文件目标。将它们连接在一起。在 Flat File Destination Editor 中，单击 New... 选择 Delimited（例如）。给一个文件名。说 C:\temp\a.csv。选中第一个数据行中的列名。单击左窗格中的列部分。您应该看到您的列名。您可以在“高级”部分更改这些名称。现在，转到映射列，并映射列。

特别注意：不要在存储过程中使用 select 语句作为数据源。参考：[http ://www.jasonstrate.com/2011/01/31-days-of-ssis-no-more-procedures-2031/](http://www.jasonstrate.com/2011/01/31-days-of-ssis-no-more-procedures-2031/)

请回复。

# c++ - 使用文档字符串定义 boost::function (Boost::Python)

> ID：15625065
> 
> 赞同：1
> 
> 时间：2013-03-25T21:25:29.247
> 
> 标签：c++, boost-python, docstring

我只是有一个函数对象：

```
boost::function<int(int)> func = /** ... **/; 
```

并希望使用文档字符串将其公开给 Python。
但很明显：

```
def("func", func, "Some boring documentation goes here."); 
```

失败并显示有趣的约 2500 行消息。

有任何想法吗？

* * *

**编辑：**我做了其他测试：

```
def("func", func); // doesn't compile

def("func",
   make_function(
     func,
     default_call_policies(),
     vector<int,int>()
   )
); // compiles

def("func",
   make_function(
     func,
     default_call_policies(),
     vector<int,int>()
   ),
   "Some boring documentation goes here"
); // doesn't compile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:48:13.877

文档提到只有在[`boost::python::def()`](http://www.boost.org/doc/libs/1_59_0/libs/python/doc/v2/def.html#def-spec)提供非空函数或成员函数指针时才能提供文档字符串。一种[解决方案](http://coliru.stacked-crooked.com/a/81158881b6498e40)是将函数对象调用包装在一个函数中：

```
#include <boost/function.hpp>
#include <boost/python.hpp>

int times_two(int x) { return x * 2; }

boost::function<int(int)> func = &times_two;

int times_two_wrap(int x) { return func(x); }

BOOST_PYTHON_MODULE(example)
{
  namespace python = boost::python;
  python::def("times_two", &times_two_wrap,
              "returns two times the supplied value");
} 
```

交互使用：

```
>>> import example
>>> assert(6 == example.times_two(3))
>>> print help(example.times_two)

times_two( (int)arg1) -> int :
    returns two times the supplied value

    C++ signature :
        int times_two(int)
>>> 
```

* * *

Boost.Python 有多个 API 层。最高层大多有文档记录，但它使用了文档较少的低级 API。在这种特殊情况下，高级 API 似乎无法很好地转发到低级 API。可以改为使用 创建一个 python 函数[`boost::python::make_function()`](http://www.boost.org/doc/libs/1_59_0/libs/python/doc/v2/make_function.html)，然后使用较低级别的`boost::python::objects::add_to_namespace()`函数，如下[所示](http://coliru.stacked-crooked.com/a/f793fd1d281346a0)：

```
#include <boost/function.hpp>
#include <boost/python.hpp>

int times_two(int x) { return x * 2; }

boost::function<int(int)> func = &times_two;

BOOST_PYTHON_MODULE(example)
{
   namespace python = boost::python;
   // Wrap the functor in a Python object.
   python::object py_func = python::make_function(
     func,
     python::default_call_policies(),
     boost::mpl::vector<int, int>());
   // Add the function directly to the namespace.
   python::objects::add_to_namespace(
     python::scope(), // current namespace,
     "times_two",     // function name,
     py_func,         // function,
     "returns two times the supplied value");
} 
```

这会产生与交互式使用相同的输出。两种方法之间唯一显着的行为差异是，第一个示例允许通过将新值分配给`func`.

# c++ - 在 DirectX 中围绕质心旋转等边三角形

> ID：15625066
> 
> 赞同：0
> 
> 时间：2013-03-25T21:25:31.250
> 
> 标签：c++, rotation, geometry, directx, centroid

我有一个项目，我想制作一个使用小行星式飞船的游戏，以展示 AI 寻路和转向行为。

该对象存储三角形质心位置的值（否则玩家的位置）和船只的方向（以度为单位），然后计算三个顶点的位置，如下所示：

A是三角形的鼻子。当方向为 0 度时，船头位于偏移 SIZE 的 X 轴上，这决定了船的大小，等于其边界圆的半径。

顶点 B 和 C 分别从 A 的位置旋转 120 度和 240 度，然后程序在每个顶点之间绘制线段。

当我启动程序时，它运行得很好，我的边界圆、方向向量和船看起来就像我期望的那样。

但是，我实现了一个控件，以便使用左右箭头键递增和递减角度。该控件已经过测试并证明可以按预期工作。发生这种情况时，方向矢量会相应调整，船会旋转……但只是某种程度。这些点立即移动到质量的中心，直到它们在中心塌陷并永远消失，无论我向哪个方向旋转。

```
//Convert degrees into radians
float Ship::convert(float degrees){
    return degrees*(PI/180);
}

//Rotation X-Coord
int Ship::rotateX(int x, int y, float degrees){
    return (x*cos(convert(degrees)))-(y*sin(convert(degrees)));
}

//Rotate Y-Coord
int Ship::rotateY(int x, int y, float degrees){
    return x*sin(convert(degrees))+y*cos(convert(degrees));
}

//Rotate the Ship
void Ship::rotateShip(float degrees){
    vertA [0]=rotateX(vertA [0], vertA [1], degrees);
    vertA [1]=rotateY(vertA [0], vertA [1], degrees);
    vertB [0]=rotateX(vertB [0], vertB [1], degrees);
    vertB [1]=rotateY(vertB [0], vertB [1], degrees);
    vertC [0]=rotateX(vertC [0], vertC [1], degrees);
    vertC [1]=rotateY(vertC [0], vertC [1], degrees);
} 
```

旋转功能工作正常，但我不能确定旋转 Ship 是否正常工作。看起来它应该 - vert 变量是存储该顶点的 X 和 Y 坐标的数组。如果我按船的方位角旋转每个顶点，理论上它应该在其中心旋转三角形，对吗？

verts 都是关于原点校准的，Game 对象中的 drawShip() 函数获取这些坐标并添加 playerX 和 playerY 以将完全绘制的船平移到玩家的位置。所以本质上，将其平移到原点，旋转它，然后将其平移回玩家的位置。

如果有帮助，我将包含来自游戏对象的相关功能。在此代码中， psp 是 Ship 对象。Draw ship 采用了 ship 对象的所有参数并且应该可以工作，但是我得到了不需要的结果。

```
//Draw Ship
void Game::drawShip1(int shipX, int shipY, int vel, int alpha, int size, int* vertA, int* vertB, int* vertC, int r, int g, int b){
    //Draw a bounding circle
    drawCircle(shipX, shipY, size, 0, 255, 255);
    //Draw the ship by connecting vertices A, B, and C
    //Segment AB
    drawLine(shipX+vertA[0], shipY+vertA[1], shipX+vertB [0], shipY+vertB [1], r, g, b);
    //Segment AC
    drawLine(shipX+vertA[0], shipY+vertA[1], shipX+vertC [0], shipY+vertC [1], r, g, b);
    //Segment BC
    drawLine(shipX+vertB[0], shipY+vertB[1], shipX+vertC [0], shipY+vertC [1], r, g, b);

}

void Game::ComposeFrame()
{
    float pAlpha=psp.getAlpha();
    if(kbd.LeftIsPressed()){
        pAlpha-=1;
        psp.setAlpha(pAlpha);
        psp.rotateShip(psp.getAlpha());
    }
    if(kbd.RightIsPressed()){
        pAlpha+=1;
        psp.setAlpha(pAlpha);
        psp.rotateShip(psp.getAlpha());
    }
    //Draw Playership
    drawShip1(psp.getX(), psp.getY(), psp.getV(), psp.getAlpha(), psp.getSize(), psp.getVertA(), psp.getVertB(), psp.getVertC(), psp.getR(), psp.getG(), psp.getB());
    drawLine(psp.getX(), psp.getY(), psp.getX()+psp.rotateX(0+psp.getSize(), 0, psp.getAlpha()), psp.getY()+psp.rotateY(0+psp.getSize(), 0, psp.getAlpha()), psp.getR(), psp.getG(), psp.getB());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:42:00.057

我在您的代码中看到了几个问题，这些问题可能会增加您所看到的结果。

第一件事是将坐标作为整数处理。因此，小数位被截断，值越来越小。使用浮点数甚至双倍。

第二件事是分两步应用旋转。第一步（计算x坐标）是正确的。但是，第二步（计算 y 坐标）是错误的。您使用新的 x 坐标，但应提供旧的 x 坐标。无论如何，您应该实现一个旋转完整向量而不是其中一部分的方法。为什么不使用 DirectX 数学函数？

# prototypejs - Prototype.js 事件观察点击拦截并停止传播

> ID：15625069
> 
> 赞同：3
> 
> 时间：2013-03-25T21:25:42.873
> 
> 标签：prototypejs, buttonclick, stoppropagation

我有一个围绕包装器构建的页面，该包装器具有一些非常明确的逻辑。包装后的表单底部有一个保存按钮，如下所示：

```
<form>
... my page goes here...
<input id="submitBtnSaveId" type="button" onclick="submitPage('save', 'auto', event)" value="Save">
</form> 
```

这不能改变...

现在，我正在将一些 javascript 编写到加载到“......我的页面在这里......”的页面中。代码加载良好并按预期运行。它围绕表单元素做了一些工作，我什至注入了一些页面验证。这就是我卡住的地方。如果验证失败，我正在尝试“拦截”onclick 并阻止页面调用“submitPage()”。我正在使用prototype.js，所以我尝试了所有这样的变体和组合：

```
document.observe("dom:loaded", function() {
    Element.observe('submitBtnSaveId', 'click', function (e) {
        console.log('Noticed a submit taking place... please make it stop!');
        //validateForm(e);
        Event.stop(e);
        e.stopPropagation();
        e.cancelBubble = true;
        console.log(e);
        alert('Stop the default submit!');
        return false;
    }, false);
}); 
```

没有什么能阻止“submitPage()”被调用！观察实际上起作用并触发控制台消息并显示警报一秒钟。然后“submitPage()”启动，一切都再见了。我已经删除了附加到 Firebug 中按钮的 onclick，并且我的验证和警报都按预期工作，所以它让我认为传播并没有真正停止 onclick？

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:47:04.900

因此，基于您无法更改 HTML 的事实 - 这是一个想法。

保留当前的 ​​javascript 以捕获点击事件 - 但将其添加到 dom:loaded 事件

```
$('submitBtnSaveId').writeAttribute('onclick',null); 
```

这将删除 onclick 属性，因此*希望*不会调用该事件

所以你的 javascript 看起来像这样

```
document.observe("dom:loaded", function() {
    $('submitBtnSaveId').writeAttribute('onclick',null);
    Element.observe('submitBtnSaveId', 'click', function (e) {
        console.log('Noticed a submit taking place... please make it stop!');
        //validateForm(e);
        Event.stop(e);
        e.stopPropagation();
        e.cancelBubble = true;
        console.log(e);
        alert('Stop the default submit!');
        return false;

        submitPage('save', 'auto', e);
        //run submitPage() if all is good
    }, false);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:43:06.053

我接受了 Geek Num 88 提出的想法并将其扩展以完全满足我的需要。我不知道覆盖属性的能力，太棒了！问题仍然是，如果一切正常，我需要运行 submitPage()，并且该方法的参数和调用每页可能不同。这最终比简单地呼吁成功更棘手。这是我的最终代码：

```
document.observe("dom:loaded", function() {
    var allButtons = $$('input[type=button]');
    allButtons.each(function (oneButton) {
        if (oneButton.value === 'Save') {
            var originalSubmit = oneButton.readAttribute('onclick');
            var originalMethod = getMethodName(originalSubmit);
            var originalParameters = getMethodParameters(originalSubmit);
            oneButton.writeAttribute('onclick', null);
            Element.observe(oneButton, 'click', function (e) {
                if (validateForm(e)) {
                    return window[originalMethod].apply(this, originalParameters || []);
                }
            }, false);
        }
    });
});

function getMethodName(theMethod) {
    return theMethod.substring(0, theMethod.indexOf('('))
}

function getMethodParameters(theMethod) {
    var parameterCommaDelimited = theMethod.substring(theMethod.indexOf('(') + 1, theMethod.indexOf(')'));
    var parameterArray = parameterCommaDelimited.split(",");
    var finalParamArray = [];
    parameterArray.forEach(function(oneParam) {
        finalParamArray.push(oneParam.trim().replace("'","", 'g'));
    });
    return finalParamArray;
} 
```

# java - （Java 参考情况）我应该按照 findbugs 工具告诉我的去做吗？

> ID：15625070
> 
> 赞同：3
> 
> 时间：2013-03-25T21:25:45.357
> 
> 标签：java, performance

我在我的项目上运行 Findbug 工具，它发现了 18 个类型的问题：

**存储对可变对象的引用**->**可以通过合并对可变对象的引用来公开内部表示**

所以我有一个类，构造函数接受 Object 类型的数组并将其分配给私有类成员变量。这是一个例子：

```
public Class HtmlCellsProcessing extends HtmlTableProcessing
{
    private Object[] htmlCells;

    public HtmlCellsProcessing(Object[] htmlCells)
    {
        this.htmlCells = htmlCells;
    }
} 
```

以下是有关警告的进一步说明：

*此代码将对外部可变对象的引用存储到对象的内部表示中。如果实例由不受信任的代码访问，并且对可变对象的未经检查的更改会危及安全性或其他重要属性，则您将需要做一些不同的事情。在许多情况下，存储对象的副本是更好的方法。*

他们给我的建议很明显，但是如果数组的大小非常大并且如果我将其值复制到成员变量数组中，应用程序将占用两倍的内存会发生什么。

在我有大量数据的情况下应该怎么做？我应该将它作为参考传递还是总是复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:07:52.777

这取决于。您有多个问题，包括空间、时间和正确性。

防御性副本可帮助您确保列表项在不知道持有数组的类的情况下不会更改。但这需要 O(n) 的时间和空间。

对于一个非常大的数组，您可能会发现防御性副本在空间和时间上的成本对您的应用程序是有害的。如果您通过访问数组来控制所有代码，那么在没有防御性副本的情况下保证正确性并抑制该类的 FindBugs 警告可能是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:30:48.593

我建议你尝试使用 guava 库中的不可变列表。请参阅[http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained](http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:33:47.950

如果同时需要封装和性能，典型的解决方案是传递对不可变对象的引用。

因此，与其直接传递一个巨大的数组，不如将其封装在一个不允许修改数组的对象中：

```
final class ArraySnapshot {
    final Object[] array;

    ArraySnapshot(Object[] array) {
        this.array = Arrays.copyOf(array);
    }

    // methods to read from the array
} 
```

这个对象现在可以廉价地传递，但由于它是不可变的，因此可以确保封装。

这个想法，当然，如果没有什么新意的话：它就是`String`为`char[]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:34:22.557

> 他们给我的建议非常明显，但是如果数组的大小非常大并且如果我将其值复制到成员变量数组中，应用程序将占用两倍的内存会发生什么。

在 Java 中，您*复制引用而不是对象本身*，除非您进行深度复制。
因此，如果您唯一关心的是摆脱警告（这是有效的，但特别是如果您不了解您实际存储的内容并且您有多个线程修改对象），您可以在不担心内存的情况下进行复制。

# android - onBackPressed - 避免破坏活动

> ID：15625072
> 
> 赞同：3
> 
> 时间：2013-03-25T21:25:54.747
> 
> 标签：android, android-activity, activity-lifecycle

我有两个活动 - 活动 A 启动活动 B。然后活动 B 从数据库加载一些东西，并可视化数据。完全初始化 B 中的所有内容需要一些时间（5-10 秒）。

我的问题是，如果我在 B 中按下后退按钮，它会破坏 B 活动（调用 onDestroy）并返回到活动 A。我仍然想返回到活动 A，但**不破坏 B**，因为如果我再次启动 B，我必须在它完成所有工作之前再次等待（这很烦人）。这有可能吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:38:41.240

您可以使用`Fragment`s，但您真正想做的是缓存信息。否则，无论如何您都会重新加载设备旋转（除非您使用`Fragment`s 和`setRetainInstance`true，但这可能会导致其他问题）。

我会`CursorLoader`在活动 B 上使用 a `onCreate`。`onLoadFinished`您缓存结果并设置您的 UI。在随后的加载中，结果被缓存并且您放弃加载器。`CursorLoader`更重要的是，如果底层数据库结果发生变化，使用会提醒您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:35:04.270

我认为您没有从正确的角度看待问题。

我想说，如果 Android 想要，你不能阻止 B 被销毁（因为它由它来处理活动）。但是，您可以选择将所有长时间的初始化移到可以一直保留的第三类中。所以你应该让这个初始化阶段独立于你的 B 活动。

我认为将所有这些都放在 Application 类的属性中是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:30:22.633

也许你可以使用[AndroidFragments](https://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:40:33.920

使用**[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html)**存储键值对，然后用于`getSharedPreferences()`检索它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T21:40:46.880

当您按下返回按钮时，Activity b 被破坏。这就是安卓的工作方式。我不会尝试覆盖默认功能

一旦你从数据库中获取数据，你就可以缓存一些地方并加载它。

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)。检查保存缓存文件下的主题。

# java - 休眠：空集合而不是延迟加载错误

> ID：15625074
> 
> 赞同：3
> 
> 时间：2013-03-25T21:26:00.297
> 
> 标签：java, hibernate, serialization, lazy-loading

我有一个由 Hibernate 加载的 ORM 实体，当我需要它们时会加载某些关联 LAZY。该实体通过 MQ 传输到客户端应用程序（客户端是 .NET，因此我使用 MessagePack 进行序列化/反序列化），当实体由 MsgPack 序列化时，它尝试访问延迟加载的关联并且失败，因为会话已经关闭。即使它没有失败，我也不希望它在某些情况下加载关联。

有没有办法告诉休眠用空值而不是代理填充某些查询结果的惰性关联，还是我必须迭代返回的列表并自己执行这些更改？

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:34:00.027

你别无他法，只能使用[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)对象，通过MQ传输，

1.  使用休眠从数据库加载实体
2.  将其转换为实现`Serializable`.
3.  使用 MQ 将其​​传输给消费者
4.  将其转换为另一侧的任何其他实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:32:57.407

我认为@Transient 只适用于ORM。如果您不希望您的字段被序列化，您应该使用关键字“transient”。

```
private transient List<Object> myTransientList; 
```

# android - 我可以将 SQLite 数据库的内容放到计算机上吗

> ID：15625075
> 
> 赞同：0
> 
> 时间：2013-03-25T21:26:04.930
> 
> 标签：android, android-sqlite

我对这个 android 应用程序开发业务非常陌生，作为 SQLite 的介绍，我想我会创建一个简单的调查应用程序来记录人的姓名、年龄和最喜欢的电视频道。我想知道虽然记录的结果是否可以导出到计算机进行分析，例如文本文件、excel 表、sql server 表？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:36:14.033

检查这些帖子：

**[在设备上调试 sqlite 数据库](https://stackoverflow.com/questions/6928849/debugging-sqlite-database-on-the-device)**

**[从开发PC访问android sqlite数据库](https://stackoverflow.com/questions/7879471/access-android-sqlite-database-from-development-pc)**

**[将 sqlite 数据库从设备复制到 PC](https://stackoverflow.com/questions/6012255/copy-sqlite-database-from-device-to-pc)**

以后请在提问前**做好功课。**

# iphone - 无法显示 UIWebView 以显示带有 SFUZipEndOfCentralDirectoryError 自定义 URL 错误的 docx/xlsx 文件

> ID：15625077
> 
> 赞同：2
> 
> 时间：2013-03-25T21:26:14.053
> 
> 标签：iphone, ios, uiwebview

我们正在编写一些程序来在 iOS 上显示文档。我认为网络上有很多关于 iOS UIWebView 可以显示什么类型的文档的混淆。一般大家参考[技术问答 QA1630 Using UIWebView to display selected document types](http://developer.apple.com/library/ios/#qa/qa1630/_index.html#//apple_ref/doc/uid/DTS40008749)看到 MS office 07+ 文件（如 docx、xlsx、pptx）都无法显示，但实际测试中并非如此。实际上，我们可以在 UIWebView 上显示 docx/xlsx/pptx 文档，无论是从远程 URL、本地文件还是在内存中加载（loadData，这里 baseURL 在模拟器上不能为 nil，请参阅[此链接](https://stackoverflow.com/questions/2764709/iphone-uiwebview-loaddata-does-not-work-with-certain-types-excel-msword-ppt)）。当然，我们正在 iPhone 模拟器上测试最新版本的 iOS，可能是旧 iOS 不支持。在这一点上，我们还不知道。如果你知道，请告诉我。

但是现在，出于安全原因，我们有一个问题是使用自定义 URL 在 UIWebView 上显示文档。我按照以下代码创建了自定义 URL：[protecting iOS resource](http://aptogo.co.uk/2010/07/protecting-resources/)。我们可以显示 xls、doc、ppt、pdf 文件，但不能显示 docx/xlsx/pptx，我们遇到如下错误：

```
EXCEPTION SFUZipEndOfCentralDirectoryError: Could not find the end of central directory record 
```

我们试图调试，但不知道在这里做什么。您在这里看到类似的错误吗？任何人都可以对此有所了解吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:44:10.647

您尝试打开的文档似乎已损坏。docx、xlsx 和 pptx 文件实际上是包含一堆 XML 文档和其他数据的 zip 文件。检查您是否能够通过将文件重命名为 .zip 然后解压缩来解压缩计算机上的文件。

# gradle - 必须从项目中加载已编译类的 Gradle 插件

> ID：15625080
> 
> 赞同：3
> 
> 时间：2013-03-25T21:26:21.827
> 
> 标签：gradle

作为为[Flyway](http://flywaydb.org)编写 Gradle 插件的一部分，我们在处理 Java 迁移时偶然发现了一个问题。

在其类路径上为项目的已编译类提供 Gradle 插件访问权限以便它可以加载和执行它们的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:37:52.253

所以情况是我们有一个插件，它添加了一个任务，该任务想要执行该插件所应用的项目中包含的代码。在这种情况下，任务（类）应该有一个类型的输入属性，`Iterable<File>`该属性（由插件）使用要执行的代码的类路径（例如`sourceSets.main.runtimeClasspath`）进行配置。然后，该任务可以选择以下方式来执行代码：

*   该任务用于`project.javaexec {}`在单独的 JVM 中执行代码。如果代码不能直接执行，则任务可能需要将一些引导代码注入到`javaexec`类路径中。使用的潜在替代方法`project.javaexec`是首先使用`JavaExec`任务。
*   该任务创建一个新的类加载器，用类路径填充它，加载并实例化用作 API 入口点的类，并在适当的时候使用它们。如果任务是用 Groovy 编写的，它可以利用鸭子类型，并且除了创建入口点之外不需要反射代码。

# ruby-on-rails - 如何查询未完成的 habtm 关系？

> ID：15625081
> 
> 赞同：1
> 
> 时间：2013-03-25T21:26:22.360
> 
> 标签：ruby-on-rails, activerecord, has-and-belongs-to-many

我在 HABTM 关系中有帖子和标签（使用 Mysql 适配器的活动记录）。我应该如何查询没有标签的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:13.343

您可以尝试在查询中包含标签，然后遍历数组，只选择没有关联标签的帖子。

```
Post.includes(:tags).select { |post| post.tags.empty? } 
```

*注意：你也可以看看[这个问题](https://stackoverflow.com/questions/15618583/find-tags-with-articles/15623284#15623284)，我今天早些时候建议了一个答案。也许其他一些可能更有效的想法也会出现。有趣的是，这些问题有时如何结合在一起:-D。*

# jboss - URL 中的用户名（JBOSS + primefaces）

> ID：15625086
> 
> 赞同：0
> 
> 时间：2013-03-25T21:26:32.680
> 
> 标签：jboss, primefaces

我有一个 JBoss 应用程序服务器，我在其上部署了一个 primefaces 应用程序。我想给用户一个地址，例如：

```
"username.mysite.com"
"jondoe.mysite.com"
"user2.mysite.com" 
```

和用户名将是它的帐户。所以他只需要输入他的密码而不是用户名。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:39:34.793

是的，这是可能的。[您可以在此线程](https://stackoverflow.com/questions/9862584/programmatically-create-subdomains-with-jboss-and-java)上阅读映射子域，在此之后它只是询问密码并基于此进行身份验证。

# android - 如何修复 calabash-android 中运行测试中的错误？

> ID：15625087
> 
> 赞同：0
> 
> 时间：2013-03-25T21:26:32.813
> 
> 标签：android, calabash

我正在使用 Calabash-Android，当我使用这个命令运行时：

```
calabash-android run <apk> 
```

我收到此错误：

```
AndroidManifest.xml:8: error: No resource identifier found for attribute 'required' in package 'android'
~/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/calabash-android-0.4.2/bin/calabash-android-build.rb:26:in `block (2 levels) in calabash_build': Could not create dummy.apk (RuntimeError) 
```

关于如何解决这个问题的一些想法？

我的配置：

*   rbenv 版本 1.9.3-p392
*   葫芦-android 版本 0.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:59:53.200

我认为安装较新版本的 Android SDK 将解决您的问题。

`android:required`很晚才推出——我认为是在 api 级别 5 左右。

# ios - 如何以编程方式将属性添加到现有的核心数据实体（对象）？

> ID：15625088
> 
> 赞同：1
> 
> 时间：2013-03-25T21:26:38.983
> 
> 标签：ios, objective-c, core-data, nsentitydescription

我想在我的应用程序运行时以编程方式将属性添加到实体。

这是您建议做的事情还是会导致问题？

我需要如何结合`NSAttributeDescription`和`NSEntityDescription`？我熟悉使用 Xcode 创建模型，但还没有使用它`NSEntityDescription`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:38:08.170

理论上是可行的，但似乎不太实用。

您可以以`NSManagedObjectModel`编程方式修改`NSEntityDescription`. 请注意，如果您修改已实例化的模型，则`-setEntities:`(NSManagedObjectModel) 和(NSEntityDescription) 都会触发异常。`-setProperties:`所以你不能修改现有模型的结构。您必须创建一个新的，并将所有数据从旧的 Core Data 堆栈复制到基于您的新模型的新堆栈中。

使用 NSMutableDictionary 是一种更明智的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:28:39.913

这是[一篇](http://www.2pi.dk/tech/cocoa/dynamic_attributes.html)非常详细地讨论这个问题的文章。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T11:36:21.647

我在这里使用**了几乎相同的技术**：[EPPZQueuedObject.h](https://github.com/eppz/eppz-coreData/blob/master/eppz!coreData/EPPZQueuedObject.m)

虽然，我认为在运行时改变实体架构**可能会导致不兼容问题**（实际上是一个例外），但当存储的 SQLite 数据在启动时不适合您的初始实体时。

所以这个通用对象 EPPZQueuedObject 根本就是一个有两个属性的对象，所以我无意只为此目的使用一个单独的模型文件。但是**这种结构在运行时不会发生变异**。

```
@implementation EPPZQueuedObject

@dynamic creationDate;
@dynamic archivedObject;

+(NSEntityDescription*)entityDescription
{
    //Describe EPPZQueuedObject.
    NSEntityDescription *entityDescription = [NSEntityDescription new];
    entityDescription.name = EPPZQueuedObjectEntityName;
    entityDescription.managedObjectClassName = NSStringFromClass(self);

    //Describe creationDate.
    NSAttributeDescription *creationDateDescription = [NSAttributeDescription new];
    creationDateDescription.name = @"creationDate";
    creationDateDescription.attributeType = NSDateAttributeType;
    creationDateDescription.attributeValueClassName = @"NSDate";
    creationDateDescription.defaultValue = nil;    

    //Describe archivedObject.    
    NSAttributeDescription *archivedObjectDescription = [NSAttributeDescription new];
    archivedObjectDescription.name = @"archivedObject";    
    archivedObjectDescription.attributeType = NSBinaryDataAttributeType;
    archivedObjectDescription.attributeValueClassName = @"NSData";
    archivedObjectDescription.defaultValue = nil;

    //Add attributes.
    entityDescription.properties = @[ creationDateDescription, archivedObjectDescription ];

    //Voila.
    return entityDescription;
}

@end 
```

相应文章中的更多详细信息：http: [//eppz.eu/blog/simple-core-data-sample/](http://eppz.eu/blog/simple-core-data-sample/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T21:40:38.770

我不会这样做。如果商店与您的模型不兼容，它将崩溃。这种风险真的值得你试图创造的好处吗？

我发现预先创建更多（甚至更多）属性只是“为了安全起见”是有意义的。未使用属性的开销确实很小，但您可以灵活地“即时”轻松地向对象添加信息。

正如评论中所指出的，实现该功能的一种好方法是使用单独的实体作为属性并将它们添加为多对多关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-12T17:11:16.030

我正在研究类似的东西，并且正在考虑创建一个名为“Properties”的新核心数据类，因此我可以将核心数据对象设置为“与许多属性有关系”。每个属性都将具有核心数据字符串类型属性：“属性”、“类型”和“值”。

我认为这应该提供足够的灵活性来即时向核心数据对象添加属性。如果我碰巧实现了这个，我会在这里发布

# javascript - $.el 在尝试渲染表时在主干 ui.js 中未定义

> ID：15625089
> 
> 赞同：0
> 
> 时间：2013-03-25T21:26:39.813
> 
> 标签：javascript, backbone.js

我在尝试渲染主干 ui 表时收到“未捕获的类型错误：无法调用未定义的方法‘表’”。我只是试图从网站呈现示例表。我试过四处寻找 el 变量的设置，但似乎没有任何效果。非常感谢任何帮助。示例代码如下。我试图在主干 ui 表视图中显示的一个简单集合。JS错误发生在backbone-ui.js中的render方法中

```
window.regions = new Backbone.Collection([{
    name: 'Americas',
    notes: 'Bright'
}, {
    name: 'Africa',
    notes: 'Fruity'
}]);

var table = new Backbone.UI.TableView({
    el: $('#table_container'),
    sortable: true,
    model: regions,
    columns: [{
        title: 'Name',
        content: 'name'
    }, {
        title: 'Notes',
        content: 'notes'
    }]
}).render(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:00:54.460

我无法让它继续，所以我改为使用 datatables js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:01:12.900

查看 Backbone UI 源代码，TableView 不接受 el 作为选项。这可能就是您在渲染时收到错误的原因。尝试删除它。您应该尝试将其包装在容器中或将其附加到 DOM（取决于#table_container 是否已经存在）渲染后。

```
table.appendTo('#table_container); 
```

或者

```
table.wrap('<div id="table_container"></div>').appendTo(~wherever~); 
```

# ios - 无需越狱即可检测传入的短信或 iMessage

> ID：15625095
> 
> 赞同：4
> 
> 时间：2013-03-25T21:26:51.877
> 
> 标签：ios, ios6, sms, imessage

在我的应用程序中，我只是试图检测传入的 SMS 或 iMessage。我不需要知道它来自哪里或它的内容，只要它进来。我见过很多越狱解决方案。有没有办法在 iOS 6 中做到这一点而无需越狱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:30:44.557

看起来没有越狱是不可能做到这一点的。

*来源：[对 iPhone 上收到的短信做出反应](https://stackoverflow.com/questions/7058001/react-on-incoming-sms-on-an-iphone)*

# caching - 如何为我的 CSS/JS 设置缓存标头，但确保访问者始终拥有最新版本？

> ID：15625096
> 
> 赞同：1
> 
> 时间：2013-03-25T21:26:54.223
> 
> 标签：caching, browser, pagespeed

我想通过确保浏览器缓存所有 CSS/JS 来加快我网站的加载时间，正如 Google 的 PageSpeed 工具所推荐的那样。但我想确保访问者拥有最新的 CSS/JS 文件，如果它们已更新并且缓存现在包含旧代码。

从我目前的研究来看，在 CSS/JS url 的末尾添加类似“?459454”的内容很流行。但这不会迫使访问者的浏览器每次都重新下载 CSS/JS 文件吗？

有没有办法设置浏览器缓存的文件，但确保浏览器知道缓存文件的更新版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:53:06.720

如果您使用的是 Apache，您可以使用 mod_pagespeed（之前 symcbean 提到过）来自动执行此操作。

如果您还使用 ModPagespeedLoadFromFile 指令，它会工作得最好，因为它会在检测到资源在磁盘上发生更改时立即创建一个新 URL，但是如果没有它，它会正常工作（它将使用它获取时返回的缓存到期时间重写它的资源）。

如果您使用的是 nginx，则可以使用 ngx_pagespeed。

如果您使用 IIS，您可以使用 IISpeed，它不是 Google 产品，我不知道它的完整功能集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:32:21.347

版本号可以使用，但您也可以使用 Web 框架或资产构建脚本将文件的哈希附加到文件名：

```
<script src="script-5054a101c8b164cbfa570d97fe23cc0d.js"></script> 
```

这样一来，一旦您的 HTML 更改以反映这个新版本，浏览器就会下载并缓存您脚本的更新版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:31:19.697

正如您所说，将查询字符串附加到资产的 URL，但仅在内容不同时更改它，或者在部署新版本时更改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:37:59.057

> 在 CSS/JS url 的末尾添加类似“?459454”的内容很流行。但这不会迫使访问者的浏览器每次都重新下载 CSS/JS 文件吗？

不，它不会强迫他们每次都下载，但是有很多中间代理忽略可缓存内容上的查询字符串 - 因此有许多工具（包括[mod_pagespeed](https://developers.google.com/speed/pagespeed/mod)，它根据文件内容自动重写 url，以及内容合并与许多其他很酷的技巧一起飞行）将版本信息移动到路径/文件名中。

如果您只有 .htaccess 类型的访问权限，那么您可以剥离版本信息以直接映射到文件，或使用脚本化的 404 重定向器（但如果您使用缓存反向代理，这可能只是一个好主意） .

# java - 调用类时绘制对象

> ID：15625097
> 
> 赞同：-2
> 
> 时间：2013-03-25T21:26:55.347
> 
> 标签：java, oop, class, object

我是面向对象编程的新手。我正在玩创建对象。我有 Cat 类，当我从另一个名为 CatDemo 的程序调用它时，我想画一个圆圈（代表一只猫）。它不起作用，我想知道在你制作对象时是否有任何方法可以绘制对象。

这是我的猫代码：

```
public class Cat {

    public static void main(String[] args){
        StdDraw.circle(0.1, 0.1, 0.1);
    }
} 
```

在这里，我正在尝试制作一只新猫。

```
public class CatDemo {
    public static void main(String[] args) {

        // Create two different 
        // Cat objects
        Cat cat1 = new Cat();
        Cat cat2 = new Cat(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:31:10.497

您当前正在做的是`main`在您的类中创建一个方法`Cat`。`void main(String[])`被称为程序的**入口点**；当您运行程序时，代码将从`main`方法开始执行。如果要在构造 a 时运行代码，**则**`Cat`必须为. 这就是你想要的（我认为）：**`Cat`**

 **```
public class Cat
{
    // this is the constructor. it is run whenever you make a new Cat object.
    public Cat()
    {
        StdDraw.circle(0.1, 0.1, 0.1);
    }
}
public class CatDemo { ... original code is fine ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:30:37.197

而不是`main`方法（在运行时**执行** `Cat`）：

```
public static void main(String[] args){
    StdDraw.circle(0.1, 0.1, 0.1);
} 
```

使用构造函数（在**创建**`Cat`a时执行）：

 **```
public Cat(){
    StdDraw.circle(0.1, 0.1, 0.1);
} 
```****

# visual-studio-2010 - 单击“从模型生成数据库”后，表未映射错误

> ID：15625103
> 
> 赞同：0
> 
> 时间：2013-03-25T21:27:13.123
> 
> 标签：visual-studio-2010, entity-framework, ado.net, edmx

在VS2010中工作。我在数据库中的一个表中添加了 4 列，然后使用内置链接打开项目 edmx 文件以“从数据库更新”。偶然地，我点击了“从模型生成数据库”。我重做了“从数据库更新模型”，但它没有更新。我尝试重建，但后来出现错误：

错误 1 ​​错误 3027：没有为以下 EntitySet/AssociationSet 指定映射 - PersonAlias、Waiver、v_LocationsAlphabetical、Identification、RestrainingOrderData、CivilCompromiseData、DiversionData、FelonyData、PendingOffenseData、ViolationData、PreviousLocation、RequestedVolunteerData、History、Person。C:_VS 项目\entity.edmx 523 9 myApp

这是说所有的表都没有映射。我假设当我点击“生成数据库”按钮时创建了一个重复的数据库或其他东西。它在哪里？我该如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:06:46.037

当您单击从模型生成数据库时，它只会创建您必须首先执行的 SQL 脚本。您也不应该结合从模型生成数据库和从数据库更新模型。仅使用其中一种方法。

# .net - 如何使 .Net 项目几乎不可读

> ID：15625106
> 
> 赞同：0
> 
> 时间：2013-03-25T21:27:27.167
> 
> 标签：.net, obfuscation

我想知道，如果我制作了一个我想发布的程序（可能是一个游戏），并且我想保护代码，我该如何让它变得不可读？

我是一名学生，在我的课程中我学习 c#，我使用 ILSPY 来查看其他人如何编写游戏等，但在某些时候它看起来不像普通代码，我确信一个程序已经更改了所有函数的名称/变量/常数 enz. 我截取了一张截图：![加密代码](../Images/e3892f58da642b44672b8464ea5d6934.png) 我试图找到可以做到这一点的软件，但我发现很难找到关于这个主题的任何东西，如果你能帮助我，给我一个 VS2010 的程序或插件的名称，那就是有这样的能力，

谢谢你阅读我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:29:38.020

它被称为混淆，VS 带有 Dotfuscator（它在工具菜单下），它对类型和成员名称进行基本的混淆，尽管熟练的 RCE 可以弄清楚。

存在更强大的混淆工具，可以重写 CIL 以击败 Reflector 等工具的分析，尽管铁杆 RCE 人员可以直接阅读和判断 CIL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:31:44.230

这是一种称为混淆的技术的示例。如果您搜索 C# Obfuscator，您可以找到大量免费和非常昂贵的示例。

一个这样的列表在这里：[http ://www.csharp411.com/net-obfuscators/](http://www.csharp411.com/net-obfuscators/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:28:42.503

它被称为混淆。VS 有一个内置工具来处理这个问题。然而，它不是很有效。有更有效的付费版本。如：

*   [http://www.eziriz.com/dotnet_reactor.htm](http://www.eziriz.com/dotnet_reactor.htm)
*   [http://www.preemptive.com/products/dotfuscator](http://www.preemptive.com/products/dotfuscator)

可以在此处找到更完整的列表： [https ://stackoverflow.com/questions/1988451/net-obfuscation](https://stackoverflow.com/questions/1988451/net-obfuscation)

# css - 带有 CSS 和 HTML 标记的 JSF 国际化参数化消息

> ID：15625114
> 
> 赞同：2
> 
> 时间：2013-03-25T21:28:15.993
> 
> 标签：css, jsf, internationalization, parameterized

我想知道是否可以将 CSS 和 HTML 标记应用于消息的一部分或仅应用于参数。国际化工作正常，但我想知道如果没有像 #{strings.close}< b style="...">#{string.closeGood}</b> 这样的两个字符串，这是否可行。

1) 我在我的代码 value="#{strings.close}" 和 strings.proprieties 中有一个地方，我有 close = 永久关闭页面！

我想知道您是否可以将 CSS 样式应用于上面字符串中的“页面”（例如），例如 <br />

2）如果我有

```
<h:outputFormat value="#{strings.verifyYourSelf}" >
                        <f:param value="#{testsBean.verifyNo}" />   
                    </h:outputFormat> 
```

strings.properties 我有 verifyYourSelf = 验证 {0} 是否良好。我想知道是否可以将样式应用于参数和 <br />。

祝您有美好的一天，并进一步编码！;)

# mahout - 在 Mahout 中运行 CVB0Driver 时无法找出错误

> ID：15625116
> 
> 赞同：1
> 
> 时间：2013-03-25T21:28:20.690
> 
> 标签：mahout

在过去的几个小时里，我一直在尝试让 CVB0Driver 正常工作，经过多次反复试验，我遇到了以下我无法弄清楚的错误。（使用 mahout-integration 0.7）

```
java.lang.Error: Unresolved compilation problem: 
at org.apache.mahout.math.function.Functions.mult(Functions.java:770)
at org.apache.mahout.clustering.lda.cvb.TopicModel.<init>(TopicModel.java:139)
at org.apache.mahout.clustering.lda.cvb.TopicModel.<init>(TopicModel.java:113)
at org.apache.mahout.clustering.lda.cvb.TopicModel.<init>(TopicModel.java:108)
at org.apache.mahout.clustering.lda.cvb.TopicModel.<init>(TopicModel.java:92)
at org.apache.mahout.clustering.lda.cvb.CachingCVB0Mapper.setup(CachingCVB0Mapper.java:103)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370) 
```

这是我正在使用的代码，因为我还没有让它工作我不确定我是否走在正确的道路上，所以如果你看到我犯的错误，请随时发表评论。

```
String [] args = {"-c","UTF-8","-i",input,"-o",output};

//create the seq file from the directory of text documents
ToolRunner.run(new SequenceFilesFromDirectory(),args);

//tokenize the documents
DocumentProcessor.tokenizeDocuments(new Path(inputDir), analyzer.getClass().asSubclass(Analyzer.class), tokenizedPath, conf);

//create tf vectors
DictionaryVectorizer.createTermFrequencyVectors(tokenizedPath,new Path(outputDir), DictionaryVectorizer.DOCUMENT_VECTOR_OUTPUT_FOLDER, conf, minSupport, maxNGramSize, minLLRValue, -1.0f, true, reduceTasks, chunkSize, sequentialAccessOutput, true);

//calculate the document frequencies 
Pair<Long[], List<Path>> dfData = TFIDFConverter.calculateDF( new Path(outputDir, DictionaryVectorizer.DOCUMENT_VECTOR_OUTPUT_FOLDER), new Path(outputDir), conf, chunkSize);

//create tfidf vectors
TFIDFConverter.processTfIdf( new Path(outputDir , DictionaryVectorizer.DOCUMENT_VECTOR_OUTPUT_FOLDER), new Path(outputDir), conf, dfData, minDf, maxDFPercent, norm, true, sequentialAccessOutput, true, reduceTasks);

args = new String[]{"-i","tfidf-vectors/part-r-00000","-o","cvb"};

//create the matrix for cvb
RowIdJob.main(args);

CVB0Driver.run(conf, new Path("cvb/matrix"), mto, numTopics, numTerms, alpha, eta, maxIterations, iterationBlockSize, convergenceDelta, dictionaryPath, dto, msto, randomSeed, testFraction, numTrainThreads, numUpdateThreads, maxItersPerDoc, numReduceTasks, backfillPerplexity); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:49:56.790

好的，这似乎是 maven/eclipse 项目之间的一些冲突。

我最近将 mahout-integration 0.7 源导入 eclipse 并且不知何故构建得很糟糕，mahout-math 存在问题，我的其他项目可能开始引用构建不良的 jar，我对 maven 不太熟悉，所以我不知道是这种情况还是日食有点疯狂。

从 Eclipse 中删除这个项目后，一切都开始运行良好。

这个问题帮助解决了这个问题 - [java-unresolved-compilation-problem](https://stackoverflow.com/questions/1124788/java-unresolved-compilation-problem)

# sql - 用于将同一列上的相关值显示为单独列的 SQL 查询

> ID：15625118
> 
> 赞同：0
> 
> 时间：2013-03-25T21:28:30.003
> 
> 标签：sql, sqlite, join

我在 SQLITE 数据库中有一个与此类似的表结构，LANID 是另一个表的 FK：

```
ID   LANID    TEXT
-------------------------
1     101     Issue1
1     102     Comment1 for Issue1 
2     101     Issue2 
2     102     Comment1 for Issue2
3     101     Issue3
3     102     Comment1 for Issue3
1     102     Comment2 for Issue1
... 
```

我正在尝试使用以下查询从共享相同 ID 的 TEXT 字段中获取值：

```
SELECT t.TEXT as issue, s.TEXT as comment
FROM MyTable as t, MyTable as s 
WHERE t.LANID = '101' and s.LANID = '102' AND t.ID = s.ID 
      AND t.TEXT like "%some text in Issue1%" 
```

它几乎可以工作，但有一个问题：它不能在需要时“复制”值。换句话说，我不能像这样显示同一问题的第二条评论：

```
issue               comment
---------------------------------
Issue1        Comment1 for Issue1
Issue1        Comment2 for Issue1 
... 
```

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:38:31.760

我会使用显式 self ，而不是原始查询中使用`join`的隐式：`join`

```
SELECT
  mt1.Text AS Issues,
  mt2.Text AS Comment
FROM MyTable mt1
JOIN Mytable mt2
  ON mt1.ID = mt2.ID
  AND mt1.LANID = 101
  AND mt2.LANID = 102 
```

[使用 Sql Fiddle 查看它的实际效果](http://sqlfiddle.com/#!7/effc2/3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:36:21.833

我认为问题实际上在于您如何设置数据库。注释应该在一个单独的表中，引用具有外键的问题。如果没有完善的数据库设计，您将一直在为某种事情苦苦挣扎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:39:27.907

您的查询**确实**显示了第二条评论。请参阅[SQL Fiddle 中的此示例](http://sqlfiddle.com/#!5/d9c1c/2/0)。

有关编写 a 的更好方法`join`，请参阅[Michael Fredrickson 的回答](https://stackoverflow.com/a/15625278/50552)。

# php - 从 MySQL 表中复制一行，但创建一个新的自动 ID 并更新 2 个其他字段

> ID：15625122
> 
> 赞同：0
> 
> 时间：2013-03-25T21:29:05.953
> 
> 标签：php, mysql

我正在使用 PHP 代码

```
$sql = "SELECT * FROM $table LIMIT 1"; 
$res = mysql_query($sql) or die(mysql_error());
for ($i = 1; $i < mysql_num_fields($res); $i++) {
    $col_names .= mysql_field_name($res, $i).", ";
}
$col_names = substr($col_names, 0, -2);

$sql = "INSERT INTO $table (" . $col_names . ") SELECT " . $col_names . " FROM $table WHERE id = $id";
$res = mysql_query($sql) or die(mysql_error());

$new_id = mysql_insert_id(); 
```

复制单个记录并在插入时生成新的 PK。这很好用，但我还需要用新创建的记录上的新信息更新 3 个字段，只是想检查最好的方法是在查询运行后使用更新语句还是有办法做到这一点最初的 INSERT 查询？表格列将来会发生变化，但是目前有 20 列左右，因此列出它们可能很麻烦。

# git - 为什么“git branch --merged”报告不准确？

> ID：15625133
> 
> 赞同：0
> 
> 时间：2013-03-25T21:29:44.293
> 
> 标签：git

任何人都可以理解以下命令和输出序列吗？我对 Git 的工作方式有什么误解（或者这是 Git 中的错误）？

```
sbuchanan@mage:~/projects/this$ git branch
  master
* release-2.7.0

sbuchanan@mage:~/projects/this$ git merge master
Already up-to-date.

sbuchanan@mage:~/projects/this$ git branch --merged master
  master

sbuchanan@mage:~/projects/this$ git branch --no-merged master
* release-2.7.0 
```

**master**分支显然已经合并到**release-2.7.0**中，正如您在我尝试再次合并它的第二个命令中看到的那样，并且 git 响应它已经是最新的。我可以通过查看 Git 日志和存储库的文件内容来手动确认分支确实已合并。

感谢您的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:35:38.767

`master`显然已合并到`release-2.7.0`但不是相反，因此`git branch --merged master`不会列出`release-2.7.0`，因为`release-2.7.0`无法从`master`.

来自`git help branch`：

```
--merged [<commit>]
    Only list branches whose tips are reachable from the specified commit (HEAD if not specified). 
```

# javascript - 在复制的 div 的 mouseover/mouseout 上显示/隐藏具有指定文本的 div

> ID：15625134
> 
> 赞同：0
> 
> 时间：2013-03-25T21:30:00.153
> 
> 标签：javascript, show-hide

我有一张从一个 div 逐字复制到另一个的表。我这样做是为了有一个带有可滚动正文的固定表头。第一个 div id 是`#headdiv`，第二个 div 类是`.bodydiv`，用这个函数`#headdiv`复制的内容：`.bodydiv`

```
$('.bodydiv').html($('#headdiv').html()); 
```

然后我修改了两个 div 的显示/可见性属性，使它们看起来像一张桌子。有关 html 和 css，请参见此处：http: [//jsfiddle.net/jbswetnam/KNnAd/5/](http://jsfiddle.net/jbswetnam/KNnAd/5/)

现在，我要做的是在用户将鼠标悬停在表格中的单元格上时显示一些帮助文本。我可以使用元素 id 使用以下函数来做到这一点：

```
//Copied and modified from https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures

function showInfo(info, display) {
  document.getElementById('infoBox').innerHTML = info; 
  document.getElementById('infoBox').style.display = display;   
}

function makeInfoCallback(info, display) {
  return function() {
     showInfo(info, display);
  };
}

function setupInfo() {
  var infoText = [
      {'id': 'header', 'info': 'Header Row'},
      {'id': 'alpha', 'info': 'Alpha'}
      ];

  for (var i = 0; i < infoText.length; i++) {
    var item = infoText[i];
     document.getElementById(item.id).onmouseover = 
        makeInfoCallback(item.info, "");
     document.getElementById(item.id).onmouseout = 
        makeInfoCallback("", "none");
  }
}
setupInfo(); 
```

正如您在[http://jsfiddle.net/jbswetnam/KNnAd/5/](http://jsfiddle.net/jbswetnam/KNnAd/5/)所看到的，当您将鼠标悬停在表格标题上时，会出现“标题行”文本。我想要做的是，当您将鼠标悬停在显示“Alpha”的单元格上时，会出现“Alpha”文本。

我知道为什么该函数在标题而不是正文中起作用。标头有一个在上面的函数中引用的 id，而您看到的正文单元格是从中复制的`#headdiv`，因此它们的 id 无效。但是我对 Javascript 的了解还不够，不知道如何解决这个问题。使用类而不是 id 是行不通的。我有一种感觉，我可以使用并可能从每个单元格中调用函数来重构整个脚本`this`，但我只是不知道该怎么做。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:45:14.540

用这段代码完成了它：

```
function makeInfo() {
$('.info').hover(
    function() {
        $('#infoBox').html($(this).attr('info'));
        $('#infoBox').css('display', '');  
    },
    function() {
        $('#infoBox').css('display', 'none');
    }); 
}

makeInfo(); 
```

您可以在同一个 jsfiddle 中看到更新后的 HTML。

# jquery - 数据属性未显示

> ID：15625135
> 
> 赞同：0
> 
> 时间：2013-03-25T21:30:02.570
> 
> 标签：jquery, html, wordpress, custom-data-attribute

我有一张在 Wordpress 中显示的特色图片。我已经为图像添加了一个数据属性，如下所示......

```
 <img  src="<?php echo $large_image ?>" 
       data-img="<?php echo $large_image ?>" 
       data-title="<?php echo get_the_title(); ?>" 
       data-description="<?php the_content();?>" 
       alt="" class="superbox-img" /> 
```

我想在网站的前端显示数据标题和数据描述，但由于某种原因没有显示。在数据属性方面我是个大菜鸟，所以我为初学者方面道歉。我不知道是否应该通过 CSS`content: attr(data-title)`或 jquery 显示标题和描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:33:33.303

您可以使用 jquery 获取数据属性值：http: [//api.jquery.com/data/](http://api.jquery.com/data/)

```
<section data-role="page" data-page-num="42" data-hidden="true">
    <!-- Imagine a bunch of page-type content here... -->
</section>

<script type="text/javascript">
    console.log($('section').data('role'));
    // Expect string "page"

    console.log($('section').data('pageNum');
    // Expect 42, an integer...! 

    console.log($('section').data('hidden');
    // Expect the boolean TRUE!
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T21:38:21.637

data 属性用于“创建”您自己的一组 html 属性。在您的示例中，您创建了另外 3 个属性，称为 data-img、data-title、data-description。

如何访问这些属性取决于您的应用程序，以便您可以使用 Jquery 访问它们，甚至应用 CSS 规则！

# jquery - 如何让我的 JQuery Accordion 工作？

> ID：15625147
> 
> 赞同：1
> 
> 时间：2013-03-25T21:30:42.510
> 
> 标签：jquery, jquery-ui-accordion

**链接**

*   [**JSFiddle 上的 JQuery 手风琴**](http://jsfiddle.net/tovic/CzE3q/)
*   [**我的 JSFiddle 手风琴尝试**](http://jsfiddle.net/CzE3q/450/)

我在 JSFiddle 上找到了一个基本的 JQuery Accordion，您可以在这个问题的“链接”部分看到它。您还可以在“链接”部分查看我如何尝试将 JQuery Accordion 实施到我的网站中。

“JSFiddle 上的 JQuery Accordion”链接是我通过 Google 搜索找到的原始链接。$（函数（）{

```
$(function() {
    $('#accordion .content').hide();
    $('#accordion h2:first').addClass('active').next().slideDown('slow');
    $('#accordion h2').click(function() {
        if($(this).next().is(':hidden')) {
            $('#accordion h2').removeClass('active').next().slideUp('slow');
            $(this).toggleClass('active').next().slideDown('slow');
        }
    });
}); 
```

而在我的版本中，JQuery Accordion 中的内容在加载时是隐藏的，但是这些按钮在修改后的版本中不显示我的内容。

非常感谢您为解决我的问题提供的任何帮助和/或建议。

最好的问候，蒂姆

# algorithm - 理解基于比较的排序算法的下界

> ID：15625150
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:30:46.370
> 
> 标签：algorithm, sorting, lower-bound

首先，我知道

1.  下限为 O(nlogn)
2.  以及如何证明

我同意下限应该是 O(nlogn)。

我不太明白的是：

对于某些特殊情况，比较次数实际上甚至可能低于下限。例如，使用*冒泡排序*对已排序的数组进行排序。比较次数为 O(n)。

**那么如何真正理解*下界*的概念呢？**

维基百科上的经典定义：[http](http://en.wikipedia.org/wiki/Upper_and_lower_bounds) ://en.wikipedia.org/wiki/Upper_and_lower_bounds没有多大帮助。

我目前对此的理解是：

**基于比较的排序的下限实际上是最坏情况的上限。**

即，在最坏的情况下你能做到什么程度。

这个对吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T15:17:55.570

> 基于比较的排序的下限实际上是最佳情况的上限。

## 不。

您要限制的函数是**最佳**排序算法的**最坏情况**运行时间。

 **想象一下下面的游戏：

1.  我们选择一些数字 n。
2.  你选择你最喜欢的排序算法。
3.  在查看了您的算法后，我选择了一些长度为 n 的输入序列。
4.  我们根据我的输入运行您的算法，您为每条执行的指令给我一美元。

O(n log n) 上限意味着您可以将成本限制在最多 O(n log n) 美元，无论我选择什么输入序列。

Ω(n log n) 下限意味着我可以强制你至少支付 Ω(n log n) 美元，无论你选择哪种排序算法。

* * *

**另外：** “下限是 O(n log n)”没有任何意义。O(f(n)) 的意思是“至多是 f(n) 的常数倍”。但是“下限”的意思是“至少……”。所以说“O(n log n) 的下限”就像说“你最多可以节省**50** %**或更多**！” ——完全没有意义！下界的正确表示法是 Ω(...)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T15:38:00.073

排序问题可以看如下。

输入： n 个数字的序列。输出：输入序列的排列（重新排序），使得 a'1 <= a'2 ..... <= a'n。

如果排序算法使用比较运算符来查找两个数字之间的顺序，则它是基于比较的。可以根据决策树抽象地查看比较排序。决策树是一棵完整的二叉树，它表示由特定排序算法对给定大小的输入执行的元素之间的比较。排序算法的执行对应于跟踪从决策树的根到叶子的路径。在每个内部节点，进行比较ai aj。然后左子树指示 ai aj 的后续比较，右子树指示 ai > aj 的后续比较。当我们来到一片叶子时，排序算法已经建立了排序。所以我们可以说下面的决策树。

1) 每一个 n! n 个元素的排列必须作为决策树的叶子之一出现，以便排序算法正确排序。

2) 令 x 为排序算法中的最大比较次数。决策树的最大高度为 x。最大高度 x 的树最多有 2^x 个叶子。

结合以上两个事实，我们得到以下关系。

```
 n!  <= 2^x 
```

两边取Log。\log_2n！<= x

由于 \log_2n! = \Theta(nLogn)，我们可以说 x = \Omega(nLog_2n) 因此，任何基于比较的排序算法都必须至少进行 \Omega(nLog_2n) 比较才能对输入数组进行排序，并且堆排序和归并排序是渐近最优的比较排序.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:50:34.393

想象一下可以排序的所有可能的事物数组。可以说它们是长度为“n”的数组，并忽略诸如具有一个元素的数组之类的东西（当然，它们总是已经排序。

想象一下该数组的所有可能值组合的长列表。请注意，我们可以稍微简化一下，因为数组中的值总是有某种排序。因此，如果我们用数字 1 替换最小的一个，用 1 或 2 替换下一个（取决于它是否相等或更大）等等，我们最终会遇到相同的排序问题，就好像我们允许任何值一样。（这意味着长度为 n 的数组最多需要数字 1-n。如果一些相等，可能会更少。）

然后在每个数字旁边放一个数字，说明用其中的值对该数组进行排序需要多少工作。你可以放几个数字。例如，您可以输入所需的比较次数。或者，您可以输入所需的元素移动或交换次数。无论你放什么数字都表明它需要多少次操作。你可以把它们加起来。

您必须做的一件事是忽略任何特殊信息。例如，您无法提前知道数组中值的排列是否已经排序。您的算法必须对该数组执行与任何其他数组相同的步骤。（但第一步可能是检查它是否已排序。不过，通常这对排序没有帮助。）

所以。通过比较测量的最大数字是当值以病态错误方式排列时的典型比较次数。同样，最小的数字是当值以非常好的方式排列时所需的比较次数。

对于冒泡排序，最好的情况（最短或最快）是值是否已经有序。但这只有在您使用标志来判断您是否交换了任何值时。在最好的情况下，您查看每对相邻的元素一次，发现它们已经排序，当您到达最后时，您发现您没有交换任何东西，所以您已经完成了。这是总共 n-1 次比较，是您可以进行的最少比较次数。

我需要一段时间才能弄清楚最坏的情况。几十年来我没有看过冒泡排序。但我猜这是他们被逆序排列的情况。您进行第一次比较并发现第一个元素需要移动。与每个元素相比，您向上滑动到顶部，最后将其与最后一个元素交换。因此，您在那一关中进行了 n-1 次比较。第二遍从第二个元素开始，进行 n-2 次比较，依此类推。因此，在这种情况下，您进行 (n-1)+(n-2)+(n-3)+...+1 比较，大约为 (n**2)/2。

也许您对冒泡排序的变体比我描述的要好。不管。

那么对于冒泡排序，下限为 n-1，上限为 (n**2)/2

其他排序算法有更好的性能。

您可能要记住，除了比较之外，还有其他操作需要花费。我们使用比较是因为很多排序都是用字符串完成的，而且字符串比较在计算时间上是昂贵的。

您可以使用元素交换来计数（或交换和元素交换的总和），但它们通常比与字符串的比较短。如果你有数字，它们是相似的。

您还可以使用更深奥的东西，例如分支预测失败或内存缓存未命中或进行测量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:54:18.540

当您进行渐近分析时，您会为*所有输入*`O`推导出一个or`Θ`或。 但是你也可以分析输入的属性是否影响运行时。 例如，*由于输入特征和算法的结构，将几乎排序的东西作为输入的*算法比形式渐近公式具有更好的性能。例如冒泡排序和快速排序。 并不是说你可以低于下限。它仅在特定输入上执行的行为。`Ω`**

# django - 如何在cpanel上安装django

> ID：15625151
> 
> 赞同：7
> 
> 时间：2013-03-25T21:30:47.323
> 
> 标签：django, ftp, cpanel

我需要将文件放在哪个目录中？
我尝试了 public_html，但是当我将文件放在那里并单击 setup.py 时，它没有启动脚本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T22:17:33.713

It's probably not the best thing to run Django application on cPanel (shared hosting) because of the following:

*   Most shared hosting providers do not allow you to install custom libraries which need to be compiled. You can still however create [virtualenv](https://pypi.python.org/pypi/virtualenv) and `pip` install packages into as long as they do not require anything to be compiled (e.g. Django)
*   Performance. In my experience it is possible to deploy a simple Django application on shared hosting however it is not very reliable and does not perform very well.

However it is not to say that it is impossible. These rough steps should be accurate enough to guide you to the right path. I haven't done this is a while so there might be mistakes.

*   First you have to have SSH access
*   Login into your account and create virtualenv for your django project

    ```
    $ cd ~
    $ wget https://pypi.python.org/packages/source/v/virtualenv/virtualenv-1.9.1.tar.gz
    $ tar -zxvf virtualenv-1.9.1.tar.gz
    $ python virtualenv-1.9.1/virtualenv.py djangovevn 
    ```

*   Add virtualenv bin folder to the path (inside `.bash_profile`)

    ```
    export PATH="/home/<username>/djangovenv/bin:$PATH" # inside .bash_profile

    # activate .bash_profile
    $ source .bash_profile 
    ```

*   Then `pip` install everything your project requires. Make sure to activate virtualenv first

    ```
    $ source ~/djangovevn/bin/activate
    $ pip install django 
    ```

*   Configure Django as usual. Make sure `DEBUG` is `False`

*   Inside `public_html` create `index.fcgi`. Make sure to use the virtualenv Python path. Django docs about this [here](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/#running-django-on-a-shared-hosting-provider-with-apache).

    ```
    !/home/<username>/djangovenv/bin/python
    import sys, os

    # add projects directory to the path so that
    # settings from the project can be imported
    sys.path.insert(0, "/home/<username>/path/to/project")

    # Switch to the directory of your project #
    os.chdir("/home/<username>/path/to/project")

    # Set the DJANGO_SETTINGS_MODULE environment variable #
    os.environ['DJANGO_SETTINGS_MODULE'] = "project.settings"

    # Run the fastcgi instance #
    from django.core.servers.fastcgi import runfastcgi
    runfastcgi(method="threaded", daemonize="false") 
    ```

*   Configure the `index.fcgi` in `public_html/.htaccess`

    ```
    AddHandler fcgid-script .fcgi
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.fcgi/$1 [QSA,L] 
    ```

*   Activate the fastcgi

    ```
    $ cd ~/public_html
    $ touch index.fcgi
    $ chmod 0755 .htaccess
    $ chmod 0755 index.fcgi 
    ```

*   All Done!

However this method will drive you crazy very fast. Apache is not meant for this and this method is not popular for a reason. This should be good enough in the beginning however as you will get more advanced deploying Django app, you should consider using some other hosting provider which allows for more flexibility such as WebFaction or heroku.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:34:49.810

Django 是一个在 Python 实例中运行的框架，而不是作为一组从 Web 服务器提供的文件，如 HTML 或 PHP。您很可能需要另一个托管服务提供商来托管像[Heroku这样的 Web](http://www.heroku.com/)*应用程序*。

# delphi - 如何将位图传递给 C++ 和 Delphi 中的 DLL 函数？

> ID：15625158
> 
> 赞同：5
> 
> 时间：2013-03-25T21:30:59.117
> 
> 标签：delphi, visual-c++, dll

我想创建一个与 Delphi 和其他语言（主要是 C++）一起使用的 DLL 插件。如何以 C++ 和 Delphi 友好的方式传递位图？它可以只是 Delphi TBitmap 的句柄吗？C++ 程序应该能够使用 WinApi 对其进行解码，对吧？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T21:34:35.323

您不能传递 Delphi`TBitmap`对象，因为这仅对 Delphi 代码有意义。你需要传递的是一个[`HBITMAP`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383751.aspx#hbitmap), 一个 Windows 位图的句柄。

Delphi`TBitmap`类只是 Windows 位图的包装器，可以提供`HBITMAP`句柄。您需要注意的是这些句柄的所有权。

如果你有一个 Delphi `TBitmap`，你可以`HBITMAP`通过调用 a 的[`ReleaseHandle`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ReleaseHandle)方法来获得一个`TBitmap`。返回的句柄`ReleaseHandle`不再由`TBitmap`您想要的对象拥有和管理。您将该句柄传递给 C++ 代码并让它成为所有者。它负责处理该句柄。

的文档[`ReleaseHandle`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ReleaseHandle)说：

> 返回位图的句柄，以便 TBitmap 对象不再知道该句柄。
> 
> 使用**ReleaseHandle**解除位图与位图句柄的关联。当您需要将位图句柄提供给将承担（或销毁）位图句柄的例程或对象时，请使用它。

在另一个方向，您的 Delphi 代码将从[`HBITMAP`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.Handle)C++ 代码接收并获得所有权。通过分配给实例的`Handle`属性来做到这一点。`TBitmap`

细节会因语言而异，但无论如何，所有人都可以处理`HBITMAP`.

# wpf - WPF - 显示多个窗口时焦点错误

> ID：15625164
> 
> 赞同：1
> 
> 时间：2013-03-25T21:31:26.527
> 
> 标签：wpf, focus, childwindow

我们正在经历一个关于多个窗口之间焦点的奇怪行为。

我们的场景如下所示：

“Window A”使用 Show 方法打开子“Window B”（不指定窗口的所有者）。两个窗口都是完全独立的。

在“窗口 B”中，单击按钮会打开“窗口 C”（显示模式窗口）。

A --> B --> C

当“窗口 C”关闭时，焦点回到“窗口 A”。

在我看来，“窗口 B”应该重新获得焦点，因为它是窗口的“逻辑”所有者（因为我没有指定所有者）。

看起来焦点回到了第一个实例化的窗口。

就我而言，有没有办法将焦点“强制”在“窗口 B”上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:08:19.627

你应该能够做到

```
B.Activate(); 
```

在您的 ShowDialog() 返回之后。

# c# - 使用链表的冒泡排序实现仅部分有效

> ID：15625166
> 
> 赞同：0
> 
> 时间：2013-03-25T21:31:39.393
> 
> 标签：c#, bubble-sort

我正在尝试使用冒泡排序对项目列表进行排序。**我知道这不是最有效的排序方法**；但是，在继续做更好的事情之前，我需要这种方法起作用。我当前的代码对列表进行了部分排序，但我看不出我做错了什么。

```
public class ListComponents
{
    public int Priority;
    public string Name;
    public ListComponents Next;
}

public void bubblesort()
{
    ListComponents Current = Head; 
    int temp = 0;
    bool swapped = true;

    while (swapped)
    {
        Print(); // Debug Function to print each swap
        Current = Head.Next; // RESET CURRENT TO HEAD + 1 ON EACH ITERATION?
        swapped = false;
        for (int sort = 0; sort < (size - 1); sort++) //Size defined as # of items in list
        {
            if (Current != null && 
                Current.Next != null && 
                Current.Priority> Current.Next.Priority)
            {
                temp = Current.Priority;
                Current.Priority= Current.Next.Priority;
                Current.Next.Priority= temp;
                Current = Head; // POTENTIAL ISSUE?
                swapped = true;
            }
        }
    }
} 
```

我的调试打印功能显示以下内容，显示这些值几乎是按顺序排列的：

```
List: 4 2 1 3  (Inital List Order)
List: 1 4 2 3  (First Swap)
List: 1 2 4 3  (Second Swap) 
```

问题似乎与设置“当前”值有关，尽管我看不出这在哪里不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T21:54:25.767

我的建议：重新开始。这是一团糟。

当我还是初学者时，这就是我将如何解决此类问题的方法。首先在pseduo-code中编写代码：

```
void BubbleSort(ListComponent head)
{
    if the list is of zero length then it is already sorted, so return
    if the list is of length one then it is already sorted, so return
    Otherwise, the list is of length two or more. Therefore we know that
    a first item exists and a second-last item exists.
    Our strategy is: run down the list starting with the first item
    and ending with the second-last item. If at any time the current
    item and the one following it are out of order, swap their elements.
    If we made no swaps then the list is sorted, return. 
    If we made one or more swaps then the list might not be sorted, so 
    run down the list again.
} 
```

好的，现在我们可以开始将其转换为代码了。

```
void BubbleSort(ListComponent head)
{
    // if the list is of zero length then it is already sorted, so return
    if (head == null) return; 

    // if the list is of length one then it is already sorted, so return
    if (head.Next == null) return; 

    // Otherwise, the list is of length two or more. Therefore we know that
    // a first item exists and a second-last item exists.

    // Our strategy is: run down the list starting with the first item
    // and ending with the second-last item. 

    for (ListComponent current = head; 
        current.Next != null; 
        current = current.Next)
    {

        If at any time the current item and the one following it
        are out of order, swap their elements.
    }

    If we made no swaps then the list is sorted, return. 
    If we made one or more swaps then the list might not be sorted, so 
    run down the list again.
} 
```

好的，我已经将一些英语翻译成代码。你能翻译剩下的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T01:30:33.740

另一个具有 2 个属性的简单类的示例。这不是用于数组，而是用于模拟指针的简单类......只是为了好玩！

```
class MyLinkedList
{
MyLinkedList nextNode;
int data;

public void OrderListBubbleAlgoritm(ref MyLinkedList head)
{
    bool needRestart = true;
    MyLinkedList actualNode = head; //node Im working with        
    int temp;

    while (needRestart)
    {
        needRestart = false;
        actualNode = head;
        while (!needRestart && actualNode.nextNode != null)
        {
            if (actualNode.nextNode.data >= actualNode.data) //is sorted
            {
                actualNode = actualNode.nextNode;
            }
            else
            {
                //swap the data
                temp = actualNode.data;
                actualNode.data = actualNode.nextNode.data;
                actualNode.nextNode.data = temp;

                needRestart = true;
            }
        }
    }
}
} 
```

请记住仅对少量数据使用冒泡排序。
**它的性能是：O(n^2)**

# web-services - 在 Glassfish 上运行的 REST 服务

> ID：15625169
> 
> 赞同：0
> 
> 时间：2013-03-25T21:31:45.437
> 
> 标签：web-services, rest, netbeans, glassfish, war

我使用 Jersey 和**NetBeans IDE**开发了 REST Web 服务。现在我想在**Glassfish 3.1**上提供这些服务，而不使用 NetBeans。

我想要类似 .aar 文件，它是在我们使用 Apache Axis2 构建 Web 服务时创建的。

你能告诉我怎么做吗？我必须使用 .WAR 文件，对吗？

它类似于：http: [//qallme.sourceforge.net/docs/sec_DeployingAWebService.html](http://qallme.sourceforge.net/docs/sec_DeployingAWebService.html)？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:20:14.647

我可以按照我上面提到的那个教程来做到这一点。起初，由于`context-root`glassfish-web.xml 上的原因，这不起作用。我没有用根资源填充它。

# web-applications - 如何在 Pyramid / SQLAlchemy 中创建所有可访问对象的列表？

> ID：15625173
> 
> 赞同：1
> 
> 时间：2013-03-25T21:32:09.877
> 
> 标签：web-applications, sqlalchemy, security, pyramid

我使用金字塔框架开发了一个小型 Web 应用程序，并且刚刚实现了集成的安全功能。我创建了一个 ressource 对象，我们称之为`Page`，并赋予它一个 ACL 以便每个用户都可以查看和编辑他拥有适当权限的页面。这一切都很好。

我的问题如下：创建当前登录用户允许查看的所有页面列表的金字塔适当方法是什么？

该应用程序使用 URLDispatch 和 SQLAlchemy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:46:54.597

没有“适合金字塔的方式”。只需在您的数据库中查询“允许当前登录用户查看的所有页面的列表”。

```
db.query(Page).filter_by(owner=user_id). 
```

有 Pyramid[食谱](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/auth/user_object.html)食谱用于访问用户和数据库会话的惯用方式`request.user`，`request.db`可能值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:03:21.340

如果数据库不知道acls，您可以发布过滤它们....

```
from pyramid.security import has_permission

def make_permission_filter(request, permission="view"):
    def f(r):
        if r and has_permission(permission, r, request):
            return r
        else:
            return None

(r for r in make_permission_filter(request, permission="view")(db.query(Page).filter_by(owner=user_id)) if r) 
```

当然有缺点，但这是一种方法。

# wordpress - Wordpress (Pods) oEmbed 项目

> ID：15625174
> 
> 赞同：1
> 
> 时间：2013-03-25T21:32:14.690
> 
> 标签：wordpress, iframe, oembed, podscms

我正在使用出色的 Pods 插件来扩展 Wordpress 的基本内容类型，并添加了一些自定义内容类型。我已经构建了一个高级自定义类型，这意味着我没有获得内置到本机页面/帖子类型中的自动 oEmbed 支持。我对其进行了结构化，因此我的自定义内容类型有一个使用 PHP 页面模板的 pod 页面，并且我为可以嵌入视频的 WYISWYG 字段启用了 oEmbed 选项。

我发现[这篇文章](http://wordpress.org/support/topic/filter-hook-for-built-in-oembed-providers-eg-youtube)似乎表明基本`apply_filter`功能应该自动处理任何嵌入，但我似乎无法让它工作。我对过滤器有点陌生。我试过的代码如下：

```
<?php
// Fetch body field content from $pods object
$mycontent = $pods->field('field_body');
$output = apply_filters('oembed_dataparse', $mycontent);
echo $output;
?> 
```

我尝试了各种不同的过滤器，例如`the_content`和其他过滤器，但似乎都不起作用。我认为这可能是 Pod 页面的范围/冲突问题，因为即使将整个 iFrame 嵌入代码写到模板中也不起作用，而只会显示一个空的 iFrame。全局 oembed 函数也是如此，即

```
$videourl = 'http://www.youtube.com/watch?v=dQw4w9WgXcQ';
$htmlcode = wp_oembed_get($videourl);
echo $htmlcode; 
```

在页面模板的上下文中会输出：

```
<iframe width="500" height="375" frameborder="0" allowfullscreen="" src="http://www.youtube.com/embed/dQw4w9WgXcQ?feature=oembed">
    <html>
        <head>
        </head>
        <body>
        </body>
    </html>
</iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:20:46.570

field() 获取字段的值， display() 获取字段的输出（运行通过该字段配置为运行的任何相关过滤器/函数）。

```
$mycontent = $pods->field('field_body'); 
```

应该

```
$mycontent = $pods->display('field_body'); 
```

有关更多信息，请参阅[http://pods.io/docs/field/](http://pods.io/docs/field/)与[http://pods.io/docs/display/](http://pods.io/docs/display/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:13:51.273

调用`apply_filters('oembed_dataparse', $mycontent)`是不正确的，因为这意味着添加处理默认情况下不满足的其他数据类型（照片、视频等）的功能。您想要做的是模仿 WordPress 如何进行嵌入。我还没有测试下面的代码，但在我看来，触发嵌入功能的方法是：

```
global $wp_embed;

$mycontent = $pods->field('field_body');

$output = $wp_embed->autoembed($mycontent);

echo $output; 
```

# scala - 如何设置 IntelliJ + Scala + specs + sbt 项目？

> ID：15625191
> 
> 赞同：2
> 
> 时间：2013-03-25T21:33:11.830
> 
> 标签：scala, intellij-idea, sbt, specs2, sbt-idea

我正在尝试为具有 IntelliJ (12.1) 支持的 Scala (2.10) 设置一个带有 specs2 的空 sbt 项目，当我`sbt compile`在空项目目录中执行此操作时出现此错误：

```
% sbt compile                                                                                                                                                                                                 
Getting net.java.dev.jna jna 3.2.3 ...
:: retrieving :: org.scala-sbt#boot-jna
    confs: [default]
    1 artifacts copied, 0 already retrieved (838kB/32ms)
Getting org.scala-sbt sbt_2.9.1 0.11.3 ...
:: retrieving :: org.scala-sbt#boot-app
    confs: [default]
    37 artifacts copied, 0 already retrieved (7245kB/734ms)
Getting Scala 2.9.1 (for sbt)...
:: retrieving :: org.scala-sbt#boot-scala
    confs: [default]
    4 artifacts copied, 0 already retrieved (19939kB/402ms)
[info] Loading project definition from /Users/pathikrit/Projects/scalgos/project
[info] Set current project to scalgos (in build file:/Users/pathikrit/Projects/scalgos/)
Getting Scala 2.10.1 ...
:: retrieving :: org.scala-sbt#boot-scala
    confs: [default]
    5 artifacts copied, 0 already retrieved (24386kB/107ms)
[info] Updating {file:/Users/pathikrit/Projects/scalgos/}default-7d65e1...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
[info] Resolving org.specs2#specs2_2.10.1;1.14 ...
[warn]  module not found: org.specs2#specs2_2.10.1;1.14
[warn] ==== local: tried
[warn]   /Users/pathikrit/.ivy2/local/org.specs2/specs2_2.10.1/1.14/ivys/ivy.xml
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/org/specs2/specs2_2.10.1/1.14/specs2_2.10.1-1.14.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.specs2#specs2_2.10.1;1.14: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/Users/pathikrit/Projects/scalgos/}default-7d65e1/*:update: sbt.ResolveException: unresolved dependency: org.specs2#specs2_2.10.1;1.14: not found
[error] Total time: 4 s, completed Mar 25, 2013 5:11:17 PM 
```

我的`build.sbt`文件如下所示：

```
name := "scalgos"

version := "0.0.1"

scalaVersion := "2.10.1"

libraryDependencies += "org.specs2" %% "specs2" % "1.14" % "test" 
```

我通过以下方式安装了 sbt `brew install sbt`：

```
% brew info sbt                                                                                                                                                                                   
sbt: stable 0.12.2, devel 0.13.0-M1
http://www.scala-sbt.org
/usr/local/Cellar/sbt/0.11.3-2 (3 files, 1.1M) *
https://github.com/mxcl/homebrew/commits/master/Library/Formula/sbt.rb
==> Caveats
You can use $SBT_OPTS to pass additional JVM options to SBT.
For convenience, this can specified in `~/.sbtconfig`.

For example:
    SBT_OPTS="-XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M" 
```

Brew 说我有 sbt 0.12 但是当`sbt --version`我得到：

```
% sbt --version                                                                                                                                                                                    
sbt launcher version 0.11.3-2 
```

我试图通过将它放在我的 $PROJECT_DIR/projects/plugins.sbt 中来至少生成 IntelliJ 文件：

```
resolvers += "sbt-idea-repo" at "http://mpeltonen.github.com/maven/"

addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0") 
```

但是当我这样做时`sbt gen-idea`，我得到了这个错误：

```
% sbt gen-idea                                                                                                                                                                                               
[info] Loading project definition from /Users/pathikrit/Projects/scalgos/project
[info] Set current project to scalgos (in build file:/Users/pathikrit/Projects/scalgos/)
[info] Trying to create an Idea module scalgos
[info] Updating {file:/Users/pathikrit/Projects/scalgos/}default-7d65e1...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
[info] Resolving org.specs2#specs2_2.10.1;1.14 ...
[warn]  module not found: org.specs2#specs2_2.10.1;1.14
[warn] ==== local: tried
[warn]   /Users/pathikrit/.ivy2/local/org.specs2/specs2_2.10.1/1.14/ivys/ivy.xml
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/org/specs2/specs2_2.10.1/1.14/specs2_2.10.1-1.14.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.specs2#specs2_2.10.1;1.14: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/Users/pathikrit/Projects/scalgos/}default-7d65e1/*:update: sbt.ResolveException: unresolved dependency: org.specs2#specs2_2.10.1;1.14: not found
[info] Updating {file:/Users/pathikrit/Projects/scalgos/}default-7d65e1...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
[info] Resolving org.specs2#specs2_2.10.1;1.14 ...
[warn]  module not found: org.specs2#specs2_2.10.1;1.14
[warn] ==== local: tried
[warn]   /Users/pathikrit/.ivy2/local/org.specs2/specs2_2.10.1/1.14/ivys/ivy.xml
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/org/specs2/specs2_2.10.1/1.14/specs2_2.10.1-1.14.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.specs2#specs2_2.10.1;1.14: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/Users/pathikrit/Projects/scalgos/}default-7d65e1/*:update: sbt.ResolveException: unresolved dependency: org.specs2#specs2_2.10.1;1.14: not found
[error] Failed to obtain dependency classpath
[error] java.lang.IllegalArgumentException
[error] Use 'last' for the full log. 
```

有人可以发布一个可以`build.sbt`为 Scala 2.10.1 和 sbt 生成 IntelliJ 12.1 文件的示例吗？

我在这里检查了我的项目：[https ://github.com/pathikrit/scalgos](https://github.com/pathikrit/scalgos)

请指教我做错了什么？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T17:35:11.613

你可以使用我建立的这个项目，它提供你正在寻找的开箱即用的东西

[骨骼](https://github.com/fractal/skeleton)

我计划今晚升级 sbt 配置和最新最好的库（sbt-idea 1.3.0 和 scala 2.10.1）。

请享用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:56:53.463

您应该将 sbt 版本更新为 0.12.X，创建文件“project/build.properties”，然后输入“sbt.version=0.12.1”

我分叉了你的 repo 并编辑了 sbt 版本，在我的机器上似乎工作正常

[https://github.com/yuanw/scalgos](https://github.com/yuanw/scalgos)

# jquery - jQuery验证器插件+ ajax提交不起作用

> ID：15625195
> 
> 赞同：17
> 
> 时间：2013-03-25T21:33:28.363
> 
> 标签：jquery, ajax, jquery-validate

我使用来自 bassistance.de 的 jQuery 验证器插件（1.11）并通过 php 提交。现在我在 javacript 代码末尾的提交处理程序中添加了一个 ajax 调用，但是该调用不起作用，firebug 控制台也不存在。

**案例 1**如果我将 ajax 调用放在网站的开头，它可以工作，但不再看到验证器插件。

**案例 2**如果我将调用放在提交处理程序中，它不存在并且表单是由 php 提交的。

**案例 3** 如果我将代码放在页面末尾，联系表单仍然是由 php 提交的。

这是ajax调用：

```
$("#contactform").submit(function(e){
    e.preventDefault();
    $.ajax({
        type: "POST",
        url: "formfiles/submit.php",
        data: $(this).serialize(),
        success: function() {
            $('#contactform').html("<div id='message'></div>");
            $('#message').html("<h2>Your request is on the way!</h2>")
            .append("<p>someone</p>")
            .hide()
            .fadeIn(1500, function() {
                $('#message').append("<img id='checkmark' src='images/ok.png' />");
            });
        }
     });
     return false;
}); 
```

有谁知道出了什么问题？

在此先感谢您的帮助，为此苦苦挣扎。

**编辑** 为了更好地理解问题，这里是完整的 javascript

```
 $(document).ready(function(){
$("#contactform").validate();      
$(".chapta").rules("add", {maxlength: 0});     

var validator = $("#contactform").validate({

     ignore: ":hidden",
    rules: {
        name: {
            required: true,
            minlength: 3
        },
        cognome: {
            required: true,
            minlength: 3
        },
        subject: {
            required: true,

        },

        message: {
            required: true,
            minlength: 10
        }
    },

    submitHandler: function(form) {

   $("#contactform").submit(function(e){
   e.preventDefault();
   $.ajax({
    type: "POST",
    url: "formfiles/submit.php",
    data: $(this).serialize(),
    success: function() {
        $('#contactform').html("<div id='message'></div>");
        $('#message').html("<h2>Your request is on the way!</h2>")
        .append("<p>someone</p>")
        .hide()
        .fadeIn(1500, function() {
            $('#message').append("<img id='checkmark' src='images/ok.png' />");
        });
    }
    });
    return false;
 });
    },

});

 }); 
```

**编辑 2**

选择器和其他所有似乎都很好。

```
 <form action="#n" class="active" method="post" name="contactform" id="contactform"> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-25T22:12:52.160

您`ajax`属于jQuery *Validate*插件的`submitHandler`回调函数。

[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，

> **submitHandler**，回调，默认：默认（本机）表单提交
> 
> 回调，用于在表单有效时处理实际提交。获取表单作为唯一参数。替换默认提交。**验证后通过 Ajax 提交表单的正确位置**。

你的另一个问题是你打`.validate()`了两次电话。第一次调用后，另一个实例将被忽略，您尝试传递给它的所有规则也将被忽略。该方法在 DOM 准备好*初始化*表单上的插件`.validate()`时被调用一次。

 *最后，您不需要将`submit`处理程序放入`submitHandler`回调函数中。

**演示：http: [//jsfiddle.net/nTNLD/1/](http://jsfiddle.net/nTNLD/1/)**

```
$(document).ready(function () {

     $("#contactform").validate({
         ignore: ":hidden",
         rules: {
             name: {
                 required: true,
                 minlength: 3
             },
             cognome: {
                 required: true,
                 minlength: 3
             },
             subject: {
                 required: true
             },
             message: {
                 required: true,
                 minlength: 10
             }
         },
         submitHandler: function (form) {
             $.ajax({
                 type: "POST",
                 url: "formfiles/submit.php",
                 data: $(form).serialize(),
                 success: function () {
                     $(form).html("<div id='message'></div>");
                     $('#message').html("<h2>Your request is on the way!</h2>")
                         .append("<p>someone</p>")
                         .hide()
                         .fadeIn(1500, function () {
                         $('#message').append("<img id='checkmark' src='images/ok.png' />");
                     });
                 }
             });
             return false; // required to block normal submit since you used ajax
         }
     });

 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:38:38.323

您必须将代码放入文档就绪回调中，以确保之前加载了 DOM（您的表单）。

```
$(document).ready(function() {
 //Code
}); 
```

您必须从 中删除现有`.submit()`的`submitHandler`并将其放在验证初始化之外但在`ready`. 然后在`submitHandler`你只调用`form.submit();` With `form.submit();`you trigger`submit`中，然后触发另一个。

或者你把你的`$.ajax`直接放入`submitHandler`.

您现在执行此操作的方式，您只需在单击提交按钮时添加事件侦听器。那实际上为时已晚。之后，您的表单将在没有 ajax 的情况下直接提交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-27T08:00:21.540

这很容易。只做这个

```
if ( $( "label.error" ).length===false || $( "label.error" ).is(":visible")===false) {

here set the ajax

} 
```*

# iphone - 从 NSUserDefaults 检索 NSArray 返回空数组

> ID：15625201
> 
> 赞同：1
> 
> 时间：2013-03-25T21:33:38.417
> 
> 标签：iphone, objective-c, nsstring, nsarray, nsuserdefaults

我遇到了奇怪的行为`NSUserDefaults`。我最初将一个数组存储到我的**AppDelegate.m**中的用户默认值：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSArray *weekdayIDs = [defaults objectForKey:@"weekdayIDs"];

if (weekdayIDs == nil) {
weekdayIDs = [NSArray arrayWithObjects:@"su", @"mo", @"tu", @"we", @"th", @"fr", @"sa", nil];
[defaults setObject:weekdayIDs forKey:@"weekdayIDs"];
}

[defaults synchronize]; 
```

现在在不同的视图控制器**ContentViewController.m**中，我想检索数组：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSArray *weekdayIDs = [defaults objectForKey:@"weekdayIDs"]; 
```

但我只是得到一个没有对象的数组，尽管它的`count == 7`. 我也使用过`arrayForKey:`，但结果相同。我从断点添加了一个屏幕截图。

![在此处输入图像描述](../Images/904b7fe914ed4141b4e2ffdb409546cb.png)

我经常使用`NSUserDefaults`，但目前我有点坚持。这可能是一个愚蠢的错误，有人愿意帮忙吗？

太感谢了！

- 更新：

我还认为首先可能是 NSArray 的 init 有问题，但即使用手动创建的对象替换它`NSString *dwid_su = [NSString stringWithString:@"su"];`也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:48:22.993

您的代码完美运行。

只需打印数组的描述，您就会看到您想要的。

右键单击`weekdayIDs`变量并选择*Print Description of weekdayIDs*

或通过 lldb 调试器控制台使用`po weekdayIDs`

或者`NSLog(@"%@", weekdayIDs);`

这里是结果。

![在此处输入图像描述](../Images/c0c9ea34053654518a73d05ff948a9b1.png)

# java - Spring MVC - 跨控制器继承的变量值

> ID：15625204
> 
> 赞同：3
> 
> 时间：2013-03-25T21:33:43.650
> 
> 标签：java, spring, spring-mvc

我有两个控制器继承自一个，MainController。每个控制器的范围都是“会话”。在 MainController 我有一个变量：索引，只需遵循：

```
@Controller
public class C1 extends MainController {
    @RequestMapping(value="/action1") 
    public void Action1() {
        System.out.print(Index);
    }
}

@Controller
public class C2 extends MainController {
    @RequestMapping(value="/action2") 
    public void Action2() {
        System.out.print(Index);
    }
}

public class MainController {

    protected int Index = 0;

    @ModelAttribute("BeforeRequest")
    public void BeforeRequest(HttpServletRequest request) {
        if (request.getRequestURI().contains("action1")) {
            Index++;
        }
    }
} 
```

当“Action1”运行时，MainController 中的 Index 增加 1（ModelAttribute 注释）。在 C1 中，变量每次请求都增加 1，但在 C2 中仍为 0（如定义）。

是否可以将索引的当前值“注入”到 C2？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:41:47.813

如果要计算用户访问该站点的次数，有几种方法。一种简单的方法是创建一个映射到所有请求的 servlet 过滤器，该过滤器增加请求计数并将其放置在用户会话中。

这在 web.xml 中：

```
<filter>
    <filter-name>RequestCountFilter</filter-name>
    <filter-class>com.mycompany.RequestCountFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>RequestCountFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

过滤器实现看起来像这样：

```
public class RequestCountFilter implements Filter {

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {

        HttpServletRequest request = (HttpServletRequest) req;
        HttpSession session = request.getSession();
        Integer requestCount = session.getAttribute("requestCount") == null 0 : session.getAttribute("requestCount");
        session.setAttribute("requestCount", ++requestCount);         
        chain.doFilter(req, res);
    }
    public void init(FilterConfig config) throws ServletException {
        // init code goes here
    }
    public void destroy() {
        // clean up goes here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:51:36.440

虽然 C1 和 C2 是 MainController 的子类，但是当 spring 启动时，它会为每个创建一个实例，因此你有两个变量的副本`Index`。

最简单的方法是使 Index 变量静态，使其属于类实例，而不是对象

尝试在每个 C1 和 C2 的构造函数上打印一些调试语句，当弹簧启动时，您会看到它们都是不同的对象实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:24:39.760

我不会将控制器本身放入会话范围。

而是在 sessionscope 中实现保存 index 变量的 sessionobject 并将其连接到您的控制器中。

我看到至少三个优点：

*   较小的会议
*   不需要静态
*   更容易扩展：如果你突然在另一个地方需要这个索引，而不是继承你的基础的控制器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:07:17.687

我像 Martin Frey 写的那样解决了我的问题。我已经将索引创建为会话 bean，控制器可以是 Scope 请求。

解决问题的主要标签是：bean XML 中的 scope="session" 和 aop:scoped-proxy。

这是一个改进的代码：

```
@Controller
@Scope("request")
public class C1 extends BaseController {

    @RequestMapping(value="/action1")
    public void Action1() {
        System.out.println("Action1: " + Index.getIndex());
    }
}

@Controller
@Scope("request")
public class C2 extends BaseController {

    @RequestMapping(value="/action2")
    public void Action2() {
        System.out.println("Action2: " + Index.getIndex());
    }
} 
```

BaseController 是：

```
public class BaseController {

    @Autowired
    protected BeanSession Index;

    @ModelAttribute("BeforeRequest")
    public void BeforeRequest(HttpServletRequest request) {
        if (request.getRequestURI().contains("action1")) {
            Index.setIndex(Index.getIndex() + 1);
        }
    }

    public BeanSession getIndex() {
        return Index;
    }

    public void setIndex(BeanSession index) {
        Index = index;
    }

} 
```

BeanSession 类：

```
public class BeanSession {

    private int Index;

    public BeanSession() {
        this.Index = 1;
    }

    public int getIndex() {
        return Index;
    }

    public void setIndex(int index) {
        Index = index;
    }

} 
```

以及 xml 中的 Bean 定义：

```
<bean id="BeanSession_Bean" class="controller.BeanSession" scope="session" >
    <aop:scoped-proxy/>
</bean>

<bean id="BaseController_Bean" class="controller.BaseController">
    <property name="Index" ref="BeanSession_Bean" />
</bean> 
```

它就像我想要的那样工作。

# url - 如何在浏览器中对按大小排序的目录列表进行排序？

> ID：15625206
> 
> 赞同：0
> 
> 时间：2013-03-25T21:33:45.277
> 
> 标签：url, browser, directory

1.  如何在浏览中对 Web 目录的内容进行排序？
2.  为什么有些目录可以通过单击列标题进行排序而其他目录没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:55.700

默认情况下，目录内容列表由网络服务器软件直接生成，例如 Apache、IIS 等。

不同的网络服务器有自己的信息呈现方式。上次我检查时，最新版本的 IIS 和 Apache 仍然返回多年来保持不变的静态 HTML。

您可能会看到自定义实现（例如由服务器端脚本生成的列表）或浏览器的内置 WebDAV 或 FTP 列表屏幕。IIRC Firefox 的 WebDAV 和 FTP 列表页面确实允许您对列进行排序。

至于如何对列表进行排序 - 这取决于您如何生成列表。如果您正在编写自己的生成 HTML 的服务器端程序，那么最简单的方法是在 a 中返回数据`<table>`并使用客户端脚本对列进行排序。如果您依赖服务器的列表页面，那么您将无能为力，除非您使用 IIS 和 Apache 都支持的新列表生成模块扩展您的服务器。

# cocos2d-iphone - ipad 3 与 cocos2d 0.99.5

> ID：15625216
> 
> 赞同：0
> 
> 时间：2013-03-25T21:34:54.043
> 
> 标签：cocos2d-iphone, ipad-3

有没有办法让我的应用程序在 ipad 3 上运行而无需更新到 cocos2d 1.0.1 或更高版本？我正在使用 cocos2d 0.99.5 和使用 cocos2d 0.99.5 的第三方框架（不是我的）更新到 cocos2d 1.0.1 或更高版本将是一项艰巨的工作。我的应用程序在 ipad 1 和 ipad 2 中运行，但在 ipad 3 中我只看到黑屏（并听音乐）

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:49:47.183

可能，如果您可以追溯在 0.99.5 和 v1.0.1 之间添加 iPad 3 支持所做的工作。您可以使用 github 提交历史记录。虽然这不是一件容易的事，而且可能比更新到 v1.0.1 花费更多时间。

为什么更新是一项艰巨的任务？如果您尝试了它并发现了数百个甚至数千个错误，这并不意味着您必须应用相同数量的修复程序。一个重命名的 cocos2d 类已经可以给你带来几十个甚至更多的错误，具体取决于类和你的项目。

[要更新 cocos2d，请按照此处描述的步骤](http://www.learn-cocos2d.com/2011/05/update-cocos2d-iphone-existing-project/)。尤其重要但经常被遗忘的是实际删除所有旧的 cocos2d 文件，否则您可能仍然在项目中使用旧版本的源文件造成各种麻烦。

我记得当我将我的书的第一版（cocos2d 0.99）更新到第二版（cocos2d 1.0.1）时，这两个 cocos2d 版本之间几乎没有代码，实际上迫使我编写新代码。99% 的更改只是重命名的类、方法和属性 - 相应地重命名它们可以解决 80% 的问题，其余的是新的或删除或重新排列方法的参数，几乎同样容易修复，但并不容易，因为你可以不要总是使用重构分别搜索和替换来解决这些问题。

我建议先修复简单的（重命名的类、方法、属性），然后再处理其余的。如果您需要帮助，您已经知道如何使用 SO。;)

# performance - AngularJS 等待编译/链接/重复，直到用户点击

> ID：15625223
> 
> 赞同：1
> 
> 时间：2013-03-25T21:35:14.437
> 
> 标签：performance, angularjs

我在中型结果集上遇到了一些性能问题。结果集是一个文档列表，每个文档都有一个小的属性数组（元数据，如创建、修改、标签、所有者名称等），这些属性在用户单击显示/隐藏按钮之前是隐藏的。

在模板中，我使用了很多`ng-show`s，当我将所有这些注释掉时，性能会显着提高，所以我想知道是否有办法让 Angular 不编译任何这些，不渲染任何ng-repeats 直到用户单击属性显示/隐藏按钮。还是有更惯用的方式来解决这个问题？

**更新：**实际上，不是当我注释掉`ng-show`s 时，而是当我注释掉整个 html 块时，似乎访问对象的属性是导致性能下降的原因。为什么？

模板：

```
 <div class="property" ng-show="property.display && property.value && property.viewable" ng-repeat="property in item.properties()">

     <span class="property-name">{{property.external}}:</span>
     <span class="property-value" ng-show="property.type == 'string' || property.type == 'integer' || property.type == 'float'">
         <span ng-hide="property.edit">{{property.value}}</span>
         <span ng-show="property.edit">
             <input name="{{property.internal}}" id="{{property.internal}}{{item.id()}}" />
             <span class="edit-button"><a ng-click="simpleUpdate(item, property)">save</a></span>
             <span class="edit-button"><a ng-click="editProperty(item, property)">cancel</a></span>
         </span>
            <span class="edit-button" ng-show="property.editable && !property.edit"><a ng-click="editProperty(item, property)">edit</a></span>
     </span>                

     <span class="property-value" ng-show="property.type == 'stringArray'">
         <span ng-hide="property.edit">{{property.value | join:', '}}</span>
         <span ng-show="property.edit">
             <textarea name="{{property.internal}}" id="{{property.internal}}{{item.id()}}" class="keywords" rows="1" cols="80"></textarea>
             <span class="edit-button"><a ng-click="simpleUpdate(item, property)">save</a></span>
             <span class="edit-button"><a ng-click="editProperty(item, property)">cancel</a></span>
         </span>
         <span class="edit-button" ng-show="property.editable && !property.edit"><a ng-click="editProperty(item, property)">edit</a></span>
     </span>

     <div class="clearboth">&nbsp;</div>
 </div> 
```

# c++ - map vs unordered_map 几个元素

> ID：15625225
> 
> 赞同：15
> 
> 时间：2013-03-25T21:35:21.217
> 
> 标签：c++, c++11, std

我正在尝试在以下用例之间`map`进行选择：`unordered_map`

的键`map`是指针。最常见的用例是地图中只有一个元素。一般来说，地图中的最大元素数小于 10。地图的访问频率很高，速度是最重要的因素。地图的更改很少见。

虽然在这里测量速度显然是正确的方法，但此代码将在多个平台上使用，因此我试图创建一个通用的经验法则，用于在 a`map`和`unordered_map`基于元素数量之间进行选择。我在这里看到一些帖子暗示 std::map 对于少量元素可能更快，但没有给出“小”的定义。

何时根据元素数量在 a`map`和之间进行选择是否有经验法则？`unordered_map`另一种数据结构（例如通过 a 进行线性搜索`vector`）是否更好？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T21:46:31.987

*在您总是*需要测量以找出在性能方面更合适的前提下，如果所有这些事情都是真的：

1.  地图的变化并不频繁；
2.  地图最多包含 10 个元素；
3.  查找会很频繁；
4.  你非常关心性能；

然后我会说你最好把你的元素放在一个中`std::vector`并对所有元素进行简单的迭代以找到你正在寻找的那个。

An`std::vector`将在内存的连续区域中分配其元素，因此缓存局部性可能会为您提供更高的性能 - 缓存未命中后从主内存获取缓存行所需的时间至少比时间高一个数量级需要访问 CPU 缓存。

[非常有趣的是，Boost`flat_map`](http://www.boost.org/doc/html/boost/container/flat_map.html)似乎非常适合您的用例（由[Praetorian](https://stackoverflow.com/users/241631/praetorian)提供）：

> `flat_map`类似于`std::map`但它像有序向量一样实现。（*来自在线文档*）

因此，如果您可以选择使用 Boost，您可能想试试这个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T21:47:01.590

我相信对于您的 10 个或更少元素的情况，通常只有一个，对未排序向量的线性搜索效果最好。但是，根据使用的哈希算法，unordered_map 可能会更快。

它应该很容易让您进行基准测试。

# javascript - AJAX 请求 ot YQL，插入客户密钥和秘密

> ID：15625227
> 
> 赞同：1
> 
> 时间：2013-03-25T21:35:27.233
> 
> 标签：javascript, ajax, yql

我在查询 Yahoo 的 API 时遇到了一些麻烦。虽然我的代码确实有效，但它有时会返回我请求的内容（财务表中的股票报价），但有时相同的查询会返回空结果。

我想我会在雅虎注册，我得到了我的客户密钥和客户密码，看看这是否能解决查询失败的问题。

我的问题是：我在 XMLHttpRequest 中的哪里插入客户密钥和客户密钥（我使用标准 JavaScript，而不是 jQuery 用于项目目的）。最初我认为它应该放在 GET URL 中：

```
?q=whatever&key=Mykey&secret=Mysecret 
```

但是在 URL 中放置密钥是没有意义的。我应该如何进行？

# c# - 首选查询方法

> ID：15625229
> 
> 赞同：1
> 
> 时间：2013-03-25T21:35:35.490
> 
> 标签：c#, csv

什么是按列和查询列读取变量的更优化方法。这是我目前正在做的事情。

```
var lines = File.ReadAllLines("readme.csv").Select(a => a.Split(','));

//load columns into variables
var col1 = from line in lines select line[1];
var col2 = from line in lines select line[2];
var col3 = from line in lines select line[3];
var col4 = from line in lines select line[4];

//query column 1
foreach (string line in col1)
{ //query if ...
}
//query column 2
foreach (string line in col2)
{ //query if ...
}
//query column 3
foreach (string line in col3)
{ //query if...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:54:00.417

ToList() 防止重复循环，如评论中所回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:43:01.780

> 什么是按列和查询列读取变量的更优化方法。

您正在尝试解决以前已解决的问题。CSV 文件有许多与转义和引用相关的细微差别。

我建议使用 Code Project 中的 CSV Reader。

[http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

我已将其广泛用于非常大的数据文件（多 GB）。

使用 a`BufferedStream`以获得最佳性能：

```
using (FileStream fs = File.Open(csvPath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
using (BufferedStream bs = new BufferedStream(fs))
using (CsvReader csv = new CsvReader(new StreamReader(bs), true)) 
```

# javascript - 嵌套的 $.ajax 回调未触发

> ID：15625232
> 
> 赞同：-2
> 
> 时间：2013-03-25T21:35:43.907
> 
> 标签：javascript, jquery, ajax

我正在开发一个项目，其中我有一个具有两个主要方法“保存”和“关联”的对象，它们都使用 jQuery ajax 调用来访问服务器。

两种方法都将回调函数作为参数，但只有一个回调方法被触发，即使在 Chrome 开发工具中查看所有保存/关联帖子都正在发生并从服务器返回有效数据。

以下是我正在使用的三件作品：

```
Entity.prototype.save = function(callback)
{
    var self = this;
    $.ajax({
        url: '/Entity/Create',
        type: 'POST',
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify(model),
        success: function (data){},
        error: function (xhr, status, err) { },
        complete: function (data)
        {
             console.log(self.get('_id') + ' saved.')
             if(callback)
                  callback(data.responseText);
        }
   });
 }

 Entity.prototype.relate = function(relatedEntityId, isRelate, callback)
 {
     var self = this;
     var action = isRelate ? 'Relate' : 'Unrelate';

     $.ajax({
         url: '/Entity/' + action,
         type: 'POST',
         dataType: 'json',
         contentType: 'application/json; charset=utf-8',
         data: JSON.stringify({ primaryEntityId: self._id.value, relatedEntityId: relatedEntityId }),
         done: function (data) { },
         fail: function (xhr, status, err) { },
         always: function (data)
         {
             console.log(self.get('_id') + 'related to ' + relatedEntityId);
             if(callback)
                 callback(data.responseText);
         }
     });
 }

 // from main code:

 entity.save(function (id) // this callback fires
 {
     // request is a previously saved 'entity'
     request.relate(id, true, function (id) // this callback does not
     {
         console.log('related callback completed.');
     });
 }); 
```

我不确定为什么第二个回调（来自 request.relate）没有触发，当 $.ajax 调用以相同的方式设置时（在“完成”处理程序中触发回调。

我正在测试最新版本的 Chrome (25.0.1364.172 m)。也在 Firefox 19 中进行了测试，结果相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:38:55.667

`done` `fail`并且`always`不是有效的 ajax 属性，它们用于延迟对象。

您需要使用错误/成功/完成。

# mysql - MySQL、对象和超类

> ID：15625233
> 
> 赞同：0
> 
> 时间：2013-03-25T21:35:55.267
> 
> 标签：mysql, oop

我在设计我的网站时遇到了一些麻烦。我正在尝试以我设计网站的方式使用 OOP 设计，并使用 MySQL 以 JSON 格式存储对象。

所以我在我的数据库中创建了一个 MySQL 表。该表将包含一个主键 (PK) 和我所说的页面类型（pageType，例如：homePage、aMessage、aTutorial 等）。这意味着我将拥有多个具有不同页面格式的不同页面（pageFormats，例如：headerArea、contentArea、footerArea 等）。因此，根据请求的 pageType 对象，查询将转到 pageFormat 表以检索所需的 div。

例如，我们有一个 AJAX 请求说 pageType 设置为 homePage。然后该请求将转到 pageFormat 表并查看允许主页的哪些 div，然后返回它们。然后我当然会将它们写入文档并继续加载具有所需内容的页面等等。

我只是在从我的 UML / 文档到实际开发这个想法时遇到了麻烦。因此，如果有人可以帮助我，将不胜感激。我最难理解的问题是，在 MySQL 数据库中，我正在为 pageType 和 pageFormat 设置表。

返回的类型将采用 JSON 格式，因此我页面的脚本将能够正确格式化它们。所以这引出了我的第二个问题，即在将成为 div 的 MySQL 表中存储 JSON 对象的最佳方式是什么？会是 TINYTEXT 吗？因为我不打算在里面放大量文字？

那么我的最后一个问题是，最好的桌子类型是什么？我也很难选择这个。

尽管我仍然不确定，但我已经参考了[http://dev.mysql.com/doc/refman/5.1/en/storage-engines.html表类型来尝试帮助我。](http://dev.mysql.com/doc/refman/5.1/en/storage-engines.html)

我也一直在阅读[http://www.agiledata.org/essays/mappingObjects.html#BasicConcepts](http://www.agiledata.org/essays/mappingObjects.html#BasicConcepts)以了解如何实现关系数据库并将对象映射到它们。还有其他值得我研究的好书吗？

感谢您的任何帮助/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:55:19.443

如果您想将数据作为 JSON 文档来处理，我建议您使用像[MongoDB](http://www.mongodb.org/)或[CouchDB](http://couchdb.apache.org/)这样的 NoSQL 数据库而不是 MySQL，因为它们允许您直接使用 JSON 来存储数据。

对于 MySQL，最常见的方法是使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)层来避免关系数据库管理系统和面向对象语言之间的阻抗。通过在 RDMS 中存储类似 JSON 的对象，您正在强制您的动态模式文档适合标量值，在我看来这根本不是最好的解决方案。

# sql - 如何将行数据添加到第一次出现的字符串字段

> ID：15625236
> 
> 赞同：1
> 
> 时间：2013-03-25T21:36:04.733
> 
> 标签：sql

我发现了许多如何删除重复行的示例，但它们都涉及具有唯一整数 id 的行。

这是我需要知道的。我想将所有重复的 stringID 合并在一起并对其他列的值求和。

我有这个：

```
stringID | v1 | v2 | v3
    a    | 2  |  3 | 4
    b    | 5  |  4 | 1
    a    | 1  |  1 | 2
    b    | 2  |  1 | 1 
```

我要这个：

```
stringID | v1 | v2 | v3
    a    | 3  |  4 | 6
    b    | 7  |  5 | 2 
```

感谢您的帮助。

编辑我正在使用 MySQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:41:47.460

我认为只是一个简单的`GROUP BY`，`SUM()`应该给你你正在寻找的结果：

```
SELECT
  StringID,
  SUM(v1) AS v1,
  SUM(v2) AS v2,
  SUM(v3) AS v3
FROM YourTable
GROUP BY StringID 
```

[使用 Sql Fiddle 查看它的实际效果](http://sqlfiddle.com/#!2/a8fd0/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:43:47.713

（免责声明：使用 SQL-Server >= 2005）

所以你想先更新所有记录的总和，然后你想删除重复：

更新：

```
WITH CTE AS
(
    SELECT stringID, 
           v1_sum = SUM(v1) OVER (PARTITION BY stringID),
           v2_sum = SUM(v2) OVER (PARTITION BY stringID),
           v3_sum = SUM(v3) OVER (PARTITION BY stringID),
           RN = ROW_NUMBER()OVER(PARTITION BY stringId Order By stringId)
    FROM dbo.TableName
)
UPDATE tn SET v1 = v1_sum, v2 = v2_sum, v3 = v3_sum
FROM CTE c 
INNER JOIN dbo.TableName tn ON c.stringId=tn.stringId
WHERE c.RN = 1; 
```

删除：

```
WITH CTE AS
(
    SELECT 
        RN = ROW_NUMBER()OVER(PARTITION BY stringId Order By stringId)
    FROM dbo.TableName
)
DELETE FROM CTE WHERE RN > 1; 
```

[**演示**](http://www.sqlfiddle.com/#!3/13b80/13/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:42:11.667

尝试这个...

```
select stringID, sum(v1), sum(v2), sum(v3)
from yourtable
group by stringID 
```

# sql - 如何模拟 CD 与流派的关联？

> ID：15625245
> 
> 赞同：1
> 
> 时间：2013-03-25T21:36:23.050
> 
> 标签：sql, rdbms

我正在为一个销售音乐 CD 的网站创建数据库设计，但我遇到了难题，因为我无法弄清楚 CD 与其流派之间的关系是一对多还是多-太多

每张 CD 可以有多种流派。例如，“Ministry of Sound Dubstep Anthems”可以有 Dubstep、Dance 和 Electro 等流派。

不过，我想得越多，每种流派也可以与许多 CD 相关联。

我目前拥有数据库的方式是：

```
cd_table
   PK ID
   FK Genre
   Description
   ...

genre_table
   PK ID
   Genre 
```

如果是多对多，我认为我需要一个连接表，例如：

```
cd_genre
   CD_ID
   Genre_ID 
```

然后让它们都充当主键？我如何将 cd_genre 链接到 cd_table？还是我只是删除 cd_table 中的 FK，然后在查询 CD 时进行连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:50:46.297

要确定多重性，请从不同的关系开始提出相同的问题：

1.  一张 CD 可以属于多个流派吗？
2.  一个流派可以包含多张 CD 吗？

当然，这*可能*是*错误*的数据库模型。相反，Song<->Genre 和 Song<->CD，是更高的规范化形式。这是一个更高的 NF，因为 CD<->Genre 可以由 CD<->Song<->Genre 组成，但 CD<->Genre 不能回答关于 CD 上歌曲的相同查询（除非一张 CD 最多可以是一个 Genre ）。

另一方面，人们可能*只*关心 CD 而不是歌曲 .. 在这种情况下，建模歌曲无关甚至有害的过多数据。同样，完美的分类可能会使实际分类过于复杂——注意信息粒度和问题域使用之间的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:38:14.447

你是对的 - CD 和流派之间的关系*是*多对多的，这正是你提供的原因。

是的，您所需要的就是您所描述的交叉引用/连接表。

* * *

有趣的是，根据其他限制，您可能也希望能够将流派放在其他地方。例如，歌曲：像[Weird Al](http://en.wikipedia.org/wiki/%22Weird_Al%22_Yankovic)这样的艺术家可能会在他的一张专辑中放入几种不同类型的歌曲，而专辑本身不一定有任何单一的“主要”类型（但通常有一些“主题”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:38:23.887

我想你回答了你自己的问题。CD 和流派是多对多的，您可以使用带有两个外键的两列表来完成它，通常称为“连接表”。通常没有必要将该表视为具有主键，但合理地讲，两列一起是复合主键。

# php - 使用 unix 时间戳和时区

> ID：15625249
> 
> 赞同：0
> 
> 时间：2013-03-25T21:36:42.050
> 
> 标签：php, python, date, timestamp-with-timezone

时区和时间戳让我感到困惑，所以我希望有人能回答我的问题:)

假设我有一个 Python 脚本，它解析 RSS 提要，使用以下代码将日期值转换为时间戳并将其存储在数据库中：

```
article_date = parse(article.published).strftime('%s') if hasattr(article, 'published') else round(time.time()) 
```

现在，当我从 PHP 中的数据库检索该记录并运行以下代码时，PHP 是否假定时间戳为 UTC-0 并自动将时区偏移到东部时间？

```
date_default_timezone_set('America/New_York');
echo date('Y-m-d H:i:s',$timestamp); 
```

我发现我的日期有奇怪的问题，所以我想知道是否有人可以帮助我就如何正确转换和存储 rss 提要时间戳提供建议。我可以在某处跨越这行代码，所以我应该把它放在我的脚本顶部吗？

```
os.environ['TZ'] = 'Europe/London' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:48:23.597

如果你想设置你的时区并使它们在 PHP 和 Python 中保持一致，那么你的 PHP 代码是完全正确的，对于 python，你需要应用以下内容：

```
os.environ['TZ'] = 'America/New_York'
time.tzset() 
```

*在*你打电话之前`strftime()`

这应该确保您将时间存储在您尝试检索它的同一区域中。

**注意：** `tzset()`是一个 Unix-only 函数。

# liferay - Liferay 是否允许每个用户使用不同的配色方案？

> ID：15625254
> 
> 赞同：2
> 
> 时间：2013-03-25T21:37:16.023
> 
> 标签：liferay, color-scheme, liferay-theme

我正在实现一个功能，允许用户在两​​种不同的配色方案之间切换。但是，在我看来，Liferay 中的配色方案是按系统/门户而不是按用户的。因此，如果用户更改它（我可以授予每个用户这样做的权限），它将为所有用户更改。我理解正确吗？

如果是这种情况，实现该功能的最佳方法是什么？

我现在想到的是，我可以为每个用户添加一个自定义字段，以存储一个人选择的配色方案；但我不确定下一步该怎么做。看起来我无法更改系统范围内的配色方案以便`ThemeDisplay`可以使用它来呈现页面，因为这将为所有其他用户更改它。是否可以在渲染每个页面时应用用户特定的配色方案？

* * *

更新：似乎在下面`theme/_diffs/templates/init.ftl`，有一种方法可以通过修改以下行来实现，

```
<#assign css_class = theme_display.getColorScheme().getCssClass() + " yui3-skin-sam" /> 
```

我们需要的是检索特定于用户的配色方案的 Css 类，并`theme_display.getColorScheme().getCssClass()`用它替换。

明天将测试这个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T20:25:18.940

在 theme/_diffs/templates/init.ftl 下，有一种方法可以通过修改以下行来实现，

<#assign css_class = theme_display.getColorScheme().getCssClass() + " yui3-skin-sam" /> 我们需要获取用户自定义配色方案的Css类，替换为theme_display.getColorScheme().getCssClass()接着就，随即。

# javascript - 是否可以获取从源加载的脚本文本而不是行代码？

> ID：15625256
> 
> 赞同：2
> 
> 时间：2013-03-25T21:37:26.867
> 
> 标签：javascript, html, dom

**目前我只是获取页面上的脚本的来源。**

的HTML：

```
<script type="text/plain">meow</script> 
```

JavaScript：

```
// returns "meow"
document.querySelector('script').text 
```

**我希望能够从另一个文件加载脚本。**

的HTML：

```
<script type="text/plain" src="file.txt"></script> 
```

文件.txt：

```
meow 
```

JavaScript：

```
// returns "meow"
document.querySelector('script').textFromFile 
```

**有谁知道这是否可能？我认为不是，而且我在谷歌上没有找到任何我要问的东西。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:41:41.493

如果`script`有一个`src`属性，您需要通过 XHR 向同一路径发出请求并拉入其响应的文本内容。请记住，如果脚本是从另一个域加载的，这将需要额外的工作。此时，您将需要使用 CORS，或引入其他类型的代理来处理跨域通信。

# python - PyQt 对话框在退出时关闭整个应用程序

> ID：15625260
> 
> 赞同：3
> 
> 时间：2013-03-25T21:37:37.040
> 
> 标签：python, pyqt, pyqt4

我有一个 PyQt 向导，其中包含一个询问用户问题的对话框。此对话框是可选的，仅在用户需要时使用。按钮发送应用程序接收并打开窗口的信号。我遇到的问题是，当对话框关闭时，它会关闭整个应用程序。如何确保在关闭对话框时，主应用程序保持打开并运行？这里是处理对话框的代码：

```
def new_item(self):
    app = QtGui.QApplication(sys.argv)
    Dialog = QtGui.QDialog()
    ui = Ui_Dialog()
    ui.setupUi(Dialog)
    Dialog.exec_() 
```

我尝试添加一个“取消”按钮来手动关闭它，但结果是一样的，整个应用程序都关闭了。

```
QtCore.QObject.connect(self.cancel, QtCore.SIGNAL(_fromUtf8("clicked()")), Dialog.close) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:10:34.460

你不应该在你的代码中创建新`QApplication`的对象，我对销毁该对象会关闭应用程序并不感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:47:49.660

您的代码应如下所示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.dialog = QtGui.QMessageBox(self)
        self.dialog.setStandardButtons(QtGui.QMessageBox.Ok | QtGui.QMessageBox.Cancel)
        self.dialog.setIcon(QtGui.QMessageBox.Question)
        self.dialog.setText("Click on a button to continue.")

        self.pushButtonQuestion = QtGui.QPushButton(self)
        self.pushButtonQuestion.setText("Open a Dialog!")
        self.pushButtonQuestion.clicked.connect(self.on_pushButtonQuestion_clicked)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.pushButtonQuestion)

    @QtCore.pyqtSlot()
    def on_pushButtonQuestion_clicked(self):
        result = self.dialog.exec_()

        if result == QtGui.QMessageBox.Ok:
            print "Dialog was accepted."

        elif result == QtGui.QMessageBox.Cancel:
            print "Dialog was rejected."

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T12:24:04.110

就我而言，我有`QSystemTrayIcon`一个“入口点”，而不是我的应用程序`QMainWindow`or `QWidget`。

多亏了[这个答案](https://stackoverflow.com/a/6322631/5232529)，调用`.setQuitOnLastWindowClosed(False)`我的主要实例有所帮助`QApplication`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-01T19:07:00.570

尝试使用`Dialog.reject`而不是`Dialog.close`

`.close()`方法正在与 QMainWindow Widget 一起使用，`.reject()`与 QDialog 一起使用。

# google-apps-script - MailApp.sendEmail 未触发

> ID：15625261
> 
> 赞同：1
> 
> 时间：2013-03-25T21:37:39.970
> 
> 标签：google-apps-script

当在 onEdit(event) 中调用该函数时，我下面的函数似乎没有触发任何类型的电子邮件。我已经尝试过 EmailApp 和 GmailApp，对于此事的任何帮助将不胜感激。

我也尝试过使用我的个人@gmail.com 帐户，但都不会再向它发送电子邮件。

```
function sendAlert() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = ss.getActiveCell().getA1Notation()

  var subject = 'Update to '+sheet.getName();
  var body = sheet.getName() + ' has been updated.  Visit ' + ss.getUrl() + ' to view the changes on cell ' + cell;
  GmailApp.sendEmail('s....@project-la.com', subject, body);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:55:50.813

你的函数是`sendAlert()`从函数调用的`onEdit()`吗？

[如文档](https://developers.google.com/apps-script/understanding_triggers?hl=fr-FR)中所述，简单的 onEdit 函数无法发送邮件。因此，请改用可安装的 onEdit 触发器。最后一个将请求授权，然后按预期执行。

触发器位于脚本编辑器的资源选项卡中，如下所示： ![在此处输入图像描述](../Images/aca34ad783d85846d7945c78eb887d4b.png)

注意：如果您正在重用现有`onEdit()`函数，请记住重命名它，使其不再充当简单的触发函数。

# c++ - MVC 11.0 - 结构大小错误？

> ID：15625266
> 
> 赞同：0
> 
> 时间：2013-03-25T21:37:58.090
> 
> 标签：c++, sizeof

我发现了这么奇怪的东西：对于 MasterBootRecord 结构

```
//

typedef unsigned char Byte;
typedef unsigned short int Word;
typedef unsigned int Dword;

//
typedef struct
{
    Byte currentPartitionState;

    Byte startPartitionHead;
    Word startCylinderSector;

    Byte partitionType;

    Byte endPartitionHead;
    Word endCylinderSector;

    Dword numSectorsBetweenMbrAndPartition;
    Dword numSectorsInPartition;
} PartitionEntry;

//
typedef struct
{
    Byte executableCode[446];

    PartitionEntry partitionEntry1;
    PartitionEntry partitionEntry2;
    PartitionEntry partitionEntry3;
    PartitionEntry partitionEntry4;

    Word bootRecordSignature;
} MasterBootRecord; 
```

当我尝试获取 sizeof(MasterBootRecord) 时，我得到了 516 个字节，虽然正确的大小是 446 + 4*16 + 2 = 512。为什么会这样？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:53:21.803

这是因为内存中的数据对齐。

问题是要将 446 字节存储在 4 字节块中，您需要 112 个这样的块，它们占用 448 字节（比预期多 2 个字节）。为了存储最后一个字，您还需要 4 个字节而不是 2 个（多 2 个字节）。所以有你的 4 个额外的字节。

您可以尝试评论“bootRecordSignature”，您仍然应该比预期多获得 2 个字节（预期为 510，但您将获得 512）。

# objective-c - 解码'在目标c

> ID：15625268
> 
> 赞同：0
> 
> 时间：2013-03-25T21:37:58.947
> 
> 标签：objective-c, ascii

我从WebService保存数据，并且某些信息具有 ASCII 字符，例如`&#8216;`or例如，那些 2 没有。`#038;``\u00f3`

为什么是这样？我理解正确吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:54:54.610

## 替换 HTML 实体

由于您正在从 WebService 保存数据，因此您可以将这个[NSString 类别用于 HTML](http://www.cocoanetics.com/2011/01/uiwebview-must-die/)，如本文所述：[Objective-C：如何替换 HTML 实体？](https://stackoverflow.com/questions/2364797/objective-c-how-to-replace-html-entities)

（Html 实体类似于：`&#8216;`- 更多关于[wikipedia](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)的内容）

> 该类别中可用的方法有：

```
- (NSString *)stringByConvertingHTMLToPlainText;
- (NSString *)stringByDecodingHTMLEntities;
- (NSString *)stringByEncodingHTMLEntities;
- (NSString *)stringWithNewLinesAsBRs;
- (NSString *)stringByRemovingNewLinesAndWhitespace; 
```

## **对评论的回应**

**[NSAttributedString initWithHTML: documentAttributes:]**

*从包含在给定数据对象中的 HTML 中初始化并返回一个新的 NSAttributedString 对象。*

```
NSData* htmlData = [yourHTMLString dataUsingEncoding:NSUTF8StringEncoding]
NSAttributedString* theAttributedString = [[NSAttributedString alloc] initWithHTML:htmlData documentAttributes:NULL]; 
```

我一直在使用它，而且效果很好。我什至用它做了一个宏：

```
#define html2AttributedString(htmlString)                                                                   \
    [[[NSAttributedString alloc] initWithHTML:[(htmlString) dataUsingEncoding:NSUTF8StringEncoding]         \
    documentAttributes:NULL] autorelease] 
```

用法：

```
NSAttributedString* attributedString = html2AttributedString(yourNSString); 
```

然后，您可以为颜色、对齐方式、字体等制作宏…</p>

对于 iOS，您可以查看他们为您提供替代品的[此页面](http://www.cocoanetics.com/2011/01/uiwebview-must-die/)。

> 我们的 initWithHTML 方法旨在完美匹配 Mac 版本的输出。这对于角色来说是可以实现的，并且我已经进行了单元测试，以确保它保持完美。关于属性，有很多事情必须在 iOS 上稍有不同才能实现相同的外观。我不会用那里的细节来打扰你。

# javascript - 有没有一种很好/干净的方式来读取 JavaScript 中的 plist 文件？

> ID：15625276
> 
> 赞同：0
> 
> 时间：2013-03-25T21:38:30.560
> 
> 标签：javascript, ajax, plist

在我的 Web 应用程序加载到屏幕上后，我试图通过 JQuery 发送一个 AJAX 请求以获取不同的 plist 文件。

我知道 AJAX 处理 plist 文件有点类似于 XML 文件，但我想知道是否有第三方解析器可以帮助我分解各种“数组”和“字典”标签？

否则，如果其他人知道在 JavaScript 中从 plist 文件中读取数据的更简单方法，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:42:00.837

看起来有一个图书馆，试试看（我没有，所以不要让我坚持）

试试看：[https ://github.com/pugetive/plist_parser](https://github.com/pugetive/plist_parser)

# c - 再次 collect2: ld 返回 1 退出状态

> ID：15625277
> 
> 赞同：0
> 
> 时间：2013-03-25T21:38:31.307
> 
> 标签：c, linker, microcontroller

我正在对微控制器进行编程。我使用 VisualStudio 2010 创建了所有代码，现在，使用与微控制器相同的代码，我收到此错误：

```
...
    ./src/main.o:(.rodata.GPS_latitude+0x0): multiple definition of `GPS_latitude'
./src/empresa1.o:(.rodata.GPS_latitude+0x0): first defined here
./src/main.o:(.rodata.GPS_hora+0x0): multiple definition of `GPS_hora'
./src/empresa1.o:(.rodata.GPS_hora+0x0): first defined here
./src/gps.o: In function `GPS_PreencheCampos':
gps.c:(.text.GPS_PreencheCampos+0x4): undefined reference to `GPS_GuardaAnterior'
./src/main.o: In function `main':
main.c:(.text.startup.main+0xa0): undefined reference to `GPS_PegaValorLatitude'
main.c:(.text.startup.main+0xa4): undefined reference to `GPS_PegaLatitudeInt'
main.c:(.text.startup.main+0xc0): undefined reference to `GPS_PegaValorLongitude'
main.c:(.text.startup.main+0xc4): undefined reference to `GPS_PegaLongitudeInt'
main.c:(.text.startup.main+0xf8): undefined reference to `GPS_PegaHoraInt'
main.c:(.text.startup.main+0x110): undefined reference to `GPS_PegaStatusInt'
main.c:(.text.startup.main+0x128): undefined reference to `GPS_PegaModoInt'
main.c:(.text.startup.main+0x140): undefined reference to `GPS_PegaSatelitesInt'
collect2: ld returned 1 exit status
make: *** [TFRT_Leandro.axf] Error 1 
```

最初可以看到“多重定义”有一些错误消息。所有这些消息都是关于 .h 文件中定义的变量。它们被定义为 GPS_data 定义如下：

```
struct {
  char data[7];     // Data no formato ddMMyy\0
  char hora[7];     // Hora no formato hhmmss\0
  char latitude[10];    // Latitude no formato ddmm.mmmm\0
  char longitude[11];   // Longitude no formato dddmm.mmmm\0
  char velocidade[6];   // Velocidade no formato sss.s\0
  char curso[6];      // Curso no formato ccc.c\0
  char satelites[3];    // Número de satélites no formato nn\0
  char status[2];     // Qualidade do GPS Invalido(0), Valido GNSS fixo(1) ou Valido GNSS fixo diferencial(2)
  char norteSul[2];   // Direção de latitude (N/S)
  char lesteOeste[2];   // Direção de longitude (E/W)
  char modo[2];     // Modo: Sem fixo disponível (1), 2D (2), 3D (3)
} GPS_Info;

typedef struct GPS_Dado{
  int origem;
  int posicao;
  int tamanho;
  char * pDado;
};

const struct GPS_Dado GPS_hora =    {GPS_Tipo_GPRMC, 0,   7,  GPS_Info.hora}; 
```

我们可以注意到的另一件事是对函数的未定义引用。我不明白。每个函数在头文件中都有声明，该声明正确包含在文件 main.c 中。

我希望有人可以帮助我解决这个错误。好吧，关于这个疑问的任何其他问题，请随时在评论中提问。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:45:39.683

你不应该在头文件中定义变量和常量，只声明它们：

```
extern const struct GPS_Dado GPS_hora; 
```

然后在 implementation ( `.c`) 文件中，定义它：

```
const struct GPS_Dado GPS_hora = { GPS_Tipo_GPRMC, 0, 7,  GPS_Info.hora }; 
```

# vb.net - VB.NET - 单一类，多种用途？

> ID：15625283
> 
> 赞同：1
> 
> 时间：2013-03-25T21:38:47.923
> 
> 标签：vb.net, design-patterns

请看一下下面的类和类型：

```
Imports System.Data.SqlClient

Public Class c1

    Dim PersonID As Integer

    Public Sub New(ByVal Person As Person)
        PersonID = Person.PersonID
    End Sub

    Public Sub New()

    End Sub

    Private Sub SingleDelete()
        Dim objCommand As SqlCommand
        Dim objCon As SqlConnection
        Try
            Dim _ConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=true"
            objCon = New SqlConnection(_ConString)
            objCommand = New SqlCommand("Delete FROM Person were id=" & PersonID)
                objCommand.Connection = objCon
                objCon.Open()
                objCommand.ExecuteNonQuery()
        Catch ex As Exception
            Throw
        Finally

        End Try
    End Sub

        Private Sub MassDelete(ByVal listPerson As List(Of Person))
            Dim objCommand As SqlCommand
            Dim objCon As SqlConnection
            Try
                Dim _ConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=true"
                objCon = New SqlConnection(_ConString)
                For Each Person In listPerson
                objCommand = New SqlCommand("Delete FROM Person were id=" & Person.PersonID)
                objCommand.Connection = objCon
                    objCon.Open()
                    objCommand.ExecuteNonQuery()
                Next
            Catch ex As Exception
                Throw
            Finally

            End Try
        End Sub
    End Class

Public Class Person
    Public PersonID As String
End Class 
```

这个类有两个用途：

```
1) Call the constructor with a Person argument.  Then call SingleDelete i.e. delete one person.
2) Call the zero argument constructor.  Then call multiple delete i.e. delete many persons (all persons in the list are deleted) 
```

这是否违反了 SOLID 原则？在我看来，这门课有两个目的。如果使用零参数构造函数，则不使用 PersonID 实例变量。

如果我想太多，我会徘徊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:44:30.473

我认为您正在寻找的是在大多数语言中称为“静态”方法的方法，但我认为 VB 中的关键字是“共享”。（请原谅我——我在 VB 中不是那么博学，但我想回答概念性问题。）多重删除不应该需要实例化 Person 对象——这是你对类所做的事情，而不是对类的一个实例.

因此，您的 Mass-delete 应该是“类方法”或“静态方法”，您可以像这样使用：Person.MassDelete(...)，而您的单个删除将在单个实例 bob.delete 上调用()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:41:16.460

我会说是的：它破坏了 SRP。

原因如下：该类代表两件事：一个人，以及一群人。它基本上是一个实用程序或管理器类，而不是一个标识特定域对象的类。

但是，这可能无关紧要。存储库类通常就是这样做的；它们具有处理单个对象和同一对象的集合的方法。与软件开发中的所有事情一样，您是否采用这种方法取决于最能满足您的需求的方法。

如果类的“模式”没有根据调用构造函数的方式而改变，那可能是一个更好的设计。这不是必需的; 如果你想删除多个人，你可以提供一个普通的方法，将一组人 ID 作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:45:20.023

我说也许。如果根据 PersonID 是否为空将 WHERE 子句添加到命令字符串，我认为您可以将它们折叠成一个案例。如果是这样，这是一个具有一个目的的 PersonDeleter，即删除人员。

我担心这个类会根据表的构造方式决定是否清除表中的数据，但这是一个单独的问题。

# c# - 将自定义组件从项目添加到解决方案

> ID：15625287
> 
> 赞同：0
> 
> 时间：2013-03-25T21:38:58.263
> 
> 标签：c#, visual-studio-2012

来自另一个项目的组件，已添加到解决方案中，在工具箱中未显示或呈灰色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:43:01.687

组件在工具箱中项目名下没有正常出现并显示为灰色的原因是子项目没有和解决方案在同一个目标框架中编译。

在我的示例中，解决方案的目标框架是 2.0，而子项目的目标框架是 3.5。一旦我用 2.0 重新编译了子项目，里面的组件就在工具箱中可用。

# c++ - 定义中的C ++类构造函数？

> ID：15625288
> 
> 赞同：1
> 
> 时间：2013-03-25T21:38:59.360
> 
> 标签：c++

我可以在定义后不使用范围 (::) 来定义类构造函数吗？

我换一种说法，我可以把构造函数放在类定义里面吗？？？

与此类似的东西：

```
MyClass {

public: 
    int attribute1;
    ...

    MyClass(int a) {
        attrbute1 = a;
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:40:37.537

是的你可以。

您可以在类声明中定义任何方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:41:10.437

术语：您想在其**声明中****定义**一个 C++ 类构造函数 答案是肯定的。要找到答案，您不应该问 StackOverflow。您应该询问您的 C++ 编译器。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:41:05.777

使用初始化列表：

```
class MyClass 
{

private: 
    int attribute1;
    ...
public:
    MyClass(int a) : attribute1(a) {}
}; 
```**

# android - 使用相同数据的 Facebook API 挑战其他玩家

> ID：15625296
> 
> 赞同：0
> 
> 时间：2013-03-25T21:39:42.433
> 
> 标签：android, json, facebook

我正在开发一个应用程序，这基本上是一个测验。我将所有问题存储在外部服务器上，并将它们作为 JSON 文件获取。我想实现一些 Facebook 功能，最重要的是挑战其他玩家的可能性。但是，为了比较结果，我希望其他用户在当前游戏中使用相同的问题集，就像我一样 - 类似于 SongPop 中的情况，其中两个玩家猜相同的歌曲。我不确定标准的 Android 应用程序是否可能，而不是像 SongPop 这样的 Facebook 应用程序。我正在寻找一种以某种方式向他发送“数据包”的方法，其中包含我对当前挑战的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:47:45.437

创建一个问题集，它是问题的集合。

例如 QuestionSet1 将包含 Question2、Question4、Question5。

您可以将 QuestionSet1 发送给被质疑的用户。例如 mysite.com/game/?questionsetid=1

在您的服务器上，如果 url 包含参数“questionsetid”，那么符合您的要求将从问题集中获得问题。

# iphone - 当时区支持设置为 systemTimeZone 以外的其他值时，EventKit 会截断结果集

> ID：15625297
> 
> 赞同：3
> 
> 时间：2013-03-25T21:39:45.200
> 
> 标签：iphone, ios, eventkit, ekeventstore

在 iOS 设置应用程序中，有一个名为“时区支持”的设置（设置 > 邮件、通讯录、日历 > 时区支持）。如果此设置为**OFF**，则没有问题。此外，如果此设置为**ON**，但时区支持 (TZS) 时区设置为 的当前值`systemTimeZone`，也没有问题。 *唯一出现问题的情况是设置为**ON**并且 TZS 时区设置为`systemTimeZone`*.

在最后一种情况下，`eventsMatchingPredicate:`方法返回的数组（在`EKEventStore`类的实例上）可以预见地被截断。给定一个日期范围内的所有事件的查询，`EKEventStore`失败的实例返回查询范围的开始和 TZS 时区的第一个午夜之间的任何事件。

举个例子，要检索 2013 年 3 月 18 日的所有事件，可以在`systemTimeZone`. 假设`systemTimeZone`是 PDT，这将导致查询 2013 年 3 月 18 日 7AM GMT 到 3/19/2013 7AM GMT 之间的所有事件（因为 PDT 是 GMT - 7 小时）。此查询在 TZS OFF 以及 TZS ON 并设置为 PDT 时工作正常。但是，如果 TZS 为 ON 并设置为 EDT，则查询范围开始到 EDT 第一个午夜之间的所有事件都将从结果数组中丢失。由于 EDT 是 GMT - 4 小时，因此查询范围内 EDT 的第一个午夜是 3/19/2013 4AM GMT。格林威治标准时间 2013 年 3 月 18 日上午 7 点和格林威治标准时间 2013 年 3 月 19 日凌晨 4 点之间的所有事件都将丢失，结果数组将仅包含格林尼治标准时间 2013 年 3 月 19 日凌晨 4 点和格林威治标准时间 2013 年 3 月 19 日上午 7 点之间的事件。

这个结果是 100% 可预测的，无论是在模拟器上还是在物理 iOS 设备上（我尝试过的任何 TZS 时区）。我在 iOS 6 和 iOS 6.1 上进行了测试，在行为上没有明显差异。有什么理由让我错过了为什么这可能是预期的 API 行为？此外，尽管进行了很多搜索，但似乎没有一个公共（甚至私有）API 允许开发人员确定 TZS 是打开还是关闭，更不用说用户设置的任何时区 - 很难想到一个很好的解决方法...（显然，您可以通过增加每个查询的范围来确保不会错过任何事件，以便它始终包含任何可能的 TZS 时区中的午夜。然后，您可以过滤掉无关事件在代码中。然而，出于显而易见的原因，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:20:59.270

我有一个类似的问题，在结果中没有返回给定 NSDate 范围的第一天的某些事件。我发现这`[EKEventStore eventsMatchingPredicate]`似乎受到默认时区的影响。这种解决方法最终帮助了我：

```
NSTimeZone *savedTimeZone = [NSTimeZone defaultTimeZone];
[NSTimeZone setDefaultTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:startDate endDate:endDate calendars:calendars];
[NSTimeZone setDefaultTimeZone:savedTimeZone];
NSArray *events = [eventStore eventsMatchingPredicate:predicate]; 
```

我希望这对您的特定情况也有帮助（在我的情况下，用户的日期/时区与应用程序中的默认时区不同，在您的情况下，日历时间支持已启用，但可能相同'predicateForEventsWithStartDate' 的场景）

在我看来，这是一个错误或设计缺陷，`[EKEventStore eventsMatchingPredicate]`因为给定的 NSDates 已经“无时区”，因为它们表示一个时间点，与时区无关。

# javascript - 如何遍历 JavaScript 中的键控数组？

> ID：15625298
> 
> 赞同：0
> 
> 时间：2013-03-25T21:39:45.480
> 
> 标签：javascript, arrays

我需要将具有匹配订单号的表中的行分组，然后遍历分组。

我有这段代码正在工作，它正在创建完美的数组，数据方面：

```
 var multItems = [];
    // Combine items under orders,
    $('tr.order').each(function(){
        var orderNum = $(this).find('.ordernumber').val();
        if ( ($('tr.order .ordernumber[value="' + orderNum + '"]').length > 1 ) && !(orderNum in multItems) ){
            $('tr.order .ordernumber[value="' + orderNum + '"]').each(function(){
                if (!(orderNum in multItems)){
                    multItems[orderNum] = [];
                }
                multItems[orderNum].push(this);
            });
        }
    });
    // Create new tr with order totals (of each item)
    for (var i = multItems.length - 1; i >= 0; i--) {
        // Code
    }; 
```

但是它创建了一个长度为 0 的数组，显然，其中`multItems`= `[]`，但是`multItems[orderNumber]`被定义了......如果我不知道订单号，就无法访​​问它。

我可以单独制作一组订单号，但感觉一定是很长的路要走。如果我只是创建一个编号数组，我怎么知道将订单中的项目弹出到哪个编号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:41:36.570

使用您当前的代码

```
var orderNum = $(this).find('.ordernumber').val(); 
```

其中 val() 返回一个字符串而不是一个数字。因此，当您这样做时，`multItems[orderNum]`它是一个字符串。

要使当前代码正常工作，您需要使用[for in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环。

```
for (var prop in multItems) {
    if( multItems.hasOwnProperty( prop ) ) {
        console.log(multItems[prop]);
    }
} 
```

仅供参考：不保证订单。此外，您应该在`{}`这里使用对象而不是数组。

* * *

现在您可以做的另一件事是使用 parseInt 将字符串更改为数字，然后您的 for 循环就会神奇地开始工作。[这是假设 ordernumber 是一个数值]

```
var orderNum = parseInt($(this).find('.ordernumber').val(), 10); 
```

# wamp - Wamp 虚拟主机设置

> ID：15625299
> 
> 赞同：5
> 
> 时间：2013-03-25T21:39:45.593
> 
> 标签：wamp, virtual-hosts

很抱歉有一个与已发布的内容类似的问题，但其他人并没有帮助我。我正在尝试在我的 Windows 8 计算机上设置一个虚拟主机，但无论我遵循什么教程或帮助部分，我似乎都无法让它工作，这是我到目前为止的设置。

**httpd-vhosts.conf**

```
# Virtual Hosts
#
# Required modules: mod_log_config

Listen 80

<VirtualHost *:80>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:\Program Files (x86)\2\. Apps\Wamp\www"
    ServerName localhost
    <Directory "C:/wamp/www">
                Options Indexes FollowSymLinks
            Order allow,deny
            Allow from all
        </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:\Users\Chris\Documents\Projects\testsite\Site"
    ServerName testingsite
    ServerAlias testingsite
    <directory "C:\Users\Chris\Documents\Projects\testsite\Site">
        Options Indexes FollowSymLinks
        Order Allow,Deny
        Allow from all
    </directory>
</VirtualHost> 
```

**主机**

```
# Wamp Server Settings
127.0.0.1       localhost
127.0.0.1       testingsite 
```

**httpd.conf**

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

如果我尝试启动 wamp，图标变为橙色。如果我从命令提示符运行 httpd.exe，我会收到以下错误：

```
C:\Program Files (x86)\2\. Apps\Wamp\bin\apache\apache2.4.2\bin>httpd.exe
(OS 10048)Only one usage of each socket address (protocol/network address/port)
is normally permitted.  : AH00072: make_sock: could not bind to address [::]:80
(OS 10048)Only one usage of each socket address (protocol/network address/port)
is normally permitted.  : AH00072: make_sock: could not bind to address 0.0.0.0:
80
AH00451: no listening sockets available, shutting down
AH00015: Unable to open logs 
```

我读到另一个程序可能会阻止它或我的防火墙，但我不知道如何修复它，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:21:09.693

谢谢大家的意见，主要有两个问题

我将 wamp 安装到一个文件夹中，该文件夹嵌套在一个文件夹中，该文件夹的名称有一个空格，因此`c:/folder/folder with a space/wamp/`我被告知这是不好的做法，如果有人知道为什么请告诉我。

互联网协议存在问题，即`ipv6`，所以要解决这个问题，您需要确保 wamp 仅使用`ipv4`，在里面`httpd.conf`找到`Listen 80`并更改为`Listen 0.0.0.0:80`. 同样，我不确定这是做什么的，如果有人知道，请在下面发布。

我希望这可以帮助其他人陷入困境。

# regex - 正则表达式：如何在最后 / 在 Bash 函数中修剪所有内容？

> ID：15625300
> 
> 赞同：1
> 
> 时间：2013-03-25T21:39:51.863
> 
> 标签：regex, bash, .bash-profile

我有一个 bash 函数，它接受一个参数，通过 JS Lint 运行它，然后将结果输出到桌面上的文件中。只要您在运行时位于 JS 文件的目录中，它就可以工作。但是，如果您将函数传递给它会阻塞的路径。jslint 是我的函数的名称。例子：

```
# This works
$ jslint script.js

# This doesn't work
$ jslint ~/dev/project/js/script.js

# Neither does this
$ jslint /Users/Jesse/dev/project/js/script.js 
```

在我的函数中，当我最好使用正则表达式输出它时，我需要使用 $1 并修剪路径。请参阅下面的功能：

```
function jslint {
    /usr/local/bin/node /usr/share/node-jslint/node_modules/jslint/bin/jslint.js $1 > "~/Desktop/" + $1 + "-lint.txt"
} 
```

这是我正在处理并尝试运行它的项目的示例错误：

`-bash: /Users/Jesse/Desktop/Dropbox/dev/ourcityourstory.com/js/script.js-lint.txt: No such file or directory`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:48:25.690

你不需要正则表达式。Bash 支持用于修剪前缀/后缀的简单 glob 模式。这可以用 来完成，它将变量中`${1##*/}`的所有内容修剪到最后一个。`/`

具体来说，有4种变体：

1.  `${var#pat}`将`pat`其视为 glob 并从 . 中修剪最短匹配前缀`var`。

2.  `${var##pat}`视为`pat`一个 glob 并从 . 中修剪最长的匹配前缀`var`。

3.  `${var%pat}`视为`pat`一个 glob 并从 . 中修剪最短匹配的后缀`var`。

4.  `${var%%pat}`视为`pat`一个 glob 并从 . 中修剪最长的匹配后缀`var`。

在您的具体情况下，您可能想说

```
function jslint {
    /usr/local/bin/node /usr/share/node-jslint/node_modules/jslint/bin/jslint.js "$1" > "~/Desktop/" + "${1##*/}" + "-lint.txt"
} 
```

（我还引用了变量，如果路径包含空格，这是必需的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:47:51.333

而不是`regex`-`basename`从文件路径参数的最后一个“/”输出字符串呢？

```
e.g. basename /usr/include/stdio.h  --> stdio.h 
```

# xpages - 我们如何仅使用客户端脚本来“隐藏/何时”？

> ID：15625301
> 
> 赞同：0
> 
> 时间：2013-03-25T21:39:55.123
> 
> 标签：xpages

我正在开发一个大型的全球应用程序，其中包括来自低带宽区域的访问。因此，我想对所有复杂的隐藏/时间计算使用最少的 SSJS 或部分刷新。到目前为止，这是一个简单的“隐藏/何时”：

1.  是/否单选按钮，使用 CSJS 显示面板（“是”）或隐藏面板（“否”）。
2.  面板内部有一个 formTable，根据 #1 显示或隐藏值。
3.  在 XPage 的 onClientLoad 中，运行以下代码：

    ```
    // "getRadioValue" is a simple script to return the value of a radio button
    var v_value = getRadioValue("#{id:radioButton}");
    v_div = '#{javascript:getClientId("radioButtonPanel")}';
    // show or hide div simply use dojo to change the display of the panel
    if (v_value == 'Yes') {
         showDiv(v_div);
    } else {
         hideDiv(v_div);
    }; 
    ```

对于新文档，onClientLoad 脚本将成功隐藏“radioButtonPanel”。将单选按钮更改为“是”将显示单选按钮面板，就像单击“否”将隐藏它一样。效果很好！:-)

但是，一旦文档被保存并以读取模式重新打开，onClientLoad CSJS 事件*应该*读取文档中保存的值，并决定是否显示面板。当文档在编辑模式下打开时，onClientLoad 触发，读取 radioButton 值并成功显示或隐藏面板。

这是我迄今为止尝试过的，让它在读取模式下工作：

1.  在 CSJS 中，使用 "#{javascript:currentDocument.getItemValueString('radioButton'}" 获取值，
2.  在“rendered”或“visible”属性中进行一些计算，但这是 SSJS，如果隐藏，会阻止任何“show/hideDiv”CSJS 可见性样式更改。
3.  添加一个老式的“div”来计算样式（这是我在 XPages 之前所做的），但由于我不能再做 pass-thru html，我似乎无法获得样式的 CSJS 计算. 理想情况下，我可以这样做：

    ```
    <div id="radioButtonPanel" style="<ComputedValue>"> 
    ```

    ComputedValue 将读取文档的后端值，并决定不添加任何内容或“显示：无”。

请注意，我不想使用 viewScopes，因为这种长形式需要其中许多用于所有其他隐藏/何时。

有没有办法让这个 100% CSJS？我觉得我很接近，但我想知道我在整个过程中是否缺少一些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T00:20:27.080

首先，我建议不要计算样式，而是计算 CSS 类——只需定义一个名为的类`hidden`来应用`display:none;`规则。然后切换可见性就像调用[dojo.addClass](http://dojotoolkit.org/reference-guide/1.6/dojo/addClass.html)或[dojo.removeClass](http://dojotoolkit.org/reference-guide/1.6/dojo/removeClass.html)一样简单。

其次，我看到您使用`#{id:component}`语法来获取单选按钮的客户端 ID，但使用 SSJS 来获取面板的客户端 ID。两者都使用`id:`语法；这仍然只是一个服务器端优化，但如果这些计算的实例很多，它就会累加。同样，替换`#{javascript:currentDocument.getItemValueString('radioButton'}`为`#{currentDocument.radioButton}`。两者都将返回相同的值，但后者会更快。

最后，仍然可以计算 pass-thru 标记的任何属性（任何没有命名空间的组件，例如`xp:`or `xc:`），但是您需要手动填充表达式，因为编辑器不知道哪些属性对这些有效标签，因此不提供图形表达式编辑器。因此，如果评估初始显示的理想方法是将内容包装在 div 中，则结果可能如下所示：

```
<div class="#{javascript:return (currentDocument.getValue('radioButton') == 'Yes' ? 'visible' : 'hidden');}">
<xp:panel>
...
</xp:panel>
</div> 
```

# java - 如何使用 Java 将用户提供的图像保存到数据库

> ID：15625303
> 
> 赞同：2
> 
> 时间：2013-03-25T21:40:01.283
> 
> 标签：java, database, image, user-interface

我正在计划如何编写一个 GUI Java 应用程序，该应用程序向用户显示一个表单以添加有关他们自己的信息。我想要包括的一件事是用户能够向表单添加图片。提交后，图片和其余信息将保存到数据库中。作为 Java 新手，我希望获得一些关于如何完成此操作的指导性链接或提示。我正在考虑将我表中的一个列设置为“BLOB”类型，然后将它们保存到其中，但这只是在黑暗中拍摄。我真的不知道列类型应该是什么（字节，blob，等等......），或者如何编码以便将图片保存到我的数据库中以供以后显示。我想我的问题是如何从表单中获取图片并将其保存到数据库中。我将尝试使用 eclipse，并且我仍然不确定我将用于数据库。很抱歉有任何混淆，感谢您的阅读！！

德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:47:02.270

如果您真的想将图像存储在数据库中，BLOB 似乎是最适合保存图像的列的类型。

但是恕我直言，这些类型的文件不必存储在数据库中。只需将它们存储在目录中的某个位置，并将图像名称（或生成的 id）保存在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:45:36.403

您将需要数据库中的两列：一个 BLOB 用于保存二进制图像数据，一个文本类型（最有可能是 VARCHAR）用于存储文件格式。如果您计划使用自动检测图像格式的 API，您可以只使用 BLOB。

# mysql - 使用标准 SQL，我如何制作带有顶部标题的报告？

> ID：15625305
> 
> 赞同：3
> 
> 时间：2013-03-25T21:40:06.720
> 
> 标签：mysql, sql

使用标准 SQL，我如何制作带有顶部标题的报告？

去年我参加了一个数据库竞赛。描述说我可以使用 MySQL、Oracle 或 MS SQL Server。我选择 MySQL，因为那是我所熟悉的。它说我必须使用标准 SQL 编写一个可以在任何列出的 DBMS 中工作的 sql 语句。我搜索了谷歌，但没有找到任何教程或与以下问题相关的任何内容。任何关于在哪里寻找或搜索什么的建议都会很棒。

1.  按计划 ID 分组并执行控制中断（中断后跳过一行）。
2.  如图所示插入顶部标题和底部标题。
3.  将页面大小设置为 30，将行宽设置为 65。
4.  第 1 列的宽度为 10，第 2 列的宽度为 15，第 3 列的宽度为 15，第 4 列的宽度为 20。

预期的格式化报告如下所示：

![在此处输入图像描述](../Images/a0dcdd7ed9cf55c007887b69b5d06409.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:39:37.297

18 个月前，我不得不为现实世界的报告应用程序构建 2 个与此类似的查询。这些要求是不寻常的，并且对于一个不寻常的报告环境来说，但仍然是相当理智和明智的。然后将查询的最终产品转入 MS-Access 以进行最终报告和打印。实际上编程很有趣。

使用我最熟悉的 SQL 方言 SQL Server，可以如下构建报表。

请注意，在概述的报告的 30 行中，有 20 行是数据行，10 行是页眉、列标题或页脚行。

1.  为按计划 ID 分组的主要数据构建一个查询，该查询将每个字段转换为所需长度的 varchar。
2.  在 (1) 上构建一个超级查询，生成单个 65 个字符的文本字符串作为每行输出
3.  构建一个超级查询，在 PlanId 上对 (2) 进行分组，并`grouping(PlanId)`在每列中生成空字符串的测试；这是每个 PlanId 组之后的空白行。
4.  构建一个超级查询 over(3)，为每一行分配一个连续的 RowNumber，然后计算字段`PageNumber = floor(RowNumber / 20)`和 `PageSequence = RowNumber mod 20`。
5.  使用适当的 PageSequence 值手动构建页眉/页脚行，并交叉连接到 (4) 中的 PageNumber 的不同值。
6.  使用适当的 Order By 子句联合所有 (4) 和 (5)。
7.  等等。

我必须应用这些技术的实际应用程序需要创建一个 MS-Access 报告，该报告具有无限数量的横向用完的页面，每页有 6 个数字列和 1 个描述性列，最后的数字列是所有以前的总和数字列。整个报告是其中的三个，每个都从一个新页面开始，但每个都有不同数量的数字列。由于原始数据在 SQL Server 上的存储方式以及缓慢的数据链接，将整个报表作为一个查询运行比三个单独的查询要高效得多。

玩得开心。

**PS** 由于其他项目限制，我受益于使用类似于旧式 C 的 SQL 宏工具动态创建此 SQL；手卷当然，因为谁听说过这样的事情。当你可以这样写时，它看起来几乎是结构化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-28T22:46:13.993

我正在清理旧问题。对于任何可能好奇的人，我实际上在比赛中使用了 PL/SQL。非常适合直接在 SQL 中创建“报告”。[http://www.oracle.com/technetwork/database/features/plsql/index.html](http://www.oracle.com/technetwork/database/features/plsql/index.html)

# c# - 在实用程序类中引发异常的最佳实践

> ID：15625307
> 
> 赞同：0
> 
> 时间：2013-03-25T21:40:09.803
> 
> 标签：c#, facebook, exception

我正在创建一个实用程序类，它将在我的 Facebook 应用程序中用于通常完成的任务，例如从 URL 检索 Facebook 页面 ID。我不确定以下代码是否是引发和捕获异常的正确方法。有人可以请教，谢谢。

实用程序类：

```
public static class FacebookUtilities
{ 
    public static string GetPageIDFromGraph(string pageUri, string accessToken)
    {
        try
        {
            FacebookClient client = new FacebookClient(accessToken);
            dynamic result = client.Get(GetPageIDFromUri(pageUri), new { fields = "id" });
            return result.ToString();
        }
        catch (FacebookOAuthException)
        {
            throw;
        }
        catch (FacebookApiException)
        {
            throw;
        }
    }

    public static string GetPageIDFromUri(string pageUri)
    {
        if (pageUri.Contains('/'))
            pageUri = pageUri.Substring(pageUri.LastIndexOf('/') + 1);
        if (pageUri.Contains('?'))
            return pageUri.Substring(0, pageUri.IndexOf('?'));
        else
            return pageUri;
    }
} 
```

程序类，只是测试： - 注意“输入”和“输出”只是文本框。

```
 private void btnGetPageID_Click(object sender, EventArgs e)
    {
        try
        {
            output.Text = FacebookUtilities.GetPageIDFromGraph(input.Text, "Some Access Token Goes Here");
        }
        catch (FacebookOAuthException ex)
        {
            if (ex.ErrorCode == 803)
            {
                output.Text = "This page does not exist";
            }
        }
        catch (FacebookApiException ex)
        {
            if (ex.ErrorCode == 100)
            {
                output.Text = "The request was not supported. The most likely cause for this is supplying an empty page ID.";
            }
        }
    } 
```

简单地从实用程序类中重新抛出异常以便调用类可以捕获它并执行需要做的事情是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:43:13.397

似乎您对捕获的异常无能为力 - 所以不要捕获它们。有很多关于异常处理的讨论，但一般来说，当你与它们有关时，你应该捕获异常，或者至少使用 finally 来清理资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:43:38.753

由于您没有以任何方式处理异常，因此您的代码可以是：

```
public static string GetPageIDFromGraph(string pageUri, string accessToken)
{
    FacebookClient client = new FacebookClient(accessToken);
    dynamic result = client.Get(GetPageIDFromUri(pageUri), new { fields = "id" });
    return result.ToString();
} 
```

您应该只在可以有意义地处理异常时才捕获异常，并且在您的方法中看起来不可以`GetPageIDFromGraph`，因此您应该传播它们。

# asp.net - 服务器返回 500 代码但无法捕获错误

> ID：15625308
> 
> 赞同：1
> 
> 时间：2013-03-25T21:40:11.003
> 
> 标签：asp.net, .net, xml, web-services, iis

我有一个在 IIS 中运行的 ASP.NET Web 服务，在 Windows 2003 服务器上。

这是我使用另一个 .NET 程序完成的调用的 IIS 日志。它用“Hello World”正确响应了我的应用程序

```
2013-03-25 19:38:36 W3SVC1406312275 VMC-MMS 192.168.1.223 POST /test.asmx wsdl/mex 80 - 172.16.129.193 HTTP/1.1 - - - webservices.vm.vmc 500 0 0 775 677 1671
2013-03-25 19:38:36 W3SVC1406312275 VMC-MMS 192.168.1.223 GET /test.asmx wsdl 80 - 172.16.129.193 HTTP/1.1 Mozilla/4.0+(compatible;+MSIE+6.0;+MS+Web+Services+Client+Protocol+2.0.50727.5466) - - webservices.vm.vmc 200 0 0 3103 183 2531
2013-03-25 19:38:36 W3SVC1406312275 VMC-MMS 192.168.1.223 POST /test.asmx wsdl 80 - 172.16.129.193 HTTP/1.1 - - - webservices.vm.vmc 500 0 0 775 645 250 
```

这是从 RPG 程序完成的调用的 IIS 日志...发送回“500”“内部服务器错误”

```
2013-03-25 21:10:26 W3SVC1406312275 VMC-MMS 192.168.1.223 POST /test.asmx - 80 - 192.168.1.6 HTTP/1.1 http-api/1.24 - - webservices.vm.vmc 500 0 0 697 32968 2421 
```

## ------------------

## ------------------

我的 Global.asax Application_Start 和 Application_Error 都被编码为在命中时记录一条消息。

来自 .NET 和 RPG 的调用都写入 Application_Start 函数中的日志文件......但都不会写入 Application_Error 函数中的日志。

HelloWorld 只初始化一个记录器并返回字符串“Hello World”。而且...日志正在两个调用中写入。

**那么......我如何捕获正在发生的任何错误？**这是发回 500 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:15:12.980

不幸的是，`Application_Error`不会因为 Web 服务中未处理的异常而触发。

查看[此问题](https://stackoverflow.com/questions/211530/why-global-asax-application-error-method-does-not-catch-exceptions-thrown-by-asm)的答案以获取更多信息。您将不得不做一些事情，比如向每个 Web 方法添加一个 try-catch，或者创建一个 SOAP 扩展来处理 Web 服务异常。

我可能会走 SOAP 扩展路线并创建一个可以在我的所有项目中用作通用 Web 服务异常处理程序的扩展。

**更新**[这个问题](https://stackoverflow.com/questions/2180228/handle-exceptions-in-web-services-with-elmah)
的答案之一有一个 SOAP 扩展代码示例。

# algorithm - 在单峰数组中找到第 k 个元素

> ID：15625316
> 
> 赞同：4
> 
> 时间：2013-03-25T21:40:43.490
> 
> 标签：algorithm, big-o

给定一个包含 n 个不同元素的单峰数组 A（意味着它的条目按升序排列，直到其最大元素，之后其元素按降序排列），一个整数 p（即增加的第一部分的长度）和 k （第 k 个最小元素）给出一个算法来计算在 O(log n) 时间内运行的第 k 个最小元素的值。

例子：

```
A= {1,23,50,30,20,2} 
p= 2
k=3 
```

答案：20

**编辑**

我试过这个：

```
def ksmallest(arr1, arr2, k):
if len(arr1) == 0:
    return arr2[len(arr2)-k-1]
elif len(arr2) == 0:
    return arr1[k]
mida1 = (int)(len(arr1)/2)
mida2 = (int)((len(arr2)-1)/2)
if mida1+mida2<k:
    if arr1[mida1]>arr2[mida2]:
        return ksmallest(arr1, arr2[:mida2], k-(len(arr2)-mida2))
    else:
        return ksmallest(arr1[mida1+1:], arr2, k-mida1-1)
else:
    if arr1[mida1]>arr2[mida2]:
        return ksmallest(arr1[:mida1], arr2, k)
    else:
        return ksmallest(arr1, arr2[mida2+1:], k) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:08:03.763

对于初学者来说，再看看你的索引。你开始：

```
if len(arr1) == 0:
    return arr2[len(arr2)-k-1]
elif len(arr2) == 0:
    return arr1[len(arr1)-k-1] 
```

但是如果 arr1 是升序，arr2 是降序，那么肯定不会在同一位置找到第 k 个最小元素。

# vb.net - 通过调用记录将值插入linq vb中的行

> ID：15625329
> 
> 赞同：1
> 
> 时间：2013-03-25T21:41:22.023
> 
> 标签：vb.net, linq, insert

我有一个 LINQ VB.NET 项目。我有一个表“用户”。我将所有用户详细信息输入到表中。这包括和电子邮件地址。我有一种随机生成密码的方法。我有另一种方法，它根据在文本框中输入的内容调用电子邮件地址，并将密码发送到该电子邮件地址。我的问题是我不知道如何将新生成的密码插入到属于我刚刚调用的电子邮件地址的行中。输入电子邮件地址的文本框是“txtEmail”。可以假设“用户”的输入已经完成，减去密码。以下方法生成密码：

```
Public Function GeneratePassword() As String

    'String variables tells how many characters password will contain.
    Dim PasswordLength As Int16 = "12"

    'Empty string will hold randomly generated password
    Dim NewPassword As String = ""

    'Characters allowed in this new password
    Dim allowedChars As String = ""
    allowedChars = "1,2,3,4,5,6,7,8,9,0"
    allowedChars += "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,"
    allowedChars += "a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,"

    'Declare array to house each character generated from allowed list of characters
    Dim sep As Char() = {","c}
    Dim arr As String() = allowedChars.Split(sep)

    Dim IDString As String = ""
    Dim temp As String = ""

    'utilize the "random" class
    Dim rand As New Random()

    'loop through the character generation process until PasswordLength is met
    For i As Integer = 0 To Convert.ToInt32(PasswordLength) - 1
        temp = arr(rand.[Next](0, arr.Length))
        IDString += temp

        NewPassword = IDString
    Next

    'places new password in variable
    Return NewPassword
End Function 
```

接下来，以下方法从数据库中获取电子邮件地址，调用“GeneratePassword”方法并将密码通过电子邮件发送给用户。它不会将密码保存到数据库，这是我遇到的问题。

```
Protected Sub btnPassword_Click(sender As Object, e As System.EventArgs) Handles btnPassword.Click
    If True Then

        'establish connection with database
        Dim db As New OrionDataClassesDataContext()

        'initialise global variabel to take email string entered in text box
        GlobalVariables.SearchUserEmail = txtEmailAddress.Text

        'initialise global variable to hold email address retrieved from database
        GlobalVariables.CurrentEmailAddress = (From u In db.Users
                                               Where u.Email = SearchUserEmail
                                               Select u.Email).FirstOrDefault

        'calls generatepassword method
        Dim stNewPassword As String = GeneratePassword()

        'create new mailmessage to construct and sendemail
        Dim Mail As New MailMessage
        Try
            Mail.Subject = "Your Password Has Been Reset"

            'gets email address from database when user enters it
            Mail.To.Add(GlobalVariables.CurrentEmailAddress)
            'address for email to be sent from
            Mail.From = New MailAddress("XXX@XXXX.com")

            Mail.Body = "Your new pasword is:  " + stNewPassword + ".  Please keep this safe."

            'define smpt server to be used
            Dim SMTP As New SmtpClient("smtp.gmail.com")
            SMTP.EnableSsl = True

            'authenticate connection with smpt server and email address
            SMTP.Credentials = New System.Net.NetworkCredential("XXXX@XXX.com", "XXXXX")

            SMTP.Port = 587

            SMTP.Send(Mail)

            'alert when message is sent correctly
            MsgBox("Email sent successfully!")
            txtEmailAddress.Text = ""

        Catch ex As Exception
            'displays error message when email is not sent
            MsgBox("Email not sent - Check address")
            txtEmailAddress.Text = ""
        End Try

    End If
End Sub 
```

我一直在玩一些场景，但我似乎总是最终只是试图创建一个全新的行条目，这不是我想要做的。任何意见，将不胜感激。

# java - 无法获取 XML 标记值

> ID：15625335
> 
> 赞同：1
> 
> 时间：2013-03-25T21:41:36.343
> 
> 标签：java, xmldocument

我有以下代码

```
protected static final String TAG_numFound                  = "numFound";        //
Document street_xmlDoc = GetXMLDocument(street_url);
Element results = street_xmlDoc.getDocumentElement();
//numFound
Node numFoundNode = results.getElementsByTagName(TAG_numFound).item(0);
String numFound = numFoundNode.getNodeValue() + "(" + numFoundNode.getNodeName() + ")"; 
```

和以下 XML

```
<results>
<numFound>1</numFound>
<QTime>66</QTime>
<result>
<distance>0.0</distance>
<name>Agua</name>
</result>
</results> 
```

在 numFound String 变量中，我得到“null(numFound)”，我不明白为什么我没有得到“1(numFound)”。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:57:11.707

您可以使用它`XPath`来获取值，这对于您的代码的未来读者来说可能会更清楚：

```
 final Document document = //build your document
    final XPath xPath = XPathFactory.newInstance().newXPath();
    final XPathExpression expression = xPath.compile("//numFound/text()");
    final Number output = (Number) expression.evaluate(document, XPathConstants.NUMBER);
    System.out.println(output); 
```

输出：

```
1.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:52:37.253

您需要使用`getTextContent`而不是`getNodeValue`.

阅读这篇[博文](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)了解更多信息。

您可以在这个[javadoc](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html)部分（或下面的快照）中 看到什么时候`getNodeValue`有任何意义。![XML解析中的节点值](../Images/bd04c40e59c642d96ca1d6fcd1878bde.png)

# clojure - 在 Clojure 中减少一个惰性序列，例如带有条件的循环

> ID：15625341
> 
> 赞同：2
> 
> 时间：2013-03-25T21:41:44.807
> 
> 标签：clojure

我有一个无限的惰性序列，它产生一个“前导”和一个“模式重复”，这种序列的一个简单示例可以在 Clojure 中实现：

```
(def infinite-lazy-sequence
  (lazy-cat [4] (cycle [1 2 3])))

=> (take 20 infinite-lazy-sequence)
(4 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1) 
```

我想得到一个`set`形成这个的元素`infinite-lazy-sequence`，这是一种使用它来实现它的方法`loop`：

```
(loop
  [[head & tail] infinite-lazy-sequence
   result #{}]
  (if (contains? result head)
    result
    (recur tail (conj result head))))

=> #{1 2 3 4} 
```

问题是：使用 是否可以达到相同的结果`reduce`？并使用`take-while`？

**编辑：**

*使用 clojure-1.5.1 和 perforate-0.2.4 对结果进行基准测试*

建议的`loop-recur`实施：

```
Case:  :loop-recur
Evaluation count : 60 in 60 samples of 1 calls.
             Execution time mean : 1.054975 sec
    Execution time std-deviation : 26.316442 ms
   Execution time lower quantile : 1.026187 sec ( 2.5%)
   Execution time upper quantile : 1.125854 sec (97.5%) 
```

@sw1nn`reduce-reduced`实现：

```
Case:  :reduce-reduced
Evaluation count : 120 in 60 samples of 2 calls.
             Execution time mean : 875.091831 ms
    Execution time std-deviation : 19.745142 ms
   Execution time lower quantile : 850.871606 ms ( 2.5%)
   Execution time upper quantile : 921.947759 ms (97.5%) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:05:50.850

添加了 Clojure 1.5`reduced`以允许短路减少...

```
 (reduce (fn [a v] (if-not (a v) (conj a v) (reduced a))) 
         #{} 
         infinite-lazy-sequence)
 => #{1 2 3 4} 
```

# php - javascript表单验证不起作用，所有数据都发布到php

> ID：15625348
> 
> 赞同：-2
> 
> 时间：2013-03-25T21:42:11.937
> 
> 标签：php, javascript

这是 html 部分。我已将其写入不同的文件，并将 javascript 写入不同的 .js 文件，该文件已包含在 html 适当的位置。所有信息通过php和mysql进入数据库，php文件名为registration.php

```
<form action="registration.php" method="post" onsubmit="return validate();" name="myForm">
    <table>
        <tr>
            <td ><label><strong>First Name</strong></label></td>
            <td>
            <input name="fname" type="text" id="fname" onfocus="hideerror()" ></td>
            <td style="width: 240px">&nbsp;</td>
        </tr>
        <tr>
            <td ><label><strong>Last Name</strong></label></td>
            <td>
            <input name="lname" type="text" style="width: 177px" id="lname" onfocus="hideerror()"></td>
            <td></td>
        </tr>
        <tr>
            <td ><label><strong>Email</strong></label></td>
            <td>
            <input name="email" type="text" id="email" style="width: 178px" onfocus="hideerror()"></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td ><label id="Label1"><strong>Confirm Email</strong></label></td>
            <td >
            <input name="cemail" type="text" id="cemail" style="width: 177px" onchange="compare_mail();" onfocus="hideerror()"></td>
            <td  ><label id="message1"></label></td>
        </tr>
        <tr>
            <td ><label id="Label1"><strong>Password</strong></label></td>
            <td style="height: 33px;">
            <input name="password" type="password" maxlength="12" style="height: 26px; width: 177px;" id="password" onfocus="hideerror()"></td>
            <td >
            </td>
        </tr>
        <tr>
            <td ><label id="Label1"><strong>Confirm Password</strong></label></td>
            <td >
            <input name="cpassword" type="password" maxlength="12" onchange="compare_password();" id="cpassword" class="auto-style15" style="width: 179px" onfocus="hideerror()"></td>
            <td ><label id="message2"></label>&nbsp;</td>
        </tr>
        <tr>
            <td ><label id="Label1"><strong>Mobile Number</strong></label></td>
            <td>
            <input name="mobile" type="text" maxlength="10" style="width: 177px" id="mobile" onfocus="hideerror()"></td>
            <td ><label id="mobile_error"></label></td>
        </tr>
        <tr>
            <td style="width: 152px">&nbsp;</td>
            <td>&nbsp;</td>
            <td style="width: 240px">&nbsp;</td>
        </tr>
        <tr>
            <td>
            <input name="register" type="submit" id="register" value="Register"></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td >&nbsp;</td>
            <td>&nbsp;</td>
            <td >&nbsp;</td>
        </tr>
        <tr>
            <td ><label id="massege" style="visibility:hidden">Please Fill out all the fields</label></td>
        </tr>

    </table>
    </form> 
```

这是我的 javascript 验证功能

```
function validate(){
var x=document.forms["myForm"]["email"].value;
var x1=document.forms["myForm"]["fname"].value;
var x2=document.forms["myForm"]["lname"].value;
var x3=document.forms["myForm"]["email"].value;
var x4=document.forms["myForm"]["cemail"].value;
var x5=document.forms["myForm"]["password"].value;
var x6=document.forms["myForm"]["cpassword"].value;
var x7=document.forms["myForm"]["mobile"].value;

        if(!x1||!x2||!x3||!x4||!x5||!x6||!x7)
        {
            document.getElementById('massege').style.visibility='visible';
            return false;
        }
        else
        {
            document.getElementById('message').style.visibility='hidden';
        } 
        var atpos=x.indexOf("@");
        var dotpos=x.lastIndexOf(".");
        if(!atpos||!dotpos)
        {
            alert("Not a valid e-mail address");
            return false;

        }
         if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
         {
             alert("Not a valid e-mail address");
             return false;
         }

         if(x7.length<10)
         {
            document.getElementById('mobile_error').innerHTML="Mobile number should be 10 digits";
         }
         if(x5!=x6)
         {
            document.getElementById('message2').innerHTML="Password does't match";
            return false;
         }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:50:02.577

有错别字：

```
 else
    {
        document.getElementById('message').style.visibility='hidden';
    } 
```

它应该是“按摩”。

**建议**：请使用firebug或chrome的开发者工具调试javascript代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:48:20.960

出于调试目的，我建议`<input type='button'>`在具有调用 validate() 函数的 onclick 事件的页面中添加一个。这将允许您在不提交表单的情况下运行验证功能。问题很可能是验证函数中的错误，并且页面正在提交，因为函数出错而不是按预期返回真/假。在您看到有错误之前，该页面正在提交。

# c# - 在 C# 中使用 Web 服务 -List

> ID：15625349
> 
> 赞同：0
> 
> 时间：2013-03-25T21:42:13.760
> 
> 标签：c#, java, list, generics, object

score#UPDATED# 这听起来可能很愚蠢，但我已经被这个问题困扰了三天了！我是 C# 新手。

我正在尝试在 C# 中使用 Web 服务。我设法使用以下代码行在 Java 中使用 Web 服务：

```
 List x = new ArrayList<Score>();

            x = topScores();

            System.out.println("x" + x.size());

            System.out.println("TOP SCORES:");
            for (Object o : x) {
                Score s1 = (Score) o;
                System.out.println(s1.getScore());

            } 
```

我需要显示分数列表，但似乎无法在 C# 中弄清楚。这是我卡在 C# 中的地方：

```
 List<object[]> list = new List<score[]>(); 
```

我已经尝试了许多不同的声明集合的变体，但无法超越这一点。我想我知道如何遍历列表，但我无法通过声明它。这是我的错误信息：

```
Cannot implicitly convert type `System.Collections.Generic.List<score>' to `System.Collections.Generic.List<object>' 
```

如果我将声明更改为：

```
List<score> list = new List<score>();
list = service.TopScores(); 
```

我收到同样的错误，但这次我收到一条消息：

```
"Object[] TopScores()" 
```

我的 Java 片段的 C# 等价物是什么？我真的很感激任何帮助或建议！感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:47:59.087

List<> 类属于称为泛型的集合类别，它允许您创建强类型对象数组。. List 部分意味着一个数组，因此您也不需要将类型声明为数组。而不是`List<object[]>`，你应该这样做`List<object>`。您也不能更改列表的数据类型。如果你想创建一个`Score`你应该做的列表。

```
List<Score> scores = new List<Score>(); 
```

然后你可以用分数填充列表

```
Score newScore = new Score();
scores.Add(newScore); 
```

管他呢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:12:35.293

谢谢你的帮助...我想通了...

```
 LoginService service = new LoginService();
        List<score> listA = new List<score>();

        object[] array = listA.ToArray();
        array = service.TopScores(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:45:54.750

看起来您不需要创建 a`List<object>`因为您的代码总是知道列表的元素是 type `Score`。你可以这样做

```
List<Score> list = new List<Score>(); // Not really necessary because you assign it a different value in the next line.

list = topScores().Select(o => o.ToString()).ToList();

...

System.Console.WriteLine("x{0}", list.Length);

System.Console.WriteLine("TOP SCORES:");
foreach (var score in list) {
    System.Console.WriteLine(score.GetScore());
} 
```

但是，如果您真的想`List<object>`从`List<string>`最简单的方法创建一个，那就是：

```
List<string> stringList = ...
List<object> objectList = stringList.ToList<object>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:49:07.167

声明此列表时，您需要具有相同的类型。

```
List<score> list = new List<score>(); 
```

然后

```
 foreach(Score score in list)
    {
    //do something
    } 
```

# javascript - Highcharts 的竖线位置不正确

> ID：15625358
> 
> 赞同：1
> 
> 时间：2013-03-25T21:43:07.407
> 
> 标签：javascript, highcharts

我相信我在 Highcharts 中发现了一个错误——我看不出它怎么可能是我的代码（但这不是我第一次错了！（jsfiddle 链接如下）。这可能是一个严重的问题问题，因为在某些情况下，错误的位置可能会“超出图表”，这可能会在医疗保健领域产生严重影响！

显示它的最简单情况：日期时间 x 轴上的 2 点样条和单个垂直条。如果添加了第二个垂直条，但数据为空，则原始条的位置偏移不正确。（为简单起见，在我的示例中，我对竖线和样条曲线的终点使用相同的日期时间，但这不是查看问题所必需的。）我已经在不同版本的 Highcharts 中重现了这一点，包括最新的3.0.0。

在我的 jsfiddle 示例中，我注释掉了第二个竖线，并且显示正确；只需取消注释该部分即可查看不正确的偏移量。如果第二个垂直条的数据不为空，则第一个垂直条再次正确显示。

[http://jsfiddle.net/ckapilla/8vdkf/](http://jsfiddle.net/ckapilla/8vdkf/)

```
// 3/20/2003
var startDt = Date.UTC(2013, 3 - 1, 20, 0, 0, 0);
var stopDt = Date.UTC(2013, 3 - 1, 20, 11, 59, 59);

var date1 = Date.UTC(2013, 3 - 1, 20, 8, 0, 0);
var date2 = Date.UTC(2013, 3 - 1, 20, 11, 0, 0);

var yMaxBG = 400;
var yMaxIns = 30;

var emptyData = [];
var barData = [{
    x: date2,
    y: 24
}];

var splineData = [{
    x: date1,
    y: 49
}, {
    x: date2,
    y: 141
}];

var glycemicChart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },

    xAxis: {
        type: 'datetime',
        min: startDt,
        max: stopDt,
        dateTimeLabelFormats: {
            day: '%e-%b-%Y'
        },

        tickInterval: 24 * 3600 * 1000,
        gridLineWidth: 2,
        gridLineColor: '#a0a0a0',

        minorTickInterval: 3600 * 1000,
        minorGridLineWidth: 1,
        minorGridLineColor: '#d0d0d0'
    },
    yAxis: [{

        min: 50,
        max: 400,
        minorGridLineWidth: 0

    }, {
        min: 0,
        max: 30,
        alignTicks: false,
        opposite: true
    }],

    plotOptions: {
        pointInterval: 3600000 // one hour
    },

    series: [{
        name: 'spline',
        yAxis: 0,
        data: splineData

    },

            {
                name: 'Bar',
                type: 'column',
                yAxis: 1,
                pointWidth: 10,
                data: barData
            }
    /* un-comment the following to see incorrect offset */

    /******,

    {
    name: 'dummy',
    type: 'column',
    yAxis: 1,
    pointWidth: 10,
    data: emptyData
    }
    ********/
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:16:01.517

首先，确保您使用的是最新版本（在这种情况下为 3.0）。然后在 plotOptions.column 你有 option `grouping`。一般来说，当使用更多列时，它们会稍微翻译一下，以确保它们不会相互重叠。分组选项旨在消除该行为。

参见示例：http: [//jsfiddle.net/Fusher/8vdkf/2/](http://jsfiddle.net/Fusher/8vdkf/2/)

```
 plotOptions: {
            column: {
                grouping: false
            }
        }, 
```

# java - Java的支持向量机？

> ID：15625359
> 
> 赞同：20
> 
> 时间：2013-03-25T21:43:10.533
> 
> 标签：java, machine-learning, artificial-intelligence, svm, mahout

我想用 Java 编写一个“智能监视器”，它会在*检测到*即将出现的性能问题时发出警报。我的 Java 应用程序正在将结构化格式的数据写入日志文件：

```
<datetime> | <java-method> | <seconds-to-execute> 
```

因此，例如，如果我有一个`Widget#doSomething(String)`执行时间为 812 毫秒的方法，它将被记录为：

```
2013-03-24 11:39:21 | Widget#doSomething(String) | 812 
```

随着性能开始下降（例如在主要收集期间、峰值负载期间或系统只是缓慢爬行），方法执行时间开始减慢；所以最右边的列开始看到巨大的数字（有时 20 - 40 秒来执行一个方法）。

在大学里——为了一个机器学习练习——我写了我的教授所说的*线性二分法*，它采用简单的测试数据（一个人的身高、体重和性别），并“学习”了如何根据他们将一个人分类为男性或女性身高体重。然后，一旦它拥有了所有的训练数据，我们就给它提供了新的数据，看看它可以多准确地确定性别。

我*认为**线性二分法*的多元版本称为[*支持向量机*(SVM)](http://en.wikipedia.org/wiki/Support_vector_machine)。如果我错了，请澄清一下，我会将问题的标题更改为更合适的名称。**无论如何**，我需要这个应用程序来做以下事情：

*   在“测试模式”下运行，我从我的主 Java 应用程序（我希望监控的应用程序）向它提供结构化日志文件，它获取每个日志条目（如上所示）并将其用于*测试数据*
    *   只有`java-method`和`seconds-to-execute`列作为输入/测试数据很重要；我不在乎日期时间
*   在“监控模式”下运行，它会主动从日志文件中读取新的日志数据，并使用类似的“机器学习”技术来确定是否即将出现性能下降

重要的是要注意，该`seconds-to-execute`列并不是这里唯一重要的因素，因为我已经看到某些方法在性能出色的时期非常糟糕，而在服务器似乎快要死机的时候，其他方法的时机非常好并推雏菊。因此，显然*某些*方法比其他方法“加权”/对性能更重要。

### 我的问题

*   谷歌搜索“线性二分法”或“支持向量机”会发现一些非常可怕的、高度学术的、超大脑的白皮书，我只是没有精力（也没有时间）去消耗——除非它们真的是我唯一的选项; 所以我问**是否有外行对这些东西的介绍，或者有一个很棒的网站/文章/教程来用 Java 构建这样的系统**？
*   是否有任何可靠/稳定的开源 Java 库？我只能找到[`jlibsvm`](http://dev.davidsoergel.com/trac/jlibsvm/wiki)，[`svmlearn`](http://code.google.com/p/svmlearn/)但前者看起来处于纯 beta 状态，而后者似乎只支持二元决策（比如我的旧线性二分法器）。我知道有[**Mahout**](http://mahout.apache.org/)，但它位于 Hadoop 之上，我认为我没有足够的数据来保证建立自己的 Hadoop 集群的时间和精力。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:33:05.770

您描述的“智能监视器”正是时间序列分类。

有很多分类算法。它们基本上都采用一个矩阵，其中行是观察结果，列是以某种方式描述观察结果的“特征”，以及长度为 0 或 1 的行的标签向量。在您的问题中，观察结果可能是一个微小的样本，并且在遇到性能问题的时间段内，您的标签向量的值为 1，否则为 0。

此定义中隐含的是需要对数据进行重新采样（必要时使用众数/中值/平均值），以便均匀地定义每个观察值，例如秒、分钟或小时。

生成特征是关键部分。我可能会从 2 个特征开始，即**原始值**和观察 x_i 和 x_i-1 之间的（一次）**差异值。**我们将这些定义为滞后 2。从技术上讲，这 4 个特性。每个功能都无法展望未来。对于每个观察，每个特征必须代表相同的事物。

例如考虑长度为 10 的时间序列：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

如果我们想在过去使用滞后两个间隔生成一组特征，那么时间序列的前两个元素被认为是老化样本。我们不能使用与它们相关的观察来训练算法。

8 行 2 列的**原始值将是**

```
[[ 1.,  0.]
 [ 2.,  1.],
 [ 3.,  2.],
 [ 4.,  3.],
 [ 5.,  4.],
 [ 6.,  5.],
 [ 7.,  6.],
 [ 8.,  7.]] 
```

差异**值**

```
[[ 1.,  1.],
 [ 1.,  1.],
 [ 1.,  1.],
 [ 1.,  1.],
 [ 1.,  1.],
 [ 1.,  1.],
 [ 1.,  1.]]) 
```

这些得到列堆叠。您可以探索许多其他功能。[滚动平均](http://en.wikipedia.org/wiki/Moving_average)将是我的下一个选择。

如果您想在未来进一步预测，那么您的训练数据应该比您的标签向量更滞后。

如果性能不令人满意，请尝试通过在更大的窗口上选择滚动平均值来添加更多功能，或者在将来添加更多功能。提高时间序列算法性能的一个巧妙技巧是包含前一个时间间隔的预测值。

将分类器拟合到数据的早期部分，然后观察其在数据后期部分的准确性。您可以使用许多分类器指标。如果您选择使用输出概率而不是硬 1/0 的分类器，那么您的选择范围甚至会扩大。（就像你的分类器的用途一样。）

[准确率和召回率](http://en.wikipedia.org/wiki/Precision_and_recall#Definition_.28classification_context.29)是分类器的直观性能指标。

在数据的前半部分（早期）进行训练并在后半部分（稍后）进行测试。

就算法而言，我会研究逻辑回归。如果性能不令人满意并且您已经用尽了特征提取选项，我只会寻找其他地方。

[Mallet](http://mallet.cs.umass.edu/optimization.php)似乎是一个很好的库来完成这项任务。[请参阅文档的这一位。](http://mallet.cs.umass.edu/classifier-devel.php)

我最近发现了[JSAT](http://code.google.com/p/java-statistical-analysis-tool/)，它看起来很有希望。

有更具体的时间序列分类方法明确考虑了观察和标签的顺序性质。这是分类对时间序列的通用改编。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T13:11:02.327

如果您对使用支持向量机感兴趣，这里有一个非常适合初学者的指南，您可能会觉得有用（[http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)）

该指南来自 libsvm 的同一个人，这是一个非常成熟的支持向量机库（[http://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)），它们确实具有 Java 绑定（[http: //www.csie.ntu.edu.tw/~cjlin/libsvm/#java](http://www.csie.ntu.edu.tw/~cjlin/libsvm/#java) )

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T07:47:02.173

Weka 是一个流行的 Java 机器学习/数据挖掘包。这本书[http://guidetodatamining.com/](http://guidetodatamining.com/)可能有用。它并没有真正解决 SVM，但它肯定有很好的分类算法，而且它肯定一点也不深奥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-05T10:54:26.990

也许[Apache Spark MLlib](https://spark.apache.org/docs/latest/mllib-linear-methods.html#linear-support-vector-machines-svms)会帮助你：

> 线性 SVM 是大规模分类任务的标准方法。它是一种线性方法，如上面等式 (1) 中所述，公式中的损失函数由铰链损失给出：
> 
> L(w;x,y):=max{0,1−ywTx}。
> 
> 默认情况下，线性 SVM 使用 L2 正则化进行训练。我们还支持替代 L1 正则化。在这种情况下，问题变成了一个线性程序。
> 
> 线性 SVM 算法输出一个 SVM 模型。给定一个新的数据点，用 x 表示，模型根据 wTx 的值进行预测。默认情况下，如果 wTx≥0，则结果为正，否则为负。

# c# - Monotouch在for循环中添加按钮

> ID：15625360
> 
> 赞同：0
> 
> 时间：2013-03-25T21:43:12.140
> 
> 标签：c#, xamarin.ios, xamarin

我正在使用以下代码在 for 循环中添加 UIButtons：

```
for (int i=0; i <12; i++) {
    button = new UIButton(new RectangleF(xBase + i * 25,100 + i,25,25));
    button.SetBackgroundImage(UIImage.FromBundle ("Images/b.png"),UIControlState.Normal);
    button.TouchUpInside += (s, e) => { 
        UIAlertView alert = new UIAlertView("",i.ToString(),null,"",null);
        alert.Show();
    };
    this.Add (button);
} 
```

问题是我在单击按钮时获得的值是添加的最后一个按钮。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:54:59.043

这可能是因为 C# 中闭包中变量的性质。尝试将循环变量绑定到循环内的局部变量。您可能会[在此处找到一些相关信息](http://csharpindepth.com/Articles/Chapter5/Closures.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:44:02.873

您正在关闭循环变量。C# 中的循环变量是在循环之外定义的。

你可以像这样修复你的代码

```
for (int i=0; i <12; i++) {
    button = new UIButton(new RectangleF(xBase + i * 25,100 + i,25,25));
    button.SetBackgroundImage(UIImage.FromBundle ("Images/b.png"),UIControlState.Normal);
    button.TouchUpInside += (s, e) => { 
        var j = i;
        UIAlertView alert = new UIAlertView("",j.ToString(),null,"",null);
        alert.Show();
    };
this.Add (button); 
```

}

希望您在`for`循环中执行此操作，而不是在中`foreach`更改[行为](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)`C# 5`，但我不知道该更改是否已在单声道 3.0.X 系列中实现。

# android - 处理程序中的异步任务？在行中执行多个异步任务

> ID：15625363
> 
> 赞同：2
> 
> 时间：2013-03-25T21:43:16.190
> 
> 标签：android, android-asynctask, android-handler

我在android中遇到以下问题：

我需要在 row 中处理一些异步任务`(e.g. Async-Task 1 -> Async-Task 2 -> Asyc-Task 3)`。所有的异步任务都用一个 handler 来回答`(sendMessage(xy))`。

所以我的处理程序必须启动下一个异步任务。这是最佳实践吗？我应该选择另一种方式吗？

总结：我正在寻找一种方法来串行处理许多异步任务......

我不能使用 asyncThread 的 get() 函数，因为它们只在处理程序中返回它们的答案。

对不起，我的英语不好..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:26:52.513

有趣的是，其他两个答案都错过了你想要连续做的事实...... :)

我个人讨厌 AsyncTask，我宁愿在我自己的线程中实现它，但这就是我。

您希望 Action A（并且一旦完成）调用 Action B（等等）......这意味着您实际上需要一个线程来执行 BL 操作的序列。

这可以通过具有两个处理程序的对象轻松实现，一个是用于 BL的新 ThreadHandler 的**处理程序，另一个可能是用于 UI 更新的****UI 线程处理**程序，一旦任务完成，它会在 BL 处理程序上发布以启动下一个任务.

这会将整个过程封装起来，并且易于跟踪错误。我已经为具有多个服务器和 SMS 验证代码以及其他一些内容的登录流程进行了两次此建模。

它还将涵盖任务的成功或失败结果将需要调用不同的任务的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:59:10.703

首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

如果您真的想要并行执行，您可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。（直接来自文档）

AsyncTask 管理一个使用 ThreadPoolExecutor 创建的线程池。它将有 5 到 128 个线程。如果线程数超过 5 个，这些多余的线程最多会停留 10 秒，然后才会被移除。（注意：这些数字是针对目前可见的开源代码，因 Android 版本而异）。（commonware 对类似问题的回答）

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

[http://developer.android.com/reference/java/util/concurrent/Executor.html](http://developer.android.com/reference/java/util/concurrent/Executor.html)。考虑使用执行器。

您也可以考虑使用 RoboSpice。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice) 你也可以做多个 spicerequest。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T23:22:03.190

我建议使用 Otto & Tape（来自 Square）的组合。

您可以查看使用队列将图像上传到服务器的示例。

[https://github.com/square/tape/tree/master/tape-sample/src/main/java/com/squareup/tape/sample](https://github.com/square/tape/tree/master/tape-sample/src/main/java/com/squareup/tape/sample)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:56:20.067

如果您需要同时执行所有这些任务，那么您真的别无选择，只能启动多个异步任务。但是，如果您只需要在后台执行所有这些任务，那么您可能只需启动一个异步任务并为其提供参数以执行其他任务。

我建议考虑使用`Loaders`而不是`AsyncTasks`. `Loaders`是异步运行的，在我看来更容易在代码中管理。使用加载器，当加载器完成运行一个`onLoaderFinished`方法时，您`Activity`可以实现加载器回调并且`onCreateLoader`可以处理多个加载器，因此这一切都比使用`AsyncTask`. 这是[关于装载机的教程](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)。

# c# - 联合 JsonResult 如果项目是匿名类型，为什么我不能通过动态访问

> ID：15625365
> 
> 赞同：1
> 
> 时间：2013-03-25T21:43:33.767
> 
> 标签：c#, json, unit-testing, dynamic

我有一个方法看起来像：

```
public JsonResult GetSpecies()
        {
            var species = new List<SpeciesType> {
                                                new SpeciesType{ Id=1, Name="Giraffe" },
                                                new SpeciesType{ Id=2, Name="Wolf" }
                                            };

            return Json(new { Species = species });
        } 
```

然后我有这个程序集，使其内部对我的测试项目可见并进行了测试：

```
[TestMethod]
        public void GetSpecies_ReturnsJsonVersionOfNameAndId()
        {
            ...

            var result = controller.GetSpecies();

            dynamic data = result.Data;

            Assert.AreEqual(1, data.Species[0].Id);
            Assert.AreEqual("Giraffe", data.Species[0].Name);
            Assert.AreEqual(2, data.Species[1].Id);
            Assert.AreEqual("Wolf", data.Species[1].Name);
        } 
```

所以这很好用。

我更改了在数组中返回匿名类型的方法：

```
public JsonResult GetSpecies()
            {
                var species = new List<SpeciesType> {
                                                    new SpeciesType{ Id=1, Name="Giraffe" },
                                                    new SpeciesType{ Id=2, Name="Wolf" }
                                                }.Select(x => new { Id = x.Id, Name = x.Name });

                return Json(new { Species = species });
            } 
```

测试现在抛出异常。

谁能解释为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:45:43.543

您现在没有提供`List<T>`- 您的`Species`属性只是一个序列。我不知道它在 JSON 中是如何表示的，如果它*真的*通过了网络，那可能没问题 - 但确保该`Species`值实际上是一个列表可能是最简单的：

```
var species = new List<SpeciesType> {
                                    new SpeciesType{ Id=1, Name="Giraffe" },
                                    new SpeciesType{ Id=2, Name="Wolf" }
                                }
    .Select(x => new { Id = x.Id, Name = x.Name })
    .ToList(); 
```

# c++ - C++ 中的全局数组

> ID：15625366
> 
> 赞同：0
> 
> 时间：2013-03-25T21:43:34.063
> 
> 标签：c++

我有一个类项目与用户定义的对象类型的数组有关。我的 ChemicalData.cpp 文件中的所有函数（最终会更多）都需要能够访问这个数组。所以有问题的数组在我的头文件中，使用“extern”语法。

```
#include <string>
#include "Chemical.h"

const int ARRAY_SIZE = 2000; 
extern Chemical chemArray[ARRAY_SIZE];

void start();
void arrayMethod(Chemical[]); 
```

在我的 cpp 文件中，我创建了数组并调用了一个函数。

```
#include "ChemicalData.h"
#include "Chemical.h"
#include <string>
using namespace std;

void start()
{
    Chemical chemArray[ARRAY_SIZE];

    arrayMethod(chemArray);
}

void arrayMethod(Chemical[] chemArray)
{
    Chemical chem1 = Chemical();
    chemArray[i] = chem1;
} 
```

这是我的 Chemical.h：

```
#include <string>
#if !defined(CHEMICAL_H)
#define CHEMICAL_H
using namespace std;

class Chemical
{ 
private:
    string chem;

public:
    Chemical();
};
#endif 
```

和 Chemical.cpp 很好的衡量标准：

```
#include "Chemical.h"
#include <string>
using namespace std;

string chem;

Chemical::Chemical()
{
  chem = "";
} 
```

但是编译器会抛出“未定义对 'chemArray' 的引用”的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:45:46.530

```
void start()
{
    Chemical chemArray[ARRAY_SIZE];

    arrayMethod(chemArray);
} 
```

`chemArray`是本地启动功能将其移出功能。

```
Chemical chemArray[ARRAY_SIZE];

void start()
{
    arrayMethod(chemArray);
} 
```

边注; 全局变量不好，因此您可能希望将这些东西包装在一个类中，并使该数组成为该类的实例成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:45:58.623

您不能将 ChemArray 是函数内部的临时变量，extern 用于全局变量。由于每次进入函数都会有一个新的 chemArray.. 将其移到函数外部就可以了：

```
Chemical chemArray[ARRAY_SIZE]; 

void start()
{

    arrayMethod(chemArray);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T21:47:16.753

你不能把 Chemical`chemArray[ARRAY_SIZE]`放在你的头文件中吗？然后转发声明？

# python - 使用 Python 在 Linux 中访问键盘 LED 的替代方法

> ID：15625367
> 
> 赞同：2
> 
> 时间：2013-03-25T21:43:34.960
> 
> 标签：python, linux, keyboard

我在 Linux 中创建了一个 Python 程序，它会闪烁 NumLock LED。代码如下所示：

```
import fcntl
import os
import time

# Define variables for keyboard and NUM_LOCK LED
KDSETLED = 0x4B32
NUM_LED = 0x02

# Open the "keyboard console" for LED toggling
console_fd = os.open('/dev/console', os.O_NOCTTY)

def blink(tme, cnt):
    secs = tme/cnt
    for i in range(cnt):
        fcntl.ioctl(console_fd, KDSETLED, 0)
        time.sleep(secs)
        fcntl.ioctl(console_fd, KDSETLED, NUM_LED)
        if i < cnt - 1:
            time.sleep(secs)

blink(0.5,1) 
```

如果它看起来有点眼熟，那是因为它来自一个类似的[帖子](https://stackoverflow.com/questions/854393/change-keyboard-locks-in-python)。

它为我的一个 Power Up 正确闪烁！USB 数字键盘（部件号：[G54-41403](http://www.barnesandnoble.com/p/powerup-g54-41403-usb-numeric-keypad-19-keys-3-function-keys-usb/1106807269?ean=22769414034)）。然而，虽然程序运行没有任何错误，但我的旧键盘的 LED 不闪烁（我还验证了 NUM LOCK 是否正确）。较旧的键盘是带有 USB 集线器的 Targus 数字键盘（型号[PAUK10U](http://www.targus.com/us/productdetail.aspx?sku=PAUK10U)注意我在网上找不到我的旧型号）和 Rlip 人体工学键盘[KNP-180](http://klipxtreme.com/dpg/kxProductDetail.aspx?pdt=191&ctg=24)。

我检查了 Python 模块`python-keyboardleds`（链接[在这里](http://jwilk.net/software/python-keyboardleds)），我发现程序直接访问键盘。具体来说，当我通过 访问它时`/dev/console`，程序通过`/dev/input/by-path/`. 我尝试更改代码，以便打开列表中的第一个键盘，结果与以前相同（没有错误，其他键盘型号上的 LED 没有闪烁）。我制作的代码如下所示：

```
#LEDToggle.py

import argparse
import glob
import grp
import os
import pwd
import re
import subprocess
import time
import fcntl
import keyboardleds

def drop_privileges():
    uid = pwd.getpwnam('nobody').pw_uid
    gid = grp.getgrnam('nogroup').gr_gid
    os.setgid(gid)
    os.setuid(uid)

def parse_args():
    led_names = list(t + '-lock' for t in ('caps', 'num', 'scroll'))
    ap = argparse.ArgumentParser()
    ap.add_argument('--led', choices=led_names, default=led_names[1],
    help='keyboard LED to use',
    )
    return ap.parse_args()

def blink(tme, cnt):
    secs = tme/cnt
    options = parse_args()
    event_device = glob.glob('/dev/input/by-path/*-event-kbd')[0]
    ledkit = keyboardleds.LedKit(event_device)
    drop_privileges()
    #led = getattr(ledkit, 'num-lock')
    led = getattr(ledkit, options.led.replace('-', '_'))
    for i in range(cnt):
        led.reset()
        print "off"
        time.sleep(secs)
        led.set()
        print "on"
        if i < cnt - 1:
            time.sleep(secs)

blink(5,5) 
```

经过研究，我怀疑在访问`/dev/console`. 当我查看时`/dev/input/by-path/`，我发现工作键盘被命名为`platform-bcm2708_usb-usb-0:1.3:1.0-event-kbd`. 然后，当我尝试连接两个非工作键盘之一时，它们具有相同的名称。

我也尝试过使用`setleds`内核中的命令，以及调用控制台和`tty7`与键盘进行通信。两者都做了同样的事情。他们在 Power Up 上工作！键盘和（没有任何错误）在其他两个键盘上没有闪烁。

我觉得我没有正确地与这些旧键盘进行通信。除了我尝试过的以外，还有其他方法可以切换键盘 LED 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:24:48.367

如果[`setleds`](http://linux.die.net/man/1/setleds)不起作用，最有可能的问题是您的两个旧键盘没有可通过编程访问的 LED，或者，如果有，则无法通过 linux 控制台驱动程序访问它们。

这些是键盘，旨在与全键盘（通常已经有自己的 LED）一起使用，这一事实可能使这似乎是一个合理的设计决定。

除非您想尝试直接在 USB 级别与键盘进行通信，否则我认为您已经完成了。

# powershell - Windows 7 中缺少 Powershell 3.0 cmdlet（禁用-NetAdapter）

> ID：15625371
> 
> 赞同：1
> 
> 时间：2013-03-25T21:43:51.270
> 
> 标签：powershell

在 Windows 8 上，我可以运行一些 PS cmdlet（Disable-NetAdapter、Get-Mailbox），但我的脚本在我的 Windows 7 机器上失败了。

我已经确认 Windows 7 盒子安装了 PS 3.0。我还确认 Windows 7 没有这些 cmdlet。

有谁知道给了什么？是否有某种我应该执行的 cmdlet 导入？

谢谢大家，乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:07:14.157

多个模块，包括网络适配器和计划任务模块，仅在 Windows 8/2012 中可用。据我所知，无法将它们复制到win7。

# arduino - arduino 触摸屏的颜色代码

> ID：15625375
> 
> 赞同：0
> 
> 时间：2013-03-25T21:44:02.490
> 
> 标签：arduino

是否有 TFT 触摸屏所有颜色的代码表？目前我不知道颜色的代码是如何工作的。我有这样的东西：http: [//www.computerhope.com/htmcolor.htm](http://www.computerhope.com/htmcolor.htm) 是否有一个十六进制代码表，如：

```
 BLACK   0x0000
   BLUE    0x001F
   RED     0xF800
   GREEN   0x07E0 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:04:06.557

屏幕很可能使用 RGB565（16 位颜色）规范，而不是您习惯的 RGB888（24 位颜色）规范。

RGB888 简单的意思是：

*   红色 - 8 位 (0-255)
*   绿色 - 8 位 (0-255)
*   蓝色 - 8 位 (0-255)

RGB565 表示：

*   红色 - 5 位 (0-31)
*   绿色 - 6 位 (0-63)
*   蓝色 - 5 位 (0-31)

RGB565 的常见颜色定义是：（来自[http://learn.adafruit.com/adafruit-gfx-graphics-library/coordinate-system-and-units](http://learn.adafruit.com/adafruit-gfx-graphics-library/coordinate-system-and-units)）

```
BLACK    0x0000
BLUE     0x001F
RED      0xF800
GREEN    0x07E0
CYAN     0x07FF
MAGENTA  0xF81F
YELLOW   0xFFE0 
WHITE    0xFFFF 
```

尝试寻找其他 RGB888 到 RGB565 转换器来满足您的工作需求。

要手动“降级”您的颜色，只需选择您想要的颜色（从您的链接图表中），使用工具（google hex 到 rgb）将您的十六进制值转换为 RGB（888），然后使用如下函数：

```
((r / 8) << 11) | ((g / 4) << 5) | (b / 8) 
```

# apache-commons-httpclient - HTTPS 使用 Java Apache PostMethod

> ID：15625377
> 
> 赞同：0
> 
> 时间：2013-03-25T21:44:12.927
> 
> 标签：apache-commons-httpclient

当我们通过 HTTP 文件使用 Apache PostMethod 上传文件时，它可以很好地传输到服务器。如果我们通过 HTTPS 上传，则会将损坏的 OKB 文件保存到服务器。日志文件中没有错误。

较小的 1KB 文件可以正确上传。可能会发生什么。我们使用 JDK1.7 和 Apache commons 3.1。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:32:48.827

升级到 commond-fileupload-1.2.2.jar 为我们解决了这个问题。

# redirect - nginx 重定向包括子域、www 和参数

> ID：15625378
> 
> 赞同：2
> 
> 时间：2013-03-25T21:44:15.740
> 
> 标签：redirect, nginx, subdomain, url-parameters

我想用 nginx 从

```
www.anysubdomain.domain.com?parameters , anysubdomain.com?parameters 
```

至

```
www.domain.com?parameteres&anysubdomain 
```

anysubdomain 或参数是可选的

我试过了

```
server_name ~^(?<subdub>.*).\domain\.com$;
rewrite      ^ http://www.domain.com/?mode=$subdub permanent; 
```

但这是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:02:56.343

```
server_name ~^(www\.)?(?<subdub>.+)\.domain\.com$; 
```

此正则表达式将匹配“www.”的零个或一个外观。

此外，您在使用“.\domain”的正则表达式中存在错误。它应该是“\.domain”。

我也换

```
(?<subdub>.*) 
```

经过

```
(?<subdub>.+) 
```

确保非空子域名。这样 server_name 将不会匹配“www.domain.com”本身，这可能会导致重定向循环。

# knockout.js - 有没有办法不加载带有淘汰条件的元素？

> ID：15625380
> 
> 赞同：0
> 
> 时间：2013-03-25T21:44:16.820
> 
> 标签：knockout.js

我有一个可以是两种类型之一的项目列表 - 根据类型，我需要使用不同的样式/布局。我现在正在做的是遍历所有项目并为每个项目显示两个“模板”，但每个项目仅显示一个模板，具体取决于 type() 的评估方式。这看起来不优雅，因为我真的每个项目只需要一个模板 - 页面上一半的标记将永远不可见。

有什么方法可以只加载这些项目所需的标记，而不会将它们分成两个不同的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:27:46.270

你应该做的是将你的两个“模板”放入*真正的*模板中，并添加一个计算出的 observable 来决定使用哪个模板。如果您的模板非常复杂或者您有许多不同的模板要显示，这将特别有用。

例如，假设您有一个用户：

```
function User(user) {
    this.name = ko.observable(user.name);
    this.isSuperUser = ko.observable(user.isSuperUser);

    // this chooses which template to use        
    this.userTemplate = ko.computed(function () {
        return this.isSuperUser()
            ? "userTemplate-superuser"
            : "userTemplate-user";
    }, this);
} 
```

给定一个用户列表，然后您可以根据是什么来显示适当的模板`userTemplate`。

```
<div data-bind="foreach: users">
    <div data-bind="template: userTemplate"></div>
</div>

<script id="userTemplate-superuser" type="text/html">
    <div class="su">
        Greetings super user <span data-bind="text: name"></span>
    </div>
</script>
<script id="userTemplate-user" type="text/html">
    <div class="u">
        Greetings regular user <span data-bind="text: name"></span>
    </div>
</script> 
```

[演示](http://jsfiddle.net/jeff1203/Rhp42/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:49:18.807

是的，这样的事情应该适合你。

```
<div data-bind="foreach: yourArray">

    <div data-bind="if: isTypeOne">
        <div>template for type one</div>
    </div>

    <div data-bind="if: isTypeTwo">
        <div>template for type two</div>
    </div>

</div> 
```

这样，每个条件标记内的模板仅在其评估为真时生成。

# ruby-on-rails - 设计 - 更改密码后命名空间内的登录无效

> ID：15625383
> 
> 赞同：2
> 
> 时间：2013-03-25T21:44:54.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

使用 Devise，我试图允许用户在此处使用解决方案 3 更新他们的密码：

[https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password)

我正在使用命名空间，所以我的控制器代码如下所示：

```
def update_profile

    @user = current_vendors_user

    if @user.update_attributes(params[:user], :as => :vendor) then
        sign_in :vendors, @user, :bypass => true
        flash[:notice] = 'Profile successfully updated'
        return redirect_to vendors_root_path
    else
        render :action => 'index'
    end
end 
```

...我的命名空间是：供应商。

无论我做什么，用户都会被注销。如果我在“sign_in”之后输出“current_vendor_user”，那么我会看到用户已登录，但在重定向后他们已被注销。我在这里想念什么？

# php - 使用 GET 请求排序列表

> ID：15625388
> 
> 赞同：1
> 
> 时间：2013-03-25T21:45:08.650
> 
> 标签：php, codeigniter, sorting, get

我有一个由 GET 请求触发的搜索功能，它看起来像：`http://localhost:8888/TESTCI/search/get_books?i-slider=7.0&rt-slider=70&start-year=1955&end-year=2013&genre=all&language=all`

没关系，搜索功能按预期工作。当我想根据年份、流派、语言等对结果进行排序时，就会出现问题。我在结果页面上有许多链接，我试图用它们来排序。鉴于我在页面上没有表单来重新提交值，我的想法是使链接等于当前 URL 加上 GET 参数进行排序。年份排序的一个例子是：

```
$year_sort_class = "ui-btn-active ui-state-persist sort-desc";
$year_sort_order = "&sort-by=year-asc";

<li class="<?php echo $year_sort_class ?>"><a href="<?php echo $_SERVER['REQUEST_URI'].$year_sort_order ?>">Year</a></li> 
```

排序后出现的明显问题是 now`$_SERVER['REQUEST_URI']`等于我的原始 URL 加上`&sort-by=year-asc`. 这意味着任何进一步的排序，无论是按流派、语言还是年份，都将连续附加到 URL 中，导致 URL 看起来像

```
 http://localhost:8888/TESTCI/search/get_books?i-slider=7.0&rt-slider=70&start-year=1955&end-year=2013&genre=all&language=all&sort-by=rt-desc&sort-by=i-desc&sort-by=year-desc&sort-by=i-desc 
```

经过4种。

这个问题的解决方案是什么？我是否在这里遗漏了一些基本的东西并使问题完全复杂化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:59:40.737

尝试这样的事情......

```
<?
    $href = explode('?',$_SERVER['REQUEST_URI']);
    $href = $href[0];

    $qs = array();
    foreach ($_GET as $param => $val) {
       if ($param != 'sort-by') $qs[$params] = $val;
    }
?>

<a href="<?=$href.'?'.implode('&',$qs).'&sort-by="year"?>">Year</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:01:16.600

您可以引入一个 baseUrl 变量并将其包装在一个函数中

```
function buildLink($sort = "year-asc", $foo = "default") {
  $baseUrl = "http://localhost:8888/TESTCI/search/get_books?";
  return $baseurl.$sort."&".$foo;
}

print "<a href='".buildLink("year-desc")."'>My Book</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:57:25.900

执行正则表达式匹配以删除先前排序的剩余部分。

```
 preg_replace('/\&sort\-by\=([a-zA-Z0-9-_]+)/','',$_SERVER['REQUEST_URI']); 
```

# c - 使用 GTK 和 C，如何使用按钮开始/停止长计算（在单独的线程中）？

> ID：15625391
> 
> 赞同：3
> 
> 时间：2013-03-25T21:45:28.553
> 
> 标签：c, button, gtk, pthreads

使用 GTK 和 C，如何使用按钮开始/停止长计算（在单独的线程中）？我有可以做到这一点的工作代码，但我不太相信这是一种合理的方法（即“正确”）。

我有一个按钮，其标签从“开始”切换到“停止”。我还有一个全局 pthread_t 变量来存储线程。我的方法是通过按钮的单击信号处理程序启动或取消线程，具体取决于全局布尔型“空闲”标志的值，该标志指示线程当前是否正在运行。

我想要一个设计良好的最小测试用例，以便我可以轻松理解代码以适应更大的程序。[这个问题与Python&PyGTK: Stop while on button click](https://stackoverflow.com/q/13108018/72061)非常相似，但这个问题在我不知道的 python 中。

我的代码 --- 发布在下面 --- 似乎可以工作，但我对它没有信心，因为我可以通过快速连续几次单击开始/停止按钮轻松地使系统瘫痪。

我很想知道其他人将如何（独立地）解决这个问题，他们的方法与我的方法相比如何，如果它实际上是一种体面的方法，我也会对我自己的方法进行代码审查。

```
#include <gtk/gtk.h>
#include <pthread.h>

/* suppress unused variable warnings */
#define UNUSED(x) (void)(x)

typedef struct _Data {
    GtkWidget *window1,
              *button1;
    gint idle;
    pthread_t calcthread;
} Data;

static Data *data;

void *calcfunc(void *arg) {
    int i;
    UNUSED(arg);

    data->idle=FALSE;
    gtk_button_set_label(GTK_BUTTON(data->button1),"Stop");

    /* This is intended to simulated a long calculation that may finish.
       Adjust the limit as needed */
    for(i=1;i<2e9;++i) {
    }

    data->idle=TRUE;
    pthread_exit(NULL);
}

/* this is our click event handler.... it suppose to start or stop 
   the "calcthread" depending on the value of the "idle" flag */
void on_button1_clicked(GtkWidget *widget, Data *ldata) {
    int ret;
    UNUSED(widget);
    UNUSED(ldata);

    if ( data->idle==TRUE ) {
        printf("idle.. starting thread\n");
        ret=pthread_create( &data->calcthread, NULL, calcfunc, NULL);
        if ( ret !=0 ) {
            g_error("ERROR: could not create thread\n");
        }
    } else {
        printf("not idle... canceling thread...");
        ret= pthread_cancel( data->calcthread );
        if ( ret != 0 ) {
            g_error("ERROR: could not cancel thread\n");
        } else {
            printf("canceled\n");
        }
        data->idle=TRUE;
        gtk_button_set_label(GTK_BUTTON(data->button1),"start");
    }
}

/* just defines our setup */
int main (int argc, char *argv[]) {

    g_thread_init(NULL);
    gdk_threads_init();
    gdk_threads_enter();

    gtk_init(&argc, &argv);

    data=g_slice_new0(Data);
    data->idle=TRUE; /* initial state */

    printf("idle is %d\n",data->idle);

    /* add widgets and objects to our structure */

    data->window1=gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_default_size(GTK_WINDOW(data->window1),250,250);
    data->button1=gtk_button_new_with_label("Start");
    gtk_container_add(GTK_CONTAINER(data->window1),GTK_WIDGET(data->button1));

    gtk_signal_connect(GTK_OBJECT(data->window1), "delete-event",
                       gtk_main_quit, NULL);
    gtk_signal_connect(GTK_OBJECT(data->button1), "clicked",
                           G_CALLBACK(on_button1_clicked), NULL);

    gtk_widget_show_all(GTK_WIDGET(data->window1));

    gtk_main();

    /* Don't forget to free the memory! */
    g_slice_free(Data, data);

    gdk_threads_leave();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:23:14.663

当您从辅助线程调用 GTK 函数时，您需要将调用包装到

```
gtk_button_set_label(GTK_BUTTON(data->button1),"Stop"); 
```

与`gdk_threads_enter`/`gdk_threads_leave`通话。但是，最好只从一个线程调用 GTK 函数。最简单的方法是使用空闲函数，`g_idle_add`因为这将从主线程调用，但是在您的情况下，您可以将调用移至`gtk_button_set_label`from `calcfunc`into `on_button1_clicked`。

您还应该`data->idle = FALSE`在`on_button1_clicked`处理程序中设置以解决您单击按钮过快的竞争条件。

另一种方法是不使用线程，即在长时间操作期间运行 GTK 主循环。在您的循环中，您只需要泵入 Gtk 事件循环。

```
for(i=1;i<2e9;++i) {
    while (gtk_events_pending ()) {
        gtk_main_iteration ();
    }
} 
```

这意味着您可以避免所有线程问题和需要锁定数据访问。您可以通过检查处理程序中设置的每次迭代的布尔值来停止计算`on_button1_clicked`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:19:37.183

以下代码符合我的要求。它使用 pthreads。我不知道它是否是最优雅的，但它似乎有效。诀窍是使用两个标志：一个用于空闲状态，一个用于取消请求，这避免了需要使用“pthread_cancel”函数取消线程，我发现这在实际代码中是不寻常的。

```
#include <gtk/gtk.h>
#include <pthread.h>
#include <errno.h>
#include <stdlib.h>

#define UNUSED(x) (void)(x)

#define handle_error_en(en, msg) do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0)

typedef struct _Data {
    GtkWidget *window1,
              *button1;
} Data;

static Data *data;

static pthread_mutex_t calcmutex = PTHREAD_MUTEX_INITIALIZER;
static pthread_t calcthread=0;

static gboolean idle=TRUE,cancel_request=FALSE;

void *calcfunc(void *arg) {
    int i,s;
    UNUSED(arg);
    g_print("\tstarting thread\n");

    s = pthread_setcancelstate(PTHREAD_CANCEL_ASYNCHRONOUS, NULL);
    if (s != 0) {
        handle_error_en(s, "pthread_setcancelstate");
    }

    gdk_threads_enter();
    gtk_button_set_label(GTK_BUTTON(data->button1),"Stop");
    gdk_threads_leave();

    g_print("\tstarting work...\n");
    for (i=0; i<100000000 ;++i) {

        /* check for cancelation */
        pthread_mutex_lock(&calcmutex);
        if ( cancel_request ) {
            g_print("\t[cancel request noted].\n");
            pthread_mutex_unlock(&calcmutex);
            break;
        }
        pthread_mutex_unlock(&calcmutex);

        /* do "calculation" */
        i=i*1*-1*1*-1;
    }
    g_print("\tdone work.\n");

    gdk_threads_enter();
    gtk_button_set_label(GTK_BUTTON(data->button1),"Start");
    gdk_threads_leave();

    pthread_mutex_lock(&calcmutex);
    cancel_request=FALSE;
    idle=TRUE;
    pthread_mutex_unlock(&calcmutex);

    g_print("\tdone thread.\n");
    pthread_exit(NULL);
}

void on_button1_clicked(GtkWidget *widget, gpointer *ldata) {
    int s;
    UNUSED(widget);
    UNUSED(ldata);
    g_print("entered on_button1_clicked\n");

    pthread_mutex_lock(&calcmutex);
    if ( idle ) {
        g_print("idle, starting thread\n");
        s = pthread_create(&calcthread, NULL, calcfunc, NULL);
        if (s != 0) {
            handle_error_en(s, "pthread_create");
        }
        idle=FALSE;
    } else {
        g_print("not idle and not first time, making canceling request.\n");
        cancel_request=TRUE;
    }
    pthread_mutex_unlock(&calcmutex);

    g_print("finished on_button1_clicked\n");
}

/* just defines our setup */
int main (int argc, char *argv[]) {

    g_thread_init(NULL);
    gdk_threads_init();
    gdk_threads_enter();

    gtk_init(&argc, &argv);

    data=g_slice_new0(Data);

    printf("initial idle is %d\n",idle);

    /* add widgets and objects to our structure */
    data->window1=gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_default_size(GTK_WINDOW(data->window1),250,250);
    data->button1=gtk_button_new_with_label("Start");
    gtk_container_add(GTK_CONTAINER(data->window1),GTK_WIDGET(data->button1));

    gtk_signal_connect(GTK_OBJECT(data->window1), "delete-event",
                       gtk_main_quit, NULL);
    gtk_signal_connect(GTK_OBJECT(data->button1), "clicked",
                           G_CALLBACK(on_button1_clicked), NULL);

    gtk_widget_show_all(GTK_WIDGET(data->window1));

    gtk_main();

    /* free the memory and stuff */
    g_slice_free(Data, data);
    pthread_mutex_destroy(&calcmutex);

    gdk_threads_leave();

    return 0;
} 
```

这编译无警告

```
gcc -Wall -Wextra -Wconversion -pedantic `pkg-config --cflags --libs gtk+-2.0` start_stop.c -o start_stop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:40:07.960

那么在Java中我会在那个线程上调用interrupt()，然后线程会得到一个InterruptedException，并且能够在它的异常处理程序的catch中清理或者在退出之前最终阻塞。

在 C 中有几个选项：

*   用 向该线程发送一个信号`kill()`，并让信号处理程序`longjmp()`到达您之前调用的代码中的某个点`setjmp()`。对于清理，您只需在`setjmp()`返回非零时执行某些操作，这意味着它正在从后续`longjmp()`调用中恢复。
*   打电话`pthread_cancel()`。您在这里得到的唯一真正的清理是您之前注册的取消处理程序`pthread_cleanup_push()`将被调用。
*   有一个 volatile 变量或一个锁保护变量，它会定期检查（例如，每次循环迭代一次）并在应该取消计算时设置为某个值。清理很容易，因为您可以在设置标志并跳出循环时做任何您想做的事情。

我不喜欢所有这些：信号意味着您必须处理部分故障（例如，对文件和套接字的短读取和写入）并`errno==EINTR`在代码中的任何地方正确处理，同时避免信号处理程序存在的各种陷阱（例如小堆栈大小以及对可以安全使用的系统调用的限制），`pthread_cancel()`这意味着您必须在线程函数和取消处理程序之间拖动状态，并且该标志可能会影响性能，因为它必须每次都读取未缓存的内存或锁定，如果您不要经常检查它，然后在设置标志时线程不会立即响应。

# php - PHP - 试图制作一个类似 JSON 的数组并感到困惑

> ID：15625392
> 
> 赞同：1
> 
> 时间：2013-03-25T21:45:35.153
> 
> 标签：php, json

我正在使用 PHP 并尝试创建一个看起来像这样的数组：

```
{
    "aps" : {
        "alert" : "Hey"
    },
    "custom_control" : {
        "type" : "topic_comment",
        "object":{
            "topic_id":"123",
            "topic_section":"test"
                        "plan_id":"456"
        }
    }
} 
```

到目前为止，我有类似的东西

```
$message = array('aps'=>array('alert'=>$some_variable)); 
```

但我很困惑之后如何将“custom_control”的值放入这个数组中。谁能告诉我如何从我现有的php中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:47:22.657

你是这个意思吗？

```
<?php
    $some_variable = "Hey";
    $myArray = array(
        "aps" => array(
            "alert" => $some_variable
        ),
        "custom_control" => array(
            "type" => "topic_comment",
            "object" => array(
                "topic_id" => "123",
                "topic_section" => "test",
                "plan_id" => "456"
            )
        )
    );
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:54:50.277

这是发现您需要做的事情的简单方法。

1.  创建您的 JSON 对象。
2.  将其用作 json_decode 函数的输入。
3.  使用 this 的输出作为 var_export() 的输入

因此，假设您将 JSON 分配给 $json_object，然后使用：

```
var_export(json_decode($json_object, true)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:52:36.280

如果您已经创建了初始消息数组（根据您的问题），那么您将执行类似的操作。

```
$message["custom_control"] = array(
    "type" => "topic_comment",
    "object" => array(
        "topic_id" => "123",
        "topic_section" => "test",
        "plan_id" => "456"
    )
) 
```

您可以通过这种方式在 $message 中创建您需要的任何节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T21:52:49.933

您要创建的不是数组，而是对象。

尽量不要将它构建为一个数组，而是一个对象。

```
$obj = new stdClass();
$obj->aps = new stdClass();
$obj->aps->alert = 'Hey';
$obj->custom_control = new stdClass();
$obj->custom_control->type = 'topic_comment';
$obj->custom_control->object = new stdClass();
$obj->custom_control->object->topic_id = '123';
$obj->custom_control->object->topic_section = 'test';
$obj->custom_control->object->plan_id = '456';
$json = json_encode($obj); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T21:51:38.440

如果您更愿意在 JSON 中构建对象，您可以使用 php.ini 中包含的 JSON 解析器。此外，JSON 定义 Javascript 对象，而不是数组（尽管您可以在 JSON 中定义数组，例如`{myArray : [1,2,3]}`

如果你想试试这个：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-25T21:54:08.603

```
$array = array();
$array['aps'] = "alert";

$array['custom_control'] = array();
$array['custom_control']['type'] = "topic_comment";

$array['custom_control']['object'] = array('topic_id' => '123', 
                                           'topic_section' => 'test', 
                                           'plan_id' => '456'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-25T21:54:35.557

我认为你需要这样的东西：

```
$message =array( "aps" =>array("alert"=>"Hey"),
                  "custom_control" => array(
                                              "type" => "topic_comment",
                                              "object" => array(
                                                                 "topic_id"=>"123",
                                                                 "topic_section"=>"test",
                                                                 "plan_id"=>"456"
                                               )
                                      )
            ); 
```

# c# - C# 图片框循环

> ID：15625398
> 
> 赞同：0
> 
> 时间：2013-03-25T21:45:44.383
> 
> 标签：c#, winforms

我已经为图片框编写了循环，它看起来像这样：

```
void labelAdder()
{
    List<Label> labels = new List<Label>();
    List<TextBox> texboxex = new List<TextBox>();
    List<PictureBox> pictureBoxes = new List<PictureBox>();

    for (int i = 0; i < args.Length - 1; i++)
    {   
        equals++;
        var temp = new TextBox();
        var temp2 = new PictureBox();

        int x = 10; 
        int y = xD * equals;

        temp.Location = new Point(x, y); 
        temp2.Location = new Point(x + 100, y); 
        temp2.Image = global::Xbox360_Complex_Checker.Properties.Resources.button_offline;

        temp.Text = args[i];
        temp2.Text = status[i];

        this.Controls.Add(temp);
        this.Controls.Add(temp2);

        temp.Show();
        temp2.Show();

        texboxex.Add(temp);
        pictureBoxes.Add(temp2);
    }   
} 
```

我的问题是`PictureBox`仅在 first 旁边加载`textBox`，它应该在所有文本框旁边加载。我不知道为什么它不起作用。我用标签试过这个，标签加载正确。

# ruby-on-rails - 不准确地拆分跟踪参与者

> ID：15625404
> 
> 赞同：1
> 
> 时间：2013-03-25T21:46:20.497
> 
> 标签：ruby-on-rails, rubygems, ab-testing

我最近开始在生产中使用[Split](https://github.com/andrew/split/wiki) gem 进行 A/B 测试，但它似乎没有准确计算参与者的数量。仪表板在很短的时间内显示了 7700 名参与者，而 Google Analytics 在同一时期内统计的实际唯一身份和网页浏览量不到 400 次。

如何确保只计算实际人员，并且排除爬虫/机器人？这些结果*非常*不准确。

![拆分仪表板的示例](../Images/2de05bf6f1b61afb0f1d118757d1b2ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T19:28:53.023

拆分将包括所有机器人流量，因为它在您的服务器上。根据您使用的 GA 版本，您应该根据拆分测试设置自定义维度 (analytics.js) 或自定义变量 (ga.js)，然后在那里进行 GA 分析。

```
<script>
window.datalayer = window.datalayer || {};
window.datalayer.testing = '<%= @split_test_result %>'
</script>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
if (window.datalayer && window.datalayer.testing){
    _gaq.push(['_setCustomVar', 5, 'Testing', window.datalayer.testing, 3]);
}
_gaq.push(['_trackPageview']);
</script> 
```

或者看起来他已经有了可以使用的宝石：[https ://github.com/andrew/split-analytics](https://github.com/andrew/split-analytics)

# sql - SQL Server FK 同一张表

> ID：15625406
> 
> 赞同：0
> 
> 时间：2013-03-25T21:46:28.450
> 
> 标签：sql, sql-server, database-design, foreign-keys

我正在考虑将关系表添加到数据库中，并且我想通过使用指向同一个表中的 PK 的 FK 来包含一种反向关系功能。例如，假设我有以下表 RELATIONSHIP：

```
ID (PK)    Relation      ReverseID (FK)
1          Parent        2
2          Child         1
3          Grandparent   4
4          Grandchild    3
5          Sibling       5 
```

首先，这可能吗？其次，这是解决这个问题的好方法吗？如果没有，您有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:57:14.547

1）有可能。

2）在您的情况下，它可能不像您想要的那样理想-您有循环，而不是无环结构-因此，如果您的FK就位，则无法按原样插入任何这些行。一种可能性是，在表 DDL 中的 ReverseID 列中允许 NULL 后，您必须插入所有具有 NULL ReverseID 的行，然后执行 UPDATE 以设置 ReverseID 列，这些列现在将具有要引用的有效行。另一种可能性是禁用外键或在数据处于完全有效状态之前不创建它，然后应用它。

3）您几乎每次都必须执行这样的操作，并且如果每个关系都有反向关系，您将无法在架构中强制执行 NOT NULL，或者您将经常禁用和重新启用约束。

4）兄弟情况相同。

如果以某种方式控制它并且您了解其含义，我会很好地使用该设计。

# function - 需要 Postgres 触发器和函数方面的帮助

> ID：15625409
> 
> 赞同：4
> 
> 时间：2013-03-25T21:46:33.783
> 
> 标签：function, postgresql, triggers, plpgsql

我有一个查找表，其中包含一列来源（来自通过我创建的 Web 服务 API 捕获的各种硬编码活动）以及应该与它们相关联的各个品牌。这样我就可以为品牌为空的记录赋予品牌——这样他们就可以通过营销自动化工具使用特定模板受到欢迎。

我最终会弃用此 API 并将其替换为需要品牌的 API，但与此同时，我必须制定一个临时解决方案，直到我给所有品牌团队时间来更改他们的 API 调用。

我写了这个函数：

```
CREATE OR REPLACE FUNCTION public.brand_lookup(IN i_brand TEXT )
  RETURNS SETOF RECORD VOLATILE AS
$$
BEGIN
   RETURN QUERY
     UPDATE subscriber
     SET brand = (SELECT brand FROM brand_translation
                  WHERE source = subscriber.source);
END;
$$
LANGUAGE plpgsql; 
```

以及在插入记录时触发该功能的触发器：

```
CREATE TRIGGER brand_translation 
  AFTER INSERT ON subscriber
  FOR EACH ROW EXECUTE PROCEDURE public.brand_lookup(); 
```

但是我的触发器返回一个错误，“错误：函数 public.brand_lookup() 不存在”（但它创建成功）“。除了我的触发器看不到我的函数这一事实之外，该函数会执行我的操作吗？我打算吗？我对函数相当陌生（正如你可能知道的那样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:38:53.217

它可能像这样工作：

```
CREATE OR REPLACE FUNCTION public.f_brand_lookup()
   RETURNS trigger AS
$func$
BEGIN
   SELECT INTO NEW.brand
          bt.brand
   FROM   brand_translation bt
   WHERE  bt.source = NEW.source;

   RETURN NEW;
END
$func$
LANGUAGE plpgsql;

CREATE TRIGGER brand_insert_before_lookup
BEFORE INSERT ON subscriber
FOR EACH ROW EXECUTE PROCEDURE public.f_brand_lookup(); 
```

您的示例完全错误。
您需要从学习基础知识开始。与往常一样，我建议使用非常精美的手册。[从这里](http://www.postgresql.org/docs/current/interactive/triggers.html)和[这里](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)
开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:56:26.807

Postres 允许根据输入参数重载函数——所以当你`public.brand_lookup()`不带参数调用时，你创建的函数`public.brand_lookup(text)`——找不到。我认为你需要在函数调用中传递必要的参数，或者在函数定义中删除参数。

# c# - 如何使用 IComparer 按任意值排序？

> ID：15625410
> 
> 赞同：0
> 
> 时间：2013-03-25T21:46:37.217
> 
> 标签：c#, sorting, icomparer

我收到一个排序的整数列表，我想用它来对`ListCollectionView`via进行排序`ListCollectionView.CustomSort`。此属性接受一个`IComparer`并且我已经创建了一个，但正如预期的那样，我只能比较通用对象`x`和`y`.

```
public List<int> SortedIds = new List<int> { 13, 7, 5, 3, 1 };
public class Item {
  int Id { get; set; }    
}

public class IdComparer : IComparer<Item> {
  public int Compare(Item x, Item y) {
    // Comparisons 
    // ???
    // return 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:51:58.433

如果您想通过`SortedIds`列表中的索引进行比较，可以执行以下操作：

```
public class IdComparer : IComparer<Item> {
    private readonly Dictionary<int, int> idIndexes;
    public IdComparer(IEnumerable<int> sortedIds)
    {
        idIndexes = sortedIds
            .Select((id, idx) => new { Id = id, Index = idx })
            .ToDictionary(p => p.Id, p.Index);
    }

    public int Compare(Item x, Item y) {
        xIndex = idIndexes[x.Id];
        yIndex = idIndexes[y.Id]
        return xIndex.CompareTo(yIndex);
    }
} 
```

但是你可以使用 linq：

```
IEnumerable<Item> sorted = SortedIds
    .Select((id, idx) => new { Id = id, Index = idx })
    .Join(items, p => i.Id, item => item.Id, (p, item) => new { Item = item, Index = idx })
    .OrderBy(p => p.Index)
    .Select(p => p.Item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:50:05.207

也许你想回来`SortedIds.IndexOf(x.Id).CompareTo(SortedIds.IndexOf(y.Id))`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:02:02.077

您可以使用[OrderBy](http://msdn.microsoft.com/en-us/library/bb343617.aspx)按您想要的任何字段进行排序。像这样：

```
List<Item> sortedById = items.OrderBy(x=>x.Id).ToList(); 
```

和

```
List<Item> sortedByEgo = items.OrderBy(x=>x.Ego).ToList(); 
```

（对于不直接比较的类型，您还可以使用带有 IComparer 参数的 OrderBy 变体，但如果 Id 和 Ego 是整数，则此处不需要）。

# maven - Maven 更新 EAR 文件的内容

> ID：15625411
> 
> 赞同：0
> 
> 时间：2013-03-25T21:46:48.123
> 
> 标签：maven, maven-2

我有一个要更新的 EAR 文件。我在 Ant 中通过解压缩 EAR 和 JAR 来完成此操作，替换一些文件，然后重新打包它。

我正在尝试使用 Maven，但收效甚微，而且也令人困惑。

到目前为止我已经完成了

1）在本地maven仓库中安装EAR文件 2）解压 3）替换我需要的文件

现在我不确定如何取回新的 EAR 文件。一切都在存储库中。

据我了解，EAR插件将ejb、war文件夹中的所有内容都打包并吐出耳朵。但是由于我直接得到了 EAR 文件，所以我本身没有任何项目。

对此有何建议？

还有关于 Maven 的好教程吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:24:16.850

您可能应该执行以下步骤，使用“空白”Maven 项目并假设 EAR 文件已经在存储库中（由另一个项目/工具推送）：

*   使用[依赖项：unpack](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html) mojo 获取并解包（在项目的 /target/ 文件夹中）EAR
*   修改内容
*   使用[程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/)重新打包该 EAR 文件

然后使用该新 EAR 文件执行您需要执行的操作。

“空白” Maven 项目意味着它不会像通常的项目（编译源、包输出......），而是通过特定的插件来操作现有的工件。

# jquery - jquery滑动面板使用动画定位问题

> ID：15625414
> 
> 赞同：0
> 
> 时间：2013-03-25T21:46:58.793
> 
> 标签：jquery, jquery-animate, queue, nav

我正在尝试创建一个包含 3 个列表项的导航面板。单击列表项时，一组相应的链接（子导航）会滑出以显示其自身。

我在这里有一个工作演示：http: [//jsfiddle.net/M8fS3/2/](http://jsfiddle.net/M8fS3/2/)

在这个演示中，该技术有效，但它有点错误。单击链接的次数越多，关闭按钮和 (+) 按钮似乎就失去了它们的位置。它们似乎失去了它们的相对定位，并且表现得好像它们是绝对定位的，相对于容器，而不是它们的父级。

我想以不同的方式来写这篇文章，或者看看是否有任何其他开发人员有更好的技术来完成同样的任务。目前我的jquery如下：

```
$("#serviceBox li a").on("click", function(){
        $(this).animate({
            'left' : -250
        }, {duration: 200, queue: false, easing: 'linear'});

        $(this).next(".panel").animate({
            'left' : 0
        },  {duration: 200, queue: false, easing: 'linear'});
    });

    $("a.closePanel").on("click", function(){
        $(this).parent().animate({
            'left' : 250
        },  {duration: 200, queue: false, easing: 'linear'});

        $(this).parent().prev("a").animate({
            'left' : 0
        },  {duration: 200, queue: false, easing: 'linear'});
    }); 
```

我将队列设置为 false，因为我希望动画彼此同步。让我知道您是否想在此处查看 HTML 和 CSS（目前在小提琴中）。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:42:27.177

关闭和打开按钮失去定位的原因是它们继承了父容器的相对值，从而覆盖了它们的绝对定位。只需添加`position:relative`即可`#serviceBox li .panel a.closePanel`修复它！

# javascript - 有没有办法在 Google Chart Table 上绘制合并单元格？

> ID：15625419
> 
> 赞同：0
> 
> 时间：2013-03-25T21:47:09.300
> 
> 标签：javascript, charts, google-visualization

我设计了一个基于 Google Charts API 的通用仪表板编辑器。

我一直在寻找一种在表格上绘制合并单元格的方法。我已经阅读了所有关于它的文档，但是没有办法通过 API。

你知道一些方法或解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T00:07:07.600

我很懒，所以我冒昧地假设您可以访问 JQuery。您可以在纯 Javascript dom 操作中做到这一点，但认真吗？人生太短暂...

有一种解决方法，但有一些注意事项

表格可视化很巧妙，但归根结底，它仍然只是一张表格，可以作为一个表格进行管理。

像这样的东西...

```
$("td:contains('Blah blag blaf')").attr("colspan","2").next("td").remove() 
```

所以这是寻找一个包含“Blah blag blaf”的单元格，将它合并到两列并删除下一个（现在是多余的）单元格

或者

```
$("#chart_div tr:eq(3) td:eq(2)").attr("colspan","2").next("td").remove() 
```

假设您的表在#chart_div 中，这会做同样的事情，但基于行和列。

但是有一个问题......该表是从排序数据中重新绘制的 - 因此，如果您的表是可排序的，您必须捕获事件并重新应用您的合并

# java - 如何通过单击编辑 JTree 节点

> ID：15625424
> 
> 赞同：2
> 
> 时间：2013-03-25T21:47:27.733
> 
> 标签：java, swing, jtree

我有一个`JTree`, 并且希望`getTreeCellEditorComponent()`在我单击一个节点时调用它的方法。根据`DefaultTreeCellEditor`该类的文档（我对其进行了扩展），“在单击三次鼠标或单击、暂停、单击并延迟 1200 毫秒后开始编辑。” 是否有某种方法可以覆盖此行为，以便单击即可开始编辑过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:49:19.397

[`JTree`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html)API 建议使用，`MouseListener`但键绑定也很方便。此示例调用`startEditingAtPath()`并绑定到 Enter 键：

```
final JTree tree = new JTree();
tree.setEditable(true);
MouseListener ml = new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        int row = tree.getRowForLocation(e.getX(), e.getY());
        TreePath path = tree.getPathForLocation(e.getX(), e.getY());
        if (row != -1) {
            if (e.getClickCount() == 1) {
                tree.startEditingAtPath(path);
            }
        }
    }
};
tree.addMouseListener(ml);
tree.getInputMap().put(
    KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "startEditing"); 
```

附录：另见这个关于可用性的[答案。](https://stackoverflow.com/a/15637927/230513)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:11:35.427

从技术上讲，您可以继承 DefaultTreeCellEditor 并调整其逻辑以在第一次单击时开始编辑：

```
JTree tree = new JTree();
tree.setEditable(true);
TreeCellEditor editor = 
        new DefaultTreeCellEditor(tree, (DefaultTreeCellRenderer) tree.getCellRenderer()) {
    @Override
    protected boolean canEditImmediately(EventObject event) {
        if((event instanceof MouseEvent) &&
           SwingUtilities.isLeftMouseButton((MouseEvent)event)) {
            MouseEvent       me = (MouseEvent)event;

            return ((me.getClickCount() >= 1) &&
                    inHitRegion(me.getX(), me.getY()));
        }
        return (event == null);
    }
};
tree.setCellEditor(editor); 
```

但是，有一个可用性怪癖，因为现在您无法在不开始编辑的情况下进行选择 - 这可能是您的意图，也可能不是。

# c# - 我可以使用 C# 控制外部应用程序吗

> ID：15625425
> 
> 赞同：1
> 
> 时间：2013-03-25T21:47:41.783
> 
> 标签：c#

目前我的电脑上安装了一个软件。这是一个打卡软件，用户可以通过它扫描他们的卡，然后我带上扫描仪并连接到我的计算机并使用该软件提取信息。

我是否可以编写一个 C# 应用程序来控制时钟软件，以便我可以自动化提取用户信息的过程？

时钟软件是从外部供应商处购买的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:01:52.550

这取决于很多事情。

外部供应商是否提供 API 来利用应用程序或数据？也许问他们是否这样做。一些开发人员不会自动提供此信息。如果是这样，您只需查看文档即可。

该应用程序是否保存您可以打开并从中获取信息的文件？如果它们以 txt 或 xml 之类的文本格式保存，您可以简单地制作一个 txt/xml 解析器来读取文件并使用它做任何您想做的事情。

如果不是它会变得讨厌。嗅探网络以查看软件包（如果它发送它们），破解软件以进行一些更改。总而言之，不值得麻烦。

# php - 在循环中将 Wordpress 短代码与 $_GET 进行比较并返回正确的位置

> ID：15625432
> 
> 赞同：0
> 
> 时间：2013-03-25T21:48:19.627
> 
> 标签：php, wordpress, loops, get, shortcode

我在我的 Wordpress 页面中使用简码。使用查询字符串，我将一些数据与简码进行比较。查询字符串如下所示：?results&answer1=1&answer2=1

Wordpress 示例用法：

[answer question=1 image=1]
Lorem Ipsum Doler Sit Amet
[answer question=2 image=1]

然而结果是：

```
Image Image
Lorem Ipsum Doler Sit Amet 
```

我想完成的事情：

```
Image
Lorem Ipsum Dolder Sit Amet
Image 
```

我写的代码：

```
function survey_shortcode($atts)
{

    $return = null;
    // Check if ?results is set in the URL
    if (isset($_GET['results'])) {

        // Loop all url values
        foreach ($_GET as $key => $value) {

            // Check if value url matches 'answer'
            if (trim($key, ' 0123456789') == 'answer') {
                //Split data by "-" to array
                $data = explode("-", $value);

                //Check if question matches and has variables set (image)
                if ($atts['question'] == $data[0] && $atts['image'] == true) {

                    // If value is true or 1 -> show image true, otherwise show image false
                    if ($data[0] == "true" || $data[0] == "1") {
                        $return .= '<img src="/wp-content/themes/markteffectief/images/navbg.png">';
                    } else if ($data[0] == "false" || $data[0] != "0") {
                        $return .= '<img src="/wp-content/themes/markteffectief/images/navbg.png">';
                    }
                // If no image variable is set -> view data
                } else if ($atts['question'] == $data[0]) {
                    $return = $data[0];
                }
            }
        }
    } else {
        $return = null;
    }

    return $return;
}

add_shortcode('answer', 'survey_shortcode'); 
```

我猜它通过 $_GET 循环运行并将所有内容添加到 $return .= some-image。我希望它立即返回，因此它显示在正确的位置（我设置短代码的位置）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T10:18:42.980

也许你应该试试 the_content 钩子，在那里你可以解析内容并用你的替换短代码

```
function my_the_content_filter($content) {
 return str_replace("[shortcode]", "your code", $content);
}
add_filter( 'the_content', 'my_the_content_filter' ); 
```

# actionscript-3 - AS3 > 在某个帧开始上课？类型错误：错误 #1006

> ID：15625438
> 
> 赞同：1
> 
> 时间：2013-03-25T21:48:35.743
> 
> 标签：actionscript-3, flash

我试图创建一个简单的记忆游戏，我有 3 帧介绍，主游戏，结束但是每次我单击“开始按钮”跳转到第 2 帧时，我都会收到此错误；

```
TypeError: Error #1006: Play_AnimalCardGame is not a function.
    at AnimalCardGame/frame2()
    at flash.display::MovieClip/gotoAndStop()
    at AnimalCardGame/startGame() 
```

我的.AS

```
package{
    import flash.display.*;
    import flash.events.*;
    import flash.utils.getTimer;

    public class Play_AnimalCardGame extends MovieClip
    {
        private static const boardWidth:uint =4;
        private static const boardHeight:uint =3;
        private static const cardVSpace:Number=100;
        private static const cardHSpace:Number=15;
        private static const offSetX:Number=115;
        private static const offSetY:Number=155;

        public function Play_AnimalCardGame ():void
        {

            var cardDeck:Array = new Array();
            for ( var i:uint=0;i<boardWidth*boardHeight/2;i++){
                cardDeck.push(i);
                cardDeck.push(i);
            }

            for(var x:uint=0; x<boardWidth ; x++){
                for(var y:uint=0; y<boardHeight;y++){
                    var aCard:Card = new Card();
                    aCard.stop();
                    aCard.x = x*offSetX+cardVSpace;
                    aCard.y = y*offSetY+cardHSpace;
                    var randomCard:uint = Math.floor(Math.random()*cardDeck.length);
                    aCard.cardface= cardDeck[randomCard];
                    cardDeck.splice(randomCard,1);
                    aCard.gotoAndStop(1);
                    aCard.addEventListener(MouseEvent.CLICK,clickCard);
                    addChild(aCard);
                    cardLeft++;

                }

                }

        }
        private var firstPick:Card;
        private var secondPick:Card;
        private var cardLeft;
        private static const pointHit:int =100;
        private static const pointMiss:int = -5;
        private var startscore =0;
        var startTime:uint;
            var time:uint;

        public function clickCard(event:MouseEvent){

                    var pickedCard:Card = (event.currentTarget as Card);

                    if(firstPick == null){
                        firstPick =pickedCard;
                        firstPick.gotoAndStop(pickedCard.cardface+2);
                    }
                    else if (firstPick ==pickedCard){
                        firstPick.gotoAndStop(1);
                        firstPick=null;
                    }
                    else if (secondPick ==null){
                        secondPick= pickedCard;
                        secondPick.gotoAndStop(pickedCard.cardface+2);

                        if (firstPick.cardface == secondPick.cardface){
                            startscore +=pointHit;
                            cardLeft-=2;
                            removeChild(firstPick);
                            removeChild(secondPick);

                            txtscore.text= String(startscore);
                            firstPick = null;
                            secondPick=null;
                        }
                        else{
                            firstPick.gotoAndStop(1);
                            secondPick.gotoAndStop(1);

                            startscore +=pointMiss;
                            txtscore.text= String(startscore);

                            secondPick=null;
                            firstPick = pickedCard;
                            firstPick.gotoAndStop(pickedCard.cardface+2);
                        }

                    }
                    if(cardLeft==0){
                            gotoAndStop("gameover");
                    }
                }
    public function showTimer(event:Event)
        {

            startTime = getTimer();
            time=0;

            time = getTimer()- startTime;
            txtTime.text = clockTime(time);
        }

    public function clockTime(ms:int){
        var seconds:int = Math.floor(ms/1000);
        var minutes:int = Math.floor(seconds/60);
        seconds -=minutes *60;

        var timeString:String = minutes+":"+String(seconds+100).substr(1,2);
        return timeString;
    }

} 
```

据我所知，没有问题，但又只是学习

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:52:05.997

看起来您已将类名定义为

```
Play_AnimalCardGame 
```

但是然后您将构造函数定义为

```
AnimalCardGame 
```

首先将构造函数名称设置为与类名称相同

# android - 自定义加载器 - 当片段从后台堆栈返回时调用 onStartLoading()

> ID：15625440
> 
> 赞同：0
> 
> 时间：2013-03-25T21:48:38.380
> 
> 标签：android, android-listfragment, android-loadermanager, android-loader, asynctaskloader

我使用 ViewPager 和 FragmentStatePageAdapter 显示搜索结果，每组结果都在自己的片段中。使用自定义 AsyncTaskLoader 加载数据。我想在进入其他活动/背景并返回时保留滚动位置。

然而，在导航到另一个活动并返回时，加载器管理器调用加载器的 onStartLoading() 并不必要地重新加载数据：

```
protected void onStartLoading() {
    if (results.size() > 0) {
        Log.d(TAG, "onStartLoading() - deliver result");
        deliverResult(mResults);
    }

    if (takeContentChanged() || results.size() == 0) {
        Log.d(TAG, "onStartLoading() - force load");
        // Needed for custom loaders
        forceLoad();
    }

 // Register observer...

} 
```

这也意味着我无法恢复滚动位置（保存在片段的保存时）。有什么方法可以避免在片段的 onResume 上重新加载？我只在 onActivityCreated() 中调用 initLoader()，当从 backstack 中恢复片段时不会调用它。

我正在使用 v4 兼容性库。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-26T06:38:21.650

一个小提示检查......当你`initLoader`可能不会打电话`onStartLoading`但它肯定会打电话`onLoadFinished`（并提供旧结果）。

也许这正在发生在你身上？

还可以尝试阅读此线程： [为什么在片段恢复后再次调用 onLoadFinished？](https://stackoverflow.com/questions/21031692/why-is-onloadfinished-called-again-after-fragment-resumed)

# linux - 第二个插件崩溃再次引用的代码段

> ID：15625445
> 
> 赞同：1
> 
> 时间：2013-03-25T21:49:01.617
> 
> 标签：linux, gcc, dynamic, linker, dlopen

在我处理的有问题的情况下，我想了解 Linux 机器上的动态链接器/加载器行为。

我们的崩溃代码作为插件加载 (dlopen(libwrapper.so, RTLD_GLOBAL))。libwrapper.so 只是一个薄层，它加载了另一个插件来完成真正的工作。这些插件可以命名为：P1 和 P2，它们中的每一个都依赖于名为 F 的通用库（所有这些都非常简化）。

引入包装器 (libwrapper.so) 以允许在没有 RTLD_GLOBAL 的情况下加载 Pn，因为该标志集会导致加载 Pns 的明显链接问题（它们具有相同的 API）。RTLD_DEEPBIND 不是一个选项，因为目标平台太旧 - 不支持它。

令我们惊讶的是，问题在 P2 的加载时出现在 F 库中（当 P1 已经加载（并初始化）并且 F 作为其隐式依赖项时）。在显式加载 P2 时 (dlopen(libP2.so, RTLD_LOCAL | RTLD_NOW))，动态链接器没有报告任何问题，但是在 F 中调用代码来实例化 F 中定义的某些类型实例（再次）会导致各个位置出现分段错误（如果一个被跳过/注释掉，它会在另一个地方崩溃——因此没有花时间调查可能很麻烦的代码模式，因为怀疑有更普遍的问题/误解）。没有使用内联函数，代码与 -Wl、-E 链接，默认可见性，GCC 是 3.4.4.. F 代码非常稳定，过去在独立应用程序中使用或作为插件的一部分使用。

我想将 F 链接为静态库以解决动态链接器可能存在的任何问题，但结果是相同的。

我对这个话题的看法：

*   将 F 链接为动态库会导致动态链接器“知道” F 在第二次加载 P2 时被引用，并且只会增加引用计数器并且不调用静态初始化程序（这没​​关系），但会进行重定位（再次，这似乎是有问题的） .
*   将 F 作为静态库链接会导致动态链接器将 F 代码加载为 P2 (P2F) 的静态链接部分，并在 P2F 内进行重定位。但是，F 中的“不知何故”常见符号与 P1F 代码实例混淆了。

关于使代码至少工作的解决方法的假设：

*   在单个共享库（单个插件）中链接 P1 ... Pn，F 是否共享/静态无关紧要。这样，任何重定位都只进行一次。

我很感激任何反馈是我对该主题的看法错误/过于简化/缺少重要部分？这是过去已知的 GCC / binutils 错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:55:44.840

> 我对这个话题的看法：

你对这个话题的看法是错误的；但是没有办法向你证明这一点。

编写一个最小的测试用例来模拟您的系统所做的事情，并且仍然以类似的方式崩溃。用实际损坏的代码更新您的问题；那么我们可以*准确地*告诉您问题所在。

还有一个很好的机会是，在将问题简化为最小示例时，您会自己发现问题所在。

无论哪种方式，您都会理解问题，并会学到新的东西。

# iphone - iOS - 将联系人添加到联系人中？

> ID：15625447
> 
> 赞同：37
> 
> 时间：2013-03-25T21:49:05.730
> 
> 标签：iphone, ios, email, uibutton, contacts

嘿嘿！有没有一种方法可以在用户点击按钮时将联系人添加或更新到实际的 Apple Contacts Book 中？一些节日的电子邮件回复包括“名片”，收件人可以下载并在他们的通讯录中找到。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-25T21:57:39.770

如果在 iOS 9 或更高版本中执行此操作，则应使用该`Contacts`框架：

```
@import Contacts; 
```

您还需要更新您的`Info.plist`，添加一个`NSContactsUsageDescription`来解释为什么您的应用程序需要访问联系人。

然后，当您想以编程方式添加联系人时，您可以执行以下操作：

```
CNAuthorizationStatus status = [CNContactStore authorizationStatusForEntityType:CNEntityTypeContacts];
if (status == CNAuthorizationStatusDenied || status == CNAuthorizationStatusRestricted) {
    UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"Access to contacts." message:@"This app requires access to contacts because ..." preferredStyle:UIAlertControllerStyleActionSheet];
    [alert addAction:[UIAlertAction actionWithTitle:@"Go to Settings" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString] options:@{} completionHandler:nil];
    }]];
    [alert addAction:[UIAlertAction actionWithTitle:@"Cancel" style:UIAlertActionStyleCancel handler:nil]];
    [self presentViewController:alert animated:TRUE completion:nil];
    return;
}

CNContactStore *store = [[CNContactStore alloc] init];

[store requestAccessForEntityType:CNEntityTypeContacts completionHandler:^(BOOL granted, NSError * _Nullable error) {
    if (!granted) {
        dispatch_async(dispatch_get_main_queue(), ^{
            // user didn't grant access;
            // so, again, tell user here why app needs permissions in order  to do it's job;
            // this is dispatched to the main queue because this request could be running on background thread
        });
        return;
    }

    // create contact

    CNMutableContact *contact = [[CNMutableContact alloc] init];
    contact.familyName = @"Doe";
    contact.givenName = @"John";

    CNLabeledValue *homePhone = [CNLabeledValue labeledValueWithLabel:CNLabelHome value:[CNPhoneNumber phoneNumberWithStringValue:@"312-555-1212"]];
    contact.phoneNumbers = @[homePhone];

    CNSaveRequest *request = [[CNSaveRequest alloc] init];
    [request addContact:contact toContainerWithIdentifier:nil];

    // save it

    NSError *saveError;
    if (![store executeSaveRequest:request error:&saveError]) {
        NSLog(@"error = %@", saveError);
    }
}]; 
```

或者，更好的是，如果您想使用`ContactUI`框架添加联系人（让用户直观地确认联系人并让他们按照他们认为合适的方式进行定制），您可以导入两个框架：

```
@import Contacts;
@import ContactsUI; 
```

接着：

```
CNContactStore *store = [[CNContactStore alloc] init];

// create contact

CNMutableContact *contact = [[CNMutableContact alloc] init];
contact.familyName = @"Smith";
contact.givenName = @"Jane";

CNLabeledValue *homePhone = [CNLabeledValue labeledValueWithLabel:CNLabelHome value:[CNPhoneNumber phoneNumberWithStringValue:@"301-555-1212"]];
contact.phoneNumbers = @[homePhone];

CNContactViewController *controller = [CNContactViewController viewControllerForUnknownContact:contact];
controller.contactStore = store;
controller.delegate = self;

[self.navigationController pushViewController:controller animated:TRUE]; 
```

我最初的答案是使用 9 之前的 iOS 版本的`AddressBook`and`AddressBookUI`框架，如下所示。但如果只支持 iOS 9 及更高版本，请使用上述的`Contacts`和`ContactsUI`框架。

--

如果要将联系人添加到用户的通讯录中，请使用`AddressBook.Framework`创建联系人，然后使用`AddressBookUI.Framework`来呈现用户界面以允许用户使用 将其添加到他们的个人通讯录中[`ABUnknownPersonViewController`](http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/ABUnknownPersonViewController_Class/Reference/Reference.html)。因此，您可以：

1.  [在Link Binary With Libraries](http://developer.apple.com/library/mac/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)下添加`AddressBook.Framework`和`AddressBookUI.Framework`到您的列表；

2.  导入 .h 文件：

    ```
    #import <AddressBook/AddressBook.h>
    #import <AddressBookUI/AddressBookUI.h> 
    ```

3.  编写代码以创建联系人，例如：

    ```
    // create person record

    ABRecordRef person = ABPersonCreate();

    // set name and other string values

    ABRecordSetValue(person, kABPersonOrganizationProperty, (__bridge CFStringRef) venueName, NULL);

    if (venueUrl) {
        ABMutableMultiValueRef urlMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef) venueUrl, kABPersonHomePageLabel, NULL);
        ABRecordSetValue(person, kABPersonURLProperty, urlMultiValue, nil);
        CFRelease(urlMultiValue);
    }

    if (venueEmail) {
        ABMutableMultiValueRef emailMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        ABMultiValueAddValueAndLabel(emailMultiValue, (__bridge CFStringRef) venueEmail, kABWorkLabel, NULL);
        ABRecordSetValue(person, kABPersonEmailProperty, emailMultiValue, nil);
        CFRelease(emailMultiValue);
    }

    if (venuePhone) {
        ABMutableMultiValueRef phoneNumberMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        NSArray *venuePhoneNumbers = [venuePhone componentsSeparatedByString:@" or "];
        for (NSString *venuePhoneNumberString in venuePhoneNumbers)
            ABMultiValueAddValueAndLabel(phoneNumberMultiValue, (__bridge CFStringRef) venuePhoneNumberString, kABPersonPhoneMainLabel, NULL);
        ABRecordSetValue(person, kABPersonPhoneProperty, phoneNumberMultiValue, nil);
        CFRelease(phoneNumberMultiValue);
    }

    // add address

    ABMutableMultiValueRef multiAddress = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
    NSMutableDictionary *addressDictionary = [[NSMutableDictionary alloc] init];

    if (venueAddress1) {
        if (venueAddress2)
            addressDictionary[(NSString *) kABPersonAddressStreetKey] = [NSString stringWithFormat:@"%@\n%@", venueAddress1, venueAddress2];
        else
            addressDictionary[(NSString *) kABPersonAddressStreetKey] = venueAddress1;
    }
    if (venueCity)
        addressDictionary[(NSString *)kABPersonAddressCityKey] = venueCity;
    if (venueState)
        addressDictionary[(NSString *)kABPersonAddressStateKey] = venueState;
    if (venueZip)
        addressDictionary[(NSString *)kABPersonAddressZIPKey] = venueZip;
    if (venueCountry)
        addressDictionary[(NSString *)kABPersonAddressCountryKey] = venueCountry;

    ABMultiValueAddValueAndLabel(multiAddress, (__bridge CFDictionaryRef) addressDictionary, kABWorkLabel, NULL);
    ABRecordSetValue(person, kABPersonAddressProperty, multiAddress, NULL);
    CFRelease(multiAddress);

    // let's show view controller

    ABUnknownPersonViewController *controller = [[ABUnknownPersonViewController alloc] init];

    controller.displayedPerson = person;
    controller.allowsAddingToAddressBook = YES;

    // current view must have a navigation controller

    [self.navigationController pushViewController:controller animated:YES];

    CFRelease(person); 
    ```

请参阅*地址簿编程指南的*[ABUnknownPersonViewController 类参考](http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/ABUnknownPersonViewController_Class/Reference/Reference.html)或[提示用户从现有数据创建新人员记录](http://developer.apple.com/library/ios/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/UI_Controllers.html#//apple_ref/doc/uid/TP40007744-CH5-SW6)部分。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-16T05:17:05.603

**呈现默认联系人控制器**

**第 1 步：** 将 ContactUi.framework 添加到项目中并导入

```
 #import <Contacts/Contacts.h>
    #import <ContactsUI/ContactsUI.h> 
```

**步骤2：** 添加此代码

```
 -(void)showAddContactController{
        //Pass nil to show default contact adding screen
        CNContactViewController *addContactVC = [CNContactViewController viewControllerForNewContact:nil];
        addContactVC.delegate=self;
        UINavigationController *navController   = [[UINavigationController alloc] initWithRootViewController:addContactVC];
        [viewController presentViewController:navController animated:NO completion:nil];
    } 
```

**第三步：**

为了在按下 DONE 或 CANCEL 时获得回调，添加`<CNContactViewControllerDelegate>`并实现委托方法。

```
- (void)contactViewController:(CNContactViewController *)viewController didCompleteWithContact:(nullable CNContact *)contact{
    //You will get the callback here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T07:11:08.520

```
@import Contacts;
-(void)addToContactList
 {
CNAuthorizationStatus status = [CNContactStore authorizationStatusForEntityType:CNEntityTypeContacts];

if (status == CNAuthorizationStatusDenied || status == CNAuthorizationStatusRestricted) {

    UIAlertController *alert = [UIAlertController alertControllerWithTitle:nil message:@"This app previously was refused permissions to contacts; Please go to settings and grant permission to this app so it can add the desired contact" preferredStyle:UIAlertControllerStyleAlert];

    [alert addAction:[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:nil]];

    [self presentViewController:alert animated:TRUE completion:nil];

    return;

}

CNContactStore *store = [[CNContactStore alloc] init];

[store requestAccessForEntityType:CNEntityTypeContacts completionHandler:^(BOOL granted, NSError * _Nullable error) {

    if (!granted) {

        dispatch_async(dispatch_get_main_queue(), ^{

            // user didn't grant access;

            // so, again, tell user here why app needs permissions in order  to do it's job;

            // this is dispatched to the main queue because this request could be running on background thread

        });

        return;

    }

    // create contact

    CNMutableContact *contact = [[CNMutableContact alloc] init];

    contact.givenName = @"Test";

    contact.familyName = @"User";

    CNLabeledValue *homePhone = [CNLabeledValue labeledValueWithLabel:CNLabelHome value:[CNPhoneNumber phoneNumberWithStringValue:@"91012-555-1212"]];

    contact.phoneNumbers = @[homePhone];

    CNSaveRequest *request = [[CNSaveRequest alloc] init];

    [request addContact:contact toContainerWithIdentifier:nil];

    // save it

    NSError *saveError;

    if (![store executeSaveRequest:request error:&saveError]) {

        NSLog(@"error = %@", saveError);

    }

}];

 } 
```*

# sharepoint - 使用 PowerShell 在 SharePoint 共享文档列表中创建“文档链接”

> ID：15625448
> 
> 赞同：1
> 
> 时间：2013-03-25T21:49:06.880
> 
> 标签：sharepoint, powershell, sharepoint-2010, powershell-2.0

我正在尝试使用 PowerShell 2.0 在 SharePoint 2010 中创建指向文档的链接。我已经启用了其他内容类型并将“链接到文档”内容类型添加到相关文档库中。

我尝试链接到的文档位于同一网站集中另一个 Web 上的不同共享文档列表中。实际文件嵌套在名为“PM”的子文件夹中。文件类型可能从 excel 文件到 word 文件再到 PDF。

我已经手动测试了该过程（共享文档->新文档->链接到文档-> ...）并且工作正常（如完成后右下角带有箭头的文档图标所示)，但我似乎无法让它与 PowerShell 一起使用。有任何想法吗？

这是迄今为止我遇到的唯一非 PowerShell 解决方案：http: [//howtosharepoint.blogspot.com/2010/05/programmatically-add-link-to-document.html](http://howtosharepoint.blogspot.com/2010/05/programmatically-add-link-to-document.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:51:48.390

通过移植上述解决方案，我终于让它工作了。这里有多余的细节，但它的要点很容易解析出来：

```
# Push file links out to weekly role page
$site = New-Object Microsoft.SharePoint.SPSite($roleURL)
$web = $site.OpenWeb()
$listName = "Shared Documents"
$list = $web.Lists[$listName]
$fileCollection = $list.RootFolder.files
ForEach ($doc in $docLoadList) {
    $parsedFileName = $d.Split("\")
    $index = $parsedFileName.Length
    $index = $index - 1
    $actualFileName = $parsedFileName[$index]
    $existingFiles = Get-ExistingFileNames $homeURL
    If ($existingFiles -Match $actualFileName) {
        $existingFileObject = Get-ExistingFileObject $actualFileName $homeURL
        $docLinkURL = Get-ExistingFileURL $actualFileName $homeURL
        # Create new aspx file
        $redirectFileName = $actualFileName
        $redirectFileName += ".aspx"
        $redirectASPX = Get-Content C:\Test\redirect.aspx
        $redirectASPX = $redirectASPX -Replace "#Q#", $docLinkURL
        $utf = new-object System.Text.UTF8Encoding
        $newFile = $fileCollection.Add($redirectFileName, $utf.GetBytes($redirectASPX), $true)
        # Update the newly added file's content type
        $lct = $list.ContentTypes["Link to a Document"]
        $lctID = $lct.ID
        $updateFile = $list.Items | ? {$_.Name -eq $redirectFileName}
        $updateFile["ContentTypeId"] = $lctID
        $updateFile.SystemUpdate()
        $web.Dispose()
    }
} 
```

在某些时候，我可能最终也会将脚本中的 .aspx 文件串在一起......

# java - JTextPane 中的布局问题

> ID：15625450
> 
> 赞同：3
> 
> 时间：2013-03-25T21:49:13.123
> 
> 标签：java, swing, jtextpane

我很抱歉没有更好的标题，但我不知道如何进一步指定错误，因为我不了解它的性质。当问题被理解时，也许有人可以编辑它。

我正在编写一个应用程序，用户可以在其中将图标添加到文本字段中。我显然选择了一个`JTextPane`来显示文本和图标。在玩了`insertComponent()`这个类的功能后，我遇到了一些奇怪的布局问题，所以我决定在 oracle.com 上查找教程。在查看了示例的[源代码](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TextSamplerDemoProject/src/components/TextSamplerDemo.java)后，我决定做同样的事情，并使用样式将组件添加到底层`StyledDocument`. 当我开始第一次测试运行时，我发现布局问题保持不变。

那么，究竟发生了什么？

![在此处输入图像描述](../Images/9939551024ae310dffcafb888e92975b.png)

我希望文本窗格显示的是“abcOdefO”，但正如您从屏幕截图中看到的那样，这两个图标（圆圈）在它们的右侧有一些空间。我希望将图标视为稍大的字符，因此它应该只占用它需要的空间，而不是 (availableSpace / numberOfIcons)，这似乎是它实际占用的空间。

在插入符号位置键入另一个字符时：

![在此处输入图像描述](../Images/b26cfaaa067ff4b0e990bd89fb1918db.png)

这更奇怪了。如果图标有`MouseListeners`，则所有 4 个可见圆圈都会触发该事件。如果我将框架拖到另一个窗口或最小化并恢复它，奇怪的部分就会消失，框架看起来就像第一个图像（除了附加字符）。所以我想，我的这部分问题是通过`repaint()`在正确的位置调用来解决的——但是在哪里呢？

这是生成上面看到的图像的代码：

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.RenderingHints;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.text.BadLocationException;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyleContext;
import javax.swing.text.StyledDocument;

public class TextPaneTestPanel extends JPanel {

    private class myIcon extends JPanel {
        private final int side;
        private final int padding = 1;

        public myIcon(int size) {
            this.side = size - 2 * padding;
            this.setSize(size, size);
            this.setPreferredSize(getSize());
            this.setMinimumSize(getSize());
        }

        public void paint(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();

            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            g2d.setColor(Color.BLACK);
            g2d.setStroke(new BasicStroke(2));
            g2d.drawOval(padding, padding, side, side);
        }
    }

    private final JTextPane textPane;

    public TextPaneTestPanel() {

        textPane = new JTextPane();

        StyledDocument doc = textPane.getStyledDocument();
        Style def = StyleContext.getDefaultStyleContext().getStyle(StyleContext.DEFAULT_STYLE);
        StyleConstants.setFontFamily(def, "Monospaced");

        Style regular = doc.addStyle("regular", def);

        try {
            doc.insertString(0, "abc", regular);
            Style s1 = doc.addStyle("icon1", regular);
            StyleConstants.setComponent(s1, new myIcon(20));
            doc.insertString(3, " ", s1);
            doc.insertString(4, "def", regular);
            Style s2 = doc.addStyle("icon2", regular);
            StyleConstants.setComponent(s2, new myIcon(20));
            doc.insertString(7, " ", s2);
        } catch (BadLocationException e1) {
            e1.printStackTrace();
        }

        this.setLayout(new GridBagLayout());
        this.add(textPane, new GridBagConstraints(0, 0, 1, 1, 1, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                new Insets(4, 4, 4, 4), 0, 0));
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        TextPaneTestPanel panel = new TextPaneTestPanel();

        frame.getContentPane().add(panel);
        frame.setSize(300, 100);
        frame.setVisible(true);
    }

} 
```

总结一下我的问题：

1.  是什么导致图标后出现空格？

2.  我在哪里添加`repaint()`or`revalidate()`来解决图片 #2 中出现的问题？

PS：我知道，我的“图标”没有实现`Icon`，但它不应该是必要的，因为`JTextPanes`可以处理各种`Components`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:02:27.647

> 1.是什么原因导致图标后出现空格？

好吧，您有以下代码：

```
this.setMinimumSize(getSize()); 
```

最大尺寸是多少？

> 如何解决图片 #2 中出现的问题？

自定义绘画是通过覆盖paintComponent() 方法而不是paint() 方法完成的，并且不要忘记调用super.paintComponent。

一个图标在这里会更合适，因为你所做的只是自定义绘画。甚至是 JComponent，但不是 JPanel，它是用于容纳其他组件的容器。另外，您使用的图标没有面板或 JComponent 的大小问题，因为该方法是作为界面的一部分专门实现的。

# javascript - Javascript 模块化原型模式

> ID：15625457
> 
> 赞同：1
> 
> 时间：2013-03-25T21:49:41.170
> 
> 标签：javascript, singleton, prototypejs, prototype, prototypal-inheritance

函数继承的问题是，如果你想创建很多实例，那么它会很慢，因为每次都必须声明函数。

原型继承的问题是没有办法真正拥有私有变量。

是否有可能将这两者混合在一起并获得两全其美的效果？这是我使用原型和单例模式组合的尝试：

```
var Animal = (function () {
  var secret = "My Secret";

  var _Animal = function (type) {
    this.type = type;
  }
  _Animal.prototype = {
    some_property: 123,
    getSecret: function () {
      return secret;
    }
  };

  return _Animal;
}());

var cat = new Animal("cat");

cat.some_property; // 123
cat.type; // "cat"
cat.getSecret(); // "My Secret" 
```

使用这种模式有什么缺点吗？安全？效率？是否有类似的模式已经存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:56:35.847

你的模式完全没问题。

这里有几件事你要记住。
首先，在最外层闭包中创建的函数和变量的行为类似于其他语言中的私有静态方法/成员（除了它们在语法上的实际调用方式）。

如果您使用原型范例，那么创建私有静态方法/成员当然是不可能的。
您可以通过将它们附加到内部构造函数来进一步创建公共静态成员/方法，然后再将其返回到外部范围：

```
var Class = (function () {
    var private_static = function () {},
        public_static  = function () {},

        Class = function () {
            var private_method = function () { private_static(); };
            this.method = function () { private_method(); }; 
         };

    Class.static = public_static;
    return Class;
}());

Class.static(); // calls `public_static`
var instance = new Class();
instance.method();
// calls instance's `private_method()`, which in turn calls the shared `private_static();` 
```

请记住，如果您打算以这种方式使用“静态”函数，它们绝对无法访问实例的内部状态，因此，如果您确实使用它们，则需要向它们传递任何东西他们需要，您必须收集返回语句（或从内部修改对象属性/数组元素）。

此外，从任何实例内部，给定上面的代码，`public_static`并且`Class.static();`都是调用公共函数的完全有效的方法，因为它实际上不是静态的，而只是闭包中的一个函数，它也恰好被添加为一个属性另一个对象，它也在实例的范围链内。

额外的好处：
即使恶意代码 DID 开始攻击您的公共静态`Class.static`方法（ - 安全至于让人们远离私有的东西...... 如果另一个模块依赖于一个实例，并且该实例的公共方法已被篡改，而另一个模块只是信任它所提供的一切......好吧，该模块的创建者感到羞耻——但至少你的东西是安全的。`Class.static``public_static`

万岁用于复制其他语言的功能，仅使用闭包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:13:24.800

> 是否有可能将功能继承和原型继承混合在一起并获得两全其美？

是的。[你应该这样做](https://stackoverflow.com/q/310870/1048572)。您可以使用从放置所有非特权方法的某个 proto 对象继承，而不是初始化`that`为。但是，从这样的“类”继承并不简单，您很快就会得到看起来更像[伪经典方法](https://stackoverflow.com/a/13418980/1048572)的代码——即使使用工厂。`{}``Object.create`

> 我尝试结合使用原型和单例模式。是否有类似的模式已经存在？

好的，但这与上面的不同吗？实际上，这被称为“Revealing Prototype Pattern”，是[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)和原型模式的结合。

> 使用这种模式有什么缺点吗？

不，还好。仅对于您的示例，这有点不必要，并且由于您`secret`是一种静态变量，因此对我从实例方法访问它没有多大意义。更短：

```
function Animal(type) {
    this.type = type;
}
Animal.prototype.some_property = 123;
Animal.getSecret = function() {
    return "My Secret";
}; 
```

# resources - apache zookeeper 询问服务器内存

> ID：15625459
> 
> 赞同：0
> 
> 时间：2013-03-25T21:49:47.000
> 
> 标签：resources, apache-zookeeper, solrcloud

是否可以使用 zookeeper 来监控服务器资源或检索代表可用总 RAM 的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-15T14:41:31.030

**Apache Zookeeper**不是监控工具，它是用于配置共享、命名和同步的分布式管理器。

这里很好地描述了 Apache Zookeeper 是什么以及如何使用它 - [https://stackoverflow.com/a/8864303/2453586](https://stackoverflow.com/a/8864303/2453586)

您可以制定一个解决方法并编写一个脚本，该脚本将在每台本地机器上每 N 分钟/秒检查一次可用 RAM 的数量（通过**cron**或类似一个**deamonized 进程**），并将此值写入 Zookeeper **znode**，如**zookeeper_host:2181/ram/主机 1/可用**。但这不是一个好主意。

更有可能使用 Zabbix、Nagios 或 Gangila 等特定工具进行内存监控。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:45:06.067

您可能正在寻找类似[jmx](http://wiki.gxtechnical.com/commwiki/servlet/hwiki?Monitoring%20Memory%20Management%20with%20JMX,)的东西。

# c# - C#：当字符串只有一个时输出双回车

> ID：15625462
> 
> 赞同：1
> 
> 时间：2013-03-25T21:49:52.890
> 
> 标签：c#, oracle, sqlplus, carriage-return

我有一个奇怪的问题，人们认为很容易解决。基本上我正在创建一个这样的字符串：

```
string temp = "SET pagesize 50000;" + Environment.NewLine + "SET linesize 120;" + Environment.NewLine + sQuery.Text + Environment.NewLine + resultsQuery; 
```

sQuery 是一条更新语句，reslults 查询显示结果的细分。这是结果查询。更新查询的格式类似。

```
resultsQuery = "SELECT project_no, contact_date, SUM(CASE WHEN control_group = 'N' THEN 1 ELSE 0 END) \"CG = N\", SUM(CASE WHEN control_group = 'Y' THEN 1 ELSE 0 END) \"CG = Y\"" + "\r\n" +
                        "FROM OIC_TRACK_TEMP" + "\r\n" +
                        "WHERE job_no = " + tbJobNo.Text.Trim() + "\r\n" +
                        "AND cpm_customer_code = '" + lbClientID.Text.ToUpper() + "'" + "\r\n" +
                        "GROUP BY project_no, contact_date" + "\r\n" +
                        "ORDER BY contact_date, project_no;"; 
```

然后我将查询写入命令行：

```
updatessh.Write(temp); 
```

命令行中的输出如下所示：

```
SET pagesize 50000;

SET linesize 120;

UPDATE TABLE_NAME

SET PROJECT_NO = 'test'
.
. 
```

我怎样才能摆脱那里的双回车？甲骨文看到它们就会呕吐。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:54:04.127

根据我的经验，SQL 引擎将两者都`\r`视为`\n`换行符，因此当将它们与 Environment.Newline 或在 Windows 中包含时`\r\n`，您会同时获得这两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:54:12.420

尝试在您的 sql 查询中使用 \n 而不是 \r\n。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:54:34.387

您可以在最终字符串中用 RegEx 替换双回车，或者在添加查询之前将其删除。但是，如果您总是拥有它们-只需删除（不要添加）+ Environment NewLine

# ruby-on-rails-3 - nil:NilClass 的未定义方法“downcase”

> ID：15625467
> 
> 赞同：1
> 
> 时间：2013-03-25T21:50:06.440
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

```
describe GameSystem::Client do

  def client
    GameSystem::Client.new(signature_method: 'HMAC-SHA1', oauth_key: 'kk', oauth_secret: 'bb', oauth_access_token_url: 'https:://localhost')
  end

  before :each do
    WebMock.reset!       
  end

  describe 'response' do

    context 'wrong path' do
      it 'raises JSON::ParserError on invalid return value' do
        stub_request(:get,"https://games.com/game_id/invalid_id").to_return(:status => 200, :body => 'invalid json', :headers => {})
        Rails.logger.info "#{client.games_by_id("invalid_id")}"
      end
    end
  end

end 
```

谁能让我知道我做错了什么或者我可以做些什么不同的事情？

它基本上会在该行抛出此错误

`@access_token = @consumer.get_access_token(nil)`在我的客户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T07:59:35.923

我意识到这个问题来自很久以前，但我只是在测试套件中遇到了这个问题。听起来很熟悉。

我的错误是

```
Failure/Error: get :index
  ActionView::Template::Error:
    undefined method `downcase' for nil:NilClass 
```

事实证明，我正在使用`mobile-fu`并且我`is_mobile_device?`没有存根也没有存根`mobile_device`。一路走来，`mobile-fu`试图将设备名称小写，即`nil`. 通过为 s 添加一个存根`mobile_device`，事情就解决了。在规范的前块中，我添加了：

```
controller.stub(:is_mobile_device? => true, :mobile_device => 'iphone') 
```

如果您不使用 mobile-fu，您可能会遇到不同的问题。我能够使用 和 跟踪实际`pry`问题`pry-debugger`。绝对值得研究的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:55:55.643

如果您可以更具体地说明您正在尝试做什么，那就太好了。

该错误是不言自明的。你得到`downcase for nil:NilClass`是因为你试图调用`downcase`一个 nil 对象......提供更多信息，我们将能够提供更好的帮助。

# linker - Libav 链接错误：未定义的引用

> ID：15625468
> 
> 赞同：13
> 
> 时间：2013-03-25T21:50:11.900
> 
> 标签：linker, ffmpeg, g++, libav

这是我的问题：

*   我从源代码（版本 1.2）构建了 ffmpeg，libav* 库位于 /usr/local/lib 中，它们是静态的
*   我正在编译一个 ns3 (www.nsnam.org) 模块，所以我对链接器的唯一控制是通过 env 变量 LINKFLAGS
*   在源代码中，标头位于“extern C”块中，因此它不是通常的 g++ 名称修饰
*   我设置 LINKFLAGS="-I/usr/local/include/libavformat -I/usr/local/include/libavcodec -I/usr/local/include/libavutil -L/usr/local/lib -lavformat -lavcodec -lavutil" ，并且链接器似乎找不到我调用的任何 libav* 函数（我得到很多“未定义的引用”，然后是“collect2：错误：ld 返回状态 1”

谁能帮我？谢谢...

编辑：这里有一些未定义的参考消息：

```
 ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_guess_format'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_read_frame'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `avformat_write_header'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_interleaved_write_frame'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_find_stream_info'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_register_all'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_init_packet'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `avformat_alloc_context'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `av_dump_format'
    ./libns3.14.1-qoe-monitor-debug.so: undefined reference to `avio_close' 
```

edit2：这是我在“构建失败”后收到的消息：

```
-> task in 'scratch-simulator' failed (exit status 1): 
{task 53952272: cxxprogram scratch-simulator.cc.1.o -> scratch-simulator}
['/usr/bin/g++', '-I/usr/local/include/libavcodec', '-I/usr/local/include/libavformat/',
 '-I/usr/local/include/libavutil/', '-L/usr/local/lib', '-I/usr/local
/include/libavcodec', '-I/usr/local/include/libavformat/', '-I/usr/local/include
/libavutil/', '-L/usr/local/lib', '-pthread', '-pthread', '-Wl,-z,relro', 
'scratch/scratch-simulator.cc.1.o', '-o', '/home/fede/Thesis/ns-allinone-3.14.1
/ns-3.14.1/build/scratch/scratch-simulator', '-Wl,-Bstatic', '-Wl,-Bdynamic', 
'-Wl,--no-as-needed', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.',
 '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.',
 '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', '-L.', 
'-L.', '-L.', '-L.', '-L.', '-L.', '-L/usr/lib', '-lns3.14.1-test-debug', '-lns3.14.1-
csma-layout-debug', '-lns3.14.1-point-to-point-layout-debug', '-lns3.14.1-netanim-
debug', '-lns3.14.1-lte-debug', '-lns3.14.1-spectrum-debug', '-lns3.14.1-antenna-
debug', '-lns3.14.1-aodv-debug', '-lns3.14.1-dsdv-debug', '-lns3.14.1-dsr-debug', 
'-lns3.14.1-mesh-debug', '-lns3.14.1-olsr-debug', '-lns3.14.1-csma-debug', '-lns3.14.1-
wimax-debug', '-lns3.14.1-applications-debug', '-lns3.14.1-virtual-net-device-debug', 
'-lns3.14.1-uan-debug', '-lns3.14.1-energy-debug', '-lns3.14.1-flow-monitor-debug', 
'-lns3.14.1-nix-vector-routing-debug', '-lns3.14.1-tap-bridge-debug', '-lns3.14.1-
visualizer-debug', '-lns3.14.1-internet-debug', '-lns3.14.1-bridge-debug', '-lns3.14.1-
point-to-point-debug', '-lns3.14.1-mpi-debug', '-lns3.14.1-wifi-debug', '-lns3.14.1-
buildings-debug', '-lns3.14.1-propagation-debug', '-lns3.14.1-mobility-debug', 
'-lns3.14.1-config-store-debug', '-lns3.14.1-tools-debug', '-lns3.14.1-stats-debug',
 '-lns3.14.1-emu-debug', '-lns3.14.1-topology-read-debug', '-lns3.14.1-network-debug', 
'-lns3.14.1-qoe-monitor-debug', '-lns3.14.1-core-debug', '-lrt', '-lgsl', 
'-lgslcblas', '-lm', '-ldl', '-lgtk-x11-2.0', '-lgdk-x11-2.0', '-latk-1.0', 
'-lgio-2.0', '-lpangoft2-1.0', '-lpangocairo-1.0', '-lgdk_pixbuf-2.0', '-lcairo', 
'-lpango-1.0', '-lfreetype', '-lfontconfig', '-lgobject-2.0', '-lglib-2.0', '-lxml2', 
'-lpython2.7'] 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-22T10:33:58.070

库是 C。当编译为 C++ 时，库头文件不包含[外部“C” 。](https://stackoverflow.com/q/1041866/616460)在您的 C++ 源代码中执行此操作：

```
extern "C" { 
#include <libavcodec/avcodec.h> 
#include <libavformat/avformat.h>
} 
```

或者，更一般地说，对于混合 C 和 C++ 源代码：

```
#ifdef __cplusplus
extern "C" {
#endif
#include <libavcodec/avcodec.h> 
#include <libavformat/avformat.h>
#ifdef __cplusplus 
}
#endif 
```

你应该没事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T03:16:51.317

I had this problem with `av_find_stream_info` and the problem was this function was deprecated. The problem was I had two ffmpeg installation on the box, and it was reading header from one installation and was using libraries from different installation.

After removing system default library, the problem resolved.

UPDATE: For Ubuntu I did following:

```
$ sudo dpkg -r libavcodec53
$ sudo dpkg -r libavformat53
$ sudo dpkg -r libavutil51
$ sudo dpkg -r libswscale2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T17:34:36.250

刚刚在我自己的搜索中遇到了这个问题。

在 waf 构建系统中，您应该使用 STLIB 和 STLIBPATH 来表示静态库名称和路径，而不是使用 LINKFLAGS。请注意，您应该将 STLIB 设置为静态库名称列表，以便在没有前缀或扩展名的情况下使用。

在 wscript 文件中，添加

```
conf.env.append_value("STLIBPATH", ["/usr/local/lib"])
conf.env.append_value("STLIB", ["av*,av**"]) 
```

# css - 使用 nth-child 创建检查模式

> ID：15625474
> 
> 赞同：0
> 
> 时间：2013-03-25T21:50:41.637
> 
> 标签：css, css-selectors

我正在尝试使用 制作棋盘格图案`nth-child`，但它没有按我预期的方式工作。

`p`在下面的示例中，我想在 的相对侧设置每隔一个`div`以创建棋盘格图案。`p`设置为`width:50%;`，设置`div`为`width:100%`。

我设置了一个[jsfiddle](http://jsfiddle.net/L9ng7/)来演示：

HTML

```
<div id='check'>
  <p>Odd</p>
</div>

<div id='check'>
  <p>Even</p>
</div> 
```

CSS

```
#check { 
  float:left; 
  width: 100%;
}
#check p {  
  width: 50%;
  background: #DDD;
}

#check p:nth-child(odd) {
  float:right;
} 
```

有人可以让我看看如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:04:40.253

您需要将所有`p`元素放在一个 中`div`，因为`nth-child`它基于父容器。[这是一个修改过的小提琴。](http://jsfiddle.net/L9ng7/1/). 它使用以下代码：

**HTML**

```
<div id ='check'>
    <p>Odd</p>
    <p>Even</p>
    <p>Odd</p>
    <p>Even</p>
</div> 
```

**CSS**

```
#check { 
    float:left; 
    width: 100%;
}
#check p {  
    width: 50%;
    background: #DDD;
    clear:both;
}

#check p:nth-child(odd) {
    float:right;
}

#check p:nth-child(even) {
    float:left
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:59:25.813

不能有 2 个元素使用相同的 id。我相信你想切换到使用类。

创建了一个小提琴来演示[http://jsfiddle.net/wE6e4/](http://jsfiddle.net/wE6e4/)

```
#checkerboard {
    width: 500px;
}

.check { 
    float:left; 
    width: 100px;
    height: 100px;
}

.check:nth-child(odd) {
    background: #DDD;
}

.check:nth-child(even) {
    background: #fff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:06:36.420

首先，您多次使用 ID - ID 应该是唯一的。除此之外，该行 `#check p:nth-child(odd)`意味着您要为 的每个奇数`p`孩子设置给定的规则`#check`，这不是您想要的。你想要做每一个奇怪的事情`.check`（我冒昧地将 ID 更改为一个类）。所以你应该把它们放在一个容器里，然后说：

```
#cont .check:nth-child(odd) {
    float:right;
} 
```

这是小提琴：http:
[//jsfiddle.net/Wbnks/](http://jsfiddle.net/Wbnks/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T22:18:03.070

If you're trying to minimize your CSS, you can try something like this:

HTML:

```
<div class="checkerboard">
    <p>1</p>
    <p>2</p>
    <p>3</p>
    <p>4</p>
    <p>5</p>
    <p>6</p>
    <p>7</p>
    <p>8</p>
    <p>9</p>
    <p>10</p>
</div> 
```

CSS:

```
.checkerboard p {
    float: left;
    width: 50%;
}

.checkerboard p:nth-child(4n-2), .checkerboard p:nth-child(4n-1) {
    background-color: #999;
} 
```

[http://jsfiddle.net/L9ng7/5/](http://jsfiddle.net/L9ng7/5/)

# mysql - 从两个表中计数，并按存在的SQL数排序

> ID：15625477
> 
> 赞同：1
> 
> 时间：2013-03-25T21:50:48.870
> 
> 标签：mysql, count, sql-order-by, mysql-workbench, jointable

我试图列出一个包含超过三次的数字的表格。如您所见，我是 SQL 新手。我对 SQL 的语法和可能性有点不确定。

我试过这个：

```
SELECT tabel1.nr, count(tabel2.opp)
FROM tabel1
JOIN tabel2 on tabel2.opp = tabel1.opp
WHERE tabel2.opp > 3
ORDER BY tabel2.opp 
```

这是我试图弄清楚的想法：

```
SELECT COUNT(tabel1.key = tabel2.key) as numbers
FROM table1
ORDER BY numbers > 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:53:08.777

尝试这个

```
SELECT tabel1.nr, count(tabel2.opp)
FROM tabel1
JOIN tabel2 on tabel2.opp = tabel1.opp
GROUP BY tabel1.nr
HAVING count(tabel2.opp) > 3
ORDER BY tabel2.opp 
```

# c# - 组合框和 System.Data.DataRowView

> ID：15625479
> 
> 赞同：1
> 
> 时间：2013-03-25T21:50:54.153
> 
> 标签：c#, database, sql-server-ce

我有一个在打开主窗体时调用的方法

```
private void populateComboBoxes()
{
    SqlCeDataAdapter breakfastAdapter = new SqlCeDataAdapter("SELECT DISTINCT recipeName FROM Recipe WHERE Category = 'breakfast' ", databaseConnection);
    SqlCeDataAdapter lunchAdapter = new SqlCeDataAdapter("SELECT DISTINCT recipeName FROM Recipe WHERE Category = 'lunch' ", databaseConnection);
    breakfastAdapter.Fill(breakfastDS, "Recipe");
    lunchAdapter.Fill(lunchDS, "Recipe");
    cmbBox1.DisplayMember = "recipeName";
    cmbBox1.ValueMember = "recipeName";
    cmbBox1.DataSource = breakfastDS.Tables["Recipe"];
    cmbBox2.DataSource = lunchDS.Tables["Recipe"];            
    cmbBox2.DisplayMember = "recipeName";
    cmbBox2.ValueMember = "recipeName";                      
} 
```

它本质上是根据 SELECT 语句填充两个组合框。一旦此方法命中`cmbBox1.DataSource = breakfastDS.Tables["Recipe"]`，它就会停止执行并移至此方法：

```
private void cmbBox1_SelectedIndexChanged(object sender, EventArgs e)
{         
    rtbPicture.Visible = false;
    string qry = "";
    qry = "SELECT DISTINCT ingredientName FROM Recipe WHERE recipeName = " + cmbBox1.SelectedItem.ToString();

    SqlCeCommand com = new SqlCeCommand(qry, databaseConnection);
    com.CommandText = qry;
    rtbRecipe.Text = com.ExecuteScalar().ToString();
} 
```

此方法应该执行 select 语句并将该信息放入 中`richtextbox`，但由于某种原因`cmbBox1`未设置。据我了解，第一个`combobox`已经在前面的方法中设置了 display 和 value 成员。但是，当我到达`cmbBox1.SelectedItem.ToString()`它时，它会返回`System.Data.DataRowView`而不是`combobox`. 我不确定为什么它给我`System.Data.DataRowView`而不是字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:55:37.350

您正在使用`cmbBox1.SelectedItem.ToString()`. 您可能应该`SelectedValue`改用：

```
qry = "SELECT DISTINCT ingredientName FROM Recipe WHERE recipeName = " + cmbBox1.SelectedValue.ToString(); 
```

`SelectedItem`获取实际`ComboBox`项目（在本例中为 a `DataRowView`），而`SelectedValue`获取您指定为 的属性的`ValueMember`值`ComboBox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T13:18:14.843

cmbBox2.DisplayMember = "配方名称";

cmbBox2.DataSource = lunchDS.Tables["食谱"];

cmbBox2.ValueMember = "配方名称";

# paypal - 使用 PayPal 的 PayFlow Pro 网关 - 如何获取批次 ID？

> ID：15625486
> 
> 赞同：0
> 
> 时间：2013-03-25T21:51:29.913
> 
> 标签：paypal

开发人员参考和指南描述了许多名称-值对，但对于事务的批次 ID 显然没有。为什么我不知道为什么会这样，但我使用了 Curl 调用的简单过程，如网站上的示例代码所示。

如何通过对 API 的一些精心使用来获得批次 ID？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:55:06.020

假设它们不是基于主机的，批处理 ID 只会在交易在晚上结束时批处理到您的处理器时显示。但是，对于测试事务，它们只是测试。永远不会被批处理到处理器，并且将保持在 6 的跨状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T13:24:39.817

交易结算后分配批次 ID。这可能是第二天或两天后。如果您的处理器/库速度较慢，甚至三个。

Payflow Pro 有一个单独的 API 接口，称为报告 API。有一个称为结算报告的报告返回具有批次 ID 的所有交易。还有一个名为 Batch Report 的报告，它返回包含总计和日期的批次摘要。

以下是报告文档：[https ://cms.paypal.com/cms_content/CA/en_US/files/developer/PP_Reporting_Guide.pdf](https://cms.paypal.com/cms_content/CA/en_US/files/developer/PP_Reporting_Guide.pdf)

我为 Ruby 编写了一个使用 Reporting API 的 Payflow 库。您还可以在那里查看它是如何工作的。[https://github.com/bypasslane/payflow-ruby](https://github.com/bypasslane/payflow-ruby)

# mysql - 删除列中除前 7 个值之外的值

> ID：15625487
> 
> 赞同：0
> 
> 时间：2013-03-25T21:51:30.447
> 
> 标签：mysql

尝试删除除前 7 列之外的列中的值

列组合值=“0000396Wm F 和格特鲁德 F 琼斯 A/K/A 琼斯纪念医院的纪念医院”

我基本上只需要前 7 个值 = 0000396

谁能指导我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:54:00.273

您可以使用[`LEFT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)字符串函数返回最左边的 7 个字符：

```
UPDATE table SET column = LEFT(column, 7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:59:18.700

假设我正确理解了这个问题，您可以

`UPDATE table SET column = SUBSTRING(column FROM 1 FOR 7);`

# ruby-on-rails - 弹性IP混淆

> ID：15625493
> 
> 赞同：0
> 
> 时间：2013-03-25T21:51:44.703
> 
> 标签：ruby-on-rails, web-services, amazon-web-services, amazon-ec2

我已经使用我的 Rails 应用程序设置了一个 Amazon EC2 实例 - [http://ec2-54-235-85-12.compute-1.amazonaws.com/](http://ec2-54-235-85-12.compute-1.amazonaws.com/) - 我正在关联一个弹性 IP - 54.235.85.12 -有了它（我正在连接一个需要静态 IP 的 API，因为他们可以将该 IP 列入白名单）。

链接正在工作并指向应用程序，但这是我检查 IP 地址时得到的结果：

```
dig +short http://ec2-54-235-85-12.compute-1.amazonaws.com 
#67.63.55.3 
```

但是如果我省略了 http://，那么我会得到正确的 IP：

```
dig +short ec2-54-235-85-12.compute-1.amazonaws.com
#54.235.85.12 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:17:45.910

`dig`是一个DNS工具，调用它时指定“http://”是没有意义的。错误结果可能是由于尝试解析错误输入时出现的一些错误。我不是很了解这里的问题吗？

# combobox - ExtJS 惰性组合初始值

> ID：15625495
> 
> 赞同：1
> 
> 时间：2013-03-25T21:51:54.843
> 
> 标签：combobox, extjs4, initialization, lazy-loading, paging

我有 ExtJs 形式的延迟加载组合。表单数据通过 form.loadRecord() 从网格存储中加载到表单中。惰性组合项是成对`'value' => 'DisplayedName'`的，当然，网格存储中的每条记录在记录加载形成后已经有自己`'valuexyz'`的要设置为组合。**问题是**，当记录加载到表单时，组合中还没有项目（组合是惰性的，只有在单击它时才会加载它的项目）所以组合无法显示正确`'DisplayNameXyz'`对应`'valuexyz'`的加载记录。即使组合被加载，它也会被分页（每页 25 个项目），因此组合的记录很可能`'valuexyz'`不会包含在加载的组合项目的第一页中。组合保持为空。

有解决方案吗？

提前致谢！

*我找到[了这个答案](https://stackoverflow.com/questions/7805164/extjs-combo-initial-value-after-loadrecord-before-loading-store)，但它很简短，我不确定它是否正确以及如何实现它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:55:53.637

如果您需要组合框存储中存在可能由于分页而尚未加载的数据，那么您必须摆脱分页。

# python - 如何在使用 NLTK 时确定语义层次/关系？

> ID：15625509
> 
> 赞同：0
> 
> 时间：2013-03-25T21:53:09.873
> 
> 标签：python, semantics, nltk, wordnet

我想用 NLTK 和 wordnet 来理解两个词之间的语义关系。就像我输入“员工”和“服务员”一样，它返回的内容表明员工比服务员更一般。或者对于“employee”和“worker”，它返回相等。有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T04:08:20.490

首先，您必须解决将单词放入引理然后放入同义词集的问题，即如何从一个单词中识别同义词集？

```
word => lemma => lemma.pos.sense => synset    
Waiters => waiter => 'waiter.n.01' => wn.Synset('waiter.n.01') 
```

所以假设您已经处理了上述问题并得出了 的最右边的表示`waiter`，那么您可以继续比较同义词集。请注意，一个词可以有很多同义词

```
from nltk.corpus import wordnet as wn
waiter = wn.Synset('waiter.n.01')
employee = wn.Synset('employee.n.01')

all_hyponyms_of_waiter = list(set([w.replace("_"," ") for s in waiter.closure(lambda s:s.hyponyms()) for w in s.lemma_names]))
all_hyponyms_of_employee = list(set([w.replace("_"," ") for s in employee.closure(lambda s:s.hyponyms()) for w in s.lemma_names]))

if 'waiter' in all_hyponyms_of_employee:
  print 'employee more general than waiter'
elif 'employee' in all_hyponyms_of_waiter:
  print 'waiter more general than employee'
else:
  print "The SUMO ontology used in wordnet just doesn't have employee or waiter under the same tree" 
```

# r - 散点图矩阵上下面板数据不同

> ID：15625510
> 
> 赞同：6
> 
> 时间：2013-03-25T21:53:14.050
> 
> 标签：r, plot, dataframe

我想在[散点图矩阵](http://stat.ethz.ch/R-manual/R-patched/library/graphics/html/pairs.html)中绘制两个不同的数据集。

我知道我可以使用`upper.panel`和`lower.panel`区分*绘图功能*。但是，我没有成功地将我的数据以合适的格式来利用这一点。

假设我有两个组织（“大脑”和“心脏”）和四个条件（1-4）。现在我可以使用 eg`pairs(data$heart)`来获取其中一个数据集的散点图矩阵。假设我有以下数据：

```
conditions <- 1 : 4
noise <- rnorm(100)
data <- list(brain = sapply(conditions, function (x) noise + 0.1 * rnorm(100)),
             heart = sapply(conditions, function (x) noise + 0.3 * rnorm(100))) 
```

如何将其转换为一种格式，以便`pairs(data, …)`在对角线上方绘制一个数据集，在对角线下方绘制一个数据集，如下所示（绿色 = 大脑，紫色 = 心脏）：

![截屏](../Images/1cc7dda0997dee1bae0cd904ae937749.png)

只是使用

```
pairs(data, upper.panel = something, lower.panel = somethingElse) 
```

不起作用，因为这将在不考虑不同组织的情况下绘制所有条件与所有条件 - 它基本上忽略列表，并且在重新排序层次结构时相同（即具有`data = (A=list(brain=…, heart=…), B=list(brain=…, heart=…), …)`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T22:29:34.073

这是我似乎能够通过传递参数做的最好的事情：

```
foo.upper <- function(x,y,ind.upper,col.upper,ind.lower,col.lower,...){
    points(x[ind.upper],y[ind.upper],col = col.upper,...)
}

foo.lower <- function(x,y,ind.lower,col.lower,ind.upper,col.upper,...){
    points(x[ind.lower],y[ind.lower],col = col.lower,...)
}

pairs(dat[,-5],
        lower.panel = foo.lower,
        upper.panel = foo.upper,
        ind.upper = dat$type == 'brain',
        ind.lower = dat$type == 'heart',
        col.upper = 'blue',
        col.lower = 'red') 
```

请注意，每个面板都需要所有参数。`...`是个残忍的情妇。如果您在每个函数中仅包含特定于面板的参数，它似乎可以工作，但是您会从 R 中得到很多警告，试图将这些参数传递给常规绘图函数，显然它们不会存在。

这是我的第一次快速尝试，但看起来很难看：

```
dat <- as.data.frame(do.call(rbind,data))
dat$type <- rep(c('brain','heart'),each = 100)

foo.upper <- function(x,y,...){
    points(x[dat$type == 'brain'],y[dat$type == 'brain'],col = 'red',...)
}

foo.lower <- function(x,y,...){
    points(x[dat$type == 'heart'],y[dat$type == 'heart'],col = 'blue',...)
}

pairs(dat[,-5],lower.panel = foo.lower,upper.panel = foo.upper) 
```

![在此处输入图像描述](../Images/ba96dc320acb345dd121abae5383ceb5.png)

我在第二个版本中以一种有点丑陋的方式滥用了 R 的范围。（当然，您可以在**lattice**中更干净地执行此操作，但您可能知道这一点。）

我能想到的唯一其他选择是使用 设计您自己的散点图矩阵`layout`，但这可能需要相当多的工作。

**格子编辑**

这至少是一个格子解决方案的开始。它*应该*更好地处理不同的 x,y 轴范围，但我还没有测试过。

```
dat <- do.call(rbind,data)
dat <- as.data.frame(dat)
dat$grp <- rep(letters[1:2],each = 100)

plower <- function(x,y,grp,...){
    panel.xyplot(x[grp == 'a'],y[grp == 'a'],col = 'red',...)
}

pupper <- function(x,y,grp,...){
    panel.xyplot(x[grp == 'b'],y[grp == 'b'],...)
}

splom(~dat[,1:4],
        data = dat,
        lower.panel = plower,
        upper.panel = pupper,
        grp = dat$grp) 
```

# r - 比较两个数据帧并在单个列的匹配值中打印特定行

> ID：15625511
> 
> 赞同：0
> 
> 时间：2013-03-25T21:53:15.950
> 
> 标签：r

我对 R 完全陌生，希望能得到一些帮助！我正在尝试比较两个大型数据框（仅前几行）：

```
d1

LOC.ID
LOC_O1
LOC_O34
LOC_O36
LOC_O78
LOC_O234
LOC_O235
LOC_O2353.1 
```

...

```
d2

locus.V.6   V6..model   start   end
LOC_O1      LOC_O1.1    1903    9817
LOC_O234    LOC_O234.1  1903    9817
LOC_O24     LOC_O24.2   10218   11435
LOC_O459    LOC_O459.1  11648   14915
LOC_O34     LOC_O34.2   15292   19323
LOC_O44     LOC_O44.1   15292   1932 
```

无论如何，我想将 d1 的第一列中的值与 d2 的第一列和第二列中的值进行比较，然后如果 d2 的第一列或第二列中存在匹配项，则打印该行中的所有 d2 数据.

我还不知道如何使用 if...then 语句或循环，或者这应该相对简单。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:29:39.480

`data.tables`与 一起使用`keys`。

> 它以简短灵活的语法提供快速子集、快速分组、快速更新、快速排序连接和列表列，以加快开发速度。它受到 R 中 A[B] 语法的启发，其中 A 是矩阵，B 是 2 列矩阵

假设您要匹配`LOC.ID`和`locus.V.6`列

```
library(data.table)
d1 <- data.table(d1, key = 'LOC.ID')
d2 <- data.table(d2, key = 'locus.V.6')
# nomatch = 0 means non-matches will not be returned
# mult = 'first' or 'last' may also be useful, if you only want these
d2[d1, nomatch=0]

   locus.V.6  V6..model start   end
1:    LOC_O1   LOC_O1.1  1903  9817
2:  LOC_O234 LOC_O234.1  1903  9817
3:   LOC_O34  LOC_O34.2 15292 19323

# the default value for `nomatch` is NA (just like when you use the function match)
# this now has NA values for non-matching rows
d2[d1] 
     locus.V.6  V6..model start   end
1:      LOC_O1   LOC_O1.1  1903  9817
2:    LOC_O234 LOC_O234.1  1903  9817
3:    LOC_O235         NA    NA    NA
4: LOC_O2353.1         NA    NA    NA
5:     LOC_O34  LOC_O34.2 15292 19323
6:     LOC_O36         NA    NA    NA
7:     LOC_O78         NA    NA    NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:01:05.810

你可以试试这个

```
match <- d2[,1] %in% d1[,1] | d2[,2] %in% d1[,1]
d2[index,] 
```

`d1[,x]`是`x`dataframe 的第 - 列`d1`。`x%in%y`检查 in 中的哪些元素`x`也在`y`. 因此，首先我们检查 in 中的哪些行在`d1[,1]`any`d2[,1]`或 in 中`d2[,2]`，然后显示这些行。

# ios - 有 JSON 数据，想在 IOS6 应用程序中显示部分

> ID：15625518
> 
> 赞同：1
> 
> 时间：2013-03-25T21:53:40.397
> 
> 标签：ios, objective-c, google-calendar-api

我已经从共享的谷歌日历 i IOS 中检索了我的事件，并在表格视图中显示它们。至于现在，它们只是简单地以事件标题作为标题，事件时间作为副标题来显示。我想改用日期（事件时间）作为部分标题，以便例如 3 月 31 日的所有事件都显示在一个组中，时间作为“正确的细节”

我的代码如下所示：

```
@interface MasterViewController () {
    NSArray *events;
}
@end

@implementation MasterViewController

-(void)viewDidAppear:(BOOL)animated
{
    //show loader view
    //[HUD showUIBlockingIndicatorWithText:@"Fetching JSON"];

    //make HTTP call
    NSString* searchCall = [NSString stringWithFormat:@"http://www.google.com/calendar/feeds/kao1d80fd2u5kh7268caop11o4%%40group.calendar.google.com/public/full?alt=json"];

    [JSONHTTPClient getJSONFromURLWithString: searchCall
                                  completion:^(NSDictionary *json, JSONModelError *err) {

                                      //got JSON back
                                      NSLog(@"Got JSON from web: %@", json);

                                      if (err) {
                                          [[[UIAlertView alloc] initWithTitle:@"Error"
                                                                      message:[err localizedDescription]
                                                                     delegate:nil
                                                            cancelButtonTitle:@"Close"
                                                            otherButtonTitles: nil] show];
                                          return;
                                      }

                                      //initialize the models
                                      events = [CalendarModel arrayOfModelsFromDictionaries:
                                                json[@"feed"][@"entry"]
                                                ];

                                      if (events) NSLog(@"Loaded successfully models");

                                      //show the videos
                                      [self.tableView reloadData];

                                  }];

}
;

#pragma mark - table methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return events.count;
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    CalendarModel* event = events[indexPath.row];

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
    NSDate *gmtDate = [formatter dateFromString: [[event.time objectAtIndex:0] startTime]];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@",
                           event.title
                           ];
    cell.detailTextLabel.text = [formatter stringFromDate: gmtDate];

    return cell;
}

@end 
```

我在网上找到了这段代码，但我相信他没有以 JSON 格式获取数据，而是来自 iPhone 日历。

```
@interface MasterViewController ()

@property (strong, nonatomic) NSMutableDictionary *sections;
@property (strong, nonatomic) NSArray *sortedDays;
@property (strong, nonatomic) NSDateFormatter *sectionDateFormatter;
@property (strong, nonatomic) NSDateFormatter *cellDateFormatter;

- (NSDate *)dateAtBeginningOfDayForDate:(NSDate *)inputDate;
- (NSDate *)dateByAddingYears:(NSInteger)numberOfYears toDate:(NSDate *)inputDate;

@end

@implementation MasterViewController

@synthesize sections;
@synthesize sortedDays;
@synthesize sectionDateFormatter;
@synthesize cellDateFormatter;

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDate *now = [NSDate date];
    NSDate *startDate = [self dateAtBeginningOfDayForDate:now];
    NSDate *endDate = [self dateByAddingYears:1 toDate:startDate];

    EKEventStore *eventStore = [[EKEventStore alloc] init];
    NSPredicate *searchPredicate = [eventStore predicateForEventsWithStartDate:startDate endDate:endDate calendars:nil];
    NSArray *events = [eventStore eventsMatchingPredicate:searchPredicate];

    self.sections = [NSMutableDictionary dictionary];
    for (EKEvent *event in events) 
    {
        // Reduce event start date to date components (year, month, day)
        NSDate *dateRepresentingThisDay = [self dateAtBeginningOfDayForDate:event.startDate];

        // If we don't yet have an array to hold the events for this day, create one
        NSMutableArray *eventsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
        if (eventsOnThisDay == nil) {
            eventsOnThisDay = [NSMutableArray array];

            // Use the reduced date as dictionary key to later retrieve the event list this day
            [self.sections setObject:eventsOnThisDay forKey:dateRepresentingThisDay];
        }

        // Add the event to the list for this day
        [eventsOnThisDay addObject:event];
    }

    // Create a sorted list of days
    NSArray *unsortedDays = [self.sections allKeys];
    self.sortedDays = [unsortedDays sortedArrayUsingSelector:@selector(compare:)];

    self.sectionDateFormatter = [[NSDateFormatter alloc] init];
    [self.sectionDateFormatter setDateStyle:NSDateFormatterLongStyle];
    [self.sectionDateFormatter setTimeStyle:NSDateFormatterNoStyle];

    self.cellDateFormatter = [[NSDateFormatter alloc] init];
    [self.cellDateFormatter setDateStyle:NSDateFormatterNoStyle];
    [self.cellDateFormatter setTimeStyle:NSDateFormatterShortStyle];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - Date Calculations

- (NSDate *)dateAtBeginningOfDayForDate:(NSDate *)inputDate
{
    // Use the user's current calendar and time zone
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSTimeZone *timeZone = [NSTimeZone systemTimeZone];
    [calendar setTimeZone:timeZone];

    // Selectively convert the date components (year, month, day) of the input date
    NSDateComponents *dateComps = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:inputDate];

    // Set the time components manually
    [dateComps setHour:0];
    [dateComps setMinute:0];
    [dateComps setSecond:0];

    // Convert back       
    NSDate *beginningOfDay = [calendar dateFromComponents:dateComps];
    return beginningOfDay;
}

- (NSDate *)dateByAddingYears:(NSInteger)numberOfYears toDate:(NSDate *)inputDate
{
    // Use the user's current calendar
    NSCalendar *calendar = [NSCalendar currentCalendar];

    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setYear:numberOfYears];

    NSDate *newDate = [calendar dateByAddingComponents:dateComps toDate:inputDate options:0];
    return newDate;
}

#pragma mark - UITableViewDataSource methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.sections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSDate *dateRepresentingThisDay = [self.sortedDays objectAtIndex:section];
    NSArray *eventsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
    return [eventsOnThisDay count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDate *dateRepresentingThisDay = [self.sortedDays objectAtIndex:section];
    return [self.sectionDateFormatter stringFromDate:dateRepresentingThisDay];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *reuseIdentifier = @"EventTitleCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];

    NSDate *dateRepresentingThisDay = [self.sortedDays objectAtIndex:indexPath.section];
    NSArray *eventsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
    EKEvent *event = [eventsOnThisDay objectAtIndex:indexPath.row];

    cell.textLabel.text = event.title;
    if (event.allDay) {
        cell.detailTextLabel.text = @"all day";
    } else {
        cell.detailTextLabel.text = [self.cellDateFormatter stringFromDate:event.startDate];
    }
    return cell;
}

@end 
```

有没有办法让我使用我的 json event.startdate 作为部分标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:47:07.740

就个人而言，我会忽略您第二次发布的代码，因为它不是您想要做的。

您设置标题和副标题的代码部分是这两行： cell.textLabel.text = [NSString stringWithFormat:@"%@",event.title]; cell.detailTextLabel.text = [格式化字符串FromDate：gmtDate]；

因此，如果您希望标题为日期，只需将其放置为 cell.textLabel.text 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:16:11.983

所以如果你想做部分。

确保节数大于 1。

然后你可能想看看这些表方法。只需根据您的具体情况和定制需求，您可以相应地进行更改。

```
(NSString*) tableView:(UITableView*)tableView titleForHeaderInSection:(NSInteger)section{
   }

(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section{
 }

(UIView*)tableView:(UITableView*)table viewForHeaderInSection:(NsInteger)section{
} 
```

我希望这有帮助。我通常会有一个例子，我只是目前没有最多的可用时间，但如果需要，我可以提供一个。

小心 ：）

# php - 将 javascript 私钥转换为 PHP 中可用的私钥

> ID：15625529
> 
> 赞同：1
> 
> 时间：2013-03-25T21:54:06.810
> 
> 标签：php, javascript, rsa

如何转换 JavaScript 表示法：

```
// JavaScript Code
function decrypt()
{
   // key = [ [d], [p], [q] ];
   var key=[[119141457,185046352,2676254],[40632295,2191],[122927507,2595]];
   document.form.text.value=rsaDecode(key, document.form.text.value);
} 
```

我指的是变量键，在 PHP 中可用：

```
// PHP Code
$privateKey = "[[119141457,185046352,2676254],[40632295,2191],[122927507,2595]]";
openssl_private_decrypt($encryptedData, $sensitiveData, $privateKey); 
```

这个问题来自 Stack Overflow 的第二个回复： [How to encrypt data in javascript and decrypt in php?](https://stackoverflow.com/questions/2414064/how-to-encrypt-data-in-javascript-and-decrypt-in-php)

基本上，我不熟悉 JavaScript 表示法`var myVariable = [[1234], [4321], etc.]`。那究竟是做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:56:59.753

> 基本上，我不熟悉 JavaScript 表示法 var myVariable = [[1234], [4321], etc.]。那究竟是做什么的？

它是一个数组，在每个索引中都有另一个数组。

[MDN 示例：3A。创建二维数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Example.3A_Creating_a_two-dimensional_array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:58:16.053

这个说法：

```
var key=[[119141457,185046352,2676254],[40632295,2191],[122927507,2595]]; 
```

是Javascript中**二维数组**的声明和初始化。

在 PHP 中等效的关键变量是：

```
$privateKey = array ( array(119141457,185046352,2676254), array(40632295,2191),
                      array(122927507,2595)
                    ); 
```

# java - 找不到 MessageBodyWriter 类型的响应对象：com.sun.jersey.api.json.JSONWithPadding 媒体类型：application/x-javascript

> ID：15625540
> 
> 赞同：3
> 
> 时间：2013-03-25T21:54:31.933
> 
> 标签：java, jersey, jsonp, jax-rs, resteasy

我正在尝试在我的主干应用程序上使用 jsonp。在我的网络服务中，我正在尝试使用 Jersey 库来使用 JSONWithPadding 响应。

问题是，看起来不支持“application/x-javascript”。

我的代码是：

```
@GET
@Path("/issues/jsonp")
@Produces("application/x-javascript")
public JSONWithPadding getIssuesJsonp(@Context HttpServletRequest req,
    @PathParam("ppid") String qppid,
    @QueryParam("callback") String callback) {

Principal principal = req.getUserPrincipal();
    String username = principal.getName();

try {
    List<IssueDTO> list = service.getIssuesDTO(username, qppid);
    IssuesResult r = new IssuesResult();
    r.setIssues(list);
    System.out.println("CALLBACK:" + callback);
    return new JSONWithPadding(r,callback);
} catch (Exception e) {
    String message = "Internal Server Error";
    LOG.error(message, e);
    Result r = new Result(PPStatusCode.INTERNAL_SERVER_ERROR, message);
    return new JSONWithPadding(noCache(500, r),callback);
}
} 
```

结果是：

**Etat HTTP 500 - 找不到 MessageBodyWriter 类型的响应对象：com.sun.jersey.api.json.JSONWithPadding 的媒体类型：application/javascript**

有人能帮我吗 ？

编辑：完整的堆栈跟踪：

> 18:52:33,243 WARN [org.jboss.resteasy.core.SynchronousDispatcher] (http--127.0.0.1-8080-1) 执行 GET pp/fn/issues/jsonp 失败：org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure：找不到 MessageBodyWriter 类型的响应对象：com.sun.jersey.api.json.JSONWithPadding 媒体类型：org.jboss.resteasy.core.ServerResponse.writeTo(ServerResponse.java:216) 处的 application/x-javascript [ resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.core.SynchronousDispatcher.writeJaxrsResponse(SynchronousDispatcher.java:585) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss .resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:506) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy -jaxrs-2.3.2.Final.jar：] 在 org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:] 在 org.jboss.resteasy.plugins.server.servlet .HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:] at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy -jaxrs-2.3.2.Final.jar:] 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0\. Final] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java: 248) [jbossweb-7.0.13.Final.jar:] 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:] at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb- 7.0.13.Final.jar:] at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:] at org.jboss.as.jpa.interceptor .WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final] at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java :153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final] 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13\. Final.jar:] 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:] 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:] 在 org.apache。 catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:] at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0\. 13.Final.jar:] 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:] 在 org.apache.tomcat.util.net .JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_11]connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:] at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13\. Final.jar:] at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:] at org.apache.tomcat.util.net.JIoEndpoint $Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_11]connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:] at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13\. Final.jar:] at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:] at org.apache.tomcat.util.net.JIoEndpoint $Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_11]util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] 在 java.lang.Thread.run(Thread.java:722) [rt.jar:1.7\. 0_11]util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] 在 java.lang.Thread.run(Thread.java:722) [rt.jar:1.7\. 0_11]

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:11:36.503

根据堆栈跟踪，JBoss 中提供的 Resteasy 似乎无法找到`JSONWithPaddingProvider`您`jersey-json.jar`（我想）捆绑在 WAR 中的位置。`JSONWithPadding`是 Jersey 特定的类，如果你想使用它，你有 2 个选项：

*   将 Jersey 库添加到您的 WAR（如果您还没有它们）并禁用 Resteasy，`web.xml`如[在 Jboss AS 7 上部署 Jersey webapp](https://stackoverflow.com/a/12185880/290799)中所述，以确保您的应用程序使用 Jersey 作为 JAX-RS 实现
*   添加`jersey-json.jar`到 JBoss 类路径，以便 Resteasy 能够找到位于此 jar 中的`MessageBodyWriter`( )`JSONWithPaddingProvider`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T21:33:24.830

RestEasy 也已经`JacksonJsonpInterceptor`有了 - 如果您将 Guice 与 RestEasy 一起使用，您可以`bind(JacksonJsonpInterceptor.class)`在适当的模块中，否则您应该为 RestEasy 正常配置它（请参阅[https://docs.jboss.org/resteasy/docs/1.1.GA /userguide/html/Interceptors.html](https://docs.jboss.org/resteasy/docs/1.1.GA/userguide/html/Interceptors.html)第 29.6 节）：

> 它们可以在 web.xml 的 resteasy.providers 上下文参数中列出，也可以在 Application.getClasses() 或 Appication.getSingletons() 方法中作为类或对象返回。

# android - 设备关闭时发送短信

> ID：15625544
> 
> 赞同：2
> 
> 时间：2013-03-25T21:54:37.043
> 
> 标签：android, android-broadcast

我想制作一个广播接收器，在设备关闭时向某个电话号码发送简单的短信。

这是我的代码：

```
public class ShutDownReceiver extends BroadcastReceiver {

SmsManager sms = SmsManager.getDefault();

@Override
public void onReceive(Context context, Intent intent) {

    Log.i("Log","Device shutting down NOW!");

                        //An actual phone number here
    sms.sendTextMessage("0670#######", null, "This is a text for sms", null, null);

       } 
```

}

到目前为止的结果：

当我关闭设备时，我可以清楚地看到日志消息。因此，BroadcastReceiver 在关闭时运行良好，但没有发送短信，没有异常。

我通过简单的按钮单击尝试了这种短信发送方法，绝对成功。

所以，我知道短信发送方法是正确的，我知道关机接收器是正确的，但由于某种原因它没有发送短信。

有什么想法吗？（我使用的是真实设备，而不是模拟器。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:09:43.217

我在用着 ....

```
SmsManager.getDefault().sendTextMessage(number, null, smsText, null, null); 
```

...而且只要

1.  电话号码有效
2.  消息文本不太长
3.  电话服务可用（您是否尝试过另一个事件以确保在您收到关机之前该服务没有关闭？）
4.  `android.permission.SEND_SMS`被授予

希望这会有所帮助......干杯！

# python - 对数据集使用范围

> ID：15625547
> 
> 赞同：0
> 
> 时间：2013-03-25T21:54:50.950
> 
> 标签：python, binning

我在一个看似简单的问题上遇到了麻烦。我有一个 X,Y,Z 格式的原子坐标列表。我已经使用 numpy.linspace() 从 Z 坐标中创建了一个“bins”列表。Z坐标使得排序后的点之间的差异可能只有小数或整数。我想移动“bins”，只添加位于“bin0”-“bin1”范围内的坐标集的 X、Y、Z，然后是“bin1-bin2”。基本上这就是我想在一些非常糟糕的伪代码中做的事情。我已经有了要用作“bin”范围的均匀间隔的数字

```
 1\. Find XYZ coordinate sets that fall into first 'bin'
    2\. Do math on them and save the value out
    3\. Move on to next bin. 
```

我知道可能有一个简单的 python 解决方案，但是我对使用范围的列表推导的理解是有限的。非常感谢任何提示。

EDIT* 尝试添加“SSCCE”

```
import numpy as np
xyz = [[2,-2,0.29],[ -2,0,1.9 ],[2,1,2.35],[2,-3,2.96],[ 2,0,4.97],[0,3,5.13],[-1,3,5.41]]
bins = [0,0.57,1.14,1.71,2.28,2.85555556, 3.42, 3.99, 4.56,5.14]
'''Now I want to add all of the xyz's with a z-value between 0 and .57 a list or somthing      so that I can use them,
then I want to move on to the xyz's that fall between .57 and 1.14'''
workingXYZs = []
for x,y,z in xyz:
    for i in bins:
    if z > i: #but not greater than next I
       #do math and move on to next interval 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:21:54.557

如果您的数据是元组列表，您可以轻松使用列表推导；

```
# I'm making up some data
In [13]: atoms = [(random.random(), random.random(), random.random()) for i in xrange(100)]

# Select every coordinate wher 0 < Z < 0.01
In [16]: [a for a in atoms if 0 <a[2]<0.01]
Out[16]: [(0.2118237642057983, 0.3740988439603703, 0.007613439427947566), (0.1982752864446785, 0.8253287086824319, 0.009925330198799487), (0.07769287016236548, 0.7685209005035492, 0.008550123528872411)] 
```

# performance - 仅绑定新数据点以进行性能优化

> ID：15625548
> 
> 赞同：1
> 
> 时间：2013-03-25T21:54:51.683
> 
> 标签：performance, svg, d3.js

想象一下，我的代码中有以下调用：

```
svg.selectAll("path")
    .data(data, key)
    .enter().append("path")
    .attr("d", path); 
```

稍后在代码中，进行完全相同的调用，仅`data`包含一些新条目。如何在不重绘现有路径的情况下将新数据条目绑定到新路径？（即与现有路径关联的数据元素永远不会改变）

这是一项性能优化：`data`包含 10,000 多个条目，每次调用添加或删除的条目不到 1%。正如您可能想象的那样，绘制 10,000 多个路径非常耗费资源并且需要几秒钟的时间（在此期间整个页面对用户事件没有响应）。

一种解决方案是构建一个包含旧数据和新数据之间差异的数组，并`enter()`仅用于新数据元素。但是，`data`在提供第二个数据集时将旧变量包含在范围内是很棘手的。我认为 D3 必须以某种方式在内部维护旧数据的表示，当然我们可以使用它。

类似地，对于已删除的数据元素必须执行相同的过程（每次调用都会删除一些元素，`data`并且必须从 DOM 中删除相应的路径，而不涉及所有其他路径）。但是，我想我可以在第一部分给出解决方案的情况下弄清楚这部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:36:21.260

我鼓励您阅读d3 中的[对象恒常性](http://d3js.org/#enter-exit)和[连接](http://bost.ocks.org/mike/join/)。

您引用的`enter()`函数不仅适用于新数据，您基本上可以通过 using 给出新的数据数组`selection.data(newDataArray, function(d){return d.id})`，然后，`selection.enter()`将为您提供所有**新**元素，`selection.exit()`所有**已删除**元素，并`selection`为您提供新数据集中的所有元素（旧+新）。

[这里](http://mbostock.github.com/d3/tutorial/bar-2.html)也是一个不错的简短教程。

您可能还想查看有关 d3.js 中数据的[参考文档。](https://github.com/mbostock/d3/wiki/Selections#data)

# emacs - emacs 如何将选项卡大小设置为 4 个字符？

> ID：15625552
> 
> 赞同：0
> 
> 时间：2013-03-25T21:55:02.317
> 
> 标签：emacs, elisp

我有标签大小的问题。它总是 2 个字符，但我想要 4 个。

我的代码：

```
(defun my-c++-mode-hook ()
    (set (make-local-variable 'compilation-parse-errors-filename-function)
  'process-error-filename)
    (local-set-key (kbd "C-c b") 'compile)       ; KBD
    (setq compile-command "scons")
    (setq indent-tabs-mode nil)
    (setq tab-width 4)
    (setq c-basic-indent 4)
    )
(add-hook 'c++-mode-hook 'my-c++-mode-hook)
(add-hook 'c-mode-common-hook 'my-c++-mode-hook) 
```

所以。当我打字时：

```
void f() {
  // Here I need 4 chars but I'm getting only 2 when I'm pressing TAB
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:08:16.683

我在[Post](https://stackoverflow.com/a/2517233/658346)找到的正确答案：

```
(setq c-basic-offset 4) 
```

但我仍然不明白 (setq c-basic-indent 4) 是什么以及为什么有这么多建议在互联网上使用它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:12:54.467

`basic offset`表示其他缩进基于它。所以，

```
for () {
....if () { // 4 spaces
........ // 8 spaces
....}
} 
```

引用[GNU Emacs](http://www.gnu.org/software/emacs/manual/html_node/ccmode/Customizing-Indentation.html#Customizing-Indentation)

*此样式变量保存缩进级别之间的基本偏移量*

所以你不会得到：

```
for () {
....if () { // 4 spaces
...... // 6 spaces
....}
} 
```

但是，如果您愿意，当然可以这样做。

通常，建议使用空格而不是制表符：

```
(setq-default indent-tabs-mode nil) 
```

用于`M-x untabify`对特定缓冲区执行此操作。

# java - 加减双打会产生奇怪的结果

> ID：15625556
> 
> 赞同：37
> 
> 时间：2013-03-25T21:55:17.787
> 
> 标签：java, double

因此，当我在 Java 中使用 Doubles 进行加法或减法时，它会给我带来奇怪的结果。这里有一些：

如果我添加`0.0 + 5.1`，它会给我`5.1`。这是正确的。

如果我添加`5.1 + 0.1`，它会给我`5.199999999999`（重复`9`s 的数量可能会关闭）。那是错误的。

如果我减去`4.8 - 0.4`，它会给我`4.39999999999995`（同样，重复`9`的 s 可能会关闭）。那是错误的。

起初我以为这只是用十进制值添加双精度的问题，但我错了。以下工作正常：

```
5.1 + 0.2 = 5.3
5.1 - 0.3 = 4.8 
```

现在，添加的第一个数字是保存为变量的双精度数，尽管第二个变量从`JTextField`. 例如：

```
//doubleNum = 5.1 RIGHT HERE
//The textfield has only a "0.1" in it.
doubleNum += Double.parseDouble(textField.getText());
//doubleNum = 5.199999999999999 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-25T21:57:51.040

在 Java 中，`double`值是[IEEE 浮点数](http://en.wikipedia.org/wiki/IEEE_floating_point)。除非它们是 2 的幂（或 2 的幂之和，例如 1/8 + 1/4 = 3/8），否则即使它们具有很高的精度，也无法精确表示。一些浮点运算会加重这些浮点数中存在的舍入误差。在您上面描述的情况下，浮点错误已经变得足够显着以显示在输出中。

数字的来源是什么并不重要，无论是从 a 解析字符串`JTextField`还是指定`double`文字 - 问题在于浮点表示中的继承。

解决方法：

*   如果你知道你只有这么多小数点，那么使用整数算术，然后转换为小数：

    ```
    (double) (51 + 1) / 10
    (double) (48 - 4) / 10 
    ```

*   使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)

*   如果您必须使用，您可以使用[Kahan Summation Algorithm](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)`double`减少浮点错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:59:43.803

在 Java 中，双精度数使用 IEEE 754 浮点算法（请参阅[此](http://en.wikipedia.org/wiki/IEEE_floating_point)Wikipedia 文章），这本质上是不准确的。使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)获得完美的小数精度。为了在印刷中四舍五入，仅接受“相当不错”的准确性，使用`printf("%.3f", x)`.

# jquery - 与此查找功能结合使用时复选框不接受输入

> ID：15625558
> 
> 赞同：0
> 
> 时间：2013-03-25T21:55:25.700
> 
> 标签：jquery, checkbox, find

与以下功能结合使用时，这些复选框将停止接受任何输入。我在这里发布了一个演示问题的小提琴：http: [//jsfiddle.net/chayacooper/WZpMh/32/](http://jsfiddle.net/chayacooper/WZpMh/32/)

HTML

```
<ul id="attributes-Colors">
    <li><input type=checkbox name="color[]" value="Blue" data-color="Blue">Blue</li>
    <li><input type=checkbox name="color[]" value="Red" data-color="Red">Red</li>
    <li><input type=checkbox name="color[]" value="Black" data-color="Black">Black</li>
</ul> 
```

JS

```
 $(document).ready(function () {
    var selected = [];
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        var $this = $(this);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected.splice(selected.indexOf(attrColor),1);
        }
        else {
            $this.parent().addClass("active");
            selected.push(attrColor);
        }
        $("#content").find("*").hide();
        $.each(selected, function(index,item) {
            $('#content').find('[data-color ~="' + item + '"]').show();
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:00:33.810

如果您`return false`在单击处理程序中删除 ，复选框将响应。

# php - 如何使用 Xcode 执行第一个简单的 PHP api 示例

> ID：15625562
> 
> 赞同：0
> 
> 时间：2013-03-25T21:55:35.090
> 
> 标签：php, ios, nsurlconnection, nsjsonserialization

这是我从演示 iOS 应用程序调用的第一个 API。我只是想让我在php中写的简单句子回到标签。

但是，当我在应用程序中获取它时，字典结果为空。这是如何运作的？***已更正，以下代码有效，但不是很安全

PHP 文件：

```
index.php hosted on localhost using XAMPP (http://localhost/tutorials/index.php) if I echo "hi"; it shows on the page so the server is working. 

 <?php 
if(function_exists($_GET['fe'])) {
   $_GET['fe']();
}
    function getLabel(){
        $response['name']="Hello first API ever";

        echo json_encode($response);
    } 
```

现在在 Xcode 我有：

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{
        //Main parse

        //Web data
        NSDictionary*data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
        NSLog(@"%@",data);
        NSString*label=[data valueForKey:@"name"];

        _answer.text=label;

    }

    -(void)getData{

        NSURL*url=[NSURL URLWithString:@"http://localhost/tutorials/index.php?fe=getLabel"];
        NSURLRequest*request=[NSURLRequest requestWithURL:url];
        connection = [NSURLConnection connectionWithRequest:request delegate:self];

        if (connection) {
            webData=[[NSMutableData alloc]init];
        }
    }

//Clear response
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [webData setLength:0];
}

    //Append data
    -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
        [webData appendData:data];
    }

    -(void)connectionDidFinishLoading:(NSURLConnection *)connection{
        //Main parse

        //Web data

        NSDictionary*data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
        NSLog(@"%@",data);
        NSString*label=[data valueForKey:@"name"];

        _answer.text=label;

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:04:13.077

你的 connection:didReceiveData: 方法在哪里？它应该将接收到的数据附加到 webData。

# php - PHP 跟踪电子邮件消息和回复

> ID：15625564
> 
> 赞同：1
> 
> 时间：2013-03-25T21:55:42.713
> 
> 标签：php, email

我正在使用 PHP 构建电子邮件管理软件。我有点坚持某些事情，并认为 SO 可能会提供一些见解。用户检索消息。消息得到回复。我在想我可以为传入的消息创建某种自定义散列，将数据和散列存储在数据库中，然后对于回复，将自定义散列注入消息标头以表示正在发送的此消息是其中的一部分特定的传入消息。

*   我回复了一条消息，然后用户重新回复后，注入的自定义哈希会在消息中吗？如果不是，它将被视为新的传入消息。
*   我应该考虑将自定义散列注入消息吗？这甚至可能吗？这是一个好方法吗？

这是一个很好的理论吗？有什么建议或意见吗？我真的没有这方面的经验，我只是想找出最好的实施方法。

** 注意：如果有任何我可以逆向工程的开源 PHP 电子邮件管理软件，那也是我感兴趣的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:10:14.423

将自定义标头注入消息是可能的，但它们很少包含在回复中。有时，客户端会包含一个 In-Reply-To 标头，该标头引用原始消息 ID，您可以使用它。

但是，最简单和最常用的方法是使用自定义的发件人地址。如果您从那里发送电子邮件，`message-12345@yourdomain.com`那么任何退回或回复都将返回到该电子邮件地址。如果下一条消息使用`message-12346@yourdomain.com`，那么您可以轻松判断哪个回复是针对哪个原始消息。

接收电子邮件时有几个选项：

1.  使用 POP3 或 IMAP 轮询
2.  让邮件服务器在收到消息时初始化脚本
3.  使用从 SMTP 转换电子邮件并将其作为 HTTP 转发的系统

我写了[一篇博客文章，概述了接收消息的方法](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)，它适用于 Ruby，但同样的原则都适用。不幸的是，我不知道任何用于此的 PHP 软件。

# django - 如何在 Django 中清除旧 SESSION_COOKIE_DOMAIN 的 cookie

> ID：15625569
> 
> 赞同：7
> 
> 时间：2013-03-25T21:55:51.010
> 
> 标签：django, session, cookies

我们最近将 cookie 域 (settings.SESSION_COOKIE_DOMAIN) 从*domain.com*更改为*.domain.com*，这会阻止 Safari 用户登录，除非他们清除 cookie。问题的根源在于两个域都设置了*sessionid* cookie。

有没有办法清除或忽略原始域，或者是建议用户清除 cookie 的唯一方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T00:49:37.823

修改设置时可能会发生这种情况`SESSION_COOKIE_DOMAIN`。（你说`SESSION_COOKE_PATH`改变了）。

的文档[`SESSION_COOKIE_DOMAIN`](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SESSION_COOKIE_DOMAIN)附带此警告：

> SESSION_COOKIE_DOMAIN
> 
> 在生产站点上更新此设置时要小心。如果您更新此设置以在以前使用标准域 cookie 的站点上启用跨域 cookie，则现有用户 cookie 将设置为旧域。只要这些 cookie 持续存在，这可能会导致他们无法登录。

如果您从以下位置开始，则会发生这种情况：

```
SESSION_COOKIE_DOMAIN = None 
```

至

```
SESSION_COOKIE_DOMAIN = '.domain.com' 
```

正如您所说，客户端现在有两个 cookie，它们将在请求期间发送到服务器，两个 cookie 都命名为`sessionid`. 当 Django 查看 cookie 时，它​​只能访问 Python 字典，因此它只能看到一个`sessionid`cookie，而不是两个都发送。

我没有对此进行测试，但解决问题的一些想法可能是：

*   要求用户删除相应的 cookie。根据用户数量和他们的技能水平，这可能不是一个合理的选择。要求他们删除所有 cookie 可能是不可能的。

*   等待旧 cookie 过期。默认情况下，`sessionid`cookie 似乎有 14 天的有效期。一旦旧的会话 cookie 过期，它们将不再随每个请求一起发送，从而允许新的`sessionid`cookie 生效。

*   更改`sessionid`cookie 的名称并编写自定义 Django 中间件来处理新旧`sessionid`cookie。

我还没有测试最后一点，但是应该可以将 更改[`SESSION_COOKIE_NAME`](https://docs.djangoproject.com/en/dev/ref/settings/#session-cookie-name)为`sessionid`. 现在，这将阻止现有登录用户使用他们现有的`sessionid`cookie，因此您需要编写一个自定义中间件，该中间件能够处理`sessionid`cookie（旧 cookie）和`sessionidnew`当前登录 cookie。

像这样的东西会起作用：

```
from django.utils.importlib import import_module
from django.contrib.sessions import middleware
from django.conf import settings

class MySessionMiddleware(middleware.SessionMiddleware):
    def process_request(self, request):
        engine = import_module(settings.SESSION_ENGINE)
        session_key = request.COOKIES.get(settings.SESSION_COOKIE_NAME, None)
        if session_key is None:
            # Look for old cookie in request for auth purposes.
            session_key = request.COOKIES.get('sessionid', None)
        request.session = engine.SessionStore(session_key) 
```

您必须用这个新的中间件替换`SessionMiddleware`in `settings.py`under 。`MIDDLEWARE_CLASSES`例如：更改`'django.contrib.sessions.middleware.SessionMiddleware'`为`'custommiddleware.MySessionMiddleware'`custommiddleware.py 是具有上述代码的文件并且存在于您的项目根文件夹中的位置（存在 manage.py 文件的位置）

一旦足够的时间过去并且您对所有旧`sessionid`cookie 都已过期感到满意，您可以执行相反的操作并更改回使用`sessionid`会话的首选 cookie 名称，最终删除可以处理两种不同类型`sessionid`cookie的专家代码.

# javascript - 使用 javascript 创建测试检查器

> ID：15625573
> 
> 赞同：1
> 
> 时间：2013-03-25T21:56:13.663
> 
> 标签：javascript, html

我是一名数学老师。我想使用我学校的网站让学生检查他们是否对纸上单独给出的一组测试问题有正确的解决方案。我想给学生一个文本框，他们可以在其中输入他们的解决方案和一个按钮来检查它是否正确。正确的答案将在问题旁边显示一个“正确”图标等。我是一个完整的初学者，但到目前为止我已经做到了：

```
<script>
function check(z)
{
var ans = new Array
ans[0]="522"
ans[1]="144"

if (document.getElementById('response'+z).value==ans[z])
{
document.getElementById('correct' + z).style.visibility='visible'
document.getElementById('incorrect' + z).style.visibility='hidden'
}
if (document.getElementById('response'+z).value!=ans[z] && document.getElementById('response'+z).value!='')
{
document.getElementById('correct' + z).style.visibility='hidden'
document.getElementById('incorrect' + z).style.visibility='visible'
}
if (document.getElementById('response'+z).value=='')
{
document.getElementById('correct' + z).style.visibility='hidden'
document.getElementById('incorrect' + z).style.visibility='hidden'
}
}
</script>

<img id="correct0"src="correct.jpg"style="visibility:hidden"/>
<img id="incorrect0"src="incorrect.jpg"style="visibility:hidden"/>
1a  
<textarea style="width: 100px; height: 20px;"id="response0"></textarea>
<button style="height: 20px"onclick="check(0)">check</button>
<br></br>

<img id="correct1"src="correct.jpg"style="visibility:hidden"/>
<img id="incorrect1"src="incorrect.jpg"style="visibility:hidden"/>
1b  
<textarea style="width: 100px; height: 20px;"id="response1"></textarea>
<button style="height: 20px"onclick="check(1)">check</button>
<br></br> 
```

这可行，但显然非常笨重（我实际上使用 Excel 电子表格来生成 html 代码）。我的问题是：我可以使用 javascript 本身来生成文本框和按钮吗？我可以混淆正确答案吗（如果学生知道如何查看我的网页来源，我的考试就结束了！）。

非常感谢和最良好的祝愿，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:12:09.510

理想情况下，您将在服务器端生成并验证解决方案。如果这不是一个选项，请在您的页面中删除对哈希库的引用并针对加密哈希验证答案：

[https://code.google.com/p/crypto-js/](https://code.google.com/p/crypto-js/)

您必须在电子表格中生成哈希值——或者在您自己的问题生成页面中使用相同的哈希库。

但要小心！如果您的学生有可能完全熟悉 JavaScript，他们仍然可以轻松打开 JavaScript 控制台并暴力破解它。假设合理的答案往往是数字并且低于 100 万，这非常微不足道......

......还有一个警告。如果您的答案是开放的文本字段，您需要在检查之前“规范化”输入。删除多余的空格、标点符号等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:04:18.753

JavaScript 中的混淆实际上是不可能的 - 有混淆器，但同时也有去混淆器（取决于您学生的知识，这可能是另一种选择）

编辑：这里是一个混淆器的例子： [http](http://www.daftlogic.com/projects-online-javascript-obfuscator.htm) ://www.daftlogic.com/projects-online-javascript-obfuscator.htm ，你也可以看看谷歌关闭：[http://closure-compiler.appspot .com/home](http://closure-compiler.appspot.com/home)用于缩小和“混淆”但我很伤心，几乎任何事情都可以恢复。

至于生成输入字段和框等，你应该看看 jQuery： http: [//jquery.com/](http://jquery.com/) - 一开始可能有点混乱，但它很容易并且对任务有很大帮助像这样。

如果您对该主题有更深入的了解，您可能需要考虑对答案进行服务器端验证（这样您的学生就无法阅读您的代码）。这并不像您想象的那么难，但现在 jQuery 应该可以完成这项工作。

不过我喜欢你的项目，我希望我以前有这样的老师:)

# perl - ResultSet 和对象有什么区别？

> ID：15625575
> 
> 赞同：2
> 
> 时间：2013-03-25T21:56:17.587
> 
> 标签：perl, resultset, dbix-class

从[DBIx::Class::ResultSet](http://search.cpan.org/~abraxxa/DBIx-Class-0.08209/lib/DBIx/Class/ResultSet.pm)我们读到：

```
WARNING
If called on an object, proxies to "new_result" instead, so
my $cd = $schema->resultset('CD')->new({ title => 'Spoon' });
will return a CD object, not a ResultSet, and is equivalent to:
my $cd = $schema->resultset('CD')->new_result({ title => 'Spoon' }); 
```

有人可以解释对象和结果集之间的区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:47:12.317

`new`警告是关于调用ResultSet*对象*和 ResultSet*类名*之间的区别。如果要使用 ResultSet 构造函数创建新的 ResultSet 对象，请调用`new`ResultSet 包：

```
my $resultset = DBIx::Class::ResultSet->new(...); 
```

（尽管您通常不必以这种方式创建 ResultSet 对象。）如果您调用`new`ResultSet 对象，您将不会获得新的 ResultSet 对象，而是相应的结果（行）对象：

```
my $row = $resultset->new(...); 
```

许多其他 Perl 类无论`new`是在类名还是类的对象上调用都没有区别，因此会发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:48:30.513

取自 DBIx::Class::ResultSet 文档：

> DBIx::Class::ResultSet - 表示用于获取一组结果的查询。ResultSet 是一个对象，它存储一组表示查询的条件。

ResultSet 是表示查询的特定对象。对象（不是 ResultSet 对象）是 DBIx 中定义的表中的单个实体。

假设您有一个父子数据库，一对多（每个父亲可以有很多儿子）。因此，在 DBIx 上下文中，一个父亲是一个对象，儿子也是一个对象。但是查询“哪个父亲有一个儿子叫 James”是一个 ResultSet 对象。

# tfs - 为什么从 TFS 中的命令行获取命令会删除并行项目？

> ID：15625579
> 
> 赞同：0
> 
> 时间：2013-03-25T21:56:29.030
> 
> 标签：tfs

我有 2 个项目 A 和 B。它们应该保留在并行目录中。我创建了 2 个标签，一个用于项目 A，另一个用于项目 B。

我将 tf get by label 用于项目 A，然后 tf get by label 用于另一个项目 B。出于某种原因，tf get by label A 会删除另一个项目 B，反之亦然。

从 Visual Studio 客户端按标签签出看起来不错——我可以同时获得两个项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:21:59.883

如果标签 A 仅包含项目 A，标签 B 仅包含项目 B，那么当您要求 TFS 执行 get of 时`$/`，它将确保您的工作区与您请求的内容相匹配，直到并包括删除本地存在的项目不是标签 A 的一部分。

如果您在 Visual Studio 中看到差异，那可能是因为您选择`project A`并在标签 A 上`project B`执行 get 并在标签 B 上执行 get。这意味着它`project A`位于标签 A 给出的变更集中，并且`project B`位于项目 B 给出的变更集。

另一方面，当您`$/`在标签规范处执行获取时，您将*仅*获得标签规范。

如果你想匹配 Visual Studio 的行为，你可以做一个 get of `project A`and `project B`：

```
tf get $/ProjectA /version:LA
tf get $/ProjectB /version:LB 
```

# android - ButtonFragment 类中的 RunTimeException

> ID：15625584
> 
> 赞同：0
> 
> 时间：2013-03-25T21:56:58.797
> 
> 标签：android, button, android-activity, fragment, runtimeexception

我的 buttonfragment.class 出现运行时异常。我做了一个碎片化的按钮栏，每个按钮都有自己的布局和活动。我一直在改变周围的事情，无法弄清楚片段类中的错误在哪里。谢谢

MainActivity.java

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn1 =(Button)findViewById(R.id.btn1);
    Button btn2 =(Button)findViewById(R.id.btn2);
    Button btn3 =(Button)findViewById(R.id.btn3);
    Button btn4 =(Button)findViewById(R.id.btn4);

    btn1.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent();
            i = new Intent(MainActivity.this, ButtonFragment1.class);
            setContentView(R.layout.activity_main);
            startActivity(i);
        }
    });

    btn2.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent();
            i = new Intent(MainActivity.this, ButtonFragment2.class);
            i.setAction(Intent.ACTION_VIEW);
            i.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.agil_main);
            startActivity(i);
        }
    });

    btn3.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent();
            i = new Intent(MainActivity.this, ButtonFragment3.class);
            i.setAction(Intent.ACTION_VIEW);
            i.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.int_main);
            startActivity(i);
        }
    });

    btn4.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent();
            i = new Intent(MainActivity.this, ButtonFragment4.class);
            i.setAction(Intent.ACTION_VIEW);
            i.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.misc_main);
            startActivity(i);
        }
    });
}} 
```

ButtonFragment1.java

```
public class ButtonFragment1 extends Fragment implements  OnClickListener 
{ 

private static final String TAG = null;
protected static final Context context=null;

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

}   
 public void onActivityCreated(Bundle savedInstanceState) 
{       
super.onActivityCreated(savedInstanceState);

}    

public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle      savedInstanceState)    
 {

    View view = inflater.inflate(R.layout.activity_main, container, false);    

 Button Btn = (Button)  view.findViewById(R.id.btn1);

    Btn.setOnClickListener(this);

            return view;
 }

 public void onClick(View v)
 {

        if(v.getId()==R.id.btn1) 
    {
                 // TODO Auto-generated method stub

    startActivity(new Intent(v.getContext(),MainActivity.class));    
            }
     }
} 
```

按钮栏.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:shrinkColumns="*"  
android:stretchColumns="*" 
android:background="#6B1414">    
<TableRow
    android:id="@+id/tableRow1"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">
    <Button
        android:id="@+id/btn1"
        android:text="@string/Str"
        android:textStyle="bold"
        android:layout_width="0dip"
        android:layout_height="wrap_content" 
        android:padding="18dip"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:gravity="center"/>
    <Button
        android:id="@+id/btn2"
        android:text="@string/Agl"
        android:textStyle="bold"
        android:layout_width="0dip"
        android:layout_height="wrap_content" 
        android:padding="18dip"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:gravity="center"/>
    <Button
        android:id="@+id/btn3"
        android:text="@string/Int"
        android:textStyle="bold" 
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:padding="18dip"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:gravity="center"/>
    <Button
        android:id="@+id/btn4"
        android:text="@string/Misc"
        android:textStyle="bold" 
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:background="#424242"
        android:textColor="#ffffff"
        android:padding="18dip"/>
</TableRow> 
</TableLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.killerphone.dota2sounds"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
    <activity
        android:name="com.killerphone.dota2sounds.MainActivity"
        android:screenOrientation="portrait"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MainAgil"></activity>
    <activity android:name=".MainInt"></activity>
    <activity android:name=".MainMisc"></activity>
    <activity android:name=".ButtonFragment1"></activity>
    <activity android:name=".ButtonFragment2"></activity>
    <activity android:name=".ButtonFragment3"></activity>
    <activity android:name=".ButtonFragment4"></activity>
</application> 
```

更新：发布跟踪错误 - 我可以进入下一个布局/活动，但之后它立即崩溃。

```
03-25 15:08:16.705: D/AndroidRuntime(3438): Shutting down VM
03-25 15:08:16.705: W/dalvikvm(3438): threadid=1: thread exiting with uncaught    exception (group=0x4001d5a0)
03-25 15:08:16.705: E/AndroidRuntime(3438): FATAL EXCEPTION: main
03-25 15:08:16.705: E/AndroidRuntime(3438): java.lang.RuntimeException: Unable to  instantiate activity  ComponentInfo{com.killerphone.dota2sounds/com.example.test.ButtonFragment2}:  java.lang.ClassCastException: com.example.test.ButtonFragment2
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1849)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1960)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.ActivityThread.access$1500(ActivityThread.java:145)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1045)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.os.Looper.loop(Looper.java:150)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.ActivityThread.main(ActivityThread.java:4369)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at java.lang.reflect.Method.invokeNative(Native Method)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at java.lang.reflect.Method.invoke(Method.java:507)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:846)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:604)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at dalvik.system.NativeStart.main(Native Method)
03-25 15:08:16.705: E/AndroidRuntime(3438): Caused by: java.lang.ClassCastException: com.example.test.ButtonFragment2
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
03-25 15:08:16.705: E/AndroidRuntime(3438):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1841)
03-25 15:08:16.705: E/AndroidRuntime(3438):     ... 11 more
03-25 15:08:16.806: D/dalvikvm(3438): GC_CONCURRENT freed 234K, 48% free 2974K/5639K,  external 0K/0K, paused 3ms+2ms
03-25 15:08:18.157: I/Process(3438): Sending signal. PID: 3438 SIG: 9 
```

在添加 Fragment 之前更新 #2 按钮，但正在从以前的布局/活动中获取动画。基本上，按钮在所有布局和活动中都放置在应用程序的顶部。

```
 btn1.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent();
            i = new Intent(getApplicationContext(), MainActivity.class);
            i.setAction(Intent.ACTION_VIEW);
            i.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.activity_main);
            startActivity(i);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:12:11.513

您不能像 Activity 一样启动 Fragment：

 ~~~~```
new Intent(MainActivity.this, ButtonFragment1.class); 
```~~  ~~您需要获取 FragmentManager 的实例，然后调用`add()`、replace()` 等以在 Activity 中使用 Fragments。

开发人员指南有多个关于此主题的详细[示例](https://developer.android.com/reference/android/app/Fragment.html)和[教程。](https://developer.android.com/guide/components/fragments.html#Adding)

* * *

您还应该删除清单中的错误声明，因为您现在知道 Fragment 不是 Activity：

 ~~~~```
<activity android:name=".ButtonFragment1"></activity> 
```~~  ~~* * *

> 我将如何获取每个按钮的活动类和 FragmentManager 类？

老实说，我不明白你想用你的 ButtonFragments 做什么，所以我无法为你提供具体的帮助，但我可以为你指明正确的方向。在您的 Activity（或 FragmentActivity）中，当您想要创建 Fragment 的副本时，请使用：

```
ButtonFragment buttonFrag = new ButtonFragment();
// Use setArguments() to pass extras to your Fragment
getFragmentManager().beginTransaction().add(R.id.fragment_container, buttonFrag).commit(); 
```

这是将片段添加到布局的正确方法。~~~~~~~~

# css - Ext JS 4.2 - 如何创建类似于 KitchenSink 示例中的标题？

> ID：15625587
> 
> 赞同：1
> 
> 时间：2013-03-25T21:57:08.067
> 
> 标签：css, extjs, extjs4, extjs4.2

我需要创建一个类似于[KitchenSink](http://docs.sencha.com/ext-js/4-2/#!/example/build/KitchenSink/ext-theme-neptune/)（*经典主题*）示例的标题：

![KitchenSink 样品头](../Images/389514550afed9cb07e85a1e054ebb1c.png)

我如何学习它的 CSS 和用法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:20:57.073

它是一个自定义元素，扩展了非常通用的 Ext.Container：

```
Ext.define("KitchenSink.view.Header", {
    extend: Ext.Container,
    xtype: "appHeader",
    id: "app-header",
    height: 52,
    layout: {type: "hbox",align: "middle"},
    initComponent: function() {
        this.items = [{xtype: "component",id: "app-header-title",html: "Ext JS Kitchen Sink",flex: 1}];
        if (!Ext.getCmp("options-toolbar")) {
            this.items.push({xtype: "themeSwitcher"})
        }
        this.callParent()
    }
}); 
```

它的大部分样式都发生在自定义 CSS 中。请参阅 CSS 以获取`#app-header-title`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T22:01:42.930

这是学习 ExtJS 的一个棘手部分。我使用带有 chrome 的“Inspect Element”（右键单击 chrome 中的标题并转到 Inspect Element）来确定我需要覆盖的 CSS 类以及我需要在哪里设置 'cls' 属性。

# c++ - 用于 argox pt-60 的完整 SDK

> ID：15625594
> 
> 赞同：0
> 
> 时间：2013-03-25T21:57:28.097
> 
> 标签：c++, dll, sdk, smart-device

我看了这个答案。 [ARGOX 移动电脑 SDK](https://stackoverflow.com/questions/12502470/argox-mobile-computer-sdk/12505945#12505945)

我需要 scanapiax.h 和 sysapiax.h 文件以及它们的 .dll 和 .lib。

我有 CD-R，但上面没有这个来源:(

也许有人解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:37:03.997

这个图书馆位于移动计算机上！

“C:/Windows/SDK”

# r - R - apply 系列中是否有任何函数可以为矩阵的每个条目计算 FUN？

> ID：15625595
> 
> 赞同：3
> 
> 时间：2013-03-25T21:57:29.237
> 
> 标签：r, vectorization

R - apply 系列中是否有任何函数可以为矩阵的每个条目计算 FUN ？我有概率`n x m`矩阵——我可以使用,来采样， 但我不确定这个函数是否正常工作，因为我认为它应该是：`M``M[i, j] = p``P(x = 1) = p``P(x = 0) = 1 - p``M``apply`
`apply(M, 1, function(x)(sample(0:1,length(x), replace = TRUE) ))`

`apply(M, 1, function(x)(sample(0:1,length(x), replace = TRUE, prob = x) ))` ，但是第二个不起作用，除了有没有涉及其他`apply`函数的更简单/更快的解决方案？

例子 ：

```
> M=matrix(runif(10*4),10,4)
> M
           [,1]       [,2]      [,3]       [,4]
 [1,] 0.4497123 0.74045206 0.8112949 0.33122848
 [2,] 0.5416048 0.35812976 0.3877630 0.01491928
 [3,] 0.7164970 0.15793958 0.1822459 0.07017764
 [4,] 0.7965967 0.85600843 0.3129818 0.25698186
 [5,] 0.8553264 0.06880133 0.4516520 0.14231129
 [6,] 0.8667404 0.49394338 0.1331386 0.37769487
 [7,] 0.9446913 0.87368456 0.3680256 0.92143709
 [8,] 0.4251636 0.69126643 0.5355501 0.45516271
 [9,] 0.7483549 0.04289660 0.7817728 0.37752422
[10,] 0.0218563 0.91304663 0.4800049 0.19477370

> apply(M, 1, function(x)(sample(0:1,length(x), replace = TRUE, prob = x) ))
Error in sample(0:1, length(x), replace = TRUE, prob = x) : 
  incorrect number of probabilities

> apply(M, 1, function(x)(sample(0:1,length(x), replace = TRUE) ))

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    0    0    1    0    0    1    1    0     0
[2,]    0    1    0    0    1    1    0    1    1     0
[3,]    0    1    0    1    1    0    1    1    1     1
[4,]    0    0    1    1    0    0    1    1    0     1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T22:04:46.170

您可以将多个维度传递给`apply`. 如果要按行和列进行采样，请使用`1:2`

至于您从二项式分布中抽样，请使用`rbinom`

```
 apply(M, 1:2, rbinom, size =1, n=1)

      [,1] [,2] [,3] [,4]
 [1,]    0    1    0    0
 [2,]    1    0    0    1
 [3,]    1    0    1    0
 [4,]    1    0    1    0
 [5,]    1    0    0    0
 [6,]    1    0    0    1
 [7,]    0    1    1    0
 [8,]    1    1    0    1
 [9,]    1    0    1    0
[10,]    0    0    0    1 
```

在这种情况下`rbinom`（与 中的许多函数一样`R`），是矢量化的，当您传递一个矩阵时，它将计算每个条目。然后，您将不得不强制返回所需的`matrix`尺寸。

例如

```
matrix(rbinom(n=length(M),size=1,prob=M), nrow = nrow(M), ncol = ncol(M)) 
```

# python - 如何在&if语句python中组合

> ID：15625601
> 
> 赞同：0
> 
> 时间：2013-03-25T21:57:58.447
> 
> 标签：python, if-statement, printing, function

我正在学习 python2.7，但我似乎无法弄清楚如何使用 in & if 语句检查字符串中的特定单词。

```
v="this is test string"
def i():
    if "test" in v == True:
        return "its there"
print i 
```

每当我运行它时，它只会返回 i 的位置，而不是打印“它在那里”或给我一个错误，我只是无法弄清楚我做错了什么，我觉得我错过了一些非常简单的东西，我尝试切换 return 语句有印刷品但没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:59:40.660

您实际上必须调用该函数：

```
print i() 
```

这将执行`i`函数中的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:01:18.220

您还需要为函数添加参数。我们称其为“v”，您无需与“True”进行比较。尝试将您的代码更改为：

```
v="this is test string"
def i(v):
   if "test" in v:
      return "its there"
print i(v) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:59:47.393

您应该使用括号调用该函数：

```
print i() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T22:03:12.470

```
`if "test" in v:
    return True` 
```

或者

```
`if v.find('test') != -1:
    return True` 
```

# python - python - 条件列表格式

> ID：15625602
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:58:01.617
> 
> 标签：python, string, list, python-3.x

在 Python 3 上，我正在尝试编写一个函数，该函数`format_list(items)`接受一个`items`包含 1 个或 2 个字符串元素的列表并返回一个包含这些元素的字符串。假设被传递的列表总是包含一个或两个元素（即，它不会为空，也不会包含两个以上的元素）。

条件是：

1.  如果列表包含单个元素，则该元素由函数返回，不变。
2.  如果列表包含两个元素，则它们以单个字符串的形式返回，第一个元素在宽度为 10 的字段中左对齐，后跟竖线 ('|')，第二个元素在宽度为 10 的字段中右对齐。您可以假设元素是每个最多包含 10 个字符的字符串。

所以`print(format_list(['abc']))`会产生：

```
abc 
```

并`print(format_list(['Dave', '14']))`会产生：

```
Dave   |   14 
```

**我什至不知道从哪里开始......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:11:16.053

这听起来像是家庭作业，所以有一些线索可以帮助您：

*   `% formatting` （例如`"Hello %s!" % some_var`--> `"Hello World!"`if `some_var == "World"`）

*   `len(some_list)`--> 列表中的项目数

哦，因为我不想查：

`"%10s" % 'word'`--> `......word`（点是空格）

`"%-10s" % 'word'`-->`word......`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:05:34.473

```
def format_list(l):
    if len(l)==1: return l[0]
    else:
        return '{:<10}|{:>10}'.format(l[0],l[1])

for l in [['abc'],['Dave', '14']]:        
    print(format_list(l)) 
```

印刷：

```
abc
Dave      |        14 
```

查看[.format](http://docs.python.org/3.3/library/stdtypes.html#str.format)方法和[.format 迷你语言](http://docs.python.org/3.3/library/string.html#format-specification-mini-language)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T22:12:06.140

```
def format_list(my_list)
    try:
        return my_list[0].ljust(10) + '|' + my_list[1].rjust(10)
    except IndexError: return my_list 
```

# javascript - if else 代码块执行

> ID：15625609
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:58:19.490
> 
> 标签：javascript

我有一个简单的 if-else 代码块，如下所示。它看起来很简单，但我无法解释它的行为：如果不包括“else”块，那么代码行 (1*) 总是被命中！但是如果我添加一个“else”块，那么代码行 (2*) 就会被命中。

```
var startTime = '11:35 PM';
var endTime = '4:40 PM';

if (startTime.indexOf('12:') >= 0 && endTime.indexOf('12:') < 0) {
      return true; // code line (1*)
}
else
{
      return false; // code line (2*)
} 
```

谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:04:59.393

考虑以下函数：

```
function randomName () {

  var startTime = '11:35 PM';
  var endTime = '4:40 PM';

  if (startTime.indexOf('12:') >= 0 && endTime.indexOf('12:') < 0) {
      return true; // code line (1*)
  }
  else {
      return false; // code line (2*)
  }

  return true;
} 
```

这将表现出您描述的行为。如果没有 else 部分，它将始终返回 true。这是你有的吗？如果没有，请显示其余的功能。查看您的测试用例也很有帮助。

# jquery - jstree create_node 事件未触发但能够创建节点？

> ID：15625619
> 
> 赞同：1
> 
> 时间：2013-03-25T21:59:08.497
> 
> 标签：jquery, jstree

我能够创建节点，但事件没有触发。Firefox 中没有报告错误。我做错了什么...

```
 $("#treeFile1").jstree("create", null, "outside", { "attr" : { "rel" : "folder" }}).bind("create.jstree", function(event,data)
                    {
                            alert("hello");
                    }); 
```

正如我所提到的，节点（文件夹）的创建没有问题。事件没有触发......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:24:01.630

直接将绑定连接到树容器，如下所示：

```
 $("#treeFile1").bind("create.jstree", function(event,data)
   {
            alert("hello");
   }); 
```

# ios - 在构建时从 xCode 构建中删除未使用的 lproj 语言？

> ID：15625628
> 
> 赞同：4
> 
> 时间：2013-03-25T21:59:33.380
> 
> 标签：ios, xcode

我一直在寻找一个脚本，该脚本将在构建时从项目中删除不需要的语言......没有深入了解。我有一个包含子项目的项目，其中一些子项目具有我不想附带的本地化（因为苹果查看 lproj 文件夹以说明您支持的语言）。

我想要的是一个脚本，我可以运行它并告诉它只有 x 种语言或删除 x 种语言，然后构建......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-21T15:16:58.897

如果您不需要的本地化来自使用中的 CocoaPods，请安装此 CocoaPods 插件：

[https://github.com/dtorres/cocoapods-prune-localizations](https://github.com/dtorres/cocoapods-prune-localizations)

对我来说就像一个魅力。

否则，您也许可以从此插件中提取代码来完成您的任务。

# java - Java 中的正则表达式，\\s 与 \\s+

> ID：15625629
> 
> 赞同：103
> 
> 时间：2013-03-25T21:59:34.363
> 
> 标签：java, regex, string, quantifiers

以下两个表达式有什么区别？

```
x = x.replaceAll("\\s", "");
x = x.replaceAll("\\s+", ""); 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-25T22:02:05.680

第一个匹配单个空格，而第二个匹配一个或多个空格。它们是所谓的正则表达式量词，它们执行这样的匹配（取自[文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)）：

```
Greedy quantifiers
X?  X, once or not at all
X*  X, zero or more times
X+  X, one or more times
X{n}    X, exactly n times
X{n,}   X, at least n times
X{n,m}  X, at least n but not more than m times

Reluctant quantifiers
X?? X, once or not at all
X*? X, zero or more times
X+? X, one or more times
X{n}?   X, exactly n times
X{n,}?  X, at least n times
X{n,m}? X, at least n but not more than m times

Possessive quantifiers
X?+ X, once or not at all
X*+ X, zero or more times
X++ X, one or more times
X{n}+   X, exactly n times
X{n,}+  X, at least n times
X{n,m}+ X, at least n but not more than m times 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-03-25T22:04:22.197

这两个`replaceAll`调用将始终产生相同的结果，无论是什么`x`。但是，需要注意的是，这两个正则表达式并不相同：

*   `\\s`- 匹配单个空白字符
*   `\\s+`- 匹配一个或多个空白字符的序列。

在这种情况下，它没有任何区别，因为您正在用空字符串替换所有内容（尽管`\\s+`从效率的角度来看最好使用）。如果您要替换为非空字符串，则两者的行为会有所不同。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-25T22:04:31.383

首先，您需要了解这两个语句的最终输出将是相同的，即从给定字符串中删除所有空格。

但是`x.replaceAll("\\s+", "");`，由于正则表达式`\\s+`一次匹配 1 个或多个空格并用空字符串替换它们，因此可能会减少替换次数，因此修剪空格的方法会更有效（如果字符串可以有多个连续空格）。

因此，即使您从两者获得相同的输出，最好使用：

```
x.replaceAll("\\s+", ""); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T22:02:42.147

第一个正则表达式将匹配一个空白字符。第二个正则表达式将不情愿地匹配一个或多个空白字符。对于大多数目的，这两个正则表达式非常相似，除了在第二种情况下，正则表达式可以匹配更多的字符串，如果它可以防止正则表达式匹配失败。来自[http://www.coderanch.com/t/570917/java/java/regex-difference](http://www.coderanch.com/t/570917/java/java/regex-difference)

# node.js - NodeJS/Mongoose/MongoDB - 拉（从数组中）不起作用

> ID：15625633
> 
> 赞同：8
> 
> 时间：2013-03-25T21:59:42.167
> 
> 标签：node.js, mongodb, mongoose

我正在尝试从数组（子文档）中提取/删除值。

示例文档：

```
{
   _id: 5150a1199fac0e6910000002,
   name: 'some name,
   items: [{
      id: 23,
      name: 'item name 23'
   },{
      id: 24,
      name: 'item name 24'
   }]
} 
```

我已经从 mongo 中提取了该文档。我在尝试：

```
var left = object.items.pull({id: 24});
console.log(left) 
```

输出：

```
[{
   id: 23,
   name: 'item name 23',
   _id: 5150a1199fac0e6910000045
},{
  id: 24,
  name: 'item name 24',
  _id: 5150a1199fac0e6910000002 
}] 
```

所以看起来我已经有问题了。从 pull 调用返回的数组应该是 pull 之后数组中剩下的内容。不知道为什么它没有从项目数组中提取。这是否仅支持通过 ObjectId ant 而不是用户定义的字段进行拉取？

我打电话保存：

```
object.save(); 
```

Mongoose 将其记录为查询：

```
Mongoose: mycollection.update({ _id: ObjectId("5150901ac345824a07000002"), __v: 3 }) 
  { '$inc': { __v: 1 }, '$pull': 
    { attachments: { _id: { '$in': [ ObjectId("5150c64d63773efb1f000002") ] } } } } {} 
```

这说明了为什么我的文档没有被删除。应该删除的数组项的 _id 是：

```
_id: 5150a1199fac0e6910000002 
```

mongoose 发送到数据库要删除的项目是：

```
ObjectId("5150c64d63773efb1f000002") 
```

任何想法我做错了什么？我试图用 _id 以外的东西删除，不确定这是否可能，但从文档看来是这样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-01T20:09:37.407

我发现 $pull 命令对我也不起作用，除非我在参数列表中包含回调。

在我的情况下，这种格式不起作用：

```
UserAlerts.findOneAndUpdate({userId: userId}, {$pull: {alerts: {_id: alertId}}}); 
```

但是这种格式确实：

```
UserAlerts.findOneAndUpdate({userId: userId}, {$pull: {alerts: {_id: alertId}}}, function(err, data){
  console.log(err, data);
}); 
```

根据文档，似乎两者都应该工作，但没有。原因是因为第一种方式需要你在返回的对象上调用 .exec() ，而回调版本会自动调用 exec() 。也给我造成了一些困惑。

所以你需要做这样的事情：

```
UserAlerts.findOneAndUpdate({userId: userId}, {$pull: {alerts: {_id: alertId}}}).exec(); 
```

# python - 从 python 创建的 SWIG 包装的 C++ 对象被提前删除

> ID：15625646
> 
> 赞同：0
> 
> 时间：2013-03-25T22:00:21.830
> 
> 标签：python, swig

我用 SWIG 在 python 中包装了一个 C++ 类和一个 C++ 函数。

```
class Module { ... };
void register_module(Module *m); 
```

函数 register_module() 将给定的模块放在一个全局列表中，以便从那时起 C++ 代码持有一个指向该模块的指针，并使用它。

现在，从嵌入式 python 解释器运行的以下 python 代码**崩溃**：

```
>>> register_module(Module()) 
```

另一方面，以下 python 代码**不会崩溃**：

```
>>> m = Module()
>>> register_module(m) 
```

显然，原因是在第一种情况下，对象是由 python 收集的垃圾，而在第二种情况下则不是。

防止python删除在第一种情况下创建并由C++代码使用的匿名对象的最佳方法是什么？

有没有办法在 register_module() 函数中获取关联的 python 代理对象，然后增加其引用计数？

（我知道如果所讨论的类可以交叉转换为 Swig::Director 类，这是可能的，但是假设我们有一个在 python 中定义的 Module 子类的实例，这里不是这种情况） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:11:49.793

解决方案。
**第 1 步**：向 Module 类添加一个成员，以及两个方法。

```
class Module {
public:
    PyObject *obj;
    void incref() { Py_INCREF(obj); }
    void decref() { Py_DECREF(obj); }
    ...
}; 
```

**第 2 步**：增加 register_module() 中的引用计数。

```
void register_module(Module *m) {
    m->incref();
    ...
} 
```

（不要忘记在某处减少它）

**第 3 步**：每当从 Python 构造一个 Module 对象时，破解 SWIG 生成的包装器以将 obj 成员设置为 PyObject 包装器。

在 SWIG 生成的文件 ModulePYTHON_wrap.cxx 中，找到：

```
SWIGINTERN PyObject *_wrap_new_Module(PyObject *SWIGUNUSEDPARM(self), PyObject *args) {
  PyObject *resultobj = 0;
  ...
  Module *result = 0 ;
  ...
  if ( arg1 != Py_None ) {
    /* subclassed */
    result = (Module *)new SwigDirector_Module(arg1);
  } else {
    result = (Module *)new Module();
  }

  resultobj = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_Module, SWIG_POINTER_NEW |  0 );
  return resultobj;
  ...
} 
```

在我们获得`result->obj =`之前插入：`resultobj = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_Module, SWIG_POINTER_NEW | 0 );`

```
 result->obj = resultobj = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_Module, SWIG_POINTER_NEW |  0 ); 
```

**第 4 步**：指示 SWIG 在生成的包装器中自动实施修复。

在接口文件中添加以下类型映射声明。

```
%typemap(out) Module* {
   result->obj = $result = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_Module, SWIG_POINTER_NEW |  0 );
} 
```

这有效地覆盖了默认生成的用于包装新模块对象的代码。

# c++ - c++ if循环和函数

> ID：15625650
> 
> 赞同：0
> 
> 时间：2013-03-25T22:00:39.003
> 
> 标签：c++, function, if-statement

在我的程序中，它首先询问员工人数。if 循环表示如果输入是输入 < 1，则输出说“请输入至少 1 的值”。如果您输入 0 或 -1，它会输出供用户更正，但它只执行一次。因此，如果用户输入 -1 两次，它将运行第二次。它也使用第二个 if 循环来执行此操作。

```
#include <iomanip>
#include <iostream>

using namespace std;

int getNumEmployees();
int getDaysMissed(int);
double getAverageDays(int,int);

int main()
{
    int numEmployees;
    int daysMissed;
    double average;

    //Get the number of employees
    numEmployees = getNumEmployees();

    //Get the number of days missed
    daysMissed = getDaysMissed(numEmployees);

    //Get the average days missed
    average = getAverageDays(numEmployees, daysMissed);

    cout << "The average number of days missed is: " << average << endl;

    system("pause");
    return 0;
}

int getNumEmployees()
{
    int employeeNum;

    cout << "Enter the number of company employees: ";
    cin >> employeeNum;

    if(employeeNum < 1)
    {
        cout << "Please enter a value greater than 0 " << endl;
        cin >> employeeNum;
    }

    return employeeNum;
}

int getDaysMissed(int employeeNum)
{
    int totalDays = 0;
    int employee;

    for(int count = 1; count <= employeeNum; count++)
    {
        cout << "Enter the number of days employee " << count << " missed: ";
        cin >> employee;
        if(employee < 0)
        {
            cout << "Enter a positive number for days missed " <<     endl;
            cin >> employee;
        }

        totalDays += employee;
    }
    return totalDays;
}

double getAverageDays(int employeeNum, int totalDays)
{
    double averageDays;
    averageDays = totalDays / employeeNum;
    return averageDays;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:02:32.530

改变这个：

```
if(employeeNum < 1) 
```

对此：

```
while(employeeNum < 1) 
```

你想要循环。正如克里斯提到的那样，`if`没有循环。

# dns - 如何检测客户端 ipv4 和 ipv6 地址？

> ID：15625655
> 
> 赞同：1
> 
> 时间：2013-03-25T19:25:59.763
> 
> 标签：dns, ip, ipv6, ip-address

我想创建一个网页检测（可能是双栈）客户端的 ipv4 和 ipv6 地址，有没有没有框架的简单方法？有了框架，我想我可以加载两个页面，每个页面都只能在 IPv4 或 IPv6 中使用（两个域名，一个只有 A 记录，另一个只有 AAAA）。还有另一种干净简单的方法吗？ [http://test-ipv6.com/](http://test-ipv6.com/)可以做到，但我猜他们的实现非常复杂，仅显示 IP 地址。谢谢。我正在考虑用 php $_SERVER["REMOTE_ADDR"] 来做这件事，但是如何在没有 ajax 的情况下将它传递给其他页面（我不知道如何使用）？双栈域名测试页面，1个ipv4回调页面，1个ipv6回调页面。如何将回调传递到测试页面？如果我使用 curl 之类的东西，我会得到服务器的地址而不是客户端的地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:50:24.567

您需要 AJAX 或帧...您必须执行两个额外的请求，一个用于 IPv4，一个用于 IPv6。这不能在没有框架或 AJAX 的 HTML 页面中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-08T17:37:45.753

旧帖子，但您需要在 DNS 服务器上创建 2 个子域。第一个应该是 IPv4 和另一个 IPv6 。

在 ipv4.subdaomain.com 上，仅使用 A 记录。在 ipv6.subdomain.com 上使用 AAAA 记录。

现在，在您的 javascript 中向 ipv6.subdomain.com 和 ipv4.subdomain.com 发送 AJAX 请求。在 php 中返回客户端上的 IP 地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T19:57:55.097

如果您使用像 PHP 这样的服务器端脚本语言，您可以使用以下代码来执行此操作

```
<?php
function look_me_up()
{
    $records = dns_get_record( trim(`hostname --fqdn`) );
    foreach($records as $record)
    {
        if ($record['type'] == 'A')
            $ip = $record['ip'];
    }
    return $ip;
}
?> 
```

[http://php.net/manual/en/function.gethostbyname.php](http://php.net/manual/en/function.gethostbyname.php)

它不需要在框架中，如果页面不是 PHP，您可以使用 jquery ajax 调用来获取信息。我不清楚您现有页面的所有详细信息，以便对部分问题提出很好的建议。

祝你好运！

# sql - 在 SQL 表中查找所有相似的行

> ID：15625660
> 
> 赞同：1
> 
> 时间：2013-03-25T22:01:01.303
> 
> 标签：sql, sql-server, sql-server-2008

我需要编写查询，以查找列 Description 中具有相同或相似重复项的所有项目。

我当前的查询将找到所有完全相同的值，但它必须包含相似的值；例如 SQL Sql 和 sql。

```
SELECT 
    Description, COUNT(*) AS Count_Of    
FROM
    Source 
GROUP BY
    [Description]  
HAVING 
    COUNT(*) > 1 
```

我知道如何使用 LIKE 在表格中搜索与我定义的内容相似的所有项目，我可以将它应用于这个问题吗？

非常感谢任何和所有的帮助，谢谢。

-- 2013 年 3 月 26 日编辑

当我说类似时，我的意思不仅仅是区分大小写。我正在使用公司名称，并且必须考虑使用不同名称的人，例如 Monsters Inc 和 Monsters Incorporated。

我还希望输出显示描述是什么，以便我知道哪些公司在数据库中有冗余。

从那以后，我一直注意区分大小写

```
SELECT
    LOWER (Description), COUNT(*)AS Count_Of 
```

**解决**

我有一个查询来查找所有重复的确切内容，我还有一个查询可以找到我指定的项目的所有类似项目。

我解决它的方法是运行第一个查询并将所有重复的项目存储在一个表中，然后修改第二个查询，以便在运行时它会在我刚刚创建的表中的每个项目的位置找到所有相似的项目。

非常感谢所有帮助过的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:29:20.787

您可以使用**Group By + CASE WHEN**对相似的值进行分组，但需要做一些繁琐的工作，例如：

```
 SELECT 
    CASE WHEN DESCRIPTION LIKE '%ONE%' THEN 'LIKEONE'
         WHEN DESCRIPTION LIKE '%TWO%' THEN 'LIKETWO'
         ELSE 'LIKEOTHER'END , COUNT(*) AS Count_Of    
FROM
    Source 
GROUP BY
    CASE WHEN DESCRIPTION LIKE '%ONE%' THEN 'LIKEONE'
         WHEN DESCRIPTION LIKE '%TWO%' THEN 'LIKETWO'
         ELSE 'LIKEOTHER'END 
HAVING 
    COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:35:36.983

根据“相似”的含义，您会发现 SOUNDEX 很有用：

[http://www.techonthenet.com/oracle/functions/soundex.php](http://www.techonthenet.com/oracle/functions/soundex.php)

如果不是，您所说的相似是什么意思？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:11:46.730

如果您只想进行不区分大小写的比较，那么只需在`GROUP BY`子句中指定适当的不区分大小写的排序规则。

例如，您可以使用以下内容：

```
SELECT 
    Description COLLATE SQL_Latin1_General_CP1_CI_AS,
    COUNT(*) AS Count_Of    
FROM
    Source 
GROUP BY
    [Description] COLLATE SQL_Latin1_General_CP1_CI_AS
HAVING 
    COUNT(*) > 1 
```

# python - 在 Python 中使用日期时间匹配月份和年份

> ID：15625662
> 
> 赞同：1
> 
> 时间：2013-03-25T22:01:07.000
> 
> 标签：python, django, date, datetime

我正在使用 Django 编写博客，我正在尝试使用 get() 从我的数据库中检索具有特定 post_title 和 post_date 的帖子。我使用 datetime 作为 post_date，虽然我可以使用 post_date = date(year, month, day) 来获取在特定日期发布的帖子，但我不知道如何让它忽略 day 参数，我不能只将两个参数传递给 date() 并且因为只能使用整数，所以我认为当天没有任何类型的通配符可以使用。我该怎么做呢？

为了澄清，我正在尝试使用发布年份、月份和标题而不是日期来查找帖子。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:13:48.817

你可以使用`post_date__year`和`post_date__month`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:15:52.357

您正在寻找的内容可能涵盖在 django 中`post_date__year=year`。`post_date__month=month`

`get`然而，所有这些对于参数来说似乎有点奇怪。您在数据库级别是否有任何限制，禁止您在给定年份的同一个月内放置两个具有相同标题的帖子？

# jquery - 使用 jQuery Validate 插件验证动态创建的内容

> ID：15625664
> 
> 赞同：3
> 
> 时间：2013-03-25T22:01:08.927
> 
> 标签：jquery, jquery-validate, forms

我知道可能有几个人问过同样的问题，但我很难找到一个适合我所拥有的解决方案。我有表格，人们可以根据需要添加尽可能多的行（每行有 4 个输入框），然后在不使用时将其删除。我正在使用 .append() jquery 函数来添加行并让它工作。

我很难弄清楚如何验证新的输入框。有人对我想做的事情有很好的解决方案吗？这是我的代码的链接：

```
$(document).ready(function () {

var count = 1;
$('p#add_field').click(function () {

    count += 1;

    $('table#entries').append(
        '<tr>' +
        '<td><input id="cl_' + count + '" name="cl[]' + '" type="text" /></td>' +
        '<td><input id="num_' + count + '" name="num[]' + '" type="text" size="5"/></td>' +
        '<td><input id="description_' + count + '" name="description[]' + '" type="text" size="86"/></td>' +
        '<td><span class="delete">Remove</span></td></tr>');

    $(".delete").click(function () {
        $(this).closest('tr').remove();
    });

});

    // 1\. prepare the validation rules and messages.
    var rules = {

        email: {
            required: true,
            email: true
        },
        lname: "required",
        fname: "required",
        city: "required",
        address: "required",
        'cl[]': "required",
        'num[]': "required",
        'description[]': "required",
        age: {
            required: true,
            number: true,
            maxlength: 3
        },
        phone: {
            required: true,
            phoneUS: true
        }

    }; // end var rules

    // 2\. Initiate the validator
    var validator
        = new jQueryValidatorWrapper("FormToValidate",
            rules);

    // 3\. Set the click event to do the validation
    $("#btnValidate").click(function () {
        if (!validator.validate())
            return;

        alert("Validation Success!");
    });
}); 
```

[http://jsfiddle.net/9k7ph/4/](http://jsfiddle.net/9k7ph/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:10:27.353

`.validate()`1）您在处理程序内部调用，`click`因此它没有在您的表单上正确初始化。您只需在 DOM 上调用*一次*，即可在表单上初始化插件。

2）您也不需要将提交按钮放在点击处理程序中。jQuery Validate 插件已经正确地捕获了`click`事件。

3）您动态创建的字段必须具有唯一`name`属性，否则插件将失败。

4) 您必须在创建规则时将规则动态添加到新创建的字段中。调用`.validate()`不是执行此操作的方法...初始化后将忽略新规则/选项。您可以使用内置方法，例如`rules('add')`，甚至更简单，将其添加`class="required"`到新的输入字段中，此规则将被自动拾取。

我放弃了你的小提琴并从头开始......基本验证正在工作，现在你可以将其他插件重新分层。

**演示：http: [//jsfiddle.net/X5EvD/](http://jsfiddle.net/X5EvD/)**

```
$(document).ready(function () {

    $("#FormToValidate").validate({
        rules: {
            email: {
                required: true,
                email: true
            },
            lname: "required",
            fname: "required",
            city: "required",
            address: "required",
                'cl[]': "required",
                'num[]': "required",
                'description[]': "required",
            age: {
                required: true,
                number: true,
                maxlength: 3
            },
            phone: {
                required: true,
                phoneUS: true
            }
        },
        submitHandler: function (form) {
            alert("Validation Success!");
            return false; // if you need to block normal submit because you used ajax
        }
    });

    var count = 1;
    $('p#add_field').click(function () {

        count += 1;

        $('table#entries').append(
            '<tr>' +
            '<td><input id="cl_' + count + '" name="cl[' + count + ']' + '" type="text" class="required"/></td>' +
            '<td><input id="num_' + count + '" name="num[' + count + ']' + '" type="text" size="5" class="required"/></td>' +
            '<td><input id="description_' + count + '" name="description[' + count + ']' + '" type="text" size="86" class="required"/></td>' +
            '<td><span class="delete">Remove</span></td></tr>');

        $(".delete").click(function () {
            $(this).closest('tr').remove();
        });

    });

}); 
```

# json - perl -- 将哈希从一个脚本发送到另一个（子父级）

> ID：15625669
> 
> 赞同：0
> 
> 时间：2013-03-25T22:01:24.290
> 
> 标签：json, perl

我正在编写一个分叉一个孩子的脚本（一次只有一个）。子查询数据库并应将散列中的结果返回给父。孩子与父母沟通的最佳方式是什么？目前我正在使用以下代码：

**家长：**

```
 close WRITER;
              chomp(my $line = <READER>);
              logEntry("Parent Pid $$ received panelist listing.");
              print '-------------------------';
              print $line ; 
              print '-------------------------';
              %cached_panelists_hash = %{ decode_json $line }; 
```

#关闭阅读器；

**孩子：**

```
 my $json = encode_json \%cached_panelists_hash;
    close READER;
    print WRITER $json;
    close WRITER;  # this will happen anyway 
```

但是这个*有时会*失败，因为没有发送数据并且父节点死亡（JSON格式错误-没有数据格式错误！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:42:13.520

一些可能适合或不适合您的解决方案的集合：

### 穿线

进程间通信是痛苦的。Perl 支持线程（尽管线程实现也很痛苦）。它允许您将变量标记为共享，这在这里可能很有用。但是线程也可以返回值：

```
use threads;

my $query_db_thread = threads->create(\&query_db);

...; # do other stuff at the same time.

my $results = $query_db_thread->join();

sub query_db { ... } # normal sub that returns your data. 
```

Perl 线程的语义*类似于*分叉，即线程使用看起来像相同变量的单独副本（除非明确共享）。

使用函数式编程原则可以使您的程序更容易线程化。

### 可存储模块

您还可以使用例如[`Storable`](https://metacpan.org/module/Storable)模块序列化您的数据。该文档有一些很好的示例，涵盖了打包和解包。简而言之：

```
use Storable qw/freeze thaw/;

# In child:
print PARENT freeze(\%data);

# in parent:
local $/; binmode CHILD;
my $data = thaw(<CHILD>); 
```

Storable 比 JSON “更好”，因为 JSON 不能传输所有 Perl 数据结构，如对象。

### 最简单的解决方案。

如果您的孩子不想返回结果，并且想将其传达给父​​母，则可以通过多种方式发出信号。就像返回一个非 JSON 值一样。您的父母读取可能的 JSON，检查此特殊值，然后解码 JSON（如果未找到标记）或处理错误。空字符串将成为一个很好的标记。

# php - 将Javascript数组传递给PHP文件

> ID：15625671
> 
> 赞同：6
> 
> 时间：2013-03-25T22:01:30.337
> 
> 标签：php, javascript, arrays, post, get

所以我知道 Javascript 是客户端，PHP 是服务器端，这使事情变得复杂，但我想知道如何去做。

我的 javascript 代码中有一个数组（在 HTML 文件中），当用户点击我的提交按钮时，我希望页面将该数组发送到我的 PHP 页面，然后该页面将获取该日期并将其放入 SQL 数据库。

有没有一种简单的方法可以做到这一点？我的数组是这样声明的，`var markers = [];`它只是代码的 javascript 部分中的一个变量。

我已经查看了有关此问题的许多其他帖子，但所有解决方案都不适合我需要做的事情，或者需要对我现在可以做的事情进行太多改变。我对 AJAX 或 JSON 不是很熟悉（不确定到底是什么）。

我的 Javascript 是：

```
var markers = [];

function placeMarker(location) {
        var clickedLocation = new google.maps.LatLng(location);
        var name = document.getElementById("checkname").value;
        var description = document.getElementById("description").value;

        var marker = new google.maps.Marker({
            position: location,
            map: map,
            title: name,
            // This may cause a problem when reloading and editing an existing tour
            // url was found at: http://biostall.com/adding-number-or-letters-to-google-maps-api-markers
            icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=' + markerId + '|FE6256|000000'
        });

        marker.setMap(map);
        markers.push([markerId, name, marker.getPosition().lat(), marker.getPosition().lng(), description]);
        //alert("" + markers);
        markerId = markerId + 1;
    }

    google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);
    });

    google.maps.event.addListener(marker, "click", function() {
        map.removeOverlay(marker);
        marker.setMap(map);
    });
} 

window.onload = function() {
    var form = document.getElementById('theform');
    form.addEventListener('submit', function(){
        var markersField = document.getElementById('markers');
        markersField.value = JSON.stringify(markers);
    });
} 
```

我的 HTML 是：

```
<form action="portal.php" method="post" id="theform">
    <input type="hidden" id="markers" name="markers">
    <button>Submit</button>
</form> 
```

在我的 portal.php 文件中，我有：

```
$markers = json_decode($_POST['markers']);
echo $markers; 
```

即使我知道数组中有元素，php 页面中也没有打印出来，这让我相信数组没有被传递。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T22:10:16.930

我假设您在提交表单时已经重新加载了您的页面，并且您对此没有问题。如果是这样，您可以为该数据添加一个隐藏字段，并将其添加到表单提交之前的字段中：

```
<form method="post" id="theform">
    <!-- your existing form fields -->

    <input type="hidden" id="markers" name="markers">

    <button>Submit</button>
</form> 
```

然后使用这个 JavaScript

```
window.onload = function() {
    var form = document.getElementById('myform');
    form.addEventListener('submit', function(){
        var markersField = document.getElementById('markers');
        var markers = [1,2,3];
        markersField.value = JSON.stringify(markers);
    });
} 
```

并将其添加到您的 PHP 中，您可以在其中处理提交的表单数据：

```
$markers = json_decode($_POST['markers']); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T22:41:59.760

这可能是最直接的方法。它使用 jQuery，这对这类东西很有用。第一部分只是将数组作为`markers`AJAX POST 中的参数发送。

```
// Javascript / jQuery
$.ajax({
    type: 'POST',
    data: markers,
    dataType: 'json',
    url: 'yourPHPFile.php'
}); 
```

这部分是接收帖子并将 JSON 解码为 PHP 数组的 PHP。

```
// PHP in 'yourPHPFile.php'
// Santizing the string this way is a little safer than using $_POST['markers']
$markersFromPost = filter_input(INPUT_POST, 'markers', FILTER_SANITIZE_STRING);

// Turn the sanitized JSON string into a PHP object
$markers = json_decode($markersFromPost); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T22:04:36.870

您将需要学习 AJAX 和 JSON 的基础知识。jQuery 可以帮助您解决这个问题，我推荐它作为一个很好的起点。

使用 AJAX 提交 JSON，然后使用`$phpArray = json_decode($submittedJson);`和 viola，您将拥有提交的 javascript 对象的漂亮 PHP 数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T22:05:19.000

发送一个 json 对象并将其转换为一个数组`json_decode($obj)`

# actionscript-3 - 将 AS2 代码转换为 AS3

> ID：15625674
> 
> 赞同：-2
> 
> 时间：2013-03-25T22:01:46.140
> 
> 标签：actionscript-3, flash, actionscript-2

我从未使用过 AS2，我想知道您如何将其转换为 AS3？任何帮助将不胜感激。

```
stop();
var nr:Number = 0;
var $mc:MovieClip;

this.onEnterFrame = function (){
    if(nr < 100)
    {
            $mc = this.attachMovie("fire", "fire"+nr, nr);
            $mc._x = random(4)-2;
            $mc._yscale = 80;
            $mc._rotation = random(2)-1;
            random(2) == 0 ? $mc._xscale = 80:$mc._xscale = -80; 
            nr++;
    } else {
        nr = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:08:34.087

请参阅下面重构代码中的内联注释：

```
stop();
var ctr:int = 0;  //var to keep track of how many instances you've made of the Fire class 
var mc:DisplayObject;  //temporary object to hold the created instance of the FIre class

this.addEventListener(Event.ENTER_FRAME,onEnterFrame); //this is how you do enter frame handlers in AS3

function onEnterFrame(e:Event):void {
    if(ctr < 100)
    {
            /*
               instead of doing the attach movie clip, you have give your Fire object it's own class / actionscript linkage, then you instantiate it and add it to the display list with addChild()
            */    

            mc = new FireClass();
            mc.x = random(4)-2;   //in AS3 there is just Math.Random(), which returns a number between 0 and 1\.  I've made a random() function below that emulates the old random() function.  Also, ._x & ._y are now just .x & .y
            mc.scaleY = .8;  //scaleX/Y have changed names, and 0 - 100 is now 0 - 1.
            mc.rotation = random(2)-1;
            mc.scaleX = random(2) == 0 ? .8 : -.8; 
            addChild(mc);
            ctr++;
    } else {
        this.removeEventListener(Event.ENTER_FRAME,onEnterFrame); //remove the listener since ctr has reached the max and there's no point in having this function running every frame still
    }
}

function random(seed:int = 1):Number {
    return Math.Random() * seed;
    //if you're expecting a whole number, you'll want to to this instead:
    return Math.round(Math.random() * seed);  //if seed is 4, this will return 0,1,2,3 or 4
} 
```

# c - 函数指针 typedef 的前向声明

> ID：15625677
> 
> 赞同：8
> 
> 时间：2013-03-25T22:02:04.573
> 
> 标签：c, function-pointers, typedef, forward-declaration

我遇到了一个特殊的问题。最好只是向您展示我正在尝试做的事情然后解释它。

```
typedef void functionPointerType ( struct_A * sA );

typedef struct
{
    functionPointerType ** functionPointerTable;
}struct_A; 
```

基本上，我有一个结构体`struct_A`，其中有一个指向函数指针表的指针，函数指针的参数类型为`struct_A`。但我不确定如何编译，因为我不确定如何或是否可以转发声明。

任何人都知道如何实现这一目标？

编辑：代码中的小修复

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T22:08:03.433

按照您的建议转发声明：

```
/* Forward declare struct A. */
struct A;

/* Typedef for function pointer. */
typedef void (*func_t)(struct A*);

/* Fully define struct A. */
struct A
{
    func_t functionPointerTable[10];
}; 
```

例如：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct A;

typedef void (*func_t)(struct A*);

struct A
{
    func_t functionPointerTable[10];
    int value;
};

void print_stdout(struct A* a)
{
    printf("stdout: %d\n", a->value);
}

void print_stderr(struct A* a)
{
    fprintf(stderr, "stderr: %d\n", a->value);
}

int main()
{
    struct A myA = { {print_stdout, print_stderr}, 4 };

    myA.functionPointerTable[0](&myA);
    myA.functionPointerTable[1](&myA);
    return 0;
} 
```

输出：

```
标准输出：4
标准错误：4

```

请参阅在线演示[http://ideone.com/PX880w](http://ideone.com/PX880w)。

* * *

正如其他人已经提到的，可以添加：

```
typedef struct A struct_A; 
```

在函数指针`typedef`和完整定义之前`struct A`是否最好省略`struct`关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:10:23.270

我认为这就是你要找的：

```
//forward declaration of the struct
struct _struct_A;                               

//typedef so that we can refer to the struct without the struct keyword
typedef struct _struct_A struct_A;              

//which we do immediately to typedef the function pointer
typedef void functionPointerType(struct_A *sA); 

//and now we can fully define the struct    
struct _struct_A                        
{
    functionPointerType ** functionPointerTable;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:17:13.800

There's another way to do it:

```
typedef struct struct_A_
{
    void  (** functionPointerTable) (struct struct_A_);
}struct_A;

 void typedef functionPointerType ( struct_A ); 
```

# amazon-web-services - 检测 http 请求是否来自我们账户中的 EC2 实例

> ID：15625678
> 
> 赞同：2
> 
> 时间：2013-03-25T22:02:05.130
> 
> 标签：amazon-web-services

我们有一个通过 Web 服务进行通信的应用程序。我们需要区分来自我们系统外部的请求和来自我们 AWS 账户中另一个 EC2 盒子的请求。

理想的解决方案是查看原始 IP 地址并检测它是在网络内部还是外部。在我们的办公室里，我们需要做的就是寻找来自 192.168.xx 的请求，不过我的猜测是，它在亚马逊上并不那么简单。

如何判断 http 请求是否来自我账户中的 EC2 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:19:08.743

如果 EC2 实例位于同一区域，您可以创建一个安全组，该安全组仅允许来自该安全组中其他计算机的流量通过特定端口号（例如 8888）进入。将所有机器添加到该组。然后，您可以添加另一个 Web 服务器实例来侦听该端口，并知道请求只能来自您的计算机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T01:28:57.243

每当您有两个或更多 EC2 实例需要相互通信时，最佳实践是在[VPC](http://aws.amazon.com/vpc/)中预置您的实例。有效地将 AWS 云网络的一个角落分割为您自己的私人用途（类似于 VLAN）。这很容易解决您的问题，因为请求将来自您指定的任何私有地址范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:04:47.413

实际上，只需查看请求是否来自EC2 保留的任何 AWS[公共 IP 地址范围。](https://forums.aws.amazon.com/ann.jspa?annID=1701)与检查 192.168.xx 基本相同

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T06:47:45.660

在您的应用程序中，您可以简单地专门限制对其他实例的 IP 的访问。

使用[AWS Unified CLI 工具](https://github.com/aws/aws-cli)和可选的（但推荐的）[jq](http://stedolan.github.com/jq/)工具，您可以执行以下操作：

```
aws ec2 describe-instances \
    | jq ".Reservations[].Instances[].NetworkInterfaces[].IpAddress" 
```

这将为您提供与您的 AWS 账户关联的所有 EC2 实例的所有 IP 地址的列表。

# chef-infra - Knife Rackspace - 无法引导

> ID：15625679
> 
> 赞同：0
> 
> 时间：2013-03-25T22:02:05.463
> 
> 标签：chef-infra, rackspace-cloud

我正在尝试使用以下命令使用 Knife Rackspace（来自 Windows Workstation）引导 Windows 服务器

```
knife rackspace server create -r 'role[TestWebRole]' --server-name BootstrapTest --node-name BootstrapTest --image 26fec9f2-2fb5-4e5e-a19f-0d12540ec639 --flavor 3 -VV 
```

我可以看到服务器已创建但在 Bootstrap 刀挂在

```
Waiting for sshdDEBUG: Bootstrap IP Address 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T18:22:31.143

确保将您的刀架空间更新到最新 (0.7.0) ，他们添加了一个新的 winrm 引导选项

```
$gem update knife-rackspace 
```

使用 winrm 而不是默认 ssh 创建服务器的命令

```
knife rackspace server create -r 'role[TestWebRole]' --server-name BootstrapTest --node-name BootstrapTest --image 26fec9f2-2fb5-4e5e-a19f-0d12540ec639 --flavor 3 -VV --bootstrap-protocol winrm 
```

您可能还需要使用`--server-create-timeout <seconds>`选项，因为我已经看到 windows kicks 需要一些时间

发现完成这项工作所需的两件事 1）如果您不指定此选项，则 chef-client 的批处理文件将尝试运行 bash 命令

```
 --distro windows-chef-client-msi 
```

2) 您必须从预先配置了 winrm 的机器中克隆，否则将无法连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:58:25.057

对我来说似乎很明显。您正在引导 Windows 客户端。Knife 在 rackspace 上启动节点并开始等待 ssh 守护进程在客户端启动。由于客户端是 Windows - 它没有运行任何 sshd 并且不能接受传入的 ssh 连接。

# graph - 这种类型的图是什么，我可以使用什么算法来遍历它？

> ID：15625681
> 
> 赞同：1
> 
> 时间：2013-03-25T22:02:07.590
> 
> 标签：graph

我有一个“节点”网络，每个节点都会产生“结果”。每个节点和结果都有一个唯一的名称/ID。结果用作每个节点的输入和输出。当一个节点的所有输入结果都可用时，它可以被执行。当节点完成执行时，其输出结果将可用。

例如：

```
input node output
       A    x
x      B    y,z
x,z    C    q 
```

在上述网络中。节点 A 没有输入，可以先执行。然后 B 可以在结果 x 可用时执行。当 A 和 B 都完成时，C 可以执行，因为它取决于 A 和 B 的结果。结果也可以是最终产品，如本例中的 y，它不用作任何节点的输入。

网络可能要复杂得多。每个节点可以产生多个结果，并且它可以具有多个输入依赖项。

我希望能够选择一个结果，比如“q”并找出需要执行哪些节点才能到达那里。我想在更大的节点网络中为多个结果执行此操作。

我觉得这是一个常见的算法，但我没有这方面的经验。它不像树一样分层，因为依赖关系可以创建圆圈。从我读过的内容来看，我认为它一定是一种森林图。

无论如何，它必须是可遍历的。总是至少有一个节点可以首先执行，并且所有其他节点应该能够按照某种顺序执行，而不会造成两个节点相互等待完成的死锁。

用代码描述这个网络/它的节点的常用方法是什么，这种网络的正式名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:04:21.790

您要查找的名称是**'dependency graph'**。

用于分解的算法称为**“拓扑排序”**（参见：[http](http://en.wikipedia.org/wiki/Topological_sorting) ://en.wikipedia.org/wiki/Topological_sorting ）

解决此类依赖关系的最著名工具之一称为**make**。

与您的示例对应的 Makefile 如下所示：

```
x :
    echo node A

y z : x
    echo node B

q   : x z
    echo node C 
```

如您所见，语法与示例表中使用的语法几乎相同。唯一的主要区别是“列”的顺序是颠倒的——说“到达……我首先需要……”而不是“从……我可以去……”。

键入`make <TARGET>`您可以轻松验证它是否按照您希望的顺序解析节点。这里有一些例子：

```
make q
  * node A
  * node B
  * node C

make x
  * node A

make z
  * node A
  * node B 
```

（为了使输出更漂亮，这是用于上面输出的版本：

```
x :
    @echo " * node A"

y z : x
    @echo " * node B"

q   : x z
    @echo " * node C" 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:06:02.717

除了只是一种图，听起来你想要的语义就像一个带有彩色标记的[Petri 网。](http://en.wikipedia.org/wiki/Petri_net)Petri 网的可达性分析是一个成熟的问题，文献中存在算法。也许维基百科的文章会给你一些想法，从那里开始。

# durandal - Durandal路由器中查询参数

> ID：15625684
> 
> 赞同：9
> 
> 时间：2013-03-25T22:02:18.603
> 
> 标签：durandal

我有一条具有查询参数的路线。激活视图时，会收集查询参数并将其传递给服务器端请求。我不知道参数是什么。我只是将它们传递给服务器进行处理。

在我的 viewmodel activate 方法中，context 参数是一个包含查询参数的对象，外加两个额外项：routeInfo 和 router。Durandal 将这些添加到查询参数中。首先，我不希望那些传递到服务器端。其次，如果我的查询参数也包含这两个名称，那么它们会被覆盖。

我查看了路由器代码并找到了将它们添加到我的参数的位置（在 dequeueRoute 中），但找不到阻止添加的方法，也没有办法在没有它们的情况下仅获取我的查询参数。

有谁知道我如何在没有路由信息和路由器的情况下获取查询参数？出于好奇，为什么首先添加它们而不是单独的参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T00:40:08.963

你的权利。我继续测试你的说法，似乎所有查询字符串参数都被写入上下文参数。

所以如果你有这样的路线：

`http://www.somesite.com/#/services/?routeInfo=value1&router=value2&param1=value3`

在您的激活方法中：

```
define(function() {
   return {
     activate: function(context) {
        console.log(context);
     }
   };
}); 
```

然后`context`将是一个json对象：

```
{ 
   routeInfo: {...}, // info object of moduleId and such
   router: {...}, // reference to the router.js pluggin
   param1: 'value3',
   splat: ['?routeInfo=value1&router=value2&param1=value3']
} 
```

因此，查询字符串参数正在写入`context`对象，但如果您的查询字符串参数是`routeInfo`, `router`，否则`splat`会发生不好的事情。特别是如果它`splat`！

所以，我想只是不要使用这些参数..

此外，如您所见，您的查询字符串参数被传递给 splat 对象。您可以通过执行以下操作轻松解析查询字符串：

```
function parsePlease(queryString) {
   var obj = {};
   var splitV = queryString.split('&');
   for (var i = 0, max = splitV.length; i< max; i++) {
      obj[splitV[i].split('=')[0]] = splitV[i].split('=')[1];
   }
   return obj;
} 
```

类似的东西。你可能想改进它..我只是把它搅了起来。

此外，您还可以从[window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)对象获取查询字符串参数。从`window.location.search`对象中，它将包含分隔符之后的所有内容`?`。

这能回答你的问题吗？

# java - 为什么我得到 MappingNotFound 异常

> ID：15625689
> 
> 赞同：1
> 
> 时间：2013-03-25T22:03:09.647
> 
> 标签：java, database, hibernate, mapping

你好，我从映射我的休眠中得到异常： Initial SessionFactory creation failed.org.hibernate.MappingNotFoundException: resource: bbstats/domain/User.hbm.xml not found 线程“main”中的异常 java.lang.ExceptionInInitializerError

这是我的 hibernate.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
       <!DOCTYPE hibernate-configuration PUBLIC
               "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
               "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://sql10.lh.pl:3306/zamocno_bb</property>
        <property name="connection.username">root</property>
        <property name="connection.password"></property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">false</property>

        <property name="hbm2ddl.auto">validate</property>

        <mapping resource="bbstats/domain/User.hbm.xml"/>

    </session-factory>
</hibernate-configuration> 
```

这是我的 User.hbm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="bbstats.domain">

    <class name="bbstats.domain.Users" table="USERS">
        <id name="id" column="ID">
            <generator class="native"/>
        </id>
        <property name="title" column="nick"/>
    </class>

</hibernate-mapping> 
```

在这里Users.class：

```
package bbstats.domain;

/**
 * Created with IntelliJ IDEA.
 * User: Rafał
 * Date: 25.03.13
 * Time: 13:33
 * To change this template use File | Settings | File Templates.
 */
public class Users
{
    private Long id;
    private String title;

    public Users() {}

    public Users(Long id, String title) {
        this.id = id;
        this.title = title;
    }

    public Long getId() {
        return id;
    }

    private void setId(Long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
} 
```

和 HibernateUtil.class：

```
package bbstats.util;

import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class HibernateUtil
{

    private static final SessionFactory sessionFactory = buildSessionFactory();

    private static SessionFactory buildSessionFactory() {
        try {
            return new Configuration()
                    .configure()
                    .buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

目录结构： ![在此处输入图像描述](../Images/55268ef7d7481c069d8bf250be8b6853.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:24:58.153

问题出在您的**User.hbm.xml中**

这里

```
<class name="bbstats.domain.Users" table="USERS">
        <id name="id" column="ID">
            <generator class="native"/>
        </id>
        <property name="title" column="nick"/>
    </class> 
```

删除类的完全限定名称，因为您已经在此`<hibernate-mapping package="bbstats.domain">`行中提供了类的包名称

使用以下代码更新您的**User.hbm.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="bbstats.domain">

    <class name="Users" table="USERS">
        <id name="id" column="ID">
            <generator class="native"/>
        </id>
        <property name="title" column="nick"/>
    </class>

</hibernate-mapping> 
```

**注意：** 您的 pojo 名称是***Users.java***我建议您根据您的域对象将 User.hbm.xml 重命名**为**Users.hbm.xml **，**以便于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T18:45:11.607

确保在 Eclipse 中 Java 构建路径必须反映 * */* .xml。右键单击项目 > 属性 > Java 构建路径 > 源 > 添加 * */* .xml（构建路径上的源文件夹，包括 **.xml）

# escaping - 在 extjs 中转义单引号

> ID：15625695
> 
> 赞同：0
> 
> 时间：2013-03-25T22:03:31.207
> 
> 标签：escaping, extjs3

在我的jsp中，我有这个代码：

```
Ext.MessageBox.show({
title: "<bean:message bundle='pageRes' key='keyXXX'/>",
msg: "<bean:message bundle='pageRes' key='keYYY'/>",
prompt:true,
buttons: Ext.MessageBox.OKCANCEL,
fn: someFn,
icon: Ext.MessageBox.QUESTION
}); 
```

现在这可以按预期工作，但我的问题是：对于`title`和`msg`配置选项，我为什么不需要转义`pageRes`和`keyXXX`和周围的单引号`keyYYY`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:49:34.750

那是因为如果你的字符串以单引号开始，你只需要转义单引号，而且如果你的字符串以双引号开始，你只需要转义双引号。

# jquery - jQuery - 如何使用 Enter 键在列表中打开 URL

> ID：15625696
> 
> 赞同：0
> 
> 时间：2013-03-25T22:03:41.110
> 
> 标签：jquery

我有一个 jQuery“自动建议”类型的搜索框。它使用 Href 填充搜索结果列表，以便用户可以单击列表中的项目以转到相关页面。用户还可以使用箭头键滚动列表以进行选择。我现在要做的是允许用户按 Enter 键转到他们选择的 URL。我有 Enter 键工作，但我不确定我应该如何构建列表或从列表中提取 Href 等。或者我应该有第二个隐藏列表，它只包含纯 URL？

这是迄今为止标记为###的相关部分的代码：

```
<script>

var results_list = '';

function callback(result) {
    results_list.show();
    var items = [];
    $.each(result, function (i, item) {
        items.push("<li><a href='/view/raw/" + item.collection + "/" + item.classname + "/" + item._id + "'>" + item.Title + "</a></li>");
    });
    results_list.append(items.join(''));
}

var list_selected;
var li = '';

$('.search').each(function () {
    $(this).keyup(function (e) {
        var search_type = $(this).attr('name');
        results_list = $('#' + search_type + '_list');
        li = results_list.children();
        var key_code = e.keyCode;
        if ($.inArray(key_code, [37, 38, 39, 40]) > -1) {
            if (e.which === 40) {
                if (list_selected) {
                    list_selected.removeClass('selected');
                    next = list_selected.next();
                    if (next.length > 0) {
                        list_selected = next.addClass('selected');
                    } else {
                        list_selected = li.eq(0).addClass('selected');
                    }
                } else {
                    list_selected = li.eq(0).addClass('selected');
                }
            } else if (e.which === 38) {
                if (list_selected) {
                    list_selected.removeClass('selected');
                    next = list_selected.prev();
                    if (next.length > 0) {
                        list_selected = next.addClass('selected');
                    } else {
                        list_selected = li.last().addClass('selected');
                    }
                } else {
                    list_selected = li.last().addClass('selected');
                }
            }
        } else {
            // ### relevant section ###
            if (key_code == 13) {  // what to do here??
                window.location = list_selected.html();
            // ###
            } else {
                results_list.empty();
                var params = {
                    'search_type': search_type,
                        'q': $(this).val()
                };
                if ($(this).val()) {
                    ajaxThis("search_box", params, callback);
                }
            }
        }
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:45:10.463

```
if ( key_code == 13 && $('.selected').length > 0 ) { // Make sure there's a selection
  var selected_item = $('li.selected:first a'); // select li and a

   // Two options:
   // A.) Make sure the li a's href is an absolute path so you can do:
    window.location = selected_item.attr('href');
   // B.) Keep the relative href, trigger a click on the element:
    $(selected_item).trigger('click');
 } 
```

# ruby-on-rails - Ruby on Rails 远程创建表单，弹出显示部分

> ID：15625697
> 
> 赞同：0
> 
> 时间：2013-03-25T22:03:43.683
> 
> 标签：ruby-on-rails, ajax

我是一名 RoR 初级，我正在制作在线商店应用程序，所以：

*   在产品的展示视图中，我有远程表单`@line_item`
*   在 products_controller 的显示动作中我有`@line_item = LineItem.new`
*   我有`create.js.erb`文件`views/line_items`
*   我的创建操作`line_items_controller`如下所示：

    `respond_to do |format| format.js { } end`

**QUESTION:**如何在line item的create form提交时弹出line_item的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:49:48.440

您不需要那里的控制器中的那一行 - 您所需要的只是触发 create.js.erb 中弹出窗口的显示。该js文件将在执行创建控制器方法后按约定呈现，因为它是一个异步调用。

# exec - Exec的除非命令阻止我的目录编译

> ID：15625703
> 
> 赞同：0
> 
> 时间：2013-03-25T22:04:07.213
> 
> 标签：exec, puppet

我在使用 Puppet 2.6.7 时遇到了一些奇怪的问题。我有一个使用 shell 脚本作为命令的 exec。另外，我想使用相同的脚本来执行 exec 的“除非”属性，只需传递一个标志来测试一些东西：

```
exec { "myexec":
  path        => '/bin:/usr/bin',
  command     => "/opt/myapp/script.sh -o ${name}",
  unless      => "/opt/myapp/script.sh -o ${name} -t",
} 
```

我正在使用 puppet 和 puppetmaster。如果我将代码保留为如上所示，我会收到一个错误：“无法评估：找不到命令'/opt/myapp/script.sh'”并且该过程在编译时抛出错误。但是，如果我删除 unless 行，一切都会正确编译。奇怪的是，对于这两个命令来说，命令是相同的，但只是除非抱怨找不到它。

有没有人知道如何解决这个问题或任何解决方法？它是 Puppet 2.6.14 中的错误吗？

谢谢您的帮助！

赫克托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:04:09.660

`unless`在 .之前运行`command`，这就是为什么您不会收到`command`. 问题在于`path`，这是正确的声明：

```
path => [ '/bin/', '/usr/bin/' ] 
```

# php - MySQL PHP 查询优化 - 反馈

> ID：15625708
> 
> 赞同：0
> 
> 时间：2013-03-25T22:04:20.107
> 
> 标签：php, mysql, performance, apache, optimization

我需要每天运行这个脚本（cron）来更新 1 个月的反馈总量（至少这是我现在设计的）。这是我的代码。有人对我应该如何解决这个问题有更好的了解吗？也许改变我的方式或优化我的 updateMonthlyFeedback.php 脚本？

**updateMonthlyFeedback.php**

```
session_start();
include("db.php");

$sql="SELECT MAX(uid) as maxUID FROM users";
$result = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_array($result);
$maxUID = $row['maxUID'];

for($i=0;$i<$maxUID;$i++){
    $sql="SELECT COUNT(*) as negativeCount FROM feedbacks WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = -1 AND uid = '$i'";
    $result = mysql_query($sql) or die(mysql_error());
    $row = mysql_fetch_array($result);
    $negativeCount = $row['negativeCount'];
    $sql="SELECT COUNT(*) as neutralCount FROM feedbacks WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = 0 AND uid = '$i'";
    $result = mysql_query($sql) or die(mysql_error());
    $row = mysql_fetch_array($result);
    $neutralCount = $row['neutralCount'];
    $sql="SELECT COUNT(*) as positiveCount FROM feedbacks WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = 1 AND uid = '$i'";
    $result = mysql_query($sql) or die(mysql_error());
    $row = mysql_fetch_array($result);
    $positiveCount = $row['positiveCount'];
    $sql = "UPDATE feedback_totals SET negativeCount = '$negativeCount', neutralCount = '$neutralCount', positiveCount = '$positiveCount' WHERE uid = '$i'";
    $result=mysql_query($sql) or die(mysql_error());
} 
```

**MySQL 表**

```
CREATE TABLE feedback_totals (
    uid                     VARCHAR(40),
    negativeCount           int,
    neutralCount            int,                
    positiveCount           int,
    halfStarCount           int,
    oneStarCount            int,
    oneHalfStarCount        int,
    twoStarCount            int,
    twoHalfStarCount        int,
    threeStarCount          int,
    threeHalfStarCount      int,
    fourStarCount           int,
    fourHalfStarCount       int,
    fiveStarCount           int,
    PRIMARY KEY             (uid)
    #FOREIGN KEY            (uid) REFERENCES users(uid) ON DELETE CASCADE
);

CREATE TABLE feedback_last_month (
    uid                     VARCHAR(40),
    negativeCount           int,
    neutralCount            int,                
    positiveCount           int,
    halfStarCount           int,
    oneStarCount            int,
    oneHalfStarCount        int,
    twoStarCount            int,
    twoHalfStarCount        int,
    threeStarCount          int,
    threeHalfStarCount      int,
    fourStarCount           int,
    fourHalfStarCount       int,
    fiveStarCount           int,
    PRIMARY KEY             (uid)
    #FOREIGN KEY            (uid) REFERENCES users(uid) ON DELETE CASCADE
);

CREATE TABLE feedback (
    feedback_id             INT NOT NULL AUTO_INCREMENT,
    uid                     VARCHAR(40),INDEX (uid),
    sender_id               VARCHAR(40),
    type                    int,                #-1 = neg, 0 = neutral, 1 = positive
    starCount               VARCHAR(40),
    description             VARCHAR(80),
    date_created            timestamp DEFAULT CURRENT_TIMESTAMP, 
    fromType                VARCHAR(40), # buyer or seller
    fromUsername            VARCHAR(40),
    PRIMARY KEY             (feedback_id)
    #FOREIGN KEY            (uid) REFERENCES users(uid) ON DELETE CASCADE
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:28:27.210

显然这里有很多重复。其中大部分可以通过重构代码来删除，但作为一个起点，即使使用当前流程，您也可以通过使用更好的数据库 API 使其性能更好。

所以我建议的第一件事是停止使用这些`mysql_xxx()`函数，并改用`PDO`库。旧`mysql`函数无论如何都已弃用，因此尽可能不建议使用它们，但在这种情况下，使用它们是有特定原因的，`PDO`因为它比旧函数具有显着的性能优势。

PDO 允许您使用名为 Prepared Queries 的功能，如果您重复调用类似的查询，则可以让数据库更有效地缓存查询。

其次，查询本身。是的，这些绝对可以简化。循环中的三个查询可以使用`GROUP BY`. 查询看起来像这样：

```
SELECT COUNT(*) FROM users
WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY )
AND uid = :uid
AND type = -1 OR type = 1 OR type = 1
GROUP BY type 
```

您应该从此查询中获得与要获取的三个记录相同的三个值。

你可以做的还有很多，但这是一个好的开始。我相信你会得到其他答案来进一步帮助你。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:36:08.093

好的，正如其他人所说，使用 PDO/MYSQLI。但是，使用您已经拥有的代码，这里有两种方法可能会更好地工作和执行。

首先是使用相关子查询来获取负/正/中性值。这很好，因为它很短，但它绝不是理想的。您仍在对数据库执行大量查询（每个 uid + 初始更新 3 个）。但是，您只是从 php 向服务器发送一个查询，并让数据库完成所有其余工作。这可能对少数用户来说效果很好，但过一段时间就会开始出现性能问题。这一查询将更新 feedback_totals 中的所有行。但是，如果 feedback_totals 中没有一行，它不会为任何新的 uid 插入新行。

```
//one query, this is it. updates it all.
$sql = "UPDATE `feedback_totals`
        SET
            `negativeCount`=(SELECT COUNT(*) FROM `users` WHERE `uid`=`feedback_totals`.`uid` AND `date_created` >= (CURDATE() - INTERVAL 30 DAY) AND `type`=-1),
            `positiveCount`=(SELECT COUNT(*) FROM `users` WHERE `uid`=`feedback_totals`.`uid` AND `date_created` >= (CURDATE() - INTERVAL 30 DAY) AND `type`=1),
            `neutralCount`=(SELECT COUNT(*) FROM `users` WHERE `uid`=`feedback_totals`.`uid` AND `date_created` >= (CURDATE() - INTERVAL 30 DAY) AND `type`=0)";
$result=mysql_query($sql) or die(mysql_error()); 
```

* * *

从长远来看，第二个可能更好。在一次查询中查询出所有需要的数据。循环遍历该结果，将其格式化为 php，遍历该结果并进行更新。这个可能会执行得更好，因为您运行的查询数量要少得多（1 用于获取数据 + 1 用于每个 uid）。

```
//query for all the data
$sql="SELECT
            `uid`,
            `type`,
            COUNT(*) AS cnt
        FROM `users`
        WHERE `date_created` >= (CURDATE() - INTERVAL 30 DAY)
        GROUP BY `uid`,`type`";
$result=mysql_query($sql) or die(mysql_error());

$data = array();
//loop through the result
while($row=mysql_fetch_assoc($result)){
    //if the uid is not in $data
    if(!isset($data[$row['uid']])){
        //add it with a blank array
        $data[$row['uid']] = array('negativeCount'=>0,'neutralCount'=>0,'positiveCount'=>0);
    }
    //add to the data for this uid depending on type
    if($row['type']==-1){
        $data[$row['uid']]['negativeCount']=$row['cnt'];
    } elseif($row['type']==1){
        $data[$row['uid']]['positiveCount']=$row['cnt'];
    } else {
        $data[$row['uid']]['neutralCount']=$row['cnt'];
    }
}

//now loop through the data and update the table
foreach($data as $uid=>$cnt){
    $sql = "UPDATE `feedback_totals`
            SET
                `negativeCount`={$cnt['negativeCount']},
                `positiveCount`={$cnt['positiveCount']},
                `neutralCount`={$cnt['neutralCount']}
            WHERE `uid`=$uid";
    $result=mysql_query($sql) or die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:47:53.877

我会运行三个查询来获取您需要的信息：

```
SELECT uid, COUNT(*) as negativeCount FROM users
WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = -1 
GROUP BY uid ORDER BY uid ASC";

SELECT uid, COUNT(*) as neutralCount FROM users
WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = 0
GROUP BY uid ORDER BY uid ASC";

SELECT uid, COUNT(*) as positiveCount FROM users
WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = 1 
GROUP BY uid ORDER BY uid ASC"; 
```

然后我会遍历结果，在它们与当前 uid 对齐时递增行。返回结果的一个棘手之处是缺少 uid 表示计数为 0。但它们是有序的，因此您会知道增加返回的结果（通过您正在使用的 fetch_row）或每个单独的索引的结果。

它看起来像这样：

```
// Have to load up the first result
$p_row = mysql_fetch_array($positive_result);
$neu_row = mysql_fetch_array($neutral_result);
$neg_row = mysql_fetch_array($negative_result);

for($i = 0; $i < $maxUID; $i++){
  $positive = $neutral = $negative = 0;
  if($p_row[0] == $i){
    $positive = $p_row[1];
    $p_row = mysql_fetch_array($positive_result);
  }
  if($neu_row[0] == $i){
    $neutral = $neu_row[1];
    $neu_row = mysql_fetch_array($neutral_result);
  }
  if($neg_row[0] == $i){
    $negative = $neg_row[1];
    $neg_row = mysql_fetch_array($negative_result);
  }
  $sql = "UPDATE feedback_totals SET negativeCount = '$negative', neutralCount = '$neutral', positiveCount = '$positive' WHERE uid = '$i'";
  mysql_query($sql) or die(mysql_error());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T23:47:56.867

所有这些都可以通过一个 SQL 查询来完成：

```
INSERT INTO `feedback_totals` (uid,negativeCount,positiveCount,neutralcount)
SELECT users.uid, 
  COUNT(neg.feedback_id) as negativeCount, 
  COUNT(pos.feedback_id) as positiveCount, 
  COUNT(neut.feedback_id) AS neutralCount
FROM users
LEFT JOIN feedback neg  ON neg.uid =users.uid AND neg.type=-1 AND neg.date_created >=(CURDATE() - INTERVAL 30 DAY)
LEFT JOIN feedback pos  ON pos.uid =users.uid AND pos.type=1  AND pos.date_created >=(CURDATE() - INTERVAL 30 DAY)
LEFT JOIN feedback neut ON neut.uid=users.uid AND neut.type=0 AND neut.date_created>=(CURDATE() - INTERVAL 30 DAY)
GROUP BY uid
ON DUPLICATE KEY UPDATE 
  negativeCount=VALUES(negativeCount), 
  positiveCount=VALUES(positiveCount), 
  neutralCount=VALUES(neutralCount); 
```

这`ON DUPLICATE KEY UPDATE`将允许查询添加新行以及更新现有行。[你可以在SQL Fiddle](http://sqlfiddle.com/#!2/f15f4/1/0)上玩这个

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T22:18:11.700

first try change your Mysql for mysqli

just change your db.php for:

```
$mysqli = new mysqli("localhost", "XXX", "XXX", "XXX");

if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
} 
```

And change your code for:

```
session_start();
include("db.php");
$sql="SELECT MAX(uid) as maxUID FROM users; ";

for($i=0;$i<$maxUID;$i++){
    $sql.="SELECT COUNT(*) as negativeCount FROM users WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = -1 AND uid = '$i'; ";
    $sql.="SELECT COUNT(*) as neutralCount FROM users WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = 0 AND uid = '$i'; ";
    $sql.="SELECT COUNT(*) as positiveCount FROM users WHERE date_created >= ( CURDATE() - INTERVAL 30 DAY ) AND type = 1 AND uid = '$i'; ";
    $sql.="UPDATE feedback_totals SET negativeCount = '$negativeCount', neutralCount = '$neutralCount', positiveCount = '$positiveCount' WHERE uid = '$i'; ";
}   

if ($mysqli->multi_query($sql)) {
    do {
        $rows=array();
        if ($result = $mysqli->store_result()) {
            while($rows[] = mysqli_fetch_assoc($result));
            array_pop($rows); 
            $result->free();
        }
        $data[]=$rows;
    } while ($mysqli->next_result());
    print_r($data);
} else
    echo "Error with SQL"; 
```

That will onlye make one batch connection to the DB, and will print all the data in an array.

# mysql - UNION of (2) SELECT with WHERE, GROUP BY and ORDER BY from (1) table

> ID：15625715
> 
> 赞同：2
> 
> 时间：2013-03-25T22:04:35.327
> 
> 标签：mysql, union

我想将两个查询与不同的 WHERE 子句和重叠的结果结合起来。如何使用 UNION 组合结果以区分 case_id？

第一次查询

```
SELECT
O.case_id,
O.otc_eff_date,
DATE_FORMAT(STR_TO_DATE(O.otc_eff_date, '%Y%j'),'%m/%d/%Y') otc_ef_date,
O.otc_type,
O.case_rsf,
O.otc_rsn,
O.otc_rlse_to,
O.seg_ent_date,
O.Seg_chg_date,
O.otc_case_status,
O.otc_opn_seq_cnt,
O.filler
FROM NU.RawCaseOTC O
WHERE O.otc_eff_date BETWEEN 2011182 AND 2012182
GROUP BY O.case_id
ORDER BY otc_ef_date 
```

第二次查询

```
SELECT 
MAX(otc_eff_date) MAX_OTC_EFF_DATE, 
case_id,
otc_eff_date,
otc_type,
case_rsf,
otc_rsn,
otc_rlse_to,
seg_ent_date,
Seg_chg_date,
otc_case_status,
otc_opn_seq_cnt,
filler 
FROM NU.RawCaseOTC 
WHERE (otc_case_status != 'C') AND (otc_eff_date <='2011182')
GROUP BY case_id
ORDER BY otc_eff_date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:30:27.560

如果您 UNION 这 2 个选择然后对其进行另一个选择，则如果您将彼此的列放在 MAX 或 MIN 或 SUM 或 COUNT 或 AVG 中，则可以使 case_id 不同...

如果您希望第一行不同，则第二行必须在聚合函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:50:20.877

当心！是的，你可以做一些事情，比如将两个查询包装在一个嵌套`SELECT`的`GROUP BY`外部查询中......但这绝对会影响你的性能，因为数据库需要将内部查询的整个输出保存到临时表并重新查询它们。如果您查询的记录数量适中，那么它就不会很漂亮。

首先尝试将两个查询组合成一个查询会更好。

当您查看这样的查询时，它可能会变得复杂，但它可以完成，并且性能应该明显更好。

我现在没有时间为您提出完美的查询，但是这里和其他地方还有一些其他问题关于如何做这种事情。也许其中之一会帮助你？

*   [组合按同一列分组的两个 GROUP BY 查询](https://stackoverflow.com/questions/6727697/combining-two-group-by-queries-grouped-by-the-same-column)
*   [将两个小查询（按不同值分组）合并为一个查询](https://stackoverflow.com/questions/1806365/combine-two-small-queries-that-group-by-different-values-into-one-query)
*   [http://forums.devshed.com/mysql-help-4/combining-results-of-two-group-by-queries-806682.html](http://forums.devshed.com/mysql-help-4/combining-results-of-two-group-by-queries-806682.html)

# asp.net - 编译器错误消息：CS0103：当前上下文中不存在名称“Test1”

> ID：15625716
> 
> 赞同：3
> 
> 时间：2013-03-25T22:04:36.120
> 
> 标签：asp.net

我对 ASP.NET 中的编程完全陌生，不明白为什么在这段基本代码上会出现错误“编译器错误消息：CS0103：当前上下文中不存在名称'Test1'”。

下面是我试图编译的代码 -

```
<%@ Page Language="C#" AutoEventWireup="true" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >

<head runat="server">
<title>Untitled Page</title>

</head>

<body>
<form id="form1" runat="server">
<div>

<asp:Label ID="Test1"/></asp>

<script runat="server">
 protected void Page_Load(object sender, EventArgs e)
{
Test1.Text = "Hello World; the time is now" + DateTime.Now.ToString();
}
</script>

</div>
</form>

</body>
</html> 
```

任何有关我收到此错误消息的原因的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:05:20.113

您需要`runat="server"`在您的 asp 控件中包含该属性，否则您的代码隐藏将无法识别它。

请注意，您也可以将此属性添加到纯 html 元素。

```
<label id="myLabel" runat="server">text</label>

myLabel.InnerText = "stuff"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:07:55.913

除了包含 runat 标签之外，您没有正确关闭标签

```
<asp:Label runat="server" ID="Test1"></asp:Label> 
```

或者

```
<asp:Label runat="server" ID="Test1"/> 
```

# wpf - Xceed.WPF.Toolkit.MessageBox 不显示

> ID：15625718
> 
> 赞同：0
> 
> 时间：2013-03-25T22:04:40.020
> 
> 标签：wpf, wpf-controls, xceed

我已经确定：页面底部有一个名为“启用 Visual Studio 托管进程”的复选框如果我取消勾选此问题，问题就会消失。有没有其他人经历过这个？使用 WPF.ToolKit 对话框还有其他已知的陷阱吗？

# mysql - Laravel 4 数据库语句创建触发器

> ID：15625721
> 
> 赞同：6
> 
> 时间：2013-03-25T22:04:46.900
> 
> 标签：mysql, database, triggers, pdo, laravel

在我的应用程序迁移文件的创建过程中，我注意到 Laravel 不支持数据库触发器！我已经接受了这样一个事实，即我需要执行查询语句来完成此操作，但这也给我带来了麻烦。这是我的应用程序中的代码片段：

```
Schema::create('users', function ($table) {
    $table->increments('id');
    $table->string('uuid', 36);
    $table->string('email', 255);
    $table->string('password', 255);
});
DB::statement('CREATE TRIGGER users_trigger_uuid BEFORE INSERT ON users FOR EACH ROW SET NEW.uuid = UUID()'); 
```

当我运行 artisan migrate 时，它​​给了我以下错误：

> [异常]
> SQLSTATE [HY000]：一般错误：2030 准备好的语句协议尚不支持此命令（SQL：CREATE TRIGGER users_trigger_uuid BEFORE INSERT ON users FOR EACH ROW SET NEW.uuid = UUID（））（绑定：数组（ ))

除了创建我自己的 PDO 对象并在 Laravel 之外执行查询之外，还有其他解决方案吗？这是 MySQL 异常还是 Laravel 异常？

**编辑**

从例外情况来看，很明显准备好的语句不支持触发器的创建。不知道为什么，但会喜欢一些见解。为了解决这个问题，我只运行了我自己的 PDO 查询。

```
$default_driver = Config::get('database.default');
$connection_info = Config::get('database.connections.' . $default_driver);
$conn = new PDO('mysql:host=' . $connection_info['host'] . ';dbname=' . $connection_info['database'], $connection_info['username'], $connection_info['password']);
$conn->query('CREATE TRIGGER users_trigger_uuid BEFORE INSERT ON ' . $connection_info['prefix'] . 'users FOR EACH ROW SET NEW.uuid = UUID()'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T21:17:20.170

使用 DB::unprepared()，就像一个魅力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-23T09:50:19.533

做到这一点的“干净”方法是使用*数据库事件*。当你创建一个新的 User 实例时，Laravel4 会触发一个`created`事件。

> Eloquent 模型触发多个事件，允许您使用以下方法连接到模型生命周期中的各个点：创建、创建、更新、更新、保存、保存、删除、删除。
> 
> 每当第一次保存一个新项目时，就会触发 created 和 created 事件。如果一个项目不是新的并且调用了 save 方法，则将触发更新/更新事件。在这两种情况下，保存/保存事件都会触发。

因此，在您的 User 类中，为`creating`事件添加一个侦听器：

```
class User extends Eloquent ... {

    // ...

    public static function boot()
    {
        parent::boot();
        static::creating(function($user)
        {
            $user->uuid = uuid();
        });
    } 
```

有关如何在 PHP 中生成 UUID，请参阅[此答案](https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-28T14:26:50.790

您在编辑中显示的解决方案不正确。您应该使用`DB::unprepared()`，或者，如果您必须使用 PDO，**请不要那样做**。相反，从连接中获取一个 PDO 对象并使用它：

`$pdo = DB::connection()->getPdo();`

# ember.js - 在 ember-data 中侧载 hasMany 关系的麻烦？

> ID：15625733
> 
> 赞同：1
> 
> 时间：2013-03-25T22:05:29.457
> 
> 标签：ember.js, ember-data

这是截至 3 月 25 日的 ember rc1 master，以及 ember-data rev 12。我无法让模型的 hasMany 侧载 - 侧载的数据不会在商店中实现。使用默认的 RESTAdapter。

```
 App.AssetLinkGroup = DS.Model.extend({
      asset_links : DS.Model.hasMany('App.AssetLink')
  })
  App.AssetLink = DS.Model.extend({
      asset_link_group : DS.Model.belongsTo('App.AssetLinkGroup')
  }) 
```

我从服务器返回的 App.AssetLinkGroup.find(5) 的 json 如下（为简洁起见，删除了许多基本属性，如名称/日期/等）

```
 {
 "asset_link_group": {

      "asset_link_ids": [154,155],

      "asset_links": [
           {
                id : 154,
                "asset_link_group_id": 5
           },
           {
                id : 155,
                "asset_link_group_id": 5
           }
      ]
   }
 } 
```

App.AssetLinkGroup.find(5) 成功从服务器加载 AssetLinkGroup 模型。但 AssetLinks 似乎没有在商店中实现。当我尝试 App.AssetLink.all() .content 时，它显示一个空数组。

此外，如果我尝试：

```
var algroup5 = App.AssetLinkGroup.find(5);
algroup5.get('asset_links'); 
```

它对服务器进行了 findMany 调用，这表明它肯定在商店中没有这些记录。

为什么加载 AssetLinkGroup 时 AssetLink 记录没有在商店中实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:09:41.483

我会说 JSON 中的asset_links 数组应该位于根级别。

```
{
 "asset_link_group": {
   "asset_link_ids": [154,155]
 },
 "asset_links": [
   {
      id : 154,
      "asset_link_group_id": 5
   },
   {
       id : 155,
       "asset_link_group_id": 5
   }
  ]
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:13:27.080

您是否已将适配器配置为旁加载记录`asset_links`？假设您正在使用`RESTAdapter`，您将执行以下操作：

```
DS.RESTAdapter.configure('App.AssetLink',
    sideloadAs: 'asset_links'
); 
```

# python - python 文件操作（bash 脚本移植）

> ID：15625736
> 
> 赞同：2
> 
> 时间：2013-03-25T22:05:39.340
> 
> 标签：python, parsing, text

我正在尝试重写一些我认为非常低效（更不用说不优雅）的旧 bash 脚本并使用一些可怕的管道......也许具有真正 Python 技能的人可以给我一些指示......

该脚本使用多个临时文件......我认为另一件事是一种糟糕的风格，可能可以避免......

它本质上是`INPUT-FILE`通过首先从顶部剪掉一定数量的行（丢弃标题）来进行操作的。
然后它拉出其中一列并：

*   计算数量`raws = N`；
*   从这个单列文件中抛出所有重复的条目（我使用`sort -u -n FILE > S-FILE`）。

之后，我创建了一个从 1 到 N 的连续整数索引，并`INPUT-FILE`使用 paste 命令将这个新的索引列粘贴到原始索引列中。
然后我的 bash 脚本为我们写入 S-FILE 的值生成百分比等级。
我相信 Python 的利用`scipy.stats`，而在 bash 中，我确定 S-FILE 中每个唯一条目的重复行数（dupline），然后计算`per-rank=$((100*($counter+$dupline/2)/$length))`，其中 $length= FILE 的长度而不是 S-FILE。然后，我会将结果打印到一个单独的 1 列文件中（并且重复相同的每个等级的次数与我们有重复线的次数一样多）。
然后，我会将这个带有百分位等级的新列粘贴回 INPUT-FILE（因为我将按用于计算百分位等级的列对 INPUT-FILE 进行排序 - 结果中的所有内容都会完美排列）。

在此之后，它进入下面的丑陋......

```
sort -o $INPUT-FILE $INPUT-FILE

awk 'int($4)>2000' $INPUT-FILE | awk -v seed=$RANDOM 'BEGIN{srand(seed);} {print rand()"\t"$0}' | sort -k1 -k2 -n | cut -f2- | head -n 500 > 2000-$INPUT-FILE

diff $INPUT-FILE 2000-$INPUT-FILE | sed '/^[0-9][0-9]*/d; s/^. //; /^---$/d' | awk 'int($4)>1000' | awk -v seed=$RANDOM 'BEGIN{srand(seed);} {print rand()"\t"$0}' | sort -k1 -k2 -n | cut -f2- | head -n 500 > 1000-$INPUT-FILE

cat 2000-$INPUT-FILE 1000-$INPUT-FILE | sort > merge-$INPUT-FILE

diff merge-$INPUT-FILE $INPUT-FILE | sed '/^[0-9][0-9]*/d; s/^. //; /^---$/d' | awk 'int($4)>500' | awk -v seed=$RANDOM 'BEGIN{srand(seed);} {print rand()"\t"$0}' | sort -k1 -k2 -n | cut -f2- | head -n 500 > 500-$INPUT-FILE

rm merge-$INPUT-FILE 
```

从本质上讲，这是一种非常不优雅的 bash 执行以下操作的方式：

1.  从 $INPUT-FILE 中随机选择 500 行，其中第 4 列中的值大于 2000 并将其写入文件 2000-$INPUT-FILE
2.  对于 $INPUT-FILE 中的所有 REMAINING 行，随机选择第 4 列中的值大于 1000 的 500 行并将其写入文件 1000-$INPUT-FILE
3.  对于 1) 和 2) 之后 $INPUT-FILE 中的所有 REMAINING 行，随机选择第 4 列中的值大于 500 的 500 行并将其写入文件 500-$INPUT-FILE

再一次，我希望有人能帮助我把这个丑陋的管道改造成蟒蛇之美！：） 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:45:50.303

评论中的两个关键点：

(A) 该文件是约 50k 行约 100 个字符。足够小，可以舒适地放入现代台式机/服务器/笔记本电脑系统的内存中。

(B) 作者的主要问题是关于如何跟踪已经选择的行，并且不要再次选择它们。

我建议三个步骤。

(1) 浏览文件，制作满足每个条件的行号的三个单独的列表——称它们为 u、v、w。这些列表可能有 500 多行，并且可能包含重复项，但我们将在步骤 (2) 中解决这些问题。

```
u = []
v = []
w = []

with open(filename, "r") as f:
    for linenum, line in enumerate(f):
        x = int(line.split()[3])
        if x > 2000:
            u.append(x)
        if x > 1000:
            v.append(x)
        if x > 500:
            w.append(x) 
```

(2) 选择行号。您可以使用内置的 Random.sample() 从总体中选择 k 个元素的样本。我们要删除之前选择的元素，因此要跟踪集合中的这些元素。（“选择”集合是一个集合而不是一个列表，因为测试“如果 x 未在选择中”对于一个集合来说是 O(log(n))，但对于一个列表来说是 O(n)。将其更改为一个列表和如果您精确测量时间，您会看到速度变慢，尽管对于“仅”50k 个数据点/500 个样本/3 个类别的数据集来说，这可能不是一个明显的延迟。）

```
import random
rand = random.Random()       # change to random.Random(1234) for repeatable results

chosen = set()
s0 = rand.sample(u, 500)
chosen.update(s0)
s1 = rand.sample([x for x in v if x not in chosen], 500)
chosen.update(s1)
s2 = rand.sample([x for x in w if x not in chosen], 500)
chosen.update(s2) 
```

(3) 再次遍历输入文件，将编号为 s0 的行放入第一个输出文件，将编号为 s1 的行放入第二个输出文件，将编号为 s2 的行放入第三个输出文件。这在任何语言中都很简单，但这里有一个使用 Python“成语”的实现：

```
linenum2sample = dict([(x, 0) for x in s0]+[(x, 1) for x in s1]+[(x, 2) for x in s2])

outfile = [open("-".join(x, filename), "w") for x in ["2000", "1000", "500"]]

try:
    with open(filename, "r") as f:
        for linenum, line in enumerate(f):
            s = linenum2sample.get(linenum)
            if s is not None:
                outfile[s].write(line)
finally:
    for f in outfile:
        f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:23:34.137

把它分成简单的部分。

1.  如果标题不可用，则使用 csv.DictReader 或 csv.reader 读取文件。在遍历这些行时，检查第 4 列的值并将这些行插入到列表字典中，其中字典键类似于“gt_2000”、“gt_1000”、“gt_500”。

2.  遍历您的字典键并为每个键创建一个文件并执行 500 个循环，对于每次迭代，使用 random.randint(0, len(the_list)-1) 获取列表的随机索引，将其写入文件，然后从列表中删除该索引处的项目。如果任何存储桶中的项目少于 500 个，那么这将需要更多一点。

# jsf - JSF 标签中的 layout 属性是什么意思？

> ID：15625742
> 
> 赞同：0
> 
> 时间：2013-03-25T22:05:52.523
> 
> 标签：jsf, jakarta-ee

请任何人都可以解释这个标签中的布局属性代表什么？

```
<h:selectOneRadio value="" layout="pageDirection" border="1">
  <f:selectItem itemLabel="red" itemValue="1" />
  <f:selectItem itemLabel="white" itemValue="2" />
</h:selectOneRadio> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:13:44.550

看到这个问题：[layout with h:selectoneradio](https://stackoverflow.com/questions/8139493/layout-with-hselectoneradio)。

`layout="lineDirection"`基本上，JSF 可以水平或垂直排列单选按钮`layout="pageDirection"`。

这是[`<h:selectOneRadio>`](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_selectOneRadio.html)给你的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:13:57.867

复选框和按钮可以设置为在当前行上彼此相邻（layout="lineDirection"）或垂直堆叠，每个后都有换行符（layout="pageDirection"）。

由于组件正在代表您编写一堆 HTML，这只会影响它的执行方式。

# javascript - Javascript / Jquery - 加载 gif 动画

> ID：15625743
> 
> 赞同：1
> 
> 时间：2013-03-25T22:05:52.960
> 
> 标签：javascript, jquery, animation, overlay, gif

我正在尝试使用[loadmask](http://code.google.com/p/jquery-loadmask/)在单击 Jquery UI 选项卡时显示某种加载动画。单击选项卡后，它会很好地进入下面的函数并执行该循环中的任务，但它从不显示覆盖。如果我删除该`$("#WholeContainer").unmask()`行，则覆盖显示，但它仅在数据已加载并显示后才显示......而不是像我期望的那样。

我在尝试为 spinner.js 等加载动画 gif 时遇到了类似的问题......我在这里做错了什么？

```
 $("a[title=\"ByOpsGroup\"]").click(function()
    {//  alert(tabCnt1);

    $("#WholeContainer").mask("Loading...");
        for (var i=1;i<tabCnt1;i++)
        { 
            getListOfRulesApplyingToGroup(i,"ui-id-"+i);
        }
    $("#WholeContainer").unmask();
    }); 
```

# android - Android设置内容类型HttpPost

> ID：15625746
> 
> 赞同：22
> 
> 时间：2013-03-25T22:06:09.720
> 
> 标签：android, encoding, header, http-post, content-type

如何在 android 中更改 HttpPost 的内容类型？

对于请求，我需要将内容类型设置为 application/x-www-form-urlencoded

所以我得到了这段代码：

```
httpclient=new DefaultHttpClient();
httppost= new HttpPost(url);
StringEntity se = new StringEntity(""); 
se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/x-www-form-urlencoded"));
httppost.setEntity(se); 
```

但这并不能解决问题，我无法在任何地方找到解决方案。

干杯

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-25T22:15:09.170

```
 HttpPost httppost = new HttpPost(builder.getUrl());
            httppost.setHeader(HTTP.CONTENT_TYPE,
                    "application/x-www-form-urlencoded;charset=UTF-8");
            // Add your data
            httppost.setEntity(new UrlEncodedFormEntity(builder
                    .getNameValuePairs(), "UTF-8"));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost); 
```

注意：构建器只包含 url 和 namevalue 对。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-18T10:27:44.560

**已弃用：`nameValuePairs`**

**替代方案：使用`volley library`**

调用的完整代码，供可能需要的人使用。

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("grant_type", "password"));
    nameValuePairs.add(new BasicNameValuePair("username", "user1"));
    nameValuePairs.add(new BasicNameValuePair("password", "password1"));

    HttpClient httpclient=new DefaultHttpClient();
    HttpPost httppost = new HttpPost("www.yourUrl.com");
    httppost.setHeader(HTTP.CONTENT_TYPE,"application/x-www-form-urlencoded;charset=UTF-8");

    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }

    // Execute HTTP Post Request
    try {
        HttpResponse response = httpclient.execute(httppost);
        Log.d("Response:" , response.toString());
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# entity-framework-4 - 如何获取 null EntityReference 的主键字段名称？

> ID：15625747
> 
> 赞同：0
> 
> 时间：2013-03-25T22:06:13.570
> 
> 标签：entity-framework-4, null, linq-to-entities, foreign-keys, entityreference

我制作了以下函数来为外键引用赋值（我知道，它很脏，不适用于复合键）：

```
 void setFk(dynamic tbl,object id){
            var path=db.DefaultContainerName+"."+tbl.TargetRoleName;
            var ret=new System.Data.EntityKey(path, tbl.RelationshipSet.ElementType.RelationshipEndMembers[0].GetEntityType().KeyMembers[0].Name, id);
            tbl.EntityKey=ret;
        } 
```

我想通过这个来调用：`setFk(newRec.WorkItemsReference,src.WorkItemsId)`

问题是它不适用于新创建的对象 newRec 因为 tbl.EntityKey 和 tbl.RelationshipSet 都是空的。

我看到的一种方法是获取 tbl.GetType() 并以某种方式从那里找到 Id 列。如果这是正确的路线，那么如何？

还有其他路线吗？

我的目标不是将更多参数传递给 setFk 函数，因为它应该有 2 个参数就足够了，并且会导致实体名称重复。

# java - 自定义提供程序无法注入过滤器

> ID：15625752
> 
> 赞同：4
> 
> 时间：2013-03-25T22:06:36.570
> 
> 标签：java, jersey, jax-rs, jersey-1.0

我有一个 POJO，我想将它注入到资源和过滤器中：

```
public final class MyObject { } 
```

我为它实现了一个自定义提供程序：

```
@Provider
public final class MyProvider
extends AbstractHttpContextInjectable<MyObject>
implements InjectableProvider<Context, Type> {

    @Context private HttpServletRequest request;

    @Override
    public Injectable<MyObject> getInjectable(
            ComponentContext componentContext,
            Context annotation,
            Type type
    ) {
        if (type.equals(MyObject.class)) {
            return this;
        }
        return null;
    }

    @Override
    public ComponentScope getScope() {
        return ComponentScope.PerRequest;
    }

    @Override
    public MyObject getValue(HttpContext httpContext) {
        //in reality, use session info from injected request to create MyObject
        return new MyObject();
    }
} 
```

该对象已成功注入我的资源：

```
@Path("/test")
@ResourceFilters(MyFilter.class)
public final class MyResource {

    @Context private HttpServletRequest request;
    @Context private MyObject myObject;

    @GET
    public String execute() {

        System.out.println(request != null);  //true
        System.out.println(myObject != null); //true

        return "data";
    }
} 
```

但泽西岛未能将其注入我的过滤器：

```
public final class MyFilter implements ResourceFilter {

    @Context private HttpServletRequest request;
    @Context private MyObject myObject;

    @Override
    public ContainerRequestFilter getRequestFilter() {
        return new ContainerRequestFilter() {
            @Override
            public ContainerRequest filter(ContainerRequest containerRequest) {

                System.out.println(request != null);  //true
                System.out.println(myObject != null); //false

                return containerRequest;
            }
        };
    }

    @Override
    public ContainerResponseFilter getResponseFilter() {
        return null;
    }
} 
```

我猜测差异与以下事实有关，`MyFilter`即注入是使用遵循线程本地实例的代理完成的 - 这是因为带有注释的字段`@Context`是在外部类中声明的，它被实例化一次，但它们是用于基于每个请求注入对象。当我`filter`在调试过程中单步执行时，我可以看到它`MyFilter.request`指向一个包装了`com.sun.jersey.server.impl.container.servlet.ThreadLocalInvoker`.

我的自定义提供程序（或其他实现）缺少什么需要对我的过滤器进行自定义注入？

请注意，我目前坚持使用 Jersey 1.1.4.1（对不起）。

**编辑：**使用 Jersey 1.17，我在启动时遇到异常：

> 严重：缺少字段的依赖项：private mypackage.MyObject mypackage.MyFilter.myObject

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:45:39.920

我找到了使用[JSR-311](http://jcp.org/en/jsr/detail?id=311)[`Providers`](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/ext/Providers.html)中的可注入接口的解决方法。首先，我必须让我的提供者实现：[`ContextResolver`](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/ext/ContextResolver.html)

```
@Provider
public final class MyProvider
extends AbstractHttpContextInjectable<MyObject>
implements InjectableProvider<Context, Type>, ContextResolver<MyObject> {

    ...

    @Override
    public MyObject getContext(Class<?> type) {
        //in reality, using the same logic as before
        return new MyObject();
    }
} 
```

然后我将一个`Providers`实例注入到我的过滤器中。当`filter`被调用时，我使用它来查找`ContextResolver`for`MyObject`并动态检索它：

```
public final class MyFilter implements ResourceFilter {

    @Context private HttpServletRequest request;
    @Context private Providers providers;

    @Override
    public ContainerRequestFilter getRequestFilter() {
        return new ContainerRequestFilter() {
            @Override
            public ContainerRequest filter(ContainerRequest containerRequest) {

                final ContextResolver<MyObject> myObjectResolver =
                            providers.getContextResolver(MyObject.class, null);
                final MyObject myObject =
                            myObjectResolver.getContext(MyObject.class);

                System.out.println(request != null);  //true
                System.out.println(myObject != null); //true

                return containerRequest;
            }
        };
    }

    ...
} 
```

归功于[这个答案](https://stackoverflow.com/a/8474727/697449)，因为它给了我关于`Providers`. 该解决方案有效，但它不是一个漂亮的解决方案。我仍然想在`MyObject`任何地方注入并让它工作，就像`HttpServletRequest`- 我想知道我的提供者缺少什么来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T09:10:27.143

我遇到了这个问题，试图实现相同的目标（即注入自定义 Provider 实现提供的东西），并发现如果您通过过滤器工厂进行自定义注入，效果很好。

因此，不要将@Context MyClass myObj 注解放入Filter 类中，而是将该类型的注解字段放在负责创建过滤器的过滤器工厂中，并让工厂将“myObj”作为常规参数传递。

我不确定这会对您的情况有所帮助，并且我还没有调查将其与每个请求提供程序一起使用的含义（我的是单例范围的），所以 YMMV。

# nservicebus - 为什么在使用 XML 序列化时 NServiceBus 不能为我的消息创建代理？

> ID：15625753
> 
> 赞同：0
> 
> 时间：2013-03-25T22:06:38.167
> 
> 标签：nservicebus

我已经定义了一条消息，IGetQuote，用于 NServiceBus。它如下所示，以及它所依赖的其他类型；

```
public interface IGetQuote : ICommand
{
    IRisk Risk { get; set; }
}

public interface IRisk
{
    IProposer Proposer { get; }
}

public interface IProposer : IDriver
{
    string Postcode { get; set; }
}

public interface IDriver
{
    string Name { get; set; }
    void DoSomething();
} 
```

使用 fluent API 获取 IBus 时，调用 CreateBus() 时出现以下异常；

*System.TypeLoadException：“来自程序集'Contracts* _impl，Version = 0.0.0.0，Culture = Neutral，PublicKeyToken = null'的'Contracts.IProposer_impl'类型中的方法'DoSomething'没有实现。”：“Contracts.IProposer__impl”

根据我对 NServiceBus 工作方式的理解，它试图创建实现 IGetQuote 和任何相关接口（如 IProposer）的类型，以便在发送 IGetQuote 消息时使 XML 序列化工作。

如果我调整我的接口，使 IProposer 不再从 IDriver 继承，问题就会消失。我最初的结论是 DoSomething 方法一定是问题所在，但是如果我让 IProposer 再次继承 IDriver，并将 DoSomething 方法移到 IProposer 上，则不会引发异常（尽管我确实收到警告消息“接口 IProposer 包含方法，因此无法映射。请注意，非映射接口不能用于发送消息")。

因此，当您在接口上声明了一个方法并且该接口由消息类型所依赖的类型之一扩展时，似乎会发生异常。几乎就像动态代理生成不考虑接口继承一样。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:29:51.327

NSB 发送的消息定义了两个端点之间的契约或模式。这不包括行为，而只是数据。NSB 将处理接口继承，但它正确地警告您向接口添加行为。

# jquery - 如果鼠标悬停在 jQuery 上，如何使 div 向下移动

> ID：15625759
> 
> 赞同：0
> 
> 时间：2013-03-25T22:07:18.013
> 
> 标签：jquery, html, hover, mouse

我正在尝试制作一个`<div>`当人的鼠标悬停在它上面时会滑下来的东西。我相信这将是我几乎没有经验的 jQuery。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:11:18.353

```
$(".your-div").mouseover(function() {
    $(this).animate({ marginTop: 300 });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:17:09.940

```
#example:hover
{
  position: relative; margin-top: 40px;
  animation-name: slide-down; animation-duration: 2s;
}

@keyframes slide-down
{
  from { margin-top: 0px; } to { margin-top: 40px; }
} 
```

Fiddle includes the downlevel (-moz and -webkit) styles. [http://jsfiddle.net/b7Hqj/](http://jsfiddle.net/b7Hqj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T16:25:24.987

可以在 CSS 中轻松地完成将 div 向上/向下移动的小悬停。这是一个例子：

HTML：

```
<div class="product">
<p> Product Info </p>

</div> 
```

CSS：

```
.product {
border: 2px solid #999;
padding: 20px;
display: inline-block;
}
.product:hover {
transform: translateY(-15px); /* edit X/Y as per requirements */
}

body {
padding: 50px;
} 
```

沃金示例：http: [//jsfiddle.net/pEBw5/](http://jsfiddle.net/pEBw5/)

# c - 为什么结构标签不是 C 中的类型名称？

> ID：15625761
> 
> 赞同：6
> 
> 时间：2013-03-25T22:07:37.087
> 
> 标签：c

我很好奇 C 中这种行为的动机。是故意的还是偶然的？

```
struct tpoint // tpoint is not a type name
{
    int x, y;
};

typedef struct tpoint Point; // point is a type name. 
```

我想知道为什么 Ritchie 或标准委员会选择了这种行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:09:06.480

这是一个命名空间的事情。这样，我可以拥有`struct a`, `enum a`, `union a`, 并且没有一个是模棱两可的。在设计可能具有相似类型名称的框架时，它会有所帮助，但它会很快让人感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:32:32.897

在阅读[The Development of the C Language](http://cm.bell-labs.com/cm/cs/who/dmr/chist.html)时，当 Dennis Ritchie 讨论*Embryonic C*时，他描述了他的意图`struct`：

> 我希望该结构不仅可以表征抽象对象，还可以描述可能从目录中读取的位集合。

本节主要讨论这个想法是如何导致引入“数组<->指针等效”的。但是，它确实说明了 C 的低级性质（a`struct`代表“位集合”）。

相比之下，C++ 使用 a`struct`作为 的一种同义词`class`，但一切都是公开的。A`class`实际上是面向对象编程中的一个概念，其中将其标记视为一种类型更为自然。

# jquery - 将对象从 javascript 发送到 MVC 中的操作方法

> ID：15625776
> 
> 赞同：5
> 
> 时间：2013-03-25T22:08:36.887
> 
> 标签：jquery, asp.net-mvc, http-post

我正在尝试将对象从剃刀视图发送到操作方法

我的观点

```
 <section>
 <script type="text/javascript">
function saveExpense()
    {
        var expenseobject = {
            date:$('.txtDate').val() ,
            type:$('.ExpenseType').val() ,
            cost: $('.cost').val(),
            extra:$('.extra').val()

        };

        $.ajax({
            //   url: baseUri+'HomeController/saveexpense',
            url: '@Url.Action("saveexpense", "HomeController")',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ obj: expenseobject }),
            success: function (result) {

            }
        });

}
</script>
<section id="form">
    <table width="600">
        <tr>
            <td>Select Date:</td>
            <td>
                <input class="txtDate" type="date" size="20"></td>
        </tr>
        <tr>
            <td>Select Expense Type:</td>
            <td>
                <select class="ExpenseType">
                    <optgroup label="Room">
                        <option>Room Fare</option>
                    </optgroup>

                    <optgroup label="Mess">
                        <option>Monthly Mess</option>
                    </optgroup>

                    <optgroup label="Others">
                        <option>Bus Fare</option>
                        <option>Tapari</option>
                        <option>Mobile Recharge</option>
                        <option>Auto</option>
                    </optgroup>
                </select></td>
        </tr>
        <tr>
            <td>Enter Cost:</td>
            <td>
                <input  class="cost" type="text" size="45" /></td>
        </tr>
        <tr>
            <td>Extra Details:</td>
            <td>
                <input class="extra" type="text" size="45" /></td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>
                <button  onClick="saveExpense();" >Submit</button></td>
        </tr>
    </table>
</section>
    </section> 
```

这是我的控制器

```
 public ActionResult saveexpense(Expense obj)
        {
            obj.ExpenseId = Guid.NewGuid();
            Debug.Print(obj.cost.ToString());
            if (ModelState.IsValid)
            {
                context.expenses.Add(obj);
                context.SaveChanges();
                int total = context.expenses.Sum(x => x.cost);
                return Json(new { spent = total, status = "Saved" });

            }

                return Json(new { status = "Error" });
        } 
```

它在 HomeController.cs 中的位置

当我检查响应时，我发现

[HttpException]：找不到路径“/HomeController/saveexpense”的控制器或未实现 IController。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:15:27.057

[**在为Url.Action**](http://msdn.microsoft.com/en-us/library/dd492758%28v=vs.108%29.aspx)助手指定控制器名称时，您只需指定不带单词 的控制器名称`Controller`，类似于以下内容：

```
url: '@Url.Action("saveexpense", "Home")', 
```

假设您的其余代码可以正常工作。

# css - 在 CSS 中声明 @import 与编译 @import 的好处

> ID：15625777
> 
> 赞同：0
> 
> 时间：2013-03-25T22:08:42.920
> 
> 标签：css, compiler-construction, less

我正在使用 WinLESS，一个适用于 Windows 的 LESS 编译器。在`style.less`中，我正在使用`@import`指令来导入我的`768up.less`and`1030up.less`等。

编译`style.css`的具有内联的内容`768up.less`和`1030up.less`解析的内容，例如：

# `style.less`

```
@import "normalize.less";
/* base styling here */
@media only screen and (min-width: 768px) { @import "768up.less"; }
@media only screen and (min-width: 1030px) { @import "1030up.less"; } 
```

# `style.css`

```
/* imported normalize */
html { font-size: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; } /* etc */

/* base styling */
.wrap { margin: 0; padding: 0 5px; } /* etc */

/* imported 768up */
.wrap { padding: 0 20px; }

/* imported 1030up */
.wrap { padding: 0 30px; } 
```

这不就是破坏了`@import`混杂的目的`@media`吗？我的意思是，文件大小`style.css`现在是所有导入 + 编译文件的总和。

即使浏览器`1030up`因为屏幕小而不能使用，它还会`style.css`完整下载吗？

编译`style.css`后的指令是否不应该`@import`保持不变，从而变得更加轻量级，并且如果满足条件，则`style.css`只需指示浏览器检索其他样式吗？`@media`

WinLESS 编译这些 CSS 文件对我来说是错误的吗？

理想情况下，我希望看到以下内容：

```
/* normalize */
@import "normalize.css";

/* base styling */
.wrap { margin: 0; padding: 0 5px; } /* etc */

/* progressively enhance styling to accomodate larger screens */
@media only screen and (min-width: 768px) { @import "768up.css"; }
@media only screen and (min-width: 1030px) { @import "1030up.css"; } 
```

请，如果我误解了整个概念`@import`，请赐教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:18:00.720

Reducing round trips generally improves performance more than reducing sizes.

It's the same idea as using sprite sheets. Making 4 requests for 1kb is a lot worse than making 1 request for 20kb.

In this case, it can't even do the requests concurrently. It must get the first file, parse it, and only then does it realize it must go back to the server to get another file.

Also mind how gzip works. 1kb+1kb != 2kb.

If you suspect you're in a case where you'd rather keep the files split, LESS only inline includes @import if it's a .less, so try:

```
@media only screen and (min-width: 768px) { @import "768up.css"; }
@media only screen and (min-width: 1030px) { @import "1030up.css"; } 
```

(note the .css instead of the .less)

More details can be found by doing a control+f, search for "Importing" on [http://lesscss.org/](http://lesscss.org/)

You can enforce the import type it's doing like:

```
@import (css) "foo.bar";
@import (less) "foo.bar"; 
```

# git - 使用 Git 进行 4 人项目的协作

> ID：15625779
> 
> 赞同：6
> 
> 时间：2013-03-25T22:08:52.233
> 
> 标签：git, version-control, github

在我的一个大学项目中，我是一个由 4 名开发人员组成的小组，负责从头开始开发 Web 应用程序。我们都对 Git 有非常基本的了解，并决定使用它进行代码库协作，我们建立了一个 repo，每个人都是 GitHub 上的协作者。

在过去的几个月里，我们只是简单地克隆并提交到主分支，并且效果很好。然而，最近，有时两个或更多人同时在代码库上工作，我们经常会遇到一些人落后于提交并且必须在提交之前克隆 repo，这有时会导致他们的更改被丢失的。

今天，一个小组成员谈到有一个“开发”分支，我们都克隆和提交，然后在每个 sprint 结束时合并到 master 分支。我们尝试了这个，但并没有真正看到改进，因为我们仍然使用相同的代码库，所以会出现与以前相同的问题。

其他人有分叉（这对我来说是新事物）主仓库的想法，对其进行处理，然后将拉取请求发送到主仓库，然后可以将其合并。这在实践中听起来是一个不错的计划，因为如果更改破坏了代码，则可以查看更改并进行修复。反正我是这么理解的。

但正如我所说，我们都是 Git 的新手，并且对整个想法有一个非常基本的了解。组织一个由 4 名开发人员组成的团队处理 Git 存储库的标准方式是什么？我查看了一些 Git 文档，但对于只知道如何克隆和提交到主分支的人来说，这一切都相当混乱。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:15:43.750

您需要查看 Git 工作流和/或分支模型。有很多，这里有一个开始：

[一个成功的 git 分支模型](http://nvie.com/posts/a-successful-git-branching-model)

您需要考虑发布、登台、生产等概念，因为这很容易表示。基本上都是关于组织的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:16:44.240

Talking about things being "standard" in development methodologies is dangerous because there is almost no such thing. Groups of developers tend to organise themselves in ways that work for them (or in the way that management tell them to organise themselves).

All of the approaches you have identified are valid ways of using distributed version control systems. I would suggest that you're not seeing massive benefit from the alternatives because you're working on a university-sized green field project with a small team of people in the same geographical location, speaking the same language, with similar abilities, and with similarly clear ideas of what the outcome should be. Git tends to shine when any of those are not the case.

For distributed projects where you really want one person to be acting as gate keeper to the canonical version of the project, pull requests work really nicely. When you want everyone to have effectively equal commit access, a development branch is a good solution. People tend to use development branches so that they can have an always-working version hanging around for people to use. I assume you don't currently have users, which is why you are unlikely to see much benefit from this approach.

I would basically continue as you are unless you talk to each other and decide that something is not working for you as a team, in which case you can decide if one of the other ways of working are going to be better for you.

# grid - KendoUI Grid 服务器分页

> ID：15625783
> 
> 赞同：5
> 
> 时间：2013-03-25T22:09:16.073
> 
> 标签：grid, kendo-ui

我正在尝试使用 JSON 数据填充 KendoUI 网格，其中服务器返回总行数以及数据，但我在让 serverPaging 正常工作时遇到了一些麻烦。我创建并分配网格的数据源如下：

```
 var oDS = new kendo.data.DataSource({
                    schema: {
                        data:  "data",
                        total: "total"
                    },
                    data: self.grdTableData,
                    serverPaging: true,
                    pageSise: 50,
                    total: joOutput["TotalRecords"]
                });

                grdTableResults.setDataSource(oDS); 
```

第一页显示了 939 条记录中的前 50 条，但只有 1 页（导航箭头从不响应任何内容），我看到 NaN - NaN 的 939 条项目和网格中心的旋转圆点永远不会消失了。

在我看过的所有示例中，不同的一件事是我的 $.ajax 调用和 .done 中 JSON 数据的处理不使用“传输：读取”，但我正在考虑如何发送数据并将其取回无关紧要（还是因为每个页面请求都是新的服务器读取？）。但我认为我在正确处理服务器分页方面做得还不够，即使我设置的数据源值似乎与[http://jsfiddle.net/ruse​​v /Lnkug/ 示例中设置的值相似](http://jsfiddle.net/rusev/Lnkug/). 然后是我不确定的“take”和“skip”值，但我确实有“startIndex”和“rowsPerPage”发送到可以在那里使用的服务器。我假设网格可以告诉我我正在展示的页面我可以适当地设置我的“startIndex”，如果我有一个“每页项目”下拉菜单，我可以重置我的“rowsPerPage”值？

无论如何，对不起所有新手问题。任何帮助和建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T09:56:13.533

**交通：阅读**

即使您通过将值设置为函数来自定义逻辑，您也应该能够使用“传输：读取”。我创建了一个[JS Fiddle](http://jsfiddle.net/empie/9sctL/)来演示此功能。

```
dataSource: {
    serverPaging: true,
    schema: {
        data: "data",
        total: "total"
    },
    pageSize: 10,
    transport: {
        read: function(options) {
            var data = getData(options.data.page);
            options.success(data);
        }
    },
    update: function() {}
} 
```

您的读取函数包含一个参数，该参数包含以下分页属性：page、pageSize、skip、take。请记住，如果一个操作包含一个函数，则所有传输操作都必须是函数。

**startIndex 和 rowsPerPage**

如果您的服务器接受这些参数，您应该能够在读取函数中提交它们。创建一个发布自定义数据的新 ajax 调用

```
var ajaxPostData = { startIndex: options.data.skip, rowsPerPage: options.data.pageSize } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T23:01:58.123

**这是服务器端包装器的代码**，我用于使用剑道网格实现服务器分页：

```
@(Html.Kendo().Grid<IJRayka.Core.Utility.ViewModels.ProductDto>()
.Name("productList")
.Columns(columns =>
{
    columns.Bound(prod => prod.Name);
    columns.Bound(ord => ord.Brand);
    columns.Bound(ord => ord.UnitPackageOption);
    columns.Bound(ord => ord.CategoryName);
    columns.Bound(ord => ord.Description);
})
.Pageable(pager => pager.PageSizes(true))
.Selectable(selectable => selectable.Mode(GridSelectionMode.Multiple))
.PrefixUrlParameters(false)
.DataSource(ds => ds.Ajax()
            .Model(m => m.Id(ord => ord.ID))
            .PageSize(5)
            .Read(read => read
                .Action("FilterProductsJson", "ProductManagement")
                .Data("getFilters"))
            )
) 
```

当它想要从 url/service 获取数据时，将我的自定义过滤器参数传递给网格`getFilters`的**javascript 函数**在哪里：

```
function getFilters() {
    return {
        brand: $("#Brand").val(),
        name: $("#Name").val(),
        category: $("#CategoryName").val()
    };
} 
```

此外，您应该使用`DataSourceRequest`下面的 kendo 类实现控制器的操作方法，否则它将无法按您想要的方式工作：

```
public JsonResult FilterProductsJson([DataSourceRequest()] DataSourceRequest request,
                                // three additional paramerters for my custom filtering
                                string brand, string name, string category)
{
    int top = request.PageSize;
    int skip = (request.Page - 1) * top;
    if(brand != null)
        brand = brand.Trim();
    if(name != null)
        name = name.Trim();
    if(category != null)
        category = category.Trim();

    var searchResult = new ManageProductBiz().GetPagedFilteredProducts(brand, name, category, top, skip);
    // remove cyclic references:
    searchResult.Items.ForEach(prd => prd.Category.Products = null);

    return Json(new DataSourceResult { Data = searchResult.Items, Total = searchResult.TotalCount }, JsonRequestBehavior.AllowGet);
} 
```

# .net - 活动目录成员提供者和用户数据

> ID：15625784
> 
> 赞同：0
> 
> 时间：2013-03-25T22:09:21.107
> 
> 标签：.net, membership, activedirectorymembership

如果我使用活动目录作为用户存储，我如何将数据库中的信息与特定用户相关联？我应该在对它们进行身份验证后将它们插入数据库（这对我来说似乎是多余的）还是仅将广告成员资格提供程序用于身份验证并且我应该使用 SQL 成员资格提供程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:15:35.137

成员资格提供者只关心身份验证。授权（与身份验证不同）由您的逻辑执行，可选择使用角色提供程序。

您可以将 Active Directory 用于角色，但您需要使用外部实现，因为 ASP.NET 不包括开箱即用的实现（例如[http://www.codeproject.com/Articles/28546/Active -目录-角色-提供者](http://www.codeproject.com/Articles/28546/Active-Directory-Roles-Provider)）。

如果您将 AD 用于成员资格，但想要跟踪数据库中的用户，那么您将需要使用 AD 用户的`objectGUID`属性，因为它既是唯一的又是不可变的，其他属性像`cn`并且`objectSid`是唯一的但不是不可变的。

就我个人而言，我不会在我从事的任何 ASP.NET 项目中使用 Membership/Roles/Profiles 功能，因为它们需要特殊处理，这会在您的应用程序中创建一个逻辑上独立的关注点，该关注点并不总是与您的应用程序中的所有其他内容相结合，尤其是如果您为实体使用 ORM。即使您实现自己的提供程序以避免应用程序内部实体模型的复杂性，您仍然会遇到问题，因为该`Membership`对象向您的模型公开了一个新接口，您仍然需要在任何现有系统之上实现该接口以进行您拥有的用户管理。因此，我只建议对超基本网站使用 Membership/Roles/Profiles。

# jquery - 如果表格内容与某个值匹配，则将表格替换为 div

> ID：15625793
> 
> 赞同：0
> 
> 时间：2013-03-25T22:10:19.127
> 
> 标签：jquery, html-table

我无法弄清楚这一点。

我想知道如何有条件地将下表更改为 div。

```
<table border="0" cellpadding="0" cellspacing="0" width="100%">
 <tr>
  <td>
     Text Here
  </td>
 </tr>
</table> 
```

有多个表。只有包含指定文本的内容才应替换为`div`. 而且里面的内容`table`应该只是放在replacement里面`div`。

我不确定这是否可以做到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:22:15.830

您可以使用`replaceWith`方法：

```
$('table').replaceWith(function() {
    return '<div>' + $(this).text() + '</div>';
}); 
```

[http://jsfiddle.net/MHuns/](http://jsfiddle.net/MHuns/)

如果要选择具有特定文本内容的表格元素，可以使用`filter`方法：

```
$('table').filter(function(){
    return $.trim($(this).text()) === 'Text Here';
}).replaceWith(function () {
    return '<div>' + $(this).text() + '</div>';
}); 
```

[http://jsfiddle.net/MHuns/2/](http://jsfiddle.net/MHuns/2/)

它的一个版本作为可重复使用的 jQuery 插件实现：

[http://jsfiddle.net/87XhU/](http://jsfiddle.net/87XhU/)

# asp.net - 接收 OData.PageResult 时如何避免 406 ?

> ID：15625794
> 
> 赞同：5
> 
> 时间：2013-03-25T22:10:22.460
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, odata

我有一个返回 PageResult 的 ODataController。

**接口示例：**

```
public PageResult<Customer> Get(ODataQueryOptions options) {
// cut some stuff out...

    PageResult<Customer> result = new PageResult<Customer>(
        searchResults as IEnumerable<Customer>,
        Request.GetNextPageLink(),
        Request.GetInlineCount());
    return result; 
```

当我调试它时，它似乎很好并且正确构建了一个 PageResult 类以返回。网页端..

**网络示例**

```
using (var client = new HttpClient()) {
    client.BaseAddress = new Uri(testURL);
    string searchUrl = "api/customer?$top=1&$skip=0";
    client.DefaultRequestHeaders.Accept.Add(MediaTypeWithQualityHeaderValue.Parse("application/json;odata=verbose"));
    HttpResponseMessage response = client.GetAsync(searchUrl).Result; 
```

响应是 StatusCode 406，并带有说明内容不可接受的原因短语。如果我定义一个新的 MediaTypeWithQualityHeaderValue("application/json")，它也会这样做。

我需要更改哪些内容才能在控制器中成功使用此 Api，然后再将其传递给视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:25:21.937

我认为您缺少构建 OData 服务的前两个步骤。顾名思义，ODataController 仅适用于 OData 路由。您需要构建一个表示您的 OData 服务的 EDM 模型，并添加一个公开该 EDM 模型的 OData 路由。有关如何构建 OData 服务的详细信息，请参阅此[官方文档](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api)和博客[文章。](http://blogs.msdn.com/b/webdev/archive/2013/01/29/getting-started-with-asp-net-webapi-odata-in-3-simple-steps.aspx)

# c# - 在 Visual Studio 中使用 C# 中的关键字错误

> ID：15625796
> 
> 赞同：-2
> 
> 时间：2013-03-25T22:10:25.673
> 
> 标签：c#

我正在使用下面的代码行并收到错误：

> 在 using 语句中使用的类型必须可以隐式转换为 System.IDisposable

如何消除此错误？这是代码行：

```
using (var db = new HealthTrackerContext()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:12:03.993

如果您`HealthTrackerContext`不实施`IDisposable`，您将收到此错误。我怀疑你的班级没有；因此，要解决这种情况，您需要`IDisposable`在对象上实现或删除`using`块。

不使用块没有错`using`，顺便说一句=D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:13:16.053

HealthTrackerContext 应该实现 IDisposable 接口；一旦你实现了那个接口，错误就会消失。

看看这个链接[http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:13:41.860

这意味着`HealthTrackerContext`不实施`IDisposable`.

易于复制且线程安全的模式：

```
public partial class HealthTrackerContext: IDisposable {
    protected virtual void Dispose(bool disposing) {
        lock(thisLock)
            if(!disposed) {
                if(disposing) {
                    // release your resource 
                    // and set the referencing variables with null 

                    this.disposed=true;
                }
            }
    }

    public void Dispose() {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    ~HealthTrackerContext() {
        this.Dispose(false);
    }

    object thisLock=new object();
    bool disposed;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T22:14:03.507

您必须像这样为此对象实现 IDisposable 接口：

```
public class Disposable : IDisposable
    {
        private bool isDisposed;

        ~Disposable()
        {
            Dispose(false);
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }
        private void Dispose(bool disposing)
        {
            if (!isDisposed && disposing)
            {
                DisposeCore();
            }

            isDisposed = true;
        }

    } 
```

# php - JSON 更深的编码

> ID：15625812
> 
> 赞同：0
> 
> 时间：2013-03-25T22:11:39.240
> 
> 标签：php, file, formatting, json

我有几个 json 编码的对象，我想将它们写入 json 文件。数据是从脸书收集的。例如，如果我这样做

```
$myfile="testson.json";
$fileout=fopen($myfile,'w') or die("Fatal: Can't write to JSON file");
$friends = idx($facebook->api('/me/friends?limit=5000'), 'data', array());//gather data from facebook
fwrite($fileout,json_encode($friends)); 
```

我得到这样的东西： [{"name":"xyz","id":"2342342"},{other entries alike}]

或者，对于同样的事情，喜欢：

```
 [{"category":"Musician\/band","name":"Jack Savoretti","id":"216730015024772","created_time":"2013-03-14T13:38:27+0000"},{other entries alike}] 
```

现在我想做的是在某些类别下列出它们中的每一个。例如

```
 ["Likes":[{"category":"Musician\/band","name":"Jack Savoretti","id":"216730015024772","created_time":"2013-03-14T13:38:27+0000"},
{other entries alike}],  
    "friends":[{"name":"xyz","id":"2342342"},{other entries alike}]] 
```

我怎样才能做到这一点？
我正在使用 php `json_encode`。

# asynchronous - Angular.js $response $scope 变量的异步更新

> ID：15625820
> 
> 赞同：0
> 
> 时间：2013-03-25T22:12:18.513
> 
> 标签：asynchronous, angularjs, response

这是我在将 Backbone.js 用于某些项目之后第一次尝试使用 Angular.js。我使用 Yeoman 来获取初始的 Angular 脚手架设置以及管理各种依赖项等。我遇到的第一个问题是我设置的 Angular $resource 服务来访问一个返回简单名称数组的外部 API。在使用 Chrome 网络检查器时，我看到数据按预期返回，但从未呈现。我怀疑这是由于异步调用，当页面呈现时没有数据显示。页面呈现后不久，API 会返回数据，但页面不会再次重新呈现。

Angular 文档在教程中非常清楚地说明这应该通过角度数据绑定自动发生，但到目前为止它对我来说从来没有用过。我将我现在正在试验的代码放在 GitHub 上的一个 repo 中，地址为[https://github.com/chad-skidmore/angular-test](https://github.com/chad-skidmore/angular-test) 在花费了最后一对之后，到目前为止我还没有发现任何关于这个问题的记录问题几天来试图让它工作。如果我将一个数组传递给控制器​​，它当然可以正常工作，这是我认为异步外部资源调用的数据绑定中有一些东西的原因之一。任何指示或帮助将不胜感激。

您还可以在 plnkr 上获得相同的代码：http: [//plnkr.co/edit/BAHhsT2l1HKnpjiKLZMK](http://plnkr.co/edit/BAHhsT2l1HKnpjiKLZMK)

谢谢，乍得

# django - 根据相关对象查找对象

> ID：15625822
> 
> 赞同：1
> 
> 时间：2013-03-25T22:12:38.093
> 
> 标签：django, django-models

我正在尝试使用 Django 构建消息传递应用程序。我不使用的原因`postman`是我需要除用户之外的其他对象之间的消息传递，而且我不需要大多数邮递员的功能。

这是我的模型：

```
class Recipient(models.Model):
    ...
    def get_unread_threads():
        see below...

class Thread(models.Model):
    author = models.ForeignKey(Recipient, related_name='initiated_threads')
    recipients = models.ManyToManyField(
        Tribe,
        related_name='received_thread',
        through='ThreadReading')
    subject = models.CharField(max_length=64)

    class Meta:
        app_label = 'game'

class Message(models.Model):
    author = models.ForeignKey(Recipient, related_name='sent_messages')
    date_add = models.DateTimeField(auto_now_add=True)
    date_edit = models.DateTimeField(blank=True)
    content = models.TextField(max_length=65535)
    thread = models.ForeignKey(Thread)

    class Meta:
        get_latest_by = 'date'

class ThreadReading(models.Model):
    thread = models.ForeignKey(Thread)
    recipient = models.ForeignKey(Recipient)
    date_last_reading = models.DateTimeField(auto_now=True) 
```

我的问题是关于`get_unread_threads`. 我真的不知道该怎么做。这是第一次尝试：

```
def get_unread_threads(self):
    """
    return a queryset corresponding to the threads
    which at least one message is unread by the recipient
    """
    try:
        query = self.received_thread.filter(
                message__latest__date_add__gt=\
                        self.threadreading_set.get(thread_id=F('id')).date_last_reading) 
    except ObjectDoesNotExist:
        query = None
    return query 
```

但显然它不起作用，因为查找不能遵循方法`latest`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:47:43.103

干得好：

```
# Get all the readings of the user
thread_readings = recipient.threadreading_set.all()

# Build a query object including all messages who's last reading is after the
# last edit that was made AND whose thread is the thread of the current
# iteration's thread reading
q = models.Q()
for thread_reading in thread_readings:
    q = q | models.Q(
        models.Q(
            date_edit__lte=thread_reading.date_last_reading
            & models.Q(
                thread=thread_reading.thread
            )
        )
    )

# Get a queryset of all the messages, including the threads (via a JOIN)
queryset = Message.objects.select_related('thread')

# Now, exclude from the queryset every message that matches the above query
# (edited prior to last reading) OR that is in the list of last readings
queryset = queryset.exclude(
    q | models.Q(
        thread__pk__in=[thread_reading.pk for thread_reading in thread_readings]
    )
)

# Make an iterator (to pretend that this is efficient) and return a generator of it
iterator = queryset.iterator()
return (message.thread for message in iterator) 
```

:)

现在，永远不要这样做——重新考虑你的模型。我会读一本名为“面向对象的分析和设计与应用程序”的书。它会教你很多关于在数据建模时如何思考的知识。

# video - 如何防止 MPMoviePlayerController 在按下锁定按钮时关闭？

> ID：15625830
> 
> 赞同：0
> 
> 时间：2013-03-25T22:13:10.087
> 
> 标签：video, locking, mpmovieplayercontroller, background-process

我正在尝试在 iphone 屏幕锁定时播放视频中的声音。我可以防止 MPMoviePlayerController 被锁定屏幕按下吗？如果不是，我打算子类化 MPMoviePlayerController 并防止它被按下锁定按钮解除，哪种方法可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:47:45.080

在玩弄了其他一千件事之后，我发现了我需要做的事情。

我需要做的就是做两个调整：

1.  将此添加到方法中的 AppDelegate.m 中`application: didFinishLaunchingWithOptions:`：

    ```
    NSError *error = nil;

    BOOL success = [[AVAudioSession sharedInstance]
                setCategory: AVAudioSessionCategoryPlayback
                error: &error];

    if (success == false) { /* handle error */ } 
    ```

2.  将以下内容拖入诸如 Sublime 之类的文本编辑器后，将其添加到 info.plist：

    ```
    <key>UIBackgroundModes</key>
    <array>
            <string>audio</string>
    </array> 
    ```

如果您正确设置视频，您将能够在使用其他应用程序和屏幕处于睡眠模式时收听视频中的音频。

# java - Java 构造函数 - 为变量赋值

> ID：15625833
> 
> 赞同：4
> 
> 时间：2013-03-25T22:13:18.960
> 
> 标签：java, constructor

将值分配给任何方法之外的变量和在构造函数中分配这些值之间有区别吗？

查看 Oracle 的 Java 教程，他们有：

```
public class Bicycle {

   int cadence = 0;
   int speed = 0;
   int gear = 1;

   void changeCadence(int newValue) {
      cadence = newValue;
   } 
```

这与说/他们为什么不说有什么不同：

```
Bicycle(){
    int cadence = 0;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T22:14:31.403

如果您在构造函数中声明变量，它将是构造函数的本地变量，并且在您的类中的其他任何地方都不可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T22:20:01.610

好吧，如果你在构造函数中定义一个变量，它是构造函数的本地变量。但是类中的变量是类状态的一部分。

但如果你的意思是：

```
class A {
    int i = 1;
    ...
} 
```

对比

```
class B {
    int i;

    B() {
        i = 1;
    }
    ...
} 
```

区别在于：在第一种情况下`i`，在所有情况下，默认值为 1，但在第二种情况下，`i`如果调用了所示的构造函数，则默认值为 1，可能在其他构造函数中，其他默认值是其他值（或 0如果没有分配给`i`)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T22:14:56.467

如果在 a 中声明 a `variable`，`constructor`则只能访问此变量`inside this constructor`。但是，您可以在 上创建一个变量，然后在您的或`class`上访问它。`constructor``method`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T22:17:34.300

When you create object instance, global variables will be initialized. You can (but not have to) change some of them in constructor.

I think you mean

```
Bicycle() { 
   cadence = 0; 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T22:19:14.363

这种情况下的区别在于，您不仅在构造函数中分配变量（在第二种情况下）。你也在那里声明它。因此，该变量是构造函数的本地变量，并且从外部不可见。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-25T22:18:39.457

在构造函数中：它将是局部变量

[Java 包含以下类型的变量：](http://www.roseindia.net/java/learn-java-in-a-day/variables.shtml)

**实例变量（非静态字段）：**在面向对象的编程中，对象将它们各自的状态存储在没有静态关键字声明的“非静态字段”中。类的每个对象对这些非静态变量都有自己的一组值，因此我们可以说这些与对象（类的实例）相关。因此这些变量也称为实例变量。如果未初始化，这些变量将采用默认值。

**类变量（静态字段）：**这些与一个类共同相关，并且没有一个对象可以声称它们是它的唯一所有者。使用 static 关键字定义的变量由所有对象共享。在这里，对象不存储单独的值，但它们被迫在它们之间共享它。这些变量使用 static 关键字声明为“静态字段”。同一类的不同对象始终共享同一组值。所以这些变量就像全局变量一样，对于类的所有对象都是相同的。如果未初始化，这些变量将采用默认值。

***局部变量：**在方法或代码块中定义的变量称为局部变量。这些变量只能在方法或代码块中访问。如果未初始化，这些变量不会采用默认值。这些值需要在使用前进行初始化。*

**参数：**参数或参数是方法声明中使用的变量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-25T22:18:46.293

构造函数*与任何其他方法一样*。在其中声明的变量仅在其中可用，并且当您超出范围时它们将被销毁。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-28T22:08:52.320

我认为你的问题是：如果我们可以直接给变量（类）一个默认值，为什么要在构造函数中给它。如果这是问题所在，那么我认为这是因为即使对象未初始化，变量中的值也可用，这不是一种健康的做法，也没有多大意义。相反，在构造函数中给出值不仅会被隐藏，而且还会遵守 java 的 oops 规则。

# php - 如何使用 DateTime 类在 PHP 中的时区之间进行转换？

> ID：15625834
> 
> 赞同：48
> 
> 时间：2013-03-25T22:13:24.103
> 
> 标签：php, datetime, timezone

我正在尝试将当前时间到 UTC 和 UTC 到当前时区之间的时间转换。

这是我所做的：

```
$schedule_date = new DateTime($triggerOn, new DateTimeZone('UTC') );
$triggerOn =  $schedule_date->format('Y-m-d H:i:s');

echo $triggerOn; 
```

输出值不会改变唯一改变格式的东西。

该字符串`$triggerOn`是根据`America/Los_Angeles`时区生成的

这是我的字符串前后的样子：

```
BEFORE    04/01/2013 03:08 PM
AFTER     2013-04-01 15:08:00 
```

所以这里的问题是 DateTime 不会转换为 UTC。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-25T22:32:03.910

你要找的是这个：

```
$triggerOn = '04/01/2013 03:08 PM';
$user_tz = 'America/Los_Angeles';

echo $triggerOn; // echoes 04/01/2013 03:08 PM

$schedule_date = new DateTime($triggerOn, new DateTimeZone($user_tz) );
$schedule_date->setTimeZone(new DateTimeZone('UTC'));
$triggerOn =  $schedule_date->format('Y-m-d H:i:s');

echo $triggerOn; // echoes 2013-04-01 22:08:00 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-25T22:34:28.000

您正在使用日期/时间并正确设置时区，但是在格式化日期时间之前，您没有设置所需的输出时区。这是一个接受 UTC 时区并将日期/时间转换为 America/Los_Angeles 时区的示例：

```
<?php
$original_datetime = '04/01/2013 03:08 PM';
$original_timezone = new DateTimeZone('UTC');

// Instantiate the DateTime object, setting it's date, time and time zone.
$datetime = new DateTime($original_datetime, $original_timezone);

// Set the DateTime object's time zone to convert the time appropriately.
$target_timezone = new DateTimeZone('America/Los_Angeles');
$datetime->setTimeZone($target_timezone);

// Outputs a date/time string based on the time zone you've set on the object.
$triggerOn = $datetime->format('Y-m-d H:i:s');

// Print the date/time string.
print $triggerOn; // 2013-04-01 08:08:00 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T22:17:15.147

Create the date using the local timezone, then call `DateTime::setTimeZone()` to change it.

# ios - 在 ios 5 上使用 ShareKit 将文本发布到 facebook

> ID：15625846
> 
> 赞同：0
> 
> 时间：2013-03-25T22:14:22.813
> 
> 标签：ios, facebook, ios5, sharekit

我正在更新一个现有的 IOS 应用程序，该应用程序使用 ShareKit 来分享到 Facebook 和 Twitter。我已经集成了 ShareKit 2.0 并按照所有说明进行操作。我在 IOS 6 下分享到 Facebook 和 Twitter 没有问题。

然而，在 IOS 5 上，Twitter 可以正常工作，但 Facebook 不能。这是我看到的行为：

1.  我有一个按钮可以将文本发布到 Facebook。当我点击它时，它会将我带到一个 Safari 窗口以登录 Facebook。
2.  我登录，它把我带到另一个 safari 页面，说我已经授权了该应用程序。
3.  我点击右上角的“确定”按钮，它会带我回到我的应用程序并在窗口中覆盖一个类型。
4.  我输入一些内容并点击“发送到 Facebook”按钮。
5.  现在它带我回到与#2 相同的 Safari 窗口。如果我点击确定，我会再次回到我的应用程序，并显示“保存到 Facebook”的活动指示器。该指标永远旋转。我也遇到了崩溃：

> 2013-03-25 15:04:57.570 APPNAME[72699:c07]-[__NSCFDictionary setObject:forKeyedSubscript:]：无法识别的选择器发送到实例 0xb468f30
> 
> 2013-03-25 15:04:57.596 APPNAME[72699:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary setObject:forKeyedSubscript:]：无法识别的选择器发送到实例 0xb468f30”

***首先抛出调用栈：

> (0x6e6022 0x1fbbcd6 0x6e7cbd 0x64ced0 0x64ccb2 0x1e7818 0x1e7396 0x1e2587 0x1c6c00 0x1c6413 0x1dd0aa 0x1db4ad 0x1d7729 0x1e0263 0x1e0999 0x17c6a49 0x17c4e84 0x17c5ea7 0x17c4e3f 0x17c4fc5 0x1709f5a 0x94aa39 0xa17596 0x941120 0xa17117 0x940fbf 0x6ba94f 0x61db43 0x61d424 0x61cd84 0x61cc9b 0x24a87d8 0x24a888a 0xdc3626 0x23b9 0x22f5) terminate called throwing an exception(lldb)

我试过打开调试但没有得到帮助。

非常感激任何的帮助！

干杯，

*   乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:15:30.480

您需要在 AppDelegate 中实现以下内容

```
-(BOOL) application:(UIApplication *)application 
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation
{
    NSString* scheme = [url scheme];

    if ([scheme hasPrefix:[NSString stringWithFormat:@"fb%@", SHKCONFIG(facebookAppId)]]) {
        return [SHKFacebook handleOpenURL:url];
    }

    return YES;
} 
```

在这种情况下，当 Safari 带回您的应用程序时，ShareKit 将显示对话框以输入共享消息，您将能够发送它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:33:05.700

我过去遇到过与此类似的问题，并认为这与直到 iOS 6 才添加选择器有关，可能会看到这个堆栈交换线程：

[iOS5 中我的 UITableView 中的 dequeueReusableCellWithIdentifier 错误](https://stackoverflow.com/questions/12016331/dequeuereusablecellwithidentifier-error-in-my-uitableview-in-ios5)

# java - 将列名和行数据添加到表模型

> ID：15625850
> 
> 赞同：0
> 
> 时间：2013-03-25T22:14:50.873
> 
> 标签：java, arrays, swing, nullpointerexception

当我尝试将列名和行数据添加到表模型时，出现空指针异常。列名来自列表，我将它们作为数组添加到表模型中。但在那里我得到了例外：`tableModel.addColumn(columnNames.toArray()); tableModel.addRow(rowData);`

我的完整代码：

```
public class DBC extends JFrame{

static String tablo;
static JTextField tf = new JTextField(20);
static int columnCount;
static JPanel tfPanel = new JPanel();
static String[] sutunlar;
static JLabel sutunLabel;
static JPanel sutunPanel = new JPanel(new BorderLayout());
static JTable table;
static JScrollPane scrollPane;
static DefaultTableModel tableModel;
static Object[] columnNames;

public static void main(String[] args) throws Exception {

    Class.forName("com.mysql.jdbc.Driver");
    Connection connect = DriverManager.getConnection("jdbc:mysql://localhost:3306/project"
              ,"root","123456789");

    final Statement statement = connect.createStatement();

    JLabel tabloSec = new JLabel("Tablo Seçin:");
    final JComboBox<String> tablolar = new JComboBox<String>();
    final DatabaseMetaData md = connect.getMetaData();
    final ResultSet rs = md.getTables(null, null, "%", null);

    while (rs.next()) {
        tablolar.addItem(rs.getString(3));
    }

    tablolar.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent arg0) {

            tablo = tablolar.getSelectedItem().toString();

            try {

                 ResultSet rs2 = statement.executeQuery("SELECT * FROM "+tablo);
                 ResultSetMetaData rsmd = rs2.getMetaData();
                 columnCount = rsmd.getColumnCount();
                 List<String> columnNames = new ArrayList<String>();
                 sutunlar = new String[columnCount];

                 Object rowData[][] = {{""}};

                     for(int i=0;i<columnCount;i++){

                         sutunlar[i] = rsmd.getColumnLabel(i+1);
                         columnNames.add(sutunlar[i]);
                         tableModel.addColumn(columnNames.toArray());
                         tableModel.addRow(rowData);

                         }

                     tableModel = new DefaultTableModel(rowData, columnNames.toArray());
                     table = new JTable();
                     table.setModel(tableModel);
                     table.repaint();
                     scrollPane = new JScrollPane(table);
                     sutunPanel.add(scrollPane);
                     sutunPanel.revalidate();
                     sutunPanel.repaint();

            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });

    JButton ekle = new JButton("Ekle");
    ekle.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent e) {

            try {
                switch(tablo){
                case "department":

                    statement.executeUpdate("INSERT INTO department(Name,Location) VALUES('"+tf.getText()+"')");
                case "employee":

                    statement.executeUpdate("INSERT INTO employee(Id,FirstName,LastName,Sex,Address,Email,Salary,BirthDate,JoinDate) VALUES('"+tf.getText()+"')");
                case "engineer":

                    statement.executeUpdate("INSERT INTO engineer(EngineerType) VALUES('"+tf.getText()+"')");
                case "manager":

                    statement.executeUpdate("INSERT INTO manager(Department) VALUES('"+tf.getText()+"')");
                case "project":

                    statement.executeUpdate("INSERT INTO project(Name,Number,Value) VALUES('"+tf.getText()+"')");
                case "secretary":

                    statement.executeUpdate("INSERT INTO secretary(TypingSpeed) VALUES('"+tf.getText()+"')");
                }

            } catch (SQLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });

    JButton cik = new JButton("Çık");
    cik.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            System.exit(0);
        }
    });

    JPanel panel = new JPanel(new FlowLayout());

    panel.add(tabloSec);
    panel.add(tablolar);
    panel.add(sutunPanel);
    panel.revalidate();
    panel.add(ekle);
    panel.add(cik);

    JFrame frame = new JFrame("Deneme");
    frame.setSize(600,600);
    frame.setLocationRelativeTo(null);
    frame.add(panel);
    frame.setVisible(true);
  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:23:07.607

您需要`tableModel`在访问它之前进行实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:26:03.140

您尚未在 for 循环之前实例化您的`tableModel` Move this 代码 。`tableModel = new DefaultTableModel(rowData, columnNames.toArray());`

# wcf - TFS Build 2010 CodeActivity：无法在 XAML 中加载程序集

> ID：15625856
> 
> 赞同：1
> 
> 时间：2013-03-25T22:15:01.477
> 
> 标签：wcf, xaml, tfsbuild

我正在尝试将自定义“活动代码”添加到 TFS 构建。我几个月前写了这篇文章，并让它在一个现已失效的测试环境中运行。我正在尝试将代码的使用恢复到新的测试平台上，但遇到了问题。

当我打开我的 build.xaml 时，我会在我的自定义活动应该在的地方收到可怕的红框，指出“由于 XAML 中的错误，无法加载程序集。” 在 ErrorList 中，我还发现“在程序集 'ReportingServicesDeploy' 中找不到类型 '.DeploySSRSReportActivity'。”</p>

我已经确认我的 DLL 已签入源代码管理并且构建控制器指向它。

查看原始 XAML，我看到 build.xaml 文件将程序集定义为 xmlns:rsd="clr-namespace:;assembly=ReportingServicesDeploy

我的自定义活动（以及 VS 发现错误的位置）所在的行是：

```
<rsd:DeploySSRSReportActivity CurrentBuild="[BuildDetail]" 
SourcesDirectory="[SourcesDirectory]" 
mtbwt:BuildTrackingParticipant.Importance="High" 
xmlns:mtvc="clr-namespace:Microsoft.TeamFoundation.VersionControl.Client;assembly=Microsoft.TeamFoundation.VersionControl.Client" 
xmlns:mtvco="clr- namespace:Microsoft.TeamFoundation.VersionControl.Common;assembly=Microsoft.TeamFoundation.VersionControl.Common" 
xmlns:ras="clr-namespace:ReportingServicesDeploy;assembly=ReportingServicesDeploy" 
xmlns:rsd="clr-namespace:;assembly=ReportingServicesDeploy" 
xmlns:sad="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation" 
xmlns:sad1="clr-namespace:System.Activities.Debugger;assembly=System.Activities" /> 
```

该 DLL 名为**ReportingServicesDeploy.dll**。DLL 中的命名空间是**ReportingServicesDeploy**，活动类的名称是**DeploySSRSReportActivity**。

链接在哪里失败，所以我得到了那个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:31:30.183

当您尝试直接在您的机器上编辑 xaml 时，不涉及 tfs 和源控制，控制器在服务器上的位置是构建代理在构建期间查找程序集的位置，以及 VS 在打开构建定义时获取它们的位置配置。

您的错误可能是由正在使用的旧版本引起的。

这些程序集必须可用于您机器上的 Visual Studio - 一种选择是将它们添加到 GAC 或发布到 VS bin 文件夹中。之后启动新的工作室实例

要安装到 GAC 中，请从 Visual Studio 命令行运行： gacutil /i "Path\To\YourAssembly.dll"

从 Visual Studio 命令行中删除程序集运行： gacutil /u "YourAssembly"

对于工作室程序集，我相信这是文件夹：Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies

# javascript - 文本滑动“选框”，不等待文本完成然后开始循环

> ID：15625861
> 
> 赞同：0
> 
> 时间：2013-03-25T22:15:26.700
> 
> 标签：javascript, jquery, html

我正在尝试制作像选框一样的文本幻灯片，但我不想在它完成循环后再次显示文本，我希望它在第一个文本完成后立即显示下一个。

这是 jsfiddle 链接：http: [//jsfiddle.net/gR7L2/1/](http://jsfiddle.net/gR7L2/1/)

所以我想让“hello world”字符串之间的空间相同，而不是完成第一个字符串然后开始另一个，我不知道你是否能理解我想说的。

这是html：

HTML

```
<h1>Hello World!<span style="color:#FFF">...................................</span>Hello World!</h1> 
```

我认为这是我知道的一种原始方法。我不知道如何为每个循环显示 2 个字符串！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:39:54.570

你应该检查这个插件，它似乎满足了你的要求：

[http://www.gcmingati.net/wordpress/wp-content/lab/jquery/newsticker/jq-liscroll/scrollanimate.html](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/newsticker/jq-liscroll/scrollanimate.html)

# haskell - 在这种情况下，为什么在与嵌套的 StateT monadT 交互时不需要使用“lift”？

> ID：15625867
> 
> 赞同：10
> 
> 时间：2013-03-25T22:15:42.097
> 
> 标签：haskell, monads, monad-transformers, state-monad

假设我有一个 monadT：

```
type Wrap a = ReaderT Env ( StateT Int ( StateT Int Identity ) ) a 
```

这里要注意的重要一点是，一个 StateT 包装了另一个，并且两者都包装在第三个 MonadT 中，即 ReaderT。

以及相应的 runWrap 函数为方便起见：

```
type Env = Map.Map Char Integer

runWrap :: Env -> Int -> Int -> Wrap a -> a
runWrap env st1 st2 m = runIdentity $ evalStateT ( evalStateT ( runReaderT m env ) st2 ) st1 
```

还有一个通用的 tock 状态单子：

```
tock :: (Num s, MonadState s m) => m ()
tock = do modify (+1) 
```

我现在创建一个 wrap monadT，其中我使用 tock：

```
aWrap :: Wrap ( Int, Int )
aWrap = do
    lift tock
    lift . lift $ tock
    x    <- get
    y    <- lift . lift $ get
    return ( x, y ) 
```

并运行它：

```
env = Map.fromList [('x', 1)]
runWrap env 1 200 aWrap
// answer: (201,2) 
```

`lift`就我对如何与 MonadT 的嵌套层进行交互的理解而言，这里的使用对我来说很有意义。

但是，这也有效并给了我相同的答案`(201,2)`：

```
aWrap :: Wrap ( Int, Int )
aWrap = do
    tock
    lift . lift $ tock
    x    <- get
    y    <- lift . lift $ get
    return ( x, y ) 
```

我认为通过调用`tock`w/o `lift`，它看起来好像`tock`应用于外部 MonadT，即 ReaderT，这是没有意义的。但为什么这行得通？

PS 请忽略`Env`这里的存在，它与问题无关，只是我正在使用的外部 MonadT 的选择。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T22:46:11.530

您可能在`MonadState`不知道的情况下使用类型类。这个类型类是在`mtl`包中定义的（`monads-fd`也在 中）。

`MonadState`允许您`State`在许多基于`State`.

[查看haddocks](http://hackage.haskell.org/packages/archive/mtl/2.1.2/doc/html/Control-Monad-State-Class.html)中的以下两行：

```
Monad m => MonadState s (StateT s m)
MonadState s m => MonadState s (ReaderT r m) 
```

第一个说 any`StateT`是`MonadState`（如我们所料！）的一个实例。第二个说任何`ReaderT`其基本单子是 的`MonadState`实例，也是 的实例`MonadState`。这恰好是你的情况。

查看[源代码](http://hackage.haskell.org/packages/archive/mtl/2.1.2/doc/html/src/Control-Monad-State-Class.html#modify)，`MonadState`我们发现：

```
instance MonadState s m => MonadState s (ReaderT r m) where
    get = lift get
    put = lift . put
    state = lift . state

modify :: MonadState s m => (s -> s) -> m ()
modify f = state (\s -> ((), f s)) 
```

如您所见，类型类的内部机制负责提升。

还有其他提供类似功能的类型类，`MonadReader`例如`MonadWriter`和`MonadRWS`。

# entity-framework - 使用 T4 获取实体映射表名

> ID：15625872
> 
> 赞同：1
> 
> 时间：2013-03-25T22:15:56.983
> 
> 标签：entity-framework, t4

我正在尝试使用 T4 生成以下代码：

```
public virtual IList<Frequency> GetAll()
    {
        using (var wc = new WCDataClassesDataContext())
        {
            return wc.Frequencies.ToList();
        }
    }

    public virtual IList<Frequency> GetAll(Expression<Func<Frequency, bool>> whereClause)
    {
        using (var wc = new WCDataClassesDataContext())
        {
            return wc.Frequencies.Where(whereClause).ToList();
        }
    } 
```

在 T4 中，我正在使用：

```
foreach (var entity in typeMapper.GetItemsToGenerate<EntityType>(itemCollection))
{
    fileManager.StartNewFile(entity.Name + "BaseFinder.cs");
    BeginNamespace(code);
 #>

<#=codeStringGenerator.UsingDirectives(inHeader: false)#>
using System.Linq;
using System.Linq.Expressions;
<#=codeStringGenerator.EntityClassOpening(entity)#>
{

    public virtual IList<<#=entity.Name #>> GetAll()
    {
        using (var wc = new WCDataClassesDataContext())
        {
            return wc.[[Frequencies]].ToList();
        }
    }

    public virtual IList<<#=entity.Name #>> GetAll(Expression<Func<<#=entity.Name #>, bool>> whereClause)
    {
        using (var wc = new WCDataClassesDataContext())
        {
            return wc.[[Frequencies]].Where(whereClause).ToList();
        }
    }

......
} 
```

而不是 [[Frequencies]] 我想要实体映射到的主表名。我正在尝试设置可以在课堂上轻松使用的各种吸气剂。

你能告诉我这样做的解决方案是什么，或者可能有其他方法可以做到这一点？

希望你明白我的意思。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:38:24.750

看起来您已经拥有实体类型，所以我认为您已经很接近了 - 您需要做的就是获取具有许多关系多重性的导航属性，并且您应该进行设置。

就像是：

```
EntityType et = entity.GetType();
foreach(var navProp in et.NavigationProperties.Where(np=>np.DeclaringType == et 
        && np.RelationshipMultiplicity == RelationshipMultiplicity.Many))
{
    string s = string.Format("public virtual IList<{0}> GetAll() ...", 
                           navProp.ToEndMember.GetEntityType().Name);

} 
```

实体框架 DB-first 生成器已经做到了这一点；如果您在 EDMX 下四处挖掘，您应该会看到 a`*.Context.tt`或类似的东西。在那里，搜索`NavigationProperty`，有一个代码字符串辅助方法来生成类似的东西。

# python - 查找正则表达式、Unicode 模式

> ID：15625876
> 
> 赞同：0
> 
> 时间：2013-03-25T22:16:10.843
> 
> 标签：python, regex, unicode, python-2.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:25:41.513

仅仅因为它具有非拉丁字符的页面并不意味着它是用 unicode 编码的（还有，哪种 unicode 编码？utf-8？utf-16？）。

此外，[`re.UNICODE`](http://docs.python.org/2/library/re.html#re.UNICODE)可能不会像您认为的那样做。从文档：

> 使 `\w、\W、\b、\B、\d、\D、\s` 和 `\S` 依赖于 Unicode 字符属性数据库。

所有这一切意味着这些特定的字符类被更广泛地定义，它对源文本没有影响。

此外，编码[定义](http://www.python.org/dev/peps/pep-0263/)`-*- coding: utf-8 -*-`只是指定*源文件*的编码。

最后，正如其中一条评论所指出的，� 可能是使用当前字体不支持的字符的结果。反过来，这可能是在文本以不同编码编码时假设某种编码的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:19:30.447

这可能不是一个“答案”，本身..但你可以尝试使用[http://www.debuggex.com](http://www.debuggex.com)来调试你的正则表达式。

# google-maps-api-3 - DBpedia : Get list of Chinese universities and their adresses to populate google map?

> ID：15625877
> 
> 赞同：0
> 
> 时间：2013-03-25T22:16:39.983
> 
> 标签：google-maps-api-3, sparql, dbpedia, street-address

I'm trying to get list of Chinese universities and their adresses. The minimum being the City/Town name. I will use these addresses to populate a googlemap, [fiddle here](http://jsfiddle.net/hugolpz/F26ur/).

I saw interesting code such as:

```
SELECT ?resource ?value
WHERE { 
   ?resource a <http://dbpedia.org/class/yago/CitiesAndTownsInDenmark> .
   ?resource <http://dbpedia.org/property/populationTotal> ?value .
   FILTER (?value > 100000)
}
ORDER BY ?resource ?value 
```

Since `CitiesAndTownsInChina` doesn't work,

**1\. Where to find the exact name of the class I'am targeting ?** and

**2\. Where to find dbpedia's operators manual ?**

* * *

Note: I'am a very active user on Wikipedia, I'am well aware of all the data available there, but the dbpedia ontology/syntaxe/keywords is quite hard to get.

Personal note: queries on [http://dbpedia.org/snorql/](http://dbpedia.org/snorql/) , [http://dbpedia.org/sparql/](http://dbpedia.org/sparql/) , [http://querybuilder.dbpedia.org/](http://querybuilder.dbpedia.org/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:05:09.470

（扩展我对[如何查找某个国家人口超过 X 的城市的](https://stackoverflow.com/questions/15091228/how-to-find-cities-with-more-than-x-population-in-a-certain-country/15093099#15093099)回复）

CitiesAndTownsInDenmark 的存在是因为人们在维基百科中使用类别[http://en.wikipedia.org/wiki/Category:Cities_and_towns_in_Denmark](http://en.wikipedia.org/wiki/Category:Cities_and_towns_in_Denmark)。Wikipedia 类别非常松散，因此样式有很多变化，因此即使存在有用的类别，名称也可能无法猜测。

此外，类别是手动维护的，并且可能不会始终如一地应用。

一个好的起点是查看数据。访问[http://dbpedia.org/page/Beijing](http://dbpedia.org/page/Beijing)我看到 yago:MetropolitanAreasOfChina 这似乎很有希望，但如果你点击那个链接，你会发现它的人口并不多。

因此，请避免依赖此类类别的存在并直接查询一个国家/地区的人口稠密地区。此信息来自维基百科信息框，它们比类别更加一致。再次以北京为例，我发现：

```
select ?s { 
    ?s a <http://dbpedia.org/ontology/PopulatedPlace> ; 
       <http://dbpedia.org/ontology/country> <http://dbpedia.org/resource/China>
} 
```

（我查询的相关属性和值是通过复制北京页面中的链接位置找到的）

结果：

```
"http://dbpedia.org/resource/Hulunbuir"
"http://dbpedia.org/resource/Guangzhou"
"http://dbpedia.org/resource/Chongqing"
"http://dbpedia.org/resource/Kuqa_County"
"http://dbpedia.org/resource/Changzhou"
... nearly 3000 results ... 
```

您会注意到位置被多次编码（geo:lat 和 long、georss:point、各种 dbpprop:latd longd 的东西），并且似乎有两个令人兴奋的值。您可以简单地以您喜欢的格式处理多个值，或者尝试使用`GROUP BY`and只选择一个`SAMPLE`。

至于手册，我所知道的几乎都是学术论文，并不是很有用。然而，数据是合理的自我记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:33:47.023

对于您的第一个问题：
您可以通过查询您预期的一组实体（例如：上海）中的一个成员来查看可能的类。

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
SELECT ?type  WHERE {
    <http://dbpedia.org/resource/Shanghai> rdf:type ?type.
    FILTER regex(str(?type), ".*China", "i").
} LIMIT 100 
```

这给出了这个结果：

```
dbpedia:class/yago/MetropolitanAreasOfChina [http]
dbpedia:class/yago/PortCitiesAndTownsInChina [http]
dbpedia:class/yago/MunicipalitiesOfThePeople'sRepuBlicOfChina [http]
dbpedia:class/yago/PopulatedCoastalPlacesInChina [http] 
```

它们是您可以在 wikipedia 页面底部找到的类别的*CamelCase版本。*被of的错误大小写骗了一阵子，`RepuBlic`终于看到它只包含4个城市，所以对你的用处有限。

所以我建议使用@user205512 答案并通过链接2个属性来获取城市。

对于您的第二个问题：
我建议您在[http://answers.semanticweb.com上搜索/提问](http://answers.semanticweb.com)

# css - display:table-cell not working on an input element

> ID：15625878
> 
> 赞同：23
> 
> 时间：2013-03-25T22:16:40.710
> 
> 标签：css

I want to do a portion of a form look like a spreadsheet. There are several forms and `<table>` is thus not viable (though I'm not against it when you do are printing semantically tabular data, as it is the case).

So I tried to simply use a CSS2.1 layout directly with the form input elements, eg.

```
<div class="table">
    <form class="tbody">
        <div class="tr">
            <label class="td">Label</label>
            <input class="td" name />
            <input class="td" name />
        </div>
    </form>
</div> 
```

Full example in **[the fiddle](http://jsfiddle.net/EyhJw/1/)**.

But it looks like **`display:table-cell` does not work on `<input>` elements**!

If you check in Chrome "Computed Style" the display will be "inline-element".

But I did not find anywhere why it shouldn't:

*   [Mozilla Dev Network CSS:display](https://developer.mozilla.org/en-US/docs/CSS/display)
*   [W3C CSS 2.1 Recommendation Visual Formatting Model](http://www.w3.org/TR/CSS2/visuren.html#propdef-display)
*   [W3C Tables Recommendation](http://www.w3.org/TR/CSS2/tables.html#value-def-table-cell)

Any idea?

It sounded so much better than having some `<div class="cell">` around the `<input>` and then having to play with box-model to get it look nice...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T08:11:42.317

来自[W3.org](http://www.w3.org/TR/CSS21/conform.html)：

> “CSS 2.1 没有定义哪些属性适用于表单控件和框架，或者如何使用 CSS 来设置它们的样式。用户代理可以将 CSS 属性应用于这些元素。建议作者将这种支持视为实验性的。未来级别的 CSS可以进一步说明这一点。”

对不起，但`display: table-cell`在`input`元素上被视为实验性的。尽量避免它，例如使用 wrapper-elements 进行定位。

我用`div`元素做了一个例子。您现在可以在一个表中拥有多个表单，但它仅在`form`元素跨越整行时才有效。否则你的嵌套会被破坏。

**编辑：**`border-collapse`使用添加以避免双边框 的版本更新了小提琴。

[JSFiddle 示例](http://jsfiddle.net/beacj/2/)

# java - columns to rows hibernate

> ID：15625881
> 
> 赞同：0
> 
> 时间：2013-03-25T22:17:07.413
> 
> 标签：java, sql, database, oracle, hibernate

I have tables called PATIENTINFO and MEDICATIONINFO with columns as mentioned below

```
PATIENTINFO

PatiendId      Disease
------------------------
1000            Fever
1001            Cold

MEDICATIONINFO

MedId     PatiendId    Medicine     Value    Reaction
------------------------------------------------------
100         1000         Med1        100       R
101         1000         Med2        200       L
102         1000         Med3        150       H
103         1001         Med1        120       L
104         1001         Med2        150       R
105         1001         Med3        300       H 
```

I want result to be in the below format (Hibernate query)

```
Medicine    Value1     Reaction1     Value2     Reaction2 .......(Value n ...Reaction n)  
----------------------------------------------------------------
Med1            100           R       120          L
Med2            200           L       150          R
Med3            150           H       300          H 
```

Can anyone help me out in this??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:58:28.773

```
 SELECT
    MINFO.Medicine,
    MINFO.Reaction1,
    SUM(CASE WHEN MINFO.Reaction = 'R' THEN Value ELSE 0 END) Value1,
    SUM(CASE WHEN MINFO.Reaction = 'L' THEN Value ELSE 0 END) Value2,
    SUM(CASE WHEN MINFO.Reaction = 'H' THEN Value ELSE 0 END) Value3,
FROM PATIENTINFO PINFO
    LEFT JOIN MEDICATIONINFO MINFO
        ON PINFO.PatiendId  = MINFO.PatiendId
GROUP BY MINFO.Reaction 
```

# objective-c - Binarize pixel data for QR Code Reader

> ID：15625891
> 
> 赞同：0
> 
> 时间：2013-03-25T22:17:58.373
> 
> 标签：objective-c, xcode, ios6

How can I binarize the pixels in a CMSampleBuffer received from:

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection {} 
```

I am writing an app to recognize whenever a QR finder mark appears and I would prefer to use one of apple's Core Image filters.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:54:54.480

这是我首先要尝试的。获取图像。 [这是一个 SO 答案](https://stackoverflow.com/questions/3305862/uiimage-created-from-cmsamplebufferref-not-displayed-in-uiimageview)，其中包含一些高度投票的代码来做到这一点。

从任意数量的图像库中选择图像阈值。 [这是一个 SO 答案](https://stackoverflow.com/questions/9992078/converting-a-uiimage-blackn-white-and-not-grayscale-for-using-tesseract)，其中包含指向使用 OpenGL ES 进行 GPU 加速的答案。

# c# - Clearing button Array

> ID：15625893
> 
> 赞同：0
> 
> 时间：2013-03-25T22:18:02.413
> 
> 标签：c#, arrays, winforms, visual-studio-2010, button

I am creating a grid of buttons using the following code:

```
Button[][] buttons; 
```

In the method:

```
for (int r = 0; r < row; r++)
    {
       for ( int c = 0; c < col; c++)
           {
             buttons[r][c] = new Button();
           }
    } 
```

How can I clear and reset `buttons[][]` if `row` or `col` changes, is there away to do it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:22:02.337

就在这里。您可以调用该[`Array.Clear()`](http://msdn.microsoft.com/en-us/library/system.array.clear.aspx)函数。由于您的数组包含`Button`引用类型的对象，因此它将数组中的每个项目重置为`null`.

```
Array.Clear(buttons, 0, buttons.Length); 
```

但是，我*强烈*建议为此使用通用容器之一，而不是原始数组。例如，a[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)将是一个不错的选择。在你的情况下，`T`将是`Button`.

```
using System.Collections.Generic;  // required at the top of the file for List<T>

List<Button> buttons = new List<Button>(); 
```

要像二维数组一样使用它，您将需要一个嵌套列表（基本上，a`List`包含`List`包含`Button`对象的 a）。语法有点吓人，但不难理解它的含义：

```
List<List<Button>> buttons = new List<List<Button>>(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T22:21:15.253

你可以调用 Clear() 方法

[http://msdn.microsoft.com/en-us/library/system.array.clear.aspx](http://msdn.microsoft.com/en-us/library/system.array.clear.aspx)

# php - 缓存 Ajax 请求

> ID：15625900
> 
> 赞同：0
> 
> 时间：2013-03-25T22:18:31.527
> 
> 标签：php, javascript, ajax, jquery

使用的语言/软件/技术：PHP、MySQL、WordPress、Javascript、jQuery（最新）。

我在一个页面上有两个选择元素——一个用于州，一个用于城市。

state 元素通过 Ajax 调用从数据库中检索可用状态的函数填充到 document.ready。city 元素通过 Ajax 调用 state 元素更改事件填充，基于所选州的可用城市，同样来自数据库。

我正在尝试学习如何缓存（也许不是正确的术语）请求，以便在离开已经选择的状态后重新选择的情况下，可用的城市仍然存在。例如，当我第一次选择一个选项时，我选择了 NC。我选择的下一个选择是纽约。然后我回到北卡罗来纳州；目前回到NC后再次进行ajax调用。我希望存储结果，这样就不会有太多的查询被抛出。

欢迎任何建议，我仍在挖掘！谢谢。

```
function get_cities(state){
    $.ajax({
        type:'POST',
        data:{action:'generate_city_inputs', state:state},
        cache: true,
        dataType: 'json',
        async:false,
        url: "<?php echo site_url().'/wp-admin/admin-ajax.php'; ?>",
        success: function(value) {
            cityhtml = '';
            for (var i = 0; i < value.length; i++) {
                cityhtml += "<option value=\"";
                cityhtml += value[i][0] + "\">";
                cityhtml += value[i][0] + "</option>";
            }
            $("select#search-city").empty().append(cityhtml);
        }
    });
} 
```

在上面的代码中，状态是两个字母的代码，从状态元素更改事件传递到其他地方。此 ajax 调用调用的 PHP 函数使用 state 参数处理 select 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:30:18.057

我只会将城市对状态的响应存储在这样的对象中：

```
// Declared at the top of your script, global.
var cachedCities = {}; 
```

像这样更改您的`get_cities`代码，以便它首先检查缓存。如果它为空，则执行 ajax 调用。成功回调填充缓存。用于填充选择框的代码分解为`populateCities()`.

```
function get_cities(state){
    if (cachedCities[state]) {
        var value = cachedCities[state];
        populateCities(value);
    } else {
        $.ajax({
            type:'POST',
            data:{action:'generate_city_inputs', state:state},
            cache: true,
            dataType: 'json',
            async:false,
            url: "<?php echo site_url().'/wp-admin/admin-ajax.php'; ?>",
            success: function(value) {
                cachedCities[state] = value;
                populateCities(value);
            }
        });
    }
}

var populateCities = function(value) {
    cityhtml = '';
    for (var i = 0; i < value.length; i++) {
        cityhtml += "<option value=\"";
        cityhtml += value[i][0] + "\">";
        cityhtml += value[i][0] + "</option>";
    }
    $("select#search-city").empty().append(cityhtml);
} 
```

# compilation - 避免解决每个代码更改的依赖关系

> ID：15625901
> 
> 赞同：1
> 
> 时间：2013-03-25T22:18:32.683
> 
> 标签：compilation, playframework, playframework-2.1

我在**~run**模式下使用 Play 2.1.1-RC1 进行开发。

有没有办法避免在每次更新我的类时检查所有依赖项？

例如，排除*org.hibernate.javax.persistence*、*be.objectify.deadbolt-core*和其他将我的编译时间从 14 秒减少到 3 秒。

**添加：**

我发现可以在 Build.scala 和 plugins.sbt中添加“ **offline := true ”。**使用此选项，它会停止从远程仓库解析，但仍然需要大约 10 秒才能从本地仓库解析。我正在寻找一种完全禁用解析的方法。我的目标是尽可能减少编译时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:02:22.247

使用`run`而不是`~run`.

查看播放控制台说明：[http ://www.playframework.com/documentation/2.0/PlayConsole](http://www.playframework.com/documentation/2.0/PlayConsole)

# c# - 素数代码

> ID：15625906
> 
> 赞同：-7
> 
> 时间：2013-03-25T22:18:58.217
> 
> 标签：c#

为什么这段代码不起作用？它应该使我所有的素数都达到 10，但我只得到数字 2 和 3。

```
bool m = true;
int i;
int a;
for (a = 2; a <= 10; a++)
{
    for (i = 2; i < a; i++) 
    {
        if (a % i == 0)
        {
            m = false;
        }
    }

    if (m == true)
    {
        Console.WriteLine(a);
    }
}
Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:24:28.683

两个主要问题。

1.  你永远不会重置`m`，所以一旦你找到一个非素数，你就会在剩下的迭代中被这个结果卡住。
2.  当您测试一个非素数时，您只需继续进行一次，您会发现一个并覆盖您的结果。由于你写它的方式，它不会有那么大的问题`i-1 % i`，`== 0`但如果你早点爆发，你可以为自己节省很多时间。（您还可以通过测试来节省大量时间，`Math.Sqrt(a)`因为在那之后每个符合条件的除数都已经过测试（`a / i = b`与此相同，`a / b = i`因此您只需要检查其中一个））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:24:15.873

```
for (a = 2; a <= 10; a++)
{
    for (i = 2; i < a; i++)
    {
        if (a % i == 0)
        {
            m = false;
        }
    }

    if (m == true)
    {
        Console.WriteLine(a);
    }

    m = true; //<<******* Add this line
} 
```

当然，一些加速总是可能的

```
for (a = 2; a <= 100; a++)
{
    for (i = 2; i < Math.Sqrt(a); i++) //<--- http://en.wikipedia.org/wiki/Prime_number#Trial_division
    {
        if (a % i == 0)
        {
            m = false;
            break; //<---- a is not prime, quit the inner loop immediately.
        }
    }

    if (m == true)
    {
        Console.WriteLine(a);
    }

    m = true; //<<******* Add this line
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:23:03.583

`m`通过非素数后，您不会重置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T22:29:56.857

你真的需要一个布尔变量吗？如果您需要做的只是打印值，那么您可以跳过布尔值：

```
int i;
int a;
for(a=2; a<=10; a++) {
    for(i=2; i<a; i++) {
        if(a % i == 0) {
            Console.WriteLine(a);
            break;
        }
    }
} 
```

请注意，`break`强制退出内部`for`，因此您可以继续外部的下一次迭代`for`。

* * *

更正：上面的代码打印*非质*数。所以是的，您可能需要布尔变量来跟踪素数。但是如果你想让它正常工作，你必须打破内部：

```
int i;
int a;
bool m;
for(a=2; a<=10; a++) {
    m = true
    for(i=2; i<a; i++) {
        if(a % i == 0) {
            m = false;
            break;
        }
    }
    if (m) {
        Console.WriteLine(a);
    }
} 
```

当然，不用布尔变量也可以得到相同的结果，只需在 break 之后再进行一次比较即可：

```
int i;
int a;
for(a=2; a<=10; a++) {
    for(i=2; i<a; i++) {
        if(a % i == 0) {
            break;
        }
    }
    if(a % i != 0) {
        Console.WriteLine(a);
    }
} 
```

# java - 返回一个同时考虑日期和数字的值

> ID：15625909
> 
> 赞同：0
> 
> 时间：2013-03-25T22:19:04.557
> 
> 标签：java, performance

我有 3 个日期和 3 个数字

```
Date date1 = "2013-01-23";
Date date2 = "2013-03-24";
Date date3 = "2012-12-20";

number1 = 10;
number2 = 0;
number3 = 3; 
```

第1步：我必须检查我拥有的三个中的最新日期并选择与该日期对应的数字。

第2步：如果该日期对应的数字为0，我需要三个日期中的下一个最大值

**注意：日期可以是`null`**

如果所有日期都不为空，我的代码就可以工作。当日期之一是`null`

```
if(date1 != null && date3 != null) {
   if(date1.compareTo(date3) > 0 && number1 > 0) {
     dateCompare = date1;
     object.set(number1);
   } else if(date3.compareTo(date1) > 0 && number3 > 0) {
       dateCompare = date3;
       object.set(number3);
   }
}

if(date2 != null) {
  if(dateCompare != null) {
     if(date2.compareTo(dateCompare) > 0 && number2 > 0 ) {
        object.set(number2);
        dateCompare = date2;
     }
  }
} 
```

**更新**

例如，如果日期之一是`null` If`date1 = null`和`date2 > date3`。`number2 = 0`和`number3 = 1`。然后我想将值设置为`number3`

有人可以建议我一种方法来处理我正在寻找的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:37:50.053

你如何处理`null`完全取决于你。

此示例使用 a`TreeMap`对键/值对进行排序`Date`，然后按降序循环，直到找到非零值。

此实现会丢弃`null`值，因为它们无法进行有意义的排序。从 OP 的示例来看，这似乎是处理`null`. 剩下的唯一问题是，如果一切正常，该怎么办`null`。

```
private static final DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

public static void main(String[] args) {
    final TreeMap<Date, Integer> map = new TreeMap<Date, Integer>() {
        @Override
        public Integer put(Date key, Integer value) {
            if (key != null) {
                return super.put(key, value);                  
            }
            return null;
        }
    };
    map.put(parseDate("2013-01-23"), 10);
    map.put(parseDate("2013-03-24"), 0);
    map.put(parseDate("2012-12-20"), 3);
    for (final Entry<Date, Integer> entry : map.descendingMap().entrySet()) {
        if (entry.getValue() > 0) {
            System.out.println(entry + " has nonzero value");
            break;
        }
        System.out.println(entry + " has zero value. Continue looking.");
    }
}

public static Date parseDate(final String date) {
    if (date == null) {
        return null;
    }
    try {
        return dateFormat.parse(date);
    } catch (ParseException ex) {
        ex.printStackTrace(System.out);
        return null;
    }
} 
```

输出：

```
Sun Mar 24 00:00:00 GMT 2013=0 has zero value. Continue looking.
Wed Jan 23 00:00:00 GMT 2013=10 has nonzero value 
```

我当然会建议使用`TreeMap`而不是您的自定义代码，它对您的代码的其他读者来说更清楚。为什么要重新发明轮子？

# javascript - Javascript 正则表达式搜索/替换正在跳过匹配项

> ID：15625911
> 
> 赞同：1
> 
> 时间：2013-03-25T22:19:12.037
> 
> 标签：javascript, regex

我正在 FF 和 Chrome 中尝试以下操作

```
' 1 2 3 4 5 6 '.replace(/([\s()])(\d+)([\s()])/g, '$1[num $2]$3'); 
```

我期待的结果：

```
" [num 1] [num 2] [num 3] [num 4] [num 5] [num 6] " 
```

我得到的结果（两个浏览器）：

```
" [num 1] 2 [num 3] 4 [num 5] 6 " 
```

即使简化也会得到相同的结果：

```
' 1 2 3 4 5 6 '.replace(/\s(\d+)\s/g, ' [num $1] '); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:21:28.283

是的，您`\s`的 s 正在消耗字符。正则表达式多个匹配向前运行以防止无限循环。所以在第一场比赛之后你已经在 2 之前，但是没有空格可以匹配，所以它会忽略它。

您想要做的是使用前瞻使您的匹配不消耗，或者使用`\b`它是单词边界的零宽度匹配。

```
' 1 2 3 4 5 6 '.replace(/([\s()])(\d+)(?=[\s()])/g, '$1[num $2]') 
```

这应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:38:25.410

从评论中移动答案+添加了积极的前瞻：

```
' 1 2 3 4 5 6 '.replace(/(\s)(\d+)(?=\s)/g, '$1[num $2]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:21:40.183

尝试这个：

```
' 1 2 3 4 5 6 '.replace(/(\d+)/g, '[num $1]'); 
```

# php - foreach 语句抓取不同 HTML 文档的不同部分

> ID：15625914
> 
> 赞同：1
> 
> 时间：2013-03-25T22:19:28.413
> 
> 标签：php, html

我编写以下代码的方式是让它在特定文件夹中获取四个最新的图像和 HTML 文档，然后按发布日期的顺序显示它们。即使它使图像排序正确，我使用的覆盖系统也无法正常工作。

本段的新编辑：我已经解决了大多数问题，除了一个。由于某种原因，现在叠加层决定了两个交易图像，因此图像 1 显示图像 2 的叠加层，而图像 2 显示图像一个的叠加层。

如果有人可以提供帮助，将不胜感激。我可以在我使用代码的网站上举一个问题的例子。[该网站，单击蓝色框状区域中的缩略图](http://tm.tmngp.heliohost.org/ "网站")。

```
<?php
$i = 1;

$maxiterations = 4;

foreach (glob("news_archive/*.png") as $path)
{
    if($i < $maxiterations)
    {
        $docs[filemtime($path)] = $path;
    }
    else
    {
        break;
    }
}
asort($docs);
$i2 = 1;

$maxiterations2 = 4;

foreach (glob("news_archive/*.html") as $path2)
{
    if($i2 < $maxiterations2)
    {
        $docs2[filemtime($path2)] = $path2;
    }
    else
    {
        break;
    }

}
asort($docs2);

$var1;

$var2;

$var3;

$var4;

foreach($docs2 as $timestamp2 => $path2)
{
    if($i2 <= $maxiterations2)
    {
        if($i2 == 1)
        {
            $var1 = $path2;
        }
        elseif($i2 == 2)
        {
            $var2 = $path2;
        }
        elseif($i2 == 3)
        {
            $var3 = $path2;
        }
        elseif($i2 == 4)
        {
            $var4 = $path2;
        }
        $i2 = $i2 + 1;
    }
    else
    {
        break;
    }
}

$varcount = 1;
$varcountmax = 4;
foreach($docs as $timestamp => $path)
{
    if($varcount <= $varcountmax)
    {
        if($varcount == 1)
        {
            $prersub=substr($var1, 13, 16);
            $output="<img class='scroll' src='$path' rel='#$prersub' />";
            echo($output);
        }
        if($varcount == 2)
        {
            $prersub=substr($var2, 13, 16);
            $output="<img class='scroll' src='$path' rel='#$prersub' />";
            echo($output);
        }
        if($varcount == 3)
        {
            $prersub=substr($var3, 13, 16);
            $output="<img class='scroll' src='$path' rel='#$prersub' />";
            echo($output);
        }
        if($varcount == 4)
        {
            $prersub=substr($var4, 13, 16);
            $output="<img class='scroll' src='$path' rel='#$prersub' />";
            echo($output);
        }
        $varcount = $varcount + 1;
    }

}

?> 
```

编辑：我仍然没有解决问题和部分差异，当更正时，会完全破坏网站的其他部分。

# android - 将 Eclipse Android 调试器与自定义 Makefile Android 项目结合使用

> ID：15625917
> 
> 赞同：0
> 
> 时间：2013-03-25T22:19:42.933
> 
> 标签：android, eclipse-adt

我一直在使用自己的构建系统构建我的 Android 项目。我使用的构建系统涉及在多个 Android 项目之间合并代码的 makefile。我想开始使用 eclipse 来开发和构建我的应用程序。

如果您想知道为什么我将几个 Android 项目合并在一起：我正在构建一个应用程序的多个版本，它使用一个单独的 Android 项目中的公共代码库。由于应用程序版本之间的差异是美学，每个版本都有自己的 res 文件，这些文件覆盖了共享库代码中的 res 文件。

话虽如此，有没有办法使用 eclipse 来使用我拥有的自定义 makefile 构建项目，并且能够利用 eclipse 中的调试器工具？

提前致谢

# c# - 从代码隐藏中获取重写的 url

> ID：15625927
> 
> 赞同：2
> 
> 时间：2013-03-25T22:20:27.240
> 
> 标签：c#, asp.net, .net, c#-4.0, url-rewriting

我们正在为我们的一些 url 使用 IIS 7“URL Rewrite”功能

例如重写的规则

```
/viewSompage.aspx?id=123&title=some-title 
```

重写为

```
/View/SomePage/some-title/123/ 
```

出于多种目的（其中一个能够在电子邮件模板中设置重写的 url 等），我们需要在给定字符串的情况下在代码隐藏中获取重写的 url。

我知道重写器会使用出站规则自动将这些应用到页面中，但我仍然需要获取重写的 url 以用于其他目的。

我希望能够传递一个 url 字符串，并使 urlrewiter 将任何适用的规则应用于给定的 url 示例

```
String rewrittenURL = ApplyRewritingRules("/viewSompage.aspx?id=123&title=some-title"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:49:37.770

好的，我找到了一个不错的解决方案，不需要我做多余的事情。

```
Page.ResolveUrl(Request.RawUrl) 
```

Page 是 System.Web.UI.Page 的一个实例......这是您的标准 aspx 页面

Request ... 如果您尝试访问请求，请使用 HttpContect.Current.Request ...

```
RawUrl = /viewSompage.aspx?id=123&title=some-title 
```

重写为（根据我在 web.config 中指定的规则）

```
/View/SomePage/some-title/123/ 
```

从那里我可以用一行代码像这样构建整个链接：

```
String url = String.Format("{0}://{1}{2}", Request.Url.Scheme, Request.Url.Host, Page.ResolveUrl(request.RawUrl)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:05:46.663

您可以创建一个自定义 url 重写器类并将其配置存储在 sql 表
Table Url_Rules 中：

*   内部编号
*   nvarchar(250) 原版
*   nvarchar(250) 重写

您可以使用此表存储多个规则，然后使用 global.asax 通过在 db 中查找适当的路径来执行重写规则，例如：
SELECT original from Url_Rules where rewritten =`'http://someurl/article/id'`

```
Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    urlEngine.Rewrite(System.Web.HttpContext.Current.Request.RawUrl.ToString)
End Sub 
```

urlEngine.Rewrite 完成从 db 获取数据的工作，然后将其应用于当前上下文：

```
System.Web.HttpContext.Current.RewritePath(url_from_db) 
```

这样，您可以卸载 IIS 7 URL Rewrite，而不是创建第二种方法，该方法仅返回编码为字符串的 url 并通过电子邮件发送：

```
public Function GetUrl(ByVal url As String)
       return url_from_db
End Function 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T22:24:24.300

这不是一个很好的答案，但我认为您不应该为此目的使用 Url Rewrite。它使您的代码难以阅读，因为发生在服务器端的事情对您的代码是不可见的，而且我不完全确定您甚至可以动态更改它。如果我没记错的话，这些东西在 web.config 中，更改其中的值需要 IIS 重新编译。

# .htaccess - nginx 上的 OpenCart

> ID：15625928
> 
> 赞同：13
> 
> 时间：2013-03-25T22:20:29.660
> 
> 标签：.htaccess, url-rewriting, nginx, opencart

OpenCart 可以在 nginX 上使用 SEO URL 吗？我知道在 Apache 中，它会创建一个 .htaccess，但它是否能够自动管理 nginX 中的 URL 重定向？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T12:45:54.493

Nginx 上的 OpenCart - 我们已经使用了一年。最后，似乎其他人开始使用它。获得帮助是一场噩梦，有时进入 Nginx 很棘手。

我`www.site.com.vhost`的如下，例如：

```
# FORCE WWW
server {
    server_name  site.com;
    rewrite ^(.*) http://www.site.com$1 permanent;
}
# MAIN SERVER
# NINX 0.8.54 - WORKS ON 1.1.19
server {
    server_name  www.site.com;
    listen 80;
    root /var/www/www.site.com/web;
    index index.php index.html;
    location /image/data {
        autoindex on;
    }
    location /admin {
        index index.php;
    }
    location / {
        try_files $uri @opencart;
    }
    location @opencart {
        rewrite ^/(.+)$ /index.php?_route_=$1 last;
    }
    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }
    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }
    # Make sure files with the following extensions do not get loaded by nginx because nginx would display the source code, and these files can contain PASSWORDS!
    location ~* \.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$|\.php_ {
        deny all;
    }
    # Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).
    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }
    location ~*  \.(jpg|jpeg|png|gif|css|js|ico)$ {
        expires max;
        log_not_found off;
    }
    location ~ \.php$ {
        try_files $uri =404;
        include /etc/nginx/fastcgi_params;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
} 
```

好的，现在关于管理您的网站。您现在可以通过管理员启用 SEO，查看我[标记为 nginx 和 opencart](https://stackoverflow.com/search?q=user:596952%20%5Bopencart%5D%20nginx)的其他帖子以获取所有 URL，并使用`location / {}`

我还建议阅读有关删除 index.php?route= - 下面的链接：

[从 OpenCart 中删除 index.php?route=common/home](https://stackoverflow.com/questions/10813809/remove-index-phproute-common-home-from-opencart)

# android - 摆脱具有每个项目背景的 ListView 中的过度绘制

> ID：15625930
> 
> 赞同：6
> 
> 时间：2013-03-25T22:20:42.287
> 
> 标签：android, listview, optimization

我正在使用`ListView`列表项具有背景资源的位置。我想尽可能多地摆脱透支。我知道 Romain Guy 博客上的[性能案例研究](http://www.curious-creature.org/2012/12/01/android-performance-case-study/)帖子，但我无法完全优化列表视图。本文底部显示了一个简化示例的代码。该示例基本上只是带有列表视图的“新活动”向导。我的问题建立在这个示例之上。这是初始未优化案例的带有和不带有过度绘制标记的屏幕截图：

![幼稚案例：整个屏幕 2x-3x 透支](../Images/7f19799f136971b9d8ecdf8a5e1fe561.png)

见证页面有灰色背景（它是我真实项目中的纹理）并且列表项有白色背景（它是我真实项目中的九个补丁）。过度绘制是戏剧性的，屏幕的任何部分都不会只绘制一次，列表项在显示内容字母之前被绘制三次。

很容易摆脱装饰视图中的背景，`Window`并切出一个完整的透支层。如果列表包含足够的项目来填满整个屏幕，我也可以`ListView`在一个非常好的地方砍掉背景：

![优化案例：背景消失，几乎没有透支](../Images/a672c6570100b65edbf426348f969664.png)

不幸的是，*当列表中的项目少于填满整个屏幕时，这不起作用*。如果我没有设置任何背景，则列表项下方没有任何内容。如果我在列表视图（或任何父视图）上设置背景，我会为所有确实存在的列表项完全透支：

![未优化的情况：以透支为代价正确处理部分列表](../Images/d6c8a000a63cf9dbb7b613ba72b4ece1.png)

这是较小的邪恶，但令人不满意，因为大多数时候我的清单都会从屏幕上消失。有没有一种可靠的方法可以在最后一项之后在列表视图中获取背景，而不会引入过度绘制？

## 此问题中使用的示例代码：

活动：

```
//MainActivity.java
public class MainActivity extends Activity {
    private static final String[] DATA = { "Alpha", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot", "Golf", "Hotel", "India", "Juliet" };

    @Override protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Optimization 1: getWindow().setBackgroundDrawableResource(android.R.color.transparent);
        ListView lv = (ListView) findViewById(android.R.id.list);
        lv.setAdapter(new ArrayAdapter<String>(this, R.layout.activity_main__list_item,
                    android.R.id.text1, data));
    }
} 
```

布局：

```
<!-- layout/activity_main.xml -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:background="#FFDDDDDD"
        android:text="Page header information" />
    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#FFDDDDDD"
        android:divider="@null" />
</LinearLayout>

<!-- layout/activity_main__list_item.xml -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    android:layout_width="match_parent" 
    android:layout_height="48dp"
    android:background="@android:color/white" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:31:23.993

我想出了一个我自己的解决方案，避免了 j__m's [answer](https://stackoverflow.com/a/15625976)的嵌套权重问题。不利的一面是，它不能轻松地与其他 ListView 自定义组合。这可能比涉及`WRAP_CONTENT`列表视图高度的解决方案更有效，因为在测量期间 ListView 不需要`getView(...)`其子项。

当然，`ListView#onMeasure()`实现足够聪明，一旦它有足够的高度来填充其父视图并且无论如何它都会到达`getView()`相同的位置，它就会停止测量子`onDraw()`级，因此效率论点似乎没有实际意义。尽管如此，Romain Guy[还是坚持](https://groups.google.com/d/msg/android-developers/OdPQbeVnxnE/0QhruXPcx8MJ)认为 ListView 不应该使用`WRAP_CONTENT`.

```
/**
 * A list view for use with list items that have their own background drawable. Such list views
 * suffer from GPU Overdraw of the item background on top of the list view (ancestor) background.
 * <p>
 * This subclass detects when its data set contains enough elements to fill all available space
 * and start scrolling. If this is the case, it sets its own background to transparent.
 * </p>
 * <p><strong>Limitation:</strong> Header and Footer views are ignored. If the list view has few
 * enough items that it wouldn't scroll, but a header and/or footer are big enough to cause it to
 * scroll anyway, the background is not hidden and overdraw is present.
 * </p>
 * <p>Source: https://stackoverflow.com/q/15625930/49489 CC-BY-SA</p>
 */
public class BackgroundListView extends ListView {

    /** We need our own instance, because it's used as a sentinel value later on. */
    private static final Drawable TRANSPARENT = new ColorDrawable(0x00000000);

    /** If true, the next call to {@code onDraw(Canvas)} evaluates whether to show or hide the background. */
    private boolean mNeedsBackgroundCheck = true;

    /** The background to restore if the list shrinks. */
    private Drawable mOriginalBackground;

    public BackgroundListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public BackgroundListView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public BackgroundListView(Context context) {
        this(context, null, 0);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        this.mOriginalBackground = this.getBackground();
    }

    @Override
    public void setBackground(Drawable background) {
        super.setBackground(background);
        Drawable newBackground = getBackground();
        if (newBackground != TRANSPARENT) {
            this.mOriginalBackground = newBackground;
        }
    }

    @Override
    public void setBackgroundResource(int resid) {
        super.setBackgroundResource(resid);
        Drawable newBackground = getBackground();
        if (newBackground != TRANSPARENT) {
            this.mOriginalBackground = newBackground;
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if (mNeedsBackgroundCheck) {
            maybeHideBackground();
        }
        super.onDraw(canvas);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mNeedsBackgroundCheck = true;
    };

    @Override
    protected void handleDataChanged() {
        super.handleDataChanged();
        mNeedsBackgroundCheck = true;
    }

    private void maybeHideBackground() {
        if (isInEditMode()) {
            return;
        }
        final int maxPosition = getAdapter().getCount() - 1;
        final int firstVisiblePosition = getFirstVisiblePosition();
        final int lastVisiblePosition = getLastVisiblePosition();
        if (firstVisiblePosition > 0 || lastVisiblePosition < maxPosition) {
            setBackground(TRANSPARENT);
        } else {
            setBackground(mOriginalBackground);
        }
        mNeedsBackgroundCheck = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:23:51.773

将 ListView 放在 LinearLayout 中，将 ListView 的高度设置为 WRAP_CONTENT，并在其下方放置另一个 view，layout_weight="1"。把你的背景放在那个视图上。

# c++ - 为什么第一次迭代后 C++ io 流的循环会中断？

> ID：15625939
> 
> 赞同：0
> 
> 时间：2013-03-25T22:21:29.030
> 
> 标签：c++, loops, while-loop, file-io

这是我到目前为止的代码。我正在从输入文件中获取数据。该文件包含我调用的每个变量所需的所有数据，但是当我运行它时，我只得到一次迭代，然后退出循环。我需要它运行直到它到达文件的末尾。

```
#include <iostream>
#include <fstream>
#include <string>
#include <cmath>
using namespace std;

int main ()
{
    ifstream pTemp("PlanetCelsius.dat");
    int pNumber, pSize;
    string pName;
    double cTemp, fTemp;

    cout << "Number\t" << "Planet Name\t" << "Diameter\t" << "Celsius\t" << "Fahrenheit" << endl;

        while (pTemp >> pNumber) 
        {
            while (pTemp >> pName) 
            {
                while (pTemp >> pSize) 
                {
                    while (pTemp >> cTemp) 
                    {
                        pTemp >> pNumber;
                        cout << pNumber << " ";
                    }
                pTemp >> pName;
            cout << pName << " ";
                }
        pTemp >> pSize;
        cout << pSize << " ";
            }
    pTemp >> cTemp;
    fTemp = 9 * (cTemp) / 5 + 32;
    cout << cTemp << " " << fTemp << endl;
        }

    system ("PAUSE");
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:46:54.453

```
while (cin.good)
{
    pTemp >> pNumber >> pName >> pSize >> cTemp >> pNumber;
    cout << pNumber << " " << pName << " " << pSize << " ";
    fTemp = 9 * (cTemp) / 5 + 32;
    cout << cTemp << " " << fTemp << endl;

}
return 0; 
```

我还没有看到你的文件结构，但我猜这个代码片段会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:59:12.727

你正在做的：

```
while(there's a number)
  while(there's a string)
    while(there's a number)
     while(there's a number)
     take first number
    take first string
  take first number
take first number 
```

并且您的程序会在最里面的 while 循环中获取它可以获取的所有数字，从而弄乱您的数字-字符串-数字-数字序列。

当第二次检查第一个 while 时，它​​找不到一个数字，因为最里面的循环已经获取了每个数字，直到第一个字符串并退出。

使用 while()s 是一个不好的选择，尝试按照 spin_eight 的建议解析文件。

# java - 如何从多个线程同时调用一个方法？

> ID：15625943
> 
> 赞同：2
> 
> 时间：2013-03-25T22:21:40.117
> 
> 标签：java, scala, jvm

我有一个应用程序应该（在某些情况下）防止多线程。为了对此进行测试，我需要同时从多个线程调用一个方法。

```
class MyObject {

  val myMethodCalled = new AtomicBoolean()   

  def myMethod() = {

    if (myMethodCalled.getAndSet(true))
      throw new IllegalStateException("Do not call myMethod twice")
  }
} 
```

我想从测试用例触发上述方法中的异常。

这可能`JVM`吗？如果是这样，该怎么做？

## 编辑

我想知道是否有任何方法（使用一些技巧或我不知道的类）在虚拟机中同时调用一个方法。我想这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:39:16.153

`Thread.sleep`您应该通过在方法中间睡觉（ ）或进行耗时的忙碌工作来减慢方法的处理速度，然后让两个或更多其他线程尽可能快地调用该方法。

您还可以抽象出只运行一次的功能，以便单独测试它。例如

```
def onlyOnce[A](f: => A) = {
  if (myMethodCalled.getAndSet(true)) throw new Exception("Twice!")
  f
} 
```

然后当你需要测试这是否真的有效时，你传入一个慢慢执行`f`以使测试变得容易。否则，在您的一次性方法中，您

```
def doSomething = onlyOnce {
} 
```

如果您已`onlyOnce`正确测试，则不会出错（假设事物已正确封装，因此主体`f`不会弄乱 的值`myMethodCalled`）。

最后，您最好的选择是使用至少具有三个实际执行线程的机器，并让其中两个执行忙等待，其中一个翻转另一个正在读取的 volatile var，然后都运行该方法。这本质上并不可靠，但是如果您在两者之间有小的忙等待偏移量并且多次覆盖相关空间，您至少可以提出一个统计论据，即您至少几乎一直都没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:54:05.103

只需将您的 def 更改为惰性 val，您就可以确信它只会运行一次：

```
object MyObject {

// static field
val myMethodCalled = new AtomicBoolean()   

// static method
lazy val myMethod = {
  if (myMethodCalled.getAndSet(true))
    throw new IllegalStateException("Do not call myMethod twice")
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T21:06:16.413

我对 AtomicBoolean 的需求感到有些困惑。因为你正在使用它，所以你*应该*做体面的事情并编写一个测试。那挺好的。但是，在 JVM 上测试线程代码非常困难（即使没有 JVM 的障碍，在其他语言中也不是特别容易）。

幸运的是，您的情况可能有一个更简单的解决方案。看来您可能正在尝试检测何时意外同时使用了特定方法。你能*阻止*它被如此使用吗？例如：

```
class MyObject {
  def myMethod() {
    synchronized {
      .. stuff in here is serialized by the Hoare Monitor
    }
  }
} 
```

一种有效的替代策略是在专门设计的模块中隔离顺序行为。这是 actor 模式背后的一般原则，也是更一般的 CSP 代数（用于 Occam、Go、Limbo 并通过 JCSP API 在 JVM 上可用）。测试顺序代码通常要容易得多，因此这些模式可以帮助您将任务划分为可管理的块。

有四种并发故障，单纯靠测试是无法消除[的，前段时间写过一篇文章](http://www.bigbeeconsultants.co.uk/blog/four-horsemen)。

# javascript - 延迟标记丢弃 api v3

> ID：15625945
> 
> 赞同：1
> 
> 时间：2013-03-25T22:21:48.713
> 
> 标签：javascript, google-maps-api-3

让我们从我不知道自己在做什么开始。在此之前没有真正做过任何js。我尝试让标记在它们之间稍有延迟地下降。我已经完成了我的研究并尝试了几篇文章，但我无法让它们发挥作用。这是我的代码：

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=KEY&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(52.365642,5.181599),
          zoom: 13,
          zoomControl: false,
          scaleControl: false,
          scrollwheel: false,
          disableDoubleClickZoom: true,
          disableDefaultUI: true,
          mapTypeId: google.maps.MapTypeId.ROADMAP,

          styles: [{"stylers":[{ "saturation": -29 },{ "visibility": "simplified" }]},
          {"elementType": "labels", "stylers": [{ "visibility": "off" }]}]
        }; 

        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        setMarkers(map, locaties);
      }

      var locaties = [
        ['Bondi en zo', 52.365642, 5.181599],
        ['Coogee en zo', 52.365642, 5.182599],
        ['Cronulla en zo', 52.365642, 5.183599],
        ['Manly en zo', 52.365642, 5.184599],
        ['Maroubra en zo', 52.365642, 5.185599]
      ];

      function drop() {
        for (var i =0; i < locaties.length; i++) {
          setTimeout(function() {
            setMarkers();
          }, i * 200);
        }
      }

      function setMarkers(map, locations) {

        for (var i = 0; i < locations.length; i++) {
          var klant = locations[i];
          var myLatLng = new google.maps.LatLng(klant[1], klant[2]);
          var marker = new google.maps.Marker({
              position: myLatLng,
              map: map,
              animation: google.maps.Animation.DROP
          });
        }
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
</html> 
```

*ps，是的，我已经改变了密钥*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:31:48.060

Change your functions like this, now the drop function creates a interval and drops the marker and your setMarkers function iterates the locations and calls drop function

```
 function drop(map, myLatLng) {
          setTimeout(function() {
            var marker = new google.maps.Marker({
              position: myLatLng,
              map: map,
              animation: google.maps.Animation.DROP
            });
          }, i * 200);
      }

      function setMarkers(map, locations) {
        for (var i = 0; i < locations.length; i++) {
          var klant = locations[i];
          var myLatLng = new google.maps.LatLng(klant[1], klant[2]);
          drop(map, myLatLng);
        }
      } 
```

*PS: please dont just copy paste code from here and there, understand first what they are trying to explain* and thanks for changing the key ;)

# ruby-on-rails - 如何在 Rails 中格式化日期时间？

> ID：15625947
> 
> 赞同：20
> 
> 时间：2013-03-25T22:21:54.017
> 
> 标签：ruby-on-rails, datetime, view

在我的 Rails 视图中，我有以下显示日期时间的代码。

```
<%= link_to timeslot.opening, [@place, timeslot] %> 
```

该行的结果如下：

```
2013-02-02 01:00:00 UTC 
```

如何更改它以使其显示为：

```
2/2/13: X:00 PST 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-25T22:27:12.387

`strftime()`在日期/日期时间上使用 ruby ​​：

```
<%= link_to timeslot.opening.strftime("%Y %m %d"), [@place, timeslot] %> 
```

查看[文档](http://apidock.com/ruby/DateTime/strftime)以了解格式化的工作原理。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-25T22:34:35.603

您应该为此使用助手。

如果要从 UTC 转换为 PST，可以使用该`in_time_zone`方法

```
def convert_time(datetime)
  time = Time.parse(datetime).in_time_zone("Pacific Time (US & Canada)")
  time.strftime("%-d/%-m/%y: %H:%M %Z")
end

<%= link_to convert_time(timeslot.opening), [@place, timeslot] %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T22:30:52.657

对于您要求的格式：

```
<%= link_to timeslot.opening.strftime(%d/%m/%y: %H:%M:%S %Z), [@place, timeslot] %> 
```

此处提供更多选项：

[http://rorguide.blogspot.co.uk/2011/02/date-time-formats-in-ruby-on-rails.html](http://rorguide.blogspot.co.uk/2011/02/date-time-formats-in-ruby-on-rails.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T22:34:55.240

要获得您在示例中查找的精确日期格式，请使用以下 strftime 格式字符串`"%-d/%-m/%y: %k:00 PST"`

但是，这可能不是您想要的。请在您的问题中说明（a）您想对时间字段做什么（例如，您是否总是想在整点显示时间？X:00）和（b）您是一直想报告 PST 时间还是要打印实际时区，还是要转换为 PST？

# android - 自定义列表适配器，访问android.R资源

> ID：15625949
> 
> 赞同：0
> 
> 时间：2013-03-25T22:21:59.690
> 
> 标签：android, listview

我正在尝试以编程方式为列表项创建一个视图 - 它需要类似于原始的 android 复选框模板 - 这是 android 原始模板 xml：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:textAppearance="?android:attr/textAppearanceLarge"
android:gravity="center_vertical"
android:checkMark="?android:attr/textCheckMark"
android:paddingLeft="6dip"
android:paddingRight="6dip"
/> 
```

这是我的来源：

```
CheckedTextView ctv = new CheckedTextView(context);
ctv.setId(CTV_ID);
ctv.setCheckMarkDrawable(android.R.attr.textCheckMark);
ctv.setPadding(Utils.toDP(4, context), Utils.toDP(4, context), Utils.toDP(4, context), Utils.toDP(4, context)); 
```

问题出`setCheckMarkDrawable`在线路上，我得到异常：

```
android.content.res.Resources$NotFoundException: Resource ID #0x1010046 
```

很明显，我的代码无法访问此资源。我该怎么办，我做错了什么，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:38:35.353

好的，找到了解决方案：

```
TypedValue typedValue = new TypedValue();
context.getTheme().resolveAttribute(android.R.attr.textCheckMark, typedValue, true);
return typedValue.resourceId; // <- This is the actual resource id to be used 
```

看来这个值需要解析为当前主题资源id。类似问题：[样式和主题的背景问题](https://stackoverflow.com/questions/7675231/background-issue-with-styles-and-themes/14524876#14524876)

# css - 之字折线边框（父 % 高度）

> ID：15625952
> 
> 赞同：1
> 
> 时间：2013-03-25T22:22:03.913
> 
> 标签：css, border

我正在尝试使用此示例：[http](http://dabblet.com/gist/3401493) ://dabblet.com/gist/3401493 ，它说将其用于边框：

```
.tophalf:after {
    content: " ";
    display:block;
    position: relative;
    width: 240px;
    bottom:-30px;
    height:30px;
    outline:1px solid red;
    background: linear-gradient(-45deg, transparent 75%, white 75%) 0 50%,
                linear-gradient( 45deg, transparent 75%, white 75%) 0 50%;
    background-repeat: repeat-x;
    background-size:30px 30px, 30px 30px;
} 
```

但是，我的上半部分的高度百分比为 50%，因此边框不会到达 div 的底部。我将如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:44:38.850

您要做的是以绝对方式应用之字形边框，使其粘在底部。

1.  首先我们需要一个容器，这样带有 tophalf 类的 div 可以调整到 50% 的高度
2.  其次我们需要申请 position:relative; 到上半部分，所以锯齿形边框会粘在底部
3.  现在我们可以将 position:relative 替换为 position:absolute; 在你的代码中
4.  将底部：-30px 设置为 0px

我设置了一个例子：http: [//jsfiddle.net/rym6p/2/](http://jsfiddle.net/rym6p/2/)

的HTML：

```
<div class="container">
    <div class="tophalf">
    </div>
</div> 
```

的CSS：

```
body{background:green;}
.container{height:480px;}
.tophalf{background:blue; height:50%; width:240px; position:relative;} 

.tophalf:after {
    content: " ";
    display: block;
    position: absolute;
    width: 240px;
    bottom: 0;
    height: 30px;
    outline: 1px solid red;
    background: -webkit-linear-gradient(135deg, transparent 75%, white 75%) 0               50%, -webkit-linear-gradient(45deg, transparent 75%, white 75%) 0 50%;
    background-repeat: repeat-x;
    background-size: 30px 30px, 30px 30px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T17:46:00.130

真的很喜欢这个问答。

但是，它只能处理面朝下的曲折。

我在这里为上/右/左/右方向添加 SCSS 解决方案。

希望这对其他人有用。

```
@mixin zigzag_downward( $color ){
  background: linear-gradient( 45deg, transparent 75%, $color 75%) 0 50%,
    linear-gradient(-45deg, transparent 75%, $color 75%) 0 50%;
    background-repeat: repeat-x;
    background-size:30px 30px, 30px 30px;
}

@mixin zigzag_upward( $color ){
  background: linear-gradient( 45deg, $color 25%, transparent 25%) 0 50%,
  linear-gradient(-45deg, $color 25%, transparent 25%) 0 50%;
  background-repeat: repeat-x;
  background-size:30px 30px, 30px 30px;
}

@mixin zigzag_left( $color ){
  background: linear-gradient( 45deg, transparent 75%, $color 75%) 0% 0,
    linear-gradient(135deg, transparent 75%, $color 75%) 0% 0%;
    background-repeat: repeat-y;
    background-size:30px 30px, 30px 30px;
}

@mixin zigzag_right( $color ){
  background: linear-gradient( 45deg, $color 25%, transparent 25%) 0% 0,
    linear-gradient(135deg, $color 25%, transparent 25%) 0% 0%;
    background-repeat: repeat-y;
    background-size:30px 30px, 30px 30px;
} 
```

这是一个代码笔示例：[http ://codepen.io/anon/pen/HjJBF](http://codepen.io/anon/pen/HjJBF)

# android - 打开我的应用程序以获取特定文件和 URL 扩展名 - 意图过滤器未按预期工作

> ID：15625955
> 
> 赞同：4
> 
> 时间：2013-03-25T22:22:16.930
> 
> 标签：android, android-intent, mime-types, intentfilter

## 问题：

**如何让我的应用程序无条件地打开文件和 url 扩展名？**

我对设置我的设置`intent-filter`束手无策，因为这一切都没有任何意义。我的最终目标是打开任何`path`以某个扩展名结尾的东西。举个例子，让我们选择*“.riley”*作为我的目标扩展。

## 我的基础`意图过滤器`

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />

    <data
        android:host="*"
        android:mimeType="*/*"
        android:pathPattern=".*\\.riley" />
</intent-filter> 
```

**这目前可以从`file`和打开`content`。**

## 问题 #1：路径模式

对于初学者来说，`data`参数`pathPattern`似乎没有任何作用，正如我设置的那样：

```
<data
    android:host="*"
    android:mimeType="*/*"
    android:pathPattern=".*\\.riley" /> 
```

..但我仍然可以在and方案下打开不以*“.riley”*`Intent`结尾的路径。`Uri`*`file``content`*

 *我的应用程序使用它打开的几个示例路径`intent-filter`是：

`Path: /storage/sdcard0/Download/MyApp.apk` `Path: /messagesByAccount/1`

为了清楚起见，“路径：”只是我自己在日志中添加的内容。第一个来自`file`方案下的gmail，第二个来自方案下的gtalk `content`。鉴于此，我已经对如何`intent-filters`工作感到困惑。

**和计划`pathPattern`被忽略了`file`。`content`**

## 问题 #2：在浏览器中打开

我试图让我的应用程序从浏览器打开*“.riley”*扩展名，但是重定向链接没有 MIME 类型，所以我`mimeType`从模式中删除了值`data`（我`android:mimeType="*/*"`之前有，因为 MIME 类型不是t 一致），这使我可以很好地从重定向 URL 中打开。

当我尝试从浏览器打开一个直接的*“.riley”* URL（例如：[http](http://thisisnotarealdomainname.com/myfile.riley) ://thisisnotarealdomainname.com/myfile.riley ）并且从我的应用程序打开的选项消失时，问题就出现了。将`mimeType`值添加回我的`data`模式允许我从直接 URL 打开。

**`intent-filter`不允许我同时打开直接和间接 URL 。**

## 问题 #3：方案

我希望能够从多种不同的方案类型中打开（例如：`http,`文件`,`内容`), but as soon as I remove`方案`altogether, it disqualifies my application from opening the`http `scheme and when I specify`scheme="*" `, it disqualifies my application from opening ANY scheme. I've also tried adding more`data` 模式，但我感觉好像只有一个生效，因为那没有完全帮助我。

因此，指定`http`将允许 for `http`，但显然不允许`file`或`content`不指定`scheme`disables `http`。

**我无法从所有不同的方案中打开。**

重申一下，考虑到这些*复杂性****，我怎样才能让我的应用程序无条件地打开文件和 url 扩展名***？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:58:13.143

问题＃1：`<data android:pathPattern=".*\\.riley" />`根本无效。引用[文档](http://developer.android.com/guide/topics/manifest/data-element.html#path)：

> [pathPattern] 仅当还为过滤器指定了方案和主机属性时才有意义。

问题 #2：“但是重定向链接没有 MIME 类型”应该是不正确的，除非 Web 服务器严重损坏。HTTP 重定向本身没有 MIME 类型，但这应该由浏览器自己处理，因为在浏览器处理重定向之前，它不知道 URL 是否指向它应该处理的东西（例如，网页）或者应该下载的东西。重定向的结果——HTTP 200 OK 响应——应该有一个 MIME 类型。如果您确信重定向到下载的 URL 不起作用，请创建一个示例项目来演示错误并将其发布到某处以供审查。

问题 #3：“我无法从所有不同的方案中打开。” -- 在单独的元素中使用`<data>`具有多个`android:scheme`属性的多个`<intent-filter>`元素。

例如，AOSP 音乐应用程序具有：

```
 <activity android:name="AudioPreview" android:theme="@android:style/Theme.Dialog"
            android:taskAffinity=""
            android:excludeFromRecents="true" android:exported="true" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="file"/>
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" />
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter>
        <intent-filter
            android:priority="-1">
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="content" />
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter>
    </activity> 
```

您会注意到所有三个`<intent-filter>`节中的动作、类别和 MIME 类型都是相同的；只有`android:scheme`属性不同。

现在，`file`这个音乐应用程序示例的方案只有在某些本地文件管理器将适当的 MIME 类型附加到`Intent`; 音乐不会尝试使用`android:pathPattern`来匹配文件扩展名。事实上，谷歌很少使用`android:pathPattern`. AOSP 日历应用程序中出现了一次：

```
 <intent-filter
           android:priority="50">
           <action android:name="android.intent.action.VIEW" />
           <category android:name="android.intent.category.DEFAULT" />
           <category android:name="android.intent.category.BROWSABLE" />
           <data android:scheme="http" android:host="www.google.com" android:pathPrefix="/calendar/event" />
           <data android:scheme="https" android:host="www.google.com" android:pathPrefix="/calendar/event" />
           <data android:scheme="http" android:host="www.google.com" android:pathPattern="/calendar/hosted/.*/event" />
           <data android:scheme="https" android:host="www.google.com" android:pathPattern="/calendar/hosted/.*/event" />
        </intent-filter> 
```

但仅此而已。当然其他人已经尝试过了——StackOveflow 上有很多关于它的使用的问题。**

# c++ - std::cin 可以在运行时从接受文件输入切换到键盘输入吗？

> ID：15625956
> 
> 赞同：1
> 
> 时间：2013-03-25T22:22:19.480
> 
> 标签：c++, cin, io-redirection

假设我有一个程序接受来自键盘的输入，或者接受来自文件的重定向输入，例如：

```
#include <iostream>

using namespace std;

int main() {
  string str;
  while (getline(cin, str)) {
    if(str.compare("exit") == 0)
      return 0;
  }
  return 0;
} 
```

在这个实现中，我希望使用键盘输入的程序实例将在键入“exit”时终止，并且使用文件输入的程序实例将在 EOF 时终止。

我想实现这样的功能，如果正在运行的程序实例使用文件输入，它将允许在到达 EOF 时进行键盘输入，而不是终止。我做了一些研究，表明这是不可能`getline`的，因为它是 while 循环的条件，因为一旦文件输入结束，它就会返回 false，而且我不知道有什么方法可以告诉`cin`我要接受键盘当时输入。

那么，是否可以`cin`在文件运行时从接受文件输入切换到接受键盘输入？如果不是，你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:14:41.733

你当然可以。该[`std::cin.rdbuf()`](http://en.cppreference.com/w/cpp/io/basic_ios/rdbuf)函数可以将另一个 I/O 缓冲区重新分配给`cin`. 但是你必须先获得缓冲区。

当您使用 shell 将文件重定向到 时`stdin`，该文件将替换键盘。否则，shell 负责将键盘连接到程序，所以现在你只能靠自己了。C++ 没有定义键盘接口。除非您想使用特定于平台的（可能不值得），否则程序的使用约定需要稍作改变。

最标准的解决方案是将输入文件添加为命令行选项。这可以很容易地作为`std::filebuf`缓冲区对象打开。将其传递给`std::cin.rdbuf()`，并保存返回值。现在`std::cin`从文件中读取。完成后，将保存的值传递`rdbuf`给它以将其恢复为原始`stdin`文件描述符，该文件描述符仍连接到键盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:03:01.977

问题不在于`std::cin`. 使用`std::cin.rdbuf(newBuf)`您可以切换输入源。但是，您的新输入源是什么？ISO C++ 对键盘一无所知。它确实知道标准输入，但这已经设置为此处的文件内容。

您可以将操作系统级别的键盘界面包装在一个`std::streambuf`界面中，但这当然是不可移植的。

# ios - 带笔尖的自定义初始化程序？

> ID：15625960
> 
> 赞同：1
> 
> 时间：2013-03-25T22:22:28.800
> 
> 标签：ios, objective-c, cocoa-touch

我正在创建一个自定义 UICustomView，它是 UIView 的子视图。我可以在其中创建一个自定义的指定初始化程序，它将要求一个委托和数据源。但这只会在控件使用者以编程方式创建控件时调用。

但是，我想提供基本的布局支持，即。应该可以将一个空的 UIView 放入任何 NIB 文件中，然后将其在 Identity Inspector 中的类更改为 UICustomView。以类似的方式，您可以将其他库存 Apple 控件放入笔尖。

但是，我将如何强制消费者提供委托和数据源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:26:58.640

如果我正确理解您的问题，您可以使用 initWithCoder: 来做您想做的事。这将要求来自 xib 或故事板的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:55:32.090

不幸的是，没有办法使用 nib 文件中的自定义初始化程序。最常见的是，需要数据源和委托的视图使用视图类中的 IBOutlet 属性进行连接，或者在呈现视图之前在视图控制器中设置它们的属性。

如果你想强制消费者提供委托和数据源，你总是可以在`-viewDidLoad`方法中放置一个断言并确保它们已经连接（并在你使用它时处理正确的协议）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:04:57.347

正如@gaige 所说，只需在您的自定义视图类中获取数据源和委托的 IBOutlet 属性即可。您还可以在以编程方式创建时提供指定的初始化程序来设置这些值。如果有出口属性，您可以在界面构建器中将它们连接起来，就像我们使用普通的 TableViews 一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T23:11:50.260

我认为解决您的问题的最常见和快速的方法是自定义 viewDidLoad 方法在与您的视图关联的控制器的 viewdidload 方法中初始化类的属性。

# xml - XML::Simple - 如何修复相同的 xml 结构导致 2 个不同的 Perl 数据结构，具体取决于成员/syblings 的数量？

> ID：15625961
> 
> 赞同：1
> 
> 时间：2013-03-25T22:22:32.253
> 
> 标签：xml, perl, perl-module, perl-data-structures, xml-simple

我是 XML::Simple 的新手（而且对 xml 也不是很热衷）。我想用它来解析一个简单的 xml 结构，我得到一个 API 的结果。我对我得到的 xml 没有任何影响。

当返回的 xml 列表只包含一个成员时，我有一个完全不同的 perl 数据结构，就像列表有更多成员时一样。这很烦人。

即使结果仅包含一个成员，我也希望具有示例 2 中的数据结构。

我该怎么做才能获得相同的输出？

示例 1：

```
#!/usr/bin/perl -w

use strict;
use warnings;
use Data::Dumper;
use XML::Simple;

my $xml1  = new XML::Simple;
my $data1 = $xml1->XMLin( '
<aaa>
    <bbb>
        <id>1</id>
        <text>Test 1</text>
    </bbb>
</aaa>
' );

print Dumper($data1); 
```

结果1：

```
$VAR1 = {
          'bbb' => {
                   'text' => 'Test 1',
                   'id' => '1'
                 }
        }; 
```

示例 2：

```
my $xml2  = new XML::Simple;
my $data2 = $xml2->XMLin( '
<aaa>
    <bbb>
        <id>1</id>
        <text>Test 1</text>
    </bbb>
    <bbb>
        <id>2</id>
        <text>Test 2</text>
    </bbb>
</aaa>
' );

print Dumper($data2); 
```

结果 2：

```
$VAR1 = {
          'bbb' => {
                   '1' => {
                          'text' => 'Test 1'
                        },
                   '2' => {
                          'text' => 'Test 2'
                        }
                 }
        }; 
```

Tnx 为您提供帮助。

干杯，罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:28:43.787

尝试这样做：

```
#!/usr/bin/perl -w

use strict;
use warnings;
use Data::Dumper;
use XML::Simple;

my $xml1  = new XML::Simple;
my $data1 = $xml1->XMLin( '
    <aaa>
        <bbb>
            <id>1</id>
            <text>Test 1</text>
        </bbb>
    </aaa>
    ',
    ForceArray=>['bbb']
);

print Dumper($data1); 
```

来自[perldoc XML::Simple](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)：

> ForceArray => 1 # in - important
> 此选项应设置为“1”以强制嵌套元素表示为数组，即使只有一个。
> 
> 如果数据结构很可能被写回为 XML，并且不希望将单个嵌套元素向上滚动到属性的默认行为，则此选项特别有用。

# git - 在 2 个中央 git 服务器之间复制 Git Notes

> ID：15625962
> 
> 赞同：1
> 
> 时间：2013-03-25T22:22:35.610
> 
> 标签：git, gerrit

我想将所有 git notes refs ( `refs/notes/*`) 从一个中央 git 存储库转移到另一个。

假设 git 中央服务器`A`和`B`，并且我想将 git 注释从 复制`A`到`B`。

我尝试使用以下选项：

*   `git push remoteB refs/notes/*:refs/notes/*; git push --mirror`（此选项有效，但它正在删除不存在于中的其他引用，例如分支`A`）；
*   `git push --all`（此选项不会使 git 注释保持同步，但可以很好地保持`refs/heads`同步）在提交后 git 挂钩中。

* * *

```
[git@hdqpdqaapp5 modeln50.git]$ GIT_TRACE=1 git push 
source +refs/notes/*:refs/notes/* 
trace: built-in: git 'push' 'source' '+refs/notes/*:refs/notes/*' 
trace: run_command: 'ssh' '-p' '8081' 'hdqpdsource1.modeln.com' 'git-receive-pack '\''/modeln56.git'\''' 
```

它正在正确获取远程名称，但是项目名称错误（`modeln56`），而且该命令只是挂起而没有任何输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:16:27.943

这应该推动你想要的一切（笔记和头）：

```
git push remoteB 'refs/notes/*:refs/notes/*' 'refs/heads/*:refs/heads/*' 
```

您还可以通过添加 refspec 来推送标签`'refs/tags/*:refs/tags/*'`。

`remote.remoteB.push`如果你想避免输入 refspecs 列表，你可以设置配置。

# .net - 如何进行视图模型的测试

> ID：15625963
> 
> 赞同：0
> 
> 时间：2013-03-25T22:22:37.877
> 
> 标签：.net, wpf, unit-testing, mvvm, nunit

有人可以解释一下如何对 WPF 视图模型进行 nUnit 测试。我是新来的。我创建了一个 nUnit 项目，但是我不确定如何运行它。

这是通过 nUnit exe 还是直接来自 Visual Studio？

运行测试有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:02:34.317

正如 Andrew 解释的那样，viewModel 的目标是成为 UI 的可测试表示。因此，测试您的 viewModel 与任何其他对象都是一样的。

我建议您更熟悉 Nunit： [http ://www.nunit.org/index.php?p=quickStart&r=2.2.10](http://www.nunit.org/index.php?p=quickStart&r=2.2.10)

通过 VS 或 Nunit exe 运行您的测试是相同的，这只是与 VS 集成更容易。

# android - 为移动目标 lat/lng 和缩放级别的动画偏移 MapFragment 的中心

> ID：15625970
> 
> 赞同：51
> 
> 时间：2013-03-25T22:23:27.470
> 
> 标签：android, android-maps-v2

我有一个 UI，它有一个 MapFragment，上面覆盖了一个透明的 View。地图占据了整个屏幕，而视图只是屏幕的左三分之一。结果，地图的默认“中心”处于关闭状态。当有人单击标记时，我想将该标记置于 MapFragment 的完全可见区域（而不是 MapFragment 本身的中心）的中心。

由于这很难用文字来描述，所以让我用几张图片。假设这是我的 UI 的外观：

![默认地图](../Images/6c99e50c85b9ae914026f4fe572ede97.png)

当用户单击标记时，我想将它居中*并*放大以更近地看到它。没有任何调整，你会得到：

![带有不正确居中标记的地图](../Images/f3164d08726234ed2ed5abc9e9525f17.png)

我想要的是使标记居中，但在右侧的空间中，如下所示：

![带有正确居中标记的地图](../Images/d5f8393c6819fb9ea9d497e2ae0a5a9c.png)

如果您不使用地图的投影更改缩放级别，则很容易实现这一壮举：

```
// Offset the target latitude/longitude by preset x/y ints
LatLng target = new LatLng(latitude, longitude);
Projection projection = getMap().getProjection();
Point screenLocation = projection.toScreenLocation(target);
screenLocation.x += offsetX;
screenLocation.y += offsetY;
LatLng offsetTarget = projection.fromScreenLocation(screenLocation);

// Animate to the calculated lat/lng
getMap().animateCamera(CameraUpdateFactory.newLatLng(offsetTarget)); 
```

但是，如果您同时更改缩放级别，则上述计算不起作用（因为纬度/经度偏移在不同的缩放级别上发生变化）。

让我列出尝试修复的列表：

*   快速更改缩放级别，进行计算，缩放回原始相机位置，然后制作动画。不幸的是，突然的相机变化（即使只是一瞬间）非常明显，我想避免闪烁。

*   将两个 MapFragment 相互叠加，一个进行计算，另一个显示。我发现 MapFragments 并没有真正构建为相互叠加（这条路线上存在不可避免的错误）。

*   通过缩放级别平方的差异修改屏幕位置的 x/y。理论上这应该可行，但它总是偏离很多（~.1 纬度/经度，这足以偏离）。

即使缩放级别发生变化，有没有办法计算 offsetTarget ？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-12-19T01:36:43.830

最新版本的播放服务库[`setPadding()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#setPadding%28int,%20int,%20int,%20int%29)向`GoogleMap`. 此填充将所有相机移动投影到偏移地图中心。[该文档](https://developers.google.com/maps/documentation/android-sdk/configure-map#mappadding)进一步解释了地图填充的行为方式。

现在可以通过添加与左侧布局宽度等效的左侧填充来简单地解决最初在这里提出的问题。

```
mMap.setPadding(leftPx, topPx, rightPx, bottomPx); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-19T17:03:25.063

我找到了一个真正适合该问题的解决方案。解决方案是根据原始偏移量计算所需缩放中偏移量的中心，然后为地图的相机设置动画。为此，首先将地图的相机移动到所需的缩放，计算该缩放级别的偏移量，然后恢复原始缩放。计算新中心后，我们可以使用 CameraUpdateFactory.newLatLngZoom 制作动画。

我希望这有帮助！

```
private void animateLatLngZoom(LatLng latlng, int reqZoom, int offsetX, int offsetY) {

    // Save current zoom
    float originalZoom = mMap.getCameraPosition().zoom;

    // Move temporarily camera zoom
    mMap.moveCamera(CameraUpdateFactory.zoomTo(reqZoom));

    Point pointInScreen = mMap.getProjection().toScreenLocation(latlng);

    Point newPoint = new Point();
    newPoint.x = pointInScreen.x + offsetX;
    newPoint.y = pointInScreen.y + offsetY;

    LatLng newCenterLatLng = mMap.getProjection().fromScreenLocation(newPoint);

    // Restore original zoom
    mMap.moveCamera(CameraUpdateFactory.zoomTo(originalZoom));

    // Animate a camera with new latlng center and required zoom.
    mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(newCenterLatLng, reqZoom));

} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-29T21:04:38.240

编辑：以下代码适用于已弃用的 v1 地图。这个 SO 答案说明了如何在 v2 中执行类似的操作：[How to get Latitude/Longitude span in Google Map V2 for Android](https://stackoverflow.com/questions/13739075/how-to-get-latitude-longitude-span-in-google-map-v2-for-android)

您需要的关键方法应该在 long/lat 和百分比而不是像素中工作。现在，地图视图将围绕地图中心进行缩放，然后移动到暴露区域中的“重新居中”图钉。您可以在放大度数后获得宽度，考虑一些屏幕偏差，然后重新定位地图。这是按下“+”后以下代码的示例屏幕截图：之前 ![在此处输入图像描述](../Images/052dfdbb9d3e4f31465d7d11b469bf93.png) 在![在此处输入图像描述](../Images/f8c9361b4261163c8ea032b1894c98d4.png) 主代码之后：

```
@Override
            public void onZoom(boolean zoomIn) {
                // TODO Auto-generated method stub
                controller.setZoom(zoomIn ? map.getZoomLevel()+1 : map.getZoomLevel()-1);
                int bias = (int) (map.getLatitudeSpan()* 1.0/3.0); // a fraction of your choosing
                map.getLongitudeSpan();
                controller.animateTo(new GeoPoint(yourLocation.getLatitudeE6(),yourLocation.getLongitudeE6()-bias));

            } 
```

所有代码：

```
 package com.example.testmapview;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.view.Menu;
import android.widget.ZoomButtonsController;
import android.widget.ZoomButtonsController.OnZoomListener;

public class MainActivity extends MapActivity {
    MapView map;
    GeoPoint yourLocation;
    MapController controller;
    ZoomButtonsController zoomButtons;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        map=(MapView)findViewById(R.id.mapview);
        map.setBuiltInZoomControls(true);
        controller = map.getController();
        zoomButtons = map.getZoomButtonsController();

        zoomButtons.setOnZoomListener(new OnZoomListener(){

            @Override
            public void onVisibilityChanged(boolean arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onZoom(boolean zoomIn) {
                // TODO Auto-generated method stub
                controller.setZoom(zoomIn ? map.getZoomLevel()+1 : map.getZoomLevel()-1);
                int bias = (int) (map.getLatitudeSpan()* 1.0/3.0); // a fraction of your choosing
                map.getLongitudeSpan();
                controller.animateTo(new GeoPoint(yourLocation.getLatitudeE6(),yourLocation.getLongitudeE6()-bias));

            }
        });

        //Dropping a pin, setting center
        Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
        MyItemizedOverlay myItemizedOverlay = new MyItemizedOverlay(marker);
        map.getOverlays().add(myItemizedOverlay);
        yourLocation = new GeoPoint(0, 0);
        controller.setCenter(yourLocation);
        myItemizedOverlay.addItem(yourLocation, "myPoint1", "myPoint1");
        controller.setZoom(5);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

和基本布局：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testmapview"
    android:versionCode="1"
    android:versionName="1.0" >
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="YOURKEYHERE:)"/>
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.INTERNET" /> 
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps"/>

        <activity
            android:name="com.example.testmapview.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果这不能完全回答您的问题，请告诉我，因为这是一个有趣的实验。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-20T20:51:50.173

API 的投影东西并不是那么有用，我遇到了同样的问题并推出了自己的问题。

```
public class SphericalMercatorProjection {

    public static PointD latLngToWorldXY(LatLng latLng, double zoomLevel) {
        final double worldWidthPixels = toWorldWidthPixels(zoomLevel);
        final double x = latLng.longitude / 360 + .5;
        final double siny = Math.sin(Math.toRadians(latLng.latitude));
        final double y = 0.5 * Math.log((1 + siny) / (1 - siny)) / -(2 * Math.PI) + .5;
        return new PointD(x * worldWidthPixels, y * worldWidthPixels);
    }

    public static LatLng worldXYToLatLng(PointD point, double zoomLevel) {
        final double worldWidthPixels = toWorldWidthPixels(zoomLevel);
        final double x = point.x / worldWidthPixels - 0.5;
        final double lng = x * 360;

        double y = .5 - (point.y / worldWidthPixels);
        final double lat = 90 - Math.toDegrees(Math.atan(Math.exp(-y * 2 * Math.PI)) * 2);

        return new LatLng(lat, lng);
    }

    private static double toWorldWidthPixels(double zoomLevel) {
        return 256 * Math.pow(2, zoomLevel);
    }
} 
```

使用此代码，您可以围绕新目标（即不是中心）转换地图。我选择使用锚点系统，其中 (0.5, 0.5) 是默认值，代表屏幕的中间。(0,0) 位于左上角，(1, 1) 位于左下角。

```
private LatLng getOffsetLocation(LatLng location, double zoom) {
    Point size = getSize();
    PointD anchorOffset = new PointD(size.x * (0.5 - anchor.x), size.y * (0.5 - anchor.y));
    PointD screenCenterWorldXY = SphericalMercatorProjection.latLngToWorldXY(location, zoom);
    PointD newScreenCenterWorldXY = new PointD(screenCenterWorldXY.x + anchorOffset.x, screenCenterWorldXY.y + anchorOffset.y);
    newScreenCenterWorldXY.rotate(screenCenterWorldXY, cameraPosition.bearing);
    return SphericalMercatorProjection.worldXYToLatLng(newScreenCenterWorldXY, zoom);
} 
```

基本上，您使用投影来获取世界 XY 坐标，然后偏移该点并将其转回 LatLng。然后，您可以将其传递给您的地图。PointD 是简单类型，其中包含 x,y 作为双精度值，并且还进行旋转。

```
public class PointD {

    public double x;
    public double y;

    public PointD(double x, double y) {
        this.x = x;
        this.y = y;
    }

    public void rotate(PointD origin, float angleDeg) {
        double rotationRadians = Math.toRadians(angleDeg);
        this.x -= origin.x;
        this.y -= origin.y;
        double rotatedX = this.x * Math.cos(rotationRadians) - this.y * Math.sin(rotationRadians);
        double rotatedY = this.x * Math.sin(rotationRadians) + this.y * Math.cos(rotationRadians);
        this.x = rotatedX;
        this.y = rotatedY;
        this.x += origin.x;
        this.y += origin.y;
    }
} 
```

请注意，如果您同时更新地图方位和位置，请务必在 getOffsetLocation 中使用新方位。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-03T18:13:13.650

最简单的方法是链接相机动画。首先，您使用带有 3 个参数的[animateCamera](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#animateCamera%28com.google.android.gms.maps.CameraUpdate,%20long,%20com.google.android.gms.maps.GoogleMap.CancelableCallback%29)正常缩放到您的图片#2 ，`CancellableCallback.onFinish`然后使用您的代码进行投影计算和动画以更改中心。

我相信（没有测试过）如果你为两个动画的动画持续时间设置了一些好的值，这看起来会很好。也许第二个动画应该比第一个快得多。此外，如果在未选择标记时您的透明叠加视图不可见，则一个不错的用户体验将是在第二个动画期间从左侧对其进行动画处理。

困难的方法是实现自己的 Spherical Mercator Projection，就像 Maps API v2 内部使用的那样。如果您只需要经度偏移，那应该不难。如果您的用户可以更改方位并且您不想在缩放时将其重置为 0，则您也需要纬度偏移，这可能会更复杂一些。

我还认为拥有 Maps API v2 功能会很好，您可以在其中获取任何 CameraPosition 的投影，而不仅仅是当前的，因此您可能希望在此处提交功能请求：[http ://code.google.com/p/gmaps- api-issues/issues/list?can=2&q=apitype=Android2](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype=Android2)。您可以轻松地在代码中使用它来获得所需的效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T06:36:13.570

为了设置标记，我们在Android中使用Overlays，在overlay class==> on draw方法放置这个东西

边界中心（标记）；

在构造函数中也提到这样的：

```
 public xxxxxxOverlay(Drawable marker, ImageView dragImage, MapView map) {
            super(boundCenter(marker)); 
.
.
.
.
.
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-29T19:29:40.780

我的问题和你几乎一模一样（只有我的偏移是垂直的），我尝试了一个没有按预期工作的解决方案，但可以帮助你（我们）找到更好的解决方案。

我所做的是移动地图的相机以获得目标上的投影，并在那里应用偏移量。

我将代码放在 Utils 类上，它看起来像这样：

```
public static CameraBuilder moveUsingProjection(GoogleMap map, CameraBuilder target, int verticalMapOffset) {
    CameraPosition oldPosition = map.getCameraPosition();
    map.moveCamera(target.build(map));
    CameraBuilder result = CameraBuilder.builder()
            .target(moveUsingProjection(map.getProjection(), map.getCameraPosition().target, verticalMapOffset))
            .zoom(map.getCameraPosition().zoom).tilt(map.getCameraPosition().tilt);
    map.moveCamera(CameraUpdateFactory.newCameraPosition(oldPosition));
    return result;
}

public static LatLng moveUsingProjection(Projection projection, LatLng latLng, int verticalMapOffset) {
    Point screenPoint = projection.toScreenLocation(latLng);
    screenPoint.y -= verticalMapOffset;
    return projection.fromScreenLocation(screenPoint);
} 
```

然后，您可以将这些方法返回的 CameraBuilder 用于动画，而不是原始（未偏移）目标。

它有效（或多或少），但它有两个大问题：

*   地图有时会闪烁（这是最大的问题，因为它使黑客无法使用）
*   这是一种可能在今天有效但明天可能无效的 hack（例如，我知道同样的算法适用于 iOS）。

所以我没有这样做，但它让我想到了一个替代方案：如果你有一个相同的地图但隐藏了，你可以使用该地图进行中间计算，然后在可见地图上使用最终结果。

我认为这种替代方案可行，但它很可怕，因为您需要维护两个相同的地图，以及随之而来的开销，用于您和设备。

正如我所说，我对此没有明确的解决方案，但也许这会有所帮助。

我希望这有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-13T10:59:00.053

我通过使用地图上两个固定点的 LatLng 值计算距离矢量，然后使用标记位置、该矢量和预定义的比率值创建另一个 LatLng 来解决了这个问题。这其中涉及到很多对象，但是它不依赖于地图的当前缩放级别和旋转，并且可能对您同样有用！

```
// Just a helper function to obtain the device's display size in px
Point displaySize = UIUtil.getDisplaySize(getActivity().getWindowManager().getDefaultDisplay());

// The two fixed points: Bottom end of the map & Top end of the map,
// both centered horizontally (because I want to offset the camera vertically...
// if you want to offset it to the right, for instance, use the left & right ends)
Point up = new Point(displaySize.x / 2, 0);
Point down = new Point(displaySize.x / 2, displaySize.y);

// Convert to LatLng using the GoogleMap object
LatLng latlngUp = googleMap.getProjection().fromScreenLocation(up);
LatLng latlngDown = googleMap.getProjection().fromScreenLocation(down);

// Create a vector between the "screen point LatLng" objects
double[] vector = new double[] {latlngUp.latitude - latlngDown.latitude,
                                latlngUp.longitude - latlngDown.longitude};

// Calculate the offset position
LatLng latlngMarker = marker.getPosition();
double offsetRatio = 1.0/2.5;
LatLng latlngOffset = new LatLng(latlngMarker.latitude + (offsetRatio * vector[0]),
                                 latlngMarker.longitude + (offsetRatio * vector[1]));

// Move the camera to the desired position
CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLng(latlngOffset);
googleMap.animateCamera(cameraUpdate); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-05T13:27:20.057

我正在处理相同的任务，并以与您最后一个选项类似的解决方案结束：

> 通过缩放级别平方的差异修改屏幕位置的 x/y。理论上这应该可行，但它总是偏离很多（~.1 纬度/经度，这足以偏离）。

但是，`2<<zoomDifference`我没有将点的偏移量划分为经度和纬度值之间的差异，而是计算偏移量。他们是`double`s 所以它给了我足够好的准确性。因此，尝试将您的偏移量转换为 lat/lng 而不是您的位置转换为像素，然后进行相同的计算。

* * *

**已编辑**

最后，我设法以另一种方式解决了它（我相信最合适的方式）。Map API v2 具有[填充参数](https://developers.google.com/maps/documentation/android/map#map_padding)。只需设置它以使相机拍摄所有未隐藏的部分`MapView`。然后相机会在之后反射填充区域的中心`animateCamera()`

# android - 创建全局变量

> ID：15625971
> 
> 赞同：0
> 
> 时间：2013-03-25T22:23:28.427
> 
> 标签：android

我正在尝试在我的应用程序中实现基本登录。如果用户登录，我想要做的是设置一个“全局”变量为真/假。

我已经按照[这个教程](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)。所以这是我现在的代码：

```
import android.app.Application;

public class GlobalParameters extends Application{
    private boolean loggedIn;

    public boolean isLoggedIn() {
    return loggedIn;
    }

    public void setLoggedIn(boolean loggedIn) {
    this.loggedIn = loggedIn;
    }
} 
```

这是在我的`onCreate`：

```
GlobalParameters gp = ((GlobalParameters)getApplicationContext());
gp.setLoggedIn(false); 
```

但`GlobalParameters gp = ...`抛出此异常：

> ClassCastException

我也在我的清单中添加了这个：

```
<application android:name=".GlobalParameters" 
   android:icon="@drawable/ic_launcher" 
   android:label="@string/app_name">
</application> 
```

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:26:43.997

用于`this.getApplication()`获取`Application`与您的`Activity`. 但我认为在你的情况下，去那个`Application`有点矫枉过正。您可以只在类中使用静态字段。

但是，如果您希望在您`Activity`被丢弃时保留状态，那么您可以使用`SharedPreferences`，一个很好的入门指南在这里[https://developer.android.com/guide/topics/data/data-storage.html #pref](https://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:58:48.567

如果您的变量只是用于登录和注销，最好使用静态变量并在登录时将其设置为 true，在注销时将其设置为 false。

```
public static boolean loggedIn; 
```

并使用它如下：

```
myApplication.loggedIn = true;

myApplication.loggedIn = false; 
```

# size - Adobe ExtendScript 更改画笔大小

> ID：15625972
> 
> 赞同：1
> 
> 时间：2013-03-25T22:23:41.133
> 
> 标签：size, photoshop, alter, brush, extendscript

是否可以通过 ExtendScript 在 Photoshop 中更改画笔大小？我正在查看他们的文档和谷歌搜索无济于事。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:59:10.573

你必须通过动作描述符来做到这一点。查看这篇文章了解更多信息。 [http://www.ps-scripts.com/bb/viewtopic.php?f=9&t=3881&p=22742&hilit=change+brush+size&sid=cceddcf35eb7a08107d95e5ae88d8659#p17448](http://www.ps-scripts.com/bb/viewtopic.php?f=9&t=3881&p=22742&hilit=change+brush+size&sid=cceddcf35eb7a08107d95e5ae88d8659#p17448)

# wpf - 使用 ItemsSource 时操作无效。改为使用 ItemsControl.ItemsSource 访问和修改元素。解析 XAML 时出错

> ID：15625974
> 
> 赞同：0
> 
> 时间：2013-03-25T22:23:50.230
> 
> 标签：wpf, xaml, observablecollection, itemssource

我收到一个运行时错误，当它尝试解析我的`XAML`.

```
<TreeViewItem Header="{Binding Header}" ItemsSource="{Binding DataGroups}">
    <ListView ItemsSource="{Binding DataGroups}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Group Name" DisplayMemberBinding="{Binding Path=Name}" />
                <GridViewColumn Header="Group Type" DisplayMemberBinding="{Binding Path=Type}" />
            </GridView>
        </ListView.View>
    </ListView>
</TreeViewItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:25:56.773

在搜索了与此相关的所有问题后，我找不到答案。大多数相关人员更改 上的 Items 属性`TreeViewItem`，这将引发此错误。

就我而言，我没有改变任何东西。

但是，如果你注意到。

```
<TreeViewItem Header="{Binding Header}" ItemsSource="{Binding DataGroups}">
    <ListView ItemsSource="{Binding DataGroups}"> 
```

我已经绑定到同一个集合两次。

因此，如果您收到此错误，请仔细检查您是否两次绑定到同一个集合。

# sql-server - 同一列上可互换的 NONCLUSTERED 和 UNIQUE 索引

> ID：15625977
> 
> 赞同：1
> 
> 时间：2013-03-25T22:23:59.150
> 
> 标签：sql-server, indexing

我在一张桌子上有这两个索引，我想知道它们是否可以互换？问题是，当我查看使用统计信息时，我发现两者都在使用。

如果我删除会发生什么`IX_clicks_token`？会`uc_token`被使用吗？

```
CREATE NONCLUSTERED INDEX [IX_clicks_token] ON [dbo].[clicks]
(
    [token] ASC
)

ALTER TABLE [dbo].[clicks] ADD  CONSTRAINT [uc_token] UNIQUE NONCLUSTERED 
(
    [token] ASC
)

OBJECT NAME     |   IX_clicks_token --- uc_token
user_seeks      |   0 --- 12
user_scans      |   10500 --- 298
user_lookups    |   0 --- 0
user_updates    |   582272 --- 582272
last_user_seek  |   NULL --- 2013-03-24
last_user_scan  |   2013-03-25 --- 2013-03-20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:28:08.397

`IX_clicks_token`并且`uc_token`具有几乎相同的定义，唯一不同的是`uc_token`强制唯一性以及提供非聚集索引。

如果你 delete `IX_clicks_token`，`uc_token`应该改用它，假设没有一些奇怪的边缘情况，剩余的索引是超级碎片化的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:02:21.630

两者是等价的。可能，由于在相同替代方案的情况下随机优化器选择，它们都被使用。

删除其中之一。没关系，哪个。可能是您不能放弃一个而放弃另一个 - 在这种情况下，您会做出选择。

# jquery - Ajax 表单在页面刷新时不起作用

> ID：15625982
> 
> 赞同：1
> 
> 时间：2013-03-25T22:24:14.620
> 
> 标签：jquery, ajax, servlets

我正在尝试使用 ajax/jquery.(method =post) 发布动态生成的表单数据。

我可以在我的 servlet 中使用 request.getParameterNames 检索提交的数据（显示在控制台中），但只能检索一次。我的 servlet 在控制台中显示请求参数后在浏览器中显示文本。

如果我单击后退按钮并返回表单并重新提交，或者刷新表单并重新提交，表单仍会调用 servlet，但 request.getParameterNames 不会检索我的任何表单数据。

ajax代码

```
 $('#submit').click(function(e){  
 e.preventDefault();
  alert('got here');
  $.ajax({   
    type: "POST",
    url: 'Surveyoutput',
    data: $("#form1").serialize(),  
    dataType: "html",
    success: function(data, status, xhttp) {
        if ( data ) { alert ('Got Data'); } else { alert('No Data'); }
      }
    });    
    return false;  
  }); 
```

形式

```
 <form  name ="form1" id="form1" action = "Surveyoutput" method = "post">
  <input type="submit" id = "submit" name="submit" value="Submit"> 
```

伺服器

```
 @WebServlet("/Surveyoutput")
       public class Surveyoutput extends HttpServlet {
      response.setContentType("text/html");
      PrintWriter out = response.getWriter();
       out.println("test successful");

        Enumeration<String> paramNames = request.getParameterNames();  
       while(paramNames.hasMoreElements()) 
     {  
      String paramName = (String)paramNames.nextElement();  
      String paramValue = request.getParameter(paramName);  
       System.out.println(paramName);
     System.out.println(paramValue); 
     } 
```

我是 ajax 新手，无法弄清楚错误。任何帮助都会很棒！

# python - 为什么我的类方法得到 2 个非关键字位置关键字争论 TypeError？

> ID：15625985
> 
> 赞同：0
> 
> 时间：2013-03-25T22:24:23.260
> 
> 标签：python, oop, python-3.x

我是一个初学者程序员，正在编写一个模拟银行的程序来跟踪各种银行账户（我不知道我在做什么，只是把它放在那里。）练习我新获得的面向对象编程知识. 当我运行我的程序时，我的 Manager 类中创建帐户并将它们存储在列表中的部分出现错误。我将在下面发布整个源代码以及错误。随意更正您认为不正确的任何其他内容，我一直在寻找改进代码的方法。

```
# Virtual Bank
# 3/21/13

# Account Manager Class
class AccountManager(object):
    """Manages and handles accounts for user access"""
    # Initial
    def __init__(self):
        self.accounts = []

    # create account
    def create_account(self, ID, bal = 0):
        # Check for uniqueness? Possible method/exception??? <- Fix this
        account = Account(ID, bal)
        self.accounts.append(account)

    def get_account(self, ID):
        for account in self.accounts:
            if account.ID == ID:
                return account
            else:
                return "That is not a valid account. Sending you back to Menu()"
                Menu()

class Account(object):
    """An interactive bank account."""
    wallet = 0
    # Initial
    def __init__(self, ID, bal):
        print("A new account has been created!")
        self.id = ID
        self.bal = bal

    def __str__(self):
        return "|Account Info| \nAccount ID: " + self.id + "\nAccount balance: $" + self.bal

# Main        
AccManager = AccountManager
def Menu():
    print(
        """
0 - Leave the Virtual Bank
1 - Open a new account
2 - Get info on an account
3 - Withdraw money
4 - Deposit money
5 - Transfer money from one account to another
6 - Get exchange rates(Euro, Franc, Pounds, Yuan, Yen)
"""
        ) # Add more if necessary
    choice = input("What would you like to do?: ")
    while choice != "0":
        if choice == "1":
            id_choice = input("What would you like your account to be named?: ")
            bal_choice = float(input("How much money would you like to deposit?(USD): "))
            AccManager.create_account(ID = id_choice,bal = bal_choice)
            Menu()

Menu() 
```

这是错误。在 AccManager 的 create_account 方法实例化一个新帐户后，我收到错误消息。

```
TypeError: create_account() takes at least 2 non-keyword positional arguments (0 given) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:29:25.760

您定义`create_account`为实例方法，但将其称为类方法。尝试将其更改为：

```
@classmethod
def create_account(cls, ID, bal=0):
    ... 
```

不过，您可能需要保留在某处创建的帐户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:30:46.903

`AccManager.create_account`是一个[未绑定](https://stackoverflow.com/questions/114214/class-method-differences-in-python-bound-unbound-and-static)的方法，即它不属于任何对象。因此，当您调用它时，它需要参数

```
(self, ID, bal = 0) 
```

但是，您在没有值的情况下调用`self`它

```
AccManager.create_account(ID = id_choice,bal = bal_choice) 
```

你想创建一个 AccManager 对象，然后获取*它的* `create_account`方法：

```
am = AccManager() # Create object
while choice != "0":
        if choice == "1":
            id_choice = input("What would you like your account to be named?: ")
            bal_choice = float(input("How much money would you like to deposit?(USD): "))
            am.create_account(ID = id_choice,bal = bal_choice)
            Menu() 
```

# java - 块所有者窗口 Java FX

> ID：15625987
> 
> 赞同：11
> 
> 时间：2013-03-25T22:24:27.503
> 
> 标签：java, javafx-2

我想在 JavaFX 中阻止弹出窗口的所有者窗口。

我像这样初始化我的弹出窗口：

```
popUp = new Popup();
popUp.getContent().add(content);
popUp.show(pane.getScene().getWindow()); 
```

有了这个，我仍然可以在第一个窗口（窗格窗口）中工作。我想禁用此操作，并且我希望用户只在弹出窗口中工作。

这个怎么做 ？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T22:43:01.750

使用[Stage](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initModality%28javafx.stage.Modality%29)而不是[Popup](http://docs.oracle.com/javafx/2/api/javafx/stage/Popup.html)。

在显示阶段之前，根据需要将[stage.initModality](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initModality%28javafx.stage.Modality%29)调用为[APPLICATION_MODAL](http://docs.oracle.com/javafx/2/api/javafx/stage/Modality.html#APPLICATION_MODAL)或[WINDOW_MODAL](http://docs.oracle.com/javafx/2/api/javafx/stage/Modality.html#WINDOW_MODAL)。[还将 stage.initOwner](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initOwner%28javafx.stage.Window%29)调用到新阶段的父窗口，以便它会针对这种`WINDOW_MODAL`情况适当地阻止它。

```
Stage stage = new Stage();
stage.initModality(Modality.WINDOW_MODAL);
stage.initOwner(pane.getScene().getWindow());
stage.setScene(new Scene(content));
stage.show(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-18T16:26:24.823

谢谢，最佳解决方案：FXML 加载文件示例：

```
@Override
    public void start(Stage primaryStage) throws IOException {
        Parent root = FXMLLoader.load(getClass().getResource("DialogView.fxml"));
        primaryStage.initModality(Modality.APPLICATION_MODAL); // 1 Add one
        Scene scene = new Scene(root);        
        primaryStage.setScene(scene);
        primaryStage.initOwner(primaryStage.getScene().getWindow());// 2 Add two
        primaryStage.show();

    }

    public static void main(String[] args) {
        launch(args);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-20T18:55:02.680

您只需从 javafx.stage.Modality 添加 Modality 资源；

然后添加行 stage.initModality(Modality.APPLICATION_MODAL);

这里有一个例子

```
Stage stage = new Stage();

            Parent root = FXMLLoader.load(getClass().getResource( -- pathInterface --));
            root.getStylesheets().add(getClass().getResource( -- pathCss --).toExternalForm());
            stage.initStyle(StageStyle.DECORATED.UNDECORATED);
            stage.initModality(Modality.APPLICATION_MODAL);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T10:49:12.083

我正在使用 JavaFX11。这和[这两者](https://stackoverflow.com/a/15626204/624533)[都](https://stackoverflow.com/a/22485301/624533)适用于一个小的变化。这是我的工作示例。我正在使用[rgielen 的 javafx-weaver](https://github.com/rgielen/javafx-weaver)

主要的：

```
package com.featuriz.controller;

import javafx.fxml.FXML;
import javafx.scene.layout.AnchorPane;
import javafx.scene.text.Text;
import net.rgielen.fxweaver.core.FxControllerAndView;
import net.rgielen.fxweaver.core.FxmlView;
import org.springframework.stereotype.Component;

@Component
@FxmlView("/com/featuriz/ui/Login.fxml")
public class LoginController {

    private final FxControllerAndView<InfoDialogController, AnchorPane> infoDialog;

    @FXML
    private Text featuriz;

    public LoginController(FxControllerAndView<InfoDialogController, AnchorPane> infoDialog) {
        this.infoDialog = infoDialog;
    }

    @FXML
    public void initialize() {
        featuriz.setOnMouseClicked(
                actionEvent -> this.infoDialog.getController().show()
        );
    }
} 
```

对话：

```
package com.featuriz.controller;

import javafx.fxml.FXML;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.AnchorPane;
import javafx.scene.paint.Color;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.stage.StageStyle;
import net.rgielen.fxweaver.core.FxmlView;
import org.springframework.stereotype.Component;

@Component
@FxmlView("/com/featuriz/ui/InfoDialog.fxml")
public class InfoDialogController {

    private Stage stage;

    @FXML
    private Label lbl_info;

    @FXML
    private Button closeButton;

    @FXML
    private AnchorPane dialog_info;

    @FXML
    public void initialize() {
        Scene scene = new Scene(dialog_info);
        scene.setFill(Color.TRANSPARENT);
        this.stage = new Stage();
        this.stage.initModality(Modality.APPLICATION_MODAL);
        this.stage.initStyle(StageStyle.TRANSPARENT);
        this.stage.setScene(scene);
        this.stage.setAlwaysOnTop(true);

        String javaVersion = System.getProperty("java.version");
        String javafxVersion = System.getProperty("javafx.version");
        lbl_info.setText("JavaFX " + javafxVersion + "\nRunning on Java " + javaVersion + ".");

        closeButton.setOnAction(
                actionEvent -> this.stage.close()
        );
    }

    public void show() {
        this.stage.show();
    }

} 
```

# image - 如何使用 knitr 为降价设置本地图像的大小？

> ID：15625990
> 
> 赞同：170
> 
> 时间：2013-03-25T22:24:29.523
> 
> 标签：image, r, markdown, knitr, pandoc

我有一个本地图像，我想将其包含在一个`.Rmd`文件中，然后`knit`将其转换为带有`Pandoc`. 根据[这篇文章](https://stackoverflow.com/questions/10517020/how-to-import-local-image-using-knitr-for-markdown/10522029#10522029)，这将插入本地图像：
`![Image Title](path/to/your/image)`

有没有办法修改此代码以设置图像大小？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2016-03-17T10:34:57.590

这个问题很老，但仍然受到很多关注。由于现有答案已经过时，这里有一个更新的解决方案：

# 调整本地图像大小

从[`knitr`1.12](https://github.com/yihui/knitr/blob/master/NEWS.md#changes-in-knitr-version-112)开始，就有了这个功能`include_graphics`。来自`?include_graphics`（强调我的）：

> 使用此功能的主要优点是它是可移植的，因为它适用于所有`knitr`支持的文档格式，因此您无需考虑是否必须使用例如 LaTeX 或 Markdown 语法来嵌入外部图片。**适用于普通 R 绘图的与图形输出相关的块选项也适用于这些图像，例如`out.width`和`out.height`。**

### 例子：

```
```{r, out.width = "400px"}
knitr::include_graphics("path/to/image.png")
``` 
```

优点：

*   在[agastudy 的回答](https://stackoverflow.com/a/15626317/2706569)中：不需要外部库或重新光栅化图像。
*   通过[Shruti Kapoor 的回答](https://stackoverflow.com/a/15688836/2706569)：无需手动编写 HTML。此外，图像包含在文件的独立版本中。

* * *

# 包括生成的图像

要组成*在块中生成*的图的路径（但不包括在内），块选项`opts_current$get("fig.path")`（图目录的路径）以及`opts_current$get("label")`（当前块的标签）可能很有用。以下示例用于`fig.path`包含在第一个块中生成（但未显示）的两个图像中的第二个：

```
```{r generate_figures, fig.show = "hide"}
library(knitr)
plot(1:10, col = "green")
plot(1:10, col = "red")
```

```{r}
include_graphics(sprintf("%sgenerate_figures-2.png", opts_current$get("fig.path")))
``` 
```

图形路径的一般模式是`[fig.path]/[chunklabel]-[i].[ext]`，其中`chunklabel`是生成绘图的块的标签，`i`是绘图索引（在此块内），`ext`是文件扩展名（默认情况下`png`在 RMarkdown 文档中）。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2017-08-29T19:19:02.907

未更新的答案：`knitr 1.17`您可以简单地使用

```
![Image Title](path/to/your/image){width=250px} 
```

**根据@jsb 的评论进行**编辑****

 **请注意，这仅适用于没有空格，例如 {width=250px} 而不是 {width = 250px}

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2013-03-25T22:51:16.293

例如，您还可以使用包读取图像，并像使用包`png`中的常规绘图一样绘制它。`grid.raster``grid`

```
```{r fig.width=1, fig.height=10,echo=FALSE}
library(png)
library(grid)
img <- readPNG("path/to/your/image")
 grid.raster(img)
``` 
```

使用这种方法，您可以完全控制图像的大小。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2015-06-27T07:35:56.927

以下是一些保持文件自包含而不重新制作图像的选项：

## 将图像包装在`div`标签中

```
<div style="width:300px; height:200px">
![Image](path/to/image)
</div> 
```

## 使用样式表

### 测试.Rmd

```
---
title: test
output: html_document
css: test.css
---

## Page with an image {#myImagePage}

![Image](path/to/image) 
```

### 测试.css

```
#myImagePage img {
  width: 400px;
  height: 200px;
} 
```

如果您有多个图像，则可能需要为第二个选项使用 nth-child 伪选择器。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-03-28T17:54:04.690

如果要转换为 HTML，则可以使用 HTML 语法设置图像的大小，方法是：

```
 <img src="path/to/image" height="400px" width="300px" /> 
```

或您想要给出的任何高度和宽度。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-12-08T08:29:27.347

今天遇到了同样的问题，并`knitr 1.16`在编织到 PDF 时找到了另一个选项（这需要您安装 pandoc）：

`![Image Title](path/to/your/image){width=70%}`

此方法可能需要您进行一些反复试验才能找到适合您的尺寸。它特别方便，因为它使将两个图像并排放置一个更漂亮的过程。例如：

`![Image 1](path/to/image1){width=70%}![Image 2](path/to/image2){width=30%}`

您可以发挥创意，将其中的几个并排堆叠，并根据需要调整它们的大小。有关更多想法和示例，请参阅[https://rpubs.com/RatherBit/90926](https://rpubs.com/RatherBit/90926)。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-04-20T21:28:42.710

另一个对我有用的选项是使用这样的 dpi 选项`knitr::include_graphics()`：

```
```{r}
knitr::include_graphics("path/to/image.png", dpi = 100)
``` 
```

...与在块中定义尺寸相比，这肯定（除非你做数学）是反复试验，但也许它会对某人有所帮助。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-10-16T03:46:34.700

knitr::include_graphics 解决方案在调整图形大小方面效果很好，但我无法弄清楚如何使用它来生成并排调整大小的图形。我发现[这篇文章](https://stackoverflow.com/a/38660665/7020747)对这样做很有用。**

# c# - 哪些技术可以检测进程的提升

> ID：15625996
> 
> 赞同：0
> 
> 时间：2013-03-25T22:24:45.700
> 
> 标签：c#, windows, powershell

我知道如何检测我自己的进程是否在 dotnet 和 Power Shell 中以编程方式提升。但是，如何以编程方式检测系统中其他进程的提升？

例如，如果您启动 2 个 calc 副本，1 个提升，一个不提升。在 Windows 8 中，在任务管理器 UI 中。我可以查看详细信息，并添加一个提升的列，看看哪个是提升的，哪个不是。但是，我希望能够为任何过程找到这一点，并且我想通过代码或脚本来做到这一点。