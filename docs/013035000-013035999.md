# StackOverflow 问答 13035000-13035999

# nunit - 来自 OpenCover 的 WaitHandles 异常

> ID：13035003
> 
> 赞同：0
> 
> 时间：2012-10-23T16:22:31.163
> 
> 标签：nunit, opencover

我正在使用 OpenCover 报告我的 NUnit 测试的代码覆盖率，当我运行一组需要很长时间的测试时，我得到以下异常：

```
An exception occured: The number of WaitHandles must be less than or equal to 64.
stack:    at System.Threading.WaitHandle.WaitAny(WaitHandle[] waitHandles, Int32 millisecondsTimeout, Boolean exitContext)
   at OpenCover.Framework.Manager.ProfilerManager.ProcessMessages(List`1 handles, GCHandle pinnedComms)
   at OpenCover.Framework.Manager.ProfilerManager.RunProcess(Action`1 process, Boolean isService)
   at OpenCover.Console.Program.Main(String[] args) 
```

这只发生在我在测试中用真正的 DAL 替换我的模拟 DAL 时。基本上我正在针对相同的接口运行相同的测试集，只是使用集成实现而不是模拟实现。模拟 DAL 测试运行良好，另一个使用 XML 文件的 DAL 实现运行良好（只是预期较慢）。三者中最慢的一个，实际的 SQL 实现（由于每次测试之间的拆卸/设置而缓慢），会导致此错误。

网上不乏关于自定义代码的线程和 WaitHandles 的信息，但这发生在第 3 方工具内部。我可以用 OpenCover 做些什么来解决这个问题吗？一些命令行参数明确指示线程允许这些长时间运行的测试？也许它需要传递给 NUnit 的参数？

# c - 将 Bash 脚本转换为 C。这可能吗？

> ID：13035005
> 
> 赞同：6
> 
> 时间：2012-10-23T16:22:41.297
> 
> 标签：c, bash, converters

我找到了[以下](https://web.archive.org/web/20110910030224/http://www.basic-converter.org/stable/bacon.bash)Bash -> C 转换器。

这种方式可以从bash转换为c吗？

原因：C 比 BASH 快吗？我想将某些东西作为守护进程而不是 cron 作业来运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:15:12.207

有可能，问题是这样做的目的是什么。它们可能是以下的子集：

1.  **速度**解释的脚本可能会更慢
2.  **可维护性**也许你有更多的 C 经验
3.  **脚本的灵活性**显示出通过合理努力可以实现的限制
4.  **集成**也许您已经有一个愿意与脚本紧密集成的代码库
5.  **可移植性**

还有其他原因，比如可扩展性、效率等等。

基于“转换”的目标，有很多方法可以实现 C 等效，改变“本机”的代码量。作为一个例子，我们可以考虑两个极端。

在一个极端情况下，我们有一个编译后的 C 代码，其执行方式主要与 bash 一样，因此原始脚本的每一行都会生成与 fork/exec/wait 系统调用等效的代码，其中更改主要执行与通配符扩展等效的代码，从环境变量中检索值，处理分叉进程的同步，以及使用适当的系统调用处理管道。

请注意，这种“简单”的转换已经是大量的工作，这可能比编写另一个 shell 解释器更糟糕。此外，它不能满足上述许多目标，因为在可移植性方面，它仍然可能依赖于操作系统的系统调用，而在性能方面，唯一的好处是最初解析命令行。

在另一个极端，我们以更 C 的方式进行了完全重写。这将用 C 条件句替换所有条件句`ls`，`cd`并将`rm`命令替换为它们各自的系统调用，并可能用适当的库替换字符串处理。

这可能会更好地实现某些目标，但成本可能会比其他方式更大，同时也消除了大量代码重用，因为您必须实现与简单命令等效的功能。

至于自动化的工具，我不知道，如果有的话，它们可能没有广泛使用，因为将 Bash 转换为 C 或将 C 转换为 Bash 可能不是一个好主意。如果出现这种需求，可能是设计问题的征兆，因此重新设计可能是更好的解决方案。编程语言和脚本语言是用于不同工作的不同工具，即使它们可以完成的工作之间存在交叉领域。一般来说，

```
Don't script in C, and don't code in Bash 
```

最好知道如何以及何时使用您拥有的工具，然后找到通用的通用工具（也就是没有银弹之类的东西）。

我希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:46:40.867

我确信有人制造了一种工具，只是因为他们可以，但我还没有见过。如果您需要从 C 代码运行 bash 脚本，可以通过（例如）系统调用直接执行它：

```
system("if [ -f /var/log/mail ]; then echo \"you've got mail! (file)\"; fi"); 
```

除此之外，我不知道“自动”这样做的简单方法。作为人类，我们可以查看上述内容并将其等同于：

```
if( access( "/var/log/mail", F_OK ) != -1 )
    printf("you've got mail! (file)"); 
```

作为可以实现的十几种方法之一。所以手工做这件事很容易，显然这需要付出更多的努力，这可以被认为是一个 bash->C 编译器来自动完成。

那么有可能吗？当然！
例子？抱歉，没有。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-30T19:40:00.770

当我需要时，我会使用一个程序来混淆代码。对于我使用过的一些程序，它确实提高了速度，在其他程序上它减慢了脚本的速度，但这不是我使用它的原因。对我来说主要的效用是二进制文件不能被临时用户更改或读取。

文章：这里 [http://www.linux-magazine.com/Online/Features/SHC-Shell-Compiler](http://www.linux-magazine.com/Online/Features/SHC-Shell-Compiler)

开发者网站：[http ://www.datsi.fi.upm.es/~frosal/sources/](http://www.datsi.fi.upm.es/~frosal/sources/)

正如其中一个页面所提到的，它介于小工具和实际工具之间。

# sql - 从字符串转换日期时间时另一个转换失败

> ID：13035007
> 
> 赞同：2
> 
> 时间：2012-10-23T16:22:52.143
> 
> 标签：sql, sql-server

```
SELECT Asset.AssetID, AnsMaint.Answer, Convert(datetime, AnsMaint.Answer) as maintasdate
FROM Asset INNER JOIN 
AssetAnswer AnsMaint ON AnsMaint.AssetID = Asset.AssetID INNER JOIN  
AssetField FldMaint ON FldMaint.AssetFieldID = AnsMaint.AssetFieldID 
WHERE FldMaint.FieldText = 'Maint. Agreement Term' 
AND ISDATE(AnsMaint.Answer) = 1 
AND Convert(datetime, AnsMaint.Answer) < DateAdd(d, 145, GetDate()) 
```

我在 AND 的最后一部分得到错误。如果我将 AND 注释掉，它可以正常工作。我在数据库中的日期恰好是 10/10/2012 并且有效。IsDate 应该清除任何无效的内容。

在数据库中的结果（当我注释掉最后一行时）。我完全被难住了。

```
106 10/10/2012  2012-10-10 00:00:00.000
115 10/10/2012  2012-10-10 00:00:00.000 
```

更多有趣的花絮。如果我将最后的 AND 行更改为

```
AND DateAdd(d, cast(Asset.MaintenanceFreq as int), Convert(datetime, AnsMaint.Answer)) < DateAdd(d, 45, GetDate()) 
```

有用。如果我取出第二个参数（转换为 int）并将其替换为数字或零，它会给我同样的错误。

我难住了。任何帮助将不胜感激！

哦，AssetMaint.Answer 是数据库中的一个 varchar 字段，对此我无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:35:32.537

从描述中，听起来 Answer 列包含一些无法转换为日期的记录的值，并且 SQL 正在选择一个执行计划，该计划在 ISDATE 之前评估 CONVERT。

尝试使用 CASE 语句进行转换：

```
WHERE FldMaint.FieldText = 'Maint. Agreement Term' 
AND CASE ISDATE(AnsMaint.Answer) 
   WHEN 1 THEN Convert(datetime, AnsMaint.Answer, 103) 
END < DateAdd(d, 145, GetDate()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:32:38.497

这是一个猜测，但我会说它是 mm/dd/yyyy 与 dd/mm/yyyy。例如 10/10 是可以的，但 20/10 或 10/20 可能不是。

将样式参数添加到转换中，例如

```
Convert(datetime, AnsMaint.Answer,103) 
```

您必须根据输入错误字段中的日期格式来查找哪一个。

# xml - 使用 XSLT 转换 SVG（Sierpinski 地毯）

> ID：13035011
> 
> 赞同：2
> 
> 时间：2012-10-23T16:23:10.973
> 
> 标签：xml, xslt, svg

我目前无法使用 XSLT 将 SVG 图像成功转换为另一个图像。不知何故，应用于图像的 XSLT 文档无法识别它应该应用模板的矩形节点，至少我是这么认为的。

输入 XML/SVG 很简单：

```
<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg">
  <rect x="0" y="0" width="720" height="720" fill="white"/>
</svg> 
```

XSLT 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml"
 encoding="UTF-8"
 indent="yes"
 doctype-system="-//W3C//DTD SVG 20000303 Stylable//EN"
 doctype-public="http://www.w3.org/TR/2000/03/WD-SVG-20000303/DTD/svg-20000303-stylable.dtd"
 standalone="yes" />

<xsl:template match="/">
  <xsl:apply-templates select="svg/rect"/>
</xsl:template>

<xsl:template match="rect">
  <xsl:variable name="new-width" select="@width div 3"/>
  <xsl:variable name="new-height" select="@height div 3"/>

  <xsl:variable name="col1" select="@x"/>
  <xsl:variable name="col2" select="@x + $new-width"/>
  <xsl:variable name="col3" select="@x + (2 * $new-width)"/>

  <xsl:variable name="row1" select="@y"/>
  <xsl:variable name="row2" select="@y + $new-height"/>
  <xsl:variable name="row3" select="@y + (2 * $new-height)"/>

  <rect x="$col1" y="$row1" width="$new-width" height="$new-height" fill="white"/>
  <rect x="$col2" y="$row1" width="$new-width" height="$new-height" fill="white"/>
  <rect x="$col3" y="$row1" width="$new-width" height="$new-height" fill="white"/>

  <rect x="$col1" y="$row2" width="$new-width" height="$new-height" fill="white"/>
  <rect x="$col2" y="$row2" width="$new-width" height="$new-height" fill="black"/>
  <rect x="$col3" y="$row2" width="$new-width" height="$new-height" fill="white"/>

  <rect x="$col1" y="$row3" width="$new-width" height="$new-height" fill="white"/>
  <rect x="$col2" y="$row3" width="$new-width" height="$new-height" fill="white"/>
  <rect x="$col3" y="$row3" width="$new-width" height="$new-height" fill="white"/>
</xsl:template>

</xsl:stylesheet> 
```

我已经消除了所有我能想到的错误来源：

*   内联数学（-> 变量）
*   应用模板中的错误节点选择
*   错误的输出方式

我什至尝试使用 for-each 循环在没有应用模板的情况下应用此模板，但也没有成功。现在我不知道我还能尝试什么，因此问你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:01:29.157

XML 文件将内容放在名称空间中，而您的 XSLT 没有声明该名称空间。

1.  添加`xmlns:svg="http://www.w3.org/2000/svg"`到您的样式表。
2.  改变`<xsl:apply-templates select="svg:svg/svg:rect"/>`
3.  改变`<xsl:template match="svg:rect">`

# asp.net - 在运行时备用 DataNavigateUrlFormatString 用于两个运营商之间的跟踪号码

> ID：13035014
> 
> 赞同：0
> 
> 时间：2012-10-23T16:23:16.637
> 
> 标签：asp.net, vb.net

我一直在创建一个显示日期、承运人、客户和跟踪号的订单状态 ASPX 页面。此页面上的数据由搜索表单生成，用户可以通过日期或客户姓名进行搜索。在我们的 SQL 数据库中，对于 Tracking Number，它仅包含数字编号，例如“759102160484401”（随机 FedEx Tracking Number）。每当进行搜索时，我都想将它们分别链接到每个航运公司的正确跟踪文件。当前输出如下：

2012 年 10 月 8 日 --- 联邦快递 --- JAMES FRANCO --- 759102160484401

现在的问题。我们将当前的 DataNavigateUrlFormatString 设置为 FedEx url。当它检测到运营商的 SQL 字段显示“UPS”时，我们希望它可以替代 UPS 链接。我将如何做到这一点？下面是 Tracking.aspx 文件的 Tracking number 列的当前行。

```
<asp:HyperLinkField DataTextField="TRACKNUM" DataNavigateUrlFields="TRACKNUM" HeaderText="Tracking#" Target="_blank" Text="Tracking#"
                    DataNavigateUrlFormatString="http://www.fedex.com/Tracking?clienttype=dotcom&ascend_header=1&cntry_code=us&language=english&mi=n&tracknumbers={0}"
                    HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" /> 
```

希望这是详细的，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:09:16.133

以大纲形式，

在 OnRowDataBound 上注册一个事件（其他数据绑定控件的概念相同） [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowdatabound.aspx)

从行中提取 HyperLinkField。通常在事件的 .Row 属性上使用 FindControl，或者有时在 .Row[x] 上使用，其中 x 是保存控件的单元格的索引。

将 DataNavigateUrlFormatString 设置为一个字符串或另一个字符串，具体取决于您是否需要 fedex 或 ups url。

# php - 使用 PHP 创建的 RSS 提要未更新

> ID：13035022
> 
> 赞同：0
> 
> 时间：2012-10-23T16:23:40.673
> 
> 标签：php, xml, rss

我使用 PHP 创建了一个 RSS 提要。基本上使用标题：

```
header("Content-Type: application/rss+xml; charset=ISO-8859-1"); 
```

然后创建 xml 字符串并输出它。

现在的问题是，即使我对输出 RSS 提要的 PHP 脚本进行了更改，这些更改也需要很长时间才能传播并在 RSS 阅读器中看到。

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:40:19.773

您可以尝试使用 HTTP 缓存指令。

我建议使用它进行测试：

```
Cache-Control: no-cache 
```

这用于生产：

```
Cache-Control: max-age=1800 
```

它将使内容每 30 分钟过期一次（1800 = 30*60）。

*提示：不要将 XML 创建为字符串。使用[DomDocument](http://php.net/manual/en/class.domdocument.php) API 创建 XML，它总是正确的。没有奇怪的编码和类似的东西。*

# java - 我什么时候会得到一个关于泛型的 arraystoreexception 和一个 classcastexception？

> ID：13035023
> 
> 赞同：0
> 
> 时间：2012-10-23T16:23:46.480
> 
> 标签：java

我的理解是，当您尝试插入不兼容类型的对象时，您会收到[ArrayStoreException 。](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayStoreException.html)

```
Object[] array = new String[1];
array[0] = 1; 
```

有人可以举例说明我什么时候会得到[ArrayStoreException](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayStoreException.html)，什么时候会得到[ClassCastException](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:37:38.320

A`ClassCastException`正在转换为错误的子类，请参阅 Java 1.6 API 以获取所有异常和类信息。

这是取自 API 的示例：

```
 Object x = new Integer(0);
 System.out.println((String)x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:27:01.903

如果您执行以下操作，则会发生 ClassCastException：

```
public void stupidMethod(Object o)
{
    //Classcast if o is not a String
    String s = (String)o;

    //do more stupid things
} 
```

arraystoreexception 类似：

```
public void stupidMethod()
{
    Object[] array = new String[2];
    //whoops arraystoreexception
    array[0] = new Integer();
} 
```

您应该在以后阅读这些异常的 API，而不是在此处发布。

只需谷歌`java api (class name)`，您将获得比我愿意输入的更多信息。

# c# - 如何在 C#（或 VB.NET）中编写 WinMerge 插件

> ID：13035027
> 
> 赞同：5
> 
> 时间：2012-10-23T16:23:49.183
> 
> 标签：c#, vb.net, plugins, winmerge

我想编写一个 WinMerge 插件来将 SQLite 数据库转换为文本，这样我就可以使用 WinMerge 来比较数据库。

我已经用 C# 编写了代码来进行转换，但我似乎无法让它显示为 WinMerge 插件。但我对编写 COM 可见的 .NET 对象不是很熟悉。

我想我一定没有放入正确的 COM 属性（我只是将 ComVisible(true) 放在类上）。但是，我认为 VB.Net 应该为您完成所有这些工作，因此我使用 Project/Add New/COM 类重写了 VB.Net 中的类。但是，它仍然没有作为加载插件出现在 WinMerge 中。

无奈之下，我尝试使用 DLL Export Viewer 查看 VB DLL，但没有显示任何导出的函数。我显然做错了什么。

这是完整的代码：

```
<ComClass(WinMergeScript.ClassId, WinMergeScript.InterfaceId, WinMergeScript.EventsId)> _
Public Class WinMergeScript

#Region "COM GUIDs"
    ' These  GUIDs provide the COM identity for this class 
    ' and its COM interfaces. If you change them, existing 
    ' clients will no longer be able to access the class.
    Public Const ClassId As String = "9b9bbe1c-7b20-4826-b12e-9062fc4549a0"
    Public Const InterfaceId As String = "b0f2aa59-b9d0-454a-8148-9715c83dbb71"
    Public Const EventsId As String = "8f4f9c82-6ba3-4c22-8814-995ca1050de6"
#End Region

    Dim _connection As SQLite.SQLiteConnection
    Dim _output As IO.TextWriter
    Dim _error As Long
    Dim _errordesc As String

    ' A creatable COM class must have a Public Sub New() 
    ' with no parameters, otherwise, the class will not be 
    ' registered in the COM registry and cannot be created 
    ' via CreateObject.
    Public Sub New()
        MyBase.New()
    End Sub

    Public ReadOnly Property PluginEvent() As String
        Get
            PluginEvent = "FILE_PACK_UNPACK"
        End Get
    End Property

    Public ReadOnly Property PluginDescription() As String
        Get
            PluginDescription = "Display Sqlite Databases in tab-delimited format"
        End Get
    End Property

    Public ReadOnly Property PluginFileFilters() As String
        Get
            PluginFileFilters = "\.db$"
        End Get
    End Property

    Public ReadOnly Property LastErrorNumber() As Long
        Get
            LastErrorNumber = _error
        End Get
    End Property

    Public ReadOnly Property LastErrorString() As String
        Get
            LastErrorString = _errordesc
        End Get
    End Property

    Public Function UnpackFile(ByVal fileSrc As String, ByVal fileDst As String, ByRef bChanged As Boolean, ByRef subcode As Long) As Boolean
        On Error GoTo CleanUp
        subcode = 1
        _error = 0
        _errordesc = ""
        Using connection As New SQLite.SQLiteConnection("Data Source=" + fileSrc + ";Version=3;DateTimeFormat=ISO8601;")
            _connection = connection
            Using output As New IO.StreamWriter(fileDst)
                _output = output
                For Each table As DataRow In Query("Select name from sqlite_master where type = 'table' order by name")
                    Dump(table(0).ToString())
                Next
            End Using
        End Using
        bChanged = True
        UnpackFile = True
        Exit Function
CleanUp:
        _error = Err().Number
        _errordesc = Err().Description
        bChanged = False
        UnpackFile = False
    End Function

    Sub Dump(ByVal tablename As String)
        Dim reader As IDataReader
        Using cmd As New SQLite.SQLiteCommand(_connection)
            cmd.CommandText = "Select * from """ + tablename + """"
            cmd.CommandType = CommandType.Text
            reader = cmd.ExecuteReader()
            Using reader
                _output.WriteLine("==== " + tablename + " ====")
                Dim data(reader.FieldCount) As String
                For i As Integer = 0 To reader.FieldCount - 1
                    data(i) = reader.GetName(i)
                Next
                Dump(data)
                While reader.Read()
                    For i As Integer = 0 To reader.FieldCount - 1
                        data(i) = reader.GetValue(i).ToString()
                    Next
                    Dump(data)
                End While
            End Using
        End Using
    End Sub

    Sub Dump(ByVal data() As String)
        _output.WriteLine(String.Join(vbTab, data))
    End Sub

    Function Query(ByVal sql As String) As DataRowCollection
        Dim cmd As SQLite.SQLiteCommand
        cmd = _connection.CreateCommand()
        Using cmd
            cmd.CommandText = sql
            Using da As New SQLite.SQLiteDataAdapter(cmd)
                Dim dt As New DataTable()
                da.Fill(dt)
                Query = dt.Rows
            End Using
        End Using
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:25:33.550

我刚刚查看了 WinMerge 2.14.0 的实际代码，我认为它只适用于真正的 COM DLL（和 OCX），主要是因为它不需要注册 COM 对象即可工作。需要将其扩展为至少引用 .TLB 或进行调整以允许不指定路径，但允许指定比“WinMergeScript”更明确的 ID。

* * *

在我明确提到的工作 VB.NET COM 对象`<ComVisible(True)> _`中，项目在编译属性中检查了“注册 COM”。

我刚刚`HelloWorld`使用您的代码创建了一个函数，将其编译`vbc /t:library`并使用`regasm /codebase`. 这是使用这个简单的 vbscript 成功调用的（使用`wscript`）：

```
Option Explicit
Dim so
Set so = CreateObject("SO13035027.WinMergeScript")
MsgBox so.HelloWorld 
```

以及整个代码（我没有重新配置我的系统以供以后使用，`vbc`因此实际上已编译为 .NET 1.1）：

```
Option Explicit On
Option Strict On
'Option Infer On

Imports Microsoft.VisualBasic

Namespace SO13035027
<ComClass(WinMergeScript.ClassId, WinMergeScript.InterfaceId, WinMergeScript.EventsId)> _
Public Class WinMergeScript

#Region "COM GUIDs"
' These  GUIDs provide the COM identity for this class 
' and its COM interfaces. If you change them, existing 
' clients will no longer be able to access the class.
Public Const ClassId As String =     "9b9bbe1c-7b20-4826-b12e-9062fc4549a2"
Public Const InterfaceId As String = "b0f2aa59-b9d0-454a-8148-9715c83dbb72"
Public Const EventsId As String =    "8f4f9c82-6ba3-4c22-8814-995ca1050de2"
#End Region

' A creatable COM class must have a Public Sub New() 
' with no parameters, otherwise, the class will not be 
' registered in the COM registry and cannot be created 
' via CreateObject.
Public Sub New()
    MyBase.New()
End Sub

Public Function HelloWorld() As String
 Return "Hello, world!"
End Function

End Class
End Namespace 
```

# plone - 为什么 CheckBoxFieldWidget 没有工厂？

> ID：13035029
> 
> 赞同：1
> 
> 时间：2012-10-23T16:23:58.597
> 
> 标签：plone, dexterity

将小部件分配给敏捷中的字段的常用方法是这样的

```
form.widget(hours=DataGridFieldFactory)
hours = schema.List(title=u'Hours',?
                    default=hoursDefault,
                    value_type=DictRow(title=u'Hours', schema=IHours) 
```

Dexterity 文档在这里提到了 CheckBoxFieldWidget：

[http://plone.org/products/dexterity/documentation/manual/developer-manual/reference/widgets-1](http://plone.org/products/dexterity/documentation/manual/developer-manual/reference/widgets-1)

但是有 CheckBoxFieldWidgetFactory 可以以相同的方式用于

```
form.widget(forProducts=checkbox.CheckBoxFieldWidget)
forProducts = schema.List(title=u'Products',
                          value_type=schema.Choice(source=productsVocabulary)) 
```

在这里使用 CheckBoxFieldWidget 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:01:11.453

CheckBoxFieldWidget*是*CheckBoxWidget的工厂。您在使用上面提供的代码时遇到问题了吗？

# regex - 正则表达式可以用于裁剪吗？

> ID：13035047
> 
> 赞同：4
> 
> 时间：2012-10-23T16:24:58.210
> 
> 标签：regex, regex-negation

假设我有这三行：

```
the quick brown fox
the brown fox
the quick brown quick fox 
```

正则表达式可以用于裁剪除单词之外的每一行中的所有内容`quick`吗？

最终结果将如下所示：

```
quick

quickquick 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:33:59.600

具体细节取决于您使用的语言，但这里有一些使用正则表达式执行此操作的常用方法（Python 中的代码示例）：

*   查找目标字符串的所有匹配项，然后将每个匹配项组合成一个字符串：

    ```
    >>> import re
    >>> s = 'the quick brown quick fox'
    >>> ''.join(re.findall('quick', s))
    'quickquick' 
    ```

*   构造一个正则表达式来匹配**除**目标字符串之外的所有内容，然后将每个匹配项替换为一个空字符串（*这通常比列出的其他替代方案要困难得多）*：

    ```
    >>> re.sub('(?!quick|(?<=q)uick|(?<=qu)ick|(?<=qui)ck|(?<=quic)k).', '', s)
    'quickquick' 
    ```

*   使用捕获组匹配所有内容，直到出现目标字符串，然后仅替换为目标字符串：

    ```
    >>> re.sub('.*?(quick|$)', r'\1', s)
    'quickquick' 
    ```

如果您的字符串如示例中那样有多行，则可以先在换行符处拆分字符串，或者调整解决方案以保留换行符，例如：

```
>>> s = '''the quick brown fox
... the brown fox
... the quick brown quick fox'''
>>> print ''.join(re.findall('quick|[\r\n]', s))
quick

quickquick
>>> print re.sub('.*?(quick|$)', r'\1', s, flags=re.MULTILINE)
quick

quickquick 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:27:03.230

单独的正则表达式不用于操作字符串。它只进行模式匹配。根据您用于实现它的工具，您通常可以使用正则表达式匹配进行字符串替换。例如，在 Bash 终端中，您可以使用 Sed，或者在 PHP 中，您可以使用 preg_replace()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:40:20.553

是的，正则表达式能够通过实现`lookahead`和`lookbehind`[构造](http://www.regular-expressions.info/lookaround.html)进行搜索。

例如，这是一个使用正向前瞻表达式的 Python 程序，它可以满足您的需要：

```
import re

s = '''the quick brown fox
the brown fox
the quick brown quick fox'''

rx = re.compile('(?!quick).*')
print rx.findall(s) 
```

输出：

```
['the quick brown fox', '', 'the brown fox', '', 'the quick brown quick fox', ''] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:23:13.547

为此使用**sed ：**

```
sed -r 's/(quick|)./\1/g' file.txt 
```

# actionscript-3 - 找不到类 fl.controls::CheckBox

> ID：13035052
> 
> 赞同：1
> 
> 时间：2012-10-23T16:25:13.807
> 
> 标签：actionscript-3, flash, flex4

我正在加载包含舞台上复选框的外部 swf。但是当我尝试加载该 swf 时，我收到错误“找不到 Class fl.controls::CheckBox”。

我在 flash builder 4 中使用纯 as3 和 flash pro cs4 制作的外部 swf 构建应用程序

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:23:27.150

`fl.controls`命名空间是 Flash Pro 的一部分。

要与 Flash Builder 集成，您可以通过 SWC 或通过代码添加包：

将 Flash 组件添加到 Flash Builder：

**通过 SWC 添加：**

*   在 Flash Builder 中右键单击您的项目，然后转到“属性”。
*   从左侧选择“ActionScript 构建路径”。
*   转到右侧现在可用的“库路径”选项卡。
*   单击“添加 SWC...”
*   从 Flash 添加库，例如 flash.swc 或 IK，具体取决于您拥有的 Flash IDE 版本和安装位置。

*Windows：*
C:\Program Files (x86)\Adobe\Adobe Flash CS5.5\Common\Configuration\ActionScript 3.0\libs\flash.swc

*Mac OS X：*
/Applications/Adobe Flash CS5/Common/Configuration/ActionScript 3.0/libs/flash.swc

**按源文件夹添加：**

*   在 Flash Builder 中右键单击您的项目，然后转到“属性”。
*   从左侧选择“ActionScript 构建路径”。
*   转到右侧现在可用的“源路径”选项卡。
*   单击“添加文件夹...” Flash 组件应位于类似于以下路径的位置，具体取决于您拥有的 Flash IDE 版本和安装位置。

*Windows：*
C:\Program Files (x86)\Adobe\Adobe Flash CS5.5\Common\Configuration\Component Source\ActionScript 3.0\User Interface

*Mac OS X：*
/Applications/Adobe Flash CS5.5/Common/Configuration/Component Source/ActionScript 3.0/User Interface

# c - 在哪里可以找到在什么标准（ISO C、SUS、POSIX）以及它的哪个版本中定义了特定的 C 标头或函数？

> ID：13035053
> 
> 赞同：0
> 
> 时间：2012-10-23T16:25:24.780
> 
> 标签：c, linux, unix, posix, standards

有时我需要编写一个低级多平台 C/C++ 代码，以便预处理器环境宏派上用场。但是，是否有某种方法或单个互联网资源或一个地方，我可以很容易地找到一个标准，其中首先引入了特定的 Unix API 以在我的代码中使用特定的宏定义，从而允许使用该 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:31:33.253

男人是你的朋友。我的 linux 发行版将所有 POSIX 定义作为手册页。例如

```
man 3p printf 
```

给了我 POSIX 定义，而

```
man 3 printf 
```

给了我linux特定的版本。

要搜索所有 POSIX 内容，我的策略是输入

> opengroup 函数名

在我喜欢的搜索引擎中。

对于 ISO C，您可以轻松地在网上找到标准（这些标准通常是草稿）。当前的 C 标准 C11 是 n1570.pdf，您应该通过它找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:30:37.387

您可以尝试手册页。

例如，[`man 3 printf`](http://linux.die.net/man/3/printf)说：

> 符合
> 
> fprintf()、printf()、sprintf()、vprintf()、vfprintf() 和 vsprintf() 函数符合 C89 和 C99。snprintf() 和 vsnprintf() 函数符合 C99。

并且[`man 2 open`](http://linux.die.net/man/2/open)：

> 符合
> 
> SVr4、4.3BSD、POSIX.1-2001。

# android - 在 android 应用程序中打包文件（但不在 res 或 assets 中）

> ID：13035056
> 
> 赞同：0
> 
> 时间：2012-10-23T16:25:27.997
> 
> 标签：android, ssl, https, io, bouncycastle

好的，所以我被扔进了战壕，想以最干净最体面的方式离开。

目前，我有 2 个 Android 项目，并且需要将文件打包到一个项目中并让它被另一个项目成功读取。这可能会令人困惑，所以让我解释一下。

我有 2 个 Android 项目。一个名为 Engine 的 android 库项目和应用程序本身。

引擎处理网络通信和许多其他后台任务，这些任务无头操作且不与 UI 交互。引擎可以访问主应用程序的上下文，但没有其他权限。在我开发这个引擎的过程中，我遇到了一些有趣的事情。Https（不要逃跑）以及它在android应用程序中出现的问题。有很多关于 android 应用程序如何非常不安全并且极易受到 MITM 攻击的博客文章。这是我在这个引擎中不能忽视的一个问题，因为它是一个非常现实的威胁。

*有关此内容的更多信息，我强烈推荐 Nikolay Elenkov 的[博客](http://nelenkov.blogspot.ie/2011/12/using-custom-certificate-trust-store-on.html)，因为他解释了在 Android 上进行安全保护的好方法！*

我离题了，因为这个问题已经解决了。我的解决方案是使用存储在 .bks 文件中的自定义密钥库。同样，您无需担心它是如何创建的或将如何创建的。真正的麻烦是，当它被打包在一个 JAR 中时，我如何读取这个文件。

对于最终版本，引擎将被打包为 jar 并包含在应用程序中。将引擎打包到 jar 中的警告是 res 文件夹中的任何内容都不会被编译并且无法读取。根据定义，无论项目是 jar 还是库项目，库项目中的任何资产都将无法访问。

回顾一下，我们有 2 个项目。一个 Packaged Jar Android 库，其中包含我们的 BKS 文件和一个需要读取它的应用程序。

如果 BKS 文件位于 assets/ 或 res/ 文件夹中，则无法恢复该文件。

有没有人知道如何访问这个文件？

潜在的解决方案：

*   将文件存储在lib目录中并读取它？

*   将 BKS 存储在远程服务器上并在启动期间加载它？

*   找到另一种处理 ssl 证书的方法（不，我不会只接受任何和所有证书！）

*   有一种超级秘密的方法可以读取另一个文件夹中的android库项目中的文件，这就是你的做法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:32:49.217

> 回顾一下，我们有 2 个应用程序

不，你没有。

> 一个 Packaged Jar Android 库，其中包含我们的 BKS 文件和一个需要读取它的应用程序。

这是一个应用程序，而不是两个。根据您的描述，您有两个*项目*，但一个*应用程序。*

> 有没有人知道如何访问这个文件？

将文件放入应用程序的项目中，这`assets/`取决于`res/raw/`您。如果从源代码控制的角度来看，您希望文件驻留在库项目的 repo 中，请在应用程序项目中使用符号链接或硬链接，或使用提交挂钩，或在应用程序项目的位置制作副本。

或者，自己将文件打包到库 JAR 中，[并](https://stackoverflow.com/a/7180704/115145)[使用`getResourceAtStream()`](https://stackoverflow.com/a/7180704/115145). 我没有尝试过，但大概它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:53:04.667

我能想到的一种方法是使用内容提供者。在您拥有 BKS 文件的引擎中实现内容提供程序。不要为实现 insert()、delete() 等而烦恼。只需让这些函数的主体为空。使用托管游标实现您的查询功能，并使用 BKS 文件的内容填充游标。从您的应用程序查询此内容提供程序。

我做了类似的事情来交换两个应用程序之间的偏好。

```
SharedPreferences prefs = null;
   String[] columns = new String[] { "mycolumn"};
   Context otherAppsContext = null;
   try {
       otherAppsContext = mContext.createPackageContext("com.blah.blah", Context.CONTEXT_IGNORE_SECURITY);
   } catch (NameNotFoundException e) {
   }
   prefs = otherAppsContext.getSharedPreferences("com.blah.blah_preferences_public",Context.MODE_WORLD_READABLE|Context.MODE_MULTI_PROCESS);
   isConfigured = prefs.getBoolean("mycolumn", false);
   Object[]values = new Object[] {isConfigured==true?1:0};
   Log.d(TAG,"isConfigured " + isConfigured);
   MatrixCursor c = new MatrixCursor(columns);
   c.addRow(values);
   return c; 
```

# variables - 在以下 Coldfusion 代码段中，我的变量 x 何时可以未定义？

> ID：13035057
> 
> 赞同：0
> 
> 时间：2012-10-23T16:25:30.530
> 
> 标签：variables, coldfusion, undefined

奇怪的问题...我的应用程序 ( `coldfusion8/MySQL 5.0.88`) 运行良好，除非用户尝试使用 IE6 访问它。这会引发以下错误：

```
 Element PL_SELLERS is undefined in VARIABLES 
```

我无法重现，因为我可以测试的所有浏览器（包括 IE8）都不会抛出此错误。

我知道问题出在以下代码段中：

```
<cfif Session.reload_user EQ "true" OR ( Len(Session.pricelists) EQ 0 OR Len(Session.pl_sellers) EQ 0)>
    <cfquery datasource="#Session.datasource#" name="q_preislisten">
        ... query ...
    </cfquery>
    <cfif q_preislisten.recordcount NEQ 0>
        <cfset variables.pl_sellers = "">
        <cfloop query="q_preislisten">
            <cfset variables.pl_sellers = variables.pl_sellers & q_preislisten.iln_verkaeufer & ',';>
        </cfloop>
    </cfif>
    <cfif len(variables.pl_sellers) NEQ 0 )>
        <cfset variables.pl_sellers = Left(variables.pl_sellers, len(variables.pl_sellers)-1)>
        <cfset Session.pl_sellers = variables.pl_sellers>
        <cfset Session.reload_user = "false">
    </cfif>
<cfelse>
    <cfset variables.pl_sellers = Session.pl_sellers>
</cfif> 
```

**所以我的问题是：**
在什么情况下可以`variables.pl_sellers`不确定？

我会将初始声明移到`<cfset variables.pl_sellers = "">`整个 if 语句之外，因此它始终至少是一个空字符串。我能想到的另一个原因是检查`len(variables.pl_sellers)`不在 recordcount-if 语句之外。还有其他我想念的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:39:26.840

如果您的`preislisten.recordcount is 0`, 那么当它检查下一个 IF 块时，它将是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:52:38.873

一定爱IE6！不是您问题的真正答案，但我会添加`IsDefined()`检查，以便您至少可以优雅地处理错误。

```
<cfif Session.reload_user EQ "true" OR ( Len(Session.pricelists) EQ 0 OR Len(Session.pl_sellers) EQ 0)>
    <cfquery datasource="#Session.datasource#" name="q_preislisten">
        ... query ...
    </cfquery>
    <cfif q_preislisten.recordcount NEQ 0>
        <cfset variables.pl_sellers = "">
        <cfloop query="q_preislisten">
            <cfset variables.pl_sellers = variables.pl_sellers & q_preislisten.iln_verkaeufer & ',';>
        </cfloop>
    </cfif>
    <cfif IsDefined("variables.pl_sellers") AND len(variables.pl_sellers) NEQ 0 )>
        <cfset variables.pl_sellers = Left(variables.pl_sellers, len(variables.pl_sellers)-1)>
        <cfset Session.pl_sellers = variables.pl_sellers>
        <cfset Session.reload_user = "false">
    <cfelse>
        <!--- handle the error here --->
    </cfif>
<cfelse>
    <cfset variables.pl_sellers = Session.pl_sellers>
</cfif> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:50:45.570

如上所述，如果查询没有返回任何行，则不会创建 .variable。

# jquery - Jquery - 在命名空间中调用函数

> ID：13035059
> 
> 赞同：0
> 
> 时间：2012-10-23T16:25:32.017
> 
> 标签：jquery, function, namespaces

如何在命名空间中调用常规函数

```
$(document).ready(function() {
  Timeline.init();
  Timeline.highlight_arrow();
  Timeline.arrows();

});

Timeline.arrows = (function() {
    function display_arrows(pos) {
    }
}()); 
```

我想从 Timeline.arrows 内部调用 dislay_arrows 我试过 Timeline.arrows.display_arrows() 它是否需要是公共方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:30:09.573

您可能需要像这样实现它，

**[现场演示](http://jsfiddle.net/Ncphx/)**

```
$(document).ready(function() {
    function NS_TimeLine(){

        this.init = function(){
         alert("init");   
        }

        this.highlight_arrow = function(){
         alert("init");   
        }

    }                      

var TimeLine = new NS_TimeLine();
TimeLine.init();

});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:40:44.787

如果我理解了您的问题，您只需将您的函数从立即执行的函数中传回：

```
Timeline.arrows = (function() {
    return function display_arrows(pos) {
        //'arrows' implementation here'
    }
}()); 
```

工作演示：[jsBin](http://jsbin.com/iyafop/1/edit)

这样，您的 /result/`(function() { /*...*/}())`就是`display_arrows`函数，因此将`arrows`针对`Timeline`.

我假设你`Timeline`在使用它之前已经声明了一个对象。

# mysql - 如何使用 SQLAlchemy/Alembic 设置主键集的初始值以自动递增？

> ID：13035061
> 
> 赞同：0
> 
> 时间：2012-10-23T16:25:40.583
> 
> 标签：mysql, sqlalchemy, alembic

在 MySQL 中，我们可以使用`AUTO_INCREMENT = ?`来自动插入一个主键值。我们如何在 SQLAlchemy/Alembic 中做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:25:39.543

如果类型为“Integer, primary_key=True”，则在 CREATE TABLE 中发出 auto_increment。在使用 alter_column 的 Alembic 中，您需要将其指定为 alter_column。

参见 alter_column() 的“autoincrement”和“existing_autoincrement”：

[https://alembic.readthedocs.org/en/latest/ops.html#alembic.operations.Operations.alter_column](https://alembic.readthedocs.org/en/latest/ops.html#alembic.operations.Operations.alter_column)

请参阅 Column 的 autoincrement，注意这默认为 True 并且您通常不需要更改它，在：

`http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#sqlalchemy.schema.Column.__init__`

# php - openssl和php之间SHA512的区别

> ID：13035062
> 
> 赞同：2
> 
> 时间：2012-10-23T16:25:44.153
> 
> 标签：php, c, hash, sha

这是C代码：

```
#include <openssl/sha.h>
#include <stdio.h>
char *hash_sha512(char *data){
    SHA512_CTX ctx;
    char *md=malloc(sizeof(char)*(SHA512_DIGEST_LENGTH+1));

    SHA512_Init(&ctx);
    SHA512_Update(&ctx, data, strlen(data));
    SHA512_Final(md, &ctx);
    md[SHA512_DIGEST_LENGTH]='\0';

    return md;
}
int main(int argc, char *argv[]){
    str=hash_sha512("GFLOuJnR19881218");
    printf("%s\n", str);
    free(str);
    return 1;
} 
```

输出：

> �<�4����IIA[r�� Η#� 6π�8jD����J�b9�����^X�</p>

这是PHP代码：

```
$hash=hash('sha512', 'GFLOuJnR19881218', TRUE); 
```

输出：

> �<��>4��ǰ��II�-A[r�?�� �Η#��D6π�8jD���?��J�b9�����^X�</ p>

C代码和PHP代码的结果不同，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:52:05.417

输出是乱码，因为输出是一个二进制字符串，浏览器试图将其显示为 ASCII 或 UTF-8 并且不能。您需要将两者编码为十六进制、十进制、base32 或其他一些正常的人类表示，然后比较它们。

```
$binary = hash('sha512', 'GFLOuJnR19881218', TRUE);
$hex = hash('sha512', 'GFLOuJnR19881218'); 
```

> ```
> string hash ( string $algo , string $data [, bool $raw_output = false ] ) 
> ```
> 
> *当设置为 TRUE 时，输出原始二进制数据。FALSE 输出小写十六进制。*
> - [http://us2.php.net/manual/en/function.hash.php](http://us2.php.net/manual/en/function.hash.php)

# javascript - 链接导致刷新

> ID：13035064
> 
> 赞同：1
> 
> 时间：2012-10-23T16:25:44.840
> 
> 标签：javascript, html, ajax, hyperlink, refresh

我尝试使链接触发一个javascript函数，该函数触发一个ajax调用来删除一个项目。

像这样：

```
<a class="delete" href="@item.Product.Id">(x)</a> 
```

点击叉号会显示要删除的产品的id。href 属性存在的唯一原因是携带该值。

```
$(document).ready(function () {  
$('.delete').click(function (e) {
    e.preventDefault();
    var id = $(this).attr("href");
    deleteItem(id);
    return false;
});
}); 
```

Ajax 调用：根据要求：

```
function deleteItem(id) {
$.ajax({
    url: "/Shoppingcart/RemoveItem",
    type: "POST",
    data: "id=" + id,
    cache: false,
    error: function (xhr, status, error) {
        console.log(xhr, status, error);
    },
    success: function () {
        $.ajax({
            url: "/Shoppingcart/Index",
            type: "GET",
            cache: false,
            error: function (xhr, status, error) {
                console.log(xhr, status, error);
            },
            success: function (result) {
                success(result);
            }
        });
    }
}); 
```

}

成功功能用于获取购物车的更新版本。这实际上工作得很好。但是，我在循环的中途得到了一个奇怪的页面刷新。

我点击链接。

页面刷新并且该项目未被删除。

我再次点击链接。

页面未刷新。

该项目被删除。

为什么我必须单击两次，我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:29:59.950

通常，当页面很大并且`document.ready`单击链接时事件尚未触发时，您会得到这样的行为。第二次加载速度可能更快（脚本/css 已经下载并来自缓存）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:50:27.457

最正确的答案是：你不知道错误是什么，因为在你看到错误之前页面正在刷新。

Return false 可防止页面在单击事件后刷新，但如果代码在此之前遇到错误...

因此，您可以尝试删除`href`标签并将其设为 rel（或其他）标签。阅读它并将其用于您的 AJAX 调用。给`href`一个像`#`or的值`#removeItem`。这会给你带来你渴望的错误。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T14:11:35.350

正确答案是：当您在页面加载**后**（例如使用 AJAX）向 html添加一个**元素并且您希望以任何方式触发一个事件。**您必须将单击事件重新绑定到新元素。

 **当页面被加载并且你的 javascript 和 jQuery 被加载时。该元素还不是他们的，因此他们无法找到它或与之交互。

所以在我的情况下：

```
function addItem(id, amount) {
    $.ajax({
        url: "/Shoppingcart/AddItem",
        type: "POST",
        data: "id=" + id + "&amount=" + amount,
        cache: false,
        error: function (xhr, status, error) {
            console.log(xhr, status, error);
        },
        success: function () {
            // Calls for the new update version of the shopping cart.
            $.ajax({
                url: "/Shoppingcart/Index",
                type: "GET",
                cache: false,
                error: function (xhr, status, error) {
                    console.log(xhr, status, error);
                },
                success: function (result) {
//Call the function that changes the html
                        success(result);
                    }
                });
            }
        });
    }

function success(result) {
    $("#shoppingcart").html(result);
//The tricky part: rebinding the new event.
    $('.delete').click(function (e) {
        e.preventDefault();
        var id = $(this).attr("data-id");
        deleteItem(id);
        return false;
    });
} 
```

刷新后删除按钮确实起作用了，因为这样 javascript 被重新加载并且元素被正确绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:31:10.590

据我所知，有一个隐藏字段或隐藏跨度来保存“ProductId”并完全删除 href 属性，如下所示。

```
<span id="productIdSpan">@item.Product.Id</span>
<a class="delete"></a> 
```

jQuery：

```
$(document).ready(function () {   
     $('.delete').click(function (e) {     
     var id = $("#productIdSpan").html();     
     deleteItem(id);     
     return false; 
  }); 
}); 
```

**编辑：方法2：**

您可以将 ProductId 存储在锚标记的“标题”属性中，如下所示

**jQuery：**

```
$(document).ready(function () {   
     $(".delete").on("click", function (e) {     
     deleteItem($(this).attr("title"));     
     return false; 
  }); 
}); 
```

这应该可以解决您的问题。希望这可以帮助！！**

# c - printf 不在控制台上打印

> ID：13035075
> 
> 赞同：40
> 
> 时间：2012-10-23T16:26:54.837
> 
> 标签：c, eclipse, gcc, printf, scanf

我开始使用 C 语言。我使用 eclipse (juno) 作为我的 IDE 并安装了 CDT 插件。我还解压了 mingw64（GCC 编译器）。我写了一个非常简单的程序来看看它是否有效。这是我的代码：

```
#include <stdio.h>

int main()
{
    int age;
    printf("Hello, please enter your age:\n");
    scanf("%d", &age);
    printf("Your age is %d", age);
    return 0;
} 
```

问题是输出缓冲区填充了第一个字符串值，`printf`但没有将其输出到控制台。我必须输入一个数字，然后缓冲区才会将所有数据倒入控制台，所以我看到控制台是这样的：

```
1
Hello, please enter your age:
Your age is 1 
```

而不是预期的是：

```
Hello, please enter your age:
1
Your age is 1 
```

现在，我发现我可以`fflush(stdout)`在第一个之后使用，`printf`但我不认为这个解决方案是优雅的，甚至是必要的。关于如何克服这个问题的任何想法？

**编辑**- 因为我在我的大学学习这个，我不能使用课程中没有学到的任何东西，所以我**只能**使用`printf`和`scanf`

**新编辑**- 我想我已经找到了一个解释。正如我所说，我正在输出到 Eclipse 中的控制台视图。奇怪的是，如果我从 Windows 的命令行编译并运行程序，我会得到想要的结果。因此，我认为eclipse实际上是将输出写入文件并将其呈现在控制台窗口中。如何强制 eclipse 在我的运行配置中打开一个真正的命令行窗口？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-23T16:43:09.927

输出被缓冲。

stdout 默认情况下是行缓冲的，这意味着 '\n' 应该刷新缓冲区。为什么在你的情况下没有发生？我不知道。我需要有关您的应用程序/环境的更多信息。

但是，您可以使用 setvbuf() 控制缓冲：

```
setvbuf(stdout, NULL, _IOLBF, 0); 
```

这将强制标准输出被行缓冲。

```
setvbuf(stdout, NULL, _IONBF, 0); 
```

这将强制 stdout 无缓冲，因此您不需要使用 fflush()。请注意，如果您有大量打印件，它将严重影响应用程序的性能。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-27T20:19:36.340

显然这是 Eclipse 的一个已知错误。WONT-FIX 解决了这个错误。我不知道为什么。这是链接： [Eclipse C 控制台错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-23T16:42:58.883

在打印之前尝试设置：

```
setvbuf (stdout, NULL, _IONBF, 0); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-23T16:33:29.117

您可以尝试写入标准错误，而不是标准输出。

```
fprintf(stderr, "Hello, please enter your age\n"); 
```

你也应该看看[这个](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)相关的线程。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-06-19T17:52:40.193

正如其他人所指出的，输出可以在控制台或 shell 有机会看到之前在程序中缓冲。

在包括 mac 在内的类 unix 系统上，`stdout`默认情况下具有基于行的缓冲。这意味着您的程序`stdout`一看到换行符就会清空其缓冲区。

但是，在 Windows 上，换行符不再是特殊的，而是使用了完全缓冲。Windows 根本不支持行缓冲；请参阅[setvbuf 上的 msdn 页面](http://msdn.microsoft.com/en-us/library/86cebhfs.aspx)。

所以在 Windows 上，一个好的方法是像这样完全关闭`stdout`缓冲：

```
setvbuf (stdout, NULL, _IONBF, 0); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-02T14:04:02.847

作为系统环境变量或在 Eclipse 项目中添加`c:\gygwin\bin`到环境变量（属性-> 运行/调试-> 编辑）`PATH`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-01T13:12:42.147

1.  在您的项目文件夹中，创建一个“.gdbinit”文本文件。它将包含您的 gdb 调试器配置
2.  编辑“.gdbinit”，并添加行（不带引号）：“set new-console on”</li>
3.  构建项目后右键项目Debug>“Debug Configurations”，如下图 ![调试配置](../Images/4ca61020bea467a65633639a1345c261.png)

4.  在“调试器”选项卡中，确保“GDB 命令文件”现在指向您的“.gdbinit”文件。否则，输入“.gdbinit”配置文件的路径： ![gdb 配置](../Images/6f6ca07ef81e0d1ea7da4a7c880b5cdd.png)

5.  单击“应用”和“调试”。应启动本机 DOS 命令行，如下所示 ![安慰](../Images/7b5637d0e6b741915e9d9ad442f082dc.png)

# flyway - flyway可以跨数据库处理不同的ID

> ID：13035078
> 
> 赞同：0
> 
> 时间：2012-10-23T16:27:11.917
> 
> 标签：flyway

我们的表（Oracle 数据库 11g）有一个由序列生成的 PK。这些 ID 在不同环境中不同步。如果我对表 A 进行了更改，我必须创建一个忽略 PK 并使用自然键的脚本。因此，例如，如果在 DEV 中，我使用 ID 102843 和 paret 代码 YU9 更新了一个零件，我无法针对 ID 102843 的 prod 发布更新。我必须发布零件代码 YU9 的更新。由于表是基于 ID 连接的，因此随着涉及的表越来越多，这变得越来越复杂。

无论如何，我们一直在寻找一种可以为此生成 sql 脚本并使我的生活不再是噩梦的工具。飞路可以吗？顺便说一句，如果有人知道另一种这样的产品，我很想听听（我已经和 Redgate 等谈过了（另外，不，我无法控制这些序列，也不能让它们保持一致。这只是事情是这样的）

澄清：我不是在问我的系统应该如何工作。这就是它的工作方式，并且不会很快改变。我只是问flyway产品是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T19:33:27.937

经过多次争论，我们最终摆脱了其他环境中的序列。基本上，我们将 PROD 克隆到 DEV。然后我们摆脱了 PROD 中的序列，现在只需使用 DEV 中的序列生成的 ID 将记录从 DEV 移动到 PROD。
或者，换句话说，我们只是摆脱了他们的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:50:08.237

听起来您有跨环境复制的参考数据。为什么要使用序列？只需分配手动 ID，您的问题就会消失。

您可以发出最终迁移，根据自然键重新分配手动 ID，然后删除序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T12:52:18.240

回到这个问题（在标题中提到）：flyway 可以跨数据库处理不同的 ID 吗？我们有两个具有不同表的不同数据库，但我们想将第一个数据库的一些表/列映射到第二个数据库的一些其他表/列。主要问题是，ID 不一样。那么有没有一种方法来定义应该如何映射 id，例如，一方面我们有一个复合主键，但另一方面我们有一个自动递增的 id？

# node.js - 我可以在我的 node.js http 应用程序中使用 V8 中的哪些对象？

> ID：13035080
> 
> 赞同：3
> 
> 时间：2012-10-23T16:27:22.960
> 
> 标签：node.js, v8

我正在寻找一种继承方式来解析/字符串化 node.js 中的 json，发现我可以使用全局 V8 公开对象“JSON（所以 JSON.parse() 和 JSON.stringify()”。现在，我想知道我可以在我的 node.js 应用程序中使用哪些其他 V8 公开对象。我在网上搜索了一个实例，其中一个实例是指 V8 规范。但是，我还没有达到可以阅读和破译可以从 V8 重用的内容的水平node.js 应用程序中的规范。任何对 V8/node.js 有更深入了解的人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:35:15.587

[Node.js 支持此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects)定义的所有标准 JavaScript 全局对象。

# java - 遍历映射并检查键是否存在于另一个映射中

> ID：13035085
> 
> 赞同：0
> 
> 时间：2012-10-23T16:27:38.737
> 
> 标签：java, jsp, el

我正在遍历我的地图：

我将地图放在控制器模型属性中，例如：

```
model.addAttribute("myMap", realMapObject); 
```

JSP 代码：

```
<c:forEach items="${myMap}" var="entry">
..... works perfectly iteration itself
..... 
```

我需要检查另一个地图（ ）`myMap`中是否存在入口键。`anotherMap`我试过这个：

```
model.addAttribute("anotherMap", realMapObjectAnotherMap); 
```

JSP 代码：

```
<c:forEach items="${myMap}" var="entry">
    .....
    .....works perfectly 
 <c:choose>
 <c:when test="${not empty ${anotherMap['${entry.key}']}}">
        <h2>${entry.key} - YES</h2>
 </c:when>

 <c:otherwise>
        <h2>${entry.key} - NOT</h2>
 </c:otherwise>
 </c:choose> 
```

我收到此错误：

> 包含无效表达式：javax.el.E​​LException：错误解析：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:30:49.290

您不能嵌套 EL 表达式，例如`${ ${ } }`. 您需要在同一个 EL 表达式中执行此操作。

```
<c:when test="${not empty anotherMap[entry.key]}"> 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [Java EE 6 教程 - EL 表达式示例](http://docs.oracle.com/javaee/6/tutorial/doc/bnaim.html)

# html - 绝对定位的元素在 ie7 中不可见

> ID：13035086
> 
> 赞同：0
> 
> 时间：2012-10-23T16:27:47.237
> 
> 标签：html, css, internet-explorer-7

[谁能告诉我为什么这个页面](http://testing.xenongroupadmin.com/enrolment)右上角的绝对定位导航按钮在ie7 中不可见，但在所有其他浏览器（包括 ie8 和 9）中都可以正常工作

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:30:45.793

对于您正在使用`display:inline-block`的 IE7 或更低版本未正确支持的应用*程序（有时它可以工作，而另一些则不能 - 取决于元素和情况）*。

使用`display:block`and`float:left`代替，因为这更受支持*（但是，如果您看到我的第一个链接，您也可以使用`display:inline`）*。

不要忘记包含`overflow:hidden`在周围的 UL 元素中，否则由于浮动，您会得到奇怪的结果。

CSS：

```
#navlist {
  list-style: none;
  margin: 0;
  padding: 0;
  display: block;
  overflow: hidden;
}

#navlist li {
  list-style: none;
  margin: 0;
  padding: 0;
  display: block;
  float: left;
  /* your styles from before */
  background-color: #F2F2F2;
  border-radius: 5px 5px 5px 5px;
  color: black;
  height: 20px;
  padding-top: 2px;
  text-align: center;
  width: 20px;
} 
```

标记：

```
<ul id="navlist">
  <li id="li1">
    <a id="link1" href="#">1</a>
  </li>
  <li id="li2">
    <a id="link2" href="#">2</a>
  </li>
  <li id="li3">
    <a id="link3" href="#">3</a>
  </li>
  <li id="li4">
    <a id="link4" href="#">4</a>
  </li>
 </ul> 
```

有用的链接：

1.  [http://aaronrussell.co.uk/legacy/cross-browser-support-for-inline-block/](http://aaronrussell.co.uk/legacy/cross-browser-support-for-inline-block/)
2.  [http://www.quirksmode.org/css/display.html#t03](http://www.quirksmode.org/css/display.html#t03)

### 更新：

您可以尝试的另一件事*（如果上述方法不能解决问题）*是暂时删除 IE7 的条件注释代码 - 只是为了确保其中没有任何问题导致问题：

```
<!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="css/ie7.css" />
  <script type="text/javascript" src="Scripts/ie7.js"></script> 
<![endif]--> 
```

### 更新：

现在我已经能够在 IE7 中进行实际测试，如果启用边框，问题就会出现 - 使用 css 边框进行调试总是一个好主意:) 上面的问题是由一个子元素推出的宽度引起的你的父母元素`innerWrap`。这不会影响更现代的浏览器，但是 IE7 和更早版本总是尝试包装他们的孩子，无论它们放在哪里或它们的大小是多少*（除非您覆盖此行为）*。因为你的子元素`slideWrap`是 3000px 宽，它会导致你的右定位元素从屏幕边缘消失。

以下css应该修复它：

```
#innerWrap { width: 100%; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:30:28.247

使用 left 或 right 属性以使其可见。

# heroku - spymemchached 是否预装在 heroku tomcat 实例上？

> ID：13035090
> 
> 赞同：3
> 
> 时间：2012-10-23T16:28:01.973
> 
> 标签：heroku, memcached, spymemcached

我在使用 hibernate-memcached 1.3 的 Heroku cedar 上遇到奇怪的错误：

抓到 CNFE 解码 438 字节数据 java.lang.ClassNotFoundException: org.hibernate.cache.entry.CacheEntry

不知何故，hibernate-memcached 1.3 无法与 spymemcached 2.8.1 及更高版本一起使用。如果我在我的 pom.xml 中明确列出 spymemcached 2.7.3 或者我按照提供的设置 spymemcached 范围都没关系 - 我总是得到 CNFE

当我升级到 spymemcached 2.8.1 时，我能够在本地复制这个问题

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:22:55.503

如果您使用 webapp-runner.jar 来运行您的应用程序，那么是的，您是对的：jar 文件中包含 spymemcached 类文件以支持会话数据的缓存。

根据[webapp-runner](https://github.com/jsimone/webapp-runner)的说法，这适用于 7.0.29.1 或更高版本。

不过，我能找到的不包含 spymemcached 类的最新版本是 7.0.22.1。

我怀疑您可以通过将 webapp-runner 降级到版本 7.0.22.1 来解决您的问题。

至少当我遇到类似问题时，这对我有用，得到如下异常：

```
org.springframework.beans.factory.CannotLoadBeanClassException:
Error loading class [net.spy.memcached.spring.MemcachedClientFactoryBean] 
for bean with name 'memcachedClient' defined in class path resource [memcached-context.xml]:
problem with class file or dependent class;
nested exception is java.lang.NoClassDefFoundError: org/springframework/beans/factory/FactoryBean 
```

这些问题仅在我使用 webapp-runner.jar 运行我的 war 文件时发生。从 Eclipse 中或使用本地普通的 Tomcat 7 运行它就可以了。

# sql-server - 使用 PowerShell 检查存储过程所需的参数

> ID：13035091
> 
> 赞同：2
> 
> 时间：2012-10-23T16:28:04.220
> 
> 标签：sql-server, stored-procedures, powershell

我在 SQL Server 2008 R2 中有一个存储过程，需要运行一些参数。

有没有办法可以动态检查存储过程以查看需要哪些参数？`invoke-sqlcmd`它在powershell中被调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:34:29.150

至少有三种方法可以获取有关存储过程参数的信息。

尝试

```
exec sp_help <sproc>

select * from information_schema.parameters where specific_name='<sproc>'

exec sp_sproc_columns <sproc> 
```

看看哪个最适合您的需求。

# c# - PDFSharp 与重复的字段名称合并

> ID：13035092
> 
> 赞同：1
> 
> 时间：2012-10-23T16:28:08.873
> 
> 标签：c#, merge, duplicates, field, pdfsharp

我正在使用 PDFSharp 以编程方式填写一些现有 PDF 表单的字段。它工作得很好，但是，我遇到了一个问题，即我需要填写的 PDF 具有重复的字段名称。

例如，有一个“是”和一个“否”复选框，它们都具有相同的字段名称。

这段代码可以完美地访问所有其他字段：

```
PdfCheckBoxField chkbox = (PdfCheckBoxField)(pdf.AcroForm.Fields["chkbox"]);
chkbox.Checked = true; 
```

但是，当两个复选框都命名为“chkbox”时，我得到：

```
ArgumentNullException was unhandled
Value cannot be null.
Parameter name: value 
```

在线上：

```
chkbox.Checked = true; 
```

有没有人遇到过这个？有什么解决方案（除了编辑 PDF）吗？

# java - 来自 activemq 应用程序的 Activemq 服务器连接

> ID：13035093
> 
> 赞同：0
> 
> 时间：2012-10-23T16:28:15.980
> 
> 标签：java, jms, jetty, activemq

我的问候！

我有一个功能齐全的 activemq 控制台应用程序。我正在为此使用 JMS + Spring 配置。我需要将它连接到一个 activemq 服务器，该服务器位于码头（来自 amq 的官方管理网络应用程序）。我试图在我的应用程序的 xml 配置中设置相同的端口，比如

```
<amq:transportConnectors>
        <!--amq:transportConnector uri="tcp://192.168.1.3:60000" enableStatusMonitor="true" /-->
        <amq:transportConnector uri="tcp://localhost:61616" enableStatusMonitor="true" />
</amq:transportConnectors> 
```

但仍然没有结果。我将衷心感谢您的帮助。

编辑：好的，我还发现我必须附加一个导入：

```
 <import resource="${activemq.base}/conf/jetty.xml" /> 
```

但是有没有办法将 activemq.base 变量设置为我的上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:07:42.367

好的，这是决定。您只需要注释掉所有 amq config xml 代码，只留下 amq:connectionFactory 并将 brokerUrl 设置为与 activemq Web 控制台相同的端口。然后开始他们两个并享受。

# ios - 如何从控制器内部关闭 TabBar 控制器？

> ID：13035100
> 
> 赞同：0
> 
> 时间：2012-10-23T16:29:04.080
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller

我有一个带有动态添加选项卡的 TabBar 控制器。添加选项卡很容易——我只需获取`[self viewControllers]`数组，添加一个新的视图控制器，并使用它`[self setViewControllers]`来更新 TabBar。现在，我希望能够按下添加的视图控制器之一中的按钮以将其从 TabBar 中删除。

我可以从`self`添加的视图控制器与`[[self tabBarController] viewControllers]`数组中比较什么，以找到要删除的匹配项？

我不能使用标签的标题，因为可能有重复。我尝试比较`self`这些项目，但它实际上`[self parentViewController]`在数组中。`parentViewController`当在“更多”菜单中打开视图时，我不能使用`parentViewController`“更多”视图控制器。我不知道有任何方法可以访问`tag`视图的直接父级中的信息，包括 。

任何提示都会很棒，并在此先感谢！

例如，这是我当前的代码。它有效，但是当标签在“更多”菜单中时不行。当 TabBar 中的视图控制器中的按钮被按下时运行：

```
NSMutableArray *temp = [[NSMutableArray alloc] initWithArray:[[self tabBarController] viewControllers]];
for (int i = 0; i < [temp count]; i++)
{
    UIViewController *test = [temp objectAtIndex:i];
    if (test == [self parentViewController])
    {
        [temp removeObject:test];
        break;
    }
}
[[self tabBarController] setViewControllers:temp]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:03:18.180

啊，现在我觉得有点傻。我确定我以前尝试过这个，其他答案敦促不要这样做，但是......

我可以`[[self tabBarController] selectedIndex]`用来获取当前选定选项卡的数组中的位置，然后删除该位置的对象。这就是我一直在寻找的——快速高效，不需要太多额外的代码。

它完全按预期工作。当用户重新排序项目时，数组也会重新排序；所以当初始索引发生变化时，用户按下关闭按钮时的索引是数组中控制器的索引。

嗯，最后我明白了……

# java - 使用 JTable 作为 JScrollPane 的 columnHeader，同时保持每列的宽度

> ID：13035102
> 
> 赞同：1
> 
> 时间：2012-10-23T16:29:07.043
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

只是在寻找一个快速的答案：是否可以将 JTable 用作 JScrollPane 的 columnHeader？

我有一个具有不同列宽和列标题的配置 JTable，并计划将标题用作滚动窗格的 columnHeader。我怎样才能做到这一点？我用

```
scrollPane.setColumnHeaderView(table); 
```

但它没有出现。

所以感谢 Guillaume Polet，它应该是

```
scrollpane.setColumnHeaderView(table.getTableHeader()); 
```

但是现在所有的列都具有相同的宽度，尽管我在表中将它们设置为不同的值。我怎样才能让表格列显示不同的宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:56:20.980

如果我理解正确，您希望表格的列标题出现在视口的列标题中，但您希望在视口视图中显示其他内容？

然后你需要抓取表格标题并将其设置为视口的列标题。

这是一个例子：

```
import java.awt.BorderLayout;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestTableHeader {

    protected void initUI() {
        Vector<Vector<Object>> data = new Vector<Vector<Object>>();
        Vector<String> colNames = new Vector<String>();
        for (int i = 0; i < 5; i++) {
            colNames.add("Col-" + (i + 1));
        }

        table = new JTable(data, colNames);
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        scrollpane = new JScrollPane();
        scrollpane.setColumnHeaderView(table.getTableHeader());
        scrollpane.setViewportView(new JLabel("some label in the viewport view"));
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    private JTable table;
    private JScrollPane scrollpane;

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTableHeader().initUI();
            }
        });
    }

} 
```

# database - 导出远程数据库：Oracle

> ID：13035109
> 
> 赞同：2
> 
> 时间：2012-10-23T16:29:27.653
> 
> 标签：database, oracle, export

我在包含多个数据库的服务器上有一个 oracle 数据库，我通常使用 sqlDeveloper 连接到这些数据库。我想导出数据库 DB1。SqlDeveloper 中使用的字符串连接是：

> user@//server:1530/DB1
> user@//server:1533/DB2
> user@//server:1534/DB3

我用来导出 DB1 的命令是：

> exp user@//server:1530/DB1 file="C:\DB1.dmp" log="C:\DB1.log" rows=y owner=user

但它不起作用，我有这个消息：

> ```
> EXP-00056: Erreur ORACLE 6401 rencontré
> ORA-06401: NETCMN : désignation de lecteur non valide
> EXP-00000: Procédure d'export terminée avec erreur 
> ```

如何调整 exp 命令以获得所需的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T17:23:32.077

根据评论建议您使用的是不支持[轻松连接](http://docs.oracle.com/cd/E14072_01/network.112/e10836/naming.htm#i498306)语法的 10g 之前的版本，因此也不能使用[数据泵](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm)......

如果您创建了`tnsnames.ora`如下条目：

```
BD1 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP) (HOST = server) (PORT = 1530))
    )
    (CONNECT_DATA = (SERVICE_NAME = DB1))
  ) 
```

...那么您应该可以使用以下方式导出：

```
exp user@BD1 file="C:\DB1.dmp" log="C:\DB1.log" rows=y owner=user 
```

（`BD1`别名在哪里；不确定您是否打算这样拼写，​​但`DB1`如果您愿意，可以使用）。

# jquery - 使用jQuery获取Gridview行内超链接的值

> ID：13035111
> 
> 赞同：0
> 
> 时间：2012-10-23T16:29:31.120
> 
> 标签：jquery, asp.net, gridview

我的网格视图看起来像：

```
 <asp:GridView ID="gvFiles" runat="server" >
                                <Columns>
 <asp:TemplateField HeaderText="Notification Sent to">
                                        <ItemTemplate>
                                            <asp:Label ID="lblNotifSentTo" runat="server" CssClass="NotifSent"></asp:Label>
                                            <asp:HyperLink ID="hypNotifSentTo" runat="server"  CssClass="NotifSent2" NavigateUrl="#" 
                                                Text='<%# Eval("NotifSentToLabsStr") %>'></asp:HyperLink>
                                        </ItemTemplate>
                                    </asp:TemplateField>
  <asp:TemplateField>
                                        <ItemStyle Wrap="false" />
                                        <ItemTemplate>
                                            <div id="divIbtnEdit" runat="server" style="display: inline;">
                                                <asp:ImageButton ID="ibtnDelete" runat="server" ImageUrl="~/Images/Delete.gif"
                                                    ToolTip="Delete" />
                                                &nbsp;
                                            </div>
....... 
```

当我单击删除按钮时，我需要在执行任何其他操作之前检查“发送到的通知”超链接的值，但我似乎无法获取该值

这就是我现在所拥有的：

```
 $("input[id*='_ibtnDelete_']").live("click", function ($e) {

            var id = $(this).next('NotifSent2').val();
            var nm = $(this).find('input[id$=NotifSent2]').val();

            var nm = $(this).parent.find('input[id$=NotifSent2]').val();
            var x = $(this).find('[id$="NotifSent2"]').val();
            return confirm(x);

            if ($(this).attr('src') == "Images/Delete_gray.gif") {
                alert("This request cannot be deleted, because it is currently linked to other files. ");
                return false;
            }

            else {
                return confirm('Are you sure you want to delete this file?');
            }
        }); 
```

我不断得到“未定义”

我究竟做错了什么？请帮忙。

这是生成的html：

```
<table cellspacing="0" cellpadding="8" id="ContentPlaceHolder1_gvFiles" style="background-color:White;border-color:#CCCCCC;border-width:1px;border-style:Solid;width:100%;border-collapse:collapse;">
                    <tr align="left" style="color:White;background-color:#ABAAC1;font-weight:bold;">
                        <th scope="col">&nbsp;</th><th scope="col">&nbsp;</th><th scope="col">&nbsp;</th><th scope="col">Type of Request</th><th scope="col">Status</th><th scope="col">Sender</th><th scope="col">Upload Date (EST)</th><th scope="col">Notification Sent to</th><th scope="col">&nbsp;</th><th scope="col">&nbsp;</th>
                    </tr><tr class="gvRowReqIncomplete">
                        <td>
                                            <td>HQ</td><td>10/23/2012 12:41:19 PM</td><td>
                                            <span id="ContentPlaceHolder1_gvFiles_lblNotifSentTo_0" class="uglyRed" style="display:inline;">No Recipient Selected!</span>
                                            <a id="ContentPlaceHolder1_gvFiles_hypNotifSentTo_0" class="NotifSent2" href="#" style="display:none;"></a>
                                        </td><td>

                                            <a id="ContentPlaceHolder1_gvFiles_hypResend_0" style="font-weight:bold;cursor:pointer;">Send Reminder</a>
                                        </td><td style="white-space:nowrap;">
                                            <div id="ContentPlaceHolder1_gvFiles_divIbtnEdit_0" style="display: inline;">
                                                <input type="image" name="ctl00$ContentPlaceHolder1$gvFiles$ctl02$ibtnEdit" id="ContentPlaceHolder1_gvFiles_ibtnEdit_0" title="Edit" src="Images/Edit.gif" />
                                                &nbsp;
                                            </div>
                                            <div id="ContentPlaceHolder1_gvFiles_divIbtnDelete_0" style="display: inline;">
                                                <input type="image" name="ctl00$ContentPlaceHolder1$gvFiles$ctl02$ibtnDelete" id="ContentPlaceHolder1_gvFiles_ibtnDelete_0" title="Delete" src="Images/Delete.gif" />
                                                &nbsp;
                                            </div>
                                            <div id="ContentPlaceHolder1_gvFiles_divIbtnUpdate_0" style="display: none;">
                                                <input type="image" name="ctl00$ContentPlaceHolder1$gvFiles$ctl02$ibtnUpdate" id="ContentPlaceHolder1_gvFiles_ibtnUpdate_0" title="Update" src="Images/Update.gif" />
                                                &nbsp;
                                            </div>
                                            <div id="ContentPlaceHolder1_gvFiles_divIbtnCancel_0" style="display: none;">
                                                <input type="image" name="ctl00$ContentPlaceHolder1$gvFiles$ctl02$ibtnCancel" id="ContentPlaceHolder1_gvFiles_ibtnCancel_0" title="Cancel" src="Images/Cancel.gif" />
                                            </div>
                                        </td>
                    </tr>
                </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:32:26.983

NotifSent2 是一个你必须使用的类。带类选择器

**改变**

```
 var id = $(this).next('NotifSent2').val(); 
```

**到**

```
 var id = $(this).next('.NotifSent2').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:44:30.217

试试这个：

```
var id = $(".NotifSent2", $(this).closest("tr")).html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:10:44.130

试试这个

```
$('table[id$=gvFiles] tr input[id$=ibtnDelete]').click(function(){
    var val=$(this).closest('tr').find('a[id$=hypNotifSentTo]').html();
    alert(val);
    }); 
```

# android - 如何像谷歌地图应用一样将谷歌徽标移动到透明操作栏上方？安卓

> ID：13035112
> 
> 赞同：3
> 
> 时间：2012-10-23T16:29:31.477
> 
> 标签：android, android-mapview

如何像谷歌地图应用一样将谷歌徽标移动到透明操作栏上方？

我有一个 MapsActivity 扩展`SherlockMapActivity`：

```
class MapsActivity extends SherlockMapActivity 
```

![图像](../Images/7b0eed2816769d51fb3f5024183ff5b4.png)

请看上面的图片，我必须做同样的事情`MapsActivity`，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T17:36:32.577

将 Google 徽标从标准地图 API 移出违反了[服务条款](https://developers.google.com/maps/terms)。

9.4(a)：

> 通过服务提供给您的内容可能包含 Google、其合作伙伴或 Google 索引内容的其他第三方权利持有人的商号、商标、服务标记、徽标、域名和其他独特的品牌特征。**当 Google 提供此属性时，*您必须按照*通过服务提供的或 Maps API 文档中的说明显示它，并且不得删除或以任何方式更改这些商号、商标、服务标记、徽标、域名和其他独特品牌特征。**

9.4(b)：

> 您同意在页面上的显着位置、服务搜索框附近和附近包含并显示“*由 Google 提供支持*”属性（和/或 Google 要求的任何其他属性，如 Maps API 文档中所述），并且谷歌搜索结果。如果您使用标准 Google 搜索控件或标准 Google 搜索控件表单，则会自动包含此属性，并且***您同意不修改***或隐藏此自动生成的属性。

因此，根据条款的第 9.4(a) 和 9.4(b) 节，这似乎不是一个好主意。

# javascript - 应用“旋转”变换后调整图像大小（SVG 格式）

> ID：13035115
> 
> 赞同：0
> 
> 时间：2012-10-23T16:29:38.497
> 
> 标签：javascript, svg, raphael

我一直在开发一个应用程序，它允许用户将图像添加到视口，然后调整它们的大小、裁剪和旋转它们。为了使旋转工作，图像被添加为 SVG，使用 Raphael.js 库。

所有图像都有一个轮廓（称为***wrapper***）。当图像被调整大小时，它的包装器也是如此。当图像旋转时，包装器也会展开，因此它将包含旋转后的图像（见下图）。

![包含在其包装中的图像](../Images/8f706d2114bb41bffd0bbc0b054b0081.png)

到目前为止，一切都很好。除了当我尝试在旋转后调整图像对象的大小时，它不会再包含在其轮廓中（见下图）。

![图像在旋转后调整大小](../Images/3d4623a1758ea40d591f86f8d3b93d89.png)

调整图片大小时，svg 对象的“x”和“y”属性也需要调整。图像的新尺寸（宽度 + 高度）以及“x”和“y”属性的计算如下所示：

```
var ratio_width = w / init.wrapper.width,         // w = the new width of the wrapper (computed at each resize step)
    ratio_height = h / init.wrapper.height,       // h = the new height of the wrapper

    svg_width = init.svg.width * ratio_width,     // svg_width = the new width of the image
    svg_height = init.svg.height * ratio_height,  // svg_height = the new height of the image

    x = init.svg.x*ratio_width,
    y = init.svg.y*ratio_height;

this.svg.attr({
    "x": x,
    "y": y,
    "width": svg_width,
    "height": svg_height
}); 
```

“init” JavaScript 对象包含包装器的大小（宽度和高度）和图像的大小（图像旋转后，它们的尺寸会有所不同），还包含调整大小操作之前的*x*和*y*属性的值.

问题是上面计算的所有值都是正确的。我知道，因为我也尝试在每个调整大小步骤中销毁 svg 并重新附加它（但这不是一个选项，闪烁太多），具有相同的大小值*x*和*y*，如下所示：

```
// "this.angle" on the second line is the current rotation angle
this.svg.remove();
this.svg = this.canvas.image(this.src,x,y,svg_width,svg_height).transform("r"+this.angle); 
```

因此，如果我只是删除该对象，然后使用上面的值再次创建它，为什么不简单地更改其属性来完成应有的工作呢？我已经拔了3天的头发了，所以我很感激一些帮助！

# c# - ftpwebrequest 中的计时器错误

> ID：13035118
> 
> 赞同：0
> 
> 时间：2012-10-23T16:29:41.823
> 
> 标签：c#, vb.net

我试图在计时器中执行 FTPWEBREQUEST，但出现此错误`TextBox1.Text = reader.ReadToEnd`

```
Cannot access a disposed object.
Object name: 'System.Net.Sockets.NetworkStream'. 
```

你能帮我吗？

谢谢

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        Timer1.Stop()

        Dim request As FtpWebRequest = CType(WebRequest.Create(""), FtpWebRequest)
        request.Method = WebRequestMethods.Ftp.ListDirectoryDetails

        request.Credentials = New NetworkCredential("", "")
        Dim response As FtpWebResponse = CType(request.GetResponse(), FtpWebResponse)

        Dim ResponseStream As Stream = response.GetResponseStream()
        Dim reader As New StreamReader(ResponseStream)

        'Console.Write(reader.ReadToEnd)
        'MessageBox.Show("Directory List Complete, status {0}", response.StatusDescription)

        'MessageBox.Show(reader.ReadToEnd)
        'MessageBox.Show(reader.ReadToEnd)

        TextBox1.Text = reader.ReadToEnd
        TextBox1.Text = vbNewLine
        TextBox1.Text = vbNewLine

        ResponseStream.Close()
        reader.Close()

        response.Close()

        reader.Close()
        response.Close()

        Timer1.Start()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:12:22.503

我不确切知道您的目标以及为什么需要计时器。

但我想给你一些编码练习的建议：

您不应该关闭（处置）您的流两次。使用该`Using`语句以获得更干净和可读的代码。它还有助于尽早释放资源，即使抛出异常。

```
Public Class Form1    

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load    

    End Sub    

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick    

        Timer1.Stop()    

         Dim request As FtpWebRequest = CType(WebRequest.Create(""), FtpWebRequest)
        request.Method = WebRequestMethods.Ftp.ListDirectoryDetails

        request.Credentials = New NetworkCredential("", "")
        Using response As FtpWebResponse = CType(request.GetResponse(), FtpWebResponse)

            Using responseStream As Stream = response.GetResponseStream()
                Using reader As New StreamReader(responseStream)

                    TextBox1.Text = reader.ReadToEnd
                    TextBox1.Text += vbNewLine 
                    TextBox1.Text += vbNewLine
                    ' Use the + for appending (set the textbox to multiline)

                End Using

            End Using

        End Using    

        Timer1.Start()    

    End Sub    
End Class 
```

# java - 堆栈溢出错误

> ID：13035119
> 
> 赞同：-1
> 
> 时间：2012-10-23T16:29:51.940
> 
> 标签：java, stack-overflow

当我运行我制作的这个短程序时，我不断收到堆栈溢出错误！请帮忙！现在它要做的就是接受用户输入并打印他们的位置（在 X 和 Y 坐标中）。我不确定堆栈溢出错误是什么或如何修复它。

```
import java.awt.*;
import javax.swing.*;

public class ExplorerPanel extends JFrame {

    ExplorerEvent prog = new ExplorerEvent(this);

    JTextArea dataa = new JTextArea(15, 20);
    JTextField datain = new JTextField(20);
    JButton submit = new JButton("Submit");
    JTextField errors = new JTextField(30);

    public ExplorerPanel() {
        super("Explorer RPG");
        setLookAndFeel();
        setSize(400, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_…
        BorderLayout bord = new BorderLayout();
        setLayout(bord);

        JPanel toppanel = new JPanel();
        toppanel.add(dataa);
        add(toppanel, BorderLayout.NORTH);

        JPanel middlepanel = new JPanel();
        middlepanel.add(datain);
        middlepanel.add(submit);
        add(middlepanel, BorderLayout.CENTER);

        JPanel bottompanel = new JPanel(); 
        bottompanel.add(errors);
        add(bottompanel, BorderLayout.SOUTH);

        dataa.setEditable(false);
        errors.setEditable(false);

        submit.addActionListener(prog);

        setVisible(true);
    }

    private void setLookAndFeel() {
        try {
            UIManager.setLookAndFeel(
                                   "com.sun.java.swing.plaf.nimbus.NimbusLo…
            );
        } catch (Exception exc) {
            // ignore error
        }
    }

    public static void main(String[] args) {
        ExplorerPanel frame = new ExplorerPanel();
    }

}

public class ExplorerEvent implements ActionListener, Runnable {

    ExplorerPanel gui;
    Thread playing;
    String command;
    String gamedata;
    ExplorerGame game = new ExplorerGame();

    public ExplorerEvent(ExplorerPanel in) {
        gui = in;
    }

    public void actionPerformed(ActionEvent event) {
        String command = event.getActionCommand();
        if (command.equals("Submit")) {
            startPlaying();
        }
    }

    void startPlaying() {
        playing = new Thread(this);
        playing.start();
    } 

    void stopPlaying() {
        playing = (null);
    }

    void clearAllFields() {
        gui.dataa.setText("");
    }

    public void run() {
        Thread thisThread = Thread.currentThread();
        while (playing == thisThread) {

            // Game code
            game.Game();

        }
    }

}

public class ExplorerGame {

    ExplorerPanel gui = new ExplorerPanel();
    String command;
    int x = 1;
    int y = 1;

    public void Game() {
        command = gui.submit.getText().toLowerCase();

        if (command.equals("east")) {x--;}
        else if (command.equals("south")) {y--;}
        else if (command.equals("west")) {x++;}
        else if (command.equals("north")) {y++;}
        System.out.println(x + y);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T16:32:14.563

在**ExplorerGame**中，您已声明：-

```
ExplorerPanel gui = new ExplorerPanel(); 
```

然后，在**ExplorerPanel**中：-

```
ExplorerEvent prog = new ExplorerEvent(this); 
```

然后再一次，在**ExplorerEvent**中：-

```
ExplorerGame game = new ExplorerGame(); 
```

这将通过对象的递归创建填充堆栈。

```
ExplorerGame -> ExplorerPanel -> ExplorerEvent --+
    ^                                            |
    |____________________________________________| 
```

你想解决问题吗？我会建议你：-

*   扔掉代码，重新设计你的应用程序。在`cyclic dependency`你的应用程序中有一个很大的漏洞，显示出一个非常糟糕的设计。

# c# - 在 WinDbg 中显示 C# 堆栈跟踪时出现问题

> ID：13035125
> 
> 赞同：6
> 
> 时间：2012-10-23T16:30:16.317
> 
> 标签：c#, windbg, stack-trace, handle-leak

我在 C# 程序中有句柄泄漏。我正在尝试使用 WinDbg 使用 !htrace 对其进行诊断，大致如[this answer](https://stackoverflow.com/a/7617994/1496914)中所述，但是当我在 WinDbg 中运行 !htrace -diff 时，我看到的堆栈跟踪不显示我的 C# 函数的名称（或甚至我的 .net 程序集）。

我创建了一个小测试程序来说明我的困难。这个程序除了“泄漏”句柄之外什么都不做。

```
class Program
{
    static List<Semaphore> handles = new List<Semaphore>();

    static void Main(string[] args)
    {
        while (true)
        {
            Fun1();
            Thread.Sleep(100);
        }
    }

    static void Fun1()
    {
        handles.Add(new Semaphore(0, 10));            
    }
} 
```

我编译了程序集，然后在 WinDbg 中我转到“文件”->“打开可执行文件”并选择我的程序 (D:\Projects\Sandpit\bin\Debug\Sandpit.exe)。我继续执行程序，中断它，然后运行“！htrace -enable”，然后继续运行一段时间，然后中断并运行“！htrace -diff”。这就是我得到的：

```
0:004> !htrace -enable
Handle tracing enabled.
Handle tracing information snapshot successfully taken.
0:004> g
(1bd4.1c80): Break instruction exception - code 80000003 (first chance)
eax=7ffda000 ebx=00000000 ecx=00000000 edx=77b2f17d esi=00000000 edi=00000000
eip=77ac410c esp=0403fc20 ebp=0403fc4c iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
ntdll!DbgBreakPoint:
77ac410c cc              int     3
0:004> !htrace -diff
Handle tracing information snapshot successfully taken.
0xd new stack traces since the previous snapshot.
Ignoring handles that were already closed...
Outstanding handles opened since the previous snapshot:
--------------------------------------
Handle = 0x00000250 - OPEN
Thread ID = 0x00001b58, Process ID = 0x00001bd4

0x77ad5704: ntdll!ZwCreateSemaphore+0x0000000c
0x75dcdcf9: KERNELBASE!CreateSemaphoreExW+0x0000005e
0x75f5e359: KERNEL32!CreateSemaphoreW+0x0000001d
*** WARNING: Unable to verify checksum for C:\Windows\assembly\NativeImages_v4.0.30319_32\System\13c079cdc1f4f4cb2f8f1b66c8642faa\System.ni.dll
0x65d7e805: System_ni+0x0020e805
0x65d47843: System_ni+0x001d7843
0x65d477ef: System_ni+0x001d77ef
0x004700c9: +0x004700c9
0x67d73dd2: clr!CallDescrWorkerInternal+0x00000034
0x67d9cf6d: clr!CallDescrWorkerWithHandler+0x0000006b
0x67d9d267: clr!MethodDescCallSite::CallTargetWorker+0x00000152
0x67eb10e0: clr!RunMain+0x000001aa
0x67eb1200: clr!Assembly::ExecuteMainMethod+0x00000124
--------------------------------------
Handle = 0x0000024c - OPEN
Thread ID = 0x00001b58, Process ID = 0x00001bd4

0x77ad5704: ntdll!ZwCreateSemaphore+0x0000000c
0x75dcdcf9: KERNELBASE!CreateSemaphoreExW+0x0000005e
0x75f5e359: KERNEL32!CreateSemaphoreW+0x0000001d
0x65d7e805: System_ni+0x0020e805
0x65d47843: System_ni+0x001d7843
0x65d477ef: System_ni+0x001d77ef
0x004700c9: +0x004700c9
0x67d73dd2: clr!CallDescrWorkerInternal+0x00000034
0x67d9cf6d: clr!CallDescrWorkerWithHandler+0x0000006b
0x67d9d267: clr!MethodDescCallSite::CallTargetWorker+0x00000152
0x67eb10e0: clr!RunMain+0x000001aa
0x67eb1200: clr!Assembly::ExecuteMainMethod+0x00000124
...
--------------------------------------
Displayed 0xd stack traces for outstanding handles opened since the previous snapshot. 
```

如您所见，堆栈跟踪缺少我的 C# 函数名称“Main”和“Fun1”。我相信“System_ni+0x ...”框架可能是我的功能框架，但我不知道。我的问题是，如何让 WinDbg 在堆栈跟踪中显示我的 C# 函数的函数名称？

额外信息：我的 WinDbg 符号搜索路径是

> SRV *C:/symbols* [http://msdl.microsoft.com/download/symbols;D](http://msdl.microsoft.com/download/symbols;D) :\Projects\Sandpit\bin\Debug;srv*

当我在 WinDbg 中打开可执行文件时，我没有收到任何错误。在输出目录（“D:\Projects\Sandpit\bin\Debug”）中有一个名为“Sandpit.pdb”的文件。该项目是在本地构建的，因此 pdb 文件应与 exe 匹配。[我从这里](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)下载了 WinDbg 。我在 Visual Studio 的项目设置中选中了“启用本机代码调试”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T16:34:40.023

WinDbg 尝试尽可能地解释本机调用堆栈，但是要完全解释 CLR 应用程序的堆栈，WinDbg 需要使用名为[SOS](http://msdn.microsoft.com/en-us/library/bb190764.aspx)的扩展。这个扩展有一个单独的命令`CLRStack`用于查看 CLR 堆栈的堆栈信息。您需要先加载 SOS 扩展，但是使用`.loadby sos clr`命令（或类似命令，我记得要加载正确版本的 SOS 可能会有点痛苦）

有关更多信息，请参阅

*   [WinDbg 101 - 在 .Net 应用程序中查找简单内存泄漏的分步指南](http://alookonthecode.blogspot.co.uk/2012/02/windbg-101a-step-by-step-guide-to.html)
*   [WinDbg / SOS 备忘单](http://geekswithblogs.net/.NETonMyMind/archive/2006/03/14/72262.aspx)

# javascript - 添加RSS新闻片

> ID：13035126
> 
> 赞同：0
> 
> 时间：2012-10-23T16:30:18.883
> 
> 标签：javascript, jquery, html, xml, rss

所以我找到了一个我非常喜欢的基于 rss 的新闻幻灯片。有没有办法将相同的新闻片放在我的网站上，以便他们的服务器自动更新？我`<link>`在 head 部分中找到了将新闻短片追溯到原始 rss 的元素。这有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:37:05.357

好的，我明白了。就个人而言，我是这样理解的。获取 RSS 提要，将其粘贴到 YQL 控制台中，获取 JSONP URL，然后使用 jQuery 解析它，如下所示：

```
$.ajax({
    //YQL JSON URL
    url: "http://query.yahooapis.com/v1/public/yql?q=select%20title%2Cdescription%2Clink%20from%20rss%20where%20url%3D%22http%3A%2F%2Fwww.usgs.gov%2Frss%2Fnews_description.xml%22&format=json",
    dataType: 'jsonp',
    jsonp: 'callback',
    jsonpCallback: 'cbfunc',
    success: function(data) {
        //narrow down WHAT you want
        var results = data.query.results.item;
        //loop through results and then append each item to #listnews selector.                 
        $.each(results, function(index, data) {
            $("#listnews").append("<li><a href='" + results[index].link + "'>" + results[index].title + "</a></li>");
        });
    }
});​ 
```

这是一个 jsfiddle 工作示例：http: [//jsfiddle.net/Qpkpn/](http://jsfiddle.net/Qpkpn/)

我发现这在所有当前的浏览器中也有效......加上 IE8（我在 IE8 中遇到问题，直到 jQuery JSON 解析挽救了这一天）

将此添加到您的身体区域：

```
<ul id="loadnews"></ul> 
```

然后，您需要为其添加某种滚动功能。

我看到了一个名为 jTicker 的代码，它也可能对你有用。

# android - 创建用于测试的模拟 Activity 的最快方法

> ID：13035134
> 
> 赞同：15
> 
> 时间：2012-10-23T16:30:40.233
> 
> 标签：android, unit-testing, mocking, android-activity

我目前正在对一个库进行单元测试。在某些类中，我需要在某些静态方法中将活动作为参数传递。图书馆本身不包含任何活动。我需要以某种方式获取一个模拟活动的实例以在每个单独的方法测试中使用。

我已经阅读了[活动测试教程](http://developer.android.com/tools/testing/activity_testing.html)和[测试基础](http://developer.android.com/tools/testing/testing_android.html)部分。那里所说的大部分内容只有在您要测试要测试的项目中已经存在的活动时才有意义。但我只需要一个模拟的来做一些事情，比如在 Ui 线程中显示对话框和运行短任务。

实现这一目标的最快、最简单的方法是什么？我应该在我的测试项目中创建模拟活动并为虚拟 UI 提供 xml 布局资源吗？

* * *

更新
由于我没有找到任何自动创建模拟活动的方法，我决定自己提供它。我在测试项目中创建了一个什么都不做的虚拟活动，并通过 xml 提供了一个虚拟布局。然后我编写了我的测试扩展代码`ActivityInstrumentationTestCase2`：

```
 public class LibraryTest extends ActivityInstrumentationTestCase2<MockActivity> {

        public LibraryTest(String name) {
            super(MockActivity.class);
        }

        protected void setUp() throws Exception {
            super.setUp();
        }

        public void testAMethodFromLibrary() {
            fail("Not yet implemented");
        }
    } 
```

`MockActivity`我在这个测试项目中创建的上述模拟活动在哪里。但是，似乎 Android 测试框架在启动 Activity 时遇到了问题，并且出现了以下异常：

```
 java.lang.RuntimeException: Exception during suite construction
        at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:239)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
        at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)
        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447)
        Caused by: java.lang.NullPointerException: Method name must not be null.
        at java.lang.ClassCache.findMethodByName(ClassCache.java:297)
        at java.lang.Class.getMethod(Class.java:985)
        at android.test.suitebuilder.TestMethod.getAnnotation(TestMethod.java:60)
        at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:39)
        at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:30)
        at com.android.internal.util.Predicates$OrPredicate.apply(Predicates.java:106)
        at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:42)
        at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:31)
        at com.android.internal.util.Predicates$NotPredicate.apply(Predicates.java:122)
        at android.test.suitebuilder.TestSuiteBuilder.satisfiesAllPredicates(TestSuiteBuilder.java:254)
        at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:190)
        at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:373)
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4218)
        at android.app.ActivityThread.access$3000(ActivityThread.java:125)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
        at dalvik.system.NativeStart.main(Native Method) 
```

现在我完全迷失在这里了。怎么会这么复杂？我选择了正确的方式吗？我只想在测试方法中启动一个对话框。也许框架搞砸了，因为要测试的活动不在目标项目中？

在这里的任何帮助将不胜感激。我没时间了，如果我找不到正确的方法来做到这一点，我将不得不使用我的库创建第二个项目，将模拟活动移到那里并从测试项目中进行测试。这是很多代码，因为我必须在（现在不是通用的）模拟活动中包含一个方法，才能调用我想要测试的每个库方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-03-06T13:11:50.377

使用 androidX 库，您可以使用`ActivityScenario`. 只需导入 `androidTestImplementation("androidx.test:core:1.2.0")`您的 app.gradle 文件

然后，在您的插桩测试中，使用以下命令导入`ActivityScenario`并启动活动：

```
import androidx.test.core.app.ActivityScenario

@Test
fun testActivity() {
    ActivityScenario.launch(MainActivity::class.java).onActivity { activity ->
        // do something with your activity instance
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T09:16:07.617

解决了！这是我所做的：

*   在测试项目中，我在instrumentation选项卡中删除了目标包并再次添加它指向测试项目基础包，即模拟活动所在的位置。
*   在我的测试项目中将目标库添加为 Android 库。（右键单击测试项目 -> 属性 -> Android -> 库 -> 添加目标库）。
*   在测试项目清单中添加了模拟活动。
*   为了解决我上面发布的异常，只需用这个替换测试用例构造函数：

    ```
     public LibraryTest() {
            super(MockActivity.class);
        } 
    ```

现在可以了，我可以成功启动对话框。但在我的简短研究中，我偶然发现了[Robotium](http://code.google.com/p/robotium/)。这个图书馆真是太棒了。我最初尝试做的事情并不需要它，但我发现以自动化方式测试 GUI 非常有用。`setUp`现在，我在每次通话中都重新创建了一个全新的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-25T18:01:45.787

ActivityScenario 提供 API 来启动和驱动 Activity 的生命周期状态以进行测试。它适用于任意活动，并且可以在不同版本的 Android 框架中始终如一地工作。

```
val scenario = launchActivity<MyActivity>()
scenario.onActivity { activity ->  
// do some stuff with the Activity
} 
```

带有自定义意图

```
 val intent = Intent(ApplicationProvider.getApplicationContext(), MyActivity::class.java)
    .putExtra("title", "Testing rules!")
   val scenario = launchActivity<MyActivity>(intent)
    scenario.onActivity { activity ->  
    // do some stuff with the Activity
} 
```

ActivityScenarioRule 在测试开始之前启动给定的活动，并在测试之后关闭。`getScenario()`您可以通过方法访问场景界面。您可以在测试中手动完成您的活动，它不会导致任何问题，并且在这种情况下测试后此规则不会执行任何操作。

# xpath - 根据后代的文本过滤 XPath 中的元素

> ID：13035139
> 
> 赞同：0
> 
> 时间：2012-10-23T16:30:59.453
> 
> 标签：xpath, scrapy

假设我有一个包含以下行的表，

```
...
<tr>
  <th title="Library of Quintessential Memes">LQM:</th>
</tr>
<tr>
  <th title="Library of Boring Books">LBB:</th>
</tr>
... 
```

我想选择第一个子文本以“L”开头的所有`<tr>`元素。`<th>`如何使用 XPath 选择器做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:46:45.620

使用`starts-with`功能：

```
//tr[starts-with(th[1],"L")] 
```

# c# - 用颜色填充剪切区域

> ID：13035143
> 
> 赞同：4
> 
> 时间：2012-10-23T16:31:11.743
> 
> 标签：c#, 3d, xna, hlsl, clipping

我想在 XNA 中实现一种效果，在该效果中，我通过对象移动剪切平面，并且对象逐渐消失，而剪切区域填充了自定义颜色或纹理。

这是我能够通过 HLSL 实现的：

![在此处输入图像描述](../Images/47bae83fd316ee41b628d2e72736b951.png)

这就是我真正需要的：

![在此处输入图像描述](../Images/7bba0a3d0735110aaa83e474c57c4185.png)

我认为茶壶不是一个很好的例子，因为我使用的模型总是完全关闭的。

有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:53:46.900

我认为如果你刚刚计算了一个像素是前还是后，如果像素是前，你不需要剪裁它，你只应该将像素法线设置为平面法线值，并照常计算光.. .

# string - 如何使用 awk 或其他命令来格式化用户输入的文本字符串

> ID：13035152
> 
> 赞同：0
> 
> 时间：2012-10-23T16:31:52.880
> 
> 标签：string, awk

我有如下文字：由空格分隔

> 选项卡 1 选项卡 2 选项卡 3 选项卡 4 选项卡 5

或用逗号分隔

> 选项卡1，选项卡2，选项卡3，选项卡4，选项卡5

我想将上述文本转换为以下内容：

> ('tab1','tab2','tab3','tab4','tab5')

或者

> 'tab1','tab2','tab3','tab4','tab5'

怎么做？非常感谢您的帮助！

阿莫斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:54:50.493

```
$ cat file
tab1 tab2 tab3 tab4 tab5
tab1,tab2,tab3,tab4,tab5

$ awk -v OFS="','" -v start="'" -v end="'"  '{$1=$1; print start $0 end}' file
'tab1','tab2','tab3','tab4','tab5'
'tab1,tab2,tab3,tab4,tab5'

$ awk -v OFS="','" -v start="('" -v end="')"  '{$1=$1; print start $0 end}' file
('tab1','tab2','tab3','tab4','tab5')
('tab1,tab2,tab3,tab4,tab5')

$ awk -F, -v OFS="','" -v start="('" -v end="')"  '{$1=$1; print start $0 end}' file
('tab1 tab2 tab3 tab4 tab5')
('tab1','tab2','tab3','tab4','tab5')

$ awk -F, -v OFS="','" -v start="'" -v end="'"  '{$1=$1; print start $0 end}' file
'tab1 tab2 tab3 tab4 tab5'
'tab1','tab2','tab3','tab4','tab5' 
```

# sql-server-2008 - 将 SqlGeometry 传递给 Simple.Data 存储过程

> ID：13035158
> 
> 赞同：1
> 
> 时间：2012-10-23T16:32:20.597
> 
> 标签：sql-server-2008, spatial, simple.data

我正在尝试使用 Simple.Data 和 SQL Server 2008 将 SqlGeometry 类型传递给存储过程。存储过程定义如下所示：

```
CREATE PROCEDURE [dbo].[spUpdateDamLocation]
(
  @DamID int,
  @Shape geometry
) 
```

我用于 Simple.Data 的调用如下所示：

```
var db = Simple.Data.Database.OpenConnection(dbConn);
db.spUpdateDamLocation(DamID: damLocation.DamID, Shape: damLocation.Shape); 
```

其中*dbConn*是一个连接字符串，*damLocation.DamID*是一个整数，而*damLocation.Shape*是一个 SqlGeometry 对象。

我得到的错误是：

```
System.ArgumentException: UdtTypeName property must be set for UDT parameters.
at System.Data.SqlClient.SqlParameter.Validate(Int32 index, Boolean isCommandProc)
at System.Data.SqlClient.SqlCommand.SetUpRPCParameters(_SqlRPC rpc, Int32 startCount,     Boolean inSchema, SqlParameterCollection parameters)
at System.Data.SqlClient.SqlCommand.BuildRPC(Boolean inSchema, SqlParameterCollection parameters, _SqlRPC& rpc)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
at Simple.Data.Ado.DbCommandExtensions.TryExecuteReader(IDbCommand command)
at Simple.Data.Ado.ProcedureExecutor.ExecuteReader(IDbCommand command)
at Simple.Data.Ado.ProcedureExecutor.Execute(IDictionary`2 suppliedParameters, IDbTransaction transaction)
at Simple.Data.Ado.ProcedureExecutor.Execute(IDictionary`2 suppliedParameters)
at Simple.Data.Ado.AdoAdapter.Execute(String functionName, IDictionary`2 parameters)
at Simple.Data.Database.ExecuteFunction(Object& result, ExecuteFunctionCommand command)
at Simple.Data.DataStrategy.TryInvokeFunction(String functionName, Func`1 getFunctionArguments, Object& result)
at Simple.Data.DataStrategy.TryInvokeMember(InvokeMemberBinder binder, Object[] args, Object& result)
at CallSite.Target(Closure , CallSite , Object , Int32 , SqlGeometry )
at System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid3[T0,T1,T2](CallSite site, T0 arg0, T1 arg1, T2 arg2) 
```

有没有办法在 Simple.Data 中指定参数的特定 UDT？如果我只是使用 ADO.NET，我会做这样的事情：

```
SqlParameter sqlParam = sqlCmd.Parameters.Add("@Shape", SqlDbType.UDT);
sqlParam.UdtTypeName = "geometry";
sqlParam.Value = myTypeOfSqlGeometry; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:20:10.497

Simple.Data 目前不处理用户定义的类型。几个月前，github 上的[Issue 163提出了一个类似的问题，因为遇到 UDT 导致 SqlSchemaProvider 崩溃。](https://github.com/markrendle/Simple.Data/issues/163)该错误已修复，但似乎没有进一步开发支持 SqlGeometry、SqlGeography 等。

正如您尝试的那样，存储过程似乎是最好的方法，但由于没有明确支持 UDT，也许通过调用 ToString() 将 SqlGeometry 对象作为其 WKT 文字等价物发送会起作用吗？

```
var db = Simple.Data.Database.OpenConnection(dbConn);
db.spUpdateDamLocation(DamID: damLocation.DamID, Shape: damLocation.Shape.ToString()); 
```

此外，随着 Simple.Data v1 即将到来，我建议为要在 v1.1 中添加 UDT 支持[打开一个新问题](https://github.com/markrendle/Simple.Data/issues/new)，这样您将来就不需要经历这样的麻烦。

# javascript - 如何确定 JavaScript 中的执行顺序？

> ID：13035164
> 
> 赞同：0
> 
> 时间：2012-10-23T16:32:30.713
> 
> 标签：javascript

> **可能重复：**
> [console.log 对象处于当前状态](https://stackoverflow.com/questions/7389069/console-log-object-at-current-state)

我了解基本的同步和异步行为：

```
// this block gets executed all at once the next time the js engine can run it
setTimeout(function() { 
    var snacks = "cookies";
    snacks += "and popcorn";
    console.log("goodbye world"); 
}, 0);

console.log("hello world"); // this block runs before the block above 
```

我不明白为什么这里的第一个控制台报告[]：

```
var x = [];
x.push({ a: "c" });
console.log(x); // says []
x.splice(0, 1);
console.log(x); // says [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:09:37.400

It's an issue of the console itself—it shows you the current value. The actual value is what you would expect. This behavior does not affect primitive values (strings, numbers, booleans, null, undefined) you log.

Try logging the array serialized.

```
var x = [];
x.push({ a: "c" });
console.log(JSON.stringify(x)); // says '[{"a":"c"}]'
x.splice(0, 1);
console.log(JSON.strinfigy(x)); // says '[]' 
```

And just a note about the first code example: It is not completely correct that the first block gets executed second. The `setTimeout` call is made before the `console.log` call at the end—it's only the **callback function** passed to `setTimeout` that gets executed later.

# glassfish - 如何从 EJB 中连接到 Glassfish 上的 JMX 服务？

> ID：13035165
> 
> 赞同：2
> 
> 时间：2012-10-23T16:32:30.963
> 
> 标签：glassfish, ejb, jms, jmx

我有一个消息驱动的 EJB 部署到 Glassfish 2.x 系统。当我收到一条导致异常或无法发送或使用的消息时，我想执行以下操作之一：

1.  暂停 EJB 对主题/队列的订阅
2.  关闭 EJB 本身
3.  停止使用消息，直到我给出“全部清除”或类似的东西

这一切都是为了让我可以在调用`context.setRollbackOnly()`消息后停止重复抛出异常。

我尝试通过 JMX 连接到服务器，但从[我](http://docs.oracle.com/javase/tutorial/jmx/remote/custom.html)在文档中看到的内容来看，我必须坚持：

*   用户名
*   密码
*   jmx 网址

在我的 EJB 某处。 **我不能从 Glassfish 的 EJB 中访问 JMX 服务器**而不必知道吗？

# java - 版本控制 REST API 和供应商特定的内容类型

> ID：13035169
> 
> 赞同：6
> 
> 时间：2012-10-23T16:32:43.343
> 
> 标签：java, rest, http-headers, versioning, jax-rs

我在这个线程中阅读了很多关于版本控制 REST API 的内容：[API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning)

因此，我想使用 HTTP-Accept-Header 来指示客户端要求的版本。但是我怎样才能在我的应用程序中应用它呢？因此做出了哪些改变？编组器如何知道应该使用哪个版本？我必须注册我的类型吗？

我所知道的是我必须更改`@Produces`-Annotation的内容

```
@GET
@Path("/locations")
@Produces("application/vnd.mycompany-v1+xml")
Location[] getLocations(); 
```

但是还有什么需要改变的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:34:22.993

您可以使用[`Variant`](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/core/Variant.html)JAX-RS 的机制。

```
@GET
@Path("/locations/{id}")
@Produces(value = {"application/vnd.mycompany-v2+json", // current version
                   "application/vnd.mycompany-v1+json", // old version
                   MediaType.APPLICATION_JSON})         // fallback
public Response getLocation(@PathParam("id") Integer id,
                            @Context Request request) {
    MediaType vndTypeV1 = new MediaType("application", "vnd.mycompany-v1+json");
    MediaType vndTypeV2 = new MediaType("application", "vnd.mycompany-v2+json");
    Variant variant1 = new Variant(vndTypeV1, null, null);
    Variant variant2 = new Variant(vndTypeV2, null, null);
    Variant variantJson = new Variant(MediaType.APPLICATION_JSON_TYPE, null, null);
    List<Variant> variants = new ArrayList<Variant>();
    variants.add(variant1);
    variants.add(variant2);
    variants.add(variantJson);

    Variant selectedVariant = request.selectVariant(variants);

    Location location = someBackendService.getLocation(id);

    // Manipulate location according to which variant is the selectedVariant.
    // ...

    return Response.ok("{}")
        .header(HttpHeaders.CONTENT_TYPE, selectedVariant.getMediaType())
        .build();
} 
```

另请参阅[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/gkqbq.html)。

**编辑**

没有根据所选变体自动编组实体的方法。这需要一些手工工作。例如：

```
String version = extractVersionFromVariant(selectedVariant);
if ("v1".equals(version)) {
    location.setSomeV1Propery("only in v1);
} else if ("v2".equals(version)) {
    location.setSomeV2Propery("only in v2);
}
return Response.ok(location)
               .header(HttpHeaders.CONTENT_TYPE, selectVariant.getMediaType())
               .build(); 
```

如果版本足够不同，我会为每个版本使用 JAXB 注释类。然后，每个这样的类将只包含对这个版本有效的那些属性。JAX-RS 负责将它们编组为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:48:22.757

据我所知，您不能使用 JAX-RS 根据 http 标头自动路由到不同的方法。

您可以在您的方法中读取标题（在 @context 上使用 @HeaderParam 或 HttpHeaders 请参阅[此处](https://cwiki.apache.org/WINK/jax-rs-http-headers.html)）并调用适当的版本

# ubuntu - Linux 上的 TeamCity - 有没有更简单的升级方法？

> ID：13035178
> 
> 赞同：2
> 
> 时间：2012-10-23T14:23:33.457
> 
> 标签：ubuntu, teamcity

我在 Ubuntu Linux 上安装了 TeamCity 供个人使用，我想升级它。但是，执行此操作的程序对我来说似乎有点混乱。我的理解是我应该：
- 备份所有内容
- 删除所有内容
- 从头开始​​重新安装 Teamcity
- 重新安装所有额外的驱动程序、插件等。

这对我来说太“手动”且耗时，留下一些东西的风险太高了。有没有更安全的升级方式，不涉及重新安装？

提前感谢所有贡献。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-08T05:03:49.287

我的 teamcity 服务器安装在 /opt 下，因此可以根据您的需要进行调整。

*   mv /opt/teamcity /opt/teamcity_old
*   tar -xvzf TeamCity-xxxxxxxxx.tar.gz
*   mv TeamCity /opt/teamcity
*   cp -R /opt/teamcity_old/.BuildServer/ /opt/teamcity/.BuildServer/
*   cp -R /opt/teamcity_old/conf/ /opt/teamcity/conf （检查是否要从之前的配置文件中复制更改，尤其是从 server.xml 中）
*   chown -R 团队城市。/选择/团队城市
*   服务团队城市开始
*   按照 teamcity UI 说明进行升级

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:23:38.787

如果您有**典型安装（位于 ~/.BuildServer 中的数据和自定义插件，TeamCity 安装文件中没有任何编辑）**，您可以：

*   通过 WebUI 备份服务器数据
*   停止服务器

或者这两个步骤可以替换为

*   停止服务器
*   通过maintainDB.sh备份服务器数据

然后

*   删除 TeamCity 安装目录（数据不会被删除）
*   解压 TeamCity-???.tar.gz
*   启动服务器

有关服务器升级的完整信息可以在[文档](http://confluence.jetbrains.net/display/TCD7/Upgrade)中找到。

# javascript - 动态 div 和 scrollTop

> ID：13035183
> 
> 赞同：1
> 
> 时间：2012-10-23T16:33:33.780
> 
> 标签：javascript, jquery, offset, smooth-scrolling, singlepage

我有一个单页网站：

[http://chiaroscuro.telegraphbranding.com/](http://chiaroscuro.telegraphbranding.com/)

每个部分都根据用户的窗口动态调整大小。我试图弄清楚当点击链接时如何让 jQuery 平滑滚动功能滚动到每个部分的顶部。它对于第一部分，资金领域非常有用，我只使用了一个简单的 offset().top，但其他部分不起作用，因为它们不知道滚动多远，因为窗口大小总是不同的。

我一直试图让 offset() 或 position() 工作，但没有骰子。我很感激任何建议。

这是我的 jQuery：

`

```
$(document).ready(function () {
    var slowScrollFunding = $('#funding-areas').offset().top;
    var slowScrollAbout = $('#about-us').offset().top;
    var slowScrollProjects = $('#our-projects').offset().top + 600;
    panelOpen = true;
    $('#anchor-funding-areas').click(function(event) {
        event.preventDefault();
        if(panelOpen == true) {
            $('#slide-panel-content').stop(true, true).animate({height: '0px'}, 600, function() {
                $('#panel-content-container').hide();
                $('.scrollableArea').css('z-index', '11');
                // Scroll down to 'slowScrollTop'
                $('html, body, #home-wrap').animate({scrollTop:slowScrollFunding}, 1000);
                panelOpen = false;
            });
        }else{
            $('html, body, #home-wrap').animate({scrollTop:slowScrollFunding}, 1000);
        };
    });
    $('#anchor-aboutus').click(function(event) {
        event.preventDefault();
        if(panelOpen == true) {
            $('#slide-panel-content').stop(true, true).animate({height: '0px'}, 600, function() {
                $('#panel-content-container').hide();
                $('.scrollableArea').css('z-index', '11');
                // Scroll down to 'slowScrollTop'
                $('html, body, #aboutus-wrap').animate({scrollTop:slowScrollAbout}, 1000);
                panelOpen = false;
            });
        }else{
            $('html, body, #home-wrap').animate({scrollTop:slowScrollAbout}, 1000);
        };
    });
    $('#anchor-ourprojects').click(function(event) {
        event.preventDefault();
        if(panelOpen == true) {
            $('#slide-panel-content').stop(true, true).animate({height: '0px'}, 600, function() {
                $('#panel-content-container').hide();
                $('.scrollableArea').css('z-index', '11');
                // Scroll down to 'slowScrollTop'
                $('html, body, #home-wrap').animate({scrollTop:slowScrollProjects}, 1000);
                panelOpen = false;
            });
        }else{
            $('html, body, #home-wrap').animate({scrollTop:slowScrollProjects}, 1000);
        };
    });
    $('#header-logo').add('.homelink').click(function() {
        if(panelOpen == false) {
            $('.scrollableArea').css('z-index', '0');
            $('#panel-content-container').show();
            $('#slide-panel-content').stop(true, true).animate({height: '389px'}, 600, function() {
                // Scroll down to 'slowScrollTop'
                panelOpen = true;
            });
        };
    });
}); 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:31:06.223

`$.offset`并且`$.position`可能有点不可靠，特别是如果您有很多复杂的布局正在进行 - 就像您的页面一样。我过去使用的是以下技巧：

```
var de = document.documentElement ? document.documentElement : document.body;
var elm = $('get_your_anchor_element').get(0);
var destScroll, curScroll = de.scrollTop;

/// check for the function scrollIntoView
if ( elm.scrollIntoView ) {
  /// get the browser to scrollIntoView (this wont show up yet)
  elm.scrollIntoView();
  /// however the new scrollTop is calculated
  destScroll = de.scrollTop;
  /// then set the scrollTop back to where we were
  de.scrollTop = curScroll;
  /// you now have your correct scrollTop value
  $(de).animate({scrollTop:destScroll});
}
else {
  /// most browsers support scrollIntoView so I didn't bother
  /// with a fallback, but you could just use window.location
  /// and jump to the anchor.
} 
```

以上可以发生在点击事件上。唯一需要改进的是不同的浏览器在不同的基本元素（body 或 html）上滚动。当我使用它时，我有自己的可滚动元素，所以我不需要弄清楚代理正在使用哪个元素......当我得到第二个时，我会看看我是否能找到一个很好的代码来检测区别。

以上在我测试过的所有现代浏览器（Firefox、Safari、Chrome）中都有效，但是我不需要支持 Internet Explorer，所以我不确定。

### 更新：

我不太确定您的实施发生了什么 - 页面内容可能如此繁重以至于您实际上可以看到正在发生的`.scrollIntoView()`事情 - 这从来不是我的经验，但是我没有那么多事情要做在屏幕上。考虑到这一点，我已经实现了一个简单的系统，我建议您使用并构建您需要的每个额外部分：

[http://pebbl.co.uk/stackoverflow/13035183.html](http://pebbl.co.uk/stackoverflow/13035183.html)

这样你就知道你有一个可以工作的系统，并且很容易发现是什么阻止了它的工作。关于 chiaro.js，您的实现似乎没问题 - 如果在文件的许多不同区域有点爆炸 - 但是这部分有点错误：

```
$('#anchor-aboutus').click(function() {
    event.preventDefault();
    if(panelOpen == true) {
        $('#slide-panel-content')
                      .stop(true, true)
                      .animate({height: '0px'}, 600, function() {
            $('#panel-content-container').hide();
            $('.scrollableArea').css('z-index', '11');
            elm.scrollIntoView(true)
                              .animate({scrollTop:destScroll}, 1000);
            panelOpen = false;
        });
    }else{
        elm.scrollIntoView(true).animate({scrollTop:destScroll});
    };
}); 
```

在上面的代码中，您只会得到`destScroll`if的正确值`panelOpen === true`。啊，实际上我还发现了另一个问题 - 这将解释为什么它不起作用：

```
elm.scrollIntoView(true)
  .animate({scrollTop:destScroll}, 1000); 
```

上面的代码混合了纯 JavaScript 和 jQuery，`elm`var 是一个普通的 DOM 元素（支持 scrollIntoView 方法）。但是您随后尝试将`animate`jQuery 的方法链接到混合中 - 您还应该在负责滚动条的元素上触发 animate 方法。你应该使用如下：

```
$('#anchor-aboutus').click(function(e) {
  var currentScroll, destScroll;
  e.preventDefault();
  if(panelOpen == true) {
    $('#slide-panel-content')
      .stop(true, true)
      .animate({height: '0px'}, 600, function() {
        $('#panel-content-container').hide();
        $('.scrollableArea').css('z-index', '11');
        currentScroll = de.scrollTop;
        elm.scrollIntoView(true);
        destScroll = de.scrollTop;
        de.scrollTop = currentScroll;
        $(de).animate({scrollTop:destScroll}, 1000);
        panelOpen = false;
      });
  }else{
    currentScroll = de.scrollTop;
    elm.scrollIntoView(true);
    destScroll = de.scrollTop;
    de.scrollTop = currentScroll;
    $(de).animate({scrollTop:destScroll}, 1000);
  };
}); 
```

但是，您还需要做的是确保您的`de`元素指向正确的元素 - html 或 body 取决于浏览器 - 为此您可以使用：

```
var de;

/// calculate which element is the scroller element
$('body, html').each(function(){
  if ( this.scrollHeight > this.offsetHeight ) {
    de = this;
    return false;
  }
});

alert( $(de).is('body') ) /// will be true for Chrome, false for Firefox. 
```

您将需要使用此代码代替以下代码：

```
var de = document.documentElement ? document.documentElement : document.body; 
```

更改您使用的代码的原因如下：

```
/// store the current scroll position from the de element
currentScroll = de.scrollTop;
/// get the browser to do the scrollTo calculation
elm.scrollIntoView(true);
/// store where the browser scrolled to behind the scenes
destScroll = de.scrollTop;
/// reset our scroll position to where we were before scrollIntoView()
/// if you don't reset then the animation will happen instantaneously
/// because that is what scrollIntoView does.
de.scrollTop = currentScroll;
/// wrap the normal dom element de with jquery and then animate
$(de).animate({scrollTop:destScroll}, 1000); 
```

# c# - 错误 CS0234：命名空间“System.Web”中不存在类型或命名空间名称“脚本”

> ID：13035192
> 
> 赞同：43
> 
> 时间：2012-10-23T16:34:06.807
> 
> 标签：c#, visual-studio-2010, javascriptserializer, jsonserializer

我正在尝试`JavaScriptSerializer`在我的应用程序中使用。

我最初收到

> 找不到 JavaScriptSerializer

我通过添加解决了它：

```
using System.Web.Script.Serialization; 
```

但是随后子关键字`Script`用蓝线加下划线：

> 命名空间“System.Web”中不存在类型或命名空间“脚本”（您是否缺少程序集引用？）

因此，我在项目中添加了对以下内容的引用：

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.Extensions.dll

那没有帮助。我仍然收到相同的蓝色下划线和相同的错误。引用标有感叹号黄色警告：

![在此处输入图像描述](../Images/5b2000f72f7286a0e907d7a268a83057.png)

[我在这个线程](https://stackoverflow.com/q/7000811/1088880)上尝试了建议的解决方案，但正如@user781490 指出的那样，它们对我的情况没有帮助。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-03-31T19:35:18.920

我有同样的。脚本有下划线。我添加了对 System.Web.Extensions 的引用。此后，脚本不再加下划线。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-08-27T12:22:26.963

添加 System.Web.Extensions 作为对项目的引用

[![在此处输入图像描述](../Images/91fb904e67f894a9d6635ff4e4f837d7.png)](https://i.stack.imgur.com/QQYEa.png)

对于参考。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-23T16:51:00.240

我发现[这个 MSDN 论坛帖子为您的问题提出了两种解决方案](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/55a12052-d352-4133-8fa5-52ad49bde64f)。

第一个解决方案（不推荐）：

> 找到 .Net Framework 3.5 和 2.0 文件夹
> 
> 将 System.Web.Extensions.dll 从 3.5 和 System.Web.dll 从 2.0 复制到应用程序文件夹
> 
> 添加对这两个程序集的引用
> 
> 更改引用的程序集属性，将“复制本地”设置为 true 并构建以测试您的应用程序以确保所有代码都可以工作

第二种解决方案（使用不同的类/库）：

发布该问题的用户声称，[`Uri.EscapeUriString`](http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring.aspx)以及[如何：序列化和反序列化 JSON 数据](http://msdn.microsoft.com/en-us/library/bb412179.aspx)帮助他复制了`JavaScriptSerializer`.

您也可以尝试使用[Json.Net](https://github.com/JamesNK/Newtonsoft.Json)。这是一个第三方库，非常强大。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-20T04:48:19.280

只需添加对 System.Web.Extensions 的引用即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-11T19:54:03.070

由于 JsonSerializer 在 .Net 4.0+ 中已弃用，我使用[http://www.newtonsoft.com/json](http://www.newtonsoft.com/json)来解决此问题。

NuGet-> 安装包 Newtonsoft.Json

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-16T04:18:13.853

我已经尝试过了，您可以添加参考 web.extensions（我使用 .Net 框架 4.5）

# ios - 通用应用程序中启动图像的方向问题

> ID：13035196
> 
> 赞同：0
> 
> 时间：2012-10-23T16:34:19.600
> 
> 标签：ios, uiimageview

我有一个带有 iPhone 和 iPad 启动屏幕的通用应用程序，遵循 Apple 的[启动屏幕命名约定](http://developer.apple.com/library/ios/#qa/qa1588/_index.html)。

该应用程序仅适用于横向。当我在 iPhone 上运行它时，启动画面（320 × 480 像素）会**向右**旋转 90 度，无论方向如何。

Xcode 不允许我将启动图像重命名为，`Default-LandscapeLeft.png`因为它是通用应用程序。我该怎么做才能正确显示启动图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:20:38.367

您是否在项目设置中禁用了纵向？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:32:41.590

我最终通过翻转来解决这个问题`UIImageView`：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIImage *iphoneLaunchImage = [UIImage imageNamed:@"Default"];    
    initialImage = [[UIImageView alloc] initWithImage:iphoneLaunchImage];

    //Flip it:
    initialImage.transform =  CGAffineTransformMakeScale(1, -1);

    [self.view addSubview:initialImage]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:30:42.967

也许您可以提供两个图像，一个用于 iPhone 的 Default.png 和一个用于 iPad 的 Default-LandscapeLeft.png

# c# - 多维数据结构？

> ID：13035197
> 
> 赞同：1
> 
> 时间：2012-10-23T16:34:25.690
> 
> 标签：c#, data-structures, multidimensional-array

我需要一个具有行和列的多维数据结构。

*   必须能够在数据结构中的任何位置插入元素。示例：`{A , B}`我想在和`C`之间插入。.`A``B``{A, C, B}`
*   动态：我不知道数据结构的大小。
*   另一个例子：我知道我想插入元素的 [row][col]。前任。`insert("A", 1, 5)`, 其中`A`是要插入的*元素*`1`,是*行*,`5`是*列*。

**编辑**
我希望能够像这样插入。

```
 static void Main(string[] args)
    {
        Program p = new Program();
        List<List<string()>> list = new List<List<string>()>();
        list.Insert("RAWR", 1, 2); // RAWR is the element to insert, 1 is the row, 2 is the col.
        list.Insert("Hello", 3, 5);
        for (int i = 0; i < list.Count; i++)
        {
            Console.WriteLine(list[i]);
        }
        Console.ReadKey();
    } 
```

当然这不起作用，因为列表不支持此功能。我知道这段代码很糟糕，但我只想了解我想要完成的事情。

所以从某种意义上说，我会有一个用户来选择将元素插入到哪个 ROW 和 COL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:38:20.297

我认为列表列表应该可以正常工作：

```
IList<IList<T>> multiDim = new List<IList<T>>(); 
```

您可以像这样插入新行：

```
multiDim.Insert(atRow, new List<T>()); 
```

或在特定行中插入新元素：

```
multiDim[row].Insert(atColumn, myElement); 
```

请注意，您需要在列表中有足够的元素才能调用`Insert`; 否则，您将得到一个超出范围的异常。解决这个问题的最简单方法是编写一个小的实用程序方法，在可以插入之前添加空项：

```
private static Expand<T>(IList<T> list, int index) {
    while (list.Count < index) {
        list.Add(default(T));
    }
} 
```

重写你的程序如下：

```
Expand(list, 1);
list.Insert(1, "HELLO");
Expand(list, 5);
list.Insert(5, "RAWR"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:54:46.010

也许[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)可以与元组一起使用，因为它是关键：

```
Dictionary<Tuple<int, int>, string> dict = new Dictionary<Tuple<int, int>, string>();
dict.Add(new Tuple<int, int>(1, 5), "A"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:56:31.263

[`SortedDictionary<int, T>`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)如果您的键是整数或任何有序的字符串，则似乎非常适合。只需将项目按键放入字典即可。

```
var sparseArray = new SortedDictionary<int, string>();
sparseArray.Add(1, "notepad.exe");
sparseArray.Add(5, "paint.exe");
sparseArray.Add(3, "paint.exe");
sparseArray.Add(2, "wordpad.exe"); 
```

# javascript - 在 Underscore 的 _.uniq 中使用迭代器函数

> ID：13035198
> 
> 赞同：20
> 
> 时间：2012-10-23T16:34:27.790
> 
> 标签：javascript, underscore.js

我已经查看了这个 Stack 问题，[“Removing duplicate objects with Underscore for Javascript”](https://stackoverflow.com/questions/9923890/removing-duplicate-objects-with-underscore-for-javascript)，这正是我想要做的，但没有一个例子有效。事实上，我无法让任何迭代器函数与 _.uniq 一起使用。

```
_.uniq([1, 2, 1, 3, 1, 4]);
> [1, 2, 3, 4]
_.uniq([1, 2, 1, 3, 1, 4], false, function(a){ return a===4;});
> [1, 2, 3, 4]
_.uniq([1, 2, 1, 3, 1, 4], true, function(a){ return a===4;});
> [1, 2, 1, 3, 1, 4]
_.uniq([1, 2, 1, 3, 1, 4], false, function(a){ return false;});
> [1, 2, 3, 4]
_.uniq([1, 2, 1, 3, 1, 4], false, function(a){ return true;});
> [1, 2, 3, 4]

var people = [ { name: 'John', age: 20 }, { name: 'Mary', age: 31 }, { name: 'Kevin', age: 20 }]; 
_.uniq(people, false, function(p){ return p.age; });

> [ { age: 20, name: "John" }, 
    { age: 31, name: "Mary" },
    { age: 20, name: "Kevin" } ] 
```

我会做：

```
_.uniq(_.map(people, function(p){ return p.age; }));
> [20, 31] 
```

但它只返回映射值，而不是原始对象。

任何帮助表示赞赏。我正在使用下划线版本 1.1.7

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-07-18T07:20:38.553

我有同样的问题。这是因为 _.uniq()**返回**一个新的缩减数组，所以你必须将它分配给一个变量。因此，通过这个小小的修正，它必须起作用。

> var people = [ { name: 'John', age: 20 }, { name: 'Mary', age: 31 }, { name: 'Kevin', age: 20 }];
> 
> people = _.uniq(people, false, function(p){ return p.age; });
> 
> [ {年龄：20，姓名：“约翰”}，{年龄：31，姓名：“玛丽”}]

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-23T16:42:50.787

看起来 _.uniq 的比较函数是在 1.2.0 中引入的

来自[变更日志](http://underscorejs.org/#changelog)：

> _.uniq 现在可以传递一个可选的迭代器，以确定对象应该被认为是唯一的标准。

# xml - 下载而不是显示（渲染）生成的 XML

> ID：13035201
> 
> 赞同：1
> 
> 时间：2012-10-23T16:34:32.173
> 
> 标签：xml, asp.net-mvc, filestreamresult

在我的 ASP.Net MVC 应用程序的控制器中，我序列化了一个类，并试图提供内容以供立即下载。

到目前为止，我的控制器返回了一个`FileStreamResult`

```
 public FileStreamResult Create(MyViewMode vm)
    {
        var xml= _mySerializer.SerializeToXml(vm);

        var ms = new MemoryStream(Encoding.UTF8.GetBytes(xml));
        return new FileStreamResult(ms, "application/xml");
    } 
```

这有效，但是它在浏览器中输出 XML。

例如，有没有办法让它以 MyXml.xml 的形式下载文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:47:08.807

这似乎做你想做的事：

```
public class HomeController : Controller
{
    public ActionResult MyXml()
    {
        var obj = new MyClass {MyString = "Hello", MyInt = 42, MyBool = true};
        var ser = new XmlSerializer(typeof(MyClass));
        var stream = new MemoryStream();
        ser.Serialize(stream, obj);
        stream.Position = 0;
        return File(stream, "application/xml", "MyXml.xml");
    }

    public class MyClass
    {
        public string MyString { get; set; }
        public int MyInt { get; set; }
        public bool MyBool { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:39:25.297

您可以使用 XmlDocument() 并将 XML 写入其中，然后使用 Save 属性吗？

# html - 在高度上扩展页面内容或在内容下显示白色背景

> ID：13035207
> 
> 赞同：0
> 
> 时间：2012-10-23T16:34:55.527
> 
> 标签：html, css

我正在对背景图像使用[backstretch](http://srobbin.com/jquery-plugins/backstretch/)，这样我就不会遇到分辨率问题。图像是一个纹理（它曾经有一个白色区域，应该是内容部分的背景颜色 - 这里我没有遇到这样的问题，但还有其他问题）。现在中间的内容部分（包括页眉、页脚）应该有白色背景。

**问题**

如果内容不够高，我会在底部看到纹理，但它应该是白色的。这是页面底部的屏幕截图：

![在此处输入图像描述](../Images/f72c2d53914ba28c619063500965c49b.png)

白色部分应垂直延伸。所以要么内容部分必须增加高度（根据窗口高度），要么我需要一个粘性页脚解决方案。我尝试了一些方法，但没有一个对我有用（例如[How do I force a DIV block to extend to a bottom even if it has no content? 中的](https://stackoverflow.com/questions/147528/how-do-i-force-a-div-block-to-extend-to-the-bottom-of-a-page-even-if-it-has-no-c)提示，或者[来自 Ryan Fait 的粘性页脚解决方案](http://ryanfait.com/sticky-footer/)）。

这是我的页面的精简版。这是没有 jQuery 部分的[JSFiddle 。](http://jsfiddle.net/AbdwN/)

**HTML**

```
<div id="header">
    <p>Introduction</p>
</div>
<div id="main-wrap">
    <div id="column1">
        <p>Menu</p>
    </div>
    <div id="column2">
        <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
    </div>
    <div class="clearer"></div>
</div>
<div id="footer">
    <p>Some Links</p>
</div> 
```

**CSS**

```
body {
    background-color: black;
}

#header {
    background-color: white;
    width: 380px;
    margin: 0 auto;
}

#main-wrap {
    background-color: white;
    width: 380px;
    margin: 0 auto;
}

#column1{
    float: left;
    width: 60px;
}

#column2{
    float: left;
    padding-left: 20px;
    width: 300px;
}

#footer {
    background-color: white;
    width: 380px;
    margin: 0 auto;
}

.clearer{
    float: none;
    clear: both;
} 
```

我能想象的唯一可行的方法是使用 Javascript 计算页面底部的间隔 div ...该解决方案应该适用于所有主要浏览器（IE7-IE9、FF、Chrome、Opera、Safari）。

**当前的 JS 解决方案**

```
<script language="javascript" type="text/javascript">
    <!--
    $(document).ready(function(){
        $.backstretch("img/background.jpg");

        var headerheight = $('#header').height();
        var column1height = $('#column1').height();
        var column2height = $('#column2').height();
        var columnheight = Math.max(column1height, column2height);
        var footerheight = $('#footer').height();
        var contentheight = headerheight + columnheight + footerheight;
        var innerheight = $(window).height();
        // calculate height of content to fill out full height of window
        var height = innerheight - headerheight - footerheight;
        // only if the the content has not enough height
        if (contentheight < innerheight) {
            $('#main-wrap').css('min-height', Math.max(height, columnheight));
        }
    });
    -->
</script> 
```

CSS 解决方案会更好，但我没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:38:43.360

您可以让 jQuery 计算最小高度：

```
$(function() {
  $("the_content").css("min-height", Math.max(window.innerHeight, parseInt($("the_content").css("height"))));
}) 
```

当然你可以证明window.innerHeight是合理的，例如如果你的容器有填充（它被添加到宽度上）

# python - 将扭曲矩阵远程调用绑定到 ttk 按钮会导致远程调用在客户端启动时运行

> ID：13035209
> 
> 赞同：0
> 
> 时间：2012-10-23T16:35:09.840
> 
> 标签：python, button, twisted, snmp, ttk

我使用python和twisted编写了一个snmp管理程序，其中一部分需要客户端上的一些按钮绑定到远程snmp set方法，这是由透视代理处理的。

```
for item in devicevars[current+" buttons"]:
    ttk.Label(buttonframe, text=item + ":").grid(column=1, row=i2, sticky=(E))
    ttk.Button(buttonframe,width = 3,textvariable=guivars["%s %s" %(current, 
                                item)],command=remoteButton(current, item)).grid(column=2, row=i2, sticky=(W))
    i2 = i2+1

def remoteButton(dname, value):

    rbutton= pbfactory.getRootObject()
    rbutton.addCallback(lambda object: object.callRemote("SNMP", dname, value))
    rbutton.addErrback(lambda reason: 'error: '+str(reason.value)) 
```

问题是此代码会导致远程方法在客户端启动后立即触发。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:15:00.220

（因此也是）中的`command`选项是一个可调用对象，当单击按钮时将调用该对象。`Tkinter``ttk`

通过传递，`command=remoteButton(...)`您`remoteButton`立即调用，然后将其结果作为`command`选项传递。

相反，您想要做的是传递一个`command`选项，该选项在运行时将调用`remoteButton`.

这样做的方法是：

```
ttk.Button(buttonframe,width = 3,
           textvariable=guivars["%s %s" %(current, item)],
           command=lambda: remoteButton(current, item)) 
```

换句话说，`lambda:`在它前面加上a，你会得到一个调用它的函数，而不是仅仅调用它。

# javascript - 代码在 chrome 和 firefox 中工作，但在 IE9 中失败

> ID：13035219
> 
> 赞同：0
> 
> 时间：2012-10-23T16:35:42.317
> 
> 标签：javascript, internet-explorer-9

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script language="javascript" type="text/javascript">
function abc()
{
ansArray = ['a'];   
document.write('<input type = "button" value = "a">');
document.write('<input type = "button" value = "b">');
var myButton = document.getElementsByTagName("input");

myButton[0].onclick = function() {
    if(ansArray[0] == 'a')
        myButton[0].style.backgroundColor = "green";
    else
        myButton[0].style.backgroundColor = "red";
}

myButton[1].onclick = function() {
    if(ansArray[0] == 'b')
        myButton[1].style.backgroundColor = "green";
    else
        myButton[1].style.backgroundColor = "red";
}
}
</script>
</head>

<body onload="abc()">
</body>
</html> 
```

此代码段是在单击事件时更改两个按钮的颜色，在 chrome 和 firefox 中工作正常，但 onclick 功能在 IE9 中不起作用。请帮助...在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:10:03.983

尝试调用函数

```
(function abc(){
    // code here
})(); 
```

也可以`;`在每个函数表达式之后使用，即`myButton[0].onclick = function() {...};`.

[在这里工作](http://jsfiddle.net/nsgkG/1/)。

# python - 使用 Python 与 MAC OSX (Lion) 的 TUN\TAP 接口

> ID：13035220
> 
> 赞同：7
> 
> 时间：2012-10-23T16:35:53.457
> 
> 标签：python, networking, driver, tap, tun

我找到了以下 tun\tap 示例程序，但无法使其工作：

[http://www.secdev.org/projects/tuntap_udp/files/tunproxy.py](http://www.secdev.org/projects/tuntap_udp/files/tunproxy.py)

我修改了以下几行：

```
f = os.open("/dev/tun0", os.O_RDWR)
ifs = ioctl(f, TUNSETIFF, struct.pack("16sH", "toto%d", TUNMODE))
ifname = ifs[:16].strip("\x00") 
```

修改了第一行以反映驾驶员的真实位置。它原本是

```
f = os.open("/dev/net/tun", os.O_RDWR) 
```

运行时出现以下错误：

```
 sudo ./tuntap.py -s 9000
 Password:
 Traceback (most recent call last):
   File "./tuntap.py", line 65, in <module>
     ifs = ioctl(f, TUNSETIFF, struct.pack("16sH", "toto%d", TUNMODE))
 IOError: [Errno 25] Inappropriate ioctl for device 
```

我正在使用从[http://tuntaposx.sourceforge.net/download.xhtml安装的最新 tun\tap 驱动程序](http://tuntaposx.sourceforge.net/download.xhtml)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T15:46:15.927

OSX tun/tap 驱动程序似乎有点不同。Linux 示例动态分配了一个 tun 接口，这在 OSX 中不起作用，至少以不同的方式。

我剥离了代码以创建一个基本示例，说明如何使用自选 tun 设备在 OSX 上使用 tun，将每个数据包打印到控制台。我添加了[Scapy](http://www.secdev.org/projects/scapy/doc/)作为漂亮打印的依赖项，但如果需要，您可以将其替换为原始数据包转储：

```
import os, sys
from select import select
from scapy.all import IP

f = os.open("/dev/tun12", os.O_RDWR)
try:
    while 1:
        r = select([f],[],[])[0][0]
        if r == f:
            packet = os.read(f, 4000)
            # print len(packet), packet
            ip = IP(packet)
            ip.show()
except KeyboardInterrupt:
    print "Stopped by user." 
```

您要么必须以 root 身份运行它，要么执行 a`sudo chown your_username /dev/tun12`以被允许打开设备。

要将其配置为点对点接口，请键入：

```
$ sudo ifconfig tun12 10.12.0.2 10.12.0.1 
```

请注意，该`tun12`界面仅在`/dev/tun12`打开时可用，即在程序运行时。如果你中断程序，你的tun界面就会消失，下次运行程序时需要重新配置。

如果您现在 ping 您的端点，您的数据包将被打印到控制台：

```
$ ping 10.12.0.1 
```

Ping 本身将打印请求超时，因为没有隧道端点响应您的 ping 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-28T17:54:54.547

所以关于“没有这样的文件或目录”的错误：

`f = os.open("/dev/tun12", os.O_RDWR)`

这对我有用：

`brew install Caskroom/cask/tuntap`

# actionscript-3 - 将 .fla 和 as3 文件迁移到新的 Flex 项目

> ID：13035223
> 
> 赞同：0
> 
> 时间：2012-10-23T16:36:12.523
> 
> 标签：actionscript-3, flash-builder, flash-cs5, flex4.5

我的任务是将我的 Flash 应用程序与另一个 Flex 应用程序集成。我必须将我的 Flash Pro 应用程序迁移到 Flash Builder 才能开始工作。我在互联网上进行了搜索，并且尝试了所有方法，但我无法让 Flash Pro 应用程序由 Flash Builder 编译和运行。

我的 Flash Pro 应用程序包含一个 .fla 文件，其中只有一个框架和几个按钮以及一个要绘制的画布。该应用程序的功能由（很多）as3 文件组成。.fla 文件调用 Main.as 文件，该文件实例化了应用程序工作所需的所有类。

好吧，我尝试发布我的 .fla 的 .swc 文件并将其添加到新的 flex 项目中，但我无法让这个应用程序正常运行。Main 类没有执行，即使我将所有必要的 .as 文件导入到我的 flex 项目中。

关于如何成功进行此迁移的任何想法？

非常感谢你们！

**编辑：**

我以这种方式将 Main.as 放在 .mxml 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()">
    <mx:Script>
        <![CDATA[
            //imports and variables declaration
            function init():void
            {
                //my main code here
            }
            //other methods of the main class
        ]]>
    </mx:Script>
</mx:Application> 
```

并将其余的 .as 文件放在 flash pro 项目中。它运行正常，但我必须添加一个 .swc（为 .fla 文件的任何符号生成的任何 .swc）才能识别一些 fl 类，如 CheckBox、ColorPicker 等。此外，似乎我必须再次创建用户界面，幸运的是它并不难，但我真的很想知道是否有办法将 .fla UI 转换为 Flash Builder 中的 UI。

我现在正在尝试将一些自定义按钮从 flash pro 迁移到 flash builder，这给...带来了很大的痛苦……这些按钮有图标而不是标签，它们有 3 种状态。这些状态由另一个 .as 文件控制。如何将此类按钮迁移到 flash builder？这是来自我的类​​ CustomButton.as 的 .as 代码：

```
package {

    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class CustomButton extends MovieClip {

        public var button_states_mc:MovieClip;

        private var _selected:Boolean = false;

        public function CustomButton() {

            button_states_mc.stop();

            this.addEventListener(MouseEvent.ROLL_OVER, mouseHandler);
            this.addEventListener(MouseEvent.ROLL_OUT, mouseHandler);

        }

        public function set selected(v:Boolean):void {

            _selected = v;

            if(_selected) {
                button_states_mc.gotoAndStop("selected");
            } else {
                button_states_mc.gotoAndStop("up");
            }

        }

        public function get selected():Boolean {
            return _selected;
        }

        private function mouseHandler(e:MouseEvent):void {

            if(!_selected && !e.buttonDown) {

                if(e.type == MouseEvent.ROLL_OVER) {
                    button_states_mc.gotoAndStop("over");
                } else if(e.type == MouseEvent.ROLL_OUT) {
                    button_states_mc.gotoAndStop("up");
                }

            }

        }

    }

} 
```

非常感谢，伙计们！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:39:36.843

您可以在 Flash Builder 中创建“Flash Professional 项目”。

# asp.net - 如何将 sql 表行数存储在字符串变量中？

> ID：13035224
> 
> 赞同：-3
> 
> 时间：2012-10-23T16:36:12.877
> 
> 标签：asp.net, sql-server

我正在尝试存储查询字符串的结果

```
q = "select count(*) from test" (asp.net c#) 
```

在字符串变量中，以便我可以在按钮单击时在标签上显示计数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T16:39:42.847

```
 int RecordCount;
    RecordCount = Convert.ToInt32(cmd.ExecuteScalar());
   string myString =  RecordCount.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:01:02.373

ExecuteScalar的值[可以是 null](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)，请确保检查 null

```
int RecordCount = 0;
object retVal = cmd.ExecuteScalar();
if(retVal != null)
    RecordCount = Convert.ToInt32(cmd.ExecuteScalar()); 
```

# java - 如何使用属性中的 Spring @Value 来设置注释属性

> ID：13035225
> 
> 赞同：0
> 
> 时间：2012-10-23T16:36:16.323
> 
> 标签：java, spring

我正在尝试使用 Spring 在注释中设置属性`@Value`，但我得到了`Type mismatch: cannot convert from Value to String`. 这是我尝试过的：

```
@Table(name = "myTable", catalog = @Value("${database.myCatalog}") ) 
```

是否可以？如果是，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:08:48.047

我认为您对 Spring 如何使用该注释有点困惑。

据我所知，注释的唯一方法只能设置[在 field 或 method/constructor parameters](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html)。

此外，为了让 Spring 解决它，POJO 必须是 Spring 托管的 bean。这意味着它必须在要解析的 Spring (Web)ApplicationContext 实现中定义。

您的问题似乎是在注释一个 JPA 实体，它不是 Spring bean，而是您正在使用的 JPA 实现使用的类（例如 Hibernate）。

# unix - Unix 标准输出制表符分隔

> ID：13035226
> 
> 赞同：0
> 
> 时间：2012-10-23T16:36:18.573
> 
> 标签：unix, tabs, standards, output

有谁知道可以在另一个命令的输出之间插入特殊字符（如制表符）的 unix 命令，`ls` 这样输出看起来像

a tab b tab c 而不是
a
b
c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:50:06.180

这取决于命令，没有什么通用的。试试这个将换行符转换为制表符：

```
ls | tr "\n" "\t" 
```

# jquery - 我可以在使用 jquery.cookie 时设置选项 raw: true

> ID：13035229
> 
> 赞同：0
> 
> 时间：2012-10-23T16:36:30.177
> 
> 标签：jquery, cookies, jquery-cookie

我想创建一个 cookie：

*   名称：drm
*   值：drmStatus=预期

我正在使用这个问题的答案中的代码 - [Jquery Cookie 插件 - 多个值？](https://stackoverflow.com/questions/6417140/jquery-cookie-plugin-multiple-values)创建 cookie

```
 var obj = { drmStatus: 'Expected' }; 
 $.cookie('drm', $.param(obj), { path: '/', raw: true }) 
```

然而，这会生成一个 cookie

*   名称：drm
*   值：drmStatus%3DExpected

原因是来自[https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js的这个片段](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)

```
config.raw ? value : encodeURIComponent(value) 
```

这是使用配置对象中的“原始”值来决定是否对该值进行编码。它似乎忽略了选项对象中传递的“原始”值的值。

所以我的问题是，我可以在使用 jquery.cookie 时设置选项 raw: true 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:46:06.627

我认为您的问题不在 jquery.cookie 中，而是在`$.param`脚本的一部分中。请参阅[此 JSFiddle](http://jsfiddle.net/v963V/)。raw 选项设置正确，cookie 具有您想要的值。

这应该有效：

```
var obj = { drmStatus: 'Expected' }; 
$.cookie('drm', decodeURIComponent($.param(obj)), { path: '/', raw: true }) 
```

编辑：我更新了[小提琴](http://jsfiddle.net/v963V/1/)以使用您的新版本。解决方案是：

```
var obj = { drmStatus: 'Expected' }; 
$.cookie.raw = true;
$.cookie('drm', $.param(obj), { path: '/' }); 
```

# android - 添加和替换片段

> ID：13035232
> 
> 赞同：0
> 
> 时间：2012-10-23T16:36:40.957
> 
> 标签：android, android-fragments

我发现了一些有趣的片段。我创建了活动并添加了两个片段：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.main, new Fragment1());
ft.add(R.id.main, new Fragment2());
ft.commit(); 
```

然后我添加了带有代码的按钮：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.replace(R.id.main, new Fragment1());
ft.commit(); 
```

如果我按第一次 - Fragment1 正在破坏，如果我第二次按 - Fragment2 正在破坏。为什么会这样？我认为如果我要更换碎片，那么应该清理容器“主”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T10:59:14.517

看看[文档](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)

“这本质上与为所有当前添加的片段调用 remove(Fragment) 相同，这些片段使用相同的 containerViewId 添加，然后使用此处给出的相同参数添加(int, Fragment, String)。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T23:56:44.827

首先，我不会将两个片段添加到同一个容器中。如果您想使用同一个容器，我的建议是在第三个容器中使用 2 个容器

如果您*需要*将两个片段添加到同一个容器中，您可以通过保留它们的对象（或以某种方式引用它们）来手动摆脱它们。

例如，这使用完全限定`FragmentTransaction.add()`以便以后引用片段

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.main, new Fragment1(), "frag1");
ft.add(R.id.main, new Fragment2(), "frag2");
ft.commit();

// Later on
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
// Manually remove fragments
ft.remove(getSupportFragmentManager().findFragmentByTag("frag1"));
ft.remove(getSupportFragmentManager().findFragmentByTag("frag2"));
ft.add(R.id.main, new Fragment1(), "newFrag1");
ft.commit(); 
```

据我了解，依靠替换来摆脱同一个容器内的多个片段的问题在于，它将替换“当前显示”的不是整个容器（尽管，阅读[FragmentTransaction 上的文档](http://developer.android.com/reference/android/app/FragmentTransaction.html) - 它确实使它听起来就像你应该能够做你正在做的事情）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T10:32:59.290

假设片段 f1 和 f2 如果你替换 f1 上的 f2 片段然后 f1 片段 onpause ondestroyview ondestroy ondetach

和 f2 oncreate oncreateview onactivitycreated onstart onresume

叫

如果你在 f1 上添加 f2 然后 f1 onpause 和 f2 oncreate oncreateview onactivitycreated onstart onresume

被称为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:50:06.287

Try to use addToBackStack(null) after the replace:

```
ft.replace(R.id.main, new Fragment1());
ft.addToBackStack(null)
ft.commit(); 
```

# php - PHPExcel：我需要在一次提交时创建两个工作簿

> ID：13035236
> 
> 赞同：1
> 
> 时间：2012-10-23T16:36:52.793
> 
> 标签：php, phpexcel

> **可能重复：**
> [如何使用一个 HTTP 请求下载多个文件？](https://stackoverflow.com/questions/1041542/how-to-download-multiple-files-with-one-http-request)

我有两个需要创建的 excel 工作簿，我已经在同一个 php 页面上对它们进行了编码，并通过注释掉另一个来单独测试它们，然后他们加载所需的工作簿然后编辑然后保存它们没有问题。

一键单击即可创建操作。但我现在遇到的问题是如何一键创建两个单独的工作簿。我试图将它们一个接一个地分开，也从同一个文件中分开，但它只是创建了第一个而不是第二个，或者它破坏了第一个。

除了必须下载按钮供用户选择之外，最好的解决方法是什么。

我在同一个 php 页面上的结构将类似于：

```
 $objPHPExcel = new PHPExcel();
  $objPHPExcel = PHPExcel_IOFactory::load(??????);
  $objPHPExcel->setActiveSheetIndex(0);
  //add several of 
  $objPHPExcel->setActiveSheetIndex(0)->setCellValue(???);
  $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
  $objWriter->save('php://output');

  //-- the second workbook
  $objPHPExcel2 = new PHPExcel();
  $objPHPExcel2 = PHPExcel_IOFactory::load(??????);
  $objPHPExcel2->setActiveSheetIndex(0);
  //add several of 
  $objPHPExcel2->setActiveSheetIndex(0)->setCellValue(???);
  $objWriter2 = PHPExcel_IOFactory::createWriter($objPHPExcel2, 'Excel2007');
  $objWriter2->save('php://output');

  exit; 
```

# windows-phone-7 - WP7 BackgroundAudioAgent：从 Icecast 获取元数据

> ID：13035239
> 
> 赞同：1
> 
> 时间：2012-10-23T16:37:00.850
> 
> 标签：windows-phone-7, metadata, icecast, background-audio

我有一个从 Icecast 服务器流式传输广播电台的 Windows Phone 项目。我正在使用后台音频代理来播放流。

Icecast 流提供 Track Title - Artist name 作为元数据。

有什么方法可以从音频播放器中获取元数据吗？

现在我每 10 秒从 PHP 脚本中获取元数据。如果我直接从 Icecast 获得它，那就太好了。

在我的 iPhone 应用程序中，我可以看到元数据。我在 iPhone 应用程序中使用视频播放器。

告诉我它是否可以完成。

如果不能，请告诉我是否可以逐字节读取流并将其发送给音频代理。

谢谢。

# sql - 我可以使用 DataMapper 按子记录计数对记录进行排序（不使用原始 SQL）吗？

> ID：13035242
> 
> 赞同：0
> 
> 时间：2012-10-23T16:37:07.603
> 
> 标签：sql, datamapper

我想做的事情对我来说感觉很基本，但是我没有找到一种方法来使用 DataMapper 而不求助于原始 SQL。这看起来像：

```
select u.id, u.name, count(p.id) as post_count
from posts p
inner join users u on p.user_id = u.id
group by p.user_id
order by post_count desc; 
```

上述查询的目的是向我显示所有用户，按每个用户拥有的帖子数排序。我使用 DataMapper 发现的最接近的是`aggregate`，它不会给我返回资源对象。我想要*的*是某种方式来生成**一个**查询并取回标准 DM 对象。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-30T03:12:16.200

假设你有关系

```
has_n, :posts 
```

你应该能够做到

```
User.get(id).posts.count 
```

或者

```
User.first(:some_id => id).posts.count 
```

或者

```
u = User.get(1)
u.posts.count 
```

您还可以链接条件

```
User.get(1).posts.all(:date.gt => '2012-10-01') 
```

在此处查看范围和链接[http://datamapper.org/docs/find.html](http://datamapper.org/docs/find.html)

最后添加排序

```
User.get(1).posts.all(:order => [:date.desc]) 
```

# android - 市场更新后唤醒应用程序

> ID：13035244
> 
> 赞同：1
> 
> 时间：2012-10-23T16:37:11.987
> 
> 标签：android, google-play, upgrade

我希望我的应用在使用市场（游戏商店）更新后唤醒。我怎样才能做到这一点？

通过唤醒，我的意思是 Application.onCreate() 被执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:49:11.063

正如 Commonsware 所提到的， ACTION_PACKAGE_REPLACED 可以解决问题。您只需要将您的包名称与意图的数据进行比较，否则您会发现所有被替换的包。

在较新的 API（12 以上）中，有 ACTION_MY_PACKAGE_REPLACED 仅发送到被替换的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T16:39:53.467

原则上，有一个清单注册的接收器`ACTION_PACKAGE_REPLACED`应该有这个效果。Android 应该必须终止您的进程才能进行更新，从而创建一个新的进程来将此广播传送给您。

话虽如此，我还没有尝试过。

# c++ - 有记录代码执行的工具吗？

> ID：13035245
> 
> 赞同：2
> 
> 时间：2012-10-23T16:37:18.323
> 
> 标签：c++

假设我有一个由积分变量上的几个“基本”算法组成的程序，例如：

```
if(a<b)
   a += c; 
```

有没有一种工具可以让我在运行时自动记录对不同变量所做的所有更改？

例如，它会在这种情况下显示在日志文件中：

```
 "condition passed because 5=a < b=10
     a += 10; because c=10" 
```

或一些等价物。

我知道我可以手动记录每个操作，但这太复杂了。有什么工具可以让我做这样的事情吗？只要不是完全手动的，我就不关心重构/重新编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:21:28.977

您可以编写自己的整数类，相应地重载运算符（使用自动日志记录）。如果该类还提供隐式转换（从 int 的构造函数和到 int 的转换运算符），那么您“只”需要更改变量和参数的类型以自动记录*值*。但是，您只能记录地址（或从它派生的东西，如 var20），而不是名称。在#define 的帮助下，您可以轻松地在原始整数（无日志记录）或带日志记录的整数类之间切换。

要将变量的名称也放入日志记录中，要么必须使用宏重写运算符，例如

```
if (LESS(a,b))
    INC(a,c) 
```

或者有一个解析器自动将你的代码转换成这样的东西。但我不知道有任何现有工具提供此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:51:13.287

我很难想象像这样记录程序的完整执行会很有用。一个简单的`std::cout << "hello, world!\n";`会产生大量无用的日志。

你实际上需要做什么？如果您想调试代码，您可能应该使用调试器在程序运行时检查程序，而不是使用 printf-debugging-gone-horribly-wrong 策略。如果您想要一种方法来描述完整的执行以供以后检查/操作，您可以确保程序的行为具有确定性并只保存程序输入。

正确的解决方案取决于实际问题，但完整的执行记录不可能是解决任何问题的正确解决方案。

# visual-c++ - 如何为cmake指定编译器？

> ID：13035246
> 
> 赞同：1
> 
> 时间：2012-10-23T16:37:18.740
> 
> 标签：visual-c++, gcc, cmake

在我的 Windows 系统上，我有 gcc 和 Visual C++。

默认情况下，cmake 选择 V​​isual C++。

如何强制它使用 gcc？

如何指定编译器路径？

在我尝试过的 CMakeLists.txt 文件中：

```
SET(CMAKE_C_COMPILER gcc)
SET(CMAKE_CXX_COMPILER g++) 
```

没有结果。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:00:05.980

您可以显式指定生成器：

```
cmake -G"MinGW Makefiles" <path_to_your_project> 
```

如果 gcc 在你的路径中，CMake 会自动选择它。

# javascript - 加密的 html 是否会缓存？

> ID：13035247
> 
> 赞同：-1
> 
> 时间：2012-10-23T16:37:22.690
> 
> 标签：javascript, caching

为了保护我的 css 文件，我使用 java 脚本加密了 css 链接。这很酷，但我怀疑当我使用带有 name.css 的正常指定 url 时，我的 css 文件会缓存，现在加密的 css 链接是否会缓存?

```
<Script Language='Javascript'>
document.write(unescape('3%73%22%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A2%2F%3E%09%0A'));
</Script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:41:05.733

因为这只会导致一个 CSS 元素被插入到文档中（或者我猜是这样），然后导致浏览器像往常一样下载外部文件，所以所有常用的缓存规则都适用。

# sql-server-2008 - SET TRANSACTION ISOLATION LEVEL 存储过程的范围

> ID：13035250
> 
> 赞同：0
> 
> 时间：2012-10-23T16:37:33.660
> 
> 标签：sql-server-2008, stored-procedures

我正在创建一个存储过程，我不希望通过脚本进行任何锁定。我确信我需要在脚本的开头声明“SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED”。但我不确定如何在声明之后开始。Microsoft 的一个示例显示以“BEGIN TRANSACTION”开头并以“END TRANSACTION”结尾。有人在“SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED”之后开始时没有任何 BEGIN 和 END 语句。请建议我使用“SET TRANSACTION ISOLATION LEVEL”语句来实现我的目标的正确方法。

[http://msdn.microsoft.com/en-us/library/aa259216(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa259216(v=sql.80).aspx)

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
GO
BEGIN TRANSACTION
SELECT * FROM publishers
SELECT * FROM authors
...
COMMIT TRANSACTION 
```

[SQL Server：如何为整个存储过程设置默认隔离级别？](https://stackoverflow.com/questions/7975936/sql-server-how-to-set-default-isolation-level-for-the-entire-stored-procedure)

```
BEGIN
SET TRANSACTION ISOLATION LEVEL READ COMMITTED
 -- will a transaction level for a atomic transaction created by SQL Server for this statement be READ COMMITTED 
SELECT * FROM T
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-11T21:09:18.790

两种说法都可以

[存储过程中的事务范围，来自 MSDN](https://docs.microsoft.com/en-us/sql/t-sql/statements/set-transaction-isolation-level-transact-sql)

> 如果在存储过程或触发器中发出 SET TRANSACTION ISOLATION LEVEL，则当对象返回控制权时，隔离级别将重置为调用对象时有效的级别。例如，如果在批处理中设置 REPEATABLE READ，然后批处理调用将隔离级别设置为 SERIALIZABLE 的存储过程，则当存储过程将控制权返回给批处理时，隔离级别设置将恢复为 REPEATABLE READ。

# liferay - 是否可以设置多个开发人员远程编辑同一个 Liferay 门户？

> ID：13035255
> 
> 赞同：0
> 
> 时间：2012-10-23T16:37:47.957
> 
> 标签：liferay, liferay-6, staging

我是 Liferay Portal 的新手，正在使用 6.1 CE。我正在尝试找到一种方法来允许多个开发人员同时对单个 Liferay 门户进行更改。我知道我可以设置一个 Staging 环境并允许所有开发人员登录 Live 站点并在该实例的 Staging 环境中进行开发。我还知道我可以设置远程登台 - 允许开发人员在单独的登台环境（在不同的 Liferay 实例上）进行更改，然后将更改远程发布到 Live 站点。我还知道多个开发人员可以分别登录到该单个远程登台环境。

我想知道的是：我可以将多个 Liferay 实例设置为远程登台环境（每个开发人员一个），它们都发布到同一个 Live Liferay 门户实例（与所有登台环境分开）吗？如果是这样，在一个远程登台环境中所做的更改然后发布到 Live 是否会反映在其他远程登台环境中？例如，如果页面在暂存环境中发生更改。A 并发布到 Live 中，是否会在 Staging Env 中看到更改。B，或者它会忘记改变吗？

我希望这个问题/场景是有道理的。如果需要进一步澄清，请告诉我，以便我添加细节。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:03:49.703

从 Liferay 6.1 开始，您可以使用[页面变体](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/lp-6-1-ugen03-staging-and-workflow-0)- 内容的有效分支，因此您可以使用多个并行版本。这似乎与您所描述的最接近，尽管它可能不完全匹配。

您还可以手动导出/导入页面和文章并移动它们，但我感觉您正在寻找一种更像分布式版本控制系统的自动化 - 我怀疑您会在任何地方找到它。消除冲突的一定数量的手动工作仍然存在 - 并且界面通常有点毛茸茸。

# forms - 如果在 IE 9 上访问 Gmail 上的表单链接，文件上传不起作用

> ID：13035261
> 
> 赞同：4
> 
> 时间：2012-10-23T16:37:59.877
> 
> 标签：forms, file-upload, internet-explorer-9, gmail

我的应用程序向用户发送电子邮件，其中包含指向应用程序页面的链接，用户可以在该页面上为业务需求上传文件。如果电子邮件发送到 gmail id，并且当用户在 IE9 中打开电子邮件并单击链接时，它会导航到应用程序页面，当他尝试上传文件时，它会失败。IE9 开发者控制台上没有显示错误消息。

1.  上传在除 IE9 之外的所有浏览器中都能正常工作。
2.  如果用户通过右键单击打开链接 -> 在新选项卡中打开，则上传工作正常
3.  如果用户直接点击链接（默认情况下 Gmail 将在 IE9 的新标签页中打开），则上传失败。

我在这两种情况下都验证了 URL，没有任何区别。我尝试使用链接的目标属性（新的、空白的等），但没有任何帮助。

将链接复制粘贴到新标签中即可。但没有点击链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T03:20:12.120

这是一个 IE9 问题 - 显然您可以通过在 Gmail 中将 IE9 设置为 IE8 模式来解决它（很好啊！）

无论如何，这里有一篇很好的文章（并链接到显示问题的演示项目）：

[https://github.com/blueimp/jQuery-File-Upload/issues/457](https://github.com/blueimp/jQuery-File-Upload/issues/457)

> 如果包含的文档已通过 Gmail 链接打开，则IE9 ~~（可能还有其他 IE 版本）~~不允许以编程方式提交 HTML 表单（无论是通过 form.submit() 还是通过 button.click()）。

# c++ - C++ 中从 1 到 100,000 的所有回文数

> ID：13035262
> 
> 赞同：-1
> 
> 时间：2012-10-23T16:38:12.907
> 
> 标签：c++, palindrome

我试图弄清楚这段代码有什么问题，它应该打印从 1 到 100,000 的所有回文数字（我知道它有很多数字）。我是新来的，我认为这可能是一个简单的解决方法，但我无法弄清楚，谢谢。

当我运行程序时，它只是给出：“100000 不是回文............ ..................................................... …………”

（它应该打印数字，如：111、121、131、141 ......直到 100000）

```
#include<stdio.h>
#include<conio.h>

int main()
{
  int n=0, reverse = 0, temp=0, i=0;
  n=100000;
  for(i=1; i<n; i++)
    {
       temp = i;
       while( temp != 0 )
         {
           reverse = reverse * 10;
           reverse = reverse + temp % 10;
           temp = temp/10;
         }

       if( i == reverse )
         printf("%d", n);
       else
         printf(".");
    }
  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:53:59.583

您的代码中有 2 个明显的缺陷：

1.  您在每次迭代之前都没有清除`reverse`，因此先前迭代的值正在累积和破坏算法。
2.  在`printf`你应该输出当前检查的数字，而不是`n`。

另一种现代 C++ 时尚风格暗示：

1.  尽可能在本地声明变量。你可以在循环中声明它们，说真的！例如`temp`，and`reverse`应在 之前声明`while`，`i`应在语句内部`for()`声明。
2.  使用`*=`, `-=`,`+=`代替`=`:

    ```
    reverse *= 10;
    reverse += temp % 10;
    temp /= 10; 
    ```

3.  使用`std::cout`而不是“老好 C”`printf()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:44:41.440

在调试中，再次反转数字并断言反转两次会使您回到相同的数字。

```
int reverse = doReverse( temp );
assert( temp == doReverse( reverse )); 
```

你会发现你的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:08:40.843

```
#include <iostream>
#include <algorithm>
#include <sstream>

using namespace std;

int main(int argc, char* argv[] )
{
    string lStr;

    for (int lIter = 1; lIter <= 100000; ++lIter ) {
    stringstream lStrS;
    lStrS << lIter;
    lStr = lStrS.str();

    string lRevStr = lStr;
    reverse( lRevStr.begin(), lRevStr.end() );

    if ( lRevStr == lStr ) {
        cout << lStr << endl;
    }
 } 
```

}

这是一种方法的示例。

# android - 创建文件在android中不起作用

> ID：13035264
> 
> 赞同：1
> 
> 时间：2012-10-23T16:38:18.723
> 
> 标签：android, file, android-activity, android-manifest, creation

我使用以下代码：

```
 String outputFile = "/mnt/sdcard/mydir/myApp.apk"
 File f = new File(outputFile);

 if(!f.exists())
       f.createNewFile();

 // *** other code *** 
```

但是当应用程序到达该行时

```
 f.createNewFile(); 
```

什么都没有出现。其他代码行没有执行，也没有发生错误。

我执行此代码的活动以这种方式在 manfiest 中配置：

```
 <activity android:theme="@android:style/Theme.NoTitleBar" 
        android:name=".ACT_ImpostazioniAvanzate"  android:screenOrientation="landscape">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="content" />
            <data android:scheme="file" />
            <data android:mimeType="application/vnd.android.package-archive" />
        </intent-filter>
    </activity> 
```

该活动不是主要活动，在清单中我获得以下Waring：

```
 "Exported activity does not require permission" 
```

这是什么意思？可能与我的创建文件问题有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:50:29.257

您的警告与创建文件的问题无关。

您没有设置适当的权限来写入设备上的外部存储。

添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

到`<activity`标签上方的清单

如果您想了解有关清单中警告的更多信息，请在[此处查看此答案](https://stackoverflow.com/questions/11333988/warning-exported-activity-does-not-require-permission)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:51:18.693

注意 /mnt/sdcard/ 可能不适用于所有设备，您应该使用`Environment.getExternalStorageDirectory()`并检查清单中的权限，如评论中所述

# java - javax.faces.FacesException：表达式错误：命名对象：找不到播放器

> ID：13035271
> 
> 赞同：10
> 
> 时间：2012-10-23T16:38:41.597
> 
> 标签：java, jsf, jsf-2, primefaces

我正在尝试从 Primefaces 学习[**pickList**](http://www.primefaces.org/showcase/ui/picklist.jsf)。我有 jsf 文件 PickListBean.java 和[Player.java](http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/domain/?r=3692)。

当我运行项目时，我得到错误为`http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/domain/?r=3692`.

堆栈跟踪如下。

```
javax.faces.FacesException: Expression Error: Named Object: player not found.
    at com.sun.faces.application.ApplicationImpl.createConverter(ApplicationImpl.java:1338)
    at com.sun.faces.facelets.tag.jsf.ValueHolderRule$LiteralConverterMetadata.applyMetadata(ValueHolderRule.java:85)
    at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
    at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:409)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:159)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680) 
```

当我运行项目时，我得到错误为`http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/domain/?r=3692`.

知道我在这里缺少什么吗？

* * *

## 编辑 1

我还下载[了 PlayerConverter.java](http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/view/PlayerConverter.java?r=3692)。还是一样的错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T16:54:24.203

这基本上说明`Converter`找不到 ID 为“player”的 JSF。它被引用为`<p:pickList converter="player">`.

使用给定的代码，您需要`PlayerConverter`在`faces-config.xml`.

```
<converter>
    <converter-id>player</converter-id>
    <converter-class>org.primefaces.examples.view.PlayerConverter</converter-class>
</converter> 
```

或者，您可以编辑`PlayerConverter`类以添加注释

```
@FacesConverter("player") 
```

在课堂上。

# typescript - TypeScript：IE 中未定义控制台

> ID：13035274
> 
> 赞同：3
> 
> 时间：2012-10-23T16:38:58.803
> 
> 标签：typescript

对于 JavaScript，我发现以下 Internet Explorer 解决方案能够在不按 F12 的情况下处理 console.log。 [“控制台”是 Internet Explorer 的未定义错误](https://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer)

但是，当我在 Typescript 中使用以下行时，我无法编译。

```
if (!console) console = {log: function() {}}; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:42:58.303

您收到一个错误，因为您编写的对象文字没有与常规的所有相同的成员`console`。最简单的解决方法是将类型断言为`any`：

```
if (!console) console = <any>{log: function() {}}; 
```

显然，您不需要取消`console`除`log`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T22:22:45.530

我发现处理这个问题的最简单方法是抽象控制台......

```
class Logger {
    static log(message: string) {
        if (typeof window.console !== 'undefined') {
            window.console.log(message);
        }
    }
}

Logger.log("Works with the console and doesn't ever error"); 
```

这也开辟了其他可能性，例如使用消息窗口处理无控制台场景，或将错误记录到您的服务器或您可能想要在记录到控制台之外执行的任何其他操作 - 它还可以更轻松地运行您的代码在无窗口的情况下！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:52:48.240

看看console.js。它处理所有浏览器中的控制台登录，等等。为了使用 typescript 进行编译，您需要在 console.d.ts 模块定义中定义 console.log，然后在使用 console.log 的任何地方引用 d.ts 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T05:23:30.660

在全局上下文中，唯一对未定义变量有效的运算符是`typeof`. 所以我推荐以下代码片段：

```
if (typeof console == "undefined" || typeof console.log == "undefined") 
    console = <any>{ log: function () { } }; 
```

# jsf - 更改 Primefaces 图表中的颜色

> ID：13035278
> 
> 赞同：0
> 
> 时间：2012-10-23T16:39:11.120
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试从此[链接](http://www.primefaces.org/showcase-labs/ui/barChart.jsf)实现 Primefaces 图表。

我设法创建了这个例子：

```
<div id="datachart" style="margin: 0 auto; width:850px; height:400px; position:relative">
    <h:form prependId="false">  
        <p:growl id="growl" showDetail="true" />  

        <p:barChart id="basic" value="#{bean.categoryModel}"   
                    title="Accounts and Groups" min="0" max="#{DashboardController.chartMaxSize}" style="height:400px"
                    shadow="true" barMargin="40" barPadding="90" seriesColors="4D94FF, 1975FF" 
                    yaxisLabel="Size" zoom="true"> 
            <p:ajax event="itemSelect" listener="#{bean.itemSelect}" update="growl" />
        </p:barChart>
    </h:form>
</div> 
```

我创建了这个 css 来更改图表颜色标签：

```
<style type="text/css">
    .jqplot-title{
        color:#FFFFFF;
    }
    .jqplot-xaxis-label{
        color:#FFFFFF; 
    }
    .jqplot-yaxis-label{
        color:#FFFFFF;
    }
    .jqplot-xaxis-tick{
        color:#FFFFFF;
    }
    jqplot-yaxis-tick{
        color:#FFFFFF;
    }
</style> 
```

但由于某种原因，颜色没有改变。你能帮我找到我缺少的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:41:38.310

尝试使用`<f:facet name="last">`

```
<f:facet name="last">
    your css styles goes here
    Or even better drop them into .css file and include it here
</f:facet> 
```

如需进一步参考，请查看此

[可定制的资源排序](http://blog.primefaces.org/?p=1433)

和

[PrimeFaces 中的资源排序](http://www.mkyong.com/jsf2/primefaces/resource-ordering-in-primefaces/)

# html - 我应该使用它来显示事件 -css 或表格的详细信息

> ID：13035280
> 
> 赞同：0
> 
> 时间：2012-10-23T16:39:14.093
> 
> 标签：html, css, layout

在我的网络应用程序中，我有许多用户创建的事件实例。如果用户请求查看特定事件的详细信息，则显示为

```
Created By      : damon
Name            : myhomework
Creation date   : 24 October, 2012
Duraion         : 2 hours ,40 minutes
Status          : PENDING
Perc.completion : 40% (piechart image) 
```

那么，这是创建此布局的正确方法。是`<table>`这样做的方法吗？或者我应该使用 css 吗？我试图用 css 做到这一点，但似乎在使用 float 时我把它搞砸了。

欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:45:31.723

我建议使用定义列表`<dl>`标签，因为它可以完美地用于键值对。为了让你的布局直接，你可以使用这个：

**CSS**

```
dl {
    width:          400px;
}

dt {
    display:        inline-block;
    width:          100px;
    margin:         0;
    padding:        0;
}

dd {
    display:        inline-block;
    width:          290px;
    margin:         0;
    padding:        0;
}

dd:before {
    content:        ':';
    padding:        0 10px 0 0;
} 
```

**HTML**

```
<dl>
    <dt>Item 1</dt>
    <dd>Text 1</dd>

    <dt>Item 2</dt>
    <dd>Text 2</dd>

    <dt>Item 3</dt>
    <dd>Text 3</dd>
</dl> 
```

**演示**

[先试后买](http://jsfiddle.net/Swvnm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:45:43.927

我会在这里使用`DL`（定义列表）。像这样的东西：

HTML

```
<dl>
    <dt>Created By:</dt>
    <dd>damon</dd>

    <dt>Name:</dt>
    <dd>myhomework</dd>

    <dt>Creation date:</dt>
    <dd>24 October, 2012</dd>

    <dt>Duraion:</dt>
    <dd>2 hours ,40 minutes</dd>

    <dt>Status:</dt>
    <dd>PENDING</dd>

    <dt>Perc.completion:</dt>
    <dd>40% (piechart image)</dd>
</dl> 
```

CSS

```
dt { clear:left; float:left; width:8em; }
dd { float:left; } 
```

尽管您当然可以证明表格也是合适的。

# javascript - JQuery .click 不像我期望的那样工作。为什么？

> ID：13035281
> 
> 赞同：2
> 
> 时间：2012-10-23T16:39:17.517
> 
> 标签：javascript, jquery, jquery-mobile

为什么此功能不适用于 jquery-mobile？

当我点击任何元素时，它会触发警报（“cell Nº”+60）

```
function insertOnClick(){
    for (j = 0; j < 6; j++) {
        for (i = 1; i < 11; i++) {
            n = 10 * j + i;
            el = "#num" + n;
            $(el).click(function() {
                alert("cell nº"+n);
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T16:41:30.907

正如所写的那样，n 将始终是您分配该变量的最后一个数字-它将是执行单击处理程序时的值，而不是您定义函数的值。

## 使用闭包

你需要使用闭包来实现你想要的：

```
function insertOnClick(){
    for (j = 0; j < 6; j++) {
        for (i = 1; i < 11; i++) {
            n = 10 * j + i;

            (function(number) {

                el = "#num" + number;
                $(el).click(function() {
                    alert("cell nº"+number);
                });

            }(n));
        }
    }
} 
```

## 更好的主意

不过，使用单个处理程序会更好：

```
$('someselector').click(function(e) {
    var number = $(this)[0].id.replace('num', '');
    alert("cell nº" + number);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:59:12.140

```
$('[id^="num"]').click(function() {
    alert($(this).attr('id').slice(3))
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:02:16.043

由于您使用的是 jQuery，因此没有理由进行任何循环，也没有理由为每个元素添加点击事件。给每个元素一个公共类，并在 jQuery 1.7+ 中使用。

```
$(document).on("click", ".commonClass", function() {
    var elem = $(this);
    alert(elem.prop("id"));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:43:43.663

```
function insertOnClick(){
    for (j = 0; j < 6; j++) {
        for (i = 1; i < 11; i++) {
            n = 10 * j + i;
            el = "#num" + n;
            $(el).click(function(n) {
                return function(){
                alert("cell nº"+n);
                }
            }());
        }
    }
} 
```

# c++ - 链接从 wxDialog 继承的类时出错

> ID：13035285
> 
> 赞同：0
> 
> 时间：2012-10-23T16:39:24.560
> 
> 标签：c++, wxwidgets

我写了一个继承自 wxDialog 的类。我目前在 Ubuntu 12.04 上，使用 Code::Blocks 和 gcc 4.6。在我将此类包含在项目中之前，我的应用程序工作正常：调试和发布配置都会给出相同的错误。这是代码：

头文件

```
#ifndef EBCDIALOG_H
#define EBCDIALOG_H

#include <wx/dialog.h>
#include <wx/sizer.h>
#include <wx/textctrl.h>
#include <wx/button.h>

class EBCDialog : public wxDialog
{
    public:

        EBCDialog(wxWindow* parent, wxWindowID id, const wxString& title );
        ~EBCDialog();

        void OnOK(wxCommandEvent& event);
    private:

       DECLARE_CLASS(EBCDialog)
        DECLARE_EVENT_TABLE()
};

#endif //EBCDIALOG_H 
```

cp文件：

```
#include "EBCDialog.h"

EBCDialog::EBCDialog(wxWindow* parent, wxWindowID id, const wxString& title ) : wxDialog(parent, id, title, wxDefaultPosition, wxDefaultSize, wxDEFAULT_DIALOG_STYLE | wxRESIZE_BORDER)
{
    wxBoxSizer* topSizer = new wxBoxSizer(wxVERTICAL);
    // Create text ctrl with minimal size 100x60
    topSizer->Add(new wxTextCtrl(this, wxID_ANY, wxT("test"), wxDefaultPosition, wxSize(100,60)),
        1,  // make vertically stretchable
        wxEXPAND|   // make horizontally stretchable
        wxALL,      // and make border all around
        10);        // set border width to 10

    wxBoxSizer* buttonSizer = new wxBoxSizer( wxHORIZONTAL );
    buttonSizer->Add(new wxButton(this, wxID_OK, _T("OK")),
        0,  // make horizontally unstretchable
        wxALL,  // make border all around: implicit top alignment
        10);   // set border width to 10

    buttonSizer->Add(new wxButton(this, wxID_CANCEL, _T("Cancel")),
        0,  // make horizontally unstretchable
        wxALL,  // make border all around (implicit top alignment)
        10);   // set border width to 10

    topSizer->Add(buttonSizer,
    0,  // make vertically unstretchable
    wxALIGN_CENTER ); // no border and centre horizontally

    SetSizer( topSizer ); // use the sizer for layout
    topSizer->Fit( this );

    // fit the dialog to the contents
    topSizer->SetSizeHints( this ); // set hints to honor min size
}

EBCDialog::~EBCDialog()
{

}

void EBCDialog::OnOK(wxCommandEvent& event)
{

}

BEGIN_EVENT_TABLE(EBCDialog, wxDialog)
    EVT_BUTTON(wxID_OK, EBCDialog::OnOK)
END_EVENT_TABLE() 
```

这是代码::块日志：

> g++ -Wall -I/usr/lib/i386-linux-gnu/wx/include/gtk2-unicode-debug-2.8 -I/usr/include/wx-2.8 -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES -D_ *WXDEBUG* _ -D_ *WXGTK*_ -pthread -O2 -I"/home/angelo/CodeBlocks/事件总线配置器/包括"-I"/home/angelo/CodeBlocks/事件总线配置器/位图"-c"/home/angelo/CodeBlocks/事件总线配置器/src/EBCDialog.cpp" -o obj/src/EBCDialog.o g++ -o "bin/事件总线配置器" obj/src/EBCApp.o obj/src/EBCDialog.o obj/src/EBCFrame.o obj/src /EBCList.o obj/src/HandlerFile.o -L/usr/lib/i386-linux-gnu -pthread -Wl,-Bsymbolic-functions -Wl,-z,relro -L/usr/lib/i386-linux- GNU -lwx_gtk2ud_richtext-2.8 -lwx_gtk2ud_aui-2.8 -lwx_gtk2ud_xrc-2.8 -lwx_gtk2ud_qa-2.8 -lwx_gtk2ud_html-2.8 -lwx_gtk2ud_adv-2.8 -lwx_gtk2ud_core-2.8 -lwx_baseud_xml-2.8 -lwx_baseud_net-2.8 -lwx_baseud-2.8 -s OBJ / SRC / EBCDialog.o :(.rodata._ZTV9EBCDialog[用于 EBCDialog 的 vtable]+0x8)：未定义对 `EBCDialog::GetClassInfo() const' 的引用 collect2：ld 返回 1 个退出状态进程以状态 1 终止（0 分 2 秒）1 个错误，0 个警告

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:17:50.270

**从您的代码中删除 DECLARE_CLASS(EBCDialog)**，基类 wxDialog 已经为您完成了。

从[文档](http://docs.wxwidgets.org/2.8/wx_rttimacros.html)中：

> wxWidgets 使用它自己的 RTTI（“运行时类型识别”）系统，该系统早于当前标准 C++ RTTI，因此出于向后兼容性的原因而保留，但也因为它允许标准 RTTI 不直接支持的一些事情（例如创建一个类从它的名字）。
> 
> 标准的 C++ RTTI 可以毫无问题地用于用户代码**中，通常您不需要使用本节中的函数和宏，除非您正在考虑修改或添加任何 wxWidgets 类。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:18:24.370

我认为您不需要 DECLARE_CLASS。它是传统 RTTI 系统的一部分

[http://docs.wxwidgets.org/2.8/wx_rttimacros.html](http://docs.wxwidgets.org/2.8/wx_rttimacros.html)

尝试删除该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:09:13.500

规则很简单：如果你使用`DECLARE_CLASS()`，你也必须使用`IMPLEMENT_CLASS()`。因此，您需要按照其他回复的建议删除前者，或者添加后者。

如果您不需要动态创建此类的对象（即从名称中），则不需要它，因此您确实应该删除它。但是，最好*了解*您在做什么，而不是仅仅复制示例。

# r - ggplot2中的叠加条形图

> ID：13035295
> 
> 赞同：14
> 
> 时间：2012-10-23T16:40:00.957
> 
> 标签：r, ggplot2

我正在尝试覆盖条形图`ggplot2`

我当前的代码生成一个条形图，但它们彼此堆叠。我不想要这个，我希望它们重叠，这样我就可以看到每个条形高度的差异。

代码：

```
library(ggplot2)
library(reshape)

x = c("Band 1", "Band 2", "Band 3")
y1 = c("1","2","3")
y2 = c("2","3","4")

to_plot <- data.frame(x=x,y1=y1,y2=y2)
melted<-melt(to_plot, id="x")

print(ggplot(melted,aes(x=x,y=value,fill=variable)) + geom_bar(stat="identity", alpha=.3)) 
```

堆叠输出：

![在此处输入图像描述](../Images/26dfd4dc9ee4b7f8ac075fe70bddc07c.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-23T16:48:37.897

尝试添加`position = "identity"`到您的`geom_bar`通话中。您会注意到`?geom_bar`默认位置是`stack`您在此处看到的行为。

当我这样做时，我得到：

```
print(ggplot(melted,aes(x=x,y=value,fill=variable)) + 
        geom_bar(stat="identity",position = "identity", alpha=.3)) 
```

![在此处输入图像描述](../Images/5e93e65d0061dd610e290e0d6570395b.png)

而且，如下所述，可能`position = "dodge"`是一个更好的选择：

![在此处输入图像描述](../Images/5c729a8ac20c40c402c5718806b3198b.png)

# ruby-on-rails - 使用本地化、formtastic 和 activeadmin 时不显示日期输入的值

> ID：13035304
> 
> 赞同：0
> 
> 时间：2012-10-23T16:40:27.910
> 
> 标签：ruby-on-rails, activeadmin, uidatepicker

我有一个日期类型为日期的模型。

我将 ui_datepicker-rails3 与 activeadmin 一起使用，在我的表单中我有：

```
form do |f|
    f.inputs do
        f.input :date, :as => :ui_date_picker
    end
end 
```

日期的格式是`dd/mm/yy`。

问题是，在我发送表单后，如果它有错误并且控制器呈现`new`视图，那么输入的值是可以的，但我在输入字段中看不到日期。例如：

我填写日期`20/08/2012`并发送表格。当它渲染回来时，输入是

```
<input class="datepicker ui-date-picker hasDatepicker" id="progress_date" name="progress[date]" type="text" value="28/08/2012"> 
```

但是输入没有在屏幕上显示值。

当我发送它时，`yy-mm-dd`它工作正常。

会是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:21:26.960

ActiveAdmin 定义了一个自定义 DatepickerInput，它将`datepicker`类添加到日期字段。

具有此类的对象`'yy-mm-dd'`由 AA 格式化。

为避免这种情况，将此代码放入初始化程序中：

```
module ActiveAdmin
  module Inputs
    class DatepickerInput < ::Formtastic::Inputs::StringInput
      def input_html_options
        super
      end
    end
  end
end 
```

它将类删除`datepicker`到日期输入并将它们保留为`ui-date-picker hasDatepicker`.

# filesystemwatcher - 在 DataOntap 上使用 FileSystemWatcher

> ID：13035313
> 
> 赞同：3
> 
> 时间：2012-10-23T16:41:06.933
> 
> 标签：filesystemwatcher, readdirectorychangesw, netapp

我有一个项目可以监视当前由 Windows Server 计算机托管的网络共享上的文件创建/删除活动，但我正在考虑将文件移动到运行 DataOntap 的 NetApp 机器上。他们的 API 文档说他们支持 ReadDirectoryChangesW，这是 FileSystemWatcher 在幕后使用的，但我担心它可能不是一个完整的实现。有什么我应该注意的陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T09:12:41.847

我不具体了解 NetApp 和 DataOntap，但请参阅另一个问题及其各种答案：

[FileSystemWatcher 和 Windows 7](https://stackoverflow.com/questions/3250343/filesystemwatcher-and-windows-7)

似乎人们在使用 FileSystemWatcher 时遇到了很多麻烦，尤其是在与网络共享一起使用时。

# java - ClientBundles 和资源：它们是什么以及为什么使用它们？他们解决了什么问题？

> ID：13035318
> 
> 赞同：1
> 
> 时间：2012-10-23T16:41:32.913
> 
> 标签：java, gwt, clientbundle, cssresource

我也是全新的 GWT，无论我读了多少关于[s的](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)[官方文档，`ClientBundle`](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)我似乎都无法理解它们是什么以及它们做什么。`CssResource`, `DataResource`, `TextResource`,`GWTCreateResource`等也是如此。

我*认为*它们作为静态文件（如 CSS、JavaScript 或一些静态数据源，如 JSON 文件）的某种性能优化存在。显然，它们也是“可注入的”，如果它们应该是静态 CSS/JS/JSON/等，这对我来说没有意义。文件...

所以我问：有人可以给我一个脚踏实地的，简单的，国王的英语，简单的解释这些对象是什么，以及它们是如何使用的？我是否可以大胆地要求提供一个实际注入的工作示例（上面链接中的代码片段谈到了注入，但从未真正展示过它！）？这些如何映射到实际文件（`my-styles.css`,`dataTable-static-data.json`等）？事实上，我认为这是我最大的心理障碍：将这些 Java 对象与它们所代表的静态文件联系起来。

还有，为什么要捆绑？跨其他项目的可重用性？也许这就是可注射性发挥作用的地方？我很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:57:08.217

他们解决了很多问题：

1.  你的 CSS 是编译安全的。如果您使用不存在的 css 类，编译将显示哪个类不存在

2.  您的 CSS 是名称安全的。如果您有两个使用相同 css-classname 的不同小部件，编译器会确保您的小部件“A”类不会损坏小部件“B”css

3.  您将图像自动编译为 data-url 或 sprite 图像。这将减少 http 调用的数量。

看看目标：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)

# java - 在android中使用wifi的类似蓝牙的行为

> ID：13035319
> 
> 赞同：0
> 
> 时间：2012-10-23T16:41:35.657
> 
> 标签：java, android, android-wifi

是否可以使用 Wifi 适配器在 android 中模仿类似蓝牙的行为。我正在尝试使用 Wifi 来设置客户端服务器应用程序。我在 android 2.3.7 中创建了一个系统服务。我希望这项服务能够自动识别服务器。就像在蓝牙中一样，一种天真的方法应该是搜索可用设备，然后在特定端口（例如 8080）发送连接请求并建立连接。这可以使用wifi完成吗？简而言之，我希望两个不同设备上的系统服务使用 wifi 相互通信，即，一个设备作为 ad-hoc wifi 服务器工作，另一个作为客户端连接到它。这听起来可行吗？基本点是在模拟器上没有蓝牙的情况下模拟类似蓝牙的行为。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:09:22.970

不是 android 专家，但我记得它不支持 ad-hoc 连接，这似乎是你想做的。

相关答案：[如何将android wifi连接到adhoc wifi？](https://stackoverflow.com/questions/5100928/how-to-connect-android-wifi-to-adhoc-wifi)

# c# - 使用反射订阅 Prism EventAggregator 事件

> ID：13035320
> 
> 赞同：1
> 
> 时间：2012-10-23T16:41:44.780
> 
> 标签：c#, silverlight, reflection, prism, eventaggregator

我想使用反射订阅 EventAggregator 事件，因为我试图在运行时动态连接 Prism 模块之间的事件订阅。（我使用的是 Silverlight 5、Prism 和 MEF）。

我想要实现的是调用`_eventAggregator.GetEvent<MyType>().Subscribe(MyAction)`我的一个模块，但我被困在调用`_eventAggregator.GetEvent<MyType>()`. 我怎样才能从那里开始打电话`Subscribe(MyAction)`？

假设我的 Event 课程是`public class TestEvent : CompositePresentationEvent<string> { }`. 我在编译时不知道这一点，但我在运行时知道类型。

这是我到目前为止所得到的：

```
 Type myType = assembly.GetType(typeName); //get the type from string

 MethodInfo method = typeof(IEventAggregator).GetMethod("GetEvent");
 MethodInfo generic = method.MakeGenericMethod(myType);//get the EventAggregator.GetEvent<myType>() method

 generic.Invoke(_eventAggregator, null);//invoke _eventAggregator.GetEvent<myType>(); 
```

我真的很感激一个正确方向的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:54:30.443

您可以这样做，而不必担心使用动态调用的事件的“类型”。

```
Type eventType = assembly.GetType(typeName);
MethodInfo method = typeof(IEventAggregator).GetMethod("GetEvent");
MethodInfo generic = method.MakeGenericMethod(eventType);
dynamic subscribeEvent = generic.Invoke(this.eventAggregator, null);

if(subscribeEvent != null)
{
    subscribeEvent.Subscribe(new Action<object>(GenericEventHandler));
}

//.... Somewhere else in the class

private void GenericEventHandler(object t)
{
} 
```

现在你真的不需要知道“事件类型”是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:46:05.550

可以这么简单吗：

```
var myEvent = generic.Invoke(eventAggregator, null) as CompositePresentationEvent<string>;
if (myEvent != null) 
    myEvent.Subscribe(MyAction); 
```

假设您知道有效负载类型。

就个人而言，我将在模块外部使用的聚合事件视为该模块的 API，我尝试将它们放置在其他模块可以编译的某种共享程序集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:43:31.167

我在这里找到了有效载荷类型未知的情况的答案：

[http://compositewpf.codeplex.com/workitem/6244](http://compositewpf.codeplex.com/workitem/6244)

> 1.  添加 EventAggregator.GetEvent(Type eventType) 获取不带泛型参数的事件
>     
>     
> 2.  使用反射构建 Action 类型的表达式
>     
>     
> 3.  使用反射订阅事件（即调用订阅方法）并将 Expression.Compile 作为参数传递。
>     
>     
> 
> 如果 KeepAlive 为真，则此方法有效。

# powershell - Invoke-WebRequest - 属性显示为具有值，但以某种方式访问 时为空

> ID：13035321
> 
> 赞同：4
> 
> 时间：2012-10-23T16:41:45.903
> 
> 标签：powershell

我正在使用以下命令从简单的 linux 打印设备上的 Web 管理界面上的 html 输入字段中提取值。

```
$get = Invoke-WebRequest -Uri ("http://" + $station + ":8080/cgi-bin/admin?page=pedi.sh&hash=" + $hash) -Method "GET 
```

其中一个输入字段是一个复选框，我需要能够检查它是否被选中。在这种情况下，复选框被命名为“协议”并被选中。

```
$get.ParsedHtml.getElementsByName("Protocol") | Select checked 
```

> 检查
> 真

如果我尝试使用以下命令获取值，它不会返回任何内容。

```
($get.ParsedHtml.getElementsByName("Protocol")).checked 
```

但如果我这样做，我会得到价值......

```
($get.ParsedHtml.getElementsByName("Protocol") | Select checked).checked 
```

我想知道为什么我会看到这种行为，这正常吗？

我正在运行 Windows 8 RTM、PowerShell 3.0。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:03:42.710

我转载了你的问题。要获取选中属性（或任何其他属性）的值，我必须强制返回对象为数组，如下所示：

```
@($get.ParsedHtml.getElementsByName("Protocol"))[0].checked 
```

或者，由于 Powershell 3.0 的新属性枚举功能：

```
@($get.ParsedHtml.getElementsByName("Protocol")).checked 
```

因此，它似乎只在通过枚举从 getElementsByName 返回的集合请求值时提供值。也许有人可以插话并解释这种行为。我猜这与使用 com 对象的事实有关吗？

# php - 如何确定每个州的中心邮政编码？

> ID：13035322
> 
> 赞同：5
> 
> 时间：2012-10-23T16:41:48.467
> 
> 标签：php, mysql

我有一个邮政编码 MySQL 数据库，其中包含每个邮政编码的 lat/lng。如何找到每个州的中心邮政编码？我将在 PHP 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:32:58.700

假设您希望将每个邮政编码的坐标视为每个州内的同等加权点，并找到最接近有效“质心”的邮政编码，您可以通过以下组合直接在 MySQL 中完成：

*   [如何计算地理中心](http://www.geomidpoint.com/calculation.html)；

*   谷歌关于使用 PHP、MySQL 和谷歌地图创建商店定位器的文章中的使用[MySQL 查找位置部分；](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)和

*   获得[分组最小值/最大值](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)的一般技术。

完整的查询是：

```
-- the closest ZIP code
SELECT state, z.zip_code
FROM   zip_codes z JOIN (

  -- the distance between the "centre of mass" and the closest ZIP code
  SELECT   state, c.lat, c.lon
           MIN(ACOS(
             COS(c.lat) * COS(RADIANS(z.lat)) * COS(RADIANS(z.lon) - c.lon)
           + SIN(c.lat) * SIN(RADIANS(z.lat))
           )) min
  FROM     zip_codes z JOIN (

    -- the "centre of mass" of each state
    SELECT   state, 
             ATAN2(
               SUM(SIN(RADIANS(lat))) / COUNT(*),
               SQRT(
                 POW(SUM(COS(RADIANS(lat)) * SIN(RADIANS(lon))) / COUNT(*), 2)
               + POW(SUM(COS(RADIANS(lat)) * COS(RADIANS(lon))) / COUNT(*), 2)
               )
             ) AS lat,
             ATAN2(
               SUM(COS(RADIANS(lat)) * SIN(RADIANS(lon))) / COUNT(*),
               SUM(COS(RADIANS(lat)) * COS(RADIANS(lon))) / COUNT(*)
             ) AS lon
    FROM     zip_codes
    GROUP BY state

  ) c USING (state)
  GROUP BY state

) d USING (state)
WHERE  ACOS(
         COS(d.lat) * COS(RADIANS(z.lat)) * COS(RADIANS(z.lon) - d.lon)
       + SIN(d.lat) * SIN(RADIANS(z.lat))
       ) = d.min 
```

### 笔记

1.  这可能会很慢，因为索引（除了在`state`列上）不会有太大用处，但又是一次性的操作，所以缓存结果不应该证明是一个太大的问题。

2.  人口稠密地区的邮政编码较多，而人烟稀少的地区则很少。因此，确定的“质心”可能与地理中心有一段距离（但如果需要，它可能是人口中心的合理代表）。

    为每个邮政编码添加适当的权重将产生合理的*近似值*：例如，每个邮政编码覆盖的总土地面积的权重以找到地理中心；或按每个邮政编码内的人口居民来查找实际的人口中心。

    *拥有一个真正*的地理中心的唯一方法是从每个州的边界推导出质心。[您可以从CloudMade 下载](http://downloads.cloudmade.com/americas/northern_america/united_states#downloads_breadcrumbs)站点下载合适的边界多边形的坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:51:38.547

混搭它。使所有状态为矩形。

```
SELECT
  state,
  (MAX(lat)-MIN(lat))/2 + MIN(lat) 'center_lat',
  (MAX(lng)-MIN(lng))/2 + MIN(lng) 'center_lng'
FROM table
GROUP BY state 
```

它并不完美，但除非你喜欢复杂的数学，否则它是最糟糕的情况。

*编辑*：我只是重新阅读了这个问题，意识到它不是要求中心纬度/经度，而是中心拉链。检索到每个州的大致中心 lat/lng 列表后，您可以循环并找到离每个州最近的 ZIP。

```
SELECT
  zip,
  ABS(lat-$center_lat) + ABS(lng-$center_lng) 'diff'
FROM table
WHERE state = $state
ORDER BY diff ASC
LIMIT 1 
```

# java - JNI - 捕获异常并检查其类型

> ID：13035323
> 
> 赞同：4
> 
> 时间：2012-10-23T16:41:57.363
> 
> 标签：java, android, exception-handling, java-native-interface

我正在寻找一种方法来捕获在 Android (JAVA) 端引发的异常并在 Native 端处理它。

我需要做的是检测异常的类型并相应地处理它。

知道它是怎么做的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T18:25:31.947

我想到了...

```
if(jEnv->ExceptionCheck() == JNI_TRUE ) {
  __android_log_write(ANDROID_LOG_DEBUG, "JNI", "HAS EXCEPTION"); 
  jthrowable exceptionObj = jEnv->ExceptionOccurred();

  jclass exceptionClass = cocos2d::JniHelper::getClassID("com/companyName/example/exceptions/MyException", jEnv);
  if (jEnv->IsInstanceOf(exceptionObj, exceptionClass)) {
    __android_log_write(ANDROID_LOG_DEBUG, "JNI", "Cought MyException!"); 

    throw MyException();
  }
} 
```

# git - 更改 GIT 中的所有提交日期

> ID：13035324
> 
> 赞同：3
> 
> 时间：2012-10-23T16:41:57.417
> 
> 标签：git

无论如何，我可以通过从所有日期中减去（比如说一周）来更改 GIT 中的所有提交日期。

就像，而不是显示“在 2012 年 9 月 10 日星期四，用户承诺......”我希望它说“在 2012 年 9 月 3 日星期一，用户承诺......”

这仅适用于一个 GIT 存储库。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:30:48.110

是的，你可以用[git filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)做到这一点。但是请注意，这也会影响所有哈希，所有提交都将被重新创建，并且 repo 历史记录将被重写。所以，这可能很危险。

您需要将 git filter-branch 与设置 GIT_AUTHOR_DATE 和 GIT_COMMITTER_DATE 变量的环境过滤器一起使用。在 github 中有一个[示例脚本来更改所有提交的作者信息](https://help.github.com/articles/changing-author-info)- 它是类似的东西，你只需要使用我提到的变量，以及实现一个基于给定日期决定日期的逻辑一周前。

最后警告：如果有人已经使用过该回购协议，事情可能会变得一团糟。从 github 页面：

> 此操作对您的回购历史具有破坏性。最好在克隆上执行此操作，以防万一。另请注意，不应在已与他人共享的存储库上执行此操作。使用风险自负。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T00:23:51.770

那里的大多数示例都基于 shell 脚本（如[eis](https://stackoverflow.com/users/365237/eis "eis")答案），如果您正在执行日期算术，IMO 可能会变得复杂（例如，看看[Unix shell 脚本中的日期算术](https://stackoverflow.com/questions/6467/date-arithmetic-in-unix-shell-scripts)）。

`git filter-branch`通过结合[schacon 的 ruby​​-git gem](https://github.com/schacon/ruby-git)（这很棒，但 AFAIK 缺乏重写功能），我找到了一个更具可读性的解决方案。Ruby 用于遍历 git 历史并应用日期/时间算术，这使用[ActiveSupport](http://guides.rubyonrails.org/active_support_core_extensions.html#time)非常好，例如`actual + 6.months`

请参阅我的脚本[https://gist.github.com/defvol/2bc0c3cff0d749121453](https://gist.github.com/defvol/2bc0c3cff0d749121453)

# php - 使用 PHP 对网站表进行排序还是有其他选择？

> ID：13035325
> 
> 赞同：1
> 
> 时间：2012-10-23T16:42:00.877
> 
> 标签：php, javascript, html, web

我想创建一个带有统计数据的应用程序，即美式足球运动员。

我有我的数据库，我可以查询诸如“传球码”、“冲码数”等内容，然后将它们从高到低排序。然后在客户端我正在考虑让用户重新排序结果（使用javascript）。

到目前为止微不足道，但是假设在选择通过码时我得到 100 个结果，然后查询仅返回第一页上的前 20 个并给出更多或下一个选项。现在，如果我让客户端的用户自己重新排序，那么他将对前 20 个进行排序，并且可能会混淆认为以某种方式排序的前 20/100 也是最低的 20/100。我还可以发送 100 个结果并使用 javascript 仅显示 20 个，但如果列表增加，这可能需要一段时间才能加载。

另外，如果我考虑如果我让他们按最高/最低排序，也许我想让他们按传球码数、球队等排序，甚至选择球队、位置等。

我正在考虑 php 并让每个排序查询，但还有其他我不知道的方法吗？

注意：我是一个真正的初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:26:13.580

如果您不允许在同一页面上查看所有结果，您应该在每次用户启动排序时获取新数据（无论是页面重新加载，还是使用 XHR）。如果显示 100 行中的 20 行并允许客户端排序，则结果很可能不正确。

现在，如果您已加载所有结果，则可以使用比较器进行排序。如果每个键值（任何类型）对也有一个对应的键值（字符串——我们称之为“比较器值”），这将起作用，这样您就可以比较具有不同类型数据的行。

我们有一个网格小部件，它可以获取任意数据并加载所有结果，允许用户按任何给定列重新排序，为此我们使用带有比较器功能的 Backbone 集合。如果你熟悉 Backbone，我可以展示这个小部件的源代码。如果您愿意，请发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:15:52.823

好吧，有很多方法可以检索和显示动态 Web 项目的数据，但这超出了您的信息范围。如果我站在你的立场上，我会使用 java (Java EE)，使用带有 hibernate 的 struts，并且可能只是为了让它更容易而在上面弹出，但我猜你不知道这些，并且仅限于 javascript 和 php。

我想说为用户可能输入的每种类型的结果进行查询会很乏味，但考虑到您是初学者，这可能是您的最佳选择。这不是“最佳实践”，但如果这只是您自己正在进行的一个小项目，我认为它会起作用。

# c++ - 成员函数中的结构不能为其新地址

> ID：13035328
> 
> 赞同：0
> 
> 时间：2012-10-23T16:42:17.110
> 
> 标签：c++, struct, template-meta-programming

主类创建运行轮胎类的实例。Tire 类调用成员函数`bool tire<TypeTire, TypeNode>::add_node(TypeTire const& input_data)`以将所有字符“ABCDEFAB”推送到向量 by `node_root_vec.push_back(node_data);`。推到向量之前的`node_data`创建。`node_data = new node_tire<TypeTire, TypeNode>();`

```
#include <iostream>
#include <string>
#include <vector>
using namespace boost;

template<typename TypeTire, typename TypeNode>
struct node_tire {
    // data in node
    TypeNode const *data;

    int addr_node;
    // address insert next  node
    std::vector<node_tire<TypeTire, TypeNode> > addr_next_node;
    // address insert pervious node
    std::vector<node_tire<TypeTire, TypeNode> > addr_prve_node;
    // insert data to node
    node_tire() : data(NULL) { }
};

template<typename TypeTire, typename TypeNode>
class tire
{
    public:
        tire( );
        node_tire<TypeTire, TypeNode> *check_node(node_tire<TypeTire, TypeNode>&   node);
        bool add_node(TypeTire const& data);

    private:

        node_tire<TypeTire, TypeNode>   *node_data;
        std::vector<node_tire<TypeTire, TypeNode>* > node_root_vec;

        // handling node
        std::vector<shared_ptr<node_tire<TypeTire, TypeNode> > > node_root_shared_ptr;
        typedef shared_ptr<node_tire<TypeTire, TypeNode> > node_ptr;

};

template<typename TypeTire, typename TypeNode>
tire<TypeTire, TypeNode>::tire()
{

}

// Finding data in root node before travelling in branch.
template<typename TypeTire, typename TypeNode>
node_tire<TypeTire, TypeNode> *tire<TypeTire, TypeNode>::check_node(node_tire<TypeTire, TypeNode>& node)
{
    int index_root_node = 0;

    for(typename std::vector<node_tire<TypeTire, TypeNode>* >::iterator iter_root = node_root_vec.begin();
            iter_root != node_root_vec.end();
            ++iter_root, ++index_root_node) {
        node_tire<TypeTire, TypeNode> *node_in_vec = *iter_root;
        TypeNode const *data = node_in_vec->data;

        std::cout<<" Compare : " << *data << " : " << *node.data <<", Data address : " << &data <<std::endl;

        if( *data == *node.data) {
            node_tire<TypeTire, TypeNode>   *node_in_root = node_root_vec[index_root_node];
            std::cout<<"Address fond node in root : " << &node_root_vec[index_root_node] <<", value : " << node_in_root->data <<std::endl;
            return node_root_vec[index_root_node];

        }

    }

    return NULL;
}

template<typename TypeTire, typename TypeNode>
bool tire<TypeTire, TypeNode>::add_node(TypeTire const& input_data)
{
    int index_input = 0;

    for(typename TypeTire::const_iterator iter_input = input_data.begin(); iter_input != input_data.end(); ++iter_input, ++index_input) {

        node_data =  new node_tire<TypeTire, TypeNode>();
        node_data->data  =  &(*iter_input);
        std::cout<<" Node Address : " << &node_data <<std::endl;

        // Found data in root node in condition else.
        // Not found in root node to if.
        if(check_node(*node_data) == NULL) {
            node_root_vec.push_back(node_data);
        }

    }

}

// mian.cpp
int main()
{
tire<std::string, char> tire_node;
std::string str_test = "ABCDEFAB";
tire_node.add_node(str_test);
} 
```

我从向量打印`node_data`发布地址，它应该是新地址`node_data`，但在创建后只显示旧地址`node_data = new node_tire<TypeTire, TypeNode>();`。为什么不能新地址`node_data`？

```
 Node Address : 0x7fff0ebb28b0
 Node Address : 0x7fff0ebb28b0
 Compare : A : B, Data address : 0x7fff0ebb2760
 Node Address : 0x7fff0ebb28b0
 Compare : A : C, Data address : 0x7fff0ebb2760
 Compare : B : C, Data address : 0x7fff0ebb2760
 Node Address : 0x7fff0ebb28b0
 Compare : A : D, Data address : 0x7fff0ebb2760
 Compare : B : D, Data address : 0x7fff0ebb2760
 Compare : C : D, Data address : 0x7fff0ebb2760
 Node Address : 0x7fff0ebb28b0
 Compare : A : E, Data address : 0x7fff0ebb2760
 Compare : B : E, Data address : 0x7fff0ebb2760
 Compare : C : E, Data address : 0x7fff0ebb2760
 Compare : D : E, Data address : 0x7fff0ebb2760
 Node Address : 0x7fff0ebb28b0
 Compare : A : F, Data address : 0x7fff0ebb2760
 Compare : B : F, Data address : 0x7fff0ebb2760
 Compare : C : F, Data address : 0x7fff0ebb2760
 Compare : D : F, Data address : 0x7fff0ebb2760
 Compare : E : F, Data address : 0x7fff0ebb2760
 Node Address : 0x7fff0ebb28b0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:59:26.477

查看我的代码，您可能很快就会出错：

```
void test() {
    int n;
    for( int i = 0; i < 100; i++ ) {
        n = i + 2;
        std::cout << "Address of n is: " << &n << std::endl;
    }
} 
```

你认为我的程序的输出应该改变吗？我改变了价值，`n`但我不能改变它的地址，可以吗？
在您的情况下，您正在更改 的值`node_data`，但您永远不能更改 的地址`node_data`。你能？你打印的是地址`node_data`而不是它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:00:17.933

您正在打印 &node_data，它是 node_data 成员的地址，它是轮胎对象地址的常量偏移量。

分配实例的地址是 node_data （您在其上创建新实例的地址）

# ruby-on-rails - 用于标准的 jquerymobile css - 笔记本电脑/台式机 - 网络浏览器

> ID：13035331
> 
> 赞同：1
> 
> 时间：2012-10-23T16:42:24.837
> 
> 标签：ruby-on-rails, jquery-mobile

在我的 Rails 应用程序中，我目前为每个视图都有一个 *.mobile.erb 和 *.html.erb 文件。

jquerymobile 有一组很棒的 css div 标签。我很想创建我最常使用的同一组标签（例如：data-role="page|header|navbar|content"），但这决定了一个干净的笔记本电脑/桌面浏览器主题，而不是移动主题.

有了这个，在我的 rails 应用程序中，我仍然会渲染 jquerymobile css 和 js 文件或标准 jquery/浏览器 css 和 js 文件，但我认为我可以通过引用相同的 div 标签来重新使用视图根据平台渲染不同。我喜欢使用现有的东西，而不是创建自己的东西。有什么想法或建议吗？

在此先感谢，戴夫

# parallel-processing - 如何进一步优化此 OpenCL 内核

> ID：13035332
> 
> 赞同：0
> 
> 时间：2012-10-23T16:42:31.473
> 
> 标签：parallel-processing, opencl

我正在尝试在 OpenCL 中实现 hausdorff 距离，以下内核构成了它的基础，或者我认为它确实如此，因为我仍然必须完全实现它。也就是说，我能得到一些建议还是有办法优化这个内核？基本上我怎样才能删除调用辅助函数的内核函数中的for循环.....

OpenCL 内核及其辅助函数：

```
void helper( int a_1, __global int* b_1, __global int* c_1 ){
        int i = get_global_id(0);
        c_1[i] = a_1 - b_1[i];
}

__kernel void test_call( __global int* a,             //input buffer of size [100000, 1]
                         __global int* b,             //input buffer of size [100000, 1]
                         __global int* c ){           //output buffer of size [100000, 1]
        for ( int iter = 0 ; iter < 100000 ; iter++ ){
                helper ( a[iter], b, c );
                // once array c is obtained by calling the above function,
                // it will be used in further processing that will take place inside 
                // this for loop itself
} 
```

本质上，我在这里尝试做的是用输入缓冲区“b”中的每个元素减去输入缓冲区“a”中的每个元素。复杂度为 O(n ² )。

顺便说一句，这个简单的实现本身会在 2.5 秒内产生结果。对此的串行实现将需要几分钟才能完成执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:50:05.713

我想，您的代码仍然可以通过使用平铺方案来改进。在您当前的实现中，所有工作项都加载缓冲区“a”的所有值。目前，他们以不同步的方式这样做。使用平铺方案，您可能可以更好地利用您的缓存架构，方法是让设备只从片外内存加载“a”的每个值一次。

此方案最好在此处进行解释：http: [//software.intel.com/file/24571](http://software.intel.com/file/24571)（PDF 文件）。

在您的情况下，平铺并行方法可能类似于以下伪代码。

```
forall values of b in parallel {
    foreach tile q {
        forall work_items p in work_group in parallel {
            local[p] = a[q*tile_size + p]
        }
        synchronize work items in work group
        foreach body j in tile q {
            c[i] = local[j] - b[i];
        }
        synchronize work items in work group
    }
} 
```

关键思想是每个工作项都可以使用缓冲区“a”的值，这些值已经被同一组中的其他工作项加载。'a' 的每个条目将（理想情况下）仅从内存中获取一次，从缓存中获取 tile_size-1 次。

# java - 缺少返回语句编译错误

> ID：13035334
> 
> 赞同：1
> 
> 时间：2012-10-23T16:42:39.757
> 
> 标签：java

缺少返回语句的错误。有人知道代码有什么问题吗？

```
import java.text.*;
public class Sentence {
    private String text;
    public Sentence(String str) {
        str = text;
    }
    public boolean isPalindrome() {
        int length = text.length();
        for(int n = 0;n <= length/2;n++) {
            char letterFromFront = text.charAt(n);
            char letterFromBack = text.charAt(length);
            if(letterFromFront == letterFromBack) {
                return true;
            }else {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:45:36.653

它抱怨是因为如果它不进入`for`循环就不会有任何回报。

**请在循环后添加`return`语句。`for`**

另请注意：`n++`在您的`for`循环中是一个**死代码**，因为您在第一次迭代本身中返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:43:43.437

> 有人知道代码有什么问题吗？

正是它所说的。

这么说吧：如果字符串为空，你认为这会返回什么？（事实上​​，它会抛出一个异常，因为你可能希望你的上限是独占的而不是包容的，但从根本上说你需要考虑它永远不会进入循环体的情况。）

这段代码还有其他问题，请注意：

*   `text.charAt(length)`总是会抛出异常
*   你*真的*是想总是在第一次迭代中返回吗？这表明 xabcx 是一个回文...（提示：您只有`true`在完成循环后才能有效返回...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:43:58.617

例如，如果`length`是`-2`（诚然不可能发生），您的循环将永远不会运行，并且您将不会返回任何内容。

您需要在循环之后添加一个 return 语句以满足编译器的要求，或者在循环之前更好，检查长度是否为`>1`，如果不是则返回 true/false。

您的代码中还有其他问题，但这就是编译器错误的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T16:51:38.490

您的代码没有考虑 n 不小于或等于 的情况`length/2`。

我想如果它不是回文，这意味着无论发生什么，你都想返回 false。

```
public class Sentence {
    private String text;
    public Sentence(String str) {
        str = text;
    }
    public boolean isPalindrome() {
        boolean value = false;
        int length = text.length();
        for(int n = 0;n <= length/2;n++) {
            char letterFromFront = text.charAt(n);
            char letterFromBack = text.charAt(length);
            if(letterFromFront == letterFromBack) {
                value = true;
            }else {
                value = false;
            }
        }
       return value;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T17:09:51.427

实际上`return false`应该放在循环之后，否则它总是运行一次

```
public boolean isPalindrome() {
    int length = text.length();
    for(int n = 0;n <= length/2;n++) {
        char letterFromFront = text.charAt(n);
        char letterFromBack = text.charAt(length);
        if(letterFromFront == letterFromBack) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T16:44:34.577

从 else 子句中删除 return 语句并在循环结束之前移动。因此，如果数字是回文，则它属于 if 子句并返回 true，否则返回 false。从理论上讲，您的代码是正确的，但编译器不会这样看。

# java - 分布式缓存 Hadoop 和可扩展性

> ID：13035335
> 
> 赞同：0
> 
> 时间：2012-10-23T16:42:41.113
> 
> 标签：java, hadoop

我有一个要使用分布式缓存工具添加的文件列表。不同的reduce任务需要不同的文件。例如，reduce 1 需要文件 A，而 reduce 2 需要文件 B，依此类推。在 Job Conf 中，这两个文件都是使用 DistributedCache.addCacheFile() 方法添加的。在 reduce 类配置方法中，我使用 DistributedCache.getCacheFiles() 来获取文件。有没有可能我只能在reduce 1的内存中拥有文件A，而在reduce 2的内存中只有文件B。或者在reduce任务开始之前，这两个文件都被添加到内存中。

如果我理解这一点，我可以为我的程序使用分布式缓存。我关心的是可扩展性。文件很大。因此，reduce 任务不能将这两个文件都放在内存中。但可以容纳其中一个文件。

请帮忙！！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:50:21.300

返回缓存文件的方法，按照添加的顺序返回缓存文件的所有名称的数组。因此可以告诉reducer 1 获取array[0] 文件并告诉reducer 2 获取array[1] 文件。此缓存也建议不要在其中包含非常大的文件。

# javascript - 无法将值传递给 jquery 函数

> ID：13035338
> 
> 赞同：1
> 
> 时间：2012-10-23T16:42:46.807
> 
> 标签：javascript, jquery

当我想传递值时，它没有用。这是我的代码，

```
function showimage(b)
{
    //if alert was here, it would show the value of b
    $("#lightboxholder").show("fast","",function (b)
    {
        alert(b);//but now when the alert is here, it is not showing the value of b
    });
} 
```

我错过了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:45:59.070

内部函数将使用新参数调用，因此`b`将替换为新变量。

如果你`function (b)`用`function ()`- 替换，那么内部`b`应该是给外部函数的那个​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:44:07.930

那是因为函数中的局部值`b`覆盖了`b`showImage 函数中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:44:39.353

尝试这个，

**[现场演示](http://jsfiddle.net/Vntjv/)**

```
function showimage(b)
{
    //if alert was here, it would show the value of b
    $("#lightboxholder").show("fast", function ()
    {
        alert(b);//but now when the alert is here, it is not showing the value of b
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:51:43.420

让我们从简单的开始，给你做你想做的代码：

```
function showimage(b)
{
    //if alert was here, it would show the value of b
    $("#lightboxholder").show("fast","",function ()
    {
        alert(b); // interestingly enough, it knows what b is here
    });
} 
```

从那里出现了两个主要问题：为什么你正在尝试的东西不起作用，为什么我正在做的东西起作用。让我们从你正在做的事情开始。

您正在尝试将参数传递给函数，就好像您正在调用匿名函数一样。但是，您没有调用该函数。您正在定义函数并将函数本身作为参数提供给 jQuery。jQuery 然后在它希望的位置调用你定义的函数。因为它需要在那个时候提供价值而不是，所以你不会得到你想要达到的结果。因此，您不能以您尝试的方式传递参数。

然后让我们继续讨论为什么我的版本可以工作。这就是javascript中所谓的封装。基本上，如果您定义一个函数，您可以使用在定义该函数的上下文中可用的任何变量。然后，Javascript 会自动确保只有您使用的那些包含在您定义的函数的上下文中。这完全独立于您调用函数的位置，仅依赖于您定义函数的位置。因此，我只是从 showImage 函数中“借用” b 值并在匿名函数中使用。

# actionscript-3 - 为 Flex Tree 组件解析 XML

> ID：13035340
> 
> 赞同：0
> 
> 时间：2012-10-23T16:42:57.277
> 
> 标签：actionscript-3, apache-flex

在我继承的项目中，我需要从使用 spark List 组件切换到使用 mx Tree 组件，以便能够将项目分组到目录中。我对 Flex/XML 很生疏，所以我想知道是否可以在正确的方向上推动如何处理这个问题。

**我的问题**（详情/数据详情如下）：

*   如何从“学生”节点检测“学生组”节点？

*   树组件需要一个用于显示名称的字段。我必须在“studentGroup”节点和“student”节点之间有一个通用名称吗？

*   我完全做错了吗？

以前我的 XML 数据是扁平的（为了清楚起见，我已经删除了所有细节）：

```
<studentList>
  <student>
      <studentName>Sam</studentName>
  </student>
   <student>
       <studentName>Ruby</studentName>
   </student>
</studentList> 
```

新格式是团体和个别学生的混合：

```
<studentList>
    <studentGroup>
       <studentGroupName>Chess</studentGroupName>
          <student>
              <studentName>Betty</studentName>
          </student>
        </studentGroup>
    <student>
        <studentName>Sam</studentName>
    </student>
    <student>
        <studentName>Ruby</studentName>
    </student>
</studentList> 
```

当前正在使用以下（再次简化的）代码解析 XML：

```
for each (var prop:XML in studentsXML.file){
    tempArray = new ArrayCollection();
    for each(var studentProp:XML in prop.studentList.student){
       tempStudent = new Student(studentProp.studentName);
       tempArray.addItem(tempStudent);
    }
} 
```

我需要更改它，以便为“studentGroups”做一件事，而“students”则像上面一样处理它。在伪代码中它看起来像下面但是我在语法上绊倒了（或者我完全偏离了轨道？）。

```
for each (var prop:XML in studentsXML.file){
    tempArray = new ArrayCollection();
    for each(var studentProp:XML in prop.studentList){

       //HOW DO I DETECT A StudentGroup FROM A Student NODE?

       if (studentList.studentGroup){
          //student group
           tempStudentGroup = new StudentGroup(studentProp.studentGroupName);
             for each(var student:XML in studentList.studentGroup){
               tempStudent = new Student(studentProp.studentName);
               tempStudentGroup.add(tempStudent);
             }

            tempArray.addItem(tempStudentGroup);
       }else{
          //single student
          tempStudent = new Student(studentProp.studentName);
          tempArray.addItem(tempStudent);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:20:54.293

我会尝试这样的事情：

```
for each(var studentGroup:XML in prop.studentGroup)
{
    //student group
    for each(var student:XML in studentGroup.student) {
        tempStudent = new Student(studentProp.studentName);
        tempStudentGroup.add(tempStudent);
    }
    tempArray.addItem(tempStudentGroup);
}
for each(var student:XML in prop.student)
{
    //single student
    tempStudent = new Student(studentProp.studentName);
    tempArray.addItem(tempStudent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:19:46.927

如果想在 mx:Tree 中使用，您的 xml 将如下所示：

```
<studentList>
  <student label="Chess">
    <student label="Bett"/>
  </student>
  <student label="Sam"/>
  <student label="Ruby"/>
</studentList> 
```

这意味着：您应该始终使用唯一的字符串来包含任何深度的内容，并且 mx:Tree 会将这些显示为节点父节点或节点，这取决于哪个有子节点。

第一个问题：您可以在 itemRenderer 中选中“hasChildren”来区分学生组和学生。像这样：

```
 override public function set data(value:Object):void {
   if( value != null ) { 
     super.data = value;

     if( TreeListData(super.listData).hasChildren ) {
       ... 
```

你的第二个问题：是的，他们都使用“标签”作为显示名称。

# iphone - Rechability.m 中的错误

> ID：13035343
> 
> 赞同：0
> 
> 时间：2012-10-23T16:43:02.817
> 
> 标签：iphone, objective-c, ios

我收到以下错误，如下图所示 ![在此处输入图像描述](../Images/e6faf58bdce9cdd06eaa4810bb23d636.png)

我删除了这个文件并再次添加了新文件，即使发生了同样的错误

我找不到修改的地方？

请指导我

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:49:58.197

您可能正在将此文件编译为 Objective-C++，而不是 Objective-C。您通常可以从文件扩展名中看出，这可能是“.mm”（或者这是您从 ObjC++ 某处包含的头文件）。

`private`是 C++（和 ObjC++）中的保留字。一个快速的解决方法是`Private`用大写`P`字母代替。

# javascript - 返回 NAN 的代码

> ID：13035347
> 
> 赞同：1
> 
> 时间：2012-10-23T16:43:36.260
> 
> 标签：javascript, time

我写了一些 javascript 希望将时间输出为`hh:mm` (EG: `15:45`)

但是我的代码正在返回 Nan:Nan

```
var timer = 24;
var time1 = new Date();
time1.setHours(time1.getHours + (6));
time1.setMinutes(time1.getMinutes());
document.write(time1.toString("hh:mm")); 
```

有人可以帮我理解为什么这不能按预期工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:45:56.127

`getHours`成员是一个函数而不是一个值。因此，您将一个数字乘以一个方法并得到`NaN`. 确保调用该方法

```
time1.setHours(time1.getHours() + (6)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:46:18.090

问题是那`time1.getHours`是一种方法。当您将 6 添加到方法时，结果为`NaN`. 您需要实际调用它：

```
time1.setHours(time.getHours() + 6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:47:10.113

你可以用`document.write(time1.getHours()+":"+time1.getMinutes());`它来代替它。

# django - 如何在Django中插入从另一个模型继承的模型

> ID：13035348
> 
> 赞同：0
> 
> 时间：2012-10-23T16:43:39.520
> 
> 标签：django, django-models, django-orm

我有以下型号：

```
class Category(models.Model):
    title = models.CharField(max_length=200)

class Page(models.Model):
    title = models.CharField(max_length=255)
    category = models.ForeignKey(Category)

class PageExt(Page):
    is_t = models.BooleanField() 
```

某些“页面”已存在于数据库中。我需要从现有的“页面”中为某些“类别”创建“PageExt”。使用 ORM 和像 bulk_create 这样的优化如何正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:27:31.800

这个怎么样：

```
#categories are the objects you know you want to make PageExt for
pages = Page.objects.filter(category__in = categories)
page_exts = []
for page in pages:
    #Give some values for is_t since, null is not allowed assuming True for now
    page_exts.append(PageExt(is_t = True))
PageExt.objects.bulk_create(page_exts) 
```

# sql-server - 将 SQL Server 命名参数与 ExecuteStoreQuery 和 ExecuteStoreCommand 一起使用

> ID：13035353
> 
> 赞同：12
> 
> 时间：2012-10-23T16:43:53.673
> 
> 标签：sql-server, entity-framework

我试图在直接调用存储过程或函数时`ObjectContext.ExecuteStoreQuery`使用SQL Server 命名参数。`ObjectContext.ExecuteStoreCommand`

SQL Server 命名参数与实体框架命名参数不同 - 它们允许我执行与此类似的查询：

```
EXEC sp_GetData @firstParameter = 1, @thirdParameter = 2, @secondParameter = 1 
```

与按顺序评估的实体框架命名参数相反，此查询中参数的顺序无关紧要。

我想将 SQL Server 命名参数与 Entity Framework 一起使用，这样如果在存储过程中更改了参数的顺序，则调用它的 Entity Framework 代码不会受到影响。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-25T18:56:33.997

为了使其按预期工作，您需要将查询文本设置为参数化查询。棘手的部分是你只需要确保你的参数命名不同于 SP 参数：

```
var cmdText = "[DoStuff] @Name = @name_param, @Age = @age_param";
var @params = new[]{
   new SqlParameter("name_param", "Josh"),
   new SqlParameter("age_param", 45)
};

ObjectContext.ExecuteStoreQuery<MyObject>(cmdText, @params); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-20T15:49:53.410

仅供参考 - 不要将您的存储过程命名为以 sp_ 开头，因为这是系统存储过程的命名方式。结果是 SQL 服务器会在找到您的定义之前首先查看所有系统存储的过程，并且在生产中看起来会更慢，因为有许多存储的过程和它们的调用。

# powershell - 为什么 Console.WriteLine 不向 NuGet 包管理器窗口输出任何内容？

> ID：13035356
> 
> 赞同：2
> 
> 时间：2012-10-23T16:44:06.027
> 
> 标签：powershell

谁能告诉我为什么下面的代码没有在 PS 屏幕上显示“blablabla”？我所看到的只是从函数返回的随机数。

```
# Create a function that loads our managed code into powershell
function InitType 
{ 
    [string]$SourceCode =  @"

    using System;

    namespace TestApp 
    {       

        // This class houses the public methods that we'll use from powershell

        public static class TestMethods
        {
            public static int GetRandom()
            {
                var id = new Random().Next();
                Console.WriteLine("bla bla bla");
                return id; 
            }
        }
    }
"@

    # use the powershell 2.0 add-type cmdlet to compile the source and make it available to our powershell session 
    add-type -TypeDefinition $SourceCode
}

# Load our C# code 
InitType

# Call our method 
[TestApp.TestMethods]::GetRandomAndOutputMessage 
```

()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:22:53.900

*Nuget包*管理器不是PowerShell 控制台。Console.WriteLine 写入控制台“应用程序”的控制台。Visual Studio 不是控制台应用程序。运行 NPM 的窗口托管 PowerShell 引擎并实现 PSHost 接口以允许引擎将信息输出到窗口。Console.WriteLine 在这种情况下不起作用。

# google-drive-api - 如何将 SVG 文件上传到谷歌驱动器以转换为原生绘图格式并在谷歌文档中编辑？

> ID：13035361
> 
> 赞同：2
> 
> 时间：2012-10-23T16:44:26.200
> 
> 标签：google-drive-api

如何以编程方式将 SVG 文件（或任何其他基于公共矢量的格式）上传到 Google Drive 以存储/转换为 Google 绘图本机格式？所以上传的文件以后可以直接在google drive环境中打开编辑。可能吗？当我使用基于 Web 的 UI 将 SVG 文件上传到 Google Drive 时，SVG 文件会被存储，但不会转换并且无法编辑。只能查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-04T08:51:39.210

您可以将您的 SVG 文件上传到[http://openclipart.org](http://openclipart.org)，然后有一个 WMF / EMF 按钮，可让您在 Google 绘图、Libreoffice 和 Microsoft Office 中下载和使用您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:46:33.200

上传文件时是否设置`convert`参数？`true`

[https://developers.google.com/drive/v2/reference/files/insert#optional-parameters](https://developers.google.com/drive/v2/reference/files/insert#optional-parameters)

# jquery - 如何找到包含嵌套在表中的特定 ID 的最高级别 TR

> ID：13035365
> 
> 赞同：2
> 
> 时间：2012-10-23T16:44:35.400
> 
> 标签：jquery, asp.net

我有一些看起来像这样的 HTML（注意：我知道这段代码不是很好，但我最初并没有设计它，其中一些是自动生成的）：

```
<table id="tab1">
    <tbody>
    <tr id="row1">
        <td><span>Some text</span></td>
        <td><span>more text</span></td>
        <td><input type="text" id="inp1" onclick="DoSomething(this);" /></td>
    </tr>
    <tr id="row2">
        <td><span>Some text</span></td>
        <td><span>more text</span></td>
        <td><table id="tab2"><tbody>
            <tr><td><input type="radio" id="inp2" onclick="DoSomething(this);" /><span>item</span></td></tr>
        </tbody></table></td>
    </tr>
    </tbody>
</table> 
```

所有这些都嵌入在表格中，该表格也嵌入在表格中，依此类推。在`DoSomething(this)`函数中，我想检索 table 下面的 TR `tab1`。我无法确定为此所需的 jquery。目前我正在做这样的事情：

```
function DoSomething(control) {
    var parentTab = '<%=tab1.ClientID %>';
    var tr = $('#' + parentTab + ' > tbody > tr').has('#' + $(control).attr('id')).get(0);
} 
```

这看起来真的很乱但有效。有没有更清洁的方法来做到这一点？如果有帮助，表内的输入将始终是单选按钮，单选按钮永远不会出现在子表之外。理想情况下，我想这样做而不必知道 id`tab1`但这似乎是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:51:35.307

`.has()`还接受 DOM 元素作为参数，因此您可以简化为：

```
var tr = $('#' + parentTab + ' > tbody > tr').has(control)[0]; 
```

# internet-explorer - IE8 边框半径属性不显示在 IE 开发工具栏中 (F12)

> ID：13035367
> 
> 赞同：0
> 
> 时间：2012-10-23T16:44:38.353
> 
> 标签：internet-explorer, css

在 Drupal 项目中，我在开发人员工具栏中看不到border-radius 属性。
我还尝试添加内联边框样式，但该属性消失了。
[http://goa.drupal.com.pe/inmuebles/venta-departamento-0](http://goa.drupal.com.pe/inmuebles/venta-departamento-0)

![在此处输入图像描述](../Images/575ce27f7ea268c4a67537875484a7e0.png)

这是html头：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php print $language->language; ?>" version="XHTML+RDFa 1.0" dir="<?php print $language->dir; ?>" <?php print $rdf_namespaces; ?>> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php print $language->language; ?>" version="XHTML+RDFa 1.0" dir="<?php print $language->dir; ?>" <?php print $rdf_namespaces; ?>> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php print $language->language; ?>" version="XHTML+RDFa 1.0" dir="<?php print $language->dir; ?>" <?php print $rdf_namespaces; ?>> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php print $language->language; ?>" version="XHTML+RDFa 1.0" dir="<?php print $language->dir; ?>" <?php print $rdf_namespaces; ?>> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php print $language->language; ?>" version="XHTML+RDFa 1.0" dir="<?php print $language->dir; ?>" <?php print $rdf_namespaces; ?> xmlns:fb="http://www.facebook.com/2008/fbml"> <!--<![endif]-->

<head profile="<?php print $grddl_profile; ?>">
  <?php print $head; ?>
  <title><?php print $head_title; ?></title>
  <?php print $styles; ?>
  <?php if ($mobile_friendly): ?>    
    <meta name="viewport" content="width=device-width" />
    <meta name="MobileOptimized" content="width" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
  <?php endif; ?>
  <?php print $scripts; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:49:51.393

低于 9 的 Internet Explorer 不支持边框半径，但如果您使用的是 IE9 并且仍然无法正常工作，您可以尝试添加此元标记以将兼容模式设置为 IE9：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:49:31.770

IE8 不支持它，这就是原因。

您可以查看这篇[文章](https://stackoverflow.com/questions/9426979/border-radius-for-ie8)，了解使用 jQuery.Corner 插件的替代解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:50:47.413

IE8 不支持边框半径，开发者工具会丢弃浏览器无法识别的任何标签或属性。

# c++ - 我的课程不适用于容器

> ID：13035378
> 
> 赞同：-3
> 
> 时间：2012-10-23T16:45:09.123
> 
> 标签：c++, qt, class, containers

我有一个与容器有很多问题的类，这次如果我使用非默认构造函数创建对象，我根本无法控制容器中的对象（更改值，可见 ...）；但是如果我用默认构造函数定义我的对象，我可以很容易地做到这一点。

控制.h

```
class Controls : public QObject
{

private:

  QHBoxLayout *Layout ;
  string Controlname;
  QLabel *Label ;

  QSpinBox *Spin ;

public:
  QSlider *Slider ;
  Controls(QLayout &Parent , string name , const int &Default_value);
  Controls(const Controls &copy);
  Controls();
  Controls(QLayout &Parent);
  ~Controls();

  QLabel *  Get_Label()const { return Label ; }
  QSlider *  Get_Slider()const { return Slider ; }
  QSpinBox *  Get_Spin()const { return Spin ; }
  QHBoxLayout *  Get_Layout() {return Layout;}

  void SetValue(const int &newvalue);

  Controls &operator= (const Controls &copy);

}; 
```

控件.cpp

```
#include "Interface.h"
Controls &Controls::operator= (const Controls &copy)
{
  Slider->setValue(copy.Get_Slider()->value());
  Slider->setOrientation(Qt::Horizontal);
  Label->setText(copy.Get_Label()->text());
  Spin->setValue(copy.Get_Spin()->value());

  Layout->addWidget(Label , 0 , 0);
  Layout->addWidget(Slider , 0 , 0);
  Layout->addWidget(Spin , 0 , 0);

  QObject::connect(Slider , SIGNAL(valueChanged(int) ) , 
                   Spin , SLOT(setValue(int)));
  QObject::connect(Spin , SIGNAL(valueChanged(int) ) , 
                   Slider , SLOT(setValue(int)));

  return *this;
}

Controls::Controls(const Controls &copy)
{
  Label = new QLabel()   ;
  Slider = new QSlider()   ;
  Spin = new QSpinBox()  ;
  Layout = new QHBoxLayout();

  Slider->setValue(copy.Get_Slider()->value());
  Slider->setOrientation(Qt::Horizontal);
  Label->setText(copy.Get_Label()->text());
  Spin->setValue(copy.Get_Spin()->value());

  Layout->addWidget(Label , 0 , 0);
  Layout->addWidget(Slider , 0 , 0);
  Layout->addWidget(Spin , 0 , 0);

  QObject::connect(Slider , SIGNAL(valueChanged(int) ) , 
                   Spin , SLOT(setValue(int)));
  QObject::connect(Spin , SIGNAL(valueChanged(int) ) , 
                   Slider , SLOT(setValue(int)));
}

Controls::Controls()
{
  Label =  new QLabel()  ;
  Slider = new QSlider()   ;
  Spin = new QSpinBox()  ;
  Layout = new QHBoxLayout();

  Slider->setValue(0);
  Slider->setOrientation(Qt::Horizontal);
  Label->setText(QString ("unamed"));
  Spin->setValue(0);

  Layout->addWidget(Label , 0 , 0);
  Layout->addWidget(Slider , 0 , 0);
  Layout->addWidget(Spin , 0 , 0);

  QObject::connect(Slider , SIGNAL(valueChanged(int) ) , 
                   Spin , SLOT(setValue(int)));
  QObject::connect(Spin , SIGNAL(valueChanged(int) ) , 
                   Slider , SLOT(setValue(int)));
}

Controls::Controls(QLayout &Parent , string name , const int &Default_value)
{
  Controlname = name ;

  Label =  new QLabel() ;
  Slider = new QSlider()  ;
  Spin =  new QSpinBox()  ;
  Layout = new QHBoxLayout();

  Slider->setValue(Default_value);
  Slider->setOrientation(Qt::Horizontal);
  Label->setText(QString (name.c_str()));
  Spin->setValue(Default_value);

  Layout->addWidget(Label , 0 , 0);
  Layout->addWidget(Slider , 0 , 0);
  Layout->addWidget(Spin , 0 , 0);

  QObject::connect(Slider , SIGNAL(valueChanged(int) ) , 
                   Spin , SLOT(setValue(int)));
  QObject::connect(Spin , SIGNAL(valueChanged(int) ) , 
                   Slider , SLOT(setValue(int)));

  Parent.addItem(Layout);
}

void Controls::SetValue(const int &newvalue)
{
  Slider->setValue(newvalue);
}

Controls::~Controls()
{
} 
```

主文件

```
int main()
{
  QApplication app (argc , argv );

  QVBoxLayout layout ;
  QLabel  Image  ;
  QWidget  Panel  ;
  Camera  Cm   ;

  vector <Controls> g ;
  g.push_back(Controls(layout ,"c1" , 33));
  g.push_back(Controls(layout ,"c2" , 13));
  g.push_back(Controls(layout ,"c3" , 63));
  g.push_back(Controls(layout ,"c1" , 33));

  for ( int x =0 ; x<g.size() ; x++)
  {
    g.at(x).SetValue(33); ////not work 

  }

  vector <Controls> g2 ;
  g2.push_back(Controls());
  g2.push_back(Controls());
  g2.push_back(Controls());
  g2.push_back(Controls());

  for ( int x =0 ; x<g2.size() ; x++)
  {
    layout.addItem(g2.at(x).Get_Layout());
    g2.at(x).SetValue(33); ////this  work

  }

  Panel.setLayout(&layout);
  Panel. show();

  return app.exec();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:10:34.373

您根本不应该有复制构造函数或赋值运算符`Controls`，并且应该将 type 的值存储`Controls*`在 vector 而不是 type 中`Controls`。

创建 GUI 对象的复制构造函数是高度可疑的。有一个原因`QLabel`,`QSlider`和`QSpinBox`本身`QHBoxLayout`没有复制构造函数。它使代码变得非常慢，并且很快变得混乱。

In short, you should almost never have a copy-constructor for objects that inherit from `QObject`.

# python - 在 python 中调用存储过程时出错 - 使用 MySQLdb

> ID：13035379
> 
> 赞同：3
> 
> 时间：2012-10-23T16:45:09.893
> 
> 标签：python, mysql, python-2.7, mysql-python

我有一个名为 test 的 MySQL 存储过程，它接受一个参数。我可以使用以下代码从 python 2.7x 执行存储过程

```
data='Teststr'
cur = db.cursor()
cur.execute("CALL test('{0}')".format(data)) 
```

但是当我使用

```
data='Teststr'
cur = db.cursor()
cur.callproc('test',data) 
```

我遇到

`OperationalError: (1318, 'Incorrect number of arguments for PROCEDURE MyDb.test; expected 1, got 7')`

看起来 python 将每个字符视为一个参数。我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:45:52.040

你想`cur.callproc('test', (data,))`传递一个包含 1 个元素的元组

例如：

```
>>> a = 'hello'
>>> len(a) # just a
5
>>> len( (a) ) # still just a
5
>>> len( (a,) ) # single element tuple containing a
1 
```

# c# - 如何将省略号放在chartfx图的轴上？

> ID：13035381
> 
> 赞同：1
> 
> 时间：2012-10-23T16:45:11.083
> 
> 标签：c#, winforms, chartfx

我正在为 Windows 窗体开发 ChartFX，有问题。我的应用程序必须在小尺寸（即 1440x900）的屏幕上运行，我需要在同一屏幕上显示多个图表（我无法更改它）。所以，当它发生时，我的图表（ChartFX 的图表）的轴标签看起来被剪掉了。

有人确实知道如何添加省略号而不是使用 chartFX 为轴标签切割标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:51:14.753

我没有找到任何方法可以做到这一点，似乎使用 ChartFx 的标准组件是不可能的。

# xpath - 使用 Xpath 查找属性的祖先

> ID：13035383
> 
> 赞同：1
> 
> 时间：2012-10-23T16:45:16.840
> 
> 标签：xpath, libxml2

```
<?xml>
<env>
<body>
<folderxml>
<folder id='1'>
 <folder id='2' name ='document'>
   <folder id='3' name ='Music'>
     <folder id= '4' name= 'album' xlink='true'>
     </folder>
   </folder>
</folder>
</folder>
</folderxml>
</body>
</env> 
```

如果属性“链接”为真，我需要路径。像 xpath.evaluate(path if(link=true)) 这样的东西。结果应该类似于“/documents/music/album”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:18:09.953

应用以下 XPath 表达式后（基于[XPath 教程](http://www.w3schools.com/xpath/xpath_syntax.asp)）：

```
xmlXPathEval("//*[@xlink='true']", doc) 
```

您将获得指向节点列表的链接。在示例中，它是一个`folder`带有`id` `4`. 然后你需要编写一个函数来遍历所有的父母并连接他们的`name`属性。

如果您只需要匹配文件夹的名称，那么您可以使用

```
xmlXPathEval("string(//*[@xlink='true']/@name)", doc) 
```

并读取`stringval`结果的成员。但这仅匹配第一个节点。

编辑：至于迭代父母的功能，我想到了通过`xmlNodePtr->parent`成员直接访问并使用`xmlGetProp`. 但是当我看到您的评论（以及问题的标题）时，我认为您可以使用相对 xpath 查询，请参阅[使用 libxml2 进行递归 XPath 查询的最有效方法是什么？](https://stackoverflow.com/q/1683081/772981).

# apache - 来自脚本路径的 a2ensite

> ID：13035385
> 
> 赞同：11
> 
> 时间：2012-10-23T16:45:21.703
> 
> 标签：apache, vhosts

我正在尝试在我的测试环境中自动化一些新的站点部署。我的脚本自动生成 apache vhost 文件

```
/etc/apache2/sites-available/testsite.com 
```

然后 a2ensite 通过相同的脚本运行

```
a2ensite /etc/apache2/sites-available/testsite.com 
```

我得到：

```
ERROR: No site found matching /etc/apache2/sites-available/testsite.com! 
```

该脚本以 root 身份运行。

我读到您必须从站点可用目录中获取 a2ensite 但如果这是通过脚本完成的，我将如何告诉 a2ensite 认为它在正确的目录中？

谢谢，

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-23T16:55:59.373

a2ensite 的[手册页](http://man.he.net/man8/a2ensite)没有明确提及，但实际上您应该只提供要启用的站点的名称，例如...

```
a2ensite testsite.com 
```

...而不是通向它的整个路径。

# css - css - 在页脚下方显示大量空间

> ID：13035386
> 
> 赞同：2
> 
> 时间：2012-10-23T16:45:24.703
> 
> 标签：css

请参阅此链接中的图像：

[https://docs.google.com/document/d/1r9L9eLBddMOdHAP3KfAx8ND-SF8b8zBl53o88aUbHT4/edit?pli=1](https://docs.google.com/document/d/1r9L9eLBddMOdHAP3KfAx8ND-SF8b8zBl53o88aUbHT4/edit?pli=1)

在上面的图片链接中，我已经用黑色矩形覆盖了页脚，我希望它应该始终位于最后一个，而底部没有任何边距。

实际上，当我删除页脚上方的 div 时，问题就出现了。我给你负责这个的代码：

HTML

```
<div id="footer">
<div class="shell">
      <!--content here-->
    </div>
     </div> 
```

CSS

```
.shell { width:988px; margin:0 auto; }
  #footer { height:44px; background:url(images/footer.gif); line-height:44px;
     color:#fff;              
       }
     #footer a{ color:#fff; } 
```

div-box 的 css 位于页脚上方。实际上，当我编辑边距底部时，这是负责任的，但我想知道如何在底部没有空间的情况下制作页脚。同时 div-box 的 CSS 是：

```
 .box { background:#fbfcfc; height:100%; padding:1px; margin-bottom:10px; } 
```

当我做margin-bottom：140px时，它在最后显示页脚。但我仍然想知道如何在底部没有空间的情况下在底部制作页脚，无论内容是短还是大。

请分享你的知识！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:28:57.037

更新：我的一个同事刚刚遇到了类似的问题，我只是碰巧认为这一次可能只用 CSS 就可以很容易地回答这个问题。一个简单的基于高度的媒体查询在这里非常适用于“一个应该位于内容底部的页脚，除非内容比视口短，在这种情况下，页脚应该与视口的底部对齐”时刻。如果是这样的话。可能这应该最有效：[http ://codepen.io/scrimothy/pen/qEivg](http://codepen.io/scrimothy/pen/qEivg)

最后，使用媒体查询高度并确定视口高度是高于还是低于主体和页脚的高度。然后使用媒体查询以不同方式处理这些事件，如链接所示。

**方法一：永远在底部**

如果你想让它总是放在底部，你可以设置

```
footer {
  position: absolute;
  bottom: 0;
} 
```

但是，这意味着如果您的页面内容比视口长，那么您将与在页脚文本后面运行的正文发生冲突。

**方法2：最小高度**

您还可以将 a 设置`min-height`为您的正文内容 div，以便您可以估计您认为用户视口的位置：

```
.body-content {
  min-height: 580px;
} 
```

这不会总是得到它，因此您可能在正文内容和页脚之间有太多空间（将页脚推到折叠下方），或者如果用户有一个更高的视口，您仍然可能在页脚和视口底部之间留有间隙窗口超出您的预期。

**方法 3：jQuery（两全其美）**

如果您已经在您的站点中使用 jQuery，那么这就是您要走的路。

```
var pageHeight = $('body').height(),
  footerHeight = $('footer').height();
if (pageHeight < $(window).height() - footerHeight) {
  $('footer').css({
    'position': 'absolute',
    'bottom': '0'
  });
} else {
  $('footer').css({
    'position': '',
    'bottom': ''
  });
} 
```

如果它是一个长页面，这将允许您的页脚与您的内容正常对齐，如果它是一个短页面，它将使用上面的方法 1。（将 css 属性设置为 ''，将它们从内联样式中删除，从而将它们放回其定义的设置）。

这是一个[带有短文本的演示](http://jsfiddle.net/scrimothy/BXC6t/) 和[一个带有长文本的演示](http://jsfiddle.net/scrimothy/BXC6t/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T14:30:19.760

另一件需要检查但不太明显的事情（我最近遇到了这个问题）是确保你没有页脚内容，即页脚内的元素，悬垂在页脚下方。如果您的页脚中有一个高度高于页脚高度的容器，则可能会发生这种情况。

这可以通过作为 Firefox Web Developer 插件的一部分的 Inspector 工具来检测。检查器在您悬停的每个元素周围放置一个虚线边框，您可以查看是否有段落或 div 之类的东西悬停在页脚下方的空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T11:49:34.063

我最近遇到了一个类似的问题 - 事实证明，主包装容器没有设置为溢出：隐藏，这立即为我解决了问题，也许在尝试将页脚设置为绝对位置之前仔细检查作为一个选项。

# ruby - Rails 2.3.5 嵌套路由替换/删除路由

> ID：13035394
> 
> 赞同：1
> 
> 时间：2012-10-23T16:45:36.857
> 
> 标签：ruby, namespaces, rake, routes

在 Rails 2.3.5 中。怎么能从

```
rake routes
(in /home/railsApp)
tv_shows     GET    /tv_shows(.:format)    {:controller=>"tv_shows", :action=>"index"}  
             POST   /tv_shows(.:format)    {:controller=>"tv_shows", :action=>"create"}
new_tv_show  GET    /tv_shows/new(.:format)   {:controller=>"tv_shows", :action=>"new"}
edit_tv_show GET    /tv_shows/:id/edit(.:format) {:controller=>"tv_shows", :action=>"edit"}
tv_show GET    /tv_shows/:id(.:format)     {:controller=>"tv_shows", :action=>"show"}
PUT    /tv_shows/:id(.:format)             {:controller=>"tv_shows", :action=>"update"}
DELETE /tv_shows/:id(.:format)             {:controller=>"tv_shows", :action=>"destroy"} 
```

到

```
rake routes
(in /home/railsApp)
tv_shows     GET    /tv/shows(.:format)    {:controller=>"tv/shows", :action=>"index"}  
             POST   /tv/shows(.:format)    {:controller=>"tv/shows", :action=>"create"}
new_tv_show  GET    /tv/shows/new(.:format)   {:controller=>"tv/shows", :action=>"new"}
edit_tv_show GET    /tv/shows/:id/edit(.:format) {:controller=>"tv/shows", :action=>"edit"}
tv_show GET    /tv/shows/:id(.:format)     {:controller=>"tv/shows", :action=>"show"}
PUT    /tv/shows/:id(.:format)             {:controller=>"tv/shows", :action=>"update"}
DELETE /tv/shows/:id(.:format)             {:controller=>"tv/shows", :action=>"destroy"} 
```

路由.rb

```
map.namespace :tv do |tv|
['shows', 'summaries'].each do |controller|
  tv.connect "#{controller}/:action",
    :controller => controller,
    :conditions => { :method => :get },
    :requirements => { :action => /auto_complete_for_\S+/ }
end

tv.resources :summaries
tv.resources :shows 
```

结尾

在数据库中，该表名为 tv_shows。但是在我的应用程序中，我有一个文件夹 tv，其中显示了一个文件。

```
App = ruby 1.8.6 and Rails 2.3.5 
```

你能给我指出好的嵌套路由，命名空间教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:19:14.257

我有

```
map.resources :tv_summaries  
map.resources :tv_shows 
```

我的 route.rb 文件中的所有内容都在评论这两行解决了问题。

# iphone - 当 Cordova 2 在 iPhone 的外部页面中加载时，“deviceready”没有触发

> ID：13035395
> 
> 赞同：3
> 
> 时间：2012-10-23T16:45:38.573
> 
> 标签：iphone, cordova, cordova-2.0.0

我的 Phonegap 应用程序加载一个 Web 应用程序，该`cordova.js`文件驻留在服务器上。例如，我正在调用像“http://mydomain.com/index.php”这样的 url，但`deviceready`事件根本没有触发。我使用`window.location = url;`. 我已经完成了所有的白名单，并且页面在应用程序中正确加载。还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:45:12.133

这是 Cordova.2.1.0 上的一个错误。他们已在 2.2.0 版本中修复，但仍未发布。我尝试了来自 github 的未发布版本，它对我来说工作正常。

您可以从这里下载新版本

[https://github.com/phonegap/phonegap](https://github.com/phonegap/phonegap)

# cocoa-touch - 如何在不使用 insertRowsAtIndexPaths 的情况下加载 fetchResultsController？

> ID：13035400
> 
> 赞同：0
> 
> 时间：2012-10-23T16:45:59.443
> 
> 标签：cocoa-touch, core-data, nsfetchedresultscontroller

我正在遍历一个文本数组，每次迭代我都是：

*   使用 initWithEntity:insertIntoManagedObjectContext 创建托管对象
*   解析文本
*   确定显示顺序

新创建的对象以表格视图结束。

由于 fetchResultsController 的超酷免费功能，当调用 insertIntoManagedObjectContext 时，单元格会自动插入到 tableview 中。

问题是处理每个新对象（~20ms）有轻微的延迟，并且文本行的顺序与正在更新的表格视图的顺序不同。这使得屏幕闪烁，因为所有单元格都弄清楚了它们的显示顺序，其他单元格迅速插入到它们后面。（如果不清楚，我可以发布这个效果的视频，我没想到会这么难描述。）

获取文本行并首先将它们解析到另一个数组中，然后将该数组插入到 moc 中是合乎逻辑的，但我不能，因为这些是托管对象，我不能只分配它们 - 我必须调用 initWithEntity:insertIntoManagedObjectContext，它会自动将单元格插入到 tableview 中。

在 didChangeObject 方法中取出 insertRowsAtIndexPaths:withRowAnimation 并在迭代完成时调用 reloadData 不起作用。（应该是？）

**我只希望在创建所有对象之前不要更新表。** 我看不到使用 fetchResultsController 的方法，即使没有它会很简单。正如我经常提出的关于 SO 的问题一样——*我在这里错过了*什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:20:59.970

要停止对表视图的更新，您只需将获取的结果控制器委托设置为`nil`：

```
self.controller.delegate = nil; 
```

要恢复更新，请再次设置委托，执行初始提取，然后重新加载表数据：

```
self.controller.delegate = self;
BOOL success = [controller performFetch:&error];
[self.tableView reloadData]; 
```

`performFetch`是必要的，因为获取结果控制器在它没有委托时不会跟踪对托管对象上下文的更改。

* * *

或者，您也可以在后台线程中添加数据，使用第二个托管对象上下文并仅在导入所有数据时保存该上下文。

主线程可以注册`NSManagedObjectContextDidSaveNotification`后台线程并调用`mergeChangesFromContextDidSaveNotification:`以刷新对象。

在这种情况下，不需要更改获取的结果控制器。

# c# - “未加载任何符号”- Silverlight 项目找不到 pdb 文件

> ID：13035402
> 
> 赞同：1
> 
> 时间：2012-10-23T16:46:15.013
> 
> 标签：c#, visual-studio, silverlight, iis-express

我有一个运行 Silverlight 应用程序的 Web 项目。由于大量的构建时间，我尝试使用“附加到进程”而不是在 Visual Studio 中的调试中运行。

当我构建完整的解决方案时，我可以很好地附加，但是当我进行更改并构建更改后的项目时，我得到“断点当前不会被命中。没有为此文档加载任何符号”。

如果我检查模块窗口并查看有问题的项目，我会看到“找不到或打开 PDB 文件”。我检查了加载信息，它显示“C:\Source\Project\Web\bin\myProject.pdb：PDB 与图像不匹配。：PDB 与图像不匹配。”

构建单个项目后，将更新以下文件： C:\Source\Project\Web\bin\myProjectName.pdb C:\Source\Project\Web\bin\myProjectName.dll C:\Source\Project\Web\ ClientBin\myProjectName.xap C:\Source\Project\bin\Debug\myProjectName.pdb C:\Source\Project\bin\Debug\myProjectName.dll C:\Source\Project\bin\Debug\myProjectName.xap C:\ Source\Project\myProjectName\obj\Debug\myProjectName.pdb C:\Source\Project\myProjectName\obj\Debug\myProjectName.dll C:\Source\Project\myProjectName\bin\Debug\myProjectName.pdb C:\Source\项目\myProjectName\bin\Debug\myProjectName.dll

所以一切看起来都很好。如果我进行完全重建，则会更新相同的文件。

我尝试将 build 文件夹的内容复制到 Web bin 文件夹中。我已经尝试为上述所有文件夹设置符号文件位置。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:50:13.380

我发现在调试 Silverlight 项目时，我必须确保项目使用 IE 浏览器启动。我不确定这是否是你的问题，因为它可能是任何事情——不过只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:55:06.750

你确定 C:\Source\Project\Web\ClientBin\myProjectName.xap 文件正在改变。检查 FileLastWriteDate。并关注我之前关于这个问题的帖子。

[https://stackoverflow.com/a/12781653/413032](https://stackoverflow.com/a/12781653/413032)

希望有所帮助。

# c - 如何轮询C中的键盘键？

> ID：13035409
> 
> 赞同：1
> 
> 时间：2012-10-23T16:47:00.953
> 
> 标签：c

我正在为 Mac 寻找某种替代 kbhit() 的方法，这将允许我轮询特定键盘键的状态。我唯一的要求是它不被阻塞，或者要求我按回车键。我在这个网站上看到了一些类似的帖子，但它们似乎都被屏蔽了。

我真的只是希望能够运行一个循环并检查在每个循环期间是否按下或未按下特定键，而不会减慢或阻塞循环的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:54:41.907

来自 c-faq：

“编写kbhit的代码片段集合”

[http://c-faq.com/osdep/kbhit.txt](http://c-faq.com/osdep/kbhit.txt)

# .net - 公司拥有所有大写字母时的命名空间命名指南

> ID：13035410
> 
> 赞同：4
> 
> 时间：2012-10-23T16:47:02.613
> 
> 标签：.net, namespaces, naming-conventions

当使用 company 作为命名空间标识符的一部分时，如果公司名称由多个单词组成并且全部为大写字母，应该怎么称呼它？

请注意，公司的网站、他们的所有文件和每份印刷材料都使用此表格，因此这不仅仅是品牌/徽标的问题 - 这就是公司名称的实际使用方式。

以名为“ **FASTDATA** ”的公司为例

有许多变化可以适用

```
Fastdata.Product.Feature
FastData.Product.Feature
FASTDATA.Product.Feature

MyCompany.Product.Integration.Fastdata
MyCompany.Product.Integration.FastData
MyCompany.Product.Integration.FASTDATA 
```

我一直在阅读[Framework Design Guidelines: Conventions, Idioms, and Patterns for Reusable .NET Libraries, Second Edition](http://my.safaribooksonline.com/book/programming/microsoft-dotnet/9780321545671)，但似乎没有针对这种情况的指导......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:49:48.897

这在某种程度上是一个选择问题。这里最重要的是一致性。

“框架设计指南”一书确实建议使用“在选择名称空间名称的第一部分时使用公司或组织的正式名称”（通过 Brad Abrams，第 56 页），这表明适当的选择是：

```
FASTDATA.Product.Feature 
```

这在第 57 页的标题为“ **DO** use PascalCasing”的部分中进一步扩展：

> 如果你的品牌使用非传统的大小写，你应该遵循你的品牌定义的大小写，即使它偏离了正常的命名空间大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:51:06.120

第一个是指南选择，假设您正在为某个公司 FastData 创建一个项目。

# javascript - django ajax 发布 403 被禁止

> ID：13035412
> 
> 赞同：12
> 
> 时间：2012-10-23T16:47:04.983
> 
> 标签：javascript, ajax, django, http-post, http-status-code-403

使用 django 1.4 时，当我尝试从我的 javascript 发布我的 django 服务器时出现 403 错误。尽管问题仅出在帖子上，但我的 get 工作正常。还尝试了@csrf_exempt，但没有运气

更新：我现在可以发布我添加了`{% csrf_token %}`，但是发布响应是空的，虽然 GET 正确，有什么想法吗？

我的 Django 视图：

```
@csrf_protect
def edit_city(request,username):
    conditions = dict()

    #if request.is_ajax():
    if request.method == 'GET':
        conditions = request.method

    elif request.method == 'POST':
        print "TIPO" , request.GET.get('type','')       
        #based on http://stackoverflow.com/a/3634778/977622     
        for filter_key, form_key in (('type',  'type'), ('city', 'city'), ('pois', 'pois'), ('poisdelete', 'poisdelete'), ('kmz', 'kmz'), ('kmzdelete', 'kmzdelete'), ('limits', 'limits'), ('limitsdelete', 'limitsdelete'), ('area_name', 'area_name'), ('action', 'action')):
            value = request.GET.get(form_key, None)
            if value:
                conditions[filter_key] = value
                print filter_key , conditions[filter_key]

        #Test.objects.filter(**conditions)
    city_json = json.dumps(conditions)

    return HttpResponse(city_json, mimetype='application/json') 
```

这是我的 javascript 代码：

```
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');

function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
function sameOrigin(url) {
    // test that a given url is a same-origin URL
    // url could be relative or scheme relative or absolute
    var host = document.location.host; // host + port
    var protocol = document.location.protocol;
    var sr_origin = '//' + host;
    var origin = protocol + sr_origin;
    // Allow absolute or scheme relative URLs to same origin
    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
}
$.ajaxSetup({
beforeSend: function(xhr, settings) {
    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
        // Only send the token to relative URLs i.e. locally.
        xhr.setRequestHeader("X-CSRFToken",
                             $('input[name="csrfmiddlewaretoken"]').val());
    }
}
});

$.post(url,{ type : type , city: cityStr, pois: poisStr, poisdelete: poisDeleteStr, kmz: kmzStr,kmzdelete : kmzDeleteStr,limits : limitsStr, area_nameStr : area_nameStr , limitsdelete : limitsDeleteStr},function(data,status){
                    alert("Data: " + data + "\nStatus: " + status);
                    console.log("newdata" + data.area_name)
                }); 
```

我也尝试过没有运气的网站：

```
$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
            // Send the token to same-origin, relative URLs only.
            // Send the token only if the method warrants CSRF protection
            // Using the CSRFToken value acquired earlier
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T18:13:57.237

您实际上可以将它与您的数据一起传递**{csrfmiddlewaretoken:'{{csrf_token}}' }**，它一直有效

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T01:48:43.893

就我而言，我有一个模板，我不想在其中包含`<form></form>`元素。但我仍然想使用 jQuery 发出 AJAX POST 请求。

由于 CSRF cookie 为空，我得到了 403 错误，即使我遵循了 django 文档（[https://docs.djangoproject.com/en/1.5/ref/contrib/csrf/](https://docs.djangoproject.com/en/1.5/ref/contrib/csrf/)）。解决方案在同一页面中，提到了`ensure_csrf_cookie`装饰器。

当我在我的顶部添加这个时，我的 CSRF cookie 确实被设置了`views.py`：

```
from django.views.decorators.csrf import ensure_csrf_cookie
@ensure_csrf_cookie 
```

另外，请注意，在这种情况下，您的标记/模板中*不需要DOM 元素：*`{% csrf_token %}`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T12:30:58.263

`{% csrf_token %}`通过在我的模板中的表单中添加某处使其工作

# mysql - mysql别名应该如何访问？

> ID：13035420
> 
> 赞同：0
> 
> 时间：2012-10-23T16:47:51.240
> 
> 标签：mysql

鉴于这是在 mysql 脚本中定义的：

```
`Project1`.`Id` AS `Id1d334656-0d51-4bf6-bb08-6c25d01e7745` 
```

这是否意味着

```
`Project1`.`Id` 
```

不再可以通过该名称访问，并且只能通过

```
`Project1`.`Id1d334656-0d51-4bf6-bb08-6c25d01e7745` 
```

?

背景：这个脚本是由 MySqlConnector/net 生成的，这是生成的命令的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:48:59.303

别名没有表分配，所以它只是`ID1d3346etc....`. 如果他们这样做了，那将破坏别名的目的，例如

```
select table1.x AS abc, table2.x AS abc 
```

将是一个错误，即使这两个别名来自不同的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:50:20.817

是的。它很像在选择时重命名列。在查询之外，`select`应使用别名引用列，但在选择查询中，您应该使用表列，例如：

```
 select col1 as a
  from table b
  where col1 = 'xxx'; 
```

但在选择查询之外，应使用别名：

```
select a 
from (select col1 AS a From table) b
where a = 'xxxx'; 
```

如果您尝试使用表列，它将失败：

```
<<----FAILURE -->
select col1 
from (select col1 AS a From table) b
where a = 'xxxx'; 
```

# ruby-on-rails - 用 Ruby 思考

> ID：13035426
> 
> 赞同：8
> 
> 时间：2012-10-23T16:48:22.703
> 
> 标签：ruby-on-rails, ruby, activerecord

我目前正忙于学习 Ruby 和 Rails，由于我有基于 C 语言的背景，Ruby 的一些概念是新的，有些陌生。对我来说尤其具有挑战性的是适应解决常见问题的“Ruby 方式”，因此我经常发现自己在 Ruby 中编写 C 代码，这不是我想要实现的目标。

想象一下有这样的模式：

```
ActiveRecord::Schema.define(:version => 20111119180638) do
    create_table "bikes", :force => true do |t|
        t.string   "Brand"
        t.string   "model"
        t.text     "description"
    end
end 
```

该数据库已经包含几种不同的自行车。我的目标是获取数据库中代表的所有品牌的数组。

这是我的代码：

```
class Bike < ActiveRecord::Base
    def Bike.collect_brands
        temp_brands = Bike.find_by_sql("select distinct brand from bikes")
        brands = Array.new
        temp_brands.each do |item|
          brands.push(item.brand)
        end
        brands
    end
end 
```

Ruby 大师将如何编写代码来实现这一目标？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T16:49:58.183

tl; dr：您的整个方法可以替换为`Bike.uniq.pluck(:brand)`.

* * *

此功能已经存在（请参阅我的答案的结尾），但首先，让我们单步执行您的代码并使其更加惯用：

首先，每级缩进使用两个空格，而不是四个，不是八个，*也不*是制表符。使用*两个空格*。这不是个人喜好，这是 Ruby 社区中一个*非常*强大的约定，如果您打算参与，这几乎是必需的。

接下来，几乎*没有*充分的理由在 Ruby 中使用这种模式：

```
 brands = Array.new
 temp_brands.each do |item|
   brands.push(item.brand)
 end 
```

当您想通过对输入数组中的每个值应用一些代码来将一个数组转换为另一个数组（实际上，一个 Enumerable 到另一个 Enumerable）时，请使用[`map`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)or [`collect`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)（它们是同义词）：

```
brands = temp_brands.map { |item| item.brand } 
```

接下来，您可以利用[`symbol#to_proc`](http://pragdave.pragprog.com/pragdave/2005/11/symbolto_proc.html)使上面的代码更清晰一点：

```
brands = temp_brands.map &:brand 
```

对于外行来说，这看起来很奇怪，但是一旦你习惯了使用and*就会更*清楚。稍微体验一下，这行代码的意图就很明显了：就是将方法应用到数组中的每个元素上，和之前的版本完全等价。`map``&:field``brand``{ |item| item.brand }`

现在，你的整个方法可以变成一个非常简单的单行：

```
def Bike.collect_brands
  Bike.find_by_sql("select distinct brand from bikes").map &:brand
end 
```

内联 select/distinct SQL 有点难看，特别是因为 ActiveRecord 已经允许我们使用[选择特定字段](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields)，`select`并使用 使结果不同`uniq`：

```
def Bike.collect_brands
  Bike.select(:brand).uniq.map &:brand
end 
```

作为最终迭代，我们可以使用[`pluck`](http://guides.rubyonrails.org/active_record_querying.html#pluck)而不是`map`仅从我们感兴趣的结果中提取字段。但是，由于`pluck`实际上将生成的 SQL 修改为仅包含正在提取的字段，我们可以省略该`select(:brand)`部分，并且我们的代码归结为包含两个链接方法的非常短的单行：

```
def Bike.collect_brands
  Bike.uniq.pluck(:brand)
end 
```

请注意，顺序很重要，因为`pluck`总是返回一个数组，而不是准备好用于附加方法链接的 ActiveRecord 关系。`Bike.pluck(:brand).uniq`将从每条记录 ( `select brand from bikes`) 中选择品牌，然后*在 Ruby*中将数组缩减为唯一项。可能是非常昂贵的操作。

就是这样，`Bike.uniq.pluck(:brand)`。作为 C 程序员，您会发现许多您习惯于使用小循环执行的重复性任务实际上*已经*通过语言本身或支持库为您解决了。一旦您学会了编写惯用的 Ruby 和 Rails 代码，您*不*编写的代码量就会非常惊人。

# c# - RazorGenerator、模板和@Html

> ID：13035427
> 
> 赞同：6
> 
> 时间：2012-10-23T16:48:28.350
> 
> 标签：c#, asp.net-mvc-3, template-engine, razorgenerator

我正在尝试使用[RazorGenerator](http://razorgenerator.codeplex.com/)作为电子邮件模板引擎。我想用数据建立一个模型，组装正确的部分视图集，并返回我可以通过电子邮件发送的 HTML。
**编辑：**除了这个工作流程之外，任何解决方案都需要可编辑为 .cshtml 文件，并且*能够编译成 dll*。由于各种原因，部署 cshtml 文件本身是不切实际的——如果我们不能将所有剃刀视图嵌入到单个文件中，那么我们就不能使用该建议。因此 RazorGenerator。

到目前为止，我已经完成了它的每个部分，除了部分。当我尝试在模板文件中使用 @Html.Partial() 时，我得到：`The name 'Html' does not exist in the current context`.

基于[这个答案](https://stackoverflow.com/a/8562176/298754)，我知道`@Html`默认情况下这不是 Razor 的一部分，并且有很多关于如何`HtmlHelper`在控制器中创建 a 的答案。但是，我需要在模板中创建一个模板，该模板没有`ControllerContext`我需要遵循这些示例的模板。

我也尝试过使用@Include，但 RazorGenerator 模板似乎不支持它。 **编辑：**我还尝试创建一个新类，它继承`TemplateBase<>`并复制了 的所有功能`RazorTemplateBase`，但我得到`NullReferenceException`了 s 就`@Include`行了。

所以，我的主要问题是：有没有更好的方法将另一个 Razor 文件（带模型）包含到我的文件中？

其次，如果没有更好的方法，我怎样才能创建 HtmlHelper？

* * *

**编辑赏金：**重申一下，我在可接受的答案中需要的四件事是：

1.  使用标准编辑器编辑文件的能力`.cshtml`（没有“将其存储为字符串”等）
2.  将所有内容编译成单个 dll 的能力，该 dll 可以使用我们当前的构建系统进行部署（我们无法部署大量单独的 .cshtml）
3.  从另一个引用一个 .cshtml 文件并传递模型的能力 - 等效于`@Includes`或`@Html.Partial`（如果它们工作，它们中的任何一个都是完全可以接受的）
4.  通过电子邮件发送结果和附件的能力。（如果结果是字符串或可转换为字符串，我已经有这方面的代码。）

我目前可以得到其中三个工作的大多数组合，但我不能一次得到所有四个。我愿意接受新的库，替换 RazorGenerator，或者丢弃我已有的任何部分，只要结果按需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:01:23.163

只是一个想法，但是为什么你不能设置其他页面并在你的控制器代码中打开一个 HTTPWebRequest / WebClient 在那里发送你需要的数据，从那个视图中获取所有的 html/文本，将几个调用合并在一起，然后发送电子邮件出所有的字符串。

```
public ActionResult SomeAction() {
  // call other section logic using HttpWebRequest or WebClient
  // /controller/emailsection/{vars}/......
  // Get the string out of the request add it to ViewData["xxx"]
  // rinse and repeat for other sections

}

public ActionResult EmailSection() {
  //put section logic here

  Response.ContentType = "text/html"; // "text/plain"
  Response.Write("Some HttpWebResponse");
  return null;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T05:25:27.673

这是你想要的吗？

[将视图渲染为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string/2759898#2759898)

[如何在 ASP.Net/MVC 中通过电子邮件发送屏幕](https://stackoverflow.com/questions/1403167/how-to-email-screen-in-asp-net-mvc/2249319#2249319)

[http://www.brightmix.com/blog/how-to-renderpartial-to-string-in-asp-net-mvc/](http://www.brightmix.com/blog/how-to-renderpartial-to-string-in-asp-net-mvc/)

# perl - Set-Cookie 然后重定向在 perl CGI 下工作，但不是 mod_perl

> ID：13035432
> 
> 赞同：0
> 
> 时间：2012-10-23T16:48:44.837
> 
> 标签：perl, cgi, mod-perl2

我在设置 cookie 然后在 mod_perl 下重定向时遇到了一个有趣的问题。到目前为止，我有一个常规的 cgi 环境，设置 cookie/redirect 从来都不是问题；一切都按预期进行。然而，当我打开 mod_perl 时，我得到一个状态 200 和一个带有重定向 url 的 html 正文。cookie 总是放在标题之后和文档正文之前，即使我在重定向之前打印它。我将脚本精简为基本内容，以便您了解我的意思：

```
#!/usr/local/bin/perl

use strict;
use warnings;

use CGI;

my $cgi = new CGI;

my $cookie = CGI::cookie(
  '-name'     => 'joe',
  '-value'    => 'fred',
  '-path'     => '/cgi-bin',
  '-httponly' => 1,
);
print "Set-Cookie: $cookie\n";

print $cgi->redirect(-uri => 'http://example.com/cgi-bin/joe.cgi', -status => 303); 
```

当我在常规 CGI 下使用 curl 进行测试时，我得到（为简洁起见，域名被替换和剪断）：

```
< HTTP/1.1 303 See Other
< Date: Tue, 23 Oct 2012 16:26:55 GMT
< Server: Apache/2.2.22 (Ubuntu)
< Set-Cookie: joe=fred; path=/cgi-bin; HttpOnly
< Location: http://example.com/cgi-bin/joe.cgi
< Content-Length: 0 
```

...这是我所期望的。当我在 mod_perl 下测试它时，我得到：

```
< HTTP/1.1 200 OK
< Date: Tue, 23 Oct 2012 16:26:38 GMT
< Server: Apache/2.2.22 (Ubuntu)
< Location: http://example.com/cgi-bin/joe.cgi
< Transfer-Encoding: chunked
<
Set-Cookie: joe=fred; path=/cgi-bin; HttpOnly
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The answer to your request is located <a href="http://example.com/cgi-bin/joe.cgi">here</a>.</p>
<hr>
<address>Apache/2.2.22 (Ubuntu) Server at example.com Port 80</address>
</body></html> 
```

我在日志中没有收到任何警告。知道为什么 mod_perl 决定以这种奇怪的方式处理这个重定向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T03:11:39.963

IIRC 将其在[CGI 中解释为 mod_perl 移植。mod_perl 编码指南](http://perl.apache.org/docs/1.0/guide/porting.html)

`$cgi->redirect( -cookie => $cookie, ... )` 基本上，如果您使用Mixing`$cgi->header`和 print "header\n" 不会在 mod_perl 下可靠地工作，它会按照您的预期工作，选择一个或另一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:49:25.293

实际上为我解决了所有问题的是：

```
my $r = Apache2::RequestUtil->request;
$r->err_headers_out->add('Set-Cookie' => $cookie); 
```

...用于我的 cookie 处理。如果您决定稍后重定向，这可以确保 cookie 将起作用。

我试图避免用 mod_perl 污染我的纯 cgi 脚本，这样我就可以来回切换，但对此有所妥协。所有其他标头处理现在都可以正常工作。

# delegates - C++/CLI 中的垃圾收集委托

> ID：13035433
> 
> 赞同：1
> 
> 时间：2012-10-23T16:48:53.170
> 
> 标签：delegates, interop, c++-cli

我在 C++ 中有一个观察者模式，我允许通过 C++/CLI 包装器从 C# 访问它。我发现它在垃圾收集方面没有按预期工作。我遇到了`Call has been made on garbage collected delegate`错误，但据我所知，我**坚持**对委托的托管引用（通过 listeners_ 字典），所以我不明白为什么它会被 GC 处理。

在这里，我只是展示了 C++/CLI 包装器代码，它实现了与包装的 C++ 代码相同的接口（出于示例目的，我已将其放入“本机”命名空间中）。

我将非托管更新转发给托管委托的方式、我如何保留托管委托或我如何实现 addListener/removeListener 函数是否有问题？

```
using namespace System::Runtime::InteropServices;
using namespace System::Collections::Generic;
typedef boost::shared_ptr<native::IterationListener> IterationListenerPtr;

public ref struct IterationListener
{
    enum class Status {Ok, Cancel};

    ref struct UpdateMessage
    {
        UpdateMessage(int iterationIndex, int iterationCount, System::String^ message);

        property System::String^ message;
        property int iterationIndex;
        property int iterationCount;
    };

    IterationListener();

    virtual Status update(UpdateMessage^ updateMessage) {return Status::Ok;}
};

public delegate IterationListener::Status IterationListenerUpdate(IterationListener::UpdateMessage^ updateMessage);

#define DEFINE_INTERNAL_BASE_CODE(CLIType, NativeType) \
public:   System::IntPtr void_base() {return (System::IntPtr) base_;} \
internal: CLIType(NativeType* base, System::Object^ owner) : base_(base), owner_(owner) {} \
          CLIType(NativeType* base) : base_(base), owner_(nullptr) {} \
          virtual ~CLIType() {if (owner_ == nullptr) {SAFEDELETE(base_);}} \
          !CLIType() {delete this;} \
          NativeType* base_; \
          System::Object^ owner_; \
          NativeType& base() {return *base_;}

public ref class IterationListenerRegistry
{
    DEFINE_INTERNAL_BASE_CODE(IterationListenerRegistry, native::IterationListenerRegistry);
    System::Collections::Generic::Dictionary<IterationListener^,
                                             KeyValuePair<IterationListenerUpdate^, System::IntPtr> >^ _listeners;

    public:

    IterationListenerRegistry();

    void addListener(IterationListener^ listener, System::UInt32 iterationPeriod);
    void addListenerWithTimer(IterationListener^ listener, double timePeriod); // seconds
    void removeListener(IterationListener^ listener);

    IterationListener::Status broadcastUpdateMessage(IterationListener::UpdateMessage^ updateMessage);
};

IterationListener::IterationListener()
{
}

IterationListener::UpdateMessage::UpdateMessage(int iterationIndex,
                                                int iterationCount,
                                                System::String^ message)
{
    this->iterationIndex = iterationIndex;
    this->iterationCount = iterationCount;
    this->message = message;
}

struct IterationListenerForwarder : public native::IterationListener
{
    typedef IterationListener::Status (__stdcall *IterationListenerCallback)(IterationListener::UpdateMessage^);
    IterationListenerCallback managedFunctionPtr;

    IterationListenerForwarder(void* managedFunctionPtr)
        : managedFunctionPtr(static_cast<IterationListenerCallback>(managedFunctionPtr))
    {}

    virtual Status update(const UpdateMessage& updateMessage)
    {
        if (managedFunctionPtr != NULL)
        {
            IterationListener::UpdateMessage^ managedUpdateMessage =
                gcnew IterationListener::UpdateMessage(updateMessage.iterationIndex,
                                                       updateMessage.iterationCount,
                                                       ToSystemString(updateMessage.message));
            return (Status) managedFunctionPtr(managedUpdateMessage);
        }

        return Status_Ok;
    }
};

IterationListenerRegistry::IterationListenerRegistry()
{
    base_ = new native::IterationListenerRegistry();
    _listeners = gcnew Dictionary<IterationListener^, KeyValuePair<IterationListenerUpdate^, System::IntPtr> >();
}

void IterationListenerRegistry::addListener(IterationListener^ listener, System::UInt32 iterationPeriod)
{
    IterationListenerUpdate^ handler = gcnew IterationListenerUpdate(listener, &IterationListener::update);
    IterationListenerPtr forwarder(new IterationListenerForwarder(Marshal::GetFunctionPointerForDelegate(handler).ToPointer()));
    _listeners->Add(listener, KeyValuePair<IterationListenerUpdate^, System::IntPtr>(handler, System::IntPtr(&forwarder)));
    base().addListener(forwarder, (size_t) iterationPeriod);
}

void IterationListenerRegistry::addListenerWithTimer(IterationListener^ listener, double timePeriod)
{
    IterationListenerUpdate^ handler = gcnew IterationListenerUpdate(listener, &IterationListener::update);
    IterationListenerPtr forwarder(new IterationListenerForwarder(Marshal::GetFunctionPointerForDelegate(handler).ToPointer()));
    _listeners->Add(listener, KeyValuePair<IterationListenerUpdate^, System::IntPtr>(handler, System::IntPtr(&forwarder)));
    base().addListenerWithTimer(forwarder, timePeriod);
}

void IterationListenerRegistry::removeListener(IterationListener^ listener)
{
    base().removeListener(*static_cast<native::IterationListenerPtr*>(_listeners[listener].Value.ToPointer()));
    _listeners->Remove(listener);
}

IterationListener::Status IterationListenerRegistry::broadcastUpdateMessage(IterationListener::UpdateMessage^ updateMessage)
{
    std::string message = ToStdString(updateMessage->message);
    native::IterationListener::UpdateMessage nativeUpdateMessage(updateMessage->iterationIndex,
                                                            updateMessage->iterationCount,
                                                            message);
    return (IterationListener::Status) base().broadcastUpdateMessage(nativeUpdateMessage);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:22:12.313

```
IterationListenerUpdate^ handler = gcnew IterationListenerUpdate(listener, &IterationListener::update);
IterationListenerPtr forwarder(new IterationListenerForwarder(Marshal::GetFunctionPointerForDelegate(handler).ToPointer())); 
```

有点需要努力，但我认为是这段代码。您的*处理程序*变量是方法的局部变量并存储委托对象。然后，您将从它初始化的 thunk 传递给本机代码。在此之后，没有对该委托对象的实时引用。所以下一个 GC 将收集它。当它试图进行回调时，这会破坏 thunk。

您需要将*处理程序*存储在 GC 可以看到的地方。就像你的类的一个字段（假设类对象的寿命足够长）或一个静态变量。只要本机代码可以进行回调，您必须确保它保持可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:51:36.903

问题确实出在：

```
IterationListenerUpdate^ handler = gcnew IterationListenerUpdate(listener, &IterationListener::update);
IterationListenerPtr forwarder(new IterationListenerForwarder(Marshal::GetFunctionPointerForDelegate(handler).ToPointer()));
_listeners->Add(listener, KeyValuePair<IterationListenerUpdate^, System::IntPtr>(handler, System::IntPtr(&forwarder)));
base().addListener(forwarder, (size_t) iterationPeriod); 
```

我在堆栈上创建了一个 shared_ptr (IterationListenerPtr) 并将它的地址保存在 _listeners 字典中。一旦 shared_ptr 超出范围，该地址就不再有效。可能阻止所有地狱崩溃的是这样一个事实，即 shared_ptr 的内容通过将其传递给本机代码（它保存 shared_ptr 的副本，而不是它的地址）来保持活动状态。

但是，我仍然不确定为什么当我在完全调试模式下运行时这没有触发某种警报。当我很确定这不是问题时，我仍然不确定为什么它触发了委托已收集垃圾的 MDA。在我看来，这正是使用调试分配器和本机运行时检查应该找到的那种错误。:(

修复很简单：

```
IterationListenerUpdate^ handler = gcnew IterationListenerUpdate(listener, &IterationListener::update);
IterationListenerPtr* forwarder = new IterationListenerPtr(new IterationListenerForwarder(Marshal::GetFunctionPointerForDelegate(handler).ToPointer()));
_listeners->Add(listener, KeyValuePair<IterationListenerUpdate^, System::IntPtr>(handler, System::IntPtr(forwarder)));
base().addListener(*forwarder, (size_t) iterationPeriod); 
```

我只需要确保在析构函数或 removeListener() 中删除它。

# pdf - Adobe Reader 中嵌入的 TrueType 字体

> ID：13035434
> 
> 赞同：2
> 
> 时间：2012-10-23T16:48:57.130
> 
> 标签：pdf, fonts, pdf-generation, truetype, adobe-reader

`TrueType`我根据 Adob​​e 手册在 pdf 文件中嵌入了字体：

```
7 0 obj 
<<
/BaseFont /Arial
/FirstChar 32
/LastChar 126
/Subtype /TrueType
/FontDescriptor 8 0 R
/Widths 59 0 R
/Type /Font
>> 
```

它可以在大多数 PDF 查看器中完美运行，例如 Evince、Xournal、PDF Editor 等；但它在 Adob​​e Reader XI 中不起作用。它根本不显示任何文本（显示图纸）。在 PDF 属性中，它没有我的嵌入字体。看来，Adobe Reader 无法找到嵌入的字体。但是 Adob​​e Reader 与其他 PDF 查看器有什么区别。

更新：最初，我从 PDF 手册中复制了文本，非法字符是 Unicode 减号。这是该文件的更新版本。仍然，它不显示嵌入的字体，而是默认的替代字体。

[PDF文件](http://ge.tt/2RQU06Q/v/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:46:26.787

可能还有其他问题，但乍一看，我可以看到您的字体描述符已损坏：

```
8 0 obj 
<<
/FontName /Acens
/StemV 105
/Leading 83
/FontFile2 10 0 R
/Ascent 720
/Flags 262178
/XHeight 394
/AvgWidth 478
/Descent âˆ’270
/ItalicAngle 0
/StemH 45
/MaxWidth 1212
/MissingWidth 255
/FontBBox [âˆ’177 âˆ’269 1123 866] <- This guy here does not look very well
/Type /FontDescriptor
/CapHeight 660
>>
endobj 
```

除了 Acrobat 之外，您尝试过的所有读者很可能都只是忽略了这个问题并假设了某种“默认”值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:40:55.963

除了字体描述符损坏之外，FontFile2 流字典不完整：

```
8 0 obj 
<<
[...]
/FontFile2 10 0 R
[...]
>> 
endobj 
10 0 obj 
<<
/Length 29061
>>
stream 
[...] 
```

根据规范 (ISO 32000-1:2008) 缺少 Length1 条目：

> （Type 1 和 TrueType 字体需要）Type 1 字体程序或整个 TrueType 字体程序的明文部分在使用流的过滤器条目指定的过滤器（如果有）解码后的长度（以字节为单位） .

# java - Hibernate 正确映射映射

> ID：13035441
> 
> 赞同：0
> 
> 时间：2012-10-23T16:49:31.390
> 
> 标签：java, hibernate, jakarta-ee

我在 Hibernate 中有以下课程

```
@Entity
@Table(name="MODEL")
public class Model {

    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment", strategy = "increment") 
    Long id;

  @ElementCollection(fetch=FetchType.EAGER)
    @CollectionTable
    (
        name="DEVICE_LiCENSE_ATTRIBUTE",
        joinColumns=@JoinColumn(name="DEVICE")
    )
    @MapKeyJoinColumn(name="LICENSE_ATTRIBUTE",nullable=false)
    Map<String,SoftwareLicense> softwareLicenses = new HashMap<String, SoftwareLicense>();

} 
```

这是我的嵌入式类

```
@Embeddable
public class SoftwareLicense {

    @Column(name = "Type", nullable = false)
    @Enumerated(EnumType.STRING)
    private Type type;

    @Column(name = "VALUE", nullable = false)
    private String value;
} 
```

现在，当我运行 Hibernate 时，构建表是正确的

```
create table DEVICE_LiCENSE_ATTRIBUTE (DEVICE bigint not null, Type varchar(255) not null, VALUE varchar(255) not null, softwareLicenses_KEY varchar(255), primary key (DEVICE, softwareLicenses_KEY)) 

create table DMS_DEVICE_MODEL (id bigint not null, DESCRIPTION varchar(255) not null, DISPLAYNAME varchar(255) not null, UNIQUENAME varchar(255) not null, primary key (id), unique (UNIQUENAME)) 
```

创建表时出现我的问题`DEVICE_LICENSE_ATTRIBUTE`。

只需查看 DEVICE_LICENSE_ATTRIBUTE 表：

`softwareLicenses_KEY varchar(255)`可以为空，Hibernate 尝试在可以为空的行上创建复合主键。

```
primary key (DEVICE, softwareLicenses_KEY) 
```

它适用于某些数据库（HSQLDB），但将我的代码切换到另一个环境（MS SQL 2008）会给我一个错误。

```
Cannot define PRIMARY KEY constraint on nullable column in table 'DEVICE_LICENSE_ATTRIBUTE' 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:47:35.977

我的映射是错误的：

映射它的正确方法是使用 map column 属性：

```
 @ElementCollection(fetch=FetchType.EAGER)
 @MapKeyColumn(name = "LICENSE_NAME", insertable = false, updatable = false) 
    @CollectionTable
    (
        name="DEVICE_LiCENSE_ATTRIBUTE",
        joinColumns=@JoinColumn(name="DEVICE")
    )
    @MapKeyJoinColumn(name="LICENSE_ATTRIBUTE",nullable=false)
    Map<String,SoftwareLicense> softwareLicenses = new HashMap<String, SoftwareLicense>(); 
```

回家对某人会有帮助。

# c# - 在 C# 中获取 Web 浏览器的当前 URL

> ID：13035442
> 
> 赞同：2
> 
> 时间：2012-10-23T16:49:39.660
> 
> 标签：c#

如何在文本框中获取当前 url（在网络浏览器中打开的 url）？

例如：

webBrowser1.Url=new Uri("http://stackoverflow.com");

我的浏览器打开了链接！

现在我想在文本框中获取 url (http://stackoverflow.com)

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:51:41.033

```
yourTextBox.Text = webBrowser1.Url.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:51:25.117

```
Result : http://localhost:1302/TESTERS/Default6.aspx
string url = HttpContext.Current.Request.Url.AbsoluteUri;

result : /TESTERS/Default6.aspx
string path = HttpContext.Current.Request.Url.AbsolutePath;

result : localhost
string host = HttpContext.Current.Request.Url.Host; 
```

# postgresql - heroku pg:sql --app 尝试连接到错误的主机

> ID：13035448
> 
> 赞同：2
> 
> 时间：2012-10-23T16:49:58.383
> 
> 标签：postgresql, heroku, pg, psql

我刚刚在 heroku 上部署了我的生产应用程序。

我仍然可以使用以下方法毫无问题地访问我的暂存数据库：

```
heroku pg:psql --app staging-app 
```

但是当我尝试为生产做同样的事情时：

```
heroku pg:psql --app production-app 
```

我收到连接超时和错误提示主机 xxx 未在端口 5432 上侦听。

当我访问 heroku 网站并获取生产数据库的设置时，它显示它正在主机上运行`yyy`（即*不是* `xxx`）。谁能告诉我如何让 pg:psql 命令连接到正确的主机？

Web 服务器似乎可以毫无问题地连接到数据库，如果我运行：

```
heroku run --app production-app rails console 
```

然后我可以通过 ActiveRecord 查看数据库中的记录。

顺便说一句，命令：

```
heroku pg:info --app production-app 
```

给出这些结果：

```
=== HEROKU_POSTGRESQL_MAROON
Plan:        Dev
Status:      available
Connections: 0
PG Version:  9.1.5
Created:     2012-08-08 17:55 UTC
Data Size:   5.9 MB
Tables:      0
Rows:        0/10000 (In compliance)
Fork/Follow: Unavailable

=== SHARED_DATABASE (DATABASE_URL)
Data Size: 600k 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T22:14:57.340

显然正确的命令是：

```
heroku pg:psql HEROKU_POSTGRESQL_MAROON --app production-app 
```

因此，数据库名称和`--app`参数都是必需的（出于某种原因，我遇到的所有运行此命令的示例都做了一个或另一个，但不是两者都做）。

我猜即使由于存在 SHARED_DATABASE 数据库（该数据库在我的登台应用程序中不存在）而指定了应用程序，也需要数据库名称。

顺便说一句，当我意识到我正在使用现已弃用的 heroku gem 并切换到 heroku 工具带时，我找到了这个问题的答案，而不是尝试连接到无效的主机并在 60 秒后超时，实际上打印了一个半有用的消息：

```
 !    Unknown database. Valid options are: HEROKU_POSTGRESQL_MAROON_URL, SHARED_DATABASE 
```

（我认为它是半有用的，因为您必须足够了解才能`_URL`从数据库名称中删除该部分。）

* * *

**更新：**

* * *

在尝试部署我的应用程序时，我发现诸如此类`rake db:setup`的事情无法正常工作，因为它们将进入共享数据库而不是 postgres 数据库。

我取消了共享数据库的配置（请参阅[https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres#3-deprovision-your-shared-database](https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres#3-deprovision-your-shared-database)）。之后，我还必须手动将 DATABASE_URL 设置为与 HEROKU_POSTGRESQL_MAROON_URL 相同（文档似乎暗示这将自动发生，但在我的情况下没有）。

现在我可以运行命令

```
heroku pg:psql --app production-app 
```

没有问题，最重要的是，我的 rake 任务在正确的数据库上运行。

希望这对其他人有帮助。

# delphi - 远程桌面控制组件（如 vnc）

> ID：13035453
> 
> 赞同：1
> 
> 时间：2012-10-23T16:50:27.340
> 
> 标签：delphi, remote-access, vnc

我想嵌入一个远程控制功能来支持我的应用程序的用户。

目前，我正在使用 VNC，但我想找到另一个解决方案，如组件或 VNC delphi 实现。

**现在正在寻找免费或开源的解决方案。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:55:36.147

[Nexus Portal](http://www.nexusdb.com/support/index.php?q=portal)是一个很好的 Delphi 库，用于在您的应用程序中实现远程支持。

它基于用于 HTTP/HTTPS 通信的[RTC SDK 库。](http://www.realthinclient.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:14:55.133

前段时间，我为这两个 dll 制作了一个 UltraVnc dll（服务器和客户端）和一个 Delphi 包装器。我修改了原始 Ultra VNC 源以启动/停止服务器、添加新查看器等。

原帖： https: [//plus.google.com/u/0/110131086673878874356/posts/gAmBogWarww](https://plus.google.com/u/0/110131086673878874356/posts/gAmBogWarww) [https://plus.google.com/u/0/110131086673878874356/posts/dbMRPcUkKAe](https://plus.google.com/u/0/110131086673878874356/posts/dbMRPcUkKAe)

直接链接到源 + 二进制文件： [https ://github.com/andremussche/UltraVncAsDll](https://github.com/andremussche/UltraVncAsDll)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-27T16:39:44.397

AllaKore_Remote 开源

[https://github.com/Maickonn/AllaKore_Remote](https://github.com/Maickonn/AllaKore_Remote)

*   连接 ID 和密码。
*   使用 RFB 算法进行远程访问（仅发送屏幕上已更改的内容）。
*   数据压缩 (zLib)。
*   共享者文件。
*   聊天。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T11:01:16.847

我决定使用 Ultra VNC 中继器。

[http://www.uvnc.com/products/uvnc-repeater.html](http://www.uvnc.com/products/uvnc-repeater.html)

有了它，我只能将一个端口用于所有远程控制，并强制服务器（客户端）请求远程控制（vncviewer）。

此外，客户不需要在其防火墙上打开端口进行输入。

效果很好，而且是免费的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T18:44:12.773

另一种选择是来自 Context Software 的 Remote Assistant：

[http://www.contextsoft.com/products/remassist/](http://www.contextsoft.com/products/remassist/)

# matlab - 奇怪的神经网络分类现象

> ID：13035455
> 
> 赞同：2
> 
> 时间：2012-10-23T16:50:29.630
> 
> 标签：matlab, neural-network, classification, mnist

我正在尝试开发一种新的权重初始化方法，但我遇到了一个奇怪的训练现象。您可以看到输出节点 8 永远不是最大激活... ![在此处输入图像描述](../Images/15a80c344f02e7d6f31854065643768c.png)

我正在使用具有 tansig 激活、mse 性能和无偏置节点的 matlab patternnet。我正在尝试对 mnist 数据库的一个子集进行分类。

有谁知道如何解决这个问题？尽管具有相同的架构，但使用 nguyen-widrow 初始化不会看到此结果。

**编辑：**

输入：768xN 个介于 0 和 1 之间的值

目标：每行 10xN 个值 0 或 1。所以它就像一个逻辑矩阵，每列有 1 个真值。

一个或多个节点没有激活，我展示了最好的情况。

这发生在一层或多层（1 到 5）、更少或更多的训练数据（1k 到 10k 个样本）中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:59:37.470

我想我找到了解决问题的方法。

通过将权重缩放为仅沿传递函数的重要域（-1 到 1），我不再看到这种现象。

# ruby-on-rails - Engine Yard Rails 应用程序 - 在弹性负载均衡器 (ELB) 处终止 SSL 并传递 X-Forwarded-Proto http 标头

> ID：13035457
> 
> 赞同：6
> 
> 时间：2012-10-23T16:50:38.507
> 
> 标签：ruby-on-rails, ssl, amazon-web-services, http-headers, engineyard

遵循引擎场文档[https://support.cloud.engineyard.com/entries/21715452-use-elastic-load-balancing-with-engine-yard-cloud](https://support.cloud.engineyard.com/entries/21715452-use-elastic-load-balancing-with-engine-yard-cloud)

得到这个设置并且看起来运行良好，允许我们在 ELB 而不是在服务器上使用 SSL Terminated。从理论上讲，这应该允许我们在单个环境中使用多个 SSL 证书。

此设置意味着浏览器和 ELB 负载均衡器之间的流量是 SSL，但从 ELB 到应用程序服务器的前向流量是解密的。这导致我们的 rails 3.2.8 应用程序强制 SSL 出现问题 - 它将每个解密的请求重定向回它的 https 等价物，这会将解密的请求从负载均衡器再次发送到应用程序服务器，从而导致无限循环条件。

如果我们在我们的应用程序中禁用 SSL 的强制，我们需要测试每个请求以查看它是否来自 SSL 连接，如果是，我们可以响应，如果不是，则重定向它。

根据此发行说明 ( [http://aws.amazon.com/releasenotes/7778622769836370](http://aws.amazon.com/releasenotes/7778622769836370) )，当流量从 https 连接传递时，ELB 将传递包含“https”的 X-Forwarded-Proto 标头。

首先，Engine Yard 上的请求中没有名为“X-Forwarded-Proto”的标头。“HTTP_X-FORWARDED_PROTO”确实存在，但即使流量通过 SSL 发送到 ELB，它也始终包含“http”。

任何人都可以提供对此的任何见解或解决方法的想法吗？到目前为止，我已经尝试过安永支持，但运气不佳。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:59:32.733

您可以检查 X-Forwarded-Port 标头，如果请求通过 ssl 到达负载均衡器，则该标头为 443。那将`HTTP_X_FORWARDED_PORT`在机架环境中。

我们在 Engine Yard Rails 应用程序中使用[这个修改后的 rack-ssl](https://github.com/Kovalo/rack-ssl/blob/x_forwarded_port/lib/rack/ssl.rb#L41) gem 作为解决方法。

# ssl - 如何使用 ssl 在 Windows 8 和 WP8 应用程序之间进行通信？

> ID：13035462
> 
> 赞同：0
> 
> 时间：2012-10-23T16:50:50.893
> 
> 标签：ssl, notifications, windows-8, microsoft-metro, windows-phone

我正在考虑使用原始通知 (WNS) 或套接字在 Windows 8 和 WP8 应用程序之间进行通信。我找到了一些使用套接字的示例，但我的问题是：WP8 是否支持通过 ssl 发送/接收消息，如果支持，它是如何完成的？

我需要确认或找到解决方法是，Windows 8 应用程序有一个永久 IPAddress，电话应用程序将向其发送更新。通常，平板电脑将运行 Windows 8 应用程序，始终侦听传入消息；手机应用程序会定期发送消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:34:41.017

SSL 需要域名和受信任的证书才能工作。因此，它不能与 Windows 应用商店应用程序一起使用。您可能想要的是某种形式的加密来保护该通信。您可以使用[对称](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)（更简单）或非[对称](http://en.wikipedia.org/wiki/Public-key_cryptography)密钥加密来实现这一点。如果您需要更多详细信息，请进行一些研究（维基百科是一个好的开始）并在需要时提出另一个问题。

顺便说一句，考虑到使用普通 PC 作为“服务器”的所有技术限制（间歇性连接、断电、防火墙等），我认为中间有一个 Web 服务器会更可靠，接收来自手机应用程序并保留它们，直到它们可以传递到 Windows 应用商店应用程序。

# asp.net - MVC 不显眼不工作？

> ID：13035463
> 
> 赞同：1
> 
> 时间：2012-10-23T16:50:55.323
> 
> 标签：asp.net, asp.net-mvc, validation

我已经设置*了 jquery.unobtrusive-ajax.js*和*jquery.js*文件，并在*web.config*中设置了

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

但它仍然刷新页面而不是进行 javascript 验证。

我的模型也有：

```
[Required(ErrorMessage = "Reguired")]
public string UserName { get; set; }

[Required(ErrorMessage = "Reguired")]
public string Password { get; set; } 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:03:54.043

你需要`add jquery.validate.js`按`jquery.validate.unobtrusive.js`这个顺序。`jquery.unobtrusive-ajax.js`是让 Ajax.* 助手工作，它与验证无关。

# c# - 在 C# 中存储矩阵值的快速且有用的方法

> ID：13035464
> 
> 赞同：3
> 
> 时间：2012-10-23T16:50:55.713
> 
> 标签：c#, performance, math, matrix, usability

我需要在 C# 中为 3D 引擎创建一个 4x4 矩阵类。我已经看到其他一些引擎将矩阵值存储在单个浮点成员变量/字段中，如下所示：

```
float m11, m12, m13, m14
float m21, m22, m23, m24
float m31, m32, m33, m34
float m41, m42, m43, m44 
```

但是，我认为将它们存储在二维数组中对于使用矩阵进行转换/计算会更有用：

```
float[4][4]; 
```

我还想到了一个一维数组 - 但它看起来不太自我解释，并且不会给我比第一个选项更有优势：

```
float[16]; 
```

在 C++ 中，我总是使用“union”关键字来同时存储上述所有可能性。但是，C# 似乎没有这个关键字，所以我必须决定要使用哪一个。

应用转换等时存储 4x4 矩阵的最快方法是什么？在考虑可用性时，您会选择哪个选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:54:05.137

您可以使用二维数组：

```
float[,] matrix = new float[4,4]; 
```

这与锯齿状数组不同：

```
float[][] matrix = new float[][4]; 
```

一个二维数组在下面存储为一个大的一维数组。该类只是将它从您那里抽象出来，并提供提供两个（或更多）维度的访问器。因为它在后端存储为一维数组，所以您将保持缓存/内存局部性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T16:56:04.057

为什么不看看这篇`CodeProject.com`文章，[C# 中的高效矩阵编程](http://www.codeproject.com/Articles/3354/Efficient-Matrix-Programming-in-C)。

您还可以查看[Declaring an Array (Visual C#)](http://msdn.microsoft.com/en-us/library/aa287586%28v=vs.71%29.aspx)`Matrix` ，了解用于定义自己的数据结构的各种选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:54:40.827

最快的方法是使用指针和`unsafe`关键字。但是，正如关键字所示，这是不安全的。

有关 C# 中指针的更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/t2yzs44b.aspx).

# entity-framework-5 - 使用非本地工作区时的实体框架 5 警告

> ID：13035467
> 
> 赞同：1
> 
> 时间：2012-10-23T16:51:00.220
> 
> 标签：entity-framework-5

当我从共享工作区而不是工作区在我自己的盒子上本地处理我的代码时，我从 emdx 设计器收到以下警告。我们需要在盒子外的工作区工作。

我该如何解决它不会给我警告的问题？

警告 1 路径 '\bhg-colo-sq04\User Workspaces\wyeager\Development\WebProject\PDFConverter\PDFConverterModel\PDFConverterModel\EF.Utility.CS.ttinclude' 必须是这台计算机的本地或您信任区域的一部分。如果您已下载此模板，您可能需要使用文件资源管理器中模板文件的属性页面“取消阻止”它。\bhg-colo-sq04\User Workspaces\wyeager\Development\WebProject\PDFConverter\PDFConverterModel\PDFConverterModel\Vision.tt 0 0 PDFConverterModel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:06:47.587

尝试将 C# 项目所在的主机添加到受信任的主机。打开您的 Internet Explorer 设置，选择选项卡安全并选择图标受信任的主机。您将看到按钮主机。单击它并将主机添加到列表中。我希望它有所帮助。

# visual-studio-2010 - 隐藏从调试器窗口中列出两次的字段

> ID：13035471
> 
> 赞同：1
> 
> 时间：2012-10-23T16:51:11.907
> 
> 标签：visual-studio-2010, visual-studio-debugging

在调试器窗口中检查 Web 服务的响应时，响应的每个字段都会列出两次 - 一次带有*Field*的附录。

[![](../Images/76e3e9b4d7c7bd586bc2a222aaa12caa.png)](https://i.stack.imgur.com/ldARW.png)
[（来源：[mlkshk.com](https://mlkshk.com/r/KK77)）]

如何隐藏第二个列表？

Web 服务引用已按照[msdn 库](https://docs.microsoft.com/en-us/previous-versions/bb628649%28v=vs.140%29)中的说明添加，因此我不想手动添加[属性](https://stackoverflow.com/questions/754393/hiding-fields-from-the-debugger) *[DebuggerBrowsable(DebuggerBrowsableState.Never)] 。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:32:57.300

这有点小技巧，不像常规的 Watch 窗口那样美观，但你可以使用这个过程。

1.  添加一个 GetFieldValues 实用方法，该方法将只提取您想要的字段值。
2.  调试时，打开[立即窗口](http://msdn.microsoft.com/en-us/library/f177hahy%28v=vs.100%29.aspx)
3.  在即时窗口中，创建一个捕获 GetFieldValues 结果的变量
4.  在 Watch 窗口中，添加新创建的变量。

这样你就可以过滤掉你不想看到的东西。这是它的屏幕截图： ![Visual Studio 即时和监视窗口](../Images/90dcc8d718b99594c857a473353cfd04.png)

实用方法：

```
public static List<Tuple<String,Object>> GetFieldValues(Object instance)
{
    var fields = instance.GetType().GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance | BindingFlags.DeclaredOnly);
    var fieldValues = new List<Tuple<String, Object>>();
    foreach (var f in fields) { fieldValues.Add(new Tuple<string, Object>(f.Name, f.GetValue(instance))); }
    return fieldValues;
} 
```

和即时窗口代码：

```
var blah = J.GetFieldValues(this); 
```

# java - 非最优广度优先搜索实现

> ID：13035477
> 
> 赞同：1
> 
> 时间：2012-10-23T16:51:37.243
> 
> 标签：java, data-structures, breadth-first-search

我目前正在做一个任务来构建一个单词阶梯，通过一次只更改一个字母来从一个单词到另一个单词[当然，仍然保持它是一个真实的单词]。

我认为问题在于这种方法 - 通过使用广度优先搜索遍历树来找到两个单词之间的链接。我已经通过按照[此处](http://en.wikipedia.org/wiki/Breadth-first_search#Algorithm)给出的描述实现了该算法，但是，在测试中给出的解决方案并不是最佳的。一个例子[它显然会错过sayer、payer和manor]：

```
Discovery: link found, 6 words
layer
sayer
payer
mayer
mayor
manor
major 
```

理想的情况是：

```
Discovery: link found, 3 words
layer
mayer
mayor
major 
```

我已经尝试调试此代码，但由于它涉及大量循环，因此尝试解决问题并不是一种非常可行的方法。

几点建议：

*   它会在运行时生成图形 [connectionLink()]，从而节省时间。
*   此方法所在的类将所有节点 [图中的点] 存储在哈希表中，键是单词，对象是单词的对象。
*   一个节点存储一个它连接到的节点列表[通过不同的字符]，一个布尔值，表示它是否被访问过，并且单词本身作为一个字符串。

    ```
    /*
     *  @return     String      Returning a String listing words traversed to the goal
     *  @param      fW          First word
     *  @param      sW          Second word
     */
    public String discovery(String fW,String sW){
        String result="Discovery: no link found";
        StringBuffer links=new StringBuffer();
        int i=0;

        Queue<Node> queue=new LinkedList<Node>();               //  Breadth first search uses a queue
        queue.add(hash.get(fW));                                //  Root of the tree, tree generated on the fly

        while(!queue.isEmpty()){
            Node current=(Node)queue.poll();
            if(!current.getVisited()){      
                current.setVisited(true);                       //  Making sure it's only cycled once

                if(current.getWord().equals(sW)){               //  Goal state
                    while(current.getParent()!=null){           //  Generating the list words traversed
                        i++;
                        links.insert(0,"\n"+current.getParent().getWord());
                        current=current.getParent();
                    }
                    result="Discovery: link found, "+i+" words"+links.toString()+"\n"+sW;
                    System.out.println(result);
                    break;
                }
                else{
                    connectionLink(current.getWord());              //  Finding connections

                    for(Node node:current.getConnections()){        //  Getting the connections of the Node
                        if(!node.getVisited()){                     //  If child Node isn't visited, add to queue
                            node.setParent(current);                //  Sets parent as Node just left
                            queue.add(node);                        //  Adding Node to queue
                            //  System.out.println("Discovery: adding "+node.getWord()+" to queue. Child of "+node.getParent().getWord());
                            //  System.out.println("Discovery: current queue - "+queue.toString());
                        }
                    }
                }
            }
        }
        clearVisited();
        return result;
    } 
    ```

节点 [也有标准的 getter 和设置]：

```
public class Node{
    private String word;                    //  The data of the Node
    private Node parent;
    private LinkedList<Node> children;  //  Holds children
    private boolean visited=false;

    public Node(String word){
        this.word=word.toLowerCase();
        children=new LinkedList<Node>();
    }

    /*
     *  @param      other       Connecting to another Node - adding a child
     */
    public void connectTo(Node other){
        if(!(children.contains(other))&&!(this==other))     children.add(other);    
    }

} 
```

生成连接的方法，其中 wordDifference 是一种检查单词是否在字母上不同的方法，根据该测试返回一个布尔值：

```
/*
 *  @param      fW          Finding the links of the inputted String
 */
public void connectionLink(String fW){
    //  dKS=discoveryKeys enum, dK=discoveryKey
    Enumeration<String> dKS=hash.keys();
    while(dKS.hasMoreElements()){               //  Loop checks the word against every other word
        String dK2=dKS.nextElement();
        if(wordDifference(hash.get(fW),hash.get(dK2))){
            (hash.get(fW)).connectTo(hash.get(dK2));
            //  System.out.println("Linking: "+hash.get(fW).getWord()+" & "+hash.get(dK2).getWord());
        }
    }
} 
```

任何帮助是极大的赞赏。这段代码实际上可能没有任何问题，问题可能出在其他地方，但在此先感谢。

主要问题是这并没有产生最佳的[最短路径]结果-它通过不必要的单词来达到目标​​[如示例中所示]，我的广度优先搜索的实现有什么问题[如那应该是最优的]？

# c# - 分析用 C# 编写的注入库

> ID：13035481
> 
> 赞同：0
> 
> 时间：2012-10-23T16:51:42.140
> 
> 标签：c#, windows, winapi, profiling, hook

假设我有一个库，它将被注入到某个进程（托管或非托管）中以挂钩一些 WinAPI 调用。我想对它进行分析，看看某些钩子是否有很多开销。我正在使用 EasyHook 来挂钩 WinAPI 调用，并且库是用 C# 为 .NET 3.5 编写的。在这种情况下有没有办法对库进行概要分析？

# sorting - GridView 排序但 LinkBut ton 的 CommandArgument 不是

> ID：13035484
> 
> 赞同：2
> 
> 时间：2012-10-23T16:51:45.527
> 
> 标签：sorting, gridview, linkbutton, commandargument

网格视图显示正常，并且按任一列排序都很好。但是，当您单击链接按钮时，返回的 CommandArgument 不是正确的值。就好像 CommandArgument 绑定到行并且没有被排序。

即排序前

```
Text   Command
abc    A
aaa    B
aab    C 
```

排序后

```
Text   Command
aaa    A
aab    B
abc    C 
```

单击 aaa 将返回“A”作为参数，而不是应该返回的 B。

aspx 文件中的 GridView 定义如下：

```
<asp:GridView ID="GridView1" runat="server"
              AllowSorting="True"
              AutoGenerateColumns="False"
              EmptyDataText="No Results to Display"  
              GridLines="None" 
              onsorting="GridView1_Sorting" >
    <Columns>
        <asp:TemplateField HeaderText="File Name" SortExpression="Path">
            <ItemTemplate>
                <asp:LinkButton ID="linkbutton1" runat="server" Text='<%# Eval("Title") %>' OnCommand="LinkButton_Click" CommandArgument='<%# Bind("Path") %>' ></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Document Type" DataField="DocumentCategory (Text)" SortExpression="DocumentCategory (Text)" />
    </Columns>
</asp:GridView> 
```

它绑定到由 sql 查询填充的数据视图并存储在视图状态中

```
ViewState["GridView1_DataSource"] = ds.Tables[0];
DataView dv = new DataView(ds.Tables[0]);
GridView1.DataSource = dv;
GridView1.DataBind(); 
```

我的排序方法是

```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    string sortDir = "ASC";
    if (ViewState["SortDirection"] == null)
        ViewState["SortDirection"] = "ASC";

    if (ViewState["SortDirection"].ToString() == "ASC")
    {
        sortDir = "DESC";
        ViewState["SortDirection"] = "DESC";
    }
    else
    {
        ViewState["SortDirection"] = "ASC";
    }

    DataTable dt = (DataTable)ViewState["GridView1_DataSource"];
    DataView dv = new DataView(dt);
    dv.Sort = e.SortExpression + " " + sortDir;
    GridView1.DataSource = dv;
    GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:56:38.103

当您通过 GridView1_Sorting 进行排序时，Page_Load 将被处理，然后是 GridView1_Sorting。所以数据显示正确。单击 LinkBut​​ton 时，Page_Load 在 GridView1__RowCommand 之前处理。通常，Gridview 的 DataBind 位于 Page_Load 中，因此数据现在处于原始顺序。要更正排序，还要在 Page_Load DataBind 中进行排序。

如果（dt.Rows.Count > 0）

{

数据视图 dv = 新数据视图（dt）；

```
dv.Sort = ViewState["SortExpression"].ToString()  + " " + ViewState["SortDirection"].ToString();
GridView1.DataSource = dv;

GridView1.DataBind(); 
```

}

我认为您不能对空数据表进行排序。

您可以通过 Debugging 轻松验证这一点，并在 Sorting 和 Page_Load 中添加断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T16:13:50.813

I found the solution. This worked for me. Try this.

```
 protected void LinkButton_Click(object sender, EventArgs e)
 {
    sortExpr = "Path";
    GridView1_Sorting(null, null);
 } 
```

and changing this:

```
string sortExpr;
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
      String sortExpression = null;
        if (sortExpr == null)
        {
            sortExpression = e.SortExpression;

        }
        else
        {
            sortExpression = sortExpr;
        }

    Session["SortExpression"] = sortExpression;

        if (Session["SortDirection"] != null && Session["SortDirection"].ToString() ==    SortDirection.Descending.ToString())
        {
            Session["SortDirection"] = SortDirection.Ascending;
            SortGridview(sortExpression, "ASC");
        }
        else
        {
            Session["SortDirection"] = SortDirection.Descending;
            SortGridview(sortExpression, "DESC");
        }
 }

 private void SortGridview(string sortExpression, string Direction)
    {
        DataView dv = null;
        DataTable dt = GridView1.DataSource as DataTable;
        dv = new DataView(dt);
        dv.Sort = sortExpression + " " + Direction;
        GridView1.DataSource = dv;
        GridView1.DataBind();

    } 
```

# c - 如何使用指针表示法访问动态结构

> ID：13035488
> 
> 赞同：1
> 
> 时间：2012-10-23T16:51:58.367
> 
> 标签：c

我对如何使用指针表示法访问与 malloc 一起使用的结构感到困惑。我可以使用数组表示法，但指针的语法是什么？

```
 #include "stdio.h"
#include "stdlib.h"

using namespace std;

typedef struct flightType  {

    int altitude;
    int longitude;
    int latitude;
    int heading;

    double airSpeed;

} Flight;

int main() {

    int airbornePlanes;
    Flight *planes;

    printf("How many planes are int he air?");
    scanf("%d", &airbornePlanes);

    planes =  (Flight *) malloc ( airbornePlanes * sizeof(Flight));
    planes[0].altitude = 7;  // plane 0 works

    // how do i accessw ith pointer notation
    //*(planes + 1)->altitude = 8; // not working
    *(planes + 5) -> altitude = 9;
    free(planes);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:54:30.890

基本上`x->y`是`(*x).y`.

以下是等价的：

```
(planes + 5) -> altitude = 9 
```

和

```
(*(planes + 5)).altitude = 9; 
```

和

```
planes[5].altitude = 9; 
```

一个更具体的例子：

```
Flight my_flight; // Stack-allocated
my_flight.altitude = 9;

Flight* my_flight = (Flight*) malloc(sizeof(Flight)); // Heap-allocated
my_flight->altitude = 9; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:54:37.003

您不需要此`->`符号，因为您已经使用星号取消引用指针。只需这样做：

```
*(places + 5).altitude = 5; 
```

这`->`是“取消引用此结构指针并访问该字段”的简写，或者：

```
(*myStructPointer).field = value; 
```

是相同的

```
myStructPointer->field = value; 
```

您可以使用任何一种表示法，但（应该）不能同时使用两种表示法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:06:40.923

取消引用指针后，您需要一个额外的括号。

```
(*(planes + 5)).altitude = 9; 
```

# .htaccess - 为什么我的 htaccess 不喜欢这个 URL？

> ID：13035491
> 
> 赞同：0
> 
> 时间：2012-10-23T16:52:15.020
> 
> 标签：.htaccess, mod-rewrite

我希望有人可以帮助我。

这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

像下面这样的 URL 将成功重写：

```
http://jobs2.local/main/out/16339404/http://www.google.com/ 
```

但是，如果我对 URL 的最后一部分（[http://www.google.com/](http://www.google.com/)部分）进行编码，则会收到 404 错误：

```
http://jobs2.local/main/out/16339404/http%3A%2F%2Fwww.google.com%2F 
```

罪魁祸首似乎是 %2F 但我不明白为什么会这样。

你们有谁知道问题是什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:30:33.583

我想通了。

问题是 Apache 不喜欢 %2F。

解决方案是在网站的 httpd.conf 中的 VirtualHost 条目中添加“AllowEncodedSlashes On”，例如

```
<VirtualHost *:80>
    AllowEncodedSlashes On
    ServerName jobs2.local
    ...
</VirtualHost> 
```

我已经对此进行了测试，并且可以按预期工作。

# c++ - 控制互联网连接

> ID：13035493
> 
> 赞同：2
> 
> 时间：2012-10-23T16:52:24.163
> 
> 标签：c++, api, qt, internet-connection

我正在尝试开发一个应用程序（C++/Qt 最好用于多平台）来控制和过滤进入和离开网络（主要是互联网）的数据流，并限制对浏览器中某些 URL 的访问。

Qt有可能吗？如果没有，是否有图书馆可以做到这一点？或者是否有任何 API 可用于控制计算机上的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:18:59.350

要控制对 Internet 的访问，最好的方法是编写自己的 DNS 服务器，然后将当前的 dns 服务器指向自己。这虽然会非常复杂，但这是实现它的众多方法之一。

# iphone - 模拟器和 IRL iPhone 没有相同的行为

> ID：13035498
> 
> 赞同：2
> 
> 时间：2012-10-23T16:52:48.703
> 
> 标签：iphone, objective-c, xcode, simulator

所以，我的转换器应用程序终于可以工作了，但有一个主要问题。它不适用于 IRL iPhone，仅适用于模拟器 iPhone。像这样（IRL iPhone）：

![IRL iphone](../Images/f090cf4f51ba863ebb7cf0177ca9337a.png)

模拟器手机也做同样的事情： ![模拟器 iPhone](../Images/ad1e3ec9aca566944568339216bf22ed.png)

IDK 为什么这个要小得多。

我能找到的唯一区别是我的手机是挪威语，所以那里的键盘有一个逗号'，'而不是句号'。

计算它的代码在这里[http://pastebin.com/nGaw7Agj](http://pastebin.com/nGaw7Agj)

TLDR irl iphone 没有做正确的事情，但 xcode 模拟器可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:55:54.090

> 我能找到的唯一区别是我的手机是挪威语，所以那里的键盘有一个逗号'，'而不是句号'。

这就是答案。由于您有不同的语言环境，第一个四舍五入为 13，而不是 13.37。我不知道您在这里使用的是什么数量，但是在这两种情况下，您似乎都在乘以一个常数 ~133.4247，因此两种情况下的计算都是相同的。

问题是您`NSNumberFormatter`在从字符串中读取值时没有使用。`NSNumberFormatter`将为您处理语言环境。Using`[NSString floatValue]`是将字符串转换为数字的一种非常粗略的方法，您无法控制语言环境转换。

在这一行

```
float input = [inputText.text floatValue]; 
```

我建议改为

```
NSNumberFormatter* fmt = [NSNumberFormatter new];
float input [fmt numberFromString:inputText.text].floatValue; 
```

# performance - 将 C for 循环转换为 CUDA for 循环

> ID：13035505
> 
> 赞同：1
> 
> 时间：2012-10-23T16:53:41.020
> 
> 标签：performance, cuda, gpu, nvidia

我有一个用 C 语言编写的低级 for 循环，一位朋友建议我用 CUDA 编写。我已经设置了我的 CUDA 环境并一直在查看文档，但我仍然在为语法问题苦苦挣扎，这已经超过 2 周了。谁能帮我吗？这在 CUDA 中会是什么样子？

```
float* red = new float [N];
float* green = new float [N];
float* blue = new float [N];

for (int y = 0; y < h; y++)
{
    // Get row ptr from the color image
    const unsigned char* src = rowptr<unsigned char>(color, 0, y, w);

    // Get row ptrs for the destination channel features
    float* rptr = rowptr<float>(red, 0, y, w);
    float* gptr = rowptr<float>(green, 0, y, w);
    float* bptr = rowptr<float>(blue, 0, y, w);

    for (int x = 0; x < w; x++)
    {
        *rptr++ = (float)*src++;
        *gptr++ = (float)*src++;
        *bptr++ = (float)*src++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:26:29.150

这是一些示例代码。我不知道它是否真的能回答你的问题。可能您需要了解更多关于 CUDA 的信息。如果您能抽出时间，从[nvidia 网络研讨会页面参加](https://developer.nvidia.com/gpu-computing-webinars)[本次网络研讨会](http://developer.download.nvidia.com/CUDA/training/cudaintrowebinar.mp4)和[本次网络](http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_CUDA_Memory_Optimization.wmv)研讨会将花费 2 个小时。[cuda C 程序员手册](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html)也是一个很好的可读参考。

```
#include <stdio.h>

#define N      256
#define NUMROW   N
#define NUMCOL   N
#define PIXSIZE  3
#define REDOFF   0
#define GREENOFF 1
#define BLUEOFF  2
#define nTPB    16
#define GRNVAL   5
#define REDVAL   7
#define BLUVAL   9

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__global__ void kern(const unsigned numrow, const unsigned numcol, const unsigned char* src, float* rptr, float* gptr, float* bptr){

  unsigned idx = threadIdx.x + (blockDim.x*blockIdx.x);
  unsigned idy = threadIdx.y + (blockDim.y*blockIdx.y);
  if ((idx < numcol) && (idy < numrow)){

    rptr[(idy*numcol)+idx] = (float)src[(((idy*numcol)+idx)*PIXSIZE)+REDOFF];
    gptr[(idy*numcol)+idx] = (float)src[(((idy*numcol)+idx)*PIXSIZE)+GREENOFF];
    bptr[(idy*numcol)+idx] = (float)src[(((idy*numcol)+idx)*PIXSIZE)+BLUEOFF];
    }
}

int main (){

  float *h_red, *h_green, *h_blue;
  float *d_red, *d_green, *d_blue;
  unsigned char *h_img, *d_img;

  if ((h_img =(unsigned char*)malloc(NUMROW*NUMCOL*PIXSIZE*sizeof(unsigned char))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_red =(float*)malloc(NUMROW*NUMCOL*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_green =(float*)malloc(NUMROW*NUMCOL*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_blue =(float*)malloc(NUMROW*NUMCOL*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}

  cudaMalloc((void **)&d_img, (NUMROW*NUMCOL*PIXSIZE)*sizeof(unsigned char));
  cudaCheckErrors("cudaMalloc1 fail");
  cudaMalloc((void **)&d_red, (NUMROW*NUMCOL)*sizeof(float));
  cudaCheckErrors("cudaMalloc2 fail");
  cudaMalloc((void **)&d_green, (NUMROW*NUMCOL)*sizeof(float));
  cudaCheckErrors("cudaMalloc3 fail");
  cudaMalloc((void **)&d_blue, (NUMROW*NUMCOL)*sizeof(float));
  cudaCheckErrors("cudaMalloc4 fail");

  for (int i=0; i<NUMROW*NUMCOL; i++){
    h_img[(i*PIXSIZE)+ REDOFF]   = REDVAL;
    h_img[(i*PIXSIZE)+ GREENOFF] = GRNVAL;
    h_img[(i*PIXSIZE)+ BLUEOFF]  = BLUVAL;
    }

  cudaMemcpy(d_img, h_img, (NUMROW*NUMCOL*PIXSIZE)*sizeof(unsigned char), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpy1 fail");

  dim3 block(nTPB, nTPB);
  dim3 grid(((NUMCOL+nTPB-1)/nTPB),((NUMROW+nTPB-1)/nTPB));
  kern<<<grid,block>>>(NUMROW, NUMCOL, d_img, d_red, d_green, d_blue);
  cudaMemcpy(h_red, d_red, (NUMROW*NUMCOL)*sizeof(float), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudaMemcpy2 fail");
  cudaMemcpy(h_green, d_green, (NUMROW*NUMCOL)*sizeof(float), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudaMemcpy3 fail");
  cudaMemcpy(h_blue, d_blue, (NUMROW*NUMCOL)*sizeof(float), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudaMemcpy4 fail");

  for (int i=0; i<(NUMROW*NUMCOL); i++){
    if (h_red[i] != REDVAL) {printf("Red mismatch at offset %d\n", i); return 1;}
    if (h_green[i] != GRNVAL) {printf("Green mismatch at offset %d\n", i); return 1;}
    if (h_blue[i] != BLUVAL) {printf("Blue mismatch at offset %d\n", i); return 1;}
    }
  printf("Success!\n");
  return 0;
} 
```

为了回答评论中提出的问题，这里有一个修改过的内核，它展示了如何使用评论中定义的 rowptr<> 模板。只需将上面的内核代码替换为：

```
template <typename T> T* rowptr(T* start, int x, int y, int w) __device__ __host__ { return start + y*w + x; }

__global__ void kern(const unsigned numrow, const unsigned numcol, unsigned char* isrc, float* rptr, float* gptr, float* bptr){

  unsigned idx = threadIdx.x + (blockDim.x*blockIdx.x);
  unsigned idy = threadIdx.y + (blockDim.y*blockIdx.y);
  if ((idx < numcol) && (idy < numrow)){
    unsigned char *src = rowptr<unsigned char>(isrc, (idx*PIXSIZE), idy, (numcol*PIXSIZE));

    rptr[(idy*numcol)+idx] = (float)*src++;
    gptr[(idy*numcol)+idx] = (float)*src++;
    bptr[(idy*numcol)+idx] = (float)*src;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:08:47.090

由于此代码是一个简单的 for 循环，而不是编写 CUDA，另一种选择是检查 openACC。这样，您只需向现有代码添加指令。

# php - Doctrine2 中的短类名而不是完整的命名空间和路径

> ID：13035521
> 
> 赞同：1
> 
> 时间：2012-10-23T16:54:40.283
> 
> 标签：php, doctrine-orm

使用**学说2**，我创建了我`entities`的 in`Entities`文件夹。

文件夹：

```
./
    HelloEntity.php
    WorldEntity.php 
```

我在 PHP 中创建了我的结构并导入它们：

```
$namespaceYaml = array($connection->getBundle()->getNamespace() => $bundleFolder.'/Entity/ORM/');
$driver = new YamlDriver($namespaceYaml, '.orm.yml');
$path = $bundleFolder.'/Resource/config/doctrine/metadata/orm';
$config = Setup::createYAMLMetadataConfiguration(array($path), true);
$config->setEntityNamespaces(array($connection->getBundle()->getName() => $connection->getBundle()->getNamespace().'\Entity'));
$config->setMetadataDriverImpl($driver); 
```

现在，它正在工作。我可以使用它们。

例如：

```
$qb = $this->getRepository()->createQueryBuilder('Hello'); //short here but long in from()
$qb->from('MyWeb\Entities\Hello', 'h'); //Hello Entity 
```

现在，`MyWeb`是我的主要根/命名空间。当我想在我的表格中使用学说时，我必须写`MyWeb\Entities\Hello`. 我想做的就是缩短它们。我不能**只**用吗`'Hello'`

有谁有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:47:11.627

从未尝试过使用纯 php 的教义 2，但这一行看起来像自动加载器配置：

```
$config->setEntityNamespaces(array($connection->getBundle()->getName() => $connection->getBundle()->getNamespace().'\Entity')); 
```

也许如果您使用 MyWeb\ **Entity** \Hello 之类的目录/命名空间结构，它将按您的意愿工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:06:48.410

现在，我在 StackOverflow 的其他地方找到了答案。这不是同一个问题，但看起来它同时回答了这两个问题。

很快，我们必须对表名使用完全限定的名称空间，而不是短名称。但是我们可以在获取存储库时使用短名称（除了包名称）

参考：[Doctrine DQL and Namespaces (relative only?)](https://stackoverflow.com/questions/3327835/doctrine-dql-and-namespaces-relative-only)

现在，我找到了答案。

**答案**：

我之前的解决方案是正确的。我们必须在第一个 str 处使用完全限定的命名空间减去斜杠。

**但是**，我们也可以简写使用。

**看**，每个`entityManmager`人都有一个`Repository`，我们可以通过使用来获得它`$em->getRepository()`。之后， with `createQueryBuilder('e')`（注意这里的“ **e** ”）自己生成`HelloEntity`名称并将其分配给`e`别名。

所以，我的代码是错误的，不需要输入命名空间:)

**结论**：

而不是这个：

```
$qb = $this->getRepository()->createQueryBuilder('Hello'); //short here but long in from()
$qb->from('MyWeb\Entities\Hello', 'h'); //Hello Entity 
```

用这个：

```
$qb = $this->getRepository()->createQueryBuilder('h'); //h assigned for Hello table and HelloEntity. So no need for from. It will fetch data two times then. 
```

**解决了**。

修复和想法来自：[Doctrine2 fetch 5 copy of each record](https://stackoverflow.com/questions/13002981/doctrine2-fetch-5-copy-of-each-record)

# operating-system - 命令行参数如何从外壳“传递”到主函数？

> ID：13035524
> 
> 赞同：0
> 
> 时间：2012-10-23T16:54:41.840
> 
> 标签：operating-system, command-line-arguments

据我了解，在 Windows 中，命令行参数保存在 Process Environment Block 中。

**1) 它们是如何存储在类 Unix 系统中的？**

**2）它们以什么格式/结构保存在那里？这个概念有通用/通用名称吗？**

在大多数语言中，命令行参数已经以类似于数组的形式提供。

**3）是什么将它们解析成那个，什么时候？**

（例如，对于 Windows 上的 C 程序；也欢迎其他语言和平台。）

**4) PEB 中的数据与“数组”中的数据有什么关系？**

**5) 哪些约束（例如，最大大小、ro 等）对命令行参数有效，它依赖于什么，存储此信息的内容以及它是如何（通过什么）生效的？**

**6) 像 Bash（带有 readline）这样的 shell 是否打算做的不仅仅是帮助人类用户以更方便的方式输入参数？**IE。shell 在处理命令行参数时通常有一些更“主动”的作用吗？

**7) 管道（在命令行中）如何与命令行参数相关？**

**8）还有其他值得一提的信息吗？**

（当然，如果问题有错误的假设或不正确，请纠正我。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:44:05.367

1）它们存储在堆栈中，由内核准备。

2）内核中有副本，用户空间的栈中有副本。在用户空间中，它是一个简单的指针数组，所有指针都指向以空字符结尾的字符串。不能比这更简单了。内核的副本仅供参考。即在/proc 中使用。如果它太长，它会被截断（对此不太确定）。

3）当您在shell中键入命令时，shell会对其进行解析。当你调用时`system()`，libc 会解析它。当您调用 execve 时，您在调用之前对其进行了解析。在任何情况下，内核都不会解析它。

5）堆栈的大小限制了它。`ulimit -a`

7) 管道和重定向不是 cmdline arg 的一部分。解析器处理这个。

# objective-c - Objective C - 复制 NSArray 并不能真正复制对象？

> ID：13035525
> 
> 赞同：1
> 
> 时间：2012-10-23T16:54:44.030
> 
> 标签：objective-c, copy, nsarray

复制数组将创建数组的新实例，但数组中的对象仍被旧数组引用。这不是一个错误吗？

数组中的项目： **项目：0xa623800**

新数组中的项目：**项目：0xa623800**

```
po [self selectedItems]
(NSMutableArray *) $1 = 0x0a21f1a0 <__NSArrayM 0xa21f1a0>(
<Item: 0xa623800>
)

po [[self selectedItems] copy]
(id) $2 = 0x0b854fd0 <__NSArrayI 0xb854fd0>(
<Item: 0xa623800>
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:58:28.613

它确实复制了数组，但没有复制数组中的项目。那是深拷贝。我想你可能想要[`-initWithArray:copyItems:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithArray%3acopyItems%3a)。

# c - 从limits.h中找出不带常量的整数类型的取值范围

> ID：13035526
> 
> 赞同：0
> 
> 时间：2012-10-23T16:54:44.733
> 
> 标签：c

`signed short int`不使用如何检查最大值`limits.h`？

我认为使用循环效率不高。是否有可能比使用循环更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:57:58.970

您可以使用`sizeof`以字节为单位获取大小。从那里可以进行简单的计算。

无论如何，为什么要避免`limits.h`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:01:41.550

你可以做类似的事情

```
int max_short = ((unsigned short)(-1))>>1;
printf("%d\n", max_short); 
```

即无符号短路可以假设的最大值，符号位移位一位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:06:35.293

既然您说*检查*，我假设您想确定给定值是否是 a `signed short`（或 an `unsigned short`）的最大值。您可以轻松地检查这一点，而无需`limits.h`通过测试是否发生溢出：`((X)(x + 1) < x)`当且仅当`x`其数据类型的最大值是`X`（`signed short`例如）时才会评估为真。由于整数提升规则，显式转换是必要的。

请注意，这在技术上是 UB，因为标准规范没有定义有符号溢出。

# iphone - iPhone：删除来自服务器的某些图像的白色背景

> ID：13035529
> 
> 赞同：0
> 
> 时间：2012-10-23T16:54:50.600
> 
> 标签：iphone, objective-c

> **可能重复：**
> [如何在 UIImage 上使一种颜色透明？](https://stackoverflow.com/questions/633722/how-to-make-one-color-transparent-on-a-uiimage)

我有一些图像来自服务器作为 URL，然后我下载并在 UITableView 的单元格上绘制它们。

图像有白色背景。**我需要删除此背景以使图像透明**。

我会改写一下：有没有办法检测和识别照片内组件周围的空白，所以我删除它们并重新创建图像？你知道像人脸识别。

注意：背景是图像本身的一部分。

# django - Django，定义要隐藏在每个表单中的字段

> ID：13035541
> 
> 赞同：1
> 
> 时间：2012-10-23T16:55:57.037
> 
> 标签：django, forms, model, field

我有一个抽象模型`NamedEntry`。它有一个字段`body_raw`，其中包含用户输入的文本。该`body`字段包含该字段的转换后（从 Markdown 到 html）缓存`body_raw`。

*默认情况*下，该`body`字段应在任何可能使用的表单上隐藏。有没有类似的东西？*`body = models.TextField(blank=True, hidden=True)`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:01:24.880

您可以编写自己的字段，它将使用带有属性的小部件`hidden`，例如：

```
class HiddenTextField(models.TextField):
    def formfield(self, **kwargs):
        defaults = {'widget': widgets.Textarea({'hidden': ''})}
        defaults.update(kwargs)
        return super(HiddenTextField, self).formfield(**defaults) 
```

只需在您的模型中替换`TextField`为`HiddenTextField`*

# javascript - 从下到上显示和隐藏 div

> ID：13035543
> 
> 赞同：0
> 
> 时间：2012-10-23T16:56:00.723
> 
> 标签：javascript, jquery, html, hide, show

我有一个带有从顶部显示/隐藏的 div 的示例，但我需要从底部到顶部，我试图更改一些代码，但我不能，而且我没有找到任何示例。

```
<style type="text/css">

#top-panel{
    background:#cc22ff;
    border-bottom:3px solid #a6c34e;
    padding:14px 20px;
    text-align:right;   
}
#sub-panel{
    text-align:center;
}
#sub-panel a{
    width:150px;
    float:right;
    color:#FFFFFF;
    text-decoration:none;
    margin-right:30px;
    font-weight:bold;
    background:url(img/sub-left.png) bottom left no-repeat #a6c34e;
}
#sub-panel a span{
    padding:6px;
    background:url(img/sub-right.png) right bottom no-repeat;
    display:block;

}
strong{color:#000000;}
.face{border:solid 2px #a6c34e; margin-left:10px; float:right;}
:focus{outline:0}
</style> 

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    // Lets make the top panel toggle based on the click of the show/hide link  
    $("#sub-panel").click(function(){
        // Toggle the bar up 
        $("#top-panel").slideToggle();  
        // Settings
        var el = $("#shText");  
        // Lets us know whats inside the element
        var state = $("#shText").html();
        // Change the state  
        state = (state == 'Hide' ? '<span id="shText">Mostrar</span>' : '<span id="shText">Ocultar</span>');                    
        // Finally change whats insdide the element ID
        el.replaceWith(state); 
    }); // end sub panel click function
}); // end on DOM
</script> 

<div id="top-panel">
<strong>titulo</strong><br />
contenido
</div>
<div id="sub-panel"><a href="#" id="toggle"><span id="shText">Ocultar</span></a></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:09:05.950

使用`$("#top-panel").slideUp();` 代替`slideToggle()`

# android - 使用 AlarmManager 服务

> ID：13035547
> 
> 赞同：0
> 
> 时间：2012-10-23T16:56:15.100
> 
> 标签：android

我有一个应用程序，它在后台的服务中做事（也当屏幕被关闭时）。我在以下代码的 Activity 中启动服务。

```
Intent i=new Intent(this, AppService.class);
i.putExtra(AppService.VOL_ALM, amanager.getStreamVolume(amanager.getStreamVolume(AudioManager.STREAM_ALARM)));

PendingIntent pi = PendingIntent.getService(this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);  
alarmManager.cancel(pi);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 *60, pi); 
```

Service 中的代码如下所示：

```
 public int onStartCommand(Intent intent, int flags, int startId) {

    test = intent.getIntExtra(VOL_ALM, 0);

    timer = new Timer("TweetCollectorTimer");
    timer.schedule(updateTask, 0, 15 * 1000L);

    return(START_NOT_STICKY);
  } 
```

在服务中，我必须更改变量“test”并使用它。但是我总是会丢失变量的更改值，因为有时会执行 onStartCommand。我尝试使用首选项存储变量，但我在启动服务时还需要变量的原始值。最好的方法是从方法中的意图更改数据“VOL_ALM”。但这可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:12:09.787

?

将这两个值存储在 SharedPreferences 中？这是持久值的公认方法。

# c# - 如何在 wpf 的用户控件中使用命令绑定？

> ID：13035551
> 
> 赞同：9
> 
> 时间：2012-10-23T16:56:48.150
> 
> 标签：c#, .net, wpf

在 MainWindow 中，命令绑定工作正常。在 UserControl1 中它不起作用。请注意，数据上下文设置正确，这是绑定结果的按钮内容所证明的。

我不想将用户控件中的命令绑定到主窗口中的命令或任何其他此类诡计。我只是想复制我在 UserControl1 的 MainWindow 中所做的事情。

**主窗口 XAML**

```
<StackPanel>
    <Button Content="Click Here" Command="{Binding ClickHereCommand}" Height="25" Width="90"></Button>
    <local:UserControl1></local:UserControl1>
</StackPanel> 
```

**MainWindow 代码背后**

```
public partial class MainWindow : Window
{
    public static RoutedCommand ClickHereCommand { get; set; }

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this;
        ClickHereCommand = new RoutedCommand();
        CommandBindings.Add(new CommandBinding(ClickHereCommand, ClickHereExecuted));
    }

    public void ClickHereExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        System.Windows.MessageBox.Show("hello");
    }
} 
```

**用户控件 XAML**

```
<UserControl x:Class="CommandBindingTest.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" x:Name="root">

<Grid DataContext="{Binding ElementName=root}" >
    <Button Content="{Binding ButtonContent}" Command="{Binding ClickHereCommand}" Height="25" Width="90"></Button>
</Grid>
</UserControl> 
```

**用户控制代码背后**

```
public partial class UserControl1 : UserControl, INotifyPropertyChanged
{
    private string _ButtonContent;
    public string ButtonContent
    {
        get { return _ButtonContent; }
        set
        {
            if (_ButtonContent != value)
            {
                _ButtonContent = value;
                OnPropertyChanged("ButtonContent");
            }
        }
    }

    public static RoutedCommand ClickHereCommand { get; set; }

    public UserControl1()
    {
        InitializeComponent();
        ClickHereCommand = new RoutedCommand();
        CommandBindings.Add(new CommandBinding(ClickHereCommand, ClickHereExecuted));
        ButtonContent = "Click Here";
    }

    public void ClickHereExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        System.Windows.MessageBox.Show("hello from UserControl1");
    }

    #region INotifyPropertyChanged Members
    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string name)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(name));
        }
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T17:27:04.810

这是最好的解决方案：

```
 <Grid DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" >
        <Button Content="{Binding ButtonContent}" Command="{Binding ClickHereCommand}" Height="25" Width="90"></Button>
 </Grid> 
```

其他解决方案：

您忘记将*DataContext*设置为*UserControl1*。

```
 public UserControl1()
        {
            InitializeComponent();
            ClickHereCommand = new RoutedCommand();
            CommandBindings.Add(new CommandBinding(ClickHereCommand, ClickHereExecuted));
            ButtonContent = "Click Here";
            this.DataContext = this;
        } 
```

在此之后，您必须在 Grid 中的*UserControl1* DataContext 中删除。

这：

```
<Grid DataContext="{Binding ElementName=root}" >
    <Button Content="{Binding ButtonContent}" Command="{Binding ClickHereCommand}" Height="25" Width="90"></Button>
</Grid> 
```

您必须更改为：

```
<Grid>
        <Button Content="{Binding ButtonContent}" Command="{Binding ClickHereCommand}" Height="25" Width="90"></Button>
</Grid> 
```

**在 UserControl 中不设置 DataContext 的解决方案：**

您必须将 ButtonContent 和 ClickHereCommand 更改为 DependencyProperty。

```
 public string ButtonContent
        {
            get { return (string)GetValue(ButtonContentProperty); }
            set { SetValue(ButtonContentProperty, value); }
        }

        public static readonly DependencyProperty ButtonContentProperty =
            DependencyProperty.Register("ButtonContent", typeof(string), typeof(UserControl1), new UIPropertyMetadata(string.Empty));

        public RoutedCommand ClickHereCommand
        {
            get { return (RoutedCommand)GetValue(ClickHereCommandProperty); }
            set { SetValue(ClickHereCommandProperty, value); }
        }

        public static readonly DependencyProperty ClickHereCommandProperty =
            DependencyProperty.Register("ClickHereCommand", typeof(RoutedCommand), typeof(UserControl1), new UIPropertyMetadata(null)); 
```

在 ctor 中`UserControl1`：

```
 public UserControl1()
    {
        InitializeComponent();

        ClickHereCommand = new RoutedCommand();
        CommandBindings.Add(new CommandBinding(ClickHereCommand, ClickHereExecuted));            
        ButtonContent = "Click Here";
        //this.DataContext = this;
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-02T00:29:37.490

在我发布这篇文章将近两年后，我又来了。我忘记了 WPF 的这个小功能，果然它又咬了我一口。

上面标记的答案部分正确，但包含其他令人分心和/或不正确的内容。为了清楚起见，我将强调问题是什么以及解决方案是什么。我这样做是为了我的利益而不是为了你的利益，因为我确信我会在大约 16 个月后回到这里。

这是问题所在。不要这样做。您的绑定将继续工作，除了您的路由命令：

```
<UserControl x:Class="CommandBindingTest.UserControl1"
     // snip
     d:DesignHeight="300" d:DesignWidth="300" x:Name="root">

    <Grid DataContext="{Binding ElementName=root}" >
        <Button Content="{Binding ButtonContent}" Command="{Binding ClickHereCommand}" Height="25" Width="90">
        </Button>
    </Grid> 
```

解决方案是在设置数据上下文时使用相对源，如下所示：

```
<Grid DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" >
    <Button Content="{Binding ButtonContent}" Command="{Binding ClickHereCommand}" Height="25" Width="90">
    </Button>
</Grid> 
```

The only answer to the problem I asked about is the one above (there may in fact be other answers but they are not discussed thus far in this question). Specifically: Setting "DataContext = this" in the usercontrol is NOT a solution and will in fact break bindings in the control that hosts the user control. Also, only properties that are the targets of bindings must be dependency properties. That suggestion is incorrect .

# visual-studio - 如何检测解决方案是否正在使用 VisualStudio 扩展中的 DTE 进行初始化？

> ID：13035555
> 
> 赞同：3
> 
> 时间：2012-10-23T16:57:24.947
> 
> 标签：visual-studio, projects-and-solutions, envdte, vs-extensibility, test-explorer

我正在使用 DTE 跟踪项目何时从解决方案中加载和删除，以便我可以更新自定义测试资源管理器扩展。然后我触发一个容器发现过程。但是当第一次加载解决方案时，它会异步加载一些项目并触发大量项目添加事件。

我真正想做的是忽略所有这些事件，直到解决方案完成加载。我不能完全弄清楚事件的顺序，以便我确定这个初始化过程已经完成。能够只查询解决方案对象并询问它会非常好。有谁知道我是否可以使用属性或接口或事件来确定这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:05:17.750

您应该能够挂钩[`OnAfterBackgroundSolutionLoadComplete`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivssolutionloadevents.onafterbackgroundsolutionloadcomplete.aspx)在解决方案完全加载时引发的事件。

我不知道是否有等效的 DTE。

# windows - 如何在 Windows 7 资源管理器中添加“创建自述文件”按钮，类似于“创建文件夹”？

> ID：13035558
> 
> 赞同：0
> 
> 时间：2012-10-23T16:57:31.410
> 
> 标签：windows, button, explorer, regedit

我想在 Windows 7 资源管理器中添加一个“创建 readme.txt”按钮，类似于“创建文件夹”？此按钮将在当前文件夹中创建一个空白的 readme.txt。

这张图片是法语的，但我相信你会明白的！

![新的 readme.txt](../Images/ca7ef6eaada12c2efa3ab7a66b5d05de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:27:56.197

我认为不可能添加这种动作。你能做的都在这里描述：

[http://www.askvg.com/explorer-toolbar-editor-free-utility-to-customize-windows-explorer-command-bar-aka-folder-band-or-toolbar-in-windows-7/](http://www.askvg.com/explorer-toolbar-editor-free-utility-to-customize-windows-explorer-command-bar-aka-folder-band-or-toolbar-in-windows-7/)

[http://www.techrepublic.com/blog/window-on-windows/use-special-codes-to-add-commands-to-the-windows-explorer-command-bar/3753](http://www.techrepublic.com/blog/window-on-windows/use-special-codes-to-add-commands-to-the-windows-explorer-command-bar/3753)

# android - Android 设计一个应用程序让我登录到一个 wifi 接入点

> ID：13035562
> 
> 赞同：0
> 
> 时间：2012-10-23T16:57:36.887
> 
> 标签：android, wifi

在我锻炼的健身房里，他们有一个开放的 wifi 接入点。它的设置方式，一旦你“连接”，你必须导航到一个网页（它是一个 1.1.XX 的 IP 地址）并单击“我同意”按钮，大概阅读用户协议后。问题是，他们将您设置为每小时注销一次，这总是发生在我锻炼的中间。我记住了 SSID，所以当我进入范围时它会自动连接，但我收到一个 android 通知，需要进一步的操作才能完全连接。

我想知道是否有一种解决方法，这样我就不必每小时点击一次？我正在考虑编写一个应用程序，它可以检测我何时在范围内或何时“半连接”，然后让它以某种方式完成注册过程。也许这必须通过将网页加载到内存中然后以某种方式单击“我同意”按钮来完成。

我想要帮助的是：

1）这里涉及的术语是什么？当我连接上，但我没有点击通过时，连接处于什么状态？还有哪些其他连接状态可能适用？如果我知道这一点，我也许可以研究这个并想出一个解决方案。这些不同的状态是否“可检测”？好像是因为我收到通知说我需要在“半连接”时完成注册过程。

2) 我知道有一些桌面浏览器插件可以点击按钮（比如 keepass 插件，它会让你登录到一个站点）。我怎么能在Android中复制这个？理想情况下，我想在内存中进行内部操作，而不是启动浏览器。可能的？注释？我的理解和思考过程在这里是合理的，还是我忽略了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:12:55.933

更快地获得buff！开玩笑...下次你在那个页面上确保你抓住它的 html 源代码。如果您查看单击按钮发送的 POST 数据，您可能会使用计时器或一些智能来欺骗您自己发送该数据，以检测您是否没有完全连接到 wifi。您可能可以在您的应用程序中监听 wifi 状态变化，然后做出相应的反应。 [wifi状态列表](http://developer.android.com/reference/android/net/wifi/WifiManager.html#WIFI_STATE_DISABLED)

我知道 Jsoup 支持使用 data(key, value) 方法将帖子数据发送到站点。

前任。

```
Jsoup.connect("www.somewebsite.com").data("username", "dymmeh").get(); 
```

同样，这取决于他们的设置是如何配置的。它可能无法通过发布数据来完成。

另一种方法是通过 WebView 加载站点，找到“同意”按钮，然后通过 javascript 单击它。

只是一些想法..所有这一切的实施​​将取决于你。

# configuration - Hadoop写入目录

> ID：13035567
> 
> 赞同：0
> 
> 时间：2012-10-23T16:57:58.837
> 
> 标签：configuration, hadoop, directory, storage

简单的问题，但通读文档和配置，我似乎不太明白。

IA）如何知道 hadoop 在本地磁盘上写入的位置以及 B）如何更改

对于初始测试，我在 20gb linux VM 上设置了 HDFS - 我们添加了一个 500gb 网络驱动器，用于对整个系统进行原型设计。那么现在我如何将 HDFS 指向该驱动器，或者我只是移动主目录/安装并稍微更改设置并重新启动该过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:11:57.960

`hadoop.tmp.dir`保存默认目录。

[请参阅默认的 core-default 文档](http://hadoop.apache.org/docs/r1.0.0/core-default.html)。

您可以更改`core-site.xml`文件来设置它（您也可以在其他地方更改它；这正是我碰巧做的地方——我不知道它是否是设置它的“最佳”位置）。

# angularjs - Angular.js: value() 未注入 config()

> ID：13035568
> 
> 赞同：5
> 
> 时间：2012-10-23T16:58:03.007
> 
> 标签：angularjs

> **可能重复：**
> [在 module.config 中的值的 AngularJS 依赖注入](https://stackoverflow.com/questions/12903338/angularjs-dependency-injection-of-value-inside-of-module-config)

我无法将 value() 注入 app.config()。这是代码（咖啡脚本）

```
window.app = angular.module("app", [])

app.value("template_path", "assets/angular/templates/users")

app.config(["$routeProvider","template_path" ($routeProvider, template_path) ->
  console.log template_path 
```

它抛出“未知提供者：来自应用程序的模板路径”错误

会不会是 config() 方法不能注入 value() 设置值？我正在使用 1.0.2

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T17:25:19.937

是的，您猜对了：无法将值注入到配置块中。**配置块只能注入常量和提供程序**。

# java - Java在没有实例的动态类中调用静态方法

> ID：13035572
> 
> 赞同：2
> 
> 时间：2012-10-23T16:58:24.547
> 
> 标签：java

我正在尝试向我的程序添加一个动态日志记录类（用于更改日志消息的去向，例如 System.out 或文件）。它扩展了`Logger`具有静态方法的基本抽象类`log(String)`。是否可以设置记录器类，然后在不创建记录器实例或使用反射的情况下调用日志方法？

像这样的东西：

```
 public class MainController {
        private Class<? extends Logger> mLogger;

        // ...

        public void setLogger(Class<? extends Logger> logger) {
            mLogger = logger;
        }

        public Class<? extends Logger> getLogger() {
            return mLogger;
        }

        // ...
    }

    public class BrokenTest {
        // ...
        private void showErrorMessage(String message) {
            mMainController.getLogger().log(message); // Can't call .log on Class
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:01:27.977

像这样的东西：

```
Method method = mMainController.getLogger().getMethod("log", String.class);
Object result = method.invoke(null, message); 
```

这将调用一个以返回的类`log`的`String`参数命名的静态方法`getLogger()`。

**更新**

但是根据您的描述，我相信使用*接口*和单独的*实现*会更好。这样，您可以使用实例和正常的多态调用。

# android - 无法使用 3G 进行地理定位

> ID：13035578
> 
> 赞同：2
> 
> 时间：2012-10-23T16:58:40.807
> 
> 标签：android, geolocation, google-api

在我的应用程序中，我需要对移动设备进行地理定位以计算 2 点之间的距离。所以要做到这一点，我正在使用 Google API，因为结果更好。

当我使用 WiFi 启动我的应用程序时，一切正常，但是当我使用 3G 时，谷歌的 Json 文件显示“Overlimit”

我正在使用免费的 API 访问权限，并且我当天没有尝试其他访问 API 的权限。你曾经使用过这些 API 吗？你知道问题出在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:01:38.727

在使用 3G 时，Google Servers 看到的**外部 IP 地址**被许多 3G 订阅者共享。您的网络运营商可能正在为来自同一个外部 IP 的许多客户提供服务，其中很多客户可能使用了**Geolocation API**。

API 限制基于来自每个 IP 地址的访问。因此问题。恐怕解决这个问题的唯一方法是[**获得许可证。**](https://developers.google.com/maps/licensing)

# c# - LINQ 中的多对多查询

> ID：13035580
> 
> 赞同：0
> 
> 时间：2012-10-23T16:58:45.417
> 
> 标签：c#, linq

我有 4 张桌子：

> 地址 - AddressID、城市、地址、邮政编码
> 
> OBAddress - OBID、AddressID
> 
> OB-OBID
> 
> 状态 - StateID，StateAbbreviation

如何加入多对多关系的三个表？我试过：

```
var recordsPhysicalAddress = ( from a in db.Addresses
    join oba in db.obAddresses on a.AddressID equals oba.AddressID
    join ob in db.obAddresses on oba.obID equals passedinID
    join s in db.States on a.StateID equals s.StateID
    where oba.obID == ob.obID
    && a.AddressTypeID == '5' //5 is records physical address
    select new
    {
        a.Address1, 
        a.City, 
        a.StateID,
        s.StateAbbreviation,
        a.ZipCode
    }).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:15:12.137

```
var query = (from a in db.Addresses
             join oba in db.obAddresses on a.AddressID equals oba.AddressID
             // do not join with db.obAddresses again
             join s in db.States on a.StateID equals s.StateID
             where oba.obID == passedinID // filter here
                   && a.AddressTypeID == '5'
             select new {
                   a.Address,
                   a.City,
                   a.StateID,
                   s.StateAbbreviation,
                   a.ZipCode
             }).FirstOrDefault(); 
```

我在评论中添加了一些注释以供查询。但是仍然想知道为什么您提到了第四张桌子？

# cakephp - CakePHP 2.0+ 中的 Group By 分页

> ID：13035581
> 
> 赞同：2
> 
> 时间：2012-10-23T16:58:45.793
> 
> 标签：cakephp, group-by, cakephp-2.2, pagination

在 CakePHP 中对使用 GROUP BY 的结果进行分页时，结果计数的数量不正确。这是一个记录在案的项目，正如（以前）所期望的那样，但根据[CakePHP book 中的这个页面](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination)：

> 在 CakePHP 2.0 中，使用组子句时不再需要实现 paginateCount()。核心 find('count') 将正确计算总行数。

我正在使用 CakePHP 2.2.3，但我仍然有问题。我需要做什么具体的事情吗？我误读了声明吗？我还需要使用自定义 paginate() 和/或 paginateCount 方法吗？

**澄清“不正确的计数”：** 我正在加入 table1 w/table2 - 所以即使我只有一个“table1 项目”，它也会检索 2 行......但是然后我按 table1 项目的 id 分组，这使得它只返回 1 个项目。但是，计数显示“找到 2 个”，但仅显示 1 个项目。

**更新：（代码）**

```
$this->Paginator->settings = array(
'limit' => (int) 20,
'conditions' => array(
    (int) 0 => array(
        'Article.node_type_id' => '5050ede8-3f88-45f4-b58f-1130d9d84497'
    ),
    (int) 1 => array(
        'OR' => array(
            'DataText.title LIKE' => '%john%',
            'Article.name LIKE' => '%john%'
        )
    )
),
'order' => array(
    'Article.created' => 'DESC'
),
'fields' => array(),
'joins' => array(
    (int) 0 => array(
        'table' => 'data_texts',
        'alias' => 'DataText',
        'type' => 'INNER',
        'conditions' => array(
            (int) 0 => 'DataText.node_id = Article.id'
        )
    )
),
'contain' => array(
    'Slug' => array(
        'order' => array(
            (int) 0 => 'FIELD(Slug.language_id, "c141eafd-567a-4bc5-badd-c5a163c01f46") DESC'
        )
    ),
    'NodeType' => array(
        'ChildNodeType' => array()
    ),
    'DataLocation' => array(
        'conditions' => array()
    ),
    'DataMeta' => array(
        'conditions' => array()
    )
),
'group' => 'Article.id' 
```

)

分页调用本身：

```
$nodes = $this->paginate($model); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:48:13.240

`find("count")`如果查询导致仅 1 个组的记录，则存在错误并返回不正确的计数。[现在](https://github.com/cakephp/cakephp/commit/33a879ff411928429a5b0188a68eecd9632f87e3)已解决此问题。修复可能是在 2.2.3 版本之后完成的，所以现在只需使用`master`github 的分支，修复将在下一个版本中可用。

# c - 使用可变变量格式化

> ID：13035583
> 
> 赞同：0
> 
> 时间：2012-10-23T16:59:10.413
> 
> 标签：c, variadic

c89 gcc 4.7.4

我只是在试验这样的宏：

```
#define LOG_INFO_1(fmt, ...) printf(fmt, __VA_ARGS__)
#define LOG_INFO_2(...) printf(__VA_ARGS__) 
```

并像这样使用：

```
LOG_INFO_1("%s:%d", __func__, __LINE__);
LOG_INFO_2("%s:%d", __func__, __LINE__); 
```

输出给出完全相同的格式。我只是想知道`fmt`在我的第一个宏中使用参数有什么好处？它似乎并不真正需要。我怎么能利用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:10:47.583

指定第一个参数`fmt`对编译器/计算机没有影响。

但是，我认为这对可能使用您的代码的其他程序员有很大的不同。

查看`LOG_INFO_1(fmt, ...)`，我看到一个强烈的提示，即该宏采用 printf 样式的格式字符串，后面带有附加参数。

看着`LOG_INFO_2(...)`，我不知道应该传递什么参数，或者以什么顺序传递。也许第一个参数应该是[RFC 5424](https://www.rfc-editor.org/rfc/rfc5424)严重性代码？也许它应该是要写入的输出流？宏中没有任何内容暗示答案。

我认为你应该通过尽可能多地指定来让追随你的程序员更容易工作，并且`...`只在绝对必要的情况下留下模棱两可的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:06:10.783

对于宏，您使用哪种变体并不重要。预处理器将从两个宏生成相同的 C 代码。

* * *

对于可变参数函数，至少需要定义一个参数。

所以

```
void foo(const char * fmt, ...); 
```

会编译，而

```
void bar(...); 
```

不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:18:44.463

看看[ACE_DEBUG/Log_Msg](http://www.aoc.nrao.edu/php/tjuerges/ALMA/ACE-5.5.2/html/ace/Log__Msg_8h-source.html)。ACE（自适应通信环境）是一个成熟的 C++ 网络框架。他们以类似的方式使用宏和可变参数实现了线程安全的日志架构。

# php - 用ajax更改脚本标签，为什么仍然有效？

> ID：13035585
> 
> 赞同：1
> 
> 时间：2012-10-23T16:59:24.027
> 
> 标签：php, javascript, jquery, ajax

嗨，我的问题是关于问题是如何解决的......一个朋友有一个 html 代码，如：

```
<div id="result">
    <script type="text/javascript">
        function selectColor(value){
            return "#319336";
        }
    </script>
</div> 
```

并在结果中使用 jQuery .load() 调用调用一个 PHP 文件，该文件带有一个发送这样的 JavaScript 函数的函数

```
<?php
    function returnFuntion(){
        return '<script type="text/javascript">
            function selectColor(value){
                switch(value){
                    case "a":
                        return "#000000";
                        break;
                    case "b":
                        return "#FFFFFF";
                        break;
                    default:
                        return "#319336";
                }
        }</script>';
    }
?> 
```

我不知道这是如何工作的，但适用于所有浏览器，我的朋友说“它可以工作，别担心”。发生什么了？为什么 JavaScript 能识别新代码而不是旧代码？这是正确的方法吗？最初的问题是 JavaScript 函数返回必须随着从 PHP 获得的 MySQL 值而改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:05:02.400

这些是函数声明，解析器总是在读取任何代码之前读取这些声明。

因此，当定义第二个函数时，第一个函数被简单地覆盖

```
 function a(){

        alert('Hello');
    }

    function a(){

       alert('Second Function !!');
    }

    a(); // Call-- 
```

[小提琴](http://jsfiddle.net/sushanth009/XzfGt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:05:30.207

理想情况下，两个脚本都应该可以完美运行，但第一个确实不是在 div 中编写 javascript 的好方法。如果它不起作用，可能是因为该函数在加载之前就被调用了。第二个很好，因为 php 正在格式化该 javascript 并准备好打印在您页面的某个位置。要记住的关键是首先应该加载/打印函数，然后调用它以避免任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:10:33.910

@luismy，最好在服务器和客户端之间交换数据，而不是脚本。我只是好奇你为什么不在客户端实现 UI 逻辑，而在服务器上实现应用程序逻辑？特别是对于这个示例，甚至进行 XHR 调用都没有任何意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:32:53.217

如果您正在加载 JavaScript，请使用[getScript()](http://api.jquery.com/jQuery.getScript/)

让 php 代码像编写外部文件一样返回内容。确保也设置内容类型。

# java - 组织从一个 JSON 对象结构到另一个 JSON 对象结构的映射代码

> ID：13035587
> 
> 赞同：0
> 
> 时间：2012-10-23T16:59:29.613
> 
> 标签：java, json, xslt, transform, etl

我有这个应用程序，我在其中读取了一系列 JSON 对象......比如说，j1,j2,...,jn 我需要将它们转换为 j1',j2',...,jn' - 注意这是JSON 到 JSON 的转换。

目前我正在通过遍历第一个对象然后组成第二个对象的实用方法来做到这一点。

我对我的方法相当满意，但是它变得乏味。我想知道人们是否知道工具包或代码模式来解决这个问题。

谢谢。

PS：例如，我在一百万年前研究 XSLT 以解决 XML 的类似问题，但我对 XSLT 并不太迷恋……是否有用于 JSON 的 XSLT 或通用转换语言？-- 注意：XSLT 被引用为 XML 的类似技术 -- 我不希望将 JSON 转换为 XML 或反之亦然。

PPS：我认为我可以使用 ETL 工具，但我认为这是一个非常轻量级的应用程序，ETL 会涉及太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:12:44.093

对于您的标签，我猜您正在使用 JAVA，

你可以看看[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

我的 navie 方法将使用该库将 JSON 转换为自定义 bean，然后再转换回 JSON

然后就可以用 JAVA 的方式管理映射逻辑了。

你也可以看看这个问题 [XSLT equivalent for JSON](https://stackoverflow.com/questions/1618038/xslt-equivalent-for-json)

# c# - 带有 String.Format 奇怪编译器错误的扩展方法

> ID：13035591
> 
> 赞同：3
> 
> 时间：2012-10-23T16:59:38.693
> 
> 标签：c#, string, extension-methods, string-formatting

> **可能重复：**
> [是否可以创建扩展方法来格式化字符串？](https://stackoverflow.com/questions/6587243/is-it-possible-to-create-an-extension-method-to-format-a-string)

我有这堂课：

```
public class Person 
{
    public string Name { get; set; }
    public uint Age { get; set; }

    public override string ToString()
    {
        return String.Format("({0}, {1})", Name, Age);
    }
} 
```

扩展方法：

```
public static string Format(this string source, params object[] args)
{
    return String.Format(source, args);
} 
```

我想测试它，但我有以下奇怪的行为：

```
Person p = new Person() { Name = "Mary", Age = 24 };

// The following works
Console.WriteLine("Person: {0}".Format(p));
Console.WriteLine("Age: {0}".Format(p.Age));

// But this gives me a compiler error:
Console.WriteLine("Name: {0}".Format(p.Name)); 
```

编译器错误：

*无法通过对实例的引用访问成员“string.Format (string, params object [])”。使用类型名称对其进行限定。*

为什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:22:49.877

因为`p.Name`是一个字符串，所以在第三种情况下你有一个模棱两可的调用：

```
string.Format(string) 
```

对比

```
{string instance}.Format(object[]); 
```

解析器选择最适合签名的方法（在您的情况下为 a `string`vs. an `object[]`）而不是扩展方法。

您可以通过重命名扩展方法或将第二个参数强制转换为对象以防止解析器选择静态方法来解决问题：

```
Console.WriteLine("Name: {0}".Format((object)p.Name)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:03:17.807

您已经创建了一个与现有方法 ( [String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx) ) 具有相同签名的扩展方法。您需要为扩展方法使用不同的名称。类似 FormatWith(...) 的东西。

我站得更正了。我只是组合了一个单元测试来验证这种行为并且无法调用“some string”.Format(...)。在 C# 中，编译器给了我一个“无法在非静态上下文中访问静态方法'格式'”。鉴于此，我猜你已经设法混淆了编译器。

# python - 使用 NLTK 对阿拉伯语单词进行标记

> ID：13035595
> 
> 赞同：23
> 
> 时间：2012-10-23T16:59:57.273
> 
> 标签：python, tokenize, nltk

我正在使用**NLTK** `word_tokenizer`将句子拆分为单词。

我想标记这句话：

```
في_بيتنا كل شي لما تحتاجه يضيع ...ادور على شاحن فجأة يختفي ..لدرجة اني اسوي نفسي ادور شيء 
```

我正在写的代码是：

```
import re
import nltk

lex = u" في_بيتنا كل شي لما تحتاجه يضيع ...ادور على شاحن فجأة يختفي ..لدرجة اني اسوي نفسي ادور شيء"

wordsArray = nltk.word_tokenize(lex)
print " ".join(wordsArray) 
```

问题是该`word_tokenize`函数没有按单词拆分。相反，它按字母拆分，因此输出为：

```
"ف ي _ ب ي ت ن ا ك ل ش ي ل م ا ت ح ت ا ج ه ي ض ي ع ... ا د و ر ع ل ى ش ا ح ن ف ج أ ة ي خ ت ف ي .. ل د ر ج ة ا ن ي ا س و ي ن ف س ي ا د و ر ش ي ء" 
```

有任何想法吗 ？

到目前为止我所达到的：

通过尝试[此处](http://text-processing.com/demo/tokenize/)的文本，它似乎是由字母标记的。然而，其他的分词器也正确地对其进行了分词。这是否意味着`word_tokenize`仅适用于英语？这适用于大多数 NLTK 功能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T00:02:57.597

我总是推荐使用`nltk.tokenize.wordpunct_tokenize`. [您可以在http://text-processing.com/demo/tokenize/](http://text-processing.com/demo/tokenize/)上试用许多 NLTK 标记器并亲自查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-17T15:17:13.860

这是我用我的代码得到的输出，但我记得 unicode 在 python 2 中并不顺利，我使用了 3.5

```
nltk.word_tokenize('في_بيتنا كل شي لما تحتاجه يضيع ...ادور على شاحن فجأة يختفي ..لدرجة اني اسوي نفسي ادور شيء ') 
```

['في_بيتنا', 'كل', 'شي', 'لما', 'تحتاجه', 'يضيع', '...', 'ادور', 'على', 'شاحن', 'فجأة', 'يختفي' , '..لدرجة', 'اني', 'اسوي', 'نفسي', 'ادور', 'شيء']

# winapi - 动态 DLL 和 ESP 损坏

> ID：13035596
> 
> 赞同：0
> 
> 时间：2012-10-23T17:00:02.283
> 
> 标签：winapi, dll

我正在学习使用动态 DLL。我在 DLL 库中创建了 2 个函数：

```
DWORD fn1(VOID);
DWORD fn2(WCHAR*); 
```

并使用 def 文件将其导出

```
EXPORTS
fn1
fn2 
```

当我加载和使用 fn1 时，一切正常，但第二个导致问题`Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call. This is usually a result of calling a function declared with one calling convention with a function pointer declared with a different calling convention.`

指针定义如下：

```
typedef DWORD (WINAPI *fn1)(void);
typedef DWORD (WINAPI *fn2)( WCHAR* ); 
```

并像这样加载：

```
fn1 first = NULL;
fn2 second = NULL;
first = (fn1) GetProcAddress( dll,  "fn1" ); 
second = (fn2) GetProcAddress( dll,  "fn2" ); 
```

你能帮我吗，什么可能导致问题 - 当我“继续”应用程序工作正常时......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:07:01.580

显然函数指针类型的声明是不正确的。它在您的代码段中也不匹配，您将它们声明为 WINAPI。这是一个将它们的调用约定设置为 __stdcall 的宏。但是，您没有声明具有相同属性的实际函数。默认值为 __cdecl。

你侥幸逃脱，`fn1`因为它没有任何参数，所以调用约定错误不会导致堆栈不平衡。它适用于`fn2`. 生成的代码不会按照 __cdecl 的要求在函数调用后将传递的参数从堆栈中弹出。

删除 WINAPI 进行修复。

# java - Python 能做什么而 Jython 不能？

> ID：13035598
> 
> 赞同：4
> 
> 时间：2012-10-23T17:00:03.060
> 
> 标签：java, python, jython, language-features

我需要一个灵活的框架，并想尝试在它的不同位置注入一些代码，只是为了即时改变行为。

由于它是一个 Java 项目，而且基本上我只限于接口和玩那些背后的实现，我认为我可能会给 Jython 一个运行，看看它会带来什么。

我的意思是，`eval()`它是一个强大的函数，我可以将代码添加为字符串并对其进行评估，至少在 Python 中并且出现了问题，因为它基本上可以编译为 Java ......

与 Python 相比，Jython 有哪些限制？我可以在 Python 中做哪些在 Jython 中无法做到的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:52:51.790

正如前一篇文章所述，您确实希望将 CPython 与 Jython 进行比较。如前所述，Jython 的稳定版本为 2.5.3，而 alpha 版本为 2.7。这意味着 Jython 缺少某些功能。例如，从 2.5 开始，有序字典、计数器和命名元组都被添加到[Collections包中。](http://docs.python.org/library/collections.html)使用 Jython，您不能使用许多第 3 方 Python 库，例如 NumPy、SciPy、GeoDjango、Lxml 或任何使用 C 扩展的东西。

另一方面，Jython 有一些使用 CPython 找不到的好处。使用 Jython，您可以在标准 Java 服务器（例如 Tomcat、WebLogic 等）[上部署 Django 。](http://packages.python.org/django-jython/)您可以从 Jython 代码调用现有的 Java 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:15:20.717

考虑将 jython 与[cpython](http://en.wikipedia.org/wiki/CPython)进行比较，因为它们都是 python，但一个用 c 实现，另一个用 Java 实现。因此，使用 cpython 启动时间要快得多。如果您检查每个执行 hello world 示例的启动时间，cpython 执行代码的速度大约快 50 倍。Jython stable 目前使用的是 Python 2.5，它比 2 系列中的当前 python 2.7 旧得多，并且他们没有 python3 的实现。所以你会错过那里的一些功能。

```
$ time jython -c "print 'hello'"
hello
real    0m1.641s
$ time python -c "print 'hello'"
hello
real    0m0.026s 
```

# django - apache的权限问题

> ID：13035600
> 
> 赞同：0
> 
> 时间：2012-10-23T17:00:09.160
> 
> 标签：django, linux, apache, amazon-ec2, mod-wsgi

环境细节：

```
Amazon Ec2 Ubuntu 12.04
Django + mod_wsgi + python 2.6
web server: apache2 
```

我已经`10GB` `ebs volume`将一个实例安装到`/mnt/ebs1/`. 安装卷和格式化后，我已将所有项目文件放在`/mnt/ebs1/project`. `wsgi`文件在`/mnt/ebs1/project/apache/django.wsgi`. wsgi文件的内容是：

```
import os, sys

sys.path.insert(0, '/mnt/ebs1/project')
sys.path.insert(1, '/mnt/ebs1')

os.environ['DJANGO_SETTINGS_MODULE'] = 'project.configs.common.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我的`httpd.conf`文件如下所示：

```
LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so
WSGIPythonHome /usr/bin/python2.6

WSGIScriptAlias / /mnt/ebs1/project/apache/django.wsgi

<Directory /mnt/ebs1/project>
Order allow,deny
Allow from all
</Directory>

<Directory /mnt/ebs1/project/apache>
Order allow,deny
Allow from all
</Directory>

Alias /static/ /mnt/ebs1/project/static/
<Directory /mnt/ebs1/project/static>
Order deny,allow
Allow from all
</Directory> 
```

上面的配置给了我`Forbidden: You don't have permission to access / on this server`.

我试图找到正在运行 apache 的用户，使用`ps aux`which is `www-data`and has group `www-data`。我曾尝试使用更改其所有权`/mnt/ebs1`及其子目录，`chown -R www-data:www-data /mnt/ebs1`但这仍然不能解决问题。谁能告诉我我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:55:41.837

副本：

[https://serverfault.com/questions/441444/permission-issue-for-apache](https://serverfault.com/questions/441444/permission-issue-for-apache)

WSGIPythonHome 是错误的。

去阅读响应一式两份。

# java - JPA OneToMany 在插入另一行时删除第一行（在多方面）

> ID：13035602
> 
> 赞同：1
> 
> 时间：2012-10-23T17:00:10.190
> 
> 标签：java, jpa, datanucleus, many-to-one

我的实体代表一对多：

```
@Entity
@Table(name = "Users")
public class User {
    @Id
    @GeneratedValue
    private int id = -1;

    @OneToMany(mappedBy = "user", cascade = CascadeType.ALL)
    private List<SignIn> signIns;
}

@Entity
@Table(name = "SignIns")
public class SignIn {
    @Id
    @GeneratedValue
    private int id;
    @ManyToOne
    private User user;

    public SignIn(User user) {
        this.user = user;
    }
} 
```

当我坚持一个用户，然后用创建的用户坚持一个登录时，一切正常（每个表将有 1 行）。当我重用创建的用户以保持另一个登录时，第一个登录行将被新登录所取代。

持续存在的代码：

```
User user = new User();
persist(user);
SignIn signIn = new SignIn(user);
SignIn signIn2 = new SignIn(user);
persist(signIn);
persist(signIn2);

private void persist(Object entity) {
        EntityManager em = entityManagerFactory.createEntityManager();
        EntityTransaction tx = em.getTransaction();
        try {
            tx.begin();
            em.merge(entity);
            tx.commit();
        } finally {
            if (tx.isActive()) {
                tx.rollback();
            }
            em.close();
        }
    } 
```

我忽略了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:13:36.580

我也必须在反面设置登录（在我的情况下是用户）。

所以：
- 创建一个登录
- 合并它
- 将它添加到用户
- 合并用户

# java - 如何在java中使用对象列表的列表？

> ID：13035603
> 
> 赞同：0
> 
> 时间：2012-10-23T17:00:12.987
> 
> 标签：java, collections

在下面提到的程序数组中，是一个作为参数传递给该函数的 List。任务是将数组切割成定义大小的 LookupTable 列表，然后将它们添加到 binlists 中。在这种情况下，binlists 的声明应该是什么？应该是 List 吗？因为无论哪种方式，它都会在 add() 函数中给我一个错误。如果我使用所有提到的列表作为原始类型，它工作得很好。但我的意图是使其参数化。

```
 protected List<LookupTable> binlists;
    binlists = new ArrayList<LookupTable>(nofbins);

    while(chunk+binsize <= tot_size)
    {
        List tempsort = (List<LookupTable>)arry.subList(chunk,chunk+binsize);
        System.out.println(tempsort.size());
        binlists.add(tempsort);
        chunk = chunk+binsize;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:06:01.750

您需要使用`addAll`方法将列表添加到现有列表：-

```
binlists.addAll(tempsort); 
```

而且您应该始终声明您`List`属于`generic type`.

因此，将您的`tempSort`列表声明`generic list`为类型`LookUpTable`：-

```
List<LookupTable> tempsort = 
                  (List<LookupTable>)arry.subList(chunk,chunk+binsize); 
```

事实上，`typecast`如果您也将列表声明`arry`为泛型类型，您可以避免这种情况。

# actionscript-3 - 在 Actionscript 3.0 中检查字典定义的单词

> ID：13035604
> 
> 赞同：1
> 
> 时间：2012-10-23T17:00:15.073
> 
> 标签：actionscript-3, flash

有一个 xcode/objective C 类

```
UIReferenceLibraryViewControl 
```

有一个很棒的方法

```
+ (BOOL)dictionaryHasDefinitionForTerm:(NSString *)term 
```

AS3 中是否有一种方法可以检查英语词典中是否定义了字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:46:01.563

不是标准库的一部分，您可以尝试：

*   [谷歌词典.as](http://code.google.com/p/googleas3api/source/browse/branches/GoogleAPI_v3_RC/src/be/boulevart/google/api/dictionary/GoogleDictionary.as?r=52)

显然，这需要互联网连接。

不是基于定义的，但还有这个：

*   [Squiggly - Adob​​e 实验室](http://labs.adobe.com/technologies/squiggly/)

# javascript - JavaScript 中的原始包装器行为

> ID：13035605
> 
> 赞同：3
> 
> 时间：2012-10-23T17:00:15.590
> 
> 标签：javascript, ecma262

在《*面向 Web 开发人员的专业 Javascript* 》一书中，我读到 JavaScript 在尝试访问原始对象的属性和方法时会在内部使用原始包装器。这是否意味着每次我尝试访问字符串原语的长度属性时，都会重新计算值？我的直觉告诉我，由于字符串是固定的，因此它们的长度值存储在某个地方并且只能由包装器访问，但我宁愿确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:48:48.103

By specification, yes ([§11.2.1](http://es5.github.com/#x11.2.1), [§8.7.1](http://es5.github.com/#x8.7.1), [§9.9](http://es5.github.com/#x9.9), [§15.5.5](http://es5.github.com/#x15.5.5)).

Still that does not mean an actual implementation will create string objects in the memory, this is surely optimized.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T17:06:40.583

我认为这是真的，当您尝试访问原始*值*的属性时，原始包装器是动态创建的，如下所示：

```
"foo".length; // behaves as new String('foo').length 
```

不仅`length`是在您尝试访问该属性的那一刻计算，而且还会创建一个全新的对象（该对象是实际包含该属性的对象）。然后立即丢弃包装器。

如果您担心性能，请不要担心。很少有必须使用原始包装对象的情况，而且它们的性能似乎比仅使用原始值慢几个数量级（请参阅[test](http://jsperf.com/primitive-values-versus-wrappers)）。让解释器关心优化。

# c# - C# 将焦点放在按钮上/使其处于活动状态

> ID：13035608
> 
> 赞同：2
> 
> 时间：2012-10-23T17:00:37.263
> 
> 标签：c#, button, focus

我正在用 C# 制作一个蛇游戏，我有一个暂停和播放按钮。问题是：这些按钮在完全相同的位置，所以我点击暂停后无法点击开始（因为它仍然处于活动状态）

```
private void picBreak_Click(object sender, EventArgs e)
{
  timer1.Stop();
  picBreak.Visible = false;
  picStart.Visible = true;
}

private void picStart_Click(object sender, EventArgs e)
{
  timer1.Start();
  picBreak.Visible = true;
  picStart.Visible = false;
  picStart.Focus = true;
} 
```

.Focus 不起作用并给出错误：/

错误 = 错误 1 ​​无法分配给“焦点”，因为它是“方法组” C:\Users\Mave\Desktop\SnakeGame\Form1.cs 271 7 SnakeGame

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:02:13.513

[Control.Focus](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focus.aspx)是一种方法，而不是属性。这应该是：

```
private void picStart_Click(object sender, EventArgs e)
{
  timer1.Start();
  picBreak.Visible = true;
  picStart.Visible = false;
  picBreak.Focus(); // Focus picBreak here?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:03:39.880

在您的代码中，您试图将焦点放在您在上一行中设置为不可见的控件上……此外，编译器告诉您这`Focus`是一种方法，而您正试图将其用作属性。

**我会以不同的方式做到这一点：**

只有一个名为`btnStartPauseResume`... 的按钮，在点击事件中：

```
private void btnStartPauseResume_Click(object sender, EventArgs e)
{
    if (btnStartPause.Text == "start")
    {
       btnStartPause.Text == "pause";

       // code to start the game
    }
    else if (btnStartPause.Text == "pause")
    {
       btnStartPause.Text == "resume";

       // code to pause the game
    }
    else if (btnStartPause.Text == "resume")
    {
       btnStartPause.Text == "pause";

       // code to resume the game
    }
} 
```

# r - 如何使用 data.tables 对多列进行有效的矢量化更新？

> ID：13035609
> 
> 赞同：2
> 
> 时间：2012-10-23T17:00:39.587
> 
> 标签：r, dataframe, data.table

我有以下使用 data.frames 的代码，我想知道如何使用 data.tables，使用最高效、最矢量化的代码来编写它？

数据帧代码：

```
set.seed(1)
to <- cbind(data.frame(time=seq(1:5),bananas=sample(100,5),apples=sample(100,5)),setNames(data.frame(matrix(sample(100,90,replace=T),nrow=5)),paste0(1:18)))
from <- cbind(data.frame(time=seq(1:5),blah=sample(100,5),foo=sample(100,5)),setNames(data.frame(matrix(sample(100,90,replace=T),nrow=5)),paste0(1:18)))
from
to

rownames(to) <- to$time
to[as.character(from$time),paste0(1:18)] <- from[,paste0(1:18)]
to 
```

运行这个：

```
>     set.seed(1)
>     to <- cbind(data.frame(time=seq(1:5),bananas=sample(100,5),apples=sample(100,5)),setNames(data.frame(matrix(sample(100,90,replace=T),nrow=5)),paste0(1:18)))
>     from <- cbind(data.frame(time=seq(1:5),blah=sample(100,5),foo=sample(100,5)),setNames(data.frame(matrix(sample(100,90,replace=T),nrow=5)),paste0(1:18)))
>     from
  time blah foo  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1    1   66  22 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2    2   35  13 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3    3   27  47 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4    4   97  90 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5    5   61  58 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79
>     to
  time bananas apples  1   2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1    1      27     90 21  50 94 39 49 67 83 79 48 10 92 26 34 90 44 21 24 80
2    2      37     94 18  72 22  2 60 80 65  3 87 32 30 48 84 87 72 72  6 46
3    3      57     65 69 100 66 39 50 11 79 48 44 52 46 77 35 39 40 13 65 42
4    4      89     62 39  39 13 87 19 73 56 74 25 67 34  9 34 78 33 25 88 82
5    5      20      6 77  78 27 35 83 42 53 70  8 41 66 88 48 97 76 15 78 61
> 
>     rownames(to) <- to$time
>     to[as.character(from$time),paste0(1:18)] <- from[,paste0(1:18)]
>     to
  time bananas apples  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1    1      27     90 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2    2      37     94 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3    3      57     65 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4    4      89     62 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5    5      20      6 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79 
```

基本上，我们从的列`paste0(1:18)`中更新 的列，匹配s。`to``paste0(1:18)``from``time`

`data.table`s 显然有一些优势，比如在控制台打印它们时不需要 head，所以我正在考虑使用它们。

但是我不想`:=`手动编写表达式，即尽量避免：

```
to[from,`1`:=i.`1`,`2`:=i.`2`, ..] 
```

如果可能的话，我也更喜欢使用矢量化语法，而不是某种 for 循环，即尽量避免类似：

```
for( i in 1:18 ) {
    to[from, sprintf("%d",i) := i.sprintf("%d",i)]
} 
```

我通读了 faq 小插图和 datatable-intro 小插图，尽管我承认我可能没有 100% 理解所有内容。

我查看了[循环遍历 data.table 中的列并转换这些列](https://stackoverflow.com/questions/8374816/loop-through-columns-in-a-data-table-and-transform-those-columns)，但我不能说我 100% 理解它，而且似乎说我需要使用 for 循环？

在 8374816 的底部似乎确实有某种暗示，可能只使用数据框语法，添加`with=FALSE`? 但是由于 data.frame 过程正在对行名称进行黑客攻击，我不确定它的效果如何/是否有效，我想知道它在多大程度上利用了 data.table 的效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:38:14.520

好问题。您展示的基本构造：

```
to[as.character(from$time),paste0(1:18)] <- from[,paste0(1:18)] 
```

假设行名不能重复，或者如果它们是那么只有第一个匹配。这里，LHS 的`<-`行数与 RHS 的行数相同`<-`。

`data.table`是不同的，因为通常情况下，多行`to`可能匹配；默认`mult`为`"all"`. `data.table`也更喜欢长格式而不是宽格式。所以这个问题`data.table`有点像它不是真正设计的东西。如果`NA`这 18 列中有任何列（即稀疏列），那么长格式可能更合适。如果所有 18 列都是同一类型，那么 a`matrix`可能更合适。

也就是说，这里有三个`data.table`完整性选项。

**1.使用`:=`但没有for循环（LHS中的多个LHS和多个RHS：=RHS）**

```
from = as.data.table(from)
to = as.data.table(to)
from
   time blah foo  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1   66  22 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2:    2   35  13 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3:    3   27  47 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4:    4   97  90 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5:    5   61  58 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79
to
   time bananas apples  1   2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1      27     90 21  50 94 39 49 67 83 79 48 10 92 26 34 90 44 21 24 80
2:    2      37     94 18  72 22  2 60 80 65  3 87 32 30 48 84 87 72 72  6 46
3:    3      57     65 69 100 66 39 50 11 79 48 44 52 46 77 35 39 40 13 65 42
4:    4      89     62 39  39 13 87 19 73 56 74 25 67 34  9 34 78 33 25 88 82
5:    5      20      6 77  78 27 35 83 42 53 70  8 41 66 88 48 97 76 15 78 61
setkey(to,time)
setkey(from,time)
to[from,paste0(1:18):=from[.GRP,paste0(1:18),with=FALSE]]
   time bananas apples  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1      27     90 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2:    2      37     94 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3:    3      57     65 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4:    4      89     62 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5:    5      20      6 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79 
```

**或者**

```
to[from,paste0(1:18):=from[,paste0(1:18),with=FALSE],mult="first"]
   time bananas apples  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1      27     90 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2:    2      37     94 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3:    3      57     65 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4:    4      89     62 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5:    5      20      6 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79 
```

注意我使用的是最新的 v1.8.3，这是选项 1 工作所必需的（`.GRP`刚刚添加，`with=FALSE`不再需要外部）。

**2.使用一个列表列来存储长度为18的向量，而不是18列**

```
to = data.table( time=seq(1:5),
                 bananas=sample(100,5),
                 apples=sample(100,5),  
                 v18=replicate(5,sample(100,18),simplify=FALSE))
from =  data.table( time=seq(1:5),
                    blah=sample(100,5),
                    foo=sample(100,5),
                    v18=replicate(5,sample(100,18),simplify=FALSE))
setkey(to,time)
setkey(from,time)

from
   time blah foo                 v18
1:    1   56  97   88,47,1,71,69,18,
2:    2   69  40   96,99,60,3,33,27,
3:    3   65  84 100,38,56,72,84,55,
4:    4   98  74 91,69,24,63,27,100,
5:    5   46  52    65,4,59,41,8,51,

to
   time bananas apples                 v18
1:    1      66     73 100,36,74,77,68,46,
2:    2      19     37   84,88,92,8,37,52,
3:    3      94     77   37,94,13,7,93,43,
4:    4      88      2  27,93,71,16,46,66,
5:    5      91     91   85,94,58,49,19,1,

to[from,v18:=i.v18]
to
   time bananas apples                 v18
1:    1      66     73   88,47,1,71,69,18,
2:    2      19     37   96,99,60,3,33,27,
3:    3      94     77 100,38,56,72,84,55,
4:    4      88      2 91,69,24,63,27,100,
5:    5      91     91    65,4,59,41,8,51, 
```

如果您不习惯列出列打印，则尾随逗号表示该向量中有更多项目。只打印前 6 个。

**3\. 使用`data.frame`语法`data.table`**

```
to = as.data.table(to)
from = as.data.table(from)
setkey(to,time)
setkey(from,time)

from
   time blah foo  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1   66  22 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2:    2   35  13 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3:    3   27  47 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4:    4   97  90 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5:    5   61  58 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79

to
   time bananas apples  1   2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1      27     90 21  50 94 39 49 67 83 79 48 10 92 26 34 90 44 21 24 80
2:    2      37     94 18  72 22  2 60 80 65  3 87 32 30 48 84 87 72 72  6 46
3:    3      57     65 69 100 66 39 50 11 79 48 44 52 46 77 35 39 40 13 65 42
4:    4      89     62 39  39 13 87 19 73 56 74 25 67 34  9 34 78 33 25 88 82
5:    5      20      6 77  78 27 35 83 42 53 70  8 41 66 88 48 97 76 15 78 61

to[from, paste0(1:18)] <- from[,paste0(1:18),with=FALSE]
to
   time bananas apples  1  2   3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18
1:    1      27     90 98  2 100 46 58 60 69 46 62 19 29 42 64 90 30 19 72 60
2:    2      37     94 74 72  50 52  8 57 61 18 56 53 90  7 85 65 20 76 39 12
3:    3      57     65 36 11  49 21  4 53 24 75 33  8 45 34 86 75 89 73 11 85
4:    4      89     62 44 45  18 23 65 99 26 11 46 28 78 73 40 61 51 95 93 32
5:    5      20      6 15 65  76 60 93 51 73 87 51 22 89 34 39 91 88 55 29 79 
```

所以LHS的`<-`可以使用`data.table`keyed join语法；即`to[from]`。只是这种方法（目前在 R 中）将复制*整个* `to`数据集。这就是`:=`通过引用提供更新来避免的。此外，如果每行`from`与多行匹配，`to`则 RHS`<-`需要扩展以对齐（由您的用户），否则 RHS 将被回收以填充 LHS。这就是为什么，在`data.table`，我们喜欢`:=`在里面`j`，在里面`[...]`。

# mysql - Mysql 查询将新数据从一个数据库复制到另一个数据库

> ID：13035610
> 
> 赞同：0
> 
> 时间：2012-10-23T17:00:54.980
> 
> 标签：mysql, database, mysqldump

我有一个情况。当我们升级我们的服务器驱动器时，我们备份了我们的数据库，然后再次导入它，然后网站就上线了，一周后我们意识到导入并没有从转储文件复制整个备份，因为当我们检查它只有 13 GB 时它假设为 60 GB。有趣的是，我们发现有一张大表以一种有趣的方式复制，它很大，它只是复制了一些初始记录，比如 2000-5000，它复制了最后的记录，比如 400000-500000，但没有之间的记录。这不是很奇怪吗？因为当我们导入时，我们检查了初始和最后一个条目，并认为它复制了所有内容。然后我们创建了一个新的数据库并再次导入了一个转储，现在看起来没问题，但是我们的实时数据库中已经有了新条目（13GB 数据），所以我们必须复制这些并添加到我们新导入的数据库中。将这些新记录复制到恢复的数据库中的空闲方式是什么？我的意思是一些查询，它将搜索新数据库并仅添加找到的新记录。那么我是否必须转储我们的 13 GB 然后导入？或者无论如何可以从实时数据库中复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:10:02.737

您可以将 mysqldump 与以下选项一起使用：`--insert-ignore`- 编写 INSERT IGNORE 语句而不是 INSERT 语句 ( [http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_insert-ignore](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_insert-ignore) ) 使用 IGNORE 关键字，a不会插入与表中现有 UNIQUE 索引或 PRIMARY KEY 值重复的行，并且不会发出重复键错误。

# c# - 仅返回列表 C# 中包含的值

> ID：13035614
> 
> 赞同：2
> 
> 时间：2012-10-23T17:01:02.957
> 
> 标签：c#, .net, linq, list

我有一个`List<int> ListOfIDs`包含一些 ID 的数字。

我有一个`List<CustomClass> ListOfObjects`包含一些对象，这些属性反映了它们的 ID。

我在上下搜索了一个 Linq 查询，该查询将允许我从我的列表中返回一个子列表，该列表仅包含那些 ID 包含在列表中的对象。

我的尝试没有编译，我似乎无法更正语法：

```
List<CustomClass> SubList = ListOfObjects.Where(ListOfIDs.Contains(p => p.ID)) 
```

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:02:53.103

我想你想这样做吗？

```
List<CustomClass> SubList = ListOfObjects
        .Where(obj => ListOfIDs.Contains(obj.ID))
        .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T17:07:51.713

我认为这是你需要的：

```
List<CustomClass> SubList = ListOfObjects.Where(p => ListOfIDs.Contains(p.ID)).ToList(); 
```

最后别忘了打电话`ToList()`。

也可以考虑使用`HashSet`for `ListOfIDs`，因为`Contains`操作的复杂度刚刚好`O(1)`。但是，这取决于您拥有多少数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T17:13:40.770

这是您要执行的操作的正确语法：

```
... ListOfObjects.Where(p => ListOfIDs.Contains(p.ID)).ToList(); 
```

尽管这可能比以下`Where(Contains)`方法更快：

```
var sublist = (
    from obj in ListOfObjects
    join id in ListOfIDs on id equals obj.ID
    select obj ).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:03:34.350

尝试使用这段代码片段：

```
List<CustomClass> SubList = ListOfObjects.Where(o => ListOfIDs.Contains(o.ID))
                                .ToList(); 
```

# mysql - MySQL select count(distinct id) 很慢

> ID：13035615
> 
> 赞同：0
> 
> 时间：2012-10-23T17:01:11.160
> 
> 标签：mysql, select, query-optimization, distinct-values

我有一个包含大约 7000 万条记录的 MyISAM 表。当我这样做`select count(distinct id)`时，大约需要 80 秒才能获得查询结果。该表是非规范化表，这就是为什么我需要获取 id 的唯一计数，并且必须动态完成。如果我添加一个 where 子句，取决于我给出的范围，它需要 4 - 90 秒之间的更短时间。

我想知道是否有任何方法可以优化它以提高查询速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:10:56.120

尝试`SELECT SQL_CALC_FOUND_ROWS DISTINCT(id) FROM ...`，然后执行查询`SELECT FOUND_ROWS() AS Total`以获取结果。

# jquery - 从当前元素反向查找具有特定类属性的最近表行元素

> ID：13035617
> 
> 赞同：1
> 
> 时间：2012-10-23T17:01:24.897
> 
> 标签：jquery, class, html-table, reverse, closest

我有一个 JqGrid 并希望在返回到包含网格的视图/页面时自动切换最后编辑的行/组的显示。

我的过程是

1.  完成添加/编辑后将最后编辑的 OrderId 写入会话变量
2.  将其传递给隐藏表单元素中的视图

我现在想做的是使用这个“id”来定位最近的（反向）分组表行，然后我可以用它来切换显示。

因为 id"" 属性与 OrderId 匹配，所以 OrderId 的 很容易识别。

分组元素虽然是 0 索引并仅根据它在网格中的位置编号，即它与 OrderId 或 OrderLinkId 无关。

**2012 年 10 月 24 日**修改了以下示例，以证明组标题元素在单个订单元素之前关闭，即。兄弟姐妹不是父母/孩子

```
<tr id="clientOrderGridghead_0_6" class="ui-widget-content jqgroup ui-row-ltr clientOrderGridghead_0" role="row">
.....Group Header 6 Content.....
</tr>
<tr id="403" class="ui-widget-content jqgrow ui-row-ltr" style="" tabindex="-1" role="row">
</tr>
<tr id="414" class="ui-widget-content jqgrow ui-row-ltr" style="" tabindex="-1" role="row">
</tr>
<tr id="418" class="ui-widget-content jqgrow ui-row-ltr" style="" tabindex="-1" role="row">
</tr>
<tr id="clientOrderGridghead_0_7" class="ui-widget-content jqgroup ui-row-ltr clientOrderGridghead_0" role="row">
......Group Header 7 Content......
</tr> 
```

上面的示例显示了充当组标题的顶部元素，随后的 3 个元素是相关订单的记录行。

标题元素始终具有类

```
class="ui-widget-content jqgroup ui-row-ltr clientOrderGridghead_0" 
```

我已经能够通过硬编码组元素的 id 成功地进行切换，如下所示

```
jQuery('#clientOrderGrid').jqGrid('groupingToggle','clientOrderGridghead_0_6'); 
```

但是我现在正在努力获取插入 groupingToggle 调用并使其动态化所需的 id。

我试过以下

```
var groupId = $('#' + lastOrderId).closest('tr').find('.ui-widget-content jqgroup ui-row-ltr clientOrderGridghead_0').attr('id'); 
```

在看到这里的例子之后 [在 jQuery 的 .closest() 中使用类名](https://stackoverflow.com/questions/4096950/using-a-class-name-in-jquerys-closest)

但是，这返回未定义。

任何指针都非常感谢。

**24/10/2012** 又一次尝试

```
var groupId = $('#' + lastOrderId).closest('tbody').find('.ui-widget-content jqgroup ui-row-ltr clientOrderGridghead_0').attr('id'); 
```

但还是没有喜悦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:13:38.150

我认为你应该去

```
var groupId = $('#' + lastOrderId).parent().find('.clientOrderGridghead_0').attr('id'); 
```

编辑：删除了查找中不必要的类。

编辑2：首先我无法理解您的问题。

请试试这个：

```
var groupId = $('#' + lastOrderId).prev('.clientOrderGridghead_0').attr('id'); 
```

我真的希望这一次对你有用。

# android - 如何在 Android 上打包自定义列表？

> ID：13035618
> 
> 赞同：0
> 
> 时间：2012-10-23T17:01:26.263
> 
> 标签：android, serialization

首先，我将引用的所有代码都在[我的存储库中](https://github.com/Drknzz/MachinaEx)

我在打包 PlayList 时遇到问题[，](https://github.com/Drknzz/MachinaEX/blob/master/MachinaEx/src/com/machinarius/music/data/PlayList.java)打包效果很好，但反序列化最终会出现 NullPointerException 或 BadParcelableException。我无法查明异常的来源，因此我要求您检查我的代码，看看我是否滥用任何 OOP 原则或完全滥用 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:50:13.770

您不能将所有类作为参数传递给`parcel.write()`. 您只需要传递`copy`构造函数中接收到的参数。您还需要确保所有操作的对象都是或实现“Parcelable”。

我相信您需要更改以下内容：

**在构造函数中**

```
ArrayList<Song> copy;

public PlayList(ArrayList<Song> copy){
  super(copy);  
  this.copy = copy;
} 
```

**在写（）**

```
public void writeToParcel(Parcel parcel, int flags) {
    parcel.writeTypedList(copy);
    parcel.writeInt(actualSong);
    parcel.writeInt(shuffling ? 1 : 0);
    parcel.writeInt(repeating ? 1 : 0);
} 
```

**在读取（）**

```
public PlayList(Parcel serialized) {
    super(serialized.readTypedList(copy, Song.WptType.CREATOR));
    actualSong = serialized.readInt();
    shuffling = serialized.readInt() == 1 ? true : false;
    repeating = serialized.readInt() == 1 ? true : false;
} 
```

**笔记**

您还需要`Parcelable`在`Song`类中实现它才能工作，但它看起来已经在代码存储库中完成。

# php - SQL 语法错误第 1 行 AJAX PHP & SQL

> ID：13035622
> 
> 赞同：0
> 
> 时间：2012-10-23T17:01:38.473
> 
> 标签：php, sql, ajax

根据我收到的错误消息，我的 SQL 语法有问题，但无法弄清楚。我正在尝试创建一个系统，我可以在其中使用 AJAX、PHP 和 SQL 搜索项目名称以查找匹配项。与搜索词的每个匹配项都以超链接的形式显示在屏幕上，单击该超链接后，我打算将我带到另一个页面，然后该页面将显示与搜索词相关的任何内容。

我已将其设置为搜索数据库并显示超链接，但是当我单击超链接以加载相关匹配项时，我收到错误消息“您的 SQL 语法有错误；请查看与您的 MySQL 相对应的手册服务器版本，以便在第 1 行的 'Home From Home''' 附近使用正确的语法

现在在代码中，您不会在任何地方找到 Home From Home 引用，因为那是“search_value”选择的搜索词。我认为我的问题与我的查询有关，但我不是 100% 确定。我将发布下面所有 3 个页面的代码，以便您查看所有页面如何链接在一起等。

我哪里错了？

CPanel.php

```
<html>
    <head>
    <script>
        function showHint(str) {
            if (str.length==0) { 
                document.getElementById("results_box").innerHTML="Matching Project Names: <hr/>";
                return;
            }

            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            } else {
                // code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                     document.getElementById("results_box").innerHTML=xmlhttp.responseText;
                 }
            }

            xmlhttp.open("GET","CPanel_Inc.php?search_value="+str,true);
            xmlhttp.send();
        }
    </script>
    </head>

    <body>
        <p><b>Project Search:</b></p>
         <form> 
            Project Name: <input type="text" onKeyUp="showHint(this.value)" size="20" />
         </form>
         <div id="results_box">
            Matching Project Names: <hr/>
         </div> 
    </body>
</html> 
```

CPanel_Inc.php

```
<?php
    $connect = mysqli_connect("localhost", "root", "", "creative wolf");
    if (mysqli_connect_errno()) {
        printf("Connect Failed", mysqli_connect_error());
        exit();
    } else { 

        // Get the search_value parameter from URL
        $search_value = $_GET["search_value"];
        $content = "";

        // Search database for comparable values provided that search_value has some value
        if (strlen($search_value) > 0) {        

            // Sets up query return results
            $qry = "SELECT ProjectName FROM projects WHERE ProjectName LIKE '".mysql_real_escape_string($search_value)."%'";
            $res = mysqli_query($connect, $qry) or die(mysqli_error($connect));

            if (mysqli_num_rows($res) < 1){
                printf("Matching Project Names: <hr/> Could not retrieve records matching your search critera", mysqli_error($connect));
            } else {    
                $content .= "Matching Project Names: <hr/>";    
                while ($data = mysqli_fetch_array($res)) {
                    $content .= "<li><a href=\"search.php?search_value='". $data['ProjectName']."'\"> " . $data['ProjectName']. "</a></li>";
                }   
                echo "$content";
            }   
        }

        mysqli_free_result($res);
        mysqli_close($connect);
    }
?> 
```

搜索.php

```
<?php
    $connect = mysqli_connect("localhost", "root", "", "creative wolf");
    if (mysqli_connect_errno()) {
        printf("Connect Failed", mysqli_connect_error());
        exit();
    } else { 

        // Get the search_value parameter from URL
        $content = "";

        // Set up query
        $get_data_qry = "SELECT * FROM content WHERE ProjectName = '".$_GET["search_value"]."'";
        $get_data_res = mysqli_query($connect, $get_data_qry) or die(mysqli_error($connect));

        while ($clientData = mysqli_fetch_array($get_data_res)) {
            $content .= $clientdata['ProjectName'];
            $content .= $clientdata['RequestedBy'];
            $content .= $clientdata['FileLocation'];
            $content .= $clientdata['Description'];
            $content .= "<br />";
        }

        mysqli_free_result($res);
        mysqli_close($connect);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:08:51.227

你应该打印什么`$get_data_qry`。

如果你`.$_GET["search_value"].`有一个单引号，你的查询将如下所示：

```
SELECT * FROM content WHERE ProjectName = 'anything with a ' should be escaped '; 
```

这将导致语法错误。

所以你必须像在 CPanel_Inc.Php 中那样做

```
"SELECT * FROM content WHERE ProjectName = '".mysql_real_escape_string($_GET["search_value"])."'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:14:23.513

如果是在您单击以下生成的链接之后：

```
$content .= "<li><a href=\"search.php?search_value='". $data['ProjectName']."'\"> " . $data['ProjectName']. "</a></li>"; 
```

我可以看到一个问题。您正在向 GET 参数添加单引号，`search_value`然后将其传递到查询中：

```
"SELECT * FROM content WHERE ProjectName = '".$_GET["search_value"]."'" 
```

最终结果是：

```
SELECT * FROM content WHERE ProjectName = ''GET Value'' 
```

那些额外的单引号可能是错误的。

当您遇到这样的查询问题时，回显最终查询字符串通常有利于调试目的。

对于执行 AJAX 请求，我建议不要手动处理它（您似乎正在这样做），而是使用 jQuery 之类的东西。并且永远不会将用户输入连接到 SQL 语句中。曾经。[这为简单的SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)方法打开了大门，这些方法使您的数据库处于开放状态，容易被渗透或损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T13:32:55.357

我知道这是一个旧线程，但我想在 PHP 中的准备好的语句上添加我的 2cents。请参阅此处[http://software-security.sans.org/developer-how-to/fix-sql-injection-in-php-using-prepared-statements](http://software-security.sans.org/developer-how-to/fix-sql-injection-in-php-using-prepared-statements)以及[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php) 关于准备好的语句的 PHP 手册：http: [//php.net/manual/en/mysqli-stmt.prepare.php](http://php.net/manual/en/mysqli-stmt.prepare.php)

使用准备好的语句作为 pdo/mysql 数据库操作的默认值将使您的查询更加结构化和安全。

还可以尝试将您的数据库配置（用户、密码、主机）单独存储在一个不可公开访问的文件中（请参阅[如何在 PHP 中保护数据库密码？](https://stackoverflow.com/questions/97984/how-to-secure-database-passwords-in-php)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:08:40.160

在 search.php 文件中试试这个：

```
"SELECT * FROM content WHERE ProjectName = '".mysql_real_escape_string($_GET["search_value"])."'" 
```

还要检查以确保您没有将任何额外的引号或双引号附加到 $_GET["search_value"]。通过 mysql 错误消息，似乎可能有一些额外的引号：

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在第 1 行的 'Home From Home ** ' ' ** ' 附近使用的正确语法”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T17:55:42.663

阅读了所有留下的评论和提供的帮助后，我找到了解决方案:)。

正如你们中的一些人所说，这确实是我的报价的问题。正如 Digitlworld 建议的那样，我回显了查询的输出，发现传递给获取值的值是问题所在。

弄清楚这一点后，我已经更正了 CPanel_Inc.php 中的违规代码行，如下所示

`$content .= "<li><a href=\"search.php?search_value=". $data['ProjectName']."\"> " . $data['ProjectName']. "</a></li>";`

我还接受了人们对 SQL 注入的看法，并将我的查询调整为如下所示

```
$get_data_qry = "SELECT * FROM content WHERE ProjectName = '".mysql_real_escape_string($_GET["search_value"])."'"; 
```

有没有什么好的，但简单的教程或指南可以帮助我对抗 SQL 注入，我对这种项目相当陌生，所以任何帮助只会帮助提高我的能力。

非常感谢大家的帮助，你们所有的投入的结合帮助我找到了解决方案。

# c - 如何从c中的字符串中删除第一个单词

> ID：13035624
> 
> 赞同：2
> 
> 时间：2012-10-23T17:01:39.800
> 
> 标签：c

我有一串整数值。例如 20 200 2000 21 1

我想删除第一个单词（在本例中为 20）。知道怎么做吗？

我考虑过使用类似...

```
sscanf(str, "/*somehow put first word here*/ %s", str); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:04:53.233

怎么样

```
char *newStr = str;
while (*newStr != 0 && *(newStr++) != ' ') {} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:10:32.153

您可以只使用[`strchr()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strchr.html)，这将设置`str`为第一个空格之后的子字符串，或者如果没有空格则不理会它；

```
char *tmp = strchr(str, ' ');
if(tmp != NULL)
    str = tmp + 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:07:55.313

您可以将所有字符跳过到第一个空格，然后跳过空格本身，如下所示：

```
char *orig = "20 200 2000 21 1";
char *res;
// Skip to first space
for (res = orig ; *res && *res != ' ' ; res++)
    ;
// If we found a space, skip it too:
if (*res) res++; 
```

此代码片段打印`200 2000 21 1`（[链接到 ideone](http://ideone.com/2HCEGm)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:18:35.523

我发现最简单、最优雅的方法就是做这样的事情

```
 int garbageInt;
   sscanf(str, "%d %[^\n]\n",&garbageInt,str); 
```

# javascript - 使用 JSON-P 检索数据

> ID：13035626
> 
> 赞同：0
> 
> 时间：2012-10-23T17:01:44.990
> 
> 标签：javascript, jsonp

我是 javascript 的新手。我正在尝试使用以下代码来检索跨站点数据。

我怎样才能做这个代码工作，例如我希望每个家庭成员都被提醒到屏幕上。

感谢您的帮助。

代码修改成这样，alert说[object Object]，你知道这是什么意思吗？？：

```
<html>
<head>
<script type="text/javascript" 

src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

      // LOOP THROUGH EACH FAMILY MEMBER AND DO STUFF!
      alert(mValue)
    });
}
});
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:08:09.590

你不想`oData`用 jQuery 在你的 $.each 中包装

所以，而不是

```
$.each($(oData['ops:patent-family']['ops:family-member']), 
```

你要：

```
$.each(oData['ops:patent-family']['ops:family-member'], 
```

此外 - 您必须使用返回的 json 降低一个级别（有第一个 'ops:world-patent-data' 级别），它看起来更像：

```
if(oData['ops:world-patent-data'] && 
  oData['ops:world-patent-data']['ops:patent-family'] && 
  oData['ops:world-patent-data']['ops:patent-family']['ops:family-member']){

  $.each(oData['ops:world-patent-data']['ops:patent-family']['ops:family-member'],
    function(iIndex, mValue) {
      // LOOP THROUGH EACH FAMILY MEMBER AND DO STUFF!
      console.log(iIndex, mValue)
    });

} 
```

* * *

另一种完全不同的方法是使用 jquery deferreds 语法并使用 .pipe 来转换数据 - 可能比`if`

```
var sUrl =  "http://ops.epo.org/2.6.2/rest-services/family/publication/docdb/EP.1000000.A1/.js?callback=?";    

$.getJSON(sUrl)
.pipe(function(data){
    try{
        return data['ops:world-patent-data']['ops:patent-family']['ops:family-member'];
    } catch(e){
        return [];
    }
})
.then(function(members){
    $.each(members, function(iIndex, mValue){ 
        console.log(iIndex, mValue)
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:08:40.693

您需要创建内联脚本：

```
 function myCallback(response) {
        // Your stuff goes here.
    }
    var script = document.createElement("script");
    script.src = "http://ops.epo.org/2.6.2/rest-services/family/publication/docdb/EP.1000000.A1/.js?callback=myCallback";
    script.type = "text/javascript";
    document.getElementsByTagName("head")[0].appendChild(script); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:14:33.643

jQuery 的 $.ajax 方法允许您为请求指定数据类型。如果您指定 JSONP，它将为您创建回调，因此您不必担心。

它是这样的：

```
$.ajax(url, {
    dataType: 'jsonp',
    success: function(data) {
        // do stuff with data here
    }
});​ 
```

这是一个 JSFiddle 演示了您需要的数据：http: [//jsfiddle.net/PPVX3/](http://jsfiddle.net/PPVX3/)

现在它正在将数据记录到控制台，如果您使用的是 Chrome 或 Firefox，您可以使用开发人员工具查看控制台日志。

# java - VTD-XML XPath 正在跳过前 3 条记录

> ID：13035628
> 
> 赞同：1
> 
> 时间：2012-10-23T17:02:03.357
> 
> 标签：java, xpath, vtd-xml

我正在使用 VTD-XML 将大型 xml 文件拆分为较小的 xml 文件。一切正常接受：

`autoPilot.selectXPath("//nodeName")`

由于某种原因，它跳过了前 3 个节点。

编辑：vtd-xml-author 指出`LOG.info("xpath has found "+ ap.evalXPath() +" items");`不返回计数但返回节点索引。

新的拆分 xml 文件缺少原始文件中的前三个节点。

这是基本的 XML 布局。我无法显示真正的 xml 数据，但它看起来像这样：

```
<rootNode>
          <parentNode>
                      <contentNode>..children inside...</contentNode>
                      <contentNode>..children inside...</contentNode>
                      <contentNode>..children inside...</contentNode>
                      <contentNode>..children inside...</contentNode>
          </parentNode>
</rootNode> 
```

这是我用来拆分 xml 的函数：

```
public void splitXml(String parentNode, String contentNodes)throws Exception {
    LOG.info("Splitting " + outputName + parentNode);
    VTDGen vg = new VTDGen();   

     if (vg.parseFile(xmlSource, true)){

        VTDNav vn = vg.getNav();
        AutoPilot ap = new AutoPilot(vn);
        ap.selectXPath("//"+contentNode);

        int i=-1;
        int k=0;
        byte[] ba = vn.getXML().getBytes();
        FileOutputStream fos = getNewXml(parentNode);
        while((i=ap.evalXPath())!=-1){

            if(fos.getChannel().size() > maxFileSize){
                finishXml(fos,contentNode);
                LOG.info("Finished file with " + k + "nodes");
                fos = getNewXml(contentNode);
                k=0;
            }
            k++;
            long l = vn.getElementFragment();
            fos.write(ba, (int)l, (int)(l>>32));
            fos.write("\n".getBytes());
        }
        finishXml(fos,contentNode);
        LOG.info("Finished Splitting " + outputName + " " + parentNode + " with " +k+ " nodes");
    } else {
        LOG.info("Parse Failed");
    }

} 
```

编辑：添加到 while 循环的计数器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:13:16.287

正如`vtd-xml-author`建议的那样，我在计数器中添加了 while 循环。

```
 while((i=ap.evalXPath())!=-1){
            // if filesize is at max create a new File
            if(fos.getChannel().size() > maxFileSize){
                finishXml(fos,contentNode);
                LOG.info("Finished file with " + k + "nodes");
                fos = getNewXml(contentNode);
                k=0;

            }
            k++;
            long l = vn.getElementFragment();
            fos.write(ba, (int)l, (int)(l>>32));
            fos.write("\n".getBytes());
        } 
```

我第一次运行它时，输出只丢失了 1 条记录。然后我删除了输出 xml 文件和文件夹，并重新运行了拆分器。这次它在日志中返回了正确的编号并正确拆分了文件。我多次重复该过程，同时删除创建的文件夹和文件，也没有删除文件。我每次都得到相同的正确结果。我猜 IDE 或其他东西没有正确刷新。

# c++ - 比较向量并删除所有元素已经在另一个向量中的向量

> ID：13035632
> 
> 赞同：1
> 
> 时间：2012-10-23T17:02:22.843
> 
> 标签：c++, vector, std

我使用向量的向量来存储 id 编号，我想比较所有这些并删除其中所有值已经在另一个元素中的元素。

假设我的向量中有 4 个元素，如下所示

[[1, 2, 3, 4], [1, 2, 3], [3], [1,2,3,5]]

在此示例中，应删除第二个和第三个元素。

解决这个问题的最快算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:55:57.657

这里的解决方案满足“已经在另一个元素内”的要求，而不仅仅是元素的“唯一性”。

对于 [[1, 2, 3, 4], [1, 2, 3], [3], [1,2,3,5]]，输出为 [[1, 2, 3, 4], [1 ,2,3,5]]。

对于 [[1, 2, 3, 4], [1, 2, 3], [3,4], [1,2,3,5]]，输出为 [[1, 2, 3, 4]， [1,2,3,5]]。

它的工作原理如下：

1.  生成将值映射到其容器的向量的映射
2.  对于每个向量，计算每个值的容器的交集。如果结果交集中有超过一项（即不仅是自交集），则删除此类向量。

* * *

```
#include <boost/container/vector.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/assign/list_of.hpp>
#include <boost/unordered_map.hpp>
#include <boost/foreach.hpp>

#include <iterator>
#include <iostream>
#include <ostream>
#include <cstddef>
#include <string>

using namespace boost::assign;
using namespace boost;
using namespace std;

template<typename VecVec,typename OutputIterator>
void delete_included(const VecVec &vv,OutputIterator out)
{
    typedef typename range_value<VecVec>::type vec_type;
    typedef typename const vec_type *vec_id;
    typedef typename range_value<vec_type>::type value_type;

    unordered_map<value_type,container::vector<vec_id> > value_in;
    container::vector<vec_id> all_vec_indexes;
    BOOST_FOREACH(const vec_type &vec,vv)
    {
        all_vec_indexes.push_back(&vec);
        BOOST_FOREACH(const value_type &value,vec)
        {
            value_in[value].push_back(&vec);
        }
    }
    container::vector<vec_id> included_in;
    container::vector<vec_id> intersect;
    BOOST_FOREACH(const vec_type &vec,vv)
    {
        included_in=all_vec_indexes;
        BOOST_FOREACH(const value_type &value,vec)
        {
            intersect.clear();
            set_intersection(included_in,value_in[value],back_inserter(intersect));
            swap(included_in,intersect);
            if(included_in.size()==1)
                break;
        }
        if(included_in.size()==1)
        {
            *out=vec;
            ++out;
        }
    }
}
template<typename VecVec>
void print(const VecVec &vv)
{
    typedef typename range_value<VecVec>::type vec_type;
    typedef typename range_value<vec_type>::type value_type;

    cout << string(16,'_') << endl;
    BOOST_FOREACH(const vec_type &vec,vv)
    {
        copy(vec,ostream_iterator<const value_type&>(cout," "));
        cout << endl;
    }
}

int main(int argc,char *argv[])
{
    container::vector<container::vector<int> > vv
    (list_of
        ( list_of (1)(2)(3)(4) )
        ( list_of (1)(2)(3) )
        ( list_of (3) )
        ( list_of (1)(2)(3)(5) )
    );
    print(vv);

    container::vector<container::vector<int> > result;
    delete_included(vv,back_inserter(result));
    print(result);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:46:16.847

这是一种可能的解决方案。

```
#include <vector>
#include <map>
#include <iostream>
#include <algorithm>

typedef std::vector<int> VI;
typedef std::vector<std::vector<int>> VVI;

VVI DeleteDups(VVI vvi) {
  std::map<int,int> map;

  for(auto const& vi : vvi)
    for(auto const& i : vi)
      ++map[i];

  vvi.erase(
    std::remove_if(begin(vvi), end(vvi),
      [&map](const VI& vi)->bool {
        for(int i : vi)
          if(map[i] == 1) return false;
        return true;
      }),
    end(vvi));
  return vvi;
}

void Dump(const VVI& vvi) {
  std::cout << "[";
  for(auto const& vi : vvi) {
    std::cout << "[";
    for(int i : vi)
      std::cout << i << ", ";
    std::cout << "], ";
  }
  std::cout << "]\n";
}

int main () {
  Dump(DeleteDups({ {1,2,3,4}, {1,2,3}, {3}, {1,2,3,5} }));
} 
```

# corba - 本机 Java Corba ORBD 不起作用

> ID：13035634
> 
> 赞同：1
> 
> 时间：2012-10-23T17:02:33.610
> 
> 标签：corba

我正在尝试在 Windows XP 32、JDK 1.6、Java Client VM 上启动 orbd。

我试过：启动 orbd -ORBInitialPort 1050，但 orbd 没有启动。我看到一条警告消息：BAD_PARAM 无法加载类standard_init

后跟：GRAVE (COMM_FAILURE) 无法在指定端口上创建侦听器线程：1049

我确定没有使用端口 1050 或 1049（netstat 确认），而且无论我使用哪个端口，我都会收到相同的错误。

我不知道怎么办，启动orbd看起来很简单，非初步操作，只需给出命令start orbd -ORBInitialPort 1050，但它不起作用。我忘记了任何动作吗？我需要 JavaEE 而不是 JavaSE 吗？

任何帮助将非常感激

再见威廉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:52:51.283

`orbd``1049`无论`-ORBInitialPort`选项如何，都将绑定到端口。

请检查另一个`orbd`实例或另一个进程是否已经在运行并绑定到该端口。（例如，使用`netstat`）

您必须添加`-port`更改所谓的激活端口的选项`1049`

例如`orbd -ORBInitialPort 2000 -port 1999`

`orb.properties`提示：确保您的主目录中没有忘记的文件

# jquery - 移动网站错误

> ID：13035636
> 
> 赞同：1
> 
> 时间：2012-10-23T17:02:52.587
> 
> 标签：jquery, mobile

我是新来的，我需要一些帮助。我正在开发一个移动网站，客户想要一些真正需要 jquery 的东西。我解释了一百次，但他真的想要一些我需要放置 jquery api 的东西，但问题是：

当用户通过某个点时，我需要在顶部固定显示一个框，我执行以下代码：

```
$(function() {
    var $top1= $('.containerPadrao').offset().top + 50;
    $(window).scroll(function() {   
        if ($(window).scrollTop()>$top1) {
            $('.promocaoFixa').fadeIn("fast");
        } else {
            $('.promocaoFixa').fadeOut("fast");
         }
    });
}); 
```

问题是，在触摸手机中，只有当您伸出手指时才会滚动计数，但是如果您在需要返回页面时通过这一点，则只有在您伸出手指或到达顶部时内容才会淡出的页面，制作错误的东西！

# android - 视频录制的意图给出了错误

> ID：13035638
> 
> 赞同：1
> 
> 时间：2012-10-23T17:02:52.980
> 
> 标签：android, camera

我想从我的 Android 应用程序录制视频。像这样

```
File f = new File(Environment.getExternalStorageDirectory() + "/"
            + app.getBaseName());
    if (!f.exists()) {
        f.mkdir();
    }

    filename = "Video" + lastfile() + ".mp4";

    File f1 = new File(Environment.getExternalStorageDirectory() + "/"
            + app.getBaseName(), filename);

    Uri uri = Uri.fromFile(f1);

    Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);
    intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);
    startActivityForResult(intent, 222); 
```

并在结果活动中

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == 222) {
        Log.v("log_tag", "Return to back 222" + resultCode);
        if (resultCode == RESULT_OK) {
            Log.v("log_tag", "Return to back");

        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }

        Log.v("log_tag", "Return to back fury");
    }

    finish();
    super.onActivityResult(requestCode, resultCode, data);
} 
```

使用它，相机正在启动，然后我单击中间按钮开始录制，而不是单击左侧按钮停止并保存并且应用程序崩溃。

我在 onActivityResult 中打印了 resultCode 的值，它给了我 0。并且视频以给定的名称正确保存在给定的路径上。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:28:35.883

如果我没有错，resultCode 0 对应于 RESULT_CANCEL 但为什么你有一个“finish();” 在 onActivityResult 的末尾？你应该删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:21:55.940

我找不到合适的解决方案，但我使用这个流程解决了我的问题。让我们默认将视频文件保存在任何地方并在您想要的地方制作另一个副本，您也可以在复制后删除原始文件。

像这样

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
 if (requestCode == 222) {
  if (resultCode == RESULT_OK){   
   try {
     AssetFileDescriptor videoAsset = getContentResolver().openAssetFileDescriptor(data.getData(), "r");
     FileInputStream fis = videoAsset.createInputStream();
     File f1 = new File(Environment.getExternalStorageDirectory() + "/" + app.getBaseName(), filename);
     FileOutputStream fos = new FileOutputStream(f1);

     byte[] buffer = new byte[1024];
     int length;
     while ((length = fis.read(buffer)) > 0) {
           fos.write(buffer, 0, length);
     }       
     fis.close();
     fos.close();
   } catch (IOException e) {
      // TODO: handle error
   }
  }
 }
super.onActivityResult(requestCode, resultCode, intent);
} 
```

# android - Android 无法在 OS X 10.7 上构建

> ID：13035640
> 
> 赞同：2
> 
> 时间：2012-10-23T17:03:06.283
> 
> 标签：android, macos, javac, xcode4.5, android-source

我正在尝试使用 GNU gcc 4.7 构建 android 源主分支。一切正常，直到我更新到 Xcode 4.5。这似乎是一个与java相关或与权限相关的问题。我仔细检查了所有目录都是可写的并且`javac`（1.6.0_37）工作正常。

这是我的配置信息

```
PLATFORM_VERSION_CODENAME=AOSP
PLATFORM_VERSION=4.1.2.3.4.5.6.7.8.9
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
HOST_ARCH=x86
HOST_OS=darwin
HOST_OS_EXTRA=Darwin-12.2.0-x86_64-i386-64bit
HOST_BUILD_TYPE=release
BUILD_ID=OPENMASTER
OUT_DIR=out 
```

但我得到这个错误

```
Install: out/host/darwin-x86/bin/acp
host Java: antlr-runtime (out/host/common/obj/JAVA_LIBRARIES/antlr-runtime_intermediates/classes)
target Java: core (out/target/common/obj/JAVA_LIBRARIES/core_intermediates/classes)
host Java: dx (out/host/common/obj/JAVA_LIBRARIES/dx_intermediates/classes)
external/jsr305/ri/src/main/java/javax/annotation/CheckForNull.java:14: error while writing javax.annotation.CheckForNull: could not create parent directories
public @interface CheckForNull {
        ^
1 error
make: *** [out/host/common/obj/JAVA_LIBRARIES/jsr305lib_intermediates/javalib.jar] Error 41
make: *** Waiting for unfinished jobs....
external/antlr/antlr-3.4/runtime/Java/src/main/java/org/antlr/runtime/ANTLRStringStream.java:37: error while writing org.antlr.runtime.ANTLRStringStream: could not create parent directories
public class ANTLRStringStream implements CharStream {
       ^
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error
make: *** [out/host/common/obj/JAVA_LIBRARIES/antlr-runtime_intermediates/javalib.jar] Error 41
dalvik/dx/src/com/android/dx/Version.java:22: error while writing com.android.dx.Version: could not create parent directories
public class Version {
       ^
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error
make: *** [out/host/common/obj/JAVA_LIBRARIES/dx_intermediates/javalib.jar] Error 41
libcore/luni/src/main/java/java/lang/Object.java:131: error while writing java.lang.Object: could not create parent directories
public class Object {
       ^
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error
make: *** [out/target/common/obj/JAVA_LIBRARIES/core_intermediates/classes-full-debug.jar] Error 41 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T16:20:25.580

我遇到了一个非常接近这个问题的问题。

> 所以目标包：ApplicationsProvider（out/target/product/generic/obj/APPS/ApplicationsProvider_intermediates/package.apk）目标包：BackupRestoreConfirmation（out/target/product/generic/obj/APPS/BackupRestoreConfirmation_intermediates/package.apk）目标包： BasicDreams（out/target/product/generic/obj/APPS/BasicDreams_intermediates/package.apk）框架/opt/telephony/src/java/com/android/internal/telephony/PhoneFactory.java:130：找不到符号符号：变量PREFERRED_CDMA_SUBSCRIPTION 位置：类 android.provider.Settings.Global Settings.Global.PREFERRED_CDMA_SUBSCRIPTION, ^ 注意：某些输入文件使用或覆盖已弃用的 API。注意：使用 -Xlint:deprecation 重新编译以获取详细信息。笔记：一些输入文件使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。1个错误：*** [out/target/common/obj/JAVA_LIBRARIES/telephony-common_intermediates/classes-full-debug.jar] 错误 41 make: ***等待未完成的工作......

问题原来是我一开始没有正确遵循指示。根据 android 设置说明，它位于区分大小写的文件系统上，但我已将其从普通文件系统复制过来。在我重新运行 repo sync 后，它已编译。

如果这听起来像您的问题，请遵循[http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)：

> hdiutil create -t​​ype SPARSE -fs 'Case-sensitive Journaled HFS+' -size 40g ~/android.dmg
> 
> hdiutil attach ~/android.dmg.sparseimage -mountpoint /Volumes/android
> 
> mv ~/android-source /Volumes/android
> 
> cd /Volumes/android/android-source
> 
> 回购同步
> 
> 使-j4

# php - 我在一台主机上收到错误，而不是在其他主机上

> ID：13035650
> 
> 赞同：0
> 
> 时间：2012-10-23T17:04:00.910
> 
> 标签：php, xml

可悲的是，一个插件给我带来了问题。它在一个网站上运行良好，但在另一个网站上给我一个错误。这是错误：
simplexml_load_file() [function.simplexml-load-file]： [http](http://steamcommunity.com/profiles/76561197971691194/?xml=1:1) ://steamcommunity.com/profiles/76561197971691194/?xml=1:1 ：解析器错误：文档为空

Steam/ControllerPublic/Register.php 中的 XenForo_Application::handlePhpError() 第 117 行

如果我去那里，这是代码：

```
// Get User Profile Data
$id = $session->get('steam_id');
$xml = simplexml_load_file("http://steamcommunity.com/profiles/{id}/?xml=1");
if(!empty($xml)) {
$username = $xml->steamID;
$avatar = $xml->avatarFull; 
```

该链接是有效的，你可以自己试试，让我们说去这里：steamcommunity.com/profiles/76561197971691194 或[http://steamcommunity.com/profiles/76561198041253738](http://steamcommunity.com/profiles/76561198041253738)

真的需要帮助，这是阻止我启动网站的唯一原因！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:05:46.337

这可能意味着您的主机正在阻止出站 HTTP 请求。
要求他们停止这种情况，或者找一个更好的主人。

# sql - 使用新值更新临时表中的列

> ID：13035651
> 
> 赞同：3
> 
> 时间：2012-10-23T17:04:02.260
> 
> 标签：sql, database, insert

我有以下临时表结构：

```
CREATE TABLE #TempTable  (  
    ID INT,  
    CId TINYINT,  
    TagId INT,  
    Beginning_X DECIMAL(18,5),  
    Beginning_Y DECIMAL(18,5),  
    Ending_X DECIMAL(18,5),  
    Ending_Y DECIMAL(18,5))  

INSERT INTO #TempTable (ID, CId, TagId, Beginning_X, Beginning_Y)  
SELECT ID, CId,TagId, X, Y  
  FROM Table_1  
 WHERE IsRepeat = 1  

INSERT INTO #TempTable(Ending_X, Ending_Y)   
SELECT X,Y  
  FROM Table_1 t  
 WHERE t.ID IN (SELECT ID+1
                  FROM Table_1
                 where IsRepeat = 1)) 
```

第二个插入删除了第一个插入语句中的所有值，我不知道为什么。我想将第二个插入的结果附加到第一个插入并有一个实心表。

编辑：我想我找到了解决方案：

```
UPDATE t  
SET t.Ending_X = p.X, t.Ending_Y = p.Y  
FROM  #TempTable t, Table_1 p  
WHERE p.ID IN (SELECT ID+1 FROM Table_1 where IsRepeat = 1)  
AND p.ID-1 = t.ID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:11:18.753

我想你需要这个

```
UPDATE t
SET Ending_X = X, Ending_Y = Y
FROM  #TempTable t
WHERE t.ID IN (SELECT ID+1 FROM Table_1 where IsRepeat = 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:09:42.403

联合两个查询怎么样

```
INSERT INTO #TempTable (ID, CId, TagId, Beginning_X, Beginning_Y)
SELECT ID, CId,TagId, X, Y
from Table_1
WHERE IsRepeat = 1 
  UNION
SELECT Convert(Null, int) AS ID, Convert(Null, tinyint) AS CId, 
  Convert(Null, int) AS TagId, X,Y
FROM Table_1 t
WHERE t.ID IN (SELECT ID+1 FROM Table_1 where IsRepeat = 1)) 
```

# haskell - 功能性香蕉旅行者 - 将 Behavior t GameState 放在一起

> ID：13035655
> 
> 赞同：2
> 
> 时间：2012-10-23T17:04:12.717
> 
> 标签：haskell, frp, reactive-banana

问题是我不知道如何创建类型的行为`Behavior t GameState`

我有更多的代码，但我只是想展示我认为有必要谈论这个问题的内容。让我知道是否有空白要填写。这就是我所拥有的：

```
data GameState = GameState {agent    :: Agent
                           ,universe :: Universe
                           }

type Universe = Gr Planet ()

data Command = Move PlanetName
             | Look
             | Quit
                 deriving Show

data PlayerCommand = PlayerCommand Command PID
                   | Null
                       deriving Show

updateGS :: PlayerCommand -> GameState -> GameState
updateGS (PlayerCommand (Move planet) pid) gs =
   let agent = getAgent pid gs
       nodes = labNodes $ universe gs
       current = location agent
       Just fromP = lookup (fromEnum current) nodes
       Just toP   = lookup (fromEnum planet) nodes
       fromNode = fromEnum current
       toNode = fromEnum planet
       uPlayer = Player pid (getPlanetName toP) (Location planet)
       mData = MoveData uPlayer (toNode,toP) (fromNode,fromP) nodes
       uPlanets = updateLNodeList mData
   in GameState uPlayer (mkGraph uPlanets $ labUEdges gates

initialGS :: GameState
initialGS = GameState initPlayer (makeUniverse makePlanetNodes) 
```

和活动网络

```
makeNetworkDescription :: AddHandler PlayerCommand -> IO EventNetwork
makeNetworkDescription addCommandEvent = compile $ do
   eInput <- fromAddHandler addCommandEvent
   let bCommand = stepper Null eInput
   eCommandChanged <- changes bCommand
   let bGameState :: Behavior t GameState
       bGameState = stepper initialGS 
   reactimate $ (\n -> appendFile "output.txt" ("Command is " ++ show n)) <$> eCommandChanged 
```

我相信 bGameState 需要使用 eCommandChange，但我遇到了类型问题

```
stepper :: a -> Event t a -> Behavior t a 
```

这让我相信我需要转换`eInput :: Event t PlayerCommand`成 a `eGameState :: Event t GameState`，我可以用它`stepper`来制作`Behavior t GameState`

所以，我的问题是，我的思路正确吗？如果没有，我可以重新定向吗？如果是这样，`eGameState :: Event t GameState`会是什么样子？

针对下面的回复。当我`accumB`最初考虑时，我看到了一个类型错误。当我尝试你的建议时发生了什么。

```
let bGameState :: Behavior t GameState
    bGameState = accumB initialGS $ updateGS <$ eInput 
```

产生错误

```
 Couldn't match expected type `GameState'
             with actual type `PlayerCommand'
 Expected type: GameState -> GameState
   Actual type: PlayerCommand -> GameState -> GameState
 In the first argument of `(<$)', namely `updateGS'
 In the second argument of `($)', namely `updateGS <$ eInput' 
```

不知道该怎么做。我会看看你的例子，看看答案是否清楚。感谢您指出`accumB`是正确的方法，因为我专注于`stepper`

我越研究建议的代码，我就越对类型错误感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:54:05.730

实际上，您需要创建一个事件来记住 a`GameState`并将`updateGS`函数应用于它以创建一个新事件。这就是函数`accumE`及其表亲的目的`accumB`。特别是，你可以写

```
bGameState = accumB initialGS $ updateGS <$> eInput 
```

要了解有关此模式的更多信息，请查看[示例页面](http://www.haskell.org/haskellwiki/Reactive-banana/Examples)上的示例，特别是 Counter.hs 和 TwoCounters.hs 示例。

* * *

值得一提的另一点是我建议避免使用该`changes`功能，除非您正在处理低级框​​架的东西。如文档中所述，它有几个限制；最讨厌的限制是在执行之前该值不可用`reactimate`。这样你就可以很容易地创建一个无限循环，它的目的真的很窄。

在您的情况下，`bCommand`无论如何，似乎都是多余的，您有`eCommandChanged = eInput`.

士气：将事件转化为行为很容易，但没有回头路。

# c++ - 动态矩阵和 C++：分段错误

> ID：13035657
> 
> 赞同：0
> 
> 时间：2012-10-23T17:04:13.810
> 
> 标签：c++, dynamic, vector, matrix, segmentation-fault

> **可能重复：**
> [在 C++ 中使用向量的矩阵算术导致分段错误](https://stackoverflow.com/questions/6347375/matrix-arithmetic-using-vectors-in-c-causing-segmentation-faults)

我在 C++ 中创建了这个简单的代码来为动态矩阵分配一些值：

```
unsigned N = 1000;
vector<vector<double> > Matrix;

for (unsigned i=0; i<(N-1); ++i) {
    for (unsigned j=0; j<(N-1); ++j) {

        if ((i>(N/4-1) && i<(3*N/4-1)) || (j>(N/4-1) && j<(3*N/4-1)))
            Matrix[i][j] = 1;

        else if (i==0 || i==(N-1) || j==0 || j==(N-1))
            Matrix[i][j] = 0;
}
} 
```

编译器没有返回任何问题，但是当我尝试运行程序时，它返回：Segmentation Fault。我的错误在哪里？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:07:42.437

您只是在创建两个空向量，并使用`operator[]`is undefined 行为。它们就像大小为 0 的数组，如果这样的话是可能的。

您必须创建具有容量的向量，并且每个元素将默认初始化为 0：

```
vector<vector<double>> Matrix(N, vector<double>(N)); 
```

第一个参数是外部的大小，`vector`第二个是要复制到每个元素中的值，它本身就是一个`N`双精度向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:07:47.607

如果您列出的代码是导致问题的确切代码，那么您的问题是您实际上没有给“矩阵”一个大小。

```
vector<vector<double> > Matrix ( N, vector<double>(N) ); 
```

会这样做。

将来要调试段错误，您可以先在不进行优化和调试符号的情况下进行编译，然后在调试器（例如 gdb）中运行并在出现错误后回溯。在寻求帮助时，回溯也很有用。

# ios - 基于页面的 App，UINavigation 控制器，类似于 iOS 日历

> ID：13035663
> 
> 赞同：0
> 
> 时间：2012-10-23T17:04:48.423
> 
> 标签：ios, ios5, xcode4, uinavigationcontroller, uipageviewcontroller

我想为基于页面的应用程序（Xcode 4.4.1，iOS 5）使用 Apple 模板，然后能够从页面视图中“推送”页面......

1.  创建基于页面的应用程序
2.  将按钮添加到数据视图 -> 视图 -> 视图（嵌套视图）
3.  向新的控制器/视图添加“推送”segue
4.  期望按下按钮时，它将“推送”到新视图。

但它没有，我不知道如何实现它。我假设我在某个地方需要一个 UINavigationController，但我不确定在哪里以及如何插入它。

注意：我可以使用模态转场来完成预期的工作，但不能使用推送转场。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:05:32.987

我找到了答案，这是两个明显的选择之一。我在 RootViewController 前面添加了一个导航控制器。

我想我最初错过了它，因为 Xcode 不断崩溃，所以我认为它不会工作。

# php - 正则表达式：修改 img src 标签

> ID：13035668
> 
> 赞同：0
> 
> 时间：2012-10-23T17:05:07.397
> 
> 标签：php, html, regex, image

我尝试用内联图像（数据：图像）替换 html 文档中的所有图像。我有一个不起作用的示例代码：

```
function data_uri($filename) {
$mime = mime_content_type($filename);
$data = base64_encode(file_get_contents($filename));
return "data:$mime;base64,$data";
}

function img_handler($matches) { 
$image_element = $matches[1];    
$pattern = '/(src=["\'])([^"\']+)(["\'])/'; 
$image_element = preg_replace($pattern, create_function( 
$matches, 
$matches[1] . data_uri($matches[2]) . $matches[3]), 
$image_element);     
return $image_element;
}

$content = (many) different img tags
$search = '(<img\s+[^>]+>)';
$content = preg_replace_callback($search, 'img_handler', $content); 
```

有人可以检查此代码吗？谢谢！

**更新：** （...）警告file_get_contents（）[function.file-get-contents]：文件名不能为空（...）

这意味着 src url 不在处理程序中:(

**更新 2**

```
<?php
function data_uri($filename) {
    $mime = mime_content_type($filename);
    $data = base64_encode(file_get_contents($filename));

    return "data:$mime;base64,$data";
}

function img_handler($matches) { 
$image_element = $matches[0];
$pattern = '/(src=["\'])([^"\']+)(["\'])/'; 
$image_element = preg_replace_callback($pattern, create_function( 
$matchess,
$matchess[1] . data_uri($matchess[2]) . $matchess[3]), 
$image_element); 
return $image_element;
}

$content = '<a href="http://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Googlelogoi.png/180px-Googlelogoi.png"><img class="alignnone" src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Googlelogoi.png/180px-Googlelogoi.png" alt="google" width="580" height="326" title="google" /></a>';
$search = '(<img\s+[^>]+>)';
$content = preg_replace_callback($search, 'img_handler', $content);

echo $content;
?> 
```

我已经上传了这个测试文件-> [http://goo.gl/vWl9B](http://goo.gl/vWl9B)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:40:34.270

你的正则表达式没问题。你用[`create_function()`](http://php.net/create_function)错了。随后内部[`preg_replace_callback()`](http://php.net/preg_replace_callback)不起作用。调用`data_uri()`发生在任何正则表达式替换发生之前，因此出现未定义的文件名错误。

使用适当的回调函数：

```
$image_element = preg_replace_callback($pattern, "data_uri_callback", $image_element); 
```

然后将您的代码移到那里：

```
function data_uri_callback($matchess) {
    return  $matchess[1] . data_uri($matchess[2]) . $matchess[3];
} 
```

# excel - 在同一列中具有两个或多个条件的条件格式

> ID：13035671
> 
> 赞同：0
> 
> 时间：2012-10-23T17:05:19.003
> 
> 标签：excel, excel-formula, excel-2007, conditional-formatting

我想根据一列中的多个值突出显示表中的多行。例如，如果该列是颜色列表，我想在 D 列中突出显示所有颜色为蓝色、绿色或红色的行。我尝试使用以下规则进行条件格式设置：

```
=IF(OR($D1=”Blue”,$D1="Green",$D1="Red")) 
```

但它不起作用。

我做错了什么，或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:23:50.500

对的，这是可能的。首先，您不需要`IF`，条件格式由对规则的 TRUE 响应“触发”（尽管它没有害处！`*`）但是我认为您的公式应该可以工作，只要它应用于正确的范围（去管理规则并检查**适用于**设置的内容）以及您想要的所有“蓝色”、“绿色”和“红色”的格式相同。

如果您想要蓝色突出显示蓝色，绿色突出显示绿色等（或类似），最简单的方法可能是使用图标集或三个单独的规则（=D1="Blue"、=D1="Green" 等）以任何顺序应用。

`*`使用正确的语法提供 - 比如说：

```
=IF(OR($D1="Blue",$D1="Green",$D1="Red"),TRUE,) 
```

（注意也没有智能引号）。

```
=OR($D1="Blue",$D1="Green",$D1="Red") 
```

但是应该足够了。

# c++ - 如何逐行读取文件或一次读取整个文本文件？

> ID：13035674
> 
> 赞同：97
> 
> 时间：2012-10-23T17:05:32.077
> 
> 标签：c++, iostream, fstream, file-handling

我在一个介绍文件的教程中（如何从文件中读取和写入文件）

首先，这不是作业，这只是我正在寻求的一般帮助。

我知道如何一次阅读一个单词，但我不知道如何一次阅读一行，或者如何阅读整个文本文件。

如果我的文件包含 1000 个单词怎么办？逐字阅读整个文件是不切实际的。

我的名为“Read”的文本文件包含以下内容：

```
I love to play games
I love reading
I have 2 books 
```

这是我到目前为止所取得的成就：

```
#include <iostream>
#include <fstream>

using namespace std;
int main (){

  ifstream inFile;
  inFile.open("Read.txt");

  inFile >> 
```

有没有办法一次读取整个文件，而不是分别读取每一行或每个单词？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-10-23T17:09:51.990

您可以使用`std::getline`：

```
#include <fstream>
#include <string>

int main() 
{ 
    std::ifstream file("Read.txt");
    std::string str; 
    while (std::getline(file, str))
    {
        // Process str
    }
} 
```

另请注意，最好只在其构造函数中使用文件名构造文件流，而不是显式打开（关闭也是如此，让析构函数完成工作）。

更多文档`std::string::getline()`可以在[CPP Reference](http://en.cppreference.com/w/cpp/string/basic_string/getline)阅读。

读取整个文本文件的最简单方法可能就是连接那些检索到的行。

```
std::ifstream file("Read.txt");
std::string str;
std::string file_contents;
while (std::getline(file, str))
{
  file_contents += str;
  file_contents.push_back('\n');
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-29T01:04:06.483

我知道这是一个非常古老的线程，但我还想指出另一种实际上非常简单的方法......这是一些示例代码：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main() {

    ifstream file("filename.txt");
    string content;

    while(file >> content) {
        cout << content << ' ';
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-30T19:31:47.027

好吧，要做到这一点，也可以使用 C++ 中提供的 freopen 函数 - [http://www.cplusplus.com/reference/cstdio/freopen/](http://www.cplusplus.com/reference/cstdio/freopen/)并逐行读取文件如下 - ：

```
#include<cstdio>
#include<iostream>

using namespace std;

int main(){
   freopen("path to file", "rb", stdin);
   string line;
   while(getline(cin, line))
       cout << line << endl;
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-23T17:37:54.200

我认为您可以使用 istream .read() 函数。您可以以合理的块大小循环并直接读取内存缓冲区，然后将其附加到某种任意内存容器（例如 std::vector）。我可以写一个例子，但我怀疑你想要一个完整的解决方案；如果您需要任何其他信息，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T17:40:37.470

另一种尚未提及的方法是`std::vector`.

```
std::vector<std::string> line;

while(file >> mystr)
{
   line.push_back(mystr);
} 
```

然后你可以简单地遍历向量并修改/提取你需要的/

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-18T08:25:20.647

上面的解决方案都很棒，但是“一次读取文件”还有一个更好的解决方案：

```
fstream f(filename);
stringstream iss;
iss << f.rdbuf();
string entireFile = iss.str(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-18T08:57:56.883

下面的代码片段将帮助您读取由 unicode 字符组成的文件

```
CString plainText="";
errno_t errCode = _tfopen_s(&fStream, FileLoc, _T("r, ccs=UNICODE"));
    if (0 == errCode)
    {
        CStdioFile File(fStream);
        CString Line;
        while (File.ReadString(Line))
        {
            plainText += Line;
        }
    }
    fflush(fStream);
    fclose(fStream); 
```

读完后应始终关闭文件指针，否则会导致错误

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-01T00:53:36.740

您也可以使用它来一一读取文件中的所有行，然后打印 i

```
#include <iostream>
#include <fstream>

using namespace std;

bool check_file_is_empty ( ifstream& file){
    return file.peek() == EOF ;
}

int main (){

    string text[256];
    int lineno ;
    ifstream file("text.txt");
    int num = 0;

    while (!check_file_is_empty(file))
    {    
        getline(file , text[num]);
        num++;
    }
    for (int i = 0; i < num ; i++)
    {
        cout << "\nthis is the text in " <<  "line " << i+1 << " :: " << text[i] << endl ;

    }

    system("pause");

    return 0;
} 
```

希望这可以帮助你:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-01T00:33:43.423

你好兄弟这是一种使用此代码在确切行中读取字符串的方法

希望这可以帮助你！

```
#include <iostream>
#include <fstream>

using namespace std;

int main (){

    string text[1];
    int lineno ;
    ifstream file("text.txt");
    cout << "tell me which line of the file you want : " ;
    cin >> lineno ; 

    for (int i = 0; i < lineno ; i++)
    {

        getline(file , text[0]);

    }   

    cout << "\nthis is the text in which line you want befor  :: " << text[0] << endl ;
    system("pause");

    return 0;
} 
```

祝你好运 ！

# django - 不接受使用django地理跨度关系过滤查询

> ID：13035676
> 
> 赞同：4
> 
> 时间：2012-10-23T17:05:45.340
> 
> 标签：django, geolocation, django-queryset, geodjango

我正在尝试使用与 geodjango 的地理跨度关系过滤某些项目，但我不明白为什么它不起作用。考虑这个例子：

```
class Location(models.Model):
    name = models.CharField(max_length=32,)
    marker = models.PointField(srid=4326) # the marker
    objects = models.GeoManager()

class Item(models.Model):
    name =  models.CharField(max_length=200)
    location = models.ForeignKey(Location)

poly = Polygon(
[(0.02780914306640625, 52.158980248467095),
 (0.22350311279296875, 52.158980248467095),
 (0.22350311279296875, 52.253657959623055),
 (0.02780914306640625, 52.253657959623055),
 (0.02780914306640625, 52.158980248467095)]
) 
```

如果我查询（“A location”是数据库中的现有位置）

```
Item.objects.filter(location__name__exact="A location") 
```

有用。

相反，如果我查询

```
Item.objects.filter(location__marker__within=poly) 
```

我收到这个错误

```
---------------------------------------------------------------------------
FieldError                                Traceback (most recent call last)
/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in <module>()
----> 1 Item.objects.filter(location__marker__within=poly)

/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/manager.pyc in filter(self, *args, **kwargs)
    141 
    142     def filter(self, *args, **kwargs):
--> 143         return self.get_query_set().filter(*args, **kwargs)
    144 
    145     def aggregate(self, *args, **kwargs):

/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/query.pyc in filter(self, *args, **kwargs)
    619         set.
    620         """
--> 621         return self._filter_or_exclude(False, *args, **kwargs)
    622 
    623     def exclude(self, *args, **kwargs):

/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/query.pyc in _filter_or_exclude(self, negate, *args, **kwargs)
    637             clone.query.add_q(~Q(*args, **kwargs))
    638         else:
--> 639             clone.query.add_q(Q(*args, **kwargs))
    640         return clone
    641 

/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in add_q(self, q_object, used_aliases, force_having)
   1248                 else:
   1249                     self.add_filter(child, connector, q_object.negated,
-> 1250                             can_reuse=used_aliases, force_having=force_having)
   1251                 if force_having:
   1252                     self.having.end_subtree()

/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in add_filter(self, filter_expr, connector, negate, trim, can_reuse, process_extras, force_having)
   1120                     parts, opts, alias, True, allow_many, allow_explicit_fk=True,
   1121                     can_reuse=can_reuse, negate=negate,
-> 1122                     process_extras=process_extras)
   1123         except MultiJoin, e:
   1124             self.split_exclude(filter_expr, LOOKUP_SEP.join(parts[:e.level]),

/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in setup_joins(self, names, opts, alias, dupe_multis, allow_many, allow_explicit_fk, can_reuse, negate, process_extras)
   1473         if pos != len(names) - 1:
   1474             if pos == len(names) - 2:
-> 1475                 raise FieldError("Join on field %r not permitted. Did you misspell %r for the lookup type?" % (name, names[pos + 1]))
   1476             else:
   1477                 raise FieldError("Join on field %r not permitted." % name)

FieldError: Join on field 'marker' not permitted. Did you misspell 'within' for the lookup type? 
```

注意

```
Location.objects.filter(marker__within=poly) 
```

按预期工作

有没有办法在一段关系中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T09:17:50.853

事实证明，geodjango 邮件列表（[https://groups.google.com/forum/?fromgroups=#!topic/geodjango/wvEJaYX_Cuc](https://groups.google.com/forum/?fromgroups=#!topic/geodjango/wvEJaYX_Cuc)）上给出了答案，所以如果有人偶然发现它，我也会在这里写

如果您需要在跨度关系上使用geoQueryset，您还需要在没有空间特征的模型上使用GeoManager，但对于具有属性作为类的模型的ForeignKey。

因此正确的方法是从 django.contrib.gis.db 导入模型

```
class Location(models.Model):
    name = models.CharField(max_length=32,)
    marker = models.PointField(srid=4326) # the marker
    objects = models.GeoManager()

class Item(models.Model):
    name =  models.CharField(max_length=200)
    location = models.ForeignKey(Location)
    objects = models.GeoManager() 
```

然后`Item.objects.filter(location__marker__within=poly)`按预期工作。

# ios - 如何删除默认按钮？

> ID：13035679
> 
> 赞同：0
> 
> 时间：2012-10-23T17:05:54.723
> 
> 标签：ios, xcode

如何删除 dafult 按钮以将自定义按钮放置在导航栏中？目前的问题是我的自定义按钮超过了默认按钮。![在此处输入图像描述](../Images/1da18abdeef73d44a64cef9a328d973d.png)

请看一下截图，它会更清楚。

我用以下代码得到这个：

```
- (void)viewDidLoad
{
    UIImage *menuImage = [UIImage imageNamed:@"barMenuButton.png"];
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithImage:menuImage style:UIBarButtonItemStylePlain target:self action:@selector(ShowLeftMenu:)];
    [self.navigationItem setRightBarButtonItem:addButton];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:36:19.737

这将解决您的问题：

```
UIImage *menuImage = [UIImage imageNamed:@"barMenuButton.png"];

UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 100, 40);
[button setImage:menuImage forState:UIControlStateNormal];

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithCustomView:button];
[addButton setAction:@selector(ShowLeftMenu:)];

[self.navigationItem setRightBarButtonItem:addButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:34:05.693

您必须创建一个自定义视图并将其添加到栏按钮项，如[本文所述](http://eureka.ykyuen.info/2010/06/11/iphone-adding-image-to-uibarbuttonitem/)。[本文](http://robots.thoughtbot.com/post/33427366406/designing-for-ios-taming-uibutton)还提供了一些有关创建自定义`UIButtons`.

# php - 在 Drupal 上下文中使用分类术语是否有否定选项？

> ID：13035680
> 
> 赞同：0
> 
> 时间：2012-10-23T17:05:57.880
> 
> 标签：php, drupal, drupal-6

我有一个 Drupal 6 站点，它使用上下文显示许多块。其中一些块是视图块。*我需要使用上下文根据特定条件显示一个视图块。*

现在，如果块具有特定的分类术语标签，则可以使块出现在故事​​节点上。Contexts 通过将站点中的所有标签显示为列表来提供一个简单的界面。

现在我需要做相反的事情，***我需要让视图块出现在所有故事节点上，除了那些包含特定分类术语的节点。***目前 Contexts 不提供任何 NOT 条件或对分类术语列表中呈现的值的任何否定。

现在我的问题是，在 Drupal 上下文中使用分类术语是否有否定选项，或者我应该求助于编写自定义 PHP 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:54:50.613

我发现了如何使用解决方法来做到这一点。

我使用了上下文禁用上下文模块 - [http://drupal.org/project/context_disable_context](http://drupal.org/project/context_disable_context) 并让它工作。

感谢所有帮助过的人。

# linux - Eclipse 在 Linux 上崩溃

> ID：13035691
> 
> 赞同：0
> 
> 时间：2012-10-23T17:06:29.207
> 
> 标签：linux, eclipse, javaw

每当我尝试在 Linux 上启动 Eclipse 时，它​​会短暂打开，然后崩溃并出现以下错误：

```
VM terminated. Exit code=160
/opt/ibm/IntegrationDesigner/v8.0/jdk/jre/bin/javaw
-Xquickstart
-Xms512m
-Xss2048k
-Xmaxf0.1
-Xminf0.05
-Xmx1024m
-Xmnx64m
-Xgcpolicy:gencon
-Xscmx96m
-Xshareclasses:name=IBMSDP_%u
-XX:MaxPermSize=512M
-Dorg.eclipse.jdt.core.javamodelcache.ratio=0.0625
-Dorg.mortbay.jetty.Request.maxFormContentSize=25000000
-jar /opt/ibm/IntegrationDesigner/v8.0/plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122    _1400.jar
-os linux
-ws gtk
-arch x86
-showsplash
-launcher /opt/ibm/IntegrationDesigner/v8.0/eclipse
-name Eclipse
--launcher.library
/opt/ibm/IntegrationDesigner/v8.0/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.2.R36x_v20101019_1345/eclipse_1310.so
-startup
/opt/ibm/IntegrationDesigner/v8.0/plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
-exitdata 1148009
-install /opt/ibm/IntegrationDesigner/v8.0
-vm /opt/ibm/IntegrationDesigner/v8.0/jdk/jre/bin/javaw
-vmargs
-Xquickstart
-Xms512m
-Xss2048k
-Xmaxf0.1
-Xminf0.05
-Xmx1024m
-Xmnx64m
-Xgcpolicy:gencon
-Xscmx96m
-Xshareclasses:name=IBMSDP_%u
-XX:MaxPermSize=512M
-Dorg.eclipse.jdt.core.javamodelcache.ratio=0.0625
-Dorg.mortbay.jetty.Request.maxFormContentSize=25000000
-jar
/opt/ibm/IntegrationDesigner/v8.0/plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar 
```

我已经检查以确保 Java 和 Eclipse 都是 32 位安装。

从 java -版本：

```
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr9-20110726_87 
```

来自 eclipse.ini：

```
--launcher.library plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.2.R36x_v20101019_1345 
```

我还能错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:33:55.733

我最终重新安装了 WebSphere Integration Designer，并且不再遇到这些问题。谢谢大家在评论里的建议。:)

# image - Delphi 7：将图像附加到鼠标

> ID：13035693
> 
> 赞同：6
> 
> 时间：2012-10-23T17:06:31.330
> 
> 标签：image, delphi, pointers, sender

我希望 TImage 的衍生物在被单击时跟随光标，并在再次单击时停止跟随。为此，我创建了一个名为“Attached”的指针，它指向 TImage 或派生类。

```
var Attached: ^TImage; 
```

我还将 Timage 的派生设置为在单击时调用过程 ChangeAttachState。

现在，在 ChangeAttachState 过程中，我想更改它指向单击的图像上的指针，或者在已附加图像时指向 nil。在代码中：

```
procedure TForm1.ChangeAttachState(Sender:TObject);
begin
  if Attached = nil then
    Attached := @Sender
  else
    Attached := nil;
end; 
```

但是，“附加：= @Sender”行似乎不起作用，当我想使用指针将图像向右移动时，会导致访问冲突。

我认为指针指向错误的位置。如何使指针指向正确的保存地址或使用其他方法使单击的图像跟随鼠标？

*（我希望我使用了正确的技术术语，因为英语不是我的母语）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T17:38:08.883

一个对象已经是一个指针，声明你`Attached`的 a `TImage`（而不是`^TImage`），你可以像`Attached := Sender as TImage`在 'ChangeAttachedState' 中分配给它（而不是`Attached := @Sender`）。

然后，您可以像这样在表单上附加鼠标移动处理程序：

```
procedure TForm1.FormMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  if Assigned(Attached) then begin
    Attached.Left := X;
    Attached.Top := Y;
  end;
end; 
```

# c# - 如何在 XNA 中不使用 SpriteBatch 绘制纹理？

> ID：13035694
> 
> 赞同：1
> 
> 时间：2012-10-23T17:06:30.877
> 
> 标签：c#, xna

所以我正在做一个项目，我有一个基于 3d 立方体的世界。我让所有这些工作，我正在启动用户界面，当我开始使用 spritebatch 绘制我拥有的光标纹理时，我发现 XNA 并没有正确地分层所有模型，一些模型距离较远的将首先绘制，而不是在模型后面。当我取出所有 spritebatch 代码时，就是这样：

```
 spriteBatch.Begin();
        cursor.draw(spriteBatch);
        spriteBatch.End(); 
```

我发现问题立即得到解决。光标是一个对象，draw方法只是使用`spriteBatch.draw()`;

在我看来，有两种解决方案，我可以找到一种不使用*SpriteBatch*来绘制光标和其他界面的方法，或者`spriteBatch.Begin()`我可以插入一个参数来解决问题？我不知道如何做这些，其他人遇到这个问题并且知道如何解决它？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:09:02.943

## 这不回答问题！

我不确定您是否可以（或应该）在没有 spritebatch 的情况下绘制 2D，但是在使用 2D spritebatch 时，我在 3D 模型渲染方面遇到了同样的问题，我在 GameDev[上找到的解决方案](https://gamedev.stackexchange.com/a/37558)帮助我解决了这个问题：

> 您的设备状态可能是错误的。这经常发生在混合 2D 和 3D 时（例如 SpriteBatch.Begin() 的不带参数的重载设置了一些与 3D 渲染不兼容的设备状态。不过不用担心，您所要做的就是确保以下内容设备状态按照您想要的方式设置：

```
GraphicsDevice.BlendState = BlendState.Opaque;
GraphicsDevice.DepthStencilState = DepthStencilState.Default;
GraphicsDevice.RasterizerState = RasterizerState.CullCounterClockwise;
GraphicsDevice.SamplerStates[0] = SamplerState.LinearWrap; 
```

基本上，您首先调用`SpriteBatch`2D 绘制的方法，然后调用上述代码（应该确保正确的 3D 渲染），然后绘制 3D 模型。事实上，我只使用了前两行 -`BlendState`而且`DepthStencilState`它按应有的方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:12:50.710

你看过[这个超载吗？](http://msdn.microsoft.com/en-us/library/ff433989.aspx)

您可以使用最后一个参数 layerDepth 来控制精灵的绘制顺序。如果您使用它，请务必检查[sprite 排序模式](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx)（在 SpriteBatch.Begin(...) 调用中）。这是否涵盖了您需要做的事情？

编辑：另请注意，这意味着使用正确的透视矩阵，以 2D 绘制（我假设您希望光标在其他所有内容之上以 2D 显示），以及**在**所有 3D 内容之后（很可能在例如，Z=0，使前面的物体阻挡精灵）。

# html - CSS 样式不起作用？

> ID：13035696
> 
> 赞同：0
> 
> 时间：2012-10-23T17:06:35.523
> 
> 标签：html, css

我已经使用 HTML 和 CSS 大约 5 年了，而我对这个完全不知所措。[http://napletonlaw.connectionsquad.com/](http://napletonlaw.connectionsquad.com/)

在该页面上，该容器中有一个 ID 为 Clarity 的 div。

我的CSS规则如下：

```
#clarity {
text-align: center;
width: 320px;
} 
```

它的代码如下：

```
<div id="clarity">
            <img src="Resources/magnifying-glass.png" />
            <p>You have questions, and we have answers.  We can help break down the situation into easy-to-understand terms and clear advice. Napleton Law is here to help you!</p>
        </div> 
```

出于某种原因，我应用到该 DIV 的宽度没有采用...在 Dreamweaver 的预览中，它会将 div 缩小到 320px，但是在预览时它不会......我不知道为什么我设置时清晰度 div 会跨越整个页面宽度为 320 像素...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T17:11:00.377

前面的规则中缺少一个括号，这可能是您的问题的原因。

```
#container {
    width: 960px;
    height: 800px;
    margin: 0px;
    position: relative;
    z-index: 100;
    background-color: #a0a0a0;
    box-shadow: 0 0 10px rgba(0, 0, 0, 1);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 1; <--- Missing bracket
    -moz-box-shadow: 0 0 10px rgba(0,0,0,1);
}
#clarity {
    text-align: center;
    width: 320px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:12:54.683

样式处出现 CSS 错误，缺少括号`-webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 1;`

```
#container {
    width: 960px;
    height: 800px;
    margin: 0px;
    position: relative;
    z-index: 100;
    background-color: #a0a0a0;
    box-shadow: 0 0 10px rgba(0, 0, 0, 1);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 1);  //Added a missing bracket here.
    -moz-box-shadow: 0 0 10px rgba(0,0,0,1);
} 
```

# c# - 粗体树视图节点被截断 - 官方修复将不起作用，因为构造函数中的代码

> ID：13035701
> 
> 赞同：6
> 
> 时间：2012-10-23T17:06:47.773
> 
> 标签：c#, winforms, treeview

我遇到了一个众所周知的问题，即在将 TreeNode 的字体设置为粗体后，TreeNode 的文本会被截断。但是，我相信我发现了所有普遍接受的“修复”都不起作用的情况。

**常见解决方案：http:** [//support.microsoft.com/kb/937215](http://support.microsoft.com/kb/937215)

```
node.NodeFont = new System.Drawing.Font(node.NodeFont, FontStyle.Bold);
node.Text += string.Empty; 
```

**变体 1：** [C# Winforms 粗体树视图节点不显示整个文本](https://stackoverflow.com/questions/2272493/c-sharp-winforms-bold-treeview-node-doesnt-show-whole-text)（请参阅 BlunT 的答案）

```
node.NodeFont = new System.Drawing.Font(node.NodeFont, FontStyle.Bold);
node.Text = node.Text; 
```

**变体 2：** [http ://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/acb877a6-7c9d-4408-aee4-0fb7db127934](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/acb877a6-7c9d-4408-aee4-0fb7db127934)

```
node.NodeFont = new System.Drawing.Font(node.NodeFont, FontStyle.Bold);
treeView1.BackColor = treeView1.BackColor; 
```

**上述修复不起作用的场景：**

如果将节点设置为粗体的代码位于构造函数中（表单或在本例中为用户控件），则修复将不起作用：

```
public partial class IncidentPlanAssociations : UserControl
{
    public IncidentPlanAssociations()
    {
        InitializeComponent();

        TreeNode node = new TreeNode("This is a problem.");
        node.NodeFont = new Font(treeView1.Font, FontStyle.Bold);
        treeView1.Nodes.Add(node);

        // This does not fix problem
        node.Text += string.Empty;

        // This does not fix problem
        node.Text = node.Text;

        // This does not fix problem
        treeView1.BackColor = treeView1.BackColor;

    }
} 
```

但是，如果我将这三个“修复”中的任何一个放在按钮后面的代码中，并在一切运行后单击它，它就会正常工作。我确信这与最初绘制树视图时有关，但我正试图找出解决它的好方法。有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:27:01.247

感谢@Robert Harvey 的帮助。

如果有人遇到类似问题，这里的解决方法是将代码从构造函数移动到用户控件的加载事件。上述三个变体中的任何一个都可以工作。

我个人选择了：

```
private void IncidentPlanAssociations_Load(object sender, EventArgs e)
{
    TreeNode node = new TreeNode("This is no longer a problem.");
    node.NodeFont = new Font(treeView1.Font, FontStyle.Bold);
    treeView1.Nodes.Add(node);

    // This fixes the problem, now that the code 
    //      is in the Load event and not the constructor
    node.Text = node.Text;

} 
```

代码只需要在 Load 事件中，而不是在构造函数中，就可以让这个众所周知的错误的解决方法对我正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T19:25:15.993

如果将要使用的最大字体（BOLD 和/或最大磅值）分配给基本 TreeView 控件，然后为标准大小的行显式更改字体为较小的字体，则不会出现截断问题。

此外，如果您选择最大的字体，以免与标准字体相差太远，那么一切都会很好地间隔开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T12:54:37.797

在任何视觉更改中使用 treeView.BeginUpdate() 和 treeView.EndUpdate()。

例子：

```
this.treeView.BeginUpdate();
this.treeView.Nodes.Clear();
this.treeView.Nodes.AddRange(allNodes.ToArray());
this.treeView.EndUpdate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T20:07:03.697

我知道这是一篇非常古老的帖子，但我刚刚找到了一个适合我的解决方案，我在[这里](http://www.codeproject.com/Questions/373949/Change-the-length-of-node-selection-in-treeview)找到了。显然，通过将背景颜色设置为空，它解决了粗体文本被切断的问题。

这是修复：

```
treeView.BackColor = Color.Empty; 
```

# sql - 我可以得到一整年的一张桌子还是我必须每个月更改查询？

> ID：13035706
> 
> 赞同：2
> 
> 时间：2012-10-23T17:07:23.080
> 
> 标签：sql, oracle

以下代码可能是不言自明的

列出 6 月 1 日的活跃订阅者数量

```
select 
    count(subscribers) as activeSubscribers 
from subscriberlist sub 
where 
    to_date('2012-06', 'yyyy-mm') 
        between sub.firstDayOfSubscription and sub.lastDayOfSubscription 
```

但是，如果我想在过去一年的每个月初获得订阅者的数量，我该怎么办（除了更改查询中的日期并重复）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:06:30.590

您可以按如下方式生成月份列表：

```
SELECT add_months (trunc (to_date('01/01/2012','MM/DD/YYYY'), 'MM'), 1*LEVEL -1) FirstDay
        FROM Dual
     CONNECT BY LEVEL <= MONTHS_BETWEEN(to_date('12/31/2012','MM/DD/YYYY'), to_date('01/01/2012','MM/DD/YYYY')) + 1
       ORDER BY FirstDay 
```

这将为您提供以下输出：

```
FIRSTDAY
--------
January, 01 2012 00:00:00+0000
February, 01 2012 00:00:00+0000
March, 01 2012 00:00:00+0000
April, 01 2012 00:00:00+0000
May, 01 2012 00:00:00+0000
June, 01 2012 00:00:00+0000
July, 01 2012 00:00:00+0000
August, 01 2012 00:00:00+0000
September, 01 2012 00:00:00+0000
October, 01 2012 00:00:00+0000
November, 01 2012 00:00:00+0000
December, 01 2012 00:00:00+0000 
```

然后，您可以将该查询包含为内联视图，如下所示：

```
SELECT months.FirstDay,
       (SELECT count(subscribers)
          FROM subscriberlist sub
         WHERE months.FirstDay BETWEEN sub.firstDayOfSubscription AND sub.lastDayOfSubscription
       ) AS activeSubscribers
FROM (SELECT add_months(trunc (to_date('01/01/2012','MM/DD/YYYY'), 'MM'), 1*LEVEL -1) FirstDay
        FROM Dual
     CONNECT BY LEVEL <= MONTHS_BETWEEN(to_date('12/31/2012','MM/DD/YYYY'), to_date('01/01/2012','MM/DD/YYYY')) + 1
       ORDER BY FirstDay) Months 
```

我可能会将它包装在一个接受 @startDate 和 @endDate 参数的存储过程中，以定义您感兴趣的日期范围，但我遵循您的语法，日期范围是用字符串定义的。

[我正在使用这个SqlFiddle](http://sqlfiddle.com/#!4/7b602/2/0)玩这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:24:42.143

这对于日期查找表来说可能是一个很好的用途。我发现它们足够有用，可以尝试在任何体面的数据库中始终拥有一个。

在您的数据库中建立一个表，每天一行，持续一段合理的时间......比如说从十年前到十年后（取决于您运行的查询类型）。

在表中添加一些基于日期的字段：

日期周周_结束月月_DayOf月_开始年营业_日周末假期等...

这样做的方便之处在于，一旦它被填充，您可以通过日期字段将其连接到其他表，以便根据需要按日期汇总或过滤数据。例如：

```
select 
    dt.Month
    count(subscribers) as activeSubscribers 
from subscriberlist sub 
    join (select unique datelookup.Month_Beginning
          from date_reference ) dt
    on dt.Month_Beginning between sub.firstDayOfSubscription and sub.lastDayOfSubscription
group by 
    dt.Month; 
```

（在我脑海中，我不确定这种语法是否完全正确，尤其是对于 Oracle。）

如果您无法在数据库中添加一个，您可以创建一个临时表作为查询的一部分，并用您关心的日期范围填充它。

# jquery - showPageLoadingMsg 不工作

> ID：13035715
> 
> 赞同：0
> 
> 时间：2012-10-23T17:08:18.850
> 
> 标签：jquery, jquery-mobile

我在页面加载时加载微调器的功能似乎不起作用。

```
$('#HomeViewPage_ColleagueLocation').live('pagebeforeshow', function(toPage, fromPage){
            $.mobile.showPageLoadingMsg("a", "No spinner", true);
            setTimeout("test()", 2000);

            GetAllUsersByTeam();
            GetAvailableTeams();
            $('#colleagueLocationLabel').text(CurrentLocationName);
    });

function test(){
        alert("works");
    } 
```

页面加载正常，警报响起，但我从未看到“无微调器”消息。顺便说一句，我正在使用 IE9。为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:22:03.187

改变：

```
$('#HomeViewPage_ColleagueLocation').live('pagebeforeshow', function(toPage, fromPage) 
```

到：

```
$('#HomeViewPage_ColleagueLocation').live('pageshow', function(toPage, fromPage) 
```

解决了。

# php - PHP代码在最后一行之前写一行

> ID：13035717
> 
> 赞同：0
> 
> 时间：2012-10-23T17:08:28.837
> 
> 标签：php, jquery, json, calendar, rewrite

对于我的 jQuery 日历，我需要编辑这行代码来插入一个新事件。

```
[
{"id":1, "start": new Date(year, month, day, 12), "end": new Date(year, month, day, 13, 35),"title":"Lunch with Mike"},
{"id":2, "start": new Date(year, month, day, 14), "end": new Date(year, month, day, 14, 45),"title":"Dev Meeting"},
] 
```

如果最后一行不需要“]”，file_put_contents 会做得很好，所以也许有一种方法可以查找“]”并将其替换为：

```
{"id":3, "start": new Date(year, month, day, 14), "end": new Date(year, month, day, 14, 45),"title":"New Thing"},
    ] 
```

此外，我的预订可以取消，所以我还需要找到一种方法来找到该特定行（按 ID 搜索）并将其删除，直到下一行......但我该如何实现呢？
（当我预订或取消预订项目时，应触发此代码。）

也许，如果这是可能的，这不是正确的方法吗？

如果我在站点的日历部分设置触发器会怎样：在创建日历视图之前，事件文件将填充数据库中的所有信息，保存，然后日历将显示所有事件。

但这对页面来说有多密集？如果数据库中有 1000 个预订，则每次检查日历页面时都必须一遍又一遍地创建 1002 行。这是个好主意吗？

我在这里有什么选择？哪一个是最好/正确的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:10:41.157

如果您没有太多数据，请调用 json_decode，添加您的内容，在更改的对象上调用 json_encode 以使其成为字符串并再次将其保存到文件中..

通常：我会将每一行保存为一个 json 字符串，但不会全部保存在一个大对象中。因此，您只需每行有一个 json 对象：

```
{date: "", [...]}
{date: "", [...]} 
```

您可以在 fopen() 中使用“a”标志或在 file_put_contents() 中使用 FILE_APPEND 时附加一个条目。这是非常快的。要读取数据，遍历每一行并调用 json_decode()。这也更快。

# puppet - 出现错误无法评估：无法确定卷是否存在

> ID：13035722
> 
> 赞同：3
> 
> 时间：2012-10-23T17:08:49.677
> 
> 标签：puppet

运行 puppet 时出现此错误`puppet agent -t`：

```
Error: /Stage[main]/Environment/Environment::Createenv[shared2]/Volume[shared2]: Could not evaluate: No ability to determine if volume exists
Error: /Stage[main]/Environment/Environment::Createenv[shared1]/Volume[shared1]: Could not evaluate: No ability to determine if volume exists 
```

这是 environment/manifest/init.pp 的代码

```
class environment(){
            volume { "${title}":
              ensure      => present,
              location    => "/home",
              mode        => 0750,
              owner       => "${title}",
              group       => "env",
              device_name => undef,
              device_size => 10,
              az          => undef,
              instance_id => undef,
            }
} 
```

以及提供程序文件（lib/puppet/provider/ebs.rb）：

```
require 'puppet/resource'
require 'puppet/resource/catalog'
require 'fileutils'
require 'rubygems'
require 'facter'
require 'aws-sdk'
require File.dirname(__FILE__) + '/aws-config'
include Puppet::Util::Volume
include AwsConfig

Puppet::Type.type(:volume).provide(:ebs) do
  desc "Create, attach, format and mount EBS volumes"

  defaultfor :kernel => "Linux"

  def create
    az = Facter.value('ec2_placement_availability_zone')
    puts "Some code here ..."
  end

  def destroy
    raise NotImplementedError
  end

  def exists?
    return File.directory?(@resource[:name])
  end

end 
```

和类型（lib/puppet/type/volume.rb）：

```
require 'puppet/type'
Puppet::Type.newtype(:volume) do
  @doc = "Create new volume. Limited to EBS volumes"

  ensurable do
    self.defaultvalues
    defaultto :present
  end

  newparam(:name) do
    desc "Name of resource"
    isnamevar
  end

  newparam(:location) do
    desc "path to directory where the volume will be mounted"
  end
end 
```

Puppet 版本 3.0.1（服务器和客户端）。有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:40:15.573

找到了！

只需将提供程序文件移动到与 type 同名的目录即可。在我的情况下 /etc/puppet/modules/environment/lib/puppet/provider/ **volume** /ebs.rb

其中*environment*是我的自定义模块的名称，*volume*是自定义类型。

# c++ - 可变参数模板的歧义

> ID：13035725
> 
> 赞同：0
> 
> 时间：2012-10-23T17:08:53.030
> 
> 标签：c++, c++11, variadic-templates, ambiguous

我有一个关于可变参数模板的问题。我有一个类以下列方式使用它们：

```
template <class... T>
struct A {
  A(B& arg);                   // (1)
  A(typename T::B& args...);   // (2)
}; 
```

`typename T::B`是某种类型，预期对于参数包中的所有实例都相等。为了便于展示，我将这种类型称为`B`. 该类包含`B`参数包中每个参数的实例。第二个构造函数`(2)`初始化这些成员。为方便起见，有一个构造函数`(1)`，它只接受一个实例并用相同的实例初始化所有成员。

构造函数的定义对我的问题并不重要，您可以将它们留空。下面提供了一个更完整的示例。

现在，问题是构造函数冲突，如果你只用一个参数初始化 A。`g++-4.7`这边有点糊涂，逃了出来，但是仔细看了一下班级，问题就很明显了。

问题：

1.  标准对这种情况有什么看法？这是应该/可以由编译器解决的歧义还是我应该避免这种情况？

2.  避免它的最佳策略是什么？根本没有指定第一个构造函数之类的东西吗？我也可以将第一个构造函数的功能放在静态方法中，但这会使 API 更加不均匀。

感谢您的回答！

* * *

完整示例：

```
struct B {};

struct C
{
  using B = ::B;
};

template <class... T>
struct A
{
  A(B& arg) {}
  A(typename T::B & ... args) {}
};

int main()
{
  A<C> x(B()); // Edit: Should be: A<C> X{B()}; But not related to the problem.
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:11:26.320

```
A<C> x(B()); 
```

是函数声明，而不是对象声明。您需要添加括号或使用大括号：

```
A<C> x { B() }; 
```

或者

```
A<C> x((B())); 
```

此外，要通过引用将临时值传递`B`给构造函数，您必须使其`const`：

```
A(const B& arg) { } 
```

然后

```
A<C> x((B())); 
```

工作正常。

现在要解决歧义问题，您需要这样的东西：

```
#include <type_traits>
#include <iostream>

struct B {};

struct C
{
  using B = ::B;
};

template <class... T>
struct A
{
  A(const B& arg) {
    std::cout << "one" << std::endl;
  }

  template<bool IsNotOne = sizeof...(T) != 1>
  A(const typename std::enable_if<IsNotOne || !std::is_same<B, T>::value, T>::type::B&... args) {
    std::cout << "multiple" << std::endl;
  }
};

int main()
{
  A<B> x1 { B() };         // prints one
  A<C> x2 { B() };         // prints one
  A<C, C> x3 { B(), B() }; // prints multiple
  A<B, B> x4 { B(), B() }; // prints multiple
  return 0;
} 
```

我们将第二个构造函数设为模板，这样我们就可以依赖 SFINAE。

# ruby-on-rails - 部署：资产：预编译问题

> ID：13035729
> 
> 赞同：0
> 
> 时间：2012-10-23T17:09:11.177
> 
> 标签：ruby-on-rails, ruby, rubygems, ruby-on-rails-3.2, capistrano

我正在尝试通过 capistrano 将 rails 应用程序部署到 rackspace 服务器。我已经将许多 Rails 应用程序部署到 Rackspace 和 Linode 服务器，从未遇到过这样奇怪的问题。capistrano 没有部署应用程序，下面是日志：

```
executing `deploy:assets:precompile'
  * executing "cd /home/deployer/apps/latty39/releases/20121023165957 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["50.56.183.16"]
    [50.56.183.16] executing command
 ** [out :: 50.56.183.16] rake aborted!
 ** [out :: 50.56.183.16] cannot load such file -- Date
 ** [out :: 50.56.183.16] 
 ** [out :: 50.56.183.16] (See full trace by running task with --trace)
    command finished in 7454ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/latty39/releases/20121023165957; true"
    servers: ["50.56.183.16"]
    [50.56.183.16] executing command
    command finished in 2001ms
failed: "sh -c 'cd /home/deployer/apps/latty39/releases/20121023165957 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on 50.56.183.16 
```

我不知道为什么这会失败。我在这件事上几乎花了 3 个小时，到目前为止还没有成功。有搜索stackoverflow和其他资源但没有帮助。

任何解决问题的帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:11:50.513

我自己想通了。我有一个自定义 rake 任务，它需要 ruby​​ 日期类，例如：

```
require 'Date' 
```

删除它并全部修复。但我不需要弄清楚为什么在生产中要求日期类会引发错误。

# javascript - paulirish/infinite-scroll 正在加载错误的页面

> ID：13035731
> 
> 赞同：1
> 
> 时间：2012-10-23T17:09:20.683
> 
> 标签：javascript, jquery, infinite-scroll

我正在使用[https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)没有 WordPress，只有 jQuery。

我的链接看起来像这样

```
"mysite.com/whatever/25"
"mysite.com/whatever/50"
"mysite.com/whatever/75" 
```

但它正在加载这样的新页面

```
"mysite.com/whatever/25"
"mysite.com/whatever/35"
"mysite.com/whatever/45" 
```

为什么它不只使用我指向的链接的href `"#pagination li.active + li a"`？而不是将它认为是下一页的部分增加1！？

编辑; 我使用的是偏移量，而不是页码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T03:46:26.417

尝试使用这个[http://pengkong.github.io/jquery-auto-pagination/](http://pengkong.github.io/jquery-auto-pagination/) 它不依赖于运行页码和/或与无限滚动不同的固定增量。

# c++ - 为指针分配空间

> ID：13035734
> 
> 赞同：2
> 
> 时间：2012-10-23T17:09:27.523
> 
> 标签：c++, pointers, memory-management

假设我有一个指针`ptr`，我为该指针分配了一些空间。现在，如果我有另一个指针`ptr2`并执行此操作：

```
ptr2 = ptr; 
```

这是否意味着我分配空间`ptr2`还是我需要`ptr2`自己分配空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:13:03.643

好吧，取决于您所说的“为指针分配空间”的意思。

例如：

```
int* ptr; 
```

在自动内存中为指针分配空间。指针没有指向任何有意义的东西。如果你这样做了：

```
int* ptr = new int; 
```

您在自动内存中为指针本身分配了空间，并且该指针指向由 分配的内存`new int`，该内存位于动态内存中。

如果现在你做了：

```
int* ptr2 = ptr; 
```

您在自动内存中有一些内存为`ptr2`自己，**但它会指向与动态内存中相同的位置`ptr`**。

所以最后，你`int*`在自动存储中分配了 2 秒的内存，`int`在动态存储中分配了 1 秒。这两个指针指向同一个内存。

自动内存会自动清理（duuh）。您必须自己删除动态分配的内存：

```
delete ptr; 
```

请注意，由于两者指向同一个位置，所以：

```
delete ptr;
delete ptr2; 
```

会产生未定义的行为（因此是非法的）。

（这都需要优化，但原则上，它会像这样下降）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:11:08.723

您不会“为指针分配空间”。你只“分配空间”，然后你有一个指向该空间的指针。在您的情况下，您只需有两个指向同一空间的指针（`ptr`和）。`ptr2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:12:29.917

指针就像一个简单的变量，只是它存储了一个内存地址。所以有两种空间分配需要考虑。一是指针变量本身占用的空间。第二个是指针指向的空间。正如问题所说，

> 假设我有一个指针`ptr`，我为该指针分配了一些空间

我认为这是在谈论第二种情况。

因此，当您这样做时`ptr2 = ptr`，`ptr2`指向与 所指向的空间相同的空间`ptr`。但是，是的，为 ptr2 分配了一些空间，它可以存储它指向的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:12:43.917

指针类似于变量或 POD（普通的旧数据类型，例如 int），不同之处在于它保存了一个内存地址。您所做的就是将地址从一个变量复制/分配到另一个变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T17:52:02.610

编译器为程序中引用的所有变量分配内存。假设指针是一种变量。

因此，为 ptr1 和 ptr2 分配了内存：

两个指针都指向 NULL：

```
ptr          ptr2 
0x0        | 0x0 
```

每个指针都指向一个存储值的内存地址：

```
ptr          ptr2
0x0F032010 | 0x0C012A10 
```

ptr2 现在指向与 ptr 相同的值。ptr2 指向的任何东西都会丢失。

```
ptr          ptr2
0x0F032010 | 0x0F032010 
```

要回答您的问题，ptr2 = ptr 不会创建 ptr 指向的值的副本，它只是使变量 ptr2 能够访问与 ptr 相同的值。

# css - 用于 css 的 Django 加载块

> ID：13035736
> 
> 赞同：49
> 
> 时间：2012-10-23T17:09:34.093
> 
> 标签：css, django, static

我有几页。对于每个页面，我都需要加载唯一的 css。对于所有静态文件，我使用[它](https://docs.djangoproject.com/en/dev/howto/static-files/#with-a-template-tag)。在 index.html 的头部，我有：

```
{% block css  %}

{% endblock %} 
```

但是，例如，在 contact.html 我使用：

```
{% extends "index.html" %}    
{% block css %}
    <link rel="stylesheet" href="{% static "css/contact.css" %}" type="text/css" />
    {% endblock %} 
```

及其打印错误： **Invalid block tag: 'static', expected 'endblock'**。如何解决？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-23T17:28:23.687

你需要先使用`{% load static %}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:12:19.837

它是

```
{% block css %}

{% endblock %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-20T06:52:59.277

您的代码需要改进。

您正在使用双引号，您需要在其中使用撇号。

采用

```
href ="{% static 'css/contact.css' %} " 
```

代替

```
href ="{% static" css/contact.css" %} " 
```

# ruby-on-rails - 关于处理 EAV 模型表版本控制的建议

> ID：13035744
> 
> 赞同：0
> 
> 时间：2012-10-23T17:09:52.983
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, entity-attribute-value

Rails有[许多可用的 ActiveRecord 版本控制 gem，但大多数（如果](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)[不是](http://airbladesoftware.com/notes/papertrail-transfer)全部）都[难以](https://github.com/laserlemon/vestal_versions/commit/394cf8dd0073af3885aa816af38249c09d725d5a) [维护](https://github.com/technoweenie/acts_as_versioned/graphs/commit-activity)。最重要的是，其中一些似乎有各种[外](https://github.com/airblade/paper_trail/issues/12)[键](https://github.com/airblade/paper_trail/pull/44)[关联](https://github.com/airblade/paper_trail/issues/121)[问题](https://github.com/airblade/paper_trail/issues/148)。

我正在编写一个内容管理系统，其中页面存储在树状层次结构中，页面字段使用[EAV 模型](http://en.wikipedia.org/wiki/Entity-attribute-value_model#Example)存储在单独的表中。

记住这一点，我并不是在寻找一个包罗万象的修订版宝石，因为老实说，我不认为我会找到一个。我正在寻找的是有关如何将其作为自定义实现来处理的一些建议。我应该有一个单独的表来存储修订并在我的 EAV 表中引用修订号吗？我预见这可能会导致一些复杂的验证问题。无论如何，我目前在寻找一种干净的方法来验证常规 EAV 表时遇到问题，因此，如果有人可以对此发表评论，我将不胜感激。

我希望这个问题写得足够好，符合 SO 标准。如果您需要任何其他信息，请随时询问，我会尽力帮助您。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:41:17.837

> 无论如何，我目前在寻找一种干净的方法来验证常规 EAV 表时遇到问题，因此，如果有人可以对此发表评论，我将不胜感激。

没有*一种*干净的方法来验证或约束 EAV 表。这就是 DBA 将其称为[反模式](http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back)的原因。（EAV 从幻灯片 16 开始。）Bill 没有谈论版本，所以我会。

版本控制看起来很简单，但事实并非如此。要对行进行版本化，您可以添加一列。它是版本号还是时间戳并不重要。

```
create table test (
  test_id integer not null,
  attr_ts timestamp not null default current_timestamp,
  attr_name varchar(35) not null,
  attr_value varchar(35) not null,
  primary key (test_id, attr_ts, attr_name)
);

insert into test (test_id, attr_name, attr_value) values
(1, 'emp_id', 1),
(1, 'emp_name', 'Alomar, Anton');

select * from test;

test_id  attr_ts                      attr_name   attr_value
--
1        2012-10-28 21:00:59.688436   emp_id      1
1        2012-10-28 21:00:59.688436   emp_name    Alomar, Anton 
```

尽管它在输出时可能看起来不像，但所有这些属性值都是 varchar(35)。dbms 没有简单的方法来阻止某人输入 'wibble' 作为 emp_id。如果您需要类型检查，则必须在应用程序代码中进行。（而且您必须防止睡眠不足的 DBA 使用 dbms 提供的命令行和 GUI 界面。）

当然，对于规范化表，您只需将 emp_id 声明为整数类型。

使用版本控制，更新 Anton 的名字就变成了插入。

```
insert into test (test_id, attr_name, attr_value) values
(1, 'emp_name', 'Alomar, Antonio'); 
```

使用版本控制，选择有点复杂。您可以使用视图而不是公用表表达式。

```
with current_values as (
  select test_id, attr_name, max(attr_ts) cur_ver_ts
  from test
  -- You'll probably need an index on this pair of columns to get good performance.
  group by test_id, attr_name
)
select t.test_id, t.attr_name, t.attr_value
from test t
inner join current_values c 
        on c.test_id = t.test_id
       and c.attr_name = t.attr_name
       and c.cur_ver_ts = t.attr_ts

test_id   attr_name   attr_value
--
1         emp_id      1
1         emp_name    Alomar, Antonio 
```

100 万行和 8 个不可为空的列的规范化表有 100 万行。一个类似的 EAV 表有 800 万行。一个版本化的 EAV 表有 800 万行，加上对每个值和每个属性名称的每次更改都有一行。

存储版本号并加入包含当前值的第二个表并不会获得太多收益（如果有的话）。每个（传统）插入都需要插入两个表。一行 8 列变成 16 行（两个表各有 8 个）。

选择稍微简单一些，只需要一个连接。

# java - JPA @SecondaryTable 外键违规

> ID：13035745
> 
> 赞同：0
> 
> 时间：2012-10-23T17:10:00.707
> 
> 标签：java, hibernate, jpa, orm, mapping

我想以一种`one to many`方式映射两个实体。

```
A->[B, B] 
```

我想添加 `join table`更多字段。`Pojos`好像：

```
@Entity
@Table(name = "A", schema = "examples")
@SecondaryTable(name = "A_B", pkJoinColumns = @PrimaryKeyJoinColumn(name = "a_id", referencedColumnName = "id"))
public class A
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @Basic
    private String name;

    @Basic
    private Integer field1;

    @Column(table = "A_B", name = "field2")
    private Integer field2;

    @OneToMany(cascade = {CascadeType.ALL})
    @JoinTable(name = "A_B", joinColumns = {@JoinColumn(name = "a_id")}, inverseJoinColumns = {@JoinColumn(name = "b_id")})
    private List<B> datastores;
}

@Entity
@Table(name = "B", schema = "examples")
@SecondaryTable(name = "A_B", pkJoinColumns = @PrimaryKeyJoinColumn(name = "b_id", referencedColumnName = "id"))
public class B
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @Basic
    private String field1;

    @Basic
    private int field2;

    @Column(table = "A_B", name = "field3")
    private int field3;
} 
```

事情是，为了添加，我必须删除`foreign key`桌面`A_B`。如何解决映射以允许`foreign keys`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:35:50.930

我遗漏了一些东西，但我不明白为什么实体 A 和实体 B 都映射到表“A_B”。通过将其作为辅助表添加到实体 A 中，您是在声明每次对表 a 进行插入时，也必须对表 A_B 进行插入 - 在两个表中的行之间创建严格的 1:1 关系。除了你对实体 B 做同样的事情，所以你最终会得到 A_B 中的行，A_id=somevalue，B_id=null 和其他的 a_id=null 而 b_id=somevalue。表“A_B”看起来像一个关系表，所以这可能不是您想要的。

如果 A_B 是一个关系表，您应该使用 ManyToMany 映射它，就像“A_B”表一样。如果有额外的字段需要填充，创建一个 AB Entity，并从 A->AB 和 B->AB 创建一个 OneToMany，从 AB->A 和 AB->B 创建一个 ManyToOne。

# list - 方案：这两个列表是否具有相同的内存表示？

> ID：13035750
> 
> 赞同：3
> 
> 时间：2012-10-23T17:10:09.663
> 
> 标签：list, memory, scheme, representation

我正在使用 Scheme 语言的 R5RS 标准。

请看一下这两个对象：

1.  `(1 (2 . 3))`
2.  `(1 2 . 3)`

它们是否具有相同的内存表示？像这样（一）： ![在此处输入图像描述](../Images/2a3bed1dcc76494644165eec2bdb3543.png)

还是第一个不一样？像这样（B）：![在此处输入图像描述](../Images/943c41f0ddef0ffc9da1a7d18ac14b01.png)

所以...什么是正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:35:58.987

他们是不同的。第一个列表是这样构造的，对应“B”图：

```
(cons 1
      (cons (cons 2 3)
            '()))

> '(1 (2 . 3)) 
```

而第二个列表结构是这样构造的，对应于“A”图：

```
(cons 1
      (cons 2 3))

> '(1 2 . 3) 
```

另请注意，第二个不是*正确的列表*（意思是：以 结尾的列表`null`）。

# javascript - 使 div 贴在屏幕顶部，但如果向上滚动，返回到原来的位置？

> ID：13035752
> 
> 赞同：0
> 
> 时间：2012-10-23T17:10:22.067
> 
> 标签：javascript, css

当滚动到某个点（从 div 到页面顶部的距离）时，这将使页面上的 position: absolute ( top: 46px ) 的 div 固定到页面顶部 ( top: 0px )

```
$(window).scroll(function (e) {
    $el = $('#sticky');
    if ($(this).scrollTop() > 46 && $el.css('position') != 'fixed') {
        $('#sticky').css({
            'position': 'fixed',
            'top': '0px'
        });
    }
}); 
```

但是当您回到页面顶部时，它不会重置 div 的位置，我想要它。有什么建议么？此外，我想确保这是做到这一点的最佳方式——如果只有 css、非 javascript 解决方案，我会全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:31:09.097

我建议将粘性内容保持固定或绝对，但不要在两者之间切换。

固定：http: [//jsfiddle.net/CpM8H/2/](http://jsfiddle.net/CpM8H/2/)

```
$(window).scroll(function (e) {
    $scrollTopDiff = 46 - $(this).scrollTop();

    $('#sticky').css({
        'top': ( $scrollTopDiff > 0 ? $scrollTopDiff : 0 ) + 'px'
    });
}); 
```

绝对：http: [//jsfiddle.net/CpM8H/3/](http://jsfiddle.net/CpM8H/3/)

```
$(window).scroll(function (e) {
    $scrollTop = $(this).scrollTop();

    $('#sticky').css({
        'top': ( $scrollTop > 46 ? $scrollTop : 46 ) + 'px'
    });
}); 
```

如果您真的需要在固定和绝对之间切换，这是我的第一个关于如何做到这一点的内容，但粘性内容可能会跳动一点：

```
$(window).scroll(function (e) {
$el = $('#sticky');
if ($(this).scrollTop() > 46 ) {
    $el.css({
        'position': 'fixed',
        'top': '0px'
    });
} else {
    $el.css({
        'position': 'absolute',
        'top': '46px'
    });
}
}); 
```

# ruby-on-rails - ActiveRecord 关联和范围哦，我的

> ID：13035757
> 
> 赞同：2
> 
> 时间：2012-10-23T17:10:44.450
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, scopes

我试图弄清楚如何从多个表中提取数据并理解它。

我有`events`,`occurrences`和`venues`表。

以下是迄今为止的模型/协会：

模型/事件.rb：

```
class Event < ActiveRecord::Base
 has_many :occurences, :dependent => :destroy
 belongs_to :price
 belongs_to :venue
 validates_presence_of :venue
end 
```

模型/地点.rb：

```
class Venue < ActiveRecord::Base
 has_many :events, :dependent => :destroy
end 
```

模型/occurrence.rb：

```
class Occurence < ActiveRecord::Base
 belongs_to  :event
 scope :today, lambda { where("occurence.datetime_start <= ? AND datetime_end >= ?", Time.now.end_of_day, Time.now) }
 scope :this_week, lambda { where("occurence.datetime_start <= ? AND datetime_end <= ?", Time.now.end_of_day, Time.now.at_end_of_week) }
 scope :next_week, lambda { where("occurence.datetime_start > ? AND datetime_end < ?", Time.now.at_end_of_week, Time.now.at_end_of_week + 1.weeks) }
 scope :this_month, lambda { where("occurence.datetime_start <= ? AND datetime_end >= ?", Time.now.end_of_day, Time.now.at_end_of_month) }
 scope :next_month, lambda { where("occurence.datetime_start >= ? AND datetime_end <= ?", Time.now.at_beginning_of_month + 1.months, Time.now.at_end_of_month + 1.months) }
end 
```

我想在我的 view/events/index.html.erb 中显示的是今天发生的所有事件的表格，我喜欢这样做：

```
<% @events.today.each do |event|  %> 
```

并显示与`.today`范围匹配的所有事件。

我尝试将范围移动到`event`模型无济于事。我应该将范围移动到事件模型吗？到目前为止，我的搜索已经引导我到“[使用范围在 ActiveRecord 中的多个 DateTime 范围内返回结果](https://stackoverflow.com/questions/11751011/using-scope-to-return-results-within-multiple-datetime-ranges-in-activerecord)”和“ [Rails 3.0 中的多个范围](https://stackoverflow.com/questions/7007547/multiple-scope-in-rails-3-0)”，但我真的无法从中做出任何事情。

谁能指出我正确的方向？我应该在我的事件模型中创建一个新函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:22:05.857

```
class Event < ActiveRecord::Base
  has_many :occurences, :dependent => :destroy
  belongs_to :price
  belongs_to :venue
  validates_presence_of :venue

  scope :today, lambda {
    joins(:occurences).where("datetime_start <= ? AND datetime_end >= ?", Time.now.end_of_day, Time.now)
  }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:27:55.667

如果你希望你的语法像这样工作：

```
@events.today 
```

然后范围必须在`Event`模型中。

如果你没问题：

```
@event.occurences.today 
```

那么你现在可以了，即：

```
@events = Event.all
@events.each do |ev|
   ev.occurences.today.each do |oc|
   end
end 
```

# node.js - Node.js 本机模块不是有效的 Win32 应用程序错误

> ID：13035760
> 
> 赞同：18
> 
> 时间：2012-10-23T17:10:55.013
> 
> 标签：node.js, native, iisnode

尝试为 node.js 制作 Hello World 本机模块

在 VS 2012 中获得了一个带有一个文件的 Win32 项目：

```
#include <node.h>
#include <v8.h>

using namespace v8;

Handle<Value> Method(const Arguments& args) {
  HandleScope scope;
  return scope.Close(String::New("world"));
}

void init(Handle<Object> target) {
  target->Set(String::NewSymbol("hello"),
      FunctionTemplate::New(Method)->GetFunction());
}
NODE_MODULE(hello, init) 
```

编译成 hello.node。
选项：
- 动态库 (.dll)
- 无公共语言运行时支持

像这样使用它：

```
hello = require './hello'
console.log hello.hello() 
```

它适用于本地机器（win8 x64，节点：0.8.12）
但在远程服务器（windows server 2008 x64，节点：0.8.12，iisnode：0.1.21 x64，iis7）上会抛出此错误：

> 应用程序引发了未捕获的异常并被终止：错误：
> %1 不是有效的 Win32 应用程序。
> 
> C:\inetpub\test\lib\server\hello.node
> 在 Object.Module._extensions..node (module.js:485:11)
> 在 Module.load (module.js:356:32)
> 在 Function.Module。 _load (module.js:312:12)
> 在 Module.require (module.js:362:17)
> 在 require (module.js:378:17)
> 在 Object. (C:\inetpub\test\lib\server\index.js:32:9)
> 在 Module._compile (module.js:449:26)
> 在 Object.Module._extensions..js (module.js:467:10 )
> 在 Module.load (module.js:356:32)
> 在 Function.Module._load (module.js:312:12)

我尝试了什么：
使用应用程序池设置（启用 win32 应用程序）没有帮助。
iisnode x86 不安装在 x64 操作系统上。
由于错误无法编译到 x64：错误 2 错误 LNK1112：模块机器类型“X86”与目标机器类型“x64”冲突 C:\derby\hello\build\node.lib(node.exe) hello

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T20:08:26.280

我不知道是否为时已晚，但经过反复试验，我找到了答案，主要是问题（在我的机器上）是我在 windows 上编译了 nodejs 以便能够使用 Visual C++ 创建扩展，我已经有了从页面安装nodejs，如果我尝试使用默认安装（由nodejs安装程序添加到我的PATH）运行测试，那么它会失败，但是如果我使用编译的node.exe（我编译为能够引用 Visual C++ 中的库）然后它可以工作。

总之，问题不在于扩展，而在于 nodejs 编译，使用您编译的节点（为了构建 VS 解决方案，我假设您这样做了），然后它应该可以在远程机器上运行。

注意：问题取决于您使用 64 位编译的 node.exe 来运行 32 位 dll，这就是它抱怨的原因，如果您使用 32 位的 node.exe 它应该可以工作。（至少这解决了我的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-27T22:16:44.693

就我而言，问题是试图在 Windows 上执行一个使用 Linux 构建的 Electron 应用程序（适用于 Windows）。我通过使用 Windows 构建它（对于 Windows）来解决。

为了在 Windows 上构建它，我使用了以下命令：

```
npm install --global-production windows-build-tools
npm install
npm run build:prod && electron-builder build --windows 
```

要执行你需要的最后一个命令**electron-builder**，如果你没有安装它

```
npm install --save-dev electron-builder 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T06:23:45.307

只是遇到了同样的问题，即使我的节点和插件的架构相同，我也收到了类似的错误消息。事实证明，您无法重命名节点可执行文件。它必须是`node.exe`，我试图同时测试多个版本，所以我不得不把它们放在他们自己的文件夹中。之后一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-20T14:30:25.193

使用 Electron Forge webpack typescript 样板。这对我有用：

在`webpack.main.config.js`添加`externals: ['sqlite3']`：

```
module.exports = {
  /**
   * This is the main entry point for your application, it's the first file
   * that runs in the main process.
   */
  entry: './src/electron-entrypoint.ts',
  // Put your normal webpack config below here
  module: {
    rules: require('./webpack.rules'),
  },
  resolve: {
    extensions: ['.js', '.ts', '.jsx', '.tsx', '.css', '.json']
  },
  externals: ['sqlite3']
}; 
```

[资源](https://github.com/electron-userland/electron-forge/issues/575#issuecomment-422877001)

或者-这也对我有用-，您可以使用[better-sqlite3 ，](https://github.com/JoshuaWise/better-sqlite3)[如此](https://github.com/electron-userland/electron-forge/issues/575#issuecomment-630739541)处所建议

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-12T19:47:19.500

与您的问题无关：`Error: %1 is not a valid Win32 application`尝试执行扩展名为“.node”的脚本时出现相同的错误（），例如`node.exe example.node`。其他扩展名（.js、.txt、根本没有扩展名）工作正常。

# javascript - 使用 getJSON 获取 json 中的数据

> ID：13035762
> 
> 赞同：1
> 
> 时间：2012-10-23T17:10:55.887
> 
> 标签：javascript, jquery, json, parsing, twitter

我想获取用户名的个人资料图片。所以我更喜欢为此使用 twitter api 版本 1。（api 的常规版本在[这里](https://dev.twitter.com/docs/api/1/get/users/show)）。但我的代码不返回任何数据。我怎样才能解决这个问题？

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
$(document).ready( function() {   
var userPage = "https//twitter.com/jack"; 
var arr = userPage.split("/");
var username = "";

for(i=3;i<4;i++)
username += arr[i];

var page = 'https://api.twitter.com/1/users/show.json?screen_name='+username;

        $.getJSON(page, function(data) {
            alert(data.profile_image_url);
        });

})

</script>
</head>

<body>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:22:29.860

添加`"&callback=?"`到 URL 以强制 jsonp 格式绕过 Access-Control-Allow-Origin 问题。

```
var page = 'https://api.twitter.com/1/users/show.json?screen_name='+username + "&callback=?"; 
```

**[例子](http://jsfiddle.net/XCzF4/)**

**[JSONP](http://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/)**：

> JSONP 的工作方式很简单，但需要一点服务器端的配合。基本上，这个想法是让客户端决定将一小块任意文本添加到 JSON 文档中，然后将其包裹在括号中以创建有效的 JavaScript 文档（可能还有有效的函数调用）。
> 
> 客户端通过使用名为 jsonp 的查询参数和要添加的文本来决定任意添加的文本。简单的！使用空的 jsonp 参数，结果文档只是用括号括起来的 JSON。

# python - 删除具有重复索引的 pandas 行

> ID：13035764
> 
> 赞同：372
> 
> 时间：2012-10-23T17:11:04.333
> 
> 标签：python, pandas, dataframe, duplicates

如何删除具有重复索引值的行？

在下面的天气 DataFrame 中，有时科学家会返回并更正观察结果——不是通过编辑错误的行，而是通过在文件末尾附加重复的行。

我正在从网上读取一些自动天气数据（观测每 5 分钟发生一次，并为每个气象站编译成每月文件。）解析文件后，DataFrame 如下所示：

```
 Sta  Precip1hr  Precip5min  Temp  DewPnt  WindSpd  WindDir  AtmPress
Date                                                                                      
2001-01-01 00:00:00  KPDX          0           0     4       3        0        0     30.31
2001-01-01 00:05:00  KPDX          0           0     4       3        0        0     30.30
2001-01-01 00:10:00  KPDX          0           0     4       3        4       80     30.30
2001-01-01 00:15:00  KPDX          0           0     3       2        5       90     30.30
2001-01-01 00:20:00  KPDX          0           0     3       2       10      110     30.28 
```

重复案例示例：

```
import pandas 
import datetime

startdate = datetime.datetime(2001, 1, 1, 0, 0)
enddate = datetime.datetime(2001, 1, 1, 5, 0)
index = pandas.DatetimeIndex(start=startdate, end=enddate, freq='H')
data1 = {'A' : range(6), 'B' : range(6)}
data2 = {'A' : [20, -30, 40], 'B' : [-50, 60, -70]}
df1 = pandas.DataFrame(data=data1, index=index)
df2 = pandas.DataFrame(data=data2, index=index[:3])
df3 = df2.append(df1)

df3
                       A   B
2001-01-01 00:00:00   20 -50
2001-01-01 01:00:00  -30  60
2001-01-01 02:00:00   40 -70
2001-01-01 03:00:00    3   3
2001-01-01 04:00:00    4   4
2001-01-01 05:00:00    5   5
2001-01-01 00:00:00    0   0
2001-01-01 01:00:00    1   1
2001-01-01 02:00:00    2   2 
```

所以我`df3`最终需要成为：

```
 A   B
2001-01-01 00:00:00    0   0
2001-01-01 01:00:00    1   1
2001-01-01 02:00:00    2   2
2001-01-01 03:00:00    3   3
2001-01-01 04:00:00    4   4
2001-01-01 05:00:00    5   5 
```

`df3['rownum'] = range(df3.shape[0])`我认为添加一列行`DatetimeIndex`号`group_by`（`pivot`

* * *

## 回答 #1

> 赞同：686
> 
> 时间：2015-12-15T19:25:20.687

我建议在 Pandas 索引本身上使用[重复的方法：](http://pandas.pydata.org/pandas-docs/version/0.17.1/generated/pandas.Index.duplicated.html)

```
df3 = df3[~df3.index.duplicated(keep='first')] 
```

虽然所有其他方法都有效，`.drop_duplicates`但对于所提供的示例来说，这是迄今为止性能最低的。此外，虽然[groupby 方法](https://stackoverflow.com/a/13036848/3622349)的性能稍差一些，但我发现重复的方法更具可读性。

使用提供的样本数据：

```
>>> %timeit df3.reset_index().drop_duplicates(subset='index', keep='first').set_index('index')
1000 loops, best of 3: 1.54 ms per loop

>>> %timeit df3.groupby(df3.index).first()
1000 loops, best of 3: 580 µs per loop

>>> %timeit df3[~df3.index.duplicated(keep='first')]
1000 loops, best of 3: 307 µs per loop 
```

请注意，您可以通过将 keep 参数更改为 来保留最后一个元素`'last'`。

还应注意，此方法也适用（使用[Paul 示例](https://stackoverflow.com/a/13036848/3622349)`MultiIndex`中指定的 df1 ）：

```
>>> %timeit df1.groupby(level=df1.index.names).last()
1000 loops, best of 3: 771 µs per loop

>>> %timeit df1[~df1.index.duplicated(keep='last')]
1000 loops, best of 3: 365 µs per loop 
```

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2013-02-15T17:27:14.987

这会将索引添加为 DataFrame 列，删除重复项，然后删除新列：

```
df = (df.reset_index()
        .drop_duplicates(subset='index', keep='last')
        .set_index('index').sort_index()) 
```

请注意，最后使用`.sort_index()`above 是根据需要并且是可选的。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2012-10-23T18:27:46.077

天啊。这其实很简单！

```
grouped = df3.groupby(level=0)
df4 = grouped.last()
df4
                      A   B  rownum

2001-01-01 00:00:00   0   0       6
2001-01-01 01:00:00   1   1       7
2001-01-01 02:00:00   2   2       8
2001-01-01 03:00:00   3   3       3
2001-01-01 04:00:00   4   4       4
2001-01-01 05:00:00   5   5       5 
```

**跟进编辑 2013-10-29** 在我有一个相当复杂的情况下`MultiIndex`，我想我更喜欢这种`groupby`方法。这是后代的简单示例：

```
import numpy as np
import pandas

# fake index
idx = pandas.MultiIndex.from_tuples([('a', letter) for letter in list('abcde')])

# random data + naming the index levels
df1 = pandas.DataFrame(np.random.normal(size=(5,2)), index=idx, columns=['colA', 'colB'])
df1.index.names = ['iA', 'iB']

# artificially append some duplicate data
df1 = df1.append(df1.select(lambda idx: idx[1] in ['c', 'e']))
df1
#           colA      colB
#iA iB                    
#a  a  -1.297535  0.691787
#   b  -1.688411  0.404430
#   c   0.275806 -0.078871
#   d  -0.509815 -0.220326
#   e  -0.066680  0.607233
#   c   0.275806 -0.078871  # <--- dup 1
#   e  -0.066680  0.607233  # <--- dup 2 
```

**这是重要的部分**

```
# group the data, using df1.index.names tells pandas to look at the entire index
groups = df1.groupby(level=df1.index.names)  
groups.last() # or .first()
#           colA      colB
#iA iB                    
#a  a  -1.297535  0.691787
#   b  -1.688411  0.404430
#   c   0.275806 -0.078871
#   d  -0.509815 -0.220326
#   e  -0.066680  0.607233 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-30T18:00:57.600

删除重复项（保持第一）

```
idx = np.unique( df.index.values, return_index = True )[1]
df = df.iloc[idx] 
```

删除重复项（保持最后）

```
df = df[::-1]
df = df.iloc[ np.unique( df.index.values, return_index = True )[1] ] 
```

测试：使用 OP 数据的 10k 循环

```
numpy method - 3.03 seconds
df.loc[~df.index.duplicated(keep='first')] - 4.43 seconds
df.groupby(df.index).first() - 21 seconds
reset_index() method - 29 seconds 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-28T05:17:36.360

不幸的是，我认为 Pandas 不允许人们从索引中删除重复数据。我建议如下：

```
df3 = df3.reset_index() # makes date column part of your data
df3.columns = ['timestamp','A','B','rownum'] # set names
df3 = df3.drop_duplicates('timestamp',take_last=True).set_index('timestamp') #done! 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-26T11:05:46.357

如果像我这样的人喜欢使用 pandas 点表示法（如管道）的可链接数据操作，那么以下内容可能有用：

```
df3 = df3.query('~index.duplicated()') 
```

这启用了这样的链接语句：

```
df3.assign(C=2).query('~index.duplicated()').mean() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-06T01:57:19.353

我遇到过同样的错误，在深入研究每个 df 之后，结果发现其中有 2 个具有相同名称的列，你提到你删除了一些列，这可能是一个原因。

# jsp - 检查字段是否生成错误

> ID：13035765
> 
> 赞同：9
> 
> 时间：2012-10-23T17:11:03.780
> 
> 标签：jsp, struts2, struts-tags

我可以使用此标签显示特定字段的错误：

```
<s:fielderror fieldName="myField" /> 
```

但除了显示错误消息之外，我还想以红色突出显示该字段。为此，我需要知道某个字段是否产生了错误，然后将错误类添加到该字段。

如何检查特定字段是否产生了错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T18:29:08.740

字段的错误存储在`fieldErrors`地图中。`<s:if>`因此，您可以像这样检查标签中的特定字段错误

```
<s:if test="fieldErrors.containsKey('fieldName')"> 
```

# wpf - 添加了新项目的列表框幻灯片动画

> ID：13035766
> 
> 赞同：13
> 
> 时间：2012-10-23T17:11:06.047
> 
> 标签：wpf, animation, listbox

我正在处理新闻提要。这会经常更新，如果发现新项目，我想从顶部滑入新内容。

现在，我只是通过执行以下操作让它淡入淡出：

```
<ListBox Grid.Row="0" Height="Auto" HorizontalAlignment="Stretch" Margin="5,5,5,5"  VerticalAlignment="Top" ItemsSource="{Binding NewsItems,UpdateSourceTrigger=PropertyChanged}" >
        <ListBox.ItemContainerStyle>                
            <Style TargetType="{x:Type ListBoxItem}">                    
                <Style.Triggers>                                        
                        <EventTrigger RoutedEvent="Loaded">
                        <EventTrigger.Actions>                                
                            <BeginStoryboard>
                                <Storyboard>                                      
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:2" />     
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger.Actions>
                    </EventTrigger>
                </Style.Triggers>
            </Style>
            </ListBox.ItemContainerStyle>
        <ListBox.ItemTemplate>    
        ....
</ListBox> 
```

这很好用，但我真的很想把这个项目滑进去。我已经尝试了我能找到的所有可能的东西，但无法到达任何地方。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-24T02:50:53.937

这是你要找的吗？

```
 <ListBox x:Name="lstBox" Grid.Row="0" Height="Auto" HorizontalAlignment="Stretch" Margin="5,5,5,5"  VerticalAlignment="Top" ItemsSource="{Binding NewsItems,UpdateSourceTrigger=PropertyChanged}" >
        <ListBox.ItemContainerStyle>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="LayoutTransform">
                    <Setter.Value>
                        <ScaleTransform x:Name="transform" />
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                        <EventTrigger.Actions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:2" />
                                    <DoubleAnimation Storyboard.TargetProperty="LayoutTransform.ScaleY" From="0" Duration="0:0:.2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger.Actions>
                    </EventTrigger>
                </Style.Triggers>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox> 
```

# c# - Expression.Invoke - 它有什么作用？

> ID：13035774
> 
> 赞同：1
> 
> 时间：2012-10-23T17:11:34.327
> 
> 标签：c#, expression

[http://msdn.microsoft.com/en-us/library/bb355170.aspx](http://msdn.microsoft.com/en-us/library/bb355170.aspx)

如果该类没有我要调用的委托的 ruslt，我将无法理解它的用途。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T17:12:33.047

`Expression.Invoke`不会立即调用给定的表达式 - 它会创建一个*表示给定表达式调用*的表达式树。这就是[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)的全部意义所在。

如果你想实际*执行*一个表达式树，你需要构建一个`LambdaExpression`，调用[`Compile`](http://msdn.microsoft.com/en-us/library/bb356928.aspx)它（这将构建一个委托），然后调用委托。

# c# - SendInput Ctrl + C 然后通过 Clipboard.GetText 检索复制的内容不起作用

> ID：13035775
> 
> 赞同：1
> 
> 时间：2012-10-23T17:11:46.713
> 
> 标签：c#, winforms, clipboard, sendinput

我有一个带有 a`TextBox`和 a的简单 Windows 窗体应用程序`Button`。单击`Button`将焦点放在`TextBox`并模拟击键`Ctrl + C`以将内容复制到剪贴板。我正在用这个键模拟`SendInput`，也试过了`SendKeys.Send("^c")`。这适用于复制操作，因为我可以通过将内容粘贴到记事本或其他东西来验证。

然后我想以编程方式通过`Clipboard.GetText`. 但是，问题在于此方法似乎总是返回剪贴板中的**先前**值而不是当前值。例如，如果 my 的值序列`TextBox`是：“hello”、“world”，那么输出序列是：junk、“hello”。为了简单起见，以下是我使用该`SendKeys`方法的代码：

```
... highlight TextBox value...

SendKeys.Send("^c");
Thread.Sleep(100);

Console.WriteLine(Clipboard.GetText()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:50:29.077

看起来需要在将文本放入剪贴板之前执行消息循环

尝试使用

```
 Application.DoEvents(); 
```

而不是延迟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T04:25:17.923

```
 SendKeys.SendWait("^c");
 Clipboard.GetText(TextDataFormat.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:36:47.083

试试这个：

```
textBox1.Focus();
Clipboard.SetText(textBox1.Text);
textBox2.Text = Clipboard.GetText(); 
```

# sql - 简单的 TSQL 子句不起作用

> ID：13035776
> 
> 赞同：0
> 
> 时间：2012-10-23T17:11:47.933
> 
> 标签：sql, sybase

我正在尝试完全执行[此 SO 主题](https://stackoverflow.com/questions/1262497/how-to-convert-seconds-to-hhmmss-using-t-sql)的操作，但它不起作用并且不知道为什么。

我的版本如下：

```
select convert(varchar, dateadd(ss, @tracker, 0), 114) 
```

where`@tracker`只是一个`INT`保存一定秒数的变量。

我得到的错误是：`Function DATEADD invoked with wrong number or type of argument(s).`

感谢任何帮助。

我正在使用 Sybase。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:18:40.967

好的，根据[这个文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks136.htm)，你应该使用`ss`：

```
SELECT CONVERT(VARCHAR(12), DATEADD(ss, @tracker, "00:00:00"), 114) 
```

# android - 如何从对话框中获取用户输入？

> ID：13035784
> 
> 赞同：0
> 
> 时间：2012-10-23T17:12:11.377
> 
> 标签：android, dialog

我有一个对话框的布局。当 factory.inflate(R.layout.alert_dialog_text_entry, null); 被调用，当它的根布局膨胀时，我如何从editText获取用户输入？

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView 
        android:id="@+id/username_view"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:text="@string/alert_dialog_username"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/username_edit"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:scrollHorizontally="true"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="fill_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/password_view"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:text="@string/alert_dialog_password"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/password_edit"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:scrollHorizontally="true"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="fill_horizontal"
        android:password="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

**如何从用户输入中获取用户名并在下面的 onClick() 方法中做某事？**

```
 LayoutInflater factory = LayoutInflater.from(this);
    final View textEntryView = factory.inflate(R.layout.alert_dialog_text_entry, null);
    return new AlertDialog.Builder(AlertDialogSamples.this)
        .setIconAttribute(android.R.attr.alertDialogIcon)
        .setTitle(R.string.alert_dialog_text_entry)
        .setView(textEntryView)
        .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                /* User clicked OK so do some stuff */
            }
        })
        .setNegativeButton(R.string.alert_dialog_cancel, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                /* User clicked cancel so do some stuff */
            }
        })
        .create(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:16:53.183

利用

```
EditText et = (EditText)textEntryView.findViewById(R.id.username_edit);
Log.d("TAG", ev.getText()); 
```

由于您已经完成了`textEntryView`决赛，这应该对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:17:58.067

像这样获取 EditText：

```
 EditText userName=(EditText)textEntryView.findViewById(R.id.username_edit); 
```

并在 PositiveButton Click 监听器中，获取 EditText 的值；

用户名.getText().toString();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:19:38.847

尝试这个：

```
EditText userInput = (EditText) findViewById(R.id.yourinputid);
String input = userInput.getText().toString(); 
```

# java - 从一种控制器方法到另一种控制器方法的内部转发（Spring-MVC）

> ID：13035801
> 
> 赞同：0
> 
> 时间：2012-10-23T17:13:23.987
> 
> 标签：java, spring, spring-mvc

我是 Spring 新手，所以不知道如何做到这一点。我必须使用单控制器方法处理 2 个用例。

方法已经到位，所以我不能更改它的签名，因为它会破坏所有其他功能主义者，这里是方法签名

```
@RequestMapping(value = "/edit-address", method = RequestMethod.POST)
    public @ResponseBody JsonResponse editAddress() 
```

`JsonResponse`是具有以下签名的自定义对象

```
private String status;
private Object result;
private String steps; 
```

还有一个要求，我们需要从第三方验证此地址，并根据返回结果需要显示弹出窗口。如果方法签名不是自定义对象，我可以轻松显示弹出窗口，但现在不知道我该怎么做

有没有办法实现以下任何一个

1.  使用此方法将 JSP 内容发送回视图以代替 JSON 对象。
2.  在内部将控制转发到控制器中的另一个方法，该方法可以将视图发送回 UI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:27:30.673

在另一个控制器中组合这个控制器怎么样，你可以控制并将内部调用委托给这个控制器，这样：

```
@Controller
public class WrapperController{
    @Autowired JsonResponseController jsonResponseController;

    @RequestMapping("/custom_jspview")
    public String customRequestMapping(..., Model model){
        JsonResponse jsonResponse = this.jsonResponseController.editAddress();
        model.addAttribute("jsonresponse", "jsonResponse");
        return "myview";
    }

    @RequestMapping("/redirectView")
    public String redirectView(){
         return "redirect:/custom_jspview";
    }
} 
```

# php - 带有证书和对 DotNet WebService 的基本身份验证的 Soapclient

> ID：13035802
> 
> 赞同：2
> 
> 时间：2012-10-23T17:13:28.723
> 
> 标签：php, xml, wcf, web-services, soap-client

我的任务是为第三方的 Web 服务开发一个客户端，我无法访问或处理这些服务器机器和源代码。我所拥有的只是 API 规范和地址。该程序在没有身份验证的情况下在 DevelopEnvironment 上运行良好，但在 ProductionEnvironment 它需要基本的 http 身份验证和证书，然后我什至无法收到任何答案。他们说我可以使用自签名证书，所以我在我的服务器（CentOS Apache2+PHP5.3.3）中创建了一个。

该公司向我发送了一段功能性的 DotNetServiceClient 代码，其中包括链接如下的 app.config。

我需要一些示例来说明如何在 PHP SoapClient 或 CURL 中发送此身份验证以及更多证书。

这是 C# 应用程序的 app.config，带有假 IP 和证书： http: [//pastebin.com/Jt9k6DB0](http://pastebin.com/Jt9k6DB0)

这是我当前的客户端代码：

```
/* PHP WebService Client */

$pemPath   = '/my/certificate/directory/selfsignedcertificate/thatwebservice.pem';
$pemBuffer = file_get_contents($pemPath);

$connectionParameters = array(
    'login'        => 'login',
    'password'     => 'password',
    'trace'        => TRUE,
    'encoding'     => 'UTF-8',
    'exceptions'   => TRUE,
    'cache_wsdl'   => WSDL_CACHE_NONE,
    'soap_version' => SOAP_1_2,
    'local_cert'   => $pemBuffer,
    'passphrase'   => 'd3e343der434wds',
);

$theClient = new SoapClient($serverWSDLURL, $connectionParameters);
$r         = $theClient->GetBasicWorkData(); 
```

答案：没有答案！只有超时。

我改编了从这两个 StackOverflow 主题中获取的信息：

1.  [如何将 PHP5 SoapClient::SoapClient() 与客户端证书一起使用？](https://stackoverflow.com/questions/3346039/how-to-use-php5-soapclientsoapclient-with-client-certificate)
2.  [SoapClient 不发送证书](https://stackoverflow.com/questions/11187646/soapclient-not-sending-certificate)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T20:36:51.487

最后，他们的生产服务器无法正常工作，他们更改了几个设置和参数。我使用了简单的 CURL 基本 http 身份验证，并且完成了。

# javascript - 将 URL 动态传递给 asp.net 中的窗口媒体控件

> ID：13035806
> 
> 赞同：0
> 
> 时间：2012-10-23T17:13:44.967
> 
> 标签：javascript, asp.net, .net

这是我用来设置 wm 控件的代码

```
<asp:HiddenField ID="hfNameOfFile" Value='0' runat="server" />
                            <div id="mediaPlayerDiv">
                                <object id="mediaPlayer1" classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" width="350"
                                    height="70" standby="Loading Microsoft Windows Media Player components..." type="application/x-oleobject">
                                    <param name="fileName" value="0">
                                    <param name="animationatStart" value="true">
                                    <param name="transparentatStart" value="true">
                                    <param name="loop" value="false">
                                    <param name="ShowDisplay" value="false">
                                    <param name="ShowStatusBar" value="true">
                                    <param name="volume" value="200" />
                                </object>
                            </div> 
```

我已经编写了一个代码，它的 java 脚本做了一些我不明白的事情，下面是 java 脚本。

```
 function pageLoad() {
                try {

                    document.getElementById('mediaPlayerDiv').innerHTML = '<object id="mediaPlayer1" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="350" '
                                                                            + ' height="70" standby="Loading Microsoft Windows Media Player components..." type="application/x-oleobject" >'
                                                                            + '<param name="URL" value="' + $('#<%=hfNameOfFile.ClientID %>').val() + '" />'
                                                                            + '<param name="animationatStart" value="true" /> '
                                                                            + '<param name="transparentatStart" value="true" /> '
                                                                            + '<param name="loop" value="false" /> '
                                                                            + '<param name="autoStart" value="True" /> '
                                                                            + '<param name="ShowDisplay" value="false" /> '
                                                                            + '<param name="ShowStatusBar" value="true" /> '
                                                                            + '<param name="volume" value="50" /> '
                                                                            + '<param name="uimode" value="full" /> '
                                                                            + ' </object> ';

                    document.getElementById('mediaPlayer1').controls.stop(); 
```

我有两个主要问题，我不明白这个javascript在做什么，特别是设置url值的部分。第二个问题是我应该如何将 url 值从后面的代码动态发送到 div 中的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:30:18.493

我自己想出了办法

```
 <object id="mediaPlayer1" classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" width="350"
                                height="70" standby="Loading Microsoft Windows Media Player components..." type="appli
  ...
<param name="filename" VALUE='<%= MyURL %>'>
 ...
 </object> 
```

然后在我后面的代码中

```
 MyUrl = "http://foo/foo.mpg"; 
```

# php - MySQL Query 在 phpMyAdmin 中有效，但在 php 脚本中无效

> ID：13035807
> 
> 赞同：1
> 
> 时间：2012-10-23T17:13:50.600
> 
> 标签：php

我有一个在 phpMyAdmin 中运行的查询，它返回结果，但如果我将查询剪切并粘贴到网页上的 php 脚本中，查询似乎运行但页面上没有显示任何内容。它也没有完成加载页面。该页面在我的查询开始的地方结束。与通过 phpMyAdmin 运行的查询相比，基于 Web 的查询的执行时间是否可能太长？这是查询：

```
$query = "SELECT DISTINCT tblCertificates.WebReportedDt, tblInsHeader.name1, tblInsHeader.name2, tblQuotes.certnum, tblQBalloons.regnum
FROM ((`tblQuotes`
INNER JOIN `tblInsHeader` ON tblQuotes.insuredid = tblInsHeader.insuredid)
INNER JOIN `tblQBalloons` ON tblQuotes.quoteid = tblQBalloons.quoteid)
INNER JOIN `tblCertificates` ON tblQuotes.quoteid = tblCertificates.QuoteID
WHERE (((tblCertificates.WebReportedDt) IS NOT NULL)AND ((tblCertificates.web) = True) AND tblCertificates.WebReportedDt >= '".$MyDate."')
ORDER BY tblCertificates.WebReportedDt DESC , tblInsHeader.name1, tblQuotes.certnum, tblQBalloons.regnum";
$results = mysql_query($query) or die("Query Timed out");
  while ($r = mysql_fetch_array($results)) {
extract ($r);
 echo $WebReportedDt." - ".$name1." ".$name2." - ".$certnum." - ".$regnum."<br>";
} 
```

MyDate var 是 DATETIME 格式的当前日期 (YYYY-mm-dd HH:ii:ss)。

任何想法都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:08:37.753

感谢您的建议。原来我需要增加执行时间。查询时间过长，php 超时。

# css - CSS 在“位置：固定”元素处具有“真实”空间（上一个元素不与当前固定元素重叠）

> ID：13035809
> 
> 赞同：3
> 
> 时间：2012-10-23T17:13:51.857
> 
> 标签：css, fixed, space, overlap

我有一个带有两个水平列（左侧是固定的）和一个底部页脚（也是固定的）的布局，它位于第二个（内容）列的下方。

当我将边框应用到第二个（内容）列时，我让它通过页脚到达页面底部，而我需要它的底部边框在页脚上方约 50px 处。

我需要这个，因为我要将背景图像应用于内容，它不应该通过（甚至触摸）页脚和左列（现在这不是问题）

有人请帮我解决我的问题。

这是一个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <style type="text/css">
            html
            {
                height:100%; 
                max-height:100%;  
                padding:0; 
                margin:0; 
                border:0; 
                background:#fff -18px 0 no-repeat; 
                overflow: hidden; 
            }

            body
            {
                height:100%;
                max-height:100%;
                overflow:hidden;
                padding:0;
                margin:0;
                border:0;
            }

            #content
            {
                display:block;
                height:100%;
                max-height:100%;
                overflow:auto;
                padding-left:240px;
                position:relative;
                z-index:3;
            }

            #head
            {
                position:fixed;
                margin:0;
                top:0;
                right:18px;
                display:block;
                width:100%;
                height:100px;
                background:#ddd;
                z-index:5;
                color:#fff;
            }

            #foot
            {
                position:fixed;
                margin:0px;
                bottom:-1px;
                right:18px;
                display:block;
                width:80%;
                height:50px;
                background:rgb(214,100,50);
                color:#fff;
                text-align:right;
                z-index:4;
            }

            #left
            {
                position:fixed;
                left:0;
                top:0;
                height:100%;
                width:200px;
                background:#aaa;
                background-position:0 100px;
                color:#fff;
            }

            * html #head, * html #foot,* html #left
            {
                position:absolute;
            }

            #pad1
            {
                display:block;
                width:18px;
                height:100px;
                float:left;
            }
            #pad3
            {
                display:block;
                width:18px;
                height:50px;
                float:left;
            }
            .pad2
            {
                display:block;
            }
        </style>
    </head>

    <body>

        <div id="foot">
            <div id="pad3"></div>
            <br />
            {footer}
        </div>

        <div id="left">
            <div class="pad2"></div>
            {menu}
        </div>

        <div id="content">
            <div style="border:2px solid blue;">
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
              text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />

            </div>
        </div>
    </body>
</html> 
```

如果有人能帮助我，我将非常感激。

这是我的问题的图像链接（视觉）：http: [//postimage.org/image/h46ilcfgr/](http://postimage.org/image/h46ilcfgr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:25:15.780

由于您的页脚是固定高度，因此您可以使用边距来获得所需的内容。

我变了

```
<div style="border:2px solid blue;"> 
```

至

```
<div style="border:2px solid blue; margin-bottom:75px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T13:04:29.633

在页脚下添加了一个元素，但在带有背景颜色的#content 之上：#fff，包含另一个具有 240 px 左边距和蓝色边框顶部的元素。

删除了由于滚动条而导致的#footer {right:18px}（滚动条可以不同，请参阅[如何计算滚动条的宽度？](https://stackoverflow.com/questions/8079187/how-to-calculate-the-width-of-the-scroll-bar)了解如何计算它）

使内容在body中流动，所以使用的滚动条就是body之一。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style type="text/css">
        html
        {
            height:100%; 
            max-height:100%;  
            padding:0; 
            margin:0; 
            border:0; 
            background:#fff -18px 0 no-repeat; 

        }

        body
        {
            height:100%;
            max-height:100%;

            padding:0;
            margin:0;
            border:0;
        }

        #content
        {
            display:block;

            padding-left:240px;
            position:relative;
            z-index:3;
        }

        #head
        {
            position:fixed;
            margin:0;
            top:0;
            right:18px;
            display:block;
            width:100%;
            height:100px;
            background:#ddd;
            z-index:5;
            color:#fff;
        }

        #foot
        {
            position:fixed;
            margin:0px;
            bottom:-1px;
            right:0;
            display:block;
            width:80%;
            height:50px;
            background:rgb(214,100,50);
            color:#fff;
            text-align:right;
            z-index:5;
        }

        #left
        {
            position:fixed;
            left:0;
            top:0;
            height:100%;
            width:200px;
            background:#aaa;
            background-position:0 100px;
            color:#fff;
            z-index:6;
        }

        * html #head, * html #foot,* html #left
        {
            position:absolute;
        }

        #pad1
        {
            display:block;
            width:18px;
            height:100px;
            float:left;
        }
        #pad3
        {
            display:block;
            width:18px;
            height:50px;
            float:left;
        }
        .pad2
        {
            display:block;
        }

        #underfooter{ background-color:#fff; position:fixed; bottom:0; width:100%; height:100px; z-index:4; }
        #underfooter .padding{ margin-left:240px; border-style:solid; border-width:2px 0 0; border-color:blue; }
    </style>
</head>

<body>

    <div id="foot">
        <div id="pad3"></div>
        <br />
        {footer}
    </div>

    <div id="underfooter">
        <div class="padding">
        {under footer}
        </div>
    </div>

    <div id="left">
        <div class="pad2"></div>
        {menu}
    </div>

    <div id="content">
        <div style="border:2px solid blue;">
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />
          text, text, text, text, text, text, text, text, text, text, text, text, text, text, text<br />

        </div>
    </div>
</body> 
```

# tcl - TCL如何避免自动退货

> ID：13035811
> 
> 赞同：0
> 
> 时间：2012-10-23T17:14:04.920
> 
> 标签：tcl

我是 TCL 新手，我想在不将任何中间结果返回到屏幕的情况下运行我的脚本（除非被要求这样做）。TCL如何停止自动退货？让我用一个简单的例子问我的问题

```
set a 10 
```

这会将“10”返回到屏幕。我想知道如何在命令执行后停止这种自动返回。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:01:41.617

```
proc main {} {
    return
}
main 
```

`tclsh test.tcl`: 它真的不会打印任何东西。但是，仅包含`set a 10`. 您需要探索运行 REPL 样式界面（读取、评估、打印、循环）的交互式解释器与评估脚本的非交互式解释器之间的区别。

在交互式会话中，您可以在行尾添加垃圾命令以抑制输出。例如，如果您必须读取一个大字符串 - 为了避免将其打印到控制台，您可以使用：`set data [read $filehandle]; string length $data`

# django - Django 组和权限应该是硬编码还是引导？

> ID：13035813
> 
> 赞同：8
> 
> 时间：2012-10-23T17:14:20.707
> 
> 标签：django, permissions, bootstrapping, usergroups

我正在构建一个应用程序，假设存在某些组及其工作流程的权限。例如，“会员”可以登录应用程序并查看和编辑他们的个人数据，但看不到通常会显示在同一屏幕上的注释。“员工”可以查看这些笔记并创建或编辑自己的笔记，但只有“会员管理员”可以删除或编辑任何人的笔记。

我的问题是为这个应用程序引导数据。我可以为组创建 JSON 夹具数据，但是我必须对 PK 进行硬编码，这似乎是一种不好的做法（如果我想使用的第三方应用程序做了同样的事情并且发生了冲突怎么办？）问题是权限 - 我必须将 PK 添加到权限中，而权限又会将 PK 添加到其内容类型中。

我已经阅读了有关使用 post_syncdb 挂钩以更加程序化的方式添加初始数据的信息，我希望这将帮助我解决硬编码的 PK 问题。但是我想知道这是否是解决这个问题的最佳解决方案，或者我是否在这里“滥用”了 Django Group 和 Permission 概念，并且应该做其他事情，比如创建新模型或只是放置标志（比如“ is_member_manager") 在我的用户配置文件模型等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T18:00:51.393

通常创建一个以`init`管理命令命名的应用程序`initialize`，我将所有代码放在那里以引导应用程序。这允许您：

*   如果您使用部署工具（我使用 [Ansible]（[http://www.ansible.com/home，bat](http://www.ansible.com/home)可以是 amy 工具 Fabric、bash ...），您可以自动化该过程并`init`从已安装的应用程序中删除该应用程序配置后（首次安装）

或者

*   检查命令是否已经启动以跳过该过程（`Group.objects.all().exists()`？）

（或两者）

我发现这个解决方案非常易于维护，并且在任何情况下都足够强大。

`post_syncdb`（`post_migrate`在 djang 1.7 中）不是每次迁移所要求的解决方案

如果您只需要加载数据和/或创建记录（即组/管理员...），恕我直言，最好的解决方案是使用数据迁移]（[https://docs.djangoproject.com/en/1.7/topics/migrations/#数据迁移](https://docs.djangoproject.com/en/1.7/topics/migrations/#data-migrations)）

# jquery - 将字符串应用到 href

> ID：13035814
> 
> 赞同：0
> 
> 时间：2012-10-23T17:14:21.063
> 
> 标签：jquery, string, url, href

我正在使用 jQuery UI 的可排序对象，我希望将用户排序的列表作为参数保存到 URL，这样当用户单击“保存”链接时，URL 应该包含此信息。

一切正常，除了当用户单击链接时未更新 href 属性。

我的问题是如何实现这一点，如果不可能，是否有另一种方式（不适合我的解决方案的 ajax/json 除外）传递字符串（或我可以创建的数组而不是新页面） ?

```
$('#listElements').sortable({
    update: function(event, ui) {

        var order = '';
        var i = 0;

        $('.listObject li').each(function (e) {
            if (i != 0) {
                order += '%';
            }
            order += $(this).attr('id');
            i +=1;
        });

        var url = $('#newOrder').attr("href");
        url += "&listOrder=" + order;

        $('#newOrder').val(url);
    }
});

<div id='listContainer'>
    <div id='listElements'>
        <ul>
            <li>Element 1</li>
            <li>Element 2</li>
        </ul>
    </div>
    <div id='listUsers'>
        <h3>Collaborators</h3>
        <p>Mr Oizo</p>
        <p>Cookie Monster</p>
    </div>
    <div id='listInfo'>
        <h3>List info</h3>
        <strong>List creator: Mr Nice</strong><br/>
        <strong>Creation date: 2012/12/12 </strong><br/>
    </div>
   <a href='index.php?type=list&action=saveNewListOrder&listId=$listId' id='newOrder'>Save</a><br/>
</div> 
```

注意：服务器端我使用的是 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:16:56.463

```
$('#newOrder').attr('href',url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:20:24.600

这条线很糟糕：

```
$('#newOrder').val(url); 
```

用。。。来代替：

`$('#newOrder').attr('href',url);`

# iphone - AFIncrementalStore 处理具有关系的非休息响应

> ID：13035815
> 
> 赞同：2
> 
> 时间：2012-10-23T17:14:22.343
> 
> 标签：iphone, ios, core-data, afnetworking

我正在使用[AFIncrementalStore](https://github.com/AFNetworking/AFIncrementalStore)从 Web 服务中获取数据，并通过应用程序启动将其保存在 SQLite 数据库中。

该网络服务不遵循 REST 标准，所以我不能使用`AFRestClient`但有一个子类`AFHTTPClient`implements `AFIncrementalStoreHTTPClient`。

一切都适用于第一级数据，但我正在处理的响应还包含带有其他对象的数组：

```
[
{
    "PID": 6,
    "Actors": [
        {
            "PID": 0,
            "Name": "Kiefer Sutherland"
        },
        {
            "PID": 0,
            "Name": "Carlos Bernard"
        },
        {
            "PID": 0,
            "Name": "Mary Lynn Rajskub"
        },
        {
            "PID": 0,
            "Name": "Jude Ciccolella"
        },
        {
            "PID": 0,
            "Name": "Glenn Morshower"
        },
        {
            "PID": 0,
            "Name": "Tanya Wright"
        },
        {
            "PID": 0,
            "Name": "Alberta Watson"
        },
        {
            "PID": 0,
            "Name": "Eric Balfour"
        },
        {
            "PID": 0,
            "Name": "Regina King"
        },
        {
            "PID": 0,
            "Name": "Peter MacNicol"
        },
        {
            "PID": 0,
            "Name": "Marisol Nichols"
        },
        {
            "PID": 0,
            "Name": "Jayne Atkinson"
        },
        {
            "PID": 0,
            "Name": "Carlo Rota"
        },
        {
            "PID": 0,
            "Name": "Janeane Garofalo"
        },
        {
            "PID": 0,
            "Name": "Rhys Coiro"
        },
        {
            "PID": 0,
            "Name": "Jeffrey R. Nordling"
        },
        {
            "PID": 0,
            "Name": "Bob Gunton"
        },
        {
            "PID": 0,
            "Name": "Colm Feore"
        },
        {
            "PID": 0,
            "Name": "Annie Wersching"
        },
        {
            "PID": 0,
            "Name": "Cherry Jones"
        },
        {
            "PID": 0,
            "Name": "D.B. Woodside"
        },
        {
            "PID": 0,
            "Name": "James Morrison"
        },
        {
            "PID": 0,
            "Name": "Gregory Itzin"
        },
        {
            "PID": 0,
            "Name": "Jean Smart"
        },
        {
            "PID": 0,
            "Name": "Louis Lombardi"
        },
        {
            "PID": 0,
            "Name": "Sarah Clarke"
        },
        {
            "PID": 0,
            "Name": "Roger R. Cross"
        },
        {
            "PID": 0,
            "Name": "Reiko Aylesworth"
        },
        {
            "PID": 0,
            "Name": "Elisha Cuthbert"
        },
        {
            "PID": 0,
            "Name": "Lana Parrilla"
        },
        {
            "PID": 0,
            "Name": "Kim Raver"
        },
        {
            "PID": 0,
            "Name": "Dennis Haysbert"
        },
        {
            "PID": 0,
            "Name": "Leslie Hope"
        },
        {
            "PID": 0,
            "Name": "Xander Berkeley"
        },
        {
            "PID": 0,
            "Name": "James Badge Dale"
        },
        {
            "PID": 0,
            "Name": "Penny Johnson Jerald"
        },
        {
            "PID": 0,
            "Name": "Sarah Wynter"
        },
        {
            "PID": 0,
            "Name": "Shohreh Aghdashloo"
        },
        {
            "PID": 0,
            "Name": "Laura Harris"
        },
        {
            "PID": 0,
            "Name": "David Anders"
        },
        {
            "PID": 0,
            "Name": "Katee Sackhoff"
        },
        {
            "PID": 0,
            "Name": "Mykelti Williamson"
        },
        {
            "PID": 0,
            "Name": "Anil Kapoor"
        },
        {
            "PID": 0,
            "Name": "Chris Diamantopoulos"
        },
        {
            "PID": 0,
            "Name": "John Boyd"
        },
        {
            "PID": 0,
            "Name": "Freddie Prinze Jr."
        }
    ],
    "Artwork": [
        {
            "Filetype": "jpg",
            "Id": "291317649",
            "Offset": 0,
            "Rating": 1,
            "Type": 2
        },
        {
            "Filetype": "jpg",
            "Id": "-419936433",
            "Offset": 1,
            "Rating": 1,
            "Type": 2
        },
        {
            "Filetype": "jpg",
            "Id": "-431274161",
            "Offset": 2,
            "Rating": 1,
            "Type": 2
        },
        {
            "Filetype": "jpg",
            "Id": "117154410",
            "Offset": 0,
            "Rating": 1,
            "Type": 3
        },
        {
            "Filetype": "jpg",
            "Id": "1179197275",
            "Offset": 1,
            "Rating": 1,
            "Type": 3
        },
        {
            "Filetype": "jpg",
            "Id": "-1912564655",
            "Offset": 2,
            "Rating": 1,
            "Type": 3
        },
        {
            "Filetype": "jpg",
            "Id": "885093068",
            "Offset": 0,
            "Rating": 1,
            "Type": 1
        }
    ],
    "ContentRating": "TV-14",
    "DateAdded": "/Date(-3600000+0100)/",
    "EpisodeCount": 192,
    "ExternalId": [
        {
            "Id": "76290",
            "Site": "TVDB"
        },
        {
            "Id": "tt0285331",
            "Site": "IMDB"
        }
    ],
    "Genres": [
        "Action and Adventure",
        "Drama"
    ],
    "Id": "76290",
    "IsProtected": false,
    "Rating": 8.9,
    "Title": "24",
    "UnwatchedEpisodeCount": 0,
    "Year": 2001
}
] 
```

在我的数据模型中，我有一个实体`TVShow`，它具有 id、评级、标题、未观看的剧集、剧集计数和年份的属性。我正在像这样映射我`HTTPClient`的 那些`attributesForRepresentation:ofEntity:fromResponse:` ：

```
if ([entity.name isEqualToString:@"TVShow"]) {
    [mutableAttributes setValue:[representation valueForKey:@"Id"] forKey:@"showId"];
    [mutableAttributes setValue:[representation valueForKey:@"Title"] forKey:@"title"];
    [mutableAttributes setValue:[NSNumber numberWithInteger:[[representation valueForKey:@"Year"] integerValue]] forKey:@"year"];
    [mutableAttributes setValue:[NSNumber numberWithInteger:[[representation valueForKey:@"EpisodeCount"] integerValue]] forKey:@"episodeCount"];
    [mutableAttributes setValue:[NSNumber numberWithInteger:[[representation valueForKey:@"UnwatchedEpisodeCount"] integerValue]] forKey:@"unwatchedEpisodeCount"];
} 
```

我的想法是我可以添加另一个在 and 之间具有一对多关系的实体，`Artwork`但我不知道如何映射和定义它。我在最后几天的所有尝试都导致崩溃（可能是由于对 CoreData 缺乏了解）。`TVShow``Artwork`

任何帮助将不胜感激，因为我真的很想在我的应用程序中使用 AFIS。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:23:18.097

（第一部分并不是真正的答案）

`NSIncrementalStore`除非您非常了解 Core Data ，否则我不鼓励使用。使用例如 AFNetwork 简单地将 JSON 拉到网络上，然后将这些对象插入到由 SQLite 存储支持的*普通核心数据堆栈中，这要容易得多，而且更不容易出错。*您可能会发现这是一个更可行的解决方案。

（第二部分）

也就是说，您可以让它工作，但您必须做一些技巧，因为您没有任何`id`或其他 Artwork 对象的唯一标识符。您必须将其放入缓存（AFIncrementalStore 正在使用的第二个核心数据堆栈），然后将这些对象的 NSManagedObjectIDs 放入 TVShow 的该关系的值中。

# php - 使用 HTACCESS 重命名 URL

> ID：13035818
> 
> 赞同：0
> 
> 时间：2012-10-23T17:14:29.190
> 
> 标签：php, .htaccess

我正在构建一个 Web 应用程序，它会提供如下链接：

[http://www.example.com/portfolio/first-name/](http://www.example.com/portfolio/first-name/)

我希望它看起来像这样：

[http://www.example.com/model/first-name/](http://www.example.com/model/first-name/)

这在 HTACCESS 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T00:02:13.907

当然，只需添加一个条目：

```
RewriteRule ^portfolio/first-name/$ /model/first-name/ [L] 
```

我将它用于我的网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:17:27.193

如果我了解您想要映射第一个 url 以访问第二个 url。当然，只需添加一个条目：

```
RewriteRule ^portfolio/first-name/$ /model/first-name/ [L] 
```

那是你的问题吗？

或者，如果您只想将其映射到某个 php 文件，您可以这样做：

```
RewriteRule ^portfolio/first-name/$ /actualpage.php?param=123 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:43:51.603

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /member.php?username=$1

# /models/member.php <-- models in your case
# /users/member.php or /model/member.php
# member.php <--- Gets member name according to its ID from Database 
```

变化，

```
www.mywebsite.com/member.php?u=2343423423423423234 
```

到

```
www.mywebsite.com/Username 
```

我将它用于我的网站:) 它工作正常！

# list - SWI-Prolog 规则

> ID：13035819
> 
> 赞同：0
> 
> 时间：2012-10-23T17:14:29.987
> 
> 标签：list, prolog

我的规则应该将第一个参数与列表中的第三个元素统一起来。该列表是规则中的第二个参数。如果没有第三个元素，这应该会失败。

经过许多示例和混淆后，我创建了此规则。

```
third(X,[_|T]):-
    [_,Y] = T,!,fail,
    (Y,X). 
```

所以我的理解，我认为是不正确的，它将 Y 设置为列表 T 的第三个元素，因为 T 是初始列表的尾部。然后它将 Y 与 X 统一。

仍然对“统一”这些元素的代码感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:27:29.330

`fail`切割后`!`确保您的程序永远不会成功，因为您正在通过切割做出选择然后失败。

仅当列表恰好具有三个元素时，您才可以尝试访问列表的第三个元素：跳过过程头部的第一个元素，然后从尾部获取第二个元素。

```
third(X,[_|T]):-
    [_,X] = T. 
```

请注意，如果列表不包含恰好三个元素，则此过程将失败。

但是，直接访问过程头部的第三个元素更直接，例如：

```
third(X, [_, _, X|_]). 
```

这会将 X 与来自第二个参数的列表的第三个元素统一起来。该`|_`部分允许列表具有更多元素（它将尾部与匿名变量统一）。

# perl - 如果我们在每个循环中更改/更新哈希值会发生什么？

> ID：13035823
> 
> 赞同：3
> 
> 时间：2012-10-23T17:14:33.650
> 
> 标签：perl, function, hash, each, tie

'perldoc -f each' 告诉我在迭代时删除或添加值是不安全的，除非该项目是 each() 最近返回的。

当我运行此代码片段时：

```
my ($key,$value);

my %fruits = qw/ banana 1 apple 2 grape 3 /;

while ( $key = each %fruits ) {
    $fruits{$key} *= 7;
    print "$key = $fruits{$key}\n";
}

print "\nRead only\n\n";

while ( ($key,$value) = each %fruits ) {
    print "$key = $value\n";
} 
```

一切正常！

但是，如果我使用绑定哈希，嗯：

```
#-------------------------------------------------------------------------------
# select entries on database to print or to update.
sub select_urls {
    my ($dbPath,$match,$newValue) = @_;

    tie(my %tiedHash,'DB_File',$dbPath,O_RDWR|O_EXLOCK,0600,$DB_BTREE) || die("$program_name: $dbPath: $!\n");

    while ( my($key,$value) = each %tiedHash ) {
        if ( $key =~ $match ){
            if ( defined $newValue ) {
                $tiedHash{$key} = $newValue;
                ($key,$value) = each %tiedHash; # because 'each' come back 1 step when we update the entry
                print "Value changed --> $key = $value\n";
            } else {
                print "$key = $value\n";
            }
        }
    }

    untie(%tiedHash) ||  die("$program_name: $dbPath: $!\n");
} 
```

有必要对 each() 进行第二次调用。

我必须'perl -v'：

> $ perl -v
> 
> 这是为 amd64-openbsd 构建的 perl 5，版本 12，subversion 2 (v5.12.2 (*))（带有 8 个已注册补丁，有关更多详细信息，请参见 perl -V）
> 
> 版权所有 1987-2010，拉里·沃尔...

我在想这是不是一个错误？！

也许更多的事情在幕后......

我问我的解决方案是否正确？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:40:17.017

问题在于元素（键）的添加或删除。更改值应该没有问题。绑定哈希没有内在的区别。

```
my ($key,$value);

use Tie::Hash;

tie my %fruits, 'Tie::StdHash';
%fruits = qw/ banana 1 apple 2 grape 3 /;

while ( $key = each %fruits ) {
    $fruits{$key} *= 7;
    print "$key = $fruits{$key}\n";
}

print "\nRead only\n\n";

while ( ($key,$value) = each %fruits ) {
    print "$key = $value\n";
} 
```

输出：

```
banana = 7
apple = 14
grape = 21

Read only

banana = 7
apple = 14
grape = 21 
```

您的第二个片段没有显示错误。它并没有表现出太多的东西。它不可运行，你没有指定它输出什么，你也没有指定你期望它输出什么。但是让我们看看DB_File是否有问题。

```
use DB_File qw( $DB_BTREE );
use Fcntl   qw( O_RDWR O_CREAT );  # I don't have O_EXLOCK

my ($key,$value);

tie(my %fruits, 'DB_File', '/tmp/fruits', O_RDWR|O_CREAT, 0600, $DB_BTREE)
   or die $!;
%fruits = qw/ banana 1 apple 2 grape 3 /;

while ( $key = each %fruits ) {
    $fruits{$key} *= 7;
    print "$key = $fruits{$key}\n";
}

print "\nRead only\n\n";

while ( ($key,$value) = each %fruits ) {
    print "$key = $value\n";
} 
```

没有。

```
apple = 14
banana = 7
grape = 21

Read only

apple = 14
banana = 7
grape = 21 
```

# html - 为什么设计著名的浏览按钮（文件输入）如此困难？

> ID：13035824
> 
> 赞同：2
> 
> 时间：2012-10-23T17:14:44.403
> 
> 标签：html, css

每个人都希望（并且应该）知道[**如何**以 html 形式设置文件输入的样式](https://stackoverflow.com/questions/3226167/how-to-style-input-file-with-css3-javascript)（并且有[几种](http://www.quirksmode.org/dom/inputfile.html)众所周知的[技术](http://imar.spaanjaars.com/154/howto-style-the-button-of-a-input-typefile-control)）。但我更想知道**为什么**我们必须与一个看似微不足道的技术限制作斗争，而不是一切。

我对[w3c 文档](http://www.w3.org/TR/html-markup/input.file.html)不太满意，所以也许我在研究过程中完全错过了它，但我找不到任何关于这个问题**起源**的可靠文档（参考文献会很好）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:16:00.467

此控件由操作系统呈现，而不是 HTML。它因平台而异。样式“很难”，因为它不是规范的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:18:05.293

本质上，任何标准中*都*没有“浏览按钮”。这就是您的浏览器恰好呈现控件的方式。不同的浏览器以不同的方式呈现它——不同的颜色、不同的大小、不同的位置等。如果有一种方法可以更合理地设置输入样式就好了，但现在它们的内容就是所谓的“影子 DOM”，这基本上意味着“里面有东西，但你不能碰它，因为它不应该出现在标准中。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T17:17:25.903

这很难，因为拥有一个您无法识别为标准文件浏览按钮的按钮可能会导致安全风险。这就像 onBeforeUnload 上的对话框和其他有风险的功能一样：它们必须是可识别的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T17:18:38.367

暴露于文件系统是非常受保护的。有时甚至不授予访问权限（iPhone）。

# iphone - MKAnnotationView 显示没有文字的标注

> ID：13035825
> 
> 赞同：2
> 
> 时间：2012-10-23T17:14:51.220
> 
> 标签：iphone, objective-c, ios, multithreading, mkannotationview

**更新**：迈克尔做对了。这是我的解决方案：

```
- (void) connectNextCarOnMainThread:(id)annotation{
    [self performSelectorOnMainThread:@selector(connectNextCar:) withObject:annotation waitUntilDone:YES];
}

- (void) connectNextCar:(id)annotation{
    Pin *pin = (Pin *)annotation;
    MKMapRect zoomRect = MKMapRectNull;
    MKMapPoint annotationPoint = MKMapPointForCoordinate(pin.coordinate);
    MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 3, 3);
    if (MKMapRectIsNull(zoomRect)) {
         zoomRect = pointRect;
    } else {
         zoomRect = MKMapRectUnion(zoomRect, pointRect);
    }
    [mapView setVisibleMapRect:zoomRect animated:YES];
    [mapView selectAnnotation:pin animated:YES];

    NSInteger currentIndex=[self.annotations indexOfObject:annotation];
    if(currentIndex < [self.annotations count]){
        [self performSelector:@selector(connectNextCarOnMainThread:) withObject:[self.annotations objectAtIndex:currentIndex+1] afterDelay:5];
    }
} 
```

* * *

我想实现一个简单的功能：每隔 X 秒居中并选择我的一个注释。但是我的注释标注中出现了一些奇怪的行为。

这是我的代码：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated{
    if(self.movedToFitPins){
        for(id <MKAnnotation> pin in self.annotations)
            [self.mapView addAnnotation:pin];
        self.movedToFitPins = NO;
        [self performSelectorInBackground:@selector(fakeCarConnections) withObject:nil];
    }
}

- (void) fakeCarConnections {
    for (Pin *annotation in self.annotations)
    {
        [NSThread sleepForTimeInterval : 10.0];
        MKMapRect zoomRect = MKMapRectNull;
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 3, 3);
        if (MKMapRectIsNull(zoomRect)) {
            zoomRect = pointRect;
        } else {
            zoomRect = MKMapRectUnion(zoomRect, pointRect);
        }
        [mapView setVisibleMapRect:zoomRect animated:YES];
        [mapView selectAnnotation:annotation animated:YES];
    }
} 
```

所以，发生的事情是我确实专注于注释，标注气泡确实打开但里面没有文字。如果我单击注释，标注会正确打开文本。
这是一个问题：如果我注释 sleepForTimeInterval 行，代码可以正常工作，但我只看到最后一个注释，因为它通过了所有其他注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:25:31.943

所有 UI 修改/消息都应该发生在主线程上。我建议您修改循环代码，以便`performSelectorOnMainThread`在一段时间间隔后使用它而不是睡眠（并且每个后续调用都调用下一个）。这样你就不会阻塞主线程并且仍然会得到想要的效果。

# image - 我看不到我的检票口项目的任何图像，我只看到图像名称？

> ID：13035826
> 
> 赞同：0
> 
> 时间：2012-10-23T17:14:51.943
> 
> 标签：image, tomcat, maven, text, wicket

我正在用 Wicket、maven 和 hibernate 构建一个 web 项目。我用 Tomcat 7 运行它。我实际上是在为 HTML 使用免费的 CSS。问题是昨天一切正常，今天我照常开始这个项目，我看到我看不到网络上的图像，我只看到图像名称。我一直在寻找解决方案很长时间，看来我是唯一有这个问题的人：S。我留下了一张照片，这样你就可以看到问题的样子，看看你能不能帮我解决这个问题……请帮帮我！

这是我在执行项目时看到的内容：

[http://postimage.org/image/8nb54we3b/](http://postimage.org/image/8nb54we3b/)

这是对正常工作时的外观的捕捉：

[http://postimage.org/image/5kfgyn5g7/](http://postimage.org/image/5kfgyn5g7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:33:48.323

最后是因为函数“mountResource”剥夺了我所有的 CSS 工作。所以我删除它，现在它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:27:35.293

如果您没有更改任何内容，请尝试清理 tomcat，或再次部署

# css - 如何将我的徽标放在菜单/导航的中心？

> ID：13035827
> 
> 赞同：-1
> 
> 时间：2012-10-23T17:15:00.383
> 
> 标签：css

在这件事上需要你的所有帮助。我目前被困在这个 css 定位上，徽标应该就在菜单导航的中间，就像这个网站[http://theorydesign.ca/](http://theorydesign.ca/) .... 这就是我想要实现的目标。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>CSS Position</title>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="author" content="">

<style>
body { 
  font:12px Arial, Helvetica, sans-serif; 
  color:#000;
}
.container { 
  width:100%; 
  height:100%; 
  position:absolute; 
  left:0; 
  top:0; 
 }
#header { 
  width: 100%; 
  height: 96px; 
  position: fixed; 
  left: 0; 
  top: 0; 
  background-color: #f8f8f8; 
  border-bottom: 1px solid #e4e4e4; 
  z-index:9999;
}  
#logo { 
  width:76px; 
  height:64px; 
  display:block; 
  position: absolute; 
  left:50%; 
  margin-left:-43px; /*I'm not sure if this is the right assigned value for this. Don't know the number/value that i should assign*/
  top:15px;
} 
#logo a { 
  background:url(logo.png); 
  display:block; 
  width:76px; 
  height:64px;
}
#menu-left { 
  width:256px; /*This is just the number/value that I assign based on the size of my screen*/
  left:50%;
  top:24px; 
  margin-left:-350px;
  z-index:3;
}
#menu-right {
  width:256px; /*This is just the number/value that I assign based on the size of my screen*/
  right:50%;
  top:24px;
  margin-right:-350px;
  margin-left:0;
  z-index:3;
}
.menu {
  position:absolute;
  font-family: Arial, Helvetica, sans-serif;
  font-size:15px;
  line-height:30px;
  text-transform:uppercase;
  margin:0;
}
.menu li {
  float:right;
  margin-left:65px;
  line-height:35px;
  margin-bottom:0;
  position:relative;
  list-style:none;
}
#menu-right li {
  float:left;
  margin-left:0;
  margin-right:65px;
}
.menu  li a {
  color:#000;
  text-decoration:none;
}
.menu  li a:hover {
  color:#999;
}
</style>

</head>
<body>
 <div class="container">
  <div id="header">
   <div id="logo">
    <a href="index.html"></a>
   </div>
   <ul class="menu" id="menu-left">
    <li>
     <a href="#menu1">Menu1</a>
    </li>
    <li>
     <a href="#menu2">Menu2</a>
    </li>
   </ul>        
   <ul class="menu" id="menu-right">
    <li>
     <a href="#menu3">Menu3</a>
    </li>
    <li>
     <a href="#menu4">Menu4</a>
    </li>
   </ul>    
  </div>
 </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:52:44.550

他们似乎正在使用导航容器，然后将文本的边距设置为偏离中心。线条是图像和徽标。链接是由边距调整的 li 。要创建此效果，首先要创建一个具有 auto 边距和设置宽度的容器。将文本浮动到中心的左侧或右侧。一旦你有文字担心图像的位置。没有一种方法可以做到这一点。您可以使用 html/css、jQuery 等。

# ios6 - iOS 6，SDWebImage 成功/失败块错误。不兼容的块指针类型？

> ID：13035831
> 
> 赞同：2
> 
> 时间：2012-10-23T17:15:17.940
> 
> 标签：ios6, sdwebimage

我懒惰地将图像通过加载`setImageWithURL`到`UIImageView`嵌入的`UIScrollView`.

由于这是一个照片库，我试图`myScrollView`在完全加载后使用“成功”代码块来设置 'contentSize 和 imageview 的框架，以便它可以正确缩放。

问题是，我在通话中使用“成功”时不断收到一个奇怪的错误。如果我注释掉该方法的成功/失败部分，它可以工作，但我无法判断图像何时完成加载，因此无法正确调整容器大小，因此它可以正确缩放......帮助？

错误：

> 不兼容的块指针类型发送`'void (^)(UIImage *__strong)'`到类型参数`'SDWebImageSuccessBlock'`（又名`'void (^)(UIImage *__strong, BOOL)'`）

`success:^`我在以下代码@以...开头的行上收到的错误是

代码：

```
 [_ivFullSize setImageWithURL:[NSURL URLWithString:[currentPhoto PhotoAbsoluteLocation]]
placeholderImage:[UIImage imageNamed:@"loading.png"]
success:^(UIImage *image){
                         [DejalBezelActivityView removeViewAnimated:YES];
                         self.myScrollView.contentSize = self.ivFullSize.image.size;
                         self.ivFullSize.frame = CGRectMake(0, 0,     self.ivFullSize.image.size.width, self.ivFullSize.image.size.height);
                     }
                     failure:^(NSError *error){
                                    [DejalBezelActivityView removeViewAnimated:YES];
                     }]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:30:35.473

在将 SDWebImage 版本升级到最新版本后，我最近遇到了同样的问题。我不知道为什么会发生这种情况，但我认为这是功能块中未记录的更改。基本上，该函数返回一个额外的布尔参数。

所以在不知道问题原因的情况下，我通过简单地向块中添加一个新的布尔参数来解决它。而不是写

```
...
success:^(UIImage *image)
{
  ... do something with image
}
failure:^(NSError *error)
... 
```

我使用了以下内容：

```
...
success:^(UIImage *image, BOOL dummy)
{
  ... do something with image and ignore dummy
}
failure:^(NSError *error)
... 
```

这消除了引发的错误，但仍然对附加布尔变量的性质产生疑问。任何额外的文件或澄清将不胜感激。[这里](http://hackemist.com/SDWebImage/doc/Categories/UIImageView+WebCache.html#//api/name/setImageWithURL:placeholderImage:success:failure:)的文档仍然是指旧版本。

# r - 使用 ggplot 将数据框中的每一列绘制为一页上的直方图

> ID：13035834
> 
> 赞同：23
> 
> 时间：2012-10-23T17:15:28.477
> 
> 标签：r, ggplot2

我想在一页上使用直方图绘制 data.frame 的每一列。这是使用 R 附带的示例“钻石”数据集的示例：

```
p = list()
for (i in 1:ncol(diamonds)) p[[i]] <- qplot(diamonds[,i], xlab=names(diamonds)[[i]])
do.call(grid.arrange, p) 
```

![在此处输入图像描述](../Images/2a12caff7784b280d9bcd94296bbe22c.png)

这确实绘制了所有列，但每一列的数据看起来都一样。所以，有些事情显然是错误的。

这是完成这项任务的正确方法吗？我确定我在某处有一些愚蠢的语法，将相同的列数据集分配给列表中的每个元素，但我不确定它是什么。

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-23T17:40:56.990

干得好：

```
library(reshape2)
library(ggplot2)
d <- melt(diamonds[,-c(2:4)])
ggplot(d,aes(x = value)) + 
    facet_wrap(~variable,scales = "free_x") + 
    geom_histogram() 
```

![在此处输入图像描述](../Images/91eab47270142220edb63d96484816d2.png)

`melt`ing 允许我们使用生成的分组变量（称为`variable`）将数据分成组并为每个组绘制直方图。请注意使用 ，`scales = "free_x"`因为每个变量都有明显不同的范围和规模。

# c# - 让 SharpDX XAudio2 自定义 XAPO 在 Windows 8 应用程序中工作

> ID：13035836
> 
> 赞同：0
> 
> 时间：2012-10-23T17:15:32.543
> 
> 标签：c#, windows-8, sharpdx, xaudio2

我在 Windows 应用商店应用程序中使用 SharpDX 和 XAudio2。我正在尝试创建自定义 XAPO，但我什至无法开始。

应用程序的 OnNavigatedTo 方法：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
  XAudio2 engine = new XAudio2();
  MasteringVoice master = new MasteringVoice(engine);
  NativeFileStream fileStream = new NativeFileStream(@"Assets\sample.wav", NativeFileMode.Open, NativeFileAccess.Read);
  SoundStream soundStream = new SoundStream(fileStream);
  SourceVoice source = new SourceVoice(engine, soundStream.Format);
  AudioBuffer audioBuffer =  new AudioBuffer()
  {
    Stream = soundStream.ToDataStream(),
    AudioBytes = (int)soundStream.Length,
    Flags = SharpDX.XAudio2.BufferFlags.EndOfStream
  };

  EmptyEffect customEffect = new EmptyEffect();
  EffectDescriptor effectDescriptor = new EffectDescriptor(customEffect);
  source.SetEffectChain(effectDescriptor);
  source.EnableEffect(0);

  source.SubmitSourceBuffer(audioBuffer, soundStream.DecodedPacketsInfo);
  source.Start();
} 
```

空自定义 XAPO：

```
[StructLayout(LayoutKind.Sequential)]
public struct ModulatorParam
{
}

public class EmptyEffect : AudioProcessorBase<ModulatorParam>
{
  public EmptyEffect()
  {
    RegistrationProperties = new RegistrationProperties()
    {
      Clsid = Utilities.GetGuidFromType(typeof(EmptyEffect)),
      CopyrightInfo = "Copyright",
      FriendlyName = "Modulator",
      MaxInputBufferCount = 1,
      MaxOutputBufferCount = 1,
      MinInputBufferCount = 1,
      MinOutputBufferCount = 1,
      Flags = PropertyFlags.Default
    };
  }

public override void Process(BufferParameters[] inputProcessParameters, BufferParameters[] outputProcessParameters, bool isEnabled)
  {
  }
} 
```

如果我删除该行以启用效果，则空处理方法永远不会运行。如果我保留它，则会发生以下无用的错误：

![我收到的错误](../Images/ba7eb1f67458aa9ecdc9c26f038a7bee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:56:33.000

结果证明这是 SharpDX 实现的一个问题。请参阅SharpDX Google 代码页面上的[问题 272 ：](http://code.google.com/p/sharpdx/issues/detail?id=272)

> **问题：**错误导致效果和 SubMixVoices 无法正常工作。
> 
> **文件：** Voice.cs
> 
> **原因：** EffectChain // SendList 在被函数调用设置后总是被重置。这两种情况都是由于缺少 else 围绕以下行引起的：
> 
> SetOutputVoices((VoiceSendDescriptors?)null); 在函数 SetOutputVoices
> 
> 和
> 
> SetEffectChain((EffectChain?)null); 在函数 SetEffectChain

通过下载包含此修复程序的最新源并从头开始构建二进制文件来解决。

# clearcase - cleartool：如何按时间顺序列出流中的所有标签？

> ID：13035841
> 
> 赞同：3
> 
> 时间：2012-10-23T17:15:40.827
> 
> 标签：clearcase, clearcase-ucm, cleartool

我想按时间顺序列出应用于流的所有标签。理想情况下，我希望每个标签都具有以下内容：

```
 <label> <timestamp> <userid> 
```

我看了几个问题。命令

```
 ct lstype -kind lbtype -invob . -short 
```

来自问题“ [Clearcase：列出与特定字符串匹配的标签](https://stackoverflow.com/questions/3342166/clearcase-list-labels-matching-a-particular-string)”似乎很有希望，但它列出了在祖先流中应用的标签。我不想要那个，我只想要应用于当前流的标签。

我觉得一定有什么办法，可惜我没找到。如果你有建议，我可以试试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:10:28.940

如果您提到 Stream，则表示 ClearCase UCM，其中包括 UCM 基线。

您需要使用基线而不是标签进行推理：基线可以是增量基线，这意味着您不会为给定组件的*所有*元素找到标签。
（有关更多信息，请参阅“ [Clearcase UCM 中的完整基线和增量基线有什么区别？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988) ”）。
Lbtypes 和标签附加（“受保护”）到基线（通过超链接），但实际对象（与 userId 和日期相关联）是基线。

```
cleartool lsbl -stream aStream@\aPVob 
```

这将列出应用于给定流的所有基线，从最旧到最新。
（见[`cleartool man lsbl`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lsbl.htm)）

正如[danger89所](https://stackoverflow.com/users/518879/danger89)[评论](https://stackoverflow.com/questions/13035841/cleartool-how-to-list-all-labels-in-a-stream-chronologically/13036581?noredirect=1#comment56928139_13036581)的，每行会显示一个简短的版本。`cleartool lsbl -s -stream aStream@\aPVob`

* * *

[危险89](https://stackoverflow.com/users/518879/danger89)[在评论中](https://stackoverflow.com/questions/13035841/cleartool-how-to-list-all-labels-in-a-stream-chronologically/13036581?noredirect=1#comment82020402_13036581)添加：

> 要获得漂亮的表格输出，请使用：

```
(printf "Baseline|Label Status|Promotion Level|Owner|Predecessor baseline\n" \ ; cleartool lsbl -lev BUILT -fmt "%n|%[label_status]p|%[plevel]p|%[owner]p|%[predecessor]p\n" ) | column -t -s '|' 
```

在多行中以提高可读性：

```
(printf "Baseline|Label Status|Promotion Level|Owner|Predecessor baseline\n" \ ; 
 cleartool lsbl -lev BUILT -fmt "%n|%[label_status]p|%[plevel]p|%[owner]p|%[predecessor]p\n" )
   | column -t -s '|' 
```

# magento - 设置 Magento cron 作业以调用多个模型

> ID：13035842
> 
> 赞同：1
> 
> 时间：2012-10-23T17:15:51.130
> 
> 标签：magento, cron

我正在尝试运行两个模型作为 cron 作业的一部分。但是，我的 config.xml 中的代码仅导致一个模型实际运行：

```
<crontab>
    <jobs>
        <Class_Module>
            <schedule>
                <cron_expr>* * * * *</cron_expr>
            </schedule>
            <run>
                <model>Class_Module/Foo::cronJob</model>
                <model>Class_Module/Bar::cronJob</model>
            </run>
        </Class_Module>
    </jobs>
</crontab> 
```

是否可以从一个 cron 计划运行两个模型？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:23:47.123

是的，有可能。

```
<crontab>
    <jobs>
        <something_unique_1>
            <schedule><cron_expr>01 * * * *</cron_expr></schedule>
            <run><model>Class_Module/Foo::cronJob</model></run>
        </something_unique_1>
        <something_unique_2>
            <schedule><cron_expr>01 * * * *</cron_expr></schedule>
            <run><model>Class_Module/Bar::cronJob</model></run>
        </something_unique_2>
    </jobs>
</crontab> 
```

XML 将被解析为一个数组，因此`something_unique_1`只是`something_unique_2`数组的键`jobs[]`。

# unix - 如果应用程序的任何依赖项发生更改，是否为应用程序生成唯一版本？

> ID：13035845
> 
> 赞同：0
> 
> 时间：2012-10-23T17:15:55.277
> 
> 标签：unix, makefile, cmake

目前我在做什么。在构建开始时目前我正在生成具有当前版本的源代码作为 APPLICATION_VERSION 的 version.h。每个应用程序都在使用它。

这种方法的问题在于，如果源文件中的任何文件发生更改，它会强制重新构建每个应用程序。

只有在为该二进制文件更改任何其他离开 version.txt 的依赖项时，我才想生成与应用程序相关的 version.h any。目前我正在使用 cmake 进行构建过程。什么是解决问题的好方法？

**编辑更多细节：**

我的目录结构是这样的：

```
app/
   common/
         version.h
   app1/
       main.c
       other source file
   app2
       main.c
       other source file
lib/
   third party libs. 
```

每个应用程序 main.c 都包含 version.h。所以只有 main.c 会在版本发生变化时被重新编译。所以编译对我来说不是问题。问题是假设我修改了一个只影响 app1 的依赖项。现在，如果我正在构建应用程序。version.h 将随着源代码版本的更改而更改。由于 version.h 中的更改，它将更改应用程序 app1 和 app2 的版本。如果没有更改 app1 的依赖项，我想避免更改应用程序的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:53:12.433

听起来您在大多数（如果不是每个）cpp 文件中都包含“version.h”。每次更改时，这都会导致对世界进行完全重新编译。解决它的通常方法是

1.  在你的标题中声明
2.  在您的源代码中定义/实现

我建议您更改 version.h，以便它“声明”一个应该返回实际版本的函数。例如，像下面这样简单的东西。

```
#ifndef VERSION_H
#define VERSION_H

#include <string>

static std::string getVersion( );

#endif // VERSION_H 
```

使用 CMake，我建议您在每次构建时“重新生成”您的 version.cpp。如果您的问题中没有示例代码，我将提出一种可能的方法：

准备一个version.cpp.in，它应该被[CMake的configure_file](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aconfigure_file) “转换”成合适的version.cpp。

```
#include "version.h"

// After calling configure_file, CMake will have replaced the entry between @@ 
// with the corresponding CMake variables
static std::string generated_version=@Cmake_Generated_Version@;

std::string static getVersion( )
{
    return generated_version;
} 
```

在您的 cmakelists.txt 中执行以下操作：

```
# Somehow fill a CMake variable Cmake_Generated_Version
configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/version.cpp.in ${CMAKE_CURRENT_BINARY}/version.cpp ) 
```

# c# - SystemEvents.SessionEnding 在进程（之前打开）关闭之前不会触发

> ID：13035846
> 
> 赞同：4
> 
> 时间：2012-10-23T17:15:55.430
> 
> 标签：c#, multithreading, events

当用户关闭会话时，我正试图在程序中做一些事情。

这是代码：

```
using System;
using System.Diagnostics;
using Microsoft.Win32;
using System.Windows.Forms;
using System.Threading;

public class MyProgram
{
    static Process myProcess = null;
    public MyProgram()
    {
    }

    // Entry point
    static void Main(string[] args)
    {
        SystemEvents.SessionEnding += SessionEndingEvent; // Does not trigger inmediately, only fires after "myProcess" gets closed/killed 
        myProcess = CreateProcess("notepad.exe", null);
        myProcess.Exited += pr_Exited; // Invoked at "myProcess" close (works ok)
        try
        {
            myProcess.Start();
        }
        catch (Exception e2) { MessageBox.Show(e2.ToString()); }

        System.Windows.Forms.Application.Run(); // Aplication loop
    }

    static void SessionEndingEvent(object sender, EventArgs e)
    {
        MessageBox.Show("Session ending fired!");
    }

    static void pr_Exited(object sender, EventArgs e)
    {
        MessageBox.Show("Process Closed");
    }

    static Process CreateProcess(String path, String WorkingDirPath)
    {
        Process proceso = new Process();
        proceso.StartInfo.FileName = path;
        proceso.StartInfo.WorkingDirectory = WorkingDirPath;
        proceso.EnableRaisingEvents = true;
        return proceso;
    }
} 
```

我打开我的应用程序，它会打开一个记事本。当我关闭会话时：

*   如果我没有在记事本中修改任何内容（因此在退出时不需要确认），SO 将关闭记事本并触发 SessionEnding 事件（因此在这种情况下可以）并稍后处理 Process.Exited。

*   如果我在记事本中更改了某些内容，记事本会询问我是否要保存，并且在记事本进程关闭之前不会触发我的事件。

换句话说，我的程序只有在我启动的进程没有运行时才会收到通知。无论进程是否打开，我都希望在任何情况下都调用我的事件。

提前致谢。

# playorm - 如果 id 相同，NoSqlEntityManager.put 会更新吗？

> ID：13035849
> 
> 赞同：0
> 
> 时间：2012-10-23T17:16:00.737
> 
> 标签：playorm

我在 playOrm 中有一个映射实体，它有很多属性，比如出生日期、类别等。

假设我第一次使用 NoSqlEntityManager.put 将这个实体保存在 Cassandra 中。我写了以下内容：

```
NoSqlEntityManager em =...;
Entity e = new Entity();
entity.id = 123
entity.birthDate = 20121212
em.put(e); 
```

在那之后，一段时间后，我执行以下操作：

```
NoSqlEntityManager em =...;
Entity e = new Entity();
entity.id = 123
entity.categories = {"cat1", "cat2", "cat3"};
em.put(e); 
```

卡桑德拉会发生什么？将创建一个新实体？还是旧的会更新（可取的）？如果更新，birthDate 会在我的第二次写入中被删除吗？（不可取）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:23:55.717

em.put(e, false); 可用于更新，但它读取一个值主要是因为它必须确定索引是否已更改/已修改。

如果你做 em.put(e)，那么数据库中的birthDate 将被更改为 null。

不过这很有趣。我想知道我们是否应该在实体中的每个字段上都有一个标志来表示 null 不会像您的情况那样被写入数据库。如果我们确实有一个 @Column(nullsWritten=false)，那么问题就变成了，如果你真的想在特殊情况下写 null，那么在这种情况下你会如何写 null？有任何想法吗？

上面的实体中是否有任何带有@NoSqlIndexable 的字段？

谢谢，院长

# c# - 从单个实体框架创建同一数据库的多个副本

> ID：13035850
> 
> 赞同：1
> 
> 时间：2012-10-23T17:16:19.710
> 
> 标签：c#, .net, wpf, database, entity-framework

我正在创建一个购物应用程序，它有许多不同名称的分支。

我在我的 WPF 项目中使用实体框架，我能够从我的实体模型创建一个数据库。

如果我的实体名称是`JIMS`，则创建一个名称为的数据库`JIMS`。但我也想在 SQL Server 中创建一个新数据库，使用相同的实体框架模型，为不同的分支使用不同的名称。

这样用户可以选择分支并且会有一个单独的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:33:23.293

您可以有一个方法返回您要连接的数据库，并将其传递给您的 DbContext 实例的构造函数

```
public class YourContext : DbContext
{
  public YourContext(string targetDatabase)
  {
      this.Database.Connection.ChangeDatabase(targetDatabase);
  }
} 
```

# wifimanager - 设置Wifi路由器密码的java程序

> ID：13035859
> 
> 赞同：-1
> 
> 时间：2012-10-23T17:16:57.130
> 
> 标签：wifimanager

我想创建一个java程序，当我们给出一个字符串时，它应该设置为Wifi路由器密码。请帮我。我创建了一个 java 程序来生成随机密码，我需要在 wifi 路由器中自动设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:24:11.523

我看到这种情况发生的最好方法是您手动登录并更改密码，同时记录所有网络流量。然后您可以将其提炼到最低限度（可能首先是您提供路由器密码的登录请求，然后是更改密码请求）。

一旦您知道需要请求哪些文件，您就可以设置您的 java 程序来请求这些文件，瞧，您就完成了。在此过程中可能会出现一些问题，因为某些路由器对其普通密码使用某种形式的加密，即使它确实有效，它也只会对您当前使用的路由器有效，但我认为这应该给您一个初始点。

# php - 在 SH 脚本调用的 PHP 文件之间传递值

> ID：13035867
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:03.417
> 
> 标签：php, sh

我正在尝试从 SH 脚本调用 PHP 脚本。这很容易，我从 SH 接收值，但是当我尝试使用 OOP 将值从第一个 PHP 传递到其他 PHP 时，什么都没有传递。

这是第一个 PHP，它接收来自 SH 文件的简单调用，而不是通过 URL 传递值：

```
$controller = $_GET['c'];
$metodo     = $_GET['m'];
$uniqueid       = $_GET['uniqueid'];

$url = '../controllers/'.ucfirst($controller).'.controller.php';

include_once($url);

$controller = ucfirst($controller)."Controller";

$objeto = new $controller;
$dados = $_POST;

$objeto->dados = $dados;

$objeto->uniqueid = $uniqueid;

//CALL THE FUNCTION
$result = $objeto->$metodo($uniqueid);

//RETURN THE RESPONSE
echo  $result; 
```

在这里我收到传递给对象的值：（这是问题，值是空的）

```
include('../classes/Tarifacao.class.php');
class TarifacaoController{
    public function Tarifa($uniqueid){
        $obj_tarif = new Tarifacao;
        $bilhete = $obj_tarif->BuscaUltimoBilhete($uniqueid);
        echo $this->Imprime($bilhete,'BILHETE');

        $uniqueid = $bilhete['uniqueid'];
        echo $this->Imprime($uniqueid,'UNIQUEID');

        intval($duracao = $bilhete['billsec']);
        echo $this->Imprime($duracao,'DURAÇÃO');
        ... 
```

对不起，我的英语太差了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:27:07.910

如果从命令行执行 PHP，则不能传递这样的值。您需要使用`$argv`保留变量：[http ://www.php.net/manual/en/reserved.variables.argv.php](http://www.php.net/manual/en/reserved.variables.argv.php)

你可以尝试这样的事情：

```
$controller = $argv[1];
$metodo     = $argv[2];
$uniqueid   = $argv[3]; 
```

并从 shell 执行这样的脚本：

```
$ php script.php <c> <m> <uniqueid> 
```

# windows-8 - 公司商店帐户允许哪些功能而不是个人？

> ID：13035869
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:05.067
> 
> 标签：windows-8

要在 Windows 8 商店中发布应用程序，您必须拥有商店帐户。有两种类型的帐户：个人帐户和公司帐户。这些帐户不相同。如果您有个人帐户，则无法使用应用清单中的某些声明。

如果您有个人账户，哪些声明不能使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:16:19.333

以下是我收集 [的 Windows 应用商店个人帐户和公司帐户之间差异的完整列表。](http://blogs.msdn.com/b/jennifer/archive/2012/09/18/what-is-the-difference-between-a-company-vs-individual-account-for-the-windows-store.aspx)

为了解决您的具体问题，有 3 种功能只能由从公司帐户提交的应用程序使用。（这记录在[App 功能声明](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)中）。他们是：

1.  **企业认证**。使用您的 Windows 凭据访问公司 Intranet。
2.  **共享用户证书**。允许使用软件和硬件证书或智能卡来识别应用程序中的用户。
3.  **文档库**。允许访问用户的文档库，包括添加、更改或删除文件的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:50:52.550

*   公司帐户需要验证。
*   个人帐户不需要验证过程。而且它不能提交桌面应用程序。

阅读本网站的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh868184.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh868184.aspx)

# mysql - SQL 连接出错

> ID：13035871
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:11.910
> 
> 标签：mysql, sql

我有一张桌子叫`tbl_users`

```
================================================================================
system_name | user_id | username | password | system_id | group_id | user_level
================================================================================
Demo        | 12345   | demo     | demo     | 99999     | 54321    | Admin
================================================================================
Demo        | 78794   | demo2    | demo2    | 99999     |          | Employee
================================================================================ 
```

第二张表为`tbl_groups`

```
=================================
system_id | group_id | group_name
=================================
99999     | 54321    | engine     
================================= 
```

我正在使用这个查询：

```
SELECT username, user_level, system_name, tbl_users.system_id, tbl_users.user_id, tbl_users.group_id, group_name 
FROM tbl_users JOIN tbl_groups 
WHERE tbl_users.group_id = tbl_groups.group_id 
AND system_name = 'demo' 
AND tbl_users.system_id = '99999' 
```

但是使用上面的查询我只是得到一行`Demo User`，我也想要 Demo 2 但无法完成，如果删除`tbl_users.group_id = tbl_groups.group_id`我得到两行但在列中`group_name`的打印**引擎**`Demo2 User` `group_name`是错误的，因为他目前没有组，所以如果用户在，我如何查询我获取所有用户和组的名称，或者如果用户不在组中，我希望 group_name 列空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:24:24.777

您正在寻找[OUTER JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)：

```
FROM tbl_users 
LEFT OUTER JOIN tbl_groups 
  ON tbl_users.group_id = tbl_groups.group_id
WHERE ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:29:58.020

如果您希望它返回左表中的所有行，请使用 LEFT JOIN 而不是 JOIN。此外，您应该在指定条件时使用`ON`而不是。`WHERE``JOIN`

```
SELECT username, user_level, system_name, tbl_users.system_id, tbl_users.user_id, tbl_users.group_id, group_name
FROM tbl_users LEFT JOIN tbl_groups
ON tbl_users.group_id = tbl_groups.group_id 
```

# sql-server - SQL 查询到实体框架 (ExecuteStoreQuery)

> ID：13035872
> 
> 赞同：2
> 
> 时间：2012-10-23T17:18:17.883
> 
> 标签：sql-server, entity-framework

我有一个运行良好并返回正确结果的 SQL 查询

```
DECLARE @memberId DECIMAL 

SET @memberId=100 

SELECT S.ID, 
       S.STATUSDATE, 
       S.STATUSTEXT, 
       P.FIRSTNAME, 
       P.LASTNAME, 
       P.PHOTO 
FROM   MEMBERSTATUS S 
       JOIN PROFILE P 
         ON S.SENDERID = P.MEMBERID 
WHERE  S.SENDERID IN (SELECT F.MEMBERID AS ID 
                      FROM   MEMBER_FRIENDREQUEST F 
                      WHERE  ( F.FRIENDID = @memberId ) 
                             AND F.STATUS = 2 
                      UNION 
                      SELECT F.FRIENDID AS ID 
                      FROM   MEMBER_FRIENDREQUEST F 
                      WHERE  ( F.MEMBERID = @memberId ) 
                             AND F.STATUS = 2 
                      UNION 
                      SELECT @memberId) 
```

但是当我尝试在 ASP.NET 中使用它时，它永远不会返回任何结果

```
 using (var db = new ExerciseProgramManagerEntities())
            {
                var pMmemberId = new SqlParameter("@memberId", senderId);                                    

                var result  = db.ExecuteStoreQuery<DynamicObject>("select s.Id, s.StatusDate, s.StatusText, p.FirstName, p.LastName, p.Photo "+
 "from MemberStatus s join Profile p on s.SenderId = p.MemberID " +
 "where s.SenderId IN "+
 "("+
"select f.MemberID as id from Member_FriendRequest f where (f.FriendID = @memberId ) and f.Status=2 "+
"union "+
"select f.FriendID as id from Member_FriendRequest f where (f.MemberID=@memberId) and f.Status=2 " +
"union "+
"select @memberId)", pMmemberId); 
```

我的查询有什么问题？

# actionscript-3 - 地形生成 AS3

> ID：13035873
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:19.107
> 
> 标签：actionscript-3, actionscript

我正在尝试通过在舞台上放置一些随机方块来制作地形，但我做不到，这是我的代码。

```
import flash.display.Sprite;

var i:Number;
var h:Number = 0;
var black:Sprite = new Sprite;

for (i = 0; i < 600; i++)
{
    if (randon <= 0.5)
    {
        i += 40;
        black.graphics.beginFill(000000);
        black.graphics.drawRect(i,h,40,40);
        black.graphics.endFill();
        addChild(black);
    }

    if (randon>=0.5)
    {
        i +=  40;
    }
}

var randon:Number;
randon = Math.random(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:37:47.440

```
import flash.display.Sprite;

var h:Number=0;
var black:Sprite = new Sprite() ; // missing constructor
addChild(black);

for (var i:int=0; i<600; i+=40)  // can do definition in here - int is preferred
{
    if (Math.random()<=0.5) // inline
    {
        black.graphics.beginFill(000000);
        black.graphics.drawRect(i,h,40,40);
        black.graphics.endFill();
    }
} 
```

# php - 如何插入回显日期（“Y”）；变成一个变量？

> ID：13035875
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:19.460
> 
> 标签：php, variables, date, echo

我试图让一个 PHP 变量返回普通的 HTML 代码，以及当前年份（用 表示`echo date("Y");`）。这是我当前的语法：

`$myvar = "Lorem ipsum dolor sin amet " echo date("Y") " foo bar";`

我收到一条错误消息 `Parse error: syntax error, unexpected T_ECHO in /path/to/my/document on line 28`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T17:19:32.793

```
$myvar = "Lorem ipsum dolor sin amet " . date("Y") . " foo bar"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T17:25:02.467

你错过了正确的连接语法，需要，

```
$myvar = "Lorem ipsum dolor sin amet " . date("Y") . " foo bar"; 
```

`echo`是用于打印/显示变量中的值的命令。

```
 echo $myvar; //will display "Lorem ipsum dolor sin amet 2012 foo bar" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:34:52.120

简单地，

```
$date = date("Y");
echo"lorem ipsum dolor sin amet $date"; 
```

把事情简单化！

# vba - 循环，从 DAO 记录集发送 Outlook 邮件，而不是循环遍历整个表

> ID：13035876
> 
> 赞同：1
> 
> 时间：2012-10-23T17:18:21.190
> 
> 标签：vba, ms-access

我正在尝试使用特定的电子邮件帐户（不是默认帐户）从 Outlook 2010 发送电子邮件。

电子邮件基于一个静态模板，该模板从表 (senders_table) 中为收件人、主题和电子邮件正文中的一些变量字段提取数据。

代码没有循环遍历我表中的所有记录。电子邮件通过指定的帐户发出，并从表中提取适当的数据，但在第一条记录后停止。

```
Private Sub test_Click()

'You must add a reference to the Microsoft Outlook Library
Dim OutApp As Outlook.Application
Dim OutMail As Outlook.MailItem
Dim strbody As String
Dim stremail As String
Dim strsubject As String

Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(olMailItem)

Dim rs As DAO.Recordset
Set rs = CurrentDb.OpenRecordset("Senders_Table")
With rs

    If .EOF And .BOF Then
        MsgBox "No emails will be sent becuase there are no records assigned from the list", vbInformation
    Else
        Do Until .EOF

            stremail = ![email]
            strsubject = ![address]
            strbody = "Dear " & ![name] & "," & _
              Chr(10) & Chr(10) & "Some kind of greeting" & ![address] & "!" & _
              "  email message body goes here"

            .Edit
            .Update
            .MoveNext

        Loop

    End If
End With

On Error Resume Next
With OutMail
    .To = stremail
    .CC = ""
    .BCC = ""
    .Subject = strsubject
    .Body = strbody

    .SendUsingAccount = OutApp.Session.Accounts.Item(2)
    .Send
End With
On Error GoTo 0

If Not rs Is Nothing Then
    rs.Close
    Set rs = Nothing
End If

Set OutMail = Nothing
Set OutApp = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:39:10.377

您需要将发送电子邮件代码移动到循环内，以便为每条记录发送一封电子邮件。像这样的东西：

```
Set OutApp = CreateObject("Outlook.Application")

Dim rs As DAO.Recordset
Set rs = CurrentDb.OpenRecordset("Senders_Table")
With rs
    If .EOF And .BOF Then
        MsgBox "No emails will be sent becuase there are no records assigned from the list", vbInformation
    Else
        Do Until .EOF
            stremail = ![email]
            strsubject = ![address]
            strbody = "Dear " & ![name] & "," & _
                      Chr(10) & Chr(10) & "Some kind of greeting" & ![address] & "!" & _
                      "  email message body goes here"

            '.Edit
            '.Update

            Set OutMail = OutApp.CreateItem(olMailItem)
            With OutMail
                .To = stremail
                .CC = ""
                .BCC = ""
                .Subject = strsubject
                .Body = strbody

                .SendUsingAccount = OutApp.Session.Accounts.Item(2)
                .Send
            End With            
            .MoveNext
        Loop

    End If
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T22:40:24.803

这对我有用。我有带有字段 [电子邮件] 的 Query2；[地址]; [姓名]。

我知道这是一个旧线程，但我找不到任何不会弹出安全消息的代码。希望这可以帮助某人。

```
Sub SendEmailFromQuery()

'You must add a reference to the Microsoft Outlook Library
Dim OutApp As Outlook.Application
Dim OutMail As Outlook.MailItem
Dim strbody As String
Dim stremail As String
Dim strsubject As String

Set OutApp = CreateObject("Outlook.Application")

Dim rs As DAO.Recordset
Set rs = CurrentDb.OpenRecordset("Query2") ''add your query here
With rs

If .EOF And .BOF Then
MsgBox "No emails will be sent becuase there are no records assigned from the list", vbInformation
Else
Do Until .EOF

    stremail = ![email] ''Query2 Fields [email];  [Address];  [Name]
    strsubject = ![Address]
    strbody = "Dear " & ![Name] & "," & _
              Chr(10) & Chr(10) & "Some kind of greeting" & ![Address] & "!" & _
              "  email message body goes here"

On Error Resume Next
Set OutMail = OutApp.CreateItem(olMailItem)
With OutMail
    .To = stremail
    .CC = ""
    .BCC = ""
    .Subject = strsubject
    .Body = strbody

    .SendUsingAccount = OutApp.Session.Accounts.Item(2)
    .Send
        End With
            .MoveNext
Loop

'On Error GoTo 0

If Not rs Is Nothing Then
rs.Close
Set rs = Nothing
End If

Set OutMail = Nothing
Set OutApp = Nothing

End If
End With
End Sub
```

# mysql - Mysql - 无法选择表 A 中存在且表 B、C、D 中不存在的记录

> ID：13035883
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:45.607
> 
> 标签：mysql, subquery

我需要选择存在于**users**表中但不存在于表**groups_members、groups_members_unapproved**和**groups_invitations**中的记录。

**$_POST['msg_id']**包含多个用户 ID，我不知道如何在 3 个子查询中使用**implode**语句，所以我将其替换为 ??? - 问号。

谢谢。

```
$result = mysql_query("SELECT id FROM users
WHERE id IN (". implode(', ', $_POST['msg_id']).")
AND id NOT IN (SELECT memberid FROM groups_members where memberid='???' and groupid='$cid')
AND id NOT IN (SELECT memberid FROM groups_members_unapproved where memberid='???' and groupid='$cid')
AND id NOT IN (SELECT invited FROM groups_invitations where invited = '???' and groupid='$cid')",$gb1) or die('Error'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:31:21.327

最简单的方法是把`???`out 留在子查询中，因为那里不需要它们；

```
SELECT id FROM users WHERE id IN (...)
AND id NOT IN 
  (SELECT memberid FROM groups_members WHERE groupid='$cid')
AND id NOT IN 
  (SELECT memberid FROM groups_members_unapproved WHERE groupid='$cid')
AND id NOT IN 
  (SELECT invited FROM groups_invitations WHERE groupid='$cid') 
```

[SQLfiddle 演示](http://sqlfiddle.com/#!2/74ebe/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:33:15.593

您可能想要做的是这样的 LEFT OUTER JOIN

```
SELECT id FROM users AS u
LEFT OUTER JOIN groups_members AS gm ON u.id = gm.memberid
LEFT OUTER JOIN groups_members_unapproved AS gmu ON u.id = gmu.memberid
LEFT OUTER JOIN groups_invitations AS gi ON u.id = gi.invited
WHERE
id IN (<your implode here>)
AND gm.memberid IS NULL
AND gmu.memberid IS NULL
AND gi.invited IS NULL
AND gm.groupid <> <your group id>
AND gmu.groupid <> <your group id>
AND gi.groupid <> <your group id> 
```

这里的想法是，即使没有匹配的 id，外连接也会返回所有连接表中的记录，但是`* IS NULL`where 子句中的行会将这些记录限制为仅在用户表之间没有匹配的成员 id 的情况下和任何其他表。

我不太确定`groupid`您的查询带来了什么价值。我认为，如果您关心在用户级别识别记录，那将是一个不必要的过滤字段。

这应该是比使用子选择更有效的查询，只要您的所有 ID 字段都被索引。当然，如果这是您希望经常执行的查询，您可能需要考虑更改架构以获得更优化的查询。

# c# - 使用观察者/事件处理程序在 2 个类之间传递数据

> ID：13035887
> 
> 赞同：0
> 
> 时间：2012-10-23T17:18:58.147
> 
> 标签：c#, windows, forms

基本上，我有一个 Windows 窗体，它有一个控件，一个控件，一个控件。基本上，当子控件发生某些事情时，我希望父/最顶层控件知道。

我不想将父控件的实例传递到 2 级深。此外，使用观察者/事件处理程序似乎需要创建子类的实例来注册此类事件。

我到底能在这里做什么？甚至 Obj-C 也有全局 RegisterForNotifications。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:22:13.043

控件不应该知道谁包含它们。他们应该简单地发布其他人可以订阅的事件。因此，您最内层的孩子引发了下一个外层孩子订阅的事件。它处理它，并可能引发它自己的事件，另一个“容器”（控件或表单）订阅，依此类推。看到这个：http: [//msdn.microsoft.com/en-us/library/ms973905.aspx](http://msdn.microsoft.com/en-us/library/ms973905.aspx)

# php - 在 magento 管理面板中创建一个表单

> ID：13035891
> 
> 赞同：0
> 
> 时间：2012-10-23T17:19:10.900
> 
> 标签：php, xml, magento, module

我正在尝试在 magento 的管理面板（自定义模块）中创建表单。现在我的 magento 自定义模块可以正常工作。我在管理面板中创建了菜单，我重写了一些控制器，但我无法在管理面板中创建表单（当我单击菜单项时）。在 config.xml 我有下一部分代码：

```
<admin>
            <routers>
                <test>
                    <use>admin</use>
                    <args>
                        <module>Mynamespace_Skipcart</module>
                        <frontName>Skipcart</frontName>
                    </args>
                </test>
            </routers>
        </admin>
        <adminhtml>
            <menu>
                <tutorial_menu translate="title" module="skipcart">
                    <title>Skip Cart</title>
                    <sort_order>9999</sort_order>
                    <children>
                        <first_page module="skipcart">
                            <title>Our First Page</title>
                            <action>Skipcart/Adminhtml_index/index</action>
                        </first_page>
                    </children>
                </tutorial_menu>
            </menu>
            <layout>
                <updates>
                    <skipcart>
                        <file>Skipcart.xml</file>
                    </skipcart>
                </updates>
            </layout>
        </adminhtml> 
```

我在 app/design/frontend/default/default/layout/skipcart.xml 中有一个文件。在这个文件中我创建错了。使用这种方法，我检查 magento 是否读取了这个文件。如果 magento 读取 skipcart.xml 将返回警告：simplexml_load_string()，但 magento 不会返回错误。我还有一个问题。如果我从 adminhtml.xml 中的 config.xml 移动菜单的此代码，则管理面板中的菜单消失。我在 magento 1.7 上尝试了我的模块。有谁能够帮我？

我在 app/code/local/Mynamespace/Skipcart/controllers/Adminhtml/IndexController.php 中有一个控制器

```
<?php

class Mynamespace_Skipcart_Adminhtml_IndexController extends Mage_Adminhtml_Controller_Action {
     public function indexAction()
    {
        $this->loadLayout();

        //create a text block with the name of "example-block"
        $block = $this->getLayout()
        ->createBlock('core/text', 'example-block')
        ->setText('<h1>This is a text block</h1>');

        $this->_addContent($block);
  //add menu active
        $this->_setActiveMenu('tutorial_menu/first_page');
       // $model = Mage::getModel('skipcart/skipcart'); Mage::log('da');
       // $this->_setActiveMenu('system/another_menu_from_us');
     // echo $block1 = $this->getLayout()->createBlock('skipcart/add');
      // $this->_addContent($block1);
        $this->renderLayout();

    }
    public function postAction()
    {
        $post = $this->getRequest()->getPost();
        try {
            if (empty($post)) {
                Mage::throwException($this->__('Invalid form data.'));
            }

            /* here's your form processing */

            $message = $this->__('Your form has been submitted successfully.');
            Mage::getSingleton('adminhtml/session')->addSuccess($message);
        } catch (Exception $e) {
            Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
        }
        $this->_redirect('*/*');
    }

}
?> 
```

和skipcart.xml：

```
<?xml version="1.0"?>
<layout>
    <skipcart_adminhtml_index_index>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference>

         <update handle="skipcart_index_index"/>
        <reference name="content">
            <block type="adminhtml/template" name="skipcart" template="skipcart/add.phtml"/>
        </reference>
    </skipcart_adminhtml_index_index>
<!-- I miss the <layout> because I want to check if magento read this file.--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T16:51:44.267

只需像下面那样更改您的函数体，而不是`core/text`调用`core/template`，然后`setTemplate('filename.phtml');` 在此文件中，您需要添加表单 html 就是这样。

```
public function indexAction()
{
    $this->loadLayout();

    //create a text block with the name of "example-block"
    $block = $this->getLayout()
    ->createBlock('core/template', 'example-block')
    ->setTemplate('folder/fileName.phtml');

    $this->_addContent($block);

    $this->_setActiveMenu('tutorial_menu/first_page');      

    $this->renderLayout();

} 
```

# xml - NServiceBus 端点是否可以使用不同的序列化程序来处理和发布？

> ID：13035894
> 
> 赞同：5
> 
> 时间：2012-10-23T17:19:36.787
> 
> 标签：xml, json, serialization, nservicebus

我有一个端点来处理传入消息（来自 Bus.Send），做一些工作，然后发布另一条消息。是否可以将其配置为使用 Json 序列化程序反序列化传入消息，但是在发布时，使用 Xml 序列化程序序列化传出消息？

我的配置当前如下所示，它使用 Json 序列化程序来反序列化传入和序列化传出消息：

```
 Configure.With()
            .DefaultBuilder()
            .JsonSerializer()
            .MsmqTransport()
            .IsTransactional(true)
            .PurgeOnStartup(false)
            .UnicastBus() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:54:04.857

**更新**

NServiceBus 的第 5 版添加了对该场景的基本支持，并且在第 6 版中更加完整。

以下是有关该主题的更多信息：

[https://particular.net/blog/build-a-babel-fish-nservicebus](https://particular.net/blog/build-a-babel-fish-nservicebus)

**旧回复：** 这是我们 NServiceBus 团队一直在思考的问题。在一个系统中使用一种序列化格式并使用不同的序列化格式与其他系统进行发布/订阅通信确实有意义。

恐怕我们还没有开始实施它，所以您目前只能选择一个。

# ios - UITextView UIResponderStandardEditActions 文本格式切换状态

> ID：13035895
> 
> 赞同：1
> 
> 时间：2012-10-23T17:19:37.910
> 
> 标签：ios, ios6, uitextview, toggle, uiresponder

如何确定文本格式的[UIResponderStandardEditActions的当前状态？](https://developer.apple.com/documentation/uikit/uiresponderstandardeditactions)例如，如果我执行以下操作：

```
[textView toggleBoldface:nil]; 
```

如何查询 textView 以了解粗体状态现在是打开还是关闭？这仅适用于没有选择的光标（即范围长度为 0）。因此， enumerateAttribute 似乎不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:40:55.973

看起来 typingAttributes 属性（在 iOS 6 中可用）将记录将应用于用户键入的新文本的属性，即使选择长度为 0。因此揭示了诸如粗体之类的格式化选项的状态。

```
NSLog(@"textViewFormatting options: %@", [[self noteTextView] typingAttributes]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:05:35.680

我在文档中没有找到任何有用的东西，但我想只要继承 UITextView 就足够简单了，在它上面添加一个属性`BOOL boldText`，然后无论你在哪里调用`[textView toggleBoldFace:nil];`，也只需切换该属性。然后当您需要检查 textView 的状态时，只需检查`boldText`属性即可。

# java - 用作字典的小型 Java 程序

> ID：13035897
> 
> 赞同：-1
> 
> 时间：2012-10-23T17:19:42.720
> 
> 标签：java, arrays

我想做一个像字典一样的小代码，看看我想怎么做

1.  想要使用两个数组 1 用于单词和 2 用于含义

2.  当程序运行时，我将自动对随机输入的数组进行排序，然后弹出 JoptopnPane 将要求从单词数组中输入单词。

3.  当用户输入单词并按下输入时，它将在 Second Array 中搜索其含义。

数组是这样的..

```
String Words[]={"One" , "Two" , "Three", "Four"};
String Meaning[]={"1", "2", "3", "4"}; 
```

我已经对它们进行了排序，确实在弹出窗口等中工作，但不知道如何“将单词匹配到含义数组”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:22:14.917

你需要的简单

```
for(int i=0;i<Meaning.length();i++)
if(Meaning[i].equals(word from joptionpane))
{
 /////////////--- ur code................
} 
```

仍然有很多你必须弄清楚自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:29:08.363

您应该创建一个`Map<String, String>`来存储单词及其含义的映射。

```
Map<String, String> wordMap = new HashMap<String, String>() {
   {
        put("One", "1");
        put("Two", "2");
        put("Three", "3");
        put("Four", "4");
   }
}; 
```

要获得`list`要向用户显示的单词，您可以使用：-

```
wordMap.keySet(); // Returns the Set<String> of all the keys in map 
```

然后对于一个词：-“一”，您可以得到以下含义：-

```
String wordMeaning = wordMap.get("One"); 
```

此方法不需要为每个单词遍历数组。理想情况下， a`Dictionary`应该始终是从`word`到 its的映射，`mapping`因此搜索时间为`O(1)`。

# java - 为什么它告诉我将时间转换为int？时间的格式是XX:XX，这个变量应该是什么类型？

> ID：13035898
> 
> 赞同：0
> 
> 时间：2012-10-23T17:19:46.520
> 
> 标签：java, variables, time

```
import javax.swing.JOptionPane;

public class filmboxoffice {

    public static void main (String[] args)
    {
        String [] filmname = new String [4];
        String [] filmtime = new String [4];
        String name;
        String time;
        int result;

        for(int i=1; i<5; i++)
        {
            name = JOptionPane.showInputDialog("What is the film on Screen "+i+" today?");
            result = i;
            time = JOptionPane.showInputDialog("What time does it start?");

        }

        JOptionPane.showMessageDialog(null,"Screen "+ result +": "+"   "+filmtime [time]);

    }
} 
```

错误堆栈：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
Type mismatch: cannot convert from String to int

at filmboxoffice.main(filmboxoffice.java:22) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:21:11.500

问题是这个表达式：

```
filmtime [time] 
```

`filmtime`是一个[*数组*](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)- 数组总是通过索引访问，这是一个`int`. `time`是 type 的变量`String`，因此不能将其用作数组索引。

也许你想要一个`Map<String, String>`，或者更好的是使用[Joda Time](http://joda-time.sf.net)，一个`Map<LocalTime, Film>`？

实际上，再读一遍，看起来实际上应该有这样的东西：

```
for (int i = 0; i < 4; i++) {
    JOptionPane.showMessageDialog(null,"Screen "+ i +": "+"   "+filmtime[i]);
} 
```

...当然，在填充它之后。`time`（在提示用户之后，您当前忽略了 的值。）

请注意，Java 中的数组从 0 开始，因此 a 的`new String[4]`有效索引为 0、1、2 和 3，因此您当前的循环将引发异常 - 并且不清楚它的含义是什么`result`，因为它*总是*4 在当前循环结束时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:25:19.987

因为变量时间是字符串类型的。您需要将其解析为 Integer 才能访问数组的该元素，可能类似于：

```
filmtime[Integer.parseInt(time)] 
```

您的错误将得到纠正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:24:17.540

你有 String [] filmtime = new String [4];

因此，在您的代码中， filmtime [time] : time 应该是 in 类型，即 Array 中的索引。

但是，您的时间变量是字符串类型。

尝试这个：

```
JOptionPane.showMessageDialog(null,"Screen "+ result +": "+"   "+filmtime [result]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:25:40.363

您已定义`time`为`String`并尝试将 at`index`用于数组元素。数组索引是整数值，从`0`引用数组中的第一个元素开始。

`filmtime [time]`请在语句中使用正确的索引元素。

我怀疑您想`result`改用 as `filmtime [result]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T17:53:34.093

```
 for(int i=1; i<5; i++)
 {
            name = JOptionPane.showInputDialog("What is the film on Screen "+i+" today?");
            result = i;
            filmname[i-1] = new String(name);
            time = JOptionPane.showInputDialog("What time does it start?");

            filmtime[i-1] = new String(time); 
 } 
```

Judging from your question, I think this is what you meant to do.

And this one should be: `

```
for(int i = 0; i < 4; i++){
   JOptionPane.showMessageDialog(null,"Screen "+ (i + 1) +": "+ filmname[i]+ " "+filmtime[i];
} 
```

# jquery - JQuery .show() 和 .hide()？

> ID：13035905
> 
> 赞同：0
> 
> 时间：2012-10-23T17:20:36.467
> 
> 标签：jquery, show-hide

这是关于 .hide() 和 .show() 的事实的问题。这是我的代码的简化版本，但它概括地解释了它。由于它是已经构建的代码，并且我正在对其进行更改和添加，因此我不想返回并将所有内容更改为 .toggle()。

想象一下，您的按钮 1 始终是 .show()，而按钮 2 始终是 .hide()。

是否需要 IF 语句？不使用 IF 语句有什么影响吗？如果您确实使用 IF 语句，会有什么影响吗？

```
$('#button1').click(function() {
if (!$("#widget").is(':visible')) { 
  $('#widget').show('fast');
}
});
$('#button2').click(function() {
if ($("#widget").is(':visible')) {  
  $('#widget').hide('fast');
}
}); 
```

或者直接改变就足够了？::

```
$('#button1').click(function() {
  $('#widget').show('fast');
});

$('#button2').click(function() {
  $('#widget').hide('fast');
}); 
```

有人告诉我，如果不使用上述 IF 语句，可能会出现问题。涉及哪些潜在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:53:04.723

第二种方法*几乎*没问题。但是，要处理*“快速点击”*问题，您可能需要考虑 jQuery 的[.stop()](http://api.jquery.com/stop/)或[.clearQueue()](http://api.jquery.com/clearQueue/)函数，因为它们会停止任何以前的动画并继续使用新动画。

就像是：

```
$('#button1').click(function() {
    $('#widget').stop().show('fast');
});

$('#button2').click(function() {
    $('#widget').stop().hide('fast');
}); 
```

这两个函数之间的最大区别在于 clearQueue 不仅仅用于停止动画（回调函数、列表方法等）。在这种情况下，.stop() 应该是您所需要的，尽管您可能希望在启用不同参数的不同浏览器中对其进行测试 (.stop(false, true) ...) 并查看它在每个浏览器中的功能并进行调整根据您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:26:18.230

第二种方法很好，正如 pst 的回答中提到的那样，它可以正常工作，并且在回答 pst 的问题时，快速单击将没有任何效果，因为它会知道它已被显示并返回 false 以避免任何失败。

# mysql - MySQL 搜索“$”（美元符号）失败？

> ID：13035906
> 
> 赞同：3
> 
> 时间：2012-10-23T17:20:51.093
> 
> 标签：mysql, special-characters

被要求在大量文本中查找美元值。可以对美元符号进行搜索吗？如果是这样，任何示例/指导将不胜感激。当前查询...

```
select * from concept where concept_description like '%$%'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:35:45.900

您可能想使用`LOCATE`来查看 col 值是否包含`$`例如

```
 SELECT * FROM concept WHERE LOCATE('$', concept_description) > 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:41:15.507

给出的查询将选择`concept_description`包含 a的行`$`，但我假设您想实际提取美元金额？如果一个字段中只有一美元，则可以使用

```
SELECT
SUBSTRING(
    concept_description,
    LOCATE('$', concept_description),
    LOCATE(' ', concept_description, LOCATE('$', concept_description)) - LOCATE('$', concept_description)
)
FROM table
WHERE LOCATE('$', concept_description) > 0 
```

这假设美元金额后面总是有一个空格，并且可能需要对索引进行一些捏造。最好用一个简单的查询来提取整个字段，然后使用正则表达式来获取任何美元值。

# javascript - 销毁后打开 Jquery 对话框

> ID：13035908
> 
> 赞同：0
> 
> 时间：2012-10-23T17:21:00.733
> 
> 标签：javascript, jquery, jquery-ui, dialog, jquery-ui-dialog

我在 jquery 对话框中出现了一个 youtube 视频，所以如果它在对话框窗口关闭时播放，它将继续在幕后播放。

结果我做的是在关闭窗口时销毁它：

```
 $("#gallery_reel").dialog({
            autoOpen: false,
            width: 540,
            close: function() {
                $(this).dialog('destroy');
            }
    }); 
```

但是一旦对话框被破坏，除非我刷新页面，否则它不会再次打开。如何重新打开对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:29:18.237

我建议只使用关闭功能来停止[youtube 视频](https://stackoverflow.com/questions/13035908/opening-jquery-dialog-after-destroying-it/13036027#answer-13035984)，但如果你坚持其他，而不是破坏，请尝试以下操作：

> **非首选**（将 html 复制到新清空的对话框中）

```
$("#gallery_reel").dialog({
    autoOpen: false,
    width: 540,
    close: function() {
        var inrHTML = $(this).html();
        $(this).empty().html(inrHTML);
    }
}); 
```

> **应该是更好的方法**（基于大多数“嵌入式 youtube”视频都在 iframe 中的想法，我认为

```
$("#gallery_reel").dialog({
    autoOpen: false,
    width: 540,
    close: function() {
        $(this).find("iframe").get(0).stopVideo();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:26:25.727

要停止 Youtube 视频：

```
$('#playerID').get(0).stopVideo(); 
```

从[使用 jquery 停止 youtube 视频？](https://stackoverflow.com/questions/2128535/stop-a-youtube-video-with-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:35:24.663

这是因为当您“销毁”时，您会将映射的 var 从 jQuery 堆栈中弹出。

```
varname = new $("#gallery_reel").dialog(.....); 
```

会将它弹回堆栈

这里的问题是您需要销毁还是关闭对话框。

当他们离开页面而不是关闭对话框时正确使用变量和清理可以解决这个问题

# ssl - 使用证书和自定义 ssl 套接字工厂到 ldap 的 SSL 连接

> ID：13035910
> 
> 赞同：2
> 
> 时间：2012-10-23T17:21:24.043
> 
> 标签：ssl, ldap, jndi

这是我的场景，我想连接到 ldap usign jndi，我正在使用读取信任库和密钥库的自定义 SSLSOcketfactory。上下文创建成功，但是当我尝试使用相同的凭据进行身份验证时，它会抛出一个错误，指出不支持身份验证方法。

这是我的自定义 ssl 套接字代码 -

```
try {
    StringBuffer trustStore = new StringBuffer("c:/Temp/certs/TrustStore");
            StringBuffer keyStore =  new StringBuffer("c:/Temp/certs/keystore.arun");
    StringBuffer keyStorePass = new StringBuffer("xxxxx");
               StringBuffer keyAlias = new StringBuffer("user");
        StringBuffer keyPass =  new StringBuffer("XXXX");

            TrustManagerFactory tmf =TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());

    FileInputStream fis = new FileInputStream(trustStore.toString());
    KeyStore ks1 = KeyStore.getInstance("jks");
    ks1.load(fis, trustStorePass.toString().toCharArray());
            fis.close();
    tmf.init(ks1);
    TrustManager[] tms = tmf.getTrustManagers();
    FileInputStream fin = new FileInputStream(keyStore.toString());
    KeyStore ks2 = KeyStore.getInstance("jks");
    ks2.load(fin, keyStorePass.toString().toCharArray());
    fin.close();
    KeyManagerFactory kmf =
        KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
    kmf.init(ks2, keyStorePass.toString().toCharArray());
    KeyManager[] kms = kmf.getKeyManagers();
    if (keyAlias != null && keyAlias.length() > 0) {
            for (int i = 0; i < kms.length; i++) {
                // We can only deal with instances of X509KeyManager
                if (kms[i] instanceof X509KeyManager)
                    kms[i] = new CustomKeyManager(
                            (X509KeyManager) kms[i], keyAlias.toString());
            }
        }

SSLContext context = SSLContext.getInstance("TLS");
    context.init(kms,tms, null);
    ssf = context.getSocketFactory();
 } catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}

  public static SocketFactory getDefault() {

    return new CustomSSLSocketFactory();
} 
```

使用这个 CustomSSLSocketFactory 的 jndi 代码如下

```
 env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.PROVIDER_URL, "ldaps://wx64ads01a.vapps.esca.com:636");
    env.put(Context.REFERRAL, "follow");
env.put("java.naming.ldap.derefAliases", "always");
env.put("java.naming.ldap.factory.socket","com.eterra.security.authz.dao.CustomSSLSocketFactory" );

try {
    ctx = new InitialLdapContext(env, null);
// start ssl session for server authentication
    }catch(Exception e ){
    System.out.println(e);
}
    try{
ctx.addToEnvironment(Context.SECURITY_AUTHENTICATION,
                    "EXTERNAL");
    String path = "CN=domain,DC=casa,DC=com"
    String inFilter = "(&(objectClass=*))";
     SearchControls sc = new SearchControls();
sc.setSearchScope(SearchControls.SUBTREE_SCOPE);
NamingEnumeration<SearchResult> results = null;

results = ctx.search(path, inFilter, sc);
  } 
```

我的上下文创建得很完美，但是当我尝试验证并绑定到 ldap 时，我得到了 Invalid Authentication method 。任何帮助将不胜感激，现在很长一段时间以来一直在努力解决这些错误。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:58:30.780

> Context.SECURITY_AUTHENTICATION, "外部"
> 
> 当我尝试验证并绑定到 ldap 时，我得到 Invalid Authentication method

所以你的 LDAP 服务器不支持外部身份验证。

# c# - 无法让 asp:RegularExpressionValidator 工作

> ID：13035913
> 
> 赞同：4
> 
> 时间：2012-10-23T17:21:38.767
> 
> 标签：c#, asp.net

我在让正则表达式字段验证器为我尝试更新的 asp 页面工作时遇到问题。

这是 asp:Panel 的重要部分：

```
<asp:Panel ID="pnlEmailAddressCollection" runat="server">
    <div id="POMInput-wrapper">
        <div class="POMInput-FieldText">
            <span class="POMInput-wrapper-text">Name:</span>

            <br />
            <span class="POMInput-wrapper-text">Email Address:</span>

            <br />
        </div>
        <div class="POMInput-FieldEntry">
            <asp:TextBox ID="txtEmailAddress" name="emailAddress" runat="server" CssClass="textInput"></asp:TextBox>
            <asp:TextBox ID="txtUserName" runat="server" name="firstName" CssClass="textInput"></asp:TextBox>
        </div>

        <asp:RequiredFieldValidator ID="rfvNameValidator"  runat="server" 
            ErrorMessage="Please enter your name"
            ControlToValidate="txtUserName" 
            Display="None" />

        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
            ErrorMessage="Please enter your email address"
            ControlToValidate="txtEmailAddress" 
            Display="None" />

        <asp:RegularExpressionValidator ID="rfvEmailValidator2" runat="server" 
            ErrorMessage="Please enter a valid email address" 
            ControlToValidate="txtEmailAddress"
            Display="None"
            ValidationExpression="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$" />

        <asp:ValidationSummary ID="ValidationSummary1" runat="server"
            ShowMessageBox="true" 
            ShowSummary="false"
            EnableClientScript="true" />                        
    </div>
</asp:Panel> 
```

我输入的任何电子邮件目前都失败了。 asp:RequiredFieldValidator 的工作如预期。

我在一个测试项目中测试了正则表达式，正则表达式看起来不错（在有效电子邮件上返回 true，在无效电子邮件上返回 false）。我是否错误地设置了 asp:RegularExpressionValidator？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:30:25.040

您应该删除双反斜杠：

```
ValidationExpression="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$" 
```

请注意，您将两个反斜杠放在您仅指一个的位置。如果您要从后面的代码中设置此表达式，则您提供的字符串是正确的。但在 aspx 中，您不必转义反斜杠。

目前接受的电子邮件地址类似于 abc@abc{backslash}.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:59:18.797

您可以尝试使用此代码

```
ValidationExpression="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}" 
```

注意：您可以删除 ^ 和 $ 符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:27:11.993

正则表达式在 .NET（服务器端）中有效，但由于客户端 JScript 实现而失败，如[备注**部分**所述](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)。要验证这一点（它通过服务器端验证），请将`EnableClientScript`验证器上的属性设置为 false。

然后撤消该更改并验证正则表达式将在客户端传递。如果对您来说更容易，您可以使用[在线测试仪](http://www.regular-expressions.info/javascriptexample.html)。

# localization - TYPO3 语言限制绑定内容

> ID：13035914
> 
> 赞同：1
> 
> 时间：2012-10-23T17:22:00.003
> 
> 标签：localization, typo3

我将 TYPO3 用于多语言网站，我希望前端的本地化模式不具有约束力。这意味着仅限于葡萄牙语的用户应该只能用葡萄牙语创建新元素。如果它具有约束力，他无法创建但只能翻译原件（[官方解释](http://typo3.org/documentation/document-library/core-documentation/doc_l10nguide/1.1.0/view/1/3/#id1020483)）问题是我将用户限制为仅限葡萄牙语，并且在与该用户登录时，他无法创建任何内容元素，无论是默认还是葡萄牙语只要。

如果我给用户默认内容权限，他可以删除和创建我不想要的默认内容。

我错过了什么吗？默认行为不应该没有约束力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:43:26.703

您可以在用户组设置中的后端用户管理中根据语言设置用户权限。

1）选择您的用户

*   删除访问权限选项卡中的所有内容 -> 此处的所有设置现在需要在用户组设置中完成。
*   选项卡“常规”-> 组-> 使用加号图标定义新组

2) 用户组：默认语言只读

*   选项卡访问列表 -> 选中“显示辅助选项卡”和“包括访问列表”
*   表格（列表）：页面、页面内容
*   表（修改）：无
*   语言限制：默认
*   根据需要设置其他字段

3）用户组：葡萄牙语读/写

*   选项卡访问列表 -> 选中“显示辅助选项卡”和“包括访问列表”
*   表格（列表）：页面、页面内容
*   表格（修改）：页面内容
*   语言限制：葡萄牙语
*   根据需要设置其他字段

关于绑定：绑定是基于记录的东西——与用户权限无关。这意味着：记录编号。123 语言英语对应于记录 nr。334 丹麦语。通常这是使用复制内容按钮创建的。如果您想用图像翻译文本，这非常有用 - 如果您用另一种语言复制内容，则不必再次上传图像。

如果您需要树的子部分的更多权限，请检查您的访问模块，如果这还不够，请使用 be_acl 扩展。

# c# - 流包装器使流可搜索？

> ID：13035925
> 
> 赞同：24
> 
> 时间：2012-10-23T17:22:45.320
> 
> 标签：c#, .net, stream, naudio, seek

我有一个`System.IO.Stream`不可搜索的只读实现（并且它`Position`总是返回 0）。我需要将它发送给`Seek`在流上执行一些操作（也就是设置位置）的消费者。这不是一个巨大的搜索——比如从当前位置开始+/- 100。是否有现有的`Stream`包装器可以为流添加缓冲能力以进行简单的 Seek 操作？

更新：我应该补充一点，我的消费者是 NAudio Mp3FileReader。我真的只需要一种播放（缓慢且无限期地）流式 MP3 的方法。我认为这是一个错误，NAudio 期望能够随意寻找他们的数据源。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T17:27:17.837

向前寻找很容易（只需阅读），但没有缓冲就无法向后寻找。也许只是：

```
using(var ms = new MemoryStream()) {
    otherStream.CopyTo(ms);
    ms.Position = 0;
    // now work with ms
} 
```

但是，这仅适用于已知结束（不需要执行哪些流）的中小型流（不是 GB）。如果您需要更大的流，`FileStream`则可以使用临时文件，但 IO 密集度要高得多。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-01-20T01:29:53.550

这是一个包装器，可以使任何`Stream`可搜索的**读取**操作。

它通过缓存来自底层流的读取来工作，最多缓存构造函数中指定的字节数。当内存限制禁止 Marc Gravell 的解决方案时，这将派上用场。

支持的查找操作：

*   寻求前向使用`SeekOrigin.Current`并`SeekOrigin.Begin`适用于任意偏移量
*   使用`SeekOrigin.Current`并从底层流中的当前位置`SeekOrigin.Begin`向下搜索`-seekBackBufferSize`字节（这可能与`readSeekableStream.Position`先前的向后搜索后不同）
*   寻求使用`SeekOrigin.End`作品`offset >= -seekBackBufferSize && offset <= 0`

一般说明

*   `Seek`方法和属性完全在内部`Position`处理，不涉及底层流（无论如何只会抛出）
*   搜索只影响流的**读取**部分，因此类的名称
*   所有写操作都简单地委托给底层流
*   用 this 包装已经可搜索的流将浪费资源
*   下面解决的一些问题`ReadSeekableStream`也可以由我的[`PeekableStream`](https://stackoverflow.com/a/7281113/709537)班级解决

这个实现是新鲜的，还没有经过实战。然而，我已经对很多搜索/阅读案例和极端案例进行了单元测试，并将其与 (freely seekable) 进行了交叉比较`MemoryStream`。

```
public class ReadSeekableStream : Stream
{
    private long _underlyingPosition;
    private readonly byte[] _seekBackBuffer;
    private int _seekBackBufferCount;
    private int _seekBackBufferIndex;
    private readonly Stream _underlyingStream;

    public ReadSeekableStream(Stream underlyingStream, int seekBackBufferSize)
    {
        if (!underlyingStream.CanRead)
            throw new Exception("Provided stream " + underlyingStream + " is not readable");
        _underlyingStream = underlyingStream;
        _seekBackBuffer = new byte[seekBackBufferSize];
    }

    public override bool CanRead { get { return true; } }
    public override bool CanSeek { get { return true; } }

    public override int Read(byte[] buffer, int offset, int count)
    {
        int copiedFromBackBufferCount = 0;
        if (_seekBackBufferIndex < _seekBackBufferCount)
        {
            copiedFromBackBufferCount = Math.Min(count, _seekBackBufferCount - _seekBackBufferIndex);
            Buffer.BlockCopy(_seekBackBuffer, _seekBackBufferIndex, buffer, offset, copiedFromBackBufferCount);
            offset += copiedFromBackBufferCount;
            count -= copiedFromBackBufferCount;
            _seekBackBufferIndex += copiedFromBackBufferCount;
        }
        int bytesReadFromUnderlying = 0;
        if (count > 0)
        {
            bytesReadFromUnderlying = _underlyingStream.Read(buffer, offset, count);
            if (bytesReadFromUnderlying > 0)
            {
                _underlyingPosition += bytesReadFromUnderlying;

                var copyToBufferCount = Math.Min(bytesReadFromUnderlying, _seekBackBuffer.Length);
                var copyToBufferOffset = Math.Min(_seekBackBufferCount, _seekBackBuffer.Length - copyToBufferCount);
                var bufferBytesToMove = Math.Min(_seekBackBufferCount - 1, copyToBufferOffset);

                if (bufferBytesToMove > 0)
                    Buffer.BlockCopy(_seekBackBuffer, _seekBackBufferCount - bufferBytesToMove, _seekBackBuffer, 0, bufferBytesToMove);
                Buffer.BlockCopy(buffer, offset, _seekBackBuffer, copyToBufferOffset, copyToBufferCount);
                _seekBackBufferCount = Math.Min(_seekBackBuffer.Length, _seekBackBufferCount + copyToBufferCount);
                _seekBackBufferIndex = _seekBackBufferCount;
            }
        }
        return copiedFromBackBufferCount + bytesReadFromUnderlying;
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        if (origin == SeekOrigin.End) 
            return SeekFromEnd((int) Math.Max(0, -offset));

        var relativeOffset = origin == SeekOrigin.Current
            ? offset
            : offset - Position;

        if (relativeOffset == 0)
            return Position;
        else if (relativeOffset > 0)
            return SeekForward(relativeOffset);
        else
            return SeekBackwards(-relativeOffset);
    }

    private long SeekForward(long origOffset)
    {
        long offset = origOffset;
        var seekBackBufferLength = _seekBackBuffer.Length;

        int backwardSoughtBytes = _seekBackBufferCount - _seekBackBufferIndex;
        int seekForwardInBackBuffer = (int) Math.Min(offset, backwardSoughtBytes);
        offset -= seekForwardInBackBuffer;
        _seekBackBufferIndex += seekForwardInBackBuffer;

        if (offset > 0)
        {
            // first completely fill seekBackBuffer to remove special cases from while loop below
            if (_seekBackBufferCount < seekBackBufferLength)
            {
                var maxRead = seekBackBufferLength - _seekBackBufferCount;
                if (offset < maxRead)
                    maxRead = (int) offset;
                var bytesRead = _underlyingStream.Read(_seekBackBuffer, _seekBackBufferCount, maxRead);
                _underlyingPosition += bytesRead;
                _seekBackBufferCount += bytesRead;
                _seekBackBufferIndex = _seekBackBufferCount;
                if (bytesRead < maxRead)
                {
                    if (_seekBackBufferCount < offset)
                        throw new NotSupportedException("Reached end of stream seeking forward " + origOffset + " bytes");
                    return Position;
                }
                offset -= bytesRead;
            }

            // now alternate between filling tempBuffer and seekBackBuffer
            bool fillTempBuffer = true;
            var tempBuffer = new byte[seekBackBufferLength];
            while (offset > 0)
            {
                var maxRead = offset < seekBackBufferLength ? (int) offset : seekBackBufferLength;
                var bytesRead = _underlyingStream.Read(fillTempBuffer ? tempBuffer : _seekBackBuffer, 0, maxRead);
                _underlyingPosition += bytesRead;
                var bytesReadDiff = maxRead - bytesRead;
                offset -= bytesRead;
                if (bytesReadDiff > 0 /* reached end-of-stream */ || offset == 0) 
                {
                    if (fillTempBuffer)
                    {
                        if (bytesRead > 0)
                        {
                            Buffer.BlockCopy(_seekBackBuffer, bytesRead, _seekBackBuffer, 0, bytesReadDiff);
                            Buffer.BlockCopy(tempBuffer, 0, _seekBackBuffer, bytesReadDiff, bytesRead);
                        }
                    }
                    else
                    {
                        if (bytesRead > 0)
                            Buffer.BlockCopy(_seekBackBuffer, 0, _seekBackBuffer, bytesReadDiff, bytesRead);
                        Buffer.BlockCopy(tempBuffer, bytesRead, _seekBackBuffer, 0, bytesReadDiff);
                    }
                    if (offset > 0)
                        throw new NotSupportedException("Reached end of stream seeking forward " + origOffset + " bytes");
                }
                fillTempBuffer = !fillTempBuffer;
            }
        }
        return Position;
    }

    private long SeekBackwards(long offset)
    {
        var intOffset = (int)offset;
        if (offset > int.MaxValue || intOffset > _seekBackBufferIndex)
            throw new NotSupportedException("Cannot currently seek backwards more than " + _seekBackBufferIndex + " bytes");
        _seekBackBufferIndex -= intOffset;
        return Position;
    }

    private long SeekFromEnd(long offset)
    {
        var intOffset = (int) offset;
        var seekBackBufferLength = _seekBackBuffer.Length;
        if (offset > int.MaxValue || intOffset > seekBackBufferLength)
            throw new NotSupportedException("Cannot seek backwards from end more than " + seekBackBufferLength + " bytes");

        // first completely fill seekBackBuffer to remove special cases from while loop below
        if (_seekBackBufferCount < seekBackBufferLength)
        {
            var maxRead = seekBackBufferLength - _seekBackBufferCount;
            var bytesRead = _underlyingStream.Read(_seekBackBuffer, _seekBackBufferCount, maxRead);
            _underlyingPosition += bytesRead;
            _seekBackBufferCount += bytesRead;
            _seekBackBufferIndex = Math.Max(0, _seekBackBufferCount - intOffset);
            if (bytesRead < maxRead)
            {
                if (_seekBackBufferCount < intOffset)
                    throw new NotSupportedException("Could not seek backwards from end " + intOffset + " bytes");
                return Position;
            }
        }
        else
        {
            _seekBackBufferIndex = _seekBackBufferCount;
        }

        // now alternate between filling tempBuffer and seekBackBuffer
        bool fillTempBuffer = true;
        var tempBuffer = new byte[seekBackBufferLength];
        while (true)
        {
            var bytesRead = _underlyingStream.Read(fillTempBuffer ? tempBuffer : _seekBackBuffer, 0, seekBackBufferLength);
            _underlyingPosition += bytesRead;
            var bytesReadDiff = seekBackBufferLength - bytesRead;
            if (bytesReadDiff > 0) // reached end-of-stream
            {
                if (fillTempBuffer)
                {
                    if (bytesRead > 0)
                    {
                        Buffer.BlockCopy(_seekBackBuffer, bytesRead, _seekBackBuffer, 0, bytesReadDiff);
                        Buffer.BlockCopy(tempBuffer, 0, _seekBackBuffer, bytesReadDiff, bytesRead);
                    }
                }
                else
                {
                    if (bytesRead > 0)
                        Buffer.BlockCopy(_seekBackBuffer, 0, _seekBackBuffer, bytesReadDiff, bytesRead);
                    Buffer.BlockCopy(tempBuffer, bytesRead, _seekBackBuffer, 0, bytesReadDiff);
                }
                _seekBackBufferIndex -= intOffset;
                return Position;
            }
            fillTempBuffer = !fillTempBuffer;
        }
    }

    public override long Position
    {
        get { return _underlyingPosition - (_seekBackBufferCount - _seekBackBufferIndex); }
        set { Seek(value, SeekOrigin.Begin); }
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
            _underlyingStream.Close();
        base.Dispose(disposing);
    }

    public override bool CanTimeout { get { return _underlyingStream.CanTimeout; } }
    public override bool CanWrite { get { return _underlyingStream.CanWrite; } }
    public override long Length { get { return _underlyingStream.Length; } }
    public override void SetLength(long value) { _underlyingStream.SetLength(value); }
    public override void Write(byte[] buffer, int offset, int count) { _underlyingStream.Write(buffer, offset, count); }
    public override void Flush() { _underlyingStream.Flush(); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:23:03.793

另一种解决方案可能是创建自己的流类来包装另一个流。将 Seek 实施为 NOP。

```
class MyStream : Stream
{
    public MyStream(Stream baseStream) { this.baseStream = baseStream; }
    private Stream baseStream;

    // Delegate all operations except Seek/CanSeek to baseStream

    public override bool CanSeek { get { return true; } }
    public override long Seek(long offset, SeekOrigin origin) { return baseStream.Position; }
} 
```

如果玩家没有充分的理由寻求，这可能会奏效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-27T15:12:47.610

我只是使用 Amazon SDK 中的[MakeStreamSeekable](https://docs.aws.amazon.com/sdkfornet1/latest/apidocs/html/M_Amazon_S3_Util_AmazonS3Util_MakeStreamSeekable.htm)方法：

* * *

# MakeStreamSeekable 方法（输入）

将不可搜索的流转换为 System.IO.MemoryStream。MemoryStream 的位置可以任意移动。

## 声明语法

**C＃**

```
public static Stream MakeStreamSeekable(
    Stream input
) 
```

## 参数

`*input* ([Stream][2])` 要转换的流

## 返回值

可搜索的 MemoryStream

## 评论

MemoryStreams 使用字节数组作为它们的后备存储。请谨慎使用，因为一个非常大的流很可能会导致系统资源被用完。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-30T18:19:37.743

Microsoft BizTalk 实现了一个可搜索的流。这个概念是它是一个具有输入流和缓冲流的流。输入流是不可搜索的流，而缓冲流是您想要使用的任何可以充当缓冲区的流类型。因此，任何时候您提前搜索或读取它都会将数据从输入流复制到缓冲区。每当您回溯并阅读您已经阅读过的内容时，它都会从缓冲区中读取。

知道输入流是否可搜索并在可以时跳过使用缓冲区是足够聪明的。

有很多地方可以找到代码。其中之一在[这里](https://searchcode.com/codesearch/view/14192552/)，我已经包括在下面。该代码确实依赖于缓冲区流的 VirtualStream，它将使用内存，直到缓冲区太大然后使用磁盘。您也可以获取该代码，或者轻松删除依赖项。

```
//---------------------------------------------------------------------
// File: SeekableReadOnlyStream.cs
// 
// Summary: A sample pipeline component which demonstrates how to promote message context
//          properties and write distinguished fields for XML messages using arbitrary
//          XPath expressions.
//
// Sample: Arbitrary XPath Property Handler Pipeline Component SDK 
//
//---------------------------------------------------------------------
// This file is part of the Microsoft BizTalk Server 2006 SDK
//
// Copyright (c) Microsoft Corporation. All rights reserved.
//
// This source code is intended only as a supplement to Microsoft BizTalk
// Server 2006 release and/or on-line documentation. See these other
// materials for detailed information regarding Microsoft code samples.
//
// THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY
// KIND, WHETHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
// IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR
// PURPOSE.
//---------------------------------------------------------------------

using System;
using System.IO;
using System.Diagnostics;

namespace Microsoft.Samples.BizTalk.Adapter.Tcp
{
    /// <summary>
    /// Implements a seekable read-only stream which uses buffering if
    /// underlying stream is not seekable. Buffer in memory has size
    /// threshold and overflows to disk (temporary file) if number of bytes.
    /// </summary>
    public class SeekableReadOnlyStream : Stream
    {
        /// <summary>
        /// Initializes a SeekableReadOnlyStream instance with base stream and 
        /// buffering stream.
        /// </summary>
        /// <param name="baseStream">Base stream</param>
        /// <param name="overflowStream">Buffering stream</param>
        public SeekableReadOnlyStream(Stream baseStream, Stream bufferingStream)
        {
            if (null == baseStream)
                throw new ArgumentNullException("baseStream");
            if (null == bufferingStream)
                throw new ArgumentNullException("bufferingStream");

            // Sanity check - make sure that buffering stream is seekable
            if (!bufferingStream.CanSeek)
                throw new NotSupportedException("Buffering stream must be seekable");

            this.baseStream = baseStream;
            this.bufferingStream = bufferingStream;
        }

        /// <summary>
        /// Initializes a SeekableReadOnlyStream instance with base stream and inherently uses
        /// VirtualStream instance as buffering stream.
        /// </summary>
        /// <param name="baseStream">Base stream</param>
        public SeekableReadOnlyStream(Stream baseStream) : this(baseStream, new VirtualStream())
        {
            // Empty
        }

        /// <summary>
        /// Initializes a SeekableReadOnlyStream instance with base stream and buffer size, and 
        /// inherently uses VirtualStream instance as buffering stream.
        /// </summary>
        /// <param name="baseStream">Base stream</param>
        /// <param name="bufferSize">Buffer size</param>
        public SeekableReadOnlyStream(Stream baseStream, int bufferSize) : this(baseStream, new VirtualStream(bufferSize))
        {
            // Empty
        }

        /// <summary>
        /// Gets a flag indicating whether this stream can be read.
        /// </summary>
        public override bool CanRead
        {
            get { return true; }
        }

        /// <summary>
        /// Gets a flag indicating whether this stream can be written to.
        /// </summary>
        public override bool CanWrite
        {
            get { return false; }
        }

        public override bool CanSeek
        {
            get { return true; }
        }

        /// <summary>
        /// Gets or sets a stream position.
        /// </summary>
        public override long Position
        {
            get 
            { 
                // Check if base stream is seekable
                if (baseStream.CanSeek)
                    return baseStream.Position;

                return bufferingStream.Position; 
            }
            set
            {
                // Check if base stream is seekable
                if (baseStream.CanSeek)
                {
                    baseStream.Position = value;
                    return;
                }

                // Check if current position is the same as being set
                if (bufferingStream.Position == value)
                    return;

                // Check if stream position is being set to the value which is in already
                // read to the buffering stream space, i.e. less than current buffering stream
                // position or less than length of the buffering stream
                if (value < bufferingStream.Position || value < bufferingStream.Length)
                {
                    // Just change position in the buffering stream
                    bufferingStream.Position = value;
                }
                else
                {
                    //
                    // Need to read buffer from the base stream from the current position in 
                    // base stream to the position being set and write that buffer to the end
                    // of the buffering stream
                    //

                    // Set position to the last byte in the buffering stream
                    bufferingStream.Seek(0, SeekOrigin.End);

                    // Read buffer from the base stream and write it to the buffering stream
                    // in 4K chunks
                    byte [] buffer = new byte[ 4096 ];
                    long bytesToRead = value - bufferingStream.Position;
                    while (bytesToRead > 0)
                    {
                        // Read to buffer 4K or byteToRead, whichever is less
                        int bytesRead = baseStream.Read(buffer, 0, (int) Math.Min(bytesToRead, buffer.Length));

                        // Check if any bytes were read
                        if (0 == bytesRead)
                            break;

                        // Write read bytes to the buffering stream
                        bufferingStream.Write(buffer, 0, bytesRead);

                        // Decrease bytes to read counter
                        bytesToRead -= bytesRead;
                    }

                    //
                    // Since this stream is not writable, any attempt to point Position beyond the length
                    // of the base stream will not succeed, and buffering stream position will be set to the
                    // last byte in the buffering stream.
                    //
                }
            }
        }

        /// <summary>
        /// Seeks in stream. For this stream can be very expensive because entire base stream 
        /// can be dumped into buffering stream if SeekOrigin.End is used.
        /// </summary>
        /// <param name="offset">A byte offset relative to the origin parameter</param>
        /// <param name="origin">A value of type SeekOrigin indicating the reference point used to obtain the new position</param>
        /// <returns>The new position within the current stream</returns>
        public override long Seek(long offset, SeekOrigin origin)
        {
            // Check if base stream is seekable
            if (baseStream.CanSeek)
                return baseStream.Seek(offset, origin);

            if (SeekOrigin.Begin == origin)
            {
                // Just set the absolute position using Position property
                Position = offset;
                return Position;
            }

            if (SeekOrigin.Current == origin)
            {
                // Set the position using current Position property value plus offset
                Position = Position + offset;
                return Position;
            }

            if (SeekOrigin.End == origin)
            {
                //
                // Need to read all remaining not read bytes from the base stream to the 
                // buffering stream. We can't use offset here because stream size may not
                // be available because it's not seekable. Then we'll set the position 
                // based on buffering stream size.
                //

                // Set position to the last byte in the buffering stream
                bufferingStream.Seek(0, SeekOrigin.End);

                // Read all remaining bytes from the base stream to the buffering stream
                byte [] buffer = new byte[ 4096 ];
                for (;;)
                {
                    // Read buffer from base stream
                    int bytesRead = baseStream.Read(buffer, 0, buffer.Length);

                    // Break the reading loop if the base stream is exhausted
                    if (0 == bytesRead)
                        break;

                    // Write buffer to the buffering stream
                    bufferingStream.Write(buffer, 0, bytesRead);
                }

                // Now buffering stream size is equal to the base stream size. Set position
                // using begin origin
                Position = bufferingStream.Length - offset;
                return Position;
            }

            throw new NotSupportedException("Not supported SeekOrigin");
        }

        /// <summary>
        /// Gets the length in bytes of the stream. For this stream can be very expensive
        /// because entire base stream will be dumped into buffering stream.
        /// </summary>
        public override long Length
        {
            get
            {
                // Check if base stream is seekable
                if (baseStream.CanSeek)
                    return baseStream.Length;

                // Preserve the current stream position
                long position = Position;

                // Seek to the end of stream
                Seek(0, SeekOrigin.End);

                // Length will be equal to the current position
                long length = Position;

                // Restore the current stream position
                Position = position;

                return length;
            }
        }

        /// <summary>
        /// Reads a sequence of bytes from the current stream and advances the position within the stream by the number of bytes read.
        /// </summary>
        /// <param name="buffer">An array of bytes. When this method returns, the buffer contains the specified byte array with the values between offset and (offset + count- 1) replaced by the bytes read from the current source</param>
        /// <param name="offset">The zero-based byte offset in buffer at which to begin storing the data read from the current stream</param>
        /// <param name="count">The maximum number of bytes to be read from the current stream</param>
        /// <returns>The total number of bytes read into the buffer. This can be less than the number of bytes requested if that many bytes are not currently available, or zero (0) if the end of the stream has been reached</returns>
        public override int Read(byte[] buffer, int offset, int count)
        {
            // Check if base stream is seekable
            if (baseStream.CanSeek)
                return baseStream.Read(buffer, offset, count);

            int bytesReadTotal = 0;

            // Check if buffering stream has some bytes to read, starting from the
            // current position
            if (bufferingStream.Length > bufferingStream.Position)
            {
                // Read available bytes in buffering stream or count bytes to the buffer, whichever is less
                bytesReadTotal = bufferingStream.Read(buffer, offset, (int) Math.Min(bufferingStream.Length - bufferingStream.Position, count));

                // Account for bytes read from the buffering stream
                count -= bytesReadTotal;
                offset += bytesReadTotal;
            }

            // Check if we have any more bytes to read
            if (count > 0)
            {
                Debug.Assert(bufferingStream.Position == bufferingStream.Length);

                //
                // At this point, buffering stream has position set to its end. We need to read buffer from
                // the base stream and write it to the buffering stream
                //

                // Read count bytes from the base stream starting from offset
                int bytesRead = baseStream.Read(buffer, offset, count);

                // Check if bytes were really read
                if (bytesRead > 0)
                {
                    // Write number of read bytes to the buffering stream starting from offset in buffer
                    bufferingStream.Write(buffer, offset, bytesRead);
                }

                // Add number of bytes read at this step to the number of totally read bytes
                bytesReadTotal += bytesRead;
            }

            return bytesReadTotal;
        }

        /// <summary>
        /// Writes to stream.
        /// </summary>
        /// <param name="buffer">Buffer to write to stream</param>
        /// <param name="offset">Stream offset to start write from</param>
        /// <param name="count">Number of bytes from buffer to write</param>
        /// <exception cref="NotSupportedException">Is thrown always</exception>
        public override void Write(byte[] buffer, int offset, int count)
        {
            throw new NotSupportedException();
        }

        /// <summary>
        /// Set stream length.
        /// </summary>
        /// <param name="value">Stream length</param>
        /// <exception cref="NotSupportedException">Is thrown always</exception>
        public override void SetLength(long value)
        {
            throw new NotSupportedException();
        }

        /// <summary>
        /// Closes base and buffering streams.
        /// </summary>
        public override void Close()
        {
            // Close underlying streams
            baseStream.Close();
            bufferingStream.Close();
        }

        /// <summary>
        /// Flushes the stream.
        /// </summary>
        public override void Flush()
        {
            // Flush the buffering stream
            bufferingStream.Flush();
        }

        private Stream baseStream;
        private Stream bufferingStream;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-07T23:57:25.933

如果使用`System.Net.WebClient`, 而不是 using `OpenRead()`which 返回`Stream`使用`webClient.DownloadData("https://your.url")`来获取字节数组，然后您可以将其转换为`MemoryStream`. 这是一个例子：

```
byte[] buffer = client.DownloadData(testBlobFile);
using (var stream = new MemoryStream(buffer))
{
    ... your code using the stream ...
} 
```

显然，这`Stream`会在创建之前下载所有内容，因此可能会破坏使用`Stream`.

# c# - 如何将 Timer.Elapsed 与我的 WCF 服务同步？

> ID：13035929
> 
> 赞同：1
> 
> 时间：2012-10-23T17:23:03.573
> 
> 标签：c#, wcf, timer, synchronization

```
[ServiceBehavior(InstanceContextMode.PerSession,
    UseSynchronizationContext=false,
    ConcurrencyMode = ConcurrencyMode.Single)]
class IMyService : IMyService
{
    System.Timers.Timer timer;
    ....

    void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        // I want to arrive here on the service thread
    }
} 
```

我的服务的参数如上。

我在某个服务状态对象中使用 System.Timers.Timer，我希望 Timer.Elapsed 事件在服务线程上回火。使用 SynchronizationContext 我可以使用以下方法实现此目的：

```
context.Post(SendOrPostCallback callback, object state) 
```

我可以把它放在 Timer.Elapsed 事件中，回调将在我想要的服务线程上调用。

如果没有 SynchronizationContext，我显然需要使用 ISynchronizeInvoke 对象设置 Timer.SynchronizingObject，以便相应地编组经过的事件。但是，我在哪里可以从 WCF 服务中获取 ISynchronizeInvoke 对象？它有一个吗？

# facebook - Facebook og:title 仅在最近的活动中获取，而不是在墙上

> ID：13035930
> 
> 赞同：1
> 
> 时间：2012-10-23T17:23:09.397
> 
> 标签：facebook, facebook-graph-api

我正在使用 facebook open graph 进行如下自定义操作：

UserName 正在使用 MyApp 标记帖子。

它运作良好，但我只有一个问题：

在我最近的活动中，我有：Bed77 正在使用 MyApp 标记一个红色华丽的帖子。

在我的墙上我有：Bed77 正在用 MyApp 标记一个帖子。

“ *Red Gorgeous Post* ”是我在页面中为该对象设置的 og:title。

为什么它只在最近的活动中获取而不是在墙上？这是一个自动的Facebook决定？

用一张图解释： ![在此处输入图像描述](../Images/7de8340f47f013b2f3315db1ad29b327.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:12:14.690

是的，*对象类型*和*对象标题*的位置由 Facebook 在所谓的“时间轴单元”中确定。

在您的示例中，“红色华丽 POST”（标题）显示在标题下方（“Duccio 正在使用 PostBlogger 标记 POST”）。

最近的活动具有更紧凑的不同格式。

在 OG 聚合单元中，您可以控制对象及其属性的显示。例如，如果您有，您可以在聚合单元中`Trip`显示该行程的公里/英里。`Trip.distance`

# oracle - Oracle/TOAD/团队编码：尝试通过 TOAD 连接到 TFS 时无法选择 TFS 命名空间

> ID：13035932
> 
> 赞同：0
> 
> 时间：2012-10-23T17:23:15.887
> 
> 标签：oracle, toad

我们目前正在尝试评估是否要使用 TOAD 的团队编码功能，因为它可以无缝地允许我们使用 TFS 作为数据库对象的存储库。我们目前在某处的虚拟机上安装了最新版本的 TOAD（它是试用版）。团队编码功能已安装，我可以浏览我的 TFS 项目。但是，我不能做的是通过 TOAD 中的登录连接到 TFS，因为当我尝试选择命名空间时，它不允许我单击“确定”。

我的理解是，试验已被修复，以允许这种情况发生。我在他们的网站上找不到任何东西，所以我很好奇是否有人知道我为什么不能这样做的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:18:16.397

这仅适用于 Toad for Oracle。

您应该能够使用试用版登录 TFS。如果您可以在 Toad 中浏览 TFS 项目，那么您应该已经正确登录到 TFS。

该按钮被禁用的最可能原因是您正在尝试登录到远程工作区。我假设您可以在登录窗口中看到您的本地 WorkSpaces（命名空间？）。单词 (Remote) 是否出现在工作区名称旁边的括号中。如果是这种情况，那么您正在选择一个远程工作区。该工作区是为另一台机器设置的。

您将需要选择或设置为此机器创建的工作区。测试这一点的最快方法是从工作区选择中选择“新建”并创建一个映射到本地文件夹的新工作区（以后可以随时删除）。然后您应该能够登录到 TFS。

希望这可以帮助

PS 我们通常不会监控 StackOverflow 上的帖子，所以如果您可能想要跳到 Toad 雅虎群组并有任何后续问题

# php - OOP：检查值是否在数据库中的函数

> ID：13035933
> 
> 赞同：1
> 
> 时间：2012-10-23T17:23:18.440
> 
> 标签：php

我正在尝试创建一个用户管理系统类，我的功能之一是检查一个值是否在数据库的列中。它什么也不返回。

以下是相关信息：

```
require("opperators/connect.php");
class UserManagemen
{
protected $db;

public function __construct(PDO $db)
  {
    $this->db = $db;
  }
public function isInDatabase($checkIfThis, $isHere)
  {
    $stmt = $db->prepare("SELECT 1 from users WHERE $isHere = :$isHere");
    $stmt->execute(array(':$isHere' => $checkIfThis));
        if ($stmt->rowCount() > 0) {
        echo "It's in the database";
        } else {
        echo "Not in the database and you are good to go!";
        }
   }
}
$usermanagement = new UserManagemen($db, null, null, null);
$usermanagement->isInDatabase(Batman, username); 
```

在 connect.php 中：这在我的程序编码测试中有效。

```
$configurator['database'] = array(
'username' =>   'root',
'password' =>   'root',
'host' =>    'localhost',
'db' =>    'girlscouts',
);
$options  = array(
PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'
);
try {
$db = new PDO("mysql:host={$configurator['database']['host']};dbname={$configurator['database']['db']};charset=utf8", $configurator['database']['username'], $configurator['database']['password'], $options);
}
catch (PDOException $ex) { 
die("Failed to connect to the database: " . $ex->getMessage());
} 
```

如果这被反复询问，我提前道歉，我已经尝试了谷歌但没有返回任何有价值的东西，可能是因为我不知道谷歌是什么。我不喜欢寻求帮助，但我会试一试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:01:12.950

你这样做是不对的。

如果这样的值已经存储在表中，您应该`UNIQUE`对列设置约束，而不是仅仅为了查看而发出额外的请求。然后，如果您已正确设置 PDO 实例，插入副本的尝试将上升一个`PDOException`，然后您可以以任何您想要的方式处理它。

此外，`UNIQUE`约束会让你在 MySQL 中执行`.. ON DUPLICATE UPDATE ..` 构造。

要了解有关 PDO 使用的更多信息，请阅读[本教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。好像您正在模拟*准备好的语句*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:30:48.280

我认为应该是

```
if ($stmt->rowCount() > 0) { // data available
    echo "It's in the database";
} else {
    echo "Not in the database and you are good to go!";
} 
```

代替

```
if ($stmt->rowCount() > 0) {
    echo "Not in the database and you are good to go!";
} else {
    echo "It's in the database";
} 
```

你也没有初始化`PDO`like `new PDO(...);`，在你的构造函数中它应该是

```
$this->db = new PDO(...); 
```

你应该像这样使用它

```
$stmt=$this->db->prepare(...);
$stmt->execute(...); 
```

看看[this](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)和[this](http://www.phpeveryday.com/articles/PDO-Portable-Connection-to-Database-P547.html)了解详情。

# php - 使用带有 GUID 和命名空间的 PHP 读取 Web 服务

> ID：13035936
> 
> 赞同：5
> 
> 时间：2012-10-23T17:23:27.163
> 
> 标签：php, soap, webserver

我是 Web 服务的新手，正在努力使用 PHP 访问/读取 XML 数据（我的网站将使用 PHP 中的数据）。

WSDL 网址：[http ://services.mywheels.co.za/BWAVehicleStockService.svc?wsdl](http://services.mywheels.co.za/BWAVehicleStockService.svc?wsdl)

我需要访问并阅读车辆库存信息，但无法访问任何内容。Array 车辆存储在：[http](http://services.mywheels.co.za/BWAVehicleStockService.svc?xsd=xsd2) ://services.mywheels.co.za/BWAVehicleStockService.svc?xsd=xsd2 下。

我正在使用此代码，但它没有给我任何数据。我还有一个需要传递的 GUID，但不知道如何将其添加到标题中。

```
 <?PHP
            define('NEWLINE', "<br />\n");

            // SOAP client

            $wsdl = 'http://services.mywheels.co.za/BWAVehicleStockService.svc?wsdl';
            $soapClient = new SoapClient($wsdl, array('cache_wsdl' => 0));

            // SOAP call

            $parameters->ArrayOfVehicle->Vehicle;

            try
            {
                $result = $soapClient->GetVehicleStock($parameters);
            }
            catch (SoapFault $fault)
            {
                echo "Fault code: {$fault->faultcode}" . NEWLINE;
                echo "Fault string: {$fault->faultstring}" . NEWLINE;
                if ($soapClient != null)
                {
                    $soapClient = null;
                }
                exit();
            }
            $soapClient = null;

            echo "<pre>\n";
            print_r($result);
            echo "</pre>\n";

            echo "Return value: {$result->GetDataResult}" . NEWLINE;

            ?> 
```

如果有人可以帮助我或为我指明正确的方向，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:01:57.663

您可以使用以下方式添加标题`__setSoapHeaders()`：

```
$h = new SoapHeader('http://tempuri.org/', 'Guid', '123');
$soapClient->__setSoapHeaders($h); 
```

我必须阅读 WSDL 本身才能找出我应该使用的命名空间；在这种情况下，它们引用`Guid`as`tns:Guid`并且从顶部开始，您可以阅读使用什么 URI 来表达它，因此`http://tempuri.org`.

# facebook - FB.Login 然后检查 App Auth 的状态

> ID：13035939
> 
> 赞同：0
> 
> 时间：2012-10-23T17:23:37.943
> 
> 标签：facebook

当用户未登录 Facebook 时，我有什么办法可以提示他们登录但不要求他们授权我的应用程序？

所以，当他们没有登录时，我想让他们登录，而不是授权应用程序，然后当他们登录时，检查应用程序的授权状态，如果它没有被授权然后做一些事情（注册)?

谢谢

# visual-studio-2010 - Visual Studio 2010 Ultimate 安装不需要的工具

> ID：13035940
> 
> 赞同：2
> 
> 时间：2012-10-23T17:23:43.217
> 
> 标签：visual-studio-2010, visual-c++, installation, sql-server-express

我正在安装 Visual Studio 2010 Ultimate，并且正在执行自定义安装，我可以在其中选择所需的工具并将其安装在首选安装目录中。

我只需要visual c++和图形库。这就是我所需要的，因为我刚刚开始学习 c/c++。尽管只选择了两个工具，但它安装了 SQL server compact 和一堆我没有要求的其他组件。这会占用安装 Windows 的 C: 驱动器中的大量磁盘空间。我需要在 C: 驱动器上至少有 5 GB 的可用空间用于将来的 Windows 更新，但现在我只剩下 3 GB。

问题：

1)Visual Studio 为什么要安装 sql server 和 c/c++ 编译器？为什么它占用了我没有指定的目录中的空间？

2）卸载sql server及其组件是否安全？

我知道 .NET 框架是运行 Visual Studio 所必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:02:23.430

SQL Server Compact 由一些 Visual Studio 组件在内部使用。我认为 InteliSense 数据库就是其中之一，它在您的解决方案中存储有关项目的元数据信息（查找 *.sdf 文件，这些是 SQL Server Compact 数据库）。所以我绝对不建议你卸载 SQL Server Compact。

Visual Studio 安装的其他 SQL Server 组件也是如此，尽管程度可能较小。在您的情况下，可能不需要使用它们的 Visual Studio 组件，如果需要它们，它们应该通过向您提供正确的错误消息来告知您。我不会触及的一个组件是 SMO（SQL Server 管理对象）。

如果您安装了 SQL Server Express（不是 Compact），那么卸载它是绝对安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:27:45.710

```
1) Why does visual studio install sql server along with the c/c++ compiler? 
   And why did it occupy space in the directory which I didn't specify? 
```

它仅安装 Express 版本的 Sql Server，默认情况下，您的应用程序开发将需要 Sql Server Express。

```
2) Is it safe to uninstall sql server and its components? 
```

是的，如果您不需要 Sql Server，您可以将其卸载。

# dynamics-crm - 将数据从一个实体拉到工作流中的电子邮件表单

> ID：13035945
> 
> 赞同：1
> 
> 时间：2012-10-23T17:23:57.483
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4

我有一个工作流程，一旦表单字段更改就会触发。如果选择了一个特定值，工作流会检查该值，然后发送一封电子邮件。我已经设法弄清楚了这么多。

现在我需要从一个单独的实体中提取一个字段值来填充电子邮件的“收件人”字段。我们有一个存储分发列表值的配置实体——我们希望将其拉入工作流生成的电子邮件中。

我在主要实体和配置实体之间创建了 N<>1 关系，但是我在电子邮件表单助手中只看到实体而不是实体的字段。知道如何将这些数据提取到电子邮件表单中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:06:21.793

如果您看到填充在“查找”下的实体，然后在下拉列表中您看不到任何值？我猜在您的配置实体中，您要用于电子邮件收件人的电子邮件地址是一个文本字段。为了让表单助手填充第二个下拉列表，字段类型必须匹配 - 或者在这种情况下，要使字段显示为可用于“收件人”字段，它需要是帐户、联系人、用户、等等...您可以发送电子邮件的值。

我的建议是创建一个具有正确电子邮件地址的联系人记录，并将其与您的基本实体相关联以代替您的配置实体（如果可能），或者将您的配置实体与联系人相关联并相应地填充配置实体上的新查找。

# python - 列表中整数元素的减法

> ID：13035946
> 
> 赞同：1
> 
> 时间：2012-10-23T17:23:59.697
> 
> 标签：python, python-3.x

我需要编写一个函数，从列表中的上一个数字中减去每个下一个数字。你能帮我做吗。数字已经在列表中，因此您无需输入它们。

```
 >>>substractionF [20, 10, -5, 12, 14, -13, -5, 0, 3] returns:  
 [10, 15, -17, -2, 27, -8, -5, -3] 
```

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:25:45.023

这是一个很容易的。我会用 来展示它`zip`，但你可以用`enumerate`or `range`+ `len`...

```
def subtract(lst):
    return [ b-a for a,b in zip(lst[1:],lst[:-1])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:57:56.707

使用`operator`和`map`

```
from operator import sub
res = map(sub, el[:-1], el[1:])
print(list(res))
# [10, 15, -17, -2, 27, -8, -5, -3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:26:08.270

以下列表理解可以做到这一点：

```
[x - lst[i + 1] for i, x in enumerate(lst[:-1])] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:26:04.337

```
def subtractionF(numbers):
    return [numbers[i]-numbers[i+1] for i in range(len(numbers)-1)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T17:54:18.177

```
>>> from itertools import imap
>>> list(imap(lambda x,y: x-y,numbers[:-1],numbers[1:]))
[10, 15, -17, -2, 27, -8, -5, -3] 
```

# c# - 为 VBA 添加引用对话框公开 .NET (COM) tlb 库时选择自定义引用名称

> ID：13035947
> 
> 赞同：3
> 
> 时间：2012-10-23T17:24:03.713
> 
> 标签：c#, vba, excel, interop, com-interop

我拥有的是`ComVisible(true)`Excel 2010 VBA 客户端正在使用的 C#、.NET 4.5 库。

我有两个问题：

1 -

在 VBA 中，当我从“工具 - > 引用”添加对我的 tlb 的引用时，我得到“可用引用”对话框，其中显示我的库引用名称与我的 .tlb 文件的名称相同，但没有扩展名。如果我的 .tlb 文件有空格，那么它将在对话框中替换为下划线。

以下线程讨论了类似的问题，但从 VBA 项目的角度来看： [如何在 VBA 项目名称中放置空格？](https://stackoverflow.com/questions/10655406/how-can-i-put-spaces-in-my-vba-project-name)

> **在我的 C# 项目中，如何控制将出现在“可用引用”中的名称（包括使用空格）？**

![在此处输入图像描述](../Images/7bdc5778174f3826d10f9e6187766659.png)

2 -

关于我的库的命名空间，我如何选择一个独立于我的参考名称和我的 .tlb 名称的命名空间？例如：

```
Dim oMyTest As New MyCustomNameSpace.MyTest 
```

我在 C# 中尝试过以下操作，但没有成功，它总是选择 .tlb 文件名作为命名空间：

```
[ProgId("MyCustomNameSpace.MyTest")]
public class MyTest: IMyTest 
```

> **我需要在 C# 中更改什么来控制 VBA 中的命名空间？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:12:30.670

从程序集到类型库的转换在此[MSDN 库部分](http://msdn.microsoft.com/en-us/library/xk1120c3%28v=vs.100%29.aspx)中有详细描述。“导出的程序集转换”文章包含您询问的相关详细信息。引用他们：

> 程序集名称通常包含句点，这在类型库名称中是不允许的。导出过程将程序集名称字段中的句点转换为下划线。
> 
> 如果在设计时将 AssemblyDescriptionAttribute 应用于程序集，则导出过程会将其复制到与类型库关联的帮助字符串或 DocString。类型库中的 HelpFile 字段和 HelpContext 字段均未设置。没有设置类型库中的任何 LIBFLAGS。

请注意，ASsemblyInfo.cs 中的 [assembly:AssemblyDescription] 属性默认使用空字符串。您可以直接编辑它或使用 Project + Properties、Application 选项卡、Assembly Information 按钮。

# android - 将 Android 库安装到本地 Maven 存储库中

> ID：13035955
> 
> 赞同：0
> 
> 时间：2012-10-23T17:24:19.510
> 
> 标签：android, maven, android-holo-everywhere

我正在尝试在我的 android 项目中使用[HoloEverywhere 1.3.2](https://github.com/ChristopheVersieux/HoloEverywhere)，并且我正在使用 Maven 来构建项目。Maven Central 中 HoloEverywhere 的最新版本是 1.2.0。

HoloEverywhere 的作者正在将最新版本的库推送到 Maven 中心，同时我希望将库安装到我的本地 Maven 存储库。

**我的问题**

如何将 Android 库 (HoloEverywhere) 安装到本地 Maven 存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:59:59.240

所以下载源代码并执行`mvn clean install`。

从[http://maven.apache.org/plugins/maven-install-plugin/](http://maven.apache.org/plugins/maven-install-plugin/)

> 在安装阶段使用安装插件将工件添加到本地存储库。Install Plugin 使用 POM 中的信息（groupId、artifactId、version）来确定工件在本地存储库中的正确位置。
> 
> 本地存储库是存储构建所需的所有工件的本地缓存。默认情况下，它位于用户的主目录 (~/.m2/repository) 中，但可以使用该元素在 ~/.m2/settings.xml 中配置该位置。

# android - 连续播放更多声音时声音有时会保持沉默，为什么？

> ID：13035958
> 
> 赞同：2
> 
> 时间：2012-10-23T17:24:30.983
> 
> 标签：android, audio, button, media-player

我遇到了一个奇怪的问题，希望有人能回答。我有 4x4 按钮，如果我点击它，每个按钮都会播放短 1 秒的声音。我的代码：

```
Button_1= (Button) findViewById(R.id.button1);
            Button_1.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if (sound!=null){
                        sound.stop();
                        sound.release();
                        sound=null;
                    }
                    sound = MediaPlayer.create(Main.this, R.raw.short_sound);
                    sound.start();
                }
            }); 
```

所以发生的事情是我触摸了所有的按钮，所以首先是按钮1，然后是按钮2，每次我触摸它，都会播放一个短促的声音。但有时当我到达第 14 或第 15 或第 16 按钮时，它不会播放应有的声音。其他按钮工作，但不知何故最后 1,2 或 3 有时不播放任何声音。如果我开始向后触摸按钮，所以我先触摸第 16 个按钮它总是可以工作，但随后可能第 1 个和第 2 个按钮保持沉默。

什么可能导致这种情况？LogCat 不写任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T17:02:31.660

当您调用 MediaPlayer.create() 时，您分配的资源不一定由 GC 机制释放。您应该手动释放 MediaPlayer.release() 例程。当您完成对象时

# c# - 从 mailchimp 活动EmailStatsAIMAll 在 C# 中使用 JSON

> ID：13035960
> 
> 赞同：2
> 
> 时间：2012-10-23T17:24:47.830
> 
> 标签：c#, json, mailchimp

我正在尝试编写 .net c# 代码来读取调用的结果`campaignEmailStatsAIMAll()`。

这是我得到的 JSON 结果示例：

```
{
   "total":3,
   "data":{
      "some...@company.com":[
         {
            "action":"click",
            "timestamp":"2012-10-18 20:55:52",
            "url":"http:\/\/www.someurl.com?ct=t(First_Chimp_Test10_18_2012)",
            "ip":"66.66.666.666"
         },
         {
            "action":"open",
            "timestamp":"2012-10-18 20:55:52",
            "url":null,
            "ip":"66.66.666.666"
         }
      ],
      "anothe...@corporation.com":[
         {
            "action":"open",
            "timestamp":"2012-10-18 20:18:05",
            "url":null,
            "ip":"22.222.222.222"
         },
         {
            "action":"open",
            "timestamp":"2012-10-18 20:18:18",
            "url":null,
            "ip":"22.222.222.222"
         },
         {
            "action":"click",
            "timestamp":"2012-10-18 20:18:18",
            "url":"http:\/\/www.someurl.com?ct=t(First_Chimp_Test10_18_2012)",
            "ip":"22.222.222.222"
         },
         {
            "action":"click",
            "timestamp":"2012-10-18 20:21:57",
            "url":"http:\/\/www.someurl.com?ct=t(First_Chimp_Test10_18_2012)",
            "ip":"22.222.222.222"
         }
      ],
      "thir...@business.com":[

      ]
   }
} 
```

我遇到的问题是如何定义 C# 对象来接受这个 JSON 字符串。电子邮件地址被视为 JSON 名称/值对的名称部分。我知道 .NET 有 3rd 方包装器，但我只想调用这个 API（可能还有其他几个）并且更愿意自己编写代码。我希望能够遍历对象以提取电子邮件地址，然后为每个对象提取操作/时间戳/url。

当我将这个 JSON 放到 json2sharp.com 的对象创建器中时，我得到了这个：

```
public class SomebodyCompanyCom {     
   public string action { get; set; }     
   public string timestamp { get; set; }     
   public string url { get; set; }     
   public string ip { get; set; } 
}

public class AnotherpersonCorporationCom {     
   public string action { get; set; }      
   public string timestamp { get; set; }     
   public string url { get; set; }     
   public string ip { get; set; } 
}

public class Data {     
   public List<SomebodyCompanyCom> __invalid_name__somebody@company.com { get; set; }     
   public List<AnotherpersonCorporationCom> __invalid_name__anotherperson@corporation.com { get; set; }     
   public List<object> __invalid_name__thirdguy@business.com { get; set; } 
}

public class RootObject {     
   public int total { get; set; }     
   public Data data { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:35:14.103

像这样的生成器只能做出最好的猜测。由于 JSON 通常是无模式的，因此您需要分析数据并找出对其建模的最佳方法。

在您的情况下，您有两种基本类型：

1.  由 action、timestamp、url 和 ip 组成的单个条目
2.  包含总数和数据的整体容器

一个合理的模型可能如下所示：

```
public class ItemInfo {     
   public string action { get; set; }     
   public string timestamp { get; set; }     
   public string url { get; set; }     
   public string ip { get; set; } 
}

public class ContainerType {
    public int total;
    public Dictionary<string, ItemInfo[]> data;
} 
```

如果您使用像[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)这样的不错的 JSON 库，则可以将 JSON 字符串反序列化为 ContatinerType 结构，如下所示：

```
string rawJsonString = MagicallyGetTheJsonFromAWebservice();
ContainerType container = JsonConvert.DeserializeObject<ContainerType>(rawJsonString); 
```

~~可能需要进行一些调整才能使类型反序列化准确工作，但这~~是基本思想。

编辑：执行反序列化的示例控制台程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Newtonsoft.Json;

namespace ConsoleApplication1
{
    class Program
    {
        static string testData = @"{
   'total':3,
   'data':{
      'some...@company.com':[
         {
            'action':'click',
            'timestamp':'2012-10-18 20:55:52',
            'url':'http:\/\/www.someurl.com?ct=t(First_Chimp_Test10_18_2012)',
            'ip':'66.66.666.666'
         },
         {
            'action':'open',
            'timestamp':'2012-10-18 20:55:52',
            'url':null,
            'ip':'66.66.666.666'
         }
      ],
      'anothe...@corporation.com':[
         {
            'action':'open',
            'timestamp':'2012-10-18 20:18:05',
            'url':null,
            'ip':'22.222.222.222'
         },
         {
            'action':'open',
            'timestamp':'2012-10-18 20:18:18',
            'url':null,
            'ip':'22.222.222.222'
         },
         {
            'action':'click',
            'timestamp':'2012-10-18 20:18:18',
            'url':'http:\/\/www.someurl.com?ct=t(First_Chimp_Test10_18_2012)',
            'ip':'22.222.222.222'
         },
         {
            'action':'click',
            'timestamp':'2012-10-18 20:21:57',
            'url':'http:\/\/www.someurl.com?ct=t(First_Chimp_Test10_18_2012)',
            'ip':'22.222.222.222'
         }
      ],
      'thir...@business.com':[

      ]
   }
}";

        public class ItemInfo {     
           public string action { get; set; }     
           public string timestamp { get; set; }     
           public string url { get; set; }     
           public string ip { get; set; } 
        }

        public class ContainerType {
            public int total;
            public Dictionary<string, ItemInfo[]> data;
        }
        static void Main(string[] args)
        {
            ContainerType container = JsonConvert.DeserializeObject<ContainerType>(testData);
            if((container.total != 3)
                || (container.data.Count != 3)
                || (container.data["some...@company.com"][1].action != "open")
                || (container.data["anothe...@corporation.com"][2].url != "http://www.someurl.com?ct=t(First_Chimp_Test10_18_2012)"))
            {
                Console.WriteLine("Failed to deserialize");
            }
            else
            {
                Console.WriteLine("Successfully deserialized");
            }

            foreach (string email in container.data.Keys)
            {
                Console.WriteLine(email);
                for (int x = 0; x < container.data[email].Count(); x++)
                {
                    Console.WriteLine("\t" + x.ToString() + ":");
                    Console.WriteLine("\t\taction   : " + container.data[email][x].action);
                    Console.WriteLine("\t\ttimestamp: " + container.data[email][x].timestamp);
                    Console.WriteLine("\t\turl      : " + container.data[email][x].url);
                    Console.WriteLine("\t\tip       : " + container.data[email][x].ip);
                }
            }
        }
    }
} 
```

# python - 从文件名中删除标点符号，同时保持文件扩展名不变

> ID：13035963
> 
> 赞同：0
> 
> 时间：2012-10-23T17:25:01.623
> 
> 标签：python, regex, punctuation

我想从文件名中删除所有标点符号，但保持其文件扩展名不变。

例如我想要：

```
Flowers.Rose-Murree-[25.10.11].jpg
Time.Square.New-York-[20.7.09].png 
```

看起来像：

```
Flowers Rose Muree 25 10 11.jpg
Time Square New York 20 7 09.png 
```

我正在尝试蟒蛇：

```
re.sub(r'[^A-Za-z0-9]', ' ', filename) 
```

但这会产生：

鲜花玫瑰 Muree 25 10 11 jpg 纽约时代广场 20 7 09 png

如何删除标点符号但保留文件扩展名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T17:30:59.980

只有一种正确的方法可以做到这一点：

1.  `os.path.splitext`获取文件名和扩展名
2.  对文件名进行任何处理。
3.  将新文件名与扩展名连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:28:06.993

您可以使用否定前瞻，它断言您不是在处理仅后跟数字和字母的点：

```
re.sub(r'(?!\.[A-Za-z0-9]*$)[^A-Za-z0-9]', ' ', filename) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:28:52.080

`[\W_](?=.*\.)`我建议你用空格替换每个出现的地方`。`

 `* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T17:32:27.783

看看这是否适合你。您实际上可以在没有 Regex 的情况下做到这一点

```
>>> fname="Flowers.Rose-Murree-[25.10.11].jpg"
>>> name,ext=os.path.splitext(fname)
>>> name = name.translate(None,string.punctuation)
>>> name += ext
>>> name
'FlowersRoseMurree251011.jpg'
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T17:33:29.030

@katrielalex 击败了我的答案类型，但无论如何，一个无正则表达式的解决方案：

```
In [23]: f = "/etc/path/fred.apple.png"

In [24]: path, filename = os.path.split(f)

In [25]: main, suffix = os.path.splitext(filename)

In [26]: newname = os.path.join(path,''.join(c if c.isalnum() else ' ' for c in main) + suffix)

In [27]: newname
Out[27]: '/etc/path/fred apple.png' 
````

# c++ - 如何使用 Visual C++ 6 转换 XML 和 XSLT

> ID：13035964
> 
> 赞同：0
> 
> 时间：2012-10-23T17:25:09.510
> 
> 标签：c++, xml, xslt, unmanaged

我不得不承认我仍在使用 Visual C++ 6，并且由于我正在从事的项目的复杂性，我不打算很快升级。

谁能为我提供一个示例，在非托管代码中使用 Visual C++ 6 使用 XSLT 样式表转换 XML 数据？如果这个老主力没有这个功能，哪个组件被认为是市场上最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:03:22.013

你可以看看这个 SO 问题的答案：['Is there any C++ XSLT library?'](https://stackoverflow.com/questions/2941798/is-there-any-c-xslt-library) .

[Apache Xalan](http://xml.apache.org/xalan-c/)看起来很合适，尽管我对这个库没有个人经验。

`system()`另一种选择是通过调用或类似机制直接从您的程序运行 XSLT 处理器（可执行文件） 。

如果你真的需要一个 COM 组件来实现你想要的，你可以考虑在你自己的 COM 组件实现中封装这些解决方案之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:11:29.840

在 Windows 应用程序中，要使用的一个 XSLT 处理器是作为[MSXML SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/ms767700%28v=vs.85%29.aspx)一部分的 COM 对象。（我已经在 VS6 中使用了它的早期版本，但由于它是 COM，我不明白为什么这不适用于最新版本）

您还可以使用纯 C/C++ 库，例如[Xalan](http://xml.apache.org/xalan-c/)或[Aribica](https://github.com/jezhiggins/arabica)

# java - JAXB 编译器将 xs:boolean 绑定到 Java 布尔包装类，而不是布尔原始类型

> ID：13035975
> 
> 赞同：19
> 
> 时间：2012-10-23T17:25:54.030
> 
> 标签：java, xml, xsd, jaxb, xjc

我正在将一个项目从 JAXB 1.0 迁移到 JAXB 2.1，并且遇到了数据类型映射问题。

我正在使用 Ant *xjc*绑定编译器，并且我已经成功配置了全局绑定，以便（例如）*xs:date*映射到*java.util.Calendar*。

但是，我得到了返回的生成方法`Boolean`，而我想要`boolean`。

这是复杂类型：

```
<xs:element name="usage-auth-rate-charge">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="service-id" type="xs:string"/>
            <xs:element name="pricepoint_custom_fields_required" type="xs:boolean" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

生成的类如下所示：

```
public class UsageAuthRateCharge {
........
public Boolean isPricepointCustomFieldsRequired() {
    return pricepointCustomFieldsRequired;
} 
```

问题是虽然装箱可以工作，但如果提供的 XML 不包含 的值`pricepoint_custom_fields_required`，则该类的布尔字段为空，而不是假。所以我在做这样的事情时得到*NullPointerExceptions ：*

```
methodWhichTakesPrimitiveBooleanArg(myUsageAuthRateChargeInstance.isPricepointCustomFieldsRequired()); 
```

因为它试图拆箱传入的布尔值 - 除了它是空的。

我无法更改架构，也无法调整所有客户端代码来进行空检查。

我在*binding.xml中设置了**optionalProperty*属性，如下所示：

 *```
<globalBindings optionalProperty="primitive"> 
```

在规范中，它说：“如果属性的值是“原始的”，它会像在 JAXB 1.0 中那样绑定”

然而，这显然没有发生。

我怎么解决这个问题？

**更新：**

这现在在 jaxb 2.2.9 中得到修复： [https ://java.net/jira/browse/JAXB/fixforversion/16850](https://java.net/jira/browse/JAXB/fixforversion/16850)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-12-13T15:21:04.570

## 问题

你得到的原因是你在元素定义中`Boolean`。将为不存在的元素存储一个值。`boolean``minOccurs="0"``null`

```
<xs:element name="pricepoint_custom_fields_required" type="xs:boolean" minOccurs="0"/> 
```

## 解决方案应该是什么

解决方案应该是一个外部绑定文件，该文件指示应将原始类型用于可选值（请参阅 JAXB 2.2 规范的第 7.5.1 节）。

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">
    <jaxb:globalBindings optionalProperty="primitive"/>
</jaxb:bindings> 
```

外部绑定文件是使用`-b`带有 XJC 的选项指定的。

```
xjc -b binding.xml my-schema.xsd 
```

## 为什么该解决方案不起作用

已打开以下错误以跟踪问题`optionalProperty="primitive"`。

*   [https://github.com/javaee/jaxb-v2/issues/510](https://github.com/javaee/jaxb-v2/issues/510)
*   [https://github.com/javaee/jaxb-v2/issues/926](https://github.com/javaee/jaxb-v2/issues/926)

## 解决方法

如果您不喜欢在 JAXB 中生成类的方式，那么您可以自己创建一个类并让 JAXB 将其作为模式的一部分拉入到类生成中。

**绑定.xml**

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

    <jxb:bindings schemaLocation="my-schema.xsd">
        <jxb:bindings node="//xs:element[@name='usage-auth-rate-charge']/complexType">
            <jxb:class ref="com.example.foo.UsageAuthRateCharge"/>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**UsageAuthRateCharge**

使用您想要的方法创建此类。

**XJC 呼叫**

使用`-b`XJC 调用上的标志来指定`binding.xml`文件

```
xjc -b binding.xml my-schema.xsd 
```

* * *

## 更新

> 我真正希望的是其中一位读者可能是 jaxb 开发团队成员，他可以轻松地在 jaxb 中进行更改。用户 archenroot 在他对 jaxb 问题 927（926 的副本）的评论中提供了一个可能的解决方案，这让我认为对于合适的人来说，修复 jaxb 将是一项简单的工作

我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人。我已经联系了执行 JAXB 参考实现的同事（他们也为 Oracle 工作）。以下是我从他们那里得到的回复：

> 我已经在后备箱中进行了测试 - 问题存在。我将检查代码修复它的难易程度。

希望您能够真正解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:02:53.077

试试这个...

```
<xs:element name="usage-auth-rate-charge">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="service-id" type="xs:string"/>
        </xs:sequence>
        <xs:attribute name="chosen" type="xs:boolean" use="required"/>
    </xs:complexType>
</xs:element> 
```

当我正在寻找如何做与您正在做的完全相反的事情时，我发现了您的问题。我有一个布尔属性，它只会生成将该属性作为原始布尔值的代码。为了使 jaxb 将此属性生成为布尔对象而不是布尔原语，我刚刚删除了 xsd 中属性定义的 use="required" 部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-24T08:14:09.593

只是为了让它完整

```
type="xs:boolean" minOccurs="0" maxOccurs="1"                   == Boolean value (object)

type="xs:boolean" minOccurs="0" maxOccurs="1" nillable="true"   == JAXBElement<Boolean> value (object)

type="xs:boolean" minOccurs="1" maxOccurs="1"                   == boolean value (primitive)

type="xs:boolean" minOccurs="1" maxOccurs="1" nillable="true"   == Boolean value (object) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T12:36:39.520

我厌倦了等待开发团队的修复，所以我卷起袖子自己动手。

我包括下面的代码来帮助那些这也是一个问题的人。

**免责声明**：我的代码可能不是解决问题的最佳方法，但它对我有用。

生成的代码现在如下所示：

```
public boolean isPricepointCustomFieldsRequired() {
    if (pricepointCustomFieldsRequired == null) {
        return false;
    } else {
        return pricepointCustomFieldsRequired;
    }
} 
```

修改如下：

com.sun.tools.xjc.reader.xmlschema.bindinfo.BIProperty:createElementProperty, line ~358

线后

```
类型.addTo(prop);
```

插入以下代码：

```
if (prop.isOptionalPrimitive() && getOptionalPropertyMode() == OptionalPropertyMode.PRIMITIVE &&
    !prop.getTypes().isEmpty() && "boolean".equals(prop.getTypes().get(0).getTypeName().getLocalPart()) )   {
        prop.defaultValue= CDefaultValue.create(CBuiltinLeafInfo.BOOLEAN, new XmlString("false"));
    } 
```*

# java - Spring + MongoDB + DBRef

> ID：13035978
> 
> 赞同：2
> 
> 时间：2012-10-23T17:26:04.073
> 
> 标签：java, spring, mongodb

在一个 Spring 项目中，我使用 Spring Data MongoDB，并且有 2 个类：

```
public class ClassA
{
@Id
private String id;

private String description

@DBRef
private ClassB classBId;

// Getters and Setters
}

public class ClassB
{
@Id
private String id;

private String description

// Getters and Setters
} 
```

所以我有 2 个集合，classA 和 classB，并用几个实例填充它们。

classA 实例的存储方式如下：

> {“_id”：{“$oid”：“5086b371004d7c4bfff0a142”}，“_class”：“com.spring.custom.ClassA”，“description”：“描述A”，“classBId”：{“$ref”：“类B”，“$id”：{“$oid”：“50866d45004d84852b16a8b8”}}}

我的问题是，如何进行查询以返回所有引用 id 为 50866d45004d84852b16a8b8 的 classB 实例的 classA 对象？

我试过这样但没有成功：

```
ClassB cb = new ClassB(); cb.setId("50866d45004d84852b16a8b8");

Criteria criteria = Criteria.where("classBId").is(classBObject);
Query query = new Query(); query.addCriteria(criteria); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:49:08.550

找到了一种方法来做我需要的...

```
ObjectId oid = new ObjectId(id);
Criteria.where(classBid+".$id").is(oid); 
```

不幸的是，这不是我所期望的方式，但它仍然是一个解决方案......

我什至尝试将我的 Spring Data MongoDB API 更新为 1.0.4 RELEASE 而不是 1.0.2 RELEASE，希望能够得到相同的结果，例如：

```
ClassB cb = new ClassB();
cb.setId("50866d45004d84852b16a8b8");

Criteria criteria = Criteria.where("classBId").is(classBObject);
Query query = new Query();
query.addCriteria(criteria); 
```

但我只是不断收到以下错误：

**java.lang.RuntimeException：json 无法序列化类型：class ClassB ...**

# php - 将变量与多个数组匹配

> ID：13035985
> 
> 赞同：0
> 
> 时间：2012-10-23T17:26:29.487
> 
> 标签：php, arrays, preg-match

假设我有随机 $variable 和三个数组：

```
$array1 = ("one", "two", "three");
$array2 = ("four", "five", "six");
$array3 = ("seven", "eight", "nine"); 
```

这个怎么做：

```
if $variable is in $array1
echo "in array one";
elseif $variable is $array2
echo "in array two";
elseif $variable is in $array3
echo "in array three";
else
echo "variable isnt in any of arrays"; 
```

我希望你明白这一点，我真的很感激任何帮助，我正在考虑一个一个地搜索数组中的项目，然后 preg_matching 它们。但我不知道如何用多个数组来做到这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:29:47.613

您可以使用该`in_array()`功能。[[文档](http://php.net/manual/de/function.in-array.php)]

您的代码如下所示：

```
if (in_array ($variable, $array1)) {
 echo "in array 1";
} else if(in_array ($variable, $array2)) {
 echo "in array 2";
} [...] else {
 echo "isnt in any";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:28:59.907

您需要使用，请参阅[此处](http://php.net/manual/en/function.in-array.php)`in_array`的手册

```
 if (in_array($variable, $array1))
   echo "in array one";
  else if (in_array($variable, $array2))
    echo "in array two";
  else if (in_array($variable, $array3))
    echo "in array three";
  else
    echo "variable isnt in any of arrays"; 
```

# verilog - Verilog 错误：无法详细说明用户层次结构“计数器：计数器”

> ID：13035986
> 
> 赞同：0
> 
> 时间：2012-10-23T17:26:41.843
> 
> 标签：verilog, synthesis

我想在 Quartus 板上用 LED 写蛇。它有点像 KITT-Leds，但是当我尝试运行我的程序时，我得到了一个错误。

```
module ukol3(KEY,LEDR);
input[1:0]KEY;
output[14:0] LEDR;

counter counter(KEY[0], KEY[1], LEDR[14:0]);

endmodule

module counter(C,CLR,Q);
input C, CLR;
output [14:0] Q;
reg [14:0] tmp;
integer i;

always @(posedge C or posedge CLR)      
    begin

        if (CLR)
            tmp = 15'b000000000000000;

        if (tmp == 15'b111111111111111)
            i = 0;

        if (tmp == 15'b000000000000000)
            i = 1;

        if (i == 1)
            tmp = tmp + 1'b1;

        if (i == 0)
            tmp = tmp - 1'b1;
        end 
    assign Q = tmp;

endmodule 
```

这给了我一个错误：

> 错误：无法详细说明用户层次结构“计数器：计数器”

我真的不知道发生了什么事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:10:20.447

这个问题是关于 Verilog，而不是 vhdl。我想问几个问题：你的代码是可合成的吗？在综合模块计数器之后你会得到什么？

对于您的问题，我认为您应该`counter`先编译，然后再编译`ukol3`。如果您没有先执行此操作，EDA 工具将找不到计数器。你应该把它分成两个可分离的文件，然后先做计数器。

PS：您应该使用更好的映射端口方法，例如`counter counter (.C(KEY[0]),.CLR (KEY[1]),.Q (LEDR[14:0]));`更清晰的代码。

# java - Arraylist 信息收集

> ID：13035989
> 
> 赞同：1
> 
> 时间：2012-10-23T17:27:04.123
> 
> 标签：java, arraylist

因此，我试图在 Java 中搜索 Arraylist 并创建一个直方图，该直方图由字符串长度与大型文本文件中存在的频率的频率组成。我想出了一个蛮力算法，但它太慢了，无法用于大型数据文件。有没有更有效的方式通过 Arraylist 进行处理？我已经包含了我想出的蛮力方法。

```
for (int i = 0; i < (maxLen + 1); i++)
{
    int hit = 0;
    for (int j = 0; j < list.size(); j++)
    {
        if (i == list.get(j).length())
            ++hit;

        histogram[i] = hit;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:28:32.450

这是非常低效的。

与其遍历每个可能的长度值，然后遍历每个可用的单词，不如简单地遍历文档中的可用单词并计算它们的长度，怎么样？

例如：

```
Map<Integer, Integer> frequencies = new HashMap<Integer, Integer>();

for(int i=0; i<list.size(); i++) {
    String thisWord = list.get(i);
    Integer theLength = (Integer)(thisWord.length());
    if(frequencies.containsKey(theLength) {
        frequencies.put(theLength, new Integer(frequencies.get(theLength).intValue()+1));
    }
    else {
        frequencies.put(theLength, new Integer(1));
    }
} 
```

然后，如果 中不存在该键，则`HashMap`您知道文档中不存在该长度的单词。如果密钥*确实*存在，您可以准确查找发生了多少次。

**注意：**此代码示例的某些方面是为了防止对装箱和拆箱产生任何额外的混淆。可以写得稍微干净一些，我当然会在生产环境中这样做。此外，它假设您不知道任何最小或最大单词长度（因此稍微灵活、可扩展和包罗万象）。否则，用于简单声明原始数组的其他技术也可以正常工作（请参阅 Jon Skeet 的回答）。

对于利用自动装箱的更清洁的版本：

```
Map<Integer, Integer> frequencies = new HashMap<Integer, Integer>();

for(int i=0; i<list.size(); i++) {
    String thisWord = list.get(i);
    if(frequencies.containsKey(thisWord.length()) {
        frequencies.put(thisWord.length(), frequencies.get(thisWord.length())+1);
    }
    else {
        frequencies.put(thisWord.length(), 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:29:19.127

你为什么不只循环*一次*列表呢？

```
int[] histogram = new int[maxLen + 1]; // All entries will be 0 to start with
for (String text : list) {
    if (text.length() <= maxLen) {
        histogram[text.length()]++;
    }
} 
```

这现在只是 O(N)。

# php - 动态位置标头 PHP

> ID：13035992
> 
> 赞同：1
> 
> 时间：2012-10-23T17:27:09.753
> 
> 标签：php

> **可能重复：**
> [为什么 PHP 不替换字符串中的变量？](https://stackoverflow.com/questions/11317743/why-is-php-not-replacing-the-variable-in-string)

我想让我的 PHP 重定向标头动态。目前我有：

```
header('Location:message.php?ref=conversation&conv=$conv_id') 
```

但这会将用户重定向到：

```
doamin.com/message.php?ref=conversation&conv="$conv_id" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:28:35.853

您将变量放在单引号中，更改为双引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:29:43.950

把它改成这样：

```
header("Location:message.php?ref=conversation&conv=$conv_id"); 
```

或这个：

```
header('Location:message.php?ref=conversation&conv=' . $conv_id); 
```

（我更喜欢后者，但这只是个人的事情。）

问题是，在 php 中，如果您使用双引号，它会解析字符串中的变量，而如果您使用单引号则不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:30:10.233

单引号中的任何内容都像字符串一样

所以

```
header('Location:message.php?ref=conversation&conv=$conv_id') will not work 
```

应该

```
header("Location:message.php?ref=conversation&conv=$conv_id") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:28:46.227

不多，你应该将 var 传递给字符串

```
header("Location:message.php?ref=conversation&conv=" . $conv_id) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T17:32:35.397

您可以执行以下两项之一：

```
header("Location:message.php?ref=conversation&conv=$conv_id"); 
```

或者

```
header('Location:message.php?ref=conversation&conv='.$conv_id); 
```

您不应该将变量放在单引号`'`中。将其放在双`"`引号中，将起作用

# grails - 返回用户名和密码以登录表单grails spring security

> ID：13035995
> 
> 赞同：2
> 
> 时间：2012-10-23T17:27:18.800
> 
> 标签：grails, spring-security

当用户身份验证失败时，我希望将用户名和密码返回到表单。我正在使用带有 Grails 和 Spring Security LDAP 的 spring security core 插件。我已经搜索了一段时间并想出了zip。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:16:59.987

来自`UsernamePasswordAuthenticationFilter`javadoc：

> 如果要保留用户名，请将其缓存在自定义的 AuthenticationFailureHandler 中

至于密码，没有必要缓存它，因为出于安全原因，它不能放回表单密码字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T14:59:08.283

供将来参考，因为上面的答案要么太模糊，对我们这些刚开始第一次学习这个框架的人有帮助（提示这样的问题：什么是`AuthenticationFailureHandler`？我如何实现一个？我如何连接它是由命名空间处理程序神奇地创建的我现有的基础设施`<security:http>`？）或不再工作（存储用户名的代码`SPRING_SECURITY_LAST_USERNAME`已从`UsernamePasswordAuthenticationFilter`版本 3.1.0 中删除），这是第一个答案的更多细节：

*   登录过程使用An`AuthenticationFailureHandler`来决定身份验证失败时要执行的操作。
*   提供的默认登录表单设置`<security:http><security:form-login /></security:http>`使用 a[`SimpleUrlAuthenticationFailureHandler`](http://docs.spring.io/spring-security/site/docs/3.2.0.RC2/apidocs/org/springframework/security/web/authentication/SimpleUrlAuthenticationFailureHandler.html)执行对登录失败 url 的重定向（默认为`/spring_security_login?login_error`）。
*   您可以使用元素的`authentication-failure-handler-ref`属性来挂钩您自己的实现。`<form-login>`

因此，我的实现如下所示：

```
public class UsernameStoringUrlAuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler
{
    @Override
    public void onAuthenticationFailure (HttpServletRequest request, HttpServletResponse response,
            AuthenticationException exception) throws IOException, ServletException
    {
        request.getSession (true).setAttribute ("SPRING_SECURITY_LAST_USERNAME", request.getParameter ("j_username"));
        super.onAuthenticationFailure (request, response, exception);
    }
} 
```

其配置如下：

```
 <security:form-login authentication-failure-handler-ref="authenticationFailureHandler" [...] />
    ...
<bean id="authenticationFailureHandler" class="my.package.UsernameStoringUrlAuthenticationFailureHandler" p:defaultFailureUrl="/LoginError" /> 
```

然后我可以使用与 James Kleeh 在此处的回答中描述的相同的方法访问失败的登录用户名，但由于框架的更改而不再有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:25:25.507

我能够执行以下操作以将用户名返回到表单中：在 LoginController.groovy 中：

```
 render view: view, model: [postUrl: postUrl,
                               rememberMeParameter: config.rememberMe.parameter,
                               lastUsername: request.getSession().getAttribute("SPRING_SECURITY_LAST_USERNAME")] 
```