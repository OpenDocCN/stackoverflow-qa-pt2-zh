# StackOverflow 问答 14776000-14776999

# zend-framework2 - ZF2 中 bjy-authorize、zfcUser 和 zfc-user-doctrine-orm 的 composer.json

> ID：14776003
> 
> 赞同：1
> 
> 时间：2013-02-08T15:34:53.223
> 
> 标签：zend-framework2, composer-php, zfcuser

我正在尝试使用作曲家在 ZF2 中使用 bjy-authorize、zfcUser 和 zfc-user-doctrine-orm。但是当我调用 composer.phar 更新时，我总是会出错。

composer.json 如下所示：

```
 {
"name": "zendframework/skeleton-application",
"description": "Skeleton Application for ZF2",
"license": "BSD-3-Clause",
"keywords": [
    "framework",
    "zf2"
],
"homepage": "http://framework.zend.com/",
"minimum-stability": "alpha",
"require": {
    "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "doctrine/doctrine-orm-module": "dev-master",
    "bjyoungblood/bjy-authorize": "dev-master",
    "zf-commons/zfc-base": "dev-master",
    "zf-commons/zfc-user": "dev-master",
    "zf-commons/zfc-user-doctrine-orm": "dev-master"
}
} 
```

我在没有最后 3 行的情况下尝试了它（以“zf-commons”开头）我没有收到错误，但没有安装 zfc-user-doctrine 模块。

```
 Your requirements could not be resolved to an installable set of packages.
    Problem 1
- Conclusion: don't install zf-commons/zfc-base 0.0.1
- Conclusion: remove bjyoungblood/bjy-authorize dev-master|install zf-commons/zfc-base 0.0.1
- Conclusion: don't install bjyoungblood/bjy-authorize dev-master|remove zf-commons/zfc-base dev-master|install zf-commons/zfc-base 0.0.1
- Installation request for bjyoungblood/bjy-authorize dev-master -> satisfiable by bjyoungblood/bjy-authorize dev-master.
- bjyoungblood/bjy-authorize dev-master requires zf-commons/zfc-user dev-master -> satisfiable by zf-commons/zfc-user dev-master, zf-commons/zfc-user dev-master.
- zf-commons/zfc-user dev-master requires zf-commons/zfc-base 0.* -> satisfiable by zf-commons/zfc-base 0.0.0, zf-commons/zfc-base 0.0.1, zf-commons/zfc-base 0.1.0.
- zf-commons/zfc-user dev-master requires zf-commons/zfc-base 0.* -> satisfiable by zf-commons/zfc-base 0.0.0, zf-commons/zfc-base 0.0.1, zf-commons/zfc-base 0.1.0.
- Can only install one of: zf-commons/zfc-base dev-master, zf-commons/zfc-base 0.0.0.
- Can only install one of: zf-commons/zfc-base dev-master, zf-commons/zfc-base 0.1.0.
- Installation request for zf-commons/zfc-base dev-master -> satisfiable by zf-commons/zfc-base dev-master 
```

我必须在 composer.json 文件中进行哪些更改？

最好的，冰人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:08:28.093

问题是 Zf-Commons 已经开始标记他们的版本。如果我是你，我会删除 zfc-user、zfc-base 和教义-orm-module。

将 bjy-authorize 的版本从 dev-master 更改为 1.*，将 zfc-user-doctrine-orm 更改为 0.*。然后 Composer 应该从那里处理依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:59:59.440

您可以修复`composer.json`如下：

```
{
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*",
        "doctrine/doctrine-orm-module": "~0.7",
        "bjyoungblood/bjy-authorize": "~1.1",
        "zf-commons/zfc-user": "~0.1",
        "zf-commons/zfc-user-doctrine-orm": "~0.1"
    }
} 
```

`dev-master`如果您不知道自己在做什么，请避免使用。

# r - R中用户定义函数中的数据框

> ID：14776005
> 
> 赞同：4
> 
> 时间：2013-02-08T15:34:54.143
> 
> 标签：r, function, character

我正在尝试制作一个带有两个参数的函数。一个参数是数据框的名称，第二个参数是该数据框中列的名称。目标是函数根据指定列中包含的信息操作整个帧中的数据。

我的问题是我不知道如何使用输入到第二个参数中的字符表达式来访问函数内数据框中的特定列。这是一个超级简短的例子，

```
datFunc <- function(dataFrame = NULL, charExpres = NULL) {

return(dataFrame$charExpress)

} 
```

例如，如果您输入

```
datFunc(myData, "variable1") 
```

这不会返回 myData$variable1。必须有一个简单的方法来做到这一点。对不起，如果这个问题很愚蠢，但我会在这里得到一点帮助。

一个相关的问题是，如何使用字符串“myData$variable1”从 myData 实际返回 variable1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:43:15.630

我认为 OP 也想将数据框的名称作为字符串传递。如果是这种情况，您的功能应该是这样的。（从其他答案借来的样本）

```
fooFunc <- function( dfNameStr, colNamestr, drop=TRUE) {
  df <- get(dfNameStr)
  return(df[,colNamestr, drop=drop])
}

> myData <- data.frame(ID=1:10, variable1=rnorm(10, 10, 1))
> myData
   ID variable1
1   1 10.838590
2   2  9.596791
3   3 10.158037
4   4  9.816136
5   5 10.388900
6   6 10.873294
7   7  9.178112
8   8 10.828505
9   9  9.113271
10 10 10.345151

> fooFunc('myData', 'ID', drop=F)
   ID
1   1
2   2
3   3
4   4
5   5
6   6
7   7
8   8
9   9
10 10
> fooFunc('myData', 'ID', drop=T)
 [1]  1  2  3  4  5  6  7  8  9 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:39:00.070

你快到了，尝试使用`[`而不是`$`这种索引

```
 datFunc <- function(dataFrame = NULL, charExpres = NULL, drop=TRUE) {
  return(dataFrame[, charExpres, drop=drop])
  }

# An example
set.seed(1)
myData <- data.frame(ID=1:10, variable1=rnorm(10, 10, 1))  # DataFrame

datFunc(myData, "variable1") # dropping dimensions
[1]  9.373546 10.183643  9.164371 11.595281 10.329508  9.179532 10.487429 10.738325 10.575781  9.694612

datFunc(myData, "variable1", drop=FALSE) # keeping dimensions
   variable1
1   9.373546
2  10.183643
3   9.164371
4  11.595281
5  10.329508
6   9.179532
7  10.487429
8  10.738325
9  10.575781
10  9.694612 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:41:38.563

或者，您可以找到数据框的列索引：

```
df <- as.data.frame(matrix(rnorm(100), ncol = 10))
colnames(df) <- sample(LETTERS, 10)

column.index.of.A <- grep("^A$", colnames(df))
df[, column.index.of.A] 
```

# git - 如何在 Shell 脚本中更改目录？

> ID：14776006
> 
> 赞同：3
> 
> 时间：2013-02-08T15:35:01.773
> 
> 标签：git, shell

这是我第一次创建 Shell 脚本。

目前我正在使用 nodejs，我正在尝试创建一个 Shell 脚本并在其中使用 git。

## 我的脚本是什么样的

```
#!/bin/bash
git clone git://github.com/Tmeister/Nodejs---Boilerplate.git site 
```

该脚本位于我的桌面上并且可以运行（是的，我已经安装了 git）。

## 我想要的是

下载 git 存储库后，我想：

```
cd /site
npm install 
```

我安装了 Nodejs 和 NPM。

## 我试过的

我只想深入创建的文件夹并运行命令`npm install`，所以我想这样做：

```
#!/bin/bash
git clone git://github.com/Tmeister/Nodejs---Boilerplate.git site
echo "cd /site"
echo "npm install" 
```

我也读过[别名](https://stackoverflow.com/questions/255414/why-doesnt-cd-work-in-a-bash-shell-script)，我试过了

```
#!/bin/bash
git clone git://github.com/Tmeister/Nodejs---Boilerplate.git site
alias proj="cd /site"
proj
echo "npm install" 
```

但是没有任何效果..

谁能帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T15:37:25.063

它可能比您想象的要简单（因为您一直在编写 bash（或您使用的任何 shell）“脚本”，只需使用命令行即​​可）：

```
#!/bin/bash
git clone git://github.com/Tmeister/Nodejs---Boilerplate.git site
cd site
npm install

cd - # back to the previous directory 
```

为了使它更健壮一点，只有在成功时才运行`npm`（`cd site`更多信息在将[命令链接在一起](http://tldp.org/LDP/abs/html/list-cons.html#LISTCONSREF)）：

```
git clone git://github.com/Tmeister/Nodejs---Boilerplate.git site
cd site && npm install && cd - 
```

* * *

仅仅因为我读了一些关于[可靠 bash](http://redsymbol.net/articles/bash-exit-traps/)的文章，这里还有另一个版本：

```
#!/bin/bash

OLDPWD=$(pwd)
git clone git://github.com/Tmeister/Nodejs---Boilerplate.git site \
    && cd site && npm install && cd "$OLDPWD"
function atexit() { cd "$OLDPWD"; }
trap atexit EXIT # go back to where we came from, however we exit 
```

# c - OpenMP - 无输出

> ID：14776013
> 
> 赞同：0
> 
> 时间：2013-02-08T15:35:15.350
> 
> 标签：c, openmp, pbs

我有一个需要与 openMP 并行的 C 代码。代码本身连续运行良好，但在并行时不能。该代码正在使用 PBS 运行，并且我已经包含了批处理脚本。

该代码有两个瘫痪区域，都在一个时间循环内，最后变成串行以打印输出文件。理想情况下，每个时间步都有一个输出。

我串行地每个时间步输出一个文件，但并行地它输出第一个文件并继续无限期地运行，不输出任何内容（包括错误文件，自制和系统错误）。

# 编码

```
.#pragma omp parallel for default(none) private (dudx2, dudy2, dudz2, du, /*I_gap, I_gap2,*/ Ii, x, y, z) shared (V, Vnew, /*v_fibro,*/ hh) schedule(static)
     for (z=1;z<Z;z++) {
            for (y=1;y<Y;y++)
                for (x=1;x<X;x++)
                     if (hh[x][y][z] > 0) {

            dudx2 = (V[x - 1][y][z] + V[x + 1][y][z] - 2 * V[x][y][z]) ;
            dudy2 = (V[x][y - 1][z] + V[x][y + 1][z] - 2 * V[x][y][z]) ;
            dudz2 = (V[x][y][z - 1] + V[x][y][z + 1] - 2 * V[x][y][z]);

            du = (D/(dx*dx))*((dudx2)  + (dudy2)  + (dudz2))  ;

            Ii = MYO(x,y,z); //calls function with multiple multi-dimen' arrays

                       Vnew[x][y][z] = V[x][y][z] + dt * (du - Ii );
       }
     }

.#pragma omp parallel for default(none) shared (V, Vnew, hh) private (x, y, z) schedule(static)
            for (z=0;z<=Z;z++) {
                    for (y=0;y<=Y;y++)
                            for (x=0;x<=X;x++){
                                                            if (hh[x][y][z] > 0) 
                               V[x][y][z]=Vnew[x][y][z];

                            }

            }

                        sprintf(str2,"V%d.vtk",tab);
            fprintf(outp,"%s\n",str2);
            userfile=fopen(str2,"wt");
            if(userfile==NULL) fprintf(outp,"Could not open%s\n.",str2);

                    tab++;

                    fprintf(userfile,"vtk header\n");

                for (z=0;z<Z;z++){
                    for (y=0;y<Y;y++){
                        for (x=0;x<X;x++){      
                        fprintf(userfile,"%g ",Vnew[x][y][z]);                      
                            } 
```

# 笔记

- 多维阵列为 200x200x200，其中有 20 多个无法实际减少（代表 3d 组织中的生物细胞特性）

这导致我们调查内存错误的可能性。所以我们更改了批处理脚本以允许每个处理器 8gb

-代码包括和omp_set_num_threads（64），编译行是；

```
gcc -lm -lgomp -fopenmp -03 filename.c -o test ("-mcmodel=medium" has been trialed) 
```

-批处理脚本是

mppwidth 和 aprun 不运行

```
.#!/bin/bash
.#PBS -l nodes=1:ppn=64
.#PBS -l mem=512G
.#PBS -M email adress@gmail.com
.#PBS -l walltime=20:00:00
.#PBS -N test
.#PBS -o ./
.#PBS -e ./

.#Modules!
. /etc/profile.d/modules.sh

module purge 

.#(Intel compilers)
.# source /opt/intel/composer_xe_2011_sp1.7.256/bin/compilervars.sh intel64
module load intel/composerxe/13.0.0

cd $PBS_O_WORKDIR

export OMP_NUM_THREADS=64

./test 
```

在此先感谢，并对糟糕的拼写语法和格式等表示歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:32:51.890

这是一个简单的例子：

```
#include <stdio.h>
#include <math.h>
#include <sys/time.h>

#define OMP_NUM_THREADS 4
#define X 50
#define Y 50
#define Z 50

double dtime(){
 double t;
 struct timeval tv;
 gettimeofday(&tv, NULL);
 t = tv.tv_sec + ((double)tv.tv_usec)/1e6;
 return t;
}

int main(int argv, char **argc){
 double V[X][Y][Z];
 double Vnew[X][Y][Z];
 int z;

 for (int z=0;z<Z;z++)
  for (int y=0;y<Y;y++)
   for (int x=0;x<X;x++)
    V[x][y][z] = 3.*x+2.*y+z;

double t0 = dtime();
#pragma omp parallel for shared(V, Vnew)
 for(z=1;z<Z;z++)
  for(int y=1;y<Y;y++)
   for(int x=1;x<X;x++)
     Vnew[x][y][z] = sin(V[x][y][z])*cos(V[x][y][z])+log(V[x][y][z]);
 printf("time: %g\n", dtime() - t0);
 FILE *userfile=fopen("out" ,"w");
 fprintf(userfile,"vtk header\n");
 for (z=0;z<Z;z++)
  for (int y=0;y<Y;y++)
   for (int x=0;x<X;x++)
    fprintf(userfile,"%g ",Vnew[x][y][z]);
} 
```

编译：

```
gcc -std=gnu99 -fopenmp -lm 1.c 
```

在我的机器（4核）上运行后，它给出：

```
time: 0.0224061 
```

当我发表评论`#pragma omp`时，我得到：

```
time: 0.059217 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:13:51.677

我们在让 parralleising 在 openmp 中工作方面取得了进展，但仅适用于小文件（将针对 20x20x20、50x50x50 的阵列运行，但不适用于 100...），其中 20x20x20 速度较慢，而 50x50x50 速度明显更快。但从长远来看，我们需要它来处理更大的问题

对于较大的文件，它会在第一次循环中写入第一个输出文件并且无法写入其余部分（观察到较小的数组大小），因为它适用于较小的数组大小我们想知道这是否可能是内存问题？

# python - 如何在 crontab + 虚拟环境中运行自定义 manage.py？

> ID：14776015
> 
> 赞同：7
> 
> 时间：2013-02-08T15:35:21.400
> 
> 标签：python, django, virtualenv, crontab

如何在 crontab 中运行

```
*/1 * * * * /home/user/Desktop/job/dp/ python manage.py statistics 
```

与虚拟环境？我需要先激活 virtualenv（否则它不起作用）

这是我的虚拟环境：

```
source job/bin/activate 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T15:43:03.593

**编辑**：

尝试这样的事情：

```
*/1 * * * * . /path-to-env/bin/activate && /home/user/Desktop/job/dp/manage.py statistics 
```

这应该读作：激活环境，如果成功，则执行 manage.py 脚本。由于 manage.py 应该有一个 python shebang 并且虚拟环境设置了正确的 python 解释器，这应该可以工作。

显然 cron 通常运行时`/bin/sh`不知道该`source`命令。因此，一种选择是使用点作为`source`替代。另一个`/bin/bash`在 cron 文件中设置：

```
SHELL=/bin/bash
*/1 * * * * source /path-to-env/bin/activate && /home/user/Desktop/job/dp/manage.py statistics 
```

在以下位置阅读有关此问题的更多信息： [http](http://codeinthehole.com/writing/running-django-cronjobs-within-a-virtualenv/) ://codeinthehole.com/writing/running-django-cronjobs-within-a-virtualenv/ 文章没有提到`source`可以替换为 a `.`，但我刚刚尝试过并且它对我有用。因此，您现在有几个选项可供选择，文章甚至还有其他选项。;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T15:36:42.977

使用类似的东西`~/envs/someenv/lib/python /path/to/your/script`

在您的情况下，它看起来像

`*/1 * * * * ~/envs/someenv/lib/python /home/user/Desktop/job/dp/manage.py statistics`

# c# - Microsoft HPC 2012 代码示例

> ID：14776019
> 
> 赞同：1
> 
> 时间：2013-02-08T15:35:32.403
> 
> 标签：c#, hpc

是否有使用 Microsoft HPC 2012 开发应用程序的 C# 代码示例或教程？

根据[msdn 上的 HPC Pack 2012 SDK 下载页面，](http://www.microsoft.com/en-gb/download/details.aspx?id=36043)代码示例“即将推出”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T14:01:42.487

Windows HPC 团队博客发布了关于 MS HPC Server 2012 中 SOA 服务的非常直接和简单的教程。

[HPC Pack SOA 教程 I – 编写您的第一个 SOA 服务和客户端](http://blogs.technet.com/b/windowshpc/archive/2013/03/14/soa-based-application-tutorial-i-write-your-first-soa-service-and-client-hpc-pack-.aspx)

我知道它有点晚了，但我相信其他人会发现这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:56:04.047

您是否正在努力解决 HPC 的某个特定方面，或者您是否正在尝试查看可行的特定场景？

我没有在 HPC Pack 2012 的公开 API 中看到很多修改。我采用了针对 2008 R2 编写的代码，并在针对 HPC Pack 2012 没有任何问题的情况下运行它。我注意到的唯一更改为2012 年似乎修改了一些规则，关于可以对已经进入运行状态的作业进行哪些更改（SOA 作业或多或少直接以运行状态开始以接收请求）。安装 2012 SDK 后，您还可以访问一些新功能，例如 Job Dependency 属性和其他配置属性。

您可以在此处的 MSDN 文档中找到 2008 R2 版本的编码示例：

[http://msdn.microsoft.com/en-us/library/cc853440(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc853440(v=vs.85).aspx)

可在此处找到 2008 R2 Pack SP4 特定链接：

[http://www.microsoft.com/en-us/download/details.aspx?id=29992](http://www.microsoft.com/en-us/download/details.aspx?id=29992)

我知道这并不能真正回答你的问题，如果我有足够的代表，我会做得更短，只是对你的问题添加评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T01:59:33.650

我刚刚发布了一些 HPC SOA 示例代码：[http ://code.msdn.microsoft.com/Distributed-Parallel-15c5700a](http://code.msdn.microsoft.com/Distributed-Parallel-15c5700a)

# java - Groovy 无法实现使用继承和泛型的 Java 接口

> ID：14776020
> 
> 赞同：0
> 
> 时间：2013-02-08T15:35:33.047
> 
> 标签：java, groovy

我正在使用定义一些通用接口的 Java 包。我想在一个单独的项目中用 Groovy 类实现这些接口。Groovy 编译器阻塞并报告我没有实现该接口。Groovy 代码的 Java 等价物可以正常工作。

我已经接受 Groovy 编译器不支持我正在尝试做的事情，所以我会找到另一种方法，但我仍然想知道它为什么会失败。

我有一个示例 Maven 项目，它在 Github [https://github.com/gilday/groovy-java-generics上演示了这个问题](https://github.com/gilday/groovy-java-generics)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:55:08.287

我不确定，但可能是 Groovy 的 Java 存根没有正确生成。您可以尝试`groovy-eclipse-compiler`改用。看这里：

[http://groovy.codehaus.org/Groovy-Eclipse+compiler+plugin+for+Maven](http://groovy.codehaus.org/Groovy-Eclipse+compiler+plugin+for+Maven)

# c# - Microsoft.SqlServer.Management Smo 错误

> ID：14776029
> 
> 赞同：0
> 
> 时间：2013-02-08T15:35:55.523
> 
> 标签：c#, asp.net, sql

我有一个 asp.net 项目，它在带有 Visual Studio 2008 的 .Net Framework 2.0 上运行。一切正常。现在我想将 Visual Studio 2008 更改为 Visual Studio 2010。当我在 Visual Studio 2010 和 .Net Framework 2.0 中构建项目时，出现如下错误：

命名空间“Microsoft.SqlServer.Management”中不存在类型或命名空间名称“Smo”（您是否缺少程序集引用？）

我怎么解决这个问题？

我的 Microsoft.SqlServer.Smo.dll 版本是 10.0.0.0，运行时版本是 v2.0.50727。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:39:36.930

**简而言之：**我会继续，并确保迁移的项目针对的是正确的框架版本。在您的情况下，它是 .NET 2.0。这可能是您的项目在项目配置/属性中缺少的东西。

默认情况下，VS 环境中的任何迁移项目都以新 IDE 的默认框架为目标。在您的具体情况下，我相信它的目标是 NET 4.0。改变它。

**编辑：**此问题与 Smo 对 .NET 3.5 的直接依赖性有关。在这里，您在 Microsoft 论坛中发布了更详细的帖子 - [Microsoft.SqlServer.Smo 无法解决](http://connect.microsoft.com/VisualStudio/feedback/details/651546/microsoft-sqlserver-smo-could-not-be-resolved-because-it-has-an-indirect-dependency-on-the-framework-assembly-system-core-version-3-5-0-0)。

# php - PHP/Mysql - 添加带有换行符的表单数据 HTML 元素

> ID：14776030
> 
> 赞同：0
> 
> 时间：2013-02-08T15:35:57.057
> 
> 标签：php, mysql, textarea, str-replace, stripslashes

基本上，我有一个管理区域，用户可以在其中使用表单 textarea 向 MySQL 数据库添加信息。用户很少或根本没有 HTML 知识，所以我希望他们能够使用他们的返回键来创建换行符而不是`<br />`标签，但是我也希望将来也允许使用 HTML。我也不希望`<br />`标签在插入后出现在 textarea 中，而是希望换行，以免混淆人们 - 基本上在 textarea 中完全按照输入的方式显示它。

不过，我在解析数据时遇到了困难，我想出了一个解决方案来防止换行符被剥离，但我真的很想知道这是否有效——它有效，但如果我最近学到了什么我知道这并不意味着它是正确的！

```
$extra_details_escape = mysql_real_escape_string($_POST['extra_details']);
$extra_details_escape = str_replace('\r\n','LiNeBrEaK',$extra_details_escape);
$extra_details_escape = stripslashes($extra_details_escape);
$extra_details_escape = str_replace('LiNeBrEaK','\r\n',$extra_details_escape);
mysql_query("UPDATE table SET column = '$extra_details_escape' WHERE id = '$id'"); 
```

非常感谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:44:18.653

你试过 nl2br() 吗？

试试这个，发布字符串清理：

```
$extra_details_escape = nl2br($_POST['extra_details']); 
```

# java - RestEasy：org.codehaus.jackson.map.JsonMappingException：无法从 START_OBJECT 令牌（..）中反序列化 java.util.ArrayList 的实例

> ID：14776034
> 
> 赞同：3
> 
> 时间：2013-02-08T15:36:06.097
> 
> 标签：java, unit-testing, jackson, resteasy

我有一个返回的休息端点`List<VariablePresentation>`。我正在尝试将这个休息端点测试为

```
 @Test
    public void testGetAllVariablesWithoutQueryParamPass() throws Exception {
        final ClientRequest clientCreateRequest = new ClientRequest("http://localhost:9090/variables");
        final MultivaluedMap<String, String> formParameters = clientCreateRequest.getFormParameters();
        final String name = "testGetAllVariablesWithoutQueryParamPass";
        formParameters.putSingle("name", name);
        formParameters.putSingle("type", "String");
        formParameters.putSingle("units", "units");
        formParameters.putSingle("description", "description");
        formParameters.putSingle("core", "true");

        final GenericType<List<VariablePresentation>> typeToken = new GenericType<List<VariablePresentation>>() {
        };
        final ClientResponse<List<VariablePresentation>> clientCreateResponse = clientCreateRequest.post(typeToken);
        assertEquals(201, clientCreateResponse.getStatus());
        final List<VariablePresentation> variables = clientCreateResponse.getEntity();
        assertNotNull(variables);
        assertEquals(1, variables.size());

    } 
```

此测试失败，错误提示

```
org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token(..) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T10:28:56.507

这看起来像一个杰克逊错误，它期望解析一个数组（以'['开头），但它遇到了一个对象的开始标记（'{'）。通过查看您的代码，我猜它正在尝试将 JSON 反序列化到您的列表中，但它正在获取对象的 JSON。

您的 REST 端点返回的 JSON 是什么样的？它应该看起来像这样

```
[
    {
        // JSON for VariablePresentation value 0
        "field0": <some-value>
        <etc...>
    },
    <etc...>
] 
```

# vb.net - 确定 Windows 8 平板电脑是否已对接

> ID：14776035
> 
> 赞同：0
> 
> 时间：2013-02-08T15:36:05.767
> 
> 标签：vb.net, windows-8

如何确定 Windows 8 平板电脑是否在扩展坞中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:57:09.047

[ASHWID](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.profile.hardwareidentification.getpackagespecifictoken.aspx)包含一个指示扩展坞的字节（当它在扩展坞中时）。 [见这篇文章](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)。在“ASHWID 的结构”部分中有一个带有扩展坞的 ASHWID 示例。（鉴于此，您可能不应该尝试这样做，因为为不同的硬件细节开发不同的行为可能是一个坏主意）。

# sql - 从 [Query1] 或 [Query2] 中选择 #temp..

> ID：14776036
> 
> 赞同：3
> 
> 时间：2013-02-08T15:36:07.527
> 
> 标签：sql, sql-server-2008-r2

**添加说明**：我的代码在存储过程中运行。

多年来我多次遇到这个问题，所以我想我会硬着头皮最后问，即使我认为我可能错过了一个简单的解决方案。

通常是我喜欢使用的情况

```
SELECT * INTO #Temp FROM ... 
```

.. 因为我发现在小型数据集上使用它时，它通常比任何其他临时表生成方式表现更好。

但有时我会有一个可以在多个“模式”下运行的参数化查询，因此需要我的语句能够根据此模式从两个完全不同的来源填充#Temp，例如

选项1

```
IF @RoleID > -1
    SELECT PrivilegeID INTO dbo.#Privs FROM Users.tblRolePrivilegeLink WHERE RoleID = @RoleID 
```

选项 2

```
 IF @UserID > -1 
        SELECT PrivilegeID INTO dbo.#Privs FROM dbo.fn_UserPrivileges(@UserID) 
```

在此示例中，我试图为角色或用户获取一组权限，一个直接来自表，另一个来自函数。

我知道我可以使用常规的 INSERT INTO.. 逻辑，但我真的很想看看是否有实际的解决方案可以这样做。也许与 CTE 或类似的。

**解决方案**

```
-- Get distinct privileges
SELECT  PrivilegeID
INTO    dbo.#Privs 
FROM
(
        SELECT PrivilegeID FROM Users.tblRolePrivilegeLink WHERE RoleID > -1 AND RoleID = @RoleID
        UNION
        SELECT PrivilegeID FROM dbo.fn_UserPrivileges(@UserID) WHERE @UserID > -1
) AS T 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:43:27.237

```
SELECT * 
INTO dbo.#Privs 
from (
  SELECT PrivilegeID 
  FROM   Users.tblRolePrivilegeLink 
  WHERE  RoleID = @RoleID and @RoleID > -1

  UNION

  SELECT PrivilegeID 
  FROM   dbo.fn_UserPrivileges(@UserID)
  WHERE  @UserID  > 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:45:01.507

您可以通过使用“go”分隔语句来做到这一点：

```
if 1=0 select 1 as v into #temp;
go
if 1=1 select 2 as v into #temp;
go
select * from #temp 
```

此代码假定`#temp`最初不存在。

# mysql - MySQL：FLOAT 的问题

> ID：14776038
> 
> 赞同：0
> 
> 时间：2013-02-08T15:36:20.517
> 
> 标签：mysql, insert, sql-types

我做了一张桌子：

```
CREATE TABLE IF NOT EXISTS vehicles (
    vehicleid INT(3),
    vehiclex FLOAT(6,6),
    vehicley FLOAT(6,6),
    vehiclez FLOAT(6,6),
    vehicleaw FLOAT(6,6),
    vehiclecolor1 INT(2),
    vehiclecolor2 INT(2)
) 
```

现在当我试图插入这个：

```
INSERT INTO vehicles (vehicleid,vehiclex,vehicley,vehiclez,vehicleaw,vehiclecolor1,vehiclecolor2)
VALUES(411,1786.9001,-1892.1359,13.4903,14.0000,0,0) 
```

首先，现在出现错误，没有警告:)

我在 SQL 查询中得到一个无效行：

```
SELECT * FROM `vehicles` ORDER BY `vehicles`.`vehiclez` ASC LIMIT 0, 30 ; 
```

**结果** 行数：1

> 车辆ID 车辆x 车辆车辆z 车辆aw 车辆颜色1 车辆颜色2 411 0.999999 -0.999999 0.999999 0.999999 0 0

所以我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:39:55.823

[FLOAT](http://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html)的第一个参数是总位数，而不是小数点前的位数。

在您当前的代码中，总位数与小数点后可能出现的位数相同，因此存储的数字不能大于`0.999999`（或小于`-0.999999`）。

尝试类似的东西`FLOAT(12, 6)`。

# mysql - sql列格式化

> ID：14776045
> 
> 赞同：0
> 
> 时间：2013-02-08T15:36:35.220
> 
> 标签：mysql, sql, formatting

只是一个快速的问题要问

在 MySQL 中，我如何将数值显示为字符串等价物？

所以

```
1 = New
2 = Old
3 = Cancelled 
```

所以如果我有类似的东西

```
SELECT object_name, object_status where object_status > 0 
```

这又回来了

```
object#1, 1
object#2, 2
object#3, 1
object#4, 3 
```

但我希望它显示

```
object#1, New
object#2, Old
object#3, New
object#4, Cancelled 
```

提前感谢KS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:38:01.147

你可以用`CASE`这个，

```
SELECT object_name,         
        CASE object_status 
            WHEN 1 THEN 'New'
            WHEN 2 THEN 'Old'
            WHEN 3 THEN 'Cancelled'
            ELSE NULL
        END status
where object_status > 0 
```

或者

```
SELECT object_name,         
        CASE 
            WHEN object_status = 1 THEN 'New'
            WHEN object_status = 2 THEN 'Old'
            WHEN object_status = 3 THEN 'Cancelled'
            ELSE NULL
        END status
where object_status > 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:38:43.640

```
SELECT object_name, 
 case object_status when 1 then 'New' 
  when 2 then 'Old' 
  when 3 then 'Cancelled' end as status
from myTable
where object_status > 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T15:41:13.760

您可以创建一个新的映射表并将这两个表连接在一起。新表将有 2 列 - 一列用于`object_status`，一列用于好名称。然后加入两者。

```
SELECT s.object_name, sm.StatusName
FROM Status s
INNER JOIN StatusMapping sm on s.object_status = sm.object_status
WHERE s.object_status > 0 
```

这将允许您在不更改查询的情况下根据需要添加新映射。

# javascript - 如何在 WP7 中使用固定页脚定位 ·

> ID：14776046
> 
> 赞同：3
> 
> 时间：2013-02-08T15:36:35.993
> 
> 标签：javascript, jquery, css, windows-phone-7, jquery-mobile

如何使用 Jquery-mobile 在 WP7 中固定页脚

```
 <div data-role="footer"  data-position="fixed">
                    <h1>Footer</h1>
  </div> 
```

![Windows 手机页脚](../Images/cba6e070707773cc8b516e402cbe2b56.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:51:49.360

WP7 不支持 position:fixed 所以工具栏应该只随着页面滚动，除非你选择包含可选的 polyfill，这是一个修复：

[https://github.com/filamentgroup/jQuery-Mobile-FixedToolbar-Legacy-Polyfill](https://github.com/filamentgroup/jQuery-Mobile-FixedToolbar-Legacy-Polyfill)

# javascript - 创建 zip 文件仅包含 pdf

> ID：14776050
> 
> 赞同：1
> 
> 时间：2013-02-08T15:36:46.943
> 
> 标签：javascript, google-apps-script

在我的脚本中，我试图创建一个文件夹，在所述文件夹中创建一个带日期戳的文档，创建一个子文件夹，然后将一些文档复制到该子文件夹中。

所有这一切都很好。当我尝试通过此处找到的任何一种方法压缩父文件夹时：[使用应用程序脚本在 google drive 内创建一个 zip 文件](https://stackoverflow.com/questions/13259041/creating-a-zip-file-inside-google-drive-with-apps-script)- 它会创建一个带有唯一 PDF 文件的 zip 文件，该文件与带日期戳的文档同名。压缩的 PDF 是空白的，并且子文件夹不存在。

任何关于为什么会发生这种情况的见解都会很棒。

```
var folder = DocsList.createFolder(folderTitle);
var subFolder = folder.createFolder('Attachments');
    subfolder.createFile(attachments[]); //In a loop that creates a file from every
                                         //attachment from messages in thread

var doc = DocumentApp.create(docTitle); //Google Doc
var docLocation = DocsList.getFileById(doc.getId());
    docLocation.addToFolder(folder);
    docLocation.removeFromFolder(DocsList.getRootFolder());
//Everything works fine, I can view file and subfolder, and subfolder's documents

//This is where the problem is:
var zippedFolder = DocsList.getFolder(folder.getName());
    zippedFolder.createFile(Utilities.zip(zippedFolder.getFiles(), 'newFiles.zip'));
//this results in a zipped folder containing one blank pdf that has the same title as doc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-27T19:52:28.487

The DocsList service has been deprecated so Phil Bozak's previous solution no longer works. However, refer to [another SO question](https://stackoverflow.com/questions/22237799/zip-multiple-folders-in-1-zip-google-drive-scripts?rq=1) for solution that works with DriveApp class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:55:39.517

这是一个很好的问题。zip 功能似乎没有压缩子文件夹的能力。您的脚本不起作用的原因是您只从文件夹中选择*文件*。

一种解决方案是压缩每个子文件夹并将其存储在一个压缩文件中。您可以使用我为此编写的函数。

```
function zipFolder(folder) {
  var zipped_folders = [];
  var folders = folder.getFolders();
  for(var i in folders)
    zipped_folders.push(zipFolder(folders[i]));
  return Utilities.zip(folder.getFiles().concat(zipped_folders),folder.getName()+".zip");
} 
```

这会递归压缩所有子文件夹。然后你需要用类似的东西创建文件

```
DocsList.getFolder("path/to/folder/to/store/zip/file").createFile(zipFolder(folderToZip)); 
```

我将提出一个功能请求以允许压缩子文件夹。

# javascript - SQLite 与 Javascript windows 8 应用程序

> ID：14776056
> 
> 赞同：1
> 
> 时间：2013-02-08T15:37:04.003
> 
> 标签：javascript, mobile, windows-8

我在使用带有数据库 sqlite 的 Windows 8 应用程序时介于两者之间。没有找到任何适当的帮助。我得到了一篇文章[http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx) 但很抱歉我没有得到如何和在哪里使用此代码

```
1: var dbPath = Windows.Storage.ApplicationData.current.localFolder.path + '\\db.sqlite';
   2: SQLite3JS.openAsync(dbPath)
   3:   .then(function (db) {
   4:     return db.runAsync('CREATE TABLE Item (name TEXT, price REAL, id INT PRIMARY KEY)');
   5:   })
   6:   .then(function (db) {
   7:     return db.runAsync('INSERT INTO Item (name, price, id) VALUES (?, ?, ?)', ['Mango', 4.6, 123]);
   8:   })
   9:   .then(function (db) {
  10:     return db.eachAsync('SELECT * FROM Item', function (row) {
  11:       console.log('Get a ' + row.name + ' for $' + row.price);
  12:     });
  13:   })
  14:   .then(function (db) {
  15:     db.close();
  16:   }); 
```

问题是我不知道如何使用，

我几乎没有想要保存在 SQLite 数据库中的 TextBox 值，但我没有弄清楚。让你再次知道。我正在使用 JavaScript (Windows) 使用 Windows Store 应用程序

请让我知道如何执行此操作以及如何摆脱此循环

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:30:50.730

这只是一些示例代码，它创建一个“项目”表并插入和选择一些记录作为如何使用 API 的示例。在调用 SQLite3JS.openAsync 之后，您可能应该保留数据库连接对象（直到应用程序挂起）并将其用于后续调用 runAsync、allAsync、oneAsync。第一个只执行一条语句，第二个返回 select 语句中的所有行，而 oneAsync 将只返回 select 语句中的第一行作为对象。

但是，根据您想要做什么，[ApplicationData.localSettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)或[ApplicationData.roamingSettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx)可能更适合您的需求，尤其是在您没有 RDBMS/SQLite 经验的情况下。

# r - 如何按位置排除向量中的多个元素？

> ID：14776057
> 
> 赞同：1
> 
> 时间：2013-02-08T15:37:11.967
> 
> 标签：r, vector

我想从一个向量中挑选元素，并根据他们得到的位置排除 3 个值。

我知道 x[-n] 函数可以排除单个值，但我不知道如何排除多个值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T15:39:00.467

您可以使用该`c`函数将值组合成一个向量：

```
a <- 1:10
a[-c(1,2,3)]
[1]  4  5  6  7  8  9 10 
```

# c - 可以在没有数学支持的情况下编译 spidermonkey 吗？

> ID：14776066
> 
> 赞同：1
> 
> 时间：2013-02-08T15:37:30.087
> 
> 标签：c, spidermonkey, javascript-engine

我的 libm 没有 sin 和 cos 函数。

是否有一个配置开关可以让我在没有 JavaScript 的 Math.* 函数的情况下编译 spidermonkey？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:39:20.403

也许您可以编写存根（虚拟）函数来避免编译/链接错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T11:27:52.857

在帮助文件中实现 sin/cos 可能比从 javascript 中删除 Math 更容易。

# jakarta-ee - 在没有 WAR 的情况下在 EAR 中部署多个“Web 片段”项目

> ID：14776067
> 
> 赞同：4
> 
> 时间：2013-02-08T15:37:31.590
> 
> 标签：jakarta-ee, deployment, jboss, ear

我有一些或 EJB jar 模块，其中还包括[本问题](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code)中所述的 Web 资源。

我现在想将其部署为 EAR 的一部分。

现在，我可以毫无问题地将其作为一场战争来进行，这就是我的后备计划。但是，我想了解是否可以将多个“web 片段”jar 部署到一个耳朵中以形成一个完整的 web 应用程序*，而无需*在其中使用 war 文件将它们组合在一起。

此外，如果我有多个依赖于一个或多个这些 jar 的 war 文件，我是否必须构建它们以便这些 jar 在 war 文件的 WEB-INF/lib 中重复，即使这些 jar 文件最终在同一只耳朵？

在这种情况下，如果 jar 文件包含实体，是否也需要它们在耳朵的根中以便可以定义全局持久性单元？

我在 JBoss 7 上，但如果可能的话，我更喜欢标准的容器独立解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T05:08:52.793

这将适用于任何符合 JEE5 的服务器。

假设你有

*   2 EJB 称为 myejb1.jar 和 myejb2.jar
*   2 个名为 mywebapp1.war 和 mywebapp2.war 的 WAR webapp
*   2 个常见的 JAR，称为 log4j.jar 和 mycommon.jar

您希望将其全部打包到一个名为 myapp.ear 的 EAR 文件中。

myapp.ear 目录结构如下所示：

myapp.ear:
   META-INF/application.xml
   myejb1.jar
   myejb2.jar
   mywebapp1.war
   mywebapp2.war
   lib/log4j.jar
   lib/mycommon.jar

您的 META-INF/application.xml 的内容将包含

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="5"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/application_5.xsd">

    <module>
        <ejb>myejb1.jar</ejb>
    </module>
    <module>
        <ejb>myejb2.jar</ejb>
    </module>

    <module>
        <web>
            <web-uri>mywebapp1.war</web-uri>
            <context-root>webapp1</context-root>
        </web>
    </module>
    <module>
        <web>
            <web-uri>mywebapp2.war</web-uri>
            <context-root>webapp2</context-root>
        </web>
    </module>

    <library-directory>lib</library-directory>
</application> 
```

您将能够通过 URL
[http://myJBossServer.url/webapp1/](http://myJBossServer.url/webapp1/)
[http://myJBossServer.url/webapp2/访问您的 Web 应用程序](http://myJBossServer.url/webapp2/)

您还可以在多个 Web 应用程序之间共享静态资源，例如 CSS、图像、JavaScript。例如，我有一个具有以下目录布局的 static-content.jar 文件：

static-content.jar:
   META-INF/resources/css/my.css
   META-INF/resources/img/my.jpg
   META-INF/resources/js/jQuery.js
   META-INF/resources/js/node.js

在构建期间，我将 static-content.jar 放在我的两个 webapps 的 WEB-INF/lib 目录中。现在

[http://myJBossServer.url/webapp1/css/my.css](http://myJBossServer.url/webapp1/css/my.css)
[http://myJBossServer.url/webapp2/css/my.css](http://myJBossServer.url/webapp2/css/my.css)

与 static-content.jar 具有相同的来源。

如果我只想覆盖 webapp2 中默认的 my.css，我可以将修改后的 my.css 直接放入 mywebapp2.war 中。

mywebapp2.war
   css/my.css
   WEB-INF/lib/static-content.jar

WAR 中的 css/my.css 将覆盖 static-content.jar 中的 my.css

# ruby-on-rails - button_to 只能间歇性地工作，并且经常导致“无路由”错误

> ID：14776089
> 
> 赞同：2
> 
> 时间：2013-02-08T15:38:37.567
> 
> 标签：ruby-on-rails, button-to

*在编辑时添加，2013-02-11：*

我应该更清楚地说明我遇到的问题不是我无法获得我编写的 ERB 代码来生成正确的 HTML 代码。相反，我的 Rails 安装有时会正确解释 HTML 代码，因此单击链接会产生正确的效果，有时会不正确，产生“无路由”错误。我在下面的答案中提供了更多详细信息。

*原始问题，2013-02-08：*

我正在使用 Rails 3.2.11 制作一个简单的登录表单。我尝试了几种对表单的提交按钮进行编码的方法，但由于缺少路由错误，每种方法都失败了。我有一种方法可以工作，并检查了我的代码。然而，现在同样的代码失败了。

这是`app/views/session/new.html.erb`（我正在使用`simple_form`，但不是它的按钮包装器）的代码：

```
<h2>Log in</h2>
<%= simple_form_for :session do |f| %>
  <%= f.input :username %>
  <%= f.input :password %>
  <%= button_to "Submit", session_index_path %>
<% end %> 
```

这产生的 HTML 代码的相关部分是：

```
<h2>Log in</h2>
<form accept-charset="UTF-8" action="/session/new" class="simple_form session" method="post" novalidate="novalidate">
  <div style="margin:0;padding:0;display:inline">...</div>
  ...the input fields...
  <form action="/session" class="button_to" method="post">
    <div>
      <input type="submit" value="Submit" />
      <input name="authenticity_token" type="hidden" value="...token value here..." />
    </div>
  </form>
</form> 
```

这是我的`config/routes.rb`：

```
MyApp::Application.routes.draw do
  resources :at_user
  resources :session, :only => [:new, :create, :destroy]
  match 'login'  => 'session#new',     as: :login
  match 'logout' => 'session#destroy', as: :logout
  root to: 'main#index'
end 
```

这是命令`rake routes`输出的内容：

```
at_user_index GET    /at_user(.:format)          at_user#index
              POST   /at_user(.:format)          at_user#create
  new_at_user GET    /at_user/new(.:format)      at_user#new
 edit_at_user GET    /at_user/:id/edit(.:format) at_user#edit
      at_user GET    /at_user/:id(.:format)      at_user#show
              PUT    /at_user/:id(.:format)      at_user#update
              DELETE /at_user/:id(.:format)      at_user#destroy
session_index POST   /session(.:format)          session#create
  new_session GET    /session/new(.:format)      session#new
      session DELETE /session/:id(.:format)      session#destroy
        login        /login(.:format)            session#new
       logout        /logout(.:format)           session#destroy
         root        /                           main#index 
```

的目标路径`button_to`是`session_index_path`，这应该会导致`create`方法`SessionController`被调用——有一段时间，它确实如此。现在，在我重新启动 Rails 后，按下按钮会产生一个错误页面，其中包含文本

```
No route matches [POST] "/session/new" 
```

出于某种原因，Rails 开始认为 的目标`button_to`是`session#new`而不是`session#create`. 就好像它认为它应该调用的 HTTP 方法是 GET 而不是 POST——但是，HTML 代码显示该方法是 post。

顺便说一句，我之前尝试过的另一件事是提供`button_to`动作和方法参数，如此[处](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)所述：

```
<%= button_to "Submit", options: {action: 'create', method: :post} %> 
```

那么这就是生成的：

```
<form action="/session/new?options%5Baction%5D=create&amp;options%5Bmethod%5D=post" class="button_to" method="post"> 
```

这看起来也不是我想要的。 `button_to`的默认 HTTP 方法是 POST，它出现在结果中，但`:options`散列只是添加到 URL 的末尾，并且该词`create`没有出现在其他任何地方。

[这个问题](https://stackoverflow.com/questions/9501452/rails-button-to-how-to-specify-the-controller)的第一个答案说，与文档所说的不同，不应将参数`button_to`放在散列中，而应直接提供。所以，我尝试了这个：

```
<%= button_to "Submit", action: 'create' %> 
```

但是，该操作`create`仍然没有显示在生成的 HTML 中：

```
<form action="/session" class="button_to" method="post"> 
```

所以，这些是我在尝试使用命名路径方法之前尝试过的事情，它工作了一分钟，但由于某种神秘的原因，现在不再有用了。

任何想法我做错了什么？（这可能是我忽略的显而易见的事情。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:45:41.647

`button_to`文档在一些地方实际上是错误的（请注意我的回答：为什么[这个 button_to 在 Rails 3.2.11 中呈现不正确？](https://stackoverflow.com/questions/14735591/why-is-this-button-to-rendering-incorrectly-in-rails-3-2-11)）。要修复该提交按钮，请使用以下命令：

```
<%= button_to "Submit", { action: 'create' }, method: :post %> 
```

和散列需要使用大括号定义明确的分隔符`options`，具体取决于您要完成的任务。`html_options``{}`

由于HTTP 方法被路由到该操作，因此该`create`操作不会显示在 URL中。`POST``/session``create`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:29:39.230

到目前为止，Cyle 在上面的评论中建议的方法似乎效果最好，即添加`url: session_index_path`到`simple_form_for`声明中：

```
<h2>Log in</h2>
<%= simple_form_for :session, url: session_index_path do |f| %>
  <%= f.input :username %>
  <%= f.input :password %>
  <%= button_to "Submit" %>
<% end %> 
```

单击此代码生成的“提交”按钮时，我还没有遇到路由错误。

不过，我不接受这个答案，因为我尚未解决的基本问题是 Rails 的反复无常。也就是说，之前可以运行的代码突然停止运行。例如，今天我首先尝试了这段代码：

```
<%= simple_form_for :session do |f| %>
  <%= f.input :username %>
  <%= f.input :password %>
  <%= button_to "Submit1" %>
  <%= button_to "Submit2", session_index_path %>
<% end %> 
```

按下“Submit2”按钮有效。但是，当我删除包含按钮“Submit1”的行，停止并重新启动 Rails 服务器（就像我每次尝试之间所做的那样）并重新加载页面时，按下 Submit2 按钮会产生“无路由”错误，甚至尽管按钮的 HTML 代码保持不变：

```
<form action="/session" class="button_to" method="post">
  <div>
    <input type="submit" value="Submit2" />
    <input name="authenticity_token" type="hidden" value="...this value was the same also..." />
  </div>
</form> 
```

非常令人费解。可能与我的设置细节有关，尽管它不是那么奇特。

**编辑时添加：**

当我查看由 Cyle 的方法生成的 HTML 的相关部分时，我注意到它与几乎所有其他情况相同：

```
<form accept-charset="UTF-8" action="/session" class="simple_form session" method="post" novalidate="novalidate">
  <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="&#x2713;" />
    <input name="authenticity_token" ... />
  </div>
  ...the username and password input fields...
  <form action="/session" class="button_to" method="post">
  <div>
    <input type="submit" value="Submit" />
    <input name="authenticity_token" type="hidden" value="voOGIAbJfwvjxVRbk02V5l6zn6iwvOiMvaeauPBIrqU=" />
  </div>
</form> 
```

所以到目前为止这对我有用可能只是运气。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:02:35.060

问题很可能是在创建应用程序后，我决定更改几个类和相关文件的名称。这导致类名和文件名不符合 Rails 在某些情况下名词复数形式的约定。例如，我有一个文件`session_controller.rb`，其中包含一个名为`SessionController`;的类。正确的名称是`sessions_controller.rb`和`SessionsController`。

我创建了一个虚拟 Rails 应用程序，然后命令`rails generate scaffold AtUser`and `rails generate scaffold Session`，然后使用生成的文件名和标识符作为更正实际应用程序的指南。现在，我不再收到那些“无路线”错误了。命令`rake routes`输出：

```
 at_users GET    /at_users(.:format)          at_users#index
             POST   /at_users(.:format)          at_users#create
 new_at_user GET    /at_users/new(.:format)      at_users#new
edit_at_user GET    /at_users/:id/edit(.:format) at_users#edit
     at_user GET    /at_users/:id(.:format)      at_users#show
             PUT    /at_users/:id(.:format)      at_users#update
             DELETE /at_users/:id(.:format)      at_users#destroy
    sessions POST   /sessions(.:format)          sessions#create
 new_session GET    /sessions/new(.:format)      sessions#new
     session DELETE /sessions/:id(.:format)      sessions#destroy
       login        /login(.:format)             sessions#new
      logout        /logout(.:format)            sessions#destroy
        root        /                            main#index 
```

在此之前，当我在另一个文件中包含一个文件而没有`require`d 前者位于后者的顶部时，我也看到了“无路由”错误。执行重命名修复后，我尝试重现此错误，但它确实再次发生：Rails 错误地报告丢失的路线，而实际问题是缺少`require`语句。这表明 Rails 的错误报告机制存在缺陷。

感谢用户牛蛙为我指明了正确的方向。

# python - 在python中获得y轴值

> ID：14776094
> 
> 赞同：0
> 
> 时间：2013-02-08T15:38:51.147
> 
> 标签：python, matplotlib

我绘制了一个图形：

```
fig=plt.figure()
ax=fig.add_subplot(111)
ax.plot(date,tso1.values) 
```

如何获得图形的 y 轴最大值和最小值？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:22:08.453

如果“增益”是指得到，答案是`ax.get_ylim()`。

一个建议：我使用 ipython 来检查对象并`help()`了解这些方法的作用。最重要的是，matplotlib 方法名称往往非常准确。你可以学到很多关于使用 ipython 和 tab 补全可以做什么的知识

# php - Zend 框架会话丢失

> ID：14776097
> 
> 赞同：0
> 
> 时间：2013-02-08T15:38:58.133
> 
> 标签：php, zend-framework, session

我有一个注册表单，当用户注册时，它会将他重定向到他的页面。在 Firefox 和 chrome 中一切正常，但在 Internet Explorer 中。看起来用户信息保存后，会话关闭并且不会将用户重定向到他的页面。

如何在 IE 上解决此问题？

```
$user = $this->_helper->model('Users')->createRow($signupForm->getValues());   
        if ($user->save())
        {               
            Zend_Session::rememberMe(186400 * 14);
            Zend_Auth::getInstance()->getStorage()->write($user);
            $user->sendSignUpEmail();
            $this->getHelper('redirector')->gotoRoute(array(), 'invite');
            return;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:06:32.443

我在重定向之前在 IE 上的 iframe 中创建会话时遇到了类似的问题，这对我有用：尝试放入 Zend Action：

```
$response = $this->getResponse();
$response->setHeader('P3P', 'CP="CAO PSA OUR"', true); 
```

请参阅[什么是 header('P3P: CP="CAO PSA OUR"'); 做？](https://stackoverflow.com/questions/5257983/what-is-headerp3p-cp-cao-psa-our)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:35:35.447

您似乎一直在发布同一问题的变体。您的代码中没有任何内容应该在不同的浏览器上以不同的方式工作。您需要对此进行调试以查看 IE 的进展情况，这将帮助您确定问题的根本原因。

所以，做一些调试来尝试回答这些问题：

*   `$user->save()`返回是真的吗？（即 IE 是否进入 if 语句）
*   如果它确实进入了 if，那么里面是什么`$user`？`var_dump($user);exit;`在 if 里面试试看你会得到什么
*   `$user->sendSignUpEmail();`会被调用吗？
*   如果它到达重定向部分，将发送哪些标头？（您应该能够使用 IE 的开发人员工具检查这一点）

如果您在另一台机器上的 IE 中进行测试，而不是使用正在运行的浏览器的机器，还要检查系统时钟，因为不正确的日期/时间可能会导致会话立即过期。

# facebook - 当我们将链接粘贴到我们博客中的帖子时，图片/缩略图错误

> ID：14776100
> 
> 赞同：0
> 
> 时间：2013-02-08T15:39:02.410
> 
> 标签：facebook, hyperlink, thumbnails, facebook-opengraph, image

我们运营博客 Tracasseur [http://www.tracasseur.com](http://www.tracasseur.com)并做了 4 年。我们在 Blogger 上有博客。[当我们在我们的 Facebook 页面https://www.facebook.com/tracasseur](https://www.facebook.com/tracasseur)上发布我们最新帖子的链接时，总是会选择帖子中的正确图片。但突然有一天它停止了工作。现在 Facebook 只让我们有机会在未包含在帖子中的 2 张图片之间进行选择，但它们在右侧栏中的博客上。我们如何解决这个问题？为什么突然出现这个问题，我们什么都没改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:47:20.543

您需要指定要在博客的 HTML 元标记中使用的图像，请参阅[http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

编辑：看起来你的博客是由博主处理的，这里有更具体的说明：http: [//www.bloggerhow.com/2012/07/implement-open-graph-in-blogger-blogs.html](http://www.bloggerhow.com/2012/07/implement-open-graph-in-blogger-blogs.html)

# ruby-on-rails - Rails - 参数数量错误（0..1 为 2）错误

> ID：14776102
> 
> 赞同：1
> 
> 时间：2013-02-08T15:39:16.780
> 
> 标签：ruby-on-rails, ruby, oop

我正在处理的应用程序中的一些代码有问题。
使用以下代码：

```
@herbivores=Deer.find(:all,:conditions =>['state like?', '%' + params[:number]+'%'])
@herbi=@herbivores.find(:all,:conditions =>['city like?', '%bad%']) 
```

我收到错误：

```
wrong number of arguments (2 for 0..1) 
```

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:43:31.900

使用查询 API 来保持正确的范围，并且因为是可链接的，所以也更干净`where`：

```
@herbivores=Deer.where('state like ?', '%' + params[:number]+'%')
@herbi=@herbivores.where('city like ?', '%bad%') 
```

您也可以在没有中间变量的情况下直接链接它们：

```
@herbi = Deer.where('state like ?', "%#{params[:number]}%").where('city like ?', "%bad%") 
```

或者您可以将其合并到一个方法调用中：

```
@herbi = Deer.where('state like ? AND city like ?', "%#{params[:number]}%", "%bad%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:40:08.420

我相信正在发生的事情是您将`@herbivores`其视为可以找到的模型，但它是鹿记录数组，因此不是模型。

编辑： Purhaps 你想要：

```
@herbivores=Deer.find(:all,:conditions =>['state like ?', "%#{params[:number]}%"])
@herbivores.each do |herbi|
  if herbi.city == 'bad'
    puts "bad city in state #{ani.state}"
  end
end 
```

# c# - 使用程序后删除文件夹

> ID：14776105
> 
> 赞同：1
> 
> 时间：2013-02-08T15:39:22.020
> 
> 标签：c#

我创建了一个对话框程序，当我为一个文件夹的任何图片创建图片框时，当我关闭此对话框时，我想删除图片框，但是，我收到一个异常，这个异常告诉我：文件0.jpg 被另一个进程使用

但是，所以，我试图处理掉所有的图片框......当然，据我所知，我已经尝试了所有可能的事情......

所以，我的示例代码是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace delFolder
{
    public partial class FormPictureView : Form
    {
        private PictureBox pbSel = null;

        public FormPictureView()
        {
            InitializeComponent();

            AddPictureBox();
        }

        private void AddPictureBox()
        {
            int linha = 0;
            int x = 10, y = 10;
            string pngOutputPath = @"images\";

            string[] files = Directory.GetFiles(pngOutputPath);
            for (int i = 0; i < files.Length; i++)
            {
                if (linha == 2)
                {
                    x = 10;
                    y += 360;
                    linha = 0;
                }
                PictureBox pb = new PictureBox();
                pb.Name = string.Format("pb{0}", i);
                pb.Size = new Size(236, 321);
                pb.SizeMode = PictureBoxSizeMode.Zoom;
                pb.Image = Image.FromFile(string.Format("{0}{1}.jpg", pngOutputPath, i));
                pb.BackColor = Color.White;
                pb.Click += new EventHandler(pb_Click);
                pb.Tag = string.Format("{0}{1}.jpg", pngOutputPath, i);
                pb.Location = new System.Drawing.Point(x, y);
                panel1.Controls.Add(pb);
                x += 280;
                linha++;
            }
        }

        private void pb_Click(object sender, EventArgs e)
        {
            if (pbSel != null)
                pbSel.BorderStyle = BorderStyle.None;
            PictureBox pb = (PictureBox)sender;
            pb.BorderStyle = BorderStyle.FixedSingle;
            pbSel = pb;
            MessageBox.Show(pb.Tag.ToString());
        }
    }
} 
```

并且，此对话框是主窗体的 MDIParent ...，并且，当我关闭此对话框时，我尝试删除图片框，但是，这是不可能的 :( 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:40:26.687

您需要`Dispose()`在`Image`PictureBox 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:54:49.783

如果您设置 ImageLocation 属性而不是 Image 属性，则不会获得对文件的锁定，并且您将能够删除该文件。但是，该图像将不再可用于 PictureBox，并且将显示“无图像”图标。

要解决此问题，您可以在删除之前将图像复制到内存中：

```
string imgPath = string.Format("{0}{1}.jpg", pngOutputPath, i);
// Retrieve image from file
Image img = Image.FromFile(imgPath);
// Create new canvas to paint the picture in
Bitmap tempImg = new Bitmap(img.Width, img.Height);
// Paint image in memory
using (Graphics g = Graphics.FromImage(tempImg))
{
   g.DrawImage(img, 0, 0);
}
// Assign image to PictureBox
pb.Image = tempImg;
// Dispose original image and free handles
img.Dispose();
// Delete the original file
File.Delete(imgPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:42:28.843

在删除图像之前设置`yourPictureBox.image`为`null`

# kendo-ui - 从文本框中删除 NumericTextBox 小部件

> ID：14776111
> 
> 赞同：1
> 
> 时间：2013-02-08T15:39:38.120
> 
> 标签：kendo-ui, kendonumerictextbox

我找到了一些答案来解释如何从这里的文本框中删除 Kendo UI kendoDatePicker 小部件http://www.kendoui.c​​om/forums/ui/general-discussions/method-for-removing-controls.aspx和这里[http](http://www.kendoui.com/forums/ui/general-discussions/method-for-removing-controls.aspx) [： //www.kendoui.c​​om//forums/ui/date-time-pickers/datepicker-becomes-static.aspx](http://www.kendoui.com//forums/ui/date-time-pickers/datepicker-becomes-static.aspx)

不幸的是，当我尝试删除 NumericTextBox 的属性时，上述示例似乎没有帮助。我最终得到了下面的来源。

```
var numericTextBox = $(selector).data("kendoNumericTextBox");
    var element = numericTextBox.wrapper[0] ? numericTextBox.wrapper
            : numericTextBox.element;

    // unwrap element
    var input = numericTextBox.element.show();
    input.removeClass("k-input").css("width", "12.4em");
    input.removeClass("numerictextbox");
    input.insertBefore(numericTextBox.wrapper);

    numericTextBox.wrapper.remove();

    input.removeAttr("data-role");
    input.removeAttr("role"); 
```

我最终得到了一个看起来像一个简单文本框的文本框，但除了数字之外，我仍然不允许添加任何其他内容。此外，我还尝试添加行 input.removeData("kendoNumericTextBox"); 这与我在上面发布的链接上的建议很接近，但我无法确定这条线的作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:55:53.717

而不是玩从文本到数字转换的小部件装饰，反之亦然，两者兼而有之要容易得多，并且总是隐藏其中一个。您只需要添加一个类/删除一个类并让正确的类可见。

假设我有以下 CSS 定义：

```
.ob-hide {
    display: none;
} 
```

以下 HTML：

```
<div id="combobox"></div>
<div id="number"></div>
<div id="text"></div> 
```

那么我的 JavaScript 将是：

```
$("#combobox").kendoDropDownList({
    dataSource: {
        data: [ "string", "number" ]
    },
    value     : "string",
    change    : function (e) {
        console.log("change");
        if (this.value() === "string") {
            console.log("string");
            $("#number").closest(".k-numerictextbox").addClass("ob-hide");
            $("#text").closest(".k-autocomplete").removeClass("ob-hide");
        } else {
            console.log("number");
            $("#number").closest(".k-numerictextbox").removeClass("ob-hide");
            $("#text").closest(".k-autocomplete").addClass("ob-hide");
        }
    }
});
$("#number").addClass("ob-hide").kendoNumericTextBox({});
$("#text").kendoAutoComplete({}); 
```

# mysql - 外键引用自己的表？

> ID：14776114
> 
> 赞同：2
> 
> 时间：2013-02-08T15:40:06.607
> 
> 标签：mysql, sql, database

任何人都可以解释为什么以下在 MySql 上不起作用（当前给出语法错误）：

```
create table manager
(
    employee_name varchar(20) not null,
    manager_name varchar(20) not null, 
    primary key employee_name, 
    foreign key (manager_name) references manager 
    on delete cascade
) 
```

另外，假设它确实有效，当关系管理器中的元组被删除时会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:40:51.593

语法是，

```
create table manager 
( 
    employee_name varchar(20) not null, 
    manager_name varchar(20) null, 
    CONSTRAINT tb_pk primary key (employee_name), 
    CONSTRAINT tb_fk foreign key (manager_name) 
          references manager (employee_name) on delete cascade 
) 
```

**问题：**假设它确实有效，当关系管理器中的元组被删除时会发生什么？

**回答：**所有子条目也将被删除。

# javascript - bootstrap typeahead 的自定义敲除处理程序不适用于 Firefox 5

> ID：14776115
> 
> 赞同：0
> 
> 时间：2013-02-08T15:40:07.733
> 
> 标签：javascript, jquery, knockout.js, bootstrap-typeahead

我有下一个问题：我正在使用引导程序和淘汰赛，并且我有一个用于打字头的自定义方法：

```
 ko.bindingHandlers.typeahead = {
update : function(element, valueAccessor, allBindingsAccessor) {
    $(element).typeahead({
        source : typeaheadSource[$(element).attr('id')]
    });
    var span = $(element.parentElement).children("span");
    if (span.length > 0) {
        span[0].onclick = function() {
            var t = typeaheadByElementId[$(element).attr('id')];
            if (t.shown == false) {
                hideAllTypeaheads();
                t.showAll();
            } else {
                t.hide();
            }
        };
    }
}
}; 
```

typeheadSource 数组的一部分

```
var typeaheadSource = [];
...
typeaheadSource['buildingWalls'] = [ 'blah', 'ablah', 'cblah-blah'];
... 
```

以及用于预先输入的 html 代码：

```
 <div class='control-group'><label class='control-label' for='buildingWalls'>Материал наружных стен</label>
            <div class='input-append'>
                <input type='text' class='input-xlarge' id='buildingWalls' data-bind='value:buildingWalls, typeahead: true'> <span class="add-on"><i class="icon-chevron-down"></i></span>
            </div>
 </div> 
```

它在 Firefox 18 和 chrome 上都可以正常工作，但在 Firefox 5 上不起作用（例如）。关于我想得到的：点击跨度后，所有提示都应该显示给你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:02:12.820

```
-       var span = $(element.parentElement).children("span");
-       if (span.length > 0) {
-           span[0].onclick = function() {

+       var span = element.nextElementSibling;
+       if (span) {
+           span.onclick = function() { 
```

$(element.parentElement).children("span") 在 Firefox 5 中返回空数组，所以我用新的替换了这 3 行。

# sql - 值为 0 时将 nvarchar 转换为数据类型 numeric 的算术溢出错误

> ID：14776126
> 
> 赞同：0
> 
> 时间：2013-02-08T15:40:38.153
> 
> 标签：sql, sql-server-2005, overflow

我有以下查询返回结果为 Null 或零：

```
SELECT TOP 1 ISNULL([jul-12],0) FROM Table_tmp 
WHERE ID = 123250838 
```

但是当我添加一个询问列值是否为零的条件时会导致溢出错误：

```
SELECT TOP 1 ISNULL([jul-12],0) FROM Table_tmp 
WHERE ID = 123250838
AND [jul-12] <> 0 
```

该列的数据类型为 FLOAT

```
exec sp_help 'Table_tmp'
jun-12  float   no  8   53      NULL    yes (n/a)   (n/a)   NULL 
```

我尝试了函数 CONVERT () 和 CAST () 但结果相同。

但是当 [Jul-12] 列的值不为零时，它可以正常工作。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:00:30.253

Try like below... may be it will help you...

```
SELECT TOP 1 ISNULL([jul-12],0) FROM Table_tmp 
WHERE  Str([jul-12], 25, 5) <> '0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:08:21.713

这是因为 CAST () 规范。结果数据类型将与第二个参数中的一样。为避免这种情况，您可以使用通过第一个参数确定结果数据类型的 COALESCE 函数，此函数的另一个好处是它是 ANSI 标准（而不是 ISNULL）。您可以在此处查找此功能： [COALESCE MSDN](http://msdn.microsoft.com/ru-ru/library/ms190349.aspx) 在您的情况下的用法是：`COALESCE(jul-12],0)`- 这将首先返回非空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T16:10:55.157

我刚刚遇到了这个问题，并通过在我使用 cast() 的列上的“WHERE”中添加一个“IS NOT NULL”子句来解决它

# python - 使用整数作为分隔符拆分字符串

> ID：14776127
> 
> 赞同：3
> 
> 时间：2013-02-08T15:40:38.177
> 
> 标签：python, regex

我有一个相当长的 txt 文件，其中填充了格式字符串`{letter}{number}{letter}`。例如，我的文件的前几行是：

```
A123E
G234W
R3L
H4562T 
```

我很难找到正确的`regex`模式来按字母和数字分隔每一行。

例如，在第一行中，我想要一个包含结果的数组：

```
print first_line[0] // A
print first_line[1] // 123
ptin first_line[2] // E 
```

这似乎`regex`是要走的路，但我还是个`regex`新手。有人可以帮我指出如何做到这一点的正确方向吗？

然后我计划遍历每一行并根据需要使用信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T15:41:14.030

拆分`\d+`：

```
import re
re.split(r'(\d+)', line) 
```

`\d`是匹配数字 0 到 9 的字符类，我们希望至少匹配其中的 1 个。通过在 , 周围放置一个捕获组`\d+`，[`re.split()`将在输出中包含匹配项](http://docs.python.org/2/library/re.html#re.split)：

> 如果在*pattern*中使用了捕获括号，那么 pattern 中所有组的文本也会作为结果列表的一部分返回。

演示：

```
>>> import re
>>> re.split(r'(\d+)', 'A123E')
['A', '123', 'E'] 
```

# jquery - 获取 div 的高度并将其应用于 div 内的元素

> ID：14776128
> 
> 赞同：2
> 
> 时间：2013-02-08T15:40:38.750
> 
> 标签：jquery, height, each

这似乎应该很容易，我已经阅读了很多文档，但似乎找不到答案。

我有一些嵌套的 div，我想获取页面上每个 div 的高度并将其应用到另一个作为子元素的 div 中。

我需要获取每个期刊图像容器并将其应用于每个期刊图像标题。页面上有多个 this 实例，因此最好使用 each() 语句。

这是我的 HTML

```
<div class="each-journal-image-container clearfix">
    <div class="four columns">
      <div class="each-journal-image delay-1 animated fadeInLeftBig"></div>
      <div class="each-journal-image delay-1 animated fadeInLeftBig"></div>
      <div class="each-journal-image delay-1 animated fadeInLeftBig"></div>
      <div class="each-journal-image delay-1 animated fadeInLeftBig"></div>
      <div class="each-journal-image delay-1 animated fadeInLeftBig"></div>
    </div>
    <div class="two columns">
      <div class="each-journal-image-caption delay-2 animated fadeInLeftBig"></div>
    </div>
</div> 
```

干杯，R

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:43:57.553

我能想到的最短解决方案：

```
$('.each-journal-image-container').each(function() {
    var h = $(this).height();
    $(this).find('.each-journal-image-caption').height(h);
}); 
```

当然，你可以像这样组合这些行，但如果你有 1000 个 div，它的效率应该会降低。如果少于一百个，则差异可以忽略不计：

```
 $(this).find('.each-journal-image-caption').height($(this).height()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:42:15.560

使用[height()](http://api.jquery.com/height/)属性。它可以同时用于：获取高度和设置元素的高度。

```
$('.each-journal-image-container .four').height( $('.each-journal-image-container .two').height() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:43:42.200

你会这样做：

```
$('.each-journal-image-container').each(function(i,item){
    var height = $(item).height();
    $(this).find('.each-journal-image-caption').height(height);
}); 
```

# asp.net - 给自己分配一个对象是个好主意吗？

> ID：14776130
> 
> 赞同：0
> 
> 时间：2013-02-08T15:40:46.943
> 
> 标签：asp.net, vb.net, garbage-collection

我有两个类，RecordSet 和 Record。RecordSet 有一个通用列表（记录）。

我可以通过调用我的 RecordSet.AddRecord(ObjRecord) 函数将对象添加到列表中，该函数返回 RecordSet。当列表计数为 200 时，进行一些处理并返回一个新的 RecordSet 对象，否则返回自身，应用程序可以继续将 Record 对象添加到列表中。

我担心的是在垃圾收集完成之前会有 200 个 RecordSet 对象。这是一个好主意吗？

```
Public Class RecordSet
  Private lstRecords As New List(Of Record)

  Public Function AddRecord(SomeVariable) AS RecordSet      
    lstRecords.Add(New Record())
    If lstRecords.Count = 200 Then
      Me.ProcessTheRecords()
      Return New RecordSet()
    Else
      Return Me
    End If
  End Function

  Private Sub ProcessTheRecords()
    'Do stuff in here
  End Sub

  Private Class Record
    Public Sub New()

    End Sub
  End Class
End Class 
```

然后在我的应用程序中，我调用：

```
Dim objRecordSet AS New RecordSet
For Each VariableName In SomeList
  objRecordSet = objRecordSet.AddRecord(VariableName)
Next
'Process the remaining objects in objRecordSet here. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:52:25.750

首先，这是非常糟糕的做法，新人很难遵循代码并且是潜在的错误来源。与其每次都返回自己，不如改变你的设计。

将您的功能更改为：

```
Public Sub AddRecord(SomeVariable)
    lstRecords.Add(New Record()) <--- should't you be doing something with SomeVariable?!
    If lstRecords.Count = 200 Then
        Me.ProcessTheRecords()
    end if
End Function

Private Sub ProcessTheRecords()
   'Do stuff in here
   Me.lstRecords.clear()
End Sub 
```

现在 AddRecord 完全按照它所说的去做——它添加了一条新记录并修改了记录集。ProcessTheRecords 按照它应该做的那样进行处理，如果您需要清除列表容器 - 哦，好吧，只需清除它。

我强烈建议阅读这篇关于 [Cohesion](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)的 wiki 文章。

就像一个提议一样，AddRecord 可以是一个返回类型的函数`Boolean`，它表示操作成功（也许处理函数会引发错误或异常？）。

现在干净多了，不是吗？

# plugins - 通过嵌入标签使用 VLC Web 插件时缺少 Asp.Net 会话

> ID：14776153
> 
> 赞同：1
> 
> 时间：2013-02-08T15:41:52.860
> 
> 标签：plugins, embed, vlc, asp.net-session

我在 C# Asp.Net 中创建了一个类，`IHttpHandler`用于处理一些特殊请求，以便以流的形式获取视频，从 MS SQL Server 2008 数据库中检索。从前端，我使用 VLC Player 的 Web 插件使用如下嵌入标签请求这些视频流：

```
<embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org"
 width="840" height="472" name="vlcPlayerExtraFeatures"
 id="vlcPlayerExtraFeatures" target="http://my-pc/MyWebApp/file.ivd?VideoID=123"
 autoplay="true" windowless="true" bgcolor="#000000" />
   <object classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"
   codebase="http://download.videolan.org/pub/videolan/vlc/last/win32/axvlc.cab">
   </object> 
```

在*ProcessRequest(HttpContext context)*方法中的 IHttpHandler 类中，首先我从“context”参数检查用户的 Asp.Net 会话，如下所示：

```
if (context.Session["LoggedinUser"] == null) {
    //do bla bla bla
} 
```

问题是：使用 VLC 播放器网络插件，`context.Session["LoggedinUser"]`总是以`null`. 如果我使用 Windows 媒体播放器 Web 插件请求相同的文件，我会得到提到的会话信息，但不会使用 VLC。

如果这是 VLC 媒体播放器的某种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:43:40.267

根据我的发现，使用 VLC Web 插件，您无法访问服务器上的 Asp.Net 会话。我已经做了另一个解决方法。在包含 VLC 嵌入标签的页面后面的代码中。页面加载时，VLC embed 标记的 URL 参数值会附加一个绕过令牌，格式如下：

```
<OBJECT id="vlc" width="840" height="472" 
CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" type="application/x-oleobject">
<PARAM NAME="URL" VALUE="http://mysite.com/video.ivd?videoId=myvideo1234&videoToken=some_token_with_expiry_date" />
<PARAM NAME="SendPlayStateChangeEvents" VALUE="True" />
<PARAM NAME="AutoStart" VALUE="True" />
<PARAM NAME="ShowControls" value="True" />
</OBJECT> 
```

注意：此 Url 中的查询字符串部分在此处显示为未加密，但在实际页面上它是加密的（实际上在 page_load 方法中完成）。

当 VLC 从我的自定义 IHttp 处理程序请求视频时，查询字符串部分在处理程序中被解密，并且从提供的视频令牌的到期日期评估令牌的有效性。如果它仍然有效，则将视频流式传输到客户端，否则请求将被拒绝，因此客户端可能会无限期地使用此 Url。

好吧，这是一种适用于我的情况的解决方法。可能是其他人有比这更好的方法。

# c++ - 调用 Operator() “函数调用”以返回对数组元素的引用

> ID：14776156
> 
> 赞同：1
> 
> 时间：2013-02-08T15:41:58.850
> 
> 标签：c++, functor

我想我并不真正了解引用背后的内容，我很乐意了解更多关于这些的信息。

我正在编写一个数学“向量”类来为数值模拟做基本的线性代数。在我确信不再使用外部库之前，我一直在使用 Eigen。我的问题很简单：

*   我声明了向量并设置了它的 3 个类型的组件`Scalar`（这些是双精度的）。当我重载运算符时，我可以用我的向量做数学运算，但这超出了我的问题范围。
*   我想通过与 Eigen 一起使用的函数调用运算符 () 访问对象的第 i 个组件：`myVector(0) = 0.0 ;`或`Scalar d = myVector(0)+1.0 ;`

根据我对参考资料的理解，这个解决方案应该有效：

```
class mtnVector {
public:
    typedef double Scalar;
    Scalar  data [3];
    (setters, math, etc...)
    inline Scalar & operator() (const int i) const {
        return data[i] ; 
    }
}; 
```

但是 g++ 说它不喜欢我实现它的方式，并在引用处确认我 s***： `Vector.h:185: error: invalid initialization of reference of type ?double&? from expression of type ?const double?`

从我的角度来看，非常奇怪的是，如果包含数据的数组`Scalar * data`在类构造时被动态设置（）（使用 new 运算符），则代码编译得很好。但我没有看到动态设置数据持有者的意义。

我不需要 const 来重载函数调用运算符，但我接受它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:45:55.453

你`operator()`的被宣布`const`。这意味着调用函数不应该最终修改对象。该函数通过非引用返回该对象的一个​​成员`const`，这将允许调用`operator()`者修改该对象的内部。显然这很愚蠢，所以编译器不允许这样做。如果要从`const`成员函数返回对成员的引用，则需要进行该引用`const`：

```
inline const Scalar& operator() (const int i) const {
    return data[i] ; 
} 
```

您可能希望同时提供函数的 a`const`和非`const`版本，其中一个返回 a `const Scalar&`，另一个返回 a `Scalar&`（这是[标准库容器的做法](http://en.cppreference.com/w/cpp/container/vector/operator_at)）。

你想用`operator()`这个似乎很奇怪。你的表达式`myVector(0)`看起来更自然`myVector[0]`，你可以通过重载`operator[]`来实现。

此外，您应该忽略那些说服您不应该使用外部库的人。特别是 Eigen 是一个非常成熟且经过全面测试的库。除非你真的有充分的理由，否则你应该使用它。

# ios - 获取的属性适用于 iOS5 但不适用于 iOS6

> ID：14776157
> 
> 赞同：5
> 
> 时间：2013-02-08T15:42:06.543
> 
> 标签：ios, ios5, core-data, ios6, ios6.1

我的 CoreData 数据库中有一个严重的问题。我在 2 个表之间创建了一对多关系，并在包含所有唯一值的表上添加了一个 Fetched 属性。所有代码在 iOS 5 中都按预期工作，但在 iOS 6 中我收到以下错误：

> 2013-02-08 15:15:49.382 ArdsBoroughCouncil [16152:c07] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<_NSObjectID_48_0 0xb25c3b0> valueForUndefinedKey:]：此类不符合键值编码关键tour_id。***First throw call stack: (0x31c7012 0x24a3e7e 0x324ffb1 0x1c445ed 0x1bb08db 0x1bb088d 0x1bceb17 0x1bfe746 0x21b74bb 0x21b7176 0x21b6e44 0x21b66f4 0x21b2d63 0x21b2a82 0x21b2850 0x21b2625 0x21b1e07 0x21b18f4 0x21b0a6d 0x21ae9c9 0x2201276 0x227b155 0x2201071 0x2880014 0x286fd5f 0x286faa3 0x220103b 0x2200e9e 0x21ae9c9 0x2209dfa 0x22375cf 0x2237a03 0x59de1 0x11c2753 0x11c2a7b 0x11d0590 0x11d85bd 0x11d8eab 0x11d94a3 0x11d9098 0x1534da3 0x1526ad9 0x1526b54 0x24b7705 0x10e2920 0x10e28b8 0x11a3671 0x11a3bcf 0x11a2d38 0x111233f 0x1112552 0x10f03aa 0x10e1cf8 0x34b3df9 0x34b3ad0 0x313cbf5 0x313c962 0x316dbb6 0x316cf44 0x316ce1b 0x34b27e3 0x34b2668 0x10df65c 0x291d 0x2845) libc++abi.dylib: terminate called throwing an exception

为 Fetched 属性定义的谓词是：

> ($FETCH_SOURCE.tour_id == tour_id) AND ($FETCH_SOURCE != SELF)

我已经定义了数组以返回所有接收我的 Tour 类中的所有值。

您是否知道 iOS 6 中 Fetched Properties 的任何问题？因为我无法理解这在 iOS 5 中没有问题，但在 iOS6 中失败。

请参阅下面的所有其他相关代码：

下面的代码是我如何检索所有记录：

```
- (void)loadRecordsFromCoreData {
    [self.managedObjectContext performBlockAndWait:^{
        [self.managedObjectContext reset];
        NSError *error = nil;
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        NSEntityDescription *entityDescription = [NSEntityDescription entityForName:NSStringFromClass([Tour class]) inManagedObjectContext:self.managedObjectContext];
        [request setEntity:entityDescription];
        [request setResultType:NSManagedObjectResultType];
        [request setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"tour_id" ascending:YES]]];
        self.tours = [self.managedObjectContext executeFetchRequest:request error:&error];
    }]; 
```

下面的代码适用于我定义的 NSManagedObjects：

- 旅游

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class TourDetail;

@interface Tour : NSManagedObject

@property (nonatomic, retain) NSNumber * tour_id;
@property (nonatomic, retain) NSString * background_url;
@property (nonatomic, retain) NSString * summary;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSSet *tourdetails_tour;

@property (nonatomic, retain) NSArray *tourDetails;
@end

@interface Tour (CoreDataGeneratedAccessors)

- (void)addTourdetails_tourObject:(TourDetail *)value;
- (void)removeTourdetails_tourObject:(TourDetail *)value;
- (void)addTourdetails_tour:(NSSet *)values;
- (void)removeTourdetails_tour:(NSSet *)values;

@end
}
#import "Tour.h"
#import "TourDetail.h"

@implementation Tour

@dynamic tour_id;
@dynamic background_url;
@dynamic summary;
@dynamic title;
@dynamic tourdetails_tour;
@dynamic tourDetails;

@end 
```

-- 旅游详情

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Tour;

@interface TourDetail : NSManagedObject

@property (nonatomic, retain) NSNumber * id;
@property (nonatomic, retain) NSNumber * tour_id;
@property (nonatomic, retain) NSNumber * lattitude;
@property (nonatomic, retain) NSNumber * longitude;
@property (nonatomic, retain) NSString * audiofile;
@property (nonatomic, retain) NSString * detail;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) Tour *tour_tourdetails;

@end

#import "TourDetail.h"
#import "Tour.h"

@implementation TourDetail

@dynamic id;
@dynamic tour_id;
@dynamic lattitude;
@dynamic longitude;
@dynamic audiofile;
@dynamic detail;
@dynamic title;
@dynamic tour_tourdetails;

@end 
```

您可以提供的任何建议将不胜感激:) 以及您可能拥有的关于如何最好地定义获取的属性的任何示例？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T19:33:48.823

您在这里使用的代码不干净

```
- (void)loadRecordsFromCoreData {
    [self.managedObjectContext performBlockAndWait:^{
        [self.managedObjectContext reset];
        NSError *error = nil;
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        NSEntityDescription *entityDescription = [NSEntityDescription entityForName:NSStringFromClass([Tour class]) inManagedObjectContext:self.managedObjectContext];
        [request setEntity:entityDescription];
        [request setResultType:NSManagedObjectResultType];
        [request setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"tour_id" ascending:YES]]];
        self.tours = [self.managedObjectContext executeFetchRequest:request error:&error];
    }]; 
```

事实上，这有点令人困惑。

您调用一个方法，该方法调用一个托管对象上下文，该上下文进一步在一个同步块内调用自身，该同步块无缘无故地重置自身，从而在块外设置一个属性“self.tours”。都很奇怪。你能解释一下你为什么这样做吗？

试试这个。

```
+(void)loadRecordsWithCompletion:(void(^)(NSArray *records, NSError *error))completion {
    NSManagedObjectContext *context; //Your context
    NSError *error;
    NSSortDescriptor *sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"attribute" ascending:YES];
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"EntityName"];
    [request setSortDescriptors:@[sortDesc]];
    NSArray *records = [context executeFetchRequest:request
                                              error:&error];
    completion(records, error);
} 
```

# c# - 使用 DbContext 在一个文件中生成 POCO 类

> ID：14776161
> 
> 赞同：4
> 
> 时间：2013-02-08T15:42:12.287
> 
> 标签：c#, .net, entity-framework-5

到目前为止，我对 EF 的唯一体验是一个旧版 EF4.0 项目，其中 POCO 类都在一个 CS 文件中生成。这允许将部分类添加到与 EDMX、tt 等文件相同的文件夹中。

我刚刚使用 DbContext 从 EF5 生成了新的 POCO 类，我注意到每个类都在它自己的文件中。

我深入研究了 TT 文件，我明白它为什么这样做：

```
foreach (var entity in typeMapper.GetItemsToGenerate<EntityType>(itemCollection))
{
    fileManager.StartNewFile(entity.Name + ".cs");
... 
```

是否有可以修改的设置，以便在一个文件中生成这些 POCO 类，或者我是否必须修改 TT 文件才能执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:21:06.443

您必须删除对 StartNewFile 的调用，但为什么要删除呢？是否需要将它放在一个文件中，因为要使部分类正常工作，唯一重要的是名称空间相同并且两个类定义都在同一个程序集中。文件夹结构无关紧要。

# jquery - Drupal：jquery 和面板页面问题

> ID：14776164
> 
> 赞同：0
> 
> 时间：2013-02-08T15:42:17.743
> 
> 标签：jquery, drupal-7, drupal-panels

我到底做了什么？

有人能告诉我我的网站发生了什么吗？我正在重新学习drupal、css和jquery——同时做所有的事情可能不是最好的主意，但我现在被困住了。

**这是我的测试：`http://surety.lfwebz.com/`** 单击**home3**选项卡滚动到页面底部

我正在使用面板，因此主页是面板页面，幻灯片位于迷你面板中，滚动条位于另一个迷你面板中，滚动条下方的文本位于另一个迷你面板中，并且所有内容都已放置在面板页面中。

**单击**项目符号文本“**什么是补充保险？** ”并注意滚动条文本背景颜色如何变化 - 唯一应该改变的是文本和右侧段落的背景颜色

**单击**项目符号文本“**我真的需要补充保险吗？** ” 现在注意整个页面如何变化，幻灯片，滚动条 - 唯一应该改变的是文本和右侧段落的背景颜色

简而言之[代码片段]jquery对所有项目符号的作用-单击列表项，更改列表项的背景颜色，背景颜色对应段落，重置先前选择的bkgd颜色

```
jQuery(document).ready(function(){
holdLinks1 = 'li:contains("What is Supplemental Insur")';

 jQuery(holdLinks1)
            .click(function(){
                jQuery(this).css('background-color', '#C2C2C2');
                jQuery('.views-row-first').show().css('background-color', '#C2C2C2');
                jQuery('li:contains("Do I really need")').css('background-color', '#e4e4e4');
                jQuery('li:contains("What happens when I have")').css('background-color', '#e4e4e4');
                jQuery('li:contains("How do I get supple")').css('background-color', '#e4e4e4');
                jQuery('.views-row-2, .views-row-3, .views-row-4').hide();
            });
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:10:11.790

一旦我点击“发布”按钮，它就会看到它——对于那些正在学习的人——我的问题是，我正在引用一个也在我页面中的各种其他 DOM 对象中的类。

例如，当我应该引用**[.views-row.views-row-1.views-row-odd.views-row-first]时，我只引用****了 .views-row-2** ，因此我可以将那个特定的归零元素。

# java - Play Framework 未找到 hibernate.cfg.xml

> ID：14776167
> 
> 赞同：1
> 
> 时间：2013-02-08T15:42:23.930
> 
> 标签：java, hibernate, playframework-2.0

我是 Play Framework 的新手。我正在将一个项目从 struts2 迁移到使用 Hibernate for ORM 的 Play。我有一个名为 HibernateConfig 的单例类，它加载休眠配置，这是我得到以下错误的地方。

```
 In C:\Users\user\IdeaProjects\projectname\app\data\HibernateConfig.java at line 27\. [HibernateException: /hibernate.cfg.xml not found] 
   private static SessionFactory sessionFactory;

  private HibernateConfig (){}

23  public static SessionFactory getSessionFactory ()
24  {

25      if (sessionFactory == null)
26      {

27          sessionFactory = new Configuration    ().configure().buildSessionFactory();
28          return sessionFactory;
29      }
30      else

 31         return sessionFactory;
  } 
```

这是我的项目结构的样子：

> app -> 控制器 -> 应用程序控制器类
> app -> 模型 -> 模型类
> app -> 数据 -> HibernateConfig.java
> app -> 视图 -> html 文件
> app -> hibernate.cfg.xml

应用程序.conf

> # 数据库配置
> 
> db.default.driver=com.mysql.jdbc.Driver
> db.default.url="jdbc:mysql://localhost/dbname"
> db.default.user=root
> db.default.password=""

我知道问题是当我调用 new Configuration ().configure().buildSessionFactory() 时没有找到 hibernate.cfg.xml 但我不知道它必须放在 Play 中的哪个位置才能访问。（你们能不能也批评我的方法，如果我做错了，请告诉我）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:33:07.293

将 hibernate.cfg.xml 文件添加到 conf 文件夹的根目录，这应该可以解决问题。

# objective-c - 即使 enum 被定义为有符号整数，枚举在 Xcode 4.6 中的行为也像无符号整数

> ID：14776170
> 
> 赞同：3
> 
> 时间：2013-02-08T15:42:26.150
> 
> 标签：objective-c, xcode

我只能使用 xCode 4.6 重新创建此错误。使用 Xcode 4.5 一切正常

问题是 myVal 具有正确的位结构来表示 -1 的 int val。但是，它显示的值为 4294967295，如果用无符号整数表示，则该值是相同位结构的值。您会注意到，如果我将 myVal 转换为 int，它将显示正确的值。这很奇怪，因为枚举应该是一个 int 。

这是一个屏幕截图，显示了 main 末尾调试器中我所有变量的值。[http://cl.ly/image/190s0a1P1b1t](http://cl.ly/image/190s0a1P1b1t)

```
typedef enum : int {
    BTEnumValueNegOne = -1,
    BTEnumValueZero = 0,
    BTEnumValueOne = 1,
}BTEnumValue;

int main(int argc, const char * argv[])
{

@autoreleasepool {

    //on this line of code myVal is 0
    BTEnumValue myVal = BTEnumValueZero;

    //we are adding -1 to the value of zero
    myVal += BTEnumValueNegOne;

    //at this moment myVal has the exact bit stucture 
    //of a signed int at -1, but it is displaying it 
    //as a unsigned int, so its value is 4294967295

    //however, if i cast the enum (which should already 
    //be an int with a signing) to an int, it displays 
    //the correct value of -1
    int myIntVal = (int)myVal;

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:46:14.520

`enum`声明类型的新的首选方法是使用`NS_ENUM`宏，如本文所述：http: [//nshipster.com/ns_enum-ns_options/](http://nshipster.com/ns_enum-ns_options/)

# java - JDBC 中的一般错误（更新数据库）

> ID：14776175
> 
> 赞同：1
> 
> 时间：2013-02-08T15:42:35.310
> 
> 标签：java, ms-access, jdbc, odbc

```
private void sUpdateBtnActionPerformed(java.awt.event.ActionEvent evt) {
        String query = "UPDATE Student SET lastname = ?, firstname = ?, course = ?, yearlvl = ?, username = ?, password = ?";
        dbConn = DbConnection.dbConnect();
        prepState = dbConn.prepareStatement(query);
        prepState.setString(1, sLnTf.getText());
        prepState.setString(2, sFnTf.getText());
        prepState.setString(3, courseTf.getText());
        prepState.setInt(4, Integer.parseInt(yearLvlTf.getText()));
        prepState.setString(5, sUserTf.getText());
        prepState.setString(6, sPassTf.getText());
        prepState.executeUpdate();
    }catch(Exception e){
        appendEvent(sdf.format(new Date()) + " Error: " + e);
    }
} 
```

连接数据库的方法：

```
import java.sql.*;
import javax.swing.*;

public class DbConnection {
    Connection dbConn = null;

    public static Connection dbConnect(){
        try{
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection dbConn = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)}; DBQ=H:/Integ Ongoing Project/_Midterm Project/Server/src/database/Database.accdb");
            return dbConn;
        }catch(Exception e){
            System.out.println(e.getMessage());
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:37:37.930

*密码*是[保留字](http://allenbrowne.com/AppIssueBadWord.html#P)。如果您必须将其保留为字段名称，请将其括在查询中的括号中，以减少混淆数据库引擎的可能性。

```
UPDATE Student
SET
    lastname = ?,
    firstname = ?,
    course = ?,
    yearlvl = ?,
    username = ?,
    [password] = ?
WHERE student_id = ? 
```

请注意，正如斯蒂芬建议的那样，我包含了一个`WHERE`子句，因为您似乎不太可能希望将相同的字段值应用于表中的*每一*行`Student`。我用作`student_id`表主键的占位符名称......唯一标识每一行的字段。我的意图是修改该`WHERE`子句以引用要更改其记录的学生的主键。

如果您实际上是在尝试添加新记录，而不是更新现有记录（或记录），请使用`INSERT`语句。

```
INSERT INTO Student (
    lastname,
    firstname,
    course,
    yearlvl,
    username,
    [password]
    )
VALUES (
    ?,
    ?,
    ?,
    ?,
    ?,
    ?
    ) 
```

如果您将自动编号作为主键的数据类型，则数据库引擎将为您管理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:02:01.220

我认为问题在于您的 SQL 语句缺少 WHERE 子句。（我知道在 SQL 的某些方言中 WHERE 是可选的……但是在这里缺少 WHERE 对我来说毫无意义。）

我认为这是错误的原因是，即使 SQL 方言允许这样做，也不清楚您正在“设置”表的*哪一*行。即使 SQL 引擎可以弄清楚，WHERE 子句也可以让它更清晰。（在另一种情况下它“有效”的事实并不意味着它一定是正确的。）

可能导致问题的另一件事是“密码”是某些 SQL 方言中的保留字。更改列名，或对其进行转义。

* * *

最后，实际的 SQL 错误消息*应该*在异常堆栈跟踪中，或者在日志文件中失败。如果您试图在数据库代码中查找问题，那么这些应该是*首先要查看的地方。*寻找**证据**……而不是希望别人为你猜出正确的答案。

# c# - 将 C# 枚举定义序列化为 Json

> ID：14776177
> 
> 赞同：23
> 
> 时间：2013-02-08T15:42:43.790
> 
> 标签：c#, json, serialization, enums, servicestack

在 C# 中给出以下内容：

```
[Flags]
public enum MyFlags {
  None = 0,
  First = 1 << 0,
  Second = 1 << 1,
  Third = 1 << 2,
  Fourth = 1 << 3
} 
```

是否有任何现有的方法`ServiceStack.Text`可以序列化为以下 JSON？

```
{
  "MyFlags": {
    "None": 0,
    "First": 1,
    "Second": 2,
    "Third": 4,
    "Fourth": 8
  }
} 
```

目前我正在使用下面的例程，有没有更好的方法来做到这一点？

```
public static string ToJson(this Type type)
    {
        var stringBuilder = new StringBuilder();
        Array values = Enum.GetValues(type);
        stringBuilder.Append(string.Format(@"{{ ""{0}"": {{", type.Name));

        foreach (Enum value in values)
        {
            stringBuilder.Append(
                string.Format(
                    @"""{0}"": {1},", 
                    Enum.GetName(typeof(Highlights), value), 
                    Convert.ChangeType(value, value.GetTypeCode())));
        }

        stringBuilder.Remove(stringBuilder.Length - 1, 1);
        stringBuilder.Append("}}");
        return stringBuilder.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T16:22:28.540

```
public static class EnumExtensions
{
    public static string EnumToJson(this Type type)
    {
        if (!type.IsEnum)
            throw new InvalidOperationException("enum expected");

        var results =
            Enum.GetValues(type).Cast<object>()
                .ToDictionary(enumValue => enumValue.ToString(), enumValue => (int) enumValue);

        return string.Format("{{ \"{0}\" : {1} }}", type.Name, Newtonsoft.Json.JsonConvert.SerializeObject(results));

    }
} 
```

使用字典来完成繁重的工作。然后使用 Newtonsoft 的 json convert 将其转换为 json。我只需要做一些包装来添加类型名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T15:46:33.883

您最好填充一个`Dictionary<string,int>`或一个 Typed DTO 并对其进行序列化。

# android - Android cyanogenmod 9.1：意图不应该是粘性的

> ID：14776186
> 
> 赞同：0
> 
> 时间：2013-02-08T15:43:03.787
> 
> 标签：android, android-intent, broadcastreceiver, cyanogenmod

我正在 Cyanogen 9.1 (Android 4.0.4) 上测试我的 Android 应用程序，我发现了一个奇怪的行为。

我的应用程序包含一个侦听 android.net.conn.CONNECTIVITY_CHANGE 的 BroadcastReceiver。根据[Android 文档，](http://developer.android.com/reference/android/net/ConnectivityManager.html)这种意图并不具有粘性。

但是，当应用在 CM9.1 上启动时，它总是会收到一个 CONNECTIVITY_CHANGE 意图。

事实上，这个意图被系统列为粘性：

```
>adb shell dumpsys activity
 Sticky broadcasts:
...
 * Sticky action android.net.conn.CONNECTIVITY_CHANGE
... 
```

在我测试过的其他 Android 版本上（例如我的 NX4 上的 4.2.1 库存 Android），意图不是粘性的，并且在启动时没有收到，这是正确的行为。

**这是 Cyanogenmod ROM 中的错误吗？有没有办法在收到粘性意图时知道它是旧的，而不是由最近的实际事件引起的？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:58:10.577

> 这是 Cyanogenmod ROM 中的错误吗？

在 CM 支持板上询问您会得到更好的服务。

> 有没有办法在收到粘性意图时知道它是旧的，而不是由最近的实际事件引起的？

您可以`registerReceiver()`使用 a`null` `BroadcastReceiver`和 an调用`IntentFilter`您想要的`Intent`结构（例如，`android.net.conn.CONNECTIVITY_CHANGE`动作）。如果返回值为`null`，则广播没有粘性，因此您的行为正常。

但是，没有好的方法可以确定粘性`Intent`的年龄，除非那个特定`Intent`的东西恰好有某种额外的时间戳。

# c# - 为什么不能重命名在流中打开的文件？

> ID：14776190
> 
> 赞同：1
> 
> 时间：2013-02-08T15:43:08.323
> 
> 标签：c#, .net

使用以下代码，我读取了一个文件并保持流打开。

```
 static void Main(string[] args)
    {
        FileStream fileStream = new FileStream(@"C:\temp\test1.txt", FileMode.Open);
        Console.ReadLine();
    } 
```

如果我现在尝试重命名此文件，则会显示消息“文件正在使用”。 ![正在使用的文件](../Images/89aa05f7776e369081afcf5af6ab60bf.png)

看起来应该可以重命名文件（在操作系统级别），即使它正在使用中：[为什么重命名加载的 .net 程序集有效？](https://stackoverflow.com/questions/14774099/why-does-rename-a-loaded-net-assembly-work)

.net 将文件加载到流中时，为什么不能重命名文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:09:03.613

关于程序集，.NET 应该使用类似的方式打开程序集`FileShare.ReadWrite`，即使它已加载到域中，任何其他进程都可以写入或重命名整个文件。

AFAIK，.NET 没有`FileShare`用于允许或禁止重命名文件共享的托管枚举值（类似于`FileShare.Rename`），但 Win32 应该具有因此程序集加载将创建带有掩码的文件流`FileShare.ReadWrite | FileShare.Rename`（`FileShare.Delete`包括重命名但也删除整个文件...）。

为了证明这一点，我尝试了以下代码：

```
 FileStream a = File.Open(@"C:\blah.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    a.Dispose(); 
```

在打开文件流并处理它之前，我无法删除整个文件，但我可以重命名它。

请注意，程序集会`AppDomain`在需要时加载到其中，这意味着您可能可以编写、删除或重命名程序集，因为它尚未加载。

尝试删除已经加载到的程序集`AppDomain`：你不能（我刚刚尝试过，测试代码在控制台应用程序中运行，我无法在运行时删除可执行文件）。现在尝试重命名它：它可以工作。

## 概括

这完全是关于如何打开文件以及打开文件流时使用了哪个文件掩码配置：**这就是为什么您的文件无法重命名但您可以重命名已加载的程序集的原因**。

像下一个一样修改您的代码，您将能够重命名整个文件（甚至删除它！）：

```
 FileStream fileStream = File.Open(@"C:\temp\test1.txt", FileMode.Open, FileShare.ReadWrite | FileShare.Delete);
    Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:52:01.450

创建时`FileStream`不会将其数据加载到内存中。当您在寻找流时，文件内容仍然是从磁盘中读取的——当您需要读取大文件时这是一件好事。

如果您只想将整个内容加载到您可以使用的内存中`File.ReadAllBytes`。您可以在此处阅读更多相关信息：http: [//msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)。

注意：如果要使用流而不是字节数组，可以使用`MemoryStream`并将读取的文件内容传递给它。

# nested - 嵌套鼠标悬停不起作用

> ID：14776193
> 
> 赞同：1
> 
> 时间：2013-02-08T15:43:09.453
> 
> 标签：nested, mouseover

这适用于 FF 但不适用于 IE a 标签上的鼠标悬停不会激活。我希望能够在用户将鼠标悬停在 a 标签上时为其设置类。

```
 <div class="selects-options" id="dropsort"
                       onmouseover="divshowsort();"
                       style="position: absolute; top: 8px; left: 1px; width: 153px;display:none;"
                       onmouseout="hidesort();">
                     <div class="drop-holder">
                        <div class="drop-list">
                           <ul>
                              <li class="items_selected" id="li1" rel="0">
                                 <a onmouseover="sortclass('li1');"
                                    onclick="divhidesort('R');" href="#">
                                    <span>Relevance</span>
                                 </a>
                              </li>
                              <li class="" id="li2" rel="1">
                                 <a onmouseover="sortclass('li2');"
                                    onclick="divhidesort('A');" href="#">
                                    <span>Title A-Z</span>
                                 </a>
                              </li>
                              <li class="" id="li3" rel="2">
                                 <a onmouseover="sortclass('li3');"
                                    onclick="divhidesort('D');" href="#">
                                    <span>Newest</span>
                                 </a>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div> 
```

# hibernate - 休眠 @SelectBeforeUpdate(true) 和 @DynamicUpdate(true) 不适用于 session.merge

> ID：14776196
> 
> 赞同：2
> 
> 时间：2013-02-08T15:43:16.363
> 
> 标签：hibernate

我正在使用 Hibernate 4.1.7.Final 并尝试使用该`session.merge(entity)`方法更新对象。实体注释为：

`@SelectBeforeUpdate(true)`和`@DynamicUpdate(true)`

但是，我发现合并方法用来自被合并实体的空值覆盖原始的非空字段（在先前持久化的实体中） - 这是我不想要的。我以为`@DynamicUpdate`只会更新非空值。

Hibernate 文档中对 merge 方法的描述是：

> 将给定对象的状态复制到具有相同标识符的持久对象上。如果当前没有与会话关联的持久实例，它将被加载。返回持久实例。如果给定实例未保存，则保存副本并将其作为新的持久实例返回。给定的实例不会与会话关联。如果关联使用 cascade="merge" 映射，则此操作级联到关联实例

有什么想法有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:18:12.293

我能很快想到两件事：

1.  根据 Hibernate 文档，版本/时间戳列（如果使用 JPA，则为 @Version 注释）应用作乐观锁定策略，以便 Session.merge() 正确处理对分离实例所做的修改。确保使用此策略。

2.  @SelectBeforeUpdate 和 @DynamicUpdate 不可继承，因此请确保注释了正确的实体。

# java - 从 Java 中的 HTML 字符串中解析数字

> ID：14776202
> 
> 赞同：0
> 
> 时间：2013-02-08T15:43:27.727
> 
> 标签：java

解析 HTML 时，每次我有一个 '>' `char`，我都需要检查它后面是否有一个数字。该号码可以是 1、2 或 3 位数字。

代码看起来不错，但我总是得到一个`StringIndexOutOfBoundException`.

代码：

```
while (matches < 19) 
    {
        more  = dataInHtml.indexOf(">",index);
        nextOne = dataInHtml.charAt(more + 1);
        nextTwo = dataInHtml.charAt(more + 2);
        nextThree = dataInHtml.charAt(more + 3);

        if (Character.isDigit(nextOne))  digitOne = true;
        if (Character.isDigit(nextTwo))  digitTwo = true;       
        if (Character.isDigit(nextThree))  digitThree = true;

        if (digitThree)
        {
            data[matches] = dataInHtml.substring(more + 1, 3);
            matches++;
            digitThree = false;
            digitTwo = false;
            digitOne = false;
            index = more + 3;
            itWasADigit = true;
        }

        if (digitTwo)
        {
            data[matches] = dataInHtml.substring(more + 1, 2);
            matches++;
            digitTwo = false;
            digitOne = false;
            index = more + 2;
            itWasADigit = true;
        }           

        if (digitOne)
        {
            data[matches] = dataInHtml.substring(more + 1, 1);
            matches++;
            digitOne = false;
            index = more + 1;
            itWasADigit = true;
        }           

        if (!(itWasADigit))    
        {
            index = more + 1;
            itWasADigit = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:46:54.513

如果你将字符串“string >12”传递给它，看看它会做什么：

```
more  = dataInHtml.indexOf(">",index);
  nextOne = dataInHtml.charAt(more + 1); <-- get the 1
  nextTwo = dataInHtml.charAt(more + 2); <-- Get the 2
  nextThree = dataInHtml.charAt(more + 3); <-- Try to access outside of the string as more+3 is greater than the highest index in the string, so it crashes out 
```

因此，您看到`StringIndexOutOfBoundsException`.

使用这样的东西

```
if(dataInHtml.length() > more+3) 
```

在尝试访问该字符之前检查字符串的长度是否足够大。

如果您尝试从 HTML 文档中读取数字，这可能不是理想的方法。如果可能，您应该考虑使用解析器对其进行解析。

[http://jsoup.org/](http://jsoup.org/)看起来很有希望。

# java - ListView 中的 NullPointException

> ID：14776205
> 
> 赞同：1
> 
> 时间：2013-02-08T15:43:35.480
> 
> 标签：java, android, eclipse, android-listview, nullpointerexception

请看下面的代码

**activity_form.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Form" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/logo" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/logo"
        android:layout_marginTop="10dp"
        android:text="@string/title" />

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/title"
        android:layout_marginTop="10dp"
        />

</RelativeLayout> 
```

**list_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/listImage"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:src="@drawable/star" />

    <TextView
        android:id="@+id/listText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

**表单.java**

```
package com.example.callmanager;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class Form extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_form);

        ListView lv = (ListView)findViewById(android.R.id.list);
        String arr[] = getResources().getStringArray(R.array.branch_list);
        lv.setAdapter(new MyAdapter(this,android.R.layout.simple_list_item_1,R.id.listText,arr));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_form, menu);
        return true;
    }

    private class MyAdapter extends ArrayAdapter
    {

        public MyAdapter(Context context, int resource, int textViewResourceId,
                Object[] objects) {
            super(context, resource, textViewResourceId, objects);
            // TODO Auto-generated constructor stub
        }

        @Override
        public View getView(int position, View contentView, ViewGroup parent)
        {
            LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.list_layout, parent,false);

            TextView tv = (TextView)findViewById(R.id.listText);
            ImageView iv = (ImageView)findViewById(R.id.listImage);

            String arr[] = getResources().getStringArray(R.array.branch_list);
            tv.setText(arr[position]);

            if(arr[position].equals("Anuradhapura"))
            iv.setImageResource(R.drawable.star);

            return view;

        }

    }

} 
```

**字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Esoft Call Manager</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title"><b>Select a Branch To Call</b></string>

    <string-array name="branch_list">
        <item>Anuradhapura</item>
        <item>Avissawella</item>

    </string-array>

</resources> 
```

当我运行这段代码时，我得到了' `NullPointException`'。我在这里添加完整的日志文件

```
02-08 21:04:01.463: D/dalvikvm(490): GC_EXTERNAL_ALLOC freed 43K, 53% free 2551K/5379K, external 1949K/2137K, paused 82ms
02-08 21:04:01.713: D/AndroidRuntime(490): Shutting down VM
02-08 21:04:01.713: W/dalvikvm(490): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-08 21:04:01.733: E/AndroidRuntime(490): FATAL EXCEPTION: main
02-08 21:04:01.733: E/AndroidRuntime(490): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.callmanager/com.example.callmanager.Form}: java.lang.NullPointerException
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.os.Looper.loop(Looper.java:123)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-08 21:04:01.733: E/AndroidRuntime(490):  at java.lang.reflect.Method.invokeNative(Native Method)
02-08 21:04:01.733: E/AndroidRuntime(490):  at java.lang.reflect.Method.invoke(Method.java:507)
02-08 21:04:01.733: E/AndroidRuntime(490):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-08 21:04:01.733: E/AndroidRuntime(490):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-08 21:04:01.733: E/AndroidRuntime(490):  at dalvik.system.NativeStart.main(Native Method)
02-08 21:04:01.733: E/AndroidRuntime(490): Caused by: java.lang.NullPointerException
02-08 21:04:01.733: E/AndroidRuntime(490):  at com.example.esoftcallmanager.Form.onCreate(Form.java:24)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-08 21:04:01.733: E/AndroidRuntime(490):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-08 21:04:01.733: E/AndroidRuntime(490):  ... 11 more 
```

如果有帮助，我将在下面添加文件夹结构

![在此处输入图像描述](../Images/0dff9e89e7c9d54d760def6700b7d5be.png)

为什么我收到此错误？如何解决这个问题？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:49:02.670

试试这个：

改变这个

```
ListView lv = (ListView)findViewById(android.R.id.list); 
```

为了：

```
ListView lv = (ListView)findViewById(R.id.list); 
```

通常他们在类扩展 ListActivity 时使用 android.R.id.list

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:47:22.967

改变：

```
 ListView lv = (ListView)findViewById(android.R.id.list); 
```

到

```
 ListView lv = (ListView)findViewById(R.id.list); 
```

除非您的 XML 中有一个 id 格式的 id，否则您`android:id="@android:id/myID"`不需要使用`android.R`. 每当您使用自己的 ID 之一时，您都可以简单地使用`R.id.Whatever`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:49:17.950

问题就在这里。`ListView lv = (ListView)findViewById(android.R.id.list);`您在引用的`android.R.id.list` 布局中引用`android:id="@+id/list"`了 Id，这会在名为 list 的 Resources 类中创建一个 Id。所以你应该在`R.id.list`调试时引用，你会发现`lv`变量为空，因为你引用了错误的 id 而没有找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:49:17.083

试试这个。

我希望它能解决你的NPE。

更改

```
ListView lv = (ListView)findViewById(android.R.id.list); 
```

到

```
ListView lv = (ListView)findViewById(R.id.list); 
```

实际上，您已经在布局**activity_form.xml**中定义了列表视图，`list`因此您需要编写`R.id.list`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:51:44.273

如果您使用自己的布局，则无需再编写`android.R`，只需删除 android 并重新组织您的课程

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T18:15:35.777

我设法自己解决了这个问题。需要进行以下编辑。

**activity_form.xml**

的“id”`ListView`应该是

```
android:id="@android:id/list" 
```

**表单.java**

它应该`ListView`以这种方式调用

```
ListView lv = (ListView) findViewById(android.R.id.list); 
```

里面， and`getView()`的初始化应该是这样的`TextView``ImageView`

```
TextView tv = (TextView) view.findViewById(R.id.listText);
ImageView iv = (ImageView) view.findViewById(R.id.listImage); 
```

注意`view.findViewById()`部分。

# asp.net - ASP.net Web 应用程序中 SSRS 报告自定义参数的可用/默认值

> ID：14776208
> 
> 赞同：3
> 
> 时间：2013-02-08T15:43:42.203
> 
> 标签：asp.net, sql-server, ssrs-2008, reportviewer, reportbuilder3.0

我计划围绕 SSRS 报告构建内部仪表板的一部分。我正在使用 ASP.net（框架 4）、SQL Server 2008 R2、IIS6，并且已经在 Report Builder 3.0 中构建了我的所有报表。

现在使用 ReportViewer 控件将报表从报表服务器拉到仪表板。我想做的是*隐藏*SSRS 报告参数并自己从后面的代码中提供它们，因为 SSRS 参数选择控件很难看（Windows 95 很难看）并且不适合网站的外观和感觉。此外，我有不同的最终用户报告，它们实际上是具有不同参数选择的同一报告（我不想显示这些选择控件）。

问题是我的所有报告都非常参数化 - 业务用户希望报告与枢轴一样灵活（您可以想象我构建这些报告的乐趣）。因此，我使用大量共享数据集来为每个参数提供默认值和可用值。由于我打算自己在我的 Web 应用程序中呈现这些参数，因此我需要知道：

*   每个报告的参数是什么（名称和类型）
*   每个参数的默认值应该是什么
*   每个参数的可用选项应该是什么

我很高兴将每个参数的名称/类型存储在数据库表中，但是要存储的值太多，无法对参数执行相同的操作（而且数据过于动态）。谁能想到解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:10:29.773

事实上，很容易检索报告中使用的 Default 和 Available 参数值：

设置报表源后，[ServerReport.GetParameters()](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.serverreport.getparameters%28v=vs.100%29.aspx)返回 ReportParameterInfo 的集合，该集合为每个参数提供数据类型、默认/可用值（分别为“值”/“有效值”，其中“有效值”是值/标签对）和其他有用的属性，例如依赖于它的其他参数列表。

因此，只需在报表中保存默认/可用参数（使用报表生成器/报表管理器）并使用它在您的代码中检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:55:12.903

这是您要查找的内容吗：http: [//msdn.microsoft.com/en-us/library/ms155391.aspx](http://msdn.microsoft.com/en-us/library/ms155391.aspx)？我不太清楚您的帖子中的问题是什么，您在做您想做的事情时到底需要什么帮助？

# vim - 是否可以在 vim 中使用多个折叠标记？

> ID：14776215
> 
> 赞同：2
> 
> 时间：2013-02-08T15:44:17.257
> 
> 标签：vim, folding

我在 Vim 中编写 C#，我希望能够同时折叠两者

```
+---- 3 lines: void SomeFunction()----------------------------------------------- 
```

也

```
+---- 42 lines: #region The Answer To Life--------------------------------------- 
```

但是，foldmarker 必须是文字字符串。我被引导到 的想法`foldmethod=syntax`，但这在 Vim 7.3 中不能开箱即用。

除了将 fold 方法设置为手动并编写脚本之外，我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:18:48.110

我的 Vim 7.3 运行时有一个`syntax/cs.vim`支持`#region`. 语法折叠很好；我建议不要使用另一种折叠方法。我会联系语法文件的作者，并建议将缺少的函数折叠作为增强功能；许多其他文件类型都有这个，它似乎很常见并且很有帮助。（这可以为那些不想要一个或另一个的人进行配置。）

同时，您可以添加以下内容`~/.vim/after/syntax/cs.vim`以启用任何花括号块的折叠：

```
syn region csFold start="{" end="}" transparent fold 
```

# ios - valueForKey：在打包结构上？

> ID：14776221
> 
> 赞同：4
> 
> 时间：2013-02-08T15:44:31.003
> 
> 标签：ios, objective-c, struct

给定以下打包结构：

```
typedef struct __attribute__((packed)) {
    BOOL flag;
    int x;
} Foo; 
```

以及以下课程：

```
@interface Obj : NSObject
@property (nonatomic) Foo foo;
@end

@implementation Obj
@end 
```

尝试调用`valueForKey:`具有打包结构类型的属性：

```
Obj *obj = [Obj new];
id boo = [obj valueForKey:@"foo"]; 
```

导致内部崩溃`valueForKey:`（实际上它不是在内部`valueForKey:`而是在随机位置崩溃，具体取决于月球大小，我猜这是内存损坏）。

如果我删除`__attribute__((packed))`它工作正常。有没有可能在不崩溃的情况下获取结构的数据？是苹果的bug吗？

PS。我确实需要在运行时这样做，即我不能直接调用`.foo`，我在运行时只有`@"foo"`字符串。（我实际上想要实现的是递归打印对象内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:55:09.077

在您的用例中避​​免使用 KVO，并坚持使用方便的花花公子`<objc/runtime.h>`标题。您可以使用这种自省来重新实现 KVO 的基本部分。结构打包主要用于确保编译器没有正确对齐内部字段，因此 CPU 在执行期间不需要在硬件级别处理它。在这个时代，最好让编译器为你处理事情。

如果您真的更喜欢这种结构打包（如您所说，在网络传输场景中），我将需要更多信息来确定问题所在。也许尝试更改`@property (nonatomic) Foo foo;`为`@property (nonatomic) NSValue *foo;`然后将其装箱并自己拆箱？这样，异常/错误将在您的应用程序的域中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:15:02.543

我不知道这是否可以通过属性实现，但如果可以，我认为您使用的语法不正确。

你试过改变

```
id boo = [obj valueForKey:@"foo"]; 
```

读书

```
Foo boo = obj.foo; 
```

?

Foo 不是也永远不会是`id`. `valueForKey:`返回 id，并且运行时可能会试图`struct Foo`挤进`NSValue`.

如果您`valueForKey:`出于某种原因需要使用，您的访问权限需要看起来像。

```
Foo myFoo = FooFactory();
Object *myObj = [Object new];
[myObj setValue:@( myFoo ) forKey:@"foo"];

Foo myFooOut;
[[myObj valueForKey:@"foo"] getValue:&myFooOut];
//I bet `getValue:` is where things are barfing. 
```

在这种情况下，如果`NSValue`' 的机器确实无法处理打包的结构，您只需要以老式的方式编写访问器：`-<key>`和 -set:`。

**PS：永远不要将类命名为“对象”，**实际上`Object`在某些 SDK 中有一个`NSObject`继承自。我假设这只是在你的例子中。

# c# - 如何从数据库中加载一些视图，从 MVC4 中的文件中加载其他视图

> ID：14776223
> 
> 赞同：0
> 
> 时间：2013-02-08T15:44:38.253
> 
> 标签：c#, asp.net-mvc-4, virtualpathprovider

我有一个从文件加载 _Layout 和正常页面视图的 Web 应用程序，我现在尝试使用 VirtualPathProvider 和覆盖的 VirtualFile 从数据库加载部分视图：

```
public class RavenDbPathProvider : VirtualPathProvider {

    public override bool FileExists(string virtualPath) {
        if (!virtualPath.StartsWith("TextContents/")) return false;

        using (var session = ObjectFactory.GetInstance<IDocumentSession>()) {
            return session.Query<TextContent>().Any(w => w.Id == virtualPath);
        }
    }

    public override VirtualFile GetFile(string virtualPath) {
        if (!virtualPath.StartsWith("TextContents/")) 
            return base.GetFile(virtualPath);
        return new RavenDbVirtualFile(virtualPath);
    }
} 
```

我还在 global.asax 中注册了 Provider：

```
HostingEnvironment.RegisterVirtualPathProvider(new RavenDbPathProvider()); 
```

但是，当我注册 RavenDbPathProvider 时，它似乎被用于所有视图查找。

是否可以注册多个 VirtualPathProviders，以便如果在磁盘上找不到视图，则搜索将在数据库中继续？

如果没有，有没有人成功地做过类似的事情？

# ios - 我可以在 iOS 中使用 iPodMusicPlayer 播放文档目录中的歌曲吗？

> ID：14776226
> 
> 赞同：0
> 
> 时间：2013-02-08T15:44:48.933
> 
> 标签：ios, cocoa-touch

我`iPodMusicPlayer`用来播放 iPod 库中的歌曲。现在我想用`iPodMusicPlayer`.

我不想玩`AVPlayer`。

如果可以，我怎么玩？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:55:16.667

我很确定你可以。尝试查看此 Apple 文档：http: [//developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html)

# asp.net - 在不使用 TempData 的情况下避免 MVC 中的大数据重定向

> ID：14776236
> 
> 赞同：1
> 
> 时间：2013-02-08T15:45:30.680
> 
> 标签：asp.net, asp.net-mvc

问题：

1.  您有一个自定义控制器操作，它会修改大量数据（大约 5MB）。
2.  您需要将此数据传递给另一个控制器操作，您不能对其进行修改。

最好的方法是什么？

正常的 RedirectToAction 会导致大量数据发布。

TempData 不能用作解决方法，因为您无法修改其他控制器以读取临时数据。

```
[HttpPost, ActionName("Import")]
    public ActionResult ImportPost(int id)
    {
    var bigData = GetBigData(id);
    bigData = ManipulateBigDataIntoFormatOtherControllerUnderstands(bigData);

    // TODO: redirect to other controller (which has HttpPost attribute), somehow??
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:00:08.370

没关系，发布后立即提出答案：

```
var c = new Namespace.Controllers.OtherController();
c.ControllerContext = ControllerContext;
return c.Action(bigData); 
```

# r - 如何将 geom_box 中的填充 alpha 设置为因子中的观察次数

> ID：14776237
> 
> 赞同：3
> 
> 时间：2013-02-08T15:45:32.657
> 
> 标签：r, ggplot2

我需要绘制一组箱线图，其中数据按因素分组。我还想`alpha`为每个框设置值以表示每个因子中的观察次数。给定因子的观测值越多，`alpha`.

以`mpg`数据为例...

绘制情节很简单：

```
library(ggplot2)
ggplot(mpg, aes(x=factor(class), y=displ)) + 
   geom_boxplot(aes(fill="red", alpha=10)) +
   scale_fill_manual(values=c("red"="red"),guide="none") +
   scale_alpha(range=c(0,1), guide="none") 
```

[![示例箱线图](../Images/4d6e40e797be1f332b29ee929255c6ea.png)](https://i.stack.imgur.com/fENpC.png)

计算每个观测值的数量`class`很简单，使用`plyr`：

```
ddply(mpg, .(class), nrow)
       class V1
1    2seater  5
2    compact 47
3    midsize 41
4    minivan 11
5     pickup 33
6 subcompact 35
7        suv 62 
```

我确信有一个聪明的方法可以在里面做`ggplot2`，但我已经用尽了所有的想法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:11:44.117

如果你拉出`alpha`，`aesthetic (aes)`那么你可以直接提供`alpha`基于`length`each的值`class`，如下所示：

```
ggplot(mpg, aes(x=factor(class), y=displ)) + 
      geom_boxplot(aes(fill="red"), 
          alpha = table(mpg$class) / max(table(mpg$class))) +
              scale_fill_manual(values=c("red"="red"), guide = "none") 
```

你得到这个：

![ggplot2_alpha](../Images/04e750c11f2fec6fc85fbc608172a465.png)

# php - PHP 中的 imagecreatefromjpeg() 函数出错

> ID：14776239
> 
> 赞同：0
> 
> 时间：2013-02-08T15:45:35.527
> 
> 标签：php, image, jpeg

**使用下面的 php 代码时，它会显示错误**

```
<?php
$path="/hari002244/album/f41b6b54811c.jpg";
$src = imagecreatefromjpeg($path);
?> 
```

表明

```
SCREAM: Error suppression ignored for
Warning: imagecreatefromjpeg(/hari002244/album/f41b6b54811c.jpg): failed to open stream: No such file or directory in C:\wamp\www\newEmptyPHP.php on line 3 
```

**但是使用的时候**

```
<?php
$path="f41b6b54811c.jpg";
$src = imagecreatefromjpeg($path);
?> 
```

它没有显示任何错误。

我在 URL 栏中输入了路径并检查了文件是否存在。它工作正常。

你能告诉我为什么会出现这个错误吗？以及如何克服这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:47:28.583

第一个路径，`"/hari002244/album/f41b6b54811c.jpg"`是绝对路径，从整个文件系统的根目录开始。很有可能，这条路不存在。

在第二种情况下，它只是一个`"f41b6b54811c.jpg"`相对于 / 位于当前工作目录中的文件名，当然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:51:56.110

得到了答案

代替`"/hari002244/album/f41b6b54811c.jpg"`

应该使用`"http://localhost/hari002244/album/f41b6b54811c.jpg"`

# xpages - 使用 extlib 将状态更新发布到 IBM Connections

> ID：14776242
> 
> 赞同：2
> 
> 时间：2013-02-08T15:45:39.380
> 
> 标签：xpages, xpages-extlib, ibm-connections

我正在尝试使用 extlib 向 IBM Connections 发布更新，即状态消息。

我使用了带有connectionsLTPA 端点的extlib，它非常适合获取社区列表。但是我希望添加功能来更新用户状态。

到目前为止，我已经尝试使用

```
<xp:this.data>
    <xe:connectionsData var="connectionsData1"
        endpoint="connections" serviceUrl="/profiles/atom/mv/theboard/entry/status.do?email=#{userBean.email}">
    </xe:connectionsData>
</xp:this.data> 
```

然后在事件处理程序中

```
 var sb = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>" +

        "<author><name>#{userBean.displayName}</name></author>" +
        "<entry xmlns=\"http://www.w3.org/2005/Atom\">" +
      "<content type=\"html\">" +input + "</content>" +
       "<category scheme=\"http://www.ibm.com/xmlns/prod/sn/type\" term=\"status\" />"+ 
     "</entry>\r\n";
var output = #{connectionsData1}.post(null, sb, "xml"); 
```

但是，这会引发错误，尝试在绑定的数据点上调用 post。

有人能指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:45:20.783

我发现通过执行以下操作来实现 sbt：

```
<xp:button id="button2">
        <xp:this.value>Update my status</xp:this.value>
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="partial">
            <xp:this.action><![CDATA[#{javascript:try {
    var svc = new sbt.ConnectionsService("/profiles/atom/mv/theboard/entry/status.do?email=" +userBean.email);
    var sb = new java.lang.StringBuilder();
        sb.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
        sb.append("<entry xmlns=\"http://www.w3.org/2005/Atom\">");
        sb.append("<category scheme=\"http://www.ibm.com/xmlns/prod/sn/type\" term=\"entry\"/>");
        sb.append("<category scheme=\"http://www.ibm.com/xmlns/prod/sn/message-type\" term=\"status\"></category>");
        sb.append("<content type=\"text\">");
        sb.append(getComponent("inputText1").getValue());
        sb.append("</content>");
        sb.append("</entry>");
    var msg = svc.put(null, sb.toString(),"xml");
    var msg = "updated users profile status";

@WarningMessage(msg)
} catch(e) {}

}]]></xp:this.action>
        </xp:eventHandler>
    </xp:button> 
```

它无法正常工作的原因是需要将原子提要声明为条目。[2.5 http://publib.boulder.ibm.com/infocenter/ltscnnct/v2r0/index.jsp?topic=/com.ibm.connections.25.help/r_api_prof_update_photo.html](http://publib.boulder.ibm.com/infocenter/ltscnnct/v2r0/index.jsp?topic=/com.ibm.connections.25.help/r_api_prof_update_photo.html)的连接文档中的这篇文章解释了所需的部分xml atom 文档。

# design-patterns - 为什么我们需要工厂模式中的工厂？

> ID：14776249
> 
> 赞同：0
> 
> 时间：2013-02-08T15:46:09.163
> 
> 标签：design-patterns

为什么我们使用简单的工厂模式，而我们可以将创建子类的责任委托给超类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:30:54.097

通常，您的子类知道超类，但您的超类对子类一无所知。这样做的原因是为了避免超类依赖于子类。更少的依赖使代码重用变得更容易。

有时，打破该规则并让您的超类知道子类并创建它们的实例会很方便，但在其他情况下这是不可能的。例如，当您为第三方库创建扩展时，您无法编辑库中的超类，您必须扩展它。这是一个很好的设计，因为它可以防止他们的库依赖于您的扩展。在较小的项目中，它可能不那么重要，但在较大的项目中，避免不必要的依赖关系可以重用一段代码，而不会拖入一堆不需要的类。

# makefile - 为什么make会删除我的临时文件？

> ID：14776258
> 
> 赞同：4
> 
> 时间：2013-02-08T15:46:37.227
> 
> 标签：makefile

我有一个简单的 Makefile，

```
.PHONY: clean

PROGRAMS=$(patsubst main%.cpp,example%,$(wildcard main*.cpp))

all: ${PROGRAMS}

GCCVERSION=$(shell gcc -dumpversion)

GLCFLAGS=$(shell pkg-config --cflags gl)
CPPFLAGS=-Wall -O2 ${GLCFLAGS}
ifeq "${GCCVERSION}" "4.5.2"
    CXXFLAGS=-std=c++0x
else
    CXXFLAGS=-std=c++11
endif

GLLIBS=$(shell pkg-config --libs gl)
LIBS=${GLLIBS} -lglut

example%: main%.o shaders.o fileutils.o
    ${CXX} $^ ${LIBS} -o $@

clean:
    rm -f *.o ${PROGRAMS} 
```

但是当我执行它时，它会删除 *.o 文件作为最后一个命令。我不知道为什么：

```
$ make
g++ -std=c++11 -Wall -O2 -I/usr/include/libdrm    -c -o main01.o main01.cpp
g++ -std=c++11 -Wall -O2 -I/usr/include/libdrm    -c -o shaders.o shaders.cpp
g++ -std=c++11 -Wall -O2 -I/usr/include/libdrm    -c -o fileutils.o fileutils.cpp
g++ main01.o shaders.o fileutils.o -lGL   -lglut -o example01
rm main01.o fileutils.o shaders.o 
```

我的 Makefile 有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:51:55.770

中间文件被设计删除：参见GNU make 手册中的[链式规则](http://www.gnu.org/software/make/manual/html_node/Chained-Rules.html)。

使用`.SECONDARY`或`.PRECIOUS`目标来保存您的珍贵临时文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-13T12:28:20.033

只是为了澄清先前的响应，您需要添加一个特殊规则，例如

```
.PRECIOUS: myfile.o 
```

# wordpress - WordPress - 如何获得循环的第 n 个帖子？

> ID：14776260
> 
> 赞同：0
> 
> 时间：2013-02-08T15:46:44.433
> 
> 标签：wordpress

我正在按自定义字段值的降序对帖子进行排序，我想知道是否有办法按降序查找第 n 个帖子。

例如，顺序是：

```
1st from top: id = 9
2nd from top: id = 5
3rd from top: id = 6 
```

现在，我`get_template_part()`用来显示帖子。

我想知道是否有`get_template_part_of_post(3rd-from-top)`.

```
<div class="onethird">

                    <?php

                    $count_posts = wp_count_posts("ott_products", "");
                    $published_posts_orig = $count_posts->publish;
                    $published_posts = $published_posts_orig +  (3 - ($published_posts_orig % 3));

                    $i = 0;

                    if ( have_posts()) : while($query->have_posts()) :

                        echo $i . " " . $published_posts;
                        $i = $i + 3;
                        $query->the_post();

                        get_template_part( 'content', 'category' );

                        if ( $i % 3 === 2 ) :
                            if ( ($i - 2 == $published_posts) ) :
                                $i = 3;
                        endif; endif;

                        if ( $i % 3 === 1 ) :
                            if ( ($i - 1 == $published_posts) ) :
                                echo "</div><div class='onethird last'>";
                                $i = 2;
                        endif; endif;

                        if ( $i % 3 === 0 ) :
                            if ( ($i == $published_posts) ) :
                                echo "</div><div class='onethird'>";
                                $i = 1;
                        endif; endif; 

                    endwhile;

                    else :

                        get_template_part( 'no-results', 'archive' );

                    endif;  

                    ?>

            </div> 
```

这是我目前正在使用的。这将帖子分为三列。

该变量`i`将本来应该在三列中从上到下的内容从左到右转换。

以前，我的帖子显示如下：

```
(Total 9 posts)
1  4  7
2  5  8
3  6  9 
```

有了它，我可以`i`：

```
(Total n posts)
1  2  3
4  5  6
... 
```

现在，问题是我无法`i`显示帖子。这些帖子*仍然*排在第一位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:14:57.377

获取`nth`帖子的最简单方法是执行以下操作：

```
global $posts;

// This gets your nth level post object.
if( isset( $posts[ $nth_post ] ) )
    echo $posts[ $nth_post ]->post_title; 
```

我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:58:14.703

您可以先使用 total_posts = wp_count_posts() 来统计帖子的数量。

然后，您必须运行“循环”并为每个帖子保留一个计数器，当该计数器达到 total_posts - N 时，执行您想要的操作：

伪代码：

```
total_posts = wp_count_posts();
count = 0;
while(have_posts()) {
   count++;
   if (count = total_posts - N) {
       // ACTION       
   }
   the_post();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:01:16.293

`get_template_part()`正如它所说的那样，它会获得一个位于您的主题文件夹中的模板。它接受的唯一参数是 slug 和名称（参见[WordPress codex](http://codex.wordpress.org/Function_Reference/get_template_part)）

如果我理解正确，您想每次都获取第三个帖子吗？最简单的方法是在模板文件中设置计数器和条件，可能是`loop-something.php`.

```
$i = 0;

if ( have_posts()): 

while (have_posts()) : the_post();

  if ($i % 3 == 0):
    // Do something different, this is the first column.
    // I propose:
    $column = 1;

  elseif ($i % 3 == 1):
    // Do something different, this is the second column.
    $column = 2;

  elseif ($i % 3 == 2):
    // Do something different, this is the third column.
    $column = 3;
  endif;

  echo '<div class="column-'.$column.'">';
  // the post
  echo '</div>';

  $i++;

endwhile;

else:

  get_template_part( 'no-results', 'archive' );

endif; 
```

# regex - Perl Regex，获取两个字符串之间的字符串

> ID：14776265
> 
> 赞同：1
> 
> 时间：2013-02-08T15:46:58.477
> 
> 标签：regex, perl

我是 Perl 的新手，并试图使用 Regex 在我知道该字符串中存在的两个标签之间获取一段字符串。我已经尝试了 stackoverflow 的各种答案，但似乎没有一个对我有用。这是我的例子...

所需的数据在 $info 变量中，我想从中获取有用的数据

```
my $info = "random text i do not want\n|BIRTH PLACE=Boston, MA\n|more unwanted random text"; 
```

上述字符串中的有用数据是`Boston, MA`. 我从字符串中删除了换行符`$info =~ s/\n//g;`。现在`$info`有了这个字符串`"random text i do not want|BIRTH PLACE=Boston, MA|more unwanted random text"`。我认为这样做可以帮助我轻松捕获所需的数据。

请帮助我获取所需的数据。我确信数据将始终`|BIRTH PLACE=`以`|`. 之前和之后的所有内容都是不需要的文本。如果已经回答了这样的问题，请指导我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:49:34.120

您可以搜索`/\|BIRTH PLACE=([^\|]+)\n\|/`, [^\|]+ 中的一个或多个，而不是替换它周围的所有内容`anything that is not a pipe`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:50:25.987

```
$info =~ m{\|BIRTH PLACE=(.*?)\|} or die "There is no data in \$info?!";
my $birth_place = $1; 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:00:36.473

您知道，实际上，这些换行符可能对您有所帮助。我会选择一个初始的正则表达式：

```
/^\|BIRTH PLACE=(.*)$/m 
```

使用多行修饰符 ( `m`) 匹配`^`行首和行`$`尾，而不是仅匹配字符串的首尾。哎呀，你甚至可以变得非常疯狂并匹配：

```
/(?<=^\|BIRTH PLACE=).+$/m 
```

要仅捕获您想要的信息，请使用lookbehind ( `(?<= ... )`) 断言它是出生地信息。

既然可以诅咒一次，为什么还要诅咒两次呢？

因此，在 perl 中：

```
if ($info =~ m/(?<=^\|BIRTH PLACE=).+$/m) {
    print "Born in $&.\n";
} else {
    print "From parts unknown";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T16:28:23.610

您可能已经从文件中读取了这些数据，这是一个糟糕的开始。你的程序应该是这样的

```
use strict;
use warnings;

use autodie;

open my $fh, '<', 'myfile';

my $pob;
while (<$fh>) {
  if (/BIRTH PLACE=(.+)/) {
    $pob = $1;
    last;
  }
}

print $pob; 
```

**输出**

```
Boston, MA 
```

# mysql - innodb_log_buffer_size 和 innodb_buffer_pool_size 之间的区别

> ID：14776266
> 
> 赞同：8
> 
> 时间：2013-02-08T15:47:01.260
> 
> 标签：mysql, innodb

mysql中innodb_log_buffer_size和innodb_buffer_pool_size的区别？是innodb_log_buffer_size给出的innodb_buffer_pool_size。innodb_log_buffer_size 和 innodb_buffer_pool_size 包含哪些数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T17:48:16.097

我找到了以下解释：

> 使日志缓冲区更大将节省磁盘 I/O。这个值应该是 32Mb。”

我希望这会对你有所帮助;) Saludos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-26T22:38:14.600

没有回答你的第二个直接问题。是innodb_log_buffer_size给出的innodb_buffer_pool_size。
有关此问题，请阅读 dev.mysql.com 上的可用文档。innodb_log_buffer_size 和 innodb_buffer_pool_size 包含哪些数据。

# xsd - jaxb xjc 创建 List <objects>而不是 List</objects>

> ID：14776267
> 
> 赞同：0
> 
> 时间：2013-02-08T15:47:02.353
> 
> 标签：xsd, jaxb, schema, bind, xjc

我有一个这样的xsd -

```
<xs:element name="teachers" minOccurs="0">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="teacher" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

当我使用 XJC 生成类绑定时，我看到老师的类型是 - List < Object > 而不是 List < String >

```
protected List<Object> teacher;
public List<Object> getTeacher() {
        if (teacher == null) {
            teacher = new ArrayList<Object>();
        }
        return this.teacher;
    } 
```

如何使它生成字符串列表而不是对象？任何帮助表示赞赏。

更新：使用 'vamsilp' 提供的解决方案 - 删除“teachers”元素上的“minOccurs”后，它工作得很好！XSD 是由 Jersey 从这段代码自动生成的：

```
@XmlElementWrapper(name = "teachers")
@XmlElement(name = "teacher")
public StringSet getTeachers() {
    return getData().getTeacherss(); 
```

我不确定如何删除“minOccurs”属性。我需要修改我的代码以忽略它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:06:20.397

首先，我只是不明白你是如何生成类的，而是它应该向你显示一个错误，说“'minOccurs' 不能出现在元素'元素'中”，因为你已经为你的全局/根元素“老师”声明了 minOccur 约束. 你不应该这样做，请参考[这个](http://www.w3.org/TR/2004/REC-xmlschema-0-20041028/#Globals)。尝试通过删除应该有效的约束来重新生成您的 JAXB 类

# javascript - YouTube Player API - 播放列表如何获取当前正在播放的视频

> ID：14776269
> 
> 赞同：3
> 
> 时间：2013-02-08T15:47:09.143
> 
> 标签：javascript, youtube-api

我正在使用 YouTube Player API Reference for iframe 的简单代码

```
<div id="player"></div>
<script>
    //Load player api asynchronously.
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var done = false;
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '327',
          width: '530',
          videoId: '_XaWYzsY920',
          playerVars: { 'autoplay': 1,'playlist':['Hzgzim5m7oU', 'QvZIYIVNGZ0']},
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }
    function onPlayerReady(evt) {
        evt.target.playVideo();
    }
    function onPlayerStateChange(evt) {
        console.log(evt.data);
        console.log(evt.target.getVideoUrl());
    }
</script> 
```

我想用 evt.data == 5 解决，但它从来没有被解雇过......

有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T17:27:09.870

在里面`onPlayerStateChange`抓取视频 URL，`evt.target.getVideoUrl()`然后使用正则表达式提取视频 ID：

```
function onPlayerStateChange(evt) {
    if (evt.data == YT.PlayerState.PLAYING) {
        var url = evt.target.getVideoUrl();
        // "http://www.youtube.com/watch?v=gzDS-Kfd5XQ&feature=..."
        var match = url.match(/[?&]v=([^&]+)/);
        // ["?v=gzDS-Kfd5XQ", "gzDS-Kfd5XQ"]
        var videoId = match[1];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-21T10:14:08.863

```
var videoId = evt.target.getVideoData().video_id 
```

# android - Android：OnTouch、MotionEvent.ACTION_MOVE 无法识别？

> ID：14776271
> 
> 赞同：29
> 
> 时间：2013-02-08T15:47:12.307
> 
> 标签：android, ontouchlistener, actionevent

这是我的代码，我想检测我的手指何时落下屏幕，所以当我触摸屏幕时，我检测到但当我`ACTION_DOWN`用手指顺着屏幕向下时，`ACTION_MOVE`无法识别，`ACTION_UP` 你知道为什么吗？

```
 float x=0;
protected void onCreate(Bundle savedInstanceState) {
        do things

        ImageView image2 = (ImageView) findViewById(R.id.imageView3);
        image2.setOnTouchListener(new OnTouchListener(){

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            if (arg1.getAction()==MotionEvent.ACTION_DOWN) {

                x=arg1.getX();
            }
            else {
                if (arg1.getAction()==MotionEvent.ACTION_MOVE){
                    if (arg1.getX()>x) {
                    do things
                    }
                }
                else {
                    if (arg1.getAction()==MotionEvent.ACTION_UP){
                        do things
                    }
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-02-08T15:59:55.120

如果您的`onTouch()`方法`false`响应初始的返回`ACTION_DOWN` `MotionEvent`，它将不会接收任何属于此特定手势的后续事件。相反，这些触摸事件将呈现给层次结构中的父级。

换一种说法，如果您在手势开始期间返回`false`( `onTouch()`the `ACTION_DOWN`)，它表示该方法不再希望看到任何手势，并且手势的事件应该发送给 parent `View`。

正如 markproxy 在下面的评论中指出的那样，`false`当s`MotionEvent`不是 an时返回`ACTION_DOWN`，例如 an`ACTION_MOVE`不会*阻止*当前手势中的后续`MotionEvent`s 呈现给`View`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-08T15:58:15.130

`MotionEvent.getAction()`返回的不仅仅是标志。尝试以下操作：

```
int action = arg1.getAction() & MotionEvent.ACTION_MASK;
if (action == MotionEvent.ACTION_MOVE) ... 
```

您也可以使用`MotionEvent.getActionMasked()`. 另请参阅[http://developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-08T16:14:35.130

几件事：

1) 您需要返回一个布尔值以显示您正在查看该事件。

这是一个非常简单的实现：

```
package com.test;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class TestProjActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final String TAG = "TEST_TAG";
        View v = findViewById(R.id.touchTest);
        v.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {

                    if (event.getAction()==MotionEvent.ACTION_DOWN) {

                        Log.e(TAG,"Down");
                        return true;
                    }

                    if (event.getAction()==MotionEvent.ACTION_MOVE){

                        Log.e(TAG,"Move");
                        return true;

                    }
                    if (event.getAction()==MotionEvent.ACTION_UP){

                        Log.e(TAG,"Up");
                        return true;
                    }

                    return false;
            }
        });
    }
} 
```

这是main.xml

::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/touchTest"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-30T09:47:24.267

有两种情况：

1) 如果您还设置了 OnClickListener() -> onTouch() 应该返回 false。

（如果 onTouch() 返回 true，则 OnClickListener() 将不起作用）

2) 如果你没有设置 OnClickListener() -> onTouch() 应该返回 true。

（如果 onTouch() 返回 false，则只调用 ACTION_DOWN）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-03T10:48:58.750

检查 onTouch() 方法的返回值。

它应该是真的，而不是假的。

```
return true; 
```

希望它会起作用。

# google-chrome - Chrome - 禁用网络安全 - 无法打开文件

> ID：14776281
> 
> 赞同：0
> 
> 时间：2013-02-08T15:47:39.473
> 
> 标签：google-chrome

当我通过 cmd 命令 -disable-web-security 打开 Chrome 时，它​​会打开新的空白 chrome 页面，其中写有您正在使用不受支持的命令行标志等...这很好！

但是当我尝试通过 chrome 打开 index.html 时，将显示此错误：Google Chrome 无响应。现在重新启动.... 那么如何打开任何带有禁用 chrome 的网络安全的文件？请帮忙 ！非常感谢您的帮助！

我尝试通过[本](http://www.samsungdforum.com/Guide/tut00024/index.html)教程连接平板电脑和三星智能电视。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:00:07.390

您是否尝试在本地访问文件（即，不是通过网络）？如果是这样，您可能还需要在通过命令行打开 chrome 时添加 --allow-file-access-from-files 标志作为参数。

此外，了解您使用的 Chrome 版本以及它运行的操作系统可能会有所帮助——如果我的建议最终没有帮助到您，您能否提供一下？

# javascript - 如何优化这些jquery函数？

> ID：14776284
> 
> 赞同：1
> 
> 时间：2013-02-08T15:47:50.533
> 
> 标签：javascript, jquery, optimization, user-experience, pagespeed

我正在开发一个 javascript 密集型用户界面应用程序。（至少它对我来说是密集的，这是我第一个严肃的 javascript 项目）。

每当 a`div`翻转或`mouseout`. 例如，有一些`divs`是可拖动的对象，因此当它们被`mouseover`编辑时，光标必须看起来准备好移动。但是我的界面太慢了，以至于我的老板认为我的代码不起作用，而事实上它确实如此，但它只是很慢，因此用户有时必须等待 2-3 秒才能使光标看起来像预期的那样，或者等待`div`看起来像预期的那样。只是一个例子。我的代码如下所示，由于我的公司对此拥有版权，因此我无法完全或正确地复制它，但只是为了让我清楚地了解我的工作方式：

```
$.fn.extend({
    mouseoverBox: function() {
    return this.each(function() {
        var $this = $(this);   
                if(!$this.hasClass('ready')) 
                {   if($this.hasClass('activated'))
                    {
                        $this.removeClass('activated');
                    }
                    $this.addClass('ready');
                }
                var img_id = $this.children('.theimg').attr('id');
                //someitem.children('somechildren').remove();
                //someitem.append(somemenu div)
                //$this.draggable();
                //$this.resizable();
                if($this.hasClass('unlocked'))
                {
                    $this.draggable( "option", "disabled", false );
                    $this.resizable( "option", "disabled", false );
                }
                $this.bindUnlock();
            });
     }
// end mouseoverBox
}); 
```

现在这只是 mouseoverBox 函数，它的触发方式类似于`myBox.mouseoverBox()`. 在鼠标悬停事件上。然后当然是调用这个插件，`bindUnlock()`它具有简单的操作，例如更改类和向菜单添加类。此外，在任何鼠标悬停之前，通常都会出现`mouseout`另一个`div`...所以你可以看到有很多事情正在发生。不过，任何时候通常不会有超过 10 个互动`divs`。如何优化这种代码？我没有给出每一个具体的信息，但相信我，大部分相关内容几乎就是这样。

我已经压缩了我的 javascript、css、图像和字体。我还尝试使用 Yahoo Compressor 进行压缩，但它实际上使我的一个文件膨胀而不是压缩它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:52:39.340

对于外观和感觉，为什么不在 CSS 中使用悬停伪类来执行此操作，例如：

```
div.draggable:hover { 
    background:yellow;
    cursor:ponter;
} 
```

这样一来，您所有的类更改代码都可能被削减。

# sql - Detecting SQL Server Utilization with a query

> ID：14776291
> 
> 赞同：11
> 
> 时间：2013-02-08T15:48:35.270
> 
> 标签：sql, sql-server, database, sql-server-2008, rdbms

My current project will send queries to an sql server constantly and It may use 100% of the memory or CPU.

*   How can I check if the server is nearing full utilization in a stored procedure so that I can decide whether to execute the queries or not or save some settings in a table so that the following queries can know the workload is high and decide what to do

*   If not, how can I prevent SQL server to reach full utilization?

More information about the case: Right now I know our current test server can process 40-50 queries per second (one specific stored procedure). And now we'll decide how many queries are sent to the server every second. If we set the amount even 1 higher than the expected, in the long run, the queries will eventually fill the virtual memory and out client will have to restart their sql server instance periodically.

Expected Results (For bounty hunters):

```
@memory_usage float, @cpu_usage float; /* in percentage */ 
```

Any ideas are welcomed. Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T15:51:54.917

这样的事情对你有帮助吗？

[按 SQL Server 实例监视内存使用情况的脚本](http://blogs.msdn.com/b/sqlsakthi/archive/2011/02/28/t-sql-script-to-monitor-memory-usage-by-sql-server-instance.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T22:35:12.413

对于 SQL Server 的任何此类密集使用和对其进行微调的努力，我假设（虚拟）机器专用于 SQL Server。

话虽如此，获取机器当前使用的 CPU 和内存百分比应该可以解决问题：

```
CREATE PROCEDURE dbo.p_GetSystemUsage
    @cpuUsage float out,   -- % CPU usage
    @memoryUsage float out -- % memory usage
AS
BEGIN
    SET NOCOUNT ON;

    /*
     * % CPU usage
     */

    SELECT TOP 1
        @cpuUsage = 100 - r.SystemIdle
    FROM (
        SELECT
            rx.record.value('(./Record/@id)[1]', 'int') AS record_id,
            rx.record.value('(./Record/SchedulerMonitorEvent/SystemHealth/SystemIdle)[1]', 'int') AS SystemIdle
        FROM (
            SELECT CONVERT(XML, record) AS record
            FROM sys.dm_os_ring_buffers
            WHERE
                ring_buffer_type = N'RING_BUFFER_SCHEDULER_MONITOR' AND
                record LIKE '%<SystemHealth>%') AS rx
        ) AS r
    ORDER BY r.record_id DESC

    /*
     * % memory usage
     */

    SELECT
        @memoryUsage =
            (((m.total_physical_memory_kb - m.available_physical_memory_kb) /
              convert(float, m.total_physical_memory_kb)) *
             100)
    FROM sys.dm_os_sys_memory m
END 
```

需要注意的几点：

*   `sys.dm_os_sys_memory`是机器物理内存使用的一个很好的来源。它提供了有关机器页面文件使用情况的类似信息。以我的经验，它的信息经常变化——在一秒钟内对其进行多次查询会产生不同的结果。
*   `sys.dm_os_ring_buffers`是机器 CPU 使用率的一个很好的来源，但它的更新频率并不高 - 从我所看到的每一分钟。如果您需要更多实时信息，也许您可​​以影响这一点。
*   中的 CPU-usage 值`sys.dm_os_ring_buffers`是一个整数，但我根据你的规范做`@cpuUsage`了一个。`float`由于存储过程使用两个`float`参数，因此您可以重构 CPU 使用率确定以提供小数部分而不更改其调用者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T09:15:52.527

不确定如何在 SQL 中执行此操作，但您始终可以在 C# 中创建一个函数，然后使用 CRL 将其作为存储过程在您的 SQL Server 中可用。

[http://msdn.microsoft.com/en-us/library/ms131094.aspx](http://msdn.microsoft.com/en-us/library/ms131094.aspx)

# asp.net-mvc - OpenId Authentication through different web sites in MVC

> ID：14776292
> 
> 赞同：0
> 
> 时间：2013-02-08T15:48:37.553
> 
> 标签：asp.net-mvc, openid, dotnetopenauth

I have to develop a web site that implements a custom authentication. No problem so far, I should use the Membership provider and so on. Now comes the problems.... I have to create other web site, accessible from the main one without asking for user credential. This site has to do the login silently or show again the login form if the user is not authenticated.

I think I have to use DotNetOpenAuth and OpenId authentication in some way, but I've spent some days searching the internet without find any starting point. All sample uses Google or Facebook but is not my case....

Basically....

1.  User log in in to main web site.
2.  click a link to an external web site
3.  the external web site "recognize" that the user is already logged and give access

I'm really confused about OpenId and hope that someone can give me some hints.

Any help will be really appreciated

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:29:29.880

DotNetOpenAuth 可以提供您需要的 OpenID Provider 功能。[Sourceforge 提供了](http://sf.net/projects/dnoa)Provider示例。查找 OpenIdProviderMvc 示例。

考虑到您想要的是两个相关网站之间的 SSO 登录体验，我建议您研究名称中带有“SSO”的 DNOA 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:21:38.150

如果您有灵活性，我还建议您研究 MVC4，它内置了对 ClaimsIdentity 的支持，可以使用 OpenId、OAuth、单点登录 (SSO) 和联合身份验证等方式为外部身份验证提供更好的支持。我正在尝试在我的应用程序中实现这一点，所以我还在学习。我还在尝试研究 Windows 身份框架 (WIF) 但我仍然不确定它在所有这些东西中的作用。这不是一个答案，因为它是一种新的方法，我认为你也可以从中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:55:34.683

听起来您想成为 OpenID 提供者 ( [http://openid.net/add-openid/become-a-provider/](http://openid.net/add-openid/become-a-provider/) )。搜索 OpenID 提供程序库。实现 OpenID 提供程序后，每个外部网站都需要使用 OpenID 依赖方库来实现 OpenID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:57:38.087

我不确定您的项目规模或范​​围。如果它只有两个网站并且流量很少，那么实施身份提供者（OpenID 提供者）就有点过头了。相反，您可以研究一个简单的方法，例如这个[http://www.youtube.com/watch?v=1u7-sBadfW4](http://www.youtube.com/watch?v=1u7-sBadfW4)。

但是，如果这不仅仅是两个网站，那么坚持开放标准总是更好，因为这会给您带来安全性、可扩展性、互操作性等优势。但是仍然有免费和开源的 openID 提供商可以下载并开始工作（[http://wso2.com/products/identity-server/](http://wso2.com/products/identity-server/)）

# r - 如何在不使用 Base R 循环的情况下为每个人添加趋势线？

> ID：14776299
> 
> 赞同：1
> 
> 时间：2013-02-08T15:48:55.850
> 
> 标签：r, plot, trend

我已经修改了一些非常好的代码（见下文 - 谢谢`@Ben-Bolker`）来创建一个情节（见下文），`mapply`这样我就不必使用循环了。我想使用类似的技术将每个人的趋势线添加到现有绘图中。有什么建议么？

![在此处输入图像描述](../Images/ded42273174e3590f08c80390cee2682.png)

类似于下图（下面的代码）：

![在此处输入图像描述](../Images/8286cb3f8da0162166270534282c05f8.png)

```
## sample data ##
WW_Wing_SI <- structure(list(Individual = c("WW_08A_08", "WW_08A_08", "WW_08A_08", 
"WW_08A_08", "WW_08A_08", "WW_08A_08", "WW_08A_08", "WW_08A_08", 
"WW_08A_08", "WW_08B_02", "WW_08B_02", "WW_08B_02", "WW_08B_02", 
"WW_08B_02", "WW_08B_02", "WW_08B_02", "WW_08B_02", "WW_08B_02", 
"WW_08G_01", "WW_08G_01", "WW_08G_01", "WW_08G_01", "WW_08G_01", 
"WW_08G_01", "WW_08G_01", "WW_08G_01", "WW_08G_01", "WW_08G_05", 
"WW_08G_05", "WW_08G_05", "WW_08G_05", "WW_08G_05", "WW_08G_05", 
"WW_08G_05", "WW_08G_05", "WW_08G_05"), Feather = c("1", "2", 
"3", "4", "5", "6", "7", "8", "9", "1", "2", "3", "4", "5", "6", 
"7", "8", "9", "1", "2", "3", "4", "5", "6", "7", "8", "9", "1", 
"2", "3", "4", "5", "6", "7", "8", "9"), Delta15N = c(8.26, 8.1, 
8.07, 8.7, 8.98, 9.44, 7.84, 7.26, 6.05, 6.9, 6.73, 6.97, 6.67, 
6.76, 6.59, 6.58, 6.42, 6.3, 11.64, 11.83, 11.66, 11.3, 11.32, 
11.29, 10.91, 10.77, 11.4, 7.7, 7.8, 8.29, 9.65, 10.25, 13.67, 
14.66, 13.48, 13.76)), .Names = c("Individual", "Feather", "Delta15N"
), row.names = c(NA, 36L), class = "data.frame")

## plot delta15N by feather position for each individual ##
xvals <- tapply(WW_Wing_SI$Feather, WW_Wing_SI$Individual,function(x) return(x))
yvals <- tapply(WW_Wing_SI$Delta15N,WW_Wing_SI$Individual, function(x) return(x))
ID <- unique(WW_Wing_SI$Individual)

par(oma = c(2, 2, 0, 0), mar = c(4, 5, 2, 2), pty = "s")
plot(1:max(unlist(xvals)),ylim=(c(floor(min(unlist(yvals))),ceiling(max(unlist(yvals))))),type="n", bty = "n", 
     cex.lab = 1.75, cex.axis = 1.75, main = NULL, axes = F,
     xlab="Feather Position", ylab=expression(paste(delta ^{15},"N")))
axis(1, at = seq(1, 9, by = 1), labels = T, tick = TRUE, cex.axis = 1.25, cex.lab = 1.25, lwd = 1.25, lwd.ticks = 1.25)
axis(2, at = seq(floor(min(unlist(yvals))), ceiling(max(unlist(yvals))), by = 1), labels = T, tick = TRUE, cex.axis = 1.25, cex.lab = 1.25, lwd = 1.25, lwd.ticks = 1.25)
mapply(lines,xvals, yvals, col = c(1:nrow(xvals)), pch = c(1:nrow(xvals)), type = "o", lty = c(1:nrow(xvals)))

legend("bottom", ID, pch = c(1:nrow(xvals)), col = c(1:nrow(xvals)), cex = 1, pt.bg = c(1:nrow(xvals)), horiz=TRUE, bty = "n")

## Code to accomplish using ggplot ##
WW_Wing_SI$Feather <- as.numeric(WW_Wing_SI$Feather)
library(ggplot2)
theme_set(theme_bw())
ggplot(WW_Wing_SI,aes(Feather,Delta15N,fill=Individual,colour=Individual))+
  geom_line()+geom_smooth(method="lm",formula=y~poly(x,2),linetype=2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:05:15.037

这是一个建议。首先将线性模型拟合到您的数据（使用`lm`）。然后使用这些拟合来绘制线条：

```
fits <- mapply(function(x, y) lm(y ~ as.numeric(x)),
               xvals, yvals, SIMPLIFY = FALSE)
mapply(abline, fits, col = seq_along(xvals)) 
```

![在此处输入图像描述](../Images/70cea31b5cf0f0b54aff99efc81f18e9.png)

# tcp - tcpreplay 和时间戳

> ID：14776308
> 
> 赞同：0
> 
> 时间：2013-02-08T15:49:32.467
> 
> 标签：tcp, udp, timestamp, ip, packets

我想用来`tcpreplay`重放由 TCP 和 UPD 数据包组成的数据包跟踪。

有没有办法为每个**传出数据包附加****时间戳**，以便在收到（并转储）所有回复后计算**往返时间？**

 ****否则，我应该使用哪个其他工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:16:37.137

如果您同时使用 tcpdump 或 Wireshark 嗅探流量，它将在输出和回复时为每个数据包添加时间戳。

只是一个警告，tcpreplay 通常不支持将 TCP 流重播到服务器，因为它不跟踪 TCP 流的状态。通常，您将得到的只是回复的重置数据包。UDP一般应该没问题。ICMP 经常有效。如果您想了解更多信息，请务必查看 Tcpreplay 常见问题解答：

[http://tcpreplay.synfin.net/wiki/FAQ#Doestcpreplaysupportsendingtraffictoaserver](http://tcpreplay.synfin.net/wiki/FAQ#Doestcpreplaysupportsendingtraffictoaserver)****

# joomla - 如何在模块或文章中提供注册表？

> ID：14776310
> 
> 赞同：0
> 
> 时间：2013-02-08T15:49:35.153
> 
> 标签：joomla, joomla2.5

我想制作一个自定义登录页面，并在其上放置注册表单。但是，由于注册表来自一个组件，我不能这样做。

我已经尝试过插件包含组件扩展，这很好，但它不适用于我的网站的 SSL 版本。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:45:24.527

您可以创建一个单独的登录页面，但这会使生活变得相当困难。导入文件，更改 .htaccess 等。

我建议您创建一个菜单项并将类型设置为**User-Registration**。保存它，然后将其设置为默认页面。我截取了一个截图来帮助你。将其设置为默认意味着它将基本上成为主页。

![截屏](../Images/1227398722dfad4d6c1934993e57567b.png)

希望这可以帮助

# r - 如何在 R 中删除和保留 txt 文件的某些列？

> ID：14776311
> 
> 赞同：0
> 
> 时间：2013-02-08T15:49:42.560
> 
> 标签：r, file, calculated-columns

我有一个 txt 格式的文件，由**tabs**分隔，这是一个摘录：

```
id      1     2     4     15      18       20
1_at   100   200   89    189     299      788
2_at     8    78   33     89      90       99
3_xt   300    45   53    234      89       34
4_dx    49    34   88      8       9       15 
```

现在我有一个文件，也是 txt 格式，并用**逗号分隔**以下数据：

```
18,1,4,20 
```

因此，基于该文件，我想读取它并仅从第一个表格数据中提取列，以便可以存储在另一个文件中，如下所示：

**（重要：我需要根据csv文件保持要存储的数据的顺序）**

```
id      18       1     4      20
1_at   299     100    89     788
2_at    90       8    33      99
3_xt    89     300    53      34
4_dx     9      49    88      15 
```

如果我要提取的数据是行，那会更容易，因为我可以逐行读取它并与我的 txt 文件进行比较（我已经这样做了），但我被这个列的东西困住了。

我想知道是否有任何方法可以使用某些子索引函数直接提取列？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:27:01.423

如果您不想读取整个文件然后过滤，这是一种做您想做的事情的方法。如果您事先不知道每列的类别，这种方法也可以使用。~~此示例假设输入文件的列名不以数字开头，因为它在 R 中是不允许的。~~它也可以使用数字作为列名，但要小心，因为它可能在其他操作中失败。

```
> txt = 'id      1     2     4     15      18       20
+ 1_at   100   200   89    189     299      788
+ 2_at     8    78   33     89      90       99
+ 3_xt   300    45   53    234      89       34
+ 4_dx    49    34   88      8       9       15'
> 
> df <- read.table(textConnection(txt), header=T, nrows=1, check.names=F)
> 
> df
    id   1   2  4  15  18  20
1 1_at 100 200 89 189 299 788
> 
> #Lets say f is the column filter you read from other file
> f <- c("id", "18", "1", "4", "20")
> 
> f
[1] "id" "18" "1"  "4"  "20"
> 
> #Get Column Classes
> CC <- sapply(df, class)
> CC
       id         1         2         4        15        18        20 
 "factor" "integer" "integer" "integer" "integer" "integer" "integer" 
> #Specify columns that you don't want to read as "NULL" 
> CC[!names(CC) %in% f] <- "NULL"
> CC
       id         1         2         4        15        18        20 
 "factor" "integer"    "NULL" "integer"    "NULL" "integer" "integer" 
> 
> #Read whole data frame again
> df <- read.table(textConnection(txt), header=T, colClasses=CC, check.names=F)
> 
> #get columns in desired order
> df[,f]
    id  18   1  4  20
1 1_at 299 100 89 788
2 2_at  90   8 33  99
3 3_xt  89 300 53  34
4 4_dx   9  49 88  15 
```

# python - Can I convert a django video upload from a form using ffmpeg before storing the video?

> ID：14776314
> 
> 赞同：2
> 
> 时间：2013-02-08T15:49:51.423
> 
> 标签：python, heroku, amazon-s3, ffmpeg, django-celery

I've been stuck for weeks trying to use ffmpeg to convert user uploaded videos to flv. I use heroku to host my website, and store my static and media files on amazon S3 with s3boto. The initial video file will upload fine, however when I retrieve the video and run a celery task (in the same view where the initial video file is uploaded), the new file won't store on S3\. I've been trying to get this to work for over a month, with no luck, and really no good resources available for learning how to do this, so I figure maybe if I can get the ffmpeg task to run before storing the video I may be able to get it to work. Unfortunately I'm still not a very advanced at python (or django), so I don't even know if/how this is possible. Anyone have any ideas? I am willing to use any solution at this point no matter how ugly, as long as it successfully takes video uploads and converts to flv using ffmpeg, with the resulting file being stored on S3\. It doesn't seem that my situation is very common, because no matter where I look, I cannot find a solution that explains what I should be trying to do. Therefore I will be very appreciative of any guidance. Thanks. My relevant code follows:

```
#models.py
def content_file_name(instance, filename):
    ext = filename.split('.')[-1]
    new_file_name = "remove%s.%s" % (uuid.uuid4(), ext)
    return '/'.join(['videos', instance.teacher.username, new_file_name])

class BroadcastUpload(models.Model):
    title = models.CharField(max_length=50, verbose_name=_('Title'))
    description = models.TextField(max_length=100, verbose_name=_('Description'))
    teacher = models.ForeignKey(User, null=True, blank=True, related_name='teacher')
    created_date = models.DateTimeField(auto_now_add=True)
    video_upload = models.FileField(upload_to=content_file_name)
    flvfilename = models.CharField(max_length=100, null=True, blank=True)
    videothumbnail = models.CharField(max_length=100, null=True, blank=True)

#tasks.py
@task(name='celeryfiles.tasks.convert_flv')
def convert_flv(video_id):
    video = BroadcastUpload.objects.get(pk=video_id)
    print "ID: %s" % video.id
    id = video.id
    print "VIDEO NAME: %s" % video.video_upload.name
    teacher = video.teacher
    print "TEACHER: %s" % teacher
    filename = video.video_upload
    sourcefile = "%s%s" % (settings.MEDIA_URL, filename)
    vidfilename = "%s_%s.flv" % (teacher, video.id)
    targetfile = "%svideos/flv/%s" % (settings.MEDIA_URL, vidfilename)
    ffmpeg = "ffmpeg -i %s %s" % (sourcefile, vidfilename)
    try:
        ffmpegresult = subprocess.call(ffmpeg)
        #also tried separately with following line:
        #ffmpegresult = commands.getoutput(ffmpeg)
        print "---------------FFMPEG---------------"
        print "FFMPEGRESULT: %s" % ffmpegresult
    except Exception as e:
        ffmpegresult = None
        print("Failed to convert video file %s to %s" % (sourcefile, targetfile))
        print(traceback.format_exc())
    video.flvfilename = vidfilename
    video.save()

@task(name='celeryfiles.tasks.ffmpeg_image')        
def ffmpeg_image(video_id):
    video = BroadcastUpload.objects.get(pk=video_id)
    print "ID: %s" %video.id
    id = video.id
    print "VIDEO NAME: %s" % video.video_upload.name
    teacher = video.teacher
    print "TEACHER: %s" % teacher
    filename = video.video_upload
    sourcefile = "%s%s" % (settings.MEDIA_URL, filename)
    imagefilename = "%s_%s.png" % (teacher, video.id)
    thumbnailfilename = "%svideos/flv/%s" % (settings.MEDIA_URL, thumbnailfilename)
    grabimage = "ffmpeg -y -i %s -vframes 1 -ss 00:00:02 -an -vcodec png -f rawvideo -s 320x240 %s" % (sourcefile, thumbnailfilename)
    try:        
         videothumbnail = subprocess.call(grabimage)
         #also tried separately following line:
         #videothumbnail = commands.getoutput(grabimage)
         print "---------------IMAGE---------------"
         print "VIDEOTHUMBNAIL: %s" % videothumbnail
    except Exception as e:
         videothumbnail = None
         print("Failed to convert video file %s to %s" % (sourcefile, thumbnailfilename))
         print(traceback.format_exc())
    video.videothumbnail = imagefilename
    video.save()

#views.py
def upload_broadcast(request):
    if request.method == 'POST':
        form = BroadcastUploadForm(request.POST, request.FILES)
        if form.is_valid():
            upload=form.save()
            video_id = upload.id
            image_grab = ffmpeg_image.delay(video_id)
            video_conversion = convert_flv.delay(video_id)
            return HttpResponseRedirect('/current_classes/')
    else:
        form = BroadcastUploadForm(initial={'teacher': request.user,})
    return render_to_response('videos/create_video.html', {'form': form,}, context_instance=RequestContext(request))

#settings.py
DEFAULT_FILE_STORAGE = 'myapp.s3utils.MediaRootS3BotoStorage'
DEFAULT_S3_PATH = "media"
STATICFILES_STORAGE = 'myapp.s3utils.StaticRootS3BotoStorage'
STATIC_S3_PATH = "static"
AWS_STORAGE_BUCKET_NAME = 'my_bucket'
CLOUDFRONT_DOMAIN = 'domain.cloudfront.net'
AWS_ACCESS_KEY_ID = 'MY_KEY_ID'
AWS_SECRET_ACCESS_KEY = 'MY_SECRET_KEY'
MEDIA_ROOT = '/%s/' % DEFAULT_S3_PATH
MEDIA_URL = 'http://%s/%s/' % (CLOUDFRONT_DOMAIN, DEFAULT_S3_PATH)
...

#s3utils.py
from storages.backends.s3boto import S3BotoStorage
from django.utils.functional import SimpleLazyObject

StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')
MediaRootS3BotoStorage  = lambda: S3BotoStorage(location='media') 
```

I can add any other info if needed to help me solve my problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T15:28:11.730

为了将 subprocess.call 与包含所有参数的字符串一起使用，您需要添加[shell=True](https://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)：

```
ffmpegresult = subprocess.call(ffmpeg, shell=True)
...
videothumbnail = subprocess.call(grabimage, shell=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T10:24:21.630

我已经对您的代码进行了一些修改，现在它正在运行。一些问题：

*   我已经将任务的调用放在模型的保存方法中。如果你愿意，你可以把它放在视图中，就像你做的那样。
*   我的解决方案是转码为临时文件，然后将其上传到 AWS S3。

这是代码：

```
from django.contrib.auth.models import User

def content_file_name(instance, filename):
    ext = filename.split('.')[-1]
    new_file_name = "remove%s.%s" % (uuid.uuid4(), ext)
    return '/'.join(['videos', instance.teacher.username, new_file_name])

class BroadcastUpload(models.Model):
    title = models.CharField(max_length=50, verbose_name=_('Title'))
    description = models.TextField(max_length=100, verbose_name=_('Description'))
    teacher = models.ForeignKey(User, null=True, blank=True, related_name='teacher')
    created_date = models.DateTimeField(auto_now_add=True)
    video_upload = models.FileField(upload_to=content_file_name)
    #flvfilename = models.CharField(max_length=100, null=True, blank=True)
    video_flv = models.FileField(upload_to='flv', blank=True)
    #videothumbnail = models.CharField(max_length=100, null=True, blank=True)
    video_thumbnail = models.FileField(upload_to='thumbs', blank=True)

    def __unicode__(self):
        return u'%s - %s' % (self.title, self.teacher)

    def save(self, *args, **kwargs):
        # optional parameter to indicate whether perform
        # conversion or not. Defaults to True
        do_conversion = kwargs.pop('do_conversion', True)

        # do something only when the entry is created
        if not self.pk:
            super(BroadcastUpload, self).save(*args, **kwargs)

        # do something every time the entry is updated
        if do_conversion:
            ffmpeg_image.delay(self.pk)
            convert_flv.delay(self.pk)

        # then call the parent save:
        super(BroadcastUpload, self).save(*args, **kwargs)

from django.core.files.uploadedfile import SimpleUploadedFile
import tempfile

@task
def convert_flv(video_id):
    video = BroadcastUpload.objects.get(pk=video_id)
    print "ID: %s" % video.id
    id = video.id
    print "VIDEO NAME: %s" % video.video_upload.name
    teacher = video.teacher
    print "TEACHER: %s" % teacher
    filename = video.video_upload
    #sourcefile = "%s%s" % (settings.MEDIA_URL, filename)
    sourcefile = video.video_upload.url
    # ffmpeg cannot deal with https?
    sourcefile = sourcefile.replace("https","http")
    print "sourcefile: %s" % sourcefile

    # temporary output image
    OUTPUT_VIDEO_EXT = 'flv'
    OUTPUT_VIDEO_CONTENT_TYPE = 'video/flv'    
    f_out = tempfile.NamedTemporaryFile(suffix=".%s"%OUTPUT_VIDEO_EXT, delete=False)
    tmp_output_video = f_out.name

    #ffmpeg = "ffmpeg -i '%s' -qscale 0 -ar 44100 '%s'" % (sourcefile, vidfilename)
    ffmpeg = "ffmpeg -y -i '%s' -qscale 0 -ar 44100 '%s'" % (sourcefile, tmp_output_video)
    print "convert_flv: %s" % ffmpeg
    try:
        ffmpegresult = subprocess.call(ffmpeg, shell=True)
        #also tried separately with following line:
        #ffmpegresult = commands.getoutput(ffmpeg)
        print "---------------FFMPEG---------------"
        print "FFMPEGRESULT: %s" % ffmpegresult
    except Exception as e:
        ffmpegresult = None
        #print("Failed to convert video file %s to %s" % (sourcefile, targetfile))
        print("Failed to convert video file %s to %s" % (sourcefile, tmp_output_video))
        #print(traceback.format_exc())
        print "Error: %s" % e

    #vidfilename = "%s_%s.flv" % (teacher, video.id)
    vidfilename = "%s_%s.%s" % (teacher, video.id, OUTPUT_VIDEO_EXT)
    #targetfile = "%svideos/flv/%s" % (settings.MEDIA_URL, vidfilename)

    # prepare an object with the generated temporary image
    suf = SimpleUploadedFile( 
                             vidfilename,
                             f_out.read(),
                             content_type=OUTPUT_VIDEO_CONTENT_TYPE
                             )

    # upload converted video to S3 and set the name.
    # save set to False to avoid infinite loop
    video.video_flv.save(
                                vidfilename,
                                suf,
                                save=False 
                                )

    # delete temporary output file
    print "[convert_flv] removing temporary file: %s" % tmp_output_video
    os.remove(tmp_output_video)

    #video.flvfilename = vidfilename

    # add do_conversion=False to avoid infinite loop.
    # update_fields is needed in order to not delete video_thumbnail
    # if it did not exist when starting the task
    video.save(do_conversion=False, update_fields=['video_flv'])

@task       
def ffmpeg_image(video_id):
    video = BroadcastUpload.objects.get(pk=video_id)
    print "ID: %s" %video.id
    id = video.id
    print "VIDEO NAME: %s" % video.video_upload.name
    teacher = video.teacher
    print "TEACHER: %s" % teacher
    filename = video.video_upload
    #sourcefile = "%s%s" % (settings.MEDIA_URL, filename)
    sourcefile = video.video_upload.url
    # ffmpeg cannot deal with https?
    sourcefile = sourcefile.replace("https","http")

    # temporary output image
    OUTPUT_IMAGE_EXT = 'png'
    OUTPUT_IMAGE_CONTENT_TYPE = 'image/png'    
    f_out = tempfile.NamedTemporaryFile(suffix=".%s"%OUTPUT_IMAGE_EXT, delete=False)
    tmp_output_image = f_out.name

    #grabimage = "ffmpeg -y -i '%s' -vframes 1 -ss 00:00:02 -an -vcodec png -f rawvideo -s 320x240 '%s'" % (sourcefile, thumbnailfilename)
    grabimage = "ffmpeg -y -i '%s' -vframes 1 -ss 00:00:02 -an -vcodec png -f rawvideo -s 320x240 '%s'" % (sourcefile, tmp_output_image)
    print "ffmpeg_image: %s" % grabimage
    try:        
         videothumbnail = subprocess.call(grabimage, shell=True)
         #also tried separately following line:
         #videothumbnail = commands.getoutput(grabimage)
         print "---------------IMAGE---------------"
         print "VIDEOTHUMBNAIL: %s" % videothumbnail
    except Exception as e:
         videothumbnail = None
         #print("Failed to extract thumbnail from %s to %s" % (sourcefile, thumbnailfilename))
         print("Failed to extract thumbnail from %s to %s" % (sourcefile, tmp_output_image))
         #print(traceback.format_exc())
         print "Error: %s" % e

    #imagefilename = "%s_%s.png" % (teacher, video.id)
    imagefilename = "%s_%s.%s" % (teacher, video.id, OUTPUT_IMAGE_EXT)
    #thumbnailfilename = "%svideos/flv/%s" % (settings.MEDIA_URL, thumbnailfilename)
    #thumbnailfilename = 'thumbnail_image.png'

    # prepare an object with the generated temporary image
    suf = SimpleUploadedFile( 
                             imagefilename,
                             f_out.read(),
                             content_type=OUTPUT_IMAGE_CONTENT_TYPE
                             )

    # upload converted image to S3 and set the name.
    # save set to False to avoid infinite loop

    video.video_thumbnail.save(
                                imagefilename,
                                suf,
                                save=False 
                                )

    # delete temporary output file
    print "[ffmpeg_image] removing temporary file: %s" % tmp_output_image
    os.remove(tmp_output_image)

    #video.videothumbnail = imagefilename

    # add do_conversion=False to avoid infinite loop
    video.save(do_conversion=False, update_fields=['video_thumbnail']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T20:00:21.807

嘿，你犯了一个简单的错误

而不是使用 settings.Media_url 使用 media_root

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T00:19:08.853

不确定您是否会从类似的云场景中获得帮助，该场景涉及上传到云（parse.com）的媒体文件，这些文件在到达时需要 ffmpeg 进程，并将输出（.mp4）写回云（通过 Curl 解析）。

请参阅当前在 Heroku WEB 进程中运行的[粘贴 shellscript](http://pastebin.com/eXkZLY4F)，该进程可以使用 CLI 调用脚本。

如果您可以对其进行调整，以便 shellscript 在某个进程中运行，该进程具有对输入的 http 访问权限和一个可以写入临时文件的文件系统，并且如果您可以 CURL -X POST 来自 tmp FS 的 ffmpeg.output 回 S3，那么它可能对你有用。

# python - 找到标记化句子的确切位置

> ID：14776317
> 
> 赞同：4
> 
> 时间：2013-02-08T15:49:56.787
> 
> 标签：python, tokenize, nltk

我想提取文本句子，但我需要结果的确切位置。NLTK 中的当前实现`tokenize.sent_tokenize`不返回提取句子的位置，所以我尝试了这样的事情：

```
offset, length = 0, 0
for sentence in tokenize.sent_tokenize(text):
    length = len(sentence)
    yield sentence, offset, length
    offset += length 
```

但它不会返回句子的确切位置，因为`sent_tokenize`在结果句子边界之外删除了一些书写字符（例如换行符、额外空格和...）。我不想使用简单的正则表达式模式来拆分句子，我知道在这种情况下这个问题是微不足道的。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T17:29:04.353

您可以[`PunktSentenceTokenizer`](http://nltk.org/api/nltk.tokenize.html#nltk.tokenize.punkt.PunktSentenceTokenizer)直接使用（它用于实现`sent_tokenize()`）：

```
from nltk.tokenize.punkt import PunktSentenceTokenizer

text = 'Rabbit say to itself "Oh dear! Oh dear! I shall be too late!"'
for start, end in PunktSentenceTokenizer().span_tokenize(text):
    length = end - start
    print buffer(text, start, length), start, length 
```

如果您不介意复制每个句子，您可以使用`text[start:end]`而不是。`buffer(text, start, end - start)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:56:02.650

这并不难，这是一个简单的解决方案：

```
offset, length = 0, 0
for sentence in tokenize.sent_tokenize(text):
    # fix ignored characters
    while text[offset] != sentence[0]:
        offset += 1

    length = len(sentence)
    yield sentence, offset, length
    offset += length 
```

# clojure - Clojure中的平方和

> ID：14776319
> 
> 赞同：2
> 
> 时间：2013-02-08T15:50:04.700
> 
> 标签：clojure, lisp

我必须对 Clojure 语言做一个简短的介绍，在其中我还必须提供简单任务的解决方案：**输入一个整数 n 并输出总和：1+2^2+3^2+...+n ^2。使用输入验证 n 为正。**

我以前使用 Lisp 方言或 Java 的 xp 为零，我发现这种具有挑战性。我离我有多远？（猜测很多）：

```
(defn sum_of_squares [n]
(if (> n 0)
    (def sum 0)
    (dotimes [n]
        (+ sum (* n n))))) 
```

如您所见，我不知道发生了什么。我应该如何实际提示用户输入**n**的值，然后再**打印**总和？另外，整个**(+ sum (* nn)**表达式应该存储它的结果，在这个过程中更新 sum？

也许有很多更简单的方法可以解决这个问题，所以请随时向我展示:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:58:39.937

好吧，这不是真正适合这些问题的地方，但这是一个 Clojure 问题，我无法抗拒自己，让我试一试：

```
(defn sum-of-squares [n] (reduce (fn [memo x] (+ memo (* x x))) (range (inc n)))) 
```

此外，当您处理函数式语言时，请考虑不变性。不要完成[1]。初始化某些内容后，除非考虑到线程安全，否则不要尝试更改它。Clojure 使用 refs、atoms 让这一切变得简单。一个非常相关的视频是 Rich Hickey 的 - “Simple Made Easy”[1] 关于同一主题的演讲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:52:14.813

这是一个简单的功能解决方案：

```
(defn sum-of-squares [n] 
  (reduce + (map #(* % %) (range 1 (inc n))))) 
```

从内到外阅读以了解其工作原理：

*   取`range`从 1 到 n （`(inc n)`用作上限，因为您想包含 n 本身）
*   `map`一个函数`#(* % %)`，它只是一个与其参数平方的匿名函数。这具有将序列中的所有数字平方的效果。
*   `reduce`序列与`+`- 即将所有的正方形加在一起得到你的结果。

# python - Deploying Django/CPython with Maven

> ID：14776321
> 
> 赞同：2
> 
> 时间：2013-02-08T15:50:07.900
> 
> 标签：python, django, maven, continuous-integration

I work in a Java/PHP shop (mainly), and a few Python projects are being pushed in this shop, using Python (CPython 2.7.2) with Django (1.4.3). For the [Continuous Integration](http://en.wikipedia.org/wiki/Continuous_integration), we use Maven (along with other tools).

I am looking for successful examples of integrations of Django projects with Maven. By successful, I mean those that give more powers (for releasing, packaging, build process) than burdens (long process, no immediate results of Python methods, like no compiling compared to Java). I am also looking for any documentation on the subject.

So far, I only find this [serie of blog posts](http://www.shiningpanda.com/blog/2012/04/25/python-java-unified-build-process-14/) on how to integrate Python with Maven, which explains on how to integrate a python package development process on Maven. I am looking for similar example on a more specific example, ie, Django.

NB: I am **very** aware of more adapted build and management tools for Python (Fabric, Paver, etc) but I am bound on the use of the same framework used throughout the shop.

# java - Hibernate Joined Subclasses with One to Many mapping

> ID：14776322
> 
> 赞同：2
> 
> 时间：2013-02-08T15:50:14.150
> 
> 标签：java, hibernate

How would you implement a model where an abstract superclass A has 2 subclasses, B and C. B has a bidirectional one-to-many relation with another class X.

I am using the joined subclass mapping without discriminator and with anotaions (no xml). It works almost perfectly but the id from B is null in the X class. Can the X class get the id from the superclass? Or is it searching for an id in B.

Superclass A

```
import javax.persistence.*;

import org.hibernate.annotations.Cascade;

@Entity
@Table(name="t_trip")
@Inheritance(strategy=InheritanceType.JOINED)
public abstract class Trip {
@Id
@GeneratedValue(strategy= GenerationType.IDENTITY)
private int id;
private String name;
private boolean publicTrip;
private String description;

public Trip(){

}

public Trip(String name, String description, boolean publicTrip) {
    this.name = name;
    this.description = description;
    this.publicTrip = publicTrip;
 }
} 
```

Subclass B

```
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.persistence.*;
import org.hibernate.annotations.Cascade;
@Entity
@Table(name = "t_repeatedtrip")
@PrimaryKeyJoinColumn(name = "id")
 public class RepeatedTrip extends Trip {
private Date startMoment;
private String intervalType;
private int tripInterval;
private int tripFrequency;
@OneToMany(mappedBy = "repeatedTrip")
@Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE})
private List<TripExecutionMoment> tripExecutionMoments = new ArrayList<TripExecutionMoment>();

public RepeatedTrip() {
}

public RepeatedTrip(String name, String description,boolean publicTrip, Date startMoment,
        String intervalType, int interval, int frequency) {
    super(name, description, publicTrip);
    this.startMoment = startMoment;
    this.intervalType = intervalType;
    this.tripInterval = interval;
    this.tripFrequency = frequency;
}
} 
```

OneToMany related class X

```
package be.kdg.teamB.model.entities;

import java.util.Date;

import javax.persistence.*;

import org.hibernate.annotations.Cascade;

@Entity
@Table(name = "t_tripexecutionmoment")
public class TripExecutionMoment {
@Id
@GeneratedValue
private int id;
private Date executionPointOfTime;
@ManyToOne
@Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE})
@JoinColumn(name = "repeatedTripId")
private RepeatedTrip repeatedTrip;

public TripExecutionMoment() {
}

public TripExecutionMoment(Date executionPointOfTime) {

    this.executionPointOfTime = executionPointOfTime;
}

    return executionPointOfTime;
}

public void setExecutionPointOfTime(Date executionPointOfTime) {
    this.executionPointOfTime = executionPointOfTime;
}

public RepeatedTrip getRepeatedTrip() {
    return repeatedTrip;
}

public void setRepeatedTrip(RepeatedTrip repeatedTrip) {
    this.repeatedTrip = repeatedTrip;
}

 } 
```

Code is called in this method:

```
public RepeatedTrip createRepeatedTrip(String name, String description,boolean publicTrip,
        Date startMoment, String intervalType, int interval,
        int frequency) {

    session = HibernateUtil.getSessionFactory().getCurrentSession();
    tx = session.beginTransaction();

    RepeatedTrip trip = new RepeatedTrip(name, description,publicTrip, startMoment,
            intervalType, interval, frequency);
    int intervalDefiner;
    Date date = trip.getStartMoment();
    switch(intervalType){
    case "D":
        intervalDefiner = Calendar.DATE;
        break;
    case "M":
        intervalDefiner = Calendar.MONTH;
        break;
    case "W":
        intervalDefiner = Calendar.WEEK_OF_YEAR;
        break;
    case "Y":
        intervalDefiner = Calendar.YEAR;
        break;
    default:
        intervalDefiner = Calendar.DATE;
        break;
    }
    for(int i=0; i<frequency;i++){

        TripExecutionMoment tripExecutionMoment = new TripExecutionMoment(date);
        trip.getTripExecutionMoments().add(tripExecutionMoment);
        date = nextDate(intervalDefiner, interval, date);
    }

    session.saveOrUpdate(trip);
    tx.commit();
    return trip;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:17:13.617

我也那么认为。您正在将 TripExecutionMoment 添加到 RepeatedTrip：

```
trip.getTripExecutionMoments().add(tripExecutionMoment); 
```

但是你没有初始化双向关联的所有者端，这是 Hibernate 唯一关心的一个：

```
tripExecutionMoment.setRepeatedTrip(trip); 
```

# linux - 在 Linux 中打印 find 命令结果的 md5sum

> ID：14776327
> 
> 赞同：6
> 
> 时间：2013-02-08T15:50:31.417
> 
> 标签：linux, find, md5sum

我正在尝试对目录及其子目录中可以找到的所有 .jar 文件进行校验和。然后将带有校验和值的文件名打印到文件中。

这就是我所拥有的。

```
md5sum | find -name *.jar >result.txt 
```

我正在尝试将两个我知道单独工作的命令连接在一起。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T15:55:17.913

您可以使用类似这样的方法对每个文件执行命令：

```
find . -name "*.jar" -exec md5sum {} \; >result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T16:08:28.020

这也将用于递归散列当前目录或子目录中的所有文件（感谢我的系统管理员！）：

```
md5sum $(find . -name '*.jar') > result.txt 
```

以上将在文件名前添加“./”（不包括路径）。

使用`-exec`来自 mux 的建议在文件名前加上“*”（同样，没有路径）。

列出的文件顺序在两者之间也有所不同，但我没有资格确切说明原因，因为我完全是 bash 脚本的菜鸟。

编辑：忘记上面关于前置和完整路径的内容，这是基于我在 HPC 上远程运行的经验。我刚刚使用 cygwin 在我的本地 Windows 机器上运行了我的系统管理员的建议，并获得了完整的路径，前面带有“*./”。我需要使用其他一些技巧来转储不一致的路径和前置，以使比较更容易。简而言之，YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-29T17:37:33.847

您还可以将结果通过管道传输到`xargs`：

```
find . -name "*.jar" | xargs md5sum > result.txt 
```

# python - 可扩展程序的良好设计模式

> ID：14776333
> 
> 赞同：6
> 
> 时间：2013-02-08T15:50:54.197
> 
> 标签：python, design-patterns, architecture, factory-pattern

我有一个关于如何为我的程序做出好的设计的问题。我的程序非常简单，但我希望拥有良好的架构，并使我的程序在未来易于扩展。

我的程序需要从外部数据源 (XML) 中获取数据，从这些数据中提取信息，最后它需要准备 SQL 语句以将信息导入数据库。因此，对于现在和将来存在的所有外部数据源，我的应用程序都有一个简单的“流程”：获取、提取和加载。

我正在考虑创建名为：DataFetcher、DataExtractor 和 DataLoader 的通用类，然后编写将从它们继承的特定类。我想我需要一些工厂设计模式，但是哪个？工厂方法还是抽象工厂？

我也不想使用这样的代码：

```
if data_source == 'X':
     fetcher = XDataFetcher()
elif data_source == 'Y':
     fetcher = YDataFetcher()
.... 
```

理想情况下（我不确定这是否容易），我想编写新的“数据源处理器”，在现有代码中添加一两行，我的程序将从新数据源加载数据。

如何使用设计模式来实现我的目标？如果您可以在 python 中提供一些示例，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T15:55:22.517

如果提取器都具有相同的接口，则可以使用字典：

```
fetcher_dict = {'X':XDataFetcher,'Y':YDataFetcher}
data_source = ...
fetcher = fetcher_dict[data_source]() 
```

就保持灵活性而言——只需编写干净的惯用代码即可。我倾向于喜欢“你不需要它”（[YAGNI](http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it)）的哲学。如果您花费太多时间试图展望未来以弄清楚您将需要什么，那么当您发现您真正需要什么时，您的代码将变得过于臃肿和复杂，无法进行简单的调整。如果代码是预先清理的，那么以后重构以满足您的需要应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T17:49:54.290

您忽略了谈论最重要的部分，即数据的形状。这真的是这里最重要的事情。“设计模式”让人分心——其中许多模式的存在是因为 Python 没有的语言限制，并且引入了不必要的僵化。

1.  首先查看数据的形状。例如：
    1.  首先你有 XML
    2.  然后你有一些从 XML 中提取的数据集合（一个简单的 dict？一个嵌套的 dict？你需要什么数据？是同质的还是异构的？这是最重要的，但你不谈论它！）
    3.  然后在 SQL 后端序列化/持久化这些数据。
2.  然后设计方法、属性甚至只是字典或元组中的项目的“接口”（口头描述），以促进对该数据的操作。如果你保持简单并坚持使用原生 Python 类型，你甚至可能不需要类，只需要函数和字典/元组。
3.  重复迭代，直到获得应用程序所需的抽象级别。

例如，“提取器”的接口可能是“产生 xml 字符串的迭代”。请注意，这可以是生成器*，*也可以是带有`__iter__`and`next()`方法的类！无需定义抽象类和子类！

添加到数据中的可配置多态性取决于数据的确切形状。例如，您可以使用约定：

```
# persisters.py

def persist_foo(data):
    pass

# main.py
import persisters

data = {'type':'foo', 'values':{'field1':'a','field2':[1,2]}}
try:
   foo_persister = getitem(persisters, 'persist_'+data['type'])
except AttributeError:
   # no 'foo' persister is available! 
```

或者，如果您需要进一步抽象（也许您需要添加您无法控制的新模块），您可以使用注册表（这只是一个字典）和模块约定：

```
# registry.py
def register(registry, method, type_):
    """Returns a decorator that registers a callable in a registry for the method and type"""
    def register_decorator(callable_):
        registry.setdefault(method, {})[type_] = callable_
        return callable_
    return register_decorator

def merge_registries(r1, r2):
    for method, type_ in r2.iteritems():
        r1.setdefault(method, {}).update(r2[method])

def get_callable(registry, method, type_):
    try:
        callable_ = registry[method][type]
    except KeyError, e:
        e.message = 'No {} method for type {} in registry'.format(method, type)
        raise e
    return callable_

def retrieve_registry(module):
    try:
        return module.get_registry()
    except AttributeError:
        return {}

def add_module_registry(yourregistry, *modules)
    for module in modules:
        merge_registries(yourregistry, module)

# extractors.py
from registry import register

_REGISTRY = {}

def get_registry():
    return _REGISTRY

@register(_REGISTRY, 'extract', 'foo')
def foo_extractor(abc):
    print 'extracting_foo'

# main.py

import extractors, registry

my_registry = {}
registry.add_module_registry(my_registry, extractors)

foo_extracter = registry.get_callable(my_registry, 'extract', 'foo') 
```

如果需要，您可以轻松地在此结构之上构建一个全局注册表（尽管您应该避免全局状态，即使它不太方便。）

如果您正在构建公共框架并且您需要最大程度的可扩展性和形式主义并且愿意为复杂性付出代价，您可以查看类似[`zope.interface`](http://docs.zope.org/zope.interface/). （金字塔使用它。）

与其推出自己的 extract-transform-load 应用程序，不如考虑[使用 scrapy](http://scrapy.org)？使用scrapy，您将编写一个“Spider”，它被赋予一个字符串并返回项目序列（您的数据）或请求（请求更多字符串，例如要获取的URL）。这些项目被发送到一个可配置的项目管道，该管道在传递它们之前对它接收到的项目做任何它想要的事情（例如持久化在数据库中）。

即使你不使用 Scrapy，你也应该采用以数据为中心的类似管道的设计，并且更喜欢从抽象的“可调用”和“可迭代”接口的角度思考，而不是具体的“类”和“模式”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:18:59.980

您正在尝试做的是模块的动态导入（基于某些基类）。很像动态 dll 加载的 c++ 用例。

试试下面的[SO 问题](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)。以及 python 文档[`importlib.import_module`](http://docs.python.org/2/library/importlib.html#importlib.import_module)（这只是一个包装器`__import__`）

```
import importlib
moduleToImport = importlib.import_module("moduleName") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T17:00:16.613

XML 是结构化的，SQL-Inserts 是表格的。听起来很简单，不要过度设计它。您的基本方法可能是：

1.  在文件系统中找到一堆 XML 文件
2.  在 XML 上调用解析器，取回几棵树
3.  查询树或递归树以填充一堆表格数据结构
4.  序列化产生几个 INSERT 的数据结构

您的“业务逻辑”是第 3 点，它会因情况而异。一个写得很好的例子将比几层抽象更能帮助任何后继者。整个事情可能太小了，不值得拥有自己的领域特定语言。此外，XSLT 已经存在。

其他点是可重用的候选点，但对我来说，这听起来更像是编写良好且记录良好的函数，而不是工厂模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T17:28:14.033

我不会在单个外部源上添加抽象，而是在其上方添加抽象。抽象您如何与外部资源交互。例如，SoapClient、HttpClient、XmlServiceCLient、NativeOBjectCLient 等。这样你只需要在必须使用新的方式调用外部源时添加一个新的类。这样您就不必经常编写新的 fetcher 类。（注：我不是 Python 开发人员）

使用 ServiceRegistry 模式调用外部资源。您的服务 registry.xml 中的一项将是

```
 <service registry>
      <externaldatasource>
         <dsname> xmlservice</dsname>
         <endpointurl> some url </endpointurl>
         <invocationtype> Soap </invocationtype>
      </externaldatasource>
    </service registry> 
```

当一个类需要访问外部源时，taht calss 只需将数据源名称传递给 Service Registry 类。SR 读取 xml 文件并调用外部源并为您获取数据。现在，一个类将处理您所有的外部调用，并且没有太多的代码开销。

从客户端获得原始数据后，您希望将其转换为您的数据模型。我假设你有自己的 Xsd。使用 xslt 将传入的 XML 转换为您的 xsd 格式并进行验证。我建议使用工厂模式来处理 Json 等非 XML 数据格式。不必实施它们……只是为将来的扩展提供一个机会。

这整套类可以在网关包下。任何外部客户端相关代码都将包含在此包中，并且不会渗入任何其他包。这称为网关模式。此包中公共类的输入/输出将是您的域模型。

然后你有一个单一的逻辑来加载到数据库中，它独立于任何外部数据源。

# visual-c++ - FFTW linking in Visual Studio 2012

> ID：14776337
> 
> 赞同：2
> 
> 时间：2013-02-08T15:51:02.017
> 
> 标签：visual-c++, visual-studio-2012, fftw

I'm using Visual Studio 2012 on a 64-bit operating system. I'm trying to use FFTW in a program, but having problems getting the libraries to link.

I downloaded the 64-bit package from the FFTW Windows page. I followed these steps:

*   `lib /machine:x64 /def:libfftw3-3.def`
*   `lib /machine:x64 /def:libfftw3f-3.def`
*   `lib /machine:x64 /def:libfftw3l-3.def`

This created the .exp and .lib files.

I added the path with all of the files in:

> Properties -> Debugging -> Environment Properties -> VC++ Directories -> Include Directories Properties -> C/C++ -> General -> Additional Include Directories Properties -> Linker -> General -> Additional Library Directories

I added the .lib files to Properties -> Linker -> Input -> Additional Dependencies

I added the following lines to the top of my code:

```
#define FFTW_DLL
#include <fftw3.h> 
```

then I put the sample code from the FFTW tutorial into my code, like so:

```
fftw_complex *in; 
fftw_complex *out;

fftw_plan p;

in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*L);
out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*L);
p = fftw_plan_dft_1d(L, in, out,FFTW_FORWARD,FFTW_MEASURE); 

fftw_execute(p);
fftw_destroy_plan(p);
fftw_free(in);
fftw_free(out); 
```

When I then try to build my application, I get the following error:

```
Error   1   error LNK2019: unresolved external symbol __imp__fftw_execute referenced in function _wmain C:\EEG_Hardware\source\dspApp\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.obj   1   1   ConsoleApplication1
Error   2   error LNK2019: unresolved external symbol __imp__fftw_plan_dft_1d referenced in function _wmain C:\EEG_Hardware\source\dspApp\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.obj   1   1   ConsoleApplication1
Error   3   error LNK2019: unresolved external symbol __imp__fftw_destroy_plan referenced in function _wmain    C:\EEG_Hardware\source\dspApp\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.obj   1   1   ConsoleApplication1
Error   4   error LNK2019: unresolved external symbol __imp__fftw_malloc referenced in function _wmain  C:\EEG_Hardware\source\dspApp\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.obj   1   1   ConsoleApplication1
Error   5   error LNK2019: unresolved external symbol __imp__fftw_free referenced in function _wmain    C:\EEG_Hardware\source\dspApp\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.obj   1   1   ConsoleApplication1
Error   6   error LNK1120: 5 unresolved externals   C:\EEG_Hardware\source\dspApp\ConsoleApplication1\Debug\ConsoleApplication1.exe ConsoleApplication1 
```

I've been searching through this site, trying any solution I can find, but so far no luck. Any assistance would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:18:22.463

我也使用了您的程序，但它对我也没有完全起作用。

我通过在生成 .exp 和 .lib 文件之前复制这些文件来修改该过程

```
msobj100.dll
mspdb100.dll
mspdbcore.dll
mspdbsrv.exe 
```

您可以在 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE 目录中找到。

另外，我最后将三个 .dll 文件复制到了 .vcxproj 和 .vcxproj.filters 所在项目的文件夹中。

# c# - 通过模型更新集合而不创建新行

> ID：14776343
> 
> 赞同：0
> 
> 时间：2013-02-08T15:51:18.640
> 
> 标签：c#, asp.net, sql, asp.net-mvc-3, linq-to-sql

在我的 MVC3 应用程序中，我有一堆“SubscriptionTariffs”，每个都与许多“SubscriptionServices”相关。我创建了一个视图，以便能够编辑这些关税并编辑通过服务模型传递的集合。

问题是，每当我提交表单时，它不是编辑数据库中的现有服务，而是为每个附加的服务创建一个新行。

这是我的控制器的方法：

```
 /// <summary>
    /// Function Edit
    /// </summary>
    /// <param name="subscriptionViewModel"></param>
    /// <returns></returns>
    [HttpPost]
    public ActionResult Edit(SubscriptionViewModel subscriptionViewModel)
    {
        if (subscriptionViewModel == null) throw new ArgumentException("The value of subscriptionViewModel cannot be null.", "subscriptionViewModel");

        Gateway.Instance.Logger.LogDebug("SubscriptionController Edit: Method entered.");

        using (_ownerManager)
        {
            var mappedSubscription = Mapper.Map<SubscriptionTariff>(subscriptionViewModel);
            _ownerManager.SaveSubscription(mappedSubscription);
        }

        Gateway.Instance.Logger.LogDebug("SubscriptionController Edit: Method exited.");

        return RedirectToAction("Index");
    } 
```

以及应该在数据库上运行查询的管理器部分：

```
 var userTariff = (from s in this.Database.SubscriptionTariffs 
                                  where s.SubscriptionTariffId.Equals(subscriptionTariff.SubscriptionTariffId) 
                                  select s).FirstOrDefault();

    userTariff.SubscriptionTariffId = subscriptionTariff.SubscriptionTariffId;
    userTariff.Name = subscriptionTariff.Name;
    userTariff.Description = subscriptionTariff.Description;
    userTariff.IsActive = subscriptionTariff.IsActive;
    userTariff.PricePerMonth = subscriptionTariff.PricePerMonth;
    userTariff.CurrencyCode = subscriptionTariff.CurrencyCode;
    userTariff.PaymentServiceProvider = subscriptionTariff.PaymentServiceProvider;
    userTariff.IncomingMaxTransactionPerMonth = subscriptionTariff.IncomingMaxTransactionPerMonth;
    userTariff.OutgoingMaxTransactionPerMonth = subscriptionTariff.OutgoingMaxTransactionPerMonth;

    userTariff.SubscriptionServices = subscriptionTariff.SubscriptionServices;

    this.Database.SaveChanges();
    Gateway.Instance.Logger.LogDebug("SaveSubscription method exited");
    return subscriptionTariff.SubscriptionTariffId; 
```

资费更新正常，但我无法更新服务。如果有人可以帮我一把，将不胜感激！

编辑：

包括 ViewModel 也可能会有所帮助！

```
 /// <summary>
    /// 
    /// </summary>
    public int SubscriptionTariffId { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public string Name { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public string Description { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public bool IsActive { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public decimal PricePerMonth { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public string CurrencyCode { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public string PaymentServiceProvider { get; set; }

    /// <summary>
    /// Gets or sets the outgoing max transaction per month.
    /// </summary>
    /// <value>The outgoing max transaction per month.</value>
    public int OutgoingMaxTransactionPerMonth { get; set; }

    /// <summary>
    /// Gets or sets the incoming max transaction per month.
    /// </summary>
    /// <value>The incoming max transaction per month.</value>
    public int IncomingMaxTransactionPerMonth { get; set; }

    /// <summary>
    /// 
    /// </summary>
    public virtual ICollection<SubscriptionService> SubscriptionServices { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:16:05.210

安装在

```
userTariff.SubscriptionServices = subscriptionTariff.SubscriptionServices; 
```

请试试

```
subscriptionTariff.SubscriptionServices.ToList().ForEach(ss =>
    {
        // get the instance of the correct subscriptionTariff using the
        // id (IdOfSubscriptionServices)
        var u = userTariff.SubscriptionServices.FirstOrDefault(e => e.IdOfSubscriptionServices == ss.IdOfSubscriptionServices);

        if (u != null)
        {
            // update each property
            u.Prop1 = ss.Prop1;
            u.Prop2 = ss.Prop2;
        }
    }); 
```

# search - 如何将输入的搜索查询检测为环绕查询或正常的 lucene 核心库查询

> ID：14776344
> 
> 赞同：0
> 
> 时间：2013-02-08T15:51:22.953
> 
> 标签：search, lucene, proximity, query-parser

有没有一种方法可以让我们找出查询是针对普通 lucene 核心库还是针对环绕 contrib 模块的。我们能否将环绕查询解析器与 lucene 核心库的查询解析器合并，这样我们就只有一个查询解析器可以将语法检测为环绕查询或普通 lucene 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:11:48.657

我不太了解环绕查询解析器，但我相当确定环绕查询解析器和默认查询解析器都处理一些相同的语法，因此您无法严格区分所有情况。我认为，与其尝试检测语法并将其相应地传递给解析器，不如选择默认情况下应该尝试哪个解析器，如果失败则回退到另一个解析器。

就像是：

```
//Assuming you have a lucene default QueryParser and IndexSearcher lying around.
try {
    query = org.apache.lucene.queryparser.surround.parser.QueryParser.parse(queryString);
} catch (ParseException pe) {
    query = defaultParser.parse(queryString);
}

searcher.search(query, numHits); 
```

如果您愿意，您当然可以将其封装在您自己的 QueryParser 实现中。只需使用该逻辑实现 parse(String) 即可。

# java - How do I use the `properties` attribute of @PersistenceContext annotation?

> ID：14776346
> 
> 赞同：2
> 
> 时间：2013-02-08T15:51:25.740
> 
> 标签：java, hibernate, jpa, ejb, jboss7.x

I have two entity managers instances defined in my class, one of which overrides the `properties` attribute of `PersistenceContext`, and one which does not:

```
@PersistenceContext
protected EntityManager em;

@PersistenceContext(properties={@PersistenceProperty(name="hibernate.default_schema", value="archive")})
protected EntityManager emArchive; 
```

I've done this in order to define one entity manager attached to my default schema and the other to be attached to my archive schema.

Here is my persistance.xml:

```
<persistence-unit name="primary" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/PCMain_DS</jta-data-source> 

    <properties>
        <!-- Properties for Hibernate -->
        <!--  property name="hibernate.hbm2ddl.auto" value="update" /-->
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

Unfortunately, my program doesn't seem to be working, as when I save an entity with the archive entity manager (emArchive), it gets saved to the default public schema. It seems that the property `hibernate.default_schema` doesn't get set - but why? How I do switch schema?

My tools/environment:

*   JBoss 7.1
*   EJB
*   JPA
*   Hibernate

All help appreciated, thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:17:16.043

可以有其他方法来做到这一点，但这里有一种选择：

1.  在您的 persistence.xml 中定义两个元素
2.  对于定义的每个持久性单元，使用元素指定每个持久性单元的目标实体名称

这应该照顾在每个持久性单元中持久存在的实体的隔离。

# devexpress - How can the enduser clear a DevExpress StringEdit editor?

> ID：14776347
> 
> 赞同：0
> 
> 时间：2013-02-08T15:51:28.107
> 
> 标签：devexpress

In the UI we have a textbox which is a DevExpress.ExpressApp.Win.Editors.StringEdit.

We set its properties as follows:

```
control.Properties.Mask.MaskType = MaskType.DateTimeAdvancingCaret;
control.Properties.DisplayFormat.FormatString = "yyyy.MM.dd";
control.Properties.DisplayFormat.FormatType = FormatType.DateTime; 
```

When the textbox gets the focus it is empty. When the end user presses any key the control displays a valid date. The user modifies the date. Now how can the user empty / clear this textbox (using the keyboard)?

(Del, BackSpace does not work)

Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:32:24.483

来自 DevExpress[文本编辑概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument581)帮助文章：
`All common text editing features are available in text editors. This includes typing characters, deleting them using the BACKSPACE or DEL keys, etc. Note that end-users can press the CTRL+DEL combination to remove the editor's entire content.`

# java - 浏览器到网络服务器的通信：倒计时页面，使用 JSF

> ID：14776348
> 
> 赞同：-2
> 
> 时间：2013-02-08T15:51:30.857
> 
> 标签：java, jsf, timer, countdowntimer

新手在这里，所以对我轻松一点：D

我在java方面还可以，并且写了一些从输入倒计时的代码：

```
import java.util.Scanner;
import java.util.Timer;
import java.util.TimerTask;

public class Stopwatch {

    static int interval;
    static Timer timer;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        System.out.print("Input seconds => : ");
        String secs = sc.nextLine();
        int delay = 1000;
        int period = 1000;
        timer = new Timer();
        interval = Integer.parseInt(secs);
        System.out.println(secs);
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                System.out.println(setInterval());

            }
        }, delay, period);
    }

    private static final int setInterval() {
        if (interval == 1) {
            timer.cancel();
        }
        return --interval;
    }
} 
```

所以无论用户输入什么，它都会在控制台中每秒倒计时。

但我现在正在尝试制作一个 jsf Web 应用程序，该应用程序将让用户输入一个输入，这个值被传递给上面的 java 代码，一旦计时器完成，就会出现一个弹出窗口，

这可能与JSF有关吗？我是否以正确的方式进行此操作，如果不是，我应该如何编辑我的 java 以使其正常工作

非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:33:30.470

基本上，HTTP 是一种无状态协议，但是，要实现您想要的，您必须保持浏览器和服务器之间的**通信开放。**不完全是`JSF`，但是，您可以查看[http://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29)`Comet`的工作原理。您将了解如何在 JSF 中执行此操作。或者，如果您使用现代浏览器（支持 HTMl 5）和 Web 服务器，请查看新的**WebSocket** [http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)编程。

# mysql - MySQL LIKE 运算符与 MATCH AGAINST

> ID：14776350
> 
> 赞同：11
> 
> 时间：2013-02-08T15:51:39.387
> 
> 标签：mysql, match, sql-like

嗨我担心如何实现一个简单的搜索查询，我的场景是：

```
tag VARCHAR 255 
```

现在我需要在标签字段内进行搜索，我可以使用两种查询：

```
 SELECT * FROM table WHERE tag LIKE '%1111%' OR LIKE '%2222%' OR LIKE '%3333%'; 
```

或者

```
SELECT * ,MATCH(tag) AGAINST('+1111','+2222','+3333' IN BOOLEAN MODE) as score FROM table ORDER BY score DESC ; 
```

哪个更准确/精确，哪个更快？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-08T15:55:57.863

您的搜索不等价。`LIKE %1%`将找到包含 的任何内容，`1`例如`100`, 。这只是一个普通的子字符串匹配。理论上可行，但默认情况下 FULLTEXT 会忽略任何长度小于 4 个字符的“单词”。但是，假设您放宽全文长度限制，将找到任何 INDEPENDENT ，但不会找到任何嵌入另一个单词的内容。为此，您需要.`911``0.1``MATCH ('+1')``+1``1``+*1*`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T16:38:18.467

最快的解决方案是为标签创建一个适当的规范化表，以便每个标签存储在单独的行中。

```
CREATE TABLE tags (
  tag VARCHAR(4),
  tableid INT,
  PRIMARY KEY (tag, tableid),
  KEY (tableid, tag)
);

SELECT * FROM `table` JOIN tags ON table.tableid = tags.tableid 
WHERE tags.tag IN ('1111', '2222', '3333'); 
```

好处：

*   不再担心全文索引、ft_min_length、InnoDB 支持等。
*   不再担心与`LIKE`.
*   `table`使用主键索引查找给定标记及其匹配条目。
*   `table`使用辅助键索引查找给定条目的标签集。
*   您对 中每个项目的标签数量没有限制`table`。
*   您可以轻松计算某些标签的频率，您可以获取一组不同的标签，您可以根据查找表限制标签等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:17:45.263

永远不要使用 %1% 这将导致全表扫描，如果数据增长，效率将非常低。

在字符串值中搜索时，全文通常在更大的数据集中更快。像 'text%' 这样使用时，like 运算符很有用

# php - deps 文件是什么？

> ID：14776353
> 
> 赞同：3
> 
> 时间：2013-02-08T15:51:48.327
> 
> 标签：php, symfony

我正在尝试为 Symfony 2 安装插件，查找如何执行此操作我不断看到对名为“deps 文件”的引用，但我不确定这也指的是哪个文件。

我在我的 symfony 文件夹中找不到任何名为“deps”的文件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T15:58:05.050

您可能使用 Symfony2.1，它不使用 deps 文件，而是使用 composer。在 Symfony2.0 中，deps 文件位于应用程序的顶层。

Deps（用于 Symfony2.0）和 composer.json（用于 Symfony2.1+）文件用于安装第三方（供应商）以及 Symfony 的核心文件

# java - Java：将信号量与计时器一起使用

> ID：14776355
> 
> 赞同：4
> 
> 时间：2013-02-08T15:51:50.293
> 
> 标签：java, timer, semaphore

您好，我正在尝试使用`semaphore.acquire()`和同步类`semaphore.release()`。我`semaphore.release()`从一个名为`ReadSerialPort`and `semaphore.acquire()`from的班级打电话`WriteSerialPort`来将电话中心连接到 PC。我的问题是电话中心并不总是响应。

我想知道一种设置计时器并`semaphore.release()`在时间过去后制作的方法。

PS：我尝试使用`TimedSemaphore`类，但什么也没发生

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T10:53:40.320

Jan Goynvaeis 使用 semaphore.tryAcquire(10,TimeUnit.SECONDS) 解决了我的问题的答案，因此获取将在 10 seconds 后超时。超时后即时使用 semaphore.release(0) 清除线程

# xml - 多个值上的 XSL 匹配节点

> ID：14776358
> 
> 赞同：0
> 
> 时间：2013-02-08T15:51:55.750
> 
> 标签：xml, xslt

我有一个看起来像的 xml 文档

```
<a>
<somenode att="1"></somenode>
</a>
<a01>
<apple att="2"></apple>
<somenode att="1"></somenode>
</a01> 
```

当节点名称为“a”或a后跟一个数字（a0）和a后跟两个数字（a01）时，我想做的是匹配，关于我如何做到这一点的任何想法？

到目前为止，我有以下内容

```
<xsl:apply-templates select="node()[starts-with(name(),'a')]"> 
```

但这也会选择苹果，如何进行多个匹配，例如和 OR/AND ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:59:46.063

In XSLT 2.0 this would be pretty simple:

```
<xsl:apply-templates select="node()[matches(name(),'^a\d?\d?$')]"> 
```

In XSLT 1.0, regex isn't available, so it's a little trickier, but the following should work:

```
<xsl:apply-templates select="node()[starts-with(name(), 'a') and
                                    string-length(name()) &lt;= 3 and
                                    translate(name(), '0123456789', '') = 'a']" /> 
```

The three parts joined by "and" here ensure that:

*   The name starts with "a"
*   The name is 3 characters or less
*   All that remains when digits are removed from the name is the string "a" (meaning that any characters besides that single "a" were digits).

# sql - SQL：通过加入然后删除将数据从同一表中的一列复制到另一列

> ID：14776360
> 
> 赞同：1
> 
> 时间：2013-02-08T15:51:59.233
> 
> 标签：sql

当我尝试将数据从 1 列复制到另一列时出现错误，因为有 2 行具有几乎相同的数据但唯一 ID 不同。我使用 select 语句可以很好地选择要从 train_date 复制到 del_date 列的特定日期，但条件是 where 语句。如何将数据复制到 del 日期，然后删除 train_date 行。谢谢

```
update dbo.Comp d
  set d.del_date =  t.train_date 
  (
   SELECT d.unique_id as delUnique
      ,t.unique_id  as TraUnique
      ,d.del_date as delDelDate
      ,t.del_date as traDelDate
      ,d.train_date as delTrainDt
      ,t.train_date as traTrainDt

  FROM dbo.Comp d 
  inner join dbo.Comp t on d.g_id = t.g_id 
  where t.del_date = d.train_date
  and t.unique_id <> d.unique_id
  order by d.og_id, d.g_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:55:14.297

尝试这个，

```
update d
set d.del_date =  t.train_date 
FROM dbo.Comp d 
inner join dbo.Comp t on d.g_id = t.g_id 
where t.del_date = d.train_date
and t.unique_id <> d.unique_id 
```

# grails - Grails URL 替换项目名称

> ID：14776363
> 
> 赞同：0
> 
> 时间：2013-02-08T15:52:24.537
> 
> 标签：grails

我将我的应用程序从 Grails 1.3.9 转换为 2.2.0，现在每当我运行应用程序而不是包含项目名称的 URL 时，它都会将其替换为 [:]。

例如`http://localhost:8080/[:]/{controller}/{action}`。控制器和操作保持正确，它只是与项目名称一起发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:08:19.870

在迁移过程中遇到了类似的问题，这是因为 serverUrl 配置。

我假设访问配置中使用的应用程序名称的变量（在以前的版本中有效）现在可能已重命名。

redirect() 方法现在使用 grails.serverURL 配置设置来生成重定向 URL。您可能需要删除该设置，尤其是从开发和测试环境中。记录[在这里。](http://grails.org/doc/latest/guide/single.html)

# ios - 在后台 NSOperationQueue 上执行文件操作是否安全？

> ID：14776365
> 
> 赞同：0
> 
> 时间：2013-02-08T15:52:25.990
> 
> 标签：ios, objective-c, cocoa-touch, nsoperationqueue

这个问题说明了一切，我找不到答案，但我想在发布代码之前确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:08:44.547

是的，您可以在后台队列上执行文件操作。显然，您应该避免修改您可能在其他队列中积极使用的文件，但通常这是完全可以接受的。

将内容下载到文件中是最常见的后台操作之一。

# linux - linux内核中的TCP重传定时器

> ID：14776369
> 
> 赞同：1
> 
> 时间：2013-02-08T15:52:42.413
> 
> 标签：linux, tcp, timer

如何在linux tcp内核中检查重传定时器是否正在运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:18:13.163

您可以设置两个主机：发送者和接收者。在两者之间建立连接并发送一些流量，比如传输一个大文件。嗅探两边的交通。

在发送流量时，设置防火墙规则以丢弃一些数据包，[下面是](http://code.nomad-labs.com/2010/03/11/simulating-dropped-packets-aka-crappy-internets-with-iptables/)一个随机丢弃 x% 的示例：

```
# for randomly dropping 10% of incoming packets:
iptables -A INPUT -m statistic --mode random \ 
         --probability  0.1 -j DROP 
```

清理：

```
# for the incoming packets:
iptables -D INPUT -m statistic --mode random \
         --probability 0.1 -j DROP 
```

如果您查看您的捕获，您应该会看到发送方多次发送数据包以克服被丢弃的数据包。这表明重传正在工作。

如果您将下降幅度提高到 100%，您将看到仅由于超时而重新传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:13:14.487

我解决了这个问题，我想我应该分享解决方案。简而言之，当收到 ACK 时，通过调用 inet_csk_clear_xmit_timer 关闭重传定时器。icsk_pending 是 inet_connection_sock 结构中的一个标志。当接收到最早的未完成数据的 ACK 并因此关闭重传计时器时，此标志未设置。来自 linux 3.7 内核

```
static inline void inet_csk_clear_xmit_timer(struct sock *sk, const int what)
 {
         struct inet_connection_sock *icsk = inet_csk(sk);

         **if (what == ICSK_TIME_RETRANS || what == ICSK_TIME_PROBE0) {
                 icsk->icsk_pending = 0;**
 #ifdef INET_CSK_CLEAR_TIMERS
                 sk_stop_timer(sk, &icsk->icsk_retransmit_timer);
 #endif
         } else if (what == ICSK_TIME_DACK) {
                 icsk->icsk_ack.blocked = icsk->icsk_ack.pending = 0;
 #ifdef INET_CSK_CLEAR_TIMERS
                 sk_stop_timer(sk, &icsk->icsk_delack_timer);
 #endif
         }
 #ifdef INET_CSK_DEBUG
         else {
                 pr_debug("%s", inet_csk_timer_bug_msg);
         }
 #endif
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T17:47:17.203

它一定会运行，否则它不是 TCP 的实现。请参阅 RFC。

可以想象，现在有人已经注意到系统的一部分不工作了。

至于调整它 - 请参阅下面的配置参数`/proc/sys/net/ipv4`

# delphi - Delphi 中 CONTAINING_RECORD C 宏的等效函数是什么？

> ID：14776370
> 
> 赞同：5
> 
> 时间：2013-02-08T15:52:47.637
> 
> 标签：delphi, pointers, struct, record

C 中的[CONTAINING_RECORD 宏](http://msdn.microsoft.com/en-us/library/ff542043%28VS.85%29.aspx)根据结构中字段成员的地址返回结构/记录类型变量的基地址。在我只能将预定义的记录指针传递给触发回调的某些 Windows API 函数的情况下，它非常有用。

例如，如果我有一些类型，例如：

```
type
   tInnerRecord = record
      x, y : integer;
   end;
   pInnerRecord = ^tInnerRecord

tOuterRecord = record
   field1 : integer;
   inner : tInnerRecord;
   field2 : integer;
end;
pOuterRecord = ^tOuterRecord; 
```

我希望能够做类似的事情：

```
procedure SomeCallback( pIn : pInnerRecord ); stdcall;
var
   Out : pOuterRecord;
begin
   Out := CONTAINING_RECORD(pIn, tOuterRecord, inner);
   Out.field1 := pIn.x + pIn.y;
end; 
```

在我的具体情况下，我想将我的对象指针与 ReadFileEx（Windows 异步 I/O）的重叠数据指针一起传递，以便我可以在回调中访问该对象。

在 Delphi (2006) 中是否有提供类似功能的等效功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:12:55.033

您应该可以使用一些强制转换和指针算术来做到这一点，但不能使用打包好的宏（正如 David 已经提到的那样）。就像是：

```
procedure SomeCallback(var pIn: pInnerRecord); stdcall;
const
  p = pOuterRecord(nil);
var
  Offset: Integer;
  Out: pOuterRecord;
begin
  Offset := INT_PTR(@p^.inner) - INT_PTR(p);
  Out := Pointer(INT_PTR(@pIn) - Offset);
  Out.field1 := pIn.x + pIn.y;
end; 
```

和

```
var
 outer: tOuterRecord;
 inner: tInnerRecord;
begin
  inner.x := 1;
  inner.y := 2;
  outer.inner := @inner;
  SomeCallback(outer.inner);
  Assert(outer.field1 = 3);
end; 
```

作品。请注意，我必须`var`在`SomeCallback`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T16:11:09.637

我刚刚没有编译器，但这应该可以解决问题：

```
Out := Pointer( Cardinal(pIn) - Cardinal(@TOuterRecord(nil^).inner)); 
```

* * *

David 解释了为什么在 Delphi 中没有直接的等效函数。所以这是一个最接近的函数：

```
function ContainingRecord( var aField; aFieldOffsetRef : Pointer) : Pointer;
{$IF Declared(NativeUInt) = False}
type
  NativeUInt = Cardinal;
{$IFEND}
begin
  Result := Pointer(NativeUInt(@aField) - NativeUInt(aFieldOffsetRef));
end; 
```

调用示例：

```
Out := ContainingRecord(pIn^, @pOuterRecord(nil).inner); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:05:30.793

Delphi 中没有直接的等价物。不可能有这样的事情，因为 Delphi 没有宏和预处理器。

显然，在 Delphi 中可以计算出[特定记录中特定字段的偏移量](https://stackoverflow.com/questions/14462103/delphi-offset-of-record-field#14462201)。然后执行获得包含记录基地址所需的减法是微不足道的。但是你不能做的是一次表达该计算并将其重新用于任何通用字段/记录对，这可以使用 C 宏来完成。

您需要为以这种方式使用的每个字段/记录对编写一个函数。

# python - 如何使用 Python F9 Excel 书籍？

> ID：14776378
> 
> 赞同：0
> 
> 时间：2013-02-08T15:53:15.867
> 
> 标签：python, excel, win32com

我试图从[你如何让 Excel 在 VBA 中刷新工作表上的数据中改编 VBA 示例？](https://stackoverflow.com/questions/154434/how-do-you-get-excel-to-refresh-data-on-sheet-from-within-vba)，它们不起作用： sheet.Calculate 什么都不做，找不到其他版本的计算...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:20:10.430

以编程方式添加CalculateFull宏并调用它可以解决问题，但看起来很复杂......

```
xlmodule = book.VBProject.VBComponents.Add(1) # http://support.microsoft.com/kb/282830 if this line throws an error
xlmodule.CodeModule.AddFromString('Public Sub AnotherCalculateFull() \n\
                                               Application.CalculateFull \n\
                                               End Sub') 
```

# python - 单元测试 AppEngine 失败

> ID：14776382
> 
> 赞同：1
> 
> 时间：2013-02-08T15:53:27.450
> 
> 标签：python, google-app-engine, nose

对于我们当前的 GAE 应用程序，我们在代码周围添加了很多单元测试。但在测试 GAE 服务时，我们只能测试积极的一面。例如，我们想测试如果模型中的 put() 失败，我们是否正确处理该错误或异常。EmailMessage().send() 等也是如此。

所以问题是：使用 GAE 测试平台，您能否出于单元测试的目的强制他们的一项服务失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:58:26.270

据我所知，没有一个测试平台可以让您测试失败 - 但您可以尝试使用[模拟](http://www.voidspace.org.uk/python/mock/)来模拟失败并以这种方式进行测试。

# actionscript-3 - 如何使用 Adob e Flash CS6 编译到 Flash 11（甚至版本）？

> ID：14776384
> 
> 赞同：0
> 
> 时间：2013-02-08T15:53:33.710
> 
> 标签：actionscript-3, flash, compilation, adobe, version

由于服务器问题，我需要编译到 Flash 的偶数版本（我不是后端开发人员，也无法以任何方式访问服务器）。我可以发布到 9、10 或 11，但尺寸限制非常小，并且希望使用从 11 开始的改进压缩。我还使用 PerspectiveProjection 来修复一些以其他方式出现的 3d 旋转问题。

我只能使用 Flash CS6（或命令行），而不能使用 Flex Builder 或任何其他程序。CS6 有一个下拉菜单，其中仅有（AS3 兼容）选项为 9、10.3、11.1、11.2、11.3 和 11.4。

有什么方法可以编译到 Flash Player 11.0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:22:13.733

1：点击本站：[http ://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html)

2：下载 Playerglobal.swc 存档**Flash Player 11.0 (329 KB)**

3：复制到这个路径

Mac：/Applications/Adobe Flash CS6/Common/Configuration/ActionScript 3.0/FP11.0/ **playerglobal.swc**

![在此处输入图像描述](../Images/ca5245f23ddab6a189b765047614487b.png)

赢：/Common/Configuration/ActionScript 3.0/FP11.0/

4：制作一个FlashPlayer11_0.xml

Mac：/Applications/Adobe Flash CS6/Common/Configuration/Players/

![在此处输入图像描述](../Images/69fc408bd2a5c40b1efecc24f0c25c74.png)

赢：/Common/Configuration/Players/

5：复制并粘贴以下xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<players>
  <player id="FlashPlayer11.0" version="13" asversion="3">
   <name>Flash Player 11.0</name>
   <path builtin="true"/>
   <path menuSortCategory="10"/>
   <path platform="WIN">Device Central/adcdl.exe</path>
   <path platform="MAC">Device Central/adcdl</path>
   <playerDefinitionPath as2="$(UserConfig)/Classes/FP10;$(UserConfig)/Classes/FP9;$(UserConfig)/Classes/FP8;$(UserConfig)/Classes/FP7" as3="$(AppConfig)/ActionScript 3.0/FP11.0/playerglobal.swc" />
   <feature name="multiScreenPublish"               supported="true" />
   <feature name="mobileAuthoringIntegration"           supported="true" />
   <feature name="deviceSound"                  supported="false"/>
   <feature name="exportStreamingSound"         supported="true"/>
   <feature name="exportEventSound"             supported="true"/>
   <feature name="FSCommand2"                   supported="false"/>
   <feature name="gradient_linearRGB"           supported="true" />
   <feature name="gradient_overflow"            supported="true" />
   <feature name="shape_strokeHint"             supported="true" />
   <feature name="shape_cap"                supported="true" />
   <feature name="shape_join"               supported="true" />
   <feature name="shape_mitre"              supported="true" />
   <feature name="shape_scale"              supported="true" />
   <feature name="linkage_exportForActionscript"    supported="true" />
   <feature name="linkage_exportForRuntimeSharing"  supported="true" />
   <feature name="linkage_exportInFirstFrame"       supported="true" />
   <feature name="linkage_importForRuntimeSharing"  supported="true" />
   <feature name="linkage_importAndAddToCache"      supported="false" />
   <feature name="publish_localPlaybackSecurity"    supported="true" />
   <feature name="publish_hardwareAcceleration"     supported="true" />
   <feature name="symbol_blendMode"             supported="true" /> 
   <feature name="actionScript_documentClass"       supported="true" />
   <feature name="symbol_blendMode"             supported="true" />
   <feature name="filters"              supported="true" />
   <feature name="component_binding"            supported="true" />
   <feature name="component_schema"             supported="true" />
   <feature name="screens"              supported="true" />
   <feature name="video"                supported="true" />
   <feature name="deviceVideo"              supported="false"/>
   <feature name="accessibility"            supported="true" />
   <feature name="dynamic_text_kerning"         supported="true" />
   <feature name="static_text_charwidth_nondeviceFont"  supported="true" /> 
   <feature name="static_text_charwidth_deviceFont" supported="true" />
   <feature name="advanced_anti_alias_text"         supported="true" /> 
   <feature name="nine_slice_scaling"           supported="true" />
   <feature name="runtimeNumberMinMax"          supported="true" />
   <feature name="use8kSampleRate"                      supported="true" />
   <feature name="useDefineFont4ForDeviceText"          supported="true" />
   <feature name="useDefineFont4ForEmbeddedFonts"       supported="true" />
   <feature name="textLayoutFramework"       supported="true" />
   <feature name="document_class"                   supported="true" />
   <encodingPresets>
        <preset uuid="da5cac1a-417a-4d86-b7f7-ef21010a5d7d"  name="FLV - Match Source Attributes (High Quality)" ext="flv" default="true"/>
    </encodingPresets>

   <testmenu> 
    <menu name="ID_testInFlash" default="true"/>
    <menu name="ID_testInDeviceCentral" />
   </testmenu>

   <debugmenu>
    <menu name="ID_debugtInFlash" default="true"/> 
    <menu name="ID_debugInDeviceCentral"/> 
  </debugmenu>

   </player>
</players> 
```

6：重启Flash CS6。和快乐的编码！:)

![在此处输入图像描述](../Images/839ca1e46e340e4f38f7ec0d76477cc1.png)

# php - 如何从不同的目录 require_once？

> ID：14776386
> 
> 赞同：4
> 
> 时间：2013-02-08T15:53:41.920
> 
> 标签：php, permissions, directory, require, require-once

我试图从不同文件夹中的 php 文件中获取我的“库”文件，但是在尝试从子文件夹访问它们时会出错。例如我有这样一个目录：

```
+ home    
- file1.php

 ++ subfolder
  - file2.php

 ++ libraries
  - code_generator.php
  - database_library.php 
```

**code_generator.php**还依赖于其他库：

```
(LINE 25) require_once(realpath("./libraries/database_library.php"));
//this works fine when called from file1.php, but not from file2.php 
```

我尝试从 ./subfolder/file2.php 调用 code_generator，**例如**：

```
chmod("../libraries/codegenerator.php", 0777);  // for the error at the end of this question
require_once("../libraries/code_generator.php"); 
```

当我运行 file2.php 时，它会产生 2 个错误：

```
**Warning**: require_once(C:\xampp\htdocs\home\subfolder): failed to open stream: Permission denied in C:\xampp\htdocs\home\libraries\code_generator.php on line 25

**Fatal error**: require_once(): Failed opening required '' (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\home\libraries\code_generator.php on line 25 
```

*第 25 行是`require_once(realpath("./libraries/database_library.php"));`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:04:31.220

## 该文件不*存在*。

错误消息如下：

> **警告**：require_once（C:\xampp\htdocs\home\subfolder）：无法打开流：

和：

> 打开失败需要''

错误消息永远不会说谎（嗯，几乎永远不会），因此您*正在*调用：

```
require_once(''); 
```

## Realpath 为丢失的文件返回 false

如果您将路径传递给不存在的文件，Realpath 将返回 false：

```
$return = realpath('this/doesnt/exist.foo'); // $return is false 
```

因此，传递给 realpath 的参数不引用文件，这就是路径不起作用的原因。

## 不要过度使用真实路径

如果你去掉 realpath 的使用，你会发现错误信息可能很明显。猜测您正在尝试包括在内`C:\xampp\htdocs\home\subfolder\libraries\database_library.php`-因为其中缺少`.`：

> 第 25 行是`require_once(realpath("./libraries/database_library.php"));`

相反，如果您只定义一个根路径：

```
define('ROOT', 'C:\xampp\htdocs\home\\'); 
```

然后你可以绝对自信地使用这个常数，这些问题不会发生：

```
require_once(ROOT . "libraries/database_library.php"); 
```

而且，如果您确实弄错了路径，则错误消息将清楚地表明问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-21T20:50:33.623

您可以使用[PHP 超级全局变量](http://php.net/manual/en/reserved.variables.server.php)$_SERVER['DOCUMENT_ROOT'] 来获取服务器文档根目录的完整路径，例如。/var/www/网站/公共。

代码可能如下所示：

`require_once $_SERVER['DOCUMENT_ROOT'] . '/libraries/database_library.php';`

这样就不需要手动设置文档根路径；PHP 将始终为您提取它，并使其在服务器文档根目录中的任何 PHP 文件中的 $_SERVER['DOCUMENT_ROOT'] 中可用。

# php - jQuery Mobile：将数据从一个页面发送到另一个页面

> ID：14776387
> 
> 赞同：2
> 
> 时间：2013-02-08T15:53:42.777
> 
> 标签：php, jquery, html, cordova, jquery-mobile

我有一个问题，我需要将数据（一个 ID）从一个列表发送到另一个页面。这是html代码：

```
</head>
    <body>
        <div data-role="page" id="index">
            <div data-role="header">
                <h1>Players App</h1>
            </div><!--/header-->
            <div data-role="content">
                <ul data-role="listview" id="ul_list" data-inset="true">

                </ul>
            </div><!--/content-->
            <div data-role="footer">
                <h4>Players list</h4>
            </div><!--/footer-->
        </div><!--/page-index-->
        <div data-role="page" id="detail" data-add-back-btn="true">
            <div data-role="header">
                <h1>Player detail</h1>
            </div><!--/header-->
            <div data-role="content">
                <ul data-role="listview" id = "" data-inset="true">

                </ul>
            </div><!--/content-->
            <div data-role="footer">
                <h4>Players list</h4>
            </div><!--/footer-->
        </div><!--/page-detail-->
    </body>
</html> 
```

这是脚本：

```
var lista = new Array();
var squadraManager={};

squadraManager.initArray=null;
squadraManager.printArray=null;

squadraManager.initArray = function(){
        lista[0] = new players();
        lista[0].setNome("Nonho");
        lista[0].setRuolo("difensore");
        lista[0].setCognome("Rossi");
        lista[0].setNMaglia("01");
        lista[1] = new players();
        lista[1].setNome("Marco");
        lista[1].setRuolo("blabla");
        lista[1].setCognome("Mariani");
        lista[1].setNMaglia("22");
        lista[2] = new players();
        lista[2].setNome("Carlo");
        lista[2].setRuolo("Soffiatore");
        lista[2].setCognome("Bianchi");
        lista[2].setNMaglia("01");
}
squadraManager.loaderList = function(){
    jQuery.each( lista, function(chiave, oggetto){
        //leggo valori oggetti in array 
            jQuery("#ul_list").append("<li><a id='"+ oggetto.getId() +"det' href='#dettaglio'>"+oggetto.getCognome()+"</a></li>").listview("refresh");
    });
}

squadraManager.init = function(){                             /*init */
    squadraManager.initArray();
    squadraManager.loaderList();
}
jQuery(function(){
    squadraManager.init();
}); 
```

我需要将点击列表的 ID 发送到下一页。最后的想法是在第二页“#detail”中加载播放器的详细信息（播放器在一个单独的类中）。

感谢您的回复

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T16:00:29.247

## One HTML / multiple pages template

Here's an example of passing an attribute from listview to the second page in 1 html multi page template:

[http://jsfiddle.net/Gajotres/Gv7UW/](http://jsfiddle.net/Gajotres/Gv7UW/) - js object as a storage container

[http://jsfiddle.net/Gajotres/J9NTr/](http://jsfiddle.net/Gajotres/J9NTr/) - localStorage as a storage container

Basically what you want to do is create a persistent javascript object for a storage purpose. As long ajax is used for page loading (and page is not reloaded in any way) that object will stay active.

```
 var storeObject = {
        firstname : '',
        lastname : ''
    } 
```

## Multiple HTML pages template

Unfortunately this example can't be done through jsFiddle so I will post needed files:

**HTML 1 :**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  
    <script src="operations.js"></script>       
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <ul data-role="listview" data-theme="a" id="test-listview">
                <li><a href="page2.html?id=1">Link 1</a></li>
                <li><a href="page2.html?id=2">Link 2</a></li>
                <li><a href="page2.html?id=3">Link 3</a></li>
                <li><a href="page2.html?id=4">Link 4</a></li>
                <li><a href="page2.html?id=5">Link 5</a></li>
            </ul>    
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

**HTML 2 :**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  
</head>
<body>
    <div data-role="page" id="second">
        <div data-theme="a" data-role="header">
            <h3>
                Second Page
            </h3>
            <a href="#index" class="ui-btn-left">Back</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

**operations.js :**

```
$(document).on('pageshow', '#second', function(){   
    alert(getParameterByName("id"));
}); 

function getParameterByName(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
} 
```

## User authentication demo

Another example that can't be shown with a jsFiddle example, unlike previous one, this one will have attached SQL script. I would advise you to create a better db reading logic, this one is a simple solution, prone to SQL injection, but it will work well for your assignment:

**index.php :**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        #login-button {
            margin-top: 30px;
        }        
    </style>
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/custom.js"></script>
</head>
<body>
    <div data-role="page" id="login">
        <div data-theme="a" data-role="header">
            <h3>Login Page</h3>
        </div>

        <div data-role="content">
            <label for="username">Enter your username:</label>
            <input type="text" value="" name="username" id="username"/>
            <label for="password">Enter your password:</label>
            <input type="password" value="" name="password" id="password"/>  
            <a data-role="button" id="login-button" data-theme="b">Login</a>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3></h3>
        </div>

        <div data-role="content">
            Here goes content
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">
            <h3>Page footer</h3>
        </div>
    </div>    
</body>
</html> 
```

**json.php :**

```
<?php
    $var1 = $_REQUEST['action']; // We dont need action for this tutorial, but in a complex code you need a way to determine ajax action nature
    $jsonObject = json_decode($_REQUEST['outputJSON']); // Decode JSON object into readable PHP object

    $username = $jsonObject->{'username'}; // Get username from object
    $password = $jsonObject->{'password'}; // Get password from object

    mysql_connect("localhost","root","");  // Conect to mysql, first parameter is location, second is mysql username and a third one is a mysql password
    @mysql_select_db("test") or die( "Unable to select database"); // Connect to database called test

    $query = "SELECT * FROM users WHERE user_name = '".$username."' and user_pass = '".$password."'";
    $result=mysql_query($query);
    $num = mysql_numrows($result);

    if($num != 0) {
        echo "true";
    } else {
        echo "false";        
    }
?> 
```

**custom.js :**

```
$(document).on('pagebeforeshow', '#login', function(){ 
    $('#login-button').on('click', function(){
        if($('#username').val().length > 0 && $('#password').val().length > 0){
            userObject.username = $('#username').val(); // Put username into the object
            userObject.password = $('#password').val(); // Put password into the object
            // Convert an userObject to a JSON string representation
            var outputJSON = JSON.stringify(userObject);
            // Send data to server through ajax call
            // action is functionality we want to call and outputJSON is our data
            ajax.sendRequest({action : 'login', outputJSON : outputJSON});
        } else {
            alert('Please fill all nececery fields');
        }
    });    
});

$(document).on('pagebeforeshow', '#index', function(){ 
    if(userObject.username.length == 0){ // If username is not set (lets say after force page refresh) get us back to the login page
        $.mobile.changePage( "#login", { transition: "slide"} ); // In case result is true change page to Index  
    }
    $(this).find('[data-role="header"] h3').append('Wellcome ' + userObject.username); // Change header with wellcome msg
    //$("#index").trigger('pagecreate');
});

// This will be an ajax function set
var ajax = {
    sendRequest:function(save_data){
        $.ajax({url: 'http://localhost/JSONP_Tutorial/json.php',
            data: save_data,
            async: true,
            beforeSend: function() {
                // This callback function will trigger before data is sent
                $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
            },
            complete: function() {
                // This callback function will trigger on data sent/received complete
                $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
            },
            success: function (result) {
                if(result == "true") {
                    $.mobile.changePage( "#index", { transition: "slide"} ); // In case result is true change page to Index
                } else {
                    alert('Login unsuccessful, please try again!'); // In case result is false throw an error
                }
                // This callback function will trigger on successful action
            },
            error: function (request,error) {
                // This callback function will trigger on unsuccessful action                
                alert('Network error has occurred please try again!');
            }
        });
    }
}

// We will use this object to store username and password before we serialize it and send to server. This part can be done in numerous ways but I like this approach because it is simple
var userObject = {
    username : "",
    password : ""
} 
```

**localhost.sql :**

```
-- phpMyAdmin SQL Dump
-- version 3.4.10.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Feb 02, 2013 at 11:58 AM
-- Server version: 5.5.20
-- PHP Version: 5.3.10

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `test`
--
CREATE DATABASE `test` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;
USE `test`;

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE IF NOT EXISTS `users` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_name` varchar(64) NOT NULL,
  `user_pass` varchar(64) NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`user_id`, `user_name`, `user_pass`) VALUES
(1, 'gajotres', 'testpass');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

More info

If you want to learn more about this topic take a look at this [article](http://www.gajotres.net/passing-data-between-jquery-mobile-pages/). You will find several solutions with examples.

# java - H2 数据库和全文搜索的内连接

> ID：14776389
> 
> 赞同：0
> 
> 时间：2013-02-08T15:53:47.283
> 
> 标签：java, sql, full-text-search, inner-join, h2

我有一个表“BANKRECORDING”，它包含对不同表的 ID 引用。

该表存储在 H2 数据库中，我使用全文搜索方法。

例如，我有一个“BANKRECORDING”：

```
ID | ID_LIBELLE | ID_PAYMENT
1  | 2          | 3
2  | 2          | 10 
```

通过简单的查询，我的内部连接有效。但在这个查询中，我不知道该怎么做：

```
SELECT B.* 
FROM FT_SEARCH_DATA(1, 0, 0) FT, 
BANKRECORDING B 
WHERE FT.TABLE='BANKRECORDING' AND B.ID=FT.KEYS[0] 
```

它返回我的所有结果，但带有 ID...

我已经尝试过了，但它返回了很多结果......存储在我的数据库中的元素一行。

```
SELECT B.*, L.*, ET.*, P.*, MO.* 
FROM FT_SEARCH_DATA('car', 0, 0) FT, 
BANKRECORDING B, LIBELLE L, ETAT ET, PAYMENT P, MOTIF MO
WHERE FT.TABLE='BANKRECORDING' AND B.ID=FT.KEYS[0] 
```

有人知道如何在这个查询中做 INNER JOIN 吗？

编辑 ：

期望的输出：

```
ID | ID_LIBELLE | ID_PAYMENT
1  | car         | bank check
2  | car         | transfer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:06:16.680

哦 ！感谢安德鲁，我发现了它的工作原理！事实上，要显示数据，我们必须在 SELECT 中指定每个元素：

```
SELECT b.id, l.libelle, p.libelle
  FROM FT_SEARCH_DATA(1, 0, 0) FT, ENREGISTREMENT b
   JOIN LIBELLE l on (b.id_libelle = l.id)
   JOIN MODEREGLEMENT p on (b.id_MODEREGLEMENT = p.id)
 WHERE b.id=FT.KEYS[0]
 AND FT.TABLE='ENREGISTREMENT' 
ORDER BY b.id; 
```

我不知道为什么我们不能为元素调用“b.*”...

# php - 我可以像类库一样在我的项目中包含 composer.phar 吗？

> ID：14776391
> 
> 赞同：0
> 
> 时间：2013-02-08T15:53:51.990
> 
> 标签：php, composer-php, phar

我想使用该功能通过 Web 界面正确设置依赖项。

我在 [Using Phar Archives: Introduction](http://www.php.net/manual/en/phar.using.intro.php) tutorial 中发现接下来可以做：

```
<?php
include 'composer.phar';
?> 
```

但是当我尝试做同样的事情时，我得到了下一个错误：

```
phar "/var/www/.../composer.phar" is API version 0.0.0, and cannot be processed

#0 /var/www/.../composer.phar(13): Phar::mapPhar('composer.phar') 
... 
```

我的 phpinfo 输出显示下一个信息：

Phar EXT 2.0.1 版，Phar API 1.1.1 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:55:24.107

~~你需要做：~~

 ~~```
require 'vendor/autoload.php';
use <NAMESPACE>\<LIBRARY>; 
```~~ 

~~加载您的作曲家库。 **composer.phar是根据您的****composer.json**文件的内容实际为您检索库的脚本。~~

如果您想从 PHP 脚本实际运行**composer.phar**，请保持简单并只使用 shell（例如使用反引号、shell_exec() 等）。

```
$output = `<path_to_composer>/composer.phar [options]`; 
```

您正在尝试做的是针对已打包为**phar的***库*，而不是应用程序。

# excel - VBA excel 2007 使用条件传输单元格的值

> ID：14776393
> 
> 赞同：0
> 
> 时间：2013-02-08T15:53:58.400
> 
> 标签：excel, vba, transfer

在工作表“hitterscalc”单元格 d2 中，如果“hitterscalc”单元格 ab2 中的值 = 1，我想粘贴工作表“击球手”单元格 ks2 的值

我想对工作表“hitterscalc”中包含数据的所有行执行此操作

我想出了

```
With Worksheets("Hitterscalc")
    With .Range("d2:d" & .Range("a" & Rows.Count).End(xlUp).Row)
        .Formula = "=IF($AB2=1,Batters!KS2,""))"
        .Value = .Value
    End With
End With 
```

但返回应用程序定义或对象定义错误。

有人可以指出我解决此问题的正确方向吗？

编辑：

所以当我这样做的时候

```
With Worksheets("Hitterscalc")
        With .Range("d2:d" & .Range("ab" & Rows.Count).End(xlUp).Row)
            .Formula = "=Batters!KS2"
            .Value = .Value
        End With
    End With 
```

表达式正常工作。我怎样才能得到它，以便它首先检查工作表 hitterscalc 列 ab 的单元格值？

编辑 2

```
With Worksheets("Hitterscalc")
        With .Range("d2:d" & .Range("ab" & Rows.Count).End(xlUp).Row)
            .Formula = "=IF(AND(A2<>"""",AB2=1),Batters!KS2,"""")"
            '.Formula = "=Batters!KS2"
            .Value = .Value
        End With
    End With 
```

作品。我很困惑为什么这个有效，但不是第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:01:06.103

I think the confusion is because of quotes - try to use this code:

```
With Worksheets("Sheet1")
    With .Range("d2:d" & .Range("ab" & Rows.Count).End(xlUp).Row)
            r = "=IF($AB2=1,Batters!KS2," & Chr(34) & Chr(34) & ")"
            .Formula = r
            .Value = .Value
    End With
End With 
```

Formula string is generated using `Chr(34)` for double quotes used in `IF`.

# .net - 日志框架与 System.Diagnostics 跟踪

> ID：14776395
> 
> 赞同：4
> 
> 时间：2013-02-08T15:54:08.477
> 
> 标签：.net, asp.net-mvc, logging, asp.net-web-api, trace

由于我目前正在我的（Asp.Net Web Api）应用程序中设置日志记录，因此我正在阅读有关日志记录的最佳实践。我提出了这个关于[记录最佳实践](https://stackoverflow.com/questions/576185/logging-best-practices)的问题。

我走的是`Ninject`-> `Logging Extensions`->`Nlog / Log4Net`方式，但这个问题（或者我应该说答案）让我再次思考。

目前我启用了跟踪，到处记录，感觉有点混乱，日志和跟踪没有加在一起。

我认为当我切换到诊断跟踪并在框架已经给我的基础上构建时，我最终会得到更完整的跟踪。一条讲述完整故事的踪迹对我来说听起来比单独的踪迹和日志更有用，它们都知道故事的一部分。当然，我总是可以用侦听器和过滤器再次将事物分开。

但另一方面，我总是学到：

> 记录！= 跟踪

所以这给我留下了一个问题，我应该放弃日志框架，这是项目的开始阶段，还是应该坚持下去？

如果我放弃了日志框架，我应该使用一个接口以防我们再次切换到另一个日志/跟踪框架，还是我可以只依赖 System.Diagnostics？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-03T22:21:47.937

我已经尝试过 Log4NET 路径，并查看了 Ninject。

根据我的发现，我会说将 Diagnosisics.Trace 转换为日志框架比尝试处理我发现的任何日志框架的重量要高效得多。（我同意 Trace != Logging）

也许我是一个控制狂，但我不希望在我的代码库中引入大量意见。我想要工具，而不是紧身衣。

将 Trace 构建到日志记录框架需要做一些工作，但它是高度可重用的，因为它只是核心诊断 dll，如果没有别的原因，您可能已经在程序中使用了 StopWatch 来计时。

无论如何，这只是我的看法，但我更喜欢 Diagnostics.Trace 路线。考虑看看： http: [//www.codeproject.com/Articles/2680/Writing-custom-NET-trace-listeners](http://www.codeproject.com/Articles/2680/Writing-custom-NET-trace-listeners) - 它很旧，但会告诉你什么是你自己的。

# android - 运行时自定义列表视图背景颜色更改

> ID：14776396
> 
> 赞同：0
> 
> 时间：2013-02-08T15:54:09.217
> 
> 标签：android, android-listview

我有一个带有自定义列表视图的应用程序，它有一个文本视图和一个图像视图。当我单击图像视图时，背景颜色应该会改变。我试图这样做，但得到`NullPointerException`......这是我的代码

**CustomListViewAdapter.java**

```
public class ViewHolder {
    TextView mName;
    ImageView mDeleteImage;
}

public View getView(int position, View convertView, ViewGroup parent) {
    holder = null;
    DataFields rowItems = (DataFields) getItem(position);
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.home_field_row, null);
        holder = new ViewHolder();
        holder.mName = (TextView) convertView.findViewById(R.id.hmFieldName);
        holder.mDeleteImage = (ImageView)convertView.findViewById(R.id.hmFieldDeleteImage);

        convertView.setTag(holder);

        holder.mDeleteImage.setTag(position);

        holder.mDeleteImage.setOnClickListener(new ImageView.OnClickListener() {

            @Override
            public void onClick(final View view) {
                count++;
                mListRowRL = (RelativeLayout)view.findViewById(R.id.hmFieldMainRL);
                mListRowRL.setBackgroundColor(color.list_row_bg); //throwing NullPointerException
            }
        });
    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mName.setText(rowItems.getName());

    return convertView;
} 
```

任何形式的建议都非常感谢。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:08:39.013

```
holder.mDeleteImage.setOnClickListener(new ImageView.OnClickListener() {

            @Override
            public void onClick(final View view) {
                count++;
                mListRowRL = (RelativeLayout)view.findViewById(R.id.hmFieldMainRL);
                mListRowRL.setBackgroundColor(color.list_row_bg); //throwing NullPointerException
            }
        }); 
```

您正在为 ImageView 分配一个单击侦听器，这很好。但是在您的 onClick 方法中，您尝试搜索传入的视图（这是一个 ImageView）以查找您的行。ImageViews 将不包含任何子视图，因此您的 mListRowRL 将始终为空。尝试这样的事情

```
final View clickView = convertView;
holder.mDeleteImage.setOnClickListener(new ImageView.OnClickListener() {

                @Override
                public void onClick(final View view) {
                    count++;
                    clickView.setBackgroundColor(color.list_row_bg); 
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:10:00.427

我曾经遇到过这个奇怪的错误

我在你的 XML 上用这个解决了它（好吧谷歌它:)）：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:focusable="false"
    android:focusableInTouchMode="false" /> 
```

然后你必须为你的根行项目分配一个选择器：

```
<LinearLayout
    android:id="@+id/LinearLayoutApplication"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/list_selector"> 
```

最后是选择器（res/color 上的 list_selector.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@color/light_blue"
        android:state_pressed="true" />
    <item
        android:drawable="@color/light_blue"
        android:state_selected="true" />
    <item
        android:drawable="@color/transparent" />
</selector> 
```

# java - 检索 facelets 的客户端 ID

> ID：14776402
> 
> 赞同：0
> 
> 时间：2013-02-08T15:54:13.450
> 
> 标签：java, jsf, jsf-2, facelets, composition

如何检索包含在 ui:include 中的 facelet 的 clientId？

对于可重用组件，我使用以下语法：`cc.clientId`.

**编辑1**

问题是在[确定绝对 id](https://stackoverflow.com/questions/12688674/determine-absolute-id)的上下文中。要包含动态编辑器，我使用[自定义 include](https://stackoverflow.com/questions/10088975/display-dynamic-editors-in-jsf-with-uiinclude)。

DynamicInclude、DynamicIncludeComponent 和 DynamicIncludeHandler 的源代码可以在：[http](http://pastebin.com/5e2dgR15) ://pastebin.com/5e2dgR15 找到。我不得不删除在`getSrc`DynamicInclude 的方法中测试 src 是否为 null 的行，并更改`getFamily`为返回一个非 null 值。这是我在我的案例中可以找到和使用的唯一动态包含的实现。在这一刻，我没有知识做一个更好的。拥有动态包含对我的项目至关重要，因为它在很多地方都使用过（@BalusC：如果可能的话，我希望看到这样的组件被添加到 OmniFaces 中）。

我对绝对客户端 ID 的问题与为`<custom:include>`. 在我的情况下是`tabs:0:editorsGroup:4:editor3`. 我已经看到命名容器，例如`<p:dataTable>`or `<p:tabView>`，会在 id(tabs:0, editorsGroup:4) 中添加一个数字。我不确定这个自定义包含是否 100% 是 NamingContainer。DynamicIncludeComponent 实现 NamingContainer，但我不能将绝对客户端 ID 用作`:tabs:editorsGroup:editor`.

对于来自[确定绝对 id](https://stackoverflow.com/questions/12688674/determine-absolute-id)`organizationUnit`的编辑器，我在更新中使用了一种解决方法。使用，在 cc.clientId 的某些部分被删除后，计算了绝对客户端 ID。`absolute_id_of_organization_unit``#{eval.getAbsoluteId(cc.clientId, 'organizationUnit')`

我曾尝试在 a 的帮助下进行更新`<p:remoteCommand>`，但没有成功。所以我认为我可以为`organizationUnit`编辑器做一个类似的解决方法。为此，我必须获取父 ID，即 getAbsoluteId 方法的第一个参数。

这些是我奇怪的要求的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:27:13.103

我通过创建类似于`#{p:component(componentId)}`. 它除了返回客户端 ID 之外，还从生成的客户端 ID 中删除行索引信息。

函数定义`WEB-INF/utils`如下：

```
... doctype ommited
<facelet-taglib xmlns="http://java.sun.com/JSF/Facelet">
    <namespace>geneous.client.jsf/utils</namespace>
    <function>
        <function-name>absolute</function-name>
        <function-class>com.acme.util.ComponentUtils</function-class>
        <function-signature>java.lang.String getAbsoluteClientId(java.lang.String)</function-signature>
    </function>
</facelet-taglib> 
```

里面`web.xml`

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/utils/utils.taglib.xml</param-value>
</context-param> 
```

函数示例代码：

```
public static String getAbsoluteClientId(String id) {
    final String clientId = removeRowIndexFromClientId(id);
    FacesContext facesContext = FacesContext.getCurrentInstance();
    final char separator = UINamingContainer.getSeparatorChar(facesContext);        
    StringBuilder idBuilder = new StringBuilder();
    idBuilder.append(separator).append(clientId);
    return idBuilder.toString();        
}

public static String removeRowIndexFromClientId(String id) {
    String clientId = findComponentClientId(id);
    FacesContext facesContext = FacesContext.getCurrentInstance();
    final char separator = UINamingContainer.getSeparatorChar(facesContext);
    final String regex = String.valueOf(separator) + "[0-9]+";
    return clientId.replaceAll(regex, "");
} 
```

该函数用作`#{<utils:absolute('componentId')>}`.

# sql - 重复 While 语句

> ID：14776407
> 
> 赞同：1
> 
> 时间：2013-02-08T15:54:23.687
> 
> 标签：sql, while-loop

我需要关于 While 语句的帮助，我以前从未使用过，并且想知道必须重复序列，直到我达到目标：

例如

```
1
2
3
4
1
2
3
4
Until 5000 
```

我试图写自己的，但被卡住了：

```
USE Occupancy
CREATE TABLE Bookings2
(Booking_Skey   INT IDENTITY (1,1) not null,
PitchType_Skey  INT  not null)

DECLARE @PitchType_Skey INT
SET @PitchType_Skey = 1
WHILE (@PitchType_Skey <= 4)

BEGIN
INSERT INTO Bookings2(PitchType_Skey)
SELECT @PitchType_Skey
SET @PitchType_Skey = @PitchType_Skey + 1
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:55:11.063

你实际上不需要一段时间，因为你可以使用 master..spt_values

```
WITH t1250
     AS (SELECT TOP 1250 Row_number() 
                           OVER( 
                             ORDER BY t1.number) AS N 
         FROM   master..spt_values t1 
                CROSS JOIN master..spt_values t2) 
INSERT INTO Bookings2
      (PitchType_Skey)

SELECT v.number 
FROM   master..spt_values v 
       CROSS JOIN t1250
WHERE  v.type = 'P' 
       AND v.number > 0 
       AND v.number < 5 
```

[演示](https://data.stackexchange.com/stackoverflow/query/96485/demo-for-14776407)

或者像[msmucker0527 那样](https://stackoverflow.com/a/14776567/119477)使用Moduls

```
WITH t5000
     AS (SELECT TOP 5000 Row_number() 
                           OVER( 
                             ORDER BY t1.number) AS N 
         FROM   master..spt_values t1 
                CROSS JOIN master..spt_values t2) 
INSERT INTO Bookings2
   (PitchType_Skey)
SELECT 
      CASE WHEN n % 4 = 0 THEN 4 ELSE n % 4 END
FROM t5000 
```

[演示](https://data.stackexchange.com/stackoverflow/query/96486/demo-2-for-14776407)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:03:19.840

将您的选择替换为

```
SELECT (CASE WHEN @PitchType_Skey % 4 = 0 THEN 4 ELSE @PitchType_Skey % 4 END) 
```

% 是 Modulus 或 Remainder，所以它得到 @PitchType_Skey / 4 的余数（保证值小于 4）

然后你必须用 4 替换 0

```
WHILE (@PitchType_Skey <= 5000)
BEGIN
  INSERT INTO Bookings2(PitchType_Skey)
  SELECT (CASE WHEN @PitchType_Skey % 4 = 0 THEN 4 ELSE @PitchType_Skey % 4 END)
  SET @PitchType_Skey = @PitchType_Skey + 1
END 
```

# ios - Obj-C 块作为参数

> ID：14776409
> 
> 赞同：2
> 
> 时间：2013-02-08T15:54:25.113
> 
> 标签：ios, objective-c, methods, pass-by-reference, block

我的代码中定义了一个可以多次调用的 ErrorBlock (errorBlock)。虽然我只想被告知一次有关呼叫的信息，但我的想法是将我的 ErrorBlock (errorBlock) 包装在另一个 (pErrorBlock) 中并将其设置为 nil。

现在我想要一个清理方法，将 innerBlock 的引用设置为 nil。但是当我将内部块交给清理方法（测试 1）时，当我将内部 ErrorBlock 设置为 nil 自身（测试 2）时，我得到了不同的结果。

如何使用测试 1 的（稍微修改的）代码获得测试 2 的结果？

我的第一个测试，鞋子一个我不明白的结果：

```
-(void)testBlocks{
    __block ErrorBlock pErrorBlock= ^(void){
        NSLog(@"Foo");
    };
    NSLog(@"test: %p",pErrorBlock);

    ErrorBlock errorBlock = ^(void){
        dispatch_async(dispatch_get_main_queue(), ^{
            if(pErrorBlock){
                NSLog(@"call: %p",pErrorBlock);
                pErrorBlock();
            }

            [self cleanupErrorBlockWith:pErrorBlock];
        });
    };

    errorBlock();
    errorBlock();
}

- (void) cleanupErrorBlockWith:(ErrorBlock)errorBlock{

    NSLog(@"cleanup: %p",errorBlock);
    errorBlock = nil;
    NSLog(@"after cleanup: %p",errorBlock);
} 
```

结果：

```
2013-02-08 16:39:04.484 Tests[9501:907] test: 0x3a6ba8
2013-02-08 16:39:04.496 Tests[9501:907] call: 0x3a6ba8
2013-02-08 16:39:04.497 Tests[9501:907] Foo
2013-02-08 16:39:04.498 Tests[9501:907] cleanup: 0x3a6ba8
2013-02-08 16:39:04.499 Tests[9501:907] after cleanup: 0x0
2013-02-08 16:39:04.500 Tests[9501:907] call: 0x3a6ba8
2013-02-08 16:39:04.501 Tests[9501:907] Foo
2013-02-08 16:39:04.502 Tests[9501:907] cleanup: 0x3a6ba8
2013-02-08 16:39:04.503 Tests[9501:907] after cleanup: 0x0 
```

我的第二个测试，期望的结果是：

```
-(void)testBlocks{
    __block ErrorBlock pErrorBlock= ^(void){
        NSLog(@"Foo");
    };
    NSLog(@"test: %p",pErrorBlock);

    ErrorBlock errorBlock = ^(void){
        dispatch_async(dispatch_get_main_queue(), ^{
            if(pErrorBlock){
                NSLog(@"call: %p",pErrorBlock);
                pErrorBlock();
                NSLog(@"cleanup: %p",pErrorBlock);
                pErrorBlock = nil;
                NSLog(@"after cleanup: %p",pErrorBlock);
            }
        });
    };

    errorBlock();
    errorBlock();
} 
```

结果：

```
2013-02-08 16:42:18.485 Tests[9540:907] test: 0x3a6ba8
2013-02-08 16:42:18.496 Tests[9540:907] call: 0x3a6ba8
2013-02-08 16:42:18.498 Tests[9540:907] Foo
2013-02-08 16:42:18.499 Tests[9540:907] cleanup: 0x3a6ba8
2013-02-08 16:42:18.500 Tests[9540:907] after cleanup: 0x0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:11:30.887

您正在按值传递块，像这样通过引用传递它。也动你`cleanupErrorBlockWith:`调用里面的`if`语句。

```
-(void)testBlocks{
    __block ErrorBlock pErrorBlock= ^(void){
        NSLog(@"Foo");
    };
    NSLog(@"test: %p",pErrorBlock);

    ErrorBlock errorBlock = ^(void){
        dispatch_async(dispatch_get_main_queue(), ^{
            if(pErrorBlock){
                NSLog(@"call: %p",pErrorBlock);
                pErrorBlock();
                [self cleanupErrorBlockWith:&pErrorBlock];
            }
        });
    };

    errorBlock();
    errorBlock();
}

- (void) cleanupErrorBlockWith:(ErrorBlock*)errorBlock{
    NSLog(@"cleanup: %p",*errorBlock);
    *errorBlock = nil;
    NSLog(@"after cleanup: %p",*errorBlock);
} 
```

# php - PHP 不等待 VB 脚本完成

> ID：14776410
> 
> 赞同：0
> 
> 时间：2013-02-08T15:54:34.463
> 
> 标签：php, windows, shell, vbscript, wmi

尝试编写一个 php 页面，该页面的表单允许您输入远程 IP 或主机名，并检索 RAM 大小和 HD 大小等基本信息。

处理表单数据的代码：

```
 $host = $_POST['host'];
   $cmd = "cscript /nologo remotehostinfo.vbs ".$host;
   $output = shell_exec($cmd);
   echo "<pre>$output</pre>"; 
```

这是 remotehostinfo.vbs 代码，该脚本对远程主机执行 WMI 查询。

```
DIM arg
Set arg = wscript.Arguments
strComputer = arg(0)
On Error Resume Next
wscript.echo "Info"
wscript.echo "------"
'//////// Get Ram Amount
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2")
Set colCSItems = objWMIService.ExecQuery("SELECT * FROM Win32_ComputerSystem")
For Each objCSItem In colCSItems
  ram = int(objCSItem.TotalPhysicalMemory/ 1048576)
Next
wscript.echo "RAM Size: " & ram
wscript.quit 
```

当我从 PHP 页面运行脚本时，它不会返回 RAM 大小，但是如果我从命令提示符运行 vb 脚本，它工作得很好，有人知道我做错了什么吗？PHP 不能运行对远程主机进行查询的 vbscript 吗？

# html - 带有边距自动错误的 IE7 绝对位置

> ID：14776411
> 
> 赞同：1
> 
> 时间：2013-02-08T15:54:37.613
> 
> 标签：html, css, internet-explorer-7

我在 IE7 中的定位和边距有问题。我有绝对位置和自动边距的 div。

```
position: absolute;
top: 0;
right: 0;
left: 0;
bottom: 0;
margin: auto; 
```

这个 div 应该以它的相对位置父级为中心。但在 IE7 中，这是行不通的。这是工作代码的示例[http://jsfiddle.net/3zwkA/](http://jsfiddle.net/3zwkA/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:03:10.933

如果您想将 div 绝对居中在它的父级中，您应该这样做：

```
.child {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 50px;
    height: 50px;
    margin-left:-25px;
    margin-top:-25px;
    border: 1px yellow solid;
} 
```

查看更新[的 jsfiddle](http://jsfiddle.net/soyuka/3zwkA/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:03:10.920

CSS 中的垂直居中是一种 PITA，尤其是当您还需要 IE7（甚至 IE6）支持时。[有很多方法可以做到这一点](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)，但每种方法都有一些缺点。您的方法对应于链接文章中的方法 4，并且已知在 IE < 8 中出现故障。

但是，对于具有固定宽度和高度的元素，一种更强大的方法（本文中的方法 2）包括将其定位在`top: 50%; left: 50%`顶部和左侧边距并减去宽度的一半。这适用于所有浏览器。[在这里，有一个小提琴](http://jsfiddle.net/MattiasBuelens/uBhGV/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T16:11:04.210

我个人的“hack”是使用 left 和 top 放置元素，然后使用负边距正确移动它

```
position: absolute;
top: 50%;
left: 50%;
width: 50px;
height: 50px;
margin: -25px 0 0 -25px;  //move it left by half the width 
```

# android - Cordova 应用程序在 Android 上未收到基本身份验证挑战的问题

> ID：14776412
> 
> 赞同：0
> 
> 时间：2013-02-08T15:54:38.007
> 
> 标签：android, jquery, cordova

我有一个需要基本身份验证的基于 Cordova 的应用程序。身份验证是使用 AJAX 在 JavaScript 中完成的。我遇到了一个问题，如果用户输入无效的凭据，客户端永远不会收到服务器发送的 401 Unauthorized 响应。相反，请求超时。我可以通过设置 async:false 参数在 iOS 上解决这个问题： [iOS: Authentication using XMLHttpRequest - Handling 401 reponse](https://stackoverflow.com/questions/11025213/ios-authentication-using-xmlhttprequest-handling-401-reponse)，但它不能解决 Android 上的问题。关于如何解决这个问题的任何建议？让用户等待超时以知道他们输入了无效密码并不是最佳选择。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:20:32.727

从 IBM developerWorks 论坛[http://www.ibm.com/developerworks/forums/post!reply.jspa?threadID=470690](http://www.ibm.com/developerworks/forums/post!reply.jspa?threadID=470690)中的相同问题来看，这似乎是一个与 Worklight 相关的问题。

====

基本身份验证器不适用于移动应用程序的上下文。为此，我建议使用基于适配器的身份验证。

使用基于适配器的身份验证，除了超时之外，您还具有 onSuccess 和 onFailure。因此，如果提供不正确的凭据，您将不必等待超时，而是会收到 onFailure。

请参阅 IBM Worklight 的入门页面中的以下主题：

*   [https://www.ibm.com/developerworks/mobile/worklight/getting-started/#authentication](https://www.ibm.com/developerworks/mobile/worklight/getting-started/#authentication)

更具体地说：

*   [ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_20_-_Authentication_Concepts.pdf](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_20_-_Authentication_Concepts.pdf)
*   [ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_22_-_Adapter_Based_Authentication.pdf](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_22_-_Adapter_Based_Authentication.pdf)

# c++ - 在尝试读取仅用于输出的文件时，为流设置了 eofbit 标志。这是为什么？

> ID：14776416
> 
> 赞同：3
> 
> 时间：2013-02-08T15:55:03.233
> 
> 标签：c++, fstream

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    fstream file("out.txt", ios_base::app);

    file.seekg(0, ios_base::beg);

    char buffer[100];

    if( !file.getline(buffer, 99) )
        cout << "file.failbit  " << boolalpha << file.fail() << "   file.eofbit   " << file.eof()
                 << '\n'
             << "file.badbit   " << file.bad() << "  file.goodbit  " << file.good() << '\n';

} 
```

输出

![在此处输入图像描述](../Images/7e6b38093391a799140bcef5513c2786.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:43:07.530

该标准禁止您读取仅为输出而打开的文件。从第 27.9.1.1.3 段`basic_filebuf`（底层实现的一部分`fstream`）开始：

> 如果文件未打开以进行读取，则无法读取输入序列。

因此，人们会期望`failbit`在尝试从仅为写入而打开的文件中读取时看到。该标准还说，`eofbit`只要`getline`到达输入序列的末尾，就会设置它。由于您实际上有一个空输入序列（即，您无法读取的文件），因此对 getline 的第一次调用`eofbit`也会设置。在标准语言中，底层流缓冲区**下溢**。 `basic_streambuf::underflow()`失败返回`traits::eof()`（见 27.6.3.4.3 第 7-17 段）。

要解决此问题，请添加`ios_base::in`到文件的 openmode。

# android - android后退按钮使应用程序存在于真实设备上

> ID：14776428
> 
> 赞同：0
> 
> 时间：2013-02-08T15:55:22.977
> 
> 标签：android, android-emulator

我有`Welcome`活动，如果用户按下一个按钮，`Signin`就会出现一个活动，当我在模拟器上并按回时，它会从`signin`一个活动转到另一个`welcome`活动，但是当我在真正的设备上并按回时，程序是存在的，为什么请?

我会给你我在`signin`活动中的功能

```
public class Signin extends Activity implements OnClickListener {

    android.content.SharedPreferences someData;

    // Views
    EditText et_username, et_password;
    Button b_signin;
    Spinner s_type;
    TextView tv_usernameError, tv_passwordError, tv_signup, tv_forgetPassword;
    //
String username, password, IP, filename = "mySharedString";
protected void onCreate(Bundle savedInstanceState    ){}
private String getIP(){}
private void initialize(){}
public void onClick(View v){} 
```

### 编辑

在我的`welcome`活动中，我有这个功能，因为我想在用户按下任何按钮时停止音乐

```
@Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        ourSong.release();
        finish();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:03:11.767

召唤`finish()`你的`onPause()`遗嘱会导致你的活动结束。我无法解释为什么它在模拟器中工作，但删除对`finish()`from的调用`onPause`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:05:44.493

由于您在 onPause() 中调用 Finish()，因此您的 Welcome Activity 将被完成/终止。

如果您希望将活动堆叠起来，请确保您永远不会杀死第一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:06:56.567

嗯...也许您可以在主活动中使用 onCreat 方法来启动 sing in 活动，并从 sing in 活动的 onCreat 方法中，当用户单击返回按钮时，您可以通过这种方式启动欢迎活动。欢迎活动，他将返回登录活动。

# mysql - MySQL缩小字段的长度

> ID：14776434
> 
> 赞同：0
> 
> 时间：2013-02-08T15:55:39.643
> 
> 标签：mysql, field, maxlength

`VARCHAR 255`一直想知道在使用或`VARCHAR 55` 字段时（例如）在查询速度方面是否有任何本质区别。

我的意思是，如果我将 VARCHAR 255 字段缩小到 VARCHAR 55 的最大长度，我会得到任何好处，如果是的话，会得到什么好处？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:02:55.850

除了它允许的字符数之外，`VARCHAR(55)`没有真正的区别。`VARCHAR(255)`两者都使用一个字节来存储后跟数据的长度，因此这两个示例在存储任何 55 个字符或更少字符的数据时完全相同。差异的阈值为`255`。任何更长的时间都将使用两个字节作为长度。只要您保持在该值或以下，任何最大长度的列都基本相同。

# javascript - Ajax以相同的逻辑返回不同的输出

> ID：14776436
> 
> 赞同：2
> 
> 时间：2013-02-08T15:55:43.523
> 
> 标签：javascript, jquery

我正在尝试下面的代码通过 AJAX 返回一个数组并尝试提醒返回值，但它显示我未定义，同时使用相同的逻辑获得正确的值。

这是我的 HTML 和 JS 代码：

**HTML**

```
<body>
    <div>
    <input type="button" id="getMI" />    
    </div>
</body> 
```

**JS 代码（未定义）**

```
var getId = function () {
    $.ajax({
        type: 'GET',
        url: url,
        dataType: 'json',
        contentType: "application/json",
        success: function (res) {
            objLen = res.length;
            var arrElems = [];
            for (i = 0; i < objLen; i++) {

                arrElems[i] = res[i].ids;

            }
            return arrElems;

        },
        error: function (e) {
            return e;
        }
    })
} 
```

**JS 代码（获取正确的值）**

```
var getId = function(){
 var nums = [];
    for(i=0;i<5;i++) 
    {
        nums[i] = i+1;
    }
 return nums;
} 
```

**警报值**

```
$('#getMI').click(function(){
    var ids = getId();
    alert(ids)      
}) 
```

> 当我直接警告输出（block_faces）时，它给了我正确的值，但是当我尝试返回它显示未定义时。

谁能帮我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:55:29.387

Guys I would like to share something I came to know about solution of my issue. To make call successfully I've used **async:false** following one of the suggestion but I got some issues later on. Issue like I was not able to get **success response** on Safar browser. After posting a question here I came to know that using **async:false** is totally wrong approach.

Here I'm pasting the link of comments and discussion on that.

[Getting error in AJAX response on Safari browser only](https://stackoverflow.com/questions/14996110/getting-error-in-ajax-response-on-safari-browser-only)

Hope it'll help you guys. Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:00:20.040

You can't return from an ajax callback. First of all, it doesn't have anywhere to return *to*. Second, unless it is synchronous (don't do that), the code that comes *after* the ajax call is likely to execute first and you can't get the value you need.

You must use the success callback to handle all of your post-ajax operations, or you can bind more callbacks to the jqXHR object that is returned via `.done`:

```
var getBlockFaceId = function(){
    return $.ajax({

$("#getBFI").on('click', function () {
    getBlockFaceId().done(function () { alert(ids); });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:03:50.553

return 关键字返回触发 return 的当前函数的值。因此，您当前正在编写的返回是返回成功函数的值。因此，为 js 定义一个全局变量并更新该值，如下所示

```
var block_faces = '';
        $.ajax({
                        type:'GET',
                        url:url,
                        dataType:'json',
                        contentType: "application/json",
                        success:function(res){
                            objLen = res.length;
                            var block_faces = [];                   
                            for(i=0;i<objLen;i++)
                            {

                                block_faces[i] = res[i].block_face_id;

                            }  

                        },
                        error:function(e){
                            block_faces = e;
                        }
                    }) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T15:59:55.643

# css - 如何在同一行获取输入 - strong 和 p 元素？

> ID：14776443
> 
> 赞同：0
> 
> 时间：2013-02-08T15:55:57.570
> 
> 标签：css, css-float

我有以下html内容。

```
 <div><input type="checkbox"><strong></strong><p></p></div> 
```

如何在不换行的情况下将这些元素与 p 元素放在同一行？

我试过这个：

```
input
{
   float: left;
   margin: 0;
   padding: 0;
}

strong
{
   float: left;
   margin: 0;
   padding: 0;
}
p
{
   margin: 0;
   padding: 0;
   white-space: nowrap;
} 
```

我对这个 css 设置的不理解是 p 元素占据了 div 元素的整个宽度。例如，div 宽度为 1360，p 元素也是 1360，但 strong 宽度为 184，输入宽度为 16，它们都适合同一行，而 p 元素溢出在水平线上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:58:05.303

浮动：溢出；不存在，它只能是左或右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:06:41.870

您需要将 p 向左浮动。浮动剩下的所有东西都会将它们全部捕捉到同一条线上（只要定位是相对的，你也应该这样做）

```
p{
float: left;
position: relative;
margin: 0;
padding: 0;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:08:31.200

在你给`<p>`a之后`float:left;`，你必须给`<div>`a `overflow:hidden;`。

如果你想降低`<input>`一点，那就给它一个`margin-top`.

检查这个[演示](http://jsfiddle.net/AliBassam/Ygs7j/)。

**CSS**

```
div
{
    overflow:hidden;
}
input
{
   float: left;
   margin: 0;
   padding: 0;
}

strong
{
   float: left;
   margin: 0;
   padding: 0;
}
p
{
   margin: 0;
   padding: 0;
    float:left;
   white-space: nowrap;
} 
```

之所以`<p>`采用全宽，是因为 的`display`属性`<p>`就像`block`一样`<div>`，除非你浮动它，否则它将采用全宽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:08:50.867

始终使用 display:inline 将元素放在一行上：

**HTML：**

```
<div>
    <input type="checkbox" />
    <strong>Hello</strong>
    <p>World</p>
</div> 
```

**CSS：**

```
input{
   float: overflow;
   margin: 0;
   padding: 0;
}

strong
{
   float: overflow;
   margin: 0;
   padding: 0;
}
p
{
   display:inline; 
   margin: 0;
   padding: 0;
   white-space: nowrap;
} 
```

[http://jsfiddle.net/bpze6/1/](http://jsfiddle.net/bpze6/1/)

# plone - 查看克隆目录结果的所有键

> ID：14776446
> 
> 赞同：2
> 
> 时间：2013-02-08T15:56:00.673
> 
> 标签：plone, catalog

如何显示我在目录搜索中获得的项目的所有键？

```
links = self.catalog(portal_path='Link')
for link in links:
    for value in link:
        print value 
```

使用此代码，我可以显示所有值，但我不知道如何显示键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:58:22.707

ZCatalog 不返回字典。它返回一系列结果对象（称为目录大脑，因为您可以赋予它们智能。历史悠久）。

所以你循环它们，每个对象都有你在目录中定义的每个元数据列的属性：

```
links = self.catalog(portal_path='Link')
for link in links:
    print link.Title 
```

如果您需要动态循环可用属性，请使用`.schema()`键：

```
for link in links:
    for key in link.schema():
        print link[attr] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:05:54.870

我找到了这个：

`for link in links: link.schema()`

# hibernate - 使用 Hibernate 更新大量对象的有效方法？

> ID：14776448
> 
> 赞同：0
> 
> 时间：2013-02-08T15:56:04.557
> 
> 标签：hibernate

通过Hibernate高效select'n'update大集合对象的原理是什么？

*   每个对象都可以独立更新
*   必需：有效的内存使用（没有内存不足错误）
*   必需：高效选择
*   必需：高效刷新到 DB

*我相信存储过程或单个`update`查询可能比单独处理每个对象更有效，但我现在不想使用它们。我实际上使用的是 Grails 2.2。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:32:33.190

看看[批量更新](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)，它们正是为此目的而设计的。

# xml - NcML/THREDDS 值元素是否存在硬连线限制？

> ID：14776450
> 
> 赞同：1
> 
> 时间：2013-02-08T15:56:10.970
> 
> 标签：xml, netcdf, ncml, thredds

可以放置在 values NcML 元素中的条目的大小或数量是否有限制？我正在尝试通过添加以下形式的 NcML 条目来获取一组没有 lon/lat 变量但带有 x/y 变量的 NetCDF 文件：

```
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
<variable name="lat_rho" shape="eta_rho xi_rho" type="float">
<attribute name="units" type="String" value="degrees_north" />
<values>[671x191 blankspace-separated latitudes here]</values>
</variable> 
```

lat 和 lon 变量存在于一个单独的文件中，我已经使用 ncks 将它们提取到单个字符串中，我已经将它们卡在适当的位置之间。

featureCollectionScan.log 中的错误消息是：

```
[2013-02-07T15:15:37.386-0600] ERROR ucar.nc2.ft.fmrc.Fmrc: makeFmrcInv
java.lang.NullPointerException 
```

……

```
[2013-02-07T15:15:37.388-0600] ERROR ucar.nc2.ft.fmrc.Fmrc:
/raid/data/txla_nesting6/.*\.nc$: makeFmrcInv failed
java.lang.RuntimeException: java.lang.NullPointerException 
```

……

```
[2013-02-07T15:15:37.694-0600] WARN  ucar.nc2.ft.fmrc.GridDatasetInv: GridDatasetInv
using gds.getStartDate() for run date =%s
[2013-02-07T15:15:37.694-0600] ERROR ucar.nc2.ft.fmrc.Fmrc: makeFmrcInv
java.lang.NullPointerException 
```

.... [2013-02-07T15:15:37.695-0600] 错误 ucar.nc2.ft.fmrc.Fmrc: /raid/data/txla_nesting6/.*.nc$: makeFmrcInv failed java.lang.RuntimeException: java .lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:04:28.403

我不知道您关于`<values>`标签大小限制的问题的答案，但是还有另一种方法可以解决您的问题..

您可以将 lon、lat 值写入 netcdf 文件，然后使用`union`聚合创建一个数据集，该数据集将该 netcdf 文件虚拟连接到另一个 netcdf 文件（或 netcdf 文件的聚合）

例如，如果您有一堆文件，例如：

```
mod_his_0001.nc
mod_his_0002.nc
... 
```

您想要沿`time`维度聚合并创建一个包含 lon,lat 变量的 netcdf 文件：

```
lonlat.nc 
```

您可以像这样将它们聚合在一起：

```
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
 <!-- union the (1) time aggregation with the (2) grid file -->
 <aggregation type="union">
  <!-- (1) time aggregate files like "mod_his_0001.nc" -->
  <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
   <aggregation dimName="time" type="joinExisting">
    <scan
     location="/home/baum/models/run01/"
     regExp=".*mod_his_[0-9]{4}\.nc$"/>
   </aggregation>
  </netcdf>
  <!-- (2) grid file -->
  <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2"
   location="/home/baum/models/lonlat.nc"/>
 </aggregation>
</netcdf> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:35:06.867

XML 中的值数量没有限制。您可以通过制作一个只有该变量的 NcML 文件来测试它。

您看到的问题可能在 FMRC 中，在这里更难调试。确保您使用的是 4.3。

# google-maps-api-3 - 谷歌地图 3 中的最大缩放

> ID：14776452
> 
> 赞同：1
> 
> 时间：2013-02-08T15:56:19.810
> 
> 标签：google-maps-api-3

有没有办法将地图的 maxZoom 更改为 24 级？我将添加高度详细的图像叠加，并希望为用户提供更多放大的能力。

我发现了一些代码（[修改谷歌地图类型的最大缩放级别](https://stackoverflow.com/questions/10517848/modify-the-max-zoom-level-of-a-google-map-type/10519085#10519085)）让我更接近，但还没有雪茄！有关更完整的示例，请参阅[http://jsfiddle.net/vankerck/3qAkB/17/ 。](http://jsfiddle.net/vankerck/3qAkB/17/)请注意，如果您在卫星和道路之间切换几次，您最终将能够在查看道路时缩小到 24 级。

```
function initialize() {
    var maxZoom = 24;
    var mapCenter = new google.maps.LatLng(26.966, -80.612);
    var mapOptions = {
        center: mapCenter,
        zoom: maxZoom,
        streetViewControl: false,
        mapTypeId: google.maps.MapTypeId.SATELLITE,
        maxZoom: maxZoom
    };
    var map = new google.maps.Map($("#map_canvas")[0], mapOptions);

    google.maps.event.addListener(map, 'tilesloaded', function (event) {
        $('#level').html('Level: ' + map.getZoom());
        var mapTypeRegistry = map.mapTypes;
        var currentMapTypeId = map.getMapTypeId();
        var mapType = mapTypeRegistry.get(currentMapTypeId);
        mapType.maxZoom = maxZoom;
    });

    google.maps.event.addListener(map, 'maptypeid_changed', function (event) {
        map.setOptions({ maxZoom: maxZoom });
    });
} 
```

谢谢，

玛丽安

# extjs - 如何在 ExtJS 中提交表单？

> ID：14776457
> 
> 赞同：1
> 
> 时间：2013-02-08T15:56:41.997
> 
> 标签：extjs, extjs4, extjs4.1

我有这段代码，但无论出于何种原因，它都没有提交表单。该`submit()`功能不工作。为什么？

```
function kullaniciPenceresi()
{
    Ext.create('Ext.window.Window', {
    id: 'kullaniciEditWin',
    iconCls: 'icon-user--pencil',
    animateTarget: Ext.getCmp("kullaniciDuzenleButonu"),
    title: 'Kullanıcı Düzenle',
    modal: true,
    items: {  // Let's put an empty grid in just to illustrate fit layout

        bodyPadding: 5,
        width: 350,

        // The form will submit an AJAX request to this URL when submitted
        url: 'php/post_data.php?yol=kullanici_formu',

        // Fields will be arranged vertically, stretched to full width
        layout: 'anchor',
        defaults: {
            anchor: '100%'
        },

        // The fields
        defaultType: 'textfield',
        xtype: "form",
        id: "kullaniciformu",
        items: [

            {
                xtype:'fieldset',
                                    layout: 'anchor',
            defaults: {
                anchor: '100%'
            },
                title: 'Hesap Bilgileri',
                defaultType: 'textfield',
                items:[
                    {
                        fieldLabel: 'Şirket',
                        name: 'OrganizationName',
                        allowBlank: false
                    },

                    {
                        fieldLabel: 'Email',
                        name: 'Email',
                        vtype: "email",
                        allowBlank: false
                    },

                    {
                        fieldLabel: 'Şifre',
                        name: 'sifre',
                        vtype: "password",
                        disabled: true
                    },

                    {
                        fieldLabel: 'GrupName',
                        name: 'first',
                        allowBlank: false,
                        xtype: "combo",

                        displayField: 'name',
                        valueField: 'name',
                        store: store,
                        queryMode: 'local',
                        typeAhead: true  
                    },
                    {
                        xtype: 'buttongroup',
                        items: [
                            {text: 'Yetkilendirme: '},
                            {xtype: 'button', text: 'Bina', iconCls: 'building',

            handler: function() {

                Ext.create('Ext.window.Window', {
                    title: 'Hello',
                    height: 200,
                    modal: true,
                    width: 400,
                    layout: 'fit',
                    items: {  // Let's put an empty grid in just to illustrate fit layout
                        xtype: 'grid',
                        border: false,
                        columns: [{header: 'World'}],                 // One header just for show. There's no data,
                        store: Ext.create('Ext.data.ArrayStore', {}) // A dummy empty data store
                    }
                }).show();

            }
                            },
                            {xtype: 'button', text: 'Daire', iconCls: 'building'},
                            {xtype: 'button', text: 'Cihaz', iconCls: 'counter'}
                        ]
                    },

                ]
        },

        {
            xtype:'fieldset',
            title: 'Kişisel Bilgiler',
            defaultType: 'textfield',
            layout: 'anchor',
            defaults: {
                anchor: '100%'
            },
            items:[

        {
            fieldLabel: 'Ad',
            name: 'FullName',
            allowBlank: false
        },

        {
            fieldLabel: 'Telefon',
            name: 'phone',
            allowBlank: true
        }]
        }]

       },

        buttons: [{
            text: 'Save',
            handler: function() {
                Ext.getCmp("kullaniciformu").submit(); // <----------------
                Ext.getCmp("absolute-panel").load;
                Ext.getCmp("kullaniciEditWin").close();
            }
        },{
            text: 'Cancel',
            handler: function() {
                Ext.getCmp("kullaniciEditWin").close();
            }
        }]
    }).show();
} 
```

编辑：好的，我现在想通了。如果组字段为空，则不提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:10:48.373

必须填写所有字段，以便进行 POST 提交。

# gyroscope - 来自 mems 陀螺仪的姿态计算

> ID：14776459
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:56:50.133
> 
> 标签：gyroscope

我正在使用 MEMS 陀螺仪来计算设备的方向（偏航、俯仰和滚动）。我得到了以下 pdf，其中指定了如何处理芯片中可用的原始数据并计算方向。该文档讲述了如何使用四元数进行计算。谁能告诉我如何处理本文档第 37 页上的方程 14（构建四元数并将其与角速率相乘）。

[http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/TECHNICAL_ARTICLE/DM00034730.pdf](http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/TECHNICAL_ARTICLE/DM00034730.pdf)

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:29:17.823

我强烈推荐[Direction Cosine Matrix IMU: Theory](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)手稿，我已经基于它为[Shimmer 2设备实现了传感器融合。](http://www.shimmer-research.com/products-2/shimmer-revisions)

该手稿基本上是一个教程，非常简单明了。它还使用旋转矩阵而不是四元数，旋转矩阵更容易理解。

不要使用偏航、俯仰和滚动，[欧拉角是邪恶的](https://stackoverflow.com/q/5577334/341970)。

好吧，祝你好运！

# sql-server - 在哪里可以找到 SQL Server 空间数据中的工作

> ID：14776461
> 
> 赞同：1
> 
> 时间：2013-02-08T15:57:01.437
> 
> 标签：sql-server, gis, spatial

在哪里可以找到 SQL Server 空间数据中以前的工作/示例？目的是了解作者是如何创作作品的。今天，我使用的是 SQL Server 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:54:32.147

这是一个示例演练：[将空间数据与 SQL Server 2012、Entity Framework 5 和 ASP.NET MVC 结合使用](http://www.codeproject.com/Articles/446609/Using-Spatial-Data-with-SQL-Server-2012-Entity-Fra)

这是您可以购买的有关该主题的整本书：[Pro Spatial with SQL Server 2012](http://www.apress.com/9781430234913)

# c++ - 使用 CMake 从二进制文件编译和添加目标文件

> ID：14776463
> 
> 赞同：23
> 
> 时间：2013-02-08T15:57:02.650
> 
> 标签：c++, cmake, ld

我正在用 C++ 编写一个 Excel 文件生成器。

我拥有工作所需的一切，但我仍然依赖于一个外部的空 .xlsx 文件，我根据需要解压缩、迭代并添加数据以创建最终文件。

我想通过将 .xlsx 文件转换为可执行文件的 .rodata 部分中的二进制 blob 来删除这种依赖关系，方法是首先将其转换为像这样的目标文件：

```
$ ld -r -b binary -o template.o template.xlsx
$ objcopy --rename-section .data=.rodata,alloc,load,readonly,data,contents template.o template.o 
```

我从博客文章*[http://www.burtonini.com/blog/computers/ld-blobs-2007-07-13-15-50](http://www.burtonini.com/blog/computers/ld-blobs-2007-07-13-15-50)*中获得了这些信息。

第二步是将它链接到二进制文件中，我可以使用`ld`.

如何使用 CMake 自动化这两个步骤？

我目前不知道如何在`ld`第一步运行特定命令，如上面的命令，我尝试在第二步添加`files/template.o`到我的 target_link_libraries，但`ld`只是说：

```
/usr/bin/ld: cannot find -lfiles/template.o 
```

我在 CMakeLists.txt 中添加了以下自定义命令：

```
add_custom_command(OUTPUT files/template.o
      COMMAND ld -r -b binary -o files/template.o files/template.xlsx
      COMMAND objcopy --rename-section .data=.rodata,alloc,load,readonly,data,contents files/template.o files/template.o) 
```

并将 files/template.o 添加到 add_executable 调用中。

不幸的是，CMake 是这样说的：

> ld: 无法打开输出文件 files/template.o: 没有这样的文件或目录

据我了解，中的 OUTPUT 命令`add_custom_command`允许我们告诉 CMake COMMAND 命令正在创建什么文件。所以我现在有点困惑。

我更新了 CMakeLists.txt 文件并添加了一个目标，以确保构建了模板文件：

```
add_custom_target(run ALL
    DEPENDS template.o) 
```

以及确保它在`excelbuilder`目标之前构建的依赖项：

```
add_dependencies(excelbuilder run) 
```

我还更新了自定义命令，如下所示：

```
add_custom_command(OUTPUT template.o
      COMMAND ld -r -b binary -o template.o ${CMAKE_CURRENT_SOURCE_DIR}/files/template.xlsx
      COMMAND objcopy --rename-section .data=.rodata,alloc,load,readonly,data,contents template.o template.o) 
```

当我运行它时，输出如下（使 VERBOSE=1）

```
$ make VERBOSE=1
/usr/bin/cmake -H/home/ravloony/projects/excelparser -B/home/ravloony/projects/excelparser/build --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/ravloony/projects/excelparser/build/CMakeFiles /home/ravloony/projects/excelparser/build/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make[1]: Entering directory `/home/ravloony/projects/excelparser/build'
make -f src/lib/minizip/CMakeFiles/minizip_1-1.dir/build.make src/lib/minizip/CMakeFiles/minizip_1-1.dir/depend
make[2]: Entering directory `/home/ravloony/projects/excelparser/build'
cd /home/ravloony/projects/excelparser/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/ravloony/projects/excelparser /home/ravloony/projects/excelparser/src/lib/minizip /home/ravloony/projects/excelparser/build /home/ravloony/projects/excelparser/build/src/lib/minizip /home/ravloony/projects/excelparser/build/src/lib/minizip/CMakeFiles/minizip_1-1.dir/DependInfo.cmake --color=
make[2]: Leaving directory `/home/ravloony/projects/excelparser/build'
make -f src/lib/minizip/CMakeFiles/minizip_1-1.dir/build.make src/lib/minizip/CMakeFiles/minizip_1-1.dir/build
make[2]: Entering directory `/home/ravloony/projects/excelparser/build'
make[2]: Nothing to be done for `src/lib/minizip/CMakeFiles/minizip_1-1.dir/build'.
make[2]: Leaving directory `/home/ravloony/projects/excelparser/build'
/usr/bin/cmake -E cmake_progress_report /home/ravloony/projects/excelparser/build/CMakeFiles  17 18 19 20 21
[ 22%] Built target minizip_1-1
make -f CMakeFiles/run.dir/build.make CMakeFiles/run.dir/depend
make[2]: Entering directory `/home/ravloony/projects/excelparser/build'
cd /home/ravloony/projects/excelparser/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/ravloony/projects/excelparser /home/ravloony/projects/excelparser /home/ravloony/projects/excelparser/build /home/ravloony/projects/excelparser/build /home/ravloony/projects/excelparser/build/CMakeFiles/run.dir/DependInfo.cmake --color=
Dependee "/home/ravloony/projects/excelparser/build/CMakeFiles/run.dir/DependInfo.cmake" is newer than depender "/home/ravloony/projects/excelparser/build/CMakeFiles/run.dir/depend.internal".
Dependee "/home/ravloony/projects/excelparser/build/CMakeFiles/CMakeDirectoryInformation.cmake" is newer than depender "/home/ravloony/projects/excelparser/build/CMakeFiles/run.dir/depend.internal".
Scanning dependencies of target run
make[2]: Leaving directory `/home/ravloony/projects/excelparser/build'
make -f CMakeFiles/run.dir/build.make CMakeFiles/run.dir/build
make[2]: Entering directory `/home/ravloony/projects/excelparser/build'
/usr/bin/cmake -E cmake_progress_report /home/ravloony/projects/excelparser/build/CMakeFiles 22
[ 27%] Generating template.o
ld -r -b binary -o template.o /home/ravloony/projects/excelparser/files/template.xlsx
objcopy --rename-section .data=.rodata,alloc,load,readonly,data,contents template.o template.o
make[2]: Leaving directory `/home/ravloony/projects/excelparser/build'
/usr/bin/cmake -E cmake_progress_report /home/ravloony/projects/excelparser/build/CMakeFiles  22
[ 27%] Built target run
make -f CMakeFiles/excelbuilder.dir/build.make CMakeFiles/excelbuilder.dir/depend
make[2]: Entering directory `/home/ravloony/projects/excelparser/build'
cd /home/ravloony/projects/excelparser/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/ravloony/projects/excelparser /home/ravloony/projects/excelparser /home/ravloony/projects/excelparser/build /home/ravloony/projects/excelparser/build /home/ravloony/projects/excelparser/build/CMakeFiles/excelbuilder.dir/DependInfo.cmake --color=
make[2]: Leaving directory `/home/ravloony/projects/excelparser/build'
make -f CMakeFiles/excelbuilder.dir/build.make CMakeFiles/excelbuilder.dir/build
make[2]: Entering directory `/home/ravloony/projects/excelparser/build'
Linking CXX executable excelbuilder
/usr/bin/cmake -E cmake_link_script CMakeFiles/excelbuilder.dir/link.txt --verbose=1
/usr/bin/c++   -std=c++0x  -g -ftest-coverage -fprofile-arcs -fpermissive    CMakeFiles/excelbuilder.dir/src/common/exception.cpp.o CMakeFiles/excelbuilder.dir/src/excelbuilder/retriever.cpp.o CMakeFiles/excelbuilder.dir/src/excelbuilder/xlsx.cpp.o CMakeFiles/excelbuilder.dir/src/common/config.cpp.o CMakeFiles/excelbuilder.dir/src/excelbuilder/main.cpp.o  -o excelbuilder -rdynamic src/lib/minizip/libminizip_1-1.so -ltinyxml2 -lmysqlcppconn -lboost_regex-mt -ltemplate.o -lz -Wl,-rpath,/home/ravloony/projects/excelparser/build/src/lib/minizip
/usr/bin/ld: cannot find -ltemplate.o
collect2: error: ld returned 1 exit status
make[2]: *** [excelbuilder] Error 1
make[2]: Leaving directory `/home/ravloony/projects/excelparser/build'
make[1]: *** [CMakeFiles/excelbuilder.dir/all] Error 2
make[1]: Leaving directory `/home/ravloony/projects/excelparser/build'
make: *** [all] Error 2 
```

但是文件 template.o 已经正确生成并且在文件夹中。似乎需要`ld`一个系统库。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-14T11:30:15.637

最后，我就是这样做的。

```
add_custom_command(OUTPUT template.o
      COMMAND cd ${CMAKE_CURRENT_SOURCE_DIR}/files && ld -r -b binary -o ${CMAKE_CURRENT_BINARY_DIR}/template.o template.xlsx
      COMMAND objcopy --rename-section .data=.rodata,alloc,load,readonly,data,contents ${CMAKE_CURRENT_BINARY_DIR}/template.o ${CMAKE_CURRENT_BINARY_DIR}/template.o) 
```

这些`cd`命令在那里是因为`ld`将自动声明的变量的名称设置为取决于传递给输入文件的完整路径的名称。因此，如果输入文件是`/home/user/project/files/template.xlsx`，则变量将类似于`_binary_home_user_project_files_template_xlsx_start`. 对于便携式编译来说并不酷。

```
add_library(template
        STATIC
        template.o) 
```

告诉链接器将目标文件编译成二进制文件。这也添加了一个名为`template`.

然后

```
SET_SOURCE_FILES_PROPERTIES(
  template.o
  PROPERTIES
  EXTERNAL_OBJECT true
  GENERATED true
  ) 
```

告诉 CMake 不要编译在构建时生成的文件。

```
SET_TARGET_PROPERTIES(
  template
  PROPERTIES
  LINKER_LANGUAGE C 
  ) 
```

否则我们会收到一条错误消息，因为 CMake 无法从“.o”后缀中找出它是我们需要的 C 链接器。

然后在我的`target_link_libraries`步骤中，我只是添加`template`了一个目标。

```
target_link_libraries (excelbuilder
            ${MINIZIP_LIB_NAME}
            ${TINYXML_LIBRARIES}
            ${MYSQLCONNECTORCPP_LIBRARY}
            ${Boost_LIBRARIES}
            template
            ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:42:54.080

要将目标文件链接到可执行文件，请将其添加到源文件列表中，`add_executable()`而不是尝试将其添加到`target_link_libraries()`.

要首先生成目标文件，请参阅[add_custom_command()](http://cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command)。在这种情况下，您将需要使用其指定`OUTPUT`参数的形式。

# c++ - 派生类对象的地址超过 1 个？

> ID：14776469
> 
> 赞同：13
> 
> 时间：2013-02-08T15:57:24.760
> 
> 标签：c++, polymorphism

在“Effective C++”（第 3 版，第 118 页）的第 27 项中，Scott Meyers 说：

```
class Base { ... };
class Derived: public Base { ... };
Derived d;
Base *pb = &d; 
```

> 这里我们只是创建了一个指向派生类对象的基类指针，但有时，这两个指针并不相同。在这种情况下，将在运行时将偏移量应用于`Derived*`指针以获得正确的`Base*`指针值。
> 
> 最后一个例子说明了单个对象（例如，类型为 的对象`Derived`）可能有多个地址（例如，当`Base*`指针指向时它的地址和当指针指向时它的地址`Derived*`）。

这里有点难以理解。我知道指向基类的指针可以在运行时指向派生类的对象，这称为多态或动态绑定。但是派生类对象在内存中真的有超过 1 个地址吗？

我想我在这里有一些误解。有人可以澄清一下吗？也许这与 C++ 编译器中多态性的实现方式有关？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T16:03:34.340

就试一试吧：

```
class B1
{
    int i;
};

class B2
{
    int i;
};

class D : public B1, public B2
{
    int i;
};

int
main()
{
    D aD;
    std::cout << &aD << std::endl;
    std::cout << static_cast<B1*>( &aD ) << std::endl;
    std::cout << static_cast<B2*>( &aD ) << std::endl;
    return 0;
} 
```

子对象不可能有与`B1`子对象相同的地址`B2`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T16:03:06.557

一个对象只有一个地址；那就是它在内存中的位置。当您创建一个指向**基本**子对象的指针时，您将获得该子对象的地址，并且该地址不必与包含它的对象的地址相同。一个更简单的例子：

```
struct S {
    int i;
    int j;
};

S s; 
```

的地址`s`将不同于 的地址`s.j`。

类似地，基本子对象的地址不必与派生对象的地址相同。通常是单继承，但是当多继承发挥作用时，忽略空基类，最多一个基子对象可以与派生对象具有相同的地址。因此，当您将指向派生对象的指针转换为指向其基数之一的指针时，您不一定会获得与派生对象的地址相同的值。

# c# - C# MVC - 调用回复时用户重复

> ID：14776470
> 
> 赞同：0
> 
> 时间：2013-02-08T15:57:31.567
> 
> 标签：c#, asp.net-mvc, database, linq

我正在尝试使用 MVC 制作一个简单的论坛，但我无法弄清楚为什么发布回复的用户会被重复。

这是回复操作：

```
[HttpPost]
    public ActionResult Reply(string Title, string Content,int ReplyTo)
    {
        Post masterPost = db.Posts.FirstOrDefault(p => p.PostID == ReplyTo);
        Post post = new Post();
        post.PostID = 0;
        post.CreatedOn = DateTime.Now;
        post.ModifiedOn = DateTime.Now;
        post.ReplyTo = masterPost;
        post.Forum = db.Forums.FirstOrDefault(f=>f.ForumID == masterPost.Forum.ForumID);
        post.User = (User)Session["User"];
        post.Title = Title;
        post.Content = Content;

        //if (ModelState.IsValid)
        //{
            db.Posts.Add(post);
            db.SaveChanges();
            return RedirectToAction("View", "Posts", new { id = ReplyTo });
        //}
        return View(post);
    } 
```

这是 Post 实体：

```
public class Post
{
    [Key]
    public int PostID { get; set; }
    public string Title { get; set; }
    [DataType(DataType.MultilineText)]
    public string Content { get; set; }
    public DateTime CreatedOn { get; set; }
    public DateTime? ModifiedOn { get; set; }
    public virtual Forum Forum { get; set; }
    public virtual User User { get; set; }
    public virtual Post ReplyTo { get; set; }
} 
```

这是用户实体：

```
public class User
{
    public int UserID { get; set; }
    public string Name { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
    public DateTime RegisteredOn { get; set; }
} 
```

每当调用ReplyTo 操作时，它都会创建帖子，但它也会复制存储在会话中的用户（具有不同的用户ID）。

另外，我对*ModelState.IsValid*进行了评论，因为由于某种原因，尽管实体已完全填充并且没有可能导致其无效的 DataAnnotations，但它始终返回为 false。

**编辑** 这是ModelState的错误： *{“从类型'System.String'到类型'Models.Post'的参数转换失败，因为没有类型转换器可以在这些类型之间转换。”}*

我究竟做错了什么？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:16:37.267

我可以告诉你为什么 ModelState 无效。您不必拥有 DataAnnotations 即可使属性成为必需。由于您不能将原语设置为 null，因此它们也算作“必需”属性，如果未提供任何属性，则 ModelState 将变为无效。

在上面的示例中，我认为您没有发布 CreatedOn 或 PostId 属性（或两者）。由于您只发布了两个对您有价值的属性（标题和内容），因此您最好创建一个仅包含这两个属性的简单视图模型。如果您不想这样做，即使接受两个命名参数也会更好。

以下是使用视图模型的示例。请注意，您可以将 ReplyTo 属性添加到视图模型。

```
public class PostViewModel
{
    public int ReplyTo {get; set;}
    public string Title { get; set; }
    [DataType(DataType.MultilineText)]
    public string Content { get; set; }
 } 
```

你可以像这样使用它：

```
 [HttpPost]
    public ActionResult Reply(PostViewModel viewModel)
    {
        Post masterPost = db.Posts.FirstOrDefault(p => p.PostID == viewModel.ReplyTo);
        Post post = new Post();
        post.PostID = 0;
        post.CreatedOn = DateTime.Now;
        post.ModifiedOn = DateTime.Now;
        post.ReplyTo = masterPost;
        post.Forum = db.Forums.FirstOrDefault(f=>f.ForumID == masterPost.Forum.ForumID);
        post.User = (User)Session["User"];
        post.Title = viewModel.Title;
        post.Content = viewModel.Content;

        if (ModelState.IsValid)
        {
            db.Posts.Add(post);
            db.SaveChanges();
            return RedirectToAction("View", "Posts", new { id = ReplyTo });
        }
        return View(post);
    } 
```

至于被复制的用户，我认为原因是 User 类中缺少 Key 属性。

# ios - 触摸时取消 UIButton 触摸

> ID：14776472
> 
> 赞同：9
> 
> 时间：2013-02-08T15:57:46.887
> 
> 标签：ios, cocoa-touch, uibutton

我有一种情况，用户会触摸 UIButton，虽然他们可能已经在触摸它，但我需要能够取消它或导致它失败。

我曾尝试使用 button.enabled 和 userInteractionEnabled，但两者都不能即时工作。两者都必须在触摸开始之前设置。

我可以让按钮在被触摸之后和被触摸时失效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T16:42:51.280

您需要为您的按钮注册两个操作，一个用于触摸，一个用于触摸。在着陆时，您可以决定是否要取消；并在触摸中，编写按钮按下的实际逻辑。

```
[button addTarget:self action:@selector(touchDown:) forControlEvents:UIControlEventTouchDown]; 

- (IBAction)touchDown:(id)sender
{
    UIButton *b = (UIButton*)sender;

    // Call this if you wish to cancel the event tracking
    [b cancelTrackingWithEvent:nil];
} 
```

有关参考，请参阅[in](https://developer.apple.com/documentation/uikit/uicontrol/1618219-canceltrackingwithevent?language=objc)[的文档`-cancelTrackingWithEvent:``UIControl`](https://developer.apple.com/documentation/uikit/uicontrol/1618219-canceltrackingwithevent?language=objc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:25:38.720

您可以做的一件事是根据您的需要自定义按钮的按下外观。利用： `– setBackgroundImage:@"NormalStateImage.png" forState: UIControlStateNormal` `– setBackgroundImage:@"HighlightedStateImage.png" forState: UIControlStateHighlighted`

将属性设置`adjustsImageWhenHighlighted`为 NO 并将`adjustsImageWhenDisabled`属性设置为 NO

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-06T07:41:46.290

这可以对任何`UIButton`. 如果您想在用户按下按钮时取消按钮按下，这些步骤应该有效：

1.  为需要检查取消的事件设置处理程序。在这种情况下，当按钮按下时。

    ```
    [yourButton addTarget: self
                   action: @selector(buttonIsDownHandler:)
         forControlEvents: UIControlEventTouchDown]; 
    ```

2.  在handler中，决定是否取消按下

    ```
    -(IBAction) buttonIsDownHandler: (id) sender
    {
       if (needToCancelThisPress)
       {
          [yourButton cancelTrackingWithEvent: nil];
       }
    } 
    ```

3.  `UIControlEventTouchCancel`取消后将调用按钮的处理程序。

可以随时取消按钮触摸取消。例如，如果您想跟踪用户何时按住太久，您可以在`UIControlEventTouchDown`处理程序中启动一个计时器，然后在计时器到期时取消触摸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:01:26.637

只需使用 BOOL 变量来指示是否允许按钮操作，并在必要时进行检查。Enabled 和 userinteractionenabled 通常只是为了禁用触摸

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T16:04:59.593

不确定您的问题，但您可以根据控制事件采取不同的操作，如下所示

```
[button addTarget:self
                     action:@selector(onTouchUpInside:)
           forControlEvents:(UIControlEventTouchUpInside)]; 

[button addTarget:self
                     action:@selector(onTouchDown:)
           forControlEvents:(UIControlEventTouchDown)]; 

[button addTarget:self
                     action:@selector(onTouchUpOutside:)
           forControlEvents:(UIControlEventTouchUpOutside)]; 
```

如果它没有帮助或您正在寻找什么，请原谅。

# c# - WinRTXAML 工具包 BindableSelection 无法正常工作

> ID：14776481
> 
> 赞同：1
> 
> 时间：2013-02-08T15:58:16.317
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我在绑定到 ListView 的 SelectedItems 属性时遇到问题。我在 ViewModel 中有一个如下所示的属性：

```
private ObservableCollection<string> _FilteredCountries;
    public ObservableCollection<string> FilteredCountries
    {
        get { return _FilteredCountries; }
        set
        {
            if (value != _FilteredCountries)
            {
                _FilteredCountries = value;
                OnPropertyChanged("FilteredCountries");
            }
        }
    } 
```

在 XAML 中，我在弹出窗口中创建了一个这样的 ListView：

```
<Popup>
   <ListView 
      ItemsSource="{Binding CountryList}"
      SelectionMode="Multiple"
      extensions:ListViewExtensions.BindableSelection="{Binding FilteredCountries, Mode=TwoWay}">
</Popup> 
```

当我第一次打开弹出窗口并选择一些项目时，FilteredCountries 集合会更改并包含所选项目。但是在我关闭弹出窗口并再次打开它以选择或取消选择更多项目后，FilteredCountries 集合不会改变，它与第一次后保持相同。在我看来，绑定模式设置为 OneTime，但事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T22:13:55.777

有趣的是，它似乎受到了我的大多数附加行为如何实现的错误的影响。基本上是为了避免泄漏绑定到持久视图模型的视图 - 我在卸载控件时分离行为处理程序，但是当再次加载控件的相同实例时（当您的弹出窗口重新打开时）它永远不会重新连接。我将需要修改我如何实现我的附加行为。此外，该行为假定第一次将列表与视图模型结合时选择为空，因此它需要更新才能在您的场景中工作。

现在对您的修复是始终使用 ListView 的新实例，但也使用行为的更新版本。要每次都使用新的 ListView 实例，您可以这样做：

```
<Popup x:Name="CountryListPopup" IsOpen="False" Grid.RowSpan="2" Grid.ColumnSpan="2">
    <Grid x:Name="CountryListPopupGrid" Background="#323232" Opacity="0.8">
        <Grid.Resources>
            <DataTemplate
                x:Name="ListViewTemplate">
                <ListView
                    Grid.Row="1"
                    Grid.Column="1"
                    ItemsSource="{Binding CountryList}"
                    Background="WhiteSmoke"
                    BorderThickness="4"
                    BorderBrush="#323232"
                    SelectionMode="Multiple"
                    extensions:ListViewExtensions.BindableSelection="{Binding FilteredCountries, Mode=TwoWay}">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <StackPanel
                                Orientation="Horizontal"
                                Margin="20">
                                <TextBlock
                                    Text="{Binding}"
                                    Margin="30,0,0,0"
                                    VerticalAlignment="Center"
                                    FontSize="18" />
                            </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </DataTemplate>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="10*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="CountryOKButton" Content="OK" FontSize="26" Click="CountryOKButton_OnClick" Grid.Row="2" Grid.Column="1"/>

    </Grid>
</Popup> 
```

在你后面的代码中：

```
private ListView _listViewInstance;
private void CountryListButton_OnClick(object sender, RoutedEventArgs e)
{
    CountryListPopupGrid.Width = Window.Current.Bounds.Width;
    CountryListPopupGrid.Height = Window.Current.Bounds.Height;
    _listViewInstance = (ListView)ListViewTemplate.LoadContent();
    CountryListPopupGrid.Children.Add(_listViewInstance);
    CountryListPopup.IsOpen = true;
}

private void CountryOKButton_OnClick(object sender, RoutedEventArgs e)
{
    MainPageViewModel vm = this.DataContext as MainPageViewModel;
    foreach (string filteredCountry in vm.FilteredCountries)
    {
        Debug.WriteLine(filteredCountry);
    }
    CountryListPopup.IsOpen = false;
    CountryListPopupGrid.Children.Remove(_listViewInstance);
    _listViewInstance = null;
} 
```

行为的更新版本：

```
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace WinRTXamlToolkit.Controls.Extensions
{
    /// <summary>
    /// Extension methods and attached properties for the ListView class.
    /// </summary>
    public static class ListViewExtensions
    {
        #region BindableSelection
        /// <summary>
        /// BindableSelection Attached Dependency Property
        /// </summary>
        public static readonly DependencyProperty BindableSelectionProperty =
            DependencyProperty.RegisterAttached(
                "BindableSelection",
                typeof (object),
                typeof (ListViewExtensions),
                new PropertyMetadata(null, OnBindableSelectionChanged));

        /// <summary>
        /// Gets the BindableSelection property. This dependency property 
        /// indicates the list of selected items that is synchronized
        /// with the items selected in the ListView.
        /// </summary>
        public static ObservableCollection<object> GetBindableSelection(DependencyObject d)
        {
            return (ObservableCollection<object>)d.GetValue(BindableSelectionProperty);
        }

        /// <summary>
        /// Sets the BindableSelection property. This dependency property 
        /// indicates the list of selected items that is synchronized
        /// with the items selected in the ListView.
        /// </summary>
        public static void SetBindableSelection(
            DependencyObject d,
            ObservableCollection<object> value)
        {
            d.SetValue(BindableSelectionProperty, value);
        }

        /// <summary>
        /// Handles changes to the BindableSelection property.
        /// </summary>
        /// <param name="d">
        /// The <see cref="DependencyObject"/> on which
        /// the property has changed value.
        /// </param>
        /// <param name="e">
        /// Event data that is issued by any event that
        /// tracks changes to the effective value of this property.
        /// </param>
        private static void OnBindableSelectionChanged(
            DependencyObject d,
            DependencyPropertyChangedEventArgs e)
        {
            dynamic oldBindableSelection = e.OldValue;
            dynamic newBindableSelection = d.GetValue(BindableSelectionProperty);

            if (oldBindableSelection != null)
            {
                var handler = GetBindableSelectionHandler(d);
                SetBindableSelectionHandler(d, null);
                handler.Detach();
            }

            if (newBindableSelection != null)
            {
                var handler = new ListViewBindableSelectionHandler(
                    (ListViewBase)d, newBindableSelection);
                SetBindableSelectionHandler(d, handler);
            }
        }
        #endregion

        #region BindableSelectionHandler
        /// <summary>
        /// BindableSelectionHandler Attached Dependency Property
        /// </summary>
        public static readonly DependencyProperty BindableSelectionHandlerProperty =
            DependencyProperty.RegisterAttached(
                "BindableSelectionHandler",
                typeof (ListViewBindableSelectionHandler),
                typeof (ListViewExtensions),
                new PropertyMetadata(null));

        /// <summary>
        /// Gets the BindableSelectionHandler property. This dependency property 
        /// indicates BindableSelectionHandler for a ListView - used
        /// to manage synchronization of BindableSelection and SelectedItems.
        /// </summary>
        public static ListViewBindableSelectionHandler GetBindableSelectionHandler(
            DependencyObject d)
        {
            return
                (ListViewBindableSelectionHandler)
                d.GetValue(BindableSelectionHandlerProperty);
        }

        /// <summary>
        /// Sets the BindableSelectionHandler property. This dependency property 
        /// indicates BindableSelectionHandler for a ListView - used to manage synchronization of BindableSelection and SelectedItems.
        /// </summary>
        public static void SetBindableSelectionHandler(
            DependencyObject d,
            ListViewBindableSelectionHandler value)
        {
            d.SetValue(BindableSelectionHandlerProperty, value);
        }
        #endregion

        #region ItemToBringIntoView
        /// <summary>
        /// ItemToBringIntoView Attached Dependency Property
        /// </summary>
        public static readonly DependencyProperty ItemToBringIntoViewProperty =
            DependencyProperty.RegisterAttached(
                "ItemToBringIntoView",
                typeof (object),
                typeof (ListViewExtensions),
                new PropertyMetadata(null, OnItemToBringIntoViewChanged));

        /// <summary>
        /// Gets the ItemToBringIntoView property. This dependency property 
        /// indicates the item that should be brought into view.
        /// </summary>
        public static object GetItemToBringIntoView(DependencyObject d)
        {
            return (object)d.GetValue(ItemToBringIntoViewProperty);
        }

        /// <summary>
        /// Sets the ItemToBringIntoView property. This dependency property 
        /// indicates the item that should be brought into view when first set.
        /// </summary>
        public static void SetItemToBringIntoView(DependencyObject d, object value)
        {
            d.SetValue(ItemToBringIntoViewProperty, value);
        }

        /// <summary>
        /// Handles changes to the ItemToBringIntoView property.
        /// </summary>
        /// <param name="d">
        /// The <see cref="DependencyObject"/> on which
        /// the property has changed value.
        /// </param>
        /// <param name="e">
        /// Event data that is issued by any event that
        /// tracks changes to the effective value of this property.
        /// </param>
        private static void OnItemToBringIntoViewChanged(
            DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            object newItemToBringIntoView =
                (object)d.GetValue(ItemToBringIntoViewProperty);

            if (newItemToBringIntoView != null)
            {
                var listView = (ListView)d;
                listView.ScrollIntoView(newItemToBringIntoView);
            }
        }
        #endregion

        /// <summary>
        /// Scrolls a vertical ListView to the bottom.
        /// </summary>
        /// <param name="listView"></param>
        public static void ScrollToBottom(this ListView listView)
        {
            var scrollViewer = listView.GetFirstDescendantOfType<ScrollViewer>();
            scrollViewer.ScrollToVerticalOffset(scrollViewer.ScrollableHeight);
        }
    }

    public class ListViewBindableSelectionHandler
    {
        private ListViewBase _listView;
        private dynamic _boundSelection;
        private readonly NotifyCollectionChangedEventHandler _handler;

        public ListViewBindableSelectionHandler(
            ListViewBase listView, dynamic boundSelection)
        {
            _handler = OnBoundSelectionChanged;
            Attach(listView, boundSelection);
        }

        private void Attach(ListViewBase listView, dynamic boundSelection)
        {
            _listView = listView;
            _listView.Unloaded += OnListViewUnloaded;
            _listView.SelectionChanged += OnListViewSelectionChanged;
            _boundSelection = boundSelection;
            _listView.SelectedItems.Clear();

            foreach (object item in _boundSelection)
            {
                if (!_listView.SelectedItems.Contains(item))
                {
                    _listView.SelectedItems.Add(item);
                }
            }

            var eventInfo =
                _boundSelection.GetType().GetDeclaredEvent("CollectionChanged");
            eventInfo.AddEventHandler(_boundSelection, _handler);
            //_boundSelection.CollectionChanged += OnBoundSelectionChanged;
        }

        private void OnListViewSelectionChanged(
            object sender, SelectionChangedEventArgs e)
        {
            foreach (dynamic item in e.RemovedItems)
            {
                if (_boundSelection.Contains(item))
                {
                    _boundSelection.Remove(item);
                }
            }
            foreach (dynamic item in e.AddedItems)
            {
                if (!_boundSelection.Contains(item))
                {
                    _boundSelection.Add(item);
                }
            }
        }

        private void OnBoundSelectionChanged(
            object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action ==
                NotifyCollectionChangedAction.Reset)
            {
                _listView.SelectedItems.Clear();

                foreach (var item in _boundSelection)
                {
                    if (!_listView.SelectedItems.Contains(item))
                    {
                        _listView.SelectedItems.Add(item);
                    }
                }

                return;
            }

            if (e.OldItems != null)
            {
                foreach (var item in e.OldItems)
                {
                    if (_listView.SelectedItems.Contains(item))
                    {
                        _listView.SelectedItems.Remove(item);
                    }
                }
            }

            if (e.NewItems != null)
            {
                foreach (var item in e.NewItems)
                {
                    if (!_listView.SelectedItems.Contains(item))
                    {
                        _listView.SelectedItems.Add(item);
                    }
                }
            }
        }

        private void OnListViewUnloaded(object sender, RoutedEventArgs e)
        {
            Detach();
        }

        internal void Detach()
        {
            _listView.Unloaded -= OnListViewUnloaded;
            _listView.SelectionChanged -= OnListViewSelectionChanged;
            _listView = null;
            var eventInfo =
                _boundSelection.GetType().GetDeclaredEvent("CollectionChanged");
            eventInfo.RemoveEventHandler(_boundSelection, _handler);
            _boundSelection = null;
        }
    }
} 
```

如果您不想每次都使用新的 ListView - 您需要在行为中注释掉这一行：`_listView.Unloaded += OnListViewUnloaded;`

# java - 具有不同属性名称的类似弹簧组件

> ID：14776486
> 
> 赞同：1
> 
> 时间：2013-02-08T15:58:30.793
> 
> 标签：java, spring

ActiveMQConnectionFactory 使用**brokerURL**属性来存储服务器地址。TibjmsConnectionFactory 使用**serverUrl**属性来存储服务器地址。

是否可以在 Spring 配置中以可以从属性文件切换的方式定义 bean？例如：

```
<bean id="connectionFactory" class="${listener.connection.factory}">
    <property name="XXX" value="${in.serverUrl}" />
</bean> 
```

其中 XXX 充当 brokerURL 或 serverUrl - 取决于连接工厂。

我知道可以使用配置文件来实现这一点，但它看起来是一个非常简单的问题，可以很容易地解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:30:53.617

不幸的是，属性名称不能基于 PropertyPlaceHolderConfigurer，因此您不能基于属性值来获取它。这些是我能想到的几种方式：

1.  如果可行，请使用 java `@Configuration`（Spring 3.2+），然后您可以根据自定义属性值创建一个或另一个连接工厂
2.  就像您提到但打折的那样，配置文件非常适合这种情况。
3.  有点矫枉过正的方法，创建一个[FactoryBean](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html)，它基于您传递给自定义工厂 bean 的某个标志创建一个或另一个连接工厂。

# excel - 替换过滤范围内的文本

> ID：14776487
> 
> 赞同：0
> 
> 时间：2013-02-08T15:58:31.363
> 
> 标签：excel, excel-2007, vba

有人可以为我提供以下有效方法，因为我目前正在使用“非常”冗长的方法。

我已经应用了一个过滤器/我为过滤后的数据设置了一个动态范围 - 例如：

```
Set rngToCut = Sheets(gcsCombinedKycExportsSheetName).Range(Sheets(gcsCombinedKycExportsSheetName).Cells(2, 1), _
Sheets(gcsCombinedKycExportsSheetName).Cells(Lrow, 1)).EntireRow 
```

对于过滤器中的每一行，我想用文本“ISSUE”替换 A 列的内容。目前我正在逐行跳过它们，但这对于我拥有的数据量来说非常慢。

请问有什么好的建议吗？

谢谢，

夏兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:00:39.643

该`Substitute`函数旨在替换字符串的子字符串。

您是否尝试过创建一个计算字段，填充新的字符串值，然后`PasteValues`在原始 Range 上使用来替换原始字段的值？

# java - Http exception in jsoup

> ID：14776488
> 
> 赞同：2
> 
> 时间：2013-02-08T15:58:35.753
> 
> 标签：java, exception, jsoup

Http exception in jsoup.

```
org.jsoup.HttpStatusException: HTTP error fetching URL. Status=503, URL=http://google.com
        at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:418)
        at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
        at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
        at org.jsoup.helper.HttpConnection.get(HttpConnection.java:148)

Document doc;
doc = Jsoup.connect("http://google.com").timeout(300000).get(); 
```

Tried various solutions but none of them worked.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:01:07.953

你[查过](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)503是什么意思吗？

> 10.5.4 503 服务不可用
> 
> 由于服务器临时过载或维护，服务器当前无法处理请求。这意味着这是一种暂时的情况，经过一段时间的延迟会得到缓解。如果已知，延迟的长度可以在 Retry-After 标头中指示。如果没有给出 Retry-After，客户端应该像处理 500 响应一样处理响应。

鉴于它看起来可以从这里获得，您是否有一个不可用的代理/网关？我会使用一些网络工具（也许是traceroute？）来跟踪它的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T05:56:03.593

```
document = Jsoup.connect(UrlRequest).timeout(30000).userAgent("Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.120 Safari/535.2").get(); 
```

您可以通过更改超时来尝试延迟

# context-free-grammar - 顺序在上下文无关语法中重要吗？

> ID：14776491
> 
> 赞同：1
> 
> 时间：2013-02-08T15:58:43.840
> 
> 标签：context-free-grammar

假设我有以下语法：

> ```
> expr = expr + term | term    
> term = term +  number | number    
> number = (just any integers..) 
> ```

我的问题是，是**expr = expr + term |** 与 expr相同的**术语****= 术语 + expr | 任期**？

我扩展了语法，这似乎很重要。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:02:41.773

不，它们不一样。订单很重要。例如，请查看[http://en.wikipedia.org/wiki/Context-free_grammar#Example](http://en.wikipedia.org/wiki/Context-free_grammar#Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:38:08.003

答案当然是取决于语法。

在您的情况下，将一条规则替换为另一条规则不会更改语法生成的语言中的字符串集。语法不同，但语言是一样的。唯一的区别是第一个从右侧构建字符串，第二个从左侧构建字符串。

想出不起作用的语法并不难：有时，改变产生式中符号的顺序会改变语言。

# android - How to remove the Default orange Highlight Effect for EditText programmatically?

> ID：14776492
> 
> 赞同：1
> 
> 时间：2013-02-08T15:58:47.500
> 
> 标签：android, android-edittext, state, highlighting

I use selector for styling EditTexts. I want to get rid of orange color, when I doubleTap on my EditText. I use this:

```
states.addState(new int[] {R.attr.textColorHighlight}, getResources().getDrawable(R.color.transparent)); 
```

But it doesn't make any difference! Does any body know why? and interestingly this part of the code works well:

```
states.addState(new int[] {R.attr.state_focused}, getResources().getDrawable(R.color.transparent)); 
```

But I don't want to change the state, when focuced!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:16:38.353

这并不容易（以编程方式）。您可以尝试通过使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)来实现这一点。您可以在主题中使用 StateListDrawable 作为 EditText 的背景，以便处理不同的状态。

如果发现了一个非常有趣的样本，它可能会帮助你。抱歉，我自己没有尝试：[以编程方式应用 StateListDrawable](https://stackoverflow.com/questions/6018602/statelistdrawable-to-switch-colorfilters/10571706#10571706)

# xcode - Xcode: How would I make a toggle button for this cocoscript app?

> ID：14776496
> 
> 赞同：0
> 
> 时间：2013-02-08T15:59:08.890
> 
> 标签：xcode, button, applescript

AppDelegate.applescript

```
--  iTunes Switcher
--
--  Created by admini on 11/13/12.
--  Copyright (c) 2012 Bdaniels. No rights reserved.
--  

script AppDelegate
    property parent : class "NSObject"

    on ButtonHandlerActivationOn_(sender)
        tell application "iTunes" to quit
        do shell script "/usr/bin/defaults write com.apple.iTunes StoreActivationMode -integer 1"
        delay 1
        do shell script "open -a itunes"
    end ButtonHandlerActivationOn

    on ButtonHandlerActivationOff_(sender)
        tell application "iTunes" to quit
        do shell script "/usr/bin/defaults write com.apple.iTunes StoreActivationMode -integer 0"
        delay 1
        do shell script "open -a itunes"
    end ButtonHandlerActivationOff

    on applicationWillFinishLaunching_(aNotification)
        -- Insert code here to initialize your application before any files are opened 
    end applicationWillFinishLaunching_

    on applicationShouldTerminate_(sender)
        -- Insert code here to do any housekeeping before your application quits 
        return current application's NSTerminateNow
    end applicationShouldTerminate_

end script 
```

Here is a screen shot of the UI [http://imgur.com/8xO9K4c](http://imgur.com/8xO9K4c)

I would like to put a green light if the state is turned on. Any help on this would be great! There are two more buttons here, but I omitted them because I had "Too much code" in my post and stackoverflow would not let me post it.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:24:32.000

首先你需要一个图像，一个绿色图像。将其添加到您的项目中。在代码中，我使用“green.png”作为其名称。然后添加这些，以便您可以访问 NSImage 方法并将图像添加到按钮。

```
property NSImage : class "NSImage"
property greenLightButton : missing value
property greenLightImage : missing value 
```

接下来在您的窗口中添加一个“方形”按钮。这将显示您的图像。将其设置为您想要的绿色图像大小。在属性检查器中，取消选中按钮的“边框”。此时它基本上看起来是不可见的。将 greenLightButton 属性连接到该按钮。接下来添加此代码。

```
on applicationWillFinishLaunching_(aNotification)
   set greenLightImage to NSImage's imageNamed_("green.png")
end applicationWillFinishLaunching_

on isActivationOn()
   set isOn to false
   try
      do shell script "/usr/bin/defaults read com.apple.iTunes StoreActivationMode"
      if result is "1" then set isOn to true
   end try
   return isOn
end isActivationOn 
```

然后在你的代码中的任何地方，可能在你的按钮方法和 applicationWillFinishLaunching 中，你想要这样的东西......

```
if (isActivationOn()) then
   greenLightButton's setImage_(greenLightImage)
else
   greenLightButton's setImage_(missing value)
end 
```

# linux - no spacing in column headers (oracle reports 10g compiled on linux)

> ID：14776500
> 
> 赞同：1
> 
> 时间：2013-02-08T15:59:22.553
> 
> 标签：linux, oracle10g, newline

I'm having difficulty with formatting in the column header of Oracle reports.

Sometimes I have column headings, which have names which must span more than one line.

For example, I have a heading called "Remaining Days" in one of my reports. In the Oracle Reports Builder 10g It appears as:

```
Remaining
Days 
```

![enter image description here](../Images/0f15b1cc3bfa112bf7e1f9fbd51d20ad.png)

i.e. there is a newline between "Remaining" and "Days"

The output appears properly when I generate the report from the report builder, however, when I compile the report on the server, then run it, the results are as follows:

```
RemainingDa
ys 
```

![enter image description here](../Images/d531a0d109d39f994609a7e4ccdce773.png) Is there a way to force a newline in this column name?

# cakephp - CakePHP blank screen admin functions on remote server

> ID：14776501
> 
> 赞同：0
> 
> 时间：2013-02-08T15:59:23.070
> 
> 标签：cakephp

i have problems with "backend" on my page. On my localhost all works great (admin panel, add/edit articals, add/edit news, add/edit users), but on my remote server, when i request eg. add artical or edit artical i get only blank page no view, i use debug 2, and google google every every day night but nothing :(, anyone who can helps me, and tell me what is problem? thanky you so much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:34:44.230

这很可能是由于 PHP 关闭后有空格造成的。

浏览任何/所有可能被击中的文件，并一起摆脱结束关闭 PHP 标记。如果它是一个 PHP 文件，则无需关闭它，甚至最好不要关闭它，因为它可以防止此类事情发生。

# sql - 将超过 8000 个字符的字符串转换为 Varbinary(MAX)

> ID：14776502
> 
> 赞同：0
> 
> 时间：2013-02-08T15:59:30.167
> 
> 标签：sql, sql-server-2012

我正在尝试将一些长字符串转换为 varbinary(max) 作为 INSERT 的一部分。[http://msdn.microsoft.com/en-us//library/ms188362.aspx](http://msdn.microsoft.com/en-us//library/ms188362.aspx)说 varbinary(max) 最多可以容纳 2^31-1 个字节。但是，当我使用：

```
CONVERT(varbinary(max),"ReallyLongString...") 
```

字符串被截断为 8000 个字符。

关于如何在不截断的情况下将这些字符串转换为 varbinary(max) 的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:18:54.433

这适用于 SQL Server 2012；

```
-- Insert
INSERT INTO myTable (value) VALUES 
    (CAST('<really long string>' AS VARBINARY(MAX)));

-- Retrieve
SELECT CAST(value AS VARCHAR(MAX)) FROM myTable; 
```

插入一个 10k 字符值将返回相同的值，并使用`LEN`生成的 VARCHAR(MAX) 进行验证。

```
-- Validate
SELECT LEN(CAST(value AS VARCHAR(MAX))) FROM myTable;

> 10000 
```

[一个可以玩的 SQLfiddle](http://sqlfiddle.com/#!6/2f338/2)。可悲的是，SQLfiddles 设置只能使用 8k 个字符，因此必须在变量中构建 10k 个字符串。
与本地 SQL 管理器中的普通带引号的字符串常量一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:14:52.920

由于答案发生在评论中，我将在此处添加并关闭问题。有问题的长字符串由许多连接的字符串组成。

Martin Smith 给出了这个答案： *“确保将连接中涉及的第一个字符串转换为 varchar(max)。varchar(n) + varchar(n) 将在 8,000 个字符处截断，不会产生 varchar(max)”*

这解决了这个问题。感谢 Martin 和 Joacim Isaksson 的帮助。

# ruby-on-rails - Store large matrix in Rails app

> ID：14776506
> 
> 赞同：2
> 
> 时间：2013-02-08T15:59:33.100
> 
> 标签：ruby-on-rails, mongodb, rails-activerecord, large-data

In my Ruby On Rails app I have to store (relative) large matrices of about 300x300 elements (float values, mostly different) per document. On every retrieval of a document the full matrix has to be loaded for custom calculations. The matrices are also updated quite often (so that write performance and memory caching is an issue, too).

What's a good way to store such matrices (performance wise)? Some alternatives that come to my mind:

1.  A table with the columns `row`, `column` and `value`. But I guess fetching and storing a whole matrix (with about 90000 cells) is not a good idea to do on every request (some memory caching will help).
2.  Store the matrix serialized in a text field/column. Do you have any ideas how it compares to 1\. from a performance standpoint?
3.  Use some document database (e.g. Mongo) and store the whole matrix inside one field of the document (not sure where the benefit in comparison to 2\. is).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:44:24.480

任何类型的 ACID 兼容存储的按需写入和检索性能都将成为一个问题。作为最佳实践，我建议采用缓存重策略，将矩阵保存在内存中，如果您需要跨多个服务器，也许可以使用 memcache。然后，您可以从请求周期中取出读取和写入，随后您不必太在意写入性能，并且可以使用任何东西（例如 MySQL 中的文本字段或其他任何东西）。

为此，我建议编写一个执行以下操作的自定义矩阵类：

*   检查缓存以获取其数据的副本，如果不可用，则从数据库加载并填充缓存。
*   更新缓存副本时异步写入数据库。
*   为您的代码提供优化的数据接口

# php - spl_autoload_register not working

> ID：14776507
> 
> 赞同：4
> 
> 时间：2013-02-08T15:59:38.967
> 
> 标签：php, spl-autoload-register

I have created 5 folders containing 5 classes (Ad_Class, Blocked_Class, Friend_Class, Image_Class, Profile_Class) in the main directory. I also created the respective classes within the mentioned folders with the exact name as the folders. i.e. if folder name is Ad_Class then the class within the folder is also the same as the folder name as in "class Ad_Class.

In the index.php file I wrote the following code:

```
function Ad_Class($name)
{
    include "Ad_Class/$name.php";
}
function Blocked_Class($name)
{
    include "Blocked_Class/$name.php";
}
function Friend_Class($name)
{
    include "Friend_Class/$name.php";
}
function Image_Class($name)
{
    include "Image_Class/$name.php";
}
function Profile_Class($name)
{
    include "Profile_Class/$name.php";
}

spl_autoload_register("Ad_Class");
spl_autoload_register("Blocked_Class");
spl_autoload_register("Friend_Class");
spl_autoload_register("Image_Class");
spl_autoload_register("Profile_Class");

$a = new Ad_Class;
$b = new Blocked_Class;
$c = new Blocked_Class;
$d = new Image_Class;
$e = new Profile_Class; 
```

After executing the above code I get the below warnings:

```
Warning: include(Ad_Class/Blocked_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 4

Warning: include(): Failed opening 'Ad_Class/Blocked_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 4

Warning: include(Ad_Class/Image_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 4

Warning: include(): Failed opening 'Ad_Class/Image_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 4

Warning: include(Blocked_Class/Image_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 8

Warning: include(): Failed opening 'Blocked_Class/Image_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 8

Warning: include(Friend_Class/Image_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 12

Warning: include(): Failed opening 'Friend_Class/Image_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 12

Warning: include(Ad_Class/Profile_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 4

Warning: include(): Failed opening 'Ad_Class/Profile_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 4

Warning: include(Blocked_Class/Profile_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 8

Warning: include(): Failed opening 'Blocked_Class/Profile_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 8

Warning: include(Friend_Class/Profile_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 12

Warning: include(): Failed opening 'Friend_Class/Profile_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 12

Warning: include(Image_Class/Profile_Class.php): failed to open stream: No such file or directory in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 16

Warning: include(): Failed opening 'Image_Class/Profile_Class.php' for inclusion (include_path='.;C:\Users\Robert\Documents\web development\xampp\php\PEAR') in C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\development.php on line 16 
```

Why is this happening? Can anyone explain?

Update: I found the following code to work. If you have any suggestions please feel free to share!

```
function ad_class($class)
{
    if(!class_exists($class) && $class == "Ad_Class")
    {
        include "Ad_Class/$class" . ".php";
    }
    elseif(!class_exists($class))
    {
        return;
    }
}

function blocked_class($class)
{
    if(!class_exists($class) && $class == "Blocked_Class")
    {
        include "Blocked_Class/$class" . ".php";
    }
    elseif(!class_exists($class))
    {
        return;
    }
}

function friend_class($class)
{
    if(!class_exists($class) && $class == "Friend_Class")
        {
        include "Friend_Class/$class" . ".php";
    }
    elseif(!class_exists($class))
    {
        return;
    }
}

function image_class($class)
{
    if(!class_exists($class) && $class == "Image_Class")
    {
        include "Image_Class/$class" . ".php";
    }
    elseif(!class_exists($class))
    {
        return;
    }
}

function profile_class($class)
{
        if(!class_exists($class) && $class == "Profile_Class")
    {
        include "Profile_Class/$class" . ".php";
    }
    elseif(!class_exists($class))
    {
        return;
    }
}
spl_autoload_register("ad_class");
spl_autoload_register("blocked_class");
spl_autoload_register("friend_class");
spl_autoload_register("image_class");
spl_autoload_register("profile_class");

$a = new Ad_Class;
$a->ad();

$b = new Blocked_Class;
$b->block();

$c = new Friend_Class;
$c->fr();

$d = new Image_Class;
$d->image(); 
```

It produces the following: Advertising Blocked Friend Image

which is nothing more than displaying the class name of the instantiated object to see if the code worked correclty in loading classes.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T16:02:29.240

`spl_autoload_register()`堆栈，因此它将运行您为尝试创建的每个类定义的所有五个函数，*无论它是哪个类*。拿这个例子并重新设计它以满足您的需求：

```
spl_autoload_register( function($name) {
    if (is_file('/classes/'.$name.'.class.php')) {
        require_once('/classes/'.$name.'.class.php');
    }
}); 
```

检查文件`is_file()`将省去所有那些**没有此类文件或目录**警告的头痛。`switch()`根据您的文件路径布局，您可能需要使用声明或类似的东西扩展我给出的匿名函数示例。

# grails - Grails remoteLink vs

> ID：14776510
> 
> 赞同：0
> 
> 时间：2013-02-08T15:59:45.367
> 
> 标签：grails, gsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:24:18.703

我建议考虑一些事情......

1.) 加载 3,000 个视图中的任何内容通常不是一个好主意。尝试通过显示这些数据量来思考您真正想要实现的目标。

2.) 如果您最终计划使用 jqgrid 或数据表之类的东西，请不要专注于其中一个工具可能会做不同的事情。直接找到您想要的最终解决方案，然后从那里进行调整。

3.) 考虑页面上生成的所有代码以及实际使用了多少代码。如果您生成 3,000 个链接，而用户可能只点击 5 或 10 个，那么您可能会使用一些 jQuery 来处理行点击时链接的动态加载。这应该会加快渲染速度，因为浏览器要显示的 HTML 更少。

*4.) 最后，像 Grails 这样的框架可以*让你轻松地做一些牺牲一些性能的事情。充分利用某事可能需要您绕过很多便利。

享受！希望这可以帮助。

# php - MYSQl, select from two tables, count, with exception

> ID：14776514
> 
> 赞同：0
> 
> 时间：2013-02-08T16:00:02.483
> 
> 标签：php, mysql, database, count

If i use this query:

```
SELECT map.x,map.y,users.username,Count(username) as count 
FROM map LEFT JOIN users ON (map.x=users.x AND map.y=users.y) 
WHERE map.y BETWEEN 0 AND 2 AND map.x BETWEEN 0 AND 2 
GROUP BY map.x,map.y
ORDER BY map.y DESC,map.x 
```

I get this result:

![enter image description here](../Images/3db65d7233ffca5bddb8bb79b91e8eb5.png)

(Original image: [http://i.stack.imgur.com/3AOgH.png](https://i.stack.imgur.com/3AOgH.png))

(I don't need the usernames, it is here just for the explanation) But i don't want to count for example "valaki", so i would like to get a result like this:

![http://i.stack.imgur.com/URGFs.png](../Images/63e35194e27396987502edc51a731d1e.png)

(Original image: [http://i.stack.imgur.com/URGFs.png](https://i.stack.imgur.com/URGFs.png))

But with this code i get someting completely different:

```
SELECT map.x,map.y,users.username,Count(username) as count 
FROM map LEFT JOIN users ON (map.x=users.x AND map.y=users.y) 
WHERE map.y BETWEEN 0 AND 2 AND map.x BETWEEN 0 AND 2 AND users.username!='valaki'
GROUP BY map.x,map.y
ORDER BY map.y DESC,map.x 
```

This:

![http://i.stack.imgur.com/pO1Iy.png](../Images/ce28f6873b86e48ddf6eff170d05e9b9.png)

(Original image: [http://i.stack.imgur.com/pO1Iy.png](https://i.stack.imgur.com/pO1Iy.png))

(Those places where players aren't 'valaki', but i need those to where nobody is.)

If somebody can fix my query, i would be very happy. Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:14:00.480

尝试：

```
SELECT map.x,map.y,users.username,Count(username) as count 
FROM map 
LEFT JOIN users ON (map.x=users.x AND map.y=users.y AND users.username!='valaki') 
WHERE map.y BETWEEN 0 AND 2 AND map.x BETWEEN 0 AND 2
GROUP BY map.x,map.y
ORDER BY map.y DESC,map.x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:05:40.357

我认为你应该尝试这样的事情：

```
select map.x, map.y, group_concat(users.username),
       sum(case when username <> 'valaki' then 1 else 0 end) as SumNoValaki
from map left join
     users 
     ON map.x=users.x AND map.y=users.y 
WHERE   map.y BETWEEN 0 AND 2 AND map.x BETWEEN 0 AND 2 
GROUP   BY map.x,map.y
ORDER   BY map.y DESC, map.x 
```

您的查询是任意选择一个用户名放在每一行上。你不想看到所有这些吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:02:47.773

试试这个，

```
SELECT  map.x, map.y, 
        users.username,
        Count(username <> 'valaki') as totalCount 
FROM    map 
        LEFT JOIN users 
            ON map.x=users.x AND map.y=users.y 
WHERE   map.y BETWEEN 0 AND 2 AND map.x BETWEEN 0 AND 2 
GROUP   BY map.x,map.y
ORDER   BY map.y DESC, map.x 
```

请记住，`Count(username <> 'valaki')`仅在 中有效`mysql`，如果您碰巧尝试其他 RDBMS，您可以这样做，

```
COUNT(CASE WHEN username <> 'valaki' THEN 1 ELSE NULL END) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:07:34.937

只需尝试下面的查询，您只需在 where 语句中添加“AND users.username IS NOT NULL AND COUNT(username) > 1”。

它将为您提供需要检查的数据的干净结果。

```
SELECT map.x,map.y,users.username,Count(username) as count 
FROM map LEFT JOIN users ON (map.x=users.x AND map.y=users.y) 
WHERE map.y BETWEEN 0 AND 2 AND map.x BETWEEN 0 AND users.username IS NOT NULL AND COUNT(username) > 1 
GROUP BY map.x,map.y
ORDER BY map.y DESC,map.x 
```

# ruby-on-rails - ：确认！在 Rails 应用程序中被忽略？

> ID：14776515
> 
> 赞同：1
> 
> 时间：2013-02-08T16:00:05.863
> 
> 标签：ruby-on-rails, ruby, html, oop

我正在运行一个 Rails 应用程序，它运行良好，除了一小部分代码。
当我单击“销毁”时，我需要浏览器请求批准，但它没有。
这是我观点的一部分`index.html.erb`

```
<td><%= button_to 'Destroy', {:action => 'destroy', :id => publisher},
{:method => :delete, :confirm => 'Are you sure?'} %></td> 
```

我找不到语法有什么问题，也找不到任何建议为什么这不起作用
请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:01:31.003

请尝试以下语法。

```
<%= button_to "Destroy", { :action => "delete", :id => publisher }, :confirm => "Are you sure?", :method => :delete %> 
```

确保在布局文件中包含 Javascript 库：

```
<%= javascript_include_tag :defaults %> 
```

如果这些都不起作用，请发布完整视图并解释您如何定义路线。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:05:37.800

请注意，[确认选项已正式弃用，将在 rails 4.0 中删除](http://www.edgerails.info/2012/7/23/whats-new-30/)，您应该使用

```
<%= button_to 'Destroy', {:action => 'destroy', :id => publisher},
{:method => :delete, :data => { :confirm => 'Are you sure?'}} %> 
```

# ruby-on-rails - Need Active Admin to redirect to the login page when following the download CSV link

> ID：14776520
> 
> 赞同：4
> 
> 时间：2013-02-08T16:00:22.277
> 
> 标签：ruby-on-rails, ruby, csv, devise, activeadmin

I'm working on a cron task that e-mails out a link to download a CSV file from Active Admin. The link looks like something along the lines of: `www.adminsite.com/admin/records.csv`

If the user isn't already authenticated into the system -- active admin redirects to the page that just says "You need to sign in or sign up before continuing." instead of redirecting to the login page and then following through with a CSV download link upon successful authentication.

I've tried looking into active admin internals, but have not been able to figure it out yet. Any ideas?

Thanks!

**!!! EDIT !!!**

I actually ended up solving this issue on my own.

Because the link I was generating was navigating to a csv format, I had to add in the :csv option as a navigational format to **devise.rb** configuration file:

```
config.navigational_formats = ["*/*", :html, :csv] 
```

Now the redirect to the login page was working, but it was taking the user to /admin/login.csv, which was coming back as an empty page. I'm assuming there was no template for a csv format.

I had to set up the redirect from /admin/login.csv to /admin/login by adding this to the **routes.rb** file:

```
 devise_for :admin_users, ActiveAdmin::Devise.config do
    match "/admin/login.csv" => redirect("/admin/login")
  end 
```

Done.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:07:34.717

Active Admin 使用设计来处理其登录，这可能就是您找不到任何东西的原因。

从[这里](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)的说明：

在 lib/custom_failure.rb 中创建此类：

```
class CustomFailure < Devise::FailureApp
  def redirect_url
    #return super unless [:worker, :employer, :user].include?(scope) #make it specific to a scope
     new_user_session_url(:subdomain => 'secure')
  end

  # You need to override respond to eliminate recall
  def respond
    if http_auth?
      http_auth
    else
      redirect
    end
  end
end 
```

并将其添加到 config/initializers/devise.rb：

```
config.warden do |manager|
  manager.failure_app = CustomFailure
end 
```

# heroku - "App boot timeout" when un-idling

> ID：14776526
> 
> 赞同：0
> 
> 时间：2013-02-08T16:00:34.560
> 
> 标签：heroku

My Heroku-hosted (ruby Sinatra) app has worked perfectly for the last month without me changing it, but today the app error'd while trying to start up after idling:

```
2013-02-08T15:44:34+00:00 heroku[web.1]: Idling
2013-02-08T15:44:38+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-02-08T15:44:40+00:00 heroku[web.1]: Process exited with status 0
2013-02-08T15:44:40+00:00 heroku[web.1]: State changed from up to down
2013-02-08T15:50:50+00:00 heroku[web.1]: Unidling
2013-02-08T15:50:50+00:00 heroku[web.1]: State changed from down to starting
2013-02-08T15:52:09+00:00 heroku[router]: at=error code=H20 desc="App boot timeout" method=GET path=/ host=www.example.com fwd=207.110.13.98 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-08T15:52:05+00:00 heroku[router]: at=error code=H20 desc="App boot timeout" method=GET path=/ host=www.example.com fwd=207.110.13.98 dyno= queue= wait= connect= service= status=503 bytes= 
```

After a few more minutes of error codes, the app tried to unidle again and did so successfully. Any idea what caused this and how I could prevent it from happening again?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:02:07.683

H20 错误通常意味着您的应用在空闲后需要很长时间才能启动。[Heroku Dev Center](https://devcenter.heroku.com/articles/error-codes#h20-app-boot-timeout)中有详细信息。正如开发中心建议的那样，您可能应该检查资产是否已预编译，或者是否有其他可能会减慢应用程序启动速度的事情。

# php - 发送值但不刷新页面并在 div 中打开的链接

> ID：14776533
> 
> 赞同：0
> 
> 时间：2013-02-08T16:01:02.223
> 
> 标签：php, jquery, sql

好的，所以我试图在这里完成的目标是，我在一个名为 content 的 div 页面上的一个 mysql 表中有一个信息列表。我想让这些值成为使用 jquery 打开内容而不刷新页面的超链接。我要发送的值是一个客户 ID 号，当它发送到页面时可以运行一些 sql 来显示客户信息。

所以假设客户是 John Smith，他的客户 ID 号是 20。

```
<a href="" id="$row['customer_id']">Smith, John</a> 
```

我在其他链接上使用的 jquery 如下。

```
$("#WhateverTheCustomerIDis").click(function(){
   $("#container").load("company/view-customer.php");
}) 
```

然后在我的 sql 中我想做一个“SELECT * FROM Customers WHERE CustomerID = 'the value sent by link'”

任何人都可以帮我弄清楚如何设置 jquery 和链接以使其工作，因此当点击链接时，它会在 div 中打开查看客户页面而不刷新页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:07:22.047

```
<a href="" id="$row['customer_id']" class="userLink">Smith, John</a>

$(".userLink").click(function(){
   $("#container").load("company/view-customer.php?id=" + $(this).attr('id'));
}) 
```

在 view-customer.php 的 php 中

```
$id = $_GET['id'];
$result = mysql_query("SELECT * FROM Customers WHERE CustomerID = $id"); 
```

应该管用。

更新以接受 MassivePenguins（明显的大声笑）的建议。以上将允许您为每个链接添加一个类，而不必为每个链接单独创建一个调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:08:36.420

您可能需要通过 ajax 使用函数：

```
function getcontent(var1){
 $.post("company/view-customer.php",{customerid:var1},function(data){
  $("#container").html(data);
 });
} 
```

然后在每个链接上：

```
<a href="" onclick="getcontent(".$row['customer_id'].");">Smith, John</a> 
```

在 view-customer.php 上，您可以将请求解析为：

```
$id = $_POST["customerid"];
if(isset($id)){
 //ID is set and ready to use, Do other stuff here...
 //The Queries and anything else...
$result = mysql_query("SELECT * FROM Customers WHERE CustomerID = $id");
} 
```

使用该函数更容易，您将根据用于 ajax 调用的“id”提取该 php 文件中的所有 html 数据。Ajax 是您的案例的最佳选择，并且功能使其更易于使用。CSS 可以很容易地用于 PHP 文件，而我认为 .load() 会产生一些填充和边距问题......

# ubuntu - Ubuntu crontab 命令不起作用

> ID：14776535
> 
> 赞同：0
> 
> 时间：2013-02-08T16:01:06.847
> 
> 标签：ubuntu, cron, command, crontab

在命令行上，以下行就像一个魅力：

```
cd /opt/server/apache2/htdocs/newapp/ && php oil refine dealer:handler 
```

在命令行上确认命令后，我在 Ubuntu 服务器上的 crontab 中添加了以下行（后面有一个空行）：

```
*/1 * * * * cd /opt/server/apache2/htdocs/newapp/ && php oil refine dealer:handler 
```

我的系统日志这样说（每分钟）：

```
Feb  8 15:34:01 ip-xx-xx-xx-x CRON[5549]: (username) CMD (cd /opt/server/apache2/htdocs/newapp/ && php oil refine dealer:handler) 
```

然而，来自 crontab 的命令不起作用。任何想法可能有什么问题？

# javascript - 如何将 html 作为字符串传递以在另一个函数中循环？

> ID：14776539
> 
> 赞同：1
> 
> 时间：2013-02-08T16:01:20.553
> 
> 标签：javascript, ajax, loops, parameters

我面临以下问题。我有一个函数可以成功返回 JSON 数据。我正在尝试无限滚动，所以在这个函数中，我正在准备 html 以在另一个函数中循环，这将完成这项工作。服务器将 JSON 返回为：

```
{ "id" : 6,
  "title" : "Store Title #1",
  "movies" : [{ "id" : 1164,
                "title" : "Movie 1",
                "publishDate" : "1993-01-01T00:00:00",
                "description" : "{long description...}" },
              { "id" : 8452,
                "title" : "Movie 2",
                "publishDate" : "1985-01-01T00:00:00",
                "description" : "{long description...}" },
              { "id" : 6451,
                "title" : "Movie 3",
                "publishDate" : "1945-01-01T00:00:00",
                "description" : "{long description...}" }]
} 
```

成功函数：

```
 function onsuccess(data) {
        var libraryInfoHTML = '<h2 data-id="' + data.id + '">' + data.title + '</h2><ul></ul>';
        var receivedData = data.movies;
        var loopHTML = 
            '<li>' +
                '<h3 class="clear"><span class="icons video-library video-icon"></span>' +
                    '<a href="#" title="' + receivedData[i].title + '" data-id="' + receivedData[i].id + '">' +
                        receivedData[i].title +
                    '</a>' +
                '</h3>' +
                '<h4 class="clear"><span class="icons publish-date"></span>' +
                    receivedData[i].publishDate +
                '</h4>' +
                '<p>' +
                    receivedData[i].description +
                '</p>' +
            '</li>';
    infinityScroll(receivedData, loopHTML);
} 
```

无限滚动功能：

```
function infinityScroll(received_data, loop_HTML) {
    var i=0;
    var length = received_data.length;
    var items_to_load = 10;
    function loop() {
        var html_maker = '';
        for(; i<items_to_load; i++) {
            html_maker +=
                loop_HTML;
        }
        items_to_load += i;
        $('#container ul').append(html_maker);
    }

    function scroller() {
        if ($(window).scrollTop() >= ($(document).height() - $(window).height())*0.95){
            loop();
        }
    }
    $(window).scroll(scroller);
} 
```

所以第一个函数给出了错误，因为“i”是未定义的。我想将“loopHTML”内容传递给“function loop()”，并希望它循环“receivedData[i]”。我想我应该将“loopHTML”内容转换为字符串，但是如何告诉 unstring “receivedData[i]” 位置？你能告诉我更好的方法吗？请不要向我推荐插件，因为我想做简单的无限滚动。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:39:22.380

我认为您想要的是将一个函数传递给包含接收到的数据并且可以`i`作为参数的 infinityScroll：

```
 function onsuccess(data) {
     var libraryInfoHTML = '<h2 data-id="' + data.id + '">' + data.title + '</h2><ul></ul>';

     var htmlFunction = (function () {
         var receivedData = data.movies;
         return function (i) {
             if (i < receivedData.length) {
                 return '<li>' +
                     '<h3 class="clear"><span class="icons video-library video-icon"></span>' +
                     '<a href="#" title="' + receivedData[i].title + '" data-id="' + receivedData[i].id + '">' + receivedData[i].title +
                     '</a>' +
                     '</h3>' +
                     '<h4 class="clear"><span class="icons publish-date"></span>' + receivedData[i].publishDate +
                     '</h4>' +
                     '<p>' + receivedData[i].description +
                     '</p>' +
                     '</li>';
             }
         };
     })();
     infinityScroll(htmlFunction);
 } 
```

然后调整infinityScroll...

```
function infinityScroll(loopHtmlFunction) {
    var items_to_load = 10;
    var i = 0;
    var html;
    function loop() {
        var html_maker = '';
        for(; i<items_to_load && html = loopHtmlFunction(i); i++) {
            html_maker += html;
        }
        items_to_load += i;
        $('#container ul').append(html_maker);
    }    
    // etc.
} 
```

请注意，这还会检查是否有更多电影数据，`receivedData`如果没有，则不会再添加到 html 中。但是，您可能需要调整该`infinityScroll`功能的其余部分，以便在没有更多电影数据时停止尝试滚动。

# postgresql-9.1 - 找不到 psql 命令

> ID：14776543
> 
> 赞同：5
> 
> 时间：2013-02-08T16:01:52.847
> 
> 标签：postgresql-9.1, psql, .profile

我正在使用 Mac OS X 10.5.8。我使用 macports 安装了 Postgresql 9.1，它已将其安装`/opt/local/lib/postgresql91`并创建了一个包含其他 unix 可执行文件的`bin`文件夹。`psql`

据我了解，这是 postgresql 程序的核心（我这么说是因为其他 postgresql 文件安装在我系统的其他部分，我不确定这些文件的用途）。

我已经编辑了 my`.profile`以包含`postgresql91/bin`并运行 source的路径`~/.profile`。

```
echo $PATH 
```

确认路径在那里。但是当我`psql`在命令行中输入时，我得到`"command not found"`.

我不明白我还应该做什么。

# javascript - Backbone在点击dom元素后动态设置collection view el

> ID：14776547
> 
> 赞同：0
> 
> 时间：2013-02-08T16:02:11.943
> 
> 标签：javascript, backbone.js, backbone-views

该项目是日历，其中模型为 1 天，集合包含该月的所有日期。视图是一样的。所以当我渲染我的收藏时，我的屏幕上有日历。现在我需要的是能够在选定的日期设置待办事项列表。所以我需要另一个模型、视图和集合。我的想法是，从某一天开始的任务将是这一天的集合，但是 - 我们遇到了问题：如何将这个新的集合视图“el”设置为点击日的元素及其 id。每天都有相同的班级和唯一的 ID 等于日期 - 比如“2013.02.08”我不确定这是否可能，或者我的方法可能是错误的，我应该以另一种方式这样做。编辑-好的，让我们澄清一下：

我知道没有收藏集怎么办？我在屏幕上有日历 - 想象一下 31 个方形 div。我想要他们每个人的待办事项列表 - 所以它将是：

```
model of task
view of task {li element}
view of tasks {ul element}
collection of tasks {model:model} 
```

在每个方格中。如何存储所有这些集合？

# wpf - WPF - 只有 DataGridColumn 中的特定单元格有一个复选框......有可能吗？

> ID：14776551
> 
> 赞同：1
> 
> 时间：2013-02-08T16:02:35.807
> 
> 标签：wpf, datagrid, checkbox, datagridcolumn, datagridcell

我的客户要求我们有一个带有 DataGrid 的表单，它从数据库中实际数据的角度出发。

下面是我的数据库的（简化）外观。

```
│id|stuff│flag│column│column│column│
------------------------------------
│35| AAA │  0 │ etc. │ blah │ yadda│ 
│58│ BBB │  1 │ etc. │ blah │ yadda│  
│78│ CCC │  0 │ etc. │ blah │ yadda│ 
```

以下是我被要求创建的内容。

```
│HEADER│CODE│DATA1│DATA2│DATA3│
-------------------------------
│ID    | #1 │   35│　 58│　　78│
│STUFF │ #2 │  AAA│  BBB│　CCC│
│FLAG  │ #3 │    0│　　1│　　 0│
│COLUMN│ #4 │ etc.│ etc.│ etc.│
│COLUMN│ #5 │ blah│ blah│ blah│
│COLUMN│ #6 │yadda│yadda│yadda│ 
```

flag 列应该是 0 或 1，所以我希望该列是 a `DataGridCheckBoxColumn`，但它是旋转的！当然，我可以（轻松地）让单元格在验证过程中只接受 1 或 0，但是，我仍然想知道是否可以让列中的指定单元格具有`CheckBox`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:07:00.827

通过使用[DataGridTemplateColumn](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.datagridtemplatecolumn%28v=vs.95%29.aspx)并[根据](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.datagridtemplatecolumn.celltemplate%28v=vs.95%29.aspx)您的`DataContext`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:33:46.773

我会看看[这个 WPF 水平 Datagrid 答案](https://stackoverflow.com/a/4409402/1466627)，利用`<RotateTransform Angle="-90"/>`来旋转你的 DataGrid。

* * *

以下是复制的 XAML 答案@dimaKudr

```
<DataGrid.LayoutTransform>
    <TransformGroup>
        <RotateTransform Angle="-90"/>
        <ScaleTransform ScaleX="1" ScaleY="-1" />
    </TransformGroup>
</DataGrid.LayoutTransform>

<DataGrid.ColumnHeaderStyle>
    <Style TargetType="{x:Type DataGridColumnHeader}"
           BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
        <Setter Property="LayoutTransform">
            <Setter.Value>
                <TransformGroup>
                    <RotateTransform Angle="-90"/>
                    <ScaleTransform ScaleX="1" ScaleY="-1" />
                </TransformGroup>
            </Setter.Value>
        </Setter>
    </Style>
</DataGrid.ColumnHeaderStyle> 
```

* * *

之后，我会看看创建 a`DataGridTemplateColumn`并使用`CellTemplate`带有`CheckBox`内部绑定到您的 Flag 属性的 a，使用 Converter 将 0 和 1 转换为 true/false

```
<DataGrid>
    <DataGrid.Columns>
        <DataGridTemplateColumn x:Name="FlagColumn" Header="Flag" Width="25" IsReadOnly="False">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <CheckBox IsChecked="{Binding Flag, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FlagConverter}" />
                    </StackPanel>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

# php - 在 nginx 中运行 PHP 的虚拟目录

> ID：14776554
> 
> 赞同：1
> 
> 时间：2013-02-08T16:02:47.633
> 
> 标签：php, tomcat, nginx, virtual-directory

是否有适当的方法来指定应在 nginx 中将虚拟目录的哪些后端内容发送到？目前，我有一个使用 tomcat 和 PHP-FPM 运行 nginx 的站点，其中默认情况下将请求发送到 tomcat，我想添加一个名为 dbadmin 的虚拟目录（该目录的内容存储在磁盘上完全不同的位置），其中包含 phpmyadmin请求被发送到 PHP-FPM 套接字。

我当前的配置（conf.d/default.conf）：

```
server {
  listen       80 default_server;
  server_name  mydomain.com;
  root         /opt/apache-tomcat/webapps;

  # cache statis files for 1 month
  location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
    access_log        off;
    log_not_found     off;
    expires           30d;
  }

  # deny access to hidden files (.whatever)
  location ~ /\. {
    access_log off;
    log_not_found off;
    deny all;
  }

  location ~ /dbadmin/(.*)$
  {
    index index.php;
    alias /opt/www/phpmyadmin/$1;
  }

  location ~* \.php$ {
    include        fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME    /opt/www/phpmyadmin$fastcgi_script_name;
    fastcgi_index  index.php;

    if (-f $request_filename) {
      fastcgi_pass phpfpm;
    }
  }

  location / {
    # increase timeout to 2 min
    proxy_read_timeout        120;

    # needed to forward user IP address
    proxy_set_header          X-Real-IP $remote_addr;

    # https support
    proxy_set_header          X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header          Host $http_host;

    proxy_redirect            off;
    proxy_pass                http://127.0.0.1:8080;
  }
} 
```

phpfpm 在主 nginx.conf 中定义：

```
upstream phpfpm {
  ip_hash;
  server unix:/var/run/php-fpm/php-fpm.sock;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T00:26:57.920

阅读您的代码，我认为可以通过将 .php 文件发送到 php-fpm 的方式找到解决方案，通常您应该尝试这样的事情......

```
location ~* \.php$ {    
fastcgi_pass  127.0.0.1:9000;          # if using tcp/ip
fastcgi_pass unix:/tmp/php5-fpm.sock;  # if using sockets
} 
```

# c# - 文字控制 内联编辑

> ID：14776556
> 
> 赞同：0
> 
> 时间：2013-02-08T16:02:53.560
> 
> 标签：c#, asp.net

我想编辑文本并保存它，但内联，这是，文本上传到服务器中的文字控件，但现在我想编辑内联文本。

用户控制 - ASP.NET

...

```
+ "<td>" + status + "</td>" 
```

...

```
load.Controls.Add(new LiteralControl(_str)); 
```

*   _str 是带有文字控制的字符串；*   status 是作为数据库数据的字符串。

    ![地位](../Images/53e0f3104e9efefd605b669b251f3b59.png)

    我的想法是单击数字并进行编辑。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:29:42.730

您可以将状态呈现为禁用的无边框文本框 (input="text")。这意味着它对用户来说似乎是纯文本。当用户单击它时，您将更改文本框样式以使其可见（带边框）和可编辑（可聚焦，启用）。该信息的保存过程可以在用户离开文本框（onblur 事件）、向服务器发出 AJAX 请求或仅当用户单击保存按钮（假设它可能存在）时进行。

# php - 亚马逊搜索小部件 2.0，我如何通过“q=”从查询字符串中提取关键字？

> ID：14776559
> 
> 赞同：0
> 
> 时间：2013-02-08T16:02:56.510
> 
> 标签：php, amazon-web-services, query-string, amazon

很抱歉很痛苦，但我似乎被困住了，在我的问题上找不到任何帮助。

我目前有一个搜索框，并在提交关键字/短语（在我的示例中我会说 CARS）后，查询字符串变为EXAMPLE.COM/?q=cars

然后触发以下页面：EXAMPLE.COM/SHOPPING.PHP?q=cars

我正在将亚马逊搜索小部件 2.0 实施到我的购物页面中，尽管您可以指定默认搜索词，但谁能告诉我如何让这个小部件自动拉入我的查询字符串查询？

我试过插入： < ?php echo $_GET["q"]; ? >进入亚马逊要求默认搜索词的框，但它只是不知道我这样做时的意思..

提前感谢您抽出宝贵时间阅读并可能回复！

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:14:44.943

Amazon Search 2.0 小部件使用 JavaScript 从 Amazon 的服务器中提取您保存的信息。这意味着您放入格式框中的信息将保存在他们的数据库中。您不能在其中使用 PHP 变量。您最好创建自己的搜索框，并将表单的操作设置为通过亚马逊进行搜索。查看[此链接](http://winkpress.com/amazon/add-amazon-search-box-to-wordpress-using-html/)以了解我的意思。它适用于 WordPress 网站，但您可以将其实施到任何网站中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T12:57:29.153

这绝对应该适用于“搜索”小部件 2.0。您需要确保在小部件的 amzn_assoc_default_search_key 属性中指定了所需的默认搜索值。

检查您的渲染页面源并确保 get 参数在那里。如果是并且小部件忽略了结果，则可能与编码有关。在将参数放入 amzn_assoc_default_search_key 值之前，检查您是否对 url 上的参数进行了 url 编码，并且您对它们进行了 url 解码。

顺便说一句，我做了一个功能来[简化将亚马逊搜索小部件添加到您](http://www.adam-makes-websites.com/discoveries/making_the_embedding_of_an_amazon_referrals_sales_widget_easier_and_more_intelligent)可能想要查看的网站的过程。

# javascript - 为什么这个 JavaScript 没有动态创建对象属性？

> ID：14776568
> 
> 赞同：0
> 
> 时间：2013-02-08T16:03:23.590
> 
> 标签：javascript

此代码无法动态设置对象属性。 `console.log(key, val)`表明循环正确地迭代了`options`（与 的键合并`defaults`和过滤`defaults`）：

```
function Foo(options) {
   var defaults = { foo: "bar" },
       options  = _.defaults(options || {}, defaults);

    _.each(_.pick(options, _.keys(defaults)), function(val, key) {
        this[key] = val; // Not working
    });

    this.baz = 'bar'; // Works
};

var foo = new Foo();

foo.hasOwnProperty('foo'); // false
foo.hasOwnProperty('baz'); // true 
```

**Q1**：为什么它不起作用？`this[key]`错了吗？

**Q2**：（通常）应该如何处理按键敏感问题，即通过`{"FOO": "bar"}`？

功能（如果重要）[`._defaults`](http://underscorejs.org/#defaults)：[`_.pick`](http://underscorejs.org/#pick)和[`_.keys`](http://underscorejs.org/#keys)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:05:20.513

回调中的`this`上下文`each`未指向包含函数`Foo`。您可以将上下文作为第二个参数提供给`each`：

```
_.each(_.pick(options, _.keys(defaults)), function(val, key) {
    this[key] = val;
}, this); 
```

请注意，您根本不需要迭代这些值，您可以使用`_.extend`：

```
_.extend(this, _.pick(options, _.keys(defaults))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:06:16.660

Every function has its own "this", so the "this" inside the _.each isn't the same that is in Foo. You need to manually pass the "this" from Foo to the each, in order to do that, you can use the underscore function _.bind.

# wcf - WCF REST 服务、IIS 和数据库

> ID：14776574
> 
> 赞同：0
> 
> 时间：2013-02-08T16:03:41.737
> 
> 标签：wcf, sql-server-2008, rest, iis

我无法理解 WCF REST 服务的问题。问题是该服务是由 IIS 托管的。

在服务中，我有两个功能：

```
[ServiceContract]
public interface IFishMapService
{
    [OperationContract]
    [WebInvoke(Method = "GET",
                BodyStyle = WebMessageBodyStyle.WrappedRequest,
                ResponseFormat = WebMessageFormat.Json,
                RequestFormat = WebMessageFormat.Json,
                UriTemplate = "/FindAllRecords")]
     List<Record> findAllRecords();

    [OperationContract]
    [WebInvoke(Method = "GET",
                BodyStyle = WebMessageBodyStyle.WrappedRequest,
                ResponseFormat = WebMessageFormat.Json,
                RequestFormat = WebMessageFormat.Json,
                UriTemplate = "/returnHello")]
      String returnHello();
} 
```

第二个只是一个返回字符串的简单测试函数。第一个返回一个列表并连接到我机器上由 MS SQL Server 2008 制作的数据库。

所以......测试时发生了什么： - 如果我用我的 IP 地址测试第二个函数，如下所示：

```
ipAddress/MyApp/FishMapService.svc/returnHello 
```

一切都好！

*   如果我对第二个函数做同样的事情，但使用 localhost：

    本地主机：57640/FishMapService.svc/returnHello

一切都还可以！得到一个美好而美丽的回应！

*   如果我用 localhost 测试第一个：

    本地主机：57640/FishMapService.svc/FindAllRecords

我看到了已发送的查询结果！又美了！我看到了我需要的所有信息。

*   如果我用我的 IP 测试同一个：

    ipAddress/MyApp/FishMapService.svc/FindAllRecords

在浏览器“[]”中获取这个？！

为什么会这样？！有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:05:14.853

问题已经解决了！

解决方案是 MS SQL Studio 中当前数据库的权限。一个好的建议是检查服务器的日志文件。您可以通过管理（文件夹）-> SQL Server 日志-> 当前日志来执行此操作

在新窗口中，您将看到谁正在尝试登录您的 SQL Server。对我来说，它是“IIS APPPOOL\Default Website”。所以你去数据库表 [DataBaseTableNae] -> 安全 -> 右键单击​​“用户” -> 新用户

然后使用您已经在日志文件中看到的名称添加新用户，对我来说再次是“IIS APPPOOL\Default Website”，并为该用户提供您想要的权限。

最后，您应该能够看到在浏览器中输入的响应 ipAddress/MyApp/FishMapService.svc/FindAllRecords （这是我项目中的 url）

希望这对某人有用！

干杯!

# javascript - HTML5 localStorage：大 JSON，特定值作为更改 CSS 的条件（收藏夹列表）

> ID：14776575
> 
> 赞同：1
> 
> 时间：2013-02-08T16:03:41.937
> 
> 标签：javascript, jquery, json, local-storage

给定 localStorage 中的大型 JSON 表和给定键，如何访问关联值并将其用作 CSS 的条件？ 

**给定以下 JSON：**

```
var data = [ 
{ 'myKey': 'A', 'status': 0 },
{ 'myKey': 'B', 'status': 1 },
{ 'myKey': 'C', 'status': 1 },
{ 'myKey': 'D', 'status': 1 }
]; 
```

**以下 html**样式化：

```
<p id="A">AA</p>
<p id="B">BB</p>
<p id="C">CC</p>
<p id="D">DD</p> 
```

和**以下CSS**：

```
.status1 { color: green; }
.status0 { color: red; } 
```

这是“点击收藏/收藏列表/收藏明星”背后的基本原则之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:03:41.937

小提琴的工作示例[，JQuery](http://jsfiddle.net/daaCf/1/)

**0\. 应用技巧！：JSON & localStorage**

```
/* To store JSON in localStorage, you compress it as string */
    localStorage["results"] = JSON.stringify(data); // or lS.restults

/* Whenever you want to work on it, need to uncompress the JSON */
    var data = JSON.parse(localStorage["results"]); 
```

**1\. 创建元函数：getJsonVal()**

```
//META.Fn: pullVal
function getJsonVal(json, itemId) {
    for (var i in json) {
        if (json[i].myKey == itemId) {
            return json[i]; 
        }
    }
} 
```

**2\. 在注入CSS类之前检查JSON值的函数**

```
//META.Fn: loadSwitch [check localStorage & set CSS
function loadSwitchCSS($set, i) {
    setTimeout(function () {
        var myID = $set.eq(i).attr('id'); // a. Get key [my case: from the html ID]
        alert("look at:"+ myID);
        var val = getJsonVal(data, myID).status;
        // alert(data);
        if (val == 1) { // c. CSS remove-add: so if...else... CSS
            $set.eq(i).removeClass().addClass('status1');
        } else {
            $set.eq(i).removeClass().addClass('status0')
        }
        if (i < $set.length - 1) {
            loadSwitchCSS($set, i + 1);
        }
    }, 100);
} 
```

**3\. 加载时触发函数：**

```
loadSwitchCSS($('p'), 0); 
```

# jquery - 在所有浏览器 css 或 jquery 中创建相同的滚动条样式效果？

> ID：14776582
> 
> 赞同：0
> 
> 时间：2013-02-08T16:03:56.367
> 
> 标签：jquery, css

嗨，我正在尝试让我的网站滚动条在所有浏览器中看起来都一样。我正在尝试使用 jquery 来做到这一点，但没有任何运气可以让一个工作，我可以不只是在 css 中做到这一点吗？

将不胜感激任何教程链接或任何朝着正确方向的推动。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:05:33.670

从一个类似的[线程](https://stackoverflow.com/questions/7725652/css-scrollbar-style-cross-browser)：

> 滚动条 CSS 样式是 Microsoft 开发人员发明的一种奇怪的东西。它们不是 CSS 的 W3C 标准的一部分，因此大多数浏览器都会忽略它们。

尽管如此，[jScrollPane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)似乎是一个非常适合*大多数*浏览器的解决方案。

# ckeditor - XPages 中 CKEditor 组件的缩进/突出问题

> ID：14776583
> 
> 赞同：1
> 
> 时间：2013-02-08T16:03:56.993
> 
> 标签：ckeditor, xpages, lotus-domino

我对 CKEditor 组件及其缩进/缩进功能有疑问。

我用 RichText CKeditor 组件创建了一个文档：我添加了缩进和缩进的文本。当我以阅读模式重新打开文档时：没关系。当我编辑我的文档时：所有缩进和缩进都丢失了！

当我查看 HTML 代码时，我看到 indent/oudent 对应于“margin-left”属性。当 CKEditor 在编辑模式下打开时，这些属性似乎被删除了。

那你呢 ？这是一个问题吗？我可以忘记一些事情吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:20:09.317

这是一个已知问题（我们希望在未来的版本中解决），这是由于默认情况下在富文本编辑器上设置了[活动内容过滤。](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.ui.doc/wpd_forms_xpages_security.html)您可以通过设置 htmlFilter="identity" 来覆盖此设置，但您正在打开您的应用程序和服务器以遭受恶意攻击 - 不建议这样做。

# git - git：如何将克隆变成新分支？

> ID：14776584
> 
> 赞同：10
> 
> 时间：2013-02-08T16:04:05.447
> 
> 标签：git

我已经从我的存储库中克隆了 master 并且一直在进行大量编辑和本地提交。我现在意识到这应该是我远程存储库中的一个新分支。通常我只是推送到远程系统，如何将新分支推送到远程存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:08:21.227

假设你还没有推送任何东西，你的历史看起来像

```
A -- B -- C -- D -- E
^                   ^
|                   |
origin/master       master 
```

您可以执行以下操作：

```
git branch feature
git reset origin/master 
```

得到这个：

```
A -- B -- C -- D -- E
^                   ^
|                   |
|                   feature
origin/master,master 
```

# javascript - Node.js：优雅重启和服务器正常运行时间，如何？

> ID：14776587
> 
> 赞同：3
> 
> 时间：2013-02-08T16:04:10.127
> 
> 标签：javascript, node.js, socket.io

我一直在使用`Node.js`and开发一个实时应用程序`Socket.io`，我想将它从本地测试阶段带到我们的一些用户中进行测试。问题是，如果我关闭与服务器的 ssh 会话，它也会停止我开始使用的服务器`node app.js`

我考虑过使用`nohup,`，但我偶尔会遇到分段错误或其他导致服务器停机的随机错误。我需要 1) 知道我的服务器何时（希望是为什么）崩溃，这样我就可以努力改进它以减少崩溃并确保它重新启动。此外，我不能 24/7 醒来自己重新启动服务器，所以有一些东西`daemon`会很可爱。

我发现`forever`可以通过 npm 获得，但它与更新的 Node 版本不兼容，`0.8.x`并且我正在运行`0.9.1`，而且它似乎没有得到很好的维护。

我也偶然发现了`distribution`and `up`，但似乎缺乏使用它们构建一个像样的应用程序的文档和示例。

`cluster`然后是使用and`os`模块的答案。[https://stackoverflow.com/a/10997753/1883464](https://stackoverflow.com/a/10997753/1883464)

但 Node 将集群列为实验性[http://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

由于缺乏关于在真实生产环境中保持 Node 服务器正常运行（以及更新其代码！）的答案、示例和讨论，我开始觉得我是第一个想要将他们的应用程序部署到部署的人;) 不知何故，我确信这个问题有一些我没有找到的常见答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:02:51.847

操作系统提供的 init 系统提供了许多优于任何 Node.js 模块的优势。连接到 init 系统是确保您的应用程序在重新启动后自动启动的唯一方法。

我们使用 Ubuntu 和 Upstart 取得了很大的成功。Upstart 将在崩溃时重新启动您的应用程序，并且可以在运行您的进程之前设置用户 ID/组。**不要以 Root 身份运行**。

编写 Upstart 文件有点痛苦，我们使用[Node Foreman](https://npmjs.org/package/foreman)从我们的应用程序中自动生成和导出一组 upstart 文件`Procfile`。

```
npm i -g foreman
cd MY_APP
nf export -o /etc/init 
```

这会将一组新贵文件放入`/etc/init`其中，可以使用`sudo start foreman`和启动和停止`sudo stop foreman`。

Upstart 不是这里唯一的解决方案，上面可以根据需要进行调整以适应其他操作系统。在 Redhat 上，我建议查看`systemd`. 我不建议使用 Mac OSX 进行生产，但在紧要关头它有`launchd`.

# excel - Excel 2010 VBA 函数返回一个数组

> ID：14776592
> 
> 赞同：0
> 
> 时间：2013-02-08T16:04:29.847
> 
> 标签：excel, vba

对于存款计算，我收到了 Excel 2010 VBA 函数实现的编译错误。我想返回一个数组，其中包含给定存款的利率及其值。

```
Function exe3djxInterestSelect(deposite)
  Dim V() As Variant
  ReDim V(1, 2)
  Select Case deposite
  Case Is < 0
    exe3djxInterestSelect = CVErr(xlErrNum)
  Case 0 To 1000
    V(1) = 0.055
    V(2) = deposite * 0.055
    exe3djxInterestSelect = V
  Case 1000 To 10000
    V(1) = 0.063
    V(2) = deposite * 0.063
    exe3djxInterestSelect = V
  Case 10000 To 100000
    V(1) = 0.073
    V(2) = deposite * 0.073
    exe3djxInterestSelect = V
  Case Else
    V(1) = 0.078
    V(2) = deposite * 0.078
    exe3djxInterestSelect = V
  End Select 
```

结束功能

它返回#VALUE！.

它有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:33:04.330

您正在混合一维和二维数组：试试这个

```
Function exe3djxInterestSelect(deposite)
  Dim V() As Variant
  ReDim V(1 To 1, 1 To 2)
  Select Case deposite
  Case Is < 0
    exe3djxInterestSelect = CVErr(xlErrNum)
  Case 0 To 1000
    V(1, 1) = 0.055
    V(1, 2) = deposite * 0.055
    exe3djxInterestSelect = V
  Case 1000 To 10000
    V(1, 1) = 0.063
    V(1, 2) = deposite * 0.063
    exe3djxInterestSelect = V
  Case 10000 To 100000
    V(1, 1) = 0.073
    V(1, 2) = deposite * 0.073
    exe3djxInterestSelect = V
  Case Else
    V(1, 1) = 0.078
    V(1, 2) = deposite * 0.078
    exe3djxInterestSelect = V
  End Select
End Function 
```

# php - 比较所有键的多个数组

> ID：14776598
> 
> 赞同：1
> 
> 时间：2013-02-08T16:04:44.880
> 
> 标签：php, arrays, multidimensional-array, comparison

我对 PHP 数组和一些我想做的比较有一点麻烦。对不起，我的英语不好 ：（

我正在构建一个图片管理系统。用户可以一次选择多张图片，并编辑所有选中图片的信息。但是有些字段已经填写了 - 如果特定字段填充了多张图片的不同信息，我想向用户显示一个 '*' 字符。

我的问题如下： - 我有一个二维数组，其中包含所有选定图片的 mySQL 查询结果（这个数字当然是不确定的）。这是结果数组的示例：

```
Array
(

[0] => Array
    (
        [Folder_id] => 40
        [Title_fr] => test
        [Title_en] => 
        [Desc_fr] => 
        [Desc_en] => 
        [Place_fr] => Koksijde, Belgique
        [Place_en] => Koksijde, Belgium
        [Place_ICAO] => EBBE
        [Place_city] => 
        [Place_country] => be
    )

[1] => Array
    (
        [Folder_id] => 40
        [Title_fr] => test
        [Title_en] => 
        [Desc_fr] => 
        [Desc_en] => 
        [Place_fr] => Koksijde, Belgique
        [Place_en] => Koksijde, Belgium
        [Place_ICAO] => EBBE
        [Place_city] => 
        [Place_country] => be
    )

[2] => Array
    (
        [Folder_id] => 40
        [Title_fr] => test
        [Title_en] => 
        [Desc_fr] => 
        [Desc_en] => 
        [Place_fr] => Koksijde, Belgique
        [Place_en] => Koksijde, Belgium
        [Place_ICAO] => EBBE
        [Place_city] => 
        [Place_country] => be
    )

[3] => Array
    (
        [Folder_id] => 51
        [Title_fr] => test
        [Title_en] => 
        [Desc_fr] => 
        [Desc_en] => 
        [Place_fr] => FRANC
        [Place_en] => ANGLE
        [Place_ICAO] => ENGL
        [Place_city] => Münich2
        [Place_country] => de
    ) 
```

如您所见，有些字段可能对所有记录都是通用的，有些字段可能不同。例如，[Place_fr] 并非所有记录都相同，但 [Desc_fr] 是。

我想编写一个函数，该函数返回一个以所有字段为键的数组，如果该字段在记录之间包含不同的值，则以“*”为值，如果该字段对所有记录都是通用的，则为该值。

例如，这里的结果是：

```
 Array
 ( 
        [Folder_id] => *
        [Title_fr] => test
        [Title_en] => 
        [Desc_fr] => 
        [Desc_en] => 
        [Place_fr] => *
        [Place_en] => *
        [Place_ICAO] => *
        [Place_city] => *
        [Place_country] => *
 ) 
```

我知道这可以使用 array_diff_assoc() 来完成。使用两个数组很容易完成。问题是我必须将不确定数量的参数传递给这个函数，我不知道如何解决这个问题。

抱歉这个菜鸟问题 - 我只是数组的初学者。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:31:23.340

这应该这样做：

```
// get common keys => values
$common  = call_user_func_array('array_intersect_assoc', $arr);

// and append missing keys to them, with "*" values
$common += array_fill_keys(array_keys($arr[0]), '*'); 
```

（假设这`$arr`是你上面的数组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:18:12.663

```
$arrays = array (
    array (
        "Folder_id" => 40,
        "Title_fr" => "test",
        "Title_en" => "",
        "Desc_fr" => "",
        "Desc_en" => "",
        "Place_fr" => "Koksijde, Belgique",
        "Place_en" => "Koksijde, Belgium",
        "Place_ICAO" => "EBBE",
        "Place_city" => "",
        "Place_country" => "be"
    ),
    array (
        "Folder_id" => 40,
        "Title_fr" => "test",
        "Title_en" => "",
        "Desc_fr" => "",
        "Desc_en" => "",
        "Place_fr" => "Koksijde, Belgique",
        "Place_en" => "Koksijde, Belgium",
        "Place_ICAO" => "EBBE",
        "Place_city" => "",
        "Place_country" => "be"
    ),
    array (
        "Folder_id" => 40,
        "Title_fr" => "test",
        "Title_en" => "",
        "Desc_fr" => "",
        "Desc_en" => "",
        "Place_fr" => "Koksijde, Belgique",
        "Place_en" => "Koksijde, Belgium",
        "Place_ICAO" => "EBBE",
        "Place_city" => "",
        "Place_country" => "be"
    ),
    array (
        "Folder_id" => 51,
        "Title_fr" => "test",
        "Title_en" => "",
        "Desc_fr" => "",
        "Desc_en" => "",
        "Place_fr" => "FRANC",
        "Place_en" => "ANGLE",
        "Place_ICAO" => "ENGL",
        "Place_city" => "Münich2",
        "Place_country" => "de"
    )
);

function compare($arrays) {
    foreach ($arrays as $array) {
        foreach ($array as $key => $value) {
            if (!isset($result[$key])) {
                $result[$key] = $value;
            } else if ($result[$key] !== "*") {
                if ($value !== $result[$key]) {
                    $result[$key] = "*";
                }
            }
        }
    }
    return $result;
}

echo "<pre>";
print_r(compare($arrays));
echo "</pre>"; 
```

# python - 将每日 OHLCV 重采样为每周 OHLCV

> ID：14776601
> 
> 赞同：3
> 
> 时间：2013-02-08T16:04:59.327
> 
> 标签：python, pandas

我想将每日（ohlcv）重新采样/转换为每周（ohlcv）。熊猫可以做到这一点吗？

字典格式的样本数据如下（1周每日数据）：

```
 {'High': {<Timestamp: 2007-03-02 00:00:00>: 1384.5,
  <Timestamp: 2007-03-05 00:00:00>: 1373.0,
  <Timestamp: 2007-03-06 00:00:00>: 1378.75,
  <Timestamp: 2007-03-07 00:00:00>: 1381.75,
  <Timestamp: 2007-03-08 00:00:00>: 1388.75},
 'Last': {<Timestamp: 2007-03-02 00:00:00>: 1365.0,
  <Timestamp: 2007-03-05 00:00:00>: 1351.5,
  <Timestamp: 2007-03-06 00:00:00>: 1374.5,
  <Timestamp: 2007-03-07 00:00:00>: 1372.0,
  <Timestamp: 2007-03-08 00:00:00>: 1384.5},
 'Low': {<Timestamp: 2007-03-02 00:00:00>: 1364.25,
  <Timestamp: 2007-03-05 00:00:00>: 1350.5,
  <Timestamp: 2007-03-06 00:00:00>: 1362.0,
  <Timestamp: 2007-03-07 00:00:00>: 1370.75,
  <Timestamp: 2007-03-08 00:00:00>: 1369.25},
 'Open': {<Timestamp: 2007-03-02 00:00:00>: 1378.5,
  <Timestamp: 2007-03-05 00:00:00>: 1356.75,
  <Timestamp: 2007-03-06 00:00:00>: 1365.25,
  <Timestamp: 2007-03-07 00:00:00>: 1374.0,
  <Timestamp: 2007-03-08 00:00:00>: 1370.0},
 'Volume': {<Timestamp: 2007-03-02 00:00:00>: 1706906,
  <Timestamp: 2007-03-05 00:00:00>: 1984041,
  <Timestamp: 2007-03-06 00:00:00>: 1397911,
  <Timestamp: 2007-03-07 00:00:00>: 1255484,
  <Timestamp: 2007-03-08 00:00:00>: 798237}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T02:52:44.123

将数据放入 DataFrame 后，您可以执行以下操作：

```
 ohlc_dict = {
    'Open':'first',
    'High':'max',
    'Low':'min',
    'Close':'last',
    'Volume':'sum'
    }

DataFrame.resample('W-Fri', how=ohlc_dict) 
```

这将为您提供周五结束的一周的 ohlc 数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:12:51.310

示例改编自官方文档：

```
# Weekly means
In [1305]: ts.resample('W', how='mean')
Out[1305]: 
2011-01-01   -0.319569
2011-01-02   -0.337703
2011-01-03    0.117258
Freq: W 
```

`'W-SUN'`您可以使用例如或将日期偏移到一周中的特定日期`'W-MON'`。

[链接到文档](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.resample.html?highlight=resample#pandas.Series.resample)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-28T04:04:55.067

在 pandas 版本之后`0.18.0`，该`how`参数在 function 中被弃用`resample`，因此建议的解决方案变为：

```
ohlc_dict = {
    'Open':'first',
    'High':'max',
    'Low':'min',
    'Close':'last',
    'Volume':'sum'
    }

df = df.resample('W').agg(ohlc_dict) 
```

# sql-server-2008 - ms sql 分组结果查询

> ID：14776603
> 
> 赞同：1
> 
> 时间：2013-02-08T16:05:01.473
> 
> 标签：sql-server-2008

我基本上有一个我创建的记录进出发票的交易表。我有一个销售 (=1) 和购买 (=2) 的标志。

我想要一个简单的 sql，按月计算销售额和采购量。问题是，如果我从组中删除事务类型（mybooks_trans_class_id_fk），它不起作用，但如果我把它留在结果中，结果不是我想要的。

**SQL：**

```
 SELECT 
        DATEPART(Year, mybooks_trans_transaction_datetime) as 'sales_year',
        DATEPART(Month, mybooks_trans_transaction_datetime) as 'sales_month',
        case 
        when cast( mybooks_trans_class_id_fk as nvarchar(100))!='1' then cast(sum(mybooks_trans_gross_amount) as nvarchar(100))
        else '0' 
        end as total_sales,

        case 
        when cast( mybooks_trans_class_id_fk as nvarchar(100))!='2' then cast(sum(mybooks_trans_gross_amount) as nvarchar(100))  
        else '0' 
        end as total_purchases         
        from view_mybooks_transactions_all_details 
        GROUP BY DATEPART(Year, mybooks_trans_transaction_datetime), 
        DATEPART(MM, mybooks_trans_transaction_datetime),mybooks_trans_class_id_fk 
```

**结果是：**

```
2012     11 0   15300.00

2012     12 0   2500.00

2013    1   0   1300.00

2013    1   600.00  0

2013    2   0   2750.00

2013    2   1500.00 0 
```

但我希望第 1 个月仅在一行中，所以我想要的结果是

```
2012    11  0   15300.00

2012    12  0   2500.00

2013    1   600.00  1300.00

2013    2   1500.00 2750.00 
```

有什么建议么？我的sql能力充其量是中等！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:25:09.427

这应该有效：（尽量不要改变太多）

```
SELECT 
  DATEPART(Year, mybooks_trans_transaction_datetime) as 'sales_year',
  DATEPART(Month, mybooks_trans_transaction_datetime) as 'sales_month',
  SUM(case 
      when mybooks_trans_class_id_fk != 1
      then mybooks_trans_gross_amount
      else 0
      end) as total_sales,
  SUM(case 
      when mybooks_trans_class_id_fk != 2
      then mybooks_trans_gross_amount
      else 0
      end) as total_purchases
FROM view_mybooks_transactions_all_details 
GROUP BY DATEPART(Year, mybooks_trans_transaction_datetime), 
         DATEPART(MM, mybooks_trans_transaction_datetime) 
```

# c++ - c++ 11 正则表达式错误

> ID：14776605
> 
> 赞同：3
> 
> 时间：2013-02-08T16:05:05.007
> 
> 标签：c++, regex, gcc, c++11, libstdc++

只是一个示例代码`C++ Primer 5th Edition: 17.3.3\. Using the Regular Expression Library`

主文件`main.cpp`：

```
#include <iostream>
#include "regexcase.h"
using namespace std;

int main() {
    using_regex();
    return 0;
} 
```

头文件`regexcase.h`：

```
#ifndef REGEXCASE_H_
#define REGEXCASE_H_

#include <regex>
#include <string>

void using_regex();
std::string parseCode(std::regex_constants::error_type etype);

#endif /* REGEXCASE_H_ */ 
```

源文件`regexcase.cpp`：

```
#include "regexcase.h"
#include <iostream>
using namespace std;

void using_regex() {
    // look for words that violate a well-known spelling rule of thumb, "i before e, except after c":
    // find the characters ei that follow a character other than c
    string pattern("[^c]ei");
    // we want the whole word in which our pattern appears
    pattern = "[a-zA-Z]*" + pattern + "[a-zA-Z]*";  //[a-zA-Z]*   [[:alpha:]]*
    try {
        regex r(pattern, regex_constants::extended);    // construct a regex to find pattern                // , regex_constants::extended
        smatch results;     // define an object to hold the results of a search
        // define a string that has text that does and doesn't match pattern
        string test_str = "receipt freind theif receive";
        // use r to find a match to pattern in test_str
        if (regex_search(test_str, results, r)) // if there is a match
            cout << results.str() << endl;      // print the matching word
        else
            cout << "no match for " << pattern << endl;
    } catch (regex_error &e) {
        cout << "what: " << e.what() << "; code: " << parseCode(e.code()) << endl;
    }
}

string parseCode(regex_constants::error_type etype) {
    switch (etype) {
    case regex_constants::error_collate:
        return "error_collate: invalid collating element request";
    case regex_constants::error_ctype:
        return "error_ctype: invalid character class";
    case regex_constants::error_escape:
        return "error_escape: invalid escape character or trailing escape";
    case regex_constants::error_backref:
        return "error_backref: invalid back reference";
    case regex_constants::error_brack:
        return "error_brack: mismatched bracket([ or ])";
    case regex_constants::error_paren:
        return "error_paren: mismatched parentheses(( or ))";
    case regex_constants::error_brace:
        return "error_brace: mismatched brace({ or })";
    case regex_constants::error_badbrace:
        return "error_badbrace: invalid range inside a { }";
    case regex_constants::error_range:
        return "erro_range: invalid character range(e.g., [z-a])";
    case regex_constants::error_space:
        return "error_space: insufficient memory to handle this regular expression";
    case regex_constants::error_badrepeat:
        return "error_badrepeat: a repetition character (*, ?, +, or {) was not preceded by a valid regular expression";
    case regex_constants::error_complexity:
        return "error_complexity: the requested match is too complex";
    case regex_constants::error_stack:
        return "error_stack: insufficient memory to evaluate a match";
    default:
        return "";
    }
} 
```

调用的输出`using_regex();`是`what: regex_error; code: error_brack: mismatched bracket([ or ])`

似乎正则表达式无法**解析**括号。

参考[这个问题](https://stackoverflow.com/questions/8060025/is-this-c11-regex-error-me-or-the-compiler)的答案，我`regex_constants::extended`用来初始化正则表达式对象，然后是`regex r(pattern, regex_constants::extended);`

然后输出是`no match for [[:alpha:]]*[^c]ei[[:alpha:]]*`

似乎正则表达式无法**匹配**模式。

然后我用`[a-zA-Z]*`替换字符类`[[:alpha:]]*`（`regex_constants::extended`仍然设置）。输出仍然是`no match for [a-zA-Z]*[^c]ei[a-zA-Z]*`

平台：`windows`

使用的工具：`Eclipse for C/C++`;`MinGW (g++ --version: g++ 4.7.2)`

**编辑**：感谢@sharth，添加主文件以完成代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:12:43.117

我刚刚使用 libc++ 和 clang++ 进行了测试。这按预期工作。这是我的主要内容：

```
int main() {
    string test_str = "receipt freind theif receive";
    string pattern = "[a-zA-Z]*[^c]ei[a-zA-Z]*";

    try {
        regex r(pattern, regex_constants::extended);
        smatch results;

        if (regex_search(test_str, results, r))
            cout << results.str() << endl;
        else
            cout << "no match for " << pattern << endl;
    } catch (regex_error &e) {
        cout << "what: " << e.what() << "; code: " << parseCode(e.code()) << endl;
    }
} 
```

输出：

```
freind 
```

* * *

另一方面，GCC 4.7.2 给出了这个结果：

```
no match for [a-zA-Z]*[^c]ei[a-zA-Z]* 
```

这是因为在 GCC 4.7.2 的 libstdc++ 中，它们仍然没有实现正则表达式。这是 的实现`regex_search`：

```
template<typename _Bi_iter, typename _Allocator, typename _Ch_type, typename _Rx_traits>
inline bool regex_search(_Bi_iter __first, _Bi_iter __last, match_results<_Bi_iter, _Allocator>& __m, const basic_regex<_Ch_type, _Rx_traits>& __re, regex_constants::match_flag_type __flags) {
    return false;
} 
```

* * *

需要注意的是，包含一个读者可以编译的小程序非常有帮助。这样就不会混淆正在运行的代码。

# c - strtok 的更干净的实现

> ID：14776606
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:05.023
> 
> 标签：c, string, delimiter, strtok

只是为了好玩，我正在编写一个程序，它将接受用户输入的字符串（甚至可能是文本文档）并打乱字符串中的单词。

我正在尝试使用该`strtok`函数来分隔字符串中的每个单词。目前我觉得我目前的实现`strtok`是草率的：

```
int main(int argc, char *argv[])
{
    char *string, *word;

    if(!(string = getstr()))        //function I wrote to retrieve a string
    {
        fputs("Error.\n", stderr);
        exit(1);
    }
    char array[strlen(string) + 1];     //declare an array sized to the length of the string
    strcpy(array, string);          //copy the string into the array
    free(string);
    if(word = strtok(array, " "))
    {
        //later I'll just write each word into a matrix, not important right now.
        while(word = strtok(NULL, " "))
        {
        //later I'll just write each word into a matrix, not important right now.
        }
    }
    return 0;
} 
```

我觉得必须有一种更简洁的实现方式，`strtok`而无需在程序中途声明数组。我只是觉得不正确。是否使用`strtok`正确的方法来解决这个问题？我宁愿不使用固定大小的数组，因为我喜欢一切都是动态的，这就是为什么我开始怀疑使用`strtok`是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:14:07.857

如果您的字符串按照您的免费建议进行了分配。然后你不需要将它复制到一个新的缓冲区中（顺便说一句，1 个字符太短了）。使用您提供的缓冲区。

如果它是由a 提供给您的，您只需要复制它，`const char *`即您不允许修改缓冲区的内容。

使用常规也更好，`strtok_r`因为常规`strtok`是不可重入的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:12:00.010

您可以使用`scanf()`而不是`getstr()`和`strtok()`

```
char word[100];
while(scanf(" %s",word)!=EOF) {
    // use the word string here
} 
```

用户应该停止输入字符

*   EOF = `CTRL`+ `D`（对于 Linux）

*   EOF = `CTRL`+ `Z`（对于 Windows）

# asp.net - 谷歌地图未加载到容器中

> ID：14776608
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:12.983
> 
> 标签：asp.net, css, google-maps, google-maps-api-3

我正在尝试将 Google Map 加载到 中`<td>`，但我无法找到问题所在。

**脚本**

```
function initialize() {
    var mapOptions = {
        center: new google.maps.LatLng(33, 73),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"),
            mapOptions);

} 
```

**HTML**

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <table class="style1">
        <tr>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td colspan="6" id="map" style="height:600px;">
                &nbsp;</td>
        </tr>
    </table>

</asp:Content> 
```

您可以在下图中看到我的地图是如何加载的，它应该加载到浅灰色区域。 ![在此处输入图像描述](../Images/22961c7d2a9f5dba4e432e3c01c49387.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:11:42.827

在 td 中创建一个 div

```
<td colspan="6" style="height:600px;">
        <div id="map" style="width:100%; height:100%"></div>         
</td> 
```

# java - 如何在没有 JNI 的情况下在 Android 上重用 C 代码？

> ID：14776610
> 
> 赞同：2
> 
> 时间：2013-02-08T16:05:16.883
> 
> 标签：java, android, c++, c

我知道，关于如何在 Android 上重用本机代码存在很多问题。

但是，总是需要使用 JNI。而且，对于我的应用程序来说，这是一个问题，因为我无法对我的 C/C++ 代码进行任何修改。

有没有像 JNA 这样的方法可以在 Android 上使用？

我正在使用 Eclipse 和 windows。如果可以像库（.dll 或 .so）一样重用代码，那将是完美的。

# c# - 从 DLL 调用返回后变量值具有错误值

> ID：14776612
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:22.450
> 
> 标签：c#, web-services, filestream

我有一个对我来说似乎很奇怪的情况。我在 C# 中有一个 WCF Web 服务，我在其中写入了一些调试代码，它打开一个文件并写入一些关于当前变量值的行并关闭文件。这是我关闭和打开的一项功能，具体取决于我是否需要使用它来调试客户位置的某些东西。

对于所有读取和写入功能，它与在后台执行 COBOL 代码以访问旧数据存储系统的 DLL 交互。所有的变量都是通过引用传入的，返回的数据是通过那些相同的引用变量返回的。大多数时候，变量只是初始化为正确的大小并传入并将数据返回给我。函数的返回类型是 COBOL 环境中的所有执行状态，告诉您程序是否未加载/初始化正常，执行是否正常等。所有写入都返回 0 成功和 -1 失败。

在我对这个 DLL 的所有调用之前和之后，我都有我的调试代码，所以我可以看到之前和之后的值。调试函数只是在 FileStream 中写入一行并返回。我确实将相同的变量按值传递给调试函数，我将这些变量作为引用传递给我的工作函数。

当我打开调试开关时，奇怪的事情开始发生。在 1-2 次调用之后，worker 函数在成功/失败代码中继续保持值为 0。当然，我的逻辑认为 0 是对数据文件的成功写入，所以我错误地报告写入工作正常。调试 dll，您可以明确看到它返回 -1，试图通知 Web 服务写入失败，在我的情况下这是正确的，因为发生了重复的密钥违规。当值出现在 Visual Studio 手表中时，它不知何故变成了 0，表示成功。

我无法思考的是，如果我关闭调试开关。这会关闭我的 FileStream 编写器，我通过值传递变量，然后通过引用传递给我的工作函数，一切都按应有的方式工作。Dll 中的值应正确显示成功/失败。为什么返回值会被破坏对我来说毫无意义。

我还没有尝试将所有变量复制到临时保存变量并将不同的变量传递给调试和工作函数。问题是，我不明白为什么这个价值被破坏了。它正在更改，因为我将值初始化为 -99，但它总是返回为 0，而在我的测试用例中它应该返回 -1。

在此先感谢，希望有人可以建议如何跟踪 Dll 返回和在 Visual Studio 手表中显示之间的变量，这似乎是值被损坏的地方，或者知道为什么我的调试操作可能会以某种方式损坏返回价值。

```
private UploadStatus SetRecord(int remoteId, string xmlDate, string val1, string val2, int val3, int recSeq, string name, int cat1, int cat, int seq, string val5, double val6)
{
    UploadStatus status = new UploadStatus();
    status.id = remoteId;
    int RtnCode = -99;
    int countRecSeq = Convert.ToInt16(ConfigurationManager.AppSettings["cycle-value"]); // value to cycle through for unique key

     // Pad variables appropriately
     val1 = val1 .PadRight(6, ' ');
     val2 = val2 .PadRight(3, ' ');
     val3 = val3 .PadRight(30, ' ');
     xmlDate = xmlDate.PadRight(25, ' ');
     val5 = val5.PadLeft(2, ' ');

     errorTypes ErrCode;
     try
     {

     if (debug)
     {
         string input = "remoteId: " + remoteId + "||\n" + "xmlDate: " + xmlDate + "||\n" + "val1: " + val1 + "||\n" + "val2: " + val2+ "||\n" + "val3: " + val3 + "||\n" + "recSeq: " + recSeq + "||\n" + "name: " + name + "||\n" + "cat1: " + cat1 + "||\n" + "cat: " + cat + "||\n" + "val4: " + val4 + "||\n" + "val5: " + val5 + "||\n" + "val6: " + val6 + "||\n" + "RtnCode: " + RtnCode + "||\n";
         writeDebug("\n\n*** Start UploadStatus SetRecord(int remoteId, string xmlDate, string val1, string val2, int val3, int recSeq, string name, int cat1, int cat, int val4, string val5, double val6) ***\n" + input);
      }
      ErrCode = COBOL.SET_RECORD(ref xmlDate, ref val1, ref val2, ref val3, ref recSeq, ref name, ref cat1, ref cat, ref val4, ref val5, ref val6, " ", ref RtnCode);
      // Add to recSeq looking for a unique key to insert
      while (ErrCode == errorTypes.CS_OK && recSeq < countRecSeq && RtnCode == -1)
      { ...

private void writeDebug(string input)
{
    string logText = DateTime.Now.ToShortDateString() + " " + DateTime.Now.TimeOfDay.ToString() + ": " + input;
    try
    {
        if (!File.Exists(debugPath))
        {
            using (StreamWriter sw = File.CreateText(debugPath))
            {
                sw.Write(logText);
            }
        }
        else
        {
            using (StreamWriter sw = File.AppendText(debugPath))
            {
                sw.Write(logText);
            }     
        }
     }
     catch (Exception ex)
     {
         writeException(ex);
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T13:22:22.480

最终，我解决了这种情况。最初，如果用于写入数据的键与另一个键匹配，则该函数将返回失败。在该代码中，我们只是将其开发为递增到下一个键。问题可能仍然存在，但由于该功能最终会找到要使用的密钥，因此它总是成功的。

此后，供应商对 COBOL 和 .NET 互操作进行了改进。此外，我们完全改变了我们在语言之间进行交流的方式，这似乎更加稳定。

# wpf - 从不同的 ViewModel 提升 MVVM 属性的最佳方法是什么？

> ID：14776619
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:44.480
> 
> 标签：wpf, xaml, mvvm, properties

在我的 MainViewModel 上，我有一个如下所示的属性：

```
private bool _IsSkinNight = true;
    public bool IsSkinNight
    {
        get { return _IsSkinNight; }
        set 
        {
            _IsSkinNight = value;

            RaisePropertyChanged("IsSkinNight");
            RaisePropertyChanged("WindowBackColor");
            RaisePropertyChanged("StyleImage");
        }
    } 
```

如您所见，我使用这一属性来提升其他属性。它使更改 UI 变得更加容易。特别是当我要向它添加更多项目时。

但是，我在 WPF 页面上有一个属性，我也需要更新它。但由于它在不同的页面上，它的 ViewModel 也是独立的。所以这个属性不能在它上面调用 RaisePropertyChanged 并且页面中的属性不能检查 IsSkinNight 的状态。

那么在不同的 ViewModel 之间交叉的最佳方式是什么？我将添加更多页面。那么有没有办法让所有 ViewModel 都可以访问的通用属性呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:09:52.863

即使我不喜欢使用它，您也可能需要查找 EventAgregators。

基本上，您将能够在 MainViewModel 中触发一个事件，并且在您的其他视图模型中，您将能够注册到此聚合器的一个或多个事件。

但是，我强烈建议您非常轻松地使用它，因为它会变得非常难以调试，因为当您触发这样的事件时没有调用堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:37:23.577

在这种情况下，我有时会创建一种 Context 类来跟踪“全局”属性。这个类必须注册为单例。

```
public class SkinContext : ISkinContext {
    private bool _IsSkinNight = true;
    public bool IsSkinNight
    {
        get { return _IsSkinNight; }
        set 
        {
            _IsSkinNight = value;

            RaisePropertyChanged("IsSkinNight");
            RaisePropertyChanged("WindowBackColor");
            RaisePropertyChanged("StyleImage");
        }
    } 
```

然后我在每个需要了解上下文并订阅`NotifyPropertyChanged`事件（或您创建的自定义事件）的 ViewModel 中注入此类：

```
public class SomeViewModel {
    public SomeViewModel(ISkinContext context){
        context.OnPropertyChanged += (s,e) => { /*Raise other notification and whatnot*/ }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:07:49.697

感谢大家的帮助。根据此处的建议，我进行了更多研究，并遇到了 MVVM 消息。

使用[这篇](http://jesseliberty.com/2011/01/06/windows-phone-from-scratch%E2%80%93mvvm-light-toolkit-soup-to-nuts-3/)博文，我能够使用 MVVM 消息来实现我的目标。再次感谢。

# osgi - 如何通过单点登录管理不同 Web 应用程序的 Web 会话？

> ID：14776620
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:50.403
> 
> 标签：osgi, shiro

我有 2 个 osgi 分布式网络应用程序 A（A1，A2）和 B（B1，B2），我正在使用 shiro 共享 http 会话以进行单点登录，以便登录一个系统也登录另一个系统。但是我希望除了身份验证/授权数据之外，会话数据在系统 A 和 B 之间分离，所以我需要一种方法来共享身份验证数据并分离 A 和 B 的系统特定会话数据。我正在考虑使用 shiro单点登录并为每个系统使用不同的分布式会话来存储系统特定的数据，主要工作流程是：

1.  使用 shiro 登录系统 A，使用 shiro 会话 ID 创建另一个会话（或一些数据持有者对象来存储会话数据），将其存储在后端（数据库或缓存）中。
2.  在系统 A 中做一些事情，将会话数据放入上面创建的会话中，写入后端。
3.  当另一个请求进入系统 A 时，查找 id 与 shiro 会话 id 匹配的会话，如果找到，则使用它，否则创建新的。

是否有意义？这是解决我的问题的正确方法吗？什么是最好的方法？请分享你的想法。任何输入表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:43:02.810

我用 Servlet 过滤器做了类似的事情。我的 HtppSession 包含授权 id，然后我会查找并作为请求的安全上下文提供。如果不存在安全 ID，则强制客户端登录。显然，安全上下文可以保存在一个分发机制中，因此它可以从集群中的所有系统获得。

确保您在客户端和系统之间使用 https，否则有人可以窃听、读取带有 id 的 cookie，并在受害者授权的情况下登录其中一个系统。即会话劫持。

# sql - 你能用 solrj 避免 for 循环吗？

> ID：14776621
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:55.787
> 
> 标签：sql, spring, hibernate, solr, solrj

我很好奇在使用 SolrJ 时是否有办法避免使用循环。

例如。如果我要使用直接 SQL，使用适当的 java 库，我可以返回一个 Query 结果并将其转换为 List 并将其传递给我的视图（在 webapp 中）。

SolrJ（SolrQuery 和 QueryResponse）似乎无法返回简洁的列表。这意味着我必须创建一个迭代器来遍历每个返回文档并获得我想要的不理想的值。

我在这里遗漏了什么，是否可以避免这些看似无用的循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:16:33.957

SOLRJ wiki 提供了一个示例，可以满足您的要求：

[https://wiki.apache.org/solr/Solrj#Reading_Data_from_Solr](https://wiki.apache.org/solr/Solrj#Reading_Data_from_Solr)

基本上：

```
QueryResponse rsp = server.query( query );
SolrDocumentList docs = rsp.getResults();
List<Item> beans = rsp.getBeans(Item.class); 
```

编辑：

根据您在下面的评论，您似乎想要的是 SOLR 响应的非循环转换（例如，功能语言中的映射函数）。谷歌的番石榴库提供了类似的东西。我下面的示例假设您的 SOLR 响应有一个“名称”字段，您希望返回以下列表：

```
QueryResponse rsp = server.query(query);
SolrDocumentList docs = rsp.getResults();

List<String> names = Lists.transform(docs, new Function<String,SolrDocument>() {
    @Override
    public String apply(SolrDocument d) {
        return (String)d.get("name");
    }
}); 
```

不幸的是，java 不能很好地支持这种编程风格，所以函数式方法最终比简单的循环更冗长（并且可能不太清晰）：

```
QueryResponse rsp = server.query(query);
SolrDocumentList docs = rs.getResults();
List<String> names = new ArrayList<String>();
for (SolrDocument d : docs) names.add(d.get("name")); 
```

# visual-studio - Visual C++ 损坏的 unicode 字符串

> ID：14776623
> 
> 赞同：-1
> 
> 时间：2013-02-08T16:05:56.347
> 
> 标签：visual-studio, visual-c++, unicode, compiler-construction

我一直试图找到任何信息，但谷歌完全让我失望了。以下代码无法编译为标准 unicode，并且我在 MessageBoxW 中得到了损坏的东西（它是 MessageBoxW，我已经在 ollydbg 中反汇编并测试了 exe），但是我的用户名“юзер”从路径到 exe 正确显示在消息中（如预期的那样）。问题是 C 编译器，由于某种原因无法正确编译我的字符串。我尝试了 L 和 TEXT() ，结果相同。

这是输入的唯一源文件，编码为 UTF-8，没有 BOM（notepad++）。

```
#define _UNICODE
#define UNICODE

#include <windows.h>

void main() {
    wchar_t exe[254];
    GetModuleFileName(NULL,(wchar_t *)&exe,254);
    MessageBox(NULL,(wchar_t *)&exe,L"юзер",0);
    ExitProcess(0);
} 
```

构建命令（我尝试在 Visual Studio 2003 和 Visual C++ 6 中构建，但很久以前就放弃了，转而在 cmd.exe 中手动编译以获得原始结果）：

```
cl.exe /c /nologo test-unicode-ui.c
link.exe /nologo /nodefaultlib /entry:main kernel32.lib user32.lib /OUT:test-unicode-ui.exe test-unicode-ui.obj

```

这绝对没有用，我尝试的每种方法都会从源代码中给我损坏的静态字符串，但内部处理没关系（比如，你从 winapi 获得的东西是可信的并且工作正常）。当然，我可以在运行时手动编写几个字符串，幸运的是我没有很多，但这听起来不奇怪吗？

我在这里缺少什么明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:03:46.107

较新版本的 VC++ 会自动检测源代码的“UTF-8 without signature”编码。

在旧版本的 VC++ 中，您可以尝试添加 UTF-8 签名（又名“BOM”），或使用[`setlocale`pragma](http://msdn.microsoft.com/en-us/library/3e22ty2t%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T10:46:08.560

简短的回答：仔细检查编码并使用 Visual c 2008 编译器（甚至可能从 2005 年开始工作）。utf-8 != microsoft unicode，即 utf-16le。如果您使用 utf-16le 对输入文件进行编码，则在使用 vc2008 中的 cl 从 cmd.exe 构建时会得到正确的字符串。

# javascript - jQuery 插件选择器访问范围

> ID：14776624
> 
> 赞同：0
> 
> 时间：2013-02-08T16:05:58.127
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试访问下面闭包内的 jQuery 对象的选择器，这样我就不必指定它和/或缓存它。如果我用 $this 替换 $(".the_lead")，它将不会执行它的操作。

**调用插件**

```
$(".the_lead").scroll_lead({speedup: 400}); 
```

**堵塞**

```
var $this = $(this);

$(window).scroll(function() {

    var window_height = $(window).height();
    var document_height = $(document).height();
    var hide_lead;
    var scrollTop = $(window).scrollTop();

    console.log($this);

    if(!hide_lead){

        if(scrollTop>(document_height/2)){
            $(".the_lead").slideDown(options.speedup);
            }else{
            $(".the_lead").slideUp(500,function(){
                $(".the_lead").hide();
          });}
         }

        $('#hide_lead').click(function(e){
            //$(".the_lead").parent().parents('div').hide();
            hide_lead = true;           
            e.preventDefault();
        });     

    }); 
```

**$(this) 的控制台输出：**

```
[selector: ".the_lead", context: document, constructor: function, init: function, selector: ""…]
context: #document
length: 0
selector: ".the_lead"
__proto__: Object[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:15:38.183

注意`length: 0`控制台的输出。窗口滚动事件或多或少地触发用户移动的每个像素。如果没有看到更多插件代码，我无法确定，但我敢打赌 $this 仅在第一次触发滚动事件时是正确的。

此外，缓存似乎您只想缓存 .the_lead 元素之一，不是吗？这就是您的代码的读取方式。但是在函数中，`$this = $(this);`您似乎希望所有元素都带有 class `.the_lead`。尝试像这样直接缓存它。$this = $('.the_lead');

# asp.net - 回调函数，这是正确的方法

> ID：14776625
> 
> 赞同：0
> 
> 时间：2013-02-08T16:06:00.540
> 
> 标签：asp.net, callback

所以，我对 Asp.net 2.0 和 Windows 的东西非常了解。一位朋友给了我他的 3.5 书籍（C# 和 VB Wrox 中的 Asp.net 3.5 SP1）。我知道这不是最新的，但它是免费的。

所以在第 2 章中，他们谈论的是做回调而不是完整的回传。我使用 Ajax 更新面板来完成此操作。

他们描述了创建两个 JavaScript 函数，调用包装器和结果函数，然后服务器端使用 Page.RegisterClientScriptBlock 动态创建调用者。该类实现调用 RaiseCallBackEvent 的 ICallBackEventHandler

我的问题是：

*   现在最好的方法是什么：上述方法、Ajax 更新面板、jQuery.Post、jQuery.ajax？
*   每个选项将在哪些框架下工作？
*   在哪些情况下您可能会使用其中一种？喜欢参数/返回结果的大小或复杂性？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:08:46.520

我总是会在 ASP.NET WebForms 中使用`jQuery.post`或`jQuery.ajax`过度使用 UpdatePanel。

它赢得了性能，因为您只请求您需要的内容，并且没有视图状态开销。

# .net - Thread.Resume 过时或弃用：如何在不使用 System.Threading.Thread.Resume 的情况下恢复挂起的线程？

> ID：14776627
> 
> 赞同：0
> 
> 时间：2013-02-08T16:06:14.010
> 
> 标签：.net, multithreading, delphi-prism, oxygene

这是我恢复挂起线程的方法。

```
 if SerialThread.ThreadState = ThreadState.Suspended then
    SerialThread.Resume; 
```

尽管上面的代码不会引发编译器错误或语法错误，但它会引发如下警告；

> TSerialIndicator.pas(77,18): warning PW3: Obsolete: "System.Threading.Thread.Resume 已被弃用。请使用 System.Threading 中的其他类，例如 Monitor、Mutex、Event 和 Semaphore，以同步线程或保护资源。

那么，.NET 中恢复挂起线程的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:07:35.243

AutoResetEvent 非常适合“暂停”线程，您的线程代码只是调用 event.Wait 直到它有东西，当调用者调用 event.Set() 时会中断等待。

# python - 使用生成器创建列表时出现 Python SyntaxError

> ID：14776633
> 
> 赞同：0
> 
> 时间：2013-02-08T16:06:30.627
> 
> 标签：python

我对 Python 比较陌生，我只是想掌握一些常见的特性。

我尝试编写一个简单的脚本来获取 0 到 100 之间数字的所有整数平方根。这就是我想出的：

```
mylist = [n for n*n in xrange(0,101)] 
```

我在运行它时遇到了 SyntaxError，据我所知，它不喜欢“n for n*n in”位。我推断这是不可能的吗？有没有办法实现这一点，还是我需要一个 sqrt() 函数？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:07:32.633

你需要`math.sqrt`这样的东西。

```
mylist = [math.sqrt(n) for n in xrange(0,101)] 
```

Python 不够聪明，无法看到`n*n = something`和推断出`n = math.sqrt(something)`. 这也是一件好事——谁说不应该`n = -math.sqrt(something)`呢？

或者，您可以尝试内置`map`：

```
mylist = map(math.sqrt,xrange(0,101)) 
```

尽管现在大多数人更喜欢列表推导。

有时，这些东西可以更好地重写为生成器表达式：

```
def square_less_than(n):
    i = 0
    while True:
       if i*i < n:
          yield i
          i += 1
       else:
          break

print list(square_less_than(10)) 
```

`itertools`或者，使用标准库中优秀模块的等效 1-liner ：

```
import itertools
print list(itertools.takewhile(lambda i:i*i < 10,itertools.count())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:08:23.067

您的列表理解的语法不正确。您可以编写如下内容：

```
import math
mylist = [math.sqrt(n) for n in xrange(0, 101)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:43:19.003

您也可以尝试：

```
mylist = [n*n for n in xrange(0,101)] 
```

# ruby-on-rails - 自定义字体无法在 IE 中在线加载

> ID：14776634
> 
> 赞同：1
> 
> 时间：2013-02-08T16:06:30.183
> 
> 标签：ruby-on-rails, internet-explorer, twitter-bootstrap, font-face

我正在开发一个使用 twitter bootstrap 的 Rails 应用程序。

我正在使用自定义字体（Museo），它是使用 font-squirrel 生成的 css 导入的，它在本地工作没有问题，但是当部署到服务器（我相信 linode）时，字体根本不会加载或显示。

这是我用来导入字体的代码：

```
@font-face {
font-family: 'MuseoSlab500Regular';
src: url('museo_slab_500-webfont.eot') format('embedded-opentype');
src: url('museo_slab_500-webfont.eot?#iefix') format('embedded-opentype'),
     url('museo_slab_500-webfont.woff') format('woff'),
     url('museo_slab_500-webfont.ttf') format('truetype'),
     url('museo_slab_500-webfont.svg#MuseoSlab500Regular') format('svg');
font-weight: normal;
font-style: normal;

} 
```

我测试了直接打开字体，看看是不是文件有问题，文件打开了。css 是通过资产管道在 rails 中编译的，因此这段代码位于 application.css123817391838123123（随机数）文件中。我不知道这是否是资产管道的问题，我认为这很奇怪，因为它在其他任何地方都有效（chrome、safari、firefox、opera）。在 IE9 中在线测试时，如果我将浏览器模式更改为 Quirks 模式，字体就会加载。

所以，我完全没有想法，任何人都可能知道这里可能发生什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:15:17.997

尝试检查字体文件的*Content-Type*标头。IE 在 WOFF 的情况下需要它。如果是 IIS，只需添加：

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
  </staticContent>
</system.webServer> 
```

# html - 支持外语的文本区域

> ID：14776636
> 
> 赞同：1
> 
> 时间：2013-02-08T16:06:33.820
> 
> 标签：html, textarea

我有一个文本区域，当我在其中输入英语时可以正常工作，但是当我输入任何其他语言时，例如乌尔都语、阿拉伯语等。输入的一些字符变成了框......当值显示在其他页面上时...... . 所有字符都显示为“？”。

有没有办法让 textarea 接受所有语言？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:29:16.967

首先，检查@jetfire 的回答所描述的字体问题。但基本问题似乎是字体问题。默认情况下，浏览器通常`textarea`以等宽字体呈现内容。这在很多方面都是有问题的，而且不适合阿拉伯语写作，所以尝试设置例如

```
textarea { font-family: Cambria, serif; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:31:57.513

听起来可能有几个问题。

首先是确保您的字符集设置为 UTF-8。

例子：

此外，如果您要提交值并将它们存储以显示在另一个页面上，您需要确保您用于存储数据的任何机制（例如在数据库中），您的存储机制也设置为支持UTF-8。

# java - Java - Eclipse 问题中的多个包

> ID：14776642
> 
> 赞同：0
> 
> 时间：2013-02-08T16:06:50.563
> 
> 标签：java, eclipse, packages, instanceof

我的源文件夹中有以下一组软件包。包是形状、模型、视图。

假设我的模型文件夹中有一个类文件，其中包含以下代码：

```
 shapes.interfaceforshapes[][] temp = model.get2dshapearray();

if(temp[x][y].getClass().isInstance(shapes.cTriangle)){

            } 
```

请注意，在上面的代码中，`temp[x][y]`将返回一个接口我的`shapeInterface` 类和形状文件夹中的所有类接口 this。

我是否在说“该类在我的 cTriangle 类型数组中”是否正确？

我目前收到错误：

> shape.cTriangle 无法解析为变量

但我不想匹配变量，我想针对`cTriangle`我的包形状中的类对其进行测试。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:15:22.947

`instanceOf`如果要检查对象是否是某个类的实例，请使用运算符，而该`isInstance`方法需要一个类的实例。

```
 if( temp[x][y] instanceOf shapes.cTriangle) {//dosomething } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:17:31.010

这不是如何`isInstance(Object)`工作的。你必须在一个类上调用它并传入你想要匹配的对象。你会这样做：

```
shapes.cTriangle.class.isInstance(temp[x][y]); 
```

假设`cTriangle`是一个类并`temp[x][y]`返回一个对象，您想检查该对象是否属于 type `cTriangle`。

# javascript - 如何将 jQuery 脚本包含到 include.js 文件中？

> ID：14776648
> 
> 赞同：1
> 
> 时间：2013-02-08T16:07:09.220
> 
> 标签：javascript, jquery

如果这是一个头脑简单的问题，请见谅。

我的应用程序中嵌入了如下所示的 jQuery 脚本：

```
 <script type='text/javascript'>//<![CDATA[
   $(function(){
   $('#div1).on('click', function () {
       $('#divTitle').show();
   });

   $('#div1').on('click', function () {
       $('#divTitle').slideUp();
   });
   });//]]>

   </script>
   <script type='text/javascript'>//<![CDATA[
   $(function(){
   $('#div2').on('click', function () {
       $('#secDiv').show();
   });

   $('#div2).on('click', function () {
       $('#secDiv).slideUp();
   });

   });//]]>

</script> 
```

我的老板刚刚告诉我把这个 jQuery 放在 include.js 文件中。

我包含了如下所示的文件

```
function showIcon() {
            toggleButtonIcon('[Widget dijit.form.ToggleButton, pan]');
            navToolbar.activate(esri.toolbars.Navigation.PAN);
            /*dijit.registry.byClass("dijit.form.ToggleButton").forEach(function(togbtn) {          
                if (togbtn == '[Widget dijit.form.ToggleButton, pan]') {
                    togbtn.attr("checked", true);
                }
                else
                {
                    togbtn.attr("checked", false);
                }
            });
            */      
      }

     //<![CDATA[
      $(function(){
       $('#div1).on('click', function () {
           $('#divTitle').show();
       });

       $('#div1').on('click', function () {
           $('#divTitle').slideUp();
       });
       });//]]>

      <![CDATA[
       $(function(){
       $('#div2').on('click', function () {
           $('#secDiv').show();
       });

       $('#div2).on('click', function () {
           $('#secDiv).slideUp();
       });

       });//]]> 
```

但现在它不再起作用了。

它应该显示和隐藏某些图标。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:13:05.613

几件事。首先删除`<script>`和`CDATA`标签。它们在外部 javascript 文件中不是必需的（可能包含`<script>`在 HTML 中的标记中）。

其次，你需要用`$(document).ready()`. 您可能在当前 HTML 的底部（或至少在它绑定到的 HTML 元素之后）有这个 javascript，并且由于这个外部 JS 文件可能被加载到标题中，因此 HTML 元素不在那里绑定。

新的 include.js ：

```
 function showIcon() {
        toggleButtonIcon('[Widget dijit.form.ToggleButton, pan]');
        navToolbar.activate(esri.toolbars.Navigation.PAN);
        /*dijit.registry.byClass("dijit.form.ToggleButton").forEach(function(togbtn) {          
            if (togbtn == '[Widget dijit.form.ToggleButton, pan]') {
                togbtn.attr("checked", true);
            }
            else
            {
                togbtn.attr("checked", false);
            }
        });
        */      
    }

    $(document).ready(function() {

    $(function(){
       $('#div1).on('click', function () {
          $('#divTitle').show();
       });

       $('#div1').on('click', function () {
          $('#divTitle').slideUp();
       });
    });

   $(function(){
       $('#div2').on('click', function () {
           $('#secDiv').show();
       });

       $('#div2).on('click', function () {
          $('#secDiv').slideUp();
       });
   });

   }); 
```

还要验证您的 HTML 文件中是否有类似的内容：

```
 <script type="text/javascript" src="path/to/include.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:10:15.223

您想在文件中包含您的 Javascript 吗？

假设之前已经包含了 jQuery：

**html**

```
<script type="text/javascript" src="path/to/include.js"></script> 
```

**包含.js**

```
 jQuery(function($){
       $('#div1').on('click', function () { //missing '
           $('#divTitle').show();
       });

       $('#div1').on('click', function () {
           $('#divTitle').slideUp();
       });

       $('#div2').on('click', function () {
           $('#secDiv').show();
       });

       $('#div2').on('click', function () { //missing ' here
           $('#secDiv').slideUp(); //missing ' here too
       });

   });

    //Edit omitted this part
    function showIcon() {
        toggleButtonIcon('[Widget dijit.form.ToggleButton, pan]');
        navToolbar.activate(esri.toolbars.Navigation.PAN);    
      } 
```

# objective-c - 在另一个 UIViewController 中禁用 UIButton

> ID：14776650
> 
> 赞同：0
> 
> 时间：2013-02-08T16:07:18.810
> 
> 标签：objective-c, uiviewcontroller, ios5, uibutton

我想在另一个 ViewController 的 UITableview 中禁用 UIButton：

我试过，在 SecondViewController 里面，但它只禁用了 _buttonDesc，buttonCell 仍然是启用的：

*   buttonCell 是 UITableView 内部的 Button。
*   buttonDesc 是 SecondViewController 内的 Button Comprar。

.

```
-(IBAction)comprar
{
    [_buttonDesc setTitleColor:[UIColor grayColor] forState:UIControlStateDisabled];
    [_buttonDesc setEnabled:NO];
    LivroCell *lvc = [[LivroCell alloc]init];

    [lvc.buttonCell setEnabled:NO];
} 
```

![](../Images/1db7428b3e6a1466b2634d784d5bdb43.png)![在此处输入图像描述](../Images/268bece06f95c45f3cc542888faea753.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:27:23.927

您需要对要禁用的实际 buttonCell 的引用。创建一个新的 LivroCell 实例对您没有帮助。

最简单的方法是当有人单击“购买”按钮时，您创建新的 UIViewController，传递对购买按钮的引用（如果“购买”调用 IBAction，然后将发送者传递给您创建的子视图控制器）。因此，在您的子视图控制器上创建一个属性来存储按钮，在您执行 alloc/init 时设置该属性，然后很容易稍后禁用。

# android - Android 应用程序不会在启动时启动

> ID：14776651
> 
> 赞同：2
> 
> 时间：2013-02-08T16:07:19.700
> 
> 标签：android, android-manifest, boot, receiver

我阅读了很多关于如何在系统启动时启动应用程序的教程（[Link](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)，[Link](http://blogmobile.itude.com/2012/02/20/automatically-starting-an-android-application-on-boot/) ...）。

我的接收器看起来像这样，其余的就像教程中描述的那样：

```
 <receiver android:enabled="true" android:name=".BootUpReceiver"
            android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

            <intent-filter>
                    <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
    </receiver> 
```

但是我的应用程序无法启动......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:07:19.700

太傻了！

您需要将完整路径添加到接收器类：

```
<receiver android:enabled="true" android:name="com.mypackage.whatever.BootUpReceiver" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:21:10.363

> 我的接收器看起来像这样，其余的像教程中描述的那样

您的`<receiver>`元素不正确。您要求广播的发送者持有`RECEIVE_BOOT_COMPLETED`许可，这可能是真的，也可能不是。请删除该`android:permission`属性。如果需要，添加`RECEIVE_BOOT_COMPLETED`为`<uses-permission>`元素，表示*您*希望拥有该权限。

# api - 是否无法使用 Web API 在 Spotify 中创建文件夹？有没有办法创建一个PC应用程序？

> ID：14776657
> 
> 赞同：0
> 
> 时间：2013-02-08T16:07:35.287
> 
> 标签：api, directory, spotify, creation

我已经搜索了互联网，此时是否有任何远程编程可以创建文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:29:17.990

不使用 Web API，不。

但是，libspotify 有一个用于创建文件夹的 API `sp_playlistcontainer_add_folder()`：. 这不是 Web API - 您需要编写本机应用程序。

# visual-studio-2012 - 针对不同环境进行 web.config 转换时出错

> ID：14776659
> 
> 赞同：11
> 
> 时间：2013-02-08T16:07:48.140
> 
> 标签：visual-studio-2012, web-config-transform

我试图将我的应用程序部署到不同的环境中，然后我开始遵循以下方法： [使用 Visual Studio 或 Visual Web Developer 将 ASP.NET Web 应用程序部署到托管提供程序：Web.Config 文件转换 - 3 of 12](https://docs.microsoft.com/en-us/aspnet/web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-web-config-file-transformations-3-of-12)

**在我点击Preview Transform**之前是完美的，我收到了这个错误：

> **微软视觉工作室**
> 
> 无法加载文件或程序集“Microsoft.Web.XmlTransform，Version=1.2.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。

（我只创建了一个转换**Web.DebugQA.config**，当然还有默认的，调试和发布）

我的**Web.DebugQA.config**看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <connectionStrings>
    <add name="MyDB" 
      connectionString="Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True" 
      xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
  </connectionStrings>
  <system.web>
  </system.web>
  <appSettings>
    <add key="EnvironmentName" value="QADev" xdt:Transform="SetAttributes(value)"
      xdt:Locator="Match(key)" />
  </appSettings>
</configuration> 
```

但后来我安装了这个插件：

[SlowCheetah - XML 转换](https://marketplace.visualstudio.com/items?itemName=WillBuikMSFT.SlowCheetah-XMLTransforms)

我解决了我的预览转换错误，但是当我尝试使用 QADev 转换发布时，我收到了这个错误：

> “ImportParametersFile”任务意外失败。
> 
> System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Web.XmlTransform，Version=1.2.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。
> 文件名： Microsoft.Web.Publishing.Tasks.ImportParametersFile.Execute()
> 中 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build中的“Microsoft.Web.XmlTransform, Version=1.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a” .BackEnd.ITaskExecutionHost.Execute()
> 在 Microsoft.Build.BackEnd.TaskBuilder.<ExecuteInstantiatedTask>d__20.MoveNext()
> 
> 警告：程序集绑定日志记录已关闭。
> 要启用程序集绑定失败日志记录，请将注册表值`[HKLM\Software\Microsoft\Fusion!EnableLog]`(DWORD) 设置为 1。
> 注意：存在与程序集绑定失败日志记录相关的一些性能损失。
> 要关闭此功能，请删除注册表值`[HKLM\Software\Microsoft\Fusion!EnableLog]`。

我正在使用 Visual Studio Pro 2012。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-05-22T07:44:59.603

我通过从“控制面板”->“程序和功能”修复“Microsoft ASP.NET 和 Web 工具 2013.1 - Visual Studio 2012”来解决此问题。

路径 C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web 中缺少文件 Microsoft.Web.XmlTransform.dll。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-08T14:12:57.577

我有一个类似的错误，虽然它是由不同的原因引起的。

我解决了它从另一台安装了 VS2012 的 PC 复制以下 DLL： **Microsoft.Web.XmlTransforms.dll**

来自： **C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web**

我希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T04:46:46.433

我在 VS2012 中遇到了同样的问题，无法为 PublishPackage 转换“预览转换”，例如 Web.Staging.config 抱怨 Microsoft.Web.XmlTransform

我通过将包[https://nuget.org/packages/Microsoft.Web.Xdt](https://nuget.org/packages/Microsoft.Web.Xdt)添加到我的 Mvc 4.5 项目中来使其工作。此软件包仍处于预发布状态。

```
PM> Install-Package Microsoft.Web.Xdt -Pre 
```

此包包含 Microsoft.Web.XmlTransform.dll

在构建过程中我仍然收到错误消息，抱怨“无法加载文件或程序集 Microsoft.Web.XmlTransform”。Mvc 项目仍然构建良好。

我确实尝试使用 gacutil 将 Microsoft.Web.XmlTransform.dll 添加到 Gac，但这并没有解决问题。

但是，我使用 Team Foundation Service 构建服务器，它可以在应用 Web.Release.config 和 Web.Staging.config 后工作并创建正确的 Web.config。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-26T10:46:48.993

我尝试了以下两件事，但它对我不起作用。

1) 将 Microsoft.Web.XmlTransforms.dll DLL 复制到位置 C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web

2) 并修复“Microsoft ASP.NET and Web Tools 2013.1 - Visual Studio 2012”

**然后我从 control panel -> Programs and Features 卸载了 Microsoft Azure tool V2.6**。然后我就可以发布我的网站了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T16:42:16.377

这可能已在 Visual Studio 2012 Update 2（和 Visual Studio 2013）中得到修复。

> [Web.config“预览转换”给出错误](https://connect.microsoft.com/VisualStudio/feedback/details/777749/web-config-preview-transform-gives-an-error)
> 
> > ...
> > 
> > Microsoft 于 2013 年 3 月 1 日下午 2:46 发布
> > 
> > 感谢您报告问题！它将在 Visual Studio 2012 Update 2 中修复。请在可用时安装它。

# css - 使用CSS创建具有任何半径的馅饼的空心球体？

> ID：14776661
> 
> 赞同：3
> 
> 时间：2013-02-08T16:08:05.907
> 
> 标签：css

我只是想用另一个可以有任何半径的彩色馅饼制作一个空心球体。搜索了很多，但找到了一些`border-radius`我已经知道的东西`clip: rect(top, right, bottom, left)`。我该如何使用它？我搜索了它的教程，但教程有点混乱和不完整。

究竟是什么效果？

[链接到网站](http://www.awwwards.com)

看看那个四色空心球是什么样子的。

而且stackoverflow也不包含任何这样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T16:48:59.133

要创建该饼图效果，您必须有 2 个 div。

```
<div id="parent">
    <div id="master">
    </div>
    <div id="slave">
    </div>
</div> 
```

第一个 div 是原始球体，可以纯粹用`border-radius`.

![在此处输入图像描述](../Images/e397c761feb8ba8d07496862e9d99976.png)

```
-webkit-border-radius: 100px;
-moz-border-radius: 100px;
border-radius: 100px;
width:70px;
height:70px;
border-style:solid;
border-width:10px;
border-color:#573; 
```

第二个 div 将具有较浅的颜色，同样纯粹是`border-radius`.

![在此处输入图像描述](../Images/e5f8062131c8ce8edc88b6358dc378e3.png)

```
-webkit-border-radius: 100px;
-moz-border-radius: 100px;
border-radius: 100px;
width:70px;
height:70px;
border-style:solid;
border-width:10px;
border-color:#99FF33; 
```

然后我们使用`clip:rect(0px,50px,50px,0px);`.

![在此处输入图像描述](../Images/e1240b0406d7acf8c3fbf0068dec8fbf.png)

现在我们必须只修复定位，使用`postion:relative;`和`position:absolute;`

**CSS**

```
#parent
{
    position:relative;
}
#master
{
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px;
    border-radius: 100px;
    width:70px;
    height:70px;
    border-style:solid;
    border-width:10px;
    border-color:#573;
}
#slave
{
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px;
    border-radius: 100px;
    width:70px;
    height:70px;
    border-style:solid;
    border-width:10px;
    border-color:#99FF33;
    position:absolute;
    top:0px;
    left:0px;
    clip:rect(0px,50px,50px,0px);
} 
```

检查出来 -**[演示](http://jsfiddle.net/AliBassam/Af8Hh/)**。

![在此处输入图像描述](../Images/f310b7b10a57fbaf9eb0f8dd02ad581d.png)

检查此[边界半径生成器](http://mistercss.blogspot.com/p/border-radius-generator_31.html)（用于制作圆圈）。

**更新**

我找到了一种减少和增加的方法，但它需要 2 个从站，相同的 CSS 属性。

如果百分比为 50% 及以上，我们必须隐藏第二个从站，并减少或增加`bottom`第一个从站的 。

`clip:rect(0px,50px,20px,0px);`

![在此处输入图像描述](../Images/d4e196074aaa27a2e60042ca115d3a50.png)

`clip:rect(0px,50px,100px,0px);`

![在此处输入图像描述](../Images/d16446bb1bf53969f406a5067a236df7.png)

现在当圆的一半被填满时，我们必须`show`是第二个奴隶。要减少它并增加它，我们应该改变`top`.

`clip:rect(60px,100px,100px,0px);`

![在此处输入图像描述](../Images/946939864dce58686d9c39372f2e8b3b.png)

`clip:rect(20px,100px,100px,0px);`

![在此处输入图像描述](../Images/eee219f6ca1f29fea3294359e3d7932d.png)

看看 -[演示](http://jsfiddle.net/AliBassam/wvxP5/)

```
clip:rect(top,right,bottom,left); 
```

# python - Docutils for Django 添加确认

> ID：14776662
> 
> 赞同：0
> 
> 时间：2013-02-08T16:08:07.563
> 
> 标签：python, django

我正在使用python docutils for Django，使用此处找到的指南将其添加到管理员：

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/admindocs/](https://docs.djangoproject.com/en/dev/ref/contrib/admin/admindocs/)

如您所知，这隐藏了大部分魔法。我的问题是如何向它创建的管理文档添加新页面，例如确认等？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:48:01.440

没有直接支持添加“独立”页面，但您可以轻松地为要“创建”的每个页面创建一个视图（或使用 TemplateView），并使用您希望显示的信息记录它们。

# iphone - 如何使用 NEON 在 ARM 程序集中实现 16 位->32 位查找表？

> ID：14776665
> 
> 赞同：1
> 
> 时间：2013-02-08T16:08:16.250
> 
> 标签：iphone, ios, cocoa, assembly, arm

在 iOS 6 项目中，我有一个包含两个字节字（16 位）的缓冲区，需要通过查找表将其转换为四个字节字（32 位）。我将这些值硬编码到表中，然后使用两个字节缓冲区的值来确定要检索哪个 32 位表值。这是一个例子：

```
void map_values(uint32_t *dst,uint16_t *src,uint32_t *lut,int buf_length){
    int i=0;
    for(i=0;i<buf_length;i++){

        *dst = *(lut+(*src));
        dst++;
        src++;
    }
} 
```

问题是，它太慢了。这可以通过使用 NEON 一次处理 4 个输出字节来加速吗？问题是，我不确定如何从 src 缓冲区中获取值并将其用作查找表的输入来确定要检索的值。此外，表和输出缓冲区中的字长相同，但源不同。因此，我只能读取两个 16 位字作为输入，而我需要四个 32 位字输出。有任何想法吗？也许有更好的方法来解决这个问题？

当前来自 clang 的 asm 输出（clang -O3 -arch armv7 lut.c -S）：

```
 .section    __TEXT,__text,regular,pure_instructions
    .section    __TEXT,__textcoal_nt,coalesced,pure_instructions
    .section    __TEXT,__const_coal,coalesced
    .section    __TEXT,__picsymbolstub4,symbol_stubs,none,16
    .section    __TEXT,__StaticInit,regular,pure_instructions
    .syntax unified
    .section    __TEXT,__text,regular,pure_instructions
    .globl  _map_values
    .align  2
    .code   16                      @ @map_values
    .thumb_func _map_values
_map_values:
@ BB#0:
    cmp r3, #0
    it  eq
    bxeq    lr
LBB0_1:                                 @ %.lr.ph
                                        @ =>This Inner Loop Header: Depth=1
    ldrh    r9, [r1], #2
    subs    r3, #1
    ldr.w   r9, [r2, r9, lsl #2]
    str r9, [r0], #4
    bne LBB0_1
@ BB#2:                                 @ %._crit_edge
    bx  lr

.subsections_via_symbols 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:29:17.793

查找表（几乎）是不可向量化的。该指令可以处理非常小的查找表`vtbl`，但是您的查找表太大了。

你用查找表做什么？如果可以在没有太多工作而不是查找它们的情况下即时计算这些值，那实际上对您来说可能是一个重大的胜利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:32:28.597

我的第一个想法是，您可能会从[Accelerate](https://developer.apple.com/library/IOs/#documentation/Performance/Conceptual/vecLib/Reference/reference.html)框架`vtablelookup`的 vecLib 部分中获得一些运气。签名是：

```
vUInt32 vtablelookup (
   vSInt32 Index_Vect,
   uint32_t *Table
); 
```

其中`vSInt32`和`vUInt32`分别是 128 位压缩的 32 位有符号/无符号整数。我相信该功能由 ARM 上的 NEON 提供支持。最大的问题是将您的`src`数组转换为 32 位索引，这很可能会减慢速度，从而使矢量化查找的速度增益变得毫无意义。

# html - HTML5 部分标题

> ID：14776666
> 
> 赞同：0
> 
> 时间：2013-02-08T16:08:16.110
> 
> 标签：html

我让自己很困惑。在 HTML5 中，最好为屏幕阅读器等的每个部分包含标题，然后隐藏您不想显示的部分。我的问题是，最好使用哪个标题编号。您是否像往常一样使用流程，或者您可以只使用始终使用 h6 或 h1 等的任何东西吗？我问的原因是，如果你隐藏它们，你肯定最终会错过流程中的标题标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:11:40.620

为 HTML5 更改了大纲算法，它使得每个分段元素可以有一个完整的“h1-h6”堆栈。有关更多信息，请阅读关于 HTML5 Doctor 的精彩文章：http: [//html5doctor.com/outlines/](http://html5doctor.com/outlines/)

# php - 在 Laravel 4 中播种包表

> ID：14776669
> 
> 赞同：3
> 
> 时间：2013-02-08T16:08:20.303
> 
> 标签：php, model-view-controller, laravel, laravel-4

我知道如何在 Laravel 4 上设置包迁移（使用 --bench="vendor/package" / --package="vendor/package"）。

但我似乎无法弄清楚如何为这些迁移设置种子？

--澄清一下-我知道如何使用播种机，我需要知道的是如何为独立包设置种子文件？你可以给一个包单独的迁移......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T18:58:09.517

您可以像在 app 文件夹中一样使用 Seeder 类。

[Laravel 4 中的数据库播种](http://four.laravel.com/docs/migrations)

举个例子 ：

```
<?php

use Illuminate\Database\Seeder;
use Page;

class MySeeder extends Seeder {

    public function run()
    {
        Page::create(array('title' => 'Foo-Bar !'));
    }

} 
```

并指定“--class”参数：

```
$ php artisan db:seed --class="MySeeder" 
```

注意让作曲家加载你的类:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-05T20:52:58.567

**只要**Composer**成功加载了所有类， **Laravel Database Seeder 就会自动识别传递给它的任何类名。**执行以下操作：**

 **1.  在下创建一个`seeds`文件夹`{vendor}/{package}/src`
2.  例如，创建一个播种器类，在它前面加上你的包名以避免冲突，`{Package}Seeder.php`这样就可以了。
3.  将新`seeds`文件夹添加到您的包`composer.json`自动加载类映射数组。
4.  在终端中，`composer update`从您的包根文件夹运行。
5.  在终端中，运行`php artisan db:seed --class={Package}Seeder` （用新的类名替换类名。）

就是这样。您现在可以为您的包运行种子。

米

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-17T16:30:34.013

为确保您的种子文件不冲突，您可以将命名空间添加到种子文件

```
namespace YourPackage\Name;

class DatabaseSeeder extends Seeder { 
```

然后使用 FQCN 运行 artisan 命令

```
$ php artisan db:seed --class="YourPackage\Name\DatabaseSeeder" 
```

或者如果您没有使用引号

```
$ php artisan db:seed --class=YourPackage\\Name\\DatabaseSeeder 
```**

# c++ - 使用构造函数初始化字符串指针

> ID：14776674
> 
> 赞同：0
> 
> 时间：2013-02-08T16:08:27.983
> 
> 标签：c++, string, constructor

我的代码有问题。我有点难过。我有一个数据成员，它是指向字符串类型的指针。我使用构造函数作为这个指针的默认初始值，然后当我在主函数中调用一个对象时，初始化的指针指向存储字符串的内存地址并打印内容。这是应该发生的事情，但我无法让程序运行。有人可以告诉我哪里出错了吗？

```
#include<iostream>
#include<string>

using namespace std;

class NoName{
public:
    NoName(string &sName("Alice In Wonderland") ){};
private:
    string *pstring;
};

int main(){
    //the constructor will be automatically called here once a object is created
    // and the string "Alice in Wonderland" will appear on the screen
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:11:02.403

只需简单地使用一个`std::string`成员并在**[Member initializer list](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)**中对其进行初始化：

```
 private:
    string mstring;

 public:
    NoName():mstring("Alice In Wonderland"){} 
```

您还可以让构造函数接受参数而不是硬编码字符串，并让用户在运行时传递字符串：

```
NoName(std::string str):mstring(str){} 
```

您不需要指针。通过使用指向`std::string`You 的指针抵消了`std::string`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T17:02:18.603

If you really need to store a pointer for some reason, then there are some points to remember:

*   Pointers are initialized like `new Class`
*   Prefer to initialize class members in the member initializer list
*   Any time you write the word `new` think about where you're going to write `delete`. (In this case it goes in the destructor.
*   Rule of Three: If you need a destructor (you do, because of `delete`), then you also need a copy constructor and copy assignment operator.

This is one way your code could look: [http://ideone.com/21yGgC](http://ideone.com/21yGgC)

```
#include<iostream>
#include<string>

using std::cout; using std::endl;
using std::string;

class NoName
{
public:
    NoName(string sName = "Alice In Wonderland") :
        pstring(new string(sName))
    {
      cout << "ctor - " << *pstring << endl;
    }
    NoName(const NoName& rhs) :
        pstring(new string(*rhs.pstring))
    {
      cout << "Copy ctor - " << *pstring << endl;
    }
    NoName& operator=(const NoName& rhs)
    {
      *pstring = *rhs.pstring;
      cout << "Copy assignment operator - " << *pstring << endl;
      return *this;
    }

    ~NoName()
    {
        cout << "dtor, my name was " << *pstring << endl;
        delete pstring;
    }
private:
    string *pstring;
}; 
```

.

```
int main()
{
    NoName m, n("Another name");
    NoName o(m);
    o = n;

    return 0;
} 
```

Notice how much easier it is if you don't use the unnecessary pointer:

```
class Better
{
public:
    Better(string sName = "Alice In Wonderland") :
        m_string(sName)
    {
    }
private:
    string m_string;
}; 
```

Because you don't need the custom destructor, you also don't need the copy constructor or copy assigment operator either. Much easier!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:53:59.873

您没有正确使用构造函数。首先，您创建此引用参数并尝试将其初始化为一个字符串对象（这是在寻找问题）。其次，您的构造函数实际上从不做任何事情。

你需要调用`new`你的指针，取消引用它并给指向一个值的数据，输出取消引用的值，`std::cout`然后在析构函数中清理内存`delete`（或者在这种情况下，你可以在使用 cout 之后执行它，如果你'不打算再次使用该字符串。但是如果您仍然需要它，请在析构函数中执行它）。

假设您正在为一堂课这样​​做，您的教科书应该告诉您如何做这些事情。

编辑：这也不是默认构造函数。我更改了您的标签以适当匹配。

# c# - DotNetOpenAuth 和刷新令牌

> ID：14776675
> 
> 赞同：0
> 
> 时间：2013-02-08T16:08:30.233
> 
> 标签：c#, asp.net-mvc-4, dotnetopenauth

在我当前的 MVC 4 环境中，我有一个现有的自定义 OAuth 2.0 流程，用于处理一个提供商的 OAuth 服务。在我的过程中，我存储访问令牌和刷新令牌并在服务器端调用它们以访问服务（根据需要使用刷新令牌刷新访问令牌也是如此）。

我希望标准化并为我的网站添加更多服务，所以我自然而然地转向了 DotNetOpenAuth。我会先说我到目前为止只*阅读*了文档。我的大问题是：知道我已经有一个用于存储和检索刷新令牌的数据源，是否可以将其合并到我的 DotNetOpenAuth 实现中？

我想我通常对 DotNetOpenAuth 如何管理访问令牌和刷新令牌感到困惑，因为我正在阅读的示例让人感觉它是自动管理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T05:47:21.583

DotNetOpenAuth 不存储访问或刷新令牌，而是依赖应用程序来执行此操作。既然您已经这样做了，那么添加 DotNetOpenAuth 应该相当容易。`IAuthorizationState`当您将刷新令牌传递给 DotNetOpenAuth 时，您可能需要实现一个相当简单的接口，但仅此而已。

# mysql - 在 MySQL 中将数据从 LATIN1 转换为 UTF8

> ID：14776676
> 
> 赞同：0
> 
> 时间：2013-02-08T16:08:30.267
> 
> 标签：mysql, sql, sql-server-2008, character-encoding

我正在尝试将 MSSQL 数据库迁移到 MySQL。使用 MySQL Workbench，我移动了架构和数据，但在转换字符编码时遇到了问题。在迁移过程中，当编码出现问题时，我让该工具将文本放入 BLOBS。

我相信我已经确认 MySQL 中现在的数据是 *latin1_swedish_ci*。为了简化问题，我正在查看其中一列中的 ® 符号。

我想用*UTF8*编码将 BLOBS 转换为 VARCHAR 或 TEXT。我在其中一列上运行此 SQL 命令：

`ALTER TABLE`bookdetails`MODIFY`书名`VARCHAR(50) CHARACTER SET utf8 COLLATE utf8_unicode_ci;`

而不是转换 ® 它只是删除它们，这不是我想要的。我究竟做错了什么？并不是说阅读一半的互联网试图找到解决方案并不有趣，而是 3 天后，我想我的眼睛快要昏迷了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:06:08.333

MySQL 工作台有一个导航相对简单的 UI。如果您需要更改表或模式的排序规则，您可以在对象浏览器上右键单击它们并转到更改表，或者更改模式在那里您可以更改数据类型，并将排序规则设置为您想要的任何内容。

# ruby - 安装 libv8 (3.11.8.13) 时出错，Bundler 无法继续

> ID：14776685
> 
> 赞同：5
> 
> 时间：2013-02-08T16:08:47.870
> 
> 标签：ruby, rubygems, ruby-on-rails-3.2

运行 bundle install 后，我收到此错误：

```
Gem::Package::FormatError: no metadata found in /Users/jeanosorio/.rvm/gems/ruby-1.9.3-p286/cache/libv8-3.11.8.13-x86_64-darwin-12.gem
An error occurred while installing libv8 (3.11.8.13), and Bundler cannot continue.
Make sure that `gem install libv8 -v '3.11.8.13'` succeeds before bundling. 
```

我尝试

```
gem install libv8 -v '3.11.8.13' 
```

但我明白了

```
ERROR:  Error installing libv8:
    invalid gem format for /Users/jeanosorio/.rvm/gems/ruby-1.9.3-p286/cache/libv8-3.11.8.13-x86_64-darwin-12.gem 
```

这里有什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T03:38:04.017

`Gem::Package::FormatError: no metadata found in ...`错误消息表明 Ruby 缓存目录的内容与实际的 gem 存储库不同步。

可以通过删除有问题的文件或完整的缓存文件夹并`bundle install`再次运行来修复该错误。

首先尝试删除有问题的文件：

```
rm ~/.rvm/gems/ruby-1.9.3-p286/cache/libv8-3.11.8.13-x86_64-darwin-12.gem
bundle install 
```

那应该可以解决问题。如果没有，请删除完整的缓存文件夹：

```
 rm -rf ~/.rvm/gems/ruby-1.9.3-p286/cache/
 bundle install 
```

参考：

1.  [Rails：修复捆绑包“未找到元数据”问题](http://www.michaelhamrah.com/blog/2010/11/rails-fixing-bundle-no-metadata-found-issues/)
2.  [Bundler 问题：未找到元数据](https://github.com/carlhuda/bundler/issues/603)
3.  [所以回答`RubyGems issue on OSX`](https://stackoverflow.com/a/14150942/429758)

此外，可能值得使用[此答案](https://stackoverflow.com/a/10817676/429758)`gem update --system`中提到的更新 ruby​​gems 版本

# ruby - 将一个哈希数组合并到另一个哈希数组的 Ruby 转换？

> ID：14776686
> 
> 赞同：2
> 
> 时间：2013-02-08T16:08:50.503
> 
> 标签：ruby

我有

```
 [
   {:date => "2012-05", :post => 1}, 
   {:date => "2012-12", :post => 1}, 
   {:date => "2013-02", :post => 1}, 
   {:date => "2012-05", :online => 1}
 ] 
```

我想得到：

```
[
  {:date => "2012-05", :post => 1, :online => 1}, 
  {:date => "2012-12", :post => 1 }, 
  {:date => "2013-02", :post => 1 }
] 
```

任何人都知道如何应用 Ruby 哈希/数组方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T16:30:36.523

```
q.group_by { |x| x[:date] }.values.map { |e| e.reduce :merge } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T16:30:09.690

功能方法：

```
items_by_date = items.group_by { |h| h[:date] }
result = items_by_date.map { |date, hs| hs.reduce(:merge) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:21:32.330

您可以通过[`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)and解决它[`detect`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-detect)：

```
arr = [
        {:date => "2012-05", :post => 1}, 
        {:date => "2012-12", :post => 1}, 
        {:date => "2013-02", :post => 1}, 
        {:date => "2012-05", :online => 1}
      ]

arr.inject([]) do |new_array, a|

  # if there is an existing hash in the new array with the same date
  # merge the values
  #
  if existing = new_array.detect{ |b| a[:date] == b[:date] } 
    existing.merge!(a)
  else
    new_array << a
  end

  # always return the new array for new iteration
  #
  new_array
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:13:52.070

这是一种尝试：

```
a = {:date=>"2012-05", :post=>1}, {:date=>"2012-12", :post=>1}, {:date=>"2013-02", :post=>1}
b = {:date=>"2012-05", :online=>1}

ar = {}; [a, b].flatten.each do |k|
  c = k.first[1]; ar[c] ||= Array.new
  ar[c] << { k.to_a.last[0] => k.to_a.last[1] }
end

ar.map { |k,v| { k => v[1] ? v[0].merge(v[1]) : v[0] } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T16:36:30.780

```
hash = [
   {:date => "2012-05", :post => 1}, 
   {:date => "2012-12", :post => 1}, 
   {:date => "2013-02", :post => 1}, 
   {:date => "2012-05", :online => 1}
 ]

hash.group_by{ |h| h[:date] }.values.map{ |x| x.reduce(:merge) }
=> [{:date=>"2012-05", :post=>1, :online=>1},
    {:date=>"2012-12", :post=>1},
    {:date=>"2013-02", :post=>1}] 
```

# gdb - 重新定义断点并引用多个断点

> ID：14776690
> 
> 赞同：1
> 
> 时间：2013-02-08T16:09:02.830
> 
> 标签：gdb

gdb 中是否有任何方法可以重新定义断点的位置，而不必禁用/删除它并制作另一个断点，例如，它上面的两行总是分配一个不同的数字，即使我们删除了前一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:23:30.353

> gdb 中是否有任何方法可以重新定义断点的位置，而不必禁用/删除它并制作另一个断点

不。

大概您关心保留旧断点编号，因为您已附加命令以禁用和启用该断点到其他断点。如果是这样，您可以使用`save breakpoints`命令将断点定义保存到文件中，使用编辑器调整断点的位置，然后重新启动 GDB 并使用`source`命令重新加载断点。

# c# - EF 5 Code First：两个实体之间的一对一和一对多关联

> ID：14776694
> 
> 赞同：2
> 
> 时间：2013-02-08T16:09:07.103
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-5

我有两个实体：个人和公司。一家公司有一个或多个联系人（人）。一家公司至少有一个主要联系人（人）。实现这一点的最佳方法是什么？

![在此处输入图像描述](../Images/4977af843fea4a9ef93746e392dfbb25.png)

以下是实体：

```
public class Person
{
    public int PersonId { get; set; }
    public string PersonName { get; set; }
}
public class Company
{
    public int CompanyId { get; set; }
    public string CompanyName { get; set; }
    public virtual ICollection<Person> Contacts { get; set; }
    public int PrimaryContactId { get; set; }
    [ForeignKey("PrimaryContactId")]
    public virtual Person PrimaryConctact { get; set; }
} 
```

上下文和初始化程序：

```
public class TolleContext : DbContext
{
    public DbSet<Company> Companies { get; set; }
    public DbSet<Person> Persons { get; set; }
    public TolleContext()
    {
        Database.SetInitializer(new TolleContextInitializer());
    }
}
public class TolleContextInitializer : DropCreateDatabaseAlways<TolleContext>
{
    protected override void Seed(TolleContext context)
    {
        var p1 = context.Persons.Add(new Person { PersonName = "Anatoly" });
        var p2 = context.Persons.Add(new Person { PersonName = "Johannes" });
        var contacts = new List<Person> {p1, p2};
        var company = new Company
            {
                CompanyName = "Bool", 
                PrimaryConctact = p1, 
                Contacts = contacts
            };
        context.Companies.Add(company);
        context.SaveChanges();

        base.Seed(context);
    }
} 
```

如果我将一个人关联`PrimaryContact`为公司的成员，它不会出现在 company.Contacts 中。当我将某人关联为主要联系人并添加到同一公司的联系人列表时，它会引发错误：

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

我将不胜感激有关实现此类场景的可能方法的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:16:15.853

显然 a`Person`不能属于多个公司。所以你可以制作`Primary`一个`Person`. 它降低了模型的复杂性：您只需要一对多的关联。但是，它增加了业务逻辑的复杂性：（1）您需要通过以下方式获取主要联系人

```
company.Persons.Where(p => p.IsPrimary).First(); 
```

这不像阅读导航属性那么容易，并且（2）您需要逻辑来确保只有一个`Person`是主要的。

如果要保留当前模型，则应先保存公司及其联系人，然后在第二次事务中分配主要联系人。当您在一个事务中执行此操作时，EF 可以同时设置两个生成的外键。FK in Person 必须先创建公司，FK in Company 必须先创建公司。

# powershell - 如何在powershell中使用获得的凭据来查找经过身份验证的用户组？

> ID：14776696
> 
> 赞同：0
> 
> 时间：2013-02-08T16:09:11.293
> 
> 标签：powershell, authentication, active-directory, credentials, active-directory-group

我写了一个脚本，它在执行时要求提供凭据；它是这样的；

```
$cred = Get-Credential #Read credentials
$username = $cred.username
$password = $cred.GetNetworkCredential().password
$CurrentDomain = "LDAP://" + ([ADSI] "" ).distinguishedName
$domain = New-Object System.DirectoryServices.DirectoryEntry($CurrentDomain,    $UserName, $Password)

if ($domain.name -eq $null)
{
    [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
    [System.Windows.Forms.MessageBox]::Show("Authentication failed - please verify your username and password.")
    exit
}
else
{
    [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
    [System.Windows.Forms.MessageBox]::Show("Authentication Success")

    $Groups = [System.Security.Principal.WindowsIdentity]::GetCurrent().Groups 
```

-> 我后来意识到我的错误，最后一行收集了登录到Windows机器的用户组。我需要通过脚本进行身份验证的人的组；如何更改这一点并获取通过脚本而不是使用 Windows 身份验证的人的组？

请让我知道任何问题或澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:00:02.330

你可以试试这个：

```
[System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")$cred = Get-Credential #Read credentials
$username = $cred.username
$password = $cred.GetNetworkCredential().password
$CurrentDomain = "LDAP://" + ([ADSI] "" ).distinguishedName
$domain = New-Object System.DirectoryServices.DirectoryEntry($CurrentDomain,    $UserName, $Password)

if ($domain.name -eq $null)
{
  [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
  [System.Windows.Forms.MessageBox]::Show("Authentication failed - please verify your username and password.")
  exit
}
else
{
  Add-Type -AssemblyName System.DirectoryServices.AccountManagement
  [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")

  $cred = Get-Credential #Read credentials
  $username = $cred.username
  $password = $cred.GetNetworkCredential().password
  $CurrentDomain = "LDAP://" + ([ADSI] "" ).distinguishedName
  $domain = New-Object System.DirectoryServices.DirectoryEntry($CurrentDomain,    $UserName, $Password)

  if ($domain.name -eq $null)
  {
    [System.Windows.Forms.MessageBox]::Show("Authentication failed - please verify your username and password.")
    exit
  }
  else
  {
    [System.Windows.Forms.MessageBox]::Show("Authentication Success")

    $ct = [System.DirectoryServices.AccountManagement.ContextType]::Domain
    $user = [System.DirectoryServices.AccountManagement.UserPrincipal]::FindByIdentity($ct, $username)

    $groups = $user.GetGroups()
    foreach($i in $groups){
      $i.SamAccountName
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:32:01.540

如果您能够安装[quest activesrole](http://www.quest.com/powershell/activeroles-server.aspx)，它将非常简单：

```
(get-qaduser $user).memberof 
```

否则，您可以使用调用命令并提供凭据：

```
$groups=Invoke-Command -ComputerName $env:COMPUTERNAME -Credential $cred -ScriptBlock {
    [System.Security.Principal.WindowsIdentity]::GetCurrent().Groups
} 
```

# android - 许多 PendingIntents、BroadcastReceiver 和活动

> ID：14776698
> 
> 赞同：0
> 
> 时间：2013-02-08T16:09:12.690
> 
> 标签：android, alarmmanager, android-pendingintent

我正在编写一个简单的提醒应用程序。所有提醒都存储在数据库中。我有一个查询数据库的服务，并在 AlarmManager 中使用附加和不同的时间戳创建一个pendingIntents。此外，我有一个广播接收器来捕获来自 AlarmManager 的意图。这个广播接收器启动一个带有提醒选项（关闭、贪睡等）的提醒活动。现在这个方案有效，但没有我认为的那么好。如果我在前台有一个提醒活动，那么新的提醒活动会从它开始（当前转到后台）。我不想用新的活动覆盖当前活动，只是通知用户，有一些新的提醒将在当前活动之后显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:51:37.510

正如我所想，我为我的任务找到了一个很好的解决方案：

1）我在 AndroidManifest 中设置了我的提醒活动启动模式是“singleTop”。有关launchMode 的更多信息在这里[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)简而言之 ，如果我的广播接收器尝试启动已经在前台的活动，它会调用onNewIntent，而不是onCreate。

2）在我的活动中，我必须重写 onNewIntent 方法并将所有传入的意图（来自广播）存储在 ArrayList 中。

3）在完成（）之前，我必须从 ArrayList 中删除当前的 Intent，当它的大小变为零时，我实际上已经完成了（）活动。

一个重要的补充。在广播接收者意图中必须有 FLAG_ACTIVITY_SINGLE_TOP，如：

intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);

如果没有它，则不会调用 onNewIntent 的主要活动。如我所见，这是已知问题：[http](http://code.google.com/p/android/issues/detail?id=4155) ://code.google.com/p/android/issues/detail?id= 4155 在 Android 1.6 中发现的错误并且仍然存在。所以现在它是功能:)

对不起我的英语，我读起来很容易，但写起来很难:)

# c++ - 使用（非类型）枚举参数定义内部类成员函数模板

> ID：14776699
> 
> 赞同：6
> 
> 时间：2013-02-08T16:09:14.470
> 
> 标签：c++, templates, inner-classes, specialization, non-type

我很难定义和专门化以非类型（枚举）参数为模板`update()`的内部类的成员函数。`Outer<T1>::Inner`

```
#include <cstdlib>

template<typename T1>
struct Outer
{
    struct Inner
    {
        enum Type{ A , B , C };

        template<Type T2>
        void update();
    };
};

// Definition
template<typename T1>
template<Outer<T1>::Inner::Type T2>
void Outer<T1>::Inner::update()
{
}

// Specialization
template<typename T1>
template<Outer<T1>::Inner::A >
void Outer<T1>::Inner::update()
{
}

int main()
{
    return EXIT_SUCCESS;
} 
```

我在 GCC 4.5.3 中收到以下错误消息

```
prog.cpp:17:28: error: ‘Outer::Inner::Type’ is not a type
prog.cpp:18:6: error: prototype for ‘void Outer<T1>::Inner::update()’ does not match any in class ‘Outer<T1>::Inner’
prog.cpp:11:15: error: candidate is: template<class T1> template<Outer<T1>::Inner::Type T2> void Outer<T1>::Inner::update()
prog.cpp:24:28: error: ‘Outer::Inner::A’ is not a type
prog.cpp:25:6: error: prototype for ‘void Outer<T1>::Inner::update()’ does not match any in class ‘Outer<T1>::Inner’
prog.cpp:11:15: error: candidate is: template<class T1> template<Outer<T1>::Inner::Type T2> void Outer<T1>::Inner::update() 
```

* * *

顺便说一句，与 GCC 不同，Visual Studio 2008 无法编译以下内容

```
template<typename T1>
struct Outer
{
    struct Inner
    {
        enum Type{ A , B , C };

        template<Type T2>
        struct Deep;
    };
};

template<typename T1>
template<typename Outer<T1>::Inner::Type T2>
struct Outer<T1>::Inner::Deep
{
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:18:35.113

首先，你缺少一个`typename`before `Outer<T1>::Inner::Type`。即使在`template`类型列表中，您也必须拥有它，因为`Type`它是依赖类型。

其次，您的专业化语法是错误的（类型在`<>`括号之前的函数名之后，而不是在 中`template<>`），但即使它是正确的，它也是不合法的。根据关于显式模板专业化的不幸规则，您必须先专业化外部模板`Outer`，然后才能完全专业化。`update`

# java - java源代码/二进制格式是什么意思？

> ID：14776704
> 
> 赞同：7
> 
> 时间：2013-02-08T16:09:30.193
> 
> 标签：java, netbeans

java中的源/二进制格式是什么意思？它是什么？

此属性出现在 netbeans 项目的属性/源类别中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T16:12:56.783

意味着如果您正在使用必须与 JDK 7、6、5 兼容的项目......以便 IDE 可以识别代码中不受支持的功能。

`-source`IDE 将使用适当的`-target`选项进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:14:46.953

我不使用 NetBeans，但我猜它代表 Java 编译器版本设置——某些版本激活语言特性（例如 1.5 激活泛型）并降低向后兼容性。

# ruby-on-rails - 带有操作邮件程序和 rspec 的空电子邮件正文

> ID：14776705
> 
> 赞同：1
> 
> 时间：2013-02-08T16:09:31.753
> 
> 标签：ruby-on-rails, ruby, rspec, actionmailer

我有一个测试用例，我想测试电子邮件的正文：

```
last_email.to.should include(user.email)
last_email.body.should match(user.email) 
```

但是当我运行 rspec 时，身体总是空的：

```
 Failure/Error: last_email.body.encoded.should match(user.email)
   expected "" to match "louise.denis@thomas.eu" 
```

发件人/收件人/主题字段都可以。如何访问电子邮件的正文（以 HTML 编码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:02:14.460

我的错。邮件视图文件夹名称拼写错误，这就是正文为空的原因...

# c# - 有没有使用 List 的替代方法 ?

> ID：14776708
> 
> 赞同：2
> 
> 时间：2013-02-08T16:09:36.507
> 
> 标签：c#, oop

我在用着：

```
List<string[]> 
```

这行得通，但感觉很不对劲！有没有人有任何正确的更新方法来实现这一点，或者它没有错吗？我尝试了以下方法，它有效但也感觉不对：

```
List<List<string>> 
```

对于那里的任何抱怨者，我对错误的定义是 hacky、过时、旧代码、过于复杂的代码等

谢谢

编辑：

对不起，我忘了提到列表长度是未知的，所以它可能是一个包含未指定数量的项目的大列表，每个数组将包含大约 10-20 个项目

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:10:59.283

在一般情况下，它们中的任何一个都没有任何*问题。*当然，在某些特定情况下，其中一个或另一个可能不合适，但是没有任何细节，就无法知道这是否是合适的用法。

这当然不是您在全球范围内认为不好的模式。根本没有理由会出现这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:17:29.870

我会放

```
List<string> 
```

在一个类中然后使用

```
List<Class> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T17:06:51.840

> 列表长度未知

如果你不知道长度为什么不使用`List<List<string>>`？

如前所述，它既不是错误的，也不是骇人听闻的或过于复杂的。这正是您所需要的。包含字符串列表的未知长度列表。

# php - 如果输入无效，Zend Framework 2 设置默认值

> ID：14776709
> 
> 赞同：0
> 
> 时间：2013-02-08T16:09:42.970
> 
> 标签：php, zend-framework2

所以我创建了一个输入过滤器（见下文），但我必须测试 24 个字段以确保它们都是有效的（下面仅列出 1 个以保持简单）。在这种情况下，输入来自电子邮件服务器，而不是用户，所以我需要接受输入，而不是发回错误。但是，我仍然需要检查数据以确保没有人弄乱标题/字段试图搞砸一切。

所以我的问题是，如何为每个输入发送默认值？例如，如果邮箱长度为 0，则说明有问题，所以我只想将值设置为“InvalidMailbox”之类的值，这样我仍然可以将其存储在数据库中，

```
public function getInputFilter()
{
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();
        $factory     = new InputFactory();

        $inputFilter->add($factory->createInput(array(
            'name'     => 'mailbox',
            'required' => true,
            'filters'  => array(
                array('name' => 'StripTags'),
                array('name' => 'StripNewLines'),
                array('name' => 'StringToLower'),
                array('name' => 'StringTrim'),
            ),
            'validators' => array(
                array(
                    'name'    => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min'      => 1,
                        'max'      => 200,
                    ),
                ),
            ),
        )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

叫它...

```
$mail = new SMail();
$inputFilter = $mail->getInputFilter;
$inputFilter->setData($data);
if ($inputFilter->isValid()) {
    //echo "The form is valid\n";
} else {
    // Maybe set the default here?
    // but with 24 different fields, how can I know which one caused the error?

    //echo "The form is not valid\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:35:05.603

好吧，对不起，我第一次没有得到正确的任务。通过 BaseInputFilter 的 Source，有一个名为 的函数[`getInvalidInput()`](https://github.com/zendframework/zf2/blob/master/library/Zend/InputFilter/BaseInputFilter.php#L273)，所以我的假设是，您可以执行以下操作：

```
$defaultData = array(
    'elementName' => 'Default Value'
);
$returnData  = array();

if (false === $inputFilter->isValid()) {
    $falseInputs  = $inputFilter->getInvalidInput();

    foreach ($falseInputs as $input) {
        $returnData[$input->getName()] = $defaultData[$input->getName()];
    }
}

$goodInputs   = $inputFilter->getValidInput();

$finalData = array_merge($goodInputs, returnData); 
```

然而，这不是经过测试的代码。我不确定是否`$input->getName()`可用。您可能需要相应地调整该部分。我很确定这应该能够让你开始，希望 ;)

# asp.net-mvc - 本地化 asp.net mvc 注释

> ID：14776710
> 
> 赞同：0
> 
> 时间：2013-02-08T16:09:49.523
> 
> 标签：asp.net-mvc, localization, data-annotations

我可以在 asp.net mvc 中本地化大部分数据注释。但是，对于其中一些我不能。例如看这个：

```
public class TestModel {
    [Required(ErrorMessageResourceName="MyFloat",ErrorMessageResourceType=typeof(MyResource))]
    [Display(Name = "MyFloat", ResourceType = typeof(MyResource))]
    public float MyFloat { get; set; }
} 
```

如您所见，我可以本地化`Required`和`Display`属性。但是，如果最终用户在字段中键入字符串，验证器会抛出以下消息错误：

> MyFloat 字段必须是数字。

我搜索了所有属性以找到一个属性来更改此消息，但我做不到。请问你有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T15:44:31.290

我发现添加这个数据注释更容易：

```
 [RegularExpression(@"^[0-9]+$", ErrorMessageResourceName="MyFloat",ErrorMessageResourceType=typeof(MyResource))] 
```

它在客户端工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:34:05.743

您可以尝试使用以下`Range`属性：

```
[Range(float.MinValue, float.MaxValue, ErrorMessageResourceName = "IncorrectFloat", ErrorMessageResourceType=typeof(Resources))]
public float MyFloat { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T05:08:47.830

如果它是客户端，您担心只需将其添加到 jquery.validate.js 文件的末尾或单独的 javascript 文件中，然后立即引用它：

```
jQuery.extend(jQuery.validator.messages, {
  required: "Este campo es obligatorio.",
  remote: "Por favor, llenar este campo.",
  email: "Debe escribir una dirección de correo válida",
  url: "Debe escribir una dirección válida.",
  date: "Debe escribit una fecha válida.",
  dateISO: "Debe escribit una fecha (ISO) válida.",
  number: "Debe escribir un número válido.",
  digits: "Por favor, esribir sólo dígitos.",
  creditcard: "Debe escribir un número de tarjeta válido.",
  equalTo: "Por favor, escribir el mismo valor nuevamente.",
  accept: "Por favor, escribir un valor con una extensión aceptada.",
  maxlength: jQuery.validator.format("Por favor, no escribir más de {0} caracteres."),
  minlength: jQuery.validator.format("Por favor, no escribir menos de {0} caracteres."),
  rangelength: jQuery.validator.format("Por favor, escribir un valor entre {0} y {1} caracteres."),
  range: jQuery.validator.format("Por favor, escribir un valor entre {0} y {1}."),
  max: jQuery.validator.format("Por favor, escribir un valor menor o igual a {0}."),
  min: jQuery.validator.format("Por favor, escribir un valor mayor o igual a {0}.")
}); 
```

那应该本地化您的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T02:27:44.480

这是一个事件顺序的问题。框架与您的自定义框架。

您收到的默认消息深深地构建在框架中。它是一个字符串资源。默认模型绑定器在将字符串值绑定到双精度类型时添加它。这显然是**在**您的自定义验证之前完成的，因此您首先收到此默认错误消息。

要更改此行为，您可能需要编写*自定义模型绑定器*。[这里](https://stackoverflow.com/questions/5246608/asp-net-mvc-3-custom-model-binding)是如何创建自定义模型绑定器的示例。

希望这可以帮助。

# php - LOAD DATA LOCAL INFILE 与 PHP 没有数据导入

> ID：14776716
> 
> 赞同：1
> 
> 时间：2013-02-08T16:10:07.120
> 
> 标签：php, mysql

我尝试完成的是从 Excel 2013 导出数据并将数据上传到远程服务器。数据将保存在 Excel 中并每周更新一次。我使用 MySQL 5.x 和 PHP 5.3.x，并在使用 WAMP 的 Windows 7 系统开发环境中工作。我在互联网上做了很多研究，但无法解决问题。

这是我的桌子：

```
$query = "CREATE  TABLE IF NOT EXISTS `t0` (  
  `id` INT NOT NULL AUTO_INCREMENT ,  
  `fromport` CHAR(10) NOT NULL ,  
  `kabatas` INT NULL ,  
  `eminonu` INT NULL ,  
  `bostanci` INT NULL ,  
  `maltepe` INT NULL ,  
  `kartal` INT NULL ,  
  `buyukada` INT NULL ,  
  `heybeliada` INT NULL ,  
  `burgazada` INT NULL ,  
  `kinaliada` INT NULL ,  
  `sedefadasi` INT NULL ,  
  `fromtime` CHAR(10) NULL ,  
  `fromtype` VARCHAR(50) NULL ,  
  `company` VARCHAR(50) NULL ,  
  `duration` CHAR(10) NULL ,  
  `price` FLOAT NULL ,  
  PRIMARY KEY (`id`) )  
;"; 
```

这是 LOAD DATA 的 PHP 部分：

```
$query = 'LOAD DATA LOCAL INFILE "c:/transportation/' . $filename . '.txt" INTO TABLE ' . $filename . ' LINES TERMINATED BY "\r\n" IGNORE 1 LINES;';  
$result = mysqli_query($db, $query); 
```

测试数据为：

> ```
> no    fromport    kabatas eminonu bostanci    maltepe kartal  buyukada    heybeliada  burgazada   kinaliada   sedefadasi  fromtime    fromtype    company duration 
> ```
> 
> 价格
> KABATAŞ 1 08:30 Vapur İDO 01:30 5.00 TL
> KABATAŞ 1 09:30 Vapur İDO 01:30 5.00 TL
> KABATAŞ 1 13:00 Vapur İDO 01:30 5.00 TL
> KABATAŞ 1 15:00 Vapur İDO 01:30 5.00 TL
> KABATAŞ 1 19:00 Vapur İDO 01:30 5.00 TL

现在：

没有错误 结果表中没有数据（使用 MySQL Workbench 检查） 行和使用 CR+LF，由 TAB 分隔的数据（使用 Notepad++ 检查）

有什么想法吗？先感谢您

# google-app-engine - 为什么 GWT 不能再反序列化本机数据存储密钥？

> ID：14776718
> 
> 赞同：1
> 
> 时间：2013-02-08T16:10:09.590
> 
> 标签：google-app-engine, gwt, deserialization, objectify, gwt-2.5

升级所有库后，我才开始遇到此问题：

我使用的是 GWT 2.4、App Engine 1.6.3 和 Objectify 3.0。

我升级到 GWT 2.5、App Engine 1.7.4 和 Objectify 4.0b1。

从那以后，我收到了这个奇怪的错误，整个互联网上似乎[只有另外一个人！](https://groups.google.com/d/topic/objectify-appengine/MYqkp4YiBBY/discussion)

堆栈跟踪：

```
Caused by: com.google.gwt.user.client.rpc.SerializationException: com.google.appengine.api.datastore.Key/1349195865
    at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:153)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.googlecode.objectify.Key_FieldSerializer.deserialize(Key_FieldSerializer.java:11)
    at com.googlecode.objectify.Key_FieldSerializer.deserial(Key_FieldSerializer.java:29)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.deserialize(ArrayList_CustomFieldSerializer.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer.deserial(ArrayList_FieldSerializer.java:19)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.utilitiessavings.testapp2.shared.Account_FieldSerializer.deserialize(Account_FieldSerializer.java:29)
    at com.utilitiessavings.testapp2.shared.Account_FieldSerializer.deserial(Account_FieldSerializer.java:51)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.deserialize(ArrayList_CustomFieldSerializer.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer.deserial(ArrayList_FieldSerializer.java:19)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.utilitiessavings.testapp2.client.action.GetAccountsResult_FieldSerializer.deserialize(GetAccountsResult_FieldSerializer.java:20)
    at com.utilitiessavings.testapp2.client.action.GetAccountsResult_FieldSerializer.deserial(GetAccountsResult_FieldSerializer.java:38)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    ... 27 more 
```

反序列化 Account 时会出现问题，因为它包含包装本机[数据存储密钥的 Objectify](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key) [Key](http://objectify-appengine.googlecode.com/svn/trunk/javadoc/com/googlecode/objectify/Key.html)。

序列化工作正常，我的对象图在数据存储中一切都很好而且花花公子，我只是无法取回任何包含密钥的东西，这几乎是所有有用的东西。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T19:59:29.800

我遇到了同样的问题，它似乎与数据存储无关，因为当我将一个对象发送到服务器并尝试取回它时，我仍然遇到反序列化错误。

```
AsyncCallService{

void createUser(User user, AsyncCallback<User> user);
}

ServiceImpl{

User createUser(User user){

DB.save(user);

return user

} 
```

这仍然会导致客户端上的序列化错误或更确切地说是反序列化错误。

我所做的只是传回一个新用户；

```
User createUser(User user){
DB.save(user);
User newUser = new User();

newUser.setId(user.getId())

return newUser; 
```

}

问题解决了，只是现在我失去了不需要反序列化的旧应用程序引擎堆栈的一些“好处”。

# tridion - SDL Tridion 2009 - 无法创建事件系统对象

> ID：14776725
> 
> 赞同：5
> 
> 时间：2013-02-08T16:10:18.000
> 
> 标签：tridion

我们正在使用 SDL Tridion 2009。

前段时间我们开始收到此错误“无法创建事件系统对象”。我们开始偶尔出现这个错误。

这可能与我们的事件实现有关，但它已经运行了 2 年多，而且我们在前一段时间才开始收到这个错误。

以防万一有人得到类似的东西，它可以提供帮助。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:43:23.980

在事件初始化期间引发此错误。这里的典型嫌疑人是事件系统的构造函数中的错误，例如尝试加载不存在的配置文件（没有适当的错误处理）或调用当前用户不允许执行的操作。

Tridion 在触发事件时会执行以下操作：

1.  检查是否启用事件（MMC 管理单元设置）
2.  创建“TDSEvents.Events”类型的对象
3.  设置当前用户的身份（在事件对象上使用 .Identity）
4.  调用 On[ItemName][Event][Phase] 方法并传递所需的参数。

如果前 3 个步骤中的任何一个导致错误，您将收到臭名昭著的“无法创建事件系统对象”错误。

# database - Kohana 数据库实例包含错误数据

> ID：14776726
> 
> 赞同：0
> 
> 时间：2013-02-08T16:10:18.680
> 
> 标签：database, kohana, instance

我对 Kohana 数据库有疑问。有时我有错误

```
ErrorException [ Recoverable Error ] 
Argument 1 passed to Kohana_Database_Query_Builder_Select::compile() must be an instance of Database, string given, called in /srv/sites/mysite/www/modules/database/classes/kohana/database/query.php on line 230 and defined 
```

发生这种情况是因为在 Database:$instances 中包含字符串“ **dances** ”，但应该包含数组数据库配置。

这是我的配置：

```
<?php defined('SYSPATH') OR die('No direct access allowed.');

return array
(
'default' => array
(
    'type'       => 'MySQL',
    'connection' => array(
        'hostname'   => 'localhost',
        'database'   => 'chat',
        'username'   => 'root',
        'password'   => 'root',
        'persistent' => FALSE,
    ),
    'table_prefix' => '',
    'charset'      => 'utf8',
    'caching'      => FALSE,
    'profiling'    => TRUE
)
); 
```

也许有人有这样的问题或可以帮助我？

* * *

对 DB 的任何查询都会导致错误。像这样：

```
Jelly::factory('user', $user->id()) 
```

或这个：

```
DB::select('value')->from('storage')->where('name', '=', 'salt')->limit(1)->execute(); 
```

或这个：

```
ORM::factory('node')->where('type', '=', 'page-homepage')->find(); 
```

* * *

我不知道为什么会发生这个错误。我检查了所有方法都被调用了，我没有发现任何错误。

`instance`我通过类数据库中的 write 方法解决了这个问题

```
public static function instance($name = NULL, array $config = NULL)
{
    if ($name === NULL)
    {
        // Use the default instance name
        $name = Database::$default;
    }

    if ( ! is_array(Database::$instances))
    {
        Database::$instances = array();
    }

    if ( ! isset(Database::$instances[$name]))
    {
        if ($config === NULL)
        {
            // Load the configuration for this database
            $config = Kohana::$config->load('database')->get($name);
        }

        if ( ! isset($config['type']))
        {
            throw new Kohana_Exception('Database type not defined in :name configuration',
                array(':name' => $name));
        }

        // Set the driver class name
        $driver = 'Database_'.ucfirst($config['type']);

        // Create the database connection instance
        new $driver($name, $config);
    }

    return Database::$instances[$name];
} 
```

我添加条件如您所见

```
if ( ! is_array(Database::$instances))
{
    Database::$instances = array();
} 
```

我不喜欢这样，但我别无选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:11:31.997

我的疯狂猜测是您似乎正在覆盖代码中的`compile`, `quote`, `quote_column`,或方法，`quote_identifier`或者只是调用应该会触发此错误。`quote_table``execute``Kohana_Database``->execute('dances')`

该`compile`方法不应直接调用，它是一个内部函数，从`execute()`

这些函数中的任何一个都`$db`作为第一个参数。不要传递任何东西，因为您想使用配置文件中设置的数据库，而不是尝试在查询构建器中手动设置它。

# javascript - 可以跨域请求吗？

> ID：14776727
> 
> 赞同：0
> 
> 时间：2013-02-08T16:10:19.143
> 
> 标签：javascript, html, cross-domain

在以下代码中，当您按下提交时，将`iframe`加载`textbox`. 这不是违反`not allowing cross domain request`吗？我正在使用 Mozilla 14.0。

```
<!DOCTYPE html>
<head>
<script>
function myFunction()
{
document.getElementById("site").src=document.getElementById("web").value;
}
</script>
</head>
<body> 
<input id="web" type="text" name="user">
<input type="submit" value="Submit"  onclick="myFunction()"> <br/>
<iframe id="site" src="" width="1200" height="1200"></iframe>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:38:48.153

不，这不是违规行为，这是完全有效的。

*同源策略*可防止跨不同域的页面访问方法和属性。它还可以防止修改包含的网页。但并不妨碍您将它作为一个整体包含进来（甚至以有限的方式与它互动）。

**基本上，此政策可防止网站 A 在网站 B 上冒充用户。**

## 例子

想象一下您访问了您的银行帐户 (bank.com)。当您登录时，银行网站会为您生成一个“用户环境”，让您可以访问受限内容。此外，它还允许您通过 http 请求（表单提交或 Ajax 请求）对您的银行帐户进行修改。

该网站信任您，因为您已经证明您就是您所说的那个人，并且您信任该网站，因为您知道，出于所有意图和目的，当您处于安全环境中时，除了您之外，没有人可以与您的银行网站进行交互.

现在假设您在另一个标签 (evilweb.com) 上访问了一个恶意网站，该标签与您的银行网站有一个 iframe。如果没有此政策，evilweb.com 可能会伪装成您，访问受限区域，读取 DOM 信息（银行帐号等），甚至与之交互，单击“转账”按钮并清理您的银行账户。该 iframe 甚至可以被隐藏。

然而，没有什么能阻止*evilweb.com* “下载”bank.com 的公共内容，就像我没有访问凭据时也没有什么能阻止我访问公共网站一样。

### 所以......冒充用户与发出请求不同

因此，基本上， evilweb.com 可以直接向 bank.com 提出请求，但它不能搭载您并代表您提出请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:13:45.520

不会。没有数据在一个域和另一个域之间传输。

从安全的角度来看，如果您将框架导航到的 URL 来自用户输入或任何其他来源，这完全无关紧要。

如果你试图将iframe*内部*的数据拉到外部世界或操纵 iframe 的内容，那将违反同源策略并且会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:14:26.137

不，可以加载页面。但是，您将无法访问 iframed 跨域文档的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:15:05.830

JavaScript 没有对外部页面做任何事情，因此不存在跨域问题。你的代码所做的就是调用 iframe 来加载一个 url。

# amazon - 亚马逊 MWS API - 货币

> ID：14776728
> 
> 赞同：3
> 
> 时间：2013-02-08T16:10:25.193
> 
> 标签：amazon, amazon-mws

我在亚马逊销售 API 时遇到问题。我在 amazon.co.uk 有一个帐户，可以很好地发送产品。我在 amazon.de 有一个新帐户，除了货币之外一切都很好。

我有一个零售价为 10 英镑（英镑）的产品，我将其发送到 amazon.de：

```
<StandardPrice currency="GBP">10.00</StandardPrice> 
```

但是当我进入 Amazon.de 的后端时，它的标价为 10 欧元（欧元）。

我在这里错过了什么吗？如果我要发送到德国账户，亚马逊当然应该将英镑兑换成欧元。否则“货币”选项的意义何在？

有任何想法吗？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T21:52:53.793

据我所知，亚马逊 MWS 在产品定价方面没有进行货币换算——我在文档中找不到任何关于汇率的参考。因此，您必须通过明确设置欧元价格自行设置这些价格。这也让您有机会决定何时对汇率做出反应并选择一个好的价格点。今天（2013 年 2 月 21 日），10 英镑 = 11.55 欧元 - 11 欧元、12 欧元或 11.99 欧元完全取决于您。毕竟，您通过提交您的数据 Amazon.de 瞄准了不同的市场 - 除了提供德国描述、国际运输和支持之外，确定价格点是这样做的一个非常重要的步骤。

同时，我认为亚马逊 MWS 可能应该通过给出错误拒绝您的价格，或者至少将欧元价格留空，而不是默默地将其“转换”为欧元。我认为这是一个错误。

**编辑：**似乎只有一种方法可以确定 MWS 系统需要哪种货币，即通过`ListMarketplaceParticipations`调用。它将返回默认国家代码、默认货币和默认语言代码以及关联的亚马逊域名。

```
For Amazon.com it should return   US, USD, en_US and www.amazon.com
For Amazon.co.uk it should return GB, GBP, en_GB and www.amazon.co.uk
For Amazon.de it should return    DE, EUR, de_DE and www.amazon.de
... etc ... 
```

不幸的是，您必须将相关的 MWS 数据端点硬编码到您的软件中：

```
CA - Canada         : https://mws.amazonservices.ca
CN - China          : https://mws.amazonservices.com.cn 
DE - Germany        : https://mws-eu.amazonservices.com 
ES - Spain          : https://mws-eu.amazonservices.com 
FR - France         : https://mws-eu.amazonservices.com 
IN - India          : https://mws.amazonservices.in 
IT - Italy          : https://mws-eu.amazonservices.com 
JP - Japan          : https://mws.amazonservices.jp 
UK - United Kingdom : https://mws-eu.amazonservices.com 
US - USA            : https://mws.amazonservices.com 
```

# jquery - .html() 在删除自身的 div 上

> ID：14776732
> 
> 赞同：0
> 
> 时间：2013-02-08T16:10:28.967
> 
> 标签：jquery, html, ajax, google-chrome

我遇到了在 div 上调用的 .html() 函数的问题。我有一个 jQuery 对话框，其中包含一个带有选择选项输入的 div。在选择选项输入的更改事件中，对 java servlet 进行 ajax 调用，该 servlet 生成新代码，并使用 .html() 将其放入 div 中。这是我的ajax调用的“成功”功能：

```
success: function (data, textStatus, xhr) {
    if (data.length > 0) {
        alert($('#myDivId').html());
        $('#myDivId').empty().html(data);
        alert($('#myDivId').html());
    }
} 
```

这是有趣的部分！我第一次更改选择值时，效果很好。当我再次尝试时，ajax 调用按预期工作，但屏幕上的内容（chrome 和 IE）并不能反映 html() 函数返回的内容。第一次调用后，警报显示，说：

```
<b>Hello</b> 
```

在 html() 调用之前，然后在它说：

```
<b>World</b> 
```

但是 chrome 和 IE 上的 Div 仍然显示**Hello**。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:09:40.053

我终于在这里找到了问题。div pb-div 是动态创建的。在我的应用程序的特定情况下，该 div 会从页面中删除。当它使用相同的脚本重新创建时，看起来浏览器仍然在另一个 div 上具有句柄或类似的东西。我只是在 DIV 名称中添加了时间戳以始终具有唯一的 ID，并且它起作用了！

# opengl-es - OpenGL 游戏坐标系统示例 - 做对了吗？

> ID：14776736
> 
> 赞同：0
> 
> 时间：2013-02-08T16:10:47.617
> 
> 标签：opengl-es, opengl-es-2.0

好吧，默认的 OpenGL 屏幕坐标系统很难用 x 轴操作并不奇怪：从 -1.0 到 1.0，y 轴：从 -1.0 到 1.0，以及屏幕中心的 (0.0,0.0)。

所以我决定用下一个主要思想为本地游戏坐标写一些包装器：

1.  屏幕坐标为 0..100.0（x 轴）、0..100.0（y 轴），屏幕左下角为 (0.0,0.0)。
2.  有不同的屏幕，有不同的方面。
3.  如果我们绘制四边形，它必须保持四边形，而不是压扁的矩形。

我的意思是**四边形**

```
quad_vert[0].x = -0.5f;
quad_vert[0].y = -0.5f;
quad_vert[0].z =  0.0f;

quad_vert[1].x =  0.5f;
quad_vert[1].y = -0.5f;
quad_vert[1].z =  0.0f;

quad_vert[2].x = -0.5f;
quad_vert[2].y =  0.5f;
quad_vert[2].z =  0.0f;

quad_vert[3].x =  0.5f;
quad_vert[3].y =  0.5f;
quad_vert[3].z =  0.0f; 
```

我将使用 glm::ortho 和 glm::mat4 来实现这一点：

```
#define LOC_SCR_SIZE 100.0f

typedef struct coords_manager
{
 float SCREEN_ASPECT;
 mat4 ORTHO_MATRIX;//glm 4*4 matrix
}coords_manager;

glViewport(0, 0, screen_width, screen_height);

coords_manager CM;

CM.SCREEN_ASPECT = (float) screen_width / screen_height; 
```

例如，我们的方面将是 1.7

```
CM.ORTHO_MATRIX = ortho(0.0f, LOC_SCR_SIZE, 0.0f, LOC_SCR_SIZE); 
```

现在左下角是 (0,0)，右上角是 (100.0, 100.0)

它工作得很好，大部分情况下，现在我们可以将四边形转换为 (25.0, 25.0)，将其缩放到 (50.0, 50.0)，它将位于左下角，大小为屏幕的 50%。但问题是它不再是四边形了，它看起来像矩形，因为我们的屏幕宽度不等于高度。

所以我们使用我们的屏幕方面：

```
CM.ORTHO_MATRIX = ortho(0.0f, LOC_SCR_SIZE * CM.SCREEN_ASPECT, 0.0f, LOC_SCR_SIZE); 
```

是的，我们得到了正确的形式，但另一个问题 - 如果我们将它定位在 (50,25) 我们会得到它有点左然后屏幕中心，因为我们的本地系统不再是 0..100 x 轴，它现在是 0..170 （因为我们乘以 1.7 的方面），所以我们在设置四边形平移之前使用 next 函数

```
void loc_pos_to_gl_pos(vec2* pos)
{
 pos->x = pos->x * CM.SCREEN_ASPECT;
} 
```

中提琴，我们在正确的地方得到了正确的阵容。

但问题是——我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:15:48.620

> OpenGL 屏幕坐标系统很难操作 x 轴：从 -1.0 到 1.0，y 轴：从 -1.0 到 1.0，以及 (0.0,0.0) 在屏幕中心。

是的，但你永远不会直接使用它们。通常总是有一个投影矩阵，它将您的坐标转换到正确的空间。

> 我们得到它有点左然后屏幕中心，因为我们的本地系统不再是 0..100 x 轴，

这就是 OpenGL 将 NDC 空间 (0,0,0) 映射到屏幕中心的原因。如果您在原点周围绘制坐标对称的四边形，它将保持在中心。

> 但问题是——我这样做对吗？

取决于你想要达到什么。

# android - 从片段中设置 viewPager 的 currentItem

> ID：14776740
> 
> 赞同：4
> 
> 时间：2013-02-08T16:11:00.797
> 
> 标签：android, android-fragments, android-viewpager

我正在开发一个项目，我在一个屏幕上使用 View Pager，它只有两个页面。

在第一个上，我有一个带有一些小部件的简单表单。在第二页上，我有一些产品名称和数量的列表视图。

选择放置在第一页（片段）中的微调器的特定选项后，是否可以从第一页更改为第二页？

我读过类似的问题，这种方法：

```
ViewPager.setCurrentItem(int index); 
```

使更改到特定页面成为可能，问题是我不知道如何引用我从片段中在活动主机上声明的这个 viewpager 对象。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-08T16:26:15.353

虽然，我不完全理解这个场景。据我了解，这是一种适用于这种情况的黑客攻击。

在活动中：

```
public ViewPager getViewPager() {
   if (null == mViewPager) {
       mViewPager = (ViewPager) findViewById(R.id.view_pager_id)
   }
   return mViewPager;
} 
```

在片段中：

```
((YourActivitName)getActivity()).getViewPager().setCurrentItem(index); 
```

# c# - 是什么导致“由于放弃互斥锁而完成等待”？

> ID：14776748
> 
> 赞同：3
> 
> 时间：2013-02-08T16:11:19.613
> 
> 标签：c#, asp.net

我有一个连接类来处理我的 Informix 数据库查询。它有两个功能；一种用于执行简单查询，一种用于返回数据表。间歇性地（尤其是当我让会话静置一会儿时，例如十分钟时）在请求新信息时，我会在 conn.open 命令上收到一个废弃的互斥锁错误。

这是有问题的代码：

```
public DataTable CallDtQuery(string query)
{
  DataTable dt = new DataTable();
  using (IBM.Data.Informix.IfxConnection conn = new
         IBM.Data.Informix.IfxConnection(sqlConnection))
  {
    try
    {
      IBM.Data.Informix.IfxDataAdapter adapter = new IfxDataAdapter();
      adapter.SelectCommand = new IBM.Data.Informix.IfxCommand(query, conn);
      conn.Open();  //Error location.
      adapter.Fill(dt);
      conn.Close();
    }
    catch (IBM.Data.Informix.IfxException ex)
    {
      LogError(ex, query);
      SendErrorEmail(ex, query);
      DisplayError();
    }
  }
  return dt;
} 
```

此外，这里是简单查询函数，它是应用程序中唯一连接到数据库的其他函数：

```
public string CallSimpleQuery(string query, string command)
{
  string result = "";
  using (IBM.Data.Informix.IfxConnection conn = new
         IBM.Data.Informix.IfxConnection(sqlConnection))
  {
    try
    {
      IBM.Data.Informix.IfxDataAdapter adapter = new IfxDataAdapter();
      conn.Open();
      switch (command)
      {
        case "UPDATE":
          adapter.UpdateCommand = new IBM.Data.Informix.IfxCommand(query, conn);
          result = adapter.UpdateCommand.ExecuteNonQuery().ToString();
          break;
        case "DELETE":
          adapter.DeleteCommand = new IBM.Data.Informix.IfxCommand(query, conn);
          result = adapter.DeleteCommand.ExecuteNonQuery().ToString();
          break;
        case "SELECT":
          adapter.SelectCommand = new IBM.Data.Informix.IfxCommand(query, conn);
          result = adapter.SelectCommand.ExecuteScalar().ToString();
          break;
        case "INSERT":
          adapter.InsertCommand = new IBM.Data.Informix.IfxCommand(query, conn);
          result = adapter.InsertCommand.ExecuteNonQuery().ToString();
          break;
        }
        conn.Close();
      }
      catch (IBM.Data.Informix.IfxException ex)
      {
        LogError(ex, query);
        SendErrorEmail(ex, query);
        DisplayError();
      }
    }
    return result;
  } 
```

这是生成的错误：

```
Error Message = The wait completed due to an abandoned mutex.
Message Source:
mscorlib
=============================
Message Target:
Boolean WaitOne(Int64, Boolean)
=============================
Stack Trace:
  at System.Threading.WaitHandle.WaitOne(Int64 timeout, Boolean exitContext)
  at System.Threading.WaitHandle.WaitOne(Int32 millisecondsTimeout, Boolean exitContext)
  at System.Threading.WaitHandle.WaitOne()
  at IBM.Data.Informix.IfxConnPoolManager.GetPool(IfxConnSettings key)
  at IBM.Data.Informix.IfxConnPoolManager.Open(IfxConnection connection)
  at IBM.Data.Informix.IfxConnection.Open()
  at XXX.Connections.CallDtQuery(String query) in d:\Inetpub\wwwroot\intranet\CWSheet-test2\App_Code\Connections.cs:line 75
  at XXX.details.Page_Load(Object sender, EventArgs e) in d:\Inetpub\wwwroot\intranet\CWSheet-test2\Details.aspx.cs:line 29
  at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
  at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
  at System.Web.UI.Control.OnLoad(EventArgs e)
  at System.Web.UI.Control.LoadRecursive()
  at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

当错误发生时，它不会进入 catch 块并运行 Log、Send 和 Display 错误函数，而是放入 global.asax 上的 Application_Error 块。由于所有内容都包含在 try/catch 块中，因此我不确定是什么原因造成的。此外，无论出于何种原因，应用程序有时会在 CallDtQuery 上挂起。我将在表单视图中翻阅记录页面，它会突然挂在 CallDtQuery 请求上。有时它可能会在一两分钟后通过，有时它会无限期挂起，直到应用程序在 30 分钟后超时。

我一直在阅读一些关于互斥锁的文章，但以前从未使用过它。ASP.NET 应用程序会自动生成正在使用的任何互斥锁。考虑到这一点，我不确定如何解决或解决此问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:57:39.500

好吧，假设你没有做任何奇怪的线程处理，有几件事需要考虑

*   informix C# 类在并发管理方面存在一些问题（我现在想起[了这个 APAR](http://www-01.ibm.com/support/docview.wss?uid=swg1IC66046)）
*   我不能说为什么，但是在打开连接之前创建命令感觉很奇怪。
*   我会将 ifxcommand 配置为，特别是在 IfxConnection 上调用 Dispose 会自动调用 Close 方法，可能在双重关闭中某些句柄被混淆了，看看[这个](http://publib.boulder.ibm.com/infocenter/idshelp/v115/topic/com.ibm.net_cc.doc/com.ibm.swg.im.dbclient.adonet.ref.doc/doc/DB2ConnectionClassDisposeMethod1.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:42:24.743

所以事实证明问题出在我使用的 IBM.Data.Informix.dll 版本（2.90。）我在这里找到了解释该问题的文档：[http://www.iiug.org/forums/development-tools/index。 cgi/读取/109](http://www.iiug.org/forums/development-tools/index.cgi/read/109)

一旦我更新到更新的版本（3.50），Abandoned Mutex 错误就消失了。间歇性挂起问题也消失了。

# python - 在 AWS SQS 队列中连续读取数据

> ID：14776751
> 
> 赞同：3
> 
> 时间：2013-02-08T16:11:36.893
> 
> 标签：python, amazon-web-services, boto, amazon-sqs

我对 AWS SQS 队列非常陌生，目前正在玩 boto。我注意到，当我尝试在 while 循环中读取充满消息的队列时，我看到在读取 10-25 条消息后，队列没有返回任何消息（即使队列有超过 1000 条以上的消息）。几秒钟后或在停止和重新启动程序时，它开始填充另一组 10-25 条消息。while true: read_queue() // 已与所需队列建立连接。

对这种行为的任何想法或指出我正确的方向。只是重申我才几天才到 SQS ！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:58:30.627

这就是 SQS 队列默认的工作方式（短轮询）。如果您在设置队列后没有更改任何设置，则默认是从加权随机抽样机器中获取消息。如果您使用多台机器并且想要当时可以使用的所有消息（跨所有机器），则需要使用长轮询。[请参阅此处的亚马逊文档。](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-long-polling.html)我不认为boto直接支持ATM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T17:35:19.553

长轮询更有效，因为它允许您在等待更多结果的同时让 HTTP 连接保持打开一段时间。但是，您仍然可以通过设置循环并在读取队列之间等待一段时间来在 boto 中进行自己的轮询。使用这种轮询策略，您仍然可以获得良好的整体吞吐量。

# plone - EEA Faceted Navigation - 如何在我们自己的产品中创建新的小部件

> ID：14776752
> 
> 赞同：2
> 
> 时间：2013-02-08T16:11:36.897
> 
> 标签：plone

我为 EEA 分面导航创建了一个新的小部件“滑块”。它工作正常，但我直接在原始产品中进行了这些更改。

有关详细信息，我在中添加了一个新文件夹`eea/facetednavigation/widgets`并修改了`eea/facetednavigation/widgets/configure.zcml`.

我想在我自己的产品中移动这个新的小部件。

我创建了一些文件和文件夹：

*   我的/产品/小部件
*   我的/产品/小部件/滑块
*   我的/产品/小部件/configure.zcml

并将我的新包“widgets”包含在根 zcml 中。

但它不起作用：

```
Module eea.facetednavigation.browser.app.view, line 89, in get_sections
Module eea.facetednavigation.browser.app.view, line 96, in get_view_widgets
Module eea.facetednavigation.browser.app.view, line 111, in get_widgets
TypeError: 'NoneType' object is not callable 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:50:37.437

您**不必**重新实例化 IWidgetsInfo :)

您所要做的就是注册您的小部件：

`<faceted:widget factory=".widget.Widget" />`

查看在 eea.facetednavigation 命名空间之外注册的这个分面小部件：

*   [https://svn.eionet.europa.eu/repositories/Zope/trunk/eea.dataservice/trunk/eea/dataservice/facetednavigation/lastversion/configure.zcml](https://svn.eionet.europa.eu/repositories/Zope/trunk/eea.dataservice/trunk/eea/dataservice/facetednavigation/lastversion/configure.zcml)

*   [https://svn.eionet.europa.eu/repositories/Zope/trunk/eea.dataservice/trunk/eea/dataservice/facetednavigation/lastversion/](https://svn.eionet.europa.eu/repositories/Zope/trunk/eea.dataservice/trunk/eea/dataservice/facetednavigation/lastversion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:24:27.180

我正在查看[https://github.com/eea/eea.facetednavigation](https://github.com/eea/eea.facetednavigation)，因为我不知道你有什么版本。

看起来该`<facet:widget />`指令（我假设您在 my/products/widgets/configure.zcml 文件中有）将小部件附加到小部件注册表*类*。他们注册所有的小部件，*然后*将注册表实例化为实用程序。

因此，请尝试通过在您的产品中添加 overrides.zcml 来重新实例化该类

我的/产品/覆盖.zcml

与以下

```
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser">

  <configure package="eea.facetednavigation">
    <utility provides=".interfaces.IWidgetsInfo"
             factory=".widgets.WidgetsInfo" />
  </configure>

</configure> 
```

# android - Phonegap JQuery Mobile Android后退按钮问题

> ID：14776754
> 
> 赞同：1
> 
> 时间：2013-02-08T16:11:40.867
> 
> 标签：android, cordova, jquery-mobile

我正在使用 Phonegap 和 JQuery mobile 制作具有大量动态内容的应用程序。有很多页面是动态创建的。我需要让后退按钮在 Android 中工作。在这篇文章中，[Android 中 PhoneGap 和 Jquery-mobile 的后退按钮问题](https://stackoverflow.com/questions/9049374/back-button-problems-with-phonegap-and-jquery-mobile-in-android)，我设置了 $.mobile.phonegapNavigationEnabled = true ，现在该按钮至少像我期望的那样工作。它可以追溯到历史，跳过动态创建的页面。在我添加之前，它正在到处乱跳。

我的问题是，如何将这些动态创建的页面放入历史记录中，以便在按下 Android 后退按钮时，它会以正确的方式返回？

# c# - C# 委托与事件处理程序

> ID：14776758
> 
> 赞同：-3
> 
> 时间：2013-02-08T16:11:49.363
> 
> 标签：c#, events, delegates

在使用事件处理程序和委托方法之间做出决定时，有哪些好的考虑因素？

例如，我选择委托方法选项来将功能实现推迟到另一个对象。我选择事件处理程序选项主要是为了让其他对象订阅更新。

但显然，正如您所看到的，这些都是非常粗略的标准。我在 Stackoverflow 上阅读了一些类似的问题，但它们针对的是非常具体的问题，而我对通用用法更感兴趣。

有什么输入吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:38:08.593

如上所述，它将根据您的情况而有所不同。 `Delegates`曾经要求你的逻辑有一个单独的方法来实现你的逻辑。这使得使用 a`Delegate`难以证明是正确的。然而，`Lambda Expressions`和`Anonymous Methods`a`Delegate`实际上变得非常有用，功能强大`Type`，很容易证明。

`Delegates`非常适合：

*   事件处理程序
*   启动线程
*   回调
*   LINQ

带有特殊代码的模板的概念概念`Delegate`非常好。

`Event Handler`当您寻找 a以在操纵`Class`an 时提供某种形式的通知时，An将是理想的。`Object`最常见的实现和最简单的示例是`User Interface`. 每个`Class`代表一个，并且其中的`Control`每个都会有一个事件来指示何时进行更改。`Control``Interface`

A`Button`它的全部目的是被点击；但是在单击它之前，您不需要它来执行或做任何事情。一个例子`Event Handler`。

它们通常通过使用`Delegate`. 推理是`Delegate Object`封装一个方法，以便可以匿名调用它。An`Event`是一种`Class`允许客户端提供`Delegate`在发生事件时应该调用的方法的方法`Event`。

All an `Event Handler`is, 是一个被调用到相关的过程`Event`。这些`Event Handlers`需要两个要素：

*   一种`Delegate`
*   （可选）保存该`Event`数据的类。

所以在大多数情况下，它们是齐头并进的。

显然，您的问题没有提供太多细节，因此很难实际回答或磨练您的标准。

一些可以帮助您的网站：

*   [事件处理程序](http://msdn.microsoft.com/en-us/library/system.eventhandler.aspx)
*   [事件和事件处理程序](http://msdn.microsoft.com/en-us/library/2z7x8ys3%28v=vs.80%29.aspx)
*   [代表们](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)

这些都是重要的概念，因此理解它们非常重要。希望这有助于澄清一点。

# android - 带有图像的 ListView 中的错误

> ID：14776767
> 
> 赞同：1
> 
> 时间：2013-02-08T16:12:25.523
> 
> 标签：android, android-listview, baseadapter

我正在尝试`ListView`在 android 中构建一个，其中的每个项目`ListView`都由 one`ImgeView`和 4组成`TexView`。我的`getView`类扩展`BaseAdapter`定义如下：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    ViewHolder holder;

    if(vi == null) {
      LayoutInflater inflater = (LayoutInflater) Activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      vi = inflater.inflate(R.layout.item_lista_restaurantes, null);

      holder = new ViewHolder();
         holder.nombreRestaurante= (TextView) vi.findViewById(R.id.etiquetaNombreResItemRes);
         holder.direccionRestaurante = (TextView) vi.findViewById(R.id.etiquetaDireccionResItemRes);
         holder.ciudadRestaurante = (TextView) vi.findViewById(R.id.etiquetaCiudadResItemRes);
         holder.telefonoRestaurante = (TextView) vi.findViewById(R.id.etiquetaTelResItemRes);
         holder.lineaLogo = (TextView) vi.findViewById(R.id.etiquetaLineaLogo);

         vi.setTag(holder);      
    }

    else
    {
        holder = (ViewHolder)vi.getTag();
    }

    itemRestaurante item= this.itemR.get(position);  

    ImageView image = (ImageView) vi.findViewById(R.id.imageLogoItemRestaurante);
    int imageResource = this.Activity.getResources().getIdentifier(item.getRutaImaLogo(), null, this.Activity.getPackageName());
    image.setImageDrawable(this.Activity.getResources().getDrawable(imageResource));        
    holder.nombreRestaurante.setText(item.getNombreR());        
    holder.direccionRestaurante.setText(item.getDireccionR());      
    holder.ciudadRestaurante.setText(item.getCiudadR());        
    holder.telefonoRestaurante.setText(item.getTelR());     
    holder.lineaLogo.setText(item.getDireccionR());

    return vi;
} 
```

上的代码行`getView`：

```
ImageView image = (ImageView) vi.findViewById(R.id.imageLogoItemRestaurante);
    int imageResource = this.Activity.getResources().getIdentifier(item.getRutaImaLogo(), null, this.Activity.getPackageName());
    image.setImageDrawable(this.Activity.getResources().getDrawable(imageResource)); 
```

这是我返回 rutaImagenLogo 值的 itemRestaurantes 类

```
 package clasesExtras;

public class itemRestaurante {

    private long idRestaurante;
    private String nombreRestaurante;
    private String direccionRestaurante;
    private String ciudadRestaurante;
    private String telefonoRestaurante;
    private String rutaImagenLogo;
    //private String rutaImagenGo;
    //private String rutaImagenLineaLogo;

    /*Constructor*/
    public itemRestaurante(long id, String nombre, String direccion, String ciudad,
                            String telefono, String rutaLogo){

        this.idRestaurante= id;
        this.nombreRestaurante= nombre;
        this.direccionRestaurante= direccion;
        this.ciudadRestaurante= ciudad;
        this.telefonoRestaurante= telefono;
        this.rutaImagenLogo= rutaLogo;
        //this.rutaImagenGo= rutaGo;
        //this.rutaImagenLineaLogo = rutaLineaLogo;
    }

    public long getId(){        
        return this.idRestaurante;
    }

    public void setId(long id){     
        this.idRestaurante= id;
    }

    public String getNombreR(){     
        return this.nombreRestaurante;
    }

    public void setNombreR(String nombre){      
        this.nombreRestaurante=nombre;
    }

    public String getDireccionR(){      
        return this.direccionRestaurante;
    }

    public void setDireccionR(String direccion){
        this.direccionRestaurante=direccion;
    }

    public String getCiudadR(){
        return this.ciudadRestaurante;
    }

    public void setCiudadR(String ciudad){
        this.ciudadRestaurante= ciudad;
    }

    public String getTelR(){
        return this.telefonoRestaurante;
    }

    public void setTelR(String telefono){
        this.telefonoRestaurante= telefono;
    }

    public String getRutaImaLogo(){
        return this.rutaImagenLogo;
    }

    public void setRutaImaLogo(String imagenLogo){
        this.rutaImagenLogo= imagenLogo;
    } 
```

这是我用 ListView 的每个项目的信息填充 ArrayList 的活动类

```
 package appetite.apptitud;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Spinner;
import clasesExtras.ArrayAdapterRestaurantes;
import clasesExtras.itemRestaurante;

public class ListaRestaurantes extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lista_restaurantes);
        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); //forza a android a ocultar el teclado virtual

        ListView lista = (ListView)findViewById(R.id.listaRestaurantes);        
        ArrayList<itemRestaurante> itemRestaurante = obtenerItems();                
        ArrayAdapterRestaurantes adapter = new ArrayAdapterRestaurantes(this, itemRestaurante);

        lista.setAdapter(adapter);          

    }

    //Método para llenar la lista de los restaurantes.
    private ArrayList<itemRestaurante> obtenerItems(){
        ArrayList<itemRestaurante> items = new ArrayList<itemRestaurante>();

        items.add(new itemRestaurante(1, "Frisby", "Cra. 7a 24-74", "Pereira", "3168899", "drawable/frisby_logo"));
        items.add(new itemRestaurante(2, "Big Pollo", "Cra. 5a 34-12", "Pereira", "3147152", "drawable/bigpollo"));
        items.add(new itemRestaurante(3, "Wingz", "Cra. 8a 18-62", "Pereira", "3391000", "drawale/wingz"));
        items.add(new itemRestaurante(4, "Sir Pollo", "Cra. 7a 20-04", "Pereira", "3357913", "drawable/sirpollo"));

        return items;
    } 
```

上面显示的代码引用了存储它的图像路径（可绘制文件夹），我想在列表视图的每个项目中显示此图像，但这会跳转到以下错误：

```
 FATAL EXCEPTION: main
android.content.res.Resources$NotFoundException:Resource ID #0x0
at android.content.res.Resources.getValue(Resources.java:1014)
at android.content.res.Resources.getDrawable(Resources.java:659)
at clasesExtras.ArrayAdapterRestaurantes.getView(ArrayAdapterRestaurantes.java:56) 
```

有人告诉我该`imageResource`值为 0。而 0 不是有效的资源 ID。我该如何解决这个值？请帮帮我，我不明白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:36:08.513

我认为 imageResource 是 0。检查这个值。

> [getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)返回 int 关联的资源标识符。如果没有找到这样的资源，则返回 0。（0 不是有效的资源 ID。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:59:37.520

您必须为列表视图创建一个自定义适配器

这将是 Restaurant.java

```
public class Restaurant{
   public int icon;
   public String someText;
   public String moreText;
   public String someMoreText;
   public String evenMoreText;

public Restaurant(int icon, String someText, String moreText, String somMoreText, String evenMoreText)
    super.();
    this.someText = someText;
    this.moreText = moreText;
    this.someMoreText = someMoreText;
    this.evenMoreText = evenMoreText;
    this.icon = icon;
} 
```

这是自定义适配器 RestaurantAdapter.java

```
public class RestaurantAdapter extends<Restaurant> }
    Context context;
    int layoutResourceId;
    Restaurant data[] = null;

    public RestaurantAdapter(Context context, int layoutResourceId, Restaurant[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        RestaurantHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new RestaurantHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtID1 = (TextView)row.findViewById(R.id.txtID1);
            holder.txtID2 = (TextView)row.findViewById(R.id.txtID2);
            holder.txtID3 = (TextView)row.findViewById(R.id.txtID3);
            holder.txtID4 = (TextView)row.findViewById(R.id.txtID4);

            row.setTag(holder);
        }
        else
        {
            holder = (RestauantHolder)row.getTag();
        }

        Restaurant restaurant = data[position];
        holder.txtID1.setText(restaurant.someText);
        holder.txtID1.setText(restaurant.moreText);
        holder.txtID1.setText(restaurant.someMoreText);
        holder.txtID1.setText(restaurant.evenMoreText);
        holder.imgIcon.setImageResource(restarant.icon);

        return row;
    }
}   
static class RestaurantHolder
{
ImageView imgIcon;
TextView txtID1;
TextView txtID2;
TextView txtID3;
TextView txtID4;
} 
```

现在在您的活动中，它将是这样的电话

```
 Restaurant restaurant_data[] = new Restaurant[]
    {
        new Restaurant(R.drawable.pic1, "some text", "more text", "some more text". "even more text"),
        new Restaurant(R.drawable.pic2, "text", "more", "some more", "blah"),
        new Restaurant(R.drawable.pic3, "blah1", "blah2", "blah3" "blah3"),
        new Restaurant(R.drawable.pic4, "you get the idea", "blah", "blah", "blah"),

    };

    RestaurantAdapter adapter = new RestaurantAdapter(this, 
            R.layout.listview_item_row, restaurant_data);

    listView1 = (ListView)findViewById(R.id.listView1); 
```

归功于[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429) 您只需要更改一些名称。

# algorithm - 需要建议在 matlab 中为一个巨大的反转索引固定 Map

> ID：14776768
> 
> 赞同：0
> 
> 时间：2013-02-08T16:12:30.167
> 
> 标签：algorithm, matlab, map, inverted-index

我需要将大量数据存储在 Invert Index 的地图中，但我的数据非常庞大，我看到随着 Map 变得越来越大，它变得越来越慢。我们正在谈论一个具有非常稀疏索引的 Map 容器，涵盖 1 到数十亿。

在我的程序的一次迭代中，将计算一些数字，以获取许多要存储的键值（可能是数千个） -**这意味着 Map 的大小在每次迭代中都会增加大约数千个左右。**我看到在最初的几次迭代中，需要 20 秒左右，但在第 70 次左右的迭代中，需要 100 秒左右。我有大约 5000 组数据——也就是说，我需要对所有这些数据进行 5000 次迭代。随着每次迭代的时间呈指数增长，这将需要数天的时间来计算，这是不可接受的。

那么在这种情况下我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:27:14.057

您可以尝试改用 java HashMap 实现。每次 Matlab 访问 java 例程时都会有 smkall 开销，但 Java 例程通常提供更大的灵活性。例如：

```
%Create
map = java.util.HashMap(5e6);  %Initialize with room for 5 million entries

%Add data
map.put('key1','value1');
map.put(2,20);

%get data
out = map.get('key1'); %Get a value
map.containsKey(2);    %Check for existance of a key 
```

这将起作用。但是......尚不清楚它是否会更快。只有一个测试会告诉你。

此外，当您以这种方式开发时，您可能会偶尔遇到错误。

```
Java exception occurred:
java.lang.OutOfMemoryError: Java heap space
    at java.util.HashMap.<init>(Unknown Source)
    at java.util.HashMap.<init>(Unknown Source) 
```

发生这种情况时，您可以使用`clear java`清除任何 Java 驻留信息，或为初始 HashMap 分配更少的空间。

# java - Debian 上的 Java 本机内存泄漏

> ID：14776769
> 
> 赞同：3
> 
> 时间：2013-02-08T16:12:33.883
> 
> 标签：java, linux, memory, native, memory-leaks

我在 Tomcat 中部署的 Java 应用程序存在严重问题：

*   操作系统：Debian 6.06（内核 3.2.13-grsec-xxxx-grs-ipv6）
*   雄猫：6.0.35
*   JDK：1.6.0_37-b06
*   JVM参数：-Xms3584m -Xmx3584m -XX:MaxPermSize=256m -XX:ThreadStackSize=1024
*   线程数：200

使用几个小时后，RSS（常驻内存大小）为 13GB，VSZ（虚拟内存大小）为 15 GB。

该应用程序有 2 个 servlet：一个用于一些简单 HTTP 请求的 Spring DispatcherServlet 和一个用于处理 WebServices 的 CXFServlet。该应用程序没有任何自定义本机代码。

使用的磁头约为 2 GB，因此这不是问题。

返回 4 MB 响应的 SOAP 请求会生成 500 MB 的 RSS 增量。运行垃圾收集器对 RSS 没有影响。

您是否知道此内存增加的任何可能原因或任何可以帮助我调查此问题的工具。谢谢。

**pmap 输出**

映射：14226976K 可写/私有：13772580K 共享：286844K

10 个最大的“匿名”块：

```
0000000720000000 3670016 rw--- 0000000000000000 000:00000   [ anon ]
0000000000601000 2529344 rw--- 0000000000000000 000:00000   [ anon ]
0000000710000000  173504 rw--- 0000000000000000 000:00000   [ anon ]
00007f7484000000  131072 rw--- 0000000000000000 000:00000   [ anon ]
00007f7414000000  131068 rw--- 0000000000000000 000:00000   [ anon ]
00007f7424000000  131068 rw--- 0000000000000000 000:00000   [ anon ]
00007f7434000000  131068 rw--- 0000000000000000 000:00000   [ anon ]
00007f7494000000  131068 rw--- 0000000000000000 000:00000   [ anon ]
00007f737c000000  131024 rw--- 0000000000000000 000:00000   [ anon ]
00007f738c000000  131024 rw--- 0000000000000000 000:00000   [ anon ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:16:43.380

您可以使用 JVisualVM（Java 附带的一个分析工具）很好地了解 JVM 内部发生的情况。手册可以在这里找到。

[视觉虚拟机](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html "手动的")

还有其他更好的工具（想到 JProfiler 7），但它们通常需要支付许可费。您可以尝试免费试用 JProfiler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:36:40.483

究竟是什么问题？操作系统是否正在交换？也许你只需要阅读这个问题的公认答案：[Linux下Java的虚拟内存使用，使用的内存过多](https://stackoverflow.com/questions/561245/virtual-memory-usage-from-java-under-linux-too-much-memory-used)

如果您使用的是 NIO，那么这也可能是堆外内存消耗的来源，如下所述： [为什么即使堆等大小稳定，Sun JVM 仍会继续消耗更多的 RSS 内存？](https://stackoverflow.com/questions/1612939/why-does-the-sun-jvm-continue-to-consume-ever-more-rss-memory-even-when-the-heap)

# android - android上的post问题，总是异常

> ID：14776774
> 
> 赞同：0
> 
> 时间：2013-02-08T16:12:48.360
> 
> 标签：android, post

我正在尝试构建一个 POST 数据包并将其传递到仅包含数据的某个 url：

```
value={ "y": 2102 } 
```

所以我尝试创建以下类：

```
class myPostReq {
    HttpResponse response = null;
    StringEntity tmp = null;
    HttpPost httpPost = null;
    DefaultHttpClient httpClient;
    HttpContext localContext;

    public myPostReq() { }
    public int post(String url,String data) {
        httpClient = new DefaultHttpClient();
        httpPost = new HttpPost(url);
        localContext = new BasicHttpContext(); 
        int ret = 0;
        try {
            tmp = new StringEntity("value={ y: " + data + "}","UTF-8");
        } catch (UnsupportedEncodingException e) {
            ret = -1;
        }
        httpPost.setHeader("Content-Type", "application/x-www-form-urlencoded");
        httpPost.setEntity(tmp);
        try {
            response = httpClient.execute(httpPost,localContext);

            if (response != null) {
                ret = response.getStatusLine().getStatusCode();
            }
        } catch (Exception e) {
            ret = -2;
        }
        return ret;
    }
} 
```

但是，当我执行 post(..) 方法时，它一直在崩溃。我不明白我做错了什么。

编辑：提供Logcat：

```
02-08 18:21:51.841: W/System.err(2034): android.os.NetworkOnMainThreadException
02-08 18:21:51.851: W/System.err(2034):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
02-08 18:21:51.851: W/System.err(2034):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
02-08 18:21:51.851: W/System.err(2034):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
02-08 18:21:51.861: W/System.err(2034):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
02-08 18:21:51.861: W/System.err(2034):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
02-08 18:21:51.871: W/System.err(2034):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-08 18:21:51.871: W/System.err(2034):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-08 18:21:51.871: W/System.err(2034):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-08 18:21:51.881: W/System.err(2034):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-08 18:21:51.881: W/System.err(2034):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-08 18:21:51.881: W/System.err(2034):     at com.example.remoteswitch.myPostReq.post(MainActivity.java:266)
02-08 18:21:51.891: W/System.err(2034):     at com.example.remoteswitch.MainActivity.startOperation(MainActivity.java:198)
02-08 18:21:51.891: W/System.err(2034):     at java.lang.reflect.Method.invokeNative(Native Method)
02-08 18:21:51.891: W/System.err(2034):     at java.lang.reflect.Method.invoke(Method.java:511)
02-08 18:21:51.891: W/System.err(2034):     at android.view.View$1.onClick(View.java:3592)
02-08 18:21:51.901: W/System.err(2034):     at android.view.View.performClick(View.java:4202)
02-08 18:21:51.901: W/System.err(2034):     at android.view.View$PerformClick.run(View.java:17340)
02-08 18:21:51.901: W/System.err(2034):     at android.os.Handler.handleCallback(Handler.java:725)
02-08 18:21:51.911: W/System.err(2034):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-08 18:21:51.911: W/System.err(2034):     at android.os.Looper.loop(Looper.java:137)
02-08 18:21:51.911: W/System.err(2034):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-08 18:21:51.921: W/System.err(2034):     at java.lang.reflect.Method.invokeNative(Native Method)
02-08 18:21:51.921: W/System.err(2034):     at java.lang.reflect.Method.invoke(Method.java:511)
02-08 18:21:51.941: W/System.err(2034):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-08 18:21:51.941: W/System.err(2034):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-08 18:21:51.941: W/System.err(2034):     at dalvik.system.NativeStart.main(Native Method)
02-08 18:21:52.080: I/Choreographer(2034): Skipped 66 frames!  The application may be doing too much work on its main thread.
02-08 18:21:52.080: W/Trace(2034): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:30:46.577

您*必须*`httpPost`在引用and`httpClient`的地方获得 NullPointerException `localContext`。您应该将它们初始化为...

```
httpClient = new DefaultHttpClient();
httpPost = new HttpPost(url);
// localContext = HttpSupport.getHttpContextInstance(); ???

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("value", "{ y: 2102 }"));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

在引用它们之前。您还应该添加代码以检查您`response`喜欢的返回代码...

```
if (response.getStatusLine().getStatusCode() != HttpStatus.SC_OK) {
   // notify user
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:32:00.517

看来您既没有初始化 httpPost，也没有设置 requestURL。尝试这个...

```
defaultHttpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(requestUrl);
httpResponse = defaultHttpClient.execute(httpPost); 
```

# php - 在mysql查询中使用目录功能

> ID：14776778
> 
> 赞同：0
> 
> 时间：2013-02-08T16:12:56.190
> 
> 标签：php, mysql, file

我想将文件夹“video/test”中的文件名与表“files”列“filename”中的条目进行比较。我曾尝试使用“dir()”来获取数组并将其内爆到我的 mysql 查询中。但这不是正确的获取无效参数警告。有更好的方法吗？

```
$filenames = dir("video/test");
$sql = sprintf( 'SELECT * FROM files WHERE filename not in ("%s")', implode( '","', $filenames ) );
$sql = $db->query($sql);
while($row = $sql->fetch_assoc()){
echo $row['filename'];  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:14:47.937

我想你的意思是：

```
$filenames = scandir('video/test'); 
```

[http://php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)

不是这个：

[http://php.net/manual/en/function.dir.php](http://php.net/manual/en/function.dir.php)

# ajax - Phonegap 和 Django 身份验证

> ID：14776783
> 
> 赞同：4
> 
> 时间：2013-02-08T16:13:34.000
> 
> 标签：ajax, django, cordova, tastypie, django-authentication

我正在构建一个[PhoneGap (Cordova)](http://phonegap.com/)应用程序，我希望能够与我的 Django 站点交谈。使应用程序正常工作所需的步骤是：

1.  验证用户身份（在应用程序重新启动时保持登录状态）（例如，从 Django 获取会话 cookie 以与服务通信 - 在哪里存储？）。**注意**：Django 端点使用 https。
2.  当应用程序收到推送通知时，从我的 django 站点加载一些数据。
3.  选择数据并将响应提交回我的 django 站点（需要 csrf 令牌吗？）

我能够整理推送通知，但现在**我想知道哪种解决方案最适合与 Django 的通信**。据我了解，有两种可能的方法：

1.  [要么使用诸如美味派之](https://github.com/toastdriven/django-tastypie)类的东西来实现 REST 服务，要么
2.  尝试通过 ajax 设置通信（例如 jQuery）

目前我认为简单的 ajax 可能是最好的方法，因为该应用程序相当小，并且对 REST API 没有额外的要求。

如果有人能就如何解决这个问题或分享一些经验/代码给我任何指示，那就太好了。特别是身份验证过程的步骤我不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T14:41:02.080

我不确定这是否仍然是一个悬而未决的问题，但它肯定是一个有趣的问题。我强烈建议使用[django-tastypie](https://github.com/toastdriven/django-tastypie)，您可以从使用确实是一个很好的参考点的[文档开始。](http://django-tastypie.readthedocs.org/en/latest/)

到目前为止，我的经验表明，我应该始终从让我的 api 清晰（和休息）开始，而不是选择一个更简单、更快的解决方案（例如 ajax），因为如果你的应用程序是成功的，那么像这样的框架可以帮助你扩展。

如果您选择基本的身份验证过程，则非常简单。您只需询问用户凭据，并且有许多客户端实现了客户端基本身份验证。幸运的是，tastepie 支持的远不止这些。例如，api 身份验证，您可以[在此处](http://django-tastypie.readthedocs.org/en/latest/authentication.html)阅读更多内容。如果您还需要什么，请告诉我。

问候，迈克尔。

# ruby-on-rails - 使用 Solr / Sunspot 按哈希值排序

> ID：14776784
> 
> 赞同：0
> 
> 时间：2013-02-08T16:13:40.997
> 
> 标签：ruby-on-rails, sorting, solr, sunspot

我有一个使用 Sunspot 访问 Solr 的 RoR 应用程序。所有最新版本。

我的索引文档有一个散列，其中键是 user_id，值是用户第一次看到文档的时间。

如何按用户的日期值对搜索结果进行排序？由于涉及的数据量，我希望在 Solr 而不是在 RoR 中完成这项工作 - 提取所有结果只是为了在 RoR 中进行排序不会很漂亮。

这在 Solr 中是否可以实现？如果是这样，太阳黑子也能处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:08:01.023

在 Solr REST API 中，要按时间字段排序，您只需添加一个`sort`查询参数。例如，如果您想按用户 ID 的 1、2 和 3 访问文档的时间排序，您可以发出类似 `http://localhost:8983/solr/CORE/select?q=user_id:(1 OR 2 OR 3)&sort=timefield desc` solr 的查询。

我不知道太阳黑子或红宝石，但看看[http://sunspot.github.com/](http://sunspot.github.com/)上的搜索示例，我想你可以做某事。像这样？

```
Post.search do
  user_id '1 OR 2 OR 3'
  order_by :timefield, :desc
end 
```

# django - 媒体根更改后 Django 变慢

> ID：14776787
> 
> 赞同：0
> 
> 时间：2013-02-08T16:13:51.007
> 
> 标签：django

嗨，我有一个 Django 项目，媒体根目录与项目位于同一驱动器中。但由于磁盘空间问题，我将其移至另一个驱动器。但现在它变得非常缓慢。我如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T06:35:23.677

当您在服务器上启动它时，这应该不是问题，所以我不应该担心。这可能是因为您将文件存储在 USB 驱动器中，并且访问速度较慢。

# python - Python - 如何用左右空格填充字符串？

> ID：14776788
> 
> 赞同：59
> 
> 时间：2013-02-08T16:13:51.683
> 
> 标签：python, string

我有两种情况，我需要在左右方向（在不同的情况下）用空格填充一个字符串到一定长度。例如，我有字符串：

```
TEST 
```

但我需要使字符串变量

```
_____TEST1 
```

这样实际的字符串变量长度为 10 个字符（在这种情况下由 5 个空格引导）。 **注意**：我显示下划线来表示空格（否则降价在 SO 上看起来不正确）。

我还需要弄清楚如何反转它并从另一个方向填充空格：

```
TEST2_____ 
```

是否有任何字符串辅助函数来执行此操作？还是我需要创建一个字符数组来管理它？

另请注意，我试图将字符串长度保留为变量（我在上面的示例中使用了 10 的长度，但我需要能够更改它）。

任何帮助都是极好的。如果有任何`python`功能来管理它，我宁愿避免从头开始编写一些东西。

谢谢！

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-02-08T16:14:36.877

你可以调查一下[`str.ljust`，`str.rjust`](https://docs.python.org/3/library/stdtypes.html#str.ljust)我相信。

另一种可能是使用[格式](https://docs.python.org/3/library/string.html#format-examples)方法：

```
>>> '{:<30}'.format('left aligned')
'left aligned                  '
>>> '{:>30}'.format('right aligned')
'                 right aligned'
>>> '{:^30}'.format('centered')
'           centered           '
>>> '{:*^30}'.format('centered')  # use '*' as a fill char
'***********centered***********' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-09-06T17:27:35.933

Python3 f 字符串用法

```
l = "left aligned"
print(f"{l.ljust(30)}")

r = "right aligned"
print(f"{r.rjust(30)}")

c = "center aligned"
print(f"{c.center(30)}") 
```

* * *

```
>>> l = "left aligned"
>>> print(f"{l.ljust(30)}")
left aligned                  

>>> r = "right aligned"
>>> print(f"{r.rjust(30)}")
                 right aligned

>>> print(f"{c.center(30)}")
        center aligned 
```

# jquery - 在 Safari 中滚动下一步时 CarouFredSel 闪烁

> ID：14776790
> 
> 赞同：0
> 
> 时间：2013-02-08T16:13:52.087
> 
> 标签：jquery, google-maps, safari, scroll, caroufredsel

我正在使用 CarouFredSel 显示垂直滚动条（[http://new.joshrodg.com/?page_id=206](http://new.joshrodg.com/?page_id=206)）的网站上工作，我遇到的问题是当我单击上一个按钮时， CarouFredSel 滚动得很好。 ..但是当我尝试通过单击下一个按钮来推进幻灯片时，滚动就搞砸了..奇怪的是，只有当我使用 WordPress MapPress 插件发布了谷歌地图时才会发生这种情况。

我很确定 MapPress 插件导致了这个问题，但我认为可以通过一些代码来修复它（特别是因为这似乎是一个仅限 Safari 的问题......我已经在 Safari、Firefox、Chrome 和IE8)

现在确实起作用的一件事（有点）是添加`position: relative`到我的`.sidebar-image a`css 样式中，唯一的问题是尽管它正确推进，但没有滚动效果（这违背了目的）

以前有人经历过吗？

我的`script`样子：

```
$(window).load(function() {
    /* Sidebar */
    $("#sidebar-image").carouFredSel({
        direction: "up",
        auto: false,
        items: {
            visible: 2
        },
        next: "#down",
        prev: "#up",
        scroll: {
            easing: "quadratic",
            items: 1
        },
        width: "100%"
    });
}); 
```

我的`code`样子：

```
<div class="sidebar-image">
    <div id="sidebar-image">
        <?php while ( have_posts() ) : the_post(); ?>
            <?php if ( has_post_thumbnail() ) { ?>
                <?php 
                    $id = get_post_thumbnail_id();
                    $url = wp_get_attachment_image_src($id, "large", true);
                ?>
                <a href="<?php echo $url[0]; ?>" rel="lightbox[<?php echo get_the_ID(); ?>]"><?php the_post_thumbnail("sidebar-image"); ?></a>
            <?php } ?>
        <?php endwhile; ?>
    </div>
    <div class="clear">
        <!-- -->
    </div>
</div> 
```

我的`CSS`样子：

```
/* Slides */
.sidebar-image {
    border-bottom: 1px solid #dcdedf;
    overflow: hidden;
    width: 277px;
}

.sidebar-image a {
    border-left: 1px solid #dcdedf;
    border-right: 1px solid #dcdedf;
    border-top: 1px solid #dcdedf;
    display: block;
    position: relative;
    float: left;
} 
```

所有这些代码都在另一个具有相对位置的 div 中 - 我在某处读到可能导致问题的地方，但即使在删除 css 之后，轮播仍然做同样的事情......

`code`包含 div 的看起来像：

```
/* Slideshow */
#sidebar {
    float: right;
    position: relative;
    width: 305px;
} 
```

我尝试过使用不同的 jQuery 库（直接来自 jQuery，而不是直接来自 Google）。我也尝试使用完整的 CarouFredSel 脚本，而不是使用 CarouFredSel 打包版本。

Any ideas? It's got me stumped :-(

Thanks,
Josh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:25:07.253

I can confirm that this is a Google Maps issue and has nothing to do with the code I am using for CarouFredSel...I have tried several Google Map plugins for WordPress and the crazy scrolling happens regardless of the plugin.

So, here's what I did...instead of using the Google Maps plugin called: "MapPress", I am using the MapQuest plugin called: "MapQuest Map Builder for WordPress"

Now, on any post or page with a map the CarouFredSel code works without glitch or error :-)

Yay!

Thanks,
Josh

# wpf - WPF：在 RichTextBox 中获取行的确切大小

> ID：14776791
> 
> 赞同：0
> 
> 时间：2013-02-08T16:13:57.713
> 
> 标签：wpf, richtextbox

我想在 RichTextBox 的每一行上放置控件 - 类似这样：

```
---------------------------------
| Control1 | This is a multiline|
| Control2 | Richtextbox and I  |
| Control3 | want to place a    |
| Control4 | control excactly   |
| Control5 | beside each line.  |
--------------------------------- 
```

所以我想在每一行的左边放置一个控件。我想我必须找出每条线的实际高度并相应地放置控件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:29:33.350

以下代码将满足您的需求。请检查并让我知道如果不成功。

```
<RichTextBox >
            <RichTextBox.Template>
                <ControlTemplate>
                    <StackPanel>
                        <TextBlock Text="My Text on test" />
                        <TextBlock Text="My Text on test1" />
                    </StackPanel>
                </ControlTemplate>
            </RichTextBox.Template>
        </RichTextBox> 
```

我说要使用richtextbox控件模板来实现你的要求。在控件模板中，您可以设计任何应有的控件。我在 Stackpanel 中放置了两个文本框的示例。对于您的要求，如果我的猜测有效，以下更新的解决方案将为您提供帮助。

```
<RichTextBox >
            <RichTextBox.Template>
                <ControlTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"></ColumnDefinition>
                            <ColumnDefinition Width="100"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                    <StackPanel Grid.Column="0" Grid.Row="0">
                            <Button Content="Control1" Width="60"/>
                            <Button Content="Control2" Width="60"/>
                            <Button Content="Control3" Width="60"/>
                            <Button Content="Control4" Width="60"/>
                        </StackPanel>
                        <TextBlock Grid.Column="1" Grid.Row="0" TextWrapping="Wrap" FontSize="13" Text="This is a multiline Richtextbox and I want to place a  control excactly  beside each line.  " />
                    </Grid>
                </ControlTemplate>
            </RichTextBox.Template>
        </RichTextBox> 
```

# php - 通过 AJAX 从选择中自动更新文本

> ID：14776794
> 
> 赞同：0
> 
> 时间：2013-02-08T16:14:15.157
> 
> 标签：php, javascript, html, ajax

有谁知道如何让 ajax 从选择输入中更新文本。我的意思是，如果您选择（表单-> 输入）某些内容，它将更新/出现在 a`<span>`或其他内容中。

这就是我所拥有的：

```
 <?php
echo '<select name="test">';
      for ($i=0; $i <= 20; $i++) {
        echo '<option value="'.$i.'">'.$i.'</option>';
      }
echo "</select>";
     ?> 
```

并且在`<script>`：

```
 <script>
function upperCase()
{
var A = document.getElementById('test').value;
var B = document.getElementById('txtHint1').value;

C = A * B
document.getElementById('result').value = C; 
} 
    </script> 
```

我想在哪里展示它：

```
<span id="txtHint1" onchange="upperCase()"></span> 
```

我希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:26:56.320

我在您的原始问题中看到了几个错误。第一个在这里：

```
echo "<select name="test">; 
```

由于它是双引号字符串，因此您需要在 test 周围转义双引号，或将字符串括在单引号中。您还缺少结束语。应该是这样的：

```
echo '<select name="test">'; 
```

此外，与其将 onchange 事件绑定到要显示结果的位置，不如将其绑定到*更改*时希望 JavaScript 执行的元素。在这种情况下，这将是您的选择。现在我们要解决这个问题：

```
echo '<select name="test" onchange="upperCase()">'; 
```

这一行：`C = A * B`应该看起来更像：

```
var C = A * B; 
```

此外，您的代码正在尝试使用 ID 设置元素的值`result`。根据您的帖子，您似乎想将其更改为`txtHint1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:25:32.443

我假设这是你的场景：

*   用户从下拉框中选择一个选项
*   一旦他们选择了他们的选项，该选项的值乘以您的“txtHint1”跨度就会显示在“结果”跨度中

首先，您不需要 ajax 来执行此操作，只需要 JavaScript，我确定您的意思是。接下来，您不希望在您的 'txtHint1' 跨度上发生 onchange，因为那里没有什么可更改的。您希望 onchange 在您的“选择”元素上。您的代码非常接近。

```
function upperCase()
{
    var a = document.getElementById('test').value;
    var b = document.getElementById('txtHint1').value;
    var c = a * b;

    document.getElementById('result').value = c;
}

<select name="text" onchange="upperCase()">YOUR PHP CODE<select> 
```

我没有对此进行测试，但它应该可以工作。

# asp.net - 从另一台 PC 调用 Web 服务

> ID：14776795
> 
> 赞同：0
> 
> 时间：2013-02-08T16:14:16.280
> 
> 标签：asp.net, web-services, web-applications, iis-6

我有一个问题，您如何从另一台 PC 调用 Web 服务我在 Windows 7 中有一个使用 IIS 6.1 的 Web 服务，另一台 PC 在 Windows XP 中有一个 IIS 6，Web 服务使用 Web 应用程序在 localhost 中工作，唯一现在我正在尝试从另一台 PC 调用 Web 服务，但现在不知道该怎么做，我必须提到的一件事是我没有将 Visual Studio 用于我的 Web 服务和 Web 应用程序，我编写了所有文本块中的代码使用网络浏览器查看网络应用程序，所以问题是另一台电脑的网络应用程序也将写入文本块，但我现在什至不知道如何调用。

当我从同一台 PC 调用时，我使用了 Web 服务中的下一个代码，这是一个简单的示例：

```
<%@ WebService language="C#" class="FirstService" %>
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Xml.Serialization;
    using System.Web.Services;
    [WebService(Namespace="http://localhost/MyWebServices2/")]
    public class FirstService : WebService
        {

        [WebMethod]
    public double[][] Size(int X_1,int Y_1)
    {
        double [][] dime =  new double [X_1][];
        for (int r=0;r  < X_1; r++)
       {
        dime[r] = new double[Y_1];
        }
    return dime;
        }

       } 
```

Web 应用程序使用了以下代码：

```
<script runat="server">

    void loadFile_Click(Object sender, EventArgs e)
    {
        int x1=0,y1=0;
        x1= Convert.ToInt32(txtNum1.Text);
        y1= Convert.ToInt32(txtNum2.Text);
        FirstService mySvc = new FirstService();
        mySvc.Tamano(x1,y1);
        }
 </script> 
```

是否需要更改我的代码的某些部分？还是从另一台 PC 的 Web 应用程序中得到的所有更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:26:47.617

您需要在 Web 服务代理对象“mySvc”上设置“Url”属性以指向托管 Web 服务的机器上的端点。

例子 -`mySvc.Url = "http://machine:80//service...`

请参阅参考文档 -[代理参考](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soaphttpclientprotocol.aspx)

# ejb-3.0 - DATE_SUB 命名查询 MYSQL

> ID：14776801
> 
> 赞同：0
> 
> 时间：2013-02-08T16:14:38.047
> 
> 标签：ejb-3.0, named-query

有一个这样写的命名查询

```
select u from User u where u.creationdate < DATE_SUB(CURDATE(),INTERVAL :upperDate DAY) and status=:status and reminder_counter =:counter 
```

但我得到一个语法错误解析。

有什么想法吗？

磷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:34:23.660

您使用的函数`DATE_SUB`是 MySQL 特定的，导致解析错误。

*   创建一个命名的本机查询以使用`DATE_SUB`函数。
*   否则，可以显式计算持续时间然后设置参数。

# android - 当我在另一个活动中时，android如何启动主要活动

> ID：14776806
> 
> 赞同：1
> 
> 时间：2013-02-08T16:14:47.200
> 
> 标签：android, android-activity

我正在进行`signin`活动，如果用户单击一个按钮，我想开始主要活动。这是主要活动的主要活动`welcome`

```
<activity
            android:name=".Welcome"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

我试过这样

```
Intent welcomeIntent =new Intent("android.intent.action.MAIN");
        startActivity(welcomeIntent); 
```

但是我的屏幕上显示`complete acting using`了很多选择，请问解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:17:01.400

改变您的意图以直接启动您的课程

```
Intent welcomeIntent = new Intent(context, Welcome.class);
startActivity(welcomeIntent); 
```

如果您正在进行活动，请替换`context`为`this`

# android - 将图像发布到朋友墙 android 3.0

> ID：14776807
> 
> 赞同：0
> 
> 时间：2013-02-08T16:14:47.390
> 
> 标签：android, facebook, facebook-graph-api

将图像上传到朋友墙的过程，首先将图像上传到用户墙，然后获取图像ID和链接，

无法在朋友墙上发布图片，如果需要任何 fb 配置和 fb 权限，请建议我？

```
if (hasPublishPermission()) {

        RequestBatch requestBatch = new RequestBatch();

        for (GraphUser friend : selectedFriends) {

            Bundle parameters = new Bundle();
            Constants.showLog(TAG, String.valueOf(friend.getFirstName()));
            parameters.putString("message", "Greetings!!");
            parameters.putString("link", imagelink);
            parameters.putString("picture", imagelink);
            parameters.putString("target_id", friend.getId());

            requestBatch.add(new Request(Session.getActiveSession(), friend.getId() + "/feed", parameters,
                    HttpMethod.POST));

            Constants.showToast(this, "Posted picture on your friends wall");

        }

        requestBatch.addCallback(new Callback() {
            @Override
            public void onBatchCompleted(RequestBatch batch) {
                Constants.showLog(TAG, "Posted to :" + batch.size());
            }
        });

        Request.executeBatchAsync(requestBatch);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:21:10.040

在此处查看 2 月 6 日的重大更改[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)

即：“删除通过 Graph API 向朋友墙发帖的能力”。

您不再能够通过 Graph 请求直接在朋友的墙上发帖。您需要使用提要对话框。

# .net - 是否可以防止自动生成代码文件被赋予由预处理文本模板生成的命名空间

> ID：14776808
> 
> 赞同：1
> 
> 时间：2013-02-08T16:14:47.280
> 
> 标签：.net, code-generation, t4

编译 .tt 文件时，是否可以在指令中指定任何位置以防止将自动生成的代码文件放入 My.Templates 命名空间？

基本指令：

```
<#@ template language="VB"  #> 
```

文件后面自动生成的代码：

```
'------------------------------------------------------------------------------
'<auto-generated>
'    This code was generated by a tool.
'    Runtime Version: 10.0.0.0
' 
'    Changes to this file may cause incorrect behavior and will be lost if
'    the code is regenerated.
'</auto-generated>
'------------------------------------------------------------------------------
Namespace My.Templates
    <System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "10.0.0.0")>  _
    Partial Public Class DriverApplicationToLicensing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:57:12.490

您不能在指令中指定它，但是如果您在 IDE 中查看模板的属性，您应该会看到一个“自定义工具命名空间”选项，它可以完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-27T15:30:22.043

*   选择您的模板 (.tt) 和 cmd ALT+ENTER（右键单击和“属性”）。
*   在“高级”下，属性“自定义工具命名空间”，如果存在则删除该值
*   选择您的模板（.tt），右键单击并单击“运行自定义工具”

应该删除自动生成代码的每个命名空间。

# mysql - 在 MYSQL 中查询以显示某些帐户中的可用余额 + 5%

> ID：14776811
> 
> 赞同：0
> 
> 时间：2013-02-08T16:14:50.900
> 
> 标签：mysql

我需要这方面的帮助——昨天一整天都在尝试让它工作无济于事。如果添加了 5%，我需要编写一个查询来显示某些帐户的可用余额。

```
Update account
 set avail_balance = avail_balance*1.05
 where product_cd = 'CD';
Select avail_balance, product_cd
from account; 
```

我得到了可用的余额，但它显示了所有帐户，而不仅仅是那些具有 'CD 的 product_cd 的帐户。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:18:55.533

当您执行“更新”时，您实际上是在更新余额...如果添加了 5%，则要获得结果，您只需要

```
select a.AccountNumber,
      a.AnyOtherColumnsYouWantToShow,
      a.Avail_Balance * 1.05 as AvailPlus5Percent
   from
      Account a
   where
      a.Product_CD = 'CD'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:24:21.327

SELECT CONVERT(DECIMAL(10,2),a.Avail_Balance) * 1.05 as ConvertedValue FROM Account WHERE Product_CD = 'CD'

您不必将其转换为十进制。然而，你的问题有点不清楚。您要选择还是更新？

# java - 我应该为 Sprite 每帧设置新的 TextureRegion 吗？

> ID：14776816
> 
> 赞同：0
> 
> 时间：2013-02-08T16:15:08.420
> 
> 标签：java, animation, 2d, libgdx

Libgdx 的 Animation guide 现在处于 Deprecated 部分，我没有找到替代品。因此，我打算编写一个方便的`AnimatedSprite`类扩展`Sprite`。我的想法是在每次更新（游戏帧）中，我将设置新的 TextureRegion（或只是 X/Y 坐标）与其图像帧相对应。

我想知道为什么 Libgdx 没有内置的 AnimatedSprite 类？我的解决方案有问题吗？是否有任何替代已弃用的 Sprite 动画指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T07:17:25.463

您可以在每一帧安全地为 Sprite 设置一个新区域，如下所示：

```
sprite.setRegion(animation.getKeyFrame(stateTime, true)); 
```

# quickbooks - 如何设计一个好的 QuickBooks 集成解决方案

> ID：14776823
> 
> 赞同：1
> 
> 时间：2013-02-08T16:15:55.143
> 
> 标签：quickbooks, intuit-partner-platform, quickbooks-online

我现在已经使用了 QBO 和 QBD API，并且觉得我对它的思考方式以及如何与之交互有了相当的了解。所以现在是时候设计实际的集成解决方案了。

在我的应用程序中，您可以创建新客户、报价服务、执行服务，并很快将发票传递给 QuickBooks，听起来很简单。

但是，如果客户还没有在 QB 中呢？没问题 - 对于每张发票，我都会查找客户（无论如何都需要 id），如果它不存在，请添加它。但是，如果我必须为每张发票查找客户，它似乎可能会很慢。我可能有 30,000 名客户，每天有 500-3000 张发票。

所以我的问题是这样的；别人在做什么？

a) 您是否将每个客户的 QB id 存储在您的数据中？

b）您如何检测地址更改（在您的应用程序中更改并在 QB 中更改）？

c) 批量提交界面是不是要快得多我应该使用那个？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:06:35.087

我们经常将 QB id 存储在我们的数据库中以供使用。如果我们将发票发布到 QB 中，我们将存储 QB id 以供将来需要修改时使用。

至于检测客户记录和其他信息的变化，有几种方法可以解决冲突。一种是在您进行更改时保留时间戳。然后，您可以将其与 QB 记录上最后一次更改的时间戳进行比较，然后决定更新哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:08:38.193

FreddyMac，
要检测 Intuit 端的更改，您可以使用 CDCasOf 过滤器构建查询，该过滤器将仅返回自您提供的日期以来发生更改的数据。（从更改数据捕获开始）

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0015_Retrieving_Objects](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0015_Retrieving_Objects)

您需要跟踪您身边的数据更改。

批量提交并不是更快，只是更容易编写代码。IPP SDK 可以为您的 API 调用排队并聚合响应。

问候，
杰瑞德

# excel - VBA代码过滤一列然后填写另一列中可见单元格的公式

> ID：14776824
> 
> 赞同：3
> 
> 时间：2013-02-08T16:15:55.407
> 
> 标签：excel, vba, visible, cells

我对宏很陌生，但我正在尝试过滤列 AW，然后在列 AZ 中输入与该条件相对应的文本。当然，我想将该文本填写到可见单元格中，然后使用在 AZ 列中过滤的其他条件重复该过程。我正在使用下面的编码，但它没有填写 AZ 列，仅在 AZ2 中！我不希望标题受到影响。在这里感谢任何帮助！-艾米

```
Sub Macro16()

' Macro16 Macro

'Insert Column - OK
Columns("AZ:AZ").Select
Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
Range("AZ1").Select
ActiveCell.FormulaR1C1 = "Finalized Comment"
Rows("1:1").Select
Range("AS1").Activate
Selection.AutoFilter

'Filter Combined Comment for #NA then type "Style linked to a Dropped T/P"

 Dim lastRow As Long

 With ActiveSheet
    .Range("AW2").AutoFilter Field:=2, Criteria1:="#N/A"
    lastRow = .Range("AW" & Rows.Count).End(xlUp).Row
    .Range(.Range("AZ2"), .Range("AZ" & lastRow)). _
           SpecialCells(xlCellTypeVisible).Value = _
                     "Style Linked to a Dropped T/P"
 End With

'Filter Combined Comment for "Confirmed Cost and Missing HTS Code" then =Combined Comment

 Dim lastRow As Long

 With ActiveSheet
    .Range("AW2").AutoFilter Field:=2, Criteria1:="Confirmed Cost and Missing HTS Code"
    lastRow = .Range("AW" & Rows.Count).End(xlUp).Row
    .Range(.Range("AZ2"), .Range("AZ" & lastRow)). _
           SpecialCells(xlCellTypeVisible).Value = _
                     "Confirmed Cost and Missing HTS Code"
 End With

'Filter Combined Comment for "Unconfirmed Cost and HTS Code Present" then =Unconfirmed Cost

 Dim lastRow As Long

 With ActiveSheet
    .Range("AW2").AutoFilter Field:=2, Criteria1:="Unconfirmed Cost and HTS Code Present"
    lastRow = .Range("AW" & Rows.Count).End(xlUp).Row
    .Range(.Range("AZ2"), .Range("AZ" & lastRow)). _
           SpecialCells(xlCellTypeVisible).Value = _
                     "Unconfirmed Cost"
 End With

 'Filter Combined Comment for "Unconfirmed Cost and Missing HTS Code" then =Missing HTS

 Dim lastRow As Long

 With ActiveSheet
    .Range("AW2").AutoFilter Field:=2, Criteria1:="Unconfirmed Cost and Missing HTS Code"
    lastRow = .Range("AW" & Rows.Count).End(xlUp).Row
    .Range(.Range("AZ2"), .Range("AZ" & lastRow)). _
           SpecialCells(xlCellTypeVisible).Value = _
                     "Missing HTS Code"
 End With

 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:18:48.603

```
Sub Tester()
Dim lastRow As Long

    With ActiveSheet
        .Range("AW2").AutoFilter Field:=2, Criteria1:="Test"
        lastRow = .Range("AW" & Rows.Count).End(xlUp).Row
        .Range(.Range("AZ2"), .Range("AZ" & lastRow)). _
               SpecialCells(xlCellTypeVisible).Value = _
                         "Style Linked to a Dropped T/P"
    End With

End Sub 
```

**编辑：**更新和修改了一下......

```
Sub Macro16()

Dim lastRow As Long

    'Insert Column - OK
    ActiveSheet.Columns("AZ:AZ").Insert Shift:=xlToRight, _
                       CopyOrigin:=xlFormatFromLeftOrAbove
    Range("AZ1").Value = "Finalized Comment"

    TagRows "#N/A", "Style Linked to a Dropped T/P"
    TagRows "Confirmed Cost and Missing HTS Code", _
            "Confirmed Cost and Missing HTS Code"
    TagRows "Unconfirmed Cost and HTS Code Present", "Unconfirmed Cost"
    TagRows "Unconfirmed Cost and Missing HTS Code", "Missing HTS Code"

End Sub

Sub TagRows(TextToFind As String, TagWithText As String)
    Dim lastRow As Long
    With ActiveSheet
        'filter the column for "TextToFind"
        .Range("AW:AW").AutoFilter Field:=1, Criteria1:=TextToFind
        'find the last row
        lastRow = .Range("AW" & Rows.Count).End(xlUp).Row
        'if any visible rows, fill in the new comment "TagWithText"
        If lastRow > 2 Then
            .Range(.Range("AZ2"), .Range("AZ" & lastRow)). _
               SpecialCells(xlCellTypeVisible).Value = TagWithText
        End If
        .Range("AW:AW").AutoFilter Field:=1 'clear the filter
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T18:40:22.333

解构[Range.AutoFilter 方法](https://msdn.microsoft.com/en-us/library/office/ff193884.aspx)并严格在内存数组中进行处理应该可以加快这个过程。

```
Option Explicit

Sub tagAZ()
    Dim t As Variant, vFNDs As Variant, vTAGs As Variant
    Dim a As Long, vAWs As Variant, vAZs As Variant

    appTGGL bTGGL:=False

    vFNDs = Array("#N/A", "Confirmed Cost and Missing HTS Code", _
                  "Unconfirmed Cost and HTS Code Present", _
                  "Unconfirmed Cost and Missing HTS Code")
    vTAGs = Array("Style Linked to a Dropped T/P", "Confirmed Cost and Missing HTS Code", _
                  "Unconfirmed Cost", "Missing HTS Code")

    With Worksheets("Sheet1")
        .Columns(52).Insert
        .Cells(1, 52) = "tag comment"
        .Columns(52).ColumnWidth = 32
        With .Range(.Cells(2, 49), .Cells(Rows.Count, 49).End(xlUp))
            vAWs = .Cells.Value2
            ReDim vAZs(LBound(vAWs, 1) To UBound(vAWs, 1), 1 To 1)

            For a = LBound(vAWs, 1) To UBound(vAWs, 1)
                Select Case True
                    'catch True errors
                    Case IsError(vAWs(a, 1))
                        If vAWs(a, 1) = CVErr(xlErrNA) Then _
                            vAZs(a, 1) = vTAGs(0)
                    'catch text-that-looks-like-an-error
                    Case vAWs(a, 1) = vFNDs(0)
                        vAZs(a, 1) = vTAGs(0)
                    'catch the rest
                    Case vAWs(a, 1) = vFNDs(1)
                        vAZs(a, 1) = vTAGs(1)
                    Case vAWs(a, 1) = vFNDs(2)
                        vAZs(a, 1) = vTAGs(2)
                    Case vAWs(a, 1) = vFNDs(3)
                        vAZs(a, 1) = vTAGs(3)
                End Select
            Next a

        End With

        'return processed tag comments to the worksheet
        .Cells(2, 52).Resize(UBound(vAZs, 1), UBound(vAZs, 2)) = vAZs
    End With

    appTGGL

End Sub

Public Sub appTGGL(Optional bTGGL As Boolean = True)
    Debug.Print Timer
    With Application
        .ScreenUpdating = bTGGL
        .EnableEvents = bTGGL
        .DisplayAlerts = bTGGL
        .Calculation = IIf(bTGGL, xlCalculationAutomatic, xlCalculationManual)
    End With
End Sub 
```

> ^(250K 行随机数据的经过时间，其中 AW 列中 75% 的值会找到匹配项：2.06 秒。) [通过循环的[.AutoFilter 方法](https://msdn.microsoft.com/en-us/library/office/ff193884.aspx)等效（禁用相同的环境属性）运行相同的数据需要 24.25 秒。]

# backbone.js - 骨干视图未附加到集合更改

> ID：14776826
> 
> 赞同：0
> 
> 时间：2013-02-08T16:15:57.050
> 
> 标签：backbone.js, backbone-views, backbone-events

我有一个文本输入，用于从用户那里收集关键字，然后发送一个 ajax 请求（获得成功的结果）。我想附加项目`<ul>`，`<li>`每个项目代表一个结果。

这是包含搜索输入并应获得附加`<li>`结果的内容。

```
<div class="search_group pull-right">   
    <h5><a href="javascript:void(0);" class="show-groups">Find Other Groups<span class="caret"></span></a></h5>
    <ul>
        <li class="search-input">
            <input type="text" class="search" name="search">
        </li>
    </ul>
</div> 
```

我有以下下划线模板，它可以理想地代表集合中的每个结果。

```
<script type="text/template" class="template" id="template-search-result">
    <% _.each(results,function(result){ %>
        <li class="result">
            <a href="/surnames/<%=URL%>">
                <%=result.name%>
                <span><%=result.members%> &ndash; Members</span>
                <span><%=result.ancestors%> &ndash; Ancestors</span>
            </a>
        </li>
    <% }); %>
</script> 
```

现在，我的主干代码。

在用户在输入字段中输入内容后，我获取了我的结果集合，并且当该集合从我的服务器返回结果（我可以在控制台中成功看到）时，我希望 ResultView 将 ul 附加到额外的 li 结果。

```
window.Results = Backbone.Collection.extend({

    url: function() {
        return '/ajax/groups/search?q=' + query;
    }

});

var results = new Results();

window.SearchInput = Backbone.View.extend({
    el: ".search-input input",
    events: {
        "change": "getResults",
        "keyup": "getResults",
        "keydown": "getResults",
        "paste": "getResults"
    },
    getResults: function() {
        query = $('input').val();
        results.fetch();
    }
});

var searchInput = new SearchInput({ collection: results });

window.ResultView = Backbone.View.extend({

    el: ".search-group ul",
    initialize: function() {
        _.bindAll(this, 'render');
        this.collection.bind('change', this.render);
        this.template = _.template($("#template-search-result").html());
    },
    render: function() {
        this.$el.append( this.template( {results: this.collection.toJSON()} ));
        return this;
    }
});

var resultView = new ResultView({ collection: results }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:31:43.490

您正在寻找`add`或`reset`事件，这取决于您加载收藏的方式。

如果你在做一个`fetch`，你会想听`reset`。如果您手动将模型添加到集合中，或者调用`fetch({update:true})`，您将获得 `add`事件。

`change`仅当集合的模型之一触发`change`它自己的模型时，集合事件才会触发。

这是[所有内置 Backbone 事件的列表以](http://backbonejs.org/#Events-catalog)供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:28:15.467

而不是在我的 ResultView 中将“el”定义为：

```
el: ".search-group ul", 
```

我将其更改为 id 并相应地修改了我的标记：

```
el: "#result-list", 
```

和：

```
<ul id="result-list">
    <li class="search-input">
        <input type="text" class="search" name="search">
    </li>
</ul> 
```

# eclipse - 调试模式下 JBoss AS 7.1.0 的启动极慢

> ID：14776827
> 
> 赞同：3
> 
> 时间：2013-02-08T16:16:05.520
> 
> 标签：eclipse, debugging, jboss7.x

我正在使用带有 JBoss 工具、m2e 插件等的 Eclipse Juno 来使用 JBoss AS。当我正常启动服务器（非调试）时，一切都部署得非常快，但是当我以调试模式（通过“服务器”选项卡）启动 JBoss AS 7.1.0 时，部署非常缓慢。

它是一个 JSF 2.0 .war（带有 RichFaces 插件）。

如果我手动（通过 JAVA_OPTS）以调试模式启动 JBoss，一切正常。

你们中有人知道任何故障排除吗？

这是控制台输出： http: [//pastebin.com/7GfDCTMw](http://pastebin.com/7GfDCTMw) 查看第 53 行和第 54 行之间的延迟

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-22T12:11:04.970

删除代码中的所有断点并在调试模式下启动 jboss，而不是在 jboss 以调试模式启动后将调试点添加到代码中。

# javascript - 当媒体查询改变时销毁一个 Jquery 函数

> ID：14776832
> 
> 赞同：1
> 
> 时间：2013-02-08T16:16:11.600
> 
> 标签：javascript, jquery, media-queries, enquire.js

希望你能帮助我。

我在论坛上搜索过，我猜这个是一个特例。

我正在构建的项目由媒体查询（响应式）提供支持，我有 3 列，有时需要 4 列处于**相等的高度**。我在 Jquery 中开发了一个脚本，效果很好。见下文

```
var maxHeight = 0;
function setHeight(column) {
    $(window).load(function () {
        column = $(column);
        column.each(function () {
            if ($(this).height() > maxHeight) {
                maxHeight = $(this).height();
            }
        });

        column.height(maxHeight);
    });
}

setHeight('.package-container .package-3'); 
```

但是当我要移动版本时，**低于 767px**，我如何在不刷新页面的情况下**销毁**这个**setHeight()函数。**

其他替代方法，我可以在下面使用 enquire.js、javascript 媒体查询来执行此操作，但如果我直接从桌面/平板电脑转到移动设备，则无需刷新就无法使其工作。像下面这样

```
enquire.register("(max-width:767px)", {
    match : function() {
        setHeight(null);
    }
}).listen(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:05:01.503

这是我在移动优先方法中要做的事情，您无需担心“破坏”任何简单地将高度设置为自动的东西：

```
enquire.register("screen and (min-width : 768px)", {
    match : function() {
        // set equal height for columns
        setHeight('.package-container .package-3');
    },
    unmatch : function() {
        // set auto height
        $('.package-container .package-3').height("auto");
    }
}).listen(); 
```

# javascript - Javascript查找字符串是否以正斜杠终止

> ID：14776834
> 
> 赞同：13
> 
> 时间：2013-02-08T16:16:13.210
> 
> 标签：javascript, jquery, string

如果我将字符串加载到变量中，确定字符串是否以“/”正斜杠结尾的合适方法是什么？

```
var myString = jQuery("#myAnchorElement").attr("href"); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T16:19:46.267

正则表达式有效，但如果你想避免整个神秘的语法，这里应该工作：[javascript/jquery add trailing slash to url (if not present)](https://stackoverflow.com/questions/11531363/javascript-jquery-add-trailing-slash-to-url-if-not-present)

```
var lastChar = url.substr(-1); // Selects the last character
if (lastChar !== '/') {         // If the last character is not a slash
   ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T16:17:58.040

使用`regex`和做：

```
myString.match(/\/$/) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:19:04.050

一个简单的解决方案是通过以下方式检查最后一个字符：

```
var endsInForwardSlash = myString[myString.length - 1] === "/"; 
```

编辑：请记住，您需要首先检查字符串是否为空，以免引发异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T16:19:34.567

您可以使用 substring 和 lastIndexOf：

```
var value = url.substring(url.lastIndexOf('/') + 1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T16:26:19.957

你不需要 JQuery。

```
function endsWith(s,c){
    if(typeof s === "undefined") return false;
    if(typeof c === "undefined") return false;

    if(c.length === 0) return true;
    if(s.length === 0) return false;
    return (s.slice(-1) === c);
}

endsWith('test','/'); //false
endsWith('test',''); // true
endsWith('test/','/'); //true 
```

你也可以写一个原型

```
String.prototype.endsWith = function(pattern) {
    if(typeof pattern === "undefined") return false;
    if(pattern.length === 0) return true;
    if(this.length === 0) return false;
    return (this.slice(-1) === pattern);
};

"test/".endsWith('/'); //true 
```

# c# - 绑定到从 CollectionBase 派生的类的属性

> ID：14776835
> 
> 赞同：1
> 
> 时间：2013-02-08T16:16:17.323
> 
> 标签：c#, winforms, data-binding, exception-handling, collectionbase

我正在尝试将一些控件绑定到一个对象——这通常是一个非常简单的过程。不幸的是，如果我绑定到的对象继承自 CollectionBase，绑定到该类字段会导致错误：

> 无法绑定到 DataSource 上的属性或列 Caption。参数名称：dataMember

删除 collectionbase 继承使这个问题消失，但我需要这个对象是一个集合。似乎 CollectionBase 导致更高级别的属性变得“不可绑定”。是否有一些我可以覆盖的属性来解决这个问题？还有其他想法吗？

我在网上找到了这个例子，很容易总结了这个问题。不幸的是，我还没有在我看到这个例子的所有地方找到答案。

代码：

```
[STAThread]
static void Main()
{
    TestCollection obj = new TestCollection();
    using (Form f = new Form())
    using (BindingSource bs = new BindingSource())
    {
        bs.DataSource = typeof(Test);
        f.DataBindings.Add("Text", bs, "Caption");
        bs.DataSource = obj; // breaks

        //List<TestallData = new List<Test>();
        //allData.Add(obj);
        //bs.DataSource = allData;
        f.ShowDialog();
    }
}

class TestCollection : CollectionBase
{
    public string Caption { get { return "Working"; } }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:12:33.643

`CollectionBase`为对象列表提供接口，因此当用作数据源时，绑定尝试在列表中查找各个绑定数据。当没有列表时，您就有问题了。

如果你想要一个标题并且你想使用`CollectionBase`你应该有2个类，而不仅仅是一个。

```
public class TestObj
{
    public string caption { get { return "yay"; } }
}

public class TestCol : CollectionBase
{
    //methods that implement CollectionBase for the TestObj type
} 
```

与这两个你可以绑定两种方式之一。

```
TestObj obj = new TestObj();
TestCol col = new TestCol();
col.Add(obj);

//bind to obj, OR bind to col.  Both would work with this setup. 
```

[http://msdn.microsoft.com/en-us/library/system.collections.collectionbase%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.collections.collectionbase%28v=vs.90%29.aspx)

那里有一个示例实现`CollectionBase`。

**更新：根据评论编辑**

我个人知道没有任何方法可以让您绑定到集合的外部属性。作为一种解决方法，您可以使用 3 类系统（是的，我知道，越来越复杂）。

```
public class TestHeader
{
    public string Data {get;set;}
}

public class TestCol : CollectionBase
{
    //...
}

public class TestObj
{
    public TestHeader header {get;set;}
    public TestCol col {get;set;}
} 
```

将外部字段`TestObj.header`绑定到 并将集合字段绑定到`TestObj.col`. 这是一种解决方法，但如前所述，我实际上并不知道直接实现您想要的东西的方法。我希望我这样做了，我自己的代码的某些部分可以从中受益。

**另一个例子**

你也可以用两个类来做，但你仍然需要嵌套集合本身

```
public class TestObj
{
    public string data {get;set;}
    public TestCol col {get;set;}
} 
```

在这种情况下，将单个数据字段绑定到`TestObj`，并将集合字段绑定到`TestObj.col`

# javascript - 网页键盘输入

> ID：14776837
> 
> 赞同：0
> 
> 时间：2013-02-08T16:16:25.237
> 
> 标签：javascript, jquery, html

我正在寻找一种使用 javascript 在 html5 游戏中实现用户输入的好方法。我已经将这个使用 jQuery 的 keyup 和 keydown 绑定的简单示例放在一起：

```
function Keys() {
    var keys = {};
    this.keys = keys;
    $(document).keydown(
        function (event) {
            keys[event.which] = true;
        });

    $(document).keyup(
        function (event) {
            delete keys[event.which];
        });
}

var keys = new Keys(); 
```

[http://jsfiddle.net/jackgeek/ANZds/1/embedded/result/](http://jsfiddle.net/jackgeek/ANZds/1/embedded/result/) （浏览到上面并一次按几个键）

如果您尝试该示例，您会发现它一次最多只能跟踪 5-6 个键，如果您一次按下一堆键，它不会响应。这在视频游戏中并不理想！

是否有更可靠/更好的方法来使用 html5 和 javascript 跟踪按键？

# java - 我无法覆盖 Tomcat 的默认欢迎文件列表

> ID：14776838
> 
> 赞同：0
> 
> 时间：2013-02-08T16:16:25.610
> 
> 标签：java, jsp, tomcat, tomcat7

我正在尝试覆盖 Tomcat（版本 7）的默认欢迎文件列表，正如其 conf/web.xml 通过以下列形式声明“欢迎文件列表”标签所建议的那样

```
<welcome-file-list>
        <welcome-file>estore.html</welcome-file>
        <welcome-file>estore.htm</welcome-file>
        <welcome-file>estore.jsp</welcome-file>
</welcome-file-list> 
```

在我的应用程序的 web.xml 中，但我收到这样的错误：

> HTTP 状态 500 - java.lang.ClassNotFoundException: org.apache.jsp.estore_jsp

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:36:41.777

我会试试这个：

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

1.  在您的 web.xml 中添加上述代码段

2.  然后在 index.html 中，我会使用一个`<link />`标签来转发到我想要的登录页面，即在您的情况下为 estore.html。

这应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-29T16:42:28.063

Tomcat 默认部署描述符文件位于 TOMCAT_HOME/conf/web.xml 中。在那里，您会发现标签的默认描述为：

```
<welcome-file-list>
      <welcome-file>index.html</welcome-file>
      <welcome-file>index.htm</welcome-file>
      <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

缩进 <!-- --> 上面的代码并保存 /conf/web.xml 文件。现在放置您的代码

```
 <welcome-file-list>
        <welcome-file>estore.html</welcome-file>
        <welcome-file>estore.htm</welcome-file>
        <welcome-file>estore.jsp</welcome-file>
 </welcome-file-list> 
```

在项目的 WEB-INF/web.xml 中并重新启动 tomcat 服务器，您将得到结果。

# google-apps-script - 将文件添加到文件夹时，如何使其不默认保存在 Google Drive 中？

> ID：14776839
> 
> 赞同：0
> 
> 时间：2013-02-08T16:16:25.877
> 
> 标签：google-apps-script

在我的脚本中，我在主驱动器中有模板文档，但是当创建副本并使用我的 excel 数据填充时，我希望它保存在驱动器中的文件夹中。我有脚本这样做，但它在主 Google Drive 中有一个文件副本，另一个在我想要的文件夹中。如果我删除其中一个副本，它会同时删除这两个副本。

有什么办法可以让它自动保存在指定的文件夹中，而不是在主驱动器文件夹中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:42:31.657

Google 驱动器中的文件夹与计算机中的文件夹并不完全相同：将文件放在“根”文件夹和另一个文件夹中并不意味着有 2 个文件，而是 1 个且只有 2 个标签的文件......这就是为什么你不能删除一个而不删除另一个！

解决方案只是在脚本中使用这些标签，这是它的工作原理：（我评论了每个步骤以使其清楚。）

```
function othertest(){
folder=DocsList.createFolder("MyFolder"); // or getFolderById or whatever other way to get your target folder
var file=DocsList.createFile('File2', 'Empty');// just an empty file for test but this would be your file copy that you want to "move"
file.addToFolder(folder);// put it in the folder
file.removeFromFolder(DocsList.getRootFolder());// and remove from the root
} 
```

另一个可能的解决方案是直接在目标文件夹中创建文件，因为文件夹对象支持该`createFile`方法。（不确定您是否可以在特定用例中做到这一点）

这是一个示例，您可以看到该文件不在根文件夹中。

```
function createFileinFoldertest() {
   var folder = DocsList.getFolder('test')
   folder.createFile('Empty test fileName','nothing in there')
} 
```

# c# - HtmlAgilityPack：如何检查元素是否可见？

> ID：14776840
> 
> 赞同：3
> 
> 时间：2013-02-08T16:16:26.497
> 
> 标签：c#, html-agility-pack

我正在做一些 HTML 解析，我正在使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，我正在尝试检查如果在浏览器中呈现 html，节点元素是否可见。

通过可见，我可能对检查`display`和`visibility`样式值感到满意。（除非有什么额外的事情我应该担心？）。

那么，我该怎么做呢？有没有简单的方法？我可以使用一些 XPath 魔法吗？（目前我对 XPath 的了解不多）。

我曾考虑过手动解析样式值，但宁愿将其保存为最后的手段。或者这是我唯一的选择？

仅供参考，我正在使用的对象是这样的：

```
HtmlAgilityPack.HtmlNode node = GetNode(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:55:28.567

好的，所以我已经设法做到了，至少满足我的需要。但是请注意，正如其他评论所说，这不允许您检查最终用户是否可以看到元素（在屏幕上）。

我采用的方法简单检查了一些基本规则：如果元素的样式属性包含`display:none`or ，则元素“不可见” `visibility:hidden`，或者祖先元素具有相同的样式规则。

考虑到这一点，这是为我完成这项工作的代码：

```
private static bool IsNodeVisible(HtmlAgilityPack.HtmlNode node)
{
    var attribute = node.Attributes["style"];

    bool thisVisible = false;

    if (attribute == null || CheckStyleVisibility(attribute.Value))
        thisVisible = true;

    if (thisVisible && node.ParentNode != null)
        return IsNodeVisible(node.ParentNode);

    return thisVisible;
}

private static bool CheckStyleVisibility(string style)
{
    if (string.IsNullOrWhiteSpace(style))
        return true;

    var keys = ParseHtmlStyleString(style);

    if (keys.Keys.Contains("display"))
    {
        string display = keys["display"];
        if (display != null && display == "none")
            return false;
    }

    if (keys.Keys.Contains("visibility"))
    {
        string visibility = keys["visibility"];
        if (visibility != null && visibility == "hidden")
            return false;
    }

    return true;
}

public static Dictionary<string, string> ParseHtmlStyleString(string style)
{
    Dictionary<string, string> result = new Dictionary<string, string>();

    style = style.Replace(" ", "").ToLowerInvariant();

    string[] settings = style.Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries);

    foreach (string s in settings)
    {
        if (!s.Contains(':'))
            continue;
        string[] data = s.Split(':');
        result.Add(data[0], data[1]);
    }

    return result;
} 
```

入口点是`IsNodeVisible`并将检查`HtmlNode`传递给它的可见性。

# php - 迭代数组而不递归

> ID：14776841
> 
> 赞同：-5
> 
> 时间：2013-02-08T16:16:26.943
> 
> 标签：php, arrays, multidimensional-array

我正在寻找和尝试几天......对不起！我有一个像下面这样的数组。它是订购的，但我可能不知道它有多深。我需要遍历它，每个子节点。我不想使用递归，因为我需要将它集成到另一个代码块中，这对我自己来说会很困难。我正在寻找像foreach这样简单的东西，但这只会给我3个父节点......我需要将每个节点放在一个“块”中，因为我需要像`$arr['id_categoria']`and`$arr['nome_categoria']`等那样访问它们

有什么建议吗？多谢！

```
Array
(
    [3] => Array
        (
            [id_categoria] => 3
            [nome_categoria] => Bebidas
            [id_categoria_pai] => 0
            [submenu] => Array
                (
                    [5] => Array
                        (
                            [id_categoria] => 5
                            [nome_categoria] => Alcoolicas
                            [id_categoria_pai] => 3
                            [submenu] => Array
                                (
                                    [10] => Array
                                        (
                                            [id_categoria] => 10
                                            [nome_categoria] => Espirituosas
                                            [id_categoria_pai] => 5
                                            [submenu] => Array
                                                (
                                                )

                                        )

                                )

                        )

                    [11] => Array
                        (
                            [id_categoria] => 11
                            [nome_categoria] => sem alcool
                            [id_categoria_pai] => 3
                            [submenu] => Array
                                (
                                )

                        )

                )

        )

    [4] => Array
        (
            [id_categoria] => 4
            [nome_categoria] => Sandes
            [id_categoria_pai] => 0
            [submenu] => Array
                (
                )

        )

    [7] => Array
        (
            [id_categoria] => 7
            [nome_categoria] => Outros pedidos
            [id_categoria_pai] => 0
            [submenu] => Array
                (
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:20:18.403

为此，您必须使用递归，因为您不知道它有多深。

但是，您可以创建一个递归函数来提取数组中的所有单个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:29:37.050

递归？您不需要（显式）递归！只需使用 a [`RecursiveArrayIterator`](http://www.php.net/manual/en/class.recursivearrayiterator.php)，将其包装在 a[`RecursiveIteratorIterator`](http://www.php.net/manual/en/class.recursiveiteratoriterator.php)中并进行迭代，如下所示：

```
$array = array(); // From the OP

$iter = new RecursiveIteratorIterator( new RecursiveArrayIterator( $array), RecursiveIteratorIterator::SELF_FIRST); 

foreach( $iter as $el) {
    echo $el['id_categoria'];
} 
```

对于您的数组，这将打印：

```
3 
5
10 
11 
etc. 
```

完毕！

# ruby-on-rails - 在 Sunspot for Solr 的可搜索块中创建灵活的属性名称

> ID：14776844
> 
> 赞同：1
> 
> 时间：2013-02-08T16:16:34.330
> 
> 标签：ruby-on-rails, solr, sunspot

在我的可搜索块中，我有很多这样的值：

```
string :id 
```

我怎样才能有问题地动态创建索引属性（此处为 id）？假设我想为当前年份创建一个属性，例如：

```
string :<year> 
```

这在太阳黑子中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:48:17.613

您可以传递块而不是值..例如

`string { (self.year + 2).to_s}`

# python - 依赖 python 的 with...as 语句是一种好习惯吗

> ID：14776853
> 
> 赞同：14
> 
> 时间：2013-02-08T16:16:57.827
> 
> 标签：python, with-statement, contextmanager

我很好奇依赖 python 的 with...as 语句是否被认为是安全或良好的做法。例如打开文件时：

```
with open("myfile","w") as myFile:
    #do something 
```

所以在这个例子中我忽略了显式调用`myFile.close()`但是我可以假设它是在 python通过调用 objects方法退出`with...as`语句时调用的。`__exit__()`依赖这个是好的做法/安全吗，还是总是明确地调用会更好`file.close()`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T16:18:34.250

这就是上下文管理器的*用途*，依靠*它们*为您关闭文件。即使出现异常，也会调用上下文管理器。

另一种方法是使用`finally`块代替：

```
myFile = open("myfile","w")
try:
    # do something with myFile
finally:
    myFile.close() 
```

但是因为里面的块`try:`可能很长，当你到达`finally`语句时，你已经忘记了你设置它的目的。

上下文管理器仍然更强大。因为该`__exit__`方法被告知任何异常，它们也可以充当异常处理程序（忽略异常，引发另一个异常等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T16:31:32.390

是的，`with`声明是更好的方式。从 Python 2.5 开始，文件对象已经配备了`__enter__()`和`__exit__()`方法。该`__exit__()`方法关闭文件对象。

Python 保证它会调用该`__exit__()`方法，但不保证该`__exit__()`方法会关闭资源，尤其是使用 3rd 方代码。您需要手动验证。

# iphone - .dylib 移动基板调整不起作用

> ID：14776857
> 
> 赞同：1
> 
> 时间：2013-02-08T16:17:01.790
> 
> 标签：iphone, ios5, jailbreak, tweak, cydia-substrate

当我遇到一个包含源代码的教程时，我正在学习如何调整移动基板。为了进一步了解它，我决定测试一下

代码：

```
 %hook SBApplicationIcon
  -(void)launch
  {
  NSString *appName = [self displayName];
  NSString *message = [NSString stringWithFormat:@"The app %@ has been launched, lol", appName, nil];
  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:appName message:message delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
  [alert show];
  [alert release];
  %orig;
  }
  %end 
```

我在我的IOS手机上使用了theos并进行了调整并将此代码粘贴到“tweak.xm”
中，我去了“makefile”并添加了

```
test_FRAMEWORKS = UIKit 
```

如果你想知道我的 test.plist 中有什么，这里就是

```
com.apple.springboard 
```

接下来我去了移动终端并做了这个

```
su
alpine
cd test
make 
```

然后你复制了theos制作的.dylib和“test.plist”文件并将其粘贴到/Library/MobileSubstrate/DynamicLibraries

之后我重新启动我的设备并尝试启动一个应用程序，但没有任何反应。一切正常启动。请在这里帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:48:59.230

在谷歌上搜索了很长时间后，我终于让它工作了

我去移动终端...并登录。之后我做了这个

```
installsdk3 
```

然后我去了我的 Makefile 并将其更改为这个

```
SDKVERSION = 3

include theos/makefiles/common.mk

TWEAK_NAME = test
test_FILES = Tweak.xm
test_FRAMEWORKS = UIKit Foundation

include $(THEOS_MAKE_PATH)/tweak.mk 
```

我又重新做了调整，它奏效了！

# php - Xpath 和 facebook api

> ID：14776859
> 
> 赞同：2
> 
> 时间：2013-02-08T16:17:29.587
> 
> 标签：php, facebook, api, xpath, xml-namespaces

我尝试从返回此 XML[的 facebook API 解析结果：](http://api.facebook.com/restserver.php?method=links.getStats&urls=http://www.facebook.com)

```
<links_getStats_response xmlns="http://api.facebook.com/1.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://api.facebook.com/1.0/ http://api.facebook.com/1.0/facebook.xsd" list="true">
  <link_stat>
    <url>http://www.facebook.com</url>
    <normalized_url>http://www.facebook.com/</normalized_url>
    <share_count>1624678</share_count>
    <like_count>928267</like_count>
    <comment_count>150197</comment_count>
    <total_count>2703142</total_count>
    <click_count>949</click_count>
    <comments_fbid>405613579725</comments_fbid>
    <commentsbox_count>2328</commentsbox_count>
  </link_stat>
</links_getStats_response> 
```

我想获得 Facebook 喜欢的数量。

这是我的代码：

```
$apiFacebook="http://api.facebook.com/restserver.php?method=links.getStats&urls=http://www.facebook.com";
$parse = simplexml_load_file($apiFacebook);
$count = $parse->xpath("/links_getStats_response/link_stat/like_count");
print_r($count); 
```

路径有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:33:54.167

您的结果中有命名空间。要么定义并使用它们，要么使用通配符代替命名空间：

```
/*:links_getStats_response/*:link_stat/*:like_count 
```

要注册和使用命名空间，请执行以下操作：

```
$parse = simplexml_load_file($apiFacebook);
$parse->registerXPathNamespace('fb', 'http://api.facebook.com/1.0/');
$count = $parse->xpath("/fb:links_getStats_response/fb:link_stat/fb:like_count"); 
```

字符串“fb”可以任意选择。

# h2 - 如何在服务器模式下启动 H2？

> ID：14776862
> 
> 赞同：2
> 
> 时间：2013-02-08T16:17:31.160
> 
> 标签：h2

我正在尝试在 H2 数据库上开发一些应用程序，但问题是我无法同时运行 JDBC 查询和使用数据库的 Web 界面。异常日志如下所示：

```
org.h2.jdbc.JdbcSQLException: Database may be already in use: "Locked by another process". Possible solutions: close all other connection(s); use the server mode [90020-169]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146) 
```

在 H2 启动时，我选择了服务器模式，但这无济于事。图片如下 [http://gyazo.com/1c59fe77bf29e2061da1a0894e18a471](http://gyazo.com/1c59fe77bf29e2061da1a0894e18a471)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:31:22.000

我找到了，完成它需要 2 个步骤：将字符串“;AUTO_SERVER=TRUE”添加到应用程序和服务器 Web 表单中的 jdbc 字符串。

我使用测试数据库的字符串是：“jdbc:h2:~/test;AUTO_SERVER=TRUE”

# c# - Panel -- ScrollBars 可见事件

> ID：14776863
> 
> 赞同：2
> 
> 时间：2013-02-08T16:17:31.987
> 
> 标签：c#, .net, vb.net, winforms

我可能正在寻找错误的问题，但我无法找到答案。

我有一个将 AutoScroll 设置为 true 的面板。控件被动态添加到面板中。当滚动条变得可见时，我需要触发一个事件，但我找不到这样的事件。

任何建议表示赞赏。

更多细节：

*   这是一个 WinForms 项目。
*   面板是一个面板，System.Windows.Forms.Panel。
*   面板可见。
*   自动滚动设置为真。
*   当 AutoScroll 使滚动条可见时，我想执行一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:56:55.577

感谢@MUG4N 对原始问题的评论，这是解决方案。我目前的项目在 VB.Net 中，解决方案也是如此。

canvas 是面板的名称。

```
Private Sub canvas_Paint(sender As Object, e As PaintEventArgs) Handles canvas.Paint
     If Me.canvas.VerticalScroll.Visible Then
          ' Do stuff here
     End If
End Sub 
```

要检查水平滚动，请使用`Me.canvas.HorizontalScroll.Visible`

**重要的**

确保进行一些检查以避免无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:39:28.147

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Int32 x = 20;
        Int32 y = 20;
        for (Int32 i = 0; i < 20; i++)
        {
            Button btn = new Button();
            btn.Name = "btn" + i.ToString();
            btn.Location = new Point(x, y);
            x = x + 20;
            panel1.Controls.Add(btn);
        }
        //call(1, new List<long> { 1, 2, 3, 4 });
    }
    private void **panel1_Scroll**(object sender, ScrollEventArgs e)
    {
        MessageBox.Show("scroll");
    }

 panel control have its own method "Scroll" see events of panel control and find the "Scroll".... 
```

# string - Crystal Reports：公式无法显示为整数

> ID：14776868
> 
> 赞同：0
> 
> 时间：2013-02-08T16:17:34.097
> 
> 标签：string, crystal-reports, concatenation, formula, inventory-management

我正在使用以下公式：

```
If {USAGE.CURFY} = 0 
then "" 
else {USAGE.CURFY} & " (" & ({USAGE.CURFY_DAYSREMAINING} * 
{USAGE.USEDPERDAY})+{USAGE.CURFY} & ")" 
```

我很难将数字显示为整数的公式。我不断得到两位小数。我可以使用文件、选项、字段、数字将其显示为整数...但是当我将其上传到我们的 Crystal Server 时，两位小数会再次显示。

所以，我的印象是我需要在公式内四舍五入。

USED​​PERDAY 和 CURFY_DAYSREMAINING 是具有十进制值的字段。CURFY 是一个整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:24:14.337

您需要将数字转换为字符串：

```
if {USAGE.CURFY} = 0 then "" 
else totext({USAGE.CURFY},0) 
 & " (" & totext({USAGE.CURFY_DAYSREMAINING} * {USAGE.USEDPERDAY} + {USAGE.CURFY},0) & ")" 
```

第二个参数`totext()`指定小数位数。

# javascript - 在一个应用程序中同时使用 ExtJs 和 JQuery？

> ID：14776874
> 
> 赞同：4
> 
> 时间：2013-02-08T16:17:58.450
> 
> 标签：javascript, jquery, extjs, extjs2

我们有一个大的 ExtJS（仍然是 ExtJs 2）应用程序，它在 Java EE 服务器上提供类似于 Windows 资源管理器的功能。我们现在评估实现一个新功能；我们可以将此功能基于 jQuery 插件。

是否建议在一个应用程序中使用 jQuery 和 ExtJs？还是我必须处理发生的副作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:22:53.240

您将不必处理任何副作用。我这样做时遇到的唯一问题是，如果我试图对 Extjs 依赖的元素进行操作。只需确保当您开始使用 jQuery 操作时，您正在一个 div 中工作，而 extjs 不打算搞砸。最好的方法是从 Ext.Component 继承，然后在它提供的 div 中进行操作。Ext 在这个 div 内没有做任何事情，所以你应该没问题。如果需要，您也可以使用调整大小功能，但这并不是必需的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T16:21:33.067

我的公司在相当大的 Apache/Catalyst 站点上这样做没有问题。由于我们网站上有一些旧的原型内容，我们确实使用了 jQuery() 而不是 $()。

更多：[Blueprint CSS Extjs 和 JQuery 在同一个页面，让它们共存而不冲突的最佳方式](https://stackoverflow.com/questions/2119445/blueprint-css-extjs-and-jquery-in-the-same-page-best-way-to-make-them-coexist-w)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:24:36.503

将 jQuery 保留在 jQuery 命名空间[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

像这样使用它： $.noConflict();

jQuery 仅将单个对象 (jQuery) 添加到窗口的上下文中，因此您不会有任何冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T10:38:44.327

问题：jquery 的一些第三方库可能依赖于静态网页组织。由于 ExtJS 组件可以动态添加到网页中——它们没有来自第三方库的功能。

解决方案：您必须在添加组件后运行此库的脚本（例如，使用 afterrender 事件）。然后你可以在这个 ext 组件上调用这些函数。

# scala - 为什么 Scala 将标识符中的符号和字母分开，我可以更改吗？

> ID：14776875
> 
> 赞同：3
> 
> 时间：2013-02-08T16:18:00.850
> 
> 标签：scala

我正在考虑将 Scala 用于内部 DSL（即 DSL 真的是 Scala）来进行音乐创作。我想使用带有尖锐符号 ♯ (U+266F) 等字符的标识符。看起来这是不可能的：

```
val c♯0 = 13 
```

不解析。我能得到的最接近的是：

```
val c0_♯ = 13 
```

我不喜欢它。强制标识符这样命名的理由是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:26:09.400

Scala 的语法试图满足许多相互冲突的需求。为了使“类似运算符”的方法名称（例如`+`,`/`或`::`）及其任一侧的参数之间的任何空格成为可选的，有必要有一种方法来表示给定名称包含标点符号和字母数字字符的混合.

请记住，内部 DSL 不是新语言！它们充其量只是成为新语言的幻想。他们仍然是 Scala。

如果您想要完全自由地控制您提供给用户的语言，您可以编写组合解析器或使用外部解析器生成器。

对于参与 Scala 语言处理的任何人，我强烈建议您在推出自己的专注于单一用途的语言处理代码之前先查看[Kiama 。](http://code.google.com/p/kiama/)凯玛是一颗宝石！

# ejb - 查找远程 Bean，在 JBoss 7.1 中获取 EjbNamingContext

> ID：14776877
> 
> 赞同：4
> 
> 时间：2013-02-08T16:18:03.657
> 
> 标签：ejb, jboss7.x, lookup, ear

我有一个 Maven 项目，我想在其中尝试集成测试 EAR 子模块。在集成测试子模块中，我执行以下操作：

```
Properties env;
Context ctx;

env = new Properties();

env.setProperty( "java.naming.factory.initial", "org.jboss.naming.remote.client.InitialContextFactory");

env.setProperty(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
env.setProperty( "java.naming.provider.url", "remote://localhost:4447");
env.put(Context.SECURITY_PRINCIPAL, "jboss-user");
env.put(Context.SECURITY_CREDENTIALS, "*******");
ctx = new InitialContext( env );

IBMPFacadeRemote bmpFacade = ( IBMPFacadeRemote ) ctx.lookup( "ejb:DeDomain-ejb-1.0-SNAPSHOT/BMPFacade!de.domain.service.IBMPFacadeRemote");
bmpFacade.executeBMPProcess( model1, model2);//model1 & model2 are some entities 
```

问题：调用 mvn integration-test 时会出现以下异常

```
java.lang.ClassCastException: org.jboss.ejb.client.naming.ejb.EjbNamingContext cannot be cast to de.domain.service.IBMPFacadeRemote 
```

有人可以帮我解决这个问题吗？是否有可能使用本地 Bean 进行集成测试（maven 项目使用故障安全插件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:49:11.057

现在很难说究竟是什么解决了这个问题，但我会尝试提及所有解决问题的更改。

1.  将依赖项添加到 pom.xml

    ```
    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-ejb-client-bom</artifactId>
        <version>7.1.1.Final</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-jms-client-bom</artifactId>
        <version>7.1.1.Final</version>
        <type>pom</type>
    </dependency> 
    ```

2.  将 JNDI 查找更改如下（更改 EAR&EJB 项目的部署名称后）

    ```
    IBMPFacadeRemote bmpFacade = ( IBMPFacadeRemote ) ctx.lookup( "ejb:DeDomain-ear/DeDomain-ejb//BMPFacadeBean!de.domain.service.IBMPFacadeRemote"); 
    ```

3.  摆脱了 EJB 项目中的 EJB maven 插件和其他一些资源，例如`jndi.properties`

可能值得一提的是，该`Properties`实例与问题中所述相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T09:09:17.560

JNDI 属性对我来说看起来很奇怪。我总是成功地使用以下 JBoss 属性：

```
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces
jnp.socket.Factory=org.jnp.interfaces.TimedSocketFactory 
```

也许你应该仔细检查它们。

# python - 根据地图中键的存在选择性检索

> ID：14776879
> 
> 赞同：2
> 
> 时间：2013-02-08T16:18:11.003
> 
> 标签：python, mongodb, go, querying

是否可以根据 mongodb 地图中键的存在来选择性地检索？如果是这样，你将如何去做？

例如，假设我有一个看起来像这样的文档..

```
{ "_id": 1234,
    "parentfield1" : {
        "childfield1" : { ...},
        "childfield2" : { ...},
        "childfield5" : { ...}, // There might be many childfields.. > 50
    },
} 
```

如果有多个选项可供选择，我如何能够有选择地从文档中检索一个/某些特定的子字段？其中一些可能不存在于文档中。

IE

```
input "childfield1", "childfield2", "childfield3"

-> output 

{ "_id": 1234,
  "parentfield1": {
      "childfield1" : { ... },
      "childfield2" : { ... },
  },
} 
```

它甚至可行吗？是否也可以有效地做？任何帮助都会很棒（python，去）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:26:08.180

是的，这就是`projection`参数 of的目的[`find`](http://docs.mongodb.org/manual/reference/method/db.collection.find/)：

```
db.collection.find({_id: 1234}, {
    'parentfield1.childfield1': 1,
    'parentfield1.childfield2': 1,
    'parentfield1.childfield3': 1
}); 
```

如果给定文档中不存在指定字段，则仍将包含其他匹配字段。

`projection`如果您希望参数对象是动态的，则以编程方式构建参数对象。

# selenium - Selenium IDE：altKeyDown() +“点击”不将目标另存为

> ID：14776889
> 
> 赞同：1
> 
> 时间：2013-02-08T16:18:46.607
> 
> 标签：selenium, selenium-ide

我正在尝试使用 Alt+Click 让 Firefox“目标另存为”。当我自己这样做时，这在 Firefox 中有效（我已经更新了 Firefox 设置以启用 Alt+click 以将目标另存为）。当我在 Selenium IDE 中尝试它时，它不会在使用 altKeyDown() 之前的 Click 事件之前复制相同的功能。

```
<tr>
    <td>clickAndWait</td>
    <td>id=ctl00</td>
    <td></td>
</tr>
<tr>
    <td>altKeyDown</td>
    <td></td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>link=Document</td>
    <td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:50:18.270

你不能。

Selenium IDE 由 JavaScript 提供支持、支持和限制。

因此，您在 Selenium IDE（以及 Selenium RC，可以说是旧的 Selenium 引擎）中执行的每个操作“只是”JavaScript，并且具有相同的功能。显然，您不能通过在页面上运行任何 JS 来强制“目标另存为”，这可能是一个安全漏洞，因为互联网上的任何页面都可以强制您的浏览器下载任何文件。

此外，您无法真正模拟使用 JS 按下按钮以使其成为操作系统级别的事件以使 Firefox “听到”它。当由 JS 完成时，它“只是”一个文档级事件，主要供页面上的其他 JS 脚本了解它。

这种限制（以及许多其他限制）导致 Selenium 开发人员放弃了 Selenium RC，转而使用 Selenium WebDriver（也称为 Selenium 2），如果可以的话，它使用与浏览器的本机交互。[但即使这样也不能](http://code.google.com/p/selenium/issues/detail?id=95)以可靠的方式下载文件。

也就是说，`Alt`由于高级用户交互 API，按下键并单击 WebDriver 很简单，[并且可以在大多数浏览器和操作系统组合上运行](http://seleniumhq.org/docs/04_webdriver_advanced.jsp#advanceduserinteractions)（Java 示例）：

```
new Actions(driver)
    .keyDown(Keys.ALT)
    .click(driver.findElement(By.id("ctl00")))
    .keyUp(Keys.ALT)
    .perform(); 
```

如果还不支持您的组合，则此操作只会发出模拟按键，Firefox 也听不到。在这种情况下，您将需要您的语言工具来应对这种情况（例如，[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#keyPress%28int%29)Java 中的类）。

此外，您可以轻松地将现有测试脚本从 IDE 导出到类似 WebDriver 的 Java 或 C# 代码。

# windows - 使用 WMI 获取注册表配置单元的大小

> ID：14776897
> 
> 赞同：1
> 
> 时间：2013-02-08T16:19:06.470
> 
> 标签：windows, vbscript, registry, wmi

我想使用 WMI 和 VBScript 找出注册表中配置单元的文件大小。这是我到目前为止所拥有的：

```
const HKEY_LOCAL_MACHINE = &H80000002
strComputer = "."
Set objReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\"&_ 
    strComputer & "\root\cimv2:StdRegProv")
strKeyPath = "System\CurrentControlSet\Control\Hivelist"
objReg.EnumValues HKEY_LOCAL_MACHINE, strKeyPath, arrVals, arrTypes
WScript.Echo "Values under System\CurrentControlSet\Control\Hivelist"
For Each val In arrVals
    objReg.GetStringValue HKEY_LOCAL_MACHINE, strKeyPath, val, dwValue
    WScript.Echo dwValue
Next 
```

这给了我正确的列表，但是我需要获取文件大小。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:52:07.037

1.  为避免类型前缀欺诈和无意义的变量名，请使用`strRFSpec`而不是`dwValue`
2.  将注册表文件规范（例如`"\Device\HarddiskVolume1\Documents and Settings\NetworkService\NTUSER.DAT"`）转换为`strFSpec`FileSystemObject 可以理解的（例如`"C:\Documents and Settings\NetworkService\NTUSER.DAT"`）
3.  检查存在和可访问性`strFSpec`
4.  `WScript.Echo goFS.GetFile(strFSpec).Size`

（在Win XP下测试）

**添加（写评论）：**

从`strRFSpec`to的转换可能比使用硬编码字符串`strFSpec`的简单转换需要更多的努力。`Replace()`你的`Documents and Settings`或你的`WINDOWS`可以继续生活`F:\`。因此，也许您必须寻找映射`"\Device\HarddiskVolume...`到驱动器号的 WMI 类，以在 contains 上使用 %windir%`strFSpecs`或`\system\`询问`WshShell.SpecialFolders("MyDocuments")`驱动器号。由于我的设置很简单，我无法提供进一步的 - 经过测试的 - 建议。

# jquery - jquery draggable：框外边框上的可拖动句柄选项？

> ID：14776898
> 
> 赞同：4
> 
> 时间：2013-02-08T16:19:06.637
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-draggable

如何将 jquery draggable 的`handle`选项配置到外层而不是框的内层？

比如我想把这个弹出框拖到下面，当只在这个弹出框的**黑色边框**上单击并拖动光标，而不是在内容区域上。

是否可以？

[jsfiddle](http://jsfiddle.net/4bCed/)

当前，无论您的光标位于内容区域还是黑色边框，都会拖动该框。

jQuery,

```
$(document).ready(function(){

    // Attach the jquery.ui draggable.
    $('.ps-popup-outer').draggable({ 
        cursor: "move",
        handle: ".ps-popup-outer"
    });

}); 
```

html,

```
<div class="ps-popup-outer" style="width:400px;">
    <div class="ps-popup-inner" style="height:400px;">
        <div class="box-close"><input type="button" value="Close" class="button-close"/></div>
        <div class="box-content">inner content</div>
    </div>
</div> 
```

或者您可以提出更好的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T16:27:57.293

您将需要使用可拖动的[取消](http://api.jqueryui.com/draggable/#option-cancel)选项，这将防止拖动特定元素。

```
 $('.ps-popup-outer').draggable({ 
    cursor: "move",
    handle: ".ps-popup-outer",
    cancel: ".ps-popup-inner"
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/4bCed/1/](http://jsfiddle.net/dirtyd77/4bCed/1/)

希望这可以帮助！

# php - jqgrid 从一个网格更新两个表

> ID：14776905
> 
> 赞同：2
> 
> 时间：2013-02-08T16:19:44.337
> 
> 标签：php, mysql, jqgrid

我在一个网格中显示了两个表（通过`LEFT JOIN`），我想知道有没有办法为同一个网格中的两个表实现内联编辑功能？

即：当主网格表更新时：

```
onSuccess { table_name, {column1=value1,column2=value2,..}} 
```

不一定高于场景 - 我在这里寻找想法和逻辑......

我知道西装有`setAfterCrudAction`功能`jqGridPHP`，但从整个西装中我只需要这个功能......所以我正在寻求在你的帮助下自己实现它

任何想法表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:48:00.150

[示例](http://jqgrid-php.net/examples/?render=jqOperBasic)显示了在使用连接时如何更新字段（检查“PHP Grid”选项卡，顺便说[一下 jqgrid-php](http://jqgrid-php.net/examples/)是免费的）：

```
<?php

class jqOperBasic extends jqGrid
{
    protected function init()
    {
        $this->table = 'tbl_order_item';

        $this->query = "
            SELECT {fields}
            FROM tbl_order_item i
                JOIN tbl_books b ON (i.book_id=b.id)
            WHERE {where}
        ";

        #Set columns
        $this->cols = array(

            'item_id' => array('label' => 'ID',
                'db' => 'i.id',
                'width' => 10,
                'align' => 'center',
                'formatter' => 'integer',
            ),

            'order_id' => array('label' => 'Order id',
                'db' => 'i.order_id',
                'width' => 15,
                'align' => 'center',
                'formatter' => 'integer',
            ),

            'name' => array('label' => 'Book name',
                'db' => 'b.name',
                'width' => 30,
                'editable' => true,
                'editrules' => array('required' => true),
            ),

            'price' => array('label' => 'Price',
                'db' => 'i.price',
                'width' => 15,
                'align' => 'center',
                'formatter' => 'integer',
                'editable' => true,
                'editrules' => array('required' => true,
                    'integer' => true,
                    'minValue' => 1,
                    'maxValue' => 3000
                ),
            ),
        );

        #Set nav
        $this->nav = array('edit' => true, 'edittext' => 'Edit');
    }

    #Save columns to different tables
    protected function opEdit($id, $upd)
    {
        #Server-side validation
        if(strlen($upd['name']) < 5)
        {
            #Just throw the exception anywhere inside the oper functions to stop execution and display error
            throw new jqGrid_Exception('The book name is too short!');
        }

        #Get editing row
        $result = $this->DB->query('SELECT * FROM tbl_order_item WHERE id=' . intval($id));
        $row = $this->DB->fetch($result);

        #Save book name to books table
        $this->DB->update('tbl_books', array('name' => $upd['name']), array('id' => $row['book_id']));
        unset($upd['name']);

        #Save other vars to items table
        $this->DB->update('tbl_order_item', $upd, array('id' => $id));
    }
} 
```

# liferay - 如何使用 liferay 6.1 向组织添加页面？

> ID：14776907
> 
> 赞同：0
> 
> 时间：2013-02-08T16:19:59.773
> 
> 标签：liferay, liferay-6

我想在 liferay 6.1 中为组织创建新页面，但在组织配置页面中，我找不到添加新页面的链接或位置。我在哪里可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:50:26.820

*   转到控制面板。
*   转到用户和组织窗格。
*   单击您的组织。
*   在右侧，单击组织站点。
*   选中“创建”。
*   选择站点模板或保留为无。
*   节省。
*   在左侧，有一个包含站点列表的下拉菜单。单击您的组织。
*   点击“网站页面”
*   添加页面。

# c - 清除 char 中的内容**

> ID：14776913
> 
> 赞同：-4
> 
> 时间：2013-02-08T16:20:27.910
> 
> 标签：c, char

对于我的生活，我无法弄清楚如何做到这一点。我以为我可以使用`memset()`，但我遇到了分段错误。

```
char **a;
token = strtok( NULL, " " );
if( token != NULL )
    strcpy( token, strtok( token, "\n" )); // get rid of '\n' at end if it exists
else{  
    // I want to reset all the values in a to null 
    return;
} 
```

我以为我什至可以做一个 while 循环，比如`while(a[i] != 0 )`将每个元素设置为 0，但即便如此，我还是遇到了分段错误。这应该很容易吧？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:22:44.790

您对 strtok() 的初始调用不应使用 NULL 参数作为第一个参数！

检查参考：

[http://www.cplusplus.com/reference/cstring/strtok/](http://www.cplusplus.com/reference/cstring/strtok/)

你到底想达到什么目的？

# java - 使用 javascript 更改 java applet 背景

> ID：14776914
> 
> 赞同：0
> 
> 时间：2013-02-08T16:20:29.983
> 
> 标签：java, javascript, colors, applet

我有一个带有从类 java.awt.Component 继承的方法的 java 小程序。我需要在 javascript 函数中更改小程序背景的颜色，但使用

```
my_selected_applet.setBackground('FFFFFF'); 
```

不工作，Firebug 抱怨：

```
uncaught exception: java.lang.IllegalArgumentException: 
No method found matching name setBackground and arguments [java.lang.String] 
```

由于该方法存在，我认为这是行不通的论点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:22:48.527

你能不能用这个：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;

my_selected_applet.setBackground(Color.white); 
```

或在 html 页面中：

您可以通过以下方式设置小程序的背景颜色：

```
<applet code="MyApplet.class" width="100" height="100">
<param name="background-color" value="#ffffff">
<param name="foreground-color" value="#000000">
</applet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:31:47.747

[设置背景](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setBackground%28java.awt.Color%29)

您需要在函数中传递颜色对象。

所以只需创建一个颜色对象`var color = new Color('CC9933');`

然后尝试`setBackground(color)`

您必须阅读此内容以获取更多信息：[来自 javascript 的 Applet 方法](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)

# cakephp - 使用 CakePHP 1.3，您如何处理实时的 HTTPS URL 和 dev 上的普通 HTTP URL？

> ID：14776916
> 
> 赞同：0
> 
> 时间：2013-02-08T16:20:32.663
> 
> 标签：cakephp, ssl, cakephp-1.3

我继承的项目将所有链接硬编码为“https”，而我的开发环境无法识别“ [https://somesite.internal-domain.com](https://somesite.internal-domain.com) ”。这意味着有些东西偶尔会坏掉。

CakePHP 是否提供了某种生成格式化链接的方法，考虑到 SSL 证书是否可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:29:57.500

是的，默认情况下会这样做。如果您使用相对或数组链接，例如

```
$this->Html->link('Some link', array('controller' => 'foo', 'action' => 'bar', ...)); 
```

您将看到 cake 使用 http/https 依赖于您当前使用的内容。那将是要走的路。

如果您想阻止一种方式，只需 301 重定向，然后再重定向到另一种方式。因此，如果您想切换到 https，请从 http 重定向到 http（相同的链接，但附加了不同的协议）。

# oracle-sqldeveloper - Oracle SQL Developer 调试错误 - “基于文件的源 数据库中不存在。”

> ID：14776919
> 
> 赞同：1
> 
> 时间：2013-02-08T16:20:46.063
> 
> 标签：oracle-sqldeveloper

我正在使用 SQL Developer 尝试调试包级函数。在我编译了包的标头和主体以进行调试后，我在源代码中找到了我的函数（从数据库开始加载），并且调试对话框给了我消息，

“数据库中不存在基于文件的源 [包名称]。是否已编译？”

就像我说的，我实际上只是编译了代码，并没有发现任何错误。

**编辑：**我已经在头文件中注释掉了函数定义，所以函数不是公开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:24:12.623

我已经在头文件中注释掉了函数定义，这实际上使它成为一个私有函数，所以它不会让我从 SQL Developer 调用它。

我取消了函数定义的注释，使其成为公共函数，并且它起作用了。

# qt - qt 应用程序中的 Unicode 字符不显示

> ID：14776921
> 
> 赞同：5
> 
> 时间：2013-02-08T16:20:53.863
> 
> 标签：qt, unicode, designer, qmap

我试图通过将每种语言插入到 a 中来在我的 qt 应用程序中显示不同的语言字符串，`QMap<QString, QString>`以便它可以在多个地方重复使用，并在整个应用程序中放入不同的组合框。我通过`QMap`在 CTOR 中创建类似的内容来做到这一点：

```
m_langMap.insert(QString::fromWCharArray(L"English"), "english");
m_langMap.insert(QString::fromWCharArray(L"Dansk"), "dansk");
m_langMap.insert(QString::fromWCharArray(L"Nederlands"), "dutch");
m_langMap.insert(QString::fromWCharArray(L"Čeština"), "czeck");
m_langMap.insert(QString::fromWCharArray(L"Slovenský"), "slovak");
m_langMap.insert(QString::fromWCharArray(L"Magyar"), "hungarian");
m_langMap.insert(QString::fromWCharArray(L"Român"), "romanian");
m_langMap.insert(QString::fromWCharArray(L"Latviešu"), "latvian");
m_langMap.insert(QString::fromWCharArray(L"Lietuvių"), "lithuanian");
m_langMap.insert(QString::fromWCharArray(L"Polski"), "polish");
m_langMap.insert(QString::fromWCharArray(L"Português"), "portuguese");
m_langMap.insert(QString::fromWCharArray(L"Español"), "spanish");
m_langMap.insert(QString::fromWCharArray(L"Français"), "french");
m_langMap.insert(QString::fromWCharArray(L"Italiano"), "italian");
m_langMap.insert(QString::fromWCharArray(L"Svenska"), "swedish");
m_langMap.insert(QString::fromWCharArray(L"Русский"), "russian");
m_langMap.insert(QString::fromWCharArray(L"Українська"), "ukranian");
m_langMap.insert(QString::fromWCharArray(L"Русский"), "russian");
m_langMap.insert(QString::fromWCharArray(L"中文"), "chinese");
m_langMap.insert(QString::fromWCharArray(L"日本語"), "japanese"); 
```

然后我将它们插入组合框中：

```
QMap<QString, QString>::const_iterator it = m_langMap.begin();
while (it != m_langMap.end())
{
    ui->comboBox->addItem(it.key());
    ++it;
} 
```

当应用程序运行时，我看到以下内容：

![在此处输入图像描述](../Images/f1436d02a779715edd3875647d5f2625.png)

但是，如果我创建一个单独的 .ui 文件并以相同的方式插入地图，我会看到以下内容（即使我将这个单独的 Dialog 类包含到同一个应用程序中），所以很明显，只要应用程序没有字体问题知道如何渲染不同的字符集....但我不知道为什么第一个不会渲染字符集？

谁能告诉我为什么第一个不起作用，而第二个起作用？我检查了设计器，它的语言环境在下面显示的两个 ui 文件中都设置为“C，默认值”。我似乎无法弄清楚还有什么导致第一个不工作的差异，而第二个在同一个应用程序中工作。

谢谢你的帮助！

另一个测试对话框：

![在此处输入图像描述](../Images/8d6f1a298204b47a59dc60e5bbc9941b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:48:21.773

您的代码是正确的，但问题是您的源文件不能包含 Unicode 字符 - 显然它使用不同的编码。

将文件另存为 UTF-8，一切正常！

![在此处输入图像描述](../Images/8df9976779174e95758a921a66ff9e21.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:57:34.937

在第一个屏幕截图中，组合框使用的字体比第二个屏幕截图大得多。我的猜测是您已经在 GUI 设计器或代码中更改了字体，而第二个（工作）屏幕截图使用的是默认字体。可能是当您更改字体大小时，您也将字体更改为不包含所有必需的 Unicode 字符的字体。尝试将组合框使用的字体更改为其他字体。

# java - Java TCP 您如何读取已发送的流大小（标头）并根据该大小继续读取

> ID：14776930
> 
> 赞同：-1
> 
> 时间：2013-02-08T16:22:09.653
> 
> 标签：java, tcp

给定以下伪代码。我将如何读取给定的数据

![在此处输入图像描述](../Images/40844ed9be504fab168e0fb69a02be59.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:32:24.213

使用[DataInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)让您的生活变得轻松。

```
DataInputStream in = new DataInputStream(socket.getInputStream());
short myShortStreamSize = in.readShort();
byte[] payload = new byte[myShortStreamSize];
in.readFully(payload); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:26:26.780

`Socket`有`getInputStream()`方法。您将使用从它返回`InputStream`和读取`myShortStreamSize`的字节转换为 a `byte[]`，将其转换为表示您的有效负载大小的 int/long ，然后读入另一个更大`new byte[payloadSize]`的有效负载本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T09:08:06.887

你可以试试[JBBP](https://code.google.com/p/java-binary-block-parser/)

```
@Bin class Struct { byte [] payload; }
@Bin class ParsedStream { Struct [] structs; }
ParsedStream parsed = JBBPParser.prepare("structs[_] { ushort size; byte [size] payload; }").parse(theInStream).mapTo(ParsedStream.class); 
```

# jquery - 在选项卡中使用选项卡

> ID：14776933
> 
> 赞同：1
> 
> 时间：2013-02-08T16:22:13.460
> 
> 标签：jquery, tabs

好吧，我们开始吧。我正在尝试使用技术选项卡制作列表，安装 css 是 perfeitoa，以及每个类别的按钮，问题是我无法通过 jquery 调用每个内容，例如：

```
 <script type="text/javascript">
        $(document).ready(function() {  
            $('#menu_tabs li a:first').addClass('active');
            $('#menu_rating li a:first').addClass('active');

            $('#menu_tabs li a').click(function(){
                $('#menu_tabs li a').removeClass('active');
                $(this).addClass('active');
            });                                              

            $('#menu_rating li a').click(function(){
                $('#menu_rating li a').removeClass('active');
                $(this).addClass('active');
            });
        });
    </script> 
```

我需要的：

这个#manu_tabs是顶部菜单，分类是，看页面链接

[http://www.brasileiromx.com.br/web/classificacao_limpo.php](http://www.brasileiromx.com.br/web/classificacao_limpo.php)

我设法使按钮保持活动和非活动状态，当我单击 mundial 按钮时，不能再做任何内容了。

#menu_rating 是案例 MX1 和 MX2 中每个模态的类别，它们位于每个父类别中。

使用去查看 HTML 的链接。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:24:58.657

这是我能做的：

```
 $(document).ready(function() {  
            $('#menu_tabs li a:first').addClass('active');
            $('#menu_rating li a:first').addClass('active');

            $('#menu_tabs li a').click(function(){
                $('#menu_tabs li a').removeClass('active');
                $(this).addClass('active');

                $(".tabs div").hide();
                $($(this).attr("href")).show();
                $($(this).attr("href")).find("div").removeClass("active");
                $($(this).attr("href")).find("div:first").addClass("active");
                $($(this).attr("href")).find("div:first").show();

            });                                              

            $('#menu_rating li a').click(function(){
                $('#menu_rating li a').removeClass('active');
                $(this).addClass('active');
               $(this).parent().parent().parent().find("div").hide();
                $($(this).attr("href")).show();
            });
        }); 
```

如您所见，当您单击父选项卡时，子选项卡不会变为活动状态，因为它们都共享相同的 ID。我建议您删除重复的 ID 并使用类名而不是它们的 ID 来设置它们的样式。

JSFiddle：http: [//jsfiddle.net/2GfxL/1/](http://jsfiddle.net/2GfxL/1/)

# linux - 如何将我的 git 存储库镜像到家里的更多笔记本

> ID：14776937
> 
> 赞同：0
> 
> 时间：2013-02-08T16:22:33.413
> 
> 标签：linux, macos, git

如何将我的 git 存储库镜像到家里的更多笔记本。

我的公司正在使用 SVN 进行版本控制，所以我使用“git svn clone”来克隆它，然后将它推送到我在互联网上的 git 存储库。我对 git 的新问题是如何在家里的笔记本上获得存储库的计算机

我在工作中执行以下操作来克隆我的工作 SVC

```
cd ~/tmp/svn-mirror/
git svn clone http://svn/java mirror.git

cd ~/tmp/svn-mirror/mirror.git/
git remote add origin git@git.xxxx.com:MIRROR.git
git push origin master 
```

然后我每小时运行一次以下脚本，将其推送到互联网上的 git 存储库

```
#!/bin/bash
cd ~/tmp/svn-mirror/mirror.git/
git svn rebase
git push origin maste 
```

现在一旦我回到家。我该怎么做才能在我的笔记本上使用 git 存储库.. 请记住我不知道 git.. 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:16:03.577

你试过做一个简单的 git clone 吗？

```
git clone git@git.xxx.com:MIRROR.git /directory/in/your/notebook 
```

从你的笔记本上？

# c# - XML 应用程序设置路径

> ID：14776940
> 
> 赞同：0
> 
> 时间：2013-02-08T16:22:45.767
> 
> 标签：c#, xml, settings.settings

我正在为我的 Windows 窗体使用 C# 的 XML 应用程序设置。每当我发布程序的新版本时，用户必须重新输入设置，因为现在将从新路径读取设置。

路径如下所示：

`%LOCALAPPDATA%\<program name>\<program name>._Url_<a random string>\<version>\user.config`

我想要做的是要么拥有它，所以我可以自己设置设置的路径，这样它们就不会被重置，这可能吗？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:14:51.160

[检查 ApplicationSettingsBase.Upgrade 方法](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.upgrade%28v=vs.100%29.aspx)

我在 MSDN 上找到了这个。它将从旧版本读取现有设置值。我已经使用 helloword winforms 应用程序进行了测试，并且在版本升级后保留了我的“Option1”设置。

```
 Properties.Settings.Default.Upgrade();
        Properties.Settings.Default.Save();
        label1.Text = Properties.Settings.Default.Option1; 
```

# django - 配置 Django-rest

> ID：14776946
> 
> 赞同：16
> 
> 时间：2013-02-08T16:23:01.223
> 
> 标签：django, django-rest-framework

我试图在 Windows 机器中设置 DJango restframework，运行代码时出现以下错误，

步骤完成。

1.  从 github 下载了 rest-framework 和其他实用程序
2.  使用 easy_install 我安装了所有软件包。

    这是确认消息，

    > C:\Python27\Scripts>easy_install django-rest 搜索 django-rest 最佳匹配：django-rest 0.0.1 处理 django_rest-0.0.1-py2.7.egg django-rest 0.0.1 已经是easy中的活动版本-install.pth
    > 
    > 使用 c:\python27\lib\site-packages\django_rest-0.0.1-py2.7.egg 处理 django-rest 的依赖关系 完成处理 django-rest 的依赖关系

3.  创建了一个新项目 firstwebservice ，它创建了所有文件。

4.  编辑 settings.py 文件并包含 django rest，如下所示，

    ```
    INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'rest_framework',
        # Uncomment the next line to enable the admin:
        # 'django.contrib.admin',
        # Uncomment the next line to enable admin documentation:
        # 'django.contrib.admindocs',
    ) 
    ```

5.  跑项目

    ```
    Error:-No module named rest_framework... 
    ```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-08T16:40:22.177

是否实际安装了 rest_framework 并在您的 PYTHONPATH 上？

**这看起来像是一个基本的导入错误。**

建议你：

通过运行“manage.py shell”并尝试“import rest_framework”和“from rest_framework import authtoken”，仔细检查一切是否安装正确。

如果可以的话，我会用 pip 安装不容易，easy 之前给我带来了很多这样的问题。

```
sudo pip install djangorestframework 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T16:41:04.673

您正在安装错误的软件包。该包被命名`djangorestframework`，而不是`django-rest`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T17:58:46.720

***这个“错误：-没有名为rest_framework的模块***”的另一个完全不同的原因

我的虚拟环境文件夹不是我项目的子文件夹（例如，如果您的项目中没有“env”子文件夹，但您的虚拟环境位于另一个文件夹结构中）

例如：我曾经在一个单独的文件夹路径中创建所有虚拟环境，然后我有一个 bat 文件来激活每个项目中的虚拟环境。我的所有虚拟 env 子文件夹都有一个“主文件夹”——这使得它们都可以在同一个环境 PATH 中“找到”——这对我之前的许多项目都有效，不确定它是否是 python3 与 python2 的问题或一个 DRF 问题——但是——我刚刚从 python 2.7 升级到 3.6，这是我的经验——希望这对其他人有帮助。

(1) 导航到您的项目文件夹（例如**D:\projects\myproject**）

（2）在项目文件夹中创建您的虚拟环境文件夹 `virtualenv env`

(3) 激活你的 virtualenv `env\Scripts\activate`

**旧文件夹结构：（*不起作用）***

`D:\projects\myproject\env` <--- 这里是python代码

`D:\python\virtualenvs\my_project` <-- 这里是虚拟环境

**新文件夹结构*（此工程）***

`D:\projects\myproject` <--- 这里是python代码

`D:\projects\myproject\env` <-- 这里是虚拟环境

# knockout-validation - 淘汰验证插件，从特定属性获取 isValid

> ID：14776948
> 
> 赞同：8
> 
> 时间：2013-02-08T16:23:01.283
> 
> 标签：knockout-validation

是否可以查看[敲除验证插件](https://github.com/ChampionInternationalMoving/knockout.autocomplete)中是否只有一个属性有效？

我在文档中看不到对它的任何引用，只能查看整个模型是否有效。

例如，我希望计算出的 observable 具有不同的值，具体取决于另一个 observable 是否有效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T16:32:42.887

我被引导到错误的方向，因为我使用的是异步验证器并且我的问题过于复杂，我认为它很简单：

> 属性名.isValid();

例如

> self.email.isValid();

# php - 在 Python 中使用二元运算符... 翻译 if (c1 >= "\xc0" & c1 <= "\xdf")

> ID：14776950
> 
> 赞同：1
> 
> 时间：2013-02-08T16:23:13.267
> 
> 标签：php, python

我正在将一个外部[类](https://github.com/neitanod/forceutf8/blob/master/Encoding.php)从 PHP 转换为 Python，它做了一些技巧，例如：

```
if ($c1 >= "\xc0" & $c1 <= "\xdf")
[...]
$cc1 = (chr(ord($c1) / 64) | "\xc0");
[...]
$cc2 = ($c1 & "\x3f") | "\x80"; 
```

其中 $c1,^$cc1, $cc2 是字符

我刚刚意识到我不能在 python 中使用它，因为字符是字符串，而不是重复地被视为“字符的二进制表示”，其中运算符 & 和 | 说得通...

请问，你会如何以 Pythonic 的方式翻译这些？

```
>>> c1 = "a"
>>> (c1 & "\x3f") | "\x80"

Traceback (most recent call last):
  File "<pyshell#202>", line 1, in <module>
    (c1 & "\x3f") | "\x80"
TypeError: unsupported operand type(s) for &: 'str' and 'str' 
```

编辑：实际上，这个 PHP 类似乎不起作用，所以它也不符合我的需要。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:25:41.893

这是一个原始的 UTF-8 编码函数。

```
c1.encode('utf-8') 
```

请注意，除非您`unicode`本机使用 s （为什么不使用？），否则您需要先解码`'latin-1'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:37:00.717

使用该`ord`函数获取值，然后使用实际数字进行屏蔽。

```
>>> c1 = "a"
>>> (ord(c1) & 0x3f) | 0x80
161
>>> hex((ord(c1) & 0x3f) | 0x80)
'0xa1' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:40:37.120

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
>>> c1 = 'd'
>>> # if ($c1 >= "\xc0" & $c1 <= "\xdf")
... 
>>> ord(c1) >= 0xc0 and ord(c1) <= 0xdf
False
>>> # $cc1 = (chr(ord($c1) / 64) | "\xc0");
... 
>>> chr(ord(c1) / 64 | 0xc0)
'\xc1'
>>> # $cc2 = ($c1 & "\x3f") | "\x80";
... 
>>> ord(c1) & 0x3f | 0x80
164
>>> 
```

# ios - 在 iOS 中使用立体声源进行混响

> ID：14776952
> 
> 赞同：1
> 
> 时间：2013-02-08T16:23:17.327
> 
> 标签：ios, audio, signal-processing, openal

iOS 5.0 及更高版本支持 OpenAL 中的混响，我非常使用它。然而，许多用户在我的应用程序中要求立体声。经过一些测试，我发现混响不适用于立体声。ObjectAL 源代码中的注释证实了我的结果。那么，有没有办法在 OpenAL 中使用立体声时打开混响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:24:04.233

Reverb 专为点源声音而设计。立体声实际上是 3d 环境之上的一种 hack，人为地将两个虚拟源“放置”在头部两侧附近（它们不是真正的源 - 这只是一种 hack）。因此，包括混响在内的许多 OpenAL 操作都不适用于立体声。

您可以获得混响立体声，但需要预先进行一些预处理。您必须在 audacity 等音频程序中拆分立体声轨道，然后将左右声道作为单独的缓冲区加载，然后使用听众左右两侧的源播放它们（基本上是在做黑客正在做的事情）。然后，当您打开混响时，它将正常工作。

# vba - vba 应用样式

> ID：14776954
> 
> 赞同：0
> 
> 时间：2013-02-08T16:23:24.067
> 
> 标签：vba, ms-word, word-style

我有这段代码可以将 excel 单元格值插入到 word 文档中：

```
 Set wrdRange = wrdDoc.Range
    With wrdRange
        .Collapse Direction:=wdCollapseEnd
         .InsertParagraphAfter
         xText = Rng.Cells(i + 1, 1).Value
         .InsertAfter xText
        .Collapse Direction:=wdCollapseEnd
    End With 
```

我需要用 H1 设置**xText**的样式，但不明白。
xText 可能包含许多单词。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:14:22.497

尝试这个。

```
Set wrdRange = wrdDoc.Range
With wrdRange
    .Collapse Direction:=wdCollapseEnd
    .InsertParagraphAfter
    xText = Rng.Cells(i + 1, 1).Value
    .InsertAfter xText

    Selection.MoveRight Unit:=wdCharacter, Count:=1
    Selection.MoveRight Unit:=wdCharacter, Count:=Len(xText), Extend:=wdExtend
    Selection.Style = ActiveDocument.Styles("Heading 1")

    .Collapse Direction:=wdCollapseEnd
End With 
```

# java - 通过 JSCH 使用 sftp 连接时出现安全异常

> ID：14776964
> 
> 赞同：1
> 
> 时间：2013-02-08T16:23:54.237
> 
> 标签：java, security, exception, cryptography, jsch

使用 JSCH 创建 SFTP 时出现此错误。我正在尝试通过 sftp 连接到远程服务器以传输文件，但是在调用 connect 方法时出现以下错误。

```
java.lang.ExceptionInInitializerError
at javax.crypto.Cipher.getInstance(DashoA13*..)
at com.jcraft.jsch.jce.AES256CTR.init(AES256CTR.java:56)
at com.jcraft.jsch.Session.checkCipher(Session.java:2072)
at com.jcraft.jsch.Session.checkCiphers(Session.java:2049)
at com.jcraft.jsch.Session.send_kexinit(Session.java:592)
at com.jcraft.jsch.Session.connect(Session.java:286)
at com.jcraft.jsch.Session.connect(Session.java:162)
at scb.frame.runner.ServerSetup.contactServer(ServerSetup.java:56)

Caused by: java.lang.SecurityException: Cannot set up certs for trusted CAs
at javax.crypto.SunJCE_b.<clinit>(DashoA13*..)
... 34 more
Caused by: java.lang.SecurityException: Cannot locate policy or framework files!
at javax.crypto.SunJCE_b.i(DashoA13*..)
at javax.crypto.SunJCE_b.g(DashoA13*..)
at javax.crypto.SunJCE_b$1.run(DashoA13*..)
at java.security.AccessController.doPrivileged(Native Method)
... 35 more 
```

**我的连接代码：**

```
 String host = serverProperties.getProperty("Host");
    String username = serverProperties.getProperty("Username");
    String password = serverProperties.getProperty("Password");
        JSch jsch = new JSch();
        Security.addProvider(new com.sun.crypto.provider.SunJCE());
        Session session;
        try {
            session = jsch.getSession(username, host, 22);

        session.setPassword(password);

        Properties config = new Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        ChannelSftp sftpChannel = (ChannelSftp) session.openChannel("sftp");
        sftpChannel.connect();
        sftpChannel.get(sourceFile,destFile); 
```

Same Program 的命令行版本我可以毫无例外地运行！Jcraft[link] [http://www.jcraft.com/jsch/examples/Sftp.java.html](http://www.jcraft.com/jsch/examples/Sftp.java.html)网站的 SFTP 示例也运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:14:42.900

它与 Java 的安全限制有关。默认情况下，密钥大小限制为 128 位。从您的堆栈跟踪中，我看到您正在尝试使用 AES 256 位加密。

要解决您的问题，请访问 Java 网站并下载 Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files：

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

（可在底部找到）

将它们安装在您的 JRE 中，您就可以开始了 :) 感谢美国政府...

# ember.js - 在 Ember pre4 的路由器中，如何从另一个路由中触发一个路由事件？

> ID：14776968
> 
> 赞同：0
> 
> 时间：2013-02-08T16:24:27.047
> 
> 标签：ember.js

我有如下所示的代码，我只是想知道如何在路由事件中触发另一个事件。想法？

```
App.MyRoute = Ember.Route.extend({

events: {
  eventOne: function() {
     // do something
  },
  eventTwo: function() {
     // how do I call eventOne() here?
  },
}

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:33:13.420

您可以只调用`events.eventOne()`using`this`作为上下文：

```
App.IndexRoute = Ember.Route.extend({
    events: {
        eventOne: function() {
            console.log('You got me!');
        },
        eventTwo: function() {
            this.events.eventOne();
        },
    } 
}); 
```

# javascript - 多个fancybox google map

> ID：14776970
> 
> 赞同：0
> 
> 时间：2013-02-08T16:24:29.590
> 
> 标签：javascript, jquery, html, google-maps-api-3, fancybox

如何将具有不同内容的弹出式花式框放在不同的标记中？我已经设法设置了幻想框，但您可以看到它是两个标记的相同内容。我想找到一种方法为每个制造商在我的幻想箱中放置不同的内容。

```
<script type='text/javascript'>//<![CDATA[ 
$(function(){
function initialize() {

    var mapOptions = {
      zoom: 4,
       disableDefaultUI: true,
      center: new google.maps.LatLng(45.35, 4.98),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'),
                                  mapOptions);

    addMarkerWithWindow("Lemans", new google.maps.LatLng(48.006922, 0.20874), map);
    addMarkerWithWindow("Paris", new google.maps.LatLng(48.856291, 2.352705), map);
}

function addMarkerWithWindow(name, coordinate, map) {
 $.fancybox({
    content: url
});

var image = 'rss.png';
var marker = new google.maps.Marker({
  map: map,
  icon: image,
  position: coordinate
});

    var styles = [
   {
      featureType: "all",
      stylers: [
        { saturation: -15 },
        { lightness: -10 },
      ]
    },

            ];
map.setOptions({styles: styles});

 <!-- ne pas utiliser --> 
  var url= "http://www.fancyapps.com/fancybox/";
  <!-- ne pas utiliser -->

      var div = document.createElement('DIV');
    div.innerHTML = 'hello';

   google.maps.event.addListener(marker, 'click', function() {

    $.fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    href : "rssddd/FeedEk_demo.html",
    type : 'iframe'

    });
});
  }
  initialize();
   });//]]>  
   google.maps.event.addDomListener(window, 'load', initialisation);
     </script> 
```

演示：http : [//ps3land.franceserv.com/](http://ps3land.franceserv.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:44:07.037

将第四个参数传递给`addMarkerWithWindow()`，例如：

```
addMarkerWithWindow("Lemans", new google.maps.LatLng(48.006922, 0.20874), map,
                    'http://lemans.org');
addMarkerWithWindow("Paris", new google.maps.LatLng(48.856291, 2.352705), map,
                    'http://parisinfo.com'); 
```

使参数在函数内部可访问：

```
函数 addMarkerWithWindow（名称、坐标、地图、href）{
  //你的代码
}

```

并将其用作 fancyBox 的 href 选项：

```
$.fancybox({
  最大宽度：800，
  最大高度：600，
  链接：链接，
  类型：'iframe'
});
```

# ios - 从 iOS 设备获取证书列表

> ID：14776972
> 
> 赞同：7
> 
> 时间：2013-02-08T16:24:39.940
> 
> 标签：ios, macos, ssl, certificate, keychain

我想获取安装在 iPhone 或 iPad 上的证书列表。所以我可以用它来选择一个并用于服务器上的 ssl 验证。但是我无法获得此列表。我在以下链接中看到，在 iOS 中无法获取证书，因为只能访问他们自己的钥匙串。[iOS 获取已安装的配置文件](https://stackoverflow.com/questions/10344814/ios-get-configuration-profiles-that-are-installed)

但是我怀疑:)。

从下面的链接 [获取钥匙串中的证书](https://stackoverflow.com/questions/5767957/get-certificates-in-keychain) 我正在使用代码来获取证书。但是我得到零数据。

```
NSDictionary *query = [NSDictionary dictionaryWithObjectsAndKeys:
                           (__bridge id)(kSecClassCertificate), kSecClass,
                           [NSNull null], kSecMatchSearchList,
                           kCFBooleanTrue, kSecReturnRef,
                           kSecMatchLimitAll, kSecMatchLimit,
                           nil];
    CFDataRef *items = nil;
    OSStatus status = SecItemCopyMatching((__bridge CFDictionaryRef)query, ((CFTypeRef *)&items)); 
```

我为搜索列表提供 [NSNull null] 并假设如果 keychain ref 为 NULL，则设备采用默认的 keychain。

我的问题是 1) 是否可以从 iPhone 获取已安装证书的列表。2）如果是这样怎么办？上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:43:16.500

> 我的问题是 1) 是否可以从 iPhone 获取已安装证书的列表。

确实。

> 2）如果是这样怎么办？上面的代码有什么问题？

就我而言，代码很好（如果不是，我能想到的唯一问题就是设置它`NSNull`- 尝试省略它）。您缺少的是使用适当的权利对二进制文件进行签名，即：

```
<key>keychain-access-groups</key>
<array>
    <string>*</string>
</array> 
```

[你可以在这里](https://github.com/ptoomey3/Keychain-Dumper/blob/master/entitlements.xml)找到一个示例 Entitlements 属性列表——顺便说一下，看看整个项目，这很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:45:03.370

请参阅“GenericKeychain”的 Apple 示例代码 - 可从“SecItemCopyMatching”文档访问。“在钥匙串中查找证书”文档包括查找命名证书的详细代码 - 这将根据 kSecAttrLabel 键/值对为您提供一个。

# jquery - HTML 5 移动应用程序的 Jquery 移动框架替代方案

> ID：14776973
> 
> 赞同：0
> 
> 时间：2013-02-08T16:24:42.097
> 
> 标签：jquery, css, html, jquery-mobile, windows-phone-8

我正在使用 HTML 5 项目模板制作 Windows 8 Phone 应用程序。

所以对于移动模板在网上搜索了一下之后，我发现了这个名为“ [Jquery Mobile](http://jquerymobile.com/) ”的框架，我真的很喜欢这个框架允许开发人员使用拖放向导创建和下载 HTML 代码的能力。

这让我想到了我的问题，是否还有其他可用的很棒的框架，可以轻松拖放控件，然后下载 HTML。

我还想补充一点，我遇到了另一个名为“ [Codiqa](http://codiqa.com/) ”的框架。不幸的是，这是一个付费的。

请您分享我可以用来创建 HTML 5 移动应用程序的任何其他免费/付费框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:27:33.070

具有响应功能的[引导程序！](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

拖放可以通过一个简单的[jQueryUI 插件](http://jqueryui.com/)来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:11:25.700

1.  [将PhoneGap/Apache Cordova](http://phonegap.com/)看作为一个移动框架——它将为您提供一些额外的原生功能的访问权限 + 简化很多将您的应用程序迁移到其他移动平台（iOS、Android、Blackberry 等）的过程——相同的代码库，包装等

2.  对于 Html 框架，您还可以查看[Sencha Touch](http://www.sencha.com/blog/sencha-touch-with-windows-phone-8) + 对于 jQuery Mobile 您可以查看特殊的[Windows Phone 主题](http://channel9.msdn.com/Blogs/Interoperability/Demo-jQuery-Mobile-theme-for-Windows-Phone-8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:27:26.850

如果您制作原生应用程序，那么使用 cordova / phonegap 非常棒！它允许您使用 HTML、CSS 和 javascript 创建应用程序。最重要的是，您可以将外部库用于 javascript。此外，它易于使用许多设置教程。

[http://phonegap.com/](http://phonegap.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:28:19.847

你是说主题构建器？Kendo UI 也有：

[http://demos.kendoui.c​​om/themebuilder/mobile.html](http://demos.kendoui.com/themebuilder/mobile.html)

# r - 将缺失的日期插入数据框中

> ID：14776975
> 
> 赞同：3
> 
> 时间：2013-02-08T16:24:44.867
> 
> 标签：r

我有这个数据框：

```
 Date    Company           Region Units
1  1/1/2012        IBM          America    10
2  1/1/2012        IBM           Europe     4
3  1/1/2012        IBM          Pacific     2
4  1/1/2012         HP          America    10
5  1/1/2012         HP           Europe     2
6  1/1/2012    Gateway         Americas     2
7  1/2/2012        IBM         Americas    10
8  1/2/2012         HP           Europe     2
9 1/12/2012    Gateway         Americas    10

dput(x)
structure(list(Date = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 3L, 
3L, 2L), .Label = c("1/1/2012", "1/12/2012", "1/2/2012"), class = "factor"), 
    Company = structure(c(3L, 3L, 3L, 2L, 2L, 1L, 3L, 2L, 4L), .Label = c("   Gateway", 
    "   HP", "   IBM", "  Gateway"), class = "factor"), Region = structure(c(3L, 
    5L, 6L, 1L, 2L, 7L, 4L, 2L, 7L), .Label = c("         America", 
    "         Europe", "        America", "        Americas", 
    "        Europe", "        Pacific", "    Americas"), class = "factor"), 
    Units = c(10L, 4L, 2L, 10L, 2L, 2L, 10L, 2L, 10L)), .Names = c("Date", 
"Company", "Region", "Units"), class = "data.frame", row.names = c(NA, 
-9L)) 
```

我想创建一个热图，但是缺少很多日期，所以看起来不太好。我需要为每个缺失的地区和日期的单位填写 )。

我需要为每个公司和每个日期设置 3 个区域，如果缺少日期和区域，请将其插入并为单位输入 0。

我可以从 2012 年 1 月 1 日到 2012 年 1 月 12 日为所有日期创建此向量：

```
d<-seq(as.Date(c("1/1/2012"), format="%m/%d/%Y"), as.Date(c("12/12/2012"), format="%m/%d/%Y"), by="mon") 
```

对于每个公司，我必须检查向量 d 中的日期是否存在于所有三个区域中，如果不使用 Units 0 插入它。

是否有捷径可寻？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:53:36.237

`expand.grid`如果您事先不知道公司区域或日期值，则可以使用。

```
> a <- structure(list(Date = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 3L,
+ 3L, 2L), .Label = c("1/1/2012", "1/12/2012", "1/2/2012"), class = "factor"),
+ Company = structure(c(3L, 3L, 3L, 2L, 2L, 1L, 3L, 2L, 4L), .Label = c("   Gateway",
+ "   HP", "   IBM", "  Gateway"), class = "factor"), Region = structure(c(3L,
+ 5L, 6L, 1L, 2L, 7L, 4L, 2L, 7L), .Label = c("         America",
+ "         Europe", "        America", "        Americas",
+ "        Europe", "        Pacific", "    Americas"), class = "factor"),
+ Units = c(10L, 4L, 2L, 10L, 2L, 2L, 10L, 2L, 10L)), .Names = c("Date",
+ "Company", "Region", "Units"), class = "data.frame", row.names = c(NA,
+ -9L))
> 
> b <- expand.grid(Date=unique(a$Date), Company=unique(a$Company), Region=unique(a$Region))
> 
> 
> 
> z <- merge(x=b,y=a, all.x=T)
> 
> z[is.na(z)] <- 0
> z
        Date    Company           Region Units
1   1/1/2012    Gateway          America     0
2   1/1/2012    Gateway           Europe     0
3   1/1/2012    Gateway          America     0
4   1/1/2012    Gateway         Americas     0
5   1/1/2012    Gateway           Europe     0
6   1/1/2012    Gateway          Pacific     0
7   1/1/2012    Gateway         Americas     2
8   1/1/2012         HP          America    10
9   1/1/2012         HP           Europe     2
10  1/1/2012         HP          America     0
11  1/1/2012         HP         Americas     0
12  1/1/2012         HP           Europe     0
13  1/1/2012         HP          Pacific     0
14  1/1/2012         HP         Americas     0
15  1/1/2012        IBM          America     0
16  1/1/2012        IBM           Europe     0
17  1/1/2012        IBM          America    10
18  1/1/2012        IBM         Americas     0
19  1/1/2012        IBM           Europe     4
20  1/1/2012        IBM          Pacific     2
21  1/1/2012        IBM         Americas     0
22  1/1/2012    Gateway          America     0
23  1/1/2012    Gateway           Europe     0
24  1/1/2012    Gateway          America     0
25  1/1/2012    Gateway         Americas     0
26  1/1/2012    Gateway           Europe     0
27  1/1/2012    Gateway          Pacific     0
28  1/1/2012    Gateway         Americas     0
29 1/12/2012    Gateway          America     0
30 1/12/2012    Gateway           Europe     0
31 1/12/2012    Gateway          America     0
32 1/12/2012    Gateway         Americas     0
33 1/12/2012    Gateway           Europe     0
34 1/12/2012    Gateway          Pacific     0
35 1/12/2012    Gateway         Americas     0
36 1/12/2012         HP          America     0
37 1/12/2012         HP           Europe     0
38 1/12/2012         HP          America     0
39 1/12/2012         HP         Americas     0
40 1/12/2012         HP           Europe     0
41 1/12/2012         HP          Pacific     0
42 1/12/2012         HP         Americas     0
43 1/12/2012        IBM          America     0
44 1/12/2012        IBM           Europe     0
45 1/12/2012        IBM          America     0
46 1/12/2012        IBM         Americas     0
47 1/12/2012        IBM           Europe     0
48 1/12/2012        IBM          Pacific     0
49 1/12/2012        IBM         Americas     0
50 1/12/2012    Gateway          America     0
51 1/12/2012    Gateway           Europe     0
52 1/12/2012    Gateway          America     0
53 1/12/2012    Gateway         Americas     0
54 1/12/2012    Gateway           Europe     0
55 1/12/2012    Gateway          Pacific     0
56 1/12/2012    Gateway         Americas    10
57  1/2/2012    Gateway          America     0
58  1/2/2012    Gateway           Europe     0
59  1/2/2012    Gateway          America     0
60  1/2/2012    Gateway         Americas     0
61  1/2/2012    Gateway           Europe     0
62  1/2/2012    Gateway          Pacific     0
63  1/2/2012    Gateway         Americas     0
64  1/2/2012         HP          America     0
65  1/2/2012         HP           Europe     2
66  1/2/2012         HP          America     0
67  1/2/2012         HP         Americas     0
68  1/2/2012         HP           Europe     0
69  1/2/2012         HP          Pacific     0
70  1/2/2012         HP         Americas     0
71  1/2/2012        IBM          America     0
72  1/2/2012        IBM           Europe     0
73  1/2/2012        IBM          America     0
74  1/2/2012        IBM         Americas    10
75  1/2/2012        IBM           Europe     0
76  1/2/2012        IBM          Pacific     0
77  1/2/2012        IBM         Americas     0
78  1/2/2012    Gateway          America     0
79  1/2/2012    Gateway           Europe     0
80  1/2/2012    Gateway          America     0
81  1/2/2012    Gateway         Americas     0
82  1/2/2012    Gateway           Europe     0
83  1/2/2012    Gateway          Pacific     0
84  1/2/2012    Gateway         Americas     0 
```

### 注意：您的数据似乎具有和等的重复`America`值`Gateway`。因此，它们在使用时出现不止一次`expand.grid`

# python - Python - 读取文件时嵌套循环不起作用

> ID：14776976
> 
> 赞同：0
> 
> 时间：2013-02-08T16:24:46.883
> 
> 标签：python, text, iteration

这个嵌套循环在读取列表时工作正常：

```
list = [1,2,3,4,5]
num = 0
while num < 5:
  for i in list:
     print(i)
     num += 1 
```

此循环将打印列表中的所有元素。问题是它在读取文本文件时根本不起作用。它不会打印前 5 行文本，而是通读所有文本并打印它们。

```
f = open(r'C:\Users\Me\Python\bible.txt')
num = 0
while num < 50:
   for line in f:
      print(line)
      num += 1 
```

我只能假设 num 变量在每次迭代后都不会增加，这是有原因的，有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:29:20.980

编码

```
for line in f:
    print line
    num += 1 
```

正在遍历文件中的所有行。同时增加`num`一。所以在for循环结束时`num`会等于文件中的行数，可能大于50，所以会退出while循环。

使用你的风格，你应该写：

```
for line in f:
   print line
   num += 1
   if num > 50: break 
```

第一个代码也有同样的问题。如果要在一维中循环一个结构，为什么需要两个循环？您的代码不是很pythonic，例如您应该将它们重写为：

```
list = [1,2,3,4,5]
for i in list:
   print i

for i,line in enumerate(f):
    print line
    if i > 50: break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:34:12.137

即使在第一个示例中，我也不相信您的代码有效。由于您编写了两个嵌套循环，因此在检查外部循环的终止之前，内部循环将*始终完成。*我建议放下外圈并插入类似的东西

> 如果 num > 50：中断

进入内循环。

# c# - 如何找到您的 asp.net 页面从中呈现的服务器名称？

> ID：14776979
> 
> 赞同：0
> 
> 时间：2013-02-08T16:24:57.010
> 
> 标签：c#, asp.net-mvc

我有一个 asp.net 网络应用程序。它部署在各种服务器上。有没有办法找出网页正在从哪个服务器呈现或加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:29:46.393

```
Rendered on <%= System.Environment.MachineName %> 
```

# python - 包含字符串和整数的拆分列表

> ID：14776980
> 
> 赞同：9
> 
> 时间：2013-02-08T16:25:00.413
> 
> 标签：python, string, list, integer

```
myList = [ 4,'a', 'b', 'c', 1 'd', 3] 
```

如何将此列表拆分为两个列表，其中一个包含字符串，另一个包含*优雅/pythonic*方式的整数？

输出：

```
myStrList = [ 'a', 'b', 'c', 'd' ]

myIntList = [ 4, 1, 3 ] 
```

注意：没有实现这样的列表，只是想着如何为这样的问题找到一个优雅的答案（有吗？）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T16:28:38.410

正如其他人在评论中提到的那样，您应该真正开始考虑如何首先摆脱包含非同质数据的列表。但是，如果这真的*做不到*，我会使用 defaultdict：

```
from collections import defaultdict
d = defaultdict(list)
for x in myList:
   d[type(x)].append(x)

print d[int]
print d[str] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-08T16:30:47.697

您可以使用列表理解：-

```
>>> myList = [ 4,'a', 'b', 'c', 1, 'd', 3]
>>> myIntList = [x for x in myList if isinstance(x, int)]
>>> myIntList
[4, 1, 3]
>>> myStrList = [x for x in myList if isinstance(x, str)]
>>> myStrList
['a', 'b', 'c', 'd'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T16:32:35.870

```
def filter_by_type(list_to_test, type_of):
    return [n for n in list_to_test if isinstance(n, type_of)]

myList = [ 4,'a', 'b', 'c', 1, 'd', 3]
nums = filter_by_type(myList,int)
strs = filter_by_type(myList,str)
print nums, strs

>>>[4, 1, 3] ['a', 'b', 'c', 'd'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T16:59:33.720

根据在原始列表中找到的类型拆分列表

```
myList = [ 4,'a', 'b', 'c', 1, 'd', 3]
types = set([type(item) for item in myList])
ret = {}
for typeT in set(types):
    ret[typeT] = [item for item in myList if type(item) == typeT]

>>> ret
{<type 'str'>: ['a', 'b', 'c', 'd'], <type 'int'>: [4, 1, 3]} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-03T17:53:00.900

我将通过回答一个 Python 常见问题来总结这个线程：“你如何编写一个以任意顺序、范围很窄的类型接受参数的方法？”

假设所有参数的从左到右的顺序并不重要，试试这个（基于@mgilson 的回答）：

```
def partition_by_type(args, *types):
    d = defaultdict(list)

    for x in args:
        d[type(x)].append(x)

    return [ d[t] for t in types ]

def cook(*args):
    commands, ranges = partition_by_type(args, str, range)

    for range in ranges:
        for command in commands:
            blah blah blah... 
```

现在您可以调用`cook('string', 'string', range(..), range(..), range(..))`. 参数顺序在其类型内是稳定的。

```
# TODO  make the strings collect the ranges, preserving order 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-08T08:53:45.327

```
n = (input("Enter  string and digits: "))
d=[]
s=[]
for  x in range(0,len(n)):
    if str(n[x]).isdigit():
        d.append(n[x])
    else
        s.append(n[x])
print(d)
print(s) 
```

**编辑1：这是另一个解决方案**

```
import re
x = input("Enter any string that contains characters and integers: ")
s = re.findall('[0-9]',x)
print(s)
c = re.findall('[a-z/A-Z]',x)
print(c) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-31T17:22:13.443

您可以使用此代码作为示例，使用函数 isdigit() 创建两个不同的列表，该函数检查字符串中的整数。

```
ip=['a',1,2,3]
m=[]
n=[]
for x in range(0,len(ip):
    if str(ip[x]).isdigit():
        m.append(ip[x])
    else:n.append(ip[x])
print(m,n) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-10T15:00:05.890

```
myList = [ 4,'a', 'b', 'c', 1 'd', 3]

myList_string = []
myList_number = []

for a in myList:
  if type(a) == int or type(a) == float:
    myList_number.append(a)
  elif type(a) == str:
    myList_string.append(a) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-03-13T11:13:43.750

```
import strings;
num=strings.digits;
str=strings.letters;
num_list=list()
str_list=list()
for i in myList:
    if i in num:
        num_list.append(int(i))
    else:
        str_list.append(i) 
```

# ios - 如何从 Interface Builder 中的圆角矩形 UIButton 继承？

> ID：14776984
> 
> 赞同：0
> 
> 时间：2013-02-08T16:25:14.057
> 
> 标签：ios, uibutton

我创建了一个继承自`UIButton`. 如果我将圆角矩形按钮添加到我的 XIB 并将它们的类属性设置为`UIButton`，它们会显示为圆角矩形按钮（但是我的自定义代码都不会被调用，因此按钮的行为就像普通按钮一样，这不是我想要的）。如果我在 IB 中将这些按钮的类属性设置为我的自定义类`UIButtonCustom`，它们在 IB 设计器中仍然看起来是圆角矩形按钮，但是当我运行应用程序时，按钮属于自定义类型（这意味着它们在按钮中大部分显示为空白文本，因为我没有为按钮设置任何背景图像）。

当应用程序实际运行时，有什么方法可以让这些按钮看起来像圆角矩形按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:38:17.813

您在 xib 上看到的圆形按钮是 ie 的子`UIButton`类`UIRoundedRectButton`。
而且我认为您不能对其进行子类化，因为它没有记录（私有 API）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:06:14.417

正如其他人在这里指出的那样，您不能子类化 UIRoundedRectButton。但是你可以通过在你的 init 方法中设置一些 CALayer 属性来让你的按钮看起来像圆角矩形按钮。

```
#import "MyCustomButton.h"
#import <QuartzCore/QuartzCore.h>

@implementation MyCustomButton

- (id)initWithFrame:(CGRect)frame
    //button created in code
{
    self = [super initWithFrame:frame];
    if (self) {
        [self initialise];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder;
    //button created in Interface Builder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
            [self initialise];
    }
    return self;
}

- (void)initialise;
{
    self.layer.cornerRadius  = 10.0f;
    self.layer.borderWidth = 1.0f;
    self.layer.borderColor = [[UIColor  lightGrayColor] CGColor];
}

@end 
```

如果您禁用了自动布局，您可以继续在 IB 中使用“圆角矩形”按钮样式，以在布局中为您提供正确的外观，尽管当您的自定义按钮加载时该样式将被忽略。如果启用了自动布局，您必须将 IB 样式更改为“自定义”，否则您会发现按钮框架的行为方式与您期望的不同。

# c# - 使用 C# 在 Internet Explorer 中检索当前页面

> ID：14776988
> 
> 赞同：1
> 
> 时间：2013-02-08T16:25:36.243
> 
> 标签：c#, html, api, internet-explorer, hook

我目前正在寻找解决我遇到的问题的方法。我的目标是能够获得已经看过的 HTML 页面的源代码。本来我打算浏览一下 IE 的历史，然后获取每个访问过的站点的源代码，但是目前这不可行，如果可能的话，我正在寻找一种方法，它可以简单地提取当前在 Internet Explorer 中查看的页面，然后提取源代码。

客户端应用程序是否有可能做到这一点？连接到 Internet Explorer 并获取源代码？如果是这样，如何，参考什么等。请注意，我不想在客户端使用我自己的浏览器，而是应用程序 Internet Explorer。

谢谢！

互联网浏览器 8 / 9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:25:52.987

您可以通过两种方法做到这一点。

首先是像[FiddlerCore这样的 http 代理](http://www.fiddler2.com/fiddler/Core/)

其次是 MSHTML（COM 库：Microsoft HTML 对象库）

```
Dim tWindows As ShellWindows = new ShellWindows
For Each tInstance As IWebBrowser2 in tWindows
  Console.WriteLine(tInstance.LocationURL)
Next 
```

# python - Javascript 解释器只在第一页执行

> ID：14776989
> 
> 赞同：1
> 
> 时间：2013-02-08T16:25:36.000
> 
> 标签：python, python-2.7, pyqt, pyqt4

我有以下类可以返回任何给定网页的 HTML：

```
from PyQt4.QtCore import QUrl, SIGNAL
from PyQt4.QtGui import QApplication
from PyQt4.QtWebKit import QWebPage

from bs4 import BeautifulSoup
from bs4.dammit import UnicodeDammit
import sys
import signal

class Render(QWebPage):
    def __init__(self, url):
        self.app = QApplication(sys.argv)
        QWebPage.__init__(self)
        self.html = None
        signal.signal(signal.SIGINT, signal.SIG_DFL)
        self.connect(self, SIGNAL('loadFinished(bool)'), self._finished_loading)
        self.mainFrame().load(QUrl(url))
        self.app.exec_()

    def _finished_loading(self, result):
        self.html = self.mainFrame().toHtml()
        self.soup = BeautifulSoup(UnicodeDammit(self.html).unicode_markup)
        self.app.quit() 
```

我有一个循环来遍历需要运行的 JavaScript 的网页列表，例如：

```
l = ["http://host.com/page1", "http://host.com/page2"]

for page in l:
    soup = Render(page).soup
    #Do-something 
```

问题是 JavaScript 代码仅在加载的第一个页面中执行，之后不解释任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:27:11.833

它可能页面已成功加载，但它有不止一帧。更准确地说，有时`page.mainFrame().childFrames()`不是空的。您不仅需要处理主框架，还需要处理它的子框架。
例如：

```
def _finished_loading(self, result):
    self.html = self.mainFrame().toHtml()
    self.soup = BeautifulSoup(UnicodeDammit(self.html).unicode_markup)
    # process childFrames
    self.htmls = [frame.toHtml() for frame in self.mainFrame().childFrames()]
    self.soups = [BeautifulSoup(UnicodeDammit(html).unicode_markup) for html in self.htmls]
    self.app.quit() 
```

# php - 如何将日文英文字符转换为普通英文字符？

> ID：14776998
> 
> 赞同：2
> 
> 时间：2013-02-08T16:25:58.113
> 
> 标签：php, string, utf-8, character

我有一个日文英文字符。这个字符不是正常的英文字符串。

```
Characters: Ｇａｍｅ 
```

如何在**php**中将此字符转换为普通英文字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:51:39.993

从每个字符的序数值中减去 65248。换句话说：

```
$str = "Ｇａｍｅ some other text by ヴィックサ";
$str = preg_replace_callback(
    "/[\x{ff01}-\x{ff5e}]/u",
    function($c) {
        // convert UTF-8 sequence to ordinal value
        $code = ((ord($c[0][0])&0xf)<<12)|((ord($c[0][1])&0x3f)<<6)|(ord($c[0][2])&0x3f);
        return chr($code-0xffe0);
    },
    $str); 
```

这会将所有“全角”字符替换为其正常宽度等效项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-07T14:12:29.130

使用 mb_convert_kana 会更容易：

```
$string = 'Characters: Ｇａｍｅ';
$newString = mb_convert_kana($string,'a'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:29:27.137

我敢肯定有一个更简单的答案，但你不能用特殊宪章作为键和你想要的字符作为值来制作一个字典对象

然后只做一个简单的查找和替换？