# StackOverflow 问答 13215000-13215999

# ruby-on-rails - 既然有身份模型，我应该从我的用户模型中删除所有身份验证代码吗？

> ID：13215000
> 
> 赞同：0
> 
> 时间：2012-11-04T00:44:08.960
> 
> 标签：ruby-on-rails, omniauth

我刚刚遇到了[omniauth-identity](https://github.com/intridea/omniauth-identity)，它使用户能够在不使用Facebook、Twitter等的情况下登录和注册。

有一个步骤是你必须创建一个`Identity`模型（我正在关注这个[Railscast](http://railscasts.com/episodes/304-omniauth-identity)）：

```
class Identity < OmniAuth::Identity::Models::ActiveRecord

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

现在，我已经有了一个`User`模型和一个登录和注册系统（按照[Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)创建）：

**用户.rb：**

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation

  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  private

  def create_remember_token
   self.remember_token = SecureRandom.urlsafe_base64
  end 
```

所以我有点困惑。是否应该删除与`User`模型中的身份验证有关的行（例如验证`attr_accesible`等`create_remember_token`以及用户表中的`name`和`email`字段）？

并删除**session_helper.rb**呢？

```
module SessionsHelper
  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_url, notice: "Please sign in."
    end
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

因为，如果我错了，请纠正我，但我认为`omniauth-identity`也可以处理（除了`current_user`部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:55:02.510

创建身份模型主要用于向多个提供者进行身份验证。下面是如何去做的一个很好的描述：

[https://github.com/intridea/omniauth/wiki/Managing-Multiple-Providers](https://github.com/intridea/omniauth/wiki/Managing-Multiple-Providers)

它回答了您的问题，用户模型应该是什么，身份模型应该是什么。

# linux - 复合命令的第二行和后续行不受 bash 中的 HISTCONTROL 影响吗？

> ID：13215003
> 
> 赞同：0
> 
> 时间：2012-11-04T00:45:17.017
> 
> 标签：linux, bash

在查阅 bash 的手册页时，它读到了关于 bash 历史的这句话：

> 多行复合命令的第二行和后续行不经过测试，无论 的值如何，都会添加到历史记录中 `HISTCONTROL`。

但我试过这个：

```
$ HISTCONTROL=ignorespace
$  if [ -f /var/log/messages ]
> then
> echo "/var/log/message exists."
> fi
$ history | tail -2
   18  HISTCONTROL=ignorespace
   19  history | tail -2 
```

请注意，`if`以空格开头。为什么这个`if`复合命令的第二行仍然没有出现在历史记录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:04:13.570

多行命令将是 shell 的一行：

```
$  if [ -f /var/log/messages ]
> then
> echo "/var/log/message exists."
> fi 
```

是一样的：

```
if [ -f /var/log/messages ]; then echo "/var/log/message exists."; fi 
```

因此，如果您在一行命令上放置空格，它将像历史设置一样被忽略。

ADD：shell选项cmdhist的作用

```
shopt -s cmdhist # set cmdhist (is set by default)
if [ -d /tmp ]
> then
> echo Hello
> fi
Hello
history 2
43  if [ -d /tmp ]; then echo Hello; fi
44  history 2 
```

在这种情况下，多行命令连接到单行。

```
shopt -u cmdhist # unset cmdhist
if [ -d /tmp ]
> then
> echo Hello
> fi
Hello
history 5
   46  if [ -d /tmp ]
   47  then
   48  echo Hello
   49  fi
   50  history 5 
```

在这些情况下，您可以分别查看历史记录中的每一行。

如果您现在设置了 ignorespace 选项，它应该适用于 if[] 的所有 4 行。所以猜测免责声明（在 bash man 中）会说不确定它是否始终与 cmdhist=off 一起工作。所以ignoreoption肯定不会在第二行“then”上工作。如果您在“then”之前放置一个空格，它将不会被忽略。它仅适用于第一行，但随后适用于所有下一行。

所以最后一个例子（不忽略第二行以空格开头）

```
if [ -d /tmp ]
>  then
> echo Hello
> fi
Hello
history 5
   66  if [ -d /tmp ]
   67   then
   68  echo Hello
   69  fi
   70  history 5 
```

我希望这能回答你的问题。

# sql - 从 XML 将数据导入 SQLite

> ID：13215005
> 
> 赞同：2
> 
> 时间：2012-11-04T00:45:35.130
> 
> 标签：sql, xml, sqlite

我正在尝试将存储在 XML 文件中的数据导入我的 SQLite 数据库。插入查询如下所示：

```
INSERT INTO table1 VALUES (rank, name)
SELECT X.record.query('rank').value('.', 'INT'),
       X.record.query('name').value('.', 'VARCHAR(30)')
FROM (
  SELECT CAST(x AS XML)
  FROM OPENROWSET(BULK 'data.xml', SINGLE_BLOB) AS T(x)
     ) AS T(x)
CROSS APPLY x.nodes('data/record') AS X(record); 
```

XML 数据如下所示：

```
<data>
    <record>
        <rank>1</rank>
        <name>One</name>
    </record>
    <record>
        <rank>2</rank>
        <name>Two</name>
    </record>
    ...
</data> 
```

但是，我收到“SQL 命令未在外部 SELECT 语句正确结束，我不知道为什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:14:46.077

您似乎将 SQL Server 的 SQL 方言与 SQLite 一起使用，这是行不通的。在开始与它交谈之前，您应该将您的 xml 转换为 SQLite 的 SQL 方言。更具体地说，使用 Python/C#/XSLT 等而不是直接在 SQL 中将您的 xml 转换为 SQLite 知道的 SQL。

# java - 如何将多个类中的图形绘制到单个面板

> ID：13215008
> 
> 赞同：0
> 
> 时间：2012-11-04T00:45:59.427
> 
> 标签：java, swing, graphics, jframe

目前，我有两个将图像和形状绘制到 JFrame 的 JPanel 类（我将来会有更多），我这样做是为了使事情井井有条。

起初我尝试将每个 JPanel 添加到 JFrame，但一个 JPanel 会在另一个上绘制。

每个类都应该能够调用其他可以将图像绘制到屏幕上的类。

我遇到的问题是我无法让它们绘制到屏幕上。

我应该使用`paintComponent`or`paintAll`吗？应该如何使用它们？

感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T00:50:24.230

听起来好像您正在将两个面板添加到`JFrame`可能在该位置的同一`BorderLayout.CENTER`位置。一种解决方案是使用`GridLayout`带有 2 列的a`JFrame`并添加 2 个面板。

`paintComponent`是在面板中覆盖的正确方法。

按照[自定义绘画轨迹](http://docs.oracle.com/javase/tutorial/uiswing/painting/)，看看它应该如何使用。

# desire2learn - D2L - 用户点击 URL 链接，如何获取用户当前课程

> ID：13215010
> 
> 赞同：1
> 
> 时间：2012-11-04T00:46:07.553
> 
> 标签：desire2learn

我知道我可以获取用户拥有的课程，但我想知道用户此时在哪里 - 单击指向我们外部应用程序的链接。我在 valence/desire2learn.com 网站的 PHP 入门示例上进行构建。我们在许多课程材料中使用 d2l，但希望生成一些跟踪和图表供学生查看。这将涉及获取成绩信息（我想我可以做到），让学生输入学习时间（在我们的应用程序中），存储该信息并返回比较课程成绩和课程学习时间的图表。自动选择正确的课程比让学生选择正确的课程要好得多。

可以做到吗（获取点击链接时学生所在的课程）？除了必须选择哪门课程的烦恼之外，在教师使用此工具的情况下，学生可能会同时学习一门以上的课程。

提前感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:27:05.427

如果您使用 LTI v1.0 ( [Basic LTI](http://www.imsglobal.org/lti/blti/bltiv1p0/ltiBLTIimgv1p0.html) ) 构建从 D2L 启动到您的外部应用程序的链接，那么传递给您的应用程序的 LTI 上下文将包含一个`context_id`属性：该属性的值将是`org unit ID`标识 D2L 组织的启动点上下文的单位（在本例中为课程提供的 ID）。请注意，在 LE v10.2.0 SP1 之前，D2L 不会`context_id`为顶级组织级别发送 ，但如果用户从课程提供上下文启动 LTI 链接，您应该获取课程提供的组织单位 ID。

# mule - 在 Mule 3.3 的捕获异常策略中混合表达式

> ID：13215018
> 
> 赞同：0
> 
> 时间：2012-11-04T00:48:16.303
> 
> 标签：mule

我正在尝试在我的 Mule 流程中实现错误处理逻辑，并且我想测试 HTTP 状态代码。我已经实现了一个消息过滤器，并希望我`catch-exception-strategy`能捕捉到`org.mule.api.routing.filter.FilterUnacceptedException`抛出`message-property-filter`，我可以这样做，但我希望它几乎是嵌套的，但我知道我不能这样做，所以我将我的逻辑语句组合为一个`AND`操作，像这样：

```
<catch-exception-strategy when="#[exception.causedBy(org.mule.api.routing.filter.FilterUnacceptedException) &amp;&amp; header:INBOUND:http.status=404]" doc:name="Catch Exception Strategy"> 
```

当它被击中时，这如何导致我的流程出错：

```
[11-03 19:42:33] ERROR CatchMessagingExceptionStrategy [[fault_test].connector.http.mule.default.receiver.02]: 
********************************************************************************
Message               : Message has been rejected by filter. Message payload is of type: ReleasingInputStream
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. Message has been rejected by filter. Message payload is of type: ReleasingInputStream (org.mule.api.routing.filter.FilterUnacceptedException)
  org.mule.routing.MessageFilter:100 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/routing/filter/FilterUnacceptedException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.mule.api.routing.filter.FilterUnacceptedException: Message has been rejected by filter. Message payload is of type: ReleasingInputStream
    at org.mule.routing.MessageFilter.filterUnacceptedException(MessageFilter.java:100)
    at org.mule.processor.AbstractFilteringMessageProcessor.handleUnaccepted(AbstractFilteringMessageProcessor.java:62)
    at org.mule.processor.AbstractFilteringMessageProcessor.process(AbstractFilteringMessageProcessor.java:48)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
********************************************************************************

[11-03 19:42:33] ERROR CatchMessagingExceptionStrategy [[fault_test].connector.http.mule.default.receiver.02]: Failed to dispatch message to error queue after it failed to process.  This may cause message loss.Logging Message here: 

org.mule.DefaultMuleMessage
{
  id=856cd942-2618-11e2-9e97-f5a070de55a6
  payload=org.mule.transport.http.ReleasingInputStream
  correlationId=<not set>
  correlationGroup=-1
  correlationSeq=-1
  encoding=UTF-8
  exceptionPayload=org.mule.message.DefaultExceptionPayload@e90e23

Message properties:
  INVOCATION scoped properties:
  INBOUND scoped properties:
    Connection=true
    Content-Type=text/xml;charset=UTF-8
    Date=Sat, 03 Nov 2012 07:42:32 CDT
    Keep-Alive=true
    MULE_ENCODING=UTF-8
    MULE_SESSION=rO0ABXNyACNvcmcubXVsZS5zZXNzaW9uLkRlZmF1bHRNdWxlU2Vzc2lvbi7rdtEW7GGKAwAEWgAFdmFsaWRMAA1mbG93Q29uc3RydWN0dAAmTG9yZy9tdWxlL2FwaS9jb25zdHJ1Y3QvRmxvd0NvbnN0cnVjdDtMAAJpZHQAEkxqYXZhL2xhbmcvU3RyaW5nO0wAD3NlY3VyaXR5Q29udGV4dHQAJ0xvcmcvbXVsZS9hcGkvc2VjdXJpdHkvU2VjdXJpdHlDb250ZXh0O3hwAXB0ACQ4NTVjMTA1Yy0yNjE4LTExZTItOWU5Ny1mNWEwNzBkZTU1YTZwc3IAJWphdmEudXRpbC5Db2xsZWN0aW9ucyRTeW5jaHJvbml6ZWRNYXAbc/kJS0s5ewMAAkwAAW10AA9MamF2YS91dGlsL01hcDtMAAVtdXRleHQAEkxqYXZhL2xhbmcvT2JqZWN0O3hwc3IAJG9yZy5tdWxlLnV0aWwuQ2FzZUluc2Vuc2l0aXZlSGFzaE1hcJ3R2e9nRc4AAwAAeHB3DD9AAAAAAAAQAAAAAHhxAH4ACXh4
    Server=Mule EE Core Extensions/3.3.0
    Set-Cookie=[Lorg.apache.commons.httpclient.Cookie;@9f2588
    Transfer-Encoding=chunked
    http.headers={MULE_SESSION=rO0ABXNyACNvcmcubXVsZS5zZXNzaW9uLkRlZmF1bHRNdWxlU2Vzc2lvbi7rdtEW7GGKAwAEWgAFdmFsaWRMAA1mbG93Q29uc3RydWN0dAAmTG9yZy9tdWxlL2FwaS9jb25zdHJ1Y3QvRmxvd0NvbnN0cnVjdDtMAAJpZHQAEkxqYXZhL2xhbmcvU3RyaW5nO0wAD3NlY3VyaXR5Q29udGV4dHQAJ0xvcmcvbXVsZS9hcGkvc2VjdXJpdHkvU2VjdXJpdHlDb250ZXh0O3hwAXB0ACQ4NTVjMTA1Yy0yNjE4LTExZTItOWU5Ny1mNWEwNzBkZTU1YTZwc3IAJWphdmEudXRpbC5Db2xsZWN0aW9ucyRTeW5jaHJvbml6ZWRNYXAbc/kJS0s5ewMAAkwAAW10AA9MamF2YS91dGlsL01hcDtMAAVtdXRleHQAEkxqYXZhL2xhbmcvT2JqZWN0O3hwc3IAJG9yZy5tdWxlLnV0aWwuQ2FzZUluc2Vuc2l0aXZlSGFzaE1hcJ3R2e9nRc4AAwAAeHB3DD9AAAAAAAAQAAAAAHhxAH4ACXh4, Transfer-Encoding=chunked, Date=Sat, 03 Nov 2012 07:42:32 CDT, MULE_ENCODING=UTF-8, Keep-Alive=true, Set-Cookie=[Lorg.apache.commons.httpclient.Cookie;@9f2588, Connection=true, http.status=500, Content-Type=text/xml;charset=UTF-8, Server=Mule EE Core Extensions/3.3.0}
    http.method=POST
    http.query.params={}
    http.query.string=
    http.status=500
    http.version=HTTP/1.1
  OUTBOUND scoped properties:
    MULE_ENCODING=UTF-8
    MULE_SESSION=rO0ABXNyACNvcmcubXVsZS5zZXNzaW9uLkRlZmF1bHRNdWxlU2Vzc2lvbi7rdtEW7GGKAwAEWgAFdmFsaWRMAA1mbG93Q29uc3RydWN0dAAmTG9yZy9tdWxlL2FwaS9jb25zdHJ1Y3QvRmxvd0NvbnN0cnVjdDtMAAJpZHQAEkxqYXZhL2xhbmcvU3RyaW5nO0wAD3NlY3VyaXR5Q29udGV4dHQAJ0xvcmcvbXVsZS9hcGkvc2VjdXJpdHkvU2VjdXJpdHlDb250ZXh0O3hwAXB0ACQ4NTVjMTA1Yy0yNjE4LTExZTItOWU5Ny1mNWEwNzBkZTU1YTZwc3IAJWphdmEudXRpbC5Db2xsZWN0aW9ucyRTeW5jaHJvbml6ZWRNYXAbc/kJS0s5ewMAAkwAAW10AA9MamF2YS91dGlsL01hcDtMAAVtdXRleHQAEkxqYXZhL2xhbmcvT2JqZWN0O3hwc3IAJG9yZy5tdWxlLnV0aWwuQ2FzZUluc2Vuc2l0aXZlSGFzaE1hcJ3R2e9nRc4AAwAAeHB3DD9AAAAAAAAQAAAAAHhxAH4ACXh4
  SESSION scoped properties:
}
org.mule.api.MessagingException: [Error: was expecting type: java.lang.Boolean; but found type: java.util.Map]
[Near : {... eader:INBOUND:http.status=404 ....}]
                                          ^
[Line: 1, Column: 110] (org.mule.api.expression.InvalidExpressionException). Message payload is of type: ReleasingInputStream
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:35)
    at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
    at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
    at org.mule.processor.chain.DefaultMessageProcessorChain.doProcess(DefaultMessageProcessorChain.java:93)
    at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:66)
    at org.mule.processor.chain.InterceptingChainLifecycleWrapper.doProcess(InterceptingChainLifecycleWrapper.java:57)
    at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:66)
    at org.mule.processor.chain.InterceptingChainLifecycleWrapper.access$001(InterceptingChainLifecycleWrapper.java:29)
    at org.mule.processor.chain.InterceptingChainLifecycleWrapper$1.process(InterceptingChainLifecycleWrapper.java:90)
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
    at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
    at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
    at org.mule.processor.chain.InterceptingChainLifecycleWrapper.process(InterceptingChainLifecycleWrapper.java:85)
    at org.mule.exception.TemplateMessagingExceptionStrategy.route(TemplateMessagingExceptionStrategy.java:136)
    at org.mule.exception.TemplateMessagingExceptionStrategy.handleException(TemplateMessagingExceptionStrategy.java:46)
    at org.mule.exception.ChoiceMessagingExceptionStrategy.handleException(ChoiceMessagingExceptionStrategy.java:44)
    at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:45)
    at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:18)
    at org.mule.execution.BeginAndResolveTransactionInterceptor.execute(BeginAndResolveTransactionInterceptor.java:58)
    at org.mule.execution.ResolvePreviousTransactionInterceptor.execute(ResolvePreviousTransactionInterceptor.java:48)
    at org.mule.execution.SuspendXaTransactionInterceptor.execute(SuspendXaTransactionInterceptor.java:54)
    at org.mule.execution.ValidateTransactionalStateInterceptor.execute(ValidateTransactionalStateInterceptor.java:44)
    at org.mule.execution.IsolateCurrentTransactionInterceptor.execute(IsolateCurrentTransactionInterceptor.java:44)
    at org.mule.execution.ExternalTransactionInterceptor.execute(ExternalTransactionInterceptor.java:52)
    at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:32)
    at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:17)
    at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:113)
    at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:34)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.doRequest(HttpMessageReceiver.java:305)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.processRequest(HttpMessageReceiver.java:251)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:163)
    at org.mule.work.WorkerContext.run(WorkerContext.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.mule.api.expression.InvalidExpressionException: [Error: was expecting type: java.lang.Boolean; but found type: java.util.Map]
[Near : {... eader:INBOUND:http.status=404 ....}]
                                          ^
[Line: 1, Column: 110]
    at org.mule.el.mvel.MVELExpressionLanguage.validate(MVELExpressionLanguage.java:244)
    at org.mule.el.mvel.MVELExpressionLanguage.evaluateInternal(MVELExpressionLanguage.java:195)
    at org.mule.el.mvel.MVELExpressionLanguage.evaluate(MVELExpressionLanguage.java:169)
    at org.mule.expression.DefaultExpressionManager.evaluate(DefaultExpressionManager.java:234)
    at org.mule.expression.DefaultExpressionManager.evaluateBoolean(DefaultExpressionManager.java:361)
    at org.mule.routing.filters.ExpressionFilter.accept(ExpressionFilter.java:127)
    at org.mule.routing.ChoiceRouter.selectProcessors(ChoiceRouter.java:35)
    at org.mule.routing.AbstractSelectiveRouter.process(AbstractSelectiveRouter.java:194)
    at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
    ... 34 more 
```

有没有办法在 Mule 中实现这种类型的逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:43:54.503

问题是您正在混合表达式评估器。您的 when 子句应如下所示：

```
<catch-exception-strategy when="#[exception.causedBy(org.mule.api.routing.filter.FilterUnacceptedException) and message.inboundProperties['http.status']=404 ]" doc:name="Catch Exception Strategy"> 
```

在这里您可以找到有关[MEL的文档](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language)

# redis - 为什么在将 Jedis 与 Spring Data 结合使用时，数据会以奇怪的键存储在 Redis 中？

> ID：13215024
> 
> 赞同：58
> 
> 时间：2012-11-04T00:49:11.237
> 
> 标签：redis, spring-data, jedis

我正在将 Spring Data Redis 与 Jedis 一起使用。我正在尝试使用 key 存储哈希`vc:${list_id}`。我能够成功插入到redis。但是，当我使用 redis-cli 检查密钥时，我看不到密钥`vc:501381`。相反，我看到了`\xac\xed\x00\x05t\x00\tvc:501381`。

为什么会发生这种情况，我该如何改变？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-04T04:22:43.943

好的，谷歌搜索了一段时间，并在[http://java.dzone.com/articles/spring-data-redis](http://java.dzone.com/articles/spring-data-redis)找到了帮助。

它的发生是因为 Java 序列化。

redisTemplate 的密钥序列化程序需要配置为`StringRedisSerializer`如下：

```
<bean 
    id="jedisConnectionFactory" 
    class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory" 
    p:host-name="${redis.server}" 
    p:port="${redis.port}" 
    p:use-pool="true"/>

<bean 
    id="stringRedisSerializer" 
    class="org.springframework.data.redis.serializer.StringRedisSerializer"/>

<bean 
    id="redisTemplate" 
    class="org.springframework.data.redis.core.RedisTemplate"
    p:connection-factory-ref="jedisConnectionFactory" 
    p:keySerializer-ref="stringRedisSerializer"
    p:hashKeySerializer-ref="stringRedisSerializer" 
/> 
```

现在 redis 中的关键是`vc:501381`.

或者像@niconic 所说，我们也可以将默认序列化器本身设置为字符串序列化器，如下所示：

```
<bean 
    id="redisTemplate" 
    class="org.springframework.data.redis.core.RedisTemplate"
    p:connection-factory-ref="jedisConnectionFactory" 
    p:defaultSerializer-ref="stringRedisSerializer"
/> 
```

这意味着我们所有的键和值都是字符串。但是请注意，这可能不是可取的，因为您可能希望您的值不仅仅是字符串。

如果您的值是域对象，那么您可以使用 Jackson 序列化程序并配置一个序列化程序，如此[处所述，](https://stackoverflow.com/a/25324443/1333610)即：

```
<bean id="userJsonRedisSerializer" class="org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer">
    <constructor-arg type="java.lang.Class" value="com.mycompany.redis.domain.User"/>
</bean> 
```

并将您的模板配置为：

```
<bean 
    id="redisTemplate" 
    class="org.springframework.data.redis.core.RedisTemplate"
    p:connection-factory-ref="jedisConnectionFactory" 
    p:keySerializer-ref="stringRedisSerializer"
    p:hashKeySerializer-ref="stringRedisSerializer" 
    p:valueSerialier-ref="userJsonRedisSerializer"
/> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-27T13:51:11.417

我知道这个问题已经有一段时间了，但是我最近又对这个话题做了一些研究，所以我想在这里分享一下这个“半散列”密钥是如何通过部分 spring 源代码生成的。

首先，Spring 利用 AOP 来解析诸如`@Cacheable, @CacheEvict or @CachePut`etc 之类的注释。advice 类`CacheInterceptor`来自 Spring-context 依赖项，它是`CacheAspectSupport`（也来自 Spring-context）的子类。为了便于解释，我将`@Cacheable`在此处以部分源代码为例进行说明。

当注解为 as 的方法被调用时，AOP 会将其从类`@Cacheable`路由到该方法，并在其中尝试解析该注解。反过来，它会导致在实现 CacheManager 中调用此方法。对于这个解释，实现 CacheManage 将是（来自 Spring-data-redis 依赖项）。`protected Collection<? extends Cache> getCaches(CacheOperationInvocationContext<CacheOperation> context, CacheResolver cacheResolver)``CacheAspectSupport``@Cacheable``public Cache getCache(String name)``RedisCacheManager`

如果缓存没有被命中，它将继续创建缓存。以下是来自的关键方法`RedisCacheManager`：

```
protected Cache getMissingCache(String name) {
    return this.dynamic ? createCache(name) : null;
}

@SuppressWarnings("unchecked")
protected RedisCache createCache(String cacheName) {
    long expiration = computeExpiration(cacheName);
    return new RedisCache(cacheName, (usePrefix ? cachePrefix.prefix(cacheName) : null), redisOperations, expiration,
            cacheNullValues);
} 
```

本质上，它将实例化一个`RedisCache`对象。为此，它需要 4 个参数，即 cacheName、**prefix**（这是回答此问题的关键参数）、redisOperation（又名配置的 redisTemplate）、expiration（默认为 0）和 cacheNullValues（默认为 false） . 下面的构造函数显示了有关 RedisCache 的更多详细信息。

```
/**
 * Constructs a new {@link RedisCache} instance.
 *
 * @param name cache name
 * @param prefix must not be {@literal null} or empty.
 * @param redisOperations
 * @param expiration
 * @param allowNullValues
 * @since 1.8
 */
public RedisCache(String name, byte[] prefix, RedisOperations<? extends Object, ? extends Object> redisOperations,
        long expiration, boolean allowNullValues) {

    super(allowNullValues);

    Assert.hasText(name, "CacheName must not be null or empty!");

    RedisSerializer<?> serializer = redisOperations.getValueSerializer() != null ? redisOperations.getValueSerializer()
            : (RedisSerializer<?>) new JdkSerializationRedisSerializer();

    this.cacheMetadata = new RedisCacheMetadata(name, prefix);
    this.cacheMetadata.setDefaultExpiration(expiration);
    this.redisOperations = redisOperations;
    this.cacheValueAccessor = new CacheValueAccessor(serializer);

    if (allowNullValues) {

        if (redisOperations.getValueSerializer() instanceof StringRedisSerializer
                || redisOperations.getValueSerializer() instanceof GenericToStringSerializer
                || redisOperations.getValueSerializer() instanceof JacksonJsonRedisSerializer
                || redisOperations.getValueSerializer() instanceof Jackson2JsonRedisSerializer) {
            throw new IllegalArgumentException(String.format(
                    "Redis does not allow keys with null value ¯\\_(ツ)_/¯. "
                            + "The chosen %s does not support generic type handling and therefore cannot be used with allowNullValues enabled. "
                            + "Please use a different RedisSerializer or disable null value support.",
                    ClassUtils.getShortName(redisOperations.getValueSerializer().getClass())));
        }
    }
} 
```

那么`prefix`这个RedisCache有什么用呢？--> 如构造函数about所示，在该语句中使用`this.cacheMetadata = new RedisCacheMetadata(name, prefix);`，下面的构造函数`RedisCacheMetadata`显示更多细节：

```
/**
     * @param cacheName must not be {@literal null} or empty.
     * @param keyPrefix can be {@literal null}.
     */
    public RedisCacheMetadata(String cacheName, byte[] keyPrefix) {

        Assert.hasText(cacheName, "CacheName must not be null or empty!");
        this.cacheName = cacheName;
        this.keyPrefix = keyPrefix;

        StringRedisSerializer stringSerializer = new StringRedisSerializer();

        // name of the set holding the keys
        this.setOfKnownKeys = usesKeyPrefix() ? new byte[] {} : stringSerializer.serialize(cacheName + "~keys");
        this.cacheLockName = stringSerializer.serialize(cacheName + "~lock");
    } 
```

此时，我们知道某些前缀参数已设置为`RedisCacheMetadata`，但是这个前缀究竟是如何用于形成 Redis 中的键的（例如，您提到的\xac\xed\x00\x05t\x00\tvc:501381）？

基本上，`CacheInterceptor`随后将继续`private RedisCacheKey getRedisCacheKey(Object key)`从上述对象调用一个方法，该方法通过使用**前缀**from和 keySerializer from`RedisCache`返回一个实例。`RedisCacheKey`**`RedisCacheMetadata``RedisOperation`**

 **```
private RedisCacheKey getRedisCacheKey(Object key) {
    return new RedisCacheKey(key).usePrefix(this.cacheMetadata.getKeyPrefix())
            .withKeySerializer(redisOperations.getKeySerializer());
} 
```

到了这一步， 的“pre”建议`CacheInterceptor`就完成了，它会继续执行由 注释的实际方法`@Cacheable`。并且在完成实际方法的执行后，它会做 的“发布”通知`CacheInterceptor`，这实际上是把结果放到 RedisCache 中。下面是将结果放入redis缓存的方法：

```
public void put(final Object key, final Object value) {

    put(new RedisCacheElement(getRedisCacheKey(key), toStoreValue(value))
            .expireAfter(cacheMetadata.getDefaultExpiration()));
}

/**
 * Add the element by adding {@link RedisCacheElement#get()} at {@link RedisCacheElement#getKeyBytes()}. If the cache
 * previously contained a mapping for this {@link RedisCacheElement#getKeyBytes()}, the old value is replaced by
 * {@link RedisCacheElement#get()}.
 *
 * @param element must not be {@literal null}.
 * @since 1.5
 */
public void put(RedisCacheElement element) {

    Assert.notNull(element, "Element must not be null!");

    redisOperations
            .execute(new RedisCachePutCallback(new BinaryRedisCacheElement(element, cacheValueAccessor), cacheMetadata));
} 
```

在`RedisCachePutCallback`对象内部，它的回调方法`doInRedis()`实际上调用了一个方法来形成redis中的实际key，方法名`getKeyBytes()`来自`RedisCacheKey`instance。下面显示了此方法的详细信息：

```
/**
 * Get the {@link Byte} representation of the given key element using prefix if available.
 */
public byte[] getKeyBytes() {

    byte[] rawKey = serializeKeyElement();
    if (!hasPrefix()) {
        return rawKey;
    }

    byte[] prefixedKey = Arrays.copyOf(prefix, prefix.length + rawKey.length);
    System.arraycopy(rawKey, 0, prefixedKey, prefix.length, rawKey.length);

    return prefixedKey;
} 
```

正如我们在该`getKeyBytes`方法中看到的，它同时使用了原始密钥（在您的情况下为 vc:501381）和前缀密钥（在您的情况下为 \xac\xed\x00\x05t\x00\t）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-05-10T12:19:41.467

这是一个非常古老的问题，但我的回答可能对在[使用 Spring Boot 使用 Redis](https://spring.io/projects/spring-data-redis)时遇到同样问题的人有所帮助。在 redis 中存储哈希类型数据时，我遇到了同样的问题。[我已经为RedisTemplate](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html)编写了所需的配置文件更改。

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan(basePackages = "com.redis")
public class AppCofiguration {

    @Bean
    JedisConnectionFactory jedisConnectionFactory() {
        JedisConnectionFactory jedisConFactory = new JedisConnectionFactory();
        jedisConFactory.setHostName("127.0.0.1");
        jedisConFactory.setPort(6379);
        return jedisConFactory;
    }

    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        final RedisTemplate<String, Object> template = new RedisTemplate<String, Object>();
        template.setConnectionFactory(jedisConnectionFactory());
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new StringRedisSerializer());

        // the following is not required      
        template.setHashValueSerializer(new StringRedisSerializer());
        template.setHashKeySerializer(new StringRedisSerializer());

        return template;
    }

} 
```

如果数据类型是字符串`template.setHashValueSerializer(new StringRedisSerializer());`，`template.setHashKeySerializer(new StringRedisSerializer());`则不需要。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-09T03:25:37.587

用来`StringRedisTemplate`代替`RedisTemplate`。

默认情况下，`RedisTemplate`使用 Java 序列化，`StringRedisTemplate`使用`StringRedisSerializer`.

```
<bean id="stringRedisTemplate" class="org.springframework.data.redis.core.StringRedisTemplate">
    <property name="connectionFactory" ref="jedisConnectionFactory" />
</bean> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-10T18:21:20.450

您必须序列化您将其发送到 redis 的对象。下面是它的完整运行示例。它使用接口`DomainObject`作为`Serializable`

以下是步骤

1）用以下罐子制作你的maven pom.xml

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

    <dependency>
           <groupId>org.springframework.data</groupId>
           <artifactId>spring-data-redis</artifactId>
           <version>1.3.0.RELEASE</version>
        </dependency>

            <dependency>
               <groupId>redis.clients</groupId>
               <artifactId>jedis</artifactId>
               <version>2.4.1</version>
            </dependency>

    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-pool2</artifactId>
        <version>2.0</version>
    </dependency> 
```

2）使您的配置xml如下

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
        xmlns:c="http://www.springframework.org/schema/c"
        xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd

        http://www.springframework.org/schema/cache 
        http://www.springframework.org/schema/cache/spring-cache.xsd">

    <bean id="jeidsConnectionFactory"
      class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory"
      p:host-name="localhost" p:port="6379" p:password="" />

     <bean id="redisTemplate" class="org.springframework.data.redis.core.RedisTemplate"
      p:connection-factory-ref="jeidsConnectionFactory" />

     <bean id="imageRepository" class="com.self.common.api.poc.ImageRepository">
      <property name="redisTemplate" ref="redisTemplate"/>
     </bean>

</beans> 
```

3) 使您的课程如下

```
package com.self.common.api.poc;

import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public class RedisMainApp {

 public static void main(String[] args) throws IOException {
  ApplicationContext applicationContext = new ClassPathXmlApplicationContext("mvc-dispatcher-servlet.xml");
  ImageRepository imageRepository = (ImageRepository) applicationContext.getBean("imageRepository");

  BufferedImage img = ImageIO.read(new File("files/img/TestImage.png"));
  BufferedImage newImg;
  String imagestr;
  imagestr = encodeToString(img, "png");
  Image image1 = new Image("1", imagestr);

  img = ImageIO.read(new File("files/img/TestImage2.png"));
  imagestr = encodeToString(img, "png");
  Image image2 = new Image("2", imagestr);

  imageRepository.put(image1);
  System.out.println(" Step 1 output : " + imageRepository.getObjects());
  imageRepository.put(image2);
  System.out.println(" Step 2 output : " + imageRepository.getObjects());
  imageRepository.delete(image1);
  System.out.println(" Step 3 output : " + imageRepository.getObjects());

 }

 /**
  * Decode string to image
  * @param imageString The string to decode
  * @return decoded image
  */
 public static BufferedImage decodeToImage(String imageString) {

     BufferedImage image = null;
     byte[] imageByte;
     try {
         BASE64Decoder decoder = new BASE64Decoder();
         imageByte = decoder.decodeBuffer(imageString);
         ByteArrayInputStream bis = new ByteArrayInputStream(imageByte);
         image = ImageIO.read(bis);
         bis.close();
     } catch (Exception e) {
         e.printStackTrace();
     }
     return image;
 }

 /**
  * Encode image to string
  * @param image The image to encode
  * @param type jpeg, bmp, ...
  * @return encoded string
  */
 public static String encodeToString(BufferedImage image, String type) {
     String imageString = null;
     ByteArrayOutputStream bos = new ByteArrayOutputStream();

     try {
         ImageIO.write(image, type, bos);
         byte[] imageBytes = bos.toByteArray();

         BASE64Encoder encoder = new BASE64Encoder();
         imageString = encoder.encode(imageBytes);

         bos.close();
     } catch (IOException e) {
         e.printStackTrace();
     }
     return imageString;
 }
}

package com.self.common.api.poc;

public class Image implements DomainObject {

 public static final String OBJECT_KEY = "IMAGE";

 public Image() {
 }

 public Image(String imageId, String imageAsStringBase64){
  this.imageId = imageId;
  this.imageAsStringBase64 = imageAsStringBase64;
 }
 private String imageId;
 private String imageAsStringBase64;

 public String getImageId() {
  return imageId;
 }

 public void setImageId(String imageId) {
  this.imageId = imageId;
 }

 public String getImageName() {
  return imageAsStringBase64;
 }

 public void setImageName(String imageAsStringBase64) {
  this.imageAsStringBase64 = imageAsStringBase64;
 }

 @Override
 public String toString() {
  return "User [id=" + imageAsStringBase64 + ", imageAsBase64String=" + imageAsStringBase64 + "]";
 }

 @Override
 public String getKey() {
  return getImageId();
 }

 @Override
 public String getObjectKey() {
  return OBJECT_KEY;
 }
}

package com.self.common.api.poc;

import java.io.Serializable;

public interface DomainObject extends Serializable {

 String getKey();

 String getObjectKey();
}

package com.self.common.api.poc;

import java.util.List;

import com.self.common.api.poc.DomainObject;

public interface Repository<V extends DomainObject> {

 void put(V obj);

 V get(V key);

 void delete(V key);

 List<V> getObjects();
}

package com.self.common.api.poc;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.redis.core.RedisTemplate;

import com.self.common.api.poc.DomainObject;

public class ImageRepository implements Repository<Image>{

 @Autowired
 private RedisTemplate<String,Image> redisTemplate;

 public RedisTemplate<String,Image> getRedisTemplate() {
  return redisTemplate;
 }

 public void setRedisTemplate(RedisTemplate<String,Image> redisTemplate) {
  this.redisTemplate = redisTemplate;
 }

 @Override
 public void put(Image image) {
  redisTemplate.opsForHash()
    .put(image.getObjectKey(), image.getKey(), image);
 }

 @Override
 public void delete(Image key) {
  redisTemplate.opsForHash().delete(key.getObjectKey(), key.getKey());
 }

 @Override
 public Image get(Image key) {
  return (Image) redisTemplate.opsForHash().get(key.getObjectKey(),
    key.getKey());
 }

 @Override
 public List<Image> getObjects() {
  List<Image> users = new ArrayList<Image>();
  for (Object user : redisTemplate.opsForHash().values(Image.OBJECT_KEY) ){
   users.add((Image) user);
  }
  return users;
 }

} 
```

有关 srinf jedis 的更多参考，您可以查看[http://www.javacodegeeks.com/2012/06/using-redis-with-spring.html](http://www.javacodegeeks.com/2012/06/using-redis-with-spring.html)

示例代码取自[http://javakart.blogspot.in/2012/12/spring-data-redis-hello-world-example.html](http://javakart.blogspot.in/2012/12/spring-data-redis-hello-world-example.html)**

# eclipse - 从 BitBucket 克隆的 Git 存储库中找到的 Java 类文件的目录，但我不知道如何删除它们

> ID：13215026
> 
> 赞同：0
> 
> 时间：2012-11-04T00:49:40.893
> 
> 标签：eclipse, git, bitbucket, egit

我创建了几个 Eclipse 项目的 BitBucket 存储库，然后使用 Eclipse 和 EGit 将该存储库克隆到新的 Eclipse 工作区，以检查我是否已将所有文件正确放入 BitBucket。

新工作区中的项目在其 bin 目录中包含 *.class 文件，我意识到在将项目添加到存储库之前，我忽略了从原始工作区中的 Eclipse 项目目录中删除这些文件。

但是，我的存储库的 BitBucket 网页没有显示各种 Eclipse 项目目录中的任何 bin 目录，当我尝试从我克隆的存储库中删除 *.class 文件时，我收到一条错误消息，指出例如，“致命：pathspec 'EclipseProjects/IndexerUtils/build/uw_solr/CmdLineOption.class' 不匹配任何文件”。

我认为这意味着没有跟踪类文件，但我不确定。我不太了解 Git，无法弄清楚如何确定它们是否被跟踪。它们的存在不会导致“git status”说找到了未跟踪的文件，但是如果我尝试删除它们中的任何一个，Git 会说它不知道它们。同时，BitBucket 不显示其存储库中的任何类文件，但是当我克隆其存储库时，所有类文件都包含在创建的新存储库中。

是否有 Git 命令可以告诉您是否正在跟踪特定文件？如果正在跟踪 *.class 文件，我该如何删除它们，因为显然“git rm”不起作用？如果它们没有被跟踪，为什么在我克隆我的 BitBucket 存储库时它们会出现？Git 有哪些基本诊断命令可以帮助我弄清楚我的存储库处于什么状态？

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:04:13.393

你有案件碰撞吗？尝试设置以下内容，看看您是否可以使用 git rm 命令查看和删除文件。

```
git config --global core.ignorecase true

```

请注意，此“git rm”会从该提交中删除文件。如果您想**彻底**删除文件，请考虑 filter-branch

示例： git filter-branch --tree-filter 'rm 文件名' HEAD

# java - 通过使用 java 和 web 浏览器，我从在线网页解析中得到了非常不同的 html 源

> ID：13215028
> 
> 赞同：-2
> 
> 时间：2012-11-04T00:50:10.623
> 
> 标签：java, html, html-parsing

> **可能重复：**
> [为什么当我从 Web 浏览器打开它并用 Java 读取它时，html 源代码不同？](https://stackoverflow.com/questions/13214112/why-html-source-is-different-when-i-opened-it-from-web-browser-and-read-it-in-ja)

我有一个关于解析在线 html 页面的问题。当我从网络浏览器打开 html 源代码时，我可以看到其中的数据。

但是当我从 java 读取这个 html 页面时。我无法访问数据。

在我保存了这个 html 文件并将其作为本地文件读取后，我就可以从那里读取数据了。

我以 eBay.com.au 为例。

// - - - - 例子 - - - - -

目标网页网址：[http ://www.ebay.com.au/sch/i.html?_trksid=p3907.m570.l1311&_nkw=imac+27&_sacat=0&_from=R40](http://www.ebay.com.au/sch/i.html?_trksid=p3907.m570.l1311&_nkw=imac+27&_sacat=0&_from=R40)

这是我的Java代码

```
import org.htmlcleaner.CleanerProperties;
import org.htmlcleaner.TagNode;
import org.htmlcleaner.HtmlCleaner;
import java.net.URL;

public class HtmlCleanerTest
{
    public static void main(String[] args) throws Exception
    {
        CleanerProperties props = new CleanerProperties();

        URL myURL = new URL("http://www.ebay.com.au/sch/i.html?_trksid=p3907.m570.l1311&_nkw=imac+27&_sacat=0&_from=R40");

        TagNode tagNode = new HtmlCleaner(props).clean(myURL);

        Object[] myNodes = tagNode.getElementsByAttValue("class", "s1", true, true);

        for(Object oNote : myNodes)
        {
            TagNode n = (TagNode) oNote;
            System.out.println(n.getText());
        }
    }
} 
```

我可以使用此代码获取每个产品的价格，但我希望使用此代码获取卖家位置信息。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:02:23.537

如果网站中显示的数据是 javascript 生成的，那么除非您在 java 代码中实现 javascript 功能，否则您将无法获取数据。

第二种可能性是 Web 服务器确定来自用户代理的数据或浏览器/获取器的功能。

# caching - 在 EJB 3.0 中缓存对象

> ID：13215030
> 
> 赞同：2
> 
> 时间：2012-11-04T00:50:33.120
> 
> 标签：caching, ejb-3.0, stateless-session-bean

我应该使用哪种编程模式（和产品）在 EJB 3.0 无状态会话 bean 中创建通用内存对象缓存？

如果不要求缓存是连贯的，那么在集群环境中使用静态成员变量或单例模式是否会导致任何副作用？

要缓存的数据是从 JDBC 数据源（JPA 不是一个选项）和 Web 服务中获取的。要缓存的数据量为几兆字节。缓存必须提供非常快速的读取，因此我希望解决方案应该在应用程序正在使用的 JVM 内运行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T16:52:16.030

我想唯一的解决方案是创建一个作为成员变量存储的单例。

```
@Stateless
public class MyBean {
    private CacheManager cacheManager;

    @PostConstruct
    public void initialize() {
         cacheManager = CacheManager.getInstance();
    }
}

public class CacheManager {
    private static CacheManager instance;

    public synchronized getInstance() {
       if (instance == null) {
           instance = new CacheManager()
       }
       return instance;
    }
} 
```

# ios - NSTimer 在控制器中，如何通知视图？

> ID：13215032
> 
> 赞同：0
> 
> 时间：2012-11-04T00:50:41.470
> 
> 标签：ios, model-view-controller, design-patterns, observer-pattern

在我的 iOS 应用程序中，当用户在视图中按下按钮时，控制器中会触发 NSTimer。在第三个刻度上，我想让视图的背景闪烁。

我已经在视图中编写了闪烁功能（它不应该写在控制器中，应该吗？）

我可以通过以下方式触发控制器中的闪烁功能

```
LostView *lostView = (LostView* ) self.view;
[lostView blinkBackground]; 
```

但这很糟糕，不是吗？控制器不应该知道视图也不知道函数的名称？我想应用 MVC 模式

观察者/可观察模式是否适用于这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:19:05.900

不，一点也不坏。看起来您实现了使视图在视图本身中闪烁的方法。这很好，因为它与视觉表示（即 MVC 的视图部分）直接相关。您可以在需要闪烁视图的任何其他应用程序中重复使用该视图。

由于闪烁是由我触发的`NSTimer`，因此我认为它在某种程度上取决于此特定应用程序中的逻辑。视图不能（不应该）知道它应该在什么时候闪烁（只有当闪烁是与它或 UI 的其他相关部分交互的直接反应时才会出现这种情况 - 或者它是更多复杂的元素，例如倒数计时器，当它到达最后 10 秒左右时，它总是开始闪烁。例如，`UIButton`如果它被触摸，它提供了自我突出显示的可能性。）

但是，如果闪烁是您的应用程序中某些状态转换的反应，可能有一些新数据可用或倒计时即将到期，那么控制器是触发它的完全合理的地方。

# erlang - 为什么 io:format 支持 ~n 当 \n 做同样的事情？

> ID：13215033
> 
> 赞同：7
> 
> 时间：2012-11-04T00:50:46.517
> 
> 标签：erlang, escaping, erlang-otp

这两个给出相同的输出：

```
1> io:format("Hello, world!~n").
Hello, world!
ok
2> io:format("Hello, world!\n").
Hello, world!
ok 
```

为什么`io:format`支持`~n`什么时候`\n`做同样的事情？有什么不同吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-04T06:33:27.877

根据“Programming Erlang”，`~n`输出特定于平台的新行序列（`\n`在 Unix、`\r\n`Windows 等上）。我想`\n`只是写`\n`角色，但不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:34:28.077

根据[io 文档](http://www.erlang.org/doc/man/io.html)，`The general format of a control sequence is ~F.P.PadModC`. 所以格式必须以 开头`~`，而字符`n`是具有定义的控制序列之一`Writes a new line`。`\n`不是一种格式。

# objective-c - 核心数据关系故障：空键

> ID：13215035
> 
> 赞同：2
> 
> 时间：2012-11-04T00:50:57.943
> 
> 标签：objective-c, core-data, relationship, osx-mountain-lion, xcode4.5

我有一个名为 Person 的实体，它可能有一个家，一个名为 Home 的实体可能有一个到 N 个家：

![在此处输入图像描述](../Images/90644b845be6640a5cae45742c980674.png)

然后我有两个数组控制器：

1.  Homes 控制器，与托管对象上下文绑定，实体模式：Home；
2.  人员控制器，与托管对象上下文绑定，实体模式：人员。

我有一个基于单元格的表格视图，与人员控制器绑定。我能够成功显示前三列（姓名、姓氏和年龄），但问题出在第 4 列：家庭名称。列内有一个弹出按钮单元格，这些是绑定：

*   内容： Homes Controller.arrangedObjects ；
*   内容值：Homes Controller.arrangedObjects.name；
*   选定对象：People Controller.home。

问题出现在运行时，当我尝试单击弹出按钮选择主页时：

![在此处输入图像描述](../Images/f158a079725df6e1ef21cffa94f1a564.png)

就像您看到的那样，我看到“核心数据关系错误”而不是选择，如果我尝试通过单击菜单项来更改主页，我会看到很多代码打印到控制台，我只发布最重要的一行：

```
2012-11-04 01:47:45.181 Test[4390:303] [<NSManagedObject 0x100156e60> valueForUndefinedKey:]: the entity Home is not key value coding-compliant for the key "(null)". 
```

在此之后应用程序冻结。

编辑：通过一些调试，我现在能够知道异常发生时对象的状态：

```
2012-11-09 02:42:02.495 Test[4650:303] <NSManagedObject: 0x100157460> (entity: Person; id: 0x10013d9d0 <x-coredata:///Person/t0182F6F4-9CCC-4F51-A82F-D00CE026DB752> ; data: {
    age = 20;
    home = "0x101953480 <x-coredata:///Home/t0182F6F4-9CCC-4F51-A82F-D00CE026DB753>";
    name = "New Name";
    surname = "New Surname";
})
2012-11-09 02:42:02.497 Test[4650:303] <NSManagedObject: 0x101953420> (entity: Home; id: 0x101953480 <x-coredata:///Home/t0182F6F4-9CCC-4F51-A82F-D00CE026DB753> ; data: {
    name = "New Home";
    people =     (
        "0x10013d9d0 <x-coredata:///Person/t0182F6F4-9CCC-4F51-A82F-D00CE026DB752>"
    ); 
```

似乎这些值是常规的，没有 nil 键。我怀疑问题出在绑定上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T16:27:16.190

如果不了解您是如何从 Core Data 中获取对象及其关系的，就很难知道实际发生了什么。

但是，仅仅因为你看到“故障”这个词并不意味着有问题。核心数据错误只是意味着数据尚未从存储中检索到托管对象上下文中。

故障非常方便。它们就像代表关系中对象的小存根，这样您就不会过多地进入内存。只有当您尝试访问对象时，它们才会被替换为实际对象。

有关更多解释，请参阅[核心数据关系故障。](https://stackoverflow.com/questions/1833423/core-data-relationship-fault)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:09:56.050

为了正常运行，需要使用模型构建器将 Home-people 和 Person-home 声明为彼此的反向关系。然后该关系将显示为单行。

# android - 附加附件时，Android tcpip ADB 会话断开连接

> ID：13215041
> 
> 赞同：2
> 
> 时间：2012-11-04T00:52:36.693
> 
> 标签：android, adk

我正在使用 Windows 7 x64、API 15 开发一个 ADK 应用程序，目标是运行 Android 4.0.3 的 Acer Tab A100 和带有 USB 扩展板的 Arduino。平板电脑没有root。

我能够在 Windows 命令 shell 中使用以下命令成功设置 ADB 以在 tcpip 上运行：

adb tcpip 5555 adb 连接 XXXX

然后我从 Windows 7 PC 断开 USB 电缆并将其连接到 Arduino。Arduino 正在运行 ADK 代码，平板电脑会提示启动我的应用程序。该应用程序启动并运行良好。但是，当 Android 应用程序启动时，ADB 会话终止，我必须重新执行 adb connect 命令才能重新建立它。

这似乎不应该发生。有没有人有任何想法如何解决它？

谢谢，

数字黑客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:09:00.050

ADB服务器可以从基于Android ADK的应用程序启动，它将与Arduino中的固件进行通信。我开发了一个使用ADB与Arduino通信的项目，工作正常。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:02:56.230

不需要使用 ADB 通过 USB 进行应用程序通信。我现在对此很深入，并试图让 openAccessory 为这个确切的目的工作（与 Arduino 通信）。openAccessory 使 Android 设备在“设备”或“从”模式下运行，允许 Arduino 在“主机”或“主”模式下运行。由于 USB 主机是为 USB 总线供电的主机，这允许 Arduino 及其（可能）更强大的电源为 Android 平板电脑供电，而不是相反。

阅读 Android API 中的 openAccessory 模式，并报告您的结果！

# mysql - ExpressionEngine 安装问题：本地主机上的数据库连接错误

> ID：13215042
> 
> 赞同：6
> 
> 时间：2012-11-04T00:52:39.847
> 
> 标签：mysql, localhost, expressionengine

在成功安装 ExpressionEngine 2.5.3 时遇到了一个奇怪的问题。

我能够运行 ExpressionEngine 安装和更新向导，其中输入了服务器设置、数据库设置和管理员帐户信息。所以 Apache 方面按预期工作，或者我假设。

当我单击 Install ExpressionEngine 按钮时，问题就出现了——安装程序开始工作的地方很神奇——得到这个错误：

```
A Database Error Occurred
Unable to connect to your database server using the provided settings.
Filename: controllers/wizard.php
Line Number: 1532 
```

对于 SQL Server 地址、用户名和密码，我使用与过去相同的值：localhost 为服务器地址，root 为用户名，root 为密码。

这些凭据在与 Sequel Pro 0.9.9.1 一起使用时有效。

根据 ExpressionEngine 安装文档的建议，config.php 和 database.php（均为空文件）的权限设置为 666。

我正在运行 10.8.2 的 MacBook Air 上尝试这个，内置的 Apache 和 MySQL 通过 XAMPP 运行。我正在使用 VirtualHost X 来使[http://baseline.loc/](http://baseline.loc/)指向我的站点文件夹中的 baseline.loc。没有其他 Apache 或 MySQL 实例正在运行。

我不精通调试服务器问题，但我很乐意在终端中工作。

我应该考虑什么来弄清楚为什么这个通常是新项目的基本阶段会成为绊脚石？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T02:06:51.807

在使用 localhost 作为主机之前我遇到了问题。127.0.0.1 对你有用吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T02:51:43.813

我在 OSX 中使用 mamp 也有类似的情况，只需将 web 文件夹的文件夹权限更改为通过 finder 读取/写入的每个人，就可以了

# c# - WPF中Datagrid中组合框的显示值

> ID：13215043
> 
> 赞同：-1
> 
> 时间：2012-11-04T00:52:58.273
> 
> 标签：c#, wpf, datagrid

我有以下代码：

XAML：

```
<DataGrid x:Name="dgData" HorizontalAlignment="Left" Margin="133,96,0,0" VerticalAlignment="Top" Height="174" Width="156" AutoGenerateColumns="False" Grid.Column="1">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Status" Width="100">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox Name="Combo1" Height="22" ItemsSource="{Binding SubjectSubList}" SelectedItem="{Binding SubjectSubList}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

代码隐藏：

```
public class TicketInfo
{           
    public List<string> SubjectSubList { get; set; }
}

static List<string> resolution = new List<string>();
static List<string> codec = new List<string>();

resolution.Add("1");
resolution.Add("2");

codec.Add("3");
codec.Add("4");

List<TicketInfo> ticketsList = new List<TicketInfo> 
{
    new TicketInfo{ SubjectSubList=resolution},
    new TicketInfo{ SubjectSubList=codec},               
}; 
```

我能够在两个不同的组合框中分别显示对象，但我不知道现在我可以检索用户选择的值。“Selecteditem”已绑定，但如何在代码隐藏中检索值？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:09:14.413

您需要添加一个 SelectedItem 属性，因此如果您的组合框是一个字符串列表，那么您可以有一个 selectedItem 属性，如下所示：

```
 public string SelectedSubject { get; set; } 
```

, 然后在 xaml 中将“SelectedSubject”绑定到选定项：

```
 <DataTemplate>
           <ComboBox Name="Combo1" Height="22" ItemsSource="{Binding SubjectSubList}" SelectedItem="{Binding SelectedSubject}"/>
        </DataTemplate> 
```

然后在您的代码中的任何时候，您都可以访问 SelectedSubject，它的值应该是当时在组合框中选择的任何值。

但是现在你需要datagrid中某一行的选中项吗？那么您要么必须在代码参数中传递 selectedrow 并尝试访问该选定行的值，要么将 SelectedSubject 作为您的 SubjectSubList 中的属性，它必须是某种对象。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:04:27.407

`SubjectSubList`在`DataContext`您分配给控件的内容将在选择更改时更新。由于更新是双向的，因此该属性必须同时具有公共 setter 和 getter。

# groovy - 在 groovy 中构建频率计数图。

> ID：13215044
> 
> 赞同：3
> 
> 时间：2012-11-04T00:53:05.557
> 
> 标签：groovy

我有一个数组，我想用它构建一个地图，记录数组中元素的频率。因此，对于下面的示例， map = [15:2, 16:1] 就是它的样子。我如何在 Groovy 中做到这一点？

```
static void doSomething()
    {
        def a = [15,16,15]
        def map = []
        a.each{
            k,v-> 
            if(map.contains(it)) 
            map.putAt k, v++
            else
            map.putAt k, 1;
        }

        println map
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T01:42:21.430

在 Groovy 1.8 或更高版本中，

```
assert [15, 16, 15].countBy { it } == [15: 2, 16: 1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:32:53.287

您可以将代码修改为以下内容：

```
void doSomething() {
        def a = [15,16,15]
        def map = [:]  //1
        a.each {  //2
            if(map.containsKey(it)) map[it] = map[it] + 1  //3
            else map[it] = 1;
        }

        println map
} 
```

这解决了一些问题：

1.  map 需要在大括号之间用冒号开头，正如 Bill James 在评论中所指出的那样。
2.  不能`each`在 arraylist 上使用 2 参数版本
3.  后缀增量不会导致增量值被保存；此外，显式`putAt`调用很好，但它提供了`[key] = val`更具表现力的重载语法。

综上所述，我假设这是一个学习 groovy 的编码练习。doelleri 的答案更简洁，并使用提供的工具，所以在现实世界的情况下，我会这样做。

# c - 重新初始化数组时可能是内存问题？

> ID：13215046
> 
> 赞同：0
> 
> 时间：2012-11-04T00:53:43.743
> 
> 标签：c, arrays, memory-management, initialization, valgrind

> **可能重复：**
> [重新初始化阵列正在创建段错误？](https://stackoverflow.com/questions/13214567/reinitializing-an-array-is-creating-a-segfault)

我在具有给定权重的边输入上运行 bellman ford 和 BFS（顶点、顶点b、权重）。每次阅读最新的边缘后，我都会运行 BFS（研究项目的一部分）。

它似乎可以完美地处理小集合，顶点为 8 到 10，但是当我跳转到下一个涉及顶点集合 100 或更大的样本数据时，它会在我重新初始化时失败并出现段错误......

起初我这样初始化它：

```
for(i=0;i<numberVertices;i++)
        {
                vertexArray[i].v = i+1;
                vertexArray[i].adj = NULL;
                vertexArray[i].marked = 0;
                if(i==0)
                {
                        vertexArray[i].weight = 0;
                }
                else{
                        vertexArray[i].weight = 10000;
                }
        } 
```

调用 BFS 后，我必须重新初始化标记为 0，以便 BFS 再次工作，因此我重新初始化数组：

numberUseful += BFS(vertexArray, q, u);

```
 for(i=0;i<numberVertices;i++)
            {
                    vertexArray[i].marked = 0;
            } 
```

并且该行`vertexArray[i].marked = 0;`给出了段错误。

在另一个人的建议下，我用这个程序运行了 valgrind，结果如下：

```
==6634== Memcheck, a memory error detector
==6634== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==6634== Using Valgrind-3.6.0 and LibVEX; rerun with -h for copyright info
==6634== Command: ./a.out 100S.txt
==6634==
==6634== Conditional jump or move depends on uninitialised value(s)
==6634==    at 0x400C13: checkonqueue (bfs.c:160)
==6634==    by 0x400B7F: BFS (bfs.c:142)
==6634==    by 0x40094A: main (bfs.c:103)
==6634==
==6634== Invalid write of size 4
==6634==    at 0x40096E: main (bfs.c:107)
==6634==  Address 0x4d00000041 is not stack'd, malloc'd or (recently) free'd
==6634==
==6634==
==6634== Process terminating with default action of signal 11 (SIGSEGV)
==6634==  Access not within mapped region at address 0x4D00000041
==6634==    at 0x40096E: main (bfs.c:107)
==6634==  If you believe this happened as a result of a stack
==6634==  overflow in your program's main thread (unlikely but
==6634==  possible), you can try to increase the size of the
==6634==  main thread stack using the --main-stacksize= flag.
==6634==  The main thread stack size used in this run was 10485760.
==6634==
==6634== HEAP SUMMARY:
==6634==     in use at exit: 3,448 bytes in 181 blocks
==6634==   total heap usage: 181 allocs, 0 frees, 3,448 bytes allocated
==6634==
==6634== LEAK SUMMARY:
==6634==    definitely lost: 0 bytes in 0 blocks
==6634==    indirectly lost: 0 bytes in 0 blocks
==6634==      possibly lost: 0 bytes in 0 blocks
==6634==    still reachable: 3,448 bytes in 181 blocks
==6634==         suppressed: 0 bytes in 0 blocks
==6634== Reachable blocks (those to which a pointer was found) are not shown.
==6634== To see them, rerun with: --leak-check=full --show-reachable=yes
==6634==
==6634== For counts of detected and suppressed errors, rerun with: -v
==6634== Use --track-origins=yes to see where uninitialised values come from
==6634== ERROR SUMMARY: 16120 errors from 2 contexts (suppressed: 6 from 6) 
```

我被告知在与我的段错误（107）相同的行和作为 checkonqueue 函数的一部分的第 160 行给了我错误：

```
int checkonqueue(int * q, int value)
{
        int i = 0;
        for(i=0;i < max;i++)
        {
                if(q[i] == value)
                {
                        return 1;
                }
        }
        return 0;
} 
```

哪里`if(q[i] == value)`出现了内存问题，所以我被告知。

我认为这可能是内存问题的原因是它适用于较小的集合（或者看起来如此！）

如果您知道如何真正使用 valgrind 或发现错误，我将不胜感激！

BFS：

```
while(front != -1)
{
    u = dequeue(q);
    if(vertexArray[u-1].adj != NULL)
    {
        adjacent = vertexArray[u-1].adj;
        vertexArray[u-1].marked = 1;

        while(adjacent != NULL)
        {
            v = adjacent->v;
            if(distance[vertexArray[v-1].v-1] > distance[vertexArray[u-1].v-1] + adjacent->edgeWeight)
            {
                distance[vertexArray[v-1].v-1] = distance[vertexArray[u-1].v-1] +adjacent->edgeWeight;
                success = 1;

            }

            int check = 0;
            check = checkonqueue(q, v);
            if(check == 0 && vertexArray[v-1].marked == 0)
            {
                enqueue(q, v);
            }
            adjacent = adjacent->next;
        }
    }
}
return success; 
```

# python - Tweepy 公共流过滤器由一个变化的变量

> ID：13215054
> 
> 赞同：5
> 
> 时间：2012-11-04T00:54:38.863
> 
> 标签：python, twitter, filter, stream, tweepy

我正在使用 Python 的 Tweepy 库来访问公共 twitter 流，并遇到了一个问题，即一旦流运行，它就不会停止。现在，这对它的作用是有意义的，但我希望它开始使用一个空的用户 ID 列表进行过滤，一段时间后，用户 ID 会在有人发布特定跟踪词后添加到列表中，这样一旦他们发布了一个词，跟踪器开始跟踪他们所有的推文。问题是，一旦使用初始过滤器选项启动流，更改变量不会影响过滤器；它只是继续使用初始参数。

```
userIDs = []

trackWords = ["#Obama"]

def stream():

    s = Stream(auth, StreamListener())

    s.filter(follow = userIDs, track = trackWords) 
```

在添加新关键字后，我可以通过再次调用流定义来解决这个问题，但是我有多个流搜索，我将它们放在单独的线程中，这样它们就可以同时运行。我不知道如何刷新线程，因此尝试刷新过滤器而不调用定义似乎更容易。

我对编程还很陌生，所以也许这是一个我还不知道的基本概念，但希望有一个简单的技巧可以让它刷新。

如果对任何人有帮助，这是我所有的相关代码。以上只是帮助说明我在说什么的快速方法：

```
userIDs = []
userNames = []

account = ['@DMS_423']

publicKeyWords = ['the','be','to','of','and','are','is','were','was']

class AStreamListener(StreamListener):
    def on_status(self, status):
        if status.author.screen_name not in userNames:
            userNames.append(str(status.author.screen_name))
            userIDs.append(str(api.get_user(str(status.author.screen_name)).id))
            print status.author.screen_name, "has joined the game."

def uStream():
    s = Stream(auth, StreamListener())
    s.filter(follow = userIDs)

def pStream():
    ps = PStream(pAuth, PStreamListener())
    ps.filter(track = publicKeyWords)

def aStream():
    adds = Stream(auth, AStreamListener())
    adds.filter(track = account)

t1 = Thread(target = aStream)
t2 = Thread(target = uStream)
t3 = Thread(target = pStream)

def run():
    t1.start()
    t2.start()
    t3.start()

run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-10T06:23:11.927

如果您想在推文数量的特定条件/要求下停止推文，`self.num_tweets = 0`请编辑并记录它。您可以将其用作限制器，在`def on_status`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T19:30:01.090

Tweepy python 库 API 不支持您正在寻找的行为。无法修改与订阅的流相关的参数。

事实上，Twitter API 本身不支持在中途更改参数。他们甚至警告不要这样做。这并不是说不可能让它工作（只是要小心并避免超过速率限制）。

我会调整您的方法以使用新的查询参数初始化第二个流，使用推文 ID 来避免两次传递/保留相同的推文，然后一旦建立第二个流，您将关闭初始流。

# php - 将此字符串转换为日期格式以保存到 mysql

> ID：13215062
> 
> 赞同：2
> 
> 时间：2012-11-04T00:56:17.223
> 
> 标签：php, mysql, string, date

我正在将数据从文本文件移动到数据库。文本文件的日期格式为“10 月 29 日”和“11 月 1 日”（10 月和 11 月是该文件中仅有的 2 个月）。我会将日期保存到 mysql 数据库中。如何在不手动操作的情况下将此格式转换为日期字段（假设为 2012 年）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:07:22.303

以下应该有效，但是可能会进行优化：

```
$date = 'Oct 29';
list($month, $day) = explode(' ',$date);
$mysql_date = date('Y-m-d H:i:s', strtotime("$day $month 2012")); 
```

您也许可以摆脱：

```
$date = 'Oct 29';
$mysql_date = date('Y-m-d H:i:s', strtotime("$date 2012")); 
```

尽管您需要在您运行的任何版本的 php 上测试后者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:11:55.093

```
$str = 'Oct 29';
$str = strtotime("$str " . date('Y'));
// add the currect year and convert it into Unix timestamp
$formatted = date('Y-m-d H:i:s',$str);
// then convert it into MySQL datetime format
echo $formatted; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T01:16:31.347

`$array as $item['datefield']`在没有看到您的文本文件的情况下，假设年份为 2012 年，一个包含并且您希望仅在 php 中实现日期转换的数组：

```
foreach ($array as $item) {
   // Format other vars...
   $insert_date = date("Y-m-d", strtotime($item['datefield']." 2012"));

 $query_insert = "
  INSERT INTO table_name (column1, column2, datefield,...)
  VALUES ($item['value1'], $item['value2'], $insert_date,...)
 ";
} 
```

格式化没有什么意义，`yyyy-mm-dd H:m:s`因为您的日期字段中没有它...

# php - PDO 准备函数问题

> ID：13215063
> 
> 赞同：2
> 
> 时间：2012-11-04T00:56:58.437
> 
> 标签：php, mysql, pdo

我无法让它工作我认为我的错误在于准备好的语句的语法，但我尝试了几种不同的方法，但没有运气。我怀疑错误出现在准备好的语句中的原因是，`echo Not a Match`如果变量不匹配，它将出现在页面上，但是当它们匹配时，它只会给我一个没有错误的空白页面。这是我的代码，也许有人可以发现错误，同时我会继续尝试不同的方法。

```
 function setPass($conn, $userCurrent, $oldPass, $newPass, $verPass)

{        
    $stmt= $conn->prepare('SELECT `password` FROM `CLL_users` WHERE `user_name`=:userCurrent');
    $stmt->execute(array(':userCurrent' => $userCurrent));
    while ($pass = $stmt->fetch()){
    $oldDbPass = $pass['password'];
    }

$new_pass = md5($newPass);

    if (md5($oldPass) == ($oldDbPass) && ($newPass) == ($verPass)) {
try{
        $stmt= $conn->prepare('UPDATE `CLL_users` SET `password`=:newPass WHERE `user_name`=:userCurrent');
        $stmt->execute(array(':newpass' => $new_pass, ':userCurrent' => $userCurrent));
} catch (PDOException $e){
    echo 'Connection failed: ' . $e->getMessage();
}

        echo "Match";
    } else {
        echo "Not a Match";

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T00:59:02.450

你把括号误认为是反引号。使用反引号“`”转义 SQL 中的表名和列名。

```
SELECT `password` FROM `CLL_users` WHERE `user_name`=:userCurrent

UPDATE `CLL_users` SET `password`=:newPass WHERE `user_name`=:userCurrent 
```

你还有几个错别字：

*   `$newPass`被声明为 camelCase，但`$new_pass`在您的第二个`execute`语句中使用。
*   我不确定 PDO 语句是否区分大小写，但您将 PDO 变量声明为`:newPass`并`:newpass`在`execute`

对于未来，请阅读 PDO 中的错误检查/处理：

*   [http://php.net/manual/en/pdo.error-handling.php](http://php.net/manual/en/pdo.error-handling.php)
*   [http://php.net/manual/en/pdo.errorcode.php](http://php.net/manual/en/pdo.errorcode.php)
*   [http://php.net/manual/en/pdo.errorinfo.php](http://php.net/manual/en/pdo.errorinfo.php)

# c# - 从数组中查找相等或最接近的较小值

> ID：13215065
> 
> 赞同：3
> 
> 时间：2012-11-04T00:57:12.243
> 
> 标签：c#, performance

假设我有这个数组*（它实际上是 255 长，值高达 int.MaxValue）*：

```
int[] lows = {0,9,0,0,5,0,0,8,4,1,3,0,0,0,0}; 
```

从这个数组中，我想获得一个**等于**或**小于**我的数字的值的索引。

```
number = 7 -> index = 4
number = 2 -> index = 9
number = 8 -> index = 7
number = 9 -> index = 1 
```

找到它的最快方法是什么？

到目前为止，我使用了线性搜索，但结果证明这对我的需要来说效率太低了，因为即使这个数组只有 255 长，值也会被搜索几百万次。

我需要与 java 中使用的*TreeSet.floor(E)*相同的东西。我想使用*Dictionary*，但我不知道它是否可以找到我需要的第一个较小或相等的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T00:59:57.360

对数组进行排序，然后进行二进制搜索以查找值。

看：

[https://en.wikipedia.org/wiki/Binary_search](https://en.wikipedia.org/wiki/Binary_search)

和

[Array.BinarySearch 方法](http://msdn.microsoft.com/en-us/library/y15ef976.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:00:42.463

如果它没有排序（或者保存在可以帮助搜索的成员之间存在关系的数据结构中），那么您*将*不得不检查每个成员以找到正确的成员。

最简单的解决方案可能是对其进行排序，然后进行二分切/搜索以找到符合您条件的元素。

* * *

如果您想提高仍然采用未排序数组的能力，请`sorted`在数组的某处维护一个标志（即，将整个事物转换为包含指标和数组的类），以指示列表已排序。

`false`然后在数组更改时将此标志设置为。

在您想要进行搜索的地方，您首先检查`sorted`标志并对数组进行排序（如果它设置为） `false`（将其设置`true`为该过程的一部分）。如果标志是`true`，则绕过排序。

这样，您只在需要时进行排序。如果数组自上次排序后没有改变，则重新排序没有意义。

如果用户需要，您还可以维护原始的未排序列表，将排序列表保留为类中的*附加*数组（对数组进行分类的另一个优点）。这样，你什么都不会失去。您拥有可供用户获取的原始未触及数据，以及一种快速有效地找到所需元素的方法。

您的对象（排序后）将包含：

```
int[] lows       = {0,9,0,0,5,0,0,8,4,1,3,0,0,0,0};
int[] sortedlows = {0,0,0,0,0,0,0,0,0,1,3,4,5,8,9};
boolean isSorted = true; 
```

如果您随后更改`that_object[0]`为`3`，您最终会得到：

```
int[] lows       = {3,9,0,0,5,0,0,8,4,1,3,0,0,0,0};
int[] sortedlows = {0,0,0,0,0,0,0,0,0,1,3,4,5,8,9};
boolean isSorted = false; 
```

表示在搜索之前需要排序`sortedLows`。

* * *

请记住，将其变成课程*并不是必需的。*如果您担心它的性能（特别是通过 getter 方法访问数组元素），您可以维护数组并标记自己，同时仍然允许直接访问未排序的数组。您只需确保代码中更改数组的每个位置也正确设置了标志。

但是你应该在走这条路之前测量性能。基于类的方式“更安全”，因为对象本身控制着整个事物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T03:15:47.063

首先，规范化数据：

```
public static Dictionary<int, int> GetNormalised(int[] data)
{
    var normalised = data.Select((value, index) => new { value, index })
        .GroupBy(p => p.value, p => p.index)
        .Where(p => p.Key != 0)
        .OrderBy(p => p.Key)
        .ToDictionary(p => p.Key, p => p.Min());
    return normalised;
} 
```

搜索方法：

```
public static int GetNearest(Dictionary<int, int> normalised, int value)
{
    var res = normalised.Where(p => p.Key <= value)
        .OrderBy(p => value - p.Key)
        .Select(p => (int?)p.Value)
        .FirstOrDefault();

    if (res == null)
    {
        throw new ArgumentOutOfRangeException("value", "Not found");
    }

    return res.Value;
} 
```

单元测试：

```
[TestMethod]
public void GetNearestTest()
{
    var data = new[] { 0, 9, 0, 0, 5, 0, 0, 8, 4, 1, 3, 0, 0, 0, 0 };
    var normalised = Program.GetNormalised(data);

    var value = 7;
    var expected = 4;
    var actual = Program_Accessor.GetNearest(normalised, value);
    Assert.AreEqual(expected, actual);

    value = 2;
    expected = 9;
    actual = Program_Accessor.GetNearest(normalised, value);
    Assert.AreEqual(expected, actual);

    value = 8;
    expected = 7;
    actual = Program_Accessor.GetNearest(normalised, value);
    Assert.AreEqual(expected, actual);

    value = 9;
    expected = 1;
    actual = Program_Accessor.GetNearest(normalised, value);
    Assert.AreEqual(expected, actual);        
} 
```

优化性能缓存所有使用的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-21T20:27:57.200

要在 C# 中模拟 Java TreeSet，请使用 C# 类：SortedDictionary 或 SortedSet；Java TreeSet 中的 mock floor 方法，使用 LINQ 方法，获取最小值。排序集数据 = 新排序集（）；data.Where(p =>p < 价格[i]).OrderByDescending(p=>p).Take(1)

基于 HackerRank 最小成本算法，Java TreeSet 实现方案运行良好，但 C# SortedDictionary，SortedSet 超时。
详情见我的编码博客：http: [//juliachencoding.blogspot.ca/2016/11/c-sorteddictionary-minimum-cost.html](http://juliachencoding.blogspot.ca/2016/11/c-sorteddictionary-minimum-cost.html)

因此，C# SortedSet 类 GetViewBetween 可以做同样的事情。请参阅[GetViewBetween API](https://codereview.stackexchange.com/a/148727/123986)

有一个帖子：[SortedSet / SortedList with better LINQ performance?](https://stackoverflow.com/questions/14675108/sortedset-sortedlist-with-better-linq-performance)

# android - 来自 GridView Android 的 GetItem 视图布局

> ID：13215068
> 
> 赞同：-1
> 
> 时间：2012-11-04T00:58:06.097
> 
> 标签：android, android-gridview

是否可以在活动中获取网格视图子项？网格已填充，我试图让 gridview 的子视图更改其布局中的某些内容。

我已经覆盖了 onStart() 方法：

```
 protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        populateGridView(gridview, beersArray);
        View found = gridview.findViewById((int)gridview.getAdapter().getItemId(1));
        System.out.println("found view: " + found);
    } 
```

但视图始终为空。我应该像这样获得网格项目视图吗？这是我试图从活动类访问的 gridview.xml 布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget44"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="201px"
    android:layout_y="165px"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/icon_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/icon_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:textSize="10dp"
        android:textColorHighlight="#656565" />

</LinearLayout> 
```

我做错了吗？OnItem 单击我知道我正在单击什么项目，但我正在尝试更改我没有单击的特定项目上的图标。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:02:50.773

您可以在 上使用[`getChildAt`](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)，`GridView`因为它是`ViewGroup`.

# perl - 修补类以计算创建对象的数量

> ID：13215071
> 
> 赞同：3
> 
> 时间：2012-11-04T00:58:36.240
> 
> 标签：perl, oop, testing, memory

我有一个 Perl 库，它在操作过程中使用了一些（大约 3 或 4 个）类的许多对象。

在测试代​​码时，我想确保它不会太多（我不是在谈论内存泄漏，我知道如何检查）。为此，我认为我可以计算每个使用的对象，并检查测试数据运行期间使用的最大值。然后，我会将获得的数字与一些关于库应该使用多少对象的猜测进行比较。

但是，我在实现这一点时遇到了问题。我想到了两种可能的方法：

*   拦截`Package::new`和`Package::DESTROY`。然而，这有一个小问题，在那个包中，`new`并不总是返回一个新对象。有时，它使用一个预先存在的对象（这些对象被用作不可变对象，所以它应该无关紧要）。所以我必须跟踪每个单独的对象，看看它之前是否存在。

*   拦截`Package::bless`和`Package::DESTROY`。这应该可行，但似乎有点不正统。

问题是，哪种方式更有可能成功（可能是在类似情况下常用的方式），其次，我什至如何实现第二种方式（我必须覆盖`Package::bless`所有有问题的包还是只覆盖基类ETC。）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:41:52.700

存储所见对象 ID 的哈希值，以确保您只计算每个对象一次。您可以使用[Hash::Util::FieldHash](https://metacpan.org/module/Hash%3a%3aUtil%3a%3aFieldHash)或[Object::ID](https://metacpan.org/module/Object%3a%3aID)来做到这一点。

idhash 的优点是它不会人为地使对象保持活动状态。随着每个对象被销毁，它的条目将从 idhash 中删除。它还具有跨线程工作的好处。

```
package Foo;

use strict;
use warnings;
use v5.10;

use Hash::Util::FieldHash qw(idhash register id);

idhash my %objects;

sub new {
    my $self = bless {}, shift;
    register $self, \%objects;
    $objects{$self} = 1;

    say "Creating ".id $self;

    my $num_objects = keys %objects;
    say "There are now $num_objects alive.";

    return $self;
}

sub DESTROY {
    my $self = shift;

    my $num_objects = keys(%objects) - 1;

    say "Destroying ".id $self;
    say "There are $num_objects left alive.";
}

{
    my $obj1 = Foo->new;            # 1 object
    my $obj2 = Foo->new;            # 2 objects
    {
        my $obj3 = Foo->new;        # 3 objects
    } # 2 objects
    my $obj4 = Foo->new;            # 3 objects
} # 0 objects
__END__
Creating 4303384168
There are now 1 alive.
Creating 4303542768
There are now 2 alive.
Creating 4303545192
There are now 3 alive.
Destroying 4303545192
There are 2 left alive.
Creating 4303638136
There are now 3 alive.
Destroying 4303542768
There are 2 left alive.
Destroying 4303384168
There are 1 left alive.
Destroying 4303638136
There are 0 left alive. 
```

或者，由于创建的每个对象都将被销毁，因此仅在对象被销毁时才计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T07:29:49.157

关于如何拦截 bless（不是 Package::bless，bless 是内置的，不是某种方法），大多数内置是可覆盖的（参见[http://perldoc.perl.org/perlsub.html#Overriding-Built-函数内](http://perldoc.perl.org/perlsub.html#Overriding-Built-in-Functions)）。替换 bless 函数将执行您的跟踪（如果将一个对象祝福到您的目标类中），然后调用 CORE::bless 来实际执行祝福。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T08:21:22.427

尝试这样的事情（未经测试）：

```
my $Package_objects = {};
my $override_new = *Package::new{CODE};
*Package::new = sub {
    my $self = $override_new->(@_);
    # Interpolate $self as string to get "HASH(0x12345)"; save package name
    $Package_objects->{ "$self" } = 'Package';
    return $self;
};
my $override_dest = *Package::DESTROY{CODE};
*Package::DESTROY = sub {
    delete $Package_objects->{ "$_[0]" };
    $override_dest->(@_);
}; 
```

可能这是最野蛮的方法，但必须在没有 3rd 方模块的情况下工作；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T15:37:41.767

看看使用的技术

[开发泄漏对象 1.01](http://search.cpan.org/~adamk/Devel-Leak-Object-1.01/)

我使用 ADAMK 的代码作为收集各种对象创建/销毁统计信息的基础。

# mysql - 如何在 MySQL 中查找上周的数据

> ID：13215072
> 
> 赞同：2
> 
> 时间：2012-11-04T00:58:45.723
> 
> 标签：mysql

我想显示来自

Q1：每个学生只在最后一周。

Q2：每个学生只有最后一个月。

我怎样才能做到这一点？

[一周的演示](http://sqlfiddle.com/#!2/f1fbb/3)

[一个月的演示](http://sqlfiddle.com/#!2/f1fbb/4)

```
CREATE TABLE `hw_homework` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `studentid` int(10) NOT NULL,
  `subjectid` int(10) NOT NULL,
  `assignment_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `teacherid` int(10) NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ;

INSERT INTO `hw_homework` (`id`, `studentid`, `subjectid`, `assignment_name`, `teacherid`, 
`date`) VALUES
(1, 29, 5, '5E', 20, '2012-11-04 13:58:40'),
(2, 15, 5, '32B', 20, '2012-11-04 13:59:54'),
(3, 29, 4, 'Q2A', 20, '2012-10-30 17:53:46'),
(4, 29, 11, '6E', 20, '2012-11-02 20:06:39'),
(5, 29, 11, 'C15', 20, '2012-10-16 20:06:30'),
(6, 15, 11, '7A', 20, '2012-09-19 20:08:05'),
(7, 29, 5, '3B', 20, '2012-09-14 20:08:12'),
(8, 29, 13, '6E', 32, '2012-10-29 20:23:46'),
(9, 29, 11, '7E', 18, '2012-10-30 14:35:14'),
(10, 2, 5, '5E', 20, '2012-10-21 13:58:40'),
(11, 2, 5, '5E', 20, '2012-10-30 13:58:40'),
(12, 2, 5, '5E', 20, '2012-10-31 13:58:40'); 
```

这不适用于上周。它显示了本周的结果。

```
SELECT  studentID, 
        DATE_FORMAT(`date`, '%U') `WeekNo`,
        COUNT(studentID) totalMissed
FROM hw_homework he
WHERE DATE_FORMAT(`date`, '%U') = (SELECT MAX(DATE_FORMAT(NOW(), '%U')) FROM hw_homework hi WHERE hi.studentID = he.studentID)
-- AND studentID = ''
GROUP BY studentID, DATE_FORMAT(`date`, '%U') 
```

这在上个月不起作用。这显示了本月的结果。

```
SELECT  studentID, 
        DATE_FORMAT(`date`, '%M') `Month`,
        COUNT(studentID) totalMissed
FROM hw_homework he
WHERE DATE_FORMAT(`date`, '%M') = (SELECT MAX(DATE_FORMAT(NOW(), '%M')) FROM hw_homework hi WHERE hi.studentID = he.studentID)
-- AND studentID = ''
GROUP BY studentID, DATE_FORMAT(`date`, '%M') 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:06:01.390

尝试从 weekNo 中减去 1：

```
SELECT  studentID, 
        DATE_FORMAT(`date`, '%U') `WeekNo`,
        COUNT(studentID) totalMissed
FROM hw_homework he
WHERE DATE_FORMAT(`date`, '%U') = 
(SELECT MAX(DATE_FORMAT(NOW(), '%U')-1) 
 FROM hw_homework hi 
 WHERE hi.studentID = he.studentID)
GROUP BY studentID, DATE_FORMAT(`date`, '%U') 
```

# objective-c - 为什么 UITableViewCellAccessoryCheckMark 不会消失？

> ID：13215073
> 
> 赞同：0
> 
> 时间：2012-11-04T00:58:47.813
> 
> 标签：objective-c, ios, xcode, uitableview

好的，所以我正在慢慢弄清楚这一点。我还有一个问题。我正在使用一个字符串，并说如果该字符串等于单元格文本，则在加载 tableView 时对其进行复选标记。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if ([cell.textLabel.text isEqualToString:transferData]) {

    cell.accessoryType = UITableViewCellAccessoryCheckmark;

} 
```

然后我告诉它删除该复选标记并在被选中时相应地添加复选标记：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

cell.accessoryType = UITableViewCellAccessoryNone;

  UITableViewCell      *cellCheck = [tableView
                              cellForRowAtIndexPath:indexPath];

cellCheck.accessoryType = UITableViewCellAccessoryCheckmark;

  transferData = cellCheck.textLabel.text;
  NSLog(@"%@", transferData);
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell* uncheckCell = [tableView
                                cellForRowAtIndexPath:indexPath];
uncheckCell.accessoryType = UITableViewCellAccessoryNone;

} 
```

一切正常，除了第一次加载时。出于某种原因，当我在另一个单元格上选择时，最初与 tableView 一起加载的复选标记不会消失。为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:10:17.040

你犯了一个常见的错误。

选择单元格时，您直接设置复选标记的状态。您应该做的是在数据源中设置复选标记的状态，并让表格单元格从数据源自行配置。

**排他检查表视图的编辑示例**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSArray *changedIndexPaths = nil;

    NSIndexPath *currentCheckedIndexPath = [self indexPathOfCurrentCheckedObject];

    if (currentCheckedIndexPath && ![currentCheckedIndexPath isEqual:indexPath]) {
        // There is currently a checked index path - unselect the data source and
        // add it to the changed index array.

        [[self.tableData objectAtIndex:currentCheckedIndexPath.row] setChecked:NO];
        changedIndexPaths = @[indexPath, currentCheckedIndexPath];
    } else{
        changedIndexPaths = @[indexPath];
    }

    [[self.tableData objectAtIndex:indexPath.row] setChecked:YES];

    [self.tableView reloadRowsAtIndexPaths:changedIndexPaths withRowAnimation:UITableViewRowAnimationNone];

} 
```

我有一个新的[示例应用程序](https://dl.dropbox.com/u/585261/ExclusiveCheckedTableView.zip)，您可以下载以查看整个项目：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T01:03:17.623

你需要：

```
if (self.selectedPath && [indexPath isEqual:self.selectedPath]) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} else {
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

细胞被重复使用。如果您有条件地设置任何单元格属性，则必须始终使用“else”部分来重置属性。

编辑：在您的方法中进行上述更改后，在您的`cellForRowAtIndexPath:`方法中执行以下操作`didSelectRowAtIndexPath:`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSIndexPath *oldSelection = self.selectedPath;
    if (self.selectedPath) {
        UITableViewCell* uncheckCell = [tableView cellForRowAtIndexPath:self.selectedPath];
        uncheckCell.accessoryType = UITableViewCellAccessoryNone;
        self.selectedPath = nil;
    }

    if (oldSelection == nil || ![indexPath isEqual:oldSelection]) {
        UITableViewCell* checkCell = [tableView cellForRowAtIndexPath:indexPath];
        checkCell.accessoryType = UITableViewCellAccessoryCheckmark;
        self.selectedPath = indexPath;
    }

    [tableView deselectRowAtIndexPath:indexPath];
} 
```

并摆脱`didDeselectRowAtIndexPath:`方法。

当然，您需要`selectedPath`type 的属性`NSIndexPath *`。

此代码允许您选择 0 或 1 行。

# .htaccess - 可能由 .htaccess 重写引起的 Open Graph 问题

> ID：13215080
> 
> 赞同：4
> 
> 时间：2012-11-04T01:00:08.513
> 
> 标签：.htaccess, facebook-like, facebook-opengraph, facebook-social-plugins

尽管有很多关于 Open Graph 的主题，但我似乎找不到任何涵盖我的具体问题的内容。我为一个客户端构建了一个站点，该站点由许多静态 html 页面组成。完成后，客户希望添加社交按钮，因此我插入了所有必要的 Open Graph 协议元标记。（见下文）

```
<meta property="og:title" content="site name" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.mydomain.co.uk/page" />
<meta property="og:image"   content="http://www.mydomain.co.uk/images/image.jpg" />
<meta property="og:description" content="page description" /> 
```

在 Facebook 对象调试器上测试选定页面时，似乎无法识别我包含的元标记。我认为问题可能是由我包含的 .htaccess 文件引起的，以消除对“.html”和“.php”的需求……见下文；我相信这是问题所在，因为当我使用 .html 测试我的网站时，它似乎工作得很好（只要 .html 包含在“og：url”元标记中。）但如果不是，则会出现各种问题，而 Facebook 提取的描述实际上是我的 css 文件中的文本..？

```
<Files .htaccess> 
order allow,deny 
deny from all 
</Files> 

ErrorDocument 404 /error404.html

Options +MultiViews

RewriteEngine on
RewriteCond %{HTTP_HOST} ^([^.]+\.co.uk) [NC]
RewriteRule (.*) http://www.%1/$1 [R=301,L] 
```

我可能在这里缺少一些简单的东西，但它似乎让我变得更好。任何帮助都会很棒！提前致谢。

# opengl - 如何在 PyOpenGL 中旋转 object3D？

> ID：13215082
> 
> 赞同：0
> 
> 时间：2012-11-04T01:00:33.433
> 
> 标签：opengl, python-3.x, pyopengl

我试图在 X 轴上旋转一个对象，但我不明白。

我有一个 Object 3D 类，它是：

```
class Object3D():
   implements( IRenderizable )

   def __init__(self, parameters={} ):
     self.parameters = parameters
     self.ID= Engine().addObject3D()
     self.parent = None
     self.childrens =[]
     self.position = (parameters.get('POSITION') is None ) is True and  Vector4()     or parameters.get('POSITION')
     self.rotation = (parameters.get('ROTATION') is None ) is True and  Quaternion() or parameters.get('ROTATION')
     self.direction = Vector4()
     self.scale = Vector3(1,1,1)
     self.matrix = Matrix4()
     self.matrixLocal = Matrix4()
     self.matrixWorld = Matrix4()
     self.matrixRotationWorld = Matrix4()
     self.up = Vector3(0,1,0 )
     self.parameters =parameters
     self.rotationAngle= 10.
     self.currentMatrix = None
     self.initCurrentMatrix()

def initCurrentMatrix(self):
    glPushMatrix()
    glLoadIdentity()
    self.currentMatrix = glGetDoublev(GL_MODELVIEW_MATRIX)
    glPopMatrix()
    return 

def setID(self, Id ):
    self.ID = Id

def moveTo( self, x,y,z ):
    v=Vector4(x,y,z)
    #self.position.addSelf( self.rotation.rotateVector(v)  )
    self.position.addSelf( v )
    glPushMatrix()
    glLoadIdentity()
    glTranslatef( float(self.position.x),float(self.position.y),float(self.position.z) )
    self.currentMatrix =  glGetDoublev(GL_MODELVIEW_MATRIX)
    glPopMatrix()
    return self

def render(self):
    pass 
```

在这段代码中，您将看到如何实现旋转：

```
def rotateX(self, angle=2 ):
    glPushMatrix()
    glRotated( angle, 0,1,0)
    glPopMatrix()
    return self 
```

当 Vector4, Vector3 , Quaternion, Matrix4 是我自己的类时。

这是我的错吗？以及如何进行轮换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:26:46.297

我不知道它是否有帮助，但移动或旋转对象的一般工作流程如下：

1.  画静态的东西
2.  将实际矩阵压入堆栈 ( `glPushMatrix`)
3.  加载单位矩阵（初始矩阵） ( `glLoadIdentity`)
4.  使用您自己的矩阵并加载并将其设置为实际矩阵
5.  通过 glRotate / gl.... 转换实际矩阵
6.  将实际矩阵保存为您自己的矩阵
7.  画出你的物体
8.  从栈中弹出矩阵 ( `glPopMatrix`)
9.  画出其余的静态东西

在步骤 5/6 中，您更新了转换矩阵。这是必要的，因为`glRotate`它就像一个宏宏，用于将旋转矩阵乘以实际的变换矩阵。如果您总是加载单位矩阵然后执行`glRotate`然后它仅将单位矩阵转换给定的度数->您的对象将被绘制旋转该度数，然后再不做其他事情-我想，这是您的错.. .

如果您使用上述 9 个步骤，则对象的矩阵将乘以旋转矩阵，结果将用于下一个迭代步骤中的下一次乘法。

我希望，这将有助于一般理解=）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:08:38.607

在您的旋转函数中，它应该是度数而不是角度：

glRotatef(度, 0, 0, -1)

那样有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:24:11.387

> 这是我的错吗？

您将 OpenGL 误认为是一个数学库，但事实并非如此。不要使用 OpenGL 对您保留在某个变量中的矩阵进行数学运算。实际上，根本不要使用 OpenGL 矩阵函数。它们是固定功能管道的一部分，已从更高版本的 OpenGL 中删除。

# html - 不同的div，相同的itemscope

> ID：13215084
> 
> 赞同：3
> 
> 时间：2012-11-04T01:00:35.830
> 
> 标签：html, schema.org

我刚开始使用 Schema.org 更新我的网站，但一件事并没有达到预期的效果。

我想将以下属性应用于新闻文章：

*   姓名
*   标题
*   文章正文
*   出版日期
*   作者
    *   姓名
    *   网址

问题是，这些属性并不都在同一个 div 中。所以基本上你会看到它：

![在此处输入图像描述](../Images/d0525cbfbd772e6a91845bd63f170e2d.png)

发生的情况是，当我使用[Google Rich Snippets 测试器](http://www.google.com/webmasters/tools/richsnippets)对其进行测试时，第二个 div 被放置为“网页”的属性而不是“新闻文章”的属性。

这应该如何解决？还是我必须改变我的整个布局？

编辑：在您提出建议之前，由于布局的其余部分，目前无法将 div 1 和 div 2 放入 1 包装器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:45:41.287

`itemref`在与该属性相同的元素上使用该`itemscope`属性。像这样：

```
<!DOCTYPE html>
<title>Test</title>
<div id="div1" itemref="dpub auth" itemscope itemtype="http://schema.org/NewsArticle" >
  <div itemprop="name">Article Name</div>
</div>
<div id="div2">
  <div id="dpub" itemprop="datepublished">September 1 2012</div>
  <div id="auth" itemscope itemprop="Author" >
    <div itemprop="name">John Smith</div>
    <div itemprop="url">http:/www.example.net</div>
  </div>
</div> 
```

在[片段测试工具中检查它](http://www.google.com/webmasters/tools/richsnippets?url=&html=%3C!DOCTYPE+html%3E%0D%0A%3Ctitle%3ETest%3C%2Ftitle%3E%0D%0A%3Cdiv+id%3D%22div1%22+itemscope+itemtype%3D%22http%3A%2F%2Fschema.org%2FNewsArticle%22+itemref%3D%22dpub+auth%22%3E%0D%0A++%3Cdiv+itemprop%3D%22name%22%3EArticle+Name%3C%2Fdiv%3E%0D%0A%3C%2Fdiv%3E%0D%0A%3Cdiv+id%3D%22div2%22%3E%0D%0A++%3Cdiv+id%3D%22dpub%22+itemprop%3D%22datepublished%22%3ESeptember+1+2012%3C%2Fdiv%3E%0D%0A++%3Cdiv+id%3D%22auth%22+itemscope+itemprop%3D%22Author%22+%3E%0D%0A++++%3Cdiv+itemprop%3D%22name%22%3EJohn+Smith%3C%2Fdiv%3E%0D%0A++++%3Cdiv+itemprop%3D%22url%22%3Ehttp%3A%2Fwww.example.net%3C%2Fdiv%3E%0D%0A++%3C%2Fdiv%3E%0D%0A%3C%2Fdiv%3E%0D%0A)

# php - 表单提交未显示成功消息

> ID：13215086
> 
> 赞同：0
> 
> 时间：2012-11-04T01:00:56.100
> 
> 标签：php, jquery, html, echo, form-submit

我的联系表格有问题，即使消息已成功发送到电子邮件，也没有给出成功指示。由于按下提交按钮时页面未更改，因此表单对用户来说似乎已损坏。此页面是使用 Themeforest 模板构建的，但作者无法提供解决方案。我希望有人能指出我正确的方向。

这是给我的股票“contact-send.php”文件：

```
<?php

$names = $_POST['names'];
 $email = $_POST['email_address'];
 $comment = $_POST['comment'];
 $to ='to@email.com';

 $message = "";
 $message .= "*Name: " . htmlspecialchars($names, ENT_QUOTES) . "<br>\n";
 $message .= "*Email: " . htmlspecialchars($email, ENT_QUOTES) . "<br>\n";
 $message .= "*Comments: " . htmlspecialchars($comment, ENT_QUOTES) . "<br>\n";
 $lowmsg = strtolower($message);

 $headers = "MIME-Version: 1.0\r\nContent-type: text/html; charset=iso-8859-1\r\n";
 $headers .= "From: \"" . $names . "\" <" . $email . ">\r\n";
 $headers .= "Reply-To: " .  $email . "\r\n";
 $message = utf8_decode($message);  mail($to, "Note from the Contact Form", $message, $headers);

 if ($message){
        echo 'sent';
 }else{
      echo 'failed';
 }
?> 
```

这是股票的html代码：

```
 <form id="contact-form" name="contact-form" action="" method="post">
            <label class="contact-label">Name*</label>
            <input class="contact-input" type="text" name="contact-names" value="" /><br /><span class="name-required"></span>
            <label class="contact-label">Email*</label>
            <input class="contact-input" type="text" name="contact-email" value="" /><br /><span class="email-required"></span>
            <label class="contact-label">Message*</label>
            <textarea name="comments" rows="2" cols="20" class="contact-commnent"></textarea><br /><span class="comment-required"></span>
            <input type="submit" value="Send"  id="submit-form" class="button lightred contact-submit" />
        </form> 
```

此文件也附加到 html 页面：(juery-contact.js)

```
$(document).ready(function(){
    $('#submit-form').click(function(){

     var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
     var names               = $('#contact-form [name="contact-names"]').val();  
   var email_address = $('#contact-form [name="contact-email"]').val();
   var comment           = $.trim($('#contact-form .contact-commnent').val());
   var data_html ='' ;

                if(names == ""){
                     $('.name-required').html('Your name is required.');
                }else{
                     $('.name-required').html('');
                }
                if(email_address == ""){
                     $('.email-required').html('Your email is required.');
                }else if(reg.test(email_address) == false){
                     $('.email-required').html('Invalid Email Address.');
                }else{
                     $('.email-required').html('');
                }

                if(comment == ""){
                     $('.comment-required').html('Comment is required.');
                }else{
                     $('.comment-required').html('');
                }

        if(comment != "" && names != "" && reg.test(email_address) != false){

            data_html = "names="+ names + "&comment=" + comment + "&email_address="+ email_address;

            //alert(data_html);

          $.ajax({
                  type: 'post',
                  url: 'contact-send.php',
                  data: data_html,
                  success: function(msg){
                    if (msg == 'sent'){
                            $('#success').html('Message sent!')     ;
                            $('#contact-form [name="contact-names"]').val('');   
                          $('#contact-form [name="contact-email"]').val('');
                        $('#contact-form .contact-commnent').val('');

                        }else{
                            $('#success').html('Mail Error. Please Try Again.!')    ;   
                        }
                  }
            });

      }

        return false;
    })
}) 
```

如果您需要，这里是现场网站：http: [//shamrockmasonry.ca/contact.html](http://shamrockmasonry.ca/contact.html)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:07:46.687

我看了一眼源代码，发现没有一个带有'#success' id 的元素。

因此，将 html 消息添加到 #success 元素的这段代码不能这样做，因为该元素实际上并不存在：

```
 if (msg == 'sent'){
     $('#success').html('Message sent!');
     $('#contact-form [name="contact-names"]').val('');   
     $('#contact-form [name="contact-email"]').val('');
     $('#contact-form .contact-commnent').val('');
 }else{
     $('#success').html('Mail Error. Please Try Again.!')    ;   
 } 
```

要回答您在评论中提出的有关删除成功提交后收到的错误消息的其他问题，请执行以下操作。

向您的跨度添加其他类，例如此处的示例

```
<span class="email-required error-message"></span>
<span class="name-required error-message"></span>
<span class="comment-required error-message"></span> 
```

并将这行代码添加到您的 jquery 块中：

```
if (msg == 'sent'){
     $('#success').html('Message sent!');
     $('#contact-form [name="contact-names"]').val('');   
     $('#contact-form [name="contact-email"]').val('');
     $('#contact-form .contact-commnent').val('');
     $('.error-message').empty(); // clears all of the current error messages on success
 }else{
     $('#success').html('Mail Error. Please Try Again.!')    ;   
 } 
```

因此，在您的表单标签上方添加一个带有#success id 的 div 元素，您应该会很好。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:06:17.637

`<div id="success"></div>`在表单 HTML 之前添加

应该：

```
<div id="success"></div>
<form id="contact-form" name="contact-form" action="" method="post">
    [...]
</form> 
```

# flash - 检查以 Flash 编写的应用程序对服务器的请求

> ID：13215087
> 
> 赞同：3
> 
> 时间：2012-11-04T01:00:58.263
> 
> 标签：flash, http, websocket, communication, wireshark

有没有办法找到 Flash 应用程序向服务器发送的请求类型？

我试图查看客户端使用 Chrome“检查元素”向服务器发送的信息，但它告诉我没有发生任何事情。

但可以肯定的是，通信正在进行中。我感兴趣的网站是[http://www.chesscube.com/](http://www.chesscube.com/)，每次你移动它时，它都会以某种方式将它发送到服务器，或者可能只是发送给另一个对手。在游戏结束时 - 它肯定会将游戏发送到服务器。但到目前为止，我能看到的只是几张在游戏过程中上传的图片。

感谢帮助。

PS我试图使用wireshark来捕获数据包并以这种方式查看通信。这是我在做什么：

ping chesscube.com 以实现其 ip-address: 78.47.2.115 比我只监听来自该 ip 地址 ip.addr == 78.47.2.115 的包但我唯一能看到的是很多 TCP 和一些 HTTP 包. 所有 http 包都只发送用户头像的 png 图像。那里有聊天，人们一直在说话，但我看不到。我知道它来自另一个 IP 地址，但我不知道如何找到它。问题是我无法监视网络和计算机之间的所有流量，因为流量太多了，我不知道如何限制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:06:58.027

好的，我终于能够确定它了。可能有人会感兴趣，或者在任何时候有人会困惑 Flash 与服务器的通信到底如何——你知道在哪里可以找到。

所以一切都通过 TCP 作为传输层和 RTMP [http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)，它实际上是用于流视频。他们在那里使用它来播放游戏。

如果有人对数据包的外观感兴趣 - 这是 RTMP 的主体：

```
\00
bt5tsmdn9z\00\00\00\00\00\00\00\00\00\00\00\00\00:\00
onMoveMade\00   Schockrae\00$com.playlogix.red5.gameserver.R5Move\00
lagPenalty\00\00\00\00\00\00\00\00\00\00moveLag\00@\93\D0\00\00\00\00\00\00
cheatTypes
\00\00\00\00\00drawIfTimeElapsed\00\00time\00@\E8\CA\C0\00\00\00\00\00pingLag\00@b\E0\00\00\00\00\00\00san\00c5\00  cheatData\00fen\00?r2qkb1r/pp1npppp/2p2n2/3p4/3P1Pb1/2PBPN2/PP4PP/RNBQK2R b KQkq -\00ply\00@(\00\00\00\00\00\00\00toCoord\0034\00   fromCoord\0042\00\00 
```

这里最有趣的部分是：

```
cheatData\00fen\00?r2qkb1r/pp1npppp/2p2n2/3p4/3P1Pb1/2PBPN2/PP4PP/RNBQK2R 
```

这基本上是国际象棋位置的PNG棋盘表示

更多关于它的人可以在这里阅读。 [http://en.wikipedia.org/wiki/Forsyth-Edwards_Notation](http://en.wikipedia.org/wiki/Forsyth-Edwards_Notation)

调查它对我来说真的很有趣。因此，如果有人有类似这样的有趣事情 - 请随时与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:03:05.207

下载并安装[Fiddler2](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)。这些应用程序可让您检查流量。您应该能够运行它并过滤掉 Flash 应用程序发出的通信。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-04T03:00:07.337

试试[查尔斯网络代理](http://www.charlesproxy.com/)。它不仅向您显示流量，还允许您记录流量并以不同方式查看流量。

# joomla - joomla 2.5对有效用户名有什么限制

> ID：13215094
> 
> 赞同：3
> 
> 时间：2012-11-04T01:02:38.170
> 
> 标签：joomla, joomla2.5

我没有高兴地在网上搜索过，我想知道 joomla 对有效用户名的限制。

例如，最小和最大长度。非法字符。

查看数据库字段大小，我假设最大长度为 150，我还读到 {}[]- 是非法的，但怀疑还有其他无效字符。

密码的相同问题，大小和字符限制是多少。

谢谢你本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T07:29:14.400

每个数据库的用户名最长为 150 个字符，最少为 2 个字符。它对 {}[]- 没有限制，但不允许您使用以下任何一种：<>\"'%;()&

密码没有任何限制，因为它被散列到盐渍 MD5。该字段本身限制为 100 个字符，尽管散列将确保它不会变得那么长。

参考：[https ://github.com/joomla/joomla-cms/blob/master/libraries/joomla/table/user.php#L184](https://github.com/joomla/joomla-cms/blob/master/libraries/joomla/table/user.php#L184)

# javascript - 如何将此脚本概括为鼠标悬停时的多个弹出窗口

> ID：13215096
> 
> 赞同：0
> 
> 时间：2012-11-04T01:02:56.923
> 
> 标签：javascript, popup, dom-events

`onmouseover`我有一个脚本可以在两个由事件触发的弹出窗口之间切换。其中一个特点是弹出窗口一直持续到下一个`onmouseover`事件。我想要其中很多，因此要隐藏的弹出窗口不能像我的脚本中那样“硬编码”。有没有办法将下次调用弹出函数时需要不显示的弹出窗口的 id 存储在变量中？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
function popup(show,hide){
    show.style.display="block"
    hide.style.display="none"
    }
</script>
<style type="text/css">
.pop {
    position: absolute;
    display: none;
    top: 50px;
    left: 200px;
    width: 300px;
}
</style>
</head>
<body>

<table><tr>
<td onmouseover="popup(pop1,pop2)">Show popup 1</td>
<td onmouseover="popup(pop2,pop1)">Show popup 2</td>
</tr></table>

<div class="pop" id="pop1">This is popup 1</div>
<div class="pop" id="pop2">Popup 2 is here</div>

</body>
</html> 
```

或访问[http://www.salemharvest.org/Utilities/TestingPHP/testingpopupdivs5.php](http://www.salemharvest.org/Utilities/TestingPHP/testingpopupdivs5.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:52:16.637

概括它的一种方法是使用元素索引来显示相关的弹出窗口。这将要求弹出元素（`pop`类元素）包含在一个元素中，以使*弹出*器和弹出元素索引都像两个相同长度的数组一样映射。

显示弹出窗口时，弹出元素保存在一个变量中，稍后当鼠标在不同的*弹出*元素上时将使用该变量。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
addEventListener("DOMContentLoaded", function() {
  var lastPopup = null;
  function showit(ev) {
    var popups = document.getElementById("popups").children;
    eleToShow = popups[ev.target.cellIndex];
    if (lastPopup && (lastPopup !== eleToShow)) lastPopup.style.display = "none";
    eleToShow.style.display = "block";
    lastPopup = eleToShow;
  }
  var poppers = document.getElementById("poppers").cells, i;
  for (i = 0; i < poppers.length; i++) {
    poppers[i].addEventListener("mouseover", showit, false);
  }
}, false);
</script>
<style type="text/css">
.pop {
    position: absolute;
    display: none;
    top: 50px;
    left: 200px;
    width: 300px;
}
</style>
</head>
<body>

<table><tr id="poppers">
<td>Show popup 1</td>
<td>Show popup 2</td>
</tr></table>

<div id="popups">
<div class="pop">This is popup 1</div>
<div class="pop">Popup 2 is here</div>
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:52:47.430

我可能应该从这个开始，但我的 poppers 实际上是行，而不是单元格。我尝试了对 Jay 的代码进行简单修改的​​方法来处理行。我将其更改为索引行，然后使用 rowIndex 查找弹出窗口，但我遗漏了一些东西。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
// function by Jay at stackoverflow
addEventListener("DOMContentLoaded", function() {
  var lastPopup = null;
  function showit(ev) {
    var popups = document.getElementById("popups").children;
    eleToShow = popups[ev.target.rowIndex];
    if (lastPopup && (lastPopup !== eleToShow)) lastPopup.style.display = "none";
    eleToShow.style.display = "block";
    lastPopup = eleToShow;
  }
  var poppers = document.getElementById("poppers").rows, i;
  for (i = 0; i < poppers.length; i++) {
    poppers[i].addEventListener("mouseover", showit, false);
  }
}, false);
</script>
<style type="text/css">
.pop {
    position: absolute;
    display: none;
    top: 100px;
    left: 200px;
    width: 300px;
}
</style>
</head>
<body>

<table id="poppers">
<tr><td>Show popup 1</td></tr>
<tr><td>Show popup 2</td></tr>
<tr><td>Show popup 3</td></tr>
</table>

<div id="popups">
<div class="pop">This is popup 1</div>
<div class="pop">Popup 2 is here</div>
<div class="pop">And then popup 3</div>
</div>

</body>
</html> 
```

# python - 编写 NAT 时的想法或算法

> ID：13215100
> 
> 赞同：1
> 
> 时间：2012-11-04T01:03:57.577
> 
> 标签：python, sockets, networking, nat

我正在使用 TUNTAP 进行 Python 隧道项目。在 TUNTAP 接口上接收的数据包含原始 IP 数据包，包括所有标头。我可以做两件事之一。

在接收端，我正在用 Twisted 收听。在传出端，我将有一个转储 IP 数据包的原始套接字。在转储数据包之前，程序将源地址与服务器的源地址交换。它还重新计算 TCP 和 UDP 校验和。它还使用以下方法之一交换端口。此信息在 NAT 表中进行跟踪

1）每个用户使用一个端口，例如

```
 US.ER.01.IP:10000 ----> SE.RV.ER.IP:3000 ----> facebook.com:80
 US.ER.01.IP:10001 ----> SE.RV.ER.IP:3000 ----> facebook.com:80
 US.ER.02.IP:3000 ----> SE.RV.ER.IP:3001 ----> facebook.com:80 
```

如果第二个用户同时请求 1 个 facebook，这会导致问题吗？系统如何知道如何路由 facebook 的回复。它在端口 3000 上传入，因此属于 user1，但它是否被映射回 10000 或 10001？

2）为每个连接使用一个唯一的端口，例如

```
 US.ER.01.IP:10000 ----> SE.RV.ER.IP:3000 ----> facebook.com:80
 US.ER.01.IP:10001 ----> SE.RV.ER.IP:3001 ----> facebook.com:80
 US.ER.02.IP:3000 ----> SE.RV.ER.IP:3002 ----> remoteHost.com:22 
```

我怎么知道何时从 NAT 表中删除条目？使用这种方法，我可以看到 NAT 表很快填满。对此的解决方案是：

```
 I could wit for FIN packets from the server.  This will not work with UDP though.
  I could age the NAT entry on each hit.  I could then run garbage collection 
     every N seconds.  I see this being an issue if garbage collection runs
     and how would a server's delayed response get to the proper host if it gets
     deleted from the table. 
```

还有从原始套接字读取的问题。我知道如何发送一个，但是否可以接收单独的 IP 数据包。原始套接字能否在每个 sock.recieve(65535) 调用中接收一个数据包，是否可能接收多个 IP 数据包？

哪种实现最好？我应该注意的任何其他提示或事项？

编辑：

好的，所以我有很多客户。如果您误解了我，则在客户端和自身之间使用 enitre /30。这只是使隧道成为可能的抽象。我也不认为这很重要，但是 websocket 实际上通过 LAN 上的“代理”（IPdata 只是重新打包到一个新的 websocket 中，但是映射是唯一的）。我不想让解释变得如此混乱。我看不出这有什么改变。

```
 Client PC     CLIENT PC              Client PC----->LAN                               INTERNET    
 Client 1: 10.1.1.2 ----> 10.1.1.1 ----> Websocket(IPdata) ----> Browser ---> newWebSocket(IPData) ----> SE.RV.ER.IP
 Client 2: 10.1.1.4 ----> 10.1.1.3 ----> Websocket(IPdata) ----> Browser ---> newWebSocket(IPData) ----> SE.RV.ER.IP
 Client 3: 10.1.1.6 ----> 10.1.1.5 ----> Websocket(IPdata) ----> Browser ---> newWebSocket(IPData) ----> SE.RV.ER.IP 
```

每个客户端都将其默认路由设置为隧道端点（例如 10.1.1.1）。客户端获取 IP 数据报，将其放入 websocket，将 websocket 发送到 LAN 上的浏览​​器，然后将其发送到服务器（或者可能是另一个代理）。websocket 内部包含原始 IP 数据报（源为 10.1.1.2 或其他一些内部 IP）。

需要注意的是，服务器从 Internet 接收到包含货物的 websocket 消息（带有私有源地址）。python服务器将如何使用它？自己创建一个新隧道，然后将数据包原始转储到隧道中并适当地路由？

或者也许我可以使用映射？

我如何能够在这个 websocket 链上“映射”隧道抽象？客户端没有通往互联网的路线，但可以访问可以访问互联网的“浏览器”。这似乎与 VPN 隧道的情况相同。抽象如下：

```
 Client 1: 10.1.1.2 ----> 10.1.1.1 ----> Websocket(IPdata) ----> Browser ---> newWebSocket(IPData) ----> SE.RV.ER.IP -> Internet
           10.1.2.2------------------------------------------------------------------------------------> 10.1.2.1 ----> Internet 
```

如果您知道任何让我走上正轨的资源，那就太好了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:40:16.540

### 实施 NAT

您必须为每个连接使用一个唯一端口，而不是每个用户使用一个端口，这正是您在问题中概述的原因：如果您不这样做，那么您可以（并且将会！）最终使用相同的 5 个连接-tuple (protocol,local-address,local-port,remote-address,remote-port)，您将无法消除它们的歧义。

此外，如果您想与一些执行 NAT 遍历的协议配合得很好，那么您应该尽可能*不*重新映射原始源端口，也就是说，仅在它与现有连接冲突时重新映射（到新的随机端口）你正在跟踪。

要正确实施 NAT，您必须跟踪每个连接的状态。

对于 TCP，这意味着观察标志，当你看到 a 时设置新状态，当你从两边`SYN`看到 s 时拆除状态。`FIN`您跟踪的状态必须至少包含原始源端口和重新映射的源端口（可能相同，见上文）。如果您想支持 FTP，那么您还必须嗅探 FTP TCP 控制连接的内容并重写其中包含的 IP 地址（这意味着您将需要跟踪更多的状态，因为您有时可能需要扩大一个 TCP 段，意味着您需要开始重新映射序列号）。您还应该与每个跟踪的连接关联一个超时，以便在端点消失而没有正确关闭连接的情况下摆脱它。

对于 UDP，这意味着查看本地和远程端口号的组合，并为您看到的每个唯一组合（地址和端口的 4 元组）创建状态。因为 UDP 是无连接的，所以您必须根据超时使此状态信息过期。此超时将比您用于 TCP 的超时短得多（大约几分钟而不是几小时），以防止您的状态表变得太大。

对于 ICMP 回显请求，您应该以类似于 UDP 的方式进行处理，其中 icmp_id 扮演端口号的角色。

对于其他类型的 ICMP，如目标不可达，您必须检查 ICMP 数据包以查看它是否是您正在跟踪的 TCP 或 UDP 连接的一部分，并尝试将其转换回原始源。

为了防止路由循环，您还应该在转发已转换的数据包时减少 IP TTL。

我可能忘记了一些更重要的部分。简而言之，实现 NAT 很像为路由器实现 IP 堆栈！这就是为什么 NAT 是虚拟的，总是固定在内核中的 IP 堆栈上，而不是在用户空间中实现。

### 发送和接收数据包

所以我理解的架构是这样的：

1.  客户端发起一个进入 TUNTAP 接口的数据包
2.  您的软件获取此数据包，将其封装在 Websocket 消息中，然后发送出去
3.  你的 Twisted 服务器得到它并发挥它的魔力
4.  翻译后的数据包通过原始套接字从服务器发出

返回路径：

1.  回复以某种方式返回到您的服务器（可能是[libpcap](http://www.tcpdump.org/pcap3_man.html)）
2.  您的代码具有相反的魔力
3.  您的服务器通过 Websocket 将结果传输回客户端
4.  客户端通过 TUNTAP 接口看到返回的结果。

我认为处理前向路径最后一步和返回路径第一步的最简单方法是第二个 TUNTAP 设备：`tun`服务器上的一个接口。

# python - 如何从字符串中去除尾随数字

> ID：13215104
> 
> 赞同：2
> 
> 时间：2012-11-04T01:04:32.743
> 
> 标签：python

我有一个变量文本，其值如下所示，我需要尾随数字条，是否有 python 内置函数可以做到这一点..如果没有，请建议如何在 python 中完成

例如`-text=A8980BQDFZDD1701209.3`=>`-A8980BQDFZDD`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-12-24T09:44:06.240

为了完整起见，python3 中的这种语法怎么样？

```
from string import digits

print('123abc382'.rstrip(digits)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T02:57:33.653

```
In [36]: myStr = '-text=A8980BQDFZDD1701209.3'

In [37]: print '-'+myStr.rpartition('=')[-1].rstrip('1234567890.')
-A8980BQDFZDD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:06:46.767

```
print '123abc382'.rstrip('1234567890') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T01:10:21.303

```
print 'text=A8980BQDFZDD1701209.3'.rstrip('1234567890.')[5:] 
```

会做所有需要的。然而，最后的切片有点像黑客。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T02:01:11.923

第一步是了解字符串正在编码哪些信息，以及在阅读时如何对其进行解码。这会告诉您数据中的模式是什么，这些模式将决定您将如何操作字符串以在 Python 中提取信息。

如果您只需要丢失最后几个数字，那么您可以`rstrip`很容易地丢失它们。这是假设您想将“-text =”更改为“-”，正如您在问题中暗示的那样：

```
input = '-text=A8980BQDFZDD1701209.3'
text = input.split('=')[1]
output =  '-' + text.rstrip('1234567890.') 
```

这是一种有潜在风险的方法，因为它还假设数字后缀中*永远不会*包含任何字母字符，并且您要保留的一半*永远不会*以您传递给的字符结尾`rstrip`。如果您的数据并非总是如此，则此解决方案会给您带来不好的结果，您需要找到更准确的模式。

例如，如果 'keep' 部分的长度*始终*为12 个字符，您可能希望通过将示例的第 3 行替换为以下内容来获取字符串切片：

```
output = '-' + text[:12] 
```

但最终，这取决于这些字符串是什么，以及首先定义不同部分如何形成的规则。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-04T01:06:48.743

您可以使用`rstrip`. 检查python文档。

# android - Android 4.1 RelativeLayout 和底部定位广告（多媒体）

> ID：13215106
> 
> 赞同：1
> 
> 时间：2012-11-04T01:04:41.213
> 
> 标签：android, xamarin.android

我在将 Millenial Media(http://mmedia.com/) 广告定位在屏幕底部时遇到问题。有时它会起作用，但有时广告会无缘无故地跳到屏幕中央。其他时候，广告只是从那个位置开始。有时广告只是在中间位置和底部位置之间快速跳跃。

我尝试了许多相对位置、选项和配置，但没有任何东西可以正常工作。

该广告具有 AlignParentBottom 属性，我不确定这是否只是 MMedia sdk 或其他问题的问题。

这仅在最新版本的 SDK 中开始发生。有没有人使用 MMedia 并且可以对将广告定位到屏幕底部有所了解？

我使用带有 Android 4.1 的 Google Nexus。

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <GameView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
    <com.millennialmedia.android.MMAdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:34:16.503

我对第 3 方组件的行为也“非常有趣”。我已经解决了将他嵌入到一个容器中（我记得是 LinearLayout），所以我的建议是添加`com.millennialmedia.android.MMAdView`到 a `LinearLayout`和添加到`RelativeLayout`. 我无法解释为什么对我有用，也无法解释为什么没有我想要的包装器就不能工作，但这就是解决方案。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:41:00.477

看起来这是他们系统的问题。得到了这个回复：

> 感谢您联系千禧媒体！这是一个非常烦人的已知问题，似乎只发生在运行最新版本 Android 的某些高分辨率设备上。更具体地说，Android 操作系统更改了其 WebView 对象的一些机制，最终导致我们基于 HTML 的广告不正确地呈现。这是目前的优先事项之一。如果有似乎重复出现的特定广告素材，我们可以屏蔽与这些广告相关的广告系列。
> 
> 我无法为您提供修复的确切日期，但它正在引发一系列活动，所以我希望在本周末之前，我们所有的 HTML 模板都会更新。谢谢你的耐心。

# php - facebook php 登录 CSRF

> ID：13215107
> 
> 赞同：0
> 
> 时间：2012-11-04T01:04:46.230
> 
> 标签：php, facebook, csrf

我正在尝试使用 php 构建一个 facebook 用户登录。我能够获取用户信息，但每次登录都会`CSRF state token does not match one provided.`在登录成功后在我的服务器上创建一个错误日志。

我在谷歌周围找到了很多创建 facebook 登录的教程。我还为同一问题找到了其他一些帖子。他们似乎不止一次地指责调用 getLoginUrl() ，而我没有这样做。而且由于我使用的是 sdk 附带的示例，我很困惑为什么它是开箱即用的。

```
<?php
    require 'facebook.php';

    $facebook = new Facebook(array(
        'appId'  => 'APP_ID',
        'secret' => 'APP_SECRET',
    ));

    $user = $facebook->getUser();

    if ($user) {
        try {
            $user_profile = $facebook->api('/me');

            $logoutUrl = $facebook->getLogoutUrl();
            echo "<a href=" . $logoutUrl . ">Logout</a><br><br>";
            print_r($user_profile);

        }
        catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }
    else {
        $loginUrl = $facebook->getLoginUrl();
        echo "<a href=" . $loginUrl . ">Login</a>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T15:30:42.917

Facebook SDK 代码在同一处理程序中检查两次令牌时存在错误。

我编辑了这样的getCode函数`facebook.php`：

```
protected function getCode() {
    if (!isset($_REQUEST['code']) || !isset($_REQUEST['state']) || $this->state === null) {
      return false;
    }
    if ($this->state === $_REQUEST['state']) {
        // CSRF state has done its job, so clear it
        $this->state = null;
        $this->clearPersistentData('state');
        return $_REQUEST['code'];
    }
    self::errorLog('CSRF state token does not match one provided.');

    return false;
} 
```

更清楚，如果调用两次，则不会声明无效令牌。

需要明确的是，如果例如：

`$facebook->getUser();`然后在同一个处理程序中，`$facebook->getLogoutUrl()`然后`getCode()`调用两次，从而导致错误消息无效

# php - PHP 和 JavaScript - “注销”代码在 Chrome 中有效，但在 Firefox 中无效

> ID：13215110
> 
> 赞同：0
> 
> 时间：2012-11-04T01:05:13.467
> 
> 标签：php, javascript, forms, firefox

我有一个在使用 chrome 时可以正常工作的注销功能。但是对于 Firefox，它不会。从我在 Firefox 中可以看出，这`foo.setAttribute( "action", "../index.php" );`并没有像在 Chrome 中那样正确发生。这让我大吃一惊，因为我无法在 Firebug 中真正调试这部分。

```
<?php
require_once('/lock_down/php/db_login.php');
require_once('/lock_down/php/authenticate.php');

if (isset($_POST['action'])) {
    $action = $_POST['action'];
} else {
    $action = 'first_time';
}

switch($action) {
case 'first_time':
    include('/lock_down/login.html');
    break;
case 'login' :
    $username = $_POST['uname'];
    $password = $_POST['pword'];
    if (http_login($username, $password)) {
        include('/lock_down/file_server.html');
    } else { 
        include('/lock_down/login.html');
    }
    break;

case 'logoff' :
    $_POST = array();
    echo "logged off";
    include('/lock_down/login.html');
    break;

default: 
//  include('/lock_down/php/login.php');
    break;

}

?> 
```

JavaScript 注销例程的摘录来自`file_server.html`：

```
 case "logoutButton":
        var form = document.createElement("form");
        var foo = document.createElement("input");
        foo.setAttribute( "method", "post");
        foo.setAttribute( "type", "hidden");
        foo.setAttribute( "action", "../index.php" );
        foo.setAttribute( "name", "action");
        foo.setAttribute( "value", "logoff");
        form.appendChild(foo);
        form.submit();
        break; 
```

同样，所有这些都适用于 chrome。但在 Firefox 中，它不会注销和加载`../index.php`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:11:35.827

您正在设置表单`method`和`action`输入元素，而不是表单元素

```
foo.setAttribute( "method", "post"); 
```

应该

```
form.setAttribute( "method", "post"); 
```

编辑：不确定一个不在 DOM 中的表单是否会在所有浏览器中提交，可能还需要附加它。您可以在成功回调中使用重定向发出 ajax 请求，而不是创建表单

# python - 计算图像（dpx）文件中的字节数组偏移量

> ID：13215111
> 
> 赞同：0
> 
> 时间：2012-11-04T01:05:23.913
> 
> 标签：python, image, file, header, bytearray

我一直在不时地读取二进制数据。但是我从来没有真正让系统了解如何在使用字节数组时推断偏移量。

在这种情况下，我正在处理 dpx 文件并尝试更改位于方向标头中的纵横比。相关文件信息在这里找到：[http ://www.fileformat.info/format/dpx/egff.htm](http://www.fileformat.info/format/dpx/egff.htm)

我知道 Scott Griffiths 在这个主题上有一篇很棒的文章。[解码图像文件以提取图像标题信息并修改它（使用python）](https://stackoverflow.com/questions/5249748/decode-image-file-to-extract-image-header-information-and-modify-it-with-python) 但是我从来没有真正理解到将这些知识转换为修改 GENERICFILEHEADER 以外的其他标题下的东西

那么如何改变纵横比。任何有关此事的帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:22:13.423

有一个非常好的文档，名为“用于数字运动图片交换的文件格式”，我认为它可能会对您有所帮助。我不确定官方版本在哪里，但[这里](http://www.simplesystems.org/users/bfriesen/dpx/S268M_Revised.pdf)有一个版本。

无论如何，这是一个可用于更改像素纵横比的代码片段：

```
import struct

fp = open('file.dpx', 'r+b')
fp.seek(1628) #Set the offset to the pixel aspect ratio field

#Prints out the current pixel aspect ratio. 
#Assumes big-endian -- Check the magic number for your use case
print struct.unpack_from('>I', fp.read(4))[0] #horizontal pixel aspect ratio
print struct.unpack_from('>I', fp.read(4))[0] #vertical pixel aspect ratio

#Change the aspect ratios to new values.  Again assumes big-endian
fp.seek(1628) #Return to the proper offset for aspect ratio
new_horizontal = struct.pack('>I', 4L) 
new_vertical = struct.pack('>I', 3L) 
fp.write(new_horizontal) #set the new horizontal pixel aspect ratio to 4
fp.write(new_vertical) #set the new vertical aspect ratio to 3
fp.close() 
```

此代码假定您尚未阅读文件头和图像头。File Header 为 768 字节，Image Header 为 640 字节。然后在AspectRatio之前的Orientation Header中有几个字段：XOffset、YOffset、XCenter、YCenter、XOriginalSize、YOriginalSize、FileName、TimeDate、InputName、InputSN和Border。这些字段的字节长度分别为 4、4、4、4、4、4、100、24、32、32 和 8；总共 220。AspectRatio 的偏移量是这些字段的总和：768+640+220=1628。

这是找出正确偏移量的困难方法。如果您只查看上面列出的 .pdf，会容易得多。它列出了表中的所有字段偏移量：p

# database - 我应该何时使用 Memcached 与向数据库添加列？

> ID：13215113
> 
> 赞同：0
> 
> 时间：2012-11-04T01:05:36.843
> 
> 标签：database, caching, database-design, memcached, relational-database

我想跟踪我的应用程序的每个用户访问某个页面的最后日期。一种方法是在我的数据库中的用户表中添加一列，并在每次用户访问页面时更新它。另一种方法是为每个用户将这些数据存储在 Memcached 中。

我意识到我更喜欢 Memcached 解决方案，但出于*似乎*不合理的原因：

*   users 表已经有很多列，我不想不必要地添加。
*   使用 Memcached 比通过创建迁移等向数据库添加表更容易。

那么*这里*的合适选择是什么？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:46:55.290

Memcached 可用于存储具有有限生命周期的任意数据，但不应用作数据库替换。

适当的选择是为这个特定的业务逻辑创建一个隔离的数据库表。由于此功能将引入许多写入，因此重要的是不要锁定任何其他可能具有其他核心功能的表（例如您的用户表）。自然，该功能将影响数据库 I/O；其中，Memcached 非常适合存储要由批处理处理的数据队列。

**Memcached 队列的非常基本的轮廓**

遵循[Memcached 的协议](https://github.com/memcached/memcached/blob/master/doc/protocol.txt#L56)，您的应用程序可以轻松维护受影响用户的队列列表，并设置/替换与特定用户相关的元数据。

```
/* Application handling Memcached Queue */

[ User is in Queue ? ]________ no 
 |                             |
 | yes                        [ Append user to queue list ]
 |                             |
[ Replace user data ]         [ Set user date ] 
```

每天或每小时的进程应该能够消化队列列表，并将用户的元数据写入数据库。

# mysql - 如何使用从 case 语句派生的列更新视图？

> ID：13215119
> 
> 赞同：1
> 
> 时间：2012-11-04T01:06:23.397
> 
> 标签：mysql, sql, oracle, updatable-views

我使用它创建了一个视图（忽略了其他列）：

```
create view view_table (is_root) as select
  case when C1 = 'Yes' then 1
       when C1 = 'No' then 0
       else 0
  end as is_root
  from remote_db_table 
```

但是当我尝试使用以下方法更新视图时：

```
update view_table set is_root=1 
```

这没用。有什么办法吗？视图在 Oracle 中，但远程表在 mySQL 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T15:37:59.803

您可以在 Oracle 中通过在视图上构建[一个 INSTEAD OF 触发器来执行此操作。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#sthref783)

```
create or replace trigger vt_instead
    instead of update on view_table
begin
    if :new.is_root != :old.is_root
    then
        update remote_db_table
        set C1 = case when :new.is_root = 1 then 'Yes'
                      else 'No' end
        where id = :new.id;
    end if;
end;
/ 
```

这将允许您针对将传播更改到底层视图的视图发出更新：

```
update view_table
set is_root = 0
where id = 23
/ 
```

我没有针对 MySQL 数据库上的远程表进行测试（手头没有这样的设置），但是如果您可以在 SQL*Plus 中远程更新表，那么触发器也应该可以工作。

* * *

> “我想更新所有 40 列，但只有一列不能像上面那样更新”

恐怕您还没有完全清楚自己，但我认为您要问的是如何处理不需要翻译的列。

INSTEAD OF 触发器触发而不是触发 DML 语句（线索在名称中）。这意味着您需要处理要通过视图更新的*所有列。*在您的场景中，这将是所有四十列。修改后的触发代码可能如下所示：

```
create or replace trigger vt_instead
    instead of update on view_table
begin
    update remote_db_table
    set C1 = case when :new.is_root = 1 then 'Yes'
                  else 'No' end
        , C2 = :new.col2
        , C3 = :new.col3
        , C4 = :new.col4
        ....
        , C40 = :new.col40
    where id = :new.id;
end;
/ 
```

任何未包含在表更新语句中的列都无法通过视图进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:03:59.687

我相信你正在尝试的事情是不可能的。虽然 MySQL 确实允许对视图执行更新语句，但 is_root 是派生列，因此更新它没有意义（因为没有返回表的路径。

# python - 如何让 Python、QT 和 Webkit 在无头服务器上工作？

> ID：13215120
> 
> 赞同：10
> 
> 时间：2012-11-04T01:06:39.900
> 
> 标签：python, qt, webkit, headless, headless-browser

我有 Debian Linux 服务器，可用于各种用途。我希望它能够完成一些我需要定期完成的网络抓取工作。

此代码可在[此处找到](http://bit.ly/QeqvzX)。

```
import sys  
from PyQt4.QtGui import *  
from PyQt4.QtCore import *  
from PyQt4.QtWebKit import *  

class Render(QWebPage):  
  def __init__(self, url):  
    self.app = QApplication(sys.argv, False)  # Line updated based on mata's answer
    QWebPage.__init__(self)  
    self.loadFinished.connect(self._loadFinished)  
    self.mainFrame().load(QUrl(url))  
    self.app.exec_()  

  def _loadFinished(self, result):  
    self.frame = self.mainFrame()  
    self.app.quit() 
```

对它的简单测试如下所示：

```
url = 'http://example.com'
print Render(url).frame.toHtml() 
```

在调用构造函数时，它会因这条消息而死（它被打印到标准输出，而不是未捕获的异常）。

```
: cannot connect to X server 
```

如何在无头服务器上使用 Python (2.7)、QT4 和 Webkit？不需要显示任何内容，因此我可以调整任何设置或任何需要调整的内容。

我已经研究过替代方案，但这是最适合我和我的项目的。如果我必须安装 X 服务器，我怎样才能以最小的开销做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-04T01:23:31.747

的构造函数之一`QApplication`采用布尔参数[`GUIenabled`](http://pyqt.sourceforge.net/Docs/PyQt4/qapplication.html#QApplication-2)。
如果你使用它，你可以在没有 X 服务器的情况下实例化 QAppliaction，但你不能创建 QWidgets。

所以在这种情况下，唯一的选择是使用像[Xvfb](http://www.xfree86.org/4.0.1/Xvfb.1.html)这样的虚拟 X 服务器来呈现 GUI。

可以使用这些命令安装和运行 Xvfb（假设您已安装 apt-get）。原始问题中的代码位于名为`render.py`.

```
sudo apt-get install xvfb
xvfb-run python render.py 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-12T06:05:52.540

如果 PyQt5 是一个选项，Qt 5 有“最小”平台插件。

要使用它，请将传递给 QApplication 的 argv 修改为 include `['-platform', 'minimal']`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-01T00:37:00.603

在 gitlab CI/CD 上。添加`['-platform', 'minimal']`和使用 xvfb 对我不起作用。相反，我使用`QT_QPA_PLATFORM: "offscreen"`变量。

见[https://stackoverflow.com/a/55442821/6000005](https://stackoverflow.com/a/55442821/6000005)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T01:45:30.757

如果您要做的只是获取网页，则可以使用

```
import urllib
urllib.urlopen('http://example.com').read() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-20T23:35:35.500

[phantomjs](http://phantomjs.org/)是一个基于 webkit 的解决方案。也无头运行。试试看。

如果您热衷于自己使用 webkit，您也可以尝试 qt 的 pyslide 版本。

# function - 比较haskell中的函数和参数

> ID：13215127
> 
> 赞同：5
> 
> 时间：2012-11-04T01:07:49.310
> 
> 标签：function, haskell, compare

> **可能重复：**
> [比较 Haskell 中的函数](https://stackoverflow.com/questions/4328620/comparing-functions-in-haskell)

我正在学习haskell，想知道这样的事情可能吗？我只想比较参数'function'是否等于函数a或b之一。这个怎么做？

示例代码：

```
a,b :: Integer -> Integer
a x = x+1
b x = x-1

c function parameter = if function == a 
           then ... parameter -- Do a related stuff
           else ... parameter -- Do b related stuff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:24:22.183

我知道在哪里可以比较两个函数是否相等的唯一情况是它们的域是否具有有限数量的值。例如，如果您有两个类型的函数：

```
f, g :: Bool -> A 
```

如果它们对所有输入都相等，则它们是相等的：

```
f == g = (f False == g False) && (f True == g True) 
```

但是，对于 的情况`Int`，在每个可能的值上比较它们`Int`是不切实际且低效的。因为s 是无界的`Integer`，所以无法做到。`Integer`

正如@Miguel 在他的评论中正确指出的那样，通常无法比较具有非有限域的函数是否相等。

# android - Windows 上的跨平台开发（iOS/Android/Blackberry）

> ID：13215128
> 
> 赞同：2
> 
> 时间：2012-11-04T01:08:08.480
> 
> 标签：android, iphone, ios, cross-platform, native-code

我知道这个话题在这里已经被覆盖到死了，我在发布这个之前做了搜索，没有一个答案直接涵盖这个。

我找到了多种创建跨平台应用程序的解决方案；有 HTML5 + CSS + JS 方法，使用 Adob​​e Air，或者只是用本机代码设计。

我的问题围绕着我迄今为止为 iOS 阅读的内容。对于 iOS，我迄今为止发现的几乎所有内容，无论是使用 RhoStudio 还是 Appcelerator Titanium，似乎都要求我首先拥有一台装有 OSX 的 Mac 才能获得 SDK——在 Windows 上运行的唯一工作是 Mac辅助 HDD 或虚拟化环境上的 OSX - 这违反了 TOS。

我还读到本机代码仍将比其他方法更快/更有效地执行。

这让我想到了几个问题：1) 是否有任何我尚未查找的能够通过多个平台设计应用程序但严格在 Windows 中开发的东西？还是它们都需要以某种方式、形状或形式使用 Mac OSX 完成？

2) HTML5/CSS/JS 是否值得研究，或者性能不值得？我记得读过Facebook的应用程序最初是用这种方法设计的，这就是性能不好的原因，但我不知道是否还有其他因素。

3) 我发现了一个叫做 Codename One 的东西，到目前为止，这似乎是最有希望用 Java 完成的交叉兼容开发，但它真的有用吗？或者我最终会遇到与需要 Mac 相同的问题吗？

4）最后：硬着头皮买一台装有 OSX 的 Mac，学习 Objective-C，通过 Native 代码开发，然后移植到 Android/Blackberry 会更好吗？

我知道其中一些问题之前已经讨论过，但并非所有问题都是最新的——而且我知道从那时起已经发布了新的跨平台开发人员。我要寻找的主要问题是涉及 iOS 的交叉开发的整体最佳解决方案是什么，因为大多数 Mac 解决方法似乎都使 TOS 无效。

我将不胜感激并欢迎任何可用信息 - Bitwize

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:09:16.247

这实际上取决于您要开发什么以及要为谁开发。如果您想要高品质、尖端技术，购买 Mac 并进行 iOS 原生开发。您可能希望使用 HTML5 支持其他环境。

是的，HTML5 对性能和可用性有影响，但它可能会为您的受众和预算所接受。

我写了一本关于这个可用的电子书，甚至适用于 Windows 机器的人:) [http://digital-possibilities.com/mobile-development-frameworks-overview/](http://digital-possibilities.com/mobile-development-frameworks-overview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:52:21.940

Codename One 有一个在云上托管 Mac 的构建服务器，您只能在 Windows 上开发您的应用程序。

# php - 将 Azure Microsoft Translator API 与 PHP 和 cURL 一起使用

> ID：13215130
> 
> 赞同：3
> 
> 时间：2012-11-04T01:08:13.753
> 
> 标签：php, windows, api, curl, azure

我正在尝试查找有关如何使新的 Azure 翻译 API 与 PHP 和 Curl 一起使用的简单教程。

有没有人有可以调用来执行字符串翻译的简单函数的示例代码？

我已经创建了我的用户帐户并注册了一个应用程序。

我正在处理这些示例，但我无法弄清楚如何将它们用作简单的 PHP 函数。

[http://wangpidong.blogspot.ca/2012/04/how-to-use-new-bing-translator-api-with.html](http://wangpidong.blogspot.ca/2012/04/how-to-use-new-bing-translator-api-with.html)

[新的 Bing API PHP 示例不起作用](https://stackoverflow.com/questions/11451178/new-bing-api-php-example-doesnt-work)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-10T20:40:36.607

我知道这个问题已经存在几个月了，但是因为我今天正在处理这个问题，所以我想我会分享我的工作代码。下面是一个简单示例，说明如何使用您的主帐户密钥和基本身份验证在 Microsoft Translator V2 API 中使用 Translate 方法。[您可以在此处](https://datamarket.azure.com/account)获取您的主帐户密钥。

```
// Prepare variables
$text = urlencode('Hello world.');
$from = 'en';
$to = 'es';

// Prepare cURL command
$key = 'YOUR_PRIMARY_ACCOUNT_KEY';
$ch = curl_init('https://api.datamarket.azure.com/Bing/MicrosoftTranslator/v1/Translate?Text=%27'.$text.'%27&From=%27'.$from.'%27&To=%27'.$to.'%27');
curl_setopt($ch, CURLOPT_USERPWD, $key.':'.$key);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// Parse the XML response
$result = curl_exec($ch);
$result = explode('<d:Text m:type="Edm.String">', $result);
$result = explode('</d:Text>', $result[1]);
$result = $result[0];

echo $result; 
```

这应该返回：

```
Hola mundo. 
```

有关`GET`参数的详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/ff512421.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-05T19:42:20.007

Microsoft DataMarket Translator API 将于 2017 年 3 月 31 日停止工作： [https ://datamarket.azure.com/dataset/bing/microsofttranslator](https://datamarket.azure.com/dataset/bing/microsofttranslator)

所以我制作了一个新的示例 PHP/cURL 代码，它将在未来工作：

```
<?php // 4.01.17 AZURE Text Translation API 2017 - PHP Code Example - Cognitive Services with CURL http://www.aw6.de/azure/
// Get your key from: http://docs.microsofttranslator.com/text-translate.html
// Put your parameters here:
$azure_key = "KEY_1";  // !!! TODO: secret key here !!!
$fromLanguage = "en";  // Translator Language Codes: https://msdn.microsoft.com/de-de/library/hh456380.aspx
$toLanguage = "de";
$inputStr = "AZURE - The official documentation and examples for PHP are useless.";
// and leave the rest of the code as it is ;-)
// Get the AZURE token
function getToken($azure_key)
{
    $url = 'https://api.cognitive.microsoft.com/sts/v1.0/issueToken';
    $ch = curl_init();
    $data_string = json_encode('{body}');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
            'Content-Type: application/json',
            'Content-Length: ' . strlen($data_string),
            'Ocp-Apim-Subscription-Key: ' . $azure_key
        )
    );
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $strResponse = curl_exec($ch);
    curl_close($ch);
    return $strResponse;
}
// Request the translation
function curlRequest($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, "Content-Type: text/xml");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, False);
    $curlResponse = curl_exec($ch);
    curl_close($ch);
    return $curlResponse;
}
// Get the translation
$accessToken = getToken($azure_key);
$params = "text=" . urlencode($inputStr) . "&to=" . $toLanguage . "&from=" . $fromLanguage . "&appId=Bearer+" . $accessToken;
$translateUrl = "http://api.microsofttranslator.com/v2/Http.svc/Translate?$params";
$curlResponse = curlRequest($translateUrl);
$translatedStr = simplexml_load_string($curlResponse);
// Display the translated text on the web page:
echo "<p>From " . $fromLanguage . ": " . $inputStr . "<br>";
echo "To " . $toLanguage . ": " . $translatedStr . "<br>";
echo date(r) . "<p>";
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-31T04:46:55.327

版本 3 已发布，支持版本 2 直到 2019 年 4 月 30 日。

> 随着第 3 版的全面发布，现有的第 2 版将于 5 月 1 日起弃用。V2 将一直支持到[2019](https://blogs.msdn.microsoft.com/translation/2018/05/07/translatorv3/)年 4 月 30 日。

因此，api v3 的示例 PHP/cURL 代码

```
<?php

$key =  "KEY_1";  //  secret key here !!!
$host = "https://api.cognitive.microsofttranslator.com";
$path = "/translate?api-version=3.0";

$params = "&to=en&from=ar";

$text = "Hello, world!";

$requestBody = array (
    array (
        'Text' => $text,
    ),
);
$content = json_encode($requestBody);

if (!function_exists('com_create_guid')) {
  function com_create_guid() {
    return sprintf( '%04x%04x-%04x-%04x-%04x-%04x%04x%04x',
        mt_rand( 0, 0xffff ), mt_rand( 0, 0xffff ),
        mt_rand( 0, 0xffff ),
        mt_rand( 0, 0x0fff ) | 0x4000,
        mt_rand( 0, 0x3fff ) | 0x8000,
        mt_rand( 0, 0xffff ), mt_rand( 0, 0xffff ), mt_rand( 0, 0xffff )
    );
  }
}

$curl_headers = array(
    'Content-type: application/json',
    'Content-length: '. strlen($content) ,
    'Ocp-Apim-Subscription-Key: '. $key ,
    'X-ClientTraceId: '. com_create_guid() 
);
$url = $host . $path . $params;
$ch = curl_init();
$curl_content = array('content',$content);
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $curl_headers);

curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
// Receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close ($ch);

// Note: We convert result, which is JSON, to and from an object so we can pretty-print it.
// We want to avoid escaping any Unicode characters that result contains. See:
// http://php.net/manual/en/function.json-encode.php

$json = json_encode(json_decode($result), JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT);
echo $json; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-21T00:26:48.503

新 Azure 翻译 API 的官方代码在这里：[https ://github.com/MicrosoftTranslator/HTTP-Code-Samples/blob/master/PHP/PHPAzureToken.php](https://github.com/MicrosoftTranslator/HTTP-Code-Samples/blob/master/PHP/PHPAzureToken.php)

但是代码包含`$authHeader`从@Andreas 发布的代码中删除的无用的额外参数。

似乎在新的 Azure API 中只修改了访问令牌方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-29T10:55:05.087

对于当前版本，您需要定义资源位置。

您可以通过在 Azure 门户中检查“密钥和终结点”中的位置来执行此操作。

你可以通过简单地在上面的代码中添加两行来添加它，给你这样的东西。

```
$key =  "YOUR_API_KEY";  //  secret key here
$location = "YOUR_LOCATION"; // service location here 

$host = "https://api.cognitive.microsofttranslator.com";
$path = "/translate?api-version=3.0";

$params = "&to=en";
$requestBody = array(
    array(
        'text' => 'Mañanas',
    ),
);
$content = json_encode($requestBody);
if (!function_exists('com_create_guid')) {
    function com_create_guid()
    {
        return sprintf(
            '%04x%04x-%04x-%04x-%04x-%04x%04x%04x',
            mt_rand(0, 0xffff),
            mt_rand(0, 0xffff),
            mt_rand(0, 0xffff),
            mt_rand(0, 0x0fff) | 0x4000,
            mt_rand(0, 0x3fff) | 0x8000,
            mt_rand(0, 0xffff),
            mt_rand(0, 0xffff),
            mt_rand(0, 0xffff)
        );
    }
}
$curl_headers = array(

    'Ocp-Apim-Subscription-Key: ' . $key, // API KEY
    'Ocp-Apim-Subscription-Region: '. $location, // LOCATION 

    'Content-type: application/json',
    'Content-length: ' . strlen($content),
    'X-ClientTraceId: ' . com_create_guid()
);
$url = $host . $path . $params;
$ch = curl_init();
$curl_content = array('content', $content);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $curl_headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch);

$json = json_encode(json_decode($result), JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT);
echo $json; 
```

在此示例中，我没有定义“From”参数，因为我的应用程序不需要它。

# php - 帮助在 PHP 中的函数中查找未实例化的变量？

> ID：13215132
> 
> 赞同：0
> 
> 时间：2012-11-04T01:08:17.670
> 
> 标签：php, refactoring

我正在重构一些单体代码，将其分解为功能。由于变量始终在程序部分的范围内，我经常发现一个我忽略和忽略的变量传递给我已将其代码迁移到的函数。有什么可以帮助我在函数中找到未实例化的变量吗？也许是 IDE 中的一个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:34:58.967

eclipse/PDT 中的 php 代码验证器在这方面做得很好。它将突出显示有错误的行；将鼠标悬停在错误标记上会弹出它认为有错误的原因。

# c - 无法找到“取消引用指向不完整类型的指针”错误的来源

> ID：13215133
> 
> 赞同：3
> 
> 时间：2012-11-04T01:08:24.690
> 
> 标签：c, pointers, gcc, compiler-errors, dereference

作为我为大学课程做的作业的一部分，我需要用 C（不是 C++）编写一个 CPU 调度模拟器。我在使用 GCC 编译时遇到了一个问题，它给了我几个关于“取消引用指向不完整类型的指针”的错误。所有错误都是相同代码的结果，这让我认为该代码存在问题。

违规代码是：

```
//Push a record of this state change to the back of the simulation's history list
listPushBack(sim->history, (void*)newRecord(p->pid, sim->currentTime, wait, ready)); 
```

这与跟踪模拟历史以供以后分析有关。记录定义为：

```
//History.h

typedef struct record* Record;

//History.c

typedef struct record recordType;

struct record{
    long time;
    int pid;
    State oldState;
    State newState;
};

Record newRecord(int pid, long time, ProcessState oldState, ProcessState newState){
    Record r = (Record)malloc(sizeof(recordType));
    if(r == NULL){
        fprintf(stderr, "History.c:newRecord:Failed to allocate memory for new Record\n");
        //This is serious, abort execution
        exit(-1)
    }
    r->time = time;
    r->pid = pid;
    r->oldState = oldState;
    r->newState = newState;
    return r;
} 
```

其中 ProcessState 定义为：

```
//Process.h

typedef enum process_state ProcessState;

enum process_state{
    arrive = 0,
    ready = 1,
    run = 2,
    wait = 3,
    done = 4
}; 
```

我玩了一下，遇到了同样的错误：

```
Process p = (Process)listGetAt(sim->waitingQueue, i);
ProcessState old = p->state;
listPushBack(sim->history, (void*)newRecord(p->pid, sim->currentTime, old, p->state)); 
```

谢天谢地，这不会再过一周了，所以我有时间玩，但我希望有人能在我浪费太多时间搞砸事情之前指出正确的方向。

编辑：按出现在评论中的顺序回答问题，

```
//DoubleLinkList.c

bool listPushBack(DoubleList l, void* data){
    return listInsert(l, data, -1);
}
bool listInsert(DoubleList l, void* data, int pos){
    int index = pos;
    //If value is negative, convert to a index relative to the end of the list
    if(index < 0){
        index = listSize(l) + index + 1;
    }
    //Check index bounds
    if(index > listSize(l) || index < 0){
        fprintf(stderr, "DoubleLinkList.c:listInsert:Insert index %i out of bounds\n", pos);
        //This is not serious enough to warrent an abort
        return false;
    }
    //Data is null
    if(data == NULL){
        fprintf(stderr, "DoubleLinkList.c:listInsert:Data value for doubly linked list node cannot be NULL\n");
        //This is not serious enough to warrent an abort
        return false;
    }
    Node insertNode = newNode(data);
    //Case: End of list
    if(index == listSize(l)){
        l->tail->next = insertNode;
        insertNode->prev = l->tail;
        l->tail = insertNode;
        l->size++;
        return true;
    }
    //Case: Start of list
    else if(index == 0){
        l->head->prev = insertNode;
        insertNode->next = l->head;
        l->head = insertNode;
        l->size++;
        return true;
    }
    //Case: Middle of list
    Node node = l->head;
    //Scan through list to reach index pos
    int i;
    for(i = 0; i < index; i++){
        if(node == NULL){
            fprintf(stderr, "DoubleLinkList.c:listGetPosition:NULL encoutered unexpectedly while traversing doubly linked list at index %i\n", i);
            //This is a serious problem, abort execution
            exit(-1);
        }
        node = node->next;
    }
    //Insert before Node at index pos
    insertNode->next = node;
    insertNode->prev = node->prev;
    node->prev->next = insertNode;
    node->prev = insertNode;
    l->size++;
    return true;
} 
```

是的，过程是：

```
typedef process_Struct* Process 
```

模拟声明：

```
//Simulation.c
struct simulation{
    SimType type;
    long currentTime;
    unsigned int totalProcesses;
    DoubleList arriveQueue;
    DoubleList readyQueue;
    DoubleList waitingQueue;
    DoubleList doneQueue;
    Process running;
    DoubleList history;
}; 
```

引发问题的方法是 runSimulation(Simulation sim) 其中：

```
typedef simulation* Simulation; 
```

runSimulation 在 Simulation.c 中声明

确切的错误消息是：source/Simulation.c:154:50: error: dereference pointer to incomplete type 这就是为什么这很烦人，它没有提供更多信息，即使使用 -verbose, -g,和其他一些调试标志。

我意识到我不应该输入 typdef 指针，但是，愚蠢的是，教授把它作为作业的要求。引用：“如果可能，请使用 typedef 定义指向结构的指针。这样 TA 可以更轻松地阅读您的模拟代码。” 我对此感到非常恼火，因为这是一个糟糕的主意，助教应该能够阅读代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:41:59.977

您的评论表明您`struct record`在*history.c*源文件中进行定义。如果您`struct record`在任何其他源文件中使用 a ，那么您应该在*history.h*中定义它，否则当您尝试`struct record`在另一个文件中使用指向时，您将得到这个确切的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T01:14:42.207

当您只前向声明某些内容然后去使用它时，您通常会看到此错误。IE 如果你有：

```
 // foo.h
 struct Process; 

 // foo.c
 #include "foo.h"
 Process* foo;
 std::cout << foo->i 
```

您会收到关于取消引用不完整类型的指针的错误。当您在此行取消引用 p/sim 时，可能会发生这种情况：

```
 listPushBack(sim->history, (void*)newRecord(p->pid, sim->currentTime, old, p->state)); 
```

解决方案是确保您已经`#include`完整定义了`Process`，即在上面的代码中的某处添加一个**#include "Process.h" 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T01:13:10.800

您遇到的问题是未定义任何类型的 sim 指针。它已声明（这是您可以声明指向它的指针的方式），但未定义。换句话说，你可能做过类似的事情：

```
struct Simulation;

void myFunc() {
    struct Simulation* sim;
    sim->history;
} 
```

在`sim->history`您的 listPushBack 调用中完成的 sim 历史成员的取消引用在哪里。

# linux - 如何使所有传出的RST下降

> ID：13215135
> 
> 赞同：5
> 
> 时间：2012-11-04T01:08:43.877
> 
> 标签：linux, networking, tcp, linux-kernel, iptables

我正在尝试删除所有端口上的所有传出 RST 和传入 RST。我正在使用 Debian linux。我尝试了互联网上列出的所有可能的命令组合，但似乎没有任何效果。

例如，我试过：

```
iptables -A OUTPUT -o eth0 -p tcp --tcp-flags RST RST -j DROP  
iptables -A OUTPUT -p tcp --tcp-flags RST RST -j DROP
iptables -A INPUT -p tcp --tcp-flags RST RST -m state --state RELATED,ESTABLISHED -j DROP  
iptables -A INPUT -p tcp --tcp-flags RST RST -j DROP 
```

我仍然看到内核发送 RST 数据包并接收 RST 数据包。请尝试解决此问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-07-15T07:21:09.683

如果您希望丢弃入站 RST 数据包，您需要这样做：

```
iptables -I INPUT -p tcp --tcp-flags ALL RST,ACK -j DROP
iptables -I INPUT -p tcp --tcp-flags ALL RST -j DROP 
```

如果您希望丢弃*出站*RST 数据包，您需要这样做：

```
iptables -I OUTPUT -p tcp --tcp-flags ALL RST,ACK -j DROP 
```

**为什么要 RST ACK？** 根据 RFC，对包含 SYN 的 TCP 数据包的任何响应都必须确认该序列号。因此，即使您指示您的端口已关闭，您也会以 RST ACK 进行响应。

**为什么要关心出站 RST？** 如果您尝试使用 Scapy 之类的工具来试验 IP 行为，您将经常需要阻止主机的 IP 堆栈发回 RST ACK。或者，您可以在 Scapy 中实现一个伪堆栈，声明 MAC，响应 IPv6 的 ARP 或 ICMP ND，并绑定您自己的 IP 地址，这也会阻止主机的堆栈响应。显然，这比简单地阻止出站 RST 数据包需要更多的工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T19:49:37.137

嗯，这很可能是通过正向链而不是输入或输出链，因为您在主机上运行它。

调试它的一个技巧是使用*iptables -L -v*，如果您设置一个发送大量数据包的命令，这将显示每个规则有多少数据包的计数

```
watch --interval 0.1 "nc remote.machine CLOSED_PORT" 
```

您可以计算出哪个规则受到了打击。您还应该知道存在正交表——在不同情况下使用的规则链集（例如，用于 nat）。可能值得查看 NAT 表 - 因为您的虚拟主机可能正在通过您的主机进行 NAT，而不是拥有自己的 IP 地址

```
iptables -L -v -t nat 
```

知道虚拟主机的 IP 地址是有用的——因为如果它与您的网络的子网不相交，这可能会被 NAT 化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T10:51:12.853

复位数据包激活了 RST 和 ACK 标志。所以，正确的规则是：

`iptables -I INPUT -p tcp --tcp-flags ALL RST,ACK -j DROP`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-03-29T08:20:38.367

希望能帮助到你：

```
echo 0 > /proc/sys/net/ipv4/tcp_rst_retries
echo 0 > /proc/sys/net/ipv4/tcp_rst_timeout 
```

# java - 关于java和数组在方法中搜索并返回数据

> ID：13215136
> 
> 赞同：2
> 
> 时间：2012-11-04T01:08:53.847
> 
> 标签：java, arrays, methods

这是我到目前为止所做的程序。我应该要求收银员输入价格，如果是宠物，则输入 y 或 n。如果有 5 个或更多项目，则应该有一种方法来计算折扣。除了折扣方法的返回数据之外，我拥有的程序正在运行。

错误是68：`error; cannot return a value from method whose result type is void.`

我很困惑为什么数据无效。如果我取出`return discount;`语句，那么程序编译没有错误。

```
import javax.swing.JOptionPane;

public class Assignment4
{
    public static void main (String[] args) 
    {
        double[] prices = new double[1000];
        boolean[] isPet = new boolean[1000];
        double enterPrice = 0;
        int i = 0;
        String yesPet = "Y";
        int nItems = 0;
        do
        {
            String input = JOptionPane.showInputDialog("Enter the price for the item: ");
            enterPrice = Integer.parseInt (input);

            prices[i] = enterPrice;

            String petOrNo = JOptionPane.showInputDialog("Is this item a pet? Enter Y for pet and N for not pet.");

            if (petOrNo.equalsIgnoreCase(yesPet))
            {
                isPet[i] = true;
            }
            else
            {
                isPet[i] = false;
            }
            i = i+1;
            nItems = nItems + 1;
        } while (enterPrice != -1);
        //System.out.println(nItems);
    }

    public static void discount(double[] prices, boolean[] isPet, int nItems)
    {
        boolean found = false;
        double[] discount = new double[nItems];

        if (nItems > 6)
        {
            for (int i = 0; i < nItems; i++)
            {
                if (isPet[i] = true)
                {
                    found = true;
                    break;
                }
            }

            if (found = true)
            {
                for (int x = 0; x < nItems; x++)
                {
                    if (isPet[x] = false)
                    {
                        int n = 0;
                        prices[x] = discount[n];
                        n = n + 1;
                    }
                }
            }
        }
        return discount;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:10:44.420

该`discount`方法需要返回一个`double`数组。改变

```
public static void discount(double[] prices, boolean[] isPet, int nItems) { 
```

至

```
public static double[] discount(double[] prices, boolean[] isPet, int nItems) { 
```

`discount`没有为数组中的任何条目分配值，因此每个值都是`0.0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:13:59.070

```
public static void discount(double[] prices, boolean[] isPet, int nItems) 
```

应替换为：

```
public static double[] discount(double[] prices, boolean[] isPet, int nItems) 
```

顺便说一句，`discount`永远不会被填充，它将返回一个空数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:19:21.220

方法签名是您和 Java 之间的编译时承诺——您承诺返回您指定的类型。`void`在方法签名中意味着你不会返回任何东西，但你会返回一些东西。这是违反承诺的，因此是错误的。

您必须将方法签名更改为仅返回`double[]`以履行对编译器的承诺。

这也是`discount`从未实际*填充*的情况......赋值是从右到左关联的。因此，该语句`prices[x] = discount[n]`可能不会按照您的预期执行。

# asp.net-mvc - 在模型/视图/控制器键盘快捷键之间导航？

> ID：13215137
> 
> 赞同：6
> 
> 时间：2012-11-04T01:09:52.377
> 
> 标签：asp.net-mvc, visual-studio-2012, keyboard-shortcuts

我是 MVC 的新手。

我很好奇是否有任何内置快捷方式可以在模型/视图/控制器之间导航。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T14:00:56.570

在控制器动作中：

*   `Ctrl+M`, `Ctrl + G`=> 去查看
*   `Ctrl+M`, `Ctrl + V`=> 添加视图 ...

当您在控制器操作中右键单击时，可以在上下文菜单中访问相同的操作。

ASP.NET MVC 中的模型是一个相当抽象的概念，没有键盘快捷键允许您导航到它，因为没有明确的定义。*您可以让单个控制器操作与多个模型一起使用，或者单个模型与多个控制器操作一起重用，因此导航到模型*的含义还不够清楚。

# data-structures - 计算树中值的概率

> ID：13215151
> 
> 赞同：1
> 
> 时间：2012-11-04T01:13:59.520
> 
> 标签：data-structures, tree

这是我大学的数据结构课程中的一个问题。我不明白这个问题是什么意思。任何人都可以详细说明这个问题，以及它的答案。

> 假设我们将 1 到 15 之间的所有数字插入到一棵最初为空的二叉搜索树中；这些键的所有排列都同样可能是插入顺序。计算生成的树以 10 作为其根、7 作为根的左孩子和 15 作为根的右孩子的概率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:21:46.633

为了使“ `10 as its root, 7 as the left child of the root and 15 as the right child of the root.`”发生，树的插入顺序必须是：

*   `10`首先，然后`7`是 ，`15`然后是其他 12 个数字。
*   `10`首先，然后`15`是 ，`7`然后是其他 12 个数字。

现在考虑：有多少种方式可以发生？

*   1种方式先选10，再选7，再选15；和12！其余的选择方法。
*   1种方式先选10，再选15，再选7；又是12！其余的选择方法。

所以这就是`(12! * 2)`最终达成这种特定安排的方法。

现在，所有可能的插入顺序的集合是 15 个数字的排列，即`15!`（阶乘）

请注意，问题是“ `all permutations of these keys are equally likely to be the insertion order`”，因此它与构建树的可能方法的数量有关，而不是不同结果树的实际数量（存在差异，因为不同的插入顺序可能最终构建相同的树（例如尽管插入顺序不同，上述 2 个案例减去 12 个其他数字将构建相同的树）

概率是：（构建问题指定的排列方式的数量）除以（构建树的可能方式的总数）：

`(12! * 2) / (15!)`你想要的概率也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:29:32.993

除非你创建自平衡树，否则你得到的树会根据元素插入的顺序而有所不同。要使根为 10，则 10 必须是插入的第一个数字。这有 15 或 1/15 的概率，那么，对于 7 和 15 成为第一个孩子，概率是 2/14*1/13

总计：1/15*2/14*2/13

# ruby - 提取范围在 Nokogiri 每个块内的值

> ID：13215159
> 
> 赞同：1
> 
> 时间：2012-11-04T01:15:28.053
> 
> 标签：ruby, nokogiri

我正在尝试创建一个功能，该功能将从维基百科页面中抓取演员的电影作品。这是代码示例

```
doca = Nokogiri::HTML(open("http://en.wikipedia.org/wiki/Kevin_Bacon"))

grandparent = doca.xpath('//div[@id="mw-content-text"]').children() 
child = []

grandparent.each {|node|
  node.children.each{|x|
    if x['id'] == "Films"
      child = node.next_element.children
      break
    end
  }
} 
```

子数组的每个元素现在都包含一排电影表。我真正想要的是将每部电影的href链接保存到一个数组中，但是由于它们嵌套在每个数组中，因此无法访问它们。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T02:26:18.427

怎么样：

```
doca.xpath('//div[@id="mw-content-text"]/table//td[2]//i/a').map { |a| a['href'] } 
```

`td`这会直接在`div`带有 id的表中的列 ( ) 中选择任何深度的斜体链接`mw-content-text`，然后将它们映射到它们的`href`属性（即它们的链接值）。您可以更具体，具体取决于您要包含/排除的内容。

如果您希望链接是绝对的而不是相对的，您可以将页面 URL 合并到链接值：

```
url = "http://en.wikipedia.org/wiki/Kevin_Bacon"
doca.xpath('//div[@id="mw-content-text"]/table//td[2]//a').map { |a| URI(url).merge(a['href']) } 
```

更新：

或者，如果您想按照您描述的方式搜索链接，您可以这样做：

```
doca.xpath('//div[@id="mw-content-text"]//table[preceding-sibling::*[1][span[@id="Films"]]]//a').map { |a| a['href'] } 
```

这就是说：在 id 的 div 中找到所有表的子链接，`mw-content-text`其直接前面的兄弟有一个带有`id`“电影”的直接子跨度标签。稍微复杂一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:39:26.590

有更好的方法可以进入电影列表：

```
doca.at('span#Films').parent.search('+ table tr')[1..-1].each do |tr|
  puts tr.at('a')[:href] rescue 'N/A'
end 
```

您应该尽可能避免使用 xpath（恕我直言）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:46:30.603

要获取/保存所有 href 链接，只需将以下行添加到给定代码中：

```
hrefs = child.css('td a').map{|i| i.attributes['href'].value}
//puts hrefs 
```

就是这样。因此，用于获取该表的所有 href 链接的整个代码片段：

```
doca = Nokogiri::HTML(open("http://en.wikipedia.org/wiki/Kevin_Bacon"))

grandparent = doca.xpath('//div[@id="mw-content-text"]').children() 
child = []

grandparent.each {|node|
  node.children.each{|x|
    if x['id'] == "Films"
      child = node.next_element.children
      break
    end
  }
}

hrefs = child.css('td a').map{|i| i.attributes['href'].value}
    //puts hrefs 
```

# plone - 我应该在一个 Zope 实例中托管多个 Plone 站点吗？

> ID：13215161
> 
> 赞同：4
> 
> 时间：2012-11-04T01:15:53.123
> 
> 标签：plone, web-deployment

我有一个 Plone 站点正在开发中，很快就会迁移到生产服务器，但我即将开始在 Plone 中开展另一个项目。我知道我可以在 Zope 实例中创建多个 Plone 站点（例如，按照与[现有问题](https://stackoverflow.com/questions/10298701/plone-4-how-to-create-multiple-plone-sites)相关的说明进行操作），但是一旦启动，这是托管这些站点的最佳方式吗？

让每个站点在不同的 Zope 中运行有什么好处吗？在我看来，否则构建配置可能会变得复杂。

每个 Zope 一个站点有缺点吗？我已经可以看到资源需求可能会增加很多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T09:30:35.437

我们*总是*为每个站点部署一个新的 Zope 实例。网站总是在变化，如果你为每个实例部署了多个网站，你会有以下缺点：

*   所有站点必须遵循相同的软件版本。您不能只升级一个站点的组件。
*   软件更新会导致托管在同一实例中的所有站点停机。
*   如果其中一个站点变得不成比例地更受欢迎，它将主导各种缓存，从而损害其他站点。它们将变得异常缓慢，因为它们的数据必须始终从磁盘中获取。
*   您不能简单地扩展一个站点以满足需求，而不必扩展其他站点。想要从一个实例变为两个实例？您不仅需要添加负载均衡器，还需要添加配置为处理*所有*站点的负载均衡器。

除非您要托管一系列必须同步运行的完全统一的网站，否则在一个实例中托管多个网站确实没有任何好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T08:07:46.377

这个问题没有单一的答案。答案取决于各种因素，例如各个站点的大小、单个站点的使用情况等……监控是您成功的关键……如果您的站点变慢，则开始向外扩展……使用多个应用服务器或将资源使用率较高的站点移动到他们自己的 Zope 实例中......正如所说：知道你在做什么，没有适用于所有 setup.s 的答案

# objective-c - 如何使 UIImagePickerController 图像在 imageview 上显示时不调整大小

> ID：13215162
> 
> 赞同：0
> 
> 时间：2012-11-04T01:16:09.397
> 
> 标签：objective-c, xcode, uiimageview, uiimage, uiimagepickercontroller

我对 uiimageviews 很陌生，我有一个关于 UIImagePickerController 的问题。在我的应用程序中，用户选择一个图像，然后将其显示在 uiimageview 上。然后它会调整图片的大小，使其每个部分都适合 imageview，从而导致图像失真。有没有办法让 imageview 不调整图像大小以适应其边界？谢谢！

编辑：虽然第一个答案确实使图像居中，但我还希望用户能够捏住图像以放大和缩小

编辑#2 我选择的答案使我朝着正确显示图像的正确方向前进。对于缩放，我发现这可以解决它[iphone uiscrollview 和 uiimageview - 设置初始缩放](https://stackoverflow.com/questions/2685161/iphone-uiscrollview-and-uiimageview-setting-initial-zoom)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:19:47.980

您的图像视图的内容模式可能设置为缩放以填充或缩放以适合。根据您的需要，尝试将其设置为左上角、中心等。

```
[myImageView setContentMode:UIViewContentModeCenter]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:39:55.987

如果您没有使用 Auto Layout（根据我目前所经历的情况，您可能不应该 - 它是喜怒无常的，不适用于 iOS 5），您可以在尺寸检查器中调整弹簧（在双箭头内）。

您也可以尝试在父视图的属性检查器中取消选择“自动调整子视图”。不过，这只有在您希望它应用于所有同级子视图时才有效。

# objective-c - 将 iOS 应用程序连接到 wifly 模块

> ID：13215165
> 
> 赞同：7
> 
> 时间：2012-11-04T01:16:25.543
> 
> 标签：objective-c, ios, serial-port, wifi

我有一个处于 AdHoc 模式的[Wifly 模块](https://www.sparkfun.com/products/10822)（即它创建自己的本地 wifi 网络），我想在我的 iOS 应用程序中编程连接到 Wifly 并来回发送数据的能力。

从计算机与 Wifly 通信时，您必须通过终端仿真器发送命令。有谁知道如何从 iOS 应用程序执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:54:18.883

您（或您的用户）首先需要在 wifi 设置中手动连接到 ad-hoc Wifly 网络。然后，要从您的应用程序与 Wifly 通信，您需要打开 TCP 或 UDP 套接字并通过它发送消息。我使用了优秀的 CocoaAsyncSocket 库来做到这一点： [https ://github.com/robbiehanson/CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

正确配置 Wifly 无线电是最困难的部分，文档非常可怕。但这是我网站上的一个示例配置，适用于 iPhone 应用程序： [http ://www.curiousmarc.com/dome-automation/building-marcduino-boards/setting-up-the-wifly-radio](http://www.curiousmarc.com/dome-automation/building-marcduino-boards/setting-up-the-wifly-radio)

编辑 08/2014：新的 WiFly 固件 4.01 及更高版本已弃用 ad-hoc，WiFly 现在可以配置为真正的接入点。让生活更简单。WiFly 的新配置说明在我上面的网站上。其余的保持不变，打开一个 TCP 套接字然后离开。您发送的内容会输出到 WiFly 上的串行端口。

编辑 03/2017：我在连接到 WiFly 时遇到了可靠性问题，它在接入点模式下非常不稳定。切换到更好的 Xbee S6B 无线电解决了通信问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:31:51.970

使用 Wifly，一旦您的 iOS 设备连接到 wifly Ad-Hoc 网络（并且它可以通过“设置”，在您的应用程序外部），您的应用程序可以在端口 2000 上向 Wifly 本地网络 ip 发起 TCP 套接字客户端（通过默认），从那里，您可以正常进行，就好像您通过串行+终端进行通信一样

使用已建立的 TCP Socket，您可以通过将 $$$ 写入 TCP Socket 流，将 wifly 传递到“CommandMode”（如果您想远程配置它），或者您可以简单地通过向流发送数据来与它通信。

注意：如果您不知道您的wifly的本地IP地址，您可以使用“CommandMode”通过串口进行配置。

# angularjs - 控制器中的样式表链接

> ID：13215166
> 
> 赞同：2
> 
> 时间：2012-11-04T01:16:28.757
> 
> 标签：angularjs

我的源数据包含指向 css 文件的 URL，我需要在呈现模板时加载这些文件。

控制器有这样的东西：

```
$scope.links = myData.query(); 
```

在视图中我尝试了这个：

```
<link ng-repeat="link in links" rel="stylesheet" type="text/css" href="{{link}}"> 
```

当然，在 Angular 开始填充之前`{{link}}`，浏览器会抱怨`{{link}}`它不存在的 URL。

所以我最终只发出标记而不是链接：

```
$scope.links = "<link rel=\"stylesheet\" type=\"text/css\" href=\"http://example.com\">"; 
```

并在模板中：

```
<div ng-bind-html-unsafe="links"></div> 
```

我什至不能使用`ng-bind-html`我必须使用不安全的版本。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:30:59.417

你会想使用[ngHref](http://docs.angularjs.org/api/ng.directive%3angHref)。

```
<link ng-repeat="link in links" rel="stylesheet" type="text/css" ng-href="{{link}}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T15:25:13.753

当你总是使用 AngularJS 哈希标签时，通常必须有适当的指令模块，在这种情况下**ngHref**。如果您不使用它，您很可能会返回 404 错误，直到 angular 有时间用适当的 URL 替换链接。

此处参考文档以获取更多信息。
[https://docs.angularjs.org/api/ng/directive/ngHref](https://docs.angularjs.org/api/ng/directive/ngHref)

# size - 如何更改 Galleria 中的灯箱尺寸？（已提供答案）

> ID：13215170
> 
> 赞同：1
> 
> 时间：2012-11-04T01:17:54.780
> 
> 标签：size, lightbox, galleria

**注意**：这既是一个问题，也是一个提供的解决方案。

如果您在 Galleria 照片库中使用经典主题，您会注意到很多东西是可配置的，但有一件事似乎是固定的，那就是灯箱的大小。这对我来说非常令人沮丧，我花了一些时间来挖掘设置，但结果证明解决方案非常简单 - 一个代码行更改。

我想为其他人发布它，这样他们就可以调整他们的灯箱大小，而不用经历我做的麻烦。

**解决方案**：

1.  打开文件——`galleryHelper/src/galleria.js`
2.  找到这个代码行 -`var r = Math.min( (w-60) / lightbox.w, (h-80) / lightbox.h );`
3.  改成这样——`var r = 1;`

**注意**：如果您进行此更改，灯箱大小将与您显示的实际图像大小一样大。将此值 1 视为等于 100%。因此，如果您希望灯箱比实际图像大 1.5 倍，请将值设置为 1.5。相反，如果您希望它只显示实际图像大小的 80%，请将其设置为 0.8。

此外，此代码行位于一个部分内，如下所示：

```
rescale: this.proxy(function(e) {

                var w = Math.min( this.width(window), lightbox.w );
                var h = Math.min( this.height(window), lightbox.h );
                var r = Math.min( (w-60) / lightbox.w, (h-80) / lightbox.h );
                var destW = (lightbox.w * r) + 40;
                var destH = (lightbox.h * r) + 60; 
```

您可以清楚地看到使用数学公式来动态计算每个图像的大小。如果您想要固定的灯箱大小，请使用以下值：`var destW`, `var destH`.

享受！！！

# sql-server - 数据库连接错误“文件正在使用”

> ID：13215172
> 
> 赞同：6
> 
> 时间：2012-11-04T01:18:46.057
> 
> 标签：sql-server, visual-c#-express-2010

我正在将 Visual Studio 2010 C# Express 和 SQL Server Management Studio 与 SQL Server 2012 一起使用，当我尝试将数据库连接到我的 Windows 窗体项目时出现错误。

```
"This file is in use.  Enter a new name or
close the file that is open in another program" 
```

我在网上四处寻找解决方案，但没有奏效。所以我决定创建一个全新的数据库和一个全新的项目。但我仍然得到错误！

这是我使用的步骤：

*   首先我连接到我的本地托管服务器
*   然后我右键单击`Databases`并选择`New Database`并命名它`school`
*   然后我右键单击`tables`新数据库上的文件夹并选择`new table`
*   我添加了这些表`student, course, enrolled`
*   最后我在里面扔了一些虚假的条目

现在我跳到 VS

*   我选择`New Project`然后`Windows Forms Application`命名它`Registrar`
*   然后我点击`add new data source`
*   `database`在`Choose a data source type`窗口 中选择
*   然后我`Dataset`在`Choose a Database Model`窗口 中选择
*   然后我单击`New Connection` 更改数据源以`Microsoft SQL Server Database File`浏览到我的“SQLEXPRESS”文件夹中的 DATA 文件夹，当我单击“school.mdf”文件时出现上述错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-04T11:52:41.530

您的 school.mdf 附加在您的 SQL Server 2012 中。您需要将其分离。

转到您的 SQL Server Management Studio，右键单击学校、任务、分离。

除非它被分离，否则它将被 SQL Server Management Studio 使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-15T05:23:57.960

你需要分离它。如果您不想这样做，请选择“Microsoft SQL Server”而不是“Microsoft SQL Server 数据库文件”。Express 版本 VB 没有**Microsoft SQL Server**选项。

# jquery - 编写自定义对象时jQuery不是函数错误

> ID：13215173
> 
> 赞同：1
> 
> 时间：2012-11-04T01:19:04.357
> 
> 标签：jquery, function, object

我正在尝试开发我的第一个 jQuery 对象：

```
jQuery(function ($) {
    var WNM = function (element) {
        var elem = $(element);
        var obj = this;

        var MultipleValues = function (element) {
            var elem = $(element);
            var obj = this;
            var opt; // Options;
            var sep; // Seperator string;
            var vals; // Array wich holds the values;

            //$(obj).find(".multipleValuesSett_MaxItems").val();

            this.MultipleValues = function (options) {
                opt = options;
                sep = $(obj).find(".multipleValuesSett_Seperator").val();

                loadValues();

                outputValues();
            };

            var loadValues = function () {
                var values = $(obj).find(".multipleValues_Values").val();
                vals = values.split(sep);
            };

            var outputValues = function () {
                var temp;
                if ($.isFunction(opt.output)) {
                    temp = opt.output.apply(this, vals);
                    $(obj).find(".multipleValues_ValuesOutput")
                        .append(temp);
                }
            };
        };

        this.MultipleValues = function (options) {
            if (elem.length) {
                var mv = new MultipleValues(elem);
                mv.MultipleValues(options);
                return mv;
            }
            else
                return null;
        };

    };

    $.fn.MultipleValues = function () {
        return wnm = new WNM(this);
    };

}); 
```

现在每当我尝试运行它时：

```
$(document).ready(function () {
    $(".multipleValues").WNMedia().MultipleValues({
        output: function (data) {
            var temp = "";
            temp += "<ul>";
            $.each(data, function (i) {
                temp += "<li>" + data[i] + "</li>";
            });
            temp += "<ul>";

            return temp;
        }
    });
}); 
```

我收到以下错误：（TypeError: $(".multipleValues").WNMedia() is not a function）。有人可以在这里帮我吗，我有点卡住了..

==========================================

现在我有另一个问题。你可以看到在定义的输出函数中，我调用了选项输出函数。传递了一个参数 vals，它是一个字符串数组。每当我遍历数据变量时，它只包含一项，而实际上有三项。有什么想法吗？

解决了问题，改了：

```
temp = opt.output.apply(null, vals); 
```

进入：

```
temp = opt.output.apply(null, [vals]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:27:58.660

您从未定义过 WNMedia()，您的示例在以下[工作](http://jsfiddle.net/oceog/VHg4Z/)

```
$(".multipleValues").MultipleValues({
        output: function (data) {
            var temp = "";
            temp += "<ul>";
            $.each(data, function (i) {
                temp += "<li>" + data[i] + "</li>";
            });
            temp += "<ul>";

            return temp;
        }
    });
​ 
```

# jakarta-ee - 如何让 request.login 方法与 jdbcRealm 一起使用？

> ID：13215175
> 
> 赞同：3
> 
> 时间：2012-11-04T01:19:08.363
> 
> 标签：jakarta-ee, servlets, glassfish, glassfish-3, jaas

我正在尝试使用 Servlet 3.0 request.login(username, password) 方法来处理 jdbcRealm，但似乎有些问题。有很多关于如何让 jdbcRealm 与 FORM 身份验证一起工作的文章，还有很多关于如何使用新的 request.login 方法的文章，但我还没有看到任何显示两者一起工作的文章。

应用程序服务器 - GlassFish 3.1.2
IDE - Netbeans 7.3
RDBMS - SQL Server 2008 R2
JDBC - Microsoft JDBC 4.0 驱动程序

我很感谢社区提供的有关如何使其正常工作的帮助。提前致谢！

首先，我将 jquery ajax 调用发送到我的 SignInService servlet。在发送之前，我正在使用 SHA-512 中的 jsSHA 库对密码进行编码：

```
var encodedPassword = new jsSHA($("#omSignInPassword").val(), "TEXT");

$.ajax({
      url: "SignInService",
      data: {
        username : $("#SignInUserName").val(),
        password : encodedPassword.getHash("SHA-512", "HEX")
      }
...
}); 
```

这是 Chrome 显示正在发送的内容：

```
username:admin
password:b109f3bbbc244eb82441917ed06d618b9008dd09b3befd1b5e07394c706a8bb980b1d7785e5976ec049b46df5f1326af5a2ea6d103fd07c95385ffab0cacbc86 
```

servlet 只接受请求参数并尝试登录：

```
 username = request.getParameter(PARAM_USERNAME);
  password = request.getParameter(PARAM_PASSWORD);

  request.login(username, password); 
```

这些是我在 GlassFish 控制台中看到的错误：

严重：jdbcrealm.invaliduserreason 警告：WEB9102：Web 登录失败：com.sun.enterprise.security.auth.login.common.LoginException：登录失败：安全异常
严重：Servlet 异常：javax.servlet.ServletException：尝试登录时抛出异常为用户进行身份验证：管理员
警告：DPL5032：未在 web.xml 描述符中定义身份验证方法。使用默认 BASIC 进行登录配置。
警告：没有映射到角色 [用户] 的主体。

现在，进入配置...

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <login-config>
        <realm-name>omRealm</realm-name>
    </login-config>
    <security-role>
        <description/>
        <role-name>User</role-name>
    </security-role>
</web-app> 
```

用户表：

```
CREATE TABLE [OM_SECURITY].[User](
    [UserID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](32) NOT NULL,
    [Password] [char](128) NOT NULL,
    [LastName] [nvarchar](32) NULL,
    [FirstName] [nvarchar](32) NULL,
    [Email] [nvarchar](64) NULL
) ON [PRIMARY] 
```

此表中存在一条记录：

```
1   admin   B109F3BBBC244EB82441917ED06D618B9008DD09B3BEFD1B5E07394C706A8BB980B1D7785E5976EC049B46DF5F1326AF5A2EA6D103FD07C95385FFAB0CACBC86    NULL    NULL    NULL 
```

（密码现在只是“密码”）

这是用于将每个用户放入“用户”组的视图。这是非常基本的，一旦我有了核心功能就会改变。我预计不会使用 JAAS 角色，因为我的应用程序需求似乎比它们提供的要复杂得多。这可能是另一个讨论，除非这会影响身份验证：

```
CREATE VIEW [OM_SECURITY].[SignInGroup]
AS
SELECT     'User' AS GroupName, Name AS UserName
FROM         OM_SECURITY.[User] 
```

连接池已经过测试，它工作得很好。领域是在 server-config 部分而不是 default-config 中设置的。

```
JAAS Context:  jdbcRealm
JNDI:  jdbc/omSecurity
User Table:  OM_SECURITY.User
User Name Column:  Name
Password Column:  Password
Group Table:  OM_SECURITY.SignInGroup
Group Table User Name Column:   UserName
Group Name Column:  GroupName
Assign Groups: (blank)
Database User:  (blank)
Database Password:  (blank)
Digest Algorithm: SHA-512
Password Encryption Algorithm:  AES
Encoding: Hex
Charset: (blank) 
```

如果有人能告诉我哪个文件存储了领域和连接池配置，我将在此处将它们作为 XML 发布。

这也在这里发布到 GlassFish 论坛：

[http://www.java.net/forum/topic/glassfish/glassfish-webtier/using-servlet-requestlogin-jdbcrealm](http://www.java.net/forum/topic/glassfish/glassfish-webtier/using-servlet-requestlogin-jdbcrealm)

更新：我刚刚整理了一个基于表单的快速登录，但它也失败了，所以问题似乎出在我的领域。我调整了日志级别：

配置\
服务器配置\
日志记录\
日志级别\

javax.enterprise.system.core.security = FINE

和

com.microsoft.sqlserver.jdbc = 好

根据 SQL Server，查询运行良好，连接池没有抛出异常：

```
FINE: SQLServerPreparedStatement:3: calling sp_prepexec: PreparedHandle:0, SQL:SELECT Password FROM omUser WHERE Name = @P0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T02:15:13.497

您正在登录

```
username = request.getParameter(PARAM_USERNAME);
password = request.getParameter(PARAM_PASSWORD);
request.login(username, password); 
```

密码已经散列的地方。我相信 request.login() 采用纯文本版本，然后容器将其与数据库中的散列版本进行比较。

作为旁注，在客户端散列密码通常被认为是不好的做法，它应该通过 ssl 以纯文本形式发送。数据库中的哈希 (+salt) 用于防止黑客在入侵您的数据库时以其他用户身份登录。存储散列密码可以防止这种情况，但前提*是*您的服务器接受纯文本密码。如果它接受散列密码，那么他们就拥有了他们需要的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T07:56:05.420

根据我使用 Glassfish 的 jdbcRealm 的经验，

```
request.login(username, password); 
```

这里的密码应该包含用户输入的普通密码，而不是散列密码，因为这是 jdbcRealm 的工作。这可以解释为什么您会收到身份验证错误，因为您用作密码值的哈希密码仍将根据领域配置进行哈希处理。

这是我上次执行此操作时的 jdbcRealm 配置：

```
Password Encryption Algorithm: SHA-256
Digest Algorithm: SHA-256
Charset: UTF-8 
```

# css - 如何使 div 的边框填充父 div 的高度？

> ID：13215177
> 
> 赞同：1
> 
> 时间：2012-11-04T01:19:21.080
> 
> 标签：css

我的 div 边框仅显示其中内容高度的边框。我怎样才能让边框填满一切？

截屏：

![div](../Images/521ca889f8e559b5bf24f086ae571c64.png) .

我在左 div 中设置了右边界。对于第一个 div，高度只有一条线长，这意味着边框只有一条线长。（左侧屏幕截图中没有的另一个 div 将该 div 扩展为当前大小，该大小大于创建边框的 div。

我试过设置 height:100% 但是因为我`float:left`在所有东西上都使用它似乎没有任何效果。

**编辑**：关于这个问题的简短 JSFiddle：http: [//jsfiddle.net/KvS8w/](http://jsfiddle.net/KvS8w/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:49:05.783

所以昨晚我误解了你的问题。此外，您的 jsfiddle 对了解您的确切情况也有很大帮助。

问题是，当您将组件的高度设置为 100% 时，它会采用它的父容器的高度，如果它仍然是一个相对值，它会沿着 DOM 树向上直到找到一个固定值。

所以，你可以给你的主 DIV 一个固定的高度（这可能会导致一些溢出），或者添加一些 javascript 样式转换，它将根据它的最高孩子计算它的高度。

编辑 ：

这是一个简单的Javascript解决方案

```
var divh = document.getElements('.reply');
var i = 0;
for ( i = 0 ; i < divh.length; i++ )
{
        divh[i].style.height = divh[i].offsetHeight +'px';
} 
```

您可以根据您的 Fiddle 在此[Fiddle](http://jsfiddle.net/KvS8w/42/)中看到它的实际效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:36:25.333

编辑：你为什么不使用 css 框架。在 youtube 等上也有很好的视频教程。

如果你只是想要你的 css，我推荐一个像 960 或其他的 css 框架.. ;)

问候，戴夫

# android - 如何禁用在 Android 的 webview 中选择整个画布？

> ID：13215181
> 
> 赞同：1
> 
> 时间：2012-11-04T01:20:20.867
> 
> 标签：android, webview, html5-canvas

我几乎没有向事件侦听器（'touchstart'）注册的元素。我将它添加到 webview 中。侦听器工作正常，但每次我触摸画布时，它都会选择整个画布（如普通 DOM 对象），经过短暂延迟后，它会从事件侦听器执行回调，然后取消选择画布。

我的问题：有什么方法可以禁用此选择，因为它是不必要且丑陋的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:37:33.537

我们的团队也遇到了这个问题，和你描述的完全一样。

您的 js 代码或触摸处理程序没有任何问题。

只需将 css 属性添加到您的画布元素，如下所示：

```
canvas{
  -webkit-tap-highlight-color: transparent;
} 
```

这将解决您的问题。

# ruby-on-rails - 如何在带有 Mustache 的 RoR 中使用脚手架和 form_for

> ID：13215190
> 
> 赞同：1
> 
> 时间：2012-11-04T01:22:45.447
> 
> 标签：ruby-on-rails, forms, mustache, scaffolding, form-for

我在我的 rails 应用程序中使用 mustache 模板与[mustache-rails](https://github.com/josh/mustache-rails) 。我想做脚手架并使用 form_for 助手，但我无法让提交按钮工作。我找到了这个[https://gist.github.com/954994](https://gist.github.com/954994)，但我不想这样做太笼统。我只是想把我的脚手架变成一个基于模板的版本。

这是我的视图类

```
module Views
  module Slideshows
    class New < Layouts::Application

       def form
         form_for(@slideshow) do |f|
          {
              :submit => f.submit
          }
         end
       end

       def errors?
           @slideshow.errors.any?
       end

       def error_header
           "#{pluralize(@slideshow.errors.count, "error")} prohibited this post from being saved:"
       end

       def errors
         @slideshow.errors.full_messages
       end

       def back_link
         link_to 'Back', slideshows_path
       end  

    end
  end
end 
```

这是我的模板类

```
<h1>New slideshow</h1>

{{#form}}
  {{#errors?}}
    <div id="error_explanation">
      <h2>{{error_header}}</h2>
    </div>
    <ul>
      {{#errors}}
        <li>{{.}}</li>
      {{/errors}}
    </ul>
  {{/errors?}}
  <div class="actions">
    {{submit}}
  </div>
{{/form}}

{{back_link}} 
```

在我看来，问题是我无法在 form_for 块中访问 :submit 。

# php - 无论选择如何，单选按钮始终提供相同的值

> ID：13215191
> 
> 赞同：0
> 
> 时间：2012-11-04T01:23:16.583
> 
> 标签：php, javascript, ajax

希望有人可以帮助我。出于某种原因，以下表单代码始终将“路线”单选按钮的值设为“m”，即使选择了值为“s”的选项也是如此。

```
echo "<b><u>Route Information</u></b><br><br>";

echo "Select Route Name: <input type='radio' name='route' id='route1' value='s' onclick='switchRoute();' CHECKED><br>";
echo "<div id='txtLocation'><select name='route_name' id='route_name'>
    <option value='0000'>... select a location ...</option>";
echo "</select></div><br><br>";

echo "Or enter a new route (select the radio button for this option):<input type='radio' name='route' id='route2' value='m' onclick='switchRoute();'><br>";
echo "&nbsp&nbsp&nbsp&nbspRoute Name:<br>&nbsp&nbsp&nbsp&nbsp<input name='new_route_name' size='50' disabled='true' class='input-xlarge'><br><br>";
echo "&nbsp&nbsp&nbsp&nbspRoute Grade:<br>&nbsp&nbsp&nbsp&nbsp<input type='number' name='route_grade'  class='input-mini' disabled='true'><br><br>";
echo "&nbsp&nbsp&nbsp&nbspRoute Description <i>(optional)</i>:<br>&nbsp&nbsp&nbsp&nbsp<textarea name='route_description' class='input-xxlarge' rows='3' disabled='true'></textarea><br><br>"; 
```

使用以下 ajax 代码填写 route_name 选择：

```
function showUser(str)
{
    if (str=="")
      {
      document.getElementById("txtLocation").innerHTML="";
      return;
      } 
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=function()
      {
      var output = '';
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        output = xmlhttp.responseText;
        document.getElementById("txtLocation").innerHTML=output;
        }
      }
    xmlhttp.open("GET","../model/selected_loc.php?l="+str,true);
    xmlhttp.send();
} 
```

由这个 PHP 代码调用：

```
echo "<b><u>Location Information</u></b><br><br>";
echo "<select name='loc_id' id='loc_id' onchange='showUser(this.value)'><option value='0000'>... select a location ...</option>";
$result = mysql_query("SELECT loc_id, name FROM location ORDER BY name");

while ($row = mysql_fetch_array($result))
{
    $id = $row['loc_id'];
    $name = $row['name'];
    echo "<option value='{$id}'>{$name}</option>";
}
echo "</select><br><br>"; 
```

还有这个 javascript 代码作用于表单。

```
function switchRoute()
{
    if (document.getElementById('route2').checked)
    {
        document.submitroute.route_name.disabled=true;
        document.submitroute.new_route_name.disabled=false;
        document.submitroute.route_grade.disabled=false;
        document.submitroute.route_description.disabled=false;

    }
    else if (document.getElementById('route1').checked)
    {
        document.submitroute.route_name.disabled=false;
        document.submitroute.new_route_name.disabled=true;
        document.submitroute.route_grade.disabled=true;
        document.submitroute.route_description.disabled=true;
    }
} 
```

谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:08:41.183

我觉得很傻，但是我自己解决了。

在收到我拥有的数据的页面中：

```
if ($route = "m") 
```

代替：

```
if ($route === "m") 
```

这是重新分配 $route 变量而不是比较它。我发誓我早些时候检查过，但是有时很容易错过这样的小事情。

感谢所有帮助或查看我的问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:59:34.167

很难用你给出的代码说。您发布的代码中没有 <form> 标记，因此我假设它们包装了第一个代码块。

以下代码在附加到按钮时显示当前选择的选项。不禁想知道您是如何获得所选选项的，同样重要的是，您正在使用它做什么。

JS：

```
function showCurrent(inputName)
{
    var inputList = document.getElementsByTagName('input');
    var numRadios = 0, i, n = inputList.length;
    var value = null;

    for (i=0; i<n; i++)
    {
        if ( (inputList[i].getAttribute('type') == 'radio') && (inputList[i].getAttribute('name') == inputName) )
        {
            numRadios++;
            if (inputList[i].checked)
                value = inputList[i].getAttribute('value');
        }
    }
    alert("Num radios in the '"+ inputName + "' group: " + numRadios + ", value=" + value);
} 
```

HTML：

```
<input type='button' value='getCurValue' onclick='showCurrent("route");'/> 
```

FWIW：在表单提交时向 php 传递一些东西需要在 html 代码中命名元素的技巧。即 html 中的名称必须包含数组访问运算符 []。例如，<option> 元素需要以这种方式命名。我没有理由以这种方式传递单选按钮值，所以不知道它们是否工作相同 - 或者更具体地说，如果这与您的问题有任何相关性。

一个例子：

```
<form action='testCombo.php'>
        <select name='test[]' multiple='multiple'>
            <option value='1'>a</option>
            <option value='2'>b</option>
            <option value='3'>c</option>
            <option value='4'>d</option>
        </select>
        <input type='submit' value='submit'/>
    </form> 
```

# css - 选择在 Firefox 中被视为链接的菜单选项

> ID：13215197
> 
> 赞同：2
> 
> 时间：2012-11-04T01:24:36.210
> 
> 标签：css, firefox, drop-down-menu

我有一个普通的 html 选择菜单。Firefox 将选项视为链接，但 IE 不会。这意味着我在悬停时更改链接的 CSS 代码弄乱了 Firefox 中的选择菜单。我怎样才能阻止这个？

简化的选择菜单是：

```
<Select name='country' onchange='this.form.submit()'>
<option selected value='1'>USA</option>
<option value='2'>UK</option>
</Select> 
```

简化的 CSS 是：

```
#rightnavigation {
font: 12pt Arial,geneva,sans-serif;
}
#rightnavigation :link {color: green; font: 10pt Arial,geneva,sans-serif;}
#rightnavigation :visited {color: red; font: 10pt Arial,geneva,sans-serif;}
#rightnavigation :hover {color: orange; font: 10pt Arial,geneva,sans-serif;} 
```

当我将鼠标移到菜单上时，所有选项都调整为字体 10 并在 Firefox 中变为橙色，而不是像在 IE 中那样保持黑色。

我尝试创建一个类并将其应用于每个选项，但这仅适用于未选择的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:51:13.190

只需更改您的选择器以仅影响链接：

```
#rightnavigation a:link {color: green; font: 10pt Arial,geneva,sans-serif;}
#rightnavigation a:visited {color: red; font: 10pt Arial,geneva,sans-serif;}
#rightnavigation a:hover {color: orange; font: 10pt Arial,geneva,sans-serif;} 
```

# java - 在 Java 中获取 BufferedImage 部分时出错

> ID：13215198
> 
> 赞同：0
> 
> 时间：2012-11-04T01:25:03.043
> 
> 标签：java, bufferedimage

我正在创建的程序的一部分要求我向用户询问一个字符，将其转换为一个字符串，然后获取缓冲图像的各个部分，其中这些部分是字符/字符串的尺寸。

但是，当我尝试逐节浏览图像时会出现问题。错误发生在图像的第一行部分结束之前，它与越界错误有关，就像我请求的缓冲图像的部分超出了我所拥有的缓冲图像的实际尺寸.

我的代码：

```
for (int i = 0; i < bufferedimageHeight; i += characterHeight) {
  for(int j = 0; j < bufferedimageWidth; j += characterWidth) {
    if (myMethod(mybufferedimage.getSubimage(i, j, characterWidth, characterHeight))) {
      // TODO CODE HERE
    }
  }
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:41:14.487

采用：

```
for (int i = 0; i < bufferedimageHeight-characterHeight; i += characterHeight) {
  for(int j = 0; j < bufferedimageWidth-characterWidth; j += characterWidth) 
```

# find - 如何显示隐藏文件并用 ls 隐藏显示的文件？

> ID：13215200
> 
> 赞同：1
> 
> 时间：2012-11-04T01:25:50.513
> 
> 标签：find, xargs, ls, hidden-files

列出我使用的文件`ls`。我知道如何列出几乎 ( `-A`) 或全部 ( `-a`) 个。但是当我尝试显示隐藏文件并隐藏显示的文件时，我不走运：

```
ls --hide='*' -A 
```

`-A`选项中和`--hide`选项的行为在`ls`.

那么`ls`我可以使用另一种选择吗？- `find`-组合不能是唯一的解决方案，对吧`xargs`？`ls`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T01:25:50.513

确实，使用：

```
ls -A -I'*' 
```

为了简化我日常使用`bash`shell 的命令行体验，我定义了以下相互叠加的别名：

```
alias ls="ls -h --color=auto"
alias lsa="ls -A"
alias lsh="lsa -I'*'"
alias ll="ls -l --time-style=long-iso"
alias lla="ll -A"
alias llh="lla -I'*'"
alias lv="ll -v"
alias lva="lv -A"
alias lvh="lva -I'*'"
alias lt="ll -t"
alias lta="lt -A"
alias lth="lta -I'*'"
alias lr="ll -R"
alias lra="lr -A"
alias lrh="lra -I'*'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T12:29:46.183

仅列出点文件但省略`.`and `..`：

```
alias ldot='ls -ld .??*' 
```

# php - FancyBox 和从 fancybox 退出时自动加载文件

> ID：13215203
> 
> 赞同：1
> 
> 时间：2012-11-04T01:25:56.943
> 
> 标签：php, jquery, mysql, fancybox

我正在尝试编写一个代码，在用户单击在幻想框内找到的选项之一后，文本将出现在可以在幻想框外看到的 div 中（选择一个选项后，幻想框将关闭）

这是我的代码

索引.php

```
<?php
session_start();
include('connect.php');
include('header.php');
?>

<body>
<a href="selectfield.php" id="selectfield" class="fancybox.iframe" rel="group">Field</a>: 
<span id="selectedfield_label"></span>
</body>
</html> 
```

选择字段.php

```
<?php
include('connect.php');
include('header.php');
?>

</head>
<body>
<div class="row">
<div class="span12">
<?php
$searchcol = mysql_query("SELECT * from searchcolumn");
while($search = mysql_fetch_array($searchcol)){ ?>
<div class="span2" style="font-size:10px">
<a href="#" id="<?php echo $search['scol_id']; ?>" class="field" name="<?php echo $search['scol_id']; ?>"><?php echo $search['advsearch_name']; ?></a>
</div>
<?php
}
?>
</div>

</body>
</html> 
```

脚本.js

```
$(document).ready(function(){

$("#selectfield").fancybox();
$("#selectcondition").fancybox();

$(".field").click(function(e) {
    var id = this.id;
    var name = $("#" + id).attr("name");
    var datastr='field='+name;
        $.ajax({
            url:'storefield.php',
            type:"POST",
            data:datastr,
            dataType:"json",
            success:function(result){
                $("#selectedfield_label").html(result['field']['fieldname']);
                parent.$.fancybox.close(true);
                }//success          
        });//ajax   
    });     
}); 
```

storefield.php

```
<?php
session_start();
include('connect.php');
$scol_id=$_POST['field'];

$query = mysql_query("SELECT * from searchcolumn where scol_id = $scol_id");
$a = mysql_fetch_array($query);

$_SESSION['fieldname'] = $a['advsearch_name'];
$_SESSION['col'] = $a['advsearch_col'];
$_SESSION['type'] = $a['advsearch_type'];

$result['field']['fieldname'] = $_SESSION['fieldname'];
$result['field']['col'] = $_SESSION['col'];
$result['field']['type'] = $_SESSION['type'];

echo json_encode($result);
?> 
```

我能够在选择一个选项时关闭fancybox，但我无法让它的名称（$result['field']['fieldname']）出现在我的fancybox外部的div内

我已经尝试过不同的组合，但我无法让它工作

提前致谢

这是一个示例 sql 数据

```
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Title','title','varchar');
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Last Name','ln','varchar');
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('First Name','fn','varchar');
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Middle Name','mn','varchar');
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Gender','gender','varchar');
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Age','age','varchar');
INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Birthdate','bday','date'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:36:00.170

您的幻想框可能在 iframe 中，因此您必须使用父页面找到要在其中写入结果的 div

```
parent.$("#selectedfield_label").html(result['field']['fieldname']); 
```

# java - 是否可以对非捕获组进行反向引用？

> ID：13215206
> 
> 赞同：2
> 
> 时间：2012-11-04T01:26:13.400
> 
> 标签：java, regex, backreference

我正在尝试创建一个正则表达式/替换对来使用`replaceAll()`它将捕获目标字符串之前和之后的字符。

这是我的版本，适用于简单的情况：

```
String adjacent = "fooaXbcXdbar".replaceAll(".*?(.)X(.).*?(?=(.X)|$)", "$1$2"); 
```

根据需要产生`"abcd"`（最后的展望是消耗到字符串的末尾，使单个调用`replaceAll()`起作用）。

但是，当目标之后的字符也是目标之前的字符时，我似乎无法解决一个边缘情况：

```
String adjacent = "fooaXbXdbar".replaceAll(".*?(.)X(.).*?(?=(.X)|$)", "$1$2"); 
```

生产`"ab"`，但我想`"abbd"`。正则表达式消耗了匹配的前导部分，使以下输入不匹配。

我试过环顾四周，但似乎无法让它工作。

注意：我对涉及循环或代码等的解决方案不感兴趣。只是寻找适用于提到的边缘情况的正则表达式和替换字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:38:04.927

这个怎么样：

```
String adjacent =
    "fooaXbXdbar".replaceAll(".*?(.)X(?:(?=(.)X)|(.).*?(?=.X|$))", "$1$2$3"); 
```

?

它所做的是，在 之后`X`，它首先检查它是否紧跟在 之后`.X`，在这种情况下，它会捕获`.`as`$2`并认为匹配完成；如果它发现它*没有*立即跟随`.X`，它会继续使用您已经使用的相同逻辑，将后续字符捕获为`$3`.

（注意：我已经用你的两个例子对此进行了测试，但显然它可能会错过你需要支持的其他情况。我建议你也自己测试一下。）

# apache - 使用 apache wicket 中的自定义验证框架/对象处理反馈消息

> ID：13215209
> 
> 赞同：0
> 
> 时间：2012-11-04T01:26:30.283
> 
> 标签：apache, validation, error-handling, wicket

我正在使用自己的验证，但是应该在检票口中突出显示或自定义表单的视图（例如，如果组件无效）...

所以例如我有我的检票表格

```
<form wicket:id="inputForm">
         <p>
             <label for="Recipient">Recipient</label>
             <input wicket:id="Recipient" id="Recipient" type="text" size="40"/>
         </p>
         <p>
             <label for="Details">Details</label>
             <input wicket:id="Details" id="Details" type="text" size="40"/>
         </p>
</form> 
```

然后我有我的 Form.java：在这里我设置我的 Java 对象“发票”的值并使用**onValidateModelObjects**来覆盖检票口验证并使用我自己的验证......这个方法只是调用一个简单的自己创建的 ValidatorObject 来处理验证...

```
public InvoiceForm() {
    ...

    Form<Invoice> form = new Form("inputForm", formModel) {
        /*
         * Validation takes place here
         */
        @Override
        public void onValidateModelObjects() {
            ValidationProcess vp = new ValidationProcess();
            vp.validate("Rules.js", r);
            msg = "";
            if (vp.getConstraintViolations().size() > 0) {

                for (String s : vp.getConstraintViolations()) {
                    msg = msg + s;
                }
            } else {
                msg = "no errors.";
            }
        }
    };

    //adding Textfields to the Form etc...

...
} 
```

我需要什么：上面你可以看到我的错误消息将被保存到 msg 字符串中！现在我想要的是 Wicket 获取此字符串并将其应用于 Wicket FeedBackMessage 系统，或者......

1.  我需要获取此刻将要渲染的组件...
2.  我必须将此组件的错误消息设置为我的组件...

我怎样才能做到这一点？

我想我需要重写一些方法，但我不知道哪些方法和在哪里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:25:50.787

有一个特殊的组件，[FeedbackPanel](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/panel/FeedbackPanel.html)，它在页面上显示验证和提交错误。因此，将 FeedbackPanel 添加到带有表单的页面。

然后[Form.error()](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/form/Form.html#error%28java.lang.String,%20java.util.Map%29)方法为该组件注册一条错误反馈消息，以显示在 FeedbackPanel 上。例如，

```
 @Override
    public void onValidateModelObjects() {
        ValidationProcess vp = new ValidationProcess();
        vp.validate("Rules.js", r);
        if (vp.getConstraintViolations().size() > 0) {
            msg = "";
            for (String s : vp.getConstraintViolations()) {
                msg = msg + s;
            }
        } else {
            msg = "no errors.";
        }
        error(msg, null);
    } 
```

另请注意，您可以使用[Form.add()方法定义](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/form/Form.html#add%28org.apache.wicket.markup.html.form.validation.IFormValidator%29)[IFormValidator](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/form/validation/IFormValidator.html)的实现并将其附加到表单以执行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:20:02.197

我让它使用以下代码：

```
...
//Textfields or Form Components GO HERE...

        @Override
        public void onValidateModelObjects() {
            ValidationProcess vp = new ValidationProcess();
            vp.validate("Rules.js", r);
            msg = "";
            if (vp.getConstraintViolations().size() > 0) {

                for (String s : vp.getConstraintViolations()) {
                    if (s.contains(";")) {
                        String[] splitted = s.split(";");
                        String elementname = splitted[0];
                        String errorMessage = splitted[1];

                        if (elementname.equals("price")) {
                            //SET Error of Component 
                            price.error(elementname + " " + errorMessage + ". ");
                          } else if (elementname.equals("recipient")) {
                            recipient.error(elementname + " " + errorMessage);
                        }
                    }
                }
            }
        }

//Rest of the Code 
```

# objective-c - AVAudioplayer 在 UIWebView 播放嵌入视频时继续播放声音

> ID：13215212
> 
> 赞同：1
> 
> 时间：2012-11-04T01:27:06.340
> 
> 标签：objective-c, ios6, avaudioplayer, xcode4.5

当我在我的应用程序内的 uiwebview 中播放嵌入式视频时，我遇到 mu AVAudioplayer 继续播放声音的问题。

如果我从 Safari 播放视频，它可以正常工作，我的应用程序中的音频将淡出然后停止播放来自 Safari 的视频。

任何建议表示赞赏:)

Xcode 4.5，iOS 6

谢谢

# .htaccess - 如何配置电子标签？

> ID：13215213
> 
> 赞同：7
> 
> 时间：2012-11-04T01:27:11.797
> 
> 标签：.htaccess, etag, litespeed

使用 ySlow，它建议我使用 eTags。在今天之前我从未听说过他们。现在的问题是，如何配置 eTag？

我刚刚花了最后 2 个小时试图弄清楚这一点。我尝试将各种推荐的脚本添加到我的 .htaccess 文件中，但没有成功。ySlow 一直在抱怨……

我的网站是 litespeed 网络服务器上的安全网站 (https)。我看到有人说您无法在 litespeed Web 服务器上配置 eTag。这是真的？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-12T18:27:42.030

或者，我不知道...正确设置它们，而不需要使它们成为服务器独有的部分。

`FileETag MTime Size`

我知道告诉人们不要打扰更容易。但是有*很多*关于 ETags 的错误信息。它们并不完美，但如果配置正确，它们会很方便。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T06:15:58.180

注（2021-05-14）：

虽然从历史上看，禁用 ETags 有一些正当的理由——主要是由雅虎从服务器场提供服务，并且无法在所有服务器上正确实施 ETags——**默认情况下不应禁用 ETags，**而且雅虎的问题可能不适用于您。

* * *

我认为您应该*禁用*ETag，而不是打开它们。

试试这个：

```
Header unset Pragma
Header unset ETag
FileETag None 
```

参考：

[如何使用 htaccess 关闭 Etag？](https://stackoverflow.com/questions/5705441/how-to-off-etag-with-htaccess)

[http://davidwalsh.name/yslow-htaccess](http://davidwalsh.name/yslow-htaccess)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-26T22:23:50.580

# 用于配置ETag`.htaccess`响应

OP 专门询问有关在[Litespeed Web 服务器](https://www.litespeedtech.com/)上配置 etags 的问题，但是`.htaccess`可以在任何地方使用，[方法](https://httpd.apache.org/docs/2.4/mod/core.html#FileETag) *应该*保持不变。

## 简单的

```
FileETag All 
```

这将为所有文件设置响应 etag，由所有三个可能的组件计算得出：

> **INode**
> 将包含文件的[i-node 编号](https://en.wikipedia.org/wiki/Inode)
> **MTime**将包含
> 文件最后修改的日期和时间
> **Size**
> 将包含文件中的字节数

*即*设置

> **全部**
> 将使用所有可用字段。这相当于：
> `FileETag INode MTime Size`

*例如*，我们的回应可能类似于`ETag:"a020a81-1dd-55073fdbf86fe"`

## 具体的

`FileETag INode`,
`FileETag MTime`,
`FileETag Size`,
`FileETag INode MTime`,
`FileETag INode Size`或
`FileETag MTime Size`也可以设置。

## 省略

```
FileETag None 
```

> **无**
> 如果文档是基于文件的，则响应中不会包含 ETag 字段

## 有针对性

Use of [the FilesMatch directive](https://httpd.apache.org/docs/2.4/mod/core.html#FilesMatch) allows us to set different rules for different files.

# java - 输出不覆盖

> ID：13215214
> 
> 赞同：-2
> 
> 时间：2012-11-04T01:27:24.803
> 
> 标签：java, io, overwrite

是否可以在不覆盖以前数据的情况下将文本写入文件？

我一直在做的是：

```
StringBuffer sb = new StringBuffer();
BufferedReader in;
PrintWriter out;

try{
    in = new BufferedReader( new FileReader("somefile.txt"));
    out = new PrintWriter( new FileWriter("somefile.txt"));

    String input = "";
    while(input != null){
        sb.append(input + "\n");
        input = in.readLine();
    }
    in.close()

    out.print(sb.toString());

    // now start doing what I want. 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:29:24.757

查看[FileWriter API](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)。有一个接受布尔参数的构造函数——您可能希望使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T01:29:33.040

您可以使用附加模式`FileWriter`来避免覆盖现有数据：

```
new PrintWriter( new FileWriter("somefile.txt", true)); 
```

# python - Python Tkinter 动画

> ID：13215215
> 
> 赞同：5
> 
> 时间：2012-11-04T01:27:39.500
> 
> 标签：python, animation, python-2.7, tkinter

为什么动画不起作用？当我运行程序时，形状不会移动。

```
from Tkinter import *
import time

class alien(object):
     def __init__(self):
        self.root = Tk()
        self.canvas = Canvas(self.root, width=400, height = 400)
        self.canvas.pack()
        alien1 = self.canvas.create_oval(20, 260, 120, 360, outline='white',         fill='blue')
        alien2 = self.canvas.create_oval(2, 2, 40, 40, outline='white', fill='red')
        self.canvas.pack()
        self.root.mainloop()

     def animation(self):
        track = 0
        while True:
        x = 5
        y = 0
        if track == 0:
           for i in range(0,51):
                self.time.sleep(0.025)
                self.canvas.move(alien1, x, y)
                self.canvas.move(alien2, x, y)
                self.canvas.update()
           track = 1
           print "check"

        else:
           for i in range(0,51):
                self.time.sleep(0.025)
                self.canvas.move(alien1, -x, y)
                self.canvas.move(alien2, -x, y)
                self.canvas.update()
           track = 0
        print track

alien() 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-04T02:35:21.153

您的`animation`方法中有一个`while True`永不中断的循环。这在 GUI 程序中是一个禁忌，因为从不返回，它会阻止 GUI 的事件循环处理事件。因此，例如，如果您有一个菜单，那么用户将无法选择任何菜单项。`animation`除了您在方法中实施的任何操作外，GUI 将显示为冻结状态。

这是对@Tim 代码的轻微修改，它通过删除`while`循环并在返回前简单地移动外星人一步来解决这个问题。`self.master.after`在方法结束时调用，`animation`让事件循环在短暂的暂停后再次调用动画。

* * *

```
import tkinter as tk
import time

class Alien(object):
    def __init__(self, canvas, *args, **kwargs):
        self.canvas = canvas
        self.id = canvas.create_oval(*args, **kwargs)
        self.vx = 5
        self.vy = 0

    def move(self):
        x1, y1, x2, y2 = self.canvas.bbox(self.id)
        if x2 > 400:
            self.vx = -5
        if x1 < 0:
            self.vx = 5
        self.canvas.move(self.id, self.vx, self.vy)

class App(object):
    def __init__(self, master, **kwargs):
        self.master = master
        self.canvas = tk.Canvas(self.master, width=400, height=400)
        self.canvas.pack()
        self.aliens = [
            Alien(self.canvas, 20, 260, 120, 360,
                  outline='white', fill='blue'),
            Alien(self.canvas, 2, 2, 40, 40, outline='white', fill='red'),
        ]
        self.canvas.pack()
        self.master.after(0, self.animation)

    def animation(self):
        for alien in self.aliens:
            alien.move()
        self.master.after(12, self.animation)

root = tk.Tk()
app = App(root)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T01:36:53.677

您从未调用过该`animation`方法。还有其他几个命名问题。

```
# Assuming Python 2.x
# For Python 3.x support change print -> print(..) and Tkinter to tkinter
from Tkinter import *
import time

class alien(object):
     def __init__(self):
        self.root = Tk()
        self.canvas = Canvas(self.root, width=400, height = 400)
        self.canvas.pack()
        self.alien1 = self.canvas.create_oval(20, 260, 120, 360, outline='white',         fill='blue')
        self.alien2 = self.canvas.create_oval(2, 2, 40, 40, outline='white', fill='red')
        self.canvas.pack()
        self.root.after(0, self.animation)
        self.root.mainloop()

     def animation(self):
        track = 0
        while True:
            x = 5
            y = 0
            if track == 0:
               for i in range(0,51):
                    time.sleep(0.025)
                    self.canvas.move(self.alien1, x, y)
                    self.canvas.move(self.alien2, x, y)
                    self.canvas.update()
               track = 1
               print "check"

            else:
               for i in range(0,51):
                    time.sleep(0.025)
                    self.canvas.move(self.alien1, -x, y)
                    self.canvas.move(self.alien2, -x, y)
                    self.canvas.update()
               track = 0
            print track

alien() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-17T05:49:48.513

这是一种使用循环的方法：

```
from tkinter import * # version 3.x

tk = Tk()

frame = Frame(tk)
canvas = Canvas(frame) # use canvas

frame.pack(fill = BOTH, expand = 1)
canvas.pack(fill = BOTH, expand = 1)

ball = canvas.create_oval(10, 10, 30, 30, tags = 'ball') # create object to animate

def animation(x_move, y_move):
    canvas.move(ball, x_move, y_move) # movement
    canvas.update()
    canvas.after(20) # milliseconds in wait time, this is 50 fps

    tk.after_idle(animation, x_move, y_move) # loop variables and animation, these are updatable variables

animation(2, 2) # run animation 
```

可更新变量是在更新时保持不变并且可以再次更新的变量。

# ruby-on-rails - ActiveRecord：相同两个模型之间的多对多和一对多

> ID：13215219
> 
> 赞同：0
> 
> 时间：2012-11-04T01:29:26.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

查看 guides.rubyonrails.com，我看到了自联接的语法：

```
class Employee < ActiveRecord::Base
  has_many :subordinates, :class_name => "Employee",
    :foreign_key => "manager_id"
  belongs_to :manager, :class_name => "Employee"
end 
```

我想做的是更像这样的事情：

```
class Project < ActiveRecord::Base
  has_many :workers, :class_name => "Employee",
    :foreign_key => "manager_id"
  belongs_to :manager, :class_name => "Employee"
end 
```

或者也许我可以多态地定义关系：

```
class Project < ActiveRecord::Base
  belongs_to :manager, :polymorphic => true
  has_many :employees
end

class Employee < ActiveRecord::Base
  has_many :projects, :as => :manager
end 
```

所以我想我正在寻找的关系有点像HABTM，但在拥有和归属之间有一个具体的区别。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:30:03.067

用外行的话来说——一个经理会有很多项目，每个项目会有很多工人。对？如果是这样的话：

```
class Project < ActiveRecord::Base
  belongs_to :manager, :class_name => 'Employee', :foreign_key => 'manager_id'
  has_many :employees
end

class Employee < ActiveRecord::Base
  belongs_to :project
  has_many :managed_projects, :class_name => 'Project', foreign_key => 'manager_id'
  scope :managers, includes(:managed_projects).where('manager_id IS NOT NULL).order('NAME ASC')

end 
```

这将允许员工同时成为项目中的经理和工人（例如多层项目）。

```
#The projects of the first manager (managers sorted by name) 
Employee.managers.first.project

# The workers (Employees) working on the project with id 1
Project.find(1).workers

# The manager (Employee) of the project with id 1
Project.find(1).manager

#Employees that are both Workers and Managers (left as an exercise)
Employee.workers_and_managers 
```

尝试关系的另一种方法是使用 STI（单表继承），其中字段名称“类型”将确定 Employee 是 Worker 还是 Manager（互斥）

```
class Employee < ActiveRecord::Base
  #table Employees includes 'type' field
end

class Worker < Employee
  belongs_to :project
end

class Manager < Employee
  has_many :projects
end 
```

现在 - 你可以这样做：

```
Manager.create(:name => 'John Doe') 
#you don't have to specify type - Rails will take care of it

#Find Projects managed by Employee with id 1
Manager.find(1).projects

#Find the project the Employee with id 2 is working on
Worker.find(2).project

#Find the manager of Project with id 1
Project.find(1).manager

#Find workers of Project with id 1
Project.find(1).worker 
```

# python - Windows7下安装Scrapy

> ID：13215220
> 
> 赞同：2
> 
> 时间：2012-11-04T01:29:30.170
> 
> 标签：python, scrapy

我尝试使用简单安装来安装 Scrapy。我安装了 Cython，它似乎可以工作，我从[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)安装了 libxml2我`cygwinccompiler`在这篇文章[scrapy 安装错误](https://stackoverflow.com/questions/10922967/scrapy-installation-error)之后更改了我仍然收到错误，不知道该怎么做接下来做。我也不知道为什么`Building without Cython`我有 Windows 7 32 位和 Python 2.7

```
C:\Users\t>easy_install -U Scrapy
Searching for Scrapy
Reading http://pypi.python.org/simple/Scrapy/
Reading http://scrapy.org
Best match: scrapy 0.16.1
Processing scrapy-0.16.1-py2.7.egg
scrapy 0.16.1 is already the active version in easy-install.pth
Installing scrapy script to C:\Python27\Scripts
Installing scrapy.bat script to C:\Python27\Scripts

Using c:\python27\lib\site-packages\scrapy-0.16.1-py2.7.egg
Processing dependencies for Scrapy
Searching for lxml
Reading http://pypi.python.org/simple/lxml/
Reading http://codespeak.net/lxml
Best match: lxml 3.0.1
Downloading http://lxml.de/files/lxml-3.0.1.tgz
Processing lxml-3.0.1.tgz
Running lxml-3.0.1\setup.py -q bdist_egg --dist-dir c:\users\t\appdata\lo
cal\temp\easy_install-7mgdch\lxml-3.0.1\egg-dist-tmp-686xm8
Building lxml version 3.0.1.
Building without Cython.
ERROR: 'xslt-config' is not recognized as an internal or external command,
operable program or batch file.

** make sure the development packages of libxml2 and libxslt are installed **

Using build configuration of libxslt
warning: no files found matching '*.txt' under directory 'src\lxml\tests'
In file included from src\lxml\lxml.etree.c:254:0:
c:\users\t\appdata\local\temp\easy_install-7mgdch\lxml-3.0.1\src\lxml\inc
ludes/etree_defs.h:9:31: fatal error: libxml/xmlversion.h: No such file or direc
tory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:24:05.960

不知道你是否已经解决了。我今天遇到了这个问题，我是这样解决的，直接获取 lxml 二进制文件：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)

并且 pip install Scrapy 以某种方式忽略了您已安装并尝试再次构建的事实，因此它将失败。但是，在您运行 pip install 的目录中会有一个“build”目录，在那里找到“Scrapy\setup.py”。

现在在文件底部找到：

setup_args['install_requires'] = ...

并删除 lxml 和 pyopenssl（如果您在 Windows 上工作，您很可能需要直接安装二进制文件，顺便说一句，可以在这里找到：[http](http://slproweb.com/products/Win32OpenSSL.html) ://slproweb.com/products/Win32OpenSSL.html ）

从同一目录再次运行 pip install Scrapy ，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T04:32:12.590

我遇到了同样的问题（Windows 10，Python 2.7.12），这对我有用。我使用“pip install scrapy”而不是“easy_install”。如果你没有为 2.7 安装 pip，这里是[官方文档](https://docs.python.org/2/installing/)。如果这仍然不起作用，您可以尝试按照这些[手动安装说明进行操作](http://www.feedbackward.com/content/scrapy_install.pdf)

# asp.net-mvc - 我的 dotless 无法处理 azure 内部错误

> ID：13215229
> 
> 赞同：0
> 
> 时间：2012-11-04T01:31:43.940
> 
> 标签：asp.net-mvc, azure, dotless

[http://s-projects.cloudapp.net/ProjectManager](http://s-projects.cloudapp.net/ProjectManager)

当我从visual stduio 在我的本地机器上运行该站点时，它可以工作。

我还注意到在查看本地站点的 .less 文件时，所有导入都编译到一个文件中。

在天蓝色

html 中的链接链接到具有以下内容的文件：

```
@import"skin.less";@import"base.less";@import"site.less";@import"style2.less"; 
```

我还发现了以下内容：

```
GET http://s-projects.cloudapp.net/ProjectManager/Content/base.less 500 (Internal Server Error) ProjectManager:13
GET http://s-projects.cloudapp.net/ProjectManager/Content/site.less 500 (Internal Server Error) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:19:48.507

```
 var cssTransformer = new CssTransformer();
        //var jsTransformer = new JsTransformer();
        var nullOrderer = new NullOrderer();
        var css = new Bundle("~/Content/css")
        .Include("~/Content/style.less");
        css.Transforms.Add(cssTransformer);
        css.Orderer = nullOrderer;
        bundles.Add(css);
       // bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/style.less")); 
```

以上作品。

# javascript - 当指针距离浏览器窗口底部 X 个单位时触发鼠标事件

> ID：13215231
> 
> 赞同：2
> 
> 时间：2012-11-04T01:31:51.800
> 
> 标签：javascript, html, css, mouse

好的，我的问题很简单，但我不确定答案是否会是。我有一个固定在浏览器窗口底部的元素。当不需要它时，我想隐藏它（将高度设置为 0px）。当用户的鼠标距离窗口底部（不是文档）距离 X 个单位时，我想再次显示 div。我用谷歌搜索了一下，我能找到的只有当页面滚动到远离底部的 X 个单位时触发事件/执行操作的信息。如果我能指出正确的方向，我不需要如何执行此操作的确切代码。

问题（对于那些没有看到它的人）：
当鼠标指针位于浏览器窗口底部（不是文档）的 X 单位内时，如何触发事件/执行函数？

一些注意事项：
这是针对油脂猴/用户脚本的，因此答案不必适用于 IE。
请不要建议使用图书馆。对于这么小的东西，需要整个库并不是我愿意接受的答案。

**答案：** 以 Kir lvlev 下面的回答为基础（记得给他的回答投票）：

```
// Standards compliant browsers
// if you have an IE solution, post it in the comments and I will add it.
window.addEventListener("mousemove",function(e) {
    // 20 is the number of pixels from the bottom inwhich the action should be preformed
    if ((this.innerHeight - 20) <= e.clientY) {
        //do stuff
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:37:00.180

使用 mousemove 事件处理程序

```
$(window).mousemove(function(e)
{
      //mouse coordinates: e.pageX e.pageY
      //window height $(window).height()
}); 
```

非jquery：

```
window.onmousemove = function(e) {
  //e.clientX e.clientY
  //window.innerHeight
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:56:55.380

查看我为您制作的这个 jsfiddle：j sfiddle.net/Cnhvm/

那里展示了总体思路。您显然想要重新定位 div、更改其大小并移除背景颜色。还要确保它具有的 z-index 值将其置于页面中任何其他内容的顶部。

这是标准的 JavaScript：`onmouseover="hoverOver();"`

如果你想保留你的链接，你可以把它们放在 div 上的一些小块中，做更多的工作。

# objective-c - 编码密码objective-c mac

> ID：13215233
> 
> 赞同：0
> 
> 时间：2012-11-04T01:32:48.297
> 
> 标签：objective-c, macos, encryption, nsstring, passwords

如何在 Mac 上对密码字符串进行编码并将其保存到 Objective-c 中的文件中？像这样的东西：

```
NSString *myPasswordString = [NSString stringWithFormat:@"mypassword"];

//Encode

//Save to Preferences file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:01:19.083

存储密码的更好方法是使用钥匙串。

有一些类使它更容易 - 例如Github 上的[SSKeyChain](https://github.com/soffes/sskeychain)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:47:47.467

```
#import <CommonCrypto/CommonDigest.h>
...
const char *cStr = [myPasswordString UTF8String];
unsigned char result[16];
CC_MD5( cStr, strlen(cStr), result ); // This is the md5 call
NSString *passwordAfterEncrypt = [NSString stringWithFormat:
@"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
result[0], result[1], result[2], result[3],
result[4], result[5], result[6], result[7],
result[8], result[9], result[10], result[11],
result[12], result[13], result[14], result[15]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:50:59.580

您可以按如下方式写入首选项文件：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[settings setObject : myPasswordString forKey : @"mypassword"];
[settings synchronize]; 
```

我不确定您所说的“编码”是什么意思。如果您的意思是“加密”，那么关于 SO 有很多问题：

*   [iPhone 上 NSString 的 AES 加密](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)
*   [使用objective-c加密和解密密码](https://stackoverflow.com/questions/2012289/encrypt-and-decrypt-password-using-objective-c)
*   [如何在 ECB 模式下使用 DES 加密 Objective C 中的 NSString？](https://stackoverflow.com/questions/2512184/how-to-encrypt-an-nsstring-in-objective-c-with-des-in-ecb-mode)

即使有上述情况，您仍然需要仔细考虑安全隐患。如果您存储的密码是使用嵌入在应用程序中的密钥加密的，那么攻击者可能会恢复该密码。

# ios - 如何添加多个定时器的输出

> ID：13215234
> 
> 赞同：1
> 
> 时间：2012-11-04T01:32:51.840
> 
> 标签：ios, nstimeinterval

我的实用程序将有 20 个单独的计时器，布局如下：

```
- (void)updateTimer
{
NSDate *currentDate = [NSDate date];
NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"mm:ss"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
NSString *timeString=[dateFormatter stringFromDate:timerDate];
stopWatchLabel.text = timeString;
[dateFormatter release];
}

- (IBAction)onStartPressed:(id)sender {
startDate = [[NSDate date]retain];

// Create the stop watch timer that fires every 1 s
stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                  target:self
                                                selector:@selector(updateTimer)
                                                userInfo:nil
                                                 repeats:YES];
}

- (IBAction)onStopPressed:(id)sender {
[stopWatchTimer invalidate];
stopWatchTimer = nil;
[self updateTimer];
} 
```

我想将所有时间间隔加在一起，并将它们显示为字符串。我以为这很容易，但我就是无法做到。我需要总结 NSTimeIntervals，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:37:15.000

您可以采取几种方法。一种是创建一个可以查询其状态（正在运行、已停止、未启动……）及其当前时间间隔的计时器类。将所有计时器添加到集合中，例如`NSMutableArray`. 然后，您可以遍历集合中的所有计时器，对于那些停止的计时器，获取其时间间隔，并将它们相加。类的部分标头`MyTimer`：

```
enum TimerState {
    Uninitialized,
    Reset,
    Running,
    Stopped
};

typedef enum TimerState TimerState;

#import <Foundation/Foundation.h>

@interface MyTimer : NSObject

@property (nonatomic) NSTimeInterval timeInterval;
@property (nonatomic) TimerState state;

- (void) reset;
- (void) start;

@end 
```

声明你的数组：

```
#define MAX_TIMER_COUNT 20
NSMutableArray *myTimerArray = [NSMutableArray arrayWithCapacity:MAX_TIMER_COUNT]; 
```

将每个计时器添加到数组中：

```
MyTimer *myTimer = [[MyTimer alloc] init];
[myTimerArray addObject:myTimer]; 
```

在适当的时候，迭代计时器的集合并对计时器的时间间隔求和`Stopped`：

```
NSTimeInterval totalTimeInterval = 0.0;
for (MyTimer *timer in myTimerArray){
    if (timer.state == Stopped) {
        totalTimeInterval += timer.timeInterval;
    }
} 
```

# c# - 在 .net 中处理 pcm wav 流

> ID：13215236
> 
> 赞同：-1
> 
> 时间：2012-11-04T01:33:07.337
> 
> 标签：c#, .net, audio, wav, pcm

我需要处理未压缩 (pcm) 的波 (wav) 文件。作为输入，我在流（System.IO.Stream）中接收到一个 wav。我需要做几件事：

*   从其他声音（wav）的片段中获取新声音（wav）（片段我指的是时间片段）
*   将几个声音片段（短波）合二为一。
*   加快或减慢 wav。

任何人都知道 api、工具包、库、dll 或任何能够在 .net 中执行此操作的东西（C# 中的偏好）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:46:25.267

查看 NAudio。它支持 PCM WAV 播放和录音，我相信你可以用它完成你所需要的，但它可能需要一些工作。

[http://naudio.codeplex.com](http://naudio.codeplex.com)

我相信另一个值得关注的 API 是 Bass Audio Library。我以前从未使用过它，但我读过关于它的好东西：

[http://www.un4seen.com/](http://www.un4seen.com/)

# php - 如何从使用 header() 函数设置的错误代码服务器重定向到默认错误页面？

> ID：13215239
> 
> 赞同：4
> 
> 时间：2012-11-04T01:34:12.930
> 
> 标签：php, apache, redirect, error-handling, http-status-code-404

我想知道是否有可能使**apache服务器从***header() 函数中设置的错误代码*自动重定向到其**默认**错误页面。

 *假设我有我的 page.php，这个页面有这个：

```
<?php header("HTTP/1.1 404 Not Found"); ?> 
```

浏览器（使用 chrome 中的 web 开发工具）显示响应已发送，但未重定向到其默认错误页面，可能是因为文件仍然存在。

*我想做的是自己将特定文件重定向到默认错误页面，但保持浏览器中显示的确切 URL，与您输入不存在的 URL 时服务器执行的操作相同*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:36:46.033

如果我没记错的话，您可以在 httpd.conf 中将 Apache 配置为使用特定的 404 页面，它会保持 URL 相同，但会提供 404 错误页面：

```
ErrorDocument 404 /404.php 
```

在 /404.php 中，只需输入如下内容：

```
<html>
    <head>
        <title>Object not found</title>
    </head>
    <body>
        <h1>Object not found</h1>
        <p>The object <?php echo($_SERVER['PHP_SELF']); ?> could not be found on this server.</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:39:34.037

要获取 HTTP 响应代码，您可以使用[http_response_code()](http://www.php.net/manual/en/function.http-response-code.php)函数。例子：

```
if( http_response_code() == 404 )
{
    // Redirect to your valid custom page
    header("Location: http://www.mypage.com/page_not_found.php" );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T22:55:26.490

重定向到不存在的页面。然后你得到 apache created 404 因为你确实登陆了一个不存在的页面。

这使您可以“决定”谁获得该页面以及谁跳出。当然，如果他们的 Web 客户端中有“nofollow”指令，它就会失败。

我不知道有一种方法可以在那里有一个 php 页面，并且在检查有问题的页面后让 apache 决定 404。它已经放弃了对 PHP 的控制。因此，您可能需要通过偏转到不存在的文件来将请求推送回 apache。您甚至可以变得有趣并重定向到相同的文件名……但以 .html 而不是 php 结尾，如果不存在则 Poof 您会遇到网络浏览器的 404 错误。*

# php - 在 CakePHP 中没有从数据库中获取数据返回

> ID：13215242
> 
> 赞同：0
> 
> 时间：2012-11-04T01:34:45.847
> 
> 标签：php, mysql, cakephp

`$this->Model->find('all')`如果我使用更具体的数据搜索（例如`$this->Model->find('all', array('conditions' => array('Model.column LIKE' => $search))`我可以获得为该搜索返回的一些值但不是所有能够搜索的值），我遇到了一个问题，如果我这样做，我将无法返回任何数据。如果我这样做的示例：`$this->Model->find('all', array('conditions' => array('Model.column LIKE' => 1))`我得到包含指定列的所有行的返回，值为 1。如果我将其更改为 2，那么即使有`Model.column`值为 2 的列，我也会得到一个空返回。这真的让我现在发疯了，因为我已经在蛋糕上建立了很多网站，而且 MySQL 在日志中没有返回任何错误。这是我正在使用的代码以及我的数据库设置：

MySQL 表：

```
CREATE TABLE IF NOT EXISTS `tbl_cleps_subjects` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `subject` int(1) NOT NULL,
  `credits` int(1) NOT NULL,
  `course` varchar(255) NOT NULL,
  `extract` text NOT NULL,
  `factsheet` varchar(255) NOT NULL,
  `study_guide` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=34 ; 
```

模型：

```
class ClepsSubject extends AppModel {

} 
```

控制器：

```
class ClepsController extends AppController {

    public $uses = array('ClepsSubject');

    public function index() {
        $this->set('return', $this->ClepsSubject->find('all'));
    }

} 
```

控制器视图：

```
<?php debug($return); ?> 
```

就像我说的那样，我将头撞在墙上，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-04T01:39:42.880

为 php 尝试 fetch_array 函数[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

# c++ - 调用类没有匹配的函数

> ID：13215245
> 
> 赞同：0
> 
> 时间：2012-11-04T01:35:03.600
> 
> 标签：c++

```
/* 
 * File:   ShapeTwoD.h
 * Author: Administrator
 *
 * Created on October 30, 2012, 12:05 AM
 */

#ifndef SHAPETWOD_H
#define SHAPETWOD_H

#include <string>
#include <math.h>

using namespace std;

struct Point {
    int x, y;
};

class ShapeTwoD {
public:
    ShapeTwoD(string shapename, bool containsWS);

    string getName();
    bool getContainsWarpSpace();
    string toString();

    virtual double computeArea();
    virtual bool isPointInShape(Point P, Point* V, int n);
    virtual bool isPointOnShape(Point A, Point B, Point C, int slope, int intercept, int left, int top, int right, int bottom, int dx, int dy);

    void setName(string shapename);
    void setContainsWarpSpace(bool containsWS);

private:
    string name;
    bool containsWarpSpace;

};

class Cross : public ShapeTwoD {
public:
    Cross(string shapename = "Cross", bool containsWS, int vertices = 12, Point ordinates[]):ShapeTwoD(shapename, containsWS){}
    int getVert();
    void setVert(int vertices);
    Point getOrd();
    void setOrd(Point ordinates[]);
    virtual double computeArea(Point A[], int vertices);

private:
    int vert;
    Point ord[];

};

class Rectangle : public ShapeTwoD {
public:
    Rectangle(string shapename = "Rectangle", bool containsWS, int vertices = 4, Point ordinates[]):ShapeTwoD(shapename, containsWS){}
    int getVert();
    void setVert(int vertices);
    Point getOrd();
    void setOrd(Point ordinates[]);
    virtual double computeArea(Point A, Point B);

private:
    int vert;
    Point ord[];

};

class Square : public ShapeTwoD {
public:
    Square(string shapename = "Square", bool containsWS, int vertices = 4, Point ordinates[]):ShapeTwoD(shapename, containsWS){}
    int getVert();
    void setVert(int vertices);
    Point getOrd();
    void setOrd(Point ordinates[]);
    virtual double computeArea(Point A, Point B);

private:
    int vert;
    Point ord[];

};

#endif  /* SHAPETWOD_H */

/* 
 * File:   ShapeTwoD.cpp
 * Author: Administrator
 * 
 * Created on October 30, 2012, 12:05 AM
 */

#include "ShapeTwoD.h"
#include <sstream>

ShapeTwoD::ShapeTwoD(string shapename, bool containsWS) {

    name = shapename;
    containsWarpSpace = containsWS;

}

string ShapeTwoD::getName() {

    return name;

}

void ShapeTwoD::setName(string shapename) {

    name = shapename;

};

bool ShapeTwoD::getContainsWarpSpace() {

    return containsWarpSpace;

}

void ShapeTwoD::setContainsWarpSpace(bool containsWS) {

    containsWarpSpace = containsWS;

}

string cvtBool(bool b) {

    stringstream ss;
    ss << b;
    return ss.str();

}

string ShapeTwoD::toString() {

    return "Name:\t" + name + "\nSpecial Type:\t" + cvtBool(containsWarpSpace) + "\n";

}

// Formulas gotten from http://www.mathopenref.com/coordpolygonarea.html
// http://softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm
int pointsInShape;
int pointsOnShape;

double ShapeTwoD::computeArea() {

    // Based on Pick's Thorem
    double area = pointsInShape + (pointsOnShape / 2) - 1;
    return area;

}

float isLeft(Point P0, Point P1, Point P2) {

    return ((P1.x - P0.x) * (P2.y - P0.y) - (P2.x - P0.x) * (P1.y - P0.y));

}

bool ShapeTwoD::isPointInShape(Point P, Point* V, int n) {

    //      Input:   P = a point,
    //               V[] = vertex points of a polygon V[n+1] with V[n]=V[0]

    int wn = 0; // the winding number counter

    // loop through all edges of the polygon
    for (int i = 0; i < n; i++) { // edge from V[i] to V[i+1]
        if (V[i].y <= P.y) { // start y <= P.y
            if (V[i + 1].y > P.y) // an upward crossing
                if (isLeft(V[i], V[i + 1], P) > 0) // P left of edge
                    ++wn; // have a valid up intersect
        } else { // start y > P.y (no test needed)
            if (V[i + 1].y <= P.y) // a downward crossing
                if (isLeft(V[i], V[i + 1], P) < 0) // P right of edge
                    --wn; // have a valid down intersect
        }
    }

    pointsInShape += wn;

    return true;

}

bool ShapeTwoD::isPointOnShape(Point A, Point B, Point C, int slope, int intercept, int left, int top, int right, int bottom, int dx, int dy) {

    // Linear equation
    dx = B.x - A.x;
    dy = B.y - A.y;

    slope = dy / dx;

    intercept = y1 - slope * A.x;

    if (A.x < B.x) {

        left = A.x;
        right = B.x;

    } else {

        left = B.x;
        right = A.x;

    }
    if (A.y < B.y) {

        top = A.y;
        bottom = B.y;

    } else {

        top = B.y;
        bottom = A.y;

    }

    if (slope * C.x + intercept > (C.y - 0.01) && slope * C.x + intercept < (C.y + 0.01)) {

        if (C.x >= left && C.x <= right && C.y >= top && C.y <= bottom) {

            pointsOnShape++;
            return true;

        }

    }

}

Cross::Cross(string shapename, bool containsWS, int vertices = 12, Point ordinates[]):ShapeTwoD(shapename, containsWS) {

    vert = vertices;
    ord[] = ordinates[];

}

int Cross::getVert() {

    return vert;

}

void Cross::setVert(int vertices) {

    vert = vertices;

}

Point Cross::getOrd() {

    return ord[];

}

void Cross::setOrd(Point ordinates[]) {

    ord[] = ordinates[];

}

double Cross::computeArea(Point A[], int vertices) {

    /* If you know the coordinates of the vertices of a polygon, this algorithm can be used to find the area.
     * Parameters
     * X, Y Arrays of the x and y coordinates of the vertices, traced in a clockwise direction, starting at any vertex. If you trace them counterclockwise, the result will be correct but have a negative sign.
     * numPoints    The number of vertices
     * Returns   the area of the polygon
     */

    double area = 0;

    int j = vertices - 1; // The last vertex is the 'previous' one to the first

    for (int i = 0; i < vertices; i++) {

        area = (area + (A[j].x + A[i].x) *  (A[j].y - A[i].y))/2;
        j = i;

    }

    return area;

}

Rectangle::Rectangle(string shapename, bool containsWS, int vertices = 4, Point ordinates[]):ShapeTwoD(shapename, containsWS) {

    vert = vertices;
    ord[] = ordinates[];

}

int Rectangle::getVert() {

    return vert;

}

void Rectangle::setVert(int vertices) {

    vert = vertices;

}

void Rectangle::getOrd() {

    return ord[];

}

void Rectangle::setOrd(Point ordinates[]) {

    ord[] = ordinates[];

}

double Rectangle::computeArea(Point A, Point B, Point C) {

    double length = sqrt(pow((A.x - B.x), 2) + pow((A.y - B.y), 2));
    double width = sqrt(pow((B.x - C.x), 2) + pow((B.y - C.y), 2));
    double area = length * width;

    return area;

}

Square::Square(string shapename, bool containsWS, int vertices, Point ordinates[]):ShapeTwoD(shapename, containsWS) {

    vert = vertices;
    ord[] = ordinates[];

}

int Square::getVert() {

    return vert;

}

void Square::setVert(int vertices) {

    vert = vertices;

}

void Square::getOrd() {

    return ord[];

}

void Square::setOrd(Point ordinates[]) {

    ord[] = ordinates[];

}

double Square::computeArea(Point A, Point B) {

    double length = sqrt(pow((A.x - B.x), 2) + pow((A.y - B.y), 2));
    double area = pow(length, 2);

    return area;

}

/* 
 * File:   Assn2.cpp
 * Author: Administrator
 *
 * Created on October 29, 2012, 11:58 PM
 */

#include "ShapeTwoD.h"
#include <iostream>
#include <math.h>
#include <string>
#include <vector>

using namespace std;

// Global declarations
void menu(), option1(), option2(), option3(), option4();
int choice, vert;
string shape, special;
double area;
bool containsWS;
vector<ShapeTwoD> stdv;

int main() {

    cout << "Welcome to Assn2 program!\n\n";

    // When user enters 5 as input, the program quits
    while (choice != 5) {

        menu();

        /* switch evaluates expression and checks if it is equivalent to constant1,
         * if it is, it executes group of statements 1 until it finds the break statement.
         * When it finds this break statement the program jumps to the end of the switch selective structure.
         * If expression was not equal to constant1 it will be checked against constant2.
         * If it is equal to this, it will execute group of statements 2 until a break keyword is found,
         * and then will jump to the end of the switch selective structure.
         */
        switch (choice) {

            case 1:
                option1();
                break;
            case 2:
                option2();
                break;
            case 3:
                option3();
                break;
            case 4:
                option4();
                break;

        }

    }
}

void menu() {

    cout << "1)         Input sensor data\n";
    cout << "2)         Compute area (for all records)\n";
    cout << "3)         Print shapes report\n";
    cout << "4)         Sort shape data\n";
    cout << "5)         Quit\n\n";

    cout << "Please enter your choice: ";

    cin >> choice;
    cout << "\n";

}

void option1() {

    cout << "[ Input sensor data ]\n";

    cout << "Please enter name of Shape (Cross, Rectangle or Square): ";
    cin >> shape;

    cout << "Please enter Special type (NS or WS): ";
    cin >> special;

    if (special == "WS") {

        containsWS = true;

    }

    else {

        containsWS = false;

    }

    if (shape == "Cross") {

        vert = 12;

        for (int v = 0; v < vert; v++) {

            Point ordinates[v];

            cout << "Please enter x-ordinate of pt. " << (v+1) << ":";
            cin >> ordinates[v].x;

            cout << "Please enter y-ordinate of pt. " << (v+1) << ":";
            cin >> ordinates[v].y;

            Cross cross(shape, containsWS, vert, ordinates[v]);

            stdv.push_back(cross);
        }

    }

    if (shape == "Rectangle") {

        vert = 4;

        for (int v = 0; v < vert; v++) {

            Point ordinates[v];

            cout << "Please enter x-ordinate of pt. " << (v+1) << ":";
            cin >> ordinates[v].x;

            cout << "Please enter y-ordinate of pt. " << (v+1) << ":";
            cin >> ordinates[v].y;

            Rectangle rectangle(shape, containsWS, vert, ordinates[v]);

            stdv.push_back(rectangle);
        }

    }

    else {

        shape = "Square";

        vert = 4;

        for (int v = 0; v < vert; v++) {

            Point ordinates[v];

            cout << "Please enter x-ordinate of pt. " << (v+1) << ":";
            cin >> ordinates[v].x;

            cout << "Please enter y-ordinate of pt. " << (v+1) << ":";
            cin >> ordinates[v].y;

            Square square(shape, containsWS, vert, ordinates[v]);

            stdv.push_back(square);
        }

    }

    cout << "Record successfully stored. Going back to main menu";

}

void option2() {

    if (stdv.size() != 0) {

        for (int count = 0; count < stdv.size(); count++) {

            area = stdv.at(count).computeArea();
            //Debugging purpose
            cout << (count+1) << ")" << stdv.at(count).getName() << "\t" << area;
        }

        cout << "Computation completed! (" << stdv.size() << " records were updated)\n\n";

    }

} 
```

在这里，我试图将 struct Point 的数组插入到我的类构造函数（Cross、Rectangle、Square）中。但它给我带来了一些我并没有真正理解的错误。

*   Assn2.cpp:113: 错误: 没有匹配函数调用'Cross::Cross(std::string&, bool&, int&, Point&)'
*   ShapeTwoD.h:41：注意：候选者是：Cross::Cross(const Cross&)
*   ShapeTwoD.h:43: 注意: Cross::Cross(std::string, bool, int, Point*)
*   Assn2.cpp:136: 错误: 没有匹配函数调用 `Rectangle::Rectangle(std::string&, bool&, int&, Point&)
*   ShapeTwoD.h:56：注意：候选者是：Rectangle::Rectangle(const
    Rectangle&)
*   ShapeTwoD.h:58: 注意: Rectangle::Rectangle(std::string, bool, int, Point*)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:40:29.400

您的函数声明甚至不会编译，具有默认值的参数不能在没有默认值的参数的前面：

```
Cross(string shapename = "Cross", bool containsWS, int vertices = 12, Point ordinates[])
Rectangle(string shapename = "Rectangle", bool containsWS, int vertices = 4, Point ordinates[]):ShapeTwoD(shapename, containsWS){}
Square(string shapename = "Square", bool containsWS, int vertices = 4, Point ordinates[]):ShapeTwoD(shapename, containsWS){} 
```

您可以使所有参数都具有所有默认值或更改顺序，例如下面是有效的函数声明：

```
 Cross(bool containsWS, Point ordinates[], string shapename = "Cross", int vertices = 12) 
```

# r - 计算每月纽约证券交易所交易日的函数

> ID：13215246
> 
> 赞同：3
> 
> 时间：2012-11-04T01:35:27.580
> 
> 标签：r

希望有人可以提供一个给定日期的函数，它将返回纽约证券交易所月份的交易日。

如果考虑到假期，那是一种奖励，如果不是，我也不会太担心。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T16:17:27.187

我在一个名为的个人包中有一个函数，`TradingDates`它使用[**timeDate**](http://cran.r-project.org/package=timeDate)包中的假日日历来返回指定年份中所有交易日的日期。我在这篇文章的末尾包含了该函数的代码以及函数 `PrevTradingDate`，`NextTradingDate`这是该 `TradingDates`函数的动机。

获取该代码后，很容易创建一个函数，该函数将返回给定日期所在月份的哪个交易日。目前，输入日期必须是（单个）交易日期，但可以根据您的偏好轻松更改。

```
TradingDayOfMonth <- function(Date, FUN=holidayNYSE, ...) {
  if (length(Date) > 1) stop('not vectorized; Date should be length 1')
  Date <- as.Date(Date, ...)
  tdy <- TradingDates(format(Date, "%Y"), FUN=FUN) #trading dates in year
  if (!Date %in% tdy) stop("Date is not a Trading Date")
  tdm <- tdy[format(tdy, "%m") %in% format(Date, "%m")] # trading dates in the same month as "Date"
  which(tdm == Date)
}

R> PrevTradingDate()
[1] "2012-11-02"
R> NextTradingDate()
[1] "2012-11-05"
R> TradingDayOfMonth(PrevTradingDate())
[1] 2
R> TradingDayOfMonth(NextTradingDate())
[1] 3
R> TradingDayOfMonth('2012-11-15')
[1] 11 
```

* * *

上述工作所需的代码：

```
#' Get Trading Dates for one or more years
#'
#' Get a vector of dates of non-holiday weekdays.
#' 
#' This uses holiday calendar functions (\code{holidayNYSE} by default)
#' from the \emph{timeDate} package.  If \emph{timeDate} is not loaded, it 
#' will be temporarily loaded, then unloaded \code{on.exit}.
#' 
#' @param year vector of 4 digit years or something that is coercible to 
#'   a vector 4 digit years via \code{as.numeric}
#' @param FUN a function that takes a \code{year} argument and returns a vector
#'   that can be coerced to a \code{Date}.  \code{holidayNYSE} by default. Most
#'   likely, this will be one of:  \sQuote{holidayLONDON}, \sQuote{holidayNERC}, 
#'   \sQuote{holidayNYSE}, \sQuote{holidayTSX}, \sQuote{holidayZURICH}
#' @return a vector of all dates in \code{years} that are weekdays and not 
#'   holidays.
#' @author GSee
#' @examples
#' \dontrun{
#' TradingDates(2012)
#' TradingDates(2010:2011)
#' }
#' @export
TradingDates <- function(year=format(Sys.Date(), "%Y"), FUN=holidayNYSE) {
  # the next few lines should be removed when this code is added to a package
  # that Imports timeDate
  if (!"package:timeDate" %in% search()) {
    suppressPackageStartupMessages({ 
      if (!require(timeDate)) {
        stop("timeDate must be installed to use this function.")
      }
    })
    on.exit(detach(package:timeDate, unload=TRUE))
  }
  ## End of code that should be removed when this is added to a package
  year <- as.numeric(year)
  fun <- match.fun(FUN)
  do.call('c', lapply(year, function(y) {
    holidays <- as.Date(fun(year=y))
    all.days <- seq.Date(as.Date(paste(y, '01-01', sep='-')), 
                         as.Date(paste(y, '12-31', sep='-')), by='days')
    nohol <- all.days[!all.days %in% holidays]
    nohol[!format(nohol, '%w') %in% c("6", "0")] #neither holiday nor weekend
  }))
}

#' Get Date of previous (next) trading day
#' 
#' Get the Date of the previous (next) trading day.
#' 
#' For \code{PrevTradingDate}, \code{n} is the number of days to go back. So,
#' if \code{n} is 2 and today is a a Monday, it would return the date of the
#' prior Thursday because that would be 2 trading days ago.
#' \code{n} works analogously in \code{NextTradingDate}.
#'
#' The maximum value that \code{n} can be is the total number of days in the
#' year prior to \code{Date} plus the total number of years in the current 
#' year of \code{Date}.  So, on the last day of the year, the max value of
#' \code{n} will usually be \code{504} (because most years have 252 trading 
#' days).  One the first day of the year, the max value of \code{n} will usually
#' be \code{252}.
#'
#' @param n number of days to go back. 1 is the previous trading day; 2 is the
#'   trading day before that, etc.  \code{n} should be less than 365, but see
#'   details
#' @param Date a \code{Date} or something that can be coerced to a \code{Date}
#' @return \code{PrevTradingDate} returns the date of the previous trading day 
#' up to, but not including, \code{Date}.  \code{NextTradingDate} returns the 
#' date of the next trading day.
#' @author GSee
#' @seealso \code{\link{TradingDates}}
#' @examples
#' \dontrun{
#' PrevTradingDate()
#' PrevTradingDate('2012-01-03')
#' NextTradingDate()
#' NextTradingDate('2012-12-24')
#' }
#' @export
#' @rdname PrevTradingDate
PrevTradingDate <- function(Date=Sys.Date(), n=1) {
  stopifnot(require(xts)) #remove this line when this is added to a package that Imports xts (needed for first/last)
  D <- as.Date(Date)
  y <- as.numeric(format(D, "%Y"))
  trading.days <- TradingDates(y)
  out <- trading.days[trading.days < Date]
  if (length(out) >= n) {
    first(last(out, n))
  } else { 
    prev.year.td <- TradingDates(y - 1)
    max.n <- length(out) + length(prev.year.td)
    if (n > max.n) stop("'n' is too large. Try something less than 252.")
    new.n <- n - length(out) # we need this many trading days from previous year
    # if it's the 1st trading day of the year, return the last trading date of
    # previous year
    first(last(TradingDates(y - 1), new.n))
  } 
}

#' @export
#' @rdname PrevTradingDate
NextTradingDate <- function(Date=Sys.Date(), n=1) {
  stopifnot(require(xts)) #remove this line when this is added to a package that Imports xts (needed for first/last)
  D <- as.Date(Date)
  y <- as.numeric(format(D, "%Y"))
  trading.days <- TradingDates(y)
  out <- trading.days[trading.days > Date]
  if (length(out) >= n) {
    last(first(out, n))
  } else { 
    next.year.td <- TradingDates(y + 1)
    max.n <- length(out) + length(next.year.td)
    new.n <- n - length(out) # how many trading days we need from next year
    if (n > max.n) stop("'n' is too large. Try something less than 252.")
    # if it's the last trading day of the year, return the first trading date of
    # next year
    last(first(TradingDates(y + 1), new.n))
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T02:58:17.210

有一些软件包可以处理繁琐的日历问题，这些包很繁琐。引用自`timeDate`：

“实现工作日、周末和节假日的功能并非易事。在算法意义上并不困难，但实现日历本身的规则可能会变得乏味，例如复活节的日期。”

不过，如果我正确解释了您的问题，那么这样的事情应该可以工作（尽管您可能想考虑一下您想要的结果，如果`myDate`它本身不是交易日......目前它给出了*前一*个交易日的交易日）。

```
library(RQuantLib)

tradingDayOfMonth <- function(myDate, calendar = "UnitedStates/NYSE") {
  FirstOfMonth <- as.Date(paste(year(myDate), month(myDate), "01", sep="/")) 
  businessDaysBetween(calendar, from = FirstOfMonth, to = myDate,
                      includeFirst = 1, includeLast = 1)
}

tradingDayOfMonth(as.Date("2012/11/05"))
# [1] 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T09:10:23.913

因为交易只记录在市场开盘的日子里：

```
TradeDates <- function() {
    # KO is one of the oldest publicly traded companies
    getSymbols("KO", from = as.Date("1973-01-02"), to = Sys.Date())
    TradeDays <- index(KO)
    rm(KO)
    TradeDates
}

TradingDays <- function(TradeDates, year = 2001, month = 5) {
     Date2Month <- function(date)  as.numeric(substring(as.Date(date),6,7))
     Date2Year  <- function(date)  as.numeric(substring(as.Date(date),1,4))
     TradeDates[which(Date2Month(TradeDates) == month & Date2Year(TradeDates) == year)]
}

TradingDays(TradeDates, year = 2001, month = 5) 

# [1] "2001-02-01" "2001-02-02" "2001-02-05" "2001-02-06" "2001-02-07" "2001-02-08"
# [7] "2001-02-09" "2001-02-12" "2001-02-13" "2001-02-14" "2001-02-15" "2001-02-16"
# [13] "2001-02-20" "2001-02-21" "2001-02-22" "2001-02-23" "2001-02-26" "2001-02-27"
# [19] "2001-02-28" 
```

# javascript - 与 live() 一起使用的滑动事件？

> ID：13215257
> 
> 赞同：1
> 
> 时间：2012-11-04T01:37:09.650
> 
> 标签：javascript, jquery

我在页面上有动态加载的元素，但我还需要能够在这些 div 上滑动。

我搜索了 jQuery 滑动事件，并找到[了 touchSwipe](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)。这很好，因为它是跨浏览器，但它不允许我使用`.on()`or `.live()`，因此不考虑动态元素。

这是我的意思的一个例子，[http://jsfiddle.net/wUkZq/](http://jsfiddle.net/wUkZq/)

我可以通过滑动来处理动态元素的唯一方法是将滑动事件附加到父级。问题是，我不希望父母可以滑动。在示例中，如果您使用链接创建一些元素`a`，然后尝试在其中滑动`.content`，它将返回所有元素的文本，这不是我想要的，因为在父项中不应允许滑动。

有没有更好的方法，或者更好的插件？理想情况下，我不想使用插件，而是使用纯 JS，但我找不到一个很好的例子来计算人何时实际滑动而不是其他事件（即滚动）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:48:48.803

如何简单地为每个可滑动元素分配一个特定的类，然后在`swipe`事件处理程序中检查该类？我想，对于这种情况，这是一个很常见的技巧。例如：

```
swipeLeft: function(event, direction, distance, duration, fingerCount) {
  var $target = $(event.target);  
  if (! $target.hasClass('sw')) {
    return false;
  }
  alert($target.text());
} 
```

这是一个说明这个概念的[**JS Fiddle 。**](http://jsfiddle.net/wUkZq/3/)

# c - 在没有对应值的 printf() 中使用格式说明符

> ID：13215259
> 
> 赞同：4
> 
> 时间：2012-11-04T01:37:45.097
> 
> 标签：c, printf, format-specifiers

这是一个快速的问题。

当您在要打印的字符串中使用格式说明符，但未列出要在字符串后面替换占位符的任何值时，您会得到看似随机的数字，例如 2627389、6278253 等作为输出。这是一个例子：

```
printf("%d %d %d"); 
```

输出看起来像：

```
2621244 4352722 1426724 
```

我想知道为什么会发生这种情况，以及这些数字是什么意思。如果你有一个想法，那真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:53:52.017

在大多数情况下，这些数字是“随机”值，恰好位于堆栈或寄存器中，具体取决于处理器。在过去，函数的所有参数都在堆栈上传递，以相反的顺序推送。对于 printf()，第一个参数和最后一个推入的参数将是格式字符串。在您的示例中，堆栈如下所示：

```
sp[0] = "%d %d %d" 
```

printf 将抓取堆栈顶部（格式字符串）并对其进行解析，在更高的堆栈位置抓取其他参数，根据格式字符串对其进行格式化并适当地输出它们。

如果你有一个格式良好的 printf 调用，例如 printf("%d %d %d", 1, 2, 3)，那么堆栈看起来像

```
sp[3] = 3
sp[2] = 2
sp[1] = 1
sp[0] = "%d %d %d" 
```

printf 会做你所期望的：为每个格式说明符获取适当的堆栈位置并适当地格式化它。当您不传递其他参数时，这些堆栈位置中的任何内容都会被输出，因此是“随机”值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:55:55.073

它被称为“未定义的行为”；）

充其量，你会得到垃圾。在最坏的情况下，您实际上可以使程序崩溃。

# mapping - 如何将 MapPolygon 添加到 Windows Phone 8 地图？

> ID：13215261
> 
> 赞同：2
> 
> 时间：2012-11-04T01:38:16.907
> 
> 标签：mapping, windows-phone-8

我最近下载并安装了 Windows 8 操作系统以及 Visual Studio 2012，我正在尝试将我在 Windows Phone 7 上构建的旧项目移植到 WP8。

它有一个最初有一个 MapPolygon 的地图，因此无论何时放大/缩小多边形总是根据缩放级别成比例。

MapPolygon 仍然是使用新地图控件（不是 Bing 地图控件）的有效类，但我不知道如何将其添加到地图以获得相同的功能/属性。

我认为这与 MapElements 有关，它应该允许以下列方式向地图添加形状。

```
 MapPolygon shape = new MapPolygon();

        shape.Path.Add(new GeoCoordinate(55.859185825719055, 2.2946083545684877));
        shape.Path.Add(new GeoCoordinate(55.858185825719055, 2.2956083545684877));
        shape.Path.Add(new GeoCoordinate(55.857185825719055, 2.2946083545684877));
        shape.Path.Add(new GeoCoordinate(55.858185825719055, 2.2936083545684877));
        shape.StrokeThickness = 3;
        shape.StrokeColor = Colors.Blue; 
        shape.FillColor = Colors.Black; 

        map1.MapElements.Add(shape); 
```

地图上什么都没有显示。

我还尝试将 Grid 添加到 MapOverlay 到 MapLayer 到 Map 但我不知道如何/在哪里以这种方式添加 MapPolygon。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:29:55.027

可笑的错误。我的地图没有以地理坐标添加到形状路径的同一位置为中心。

# php - 如何向 LIKE 查询添加更多选项

> ID：13215262
> 
> 赞同：0
> 
> 时间：2012-11-04T01:38:38.170
> 
> 标签：php, mysql, search, search-engine

抱歉标题令人困惑，我是新手，不知道该怎么称呼我的问题。我正在构建（嗯..正在尝试）创建一个商业列表网站，我发现了这个搜索脚本，它从表中获取结果。所以，我粘贴了这个，试过了，它可以工作，但一次只能搜索一个字段，我不能同时搜索两个字段。仅重新调整字段中的数据：“company_name”。但是，我需要使其灵活并将其附加到从字段名称“类别”进行搜索，因此，简而言之，我需要 PHP 来搜索两行，即“公司名称”和“类别”字段。

这是脚本，我不知道如何为其添加附加语法。

```
 $keywords = preg_split('/[\s]+/',$keywords); 
       $total_keywords = count($keywords); 

         foreach($keywords as $key=>$keyword) {
        $where .= "`company_name`  LIKE  '%$keyword%'   ";
        if($key != ($total_keywords - 1)) {
        $where .= " AND ";

    } 
```

问题出在这里：`$where .= "`company_name`LIKE '%$keyword%' ";`

如果您需要在这里查看整个脚本。

```
 function search_clients($keywords){

$returned_results = array();
$where = "";

$keywords = preg_split('/[\s]+/',$keywords);    
$total_keywords = count($keywords); 

foreach($keywords as $key=>$keyword) {
    $where .= "`company_name`  LIKE  '%$keyword%'   ";
    if($key != ($total_keywords - 1)) {
        $where .= " AND ";

    }
}

$results = "SELECT `company_name`, LEFT(`company_details`,150)
    as `company_details`, `category` FROM `clients`
    WHERE $where";
$results_num = ($results = mysql_query($results)) ?  mysql_num_rows($results) : 0 ;

if($results_num === 0) {
    return false; 
} else {

    while($results_row = mysql_fetch_assoc($results)) {

    $returned_results[] = array(

    'company_name'  => $results_row['company_name'],
    'company_details'  => $results_row['company_details'],

    );
}

return $returned_results;

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:48:40.947

这是用PHP写的吗？你也在连接什么类型的数据库？这些信息会很有帮助！有时，不同的数据库可能对查询的结构很挑剔！

无论如何，试试这段代码，看看它是否产生了预期的结果：

```
foreach($keywords as $key=>$keyword) {
    $where .= "(   `company_name`  LIKE  '%$keyword%'   "
           .  " OR `categories`    LIKE  '%$keyword%'  )";
    if($key != ($total_keywords - 1)) {
        $where .= " AND ";

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:48:49.210

在这种情况下，您可以使用带有括号的 OR

```
$where .= "(`company_name`  LIKE  '%$keyword%' OR `category`  LIKE  '%$keyword%')   "; 
```

# java - 并发hashmap java

> ID：13215264
> 
> 赞同：3
> 
> 时间：2012-11-04T01:39:38.263
> 
> 标签：java, concurrency

这似乎是错误的。

```
 static ConcurrentHashMap k; //multiple threads have access to k
         X o = k.get("LL");
         o.a = 6; 
```

如果多个线程同时访问 k，并获取 k("LL")，那么 update (oa = #) 没有 k.put("ll",o)，没有在 'o' 上同步，或者在 'k' 上会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:16:59.650

ConcurrentHashMap 保证获取值是原子的，但它无法控制您对从中获取的值执行的操作。从 ConcurrentHashMap 的角度来看，修改 hashmap 中的值很好，但可能仍然不会产生您想要的行为。为了确保线程安全，您需要准确考虑每个有权访问它的线程的作用。

将值放回 ConcurrentHashMap 似乎是多余的，并且不会使整个操作更安全。您已经在任何同步之外修改对象。

可能需要额外的同步，但如果没有更多上下文，我无法确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:06:57.010

ConcurrentMap 具有保证原子插入/删除和替换键/值对的条件操作。此外，访问 ConcurrentMap 会创建[发生前的](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.5)关系，因此您可以对代码的顺序做出某些保证。

在呈现的代码中，该行：

```
X o = k.get("LL"); 
```

访问键“LL”的当前 X 值。下一行修改 a 属性。在不知道 X 的实现的情况下，这是 Java，所以我们知道这里没有方法调用。*如果*（且仅当）a 属性被标记为 volatile，那么在“LL”处访问 X 的一些后续代码会将 a 值视为 6。如果它不是 volatile，则根本无法保证。他们可能会看到 6，尤其是在 SMP x86 机器上，当时没有多少线程在做很多事情。在生产中，在一个大的 NUMA 盒子上，它们不太可能。可变性带来了各种复杂和困难。

通常，如果您使用不可变的键和值，您会发现更容易推断地图的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T01:44:33.853

简单来说：

```
 o.a=6 
```

是原子操作，所有线程都将竞争，最后一个线程设置它将“获胜”，覆盖该值。

更具体地说，ConcurrentHashMap 只保证键与其关联值之间的链接在处理时会考虑多个线程——即**put 和 get 是原子的**。

这不会阻止任何线程在获得对它的引用后修改该值的属性！

# python - 编写多个 .csv 文件

> ID：13215273
> 
> 赞同：0
> 
> 时间：2012-11-04T01:41:14.313
> 
> 标签：python, csv, operand

我有一本字典，`item_dictionary[0]`对应于`data[0]`，`item_dictionary[1]`对应于`data[1]`。

```
item_dictionary = {'10350':'cat', '560':'dog'}
names = item_dictionary.values()

data = [[1, 2, 3, 4], [5, 6, 7]] 
```

我尝试将项目写入不同的 .csv 文件，如下所示`data[0]`：`data[1]`

```
def writer(item):
    q = data.index(item)    
    myfile = open('%r.csv', 'wb') % names[q]
    wr = csv.writer(myfile)
    wr.writerows(data[q])
    myfile.close()

z = [writer(x) for x in data] 
```

这将返回错误：

> 回溯（最后一次调用）：
> 文件“”，第 1 行，在
> 文件“”中，第 3 行，写入
> 器类型错误：不支持的操作数类型用于 %：'file' 和 'str'`。

我对`'str'`部分错误的猜测是`names[q]`返回，比如说，`'cat'`而不是`cat`. 但是，我不知道要使用什么操作数类型，也不知道如何解决这个`str`问题，所以有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T01:43:38.877

`open('%r.csv', 'wb') % names[q]`应该是`open('%r.csv' % names[q], 'wb')`。

在前一种情况下，您打开一个名为“%r.csv”的文件以二进制模式写入，然后尝试使用`names[q]`. `file`对象不支持模运算符，因此您得到`TypeError`.

在后一种情况下，我们使用模块运算符调用`format`字符串的方法，`%r.csv`从而生成一个传递给`open`函数的字符串。

* * *

顺便说一句，您可能需要考虑另一种将名称与数据关联的方式 - 您*可以*将名称与数据一起存储在元组、字典或类实例中：

```
# Tuples
data = [("cat", [1, 2, 3, 4]), ("dog", [5, 6, 7])]
for name, file_data in data:
    print name, "=>", file_data

# Dictionary (assumes only one instance of name per data point)
data = {"cat": [1, 2, 3, 4], "dog": [5, 6, 7]}
for name, file_data in data.items():
    print name, "=>", file_data

# Class instances (ignore this one if you haven't done any OO before)
# (You don't need it if you don't *know* you need it).
class MyDataType(object):
    def __init__(self, name, data):
        self.name = name
        self.data = data

data = [MyDataType("cat", [1, 2, 3, 4]), MyDataType("dog", [5, 6, 7])]
for data_point in data:
    print data_point.name, "=>", data_point.data 
```

# user-interface - 使用 reactive-banana 处理相互递归的 GUI 小部件

> ID：13215274
> 
> 赞同：8
> 
> 时间：2012-11-04T01:41:19.260
> 
> 标签：user-interface, haskell, frp, reactive-banana

我正在寻找一个库来在 GLFW 和 OpenGL 之上编写一个 GUI。我这样做是因为我对常见的 UI 库绑定感到不满意，我觉得这些绑定过于必要，而且我还希望严格控制我的 UI 的外观和感觉。我想要一种定义 UI 的声明性方法。我正在试验反应香蕉（和暂时反应香蕉wx），看看它是否满足我的需求。我在定义递归小部件时遇到问题。这是我最简单的测试用例：

*   显示计数器的文本小部件。
*   增加计数器的按钮小部件。
*   当计数器为 0 时处于非活动状态（因此它变灰并且根本不响应输入）的按钮小部件，否则处于活动状态并将计数器重置为 0。

第一个和第三个小部件具有递归关系。第一个小部件直观地是从两个按钮提供的事件之一`stepper`。`union`但是，重置按钮是`fmap`计数器的一个，然后事件流依赖于重置按钮！什么是要做？

除了这个问题之外，我还担心事件处理：由于我想在我的代码中处理设备输入和输入焦点，而不是依赖于框架，因此我看到以可扩展方式正确调度事件的困难。理想情况下，我会定义一个`data`封装小部件的层次结构的方法，一种在元素之间安装事件回调的方法，然后编写一个遍历该数据结构的函数，以定义设备输入处理和图形输出。我不确定如何获取事件流并将其拆分，因为可以合并事件流。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T11:33:07.310

允许递归，只要它是 a`Behavior`和 an之间的相互递归`Event`。s的好处`Behavior`是在更新时对它们进行采样将返回旧值。

例如，您的示例可以表示如下

```
eClick1, eClick2 :: Event t ()

bCounter :: Behavior t Int
bCounter = accumB 0 $ mconcat [eIncrement, eReset]

eIncrement = (+1)      <$ eClick1
eReset     = (const 0) <$ whenE ((> 0) <$> bCounter) eClick2 
```

另请参阅问题[“反应香蕉可以处理网络中的循环吗？”](https://stackoverflow.com/questions/7850389/can-reactive-banana-handle-cycles-in-the-network)

* * *

至于您的第二个问题，您似乎正在寻找该功能`filterE`及其表亲`filterApply`和`whenE`？

* * *

至于你的总体目标，我认为它是相当雄心勃勃的。从我迄今为止获得的少量经验来看，在我看来，绑定到现有框架与在 FRP 中制作“干净状态”框架完全不同。最有可能的是，仍然潜伏着一些未被发现（但令人兴奋！）的抽象。我曾经开始编写一个名为[BlackBoard](https://github.com/HeinrichApfelmus/reactive-banana/tree/83465c47498a2031cf1760e2636648c5ef2fb545/BlackBoard)的应用程序，其中包含一个关于时变绘图的很好的抽象。

但是，如果您更关心结果而不是冒险，我会推荐一种保守的方法：以命令式样式创建 GUI 工具包，并在此基础上挂钩 reactive-banana 以获得 FRP 的好处。

如果您只希望使用*任何*GUI，我目前专注于将 Web 浏览器作为 GUI。这里[用姬做一些初步的实验](http://apfelmus.nfshost.com/blog/2012/10/31-frp-ji.html)。wxHaskell 的主要好处是它更容易启动和运行，任何 API 设计工作都将使广大受众受益。

# backbone.js - Backbone.js 使路由器 seo 友好

> ID：13215275
> 
> 赞同：3
> 
> 时间：2012-11-04T01:41:40.513
> 
> 标签：backbone.js, url-rewriting, seo, single-page-application

我是backbone.js 的新手，所以这可能是一个简单的问题。

路由器似乎使用语义上合理的 url，但它们对用户不是很友好。

在我看到的示例中，他们使用：

> local.com/post/id/1

但在 wordpress 中，我会选择将其重写为：

> local.com/2012-11-03-backbone-js-router-question.html

这将通过一个大的重写表运行并转换为正确的控制器/动作。我不想将路由器显眼地暴露给用户。

我对这个问题的最终申请是考虑到电子商务：

*   **cms 页面**local.com/about-us.html
*   **产品页面**local.com/blue-tooth-headset.html
*   **类别页面**local.com/phones.html
*   **产品通过类别页面**local.com/phones/blue-tooth-headset.html

所以我的问题是，**如何在使用backbone.js 时获得漂亮的url？**

**我对选项的看法是：**

1.  您没有获得 seo 友好的网址
2.  你有一些巨大的地图，它必须放在客户端上:(
3.  每次您要更改 url 时，您都会快速 ajax 查找漂亮的 url，并且您需要等待漂亮的 url 在您 pushState 之前返回。
4.  部分以字母为前缀，即 local.com/p/product-name.html 和 p 实际上用于区分哪个路由器，另一个可能是 c 类别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T01:58:54.743

骨干路由几乎可以是任何东西。关于电子商务，您只需要使用冗长的网址：

```
<category>/<product-name>
television/samsung-i178 
```

但是，这并不是你真正应该关心的关于 SEO 的问题。去年“熊猫”更新后，谷歌在 URL 关键字中增加的价值大多较少。

即使未启用 javascript，您真正应该考虑的是在页面上提供后备和内容。但问题在于您可能不想对您的网站进行两次编码：前端模板/分页引擎 + 加上后端的相同内容。

*即将出现的技术将使用 node.js（Mojito、Meteor 等）帮助解决这个问题，但目前它们还不是最稳定的项目。而且，我认为在生产中使用这些可能还为时过早；如果您没有一个真正称职的团队来让您的服务器运行并在需要时调试这些项目。*

无论如何，我的意思是，如果 SEO 在您的项目中占很大比重，请不要使用骨干。

**编辑：** 关于您添加到问题中的内容，我认为这很容易概念化。

在 Backbone 中，您使用可变路由器，如下所示：

```
routes: {
  "product/:url" : "product" 
}

product: function( prettyUrl ) {
  console.log( prettyUrl );

  // Then you fetch your server
  server.fetch( prettyUrl );
} 
```

然后在您的服务器数据库上，您只需通过产品漂亮的 url 获取您的数据库，例如`SELECT * FROM product WHERE prettyurl=$prettyURL`（或类似的东西，自从我使用 mySQL 以来已经很长时间了）。

这样，您不必在客户端保留地图，您只需使用服务器为您提供的漂亮 url 即可获取完整产品。

所以当你调用你的集合时`fetch`，服务器应该返回给你：

```
{
  id: 1,
  name: "Product XYZ",
  prettyUrl: "product-xyz"
},
{
  id: 2,
  name: "Mac Book Pro",
  prettyUrl: "mac-book-pro"
} 
```

这样，每个漂亮的 url 都由他的模型管理，而不是在路由器中。这绝对是管理此类 URL 的方法。这就是任何 Wordpress 或 Drupal 的主要方式。只有他们在后端这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:14:14.177

有一个仅限 HTML5 的解决方案，它允许您在 Backbone 中保持漂亮的 url。

使用 pushState 集初始化 Backbone.history。 [http://documentcloud.github.com/backbone/#History-start](http://documentcloud.github.com/backbone/#History-start)

谨防：

```
If your application is not being served from the root url / of your domain, be sure to tell
History where the root really is, as an option:
Backbone.history.start({pushState: true, root: "/public/search/"}) 
```

然后像这样调用 history.navigate ：

```
navigateToTodo () {
    Backbone.history.navigate('/todos/' + this.model.toJSON().id, {trigger: true});
    return this;
}, 
```

或者只是在整个应用程序中使用传统的 href 链接。

示例和说明： [从 Hashbangs 到 HTML5 PushState](http://zachlendon.github.com/blog/2012/02/21/backbone-dot-js-from-hashbangs-to-pushstate/)

IE [的后备：IE 的后备](https://stackoverflow.com/questions/13253696/backbone-js-pushstates-fallback-for-internet-explorer-not-working)

**编辑：所以过了一段时间，现在我开始解决类似的问题，我想我理解你的问题。您想要的与 Backbone 无关，而是转换如下文本：**

```
"Marissa Mayer can't stop acquiring things" to this "marissa-mayer-can-t-stop-acquiring..." 
```

**您的问题具有误导性，因为您认为 Backbone 正在为您执行此操作，但事实并非如此。所以答案是：你需要的是 Urlify（还有其他的，但在我的经验中没有那么好）。

[https://github.com/aliem/urlify](https://github.com/aliem/urlify)

-我将保留旧答案，因为它似乎对搜索此内容的人有所帮助-

# javascript - VideoJS 事件结束在 Firefox 中启动时触发

> ID：13215277
> 
> 赞同：6
> 
> 时间：2012-11-04T01:41:55.560
> 
> 标签：javascript, css, html, video, html5-video

我正在使用视频 JS，在 Firefox 中，事件“结束”在视频播放结束和开始时被触发。

看看 FF 中的小提琴：http: [//jsfiddle.net/planadecu/a3Chu/](http://jsfiddle.net/planadecu/a3Chu/)

在所有其他浏览器中正常工作。

视频开始时调用的代码如下：

```
var videoPlayer = _V_("video", {}, function(){
  this.addEvent("ended", function(){ 
      this.posterImage.el.style.display = 'block';
  });
});​ 
```

我需要在视频结束时触发一个事件，而不是在开始时。你知道解决这个问题的方法吗（对我来说这是一个错误）？

您可以在提供的小提琴上重现它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:49:35.847

我觉得是你的视频有问题...

看看这个：http: [//jsfiddle.net/a3Chu/2/](http://jsfiddle.net/a3Chu/2/)

我所做的只是删除了这个源文件：

```
<source type="video/webm" src="http://www.reservango.com/static/video/reservango_video_vfinal_CAT.webm"> 
```

我注意到脚本正确触发 - 视频从结尾开始（！）

我尝试使用备用`.webm`文件并且它们表现正常，所以我一直认为这与您的文件有关。

我使用**FF 15.0.1**进行测试

**编辑**

我还在**FF 16.0.2**上对此进行了测试- 特别是似乎仍然是那个视频文件。当然，您可以更改源，以便首先尝试其他格式。我知道`.ogv`如果这`.webm`是我修改的小提琴中的最后一个源项目（上图），我的 FF 将运行。然而，这不会是完全可靠的。我还发现了这个（旧的 FF 版本，但同样的问题）：[https](https://stackoverflow.com/a/10138928/427485) ://stackoverflow.com/a/10138928/427485这表明了相同的方法。

我觉得有些`.webm`文件可以正常工作很奇怪...您可以尝试重新编码视频吗？此外，我会检查您在该服务器上的所有 mime 类型，以防万一它们是错误的并且只有 FF 感到困惑（不会是第一次......）。这也可以解释为什么在`.webm`其他地方托管的 's 渲染得很好。

# c++ - 在另一个函数中使用函数作为参数的错误

> ID：13215279
> 
> 赞同：0
> 
> 时间：2012-11-04T01:42:12.660
> 
> 标签：c++

在 2 天内，我一直在尝试调试这个 C++ 错误数小时，但无法弄清楚或在搜索中找到答案。谁能帮助我解决这个问题？

错误：

```
111:44: error: arithmetic on a pointer to the function type 'double (double, int)'
            return (principal * (pow((effective_rate + 1), years_elapsed)));
                                      ~~~~~~~~~~~~~~ ^ 
```

相关代码：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <cmath>

using namespace std;

using std::ios; 
using std::cin;
using std::cout;
using std::endl;

double effective_rate(double annual_rate, int num_times_compounded=0);
double balance(double annual_rate, double principal, double &years_elapsed, int num_times_compounded=0);

double annual_rate;
int num_times_compounded;
double principal;
double years_elapsed;

int main() {
 //code to get inputs and do printouts
}

double effective_rate(double annual_rate, int num_times_compounded) 
{
    if (num_times_compounded > 0) {
        return (pow((1 + (annual_rate/num_times_compounded)), num_times_compounded) - 1);
    }   else {
        return (pow(e, annual_rate) - 1);
    }
}

double balance(double annual_rate, double principal, double years_elapsed, int num_times_compounded)
{
    if (num_times_compounded > 0) {
[**this is line 111:**] return (principal * (pow((effective_rate + 1), years_elapsed)));
    } else {
        return (principal * (pow( (effective_rate + 1), num_times_compounded) ) );
    }
} 
```

似乎第二个函数没有看到第一个`effective_rate`函数，并且更改为通过引用传递似乎也不起作用。我一定遗漏了一些简单而明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:47:30.460

您需要使用其参数调用该**函数。**如果不使用括号及其参数（如果有的话），就不能调用函数。

```
#include <iostream>
#include <iomanip>
#include <string>
#include <cmath>

double effective_rate(double annual_rate, int num_times_compounded=0);
double balance(double annual_rate, double principal, double years_elapsed, int num_times_compounded=0);

double annual_rate;
int num_times_compounded;
double principal;
double years_elapsed;

int main() {
 //code to get inputs and do printouts
}

double effective_rate(double annual_rate, int num_times_compounded) 
{
    if (num_times_compounded > 0) {
        return (pow((1 + (annual_rate/num_times_compounded)), num_times_compounded) - 1);
    }   else {
        return (pow(e, annual_rate) - 1);
    }
}

double balance(double annual_rate, double principal, double years_elapsed, int num_times_compounded)
{
    if (num_times_compounded > 0) {
        return (principal * (pow((effective_rate(annual_rate, num_times_compounded) + 1), years_elapsed)));
    } else {
        return (principal * (pow((effective_rate(annual_rate, num_times_compounded) + 1), num_times_compounded) ) );
    }
} 
```

这将起作用，但您需要先定义`e`。

此外，您应该尽可能避免使用全局变量。在你的情况下，你有冲突的名字。例如，您将`annual_rate`和定义`num_times_compounded`为全局变量**，并**使用这些非常相同的名称作为函数的参数。在这些情况下将不会使用全局变量。

编辑：哦，最后，您还应该避免使用`using`指令。打字`std::`不需要太多努力，并且可以使您的代码更安全地避免出现愚蠢的错误。

编辑：要回答 OP 的最后一个问题，您可以使用三元条件运算符，但会牺牲可读性。唯一的另一个我可以看到它是通过使用第三个变量来存储三元条件运算的结果，然后使用该变量作为句点来完成的。

```
double balance(double annual_rate, double principal, double years_elapsed, int num_times_compounded)
{
    return (principal * (pow((effective_rate(annual_rate, num_times_compounded) + 1), num_times_compounded > 0 ? years_elapsed : num_times_compounded)));
} 
```

或使用变量.. 可能更清洁。

```
double balance(double annual_rate, double principal, double years_elapsed, int num_times_compounded)
{
    double period = num_times_compounded > 0 ? years_elapsed : num_times_compounded;
    return (principal * (pow((effective_rate(annual_rate, num_times_compounded) + 1), period )));
} 
```

# php - whmcs 为每个客户端选择两个自定义字段值 php mysql

> ID：13215284
> 
> 赞同：2
> 
> 时间：2012-11-04T01:42:35.173
> 
> 标签：php, mysql, whmcs

我正在尝试从客户端表中选择一些用户数据，并从另一个表中选择一些自定义字段值。我的问题似乎是循环遍历结果。我不断在每个自定义值字段中获取重复的客户端行。

这是从不同的表中获取客户端地址详细信息和每个客户端的正确值的 SQL 查询`tblcustomfieldvalues`。

```
SELECT
   tblhosting.userid,
   tblclients.id,
   tblclients.firstname,
   tblclients.city,
   tblclients.state,
   tblclients.country,
   tblclients.postcode,
   tblclients.companyname,
   tblclients.ip,
   tblcustomfields.id,
   tblcustomfields.fieldname,
   tblcustomfieldsvalues.fieldid,
   tblcustomfieldsvalues.value 
FROM tblhosting,tblclients,tblcustomfields,tblcustomfieldsvalues
WHERE tblclients.id IS NOT NULL 
AND tblclients.id = tblhosting.userid 
AND tblcustomfields.id=tblcustomfieldsvalues.fieldid 
AND tblcustomfieldsvalues.relid=tblhosting.id
AND tblcustomfieldsvalues.fieldid between 291 and 292 
```

我的问题是如何从`tblcustomfieldsvalues`每个客户端和`tblclients`地址等获取两行值。

我尝试拆分查询并使用 while 和 forech 循环，但不断从客户端表中获取重复值。或每个客户只有一个自定义字段值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:57:29.220

"SELECT tblhosting.userid,tblclients.id,tblclients.firstname,tblclients.city,tblclients.state,tblclients.country,tblclients.postcode,tblclients.companyname,tblclients.ip,tblcustomfields.id,tblcustomfields.fieldname,tblcustomfieldsvalues.fieldid, tblcustomfieldsvalues.value FROM tblhosting,tblclients,tblcustomfields,tblcustomfieldsvalues"

你的代码看起来很可怕。这对于不了解您的结构的人来说是不可读的。您应该使用同义词和“加入”关键字在表之间进行获取。

* * *

@edit 现在看起来不错。

# php - 在 javascript 中引用 php

> ID：13215286
> 
> 赞同：0
> 
> 时间：2012-11-04T01:43:03.847
> 
> 标签：php, javascript, flot

我正在尝试调用一个 php 代码，该代码从 mysql 表中检索数据并将其填充到一个数组中并在 javascript 中访问它。但是屏幕没有显示任何我知道的内容，我确定 php 在填充数据时没有问题，并且在 javascript 中引用 php 变量我已经包含了该文件，并且该文件仅在我的 Eclipse (juno) 项目中。但是为什么我会遇到这个问题？

请问有什么建议吗？

**示例.jsp**：

```
<div id="placeholder" style="width:600px;height:300px;"></div>
<script type="text/javascript" >
$(function () {
include("db.php");
var dataset1 = "<?php echo json_encode($dataset1); ?>";
$.plot($("#placeholder"), [ dataset1 ]);
}); 
```

**db.php**：

```
<?php header('Content-type: text/javascript'); 
$server = "localhost";
    $user="harish";
    $password="password";  
    $database = "db";
    $connection = mysql_connect($server,$user,$password);
    $db = mysql_select_db($database,$connection);
    $query = "SELECT xval,yval FROM flottable";
    $result = mysql_query($query);        
    while($row = mysql_fetch_assoc($result))
    {
        $dataset1[] = array($row['xval'],$row['yval']);
    }
?> 
```

参考：[http ://www.javascriptkit.com/javatutors/externalphp.shtml](http://www.javascriptkit.com/javatutors/externalphp.shtml)

我也用谷歌搜索发现，如果我将它添加到`.htaccess`文件中，它会起作用。我也试过这个，但没有任何效果。

知道问题是什么吗？

```
AddType application/x-httpd-php .js
AddHandler x-httpd-php5 .js
<FilesMatch "\.(js|php)$">
SetHandler application/x-httpd-php
</FilesMatch> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:54:43.217

好像你忘了设置 include("db.php"); php 左括号之间。

```
<?php include("db.php");?> 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:58:32.387

您的`include()`命令应该在`<?php ... ?>`标签中，并且`json_encode`不需要引号（实际上使用引号会严重破坏您的 JavaScript）。更正这两个错误，您的代码应该可以工作。

# qt - 使用 RestoreGeometry() 将 QDialog 相对于其父级居中

> ID：13215298
> 
> 赞同：0
> 
> 时间：2012-11-04T01:45:39.007
> 
> 标签：qt

我有一个有几个 QDialogs 的程序。大多数是固定大小，但一个是可调整大小的编辑器。编辑器对话框从 QByteArray 中恢复其几何图形。

我遇到的问题是编辑器**没有**正确居中。（仅窗口的 x/y 尺寸）编辑器在实例化时通常出现在左上角。

Editor 类在 MainWindow 中像这样被实例化：

```
Editor e(this);
e.exec(); 
```

出于某种原因，恢复窗口几何图形会破坏编辑器相对于其父级的自动居中。在我今天实现 SaveGeometry 和 RestoreGeomentry 代码之前，编辑器运行良好。

这是 Editor.cpp 中的 SaveGeometry 代码：（它在当前 Editor 对象被销毁之前执行）

```
// Remember current window size
QByteArray geo=saveGeometry();
SettingsManager s;
s.SaveEditorSize(geo); 
```

这是 Editor.cpp 中的恢复代码：（这是设置 UI、分配布局等功能的一部分）

```
if(!Buffer::editor_geometry.isEmpty()){
    restoreGeometry(Buffer::editor_geometry);
} 
```

有谁知道问题是什么？

编辑：实际上，它确实记得上次的位置，只是不会居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:44:38.930

实际上，我想我已经解决了这个问题。

我没有存储整个窗口几何图形，而是尝试将大小存储为 QSize。然后在初始化编辑器时通过 QDialog::Resize() 重新应用大小。窗口会记住它以前的大小*，并*像它应该的那样保持在父级的中心。

# php - 使用 PHP 的 opendir() 时目录路径的正确格式是什么？

> ID：13215303
> 
> 赞同：0
> 
> 时间：2012-11-04T01:46:28.717
> 
> 标签：php, filepath, opendir

使用`opendir()`. 我收到以下警告：

> PHP 警告：opendir(/uploads/users/405/images/profile/profilepic/) [function.opendir]: failed to open dir: No such file or directory in /home/my_folder/public_html/models/photos.php on line 1059

第 1059 行*`photos.php`*有以下内容：

```
if ( ( $handle = opendir( $profile_pic_path ) ) ) { // do stuff } 
```

在哪里：

```
$profile_pic_path = '/uploads/users/405/images/profile/profilepic/'; 
```

我尝试了几种不同的方法，但无法正常工作（我的错误日志中不断收到 PHP 警告消息）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:07:52.837

`/`在路径的开头意味着 - 绝对路径。

你应该使用绝对或相对路径：

```
$profile_pic_path = dirname(__FILE__).'/uploads/users/405/images/profile/profilepic/'; 
```

或者

```
$profile_pic_path = 'uploads/users/405/images/profile/profilepic/'; 
```

如果您的脚本位于上传目录所在的同一目录中，则此方法有效。

如果您的脚本在子目录中（例如 lib/tests/test.php），并且您没有初始化全局 $basepath：

```
$profile_pic_path = dirname(dirname(dirname(__FILE__)))
                    .'/uploads/users/405/images/profile/profilepic/'; 
```

通常在逻辑顶部的某个地方使用全局或常量 basedir（例如在 config/main.php 中）：

```
global $basedir=dirname(dirname((__FILE__)); 
```

# linux - 如何开始使用嵌入式 linux 开发环境

> ID：13215304
> 
> 赞同：0
> 
> 时间：2012-11-04T01:46:41.787
> 
> 标签：linux, windows, embedded

我来自 windows 背景，我精通 .net 平台。为了工作，我需要调出一个定制的嵌入式系统平台。我们购买了 pandaboard ES 作为测试平台。该应用程序是通过 wifi 传输图像。如果您考虑一下，我们正在构建类似于 netgear 路由器的东西 - 唯一的区别是当您登录它提供图像的设备时。

因为我的背景是 Windows，所以我不太清楚如何开始嵌入式 linux 开发。在阅读各种站点时，我得出的结论是，将 linux 作为开发主机是最好的选择。

关于设置，有人能指出我正确的方向吗？我有一台将用于开发目的的 Windows 机器。我可以做一个虚拟盒子或为 linux 设置一个分区。但更精细的细节让我失望..我需要知道的是

1）一旦我安装了linux，我还需要什么其他软件-代码块，2）工具链呢3）如何调试-通过串口？4) 有没有办法将构建的镜像直接发送到CF卡？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:11:14.807

我建议您在台式机或笔记本电脑上安装 linux，也许在虚拟机中。

然后，学习在命令行上编译（程序参数的顺序`gcc`很重要）。

启动一个编辑器，例如`emacs`. 花半小时学习它的教程。

编辑 helloworld.c 文件。

编译它

```
 gcc -Wall -g helloworld.c -o hello 
```

改进它直到没有给出警告。

利用

```
 ./hello 
```

运行它。

学习使用[make](http://www.gnu.org/software/make/)和你自己的`Makefile`.

使用[git 之](http://scm-git.com/)类的版本控制系统。

学习使用交叉编译工具。

### 附加物

另请参阅[我的答案here](https://stackoverflow.com/a/13024567/841108)和[this answer](https://stackoverflow.com/a/13227972/841108)。

交叉编译与原生 Linux 编译没有太大区别，除了交叉编译工具的名称。

但我的感觉是，安装 Linux 并学习在 Linux 上开发 Linux 应用程序将教会你很多针对嵌入式 Linux 系统的交叉开发所需的技能。因此，请阅读有关[高级 Linux 编程](http://advancedlinuxprogramming.com/)和[高级 Unix 编程](http://baseparth.com/aup)的材料。

应该可以通过串口进行[远程调试。](http://sourceware.org/gdb/onlinedocs/gdb/Server.html)

# xcode - 如何在 Xcode 中制作数学方程式？

> ID：13215321
> 
> 赞同：3
> 
> 时间：2012-11-04T01:51:06.013
> 
> 标签：xcode, xcode4, xcode4.2, xcode4.3

我是 Xcode 和 Objective C 的初学者，但我对 C++ 中的 OOP 有一些经验。我买了[这](https://rads.stackoverflow.com/amzn/click/com/067233576X)本书。我阅读了如何制作一个简单的应用程序，并浏览了本书的其余部分。我想做的是制作一个 iPhone 应用程序，人们可以使用它来查找数学方程，例如二次方程、毕达哥拉斯恒等式等。我计划包含很多东西，并且比我拥有的其他应用程序做得更好见过。然而，在我向 Apple 支付 99 美元成为一名成熟的 iOS 开发人员之前，我想知道制作我们在数学书中看到的希腊字母和数学符号并不难。例如，需要什么代码来制作一个显示的 iPhone 应用程序![在此处输入图像描述](../Images/1a9c62d936f2838273226b225e030e22.png). 当然，我想使用我理解的 Xcode 中包含的功能来执行此类操作，而不是使用我的应用程序在需要时使用的另一个程序制作图形。除了那个具体的例子，用于制作我的 iPhone 应用程序将显示的其他数学符号和符号的 Apple 文档在哪里？如果这是一个错误的地方，如果你能告诉我一个更好的地方来发布我的问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:02:09.173

使用核心动画层来构造解析方程的元素。使用 Quartz 绘制线条、符号，用于渲染方程运算的视觉元素。也使用[Core Plot](http://code.google.com/p/core-plot/)。然后最终输出到Latex，一旦解析成分层数据结构。另请查看[Graham Cox 的 GCMathParser](http://www.apptree.net/parser.htm)。

类似问题：[使用 Quartz 2d 绘制公式](https://stackoverflow.com/questions/2907045/drawing-formulas-with-quartz-2d?lq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:03:38.703

使用系统框架获得良好的布局需要大量的写作。所有的构建块都在那里，但是您的程序需要大量的渲染定制才能获得您期望的布局。详细来说，您需要的字符就在那里，但是您需要编写一堆支持代码才能正确调整这些字符的大小、位置和布局。

您可能想寻找一个您可以使用的适当许可的库，该库专门用于此目的。也许 LaTeX 渲染器会提供一些好的线索。

# javascript - 在面向对象的 Javascript 文件上使用 jQuery

> ID：13215322
> 
> 赞同：1
> 
> 时间：2012-11-04T01:51:25.463
> 
> 标签：javascript, jquery, oop

我正在使用面向对象为我的项目创建脚本文件，并且我还使用 jQuery 和 Datatables 等框架/小部件。

我在我的类上创建的公共属性不能从 jQuery 代码执行的函数的内部范围访问。

这是一个示例：

```
 function MyClass() {
        this.MyProperty = '';
    }

    MyClass.prototype.initialize = function() {
            $(document).ready(function(){
            alert(this.MyProperty); // MyProperty is undefined at this point
        }
    }; 
```

我怎样才能解决这个问题？这是拥有可以从类的每个成员访问的属性的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T01:53:41.220

商店`this`：

```
 function MyClass() {
        this.MyProperty = '';
    }

    MyClass.prototype.initialize = function() {
            var that=this;
            $(document).ready(function(){
            // in event handler regardless of jquery this points 
            // on element which fire event. here this === document,
            alert(that.MyProperty); // MyProperty is defined at this point
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:55:58.830

那是因为`this`不指向您的类，而是指向`document`该函数中的。当它指向您的类时，您需要存储它指向的内容：

```
function MyClass() {
    this.MyProperty = '';
}

MyClass.prototype.initialize = function() {
    var myClassInstance=this;
    $(document).ready(function(){
        alert(myClassInstance.MyProperty); // Will contain the property
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:59:26.880

`$.proxy`可以帮助解决这个问题，

```
function MyClass() {
    this.MyProperty = '';
}

MyClass.prototype.initialize = function() {
    $(document).ready($.proxy(function(){
        alert(this.MyProperty);
    },this));
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T02:14:41.833

这与其他的有点不同，但更容易使用。保留在 initialize() 函数本身之外分配“this”上下文的逻辑。您的独特案例可能会使该解决方案无效，但无论如何我都会分享。

```
function MyClass() {
   this.MyProperty = '';
   $(function(){
      this.initialize();
   }.call(this));
}

MyClass.prototype.initialize = function () {
   alert(this.MyProperty);
} 
```

# java - 通过 Weberknecht 连接到 WebSocket 时出现 ArrayIndexOutOfBoundsException

> ID：13215324
> 
> 赞同：0
> 
> 时间：2012-11-04T01:53:09.833
> 
> 标签：java, android, websocket

我正在尝试通过[Weberknecht Java library](http://code.google.com/p/weberknecht/source/browse/#svn/trunk/src/main/de/roderick/weberknecht)连接到 WebSocket 。当 Java 客户端尝试创建连接时，我收到以下错误消息：

```
W/System.err(805): java.lang.ArrayIndexOutOfBoundsException: length=1000; index=1000
W/System.err(805): at ...WebSocketConnection.connect(WebSocketConnection.java:86) 
```

这是导致问题的部分：

```
public void connect() throws WebSocketException {
    try {
        if (connected) {
            throw new WebSocketException("already connected");
        }

        socket = createSocket();
        input = new DataInputStream(socket.getInputStream());
        output = new PrintStream(socket.getOutputStream());

        output.write(handshake.getHandshake());

        boolean handshakeComplete = false;
        int len = 10000;
        byte[] buffer = new byte[len];
        int pos = 0;
        ArrayList<String> handshakeLines = new ArrayList<String>();

        while (!handshakeComplete) {
            int b = input.read();
            buffer[pos] = (byte) b; // THIS LINE CAUSES THE EXCEPTION
            pos += 1;

            if (buffer[pos - 1] == 0x0A && buffer[pos - 2] == 0x0D) {
                String line = new String(buffer, "UTF-8");
                if (line.trim().equals("")) {
                    handshakeComplete = true;
                } else {
                    handshakeLines.add(line.trim());
                }

                buffer = new byte[len];
                pos = 0;
            }
        } 
```

什么可能导致这个问题？是不是这个客户端库可能不符合服务器使用的 WebSocket 版本？

[Weberknecht那边](http://code.google.com/p/weberknecht/issues/detail?id=17)的问题还没有解决。我想在这里问这个问题，因为这似乎是一个相当普遍的问题（读取 WebSocket 标头和握手数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:04:14.243

代码需要检查`-1`input.read() 以表示连接命中 EOF。

此外，我将假设基于相同的代码位，如果握手在`10000`字节之后没有到达，则它是无效的握手。

```
while (!handshakeComplete) {
            int b = input.read();

            if (b == -1)
                throw new WebSocketException ("Connected closed.");                

            if (pos == buffer.length)
                throw new WebSocketException ("Invalid handshake.");

            buffer[pos] = (byte) b; // THIS LINE CAUSES THE EXCEPTION
            pos += 1;

            if (buffer[pos - 1] == 0x0A && buffer[pos - 2] == 0x0D) {
                String line = new String(buffer, "UTF-8");
                if (line.trim().equals("")) {
                    handshakeComplete = true;
                } else {
                    handshakeLines.add(line.trim());
                }

                buffer = new byte[len];
                pos = 0;
            }
        } 
```

**更新**

这是一个更好的实现：

```
public void connect() throws WebSocketException {
    try {
        if (connected) {
            throw new WebSocketException("already connected");
        }

        socket = createSocket();
        input = new DataInputStream(socket.getInputStream());
        output = new PrintStream(socket.getOutputStream());

        output.write(handshake.getHandshake());

        boolean handshakeComplete = false;

        ArrayList<String> handshakeLines = new ArrayList<String>();

        BufferedReader reader = new BufferedReader(input);

        String handshakeData;
        while ((handshakeData = reader.readLine()) != null) {
            if (handshakeData.trim().equals("")) {
               handshakeComplete = true;
               break;
            }
            handshakeLines.add(handshakeData);
        }

        if (!handshakeComplete)
            throw new WebSocketException ("Failed to establish handshake."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:39:13.820

我只是在想，你为什么不使用`int read(byte[] b)`which 为你读取字节。`int read(byte[] b) --> Reads some number of bytes from the contained input stream and stores them into the buffer array b.`

```
 while (!handshakeComplete) {
   int bytesRead = input.read(buffer);//returns number of bytes read
   if(bytesRead  < 10000 || bytesRead == -1 ||
      (buffer[bytesRead - 1] == 0x0A && buffer[bytesRead - 2] == 0x0D)){
        //done with reading
        handshakeComplete = true;
   }
   if(bytesRead != -1){
      String line = new String(buffer, "UTF-8");
      if (!line.trim().equals("")) {
         handshakeLines.add(line.trim());
      }
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:59:51.263

只是简单地看一下，你不能保证之前停止`buffer.length == pos`。这是需要仔细检查的一件事 -`pos`必须严格小于缓冲区的长度。

# algorithm - 每行值的累计总和

> ID：13215327
> 
> 赞同：2
> 
> 时间：2012-11-04T01:53:40.363
> 
> 标签：algorithm, matlab, rows

我有以下内容：

```
a = [1 11; 2 16; 3 9; 4 13; 5 8; 6 14];
b = a;
n = length(a);
Sum = [];

for i=1:1:n,
   Sum = b(i,2)+b(i+1:1:n,2)

end

b =

 1    11
 2    16
 3     9
 4    13
 5     8
 6    14 
```

对于第一次迭代，我希望在第二列中找到 19 到 25 之间的***第一个***值组合。

```
Sum =

27
20
24
19
25 
```

由于 20 是第一个组合（第 1 行和第 3 行）——我想在开始新矩阵时删除该数据或表示这是第一个组合（即通过创建第三列将 1 放在旁边）

下一步是将仍然在矩阵中的值与第 2 行的值相加：

```
Sum =
29
24
30 
```

然后将 2&5 合并。

但是，我希望不仅允许组合对，而且如果可能的话，还允许组合多行。

有什么我忽略的东西可以简化这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:18:05.677

我不认为你会非常简化这一点。[这是背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的一种变体，它是 NP 难的。使用的最佳算法可能取决于输入的大小。

# java - 交换机中的异常处理

> ID：13215331
> 
> 赞同：1
> 
> 时间：2012-11-04T01:53:58.540
> 
> 标签：java, exception, switch-statement

以下代码在一个 while 循环中，该循环中包含一个这样的开关：

```
 System.out.println("Enter in a selection.");
  System.out.println("Enter \"1\" for a default selection of die");
  System.out.println("Enter \"2\" for a custom number of sides.");
  //try the input to see if its an integer
  try {
  selection = sc.nextInt();
  } catch (NumberFormatException e){
      System.out.print("Your selection can only be an integer!");
   } 
 switch (selection){
   case1:
   ...
   break;

   case2:
   ...
   break;

   default:
   ...
   //yell at them
   continue;
  } 
```

我已经在开关中有一个默认选择，因此如果用户输入了一个无效的数字，比如 4（因为只有 2 种情况），它会将它们带回到循环的开头。所以，问题是处理异常。上面的代码没有处理异常，我不知道为什么。尝试是容纳有问题的代码。

与往常一样，如果需要，请要求澄清。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:56:23.040

您应该对异常进行处理，因为如果发生异常`continue`，则继续进行是没有意义的。`switch``selection`

```
} catch (InputMismatchException e){
    System.out.print("Your selection can only be an integer!");
    sc.nextLine();
    continue;
} 
```

* * *

您现在拥有它的方式，如果发生异常，您将切换`selection`.

* * *

但是您的代码中的主要问题是该[`nextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)方法不会抛出`NumberFormatException`，而是抛出`InputMismatchException`.

所以你试图捕捉**错误的异常**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:59:38.720

输入时未处理异常的原因`4`是它`4`是一个有效的整数并且`nextInt()`不会引发`NumberFormatException`异常。

你最好把`switch`它附在`try`块里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T02:01:16.540

就个人而言，我会将您的输入（以及随之而来的 try/catch 块）放在它自己的单独方法中。返回布尔值（true = 有效整数）或超出范围的值（可能为“-1”，具体取决于您的程序）。

恕我直言...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T02:19:09.633

[**Scanner#nextInt()**](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)不抛出`NumberFormatException`

`Scans the next token of the input as an int. An invocation of this method of the form nextInt() behaves in exactly the same way as the invocation nextInt(radix) , where radix< is the default radix of this scanner.`

```
 return the int scanned from the input
 throws InputMismatchException
         if the next token does not match the <i>Integer</i>
          regular expression, or is out of range
 throws NoSuchElementException if input is exhausted
 throws IllegalStateException if this scanner is closed 
```

**您的异常处理似乎是正确的，唯一的问题是您捕获了错误的异常。**请抓住`InputMismatchException`和其他两个。

例如下面：

```
 try {
          selection = sc.nextInt();
      } catch (InputMismatchException e){
          System.out.print("Your selection can only be an integer!");
      } 
```

此外，您可能希望将上述代码放入 while 循环中，如下所示：

```
 boolean validInput = false;
       while(!validInput){
     try {
          selection = sc.nextInt();
              validInput = true;
      } catch (InputMismatchException e){
          System.out.print("Your selection can only be an integer!");
      }
       } 
```

**这将重复要求输入，直到输入一个数字。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T02:00:09.067

在 a 的情况下`Scanner`，您可以使用该`hasNextInt()`方法（以及其他数据类型的等效方法），而不是通过异常崩溃和烧毁：

```
while (some_condition) {
  System.out.println("Enter in a selection.");
  System.out.println("Enter \"1\" for a default selection of die");
  System.out.println("Enter \"2\" for a custom number of sides.");
  //try the input to see if its an integer
  if (!sc.hasNextInt()) {
    System.out.println("You must enter an integer!");
    continue;
  }
  selection = sc.nextInt();

  switch (selection){
   case 1:
   ...
   break;

   case 2:
   ...
   break;

   default:
   ...
   //yell at them
   continue;
  }
} 
```

正如[Bhesh Gurung 所说](https://stackoverflow.com/a/13215341/129655)，如果你处于一个循环中，你应该使用`continue`to 回到开头，就像你在`default`案例中所做的那样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-04T02:12:21.243

如果你想真正处理'switch'语句中的异常，你需要扩展try-catch块的范围：

```
 System.out.println("Enter in a selection.");
  System.out.println("Enter \"1\" for a default selection of die");
  System.out.println("Enter \"2\" for a custom number of sides.");
  //try the input to see if its an integer
  try {
  selection = sc.nextInt();

  switch (selection){
   case1:
   ...
   break;

   case2:
   ...
   break;

   default:
   ...
   //yell at them
   throw new NumberFormatException("Yelling message");
   continue;
  }
 } catch (NumberFormatException e){
      System.out.print("Your selection can only be an integer!");
 } 
```

# php - PHP 致命错误：找不到类“Zend\Mvc\Application”

> ID：13215334
> 
> 赞同：4
> 
> 时间：2012-11-04T01:54:55.697
> 
> 标签：php, zend-framework, phpunit, zend-framework2

所以我一直在关注这个教程：

```
http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html 
```

我正处于应该运行 phpunit 的地步——我运行命令`phpunit module/Album/src/Album/Controller/AlbumControllerTest.php`

我遇到了一个问题：

```
PHP Fatal error:  Class 'Zend\Mvc\Application' not found in /home/...rest of the folders here.../AlbumControllerTest.php on line 71 
```

AlbumControllerTest.php 中的第 71 行是：

```
$bootstrap        = \Zend\Mvc\Application::init(include 'config/application.config.php'); 
```

当我在 Zend/Mvc/ 下查看时，我看到一个名为 Application 的文件，所以我假设这不是问题。

config/application.config.php 看起来像这样：

```
<?php
// config/application.config.php:
return array(
    'modules' => array(
        'Application',
        'Album',                  // <-- Add this line
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
);

?> 
```

根据教程 - 我相信。有谁知道如何解决这个问题？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-12-16T23:33:04.397

从 Magento Commerce 2.2.7 升级到 2.3 时，我遇到了同样的问题。我已经通过手动编辑 composer.json 自动加载来修复它：

```
"autoload-dev": {
    "psr-4": {

        "Magento\\Framework\\": "lib/internal/Magento/Framework/",
        "Magento\\Setup\\": "setup/src/Magento/Setup/",
        "Magento\\": "app/code/Magento/",
        "Zend\\Mvc\\Controller\\": "setup/src/Zend/Mvc/Controller/"
    }
}, 
```

，运行命令：

```
composer dumpautoload 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:04:13.867

显然，您的 ZF2 没有自动加载。

要为您的模块测试设置 zf2 和服务管理器，您可以使用[https://github.com/ZF-Commons/ZfcBase/blob/master/test/Bootstrap.php](https://github.com/ZF-Commons/ZfcBase/blob/master/test/Bootstrap.php)

在您的测试中，您将像这样使用它：

```
use YourNamespace\Bootstrap;

//...
public function setUp()
{
    Bootstrap::init();
    //...
    $this->controller->setServiceLocator(Bootstrap::getServiceManager());
}
//... 
```

# ajax - 按需生成primefaces ajax树？

> ID：13215335
> 
> 赞同：0
> 
> 时间：2012-11-04T01:54:57.787
> 
> 标签：ajax, hibernate, jsf, primefaces, ejb

我有一个使用 JSF primefaces 和 EJB 托管 Bean 和休眠存储的项目。 [http://www.primefaces.org/showcase/ui/treeAjax.jsf](http://www.primefaces.org/showcase/ui/treeAjax.jsf)

问题：我不断收到内存不足或堆栈溢出错误，你能看出我的递归有问题吗？

```
@ManagedBean(name = "categoryController")
@RequestScoped
public class CategoryController implements Serializable {
    ...

    @EJB
    private CategoryFacade ejbFacade;
    private TreeNode root;

    public TreeNode getRoot() {
        return root;
    }

    @PostConstruct
    public void init() {
        root = new DefaultTreeNode("Root", null);
        System.out.print("Facade value=" + getFacade());
        Category categoryRoot = getFacade().find(new Integer(1));
        getSubcategories(categoryRoot, root);

    }

    private void getSubcategories(Category categoryRoot, TreeNode root) {
        List<Category> list = getFacade().findByNamedQuery("Category.findByPCatid", "pcatid", categoryRoot);
        Iterator<Category> it = list.iterator();
        while (it.hasNext()) {
            Category subcategory = it.next();
            TreeNode nextNode = new DefaultTreeNode(subcategory.getUcatid(), root);
            getSubcategories(subcategory, nextNode);

        }

    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:43:57.557

问题是您的递归在根元素上处于无限循环中。尝试添加这个：

```
if (!subcategory.getCatid().equals(new Integer(1))) {
     getSubcategories(subcategory, nextNode);
} 
```

您还可以查找 Primefaces 事件侦听器以按需生成树。 [http://www.primefaces.org/showcase/ui/treeEvents.jsf](http://www.primefaces.org/showcase/ui/treeEvents.jsf)

# android - FragmentActivity 未显示在第二个面板中

> ID：13215336
> 
> 赞同：-1
> 
> 时间：2012-11-04T01:55:13.937
> 
> 标签：android, fragment, android-fragmentactivity

我在我的应用程序中使用 FragmentActivity。访问它时会显示一个面板，该列表是在新活动中创建的，但是当我在平板电脑中运行时，其中存在两个面板，但拒绝加载第二个面板。

“ItemDetailFragment”是实现 OnItemClickListener 的 FragmentActivty，当我创建项目时它最初是“Fragment”类型。

我收到两个错误，一个在 ItemListActivity

```
if (mTwoPane) {
            Bundle arguments = new Bundle();
            arguments.putString(ItemDetailFragment.ARG_ITEM_ID, id);
            //ItemDetailFragment fragment = new ItemDetailFragment();
            ItemDetailFragment fragment = new ItemDetailFragment();
            fragment.setArguments(arguments);
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.item_detail_container, fragment)
           //The method replace(int, Fragment) in the type FragmentTransaction 
           //is not applicable for the arguments (int, ItemDetailFragment)
           // Change type of 'fragment' to 'Fragment'
                    .commit();

        } else {
            Intent detailIntent = new Intent(this, ListUsers.class);
            detailIntent.putExtra(ItemDetailFragment.ARG_ITEM_ID, id);
            startActivity(detailIntent);
        } 
```

以及“.add”在“ItemDetailActivity”中的完全相同的错误导致错误

```
 Bundle arguments = new Bundle();
        arguments.putString(ItemDetailFragment.ARG_ITEM_ID,
                getIntent().getStringExtra(ItemDetailFragment.ARG_ITEM_ID));
        ItemDetailFragment fragment = new ItemDetailFragment();
        fragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
                .add(R.id.item_detail_container, fragment)
                .commit(); 
```

请给我任何建议，因为这是我第一次使用“片段”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:13:34.997

我认为这是您收到的错误消息：

> FragmentTransaction 类型中的方法 replace(int, Fragment) 不适用于参数 (int, ItemDetailFragment) **将 'fragment' 的类型更改为 'Fragment'**

您是否尝试过执行错误消息建议您执行的操作？

```
ItemDetailFragment fragment = new ItemDetailFragment(); // This does not work
Fragment fragment = new ItemDetailFragment(); // This works! 
```

如果您在稍后阶段需要使用独有的方法`ItemDetailFragment`，您可以随时`fragment`转换回`ItemDetailFragment`-object。像这样：

```
((ItemDetailFragment) fragment).someMethod(); 
```

# ruby-on-rails - rails 中的西班牙语语言环境 - 型号名称

> ID：13215337
> 
> 赞同：0
> 
> 时间：2012-11-04T01:55:38.393
> 
> 标签：ruby-on-rails

我环顾四周，似乎要为模型名称设置复数规则，您将以下内容放入您的语言环境文件中

```
# es.yml
es:
    activerecord:
        models:
          business:
            one: Lugar
            other: Lugares 
```

但是，当模型名称被翻译成复数时，我仍然得到`Lugars`而不是`Lugares`

不知道出了什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:05:32.280

它应该与`Business.model_name.human(:count => 2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:34:30.860

您的问题是您在 Rails 中混合了两种形式的字符串复数形式。第一个用于*内部*目的：用于命名类、变量、方法、表名等。这是`pluralize`，为了使其正确处理异常等，您可以在 config/initializers/inflections.rb 中定义变形。

但这种复数形式*不*适合翻译。为此，您应该使用`Business.model_name.human(:count => 2)`（如@doesterr 建议的那样），它将引用您所在区域设置的区域设置文件，这就是您想要的。

有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/6178900/overide-default-pluralize-for-model-name-in-rails3#6179686)。

# java - 我的 Jlabel 没有出现

> ID：13215340
> 
> 赞同：1
> 
> 时间：2012-11-04T01:56:11.390
> 
> 标签：java, swing, jlabel

当我把它放在paint(Graphics2d g) 方法中时，Jlabel 没有出现，我不知道为什么。

我的文本类：

```
import java.awt.Color;
import java.awt.Graphics2D;

import javax.swing.JLabel;

public class Text {
    int ballX,ballY,squareX,squareY;
    Text text;
    private Game game;
    private Ball ball;
    private Racquet racquet;

    public  void main(){
        ballX = ball.getBallX();
        ballY = ball.getBallY();
        squareX = racquet.getSquareX();
        squareY = racquet.getSquareY();
    }

    public void paint(Graphics2D g) {

        g.setColor(Color.red);
        JLabel balltext = new JLabel("the ball is at " + ballX + ballY);
        balltext.setVisible(true);

        g.setColor(Color.green);
        JLabel squaretext = new JLabel("the ball is at " + squareX + squareY);
        squaretext.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:28:24.167

您的代码有些地方不太对劲。

首先，`Text`不从任何可绘制的东西延伸，所以`paint`永远不会被调用。无论如何，约定往往倾向于覆盖`paintComponent`Swing 组件。

此外，您应该始终调用`super.paintXxx`，这首先会突出显示问题。

其次，组件通常被添加到某种容器中，该容器负责为您绘制它们。

如果您想在您的程序中使用 Swing 组件，我建议您查看[使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)。

如果你想绘制文本，我建议你看看[2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)，特别是[Working with Text APIs](http://docs.oracle.com/javase/tutorial/2d/text/index.html)

有关您要实现的目标的更多信息也可能会有所帮助

另外，我不确定这是否是故意的，但`public void main(){`ins 不会充当程序的主要入口点，它应该是`public static void main(String args[])`，但您可能只是`main`用作从 else where 调用类的手段； )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:59:38.300

从外观上看，您缺少很多 Java Swing gui 的范例/习语。

例如：

*   如果您想覆盖paint / paintComponent 来指定组件的绘制方式，文本应该扩展JComponent。
*   您应该创建一个单独的 Main 类作为程序的入口点（您不必这样做，但它可以帮助您暂时保持逻辑上的分离，这对您来说更容易概念化）
*   您需要在 main 方法中创建一个 JFrame，然后创建 Text 类并将其添加到 JFrame 并在 JFrame 上调用 pack() 和 setVisible(True)。

我建议先看一些例子来了解方向：

[http://zetcode.com/tutorials/javaswingtutorial/firstprograms/](http://zetcode.com/tutorials/javaswingtutorial/firstprograms/)

[http://www.javabeginner.com/java-swing/java-swing-tutorial](http://www.javabeginner.com/java-swing/java-swing-tutorial)

# java - 使用广度优先遍历算法，我将项目按连续顺序添加到二叉树，但它们没有正确添加

> ID：13215343
> 
> 赞同：0
> 
> 时间：2012-11-04T01:56:48.283
> 
> 标签：java, binary-tree

我使用以下方法（使用广度优先遍历算法）以连续顺序将项目添加到二叉树中。

例如，如果我有

```
 A
 / \
 B  C
/  
D 
```

我希望下一个补充是：

```
 A
 / \
 B  C
/ \ 
D  E 
```

我的问题在于我不确定如何正确返回值。我知道当我们遇到第一个空节点时，我们会在其中插入值，但是我们将它插入*到*什么地方呢？如果我们将它插入到我们从队列中获取的二叉树中，那是根的子树（或我们试图添加到的树），所以返回它不会是完整的树。

这是我的代码：

```
public static <T> BinaryTree<T> addToTree(BinaryTree<T> t1, BinaryTree<T> t2) {
    Queue<BinaryTree<T>> treeQueue = new LinkedList<BinaryTree<T>>();

    while (t1 != null) {
        if (t1.getLeft() == null) {
            t1.attachLeft(t2);
            break;
        }
        treeQueue.add(t1.getLeft());

        if (t1.getRight() == null) {
            t1.attachRight(t2);
            break;
        }
        treeQueue.add(t1.getRight());

        if (!treeQueue.isEmpty()) t1 = treeQueue.remove();
        else t1 = null;
    }
    return t1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:47:18.763

好的，我想我现在明白了你的要求。

您的广度优先实施是正确的。

二叉树是一种“自包含”结构。你从名为 A 的根开始，有两个对另外两棵二叉树“左”和“右”的引用

你从：

```
 A
   / \
  B  C
 /  
D 
```

并添加一棵二叉树 E 作为 B 的右子树：

```
 A
 / \
 B  C
/ \ 
D  E 
```

实际上，您的实现返回一个子树“B”，它是附加新子树的位置。我不确定您使用的是什么 BinaryTree 实现，但我希望：

```
"B".attachRight("E"); 
```

修改原始树，因此附加节点的“新”树仍然是以“A”开头的树 - 即您不必返回任何内容！我不知道您的实现是否跟踪“父”，如果是，您可以从“B”开始遍历父层次结构，直到找到父为空的节点 - 根（再次为“a”）

调用 addToTree(BinaryTree t1, BinaryTree t2) 后您想要的答案是“t1”，即您作为第一个参数传递的“A”根树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:41:03.897

你的问题在这里：

if (!treeQueue.isEmpty()) t1 = treeQueue.remove(); 否则 t1 = null;

如果节点没有子节点，则将其引用设置为 null 以中断 while，但这也是函数返回的值。您可以只使用一个临时变量来存储对要返回的节点的引用。

# php - 服务 HTML5 mp4 视频标头被取消

> ID：13215345
> 
> 赞同：1
> 
> 时间：2012-11-04T01:57:08.833
> 
> 标签：php, html, http-headers, jwplayer

我正在尝试提供视频文件。我让它适用于 Flash 版本，但我希望它适用于使用 HTML5 视频标签的移动设备。我正在使用 JWPlayer 作为视频播放器。

我从 mobiforge.com看到了[这个解决方案并实施了它。](http://mobiforge.com/developing/story/content-delivery-mobile-devices)现在它帮助我让它半工作，并且似乎发送了正确的标题但不是每个页面加载，我不得不刷新它几次才能出现正确的标题。下载大约 1.66MB 的视频文件后，请求也会被取消。然后视频说错误。

```
The video could not be loaded, either because the server or network failed or
because the format is not supported: 
```

# php - 如何取消选中复选框

> ID：13215347
> 
> 赞同：-1
> 
> 时间：2012-11-04T01:57:42.607
> 
> 标签：php, javascript

如果选中另一个复选框，如何取消选中复选框。

有人可以帮忙吗。

谢谢。

```
<?php

//limit for number of categories displayed per page
$limit = 4;

$categoriesNum= mysql_query("SELECT COUNT('categoryTopic') FROM categories");   

//number of current page
$page =(isset($_GET['page']))? (int) $_GET['page'] :1;

//calculate the current page number 
$begin =($page - 1)* $limit; 

//number of pages needed. 
$pagesCount =ceil(mysql_result ($categoriesNum,0)/$limit);

//Query up all the Categories with setting the Limit 
$CategoryQuery = mysql_query ("SELECT categoryTopic From categories ORDER BY categoryTopic LIMIT $begin, $limit");

//Place all categories in an array then loop through it displaying them one by one
while ($query_rows = mysql_fetch_assoc($CategoryQuery))
{

    $category =$query_rows['categoryTopic'];  
    //echo $category; 
    //query all the subcategories that the current category has 
    $Sub = mysql_query ("SELECT categoryTopic FROM subcategories WHERE categoryTopic='$category'");             
    $Count = mysql_num_rows ($Sub); 

    echo  '<table width="85%" border="1"  cellpadding="0"; cellspacing="0" align="center">

    <tr>        
        <th width="23%" height="44" scope="col" align="left"> '.$query_rows['categoryTopic'].' <br><br><br></th>
        <th width="24%" scope="col">'.$Count.'</th>
        <th width="25%" scope="col"> 0 </th>
        <th width="28%" scope="col"> <form  name = "choose">
        <label><input type="checkbox" id ="check" value= '.$category.' onchange="handleChange(this);"></label>
    </tr>
</table>';  
}
?> 

<script type="text/jscript">
//this funciton will be called when user checks a check box. 

function handleChange(cb) {
//get the selected category 
var category = cb.value; 
```

如果另一个被选中，我会得到新的值，但同时选中两个框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:03:12.120

如果您只想一次检查一个，那么单选按钮似乎是一个更好的选择，尽管如果您一次想要一个或零，那么复选框就可以了。

您的代码当前正在生成无效的 html，因为它为`id`每个复选框提供了相同的内容。此外，您似乎`<form>`在没有匹配标签的情况下在每一行上创建开始`</form>`标签。

如果你给每个复选框一个共同的`class`属性：

```
<input type="checkbox" class="check" value= '.$category.' onchange="handleChange(this);"> 
```

...然后您的 JS 可以[`.getElementsByClassName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)用来处理所有这些并取消选中除刚刚检查的那个之外的所有：

```
function handleChange(cb) {
    var cbs = document.getElementsByClassName("check");
    for (var i = 0; i < cbs.length; i++)
        if (cbs[i] != cb)
            cbs[i].checked = false;
} 
```

演示：http: [//jsfiddle.net/33Gqu/](http://jsfiddle.net/33Gqu/)

注意：对于要提交的所选值，您需要为复选框提供一个`name`属性 - 与 不同`id`，`name`可以为多个元素重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T01:59:06.583

不要使用复选框，使用单选按钮，并给它们都一样`name`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T01:59:48.597

使用单选按钮？

```
<input type="radio" name="NAME" /> 
```

`NAME`您希望相互影响的所有单选按钮的位置相同。

旁注：您当前的代码无效，因为它会生成具有相同 ID ( `check`) 的多个元素。

# java - 如何将 java -jar 错误输出到文本/日志文件？

> ID：13215348
> 
> 赞同：13
> 
> 时间：2012-11-04T01:57:55.910
> 
> 标签：java, windows, command

我用谷歌搜索了我的心！我试图弄清楚从 Windows 命令行执行 java 时如何输出 java 类可能给出的任何错误。

例如

```
java -jar class.jar <someFile.file> 
```

如果该行抛出任何错误，我希望将它们存储到文本文件中以供以后查看。

我试过了

```
java -jar class.jar <someFile.file> >> log.txt 
```

但是尽管抛出错误 log.txt 文件是空的。

谢谢大家！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-04T02:06:56.550

利用：

```
java -jar class.jar <someFile.file> 2>> log.txt 
```

2 重定向错误流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T07:28:38.447

或者您可以使用 bat 文件轻松地将所有输出定向到命令提示符中的文本文件

C:> something.bat > console_output.txt

# html - 使文本区域中的文本部分静态？

> ID：13215350
> 
> 赞同：0
> 
> 时间：2012-11-04T01:58:45.267
> 
> 标签：html, textarea

有没有办法在不禁用整个文本区域的情况下仅使文本区域中的一部分文本成为静态或只读？

基本上，我希望一个人能够使用 textarea 更新状态，静态文本会有他们的名字，动词在开头，比如：

埃里克是：“骑自行车”

这可能吗？

```
Basic text area <input="textarea" blah="" blah""> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:11:33.470

遵照尤卡的意愿，

并非没有使用 javascript 来伪造效果。您必须处理键盘事件、鼠标事件并能够识别您在文本区域中的插入符号位置——所有这些都以跨浏览器友好的方式进行。我会举着双手跑到山上！......

或者使用更有意义的东西 -

在标签中显示“Eric is:”，在文本输入中显示“骑自行车”。与使用 textarea 完成所有操作所需的 javascript 相比，使用该文本填充标签所需的 javascript 是微不足道的。标记可以很简单：

```
<label>Eric is: <input type='textarea' blah="\" blah\"" value='Riding a bike'></label> 
```

# c# - 在 C# 中将类型转换为对象

> ID：13215356
> 
> 赞同：1
> 
> 时间：2012-11-04T01:59:08.927
> 
> 标签：c#, casting

我有一个我想通用的功能来显示表单。我希望该函数检查表单是否已经打开，如果没有创建表单的新实例并显示它，则将其带到顶部。

检查表单是否打开的第一部分一切都很好，但我正在从 T 进行强制转换并创建一个类型为 T 的新表单对象。我已经使用这行代码来创建表单的一个实例，`obj = Activator.CreateInstance<T>();`但它没有显示所有智能感知中的方法和属性。代码`Form x = new Form1. x`将显示所有方法和属性。

我确定我在这里做错了什么，请为我发光。

```
 private static void ShowForm<T>(  )
    {
        T obj = default( T );

        List<T> opened = FormManager.GetListOfOpenForms<T>();
        if ( opened.Count == 0 )
        {
            // not opened

            // obj does not show all properties and methods
            obj = Activator.CreateInstance<T>();

            // x shows all properties and methods
            frmLogin x = new frmLogin();

        }
        else
        {
            // opened

        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T02:02:59.140

您需要约束 T 继承`Form`：

```
private static void ShowForm<T>() where T : Form, new() 
```

一旦编译器知道`T`可以保证继承`Form`，您就可以使用在`Form`或其基类中定义的所有成员。

对您的问题更一般的答案是转换`obj`为`Form`.

# c++ - 如果我将结构传递给可变参数函数会发生什么？

> ID：13215359
> 
> 赞同：8
> 
> 时间：2012-11-04T01:59:36.240
> 
> 标签：c++, variadic-functions

```
void f(int count, ...){
    //whatever
}

struct somestruct{
    size_t a, b, c;
};

int main() {
    somestruct s;
    f(1, s);    //what is actually passed?
} 
```

整个`struct`复制并在堆栈上传递？如果是这样，是否调用了复制构造函数？指针是否通过？这安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:54:04.920

是的，如果你传递一个左值，就会完成左值到右值的转换，这意味着调用复制构造函数将对象复制到一个新的副本中，并将其作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:06:51.357

`void f(...)`正在使用按位复制。不会为您生成默认构造函数或复制构造函数，`somestruct`因为它只有 C++ 内置类型。

```
Is this safe? 
```

是的，这是完全安全的。

我将向您推荐“内部 C++ 对象模型”`chapter 2 The Semantics of Constructors`

# php - PHP：读取 fopen 的内容

> ID：13215365
> 
> 赞同：0
> 
> 时间：2012-11-04T01:59:55.567
> 
> 标签：php, gd, fopen

**大家好**

首先，我要感谢您花时间阅读本文。我有一段代码（如下所示），我从外部站点抓取一些东西并将其显示在 GD 图像上。当我抓住 0 时，我希望能够显示文本“离线”而不是“0”和“在线”而不是“1”

关于如何做到这一点的任何建议？

我已经尝试了很多不同的方法，但我无法让它发挥作用。任何形式的帮助将不胜感激！

此致，马尔莫克

```
$username=$_REQUEST["user"];
$grabstat10 = fopen("http://habplus.com/fansitetools/userStats.php?user={$username}&stat=online", "r"); 
while (!feof($grabstat10)){ 
  $online1 = fgets($grabstat10);
} 
```

**编辑（@zerkms）：**

```
if ($_GET[$online1] > 0) {
    $online2 = 'online';
} else {
    $online2 = 'offline';
}

if ($online1 == "1") {
    $online2 = 'online';
} else {
    $online2 = 'offline';
} 
```

这是我历史上最近的两次尝试。我很抱歉对编码了解不多。我知道我很烂，我打算买一两本关于 PHP 的书，但我仍然想尝试解决这个问题。如果您能帮助我，那就太好了，因为根据我从您的帖子中了解到的内容，任何具有 PHP 基本知识的人都会知道这个问题的答案。

**编辑2：**

然后后来包含在 GD Image 中

```
imagefttext($image, $fsize, 0, 403, 96, $font_color, './volt.ttf', $online2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:20:52.953

-**固定**

好吧显然-

```
 if ($online1 == "1") {
    $online2 = 'online';
} else {
    $online2 = 'offline';
} 
```

- 成功了！

我不太确定为什么这没有早点起作用。。一定是出了点问题。

我要感谢所有发表评论并表示有兴趣帮助我的人。

此致，尼尔斯

# android - Android：从 SqlLite 获取单行，空指针异常

> ID：13215371
> 
> 赞同：1
> 
> 时间：2012-11-04T02:01:31.897
> 
> 标签：android, sqlite, cursor

我正在尝试从主要活动接收行 ID，并从那里显示该行的内容。但是我得到一个空指针异常。我不确定如何正确实施。

该异常与第 22 行**MODULEDATABASE.openToRead();相关。**我不确定是否需要打开阅读，因为我在主要活动中已经这样做了。如果我注释掉这一行，下一个错误是指第 23 行 **cursor = MODULEDATABASE.getRow(rowId);** 我们欢迎所有的建议

来自 **MODULEDATABASE.openToRead() 的 LogCat 错误；

```
 10-23 09:12:52.572: E/AndroidRuntime(19778): Uncaught handler: thread main exiting due to uncaught exception
10-23 09:12:52.582: E/AndroidRuntime(19778): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mycoursetimetable/com.example.mycoursetimetable.ViewCourse}: java.lang.NullPointerException
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.os.Looper.loop(Looper.java:123)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.ActivityThread.main(ActivityThread.java:4363)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at java.lang.reflect.Method.invoke(Method.java:521)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at dalvik.system.NativeStart.main(Native Method)
10-23 09:12:52.582: E/AndroidRuntime(19778): Caused by: java.lang.NullPointerException
10-23 09:12:52.582: E/AndroidRuntime(19778):    at com.example.mycoursetimetable.ViewCourse.onCreate(ViewCourse.java:22)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-23 09:12:52.582: E/AndroidRuntime(19778):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
10-23 09:12:52.582: E/AndroidRuntime(19778):    ... 11 more
10-23 09:12:52.603: I/dalvikvm(19778): threadid=7: reacting to signal 3
10-23 09:12:52.603: E/dalvikvm(19778): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
10-23 09:12:59.232: I/Process(19778): Sending signal. PID: 19778 SIG: 9 
```

LogCat 游标 = MODULEDATABASE.getRow(rowId);

```
10-23 09:16:42.923: E/AndroidRuntime(20316): Uncaught handler: thread main exiting due to uncaught exception
10-23 09:16:42.933: E/AndroidRuntime(20316): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mycoursetimetable/com.example.mycoursetimetable.ViewCourse}: java.lang.NullPointerException
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.os.Looper.loop(Looper.java:123)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.ActivityThread.main(ActivityThread.java:4363)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at java.lang.reflect.Method.invoke(Method.java:521)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at dalvik.system.NativeStart.main(Native Method)
10-23 09:16:42.933: E/AndroidRuntime(20316): Caused by: java.lang.NullPointerException
10-23 09:16:42.933: E/AndroidRuntime(20316):    at com.example.mycoursetimetable.ViewCourse.onCreate(ViewCourse.java:23)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-23 09:16:42.933: E/AndroidRuntime(20316):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
10-23 09:16:42.933: E/AndroidRuntime(20316):    ... 11 more
10-23 09:16:42.953: I/dalvikvm(20316): threadid=7: reacting to signal 3
10-23 09:16:42.953: E/dalvikvm(20316): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
10-23 09:16:44.633: I/Process(20316): Sending signal. PID: 20316 SIG: 9 
```

查看课程活动

```
public class ViewCourse extends Activity {
Cursor cursor;
database MODULEDATABASE;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_view_course);

        Intent intent = getIntent();
        String rowId = intent.getStringExtra(MyCourses.TEST);
        //MODULEDATABASE.openToRead();
        cursor = MODULEDATABASE.getRow(rowId);

        TextView text_modulecode = (TextView)findViewById(R.id.viewModuleCode);
        TextView text_modulename = (TextView)findViewById(R.id.viewModuleName);

        text_modulecode.setText(cursor.getString(cursor.getColumnIndex(database.KEY_MODULECODE)));
        text_modulename.setText(cursor.getString(cursor.getColumnIndex(database.KEY_MODULENAME)));

    } 
```

数据库类

```
public  database openToRead()throws SQLException{
        myHelper = new DbHelper(myContext);
        moduleDatabase = myHelper.getReadableDatabase();
        return this;
}

public Cursor getRow(String rowId)
    {
        String[] columns = new String [] {KEY_ROWID,KEY_MODULECODE, KEY_MODULENAME};
        Cursor c = moduleDatabase.query(DATABASE_TABLE, columns,KEY_ROWID+ "="+rowId , null, null, null, null);
        if(c!=null){
            c.moveToFirst();
        }
        return c;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:30:38.877

我会检查 myContext 是什么。

```
myHelper = new DbHelper(myContext); 
```

您已将 MODULEDATABASE 创建为全局的，这是正确的，但是您需要在 Course 活动的 onCreate 方法中初始化该对象。确保数据库对象的初始化接受来自 Course 活动的上下文。也就是说，有一个构造函数，该构造函数具有用于传递其上下文的课程活动的参数。

在您的课程活动中，您应该能够执行以下操作...

```
database MODULEDATABASE;
public void onCreate(...) {
    MODULEDATABASE= new database(getApplicationContext()); 
} 
```

编辑：上面的解决方案在创建对象时提供了正确的上下文。使用 ADR 的解决方案而不是 ViewCourse.this，使用 getApplicationContext() 应该为您提供另一种执行此操作的方法。

# mysql - MySQL 突然停止了 LAMP 堆栈

> ID：13215373
> 
> 赞同：4
> 
> 时间：2012-11-04T02:02:39.447
> 
> 标签：mysql, linux, apache, mysql.sock

我一直在 Ubuntu 设置上使用 LAMP 堆栈。

它一直工作正常，设置多个数据库一切正常，然后今天早上突然我开始从我正在使用的网页中获取数据库错误，然后尝试访问 PHPMyAdmin 得到：

```
error #2002 Cannot log in to the MySQL server 
```

我进入 bash 提示符并尝试以 root 用户身份登录，看看发生了什么，我收到了类似的错误：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (111) 
```

我检查了 mysql.sock 文件是否存在，在上述错误的指定路径中。权限在哪里都好，并且归mysql所有。我重置了权限以防万一，但仍然出现相同的错误。

这是从 BASH 中看到的文件：

```
srwxrwxrwx 1 mysql mysql 0 Oct 21 05:10 mysqld.sock 
```

我以为我会重新启动服务，但在尝试停止、启动或重新启动服务时会出现同样的错误。

这真的让我感到困惑，我不是 linux 或任何东西的专家，但不明白当我没有更改任何配置设置时会突然发生这种情况，并且在过去的几个月里它运行得非常好。

我尝试重新启动 Apache，并得到错误：

```
apache2: bad user name ${APACHE_RUN_USER} 
```

我不认为这与 MySQL 的东西有关，但认为它可能涉及。Apache 错误似乎更多地与设置有关，但知道我的运气很懒惰导致我忽略了导致一切崩溃的简单事情。

任何有关如何解决问题的帮助，更重要的是防止未来发生这种情况，我们将不胜感激。

我已经尝试了基本 Google 搜索返回的大多数内容，并在此处查看。我还没有尝试删除和重新创建 sock 文件，但到目前为止大多数其他事情都没有奏效。

编辑：

我只是想补充一点，Apache 服务器仍然运行良好，即使我在尝试停止并重新启动它时确实遇到错误，也没有任何问题。不依赖 MySQL 的页面仍然可以正常加载。

我还尝试通过搜索 PID 来杀死 mysql 进程，并且还按照下面的建议 killall mysqld （还有 killall mysql 只是为了踢球）。通过这些尝试未找到任何进程。

我不知道它是否相关，但即使使用超级用户，我也无法打开（在 vim 中）或查看 mysqld.sock 文件（权限被拒绝）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T02:29:25.760

您是否尝试过使用

```
killall mysqld 
```

杀死服务器而不是仅仅结束服务，然后启动 MySQL 服务？

或者您可以尝试使用删除 mysql.sock

```
rm /var/run/mysqld/mysqld.sock 
```

然后你只需要通过启动服务或运行来再次运行 MySQL 服务器

```
mysqld 
```

它应该为自己创建一个新的 /var/run/mysqld/mysqld.sock 并且一切都应该顺利。只是一个想法：这可能是因为计算机没有正确关闭电源，或者 MySQL 只是有点混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-28T07:01:27.567

在 Ubuntu 中创建一个微实例交换空间

> dd if=/dev/zero of=/swapfile bs=1M count=1024
> 
> mkswap /交换文件
> 
> 交换/交换文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T02:52:45.733

您是否尝试重新启动 mysql 服务器

```
/etc/init.d/mysqld restart 
/etc/init.d/mysqld stop 
/etc/init.d/mysqld start 
```

# apache - 制作 URL 后缀作为前缀

> ID：13215378
> 
> 赞同：0
> 
> 时间：2012-11-04T02:03:32.510
> 
> 标签：apache, http

我有一个 url [像这样：hostname.com]，我想将 hostname.com/blog 设置为 blog.hostname.com。我正在使用 Apache 网络服务器。如果我需要提供更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:08:04.770

这应该适合你：

```
RewriteCond %{HTTP_HOST} ^(www\.)? hostname\.com$
RewriteRule ^([^/.]+)(/.*)?$ http://$1.hostname.com$2 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:11:57.417

如果您不只是进行重定向，并且实际上是在 blog.hostname.com 上设置服务器，那么您需要将 Apache 配置为在 extra/httpd-vhosts 中为每个子域使用另一个（虚拟）主机。 conf。有关配置虚拟主机的大量信息，请参阅[http://foundationphp.com/tutorials/apache22_vhosts.php](http://foundationphp.com/tutorials/apache22_vhosts.php)。

只是一个简单的例子：

```
<VirtualHost blog.hostname.com:80>
    DocumentRoot /srv/www/blog
    ServerName blog.hostname.com
</VirtualHost> 
```

这意味着 blog.hostname.com 上的虚拟主机将显示与 hostname.com/blog 相同的页面。这是假设您的文档根目录是 /srv/www （即 linux 设置）。如果没有，只需在必要的地方插入正确的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-03T19:44:10.250

哇，自从我第一次创建我的 SO 帐户和这个问题以来已经有一段时间了。不管怎样，从那以后我学到了很多东西，现在知道我想要完成的是创建一个子域。其他两个答案是正确的，因为它将设置一个子域......如果我有一个指向它的域。我在一个小型 AWS 免费层级 VPS 中使用 NoIP 域，而免费的 NoIP 东西不允许您创建子域。我认为如果我告诉我的 VPS 我想要一个子域，它会神奇地起作用。哎呀！

* * *

除了背景故事，要创建子域，您需要使用域主机添加指向您的服务器的新记录，*并将*您的服务器配置为接受该新子域。添加子域取决于您的提供商，但现在我使用 cloudflare，因此按照[本](https://support.cloudflare.com/hc/en-us/articles/200168756-How-do-I-add-a-subdomain-)指南添加 A / CNAME 记录将起作用。添加记录后，使用其他两个答案让 apache 侦听该域。

感谢您（几乎）5年的回答，所以！

# python - 使用包在多个模块之间拆分 Python 类

> ID：13215386
> 
> 赞同：4
> 
> 时间：2012-11-04T02:05:15.037
> 
> 标签：python

我在 python 中作为一个类编写了一些代码，但现在我正试图将它作为一个包分发，我在弄清楚不同的部分应该如何组合在一起时遇到了一些麻烦。

所以，当我最初编写代码时，我有一个类，其中包含一些函数，包括一个`__init__`函数。我现在已经将这些函数中的每一个拆分到其自己的以函数名称命名的文件中，但我不确定将**init**函数放在哪里，因为它需要参数。下面是一个例子。

原始格式：

```
class className(object):

    def __init__(self, arg1, arg2):
         self.arg1 = arg1
         self.arg2 = arg2

    def func1(self):

    def func2(self, arg3): 
```

使用：

```
import name

a = name.className(arg1, arg2)
a.func1()
a.func2(arg3) 
```

现在文件树是：

```
Name/
    /className
        __init__.py
        func1.py
        func2.py 
```

并继续包括其他功能。我想保持与原来相同的基本使用模式。

现在，我的问题是该`__init__`功能应该去哪里？文件里面`__init__.py`？别的地方？另一个问题是我想在`__init__.py`文件中放入一些导入；我知道它们应该放入`__init__.py`文件中，但我不知道它们与`__init__`函数有何关系。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T02:06:24.053

您不能将一个类拆分到多个文件中。一个包应该包含多个模块，这些模块是包含代码（完整的类、函数等）的文件。

该`__init__.py`文件在导入包时运行（尽管它很少用于实际执行大量代码）并告诉 Python 目录是一个包，它不是类的构造函数。

包（文件夹）应该是包和模块的集合，而模块（文件）将是代码的集合。

正常层次结构的示例：

```
- somepackage (Folder)
    - __init__.py (File)
    - somemodule.py (File)
        - SomeClass (Code)
        - some_function (Code) 
```

最后一点，我说你不能将一个类拆分到多个文件中——从技术上讲，你可以通过将函数修补到类中或其他一些奇怪的方法来做到这一点，但你永远不会想要这样做，因为它会掩盖你的代码很多。

# android - Eclipse 的 Android 插件卡在应用程序名称上

> ID：13215389
> 
> 赞同：0
> 
> 时间：2012-11-04T02:05:54.977
> 
> 标签：android, eclipse

使用 Eclipse 插件时，我卡在这一步... ![在此处输入图像描述](../Images/424e00f6aa879edc0fe49d54675be3c2.png)

这是怎么回事..？我*确实*输入了一个名字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:15:32.687

由于 Build SDK 字段为空，这表明您已经安装了部分 SDK，但没有安装任何 SDK 平台。您还需要安装一个或多个 SDK 平台。其中每一个都有一个 API 级别和 Android 版本（例如，Android 4.1 (API 16)。

在 Eclipse 中，转到 Window -> Android SDK Manager。选择一个或多个 SDK 平台进行安装。例如，我系统上的 SDK 管理器显示安装了多个 SDK 平台。这是部分视图：

![在此处输入图像描述](../Images/d002c9684241d33dffefa75651bd6a23.png)

请注意，SDK 平台的各个版本的状态为“已安装”

# opengl - glsl 输出和输入的命名约定

> ID：13215390
> 
> 赞同：4
> 
> 时间：2012-11-04T02:06:01.393
> 
> 标签：opengl, naming-conventions, glsl, shader

在学习了几个关于 OpenGL 着色器的不同教程之后，我注意到它们都使用了不同的 outs 和 ins 命名。

例如，我见过`ex_color` `vFragColor`, `ModelViewMatrix`,`mvMatrix`等。

如果我的着色器能够与其他一些着色器兼容而不必重命名所有内容，那就太好了。是否有某种命名方案或我可以遵循的标准或多或少常见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:21:55.233

接口变量名称没有命名约定。您应该使用任何有效且对您的需求有意义的东西。

此外，如果您不将其他人的代码复制并粘贴到您自己的代码中，则无需与其他人的着色器“兼容”。

# c++ - 为什么 boost::call_traits 传递像pair这样的小对象 引用？

> ID：13215391
> 
> 赞同：2
> 
> 时间：2012-11-04T02:06:07.363
> 
> 标签：c++, boost, parameter-passing

我需要一种方法来决定是通过复制还是通过 const-reference 传递任意类型 T（例如，如果 T 足够小，则复制 if，否则通过 const-reference 传递它）。为了避免重新发明轮子，我尝试了 Boost Call Traits。

正如预期的那样，原始类型通过值传递，而复杂类型`std::string`则通过引用传递。但是，微小的非原始类型也通过引用传递，例如 ，`std::pair<char, char>`这似乎不是最佳选择。我假设所有内容都`sizeof(void*)`将按值传递。

一般来说，Boost 库质量很高，所以也许我遗漏了一些东西。

这是我的测试代码：

```
#include <iostream>
#include <type_traits>
#include <tuple>
#include <boost/call_traits.hpp>

template <typename TYPE>
void test(const char* type_name)
{
  typedef typename boost::call_traits<TYPE>::param_type T;  
  if(std::is_reference<T>::value)        
    std::cout << type_name << " is passed by reference (sizeof=" << sizeof(TYPE) << ")\n"; 
  else 
    std::cout << type_name << " is passed by value (sizeof=" << sizeof(TYPE) << ")\n"; 
}

int main()
{
  test<short>("short");
  test<int>("int");
  test<double>("double");
  test<std::string>("std::string");
  test<long long>("long long");
  test<std::pair<int, int>>("std::pair<int, int>");
  test<std::pair<short, short>>("std::pair<short, short>");
  test<std::pair<char, char>>("std::pair<char, char>");
  test<std::tuple<char, char>>("std::tuple<char, char>");
  test<std::tuple<char, char, char, char>>("std::tuple<char, char, char, char>");
  test<std::pair<long long, long long>>("std::pair<long long, long long>");
  return 0;
} 
```

以下是结果（Boost 1.50，g++ 4.7.2）：

```
short is passed by value (sizeof=2)
int is passed by value (sizeof=4)
double is passed by value (sizeof=8)
std::string is passed by reference (sizeof=8)
long long is passed by value (sizeof=8)
std::pair<int, int> is passed by reference (sizeof=8)
std::pair<short, short> is passed by reference (sizeof=4)
std::pair<char, char> is passed by reference (sizeof=2)
std::tuple<char, char> is passed by reference (sizeof=2)
std::tuple<char, char, char, char> is passed by reference (sizeof=4)
std::pair<long long, long long> is passed by reference (sizeof=16) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:58:30.493

Call Traits 是一个通用库，必须与任何用户定义的类型一起使用。要确定按值传递任意类型是否更快，需要额外的知识，这超出了库的范围。因此，在有疑问时始终传递价值的保守方法是合理的。

尽管应该可以对其进行扩展以改进对常用 STL 类型（例如 、、`std::pair`）的支持，但没有通用的方法可以做到这一点。`std::tuple``std::array`

# mysql - 触发器从单位和价格计算总成本

> ID：13215396
> 
> 赞同：1
> 
> 时间：2012-11-04T02:07:02.857
> 
> 标签：mysql, phpmyadmin

我很享受 MySQL 所能做的一切。我想了解如何使用 MySQL 触发器来更新 MySQL 列的总成本，其中 UNITS * PRICE 将（当然）等于总成本。

发票表包括（价格、单位、总成本）

```
 CREATE TRIGGER TRG_TOTAL_COST 
    AFTER INSERT ON INVOICE
    FOR EACH ROW 
    BEGIN 
    --1) Get the TOTAL
    SELECT TOTAL_COST from INVOICE
    --2) Compute total
    TOTAL_COST= UNITS * 
    PRICE; 
    END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:28:41.533

虽然我不确定这是非常好的数据库设计，但您可以通过以下方式轻松完成此操作

```
CREATE TRIGGER TRG_TOTAL_COST BEFORE INSERT ON INVOICE FOR EACH ROW
SET NEW.TOTAL_COST = NEW.UNITS * NEW.PRICE 
```

但我不明白你为什么要在触发器中这样做？您在插入时拥有所需的所有数据，因此您可以直接在插入时完成产品。

或者，除非您有充分的理由真正想要存储它，否则为什么不直接省略可能冗余的列并计算您选择的产品？

# ios - UIPageViewController 翻页示例

> ID：13215397
> 
> 赞同：1
> 
> 时间：2012-11-04T02:07:08.657
> 
> 标签：ios, uipageviewcontroller

有一些关于如何`UIPageViewControllers`工作的解释，我已经阅读了它们。我根据 Neil Smyth 在第 28 章中出色的“iPhone iOS 6 Development Essentials”中的方法构建了一个应用程序。它优雅而简单。

向这个类添加一个方法，并在主应用程序视图中添加一个按钮，以`UIPageViewController`使其转到特定页面，这似乎是一件相对简单的事情。但我不能完全看到这样做的麻烦方法。

如果有人能指出我的解决方案——或者告诉我如何添加一个我认为使用提供的“ `viewControllerAtIndex:`”方法会导致我想要的翻页的方法。

在该应用程序中看到这一点（确切的代码代码在哪里）将帮助我理解并为我自己的应用程序中的解决方案指明道路。

谢谢大家，对不起，我知道从分析者到这个问题[链接](https://stackoverflow.com/questions/11334967/uipageviewcontroller-how-can-i-jump-to-a-particular-page-number)之类的人应该很明显，但我不太明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:56:48.557

正如我在评论中指出的那样，我找到了一个很好的解决方案，我可以关闭这个问题。由于我想要“向前跳”和“向后跳”以及“跳转到页面”，我使用了一个解决方案，其中涉及将顶级视图控制器指定为内容视图控制器的委托，跟踪当前页面，以及然后将 contentViewController 上的点击传递给顶层控制器（作为委托）的实现以移动到新页面。

我已将此解决方案的源代码作为“ABC 图画书”源代码的一部分发布。此应用在应用商店中；请参阅 [https://itunes.apple.com/us/app/abc-picture-book/id578864421?ls=1&mt=8](https://itunes.apple.com/us/app/a-b-c-picture-book/id578864421?ls=1&mt=8)。

# android - 替换 ListFragment 会在新列表之上显示上一个列表

> ID：13215400
> 
> 赞同：1
> 
> 时间：2012-11-04T02:08:08.700
> 
> 标签：android, android-fragments, android-listfragment

我的一个视图中有一个 ListFragment，我在列表中进行了选择，然后用另一个列表替换了该片段。然后我再次在这个列表中进行另一个选择，用另一个列表替换这个列表，但是第三个列表总是显示在原始列表的顶部，就像它从未被替换过一样，为什么会发生这种情况，替换片段时我不能深入三层吗？

这是视图的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="horizontal">

<fragment
    android:id="@+id/frameOne"
    android:name="com.tyczj.bowling.BowlersListFragment"
    android:layout_width="300dp"
    android:layout_height="match_parent"
    android:background="@drawable/list_background_holo" />

<fragment android:name="com.tyczj.bowling.BowlerEntryFrag"
    android:id="@+id/frameTwo"
    android:layout_height="match_parent"
    android:layout_width="fill_parent"/>

</LinearLayout> 
```

`frameOne`是总是被替换的片段

列表中的一个项目被选中，我打电话用一个新的替换列表

```
ft.replace(R.id.frameOne, infoLf).addToBackStack(null).commit(); 
```

然后在该列表中进行另一个选择，所以我再次替换它

```
ListFragment mBowlersBall = new BowlersBallList(bowlerID);
ft.replace(R.id.frameOne, mBowlersBall);
ft.addToBackStack(null).commit(); 
```

那就是当它像这样一起显示两个列表时

![在此处输入图像描述](../Images/b693122a5d1336087b1d76bf3c45941d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:44:06.407

您没有正确替换碎片。首先，该[`FragmentTransaction.replace()`](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)方法的文档非常清楚，它指出`id`提供给它的应该是要替换其片段`id`的*容器的，*而不是像您一样要替换`id`的容器。`Fragment`

其次，您将静态片段（在 xml 布局中声明）与动态片段（在运行时添加）混合，这是您不应该做的。如果您要替换它，`Fragment`您需要`Fragment`在代码中而不是在 xml 布局中声明它（请参阅一位 Android 工程师关于此问题的[回复](https://stackoverflow.com/questions/9543770/android-fragment-not-replacing-properly)）。

因此，与其`frameOne` `Fragment`插入一个`FrameLayout`带有`id`. 在该`onCreate`方法中，您将添加您的初始`Fragment`( `BowlersListFragment`)，然后，基于在 that 中的选择，您将通过将包装布局和新实例`Fragment`的方法提供给`FragmentTransaction.replace()`方法来替换它。`id``Fragment`

# mongodb - 联合索引如何在 mongodb 中工作？

> ID：13215401
> 
> 赞同：1
> 
> 时间：2012-11-04T02:08:12.417
> 
> 标签：mongodb, indexing, mongodb-indexes

在这个问题的评论中，我知道如何为排序操作创建索引：[Mongodb 索引是如何工作的？](https://stackoverflow.com/questions/13207835/how-does-mongodb-index-works)

1.  但我想知道，当我们在`a`&上创建联合索引时`b`，它与简单索引的工作方式有何不同？

2.  为什么我们会从发现中受益`a`，但如果我们发现`b`，我们不会从中获得任何好处？联合索引是否就像连接`a`&一样`b`，所以我们将从 Prefix 中受益？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T04:18:28.687

> 1.但我想知道，当我们在'a'&'b'上创建联合索引时，它与简单索引有何不同？

MongoDB 每个查询只使用一个索引 .. 所以如果您的`find()`条件同时包含`a`和`b`值，您应该添加一个复合索引来有效地搜索这两个字段。

> 2.为什么我们只找到'a'会受益，但如果找到'b'，我们不会从中受益？联合索引是否像 concatenate 'a'&'b' 这样我们就可以从 Prefix 中受益？</p>

MongoDB 使用[B-tree 索引](http://en.wikipedia.org/wiki/B-tree)，因此您只能使用前缀有效地匹配部分键。要查找与后缀或子字符串匹配的所有可能值，必须检查所有索引条目。

### 设置测试数据进行比较

下面的例子是使用`mongo`shell：

```
/* Generate some test data */
for (i = 0; i< 1000; i++) {
    db.mycoll.insert({a:i})
    db.mycoll.insert({b:i})
    db.mycoll.insert({a:i,b:i})
} 
```

现在添加一些示例索引：

```
/* Add simple and compound index */
db.mycoll.ensureIndex({a:1})
db.mycoll.ensureIndex({b:1})
db.mycoll.ensureIndex({a:1, b:1}) 
```

最后，对于下面的测试场景，强制您的查询使用特定索引[`$hint`](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)并比较[`explain()`](http://www.mongodb.org/display/DOCS/Explain)结果。

### `b`使用简单索引搜索

`b`使用简单索引的搜索`b`可以直接在索引中找到匹配的条目.. 它扫描 4 个索引条目 ( `nscanned`) 以返回 4 个结果 ( `n`)：

```
db.mycoll.find({b:10}).hint({b:1}).explain()
{
    "cursor" : "BtreeCursor b_1",
    "n" : 4,
    "nscannedObjects" : 4,
    "nscanned" : 4,
    ...
} 
```

### `b`使用复合索引搜索`(a,b)`

`b`使用复合索引的搜索`(a,b)`必须检查索引中的每个`a`值，因为索引的第一部分是 的键值`a`。

因此，要直接在索引中查找匹配条目 .. 它会扫描**1904**个索引条目 ( `nscanned`) 以返回 4 个结果 ( `n`)：

```
db.mycoll.find({b:10}).hint({a:1,b:1}).explain()
{
    "cursor" : "BtreeCursor a_1_b_1",
    "n" : 4,
    "nscannedObjects" : 4,
    "nscanned" : 1904,
    ...
} 
```

从技术上讲，扫描 1,904 个文档少于我的测试集合中的 3,000 个文档......但这远非最佳。

### `a`使用复合索引搜索`(a,b)`

为了比较，`a`使用复合索引的搜索表明只需要扫描 4 个值即可返回 4 个文档：

```
db.mycoll.find({a:10}).hint({a:1,b:1}).explain()
{
    "cursor" : "BtreeCursor a_1_b_1",
    "n" : 4,
    "nscannedObjects" : 4,
    "nscanned" : 4,
    "nscannedObjectsAllPlans" : 4,
    ...
} 
```

对于更多示例和解释，我建议阅读[优化 MongoDB 复合索引](http://java.dzone.com/articles/optimizing-mongodb-compound)一文。

# java - 仅通过其简单名称反射性地查找一个类

> ID：13215403
> 
> 赞同：8
> 
> 时间：2012-11-04T02:08:58.813
> 
> 标签：java, class, reflection

我想知道是否有任何给定的函数允许我自省一个类，而不必编写包含该类的包。

例如，我想查看*Integer*类的方法和超类，为此我必须指定该类所在的包。这将是“java.lang.Integer”

而不是这样做，我只想输入类名以显示类的信息。就像这个“整数”

我怎样才能让我的程序只检查类名，不管它在哪里？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T06:04:24.813

Java 不会阻止您创建自己的`my.company.Integer`类和`my.other.company.Integer`类，因此它无法知道哪个`Integer`类是*正确*的。

我可以建议的答案的最接近的事情是创建一个预定义的包列表，您要在其中搜索类，并继续尝试每个包，直到找到您的类。

所以像：

```
class ClassFinder{
  public static final String[] searchPackages = {
    "java.lang",
    "java.util",
    "my.company",
    "my.company.other" };

  public Class<?> findClassByName(String name) {
    for(int i=0; i<searchPackages.length; i++){
      try{
        return Class.forName(searchPackages[i] + "." + name);
      } catch (ClassNotFoundException e){
        //not in this package, try another
      } catch (...){
        //deal with other problems...
      }
    }
    //nothing found: return null or throw ClassNotFoundException
    return null;
  }
} 
```

如果您想获取所有可用包的列表而不是对其进行硬编码，[请参阅此处](https://stackoverflow.com/questions/1308961/how-do-i-get-a-list-of-packages-and-or-classes-on-the-classpath)。

请注意，此方法不太可能执行得很好，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T19:57:32.407

### 借用的代码，稍作修改（...来自@rodion 的回答）

```
/**
 * Returns first loaded Class found in the searchPackages
 * @param classname the simple class name (e.g. "String")
 * @param searchPackages String[] of packages to search.
 *                       <li>Place the more important packages at the top since the first Class
 *                           found is returned</li>
 *                       <code>//Example
 *                        public static final String[] searchPackages = {
 *                          "java.lang",
 *                          "java.util",
 *                          "my.company",
 *                          "my.company.other" };
 *                       </code>
 * @return the loaded Class or null if not found
 */
public static final Class<?> findClassByName(String classname, String[] searchPackages) {
    for(int i=0; i<searchPackages.length; i++){
        try{
            return Class.forName(searchPackages[i] + "." + classname);
        } catch (ClassNotFoundException e){
            //not in this package, try another
        }
    }
    //nothing found: return null or throw ClassNotFoundException
    return null;
} 
```

### 如果发现重复的类名，则修改相同的代码以引发异常

```
/**
 * Returns the loaded Class found in the searchPackages
 * @param classname the simple class name (e.g. "String")
 * @param searchPackages String[] of packages to search.
 *                       <li>Place the more important packages at the top since the first Class
 *                           found is returned</li>
 *                       <code>//Example
 *                        public static final String[] searchPackages = {
 *                        "java.lang",
 *                        "java.util",
 *                        "my.company",
 *                        "my.company.other" };
 *                       </code>
 * @throws RuntimeException if more than one class of the same classname found in multiple packages
 * @return the loaded Class (guaranteed to be unique among the searchPackages) or null if not found
 */
public static final Class<?> findClassByNameNoDupes(String classname, String[] searchPackages) {

    Class<?> foundClass = null;
    for(int i=0; i<searchPackages.length; i++){
        try{
            boolean wasNull = foundClass == null;
            foundClass = Class.forName(searchPackages[i] + "." + classname);
            if (!wasNull) throw new RuntimeException(classname + " exists in multiple packages!");
        } catch (ClassNotFoundException e){
            //not in this package, try another
        }
    }
    return foundClass;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-04T02:18:34.530

这是不可能的，类一旦被引用就会动态加载。因此，没有办法深入了解可用包的列表，因为没有这样的东西。

但是，有一些方法可以检查 jar，因为这些是 zip 文件（包括标准 JVM jar）。

# google-analytics - Google Analytics：如何区分已注册和未注册的用户？

> ID：13215405
> 
> 赞同：0
> 
> 时间：2012-11-04T02:09:17.673
> 
> 标签：google-analytics

区分在我的网站上有帐户并已登录的人与还没有帐户的人的流量将非常有用。我如何在谷歌分析中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:34:13.587

填充自定义变量之一，并在高级细分中使用它。

可以通过 JS 填充自定义变量：

`_gaq.push(['_setCustomVar', 1, 'loggedin', 'yes', 2]);`

然后在配置文件>高级细分>“新细分”中创建一个高级细分

*   包括自定义变量（键 1）/完全匹配 =“是”

# model-view-controller - 如何使用 geddy 将模型加载到控制器

> ID：13215409
> 
> 赞同：0
> 
> 时间：2012-11-04T02:11:38.200
> 
> 标签：model-view-controller, node.js, geddy

我有一个 Locations 控制器和 Location 模型我想在另一个控制器中使用 Location 模型但调用

```
geddy.models.Locations.all(...); 
```

不起作用。它说位置未定义。

如何让它手动加载模型？或者我应该在 Locations 控制器中创建一个函数来使用客户端上的请求或直接调用服务器上的控制器来获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:06:45.980

`Locations`当它应该是单数时，看起来你正在复数： `Location`-希望这会有所帮助。

# objective-c - UIView 不能从不同的方法访问

> ID：13215417
> 
> 赞同：0
> 
> 时间：2012-11-04T02:12:53.070
> 
> 标签：objective-c, ios, uiview

我在 uiviewcontroller 的头文件中声明了一个 uiview，如下所示：

```
@property (strong, nonatomic) UIView *loadLoading; 
```

并在 viewdidload 中启动它：

```
loadLoading = [[UIView alloc] initWithFrame:self.view.bounds];
loadLoading.backgroundColor = [UIColor blueColor];
[self.view addSubView:loadLoading]; 
```

这工作正常。但在我程序的另一点上，我想删除这个子视图。但由于某种原因，它没有被删除。

```
NSLog(@"%@",loadLoading.backgroundColor);
[loadLoading removeFromSuperview]; 
```

（我知道它已经到了这一点，并且 loadLoading 是可以访问的，因为日志确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:26:19.820

如果你得到`NSLog(@"%@",loadLoading.backgroundColor);`工作。

那么这段代码`[self.loadLoading removeFromSuperview];`应该可以工作，否则会有一些奇怪的错误。

这是另一种方法：在将标签添加到父视图时将其添加到视图。

```
loadLoading = [[UIView alloc] initWithFrame:self.view.bounds];
[loadLoading setTag:7]; 
```

使用该标签将其从 parentView 中删除。

```
[[self.view viewWithTag:7] removeFromSuperView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:39:57.810

发现问题。

我没有在我的问题中提供足够的细节。我从通知中心调用这个方法，它在不同的线程上加载。所以我必须先做`performSelectorOnMainThread`哪个有效

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-04T02:59:07.990

尝试：

```
[self.loadLoading removeFromSuperview]; 
```

# macos - OSX - 如何调试分布式构建？

> ID：13215423
> 
> 赞同：0
> 
> 时间：2012-11-04T02:14:05.250
> 
> 标签：macos, debugging, testing

今天，我将我的第一个桌面 OSX 应用程序发送给了一小群测试人员。一位用户无法通过初始屏幕。

我想知道如何调试这样的东西？我会以某种方式将 NSLogs 写入文件吗？还是 OS X 有某种实用程序？我假设我需要某种日志记录功能，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:42:01.040

您可以很容易地将日志写入文件（不是 via ，如果您愿意`NSLog`，只需简单地写入`NSString`磁盘 via ）。`writeToFile`如果您有一个`NSURLConnection`使用`POST`.

我更喜欢后者，因为它几乎不需要测试人员的干预，并且会自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:35:49.183

分发版本不应该被调试，否则它将是开发版本。您可以将您的设备与 iTunes 同步，然后从 appdata 获取崩溃报告（如果您想知道崩溃的来源）。

参考这个[链接](https://stackoverflow.com/questions/4242780/ipad-how-to-get-crash-report)。如果要调试，请使用开发配置进行调试构建。在您的情况下，请测试人员向您发送崩溃报告，并且您保持 ipa 或应用程序文件的安全，您将需要它来阅读崩溃报告。

# php - AWS S3 PHP 致命错误：未找到“CFCredentials”类

> ID：13215424
> 
> 赞同：3
> 
> 时间：2012-11-04T02:14:11.040
> 
> 标签：php, amazon-s3, amazon-web-services

所以，我认为我在这里做的一切都是正确的......

我下载了最新的 AWS PHP SDK，然后将 config-sample.inc.php 复制到 config.inc.php 并填写密钥等。

在我的应用程序中，我 require_once("../AWS/sdk.class.php") 出现错误：

“PHP 致命错误：在第 50 行的 /Applications/MAMP/htdocs/AWS/config.inc.php 中找不到类 'CFCredentials'”

* * *

我通过了 sdk_compatibility_test.php 测试，所以有人可以帮我找出这里的问题吗？？？

我不知道 sdk.class.php 是如何访问 CFCredentials 类的，因为它从不包含/需要“utilities/utilities.class.php”，但我想亚马逊的开发人员已经把它联系起来了。我想我只是错过了一些东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:51:12.640

[使用 Composer Package Manager for PHP 安装 AWS](http://docs.aws.amazon.com/awssdkdocsphp2/latest/gettingstartedguide/sdk-php2-installing-the-sdk.html#sdk-php2-installing-via-composer)，这是一个清晰的过程，通常开箱即用。

您还将获得轻松安装其他基于 PHP 的软件包的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:36:19.987

我最终遇到的问题是另一个框架（在本例中是 Yii）有一个自动加载器，它拒绝允许 AWS 类加载器加载。如果您像我一样在 5.2 中运行 MAMP，您将无法在您拥有的任何框架之前将 AWS 类加载器更改为自动加载。以下可怕的代码解决了我的问题：

```
spl_autoload_unregister(array('YiiBase', 'autoload'));
require_once('...AWSSDKforPHP/sdk.class.php');
spl_autoload_register(array('YiiBase', 'autoload')); 
```

您需要更改 AWSSDK 路径以正确指向 sdk 类 - 在我的情况下，我只使用了绝对路径。

这通常会通过使用 spl_autoload_unregister 参数将自动加载器添加到自动加载器队列中来代替，但在 php 5.2 中这是不可用的。

# c# - 如何处理 Windows 8 XAML/C# 应用程序崩溃

> ID：13215425
> 
> 赞同：2
> 
> 时间：2012-11-04T02:14:20.757
> 
> 标签：c#, xaml, crash, windows-8

我现在在商店里有一个 Windows 8 应用程序，它已通过 Windows 8 和 Windows RT 设备的认证。此外，在我的 Windows 应用商店仪表板中，没有显示崩溃。但是，出于某种原因，评论我的应用程序的评论者说它在 Windows RT 中启动时崩溃，我无法测试（我没有 Windows RT 设备）。

为了帮助诊断问题，我决定创建一个崩溃页面，如果应用程序在上次打开时崩溃，该页面将启动。有没有办法在应用程序崩溃之前设置一些变量？这样，我可以创建一个变量“recoverymode”，该变量将在下次启动应用程序时启动一个页面，询问更多信息。或者是否有某种方法可以为我不知道的 Windows 8 应用程序执行此操作，它会自动向我发送崩溃数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:08:40.067

结帐：[https ://github.com/codenauts/HockeySDK-WindowsPhone](https://github.com/codenauts/HockeySDK-WindowsPhone)

它适用于 win 手机，但它可能会给您一些想法，并且可能非常相似。基本上就在崩溃之前，可能是未处理的异常，崩溃数据被序列化到存储中。该应用程序在启动时检查该文件，如果它存在，它会提示用户询问他们是否要发送崩溃数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:32:32.610

如果您的应用程序崩溃，您迟早会从 Windows 应用商店收到包含崩溃的 CAB 文件。Windows 应用商店还提供其他应用质量报告。见这里：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh967782.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh967782.aspx)

或者，您也可以使用 3rd 方崩溃报告服务，例如上面提到的 HockeySDK。我见过像 Crittercism [http://www.crittercism.com/](http://www.crittercism.com/)和 BugSense [http://www.bugsense.com/](http://www.bugsense.com/)这样的供应商也提供崩溃报告作为服务，他们刚刚宣布支持 Windows Phone 8 和 Windows 8。我认为甚至 Telerik 也提供了类似的功能。可能还有更多，所以值得一试。。

# c# - 使用 PointAnimation 对线进行动画处理

> ID：13215426
> 
> 赞同：1
> 
> 时间：2012-11-04T02:14:28.777
> 
> 标签：c#, wpf

我希望为`Line`using设置动画`PointAnimation`，但发现线的端点不是依赖属性，个体`X`和`Y`组件是。

是否可以子类化`Line`，为端点添加依赖属性（例如`P1`，`P2`），然后使用 为此类的实例设置动画`PointAnimation`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:32:19.630

您可以创建一条线作为路径：

```
<Path Stroke="Black" StrokeThickness="1">
    <Path.Data>
        <LineGeometry x:Name="line" StartPoint="0,0" EndPoint="100,100"/>
    </Path.Data>
</Path> 
```

现在您可以为 LineGeometry 的 StartPoint 和 EndPoint 属性设置动画。

# ide - 用于 Solaris 的免费 TCL IDE

> ID：13215428
> 
> 赞同：1
> 
> 时间：2012-11-04T02:14:57.763
> 
> 标签：ide, tcl, solaris, activetcl

我一直在我的 Windows 桌面上使用 ActiveTCL，但现在我有一个 Solaris 工作站，我需要一个新的 IDE。我是学生，所以 ActiveTCL 的商业版不是一个选项。有没有适用于 Solaris 的免费 TCL 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:13:25.730

The best you will be able to do for free is vim with syntax highlighting. You can use frink to help look for errors. If you still have access to a windows machine you can use notepad++ with the ssh module. That seems to work pretty well and is relatively seamless.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:53:16.140

vim 和 emacs 都是不错的选择，而且 Eclipse 有一个动态编程插件也支持 Tcl。就个人而言，当我将 Eclipse 用于 Java 之类的东西时，我发现像 emacs 这样的简单编辑器（带有语法突出显示）要方便得多。

# vb.net - DataGridView 验证：如何确保一行的每个单元格都包含一个值？

> ID：13215431
> 
> 赞同：1
> 
> 时间：2012-11-04T02:15:37.357
> 
> 标签：vb.net, validation, datagridview

我可以`DataGridView`控制我的表单。它有 6 列和 6 行（永远不会改变）。当用户在任何列下的单元格中输入数据时，我想确保他们填写该行的其余单元格。所以基本上，如果他们将数据放在第 0 行 - 第 0 列，我想确保第 0 行 - 第 1 列，第 0 行 - 第 2 列等等......其中有数据。在将其提交到数据库之前，出于验证原因，我需要它。如果该行的字段未全部填写，我想显示一条消息，其中包含需要修复的行。

任何帮助是极大的赞赏！

这是一个更新，我已经弄清楚需要做什么。

```
Private Sub ValidateYear()

    Dim oInvYear As New Collection
    Dim oErrorMsg As New System.Text.StringBuilder
    Dim blnErrFound As Boolean = False

    'Loop through year column and check for number, if blank skip'
    For i As Integer = 0 To dgvIntervals.Rows.Count - 1
        If Not String.IsNullOrEmpty(dgvIntervals.Rows(i).Cells(4).Value) Then
            If Not IsNumeric(dgvIntervals.Rows(i).Cells(4).Value) Then
                oInvYear.Add(i + 1)
                blnErrFound = True
            End If
        End If
    Next

    'If errors found, lets append them to our message'
    If blnErrFound Then
        oErrorMsg.Append("PLEASE FIX ERRORS BELOW BEFORE PROCEEDING")
        oErrorMsg.AppendLine("")
        oErrorMsg.Append(vbCrLf)

    'Get our year count errors'
    If oInvYear.Count > 0 Then
        oErrorMsg.Append("* Year must be a number- ")
        oErrorMsg.Append("Line(s): ")
        For i As Integer = 1 To oInvYear.Count
            If i >= 2 Then
                oErrorMsg.Append(", ")
            End If
            oErrorMsg.Append(oInvYear.Item(i).ToString)
        Next
        oErrorMsg.Append(vbCrLf)
    End If

    'Show them to our user'
    MsgBox(oErrorMsg.ToString)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:01:27.883

使用 DataGridView 控件的 CellValidating 或 RowValidating 事件来验证用户输入的数据。

```
Private Sub OnRowValidating(ByVal sender As Object, ByVal args As DataGridViewCellCancelEventArgs) Handles DataGridView1.RowValidating
  Dim row As DataGridViewRow = DataGridView1.Rows(args.RowIndex)
  For Each cell As DataGridViewCell In row.Cells
     If String.IsNullOrEmpty(cell.Value.ToString()) Then
        'show a message box or whatever...
     End If
  Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:45:26.440

那么在这种情况下，我建议您从您拥有的每一行中读取每个单元格，并且当您在任何单元格中找到一个值时，您需要确保其他单元格存在值。

我为你做了一个小样本，我希望这能帮助你解决你的问题。

起初我创建了这个实体来填充我的网格视图：

```
 public class MyEntity
    {
        public string ID { get; set; }

        public string Name { get; set; }

        public string LastName { get; set; }
    } 
```

这是我的 aspx 页面上的代码

```
<form id="form1" runat="server">
    <div>
        <asp:GridView ID="grvData" runat="server" AutoGenerateColumns="false">
            <Columns>
                <asp:TemplateField HeaderText="ID" >
                    <ItemTemplate >
                        <asp:Label ID="lblID" runat="server" Text='<%# Eval("ID") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField  HeaderText="Name">
                    <ItemTemplate>
                        <asp:TextBox ID="txtName" runat="server" Text='<%# Eval("Name") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField  HeaderText="Last Name">
                    <ItemTemplate>
                        <asp:TextBox ID="txtLastName" runat="server" Text='<%# Eval("LastName") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <br />
        <asp:Button ID="btnValidate" runat="server" Text="Validate" OnClick="btnValidate_Click" />
        <br />
        <asp:Label ID="lblMessage" runat="server" ForeColor="Red" Text="">

        </asp:Label>
    </div>
    </form> 
```

然后在我的代码后面

```
public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                List<MyEntity> data = GenerateData();
                this.grvData.DataSource = data;
                this.grvData.DataBind();
            }
        }

        protected void btnValidate_Click(object sender, EventArgs e)
        {
            int columns = this.grvData.Columns.Count - 1;
            foreach (GridViewRow row in this.grvData.Rows)
            {
                int count = columns;
                TextBox tbName = row.Cells[1].FindControl("txtName") as TextBox;
                TextBox tbLastName = row.Cells[2].FindControl("txtLastName") as TextBox;
                if (!string.IsNullOrWhiteSpace(tbName.Text))
                {
                    count--;
                }
                if (!string.IsNullOrWhiteSpace(tbLastName.Text))
                {
                    count--;
                }
                if (count != columns && count != 0)
                {
                    this.lblMessage.Text = "Invalid input, you need to supply data for every field.";
                    break;
                }
            }
        }

        private List<MyEntity> GenerateData()
        {
            List<MyEntity> list = new List<MyEntity>();
            for (int i = 0; i < 5; i++)
            {
                MyEntity entity = new MyEntity() { ID = Guid.NewGuid().ToString() };
                list.Add(entity);
            }
            return list;
        }
    } 
```

如您所见，它非常简单，如果您要加载太多包含许多列的记录，我不建议您使用这种方法，因为这可能会影响性能，但在您的情况下，我认为这应该可行。

PS。我的答案是使用可视化 C#，因为当我阅读它时，您没有提及语言，而现在您只是更改了它。

# wordpress - 边栏阻止 iPhone 上的内容

> ID：13215432
> 
> 赞同：1
> 
> 时间：2012-11-04T02:15:45.483
> 
> 标签：wordpress

如果您在 iPhone 上访问[http://www.windowswave.com](http://www.windowswave.com)，您会看到我网站的灰色侧边栏挡住了整个内容部分。

侧边栏不应该显示在 iPhone 上，但在对我的 WordPress 主题进行了一些自定义后，它现在可以显示。我只是不确定如何解决这个问题。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:55:21.830

试试这个

```
@media only screen and (min-device-width: 320px) and (max-device-width: 480px)
{
    .sidebar{
         display:none;
     }
} 
```

欲了解更多信息，请访问此[适用于 iPhone 的 CSS 媒体查询](https://stackoverflow.com/questions/5329110/css-media-queries-for-iphone)

# python - 获取类的 self.__module__ 无论如何导入

> ID：13215433
> 
> 赞同：8
> 
> 时间：2012-11-04T02:15:50.930
> 
> 标签：python

我有一个库类，其中取决于它的导入方式，一个依赖于`self.__module__`标识更改行为的方法 - 取决于我是相对还是绝对导入它。有没有办法强制`self.__name__`类的属性绝对返回自己？

我意识到一种解决方案是强制每个人以相同的方式导入子类，但想知道是否有办法从库的角度强制它。

**概要结构**

我在图书馆有一个模块

```
project/
    mylib/
        foo.py
            LibraryClass
            def get_name(self):
                return "%s.%s.%s" % \
                    (self.__module__, self.__class__.__name__, self.some_init_property)
    prog/
        utils.py
            fooClass(LibraryClass)
        bar.py
            def some_func()
               #see below 
```

在，我有一个导入器通过我们的 django 项目的设置文件中的类名字符串`mylib`导入所有子类。`LibraryClass`

基本上，我们看到的行为取决于您的导入方式。所以我在 bar.py 中观察到了两种行为：

```
def some_func_absolute():
    from prog.utils import fooClass
    f = fooClass("lalala")
    print f.get_name()
    #prints prog.utils.fooClass.lalala 
```

相对

```
 def some_func_relative():
    from utils import fooClass
    f = fooClass("lalala")
    print f.get_name()
    #prints foo.fooClass.lalala 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:55:35.390

我怀疑这里的正确做法是在 python 路径中永远不要有父/子目录。我还怀疑，鉴于您这样做，这可能是不可能的。取决于你在做什么，也许你可以`.__file__`改用它，不管它是如何导入的，它仍然应该是一致的？

# c++ - C++ wchar_t 错误未定义

> ID：13215434
> 
> 赞同：3
> 
> 时间：2012-11-04T02:16:22.117
> 
> 标签：c++, wchar-t

我是 C++ 新手。

我知道 wchar_t 是宽字符。

下面的代码有什么问题？？我没有包括适当的图书馆吗？

```
#include<iostream.h>
#include<conio.h>
void main()
{
wchar_t *s=L"Hello, World";
cout<<s;
getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:03:22.187

很简单，停止使用 Borland Turbo C - 大约 20 年前我第一次使用 3.1 版本时它已经过时了。那个时代的 Turbo C 没有 iostream（无扩展名）文件，因为它是在 stl 之前发布的。在此之前，确实在iostream.h中找到了这些函数

因此，我希望它也没有定义 wchar_t - 我什至不记得当时是否存在多字节的东西，unicode 当然不是考虑因素。

对于它的价值，我仍然在 5 1/4" 软盘上获得了 Turbo C 的副本 - 是的！软盘...获取本世纪的编译器！

使用 MinGW（约 70MB 下载）或 Visual Studio Express（数百）获取 Code::Blocks，地狱——即使 DevCpp 也没有 Turbo C 过时。

（哦，您已经向我表明，通过包含 conio.h，您极有可能选择编译器）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T02:21:58.977

这里有很多问题，虽然都很小：

```
#include<iostream.h> 
```

这应该是`#include <iostream>`标准 C++ 头文件末尾没有 a `.h`。

```
void main() 
```

`main`应该返回一个`int`，而不是`void`。

```
wchar_t *s=L"Hello, World";
cout<<s; 
```

要编写一个宽字符串，您要使用命名空间`wcout`中的`std`，所以它应该如下所示：

```
std::wcout << s; 
```

请注意`getch`：

```
getch(); 
```

... 很常见，但在技术上不是标准的，因此您不能在真正可移植的代码中使用它。但是，如果您只关心 Windows，那么您可能不必担心。

# elasticsearch - elasticsearch - 构建查询时如何引用多字段

> ID：13215435
> 
> 赞同：0
> 
> 时间：2012-11-04T02:16:21.410
> 
> 标签：elasticsearch

我无法使用导航符号访问多个字段

我的映射：

```
{
"mappings":{
    "document":{
        "properties":{
            "tags":{
                "type":"object",
                "properties":{
                    "title":{
                        "fields":{
                            "partial":{
                                "search_analyzer":"main",
                                "index_analyzer":"partial",
                                "type":"string"
                            },
                            "title":{
                                "type":"string",
                                "analyzer":"main"
                            },
                            "title2":{
                                "type":"string",
                                "analyzer":"main"
                            }
                        },
                        "type":"multi_field"
                    }
                }
            }
        }
    }
},

"settings":{
    "analysis":{
        "filter":{
            "name_ngrams":{
                "side":"front",
                "max_gram":50,
                "min_gram":2,
                "type":"edgeNGram"
            },
            "name_ngrams_back":{
                "side":"back",
                "max_gram":50,
                "min_gram":2,
                "type":"edgeNGram"
            },
            "name_middle_ngrams":{
                "type":"nGram",
                "max_gram":50,
                "min_gram":2
            }
        },

        "analyzer":{
            "main":{
                "filter": ["standard", "lowercase", "asciifolding"],
                "type": "custom",
                "tokenizer": "standard"
            },
            "partial":{
                "filter":["standard","lowercase","asciifolding","name_ngrams"],
                "type": "custom",
                "tokenizer": "standard"
            }
        }
    }
} 
```

}

测试数据：

```
curl -XPUT localhost:9200/testindex/document/1 -d '{"title": "Fight for your life"}'
curl -XPUT localhost:9200/testindex/document/2 -d '{"title": "Fighting for your life"}'
curl -XPUT localhost:9200/testindex/document/3 -d '{"title": "Will you just start the    fight"}' 
```

搜索：

```
 curl -XGET 'localhost:9200/testindex/document/_search?q=title:life&pretty=1'                   // Ok
 curl -XGET 'localhost:9200/testindex/document/_search?q=document.title:life&pretty=1'     // Ok

 // Return 0 hits.  I expect this to return same result as the above queries.
 curl -XGET 'localhost:9200/testindex/document/_search?q=title.title2:life&pretty=1'
 curl -XGET 'localhost:9200/testindex/document/_search? q=document.title.title2:life&pretty=1' 
```

构建查询时如何引用多个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:26:07.620

您已经为字段定义了多字段映射`tags.title`，但您正在索引和搜索`title`字段。试试这个测试数据：

```
curl -XPUT localhost:9200/testindex/document/1 -d '{"tags":{"title": "Fight for your life"}}'
curl -XPUT localhost:9200/testindex/document/2 -d '{"tags":{"title": "Fighting for your life"}}'
curl -XPUT localhost:9200/testindex/document/3 -d '{"tags":{"title": "Will you just start the    fight"}}' 
```

通过以下搜索：

```
curl -XGET 'localhost:9200/testindex/document/_search?q=title:life&pretty=1'
curl -XGET 'localhost:9200/testindex/document/_search?q=tags.title:life&pretty=1'
curl -XGET 'localhost:9200/testindex/document/_search?q=document.tags.title:life&pretty=1'

curl -XGET 'localhost:9200/testindex/document/_search?q=title2:life&pretty=1'
curl -XGET 'localhost:9200/testindex/document/_search?q=tags.title.title2:life&pretty=1'
curl -XGET 'localhost:9200/testindex/document/_search?q=document.tags.title.title2:life&pretty=1' 
```

# mysql - 触发器分隔符问题

> ID：13215438
> 
> 赞同：0
> 
> 时间：2012-11-04T02:17:54.373
> 
> 标签：mysql, triggers

我在使用 MySQL 和 phpmyadmin v3.4.5 在表上创建触发器时遇到问题。经过一些研究，这似乎是一个常见问题，但我发现的修复都没有为我工作。我得到的错误是：

```
 #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END' at line 8 
```

我试图运行的查询是：

```
 CREATE TRIGGER book_insert
 AFTER INSERT ON `books`
 FOR EACH ROW BEGIN
 INSERT INTO products
      (ProductID,Type,Title,Price) 
 VALUES 
      (books.ProductID,0,books.Title,0)
 END
 // 
```

我已经在查询输入下方的文本中将分隔符设置为 //，因为我读到 PHPMyAdmin 不喜欢您在查询中使用分隔符关键字。我也玩过分隔符的位置，在 END 和 '//' 之间没有空格，有一个空格，然后在另一行尝试。我还尝试了不同的分隔符，例如默认分号、2 个美元符号和 2 个英镑符号。这似乎是一件非常小而愚蠢的事情，但我不知道它不喜欢那个陈述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:29:13.967

DELIMITER 不是 SQL 语法，它是 mysql 命令行客户端接受以更改其读取和向服务器发送查询的方式的命令。PhpMyAdmin 和服务器都对此一无所知。

在这种情况下，只需将触发器作为查询发送，而无需尾随 //。或者要让 PMA 正确执行它，您可能必须将其放入文件中并发送。我不确定究竟是因为我发现 PMA 作为一种工具经常会做类似这样的愚蠢事情，这会让你的生活更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:52:15.863

所以我终于通过从查询中删除 BEGIN 和 END 并且根本不使用任何分隔符来让它工作。我不确定我的 MySQL 版本是否存在 BEGIN/End 语句或其他问题，但最终创建了触发器。

# php - 基于键/值对的条件输出循环数组

> ID：13215445
> 
> 赞同：2
> 
> 时间：2012-11-04T02:20:19.053
> 
> 标签：php, foreach

我有一个包含以下列的数组：

*   任务
*   地位

我想打印一个显示任务列表的表格，而不是状态列。相反，对于状态 = 0 的任务，我想添加一个标签`<del>`以使已完成的任务被划掉。这是我当前的代码：

```
foreach ($row as $key => $val){
if ($key != 'Status') print "<td>$val</td>";
else if ($val == '0') print "<td><del>$val</del></td>";
} 
```

这似乎是正确的，但是当我打印出来时，它会打印带有`<del>`标签的所有任务。所以基本上每次都运行“else”子句。

这是 var_dump($row)：

```
array
  'Task' => string 'Task A' (length=6)
  'Status' => string '3' (length=1)
array
  'Task' => string 'Task B' (length=6)
  'Status' => string '0' (length=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:00:15.277

与其作为键/值对进行迭代，不如尝试仅使用元素本身进行迭代并检查各个索引：

```
foreach ($row as $task) {
    $value = ($task['Status'] == '0') ? '<del>' . $task['Task'] . '</del>' : $task['Task'];
    echo '<td>' . $value . '</td>';
} 
```

# android - 如果使用 android 工具来重命名包名称而不出现任何错误/冲突

> ID：13215449
> 
> 赞同：1
> 
> 时间：2012-11-04T02:20:56.260
> 
> 标签：android, eclipse, package, rename, provider

我重命名了我制作的应用程序的项目包名称，以便我可以在前一个应用程序的基础上制作另一个应用程序。我使用了 Android 工具 -> 重命名包名称。未发现错误。在进行下一步之前，我确实清理了项目：打开新应用程序。但是，它在启动时强制关闭。但是，如果我在手机上安装了以前的基础应用程序，我什至无法安装新应用程序：安装错误：`INSTALL_FAILED_CONFLICTING_PROVIDER`. 所以它必须与提供者不喜欢新的包名称有关。我进行了调试（我不确定如何使用），它指向提供程序包中的 Info.java。

我不知道该怎么做......我真的很想重命名包名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:29:55.680

检查应用程序中包含的内容提供程序的包名称。我假设您正在尝试从包含内容提供程序的源（Google 的应用程序/某些开源应用程序/您的应用程序）构建现有应用程序。如果您有多个包，请尝试重命名所有包或仅重命名包含内容提供程序的包。

您还必须确保重命名与您一致`AndroidManifest.xml`。

# node.js - node js buffer和var区别

> ID：13215456
> 
> 赞同：0
> 
> 时间：2012-11-04T02:22:08.647
> 
> 标签：node.js

如果我使用，则在使用节点 js 时

```
buf1= new Buffer(50);
and var buf=''; 
```

这个初始化有什么区别。我们什么时候应该使用缓冲区

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:02:45.917

您似乎对此感到困惑，或者只是以一种奇怪的方式措辞了这个问题。以我的经验，除非您正在处理流式传输或低级操作，否则您很少会想要在字符串之类的东西上使用缓冲区。您声明的第一个变量似乎是一个缓冲区，而第二个变量是一个字符串。如果您添加更多上下文，我将能够帮助您决定是否需要缓冲区或字符串。

一般来说，我认为 Buffer 上的文档是您所追求的：[http ://nodejs.org/api/buffer.html#buffer_buffer](http://nodejs.org/api/buffer.html#buffer_buffer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T12:02:11.893

当您必须处理二进制数据时使用缓冲区。例如用于从 utf8 编码到 base64

```
const newString = new Buffer("string").toString('base64'); 
```

[更多详情请点击这里](https://betterprogramming.pub/an-introduction-to-buffer-in-node-js-2237a9bce9da)

# android - Phonegap (Cordova) - 应用程序休眠超过 20 分钟后，Android Webview 冻结

> ID：13215458
> 
> 赞同：0
> 
> 时间：2012-11-04T02:22:51.987
> 
> 标签：android, cordova, cordova-2.0.0

我正在使用 Cordova 2.1.0 并在我的三星 Galaxy s3 (Android 4.0.1) 上看到问题：

在应用程序进入后台超过 20 分钟后，我再次启动它，WebView 完全冻结。根本没有 javascript 处理程序触发，而且 deviceready 或 resume 事件似乎永远不会触发。同样，这只发生在应用程序未使用大约 20 分钟或更长时间后。我必须强制重新启动才能让事情再次正常工作。我想知道是否有其他人经历过这种情况以及是否有任何解决方法。

--该问题似乎类似于此 Cordova jira 票[https://issues.apache.org/jira/browse/CB-1185](https://issues.apache.org/jira/browse/CB-1185)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:50:23.370

在阅读了上面的 jira 票后，我升级到了适用于 Android 的 cordova 2.2.0，问题似乎已解决。

# c++ - 为 C++ 类播种 rand()

> ID：13215461
> 
> 赞同：6
> 
> 时间：2012-11-04T02:23:29.083
> 
> 标签：c++, class, random, static-variables, random-seed

我正在研究一个`rand()`在构造函数中使用 a 的 C++ 类。我真的很想让这门课在几乎所有方面都能照顾好自己，但我不知道在哪里播种`rand()`。

如果我`rand()`在构造函数中播种，则每次构造我的对象类型的新实例时都会播种。因此，如果我要按顺序创建 3 个对象，它们都将在同一秒内创建，因此具有相同的种子`rand()`，为对象的 3 个实例中的每一个实例生成完全相同的数据。

我想`rand()`在类代码中播种，而不是在创建对象之前在程序的主函数中进行。我想过做一个`static bool seeded;`变量来表示是否`rand()`已经播种，但我不确定如何在创建类时将其初始化为 false。

我的想法是这样的

```
myConstructor(){
    if(!seeded){
        srand(time(NULL));
        seeded = true;
    }

    myVariable = rand()%maxVal;
} 
```

我认为如果我能在程序开始时弄清楚如何将静态值初始化为 false 一次，这将起作用。我的理解是，如果这个静态值是静态的，那么将这个静态值更改为 true 将跨越对象的所有实例，因此只会在第一次创建该对象类型时执行种子函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T02:28:13.483

> 我认为如果我能在程序开始时弄清楚如何将静态值初始化为 false 一次，这将起作用。

```
// my_class.h
class my_class {
public:
  // ...
private:
  static bool seeded;
};

// my_class.cpp
bool my_class::seeded = false; 
```

确保`seeded`在实现文件中定义。否则，包含您的标头的每个文件都将获得自己的静态成员定义，并且还可能导致链接器问题，因为它可以被多次定义。

附带说明一下，如果静态成员是 const 整数类型，则可以在声明时对其进行分配。

另一种选择是这个，我个人更喜欢它来完成这项任务：

```
my_class::my_class()         
{
    static bool seeded = false;
    if(!seeded) {
        srand(time(NULL));
        seeded = true;
    }

    myVariable = rand() % maxVal;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T02:55:58.927

此问题是使用`rand()`. C++11 引入了`<random>`解决这个问题和其他问题的库。

新 API没有单一的全局（或每个线程）状态，而是`rand()`通过将 RNG 封装在具有值语义的对象中来显式控制 RNG 的状态。

您可以将状态维护为成员变量，或者如果您希望所有实例共享一个，或者任何其他对您的使用有意义的情况，则可以将其维护为静态成员。

```
#include <random> // for mt19937, uniform_int_distribution
#include <iostream>

std::mt19937 seeded_engine() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    return std::mt19937(seed);
}

struct C {
    // Hold RNG state as a member variable
    std::mt19937 eng = seeded_engine();

    int foo() {
        // use the member variable to generate random numbers in a member function.
        return std::uniform_int_distribution<>(1,10)(eng);
    }
};

int main() {
    C c, d;
    std::cout << c.foo() << '\n';
    std::cout << d.foo() << '\n';
} 
```

有关. [_](https://stackoverflow.com/a/34490647/365496) _`seeded_engine()`

（除此之外，上面还使用了一些 C++11 特性`<random>`；统一初始化和非静态成员的类内初始化。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T02:32:21.727

使用仅初始化一次的静态变量功能：

```
static bool seed()
{
  srand(time(NULL));
  return true;
}
myConstructor(){
  static bool seeded = seed();
  myVariable = rand()%maxVal;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T02:28:29.693

该问题类似于单例实例化的问题。使用你的操作系统的一个特性，比如`pthread_once`or`boost::call_once`和一个`static`成员来执行一次种子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-25T06:25:04.430

bames53 有一个很好的答案。现在将所有这些都很好地放入一个独立的整数生成函数中：

```
int generateRandom(int min, int max) {
   std::mt19937 eng{std::chrono::high_resolution_clock::now().time_since_epoch().count()};
   return std::uniform_int_distribution<>(min,max)(eng);
} 
```

# matlab - 生成几个随机值，其中总和等于指定标准（matlab）

> ID：13215463
> 
> 赞同：1
> 
> 时间：2012-11-04T02:24:11.783
> 
> 标签：matlab, random, matrix, row

> **可能重复：**
> [加到 100 的随机数：Matlab](https://stackoverflow.com/questions/8064629/random-numbers-that-add-to-100-matlab)

我希望执行以下操作：

生成几个 10 到 50 之间的随机数。

让随机数之和等于 500。

到目前为止，我所拥有的是：

```
sum = 500
n=5
b = [ ]
for i = 1:1:n-1,
a = randi([10,50])
b = [b a]
end 
```

n=5 就是一个例子，它可以等于任何东西。

我正在寻找 b 的总和等于 500（这可能是 'sum = 500' 与总和等于 500 之前的值的总和之间的差异 - 使最后一个数字实际上不是随机的，这没关系）

```
b =

23    10    43    30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:40:31.243

查看这个[带有固定总和](http://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum)FEX 文件的漂亮随机向量生成器。我想这会回答你的问题。

# php - Changed connection page to PDO and got mysql_error()

> ID：13215466
> 
> 赞同：4
> 
> 时间：2012-11-04T02:24:37.617
> 
> 标签：php, mysql, pdo

Was going over my code to turn all my queries into prepared queries (PDO). I changed my connection page accordingly. As I was cleaning up my functions page I came across the error `mysql_error() expects parameter 1 to be resource, integer given` which referred to my email function

```
email_exists($email){
    $query1 = mysql_query("SELECT COUNT(user_id) FROM tempusers WHERE 
    `email` = '$email'") OR die(mysql_error(0));
    $email = sanitize($email);

    return (mysql_result($query1,0)==1)? true : false;
} 
```

Because it is a function page meaning I can't call on the variables in my connection page coupled with the fact I'm still stuck in the old query ways I'm having a hard time fixing this query. I'd appreciate any ideas on the process of making this query work as well as any tips in general.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:01:40.803

You should handle errors in your function the same way you handle them everywhere else.

However, as this is inside a function, you need to make the connection available in the scope of the function.

There are several ways to do that, some examples (from not that good to better...):

1.  declare your PDO connection variable global in your function. I would not recommend this as a final solution, but it would work while you improve on things;
2.  add the PDO connection as an additional parameter to your function. Although better than 1., you would need to change all function calls to include the new parameter(s);
3.  refactor to OOP and use dependency injection to add your PDO connection to your email class / object.

# c++ - Eigen：评估 A*S*A_transpose 并将结果存储在对称矩阵中的最佳方法

> ID：13215467
> 
> 赞同：9
> 
> 时间：2012-11-04T02:25:12.420
> 
> 标签：c++, linear-algebra, eigen

令 S 为对称 nxn 矩阵，A 为 amxn 矩阵。

给定：B = A * S * A_transpose（其中“*”表示矩阵乘积运算）

B 也将是一个对称矩阵。

使用 tuxfamily Eigen 库，版本 3，什么是实现这种计算的干净有效的方法？（高效，我主要是指在对称性使它们变得不必要的情况下不执行 B 元素的重复计算。）

我猜它会使用 SelfAdjointView，但我搜索了高低并没有找到一个干净的例子。

该应用程序是一个卡尔曼滤波器，它在很大程度上取决于涉及（对称）协方差矩阵的操作，所以我想确保实现/设计正确。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T20:14:40.907

这应该很简单。正如您自己所说，您可以通过 SelfAdjointView 让 Eigen 意识到您的矩阵是对称矩阵。还有另一个视图，即 TriangularView，您可以使用它来存储您的结果。根据[参考](http://eigen.tuxfamily.org/dox/QuickRefPage.html)，如果您分配给 TriangularView，则仅评估 rhs 的相关部分。所以

```
B.triangularView<Upper>() = A * S.selfadjointView<Upper>() * A.transpose(); 
```

将结果存储在 B 的上三角形中。然后您可以`B.selfadjointView<Upper>`在任何进一步的计算中使用。我不确定这在所需操作方面是否是最佳的，您可能会做一些基准测试来验证。

# c# - 无法访问 List<> 中的 List<>

> ID：13215468
> 
> 赞同：2
> 
> 时间：2012-11-04T02:25:15.027
> 
> 标签：c#

泛型菜鸟努力访问包含在列表中的类中的列表。基本上我试图列出用户输入的人的职业（我确信有一种更简单的方法可以做到这一点，但这段代码是为了练习泛型而编写的）。

**班级代码**

```
namespace GenericPersonClass
{
class GenericPerson<T>
{
    static public List<T> Occupations = new List<T>();
    string name, famName;
    int age;

    public GenericPerson(string nameS,string famNameS,int ageI, T Note)
    {
        name = nameS;
        famName = famNameS;
        age = ageI;
        Occupations.Add(Note);
    }

    public override string  ToString()
        {

            return "The name is " + name + " " + famName + " and they are " + age;
        }
  }
} 
```

**主要代码**

```
namespace GenericPersonClass
{
class Program
{
    static void Main(string[] args)
    {
        string token=null;
        string nameS, lastNameS,occS;
        int age;
        List<GenericPerson<string>> Workers = new List<GenericPerson<string>>();

        while (token != "no" || token != "No")
        {
            Console.WriteLine("Please enter the first name of the person to input");
            nameS = Console.ReadLine();
            Console.WriteLine("Please enter the last name of the person " + nameS);
            lastNameS = Console.ReadLine();
            Console.WriteLine("How old is " + nameS + " " + lastNameS);
            age = int.Parse(Console.ReadLine());
            Console.WriteLine("What is the occupation of " + nameS + " " + lastNameS);
            occS = Console.ReadLine();
            Console.WriteLine("Enter more data?...Yes/No");
            Workers.Add(new GenericPerson<string>(nameS, lastNameS, age, occS));
            token = Console.ReadLine();
        }

        Console.WriteLine("You provide the following employment...\n");
        for (int i = 0; i < Workers.Count; ++i)
        {
            Console.WriteLine("{0} \n", Workers[0].Occupations[i]); 
//This line above is shown as wrong by VS2010, and intellisense does not see Occupations...
        }

    }
}
} 
```

谢谢你的帮助，狮子座

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T02:33:16.053

因此，您正在尝试从实例变量中访问**静态变量。** `List`这就是那里的问题。您可以使用类**而不是**实例直接访问它。

就像是：

```
GenericPerson<string>.Occupations[i] 
```

它与 - 没有任何关系`List`- 这完全与**静态**部分有关。

# php - PDO 为 mysql_num_rows 准备了等效语句

> ID：13215472
> 
> 赞同：2
> 
> 时间：2012-11-04T02:26:10.987
> 
> 标签：php, mysql, pdo

我希望这个问题看起来并不含糊，但我正在将旧的 mysql 语句转换为 PDO 准备语句，并且我已经搜索但找不到答案。`$count=mysql_num_rows($stmt);`PDO中的等价物是什么？我已经包含了我的代码，所以你可以看到我在做什么，但基本上我正在为用户创建一个登录页面，我有一个 PDO 语句`SELECT`用于在数据库中搜索匹配的用户名和密码行。如果它想出一个，那么它将把`$count`变量增加到一个，这样我的`IF`陈述就成立了。

CHECK_LOGIN.PHP

```
<?php
require 'functions.php';
require 'DB.php';
ob_start();

// Define $myusername and $mypassword 
$myusername=$_POST['myusername']; 
$mypassword =$_POST['mypassword'];
$mypassword = md5($_POST['mypassword']);

checkLogin($conn,$myusername,$mypassword,$stmt);

// Mysql_num_row is counting table row
$count=mysql_num_rows($stmt);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
    session_start();
    $_SESSION['myusername'] = $myusername;
    session_is_registered("myusername");
    session_is_registered("mypassword"); 
    $myusername1 = $_SESSION['myusername'];
    //UPDATE LAST LOGIN IN DATABASE
    date_default_timezone_set('America/Chicago');
    $last_login = date('m/d/Y h:i:s a', time());
    lastLogin($conn,$myusername1,$last_login);
    header("location:form.php");

}
else {

echo "Wrong Username or Password";

}
ob_end_flush();
?> 
```

FUNCTION.PHP 中的函数

```
function checkLogin($conn,$myusername,$mypassword,$stmt){

$myusername = stripslashes($myusername);
$myusername = mysql_real_escape_string($myusername);
$stmt = $conn->prepare('SELECT * FROM `CLL_users` WHERE `user_name`=:myusername AND `password`=:mypassword');
$stmt->execute(array(':myusername' => $myusername, ':mypassword' => $mypassword));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T02:29:59.237

从这里检查示例 #2：[PDOStatement::rowCount](http://php.net/manual/en/pdostatement.rowcount.php)

> For most databases, PDOStatement::rowCount() does not return the number of rows affected by a SELECT statement. Instead, use PDO::query() to issue a SELECT COUNT(*) statement with the same predicates as your intended SELECT statement, then use PDOStatement::fetchColumn() to retrieve the number of rows that will be returned. Your application can then perform the correct action.

# c# - 有效地将扩展字符串映射到图标 URL

> ID：13215473
> 
> 赞同：1
> 
> 时间：2012-11-04T02:26:12.180
> 
> 标签：c#, asp.net, sharepoint, search, file-type

我有一个托管在内置搜索的 CMS（sharepoint 2013）上的 ASP.NET Web 应用程序。

使用搜索运行文件查询时，文件类型的唯一指示是扩展字符串，格式不带句点`"PNG" or "JPG"`

我没有取回文件，我只是得到描述文件的元数据。需要明确的是，我没有得到任何 MIME 类型或文件对象，我只是得到一个扩展字符串。

我在网站上四处寻找这样的问题，但我没有看到。

似乎可能有某种方法返回一个字符串，并在其签名中接受一个字符串输入，并搜索某种类型的对象集合，如下所示：

最后结果：

```
static class FileIcons
{
    static public string PDF = string.Format("{0}", SPContext.Current.Site.ServerRelativeUrl + "_layouts/15/monkeysphere/images/icons/pdf.png");
    static public string Word = string.Format("{0}", SPContext.Current.Site.ServerRelativeUrl + "_layouts/15/monkeysphere/images/icons/word.png");
    static public string Generic = string.Format("{0}", SPContext.Current.Site.ServerRelativeUrl + "_layouts/15/monkeysphere/images/icons/file.png");

    static private Dictionary<String, String> IconUrls = new Dictionary<String,String>() 
                        {
                            {"JPG", Picture},{"JPEG", Picture},{"GIF", Picture},{"PNG", Picture},
                            {"PDF", PDF},{"DOC", Word},{"DOCX", Word},{"XLS", Excel},{"XLSX", Excel},{"PPT", PowerPoint},{"PPTX", PowerPoint}
                        };

    static public string GetIconUrlFromExtension(string extension)
    {
        var formattedExtension = extension.Trim().Replace(".","").ToUpper();
        if (string.IsNullOrEmpty(extension) || !IconUrls.ContainsKey(formattedExtension))
            return Generic;
        return IconUrls[formattedExtension];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:53:53.267

我认为a`Dictionary`将是一个更好的选择。像这样的东西：

```
public static class IconUrls {
    static Dictionary<string, string> _extensions;
    static string DefaultUrl = "~/siteroot/images/icons/genericicon.png";

    static IconUrls {
        extensions = new Dictionary<string, string>() {
            { "JPG", "~/siteroot/images/icons/jpegicon.png" }, 
            { "JPEG", "~/siteroot/images/icons/jpegicon.png" }
        }
    }

    public static Dictionary<string, string> Extensions {
        get {
            return _extensions;
        }
    }

    public static string GetIconUrl(string extension) {
    {
        if(string.IsNullOrEmpty(extension) || !_dictionary.ContainsKey(extension.Trim().ToUpper()))
            return DefaultUrl;
        return _extensions[extension.Trim().ToUpper()];
    }
} 
```

您还可以从配置文件加载映射，以免对其进行硬编码。

# c - char* from char[] 结构成员

> ID：13215475
> 
> 赞同：3
> 
> 时间：2012-11-04T02:26:39.130
> 
> 标签：c, struct, char

我有一个结构：

```
typedef struct {
    LogLevel level;
    char message[255];
} LogMessage; 
```

然后我有一个函数，它接收一个指向 LogMessage 结构的指针，并且需要调用一个接受 char* 的函数：

```
xStatus = xQueueReceive(xQueueHandleGSMSend, &lReceivedData, portMAX_DELAY);

if(xStatus == pdPASS)
{
    logSimpleMessage(&lReceivedData->message, 1);
} 
```

这是 logSimpleMessage 函数的原型：

```
void logSimpleMessage(const char * message, int level); 
```

当我尝试使用上面的代码调用它时，我没有得到正确的消息地址（或内容）。如何获得指向 lReceivedData 消息的 char*？

编辑：我已尝试按照建议使用 lReceivedData->message，但我仍然没有得到正确的地址或值。这是 IDE 的屏幕截图...我在调试器中做错了什么吗，因为它似乎应该可以工作。

![在此处输入图像描述](../Images/0d995d154500e4e75960177a98872415.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T02:30:29.453

代替

```
logSimpleMessage(&lReceivedData->message, 1); 
```

你这样说：

```
logSimpleMessage(lReceivedData->message, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T02:32:15.133

```
&lReceivedData->message 
```

产生一个数组的地址。数组将在需要时衰减为指针，因此只需使用：

```
logSimpleMessage(lReceivedData->message, 1); 
```

您不能真正将数组传递给函数，数组将始终衰减为指向第一个元素的指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T02:31:42.607

您只需要传递`lReceivedData->message`给函数，删除`&`：

```
logSimpleMessage(lReceivedData->message, 1); 
```

当传递给函数时，一种类型`char[]`会衰减为一种。`char*`

# objective-c - ios6 mapkit 未以蓝点显示当前位置

> ID：13215478
> 
> 赞同：-2
> 
> 时间：2012-11-04T02:27:27.820
> 
> 标签：objective-c, ios, location, mapkit, coordinates

我正在使用 raywanderliech 教程作为参考。它在测试项目中完美运行。现在在我的实际项目中，我有一个带有许多按钮的视图控制器，在左下方，我有一个 mapkit。它大约是 3*3 魔方的大小。我想说的是它很小，不是全屏/半屏。所以我正在尝试这个测试项目中的示例。但它没有向我显示位置。它显示了世界地图。不是我的位置。

```
-(void)viewWillAppear:(BOOL)animated
{
CLLocationCoordinate2D zoomLocation;
zoomLocation.latitude = 39.281516;
zoomLocation.longitude = -76.580806;

MKCoordinateRegion viewRegion  = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5 *METERS_PER_MILE, 0.5*METERS_PER_MILE);

[_mapView setRegion:viewRegion animated:YES];
} 
```

我将纬度和经度更改为当前坐标。我使用网站获取当前坐标。我在此处附加一个链接。此链接中的最后一张图片是我最终得到的输出。有人可以告诉我我做错了什么。如果需要更多信息，请告诉我..谢谢..这里是链接 [https://www.dropbox.com/sh/q9t3k1b01pbu1uq/rzI_2k_GlN](https://www.dropbox.com/sh/q9t3k1b01pbu1uq/rzI_2k_GlN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:17:49.700

你不见了

`_mapView.showsUserLocation = YES;`

在上面的代码中。您应该再次阅读该教程。

# php - 外部 JavaScript 和 PHP 在图像文件夹中旋转

> ID：13215481
> 
> 赞同：-2
> 
> 时间：2012-11-04T02:28:03.277
> 
> 标签：php, javascript

我正在尝试使用 Javascript 和 PHP 来读取图像文件夹并循环浏览图像。我从这里得到了想法和代码：[http ://www.javascriptkit.com/javatutors/externalphp2.shtml](http://www.javascriptkit.com/javatutors/externalphp2.shtml)

即使 Firebug 启动，我也没有收到任何错误。但它只是不循环浏览图像。它加载了我设置的第一张图片（userfiles/portfolio/0025.jpg）。但永远不会移动到另一个图像。

getimages.php 与我的图像一起位于 userfiles/portfolio 中。

这是我所拥有的：

在我要显示图像的页面上：

```
<script src="userfiles/portfolio/getimages.php"></script>

<script type="text/javascript">

var curimg=0
function rotateimages(){
document.getElementById("slideshow").setAttribute("src", "userfiles/portfolio/"+galleryarray[curimg])
curimg=(curimg<galleryarray.length-1)? curimg+1 : 0
}

window.onload=function(){
setInterval("rotateimages()", 1000)
}
</script>

<div id="portfoilo">
    <img id="slideshow" src="userfiles/portfolio/0025.jpg" />
</div> 
```

这是我的getimages.php

```
 <?php
//PHP SCRIPT: getimages.php
Header("content-type: application/x-javascript");

//This function gets the file names of all images in the current directory
//and ouputs them as a JavaScript array
function returnimages($dirname=".") {
    $pattern="(\.jpg$)|(\.png$)|(\.jpeg$)|(\.gif$)"; //valid image extensions
    $files = array();
    $curimage=0;
    if($handle = opendir($dirname)) {
        while(false !== ($file = readdir($handle))){
            if(eregi($pattern, $file)){ //if this file is a valid image
            //Output it as a JavaScript array element
            echo 'galleryarray['.$curimage.']="'.$file .'";';
            $curimage++;
            }
        }

            closedir($handle);
        }
    return($files);
}

echo 'var galleryarray=new Array();'; //Define array in JavaScript
returnimages() //Output the array elements containing the image file names
?> 
```

当我运行它时，getimages.php 显示为空白。但是现在我得到：

```
<font size='1'><table class='xdebug-error xe-deprecated xe-scream' dir='ltr' border='1' cellspacing='0' cellpadding='1'>
<tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> SCREAM: Error suppression ignored for</th></tr>
<tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Deprecated: Function eregi() is deprecated in J:\My Documents\Dropbox\www\ChiseledImages-Ras\userfiles\portfolio\getimages.php on line <i>13</i></th></tr>
<tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr>
<tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr>
<tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0014</td><td bgcolor='#eeeeec' align='right'>248760</td><td bgcolor='#eeeeec'>{main}(  )</td><td title='J:\My Documents\Dropbox\www\ChiseledImages-Ras\userfiles\portfolio\getimages.php' bgcolor='#eeeeec'>..\getimages.php<b>:</b>0</td></tr>
<tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0015</td><td bgcolor='#eeeeec' align='right'>249536</td><td bgcolor='#eeeeec'>returnimages(  )</td><td title='J:\My Documents\Dropbox\www\ChiseledImages-Ras\userfiles\portfolio\getimages.php' bgcolor='#eeeeec'>..\getimages.php<b>:</b>26</td></tr>
</table></font> 
```

eregi现在完全消失了吗？我知道它在 5 之后被弃用，我的 WAMP 版本正在运行 php 5.4.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:44:29.417

快速浏览一下您的代码，但您可能应该更改以下内容：

```
setInterval("rotateimages()", 1000) 
```

对此

```
setInterval(rotateimages, 1000); 
```

这是因为您告诉 Javascript 在 1 秒后运行特定函数。所以你需要传入一些*可调用*的东西，比如函数引用或匿名函数块。在您的情况下，您传递的是一个不可*调用*的字符串。

# c - 以前的“函数”声明在 C 中

> ID：13215486
> 
> 赞同：7
> 
> 时间：2012-11-04T02:28:52.500
> 
> 标签：c

> **可能重复：**
> [通过 K&R 学习 C，尝试使用数组和函数调用从书中编译程序时出错](https://stackoverflow.com/questions/8763052/learning-c-by-kr-error-when-trying-to-compile-programs-from-book-with-arrays-a)

在学习 Brian W. Kernighan 和 Dennis M. Ritchie 的 C 编程语言时，我尝试了 1.9 节字符数组中的示例。以下是代码：

```
/* read a set of text lines and print the longest */

#include <stdio.h>
#define MAXLINE 1000 /* maximum input line length */

/* declare functions: getline() and copy() */
int getline(char line[], int maxline); 
void copy(char to[], char from[]);

/* getline: read a line into array "s", return length */ 
int getline(char s[], int lim)
{
    int c, i;
    for (i=0; i < lim-1 && (c=getchar())!=EOF && c!='\n'; ++i)
        s[i] = c;
    if (c == "\n"){
        s[i] = c;
        ++i;
    }
    s[i] = '\0';  /* the null character whose value is 0 */
    return i;
}

/* copy: copy 'from' into 'to'; assume to is big enough */ 
/* the return type of copy is "void" -- no value is returned */
void copy(char to[], char from[])
{
    int i;
    i = 0;
    while ((to[i] = from[i]) != '\0')  /* terminated with a \0 */
        ++i; 
}

/* print the longest input line */
int main()
{
    int len;  /* current line length */ 
    int max;  /* maximum length seen so far */
    char line[MAXLINE];  /* current input line */
    char longest[MAXLINE];  /* longest line saved here */

    max = 0;
    while ((len = getline(line, MAXLINE)) > 0)
    if (len > max) { 
        max = len;
        copy(longest, line); 
    }
    if (max>0) /* there was a line */ 
        printf("%s", longest);
    return 0; 
} 
```

有两个主要错误：

1.  错误：“getline”的类型冲突</li>
2.  错误：“getline”的先前声明在这里

完整的错误列表在这里：

```
/Users/C/Codes/Ritchie/array_char.c:8: error: conflicting types for ‘getline’
/usr/include/stdio.h:449: error: previous declaration of ‘getline’ was here
/Users/C/Codes/Ritchie/array_char.c:13: error: conflicting types for ‘getline’
/usr/include/stdio.h:449: error: previous declaration of ‘getline’ was here
/Users/C/Codes/Ritchie/array_char.c: In function ‘getline’:
/Users//C/Codes/Ritchie/array_char.c:17: warning: comparison between pointer and integer
/Users/C/Codes/Ritchie/array_char.c:17: warning: comparison with string literal results in unspecified behavior 
```

我不确定出了什么问题，因为它与书中的代码完全相同。也许在开头的函数声明：

```
int getline(char line[], int maxline); 
void copy(char to[], char from[]); 
```

有问题吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T02:34:23.467

[http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)

getline 已存在于 stdio.h 中。这就是您收到错误的原因。将函数名称更改为 getline_my 之类的其他名称。

此外，您正在将第 16 行中的字符与字符串进行比较。它应该是
`if(c == '\n')`

不是

`if(c == "\n")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T02:33:16.363

问题是`getline`in可能有一个定义`stdio.h`。在我的 linux 版本中，有一个由 C 库提供的 getline 函数（我认为是 POSIX 标准的一部分）。你不能在 C 中拥有两个同名的函数，这是你的问题。尝试将您的版本重命名`getline`为`my_getline`（您声明/定义它的位置以及使用它的位置）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T02:37:08.703

```
/usr/include/stdio.h:449: error: previous declaration of ‘getline’ was here 
```

就像它所说的那样：`getline`在中声明`stdio.h`（因为标准库提供了一个具有该名称的函数）。您不能使用该名称提供您自己的函数，因为当您调用 时`getline`，编译器不知道要使用哪一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T02:36:17.517

从那本书写成之日到现在，标准 C 库进行了一些修改，并且它们不再是旧的和新的一致的。

您必须删除声明，并保留当前 stdio.h 中的声明。

# php - 仅获取 json 文件的一部分而不是整个文件

> ID：13215498
> 
> 赞同：2
> 
> 时间：2012-11-04T02:30:33.170
> 
> 标签：php, jquery

我每隔几秒钟就请求一次 json 文件，有时它会很大，所以有没有可能以某种方式检索到的不是整个 json 文件，而只是最后一个元素？getJson 获取整个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:32:32.897

不，您必须先获取整个文件，然后才能解析它并仅返回最后一个元素。这里最好的解决方案是创建一个新的 JSON 文件，其中只包含您需要的信息（如果您有这种能力）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:33:48.767

除非您：

*   修改服务以仅提供最后一个元素，可能在不同的 URL/使用参数。
*   确切知道最后一个元素之前的数据多长时间，允许您向`[RANGE][1]`服务器发出请求

当然，使用第二种方法，最后一个元素本身可能不是有效的 JSON 对象（不保证包含在花括号中），因此您需要在解析它之前对其进行操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:33:28.390

那么你不能从javascript访问部分json。您必须在服务器端执行此操作。只需创建一个新的 php 函数来读取最后一个元素并从 getJson 访问它

# character-encoding - 如何转换不同字符集的文本

> ID：13215501
> 
> 赞同：0
> 
> 时间：2012-11-04T02:31:18.173
> 
> 标签：character-encoding, converter

我有一些 GB2312 字符集中的文本文件，它是文本文件，但显示如下文本： =B2=E2=CA=D4=D6=D0=CE=C4 我想知道是否有办法输入这些文本并翻译他们变成可读的格式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:28:45.893

内容似乎是 Quoted Printable (QP) 编码的，因此您首先需要一个 QP 解码器。谷歌搜索“quote printable”和你最喜欢的编程语言的名称。使用[在线解码器](http://www.motobit.com/util/quoted-printable-decoder.asp)，在可以解释GB2312的程序中打开结果，可以看到数据以测试中开头。

# objective-c - 从 ios 应用程序发送推送通知

> ID：13215510
> 
> 赞同：1
> 
> 时间：2012-11-04T02:33:33.703
> 
> 标签：objective-c, xcode, notifications, push-notification

我需要创建一个发送通知的 ios 应用程序。（类似于 Pushmebaby (https://github.com/stefanhafeneger/PushMeBaby)）。（另请注意，这个 mac 应用程序已经 2 岁了，对我来说崩溃了）

我已经看到了一些 php 网站的例子来做到这一点，什么都不买就可以直接从 ios 做到这一点。

有什么好例子吗？

感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T02:42:43.197

您是否需要向当前正在运行您的应用的 iOS 设备发送通知？如果是这样，您应该查看[本地通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)。

如果您真的想从您的 iOS 设备向其他 iOS 设备发送推送通知，您基本上有两种选择

### 选项 1（最简单）

使用[Parse](https://parse.com)或[Urban Airship](http://urbanairship.com)等服务为您发送通知。然后，您可以向他们的 API 发出请求，以向您的用户设备发起推送通知。

### 选项 2（参与最多）

[根据Apple 的指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)设置您的基础架构，以便您可以将推送通知发送到 Apple 的服务器。然后，您需要构建一个 API，以便您的 iOS 设备可以与您的推送通知服务器通信，以向 Apple 的服务器发起推送通知请求。

真正的推送通知支持并不容易，所以如果它适合您，我会建议选项 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T08:39:35.820

也可以从 Mac OS X 或 iOS 发送远程推送通知。这可以通过 GitHub 上的[NWPusher](https://github.com/noodlewerk/NWPusher)项目来完成。它提供 OS X 和 iOS 应用程序来手动发送推送通知，或者您可以直接使用包含的库。

虽然您不太可能希望在生产环境中使用它，但它在开发过程中非常有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-06T02:19:20.060

我们通过两种方法发送推送通知：

1.) 通过使用 .net 支持。：- 在其中，您只需创建 .p12 文件。要创建 .p12 文件，请点击此链接[http://www.techfunonline.com/how-to-send-push-notification-using-dot-net-backened.html](http://www.techfunonline.com/how-to-send-push-notification-using-dot-net-backened.html)

2.) 支持 PHP。：- 在其中，您只需创建 .pem 文件。要创建 .pem 文件，请点击此链接[http://www.techfunonline.com/how-to-create-pem-file-for-push-mail-notification-for-php-backend.html](http://www.techfunonline.com/how-to-create-pem-file-for-push-mail-notification-for-php-backend.html)。

# java - '<=' 无效字符常量

> ID：13215517
> 
> 赞同：2
> 
> 时间：2012-11-04T02:34:24.523
> 
> 标签：java, switch-statement, invalid-characters

您好，我在“<=”上收到一个错误，它是一个无效的字符常量？任何想法为什么？

```
switch (ch)
    {   
        case '+' : res = op1+op2;break;   
        case '-' : res = op1-op2;break;  
        case '*' : res = op1*op2;break;
        case '/' : if (op2 != 0)
                    res = op1/op2;
                   else 
                   System.out.println("Division by zero error in"+
                   " PostfixEvaluator.calculate().");
                   break;  
        case '%' : if (op2 != 0)
                    res = op1%op2;
                   else 
                   System.out.println("Division by zero error in"+
                   " PostfixEvaluator.calculate().");
                   break;  
        /**
         * Alterations begin here
         */
        case '<' : if(op1 < op2)
                    res = 1;
                   else
                    res = 0;
                   break;
        case '<=' : if(op1 <= op2)
                     res = 1;
                   else
                     res = 2;
                   break;
        case '>' : if(op1 > op2)
                     res = 1;
                   else
                     res = 2;
                   break;
        case '>=' : if(op1 >= op2)
                     res = 1;
                    else
                     res = 2;
                    break;
        case '==' : if(op1 == op2)
                     res = 1;
                    else
                     res = 2;
                    break;
        case '!=' : if(op1 != op2)
                     res = 1;
                    else
                     res = 2;
                    break;

        case '||' : if(true || false )
                      res = 1;
                    else if(false || true)
                      res = 1;
                    else if(false || false)
                      res = 0;
                    else 
                      res = 1;
                    break;
        case '&&' : if(true && false )
                      res = 0;
                    else if(false && true)
                      res = 0;
                    else if(false && false)
                      res = 0;
                    else
                      res = 1;
                    break; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T02:35:45.397

Java 中的字符是单个字母（可以这么说），所以`'<='`,`'&&'`等不起作用。如果您需要放置多个字符，则必须使用`String`:`"<="`注意双引号。

但是话又说回来，在 Java 中，*除非*您使用 Java 7+ ，否则您无法打开`String`值。如果不是这种情况，那么您将不得不使用普通的旧语句来执行比较。*`if-else if`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T02:35:48.830

字符常量必须精确地表示一个字符^*：你不能使用`&&`or`||`作为字符常量，因为它们有两个字符。

如果逐个字符进行，常见的解决方案是使用单个`|`，然后检查前面的字符是否也是`|`or `&`。

* * *

^*转义序列如`\n`也表示单个字符，即使它们由两个字符组成。*

# c - 在 Valgrind 中显示释放的内存来源？

> ID：13215518
> 
> 赞同：1
> 
> 时间：2012-11-04T02:34:34.790
> 
> 标签：c, valgrind

Valgrind 报告我的程序正在对垃圾收集器释放的内存位置执行无效读取。

Valgrind 显示与该对一起被无效读取的内存的分配位置会很有帮助：

> “大小为 2 的无效读取”

和

> “地址 0x523befe 是一个大小为 12 的块中的 6 个字节”

但可惜没有显示内存分配位置。这是我的 Valgrind 命令行：

> valgrind --tool=memcheck --leak-check=full --track-origins=yes --undef-value-errors=yes --read-var-info=yes --num-callers=50

我试过在 --tool=memcheck 和其他几个地方之后坚持 --track-origins=yes ，但无济于事。

知道如何在这种情况下获取内存创建位置吗？

编辑：

这是最终的 Valgrind 输出：

> ==14849==泄漏摘要：
> ==14849==肯定丢失：0个块中的0个字节
> ==14849==间接丢失：0个块中的0个字节
> ==14849==可能丢失：24个块中的900个字节
> ==14849 == 仍然可达：45,043 个块中的 631,292 个字节
> ==14849== 抑制：0 个块中的 0 个字节 == 14849
> == 未显示可达块（找到指针的块）。
> ==14849== 要查看它们，请使用以下命令重新运行：--leak-check=full --show-reachable=yes
> ==14849==
> ==14849== 对于检测到和抑制的错误计数，请使用以下命令重新运行：-v
> = =14849== 错误摘要：来自 14 个上下文的 14 个错误（抑制：0 来自 0）

# android - 隐藏地图android上的所有标记弹出窗口

> ID：13215519
> 
> 赞同：0
> 
> 时间：2012-11-04T02:34:55.507
> 
> 标签：android, android-mapview

我有带有许多自定义叠加层的 mapView。mapView 对象是否有一些方法可以清除地图中的所有弹出窗口（而不是标记）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:46:31.830

由于适用于 Android 的 Google 地图插件没有“弹出窗口”的概念，因此您自己将“弹出窗口”放在那里，您将不得不问自己如何添加它们，以便弄清楚如何删除它们。

# php - 如何对从数组创建的 html 表进行分页？

> ID：13215522
> 
> 赞同：2
> 
> 时间：2012-11-04T02:35:40.357
> 
> 标签：php, pagination, html-table

我无法思考正确的逻辑和方法来分离我的数据并动态创建带有分页的表。我有一个读取文件服务器的函数，编译图像列表并将它们排序成这样的数组：

```
imagenames ( [0] => apple.png [1] => banana.png [2] => carrot.png [3] => dill.png ) 
```

我使用这个数组来动态创建一个表，代码如下：

```
echo '<table>';
for ($r=0; $r<$rows; $r++){
    echo '<tr>';
    for ($c=0; $c<$cols; $c++){
        if($index<$imagecount){
            echo '<td><img src="images/'.$imagenames[$index].'" ></td>';
            $index++;
        }
    }
    echo '</tr>';
}   
echo '</table>'; 
```

如果我设置`$rows=3;`和`$cols=3;`，我的桌子将有 9 张图像的空间。如果我的数组有 50 张图像，我将如何对表格进行分页，以便我有一个下一个、上一个和一个编号的菜单，这样整个表格就不必一次全部加载或忽略范围由`$rows*$cols`?

*编辑** -------->>>

因此，如果我采用 Steven Liao 建议的方式并拥有以下内容：

```
$size = $rows*$cols; // number of elements on page
$min = $_GET['p']*$size; // start index in array
$total_pages = ceil(count($imagenames)/$size); 

echo '<table class="photobox">';
   for ($r=0; $r<$rows; $r++){
      echo '<tr>';
      for ($c=0; $c<$cols; $c++){
    if($index<$imagecount){
       echo '<td><img src="images/'.$imagenames[$index].'" /></td>';
       $index++;
    }
      }
      echo '</tr>';
   }    
echo '</table><br/><br/>';

// Previous
$prev_page = max($_GET['p']-1, 0);
echo '<a href="photobox.php?p='.$prev_page.'">Previous</a>';
// Each individual page number (no separators yet)
for($i = 0; $i < $total_pages; $i++){
    echo '<a href="photobox.php?p='.$i.'">'.($i+1).'</a>';
}
// Next
$next_page = min($_GET['p']+1,$total_pages-1);
echo '<a href="photobox.php?p='.$next_page.'">Next</a>'; 
```

这将显示表格并创建导航链接。我将如何使每个页面的表格内容发生变化。导航在那里，URL 随页面而变化，但表格没有改变，我不太了解这个分页代码，因为它基于 Steven Liao 的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:09:28.467

`$rows×$cols`每页上都有许多图像。因此，在您的第一页上`$index`将从 0 开始，在下一页开始从`1+$page×$rows×$cols`等等，`$page`第 n 页在哪里。我希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:56:10.517

```
$size = $row*$col; // number of elements on page
$min = $_GET['p']*$size; // start index in array
$total_pages = ceil(count($imagenames)/$size); // round up number of pages (stragglers get their own page)

// Display logic here
for($i = 0; $i < $rows; $i++){
    for($j = 0; $j < $cols; $j++){
        echo '<span>Display Logic for '.$imagenames[$min+$i*rows+$j].'</span>';
    }
}

// Previous
$prev_page = max($_GET['p']-1, 0);
echo '<a href="this.php?p='.$prev_page.'">Previous</a>';

// Each individual page number (no separators yet)
for($i = 0; $i < $total_pages; $i++){
    echo '<a href="this.php?p='.$i.'">'.($i+1).'</a>';
}

// Next
$next_page = min($_GET['p']+1,$total_pages-1);
echo '<a href="this.php?p='.$next_page.'">Next</a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T07:08:44.983

[jQuery DataTables](http://www.datatables.net) : 具有非常简单基本用法的 jQuery 插件：

```
$(document).ready(function(){
    $('#your_table_id').dataTable();
}); 
```

除了导航和分页之外，您还可以使用数据检测和搜索框进行多列排序。支持 jQuery UI 样式。（可以根据需要启用/禁用功能）。

注意：您的表格必须使用该插件才能正常工作`thead`的`tbody`元素。

还有多个其他插件可用。

# navigation - 导航菜单上的下拉菜单不起作用

> ID：13215523
> 
> 赞同：1
> 
> 时间：2012-11-04T02:35:43.303
> 
> 标签：navigation

知道为什么我的下拉菜单没有显示吗？在“立即预订”和“功能”下应该有一个。它们旁边的小箭头表明菜单知道它有孩子，但盒子没有打开。

[http://inventivewebdesign.com/dev/](http://inventivewebdesign.com/dev/)

# python - 如何在 Numpy 中就地扩展数组？

> ID：13215525
> 
> 赞同：60
> 
> 时间：2012-11-04T02:35:45.177
> 
> 标签：python, arrays, numpy, scipy

目前，我有一些这样的代码

```
import numpy as np
ret = np.array([])
for i in range(100000):
  tmp =  get_input(i)
  ret = np.append(ret, np.zeros(len(tmp)))
  ret = np.append(ret, np.ones(fixed_length)) 
```

我认为这段代码**效率不高**，因为`np.append`需要返回数组的副本而不是**就地修改 ret**

我想知道我是否可以`extend`像这样使用 numpy 数组：

```
import numpy as np
from somewhere import np_extend
ret = np.array([])
for i in range(100000):
  tmp =  get_input(i)
  np_extend(ret, np.zeros(len(tmp)))
  np_extend(ret, np.ones(fixed_length)) 
```

这样`extend`会更有效率。有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-04T02:43:10.230

想象一个 numpy 数组占用一个连续的内存块。现在想象一下其他对象，比如其他 numpy 数组，它们占用了我们 numpy 数组左右两侧的内存。没有空间可以附加或扩展我们的 numpy 数组。numpy 数组中的底层数据总是占用一个*连续*的内存块。

因此，任何附加或扩展我们的 numpy 数组的请求只能通过分配一个全新的更大内存块、将旧数据复制到新块然后附加或扩展来满足。

所以：

1.  它不会就地发生。
2.  它不会是有效的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-04T03:01:30.313

您可以使用`.resize()`ndarrays 的方法。它要求内存不被其他数组/变量引用。

```
import numpy as np
ret = np.array([])
for i in range(100):
    tmp = np.random.rand(np.random.randint(1, 100))
    ret.resize(len(ret) + len(tmp)) # <- ret is not referred to by anything else,
                                    #    so this works
    ret[-len(tmp):] = tmp 
```

可以通过使用通常的数组内存过度分配方案来提高效率。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-04T17:13:11.283

通常的处理方法是这样的：

```
import numpy as np
ret = []
for i in range(100000):
  tmp =  get_input(i)
  ret.append(np.zeros(len(tmp)))
  ret.append(np.zeros(fixed_length))
ret = np.concatenate(ret) 
```

由于其他答案的原因，通常不可能在不复制数据的情况下扩展数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-09T15:54:36.723

我在研究就地 numpy 插入方法时遇到了这个问题。

在阅读此处给出的答案时，我想到了一个替代方案（可能是一个幼稚的想法，但仍然是一个想法）：为什么不将 numpy 数组转换回列表，附加任何你想附加的内容并重新转换它回到数组？

如果您必须完成许多插入操作，您可以创建一种“列表缓存”，您可以在其中放置所有插入，然后一步将它们插入到列表中。

当然，如果有人试图不惜一切代价避免转换为列表并返回到 numpy，这不是一种选择。

# c++ - C++ 程序错误 - 虚拟析构函数

> ID：13215527
> 
> 赞同：1
> 
> 时间：2012-11-04T02:35:52.447
> 
> 标签：c++, inheritance, destructor, pure-virtual

> **可能重复：**
> [C++ 中的纯虚析构函数](https://stackoverflow.com/questions/630950/pure-virtual-destructor-in-c)

```
class A{
    public:
        virtual ~A()=0;
};

class B:public A{
        int *i;
    public:
        ~B() {delete i;}
};

int main(){
    B* temp = new B;
} 
```

我只是想让 B 成为 A 的实现。出于某种原因，我不能这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T02:39:30.303

在 C++ 中，析构函数可以是纯虚拟的：

```
class A{
    public:
        virtual ~A()=0;
}; 
```

但在每种情况下都需要实施：

```
inline A::~A() {} 
```

否则 A 不是可用的类。我的意思是不可能破坏派生的（S/B）。在这一行中需要破坏的可能性：

```
 B* temp = new B; 
```

因为在抛出异常的情况下 - 编译器将自动破坏 temp...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:49:09.947

根据你的评论`"Yeah i want A to basically be just a container class. Do not want any implementation of A"`。您的 B 类应从`protected/private`A 继承而不是`public`继承。 `virtual ~A()`是允许的，`pure`但您仍然需要为`~A()`.

```
class A{
public:
  virtual ~A() = 0
  {
    cout << "~A"<<endl;
  }
};

class B : private /*protected*/ A{
  int *i;
public:
  B() : A(){
    i = new int;
  }
  ~B() {
    delete i;
  }
};

int main(){
    B* temp = new B;
    delete temp;
    return 0;
} 
```

# ios - 将音频从 ios 设备流式传输到 dlna 设备

> ID：13215531
> 
> 赞同：-1
> 
> 时间：2012-11-04T02:37:41.963
> 
> 标签：ios, audio-streaming

我在将音乐从 ios 设备传输到 dlna 设备时遇到问题。

如何在我自己的应用程序中使用 upnp，任何指南？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T00:50:04.983

找到了一个链接，显示如何在 ios [http://maniacdev.com/2011/09/tutorial-and-open-source-library-for-building-a-upnp-client-on-ios-devices/上使用 upnp 库](http://maniacdev.com/2011/09/tutorial-and-open-source-library-for-building-a-upnp-client-on-ios-devices/)

# java - c3p0 不经常导致应用程序超时

> ID：13215532
> 
> 赞同：2
> 
> 时间：2012-11-04T02:38:06.863
> 
> 标签：java, c3p0

我的应用程序每分钟都会被一个 http 请求查询。当 c3p0 运行 CullExpired 和其他后台线程时，应用程序会暂时超时并无响应。此问题随机发生且不经常发生。应用程序超时时的所有实例，我看到 c3p0 后台线程正在运行，试图进行清理或驱逐空闲连接。这非常随机发生，日志中没有其他异常。一段时间后，应用程序会自动恢复并继续处理。有没有人遇到过这样的问题。

```
 c3p0 version is <version>0.9.1.2</version>
    hibernate version is <version>3.3.2.GA</version> 
```

我的 c3p0 配置是：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close" 
        p:driverClass="#{['app.jdbc.driverClassName']}"
        p:jdbcUrl="#{['app.jdbc.url']}" 
        p:user="#{['app.jdbc.username']}" 
        p:password="#{['app.jdbc.password']}"
        p:acquireIncrement="5" 
        p:idleConnectionTestPeriod="80"
        p:maxAdministrativeTaskTime="600" 
        p:numHelperThreads="10"
        p:maxIdleTime="60" 
        p:maxPoolSize="20" 
        p:maxStatements="30"
        p:minPoolSize="10" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:50:22.190

c3p0 的后台线程始终存在；它们在线程池中运行。您已将该池的大小设置为 10 个线程 (c3p0.numHelperThreads)。如果您检查堆栈转储，在您的配置下，您会看到像 CullExpired 这样的 c3p0 任务非常频繁地运行。这些频率与使资源过期的配置设置处于同一数量级。在您的情况下， maxIdleTime 是 60 秒，因此剔除任务可能每 20 秒左右运行一次。c3p0 的管理任务经过精心设计，不会在 IO 期间持有锁，并且通常是轻量级的，并且尽可能不与其他工作抗衡。因此，如果是这些管理任务导致您挂起，那么奇怪的事情正在发生。但是这里很难区分原因和巧合：c3p0'

maxIdleTime 是您的问题的一种可能解释。您使用的配置不是很好。每分钟一个客户端连接对于 c3p0 来说是一个非常小的负载，但您的 minPoolSize 为 10 个连接。因此，c3p0 抓取 10 个连接，将它们保留大约一分钟，然后过期并重新获取它们，这是一个很大的同时开销。80 秒的 id​​leConnectionTestPeriod 没有帮助：永远不会测试空闲连接，因为它们将在空闲 60 秒后过期，在测试期过去之前。我也会将 acquireIncrement 降回默认值 3。

我会尝试更好的配置，看看是否能解决问题。鉴于您描述的负载，我将 minPoolSize 保留为默认值 3，并将 numHelperThreads 设置为 3。作为第一遍，我将 maxIdleTime 设置为其默认值零，但将 testConnectionOnCheckout 设置为 true。这是连接测试的最简单和最可靠的形式，但它要求客户端可见的性能成本。为了最大限度地降低成本，您应该设置一个 preferredTestQuery 而不是依赖于慢速默认连接测试。通常“SELECT 1”有效，但它可能取决于您的数据库/JDBC 驱动程序。如果事情看起来不错，您可能会更大胆，尝试性能稍高、健壮性稍差的连接测试策略：将 idleConnectionTestPeriod 设置为相对较小的值（例如 30），并将 testConnectionOnCheckin 设置为 true（并将 testConnectionOnCheckout 设置为默认值 false）。看 [[http://www.mchange.com/projects/c3p0/#configuring_connection_testing](http://www.mchange.com/projects/c3p0/#configuring_connection_testing) ]

此外，我现在会关闭语句缓存（将 maxStatements 设置为 0），稍后在事情稳定时将其重新打开，以测试它是否可以提高应用程序的性能。[ 那是一个如果 - 请参阅[http://www.mchange.com/projects/c3p0/#known_shortcomings](http://www.mchange.com/projects/c3p0/#known_shortcomings) ]

我还建议更新到最新版本的 c3p0 [c3p0-0.9.2-pre5]。连接获取在 0.9.2 中更轻量级，部分问题可能与每 1 分钟刷新和重新获取周期有关。总的来说，我认为 0.9.2-pre 系列现在相当稳定，值得使用。

我希望这有帮助！

# actionscript-3 - AS3 从 IF 语句运行函数

> ID：13215544
> 
> 赞同：0
> 
> 时间：2012-11-04T02:40:28.280
> 
> 标签：actionscript-3, function, if-statement

我正在尝试从 IF 语句运行一个函数，这就是该函数，它现在通过鼠标单击运行。

```
 //Show the bus route
    public function showRoute(Event:MouseEvent){

        bg.addChildAt(route1, 2);
        bg.addChildAt(dest1, 3);
        bg.removeChild(stop1);
        searchbar1.mouseEnabled = false;
        bg.addChild(busInfo);
        bg.removeChild(instructions);
        bg.addChild(searchResult1);
        busInfo.mouseEnabled = true;
        route1.mouseEnabled = false;
        dest1.mouseEnabled = false;
    } 
```

这是我要运行 showRoute 函数的下一个函数和 IF 语句

```
 public function addMarker(e:TuioEvent):void {

        var fid_id = (e.tuioContainer as TuioObject).classID;

        if (fid_id == 0){
            showRoute(event:Event);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:43:51.867

更改函数以允许它在不传递事件的情况下接受调用：

```
public function showRoute(Event:MouseEvent = null){
    // code goes here
} 
```

这样，您仍然可以让它作为对鼠标单击的响应运行，但您也可以在不传递任何事件作为参数的情况下调用它：

```
showRoute(); 
```

# c++ - 没有任何数据成员的类会导致内存泄漏吗？

> ID：13215546
> 
> 赞同：2
> 
> 时间：2012-11-04T02:40:40.107
> 
> 标签：c++

> **可能重复：**
> [C++：空类的对象的大小是多少？](https://stackoverflow.com/questions/621616/c-what-is-the-size-of-an-object-of-an-empty-class)

如果该类没有任何数据成员并且只有方法，它仍然有可能发生内存泄漏。首先类方法是对类对象的引用，而对象在分配时仍然需要内存来存储地址。我对么？

```
class Empty
{
  doA()
  {
  }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:47:40.553

好吧，即使是空类也必须`sizeof`大于 0，因此该类仍然会占用空间。原因是唯一的对象应该有唯一的地址。它是否具有成员函数（方法）这一事实无关紧要。

所以这会泄漏：

```
new Empty; // leaking at least 1 byte 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:49:44.220

标准要求每个类实例具有非零大小，甚至是空类。看到这个[答案](https://stackoverflow.com/a/621648/245265)的原因。

以下不是标准要求的，但适用于我使用过的每个编译器（Visual C++、GCC、Clang）：

实例不将地址存储到成员函数。编译器在编译/链接时已经知道每个成员函数的地址。因此，具有 100 个成员函数且只有一个`float`数据成员的类将只占用`sizeof(float)`字节空间。

如果一个类具有虚函数，则该类的每个实例都需要存储[虚函数表](http://www.learncpp.com/cpp-tutorial/125-the-virtual-table/)指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:45:15.190

> 如果该类没有任何数据成员并且只有方法，它仍然有可能发生内存泄漏。

是的，您仍然可以在该类型上泄漏内存。您可以泄漏任何类型，甚至是*没有成员*的类型。 `sizeof(EmptyClass)`永远不会等于 0。请参阅： http: [//www.stroustrup.com/#sizeof-empty](http://www.stroustrup.com/#sizeof-empty)

从规范：

> 最派生类的大小应大于零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T02:49:44.640

内存中的任何对象都需要“空间”。即使是这样的空类也会自动将 Constructor 和 CopyConstructor 投入其中。所有这些都需要记忆。并且忘记`delete`该内存将导致确切`sizeof(Empty)`字节的内存泄漏。它是 1byte 还是几个都没有关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T02:49:57.103

这将取决于您如何分配对象，并且在大多数情况下（或所有情况下），即使该类是空的，如果您使用例如`new` 或`malloc`类似的方法分配它，如果您丢失，您将有内存泄漏指向它的指针。但这也取决于实施。

这是因为`new`或`malloc`两者都有方法将已分配对象的信息存储在对象的内存空间附近。

如果您根本不使用声明的类，编译器可能会将其优化掉，因此您不会有任何内存泄漏，因为您从未为它分配内存。

# foreign-keys - 使用复合外键创建虚假条目

> ID：13215547
> 
> 赞同：2
> 
> 时间：2012-11-04T02:40:42.077
> 
> 标签：foreign-keys, key, foreign-key-relationship, composite-key

我正在使用 MySQL 数据库。我有两个表，表 1 和表 2。表 1 中有一个复合主键。表 2 中有一个复合外键，它引用了表 1 中的复合 PK。

我遇到的问题如下图所示：

表一
|------------PK------------|
菜单| 类别ID | 类别
名称 1 |1 |myCategoryName1
1 |2 |myCategoryName2
2 |1 |myCategoryName3
2 |2 |myCategoryName4
2 |3 |myCategoryName5

我可以在表 2 中创建一个引用表 1 中的错误条目的条目：

表2
|------------FK------------| |----PK----|
菜单| 类别ID | postid |帖子名称
1 |3 |1 |myPostName

现在，这不是一个大问题，因为我可以将有效值插入数据库。但是，这似乎是数据库中的一个关系错误，我希望拥有一个干净、功能正常的数据库。有没有办法纠正这个小问题？

**更新：**我使用 phpMyAdmin 来实现我的数据库，显然没有办法在 phpMyAdmin 中实现复合外键。我能够通过以下方式查看我错误实现的外键

`SHOW CREATE TABLE Table2`

`Table2`我的第二个带有复合外键的表的名称在哪里。

然后我通过手动正确添加复合外键

`ALTER TABLE Table2 ADD CONSTRAINT my_fk_constraint
FOREIGN KEY (menuid, categoryid)
REFERENCES Table1(menuid, categoryid)`

其中`my_fk_constraint`是要添加的约束的名称。

**注意：**以这种方式手动添加外键约束不允许您在插入新条目时使用下拉菜单（也不能通过单击 FK 列来引用相应的表），就像您通常可以在 phpMyAdmin 中那样。

谢谢`pst`，`thedayofcondor`你们都是正确的，因为我是一个使用 phpMyAdmin 的小家伙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:45:26.063

正确：不，防止：是！

如果您正确设置约束，则不会发生这种情况：http: [//dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# html - HTML选择onchange多个事件不起作用

> ID：13215548
> 
> 赞同：0
> 
> 时间：2012-11-04T02:40:44.413
> 
> 标签：html, ajax, onchange

我定义了两个函数，它们基本上应该从下拉菜单中获取一个值，并根据选择的内容，使用 AJAX 抛出一个表格和表单。

这是我的两个功能：

```
function showParts(str)
{
if (str=="")
  {
  document.getElementById("partvalues").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("partvalues").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getparts.php?q="+str,true);
xmlhttp.send();
}

function showOrders(str)
{
if (str=="")
  {
  document.getElementById("otherparts").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("otherparts").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","formOrder.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

我测试了这两个功能，它们都可以正常工作。我有 2 个 PHP 页面，其中有一个查询来检索适当的值。但问题是，当我尝试将它们都作为 onchange 事件运行时，它们都不起作用。

```
echo "<select name = finishgood_list onchange = showParts(this.value); showOrders(this.value)>";
        while ($row = mysql_fetch_array($result))
        {
            echo "<option value='" . $row['fg_id'] . "'>" . $row['fg_id'] . "</option>";
        } 
```

如果我尝试将函数嵌套在括号中，那么当我更改下拉菜单中的值时，它们都不起作用。我单独测试了它们，它们都工作正常，但我不能让它们同时工作。只有第一个函数正在执行，所以如果我改变 showOrder 周围的那些将起作用，但另一个不起作用。

这里有什么问题吗？如果我不能这样做，在从下拉菜单中选择值时，是否有另一种方法可以动态检索适当的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:56:41.067

猜测一下，最明显的变化是从

```
echo "<select name = finishgood_list onchange = showParts(this.value); showOrders(this.value)>"; 
```

至

```
echo "<select name = 'finishgood_list' onchange = 'showParts(this.value); showOrders(this.value);' >"; 
```

即将属性用引号括起来。

# jquery - 在浏览器调整大小时重置 jQuery 脚本

> ID：13215551
> 
> 赞同：0
> 
> 时间：2012-11-04T02:41:09.387
> 
> 标签：jquery, resize, window

经过无休止的搜索，我希望能弄清楚这一点。本质上，当浏览器窗口调整大小时，我需要编写一个脚本并重新启动它。我对 JS 的了解只有足够的危险。

该脚本是响应式模板中的非响应式滑块。目前，根据窗口最初加载的分辨率，脚本会更改其输出并适当地显示。但是，如果您调整窗口大小，脚本会变得疯狂并且看起来很糟糕。

我宁愿能够重写脚本来监听调整大小并重新计算大小，但不幸的是，据我所知，这将是压倒性的。我希望通过重新启动脚本来达到类似的结果。

这是调用幻灯片的时间：

```
$(document).ready(function()
{
$("#showcase").awShowcase(
{
    content_height:         640,
    fit_to_parent:          true,
    auto:                   false,
    interval:               5000,
    continuous:             true,
    loading:                true,
    tooltip_width:          200,
    tooltip_icon_width:     32,
    tooltip_icon_height:    32,
    tooltip_offsetx:        18,
    tooltip_offsety:        0,
    arrows:                 true,
    buttons:                false,
    btn_numbers:            true,
    keybord_keys:           true,
    mousetrace:             false, /* Trace x and y coordinates for the mouse */
    pauseonover:            true,
    stoponclick:            false,
    transition:             'hslide', /* hslide/vslide/fade */
    transition_speed:       500,
    transition_delay:       300,
    show_caption:           'show', /* onload/onhover/show */
    thumbnails:             true,
    thumbnails_position:    'outside-last', /* outside-last/outside-first/inside-last/inside-first */
    thumbnails_direction:   'horizontal', /* vertical/horizontal */
    thumbnails_slidex:      0, /* 0 = auto / 1 = slide one thumbnail / 2 = slide two thumbnails / etc. */
    dynamic_height:         true, /* For dynamic height to work in webkit you need to set the width and height of images in the source. Usually works to only set the dimension of the first slide in the showcase. */
    speed_change:           false, /* Set to true to prevent users from swithing more then one slide at once. */
    viewline:               true /* If set to true content_width, thumbnails, transition and dynamic_height will be disabled. As for dynamic height you need to set the width and height of images in the source. It's OK with only the width. */

});
}); 
```

我也有检测窗口调整大小的代码，等待 150 毫秒，但后来我迷路了。

```
var resizeTimer;
$(window).resize(function() {
clearTimeout(resizeTimer);
resizeTimer = setTimeout(function() {

}, 150);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:47:03.083

更新：我已更新此内容以回应您的评论。似乎您的滑块代码在运行后会修改原始 html 结构，因此您无法再次重新运行代码。下面的解决方案制作了原始 html 的备份副本。在重新运行滑块代码之前，将滑块 html 恢复到原始状态，然后重新运行代码。

请注意，当滑块被删除并重新创建时，这可能会导致某种闪烁。如果您确保在 css 中为父元素指定固定高度（如下所示的幻灯片包装器），则可以避免这种情况。

*   创建一个新的隐藏 div，您将在其中放置备份 html。就像是：

> ```
> <div id="slideshow-backup" style="display:none;"></div> 
> ```

*   将您现有的展示 div 放入包装器中。我们将在重新创建幻灯片 html 时使用它：

> ```
> <div id="slideshow-wrapper" style="height: 800px">
>     <div id="slideshow">
>     ...
>     </div>
> </div> 
> ```

*   您需要创建一个放置幻灯片代码的函数。您在文档准备好时调用它一次，并设置在调整窗口大小时调用相同的函数：

> ```
> function show_slider() {
>     $("#showcase").awShowcase({
>         content_height: 640
>         // deleted the rest of the options for clarity...
>     });
> }
> 
> $(document).ready(function() {
>     // make a backup copy of the original showcase div, and change its id to showcase-orig
>     $('#showcase').clone().appendTo('#slideshow-backup').attr('id', 'showcase-orig');
> 
>     show_slider();
> 
>     var resizeTimer;
>     $(window).resize(function() {
>         clearTimeout(resizeTimer);
>         resizeTimer = setTimeout(function() {
>             // delete the modified showcase div
>             $('#showcase').remove();
>             // create a fresh copy of the slideshow from the backup div
>             $('#showcase-orig').clone().appendTo('#showcase-wrapper').attr('id', 'showcase')
> 
>             // restart the slideshow
>             show_slider();            
>         }, 150);
>     });
> 
> });​ 
> ```

# apache - 这个 .htaccess 代码有什么问题？

> ID：13215552
> 
> 赞同：-1
> 
> 时间：2012-11-04T02:41:30.980
> 
> 标签：apache, .htaccess, url-rewriting

我需要将我网站中的文章和个人资料链接更改为动态链接。IE

*   **对于文章**：`site.com/article.php?id=12` 变成`site.com/article/this_is_title_of_article`
*   **对于个人资料**：`site.com/ref.php?user=23`变成`site.com/john_doe`

所以我写这个给`.htaccess`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ ref.php?user=$1 [QSA,L]
RewriteRule ^articles/(.*)$ article.php?user=$1 [QSA,L] 
```

因此，对于配置文件它有效。您可以键入`site.com/username`，它可以工作。但是，对于那些它没有的文章——它只是不显示任何东西。

我不明白为什么如果用户名超过一个单词，它不会在单词之间添加下划线：即使我添加到 URL 中，`site.com/john_doe`它也不起作用。

所以，上面的代码几乎只适用于用户名并且如果该用户名只有一个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:12:05.297

规则是从上到下评估的，因此您的用户规则很可能在您的文章规则有机会之前就捕捉到了所有内容。

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^articles/(.*)$ article.php?user=$1 [QSA,L]
RewriteRule ^(.*)$ ref.php?user=$1 [QSA,L] 
```

# sql - 将列中的列与 sqlite 中的连接值匹配

> ID：13215553
> 
> 赞同：2
> 
> 时间：2012-11-04T02:41:33.037
> 
> 标签：sql, sqlite

我有一个表，其中有一列具有这样的连接值

```
Table CHILD:

    ChildId       Values
    2           x123,j455
    3           f456,z789 
    4           m333,y567
    5           x123,h888 
```

我有一个主表 MASTER

```
Table MASTER:

    MainValues
    x123
    f456
    y567 
```

我需要一个查询来选择以下数据

```
ChildId MainValues
2       x123
3       f456
4       y567
5       x123 
```

基本上匹配来自 MASTER 的子值中的值并仅返回主值。我怎样才能做到这一点 ？我已经尝试过与第二个表匹配的 IN 和 LIKE 子句，但这并没有太大帮助，因为值是 csv。有没有办法在 sqlite 中拆分和匹配？

编辑：表名和列名是虚构的，只是为了更好地解释这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T02:57:09.583

使用正则表达式：

```
SELECT ChildId,MainValues FROM CHILD INNER JOIN MASTER WHERE ','||[Values]||',' like '%,'||MainValues||',%' 
```

另外，请不要使用关键字，如`values`列名...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:23:12.367

不幸的是，SQLite 没有从字符串中查找字符索引的功能。所以你必须依靠别的东西。Idan 的方法也不错，但速度可能会慢一些。你可以试试这个：

```
SELECT c.childID,  m.mainvalues
FROM   CHILD c 
JOIN   MASTER m 
WHERE  m.mainvalues = substr(c.ivalues, -length(c.ivalues), 4) 
    OR m.mainvalues = substr(c.ivalues, 6); 
```

我使用 4 和 6 假设您在`,`. 如果还没有解决，您可以尝试：

```
SELECT c.childID,  m.mainvalues
FROM   CHILD c 
JOIN   MASTER m 
WHERE  m.mainvalues = substr(c.ivalues, -length(c.ivalues), length(m.mainvalues)) 
    OR m.mainvalues = substr(c.ivalues, length(m.mainvalues) + 2); 
```

# c# - 如何区分泛型类中具有相同名称和参数数量的两个方法？

> ID：13215555
> 
> 赞同：3
> 
> 时间：2012-11-04T02:41:33.520
> 
> 标签：c#, generics, reflection

这是我的课：

```
public class MyClass<T>
{
    public void MyMethod(T a)
    {
    }

    public void MyMethod(int a)
    {
    }
} 
```

即使是泛型类型参数，我将如何`Invoke` `MyMethod(T)`使用？`Reflection``int``MyClass`

这是一个单一的声明（可能效率低下，但我喜欢简洁）：

```
var mc = new MyClass<int>();

typeof(MyClass<int>).GetMethods().ElementAt(
    typeof(MyClass<int>).
    GetGenericTypeDefinition().
    GetMethods().ToList().FindIndex(m =>
        m.Name.Equals("MyMethod") && 
        m.GetParameters().Count() == 1 &&
        m.GetParameters()[0].ParameterType.IsGenericParameter)
    ).Invoke(mc, new object[] { 1 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T03:11:18.220

# 修订答案

好的，所以我想我已经弄清楚为什么该`IsGenericParameter`属性评估为 false 是因为您正在创建具有显式类型的 MyClass 类型 for `<T>`。

由于编译器新`a`参数是什么类型（从类的实例化推断），我猜测编译器将参数视为非泛型类型。

另外，根据我在 MSDN 中阅读的内容，我认为[ParameterType.IsGenericParameter](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.parametertype.aspx)和[Type.IsGenericType 属性](http://msdn.microsoft.com/en-us/library/system.type.isgenerictype.aspx)`MyMethod<T>()`只有在你有类似vs.的方法时才会评估为 true `MyMethod(T a)`，其中类型 for`<T>`是从用类实例化的类型推断出来的.

这是一个小程序来演示这一点：

```
using System;
using System.Linq;
using System.Reflection;

namespace GenericParametersViaReflectionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            // Note: we're using the type without specifying a type for <T>.
            var classType = typeof(MyClass<>);

            foreach (MethodInfo method in classType.GetMembers()
                .Where(method => method.Name == "MyMethod"))
            {
                // Iterate through each parameter of the method
                foreach (var param in method.GetParameters())
                {
                    // For generic methods, the name will be "T" and the FullName
                    // will be null; you can use which ever check you prefer.
                    if (param.ParameterType.Name == "T"
                        || param.ParameterType.FullName == null)
                        Console.WriteLine("We found our generic method!");
                    else
                        Console.WriteLine("We found the non-generic method:");

                    Console.WriteLine("Method Name: {0}", method.Name);
                    Console.WriteLine("Parameter Name: {0}", param.Name);
                    Console.WriteLine("Type: {0}", param.ParameterType.Name);
                    Console.WriteLine("Type Full Name: {0}",
                        param.ParameterType.FullName ?? "null");
                    Console.WriteLine("");
                }   
            }
            Console.Read();
        }
    }
    public class MyClass<T>
    {
        public void MyMethod(T a) { }
        public void MyMethod(int a) { }
    }
} 
```

我们最终得到的结果是：

> 我们找到了还是通用的方法！
> 方法名称：MyMethod
> 参数名称：a
> 类型：T
> 类型全名：null
> 
> 我们找到了非泛型方法：
> 方法名称：MyMethod
> 参数名称：a
> 类型：Int32
> 类型全名：System.Int32

如果您需要使用特定类型创建类的实例，您可能会发现[Activator.CreateInstance 类](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)也很有用。

* * *

# 原始答案

我认为，如果您传入与显式设置方法之一（例如 Int32 方法）匹配的相同数据类型的参数，那么编译器会自动选择接受泛型参数的参数。否则，编译器将选择泛型方法。

但是，如果您希望能够控制选择哪个方法，您可以修改每个方法以具有不同的参数名称，同时保持相同的签名，如下所示：

```
public class MyClass<T>
{
    public void MyMethod(T genericA) {}
    public void MyMethod(int intA) {}
} 
```

然后，使用[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)，您可以显式调用所需的方法，如下所示：

```
var foo = new MyClass<int>();
foo.MyMethod(genericA: 24); // This will call the "MyMethod" that only accepts <T>.
foo.MyMethod(intA: 19); // This will call the "MyMethod" that only accepts integers. 
```

***编辑***

出于某种原因，在我的原始答案中，我错过了您提到使用反射的部分，但看起来我的原始答案可以与这些其他答案相结合，为您提供可行的解决方案：

*   [通过反射调用带有可选参数的方法](https://stackoverflow.com/questions/2421994/invoking-methods-with-optional-parameters-through-reflection)
*   [如何获取方法参数的名称？](https://stackoverflow.com/questions/214086/how-can-you-get-the-names-of-method-parameters-in-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T05:31:05.080

我能够做到这一点的唯一方法是使用`GetGenericTypeDefinition`with `IsGenericParameter`。在泛型类型定义中，一种方法将`IsGenericParameter`在参数上设置为 true。但是，对于封闭类型，没有任何参数将其设为 true。然后，您不能使用`MethodInfo`泛型类型定义中的 来调用该方法，因此我存储了索引并使用它来查找`MethodInfo`封闭类型中的对应项。

```
public class Program
{
    public static void Main(string[] args)
    {
        bool invokeGeneric = true;
        MyClass<int> b = new MyClass<int>();
        var type = b.GetType().GetGenericTypeDefinition();
        int index = 0;
        foreach(var mi in type.GetMethods().Where(mi => mi.Name == "MyMethod"))
        {
            if (mi.GetParameters()[0].ParameterType.IsGenericParameter == invokeGeneric)
            {
                break;
            }
            index++;
        }

        var method = b.GetType().GetMethods().Where(mi => mi.Name == "MyMethod").ElementAt(index);
        method.Invoke(b, new object[] { 1 });
    }
}

public class MyClass<T>
{
    public void MyMethod(T a)
    {
        Console.WriteLine("In generic method");
    }

    public void MyMethod(int a)
    {
        Console.WriteLine("In non-generic method");
    }
} 
```

# android - 如果值存在于 ArrayList 中，则显示 Toast

> ID：13215558
> 
> 赞同：0
> 
> 时间：2012-11-04T02:43:03.830
> 
> 标签：android, arraylist

我对 a 有问题`ArrayList`，所以我想检查`ArrayList`它并将其与 from 的值进行比较，`TextView`并显示 a`Toast`的值`TextView`是否已经存在。

这是我已经尝试过的一些代码：

**代码 1**

```
TextView namamenu=(TextView)findViewById(R.id.nama_menu2);
EditText jumlahmenu=(EditText)findViewById(R.id.txtJumlahMenu);
MenuInputClass sr = new MenuInputClass();
String hehe = namamenu.getText().toString();
String hihi = jumlahmenu.getText().toString();
sr.setNama_menu(hehe);
sr.setJumlah_menu(hihi);

//results is the arraylist
if(results.contains(hehe)) {
    Toast.makeText(Appetizer_Activity.this, "already exist"+hehe, Toast.LENGTH_LONG).show();
} 
```

**代码 2：**

```
if(results.contains(sr)) {
    Toast.makeText(Appetizer_Activity.this, "already exist"+hehe, Toast.LENGTH_LONG).show();
} 
```

**我的 PemesananMenuClass ：** 公共类 PemesananMenuClass 扩展应用程序 {

```
 private static String nama_menu;
    private String harga_menu;
    private String keterangan_menu;
    private String gambar;

     public void setNama_menu(String nama_menu) {
       PemesananMenuClass.nama_menu=nama_menu;
     }

    public String getNama_menu() {
        return (nama_menu);
    }
    actually there are some other artibute 
```

**我的 ListPemesananActivity 类：**

```
public class ListPemesanan_Activity extends Activity {

        Button submit_list_pemesanan,submit_reservasi_nomeja;
        TextView cobacoba;                 
        ArrayList<String> list = new ArrayList<String>();
        ArrayAdapter<String> adapter;
        //public static ArrayList<MenuInputClass> searchResults = GetSearchResults();
        public static ListView list_pemesanan;
        protected static ListView lv;      

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_pemesanan_menu);

    //  adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, list);
        // lv = (ListView) findViewById(R.id.list);
        submit_list_pemesanan=(Button)findViewById(R.id.btn_submit_list_pemesanan);
        submit_reservasi_nomeja=(Button)findViewById(R.id.btn_reservasi_meja);
        list_pemesanan=(ListView)findViewById(R.id.list);
        //final TextView tnamamenu = (TextView)findViewById(R.id.txtNamaMasuk);
        //EditText tnomeja = (EditText)findViewById(R.id.txtNoMeja);
        //final TextView tjumlahmenu = (TextView)findViewById(R.id.txtJumlahMasuk);

        OnClickListener listener = new OnClickListener() {
                        @Override
                        public void onClick(View v) {

                            for (int i = 0; i < list_pemesanan.getAdapter().getCount(); i++) {
                                View viewListPemesanan = list_pemesanan.getChildAt(i);
                                TextView txtNamaMenu = (TextView) viewListPemesanan.findViewById(R.id.txtNamaMasuk);
                                TextView txtJumlahMenu = (TextView) viewListPemesanan.findViewById(R.id.txtJumlahMasuk);
                                EditText txtNoMeja = (EditText)findViewById(R.id.txtNoMeja);
                                String masuk_namamenu = txtNamaMenu.getText().toString();
                                String masuk_jumlahmenu = txtJumlahMenu.getText().toString();
                                String masuk_nomeja = txtNoMeja.getText().toString();
                               // Toast.makeText(ListPemesanan_Activity.this, ""+cacad, Toast.LENGTH_LONG).show();            
                                initializeData(masuk_namamenu,masuk_jumlahmenu,masuk_nomeja);
                            }                              
                       }

                        private void initializeData(String masuk_namamenu,String masuk_jumlahmenu,String masuk_nomeja) {
                            // TODO Auto-generated method stub
                             ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
                                 nameValuePairs.add(new BasicNameValuePair("nama_menu",masuk_namamenu));
                                 nameValuePairs.add(new BasicNameValuePair("jumlah",masuk_jumlahmenu));
                                 nameValuePairs.add(new BasicNameValuePair("no_meja",masuk_nomeja));
                                sendData(nameValuePairs);   
                        }

                        private void sendData(ArrayList<NameValuePair> data) {
                                 // TODO Auto-generated method stub
                                  // 1) Connect via HTTP. 2) Encode data. 3) Send data.
                                 try
                                 {
                                     HttpClient httpclient = new DefaultHttpClient();
                                     HttpPost httppost = new HttpPost("http://nervousme.vacau.com/android/insert_pesanan_new.php");
                                     httppost.setEntity(new UrlEncodedFormEntity(data));
                                     HttpResponse response = httpclient.execute(httppost);
                                 }
                                 catch(Exception e)
                                 {
                                     Log.e("log_tag", "Error:  "+e.toString());
                                 } 
                        }
                }; 
        submit_list_pemesanan.setOnClickListener(listener);    

        OnClickListener listener1 = new OnClickListener() {
            @Override
            public void onClick(View v) {

                    EditText txtNoMeja = (EditText)findViewById(R.id.txtNoMeja);

                    String masuk_nomeja = txtNoMeja.getText().toString();
                   // Toast.makeText(ListPemesanan_Activity.this, ""+cacad, Toast.LENGTH_LONG).show();            
                    initializeData(masuk_nomeja);

           }

            private void initializeData(String masuk_nomeja) {
                // TODO Auto-generated method stub
                 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);                 
                     nameValuePairs.add(new BasicNameValuePair("no_meja",masuk_nomeja));
                    sendData(nameValuePairs);   
            }

            private void sendData(ArrayList<NameValuePair>   data) {
                     // TODO Auto-generated method stub
                      // 1) Connect via HTTP. 2) Encode data. 3) Send data.
                     try
                     {
                         HttpClient httpclient = new DefaultHttpClient();
                         HttpPost httppost = new HttpPost("http://nervousme.vacau.com/android/reservasi_nomeja.php");
                         httppost.setEntity(new UrlEncodedFormEntity(data));
                         HttpResponse response = httpclient.execute(httppost);
                     }
                     catch(Exception e)
                     {
                         Log.e("log_tag", "Error:  "+e.toString());
                     } 
            }
    }; 
```

关于为什么吐司没有出现的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:38:09.380

您的 arraylist 包含 MenuInputClass 对象，您必须遍历列表以找出是否有任何对象包含您需要的字符串。根据您是否希望 Toast 通知出现一次或多次，您可能希望中断循环。

你可以尝试做这样的事情。

```
for（MenuInputClass 麦克风：结果）{
    if(mic.getNama_menu().equals(hehe)) {
        Toast.makeText(Appetizer_Activity.this, "已经存在"+呵呵, Toast.LENGTH_LONG).show();
        // 如果您希望 Toast 在每次出现字符串时显示一次通知，请取消注释下面的行
        // 休息;
    } else if (mic.getJumlha_menu().equals(hihi)) {
        Toast.makeText(Appetizer_Activity.this, "已经存在"+hihi, Toast.LENGTH_LONG).show();
        // 如果您希望 Toast 在每次出现字符串时显示一次通知，请取消注释下面的行
        // 休息;
    }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:06:24.193

在第一个示例 ( `if(results.contains(hehe))`) 中，您询问`hehe`对象是否在数组列表中，而不是数组列表中的任何对象是否具有与 相同的文本`hehe`。您可以有两个`String`s 包含完全相同的字符集，但它们是不同的对象。

如果您的目标是确定数组列表中的任何条目是否包含相同的文本，则需要比较每个对象包含的文本。例如，

```
for (String myString : results) {
    if (myString.compare(hehe)) {
        Toast.makeText(Appetizer_Activity.this, "already exist"+hehe, Toast.LENGTH_LONG).show();          
        break;
    }
] 
```

# php - 为什么我对数组的查询在 PHP 中返回一个对象数组？

> ID：13215560
> 
> 赞同：0
> 
> 时间：2012-11-04T02:43:31.867
> 
> 标签：php, mysql

我试图简单地运行一个查询并在一个数组中获取结果：

```
function run_query($query)
{
    $out = '';
    $db = new PDO("mysql:host=localhost;dbname=test","test","test");
    $out = $db->query($query)->fetchAll(PDO::FETCH_OBJ);
    return $out;
} 
```

在另一端：

```
$l_o_array = $php_functions->run_query('SHOW TABLES');
$temp = implode(',', $l_o_array); 
```

> 结果：可捕获的致命错误：stdClass 类的对象无法转换为字符串

我认为这是因为我使用`FETCH_OBJ`，但是我用什么来获取字符串数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:17:49.980

试试 print_R();

理解问题

```
<?php
$a = array ('a' => 'apple', 'b' => 'banana', 'c' => array ('x', 'y', 'z'));
print_r ($a);
?> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T02:50:52.190

这是您可以做到的一种方法：

```
function run_query($query)
{
    $out = '';
    $db = new PDO("mysql:host=localhost;dbname=test","test","test");
    $out = $db->query($query)->fetchAll();
    return $out;
}

$results = run_query('SHOW TABLES');

$tables = array();
foreach($results as $result)
    $tables[] = $result['Tables in test']; // Note, replace "test" with your database name

$temp = implode(',', $tables); 
```

# javascript - Firefox 插件可自定义 [en|dis] 对特定 URL 启用哪些 JS 函数

> ID：13215564
> 
> 赞同：0
> 
> 时间：2012-11-04T02:44:30.743
> 
> 标签：javascript, firefox, firefox-addon

我想知道是否可以编写一个 FF 插件，一旦加载某个页面，它会生成所有 JS 功能的列表，并为用户提供禁用或保持启用某个功能的选项。

我从 FB 得到了这个想法。当我在阅读或评论某些内容时，FB 新闻提要自我刷新让我感到非常愤怒，然后它被推下屏幕，我找不到它，因为我的提要像 2 英里长。

但是，我不想完全关闭 JS。我希望能够设置哪些是受欢迎的功能，哪些不是。在我的书中，自我刷新和禁用后退操作是任何激怒我的网站的最粗鲁的 JS 功能。

然后，这种设想的插件将保存特定 URL 的首选项，以便在重新访问时加载它们，就像 cookie 一样。

但是，如果已经有这样的东西，那就太棒了，我不必重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:30:20.417

如今，所有复杂的 JS 框架和库都在使用中，除了最基本的用例之外，您的计划在所有情况下都会失败。

禁用您不完全了解它的功能的功能会产生奇怪的后果。这变得更加困难，因为许多函数在完成时会返回值。因此后续代码可能会中断或无法正确执行。

您根本无法判断 JS 代码是否足够灵活以处理中断的功能或与此干预相关的后果。

在您特殊的 facebook 用例中，简单地禁用 XHR-Requests 可能就足够了。我注意到“拉”请求与新闻源刷新有关。您可以编写一个 GreaseMonkey 脚本，在启动后一段时间覆盖本机 XHR 对象：

```
setTimeout( function() {
    XMLHttpRequest = function(){}
    XMLHttpRequest.prototype = {
        open: function(){},
            send: function(){}
    }
}, 5000); 
```

# php - PHP未定义变量奇怪

> ID：13215567
> 
> 赞同：5
> 
> 时间：2012-11-04T02:44:37.250
> 
> 标签：php, variables

这是我的脚本，它验证是否`username`已采取。

```
while ($row = mysql_fetch_array($result))
{
  $usname=$row['Username'];
}
if ($usname!=$uname)
{

} else {
  echo "Username taken!";
  die;
} 
```

它运作良好。如果 a`username`被占用，它不会将它添加到数据库中，如果它未被认领，它会添加。但我总是收到这个烦人的错误：

> 注意：未定义变量：第 29 行 C:\xampp\htdocs\insert.php 中的 usname

我定义了那个变量！

帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T02:48:33.037

如果`mysql_fetch_array()`返回`null`，您的 while 循环将永远不会启动，因此`$usname`永远不会被初始化。

尝试在上面的行中声明它，如下所示：

```
$usname = null;
while($row = mysql_fetch_array($result))
{
   $usname=$row['Username'];
}
If ($usname!=$uname)
{

}else{
   echo "Username taken!";
   die;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T02:55:48.697

您尚未声明`$usname`为变量。尝试`$usname='';`在while循环之前放置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T02:58:21.097

尝试使用

```
mysql_fetch_array($result, MYSQL_ASSOC) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T21:08:12.943

您需要定义 $usname

```
$usname = null; 
```

# zend-framework - Zend Router URL 数组合并

> ID：13215568
> 
> 赞同：2
> 
> 时间：2012-11-04T02:44:52.710
> 
> 标签：zend-framework, url-routing, zend-route, zend-router

我对自定义 zend 路由器有疑问。这是我的猫路由器

```
$frontController = Zend_Controller_Front::getInstance();
$router = $frontController->getRouter();
$router->addRoute('categories', new Zend_Controller_Router_Route(
        'video/k/:id/:title',array(
            'controller' => 'video',
            'module' => 'default' ,
            'action' => 'k',
            'id' => '',
            'title' =>''
            )
    ));

$params = Zend_Controller_Front::getInstance()->getRequest()->getParams(); 
```

当我尝试**http://dev.dummy.com/video/k/1/foo**工作正常但

```
$this->url(array_merge($params, array('order' => 'title'))) or
$this->url(array_merge($params, array('order' => 'title')),'categories')
$this->url(array_merge($params, array('order' => 'title')),'categories', true) 
```

不返回**htttp://dev.dummy.com/video/k/1/foo/order/title** 仍然返回**htttp://dev.dummy.com/video/k/1/foo**。

希望这有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:19:37.263

When doing the array_merge, the integer keys will be reset to start from beginning. Just append your array instead of the array_merge:

```
 $router->addRoute('categories', new Zend_Controller_Router_Route(
    'index/test/:id/:title',array(
        'controller' => 'index',
        'module' => 'default' ,
        'action' => 'test',
        'id' => '',
        'title' => ''

        )
     ));

   echo $this->url(array('order' => 'title')); 
```

Tried it with [http://dev.dummy.com/video/k/1/foo](http://dev.dummy.com/video/k/1/foo) and [http://dev.dummy.chom/video/k/1/foo/order/title/](http://dev.dummy.chom/video/k/1/foo/order/title/). In both cases, the url helper output was - htttp://dev.dummy.com/video/k/1/foo/order/title

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:45:36.397

尝试将`$reset`url-helper 的第三个参数设置为`true`：

```
$this->url(array_merge($params, array('order' => 'title')), 'categories', true) 
```

这将重置默认参数。

（文档位于[http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial)）

# android - 获取保存的相机图片的位置

> ID：13215569
> 
> 赞同：0
> 
> 时间：2012-11-04T02:45:01.490
> 
> 标签：android, android-camera, android-camera-intent

好的，所以我有一个打开相机的按钮，当我拍照并保存它时，如何获取文件名+保存位置以在我的应用程序中打开它？

这是我的按钮点击

```
Button btncamera = (Button)findViewById(R.id.btncamera);
btncamera.setOnClickListener(new OnClickListener(){
    public void onClick(View v){
        Intent cameraIntent = nwe Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(cameraIntent, 2500);
    }
} 
```

这是我的 Result 它不包含任何内容，但它将启动另一个 Intent 来显示图像：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){

} 
```

也许我做错了，但任何指导将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:16:03.917

尝试将此添加到您的 onActivityResult。

```
Bitmap picture = (Bitmap) data.getExtras().get("data"); 
```

从相机意图中取出图像，从中创建位图，然后从那里使用它。将其写入文件，或将其直接导入显示资源。还请务必检查您的 ResultCode 以确定是否实际拍摄了照片。

# c# - 如何清除文本框？

> ID：13215574
> 
> 赞同：1
> 
> 时间：2012-11-04T02:46:20.360
> 
> 标签：c#, wpf, windows-8

我在 Java 和 C++ 方面有相当不错的背景，但我正在努力在 C# 中做一些微不足道的事情。我有两个`TextBoxes`：`MessageBox`和`SenderBox`。我想将文本发送`SenderBox`到（这很容易），但是一旦完成`MessageBox`我想清除。`SenderBox`以下基本上是按 Enter 发送文本时触发的代码：

```
string temp = SenderBox.Text;
SenderBox.Text = "cleared";
MessageBox.Text = temp; 
```

大多数编程语言在某种程度上是程序化的，或者至少以某种有序的方式执行。为什么 Windows 8 应用程序的 C#/WPF 似乎违反了这个标准？首先，您会期望将 temp 设置为等于 的*值*。`SenderBox`如果您查看代码，`temp` **则不应**等于“已清除”，除非那是`SenderBox`包含的内容。在这一点上（第 1 行），它没有。我试图创建一个`send(msg)`函数来取消引用奇怪的字符串，但这并没有改变任何事情。以下代码按预期运行：

```
string x = "abc";
string y = x;
y = "123";
MessageBox.Text = x; 
```

有人可以启发我吗？不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:03:06.707

如果您不想切换两个框的内容，为什么不这样做：

```
MessageBox.Text = SenderBox.Text;
SenderBox.Text = "cleared"; 
```

# java - 如何保存包含其他实体列表的 JPA/Spring Data 实体而无需全部查找？

> ID：13215576
> 
> 赞同：2
> 
> 时间：2012-11-04T02:46:29.963
> 
> 标签：java, jpa, spring-data-jpa

假设您有一个名为 Bus 的实体。在该实体中，您有一个乘客列表。在 UI 中，您选择将乘坐巴士的乘客。将所有乘客添加到巴士后，您提交页面。在服务器端，您将获得 The Bus 实体，并获得代表乘客的 id 列表。在我保存公共汽车之前，我真的必须查找所有这些乘客并设置公共汽车上的乘客名单吗？我没有更改有关乘客本身的任何信息，并且如果不需要，我不愿意进行数据库访问。

环顾四周，我看到人们使用实体管理器 find() 来执行此操作，但我不确定如何使用 spring-data 来执行此操作。

理想情况下，最好在我发送的 json 对象上设置这个 id 列表，并在 Bus 实体上使用一些注释，以便在将乘客列表保存在 Bus 实体上时知道期望 id。

我对 JPA 相当陌生，因此请随时指出正确的单词以在 google 上搜索。我只是不确定如何去做这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:48:22.763

使用 spring 数据，它使用合并，所以我所要做的就是用一个新创建的乘客列表保存公共汽车，该列表只设置了 id。无需查找它们，只需创建一个新对象并在其上设置 id 然后保存。就是这么简单。

# scipy - 不能对 IronPython 使用 ipy -X:Frames -c "import scipy"

> ID：13215580
> 
> 赞同：3
> 
> 时间：2012-11-04T02:47:22.730
> 
> 标签：scipy, ironpython

我正在尝试在我的 IronPython 项目中使用 Scipy，据说 SciPy 包利用了 Cpython 的堆栈帧检查功能，默认情况下，IronPython 中没有启用这些功能，所以我们必须使用

> ipy -X:Frames -c "导入 scipy"

在命令提示符下，或者在 Visual Studio 中，我们必须去

> 工具/选项/python 工具/交互式窗口/

并在解释器选项中输入“-X:Frames”

但在 Visual Studio 中，我总是收到错误“断言失败”（我将图片的链接放在下面），这会强制关闭 VS

[http://tinypic.com/r/287i5c1/6](http://tinypic.com/r/287i5c1/6)

有什么建议吗？提前致谢

# javascript - jQuery 和我传递给 ajax 的数据根本不是我想要的

> ID：13215584
> 
> 赞同：0
> 
> 时间：2012-11-04T02:48:06.077
> 
> 标签：javascript, jquery, ajax

我不确定发生了什么。我已经筋疲力尽地寻找答案。我以为是 processData 但在这种情况下 ajax 不会触发。我无法为我的生活弄清楚发生了什么。

我正在尝试通过 POST、ajax 发送数据。

由于我的数据是如何设置的，在页面中，我实际上可以创建一个哈希并将其推送到一个数组中。所以我有类似的东西。

我正在形成的数据如下所示：

在我的初始化函数中，我设置了一些变量。

```
this.dataHolder = []; 
```

在我的插件中的一个方法中：

```
 _acceptData:function(){
                var item = {};
                item[this.schema.itemId] =
                          {
                             "Color" : this.schema.color,
                             "Size" : this.schema.size,
                              "Cost"    : this.schema.cost

                          }
               return item;
            }, 
```

基本上我有一些其他的方法等等，但要点是上面的数据结构被放入：this.dataHolder

当我转储数据时，看起来应该如此。代码中的各种console.logs向我展示了数据格式正确等。但是当我将它传递给ajax数据时......它会做一些不稳定的事情。

当我有我的 ajax .. ala:

```
 var self = this;
.ajax({
  type: "POST",
  data : {matchedItems : self.dataHolder},
  dataType: json,
  url : /some/path/ 
```

我尝试了很多不同的东西，在所有情况下，数据要么是未定义的（当我发布它时），要么是一种奇怪的格式，比如：（在日志中）

```
 $VAR1 = {

      'matchedItems[0][itemid1][Color]' => 'Blue',
      'matchedItems[0][itemid1][Size]' => '11',
      'matchedItems[0][itemid1][Cost]' => '33.90',
      'matchedItems[1][itemid2][Color][]' => 'Silver',
      'matchedItems[1][itemid2][Size]' => '13',
      'matchedItems[1][itemid2][Cost]' => '44',
      'matchedItems[2][itemid3][Color][]' => 'Red',
      'matchedItems[2][itemid3][Size]' => '9',
      'matchedItems[2][itemid3][Cost]' => '23'
    }; 
```

或不同的排列

```
data : MatchedItems : {self.dataHolder} 
```

或者

```
data : {MatchedItems : {self.dataHolder}} 
```

等等..没关系，POST总是得到一些非常奇怪的格式。

这就是我发送它时它的外观以及他们如何接收它。

```
matchedIeds = {
          itemId1 :
            {
              Color : Red,
              Size : 11,
              Cost    : 44
            },
          itemId2 :
            {
              Color : Blue,
              Size : 8,
              Cost    : 12
            },
          itemId3 :
            {
              Color : Blue,
              Size : 19,
              Cost    : 88.09
            }
          } 
```

我的意思是，我正在这样设置我的数据，所以我看不出有什么问题。

注意：我尝试了 processData : false，但这根本没有帮助。

**编辑：** 这是代码 console.log 在我将其传递给 .ajax 方法之前编写的代码。 **控制台日志**

```
[Object { itemid1={...}}, Object { itemid2={...}}, Object { itemid3={...}}] 
```

**这是帖子的参数：** jquery.js (line 641) POST [http://www.myurl/to/test](http://www.myurl/to/test)

200 OK 79ms
jquery.js（第 7829 行）

标头PostResponseJSONCookies

```
Parametersapplication/x-www-form-urlencoded
undefined   undefined
undefined   undefined
undefined   undefined 
```

# javascript - 从选择字段Javascript获取默认值

> ID：13215586
> 
> 赞同：4
> 
> 时间：2012-11-04T02:48:38.807
> 
> 标签：javascript, select, default, default-value

我有一个具有当前选项的选择字段，并且我有一个 php 脚本检查 mysql 数据库并向当前正在使用的数据库添加一个选择标记。

我需要找到一种方法来知道用户是否在提交之前更改了选择字段。

```
var Access = document.forms[UIDF]["Access"].value;
var DAccess = document.forms[UIDF]["Access"].defaultIndex; <--- This is my problem. I just need to know how to get the selected option value as this keep changing with every user

<select name="Access">
  <option value="0" selected='selected'>Employee</option>
  <option value="1">Team Leader</option>
  <option value="2">Admin</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T02:52:35.497

该`Option`标记有一个 javascript 属性`defaultSelected`，如果该选项在页面加载`true`时具有值，则该属性设置为。`selected`请注意，这是`option`标签而不是标签`select`，因此您必须遍历选项并检查属性。

就像是

```
var DAccess;
var AccessSelect = document.forms[UIDF]["Access"];

for (var i = 0 ; i<AccessSelect.length ; i++)
{
    if (AccessSelect[i].defaultSelected)
        DAccess = AccessSelect[i].value;
} 
```

或者，更重要的是：

```
var AccessHasChanged = false;
var AccessSelect = document.forms[UIDF]["Access"];

for (var i = 0 ; i<AccessSelect.length ; i++)
{
    if (AccessSelect[i].defaultSelected && 
        AccessSelect.value != AccessSelect[i].value)
        AccessHasChanged = true;
} 
```

# android - Android XXHDPI 资源

> ID：13215587
> 
> 赞同：85
> 
> 时间：2012-11-04T02:48:58.997
> 
> 标签：android, android-resources

Google Nexus 10 即将面世，是[第一款使用`xxhdpi`资源](https://plus.google.com/113735310430199015092/posts/Ne8teAxeH45)的设备。它的显示密度约为 300 DPI（根据[Nexus 10 网站](http://www.google.com/nexus/10/)和[此计算器](http://members.ping.de/~sven/dpi.html)）。

但是，当我转到 Android 文档时，它指出：

*   `ldpi`: ~120dpi
*   `mdpi`: ~160dpi
*   `hdpi`: ~240dpi
*   `xhdpi`: ~320dpi
*   `xxhdpi`未指定。

为什么 Nexus 10 的 300 DPI 屏幕`xxhdpi`不是`xhdpi`，大概的 DPI*应该是*`xxhdpi`多少？我们是否应该担心`xxhdpi`此时有新的资源（除了图标），还是应该让操作系统扩展`xhdpi`资源？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-11-04T03:12:16.253

根据 G+ 资源中链接的帖子：

> Nexus 10 上华丽的屏幕属于 XHDPI 密度桶。在平板电脑上，Launcher 使用上一个密度桶 [0] 中的图标来使它们稍微变大。为了确保您的启动器图标（可以说是您的应用程序最重要的资产）清晰，您需要在 drawable-xxhdpi 或 drawable-480dpi 文件夹中添加一个 144*144px 的图标。

所以看起来 xxhdpi 设置为 480dpi。据此，平板电脑使用的资产来自一个 dpi 存储桶，高于它们用于启动器的存储桶。位于存储桶 xhdpi 中的 Nexus 10 将从 xxhdpi 中拉出启动器图标。

[来源](https://plus.google.com/118292708268361843293/posts/ePQya3KsTjW)

此外，不知道平板电脑会从高于其级别的资产桶中获取资源。著名的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T16:55:47.527

Nexus 10 的屏幕 DPI 为±300，在非官方[`xhdpi`的 280‑400 范围内](http://developer.android.com/guide/practices/screens_support.html#range)。

通常，设备使用为其密度设计的资源。但也有例外，将来可能会添加例外。Nexus 10`xxhdpi`在启动器图标方面使用资源。

xxhdpi的标准量化 DPI[是 480](http://developer.android.com/reference/android/util/DisplayMetrics.html#DENSITY_XXHIGH)（这意味着 DPI 在 400-560 范围内的屏幕可能是 xxhdpi）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-31T16:47:29.940

xxhdpi 以前没有指定，但现在新设备 S4，HTC 肯定是在 xxhdpi 里面。这些设备 dpi 大约是 440。我不知道 xxhdpi 的确切限制 看看[如何为 xxhdpi 设备三星 S4 开发 android 应用程序](http://androidtrainningcenter.blogspot.in/2013/03/how-to-develop-android-application-for.html) 我知道这已经晚了回答，但自从提出问题以来事情发生了变化

**注意** Google Nexus 10 需要在 drawable-xxhdpi 或 drawable-480dpi 文件夹中添加一个 144*144px 的图标。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-07T12:23:59.957

480 dpi 是 xxhdpi 的标准量化分辨率**，**它可以变化更少（即：440 dpi）或更多（即：520 dpi）。比例因子：3x (3 * mdpi)。

现在有了更高的分辨率，**xxxhdpi** (640 dpi)。比例因子 4x (4 * mdpi)。

这是[源参考](http://www.androidpolice.com/2013/07/25/xxxhdpi-spotted-in-4-3-source-prepare-your-eyeballs-for-android-in-4k-resolution/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-03T15:56:49.847

分辨率为 480 dpi，启动器图标为 144*144px，所有缩放比例为 mdpi（所谓的“基本”、“基线”或“正常”）大小的 3 倍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-08T08:04:50.300

市场上较新的 android 手机，如 HTC one、Xperia Z 等，分辨率在 >480dpi 范围内，也将它们归入新的 xxhdpi 类。新资产也可能对他们有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-20T13:37:36.500

一组四种通用尺寸：small、normal、large 和 xlarge 注意：从 Android 3.2（API 级别 13）开始，这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术。如果您正在为 Android 3.2 及更高版本进行开发，请参阅为 Android 3.2 声明平板电脑布局以获取更多信息。

一组六个广义密度：

ldpi（低）~120dpi

mdpi（中）~160dpi

hdpi（高）~240dpi

xhdpi（超高）~320dpi

xxhdpi（超超高）~480dpi

xxxhdpi (extra-extra-extra-high) ~640dpi

来自[developer.android.com：http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-26T15:49:53.260

根据这个[PPI 计算工具](https://pixelsperinchcalc.com/)，Google Nexus 10 的显示密度约为 300 DPI...

但是，Android 文档指出：

ldpi : ~120dpi mdpi : ~160dpi hdpi : ~240dpi xhdpi : ~320dpi xxhdpi is not specified.

I think we just let Android OS scale up xhdpi resources...

# java - 组合和排列算法（递归）

> ID：13215593
> 
> 赞同：1
> 
> 时间：2012-11-04T02:49:48.027
> 
> 标签：java, recursion, permutation, combinations, repeat

我正在做一个 Java 作业，我完全被难住了。

问题是：

使用递归编写一个函数来执行以下操作：您有 X 张不同的卡片。你只有 Y 个信封。Y 小于或等于 X。对于 X 和 Y 的任何给定值，

1.  当订单不重要且不允许重复时，显示您可以填写 Y 信封的所有可能方式。`hint: X! / (( X-Y)! * Y!)`

2.  当订单很重要且允许重复时，显示您可以填写 Y 信封的所有可能方式`hint: X^Y`

3.  当订单很重要且不允许重复时，显示您可以填写 Y 信封的所有可能方式提示：`X! / (X – Y)!`

4.  当顺序不重要且允许重复时，显示所有可能的方式来填充 Y 信封提示：`(X + Y – 1)! / (Y! * (X – 1)!)`

例如，在情况 (1) 下，`if X = {J, Q, K, A) and Y = 3`输出应为：`{J,Q,K} {J,Q,A} {J,K,A} {Q,K,A}.`

我不希望任何人发布任何代码，我也不想找人帮我解决这个问题！我希望一旦我完成了第一部分（问题a），它将打开闸门。有人可以在制定伪代码算法方面提供一些指导吗，据我所知：

用增加的卡片依次填充 Y 信封 用最高的卡片`(ex: X=5, Y=3) {1, 2, 3}.` 替换最高的信封`{1, 2, 5}`，递减直到我们找到它的原始值`{1, 2, 4}`。对从最高到最低的每个信封执行此操作（其中数字尚未使用）`{1, 5, 4} {1, 3, 4} {5, 3, 4} {2, 3, 4}.`

这是我在它崩溃之前得到的，因为它缺少 3 个组合`{1, 5, 3} {3, 4, 5} {5, 3, 2}.`

我将不胜感激任何帮助，因为这是我将重复的任务，我不想要解决方案，我需要帮助自己解决问题。谢谢！

编辑：我已经尝试了概述的所有 3 种解决方案，但我仍然没有得到它。这就是我到目前为止所得到的：

```
public static void comboNoRep(String[] a, int y, boolean[] used)
{

    if(y == 0) {
        // found a valid solution.
        System.out.println(result);
    }

    for(int i=0; i<a.length; i++) {
        if(!used[i]) {
            used[i] = true;
            result = result + a[i];
            comboNoRep(a, y - 1, used);
            result = result + " ";
            used[i] = false;
        }
        else {
        }
    }

} 
```

谁能帮忙指出我的缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:06:16.623

你的老师希望你使用递归。

对于给定的 X，如果 Y 为零，答案是什么？使用您的代码解决此问题。

答案是什么，对于给定的 X，如果我免费为您提供 Y = 某个随机整数 n 的解决方案，那么 n + 1 的解决方案是什么？换句话说，如果我告诉你 X = 5, Y = 3 的解是 { { ... }, { ... }, ... }，你能很容易地找出 X = 5 的解吗？ Y = 3 + 1 = 4？

这是一个完全不同的问题的示例：

假设您知道前两个斐波那契数是 1 和 1。那么找到下一个很容易，对吧？它是 2。现在假设你知道前两个是 1 和 2，下一个是 3！如果前两个是2和3，下一个是5！

一些伪代码：

```
public int fib(int stop) {
     if (stop < 2) return 1;
     return fibHelp(stop - 2, 1, 1);
}

public int fibHelp(int stop, int oneBelow, int twoBelow) {
   if (stop == 0) return oneBelow;

   return fibHelp(stop - 1, oneBelow + twoBelow, oneBelow);
} 
```

看看 fibHelp 是如何调用自己的？那是递归！只要确保你有一个停止条件（我的 if 语句）。

对于您的具体问题，不要 return `void`，而是要`comboNoRep`return a `Set<Set<Integer>>`。当 时`y=0`，返回`Set`带有一个元素的 a（一个空的`Set`）。`y=1`，返回 a通过向更大集合中的每个集合添加一个元素来`Set`构建一堆s（在它为空的情况下，依此类推）。`Set``y=1``Set`

使用`Set`而不是`List`因为您想确保没有重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T07:05:00.400

第一部分可以使用埃克塞特算法。请参阅以下链接以获取更多信息：

[访问这里：http://www.bearcave.com/random_hacks/permute.html](http://www.bearcave.com/random_hacks/permute.html)

我不知道如何在 JAVA 中执行此操作，但我的旧 C 代码片段可能会达到目的。

```
#include <stdio.h>

//Print Function
void print(const int *arr, const int size)
{
    int i;

    if (arr != 0) 
    {
        for (i = 0; i < size; i++)
            printf("%d ", arr[i]);
        printf("\n");
    }
}

//Permute Function
void permute(int *arr, const int start, const int sets, const int len)
{  
    int i,tmp;

    if (start == sets-1)
        print(arr, sets);
    else
    {
        for (i = start; i < len; i++)
        {
            tmp = arr[i];

            arr[i] = arr[start];
            arr[start] = tmp;

            permute(arr, start+1, sets, len);   //<-- Recursion

            arr[start] = arr[i];
            arr[i] = tmp;
        }
    }
}

int main()
{
  int sets,arr[] = {1, 2, 3, 4, 5};

  //Accept Number Of Sets To Form
  printf("Enter Number Of Sets: ");
  scanf("%d",&sets);

  //Call Permute Function
  permute(arr, 0, sets, sizeof(arr)/sizeof(int));

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:57:42.373

您必须探索所有可能的路线：

创建一个空的“解决方案”列表

对于每张卡片 a，您的第一组解决方案首先将卡片放在每个信封中 - x*y 解决方案

对于您选择的每张卡片：重复，从同一组卡片中删除您使用的卡片，直到您完成解决方案并将其放入数组中时用完卡片

打印数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T03:02:15.510

对于问题一，假设您的卡被命名`card_1`为`card_x`。请注意，填充 Y 信封的所有可能方式都包含`card_1`或不包含。如果是这样，您已将问题减少到用卡片 2 到 X 填充 Y-1 信封；如果不是，您已将问题减少到用卡片 2 到 X 填充 Y 信封。

希望这足以为您提供帮助而不会太多。祝你好运！

# xna - DirectX 模型的一致性

> ID：13215602
> 
> 赞同：1
> 
> 时间：2012-11-04T02:51:36.450
> 
> 标签：xna, directx

有没有办法检查 DirectX 模型 (.x) 的一致性？

使用 XNA GameStudio 3.1 编译 .x 文件时，编译中止并显示以下错误消息：

`Error 2 Could not read the X file. The file is corrupt or invalid. Error code: D3DXFERR_PARSEERROR. C:\WFP\Browser\Content\m.x KiviBrowser`

一些模型正确编译，没有任何错误/警告，一些模型如描述的那样中止。每个模型的文件有几千行。

我正在 Googles SketchUp 8 中创建文件，它们看起来都很好，并且没有任何损坏迹象。

假设我有这样一个模型，我的 XNA 编译器无法编译，因为它们在文件中的某处不一致 - 我如何识别它以纠正它？

# java - 并发java

> ID：13215605
> 
> 赞同：0
> 
> 时间：2012-11-04T02:52:02.753
> 
> 标签：java, concurrency

```
static ConcurrentHashMap k;

X x; 
//line 3: 
synchronized(k){ x = k.get("LL");}

// line 5 

// line 12: 
synchronized(k){if(x.b){x.b = false;}} 
```

'k' 是共享地图。第一个线程通过第 3 行，当线程 1 在第 5 行时，第二个线程通过第 3 行，线程一将 xb 更改为 false，线程 2 看到什么 xb？第 5 行旨在显示线程 2 在线程 1 进入第二个同步块之前获得它的 x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:25:06.420

您对术语“第一个线程”和“第二个线程”的定义有些过分；您的问题预设了进入第一个`synchronized`块的第一个线程也将是进入第二个`synchronized`块的第一个线程，但实际上没有理由期待这一点。

然而，第一个`synchronized`块并没有做任何非常相关或有趣的事情——你的代码片段中没有任何东西 mutates `k`，第一个`synchronized`块只是访问它——所以我将忽略它是`synchronized`. 这将稍微简化定义：现在“第一个线程”表示进入第二个`synchronized`块的第一个线程，“第二个线程”表示进入第二个`synchronized`块的第二个线程。（到目前为止还好吗？） 定义的问题。. .

假设不可能有其他线程进入并设置`x.b`为`true`- 或者，就此而言，第*一个*线程这样做，在您引用的代码段之后的代码中 - 同样，两个线程不可能完全不同结果是`k.get("LL")`由于其他地方发生的事情 - 然后第二个线程将`x.b`显示为`false`，就像人们天真地期望的那样。这是因为

> 如果一个动作*发生在*另一个动作之前，那么第一个动作对第二个动作可见并在第二个动作之前排序。

和

> 监视器上的解锁发生在该监视器上的每个后续锁定*之前。*

（以上两个引文均来自[*Java 语言规范*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)[，Java SE 7 版](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)[的第 17.5.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)*节；有关更多形式，请参见该部分及其之前的部分。）*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:29:32.957

解释不是很清楚，但这就是我的理解。

由于线程 1 位于第 5 行（已经通过第 3 行）并且尚未到达第 12 行（并且您所说的介于 3 和 12 之间的某处线程 1 将 xb 设置为 false），线程 2 应该将 xb 视为刚刚设置的任何线程它到（这是错误的）。虽然我没有看到线程 2 实际上关心在第 3 行中看到 xb。而且我不清楚为什么第 5 行（我没有看到）不同步，但是将其设置为 false 的第 12 行是同步的。*

# php - ZF2/PHP 命名空间——哪个更快/更好？

> ID：13215606
> 
> 赞同：1
> 
> 时间：2012-11-04T02:52:05.263
> 
> 标签：php, zend-framework2

我已经创建了我的代码，因为 ZF2 推动你这样做，现在我开始认为它实际上违背了首先使用命名空间的全部意义/好处。

我想改变一切，但我害怕以自己的方式去做，因为 ZF 自己并没有这样做，所以我觉得我必须错过一件重要的事情。

我的文件夹/文件结构是这样的：

```
- Application
    - Controller
        IndexController.php
    - Model
        - Table
            User.php
            Building.php
        - Mapper
            User.php
            Building.php
        - Entity
            User.php
            Building.php 
```

所以在我的控制器中，代码可能看起来像这样，正如 ZF2 建议你开始的那样：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController,
    Zend\View\Model\ViewModel;

use Application\Model\Entity\User as UserEntity,
    Application\Model\Mapper\User as UserMapper,
    Application\Model\Table\User as UserTable;

class IndexController extends AbstractActionController {
    public function indexAction() {

        $userEntity = new UserEntity;
        $userMapper = new UserMapper;
        $userTable = new UserTable; 
```

就在那里，我只给出了一些项目，但是随着您的应用程序的增长，您最终会得到一个巨大的 use 语句，看起来应该更像下面这样：

```
namespace Application;

use Zend\Mvc\Controller\AbstractActionController,
    Zend\View\Model\ViewModel;

use Model;

class IndexController extends AbstractActionController {
    public function indexAction() {

        $userEntity = new Entity\User;
        $userMapper = new Mapper\User;
        $userTable = new Table\User; 
```

我猜这是因为 ZF2 正在推动基于模块化的项目，这些项目有很多模块。但是如果需要，我可以肯定地放入该模块的命名空间吗？我仍然需要使用当前使用的更多限定名称来执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T09:15:09.093

声明是导入一个命名空间，`use`关于如何&何时导入，没有编码标准。

您必须记住两件事：

1.  是的，许多类（或命名空间）的使用可能会变得过于复杂。因此，我通常会导入一个命名空间，而不是显式导入类。示例在[此处](https://github.com/juriansluiman/SlmQueue/blob/master/Module.php#L6)（用于模块功能）、[此处](https://github.com/ZF-Commons/ZfcAdmin/blob/master/Module.php#L67-72)（用于自动加载）和[此处](https://github.com/ensemble/EnsembleKernel/blob/master/src/Kernel/Parser/Route.php#L48)（用于异常）。如您所见，它是 FQCN 和命名空间的混合体。
2.  如果您害怕“如果您的应用程序增长”：请考虑类，因为它们封装了责任。如果您的班级有多个职责，请将其分成两个班级。然后您还会注意到您导入的命名空间的数量会减少。

顺便说一句，有一个`use`PSR-2 指南规定使用语句必须以`;`每次使用结束。所以不是这个：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController,
    Zend\View\Model\ViewModel;

use Application\Model\Entity\User as UserEntity,
    Application\Model\Mapper\User as UserMapper,
    Application\Model\Table\User as UserTable;

class IndexController extends AbstractActionController {
    public function indexAction() {

        $userEntity = new UserEntity;
        $userMapper = new UserMapper;
        $userTable = new UserTable;
    }
} 
```

但是这个：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

use Application\Model\Entity\User as UserEntity;
use Application\Model\Mapper\User as UserMapper;
use Application\Model\Table\User as UserTable;

class IndexController extends AbstractActionController {
    public function indexAction() {

        $userEntity = new UserEntity;
        $userMapper = new UserMapper;
        $userTable = new UserTable;
    }
} 
```

所以你可以清理一下：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

use Application\Model;

class IndexController extends AbstractActionController {
    public function indexAction() {

        $userEntity = new Model\Entity\User;
        $userMapper = new Model\Mapper\User;
        $userTable = new Model\Table\User;
    }
} 
```

如果您想使用自己的实体和映射器，但使用来自不同模块的表，则代码将被重构为：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

use Application\Model;
use OtherModule\Model\Table\User as UserTable;

class IndexController extends AbstractActionController {
    public function indexAction() {

        $userEntity = new Model\Entity\User;
        $userMapper = new Model\Mapper\User;
        $userTable = new UserTable;
    }
} 
```

# expressionengine - 什么会导致频道条目在更新后不再解析（2.3.1 到 2.5.3）

> ID：13215607
> 
> 赞同：3
> 
> 时间：2012-11-04T02:52:13.043
> 
> 标签：expressionengine

我正在将客户的网站更新到最新版本的 EE，虽然更新非常顺利，但`{exp:channel:entries}`标签不再呈现其中的任何内容，但我看到条目上的日期是当前日期或以前的日期，状态设置为`open`，是的，`dynamic="no"`已设置。我无法想象是什么导致了这种情况，并且数据库导出显示所有频道条目都在那里。页面并非完全空白；模板本身渲染没有问题，到目前为止只是标签*。*`{exp:channel:entries}`

我能做些什么来测试这个吗？运行查询模块：

```
{exp:query sql="SELECT * FROM exp_channel_data "}
    {title}
{/exp:query} 
```

返回哈希值为`M00o93H7pQ09L8X1t49cHY01Z5j4TT91fGfr`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:09:52.590

我只在涉及结构时看到过该错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:58:05.770

在做了一些挖掘之后，事实证明，当我关闭我的扩展时，内容就出现了。结果，我尝试一一禁用扩展，直到罪魁祸首发现自己是 Solspace 的 Supersearch。这是插件的早期版本，将其更新到最新版本可以恢复一切！

# c++ - CUDA 并行化嵌套 for 循环

> ID：13215614
> 
> 赞同：6
> 
> 时间：2012-11-04T02:53:05.780
> 
> 标签：c++, c, parallel-processing, cuda, gpu

我是 CUDA 的新手。我正在尝试并行化以下代码。现在它位于内核上，但根本不使用线程，因此速度很慢。我试图使用这个[答案](https://stackoverflow.com/questions/5306117/cuda-kernel-nested-for-loop)，但到目前为止无济于事。

内核应该生成前 n 个素数，将它们放入 device_primes 数组，稍后从主机访问该数组。代码是正确的，并且在串行版本中工作正常，但我需要加快速度，也许使用共享内存。

```
//CUDA kernel code
__global__ void generatePrimes(int* device_primes, int n) 
{
//int i = blockIdx.x * blockDim.x + threadIdx.x;
//int j = blockIdx.y * blockDim.y + threadIdx.y;

int counter = 0;
int c = 0;

for (int num = 2; counter < n; num++)
{       
    for (c = 2; c <= num - 1; c++)
    { 
        if (num % c == 0) //not prime
        {
            break;
        }
    }
    if (c == num) //prime
    {
        device_primes[counter] = num;
        counter++;
    }
}
} 
```

我当前的、初步的、绝对错误的并行化尝试如下所示：

```
//CUDA kernel code
__global__ void generatePrimes(int* device_primes, int n) 
{
    int i = blockIdx.x * blockDim.x + threadIdx.x;
    int j = blockIdx.y * blockDim.y + threadIdx.y;
    int num = i + 2; 
    int c = j + 2;
    int counter = 0;

    if ((counter >= n) || (c > num - 1))
    {
        return;
    }
    if (num % c == 0) //not prime
    {

    }
    if (c == num) //prime
    {
       device_primes[counter] = num;
       counter++;
    }
    num++;
    c++;
} 
```

但是这段代码用没有意义的数据填充了数组。此外，许多值为零。提前感谢您的帮助，不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:35:49.723

您的代码中存在一些问题，例如：

```
int num = i + 2; 
```

此表达式分配给`thread 0`交互 2、`thread 1`迭代 3，依此类推。问题是线程将计算的下一次迭代是基于表达式的`num++;`。因此，`thread 0`将计算下一次迭代 3，该迭代已由 计算`thread 1`。因此，导致冗余计算。此外，我认为对于这个问题，只使用一维而不是二维会更容易`(x,y)`。因此，考虑到这一点，您必须更改`num++`为：

```
num += blockDim.x * gridDim.x; 
```

另一个问题是您没有考虑到变量`counter`必须在线程之间共享。否则，每个线程将尝试找到“n”个素数，并且所有这些素数都将填充整个数组。因此，您必须更改`int counter = 0;`为共享或全局变量。让我们使用一个全局变量，以便它可以在所有块的所有线程中可见。我们可以使用数组的零位置`device_primes`来保存变量`counter`。

您还必须初始化此值。让我们将这个作业只分配给一个线程，即 `id = 0 的线程，所以：

```
if (thread_id == 0) device_primes[0] = 1; 
```

但是，这个变量是全局的，它会被所有线程写入。因此，我们必须保证所有线程，在写入该全局变量之前，将看到该变量`counter`为 1（`device_primes`带素数的第一个位置，零用于`counter`），因此您还必须在末尾添加一个屏障，所以：

```
if (thread_id == 0) 
    device_primes[0] = 1;
__syncthreads() 
```

所以一个可能的解决方案（尽管效率低下）：

```
__global__ void getPrimes(int *device_primes,int n)
{ 
    int c = 0;
    int thread_id = blockIdx.x * blockDim.x + threadIdx.x;
    int num = thread_id;

    if (thread_id == 0) device_primes[0] = 1;
    __syncthreads();

    while(device_primes[0] < n)
    {

        for (c = 2; c <= num - 1; c++)
        { 
            if (num % c == 0) //not prime
            {
                break;
            }
        }

        if (c == num) //prime
        {
            int pos = atomicAdd(&device_primes[0],1);
            device_primes[pos] = num;

        }

        num += blockDim.x * gridDim.x; // Next number for this thread       
    }
} 
```

以下行将`atomicAdd(&device_primes[0], 1);`基本执行`device_primes[0]++;`。我们使用原子操作，因为变量`counter`是全局的，我们需要保证互斥。请注意，您可能必须使用`flag -arch sm_20`.

**优化**：在代码方面，最好使用较少/不同步的方法。此外，还可以通过考虑素数的一些属性来减少计算次数，如[http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)中的示例所示。

# d3.js - 使用 D3 转换方法和散点图数据

> ID：13215615
> 
> 赞同：13
> 
> 时间：2012-11-04T02:53:24.063
> 
> 标签：d3.js, transition, scatter-plot

所以我是 D3 的新手，一般来说对 JavaScript 的经验很少。所以我一直在关注一些教程，目前正在使用创建基本散点图的源代码。现在我的问题是，当我添加更多数据集时，如何使用 transition() 方法来移动圆圈？我希望能够设置按钮，当用户按下它们时，它会使用相应的数据集激活 transition() 方法。我阅读的关于过渡的教程仅显示了单个矩形上的过渡，并且是手动完成的，没有数据，也没有多个项目

```
//Width and height
var w = 900;
var h = 600;
var padding = 30;

//Static dataset
var dataset = [
    [50, 30], [300, 75], [123, 98], [70, 40], [247, 556],
    [410, 12], [475, 44], [25, 67], [85, 21], [220, 88],
    [600, 150]
];          

//Create scale functions
var xScale = d3.scale.linear()
    .domain([0, d3.max(dataset, function(d) { return d[0]; })])
    .range([padding, w - padding * 2]);

var yScale = d3.scale.linear()
    .domain([0, d3.max(dataset, function(d) { return d[1]; })])
    .range([h - padding, padding]);

var rScale = d3.scale.linear()
    .domain([0, d3.max(dataset, function(d) { return d[1]; })])
    .range([4, 4]);

//Define X axis
var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom")
    .ticks(5);

//Define Y axis
var yAxis = d3.svg.axis()
    .scale(yScale)
    .orient("left")
    .ticks(5);

//Create SVG element
var svg = d3.select("body")
    .append("svg")
    .attr("width", w)
    .attr("height", h);

//Create circles
svg.selectAll("circle")
    .data(dataset)
    .enter()
    .append("circle")
    .attr("cx", function(d) {
        return xScale(d[0]);
    })
    .attr("cy", function(d) {
        return yScale(d[1]);
    })
    .attr("r", function(d) {
        return rScale(d[1]);
    })
    .attr("fill", "blue");

//Create X axis
svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + (h - padding) + ")")
    .call(xAxis);

//Create Y axis
svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(" + padding + ",0)")
    .call(yAxis); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T03:32:03.963

首先，在解决过渡问题之前，您需要进行一些重构。`update(newData)`每次数据更改时，您都需要调用一个函数，并让该函数执行所有必要的更新。

[mbostock 的本教程](http://bl.ocks.org/3808218)准确地描述了您需要的“一般更新模式”。

[然后第二部分](http://bl.ocks.org/3808221)和第三[部分](http://bl.ocks.org/3808234)继续解释如何转换到这种模式。

它们很短。一旦你理解了它们，你就会拥有执行此操作所需的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T18:25:12.793

我猜你只需要在`.transition()`函数之后指定`.data(newData)`函数

在以下示例中，Y2 是 JSON 文件中的一个节点，其中 Y1 是之前使用的节点

例子：

```
//Creating the button
var button = d3.select("body")
.append("input")
.attr("type","button")
.attr("value", "A button");

//Transitioning process
button.on("click", function()
{   circles
    .data(data.Y2)
    .transition()
    .attr("cx", function(d)
    {
        return d[0];
    }
    )
    .attr("cy", 300);
}
) 
```

# web - 如何制作网站图标？

> ID：13215616
> 
> 赞同：0
> 
> 时间：2012-11-04T02:53:30.957
> 
> 标签：web, favicon

如何修复我的新标签和新窗口，以便它们显示我网站的图标？目前，它们显示 bluehost 默认图标。

我的正常页面图标：

```
<link rel="icon" href="protectedImages/faviconS.gif" type="image/gif" sizes="16x16" /> 
```

我显示的图像的 target=_blank 链接：

```
<td style="text-align:center;"><a href="'.$num.'" target="_blank"><img src="'.$num.'" width ="'.($width/4).'" alt="random image"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:57:51.673

将 favicon.ico 图形文件放在网络服务器的文档根目录中。对于 BlueHost，将其放在您的 public_html 文件夹中。

要创建 facivon.ico 文件，您可以在 Google 上搜索“favicon generator”。并转到[http://www.favicon.cc/](http://www.favicon.cc/)之类的站点来生成它。

# algorithm - 使用 Eigen SVD 的两个三角形的仿射变换逼近

> ID：13215620
> 
> 赞同：0
> 
> 时间：2012-11-04T02:54:23.920
> 
> 标签：algorithm, cgaffinetransform

在下面的代码中，我正在尝试实现[此处介绍的仿射变换近似算法](https://math.stackexchange.com/questions/158538/3d-transformation-two-triangles)

```
#include <Eigen/Eigen>
#include <iostream>

using namespace Eigen;
using namespace std;

int main(int argc, char **argv)
{
  Vector3f x1 (3.0f, 0.0f, 0.0f);
  Vector3f x2 (0.0f, 2.0f, 0.0f);
  Vector3f x3 (0.0f, 0.0f, 1.0f);

  Vector3f translation(1.0f, -2.0f, 2.0f);

  Vector3f x_bar1 = x1 + translation;
  Vector3f x_bar2 = x2 + translation;
  Vector3f x_bar3 = x3 + translation;

  std::cerr << "x_bar1 = \n" << x_bar1 << std::endl;
  std::cerr << "x_bar2 = \n" << x_bar2 << std::endl;
  std::cerr << "x_bar3 = \n" << x_bar3 << std::endl;

  Vector3f c     = (x1+x2+x3)/3.0f;

  Vector3f c_bar = (x_bar1+x_bar2+x_bar3)/3.0f;

  Vector3f y1,y2,y3, y_bar1,y_bar2,y_bar3;
  y1  = x1 - c;
  y2  = x2 - c;
  y3  = x3 - c;
  y_bar1 = x_bar1 - c_bar;
  y_bar2 = x_bar2 - c_bar;
  y_bar3 = x_bar3 - c_bar;

  Matrix3f H;
  H =  y1*y_bar1.transpose()+y2*y_bar2.transpose()+y3*y_bar3.transpose();

  JacobiSVD<Matrix3f> svd(H, ComputeFullU | ComputeFullV);
  Matrix3f R; R = svd.matrixV()*svd.matrixU().transpose();
  Vector3f t; t = c-R*c_bar;

  std::cerr << "R = \n" << R << std::endl;
  std::cerr << "t = \n" << t << std::endl;
} 
```

但我得到错误的答案：

```
R = 
 0.836735 -0.244898 -0.489796
-0.244898  0.632653 -0.734694
-0.489796 -0.734694 -0.469388
t = 
0.142857
3.71429
1.42857 
```

问题出在实现上还是算法上？如果是这样，修正是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:01:47.360

我将尝试插入从您的原始 C++ 派生的 Java 程序。基于此，我提出以下建议：

1) 我认为你在 t = cR*c_bar; 中切换了 c 和 c_bar;

2) 论文（您可以在[http://www.math.pku.edu.cn/teachers/yaoy/Fall2011/arun.pdf](http://www.math.pku.edu.cn/teachers/yaoy/Fall2011/arun.pdf)免费获得）表明具有共面点 Qi 并不常见，但实际上相当很可能，因为这些点的质心被减去，所以如果你把它们全部加起来，你会得到一个零向量。因此，您很可能会得到反射而不是旋转，并且您需要在等式（18）和我的 Java 中切换列符号。

```
 package uk.co.demon.mcdowella.apachemathuser;
/*

Affine transformation approximation of two triangles using Eigen SVD

In the code below, I am trying to implement the algorithm for affine transformation approximation presented here
*/

/*
#include <Eigen/Eigen>
#include <iostream>

using namespace Eigen;
using namespace std;
*/
import org.apache.commons.math.linear.ArrayRealVector;
import java.util.Arrays;
import org.apache.commons.math.linear.Array2DRowRealMatrix;
import org.apache.commons.math.linear.SingularValueDecompositionImpl;
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.linear.RealVector;

public class FindRotation
{
  /** Utility function to return XY' */
  private static RealMatrix xyt(RealVector x, RealVector y)
  {
    Array2DRowRealMatrix xx = new Array2DRowRealMatrix(x.getData());
    return xx.multiply((
      new Array2DRowRealMatrix(y.getData())).transpose());
  }
  // int main(int argc, char **argv)
  public static void main(String[] s)
  {
    // Vector3f x1 (3.0f, 0.0f, 0.0f);
    ArrayRealVector x1 = new ArrayRealVector(new double[]
      {3.0f, 0.0f, 0.0f});
    // Vector3f x2 (0.0f, 2.0f, 0.0f);
    ArrayRealVector x2 = new ArrayRealVector(new double[]
      {0.0f, 2.0f, 0.0f});
    // Vector3f x3 (0.0f, 0.0f, 1.0f);
    ArrayRealVector x3 = new ArrayRealVector(new double[]
      {0.0f, 0.0f, 1.0f});

    // Vector3f translation(1.0f, -2.0f, 2.0f);
    ArrayRealVector translation = new ArrayRealVector(new double[]
      {1.0f, -2.0f, 2.0f});

    Array2DRowRealMatrix rot;
    if (true)
    { // test - do simple rotation
      rot = new Array2DRowRealMatrix(new double[][] {
        new double[] {1.0, 0.0,  0.0},
        new double[] {0.0, 0.0, -1.0},
        new double[] {0.0, 1.0,  0.0},
      });
      System.out.println("Rot determinant is " + rot.getDeterminant());
    }
    else
    {
      rot = new Array2DRowRealMatrix(new double[][] {
        new double[] {1.0, 0.0, 0.0},
        new double[] {0.0, 1.0, 0.0},
        new double[] {0.0, 0.0, 1.0},
      });
    }

    // Vector3f x_bar1 = x1 + translation;
    RealVector x_bar1 = rot.operate(x1).add(translation);
    // Vector3f x_bar2 = x2 + translation;
    RealVector x_bar2 = rot.operate(x2).add(translation);
    // Vector3f x_bar3 = x3 + translation;
    RealVector x_bar3 = rot.operate(x3).add(translation);

    // std::cerr << "x_bar1 = \n" << x_bar1 << std::endl;
    System.out.println("x_bar1 = ");
    System.out.println(x_bar1);
    // std::cerr << "x_bar2 = \n" << x_bar2 << std::endl;
    System.out.println("x_bar2 = ");
    System.out.println(x_bar2);
    // std::cerr << "x_bar3 = \n" << x_bar3 << std::endl;
    System.out.println("x_bar3 = ");
    System.out.println(x_bar3);

    // Vector3f c     = (x1+x2+x3)/3.0f;
    RealVector c     = x1.add(x2).add(x3).mapDivide(3.0f);

    // Vector3f c_bar = (x_bar1+x_bar2+x_bar3)/3.0f;
    RealVector c_bar     =
      x_bar1.add(x_bar2).add(x_bar3).mapDivide(3.0f);

    // Vector3f y1,y2,y3, y_bar1,y_bar2,y_bar3;
    // y1  = x1 - c;
    RealVector y1  = x1.subtract(c);
    // y2  = x2 - c;
    RealVector y2 = x2.subtract(c);
    // y3  = x3 - c;
    RealVector y3 = x3.subtract(c);
    // y_bar1 = x_bar1 - c_bar;
    RealVector y_bar1 = x_bar1.subtract(c_bar);
    // y_bar2 = x_bar2 - c_bar;
    RealVector y_bar2 = x_bar2.subtract(c_bar);
    // y_bar3 = x_bar3 - c_bar;
    RealVector y_bar3 = x_bar3.subtract(c_bar);

    System.out.println("Y1 " + y1 + " (Q1)");
    System.out.println("Y2 " + y2 + " (Q2)");
    System.out.println("Y3 " + y3 + " (Q3)");
    System.out.println("YB1 " + y_bar1);
    System.out.println("YB2 " + y_bar2);
    System.out.println("YB3 " + y_bar3);

    // Matrix3f H;
    // H =  y1*y_bar1.transpose()+y2*y_bar2.transpose()+y3*y_bar3.transpose();
    RealMatrix h = xyt(y1, y_bar1).add(xyt(y2,y_bar2)).add(
      xyt(y3, y_bar3));

    // JacobiSVD<Matrix3f> svd(H, ComputeFullU | ComputeFullV);
    SingularValueDecompositionImpl svd = 
      new SingularValueDecompositionImpl(h);
    System.out.println("Singular values are " + Arrays.toString(svd.getSingularValues()));
    // Matrix3f R; R = svd.matrixV()*svd.matrixU().transpose();
    RealMatrix r = svd.getV().multiply(svd.getUT());
    double rDeterminant = r.getDeterminant();
    System.out.println("Determinant " + rDeterminant);
    if (rDeterminant < 0.0)
    { // coplanar case - which is not surprising because Q in the original paper sum to 0.0
      // because centroid is subtracted from each of them. Try alternate r
      RealMatrix changeLastColumn = new Array2DRowRealMatrix(new double[][] {
        new double[] {1.0, 0.0, 0.0},
        new double[] {0.0, 1.0, 0.0},
        new double[] {0.0, 0.0, -1.0}});
      RealMatrix vd = svd.getV().multiply(changeLastColumn);
      r = vd.multiply(svd.getUT());
      rDeterminant = r.getDeterminant();
      System.out.println("Determinant at second go is " + rDeterminant);
    }
    // Vector3f t; t = c-R*c_bar;
    // Note - original transpose seems to be the wrong way round
    RealVector t = c_bar.subtract(r.operate(c));

    // std::cerr << "R = \n" << R << std::endl;
    System.out.println("R = ");
    System.out.println(r);
    // std::cerr << "t = \n" << t << std::endl;
    System.out.println("t = ");
    System.out.println(t);

    // Apply supposed answer
    RealVector z1 = r.operate(x1).add(t);   
    RealVector z2 = r.operate(x2).add(t);   
    RealVector z3 = r.operate(x3).add(t);   
    System.out.println("Z1  "+ z1);
    System.out.println("Z2  "+ z2);
    System.out.println("Z3  "+ z3);
  }

/*

But I get wrong answer:

R = 
 0.836735 -0.244898 -0.489796
-0.244898  0.632653 -0.734694
-0.489796 -0.734694 -0.469388
t = 
0.142857
3.71429
1.42857

Is the problem in the implementation or in the algorithm? If so, what is the correction?
*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:26:08.630

[您可以使用例如此SVD-demonstration](http://users.telenet.be/paul.larmuseau/SVD.htm)检查您的计算。对于你的例子，我得到

```
H =
6   -2  -1
-2  2.666666667 -0.666666667
-1  -0.666666667    0.666666667

U =
1   0   0
0   0.957092026 -0.289784149
0   -0.289784149    -0.957092026

V =
1   0   0
0   0.957092026 -0.289784149
0   -0.289784149    -0.957092026

R =
1 0 0
0 1 0
0 0 1 
```

所以算法是正确的！可能你的 H 是错误的。

# javascript - javascript分块打开标签

> ID：13215621
> 
> 赞同：1
> 
> 时间：2012-11-04T02:54:27.823
> 
> 标签：javascript, tabs, settimeout, window.open, chunks

我目前正在尝试使用循环和函数的递归调用以块的形式打开选项卡：

```
open_pix : function()
{
    ...

    for (i=start; i <= rounds; i++) 
    {
        window.open(mp_op.xpathResult.snapshotItem(i).getElementsByTagName("a")[0].href,'');
    }

    ...

    if (flag)
    {
        var t = window.setTimeout( mp_op.open_pix, mp_op.timeoutMS );
    } 
```

不幸的是，我的脚本在打开第一块标签后完全停止工作。我假设脚本在浏览器加载新标签后被终止，但这不可能是正确的，因为它会在第一个打开的标签后停止。

那么我又做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:00:37.290

这样做

```
 open_pix : function()
    {
        ...
        opner : function () {
           for (i=start; i <= rounds; i++) 
          {
            window.open(mp_op.xpathResult.snapshotItem(i).getElementsByTagName("a")[0].href,'');
          }

           ...

           if (flag)
           {
             var t = window.setTimeout( mp_op.open_pix, mp_op.timeoutMS );
           }
         }
      opner();
    } 
```

所以在 open_pix 完成对 opner 函数的严格要求后，继续工作“闭包”

# android - 使用 setAnchorView 定位 MediaController

> ID：13215623
> 
> 赞同：5
> 
> 时间：2012-11-04T02:54:35.597
> 
> 标签：android, android-layout, android-mediaplayer

我有一个 MediaController，我希望它位于屏幕右上角，我使用方法 SetAnchorView() 遵循 **我的布局**

```
<RelativeLayout

    android:id="@+id/content_media"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
   <VideoView

       android:id="@+id/audio_play"
       android:layout_alignParentRight="true"
       android:layout_alignParentTop="true"
       android:layout_width="fill_parent"
       android:layout_height="0dp"
       android:layout_alignParentRight="true"
            />
</RelativeLayout> 
```

**和 MyMediaController**

```
 VideoView video = (VideoView) findViewById(R.id.audio_play);
 MediaController mc = new MediaController(this);
 mc.setMediaPlayer(this);
 mc.setAnchorView(video); 
```

但是我的 MediaController 已显示在顶部中心屏幕上。请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T03:32:56.930

您可以通过设置尝试

```
 mc.setPadding(0, 0, 0, 0); //0's are just placeholders here 
```

但**不是**0 值 -**尝试在上述方法中将 dp 中的值设置为您想要的值**。如果这不能按预期工作，请在知道视频大小后尝试在 onPreparedListener 中设置锚视图。

```
video.setOnPreparedListener(new OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
                mp.setOnVideoSizeChangedListener(new OnVideoSizeChangedListener() { 
                                                @Override
                                                public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
                                                        /*
                                                         *  add media controller
                                                         */

                                                        mc.setAnchorView(video);
                                                    }
                                                });
                                            }
                                        }); 
```

**编辑更新：**原来我通过扩展控制器来制作我自己的控制器解决了一个类似的问题

```
import android.content.Context;
import android.view.View;
import android.widget.MediaController;

public class CustomController extends MediaController {
       public CustomController(Context context, View anchor)     {
          super(context);   
          super.setAnchorView(anchor);  
       }    
      @Override  
       public void setAnchorView(View view)     {  
           // Do nothing   
      } 
    } 
```

现在只需在您的活动中执行此操作 - 这对我有用

```
 CustomController mc = new CustomController(this, mVideoView);
        mc.setMediaPlayer(video);
        mc.setAnchorView(video);
        video.setMediaController(mc); 
```

# c# - 对内存使用的影响——常量字符串还是资源字符串？

> ID：13215625
> 
> 赞同：5
> 
> 时间：2012-11-04T02:55:05.403
> 
> 标签：c#

当我们在资源文件中定义字符串常量而不是在类中声明为 const 时，在堆内存占用方面是否有优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T03:15:13.010

我不确定，但似乎`const`字符串的分配方式不同。特别是，他们将没有资格进行垃圾收集。因此，与从资源加载的字符串相比，与它们相关的开销*可能更少。*但是，差异可能非常小。除非您有大量字符串，否则您不会注意到堆内存使用量的差异。

`const`用于*永远不变的事物。*资源字符串用于可能更改的内容。您应该基于此决定使用哪个，而不是哪个在堆上占用更多空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T03:48:50.977

你读过[字符串实习](http://msdn.microsoft.com/en-us/library/system.string.isinterned.aspx)吗？.NET 保留一个字符串缓存，这样一个字符串在内存中只存在一次——可能永远存在。常量字符串将被实习。动态构建的字符串（即使用 StringBuilder）不会被实习。

根据[this question](https://stackoverflow.com/questions/4745473/are-net-resource-file-strings-interned?rq=1)的回答，资源文件中的字符串没有被保留。如果这是真的，并且您在其资源中加载了许多带有大量重复字符串的资源文件，那么内存中可能会有很多重复的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T03:44:35.987

据我所知，字符串文字是实习的（String.Intern），因此没有重复，也没有额外的使用分配。我认为默认情况下资源字符串的行为方式不同。

如果这是一个问题，您可以让您自己的代码从资源中读取和实习字符串，并验证它是否对您的案例有益。

旁注：来自资源的常量字符串和字符串通常用于非常不同的目的（一个是静态文化不变值，另一个 - 可本地化并且预期对于不同的文化会有所不同）。将可本地化的字符串迁移为代码中的常量应该有很好的理由。

# jquery - 在 jQuery 中平滑地使 div 变大

> ID：13215626
> 
> 赞同：0
> 
> 时间：2012-11-04T02:55:06.840
> 
> 标签：jquery

我怎样才能让一个 div 闪烁两次，然后它在页面加载时变大。

例如，div 将以 width: 50px 开头；高度：50 像素；并且闪烁两次后，它会平滑增长到width：250px；高度：400px；

我已经阅读了有关 jQuery 缓动功能的信息，但我对 jQuery 不熟悉，我无法使用我找到的示例。

非常感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T03:57:50.773

这应该只需几行就可以完成工作。

[http://jsfiddle.net/2vVpt/](http://jsfiddle.net/2vVpt/)

```
$("#blinkandresize")
.fadeOut(300)
.fadeIn(300)
.fadeOut(300)
.fadeIn(300)
.animate({
    height: 400,
    width: 250
});​ 
```

# java - Java Trie 挂断

> ID：13215628
> 
> 赞同：-1
> 
> 时间：2012-11-04T02:55:22.797
> 
> 标签：java

创建和测试一个 Java Trie 类，我的主类由于某种原因挂断了，并且运行程序永远不会终止。

```
import java.util.*;

public class Trie<T> {
private  Node<T> root;

private int count;

public Trie(T rootContent){
    root= new Node<T>(rootContent);
    count=0;
}
public void insert(T[] content){
    Node<T> current=root;
    if(content !=null){
        if(content.length==0){
            current.setFlag(true);
        }
        for(int i=0; i<content.length;i++){
            Node<T> child=current.getChild(content[i]);
            if(child!=null){
                current=child;
            }
            else{
                current=current.addChildren(content[i]);
            }
            if(i==content.length-1){
                if(current.isLast()){
                    current.setFlag(true);
                    count++;
                }
            }
        }
    }
}

public boolean search(T[] content){
    Node<T> current=root;
    for(int i=0;i<content.length;i++){
        if(current.getChild(content[i])==null){
            return false;
        }
        else{
            current=current.getChild(content[i]);
        }
    }
    if(current.isLast()){
        return true;
    }
    else{
        return false;
    }

}

public int getCount(){
    return count;
}

public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("number entries: ");
    sb.append(count);
    return sb.toString();
}
private static class Node<T>{
    private T content;

    private boolean endFlag;

    public List<Node<T>> children=new ArrayList<Node<T>>();

    public Node(T content){
        this.content=content;
        this.endFlag=false;
        this.children=new ArrayList<Node<T>>();
    }

    public T getContent(){
        return content;
    }

    public Node<T> addChildren(T content){
        Node<T> t=new Node<T>(content);
        children.add(t);
        return t;
    }

    public Node<T> getChild(T content){
        if(children!=null){
            for(Node<T> t : children){
                if(t.getContent().equals(content)){
                    return t;
                }
            }
        }
        return null;
    }

    public void setFlag(boolean endFlag){
        this.endFlag=endFlag;
    }

    public boolean isLast(){
        return endFlag;
    }

}
public static void main(String[] args) {

        Trie file1=new Trie("");
        Trie file2=new Trie("");
        if(args.length==0 || args[0]==null){
            System.out.println("Please give a valid command file");
        }
        else{
        try{    
        Scanner reader1 = new Scanner(new FileInputStream(args[2]));
        Scanner reader2 = new Scanner(new FileInputStream(args[3]));
        String d=args[0];
        String n=args[1];
        int depth=Integer.parseInt(d);
        int numberOfStrings=Integer.parseInt(n);
        while(reader1.hasNext());{
            String[] ary=reader1.next().split("");
            file1.insert(ary);
        }
        while(reader2.hasNext());{
            String[] ary=reader1.next().split("");
            file2.insert(ary);
        }
        reader1.close();
        reader2.close();
        System.out.print(file1);
        System.out.print(file2);
    }
        catch(Exception e){

    }
}

}
} 
```

我认为插入操作是问题所在，文本文件只不过是随机字符串“dog god dog act cata asfdoh aosifdh oawrhi”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:34:40.933

查看这些行显示了问题：

```
 while(reader1.hasNext());{
        String[] ary=reader1.next().split("");
        file1.insert(ary);
    }
    while(reader2.hasNext());{
        String[] ary=reader1.next().split("");
        file2.insert(ary);
    } 
```

`while(reader2.hasNext())`or后面不应该有分号，`while(reader1.hasNext())`因为这会终止循环。我实际上不确定为什么这里的分号会导致它挂起，但出于某种原因它确实如此。我相信有人可以在这里帮助我们俩，但删除分号将解决问题。然而，奇怪的是代码是可编译的。

你在使用 IDE 吗？如果是这样，将来您应该尝试在 IDE 中调试您的代码，然后再在这里寻求帮助。节省每个人的时间，这是一个很好的（阅读：必要的）技能。

另外为了进一步参考，您已经参数化了 Trie 的类型，但在实例化它时没有指定类型。

```
Trie file1=new Trie(""); 
```

应该

```
Trie<String> file1=new Trie<String>(""); 
```

# python - 平方是两个平方和的数字列表

> ID：13215629
> 
> 赞同：7
> 
> 时间：2012-11-04T02:55:26.353
> 
> 标签：python, python-2.7, sum, numbers, perfect-square

我刚刚开始学习 Python 并开始做一些问题只是为了帮助培养我的技能，但是我非常坚持这个问题。

制作一个包含最多 1000 的所有正整数的列表，其平方可以表示为两个平方的和，（即整数 p 其中 p^2=m^2+n^2，其中 m 和 n 是整数大于 0。）

提示：有几种方法。您可能会发现拥有所有平方数的列表很有帮助。in 运算符可能很有用。

这是我到目前为止提出的代码：

```
 numbers=xrange(1001)
    numbers_squared=[x**2 for x in numbers]
    a=[]

    for x in numbers_squared:
        for b in numbers_squared:
            if (x+b)**.5 <= 1001:
                a.append(x+b)
    print a 
```

我遇到的问题是 Python 需要数年时间来完成这些计算（我已经等了大约十分钟，它仍在打印数字）。任何有关如何解决此问题的提示将不胜感激。

ps 重点是使用列表。此外，提示将比解决方案本身更受欢迎。

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T03:00:22.687

首先，你没有解决问题。您需要进行检查以确保`(x+b)**.5`它实际上是一个整数。其次，如果您正在打印数字，您已经计算出所有数字。执行上述操作将减少此步骤所需的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T09:29:08.397

列表理解怎么样？计算范围 (1,1011) 中的 c 范围 (1, c) 中的 b 范围 (1, b) 中的 a

如下：

```
x = [(a,b,c) for c in range(1,1001) for b in range(1, c) for a in range(1,b) if a**2+b**2==c**2]
print x 
```

我已经计时了，在我的电脑上完成需要 46 秒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T03:08:32.713

这可能有效：

```
def isSumOfSquares(n):
    """return True if n can be expressed as the sum of two squares; False otherwise"""

    for a in xrange(1,n):
        b = n-(a**2)
        if b<=0:
            return False
        elif not math.sqrt(b)%1:
            return True
    return False

answer = [i for i in xrange(1,1001) if isSumOfSquares(i**2)] 
```

让我知道这是否适合您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:58:55.783

我刚刚在别处[回答了这个问题！](https://codereview.stackexchange.com/questions/18171/determining-pythagorean-triples-using-c-value/18172#18172)

```
import math

def is_triple(hypotenuse):
    """return (a, b, c) if Pythagrean Triple, else None"""
    if hypotenuse < 4:
        return None

    c = hypotenuse ** 2

    for a in xrange(3, hypotenuse):
        b = math.sqrt(c - (a ** 2)) 
        if b == int(b):
            return a, int(b), hypotenuse

    return None

>>> results = [x for x in range(1001) if is_triple(x)]
>>> len(results)
567 
```

几乎立即运行。

# c# - ServiceStack CustomUserSession 强制转换异常

> ID：13215631
> 
> 赞同：1
> 
> 时间：2012-11-04T02:55:33.077
> 
> 标签：c#, servicestack

**登录.cshtml**

```
....
<form action="/auth/credentials">
    <div>
        <span>User Name</span>
        <input name="userName" type="text"/>
    </div><div>
        <span>Password</span>
        <input name="password" type="password"/>
    </div><div>
        <input name="RememberMe" type="checkbox" checked value="true"/>
        <span>Remember me</span>
    </div><div>
        <button class="login">Sign in</button>
    </div>
</form>
.... 
```

**登录服务.cs**

```
[DefaultView("login")]
public class LoginService : BaseService {
    public object Get(Login req) {
        return new LoginResponse() { UserSession = base.UserSession };
    }
} 
```

**BaseService.cs**

```
....
public CustomUserSession UserSession {
    get {
        return SessionAs<CustomUserSession>(); // **** Error here ****        
    }
}
.... 
```

**错误消息**在`SessionAs<CustomUserSession>();`

> 用户代码未处理 InvalidCastException
> 
> 无法将“ServiceStack.ServiceInterface.Auth.AuthUserSession”类型的对象转换为“MyProject.CustomUserSession”类型。

我有一个简单的 html 表单`login.cshtml`来测试凭据身份验证功能。该代码模仿了 SocialBootstrapApi 演示项目的凭据身份验证功能部分。

**在我从 NuGet 更新 SS 之前：（**大约 40 天前的软件包）

如果 html 表单有`RememberMe div`,`SessionAs<CustomUserSession>();`会遇到`InvalidCastException`错误。否则，它可以很好地与 just`UserName`和`Password`div 一起使用。

**在我从 NuGet 更新 SS 之后：（**今天 11 月 4 日更新包 v3.9.25.0）

`SessionAs<CustomUserSession>();``InvalidCastException`即使 html 表单中只有`UserName`和`Password`div 也总是会遇到错误。

我不确定我在铸造过程中做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:35:59.877

您的身份验证注册是什么样的？

这是[SocialBootstrapApi](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/App_Start/AppHost.cs)项目的 AuthConfig 的样子：

```
Plugins.Add(new AuthFeature(
    () => new CustomUserSession(), //Use your own typed Custom UserSession type
    new IAuthProvider[] {
        new CredentialsAuthProvider(),              //HTML Form post 
        new TwitterAuthProvider(appSettings),       //Sign-in with Twitter
        new FacebookAuthProvider(appSettings),      //Sign-in with Facebook
        new DigestAuthProvider(appSettings),        //Sign-in with Digest Auth
        new BasicAuthProvider(),                    //Sign-in with Basic Auth
        new GoogleOpenIdOAuthProvider(appSettings), //Sign-in with Goolge OpenId
        new YahooOpenIdOAuthProvider(appSettings),  //Sign-in with Yahoo OpenId
        new OpenIdOAuthProvider(appSettings),       //Sign-in with Custom OpenId
    })); 
```

这`new CustomUserSession()`就是告诉 ServiceStack 使用 Custom Session 而不是内置的 default 的原因`AuthUserSession`。

您使用的是什么 CacheClient？

# php - 表锁失败

> ID：13215632
> 
> 赞同：0
> 
> 时间：2012-11-04T02:55:34.997
> 
> 标签：php, mysql

我无法让表锁定在 MySQL 中。我尝试通过在不同浏览器上同时运行两个脚本来测试并发请求。

脚本 1：

```
mysql_query("lock tables id_numbers write");

$sql = "select number from id_numbers";
$result = mysql_query($sql);

if ($record = mysql_fetch_array($result))
{
  $id = $record['number'];
}

sleep(30);

$id++;

$sql = "update id_numbers set number = '$id'";
$result = mysql_query($sql);

mysql_query("unlock tables"); 
```

脚本 2：

```
$sql = "select number from id_numbers";
$result = mysql_query($sql);

if ($record = mysql_fetch_array($result))
{
  $id = $record['number'];
}

echo $id; 
```

我先启动脚本 1，然后启动脚本 2。理论上，脚本 2 应该等待 30+ 秒，直到脚本 1 解锁表，然后输出更新的 ID。但是它立即输出了原来的ID，所以锁显然没有生效。可能出了什么问题？

顺便说一句，我知道我不应该仍然使用 mysql_*，但我现在坚持使用它。

编辑：我发现锁定确实发生在实时站点上，但不是在我的开发站点上。它们都在共享主机上，所以我假设两者之间存在一些不同的设置。知道那可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:46:05.927

使用您在此处的代码，我得到了您所期望的行为：脚本 2 将阻塞，直到脚本 1 发出`unlock tables`.

你的问题一定在别处。检查事项：

1.  该表是否真的存在于数据库中？（检查你的`mysql_query()`返回值，`mysql_error()`如果你得到任何`FALSE`回报，请使用。）
2.  两个脚本都连接到*同一个*数据库吗？
3.  您确定该表不是临时（因此是连接本地）表吗？
4.  脚本 1 的 mysql 连接（或脚本本身）是否会在 期间超时`sleep(30)`，从而比您预期的更早释放锁？

# c# - EF4 复杂 Select()：返回 IEnumerable 或 IEnumerable 从业务层？

> ID：13215633
> 
> 赞同：4
> 
> 时间：2012-11-04T02:55:40.490
> 
> 标签：c#, entity-framework-4, anonymous-types, business-logic-layer, ef-database-first

我开始了一项新工作，我们正在将一个相当大的 VB.NET 2.0 应用程序（带有数据集）迁移到 C# 4.5（带有 EF4。）

在我们的业务层，我们的“搜索”函数现在返回 EDMX 中定义的类的 IEnumerables。所以这样的事情很简单：

```
public IEnumerable<Product> GetProductsByCategory(int categoryId) 
```

但是，当我们的 EF4“Select()”方法生成更复杂的自定义（匿名）类型时，情况会更加复杂：没有生成的类对应于结果。

因为这个函数必须跨越层边界（业务到 UI），所以我认为适当的解决方案是为此查询定义一个自定义类型，然后返回该类型的 IEnumerable；例如

```
public IEnumerable<ProductAccountSummary> GetProductAccountSummariesByCategory(int categoryId) 
```

哪里`ProductAccountSummary`是手工制作的 DTO（即 POCO）。

然而，在代码审查期间，团队负责人未能通过我的方法；他要求我删除 DTO 并将方法签名更改为：

```
public IEnumerable GetProductAccountSummariesByCategory(int categoryId) 
```

....原因是我们仍然可以将 IEnumerable 绑定到我们的 UI 网格等，而无需每次需要使用自定义类型时手工制作 DTO 的开销。

所以我的问题是：

*   在 EF4 中，跨层边界传递自定义类型集合的典型方法是什么？返回一个 IEnumerable （隐含地，“对象”）对我来说似乎不正确。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T03:33:16.617

我认为你的团队领导是完全错误的。处理强类型对象通常被视为做事的方式。使用这种方法，您又回到了使用数据集等类型的世界。当开始有必要修改对象并将它们传递回业务层时，将会有一个长期的维护难题。即使不需要向业务层返回任何内容，客户端甚至也会出现维护问题。

是的，创建 DTO 存在开销，但短期速度不应成为最终长期维护问题的原因。

# string - 如何从此字符串中提取子字符串？

> ID：13215637
> 
> 赞同：1
> 
> 时间：2012-11-04T02:56:09.193
> 
> 标签：string, r, substring

字符串是 ![在此处输入图像描述](../Images/ca35cc62a842433aca67dc9b68537139.png) And I want to get substrings "11","1.1","282". 谁能告诉我如何在 R 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T03:03:45.587

我相信`strsplit(x," +")[[1]]`会做到的。（正则表达式`" +"`表示一个或多个空格；`strsplit`适用于字符向量，并返回一个列表，其中包含向量中每个元素的拆分版本，因此`[[1]]`提取第一个（也是唯一的）分量）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:08:23.553

```
> x = "11  1.1     282"
> res <- strsplit(x, " +")
> res
[[1]]
[1] "11"  "1.1" "282"

> 
```

# objective-c - 我可以“移动”屏幕，但屏幕上的对象仍在移动吗？

> ID：13215638
> 
> 赞同：2
> 
> 时间：2012-11-04T02:56:17.320
> 
> 标签：objective-c, macos

正如标题所说，我想将屏幕向上移动，以便我的应用程序的窗口可以从底部进入。我现在拥有的是一个浮动窗口，其背景已设置为屏幕截图。像这样： ![我的应用程序](../Images/7b6014a15cafc546fd58f2e38ffde891.png) 对用户来说看起来很好，除了现在在后台工作的任何对象都不会出现在窗口上方，它基本上是冻结的。

我可以这样做吗？这个效果类似于通知中心在 10.8 中所做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:58:22.427

对于“可以”的特定定义，您*可以*这样做 - 没有 API，但您可以使用 Finder/Dock/etc 使用的相同 SPI。唯一的复杂之处可能在于需要特殊权限，或者需要对您的代码进行特别签名——我不确定有哪些检查。

弄清楚这一点并不难。您可以使用类似的工具`nm`，`otool`甚至`class-dump`.

# java - 在java中输入错误后询问用户另一个提示

> ID：13215639
> 
> 赞同：1
> 
> 时间：2012-11-04T02:56:30.753
> 
> 标签：java, io

所以我问用户一个月和一年。月份必须是十二个月之一，年份必须是数字且没有字母。我试图找出让程序说“输入错误，再试一次”并提示他们再次输入的最佳方法。这是我正在使用的月份部分的代码部分。

```
public class MonthLength {
  public static void main(String[] args) {

     int month = 0;
    // Prompt the user to enter a month
    SimpleIO.prompt("Enter a month name: ");
    String userInput = SimpleIO.readLine();

      if (userInput.trim().toLowerCase().equals("january")) {
        month = 1;
      } else if (userInput.trim().toLowerCase().equals("february")) {
        month = 2;
      } else if (userInput.trim().toLowerCase().equals("march")) {
        month = 3;
      } else if (userInput.trim().toLowerCase().equals("april")) {
        month = 4;
      } else if (userInput.trim().toLowerCase().equals("may")) {
        month = 5;
      } else if (userInput.trim().toLowerCase().equals("june")) {
        month = 6;
      } else if (userInput.trim().toLowerCase().equals("july")) {
        month = 7;
      } else if (userInput.trim().toLowerCase().equals("august")) {
        month = 8;
      } else if (userInput.trim().toLowerCase().equals("september")) {
        month = 9;
      } else if (userInput.trim().toLowerCase().equals("october")) {
        month = 10;
      } else if (userInput.trim().toLowerCase().equals("november")) {
        month = 11;
      } else if (userInput.trim().toLowerCase().equals("december")) {
        month = 12;
      }

    // Terminate program if month is not a proper month name
    if (month < 1 || month > 12) {
      System.out.println("Illegal month name; try again");
      return;
    } 
```

这是我正在为年度部分工作的内容：

```
 // Prompt the user to enter a year
    SimpleIO.prompt("Enter a year: ");
    userInput = SimpleIO.readLine();
    int year = Integer.parseInt(userInput);

    //Here, trying to use hasNextInt to make sure input is an integer
    //If it's not, need to give an error message and prompt input again
    // public boolean hasNextInt()

    //Prompt input again if year is negative
    if (year < 0) {
       System.out.println("Year cannot be negative; try again");
       return;
    }

    // Determine the number of days in the month
    int numberOfDays;
    switch (month) {
      case 2:  // February
               numberOfDays = 28;
               if (year % 4 == 0) {
                 numberOfDays = 29;
                 if (year % 100 == 0 && year % 400 != 0)
                   numberOfDays = 28;
               }
               break;

      case 4:  // April
      case 6:  // June
      case 9:  // September
      case 11: // November
               numberOfDays = 30;
               break;

      default: numberOfDays = 31;
               break;
    }

    // Display the number of days in the month
    System.out.println("There are " + numberOfDays +
                       " days in this month");
  }
} 
```

看到代码后，我确信我在问什么会更清楚。如果他们输入的单词不是一个月，提示他们并再次要求输入。如果他们输入的年份不是整数，也是一样。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T03:03:53.713

在循环中运行它，将执行以下操作：

```
String userInput;
int month;
do{
    SimpleIO.prompt("Enter a month name: ");
    userInput = SimpleIO.readLine();
    try{
        month = Integer.parseInt(userInput);
    } catch(NumberFormatException e){
        continue;
    }
}while(month <= 0 || month > 12); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:02:55.790

您应该创建一个循环，在正确插入月份之前一直提示用户。以下几行中的内容：

```
boolean correct_month = false; // Control variable 

while(!correct_month)
{
   int month = 0;
    // Prompt the user to enter a month
    SimpleIO.prompt("Enter a month name: ");
    String userInput = SimpleIO.readLine();

     ...
   // If the month is indeed correct
   // then correct_month = true;
} 
```

然后你将同样的想法应用于这些年。

我认为最好将所有月份字符串添加到 ArrayList 中，而不是在月份拥有所有这些条件：

```
ArrayList <String> all_months = new ArrayList <String> (); 
```

然后你只需要使用`all_months.indexOf`用户插入的字符串。如果它返回 -1，则字符串不是有效的月份，否则，它将为您提供月份在列表中的位置。例如

```
month = all_months.indexOf(userInput);
if(month != -1){
   correct_month = true;
} 
```

因此，完整的解决方案将类似于：

```
ArrayList <String> all_months = new ArrayList <String> ();
all_months.add("january");
... // and so one

int month = 0; // Control variable 

while(month <= 0)
{

    // Prompt the user to enter a month
    SimpleIO.prompt("Enter a month name: ");
    String userInput = SimpleIO.readLine();

    month = all_months.indexOf(userInput.trim().toLowerCase()) + 1;
} 
```

# sql-server - 控制 SimpleMembershipProvider 生成的表？

> ID：13215644
> 
> 赞同：1
> 
> 时间：2012-11-04T02:57:13.327
> 
> 标签：sql-server, asp.net-mvc, webmatrix, simplemembership

我发现`SimpleMembershipProvider`它非常整洁和富有成效。

我想知道是否有办法控制生成表/列名/数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:52:18.440

您可以控制 user 表的表名以及其中的 user id 和 user name 列的列名。您可以在 InitializeDatabaseConnection 方法中指定它们。SimpleMembershipProvider 期望 UserId 列是 IDENTITY 列。它使用@@IDENTITY 来获取新创建记录的ID。目前，SimpleMembershipProvider 仅适用于 SQL Server（Express 或 Full）或 SQL Compact 4.0 数据库。

您不能更改成员资格或角色表的架构。用于管理账户和使用这些表的 SQL 被硬编码到 SimpleMemberhipProvider 中。

# c++ - 释放动态数组的最后一个元素

> ID：13215645
> 
> 赞同：0
> 
> 时间：2012-11-04T02:57:26.527
> 
> 标签：c++, arrays, dynamic, delete-operator

我有

```
int * array=new int[2]; 
```

我想**释放最后一个元素的内存**，从而将分配的内存减少到只有 1 个元素。我试着打电话

```
delete array+1; 
```

但它给出了错误

> *** 检测到 glibc *** skuska：free()：无效指针：0x000000000065a020 ***

这可以在没有显式重新分配的情况下在 C++03 中完成吗？

注意：如果我想使用类而不是原始数据类型（如 int），如何释放内存以便也调用类的析构函数？

注2：我正在尝试实施`vector::pop_back`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T04:03:08.710

不要`new[]`为此使用表达式。这不是矢量的工作方式。你所做的是分配一块原始内存。您可以为此使用 malloc ，也可以使用[operator new](http://en.cppreference.com/w/cpp/memory/new/operator_new)，这与 new 表达式不同。假设您使用了默认分配器，这基本上就是`reserve()`成员函数的作用。`std::vector`它不会像`new[]`表达式那样创建任何实际对象。

当你想构造一个元素时，你可以使用[placement new](http://en.cppreference.com/w/cpp/language/new)，将它传递给你分配的原始内存中的某个位置。当你想破坏一个元素时，你直接调用它的析构函数。完成后，不要使用`delete[]`表达式，而是使用`operator delete`if you used `operator new`，或者使用`free()`if you used `malloc`。

这是一个创建 10 个对象并以相反顺序销毁它们的示例。我可以按任何顺序销毁它们，但这是你在向量实现中的做法。

```
int main()
{
    void * storage = malloc(sizeof(MyClass) * 10);

    for (int i=0; i<10; ++i)
    {
        // this is placement new
       new ((MyClass*)storage + i) MyClass;
    }

    for (int i=9; i>=0; --i)
    {
        // calling the destructor directly
        ((MyClass*)storage + i)->~MyClass();
    }

    free(storage);
} 
```

`pop_back`将通过简单地调用最后一个元素的析构函数并将 size 成员变量减 1 来实现。它不会、不应该（并且不能，如果不制作一堆不必要的副本）释放任何内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T03:03:54.167

没有这样的选择。调整数组大小的唯一方法是分配具有 size 的新数组`old_size - 1`，复制旧数组的内容，然后删除旧数组。

如果你想要释放对象内存，为什么不创建指针数组呢？

```
MyClass **arr = new MyClass*[size];
for(int i = 0; i < size; i++)
 arr[i] = new MyClass;

// ...

delete arr[size-1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T03:49:16.500

`std::vector::pop_back`不会重新分配任何东西——它只是更新确定数据大小的内部变量，将其减一。旧的最后一个元素仍然存在于内存中；该向量根本不允许您通过其公共 API 访问它。*

这一点，以及*不断增长的*重新分配是非线性的，是为什么`std::vector::capacity()`不等于`std::vector::size()`.

因此，如果您真的出于任何原因尝试重新发明`std::vector`，那么您关于重新分配的问题的答案是*don't*。

* * *

* 实际上，对于非原始数据类型，它稍微复杂一些，因为即使它们的内存不会被释放，这些元素*也会在语义上被破坏。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T03:17:23.210

由于您使用的是 C++03，因此您可以访问`std::vector`数据类型。使用它，这是一个电话：

```
#include <vector>
//...
std::vector<int> ary(3);
//...
ary.erase(ary.begin() + (ary.size() - 1)); 
```

或者

```
#include <vector>
//...
std::vector<int> ary(3);
//...
ary.pop_back(); 
```

# 编辑：

你为什么要重新发明轮子？只需使用vector::pop_back。

无论如何，只有当包含的数据类型不是指针时，才会在包含的数据类型上调用析构函数。如果它是指针，则必须手动对要删除的对象调用 delete ，将其设置为`nullptr`or `NULL`（因为尝试对先前删除的对象调用 delete 是不好的，对空指针调用 delete 是非操作），然后调用擦除。

# c - GIF LZW 解压提示？

> ID：13215654
> 
> 赞同：1
> 
> 时间：2012-11-04T02:59:22.403
> 
> 标签：c, gif, lzw

我已经阅读了许多关于 GIF LZW 解压缩的文章，但我仍然对它的工作原理或如何解决编码方面的问题感到困惑，更繁琐的编码位。

据我了解，当我获取 LZW 压缩数据的 GIF 字节流时，流告诉我：

最小代码大小，也就是第一个字节开始的位数。

现在，据我了解，我必须为此添加一个用于明确代码，或者为明确代码和 EOI 代码添加两个。但我很困惑它是哪一个？

所以说我有 3 个颜色代码（01、10、11），假设 EOI 代码（如 00）将遵循最小代码大小（2）的字节为 2 位，或者它将是 3 位以明确代码？还是明文代码/EOI 代码都已计入最小尺寸？

第二个问题是，从文件中读取动态大小的位的最简单方法是什么？因为从偶数字节 (8) 读取奇数位（3 位、12 位等）听起来可能很混乱和错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:57:20.967

从第二个问题开始：是的，您必须从 8 位字节流中读取动态大小的位。您必须跟踪正在读取的大小，以及先前读取操作留下的未使用位数（用于正确放置文件中的“下一个字节”）。

IIRC 的最小代码大小为 8 位，这将为您提供 256（以 10 为基数）的清晰代码和 257 的输入结束。第一个存储的代码是 258。

我不确定您为什么不查找公共领域图形库之一的来源。我知道我没有，因为早在 1989 年（！）没有图书馆可以使用，也没有完整描述的互联网。我必须从一个可以显示图像和一些 GIF 文件的示例可执行文件（用于 Compuserve 的 MS-DOS）中实现一个解码器，所以我知道可以做到（但这不是消磨时间的最有效方式）。

# c - C、sendfile()和send()的区别？

> ID：13215656
> 
> 赞同：19
> 
> 时间：2012-11-04T02:59:46.657
> 
> 标签：c, linux, send, sendfile

sendfile() 在内核空间内的两个文件描述符之间复制数据。我在某个地方看到如果你在 linux 中用 C 语言编写 Web 服务器，你应该使用 send() 和 recv() 而不是 write() 和 read()。那么 send() 是否也使用内核空间？

无论我用于发送什么 - sendfile() 或 send() - 在客户端我都会使用 recv() 对吗？

另一方面，[手册页](http://linux.die.net/man/2/send)说：“send() 和 write(2) 之间的唯一区别是标志的存在。使用零标志参数，send() 等效于 write(2)。”

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-04T03:09:05.057

如果`fd`是一个套接字文件描述符，那么这些系统调用是相同的：

*   `send(fd, data, length, 0)`是相同的`write(fd, data, length)`
*   `recv(fd, data, length, 0)`是相同的`read(fd, data, length)`

因此，除非您需要设置非零`flags`参数，否则使用`send/recv`或没有区别`write/read`。

系统`sendfile`调用是一种优化。如果你有一个套接字`sockfd`和一个普通文件`filefd`，并且你想将一些文件数据复制到套接字（例如，如果你是一个提供文件的 Web 服务器），那么你可以这样写：

```
// Error checking omitted for expository purposes
while(not done)
{
    char buffer[BUFSIZE];
    int n = read(filefd, buffer, BUFSIZE);
    send(sockfd, buffer, n, 0);
} 
```

然而，这是低效的：这涉及内核将文件数据复制到用户空间（在`read`调用中），然后将相同的数据复制回内核空间（在`send`调用中）。

系统`sendfile`调用让我们跳过所有的复制，让内核直接读取文件数据并一举将其发送到套接字上：

```
sendfile(sockfd, filefd, NULL, BUFSIZE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T03:07:10.887

正如您所指出的，唯一的区别是标志。send/recv 用于网络，而 read/write 是任何文件描述符的通用 I/O 函数。send 仅在您想使用标志时才比 write 有用，因为标志都与网络相关，因此在非网络文件描述符上调用 send 没有意义（我也不确定它是否有效）。

另外你应该注意：

> in_fd 参数必须对应于支持类似 mmap(2) 操作的文件（即，它不能是套接字）。

这意味着您不能从套接字复制（您可以复制到套接字，在 2.6.33 之前，您必须复制到套接字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T03:11:38.060

`send`由[POSIX 标准指定](http://pubs.opengroup.org/onlinepubs/9699919799/functions/send.html#tag_16_514_07)，它说：

> send() 函数等效于带有空指针 dest_len 参数的 sendto()，如果不使用标志，则等效于 write()。

`sendfile`是特定于 Linux 的。它告诉内核执行从文件到套接字的零拷贝 I/O。（请注意，它仅在源 fd 是文件而目标是套接字时才有效；对于通用 Linux 特定的零拷贝 I/O，请阅读有关内容`splice()`。）

请注意，很少需要使用特定于 Linux 的零拷贝 I/O。带有小用户空间缓冲区 (8K-16K)的标准且可移植的`read`+ `write`(or `send`) 循环通常会将该缓冲区保留在 L1 缓存中，从系统 RAM 的角度来看，它相当于“零复制”。

因此，除非您的分析显示您的特定应用程序有所不同，否则请坚持使用标准接口。只是MHO。

# c - 制作链表

> ID：13215658
> 
> 赞同：2
> 
> 时间：2012-11-04T03:00:00.610
> 
> 标签：c, linked-list, visual-studio-2012

```
typedef struct{
    char name[25];
    int yearOfBirth;
    int district;
    char gender;
    int age;

    CitizenType *next;

}CitizenType; 
```

当我尝试在 Visual Studio 中以这种格式创建链接列表时，我会遇到各种与语法相关的错误。（总共 102 个）但是当我注释掉 CitizenType *next 时；我没有错误。我意识到它与在完全声明之前引用结构有关，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T03:02:23.653

在结构之前（并且与结构分开）声明 typedef。

```
typedef struct citizen_type CitizenType;

struct citizen_type {
    ...
    CitizenType *next;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:08:58.813

问题是

```
CitizenType 
```

只有在结构结束后才进入类型的命名空间。

因此，您只能在声明后使用新类型。

您可以使用 a 来代替它`struct name`（为结构命名），或者在之前声明类型以使用名称声明结构，如上一篇文章中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T03:02:03.700

试试这个：

```
typedef struct node{
    char name[25];
    int yearOfBirth;
    int district;
    char gender;
    int age;

    struct node *next;

}CitizenType; 
```

检查[此](https://stackoverflow.com/questions/588623/self-referential-struct-definition)堆栈溢出答案以获取有关 C 中自引用结构的更多信息。来自答案：

> 一个 CitizenType 不能包含另一个 CitizenType，因为它变成了一个永无止境的递归。

希望能帮助到你！

# bash - 用于更改 bash 中文件名前缀的脚本

> ID：13215666
> 
> 赞同：6
> 
> 时间：2012-11-04T03:00:31.627
> 
> 标签：bash, sed, awk

从

```
abcd_if_vb.c
abcd_if_av.c 
```

到

```
edfg_if_vb.c
edfg_if_av.c 
```

问题是要捕获具有`abcd`前缀的文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T03:05:49.347

并不真地。

```
for file in abcd*
do
  mv "$file" "edfg${file#abcd}"
done 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T06:07:13.080

如果有`rename`，您可以使用重命名这些文件

```
rename abcd_ edfg_ abcd* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T09:54:06.393

```
ls -1 abcd*|awk '{f=$0;gsub(f,"abcd","efgh");system("mv "$0" "f);}' 
```

# php - 查找和替换数组中的重复项

> ID：13215668
> 
> 赞同：4
> 
> 时间：2012-11-04T03:01:12.653
> 
> 标签：php, arrays, replace, find, duplicates

我需要使用一些随机值来制作应用程序，但如果在数组中重复，我的应用程序将无法正常工作。所以我需要编写脚本代码来查找重复项并将它们替换为其他一些值。好的，例如我有一个数组：

```
<?PHP
$charset=array(123,78111,0000,123,900,134,00000,900);

function arrayDupFindAndReplace($array){

// if in array are duplicated values then -> Replace duplicates with some other numbers which ones I'm able to specify.
return $ArrayWithReplacedValues;
}
?> 
```

所以结果应该是具有替换重复值的相同数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:51:02.663

您可以跟踪到目前为止看到的单词并随时替换。

```
// words we've seen so far
$words_so_far = array();
// for each word, check if we've encountered it so far
//    - if not, add it to our list
//    - if yes, replace it
foreach($charset as $k => $word){
    if(in_array($word, $words_so_far)){
        $charset[$k] = $your_replacement_here;
    }
    else {
        $words_so_far[] = $word;
    }
} 
```

对于稍微优化的解决方案（对于没有那么多重复项的情况），使用 array_count_values() [（在此处参考）](http://php.net/manual/en/function.array-count-values.php)来计算它出现的次数。

```
// counts the number of words
$word_count = array_count_values($charset);
// words we've seen so far
$words_so_far = array();
// for each word, check if we've encountered it so far
//    - if not, add it to our list
//    - if yes, replace it
foreach($charset as $k => $word){
    if($word_count[$word] > 1 && in_array($word, $words_so_far)){
        $charset[$k] = $your_replacement_here;
    }
    elseif($word_count[$word] > 1){
        $words_so_far[] = $word;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T20:12:15.707

这里的示例如何生成唯一值并替换数组中的重复值

```
function get_unique_val($val, $arr) {
    if ( in_array($val, $arr) ) {
        $d = 2; // initial prefix 
        preg_match("~_([\d])$~", $val, $matches); // check if value has prefix
        $d = $matches ? (int)$matches[1]+1 : $d;  // increment prefix if exists

        preg_match("~(.*)_[\d]$~", $val, $matches);

        $newval = (in_array($val, $arr)) ? get_unique_val($matches ? $matches[1].'_'.$d : $val.'_'.$d, $arr) : $val;
        return $newval;
    } else {
        return $val;
    }
}

function unique_arr($arr) {
    $_arr = array();
    foreach ( $arr as $k => $v ) {
        $arr[$k] = get_unique_val($v, $_arr);
        $_arr[$k] = $arr[$k];
    }
    unset($_arr);

    return $arr;
}

$ini_arr = array('dd', 'ss', 'ff', 'nn', 'dd', 'ff', 'vv', 'dd');

$res_arr = unique_arr($ini_arr); //array('dd', 'ss', 'ff', 'nn', 'dd_2', 'ff_2', 'vv', 'dd_3'); 
```

您可以[在此处查看完整示例 webbystep.ru](http://webbystep.ru/all-posts/15-array-unique-algorithm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T03:04:16.897

使用函数 array_unique()

[在http://php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)查看更多信息

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-04T03:03:29.910

```
$uniques = array();
foreach ($charset as $value) 
   $uniques[$value] = true;
$charset = array_flip($uniques); 
```

# java - 动画岩石未正确生成

> ID：13215669
> 
> 赞同：1
> 
> 时间：2012-11-04T03:01:20.143
> 
> 标签：java, animation, timer

我正在创建一个穴居人扔石头的游戏，当你点击时，会产生一块石头。前五个左右工作正常，然后等到岩石离开屏幕，然后它们可以再次产卵。我希望它们在我单击时生成。

提前致谢

代码：

 `````
 package com.russell.raphael.birds;

import java.awt.Toolkit;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

@SuppressWarnings("serial")

public class Start extends JFrame {

    ImageIcon landImage, manImage, skyImage, RockPileImage, RockImage;
    JLabel skylbl, manlbl, landlbl, rockPilelbl;
    Bird[] birds = new Bird[10];
    Rock[] rocks = new Rock[10000];

    public static MouseListener throwrock;

    public static void main(String[] args){

        new Start();

    }

    public Start() {

        setVisible(true);

        initComp();
        setSize(1000, 1100);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setTitle("Not the Birds!!!");
        setIconImage(Toolkit.getDefaultToolkit().getImage(Start.class.getResource("/com/russell/raphael/images/Icon.png")));

    }

    private void initComp() {

        throwrock = new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                int eventX = 0, eventY = 0, sourceX = 420, sourceY = 840;
                int rise = 0, run = 0;

                try {
                    JLabel source = (JLabel) e.getSource();

                    eventX = (source.getLocation().x) + (e.getX());
                    eventY = (source.getLocation().y) + (e.getY());
                    rise = Math.abs(eventY - sourceY);
                    run = eventX - sourceX;

                    nextRock().start(rise, run);

                } catch (Exception ex) {

                    ex.printStackTrace();
                }

            }

        };

        setResizable(false);

        for(int counter =0; counter < rocks.length; counter++){

            rocks[counter] = new Rock();
            getContentPane().add(rocks[counter]);

        }

        landImage = new ImageIcon(
                Start.class.getResource("/com/russell/raphael/images/land.png"));
        manImage = new ImageIcon(
                Start.class.getResource("/com/russell/raphael/images/man.png"));
        skyImage = new ImageIcon(
                Start.class.getResource("/com/russell/raphael/images/sky.jpg"));
        RockPileImage = new ImageIcon(
                Start.class
                        .getResource("/com/russell/raphael/images/rockpile.png"));

        getContentPane().setLayout(null);

        skylbl = new JLabel(skyImage);
        skylbl.addMouseListener(throwrock);
        skylbl.setLocation(0, 0);
        skylbl.setSize(1010, 983);
        skylbl.setVisible(true);

        manlbl = new JLabel(manImage);
        manlbl.setSize(200, 300);
        manlbl.addMouseListener(throwrock);
        manlbl.setLocation(400, 700);

        landlbl = new JLabel(landImage);
        landlbl.setBounds(0, 725, 1000, 400);
        manlbl.addMouseListener(throwrock);

        rockPilelbl = new JLabel();
        rockPilelbl.setIcon(RockPileImage);
        rockPilelbl.setBounds(236, 782, 220, 174);
        getContentPane().add(rockPilelbl);
        manlbl.addMouseListener(throwrock);

        getContentPane().add(manlbl);
        getContentPane().add(landlbl);
        getContentPane().add(skylbl);

    }

    public Rock nextRock(){

        for(int counter = 0; counter < rocks.length; counter++){

            if(!rocks[counter].hasBeenUsed){

                return rocks[counter];

            }

        }
        return null;
    }
} 
````  `下一节课：

 ````
package com.russell.raphael.birds;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

    import javax.swing.ImageIcon;
    import javax.swing.JLabel;
    import javax.swing.JOptionPane;
    import javax.swing.Timer;

    @SuppressWarnings("serial")
    public class Rock extends JLabel {

        Timer timer;

        Thread thread;

        boolean hasBeenUsed = false;

        public Rock() {

            super();

            setBounds(415, 840, 37, 35);
            setIcon(new ImageIcon(
                    Rock.class.getResource("/com/russell/raphael/images/Rock.png")));

            setVisible(true);
        }

        public void start(final int rise, final int run) {

            hasBeenUsed = true;

            thread = new Thread() {

                public void run() {

                    timer = new Timer(30, new ActionListener() {
                        @Override
                        public void actionPerformed(ActionEvent ae) {

                            setBounds(getBounds().x + run / 20, getBounds().y
                                    + -rise / 20, getBounds().width,
                                    getBounds().height);

                            if (getBounds().x < 0 || getBounds().y < 0
                                    || getBounds().y > 1000) {

                                timer.stop();

                                hasBeenUsed = false;

                                setBounds(415, 840, 37, 35);

                                thread.stop();

                            }

                        }

                    });
                    timer.start();
                }
            };

            thread.start();

        }
    }
</code> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:24:19.897

我对清空岩石池然后等待它们消失没有任何问题，但我还有很多其他问题......

让我们从...

```
nextRock().start(rise, run); 
```

这可能会返回一个`null`对象，这将导致`NullPointerException`

正如我之前所说，你不需要混合`Thread`和`Timer`，这是我对摇滚的简单看法。

```
public class Rock extends JLabel {

    Timer timer;
    private volatile boolean hasBeenUsed = false;

    public Rock() {
        super();
        setIcon(new ImageIcon(Rock.class.getResource("/Rock.png")));
        setBounds(415, 840, getPreferredSize().width, getPreferredSize().height);
        setVisible(false);
    }

    public void start(final int rise, final int run) {
        hasBeenUsed = true;
        setVisible(true);
        timer = new Timer(30, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                setBounds(getBounds().x + run / 20, getBounds().y
                                + -rise / 20, getBounds().width,
                                getBounds().height);

                if (getBounds().x < 0 || getBounds().y < 0
                                || getBounds().y > 1000) {
                    timer.stop();
                    hasBeenUsed = false;
                    setBounds(415, 840, getPreferredSize().width, getPreferredSize().height);
                }
            }
        });
        timer.start();
    }
} 
```

您的岩石池包含 10,000 块岩石！我不认为你可以足够快地点击来耗尽这堆东西。

尝试将其减少到 2 或 3 以进行测试...

**边注**

这是一个非常昂贵的电话...

```
public Rock nextRock() {
    for (int counter = 0; counter < rocks.length; counter++) {
        if (!rocks[counter].hasBeenUsed) {
            return rocks[counter];
        }
    }
    return null;
} 
```

如果您在空中有 9、999 块岩石，则需要相当长的时间才能到达最后一个，因为您必须遍历所有当前不可用的岩石。

`java.util.List`将所有岩石添加到一个（我们称之为rockPile）可能更容易。扔石头时，您可以检查此列表以查看是否有任何可用的石头，如果没有，则返回，否则，从列表中删除第一块石头并放入“飞行中”列表中。这将使检查岩石堆的速度更快（使用类似的东西`List#isEmpty`并且`List#get(0)`速度更快）。

当一块岩石再次“可用”时，您会将其从“飞行中”列表中删除并放回`rockPile`列表中。

这也意味着您可能会找到一个`Timer`负责遍历`inFlight`列表并更新位置的人......

**使用列表更新**

基本上，您需要某种“经理”来维护所有必需的信息并且可以在相关方之间共享......

```
public class RockManager {

    private List<Rock> rockPile;
    private List<Rock> inFlight;
    public static final int MAX_ROCKS = 2;

    public RockManager() {
        rockPile = new ArrayList<Rock>(MAX_ROCKS);
        inFlight = new ArrayList<Rock>(MAX_ROCKS);
        for (int index = 0; index < MAX_ROCKS; index++) {
            rockPile.add(new Rock(this));
        }
    }

    public Rock[] getRocksOnPile() {
        return rockPile.toArray(new Rock[rockPile.size()]);
    }

    public Rock[] getRocksInFlight() {
        return inFlight.toArray(new Rock[inFlight.size()]);
    }

    public Rock pickRockOfPile() {
        Rock rock = null;
        if (!rockPile.isEmpty()) {
            rock = rockPile.remove(0);
            inFlight.add(rock);
        }
        return rock;
    }

    public void putRockBackOnPile(Rock rock) {
        if (inFlight.contains(rock)) {
            inFlight.remove(rock);
            rockPile.add(rock);
        }
    }
} 
```

注意：从技术上讲，您可能不需要“ `inFlight`，但我将其用作陷阱以确保不会将岩石添加到不在飞行中的堆中；）。您也可以使用 a `Set`，`rockPile`因为这将确保列表中仅包含唯一引用...

`RockManager`接下来，我在类中添加了一个实例字段`Start`。

在`initComp`您的课程方法中`Start`，您需要更改构建岩石的方式...

所以，而不是

```
for(int counter =0; counter < rocks.length; counter++){
    rocks[counter] = new Rock();
    getContentPane().add(rocks[counter]);
} 
```

你现在应该...

```
rockManager = new RockManager();
for (Rock rock : rockManager.getRocksOnPile()) {
    getContentPane().add(rock);
} 
```

你的`nextRock`方法会变成...

```
public Rock nextRock() {
    return rockManager.pickRockOfPile();
} 
```

最后，您的`Rock`类将需要对 的引用`RockManager`，基本上，我通过构造函数传入引用...

```
private RockManager manager;

public Rock(RockManager manager) {
    super();
    this.manager = manager; 
```

然后，当岩石离开比赛场地时，您可以通过`RockManager`...

```
manager.putRockBackOnPile(Rock.this); 
``````

# java - 在 Google App Engine 上编写 JSON API 的最佳方式

> ID：13215676
> 
> 赞同：3
> 
> 时间：2012-11-04T03:02:17.663
> 
> 标签：java, json, api, google-app-engine

我想在 Google AppEngine 之上创建一个 Java Web 应用程序。

开发 REST JSON API 的最佳方法是什么？

我是否必须从头开始编写一个管理 JSON 处理的 servlet，或者有一个库或类似 Web 服务的 SOAP 支持之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:39:48.037

试试 RESTEasy。它有[极好的文档](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html_single/index.html)，并且有[很好的例子可以找到](http://www.mkyong.com/webservices/jax-rs/integrate-jackson-with-resteasy/)。它与 Jackson 集成，Jackson 是 IMO 最好的 Java JSON 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:07:34.880

如果你使用 jersey，那么你应该看看 Genson [http://owlike.github.io/genson/](http://owlike.github.io/genson/)。它是一个完整的数据绑定+流式 java<>json 库。作为球衣的奖励，你只需要在你的类路径中有genson，瞧！一切都可以在没有任何配置的情况下工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:30:37.453

无需从头开始编写 servlet，使用 JAX RS，简单易行 [http://tugdualgrall.blogspot.com/2010/02/create-and-deploy-jax-rs-rest-service.html](http://tugdualgrall.blogspot.com/2010/02/create-and-deploy-jax-rs-rest-service.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T03:28:01.797

[这里](https://stackoverflow.com/questions/10087256/parsing-json-on-google-app-engine-java)的答案可能就是你要找的。（Gson 应该能够生成和解析 JSON）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T05:30:24.877

经过一些研究，我认为使用[球衣](http://answers.oreilly.com/topic/2727-deploy-java-restful-application-on-the-google-app-engine/)是一个很好的选择

# node.js - Mongoose：在 upsert 后获取 doc _id

> ID：13215689
> 
> 赞同：4
> 
> 时间：2012-11-04T03:03:30.033
> 
> 标签：node.js, mongoose

有什么方法可以在 upsert 之后获取记录 _id 吗？

我看过这篇文章（[How to insert a doc into mongodb using mongoose and get the generated id?](https://stackoverflow.com/questions/10520501/how-to-insert-a-doc-into-mongodb-using-mongoose-and-get-the-generated-id)），但这仅面向插入，而不是更新。

此外，使用 MongoDB，您可以使用 getlasterror ( [https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/ehZ11QY-OUw](https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/ehZ11QY-OUw) ) 获取 _id，但 Mongoose 不提供对它（[https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/pSv6WrasvWg](https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/pSv6WrasvWg)）

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T14:17:52.283

在 options 对象中使用 Mongoose 的[findOneAndUpdate](http://mongoosejs.com/docs/api.html#model_Model-findOneAndUpdate)方法。`upsert: true`

```
var query = { name: 'borne' },
    data = { name: 'jason borne' },
    options = { upsert: true };
Model.findOneAndUpdate(query, data, options, function (err, object) {
    /* use object._id */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-04T17:48:56.207

承诺的另一种可能性：

```
Model.findOneAndUpdate(query, data, options, function (err, object) {
})).then((result) => {
    /* return result.upserted[0]._id */
}) 
```

...`result`以下内容在哪里：

```
{ n: 1,
  nModified: 0,
  upserted: [ { index: 0, _id: /* some id */ } ],
  ok: 1 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T15:27:03.300

如果您希望返回更新的文档，并且在它不存在并且被插入新文档的情况下。以下是您需要设置的选项。

设置 new: true 到选项：`options = { upsert: true, new: true };`

资料来源：根据 Jamiel 的评论，我将他的评论添加为答案，因为当不存在文档并由 upsert 创建时，我很难找到 _id （我试图创建自己的扩展方法）。

# ajax - 将信息从一个 Dojo AMD 模块传递到另一个

> ID：13215705
> 
> 赞同：0
> 
> 时间：2012-11-04T03:07:28.703
> 
> 标签：ajax, json, dojo, amd

我正在使用 Dojo 1.8 中的模块，并且我有一个这样定义的模块：

```
define(["dojo/request/xhr", "dojo/json"],
  function(xhr, JSON) {

  var url = "server/provider.php";

  return {
    files: {},

    getDirList: function() {
      var self = this;
      xhr(url).then(function(response) {
        response = JSON.parse(response);
        // would love to return the JSON for use here
      }, function(err) {
        console.error(err);
      });
    }
  };

}); 
```

我有另一个模块，我想在其中调用该方法然后使用它：

```
define(["dojo/dom",
        "dojo/dom-construct",
        "dojo/_base/array",
        "afm/utils"
        ],
function(dom,domConst,array, utils) {
  return {
    produceHtml: function() {
      var json = utils.getDirList(); //this returns undefined
      var dirLength = json.length;
      console.log(json);
      for (var i = 0; i < json.length; i++) {
        if(i % 2 === 0) {
          domConst.place('<tr class="even"><td>' + json[i].name + '</td></tr>', 'output');
        } else {
          domConst.place('<tr><td>' + json[i].name + '</td></tr>', 'output');
        }
      }

    }
  };
}); 
```

当然，我可以将 DOM 创建代码放入 util 模块中，但这是在不应该的地方混合视图逻辑。如果我想重用 util.getDirList 方法，那就太可怕了。

如何使用该方法返回的 JSON？还有其他人这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:23:12.767

dojo/request/xhr调用的结果是异步进来的，所以设置response参数只有在返回后才进行。你想要的是返回一个 Promise（在这里阅读：http: [//dojotoolkit.org/documentation/tutorials/1.8/promises/](http://dojotoolkit.org/documentation/tutorials/1.8/promises/)）。

但首先：你可以让dojo/request为你解析json数据，如下：

```
require(['dojo/request'],function(request) {
    request.get('http://example.com/data.json', {handleAs:'json'}).then(...)
}) 
```

见这里：[http ://dojotoolkit.org/reference-guide/1.8/dojo/request.html#dojo-request](http://dojotoolkit.org/reference-guide/1.8/dojo/request.html#dojo-request)

现在结合这一点，您的 getDirList 函数可能只是：

```
getDirList: function() {
    return xhr.get(url, {handleAs:'json'});
} 
```

然后在您的 producerHtml 中，您将执行以下操作：

```
utils.getDirList.then(function(json) {
    for (var i = 0; i < json.length; i++) {
    if(i % 2 === 0) {
      domConst.place('<tr class="even"><td>' + json[i].name + '</td></tr>', 'output');
    } else {
      domConst.place('<tr><td>' + json[i].name + '</td></tr>', 'output');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:06:39.093

在你的第二个模块中，不应该

```
define(["dojo/dom",
        "dojo/dom-construct",
        "dojo/_base/array",
        "afm/utils"
        ],
function(dom,domConst,array) { 
```

变得

```
define(["dojo/dom",
        "dojo/dom-construct",
        "dojo/_base/array",
        "afm/utils"
        ],
function(dom,domConst,array, utils) { 
```

?

# ruby - 乘客：应用程序生成器服务器意外退出：连接已关闭

> ID：13215707
> 
> 赞同：3
> 
> 时间：2012-11-04T03:08:09.973
> 
> 标签：ruby, passenger, redmine

我试图在 CentOS 6.3 上使用 mod_passenger 将 Redmine 部署到 Apache，但出现错误：

> 应用程序生成器服务器意外退出：连接已关闭

我使用 gem 安装了最新版本（3.0.18）的乘客。

经过各种失败的尝试后，我决定从“gem卸载乘客”中删除乘客并使用“yum install ruby​​gem-passenger”再次安装它。安装的版本是“3.0.17”

然后它开始工作。还是不知道具体是什么原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:24:01.823

我也有同样的问题并想通了。

您的 apache 配置文件中可能有`RailsBaseURI`指令。如果您使用的是 Rails 3，则应将其更改为`RackBaseURI`.

看到这些

*   [乘客错误 - PhusionPassenger::ClassicRails::ApplicationSpawner::Error](https://stackoverflow.com/questions/4430847/passenger-error-phusionpassengerclassicrailsapplicationspawnererror)
*   [http://wiki.railsplayground.com/railsplayground/show/How+To+use+Phusion+Passenger](http://wiki.railsplayground.com/railsplayground/show/How+To+use+Phusion+Passenger)
*   [http://www.modrails.com/documentation/Users%20guide%20Apache.html](http://www.modrails.com/documentation/Users%20guide%20Apache.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:53:32.260

您在日志文件中看到了哪些其他错误？

您也可以从 github 的 master 分支尝试 Phusion Passenger 4 beta 吗？

# java - 访问嵌入式资源时出错

> ID：13215710
> 
> 赞同：0
> 
> 时间：2012-11-04T03:08:26.550
> 
> 标签：java, audio, io, embedded-resource, filenotfoundexception

我正在制作一个程序，我希望它在打开时开始播放声音。我认为最简单的方法是将 .wav 文件嵌入到我的 jar 中的 src 文件夹中。我已将该文件放在一个名为的打包文件中，`files`并且我正在使用的所有其他文件（例如图片）都在该包中，并且它们都可以正常工作。我播放声音的方法在这里：

```
public static void playSound(String dir, int loopTimes) throws Exception {
    URL url = new File(dir).toURI().toURL();
    Clip clip = AudioSystem.getClip();
    // getAudioInputStream() also accepts a File or InputStream
    AudioInputStream ais = AudioSystem.getAudioInputStream(url);
    clip.open(ais);
    if (loopTimes == -1)
        loopTimes = Clip.LOOP_CONTINUOUSLY;
    clip.loop(loopTimes);
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {

        }
    });
} 
```

它适用于在我的桌面、文档或其他任何地方播放声音。我为播放声音输入的路径是`"files/FBP.wav"`FBP 是文件的名称。我无法在谷歌上找到任何解决方案，我觉得这是因为它在 JAR 中。我也只是简单地尝试了这个：

```
if(new File("files/FBP.wav").exists()){
        System.out.println("EXISTS!");
    }
    System.exit(0); 
```

它从来没有打印出它存在。我已经确保它也在 bin 文件夹中。我正在使用日食。我得到的错误是`filenotfoundexception`。任何帮助表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:17:01.540

代替：

```
URL url = new File(dir).toURI().toURL(); 
```

和：

```
URL url = MySoundClassName.class.getClassLoader().getResource(dir); 
```

或者对于非静态方法：

```
URL url = getClass().getClassLoader().getResource(dir); 
```

# java - 假设我们交换元素 a[i] 和 a[i+k]，它们原本是无序的

> ID：13215712
> 
> 赞同：-1
> 
> 时间：2012-11-04T03:08:34.337
> 
> 标签：java, algorithm, sorting

> 证明至少 1 和最多 2*k - 1 的反演被移除

我不明白“反转被删除”是什么意思，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:16:30.823

如果列表是`1, 3, 2, 4`并且它已更改为，`1, 2, 3, 4`则您已删除反转。

显然，您已经删除了至少 1 个反转，因为`a[i]`并且`a[i+k]`出现了故障。最多您删除`2*k - 1`，因为如果`a[i]`大于`a[i+1], ... ,a[i+k-1]`然后您修复`k-1`反转。`a[i+k]`比它下面的所有都小也是如此。因此，您最多可以拥有`k-1 + k-1 + 1`（最后一个是我们已经数过的），它等于`2k - 1`

示例： ->用, ,`1,10,3,4,5,6,7,8,9,2`切换2 现在小于 10，并且 2 也小于 3-9 即 7 个​​数字。进一步的 10 现在大于 3-9，这又是 7 个数字，所以改进是`a[2]``a[10]``k = 8``7 + 7 + 1 = 15 = 2*8 - 1`

# delphi - 使用 Delphi 获取真实的硬盘序列号

> ID：13215713
> 
> 赞同：10
> 
> 时间：2012-11-04T03:08:34.650
> 
> 标签：delphi, wmi

我正在尝试制作delphi程序服务器和客户端，以便保护我的应用程序并确保所有用户都受到控制，我应该给他们一个无法更改的唯一密钥以不丢失它们句柄，所以我认为它应该是硬盘驱动器序列号 + Bios SN，但我记得移除主板电池时可以更改 Bios，所以它不会工作。所以我现在的选择是硬盘真实序列号我尝试下面的代码来获取它，但它没有用

```
 unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls,WbemScripting_TLB,ActiveX;

type
  TForm4 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

function GetWMIstring (wmiHost, wmiClass, wmiProperty : string):string;
var  // These are all needed for the WMI querying process
  Locator:  ISWbemLocator;
  Services: ISWbemServices;
  SObject:  ISWbemObject;
  ObjSet:   ISWbemObjectSet;
  SProp:    ISWbemProperty;
  Enum:     IEnumVariant;
  Value:    Cardinal;
  TempObj:  OleVariant;
  SN: string;
begin
  try
  Locator := CoSWbemLocator.Create;  // Create the Location object
  // Connect to the WMI service, with the root\cimv2 namespace
   Services :=  Locator.ConnectServer(wmiHost, 'root\cimv2', '', '', '','', 0, nil);
  ObjSet := Services.ExecQuery('SELECT * FROM '+wmiClass, 'WQL',
    wbemFlagReturnImmediately and wbemFlagForwardOnly , nil);
  Enum :=  (ObjSet._NewEnum) as IEnumVariant;
  while (Enum.Next(1, TempObj, Value) = S_OK) do
  begin
    SObject := IUnknown(tempObj) as ISWBemObject;
    SProp := SObject.Properties_.Item(wmiProperty, 0);
    if VarIsNull(SProp.Get_Value) then
      result := ''
    else
    begin
      SN := SProp.Get_Value;
      result :=  SN;
    end;
  end;
  except // Trap any exceptions (Not having WMI installed will cause one!)
   on exception do
    result := '';
   end;
end;

procedure TForm4.Button1Click(Sender: TObject);
var
x:string;
Y:string;

begin

    X:=GetWMIstring('','Win32_BIOS','SerialNumber');
    Y:=GetWMIstring('','Win32_DiskDrive"','SerialNumber')     ;

    ShowMessage(x+';'+y);
end;

end. 
```

****所以请任何人纠正我的代码或给我另一个想法最好的问候****

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-04T03:36:42.260

您的代码不起作用，因为您在 WMI 类名中传递了双引号。

更改此代码

```
GetWMIstring('','Win32_DiskDrive"','SerialNumber'); 
```

对此

```
GetWMIstring('','Win32_DiskDrive','SerialNumber'); 
```

顺便说一句，如果你遵循这个问题的答案的建议，你可以改进你的 WMI 函数（GetWMIstring）[`How can I improve the WMI performance using delphi?`](https://stackoverflow.com/questions/10199531/how-can-i-improve-the-wmi-performance-using-delphi/10199841#10199841)。

试试这个示例（此代码使用后期绑定，不需要`WbemScripting_TLB`单位）

```
 uses
      ActiveX,
      ComObj;

    var
      FSWbemLocator : OLEVariant;
      FWMIService   : OLEVariant;

    function  GetWMIstring(const WMIClass, WMIProperty:string): string;
    const
      wbemFlagForwardOnly = $00000020;
    var
      FWbemObjectSet: OLEVariant;
      FWbemObject   : OLEVariant;
      oEnum         : IEnumvariant;
      iValue        : LongWord;
    begin;
      Result:='';
      FWbemObjectSet:= FWMIService.ExecQuery(Format('Select %s from %s',[WMIProperty, WMIClass]),'WQL',wbemFlagForwardOnly);
      oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
      if oEnum.Next(1, FWbemObject, iValue) = 0 then

  if not VarIsNull(FWbemObject.Properties_.Item(WMIProperty).Value) then

     Result:=FWbemObject.Properties_.Item(WMIProperty).Value;

    FWbemObject:=Unassigned;
    end;

    procedure TForm4.Button1Click(Sender: TObject);
    var
      x:string;
      Y:string;
    begin
      FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
      FWMIService   := FSWbemLocator.ConnectServer('localhost', 'root\CIMV2', '', '');

      X:=GetWMIstring('Win32_BIOS','SerialNumber');
      Y:=GetWMIstring('Win32_PhysicalMedia','SerialNumber');

      ShowMessage(x+';'+y);
    end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T13:51:28.227

您应该避免，当安装更多设备时，PHYSICALDRIVE0 不需要在数据库中排在第一位。PHYSICALDRIVE1 是我的第一个。我添加**了**查询位置，现在可以正常工作了。对于 Win32_DiskDrive 是属性名称**DeviceID**，对于 Win32_PhysicalDrive 是属性名称**Tag**。这里改变了部分：

```
function  GetWMIstring(const WMIClass, WMIProperty, WMIWhere:string): string;
...
  qry:='SELECT '+WMIProperty+' FROM '+WMIClass;
  if WMIWhere<>'' then qry:=qry + ' WHERE '+WMIWhere;
  FWbemObjectSet:= FWMIService.ExecQuery(qry,'WQL',wbemFlagForwardOnly);
...
  x:=GetWMIstring('Win32_DiskDrive','SerialNumber','DeviceID="\\\\.\\PHYSICALDRIVE0"'));
  y:=GetWMIstring('Win32_PhysicalMedia','SerialNumber','Tag="\\\\.\\PHYSICALDRIVE0"')); 
```

/ 之前不要忘记调用 CoInitialize !!!

# python - IOError：[Errno 13] 尝试以“w”模式打开隐藏文件时权限被拒绝

> ID：13215716
> 
> 赞同：28
> 
> 时间：2012-11-04T03:08:58.643
> 
> 标签：python, windows, winapi, file-io, hidden-files

我想替换隐藏文件的内容，所以我尝试以`w`模式打开它，以便将其删除/截断：

```
>>> import os
>>> ini_path = '.picasa.ini'
>>> os.path.exists(ini_path)
True
>>> os.access(ini_path, os.W_OK)
True
>>> ini_handle = open(ini_path, 'w') 
```

但这导致了追溯：

```
IOError: [Errno 13] Permission denied: '.picasa.ini' 
```

但是，我能够通过`r+`模式达到预期的结果：

```
>>> ini_handle = open(ini_path, 'r+')
>>> ini_handle.truncate()
>>> ini_handle.write(ini_new)
>>> ini_handle.close() 
```

**Q.**`w`和模式有什么区别`r+`，一个有“权限被拒绝”但另一个工作正常？

**更新：**我在使用 Python 2.6.6 的 win7 x64 上，并且目标文件具有其隐藏属性集。当我尝试关闭隐藏属性时，`w`模式成功。但是当我重新打开它时，它又失败了。

**问**：为什么`w`隐藏文件模式会失败？这是已知的行为吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-04T04:11:03.947

这就是 Win32 API 的工作方式。在底层，Python 的`open`函数正在调用该[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)函数，如果调用失败，它会将 Windows 错误代码转换为 Python `IOError`.

`r+`打开模式对应于 a of`dwAccessMode`和`GENERIC_READ|GENERIC_WRITE`a `dwCreationDisposition`of `OPEN_EXISTING`。`w`打开模式对应于 a of`dwAccessMode`和`GENERIC_WRITE`a `dwCreationDisposition`of `CREATE_ALWAYS`。

如果您仔细阅读`CreateFile`文档中的注释，它会说：

> 如果指定了`CREATE_ALWAYS`and ，则失败并将最后一个错误设置为如果文件存在并且具有or属性。为避免该错误，请指定与现有文件相同的属性。`FILE_ATTRIBUTE_NORMAL``CreateFile``ERROR_ACCESS_DENIED``FILE_ATTRIBUTE_HIDDEN``FILE_ATTRIBUTE_SYSTEM`

因此，如果您`CreateFile`直接从 C 代码调用，则解决方案是添加`FILE_ATTRIBUTE_HIDDEN`到`dwFlagsAndAttributes`参数中（而不仅仅是`FILE_ATTRIBUTE_NORMAL`）。但是，由于 Python API 中没有选项可以告诉它传入该标志，因此您只需要使用不同的打开模式或使文件不隐藏来解决它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T03:14:33.177

以下是详细的区别：-

> ``r'' 打开文本文件进行阅读。流位于文件的开头。
> 
> ``r+'' 为读写打开。流位于文件的开头。
> 
> ``w'' 将文件截断为零长度或创建用于写入的文本文件。流位于文件的开头。
> 
> ``w+'' 为读写而打开。如果文件不存在，则创建该文件，否则将其截断。流位于文件的开头。
> 
> ``a'' 开放写。如果文件不存在，则创建该文件。流位于文件的末尾。对文件的后续写入将始终在文件的当前末尾结束，而与任何干预 fseek(3) 或类似内容无关。
> 
> ``a+'' 为读写打开。如果文件不存在，则创建该文件。流位于文件的末尾。对文件的后续写入将始终在文件的当前末尾结束，而与任何干预 fseek(3) 或类似内容无关。

从 python 文档 - [http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files:-](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files:-)

> 在 Windows 上，附加到模式的 'b' 以二进制模式打开文件，因此还有 'rb'、'wb' 和 'r+b' 等模式。Windows 上的 Python 区分了文本文件和二进制文件；读取或写入数据时，文本文件中的行尾字符会自动稍作更改。这种对文件数据的幕后修改适用于 ASCII 文本文件，但它会破坏 JPEG 或 EXE 文件中的二进制数据。在读写此类文件时要非常小心使用二进制模式。在 Unix 上，将“b”附加到模式并没有什么坏处，因此您可以独立于平台使用它来处理所有二进制文件。

因此，如果您使用的是`w`模式，您实际上是在尝试创建一个文件，而您可能没有执行此操作的权限。`r+`是合适的选择。

如果您处于不知道您的`.picasi.ini`存在或不存在的情况并且您的 Windows 用户在该目录中具有文件创建权限并且您想要追加新信息而不是从文件的开头开始（也称为“追加”） ，那么`a+`将是合适的选择。

它与您的文件是否隐藏无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-02T02:33:14.527

感谢这个线程；我今天有同样的问题。我的解决方法如下。适用于 Python 3.7

```
import os

GuiPanelDefaultsFileName = 'panelDefaults.json'
GuiPanelValues = {
    '-FileName-'      : os.getcwd() + '\\_AcMovement.xlsx',
    '-DraftEmail-'    : True,
    '-MonthComboBox-' : 'Jun',
    '-YearComboBox-'  : '2020'
}

# Unhide the file via OS
if os.path.isfile(GuiPanelDefaultsFileName):
    os.system(f'attrib -h {GuiPanelDefaultsFileName}')

# Write dict values to json
with open(GuiPanelDefaultsFileName, 'w') as fp:
    json.dump(GuiPanelValues, fp, indent=4)

# Make it hidden again
os.system(f'attrib +h {GuiPanelDefaultsFileName}') 
```

# apache - 返回 URL 查询参数

> ID：13215719
> 
> 赞同：0
> 
> 时间：2012-11-04T03:09:52.230
> 
> 标签：apache, clean-urls

是否有任何方法或工具可以从干净的 URL 返回获取参数？例如：

```
www.website.com/cat/1 
```

这个 URL 在清理之前是什么样子的？

* * *

**更新：示例**

clean之前的原网址是这样的：

```
http://example.com/wiki/index.php?title=Page_title 
```

清洁后变成这样：

```
http://example.com/wiki/Page_title 
```

有没有工具可以提供干净的 URL 并返回非干净的？

# c# - 什么相当于 C# 中 VB.NET 的 Length 关键字？

> ID：13215727
> 
> 赞同：0
> 
> 时间：2012-11-04T03:11:51.527
> 
> 标签：c#, vb.net

我写了这样的 VB.NET 代码：

```
d = Data.IndexOf("</a>", ("target='_top' class='ab1'>").Length() + s). 
```

我想用 C# 写这个。当我用 C# 编写上面的代码时，它说 Length 关键字有错误。如何在 C# 中编写上述代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T03:15:08.797

`Length`不是 C# 中的关键字 - 它是您尝试操作的对象（如字符串）的属性或扩展方法。

因此，如果它是您使用的字符串，它将起作用：

```
myString.Length 
```

（注意括号是如何丢失的，因为它是一个属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:16:42.397

检查此链接：

在其中，您可以轻松地在 C# 和 VB 之间切换，以帮助您迁移：

[http://msdn.microsoft.com/en-us/library/system.string.length.aspx#Y242](http://msdn.microsoft.com/en-us/library/system.string.length.aspx#Y242)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T04:08:37.130

你有一组额外的括号：

```
 d = Data.IndexOf("</a>", "target='_top' class='ab1'>".Length + s) 
```

试试看

# java - 带矩形的 kd 树

> ID：13215728
> 
> 赞同：2
> 
> 时间：2012-11-04T03:12:04.723
> 
> 标签：java, kdtree

我已经实现了一个使用给定点的 kd 树。例如，我可以向树中添加点，然后找到与给定 x、y 坐标最近的点，这很棒。

我想扩展它以使用矩形，例如用户给出一个 x 和 ay 坐标、一个宽度和一个高度，然后我希望能够在这个结构上进行范围查询和最近邻搜索。我将如何扩展我必须处理矩形数据的当前树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:54:13.183

Kd 树非常适合低维点数据。对于由多个点（线、矩形等）组成的任何东西，我建议使用 R-tree。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:05:12.490

我知道 kd 树的一个很好的扩展来处理矩形。它被称为*Box Sort*算法，可以在这里找到[Box sort](http://link.springer.com/article/10.1007/BF01952830?LI=true)。这个想法与 kd 树几乎相同。这篇论文也有一个 Pascal 实现，但翻译成 Java 应该是直截了当的。

# html - 如何在响应式设计中禁用缩放功能？

> ID：13215730
> 
> 赞同：21
> 
> 时间：2012-11-04T03:12:55.783
> 
> 标签：html, css, responsive-design, meta-tags

如何在使用 iPad、iPhone 和/或其他智能手机时禁用响应式设计页面中的放大和缩小功能。

有没有办法控制它？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-05T02:19:25.140

创建一个 META 视口标签，并将**用户可缩放**属性设置为“否”，如下所示：

```
<meta name="viewport" content="user-scalable=no" /> 
```

**更新的答案： -**

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T00:29:30.053

这几乎歧视了 30 岁以上的人，抑制变焦只会迫使他们使用老花镜。这可能是你的意图。

此类用户的解决方法之一是使用 RDP 或 VNC 来查看桌面浏览器并“捏”它的视图。

问题应该是“如何禁用”或“如​​何抑制”。您当然应该使用用户代理字符串来识别您的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-12T05:11:26.923

要禁用缩放，请添加此脚本

```
<script type="text/javascript">
document.addEventListener('touchmove', function (event) {
  if (event.scale !== 1) { event.preventDefault(); }
}, { passive: false });
</script> 
```

# c++ - 如何为自定义链表容器编写 end()？

> ID：13215743
> 
> 赞同：2
> 
> 时间：2012-11-04T03:16:05.957
> 
> 标签：c++

我正在为我的家庭作业编写一个链接列表，我需要为我的程序要求实现 begin() 和 end()。

Begin() 相当简单

```
Node* List::begin(){return head;} 
```

我应该如何实现 end()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:17:57.437

您可以返回一个`NULL`指针，或者如果您有一个自定义`tail`节点，则返回它。如果是循环双向链表，可以返回哨点节点。

请记住，检查列表末尾的正确方法是调用`List::end()`，因此，如果您已正确设置`List`课程，那么返回的内容并不重要，只要

```
Node* node = mylist.begin();
while (node != mylist.end()) { /*... loop */ } 
```

`while`工作，当您到达列表末尾时退出-loop。所以主要的事情是`List::end()`需要返回一些*独特*的东西，如果你正在遍历列表的中间，你将永远不会遇到。

# php - Symfony 1.4：PHP 致命错误：允许的内存大小为 33554432 字节已用尽

> ID：13215744
> 
> 赞同：0
> 
> 时间：2012-11-04T03:16:21.510
> 
> 标签：php, symfony-1.4

我正在尝试通过运行以下命令来重建 symfony 1.4 数据库：

`./symfony propel:build-sql`

当我运行命令时，我收到以下错误：

> PHP 致命错误：/lib/vendor/symfony/symfony-1.4.19/lib/plugins/sfPropelPlugin/lib/vendor/propel-generator/classes/propel/ 中允许的内存大小为 33554432 字节已用尽（尝试分配 89 字节）第 554 行的 engine/database/model/Table.php

我检查`my memory_limit`了 /etc/php5/cli/php.ini 中的配置

该行如下：

`memory_limit = -1`

它指定了内存没有限制，所以我不明白是什么导致了错误，因为内存没有限制。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:18:27.563

您是否尝试将 memory_limit 设置为“1024M”？

# php - 难以理解 PHPBB 如何转换为常规 PHP

> ID：13215749
> 
> 赞同：0
> 
> 时间：2012-11-04T03:17:02.100
> 
> 标签：php, sql, phpbb

当我注意到有一些不寻常的 PHPBB 框架代码与 PHP 的其余部分随机放入时，我一直在摆弄第三方脚本。我需要了解的是，如果这段代码有什么特别之处（它可以做一些普通 PHP 做不到的事情吗？），如果代码没有什么特别之处，我如何在没有框架的情况下顺利地将代码转换为 PHP .

```
<?
include('bar.php');
include "../includes/config.inc.php";
include "loggedin.inc.php";
include "../includes/countries.inc.php";
$auction_id = isset($_REQUEST['aid']) ? $_REQUEST['aid'] : "";
?>
<?
define("DATAGRID_DIR", "../datagrid/");
define("PEAR_DIR", "../datagrid/pear/");
require_once(DATAGRID_DIR . 'datagrid.class.php');
require_once(PEAR_DIR . 'PEAR.php');
require_once(PEAR_DIR . 'DB.php');
$DB_USER = $DbUser;
$DB_PASS = $DbPassword;
$DB_HOST = $DbHost;
$DB_NAME = $DbDatabase;
ob_start();
$db_conn     = DB::factory('mysql');
$result_conn = $db_conn->connect(DB::parseDSN('mysql://' . $DB_USER . ':' . $DB_PASS . '@' . $DB_HOST . '/' . $DB_NAME));
if (DB::isError($result_conn)) {
    die($result_conn->getDebugInfo());
}
$sql = "SELECT u.id, u.nick, COUNT(b.bidder) AS bid_count, 'View offers' AS link
            FROM BPLA_bids b
                INNER JOIN BPLA_users u ON b.bidder=u.id
            WHERE b.auction=$auction_id
            GROUP BY b.bidder";
$unique_prefix       = "au_";
$dgrid               = new DataGrid($debug_mode, $messaging, $unique_prefix, DATAGRID_DIR);
$default_order_field = "nick";
$default_order_type  = "ASC";
$dgrid->dataSource($db_conn, $sql, $default_order_field, $default_order_type);
$dg_language = "en";
$dgrid->setInterfaceLang($dg_language);
$direction = "ltr";
$dgrid->setDirection($direction);
$modes = array(
    "add" => array(
        "view" => false,
        "edit" => false,
        "type" => "link"
    ),
    "edit" => array(
        "view" => false,
        "edit" => false,
        "type" => "link",
        "byFieldValue" => ""
    ),
    "cancel" => array(
        "view" => false,
        "edit" => false,
        "type" => "link"
    ),
    "details" => array(
        "view" => false,
        "edit" => false,
        "type" => "link"
    ),
    "delete" => array(
        "view" => false,
        "edit" => false,
        "type" => "image"
    )
);
$dgrid->setModes($modes);
$http_get_vars = array(
    "aid"
);
$dgrid->setHttpGetVars($http_get_vars);
$printing_option = false;
$dgrid->allowPrinting($printing_option);
$exporting_option    = false;
$exporting_directory = "";
$dgrid->allowExporting($exporting_option, $exporting_directory);
$sorting_option = true;
$dgrid->allowSorting($sorting_option);
$paging_option   = true;
$rows_numeration = false;
$numeration_sign = "N #";
$dgrid->allowPaging($paging_option, $rows_numeration, $numeration_sign);
$bottom_paging     = array();
$top_paging        = array();
$pages_array       = array(
    "10" => "10",
    "25" => "25",
    "50" => "50",
    "100" => "100",
    "250" => "250"
);
$default_page_size = 10;
$paging_arrows     = array(
    "first" => "|&lt;&lt;",
    "previous" => "&lt;&lt;",
    "next" => "&gt;&gt;",
    "last" => "&gt;&gt;|"
);
$dgrid->setPagingSettings($bottom_paging, $top_paging, $pages_array, $default_page_size, $paging_arrows);
$dgrid->setViewModeTableProperties($vm_table_properties);
$vm_colimns = array(
    "nick" => array(
        "header" => "Nick",
        "type" => "label",
        "summarize" => "false",
        "visible" => "true"
    ),
    "bid_count" => array(
        "header" => "Bid count",
        "type" => "label",
        "summarize" => "false",
        "visible" => "true"
    ),
    "link" => array(
        "header" => "&nbsp;",
        "type" => "link",
        "field_key" => "id",
        "field_data" => "link",
        "href" => "auction_users_bids.php?aid=$auction_id&uid={0}"
    )
);
$dgrid->setColumnsInViewMode($vm_colimns);
$dgrid->bind();
ob_end_flush();   
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:03:23.797

PHPBB 使用标准的 PHP 代码。在您显示的代码中，使用了 PHPBB 之前定义的 DataGrid 类。如果您可以找到该类的定义位置，则可能有助于理解它在做什么。搜索

```
class DataGrid 
```

在 PHPBB 代码中了解有关该类的更多信息。

# python - 从 XML 读取标签并打印

> ID：13215755
> 
> 赞同：0
> 
> 时间：2012-11-04T03:17:57.937
> 
> 标签：python

我有以下输入 XML 文件，我读取了 rel_notes 标记并打印它...遇到以下错误

输入 XML：

```
<rel_notes>
    •   Please move to this build for all further test and development activities 
    •   Please use this as base build to verify compilation and sanity before any check-in happens

</rel_notes> 
```

示例python代码：

```
file = open('data.xml,'r')
from xml.etree import cElementTree as etree
tree = etree.parse(file)
print('\n'.join(elem.text for elem in tree.iter('rel_notes'))) 
```

输出

```
 print('\n'.join(elem.text for elem in tree.iter('rel_notes')))
 File "C:\python2.7.3\lib\encodings\cp437.py", line 12, in encode
return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u2022' in position 9: character maps to <undefined> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:28:38.447

问题在于将[Unicode 打印到 Windows 控制台](https://stackoverflow.com/questions/5419/python-unicode-and-the-windows-console)。即，您的控制台无法使用[字符“•”来表示。](http://codepoints.net/U+2022)`cp437`

要重现该问题，请尝试：

```
print u'\u2022' 
```

您可以设置[`PYTHONIOENCODING`环境变量](http://docs.python.org/2.7/using/cmdline.html#envvar-PYTHONIOENCODING)以指示 python 用相应的 xml char 引用替换所有不可表示的字符：

```
T:\> set PYTHONIOENCODING=cp437:xmlcharrefreplace
T:\> python your_script.py 
```

或者在打印之前将文本编码为字节：

```
print u'\u2022'.encode('cp437', 'xmlcharrefreplace') 
```

* * *

^(回答你最初的问题)

[要打印每个`<build_location/>`元素](http://ideone.com/hlla5W)的文本：

```
import sys
from xml.etree import cElementTree as etree

input_file = sys.stdin # filename or file object
tree = etree.parse(input_file)
print('\n'.join(elem.text for elem in tree.iter('build_location'))) 
```

如果输入文件很大；[`iterparse()`可以使用](http://ideone.com/BgNp0d)：

```
import sys
from xml.etree import cElementTree as etree

input_file = sys.stdin
context = iter(etree.iterparse(input_file, events=('start', 'end')))
_, root = next(context) # get root element
for event, elem in context:
    if event == 'end' and elem.tag == 'build_location':
       print(elem.text)
       root.clear() # free memory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:18:56.507

我不认为上面的整个片段是完全有帮助的。但是，UnicodeEncodeError 通常发生在未正确处理 ASCII 字符时。

### 例子：

```
unicode_str = html.decode(<source encoding>)

encoded_str = unicode_str.encode("utf8") 
```

它已经在这个答案中得到了清楚的解释：[Python: Convert Unicode to ASCII without errors](https://stackoverflow.com/questions/2365411/python-convert-unicode-to-ascii-without-errors)

这至少应该解决 UnicodeEncodeError。

# php - 一个繁忙的 PHP 脚本使其他脚本变慢 - 如何？

> ID：13215757
> 
> 赞同：2
> 
> 时间：2012-11-04T03:18:29.590
> 
> 标签：php, performance, concurrency

在我的本地服务器 XAMPP 环境中，我正在运行一个测试 PHP 脚本，该脚本需要 20 秒才能运行，但仅使用 2MB 内存和 10% CPU。

当我打开一个新窗口并与第一个窗口同时运行相同的脚本时，两个脚本都需要 30 多秒才能完成。

--脚本是一个简单的for循环，写入mysql DB，InnoDb，200次。

脚本不应该花费相同的时间，而是使用更多的系统资源吗？

如，线性缩放。

为什么是这样？

```
 //the code in all its glory-- Post extends a CRUD class
  // These are the values to be saved:
   $values = array(
  'id' => '',
  'content' => 'This is the VALUE'
                 );
  //And the action. I know-Saving Mysql in a loop is a no-no-- 
    //for demonstration only  
   for($i=0; $i<250; $i++){

   $object = new Post($values); //instantiate the Post Class with values
   $object->create($values);   //save the values to the Db. The end
                           } 
```

20 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:20:29.727

似乎它正在**DB 上创建一个锁**。所以 1 不能在另一个之前完成。

# ember.js - Ember JS：绑定视图循环，以便在内容更改时自动更新

> ID：13215758
> 
> 赞同：1
> 
> 时间：2012-11-04T03:18:59.900
> 
> 标签：ember.js, handlebars.js

我在 Ember 视图模板中运行了一个循环。

在其中一个主要视图中，我遍历控制器内容，然后遍历其中的一些内容：

```
{{#each version in versions}}
  {{#each comment in version.comments}}</p><br/>
    <p>{{comment.text}}</p>
  {{/each}}
{{/each}} 
```

当我在代码中的其他地方创建新评论时`App.Comment.createRecord(content);`，模板不会自动更新。我如何“轻推”它以重新呈现内容？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:32:38.597

当您运行 createRecord 时，版本对象上的 hasMany 关系数组可能不会自动更新。在关系数组中手动​​添加创建的评论对象，模板应该会正确更新。

`version.get("comments").addObject(comment)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:56:42.323

我正在创建一个新评论：

`App.Comment.createRecord(content);`

...实际上我应该使用：

`version.get('comments').createRecord(content);`

通过将范围限定`createRecord`为正在渲染的同一对象，Ember 将自动获取该对象已更改并按预期更新视图。

谢谢！

# ruby-on-rails - 活动记录的平均活动记录

> ID：13215759
> 
> 赞同：0
> 
> 时间：2012-11-04T03:19:30.197
> 
> 标签：ruby-on-rails

好的，所以我正在开发一个书评网站。我想显示某个作者对所有书籍的平均评分。这就是我目前所拥有的，它有效，但必须有更好的方法。

`<% @author.books.each { |book| book.reviews.each { |review| x = x + review}} %>
<% @author.books.each { |book| book.reviews.each { |review| y = y +1}} %>
<%= x/y %>`

我可以 `<% @book.reviews.average(:ratings) %>`

但必须有一个更优雅的选择，类似于

> `<% @author.books.reviews.average(:ratings) %>`

可悲的是，即使可以，上述命令也 `<% @author.books.count %>`不起作用。

使用 Ruby 1.9.2p290 和 rails 3.2.8 非常感谢您提供的任何帮助。

*编辑* 在第一次回答后添加我更新的类文件。
作者.rb

> `class Author < ActiveRecord::Base
> attr_accessible :a1stname, :asurname
> has_many :books
> has_many :reviews :through => :books
> def afull_name
> "#{asurname}, #{a1stname}"
> end
> end`

书本.rb

> `class Book < ActiveRecord::Base
> attr_accessible :author_id, :description, :title
> belongs_to :author
> has_many :reviews
> validates :author_id, presence: true
> end`

现在当我打电话给@author 或 Author.find 我得到

```
syntax error, unexpected ":", expecting keyword_end
          has_many :reviews :through => :books 
                             ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:28:52.800

如果关系是

```
author has_many :books 
book has_many :reviews 
```

添加

```
author has_many :reviews :through => :books #uses a inner join 
```

可以用作

```
author.reviews.average(:ratings) 
```

# javascript - 使用 Function.prototype.call 作为回调

> ID：13215761
> 
> 赞同：3
> 
> 时间：2012-11-04T03:20:00.417
> 
> 标签：javascript, function, callback

我在 Google Chrome 控制台中尝试了以下操作：

```
> function t1(f) { return f(1); }
> function t2() { return this+1; }
> t1(t2.call)
TypeError: object is not a function 
```

为什么这不起作用？有没有办法定义一个函数来代替 Function.prototype.call 在这里可以工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T03:22:40.803

它不起作用，因为当你通过时`t2.call`，你实际上只是在通过`.call`。换句话说，它不记得传递它的对象。

* * *

要完成您想要的，您可以使用`.bind()`.

```
t1(t2.call.bind(t2)) 
```

`t2`这会将函数绑定为 的`this`值`.call`，这意味着您将`.call`像执行此操作一样调用：

```
t2.call 
```

...这就是你想要的。

* * *

`.bind`IE8 及更低版本以及其他一些较旧的浏览器不支持该方法，但在这些情况下您可以实现大部分完整的 shim。

* * *

仅供参考，如果你需要这个很多，你可以绑定`.call`为调用上下文`.bind`来缩短它。

```
var callBind = Function.prototype.bind.bind(Function.prototype.call); 
```

所以现在你有一个`.bind()`以`.call()`bound 作为其调用上下文的函数。当您调用它时，就好像您正在这样做：

```
.call.bind(/* the function */) 
```

所以`callBind()`将返回一个以`the function`bound 作为 的调用上下文的函数`.call`，就像我们在上面所做的那样。所以你会像这样使用它：

```
t1(callBind(t2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T03:23:25.093

为什么要以艰难的方式做事？您不能将回调函数发送`t2`到`t1`并`call()`在内部使用`t1`吗？

```
function t1(f) { 
    return f.call(1); 
}

function t2() { 
    return this+1; 
}

t1(t2); 
```

# c++ - 如何用空值初始化结构的数据成员数组？

> ID：13215762
> 
> 赞同：0
> 
> 时间：2012-11-04T03:20:18.603
> 
> 标签：c++, constructor, c++11, initialization, data-members

这是我的结构（它在数据结构类的私有部分）：

```
 private:
 // this is the main node pointer array to keep
 // track of buckets and its chain.
    struct Node {

  /** member variables */
  unsigned int iCID;
  std::string sVoting_PN;
  std::string sTS[T_LITTRAL];
  unsigned int iCounter[12] = {0};

  /** constructor initializes */
  Node(unsigned int CID, std::string PN, std::string TS, unsigned int counter, unsigned int index ) {
    this->iCID = CID;
    this->sVoting_PN = PN;
    this->sTS[index] = TS;
    this->iCounter[CID] = iCounter[CID] + counter;
}

Node *next;
};
Node* nodeArray[TABLE_SIZE]; 
```

我想将 iCounter 数组的所有值初始化为 0。我该怎么做？

我试过这个

```
 unsigned int iCounter[12] = {0}; 
```

但它给了我警告，无论如何我都必须删除！非常感谢任何想法或帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:34:17.860

它反过来起作用。下一行是问题所在。

```
unsigned int iCounter[12] = {0}; 
```

经过很多不同的尝试，最后我得到了这种初始化方式，没有任何警告和错误。我将此添加到答案部分，以便其他有类似问题的人可以从中获得帮助。

```
struct Node {
Node(): iCID(0), sVoting_PN("") {

  for(unsigned int l=0;l<T_LITTRAL;l++){

    sTS[l]="";
    if(l<AMOUNT_OF_ARTISTS){
      iCounter[l]=0;
    }
  }

}

  //member variables 
  unsigned int iCID;
  std::string sVoting_PN;
  std::string sTS[T_LITTRAL];
  unsigned int iCounter[AMOUNT_OF_ARTISTS]; 

  Node *next;
}; 
```

# c++ - 使用简单的复制构造函数传递一个类对象，但没有输出？

> ID：13215764
> 
> 赞同：8
> 
> 时间：2012-11-04T03:20:42.253
> 
> 标签：c++, c++11, language-lawyer, ellipsis

我用 GCC 和 Clang 尝试了这个程序，但都没有输出

```
#include <iostream>

struct A {
  A(){}

  template<typename T>
  A(T &) {
    std::cout << "copied!";
  }
};

void f(...) { }

int main() {
  A a;
  f(a);
} 
```

根据我的标准阅读，这个程序应该输出`"copied!"`. 谁能告诉我是我弄错了还是这两个编译器中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:00:29.680

您所期望的似乎是标准定义的行为。

模板函数不会阻止创建复制构造函数/赋值运算符。所以模板函数不会阻止一个类被认为是“可简单复制的”。但是，在实际复制它们时，它们*确实*参与了过载解决，因此它们可以进行干预。并且由于`a`在这个例子中是一个非常量 l 值，它`A(A&)`比它更适合签名`A(const A&)`。所以它调用了模板函数。

（虽然你为什么不费心在你的问题中解释所有这些让我感到困惑，因为你显然做了你的研究。）

但是，考虑到这种极端情况有多小，我不会四处依赖这种行为来强制可简单复制的类不被简单复制。

# c# - 不需要另一个调用（+后台工作人员）

> ID：13215765
> 
> 赞同：0
> 
> 时间：2012-11-04T03:20:52.300
> 
> 标签：c#, winforms, backgroundworker, invokerequired

我在堆栈溢出上搜索了调用所需的相关帖子的高低..它帮助我学到了很多..但我有几个问题..不仅与调用所需有关，还与后台工作人员有关..请多多包涵.. :)

我的应用程序做了一些很长的事情，需要在进程中更新 gui（进度条、状态栏、文本框）。我使用了一个线程，但是在更新 UI 时它给出了可怕的跨线程异常。我最近（有点）掌握了正确使用invokerequired的窍门..[[自动化InvokeRequired代码模式](https://stackoverflow.com/questions/2367718/c-automating-the-invokerequired-code-pattern)]..我在这篇文章中使用的代码是：

```
public static partial class CHelper
{
    public static void InvokeIfRequired(this Control oCtrl, MethodInvoker fnAction)
    {
        if (oCtrl.InvokeRequired)
        {
            oCtrl.Invoke(fnAction);
        }
        else
        {
            fnAction();
        }
    }
}

public partial class Form1 : Form
{
    public void Test()
    {
        this.InvokeIfRequired(() =>
        {
            Text = "Window Title";
            button1.Text = "Hello";
        });
        button1.InvokeIfRequired(() =>
        {
            Text = "Window Title";
            button1.Text = "Hello";
        });
    }
} 
```

现在这是我注意到的事情.. this.InvokeIfRequired 和 button1.InvokeIfRequired 都做同样的事情.. 为什么会这样？我期待 button1.InvokeIfRequired 中的 Text 对应于 button1 的 text 属性.. 但它指的是父表单的.. 对我来说这似乎很愚蠢、不直观和错误.. 或者我做错了什么..

* * *

另一个问题..当时我没有掌握invokerequired的窍门，所以我求助于使用后台工作者..并使用进度事件来更新gui..

```
public partial class Form1 : Form
{
    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        backgroundWorker1.ReportProgress(0, "Hello World");
    }
    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        if (e.UserState != null)
        {
            button1.Text = e.UserState as string;
        }
    }
} 
```

到目前为止，它还没有给我带来问题..我想知道这两种方法中哪一种更好？为什么？另外，有没有办法将数据传递给之前的 InvokeIfRequired 函数？

谢谢.. =)

* * *

编辑 01：[对父窗体或目标控件使用 Invoke 有什么区别吗？](https://stackoverflow.com/questions/4154380/is-there-any-difference-between-using-invoke-for-the-parent-form-or-for-the-targ?rq=1).. 是的 form.invoke 和 control.invoke 是一样的.. 但为什么会这样呢？它不直观，并给人以错误的印象..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:30:27.717

好吧，对于 Button 控件来说，这根本不重要。Windows 有一个硬性规则，即一个窗口的所有子窗口**必须**由同一个线程拥有。因此，根据该规则，表单和按钮的 Begin/Invoke() 方法都会将调用编组到正确的线程。

请注意，当您需要更新没有 Handle 属性的组件的属性时，它会变得很尴尬。像 ToolStripButton。现在你**必须**选择另一个控件。所以支持一致性并始终使用表格。

当然，请支持 BackgroundWorker。它有一个诀窍，可以通过限制你射脚的方式来帮助你做到这一点。

# powershell - 在 Visual Studio 包管理器中安装 posh-git

> ID：13215766
> 
> 赞同：5
> 
> 时间：2012-11-04T03:21:06.613
> 
> 标签：powershell, visual-studio-2012, posh-git

我正在尝试将 posh-git 安装到 Visual Studio 包管理器控制台（与 2012 相比），并且在 poshgit 目录中运行 .\install.ps1 并重新加载配置文件时出现以下错误：

```
Register-TabExpansion : A parameter cannot be found that matches parameter name 'Type'.
At D:\posh-git\GitTabExpansion.ps1:218 char:37
+     Register-TabExpansion "git.exe" -Type Command {
+                                     ~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Register-TabExpansion], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Register-TabExpansion 
```

我可以从正常的 powershell 提示符安装 posh-git，没有任何问题，它似乎只在 vs 2012 中遇到。

知道为什么我在 vs only 中遇到此错误以及如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:07:18.093

posh-git 尝试与提供功能的[PowerTab](http://powertab.codeplex.com/)`Register-TabExpansion`集成。NuGet 现在似乎提供了自己的同名函数，但签名不同。我刚刚推出了一个带有修复程序的新版本的 posh-git。

# ios - audioQueue 中的定时事件

> ID：13215767
> 
> 赞同：0
> 
> 时间：2012-11-04T03:21:30.727
> 
> 标签：ios, audio, timer

我创建了一个 iOS 5/iOS 6 应用程序，该应用程序的显示屏可响应用户演奏的音高变化。它使用示例 SpeakHere 代码中的记录功能，但实际上并不保存文件，因为它旨在实时响应。

我现在想扩展这个应用程序以同时响应音高本身和相同音高的持续时间（例如，当相同音高稳定保持最短时间时改变颜色）。我一直在阅读 NSTimer 和 NSDate 函数，它们看起来很简单，还有 AudioTimeStamp 函数，它们显然是基于 C 的，我觉得很困惑。根据其他帖子，似乎 NSTimer 和 NSDate 检查可能会导致显示器对实际音乐表演的实时响应滞后。dispatchAfter 怎么样？我可以期望该块在预定时间执行吗？

我的问题是，什么方法最有可能产生允许我测量 AudioQueue 中特定音高的持续时间并实时连续更新我的显示的预期结果？我需要保存到文件中才能正常工作吗？

我是自学成才的，并且只编程了几个月，所以无论如何我都必须学习很多对我来说是新的 API/C 语言特性。我希望有人能给我指出一个富有成效的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:40:31.193

你肯定会在这里进入非常先进的东西。这里有一些想法：

1.  您的音频处理似乎是最密集的操作。因为这个处理需要是连续的，你*可能*不得不在另一个线程中进行这个处理。通过处理，我的意思是检查音频以确定音高。

2.  一旦你确定了音高，你应该存储它开始的时间。

3.  然后，在主线程中，设置一个连续重复的 NSTimer，并在 NSTimer 的 fire 方法中，从当前日期中减去音高的开始日期以获得经过的时间，作为 NSTimeInterval。

4.  将 NSTimeInterval 发送到您的显示逻辑，以便您可以更新屏幕上的颜色。

需要检查的一些事项：

iOS NSTimer[上的多线程和 Grand Central Dispatch 初学者教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

[使用 NSTimers](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Timers/Articles/usingTimers.html)

希望对您有所帮助！

# html - 链接在网站上不起作用？鼠标不能悬停

> ID：13215775
> 
> 赞同：2
> 
> 时间：2012-11-04T03:23:59.040
> 
> 标签：html, css

网址是：[http ://www.talons-guild.com/forums/](http://www.talons-guild.com/forums/)

请尝试单击左侧显示“主页”的链接——它对我不起作用。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T03:27:49.177

您可以通过从CSS 中删除该`z-index`属性来修复它。`div#header`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:26:04.997

因为带有标头 ID 的 div 位于其顶部，具有更高的 z-index，这实际上会阻止它。给带有类菜单的段落一个更高的 z-index（和一个位置），它就会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T03:30:49.723

Header Div Container 巫婆在文本上包含鸟的大小，并且它也包含 z-index，因此更改项目菜单的大小或 z-index

```
<a style='z-index:10;' href="http://www.talons-guild.com/index.php">Home</a><br /> 
```

问候

# jquery - 结合 .not() 和 parents()

> ID：13215776
> 
> 赞同：0
> 
> 时间：2012-11-04T03:24:13.250
> 
> 标签：jquery

```
<div id="a">
  <div id="b" nopopup>
    <div id="c"> 
      <div id="d"> 
```

`<div>`当鼠标悬停在特定 s 上时，我使用 jQuery .hover() 弹出菜单。一个字符串 $selector 标识哪个`<div>`s 获得悬停。

```
$($selector).hover( 
  // popup the menu
) 
```

这样可行。`<div>`我现在想在祖先具有无价值属性“nopopup”时阻止 .hover() 的操作，就像`<div>`上面的 b 一样。即使 $selector 选择了它们，“nopopup”也会阻止 c 和 d 的任何悬停。悬停候选和阻碍 nopopup 之间的级别数各不相同。

我需要类似的东西：

```
$($selector).not( one of the selected node's parents has the attribute "nopopup" ).hover( 
  // popup the menu
) 
```

那些括号里的内容是什么？或者这是错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:33:10.300

可以使用几种方法。以下假设这`nopopup`是一个类，因为 html 无效

```
$($selector).hover( 
  if( !$(this).closest('.nopopup').length){
       /* run code when nopop isn't ancestor*/
   }
) 
```

或者

```
$($selector).not('.nopopup '+$selector).hover(.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:31:45.570

ID 不能重复使用，请注意更改。

```
​$('.d').not('div[nopopup] .d').hover(function(){
    //logic 
});​​​​​​​​​​​​​​​​​​ 
```

[工作 jsFiddle 演示](http://jsfiddle.net/pYeRv/)

# ruby-on-rails-3 - ubuntu 12 上的 rails 3 出现 SSLv2 错误

> ID：13215779
> 
> 赞同：0
> 
> 时间：2012-11-04T03:24:44.013
> 
> 标签：ruby-on-rails-3, ubuntu-12.04, sslv2

我正在使用红宝石 1.9.2。每当我运行捆绑安装时，我都会收到以下错误。

```
bundle install
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has  occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':    /home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/i686-linux/openssl.so: undefined symbol: SSLv2_method - /home/prasad/.rvm/rubies/ruby-1.9.2- p320/lib/ruby/site_ruby/1.9.1/i686-linux/openssl.so (LoadError)
from /home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/openssl.rb:17:in `<top (required)>'
from /home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/prasad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/https.rb:92:in `<top (required)>'
.... 
```

我试图解决的事情是

1) 在[未定义符号处回答步骤：运行捆绑安装时的 SSLv2_method](https://stackoverflow.com/questions/12759518/undefined-symbol-sslv2-method-when-running-bundle-install)

2)尽管系统没有**x86_64-linux-gnu**文件夹，但bob 在[https://groups.google.com/forum/?fromgroups=#!topic/hobousers/80wBJcS0IZk的步骤](https://groups.google.com/forum/?fromgroups=#!topic/hobousers/80wBJcS0IZk)

 **3) 本博客中的步骤[http://awolf.ru/rails-on-ubuntu-with-rvm/](http://awolf.ru/rails-on-ubuntu-with-rvm/)

我不明白为什么我的一台机器工作正常（从 ubuntu 11.10 升级到 12.04）而另一台出现问题（新安装的 ubuntu 12.04）

**更新：**

rvm在工作机器上使用的openssl版本是0.9.8，而另一个是1.0.1。一些谷歌搜索结果表明 1.0.0 和 1.0.1 不支持 SSLv2，而 0.9.8 支持它。

对上述问题的任何修复将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T11:07:39.307

[由于安全漏洞](https://superuser.com/questions/246074/ssl-whats-the-reason-for-disabling-ssl-v2-support)，某些发行版不支持 SSLv2 。确保您已删除任何以前版本的 RVM：

```
sudo apt-get --purge remove ruby-rvm
sudo rm -rf /usr/share/ruby-rvm /etc/rvmrc /etc/profile.d/rvm.sh 
```

安装 RVM：

```
\curl -L https://get.rvm.io | 
  bash -s stable --ruby --autolibs=enable --auto-dotfiles 
```**

# linux - NSLOOKUP 困惑：它在哪里获取本地信息？

> ID：13215782
> 
> 赞同：1
> 
> 时间：2012-11-04T03:25:30.440
> 
> 标签：linux, dns, nslookup

我`nslookup`在一个非本地地址上执行，比如谷歌。在我的机器上（运行 Ubuntu 12.10），结果如下：

```
Server:     127.0.0.1
Address:    127.0.0.1#53

Non-authoritative answer:
Name:   www.google.com
Address: 173.194.37.52
Name:   www.google.com
Address: 173.194.37.48
Name:   www.google.com
Address: 173.194.37.49
Name:   www.google.com
Address: 173.194.37.50
Name:   www.google.com
Address: 173.194.37.51 
```

我试图理解这一点。我假设“非权威答案”下的地址列表是 google.com 正在使用的所有可能地址，但为什么它会在顶部列出我的本地主机信息？另外，是`nslookup`查询本地机器，还是只查询 DNS 服务器？

我正在查看[此](http://www.windowsnetworking.com/articles_tutorials/using-nslookup-dns-server-diagnosis.html)链接以进行解释`nslookup`，但它适用于 Windows，我不确定我是否了解他们在那里所做的事情。

我也查阅了这些`man`页面，但那些只是告诉我如何使用`nslookup`，而不是它背后的任何“理论”。有人介意`nslookup`按顺序解释查询的确切位置，最好使用示例吗？

我会很感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:28:50.847

它查询适当的值`/etc/resolv.conf`告诉它的任何地方。在这种情况下，它指向本地机器，这很可能充当缓存或代理 DNS 服务器。用于`netstat`找出正在侦听端口 53 的程序。

# computer-science - 数值原始数据类型

> ID：13215786
> 
> 赞同：2
> 
> 时间：2012-11-04T03:26:47.573
> 
> 标签：computer-science

在整数数据类型具有有限范围的大多数编程语言中，负数总是比正数多一个。

例如，在 C 中，一个字节为 -128~127，而一个 int 介于 -2^31 和 2^31-1 之间。一个字节不是-127~128的原因是什么，因为直觉上正数出现的频率更高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:33:05.680

最大的正数是 0111 1111 = 127

```
128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
 0  | 1  |  1 |  1 | 1 | 1 | 1 | 1 | 
```

最大的负字节为 1000 0000 = -128

```
-128| 64 | 32 | 16 | 8 | 4 | 2 | 1 |
 1  | 0  |  0 |  0 | 0 | 0 | 0 | 0 | 
```

在二进制中，MSB（最高有效位 - 前一位）被保留以表示负数。这个概念被称为[二进制补码](https://stackoverflow.com/questions/1049722/what-is-2s-complement)，大多数计算机都将其用作以二进制（以 2 为底）表示法表示整数的一种方式。

要获得更多信息，请查看二进制计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:41:20.013

这是因为 2 的补码表示法。符号位为 0 表示正，1 表示负。因此，使用 4 位作为更简单的示例：

正数：0 为 0000，1 为 0001，以此类推，直到 0111 为 7。

负数：-1 是 1111，-2 是 1110，依此类推，直到 1000 为 -8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T03:45:33.523

（我知道这不能回答你的问题，但它确实解决了你问题中的一个不真实的假设，并且留下评论太长了。）

实际上，C 标准并*没有*定义字节的大小。

唯一可以保证的是`char`能够容纳一个角色。

过去，字节的范围在 5 到 9 位之间，具体取决于 CPU。

确实，大部分的野性已经安定下来，并且大多数现有系统确实使用 8 位字节。

```
// What the C standard says must be true:
sizeof char <= sizeof int <= sizeof long 
```

这就是为什么许多 pre-c99（和 c99）系统包含以下非常有用的 typedef：

```
int8
uint8
int16
uint16
int32
uint32 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T03:47:46.763

> 在整数数据类型具有有限范围的大多数编程语言中，负数总是比正数多一个。

这是因为几乎总是使用 2 的补码。

二进制补码如此受欢迎的原因基本上归结为硬件原因。尤其：

`a - b = a + (~b + 1)`

示例（4 位字）：

`0110 - 0101 = 0110 + 1010 + 1 = 0110 + 1011 = 0001`（请注意，加法步骤本质上是无符号加法——在这些步骤中没有对符号位进行特殊处理）

基本上，在硬件领域，您可以将初始进位设置为 1 来更改`a - b`为加法`a + ~b + 1`。这可能是一个非常有用的技巧。减法不需要特别注意，这意味着它不需要自己的电路。

# java - 传递 3 个双打和一个字符串，但我的最后两个变量被类忽略

> ID：13215788
> 
> 赞同：1
> 
> 时间：2012-11-04T03:27:05.810
> 
> 标签：java, string, constructor

为什么我的构造函数不应用变量？：

导入 java.awt.geom.Point2D；

公共类 Waypoint 扩展 Point2D.Double{

```
private double s;
private String street;

public Waypoint(double x, double y, double s, String street) {
    super(x,y);
    s=9;
    street="Street";
}
   } 
```

这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:30:44.107

改变

```
import java.awt.geom.Point2D;

public class Waypoint extends Point2D.Double{

    private double s;
    private String street;

    public Waypoint(double x, double y, double s, String street) {
        super(x,y);
        s=9;
        street="Street";
    } 
```

到

```
import java.awt.geom.Point2D;

public class Waypoint extends Point2D.Double{

    private double s;
    private String street;

    public Waypoint(double x, double y, double s, String street) {
        super(x,y);
        this.s = s;
        this.street = street;
    } 
```

您没有使用传递给构造函数的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:31:08.130

这些线...

```
s=9;
street="Street"; 
```

...将值分配给与构造函数的参数相对应的局部变量，而您希望将它们分配给字段，如下所示：

```
this.s = s;
this.street = street; // or "Street", if you prefer 
```

前缀使编译器明白您指的`this.`是字段，而不是同名的局部变量。

# algorithm - 使用素数比较字谜

> ID：13215789
> 
> 赞同：8
> 
> 时间：2012-11-04T03:27:07.180
> 
> 标签：algorithm, math, numbers, primes

存在试图查看两个唯一字符串是否是彼此的字谜的问题。我考虑的第一个解决方案是对两个字符串进行排序，看看它们是否相等。

我一直在考虑另一种解决方案，我想讨论一下是否可行。

这个想法是为每个字符分配一个数值并将其汇总，这样一组唯一的字符将产生一个唯一的值。当我们测试字谜时，我们不介意“asdf”和“adsf”的校验和是否相同——事实上，我们要求它是这样的。但是字符串“aa”和“b”的校验和不应该相等。

我正在考虑将前 52 个素数分配给字母“a”到“z”，然后是“A”到“Z”（假设我们只有字母）。

如果 52 个素数集合中的任何两个或多个素数之和可能导致该集合中存在另一个素数，则上述方案将失效。

我的疑问是：-

1.  是否有任何编号方案可以满足我的要求？
2.  我不确定所涉及的数学；是否有可能证明/是否有任何证据表明前 52 个素数的集合中的两个或多个素数之和至少有一个值存在于同一集合中？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-04T03:29:58.103

使用乘法而不是加法。素数是“乘法唯一”，但不是“加法唯一”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T03:39:10.390

一种稍微笨拙的方法需要最长字符串 max_len 的长度（或任何特定字符的最大数量，以获得更好的性能）。鉴于此，您的哈希可能看起来像

```
number_of_a*max_len^51 + number_of_b*max_len^50 + ... + number_of_Z*max_len^0 
```

如前所述，如果您更喜欢使用素数，乘法会更好。

当然，您可以通过使用包含 52 个值的数组来实现相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T05:47:02.487

您试图通过比较两个 n 位数字的相等性来比较两个排序字符串的相等性。只要你的字符串足够长，有超过 2^n 个可能的排序字符串，你肯定会有两个不同的排序字符串产生相同的 n 位数。通过[http://en.wikipedia.org/wiki/Birthday_problem](http://en.wikipedia.org/wiki/Birthday_problem)，您可能会在此之前遇到问题，除非（与素数相乘）有一些定理说您不能有两个不同的字符串相同的号码。

在某些情况下，您可以将此想法用作快速的第一次相等性检查来节省时间，这样您只需要比较已排序的字符串（如果它们的数字匹配）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T03:36:05.697

不要使用素数 - 素数属性与除法有关，而不是总和。但是，这个想法很好，您可以使用位集，但您会遇到另一个问题 - 重复字母（素数也有同样的问题，1+1+1=3）。因此，您可以使用整数集，即字母频率为 1...26 的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-12T05:40:25.663

到目前为止，我不了解尝试示例的复杂性，因此我编写了一个简单的 Python 3 示例：

```
from operator import mul
from functools import reduce

TO_PRIME = dict( \
    a=2, b=3, c=5, d=7, e=11, \
    f=13, g=17, h=19, i=23, j=29, \
    k=31, l=37, m=41, n=43, o=47, \
    p=53, q=59, r=61, s=67, t=71, \
    u=73, v=79, w=83, x=89, y=97, z=101 \
    )

def anagram_product(string):
    return reduce(mul, (TO_PRIME[char.lower()] for char in string if char.isalpha()), 1)

def anagram_check(string_1, string_2):
    return anagram_product(string_1) == anagram_product(string_2)

# True examples

print(repr('Astronomer'), repr('Moon starer'), anagram_check('Astronomer', 'Moon starer'))

print(repr('The Morse code'), repr('Here come dots'), anagram_check('The Morse code', 'Here come dots'))

# False examples (near misses)

print(repr('considerate'), repr('cure is noted'), anagram_check('considerate', 'cure is noted'))

print(repr('debit card'), repr('bed credit'), anagram_check('debit card', 'bed credit')) 
```

**输出**

```
> python3 test.py
'Astronomer' 'Moon starer' True
'The Morse code' 'Here come dots' True
'considerate' 'cure is noted' False
'debit card' 'bed credit' False
> 
```

下一步是将其从乘积变为总和。我想的一种方法是将字母映射到无理数而不是素数。这些无理数必须是一种不会通过任何加法变得有理的类型。这是一个粗略的例子：

```
from math import pi

ROUND = 4

TO_IRRATIONAL = {letter: pi ** n for n, letter in enumerate('abcdefghijklmnopqrstuvwxyz')}

def anagram_sum(string):
    return round(sum(TO_IRRATIONAL[char.lower()] for char in string if char.isalpha()), ROUND)

def anagram_check(string_1, string_2):
    return anagram_sum(string_1) == anagram_sum(string_2)

# True examples

print(repr('Astronomer'), repr('Moon starer'), anagram_check('Astronomer', 'Moon starer'))

print(repr('The Morse code'), repr('Here come dots'), anagram_check('The Morse code', 'Here come dots'))

# False examples (near misses)

print(repr('considerate'), repr('cure is noted'), anagram_check('considerate', 'cure is noted'))

print(repr('debit card'), repr('bed credit'), anagram_check('debit card', 'bed credit')) 
```

**输出**

```
> python3 test2.py
'Astronomer' 'Moon starer' True
'The Morse code' 'Here come dots' True
'considerate' 'cure is noted' False
'debit card' 'bed credit' False
> 
```

我并不是说这是一组*最优*的无理数，只是对这个概念的粗略演示。（请注意，我需要使用`round()`它来完成这项工作，这指向了一个设计缺陷——无理数的有限表示。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-11T12:18:09.490

```
def primes(n):
    array = [i for i in range(2,n+1)]
    p = 2

    while p <= n:
        i = 2*p
        while i <= n:
            array[i-2] = 0
            i += p
        p += 1

    return [num for num in array if num > 0]

def anagram(a):
    # initialize a list
    anagram_list = []
    for i in a: 
        for j in a: 
            if i != j and (sorted(str(i))==sorted(str(j))):
                anagram_list.append(i)
    return anagram_list

if __name__ == '__main__':
    print("The Prime Numbers are:\n",primes(1000),"\n")
    a = primes(1000)
    print("Prime Numbers between 0 to 100:")
    T100 = a[:25]
    print(T100,"\n")
    print("The Anagram elements from 0 to 100 are listed :", anagram(T100),"\n")
    print("Prime Numbers between 101 to 200:")
    T200 = a[25:46]
    print(T200,"\n")
    print("The Anagram elements from 101 to 200 are listed :",anagram(T200),"\n")
    print("Prime Numbers between 201 to 300:")
    T300 = a[46:62]
    print(T300,"\n")
    print("The Anagram elements from 201 to 300 are listed :",anagram(T300),"\n")
    print("Prime Numbers between 301 to 400:")
    T400 = a[62:78]
    print(T400,"\n")
    print("The Anagram elements from 301 to 400 are listed :",anagram(T400),"\n")
    print("Prime Numbers between 401 to 500:")
    T500 = a[78:95]
    print(T500,"\n")
    print("The Anagram elements from 401 to 500 are listed :",anagram(T500),"\n")
    print()
    print("Prime Numbers between 501 to 600:")
    T600 = a[95:109]
    print(T600,"\n")
    print("The Anagram elements from 501 to 600 are listed :",anagram(T600),"\n")
    print("Prime Numbers between 601 to 700:")
    T700 = a[109:125]
    print(T700,"\n")
    print("The Anagram elements from 601 to 700 are listed :",anagram(T700),"\n")
    print("Prime Numbers between 701 to 800:")
    T800 = a[125:139]
    print(T800,"\n")
    print("The Anagram elements from 701 to 800 are listed :",anagram(T800),"\n")
    print()
    print("Prime Numbers between 801 to 900:")
    T900 = a[139:154]
    print(T900,"\n")
    print("The Anagram elements from 801 to 900 are listed :",anagram(T900),"\n")
    print("Prime Numbers between 901 to 1000:")
    T1000 = a[154:168]
    print(T1000,"\n")
    print("The Anagram elements from 901 to 1000 are listed :",anagram(T1000),"\n") 
```

输出：

```
The Prime Numbers are:
 [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997] 

Prime Numbers between 0 to 100:
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97] 

The Anagram elements from 0 to 100 are listed : [13, 17, 31, 37, 71, 73, 79, 97] 

Prime Numbers between 101 to 200:
[101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199] 

The Anagram elements from 101 to 200 are listed : [113, 131, 137, 139, 173, 179, 193, 197] 

Prime Numbers between 201 to 300:
[211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293] 

The Anagram elements from 201 to 300 are listed : [239, 293] 

Prime Numbers between 301 to 400:
[307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397] 

The Anagram elements from 301 to 400 are listed : [313, 331, 337, 373, 379, 397] 

Prime Numbers between 401 to 500:
[401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499] 

The Anagram elements from 401 to 500 are listed : [419, 491] 

Prime Numbers between 501 to 600:
[503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599] 

The Anagram elements from 501 to 600 are listed : [] 

Prime Numbers between 601 to 700:
[601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691] 

The Anagram elements from 601 to 700 are listed : [613, 619, 631, 691] 

Prime Numbers between 701 to 800:
[701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797] 

The Anagram elements from 701 to 800 are listed : [] 

Prime Numbers between 801 to 900:
[809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887] 

The Anagram elements from 801 to 900 are listed : [] 

Prime Numbers between 901 to 1000:
[907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997] 

The Anagram elements from 901 to 1000 are listed : [919, 991] 
```

如果您是 python 开发人员，您也可以根据需要重新构建它。如果是 Python 新手，请学习 List 的概念。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-21T15:16:21.230

这是使用素数方式的 c# 实现：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

namespace Anag
{
    class Program
    {
        private static int[] primes100 = new int[]
                                            {
                                                3, 7, 11, 17, 23, 29, 37,
                                                47, 59, 71, 89, 107, 131,
                                                163, 197, 239, 293, 353,
                                                431, 521, 631, 761, 919,
                                                1103, 1327, 1597, 1931,
                                                2333, 2801, 3371, 4049,
                                                4861, 5839, 7013, 8419,
                                                10103, 12143, 14591, 17519,
                                                21023, 25229, 30293, 36353,
                                                43627, 52361, 62851, 75431,
                                                90523, 108631, 130363,
                                                156437, 187751, 225307,
                                                270371, 324449, 389357,
                                                467237, 560689, 672827,
                                                807403, 968897, 1162687,
                                                1395263, 1674319, 2009191,
                                                2411033, 2893249, 3471899,
                                                4166287, 4999559, 5999471,
                                                7199369
                                            };

        private static int[] getNPrimes(int _n)
        {
            int[] _primes;

            if (_n <= 100)
                _primes = primes100.Take(_n).ToArray();
            else
            {
                _primes = new int[_n];

                int number = 0;
                int i = 2;

                while (number < _n)
                {

                    var isPrime = true;
                    for (int j = 2; j <= Math.Sqrt(i); j++)
                    {
                        if (i % j == 0 && i != 2)
                            isPrime = false;
                    }
                    if (isPrime)
                    {
                        _primes[number] = i;
                        number++;
                    }
                    i++;
                }

            }

            return _primes;
        }

        private static bool anaStrStr(string needle, string haystack)
        {
            bool _output = false;

            var needleDistinct = needle.ToCharArray().Distinct();

            int[] arrayOfPrimes = getNPrimes(needleDistinct.Count());

            Dictionary<char, int> primeByChar = new Dictionary<char, int>();
            int i = 0;
            int needlePrimeSignature = 1;

            foreach (var c in needleDistinct)
            {
                if (!primeByChar.ContainsKey(c))
                {
                    primeByChar.Add(c, arrayOfPrimes[i]);

                    i++;
                }
            }

            foreach (var c in needle)
            {
                needlePrimeSignature *= primeByChar[c];
            }

            for (int j = 0; j <= (haystack.Length - needle.Length); j++)
            {
                var result = 1;
                for (int k = j; k < needle.Length + j; k++)
                {
                    var letter = haystack[k];
                    result *= primeByChar.ContainsKey(letter) ? primeByChar[haystack[k]] : 0;
                }

                _output = (result == needlePrimeSignature);
                if (_output)
                    break;
            }

            return _output;
        }

        static void Main(string[] args)
        {
            Console.WriteLine("Enter needle");
            var _needle = Console.ReadLine(); ;
            Console.WriteLine("Enter haystack");
            var _haystack = Console.ReadLine(); 

            Console.WriteLine(anaStrStr(_needle, _haystack));
            Console.ReadLine();

        }
    }
    } 
```

# java - 显示每个时区的时间

> ID：13215801
> 
> 赞同：0
> 
> 时间：2012-11-04T03:28:53.403
> 
> 标签：java, timezone

我正在尝试显示每个时区的当前时间，如下所示，但它没有按预期打印出时间。

```
long currentLong = System.currentTimeMillis();
TimeZone.setDefault(TimeZone.getTimeZone("EST"));
System.out.println("EST=="+ new java.util.Date(currentLong).toString());

TimeZone.setDefault(TimeZone.getTimeZone("CST"));
System.out.println("CST=="+ new java.util.Date(currentLong).toString());

TimeZone.setDefault(TimeZone.getTimeZone("MST"));
System.out.println("MST=="+ new java.util.Date(currentLong).toString());

TimeZone.setDefault(TimeZone.getTimeZone("PST"));
System.out.println("PST=="+ new java.util.Date(currentLong).toString());

TimeZone.setDefault(TimeZone.getTimeZone("AST"));
System.out.println("AKST=="+ new java.util.Date(currentLong).toString());

TimeZone.setDefault(TimeZone.getTimeZone("HST"));
System.out.println("HAST=="+ new java.util.Date(currentLong).toString()); 
```

当我执行程序时，我得到了这个：

```
EST==Sat Nov 03 22:24:02 EST 2012
CST==Sat Nov 03 22:24:02 CDT 2012
MST==Sat Nov 03 20:24:02 MST 2012
PST==Sat Nov 03 20:24:02 PDT 2012
AKST==Sat Nov 03 19:24:02 AKDT 2012
HAST==Sat Nov 03 17:24:02 HST 2012 
```

我想知道为什么 CST 的时间与 EST 和 MST 和 PST 相同。

有人可以告诉我问题是什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:31:50.530

不要使用`TimeZone.setDefault()`，使用`Calendar.getInstance(TimeZone tz)`and `Calendar.setTimeZone()`。`Date`相当过时，`Calendar`好多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:24:56.200

问题是，您使用了错误的类。当然，您永远不应该设置默认时区。

首先，默认时区是底层操作系统的时区。在桌面应用程序中使用它是可以的，但它不会为您提供 Web 应用程序的有效时间。在 Web 应用程序中，最好询问用户他/她的首选时区是什么。

现在，如果你想转换时区，其实很简单，但是你必须使用正确的类。正确的类是[DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)：

```
Date now = new Date();
// you need to detect locale somehow
// this way is valid with desktop applications only
Locale locale = Locale.getDefault(Locale.Category.FORMAT);
DateFormat df = DateFormat.getDateTimeInstance(
    DateFormat.DEFAULT, DateFormat.DEFAULT, locale);
TimeZone est = TimeZone.getTimeZone("EST");
TimeZone mst = TimeZone.getTimeZone("MST");

df.setTimeZone(est);
System.out.println(df.format(now));
df.setTimeZone(mst);
System.out.println(df.format(now)); 
```

至于时区是否相同，您可以随时要求它们是否相等：

```
System.out.println(est.equals(mst)); 
```

这些时区可能不同，但当前偏移量相同。您可以查询偏移量是[这样](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getOffset%28long%29)的：

```
int estOffset = est.getOffset(now); 
```

# java - Java 中更高效的 3 if 语句

> ID：13215803
> 
> 赞同：0
> 
> 时间：2012-11-04T03:29:27.900
> 
> 标签：java, if-statement

任何人都可以提出一种更有效的方法来编写我编写的以下方法。我是java编程新手，所以我觉得我可能不知道一些东西。主要是，我想知道一种更好的方法来编写我想在每个参数“突触”上运行的三个 if 语句。谢谢！

```
public void addSynapse(Synapse synapse)
{
    Synapse newSynapse = new Synapse(synapse.getInputCell());
    this.synapses.add(newSynapse);

    if (synapse.getConnectedState())
    {
        this.connectedSynapses.add(newSynapse);
    }

    if (synapse.getActiveState())
    {
        this.activeSynapses.add(newSynapse);
    }

    if (synapse.getPreviousActiveState())
    {
        this.previousActiveSynapses.add(newSynapse);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:23:41.057

您可以创建一个枚举 SynapseState，它象征着类 Synapse 的状态。将状态信息嵌入枚举的优点是您可以在 switch 语句中使用它。任何与 Synapse 状态相关的不变信息都可以包含在带有抽象方法的枚举中。检查下面的示例我从问题示例代码中可以得到的任何信息中所做的事情

```
enum SynapseState {
    CONNECTED(0) {
        @Override
        List<StateParameter> getStateParameters() {
            return null;
        }
    }, ACTIVE(1) {
        @Override
        List<StateParameter> getStateParameters() {
            return null;
        }
    }, PREVIOUS_ACTIVE(2) {
        @Override
        List<StateParameter> getStateParameters() {
            return null;
        }
    };

    private int value;

    private SynapseState(int value) {
        this.value = value;
    }
    abstract List<StateParameter> getStateParameters();

};

class SynapseMachine{

    List<Synapse> connectedSynapses;
    List<Synapse> activeSynapses;
    List<Synapse> previousActiveSynapses;
    List<Synapse> synapses;

    public void addSynapse(Synapse synapse)
    {
        Synapse newSynapse = new Synapse(synapse.getInputCell());
        this.synapses.add(newSynapse);

        switch(synapse.getState()){
        case CONNECTED:
             this.connectedSynapses.add(newSynapse);
            break;
        case ACTIVE:
            this.activeSynapses.add(newSynapse);
            break;
        case PREVIOUS_ACTIVE:
            this.previousActiveSynapses.add(newSynapse);

            break;
         default:   
             throw new IllegalStateException();
        }
    }   
}

class Synapse{
    public Synapse(Object o){}

    SynapseState getState(){
        // TODO Auto-generated method stub
        return null;    
    }

    public Object getInputCell() {
        // TODO Auto-generated method stub
        return null;
    }
}

class StateParameter{

} 
```

# spring - 通过参与 Springsource 项目获得收益

> ID：13215805
> 
> 赞同：0
> 
> 时间：2012-11-04T03:29:34.920
> 
> 标签：spring, open-source, springsource

通过参与 Springsource 项目（通过贡献代码、提交拉取请求、测试功能等）可以赚取任何收入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:39:07.657

如果您是 VMWare 员工，则可以。

如果你是一个普通人，你可能（间接地）可以。作为一个开源贡献者是好的雇主正在寻找的东西，并且可以帮助你获得更好的工作/薪水。

# sql - 我可以在创建表时将位字段的值替换为文本吗

> ID：13215811
> 
> 赞同：0
> 
> 时间：2012-11-04T03:31:13.547
> 
> 标签：sql, replace, bit

我试过但不能在 CREATE TABLE 代码中使用 CASE WHEN 将 1 和 0 替换为文本。有人可以帮我解决它。非常感谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:22:41.400

您没有指定您所在的数据库平台，但在 SL Server 中，可以使用以下方法：

```
CREATE TABLE Table1
(
  ID int 
  , name varchar(50)
  , YesNo bit
  , TrueFalse AS 
    (
      CASE WHEN YesNo = 1 Then 'True'
      ELSE 'False'
      END
    )      
); 
```

在这里查看小提琴：[http ://sqlfiddle.com/#!3/35d18/3](http://sqlfiddle.com/#!3/35d18/3)

# matlab - 确定可用于 matlabpool 的最大处理器数（MATLAB Parallel Toolbox）

> ID：13215812
> 
> 赞同：3
> 
> 时间：2012-11-04T03:31:19.130
> 
> 标签：matlab, parallel-processing

我目前正在 MATLAB 中编写一些代码，这些代码使用`parfor`循环来加速一些繁琐的计算。

我的问题是代码将在远程集群上运行，并且可以在 4 核、8 核或 12 核机器上运行（我不会提前知道哪一台）...

我基本上需要一个代码片段，它允许 MATLAB 确定可以在 matlabpool 中使用的最大内核数。如果我们调用这个变量`maxcores`，我可以继续使用

`matlabpool('open',maxcores)`.

这样我就可以确保我正在使用所有可用的内核。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T03:37:18.673

您可以通过 获得机器上的核心数量`feature('numCores')`，这是无证的，但似乎不太可能中断。（[来源](http://www.mathworks.com/matlabcentral/newsreader/view_thread/154551)）

有人声称`getNumberOfComputationalThreads`自 R2007a 起也可以使用，但它不适用于我的 R2012a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-02T16:04:55.967

除了 Dougal 的回应，我发现`getenv('NUMBER_OF_PROCESSORS')`返回了我的 Windows 系统上的线程数。

# javascript - javascript（nodejs）while循环错误

> ID：13215822
> 
> 赞同：11
> 
> 时间：2012-11-04T03:32:40.450
> 
> 标签：javascript, node.js

在 nodejs cli 中运行以下代码：

```
var my_function = function() {                                                                                              
    var next_value = 1
      , value = undefined
      , difference = undefined                                                                                              
      , prev_difference = undefined                                                                                         

    while ((typeof prev_difference === 'undefined') || (prev_difference > 0)) {                               
        value = next_value 
        next_value = 2
        difference = next_value - value 
        if (difference > prev_difference) {                                                                                 
              throw new Error('Diminishing')
        }                                                                                                                   
        prev_difference = 0 
    }                                                                                                                       
    return next_value 
}              

for (var i = 0; i< 300; i++) { console.log(i); console.log(my_function()) } 
```

在循环的第 282 次迭代中，我开始获取值“1”而不是“2”。不能为我的生活明白为什么。这段代码是我一直在处理的其他代码的缩减，因此在循环中看似不必要的 if 语句。有几种方法可以更改此代码，以免执行路径被搞砸，但我想了解为什么它会与当前设置中断。

另外，如果您有任何工具提示可以帮助我将来调试类似的东西，我将非常感激。在大多数情况下，我使用 console.log 来缩小范围。

node.js 版本 v0.8.6。在 Mac OSX 版本 10.7.5 上运行。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T09:00:02.597

如果您取出 IF 语句就可以了，每次迭代它只会返回“2”。变量 prev_difference 每次都是“未定义”，这似乎会导致问题。

# c++ - 数独递归回溯，过早取消递归

> ID：13215823
> 
> 赞同：4
> 
> 时间：2012-11-04T03:32:51.003
> 
> 标签：c++, recursion, sudoku, backtracking

所以我正在用 C++ 编写一个数独求解器，但遇到了一些障碍。下面是我的解决板代码。它适用于拼图的前 3 行，但在到达第 4 行末尾时不再递归。查看 gdb 上的代码，它到达第 4 行的末尾，回溯到第 6 列，尝试然后取消递归到最后。

关于代码的其他一些注释是保持数独板从 1,1 而不是 0,0 开始的矩阵。因此，最初调用solveBoard 时，参数为(1, 1, 0)。我还附加了 setCell 和 checkConflicts 函数，以便更深入地了解那里。我有三个向量 rowConf、colConf 和 squConf 来存储已经放置在相应行、列或正方形中的值。我已经在这里待了几个小时，无法让它越过第三排。非常感谢任何帮助。谢谢！

编辑：添加 clearCell()

```
bool board::solveBoard(int i, int j, int count)
{

    if (j > 9)
    {
        j = 1;
        i++;

        printBoard();
        if (isSolved())
        {
            printBoard();
            cout <<"The Board has been solved!" <<endl
                 <<" The number of recursive calls was: " <<count <<endl;
            return true;
        }
     }

     if (isBlank(i, j))
     {
         for (int n = 1; n < 10; n++)
         {
             if (setCell(i, j, (char)n + '0'))
             {
                 if (solveBoard(i, j + 1, count + 1))
                 {
                     return true;
                 }
              }
          }
      }
      else
      {
          return (solveBoard(i, j + 1, count + 1));
      }

      clearCell(i, j);
      return false;
}

bool board::setCell(int i, int j, char val)
{
    int intVal;

    intVal = atoi(&val);

    if (i >= 1 && i <= BoardSize && j >= 1 && j <= BoardSize &&
        intVal >= 1 && intVal <= BoardSize)
    {
        if (!(checkConflicts(intVal, i, j, squareNumber(i, j))))
        {
        return false;
        }

        value[i][j] = intVal;

        // Set flags of the conflicts
        rowConf[i][intVal] = true;
        colConf[j][intVal] = true;
        squConf[squareNumber(i, j)][intVal] = true;

        return true;
    }
    else
    {
        throw rangeError("bad value in setCell");
    }
}

bool board::checkConflicts(int val, int i, int j, int k)
{
    if (i < 1 && i > BoardSize && j < 1 && j > BoardSize &&
        k < 1 && k > BoardSize && val < 1 && val > BoardSize)
    {
        throw rangeError("bad value in checkConflicts()");
    }

    if (rowConf[i][val] || colConf[j][val] || squConf[k][val])
    {
        return false;
    }
    else
    {
        return true;
    }
}

Initial Board:
 -----------------------------
| 3       |    8    |          -----------------------------
|         | 7       |       5  -----------------------------
| 1       |         |          ----------------------------- 
 -----------------------------
|         |         | 3  6     -----------------------------
|       2 |       4 |          -----------------------------
|    7    |         |          -----------------------------
 -----------------------------
|         |    6    | 1  3     -----------------------------
|    4  5 | 2       |          -----------------------------
|         |         | 8        -----------------------------
 -----------------------------

Final Output:
 -----------------------------
| 3  2  4 | 1  8  5 | 6  7  9  -----------------------------
| 6  8  9 | 7  2  3 | 4  1  5  -----------------------------
| 1  5  7 | 4  9  6 | 2  8  3  -----------------------------
 -----------------------------
|         |         | 3  6     -----------------------------
|       2 |       4 |          -----------------------------
|    7    |         |          -----------------------------
 -----------------------------
|         |    6    | 1  3     -----------------------------
|    4  5 | 2       |          -----------------------------
|         |         | 8        -----------------------------
 -----------------------------

void board::clearCell(int i, int j)
{
    int intVal;

    if (i >= 1 && i <= BoardSize && j >= 1 && j <= BoardSize)
    {
        if (value[i][j] != -1)
        {
            intVal = value[i][j];
            rowConf[i][intVal] = false;
            colConf[j][intVal] = false;
            squConf[squareNumber(i, j)][intVal] = false;
            value[i][j] = -1;
         }
    }
    else
    {
        throw rangeError("bad value in setCell");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:54:10.303

您的问题很可能在这里：

```
if (isBlank(i, j))
 {
     for (int n = 1; n < 10; n++)
     {
         if (setCell(i, j, (char)n + '0'))
         {
             if (solveBoard(i, j + 1, count + 1))
             {
                 return true;
             }
          }
      }
  } 
```

不知何故，它正在经历这一部分，这就是为什么它最终没有经历`else`，但由于它之前没有返回，所以它被卡住了。

这需要更多的调试，但这里有一个可能导致解决方案的想法：

```
if (isBlank(i, j))
{
    for (int n = 1; n < 10; n++)
    {
        if (setCell(i, j, (char)n + '0'))
        {
            if (solveBoard(i, j + 1, count + 1))
            {
                return true;
            } else {
                echo 'Looks like it ended on the farthest-level..';
          } 
      } else {
          echo 'Looks like it ended on the second-farthest level.';
      }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T00:48:02.717

该`atoi`函数需要一个*字符串*作为参数，即以字符`'\0'`ASCII NUL 结尾的字符数组。你给一个参数作为一个字符的指针（相当于一些字符数组），但**不保证**它是以零结尾的。请替换`intVal = atoi(&val);`为`intVal = (int)val - '0';`

你`checkConflicts`应该有`||`运算符而不是`&&`第一个`if`。

这些可能不是错误的原因，但肯定需要更正。

# html - 调整浏览器大小时导航栏未调整大小

> ID：13215831
> 
> 赞同：0
> 
> 时间：2012-11-04T03:33:35.010
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap, navbar

我正在做 ruby​​ rails devloping ，使用来自 twitter bootstrap 的导航栏

但是如果我想减小窗口大小，我的导航栏不会在 Firefox 上调整大小。

谁知道怎么修它？？

我的代码：

```
%body
  %header.navbar.navbar-fixed-top
    %nav.navbar-inner
      .container
        = render 'mynavbar' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:00:16.380

确保包含 responsive.css 文件并在 html 中使用 .container-fluid 类。

见：http: [//twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

# mysql - 根据子查询的结果更新表中的多行

> ID：13215832
> 
> 赞同：5
> 
> 时间：2012-11-04T03:33:42.843
> 
> 标签：mysql, group-by, mysql-error-1064

我有以下查询：

```
SELECT 
  stat.mcq_id, 
  ROUND( stat.total_score / stat.num_taken, 2 ) AS avg_score
    FROM (
      SELECT 
        user_mcq.mcq_id, 
        SUM( score ) AS total_score, 
        COUNT( user_mcq.id ) AS num_taken
      FROM user_mcq
      INNER JOIN user ON ( user.id = user_mcq.user_id ) 
      WHERE user.level_id =3
      AND user_mcq.is_complete =1
      GROUP BY user_mcq.mcq_id
    ) AS stat 
```

这会产生：

```
mcq_id  avg_score
1       5.75
2       9.22
6       8.81
7       8.94
14      7.00
16      9.46 
```

我想用它来更新另一个名为`mcq`using`mcq_id`从结果中匹配的表`mcq.id`

我尝试了以下方法，但没有成功：

```
UPDATE mcq SET mcq.avg_score = stats.avg_score FROM (
  SELECT 
  stat.mcq_id, 
  ROUND( stat.total_score / stat.num_taken, 2 ) AS avg_score
    FROM (
      SELECT 
        user_mcq.mcq_id, 
        SUM( score ) AS total_score, 
        COUNT( user_mcq.id ) AS num_taken
      FROM user_mcq
      INNER JOIN user ON ( user.id = user_mcq.user_id ) 
      WHERE user.level_id =3
      AND user_mcq.is_complete =1
      GROUP BY user_mcq.mcq_id
    ) AS stat
) AS stats
WHERE mcq.id = stats.mcq_id; 
```

这给出了：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM ( SELECT stat.mcq_id, ROUND( stat.total_score / stat.num_taken, 2 ) A' at line 1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T03:41:46.957

我认为您可以将连接与able表一起使用并更新列如下：

```
 UPDATE mcq, 
        (SELECT 
            stat.mcq_id, 
            ROUND( stat.total_score / stat.num_taken, 2 ) AS avg_score
             FROM (SELECT 
                  user_mcq.mcq_id, 
                  SUM(score ) AS total_score, 
                  COUNT( user_mcq.id ) AS num_taken
                  FROM user_mcq
                  INNER JOIN user ON ( user.id = user_mcq.user_id ) 
                  WHERE user.level_id =3
                  AND user_mcq.is_complete =1
                  GROUP BY user_mcq.mcq_id
             ) AS stat
       ) AS stats
SET mcq.avg_score = stats.avg_score 
WHERE mcq.mcq_id = stats.mcq_id; 
```

# python - 访问 numpy 数组中的每个元素

> ID：13215836
> 
> 赞同：0
> 
> 时间：2012-11-04T03:35:07.833
> 
> 标签：python, image-processing, numpy, pygame

我试图通过查看相邻像素从 alpha 通道掩码中删除杂散的白色像素，但一直在获取 TypeEror: 'numpy.ndarray' object is not callable 我使用 pygame.surfarray: 创建了一个数组： `alphachannel3d = pygame.surfarray.pixels3d(alphachannel)` 然后尝试逐步通过它并将像素值从白色更改为黑色： `if (alphachannel3d[x] == (0, 0, 0)) & (alphachannel3d[x + 3] == (255, 255, 255)) & (alphachannel3d[x -3]==(255, 255, 255)): alphachannel3d[x] = (255, 255, 255)`

这是循环：

```
x=1

while 1:

  count = x
  print 'count is', count

  print 'waiting 5 seconds'
  pygame.time.wait(5000)

  img = cam.get_image()

  imgarray = pygame.PixelArray(img)

  alphachannelarray = basearray.compare(imgarray, distance=0.09, weights=(0.01, 0.01, 0.01))

  alphachannel = alphachannelarray.make_surface()

  alphachannel3d = pygame.surfarray.pixels3d(alphachannel)

  if (alphachannel3d[x] == (0, 0, 0)) & (alphachannel3d[x + 3] == (255, 255, 255)) & (alphachannel3d[x -3]==(255, 255, 255)):
    alphachannel3d[x] = (255, 255, 255)

  alphachannel = pygame.surfarray.make_surface(alphachannel3d)
  srfcScreen.blit(alphachannel, (0,0))
  print 'screen blitted'

  pygame.display.flip()
  print 'display flipped'

  x = x+1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:13:40.883

根据您的评论，我将给出以下推测性答案（未经测试）：

```
if np.all(alphachannel3d[x] == (0, 0, 0)) & np.all(alphachannel3d[x + 3] == (255, 255, 255)) & np.all(alphachannel3d[x -3]==(255, 255, 255)):
    alphachannel3d[x] = (255, 255, 255) 
```

# java - 进口声明声明

> ID：13215839
> 
> 赞同：-1
> 
> 时间：2012-11-04T03:35:41.200
> 
> 标签：java, import, compilation, packages

> **可能重复：**
> [Import package.* vs import package.SpecificType](https://stackoverflow.com/questions/187453/import-package-vs-import-package-specifictype)

我想知道导入类声明中 java.util.* 和 java.util.Date 之间的区别。一些开发人员更喜欢 java.util.*，但其他开发人员更喜欢为每个类声明一个特定的导入声明。我知道这是一种编码风格，这有点微不足道，但我很好奇是否有任何性能差异或利弊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:39:21.233

执行 import pkg.* 与 import pkg.class 没有性能或内存分配差异。但是导入特定包类的最佳实践

# ruby-on-rails - 缓存多级外国ID是一种好习惯吗

> ID：13215846
> 
> 赞同：4
> 
> 时间：2012-11-04T03:36:14.200
> 
> 标签：ruby-on-rails, activerecord

型号`User`有很多`Project`有很多`Task`

```
User(id, email, password)
Project(id, user_id, name)
Task(id, user_id, project_id, title) 
```

在不进行连接的情况下，在模型上拥有一个更高父级的*缓存*列，以便更快地访问，或者我应该坚持使用好的 ol解决方案，这是一个好习惯吗？`user_id``Task``:through`

很想听听对此的想法，因为我一直担心这是否弊大于利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T23:04:34.567

我不会说这样做是个好习惯。您现在必须使该附加密钥与父密钥上的相同密钥保持同步，并且数据没有达到应有的规范化程度。

除非你有理由这样做，否则我不会走这条路。

如果原因是您发现必须继续遍历模型层次结构以获取相关的用户模型太不方便了，那么也许有更好的方法可以表达该代码，这样您就不必继续这样做许多查找/连接？

如果主要是出于性能原因，那么可能会有更好的解决方案——缓存、数据库索引和其他可能有帮助的技术。

如果添加额外的密钥是您尝试做的最好/最简单的解决方案，那么很好。我只是先考虑是否有更好的方法。

# php - 有人可以解释一下 Preg_Match_All

> ID：13215847
> 
> 赞同：-3
> 
> 时间：2012-11-04T03:36:15.180
> 
> 标签：php, html, regex, preg-match

我试图理解 php 中的 preg_match_all 。我和一个朋友和几个朋友一起运行了一个小网站，主要是为了练习编码，不久前我们添加了一个部分，其中包含删除任何图像来源的代码：

```
$html = file_get_contents('http://www.anyrandomwebsite.com');
preg_match_all('/<img[^>]+>/i',$html, $result); 
```

我们几乎只是在网上找到的，无法理解它，但我知道它会在页面上找到任何图像标签实例并将它们放入数组中。

现在，我正在尝试创建一个代码来搜索页面上任何链接的源代码（因此任何以“http”开头的链接），最好只搜索以特定扩展名（即.net 或 .zip）结尾的链接

但是，我不知道如何编写模式。我尝试过学习正则表达式，但根据我朋友告诉我的，用于查找图像标签的代码不符合正常规则，他们也没有完全理解。

基本上，我正在找人写一个 preg_match_all 可以在页面上找到链接，然后请向我解释它为什么起作用，并解释上面的代码是如何工作的（最好是在模式部分逐个字符）

非常感谢任何对此作出回应的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:42:04.500

要解释您拥有的正则表达式：

```
/      # Starting regex delimiter
<img   # Match <img
[^>]+  # Match one or more characters that aren't a >
>      # Match a >
/      # Ending regex delimiter
i      # Case-insensitive option 
```

它是如何工作的？

想象一下`img`标签的样子。它以 开头`<img`和结尾`>`。因此，一旦我们确定了一个`<img`标签，我们需要匹配所有内容，直到最近的`>`.

这意味着我们需要匹配尽可能多的字符，只要它们不是`>`. 而这正是这样`[^>]+`做的。由于至少需要其中一个字符（`<img>`不合法），我们使用 a`+`而不是 "zero or more" `*`。

您可能会在这里看到一个问题：如果标签*确实*包含`>`某处（例如，在属性中）怎么办？这就是为什么使用正则表达式解析 HTML 充满危险的原因之一。

# sas - SAS DATA：如何删除只出现一次的观察结果

> ID：13215848
> 
> 赞同：2
> 
> 时间：2012-11-04T03:36:15.680
> 
> 标签：sas, datastep

在 SAS 中，假设我有一个名为“person_groups”的数据集。它有两个变量，名为“person”和“group”。该数据集只是将每个人分配到一个组。

我怎样才能从这个数据集中删除所有在他们的组中没有其他人的人？换句话说，我怎样才能删除所有单例组？

[我会很高兴有一个`proc sql`解决方案或一个`data step`解决方案——这都很好。]

旁注：我是 SAS 新手。多年来我一直在使用 C++ 和 MATLAB。我觉得我无法理解如何使用 SAS DATA 步骤做*任何事情。*它看起来非常笨重、怪异和不雅。坦率地说，我越来越沮丧。外面的人对疲倦的人有希望吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T04:39:35.510

这是一种使用数据步骤的方法。此方法需要排序。

```
data person_groups;
 input person $ group $;
 datalines;
John Grp1
Mary Grp3
Joe Grp2
Jane Grp3
Frank Grp1
;

Proc Sort data=person_groups;
 by group;
run;

Data person_groups;
 set person_groups;
 by group;
 if first.group and last.group then delete;
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T14:57:43.100

这是一个`PROC SQL`解决方案：

```
proc sql;
   delete from person_groups
   where group in (
      select group
      from person_groups
      group by 1
      having count(*) = 1
      );
quit; 
```

如您所见，`PROC SQL`大多遵循标准的 ANSI 语法，因此您现有的 SQL 技能应该是相当可移植的。并在 SAS Data Step 编程方面坚持下去；语言极其丰富，功能齐全，绝不是“不雅”。你可能见过不优雅的代码，但这更有可能是程序员的错。花几分钟时间阅读[SAS 概念手册](http://support.sas.com/documentation/cdl/en/lrcon/65287/HTML/default/viewer.htm#titlepage.htm)。

# java - 将伪代码改编为 java 实现以在 trie 中查找最长的单词

> ID：13215852
> 
> 赞同：-1
> 
> 时间：2012-11-04T03:38:06.317
> 
> 标签：java, string, algorithm, trie

提到这个问题，我问：[如何在 trie 中找到最长的单词？](https://stackoverflow.com/questions/13191942/how-to-find-the-longest-word-in-a-trie)

我无法实现答案中给出的伪代码。

```
findLongest(trie):
 //first do a BFS and find the "last node"
 queue <- []
 queue.add(trie.root)
 last <- nil
 map <- empty map
while (not queue.empty()):
 curr <- queue.pop()
 for each son of curr:
    queue.add(son)
    map.put(son,curr) //marking curr as the parent of son
 last <- curr
//in here, last indicate the leaf of the longest word
//Now, go up the trie and find the actual path/string
curr <- last
str = ""
while (curr != nil):
      str = curr + str //we go from end to start   
    curr = map.get(curr)
return str 
```

这就是我的方法

```
public static String longestWord (DTN d) {
  Queue<DTN> holding = new ArrayQueue<DTN>();
  holding.add(d);
  DTN last = null;
  Map<DTN,DTN> test = new ArrayMap<DTN,DTN>();
  DTN curr;
  while (!holding.isEmpty()) {
       curr = holding.remove();

      for (Map.Entry<String, DTN> e : curr.children.entries()) {
          holding.add(curr.children.get(e));
          test.put(curr.children.get(e), curr);
      }
          last = curr;

      }
  curr = last;
  String str = "";
  while (curr != null) {
      str = curr + str;
      curr = test.get(curr);

  }
  return str;

  } 
```

我在以下位置收到 NullPointerException：

```
 for (Map.Entry<String, DTN> e : curr.children.entries()) 
```

如何找到并修复该方法的 NullPointerException 的原因，以便它返回 trie 中最长的单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:57:47.123

除了@Clark 的回答，请确保 curr.children 在取消引用之前不为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:43:13.323

确保它`curr.children.entries()`不是空值。也许，`DTN`如果该节点没有子节点，则返回空值。这会导致您的`NullPointerException`.

在开始迭代之前尝试快速检查。

```
if(curr.children.entries() != null)
{
    //It's safe, so procede with going deeper into the trie.
} 
```

# javascript - 具有多个可见图像的无限画廊

> ID：13215854
> 
> 赞同：1
> 
> 时间：2012-11-04T03:38:57.593
> 
> 标签：javascript, jquery, slideshow

我希望在他们的网站上创建类似以下内容的内容。

[http://www.vogue.com/](http://www.vogue.com/)

显示多个图像的自动滚动幻灯片。(1, 2, 3) 然后 (2, 3, 4)。它最终会根据它们的数量循环遍历它们。每个图像也在一个单独的 div 中，我相信叠加层是为两个没有被聚焦的外部图像放置的。

我不太精通 javascript，无法自己从头开始创建类似的东西，也没有找到允许在给定时间查看多个图像的 jquery 幻灯片。我发现的最接近的是一次滚动浏览 3 张图像的插件，并且没有自动滚动。

有谁知道如何使用给定的规格轻松实现这一点？我需要它来表现它在时尚网站上的表现。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:09:50.520

## *[jsBin demo](http://jsbin.com/isegih/2)*

jQuery:

```
// infinite Gallery - script by roXon, design idea by "Vogue(R)"
$(function(){

    var c = 0;        // COUNTER // SET HERE DESIRED START SLIDE NUMBER (zero based)
    var speed = 300;    // ANIMATION SPEED
    var pause = 3500;   // ANIMATION PAUSE
    var $slider = $('.carousel-slider');
    var $sli = $slider.find('.carousel-content');
    var $btns = $('#btn-left, #btn-right');

    /* DO NOT EDIT BELOW */
    var sliN = $sli.length;
    $('.carousel').clone().appendTo( $('.carousel:gt(0)') ); /*CLONE SLIDERS*/
    var m = 0;
    var w = $slider.closest('div').width();
    var intv;
    $slider = $('.carousel-slider'); // all
    $slider.width(w*2);
    // rearrange
    $slider.eq(0).find('.carousel-content:lt('+(c)+')').appendTo( $slider.eq(0) );
    $slider.eq(1).find('.carousel-content:lt('+(c-1)+')').appendTo( $slider.eq(1) );
    $slider.eq(2).find('.carousel-content:gt('+(c)+')').prependTo(  $slider.eq(2) );

    // POPULATE WITH NAVIGATION BUTTONS
    for(i=0;i<sliN;i++){
        $('#nav-btns p').append(' <a href="#">'+ (i+1) +'</a> ');
    }

    // TOGGLE ACTIVE CLASS TO NAV BUTTON
    function navBtnsActive(){
        c = c===-1 ? sliN-1 : c%sliN ;  // counter resets
        $('#nav-btns a').removeClass('btn-active').eq(c).addClass('btn-active'); // nav buttons actives
    }
    navBtnsActive();

    var $lastCont;
    function anim(){
        if(c>m){ // right btn
            $slider.animate({left:-w}, speed, 'linear', function(){
                $(this).css({left:0}).find('.carousel-content:first').appendTo( $(this) );
            });
            m++;
        }else if(c<m){ // left btn  
            $slider.animate({left:-w},0,function(){
                $lastCont = $(this).find('.carousel-content:last');
                $(this).find('.carousel-content:last').prependTo( $(this) );
            }).animate({left:0}, speed, 'linear');
            m--;
        }
        if(c!=m){anim();} // loop until match
    }

    // LEFT-RIGHT BUTTONS //
    $btns.on('click',function(){
        if(!$slider.is(':animated')){
            var btnID = this.id=='btn-right' ? c++ : c-- ;
            anim();
            navBtnsActive();
            m=c;
        }
    });

    // NAV BUTTONS //
    $('#nav-btns a').on('click',function(e){
        e.preventDefault(); 
        c = $(this).index();
        anim(); 
        navBtnsActive();
    });

    // AUTO SLIDE
    function auto(){
        clearInterval(intv);
        intv = setInterval(function(){
            $('#btn-right').click();
        }, pause);
    }
    auto(); // start!

    // PAUSE ON HOVER //
    $('#gallery').on('mouseenter mouseleave',function( e ){
        var mEnt = e.type=='mouseenter',
            aSli = mEnt?clearInterval(intv):auto();
        $btns.stop().fadeTo(300,mEnt?1:0);
    });

}); 
```

HTML:

```
 <div id="document_wrapper">

    <div id="container">

        <h1 class="title">BLOGUE</h1>

        <div id="top-nav"></div>

        <div id="gallery"> <!-- OUR PRECIOUS :) -->

            <div class="carousel carousel-center">
                <div class="carousel-slider">

                    <div class="carousel-content">
                                         <!-- organize your content here -->
                    </div>
                    <!-- use more .carousel-content here -->

                </div>
            </div>

            <div class="carousel carousel-left"></div>
            <div class="carousel carousel-right"></div>

            <div id="btn-left"></div>
            <div id="btn-right"></div>

            <div id="nav-btns"><p></p></div>

        </div>

            <!-- document content here -->

    </div>

</div> 
```

CSS:

```
*{margin:0;padding:0;} /* UGLY RESET */
body{
    font:14px/24px "Myriad Pro","Trebuchet MS",sans-serif;
    background:#F2EFED;
    color:#555;
}
#document_wrapper{
    position:relative;
    overflow:hidden;
}

h1.title{
    font-family:"Times New Roman",Times,serif;
    font-size:14.16em;
    line-height:0.6em;
    font-weight:normal;
    letter-spacing:10px;
    color:#000;
    position:relative;
    z-index:1;
    top:70px;
}

#container{
    position:relative;
    margin:0px auto;
    width:980px;
    padding-bottom:70px;
    height:1000px;
    background:#fff;
}
#top-nav{
    border-top:1px solid #000;
    position:relative;
    z-index:2;
    background:#fff;
    height:36px;
    width:100%;
}

/* GALLERY */

#gallery{
    height:400px;
    width:100%;
    position:relative;
    left:0px;
    padding-bottom:36px; /* FOR NAV BUTTONS HEIGHT */
}
.carousel{
    background:#147;
    position:absolute;
    margin-left:-10px;
    width:850px;
    height:400px;
    border-left:10px solid #fff;
    border-right:10px solid #fff;
    overflow:hidden;
}
.carousel-left, .carousel-right{
  opacity:0.2;
}
.carousel-left{
    left:-860px;
}
.carousel-right{
    left:860px;
}
.carousel-slider{
    height:400px;
    position:absolute;
    left:0;
}
.carousel-content{
    position:relative;
    margin-left:-10px;
    float:left;
    width:850px;
    height:400px;
    border-left:10px solid #fff;
    border-right:10px solid #fff;
}
/* BUTTONS */
#btn-left, #btn-right{
    position:absolute;
    background:#fff;
    width:25px;
    height:150px;
    top:125px;
    display:none;
    cursor:pointer;
}
#btn-right{
    right:130px;
}
/**/
#nav-btns{
    position:relative;
    top:400px;
    height:30px;
    width:850px;
}
#nav-btns{
    text-align:right;
}
#nav-btns a{
    font-style:italic;
    text-decoration:none;
    color:#888;
    padding:0 8px;
    margin:0 !important;
}
#nav-btns a.btn-active{
    border-top:10px solid #fff;
    text-decoration:none;
    color:#000;
}
#nav-btns a:hover{
    color:#000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:17:00.543

附上[小提琴，](http://jsfiddle.net/Varinder/qTjwj/)

可以进行少量代码重构和优化，但总体思路是相同的。

```
(function($) {
  var $slider = $('#slider'),
    finalOffset = '-' + $slider.children().last().offset().left + 'px';
    slideSpeed = 5000,
    timer = -1;

  function startSlide() {
    $slider.children().first().animate({
        'margin-left' : finalOffset            
    }, slideSpeed, function() {
        $slider.children().first().animate({'margin-left' : '0px'}, slideSpeed, function() {
            startSlide();
        });
    });   
}

startSlide();
}(jQuery));​ 
```

干杯

# c++ - 二进制文件的模板化读/写

> ID：13215856
> 
> 赞同：0
> 
> 时间：2012-11-04T03:39:09.187
> 
> 标签：c++, templates, serialization, fstream

因此，我一直在尝试通过以下方式在 C++ 中自动读取和写入二进制文件（基本上，因为在处理动态数据时事情变得具体）：

```
#include <iostream>
#include <fstream>
using namespace std;

template <class Type>
void writeinto (ostream& os, const Type& obj) {
    os.write((char*)obj, sizeof(Type));
}

template <class Type>
void readfrom (istream& is, const Type& obj) {
    is.read((char*)obj, sizeof(Type));
}

int main() {
    int n = 1;
    int x;

    fstream test ("test.~ath", ios::binary | ios::out | ios::trunc);
    writeinto(test, n);
    test.close();

    test.open("test.~ath", ios::binary | ios::in);
    readfrom(test, x);
    test.close();

    cout << x;
} 
```

并且预期的输出将是“1”；但是，此应用程序在屏幕上显示任何内容之前崩溃。更具体地说，就在 writeinto 函数内部。

我可以解释为什么，如果可能的话，一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:47:06.890

您需要获取对象的*地址*：

```
#include <memory>

os.write(reinterpret_cast<char const *>(std::addressof(obj)), sizeof(Type));
//                                      ^^^^^^^^^^^^^^^^^^^ 
```

在紧缩中你也可以说`&obj`，但是在超载的情况下这是不安全的`operator&`。

# android - 来自 SDK 3.0 for Android 的 Facebook 示例应用程序错误“无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息”

> ID：13215860
> 
> 赞同：2
> 
> 时间：2012-11-04T03:39:40.947
> 
> 标签：android, facebook, facebook-android-sdk

当我从适用于 Android 的 Facebook SDK 3.0 运行示例 Android 应用程序时，我收到错误页面“Facebook 登录配置错误。按确定返回应用程序而不连接到 Facebook”。

设备中已经有一个 Facebook 应用程序，如果我卸载该应用程序，示例应用程序会让我进入 Facebook 的登录页面。在 logcat 中，我得到错误为**“无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息”**。我在 facebook 的仪表板中给出了哈希键，并在应用程序中给出了 APP ID。在仪表板中，我没有找到任何选项，例如启用**单点登录**。

这可能是一个重复的问题。但我无法找到使示例应用程序运行的解决方案，即使设备中已经存在 facebook 应用程序。帮我整理一下。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:38:06.577

在开发者仪表板中，在“Native Android App”下，您还需要将“Facebook Login”设置为“Enabled”。“Facebook 登录”是“单点登录”的新名称。

## 如果这不起作用...

如果您使用 Session 登录，请尝试将此代码添加到您的 Session.StatusCallback 调用方法中：

```
if (exception != null) {
    exception.printStackTrace();
} 
```

如果您使用 LoginButton 登录，请使用上述代码实现 LoginButton.OnErrorListener，并在创建 LoginButton 时添加侦听器。

生成的 logcat 应该为您提供有关问题所在的更多信息。

## 关于“找不到...”错误：

使用真实设备并确保您安装了最新版本的 Facebook 应用程序。sdk 中包含的 Facebook 应用程序不够新，无法支持归因 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:31:49.103

从以下链接正确执行第 4 步：- [https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

我认为您错过了其中的 keytool 部分，您必须将密钥哈希添加到您的开发人员帐户，或者您没有在示例项目中导入 FacebookSDK 库。

# ruby - Rails ModelSweeper.instance 没有过期

> ID：13215863
> 
> 赞同：1
> 
> 时间：2012-11-04T03:40:44.413
> 
> 标签：ruby, activerecord, ruby-on-rails-3.2, sweeper

Rails 3.2.8，ruby 1.9.3p0（2011-10-30 修订版 33570）[x86_64-linux]

当我在另一个带有`instance`方法的清扫器中使用清扫器时，清扫器功能（如 `after_update`）被执行（我做了一个日志并被执行）但在我的项目中没有过期。（或任务）

我的代码是下一个：

```
class WorkSweeper < ActionController::Caching::Sweeper
  # ...
  def after_update(work)
    expire work, "/works/index"
    expire work, "/tasks/#{work.task_id}/works/index"

    expire work, "/works/#{work.id}/show"

    TaskSweeper.instance.after_update work.task
  end
  # ...
end

class TaskSweeper < ActionController::Caching::Sweeper
  # ...
  def after_update(task)
    expire task, "/tasks/index"
    expire task, "/milestones/#{task.target_id}/tasks/index"
    expire task, "/tasks/#{task.target_id}/tasks/index"
    expire task, "/projects/#{task.target_id}/tasks/index"

    expire task, "/tasks/#{task.id}/show"

    MilestoneSweeper.instance.after_update task.target if task.target.class == Milestone
  end
  # ...
end

class MilestoneSweeper < ActionController::Caching::Sweeper
  # ...
  def after_update(milestone)
    expire milestone, "/milestones/index"
    expire milestone, "/projects/#{milestone.project_id}/milestones/index"

    expire milestone, "/milestones/#{milestone.id}/show"

    ProjectSweeper.instance.after_update milestone.project
  end
  # ...
end

class ProjectSweeper < ActionController::Caching::Sweeper
  # ...
  def after_update(project)
    expire project, "/projects/index"
    expire project, "/companies/#{project.company_id}/projects/index"

    expire project, "/projects/#{project.id}/show"
  end
  # ...
end 
```

注：`expire`是下一个函数

```
def scope(project)
  project.creator.try(:creator_id) || project.creator_id
end

def expire(model, url)
  expire_fragment("#{scope model}#{url}")
end 
```

我需要在每个清扫器中手动执行每个过期，例如：

```
class WorkSweeper < ActionController::Caching::Sweeper
  # ...
  def after_update(work)
    expire work, "/works/index"
    expire work, "/tasks/#{work.task_id}/works/index"

    expire work, "/works/#{work.id}/show"

    expire project, "/projects/index"
    expire project, "/companies/#{project.company_id}/projects/index"

    expire project, "/projects/#{project.id}/show"
  end
  # ...
end 
```

在这种情况下，工作，但它不是最好的，我有很多模型和很多扫地机。

怎么了？还有另一种方法可以做到这一点吗？

谢谢。

**解决了**

在这里回答[https://github.com/rails/rails/issues/8096](https://github.com/rails/rails/issues/8096)

# c - 无法让函数中的函数调用正常工作

> ID：13215864
> 
> 赞同：0
> 
> 时间：2012-11-04T03:41:15.023
> 
> 标签：c, function

我正在编写一个程序来生成一串随机大写字母，然后获取用户输入的大写字母以及用户的字符。对于随机字符串中用户输入字母的任何实例，它会将该字母替换为用户输入的字符。

例如，s1 = {BDHFKYL} s2 = {YEIGH} c = '*'

输出 = BD*FK*L

在我添加了要求用户输入他们想要替换字母的字符之前，该程序一直运行正常。

输出是：

```
Please enter at least 2 capital letters and a maximum of 20.
HDJSHDSHDDS
HDJSHDSHDDS
Enter a character to replace occuring letters.
*
NWLRBBMQB
Would you like to enter another string? 
```

这是代码：

```
void fillS1(char x[]);

void fillS2(char x[], char y[], char z);

void strFilter(char a[], char b[], char c);

int main(int argc, const char * argv[])
{
 char s1[42];
 char s2[22];
 char x = 0;

 fillS2(s2, s1, x);

 return 0;
}

void fillS1(char x[])
{
 for (int i = 0; i < 40; i++)
     x[i] = 'A' + random() % 26;
 x[40] = (char)0;
}

void fillS2(char x[], char y[], char z){

 char loopContinue = 0;

 do {

 int i = 0;
 int capitalLetterCheck = 0;

 printf("Please enter at least 2 capital letters and a maximum of 20.\n");
 while (( x[i] = getchar()) != '\n' ) {

    i++;

     }

 x[i] = '\0';

 if (i < 3) {
    printf("You need at least two letters\n");
 }

 else if (i > 21){
    printf("You cannot have more than twenty letters\n");
}

for (i = 0; i < 20; i++) {
        if ((x[i] >= 'a') && (x[i] <= 'z')) {
            printf("You many only have capital letters.\n");
            capitalLetterCheck = 2;
        }
    }

if (capitalLetterCheck != 2) {
    for (i = 0; i < 20; i++) {
        if ((x[i] >= 'A') && (x[i] <= 'Z')) {
            puts(x);

            fillS1(y);

            printf("Enter a character to replace occuring letters.\n");
            while ((z = getchar() != '\n')) {

            }

            strFilter(y, x, z);  
            break;
        }
        }
    }

    printf("Would you like to enter another string?\n");
    gets(&loopContinue);

} while (loopContinue != 'n');

}

void strFilter(char a[], char b[], char c){
 int i = 0;
 int n = 0;

 while (n < 20) {

        for (i = 0; i < 40; i++) {
            if (a[i] == b[n]){
                a[i] = c;
            }

    }
    i = 0;
    n++;
}

   puts(a);
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T08:37:04.880

首先，请尽量让您的代码更易于阅读，我不是在谈论缩进，而是在谈论它的流程。

此外，您的示例输出似乎工作正常，因为这里的任何字符串都没有任何改变......？

编码时应牢记以下几点：

*   给你的变量和函数明确的名字，特别是如果你打算让某人在某个时候阅读你的代码
*   当你有一个特定的任务要执行（获取用户的输入，生成一个随机字符串等）时，尝试通过制作小函数来保持你的代码流简单，而不是仅仅将大部分代码写在叠层循环中
*   您还可以查看 scanf (man scanf) 以获取用户的输入
*   尝试在获得用户输入时分配缓冲区，而不是使用大小可能不正确的静态缓冲区

编写一些伪代码然后将其翻译成 C 非常容易：

```
WHILE someCondition
    Generate a random string
    Get a string from the user
    Get a character from the user
    Find and replace
END 
```

这是一个如何组织代码的示例（尽管不要使用它 - 没有释放，没有获取用户的输入等）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* generateString(void)
{
    return "AEIOUYAEIOUY"; // In your implementation, this is where you'd generate the random string
}

char* getStringInput(void)
{
    return "HELLO"; // In your implementation, this is where you'd get the user's string
}

char getCharInput(void)
{
    return '*'; // In your implementation, this is where you'd get the user's character
}

char* findAndReplace(char* randomString, char* userString, char userChar)
{
    int l1;
    int l2;
    int i;
    int j;
    char* output;

    l1 = strlen(randomString);
    l2 = strlen(userString);
    output = (char*)malloc(sizeof(*output) * l1);
    strcpy(output, randomString);
    for (i = 0; i < l1; ++i)
    {
        for (j = 0; j < l2; ++j)
            if (randomString[i] == userString[j])
                output[i] = userChar;
    }

    return (output);
}

int main(int ac, char** av)
{
    char* randomString;
    char* userString;
    char userChar;
    char* outputString;

    randomString = generateString();
    userString = getStringInput();
    userChar = getCharInput();
    outputString = findAndReplace(randomString, userString, userChar);
    printf("Result: %s\n", outputString);

    // don't forget to free any allocated buffer

    return (1);
} 
```

你做了多少调试？尝试在您的代码中添加一些 printfs 以查看会发生什么 - 调用函数时，变量的值是什么等。示例：

```
void fillS1(char x[])
{
 printf("-- entering fillS1, buffer value: %s\n", x);
 for (int i = 0; i < 40; i++)
     x[i] = 'A' + random() % 26;
 x[40] = (char)0;
 printf("-- leaving fillS1, buffer value: %s\n", x);
} 
```

（在使用 printf 之前，请注意缓冲区中的内容）

这应该很快告诉你出了什么问题。

例如，尝试在调用 strFilter 时检查“c”的值，然后再看看如何获​​得用户的输入。

# jquery - 单击图库中的任何缩略图时调用 Jquery 函数

> ID：13215867
> 
> 赞同：0
> 
> 时间：2012-11-04T03:41:24.883
> 
> 标签：jquery, function, xhtml, thumbnails

我正在开发我的第一个主要项目，其中包含在我的 HTML 中实现的 jQuery 函数。我正在建立一个图片库。

我的 HTML 页面上有一个 jQuery 函数，可以在我的标题和缩略图之间向下滑动一个面板。注意 - 缩略图是用 HTML 和 CSS 创建的；不在任何类型的数组中。

我想要它，这样无论最终用户点击哪个缩略图，它都会调用该函数来向下滑动面板，问题是该函数一次只能由一个缩略图调用（通过给它一个“id”属性）。当我将 id 属性赋予所有缩略图时，仅在单击第一个缩略图时才调用该函数。

这是jQuery函数：

```
jQuery.fn.blindToggle = function(speed, easing, callback) {
var h = this.height() + parseInt(this.css('paddingTop')) +                                            
    parseInt(this.css('paddingBottom'));
return this.animate({marginTop: parseInt(this.css('marginTop')) <0 ? 0 : -h}, speed, 
    easing, callback);  
};

$(document).ready(function() {
    var $box = $('#box')
    .wrap('<div id="box-outer"></div>');
    $('#blind').click(function() {$box.blindToggle('slow');  
});    
});

<div class=thumbbox>
     <div class="thumb" id="blind";></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:44:08.033

为什么不使用类而不是 ID？

像这样：

```
$('.blind').click(function() {$box.blindToggle('slow'); 
```

在您的标记中：

```
<div class=thumbbox>
     <div class="thumb blind"></div>
</div> 
```

# python - 在python 3中将字符串与其他可迭代对象分开

> ID：13215873
> 
> 赞同：1
> 
> 时间：2012-11-04T03:43:37.487
> 
> 标签：python, python-3.x, python-3.3

我正在尝试确定函数参数是字符串还是其他可迭代的。具体来说，这用于构建 URL 参数，以尝试模拟 PHP 的`&param[]=val`数组语法 - 所以鸭式输入在这里并没有真正的帮助，我可以遍历字符串并生成类似的东西`&param[]=v&param[]=a&param[]=l`，但这显然不是我们想要的。如果参数值是一个字符串（或一个字节？我仍然不知道一个字节的实际意义是什么），它应该产生`&param=val`，但是如果参数值是（例如）一个列表，每个元素都应该接收它的拥有`&param[]=val`. 我在 2.* 中看到了很多关于如何做到这一点的解释`isinstance(foo, basestring)`，但`basestring`在 3.* 中不存在，我也读过`isinstance(foo, str)`会错过更复杂的字符串（我认为是 unicode？）。那么，在不导致某些类型因不必要的错误而丢失的情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:49:56.797

您已经看到基于 Python 2 与 3 的一些冲突。在 Python 3 中，`isinstance(foo, str)`几乎可以肯定是您想要的。`bytes`用于原始二进制数据，您可能无法将其包含在这样的参数字符串中。

python 2`str`类型存储原始二进制数据，通常是某种特定编码的字符串，如 utf8 或 latin-1 之类的；该`unicode`类型存储了字符的更“抽象”表示，然后可以将其编码为任何特定的编码。`basestring`是他们俩的共同祖先，因此您可以轻松地说“任何类型的字符串”。

在 python 3 中，`str`是更“抽象”的类型，`bytes`用于原始二进制数据（如特定编码中的字符串，或您想要处理的任何原始二进制数据）。你不应该使用`bytes`任何本来是字符串的东西，所以没有真正的理由检查它是否是`str`or `bytes`。但是，如果您绝对需要，您可以执行类似`isinstance(foo, (str, bytes))`.

# html - 如何将文本区域的内容发送到“codepad.org”的文本区域？

> ID：13215875
> 
> 赞同：0
> 
> 时间：2012-11-04T03:44:11.870
> 
> 标签：html, textarea, codepad

我想将文本区域的内容从网页发送到[codepad.org](http://codepad.org/)中的文本区域。我怎样才能做到这一点 ？ [这个](http://www.daniweb.com/web-development/php/threads/281396/alternative-to-form)和[这个](https://stackoverflow.com/questions/5357224/passing-data-from-one-textarea-to-another-on-a-different-page-using-post)链接对这样做没有帮助....

如果这是不可能的，那我怎么能在其他网页中使用“codepad.org”...... ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:08:50.600

除非该站点已为其编写了特定的支持代码（我认为 codepad 没有），否则您不能为表单元素提供预定义的值，也不能从代码中修改 textarea。

我会创建一个粘贴，然后使用框架和它为您的新粘贴提供的特定 URL 将其嵌入到您的网站中。

# javascript - 在 Node js 中响应一个 json 对象

> ID：13215877
> 
> 赞同：0
> 
> 时间：2012-11-04T03:44:31.340
> 
> 标签：javascript, node.js

我想在 200 OK 时返回一个 Json 对象。

我正在从我的 nosql 获取数据。

我知道如何填充结构。（即在 json 正文中要保留的值）

这里名称、类别和地址是固定的：

```
Name= entity[4]
Class= entityclass[4]
Address = entityaddrss[4] 
```

...实体..将来自nosql。

如何构造和发送带有 json 正文的 200Ok。

```
response.end({}) 
```

你能告诉我最后应该写什么吗？我有所有需要的数据：名称=实体[4]类=实体类[4]地址=实体地址[4]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:07:38.770

好的，既然您在第一条评论中添加了一些细节（您应该编辑问题并添加这些），我想我可以回答您的要求。

```
var http = require('http')
var port = process.env.PORT || 1337;

var get_nosql_data = function(callback){
  // do whatever it is here you need to get the data back
  // and format it into a json object. pseudocode follows.
  // error handling is also needed here, but not relevant to the answer
  var db = require('db');
  db.getData('some query', function(res){
    var data = { name: res.entity[4], class: res.entityclass[4], address: res.entityaddrss[4] };
    callback(data);
  });
}

http.createServer(function(req, res) {
  get_nosql_data(function(data){
    res.writeHead(200, { 'Content-Type': 'application/json' });
    res.end(JSON.stringify(data));
  });
}).listen(port); 
```

只要您将数据库值放入我在那里的占位符字符串中，您就应该启动并运行。这也应该与 azure 已经为您设置的内容保持一致。

相关的，我强烈建议您查看[express](http://expressjs.com/) - 这将使您编写节点 Web 应用程序的生活变得更加轻松。

# java - 为什么它不读取行终止符 ''\n'

> ID：13215878
> 
> 赞同：0
> 
> 时间：2012-11-04T03:44:34.880
> 
> 标签：java, file, fileinputstream, bufferedinputstream, bufferedoutputstream

此代码正在尝试读取文件，然后将其反转为输出文件。当它写入（不反转）时，输出是相同的。但是当它被反转时，输出将全部写入输出文件的 ONE 行。

```
 int i;
    int x = 0;
    int[] ar = new int[9999];
    BufferedInputStream fin;
    BufferedOutputStream fout;
    try {

        File f1 = new File("C:/Users/NetBeansProjects/QuestionOne/input.txt");
        File f2 = new File("C:/Users/NetBeansProjects/QuestionOne/output.txt");
        fin = new BufferedInputStream(new FileInputStream(f1));
        fout = new BufferedOutputStream(new FileOutputStream(f2));

        while ((i = fin.read()) != -1) { //reads file into an array
            ar[x] = i;
            x++;
        }

        for(int y = (x-1); y >= 0; y--){ 
        //writes to a file from the end of the array
            fout.write(ar[y]);
        }

        System.out.println();
        fin.close();
        fout.close();
        } catch (FileNotFoundException e) {
        System.out.println("File is NOT found.");
    } 
```

我正在使用`BufferedInputStream`和`BufferedOutputStream`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:00:52.860

可能您正在阅读 \r\n 并回写 \n\r。

您必须将 \r\n 作为单独的实体处理。

# powershell - Powershell v2 | 脚本不会声明变量，需要帮助调试

> ID：13215886
> 
> 赞同：3
> 
> 时间：2012-11-04T03:45:46.487
> 
> 标签：powershell

好吧，脚本似乎有几个问题，我似乎无法弄清楚其中的任何一个，对脚本的一些反馈也会非常感激。这仍然是我的第一个脚本，所以它可能需要很多小调整，所以请告诉我任何想到的建议。

问题：大多数问题都围绕日志记录。

1.  未检查日志文件，因此脚本不断将计算机添加到日志文件中。

2.  日志文件不会更新生成的信息，例如 os、mac、ip 等。

显示的问题：

> 在此对象上找不到属性“结果”。确保它存在。在 W:\Powershell Scripting\Test Lab\TestFunction.ps1:86 char:17 + IF ($Computer.<<<< Result -ne "Successful") { + CategoryInfo : InvalidOperation: (.:OperatorToken) [], RuntimeException +fullyQualifiedErrorId：PropertyNotFoundStrict

剧本

```
Set-PSDebug -strict
Set-StrictMode -Version latest
$consoleObject = (Get-Host).UI.RawUI

# Adjustable Variables
$Computers_Path = ".\computers.txt"
$Log_Path = ".\Log.txt"
$Log_MaxTick = 5
$RunOnServers = 0

# Multi-Threading Variables
$Jobs_MaxAtOnce = 20
$SleepTimer = 500

# Script Specific Variables
$ScriptTitle = "Local Admin Check"

# Validate Adjustable Variables
$Computers = @(Import-CSV $Computers_Path -header "Name","MAC")

# Framework Specific Variables (Pre-Setting Variables)
$Run = 0; $Succssful = 0; $Jobs_Count = 0; $Log_Tick= 0; $WriteToLog = "No"

# Misc
$Total = $Computers.length
IF (!(Test-Path $Log_Path)) { Add-Content $Log_Path "Name,OS,Mac,IPAddress,Status,Attempts,Result,LastAttempt" }
$Log = @(Import-Csv $Log_Path)
$Successful = ($Log | Where-Object {$_.Result -eq "Successful"} | Select-String -inputobject {$_.Name} -pattern $Computers | Measure-Object).Count

# Load Functions
Function GetOS {
    $RegCon = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', $Computer.Name )
    $RegKey = $RegCon.OpenSubKey("SOFTWARE\Microsoft\Windows NT\CurrentVersion\")
    $RegValue = $RegKey.GetValue("ProductName")
    $RegCon.Close()
    $Computer.OS = $RegValue
}

Function SmartLogging {

    If ($Args[0] -eq "AddComputer") {
        Add-Content ($Computer.Name + "," + $Computer.OS + "," + $Computer.Mac + "," + $Computer.IPAddress + "," + $Computer.Status + "," + $Computer.Attempts + "," + $Computer.Result + "," + $Computer.LastAttempt) -path .\log.txt
    } ELSEIF ( $Log_Tick -eq $Log_MaxTick -OR $Args -eq "Update" ) {
        $Log_Tick = 0;
        Get-Content $Log_Path | Foreach-Object {$_ -replace "$Computer.Name,.*", ($Computer.Name + "," + $Computer.OS + "," + $Computer.Mac + "," + $Computer.IPAddress + "," + $Computer.Status + "," + $Computer.Attempts + "," + $Computer.Result + "," + $Computer.LastAttempt)} | Set-Content $Log_Path
    } ELSEIF ($Args[0] -eq "CheckComputer") {
         IF (!($Log | Select-String -pattern $Computer.Name -SimpleMatch)) {
            $Log += New-Object PSObject -Property @{ Name = $Computer.Name; OS = $NULL; Mac = $Computer.MAC; IPAddress = $NULL; Status = $NULL; Attempts = 0; Result = $NULL; LastAttempt = $NULL;}
            $Computer = $Log | Where-Object {$_.Name -eq $Computer.Name}
            SmartLogging AddComputer
        } ELSE {
            $Computer = $Log | Where-Object {$_.Name -eq $Computer.Name}
        }
    } ELSEIF (-not $Args[0]) {
        "Log Ticked"
        $Log_Tick++
    }
}

Function GetIPAddress {
    $IPAddress = [System.Net.Dns]::GetHostAddresses("TrinityTechCorp") | Where-Object {$_.IPAddressToString -like "*.*.*.*"};
    $Computer.IPAddress = $IPAddress.IPAddressToString
}

Function WindowTitle {
    [int]$Successful_Percent = $Successful / $Total * 100
    $consoleObject.WindowTitle = “$ScriptTitle - $Successful Out Of $Total ($Successful_Percent%) Successful `| Run`: $Run”
}

# Start Script
while ( $Successful -le $Total ) {
    $Run++
    ForEach ($Computer in $Computers) {
        WindowTitle 
        SmartLogging CheckComputer
        IF ($Computer.Result -ne "Successful") {
            IF (test-connection $Computer.Name -quiet ) {
                $Computer.Status = "Awake"
                IF (!$Computer.OS){GetOS}
                IF (!$Computer.IPAddress){GetIPAddress}
                ## Start Script ##
                    $CheckComputer = [ADSI]("WinNT://" + $Computer.Name + ",computer")
                    $Group = $CheckComputer.psbase.children.find("Administrators")
                    $members= $Group.psbase.invoke("Members") | %{$_.GetType().InvokeMember("Name", 'GetProperty', $null, $_, $null)}
                    ForEach($user in $members) {
                        $Result = $Computer.Name + "," + $user.ToString()
                        Add-Content $Result -path .\Result.csv
                    }
                ## End Script ##
                SmartLogging Update
                $Computer.Result = "Successful"
                $Successful += 1
            } ELSE {
                $Computer.Status = "Unknown"
            }
            $Computer.Attempts = [int] $Computer.Attempts + 1
            $Computer.LastAttempt = Get-Date -uFormat "%I:%M:%S%p %d%b%y"
        }
    SmartLogging
    }
}
Write-Output "Script Completed" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:13:12.107

这次的问题是您`Result`在`$Computers`集合成员中没有成员，只有`Name`and `MAC`。除非您稍后在代码中添加这样的成员，否则我真的不想阅读，因为它已经有大约 100 行并且包含*许多*与实际问题陈述无关*的*代码。

```
$Computers = @(Import-CSV $Computers_Path -header "Name","MAC") 
```

您是否尝试过在 Powershell ISE 上调试脚本？它是 Powershell 2 的内置调试器。请查看有关它的[Technet 文章](http://technet.microsoft.com/en-us/library/dd315244.aspx "技术网")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:49:08.013

$Computers 集合的这个声明......

```
$Computers = @(Import-CSV $Computers_Path -header "Name","MAC") 
```

...不适用于这种情况：

```
IF ($Computer.Result -ne "Successful") 
```

异常消息明确说明了这一点，以及在哪里：

> 在此对象上找不到属性“结果”。确保它存在。\TestFunction.ps1:86 字符:17

为了解决这个问题，我建议初始化 Result 的属性，很可能是这样的：

```
$Computers = @(Import-CSV $Computers_Path -header "Name","MAC","Result") 
```

# java - 如何在 Java 中更改一个文件，同时保持另一个硬链接中的内容不变？

> ID：13215887
> 
> 赞同：0
> 
> 时间：2012-11-04T03:46:08.483
> 
> 标签：java, file, io, fopen, hardlink

我有一个带有另一个硬链接的文件。如何更改 Java 中的第一个文件，同时保持另一个硬链接中的内容不变？

这种行为就像 Windows 中的 gVim：

```
C:\Users\atry\break-hard-link>echo Hello, World > file1

C:\Users\atry\break-hard-link>mklink /H file2 file1
为 file2 <<===>> file1 创建了硬链接

C:\Users\atry\break-hard-link>gvim file1 :: Change file1 in gVim

C:\Users\atry\break-hard-link>dir
 驱动器 C 中的卷没有标签。
 卷的序列号是 B2F2-1B6E

 C:\Users\atry\break-hard-link 的目录

2012-11-04  11:33    <DIR>          .
2012-11-04  11:33    <DIR>          ..
2012-11-04  11:33                 8 file1
2012-11-04  11:32                15 file2
               2 个文件             23 字节
               2 个目录 365,748,248,576 可用字节 
```

注意`file1`'s size 和`file2`'s size 现在不同了。

我试过`new java.io.FileOutputStream`and `java.nio.file.Files.newOutputStream`，但两种方法都修改了`file1`and `file2`。

我想知道 gVim 是如何做的，并在我的 Java 应用程序中应用相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:21:11.423

我不知道 gVim 是如何做到的，但可靠的方法是

1.  重命名旧文件（这将只重命名您选择的链接）
2.  将数据复制到具有旧名称的新文件中
3.  当您确定新文件已成功创建并关闭时，请删除旧文件

The only way to get a new inode (which is what is required to break the link) is to make a new copy of the data.

# objective-c - 存储绝对 NSDate，而不是相对于时区

> ID：13215895
> 
> 赞同：6
> 
> 时间：2012-11-04T03:47:59.420
> 
> 标签：objective-c, ios, nsdate, nscalendar, nstimezone

我正在创建一个 iOS 应用程序来跟踪出勤率。每个考勤条目都存储在一个对象中，该对象具有一个状态属性（例如，出席、缺席）和一个`NSDate`被调用的属性，该属性`date`表示该考勤记录被记录的日期。当我选择特定日期（使用 a`UIDatePickerView`或类似名称）时，我希望该日期的所有出勤记录（对象）显示在表格视图中。

虽然这在原则上听起来很简单，但我遇到了一个与时区有关的问题。我知道`NSDate`s 的存储独立于时区（即它们相对于 UTC/GMT +0000 存储）。这意味着，如果我在悉尼并在例如 2012 年 11 月 4 日星期日出勤，因为日期存储为独立于时区，如果我将 iPhone/iPad 带到不同的时区（例如旧金山），所有出勤记录会向后移动一天，在这种情况下是 2012 年 11 月 3 日星期六，因为那是在旧金山当地时间（实际上是悉尼当地时间的第二天）进行考勤的时间。

我不希望这种情况发生——我希望日期是绝对的。换句话说，如果出席时间是 2012 年 11 月 4 日星期日，那么无论我去世界上的哪个地方（以及哪个时区），都需要保持在那个日期。如您所见，这与日历应用程序形成鲜明对比，日历应用程序需要根据时区更改约会时间。

任何有关解决此问题的更好方法的建议将不胜感激。请记住，我正在使用 a 选择要显示的日期，`UIDatePickerView`它以与时区无关的格式返回当前值`NSDate`，因此我还需要一种方法来进行简单的比较（最好是在 an 中，`NSPredicate`因为出勤对象存储在 Core Data 中）获取该特定日期的所有出勤对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T03:56:08.687

您是否尝试过将时间转换为它的 NSDateComponents？然后，无论时区如何，您都可以从中重新创建 NSDate。

**编辑添加**

```
// This is just so I can create a date from a string.
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];

// Create a date as recorded in a timezone that isn't mine.
NSDate *localDate = [formatter dateFromString:@"2012-10-30 10:30:00 +0200"];
NSLog(@"Initial Date: %@", localDate);
// this logs 2012-10-30 08:30:00 +0000
// Which is what you would expect, as the original time was 2 hours ahead

NSDateComponents *components = [[NSDateComponents alloc] init];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
components = [gregorian components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:localDate];

NSLog(@"Components: %@", components);

// Create a date from these time components in some other time zone
[gregorian setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"EST"]];
NSDate *newDate = [gregorian dateFromComponents:components];

NSLog(@"New Date: %@", newDate);
// This logs 2012-10-30 12:30:00 +0000
// Which is the local EST of 8:30 am expressed in UTC 
```

这演示了我如何使 +2 时区的上午 8:30 看起来与 -4 时区的相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:37:27.507

我相信对您来说更好的方法是使用时间戳，因为它独立于任何时区。您可以使用不同的方法将时间戳转换为日期并返回。并实现您希望的任何逻辑。

您也可以轻松地比较它们。

# c - 在 c 中使用 char 类型作为日期的问题

> ID：13215896
> 
> 赞同：1
> 
> 时间：2012-11-04T03:48:05.207
> 
> 标签：c, date, char

我是 c 的新手，我处于一个奇怪的情况：我正在尝试更新我作为字符串输入的日期，我的代码是

```
typedef struct Employee
{
char fname[20];
char lname[20];
int eme_id;
int emr_id;
char department[20];
int age;
char join_date[20];
float bsal;
float pol_value;
char pol_start_date[20];
char pol_end_date[20];
float premium;
float pre_payment;
char pre_pay_date[20];
int pre_status;/* 0 then not paid 1 then paid*/
float bonus;
}Employee;

char *update_date(char *dat)
{

char *result = NULL;
printf(dat);
result = strtok( dat, "/" );
int date[3];
int i=0;
while( result != NULL ) {
    printf( "result is \"%s\"\n", result );
    date[i] = atoi( result );
    printf( "%d\n", date[i] );
    i++;
    result = strtok( NULL, "/" );
}

if(date[1]!=12)
{
    date[1]++;
}
else
{
    date[1]=1;
    date[2]++;
}

char a[20];
char b[20];
char c[20];
char d[20];
sprintf(a, "%d", date[0]);
sprintf(b, "%d", date[1]);
sprintf(c, "%d", date[2]);

strcpy (d,a);
strcat (d,"/");
strcat (d,b);
strcat (d,"/");
strcat (d,c);

printf(d);
return d;
} 
```

在这里这个函数工作得很好但是当我在另一个函数中调用它时

```
while(fread(&eme,recsize_eme,1,fq)==1)
            {

                char *hell;
                hell = update_date(eme.pre_pay_date);
                printf("%s",hell);
            } 
```

现在它打印一些任意文本..：/请有人帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:13:27.613

在第一个代码中

```
char d[20];
... ... 
return d; 
```

“d[20]”在堆栈上。您正在返回指向堆栈上数据的指针。一旦 update_date() 返回，它的所有局部变量现在都是无效的。

在第二个中，您在返回之前打印 d[] 的值，所以没有问题。

strok() 可能最好避免。它会修改您传入的字符串并保持静态状态，这两者都是严重的陷阱并且经常导致细微的错误。

这里有几个替代实现。（当然，在生产代码中，您应该首先避免编写代码来解析日期/时间。有操作系统和库函数可以做到这一点。有很多微妙之处）。

```
// Scanf can do parsing for you
int date[3];
int n;
n = sscanf(dat, "%d/%d/%d", &date[0], &date[1], &date[2]);
if (n == 3) 
{
    // OK, we got 3 integers...
}

// atoi() stops on non-digits, use it instead of strtok
char *result = dat;
int date[3];
int i = 0;
while (i < 3 && result)
{
    date[i++] = atoi(result);
    result = strchr(result, '/');
    if (result)
    {
        ++result; // Skip the '/'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:27:10.230

我知道这与您的问题无关，但请注意，而不是这个：

```
char a[20];
char b[20];
char c[20];
char d[20];
sprintf(a, "%d", date[0]);
sprintf(b, "%d", date[1]);
sprintf(c, "%d", date[2]);

strcpy (d,a);
strcat (d,"/");
strcat (d,b);
strcat (d,"/");
strcat (d,c); 
```

你可以简单地这样做：

```
char d[20];
sprintf(d, "%d/%d/%d", date[0], date[1], date[2]); 
```

如果您想安全，请使用`snprintf`：

```
char d[20];
snprintf(d, sizeof d, "%d/%d/%d", date[0], date[1], date[2]); 
```

这样做，您可以摆脱临时缓冲区并消除使用`strcat`. 请注意，无论何时使用`strcat`，该函数都必须从字符串的开头开始，找到结尾，然后复制源字符串。

# iphone - 如何使用地图中的经度和纬度从 Web 应用程序在移动设备上加载地图应用程序

> ID：13215901
> 
> 赞同：1
> 
> 时间：2012-11-04T03:49:29.573
> 
> 标签：iphone, web-applications, maps, latitude-longitude

我有一个移动网络应用程序，它具有谷歌地图功能和一个单击按钮以获取到特定位置的路线，目前它会将您带到移动地图应用程序中的邮寄地址位置。有没有办法对其进行编码，以便用 long 和 lat 而不是邮寄地址标记该区域？网站上地图上的标记是标记经度和纬度，这已经保存在我的网站上。所以我已经有了所有需要的信息，只是不确定要改变什么才能让移动地图正确加载位置。任何建议将不胜感激。

# javascript - web2py：可以用一个“提交”按钮提交多个表单吗？

> ID：13215902
> 
> 赞同：0
> 
> 时间：2012-11-04T03:49:39.260
> 
> 标签：javascript, python, html, dom, web2py

是否可以使用单个“提交”按钮提交多个表单？如果是这样，这样做的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:56:23.063

严格来说，这不是一个`web2py`问题，而是一个 HTML（DOM - 文档对象模型）并用`javascript`问题来操作 DOM。

您可以使用 . 单击一个按钮，一次性提交 2 个（或更多表单）`javascript`。

像这样：-

```
<form id="id1" ...> ...</form>
<form id="id2" ...> ...</form>

<button onclick="document.getElementById('id1').submit();document.getElementById('id2').submit();" /> 
```

当您必须将请求发布到现在需要同时处理的 web2py 应用程序中的两个单独的 url/函数时，您可能会遇到问题？

正确的方法可能是您可能需要编写一个函数，将表单对象更改为字段集作为单个表单的一部分。

在 django 中，表单集正是这样做的，并将多个表单转换为仅属于模板中的 1 个单一 HTML 表单的字段集，因此原来的“多个表单”成为前端中 1 个单一表单的一部分。

像这样：-

```
<form method="post" action="">
    {{ formset.management_form }}
    {% for form in formset %}
        {{ form.id }}
        <ul>
            <li>{{ form.title }}</li>
            {% if formset.can_delete %}
                <li>{{ form.DELETE }}</li>
            {% endif %}
        </ul>
    {% endfor %}
</form> 
```

`web2py`:-

[http://www.web2pyslices.com/slice/show/1458/two-forms-on-one-page-with-custom-forms-to-update-record](http://www.web2pyslices.com/slice/show/1458/two-forms-on-one-page-with-custom-forms-to-update-record)

```
def new():
    form = SQLFORM.factory(db.contact,db.groups)

    if form.accepts(request.vars):
        _id_user = db.contacts.insert(**db.contacts._filter_fields(form.vars))

        form.vars.contact = _id_user

        id = db.groups.insert(**db.groups._filter_fields(form.vars))

        response.flash = 'User registered successfully'
    return locals() 
```

它仅返回您的 web2py 模板 1 单一表单。

# java - GridView 的 addView

> ID：13215905
> 
> 赞同：3
> 
> 时间：2012-11-04T03:50:23.177
> 
> 标签：java, android, inheritance

我想为 GridView 添加页脚视图。

我在文档中发现 GridView 有 2 个继承的**addView(View child)**方法。

```
From class android.widgetAdapterView

void addView(View child)

This method is not supported and throws an UnsupportedOperationException when called. 
```

和

```
From class android.view.ViewGroup

void addView(View child)

Adds a child view. 
```

看来我应该使用后者。但是我怎样才能调用这个特殊的继承方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:07:31.580

你没有。它用 a 覆盖原始文件，`UnsupportedOperationException`因为它......好吧......不支持。

您应该改为编辑适配器。根据您的实施，这看起来会有所不同。但是，您只需向适配器添加更多数据，并调用`.notifyDataSetChanged()`适配器，您`GridView`将自行添加视图。

页脚视图应该`View`在您的 之后是一个单独的视图`GridView`，或者您必须在添加新项目时将其在适配器列表中的位置保持在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T15:54:26.137

提供一个 Eric 解决方案的示例，适配器可以维护两个额外的成员来跟踪“页脚”的位置，以及它的事件处理程序：

```
class ImageViewGridAdapter : ArrayAdapter<int>
{
    private readonly List<int> images;

    public int EventHandlerPosition { get; set; }
    public EventHandler AddNewImageEventHandler { get; set; }

    public ImageViewGridAdapter(Context context, int textViewResourceId, List<int> images)
        : base(context, textViewResourceId, images)
    {
        this.images = images;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        ImageView v = (ImageView)convertView;

        if (v == null)
        {
            LayoutInflater li = (LayoutInflater)this.Context.GetSystemService(Context.LayoutInflaterService);
            v = (ImageView)li.Inflate(Resource.Layout.GridItem_Image, null);

            // ** Need to assign event handler in here, since GetView 
            // is called an arbitrary # of times, and the += incrementor
            // will result in multiple event fires

            // Technique 1 - More flexisble, more maintenance ////////////////////
            if (position == EventHandlerPosition)            
                v.Click += AddNewImageEventHandler;

            // Technique 2 - less flexible, less maintenance /////////////////////
            if (position == images.Count)
                v.Click += AddNewImageEventHandler;
        }

        if (images[position] != null)
        {
            v.SetBackgroundResource(images[position]);
        }

        return v;
    }
} 
```

然后，在将适配器分配给网格视图之前，只需分配这些值（位置不必在末尾，但对于页脚应该是）：

```
List<int> images = new List<int> { 
    Resource.Drawable.image1, Resource.Drawable.image2, Resource.Drawable.image_footer 
};

ImageViewGridAdapter recordAttachmentsAdapter = new ImageViewGridAdapter(Activity, 0, images);

recordAttachmentsAdapter.EventHandlerPosition = images.Count;
recordAttachmentsAdapter.AddNewImageEventHandler += NewAttachmentClickHandler;

_recordAttachmentsGrid.Adapter = recordAttachmentsAdapter; 
```

# android - Android XML 表格行

> ID：13215909
> 
> 赞同：1
> 
> 时间：2012-11-04T03:51:29.403
> 
> 标签：android, android-layout

图片：www.gunzhaxplz.com/xmlAndroid.png [我的问题 http://gunzhaxplz.com/xmlAndroid.png](http://gunzhaxplz.com/xmlAndroid.png)

前言：我正在制作一个需要在一个表格行上有 6 个图像的应用程序。

问题：我似乎无法调整大小的图像，右边的最后一张图像不在屏幕上

这是 XML：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/TableLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/golem_square" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/lizard_square" />

    <ImageButton
        android:id="@+id/imageButton3"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:src="@drawable/baron_square" />

    <ImageButton
        android:id="@+id/imageButton4"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/dragon_square" />

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageButton
        android:id="@+id/ImageButton03"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/golem_square" />

    <ImageButton
        android:id="@+id/ImageButton01"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/lizard_square" />

    <ImageButton
        android:id="@+id/ImageButton02"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:src="@drawable/baron_square" />

    <ImageButton
        android:id="@+id/ImageButton04"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/dragon_square" />
</TableRow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:08:31.973

尝试在每个 ImageButton 中设置以下参数

```
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:adjustViewBounds="true"
android:maxWidth="32dpi"
android:maxHeight="32dpi" 
```

# c++ - Xcode 在哪里创建 .txt 文件？

> ID：13215910
> 
> 赞同：5
> 
> 时间：2012-11-04T03:51:29.387
> 
> 标签：c++, file, location

[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)

我刚刚完成了这个，但我的桌面上没有任何文件。

那么 .txt 文件放在我电脑的什么位置呢？

```
// basic file operations
#include <iostream>
#include <fstream>
using namespace std;

int main ()
{
    ofstream myfile;
    myfile.open ("example.txt");
    myfile << "Writing this to a file.\n";
    myfile.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T23:56:28.867

该死的...我看到这个帖子从来没有回答过很多次..

**这是解决方案**

当您在当前项目中工作时，在您的项目导航器中有很多文件。试用产品（如果我记得的话）并寻找可执行文件。现在去属性检查器或任何被调用的东西。（Xcode 的右侧。）

在那里你会在某个地方找到一个叫做`PATH`路径的部分，它写在那里。这是可执行文件运行的路径。这意味着您可以在其中找到使用程序创建的所有文件。

试试看……这就是我管理和查看`.txt`文件的方式，因为有时我想给它们一些格式。

我希望我已经解决了你的问题......干杯！;)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-15T10:26:16.033

单击左侧产品选项卡中的可执行文件，您应该会在实用程序部分的右侧看到它的路径。这是他们得救的地方。在我的电脑上，这条路径是：

`/Users/myName/Library/Developer/Xcode/DerivedData/CurrentXcodeProject-adsnvetbleazktcgitfymfcbhkkt/Build/Products/Debug/filename.txt`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T03:53:15.483

在“当前目录”中，表示您运行可执行文件的环境的工作目录。

我不能告诉你那是什么，但在基本情况下，它可能是可执行文件所在的目录。*在许多其他情况下，它可能不是。*

在硬盘驱动器上搜索文件将向您显示其位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-09T03:31:52.837

右键单击您的产品并选择“在 Finder 中显示”。那就是打开输出文件所在的路径。您也可以在那里添加输入文件以供您的程序读取。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-07T22:28:13.720

如果您在 Mavericks 上右键单击您的用户文件夹，其中包含您的文档、图片和内容 (~/Users/yourusername) 现在右键单击并查看选项。检查“显示库”。现在按照上面第一个用户所说的路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-22T12:36:59.343

在这里找到最佳答案： [Xcode 上的 C++ 中的文件创建](https://stackoverflow.com/questions/14098836/file-creation-in-c-on-xcode/14098917#14098917?newreg=b27bff6dfdf34ff99faac2cb7b2bfc19)

基本上，您可以指定一个已知目录，以便创建的所有文件都到那里。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-04T04:06:51.840

当应用程序保存文件并且我不知道在哪里时，我一直在做的事情......只是回到那个应用程序，然后点击文件>另存为......

所以重新打开 Xcode 并转到“文件”菜单，然后单击“另存为...”

它将向您显示刚刚保存到的同一目录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-20T19:51:07.740

我已经检查了“当前目录”，但我相信我必须指定位置。甚至不

```
~User/Desktop 
```

将工作。

我所做的是在我的桌面上创建一个具有正确名称的空文件，然后将该文件拖到我的 Xcode 项目中以获取其路径。然后我删除文件。

与将文件添加到我的项目中相同。我可以从`File`菜单中添加它们，但我需要将它们拖到我想要引用它们的代码中的位置。

这有点令人费解，但它是我拥有的唯一系统。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-02T00:03:50.123

有些答案令人困惑。这是最简单的解决方案。1\. 展开左侧的 Products 文件夹 2\. 右键单击​​终端图标（对不起，我不知道它叫什么） 3\. 单击在 Finder 中显示。您应该能够在其中看到您的输出文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-07T17:37:19.247

“ Xcode 在哪里创建 .txt 文件？”

您可以决定您想要的位置：按照这些->

1.  " Product->Scheme->EditScheme "
2.  在新的弹出窗口“选项”中选择选项选项卡
3.  “工作目录”勾选“使用coatroom工作目录”并找到您想要的文件夹。

您“创建”或想要“阅读”的 .txt 文件必须保存在此文件夹中。

# php - 在 PHP 中跟踪会话 - 我做得对吗？

> ID：13215913
> 
> 赞同：0
> 
> 时间：2012-11-04T03:52:04.063
> 
> 标签：php, session

我是第一次 php 开发人员；

我以这种方式跟踪会话：

```
session_start();
if (!isset($_SESSION['user']->iduser)) {
    die('Access denied. <br><a href=login.php>Please login</a>');
} 
```

那是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:58:09.227

您的代码看起来好像您将整个对象存储到一个会话变量中，这不是一个好主意（可能会占用大量空间，存储太多数据，甚至可以不进行序列化/反序列化吗？ ）。

此外，如果您的用户尚未通过身份验证，您的代码会因为`$_SESSION['user']`尚未设置而引发警告 - 因此通过检查`$_SESSION['user']->iduser`，您将检查空对象上的属性/值。您的代码应该检查`if (isset($_SESSION['user'])) {`，然后可能对此进行验证。

我建议只在会话中存储“必需品”，例如用户的 ID/用户名和加密密码。然后，在每个页面加载期间，您根据数据库重新验证信息。这是每个页面加载的额外查询，但它是值得的（在我看来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:57:21.723

我想你真的在问这个问题：

> 是否可以通过会话中的唯一 ID 来识别用户？

我的回答：是的。这通常是如何完成的，并且会在会话中正常工作。我不会使用 cookie 这样做，但在服务器端会话存储中应该没问题。

# android - 在设备上运行时出现 UnknownHostException

> ID：13215914
> 
> 赞同：1
> 
> 时间：2012-11-04T03:52:33.427
> 
> 标签：android, hosts, unknown-host

在设备上运行应用程序时出现 UnknownHostException。在模拟器中，它很好。我做了服务器和主机文件的配置。但我不知道我是否必须再做一次。请，任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:58:24.090

我能够解决这个问题。重新启动avd，将hosts文件复制到android模拟器，添加互联网权限。然后问题就解决了。

# android - 在 Android 中创建游戏重力？

> ID：13215917
> 
> 赞同：2
> 
> 时间：2012-11-04T03:54:30.163
> 
> 标签：android, eclipse, gravity

我正在尝试在 Android 中创建游戏重力。我创建了一个更新方法、一个显示和重力。现在应用程序不会强制关闭，但球不会移动。我是否需要为 .getHieght() 和 .getWidth() 方法使用画布？

```
public class MainActivity extends Activity {
private int c = Color.YELLOW;
private Canvas g;
@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
draw();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}

// draws the ball
public void draw ()
{
Display display = getWindowManager().getDefaultDisplay();

int width = display.getHeight();
int height = display.getWidth();

Bitmap bitmap = Bitmap.createBitmap(width, height, Config.RGB_565);

g = new Canvas(bitmap);
g.drawColor(c);
Paint paint = new Paint();
paint.setColor(Color.BLACK);
g.drawCircle(50, 10, 25, paint); //Put your values
update();

// In order to display this image, we need to create a new ImageView that we can        display.
ImageView imageView = new ImageView(this);

// Set this ImageView's bitmap to ours
imageView.setImageBitmap(bitmap);

// Create a simple layout and add imageview to it.
RelativeLayout layout = new RelativeLayout(this);
RelativeLayout.LayoutParams params = new     RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.CENTER_IN_PARENT);
layout.addView(imageView, params);
layout.setBackgroundColor(Color.BLACK);

// Show layout in activity.
setContentView(layout);   
}
private void update(){
// wall collisions;
    if (x + dx > sp.getWidth() - radius - 1) {
        x = sp.getWidth() - radius - 1;
        // bounce off right wall;
        dx = -dx;
        // bounce off left wall;
    } else if (x + dx < 0 + radius) {
        x = 0 + radius;
        dx = -dx;
    } else {
        x += dx;
    }

    // friction;
    if (y == sp.getHeight() - radius - 1) {
        dx *= xFriction;
        if (Math.abs(dx) < .8) {
            dx = 0;
        }
    }
    // gravity;
    if (y > sp.getHeight() - radius - 1) {
        y = sp.getHeight() - radius - 1;
        dy *= energyloss;
        dy = -dy;
    } else {
        // velocity formula;
        dy += gravity * dt;
        // position formula;
        y += dy * dt + .5 * gravity * dt * dt;

    } 
```

}

```
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:32:06.393

在我看来，你的方法都是错误的，并且正在创造复杂性。

这就是我的做法。创建两个类，一个用于球，一个用于绘制它的某个地方。这些方面的东西：

```
public class Ball{

    private int radius;
    private int xPosition;
    private int yPosition;
    private int color;
    private Paint paint;

    public Ball(int x, int y, int radius, int color)
    { 
        this.xPosition = x; this.yPosition = y; this.radius = radius;
        paint = new Paint(color);
    }

    void moveBall(int x, int y){
         xPosition = x; yPosition =y;        
    } 

    void onDraw(Canvas canvas){
          canvas.drawCircle(x, y, radius, paint);
    }              

} 
```

现在在某个地方画它。

```
public class Playground extends ImageView{

       public Ball ball;    

       @Override
       public void onDraw(Canvas canvas)
       {
           super.onDraw(canvas);
           if (ball != null ){
               ball.onDraw(canvas);
           }
       }

 } 
```

在您的活动中，可能在 onStart() 中：

```
imageView.ball = new Ball(startX, startY, radius, Color.BLUE); 
```

将你的“更新”方法也移动到球类中，并在计时器上调用 ball.update() （或者在你想要更新它的时候）。

用 Playground 类（突然出现在我脑海中的名字）替换布局中的 ImageView。

覆盖 ImageView 扩展中的 onMeasure() 以获取“操场”的高度和宽度。

这为您提供了基础知识。我把这个写在我的头上，所以请原谅错别字等

此外，请查看您之前关于此主题的多个问题中给出的答案，并阅读有关扩展 View 类、onDraw 和 onMeasure 的 Android 文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T04:06:57.423

我想你只画一次，你可以添加一个计时器来触发 draw() 方法

# html - 如何制定可靠的 CSS 策略？

> ID：13215918
> 
> 赞同：0
> 
> 时间：2012-11-04T03:54:43.353
> 
> 标签：html, css, web-deployment

我花时间仔细学习了 HTML5、CSS3 和 JQuery 的语法。

我现在想找到一个很好的资源来帮助我开发一个可靠的“设计过程”。到目前为止，在我所做的小设计中，我通常会得到一个看起来很讨厌的 .css 样式表，其中包含很多一次性主义。

我愿意接受任何关于好的资源的建议，或者只是一些有助于实现良好 HTML/CSS 设计策略的指针。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:04:41.797

将样式表分解为模块：导航、内容类型、页眉、页脚等。

不要使用 id 来分配样式。这提供了有关原因的更多信息，以及更多有用的提示[http://oli.jp/2011/ids/](http://oli.jp/2011/ids/)

阅读[http://css-tricks.com/](http://css-tricks.com/)，Chris Coyier 总是在他的网站上提供有用的提示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:24:11.850

对你的 CSS 样式进行分组，就像上面提到的 @DevonRW 一样。

注释您的 CSS，就像您注释较长的代码一样。它将帮助您和其他团队成员进行后期维护。

不过要小心，不要像创建一个**只**定义某物颜色的样式定义这样的事情。使用 jQuery 时，您通常最终需要添加类，以便一个元素在给定时间可以具有三个或四个类……但您不想从三个或四个开始。对您的网站样式进行故障排除和即时彻底更改可能会变得非常棘手。

我尝试过的一件事是为类名提出一个命名法：sClassName 用于常规类，jqClassName 用于将由 jQuery 添加（或删除）的类。不过，这可能对您有帮助，也可能对您没有帮助。

# macos - 在运行时更改 Mac OS 进程中的函数引用

> ID：13215920
> 
> 赞同：2
> 
> 时间：2012-11-04T03:55:13.690
> 
> 标签：macos, mach-o

我需要在运行时将 Mac OS 进程中的函数引用更改为我自己的自定义 dylib 中定义的自定义函数。我保持新的函数签名与原来的相同。例如，我需要将“open”函数更改为“myopen”函数。

我尝试处理 __LINKEDIT 段以获取动态符号表和字符串表。我使用了以下指针，1.来自 __LINKEDIT 段的 VMAddrress，2.来自“_dyld_register_func_for_add_image”回调的 mach_header 和 vmaddr_slide，3.来自 symtab_command 的 symoff 和 stroff。

但是我无法获取 __LINKEDIT 段中提到的符号表和字符串表。有人可以对此有所了解吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:31:29.620

如果所讨论的函数是库函数，并且没有静态编译到可执行文件中，则您无需执行任何操作 - 您可以使用函数插入来代替。具体来说，将其添加到您的库中：

```
 // The attribute creates a Mach-O Section in your library - q.v. libgmalloc.dylib for 
  // a nice example
    static const interpose_t interposing_functions[] \
        __attribute__ ((section("__DATA, __interpose"))) = {
            { (void *)my_open,  (void *)open  },
            { (void *)my_close, (void *)close }, // .. etc
        };

int  my_open(const char *path, int flags, mode_t mode)
{

    int rc;
    // Prolog - do something before open

    rc = open(path, flags, mode); // call real open

    // Epilog - record rc, etc..    

    return rc;
} 
```

有几本关于 OS X 内部的优秀书籍可以为您提供示例，但显然根据 SO 网站政策，我们无法将您链接到它们。也就是说，上面的代码片段应该可以工作。请记住，这不适用于其他 dylib 执行的 open 调用（尽管也有更复杂的方法来获得它）

# ios - ASIHttpRequest 库不再维护？

> ID：13215921
> 
> 赞同：0
> 
> 时间：2012-11-04T03:55:25.220
> 
> 标签：ios

今天，我正在搜索用于处理 iOS http 请求的库。我有一个名为 ASIHttpRequest 的库。但是当我查找它的文档时。但！我找到了网站的第一行“请注意，我不再在这个库上工作 - 你可能想考虑为新项目使用其他东西。:)”蓝色背景！我找到了“上次更新时间：2011 年 5 月 15 日（v1.8.1）”这句话。我还能在我的新项目中使用 ASIHttpRequest 库吗？还有其他更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:58:31.673

没错，不再维护 ASIHTTPRequest。

我认为[AFNetworking](https://github.com/AFNetworking/AFNetworking)是 iOS 上最好的 HTTP 库。它的文档非常好，您应该能够非常轻松地启动和运行。

# ruby - Sinatra-assetpack 未在 Classic 类型的 Sinatra 应用程序中编译 Less 文件

> ID：13215922
> 
> 赞同：2
> 
> 时间：2012-11-04T03:55:40.973
> 
> 标签：ruby, sinatra, less, sinatra-assetpack

我无法弄清楚如何做到这一点。我所有的主要 .less 文件都在 中`/app/css/less`，@import'ed 文件在`/app/css/less/bootstrap`. 我的主要样式表`/app/css/less/style.less`应该编译为“/public/css/style.css”。

使用经典的 Sinatra 应用程序结构（不是基础），我在各种文件中有以下内容（省略了不相关的代码）：****Gemfile

```
# encoding: utf-8
source :rubygems

gem 'sinatra'
gem 'thin'
gem 'less'
gem 'therubyracer'
gem 'haml', '~> 3.2.0.rc.1'
gem 'sinatra-partial'
gem 'sinatra-assetpack', :git => 'git://github.com/rupe/sinatra-assetpack.git', :require => 'sinatra/assetpack' 
```

****myapp.rb

```
# encoding: utf-8

require 'rubygems'
require 'bundler/setup'

require 'sinatra'
require 'haml'
require 'sinatra/partial'
require 'sinatra/assetpack'
require 'less'

assets do
  Less.paths .lt.lt "#{settings.root}/app/css/less"
  Less.paths .lt.lt "#{settings.root}/app/css/less/bootstrap"
  serve '/css', from: '/app/css/less'
  css :style, [
    '/css/style.css'
  ]
  prebuild true
end 
```

****布局.haml

```
!= css :style, :media => 'screen' 
```

在提供的 html 中生成此样式表相关标记：

```
link rel="stylesheet" href="/css/style.496718.css" media="screen" 
```

但实际上并不编译该文件`style.49718.css`。事实上，它根本不编译任何文件。

注意：Gemfile 中提到的 git 分支是修复了较少支持的“pbaker”分支的副本（据说）。我已经尝试过标准 gem 和其他版本，但都没有任何运气。

可能的原因是什么？

`@import`注意：可以在[此处](https://stackoverflow.com/questions/12099319/how-do-i-get-twitter-bootstraps-less-files-to-work-with-sinatra-assetpack/12099530#12099530)找到一个相关的问题，但不重复（因为它仅指问题） 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:36:45.457

终于搞清楚是什么问题了，`--all`运行的时候不得不使用这个选项`bundle package`。所以`bundle package --all`创建了我的自定义 git fork `sinatra-assetpack`gem 的本地缓存，现在所有的工作都“像宣传的那样”:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:49:45.290

作为替代方案（对于 google 的后代），最近在 AssetPack gem 上做了很多工作（现在内置的支持较少）。

这个 Gist 有一个支持较少的完整示例：[https](https://gist.github.com/4652773) ://gist.github.com/4652773 。

# jquery - 如何让我的 JQuery 代码识别 URL 中的参数，然后选择一行代码

> ID：13215925
> 
> 赞同：1
> 
> 时间：2012-11-04T03:56:14.467
> 
> 标签：jquery, url, parameters

在下面的代码中，我想更改如下代码行：

```
$("#commentload"+ID).prepend(html); 
```

因此，`order=1`例如，如果在 URL 中找到参数，`http://my.com?order=1`那么它应该执行。

```
$("#commentload"+ID).append(html); 
```

代替

```
$("#commentload"+ID).prepend(html); 
```

希望你明白我的意思。

```
$(document).ready(function(){
   // Update Status
   $(".update_button").click(function(){
      var updateval = $("#update").val();
      var dataString = 'update='+ updateval;
      if(updateval==''){
         alert("Please Enter Some Text");
      } else {
         $("#flash").show();
         $("#flash").fadeIn(400).html('Loading Update...');
         $.ajax({
            type: "POST",
            url: "message_ajax.php?CID=" + CID + "&Id="+Id,
            data: dataString,
            cache: false,
            success: function(html){
               $("#flash").fadeOut('slow');
               $("#commentload"+ID).prepend(html);
               $("#update").val('');
               $("#update").focus();
               $("#stexpand").oembed(updateval);
            }
         });
      }
      return false;
   });
   //commment Submit
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T04:06:59.130

`location.href`您可以使用（或`location.search`，因为您只对查询部分感兴趣）获取当前 URL 。搜索您的参数，例如使用正则表达式：

```
if ( /order=1/.test(location.href) )
    $("#commentload"+ID).append(html);
else
    $("#commentload"+ID).prepend(html); 
```

如果您需要更通用的解决方案，请参阅[此相关问题](https://stackoverflow.com/q/1403888/520779)（或@naveen 建议的这个问题）[。](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values/901144#901144)

# objective-c - 如何将物体从一个地方移动到另一个地方

> ID：13215929
> 
> 赞同：0
> 
> 时间：2012-11-04T03:57:03.407
> 
> 标签：objective-c, xcode, animation

如何在 Xcode 中使对象从位置 a (x, y) 移动到位置 b (x, y)，最好使用 Cocoa Touch。

问候，尼基塔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:05:01.327

使用核心动画块：

```
[UIView animateWithDuration:5.0
                 animations:^{ 
                   myView.frame = newFrame; 
                 } completion:^(BOOL  completed){
                   // done!
                 }]; 
```

# c# - 加密应用程序设置时出错

> ID：13215941
> 
> 赞同：0
> 
> 时间：2012-11-04T03:59:45.997
> 
> 标签：c#, .net, aspnet-regiis.exe

我一直在使用 Settings.settings 文件来存储应用程序数据。

```
<applicationSettings>
    <SLA_TestService.Properties.Settings>
      <setting name="AuthenticationName" serializeAs="String">
        <value>IBR</value>
      </setting>
      <setting name="AuthenticationPassowrd" serializeAs="String">
        <value>IBR</value>
      </setting>
    </SLA_TestService.Properties.Settings>
</applicationSettings> 
```

我使用加密应用程序设置

```
aspnet_regiis -pe "applicationSettings/SLA_TestService.Properties.Settings" -app     "/SLAMobility" 
```

我使用以下方式访问设置；

```
string pword = Properties.Settings.Default.AuthenticationPassowrd 
```

但是它会引发以下错误；

```
ExceptionType=System.Configuration.ConfigurationErrorsException
StackTrace=
  at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
  at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
  at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
  at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
  at System.Configuration.ConfigurationManager.GetSection(String sectionName)
  at System.Configuration.ClientSettingsStore.ReadSettings(String sectionName, Boolean isUserScoped)
  at System.Configuration.LocalFileSettingsProvider.GetPropertyValues(SettingsContext context, SettingsPropertyCollection properties)
  at System.Configuration.SettingsBase.GetPropertiesFromProvider(SettingsProvider provider)
  at System.Configuration.SettingsBase.GetPropertyValueByName(String propertyName)
  at System.Configuration.SettingsBase.get_Item(String propertyName)
  at System.Configuration.ApplicationSettingsBase.GetPropertyValue(String propertyName)
  at System.Configuration.ApplicationSettingsBase.get_Item(String propertyName)
  at SLA_TestService.Properties.Settings.get_AuthenticationName() in C:\Users\Mananu\documents\visual studio 2010\Projects\SLA_TestService\SLA_TestService\Properties\Settings.Designer.cs:line 31
  at SLA_TestService.Controllers.ValuesController.GetValues() in C:\Users\Mananu\documents\visual studio 2010\Projects\SLA_TestService\SLA_TestService\Controllers\ValuesController.cs:line 15
  at lambda_method(Closure , Object , Object[] )
  at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
  at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
  at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken) 
```

我究竟做错了什么？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:12:36.803

你打错字了，我相信。

在您的配置文件中，将“AuthenticationPassowrd”更改为“AuthenticationPassword”。

# jquery - 将项目添加到购物车 jquery 功能

> ID：13215942
> 
> 赞同：2
> 
> 时间：2012-11-04T03:59:56.310
> 
> 标签：jquery, post, cart

我的 php 最后通过 echo 创建每个产品是

```
<form name="addToCartForm">
<input type="hidden" id="inputid" value="'.$id.'"/>
<input type="submit" id="submitbutton" value="Add to cart"/>
</form> 
```

网站上通常动态创建 10 个产品

因此，对于 php 显示的每个产品，我有 10 个具有相同类或 id 的按钮

关于通过邮寄（jquery）将数据发送到cart.php文件而不刷新网站的功能的任何想法。我必须在 $_POST 中发送正确的产品 ID，以便 cart.php 知道添加了什么。

为什么当我添加

```
$(document).ready(function(e) {
    $('#submitbutton').click(function(e) {
        var pos = $('#inputid').val();
        alert(pos);
        return false;
    });
}); 
```

它正在提醒第一个按钮添加到购物车不是全部

我是 jquery 的新手 :) 请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:20:28.367

听起来您正在寻找 AJAX 功能。幸运的是，jQuery 有一个用于 AJAX 调用的函数，在[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)中有描述。

然后，您可以编写一些代码，如下所示：

```
$(document).ready(function() {
    $('#submitbutton').click(function() {
        var pos = $('#inputid').val();
        $.ajax({
            url: "cart.php",
            type: "POST",
            data: {itemID: pos},
            success: function(data) {
                // Do stuff when the AJAX call returns
            }
        });
    });
}); 
```

但是，这有一个缺陷。如果您要在同一页面上有多个提交按钮，则不能对所有按钮使用相同的 ID。最好给所有字段一个类，如下所示：

```
<form name="addToCartForm">
    <input type="hidden" class="inputid" value="'.$id.'"/>
    <input type="submit" class="submitbutton" value="Add to cart"/>
 </form> 
```

您的最终 Javascript 代码将如下所示：

```
$(document).ready(function() {
    $('.submitbutton').click(function() {
        var pos = $(this).parent().find('.inputid').val();
        $.ajax({
            url: "cart.php",
            type: "POST",
            data: {itemID: pos},
            success: function(data) {
                // Do stuff when the AJAX call returns
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:15:21.637

你不能有多个相同的元素`id`。尝试添加这样的`class`东西，

```
<form name="addToCartForm">
  <input type="hidden" id="inputid_1" class="inputid" value="'.$id.'"/>
  <input type="submit" id="submitbutton_1" class="submitbutton" value="Add to cart"/>
</form> 
```

JS代码应该是，

```
$(document).ready(function(e) {
   $('.submitbutton').click(function(e) {
    var pos = $(this).parent().find('.inputid').val();
    alert(pos);
    //Do your AJAX call here to send data to server.
    return false;
  });​
}); 
```

演示：http: [//jsfiddle.net/meqY5/1/](http://jsfiddle.net/meqY5/1/)

# ios - iPhone UIAlertview 放弃内存

> ID：13215943
> 
> 赞同：2
> 
> 时间：2012-11-04T04:00:17.947
> 
> 标签：ios, memory-management, uialertview, memory-leaks

我使用 UIAlertview 输入一些文本，它工作正常。但是，alertview 关闭后，在打开 alertview 之前内存仍然增加了 17MB 以上（从 9MB 到 26MB）。我使用 Instrument Allocation 来测量堆内存和活动监视器来测量它。它们都显示了相似的结果。当我切换到其他应用程序时，alertview 增加的内存将减少到适当的水平。正常吗？我的环境是iPhone4+iOS6。这是一些尝试的代码。

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"input caption" message:@"text"
                                                   delegate:self cancelButtonTitle:@"cancel"  otherButtonTitles:@"OK", nil];
   [alert show];
   [alert release]; 
```

谢谢你。

* * *

亲爱的 Naveed S 和 Purr， 非常感谢。我不确定我是否正确遵循了您的建议。但是我用Activity monitor watch the Real mem，alertview关闭后内存还是增加了20MB左右。我在 [alert show] 之后删除 [alert release]，然后我写了

```
 [alert show];
 //[alert release];

 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
 { [alertView dismissWithClickedButtonIndex:buttonIndex animated:YES];
  [alertView autorelease];                                                      } 
```

此外，当我按下主页后应用程序进入后台模式时，内存会减少。（这与我之前的代码类似）。我怎么能正确地观看废弃的记忆。我什至不知道如何以正确的方式观看它......

顺便说一句，我的原始代码遵循此处的帖子。 [Uialertview 和内存管理](https://stackoverflow.com/questions/4365064/uialertview-and-memory-management)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:01:46.493

一方面，你应该自动释放你的 alertView。`-alertView:didDismissWithButtonIndex:`由 调用，因此当您的方法返回时`UIAlertView`， alertView 对象应该仍然有效（不是）。`-release'd`

更好的是，转换为 ARC 并使用手动完成`-retain`，`-release`并且`-autorelease`;)

如果您不转换为 ARC，请执行以下操作：从原始帖子中的代码中删除 -release，取消注释`//CRASH`您的`-alertView:didDismissWithButtonIndex:`方法中的注释并将 更改`-release`为`-autorelease`那里。

# c# - 简化winforms代码跨线程调用

> ID：13215946
> 
> 赞同：3
> 
> 时间：2012-11-04T04:00:50.113
> 
> 标签：c#, .net, winforms, optimization, invoke

我正在开发一个跨线程应用程序，其中包含一些方法`Invoke`：

```
if (this.InvokeRequired)
{
    this.Invoke((Action)(() =>
    {
        pbTotalProgress.Value = progress;
        labe1.Text="SomeText";
    }));
}
else
{
    pbTotalProgress.Value = progress;
    labe1.Text="SomeText";
} 
```

我怎样才能把下面的代码写得更短一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:11:49.873

您至少应该只定义一次操作（不要在 else 分支中再次使用代码，只需在没有调用的情况下在那里运行操作。
您还可以编写一个扩展方法来控制将操作作为调用运行如果需要或只是运行它。这将消除事件处理程序的复杂性，您最终将在应用程序中对许多事件使用相同的模式。

```
static class ControlExtensions
{
  public static void InvokeOrExecute(this Control control, Action action)
  {
     if (control.InvokeRequired)
     {
        control.Invoke(action);
     }
     else
     {
        action();
     }
  }
} 
```

然后在每个可能是跨线程的事件中：

```
Action setProgress = delegate()
     {
        pbTotalProgress.Value = progress;
        labe1.Text = "SomeText";
     };
this.InvokeOrExecute(setProgress); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:11:44.447

由于它是相同的代码块，因此您可以将其设置在`Action`变量中并`Invoke`/ 执行它。尝试类似：

```
Action setProgress = delegate() {
    pbTotalProgress.Value = progress;
    labe1.Text = "SomeText";
};
if (this.InvokeRequired) {
    this.Invoke(setProgress);
} else {
    setProgress();
} 
```

您的确切代码并不真正需要优化。唯一发生的事情是您正在对 boolean flag 执行条件检查`this.InvokeRequired`。如果有的话，我的回答只提供了编写一次操作代码而不是复制它的能力。

# html - 如何检测广告链接？

> ID：13215954
> 
> 赞同：1
> 
> 时间：2012-11-04T04:02:50.300
> 
> 标签：html, algorithm, data-analysis

我想检测页面中用于广告的链接。或者是否有任何统计数据可以让我猜出这个链接是用于广告的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:09:15.480

我知道这不是一个具体的答案，但如果我也这样做，我会看看 AdBlock 和 Firefox 等浏览器中的其他附加组件，因为它们的作用大致相同。有很多开源插件，您可以在其中查看执行此操作的代码。甚至大多数电子邮件程序都使用贝叶斯过滤器检测垃圾邮件（和广告），我相信稍微调整一下就可以了。

# c# - 动态生成新类

> ID：13215956
> 
> 赞同：0
> 
> 时间：2012-11-04T04:03:56.650
> 
> 标签：c#, dynamic

我想编写一些动态创建新类并将其存储在`.cs`文件中的代码。
我想知道除了创建字符串并将它们写入文本文件之外，是否有一种标准的方法来执行此操作？基本上，我已经编写了一个面向对象的神经网络，我希望它能够将自身高度优化的硬连线最终版本输出到一个新类中，以便在其他代码中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:08:26.380

使用[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)生成文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:12:29.780

除了将字符串写入文本文件（这是适用于小型项目的最简单选项）之外，您还可以使用*模板引擎*。.NET 中有几个选项可用：

*   **[文本模板转换工具包 (T4)](http://msdn.microsoft.com/en-us/library/ee844259.aspx)** - Microsoft 的模板引擎。T4 在整个 Visual Studio 中用于代码生成。
*   **[字符串模板引擎](http://www.stringtemplate.org/)**- 来自 ANTLR 设计者的模板引擎，一种流行的解析器生成器。

# struts2 - 如何使用 或其他 struts 标记来迭代列表的一部分

> ID：13215958
> 
> 赞同：0
> 
> 时间：2012-11-04T04:04:21.203
> 
> 标签：struts2, struts, struts-html

我有一个名为`projectList`. 我以不同的方式处理了列表中的前 3 个元素，然后我想将`projectList`from index=3 迭代到最后。

我应该如何实现这一目标？带有纯 struts 标签的解决方案或与 Javascript 混合的解决方案都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:23:11.060

我认为这是你需要的：

```
<s:iterator value="projectList" status="itstatus">
         <s:if test="#itstatus.index > 3">
        <!-- YOUR CODE -->
         </s:if>
         <s:else>
            <!-- YOUR CODE -->
         </s:else>
</s:iterator> 
```

我现在无法测试它，所以它可能有一些错误。祝你好运！

# java - 如何从本地文件系统在 JEditorPane 中显示图像？

> ID：13215961
> 
> 赞同：1
> 
> 时间：2012-11-04T04:04:52.920
> 
> 标签：java, html, image, swing, user-interface

我正在尝试`JEditorPane`在 Java Swing 窗口中显示图像。用户使用 a`JFileChooser`在其计算机上查找图像的绝对路径，然后将该绝对路径嵌入到 HTML`<img>`标记中，然后将其设置在`JEditorPane`. 由于某种原因，图像不会显示在 中`JEditorPane`，我不知道为什么。我用谷歌搜索并找到了各种解决方案，但都没有奏效。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:08:09.643

您可以将图像放在 Document 的 imageCache 中，就像这里描述的那样 [http://java-sl.com/tip_local_images.html](http://java-sl.com/tip_local_images.html)

# ios - iOS - CoreData - TableViewController - NSInvalidArgumentException'，原因：'+entityForName: nil 不是合法的 NSManagedObjectContext

> ID：13215962
> 
> 赞同：3
> 
> 时间：2012-11-04T04:04:56.117
> 
> 标签：ios, core-data, uitableview

我用 . 创建了一个故事板`UITableViewController`，然后添加了一个核心数据实体。此时应用程序构建并运行没有错误，但`UITableViewController`没有显示任何数据。

我删除了 TVC 并在 StoryBoard 中重建，但自从我在运行应用程序并尝试打开 TVC 时遇到错误：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+entityForName：nil 不是搜索实体名称“景点”的合法 NSManagedObjectContext 参数

通过一些研究，意识到这是由于我`managedObjectContext`是空的，但对于我的生活，我无法弄清楚为什么它是空的。

在 TVC 头文件中：

```
#import <UIKit/UIKit.h>
#import "Attractions.h"
#import "AttractionListViewCell.h"
#import "ApplicationNameAppDelegate.h"

@interface AttractionListViewController : UITableViewController
{
    NSManagedObjectContext *managedObjectContext;
    NSMutableArray *AttractionsArray;    
}

@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, retain) NSMutableArray *AttractionsArray;

- (void) fetchrecords;

@end 
```

在 TVC 模型文件中：

```
ApplicationNameAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *managedObjectContext = [appDelegate managedObjectContext];

NSLog(managedObjectContext);
// Create connection to the DB via Context
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Attractions" inManagedObjectContext:managedObjectContext]; 
```

在*ApplicationNameAppDelegate.h*文件中：

```
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory; 
```

您可以提供的任何帮助或见解将不胜感激。

编辑 - 添加 AppDelegate 信息：

```
#import <UIKit/UIKit.h>
#import "AttractionListViewController.h"
#import <CoreData/CoreData.h>

@class AttractionListViewController;

@interface AppNameAppDelegate : UIResponder <UIApplicationDelegate>
{
    NSManagedObjectModel *managedObjectModel;
    NSManagedObjectContext *managedObjectContext;
    NSPersistentStoreCoordinator *persistentStoreCoordinator;
}

@property (strong, nonatomic) AttractionListViewController *viewController;
@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:53:01.617

这一行：

```
NSManagedObjectContext *managedObjectContext = [appDelegate managedObjectContext]; 
```

您正在声明一个本地 managedObjectContext 并分配它，而不是您应该做什么：

```
managedObjectContext = [appDelegate managedObjectContext]; 
```

这将使用 TVC 的 iVar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:40:50.060

所以我发现了问题所在。在 xcode 生成的示例中，我没有从 AppDelegate 复制所有类，因此定义 managedObject 和持久存储等的类不存在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-26T22:29:36.640

在您的 View Controller 实现文件中，就在这段代码下面：

```
- (void)viewDidLoad
{ 
```

添加这段代码：

```
id delegate = [[UIApplication sharedApplication] delegate]; self.managedObjectContext = [delegate managedObjectContext]; 
```

# javascript - 使用 PDF 作为数据输入机制

> ID：13215964
> 
> 赞同：0
> 
> 时间：2012-11-04T04:05:02.267
> 
> 标签：javascript, forms, pdf, fdf

我正在努力将 PDF 转换为 HTML，但客户端没有它。所以我们开始吧。我需要一种方法来告诉内联的 pdf 表单将 POST 提交到 url。诸如此类的东西：

```
<!-- Inlined PDF --> 
<object type="application/pdf" data="http://xxxxxxx" id="pdf_form"> 
</object> 

<!-- Button I add to the page to do a form submit --> 
<input type="button" onclick="javascript: DoSubmit();"> 

<script type="text/javascript"> 
// Do a POST with the form data here.  Either getting the data out of the pdf 
// or using ACROBAT's FDF export & http submit to handle this 
function DoSubmit() {
  // Get 'pdf_form' and tell it to post it's data to a url  
} 
</script> 
```

我需要它以这种方式工作，因为客户在想要添加新表单时不必向 pdf 添加提交按钮。我正在尝试使系统非常灵活地添加这些表单；因为有很多。

最好的选择是，如果我不需要手动修改 pdf 来使其正常工作。

还有一个工具栏出现，其中包含一个保存按钮。删除该保存按钮或使该保存按钮执行表单提交而不是保存 pdf 文件也很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:15:16.690

我有好消息，也有坏消息。

让我们从好消息开始，因为这样的消息较少：您可以在 PDF 中使用 JavaScript，就像在 HTML 中使用 JavaScript 一样。

坏消息：

1.  您需要调整 PDF 以在 PDF 中的 JavaScript 和 HTML 中的 JavaScript 之间建立通信。看看[我的书的摘录，了解如何做到这一点](http://www.javabeat.net/2011/04/javascript-communication-between-html-and-pdf-in-itext/)。从 HTML 中，您可以触发一个方法`postMessage()`，但只有当 PDF 包含一个`MessageHandler`.
2.  这是一个已知问题，它不适用于每个操作系统（上次我检查时，它不适用于 MacOS）。
3.  Adobe Reader 显示了一个允许人们保存 PDF 的工具栏。无法删除该工具栏。我已经在 stackoverflow 上回答了这个问题：[在浏览器中显示 PDF 时，我可以隐藏 Adob​​e 浮动工具栏吗？](https://stackoverflow.com/questions/12750725/can-i-hide-the-adobe-floating-toolbar-when-showing-a-pdf-in-browser)请注意，另一个答案是指“打开参数”。据我所知，这些参数可以使插件中的上部工具栏可见/不可见，但对“浮动工具栏”没有影响。

# java - 字符串比较常量错误

> ID：13215967
> 
> 赞同：1
> 
> 时间：2012-11-04T04:06:14.323
> 
> 标签：java, html, url, line, tostring

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我有这段代码，它在从 url 检索值时工作正常，但它没有认识到字符串是“True”是我需要的 toString() 还是其他什么？

```
try {
    URL url = new URL("http://www.koolflashgames.com/test.php?id=1");
    URLConnection yc = url.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(yc
            .getInputStream()));
    inputLine = in.readLine();
    inputLine = inputLine.toString();
    if(inputLine == "True") {
        logger.info(inputLine);
        player.sendMessage("Thanks");
    }else{
        logger.info(inputLine);
        player.sendMessage("HAHAHA");
    }
    in.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T04:08:22.047

您不能用于`==`比较字符串的内容，因为它们是对象。您必须创建一个方法来比较对象。对于字符串，您可以使用`stringName.equals(otherString)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T04:08:46.770

您必须使用 equals 来比较字符串。代替：

```
if(inputLine == "True") { 
```

和：

```
if(inputLine.equals("True")) { 
```

运算符 == 告诉您两个引用是否引用同一个对象，而不是值是否相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T04:11:48.393

我不敢苟同。使用`.equalsIgnoreCase()`忽略大小写比较字符串的方法。这将匹配所有情况，例如“True”、“TRue”、“tRue”.. 等大约 16 个匹配项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T04:08:29.893

为了比较`String`对象，请使用该`equals()`方法。

`==`运算符检查两个 s 是否具有相同的`String`引用。

请参阅[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)了解更多信息。

# python - 从文件/列表中隔离参数

> ID：13215968
> 
> 赞同：2
> 
> 时间：2012-11-04T04:06:24.870
> 
> 标签：python, file, list

我正在尝试编写一个函数，该函数打开一个包含名称、城市和数字列表的文件，并按城市取数字的平均值。

到目前为止，我有类似的东西：

```
numbers = 0
count = 0
n = 0
while n < len(file):
    for item in file:
        if item.split(' ')[-2] == city:
            count += 1
            numbers += float(item.split(' ')[-1])
            n += 1
        else:
            n += 1
    return numbers / count 
```

其中[-2]是城市的位置，[-1]是数字的位置。假设文件已经打开。

我的代码贯穿整个文件，只返回最后一行的内容。因此，如果文件的最后一行有来自伦敦的人，而我正在尝试为伦敦平均，它只会给我一个数字；如果我试图为其他城市平均，它不会返回任何东西。

为什么它会遍历整个文件而不更新我的计数，我该如何解决？

编辑：

编辑代码，文件如下所示：

```
NAME1     COUNTRY     CITY     NUMBER 
```

在每一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:52:29.967

首先 item.split(' ') 产生如下内容：

```
['foo', '', '', '', '', 'spam', '', 'foo', '', '666'] 
```

如果一行中有多个空格。利用`item.split()`

其次，文件对象具有迭代接口，因此可以通过这种方式迭代文件行：

```
for line in open('city.dat'):
    data = line.split()
    if data[-2] == 'CITYNAME':
       count += 1
       numbers += float(data[-1]) 
```

第三，确保您的文件中存在“CITYNAME”

为了防止不必要的文件读取和拆分，最好将准备好的数据存储在内存中：

```
data = map(lambda x: x.split(), open('city.dat')) 
```

并在需要时对其进行过滤：

```
filtered_cities = filter(lambda x: x[-2] == 'CITYNAME', data) 
```

# php - PHP日期/时间函数

> ID：13215973
> 
> 赞同：0
> 
> 时间：2012-11-04T04:07:29.640
> 
> 标签：php

我有一个应用程序，说最终用户可能来自任何国家，但是当他执行某些操作时，我希望日期显示在特定时区。

我想将它插入数据库，所以我使用 date_default_timezone_set(''); 与日期（）

这是正确的方法还是我应该使用 gmdate() 并添加时区。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:11:02.060

不，不要`date_default_timezone_set()`用于时区转换。这可能会产生意想不到的副作用。

相反，使用这个：

```
$tz = new DateTimeZone('America/Los_Angeles');

$date = new DateTime('Thu, 31 Mar 2011 02:05:59 GMT');
$date->setTimeZone($tz);
echo $date->format('l F j Y g:i:s A I')."\n"; 
```

请注意，您正在使用 UTC 时间创建 DateTime 对象，然后应用时区。这种方式干净得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:11:53.557

如果你想要格林威治标准时间，我认为你应该使用正确的时区作为`Europe/London`

```
 date_default_timezone_set('Europe/London'); 
```

# php - 基于php示例的C++中数据结构的多态性示例

> ID：13215977
> 
> 赞同：0
> 
> 时间：2012-11-04T04:08:03.607
> 
> 标签：php, c++, polymorphism

我正在学习多态，我熟悉php。

我从[https://stackoverflow.com/a/749738/80353](https://stackoverflow.com/a/749738/80353)遇到了这个很好的例子。转载如下。

我如何编写相同的代码，但使用 C++？

我自己编写时遇到问题，因为我相信（我可能错了）C++ 中的数据结构是严格的。

您必须具有相同类型的 C++ 中的链表或数组中的所有元素。

所以我相信你需要将猫和狗作为它们的基类存储到数据结构中。

那么如何将这个 php 代码片段写入使用严格数据结构的 C++ 代码片段，它只能存储 1 种数据类型的元素？

```
class Animal {
    var $name;
    function __construct($name) {
        $this->name = $name;
    }
}

class Dog extends Animal {
    function speak() {
        return "Woof, woof!";
    }
}

class Cat extends Animal {
    function speak() {
        return "Meow...";
    }
}

$animals = array(new Dog('Skip'), new Cat('Snowball'));

foreach($animals as $animal) {
    print $animal->name . " says: " . $animal->speak() . '<br>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:19:23.367

好吧，您可以使用带有抽象类的指针，使用纯虚方法，如下所示：

```
class Polygon {
    public:
        virtual void setValue(int k) = 0;    // Declaring our pure virtual method.
};

class Rect : public Polygon {
    public:
        virtual void setValue(int k); = 0;   // Declaring the pure virtual method again.
};

Rect::setValue(int k) {    // You must create a setValue() method for every class, since we made a pure virtual method. This is the Polymorphic part.
    // Code in here that setValue() method executes.
    int foo = a;
    std::cout << foo << std::endl;
} 
```

现在您可以访问声明对象指针的方法。

```
int main() {
    Polygon* pSomePolygon = nullptr;   // Assuming using C++11.
    Rect* pRect = new Rect;    // Declare our object.

    pSomePolygon = pRect;    // Point our pointer to object 'pRect'.

    pSomePolygon->setValue(18);    // Pointer accesses pRect and uses the pure virtual method.
    delete pRect;    // Clean up!

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:36:06.790

由于您只询问存储它们，我将省略`Animal`,`Dog`和`Cat`.

```
vector< shared_ptr<Animal> > animals;
animals.push_back( new Dog("Skip") );
animals.push_back( new Cat("Snowball") );

for( size_t i = 0; i< animals.size(); ++i )
    cout << animals[i]->name << " says: " << animals[i]->speak() << endl; 
```

本质上，您需要存储指向对象的指针。简单地说，`shared_ptr<T>`就是一个类，它存储一个指针，当它不再被引用时将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:10:08.930

作为不熟悉 C++ 的人，创建一个 index.cpp 文件并填写以下内容

```
#include <iostream>
#include <vector>
#include <memory>

using namespace std;

class Animal {
  public:
    std::string name;
    Animal (const std::string& givenName) : name(givenName) {}
    virtual string speak () = 0;
    virtual ~Animal() {}

  };

class Dog: public Animal {
  public:
    Dog (const std::string& givenName) : Animal (givenName) {

    }
    string speak ()
      { return "Woof, woof!"; }
  };

class Cat: public Animal {
  public:
    Cat (const std::string& givenName) : Animal (givenName) {
    }
    string speak ()
      { return "Meow..."; }
  };

int main() {
    std::vector<std::unique_ptr<Animal>> animals;
    animals.push_back( std::unique_ptr<Animal>(new Dog("Skip"))  );
    animals.push_back( std::unique_ptr<Animal>(new Cat("Snowball"))  );

    for( int i = 0; i< animals.size(); ++i ) {
        cout << animals[i]->name << " says: " << animals[i]->speak() << endl;
    }

} 
```

之后，使用以下命令编译 index.cpp 文件

```
c++ index.cpp -std=c++11 -stdlib=libc++ 
```

您需要这样做是因为在代码中使用了智能指针 unique_ptr。

最后你可以执行编译后的可执行输出文件，它应该是 a.out

```
./a.out 
```

# php - 如何从多个可放置元素中获取数据

> ID：13215979
> 
> 赞同：0
> 
> 时间：2012-11-04T04:08:17.413
> 
> 标签：php, javascript, jquery, post

在我的脚本中，我正在试验 jquery 可拖动和可放置，[请参见此处](http://jsfiddle.net/Kxtvg/184/)。我正在尝试从拖放到可放置 div 中的每个可拖动元素中获取数据（最终放入数据库中）。现在我有了它，所以我只能从上次删除的 div 中获取数据。

```
 $('#sortcard, #dropbox, #dropbox1').droppable({
        accept: '.sorting',
        hoverClass: 'border',
        tolerance: 'touch',
        drop: function(e, ui) {
          $(this).append(ui.draggable.html() + '<br/>');
          $("#add_friend").show().fadeOut(12000);
          $(e.target).droppable("disable");
          $(e.target).append("<input type='button' name='Sub' value='clear'/>").click(function() {
            $(this).empty().droppable("enable");
             });

            var dropbox = $('#dropbox').html();
            var dropbox1 = $('#dropbox1').html();

            if(dropbox && dropbox1 !== '') {
                 $.post("account_main.php", {data: $(this).text()}, function(data) {
                    $('#demo').html(data);
                });     
             }
          }
      }); 
```

我想罪魁祸首可能是

```
{data: $(this).text()}, function(data) {
    $('#demo').html(data);
}); 
```

我玩弄了它，但仍然没有得到我想要的结果。我觉得我在这方面的编码可能是粗略的，需要改头换面，但我只需要一些想法来推动我朝着正确的方向前进，以使其高效，并且非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:39:13.693

您只是从最后一个获取数据，`droppable`因为您发送`$(this).text()`.

在那种情况下`$(this)`是最后`droppable`一个被丢弃的。既然你想要更多，你会想要替换：

```
{data: $(this).text()} 
```

有类似的东西：

```
{
    sortcard: $('div#sortcard').text(),
    dropbox: $('div#dropbox').text(),
    dropbox1: $('div#dropbox1').text()
} 
```

这将从这三个 DIV 发送数据。

# asp.net - 我的第一个 NHibernate 业务应用程序：如何/何时/在何处使用事务？

> ID：13215984
> 
> 赞同：0
> 
> 时间：2012-11-04T04:08:36.280
> 
> 标签：asp.net, nhibernate, transactions, webforms, n-tier-architecture

我是 NHibernate 的新手，但对 EF4 很熟悉。

在一家新公司的新业务应用程序中，我们被指示使用 ASP.NET 网络表单和 NHibernate，我正在寻找开始。我计划让事情变得简单而美好，并按如下方式组织事情：

*   调用业务层方法的代码隐藏
*   业务层类在构造函数中采用“IRepository”引用，以促进单元测试
*   调用存储库方法的业务层类，这些方法返回 DTO/DTO 集合
*   存储库将隐藏/封装所有 NHibernate 的东西。

在管理会话/交易方面，它并不像我预期的那么容易:)

会话：[这种方法](http://pwigle.wordpress.com/2008/11/21/nhibernate-session-handling-in-aspnet-the-easy-way/)（在 global.asax 中使用`Application_BeginRequest`和`Application_EndRequest`）看起来是最简单的方法（我认为？）....虽然我没想到必须将 NHibernate 代码放在我的 UI 层中。

现在如何**使用**这些会话......

这篇[“最佳实践”文章](http://www.simple-talk.com/dotnet/.net-framework/some-nhibernate-best-practices/)建议我将这种模式用于**所有**NHibernate 数据访问（甚至读取）：

```
using (ITransaction tx = Session.BeginTransaction())
{
    // execute a query, before an update, etc
    tx.Commit();
} 
```

所以我的问题是：

*   在我的存储库中，我可以（我**应该**吗？）从 HttpContext 检索当前的 NHibernate 会话，正如（我认为）[这种方法](http://pwigle.wordpress.com/2008/11/21/nhibernate-session-handling-in-aspnet-the-easy-way/)所建议的那样？对我来说似乎不对，因为它非常依赖于 UI。

（但是，这对我来说似乎比将 NHibernate`ISession`对象传递给适当的构造函数更好，正如我在其他地方看到的那样......即在我的情况下，我必须将它从 UI 传递到业务层构造函数，然后一直到 Repository 构造函数……我希望 UI 和业务层不会意识到 NHibernate。）

*   在我的情况下，我真的需要将所有读取都包含在事务中吗？

*   “NHibernate”事务与“”事务有什么不同`System.Transactions`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:35:11.117

从某种意义上说，BeginRequest()/EndRequest() 并不是真正的 UI 代码，而更像是一种“应用程序框架类型的东西”，它源于在那种特定风格的应用程序中如何处理“请求”。如果您想在例如本地 Windows 应用程序中重用相同的业务层，您可能希望以不同的方式处理您的会话，因此将其完全隐藏在某种数据层中不一定是一个好主意。

您可能应该使用 NHibernate 对上下文会话的支持来跟踪每个请求的活动会话。在您的情况下，WebSessionContext。[http://nhibernate.info/doc/nh/en/index.html#architecture-current-session](http://nhibernate.info/doc/nh/en/index.html#architecture-current-session)（忘记 ManagedWebSessionContext，它已被弃用。）在此之后，您的业务/数据层将从 sessionFactory.GetCurrentSession( )，而不依赖于 UI 代码。

除了 Global.asax 中的应用程序设置代码之外，您的 UI 可能大部分都不知道 NH。您也可以将其移至其自己的 IHttpModule。如果你真的想的话，你当然可以把它隐藏在 MyDataLayer.StartSession() 后面。

您应该始终使用事务。如果不定义一个，你会得到什么？数据库仍将使用（多个）隐式事务。

NHibernate 事务和 System.Transaction 是不同的。您可以使用 TransactionScope，但在这种情况下您还必须使用 NH 的事务以避免一些问题。

# python - 无法编写 csv

> ID：13215991
> 
> 赞同：0
> 
> 时间：2012-11-04T04:08:56.163
> 
> 标签：python, csv

我正在尝试编写一个脚本，以便输出为 5 列的 .csv：2 列数据，然后是一个空列，然后是另外 2 列数据。这就是[我得到](http://imgur.com/Dw1no)的，这就是[我想要的](http://imgur.com/m1Qli)。为了完整起见，这是我的所有代码。

```
import requests
import csv

item_dictionary = {'10350': 'Third-Age Full', '560':'Death Rune'}
item_ids = item_dictionary.keys()
url_template = 'http://www.grandexchangecentral.com/include/gecgraphjson.php?jsid=%r'

sites = []
for i in range(0, len(item_ids)):
    result = url_template % item_ids[i]
    sites.append(result)

def data_grabber(item): 
    url = item
    r = requests.get(url, headers={'Referer': 'www.grandexchangecentral.com'})
    data = r.json  
    prices = [i[1] for i in data]
    return prices

data = map(data_grabber, sites)

names = item_dictionary.values()

def writer(item):
    q = data.index(item) 
    headers = [names[q], 'Percent Change', None]   
    a = data[q]
    percents = [100.0 * a1 / a2 - 100 for a1, a2 in zip(a[1:], a)]
    percents.insert(0, None)
    f = zip(data[q], percents)
    myfile = open('prices.csv', 'wb')
    wr = csv.writer(myfile)
    wr.writerow(headers)
    wr.writerows(f)
    myfile.close()

z = [writer(x) for x in data] 
```

我认为正在发生的事情是`writer(item)`写入两列，并且下一次迭代会`z`覆盖这些列。编辑：我注意到我有`myfile.close()`这个功能。这可以解释它，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:47:03.290

只打开一次文件，然后：

```
wr = csv.writer(myfile)
wr.writerow(headers)
for x in data:
    # prepare row data
    # ... (the modified body of writer() function goes here)
    # write it as csv
    wr.writerow(row) # row is a list with 5 items
myfile.close() 
```

当您在 'wb' 模式下打开文件时，它的大小会被截断为零并且之前的内容会丢失。因此，当您`writer()`多次调用函数时，它会替换所有以前的内容，文件中只剩下最后一次调用的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:15:41.123

如果且仅当您正在编写像这样的非常简单的 CSV 时，您才真正需要该`csv`包。只需打开文件并写掉：

```
f = open("out.csv", "w")
...
for line in lines:
    //line = ["col1","col2","","col3",""]
    csv_line = str.join(",",line)
    f.writeline(csv_line)
f.close() 
```

但是，如果您的数据更复杂（即不是纯数字），您将遇到问题。

# javascript - Javascript 未在 Heroku 上的 Django 应用程序中呈现

> ID：13215994
> 
> 赞同：0
> 
> 时间：2012-11-04T04:09:46.567
> 
> 标签：javascript, python, django, heroku, amazon-s3

在 Heroku 上部署了一个 Django 应用程序，在我的主页之后，之后的每个页面都不会呈现托管在 Amazon S3 上的 Javascript 文件，但是在 Inspect Element 中打开控制台时，似乎一切正常。我的 HTML 文件的标题如下

```
#questions.html
<link rel="stylesheet" type="text/css" href="https://s3.amazonaws.com/mrt-assets/static/css/QandA.css">
<link rel="stylesheet" type="text/css" href="https://s3.amazonaws.com/mrt-assets/static/css/Button.css">
<script src="https://s3.amazonaws.com/mrt-assets/static/js/prefixfree.min.js"></script>
<script src="https://s3.amazonaws.com/mrt-assets/static/js/index.js"></script>
<script src="https://s3.amazonaws.com/mrt-assets/static/js/qanda.js"></script> 
```

该文件显然有效，但是当我加载页面时所有弹出窗口都已经打开。

唯一的错误是这个

```
2XMLHttpRequest cannot load https://s3.amazonaws.com/mrt-assets/static/css/QandA.css. Origin http://warm-oasis-9454.herokuapp.com is not allowed by Access-Control-Allow-Origin. 
```

2XMLHttpRequest 无法加载[https://s3.amazonaws.com/mrt-assets/static/css/Button.css](https://s3.amazonaws.com/mrt-assets/static/css/Button.css)。Access-Control-Allow-Origin 不允许来源[http://warm-oasis-9454.herokuapp.com 。](http://warm-oasis-9454.herokuapp.com)

有人帮我吗？

编辑：

这是有效的页面，索引

```
#index.html
<link rel="stylesheet" type="text/css" href="https://s3.amazonaws.com/mrt-assets/static/css/Index.css">
<link rel="stylesheet" type="text/css" href="https://s3.amazonaws.com/mrt-assets/static/css/Button.css">
<script src="https://s3.amazonaws.com/mrt-assets/static/js/prefixfree.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://s3.amazonaws.com/mrt-assets/static/js/index.js"></script> 
```

这也是我对 s3 存储桶的 CORS 要求

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>
            testsite.com
        </AllowedOrigin>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>DELETE</AllowedMethod>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
    </CORSRule>
</CORSConfiguration> 
```

这更有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:17:48.983

您需要在您的 S3 存储桶上启用跨源资源共享 (CORS)，这是 Amazon（谢天谢地）最近添加的。这是文档：[http](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html) ://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html和这里[http://docs.amazonwebservices.com/AmazonS3/latest/UG/EditingBucketPermissions.html](http://docs.amazonwebservices.com/AmazonS3/latest/UG/EditingBucketPermissions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:33:33.447

想通了，我需要做的就是颠倒 HTML 页面中 Javascript 文件和 CSS 文件的顺序。

# php - Lithium Couchdb 查找：全部

> ID：13215995
> 
> 赞同：0
> 
> 时间：2012-11-04T04:09:56.977
> 
> 标签：php, couchdb, lithium

我开始使用他们的博客教程研究锂和 couchdb。我注意到的一件事是 find:all 无法正常工作： Posts:find('all', array('conditions' => array('title' => 'title')) The conditions are not working. It all queries文件和设计。有什么经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:38:41.210

CouchDB 不支持即席查询（即任意条件的查询）。您需要创建一个视图并对其进行查询。

# php - Presta Shop Switching Domain Issue

> ID：13215996
> 
> 赞同：1
> 
> 时间：2012-11-04T04:10:27.583
> 
> 标签：php, redirect, prestashop

I have a website made on Presta Shop CMS. I had it on my trial server. The installation and everything. It works and runs fine. I then copied (using FTP) every file from my trial server to the main domain. I did not install it on the main domain (bought from network solutions), but copied everything there. The issue is when i hit the main domain, it somewhat redirects me back to the trial server. I have checked and changed many of the default values. and many values in the database. But still havent had luck. Also made changes in the .htaccess file, still without any luck.

I do not want to go through the installation process again on my main domain. You can check the site (main domain :- www.myworld-myhome.com, it will redirect you to hrm.com/esol/ )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T10:57:04.367

As you can read [here](http://www.addons-modules.com/prestashop-tips/tag/prestashop-domain-name/), the prestashop domain name is stored in the `ps_configuration` table.
So, to solve your problem, you should run this SQL query:

```
update ps_configuration 
set value='www.myworld-myhome.com' 
where name='PS_SHOP_DOMAIN'; 
```

You should also edit your `config/settings.inc.php` file and change:

```
define('__PS_BASE_URI__', '/esol/'); 
```

To:

```
define('__PS_BASE_URI__', '/'); 
```

# iphone - PrepareForSegue 未在 IOS 6 模拟器上调用

> ID：13215999
> 
> 赞同：2
> 
> 时间：2012-11-04T04:11:07.007
> 
> 标签：iphone, objective-c, ipad

我有一个使用情节提要的应用程序。当我开发它时，它针对的是 ios 5，一切运行良好。但是，当我尝试在 ios 6 模拟器中运行它时，我发现无法调用“PrepareForSegue”方法。（在这种情况下，我的项目的开发目标仍然针对 ios 5）。

这是我下面的 prepareForSegue 代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier] isEqualToString:@"sToHowManyTimesView"])
    {

        NSString *title=[relationshipStatus titleForState:UIControlStateNormal];
        NHCThirdViewController *thirdView=[segue destinationViewController];

        thirdView.infoRequest=title;
        relationShipStatus.relstatus=title;

        NSLog(@"%@",title);

    }
    else if([[segue identifier] isEqualToString:@"SinglePage"])
    {
        NSString *title=[relationshipStatus titleForState:UIControlStateNormal];
        relationShipStatus.relstatus=title;

    }
    else if([[segue identifier] isEqualToString:@"toFifthView"])
    {
        NSString *title=[relationshipStatus titleForState:UIControlStateNormal];
        NHCFifithViewController *fifthView=[segue destinationViewController];

        fifthView.infoRequest=title;
        relationShipStatus.relstatus=title;
    }
} 
```

请帮帮我。