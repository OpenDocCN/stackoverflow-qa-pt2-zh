# StackOverflow 问答 12863000-12863999

# algorithm - 与 Haskell 浮点类型冲突的 Pearson 相关性

> ID：12863003
> 
> 赞同：3
> 
> 时间：2012-10-12T16:03:59.917
> 
> 标签：algorithm, haskell, type-conversion

我正在尝试编写一个加载 2 个文本文件的程序，将这些文件中的数字转换为 2 个列表，然后计算这些列表之间的 pearson 相关性。

pearson 函数只能接受浮点数，所以我制作了一个名为 floatconvert 的函数来尝试解决这个问题，但它没有。我收到一条错误消息，提示“无法将预期类型 'IO b0' 与实际类型 'Float' 匹配。” 在‘pearson’的第一个参数中，即‘input1.’”

任何解决此问题的帮助将不胜感激。

```
main = do
    input1file <- readFile "input1.txt"
    input2file <- readFile "input2.txt"

    let input1 = floatconvert input1file
    let input2 = floatconvert input2file

    pearson input1 input2

floatconvert x = [ read a::Float | a <- words x ]

pearson xs ys = (psum-(sumX*sumY/n))/(sqrt((sumXsq-(sumX**2/n)) * (sumYsq-(sumY**2/n))))
    where
        n = fromIntegral (length xs)
        sumX = sum xs
        sumY = sum ys
        sumXsq = sum([ valX*valX | valX <- xs ])
        sumYsq = sum([ valY*valY | valY <- ys ])
        psum = sum([ fst val * snd val | val <- zip xs ys ]) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T16:15:38.203

在这种情况下，错误消息有些误导。真正的问题是`pearson`不返回`IO something`。如果您打算打印结果，请写

```
main = do
    ...    
    print $ pearson input1 input2 
```

GHC 在这里混淆的原因是 pearson 的推断类型是

```
pearson :: Floating a => [a] -> [a] -> a 
```

因此，当您尝试将其用作 do-block 中的语句时，它会从返回类型推断出`a ~ IO b`，因此参数必须具有 type `[IO b]`。但是，它已经知道它们具有类型，因此当问题的根源是返回类型时，`[Float]`您会收到一条关于它无法在参数中匹配的令人困惑的错误消息`Float`。`IO b`

我赞同 Dave 关于向函数添加类型签名的建议。它可以使错误消息更有帮助。例如，如果您给出`pearson`了类型签名`pearson :: [Float] -> [Float] -> Float`，您将收到以下消息：

```
Pearson.hs:8:5:
    Couldn't match expected type `IO b0' with actual type `Float'
    In the return type of a call of `pearson'
    In a stmt of a 'do' block: pearson input1 input2 
```

# ios - 从其他 ViewController 访问 UIScrollView

> ID：12863006
> 
> 赞同：0
> 
> 时间：2012-10-12T16:04:12.043
> 
> 标签：ios, xcode

我有一个viewcontroller，如果我按下一个按钮，另一个viewController 会被加载，但第一个没有被卸载。我想从第二个视图控制器访问第一个视图控制器的变量，实际上是一个 UIScrollView，以便我可以以这种方式使用它：

```
scroll1.hidden = YES; 
```

我怎样才能做到这一点？我尝试导入 .h 文件，但仍然无法使用 UIScrollView

编辑：

```
NSArray* stack = [self.navigationController viewControllers];
NSInteger currentIndex = [stack indexOfObject:self];
ViewController* linkToA = (ViewController*)[stack objectAtIndex:currentIndex - 1];

[linkToA.scroll1.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
[linkToA.scroll1 addSubview:linkToA.backgroundImage]; 
```

或者

```
ViewController *linkToA = [[ViewController alloc] init];
linkToA = (ViewController*)self.presentingViewController;

[linkToA.scroll1.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
[linkToA.scroll1 addSubview:linkToA.backgroundImage]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:20:03.833

只需确保第一个视图控制器在标题中确实具有您的 scrollView 的属性：

```
@property (nonatomic, strong) UIScrollView *scrollView; 
```

如果您没有最新的 xcode`@synthesize scrollView`用于第一个控制器的实现

假设您的第一个控制器是 A，第二个是 B

如果 B 是作为模态添加的，则使用以下命令：

```
linkToA = (A*)B.presentingViewController; 
```

如果将 B 添加到 navigationControllerStack：

```
NSArray* stack = [B.navigationController viewControllers];
NSInteger currentIndex = [stack indexOfObject:B];
linkToA = (A*)[stack objectAtIndex:currentIndex - 1]; 
```

在你有一个 linkToA 之后你必须做

```
linkToA.scrollView.hidden = YES; 
```

希望这会有所帮助

# variables - 如何使用 for 循环增加 Scss 中的变量？

> ID：12863009
> 
> 赞同：1
> 
> 时间：2012-10-12T16:04:20.577
> 
> 标签：variables, compilation, interpolation, sass

很确定这对于 Sass/Scss 是不可能的，但想确定这是 Sass 的限制，而不是我自己对语法的误解......

我正在尝试创建一个样式列表，其中每个列表项都从一堆变量中获得不同的颜色：

```
$color1: #FF0000; // Red
$color2: #FFBF00; // Orange
$color3: #FFFF00; // Yellow
$color4: #7FFF00; // Green
$color5: #007FFF; // Light Blue
$color6: #00FFFF; // Cyan
$color7: #0000FF; // Blue
$color8: #7F00FF; // Purple
$color9: #FF00FF; // Magenta

@for $i from 1 through 9 {
a[href^="link#{$i}"] { color: $color#{$i};
}
} 
```

但是，Sass 不会编译。我认为不可能以这种方式增加变量名。任何人都可以确认吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:40:03.360

您不能以动态方式创建变量名称，但您可以通过更好的语义和灵活性来实现这一点：

```
$red        : #FF0000;
$orange     : #FFBF00;
$yellow     : #FFFF00;
$green      : #7FFF00;
$lightblue  : #007FFF;
$cyan       : #00FFFF;
$blue       : #0000FF;
$purple     : #7F00FF;
$magenta    : #FF00FF;

$colors: $red $orange $yellow $green $lightblue $cyan $blue $purple $magenta;

@each $color in $colors {
  $i: index($colors, $color);
  a[href^="link#{$i}"] { color: $color; }
} 
```

**更新：**在 Sass 3.3 中，您可以使用映射来减少重复。

```
$colors: (
  red        : #FF0000,
  orange     : #FFBF00,
  yellow     : #FFFF00,
  green      : #7FFF00,
  lightblue  : #007FFF,
  cyan       : #00FFFF,
  blue       : #0000FF,
  purple     : #7F00FF,
  magenta    : #FF00FF,
);

@each $name, $color in $colors {
  a[href^="link#{$name}"] { color: $color; }
} 
```

# java - 不知道如何用分数处理这个简单的递归

> ID：12863012
> 
> 赞同：0
> 
> 时间：2012-10-12T16:04:33.020
> 
> 标签：java, recursion

我必须写一个简单的递归方法来计算`m(i) = (1/2) + (2/3) + ... + i/(i+1)`。我觉得这应该非常简单，但我无法弄清楚。我知道我必须通过递减来循环，但我就是无法得到它。到目前为止，我有以下内容，我知道这是完全错误的。

```
public class Recursion {
    public static void main(String[] args) {

        double n = run(10);
        System.out.print("Result: " + n);
    }

    public static double run(double nb) {
        double result = 0;

        if(nb == 2){
            return 1/2;
        }

        result += run(nb - 2) / run(nb - 1);
        return result;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:05:45.923

使用这个递归关系：

> m(i) = i/(i+1) + m(i-1)

在代码中，它可能如下所示：

```
public static double run(int i) {
    if (i < 1) {
        return 0;
    }
    return i / (i + 1.0) + run(i - 1);
} 
```

请注意，参数不需要是浮点数，只需返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:09:37.653

尝试这个：

```
public class Recursion{
    public static void main(String[] args) {
        double n = run(10);
        System.out.print("Result: " + n);
    }

    public static double run(double nb) {
        double result = 0;
        if(nb > 1){
            result = nb/(nb + 1) + run(nb - 1);
        } else{
            result = nb/(nb + 1);
        }
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:10:49.253

尝试一些数学应该使这变得简单。

> m(i) = 1/2 + 2/3 +....+(i)/(i+1)
> 或 m(i) = 2/2-1/2 + 3/3-1/3 + 。 ...+ (i+1)/(i+1) - 1/(i+1)
> 或 m(i) = 1-1/2 + 1 - 1/3 +...(i 次).. + 1 - (1/(i+1))
> 或 m(i) = i - ( 1/2 + 1/3 + ... + 1/(i+1) )

现在应该很容易为此编写算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:11:17.410

我认为你应该更换这个

```
result += run(nb - 2) / run(nb - 1); 
```

经过

```
result += nb - 2 / nb - 1;
return result + run(nb - 1); 
```

# ios - (iOS) 使用我的用户代理会导致我的应用被拒绝吗？

> ID：12863013
> 
> 赞同：1
> 
> 时间：2012-10-12T16:04:37.077
> 
> 标签：ios, user-agent

在我的应用程序中，我使用以下类型的代码来处理用户代理：

```
// Fake Firefox's user agent during web service's registration
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"Mozilla/5.0 (compatible; Windows; U; Windows NT 6.2; WOW64; en-US; rv:12.0) Gecko/20120403211507 Firefox/12.0", @"UserAgent", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionary];

// Return to standard iOS user agent when web service registration is done
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3", @"UserAgent", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionary]; 
```

我的应用程序的一部分允许用户使用其“注册帐户”页面注册网络服务，这是我能找到的唯一方法来防止其网站自动启动一个显示“下载我们的应用程序！”的页面。就是这样弄脏用户代理字符串。我已经尝试在 a 中设置用户代理，`NSMutableURLRequest`但我根本没有让它工作。（是的，我已经尝试在 .) 中同时设置“User-Agent”和“User_Agent” `NSMutableURLRequest`。）

我听说这可能会让您的应用被 Apple 拒绝。任何人都可以确认或否认，或提供任何评论吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:28:25.113

1.  App Store 上有多个应用程序也伪造了用户代理。
2.  设置 NSLocalizedString 语言的所有解决方法也在 NSUserDefaults 中为 Apple 键设置自定义值

所以我认为苹果不会拒绝你的应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:20:17.093

我们在我们的应用程序中使用自定义用户代理作为我们的服务器知道我们的应用程序正在调用的一种方式 - 并传递额外的数据，例如，应用程序是否具有视网膜屏幕。只要您不依赖它来*确保安全*，它就可以很好地工作。结果没有任何东西被拒绝。

# python - 为什么 PIL 不能修改灰度 BMP 图像数据？

> ID：12863015
> 
> 赞同：4
> 
> 时间：2012-10-12T16:04:43.380
> 
> 标签：python, python-imaging-library, bmp

```
im = Image.open("grayscale.bmp")
data = im.load()
data[1,1] = 1 
```

它报告“ValueError：图像是只读的”。只有 8 位灰度 bmp 图像会引发此异常。为什么？顺便说一句，我无法从 8 位灰度 bmp 图像中获取调色板。但是根据 BMP 规范，存在调色板。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:47:51.697

让我们从第二个问题开始。基本上，当加载带有调色板的 BMP 文件时，PIL 会检查该调色板是否包含至少一个 rgb 三元组，其中值不完全相等。如果所有三元组都相等，则假定为灰度图像并且永远不会创建调色板，因此`im.palette`在这种情况下始终为空。

对于第一个问题，您可能不想知道“为什么”，但我想如何解决它。否则，您获得只读图像的简化原因是由于 PIL 的内部细节：灰度 bmp 是内存映射的，而 PIL 仅支持只读模式（这似乎专门用于处理 Windows 问题）。问题的“修复”很简单，但并不完全好：将图像转换为某种模式，现在它不再是只读的。您甚至可以转换为“L”（在您的情况下这是当前模式）。

我不记得有这个问题，因为当我必须在 PIL 中处理图像时，我通常需要在某些特定模式下使用它们，所以我总是做 a `img.convert(X)`，`X`我需要的模式在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T11:37:20.047

我对`ValueError: image is readonly`8 位灰度 bmp 也有同样的问题。似乎仍然可以通过更改单个像素值，`image.putpixel((x, y), value)`尽管它比直接在像素图上操作要慢。

# java - 如何使用 String.format 在 Java 中将 long 转换为货币格式的 String

> ID：12863016
> 
> 赞同：1
> 
> 时间：2012-10-12T16:04:47.343
> 
> 标签：java, long-integer, string.format

我需要学习如何在具有以下场景`long`的方法中将值转换为货币格式的字符串：`toString()`

*   如果给定long value = 9287，需要显示为$92.87
*   如果给定long value = -9287，需要显示为$-92.87
*   如果给定long value = 100000000，需要显示为$1,000,000.00
*   如果给定long value = 49，需要显示为$0.49

感谢字符串大师的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:59:10.713

```
public static void main(String [] args){

       DecimalFormat f = new DecimalFormat("$#,##0.00;-$#,##0.00");

       //test with
       long num1 = 9287;
       long num2 = -9287;
       long num3 = 100000000;
       long num4 = 49;

       System.out.println("num1 = "+f.format(num1/100.0));
       System.out.println("num2 = "+f.format(num2/100.0));
       System.out.println("num3 = "+f.format(num3/100.0));
       System.out.println("num4 = "+f.format(num4/100.0));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:11:34.333

String.format() 不支持货币格式。所以你需要自己插入货币符号或使用`java.text`包。

```
package tests;

import java.util.Locale;

public class App201210130101 {

/**
 * @param args
 */
public static void main(String[] args) {
    long value;

    value = 9287;
    print(value);

    value = -9287;
    print(value);

    value = 100000000;
    print(value);

    value = 49;
    print(value);
}

public static void print(long value) {

    System.out.println(String.format(Locale.US, "$%,.2f", (double)value/100));
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:16:28.860

我希望你正在使用 Java。尝试这个 ：

```
 import java.text.NumberFormat;

            NumberFormat f = NumberFormat.getCurrencyInstance();
            System.out.println(f.format(doubleValue(yourVar)/100)); 
```

# android - SQLite 或首选项

> ID：12863018
> 
> 赞同：0
> 
> 时间：2012-10-12T16:04:59.653
> 
> 标签：android, sqlite

我试图在 android 中构建一个音乐播放器，我需要保存用户创建的播放列表。现在我在寻找 SQLite，发现存在一个叫做偏好的东西。现在，就内存和结构以及数据检索的便利性而言，什么对我最有利？

在此先感谢，一个菜鸟。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:12:14.627

对于播放列表，绝对是数据库。首选项只是一个简单的键值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:11:34.253

这完全取决于您要保存的内容的复杂性。SharedPreferences 这是一种简单的方法，但我认为就可扩展性而言这不是一个好主意。

在您的情况下，您最好使用 SQLite，因为您可以使用关系数据库创建复杂的结构，并且由于其众所周知的 SQL 语法仍然易于开发。

# javascript - Firefox 插件在 YouTube 上触发两次

> ID：12863023
> 
> 赞同：0
> 
> 时间：2012-10-12T16:05:14.130
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我在包含以下代码的附加构建器上创建了一个 js：

```
require("tabs").on("ready", logURL);

function logURL(tab) {
    console.log("HELLO");
 // runScript(tab);
} 
```

我在错误控制台（在消息面板上）看到的是消息“HELLO”，然后消息消失了。在任何其他选项卡上，该消息仍然存在。页面似乎正在重定向或重新加载。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:04:23.003

重新加载页面时，错误控制台不会被清除。问题在于错误控制台只能保存有限数量的消息，而 YouTube 会产生大量警告，您的消息只会被推开。请注意，消息面板只是一个过滤器，切换到它并不能帮助您避免总体限制。

您应该向控制台发送信息更丰富的消息，例如：

```
console.log("Hello from " + tab.url); 
```

我敢打赌，第一条消息甚至与 YouTube 无关——它是`about:blank`或者`about:newtab`（在 YouTube 开始加载之前最初加载到新标签中的文档）。我试过你的插件，它肯定只向 YouTube 发送一条消息，它之前的消息是指空白标签。

# windows-phone-7 - Windows Phone 平台是否支持应用程序开发人员的受限/测试版？

> ID：12863024
> 
> 赞同：0
> 
> 时间：2012-10-12T16:05:19.747
> 
> 标签：windows-phone-7, mobile, deployment, native, beta-testing

我有兴趣为 Windows Phone 开发一个应用程序，并且想知道他们是否支持为他们的应用程序开发人员提供有限/测试版的概念？我的意思是能够将我的应用程序的 beta 版或演示版部署给有限/受限的受众，例如业务合作伙伴、客户、外部 beta 测试人员等。他们的[SDK 文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff928362%28v=vs.92%29.aspx)中没有任何内容表明这两种方式。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:15:56.880

您可以在开发中心创建一个 Beta 应用程序提交，并通过添加某些 Live Id，限制对您的应用程序的访问，并使其可供您的 Beta 测试人员使用。有关更多信息，请参阅以下内容：-

[http://msdn.microsoft.com/en-us/library/windowsphone/help/jj215598%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj215598%28v=vs.105%29.aspx)

# excel - 从文件夹中的所有文件复制数据

> ID：12863025
> 
> 赞同：2
> 
> 时间：2012-10-12T16:05:27.643
> 
> 标签：excel, directory, copy-paste, vba

我需要打开文件夹中的所有 Excel 文件，并将每个文件的第一行、第 57 行、第 72 行、第 73 行和第 74 行复制到同一个工作簿中。

这是我到目前为止所拥有的：

```
Dim i As Integer
Dim wbOpen As Workbook
Dim MyPath As String
Dim strFilename As String
MyPath = "C:\foldername" 'the folder
strFilename = Dir(MyPath & "\*.xls") 'all excel files in folder

Do Until strFilename = ""

    'here it gives an error, saying it can't open file,
    ' even though it apparently has found it
    wbOpen = Workbooks.Open(strFilename)

    'copy relevant text
    Workbooks(2).Activate
    Sheets("blad1").Rows(1, 57, 72, 73, 74).Copy
    Workbooks(1).Activate
    'select the first empty row
    irow = ActiveSheet.UsedRange.Rows.Count + 1
    'insert the copied
    irow.Insert Shift:=xlDown
    'close the workbook without saving
    Workbooks(2).Close SaveChanges:=False
    Close

Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:15:49.263

试试这种方式：

```
MyPath = "C:\foldername" 'the folder
strFilename = Dir(MyPath & "\*.xls") 'all excel files in folder

Do Until strFilename = ""
...
strFilename=Dir()
Loop 
```

告诉我这是否有效

`Sheets("blad1").Rows(1, 57, 72, 73, 74).Copy`编辑 ：修复`Sheets("blad1").Rows("1, 57, 72, 73, 74").Copy`

# r - 使用ggplot2的堆叠点图

> ID：12863034
> 
> 赞同：2
> 
> 时间：2012-10-12T16:05:56.140
> 
> 标签：r, plot, ggplot2, stacked

我有兴趣制作一个堆叠的点图，就像 ggplot2 中下面的链接中的那样。

![](../Images/c1b32e03ded4356b6485f68137a45e83.png)

以下是使用包中的`dotPlot`函数制作的，`BHH2`但没有`ggplot2`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:14:25.463

有一个`geom_dotplot`创建点图。如果您没有，请更新您的 ggplot2。这是一个相对较新的添加。有关示例，请参[见此](https://ggplot2.tidyverse.org/reference/geom_dotplot.html)。

# spring - JDBC - NamedParameterJdbcTemplate 中的多个查询

> ID：12863039
> 
> 赞同：1
> 
> 时间：2012-10-12T16:06:13.727
> 
> 标签：spring, jdbc

`NamedParameterJdbcTemplate`有什么方法可以在*一个*调用中执行多个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T07:48:15.710

简单的答案：你不能。JDBC 语句一次只能执行一个查询/语句。

更长的答案：您通常不能，因为驱动程序或数据库服务器不支持它，并且正式的 JDBC 规范不允许它（如果您在规范和Javadoc）。但是，某些驱动程序（即 MySQL Connector/J）确实允许您一次执行多个查询（尽管您可能需要指定一个连接属性来启用它，但不确定）。

# entity-framework - 升级到 .net 4.0 后 ReleaseHandleFail，可能与 EntityFramework 有关

> ID：12863041
> 
> 赞同：1
> 
> 时间：2012-10-12T16:06:26.733
> 
> 标签：entity-framework, .net-4.0

我最近将一个应用程序从 .net 3.5 升级到了 4.0。自从我这样做后，启用了中断所有异常的调试设置，每次启动使用 EF 连接到数据库的应用程序的一部分时，我都会遇到一些这样的异常。确切的数字是可变的；有时我只得到一个，其他几个快速连续。

> 检测到 ReleaseHandleFailed 消息：“Microsoft.Win32.SafeHandles.SafeCapiHashHandle”类型的 SafeHandle 或 CriticalHandle 未能正确释放值为 0x06AD3D08 的句柄。这通常表明句柄通过其他方式被错误地释放（例如使用 DangerousGetHandle 提取句柄并直接关闭它或围绕它构建另一个 SafeHandle。）

瞄准 3.5 时，我从未遇到过这样的异常。这些异常没有附加任何有意义的调用堆栈，我得到的只是`[External Code]`，拒绝任何简单的方法来本地化它们的来源。我怀疑 EntityFramework 以某种方式涉及的原因是应用程序的一部分使用 nHiberate 而不是生成任何这些消息。

运行可能涉及的其他依赖项：在所有情况下，ORM 都与 Sql Compact 数据库通信 MS Sync Framework 2.1 用于从 SqlServer 更新本地数据库。Entity 框架模型已经用 4.0 框架重新生成，我也将缓存数据库升级到 v4.0。

由于没有调用堆栈，我不确定这些消息是否属于框架内部自动清理的“无害”错误类别；或者如果有异常食者在应用程序的其他地方捕获它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:01:47.707

这不是一个例外，它是一个托管调试助手警告。当您将设置更改为“启用所有异常时中断”时，您可能有点过火了。Debug + Exceptions，Managed Debugging Assistants 节点，取消勾选“ReleaseHandleFailed”警告。默认情况下它是关闭的。

MDA 在 AesCryptoServiceProvider 类中捕获了一段时间未被发现的旧错误。背景资料[在这里](https://stackoverflow.com/a/5928710/17034)。

从您的评论来看，您将犯下一个严重的错误。您**不能通过**避免加密或损害 dbase 连接安全性来解决此问题。您不小心打开了通常关闭的 MDA。MDA 通常会产生错误的警告，其中许多默认情况下是关闭的。该警告实际上是虚假的，释放句柄失败*，因为它已经释放*。这发生在终结器线程中，这就是你没有得到堆栈跟踪的原因。因此不能轻易找出首先使用该类的代码。

修复它的正确方法是正确使用 Debug + Exceptions 对话框。通过单击“全部重置”按钮修复您创建的问题。然后**只**单击公共语言运行时异常的抛出复选框。这就是您要调试的内容。

# iphone - 搜索正则表达式以返回电话号码的子字符串

> ID：12863043
> 
> 赞同：0
> 
> 时间：2012-10-12T16:06:30.950
> 
> 标签：iphone, objective-c, regex

到目前为止，我一直在看这个，但没有成功。我需要一个正则表达式，它返回电话号码中的字符串之后的字符串。让我给你一个完美的例子：

电话号码（我需要的确切格式）：15063217711

返回我需要：5063217711 --> 所以如果它的 a 1 被删除，则第一个字符。我需要一个仅在字符串开头匹配 1 的正则表达式，然后返回电话号码的其余部分。

顺便说一句，我使用的是目标 C，但它不应该有太大的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:10:31.953

使用正向后视跳过数字 1：`(?<=^1)\d+$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:44:59.667

真的不需要正则表达式。

只需测试字符串中的第一个字符是否为 a `1`，如果是，则取其余的子字符串。

签出[`[NSString characterAtIndex:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/characterAtIndex%3a)并[`[NSString substringFromIndex:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/substringFromIndex%3a)

# design-patterns - 这是 DTO 的一个例子还是......？

> ID：12863046
> 
> 赞同：0
> 
> 时间：2012-10-12T16:06:45.487
> 
> 标签：design-patterns, immutability, dto, proxy-classes

我从事过几个项目，我们非常严格地对接口进行编码，这些接口很少或没有接口属性的可变性。然后，我发现自己编写的类提供了以任何方式改变对象并返回它的任意能力。

这是一个例子：

```
public interface IOlapCube
{
  String CubeName {get;}
  IEnumerable<IDimension> Dimensions{get;}
  IEnumerable<IMeasure> Measures {get;}
  IEnumerable<IMeasureGroup> MeasureGroups {get;}
}

public class OlapCubeRW : IOlapCube
{
  public String CubeName {get;set;}
  private List<IDimension> _dimensionList;
  public IList<IDimension> Dimensions{get{return this._dimensionList;}}
  IEnumerable<IDimension> IOlapCube.Dimensions{get{return this.Dimensions;}}

  //... similar for the rest
} 
```

这是DTO吗？我应该在哪里定义这个类？它应该与 IOlap 立方体在同一个组件中吗？如果是这样，它应该在同一个名称空间中吗？我发现使用 IOlapCube 的几个项目可以从 RW 类中受益，我讨厌重新实现每个项目中相同的内部类。这些类对于单元测试也很有用，我可以创建任意派生类并通过接口引用它。例如，对于每个接口，都有一个关联的 IEqualityComparer，当我可以构造两个具有我想要的任何形状的对象并比较它们时，比较器的单元测试相当简单。

这些通常也用于编辑实体。我可以将实体传递给表单，并将其复制到其中一个对象中。然后表单可以任意更改对象，我可以使用外部类进行验证，例如 bool OlapCubeValidator.IsValid(IOlapCube cubeToValidate); 如果验证通过，则将更改复制回实体（可能是此 RW 类上的实体代理，现在已确保有效）。

将它们放在与 IOlap 相同的位置感觉不对，只是因为客户端似乎不应该启动其中一个并使用它，但我认为如果我可以在外部执行验证，它不会有任何伤害。这个特定的项目是公司内部的，所以我们不必担心恶意，只是懒惰的编程。如果这是一个公开的图书馆，它会改变什么吗？

**编辑** 重要的是要注意这个接口层次结构（IOlapCube > IDimension、IMeasureGroup、IMeasure > IHierarchy > ILevel > IMember）不公开任何方法或其他功能；它们只提供数据（例如名称、子对象、IsVisible、...）。没有像 IQueryable(T) ExecuteQuery(T)(ICriteria(T) 标准) 这样的方法**。**验证和相等定义是外部接口（例如，IEqualityComparer）的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:32:00.703

只要 DTO 仅用于保存数据（无业务逻辑），您将接口保留在相同的程序集中还是不同的程序集中都没有关系。

# asp.net-mvc - 使用查询字符串批量打印 mvc cshtml 表单

> ID：12863050
> 
> 赞同：0
> 
> 时间：2012-10-12T16:06:49.900
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想基于带有参数的 url 批量打印 mvc3 cshtml 表单。例如，我想遍历 url，例如：

```
for(int i=0; i<10: i++) 
    print(http://mysite/myController/myAction/i); 
```

或者是否有更优选的技术来实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:16:53.837

您可以修改以下项目并添加将在您的页面中循环的代码：

[http://www.codeproject.com/Articles/12799/Print-HTML-in-C-with-or-without-the-web-browser-co](http://www.codeproject.com/Articles/12799/Print-HTML-in-C-with-or-without-the-web-browser-co)

# objective-c - 如何更改自定义 NSTextfield 的 drawRect 中的文本颜色

> ID：12863058
> 
> 赞同：2
> 
> 时间：2012-10-12T16:07:11.587
> 
> 标签：objective-c, cocoa, interface-builder, nstextfield

如果文本长度大于控件宽度，我使用自己的 NSTextfield 类 OMNTextfield 子类来显示文本并为文本设置动画。

文本像 iTunes 中的歌曲标题一样具有动画效果。它就像一个魅力！

现在我想更改文本的颜色和文本对齐方式。我已经搜索了一段时间 setTextcolor、setAlignment、viewWillDraw、cellClass ......但没有任何效果 => 我的文本仍然是黑色的！

[你可以在这里找到完整的代码（Xcode 项目）](http://dl.free.fr/lp39qvEqE)

我的问题：如何更改 NSTextfield 子类中的文本颜色/对齐方式？

根据这篇[文章](https://stackoverflow.com/questions/3065676/subclassing-an-nstextfield)，下面的代码应该可以工作，但不能！

```
-(void)viewWillDraw { // or whatever is the Appkit equivalent
      [super setTextColor:[NSColor redColor]];
} 
```

完整代码：

```
//
//  OMNTextField.h

#import <Cocoa/Cocoa.h>

@interface OMNTextField : NSTextField {
    NSTimer * scroller;
    NSPoint point;
    NSString * text;
    NSTimeInterval speed;
    CGFloat stringWidth;
}

- (void) setText:(NSString *)newText;

@property (nonatomic, copy) NSString * text;
@property (nonatomic) NSTimeInterval speed;

@end

//
//  OMNTextField.m

#import "OMNTextField.h"

@implementation OMNTextField

@synthesize text;
@synthesize speed;

- (void) dealloc {
    [text release];
    [scroller invalidate];
    [super dealloc];
}

- (void) setText:(NSString *)newText {
    NSLog(@"[%@ %@] *** ", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    [text release];
    text = [newText copy];
    point = NSZeroPoint;

    stringWidth = [newText sizeWithAttributes:nil].width;

    if (scroller == nil && speed > 0 && text != nil) {
        scroller = [NSTimer scheduledTimerWithTimeInterval:speed target:self selector:@selector(moveText:) userInfo:nil repeats:YES];
    }
}

- (void) setSpeed:(NSTimeInterval)newSpeed {
    if (newSpeed != speed) {
        speed = newSpeed;

        [scroller invalidate];
        if (speed > 0 && text != nil) {
            scroller = [NSTimer scheduledTimerWithTimeInterval:speed target:self selector:@selector(moveText:) userInfo:nil repeats:YES];
        }
    }
}

-(void)viewWillDraw {
    [super setTextColor:[NSColor yellowColor]];
}

- (void) moveText:(NSTimer *)timer {
    if (stringWidth >= self.frame.size.width)
        point.x = point.x - 1.0f;

    [self setNeedsDisplay:YES];
}

- (void)drawRect:(NSRect)dirtyRect {
    CGFloat max;

    if (stringWidth >= dirtyRect.size.width)
        max = stringWidth;
    else
        max = dirtyRect.size.width;

    if (point.x + stringWidth < 0) {
        point.x += max ;
    }

    [text drawAtPoint:point withAttributes:nil];

    if (point.x < 0) {
        NSPoint otherPoint = point;
        otherPoint.x += max;
        [text drawAtPoint:otherPoint withAttributes:nil];
    }

}

@end
//
//  AppDelegate.h

#import <Cocoa/Cocoa.h>
#import "OMNTextField.h"

@interface AppDelegate : NSObject <NSApplicationDelegate>
{
}

@property (assign) IBOutlet OMNTextField *label2;
@property (assign) IBOutlet OMNTextField *label3;
@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSView *view;

@end

//
//  AppDelegate.m

#import "AppDelegate.h"

@implementation AppDelegate

- (void)dealloc
{
    [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    [self.label2 setText:@"Too shoort no need to move"];
    [self.label2 setSpeed:0.05];

    [self.label3 setText:@"Text Lenght > TextField.width => Automatically animate text to show all"];
    [self.label3 setSpeed:0.05];
}

@end 
```

PS：我的代码基于 Dave Delong 代码：[iTunes Song Title Scrolling in Cocoa](https://stackoverflow.com/questions/3232801/itunes-song-title-scrolling-in-cocoa)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T19:26:11.403

换行

```
[text drawAtPoint:point withAttributes:nil]; 
```

和

```
NSColor *color = [NSColor greenColor]; \\put something else here...
NSDictionary *attributes = [NSDictionary dictionaryWithObject:color forKey:NSForegroundColorAttributeName];
[text drawAtPoint:point withAttributes:attributes]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:34:22.477

正如 Nate Chandler 所说，使用 NSDictionary *attributes 作为文本颜色。

关于文本对齐，我设法通过计算 drawAtPoint:point 的好值来使文本居中

我们有所有需要的信息 stringWidth 和控件 NSTextfield 宽度来计算 drawAtPoint:point 中变量点的好值

# python - Python：如何制作具有相同*大小*箱的直方图

> ID：12863059
> 
> 赞同：11
> 
> 时间：2012-10-12T16:07:11.147
> 
> 标签：python, histogram, spacing, binning

我有一组数据，并想制作它的直方图。我需要 bin 具有相同的*size*，我的意思是它们必须包含相同数量的对象，而不是更常见的（numpy.histogram）问题，即具有*等间距*的bin。这自然会以箱体宽度为代价，而箱体宽度可能——而且通常会——有所不同。

我将指定所需的 bin 数量和数据集，作为回报获得 bin 边缘。

```
Example:
data = numpy.array([1., 1.2, 1.3, 2.0, 2.1, 2.12])
bins_edges = somefunc(data, nbins=3)
print(bins_edges)
>> [1.,1.3,2.1,2.12] 
```

所以 bin 都包含 2 个点，但它们的宽度（0.3、0.8、0.02）不同。

有两个限制： - 如果一组数据相同，则包含它们的 bin 可能更大。- 如果有 N 个数据并且请求了 M 个 bin，如果 N%M 不为 0，则将有 N/M 个 bin 加一。

这段代码是我写的一些杂乱无章的代码，它适用于小型数据集。如果我有 10**9+ 分并想加快流程怎么办？

```
 1 import numpy as np
  2 
  3 def def_equbin(in_distr, binsize=None, bin_num=None):
  4 
  5     try:
  6 
  7         distr_size = len(in_distr)
  8 
  9         bin_size = distr_size / bin_num
 10         odd_bin_size = distr_size % bin_num
 11 
 12         args = in_distr.argsort()
 13 
 14         hist = np.zeros((bin_num, bin_size))
 15 
 16         for i in range(bin_num):
 17             hist[i, :] = in_distr[args[i * bin_size: (i + 1) * bin_size]]
 18 
 19         if odd_bin_size == 0:
 20             odd_bin = None
 21             bins_limits = np.arange(bin_num) * bin_size
 22             bins_limits = args[bins_limits]
 23             bins_limits = np.concatenate((in_distr[bins_limits],
 24                                           [in_distr[args[-1]]]))
 25         else:
 26             odd_bin = in_distr[args[bin_num * bin_size:]]
 27             bins_limits = np.arange(bin_num + 1) * bin_size
 28             bins_limits = args[bins_limits]
 29             bins_limits = in_distr[bins_limits]
 30             bins_limits = np.concatenate((bins_limits, [in_distr[args[-1]]]))
 31 
 32         return (hist, odd_bin, bins_limits) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T16:21:24.293

使用您的示例案例（2 个点的箱，6 个总数据点）：

```
from scipy import stats
bin_edges = stats.mstats.mquantiles(data, [0, 2./6, 4./6, 1])
>> array([1\. , 1.24666667, 2.05333333, 2.12]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-29T11:53:18.180

我还想提一下 的存在[`pandas.qcut`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.qcut.html)，它以非常有效的方式进行等填充分箱。在你的情况下，它会像

```
data = np.array([1., 1.2, 1.3, 2.0, 2.1, 2.12])
# parameter q specifies the number of bins
qc = pd.qcut(data, q=3, precision=1)

# bin definition
bins  = qc.categories
print(bins)
>> Index(['[1, 1.3]', '(1.3, 2.03]', '(2.03, 2.1]'], dtype='object')

# bin corresponding to each point in data
codes = qc.codes
print(codes)
>> array([0, 0, 1, 1, 2, 2], dtype=int8) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-10T13:25:02.187

倾斜分布的更新：

我遇到了与@astabada 相同的问题，想要创建每个包含相同数量样本的箱。在应用@aganders3 提出的解决方案时，我发现它对于偏斜分布的效果不是特别好。在倾斜数据的情况下（例如具有大量零的数据），`stats.mstats.mquantiles`对于预定义的分位数将不能保证每个 bin 中的样本数量相等。您将获得如下所示的 bin 边缘：

```
[0\. 0\. 4\. 9.] 
```

在这种情况下，第一个垃圾箱将是空的。

为了处理偏斜的情况，我创建了一个函数，`stats.mstats.mquantiles`如果样本在某个容差范围内不相等（示例代码中最小样本大小的 30%），该函数调用然后动态修改 bin 的数量。如果 bin 之间的样本不相等，则代码将等距分位数的数量减少 1 并`stats.mstats.mquantiles`再次调用，直到样本大小相等或仅存在一个 bin。

我在示例中对容差进行了硬编码，但如果需要，可以将其修改为关键字参数。

我也更喜欢将等距分位数的数量作为我的函数的参数，而不是给用户定义的分位数，`stats.mstats.mquantiles`以减少意外错误（即类似的错误`[0., 0.25, 0.7, 1.]`）。

这是代码：

```
import numpy as np 
from scipy import stats

def equibins(dat, binnum, **kwargs):
    numin = binnum
    while numin>1.:
        qtls = np.linspace(0.,1.0,num=numin,endpoint=False)
        ebins =stats.mstats.mquantiles(dat,qtls,alphap=kwargs['alpha'],betap=kwargs['beta'])
        allhist, allbin   = np.histogram(dat, bins = ebins)
        if (np.unique(ebins).shape!=ebins.shape or tolerence(allhist,0.3)==False) and numin>2:
            numin= numin-1
            del qtls, ebins
        else:
            numin=0
    return ebins

def tolerence(narray, percent):
    if percent>1.0:
        per = percent/100.
    else:
        per = percent
    lev_tol  = per*narray.min()
    tolerate = np.all(narray[1:]-narray[0]<lev_tol)
    return tolerate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-31T17:05:17.077

只需对数据进行排序，然后按长度将其分成固定的 bin 即可！显然，如果样本数不能完全除以箱数，则您永远不能划分为完全相同填充的箱。

```
import math
import numpy as np
data = np.array([2,3,5,6,8,5,5,6,3,2,3,7,8,9,8,6,6,8,9,9,0,7,5,3,3,4,5,6,7])
data_sorted = np.sort(data)
nbins = 3
step = math.ceil(len(data_sorted)//nbins+1)
binned_data = []
for i in range(0,len(data_sorted),step):
    binned_data.append(data_sorted[i:i+step]) 
```

# apache - 如何使apache上的服务器端缓存无效

> ID：12863060
> 
> 赞同：1
> 
> 时间：2012-10-12T16:07:10.917
> 
> 标签：apache, caching, invalidation, mod-expires

我使用 apache 的内容过期时间来缓存静态资产。我知道强制它更新命令内容的唯一方法是重新启动 apache。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:03:22.187

事实证明，在我们的服务器上缓存是存储在文件中的数据，因此我们必须清除缓存文件的内容，瞧，缓存被清除了。

# hadoop - 为什么我的映射器似乎多次重复“最后一次合并”？

> ID：12863061
> 
> 赞同：3
> 
> 时间：2012-10-12T16:07:20.303
> 
> 标签：hadoop

在我的映射器的任务日志中，我看到了这样的行为，这让我很困惑：

```
INFO org.apache.hadoop.mapred.Merger: Merging 6 sorted segments
INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor
INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor
INFO org.apache.hadoop.mapred.Merger: Down to the last merge-pass, with 6 segments left of total size: 38872249 bytes
INFO org.apache.hadoop.mapred.Merger: Merging 6 sorted segments
INFO org.apache.hadoop.mapred.Merger: Down to the last merge-pass, with 6 segments left of total size: 38636106 bytes
INFO org.apache.hadoop.mapred.Merger: Merging 6 sorted segments
INFO org.apache.hadoop.mapred.Merger: Down to the last merge-pass, with 6 segments left of total size: 39490573 bytes
INFO org.apache.hadoop.mapred.Merger: Merging 6 sorted segments
....
repeat 20+ times
....
INFO org.apache.hadoop.mapred.Merger: Down to the last merge-pass, with 6 segments left of total size: 37234005 bytes
INFO org.apache.hadoop.mapred.Task: Task:attempt_201209251414_0326_m_000052_0 is done. And is in the process of commiting
INFO org.apache.hadoop.mapred.Task: Task 'attempt_201209251414_0326_m_000052_0' done.\ 
```

我有 25 次以上的“最后一次”合并通行证是怎么回事？这个过程需要很长时间，所以我试图弄清楚我是否配置错误。

# ruby - 用于生成排列的惯用红宝石？

> ID：12863062
> 
> 赞同：2
> 
> 时间：2012-10-12T16:07:20.483
> 
> 标签：ruby, recursion, idioms

我想知道这个用于生成排列的函数的惯用版本在 Ruby 中会是什么样子。我知道这`[1,2,3].permutation.to_a`会产生相同的结果，但我对学习 Ruby 以及如何在 Ruby 中处理这样的递归问题更感兴趣。

```
def permutations(seq)
    if seq.empty? || seq.count == 1
        seq
    else
        seq.map { |x|
            permutations(seq.select { |e| e != x }).map { |p|
                if p.class == Fixnum
                    [x, p]
                else
                    p.unshift(x)
                end
            }
        }.flatten(1)
    end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:19:53.613

```
class Array
  def permutations
    return [self] if size < 2
    perm = []
    each { |e| (self - [e]).permutations.each { |p| perm << ([e] + p) } }
    perm
  end
end 

[1, 2, 3].permutations #=> [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]] 
```

资料来源：[http ://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/32844](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/32844)

编辑：为避免猴子补丁，将其放入模块中：

```
module ArrayExtensions
  def permutations
    #snip
  end
end

Array.send :include, ArrayExtensions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:50:43.113

在 Ruby（尤其是 Rails）中，将这样的功能直接添加到核心类是很常见的。

该方法的一种替代方法是单独的静态实用程序模块：

```
module ArrayUtils
  def self.permute(array)
    return [array] if array.size < 2

    array.flat_map do |elem|
      permute(array - [elem]).map do |perm|
        ([elem] + perm)
      end
    end
  end
end

ArrayUtils.permute [1, 2, 3]
# => [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]] 
```

# mysql - sql在phpmyadmin中合并2个表

> ID：12863069
> 
> 赞同：2
> 
> 时间：2012-10-12T16:08:00.587
> 
> 标签：mysql

我有 2 张桌子，`products`并且`products_description`. `products`我想要来自: `products_id`、`products_quantity`、`products_model`和`products_image`的这些字段`products_price`。

我想加入这个`products_description`领域`products_description`

我到目前为止的 SQL 是

```
SELECT products.products_id, products.products_quantity, products.products_image, products.products_price, products_image
 FROM products
 INNER JOIN products_description
 ON products.products_id=products_description.products_id
 ORDER BY products.products_id 
```

我的结果只是从产品表中获取的字段名称，而表中没有任何内容`products_description`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:10:48.323

你`JOIN`是正确的，但你没有从表中*选择任何东西。*`products_description`

更新您`SELECT`以包含来自的列`products_description`（替换正确的列名）。

```
SELECT products.products_id, ..., products_description.column_name, products_description.column_name2, ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:11:12.317

您忘记在 SELECT 语句中写入`products_description.*`（这将从 products_description 表中获取所有列）。

```
SELECT products.products_id, products.products_quantity, products.products_image, products.products_price, products_image, products_description.*
 FROM products
 INNER JOIN products_description
 ON products.products_id=products_description.products_id
 ORDER BY products.products_id 
```

# sql - 具有深度连接的 t-sql 查询

> ID：12863074
> 
> 赞同：2
> 
> 时间：2012-10-12T16:08:21.043
> 
> 标签：sql, sql-server, tsql, join

我在获得一个快速的 sql 查询时遇到了一些麻烦。我已经设法得到一个查询来返回我想要的结果，但即使使用正确的索引也需要大约 2 sek 才能运行。

我有这些表：

```
[Login]
loginID
loginTime
userID

[user]
userID 
userName

[companyParticipant]
userID
companyID

[company]
companyID
organisationID
CompanyName 
```

我想展示的是所有登录时间排名前 10 位的最新登录人。用户所在的公司是我的参与者或组织内的公司，而我是该组织的公司的成员

获取我的组织：

```
SELECT organisationID 
FROM companys 
WHERE companyID IN (
    SELECT companyID 
    FROM companyParticipant 
    WHERE userID = @userID) 
GROUP BY organisationID 
```

所以我想要这样的查询：

```
SELECT TOP 10 userName, LoginTime 
FROM ....
ORDER BY loginID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:19:39.290

```
 SELECT userName, loginTime
      FROM
(
    SELECT u.userName, l.loginTime,
           rn = row_number() over (partition BY u.userName
                              ORDER BY l.loginTime DESC)
      FROM companyParticipant cp
      JOIN companys c ON c.companyID = cp.companyID
      JOIN companys c2 ON c2.organisationID = c.organisationID -- same organisation
      JOIN companyParticipant cp2 ON cp2.companyID = c2.companyID -- participants of same org
      JOIN login l ON l.userID = cp2.userID
      JOIN [user] u ON u.userID = l.userID
     WHERE cp.userID = @userID
)          X
     WHERE rn = 1
  ORDER BY loginTime DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:21:41.493

这个查询不到一秒钟，速度非常快。看起来很奇怪，因为总是有人登录，并且新登录必须相隔 10 分钟，否则它只会更新最后一次登录，因此不需要打破平局似乎很奇怪。

```
SELECT      TOP (10) l.loginID, l.loginTime,u.userName
FROM          logins AS l WITH(NOLOCK) INNER JOIN
                        users AS u WITH(NOLOCK) ON l.UserID = u.UserID
WHERE      (l.UserID <> @userID)
AND u.userID IN(SELECT u.userID FROM companyParticipants AS sp2 WHERE sp2.companyID IN (SELECT sc2.companyID FROM company AS sc2 WHERE sc2.organisationID IN(
SELECT sc.organisationID FROM company AS sc LEFT JOIN companyParticipants AS sp ON sc.companyID = sp.companyID WHERE sp.userID = @userID AND sc.organisationID > 0 GROUP BY sc.organisationID
)))
ORDER BY l.loginID DESC 
```

# c# - 新创建或更改文件的文件观察器

> ID：12863079
> 
> 赞同：1
> 
> 时间：2012-10-12T16:08:39.823
> 
> 标签：c#, winforms

如何检查新创建的文件。这仅适用于已编辑的文件。

```
 DateTime time = DateTime.Now;             // Use current time
        string format = "dMyyyy";            // Use this format
        string s = time.ToString(format); 

        fileSystemWatcher1.Path = @"C:\Users\Desktop\test\";
        fileSystemWatcher1.NotifyFilter =   NotifyFilters.LastAccess | 
                                            NotifyFilters.LastWrite | 
                                            NotifyFilters.FileName | 
                                            NotifyFilters.DirectoryName;

        fileSystemWatcher1.IncludeSubdirectories = false;
        fileSystemWatcher1.Filter = s + ".txt"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:12:17.853

您也可以`NotifyFilters.CreationTime`用于新创建的文件。

[NotifyFilters 枚举](http://msdn.microsoft.com/en-us/library/system.io.notifyfilters.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:15:03.307

[MSDN页面](http://msdn.microsoft.com/en-en/library/system.io.filesystemwatcher%28v=VS.80%29.aspx)对此非常清楚

```
// Add event handlers.
fileSystemWatcher1.Created += new FileSystemEventHandler(OnChanged);

// Enable the event to be raised
fileSystemWatcher1.EnableRaisingEvents = true;

// In the event handler check the change type
private static void OnChanged(object source, FileSystemEventArgs e)
{
    // Specify what is done when a file is changed, created, or deleted.
   Console.WriteLine("File: " +  e.FullPath + " " + e.ChangeType);
} 
```

正如您从其他页面中看到的那样，e。[ChangeType](http://msdn.microsoft.com/en-us/library/t6xf43e0%28v=vs.100%29.aspx)枚举包含一个 Created 值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:16:50.600

按照本文[C# 中概述的示例：使用 FileSystem Watcher 监视文件或目录的应用程序](http://www.codeproject.com/Articles/26528/C-Application-to-Watch-a-File-or-Directory-using-F)

您需要描述`fileSystemWatcher1.NotifyFilter`通过将不同的事件处理程序分配给不同的活动来更改这些属性之一时必须执行的操作。例如：

```
fileSystemWatcher1.Changed += new FileSystemEventHandler(OnChanged);
fileSystemWatcher1.Created += new FileSystemEventHandler(OnChanged);
fileSystemWatcher1.Deleted += new FileSystemEventHandler(OnChanged);
fileSystemWatcher1.Renamed += new RenamedEventHandler(OnRenamed); 
```

两个处理程序的签名为

```
void OnChanged(object sender, FileSystemEventArgs e)
void OnRenamed(object sender, RenamedEventArgs e) 
```

示例处理程序`OnChanged`

```
public static void OnChanged(object source, FileSystemEventArgs e)
{
   Console.WriteLine("{0} : {1} {2}", s, e.FullPath, e.ChangeType);
} 
```

然后让观察者引发事件：

```
fileSystemWatcher1EnableRaisingEvents = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:19:39.337

如果您为 fileSystemWatcher1.Created 添加了事件处理程序，上述内容应该可以工作

# java - 如何在 java 中获取混音器通道布局

> ID：12863081
> 
> 赞同：3
> 
> 时间：2012-10-12T16:08:55.330
> 
> 标签：java, audio, javasound, mixer, channels

我以为我可以在这个很棒的网站上找到任何东西，但现在我似乎遇到了没有答案的问题:) 请帮忙！

问题是，我需要播放多达 6 个不同的 wav 文件，每个文件有 1 个通道，系统混音器支持 6 个通道（左、右、左环绕等）。

使用 6 个不同的 SourceDataLines 看起来很合乎逻辑，但据我所见，Mixer 无法为它们进行每个样本同步，所以我想出了将它们交错在单独的线程中并只使用一个 SourceDataLine 来播放它。它适用于左右两个通道，但对于更多通道，我需要知道精确的通道布局（可能在差异系统和声卡上有所不同）。我认为系统混音器之一（我有两个：“线性输入”和“java 声音系统混音器”）可能有这个元数据，但我找不到它。

有人知道如何获取此信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:52:55.663

我和我的朋友刚刚发现 java7 音响系统支持 6 个通道以及它们使用不同位的所有变体等。

这是列出您的java可以做什么的代码：

```
 Mixer.Info[] mi = AudioSystem.getMixerInfo();
        for (Mixer.Info info : mi) {
            System.out.println("info: " + info);
            Mixer m = AudioSystem.getMixer(info);
            System.out.println("mixer " + m);
            Line.Info[] sl = m.getSourceLineInfo();
            for (Line.Info info2 : sl) {
                System.out.println("    info: " + info2);
                Line line = AudioSystem.getLine(info2);
                if (line instanceof SourceDataLine) {
                    SourceDataLine source = (SourceDataLine) line;

                    DataLine.Info i = (DataLine.Info) source.getLineInfo();
                    for (AudioFormat format : i.getFormats()) {
                        System.out.println("    format: " + format);
                    }
                }
            }
        } 
```

这是我的 macbook pro 的输出，带有 USB 连接的外部声卡：

```
info: Default Audio Device, version Unknown Version
mixer com.sun.media.sound.DirectAudioDevice@67310bf
    info: interface SourceDataLine supporting 14 audio formats, and buffers of at least 32 bytes
    format: PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, mono, 3 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, mono, 3 bytes/frame, big-endian
    format: PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, stereo, 6 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, stereo, 6 bytes/frame, big-endian
    format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian
    format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, big-endian
    info: interface Clip supporting 14 audio formats, and buffers of at least 32 bytes
info: Built-in Input, version Unknown Version
mixer com.sun.media.sound.DirectAudioDevice@2edf98c4
info: Built-in Output, version Unknown Version
mixer com.sun.media.sound.DirectAudioDevice@59a683e6
    info: interface SourceDataLine supporting 14 audio formats, and buffers of at least 32 bytes
    format: PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, mono, 3 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, mono, 3 bytes/frame, big-endian
    format: PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, stereo, 6 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, stereo, 6 bytes/frame, big-endian
    format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian
    format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, big-endian
    info: interface Clip supporting 14 audio formats, and buffers of at least 32 bytes
info: SB X-Fi Surround 5.1 Pro, version Unknown Version
mixer com.sun.media.sound.DirectAudioDevice@431d9f05
    info: interface SourceDataLine supporting 20 audio formats, and buffers of at least 32 bytes
    format: PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, mono, 3 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, mono, 3 bytes/frame, big-endian
    format: PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, stereo, 6 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, stereo, 6 bytes/frame, big-endian
    format: PCM_UNSIGNED unknown sample rate, 8 bit, 6 channels, 6 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 8 bit, 6 channels, 6 bytes/frame, 
    format: PCM_SIGNED unknown sample rate, 16 bit, 6 channels, 12 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 16 bit, 6 channels, 12 bytes/frame, big-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, 6 channels, 18 bytes/frame, little-endian
    format: PCM_SIGNED unknown sample rate, 24 bit, 6 channels, 18 bytes/frame, big-endian
    format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian
    format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, big-endian
    info: interface Clip supporting 20 audio formats, and buffers of at least 32 bytes
info: SB X-Fi Surround 5.1 Pro, version Unknown Version
mixer com.sun.media.sound.DirectAudioDevice@4db323af
info: Port Built-in Input, version Unknown Version
mixer com.sun.media.sound.PortMixer@4b743fba
    info: Built-in Input source port
info: Port Built-in Output, version Unknown Version
mixer com.sun.media.sound.PortMixer@45d1edcc
info: Port SB X-Fi Surround 5.1 Pro, version Unknown Version
mixer com.sun.media.sound.PortMixer@59530fe3
info: Port SB X-Fi Surround 5.1 Pro, version Unknown Version
mixer com.sun.media.sound.PortMixer@5c382de5
    info: SB X-Fi Surround 5.1 Pro source port 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-27T17:31:48.930

是的，这是一个老问题，但由于我正在寻找所有通道、深度等，我决定编写一个小型调试方法，如果您想查看更多详细信息并想使用 java 8 流，这很有用:-)

享受：

```
//filter may be all if you want to include microphone 
 public void getDeviceInfos(String filter) {

            Stream
                    .of(AudioSystem.getMixerInfo())
                    .forEach(info -> {
                        System.out.println("Mixer Name: " + info.getName());
                        System.out.println("Mixer Description: " + info.getDescription());
                        System.out.println("Mixer Vendor: " + info.getVendor());

                        Mixer m = AudioSystem.getMixer(info);

                        Stream
                                .of(Arrays.asList(m.getSourceLineInfo()), filter.equals("record") ? Arrays.asList(m.getTargetLineInfo()) : null)
                                .flatMap(List::stream)
                                .collect(Collectors.toList())
                                .forEach(lineInfo -> {
                                    System.out.println("    info: " + lineInfo);
                                    try {
                                        Line line = AudioSystem.getLine(lineInfo);
                                        if (line instanceof SourceDataLine || line instanceof TargetDataLine) {

                                            Arrays.asList(((DataLine.Info) line.getLineInfo()).getFormats()).forEach(format -> {
                                                System.out.println("Channels: " + format.getChannels());
                                                System.out.println("Size in Bits: " + format.getSampleSizeInBits());
                                                System.out.println("Frame Rate: " + format.getFrameRate());
                                                System.out.println("Frame Size: " + format.getFrameSize());
                                                System.out.println("Encoding: " + format.getEncoding());
                                                System.out.println("Sample Rate: " + format.getSampleRate());

                                            });
                                        }
                                    } catch (Exception ex) {
                                        ex.printStackTrace();
                                    }
                                });
                    });

    } 
```

# flash - 更改 mx:Tree 中特定元素的样式

> ID：12863082
> 
> 赞同：0
> 
> 时间：2012-10-12T16:08:57.467
> 
> 标签：flash, apache-flex

我想在 mx:Tree 的一部分中更改样式（以斜体显示一些文本）。像这样

```
var data:Array = [
 { label: "one", children: [
   { label: "a"},   { label: "b"},   { label: "c"} 
  ]}
]; 
```

如何仅显示带有标签 c 的斜体元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:27:10.653

您可以编写一个自定义项目渲染器来检查数据中的给定条件（`data.label == "c"`在您的情况下）并根据结果以斜体显示文本。如果您在 MXML 中执行此操作，因为您无法绑定样式属性，实现它的一种方法是：

```
...
<mx:Label text="{data.label}" visible="{data.label == 'c'}" includeInLayout="{data.label == 'c'}" fontStyle="italic"/>
<mx:Label text="{data.label}" visible="{data.label != 'c'}" includeInLayout="{data.label != 'c'}"/>
... 
```

其中 ... 代表周围的项目渲染器标记

# objective-c - zlib：C 中的线程安全 zalloc 和 zfree？

> ID：12863088
> 
> 赞同：2
> 
> 时间：2012-10-12T16:09:37.027
> 
> 标签：objective-c, multithreading, malloc, zlib

我正在使用 zlib C 库来解压缩从网络流接收的数据，并且我有两个流在两个单独的 NSThread 中运行。根据 zlib 文档，在两个线程中解压缩两个不同的 zlib 流需要 zalloc 和 zfree 是线程安全的。我目前正在传递 Z_NULL （下面是我的 inflateinit 代码）

```
zStream.zalloc = Z_NULL;
zStream.zfree = Z_NULL;
zStream.opaque = Z_NULL;
zStream.avail_in = 0;
zStream.next_in = Z_NULL;
int status = inflateInit(&zStream);
if (status != Z_OK)
    DLog(@"zlib setup error");
else
    DLog(@"zlib setup ok");
}); 
```

有没有人有使用 zlib 在单独的线程中压缩多个流的经验？有人见过 zalloc 和 zfree 的线程安全实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T20:23:20.633

`malloc()`并且`free()`在 Mac OS X 上已经是线程安全的。因此，只需`Z_NULL`按照您的操作初始化结构，就可以了。

# php - 如何从 url 中删除控制器名称，使其在 codeigniter 中变得干净

> ID：12863095
> 
> 赞同：8
> 
> 时间：2012-10-12T16:10:15.320
> 
> 标签：php, codeigniter, mod-rewrite, clean-urls

我有以下网址..

```
http://localhost/ci/site_controller/home 
```

我想从 url 中删除`site_controller` **控制器**导致..

```
 http://localhost/ci/home 
```

如何在 CodeIgniter 中做到这一点？

注意：如果你问我尝试了什么，而不是我刚刚在谷歌上搜索，因为我不知道如何使用 mod_rewrite。

**编辑**

我的 routes.php 中有这个

```
$route['default_controller'] = "site_controller/home";
$route['ci/home'] = 'ci/site_controller/home';
$route['404_override'] = ''; 
```

但仍然无法正常工作！

**.htaccess**

```
RewriteEngine On
RewriteBase /ci/
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

ErrorDocument 404 /index.php 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T16:17:53.300

您可以为每个 url 设置路由：

在您的 config/routes.php 文件中，只需像这样设置每个页面：

```
$route['ci/home'] = "ci/site_controller/home"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:12:44.017

这可能会帮助您为您的 CodeIgniter 项目定义一个默认控制器。

> [https://codeigniter.com/user_guide/general/controllers.html#defining-a-default-controller](https://codeigniter.com/user_guide/general/controllers.html#defining-a-default-controller)

例如，在您的情况下，打开您的 application/config/routes.php 文件并设置此变量：

```
$route['default_controller'] = 'site_controller'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T16:20:27.090

假设你目前有你的网址`http://localhost/ci/site_controller/home`，你可以写一个像下面这样的显式路由到你的`/application/config/routes.php`

```
$route['ci/home'] = 'site_controller/home'; 
```

或者

```
$route['ci/home'] = 'ci/site_controller/home'; 
```

如果您的控制器被命名为`/application/controllers/ci/`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-01T13:38:50.003

这对我有帮助。在“ `routes.php`”中我添加了这个：

> $route['(:any)'] = "default_controller/$1";

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T16:13:22.213

尝试使用路由文件重新映射 url

[http://ellislab.com/codeigniter/user_guide/general/routing.html](http://ellislab.com/codeigniter/user_guide/general/routing.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-09T01:30:46.563

我刚刚在此链接中找到了解决方案，它对我有用：[http ://ellislab.com/forums/viewthread/148531/](http://ellislab.com/forums/viewthread/148531/)

```
$route['^(page1|page2|page3|page4)(/:any)?$'] = "YOURCONTROLLERNAME/$0"; 
```

希望它可以帮助你:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-01T10:45:43.617

如果您的 .htaccess 文件是这样设置的（或类似的），那么 index.php 已经被删除了......

```
RewriteEngine On
RewriteCond $1 !^(index\.php|application|assets|images|js|css|uploads|favicon.png)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

而你的codeigniter代码直接位于html文件夹中......

要从 URL 中删除控制器名称，请编辑 **application/config/routes.php** 添加如下行：

```
$route['signin'] = 'web/signin'; 
```

当用户请求 yoursebsite.com/signin 时，上面的行调用控制器**Web的函数 signin** **()**

 **要将变量传递给所述函数，请执行以下操作：

```
$route['p/(:any)'] = 'web/p/$1'; 
```

此行调用控制器**Web中的函数****p()**，该函数有一个参数。函数**p()**定义为：

 ****```
public function p($param = "none") {
    echo $param;
} 
```

我希望这有帮助 ：）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-21T13:30:01.020

如果您想从 Codeigniter 3.x 中的 URL 中删除控制器名称，这非常简单，在我的例子中，URL 是：***http://localhost:8080/index.php/page/sometext*** 其中“Page”是控制器名称打开应用程序/config/routs.php

```
$urlParam = $this->uri->segment_array()[1];
$rout[$urlParam] = "page/index"; 
```

结果：http://localhost:8080/index.php/sometext

我向你保证，它会起作用的。测试 100%。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-12T17:37:51.483

`'ci'`从您的路线中删除。这是您的项目名称，从不需要。路由总是在控制器级别开始：

```
$route['home'] = "site_controller/home"; 
```

将工作。然而，更重要的是......你确定你的设计是正确的吗？为什么不让`home` *自己成为*一个控制器？创建一个`/application/controllers/home.php`，您将能够使用 访问它的`index()`功能`http://localhost/ci/home`。

你把事情复杂化了。根本不需要路线。******

# c# - 使用自定义图像按钮在 RichTextBox 中显示图像

> ID：12863098
> 
> 赞同：3
> 
> 时间：2012-10-12T16:10:41.833
> 
> 标签：c#, winforms, image, imagebutton

我正在创建一个非常类似于记事本/word 的文本编辑器，并且我的表单上有带有自定义图像的按钮。图像已加载到资源文件夹中。现在，当我单击按钮时，我希望它在 RichTextBox 中显示相同的图像，显​​示的图像将是各种表情符号。我只找到了创建图片查看器的方法，而不是这个。

```
private void button11_Click(object sender, EventArgs e)    
{       
   Image.FromFile("../../Resources/sad-icon.png");    
} 
```

这将用于在 RichTextBox 中放置悲伤的表情。这是我到目前为止所拥有的，我对 C# 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:08:28.663

我一直在尝试各种方法，我找到了一种有效的方法，但仅适用于某些表情符号，而不是我需要能够使用的表情符号。

```
 void InsertEmoticon(string ImageName)
        {
            int StringLength = 0;
            StringLength = txtPAD.Text.Length;
            Image img = Image.FromFile("../../Resources/Emoticons/" + ImageName + ".png");
            Clipboard.SetImage(img);
            txtPAD.SelectionStart = (StringLength + 1);
            txtPAD.Paste();
            txtPAD.Clear();
        } 
```

然后我将使用：

```
 private void button10_Click(object sender, EventArgs e)
    {
        InsertEmoticon("glad");
    } 
```

我在这里错过了什么吗？图像已加载到资源文件夹中，并且位于 Emoticons 文件夹中。

# java - WorkbenchPage.openEditor() 什么都不做

> ID：12863111
> 
> 赞同：1
> 
> 时间：2012-10-12T16:11:28.653
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我正在尝试制作一个工具栏按钮，以便在我的**RCP 应用**程序上使用另一个编辑器打开一个文件！

我有以下代码：

```
 IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
    IEditorPart oldEditor = page.getActiveEditor();
    IFile file = ((IFileEditorInput) oldEditor.getEditorInput()).getFile();

    IConfigurationElement[] editorsElements = Platform.getExtensionRegistry().getConfigurationElementsFor("org.eclipse.ui.editors");

    IEditorInput editorInput = new FileEditorInput(file);

    IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
    IWorkbenchPage page2 = window.getActivePage();
    try {
        page2.openEditor(editorInput, editorsElements[3].getAttribute("id"));
        System.out.println("==>>"+editorInput+">>>>"+ editorsElements[3].getAttribute("id"));
    } catch (PartInitException e) {
        e.printStackTrace();
    } 
```

但是当我要求采取行动时，他什么也没做！但也不返回错误..

结果`System.out.println()`看起来是正确的：

**==>>org.eclipse.ui.part.FileEditorInput(/g/Network.int)>>>>DesignEditor**

我做错了什么？

我按照 [这个](https://stackoverflow.com/questions/12846147/open-file-with-other-editor-with-toolbar-button-rcp/)建议做我的按钮

对不起我的英语问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:25:19.343

id 值应该更像一个 java 包名：org.myorg.tooling.designitor

# r - 导入标题组织不良的数据集

> ID：12863112
> 
> 赞同：1
> 
> 时间：2012-10-12T15:31:17.853
> 
> 标签：r

我有来自欧洲中央银行的[这个数据集，但它没有以适合导入 R 的方式编码：](https://dl.dropbox.com/u/22681355/data.csv)

尝试使用 read.csv 导入时出现以下错误：

```
Error in read.table(file = file, header = header, sep = sep, quote = quote, : 
  more columns than column names 
```

我想知道纠正这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:19:22.697

您可以只使用`skip`参数在前几行中不读取，这会导致您的问题：

```
europeanCB <- read.csv("path/to/data.csv", skip = 4) 
```

不过，您可能仍想对列名进行一些清理。目前，它们看起来像这样：

```
head(names(europeanCB))
[1] "Period.Unit."          "X.Australian.dollar.." "X.Bulgarian.lev.."  
[4] "X.Brazilian.real.."    "X.Canadian.dollar.."   "X.Swiss.franc.." 
```

一点点`gsub()`可以很快解决这个问题：

```
names(y) <- gsub("X\\.|\\.$|\\.\\.$", "", names(y))
head(names(y))
[1] "Period.Unit"       "Australian.dollar" "Bulgarian.lev"   "Brazilian.real"   
[5] "Canadian.dollar"   "Swiss.franc" 
```

# web-applications - Haskell：Web 开发的首选 linux 发行版

> ID：12863118
> 
> 赞同：0
> 
> 时间：2012-10-12T16:11:54.383
> 
> 标签：web-applications, haskell, hosting, yesod

在 Web 上是否有用于 Haskell 开发的首选 linux 发行版？特别是，我在本地进行了很多 Yesod 开发，但是我的 Web 服务器运行的是 RHEL (CentOS 5.8 i686)，这并不是最无缝的体验。*这不是与此相关的问题*，但是，我想知道是否有一个发行版（和/或托管服务提供商）对于 Haskell 的支持很规范，或者根据您自己的经验运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:17:41.210

最常见的发行版应该没问题。Debian 有一套很好的、全面的模块，适用于安全的服务器环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:33:14.537

不要忽视 Gentoo 和它的 Haskell 覆盖。

Gentoo 是一个源码发行版。你必须愿意花一些时间配置和编译。至于第一点，“genkernel”实用程序减轻了成本（及时）和麻烦。多核处理器减轻了第二个影响。

Haskell 覆盖是补充标准发行版的一种方式。（覆盖被广泛用于各种连接。Haskell 覆盖只是其中之一。）它由 Haskell 和 Gentoo 的专家熟练而勤奋地维护。（不，我不是付费发言人。）它使您可以访问许多无缝集成到 Gentoo 源代码树中的 Hackage 软件包，并且它包括一个实用程序（“hackport”），如果有什么事情，您可以为自己做同样的事情您对 Hackage 感兴趣的内容无法通过标准的 Gentoo 或 Haskell 覆盖获得。

编辑：freenode 上的#gentoo-haskell 是获取详细信息和指导的好来源

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T18:43:24.680

Haskell 开发没有规范的发行版。大多数发行版都提供 Haskell 包，但这些包通常已经过时了。许多 Haskell 开发人员只为 GHC 和 cabal-install 安装发行版包，然后只使用 cabal-install 或 cabal-dev 安装其他包，因为它们更有可能是最新的。不过，关于发行版以及如何管理 Haskell 库和应用程序，这完全取决于您。

# ios - iOS 上的 Facebook 深度链接无法启动我的应用

> ID：12863124
> 
> 赞同：4
> 
> 时间：2012-10-12T16:12:41.433
> 
> 标签：ios, facebook, deep-linking

我正在尝试实现 Facebook 的深度链接功能，以便在用户点击原生 Facebook 应用程序中的故事时直接启动游戏。我已经配置并启用了深度链接。然后我使用我的应用程序在我的时间线上发布，这是我游戏网站的链接。该链接包含一个特殊的 GUID，可以在游戏中进行一些社交活动。当我点击网页上的链接时，我的网站正常打开。当我在本机应用程序中点击故事时，我的网站再次打开。但是，如果我点击`via`底部的故事部分（例如`3 hours ago via MyApp`) 然后我的应用程序启动，但它对我不起作用，因为 GUID 没有以这种方式传递给应用程序（而且期望人们点击故事的那一部分也是没有用的）。我该如何设置它，以便当用户在网络浏览器中单击链接时，他们将被带到我的网站，那里有一个他们可以下载的我的应用程序的链接，但是当他们在本机 Facebook 应用程序中点击相同的链接时（仅涉及iOS），游戏将启动并将链接传递给我的游戏？我不知道为什么当我单击链接时它没有将我带到应用程序。

这是我的应用程序仪表板的屏幕截图：

![仪表板](../Images/02fe07203af48cf3db2ce54406cf81db.png)

URL 方案后缀仅适用于我想为多个应用程序使用相同的 ID，情况并非如此。

# java - gui 应用程序中的异常处理

> ID：12863126
> 
> 赞同：4
> 
> 时间：2012-10-12T16:12:48.720
> 
> 标签：java, user-interface, exception-handling, unchecked

我对如何在我的 GUI 应用程序中处理未经检查的异常有点迷茫。

例如，我有一个功能，可以将用户新创建的公司保存在（嵌入式）数据库中。

保存新创建公司的函数抛出 3 个异常：

`IllegalArgumentException`：如果公司或非空字段为空（手动检查并抛出）。

`EntityExistException`: 如果公司（它的名字）已经存在。（也手动检查并抛出）。

`PersistenceException`: 如果尝试保存时出现问题。（捕获并重新抛出）。

调用该`saveCompany`方法的函数会捕获所有 3 个异常，然后记录它们并向用户显示发生错误的对话框。

我现在想知道我是否需要抓住它们？或者让他们跑到`globalExceptionHandler`（我也可以看到他们的地方）可以吗？我也想知道我的反应应该是什么？

我应该告诉用户出现错误并让程序运行（因为程序的其他部分应该正常运行）还是应该告诉他然后结束程序（因为这是一个不应该出现的程序员错误） ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:17:11.713

所以好消息是你问了所有正确的问题。

> 我应该告诉用户有一个错误并让程序运行（因为程序的其他部分应该正常运行）还是应该告诉他然后结束程序（因为这是一个不应该出现的程序员错误） ?

这是您需要仔细考虑的设计问题。如果这是一个可恢复的错误并且程序无法继续运行，那么程序应该在用户没有选择的情况下关闭。如果程序的一部分必须终止，但其他部分可能会终止，则应通知用户。如果用户需要修复一些数据以便程序可以运行，则应告知用户。等等。是的，尽管您提出了正确的问题，但您实际上必须考虑它们并保持明智。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T16:29:35.810

In case of the **IllegalArgumentException** you should catch the exception and tell the user to correct the data (do not print the stacktrace).

In case of the **EntityExistException** the user should be informed that the company already exists, and perhaps he or she should consider updating it.

When the user receives the **PersistenceException** they should be presented with a dialog window with the stacktrace (and perhaps other data relevant for the developer) and informed to submit a bug report.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:22:21.537

在我看来，请执行以下操作

`EntityExistException`：让用户知道实体已经存在。继续使用该应用程序。

`PersistenceException`和`IllegalArgumentException`：给用户一个通用的消息，并停止应用程序。

I hope you see the difference in how the above two exceptions are being handled. One is something that can be caused and fixed by the user. The other is something the user cannot do anything about.

# websphere-portal - 虚拟门户登录 portlet 上的自定义文本

> ID：12863127
> 
> 赞同：0
> 
> 时间：2012-10-12T16:12:53.603
> 
> 标签：websphere-portal

我通过下载 PA_Login_Portlet_App、修改 loginportlet_en.properties 文件、导出到耳朵并在控制台中更新应用程序来更改文本“使用您的 Portal 帐户登录”。这行得通。但是，我的虚拟门户上的文本没有改变。有没有办法改变两者？虚拟门户是否从单独的属性文件中派生文本？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:22:46.283

虚拟门户使用一组单独的内容树。虚拟门户中的登录页面可能正在使用 IBM 的默认登录 portlet。您需要访问虚拟门户的管理页面并更改登录页面中的登录 portlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:44:23.437

事实证明，ear 正在正确更新登录 portlet。我遇到了 DNS 问题，正在查看错误的环境，并认为虚拟门户没有改变。

# java - 创建通用列表，其中列表的类型仅在运行时知道

> ID：12863128
> 
> 赞同：0
> 
> 时间：2012-10-12T16:13:01.620
> 
> 标签：java, generics, types

我想生成一个通用列表，其中列表的类型仅在运行时才知道（它是创建该列表的对象的类型）。

完整说明：

我想在一个抽象类中实现这个功能，所以我在运行前就知道父类。

不知道该怎么做。

```
 Class myClass = getClass().getSuperclass();
    LinkedList<myClass> list = new LinkedList<myClass>(); 
```

不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:17:47.840

或者你可以写：

```
 List<Object> list = new LinkedList<Object>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:15:25.240

泛型在很大程度上是一个编译时特性，因此在这种情况下它没有任何意义。

你可以写

```
List list = new LinkedList(); 
```

如果可以使用，我通常更喜欢 ArrayList。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:21:36.890

只需使用`Non-Generics` **ArrayList**

`ArrayList arrList = new ArrayList();`

即使你可以使用`<?>`

认为使用`List`will 很好，因为它显示了`"Program in Interface rather than implementation"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:40:46.183

另一种选择是使用扩展类的类型参数化抽象类。这有点过度设计，但应该可以工作：

```
package test;

import java.util.ArrayList;
import java.util.List;

public class  AbstractListHolder<T> {

    private List<T> list = new ArrayList<T>();

    List<T> getList() {
        return list;
    }

}

class ListHolder extends AbstractListHolder<ListHolder> {

    void doSomething() {
        getList().add(this);        
    }

} 
```

# perl - 在 perl SOAP::Lite 0.7 中更改肥皂体属性

> ID：12863132
> 
> 赞同：-2
> 
> 时间：2012-10-12T16:13:11.740
> 
> 标签：perl, soap-client

`soap:Body`是否可以使用 perl在标签中设置属性和`SOAP::Lite 0.7.`

在我看到的所有示例中，我可以使用更改 body 标签内的属性

SOAP::Data * 调用并`$soap->call($dataValue)`用于此目的。

我真正需要的是`soap:Body`在`SOAP::Lite perl`. 任何指向这个方向的指针都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:02:53.200

好的，我认为在将头撞到墙上 2 天后，我应该放弃在客户端使用soap lite 并为此目的使用原始 xml 或使用其中一种替代方法。我需要这个来添加数字签名。找到了一些切换到 SOAP::Simple/XML::Compile::SOAP 的建议。任何指向该方向的指针仍然会有所帮助。谢谢

还发现了通过扩展 SOAP::Serializer 和覆盖信封方法来进行细粒度控制的方法。

# ruby-on-rails - 从 rails after_filter 中的视图报告数据

> ID：12863135
> 
> 赞同：2
> 
> 时间：2012-10-12T16:13:28.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在我的视图中记录某些块的缓存未命中数。我将日志存储在控制器的 after_filter 中。

在视图中操作实例变量似乎是不可能的。在视图渲染期间存储信息的最佳方式是什么，然后控制器的 after_filter 可以使用这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:55:48.733

我会考虑将逻辑移动到专用模型对象中。

```
class MyController > ApplicationController
  around_filter :record_cache_misses

  def record_cache_misses
    @cache_miss_logger = CacheMissLogger.new
    yield
    @cache_miss_logger.persist_count
  end
end 
```

在视图中，这将是一个正常的方法调用。

```
<% @cache_miss_logger.increment_count %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:13:24.067

不确定这是否是最好的解决方案，但它适用于测试轨道应用程序：

将方法添加到您的控制器。它必须是公开的，除非您可以使用`send`它来调用它。

```
def increment_miss
  @miss_count ||= 0
  @miss_count += 1
end 
```

然后是 after_filter （我已将我的限制为`:index`）：

```
after_filter :only => :index do
  Rails.logger.info("miss_count: #{@miss_count.to_i}")
end 
```

然后根据需要多次调用视图中的方法：

```
<% controller.increment_miss %> 
```

`increment_by`如果您希望每次调用能够增加超过 1，您可能需要修改该方法以采用可选参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:17:32.833

我建议，

1.  没有直接的方法来实现这一点，因为它不是每个 rails MVC 规则，并且无论如何它是不可行的（除非你改变 rails）

2.  您处理范围从视图开始和结束的数据，那么为什么要反转并让控制器负责记录/使用它，让视图/帮助方法记录它

3.  因此，您可以在控制器中启动它，您可能已经在控制器中引用了缓存，将其向前推进，让视图操作它，并且在视图/帮助器中您可以记录它，保留一个单独的日志存储模块/文件来处理这个问题，让助手包含它，从视图中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:39:02.970

我找到了另一种出路，我希望/猜它是线程安全的，如果有人确认会很棒

```
# in controller
before_filter :foo
after_filter :bar

def foo
  class << @cache_miss
    attr_accessor :count
  end

  @cache_miss.count = 1
  puts "----------#{@cache_miss.count}" # => 1
end

def bar
  puts "----------#{@cache_miss.count}" # => 2
end

#in views
<% @cache_miss.count = 2 %> 
```

# search - 如何查找和替换不同的 UUID

> ID：12863136
> 
> 赞同：2
> 
> 时间：2012-10-12T16:13:32.703
> 
> 标签：search, replace

我想用我保存在文件中的新生成的 UUID 替换以下 UUID。

**当前的 UUID**

```
'uuid': '10000000-0000-0000-0000-0000000000',
'uuid': '20000000-0000-0000-0000-0000000000',
'uuid': '30000000-0000-0000-0000-0000000000',
'uuid': '40000000-0000-0000-0000-0000000000',
'uuid': '50000000-0000-0000-0000-0000000000', 
```

**我想使用的新 UUID**

```
61c1345a-15ef-4286-a97c-a4ade5858eee
6c548dcf-6ede-4342-8735-7cce300a3148
bfbb27df-1a26-49db-8408-85aaa676c4be
e6d2e99e-a4da-41d5-a4e0-7ce2e56a5258
50a2a6c6-57b8-4329-b306-9e361a66d8f7 
```

有没有一种方法可以用我拥有的新 UUID 替换我当前的每个 UUID，而无需手动执行每个 UUID？（我有大约 50 件事情要做）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:22:54.153

如果您想以编程方式执行此操作，您应该查看正则表达式。要匹配您的 UUID 之一，您需要使用这样的 UUID：

```
\d{8}-(?:\d{4}-){3}\d{10} 
```

您可以使用它来确定您在第一个文件中的哪个位置有此模式，并将其替换为第二个文件中的下一个模式。

# javascript - 为尚未点击的元素添加阴影

> ID：12863138
> 
> 赞同：0
> 
> 时间：2012-10-12T16:13:47.623
> 
> 标签：javascript, jquery

基于以下平铺布局：http: [//jsfiddle.net/bzCbh/7/](http://jsfiddle.net/bzCbh/7/)

任何人都可以提出一个解决方案来为未点击的元素添加阴影，使其看起来好像在瓷砖下面有深度？

谢谢

** 抱歉，这里的解决方案在于将仅包含框阴影的类规则添加到当前图块层，并且： .layer .tile img { position: relative;} Position Relative 停止了框阴影重叠到相邻元素上。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:21:54.013

这可以通过 CSS 完成：

```
.element{
   box-shadow:0 0 10px #999;
}

.element.clicked{
   box-shadow:0 0 0 #999
} 
```

和 JS：

```
$('.element').on('click', function(){
   $(this).addClass('clicked');
} 
```

这是直接的 CSS3...确保包含浏览器前缀以实现跨浏览器兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:15:26.793

查看 jQuery Shadow 插件[http://syddev.com/jquery.shadow/](http://syddev.com/jquery.shadow/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:20:24.347

根据您需要支持的浏览器，您可以使用 CSS3`Box-Shadow`属性：

```
 .tile {
       -moz-box-shadow: 3px 3px 4px #000;
       -webkit-box-shadow: 3px 3px 4px #000;
        box-shadow: 3px 3px 4px #000;
       } 
```

# javascript - 每次在 jQuery 中加载元素时，如何获取 .ready 被调用？

> ID：12863139
> 
> 赞同：0
> 
> 时间：2012-10-12T16:13:50.180
> 
> 标签：javascript, jquery, dom, domready

我希望每次初始化 Dom 元素时都会触发一个事件，如下所示：

**HTML**

```
<div id="container">
    <div id="data">data!</div>
</div>

<div id="clickme">Click me!</div>​ 
```

**Javascript**

```
$(function() {
    var i = 0;
    $('#clickme').click(function() {
        $('#container').html('<div id="data">data '+i+'</div>');
        i++;
    });

    // this event gets called only the first time #data element is ready
    // I want it to be called each time #data comes into being
    $('#data').ready(function() {
        alert('element data ready!');
    });
}); 
```

* * *

我试过了：

```
// doesn't work
$('#data').live('ready', function() {
    alert('element data ready (live)');
}); 
```

**编辑：**我有兴趣为 ajax 插入的元素执行此操作。例如：

```
$.post('/myaction/', {
     param: 'value'
  },
  function(data) {
      $('#someContainer').replaceWith(data);
  });

  // this function operates on elements returned by the ajax call, so they are not available at this point.
  myFunction();

  // so I'd better call myFunction() when the ajax data is inserted
}); 
```

在这里摆弄：http: [//jsfiddle.net/nf8CP/](http://jsfiddle.net/nf8CP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:19:06.207

*对于您更新的问题，只需将您的函数移动到回调中，您就完成了。*

```
$.post('/myaction/', {
     param: 'value'
  },
  function(data) {
      $('#someContainer').replaceWith(data);

      myFunction(); // Call it right here.
  });

 // myFunction();  // Not here!!!

}); 
```

* * *

有 DOM Mutation 事件，但我相信它们已被弃用，并且没有完整的浏览器支持。

还有`livequery`插件，但它真的是矫枉过正。

`.ready()`处理程序不处理单个元素的加载事件。仅适用于 DOM 加载事件。这三个示例都具有相同的行为：

*   `$(document).ready(...`
*   `$('document').ready(...`
*   `$("#data").ready(...`
*   `$().ready(...`

没有区别。传递给的参数`$`被忽略。

正确的解决方案是在创建元素时调用您想要的代码。

```
$(function() {
    var i = 0;
    $('#clickme').click(function() {
        $('#container').html('<div id="data">data '+i+'</div>');
        dataReady();
        i++;
    });

    function dataReady() {
        alert('element data ready!');
    }
}); 
```

此外，根据您的示例，一个更好且破坏性较小的解决方案是简单地修改文本，`#data`而不是使用`.html()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:32:34.223

你为什么不把你的 .ready 放在你的按钮点击里面，这样你就可以在每次点击它时查看它是否准备好了：

```
$(function() {
    var i = 0;
    $('#clickme').click(function() {
        $('#container').html('<div id="data">data ' + i + '</div>');
        i++;
        $('#data').ready(function() {
            alert('element data ready!');
        });
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:25:27.400

您可以使用`DOMNodeInserted`：

```
$(document).on('DOMNodeInserted', function() {
    alert('element data ready (live)');
}); 
```

每当将节点添加到 DOM 时都会触发它。

您还可以过滤哪些节点触发此事件，如下所示：

```
$(document).on('DOMNodeInserted', '#data', function() {
    ...
} 
```

现在它只会在`data`添加 ID 为的节点时触发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T16:22:17.370

`ready`（或更准确地说[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMContentLoaded)）仅在页面被完全解析时触发一次。没有干净的方法来做你想做的事，所以你需要手动安装你的事件处理程序。（有 DOM 突变事件，但它们太吵了，你的页面会在试图处理它们时吃掉自己，除非你真的知道自己在做什么，否则这通常是个坏主意）。

但是，我怀疑您在这里真正想要的是事件委托。您需要将事件安装在`#container`而不是`#data`，因为当您的 ready 函数被调用时，现有`#data`节点将从 DOM 中删除！

例如：

```
$('#container').on('click', '#data', function() {
  alert('#data element was clicked!');
}); 
```

它的作用是安装一个处理程序`#container`（它永远不会改变），它使用选择器侦听`click`源自（或冒泡）子元素的事件`#data`。这意味着即使您不断替换 的内容`#container`，也不必在其内容上安装新的事件处理程序。

# telerik-mvc - telerik-mvc 网格 - 如何格式化页脚模板？

> ID：12863140
> 
> 赞同：0
> 
> 时间：2012-10-12T16:13:51.240
> 
> 标签：telerik-mvc

这是我在控制器中的代码：

```
[GridAction]
public ActionResult _Select()
{
    // Creating dummy data to bind the grid 
    var data = Enumerable.Range(1, 100)
        .Select(index => new Customer
        {
            ID = index,
            Name = "Customer #" + index,
            Tax = 1 + index,
            Amount = 500 + index
        });

        return View(new GridModel(data));
    } 
```

这是我的看法：

```
<%: Html.Telerik().Grid<GridLoadedWithAjaxInTabStrip.Models.Customer>()
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(c => c.ID).Width(200);
        columns.Bound(c => c.Name);
        columns.Bound(c => c.Tax);
       columns.Bound(p => p.Amount);

    })

    .DataBinding(dataBinding => dataBinding.Ajax().Select("_Select", "Home")) 
    .Sortable()
    .Pageable()
    .Groupable()
    .Filterable()
%> 
```

我想知道如何以这种格式放置自定义页脚模板：

```
Total Tax:       XXXXX
Total Amount: XXXXX
Grand Total:   XXXXXXX 
```

请帮助我如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:34:24.513

你需要检查这个演示

[http://demos.telerik.com/aspnet-mvc/grid/aggregatesajax](http://demos.telerik.com/aspnet-mvc/grid/aggregatesajax)

# python - 使用 Python 正则表达式查找/替换文档中的 URL

> ID：12863147
> 
> 赞同：2
> 
> 时间：2012-10-12T16:14:55.740
> 
> 标签：python, xml, regex

Python正则表达式专家！我正在尝试更改 xml 文档中的一行。原行是：

```
<Tag name="low"     Value="%hello%\dir"/> 
```

我想看到的结果是：

```
<Tag name="low"     Value="C:\art"/> 
```

我失败的直接尝试是：

```
lines = re.sub("%hello%\dir"", "C:\art"/> 
```

这行不通。不会改变文档中的任何内容。有 % 的东西？

出于测试目的，我尝试了：

```
lines = re.sub("dir", "C:\art", a) 
```

我得到：

```
<Tag name="low"     Value="%hello%\C:BELrt"/> 
```

问题是 \a = [BEL](http://en.wikipedia.org/wiki/Bell_character)。

我尝试了很多其他的东西，但无济于事。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:17:22.210

在 Python 中，使用`r`文字字符串的前缀来避免转义斜杠。然后转义你的斜线以避免`\d`匹配数字。

```
lines = re.sub(r"%hello%\\dir", r"C:\\art") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:18:45.003

你的问题是你有一些在正则表达式中有特定含义的字符。

`\d`表示任何数字。`%hello%\dir`那么是`%hello%[0-9]ir`

您需要转义这些斜杠/使用原始字符串来解决这个问题：

```
a = '''<Tag name="low" Value="%hello%\dir"/>'''
lines = re.sub(r"%hello%\\dir", r"C:\\art", a)
print(lines) #<Tag name="low"     Value="C:\\art"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:54:15.887

这是一个很好的问题。它同时显示了文本表示的三个问题：

*   `'\a'`Python 字符串文字是单个 BELL 字符。

    要在 Python 源代码中输入反斜杠后跟字母“a”，您需要使用 raw-literals:`r'\a'`或转义斜杠`'\\a'`。

*   `r'\d'`（两个字符）在解释为正则表达式时具有特殊含义（`r'\d'`表示匹配正则表达式中的数字）。

    除了 Python 字符串文字的规则之外，您还需要转义可能的正则表达式元字符。您可以`re.escape(your_string)`在一般情况下使用或仅使用`r'\\d'`or `'\\\\d'`。`'\a'`在该`repl`部分也应该被转义（在你的情况下两次：`r'\\a'`或`'\\\\a'`）：

    ```
    >>> old, new = r'%hello%\dir', r'C:\art'
    >>> print re.sub(re.escape(old), new.encode('string-escape'), xml)
    <Tag name="low"     Value="C:\art"/> 
    ```

    顺便说一句，在这种情况下你根本不需要正则表达式：

    ```
    >>> print xml.replace(old, new)
    <Tag name="low"     Value="C:\art"/> 
    ```

*   最后，[XML 属性值不能包含某些](http://www.w3.org/TR/2000/REC-xml-20001006#syntax)也应该转义的字符，例如 , ,`'&'`等。`'"'``"<"`

一般来说，您不应该使用正则表达式来操作 XML。Python 的 stdlib 具有 XML 解析器。

```
>>> import xml.etree.cElementTree as etree
>>> xml = r'<Tag name="low"     Value="%hello%\dir"/>'
>>> tag = etree.fromstring(xml)
>>> tag.set('Value', r"C:\art & design")
>>> etree.dump(tag)
<Tag Value="C:\art &amp; design" name="low" /> 
```

# supervisord - supervisord 可以在其 Web 界面中显示 stderr 的尾部吗？

> ID：12863150
> 
> 赞同：1
> 
> 时间：2012-10-12T16:15:04.733
> 
> 标签：supervisord

supervisord 可以在其内置的 Web 界面中显示进程的 stderr 的尾部吗？

只有标准输出立即可用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T14:57:26.663

虽然web界面没有链接，但是*可以*在logtail上切换频道；默认是`stdout`，但您也可以`stderr`通过更改 logtail URL 来请求 logtail。

`tail -f`通常函数的 url采用 的形式`/logtail/processname`，但它支持将通道添加为额外的路径元素。因此，`/logtail/processname/stdout`与离开频道相同，或者您可以切换到`/logtail/processname/stderr`尾随 stderr 日志。

# java - JAXB 使用 XMLEventWriter 生成未格式化的 XML

> ID：12863157
> 
> 赞同：3
> 
> 时间：2012-10-12T16:15:44.313
> 
> 标签：java, jaxb, formatted

我正在使用 JAXB 来生成 XML 文件，并且由于业务需要，我目前正在使用 XMLEventWriter 将其写入其他一些 XML 文件的中间：

```
marshaller.marshal(jaxbElement, xmlEventWriter); 
```

目前设置一些属性，如：

```
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
marshaller.setProperty(Marshaller.JAXB_ENCODING, "utf-8");
marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true); 
```

但是，除了将**JAXB_FORMATTED_OUTPUT**设置为**true**之外，我的**XML 没有被格式化**。

有谁知道可能是什么问题？这只发生在我使用 XMLEventWriter 时...

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:25:16.347

当您将 an`XMLEventWriter`用作接收器时，JAXB 编组器仅负责向其发送适当的 XML 事件，并且`XMLEventWriter`可能仍会选择写出未格式化的 XML。我的建议是检查你的`XMLEventWriter`配置`Marshaller`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T21:55:06.463

不幸的是，默认`XmlEventWriter`实现不缩进。[stax-utils](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22net.java.dev.stax-utils%22%20AND%20a%3a%22stax-utils%22)库提供了一个`IndentingXMLEventWriter`在这些情况下可能会有所帮助的库。

# css - CSS3 媒体查询未被拾取

> ID：12863160
> 
> 赞同：1
> 
> 时间：2012-10-12T16:15:56.530
> 
> 标签：css, responsive-design, media-queries

我刚刚进入媒体查询，但第一个问题让我发疯，我花了几个小时。

我试过以下：

```
@media screen and (max-device-width: 480px) {
    div.logothingy {
        z-index: 100;
        display:none !important;
    }
}
@media (max-device-width: 480px) {
    div.logothingy {
        z-index: 100;
        display:none !important;
    }
}
@media screen and (max-width: 480px) {
    div.logothingy {
        z-index: 100;
        display:none !important;
    }
} 
```

我在头文件的末尾加载它，当我在萤火虫中查看它时，它就在那里。

然后我转到一个对象 .logothingy ，当我将窗口尺寸缩小时，它甚至没有得到样式。也就是说，它甚至没有得到它然后被覆盖，它根本没有得到它。快疯了 请帮忙。

好的，我什至正在这样做：

```
.logothingy {
border:1px solid;
}
@media screen and (max-width: 480px){
.logothingy {
z-index: 100;
display:none !important;
}
} 
```

它正在设置边界，而不是做其余的事情。我脑子里有这个

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

更新 2：我将其更改为 780px 并且它可以工作，但是当它处于 480px 时，它可以一直缩小到没有样式而没有得到任何样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T15:10:47.153

我有同样的戏剧，并注意到我错过了这个：

```
<meta name="viewport" content="width=device-width"> 
```

在我的索引页的头部。添加它并且媒体查询全部启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:25:17.367

这是正确的

```
@media screen and (max-width: 480px){
} 
```

尝试只放入 .logothingy 而不是 div.logothingy 并让我们知道是否有效

# erlang - 在 Erlang 应用程序中设置环境变量

> ID：12863164
> 
> 赞同：3
> 
> 时间：2012-10-12T16:16:02.597
> 
> 标签：erlang, environment, rebar

很明显，我对 Erlang 有一些不明白的地方……嗯，在很多事情中。

我在 Rebar 下设置了一个名为 cw 的应用程序。我启动它，一切运行正常。

现在我想创建一个环境变量，以便可以访问 src 目录。我在 cw.app.src 中输入了以下内容：

```
{env, [{proj_root, "mypath/apps/cw"}]} 
```

编译，从 Rebar start.sh 开始...一切正常。

现在是谜。昨天我这样做时，当我在 Erlang shell 中输入 application:get_env(cw, proj_root) 时，我得到了正确的路径。但是今天我变得不确定。

我错过了什么？

非常感谢，

LRP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:00:26.493

你是不是`application:start(cw)`先忘记了？如果应用程序未启动，则环境未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:01:43.133

`application:load(cw)`应该足够了。

# asp.net - 在不停机的负载平衡网站上部署时避免无效的视图状态

> ID：12863166
> 
> 赞同：3
> 
> 时间：2012-10-12T16:16:13.337
> 
> 标签：asp.net, deployment, webforms, load-balancing

这是场景：

1.  我们有 3 个 Web 服务器 A、B、C。
2.  我们希望在不关闭应用程序的情况下发布应用程序的新版本
    （例如，不使用“Down for maintenance”页面）。
3.  服务器 A 使用最新代码上线。
4.  服务器 B 脱机。服务器 B 上的用户被路由到 A 和 C。
5.  Page1.aspx 已使用新控件进行了更新。在此页面上从服务器 B 到服务器 A 的任何人
    在此页面上执行操作时都会收到视图状态错误。这是我们要防止的。

你们中的一些人如何解决这个问题？

以下是我们的一些想法（是否可能使用我们的负载均衡器，我不知道......我不熟悉负载均衡器配置[它是 F5]）：

*更天真的方法：*

关闭服务器 A 和 B 并更新。C 保留旧代码。所有流量都将被定向到 C，这没关系，因为它是旧代码。当 A 和 B 进行更新时，如果可能的话，告诉负载均衡器只保留 C 上具有活动会话的人，并且所有新会话都在 A 和 B 上启动。这种方法的问题是理论上会话可以持续如果用户继续使用该应用程序很长一段时间。

*不那么天真的方法：*

类似于天真的方法，除了（如果可能的话）我们告诉负载均衡器有关“安全”页面的信息，这些页面是未更改的页面。当用户最终到达“安全”页面时，他或她会被路由到服务器 A 或 B。理论上，用户可能永远不会登陆其中一个页面，但这种方法风险较小（但需要更多工作）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T22:42:26.227

我假设您的负载平衡器在正常操作期间将单个用户引导回 Web 场中的同一台服务器，这就是为什么您通常不会遇到此问题，但只有在您开始在服务器之间重定向用户时才会遇到此问题。

如果该假设是正确的，那么问题很可能是服务器场中的机器密钥不一致。

ViewState 针对服务器的机器密钥进行哈希处理，以防止客户端用户篡改。机器密钥由 IIS 自动生成，每次服务器重新启动或重置时都会更改，并且对每个服务器都是唯一的。

为了确保当用户在服务器之间移动时不会遇到视图状态验证问题，有两种可能的操作方案。

1.  使用带有 false 值的 enableViewStateMac 属性在单个页面上或在 web.config 文件的 pages 元素中全局禁用防篡改保护。我提到这一点纯粹是为了完整起见——你**永远**不应该在生产网站上这样做。

2.  在每台服务器上手动生成机器密钥并在每个应用程序之间共享相同的值（您可以对所有应用程序使用相同的密钥，但明智的做法是为每个应用程序使用一个密钥以最大限度地提高安全性）。为此，您需要生成密钥（不要**使用**您在 Internet 上的演示中看到的任何密钥，这违背了唯一机器密钥的目的），这可以通过编程方式或在 IIS 管理器中完成（参见[http://www. codeproject.com/Articles/221889/How-to-Generate-Machine-Key-in-IIS7](http://www.codeproject.com/Articles/221889/How-to-Generate-Machine-Key-in-IIS7)）。将网站部署到所有服务器时使用相同的机器密钥。

我无法回答升级需要 100% 正常运行时间的应用程序的最佳实践。

# jquery - jQuery .show()/.hide() 导致页面在点击时跳转

> ID：12863168
> 
> 赞同：-1
> 
> 时间：2012-10-12T16:16:19.633
> 
> 标签：jquery, events

**请参阅下面的解决方案和更新：**

这让我发疯了！！

```
 productTabAnchors.on('click', function (e) {
      var index = productTabLis.index($(this).parent());

      e.preventDefault();

      // switch all tabs off  
      productTabLis.removeClass('active');
      productTabAnchors.removeClass('active');
      productTabContent.removeClass('active').hide();

      // switch this tab on  
      $(this).addClass("active");
      productTabLis.eq(index).addClass('tab active');
      productTabContent.eq(index).addClass('active').show();
    }); 
```

`e.preventDefault()`页面跳转到锚点时似乎不起作用。锚嵌套在 中`li`，所以我也尝试`e.stopPropagation`过`return false`。

为什么这行不通？

这是一个演示问题的小提琴的链接：http: [//jsfiddle.net/mayoung/4zs97/](http://jsfiddle.net/mayoung/4zs97/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:22:38.303

> 您在页面的其他地方有任何解析错误吗？
> 
> 没有其他错误。它是动态添加的，但 .on 应该为动态创建的元素处理事件绑定。对？

您使用错误`.on`的语法来处理动态元素。

你需要的是

```
//v- Replace document with closest existing container on DOM ready
$(document).on('click', [selector], function() {
//                      ^-- replace with the dynamic element selector. 
```

> productTabAnchors 是锚点的集合 $('.product-tabs li a');

所以在你的情况下，它应该是，

```
$(document).on('click', '.product-tabs li a', function () { 
```

或者如果 .product-tabs 在页面加载时存在，那么，

```
$('.product-tabs').on('click', 'li a', function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:22:32.277

它在这里工作：

[http://jsfiddle.net/B6Cmg/](http://jsfiddle.net/B6Cmg/)

您使用的是什么版本的 jQuery？确保您的 jQuery 版本支持**on()**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:31:34.107

谢谢大家的建议。事实证明，它可能与显示和隐藏元素有关。e.preventDefault 正在工作，但是当我单击这些元素时页面仍在跳跃。我相信，由于隐藏元素的高度不同，当这些元素变得可见时，窗口不确定如何响应。

我没有使用 display:none 作为默认值，而是使用 .hide() 在页面加载时隐藏 div，然后调用 .show()。问题解决了。

这是一个演示解决方案的小提琴链接：http: [//jsfiddle.net/mayoung/4zs97/](http://jsfiddle.net/mayoung/4zs97/)

# c# - 这是应用命令设计模式的好例子吗？

> ID：12863173
> 
> 赞同：-7
> 
> 时间：2012-10-12T16:16:45.703
> 
> 标签：c#, winforms, design-patterns

```
private void button1_Click(object sender, System.EventArgs e)
{           
    Clipboard.SetDataObject(textBox1.Text,true);                                    
}

private void button2_Click(object sender, System.EventArgs e)
{
    if(Clipboard.GetDataObject().GetDataPresent(DataFormats.Text))
        textBox1.Text = Clipboard.GetDataObject().GetData(DataFormats.Text).ToString();
    else
        textBox1.Text  = "The clipboad does not contain any text";
} 
```

我使用 C# Windows 窗体应用程序编写此应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:26:11.900

让我们谈谈模式和邪教。

你听到很多关于“学习设计模式”和“如果你不使用设计模式你会很烂”和“你应该使用 X 模式”等等。有一个完整的模式运动正在进行......一个邪教，甚至......鼓励人们将*一切都*模式化。说这是人们应该做的事情。一切都有一个模式，通过 $DEITY，你应该使用它。

你猜怎么着？其中大约80％是垃圾。他们过分强调了设计模式的作用和范围。

模式是*一种工具*。而已。他们不是他们自己存在的理由。它们不是世界和平的关键。它们并不是所有问题的解决方案，你不应该仅仅因为它们在那里，或者因为你喝了邪教徒的 Kool-Aid 就使用它们。*您应该仅在它们适用于您需要做的工作*时才使用它们，因此它们是有意义的。

**设计模式的全部目的——它们*唯一*的目的——是降低整体复杂性。*** 无论它们不这样做，它们都不合适，你应该*忽略它们*。

因此，每当您考虑使用某种特定模式时，请问自己一个最重要的问题： **它将如何简化事情？**

^(*注意，我说的是*整体*复杂性。应用设计模式通常涉及增加应用程序的一个部分的复杂性，以便从其他部分删除更多的复杂性。只要复杂性的净损失，该模式仍然值得一看。)

* * *

现在，至于您的代码。

您已经询问过要更改那个小片段以使用命令模式。我想这是可能的；我看到了“复制”和“粘贴”操作，可以想象这些操作可以通过对文本框的引用进行参数化。

但问题是：**它将如何简化事情？**

如果没有除该片段之外的任何上下文，我看不到您将如何从添加 CopyCommand 和 PasteCommand 类以及在一个地方实例化和使用它们的代码中获益。也许当您在其他地方进行大量复制和粘贴时，这可能是值得的……但现在，不。感觉就像你正试图在它不想去的地方硬塞一个模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:48:06.107

> 使用命令设计模式编写此代码的正确方法是什么？

首先，阅读并理解 cHao 在他的 Answer 中所写的内容。（他并不是说设计模式是垃圾。他是说很多人*使用*和*谈论使用*设计模式的方式是垃圾。我同意......）

你的问题没有很好的答案：

首先，您需要问自己为什么要在这里尝试使用任何设计模式。如果您只是因为被告知使用设计模式是一件好事而这样做，那么您这样做是出于错误的原因。

其次，重复这个问题，用“命令设计模式”替换“任何设计模式”……通过应用这个特定的设计模式，你想在这里实现什么？如果您不能回答这个问题，那么您需要 1）返回并查看 Command 设计模式，并*了解*它实现了什么，以及 2）然后决定您是否真的需要它在您的程序中实现的功能。

如果我要直接回答您的初始和后续问题，我将不得不说：

*   示例代码片段似乎没有使用命令设计模式，
*   在没有看到您的其余代码的情况下，我不能说它是否*应该*使用该设计模式，并且
*   如果没有看到您的其余代码，我不能说它应该*如何*使用该设计模式。

* * *

# erlang - 钢筋生成的启动脚本未加载依赖项

> ID：12863175
> 
> 赞同：1
> 
> 时间：2012-10-12T16:16:49.297
> 
> 标签：erlang, riak, rebar

我对 Erlang 和使用 Rebar 非常陌生，但我们正在做一个需要连接到 Riak 服务器的项目，为此我正在尝试使用 Riak Erlang 客户端（`riakc_pb_socket`等）。

问题是从我的启动脚本（由 Rebar 和 reltool 生成）启动的 shell 不包括我在 rebar.config 中指定的依赖项（但是，当我执行 rebar get-deps 时它们下载得很好）。我知道当我自己启动 shell（erl -pa PATH）时，我可以将它们包含到我的路径中，但是由于这需要自动完成，我想知道我是如何实现的，我可以用 Rebar 指定这种行为还是我需要做从应用程序内部加载代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:54:41.757

感谢 Roberto Aloi 提供的链接，我能够弄清楚 reltool 是如何工作的，经过一些工作后，我发现我所要做的就是添加这一行

```
{app, riakc, [{mod_cond, app}, {incl_cond, include}]}, 
```

到我的 reltool.config，现在它可以工作了，非常感谢:)

# r - 将两个线性模型与 R 中的 anova() 进行比较

> ID：12863178
> 
> 赞同：6
> 
> 时间：2012-10-12T16:16:53.567
> 
> 标签：r, regression, linear-regression, anova

我不太明白这个输出中的 p 值是什么意思。我不是指这样的 p 值，而是在这种情况下。

```
> Model 1: sl ~ le + ky 
> Model 2: sl ~ le   
  Res.Df     RSS Df   Sum of Sq      F Pr(>F) 
1     97 0.51113                              
2     98 0.51211 -1 -0.00097796 0.1856 0.6676 
```

我得到了类似的东西，现在我想知道哪种型号更合适。由于只有一个而不是两个 p 值，我感到困惑。我使用 summary(model1) 或 summary(model2) 得到不同的 pvalue

现在如果

```
> fm2<-lm(Y~X+T) 
```

（T 是我的指标变量）和

```
> fm4<-lm(Y~X) 
```

如果我做

```
> anova(fm2,fm4) 
```

这测试了原假设`H0: alpha1==alpha2` `(Ha: alpha1!=alpha2)`c(alpha 是我的截距) 所以测试是有一个截距 (=> `alpha1==alpha2`) 还是两个截距 ( `alpha1!=alpha2`)更好

在这种情况下，我们现在显然会拒绝零假设，因为 p 值为 0.6676。

这意味着我们应该坚持使用 model `fm4`，因为它更适合我们的数据。

我得出的结论对吗？我尽了最大努力，但我不确定 p 值是什么意思。因为只有 on，这就是我认为它可能的意思。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:46:06.830

您的意思是“**不会**明显拒绝零假设”（而不是“现在明显拒绝”）？考虑到您的其余问题，这似乎更有意义。

只有一个 p 值，因为有两个模型要比较，因此只有一个比较（零假设与替代方案，或者在这种情况下实际上是零假设与未指定的替代方案）。从您上面所说的听起来好像`le`是一个连续的并且`ky`是一个分类预测器，在这种情况下，您正在将具有斜率和截距的模型与（如您所说的）具有单个斜率和两个截距的模型进行比较。因为 p 值相对较大，这意味着数据没有提供 的加性效应的证据`ky`。更简单的模型通常更合适（尽管要小心这个结论，因为构建 p 值是为了检验假设，而不是在模型中进行选择）。

您为`summary()`每个单独模型获得的 p 值是每个模型中每个参数的影响的 p 值，条件是该模型中的所有其他参数。*如果*您的数据是完全平衡的（这在回归设计中不太可能），您应该从`summary`和得到相同的答案`anova`，但否则结果`anova`通常更可取。

这个问题可能更适合[http://stats.stackexchange.com](http://stats.stackexchange.com)，因为它实际上是关于统计解释而不是编程......

# winforms - winform 语言本地化示例

> ID：12863180
> 
> 赞同：0
> 
> 时间：2012-10-12T16:17:04.470
> 
> 标签：winforms, localization

我有以下代码在静态模式下转换控件，即通过编写翻译后的字符串（法语、德语等）并保存资源文件并调用它。如果我需要动态翻译（包括用户输入），比如谷歌翻译器的工作方式。我需要在离线模式下实现相同的功能。有没有可能像翻译一样访问谷歌，它会立即/动态翻译成所选语言，但离线？或者请建议我任何首选方法。

```
foreach (Control c in this.Controls)
    {
        ComponentResourceManager resources = new ComponentResourceManager(typeof(MainForm));
        resources.ApplyResources(c, c.Name, new CultureInfo(lang));
    } 
```

——问候，马诺哈尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:13:53.340

我不知道它是否对你有帮助，但这就是我所做的。它是用托管 c++ /clr 编写的，您可以轻松地将其翻译成 c#。我写了一个小助手类来管理翻译过程

（您可以在运行时更改语言！它会立即翻译整个表单。）

```
ref class LanguageSwitcher
{
public:
   /// <summary>
   /// Change language at runtime in the specified form
   /// </summary>
   [System::Runtime::CompilerServices::Extension]
   static void SetLanguage( Form ^form, CultureInfo ^lang )
   {
      //Set the language in the application
      System::Threading::Thread::CurrentThread->CurrentUICulture = lang;

      ComponentResourceManager ^resources = gcnew ComponentResourceManager( form->GetType() );

      ApplyResourceToControl( resources, form->MainMenuStrip, lang );
      ApplyResourceToControl( resources, form, lang );

      form->Text = resources->GetString( "$this.Text", lang );
   }
private:
   static void ApplyResourceToControl( ComponentResourceManager ^resources, Control ^control, CultureInfo ^lang )
   {
      for each( Control ^c in control->Controls )
      {
         ApplyResourceToControl( resources, c, lang );
         String ^text = resources->GetString( c->Name + ".Text", lang );
         if( text != nullptr )
            c->Text = text;
      }
   }

   static void ApplyResourceToControl( ComponentResourceManager ^resources, MenuStrip ^menu, CultureInfo ^lang )
   {
      if(menu != nullptr)
         for each( ToolStripItem ^m in menu->Items )
         {
            String ^text = resources->GetString( m->Name + ".Text", lang );
            if( text != nullptr )
               m->Text = text;
         }
    }
}; 
```

这是它的使用方式：

```
System::Globalization::CultureInfo^ lang = cli::safe_cast<System::Globalization::CultureInfo^ >(langCombo->SelectedItem);
LanguageSwitcher::SetLanguage(this,lang); 
```

希望这可以帮助！

# java - 如何让 CXF 将异常记录到 ERROR 通道？

> ID：12863182
> 
> 赞同：1
> 
> 时间：2012-10-12T16:17:05.017
> 
> 标签：java, spring, logging, cxf, jax-rs

在我当前安装的 Spring CXF JAX-RS Servlet 中，异常被记录到 log4j DEBUG 通道：

```
DEBUG http-8134-2 org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper - WebApplicationException has been caught, status: 500, message: Unrecognized field "links" (Class Result), not marked as ignorable
at [Source: {"links"}; line: 1, column: 11] (through reference chain: bbc.news.naf.elections.data.model.client.Result["links"])
javax.ws.rs.WebApplicationException: org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "links" (Class Result), not marked as ignorable
at [Source: {"links":[{}; line: 1, column: 11] (through reference chain: bbc.news.naf.elections.data.model.client.Result["links"])
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:243)
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:89)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) 
```

显然，这并不理想。如何让 CXF 将这些异常堆栈跟踪记录到更相关的内容，如 WARN 或 ERROR？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:19:21.053

编写一个简单的提供者类如下

```
public class ExceptionResponseBuilder 
  extends WebApplicationExceptionMapper {
Logger _logger = LoggerFactory.getLogger(this.getClass().getName());

public Response toResponse(WebApplicationException ex) {

//Do something to get the object you want to return. 
// ex object will give you information you need
     Response r = Response
                .status(Response.Status.BAD_REQUEST)
                .entity(set any object your want to return)
                .build();

    return r;
} 
```

将以下内容添加到您的 spring 文件中

```
 <bean id="exceptionResponseBuilder" class="com.orgname.project.provider.ExceptionResponseBuilder">
   <property name="printStackTrace" value="true" />
</bean>
        <jaxrs:providers>
        <ref bean="exceptionResponseBuilder"/>
    </jaxrs:providers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:12:11.453

您需要在 WebApplicationExceptionMapper 类上启用 printStackTrack 功能。您可以通过将以下内容添加到 Spring XML 上下文中来做到这一点：

```
<jaxrs:providers>
  <bean class="org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper">
    <property name="printStackTrace" value="true" />
  </bean>
</jaxrs:providers> 
```

现在应该将异常记录到 log4j WARN 通道。

# python - 从字符串的开头和结尾删除非字母字符

> ID：12863188
> 
> 赞同：6
> 
> 时间：2012-10-12T16:17:29.453
> 
> 标签：python, regex

我需要从单词的开头和结尾删除所有非字母字符，但如果它们出现在两个字母之间，请保留它们。

例如：

```
'123foo456' --> 'foo'
'2foo1c#BAR' --> 'foo1c#BAR' 
```

我尝试使用`re.sub()`，但我无法编写正则表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T16:24:02.610

像这样？

```
re.sub('^[^a-zA-Z]*|[^a-zA-Z]*$','',s) 
```

`s`是输入字符串。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T16:25:16.290

您可以为此使用[str.strip](http://docs.python.org/library/stdtypes.html#str.strip)：

```
In [1]: import string

In [4]: '123foo456'.strip(string.digits)
Out[4]: 'foo'

In [5]: '2foo1c#BAR'.strip(string.digits)
Out[5]: 'foo1c#BAR' 
```

正如马特在评论中指出的那样（感谢马特），这只会删除数字。要删除任何非字母字符，

定义非字母的含义：

```
In [22]: allchars = string.maketrans('', '')

In [23]: nonletter = allchars.translate(allchars, string.letters) 
```

然后剥离：

```
In [18]: '2foo1c#BAR'.strip(nonletter)
Out[18]: 'foo1c#BAR' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T16:25:20.040

通过您的两个示例，我能够使用 Python 的非贪婪语法创建一个正则表达式，如此[处](http://docs.python.org/library/re.html#regular-expression-syntax)所述。我将输入分成三个部分：非字母、完全字母，然后是非字母直到最后。这是一个测试运行：

```
1:[123]   2:[foo]   3:[456]
1:[2]   2:[foo1c#BAR]   3:[] 
```

这是正则表达式：

```
^([^A-Za-z]*)(.*?)([^A-Za-z]*)$ 
```

你`mo.group(2)`想要什么，`mo`MatchObject 在哪里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T17:42:23.293

要与 Unicode 兼容：

```
^\PL+|\PL+$ 
```

`\PL`代表`not a letter`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T16:24:17.987

试试这个：

```
re.sub(r'^[^a-zA-Z]*(.*?)[^a-zA-Z]*$', '\1', string); 
```

圆括号捕获字符串开头和结尾的非字母字符串之间的所有内容。`?`确保最后也`.`不会捕获任何非字母字符串。然后替换简单地打印捕获的组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T16:25:26.917

`result = re.sub('(.*?)([a-z].*[a-z])(.*)', '\\2', '23WERT#3T67', flags=re.IGNORECASE)`

# c - C 程序忽略包含 sizeof 的 if 语句

> ID：12863191
> 
> 赞同：-1
> 
> 时间：2012-10-12T16:17:40.460
> 
> 标签：c, file, if-statement, sizeof

我目前正在编写一个简单的一次性小程序。我希望它在`keyfile`小于`source`文件时警告用户，但是当我运行它时，我的程序会忽略它。

```
/* Check if keyfile is the same size as, or bigger than the sourcefile */
if(sizeof keyfile < sizeof sourcefile)
{
printf("Source file is larger than keyfile.\n");
printf("This significantly reduces cryptographic strength.\n");
printf("Do you wish to continue? (Y/N)\n");
scanf("%c", &ans);
if(ans == 'n' || ans == 'N')
    {
    return (1);
    }
if(ans == 'y' || ans == 'Y')
    {
    printf("Proceeding with Encryption/Decryption.\n");
    } 
```

我怀疑问题出在我的使用`sizeof`上，但我不知道还有其他选择吗？关于如何更改代码以使其正常工作的任何建议？

编辑：我已经尝试`fstat`尽我所能，但它仍然以同样的方式做出反应......这就是我所做的：

```
/* Get size of sourcefile. */
if((sourcefile = fopen(argv[1], "rb"))== NULL)
{
printf("Can't open source file.\n");
printf("Please enter a valid filename.\n");
printf("USAGE: OTP <source file> <output file> <keyfile>\n");
return (1);
}

fflush(sourcefile);
fstat(fileno(sourcefile), &statbuf);
fclose(sourcefile);

/* Get size of keyfile. */
if((keyfile = fopen(argv[3], "rb"))== NULL)
{
printf("Can't open keyfile.\n");
printf("Please enter a valid filename.\n"); 
printf("USAGE: OTP <source file> <output file> <keyfile>\n");
return(1);

fflush(keyfile);
fstat(fileno(keyfile), &keybuf);
fclose(keyfile);
} 
```

并更改了 if 语句的第一行被忽略：

```
if((keybuf.st_size) < (statbuf.st_size)) 
```

为什么它仍然被程序忽略？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T16:20:24.563

`sizeof`不返回文件的大小。`sizeof`用于检查类型在内存中占用的字节数。

如果您想了解有关获取文件大小的更多信息，请查看[这篇文章。](https://stackoverflow.com/questions/8813136/function-that-returns-file-size)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T16:19:48.873

`sizeof`是一个编译时运算符，产生其操作数的数据类型的大小（以字节为单位）。你确定这就是你想在这里做的吗？我非常怀疑，因为您似乎想比较*文件大小*。（`fopen()`，`fseek()`结束，`ftell()`获取文件的大小，或者您的操作系统 API 为您提供的任何更舒适的功能。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T16:21:32.267

`sizeof`是用于计算数据类型大小的一元运算符。您不能使用它来查找/比较文本文件的大小。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T16:21:46.750

您需要使用[stat](http://linux.die.net/man/2/stat)来获取文件的大小。

# php - 在 EC2 上运行用户数据库，但域托管在其他地方

> ID：12863197
> 
> 赞同：0
> 
> 时间：2012-10-12T16:17:55.893
> 
> 标签：php, mysql, amazon-ec2, cloud

我有一个用户数据库和一些在 EC2 实例上运行的 PHP 脚本。但是，我的域和站点位于另一个位置（在 shopify 上）。EC2 实例作为子域 A 记录运行。

我想知道如何将两者结合起来，以便在 EC2 实例上处理来自我的站点的请求，就好像它们在同一台服务器上一样。那可能吗？这是人们在使用 EC2 进行处理时通常采用的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:55:43.440

用技术术语来说，网站通常是一个或多个服务器，它们响应对由一个或多个 A 记录定义的给定地址集的请求。

这意味着如果您希望 EC2 上的 PHP 站点成为主要服务，您必须将您的域和关联的主机名直接指向该站点。要仍然使用 Shopify，您必须以某种方式将来自您的站点的请求代理到该站点，或者设置 Shopify 以使用子域，实际上是翻转您现在拥有的配置。

如果没有具体示例，尚不清楚您要做什么。

# namespaces - Mule 代理服务在命名空间中找不到定义

> ID：12863200
> 
> 赞同：0
> 
> 时间：2012-10-12T16:18:19.323
> 
> 标签：namespaces, mule

我在 mule 中设置了一些代理服务，但仍在学习中。由于某种原因，当命名空间和服务名称应该正确时，此流程不起作用。有人看到我的错误吗？

谢谢你的时间

```
<flow name="UPCFlow1" doc:name="UPCFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="4040" path="upc" doc:name="HTTP"/>
    <cxf:proxy-service namespace="http://searchupc.com/" service="GetProduct" payload="envelope" wsdlLocation="http://www.searchupc.com/service/UPCSearch.asmx?WSDL"  doc:name="SOAP" port="UPCSearchSoap"/>
<http:outbound-endpoint address="http://www.searchupc.com/supc/service/UPCSearch.asmx"
    exchange-pattern="request-response" doc:name="HTTP"/>
</flow> 
```

这是来自堆栈跟踪

```
INFO  2012-10-12 11:06:44,739 [main] org.mule.module.launcher.application.DefaultMuleApplication: App 'upc' never started, nothing to dispose of
Exception in thread "main" org.mule.module.launcher.DeploymentInitException: ServiceConstructionException: Could not find definition for service {http://searchupc.com/}GetProduct. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:22:59.807

您的配置存在问题：服务名称是“UPCSearch”而不是“GetProduct”。

这有效：

```
<flow name="UPCFlow1" doc:name="UPCFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        host="localhost" port="4040" path="upc" doc:name="HTTP" />
    <cxf:proxy-service namespace="http://searchupc.com/"
        service="UPCSearch" payload="envelope"
        wsdlLocation="http://www.searchupc.com/service/UPCSearch.asmx?WSDL"
        doc:name="SOAP" port="UPCSearchSoap" />
    <http:outbound-endpoint
        address="http://www.searchupc.com/supc/service/UPCSearch.asmx"
        exchange-pattern="request-response" doc:name="HTTP" />
</flow> 
```

# c# - WPF DataGrid ComboBox在提交前检索值

> ID：12863201
> 
> 赞同：4
> 
> 时间：2012-10-12T16:18:32.177
> 
> 标签：c#, wpf, datagrid, combobox, commit

我在 WPF 应用程序（使用实体框架）中有一个 DataGrid，其中有一个`ComboBox`列。这`ComboBox`绑定到一个数据源，该数据源使用对包含在下拉列表中显示的名称的表的连接引用。它为此联接使用了一个 ID 字段（称为 SalesActMgrID）。我正在使用该表中特定名称的 List<> 填充下拉列表。

我的问题是，当从下拉列表中选择名称时，它会更改该连接表中的名称，而不是将**SalesActMgrID**更改为所选名称。

我想出了一种方法来更新我的数据源中的 ID，但我还没有想出一种方法来找出下拉列表中选择的名称，以便我可以获得该名称的正确 ID。

组合列定义为：

```
 <DataGridComboBoxColumn 
                    SelectedItemBinding="{Binding Path=ClientContract.StaffRole_SalesActMgr.StaffName}" 
                    Header="Sales Act Mgr" 
                    x:Name="salesActMgrColumn" Width="Auto" >
                <DataGridComboBoxColumn.EditingElementStyle>
                    <Style TargetType="ComboBox">
                        <Setter Property="ItemsSource" 
                                Value="{Binding staffNamesListSAM}" />
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </Style>
                </DataGridComboBoxColumn.EditingElementStyle>
            </DataGridComboBoxColumn> 
```

DataGrid 绑定到 EmployeeTime 的数据源。表的完整连接是：

```
EmployeeTime.ClientContractID is joined to ClientContract.ClientContractID {M-1}
StaffRoles.StaffRoleID is joined to ClientContract.SalesActMgrID {1-M} 
```

我正在使用以下代码逐个单元格地执行提交。

```
 private bool isManualEditCommit;

    private void consultantsDataGrid_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
    {
        if (!isManualEditCommit)
        {
            isManualEditCommit = true;
            string head = e.Column.Header.ToString();
            bool doCommit = true;

            switch (head)
            {
                case "Sales Act Mgr":
                    {
                        e.Cancel = true;
                        //This is where I have been able to 'hard code' in a different
                        //ID value into the SalesActMgrID field which then correctly
                        //updates the value, but I need to know what name was selected
                        //here so I can get the correct ID for that name and set it below.
                        ((EmployeeTime)e.EditingElement.DataContext).ClientContract.SalesActMgrID = 11;
                        doCommit = false;
                    }
                    break;
            }
            DataGrid grid = (DataGrid)sender;
            if (doCommit)
            {
                grid.CommitEdit(DataGridEditingUnit.Row, doCommit);
                EmployeeTime et = e.Row.Item as EmployeeTime;
                CreateBurdenValue(et);
            }
            else
            {
                grid.CancelEdit(DataGridEditingUnit.Row);
            }
            isManualEditCommit = false;
        }
    }
} 
```

可能还有其他一些“更好”的方法可以做到这一点，我很想知道。至少，如果有人可以指出我可以在任何提交操作完成之前获得刚刚选择的选定名称的方向，我将不胜感激。

仅供参考，如果我让它通过并在单元格上执行正常的 CommitEdit，则所选名称实际上会在 StaffRole 表中更新，因此在显示原始名称的网格中的每一行上，它们都会更改为新选择的名称（这不是我想要的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T11:41:46.610

我将总结一下OP在评论中发布的内容。要访问编辑处理程序中的选定项目，请使用：

```
 (e.EditingElement as ComboBox).SelectionBoxItem 
```

# javascript - 在一个字符串中查找多个子字符串

> ID：12863218
> 
> 赞同：2
> 
> 时间：2012-10-12T16:19:40.837
> 
> 标签：javascript, regex

我想检查一个字符串中是否有两个或多个值，无论它们在所述字符串中的位置如何。例如，如果我想要正则表达式中的**“OR”**条件，我会这样做：

```
/(a|b)/.test("a") // true 
```

但我需要的是一个**"AND"**；像这样的东西：

```
/(a&b)/.test("a") // false
/(a&b)/.test("b") // false
/(a&b)/.test("a b") // true
/(b&a)/.test("a b") // true
/(a&b&c)/.test("a b") // false
/(a&b&c)/.test("a c b") // true 
```

显然这种语法是不正确的......

这些值`a`, `b`,`c`等是从数组中提取的。我尝试过使用 and 的组合，`eval()`但这`indexOf(a) !== -1 && indexOf(b) !== -1`太慢了，这就是我转向正则表达式的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:21:59.260

你可以这样做：

```
/(?=.*a)(?=.*b)/.test("a") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:25:49.880

@OmarJackman 发布的答案将满足您的要求。然而，值得注意的是，他的解决方案使用了比更简单的正则表达式需要更多处理的环视。如果您正在寻找良好的性能，我建议您只运行两个单独的正则表达式（测试 case `a`，然后测试 case `b`）。两个简单的正则表达式比一个复杂的正则表达式运行速度要快几个数量级，尤其是当搜索文本变大时。

**编辑：**如评论中所述，“数量级”是对性能影响的不公平夸大，但无论如何都应考虑性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:55:03.663

由于您正在匹配固定字符串，因此您可以使用：

```
function matchAll(str, arr)
{
  for (var i=0; i<arr.length; ++i) {
    if (str.indexOf(arr[i]) === -1) {
      return false;
    }
  }
  return true;
}

matchAll('a', ['a']); // true
matchAll('a', ['a', 'b']); // false
matchAll('a b', ['a', 'b']); // true
matchAll('a b c', ['a', 'b']); // true
matchAll('a b', ['a', 'b', 'c']); // false
matchAll('a c b', ['a', 'b', 'c']); // true
matchAll('c a b', ['a', 'b', 'c']); // true 
```

如果您正在寻找固定字符串，`.indexOf()`它将比正则表达式更快。

# c# - 链接 C# 常量：

> ID：12863220
> 
> 赞同：1
> 
> 时间：2012-10-12T16:19:51.450
> 
> 标签：c#, constants

在我上一家公司，我遇到了一种似乎非常聪明的方法，可以为分隔字符串的某些片段或 SQL 表中的列的索引创建常量，但我一直想知道是否存在性能或其他缺陷没抓到。

例如，如果包含地址信息的单个分隔字符串中有五个数据字段，您可能会看到以下内容：

```
const int INDX_NAME = 0;
const int INDX_ADDR = INDX_NAME + 1;
const int INDX_CITY = INDX_ADDR + 1;
const int INDX_STATE = INDX_CITY + 1;
const int INDX_ZIP = INDX_STATE + 1; 
```

这样，如果将来程序需要在名称和城市之间分隔两行地址（例如，一行是街道地址，另一行是套房号），程序员所要做的就是添加行

```
const int INDX_ADDR2 = INDX_ADDR + 1; 
```

并将创建 INDX_CITY 的行更改为

```
const int INDX_CITY = INDX_ADDR2 + 1; 
```

简而言之，这似乎是处理可能会更改的列/片段索引列​​表的一种非常聪明的方法，特别是如果列表有 50 多个项目，并且您需要在索引号 3 处添加一些内容。但是，我不确定有多少随着列表开始变大，或者是否存在我没​​有看到的其他固有缺陷，这可能会开始影响性能。

有什么想法吗？有什么东西让这种懒惰的编程变得不聪明吗？

谢谢。

-编辑-

我可以看到枚举的值将在哪里得到我得到的响应，但我担心它们只有在我使用的每个字段彼此之间正好相差 1 个位置时才有用。如果我使用其他程序员也引用的一些数据存储片段，但我只关心总字段的一个子集，所以我需要跳过我不关心的字段块。

例如，我使用 300 个字段长的分隔字符串中的 100 个数据字段，但我的应用程序不关心字段 1-4（数组计数）。有没有一种干净的方法来使用枚举来替换

```
const int INDX_RECORD_ID = 0;
const int INDX_DATE_UPDATED = INDX_RECORD_ID + 5;
const int INDX_USER_UPDATED = INDX_DATE_UPDATE + 1;
... 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:22:32.050

不，这不是“懒惰”。我认为这只是一种很好的做法。并且它*不会*导致运行时损失，因为`const`字段[*必须*是编译时常量](http://msdn.microsoft.com/en-us/library/e6w8fe1b.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T16:26:52.230

你真的应该`enum`在这里使用。它们专为这种情况而设计：

```
public enum MyEnum
{
    NDX_NAME,
    INDX_ADDR,
    INDX_CITY,
    INDX_STATE,
    INDX_ZIP
} 
```

添加值（到任何位置）将相应地更新所有索引。

使用枚举将有几个优点：（不是详尽的列表）

1.  你可以有一个函数的参数或一个枚举类型的变量，而不是一个索引。这有助于使其他编码人员的意图更清楚，然后知道“这个参数需要被赋予这个其他类中的常量之一。”
2.  您不必担心会犯错误，即没有在前一个常量上加一个。当您在中间添加新项目时，我可以很容易地看到这种情况发生，或者只是作为复制/粘贴错误。
3.  您可以使用其他枚举工具，例如能够获取枚举的字符串值（以及整数值）以便于显示，您可以使用反射来迭代可能的值，您可以将字符串或整数解析为适当的枚举值等

至于性能，值（对于枚举和常量）将在编译时而不是运行时评估，因此在运行时它不会比手动编号产生任何额外成本。

# c# - ObjectDataSource 不要调用 SelectCountMethod

> ID：12863222
> 
> 赞同：0
> 
> 时间：2012-10-12T16:19:59.963
> 
> 标签：c#, .net, gridview, objectdatasource

我正在使用 SelectCountMethod 来计算返回的行数，但不会为我添加的新类调用它。

下面是我的 UI 代码。

```
 <asp:ObjectDataSource ID="ObjDS1" runat="server" EnablePaging="false"    TypeName="SomeBusinesslogicclass"
                       SelectCountMethod="GetCallCount" SelectMethod="sp_gettotalcallsummary2_ivr"   OnSelecting="objDS_Selecting1"
                        OnSelected="objDS_Selected1"> 
```

商业逻辑

```
public int GetCallCount(string Provider , string FromCallDate , string ToCallDate)
    {

        CallSummaryRepository rep = new CallSummaryRepository();
        return rep.GetCallCount(Provider,FromCallDate,ToCallDate);
    } 
```

数据访问层

```
 public int GetCallCount(string Provider , string FromCallDate , string ToCallDate)
    {
        int count = 0;
        using (IVREntities context = new IVREntities())
        {
            var query = (from ap in context.sp_gettotalcallsummary2(Provider, FromCallDate, ToCallDate)

                         select ap

                        );

            count = query.Count();
        }
        return count;
    } 
```

我已经设置了断点并尝试调试代码，但它从未进入 GetCallCount 函数。我知道这个问题已经被问过几次了，但这些答案并不能解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:26:18.213

有问题。我已将分页属性设置为 false 。

# mysql - 连接表上的 MySQL 索引

> ID：12863226
> 
> 赞同：1
> 
> 时间：2012-10-12T16:20:16.707
> 
> 标签：mysql, join, indexing

我有一个连接表，我只想为连接后生成的表建立索引。我已经阅读了很多内容，因此我了解索引语法`CREATE INDEX my_index`我无法理解如何仅为连接表创建索引。我只是无法弄清楚语法

给定下表（注意这只是一个例子）：

```
CREATE TABLE books(
    id INT,
    title VARCHAR(50),
    author_id INT
);

CREATE TABLE authors(
    id INT,
    name VARCHAR(50)
); 
```

语法将如何为以下查询编制索引？出于该项目的目的，我可能不明智地保留书籍或作者的索引，因为这两个表都将被频繁更新和插入，并且我理解（如果错误，请纠正我）索引在频繁编辑时创建会减慢一切数据：

```
 SELECT * FROM authors, books WHERE books.author_id = authors.id AND books.title LIKE '%Great%'; 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:24:19.303

在书籍上创建索引，例如

```
 CREATE TABLE books(

id INT,

title VARCHAR(50),

    author_id INT,
KEY idx_author_id ('author_id')
); 
```

如果您的查询是否经过优化，请检查解释工具

例如。

```
EXPLAIN SELECT * FROM authors, books WHERE books.author_id = authors.id AND books.title LIKE '%Great%'; 
```

# css - Extjs 可调整大小的手柄颜色变化？

> ID：12863231
> 
> 赞同：0
> 
> 时间：2012-10-12T16:20:31.060
> 
> 标签：css, internet-explorer, extjs, extjs4

我一直在尝试替换 Extjs 中可调整大小的句柄的当前 CSS 类，特别是用于弹出窗口的句柄。我正在尝试更改它的颜色，但它似乎不起作用。这是我的CSS代码

```
.linkWindow .x-toolbar-footer, 
.x-resizable-handle, .x-resizable-handle-west, .x-resizable-handle-east, .x-resizable- handle-south, .x-resizable-handle-over .x-resizable-handle-east, .x-resizable-handle-over .x-resizable-handle-west, .x-resizable-proxy, .x-resizable-overlay

{

    color: #045BB3;
    background-color: #045BB3;
    background: #045BB3;
    border-color: #045BB3;

} 
```

我不知道该怎么办了。任何帮助将不胜感激！！

还应该注意我正在为 IE 7 开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:28:21.437

我猜 Extjs css 正在覆盖你自己的。尝试`!important`在您的属性末尾添加如下：

```
.linkWindow .x-toolbar-footer, 
.x-resizable-handle, .x-resizable-handle-west, .x-resizable-handle-east, .x-resizable- handle-south, .x-resizable-handle-over .x-resizable-handle-east, .x-resizable-handle-over .x-resizable-handle-west, .x-resizable-proxy, .x-resizable-overlay

{

    color: #045BB3 !important;
    background: #045BB3 !important;
    border-color: #045BB3 !important;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:27:37.583

句柄实际上是 gif 图像。您需要为每个分隔条编辑 gif。例如 extjs4/resources/themes/images/default/sizer/s-handle.gif 是一个。

# css - CSS改变孩子名字的高度

> ID：12863233
> 
> 赞同：0
> 
> 时间：2012-10-12T16:20:39.117
> 
> 标签：css

我将如何改变这个设置？

```
<div class="rsNav rsTabs"> 
```

我试过：

```
.rsNav rsTabs {
    height: 100px;
} 
```

和

```
.rsTabs {
    height: 100px;
} 
```

但它不会改变它的 div。我敢肯定我只是想多了！哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:22:08.603

尝试这个

```
.rsNav.rsTabs{ 
height:100px 
} 
```

# java - 使用 Bouncycastle 生成的 CSR 缺少公钥和属性

> ID：12863235
> 
> 赞同：3
> 
> 时间：2012-10-12T16:21:00.443
> 
> 标签：java, encryption, bouncycastle, jce

我正在使用 Bouncy Castle 生成 CSR。此证书适用于 CA。当我使用 OpenSSL 查看 CSR 的文本信息时，我发现缺少公钥和属性。任何帮助表示赞赏。

版本：充气城堡：bcpkix-jdk15on:1.47

```
 String principal = "CN=company1, OU=company1, O=company1, C=GB"
    AsymmetricKeyParameter keyParam = PrivateKeyFactory.createKey(pair.getPrivate().getEncoded());
    AlgorithmIdentifier signatureAlgorithm = new DefaultSignatureAlgorithmIdentifierFinder()
            .find("SHA1WITHRSA");
    AlgorithmIdentifier digestAlgorithm = new DefaultDigestAlgorithmIdentifierFinder().find("SHA-1");
    ContentSigner signer = new BcRSAContentSignerBuilder(signatureAlgorithm, digestAlgorithm).build(keyParam);

    SubjectPublicKeyInfo publicKeyInfo = new SubjectPublicKeyInfo(signatureAlgorithm, pair.getPublic()
            .getEncoded());
    PKCS10CertificationRequestBuilder csrBuilder = new PKCS10CertificationRequestBuilder(
            new X500Name(principal), publicKeyInfo);
    csrBuilder.addAttribute(X509Extension.basicConstraints, new BasicConstraints(true));
    csrBuilder.addAttribute(X509Extension.keyUsage, new KeyUsage(KeyUsage.cRLSign | KeyUsage.keyCertSign));
    csr = csrBuilder.build(signer); 
```

生成的csr的pem

```
-----BEGIN CERTIFICATE REQUEST-----
MIICvjCCAaYCAQAwRjERMA8GA1UEAwwIY29tcGFueTExETAPBgNVBAsMCGNvbXBh
bnkxMREwDwYDVQQKDAhjb21wYW55MTELMAkGA1UEBhMCR0IwggE6MA0GCSqGSIb3
DQEBBQUAA4IBJwAwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCf8WK4
L1yaBqlvV8cqlTerv53I5MchllrkR94oE42JNuQ0vmQlh/wc8WfqB1lkYvQdf04g
IQ69VQKCIfQeahODnQ9N/Ct4wIfoCz3KtZZq7DZgoIsMNf2tWlGwJMTbPYLJYjPv
rfxGMh79dF6VpxMDIHLrvhgYzDFfPxhQXpTTVNXY9pMkrQ+8ZnlqpSQLToQ5JUFZ
ZDiJtZvmhELGOrDxDDHBlmBRMadjRx5bP6JtJYtv540p55trUnJVRmGjjMvWw5aE
cKm7Z1BcoTwLsn0gzBR43el0J9QB+RMiDsJKhaBugzv3/852Ih8eZis6G4dRWnm9
BvAgRQfiW4ciJEnZAgMBAAGgGzALBgNVHQ8xBAMCAQYwDAYDVR0TMQUwAwEB/zAN
BgkqhkiG9w0BAQUFAAOCAQEAI6s+Wybusc2JBN36RMMG4qf8awIVJo/d1KwAhm9Y
7eO+ILLXk3wkZEdX5vEPQAdN7ZYYr1lCQfU2QuxDm3OCYuqJBt0fZGWAPYlfp6QD
AnQLEuLIIP/jZSgn2YzLeOuwO2n+7I9sx2lBihfkzNIK9PEiYM2TOA+4Rac7XdFA
o20GnruZ1Gq79C043Yz+G8iMNS44vaVjlshDovvmD5YDtjmQRtvDzoB2lyqEVwsS
Xy+vc0NdyWHJxAUPeOl+iqjF5YeACH92fFw9WV46syCAW7t9dCqdntvhKQRV+Me0
dOelvZPcqKtd7fsWYpKgUYkk61uWskeLIgnSonEyHWVSwQ==
-----END CERTIFICATE REQUEST----- 
```

缺少公钥、基本约束和密钥用法

```
Certificate Request:
    Data:
        Version: 0 (0x0)
        Subject: CN=company1, OU=company1, O=company1, C=GB
        Subject Public Key Info:
            Public Key Algorithm: sha1WithRSAEncryption
            Unable to load Public Key
140432158140064:error:0609E09C:digital envelope routines:PKEY_SET_TYPE:unsupported algorithm:p_lib.c:239:
140432158140064:error:0B07706F:x509 certificate routines:X509_PUBKEY_get:unsupported algorithm:x_pubkey.c:155:
        Attributes:
            X509v3 Key Usage         :unable to print attribute
            X509v3 Basic Constraints :unable to print attribute
    Signature Algorithm: sha1WithRSAEncryption
         23:ab:3e:5b:26:ee:b1:cd:89:04:dd:fa:44:c3:06:e2:a7:fc:
         6b:02:15:26:8f:dd:d4:ac:00:86:6f:58:ed:e3:be:20:b2:d7:
         93:7c:24:64:47:57:e6:f1:0f:40:07:4d:ed:96:18:af:59:42:
         41:f5:36:42:ec:43:9b:73:82:62:ea:89:06:dd:1f:64:65:80:
         3d:89:5f:a7:a4:03:02:74:0b:12:e2:c8:20:ff:e3:65:28:27:
         d9:8c:cb:78:eb:b0:3b:69:fe:ec:8f:6c:c7:69:41:8a:17:e4:
         cc:d2:0a:f4:f1:22:60:cd:93:38:0f:b8:45:a7:3b:5d:d1:40:
         a3:6d:06:9e:bb:99:d4:6a:bb:f4:2d:38:dd:8c:fe:1b:c8:8c:
         35:2e:38:bd:a5:63:96:c8:43:a2:fb:e6:0f:96:03:b6:39:90:
         46:db:c3:ce:80:76:97:2a:84:57:0b:12:5f:2f:af:73:43:5d:
         c9:61:c9:c4:05:0f:78:e9:7e:8a:a8:c5:e5:87:80:08:7f:76:
         7c:5c:3d:59:5e:3a:b3:20:80:5b:bb:7d:74:2a:9d:9e:db:e1:
         29:04:55:f8:c7:b4:74:e7:a5:bd:93:dc:a8:ab:5d:ed:fb:16:
         62:92:a0:51:89:24:eb:5b:96:b2:47:8b:22:09:d2:a2:71:32:
         1d:65:52:c1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:06:36.313

我发现了问题。我将公钥与签名算法而不是加密算法相关联。

```
AlgorithmIdentifier signatureAlgorithm = new DefaultSignatureAlgorithmIdentifierFinder()
        .find("SHA1WITHRSA");
AlgorithmIdentifier digestAlgorithm = new DefaultDigestAlgorithmIdentifierFinder().find("SHA-1");
ContentSigner signer = new BcRSAContentSignerBuilder(signatureAlgorithm, digestAlgorithm).build(keyParam);
SubjectPublicKeyInfo publicKeyInfo = new SubjectPublicKeyInfo(signatureAlgorithm, pair.getPublic().getEncoded()); 
```

这是使用签名算法 SHA1WithRSA 为 RSA 密钥生成 CSR 的工作代码

```
String principal = "CN=company1, OU=company1, O=company1, C=GB";
AsymmetricKeyParameter privateKey = PrivateKeyFactory.createKey(pair.getPrivate().getEncoded());
AlgorithmIdentifier signatureAlgorithm = new DefaultSignatureAlgorithmIdentifierFinder()
        .find("SHA1WITHRSA");
AlgorithmIdentifier digestAlgorithm = new DefaultDigestAlgorithmIdentifierFinder().find("SHA-1");
ContentSigner signer = new BcRSAContentSignerBuilder(signatureAlgorithm, digestAlgorithm).build(privateKey);

PKCS10CertificationRequestBuilder csrBuilder = new JcaPKCS10CertificationRequestBuilder(new X500Name(
        principal), pair.getPublic());
ExtensionsGenerator extensionsGenerator = new ExtensionsGenerator();
extensionsGenerator.addExtension(X509Extension.basicConstraints, true, new BasicConstraints(true));
extensionsGenerator.addExtension(X509Extension.keyUsage, true, new KeyUsage(KeyUsage.keyCertSign
        | KeyUsage.cRLSign));
csrBuilder.addAttribute(PKCSObjectIdentifiers.pkcs_9_at_extensionRequest, extensionsGenerator.generate());
csr = csrBuilder.build(signer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:44:39.903

非常感谢拉格，

之前不知道 ExtensionGenerator 并试图添加为 csrBuilder.addAttribute(..)

它从未失败，但没有正确生成扩展。

添加几行来添加 ExtendedKeyUsage 和 Subject Alternate Name，因为很多人都面临这个问题。

```
 Vector<KeyPurposeId> extendedKeyUsageVector = new Vector<KeyPurposeId>();
        for (String extendedKeyUsage : bean.getExtendedKeyUsage()) {
            extendedKeyUsageVector.add(new KeyPurposeId(extendedKeyUsage));
        }
        extnGen.addExtension(X509Extension.extendedKeyUsage, false, new ExtendedKeyUsage(extendedKeyUsageVector));

       GeneralName[] subjectAltName = new GeneralName[2];
       subjectAltName[0] = new GeneralName(GeneralName.dNSName, "abc.com");
       subjectAltName[1] = new GeneralName(GeneralName.dNSName, "xyz.com");

       extnGen.addExtension(X509Extension.subjectAlternativeName, false, new GeneralNames(subjectAltName)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T22:29:21.437

X509Extension 已被弃用： http: [//www.borelly.net/cb/docs/javaBC-1.4.8/prov/deprecated-list.html](http://www.borelly.net/cb/docs/javaBC-1.4.8/prov/deprecated-list.html) 所以这里有一个更新：

```
static private X500Name getX500Name(){

    final String testPostalCode = "92156-4105";
    return new X500NameBuilder( BCStrictStyle.INSTANCE )
            .addRDN( BCStyle.CN, "JD" )
            .addRDN( BCStrictStyle.POSTAL_CODE, testPostalCode )
            .addRDN( BCStrictStyle.C, "US" )
            .build();
}//getX500Name

static public PKCS10CertificationRequest genCSR(){
    try{
        KeyPair pair = getKeyPair();

        GeneralNames subjectAltName = new GeneralNames(
                new GeneralName(GeneralName.rfc822Name, "MyAwesomeAddr@email.com"));

        ExtensionsGenerator extnsnGenr = new ExtensionsGenerator();
        extnsnGenr.addExtension(Extension.subjectAlternativeName, false, subjectAltName);

        PKCS10CertificationRequestBuilder p10Builder = new JcaPKCS10CertificationRequestBuilder(
                getX500Name()
                , pair.getPublic() )
                .addAttribute(PKCSObjectIdentifiers.pkcs_9_at_extensionRequest, extnsnGenr.generate());
                //.setLeaveOffEmptyAttributes(false)
                ;

        JcaContentSignerBuilder csBuilder = new JcaContentSignerBuilder( SHA256withECDSA );

        ContentSigner signer = csBuilder.build( pair.getPrivate() );
        PKCS10CertificationRequest CSR = p10Builder.build( signer );
    return CSR;
    }
    catch ( IOException| OperatorCreationException X ){ mLog.error( CRYPTOERR.toString() ); }
}//genCSR 
```

# java - Java Service Wrapper 环境变量引用问题

> ID：12863236
> 
> 赞同：1
> 
> 时间：2012-10-12T16:21:14.877
> 
> 标签：java, service, wrapper

我使用 Tanuki JSW 在 Windows XP Professional 操作系统中安装和启动 Java 进程。JSW 需要一个系统环境变量`WRAPPER_HOME`才能启动，所以我使用通常的 Windows 操作系统方式对其进行了配置（右键单击我的电脑 >> 属性等）。

当我启动 JSW 时，它给了我这个错误：

> `_WRAPPER_HOME_\logs (The system cannot find the path specified. (0x3))".`

它在系统重新启动后工作。但是，**我的目标是避免重新启动系统。**

有没有办法可以调整 JSW 以便它在`WRAPPER_HOME`不重新启动系统的情况下获得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:30:28.597

转到环境变量->系统变量->设置 WRAPPER_HOME=yourPath。然后仔细检查它执行cmd，然后执行set。你的变量应该在那里。

# mysql - MYSQL 一次查询多表

> ID：12863237
> 
> 赞同：0
> 
> 时间：2012-10-12T16:21:16.780
> 
> 标签：mysql, mysql-error-1064

有两个名为“客户”和“付款”的表。他们都有“客户编号”

这就是我想要做的。

```
Select checkNumber, amount, CustomerNumber, CustomerName
FROM Payments, Customers 
```

我收到一条错误消息：`Unknown column`“字段列表”中的 ....`

我也试过做这个查询

```
Select checkNumber, amount, Payments.CustomerNumber, CustomerName
FROM Payments, Customers 
```

没用T_T

我试过这个

选择`checkNumber`, `amount`, `customerNumber`,`customerName` 从`payments`,`customers`

我收到此错误“字段列表中的列 'customerNumber' 不明确”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:58:52.173

当 2 个表中有 2 个同名的列时会发生此错误，因此您必须在哪个表中指定相同的列，即：

```
Select checkNumber, amount, Customers.CustomerNumber, CustomerName
FROM Payments, Customers 
```

或尝试将所有表名和列在 ` 中引用，如下所示：

> ```
> Select `checkNumber`, `amount`, `Payments.CustomerNumber`, `CustomerName`
> FROM `Payments`, `Customers` 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:26:23.440

您的表命名为`1`and`2`吗？

如果是，则 mysql 可能不会将 1 和 2 识别为表名，而是将其识别为数字。尝试用反引号将表名括起来：

```
select `1`.CustomerName, lastName, street, state
from `1`, `2` 
```

顺便说一句，这将为您提供所有可能的行组合...小心（或使用 a `join`）

* * *

更新

鉴于您评论中的新数据：

检查字段名称...字段名称必须与表中的名称*完全相同*。请注意，您正在写`payments.customerNumber`在`select`部分`payments.customersNumber`和`from`部分

# c# - 使用 MongoDB C# 驱动程序：已包装还是未包装？

> ID：12863238
> 
> 赞同：5
> 
> 时间：2012-10-12T16:21:18.110
> 
> 标签：c#, mongodb

我正在使用 MongoDB C# 驱动程序构建一些更新语句。[C# API](http://api.mongodb.org/csharp/ "C# 的 MongoDB API 文档")在命名空间中包括 Wrapped 和“Un-Wrapped”方法`Builder`。

从表面上看，这些似乎因泛型不同而不必使用[BSON](http://bsonspec.org/)包装器。但是，这两种方法类型都允许我传入非 Bson-Wrapped 参数。两者在功能上有区别吗？

例如（使用驱动程序 v1.2），这里有两种用法`Update.Set`：

```
var myCollection = database.GetCollection<MyObject>(typeof(MyObject).Name);

myCollection.Update(
  Query.EQ( "_id", myId ),
  Update.Set( "Message", "My message text"));

// And now the same call with "Wrapped" method
myCollection.Update(
  Query.EQ( "_id", myId ),
  Update.SetWrapped( "Message", "My message text")); 
```

这两个调用有什么区别？如果只是语法糖 - 为什么需要 Wrapped 版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:48:49.543

设置字符串值时没有区别。当您使用复杂类型时需要包装方法：类、列表等（不是`BsonValue`）。他们只是正确地将对象转换为 BsonValue 类型。

小例子：

使用 Set 您不能执​​行以下操作：

```
var item = new MyDemo();
Update.Set("Item", item) 
```

您必须使用 Wrapped 方法或 ToBsonDocument() 扩展：

```
var item = new MyDemo();
Update.SetWrapped("Item", item) 
```

就是这样！

请注意，驱动程序和 mongodb 周围的大多数部分都是开源的。所以这没什么大不了[的](https://github.com/mongodb/mongo-csharp-driver/blob/master/src/MongoDB.Driver/Builders/UpdateBuilder.cs)：）

# html - TD中具有固定宽度的DIV与colspan

> ID：12863253
> 
> 赞同：0
> 
> 时间：2012-10-12T16:22:12.657
> 
> 标签：html, css, html-table

我的代码：

```
<table style="width: 500px;">
        <tr>
            <td colspan="5">
                <div style="width: 500px;">colspan_5</div>
            </td>              
        </tr>
        <tr>
            <td colspan="1">
                <div style="width: 100px;">colspan_1</div>
            </td> 
            <td colspan="3">
                <div style="width: 300px;">colspan_3</div>
            </td>                
            <td colspan="1"> 
                <div style="width: 100px;">colspan_1</div>
            </td>               
        </tr>  
        <tr>
            <td colspan="2">
                <div style="width: 200px;">colspan_2</div>
            </td> 
            <td colspan="3">
                <div style="width: 300px;">colspan_3</div>
            </td>                
        </tr> 
        <tr>
            <td colspan="5">
                <div style="width: 500px;">colspan_5</div>
            </td>                                
        </tr> 
</table>​ 
```

但结果看起来不对。( [jsFiddle_example](http://jsfiddle.net/uDwa4/3) )

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:31:40.620

代码看起来也错了。您的最高`colspan`设置是`5`，但`TDs`连续最多的是三个。这是为什么？

为什么不这样：

```
<table style="width: 500px;">
    <colgroup>
        <col style="width:100px;" />
        <col style="width:200px;" />
        <col style="width:100px;" />
    </colgroup>
    <tr>
        <td colspan="3">
            <div>colspan_5</div>
        </td>              
    </tr>
    <tr>
        <td>
            <div>colspan_1</div>
        </td> 
        <td>
            <div>colspan_3</div>
        </td>                
        <td> 
            <div>colspan_1</div>
        </td>               
    </tr>  
    <tr>
        <td>
            <div>colspan_2</div>
        </td> 
        <td colspan="2">
            <div>colspan_3</div>
        </td>                
    </tr> 
    <tr>
        <td colspan="3">
            <div>colspan_5</div>
        </td>                                
    </tr> 
</table>​ 
```

# css - Chrome 和 Firefox 上子 divtag 上的背景图片

> ID：12863255
> 
> 赞同：2
> 
> 时间：2012-10-12T16:22:16.857
> 
> 标签：css

我对下面的 chrome 和 firefox 的 html 代码有疑问。

```
<div id="div1" align="left" style="width: 500px; height: 40px; color: grey; background-image: url("bgmageurl"); font-size: 20px; font-style: italic;"> <
div id="divContent" align="left" style="width: 100%; height: 100%; color: grey; background-image: inherit;"> </div>
 <div id="divButton" align="right" style="background-image: inherit; "> </div> 
</div> 
```

我正在尝试将相同的背景图像显示给孩子。这就是我尝试使用继承的原因。但是继承只是再次重新显示图像，这是我不想要的。我也希望将相同的父图像拉伸到子 div 标签。我找不到办法。有什么想法吗？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:13:21.913

div1 (40px) 的高度似乎是问题所在，divContent 位于外部，因为第一个孩子已经 38px 高。如果将高度设置为自动，divContent 也会获取背景。

[http://jsfiddle.net/willemvb/QMkfW/2/](http://jsfiddle.net/willemvb/QMkfW/2/)

# c++ - 如何迭代 std::set？

> ID：12863256
> 
> 赞同：109
> 
> 时间：2012-10-12T16:22:17.373
> 
> 标签：c++, set, iteration

我有这个代码：

```
std::set<unsigned long>::iterator it;
for (it = SERVER_IPS.begin(); it != SERVER_IPS.end(); ++it) {
    u_long f = it; // error here
} 
```

没有`->first`价值。我怎样才能获得价值？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-10-12T16:23:15.947

您必须取消引用迭代器才能检索集合的成员。

```
std::set<unsigned long>::iterator it;
for (it = SERVER_IPS.begin(); it != SERVER_IPS.end(); ++it) {
    u_long f = *it; // Note the "*" here
} 
```

如果您具有 C++11 功能，则可以使用基于[范围的 for 循环](https://en.wikipedia.org/wiki/C%2B%2B11#Range-based_for_loop)：

```
for(auto f : SERVER_IPS) {
  // use f here
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-12-09T08:17:55.277

C++11 标准的另一个例子：

```
set<int> data;
data.insert(4);
data.insert(5);

for (const int &number : data)
  cout << number; 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-12T16:25:21.480

只需使用`*`之前`it`：

```
set<unsigned long>::iterator it;
for (it = myset.begin(); it != myset.end(); ++it) {
    cout << *it;
} 
```

这将取消引用它并允许您访问迭代器当前所在的元素。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-19T18:59:16.943

**你如何迭代 std::set？**

```
int main(int argc,char *argv[]) 
{
    std::set<int> mset;
    mset.insert(1); 
    mset.insert(2);
    mset.insert(3);

    for ( auto it = mset.begin(); it != mset.end(); it++ )
        std::cout << *it;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-07T09:03:58.683

对初学者可能有用的另一件事是，因为 std::set 没有分配连续的内存块，如果有人想要迭代直到`kth`元素正常方式将不起作用。例子：

```
std::vector<int > vec{1,2,3,4,5};
int k=3;
for(auto itr=vec.begin();itr<vec.begin()+k;itr++) cout<<*itr<<" "; 
```

```
 std::unordered_set<int > s{1,2,3,4,5};
int k=3;
int index=0;
auto itr=s.begin();
while(true){
   if(index==k) break;
   cout<<*itr++<<" ";
   index++;
} 
```

# jquery - FancyBox 不显示 html 页面

> ID：12863257
> 
> 赞同：0
> 
> 时间：2012-10-12T16:22:19.557
> 
> 标签：jquery, web, fancybox

所以这个 FancyBox 的事情真的让我很沮丧。我一直试图让它工作一段时间，但什么也没发生。当我点击我的链接时，我看到的只是浏览器中正常显示的 html 文件，但没有弹出窗口或任何内容。

有一个错误说：

```
Uncaught TypeError: Object#<Object> has no method 'fancybox' 
```

所以为了解决这个问题，我让我的链接有一个 ID 而不是一个类。现在，没有错误，但没有任何反应！我什至不知道在哪里可以解决这个问题。我将在下面发布我的代码，因此如果有人能弄清楚我做错了什么，将不胜感激。

谢谢！

**索引.html**

```
 <!-- ******************* CSS ******************* -->

    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
    <!-- ******************* Javascript ******************* -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="./jquery.fancybox.pack-1.3.4.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("a.iframe").fancybox({
                'type' : 'iframe'
                'frameWidth':500,
                'frameHeight':500,
            });
        });
    </script>
</head>
<body>
    <a id="iframe" href="./iFrameFancy.html">Test FancyBox Here!</a>
</body>
</html> 
```

**应该在 FancyBox 中加载的 HTML 页面**

```
 <!-- ******************* CSS ******************* -->

    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
    <!-- ******************* Javascript ******************* -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="./jquery.fancybox.pack-1.3.4.js"></script>
</head>
<body>
    <h1>FancyBox Test!</h1>
    <p>
        This is a test of the FancyBox API. I have no idea if anything is going to work.
    </p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:39:09.867

您是否包含 jQuery 两次？我认为您在 iframe 中加载的 HTML 页面上不需要它。尝试删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:26:49.580

它可能不起作用，因为您在这里有一些语法错误和无效选项：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a.iframe").fancybox({
            'type' : 'iframe'
            'frameWidth':500,
            'frameHeight':500,
        });
    });
</script> 
```

...所以试试这个：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a.iframe").fancybox({
            'type' : 'iframe',  //<--missing comma here
            'width':500,
            'height':500  //<-- removed last comma here
        });
    });
</script> 
```

`frameWidth`并且`frameHeight`适用于 1.2.x 版本，但您使用的是 v1.3.4。

另请**注意**，在上面的脚本中，您将 fancybox 绑定到 selector `.iframe`，这意味着带有`class="iframe"`但您的 html 的锚点如下：

```
<a id="iframe" href="./iFrameFancy.html">Test FancyBox Here!</a> 
```

（没有`class`，但`ID`在那里）......什么时候应该

```
<a class="iframe" href="./iFrameFancy.html">Test FancyBox Here!</a> 
```

此外，请确保 Fancybox 文件正确加载（检查您的路径），因为您正在从此处加载 css 文件

```
/fancybox/jquery.fancybox.css 
```

而这里的 js 文件

```
./jquery.fancybox.pack-1.3.4.js 
```

...我想知道这两个文件是否在同一个目录中或者你移动了它们，否则只需确保fancybox图像文件与css文件位于同一目录下。

# php - 在 PHP 中创建关联数组

> ID：12863259
> 
> 赞同：4
> 
> 时间：2012-10-12T16:22:23.960
> 
> 标签：php, arrays, associative-array

我有一个多维数组。

```
$shop = array( 
              array("appn1", "pub1" ,"pub2" , "pub3"),
              array("appn2", "pub1"),
              array("appn3", "pub1" ,"pub2")
            ); 
```

每个数组中的第一项是**申请号**，每个数组中的其余项是**发布号**。我像这样得到每个数组的第一项（申请号）和最后一项（最新出版号）

```
 $index = count(array_keys($shop));
    for($i=0;$i<$index;$i++){

        $appln_nr = $shop[$i][0];
        echo $appln_nr;

        $publn_nr_index = count(array_keys($shop[$i]))-1;
        $publn_nr = $shop[$i][$publn_nr_index];
        echo $publn_nr;
   } 
```

现在我有每个内部数组的申请号和发布号。

我想从申请号和发布号创建一个关联数组。

其中键应该是申请号，其值是发布号。

谢谢

**编辑**

我从 $shop 数组中得到什么

```
 Array
 (
  [0] => Array
    (
        [0] => appn1
        [1] => pub1
        [2] => pub2
        [3] => pub3
    )

  [1] => Array
    (
        [0] => appn2
        [1] => pub1
    )

  [2] => Array
    (
        [0] => appn3
        [1] => pub1
        [2] => pub2
    )
) 
```

这就是我在关联数组中需要的

```
Array(
    "appn1" => "pub3"
    "appn2" => "pub1"
    "appn3" => "pub2"
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:30:47.683

在您编辑 XD 之后，我终于明白了您想要什么：

```
$shop = array(
    array("appn1", "pub1" ,"pub2" , "pub3"),
    array("appn2", "pub1"),
    array("appn3", "pub1" ,"pub2")
);
$shopNew = array();

foreach($shop as $value){
    $shopNew[$value[0]] = end($value);
}

// now if you want you can replace $shop and unset $shopNew
$shop = $shopNew;
unset($shopNew);    

print_r($shop); 
```

输出是这样的：

```
Array (
  [appn1] => pub3
  [appn2] => pub1
  [appn3] => pub2
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:31:03.227

[`reset`](http://php.net/reset)您可以通过使用第一个元素作为键（参见）和最后一个元素（参见[`end`](http://php.net/end)）作为值，轻松地将数组转换为新格式：

```
foreach($shop as $fl) {
    $v[reset($fl)] = end($fl);
} 
```

结果就在`$v`那时。

如果要转换数组，还需要删除每个元素：

```
foreach($shop as $v => $fl) {
    $shop[reset($fl)] = end($fl);
    unset($shop[$v]);
} 
```

结果就在`$shop`那时。Unset 负责从数组中删除。

两种情况下的输出都是：

```
array(3) {
  'appn1' =>
  string(4) "pub3"
  'appn2' =>
  string(4) "pub1"
  'appn3' =>
  string(4) "pub2"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:35:02.763

你可以试试

```
$shop = array(
        array("appn1","pub1","pub2","pub3"),
        array("appn2","pub1"),
        array("appn3","pub1","pub2")
        );

$final = array();
array_map(function ($var) use(&$final) {$final[reset($var)] = end($var);}, $shop);
var_dump($final); 
```

输出

```
array
  'appn1' => string 'pub3' (length=4)
  'appn2' => string 'pub1' (length=4)
  'appn3' => string 'pub2' (length=4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:31:42.917

试试这个：

```
 foreach($shop as $k => $v) {            
     $new_arr[$v[0]] = end($v);      
 } 
```

它应该给你这个结果，

```
$new_arr = array(
      "appn1" => "pub3",
      "appn2" => "pub1",
      "appn3" => "pub2"-
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-28T09:11:29.427

你也可以这样创作，

```
$arrField = [];
$arrField['id'] = '0001';
$arrField["first_name"] ='Demo Test';
print_r($arrField); 
```

print_r($arrField) 像这样显示输出。

```
Array ( [id] => 0001 [first_name] => Demo Test ) 
```

# ios - 从restkit中删除对象服务器端的数组

> ID：12863262
> 
> 赞同：0
> 
> 时间：2012-10-12T16:22:31.247
> 
> 标签：ios, ruby-on-rails, curl, restkit

我试图一次从我的服务器中删除几个播放列表对象，但我找不到使用 restkit 的方法。我基本上是在尝试重新创建这个 curl 函数：

```
curl -H "Content-Type:application/json" -H "Accept:application/json" -H "X-HTTP-Method-Override: DELETE" -d "{\"playlists\":{\"array\":[ {\"id\":\"25\"}, {\"id\":\"26\"},{\"id\":\"22\"},{\"id\":\"23\"},{\"id\":\"24\"}]}}" http://localhost:3000/api/v1/users/5/playlists 
```

这可能与restkit吗？

# joomla2.5 - 自定义插件中的 Joomla 2.5 Virtuemart 挂钩方法不会触发

> ID：12863266
> 
> 赞同：2
> 
> 时间：2012-10-12T16:22:40.970
> 
> 标签：joomla2.5, virtuemart

我设法创建了这个简单的插件，我需要它在将商品添加到购物车时触发一个方法，并在结帐发生时触发一个方法。但是这些方法无论如何都不会触发。我还看到了另一个名为 stockable 的插件，该插件使用 plgVmOnAddToCart 并在那里正确触发。但是在我的插件类中它根本不会触发。这是我的插件中的代码，我该怎么做才能使它工作？谢谢你

```
<?php
defined('_JEXEC') or    die( 'Direct Access to ' . basename( __FILE__ ) . ' is not allowed.' ) ;

if (!class_exists('vmCustomPlugin')) require(JPATH_VM_PLUGINS . DS . 'vmcustomplugin.php');

class plgVmAftercheckout extends vmCustomPlugin {
    private $stockhandle = 0;

    function __construct(& $subject, $config) {
        parent::__construct($subject, $config);

        $varsToPush = array(
            'selectname1'=>array('','char'),'selectname2'=>array('','char'),'selectname3'=>array('','char'),'selectname4'=>array('','char'),
            'selectoptions1'=>array('','char'),'selectoptions2'=>array('','char'),'selectoptions3'=>array('','char'),'selectoptions4'=>array('','char')
        );

        $this->setConfigParameterable('custom_params',$varsToPush);

    }

    public function plgVmOnAddToCart(&$product){

        echo "plgVmOnAddToCart fired";
        die();
    } 
    public function plgVmOnUserInvoice(){
        echo "plgVmOnUserInvoice fired";
        die();
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:33:48.420

好的，我找到了解决方案。问题是类名。在 joomla 1.5 文档 [http://docs.joomla.org/Creating_a_Plugin_for_Joomla_1.5](http://docs.joomla.org/Creating_a_Plugin_for_Joomla_1.5) 中，它提到类名必须遵循此规则：class plg extends JPlugin 但是在任何 joomla 2.5 文档中都没有提到，因为它可能被认为是“一个已知的规则”。所以我的解决方案是将类名从

```
class plgVmAftercheckout extends vmCustomPlugin { 
```

到

```
class plgVmCustomAftercheckout extends vmCustomPlugin { 
```

“自定义”，因为插件属于称为自定义的特定组。所以我们需要提到组名，以便让那些钩子方法观察事件。

# php - jQuery mobile 在 Opera Mini 浏览器中失败。如何获得错误输出？

> ID：12863268
> 
> 赞同：0
> 
> 时间：2012-10-12T16:22:48.417
> 
> 标签：php, javascript, html, jquery-mobile, opera-mini

![在 Opera 上观看](../Images/2c538c04524e1c56e3d349b021a7588f.png)我有一个在普通浏览器上运行良好的[jQuery Mobile](http://en.wikipedia.org/wiki/JQuery_Mobile)网站，但在使用 Opera Mini 或[Opera Mobile](http://en.wikipedia.org/wiki/Opera_Mobile)时它会失败。我无法收到任何错误消息。我所看到的只是使用 Opera 查看时的 jQuery 移动加载。

该应用程序似乎可以在其他浏览器上运行。这是该站点的链接，您可以通过 Opera Mini 查看：[demo](http://www.veepiz.com/touch/)。

输出是什么，所以我知道 Opera Mini 失败的原因是什么？我用谷歌搜索无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:04:19.580

可能是因为 Opera Mini 对 JavaScript 的支持有限吗？

最好的办法是根据*[Opera Mini 当前的支持文档指南重写 Opera 所需的内容：Web 内容创作指南、JavaScript 支持](http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#javascript)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T12:29:13.947

您可以将[Opera Mobile Emulator](http://www.opera.com/sv/developer/mobile-emulator)与具有 Dragonfly 检查器（在较新版本中替换为 Webkit Inspector）的[旧版本 Opera一起使用，并远程调试您的网站。](http://www.filehippo.com/download_opera/11494/)

1.  在 Opera（桌面）中加载您的页面
2.  右键单击任意位置并检查元素
3.  单击“远程调试”（右上角的按钮）
4.  在移动模拟器中访问“opera:debug”并连接

# javascript - 如何设置 dojox.grid.DataGrid 行的样式？

> ID：12863270
> 
> 赞同：3
> 
> 时间：2012-10-12T16:22:59.900
> 
> 标签：javascript, dojo

我有以下示例代码（如果需要，您可以剪切'n'粘贴它）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js" 
        djConfig="parseOnLoad:true"></script>

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css" />
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/tundra/tundra.css" />
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/grid/resources/Grid.css" />
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/grid/resources/claroGrid.css" />

<script>
    dojo.require("dojox.grid.DataGrid");
    dojo.require("dojo.data.ItemFileReadStore");
    dojo.require("dijit.form.TextBox");
    dojo.require("dijit.form.Button");
    function init() {
        var lData = {
            items: [
                   {"position":"1","band":"Black Dyke","conductor":"Nick Childs"},
                   {"position":"2","band":"Carlton Main","conductor":"Philip McCann"},
                   {"position":"3","band":"Grimethorpe","conductor": "Allan Withington"},
                   {"position":"4","band":"Brighouse and Rastrick","conductor": "David King"},
                   {"position":"5","band":"Rothwell Temperance","conductor":"David Roberts"},
            ],
            identifier: "position"      
        };
        var dataStore = new dojo.data.ItemFileReadStore({data:lData});
        var grid = dijit.byId("theGrid");
        grid.setStore(dataStore);

        dojo.connect(dijit.byId("theGrid"), 'onStyleRow', this, function (row) {
            var theGrid = dijit.byId("theGrid")
            var item = theGrid.getItem(row.index);
            if(item){
                var type = dataStore.getValue(item, "band", null);
                if(type == "Rothwell Temperance"){
                    row.customStyles += "color:red;";
                }
            }
            theGrid.focus.styleRow(row);
            theGrid.edit.styleRow(row);
        });
    }
var plugins = {
    filter: {
        itemsName: 'songs',
    closeFilterbarButton: true,
    ruleCount: 8
        }
};
    dojo.ready(init);
    function filterGrid() {
        dijit.byId("theGrid").filter({band: dijit.byId('filterText').get('value')+'*'});
        console.log(dijit.byId('filterText').get('value')+'*');
    }
    function resetFilter() {
        dijit.byId("theGrid").filter({band: '*'});
        dijit.byId('filterText').set('value','');
    }
</script>
</head>
<body class="claro">
<input dojoType="dijit.form.TextBox" id="filterText" type="text" onkeyup="filterGrid()">&nbsp;&nbsp;&nbsp;
<button dojoType="dijit.form.Button" onclick="resetFilter()">Clear</button><br><br>
<table dojoType="dojox.grid.DataGrid" id="theGrid" autoHeight="auto" autoWidth="auto" plugins="plugins">
    <thead>
        <tr>
            <th field="position" width="200px">Position</th>
            <th field="band" width="200px">Band</th>
            <th field="conductor" width="200px">Conductor</th>
        </tr>
    </thead>
</table>
</body>
</html> 
```

当`onStyleRow`我单击一行时，唯一会被触发。有没有办法让按钮根据其内容格式化行？通过在创建时将类分配给行然后更改类值或遍历行并`style`根据其内容直接更改每个行的元素。

**编辑**

我也尝试过以编程方式创建网格。虽然以这种方式`onStyleRow`创建时，它会在创建时触发它，但它不会提供与其他方法相同的高亮级别。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js" 
        djConfig="parseOnLoad:true"></script>

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css" />
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/tundra/tundra.css" />
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/grid/resources/Grid.css" />
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/grid/resources/claroGrid.css" />
<style>
#grid {
    height: 20em;
}
</style>
<script>dojoConfig = {async: true, parseOnLoad: false}</script>
<script>
    dojo.require("dojox.grid.DataGrid");
    dojo.require("dojo.data.ItemFileReadStore");
    dojo.require("dijit.form.TextBox");
    dojo.require("dijit.form.Button");
    function init() {
        var lData = {
            items: [
                   {"position":"1","music":"Opera","band":"Black Dyke","conductor":"Nick Childs"},
                   {"position":"2","music":"Opera","band":"Carlton Main","conductor":"Philip McCann"},
                   {"position":"3","music":"Classical","band":"Grimethorpe","conductor": "Allan Withington"},
                   {"position":"4","music":"Classical","band":"Brighouse and Rastrick","conductor": "David King"},
                   {"position":"5","music":"Opera","band":"Rothwell Temperance","conductor":"David Roberts"},
            ],
            identifier: "position"      
        };
        var dataStore = new dojo.data.ItemFileReadStore({data:lData});
        var layout = [[
            {'name':'Position','field':'position','width':'50px'},
            {'name':'Music Type','field':'music','width':'150px'},
            {'name':'Band','field':'band','width':'200px'},
            {'name':'Conductor','field':'conductor','width':'200px'}
        ]];
        var grid = new dojox.grid.DataGrid({
            id: 'grid',
            store: dataStore,
            structure: layout,
            rowSelector: false,
            selectionMode: 'extended',
            onStyleRow: function(row) {
                var item = this.getItem(row.index);
                if(item){
                    var type = this.store.getValue(item, "band", null);
                    if(type == "Rothwell Temperance"){
                        row.customStyles += "color:red;";
                    }
                }
            }
        });
        grid.placeAt("gridDiv");
        grid.startup();
    }
    var plugins = {
        filter: {
            itemsName: 'songs',
            closeFilterbarButton: true,
            ruleCount: 8
        }
    };
    dojo.ready(init);
    function filterGrid() {
        dijit.byId("grid").filter({band: dijit.byId('filterText').get('value')+'*'});
        console.log(dijit.byId('filterText').get('value')+'*');
    }
    function resetFilter() {
        dijit.byId("grid").filter({band: '*'});
        dijit.byId('filterText').set('value','');
    }
</script>
</head>
<body class="claro">
<input dojoType="dijit.form.TextBox" id="filterText" type="text" onkeyup="filterGrid()">&nbsp;&nbsp;&nbsp;
<button dojoType="dijit.form.Button" onclick="resetFilter()">Clear</button><br><br>
<div id="gridDiv"></div>
</body>
</html> 
```

**方法1**（创建网格时不格式化，很好的突出显示） ![在此处输入图像描述](../Images/3a2aa0ac7433793046b36e3f0f08972d.png)

**方法 2**（创建网格时的格式，不突出显示行） ![在此处输入图像描述](../Images/9535b429a8b0c83b13214e90c05718b3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:31:07.263

对函数进行简单的重新排序`init()`可确保`onStyleRow`在将数据添加到网格之前绑定函数。

```
function init() {
    var lData = {
        items: [
               {"position":"1","band":"Black Dyke","conductor":"Nick Childs"},
               {"position":"2","band":"Carlton Main","conductor":"Philip McCann"},
               {"position":"3","band":"Grimethorpe","conductor": "Allan Withington"},
               {"position":"4","band":"Brighouse and Rastrick","conductor": "David King"},
               {"position":"5","band":"Rothwell Temperance","conductor":"David Roberts"},
        ],
        identifier: "position"      
    };
    var dataStore = new dojo.data.ItemFileReadStore({data:lData});
    var grid = dijit.byId("theGrid");
    dojo.connect(grid, 'onStyleRow', this, function (row) {
        var item = grid.getItem(row.index);
        if(item){
            var type = dataStore.getValue(item, "band", null);
            if(type == "Rothwell Temperance"){
                row.customStyles += "color:red;";
                //row.customClasses += " dismissed";
            }
        }
        //theGrid.focus.styleRow(row);
        //theGrid.edit.styleRow(row);
    });
    grid.setStore(dataStore);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T09:26:59.567

您是否尝试过以下任何一种方法：

[根据数据样式 Dojox Grid Row](https://stackoverflow.com/questions/1818872/style-dojox-grid-row-depending-on-data)

[dojox DataGrid onStyleRow 第一次工作，然后不再工作](https://stackoverflow.com/questions/7132559/dojox-datagrid-onstylerow-works-first-time-then-not-again)

[dojox.grid.DataGrid - onStyleRow 需要更新吗？(道场 1.2.0)](https://stackoverflow.com/questions/3985401/dojox-grid-datagrid-onstylerow-needs-update-dojo-1-2-0)

您还可以使用 Firebug 查看是否为行分配了 ID，然后使用 onStyleRow 更改每行的背景。

# objective-c - Objective-C - AVAudioPlayer

> ID：12863271
> 
> 赞同：1
> 
> 时间：2012-10-12T16:23:02.760
> 
> 标签：objective-c, avfoundation

我发现使用 AVAudioFoundation 应该是在objective-c上播放mp3的最简单方法，但我不知道我在这里做错了什么。设备或模拟器上没有声音。我导入了框架和所有其他“正常”的东西，但它一直没有播放。这段代码有什么问题？

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"DuomoDiFirenze" ofType:@"mp3"];
AVAudioPlayer *theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
[theAudio prepareToPlay];
[theAudio play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:42:48.840

你用ARC编译吗？如果是这样，请确保保留对`AVAudioPlayer`实例的引用，否则 ARC 将确保为您释放它并且音频播放将立即停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T23:55:18.703

因此，当您将其声明`AVAudioPlayer * theAudio`为使用它的任何对象的属性时，它将起作用。那是你唯一缺少的东西。

# jquery - 如何从 JSON 中检索字符串作为 Jquery 中的数组键值对

> ID：12863272
> 
> 赞同：0
> 
> 时间：2012-10-12T16:23:09.693
> 
> 标签：jquery, arrays, json

我无法从以下 JSON 输出中的“statisticalEvidence”获取值作为“key”、“value”对。

JSON输出：

```
{
    "query": {
        "count": 1,
        "lang": "en-US",
        "results": {
            "entities": {
                "total": "10",
                "lang": "en-US",
                "entity": [
                    {
                    "id": "FZZNDK3XM3VIPLW76QHCAYF2D4",
                    "rank": "10",
                    "scores": {
                        "score": {
                            "attribute": "contentCreator",
                            "context": "yct:001000012",
                            "value": "1.0",
                            "statisticalEvidence": "\"{\"totalNoOfAbusiveComments\":0,\"totalNoOfThumbsDown\":22,\"totalNoOfPositiveRatedComments\":70,\"totalNoOfReplies\":8,\"totalNoOfLikedComments\":20,\"totalNoOfEngagingReplies\":13,\"totalNoOfThumbsUp\":35,\"totalNoOfComments\":79}\""
                        }
                    }}
                ]
            }
        }
    }
} 
```

我能够如下获取“id”：

```
$.get(url,function(data) {
    var json = jQuery.parseJSON(data);
    for(var i in json.query.results.entities.entity){
    var id = json.query.results.entities.entity[i].id;
        }
}); 
```

请建议如何将statisticalEvidence中的值作为数组获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:26:45.510

试试下面，

```
//should return the string
var se = json.query.results.entities.entity[i].scores.score.statisticalEvidence 
```

然后使用[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)

```
se = $.parseJSON(se); 
```

完整代码：

```
$.get(url,function(data) {
    var json = jQuery.parseJSON(data);
    for(var i in json.query.results.entities.entity){
       var id = json.query.results.entities.entity[i].id;
       var se = $.parseJSON(json.query.results.entities.entity[i].scores.score.statisticalEvidence);
    }
}); 
```

**注意：** `statisticalEvidence`在您的数据中是一个对象而不是一个数组。

# sql - 如何在 Windows 上将 DELIMIDENT 与 IBM Informix ODBC 驱动程序一起使用

> ID：12863276
> 
> 赞同：1
> 
> 时间：2012-10-12T16:23:42.187
> 
> 标签：sql, configuration, odbc, informix

这是我们尝试在 Windows 系统上通过 IBM Informix ODBC 驱动程序在 SQLRunner 内部运行的查询。数据库本身托管在其他地方。

```
SELECT keycolumnA AS 'Entity', datacol1, datacol2 WHERE keycolumnA IN ('ABC', 'DE f') 
```

*查询因“ODBC 错误”*而失败

 *但是，如果我们从*Entity*中删除引号，则查询有效，但列名以小写形式返回。重要的是，第一列作为带有大写 E 的**实体返回。**

我们尝试将连接字符串设置为“DSN=myDSN; DELIMIDENT=y;” 没有成功。

设置：IBM Informix 驱动程序版本：Windows 2003 上的 3.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:27:19.783

要成为分隔标识符，名称必须使用双引号，而不是单引号。因此，在显示连接字符串的情况下，编写如下所示的查询“应该”工作（著名的遗言）：

```
SELECT keycolumnA AS "Entity", datacol1, datacol2
  FROM RandomlyNamedTable   -- NB: Not present in original query!
 WHERE keycolumnA IN ('ABC', 'DE f'); 
```

在包含名为 Elements 的表（存储有关元素表的数据）的数据库上进行测试：

```
 SELECT Atomic_Number AS "Entity", Name AS Name, Symbol AS "Symbol"
  FROM Elements   -- NB: Not present in original query!
 WHERE Symbol IN ('Fe', 'He');

Entity  | name      | Symbol
INTEGER | CHAR(20)  | CHAR(3)
26      | Iron      | Fe
2       | Helium    | He 
```

请注意，名称“实体”和“符号”根据您的需要大写。双引号换成单引号后查询失败

```
SELECT Atomic_Number AS 'Entity', Name AS Name, Symbol AS 'Symbol'
  FROM Elements   -- NB: Not present in original query!
 WHERE Symbol IN ('Fe', 'He');
SQL -201: A syntax error has occurred. 
```

这是设置了 DELIMIDENT...没有设置 DELIMIDENT，“显示标签”周围的单引号和双引号都因语法错误而失败。

在 Mac OS X 10.7.5 上针对 IBM Informix Dynamic Server 11.70.FC2 进行测试。（程序是使用 ESQL/C 编写的，但这应该无关紧要。）*

# image - rect函数在某些参数下不显示上边框

> ID：12863277
> 
> 赞同：0
> 
> 时间：2012-10-12T16:23:50.087
> 
> 标签：image, r, graphics

当我尝试使用下面的函数时，我注意到我的第一行缺少图中的水平线。我已经追踪到指定我的矩形尺寸的行，特别是它应该有多高和多低。有没有我可以设置的参数，以便始终出现顶行？下面的代码没有顶行..

```
Plot.Lines <- function(colCount, rowCount, cex){
  colCount <- colCount # number per row
  rowCount <- rowCount

  plot( c(1,colCount), c(0,rowCount), type="n", ylab="", xlab="",
       axes=FALSE, ylim=c(rowCount,0))
  title("My Lines")

  for (j in 0:(rowCount-1))
  {
    base <- j*colCount
    remaining <- length(colors()) - base
    RowSize <- ifelse(remaining < colCount, remaining, colCount)
    for(i in 1:RowSize){
      rect(i-0.5,j-0.5,i+0.5, j+0.5, border = "black", col = colors()[base + (1:RowSize)]) 
    }
    for(i in 1:RowSize){
      text(x = i, y =j, labels = paste(base + i), cex =cex, col = "black")
    }
  }
}

Plot.Lines(25, 6, cex = 0.5) 
```

但是，如果我将行更改为：

```
rect(i-0.5,j-0.2,i+0.5, j+0.2, border = "black", col = colors()[base + (1:RowSize)]) 
```

然后它可以工作，尽管行之间有空格。有没有办法在给定 colCount 和 rowCount 的情况下自动设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:41:50.010

顶部边缘被切断，因为它超出了绘图区域。您可以使用`par(xpd=TRUE)`允许在内部区域之外进行绘图。把这个放在你打电话给`plot`.

# c# - 如何更改 ASP.NET ConnectionString="<%$ ConnectionStrings:MyAppConnection %>" 以从 Azure .cscfg 文件工作

> ID：12863283
> 
> 赞同：3
> 
> 时间：2012-10-12T16:24:18.897
> 
> 标签：c#, asp.net, azure, connection-string

我们有一个要迁移到 Azure 的 ASP.NET（不是 MVC）应用程序。在许多页面中，我们有这样的代码：

```
<asp:SqlDataSource runat="server" ID="ResourcesDataSource" ConnectionString="<%$ ConnectionStrings:MyAppConnection %>"
    SelectCommand="usp_list_resources" SelectCommandType="StoredProcedure"></asp:SqlDataSource> 
```

它从 web.config 中读取连接字符串。部署到 Azure 时，我希望在 .cscfg 文件中包含连接字符串，因此我们可以使用相同的 .cspkg 部署到不同的环境，而只需更改 .cscfg。Azure 相当于 using`<%$ ConnectionStrings:MyAppConnection %>`什么？

我可以浏览我的每个页面并在 Page_Init() 方法中设置数据源的 ConnectionString 属性，但我真的不想...声明式解决方案会更好，理想情况下可以使用 Find/Replace 来实现:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:06:44.080

你想要的东西不是标准 Azure 工具的一部分。

很可能您应该构建自己的[ExpressionBuilder](http://msdn.microsoft.com/en-us/library/system.web.compilation.expressionbuilder.aspx)。4guysfromrolla.com 上有一篇文章[“在 ASP.NET 中使用表达式构建器”](http://www.4guysfromrolla.com/articles/022509-1.aspx)。它显示并解释了表达式构建器及其内部的核心概念。

快速搜索您的主题将我引向另一篇文章[“ASP.NET Custom Expression Builder For Azure”](http://jstawski.com/post/2011/09/22/ASPNET-Custom-Expression-Builder-For-Azure)。希望这可以帮助您解决问题。

如果上面的链接不可用，这里是一个代码：

```
using System.CodeDom;
using System.Web.Compilation;
using System.Web.UI;
using Microsoft.WindowsAzure.ServiceRuntime;

public class AzureSettingsExpressionBuilder : ExpressionBuilder
{
    public override CodeExpression GetCodeExpression(BoundPropertyEntry entry, object parsedData, ExpressionBuilderContext context)
    {
        return new CodePrimitiveExpression(RoleEnvironment.GetConfigurationSettingValue(entry.Expression));
    }
} 
```

表达式生成器的注册`web.config`：

```
<compilation>
  <expressionBuilders>
    <add expressionPrefix="AzureSettings" type="AzureSettingsExpressionBuilder"/>
  </expressionBuilders>
</compilation> 
```

更新的 aspx 标记：

```
<asp:SqlDataSource runat="server" ID="ResourcesDataSource" 
    ConnectionString="<%$ AzureSettings:MyConnectionString %>"
    SelectCommand="usp_list_resources" 
    SelectCommandType="StoredProcedure">
</asp:SqlDataSource> 
```

# python - 尝试在python中打印模块内的每个子模块

> ID：12863284
> 
> 赞同：6
> 
> 时间：2012-10-12T16:24:19.807
> 
> 标签：python, module, finder

抱歉，如果我在此期间弄错了一些事实，但自从我在学校开始计算机课程以来，我只编程了大约一年，抱歉，如果在我到处寻找之前已经回答了这个问题但我不知道是什么寻找。最近我发现了一个游戏，你可以使用注入器将 python 代码注入其中，但找到代码的唯一方法是使用：

```
 import modulename
    print dir(modulename) 
```

然后打印 dir(modulename.submodulename)

它将将该模块内的所有子模块打印到游戏的日志文件中。使用这种技术，我开发了一个脚本，它在执行时会找到该目录中的所有子模块并将它们写入一个文件。

```
import modulename

myfile=open("name.txt","w")
myfile.write("modulename\n")

for a in dir(modulename):
    a="modulename"+"."+a
    for b in dir(a):
        b=a+"."+b
        for c in dir(b):
            c=b+"."+c
            if ".__" in c:
                pass
            elif "._" in c:
                pass
            else:
                myfile.write(c+"\n")
        if ".__" in b:
            pass
        if "._" in b:
            pass
        else:
            myfile.write(b+"\n")
    if ".__" in a:
        pass
    if "._" in a:
        pass
    else:
        myfile.write(a+"\n")

print "Done"
myfile.close() 
```

不幸的是，当运行通过“something.something”时，模块不存在。这是模块“Random”的示例，其中“random.weibullvariate”是一个真正的模块，但任何超过第二个“。” 不在随机子模块中。

```
random.weibullvariate.title.translate
random.weibullvariate.title.upper
random.weibullvariate.title.zfill
random.weibullvariate.title
random.weibullvariate.translate.capitalize
random.weibullvariate.translate.center
random.weibullvariate.translate.count
random.weibullvariate.translate.decode
random.weibullvariate.translate.encode
random.weibullvariate.translate.endswith
random.weibullvariate.translate.expandtabs
random.weibullvariate.translate.find
random.weibullvariate.translate.format
random.weibullvariate.translate.index
random.weibullvariate.translate.isalnum
random.weibullvariate.translate.isalpha
random.weibullvariate.translate.isdigit
random.weibullvariate.translate.islower
random.weibullvariate.translate.isspace
random.weibullvariate.translate.istitle
random.weibullvariate.translate.isupper
random.weibullvariate.translate.join
random.weibullvariate.translate.ljust
random.weibullvariate.translate.lower
random.weibullvariate.translate.lstrip
random.weibullvariate.translate.partition
random.weibullvariate.translate.replace
random.weibullvariate.translate.rfind
random.weibullvariate.translate.rindex
random.weibullvariate.translate.rjust
random.weibullvariate.translate.rpartition
random.weibullvariate.translate.rsplit
random.weibullvariate.translate.rstrip
random.weibullvariate.translate.split
random.weibullvariate.translate.splitlines
random.weibullvariate.translate.startswith
random.weibullvariate.translate 
```

正如你所看到的，有一些“随机”不存在的子模块被放入。我最终找出了问题所在，但我没有足够的经验来解决问题。

问题在于以前两行为例

```
for a in dir(modulename):
    a="module name"+"."+a 
```

如果我做了一个“modulename.submodule” 如您所见，“a”是一个字符串，如果我然后将“a”放入“dir()”，那么无论子模块名称是什么，都会返回相同的内容。

我需要找到一种方法将子模块添加到带有“。”的先前模块名称中。中间没有把它变成一个字符串。

对不起，很长的帖子，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:03:38.037

```
import types

def list_modules(module_name):
    try:
        module = __import__(module_name, globals(), locals(), [module_name.split('.')[-1]])
    except ImportError:
        return
    print(module_name)
    for name in dir(module):
        if type(getattr(module, name)) == types.ModuleType:
            list_modules('.'.join([module_name, name])) 
```

不能声称这适用于所有情况，但值得一试吗？

# mysql - mysql查询if条件

> ID：12863285
> 
> 赞同：1
> 
> 时间：2012-10-12T16:24:21.993
> 
> 标签：mysql

嗨，我有两张桌子**a2_deal**（我没有提到整个桌子很大）

```
deviceID    companyID   stage       serverTime
1             14          -1         1349449200 
1              1          -1         1349445600 
2             21          -1         1349449200 
3             17          -1         1349447160 
1             14           3         1344449200
1             14           2         1340449200 
```

和另一个名为**a2_comp 的表**

```
companyID   name
1           Microsoft
14          DELL
15          APPLE
17          Google 
```

我正在尝试通过使用以下查询来获取公司的最新阶段：

```
SELECT deal.companyID, companies.name as Company,
if(max(serverTime),stage,Null) as Stage
FROM `a2_deal` AS deal
LEFT JOIN `a2_comp` AS companies ON deal.companyID = companies.companyID 
GROUP BY companyID
ORDER BY serverTime 
```

在我的查询中，我使用**if(max(serverTime),stage,Null) 作为 Stage**，这意味着选择与最近服务器时间相关的阶段值。即它应该给我-1作为companyID 14的阶段....但是由于某种原因我没有得到正确的输出..请解释我的逻辑在这里是怎么错的...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:27:28.473

你想要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT a2_comp.*, a2_deal.*
FROM   a2_deal NATURAL JOIN (
  SELECT   companyID, MAX(serverTime) AS serverTime
  FROM     a2_deal
  GROUP BY companyID
) t JOIN a2_comp USING (companyID) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/4dbc8/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:27:11.803

`case`用于查询中的内联条件。此外，您可能需要做

`(case when max(serverTime) = serverTime then stage else null end) as Stage`

我不完全确定这是否有效，但您可以尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:47:43.540

试试这个

```
SELECT deal.companyID, deal.stage, comp.name 
FROM a2_deal AS deal, a2_comp AS comp
WHERE deal.serverTime = 
     (SELECT MAX(deal2.serverTime) 
     FROM a2_deal AS deal2 
     WHERE deal2.companyID = deal.companyID)
AND comp.companyID = deal.companyID
GROUP BY deal.companyID 
```

这可能有点令人困惑，但最有趣的部分是为每个公司选择最近的服务器时间的子查询。我使用了 theta 样式查询，因此不需要 JOIN。

# reporting-services - 使用数据集值控制列可见性

> ID：12863287
> 
> 赞同：0
> 
> 时间：2012-10-12T16:24:28.260
> 
> 标签：reporting-services, ssrs-2008

我的客户希望能够根据参数 (ReportType) 在报告中显示/隐藏列。报告列是静态的，它们只会控制隐藏/显示哪些列，从而创建不同的“视图”。目前只有 2 个视图，但我们即将添加更多视图。

目前，列的可见性由简单的表达式控制：=Parameters!ReportType.Value = "SOMEVALUE"

并且只有 1 种报告类型隐藏列，所以这个表达式很好。

现在我们正在进入一个列可能隐藏在多个 ReportTypes 中的情况，我想避免进入： IF report type = VAL1 or VAL2 or VAL3 THEN HIDE 因为对于任何给定的 ReportType 来说，很难看到什么列是要显示的（因为所有逻辑都在每个列可见性表达式中）

我找到了一篇文章并使用了它的基本元素： [http ://sql-bi-dev.blogspot.co.uk/2010/10/displaying-dynamic-columns-in-ssrs.html](http://sql-bi-dev.blogspot.co.uk/2010/10/displaying-dynamic-columns-in-ssrs.html)

我想做的是定义一个数据集，比如：

```
SELECT * FROM
(
select 'Rpt Type1' ReportType, 'Units' ColumnName UNION
select 'Rpt Type1' ReportType, 'Price' ColumnName UNION
select 'Rpt Type2' ReportType, 'Units' ColumnName
) ReportColumns
WHERE ReportType = @ReportType 
```

然后在 Column Visibility 表达式中检查数据集中是否存在列名。这样，报表类型的可见列在一个地方定义，并且易于管理/维护。

在我链接的帖子中，他让用户在参数中选择列名。我想根据选择的 ReportType 参数在我的数据集中查找名称。

我坚持将列名放入参数中，然后在列可见性表达式中使用它。任何帮助都会非常感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:43:09.677

多哈，我几乎在那里。

我创建了一个参数并将其默认值设置为“从查询中获取”并选择了我的数据集和 ColumnName 字段...完成了！

然后我只是使用我正在关注的文章中的代码为每一列编写可见性表达式。

# actionscript-3 - 为什么将这些对象放入 MXML 会破坏此功能？

> ID：12863292
> 
> 赞同：0
> 
> 时间：2012-10-12T16:24:33.320
> 
> 标签：actionscript-3, flash, flex4, flex-spark

我有两个类，VideoPod 和 RemotePod，RemotePod 继承自 VideoPod。在不显示这些类中的所有代码的情况下，基本上都是 VideoPod 的一部分：

```
 public function showPanel():void {
            if (!pnl.visible) {
                pnl.visible = true;
                pnl.addElement(removeElement(vg));
            }
        }
                .
                .
                .
<s:Panel id="pnl" width="100%" height="100%" fontWeight="normal" visible="false" />
<s:VGroup id="vg" left="0" resize="onResize()" right="0" top="0" bottom="0"> 
```

这是 RemotePod 的一部分：

```
 private function onCreationComplete():void {
            m_tmrHeartbeat.addEventListener(TimerEvent.TIMER, checkPulse);

            var arrBtns:Array = new Array(4);
            for (var i:int = 0; i < arrBtns.length; i++) {
                arrBtns[i] = new Button();
                arrBtns[i].width = 28;
                arrBtns[i].height = 25;
                arrBtns[i].top = 10;//-28;
            }

            arrBtns[0].right = 10;
            arrBtns[0].setStyle("icon", Images.PATH + "view-fullscreen-3.png");
            arrBtns[0].addEventListener(MouseEvent.CLICK, maximize);
                .
                .
                .
            for each (var btn:Button in arrBtns) {
                addElement(btn);
            }

            m_lblSize.right = 154;
            m_lblSize.top = 18;//-20;
            m_lblSize.text = FULLSCREEN;
            addElement(m_lblSize); 
```

其中 onCreationComplete() 为 RemotePod 中的 creationComplete 事件调用。几分钟前，我尝试将 RemotePod 中的按钮和标签移动到实际的 MXML 中，但这破坏了 showPanel() 函数。它引发的错误基本上有以下消息：“vg is not found in this Group。” （VideoPod 继承自 s:Group。）

我不明白。我还开始测试运行时 vg 的宽度是多少，显然它只是保持在 0。导致这种情况的晦涩语言功能是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:11:17.997

MXML 类不继承其父级的 MXML 子组件。您应该在类构造函数（如果 .as）或初始化侦听器（如果 .mxml）中使用纯 AS3 创建 Panel 和 VGroup。

```
protected var pnl:Panel;
protected var vg:VGroup;

private function onInitialize():void
{
    pnl = new Panel();
    //set pnl properties such as width, height...
    addComponent(pnl);

    vg = new VGRoup();
    //set vg properties such as width, height...
    addComponent(vg);
} 
```

另一种解决方案是为您的基类使用皮肤。

# asp.net - 如何从 aspx.vb 在 process.start 上触发 .cmd 文件

> ID：12863295
> 
> 赞同：0
> 
> 时间：2012-10-12T16:25:11.430
> 
> 标签：asp.net, vb.net, process.start

当我运行我的代码时，我试图触发一个 .cmd 文件来清空临时 Internet 文件。每次我写出一个 .html 文件时，它都不会显示当前的更改，除非我手动清除所有临时 Internet 文件。这是我可以在后面的代码中做到这一点的一种方式吗？

这就是我正在使用的。

```
<code>
     Protected Sub Page_Load(sender As Object, e As EventArgs)
        Dim p As New Process()
        p.StartInfo.FileName = "../deleteTemp.cmd"
        p.Start()
    End Sub
   </code> 
```

这是我的 deleteTemp.cmd 文件中的内容

```
<code>
    RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8
   </code> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:29:12.313

关于您要完成的工作的更多上下文会有所帮助，但是如果我正确理解您的问题，您将尝试使用服务器端代码清除本地浏览器缓存，以解决静态 html 缓存问题资源。由于多种原因，您将无法从服务器端清除浏览器缓存。我的建议是向这些 HTML 页面添加元标记以解决缓存问题，如下所示：

```
<html>
<head>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
</head>
<body>...</body>
</html> 
```

您还可以在 Web 服务器中设置标头以禁用某些文件类型的缓存。这因您使用的 Web 服务器的版本而异，但如果您在此处使用 IIS，您可以阅读如何执行此操作：http: [//support.microsoft.com/kb/247389](http://support.microsoft.com/kb/247389)。如果这些是您尝试禁用缓存的 .aspx 页面，您可以使用页面初始化中的服务器端代码执行此操作，或者通过执行以下操作加载：

```
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

希望这有助于您尝试做的事情。

# php - PHP: compareTo 类似于 Java

> ID：12863306
> 
> 赞同：1
> 
> 时间：2012-10-12T16:25:31.153
> 
> 标签：php

为了在 PHP 中使用 OOP，我一直在寻找一种方法来定义对象内的函数以用于排序。在 Java 中这很简单，因为它`compareTo()`会被排序数组等自动调用。我环顾 PHP.net 并在 PHP 中找不到类似的东西。我已经诉诸了对我来说似乎是一种黑客行为，所以我想知道是否有人可以以更简单的方式提供一些见解。

当前代码：

```
class SomeObject {
    private $someField;

    function getSomeField() { return $this->someField; }

    function compareTo($other) {
        return $this->someField - $other->getSomeField();
    }
}

//in funcs.php
function objSort($a, $b) {
    return $a->compareTo($b);
}

//To sort an array
usort($array, objSort); 
```

在 PHP 中是否有更简单/更时尚的方式来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:31:19.437

您可以直接使用匿名函数。

```
class SomeObject {
    private $someField;
    function getSomeField() { return $this->someField; }
}

usort($array, function($a, $b) {
    return $a->getSomeField() - $b->getSomeField();
}); 
```

或者您可以定义一个静态函数用于比较。

```
class SomeObject {
    private $someField;

    function getSomeField() { return $this->someField; }

    static function compare($a, $b) {
        return $a->getSomeField() - $b->getSomeField();
    }
}

usort($array, array('SomeObject', 'compare')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:43:30.823

我不认为你可以在 PHP 中做到这一点，尽管我很想被证明是错误的。我通常有一个用于数组、字符串、数字等的实用程序类包，带有静态方法，但它仅在您定义 PHP 尚不具备的函数时才有用，否则您只会为本机函数制作毫无意义的包装器。

# .net - Web api 控制器方法在序列化 Stream 对象时给出异常

> ID：12863311
> 
> 赞同：4
> 
> 时间：2012-10-12T16:25:55.100
> 
> 标签：.net, json, asp.net-mvc-3, stream, asp.net-web-api

我有一个 web api 控制器方法如下：

```
[HttpPost]
public string PostMethod(int id)
{
  Stream downloadStream = Service.downloadStream(id);  
  JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
  string output  = jsonSerializer.Serialize(downloadStream);
} 
```

我从 java applet 调用这个方法，url 为：

```
http://localhost1/api/PostMethod/1 
```

我在第 3 行得到一个异常，说：

“此流不支持超时，'ObjectContent`1' 类型无法序列化内容类型 'application/json; charset=utf-8' 的响应正文。”

可能的解决方案是什么？如何通过 Webapi 控制器方法将流作为 JSON 对象发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:19:04.923

Web Api 支持内容协商，不需要序列化对象直接返回即可。

Web Api 会根据客户端的要求自动返回 XML 或 Json

```
content-type: application/json 
```

Web 浏览器通常会获取 XML，而作为 javascript Json。您的 java 小程序只需要上面的标头（实际上看起来可能已经发送）。

```
[HttpPost]
public string PostMethod(int id)
{
   Stream downloadStream = Service.downloadStream(id);  
   System.IO.MemoryStream memoryStream = new System.IO.MemoryStream();
   downloadStream.CopyTo(memoryStream);
   return memoryStream.ToString();
} 
```

这在很大程度上取决于 downloadStream 方法返回的内容；

# jquery - JQuery - 如果最后一个元素可见，则将类添加到按钮

> ID：12863313
> 
> 赞同：0
> 
> 时间：2012-10-12T16:25:55.767
> 
> 标签：jquery, jquery-plugins

我正在使用这个插件来上下滚动列表。我想在列表的最后一个元素可见时禁用按钮。

*   使用向下箭头滚动。
*   到达列表末尾。
*   禁用向下箭头。

我曾尝试使用 if :last-child :visible 但当然这不起作用，因为元素始终可见。

为了便于使用，我在小提琴中添加了 JS。[http://jsfiddle.net/NuCWS/](http://jsfiddle.net/NuCWS/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:37:44.430

这是我过去所做的一些代码：

```
$('#arrow_left').live('click', function(){
  if($('.browse_box:first-of-type').hasClass('active') != true){
    $('.browse_box.active').removeClass('active').prev().addClass('active');
    $('.browse_box_container_inside').animate({
       left: '+=549'
    },200);
   }
});

$('#arrow_right').live('click', function(){
   if($('.browse_box:last-of-type').hasClass('active') != true){
      $('.browse_box.active').removeClass('active').next().addClass('active');
      $('.browse_box_container_inside').animate({
         left: '-=549'
      },200);
   }
}); 
```

# php - 如何使用 PHP 在计算机中静默下载文件？

> ID：12863314
> 
> 赞同：-5
> 
> 时间：2012-10-12T16:26:06.203
> 
> 标签：php, html, browser, download, force-download

我想使用 PHP 静默或不提示将文件下载到计算机？或者当点击下载链接时，我可以在定义位置强制下载吗？喜欢`C: /dir/dir/myfile.zip`？请注意，我要求这个仅供我内部使用，不会伤害用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:27:53.943

你不能。

由于安全问题，这根本不可能。

现在，如果这些是您自己的专用网络上的系统，并且驱动器是共享的，那么您可以编写代码从服务器中写出文件。但是，这一切都在用户的浏览器之外。其他方法包括在用户计算机上运行的外部应用程序。当他们单击链接时，要下载的文件将添加到数据库中的队列中。客户端应用程序获取此数据并将下载它。AudioGalaxy 曾经使用过这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:41:15.580

其实很简单。让他们下载可执行文件。然后他们需要执行它，并且该可执行文件可以小心地将插件安装到他们的浏览器中，该插件能够写入磁盘和所有这些乐趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:45:26.517

首先，PHP 不是客户端语言，所以这样的事情是不可能做到的。

接下来，正如您在对问题的评论中看到的那样，由于安全原因，浏览器不允许此类操作。

# sql-server - SQL Server 存储过程在事务中输出临时表时停止

> ID：12863321
> 
> 赞同：0
> 
> 时间：2012-10-12T16:26:37.947
> 
> 标签：sql-server, transactions, trace

在 SQL Server 2008 (sp2) 存储过程中，在开始事务之前，我创建了两个临时表。我在事务中插入它们。当事务遍历相当大的数据集（约 1,200 次）时，存储过程无法完成。具体来说，跟踪表明

```
SELECT * FROM #tmpTable2 
```

在下面的代码中开始但没有完成。当循环大约是原来的一半时，它工作正常。

```
IF [true] > 0 --error
BEGIN
    SELECT * FROM #tmpTable1
    SELECT * FROM #tmpTable2
    DROP TABLE #tmpTable1
    DROP TABLE #tmpTable2
    rollback TRANSACTION
    return -1
END 
```

请注意，在跟踪中，`transactionlog`事件发生的频率越来越高，因为它到达了失败的点。

有任何想法吗？谢谢！

# scala - Scala 中的匹配类型约束失败

> ID：12863331
> 
> 赞同：2
> 
> 时间：2012-10-12T16:27:21.610
> 
> 标签：scala

我正在尝试在 Scala 2.9.2 中创建一个地图包装器，其值具有特定的更高种类的类型，并且正在与类型系统搏斗。这是代码的简化版本来说明问题：

```
trait A

trait B[C] {
  def c: C
}

trait E[C <: B[C], D <: A]

case class MyMap[M <: A, L <: B[L], N[L, M]](map: Map[M, N[L, M]])

object MyMap {
  def empty[M <: A, L <: B[L], N[L, M]] = MyMap(Map.empty[M, N[L, M]])
}

val myMap = MyMap.empty[A, T forSome { type T <: B[T] }, E] 
```

当我尝试编译它时，最后一条语句失败并出现编译器错误，表明我不匹配类型边界。但是在我看来，我是这样的，也许在我有 N[L, M] 和以前的 L <: B[L] 的地方，并不是推断 N[L, M] 中的 L 是相同的 L < : B[L]，对于 M 也是如此。错误如下：

> 类型参数的种类 (A,T forSome { type T <: B[T] },E) 不符合类型参数的预期种类 (type M,type L,type N)。E 的类型参数与类型 N 的预期参数不匹配：类型 C 的边界 >：Nothing <：B[C] 比类型 L 的声明边界更严格 >：Nothing <：Any，类型 D 的边界 >：Nothing <：A 比类型更严格M 的声明边界 >：Nothing <：Any
> 
> val myMap = MyMap.empty[A, T forSome { type T <: B[T] }, E]

感激地收到任何建议。

谢谢 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:50:43.080

第二个参数有一个问题，第三个参数有一个问题。我不知道第二个参数，我不确定existentia 在这里可以允许什么。所以这只是第三个参数的问题。

一些更简单的代码具有相同的错误：

```
class A {}

class C[X <: A] {}

def f[X[_]] = 12

f[List]
res1: Int12
f[C]
error: kinds of the type arguments (C) do not conform to 
the expected kinds of the type parameters (type X).
C's type parameters do not match type X's expected parameters: 
    type X's bounds >: Nothing <: A are stricter 
    than type _'s declared bounds >: Nothing < : Any
       f[C]
         ^ 
```

*很简单，方法 empty 期望具有两个参数且没有限制*的泛型类型作为第三个类型参数。在空的正文中，您可以写字`N[Int, String]`或任何东西。有一些约束的Type`E`与此不兼容（注意：我发现`writing N[L,M`] 而不是`N[_, _]`,`L`和`M`前面的类型参数的名称有点误导。或者它可能表明你真的不想要更高阶的类型参数） .

如果你写在上面的代码中

```
def g[X[_ <: A]] = 13 
```

然后调用`g[C]`就可以了（`g[List]`也可以，因为它应该，那里不会发生任何错误）。

同样，如果为空，您的代码也可以工作（前提是您传递了合适的第二个参数）

```
Map.empty[M <: A, L <: B[L], N[X <: B[X], Y <: A]] 
```

# actionscript-3 - 使用 MDM Zinc 创建上下文菜单

> ID：12863336
> 
> 赞同：0
> 
> 时间：2012-10-12T16:27:35.920
> 
> 标签：actionscript-3, flash, mdm-zinc

我的 Flash 应用程序的主要功能中有以下内容，但是当我使用 MDM Zinc 发布它时，我仍然得到默认的 Flash 右键单击​​上下文菜单。

```
var openFileMenuItem:String = "Open";
var closeFileMenUItem:String = "Close File";
var exitMenuItem:String = "Quit MyApplication";

mdm.Menu.Context.onContextMenuClick = onContextMenuClickHandler;
mdm.Menu.Context.enable();
mdm.Menu.Context.insertItem(openFileMenuItem);
mdm.Menu.Context.insertItem(closeFileMenUItem);
mdm.Menu.Context.insertDivider();
mdm.Menu.Context.insertItem(exitMenuItem);

function onContextMenuClickHandler(event:mdm.Event):void
{
    switch(event.data.name)
    {
        case openFileMenuItem:
            mdm.Dialogs.prompt("open");
        break;
        case closeFileMenUItem:
            mdm.Dialogs.prompt("close");
        break;
        case exitMenuItem:
            mdm.Dialogs.prompt("exit");
        break;
    };
} 
```

以上应该可以工作，因为它很好地取自 MDM Zinc 的在线文档，但我只获得了默认的 Flash 上下文菜单。我还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:42:40.060

MDM Zinc 中有一个名为“允许右键单击”的属性。这需要设置为“False”才能显示自定义上下文菜单！

# latex - Ipython 笔记本中有没有办法内联显示 LaTeX 文件？

> ID：12863339
> 
> 赞同：3
> 
> 时间：2012-10-12T16:27:42.900
> 
> 标签：latex, ipython, inline

一个月或更长时间以来，我一直使用 Ipython notebook 来处理测量数据，并发现使用 matplotlib 创建图非常容易，因为可以立即在 Ipython notebook 中看到它们。对于表格，我使用 matrix2latex，然后我用它来包含到我的长乳胶文档中。由于我通常无法像我希望的那样在第一次显示我的表格，因此我浪费了相当多的时间来编译我的长 LaTeX 文件。

所以问题是：

有没有办法显示所有乳胶格式的文件内联python笔记本，我可以用它来绘制matrix2latex生成的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:28:34.217

由于 IPython 只是将 MathJax 用于 LaTeX 显示，因此它仅限于数学命令系列。matrix2latex 输出以下形式的 LaTeX 表格：

```
\begin{table}[ht]
  \begin{center}
    \begin{tabular}{cc}
      \toprule
        $1$ & $1$\\
        $2$ & $4$\\
        $3$ & $9$\\
      \bottomrule
    \end{tabular}
  \end{center}
\end{table} 
```

话虽这么说，如果您需要打印一些漂亮的矩阵，那么我会建议这样的事情：

```
from IPython.core.display import Math
m = eye(10)
display(Math(latex(m))) 
```

# sql-server-ce - 可以将在 windows mobile 上使用 vb5 应用程序的现有 3.0 .sdf 升级到 3.5 并在不更改应用程序的情况下工作吗？

> ID：12863340
> 
> 赞同：1
> 
> 时间：2012-10-12T16:27:48.157
> 
> 标签：sql-server-ce

我继承了一个运行 windows mobile 6.1 的移动设备，其中包含一个自定义 vb5（vbproj 中的 productver=8.0.50727）应用程序。我`.sdf`在 SQL Server Compact Edition 3.5 版中创建了一个新的。我升级了 windows 移动设备，cgacutil 报告 .Net Compact Framework [3.5.7283.0, 2.0.7045.0]。

但是当我执行应用程序时，我收到一个错误

> *您正在尝试访问旧版本的 Sql Server……。Db 版本 = 3505053，请求的版本 = 3004180，文件名 = SD Card\filename.sdf]*

是否可以使用`.sdf`此应用程序的更新？我注意到项目文件中包含引用`system.data.sqlclient, version=3.0.3600.0, culture=neutral` 和 `system.data.sqlservice, version=3.0.3600.0, culture=neutral`.

此外，还有 import 语句；

```
 <Import Condition="'$(TargetFrameworkVersion)' == 'v1.0'"
  Project="$(MSBuildBinPath)\Microsoft.CompactFramework.VisualBasic.v1.targets" />

 <Import Condition="'$(TargetFrameworkVersion)' == 'v2.0'"
  Project="$(MSBuildBinPath)\Microsoft.CompactFramework.VisualBasic.targets" /> 
```

更新的文件是否可以与此应用程序一起使用，或者是否需要更改应用程序，或者我是否一起寻找错误的方向？

这是目前无法更换的遗留设备。如果需要重写，哪种 Visual Studio 产品最适合这项工作？设备上的操作系统是 Windows Mobile 6 和 6.1 经典版，以及 CE 操作系统 5.2.1711 和 5.2.20963。硬件处理器为 Marvell PXA310 和 ARM920T PXA27x，均配备 2gb SD 卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:20:28.877

不可以，您必须创建版本 3.1/3.0 文件，或更新应用程序以使用较新版本的 ADO.NET 提供程序。

# vb.net - 为什么当我按 ENTER 时我的表单消失了？

> ID：12863345
> 
> 赞同：0
> 
> 时间：2012-10-12T16:28:15.270
> 
> 标签：vb.net

**再会，**

我正在经历一个刚刚开始发生的非常奇怪的事件。每当我按下键盘上的 ENTER 按钮时，我希望我的文本框的 KeyDown 事件会被引发并运行相应的代码。相反，表单消失了（就像调用了 .Hide() 方法一样）。当我调试时，我看到应该在引发 KeyDown 事件后运行的代码正在相应地执行 - 但表单只是消失了。

我以前从未遇到过这种情况，所以我不知道该怎么办。任何帮助，将不胜感激。谢谢。

**这是我的表格代码：**

```
Imports System.Net
Imports MySql.Data
Imports MySql.Data.MySqlClient

Public Class FormAdd

#Region "VARIABLE DECLARATIONS CODE"

'FOR MySQL DATABASE USE
Public dbConn As MySqlConnection

'FOR CARD NUMBER FORMATTING
Private CF As New CardFormatter

'FOR CARD ENCRYPTION
Dim DES As New System.Security.Cryptography.TripleDESCryptoServiceProvider
Dim Hash As New System.Security.Cryptography.MD5CryptoServiceProvider
Dim encryptedCard As String

#End Region

#Region "SUB-ROUTINES AND FUNCTIONS"

Private Sub GetDBdata()

    Try
        If TextBoxAccount.Text = "" Then
            MessageBox.Show("Sorry, you must enter an ACCOUNT# before proceeding!")
            TextBoxAccount.Focus()
        Else
            dbConn = New MySqlConnection
            dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
            If dbConn.State = ConnectionState.Open Then
                dbConn.Close()
            End If
            dbConn.Open()
            Dim dbAdapter As New MySqlDataAdapter("SELECT * FROM customer WHERE accountNumber = " & TextBoxAccount.Text, dbConn)
            Dim dbTable As New DataTable
            dbAdapter.Fill(dbTable)
            If dbTable.Rows.Count > 0 Then
                'MessageBox.Show("Customer Account Found!")
                Call recordFound()
                TextBoxLastName.Text = dbTable.Rows(0).Item("nameLAST")
                TextBoxFirstName.Text = dbTable.Rows(0).Item("nameFIRST")
                TextBoxSalutation.Text = dbTable.Rows(0).Item("nameSALUTATION")
                TextBoxCompanyName.Text = dbTable.Rows(0).Item("nameCOMPANY")
            Else
                'MessageBox.Show("No Customer Records Found!  Please try again!")
                Call recordNotFound()
                ButtonReset.PerformClick()
            End If
            dbConn.Close()
        End If
    Catch ex As Exception
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                        vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    Dispose()

End Sub

Private Sub SetDBData()

    Try
        dbConn = New MySqlConnection
        dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
        Dim noCard As Boolean = True
        If dbConn.State = ConnectionState.Open Then
            dbConn.Close()
        End If
        dbConn.Open()
        Dim dbQuery As String = "SELECT * FROM cc_master WHERE ccNumber = '" & TextBoxCard.Text & "';"
        Dim dbData As MySqlDataReader
        Dim dbAdapter As New MySqlDataAdapter
        Dim dbCmd As New MySqlCommand
        dbCmd.CommandText = dbQuery
        dbCmd.Connection = dbConn
        dbAdapter.SelectCommand = dbCmd
        dbData = dbCmd.ExecuteReader
        While dbData.Read()
            If dbData.HasRows() = True Then
                MessageBox.Show("This Credit/Debit Card Already Exists!  Try Another!")
                noCard = False
            Else
                noCard = True
            End If
        End While
        dbData.Close()
        If noCard = True Then
            'PERFORM CARD ENCRYPTION

            'PERFORM DATABASE SUBMISSION
            Dim dbQuery2 As String = "INSERT INTO cc_master (ccType, ccNumber, ccExpireMonth, ccExpireYear, ccZipcode, ccCode, ccAuthorizedUseStart, ccAuthorizedUseEnd, customer_accountNumber)" & _
                "VALUES('" & ComboBoxCardType.SelectedItem & "','" & TextBoxCard.Text & "','" & TextBoxExpireMonth.Text & "','" & TextBoxExpireYear.Text & _
                "','" & TextBoxZipCode.Text & "','" & TextBoxCVV2.Text & "','" & Format(DateTimePickerStartDate.Value, "yyyy-MM-dd HH:MM:ss") & "','" & Format(DateTimePickerEndDate.Value, "yyyy-MM-dd HH:MM:ss") & "','" & TextBoxAccount.Text & "');"
            Dim dbData2 As MySqlDataReader
            Dim dbAdapter2 As New MySqlDataAdapter
            Dim dbCmd2 As New MySqlCommand
            dbCmd2.CommandText = dbQuery2
            dbCmd2.Connection = dbConn
            dbAdapter2.SelectCommand = dbCmd2
            dbData2 = dbCmd2.ExecuteReader
            MessageBox.Show("Credit/Debit Card Information Saved SUCCESSFULLY!")
            ButtonReset.PerformClick()
        End If
        dbConn.Close()
    Catch ex As Exception
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                        vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    Dispose()

End Sub

Private Sub ResetForm()
    TextBoxAccount.Clear()
    TextBoxLastName.Clear()
    TextBoxFirstName.Clear()
    TextBoxSalutation.Clear()
    TextBoxCard.Clear()
    ComboBoxCardType.SelectedItem = ""
    TextBoxCompanyName.Clear()
    TextBoxCVV2.Clear()
    TextBoxExpireMonth.Clear()
    TextBoxExpireYear.Clear()
    TextBoxZipCode.Clear()
    CheckBoxConfirm.Checked = False
    TextBoxAccount.SelectionStart = 0
    TextBoxAccount.SelectionLength = Len(TextBoxAccount.Text)
    TextBoxAccount.Focus()
    GroupBoxInputError.Hide()
    LabelInstruction.Show()
    GroupBox1.Height = 75

End Sub

Private Sub recordFound()

    GroupBoxInputError.Text = ""
    LabelError.BackColor = Color.Green
    LabelError.ForeColor = Color.White
    LabelError.Text = "RECORD FOUND!"
    GroupBoxInputError.Visible = True
    GroupBox1.Height = 345
    ButtonReset.Show()
    LabelInstruction.Hide()
    ComboBoxCardType.Focus()

End Sub

Private Sub recordNotFound()

    GroupBoxInputError.Text = ""
    LabelError.BackColor = Color.Red
    LabelError.ForeColor = Color.White
    LabelError.Text = "NO RECORD FOUND!"
    GroupBoxInputError.Visible = True

End Sub

'Public Sub encryptCard()
'    Try
'        DES.Key = Hash.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(My.Settings.Key))
'        DES.Mode = System.Security.Cryptography.CipherMode.ECB
'        Dim DESEncrypter As System.Security.Cryptography.ICryptoTransform = DES.CreateEncryptor
'        Dim Buffer As Byte() = System.Text.ASCIIEncoding.ASCII.GetBytes(TextBoxCard.Text)
'        TextBoxCard.Text = Convert.ToBase64String(DESEncrypter.TransformFinalBlock(Buffer, 0, Buffer.Length))
'    Catch ex As Exception
'        MessageBox.Show("The following error(s) have occurred: " & ex.Message, Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
'    End Try
'End Sub

#End Region

#Region "TOOLSTRIP MENU CONTROL CODE"

Private Sub ExitAltF4ToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ExitAltF4ToolStripMenuItem.Click
    End
End Sub

#End Region

#Region "BUTTON CONTROLS CODE"

Private Sub ButtonExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonExit.Click
    FormMain.Show()
    Me.Close()
End Sub

Private Sub ButtonReset_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonReset.Click
    Call ResetForm()
End Sub

Private Sub ButtonSubmit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonSubmit.Click
    Call SetDBData()
    Call ResetForm()
End Sub

Private Sub ButtonEncrypt_Click(sender As System.Object, e As System.EventArgs) Handles ButtonEncrypt.Click

End Sub

#End Region

#Region "FORM CONTROLS CODE"

Private Sub FormAdd_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Control.CheckForIllegalCrossThreadCalls = False
    TextBoxAccount.Focus()
    Me.KeyPreview = True

    Timer1.Enabled = True
    Timer1.Interval = 1

    GroupBoxInputError.Hide()
    ButtonSubmit.Hide()
    ButtonReset.Hide()
    GroupBox1.Height = 75

    'LabelFooter.Text = "Welcome  " & FormLogin.TextBoxUsername.Text() & "   |   Timestamp:    " & Date.Now.ToString
    Try
        LabelIP.Text = "IP:  " & Dns.GetHostEntry(Dns.GetHostName).AddressList(0).ToString
    Catch ex As Exception

    End Try

    'Populate the Card Type combobox with the list of card types from the CardFormatter class
    ComboBoxCardType.Items.AddRange(CF.GetCardNames.ToArray)

End Sub

#End Region

#Region "TEXTBOX CONTROLS CODE"

Private Sub TextBoxCard_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBoxCard.GotFocus

    TextBoxCard.SelectionStart = 0
    TextBoxCard.SelectionLength = Len(TextBoxCard.Text)
    Me.Refresh()

End Sub

Private Sub TextBoxCard_LostFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBoxCard.LostFocus

    '//CARD VALIDATION//
    '   This code will check whether the card is a valid number or not.  It doesn't check to see if the card is active.
    '   The code calls on the creditcard function stored in MyModules.vb
    Try
        If creditcard(TextBoxCard.Text) Then
            'MsgBox("Card is Valid")
            TextBoxCard.BackColor = Color.GreenYellow
            TextBoxCard.ForeColor = Color.Black
            GroupBoxInputError.Visible = False
            TextBoxCard.Text = CF.GetFormattedString(ComboBoxCardType.Text, TextBoxCard.Text)
            Me.Refresh()
        Else
            BWErrorNotice.RunWorkerAsync()
            'MsgBox("Invalid Card")
            GroupBoxInputError.Visible = True
            TextBoxCard.Focus()
            TextBoxCard.Text = TextBoxCard.Text.Replace("-", "")
            Me.Refresh()
        End If
    Catch ex As Exception

    End Try

End Sub

Private Sub TextBoxAccount_GotFocus(sender As Object, e As System.EventArgs) Handles TextBoxAccount.GotFocus
    TextBoxAccount.SelectAll()
End Sub

Private Sub TextBoxAccount_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBoxAccount.KeyDown

    If e.KeyCode = Keys.Enter Then
        e.SuppressKeyPress = True
        If TextBoxAccount.Text <> "" Then
            Call GetDBdata()
        Else
            MsgBox("You must enter an account number!", MsgBoxStyle.Exclamation, "ATTENTION PLEASE!")
            TextBoxAccount.Focus()
        End If
    End If

    'If e.KeyCode = Keys.Enter Then
    '    e.Handled = True
    '    SendKeys.Send("{Tab}")
    'End If

End Sub

Private Sub TextBoxCard_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles TextBoxCard.MouseClick
    TextBoxCard.SelectionStart = 0
    TextBoxCard.SelectionLength = Len(TextBoxCard.Text)
    TextBoxCard.Text = TextBoxCard.Text.Replace("-", "")
    Me.Refresh()
End Sub

#End Region

#Region "OTHER/MISCELLANEOUS CONTROLS CODE"

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    LabelDateTime.Text = DateTime.Now

End Sub

Private Sub BWErrorNotice_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BWErrorNotice.DoWork

    Do While Not creditcard(TextBoxCard.Text)
        LabelError.BackColor = Color.Black
        System.Threading.Thread.Sleep(500)
        LabelError.BackColor = Color.Red
        System.Threading.Thread.Sleep(500)
    Loop
    BWErrorNotice.CancelAsync()

End Sub

Private Sub CheckBoxConfirm_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles CheckBoxConfirm.CheckedChanged
    If CheckBoxConfirm.Checked = True Then
        ButtonSubmit.Show()
    Else
        ButtonSubmit.Hide()
    End If
End Sub

#End Region

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:45:56.063

虽然下面的内容不太可能解决表单消失问题，但它会解决下游问题：

在 GetDBData() 中，您将 accountNumber 分配给 TextBoxAcount.Text 的值，除非您使用我强烈建议您养成这样做的习惯的参数，否则它必须用引号括起来。

```
Dim dbAdapter As New MySqlDataAdapter("SELECT * FROM customer WHERE accountNumber = " & TextBoxAccount.Text, dbConn) 
```

参数提供了许多好处，包括隐式类型转换、注入攻击预防，有时甚至可以治愈意外行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:01:46.187

我解决了这个问题。我在 GetDBData() 函数的末尾调用 Dispose() - 因此在执行返回到 TextBox 之前，表单已被处理。我删除了它，一切又好了。

# javascript - iFrame 将页面向上移动到父 div / 顶部

> ID：12863347
> 
> 赞同：0
> 
> 时间：2012-10-12T16:28:17.060
> 
> 标签：javascript, html, iframe, window, parent

我在父页面中有一个 iFrame，内容的长度因 iFrame 中的页面而异，所以我想让页面在某些情况下跳回顶部。

这在 IE 中运行良好，其中 breadCrumb 是父窗口中 div 的 id。

```
<script>
window.parent.location = "#breadCrumb";
</script> 
```

它将页面跳转到正确的位置，并且 url 是 parentwindowurl.aspx#breadCrumb

但是，在 Chrome 和 Firefox 中，这不起作用，它将页面更改为 url iFrameurl#breadCrumb，它替换了父页面并且没有 breadCrumb div。

有谁知道我怎样才能让它在 Chrome 和 Firefox 中工作？还是我应该使用更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:36:32.480

试试这个

```
window.parent.location.href = "#breadCrumb"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:31:34.440

假设你想要它到最高点，这很容易

[https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)

```
window.parent.scrollTop(0); 
```

抱歉，实际上可能是

```
window.parent.document.body.scrollTop(0); 
```

如果没有，请告诉我错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:21:34.280

位置哈希通常用于滚动到具有匹配名称属性的锚标记，因此您需要具有如下标记：

```
<a name="breadCrumb"></a> 
```

在父框架中，以便让浏览器滚动到带有位置哈希的内容。

我不熟悉 div 标签上的这种行为；这可能是 IE 特有的功能。

# ios5 - 如何在 ios 5/6 中处理平滑线图，例如下面的示例？

> ID：12863348
> 
> 赞同：0
> 
> 时间：2012-10-12T16:28:18.893
> 
> 标签：ios5, drawing, ios6

我一直在开发能够产生如下线条的线条绘制应用程序：

![在此处输入图像描述](../Images/4adb04bd6996650655234956a1805025.png)

我真的很想画出这样的线条：

![在此处输入图像描述](../Images/4ee90d1b2e9adf71c0571f5774149486.png)

我不知道用什么技术来制作看起来像笔触的线条。

我将不胜感激建议，或重定向到查看此问题的帖子。我找了一个小时。我不知道问正确问题的术语..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:45:01.923

你有两个问题需要解决：

1.  如何确定要绘制的线的宽度
2.  画出合适的宽度线

理想情况下，您希望用户手指的压力信息知道线应该有多宽。用户按得越用力，线条就越粗。但是，运行 iOS 的电容式触控设备无法获取此信息。因此，您的下一个选择是根据用户在屏幕上移动手指的速度使用某种算法。慢速移动可能意味着更粗的线条，而快速移动可能意味着更细的线条。或相反，取决于您想要实现的目标。

根据您的应用程序是否使用 OpenGL，绘制适当的宽度线有很多选项。主要是，我会考虑使用一个小的抗锯齿圆形图像来绘制像素缓冲区。适当缩放图像以绘制不同宽度的线条部分。您问题的这一部分有很多选项，因此您可能想将其作为一个单独的问题提出，同时还包括您是否使用 OpenGL、Core Graphics 或其他东西的详细信息。

# php - 如何在 CodeIgniter 中完全刷新页面？

> ID：12863349
> 
> 赞同：4
> 
> 时间：2012-10-12T16:28:19.217
> 
> 标签：php, codeigniter, redirect, codeigniter-2, reload

我正在叠加层中加载表单。叠加层对调用叠加层的页面具有单独的控制器和操作。

在表单提交时，如果成功，我只想重新加载从中加载叠加层的引用页面。我可以加载引用页面，但它会将内容放在叠加层内。

```
header("Location: www.example.com", true, 302); 
```

不起作用。

像这样使用 URL 助手：

```
$url = $_SERVER['HTTP_REFERER'];
redirect($url); 
```

也不起作用。每次它加载到叠加层中。我为此感到难过。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-24T09:31:14.320

您可以使用此代码在 codeigniter 中刷新：

```
redirect($_SERVER['REQUEST_URI'], 'refresh'); 
```

它应该工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-30T08:09:18.833

这个比较简单

> 重定向($this->uri->uri_string());

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T16:37:24.147

不幸的是，使用`header`刷新/重定向只会反映显示 PHP 页面的容器中的更改。

要刷新父页面（即显示覆盖本身的页面），您需要在客户端使用 Javascript 进行刷新。这些问题应该可以帮助您走上正确的道路：

*   [从 iframe 操作重定向父窗口](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)
*   [IFRAME 中的 PHP“标头（位置）”，加载到 _top 位置？](https://stackoverflow.com/questions/2985353/php-header-location-inside-iframe-to-load-in-top-location)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-21T11:48:21.693

您可以使用此代码在 codeigniter 中刷新：

```
redirect($_SERVER['REQUEST_URI'], 'refresh'); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T16:33:57.910

您不必为`header`. 只需使用此模式：

```
header('Location: www.somewhere.com'); 
```

另外，查看这篇关于类似问题的文章：

> [使用 CodeIgniter 重定向](https://stackoverflow.com/questions/723883/redirect-with-codeigniter)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T14:50:29.943

```
redirect(site_url(strtolower(__CLASS__))); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-18T13:45:35.297

只是

```
redirect('/some_url', 'refresh'); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-10-20T09:07:07.657

这对everone来说更简单:) location.reload()

# ruby - 你可以在救援修饰符中放置多个赋值吗？

> ID：12863351
> 
> 赞同：2
> 
> 时间：2012-10-12T16:28:23.753
> 
> 标签：ruby, variable-assignment, modifier

假设我有这个：

```
item_one = Object.find(1) rescue item_one, value = [Object.first, true] 
```

这实际上是行不通的。它返回这个：

```
syntax error, unexpected '=', expecting $end 
```

有谁知道如何在语法上将多个赋值放在救援修饰符中？

**边注：**

Boris 建议以这种方式设置救援语句：

```
begin
  i1 = Object.find 1
rescue NoMethodError
  i1, v = Object.first, true 
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:31:45.520

使用括号。所以你正在从任务中解救出来：

```
(item_one = Object.find(1)) rescue item_one, value = [Object.first, true] 
```

# android - 在活动创建方法android上启动计时器

> ID：12863367
> 
> 赞同：0
> 
> 时间：2012-10-12T16:29:27.527
> 
> 标签：android, timer

当管理员在浏览器上推送消息时，我需要向应用程序用户显示消息。为此，我实现了一个计时器，以便它在应用程序启动时向用户显示一条消息。如果推送新消息，计时器将继续运行以在 20 分钟内获取一次消息。我的计时器工作正常，但点击按钮。

1.  我希望我的计时器在活动加载后立即启动。
2.  这是显示消息的正确方法吗？（就像横幅）
3.  计时器的资源消耗如何？

## 定时器任务

```
class secondTask extends TimerTask {

    @Override
    public void run() {

        TestBannerActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() { 
                fl.setVisibility(View.VISIBLE);
                long millis = System.currentTimeMillis() - starttime;
                int seconds = (int) (millis / 1000);
                int minutes = seconds / 60;
                seconds = seconds % 60;

                 text2.setText(String.format("%d:%02d", minutes,
                 seconds));
            }
        });
    }
}; 
```

## 按钮点击事件

```
b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Button b = (Button) v;
            if (b.getText().equals("stop")) {
                timer.cancel();
                timer.purge(); 
                b.setText("start");
            } else {
                starttime = System.currentTimeMillis();
                timer = new Timer(); 
                timer.schedule(new secondTask(), 8000, 1200000); 
                b.setText("stop");
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:52:54.540

您可以使用以下代码：

```
package packagename.timerService;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import android.app.Service;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Handler;
import android.os.IBinder;

public class TimerService extends Service{

    public static final String BROADCAST_TIMER_ACTION = "packagename.timerService.TimerService";
    private final Handler handler = new Handler();
    private final Handler updateUIHandler = new Handler();

    Intent intent;
    int time = 0;
    private int durationTime = 0;

    private int starDate;
    private int currentDate;
    private Date startTaskDate;
    private String taskComment;

    @Override
    public void onCreate() {
        // Called on service created
        intent = new Intent(BROADCAST_TIMER_ACTION);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        try {

                handler.removeCallbacks(sendUpdatesToUI);
                handler.post(sendUpdatesToUI); //post(sendUpdatesToUI);
                starDate = Calendar.getInstance().get(Calendar.DATE);
                durationTime = 0;
                startTaskDate = new Date();

            }
        } catch (Exception e) {}
        return START_STICKY;
    }

    private Runnable sendUpdatesToUI = new Runnable() {
        public void run() {
            try{
                displayLoggingInfo();
                time ++;
                durationTime ++;
                handler.postDelayed(this, 60 * 1000); // 1 minute
            }catch (Exception e) { }
        }
    };

    private Runnable sendUpdatesToUIOnResume = new Runnable() {
        public void run() {
            displayLoggingInfoForOnResume();
        }
    };

    private void displayLoggingInfoForOnResume() {
        try{
            currentDate = Calendar.getInstance().get(Calendar.DATE);

            intent.putExtra("changeDate", String.valueOf(false));

            intent.putExtra("time", String.valueOf(time == 0 ? time : time - 1 ));
            sendBroadcast(intent);
        } catch (Exception e) { }
    }

    private void displayLoggingInfo() {
        try{
            currentDate = Calendar.getInstance().get(Calendar.DATE);

            intent.putExtra("changeDate", String.valueOf(false));

            intent.putExtra("durationTime", String.valueOf(durationTime));
            intent.putExtra("time", String.valueOf(time));

            sendBroadcast(intent);
        }catch (Exception e) {
            // TODO: handle exception
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        try {
            handler.removeCallbacks(sendUpdatesToUI);
            updateUIHandler.removeCallbacks(sendUpdatesToUIOnResume);
            durationTime = 0;
            time = 0;

            super.onDestroy();
        } catch (Exception e) { }

    }

    @Override
    public boolean stopService(Intent name) {
        handler.removeCallbacks(sendUpdatesToUI);
        updateUIHandler.removeCallbacks(sendUpdatesToUIOnResume);
        durationTime = 0;
        time = 0;

        return super.stopService(name);
    }

} 
```

# jquery - 正则表达式：一个字符串（az, AZ, 0-9, 可以包含'\', '/'和白字）

> ID：12863378
> 
> 赞同：1
> 
> 时间：2012-10-12T16:30:33.247
> 
> 标签：jquery, regex

我想要一个有字符串的正则表达式 `(a-z, A-Z, 0-9, can include '\', '/' and white sapces)`

我试过这样：

```
if (/[\s\\\/A-Za-z0-9]$/.test(Yourval)), 
```

但是效果不好，有人可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:33:24.903

这应该有效：

```
if (/^[a-zA-Z0-9\s\\\/]+$/.test('Something with / and \\ 0 9')) { 
  alert('Good news everyone!'); 
} 
```

...因为您需要两个锚点（用于字符串的开头和结尾），以及`+`用于测试多个字符的量词。实际上，这可以重写为...

```
if (/[^a-zA-Z0-9\s\\\/]/.test('Something with / and \\ 0 9')) { 
  alert('Crazy gibberish!'); 
} 
```

...所以我们测试坏字符而不是试图只用好字符覆盖字符串。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:32:52.227

您可以使用以下正则表达式：

```
/^[\s\\\/A-Za-z0-9]+$/.test(Yourval) 
```

或者您可以测试是否存在这样的坏字符：

```
/[^\s\\\/A-Za-z0-9]/.test(Yourval) 
```

# scheme - 如果项目不在方案中的第一个

> ID：12863381
> 
> 赞同：-2
> 
> 时间：2012-10-12T16:30:54.580
> 
> 标签：scheme

我正在研究上下文无关的语法，并且我有一个返回（语法的终端值）的函数

例如：我有导致 (AB) 的非终端函数，来自调用 say ((A cat) (B happy np) (AB sad)) 所以技术上 A 和 B 是语法的非终端。现在我希望能够获得终端（猫快乐 np 悲伤）

```
(define terminals
  (lambda (lsts)
    (cond
     ((null? lsts) lsts)
     ((not(member? (car(car lsts)) (n-terminals lsts)))
      (cons (car(car lsts)) (terminals (car (cdr lsts)))))
     (else (terminals (cdr lsts)))))) 
```

PS：上面描述了n端的功能。成员？是一个布尔函数，如果项目是列表的成员，则返回 true，否则返回 false。我的函数返回一个空的 lst。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:59:49.557

问题在于您在找到终端符号时所做的事情。这里确实有两个不同的问题。

首先，您只查看每条规则的*第一个*符号。您的`lsts`变量是规则列表；每个规则都是一个符号列表。因此`(car (car lsts))`，您将获得第一条规则的第一个符号。

第二个问题是找到终端符号后如何递归。通常，您传递`terminals`一个列表列表。但是，如果您找到了一个终端符号（即以 开头的符号`(member? ...)`），您将传递它`(car (cdr lsts))`。我们知道`lsts`是一个列表列表。`(cdr lsts)`列表列表（当然也可以是空列表）也是如此。这意味着`(car (cdr lsts))`只是一个*普通*的列表。

我认为解决此问题的最简单方法是将其分解为两个功能。*首先，编写一个从单个*规则获取终端的函数。也就是说，不是专注于整个输入，而是`((A cat) (B happy np) (A B sad))`一次专注于一个规则，例如`(B happy np)`. 所以写一个给定的函数`(B happy np)`给你`(happy np)`。接下来，编写一个函数，将该函数应用于每个规则`lsts`并组合所有输出。（您可能会发现`append`这里的功能很有用。）

将它写在两个单独的函数中应该会使问题更容易考虑。生成的代码也将更简单，更易于阅读，这是一个奖励。

此外，一个无关的风格问题：你可以（并且应该）写

```
(define foo
  (lambda (args) ...)) 
```

作为

```
(define (foo args)
  ...) 
```

这两个表达具有相同的含义，但第二个更容易阅读和使用更频繁。

编辑：正如我在评论中所说，我将首先计算非终端列表并将其用于一次执行一行的函数。您可以通过嵌套两个函数并利用 Scheme 的词法作用域来简化使用：

```
(define (terminals rules)
  (let ((non-terminals (n-terminals rules)))
    (define (helper rule) ; this takes a rule and returns all its terminal symbols
       ... ; you can use non-terminals in here
    )
    ; now here you have to call helper on every rule and combine the results
  )) 
```

另一种选择是将其分解为两个未嵌套的函数并传入非终结符号列表：

```
(define (terminals-from-rule rule non-terminals)
  ... ; implement, using non-terminals as the list of non-terminal symbols
)
(define (terminals rules)
  ... ; here you need to calculate the list of non-terminals and pass
      ; it into each call to terminals-from-rule along with the rule.
) 
```

# php - Yii CGridView BELONGS_TO 关系搜索：数值比较运算符失败

> ID：12863386
> 
> 赞同：1
> 
> 时间：2012-10-12T16:31:09.993
> 
> 标签：php, mysql, gridview, yii, belongs-to

我在我的“PointMutationsVarscan”模型中有一个 CGridView 小部件，用于搜索相关模型中的数字非 pk 值，称为“GeneExpressionCufflinksGene”

我以通常的方式在 PointMutationsVarscan 模型中声明搜索变量以消除歧义：

```
public $patient_gecg_search; 
```

PointMutationsVarscan 中的搜索规则包含搜索变量：

```
array('id, ... patient_gecg_search, geneExpressionCufflinksGene', 'safe', 'on'=>'search'), 
```

型号关系：

```
'geneExpressionCufflinksGene' => array(self::BELONGS_TO,'GeneExpressionCufflinksGene',array('gene'=>'gene_id')), 
```

搜索功能：

```
public function search()
{
$criteria=new CDbCriteria;
$criteria->compare('id',$this->id,true);
// yada yada

$criteria->with[] = 'geneExpressionCufflinksGene';          
if($this->patient_gecg_search) {
$criteria->compare( 'geneExpressionCufflinksGene.fpkm', $this->patient_gecg_search, true);          
$criteria->addSearchCondition("geneExpressionCufflinksGene.fpkm",$this->patient_gecg_search);
}
return new CActiveDataProvider($this, array(
    'criteria'=>$criteria,
        'sort'=>array(
        'attributes'=>array(
            'patient_search'=>array(
                'asc'=>'patient.id',
                'desc'=>'patient.id DESC',
            ),

            'patient_gecg_search'=>array(
                'asc'=>'geneExpressionCufflinksGene.fpkm',
                'desc'=>'geneExpressionCufflinksGene.fpkm DESC',
            ),
            '*',
        ),
        ),
));
} 
```

在 GeneExpressionCufflinksGene 模型规则中，fpkm 是一个数值：

```
array('fpkm, fpkm_conf_lo, fpkm_conf_hi', 'numerical'), 
```

PointMutationsVarscan 视图中的 CGridView 小部件：

```
$criteria=new CDbCriteria;
$dataProvider=$model->search();
$dataProvider->pagination = array('pageSize' => 15);
$columns=array();
$columns[]= array(
        'name'  => 'patient_gecg_search',
        'value'=>'$data->geneExpressionCufflinksGene->fpkm', 
        'type'  => 'raw',
        'htmlOptions'=>array('style'=>'width:250px;'),
    ); 

$this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'point-mutations-varscan',
        'dataProvider'=>$model->search(),
        'filter'=>$model,
        'columns'=>$columns,
    )
); 
```

本质上问题是我不能在这个属于关系列上进行数字比较搜索（> < = etc）。它只进行字符串匹配搜索。例如，如果我搜索 123，它将返回与 123 匹配的所有数字 fpkm 值，但如果我执行 <123 或 >1，它不会返回任何记录，这是您期望的本地参数。

fpkm 是数据库中的双精度浮点数。我可以在 GeneExpressionCufflinksGene 模型自己的 CGridView 小部件中很好地在 fpkm 上使用比较运算符。比较运算符仅在通过 PointMutationsVarscan 模型作为关系搜索时才会失败。

感谢您对此的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:31:49.437

以及解决方案......

```
$criteria->addSearchCondition("geneExpressionCufflinksGene.fpkm",$this->patient_gecg_search, $escape=true, $operator='OR'); 
```

我添加了转义参数并将运算符更改为 OR 而不是默认的 AND。我的猜测是它还在某处进行字符串搜索，并且使用 OR 运算符允许在字符串比较之外进行比较操作。显然有些东西我不明白，但无论如何，数字比较现在返回正确的结果。

# c# - LDAP 端口 636 DirectoryEntry 属性不包含组成员，尽管 LDAP 包含

> ID：12863390
> 
> 赞同：0
> 
> 时间：2012-10-12T16:31:20.943
> 
> 标签：c#, ldap, port, directoryentry

在 C# 中，我使用以下代码绑定到一个安全的 LDAP 站点

```
authServer =
    new DirectoryEntry("LDAP://whatever.com:636",
          authServerUsernameFromConfig,
          authServerPasswordFromConfig,
          AuthenticationTypes.Anonymous ); 
```

然后搜索发现OK的用户。

然后检查以下集合以查找“groupMembership”的属性名称

```
DirectorySearcher directorySearch = new DirectorySearcher(authServer, filterKey);
...
SearchResult result = directorySearch.FindOne();
...
authUser = new DirectoryEntry(result.Path, userDN, password, AuthenticationTypes.None);
...
(read) authUser.Properties.PropertyNames 
```

但是，使用 636 安全端口时没有找到。找到其他属性。当绑定到非安全 PORT 时，所有属性都可以找到具有 636 绑定的属性以及名为 groupMembership 的属性。

谁能解释为什么会这样或如何检索它们。

似乎使用 LDP.exe 实用程序可以看到这些 groupMembership 属性与安全端口 636 绑定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:12:09.480

*   目录信息树没有*属性*。目录信息库具有分组为*条目的**属性*。属性可能是多值的，属性总是单值的。
**   LDAP 客户端不会“绑定”到连接。LDAP 客户端建立到安全端口（使用 SSL）或非安全端口（如果客户端需要并且服务器允许，可以将其“提升”到安全连接）的连接。一旦建立了连接，该连接就没有授权状态。然后，LDAP 客户端可以使用 BIND 操作请求服务器验证凭据并更改连接的授权状态。服务器使用连接的授权状态来确定使用该连接的客户端是否具有对条目和包含这些条目的属性的访问权限。*   如果连接不是安全连接，现代、专业品质的 LDAP 服务器能够拒绝对某些敏感属性的访问。如果 LDAP 客户端正在访问的服务器**没有**此功能，那么通过安全连接和非安全连接访问数据没有区别。这些遗留服务器不区分安全和非安全连接以确定访问权限和特权 - 连接的授权状态用于确定访问权限）*

 *使用已知的好工具`ldapsearch`，例如验证 LDAP 客户端是否可以根据需要访问数据。如果已知良好的 LDAP 客户端可以访问数据而手动编码的 LDAP 客户端不能，则检查搜索请求的以下参数：

*   基础对象或基础 DN。这是搜索开始的地方。不返回高于基础对象的条目
*   搜索范围。`BASE`仅返回条目和请求属性，`ONE`返回直接从属于基础对象的条目，`SUB`返回基础对象和从属于基础对象的所有条目，在任何级别。
*   过滤器。过滤器用于缩小搜索范围，由 attributeType-attributeValue 断言组成，可以有多种不同的形式
*   服务器将从与其他搜索参数匹配的条目中返回的请求属性。如果没有请求，某些 API（不是全部）会返回所有用户属性。

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)
*   [LDAP：使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)*

# jquery - Bootstrap 使用下拉菜单折叠

> ID：12863393
> 
> 赞同：0
> 
> 时间：2012-10-12T16:31:23.033
> 
> 标签：jquery, css, twitter-bootstrap

我对 jQuery 垂直下拉菜单有疑问；当我悬停菜单项时，下拉菜单在引导折叠中“切割”。你能帮我解决这个问题吗？jQuery 菜单取自 [http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm#ajax](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm#ajax) ![图片](../Images/5183c2c2d62f0840e4a62f1d2498e8e6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:39:41.400

最有可能的问题是 CSS 属性`overflow:hidden;`已在*jQuery*菜单的容器或该容器的父容器之一上设置。

如果没有看到您正在处理的 HTML，就不可能说出是哪个，但您需要找到哪个 HTML 元素的`overflow`设置设置为`hidden`，然后将其设置为`visible`. 根据 HTML 的结构，您可能需要对多个元素执行此操作。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-18T07:58:45.610

我知道那个问题。

![在此处输入图像描述](../Images/6e531589d9205464bdaea0162422bfc0.png)

你可以做：

1.  制作文件夹名称：`images`
2.  打开`ddsmoothmenu.js`并输入：

![在此处输入图像描述](../Images/cd21098e74870a304c9efc257e3a93e9.png)

注意：在文件夹图像中，您有：

`right.png`, `left.png`,`down.png`

# jquery - 如何在 Jquery 的一个事件中添加多个函数？

> ID：12863399
> 
> 赞同：-2
> 
> 时间：2012-10-12T16:31:35.813
> 
> 标签：jquery

我想在一个事件**onclick**中添加多个功能。

像这样。：

```
$("div").click( function() {
$("img").fadeOut();
$("font").hide();
$("table").show();
}); 
```

（从评论中复制粘贴的真实代码：）

```
$(document).ready(function(){ 
  $("#noti_t").click(function() { 
    $("#noti_show").toggle(); 
    $("#noti_s").hide(); 
    var wholedata="clear=1"; 
    $.ajax({ type: "POST", url: "noti_clear.php", data: wholedata, cache: false, }); 
    return false; 
  }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:43:54.310

您可以将大量代码放在一个函数中：

```
$("div").click( function() {
  $("img").fadeOut();
  $("font").hide();
  $("table").show();
}); 
```

或者您可以将多个事件处理程序连接到同一个事件：

```
$("div").click( function() {
  $("img").fadeOut();
});

$("div").click( function() {
  $("font").hide();
});

$("div").click( function() {
  $("table").show();
}); 
```

jQuery 处理多个处理程序，即当您连接另一个处理程序时，您不必检查是否已经存在事件处理程序。

如果您在一个地方执行此操作，第一种方法当然更好。如果您想从代码的不同位置连接相同的事件，则第二种方法很有用。

# java - 从 Java 调用 c++，然后从同一个 c++ 方法调用 java 方法

> ID：12863401
> 
> 赞同：1
> 
> 时间：2012-10-12T16:31:39.587
> 
> 标签：java, c++, java-native-interface

以下代码可以从 Java 调用 C++ 方法。

**JNITest.java**

```
public class JNITest  {
    static {
        System.load("D:\\gagan docs\\TestJava\\Example.dll");
    }

    public native int intMethod(int n);

    public static void main(String[] args) {
        JNITest jnitest = new JNITest();
        int square=jnitest.intMethod(5);
        System.out.println("HelloWorld");
        System.out.println("From init method"+square);
    }

} 
```

**例子.cpp**

```
#include "JNITest.h"
#include<string.h>
JNIEXPORT jint JNICALL Java_JNITest_intMethod(JNIEnv *env, jobject obj, jint num)
{
    return num*num;
} 
```

但是，当我尝试使用以下方法从上述 CPP 调用 java 方法时，JVM 崩溃。

我也尝试过使用 createJavaVM 方法创建 JVM，但它崩溃了。

**例子.cpp**

```
#include "JNITest.h"
#include<string.h>
static JavaVM *jvm = NULL
JNIEXPORT jint JNICALL Java_JNITest_intMethod(JNIEnv *env, jobject obj, jint num) 
{
    JNIEnv* jenv;
    int res = jvm->AttachCurrentThread((void **)&jenv, NULL);
    return num*num;
} 
```

我正在使用 Linux（64 位）机器和 JDK 64 位（Java 1.6）。

我想从 Java -> C++ -> Java 做一个完整的流程。有关此问题的任何信息都将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:29:07.960

从 C++ 调用 Java 是一个（相对）简单的问题：

```
JNIEXPORT jint JNICALL Java_JNITest_intMethod(JNIEnv *env, jobject obj, jint num)
{
    jint x = (env)->CallIntMethod(obj, method_id);
    // or, (env)->CallVoidMethod(obj, voidMethod, ...), etc.
} 
```

这假设您的类`jobject`具有由 标识的方法`jmethodID`。获取`jmethodID`也很简单：

```
jclass class_inst = (env)->FindClass("pkg/to/my/stuff/Class");
jmethodID method_id = (env)->GetMethodId(class_inst, "methodName", "()I"); 
```

获得您想要为特定课程调用的方法可能是您最具挑战性的任务，但一旦您掌握了基础知识，就一点也不难。

有关一个很好的示例（免责声明：我是示例的作者），请参阅[inotify-interface.cpp](https://bitbucket.org/nbargnesi/inotify-java/src/27510bee4b9a/src/cpp/inotify-interface.cpp?at=default)。

另请注意，您可能对调用[AttachCurrentThread](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CB8QFjAA&url=http%3A%2F%2Fdownload.oracle.com%2Fjavase%2F1.5.0%2Fdocs%2Fguide%2Fjni%2Fspec%2Finvocation.html&ei=A1B4UMOCMIbh0wG21YDYAw&usg=AFQjCNH_3oBjMAoMcKWytYZLlsph7NcmTA&cad=rja)**不**感兴趣！

# jquery - 带有 Selenium 表单验证的 jQuery

> ID：12863402
> 
> 赞同：1
> 
> 时间：2012-10-12T16:31:40.833
> 
> 标签：jquery, selenium

我正在尝试使用 Selenium ID 验证我的表单，但它没有传递名字。我需要它只接受字母没有数字的名字。下面是代码：

```
function validateFrName(){

        if (frName.val() == "1"){
         frName.addClass("error");
        $("#firstNameErrorMsg").text("First name can only contain letters.");
        $("#firstNameErrorMsg").addClass("error");
        return false;

    } else if (frName.val().length <3){
        frName.addClass("error");
        $("#firstNameErrorMsg").text("Please enter your first name.");
        $("#firstNameErrorMsg").addClass("error");
        return false;
    }else{
        frName.removeClass("error");
        $("#firstNameErrorMsg").text("OK");
        $("#firstNameErrorMsg").removeClass("error");
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:39:27.620

我没有正确理解你的问题。如果你通过这个“frName.val()”得到你的名字，那么你为什么不能尝试检查 frName.val().substring(0,2)= 1 或 2 或 3 等。如果你没有，请告诉我更多细节得到这个..

请也试试这个

```
function valid()
{
var k=true;
for(i=0;i<frName.val().length-1;i++)
{
if ( frName.val().substring(i,i+1)=0 ||   frName.val().substring(i,i+1)=1)
{
k=false;
}
}
return k;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:16:28.237

看到这个 jsFiddle [http://jsfiddle.net/vHzKn/1/](http://jsfiddle.net/vHzKn/1/)

问题在于您如何获取 frName。

我添加了一个名为 firstName 的变量，并为其分配了 id 为 frName 的文本框的值

```
var firstName = $("#frName").val(); 
```

然后我根据 firstName 变量进行验证。

请注意，jsfiddle 中的代码示例没有找到所有数字等......这是一个单独的问题。您可能应该为此使用 javascript 验证库。

编辑：查看[检查输入字符串是否包含数字](https://stackoverflow.com/questions/5778020/jquery-check-whether-an-input-string-contains-number)以查找正则表达式以确定字符串中是否存在数字。

请参阅带有 jquery 示例的这个超级简单的 jsfiddle：http: [//jsfiddle.net/XCYL7/](http://jsfiddle.net/XCYL7/)

# processing - Tomcat with Processing(" using java.awt library in linux X11 display error")

> ID：12863404
> 
> 赞同：1
> 
> 时间：2012-10-12T16:31:42.170
> 
> 标签：processing

我在尝试将程序集成处理放在 tomcat 服务器上时遇到了一个非常烦人的问题……我检查了许多关于此的解决方案。他们中的大多数人都说服务器端的小程序是所谓的重量级组件......但我不能将它们转移到客户端，因为我只想处理制作图片然后将其发送给客户端。

所以我想我没有调用小程序显示或一些交互操作..我不知道为什么我有这个问题“在linux X11显示问题中使用java.awt库”..所以如果我将tomcat设置更改为大多数的人说`-DJava.awt.headless=true`，它会进入另一个错误..这两个错误都表明`Papplet.java`处理源代码中的244行有问题：

```
 static public final int MENU_SHORTCUT = Toolkit.getDefaultToolkit().getMenuShortcutKeyMask(); 
```

有人可以帮我吗，我被困在这里很久了......

**为了补充...如果我将其更改为网站上的大多数说法...**

环境：

```
export JAVA_OPTS="${JAVA_OPTS} -Djava.awt.headless=true" 
```

设置好之后，新的错误信息如下

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
javax.servlet.ServletException: java.lang.ExceptionInInitializerError
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:387)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:451)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:632)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

java.lang.ExceptionInInitializerError
    de.fhg.iais.kd.tm.quote.casReadWrite.CasAnnotationCollector.finishProcessing(CasAnnotationCollector.java:72) 
```

# apache - 如何在 htaccess 中允许特定的 URL？

> ID：12863407
> 
> 赞同：0
> 
> 时间：2012-10-12T16:31:46.443
> 
> 标签：apache, .htaccess, magento

我在 Magento 商店中的根 .htaccess 确保任何未写入的访问`(www.)domain.com/correct`都将转到我们的 404（其中“正确”是现有子目录）。`(www.)domain.com/admin`也允许通过。

我现在还需要允许其他一些不遵循`(www.)domain.com/correct`表单的 URL。

目前 .htaccess 中的代码是：

```
RewriteCond %{HTTP_HOST} ^domain.com$ [NC] 
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^www.domain.com$ [NC] 
RewriteRule ^$ go404 [R=301,L] 
```

我怎样才能使以下内容也通过（即不在我身上 go404）？

```
www.domain.com/correct/index.php/folder1/folder2/folder3/ 
```

# java - 在 Hibernate 中执行 Criteria 查询后是否需要提交/关闭会话？

> ID：12863410
> 
> 赞同：4
> 
> 时间：2012-10-12T16:32:00.927
> 
> 标签：java, hibernate, session, orm, criteria

我有一个看起来像这样的代码：

```
Session session = MySessionFactory.createSession();
session.beginTransaction();
Criteria cq = session.createCriteria(clazz);
// Do stuff.
List list = cq.list();
session.getTransaction().commit();
session.close(); 
```

我真的需要 beginTransaction()、commit() 和 close() 吗？

我在 JPA 中听说，CriteriaQuery（与 Criteria 相对）不需要主动事务管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:28:33.780

是的，您需要会话管理。但是，您可以在单个事务/会话中执行多个操作/查询。我建议从每个请求（如果您正在创建 Web 服务器）、作业等开始一个事务，并根据需要增加事务的粒度。

如果您想避免使用 Spring，那么这仍然可以通过方面轻松完成，但是您很快就会重复 Spring 所做的很多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:56:21.020

*> 我在 JPA 中听说，CriteriaQuery（与 Criteria 相对）不需要主动事务管理。*

这是正确的。

如果您将代码更改为标准 JPA，则不会强制在事务中运行任何查询 - 前提是您正在选择实体（而不是插入/更新/删除）并且没有在查询上设置 LockMode。

如果这是所需的 JPQL：

```
SELECT c
FROM Customer c JOIN c.orders o JOIN o.lineItems i
WHERE i.product.productType = 'printer' 
```

标准 JPA 标准查询代码为：

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder();
CriteriaQuery<Customer> cq = cb.createQuery(Customer.class);
Root<Customer> customer = cq.from(Customer.class);
Join<Customer, Order> order = customer.join(Customer_.orders); // or .join("orders")
Join<Order, Item> item = order.join(Order_.lineItems);         // or .join("lineItems")

ParameterExpression<String> p = cb.parameter(String.class, "prodType");
cq.select(customer)
  .where(cb.equal(item.get(Item_.product).get(Product_.productType), p));
// if you haven't generated JPA metamodel Customer_, Product_, etc, 
// can replace this with 
//  .where(cb.equal(item.get("product").get("productType"), p));

TypedQuery<Employee> tq = em.createQuery(cq);
q.setParameter("prodType", "printer");
return q.getResultList(); 
```

它有点难看，但它是强类型的（JPQL 不是）、标准的、面向对象的、在初始化时编译的，因此速度很快。:-)

# inform7 - 如何在 Inform 7 中读取一行输入？

> ID：12863411
> 
> 赞同：9
> 
> 时间：2012-10-12T16:32:01.420
> 
> 标签：inform7

我只想在操作中间提示用户输入一行文本。效果应该是这样的：

```
> north

The robot steps in front of you as you approach the gate.
"PAASSWAAAAWRD!!" it bellows.

Enter the password: _ 
```

此时游戏应该暂停，让玩家尝试猜测密码。例如，假设我猜“fribble”，这不是密码：

```
Enter the password: fribble

"WRONG PASSWAAARD!" roars the robot. "CHECK CAPS LAAAWWWWK!"

> 
```

我想要的行为类似于`if the player consents`，但我想要整行输入，而不仅仅是是或否。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T13:48:35.653

Inform 没有提供简单的方法来做到这一点，尽管您可以通过下降到 Inform 6 来访问键盘原语。

但是可以达到预期的效果：

```
The Loading Zone is a room. "Concrete with yellow stripes. The Hold is north."
The robot is an animal in the Loading Zone. "However, a robot the size of an Arcturan megaladon guards the way."

North of the Loading Zone is the Hold.

Instead of going north from the Loading Zone:
    say "The robot steps in front of you as you approach the gate. 'PAASSWAAAAWRD!!' it bellows.";
    now the command prompt is "Enter password: ".

After reading a command when the command prompt is "Enter password: ":
    if the player's command matches "xyzzy":
        say "The robot folds itself up into a cube to let you pass.";
        move the player to the Hold;
    otherwise:
        say "'WRONG PASSWAAARD!' roars the robot. 'CHECK CAPS LAAAWWWWK!'";
    now the command prompt is ">";
    reject the player's command. 
```

我认为这种事情被认为是糟糕的游戏玩法：它迫使玩家猜测，这会损害玩家控制和选择的错觉。更传统的方法是要求玩家**说出**密码：

```
The Loading Zone is a room. "Concrete with yellow stripes. The Hold is north."
The robot is an animal in the Loading Zone. The robot is either awake or asleep. The robot is awake. "[if awake]However, a robot the size of an Arcturan megaladon guards the way.[otherwise]A cube of metal the size of an Arctural megaladon snores loudly.[end if]".
North of the Loading Zone is the Hold.

Instead of going north from the Loading Zone when the robot is awake:
    say "The robot steps in front of you as you approach the gate. 'PAASSWAAAAWRD!!' it bellows."

Instead of answering the robot that some text:
    if the topic understood matches "xyzzy":
        say "The robot folds itself up into a cube to let you pass.";
        now the robot is asleep;
    otherwise:
        say "'WRONG PASSWAAARD!' roars the robot. 'CHECK CAPS LAAAWWWWK!'" 
```

命令**说 xyzzy**和**回答 xyzzy**和**机器人，xyzzy**和**说 xyzzy 对机器人**都可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-07T10:44:32.203

*Michael Callaghan*的扩展问题将对此有所帮助。请注意，您可能无法可靠地测试输入大小写敏感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T23:00:44.367

像这样下降到 I6 在 Inform 7.9.3 中有效。这可能是个坏主意。

```
Section 1 - Line input

Include (- Global user_input = 100; -) after "Parser.i6t".

The user input is a snippet that varies. The user input variable translates into I6 as "user_input".

To get a line of input: (-
    KeyboardPrimitive(buffer, parse);
    user_input = 100 + WordCount();
-). 
```

然后，您可以使用短语“get a line of input”来读取一行，短语“the user's input”给出他们输入的行。（*片段*是一种*文本*。）

示例如下所示：

```
Section 2 - Example

The Loading Zone is a room. "Concrete with yellow stripes. The Hold is north."

The robot is an animal in the Loading Zone. "However, a robot the size of an Arcturan megaladon guards the way."

North of the Loading Zone is the Hold.

Instead of going north from the Loading Zone:
    say "The robot steps in front of you as you approach the gate. 'PAASSWAAAAWRD!!' it bellows.[paragraph break]";
    say "Enter password: ";
    get a line of input;
    if the user input matches "xyzzy":
        say "The robot folds itself up into a cube to let you pass.";
        move the player to the Hold;
    otherwise:
        say "'WRONG PASSWAAARD!' roars the robot. 'CHECK CAPS LAAAWWWWK!'".

Test me with "n / password / n / xyzzy". 
```

# python - 如何在 python 线程中使用 qtwebkit？

> ID：12863412
> 
> 赞同：2
> 
> 时间：2012-10-12T16:32:01.983
> 
> 标签：python, multithreading, qtwebkit

我正在尝试使用 qtwebkit 解析 js 生成的网页，我找到了一个如何获取页面源的示例：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *
from PySide.QtWebKit import *
class Render(QWebPage):
  def __init__(self, url):
       self.app = QApplication(sys.argv)
       QWebPage.__init__(self)
       self.loadFinished.connect(self._loadFinished)
       self.mainFrame().load(QUrl(url))
       self.app.exec_()

  def _loadFinished(self, result):
       self.frame = self.mainFrame()
       self.app.quit()
url = 'http://www.thesite.gov/search'
r = Render(url)
html = r.frame.toHtml() 
```

但我不知道如何让它在线程中工作。那么，如何做到这一点，如果不可能 - 是否有另一种快速的方法来获取由 js 生成的网页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:07:04.913

鉴于 QT 的异步特性，QtWebkit 方法也是非阻塞的，因此在线程中运行它们毫无意义。您可以像这样并行启动它们：

```
from functools import partial

from PySide.QtCore import QUrl
from PySide.QtGui import QApplication
from PySide.QtWebKit import QWebView, QWebSettings

TARGET_URLS = (
    'http://stackoverflow.com',
    'http://github.com',
    'http://bitbucket.org',
    'http://news.ycombinator.com',
    'http://slashdot.org',
    'http://www.reddit.com',
    'http://www.dzone.com',
    'http://www.ideone.com',
    'http://jsfiddle.net',
)

class Crawler(object):

    def __init__(self, app):
        self.app = app
        self.results = dict()
        self.browsers = dict()

    def _load_finished(self, browser_id, ok):
        print ok, browser_id
        web_view, _flag = self.browsers[browser_id]
        self.browsers[browser_id] = (web_view, True)

        frame = web_view.page().mainFrame()
        self.results[frame.url()] = frame.toHtml()

        web_view.loadFinished.disconnect()
        web_view.stop()

        if all([closed for bid, closed in self.browsers.values()]):
            print 'all finished'
            self.app.quit()

    def start(self, urls):
        for browser_id, url in enumerate(urls):
            web_view = QWebView()
            web_view.settings().setAttribute(QWebSettings.AutoLoadImages,
                                             False)
            loaded = partial(self._load_finished, browser_id)
            web_view.loadFinished.connect(loaded)
            web_view.load(QUrl(url))
            self.browsers[browser_id] = (web_view, False)

if __name__ == '__main__':
    app = QApplication([])
    crawler = Crawler(app)
    crawler.start(TARGET_URLS)
    app.exec_()
    print 'got:', crawler.results.keys() 
```

# django - 第一次在 Mac OSX Mountain Lion 上安装 Django

> ID：12863417
> 
> 赞同：0
> 
> 时间：2012-10-12T16:32:34.180
> 
> 标签：django

我第一次安装 Django（并使用 python）。我运行 Mac OSX 10.8 Mountain Lion，默认情况下，python 已经安装：

```
$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information. 
```

我已按照[https://docs.djangoproject.com/en/1.4/intro/install/](https://docs.djangoproject.com/en/1.4/intro/install/)的步骤进行操作，即：

[在https://www.djangoproject.com/download/](https://www.djangoproject.com/download/)下载 Django并运行以下命令：

```
$ tar xzvf Django-1.4.1.tar.gz
$ cd Django-1.4.1
$ sudo python setup.py install 
```

这在**/user/local/bin**中创建了一个符号链接，它允许我从任何地方调用 Django`$ django-admin.py`

但是，尝试以下失败：

```
$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> 
```

打字后我应该得到一些东西`>>> import django`

```
>>> print django.get_version()
1.4 
```

是我遗漏了什么还是文档不那么准确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:36:59.533

实际上，`import django`不打印任何内容的事实意味着 Django 已正确安装。

`import django`只导入 Django 模块；它不会启动网络服务器或任何东西。

# java - 我正在尝试使用 NXJ 和 Android 蓝牙发送数据

> ID：12863419
> 
> 赞同：4
> 
> 时间：2012-10-12T16:32:36.053
> 
> 标签：java, android, bluetooth, nxt

我正在用NXT和Android APP做一些事情，但这并不容易。

我成功连接NXJ和Android设备，但是数据没有发送。

我正在尝试将数据从 Android 发送到 NXT。

首先，我得到了 Android App 的代码：

```
public void writeMessage(byte msg, String nxt) throws InterruptedException{ 
    BluetoothSocket connSock;

    //Swith nxt socket 
    if(nxt.equals("nxt1")){
        connSock=socket_nxt1;
    }else{
        connSock=null; 
        Log.d("write","Err");
    } 
    if(connSock!=null){
        try { 
            OutputStreamWriter out = new OutputStreamWriter(connSock.getOutputStream());
            out.write(msg);
            out.flush();
            Thread.sleep(1000);
        } catch (Exception e) { 
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }else{
        //Error
        Log.d("write","Err");
    } 
} 
```

这是针对 NXT 的：

```
while(true){
    LCD.drawString(waiting,0,0);
    LCD.refresh();

    BTConnection btc = Bluetooth.waitForConnection();

    LCD.clear();
    LCD.drawString(connected,0,0);
    LCD.refresh();  

    DataInputStream dis = btc.openDataInputStream();
    DataOutputStream dos = btc.openDataOutputStream();

    for(int i=0;i<1;i++) {
        byte n = dis.readByte();

        LCD.drawInt(n,0,1);
        LCD.refresh();

        dos.writeInt(-n);
        dos.flush();
    }

    dis.close();
    dos.close();

    Thread.sleep(1000); // wait for data to drain

    LCD.clear();
    LCD.drawString(closing,0,0);
    LCD.refresh();

    btc.close();
    LCD.clear();
} 
```

# c# - 在 C# 中从通用处理程序 (.ashx) 写入/读取 cookie

> ID：12863420
> 
> 赞同：2
> 
> 时间：2012-10-12T16:32:40.713
> 
> 标签：c#, cookies, generic-handler

我想知道是否有一种方法可以从通用处理程序中写入和读取 cookie。

目前，当我在浏览器开发人员工具中检查 cookie 时，它​​们为空。

这是我的代码：

```
public void ProcessRequest(HttpContext context)
{
    CreateCookie(Username,SessionID);
}

public void CreateCookie(string userName, string sessionID)
{
    HttpContext.Current.Response.Cookies["SESSION"]["SESSIONID"] = Encryption.EncryptString(sessionID);
    HttpContext.Current.Response.Cookies["USER"]["USERNAME"] = Encryption.EncryptString(userName);

} 
```

我不能用 SessionState 元素替换我的 cookie，因为代码可以在服务器场上执行，从而弄乱会话。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:53:05.030

处理程序是否实现 IReadOnlySessionState 和 IRequiresSessionState 接口来访问和操作会话变量。

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.ireadonlysessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.ireadonlysessionstate.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)

# sql-server - 将多行默认值插入表中

> ID：12863422
> 
> 赞同：13
> 
> 时间：2012-10-12T16:32:55.907
> 
> 标签：sql-server, tsql

我有一个单列表，这是一个自动生成的标识

```
create table SingleIdTable (
   id int identity(1,1) not null
) 
```

我可以使用自动生成的 id 插入一行：

```
insert into SingleIdTable default values 
```

我想插入许多行并使用输出语法来获取它们的 ID，例如：

```
insert into SingleIdTable
output inserted.Id into @TableOfIds
    select (default values) from SomeOtherTable where Attribute is null 
```

目的是使用自动生成的 id`SingleIdTable`为每行插入一行，`SomeOtherTable`其中为 null。`Attribute`以上不起作用，但我该怎么做。我注意到，如果我的表不止一列，我可以这样做，但我不能选择空行，这是我真正想要做的。

我无法更改 的定义`SomeOtherTable`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T16:52:32.717

如果 SQL Server 2008+ 你可以使用`MERGE`这个。下面的示例语法。

```
MERGE INTO SingleIdTable
USING (SELECT *
       FROM   SomeOtherTable
       WHERE  Attribute IS NULL) T
ON 1 = 0
WHEN NOT MATCHED THEN
  INSERT
  DEFAULT VALUES
OUTPUT INSERTED.id; 
```

我不确定这个单列表有什么实际用途？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:13:48.803

you did not specify which version of SQL Server you are on. If you happen to be on SQL 2012 you probably can replace you SingleIdTable with a sequence: [http://msdn.microsoft.com/en-us/library/ff878091.aspx](http://msdn.microsoft.com/en-us/library/ff878091.aspx)

# matlab - 检索变量/访问不同工作区中的变量

> ID：12863423
> 
> 赞同：2
> 
> 时间：2012-10-12T16:33:02.637
> 
> 标签：matlab

我导入了一些数据，他们清理了它，有很多数据，所以这非常耗时。

然后我写了一个使用这些变量的 scipt。

但是，当我去运行脚本时，它说这些变量是不知道的。在工作区编辑器中仅显示脚本中声明的变量。

Q1.) 有没有办法恢复原始变量？

其次，由于清理操作需要相当长的时间，我不想在每次运行 M 文件时都导入该数据并进行清理。

Q2.) 那么，一旦我有了清理过的数据，我如何使这些变量可用于 M 文件（我是否必须将它们声明为全局或类似的东西？）

为了清楚起见，我尝试仅调试脚本而不是从命令窗口运行它，如果可能的话，我只是想立即取回基本变量！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:39:56.323

嗯，脚本中使用了错误的清除，这就是所有变量都消失的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T13:04:21.723

放错位置的清除或全部清除可能是问题所在。类似的事情曾经发生在我身上。

# css - Chrome 中奇怪的边框宽度行为 - 浮点边框宽度？

> ID：12863430
> 
> 赞同：22
> 
> 时间：2012-10-12T16:33:51.463
> 
> 标签：css, google-chrome

某些流畅的设计，尤其是那些涉及 %-width iFrames 的设计，似乎会在 Chrome 中导致一些奇怪的舍入类型错误（我有版本 21）。

[这个小提琴](http://jsfiddle.net/uzQJE/14/)演示了这个问题。将边框设置为整数像素值，当您要求它们时返回的值是略小于预期值的浮点数。

在 CodePen 中尝试[完全相同的代码](http://codepen.io/anon/pen/JqFgi)不会产生相同的结果，大概是因为 iFrame 和它周围的其他样式的设置方式不同。

（我也看到了基本宽度和高度属性的这种行为，尽管我无法在 jsFiddle 中复制这部分问题。）

这在 Firefox 或 IE8 中似乎不是问题。

关于具体是什么导致这种奇怪行为以及我如何解决它以获得真正的价值的任何想法？

* * *

情节变厚了。为了解决这个问题，我发现超过 10px 的值似乎不受问题的影响。

此外，根据@GionaF 的评论，它似乎在 Chrome 22 中正常工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-19T14:35:13.523

我目前无法在 Chrome 中重现这种行为，但这种行为很可能与[Subpixel Rendering](https://trac.webkit.org/wiki/LayoutUnit)有关。本质上，Webkit 将使用整数数学进行计算，以避免浮点不精确。

目前似乎`border`不使用亚像素渲染，这可以解释为什么在新的 Chrome 版本中看不到这个问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-24T16:29:44.393

要重现您的问题，我必须更改 Chrome 的缩放级别。将缩放级别更改回 100% 可以修复它。看来是个bug，计算的边框宽度总是小于定义的边框宽度，放大或缩小！

当缩放级别为 110% 时，您的 10px 边框的值为 10，但在 125% 时，它与您的 3px 边框有相同的问题。

编辑：Firefox 有同样的行为！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-24T00:15:35.060

将所有元素的 box-sizing 设置为 border-box 有帮助吗？这将改变计算边界和填充不会影响宽度的盒子模型的方式。

```
*,
*:before,
*:after {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-03T06:43:28.840

我也遇到了`input`s 和其他元素中的边框问题。花了一个小时后，我发现了导致此问题的意外原因。Bootstrap css 使用`normalize css`并且以下代码导致了此类问题：

```
hr {
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
    box-sizing: content-box;
} 
```

为了解决这个问题，我覆盖了 style.css 中的 css：

```
hr {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

该`hr`规则实际上与`input`s 无关，但它有效。这真是出乎意料的行为，试试吧，会奏效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-20T14:29:36.140

我刚刚有另一个例子，铬（铬 76）由`transform: translate()`.

```
<div class='container'>
    <div class="box-triangle"></div>
</div> 
```

`.box-triangle`有一个`::after`元素塑造了一个[边界三角形](https://css-tricks.com/snippets/css/css-triangle/)，它绝对位于`.box-triangle`（填充之后）的顶部。
如果我使用*%* on设置翻译`.container`并且生成的百分比不是整数，则`.box-triangle`边框将在其`::after`元素下方略微显示。

解决方案：使用 px 转换而不是 %，或确保容器尺寸的百分比是整数

*编辑*：如果直接应用转换，则会发生完全相同的事情`.box-triangle`（参见片段中的最后一个示例）

```
* {
  box-sizing: border-box;
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-around;
  min-height: 100vh;
  width: 100%;
  background-color: #e55039;
  font-size: 16px;
}

.box-triangle {
  position: relative;
  margin: 0;
  color: #f7f1e3;
  background-color: #227093;
  font-size: 20px;
  margin: 0;
  padding: 1em;
  border: 5px solid white;
}

.box-triangle::after {
  content: "";
  position: absolute;
  height: 0;
  width: 0;
  margin: 0;
  border: solid transparent;
  left: 50%;
  bottom: 100%;
  border-bottom-color: #227093;
  border-width: 1.5em;
  -webkit-transform: translate(-50%, 0);
  transform: translate(-50%, 0);
}

[class^='container'] {
  margin: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.container-1 {
  position: relative;
  height: 10.5rem;
  width: 20rem;
  /* transform: translate(1%, 1%); */
}

.container-2 {
  position: relative;
  height: 10.5rem;
  width: 20rem;
  transform: translate(0, 5%);
}

.container-3 {
  position: relative;
  height: 10rem;
  width: 20rem;
  transform: translate(0, 5%);
}

.container-4 {
  position: relative;
  height: 168px;
  width: 320px;
  transform: translate(0, 5%);
}

.container-5 {
  position: relative;
  height: 168px;
  width: 320px;
  transform: translate(0, 8px);
}

.noContainer {
  position: relative;
  height: 168px;
  width: 320px;
  transform: translate(0, 5%);
}
```

```
<div class='container-1'>
  <div class="box-triangle">no translate + container height: 10.5 rem (168px)</div>
</div>

<div class='container-2'>
  <div class="box-triangle">translate(0, 5%) + container height: 10.5 rem (168px)</div>
</div>

<div class='container-3'>
  <div class="box-triangle">translate(0, 5%) + container height: 10rem (160px)</div>
</div>

<div class='container-4'>
  <div class="box-triangle">translate(0, 5%) + container height: 168px</div>
</div>

<div class='container-5'>
  <div class="box-triangle">translate(0, 8px) + container height: 168px</div>
</div>

<div class="box-triangle noContainer">No container + translate(0, 5%) + height: 168px</div>
```

# jquery - 仅更改 li 中包含 img 的文本

> ID：12863437
> 
> 赞同：0
> 
> 时间：2012-10-12T16:34:17.440
> 
> 标签：jquery

我有这个 html 代码

```
<ul class="criteria">
<li id="1">
criteria 1
<img id="1" class="save_criterion" src="../images/icons/add-icon-2.png">
<img id="1" class="delete_criterion" src="../images/icons/icon_delete_16x16.png">
</li>
<li id="2">
criteria 2
<img id="2" class="save_criterion" src="../images/icons/add-icon-2.png">
<img id="2" class="delete_criterion" src="../images/icons/icon_delete_16x16.png">
</li>
</ul> 
```

我具有动态更改 li 文本的功能

```
$("input#criterion_name").live("keyup",function(e){
    var newText =  $("input#criterion_name").val();
    if(newText){
    $("ul.criteria > li.selected").html(newText);
    }
    else{
    // can't leave the text filed empty 
    $("#criterion_name").addClass("error"); 
} 
```

问题是当我在输入文本中键入文本时，删除了 li 元素中的图像。我只想更改 li 元素中的文本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:36:13.813

使用`.text()`而不是`.html()`

**编辑**

```
$(".criteria > li").contents().filter(function(){return this.nodeType == 3}).first().replaceWith(newText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:36:40.777

您应该将文本包装在其自己的元素中，例如`span`. 然后你可以这样定位：

```
$("ul.criteria > li.selected > span.thetext").html(newText); 
```

此外，id 属性不应只是数字，并且不应在文档中多次使用，即它应该是唯一的。您有几个实例`id="1"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:42:00.980

将名称包含`li`在 a 中`span`（或您认为有效的任何元素）。然后更改`span`.

小提琴：http: [//jsfiddle.net/LLPya/1/](http://jsfiddle.net/LLPya/1/)

HTML：

```
<input type="text" id="criterion_name" />

<ul class="criteria">
    <li id="1">
        <span class="criteria_name">criteria 1</span>
        <img id="1" class="save_criterion" src="../images/icons/add-icon-2.png">
        <img id="1" class="delete_criterion" src="../images/icons/icon_delete_16x16.png">
    </li>
    <li id="2">
        <span class="criteria_name">criteria 2</span>
        <img id="2" class="save_criterion" src="../images/icons/add-icon-2.png">
        <img id="2" class="delete_criterion" src="../images/icons/icon_delete_16x16.png">
    </li>
</ul>​ 
```

jQuery：

```
$('#criterion_name').keyup(function() {
    var newText = $(this).val();
    if (newText) {
        $('#1 span.criteria_name').html(newText);
    }
});​ 
```

根据您的选择器，您的 HTML 并不完整，所以我只是添加了一个文本框并正在更改第一个`li`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:59:24.610

您可以使用**nodeType**属性仅选择文本并替换它。无需将其值包含在跨度中。

试试这个代码

```
$("ul.criteria > li").contents().filter(function() {
      return (this.nodeType != 1 && this.textContent != '\n')
}).replaceWith('Older Text replaced...');
​ 
```

*   使用`.contents()`获取 li 中的所有内容。
*   然后过滤并仅选择没有回车的文本节点..
*   然后用新文本替换

**[检查小提琴](http://jsfiddle.net/sushanth009/ueabw/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T17:14:48.060

我更喜欢安迪的回答，因为它还允许您进一步操纵该跨度。

所以你的 HTML 代码会变成：

```
<ul class="criteria">
  <li id="1">
    <span class="label_text">criteria 1</span> <!-- wrap in span.label_text -->
    <img id="1" class="save_criterion" src="../images/icons/add-icon-2.png">
    <img id="1" class="delete_criterion" src="../images/icons/icon_delete_16x16.png">
  </li>
  <li id="2">
    <span class="label_text">criteria 2</span> <!-- wrap in span.label_text -->
    <img id="2" class="save_criterion" src="../images/icons/add-icon-2.png">
   <img id="2" class="delete_criterion" src="../images/icons/icon_delete_16x16.png">
  </li>
</ul> 
```

由于元素 ID 在 HTML 文档中必须是[唯一的](http://www.w3schools.com/tags/att_global_id.asp)，并且[按 ID 查找是最快的 jQuery 选择器](http://www.componenthouse.com/article-19)，因此无需按元素类型*和*ID 进行选择。" [.live() 方法已弃用，](http://api.jquery.com/live/) "; 建议我们改用 .on() 方法。因此，当我们添加 Andy 的解决方案时，您的 jQuery 将变为：

```
$('#criterion_name').on('keyup', function() {
    var newText =  $(this).val();
    if(newText.length){
      $('ul.criteria > li > span.label_text').html(newText);
    }
    else{
      // can't leave the text filed empty 
      $('#criterion_name').addClass('error');
    }
});​ 
```

[请参阅我的小提琴以获取工作示例](http://jsfiddle.net/jhfrench/wLnRC/)。

# c# - asp.net c#中的Formview EditItemTemplate

> ID：12863442
> 
> 赞同：3
> 
> 时间：2012-10-12T16:34:34.147
> 
> 标签：c#, webforms, formview

我有一个正在更新的产品表。更新的字段是 category_id、prod_name、prod_desc、prize、status。我正在使用表单视图来进行更新。但是我遇到了 category_id 的问题。category_id 是一个数据绑定下拉列表，使用 sqldatasource 从数据库中的类别表中获取 id 和 name。当产品没有category_id值时，sql默认输入空值。当我在 formview 中进入 edititemtemplate 模式时，问题出现了，下拉列表无法显示 db 中的空值，因此它会引发以下异常：

> “category_idDropdown”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

这是我在 updateprod.aspx 页面中的代码：

```
<asp:DropDownList ID="category_idDropdown" runat="server" 
                AppendDataBoundItems="True"
                AutoPostBack="True"
                DataSourceID="catnames" 
                DataTextField="category_name" 
                DataValueField="category_id" ViewStateMode="Enabled" 
                SelectedValue='<%# Bind("category_id") %>' >
    <asp:ListItem Text="-- Choose Category--" Value="0" Selected="True">
    </asp:ListItem>
</asp:DropDownList> 
```

这是我的 sqldatasource 代码下拉列表数据绑定到：

```
<asp:SqlDataSource ID="catnames" runat="server" 
        ConnectionString="<%$ ConnectionStrings:cloud_Kewl.Properties.Settings.conString %>" 
        SelectCommand="SELECT [category_id], [category_name] FROM [category]">
</asp:SqlDataSource> 
```

& 最后这是用于更新产品详细信息的 sqldatasource：

```
<asp:SqlDataSource ID="productUpdate" runat="server" 
        ConnectionString="<%$ ConnectionStrings:cloud_Kewl.Properties.Settings.conString %>"             
        SelectCommand="SELECT prod_id, category_id, prod_name, prod_desc, prod_price, img_name, img_contenttype, prod_img, status FROM product WHERE (prod_id = @prod_id)"    
        UpdateCommand="UPDATE product SET category_id = @category_id, prod_name = @prod_name, prod_desc = @prod_desc, prod_price = @prod_price, status = @status WHERE (prod_id = @prod_id)">
    <SelectParameters>
        <asp:QueryStringParameter Name="prod_id" QueryStringField="prod_id" Type="Int32" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="category_id" Type="Int32" DefaultValue="0" />
        <asp:Parameter Name="prod_name" Type="String" />
        <asp:Parameter Name="prod_desc" Type="String" />
        <asp:Parameter Name="prod_price" Type="Decimal" />
        <asp:Parameter Name="status" Type="String" />
        <asp:Parameter Name="prod_id" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

我在这个站点中查找了有关 formview 和 edititemtemplate 的问题，但没有一个能够让我知道如何解决这个问题。我试图以编程方式解决它，但没有成功解决这个问题。请帮帮我，我找了 3 周的解决方案。没有成功:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:20:08.470

在设置空值之前尝试重新绑定您的数据源：

```
protected void myFormView_OnItemEditing(object sender, ListViewEditEventArgs e)
{
    DropDownList category_idDropdown = (DropDownList)(myFormView.FindControl("category_idDropDown"));
    category_idDropdown.DataBind();        
    category_idDropdown.Items.Add(0, new ListItem("Select", null));
} 
```

问题可能不是您尝试选择一个不存在的值，而是您尝试将*已经具有*空值的 DropDownList 绑定到不包含该值的数据源。

# c# - WinForms应用程序中表单之间的交互，c#

> ID：12863443
> 
> 赞同：0
> 
> 时间：2012-10-12T16:34:41.467
> 
> 标签：c#, winforms, controls

伙计们！我在应用程序中有 2 个表单 - 工作表单 (frmMain) 和设置表单 (frmSettings)。frmSettings 上有两个按钮 - 保存和取消。在 frmMain 我使用以下方法来显示 frmSettings：

```
 private void btnSettings_Click(object sender, EventArgs e)
        {
            frmSettings = new SettingsForm();
            frmSettings.ShowDialog();
            // ...
        } 
```

问题是我不知道如何检测 frmMain 上按下了哪个按钮 - 保存或取消。程序的进一步逻辑取决于这个事实。我需要这样的东西：

```
private void btnSettings_Click(object sender, EventArgs e)
        {
            frmSettings = new SettingsForm();
            frmSettings.ShowDialog();

            if(/* frmSettings.SaveButton.WasClicked == true */)
            {
                InitializeServices();
            }
            // ...
        } 
```

请给我一个建议，如何在表单之间实现这种交互。最好不使用全局变量来保存按钮状态。预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:40:43.397

ShowDialog 返回一个 DialogResult 对象，让您知道这一点。你必须：

在保存按钮的点击事件上，设置`this.DialogResult`为`DialogResult.OK`

在取消按钮的点击事件上，设置`this.DialogResult`为`DialogResult.Cancel`

```
private void btnSettings_Click(object sender, EventArgs e)
{
   frmSettings = new SettingsForm();
   if(frmSettings.ShowDialog() == DialogResult.OK)
   {
       InitializeServices();
   }
   //.......    
} 
```

**编辑以管理 DialogResult 作为@tsiorn 的答案：设置表单的 DialgoResult 设置为在每个按钮上设置该属性。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:41:30.230

您应该使用 DialogResult 来处理这个问题。在表单设置窗口中，您可以将结果设置为：

```
protected void btnSave_Click(object sender, EventArgs e) {
    DialogResult = System.Windows.Forms.DialogResult.OK
    this.close;
}
protected void btnCancel_Click(object sender, EventArgs e) {
    DialogResult = System.Windows.Forms.DialogResult.Cancel;
    this.close;
} 
```

然后 ...

```
private void btnSettings_Click(object sender, EventArgs e) 
        { 
            frmSettings = new SettingsForm(); 
            frmSettings.ShowDialog(); 

            if(frmSettings.DialogResult == DialogResult.OK) 
            { 
                // save
                InitializeServices(); 
            } 
            //  ... 
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:40:24.567

从可能值的枚举开始：

```
public enum ExitMethod
{
    Other, //this should be first, as a default value
    Save,
    Cancel,
    Error
} 
```

然后在`SettingsForm`该类型上创建一个属性：

```
public ExitMethod ExitMethod { get; private set; } 
```

在 SettingsForm 的保存/退出方法中，将该属性设置为适当的枚举值，在主窗体中您可以读取该属性值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:43:45.050

在 frmSettings 窗口中，您可以处理按钮上的 Click 事件。然后设置对话结果：

```
void frmSettings_Save_Click(object sender, EventArgs e)
{
  this.DialogResult = DialogResult.OK;
}

void frmSettings_Cancel_Click(object sender, EventArgs e)
{
  this.DialogResult = DialogResult.Cancel;
} 
```

在主窗体中，您可以执行以下操作来捕获和评估结果：

```
DialogResult answer = frmSettings.ShowDialog();
if (answer == DialogResult.OK)
{
  ...
} 
```

可以在此处找到其他信息和用法：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx)

# c# - 根据用户运行的应用程序从不同 dll 中的资源文件设置标签？

> ID：12863445
> 
> 赞同：0
> 
> 时间：2012-10-12T16:34:54.710
> 
> 标签：c#, winforms, resx

我要求标签具有不同的值，具体取决于运行应用程序的人员，因此我考虑为每种用户类型创建一个 dll，并且在 dll 中，会有一个资源文件保存标签值。在运行时，根据指定目录中的哪个 dll，它将使用 dll 中找到的资源来设置标签值。

```
1) Are multiple dll's necessary in this case?
2) If it is multiple dll's, is MEF or something similar necessary here or can it 
   be done without it? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:28:26.397

建议的解决方案绝对是矫枉过正。您打算如何交换 dll 以进行部署？您是否可以控制每个用户将要下载/安装的软件包？

我的第一印象是，我更容易使用/维护一个具有字符串属性的类，这些属性根据输入参数返回不同的设置值。

IE

```
public String FirstResourceEntry
{
    get
    {
        switch(userTypeEnum)
        { 
          case userType1:
               return "SetValue1";
               break;
          case: userType2:
                return "SetValue2";
                break;
    }
} 
```

这种方式与您的应用程序的耦合更紧密一些，因为如果您想更改值，它将需要重新构建，但机智还允许您将相同的应用程序/文件集分发给所有潜在用户。

# regex - Emacs：如何复制正则表达式匹配？

> ID：12863450
> 
> 赞同：4
> 
> 时间：2012-10-12T16:35:12.770
> 
> 标签：regex, emacs

我只是尝试使用正则表达式搜索/突出显示缓冲区中的文本并复制它。我不想要整条线，只想要比赛。有任何想法吗？

我有大量包含标签“[12345][09876]”的文本行，我想用正则表达式复制所有标签。

例如

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit [12345][09876], 
sed diam nonummy [12345][123456] nibh euismod tincidunt ut laoreet dolore 
magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud [54321][09876] 
exerci tation ullamcorper suscipit lobortis nisl ut aliquip [23451][09656] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:04:10.053

是的，增量搜索不会移动点位置，因此 yank 不会复制匹配项。

最简单的解决方案可能如下。

定义一个复制搜索匹配的函数：

```
(defun copy-isearch-match ()
    (interactive)
    (copy-region-as-kill isearch-other-end (point))) 
```

并将其添加到搜索模式地图

```
(define-key isearch-mode-map (kbd "M-w") 'copy-isearch-match) 
```

然后`M-x isearch-forward-regexp`你可以按`M-w`复制比赛。

# jquery - jquery ajax jsonp：此页面正在访问不受其控制的信息

> ID：12863451
> 
> 赞同：2
> 
> 时间：2012-10-12T16:35:16.130
> 
> 标签：jquery, ajax, jsonp

我正在尝试解决 Jquery 跨域问题。

使用以下代码，我在 IE 中获得“此页面正在访问不受其控制的信息..”

```
$.ajax({
    type: "Post",
    url: "http://Webbie/WS.asmx/TrackLink",
    data: params,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: true,
    cache: true,
    success: function (msg) {
       alert('success');
    },
    error: function (request, status, error) {
       alert('error')
    }
}); 
```

我收到了 IE 消息，一旦我批准我就会达到“成功”警报。

我尝试用以下代码将 json 替换为 jsonp（只是将数据类型从“json”更改为“jsonp”）

```
$.ajax({
    type: "Post",
    url: "http://Webbie/WS.asmx/TrackLink",
    data: params,
    contentType: "application/json; charset=utf-8",
    dataType: "jsonp", // just added the p
    async: true,
    cache: true,
    success: function (msg) {
       alert('success');
    },
    error: function (request, status, error) {
       alert('error')
    }
}); 
```

使用上面的 jsonp 代码，我收到错误 500。

为什么我收到错误 500？跨域问题的最佳选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:52:52.447

无法通过简单的 JSONP 进行 POST。

阅读这个问题的答案：

[jquery $.ajax jsonp](https://stackoverflow.com/questions/7202603/jquery-ajax-jsonp)

# asp.net-mvc-3 - ASP.NET MVC 3 - 存储库中的单元测试

> ID：12863452
> 
> 赞同：1
> 
> 时间：2012-10-12T16:35:17.043
> 
> 标签：asp.net-mvc-3, unit-testing, entity-framework-4.1, ef-code-first

我正在使用一个类测试来检查正在正确完成的登录实体，但发生错误似乎没有返回数据库中的查询，但是在 ASP.NET MVC 3 Code First 查询中开发的应用程序返回数据，我想知道什么是错的以及可以做些什么来解决它。

查询返回后，变量中会显示以下消息： ***“枚举未产生结果”***

测试方法：

```
[TestMethod()]
public void efetuarLoginTest()
{
            EntidadeRepository target = new EntidadeRepository();
            string cnpj = "12345678";
            string senha = "lalado";
            Entidade expected = null; // TODO: Initialize to an appropriate value
            Entidade actual;
            actual = target.efetuarLogin(cnpj, senha);
            Assert.AreNotEqual(expected, actual);
} 
```

具有返回登录查询任务的实体的方法存储库：

```
public Entidade efetuarLogin(string cnpj, string senha)
        {

            var consulta = from usu in bd.Entidades
                           where usu.cnpj == cnpj && usu.senha == senha
                           select usu;

            if (consulta.Count() > 0)
            {
                Entidade e = new Entidade();
                e.id_entidade = consulta.First().id_entidade;
                e.razao_social = consulta.First().razao_social;
                e.cnpj = consulta.First().cnpj;
                e.senha = consulta.First().senha;

                return e;
            }
            else
            {
                return null;
            }
        } 
```

使用 Entity Framework 4.1 的类持久性数据库：

```
internal class BancoDados: DbContext
    {
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<System.Data.Entity.ModelConfiguration.Conventions.PluralizingEntitySetNameConvention>();
            modelBuilder.Conventions.Remove<System.Data.Entity.ModelConfiguration.Conventions.PluralizingTableNameConvention>();

            base.OnModelCreating(modelBuilder);
        }

        public DbSet<Entidade> Entidades { get; set; }
        public DbSet<Estado> Estados { get; set; }
        public DbSet<Administrador> Administradores { get; set; }
        public DbSet<Leilao> Leiloes { get; set; }
        public DbSet<Lance> Lances { get; set; }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:07:43.580

我会想象

```
if (consulta.Count() > 0) 
```

抛出错误？

你可以把它改成

```
if (consulta != null && consulta.Count() > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:16:59.103

对我们来说，这种错误是由于没有传递给 EF 的正确连接字符串而产生的。如果您使用的是 NUnit，NUnit 不使用您的 app.config 或 web.config，您必须创建您的 assembly.dll.config 或 nunit project.config。请查看 NUnit 文档以了解配置文件的使用。

您可以通过在调试模式下检查 DbContext.Database 及其属性来验证传递给 NUnit 的连接字符串/

检查您的配置值，应该可以解决您的问题。

# c# - 类派生自具有一次性成员的一次性类

> ID：12863453
> 
> 赞同：2
> 
> 时间：2012-10-12T16:35:27.897
> 
> 标签：c#, garbage-collection, idisposable, tcpclient

我有一些关于一次性课程的问题。假设我有一个`IDisposable`具有一些一次性成员的实现类。我已经实现了该`Dispose()` 方法，即：

```
class BaseCustom: IDisposable
{
    private System.Net.Sockets.TcpClient tc;
    private System.Net.Sockets.NetworkStream ns;
    public string str;
    public int i;

    public BaseCustom(string host, int port)
    {
        tc = new System.Net.Sockets.TcpClient(host, port);
        ns = tc.GetStream();
    }

    // some other methods work on members (i, str, tc, ns)

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (ns != null)
            {
                ns.Close();
                ns = null;
            }
            if (tc != null)
            {
                tc.Close();
                tc = null;
            }
        }
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

**Q1)**既然没有非托管资源，可以压制finalizer吗？（在此处阅读代码中的[注释](http://msdn.microsoft.com/en-us/library/ms244737.aspx)）

**Q2)**既然我们处理了一次性成员并压制了 GC，那么这里的成员`int`和`string`成员会发生什么？我们是否也需要处理它们？

**Q3)**电流释放是否`tc`合适`ns`？我看到不同版本的 .NET 引用中关于调用`Close()`与调用的差异。`Dispose()`

现在假设我们有一个派生类：

```
class DerivedCustom : BaseCustom
{
    public string cstr;
    public int ci;

    public DerivedCustom(string host, int port)
        : base(host, port)
    {}

    // some extra methods
} 
```

**Q4）**可能与Q2有关；我们需要在这里覆盖任何`Dispose()`s 吗？我们不会在派生类中引入任何非托管或一次性资源。保持原样是否安全（即相信基地的处置机制）？如果GC 被抑制（它在派生中也被抑制，对吧），`ci`会发生什么？`cstr`也与 Q1 相关，我们是否需要任何终结器？

**Q5)**如果基类是抽象类怎么办？

**Q6）**这很有趣；原样的代码没有给出关于 FxCop 1.36 中可处置性的任何警告。但是，如果我将一次性成员添加到`DerivedCustom` **并且**仍然不覆盖一次性方法（因此不处理新成员），例如：

```
class DerivedCustom : BaseCustom
{
    public string cstr;
    public int ci;
    // below is the only extra line
    public System.Net.Sockets.TcpClient ctc = new System.Net.Sockets.TcpClient("ho.st", 1234);

    public DerivedCustom(string host, int port)
        : base(host, port)
    {}

    // some extra methods
} 
```

在 FxCop 中仍然没有收到任何警告。这有点让我吃惊，因为处置`ctc`似乎没有得到妥善处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:43:43.960

A1) 如果没有非托管资源，请不要在类中添加终结器。终结器对于清理非托管资源很有用；GC 将自行处理托管资源。

A2) SuppressFinalize 不会阻止对象被垃圾收集；它只会阻止 GC 调用对象的终结器。未装箱的整数永远不会被垃圾收集，因为它们是值类型；字符串将像往常一样被垃圾收集。

A3) 我会调用 Dispose，而不是 Close，因为 Dispose 保证具有 Dispose 语义，而 Close 可能会做一些稍微不同的事情。

A4）如果派生类没有增加新的dispose要求，不要重写Dispose方法。

A5) 如果基类是抽象类，那也没什么区别。

A6) 我对 FXCop 的了解不够，无法回答，抱歉。

此外，没有理由将字段设置为空。例如，在没有非托管资源的情况下，Dispose 方法应如下所示（编辑：重新阅读问题中链接的 FXCop 页面后，我要补充一点，在这种情况下，该类应该被密封）：

```
public void Dispose() 
{ 
    if (ns != null) 
    { 
        ns.Dispose(); 
    } 
    if (tc != null) 
    { 
        tc.Dispose(); 
    } 
} 
```

但是，如果该类可能具有包含非托管资源的派生类型，那么您应该坚持使用经典模式，并从您的示例中进行一些修改：

```
protected virtual void Dispose(bool disposing)         
{         
    if (disposing)         
    {         
        if (ns != null)         
        {         
            ns.Dispose();         
        }         
        if (tc != null)         
        {         
            tc.Dispose();         
        }         
    }         
}         

public void Dispose()         
{         
    Dispose(true);         
    GC.SuppressFinalize(this);         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:45:32.523

Q1：是的。

Q2：不。它们是 100% 托管类型，GC 会处理它们。`IDisposable`适用于沿继承或组合线某处需要处置非托管资源的类型。比如`tc`和`ns`。

Q3：打电话`Dispose()`。这是惯用的，一个好的实现会调用它自己的`Close()`.

Q4：不，不需要覆盖。你在哪里抑制 GC - 你正在抑制 GC 运行*终结*器，因为你已经运行了`Dispose()`.

Q5：与 Q4 没有区别。

Q6：是的，FxCop 的规则有误报和漏报`IDisposable`。遵循最佳实践并忽略 FxCop 中看似可疑的内容，您会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:46:23.457

您应该考虑在实现 IDisposable 接口（**Dispose Pattern**）的基类中实现终结器。

IDisposable 接口用于释放本机资源。`Int32`或被`String`管理资源并由 GC 收集。

如果该类使用非托管/本机资源，则基类是抽象类还是具体类都没有关系。

即使派生类没有定义任何新资源但该类继承了基类功能，这意味着派生类对象将使用本机资源。即使您跳过在派生类中声明终结器但在基类中定义了终结器，基类终结器也足以指示 GC 在内存收集期间运行终结器。

调用是可以的（事实上必须），`GC.SuppressFinalize`因为它从 F-Reachable 队列中删除条目并帮助 GC 在第一次扫描时收集对象内存。

# python - 打印时多余的空格

> ID：12863454
> 
> 赞同：0
> 
> 时间：2012-10-12T16:35:34.100
> 
> 标签：python, whitespace, string-formatting

我已经阅读了许多 python 空格删除问题和答案，但无法找到我正在寻找的内容。这是一个小程序，显示了该问题的具体示例。我非常感谢您的帮助。

```
import random

math_score = random.randint(200,800)
math_guess = int(input("\n\nWhat score do you think you earned on the math section (200 to 800)?\t"))
print ("\n\n\nOn the math section, you guessed",math_guess,", and your actual score was",math_score,"!") 
```

所以这是我的问题：

当我执行程序时，我得到以下结果：

`On the math section, you guessed 600 , and your actual score was 717 !`

我想删除句子中每个变量后面的空格。在这种情况下，600 和“，”之间的空格以及 717 和“！”之间的空格。

有没有解决这个问题的标准方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:38:29.490

是的，[格式化](http://docs.python.org/library/string.html#formatstrings)你的字符串：

```
print("... you guessed {}, and ... was {}!".format(math_guess, math_score)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:37:35.123

您需要将整行[格式化](http://docs.python.org/library/stdtypes.html#str.format)为单个字符串，然后打印该字符串。

```
print ("\n\n\nOn the math section, you guessed {0}, and your actual score was {1}!".format(math_guess, math_score)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:39:45.567

```
print ("\n\n\nOn the math section, you guessed",math_guess,", and your actual score was",math_score,"!", sep ='') 
```

如果这是 py3+ 我想

```
print ("\n\n\nOn the math section, you guessed"+str(math_guess)+", and your actual score was"+str(math_score)+"!") 
```

如果没有应该工作

或按照其他人的建议使用字符串格式...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:42:45.280

试试这个：

```
print "\n\n\nOn the math section, you guessed %d and your actual score was %d!" % (math_guess, math_score) 
```

您可以在[内置类型中阅读更多内容](http://docs.python.org/library/stdtypes.html#string-formatting)

# c - 使用预处理器指令在 C 中定义泛型函数

> ID：12863455
> 
> 赞同：3
> 
> 时间：2012-10-12T16:35:46.003
> 
> 标签：c, function, generics, c-preprocessor, preprocessor-directive

我刚从 C# 来到 C，并正在寻找一种方法来定义像 C# 中的泛型函数。我遇到了[这篇文章](https://stackoverflow.com/questions/894167/functional-programming-in-c-with-macro-higher-order-function-generators#_=_)，但是当我试图编译它时，我得到了一堆错误（“`n' undeclared here (not in a function)”、“在“array”之前的语法错误”等）这是我的代码：

```
#include<conio.h>
#include<stdlib.h>

#define MAKE_PRINTEACH(TYPE)\
void printeach_##TYPE (TYPE[n] array, int n, void(*f)(TYPE)){\
  int i;\
  for(i = 0; i < n; i++) {\
    f(array[i]);\
  }\
}

MAKE_PRINTEACH(int)
MAKE_PRINTEACH(float)

void printInt(int x)
{
     printf("got %d\n",x);
}

void printFloat(float x)
{
     printf("got %f\n",x);
}

int main()
{
    int[5] ia = {34,61,3,6,76};
    float[6] fa = {2.4,0.5,55.2,22.0,6.76,3.14159265};

    printeach_int(ia, 5, printInt);
    printeach_float(fa,6,printFloat);

    getch();
} 
```

我在这里做错了什么？如果这有所作为，我正在使用 DevC++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:38:50.260

正确的版本看起来像这样

```
#define MAKE_PRINTEACH(TYPE)                                     \
void printeach_##TYPE (size_t n, TYPE array[n], void(*f)(TYPE)){ \
  for(size_t i = 0; i < n; i++) {                                \
    f(array[i]);                                                 \
  }                                                              \
} 
```

总结一下您的版本出了什么问题：

*   `n`必须在使用前声明
*   数组边界在标识符之后
*   数组大小的语义正确类型和类似的东西是`size_t`
*   C 因为 C99 也有`for`循环的局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:41:49.570

您可以尝试这种变化：

```
#define MAKE_PRINTEACH(TYPE)\
void printeach_##TYPE (TYPE * array, int n, void(*f)(TYPE)){\
  int i;\
  for(i = 0; i < n; i++) {\
    f(array[i]);\
  }\
} 
```

~~这`TYPE[n] array`意味着编译器支持 VLA（可变长度数组），我不知道您的编译器是否支持。~~

~~`gcc`添加命令行选项`-std=c99`将使原始代码编译。~~

**更新：** 按照 Jens 的评论进行了更正。

我建议的解决方案是简单地将指针传递给数组（如 OP 中所建议的）将包含的类型的变量。这样做就是将数组传递给函数的方式。它们通过引用传递。

Jens 还提到了其他几个警告/错误。有：

1`conio.h`不是标准的 C 包含，`stdio.h`在这里应该是合适的

2 数组是通过将数组的大小添加到变量名而不是类型来声明的。必须是：`int ia[5]`不是`int[5] ia`

3 return ，OP 不返回任何东西`main()`。`int`

`getch()`4缺少原型。可能想包括`curses.h`

# html - 如果缺少其他 div，则扩展 div 宽度

> ID：12863458
> 
> 赞同：0
> 
> 时间：2012-10-12T16:36:01.417
> 
> 标签：html, css

我在一个浮动到左侧的容器中有两个 div。在某些容器中，缺少左 div，所以我想这样做，以便如果缺少左 div，则右 div 应该扩展到容器的全宽。

在下面的代码中，我指定了右 div 的宽度，因此如果缺少左 div，它不会填满整个容器。

这是代码：

**HTML：**

```
<div class="box">
    <div class="left"><img src="http://i50.tinypic.com/2cxj31z.jpg" ></div>
    <div class="right">... content...</div>
</div> 
```

**CSS：**

```
.box{
    width: 300px;    
    border: 1px solid red;
    margin: 0 auto;
    overflow: hidden;
}

.left{
    width: 80px;
    margin-right: 10px;
    float: left;
}

.right{
    float: left;
    width: 210px;
} 
```

**JSFiddle：http:** [//jsfiddle.net/DMFz8/](http://jsfiddle.net/DMFz8/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:38:02.887

您可以使用[相邻的选择器](http://meyerweb.com/eric/articles/webrev/200007a.html)，这样只有在它旁边`.right`有一个时才会浮动。`.left`

将`.right`选择器和规则替换为：

```
.left + .right{
    float: right;
    width: 210px;
} 
```

[**演示**](http://jsfiddle.net/gionaf/3A5dK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:47:16.577

我不知道你到底想要什么，但试试这个可能会有所帮助

```
<div class="box">
 <div class="left"><img src="http://i50.tinypic.com/2cxj31z.jpg" ></div>
   Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras eget ligula sapien, sed tempor felis. Vivamus eget bibendum augue. Sed sit amet nulla lectus. Etiam vitae lacus ipsum. Aliquam malesuada orci nec ipsum pretium fermentum. Fusce libero mauris, convallis ut aliquam et, scelerisque vel turpis. 
</div> 
```

[jsFiddle](http://jsfiddle.net/DMFz8/2/)

# scons - 获取 SCONS Substfile 以将键替换为“${SOMETHING}”

> ID：12863459
> 
> 赞同：1
> 
> 时间：2012-10-12T16:36:02.617
> 
> 标签：scons

我正在使用 SCONS 并使用 Substfile() 从模板生成新文件。我通过 Substfile() 的 SUBST_DICT 参数提供了一个替换字典。

在我的替换字典中，我有一个值为“${SOMETHING}”的键“@DUMMY@”。

当 SCONS 进行替换时，@DUMMY@ 被替换为空白。我怎样才能让它填写 ${SOMETHING} 呢？

我尝试了各种转义： "\${SOMETHING}": 无效的转义序列 "\${SOMETHING}": 替换为 "\${SOMETHING}"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:41:19.480

刚刚在一些 Python 文档中找到了答案。用额外的 $ 转义值解决了这个问题。

所以设置“@DUMMY@”等于“$${SOMETHING}”解决了这个问题。

# asp.net - MSChart - 具有多个起点和终点的条形图

> ID：12863460
> 
> 赞同：0
> 
> 时间：2012-10-12T16:36:05.633
> 
> 标签：asp.net, vb.net, mschart

我希望有人可以帮助我在条形图上设置点，每个系列都有多个起点和终点。请注意，第一个和最后一个条形都有多个起点和终点。

![示例条形图](../Images/85f7596ead77e96b6fe810f1c01753fc.png)

任何教程或示例代码将不胜感激。抱歉图片太小了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:42:57.513

您正在寻找的是范围条形图

`chart.Series[0].ChartType = SeriesChartType.RangeBar;`

与 MSchart 一样，我建议您查看[此处](http://archive.msdn.microsoft.com/mschart)提供的示例。它有一个部分演示如何使用 RangeBar 图表来实现您所描述的内容。

# javascript - 在不同的文件中为 js 获取 VS javascript intellisense

> ID：12863461
> 
> 赞同：35
> 
> 时间：2012-10-12T16:36:09.713
> 
> 标签：javascript, visual-studio, intellisense

所以我在我的javascript文件顶部定义了我的“枚举”：

```
var loaderOptions = { "SHOW": 0,
    "CHANGEPAGE": 1,
    "HIDE": 2
}; 
```

我希望这个枚举用于稍后使用的实用程序函数（ showLoader(miliseconds, elementOrPageID, option, textMessage, callbackFunc) {} ）。

当我调用枚举/变量时，这一切都非常好，因为我有智能感知![在此处输入图像描述](../Images/14ea80696e2b18d62b8b3276b6773330.png)

但是，我想将函数及其枚举从我的主文件中移出到一个实用程序文件中……我可以使这项工作很好，但我失去了智能……任何技巧可以保持这种能力？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-12T16:41:12.800

在 JavaScript 文件顶部添加引用指令

```
/// <reference path="file1.js" /> 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb385682%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-02T10:40:09.813

Mads Kristensen在该文件上[的博客文章](http://madskristensen.net/post/the-story-behind-_referencesjs)`_references.js`显示了一种比 epascarello 在[他的回答](https://stackoverflow.com/a/12863533/575530)中提到的更新的处理方法。以下是 Mads 帖子中的一段话：

> 输入 _references.js。
> 
> 此文件必须（默认情况下）位于根目录下名为 /scripts/ 的文件夹中。这就是命名约定。位于 /scripts/_references.js 的任何文件都会自动添加到全局 Intellisense。这是我们现在唯一需要三斜杠引用的文件。该文件的内容可能如下所示：

```
/// <reference path="modernizr-2.6.2.js" /> 
/// <reference path="jquery-1.10.2.js" /> 
/// <reference path="bootstrap.js" /> 
/// <reference path="respond.js" /> 
```

> 只是一堆参考。这也是 Intellisense 始终默认包含的唯一文件。

# node.js - Array.sort 和 Node.js

> ID：12863466
> 
> 赞同：7
> 
> 时间：2012-10-12T16:36:17.883
> 
> 标签：node.js

Array.sort 是否会从头到尾阻塞 node.js 中的主线程？如果是，是否有一个库可以进行增量排序（即一个数组排序，它将按块排序，可能使用 Process.nextTick ？）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:54:20.053

你们认为的简短答案是否定的。

更多的是一个概念性的答案，异步是为了解决等待资源问题，而不是繁重的计算

话虽如此，没有什么能阻止您在另一个进程中运行排序并与它异步通信

我只是特别注意两件事：如果启动需要一些时间，不要为每种类型启动一个新进程可能是一个好主意。如果您有一个大数组，请注意您正在排序的内存副本，如果您必须这样做，您可以只返回数组中的有序索引；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T23:46:45.480

# 在单独的线程中排序

不要与多线程排序混淆，[这个 HTML5 Web Workers 演示向您展示了如何在单独的线程中进行排序，](http://afshinm.github.io/50k/)从而释放主线程来做其他事情。

# entity-framework - 具有遗留支持的基于实体框架的工具的多目标开发

> ID：12863470
> 
> 赞同：0
> 
> 时间：2012-10-12T16:36:37.837
> 
> 标签：entity-framework

我正在开发一个（免费的、开源的）实体框架工具，它基本上是一个 ADO.NET 提供程序，但它也使用了一些更高的抽象（例如 ObjectContext、EntityConnection）。我希望它支持几乎所有旧版本的 EF (EF4=<)。在 EF5 出现之前，这很容易，因为我已经能够通过仅针对 .NET40 来开发它。

EF5 使事情变得更加复杂，因为一些新功能需要 .NET45 框架。另一方面，EF5 也支持 .NET40。最重要的是，EF 现在是独立于 .NET 框架开发的。

目前，很明显，同时针对 .NET40 和 .NET45 是不可避免的。但是目前我不知道建立一个可以符合独立开发的EF的多目标环境的最佳方法是什么。我也没有找到任何关于这个问题的好文档。

我应该使用多个解决方案文件吗？多个项目文件？多种解决方案配置？以某种方式引用所有版本的EF？创建一个通用的构建脚本？如果是，如何？如何针对不同的配置运行我的单元测试？如何指示测试可以/应该在特定配置中失败？更改后的命名空间（例如 ObjectContext）呢？我应该使用#if 指令来解决这个冲突吗？如果新的 EF 版本需要实现会破坏与以前版本的兼容性的功能怎么办？在这一点上我真的很不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:34:49.150

[查看http://entityframework.codeplex.com/](http://entityframework.codeplex.com/)上的 EF6 代码库。我们基本上按照您建议的方式为 .NET 4 和 .NET 4.5 构建 EF6 - 使用多个构建配置。

需要考虑的其他几点：

*   如果您不使用任何 .NET 4.5 API 或行为，那么您可以只针对 .NET 4 版本。如果您使用 EntityFramework.dll 中的任何内容，则可能需要绑定重定向才能使用 5.0 版本，但在很多情况下，如果您作为 NuGet 包发布，那么 NuGet 将为您处理此问题。
*   如果您计划支持 EF6，请记住核心类型已从 .NET Framework 中移出。例如，这意味着 EF5 ObjectContext 是与 EF6 ObjectContext 不同的类型。您可能必须编译您的提供程序代码两次以创建 EF6 和 EF5 版本才能处理此问题。更多信息可以在这里找到：[http ://entityframework.codeplex.com/wikipage?title=Rebuilding%20EF%20providers%20for%20EF6](http://entityframework.codeplex.com/wikipage?title=Rebuilding%20EF%20providers%20for%20EF6)

# drupal - Drupal 7 视图 3 字段模板

> ID：12863472
> 
> 赞同：1
> 
> 时间：2012-10-12T16:36:53.443
> 
> 标签：drupal, views

我已经在世界各地寻找这个问题的答案。这在 Views 2 中有很好的记录，但没有提到 Views 3。

我只是想访问字段模板中的其他字段值。谁能清楚地解释如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:33:04.410

在字段模板文件中，您将有权访问`$row`包含当前行的所有字段的变量。用于`dsm($row)`检查其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:07:01.050

请参阅[文档`views-view-field.tpl.php`](http://api.drupal.org/api/views/theme!views-view-field.tpl.php/7)：

您应该有权访问完整的`$view`对象，您可以在其中深入了解您需要的任何字段。

# razor - 在 NancyFX 中将复杂类型作为剃刀模型传递时的 YSOD

> ID：12863474
> 
> 赞同：3
> 
> 时间：2012-10-12T16:36:58.930
> 
> 标签：razor, nancy

`IEnumerable<string>`在将类型模型发送到 NancyFX 中的 Razor 视图时，我得到了 YSOD 。如果提供一个字符串作为模型，并且`@model`在视图中带有相关语句，那么一切都会正常工作，因此*它*可以正常工作。

错误是

> 无法通过 System.Collections.Generic.IEnumerable 的名称发现模型的 CLR 类型。确保传递给视图的模型可分配给视图中声明的模型。

我错过了什么？

查看.cshtml

```
@model System.Collections.Generic.IEnumerable<System.String>
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <h1></h1>
    @foreach (var item in Model)
    {
        <h3>@item</h3>
    }
</body>
</html> 
```

模块

```
public class MyModule: NancyModule
{
    public MyModule()
    {
        Get["/"] = parameters => View["View", this.GetModel()];
    }

    private IEnumerable<string> GetModel()
    {
        return new[] { "one", "two" };
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:35:21.850

问题似乎`@model`是南希不支持该指令。用正确的类型交换`@model`a可以解决问题：`@inherits`

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<My.ViewModels.WhateverViewModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T17:40:58.277

除了[Greg B 的回答](https://stackoverflow.com/a/12935564/26463)`@model`之外，尽管从[Nancy Razor 视图引擎](https://github.com/NancyFx/Nancy/wiki/Razor-View-Engine)页面中并不清楚这一点，它仍然是 RazorEngine 中为 Nancy 保留的术语。

因此，您不能使用名称声明变量并使用例如`model`引用它；`@model.Property`视图引擎仍会尝试将其绑定到模型，即使这实际上不起作用（[Razor View Engine 第 354 行](https://github.com/NancyFx/Nancy/blob/master/src/Nancy.ViewEngines.Razor/RazorViewEngine.cs#L354)）并且您将收到相同的错误。

# google-plus - Google Plus - Plus One Button 政策

> ID：12863482
> 
> 赞同：-3
> 
> 时间：2012-10-12T16:37:32.537
> 
> 标签：google-plus, google-plus-one

我们是一家电子商务零售商，在阅读本隐私政策后，我们感到非常困惑。我们希望在我们的网站上实施的功能是为分享提供折扣，另外还有一个我们的 google plus 页面，因此需要认真的帮助，因为我们不想在此政策方面遇到麻烦。我们想代表 plus 1 给我们的 google plus 页面打折，这样他们就可以在他们的个人资料中收到我们的促销和其他营销细节，那么这项政策是否会影响我们？我们了解加一我们网站页面的重要性，因为它会影响谷歌搜索排名，但我们认为它不会影响加一谷歌加页面的任何内容。我们需要认真的帮助才能尽快实施此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:12:28.710

来自 Google+ +1 按钮政策：“发布商不得宣传奖品、金钱或货币等价物以换取 Google+ 按钮点击。”

（https://developers.google.com/+/plugins/buttons-policy）

不幸的是，您打算提供折扣以换取 +1 直接违反了这一点。

您应该考虑创建一个 Google+ 信息页并通过该信息页与您的用户互动。您可以通过帖子推广您的业务并获得更多关注者。此外，通过 Google+ 信息页，您可以为您的网站创建一个徽章，该徽章将链接回您的信息页以增加社交参与度。

（https://developers.google.com/+/plugins/badge/）

# linux - fgrep 还是 egrep？

> ID：12863487
> 
> 赞同：-1
> 
> 时间：2012-10-12T16:37:42.847
> 
> 标签：linux, string, shell, unix, grep

我有两个文件：usednaslist 和 naslist 使用 RHEL5

**用过的鼻涕虫**

> 文件：/vol/EQIMS/build
> 
> 文件：/vol/iquad_dev/FAST_dev

**鼻涕虫**

> server12 SunOS filera:/vol/EQIMS/build /users/uxsrvlogs
> 
> 服务器3 SunOS filera:/vol/iquad_dev/FAST_dev /mnt
> 
> server4 SunOS filerb:/vol/Security /users/em_master

**预期输出是**

> server4 SunOS filerb:/vol/Security /users/em_master

**我试过的**

```
cat naslist | grep -vf usednaslist 
```

无输出

```
cat naslist | egrep -vf usednaslist 
```

无输出

```
cat naslist | fgrep -vf usednaslist 
```

无输出

```
cat naslist | fgrep -xvf usednaslist 
```

server12 SunOS filera:/vol/EQIMS/build /users/uxsrvlogs

服务器3 SunOS filera:/vol/iquad_dev/FAST_dev /mnt

server4 SunOS filerb:/vol/Security /users/em_master

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:56:25.987

这就是你想要的：

```
grep -vf usednaslist naslist 
```

`fgrep`可能更快，您应该尝试一下；)

# java - 使用 webdriver 在 web 自动化中使用 java 进行加密

> ID：12863490
> 
> 赞同：2
> 
> 时间：2012-10-12T16:37:59.117
> 
> 标签：java, encryption, automation, webdriver

我正在寻找一个想法来加密密码（登录密码）并在输入前解密。

有没有人做过这样的事情？

我知道我们必须确保加密逻辑不应该对用户可见，但我不确定如何隐藏/保护它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:49:25.947

从根本上说，您采用的任何完全自动化的方法都可以由可以访问 java 程序的用户复制。他们解密密码所需的所有成分都将出现在程序中。如果他们能够运行该程序，他们也可以“盲目地”使用它来为他们解密密码。

但是，您可以尝试让有权访问您的文件系统的人难以获得未加密的密码。

您将`K`使用 AES-128 在某个密钥下加密您的密码。

那么你的挑战就是`K`难以实现，所以让它成为你的程序每次都必须计算的东西。然后攻击者必须复制这些计算以产生密钥，这通常意味着强迫他们对程序进行逆向工程——除非，正如我所说，他们能够简单地*运行*程序。

您也可以这样做，以便计算依赖于存储在网络服务器等上的一些远程值。

有很多方法，但你不会比通过默默无闻的安全做得更好。它永远不会真正*安全*。只是弥补一些东西：P

# google-bigquery - Bigquery 后端错误

> ID：12863494
> 
> 赞同：0
> 
> 时间：2012-10-12T16:38:16.783
> 
> 标签：google-bigquery

我在另一组分片上工作的查询中收到“后端错误”消息：例如：

```
select mycols from [2011_Q1],[2011_Q2],[2011_Q3],[2011_Q4] works fine

select mycols from [2012_Q1],[2012_Q2],[2012_Q3] throws backend error. 
```

如何调试，或以其他方式解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:46:27.580

您的查询在我们的查询引擎中遇到了错误。它现在应该可以工作了（或者，实际上，可能会给你一个结果太大的错误，因为你是按这么多字段分组的）。如果您遇到的结果错误太大，请尝试使用 GROUP EACH BY 而不是 group by。

# c - 将字符附加到函数输入？

> ID：12863495
> 
> 赞同：1
> 
> 时间：2012-10-12T16:38:22.917
> 
> 标签：c

我需要一个函数的发送和整数，然后将它附加到一个常量字符的末尾。

```
int main (void)
{
    append(1);
}

int append(int input)
{
    const char P = 'P';

    //This where I want to append 1 to P to create "P1"'
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:42:48.027

无论做什么，都需要将数字转换为字符串，否则无法创建包含两个数字的字符串。

您实际上可以在一个函数调用中结合连接和 int 到字符串的转换`sprintf`：：

```
char output[16];
sprintf(output, "P%d", input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:40:34.520

我不是 C 方面的专家，但我认为常量一旦定义就不应更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:43:56.717

您不能为 分配多个字符值`char`。为此，您必须使用字符串。也许像这样。

```
int append(int input)
{
  const char P = 'P';

 //This where I want to append 1 to P to create "P1"
char app[2] ;  //extend that for your no. of digits
app[0] = P '
app[1] = (char) input  ;
} 
```

这是一位数。您可以为大整数分配动态内存并在循环中执行相同的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:44:21.177

不确定您是否可以在 const 聊天中添加一些内容（因为它是 const）。

但为什么不：

```
char p[3];
sprintf(p, "P%d",input); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T17:02:49.317

怎么用`strncat`？

在键盘上查看一个工作示例：http: [//codepad.org/xdwhH0ss](http://codepad.org/xdwhH0ss)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T17:21:49.607

我会将数字转换为字符串（假设您可以访问`itoa`此示例中调用的函数并将其连接到字符。如果您无权访问，则`itoa`可以`sprintf`改为。

itoa 方法：

```
#include <stdio.h>
#include <stdlib.h>

char *foo(const char ch, const int i)
{
    char *num, *ret;
    int c = i;

    if(c <= 0) c++;
    if(c == 0) c++;
    while(c != 0)
    {
        c++;
        c /= 10;
    }
    c += 1;
    if(!(num = malloc(c)))
    {
        fputs("Memory allocation failed.", stderr);
        exit(1);
    }
    if(!(ret = malloc(c + 1)))
    {
        fputs("Memory allocation failed.", stderr);
        free(num);
        exit(1);
    } 
    itoa(i, num, 10);
    ret[0] = ch;
    ret[1] = 0x00;
    strcat(ret, num);
    free(num);
    return ret;
}

int main(void)
{
    char *result;

    if(!(result = foo('C', 20))) exit(1);
    puts(result);
    free(result);
    return 0;
 } 
```

sprintf 方法：

```
#include <stdio.h>
#include <stdlib.h>

char *foo(const char ch, const int i)
{
    char *num, *ret;
    int c = i;

    if(c <= 0) c++;
    if(c == 0) c++;
    while(c != 0)
    {
        c++;
        c /= 10;
    }
    c += 1;
    if(!(num = malloc(c)))
    {
        fputs("Memory allocation failed.", stderr);
        exit(1);
    }
    if(!(ret = malloc(c + 1)))
    {
        fputs("Memory allocation failed.", stderr);
        free(num);
        exit(1);
    } 
    sprintf(num, "%d", i);
    ret[0] = ch;
    ret[1] = 0x00;
    strcat(ret, num);
    free(num);
    return ret;
}

int main(void)
{
    char *result;

    if(!(result = foo('C', 20))) exit(1);
    puts(result);
    free(result);
    return 0;
 } 
```

我编译并测试了这两个，它们似乎工作得很好。祝你好运。

# javascript - javascript在带有单选按钮onClick的IE中不起作用

> ID：12863498
> 
> 赞同：0
> 
> 时间：2012-10-12T16:38:45.763
> 
> 标签：javascript, internet-explorer, onclick, radio-button

我有一些代码充当重定向并在用户单击单选按钮时设置一些值。在 chrome 和 firefox 中，这些脚本可以完美运行，但在 IE 中似乎什么也没有发生。

HTML

```
<td>
    <input type='radio' id="order_type6" name='order_type' value="5"
        onClick="selectOrderType('1')">
    <label for="order_type6"><strong>Facility Employee</strong></label>
</td>
<td>
    <input type='radio' id="order_type7" name='order_type' value="5" 
        onClick="selectOrderType('1')">
    <label for="order_type7"><strong>Private Contract</strong></label>
</td> 
```

JS函数：

```
function selectOrderType(type)
{
    console.log(type);
   //replace '&load=1' with '&neworder=1'
    $location = window.location.href.replace(/&load\=1/,'&neworder=1#');
   //replace '#' at the end of the string with '' + $ordertype
    window.location.href = $location.replace(/#?$|&order_type\=\D?/,'&order_type='+type);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:46:39.570

删除 console.log - 或按 F12 打开控制台。

IE不支持控制台不打开

[“控制台”是 Internet Explorer 的未定义错误](https://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer)

或更改为`window.console && console.log(type)`

# jquery - youtube 视频不会在桌面 Chrome 中显示

> ID：12863500
> 
> 赞同：3
> 
> 时间：2012-10-12T16:38:53.393
> 
> 标签：jquery, google-chrome, youtube

在桌面版 Chrome 中查看时，Youtube 视频不会显示在模态窗口中。模态窗口会弹出，但 youtube 视频不会。

[https://animalhealth.pfizer.com/sites/pahweb/US/EN/Products/Pages/ClarifideStories.aspx](https://animalhealth.pfizer.com/sites/pahweb/US/EN/Products/Pages/ClarifideStories.aspx)

它适用于 Windows7 上的 IE 和 Firefox，适用于 Android ICS 和 iOS6 iPad 上的 Chrome。

它位于共享点站点上

但是如果我打开保存到桌面的版本，它在 chrome 中可以正常工作。

我正在使用 jquery fancybox

怎么称呼

```
 <a class="iframe" href="http://www.youtube.com/watch?  v=nGAyZSFDYh0&feature=player_embedded#at=41" style=" float: left;">

javascript
    <script type="text/javascript">
    $(".iframe").click(function() {
    $.fancybox({
            'padding'       : 0,
            'autoScale'     : false,
            'transitionIn'  : 'none',
            'transitionOut' : 'none',
            'title'         : this.title,
            'width'     : 680,
            'height'        : 495,
            'href'          : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type'          : 'swf',
            'swf'           : {
                 'wmode'        : 'transparent',
                'allowfullscreen'   : 'true'
            }
        });

    return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:34:39.123

我敢打赌，这与您`HTTPS`调用非安全`HTTP`页面的安全页面有关。尝试将您的 youtube 视频更改为`https://www.youtube.com/. . . . .`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:38:47.013

在其他浏览器中，视频在开头播放，因此它可能是开始序列：`#at=41`这与嵌入选项一起导致问题。如果您不打算从 41 秒开始，不妨将其取出，或使用该`youtube.com/embed/videoid`选项。

# matlab - 如何计算满足特定情况的条目数？

> ID：12863501
> 
> 赞同：2
> 
> 时间：2012-10-12T16:39:00.350
> 
> 标签：matlab

```
A=[1 2 3 4 5 0 0 0 0 0 0 0 0 0 0 0 0;
   0 1 2 3 4 5 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 1 2 3 4 5 0 0 0 0 0 0 0 0 0; 
   0 0 0 0 0 0 0 0 0 0 0 0 1 2 3 4 5;
   0 0 0 0 0 0 0 1 2 3 4 5 0 0 0 0 0;
   0 0 0 0 0 0 0 1 2 3 4 5 0 0 0 0 0]; 
```

在只有值大于 1 且小于 4 的元素的列中计算数字“1”的代码是什么。

注意：零被忽略。

因此，我的预期输出`res = 1`仅在第二列中。

这是我尝试过的：

```
res = sum( sum(A(2 :end,all(A>1&A<4))==1, 2),1 ); 
```

但我的代码中仍然计算零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:45:40.530

如果我理解正确，您可以这样做：

首先查找所有违反第一条规则的列，即`A`my 的元素不大于 4

`[~, del, ~] = find(A>=4)`

删除这些列：

`A(:, unique(del)) = []`

这使：

```
 A =
 1     2     3     0     0     0     0     0
 0     1     2     0     0     0     0     0
 0     0     0     0     0     0     0     0
 0     0     0     0     0     1     2     3
 0     0     0     2     3     0     0     0
 0     0     0     2     3     0     0     0 
```

现在我们找到所有剩余的具有`1`:

`[~, c1, ~] = find(A == 1);`

并且所有列至少有一个大于`1`第二个要求的值：

`[~, c2, ~] = find(A > 1)`

这些向量`c1`和`c2`列号然后我们简单地相交并计数：

`numel(intersect(c1, c2))`

现在这个论坛上有很多 Matlab 向导，我的直觉告诉我有更好的答案，所以也许你应该稍等一下。

# python - Sublime Text 2 为 PlugIn (MySQLdb) 添加模块

> ID：12863503
> 
> 赞同：3
> 
> 时间：2012-10-12T16:39:07.713
> 
> 标签：python, sublimetext2, python-module

我正在为 Sublime Text 2 开发一个小插件，但我需要使用 MySQLdb 模块。MySQLdb 模块在我的普通 CLI 中运行良好。但是 SB2 使用自己的 Python 版本。

知道**如何**安装 MySQKdb 模块以及SB2**在哪里**可以找到它吗？

Python安装使用/System/Library/Frameworks/Python.framework/Versions/2.7/

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:17:23.057

我今天在做一个插件，我选择的解决方案是将模块放在我的包目录中。换句话说：

```
Packages
|  MyPackage
|  |  MyPackage.py
|  |  MySQLdb
|  |  | contents of MySQLdb package 
```

您可以根据这些帖子更改 Sublime Text 2 使用的 PYTHONPATH，但如果您不小心，似乎可能存在兼容性问题。

[Sublime Text 2：自定义 PATH 和 PYTHONPATH](https://stackoverflow.com/questions/8574919/sublime-text-2-custom-path-and-pythonpath)

[Sublime Text2 导入错误：没有名为 Gnuplot 的模块](https://stackoverflow.com/questions/13239839/sublime-text2-import-error-no-module-named-gnuplot)

这让我相信最好的解决方案是创建一个文件夹，专门用于下载仅用于 Sublime Text 2 的模块，并将其添加到 Sublime Text 的 PYTHONPATH。

# .net - 我怎样才能有一个 1:many 表但有一个 1:1 导航属性？

> ID：12863506
> 
> 赞同：0
> 
> 时间：2012-10-12T16:39:13.883
> 
> 标签：.net, entity-framework, ef-code-first, entity-framework-5

我有两个实体；让我们称他们为人员和地址。一个人只有一个当前地址[*在此处插入有关政治候选人的笑话*]，但也有以前的地址，这些地址也存储在地址表中。因此，我希望我的数据库表具有 1:many 关系。

*但是*，在我的实体类中，我不希望 Person 和 Address 之间存在 1:many 关系，因为我只对他们*当前*的地址感兴趣。（如果我想知道他们以前的地址，那么我可以直接看地址表）。所以，我*不*想要 Person 对象上的 1:many "Addresses" 属性。相反，我想要一个 1:1 地址属性，我将其设置为当前地址。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:39:34.420

无法通过映射来做到这一点，因为 EF 关系紧跟 DB 关系。此外，EF 中的一对一关系基于将外键放在依赖表中的主键上（地址和人员需要具有完全相同的主键值），并且此要求不适用于您期望在表也​​是。

我会尝试这种方法（未经测试）：

```
public class MyContext : DbContext {

    public MyContext() {
        ((IObjectContextAdapter)this).ObjectContext.ObjectMaterialized += 
            (sender, e) => {
                var person = e.Person as Person;
                if (person != null) {
                    // Fill the property manually
                    person.Address = this.Addresses.FirstOrDefault(/* some condition */);
                }
    }

    protected override void OnModelCreating(DbModelBuilder builder) {
        // Do not map the propery
        builder.Entity<Person>().Ignore(p => p.Address);

        // other mapping
    }

    public override int SaveChanges() {

        // TODO: here you must have your own change tracking logic
        // for address to know when the address has changed and 
        // new record must be created in the database for old address

        return base.SaveChanges();
    }

    // rest of context class
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:39:22.580

不，这做不到。导航属性代表外键关系，数据库中的 FK 关系代表*一个*人的*多个*地址。当前地址是数据库中特定查询的结果，例如 - 根据“*当前*”的定义方式 - 对给定人员的所有地址进行“选择顶部（1）...按地址创建日期降序排序”查询。

 **我认为可能的解决方案是：

*   `CurrentAddressId`在人员表中使用引用当前地址的外键创建第二个关系。`CurrentAddress`然后你可以在你的`Person`课堂上有一个导航参考。
*   或者执行查询以使用`GetCurrentAddress(Person person)`方法或类似方法加载存储库或服务类中的当前地址。但是你不能在`Person`类上拥有当前地址的导航属性。**

# mysql - 在表中设置不存在值的情况

> ID：12863508
> 
> 赞同：-1
> 
> 时间：2012-10-12T16:39:22.253
> 
> 标签：mysql, sql

```
table 1 - id,field1

id field1
1  111
2  222
3  333 
```

如果该表（表 1）中没有条目，我将获得字段 1 的垃圾值。我需要以这样的方式编写一个case语句，如果该表中存在id，它应该返回field1的值，否则返回NULL。

例如：如果我选择 1 它应该给 111 。如果 id 是 4，那么它应该给 null。

就像是

```
case 
// check whether id is in table
if yes
  use the value
else
  null 
```

. 我不知道如何为此编写 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:41:00.577

只需选择具有适当过滤条件的字段：

```
SELECT field1 FROM table1 WHERE id = ? 
```

在您的应用程序代码中，您可以通过检查结果集是否为非空来测试是否存在匹配记录。

# ios - CoreData 在 -[NSManagedObjectContext save:] 中崩溃

> ID：12863509
> 
> 赞同：3
> 
> 时间：2012-10-12T16:39:26.237
> 
> 标签：ios, core-data, crash, segmentation-fault

注意，我已经检查了以下帖子：（[堆栈溢出问题 1](https://stackoverflow.com/questions/1230858/iphone-core-data-crashing-on-save "这里") [堆栈溢出问题 2](https://stackoverflow.com/questions/4555434/iphone-crash-on-coredata-save "和这里")

我在我的应用程序中看到以下崩溃堆栈：

```
2  libsystem_c.dylib 0x32bc87ec _sigtramp + 48
3  CoreData          0x361a2e70 -[NSSQLCore _populateRowForOp:withObject:] + 2716
4  CoreData          0x36194ca2 -[NSSQLCore recordUpdateForObject:] + 130
5  CoreData          0x3619defc -[NSSQLCore recordChangesInContext:] + 600
6  CoreData          0x3619bfae -[NSSQLCore saveChanges:] + 286
7  CoreData          0x360f425e -[NSSQLCore executeRequest:withContext:error:] + 946
8  CoreData          0x360f3336 -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1130
9  CoreData          0x3615b286 -[NSManagedObjectContext save:] + 522
10 MyCrashingApp     0x000aa040 -[DisplayModelMgr saveDisplayModel:forDate:] (DisplayModelMgr.m:182) 
```

这是一个 sigsegv，所以它不能通过 @try..@catch 捕获。这种情况很少发生，所以我很好奇这是否可能是删除和添加之间的评论中指出的竞争条件。

调用的代码是：

```
- (void) saveDisplayModel:(DisplayModel *)model forDate:(NSDate *)date
{
if (model == nil || date == nil)
    return;

[log debug:[model description]];

[log debug:@"DMM: saveDisplayModel: %@ lastSyncDate: %@",date, [model lastSyncDate]];

NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"MyDisplayModel" inManagedObjectContext:self.context];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(requestDate == %@)", date];
[request setPredicate:predicate];
[request setFetchLimit:1];
[request setEntity:entity];

NSError *error = nil;
NSArray *mutableFetchResults = [self.context executeFetchRequest:request error:&error];

if (mutableFetchResults != nil) {
    [log debug:@"DMM: mutableFetchResults:count %i",[mutableFetchResults count]];
    NSDate *sDate = [[model.lastSyncDate copy] autorelease];
    NSDate *timestamp = [NSDate date];
    MyDisplayModel *coreDataModel = nil;
    if([mutableFetchResults count] > 0) {
        coreDataModel = [mutableFetchResults objectAtIndex:0];
        [coreDataModel setSyncDate:sDate];
        [coreDataModel setTimeStamp:timestamp];
        [coreDataModel setRequestDate:date];
        if(model.entries != nil && [model.entries count] > 0) {

            for(MyDisplayModelValue *existingVal in coreDataModel.values) {
                [self.context deleteObject:existingVal];
            }
        }
        [coreDataModel setValues:nil]; // race condition?
    } else {
        coreDataModel = [NSEntityDescription
                                        insertNewObjectForEntityForName:@"MyDisplayModel"
                                        inManagedObjectContext:self.context];
        [coreDataModel setSyncDate:sDate];
        [coreDataModel setTimeStamp:timestamp];
        [coreDataModel setRequestDate:date];
    }
    for(DisplayModelEntry *dmv in [model.entries allValues]) {
        MyDisplayModelValue *newDashModelVal = [NSEntityDescription
                                                  insertNewObjectForEntityForName:@"MyDisplayModelValue"
                                                  inManagedObjectContext:self.context];
        [newDashModelVal setType:[NSNumber numberWithInt:dmv.type]];
        [newDashModelVal setActual:[NSNumber numberWithInt:dmv.actual]];
        [newDashModelVal setSource:[NSNumber numberWithInt:dmv.source]];
        [newDashModelVal setTarget:[NSNumber numberWithInt:dmv.target]];
        [newDashModelVal setMymodel:coreDataModel];
        [[coreDataModel mutableSetValueForKey:@"values"] addObject:newDashModelVal]; // create new if missing?
    }
    NSError *error;
    if (![self.context save:&error]) {
        [log error:@"Error Saving Dashbaord Cache: %@",[error description]];
    }
    [self.context refreshObject:coreDataModel mergeChanges:NO];
} 
```

}

对此的任何指导表示热烈赞赏。要求澄清的评论请求将得到迅速回应。

# java - 使用 Sockets 时替代 Scanner

> ID：12863512
> 
> 赞同：0
> 
> 时间：2012-10-12T16:39:38.593
> 
> 标签：java, sockets, java.util.scanner

使用套接字时是否有更好的 Scanner 类替代品？我真的厌倦了 .next() 和 .nextLine() ，因为它们一直在跳过行，所以使用起来真的很烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:42:26.670

`InputStreamReader`一起使用`BufferedReader`

**例如：**

```
Socket s = new Socket("10.0.0.1",4444);

InputStreamReader isr = new InputStreamReader(s.getInputStream());

BufferedReader br = new BufferedReader(isr);

String str = new String();

while ((str = br.readLine())!=null){

    System.out.println(str);

 } 
```

# python - 使用 ReportLab 在一页上显示多个表 (5)

> ID：12863517
> 
> 赞同：7
> 
> 时间：2012-10-12T16:40:13.303
> 
> 标签：python, python-2.7, reportlab

我在 Python 中有以下代码来使用 ReportLab 生成两个表。

有没有办法使用 ReportLab 将这两个表并排放置？

```
from reportlab.lib import colors
from reportlab.lib.pagesizes import letter, inch
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle

doc = SimpleDocTemplate("simple_table_grid.pdf", pagesize=letter)
elements = []

data= [['00', '01', '02', '03', '04','10', '11', '12', '13', '14'],
   ['10', '11', '12', '13', '14', '10', '11', '12', '13', '14'],
   ['20', '21', '22', '23', '24', '10', '11', '12', '13', '14'],
   ['30', '31', '32', '33', '34', '10', '11', '12', '13', '14']]

t=Table(data,5*[0.3*inch], 4*[0.2*inch])
t.setStyle(TableStyle([
        ('BACKGROUND',(0,0),(4,0),colors.gray),
                   ('INNERGRID', (0,0), (-1,-1), 0.25, colors.black),
                   ('BOX', (0,0), (-1,-1), 0.25, colors.black),
                   ]))

elements.append(t)

data= [['100', '01', '02', '03', '04'],
   ['10', '11', '12', '13', '14'],
   ['20', '21', '22', '23', '24'],
   ['30', '31', '32', '33', '34']]

t=Table(data,5*[0.3*inch], 4*[0.2*inch])
t.setStyle(TableStyle([
        ('BACKGROUND',(0,0),(4,0),colors.gray),
                   ('INNERGRID', (0,0), (-1,-1), 0.25, colors.black),
                   ('BOX', (0,0), (-1,-1), 0.25, colors.black),
                   ]))

elements.append(t)

doc.build(elements) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:28:57.567

创建第三个表，作为您创建的两个表的外壳。该表将有两列和一行。每列将是相应子表的大小。

例子：

*在不同的表变量中创建两个表（例如**table1**，**table2**）*

```
t1_w = <your first table width size>
t2_w = <your second table width size>
data = [[table1, table2]]
shell_table = Table(data, colWidths=[t1_w, t2_w]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-01T08:32:48.877

示例：
*完整代码

```
from reportlab.lib import colors
from reportlab.lib.pagesizes import letter, inch
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle

doc = SimpleDocTemplate("simple_table_grid.pdf", pagesize=letter)
elements = []

data1 = [['00', '01', '02', '03', '04', '10', '11', '12', '13', '14'],
        ['10', '11', '12', '13', '14', '10', '11', '12', '13', '14'],
        ['20', '21', '22', '23', '24', '10', '11', '12', '13', '14'],
        ['30', '31', '32', '33', '34', '10', '11', '12', '13', '14']]

t1 = Table(data1, 5 * [0.3 * inch], 4 * [0.2 * inch])
t1.setStyle(TableStyle([
    ('BACKGROUND', (0, 0), (4, 0), colors.gray),
    ('INNERGRID', (0, 0), (-1, -1), 0.25, colors.black),
    ('BOX', (0, 0), (-1, -1), 0.25, colors.black),
]))

data2 = [['100', '01', '02', '03', '04'],
        ['10', '11', '12', '13', '14'],
        ['20', '21', '22', '23', '24'],
        ['30', '31', '32', '33', '34']]

t2 = Table(data2, 5 * [0.4 * inch], 4 * [0.2 * inch])
t2.setStyle(TableStyle([
    ('BACKGROUND', (0, 0), (4, 0), colors.gray),
    ('INNERGRID', (0, 0), (-1, -1), 0.25, colors.black),
    ('BOX', (0, 0), (-1, -1), 0.25, colors.black),
]))

data = [[t1, t2]]
# adjust the length of tables
t1_w = 3 * inch
t2_w = 3 * inch
shell_table = Table(data, colWidths=[t1_w, t2_w])
elements.append(shell_table)
doc.build(elements) 
```

# ios - Apple 是否取消了应用程序更新的向后兼容性要求

> ID：12863524
> 
> 赞同：2
> 
> 时间：2012-10-12T16:40:45.940
> 
> 标签：ios, app-store

我们的一个应用程序最初支持`armv6`，现在我们可以更新一个新版本，只支持`armv7`并`armv7s`更新`deployment target`到 4.3。

那么现在苹果是否取消了对应用更新向后兼容的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:47:42.397

是的。苹果已经取消了对此的支持。它已经在 ios5 本身中开始，他们将其删除

> 在 Xcode 4.3 中，Apple 已经从 ARCHS_STANDARD_32_BIT 中删除了 armv6 设置

但是，如果您仍然想这样做，那么您将需要针对比 ios6 更旧的 ios 进行构建，但是您将无法为`armv7s`. 我建议不要这样做。

这是如何去做的链接。请与一粒盐一起服用。 [关联](http://blog.chpwn.com/post/31824877081)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:06:24.980

正如SP所说，现在不支持armv6。

问题是，你需要使用 Xcode 4.5 不是为了使用 armv7s，而是为了构建 iOS 6 并支持新的 iPhone 5。我的意思是，你可以在根本不使用 armv7s 的情况下为 iPhone 5 构建和发布，事实上推荐使用，因为没有多少开发人员手头有 iPhone 5 可供测试，而且由于许多库无法重新构建它。

问题是，如果您使用 Xcode 4.4.x，您仍然可以发布到 armv6 设备和 iOS 4.x < 4.3，但您将无法使用任何 iOS 6 功能（您的旋转将完全中断，因此）并忘记支持新 iPhone 5 的屏幕。

因此，Apple 的决定迫使我们停止支持旧设备和旧版本（旧为 3、4 年）。我们对此无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:30:51.493

开发人员不能将 UIRequiredDeviceCapabilities 限制添加到应用程序的 plist 中，以获取已在 App Store 中的应用程序所需的硬件，因为这会限制向后兼容性。

但是开发人员可以将最小部署目标提高到最新发布的 iOS 版本（当前为 6.0），或者介于两者之间的任何版本（4.3 是 Xcode 4.5 支持的最低版本）。

如果 iOS 设备不再支持所需的操作系统版本（armv6 设备无法运行 iOS 6.x 或 4.3），那么限制向后兼容性的是 Apple，而不是您、应用程序开发人员或应用程序本身。所以你的应用程序将满足要求，Apple 最近已经批准了**大量**这样做的应用程序（检查所有提出的最低部署目标的更新）。

# c - C char 数组作为指针

> ID：12863527
> 
> 赞同：5
> 
> 时间：2012-10-12T16:40:47.780
> 
> 标签：c, arrays, pointers

我想了解：

*   为什么有时`char[1]`C 中的 a 被用作`char*`（为什么这样做？）和
*   内部是如何工作的（发生了什么）

给出以下示例程序：

```
#include <stdio.h>
#include <string.h>

struct test_struct {
    char *a;
    char b[1];
} __attribute__((packed)); ;

int main() {

    char *testp;
    struct test_struct test_s;

    testp = NULL;
    memset(&test_s, 0, sizeof(struct test_struct));

    printf("sizeof(test_struct) is: %lx\n", sizeof(struct test_struct));

    printf("testp at: %p\n", &testp);
    printf("testp is: %p\n", testp);

    printf("test_s.a at: %p\n", &test_s.a);
    printf("test_s.a is: %p\n", test_s.a);

    printf("test_s.b at: %p\n", &test_s.b);
    printf("test_s.b is: %p\n", test_s.b);

    printf("sizeof(test_s.b): %lx \n", sizeof(test_s.b));

    printf("real sizeof(test_s.b): %lx \n", ((void *)(&test_s.b) - (void *)(&test_s.a)) );

    return 0;
} 
```

我得到以下输出（OS X，64 位）：

```
sizeof(test_struct) is: 9
testp at: 0x7fff62211a98
testp is: 0x0
test_s.a at: 0x7fff62211a88
test_s.a is: 0x0
test_s.b at: 0x7fff62211a90
test_s.b is: 0x7fff62211a90
sizeof(test_s.b): 1 
real sizeof(test_s.b): 8 
```

查看内存地址，可以看到即使结构是 9 字节大，也分配了 16 字节，这似乎是由`char b[1]`. 但是我不确定这些额外的字节是否是由于优化/内存对齐的原因而分配的，或者这是否与 C 对 char 数组的内部处理有关。

一个真实世界的例子可以在`<fts.h>`：

`man 3 fts` 将结构成员 `fts_name` 显示为：

```
 char *fts_name;                 /* file name */ 
```

而 /usr/include/fts.h 将成员定义为：

```
 char fts_name[1];               /* file name */ 
```

最后，`fts_name`真的可以用作指向 C 字符串的指针。例如，使用`printf("%s", ent->fts_name)`作品打印到标准输出。

所以如果 a`char[1]`真的是一个字节大，它就不能在我的 64 位机器上用作内存指针。另一方面，将其视为完全成熟`char *`也不起作用，正如上面的`test_s.b is`输出所示，它应该显示一个 NULL 指针......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:06:18.480

这是一个描述技巧的[答案。](https://stackoverflow.com/a/6390357/1395993)`char[1]`基本上，这个想法是在构造结构时分配更多内存`malloc()`，以便在没有额外分配的情况下为您的字符串提供一些存储空间。您有时甚至可以看到`char something[0]`用于相同目的，这更不直观。

> 另一方面，将其视为完整的 char * 也不起作用，正如上面输出的 test_s.b 所示，它应该显示一个 NULL 指针......

如果某个东西是一个数组，那么它的名称和`&name`只是在 C 中给出指向数组开头的指针。无论它是结构中的成员还是独立变量，这都有效。

```
printf("real sizeof(test_s.b): %lx \n", ((void *)(&test_s.b) - (void *)(&test_s.a)) ); 
```

这一行给出了分配给 的空间大小**`a`**，而不是`b`在这个结构中。在后面放一些东西`b`并用它来减去。使用该`packed`属性（这意味着您不允许编译器弄乱对齐等），您应该得到 1。

```
#include <stdio.h>
#include <string.h>

struct test_struct {
    char *a;
    char b[1];
    char c;
} __attribute__((packed));

int main() {
  struct test_struct s;
  printf("%lx\n", ((void*)&s.c) - ((void*)&s.b));
  return 0;
} 
```

我明白了`1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:18:56.030

当 C 不是您的母语时，这是可以理解的。首先要弄清楚几件事。

在 C 中，所有`var[n]`方法都是“获取 表示的地址，向该地址`var`添加`n*sizeof(var's type)`字节，然后返回结果地址。另外值得注意的是，C 语言不会*阻止*您经过数组*声明*的大小。

您经常会在旨在覆盖更大、更重要的*可变长度*内存分配的结构尾部找到您正在查看的格式。在这种结构中，习惯（通常是强制性的）让先前的结构成员之一指示尾缓冲区空间的实际有效字节。

例子：

```
typedef struct X
{
   unsigned int count;
   char data[1];
} X; 
```

这与声明指针成员明显不同，指针成员只不过是一个*保存*地址的变量。

```
typedef struct Y
{
    unsigned int count;
    char *dataptr;
} Y; 
```

在 Y 中，`dataptr` ***拥有***一个地址（并且也有一个）。在 X 中，`data` ***是***地址。

那么为什么要这样做呢？看看这个。以下内存转储假定小端、1 字节结构打包，以及 4 字节的整数和指针本机大小：

```
0x00000000  0x10 0x00 0x00 0x00 0x01 0x02 0x03 0x04 
0x00000008  0x05 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C
0x00000010  0x0D 0x0E 0x0F 0x10; 
```

现在在上面覆盖一个 struct X ，你有

```
count : 16
data[] : { 0x01, 0x02, 0x03, ... 0x010 }; 
```

在此之上叠加 a`struct Y`将产生明显不同的结果。

```
count : 16
dataptr : 0x01020304 
```

请记住，在 C 中，您可以轻松地（通常是悲惨地）离开数组声明大小的末尾。这种覆盖技术只不过是对这种能力的一种利用。鉴于上述情况，`struct X`您可以执行以下操作：

```
struct X * pX = funcThatReturnsTheMemoryAddressAbove();
for (unsigned int i=0; i<pX->count; i++)
{
   do something with pX->data[i];
} 
```

显然，您需要警惕如何分配管理内存来执行此类操作。

不确定这是否有助于解决问题，但希望有所帮助。

# php - PHP Twitter 脚本并不总是有效

> ID：12863530
> 
> 赞同：0
> 
> 时间：2012-10-12T16:41:03.190
> 
> 标签：php, twitter, rss

我在网站上有一个 PHP 脚本，它可以提取 Twitter 提要并显示它。奇怪的是，大多数时候它似乎工作得很好，但有时（实际上很多）它根本不起作用，只是显示*跟随*按钮。

代码如下，明显`USERNAME`有实际的twitter账号用户名在：

```
$widget = true;
$twitterid = "@USERNAME";

$doc = new DOMDocument();

# load the RSS document, edit this line to include your username or user id
if($doc->load('http://twitter.com/statuses/user_timeline/USERNAME.rss')) {

    # specify the number of tweets to display, max is 20
    $max_tweets = 4;    

    $i = 1;
    foreach ($doc->getElementsByTagName('item') as $node) {
        # fetch the title from the RSS feed. 
        # Note: 'pubDate' and 'link' are also useful (I use them in the sidebar of this blog)
        $tweet = $node->getElementsByTagName('title')->item(0)->nodeValue;

        # the title of each tweet starts with "username: " which I want to remove
        $tweet = substr($tweet, stripos($tweet, ':') + 1);   

        # OPTIONAL: turn URLs into links
        $tweet = preg_replace('@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?)@', '<a href="$1">$1</a>', $tweet);

        # OPTIONAL: turn @replies into links
        $tweet = preg_replace("/@([0-9a-zA-Z]+)/", "<a href=\"http://twitter.com/$1\">@$1</a>", $tweet);

        echo "<p> <p>".$tweet."</p></p><hr />\n";

        if ($i++ >= $max_tweets)
            break;
    }
    echo "</ul>\n";
} 

// Here's the Twitter Follow Button Widget
if($widget){
    echo "<a href=\"https://twitter.com/" .$twitterid. "\" class=\"twitter-follow-button\" data-show-count=\"true\">Follow @" .$twitterid. "</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=\"//platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");</script>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:58:58.250

遗憾的是，Twitter 已经删除了 URL [https://twitter.com/statuses/user_timeline/USERNAME.rss](https://twitter.com/statuses/user_timeline/USERNAME.rss)，它现在返回对不起，该页面在 2012 年 10 月 12 日不存在。有一个 json 等价物，但是这也可能在之后失败2013 年 3 月。暂时尝试[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=USERNAME&count=4 。](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=USERNAME&count=4)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:49:10.637

Twitter 对未经身份验证的调用（对未使用 OAuth 进行身份验证的 API 进行的调用）实施速率限制。

> “未经身份验证的呼叫每小时允许 150 个请求。未经身份验证的呼叫是根据发出请求的服务器或设备的面向公众的 IP 来衡量的。”

如果您使用的是共享主机，则您更有可能受到速率限制，因为在主机上使用相同 IP 的其他人也可能会查询 Twitter API（因此，计入该 IP 的每小时限制）。

[您可以在Twitter 的速率限制限制网站](https://dev.twitter.com/docs/rate-limiting)以及[速率限制常见问题解答网站](https://dev.twitter.com/docs/rate-limiting-faq)上阅读有关这些限制的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:04:07.610

```
<?php

$timeline="http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=arvizard";
$xml= new SimpleXMLElement(file_get_contents($timeline));
$i=0;
print "<ul class=\"tweet_list\">";
foreach($xml ->children() as $tstatus)
    {
        $stat=$tstatus->text;
        $split= preg_split('/\s/',$stat);
        print "<li class=\"tweet\"><p class=\"tweet_text\">";
        foreach ($split as $word)
            {

                if (preg_match('/^@/',$word)) {
                               print " "."<a href=http://www.twitter.com/".substr($word,1).">".$word."</a>";
                               }
                               else if (preg_match('/^http:\/\//',$word)){
                                     print " "."<a href=".$word.">".$word."</a>";
                               }
                               else
                                   {
                                   print " ".$word;
                               }

            }
print "</p>";
print "<span class=\"date\">".substr($tstatus->created_at,0,strlen($tstatus->created_at)-14)."</span>";
print "</li>";
$i++;
if ($i==5)
    {

        break;
    }
    }
print "</ul>";
?> 
```

这可能会对您有所帮助。请检查一下。

# java - 用于解析/识别但不针对数据库执行 SQL 的 Java API

> ID：12863532
> 
> 赞同：2
> 
> 时间：2012-10-12T16:41:10.963
> 
> 标签：java, sql, database, parsing

我正在为几乎所有 Sybase 和 Oracle 直接输出 SQL 脚本的工作负载自动化过程构建一个巨大的元数据字典和查找应用程序。我需要做的是为每个脚本中的每个 SQL 语句做一个清单，并提取语句类型（例如 INSERT、UPDATE、CREATE TABLE 等）、表中的表、表中的表等内容。

我有一个原型解析应用程序，它主要使用正则表达式来完成工作。像这样的编程比任何噩梦都乏味，坦率地说，我宁愿在夏天挖 3 英尺的沟，也不愿涵盖所有可能的用例场景。另外，我觉得我正在重新发明轮子。我认为那里一定有一些 API，如果你只提供一个 SQL 语句，它会告诉你 #1 它是否会编译，然后为你提取可以通过普通 POJO 工具访问的结构。像 getStatementType、getFromTables() 等。

我正在处理的脚本几乎是用所有编码风格编写的，并且没有标准格式，也有各种语句形式和表示的语法（聚合、子查询，你可以命名它）。

所以我的问题是：是否有一个 API 可以解析 SQL 给定的 SQL，也许它特定于哪个供应商来返回规范化的细节？

我知道 Eclipse 有一些插件可以做类似的事情（DDL 编辑器和 Quantum DB），所以我想我可以偷偷他们的一些 API 来处理 SQL 识别。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:33:27.773

您可以使用[antlr](http://www.antlr.org)和供应商特定或标准的[sql 语法](http://www.antlr3.org/grammar/list.html)之一进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T07:59:23.480

您可以将[ZQL 解析器](http://zql.sourceforge.net/)用于所有类型的 SQL 查询。ZQL 可以执行[本教程中指定的所有 SQL 操作](http://students.cs.byu.edu/~dbedwell/doc/sqltut.html)

# python - sorl-thumbnail - 仅当图像大于给定尺寸时才调整大小

> ID：12863534
> 
> 赞同：0
> 
> 时间：2012-10-12T16:41:12.957
> 
> 标签：python, django, sorl-thumbnail

如何防止 sorl-thumbnail 放大小于所需缩略图的图像？

使用 {% thumbnail %} 标签缩放时，图像*总是*缩放到所需的尺寸，而我希望它只缩放比这更大的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:32:45.570

如果您使用`ImageField`我相信您可以先检查宽度/高度。

```
{% if image.width > 100 %}
    {% thumbnail image 100x100 as thumb %}
        <img src="{{ thumb.url }}"/>
    {% endthumbnail %}
{% else %}
    <img src="{{ image.url }}"/>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T08:07:16.443

为什么不使用 sorl-thumbnail 内置`upscale`过滤器呢？

```
{% thumbnail image "1500x1500" upscale=False as thumb %} 
```

默认值为`upscale`True。将其设置为 False 以获得所需的行为。

# html - 应用不透明度时如何在IE7中删除按钮周围的黑色边框

> ID：12863540
> 
> 赞同：0
> 
> 时间：2012-10-12T16:41:28.030
> 
> 标签：html, css, internet-explorer, internet-explorer-7

> **可能重复：**
> [有什么方法可以删除活动表单中提交按钮周围的 IE 黑色边框？](https://stackoverflow.com/questions/126445/any-way-to-remove-ies-black-border-around-submit-button-in-active-forms)

我可以在 Windows XP 上的 IE7 中看到按钮周围的黑色边框。这是CSS。

```
.disabled {
  /* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";

  /* IE 5-7 */
  filter: alpha(opacity=60);

  /* Netscape */
  -moz-opacity: 0.6;

  /* Safari 1.x */
  -khtml-opacity: 0.6;

  /* Good browsers */
  opacity: 0.6;
} 
```

![在此处输入图像描述](../Images/05c55bd7fdd67c7c797bbd8e10325b8f.png)

除了 Windows XP IE7，我在其他地方看不到任何问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:49:19.563

我有一种感觉，这是因为按钮被禁用了。IE 有一些你无法真正解决的丑陋的禁用样式。我的下一个建议是尝试`border:0`在那里扔一个，看看会发生什么。

# javascript - 在页面加载之前隐藏 HTML 元素的正确方法是什么？

> ID：12863544
> 
> 赞同：5
> 
> 时间：2012-10-12T16:41:41.477
> 
> 标签：javascript, jquery, html, dom, hide

我已经找到了这个问题的许多部分答案，但似乎没有一个明确的答案。对于如此重要​​的技术，我觉得这有点奇怪。

我应该如何隐藏元素（使用javascript），以便在JS有机会隐藏它们之前在页面加载时它们不会短暂出现？我不想最初用 CSS 将它们设置为隐藏，就好像用户没有 Javascript 一样，他们什么也看不到。

要清楚。我不是在问如何处理向没有 JS 的用户显示内容。那是一个完全不同的主题。我只想要一种可靠的方法在显示 HTML 元素之前隐藏它们。

所以我的要求：

1.  最初使用 CSS 不隐藏 HTML 元素
2.  如果 JS 可用，这些元素将被隐藏，因此它们永远不会显示，即使是瞬间也不会显示。这意味着将它们隐藏在正文末尾加载的 JS 中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:54:33.097

和 VKen 一样，我更喜欢使用[moderizr](http://modernizr.com/)和[Paul Irish 的`html`元素](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)结构（这是[HTML5 Boilerplate](http://html5boilerplate.com/)使用的）

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

然后在样式表中：

```
.element-to-hide { display: none; }

.no-js .element-to-hide { display: block; } 
```

效果很好，没有元素消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T16:44:39.247

一种解决方案是使用 javascript 包含一个可选的 CSS 文件，您可以在其中隐藏这些 div。

把它放在你的`HEAD`部分：

```
<script>document.write('<link rel="stylesheet" type="text/css" href="hiding.css"/>');</script> 
```

在 hidden.css 中：

```
div.mySelector {
   display:none;
} 
```

如果您没有要设置的额外 css，您也可以更简单地在 javascript 中内联 css 规则（仍在 HEAD 中）：

```
<script>
document.write('<style type="text/css">div.mySelector {display:none; }</style>');
</script> 
```

如果 Javascript 不可用，则不会隐藏 div。如果它可用，CSS 将用于在显示之前隐藏 div。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T16:44:49.900

使用后代组合器并尽快使主体成为类的成员。

```
<style>
    /* js only element */
    .js foo { display: none; }
</style>
</head>
<body>
<script> document.body.className += " js"; </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:45:31.897

你可以做一个`<noscript>`标签并覆盖那些禁用 javascript 的初始 css

# r - 在 R 中获得分组结果

> ID：12863547
> 
> 赞同：4
> 
> 时间：2012-10-12T16:41:57.627
> 
> 标签：r, grouping, sas, anova

在这里，我有下面的数据集。在 SAS 系统中，要在我所做的任何事情中获得分组结果，例如均值、GLM 或 REG，我可以将其设为：

```
proc sort; by B;
proc glm;
class A;
model C=A; by B;
run; 
```

然后，我可以在 B 级以内或按 B 级获得 GLM 结果。但是，我不知道如何在 R 系统中使用 like'by' 进行分组。您可能想建议我使用**>subset()**，但是，例如，当您有 10 级 B 时，这条线将非常困难。您可能想学习我，但只需要 anova 分析，还需要回归和平均。这里有人可以帮助我吗？

```
raw data

A   B   C
a   a   0.47
a   b   0.88
a   c   2.32
a   d   3.26
a   a   0.93
a   b   1.86
a   c   3.22
a   d   0.92
a   a   0.45
a   b   0.92
a   c   2.31
a   d   3.24
b   a   0.91
b   b   1.84
b   c   3.27
b   d   0.86
b   a   0.47
b   b   0.90
b   c   2.33
b   d   3.19
b   a   0.92
b   b   1.84
b   c   3.25
b   d   0.93
c   a   0.45
c   b   0.92
c   c   2.33
c   d   3.08
c   a   0.93
c   b   1.86
c   c   3.25
c   d   0.93
c   a   0.47
c   b   0.90
c   c   2.26
c   d   3.09 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:04:22.463

基于@Brian Diggs 的回答，但使用 R 基函数。我还使用了 Brian 的数据集

```
models <- lapply(split(dat, dat$B), function(x) glm(C~A, data=x)) 
do.call(rbind, lapply(models, function(y) y$coef))
  (Intercept)         Ab            Ac
a   0.6166667  0.1500000  1.802585e-17
b   1.2200000  0.3066667  6.666667e-03
c   2.6166667  0.3333333 -3.333333e-03
d   2.4733333 -0.8133333 -1.066667e-01 
```

### 编辑 1：P.values 的结果（备选方案 1）

```
models <- lapply(split(dat, dat$B), function(x) glm(C~A, data=x)) #the same as above 
Coef <- lapply(models, function(y) y$coef) # the same as above
Pval <-  lapply(models, function(z) summary(z)$coefficients[, 'Pr(>|t|)'])
Result <- cbind(do.call(rbind, Coef), do.call(rbind, Pval))
colnames(Result)[4:6] <- paste('P.val', colnames(Result)[4:6])
Result

 (Intercept)         Ab            Ac P.val (Intercept)  P.val Ab  P.val Ac
a   0.6166667  0.1500000  1.802585e-17       0.007088207 0.5167724 1.0000000
b   1.2200000  0.3066667  6.666667e-03       0.008446002 0.5191737 0.9886090
c   2.6166667  0.3333333 -3.333333e-03       0.000151772 0.4762936 0.9941859
d   2.4733333 -0.8133333 -1.066667e-01       0.016803317 0.4744404 0.9235623 
```

### 编辑 2：具有 P.values 的结果（备选方案 2）

```
models <- lapply(split(dat, dat$B), function(x) glm(C~A, data=x)) #the same as above
do.call(rbind, lapply(models, function(z) summary(z)$coefficients))
                 Estimate Std. Error       t value    Pr(>|t|)
(Intercept)  6.166667e-01  0.1540202  4.003804e+00 0.007088207
Ab           1.500000e-01  0.2178175  6.886500e-01 0.516772358
Ac           1.802585e-17  0.2178175  8.275668e-17 1.000000000
(Intercept)  1.220000e+00  0.3167661  3.851423e+00 0.008446002
Ab           3.066667e-01  0.4479749  6.845622e-01 0.519173660
Ac           6.666667e-03  0.4479749  1.488179e-02 0.988608995
(Intercept)  2.616667e+00  0.3103164  8.432253e+00 0.000151772
Ab           3.333333e-01  0.4388537  7.595545e-01 0.476293582
Ac          -3.333333e-03  0.4388537 -7.595545e-03 0.994185937
(Intercept)  2.473333e+00  0.7538543  3.280917e+00 0.016803317
Ab          -8.133333e-01  1.0661110 -7.628974e-01 0.474440418
Ac          -1.066667e-01  1.0661110 -1.000521e-01 0.923562285 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:37:47.613

使您的数据集更容易导入到 R：

```
dat <-
structure(list(A = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("a", 
"b", "c"), class = "factor"), B = structure(c(1L, 2L, 3L, 4L, 
1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 
1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L
), .Label = c("a", "b", "c", "d"), class = "factor"), C = c(0.47, 
0.88, 2.32, 3.26, 0.93, 1.86, 3.22, 0.92, 0.45, 0.92, 2.31, 3.24, 
0.91, 1.84, 3.27, 0.86, 0.47, 0.9, 2.33, 3.19, 0.92, 1.84, 3.25, 
0.93, 0.45, 0.92, 2.33, 3.08, 0.93, 1.86, 3.25, 0.93, 0.47, 0.9, 
2.26, 3.09)), .Names = c("A", "B", "C"), class = "data.frame", row.names = c(NA, 
-36L)) 
```

大部分 SAS 通过组处理映射到拆分-应用-组合方法（将数据分成几部分，对每个部分做一些事情，以某种方式将这些部分重新组合在一起）。在这种情况下，模型的结果是对象（列表），“组合”多个模型的自然方法是将它们放在列表中。

```
library("plyr")
models <- dlply(dat, .(B), function(DF) glm(C~A, data=DF)) 
```

`models`现在是一个列表，其中的每个元素都是 的`glm`子集上 a的结果`dim`。

```
> models
$a

Call:  glm(formula = C ~ A, data = DF)

Coefficients:
(Intercept)           Ab           Ac  
  6.167e-01    1.500e-01    6.799e-17  

Degrees of Freedom: 8 Total (i.e. Null);  6 Residual
Null Deviance:      0.472 
Residual Deviance: 0.427        AIC: 6.107 

$b

Call:  glm(formula = C ~ A, data = DF)

Coefficients:
(Intercept)           Ab           Ac  
   1.220000     0.306667     0.006667  

Degrees of Freedom: 8 Total (i.e. Null);  6 Residual
Null Deviance:      1.99 
Residual Deviance: 1.806        AIC: 19.09 

$c

Call:  glm(formula = C ~ A, data = DF)

Coefficients:
(Intercept)           Ab           Ac  
   2.616667     0.333333    -0.003333  

Degrees of Freedom: 8 Total (i.e. Null);  6 Residual
Null Deviance:      1.958 
Residual Deviance: 1.733        AIC: 18.72 

$d

Call:  glm(formula = C ~ A, data = DF)

Coefficients:
(Intercept)           Ab           Ac  
     2.4733      -0.8133      -0.1067  

Degrees of Freedom: 8 Total (i.e. Null);  6 Residual
Null Deviance:      11.4 
Residual Deviance: 10.23        AIC: 34.69 

attr(,"split_type")
[1] "data.frame"
attr(,"split_labels")
  B
1 a
2 b
3 c
4 d 
```

一次从所有模型中提取信息遵循相同的范例：

```
> ldply(models, coefficients)
  B (Intercept)         Ab            Ac
1 a   0.6166667  0.1500000  6.798700e-17
2 b   1.2200000  0.3066667  6.666667e-03
3 c   2.6166667  0.3333333 -3.333333e-03
4 d   2.4733333 -0.8133333 -1.066667e-01 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:50:29.357

也许聚合函数就是你要找的

```
aggregate(data$C, by=list(data$A), FUN=sum) 
```

这将按第一列对您的数据进行分组，并将 C 列折叠为第一列中每个组的总和

# performance - 查询非常慢的 longtext 字段 innodb 表

> ID：12863549
> 
> 赞同：0
> 
> 时间：2012-10-12T16:42:06.483
> 
> 标签：performance, innodb, longtext

好吧，首先，对不起我的英语。我尝试在用户可以包含一些文本的表中进行查询，例如博客页面。用户可以设计 html 格式的内容。在我的表中，它是这样存储的：

```
Estad&amp;iacute;sticas&lt;br /&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Columna 1&lt;/td&gt;
&lt;td&gt;Columna 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Columna 3&lt;br /&gt;&lt;/td&gt;
&lt;td&gt;Columna 4&lt;br /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt; 
```

我必须在该内容中搜索用户想要的所有内容。字段'texto'（我正在使用它）是一个长文本字段，表是innodb。我不能使用全文搜索，因为它只适用于 myisam 表。我将查询设为：

```
"SELECT * FROM texto WHERE texto like '%$variable%'" 
```

但是查询非常非常慢，需要很长时间。该表有 849 条记录，并不大。如果我在 phpmyadmin 中编写相同的查询也需要非常非常长的时间。但是这个领域有很大的记录，有的记录有video html，table，images，但也就是这样，像上面这样的text。

我可以做什么？？？怎样才能提高查询的性能？？？我感谢您的所有帮助。非常感谢。再说一次，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:15:23.473

不幸的是，您无法从现有结构中获得更多信息 - 任何聚集或非聚集索引都无法处理`like '%...'`查询。最好的解决方案可能是将您的数据导出到某个全文搜索引擎（例如 SOLR）并使用该引擎来完成用户查询。如果不可能，则另一种解决方案是创建`tokens`一个充当文本索引的表：

```
create table tokens(
  token varchar(100) not null,
  docid int not null references testdo(id),
  constraint PK_tokens primary key (token, docid)
); 
```

where`docid`引用您的数据表（我将其命名为`testdo`）。

然后，您需要通过一些常见的 html 表达式`tokens`拆分用户*博客文章来填充表格，例如：*

```
insert ignore into tokens values
('Estad', 1),
('Columna 1', 1),
('Columna 2', 1),
('Estad', 1); 
```

注意`ignore`关键字，它将默默地忽略可能出现的任何重复项。使用`tokens`充满数据的表，您可以将查询修改为：

```
select * from testdo d 
  inner join tokens t on t.docid = d.id where t.token like 'Col%' 
```

它应该执行得更快，因为它使用索引和键查找。

PS。您可以`tokens`通过添加计数列来改进表格，该列将保留文档中给定单词的多次出现。然后，您可以按此列对结果进行排序，并使它们与搜索词更加相关。

# macos - 在 Mountain Lion 下导出 eclipse 插件失败

> ID：12863555
> 
> 赞同：2
> 
> 时间：2012-10-12T16:42:34.787
> 
> 标签：macos, eclipse-plugin, osx-mountain-lion, eclipse-juno

我正在为 Mountain Lion 下的 Eclipse Juno 开发一个插件。

`run as`我可以通过>毫无问题地测试我的插件`Eclipse application`。

但是，当我尝试通过执行以下操作导出插件时，它会失败。

1.  打开`plugin.xml`
2.  转到选项卡`Overview`
3.  选择`Export Wizard`

它返回以下错误：

```
/Users/luca/Documents/University/PhD/FODA/.metadata/.plugins/org.eclipse.pde.core/temp/org.eclipse.pde.container.feature/compile.org.eclipse.pde.container.feature.xml:4: The following error occurred while executing this line:
/Users/luca/Documents/University/PhD/FODA/it.unibg.robotics.featuremodels.model/build.xml:31: /Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/Classes does not exist.
The following error occurred while executing this line:
/Users/luca/Documents/University/PhD/FODA/it.unibg.robotics.featuremodels.model/build.xml:31: /Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/Classes does not exist. 
```

有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T13:21:35.413

今天我自己也遇到了这个问题。据我了解，这是因为最近 Apple 停止维护他们的 Java 版本，转而支持 Oracle 的 MacOS X 官方版本。但是，Oracle 版本的目录结构与以前不同，Eclipse 生成的构建脚本采用旧结构。

您可以看到许多与此相关的错误报告。例如，

*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=371215](https://bugs.eclipse.org/bugs/show_bug.cgi?id=371215)
*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=378596](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378596)
*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=385077](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385077)

我听说切换到使用 Java 6 会解决这个问题，因为 MacOS X 仍然使用旧目录结构安装 Apple Java 6。我不想回到 Java 6，所以我没有尝试这个。

相反，我尝试创建报告丢失的目录（即，`/Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/Classes`），其中没有任何内容。奇怪的是，它似乎奏效了。

让我知道它是否也适合您... Eclipse 的未来更新也可能会解决此问题（我今天更新了我的，但问题仍然存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:57:58.973

这在 Eclipse 3.8.2 和 4.3 中已修复。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=392434](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392434)

# javascript - JsTree 的节点对齐问题

> ID：12863560
> 
> 赞同：2
> 
> 时间：2012-10-12T16:42:52.260
> 
> 标签：javascript, internet-explorer, jstree

我在 JStree 节点中有一个图像和文本。在其他浏览器（FF 和 Chrome）中，它们都在同一行。但在 IE 中它有不同的行。一个低于另一个。（我使用的是 IE 9）。在样式表中我尝试使用属性 display : inline-block 但即使在其他浏览器中，整个 JS 树也会受到干扰......（内部节点就是这种情况）..我有什么出路吗？

初始输出。

IE img 节点文本

法郎

*   img 节点文本 - 1
    *   img 节点文本 -11
    *   img 节点文本 -12
    *   img 节点文本 -13

通道

*   img 节点文本 - 1
    *   img 节点文本 -11
    *   img 节点文本 -12
    *   img 节点文本 -13

给出显示后：inline-block;

IE img 节点文本

法郎-

*   img 节点文本 - 1
    -img 节点文本 -11 img 节点文本 -12 img 节点文本 -13

通道

*   img 节点文本 - 1
    -img 节点文本 -11 img 节点文本 -12 img 节点文本 -13

# algorithm - 两对数相同的数

> ID：12863561
> 
> 赞同：7
> 
> 时间：2012-10-12T16:43:08.157
> 
> 标签：algorithm, list, integer

给定一个`[a_1 a_2 ... a_n]`（不一定是不同的）整数列表，确定是否存在成对不同的索引`w,x,y,z`，例如`a_w + a_x = a_y + a_z`.

我知道一种方法是使用 4 级`for`循环，每级循环遍历一个索引。当我们得到相等的和时，检查所有索引是否成对不同。如果是，则返回`true`。如果我们已经用尽了所有可能性，请返回`false`。这有运行时间`O(n^4)`。

我们能做得更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:48:40.490

计算 的所有可能值`a_w + a_x`，将它们插入哈希表。将 (a_w + a_x, w) 和 (a_w + a_x, x) 插入到第二个哈希表。

在将值插入第一个哈希表之前，检查它是否已经在表中。如果是这样，请检查第二张表。如果存在 (a_w + a_x, w) 或 (a_w + a_x, x) 中的任何一个，请不要插入任何内容（我们有一个重复的元素）。如果这两对都不在第二张表中，我们就会得到肯定的答案。

如果在处理所有 (w, x) 对之后，我们没有得到肯定的答案，这意味着不存在这样的成对不同的索引。

时间复杂度为 O(n ² )。空间要求也是 O(n ² )。

可以在 O(n) 空间中执行相同的操作，但在 O(n ² * log(n)) 时间中使用此答案的稍微修改的算法：[Sum-subset with a fixed subset size](https://stackoverflow.com/a/8926458/1009831)：

1.  对列表进行排序。
2.  对元素使用优先级队列，包含`a_w + a_x`键和`w, x`值。用元素预先填充此队列`n-1`，其中 x = 0 和 w = 1 .. n-1。
3.  `(sum, w, x)`反复从该队列中弹出最小元素并将元素放入`(a_w + a_x_plus_1, w, x+1)`队列（但当 x >= w 时不要放入元素）。当从队列中删除的两个连续元素具有相同的总和时停止。
4.  要处理重复项，可以比较两个连续元素的 w、x，它们的总和相等。但是使用 krjampani 的预处理思想更容易。如果排序列表包含两对重复项或单个元素重复 4 次，则成功。否则重复的值不会超过一个；在列表中只保留它的单个实例，并将其加倍值与一对“特殊”索引一起添加到优先级队列中：（2a，-1，-1）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:55:26.333

Evgeny 的解决方案可以通过如下预处理原始数组来简化。

我们首先使用哈希表来计算原始数组中每个元素的频率。如果至少有 2 个元素有重复项（它们的频率至少为 2），或者如果一个元素以至少 4 的频率出现，则答案是`true`。否则，如果元素`a`以 2 或 3 的频率出现，我们添加`2a`到第二个哈希表，并用`a`原始数组中的单个副本替换 的所有副本。

然后在修改后的数组中，对于每对索引`i`，我们添加到第二个哈希表，如果我们在这个哈希表中找到重复条目，则返回。`j``i < j``a_i + a_j``true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:35:19.210

如果您有 8.5GB 的内存（无符号整数更多，如果总和或索引不跨越整个整数范围，则更少），创建三个数组。首先每个可能的总和使用 1 位。它是结果的位图。其次，每个可能的总和使用 32 位。它记录索引 j。第三个使用每个可能的总和 1 位。它是一个位域，用于记录当前迭代中是否遇到了该和 - 每次迭代都将其归零。迭代 i=0...n 和 j=i+1...n。对于每个总和，查看它是否设置在第一个位域中（如果之前遇到过）。如果是，查看第二个数组中记录的索引是否匹配 i 或 j（如果旧 j 匹配新 i 或新 j）。如果不是，请检查第二个数组中的位是否已设置（如果它是在当前迭代中设置的，因此旧 i 与新 i 匹配）。如果不是，你有一个匹配！（旧的 i 永远不会匹配旧的 j 或新的 j，新的 i 永远不会匹配新的 j。）退出。否则，在所有三个数组中记录总和并继续。

尽管它使用了价值 40 美元的内存（我喜欢现在：），但这可能比使用哈希映射和装箱要快得多。对于较大的 n，甚至可能使用更少的内存。一个缺点是数据几乎永远不会在 L2 缓存中。但是尝试将 JVM 设置为使用大页面，这样至少 TLB 未命中也不会进入主内存。处理为 o(n^2)，内存为 o(1)。

# nicedit - 在 IE 浏览器中使用 nicEditor 时出现错误消息

> ID：12863566
> 
> 赞同：0
> 
> 时间：2012-10-12T16:43:15.000
> 
> 标签：nicedit

当我单击背景颜色按钮/更改背景颜色时，出现错误消息“无效参数”，有谁知道如何解决这个问题？谢谢~顺便说一句：所有IE版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:01:48.833

我找到 ..ie 9 浏览器
NicEdit 背景 this.ne.nicCommand('hiliteColor',c) ==>this.ne.nicCommand('backColor',c)

execCommand 方法是文档的方法，而不是 Range。此外，hilitecolor 仅适用于 Firefox，因此您应该回退到在 WebKit 和 Opera 中使用背景颜色。

# html - 以 (HTML) DL DT DD 作为列表的 Windows 和 Mac OS X 之间的区别

> ID：12863567
> 
> 赞同：0
> 
> 时间：2012-10-12T16:43:15.800
> 
> 标签：html, css, macos, safari

我有这个代码：http: [//jsfiddle.net/mbekX/](http://jsfiddle.net/mbekX/)

在带有 Chrome、Opera、IE8 和 FF 的 Windows 下都可以正常工作：

```
X TEXT
X TEXT
X TEXT 
```

但是在 OSX 上使用 Safari 和 FF 我会得到这样的结果：

```
X TEXT
  X TEXT
    X TEXT 
```

有人可以在这里帮助我吗？

我可以在 OSX 中使用具有固定高度的 set dd 来修复它，但是 dd-tag 也有多行。所以这是不可能的。

添加 OSX-IMAGE： http: [//i.imgur.com/2lgaJ.png](http://i.imgur.com/2lgaJ.png) 在 Windows 下，所有绿色矩形都在下面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:38:24.500

将`line-height`on`dd`和`dt`elements 设置为与`height`您的`dt`元素相同。

[小提琴](http://jsfiddle.net/mbekX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:02:05.183

您正在将某些空`<dt>`元素的高度和宽度设置为大于您尝试放置的“行”的特定大小。再加上它`float:left`，你就会得到你在这里看到的效果。基本上，行高小于您将这些 dt 元素设置为的 16px 高度。您可以增加 的`line-height`，`<dl>`直到 dt 元素不再交错。我`line-height: 1.5;`至少会推荐。`<dt>`但是，如果您在每个元素中都有内容并且您没有像元素一样设置它的高度，那么这个问题就会自行解决`<dt>X</dt>`。如果定义列表 ( ) 中`<dd>`没有定义术语 ( )，您就不会有定义数据 ( )，对吧？`<dt>``<dl>`

# java - 让 JButton 将 JTextField 中的文本插入到变量中？

> ID：12863575
> 
> 赞同：0
> 
> 时间：2012-10-12T16:43:50.277
> 
> 标签：java, swing, variables, jbutton, jtextfield

我正在尝试编写一个程序，该程序将在 JTextField 中获取文本并将其放入我在按下 JButton 时声明的变量中。我需要计算一个学校项目的每周工资，但这只需要控制台，我做 GUI 是为了我自己的乐趣。我试图得到它，所以当我点击“计算”时，它会从 id、rh、oh、hp 等中获取输入并计算每周工资 (wp)，然后将其打印在右侧的列旁边计算按钮。

```
//the calculations aren't complete yet until I finish the GUI

public class Weekly_Pay 
{

public static void calculations(String[] args) 
{

Scanner imput = new Scanner(System.in);

System.out.println("ID number: ");
int employeeId = imput.nextInt();

System.out.println("Hourly Wage: ");
Double hourlyWage = imput.nextDouble();

System.out.println("Regular Hours: ");
double regularHours = imput.nextDouble();

System.out.println("Overtime Hours: ");
double overtimeHours = imput.nextDouble();

double overtimePay = round(overtimeHours * (1.5 * hourlyWage));
double regularPay  = round(hourlyWage * regularHours);

double weeklyPay = regularPay + overtimePay;

System.out.println("Employee ID Number:" + employeeId);
System.out.printf("Weekly Pay: " + "$%.2f\n", weeklyPay);

}

public static double round(double num) 
{

// rounding to two decimal places
num *= 100;
int rounded = (int) Math.round(num);
return rounded/100.0;

}

public static void main(String[] args) 
{

JFrame window = new JFrame();
window.setTitle("Weekly Pay");
window.setSize(350, 200);
window.setResizable(false);
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
Color lGray = new Color(209, 209, 209);

JPanel panel = new JPanel();
GroupLayout layout = new GroupLayout(panel);
panel.setBackground(lGray);
panel.setLayout(layout);
layout.setAutoCreateGaps(true);
layout.setAutoCreateContainerGaps(true);

JTextField idEntry = new JTextField(); //where the user imputs their ID
JTextField hwEntry = new JTextField(); //where the user imputs their hourly wage
JTextField rhEntry = new JTextField(); //where the user imputs their regular hours
JTextField ohEntry = new JTextField(); //where the user imputs their overtime hours

JLabel id = new JLabel("ID Number");
JLabel hw = new JLabel("Hourly Wage");
JLabel rh = new JLabel("Regular Hours");
JLabel oh = new JLabel("Overtime Hours");
JButton calc = new JButton("Calculate");
JLabel wp = new JLabel(" Weekly Pay: $" + "$%.2f\n", weeklyPay);

GroupLayout.SequentialGroup hGroup = layout.createSequentialGroup();    
hGroup.addGroup(layout.createParallelGroup().
           addComponent(id).addComponent(hw).addComponent(rh).addComponent(oh).addComponent(calc));
hGroup.addGroup(layout.createParallelGroup().
  addComponent(idEntry).addComponent(hwEntry).addComponent(rhEntry).addComponent(ohEntry).addComponent(wp));
layout.setHorizontalGroup(hGroup);

GroupLayout.SequentialGroup vGroup = layout.createSequentialGroup();    
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(id).addComponent(idEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(hw).addComponent(hwEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(rh).addComponent(rhEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(oh).addComponent(ohEntry));
vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
    addComponent(calc).addComponent(wp));
layout.setVerticalGroup(vGroup);

window.add(panel);
window.setVisible(true);

}  
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T16:48:40.210

**例如：**

```
String input = new String();         
JButton mbutt = new JButton;
JTextField jtxt = new JTextField();

mbutt.addActionListener(new ActionListener(){

       public void actionPerformed(ActionEvent event){    
             input = jtxt.getText().toString();
       }
 }); 
```

**//////////////////////////// 编辑部分//////////// ///////////////**

**在我跳入代码之前，现在有几件事。**

**-**我只是想展示 的工作`ActionListener`原理，以及如何从字段中提取数据并将其放入变量中。

**-**直接将组件放在, and**上**是一种**不好的做法**（我太糟糕了..!!!），所以您应该始终使用类似 a的东西，**然后将组件放在它上面**。为了保持**简单**，我**故意**使用直接 JFrame 来保存组件。**`JFrame``thats exactly what i have done here``JPanel``JFrame`**

 ********-**是的，**拥有**`UI work on the UI thread, and Non-UI work on Non-UI thread`.

**-**在**Swings** `main()`方法中的**寿命不长，在**`Event Dispatcher Thread` **它退出**后调度 GUI 的构建......所以现在 EDT 有责任处理 GUI，**所以你应该只保留 EDT 来处理 GUI**，就像我所做的那样它在`main()`方法[ `EventQueue.invokeLater()`]中。

**完整代码：**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class Tes extends JFrame {

    String input;
    JTextField jtxt; 
    JButton mbutt; 

    public Tes(){

 //--ALWAYS USE A JPANEL OVER JFRAME, I DID THIS TO KEEP IT SIMPLE FOR U--//

        this.setSize(400,400);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        this.setComponent();
        this.setHandler();
    }

    public void setComponent(){

        jtxt =  new JTextField("Hello");

        mbutt = new JButton("Button"); 

        this.add(BorderLayout.SOUTH,mbutt);

        this.add(BorderLayout.NORTH,jtxt);

    }

    public void setHandler(){

        mbutt.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {

                input = jtxt.getText().toString();

                System.out.println("Input Value: "+input);

          **//--See your Console Output everytime u press the button--//**

            }
        });

    }
    public static void main(String[] args){

         EventQueue.invokeLater(new Runnable(){

            @Override
            public void run() {

                Tes t = new Tes();
                t.setVisible(true);

            }

         });
    }

} 
```******

# oracle - 垂直输出

> ID：12863579
> 
> 赞同：0
> 
> 时间：2012-10-12T16:44:03.037
> 
> 标签：oracle, sql-server-2008, oracle10g

我在表中有列名：

```
select LASTNAME
  FROM dbo.Employees
 WHERE LASTNAME = 'Smith' 
```

上述查询的输出是

```
LASTNAME
Smith 
```

我想要像这样的输出

```
 LASTNAME
      S
      m
      i
      t
      h 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:06:52.613

在[数字表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)的帮助下。

SQL 服务器：

```
select substring(E.LASTNAME, N.N, 1) as LASTNAME
from Employees as E
  inner join Numbers as N
    on N.N between 1 and len(E.LASTNAME)
order by E.LASTNAME, N.N 
```

甲骨文：

```
select substr(E.LASTNAME, N.N, 1) as LASTNAME
from Employees E
  inner join Numbers N
    on N.N between 1 and length(E.LASTNAME)
order by E.LASTNAME, N.N; 
```

[SQL小提琴](http://sqlfiddle.com/#!4/a5b1c/4/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:13:24.933

在 SQL Server 中，如果您没有数字表，则可以使用 CTE 生成列表：

```
;with cte (id, start, numb) as
(
  select id, 1 start, len(lastname) numb
  from employees
  union all
  select id, start + 1, numb
  from cte
  where start < numb
)
select c.id, substring(e.lastname, c.start, 1)
from employees e
inner join cte c
  on c.start between 1 and len(e.lastname)
  and c.id = e.id
order by e.id, e.lastname; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3a522/11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:49:24.220

```
-----  function for splitting   
CREATE FUNCTION [dbo].[SPLIT_Test] (  
@string VARCHAR(8000) )  
 RETURNS @table TABLE (strval VARCHAR(8000))  
AS  
BEGIN  
IF  LEN(@string)>=1
BEGIN
DECLARE @fulllen int=LEN(@string),@lastlen int=0
WHILE @fulllen>@lastlen
BEGIN
INSERT INTO @table
SELECT SUBSTRING(@string,1,1)
SET @string= RIGHT(@String, LEN(@String) - 1)
SET @lastlen=@lastlen+1
END
 RETURN 
END
RETURN   
END

---- query 
GO
DECLARE @name table(name varchar(500),row int IDENTITY(1,1))
INSERT INTO @name
select LASTNAME
  FROM dbo.Employees
 WHERE LASTNAME = 'Smith'
 DECLARE @Finalname table(name varchar(50))
DECLARE @startrow int =(SELECT MAX(row) FROM @name)
,@endrow int =1
WHILE  @startrow>=@endrow
BEGIN
INSERT INTO @Finalname
Select strval from [dbo].[SPLIT_test] ((SELECT name FROM @name where row=@endrow))         WHERE strval<>''-- removing empty spaces
SET @endrow=@endrow+1
END
SELECT * FROM @Finalname 
```

# python - Python将自身的实例作为参数传递给另一个函数

> ID：12863580
> 
> 赞同：2
> 
> 时间：2012-10-12T16:44:06.670
> 
> 标签：python

我有一个 UserModel 类，它基本上会做所有的事情，比如登录和更新。

我正在尝试将自身的实例（完整类）作为参数传递给另一个类的另一个函数。

例如：（显然不是代码，但你明白了）

```
from Car import CarFactory

class UserModel:
    def __init__(self,username):
        self.username = username

    def settings(self,colour,age,height):
        return {'colour':colour,'age':age,'height':height}

    def updateCar(self,car_id):
        c = CarFactory(car_id, <<this UserModel instance>>) 
```

因此，正如您从上面最后一行看到的那样，我想将 UserModel 的一个实例传递给 CarData 类，因此在 CarData 类中我可以访问 UserModel.settings()，但是，我不确定语法. 我当然可以这样做：

```
c = CarFactory(car_id,self.settings) 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T16:45:28.497

```
c = CarFactory(car_id, self) 
```

不工作？

在旁注中，它`self.settings()`不会`self.settings`......除非您将设置定义为属性

# c++ - 上下文“use_current”的任务继续不起作用

> ID：12863583
> 
> 赞同：1
> 
> 时间：2012-10-12T16:44:13.390
> 
> 标签：c++, visual-c++, windows-8, windows-runtime, ppl

自三天前以来，我一直在尝试寻找答案。要么我做了一些根本错误的事情（有一个明显的错误），要么事情太新而没有任何参考，我似乎无法理解为什么像这样的简单案例会失败。

下面的代码在一个Windows Store应用中使用了C++中的PPL任务库，模拟了一个文件加载操作，需要2秒才能跳出循环（当然这是为了用最少的代码说明问题，真正的循环做了其他渲染也显示进展）。

如果我使用“use_current”作为延续上下文，则代码的延续部分（即“fileLoaded = true”）永远不会被调用：

```
bool fileLoaded = false;
while (!fileLoaded)
{
    concurrency::task<void>([this]()
    {
        // Simulate file load delay
        concurrency::wait(2000);

    }).then([this, &fileLoaded]()
    {
        fileLoaded = true; // This never gets executed!

        // If the following is changed to "use_default" or 
        // "use_arbitrary", then this continuation gets called.
    }, concurrency::task_continuation_context::use_current());

    concurrency::wait(50);
} 
```

如果我使用“use_default”或“use_arbitrary”，并且将“fileLoad”正确设置为“true”，则相同的代码可以工作。此代码可以放置在 Windows 应用商店 C++ 应用程序（例如 Direct2D 应用程序）中的任何位置，但它会失败（我已将其放置在“DirectXPage::DirectXPage”构造函数主体中，我希望它是主 UI 线程）。我做错了什么可怕的事情吗？

在此先感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T16:52:25.663

由于您`.then()`在 UI 线程上调用，因此`use_current()`将导致继续在 UI 线程上被安排执行。

However, that continuation cannot run until the UI thread is free (i.e., when it is not doing any work). But, in your example, the UI thread is never free: the `DirectXPage` constructor is running on the UI thread. The `DirectXPage` constructor will not return until the continuation executes and the continuation cannot execute until the `DirectXPage` constructor returns.

You need to allow the constructor to return so that the UI thread is free to do other work (like execute the continuation).

* * *

Also note that if you are using `fileLoaded` for cross-thread communication, you need to use an `std::atomic<bool>` or some other proper synchronization object. A simple `bool` is insufficient for synchronization.

# html - 什么时候空格在 HTML 中很重要？

> ID：12863588
> 
> 赞同：31
> 
> 时间：2012-10-12T16:44:25.003
> 
> 标签：html, whitespace

# [示例 1](http://jsfiddle.net/g5FBv/)

```
<div><button>one</button><button>two</button></div>

<div>
    <button>one</button>
    <button>two</button>
</div>
​ 
```

在第一个 div 中，两个按钮之间没有空格，在第二个 div 中，有。

现在让我们考虑另一个例子：

# [示例 2](http://jsfiddle.net/g5FBv/1/)

```
<div>a</div>
<div> b</div>​​​​​​​​​​​​ 
```

在此之前没有空间`b`。

# 示例 3

```
a<b> bold</b> man 
```

现在之前的空白`bold` *很*重要

# 示例 4

```
a <b> bold</b> man 
```

现在只有一个空格（在“a”之后或“bold”之前）是重要的。

# 问题

当空白被剥离或折叠时，背后的确切规则是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T19:25:07.810

现实有些复杂。有两个部分

1.  解析是做什么的。
2.  渲染的作用。

解析实际上在解析文本时删除了非常少的空白（与标记相反）。它将在[和元素的开头以及](http://dev.w3.org/html5/spec/syntax.html#element-restrictions)[无效](http://dev.w3.org/html5/spec/syntax.html#element-restrictions)元素上[删除初始换行符`<textarea>``<pre>`](http://dev.w3.org/html5/spec/syntax.html#element-restrictions)`<listing>`，但仅此而已。

Jukka 引用 HTML 4.01 部分[B.3.1 换行符](http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.3.1)说“必须忽略紧跟在开始标记之后的换行符，就像紧接在结束标记之前的换行符一样”，但这是在非规范性附录中，浏览器会这样做除了上面提到的三个要素外，不要遵循它。

这可以使用 Jukka 的示例在没有空格的换行符上进行[演示](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cdiv%3E%0A%3Cbutton%3Eone%3C%2Fbutton%3E%0A%3Cbutton%3Etwo%3C%2Fbutton%3E%0A%3C%2Fdiv%3E%0A)。注意`#text:`树形显示中按钮 elmeents 周围的节点，如果删除换行符，“#text:”节点将不再出现。

[我们还可以看到，通过使用此处](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cstyle%3E%0Ap%20%7B%20white-space%3Apre%3B%20background-color%3A%20yellow%3B%20%7D%0A%3C%2Fstyle%3E%0A%0A%3CP%3EThomas%20is%20watching%20TV.%3C%2FP%3E%0A%0A%3CP%3E%0AThomas%20is%20watching%20TV.%0A%3C%2FP%3E%0A%0A)规范中的第一个示例未应用该规则。通过添加`display:pre`很明显，换行符并没有被完全忽略，而是将两个示例呈现相同只是默认空白处理的属性`white-space:normal`

这将我们带到了相关规范，即[16.6.1 CSS 规范中的“空白”处理模型](http://www.w3.org/TR/CSS2/text.html#white-space-model)。这涵盖了应用于每个空白设置值的文本字符的系统规则。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T16:48:16.870

HTML 将连续空格折叠为单个空格，但不会消除它。换行符是空格，因此是空格。

它不仅仅是前导/尾随 - 元素中的连续空白也被呈现为单个空白。这些将相同地呈现：

```
<div>   a   b   </div>
<div> a b </div>
<div>a b</div> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-12T17:14:15.327

“空白在 HTML 中什么时候重要？”这个问题的完整答案 会相当冗长和详细，并且需要讨论属性规范和具有特殊规则（如`textarea`. 但地址似乎是主要关注点：

标签之间的空格通常会创建匿名文本节点。叶元素（不包含其他元素的元素）内的空格构成元素文本内容的一部分。

渲染的固定规则很少，但浏览器通常会忽略元素文本内容中的前导和尾随空格。

如果内联渲染的元素之间有空格（例如`button`默认的元素），它通常充当相当于一个空格的分隔符。

但是，由一个换行符组成的空格会被忽略，按照[规范](http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.3.1) ~~通常在浏览器实践中，~~当它紧跟在开始标签之后或在结束标签之前时。所以

```
<div>
<button>one</button>
<button>two</button>
</div> 
```

将被视为不存在换行符。但是当使用空格时，如

```
<div>
  <button>one</button>
  <button>two</button>
</div> 
```

然后在第一个`button`元素之前和两个`button`元素之间有匿名文本节点。通常只有后者很重要，它就像一个正常的单词空间。

**更新：**正如下面的评论和 Alohci 的回答所指出的，这个旧的（HTML 4.01）原则大多没有在浏览器中实现，并且大部分在 HTML5 中被删除。所以在大多数情况下，元素之间的换行会创建一个文本节点，其中包含一个换行符，它被视为等同于一个空格。

# asp.net-mvc-3 - MVC3 自定义服务器端数据注释验证在部分视图中不起作用

> ID：12863589
> 
> 赞同：0
> 
> 时间：2012-10-12T16:44:25.923
> 
> 标签：asp.net-mvc-3, data-annotations, partial-views, custom-attributes

我正在尝试通过数据注释添加自定义数据验证。我现在只关心服务器端验证。我在这里和其他地方看到的所有内容都参考了客户端验证。我已经剥离了所有代码，运行了一些测试用例，并且可以在常规视图上正常工作，但是一旦表单处于局部视图中，代码就不再中断覆盖 IsValid 的方法。

在任何一种情况下，我都可以看到正在初始化的自定义属性。当表单处于常规视图中时，我可以看到在提交表单时正在执行覆盖方法，但是在部分视图中代码永远不会被执行，它会直接进入 HttpPost 操作。

我花了两天的大部分时间试图弄清楚这一点，但不知所措。任何帮助将不胜感激。

注意：下面的代码在进入 HttpPost 操作时确实返回了相同的视图。我有这样的测试目的。我知道我的覆盖永远不会从局部视图中调用，因此 IsValid 始终为真。

查看显示验证工作的表单

```
@model eRecruitBoard.ViewModels.HomeIndexViewModel
@{
    ViewBag.Title = "eRecruitBoard";
}
@*<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>*@

<h2>Login/homepage</h2>

<br /><br />
 <div class="errorMessage">
 @Html.DisplayFor(m => m.LoginErrorMsg)
</div>
<br />

@using (Html.BeginForm("Index", "Home")) {
    <div id="loginControlBox">
        <fieldset>
            <legend>Welcome to eRecruitBoard</legend> 

            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>

            <div class="editor-label">
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe)
            </div>
            <div class="editor-label">
                @Html.EditorFor(m => m.Date)
                @Html.ValidationMessageFor(m => m.Date)
            </div>
            <p>
                <input type="submit" value="Log In" />
            </p>
        </fieldset>
    </div>
}
    <div>
        @Html.Action("BlankForm", "TestForm")
    </div> 
```

部分视图（这些脚本调用也通过 _Layout 传入，但我也将它们放在这里进行测试）

```
@model eRecruitBoard.ViewModels.TestFormViewModel

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>    
    <script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftMvcValidation.js")" type="text/javascript"></script>

@using (Html.BeginForm("NewActivity2", "TestForm", FormMethod.Post))
{
<fieldset>
    <legend>Test Form</legend>
    <br />
    @Html.LabelFor(m => m.Date)
    @Html.EditorFor(m => m.Date)
    @Html.ValidationMessageFor(m => m.Date)
    <input id="activityTimelineSubmit" type="submit" value="Submit" />
</fieldset>
} 
```

ViewModel（用于局部视图）

```
namespace eRecruitBoard.ViewModels
{
    public class TestFormViewModel
    {
        [Required]
        [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yyyy}")]
        [NonFutureDate()]
        [Display(Name = "Date")]
        public DateTime Date { get; set; }
    }
} 
```

控制器（用于局部视图）

```
namespace eRecruitBoard.Controllers
{
    public class TestFormController :BaseController
    {
        public ActionResult BlankForm()
        {
            var viewModel = new TestFormViewModel
            {
                Date = DateTime.Today
            };

            return PartialView("_TestForm", viewModel);
        }

        [HttpPost]
        public ActionResult NewActivity2(DateTime Date)
        {
            if (!ModelState.IsValid)
                return RedirectToAction("Index", "Home");
            else
                return RedirectToAction("Index", "Home");
        }
    }
} 
```

验证码

```
using System;
using System.ComponentModel.DataAnnotations;

namespace eRecruitBoard.WebLibrary.Validation
{
    [AttributeUsageAttribute(AttributeTargets.Class | AttributeTargets.Method | AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false, Inherited = true)]
    public class NonFutureDateAttribute : ValidationAttribute  //public sealed class 
    {
        public NonFutureDateAttribute(): base("Activity can only be saved for today or dates in the past.")
        {
        }
        public override bool IsValid(object value)
        {
            DateTime dateToCheck = (DateTime)value;
            return (dateToCheck <= DateTime.Today);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:07:47.793

如果`RedirectToAction`您失去所有验证。你必须`return PartialView(model)`在你的 POST 动作中。这将需要将参数类型更改为`NewActivity2`to`TestFormViewModel`而不是`DateTime`.

`@Html.Partial()`如果仍然无法正常工作，请使用如何显示部分视图（或 javascript）的示例更新您的代码。

# makefile - GOCFLAGS_FOR_TARGET 中的标志用于什么

> ID：12863593
> 
> 赞同：0
> 
> 时间：2012-10-12T16:44:41.897
> 
> 标签：makefile, configure, autoconf, flags

我正在尝试构建一个 GDB。configure 生成的 Makefile 包含一个名为“GOCFLAGS_FOR_TARGET”的标志。谁能告诉我“GOCFLAGS”是干什么用的？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:57:16.800

我理解 GCC 支持的 Go 编程语言的 makefile 内置变量。你可以在这里找到更多信息[。](http://blog.golang.org/2012/07/gccgo-in-gcc-471.html)

# silverlight - 使用 Pex 测试 Silverlight WP7 应用程序 - 找不到 Silverlight 5 dll 的程序集版本

> ID：12863594
> 
> 赞同：1
> 
> 时间：2012-10-12T16:44:43.173
> 
> 标签：silverlight, windows-phone-7, pex

正如 Pex 的发行说明所示，可以测试 Windows Phone 应用程序。现在我创建了一个非常基本的 Windows Phone 应用程序，并想在其中使用 Pex（运行 Pex）测试一个简单的方法。我正在使用 Visual Studio 10 Ultimate 和 Silverlight 5。按下 Run Pex 后，没有创建任何测试用例。但是出现了一些错误。它说 file:///c:\Program Files\Microsoft Silverlight\5.1.10411.0\System.Windows.dll 或未找到依赖项。但该文件存在。任何人都知道我可以如何帮助自己？

# c - 2-Opt 本地搜索实现

> ID：12863603
> 
> 赞同：1
> 
> 时间：2012-10-12T16:45:17.513
> 
> 标签：c, search, local, traveling-salesman

我正在尝试实施本地搜索（使用 2-opt）来解决旅行商问题。但是，我无法正确地重新创建一个完整的电路（节点之旅）。我认为我的算法可能有缺陷。这是我对 2-opt 的实现：

**a->b->...d->c->...a**

切换到

**a->d->...b->c->...a**

我的一般过程看起来像标准交换：将 b 存储为临时存储 c 作为 temp2 a->d b->c

我的代码如下所示：

```
node* twoOpt(double** distance_matrix, node* tour, int NUM_CITIES)
{
int rand1, rand2;
int temp, temp2;

rand1 = rand() % NUM_CITIES; //a
rand2 = rand() % NUM_CITIES; //d

do
{
    //Ensure the two numbers are different
    while (rand1 == rand2 || tour[rand1].destination == rand2 || rand1 == tour[rand2].destination)
        rand2 = rand() % NUM_CITIES;

    //Make swap
    temp = tour[rand1].destination; //b
    temp2 = tour[rand2].destination; //c

    tour[rand1].destination = rand2;
    tour[rand1].distance = distance_matrix[rand1][rand2]; //a->d

    tour[temp].destination = temp2;
    tour[temp].distance = distance_matrix[temp][temp2]; //b->c

} while(!travelTour(tour, NUM_CITIES));

return tour;
} 
```

现在我明白这段代码并不完美。例如，如果重新洗牌的两个节点没有创建完整的电路，则代码只会在再次尝试之前更改第二个节点。但我的问题是为什么我一开始就无法完成完整的巡回演出。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:52:52.050

我终于找到了问题所在。我对解决方案的概念是不完整的。我不仅需要指向 a->d 和 b->c，还需要反转新巡演中受影响的一半。换句话说，我必须**将旧路径从 b 反转为 d**。正确的代码如下：

```
do
{
    //Ensure the two numbers are different
    while (rand1 == rand2 || tour[rand1].destination == rand2 || rand1 == tour[rand2].destination)
        rand2 = rand() % NUM_CITIES;

    //Make swap
    temp = tour[rand1].destination; //b
    temp2 = tour[rand2].destination; //c

    tour[rand1].destination = rand2;
    tour[rand1].distance = distance_matrix[rand1][rand2]; //a->d

    oldNode = temp;
    currNode = tour[oldNode].destination;

    tour[temp].destination = temp2;
    tour[temp].distance = distance_matrix[temp][temp2]; //b->c

    //Swap directions of graph for d->b
    while (currNode != temp2)
    {
        nextNode = tour[currNode].destination;
        tour[currNode].destination = oldNode;
        oldNode = currNode;
        currNode = nextNode;
    }
} while(!travelTour(tour, NUM_CITIES)); 
```

它仍然不是很漂亮。如果我不得不重新启动项目，我不会以节点的形式存储我的数据。我会以边的形式存储它们，每条边都知道它的两个节点。这将使交换更容易。但尽管如此，这是我对这个设计的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:43:04.657

您需要**链条校正**：

![在此处输入图像描述](../Images/2b667daaa50196c256f24a8f00075b4d.png) 来自[Drools Planner 手册](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html)。

# mysql - SQL 优化：如何优化 MySQL 中的查询？

> ID：12863606
> 
> 赞同：0
> 
> 时间：2012-10-12T16:45:26.187
> 
> 标签：mysql, sql, query-optimization

我正在编写一个需要高度优化的解决方案的 SQL 查询，以免超时。但我不知道如何不断优化以下 SQL 查询：

```
select distinct j.job,f.path,p.path 
from fixes f, jobs j, paths p where f.job=j.id and p.id =f.path 
and (p.path like '//Tools/Web/%' or p.path = '//Tools/Web'); 
```

我在以下字段（基本上是所有内容）上创建了索引：

*   工作.id
*   工作.job
*   路径.path
*   路径.id
*   修复.job
*   修复路径

在每个“fixes”、“jobs”、“paths”表中都有 ~50,000 行，当前超时为 6 分钟

### 'explain' 命令显示以下信息，尝试破译

```
1   SIMPLE  j   index   PRIMARY         job     62   (null)    73226    Using index; Using temporary
1   SIMPLE  f   ref     path,job        job     8    j.id      825  
1   SIMPLE  p   eq_ref  PRIMARY,path    PRIMARY 8    f.path    1        Using where 
```

### 'paths' 表的表创建语句：

```
CREATE TABLE `paths` (
   `id` bigint(20) NOT NULL AUTO_INCREMENT,
   `path` varchar(250) NOT NULL,
   PRIMARY KEY (`id`),
   UNIQUE KEY `path` (`path`),
 ) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:03:04.903

这不会得到相同的结果吗？

```
select distinct j.job,f.path,p.path  
from fixes f
join  jobs j on  f.job=j.id 
join  paths p  on p.id =f.path  
where p.path like '//Tools/Web%' 
```

OR 几乎总是一个昂贵的功能。

您也可以尝试联合查询，它们通常比 OR 更快。

```
select  j.job,f.path,p.path  
from fixes f
join  jobs j on  f.job=j.id 
join  paths p  on p.id =f.path  
where p.path like '//Tools/Web/%' 
union 
select  j.job,f.path,p.path  
from fixes f
join  jobs j on  f.job=j.id 
join  paths p  on p.id =f.path  
where  p.path = '//Tools/Web'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:06:17.217

你需要 DISTINCT 吗？也许在您的数据集中您不需要它。您可以尝试不使用它重写查询，并使用 path.p 条件启动 WHERE 条件。您也可以尝试加入其他两个表。

例如

```
 select j.job,f.fix,p.path 
    from paths.p
    join fixes f on (f.path = p.id)
    join jobs j on (f.job = j.id)
    where (p.path like '//Tools/Web/%' or p.path = '//Tools/Web')

     group by job, fix, path 
```

如果您需要不同的， GROUP BY 可能会有所帮助。此外，您的原始查询中有两列称为“路径”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:47:37.233

用于`Explain your sql query`查看您的查询是否使用了这些索引

我确定您的索引是错误的，因为 6 分钟是查询的大量时间

# c# - 向面板控件添加简单文本

> ID：12863607
> 
> 赞同：19
> 
> 时间：2012-10-12T16:45:26.980
> 
> 标签：c#, asp.net

我在 C# 中有一个面板：

```
 Panel aspPanel = new Panel();
    Button aspbutton = new Button();
    aspbutton.Text = "Download PDF";
    aspbutton.Click += initDownload;
    aspPanel.Controls.Add(aspbutton);` 
```

我添加了属性和按钮以及各种很酷的动态内容。但我只想添加简单的文本，到目前为止还没有成功。

我正在寻找如何在按钮后面添加文本。最后，HTML 代码将呈现如下内容：

```
 <input type="button"/> Hello, this is a button, please click 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-12T16:48:28.000

在按钮后添加[`Literal`](http://msdn.microsoft.com/en-us/library/system.web.ui.literalcontrol.aspx)文本：

```
Panel aspPanel = new Panel();
Button aspbutton = new Button();
aspbutton.Text = "Download PDF";
aspbutton.Click += initDownload;
aspPanel.Controls.Add(aspbutton);

aspPanel.Controls.Add(new LiteralControl("some more text!")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:48:21.760

试试这个

```
Label lbl = new Label();
lbl.Text = "Hello, this is a button, please click";
aspPanel.Controls.Add(lbl); 
```

# jsp - 在 iframe 内容中的 jsp 中打印 PDF

> ID：12863616
> 
> 赞同：2
> 
> 时间：2012-10-12T16:46:04.160
> 
> 标签：jsp, pdf, printing, apache-fop

我研究了几种在 iframe 中打印 pdf 的选项，但似乎都没有。

简单细节：

1.  我从用户那里得到一些搜索参数。
2.  我进行数据库搜索，然后使用 Apachi FOP 生成结果的 PDF。
3.  他们被定向到具有打印和取消按钮的网页。
4.  当用户单击打印按钮时，它将打开一个显示 PDF 的窗口。
5.  将打开一个打印对话框供用户打印 PDF。
6.  PDF 文件将从服务器中删除。
7.  窗户关闭

高级细节：

*   这只需要在 IE8 上工作。
*   FOP 集成不使用任何 XSLT 转换。它仅使用格式化为字符串的输入 FOP XML 的 StringReader
*   显示 PDF 的窗口实际上是两个 JSP 页面。
*   第一页：
    *   具有以第二个 JSP 页面作为源的 iframe
    *   在加载时运行 printPDF() 函数，在 iframe 中打印 PDF
*   第二页：
*   使用 Java BufferedOutputStream 和 ServletOutputStream
    *   输出后会删除文件
    *   使用 out = pageContent.pushBody();

这是第一个 jsp 页面的一部分（调用 print 函数的运行）：

```
<body onload='printPDF()'>
<table>
    <tr>
        <td class="content">
            <%
            // get myfilename from the myfile parameter on the URL
            String myfile = request.getParameter("myfile");
            out.print("<iframe src='fc_view_letter.jsp?myfile="+ myfile + "' id='pdfFrame'></iframe>");
            %>
        </td>
    </tr>
</table>
<script>
    function printPDF()
    {
        var id = 'pdfFrame';
        var iframe = document.frames ? document.frames[0] : document.getElementById(id);
        var ifWin = iframe.contentWindow || iframe;

        ifWin.focus();
        ifWin.printPage();
        //ifWin.print();
    }
</script>
</body> 
```

这是第二个 JSP 页面（显示 pdf 的页面）的大部分内容：

```
<%@ page session="false" %>
<%@ page import="java.io.*" %>
<%@ page import="java.net.URLDecoder" %>
<html>
<head>
</head>
<body>
<%
String myfile = request.getParameter("myfile");
String myfiledecoded = "";
myfiledecoded = URLDecoder.decode(myfile, "UTF8");
String myfilename = myfiledecoded;
String extension;
int dotPos = myfilename.lastIndexOf(".")+1;
extension = myfilename.substring(dotPos);
int slashPos = myfilename.lastIndexOf("/")+1;
String secondparam = "filename=" + myfiledecoded.substring(slashPos);
response.setContentType("application/pdf");
response.setHeader("Content-Disposition", secondparam);
try {
        ServletOutputStream sout = response.getOutputStream();
        response.setHeader("Content-Disposition", secondparam);

        File  file  = new File(myfilename);
        FileInputStream fstream = new FileInputStream(file);

        BufferedInputStream bis = null;
        bis = new BufferedInputStream(fstream);

        BufferedOutputStream bos = null;
        bos = new BufferedOutputStream(sout);

        byte[] buff = new byte[1024];
        int bytesRead;

        while(-1 != (bytesRead = bis.read(buff, 0, buff.length))) {
             bos.write(buff, 0, bytesRead);
        }

         bis.close();
         bos.close();

         sout.flush();
         sout.close();

         //file.delete();

}
catch (Exception e)  {    
 System.out.println("Exception Occured...................." );
}
   out.clear();
    out = pageContext.pushBody();
%>
</body>
</html> 
```

我认为是问题所在：我认为缓冲区消除了所有 html 并且只显示 PDF。或者至少它在 IE 中做到了这一点。当我查看 Firefox 时，它嵌入了 PDF 文件。也许我无法获取 iframe 的内容，因为它不再是 HTML。

到目前为止，这是我的来源：

[Javascript 仅打印 iframe 内容](https://stackoverflow.com/questions/9616426/javascript-print-iframe-contents-only)

[pdf生成后如何打开打印对话框？](https://stackoverflow.com/questions/8733276/how-to-open-print-dialog-after-pdf-generated)

[http://www.ehow.com/how_7352227_use-javascript-print-pdf.html](http://www.ehow.com/how_7352227_use-javascript-print-pdf.html)

[http://www.webmasterworld.com/forum91/4086.htm](http://www.webmasterworld.com/forum91/4086.htm)

[如何使用 javascript 在 embed/iframe 中打印 pdf](https://stackoverflow.com/questions/7494243/how-to-print-pdf-inside-embed-iframe-using-javascript)

[从父窗口打印动态创建的 iframe 的内容](https://stackoverflow.com/questions/831147/printing-contents-of-a-dynamically-created-iframe-from-parent-window)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T13:29:45.383

我最终做的是生成 PDF 然后使用 iText 我添加了一些在加载 PDF 时运行的打印 JavaScript

# python - 使用 requests 库进行身份验证时，响应存储在哪里？

> ID：12863618
> 
> 赞同：1
> 
> 时间：2012-10-12T16:46:15.497
> 
> 标签：python, http, authentication, post, python-requests

我正在尝试`requests`使用`Python`. 当我的测试失败（使用错误的用户名密码）时，我想从应用程序中捕获错误消息。问题是，我找不到存储它的对象的属性。

一直在使用在[HTTP POST 和 GET 中找到的答案与 cookie 在 python 中进行身份验证](https://stackoverflow.com/questions/10247054/http-post-and-get-with-cookies-for-authentication-in-python/10248314#10248314)。他们提到了从 Web 应用程序收到的回复，以确认凭据是否有效，但没有提及属性。

我使用了他们的 Python 代码，但在任何属性中都找不到回复：

```
>>> r.__dict__.keys()
>>> ['cookies', '_content', 'headers', 'url', 'status_code', '_content_consumed', 'encoding', 'request', 'raw', 'error', 'config', 'history'] 
```

任何指针？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:54:15.813

您是否尝试过查看该模块[的文档](http://docs.python-requests.org/en/latest/user/quickstart/)`requests`？（提示`r.text`：）

（它不在，`r.__dict__`因为它不是实例的属性。它是一个属性，因此存储在类中。 `dir(r)`不过会找到它。）

# javascript - 使用 jQuery 单击后设置默认图像

> ID：12863627
> 
> 赞同：0
> 
> 时间：2012-10-12T16:46:50.927
> 
> 标签：javascript, jquery, html

我只想在单击图像时看到新图像，并且在单击后我希望新图像更改为默认图像，但是我必须拖动鼠标才能看到默认图像，但我不希望那样。

这是我的代码：

```
$(document).ready(function(){
    $(".img-button").live('click', function () {
           $(this).attr("src","images/pressed.svg");
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:56:09.617

如果你只有一张图片，我建议你给它一个 ID 而不是（ab）使用类名。如果您有多个并且全部使用相同的图像，则将下面的 $("#myImage") 更改为 $(".img-button")

切换

```
$(document).ready(function(){
    $("#myImage").toggle(
     function() {
       $(this).attr('src','images/pressed.jpg');
     },
     function() {
       $(this).attr('src',"images/default.jpg");
    });
}); 
```

离开后交换

```
$(document).ready(function(){
    $('#myImage').on("click",function() {
       $(this).attr('src','images/pressed.jpg');
    });
    $('#myImage').on("mouseleave",function() {
       $(this).attr('src',"images/default.jpg");
    });
}); 
```

按下后半秒交换

```
$(document).ready(function(){
    $('#myImage').on("click",function() {
       $(this).attr('src','images/pressed.jpg');
       setTimeout(function() {
         $('#myImage').attr('src',"images/default.jpg");
       },500);
    });
}); 
```

# java - 如何在 Caché 中使用 Java 方法？

> ID：12863628
> 
> 赞同：3
> 
> 时间：2012-10-12T16:46:51.783
> 
> 标签：java, intersystems-cache, objectscript

我最近读到可以通过使用语言属性在类中使用 Java 方法。

我试过这个：

```
Method JavaTest() As %String [ Language = java, WebMethod ]
{
    string tmp = "Hello World";
    return tmp;
} 
```

代码可以编译，但是在调用该方法时会返回错误：

```
ERROR #5002: Cache error: <METHOD DOES NOT EXIST> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:35:05.190

据我所知，当您使用 %Projection.Java 类从 Cache 创建 Java 类时，该工具就存在。无论如何，如果您确实使用了 Java 投影，那么该方法实际上会被投影到所创建的 Java 类中。

```
Class SomePackage.JavaTest Extends %Persistent
{

Method JavaTestyTest() As %String [ Language = java, WebMethod ]
{
    string tmp = "Hello World";
    return tmp;
}
Method bleh() as %Library.String
{
    q "bleh"
}
Projection NewProjection1 As %Projection.Java(ROOTDIR = "C:\trans");

} 
```

生成太多 Java 无法显示所有内容，但它包括

```
public java.lang.String JavaTestyTest () {
       string tmp = "Hello World";
       return tmp;
} 
```

和

```
public java.lang.String bleh () throws com.intersys.objects.CacheException {
    com.intersys.cache.Dataholder[] args = new com.intersys.cache.Dataholder[0];
    com.intersys.cache.Dataholder res=mInternal.runInstanceMethod("bleh",args,com.intersys.objects.Database.RET_PRIM);
    return res.getString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:12:20.247

实际上 %Projection 类用于将 Cache 类投影*到*Java。它们生成可以在 Java 项目中使用的 Java 代理类。

为了使用 Java 类和方法，您需要 Java Gateway，它是 Ensemble 和 AFAIK 的一部分，而不是 Cache 的一部分。

# redgate - RedGate SQL 源代码控制没有选择迁移脚本

> ID：12863629
> 
> 赞同：0
> 
> 时间：2012-10-12T16:46:59.090
> 
> 标签：redgate

我有 3 个使用带有 SVN 的 RedGate SQL 源代码控制的 SQL Sever 数据库。当我创建自定义迁移脚本时，它会被 3 个数据库中的 1 个提取，但不会被另一个提取。这是我正在使用的命令行：

"C:\Program Files (x86)\Red Gate\SQL Compare 10\sqlcompare" /server1:dev03 /db1:Dev_CORE /version1:head /server2:testsql01 /db2:Test_Core /username2:foo /password2:bar /ScriptFile: "C:\MigrationScriptCore.sql" /Force /verbose

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:46:59.090

Redgate 使用 SQL Server 扩展属性来确定数据库的 SVN 版本，以及在哪里可以找到它需要运行以更新数据库的脚本。真正愚蠢的是，这些扩展属性是区分大小写的。所以我的开发数据库中的 SVN 路径是：

SQLSourceControl 迁移脚本位置

```
<?xml version="1.0" encoding="utf-16" standalone="yes"?>
<ISOCCompareLocation version="1" type="SvnLocation">
  <RepositoryUrl>http://svn.company.com/svn/**DIR1**/trunk/Database/Core/MigrationScripts/</RepositoryUrl>
</ISOCCompareLocation> 
```

在我的测试数据库中是：

SQLSourceControl 迁移脚本位置

```
<?xml version="1.0" encoding="utf-16" standalone="yes"?>
<ISOCCompareLocation version="1" type="SvnLocation">
  <RepositoryUrl>http://svn.company.com/svn/**dir1**/trunk/Database/Core/MigrationScripts/</RepositoryUrl>
</ISOCCompareLocation> 
```

redgate 的人无法立即解决我的问题，但经过大量试验和错误后，我终于找到了属于我自己的问题。希望这会为一些人节省很多时间！

干杯。

# r - for() 循环步长

> ID：12863637
> 
> 赞同：8
> 
> 时间：2012-10-12T16:47:31.143
> 
> 标签：r, loops, for-loop

让我有一个像

```
a <- seq(1, 100, 1) 
```

我想只选择每 3 步出现的元素，并`for()`从第二步开始循环，例如 2、5、8、11 等等。

在这种情况下我应该如何使用`for()`？

```
b <- NULL
# for(i in 1:length(a)) { # Is there any additional argument?
   # b[i] <- a[...] # Or I can just multiply 'i' by some integer?
# } 
```

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T16:48:52.833

用作in`3`的值`by``seq`

```
for (i in seq(2, length(a), by=3)) {}

> seq(2, 11, 3)
[1]  2  5  8 11 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T17:12:27.960

为什么使用`for`？

```
 b <- a[seq(2,length(a),3)] 
```

# php - Sphinx 搜索使用命令行返回的结果与 php api 不同

> ID：12863641
> 
> 赞同：0
> 
> 时间：2012-10-12T16:47:42.820
> 
> 标签：php, mysql, search, search-engine, sphinx

**命令行搜索**（26019 个文档 / 26019 个命中）

```
search.exe --config c:\sphinx\sphinx.conf keyword 
```

或者

```
search.exe --config c:\sphinx\sphinx.conf keyword -e2 
```

**PHP API**（总数：1000 / 找到总数：51038）

```
//sphinx command line and php api

mysql_connect("localhost", "username", "password");
mysql_select_db("database");

require_once('sphinxapi.php');

$cl = new SphinxClient;
$cl->setServer("127.0.0.1", 9312); // NOT "localhost" under Windows 7!
$cl->setMatchMode(SPH_MATCH_EXTENDED2);
$cl->SetLimits(0, 20);

$result = $cl->Query("keyword");

if ($result['total'] > 0)
{
    echo 'Total: ' . $result['total'] . "<br />\n";
    echo 'Total Found: ' . $result['total_found'] . "<br />\n";
    echo '<table>';
    echo '<tr><td>ID</td><td>Date</td><td>Title</td><td>Content</td></tr>';

    foreach ($result['matches'] as $id => $otherStuff)
    {
        $row = mysql_fetch_array(mysql_query("select * from table where id = $id"));
        extract($row);

        echo "<tr><td>$id</td><td>$date</td><td>$title</td><td>$content</td></tr>";
    }
    echo '</table>';
}
else
{
    echo 'No results found';
} 
```

匹配模式：

SPH_MATCH_ALL / SPH_MATCH_ANY / SPH_MATCH_PHRASE / SPH_MATCH_BOOLEAN / SPH_MATCH_EXTENDED / SPH_MATCH_EXTENDED2

**PS：命令行结果是正确的，因为我直接从 MySQL 进行了选择，我也得到了它。**

```
$sql = "SELECT t1.field1, t1.field2, t1.field3, t2.field4
    FROM t_table1 AS t1
    LEFT JOIN t_table2 AS t2 ON t2.id = t1.t2_id WHERE t2.field4 LIKE 'keyword'"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:53:49.580

在这里回答：

[http://sphinxsearch.com/docs/manual-2.0.5.html#conf-max-matches](http://sphinxsearch.com/docs/manual-2.0.5.html#conf-max-matches)

除非您打算在同一页面上使用 26019 匹配项，否则我建议您使用分页（如果您只显示结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:52:47.843

忘记你找到“search.exe”。忽略它。真的。忘掉它。现在。我会等。

现在结束了，尝试具体说明您要搜索的索引（在 Query 函数调用上）

同样为您获得的每一行运行一次查询也不好。您应该只针对所有结果发出一个 SQL 查询。mysql IN() 函数使它变得容易。

示例[http://www.nearby.org.uk/sphinx/search-example5-withcomments.phps](http://www.nearby.org.uk/sphinx/search-example5-withcomments.phps)

更基本但仍然有效的示例[http://www.nearby.org.uk/sphinx/search-example2.phps](http://www.nearby.org.uk/sphinx/search-example2.phps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:57:01.897

Sphinx 仅限于返回 1000 个结果。

有一些提高该限制的建议，因此请查看他们的页面。请注意，您可以将旧 sphinx 版本中的该数字更改为您想要的任何值，但它会返回 1000 作为最大值。

# google-chrome - 寻找有关 chrome 调试器的信息

> ID：12863642
> 
> 赞同：0
> 
> 时间：2012-10-12T16:47:50.407
> 
> 标签：google-chrome

我试图了解如何从 chrome 调试器中获取以下信息：页面上有一个事件是由单击输入文件类型标记触发的。但是我无法追溯机制：触发事件时调用了哪个js文件。有没有办法从调试器中获取这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:11:16.393

您是否查看了右侧窗口中的 Event Listeners 条目？如果我右键单击帖子底部的“Google-Chrome”标签，然后选择“检查元素”，则会突出显示 html 标签。然后，如果我查看右侧窗格中的事件侦听器，我可以看到该元素具有用于模糊、单击、keyup、keydown、mousedown、mouseout、mouseover 的处理程序。然而，只看html我看不到。如果我展开事件处理程序，我可以看到它们都指向“jquery.min.js : 3”。这是因为该文件已被最小化并且只有 4 行——每行可能有 20 或 25,000 个字符长。不幸的是，最小化的脚本很难分析。

尝试使用不使用最小化脚本的页面，您可以单击事件处理程序窗口中的链接以直接转到相关函数 - 不幸的是，您被带到相关行的开头，这使得 jquery.min .js 这样做是浪费时间。您始终可以使用脚本的非缩小版本进行调试，切换到缩小版本进行生产。

对于其他页面，您有时可以在链接脚本的未缩小版本之前保存本地副本。

![在此处输入图像描述](../Images/bdd1fbcfcc4d7c256c2f984f26c93300.png)

# jquery - 为什么此功能不会在 Jquery 可排序 UI 中的 li 元素中添加复选框？

> ID：12863644
> 
> 赞同：1
> 
> 时间：2012-10-12T16:48:11.240
> 
> 标签：jquery, class, add, jquery-ui-sortable

我正在使用 Jquery 可排序的列表，该列表是从外部网页加载的。li 内容在用户单击选项卡时加载。这可行，但我也尝试为可排序列表中的每个 li 元素添加一个复选框输入：

```
<script type="text/javascript"> // loads slides when user clicks tab
        window.onload = function() {
        var a = document.getElementById("fvsortid");

          a.onclick = function() {
          $("#sortable").load("file.xml");
          $('<input type="checkbox" class="liChk" />').prependTo('#sortable li');
          }

        }   
</script> 
```

为什么不添加复选框？

这是 HTML（在从外部页面加载 li 列表之前）：

```
<div id="tabs-2">

        <ul id="sortable">

        </ul>

<div id="adder">
<input class='btn' type='submit' value='Add Slide' />
</div>

    </div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:53:33.460

由于您使用的是 jQuery，因此只需将 jQuery 的**prepend()**直接用于父级，如下所示：

```
$(document).on('click', '.btn', function() {
    $("#sortable").load("file.xml");
    $("#sortable").prepend('<input type="checkbox" class="liChk" />');
}); 
```

​</p>

在这里提琴：

[http://jsfiddle.net/9Ryfg/](http://jsfiddle.net/9Ryfg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:55:28.197

在我看来，在调用 prependTo 之前， .load(xmlFile) 行可能尚未完成执行或加载。因此，不存在 li 。

您可以在加载完成后使 prepend 函数成为回调。

```
a.onclick = function() {
          $("#sortable").load("file.xml", function(){
                $('<input type="checkbox" class="liChk" />').prependTo('#sortable li');
          });
} 
```

或者，这里是一个如何在 500 毫秒延迟后调用前置的示例。

```
a.onclick = function() {
          $("#sortable").load("file.xml");
          setTimeout(function(){
                 $('<input type="checkbox" class="liChk" />').prependTo('#sortable li');
          }, 500);
} 
```

# jquery - 菜单卡在 IE7、IE8 中 - 吸盘？

> ID：12863645
> 
> 赞同：-3
> 
> 时间：2012-10-12T16:48:15.830
> 
> 标签：jquery, html, css, joomla, navigation

请在 Chrome/Firefox/IE9 中查看[http://www.netcoremodeling.com](http://www.netcoremodeling.com)，然后在 IE8、IE7 中查看。在 IE7 或 IE8 中，您会发现菜单停留在悬停状态并且不会在鼠标移出时关闭。

这是一个非常过时的网站，曾经是在 Joomla 中构建的，但后来在一个非常混乱的、最短的时间内被拉到一个静态站点中。几个小时以来，我一直在寻找快速解决方案，但没有任何相关的弹出或工作。

看着这个，谁能给我一个提示，什么可以快速解决这个问题？无需从头开始重建整个菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:07:10.867

> 消息：对象不支持此属性或方法
> 行：20
> 字符：4
> 代码：0
> URI： http: [//www.netcoremodeling.com/ja_menus/ja_cssmenu/ja.cssmenu.js](http://www.netcoremodeling.com/ja_menus/ja_cssmenu/ja.cssmenu.js)

```
sfHover = function() {
    var sfEls = document.getElementById("ja-cssmenu").getElementsByTagName("li");
    for (var i=0; i<sfEls.length; ++i) {
        sfEls[i].onmouseover=function() {
            clearTimeout(this.timer);
            if(this.className.indexOf("sfhover") == -1)
                this.className+= "sfhover";
        }
        sfEls[i].onmouseout=function() {
            this.timer = setTimeout(sfHoverOut.bind(this), 20); <-- this line
        }
    }
} 
```

但实际上，整个 js 文件有点用处，所以你可以将其删除。

```
<script language="javascript" type="text/javascript" src="/ja_menus/ja_cssmenu/ja.cssmenu.js"></script> 
```

# objective-c - Objective-C 块和变量

> ID：12863648
> 
> 赞同：8
> 
> 时间：2012-10-12T16:48:19.080
> 
> 标签：objective-c, variables, objective-c-blocks

我今天开始使用 Objective-C 块。我写了以下代码：

```
NSArray *array = @[@25, @"abc", @7.2];

void (^print)(NSUInteger index) = ^(NSUInteger index)
{
    NSLog(@"%@", array[index]);
};

for (int n = 0; n < 3; n++)
    print(n); 
```

哪个工作正常。不过，我需要`array`在声明后更改变量，所以我尝试使用以下代码：

```
NSArray *array;

void (^print)(NSUInteger index) = ^(NSUInteger index)
{
    NSLog(@"%@", array[index]);
};

array = @[@25, @"abc", @7.2];

for (int n = 0; n < 3; n++)
    print(n); 
```

但是，这是行不通的。控制台只打印`(null)`三遍。为什么这不起作用，而它确实适用于我的第一段代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-12T16:50:27.980

这是因为块*按值*和*创建*块的时间捕获变量（除非您使用`__block`）。

你可能想要的是：

```
NSArray *array = @[@25, @"abc", @7.2];

void (^print)(NSUInteger index) = ^(NSUInteger index)
{
    NSLog(@"%@", array[index]);
};

for (int n = 0; n < 3; n++)
    print(n); 
```

示例`__block`：

```
__block NSArray *array;

void (^print)(NSUInteger index) = ^(NSUInteger index)
{
    NSLog(@"%@", array[index]);
};

array = @[@25, @"abc", @7.2];

for (int n = 0; n < 3; n++)
    print(n); 
```

`__block`请注意，如果您实际上不需要修改块内的变量并将其反映在外部，则使用它的效率会降低一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:53:13.137

该块在创建时捕获`array`指针。您可以添加`__block`修饰符以使块通过引用捕获指针，但这通常代价高昂且不推荐。最好在数据准备好在块内使用之后创建捕获块。

# sql - 如果两个表中存在记录，则添加一列

> ID：12863652
> 
> 赞同：0
> 
> 时间：2012-10-12T16:48:32.283
> 
> 标签：sql

我有两张桌子。一个是所有类别的列表。另一个是事物可能属于的类别列表。一个事物可以属于多个类别（表二中可能有多个记录）

所以我有

桌子：

```
categories 
1,   horror
2,   romance
3,   post modern
4,   Canadian
5,    English

...
2340 
```

然后是另一个表，thingToCategories，有两列（thingID，categoryID）

```
thingID   categoryID
6323-01    1
6323-01    4
6323-01    5
1342-01    2
1342-01    4 
```

给定一个thingID，我需要一个所有类别的列表（如从表A中选择*），并指示该事物ID是否存在于表B中

因此，鉴于 thingID 为 6323-01，我需要这样的列表：

```
1,   horror    selected
2,   romance
3,   post modern
4,   Canadian   selected
5,    English   selected 
```

我的 SQL 技能生疏且糟糕，我什至不确定要使用哪种联接。任何人都可以提供任何指示吗？

（我继承了这个数据库，fwiw）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:52:20.200

我想你正在寻找一个`INNER JOIN`

```
SELECT * FROM categories
INNER JOIN thingsToCategories ON categories.CategoryID = thingsToCategories.CategoryID
WHERE thingsToCategories.thingID ='6323-01' 
```

INNER JOIN 将确保基于两个表中匹配的记录进行选择。

# sql - PLS/QL：讨厌的游标错误

> ID：12863658
> 
> 赞同：0
> 
> 时间：2012-10-12T16:48:51.427
> 
> 标签：sql, oracle, plsql, cursor

我需要一个 PL/SQL 的帮助。事实上，我不明白为什么甲骨文不想接受这个代码：

```
set serveroutput on;
CREATE OR REPLACE PROCEDURE route (gagnant VARCHAR2) IS

CURSOR perdants IS SELECT NPerdant FROM RENCONTRE WHERE NGagnant = gagnant;

BEGIN
        FOR perdant IN perdants
        LOOP
                dbms.output.put_line(gagnant || ' bats ' || perdants.nperdant);
                route (perdants.nperdant);
        END LOOP;
END;
/ 
```

这是 show errors 命令的结果：

```
LINE/COL     ERROR
10/17    PL/SQL: Statement ignored
10/70    PLS-00225: référence de sous-programme ou de curseur 'PERDANTS' e st hors étendue
11/17    PL/SQL: Statement ignored
11/33    PLS-00225: référence de sous-programme ou de curseur 'PERDANTS' e st hors étendue 
```

`perdants`所以它告诉我由于范围问题它无法访问光标。但我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:41:02.447

以下是有问题的地方：

第一的：

```
FOR perdant IN perdants
LOOP
   dbms.output.put_line(gagnant || ' bats ' || perdants.nperdant);
    route (perdants.nperdant);
END LOOP; 
```

你的循环变量`perdant`不是`perdants`，所以你应该重写`perdants.nperdant`为 `perdant.nperdant`。

第二：

```
dbms.output.put_line(...); 
```

包名是`dbms_output`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:39:26.573

我认为您想使用`perdant.nperdant`（没有`s`）而不是`perdants.nperdant`. 否则你没有使用循环变量`perdant`。

# android - 滚动listView后convertView丢失onitemClick

> ID：12863662
> 
> 赞同：3
> 
> 时间：2012-10-12T16:49:04.203
> 
> 标签：android, android-adapter, android-adapterview

我的适配器上出现了一个稍微奇怪的错误。适配器正在创建的视图是左侧的缩略图和包含几行的表格。每行有两个文本视图。

其中`android:autoLink="web"`一个文本视图设置了属性，而列表视图上有一个 onItemClickListener。

问题是每次 TextView 自动链接它的内容时，下一次转换它的父视图时，它不再接收来自 onItemClickListener 的点击。

让我用一个例子来澄清：

*   view1、view2、view3 和 view4 在屏幕的列表视图中。
*   view2 有一个链接，它会出现，然后 onClick 链接会打开。
*   项目单击对 view1、view 3 和 view4 正常工作。
*   滚动列表视图，view1 转换为 position5，然后 view2 转换为 position6。
*   position6 处的项目不包含链接，但 onItemClick 也不会为 position6 元素触发。

textview 的自动链接功能肯定会改变我的布局，但我不知道是什么。必须有一个属性我可以为我的适配器上的每次调用 getView 重置，但是哪个？

谢谢你的帮助。

**编辑**

让我们看一些代码，这是非常标准/良好的做法。我的适配器的 getView 是：@Override public View getView(int position, View convertView, ViewGroup parent) {

```
 // Inflate a new layout if needed
    if (convertView == null)
        convertView = createNewView();

    // Gets the item from my array
    AGplus item = (AGplus) getItem(position);
    // Gets the holder pointing to the views
    Holder h = (Holder) convertView.getTag();
    // That's a test version, I won't be using date.toString() later on
    h.date.setText(new Date(item.getDate()).toString());
    // This guys is giving me a headache,
    // If it parses the link, I can't never click on this convertView anymore,
    // event re-converting them for a text that does not contain links
    h.txt.setText(item.getTitle());

    // some image download stuff that doesn't matter for this code

    return convertView;
    } 
```

使用的布局是图像和表格，并且我在表格上膨胀和插入的行数因每个适配器而异。表格布局是带有图像视图的水平线性布局和带有一些边距的表格布局，这是行布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/text" />

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:autoLink="web"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/text" />

    </TableRow> 
```

如果我完全删除`android:autoLink="web"`我会获得所有点击，但如前所述，一旦视图获得“自动链接”然后我回收该视图，我将无法再次点击该视图。

**编辑**

这是布局膨胀：

```
 private View createNewView() {

    // Instantiate view
    View v = getLayoutInflater().inflate(R.layout.expandable_child_view, null);
    TableLayout table = (TableLayout) v.findViewById(R.id.table);
    Holder h = new Holder();
    v.setTag(h);

    // Instantiate rows
    h.thumb = (ImageView) v.findViewById(R.id.img);
    h.date = (TextView) createNewRow(table, "Date: ");
    h.txt = (TextView) createNewRow(table, "Text: ");
    return v;
    }

    private View createNewRow(ViewGroup group, String title) {
    View row;
    row = getLayoutInflater().inflate(R.layout.item_table_row, null);
    ((TextView) row.findViewById(R.id.title)).setText(title);
    group.addView(row);
    return row.findViewById(R.id.text);
    } 
```

在别人问之前，这就是 expandable_child_view 布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_vertical" >

        <ImageView
            android:id="@+id/img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="40dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="20dp"
            android:src="@drawable/ic_launcher" />

        <TableLayout
            android:id="@+id/table"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </TableLayout>
    </LinearLayout> 
```

正如我之前所说，只是一个带有图像视图和表格以及一些边距的线性布局。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T13:02:30.823

根据 Romain Guy[的](http://code.google.com/p/android/issues/detail?id=3414)说法，这是为了支持轨迹球/dpad 导航而设计的。[评论 27](http://code.google.com/p/android/issues/detail?id=3414#c27)有一个解决方法，通过在每个列表视图项上设置后代可聚焦性：

```
setDescendantFocusability(FOCUS_BLOCK_DESCENDANTS); 
```

或者

```
android:descendantFocusability="blocksDescendants" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:46:07.103

我想我知道可能会发生什么。当你执行 setText() 时，有时它会清除很多东西。您可能必须使用 ClickableSpan 将链接操作放回文本视图。

# javascript - 部分和模板的复杂嵌套

> ID：12863663
> 
> 赞同：506
> 
> 时间：2012-10-12T16:49:09.247
> 
> 标签：javascript, angularjs

我的问题涉及如何在 AngularJS 应用程序中处理复杂的**模板**嵌套（也称为**partials**）。

描述我的情况的最佳方式是使用我创建的图像：

![AngularJS 页面图](../Images/ab0e849efc68702ac56f4d4f9e914e39.png)

正如您所看到的，这有可能成为一个包含大量嵌套模型的相当复杂的应用程序。

该应用程序是单页的，因此它加载了一个**index.html**，其中包含 DOM 中的 div 元素和`ng-view`属性。

**对于第 1 圈**，您会看到有一个主导航，可将适当的模板加载到`ng-view`. 我通过传递`$routeParams`给主应用程序模块来做到这一点。这是我的应用程序中的示例：

```
angular.module('myApp', []).
    config(['$routeProvider', function($routeProvider) {
        $routeProvider.                     
            when("/job/:jobId/zones/:zoneId", { controller: JobDetailController, templateUrl: 'assets/job_list_app/templates/zone_edit.html' }).
            when("/job/:jobId/initial_inspection", { controller: JobDetailController, templateUrl: 'assets/job_list_app/templates/initial_inspection.html' }).
            when("/job/:jobId/zones/:zoneId/rooms/:roomId", { controller: JobDetailController, templateUrl: 'assets/job_list_app/templates/room_edit.html' })       

    }]); 
```

**在圈子 2**中，加载到 中的模板`ng-view`有一个额外的**子导航**。然后这个子导航需要将模板加载到它下面的区域 - 但由于 ng-view 已经被使用，我不知道如何去做。

我知道我可以在第一个模板中包含其他模板，但是这些模板都会非常复杂。我想将所有模板分开，以使应用程序更容易更新，并且不依赖于必须加载父模板才能访问其子模板。

**在圈子 3**中，您可以看到事情变得更加复杂。子导航模板有可能具有**第二个子导航，该子导航**需要将其自己的模板也加载到第**4 圈中的区域中**

**如何构建一个 AngularJS 应用程序来处理如此复杂的模板嵌套，同时保持它们彼此分离？**

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-10-15T21:03:21.647

### *更新：* [查看 AngularUI 的新项目来解决这个问题](https://github.com/angular-ui/ui-router)

* * *

对于小节，它就像利用 ng-include 中的字符串一样简单：

```
<ul id="subNav">
  <li><a ng-click="subPage='section1/subpage1.htm'">Sub Page 1</a></li>
  <li><a ng-click="subPage='section1/subpage2.htm'">Sub Page 2</a></li>
  <li><a ng-click="subPage='section1/subpage3.htm'">Sub Page 3</a></li>
</ul>
<ng-include src="subPage"></ng-include> 
```

或者，您可以创建一个对象，以防您到处都有指向子页面的链接：

```
$scope.pages = { page1: 'section1/subpage1.htm', ... }; 
```

```
<ul id="subNav">
  <li><a ng-click="subPage='page1'">Sub Page 1</a></li>
  <li><a ng-click="subPage='page2'">Sub Page 2</a></li>
  <li><a ng-click="subPage='page3'">Sub Page 3</a></li>
</ul>
<ng-include src="pages[subPage]"></ng-include> 
```

或者你甚至可以使用`$routeParams`

```
$routeProvider.when('/home', ...);
$routeProvider.when('/home/:tab', ...);
$scope.params = $routeParams; 
```

```
<ul id="subNav">
  <li><a href="#/home/tab1">Sub Page 1</a></li>
  <li><a href="#/home/tab2">Sub Page 2</a></li>
  <li><a href="#/home/tab3">Sub Page 3</a></li>
</ul>
<ng-include src=" '/home/' + tab + '.html' "></ng-include> 
```

您还可以在每个部分的最顶层放置一个 ng-controller

* * *

## 回答 #2

> 赞同：172
> 
> 时间：2012-10-12T17:21:38.933

好吧，因为你目前只能有一个 ngView 指令......我使用嵌套指令控件。这允许您设置模板并在它们之间继承（或隔离）范围。除此之外，我使用 ng-switch 甚至只是 ng-show 来根据来自 $routeParams 的内容来选择要显示的控件。

**编辑**这是一些示例伪代码，让您了解我在说什么。带有嵌套的子导航。

这是应用程序的主页面

```
<!-- primary nav -->
<a href="#/page/1">Page 1</a>
<a href="#/page/2">Page 2</a>
<a href="#/page/3">Page 3</a>

<!-- display the view -->
<div ng-view>
</div> 
```

子导航指令

```
app.directive('mySubNav', function(){
    return {
        restrict: 'E',
        scope: {
           current: '=current'
        },
        templateUrl: 'mySubNav.html',
        controller: function($scope) {
        }
    };
}); 
```

子导航模板

```
<a href="#/page/1/sub/1">Sub Item 1</a>
<a href="#/page/1/sub/2">Sub Item 2</a>
<a href="#/page/1/sub/3">Sub Item 3</a> 
```

主页模板（来自主导航）

```
<my-sub-nav current="sub"></my-sub-nav>

<ng-switch on="sub">
  <div ng-switch-when="1">
      <my-sub-area1></my-sub-area>
  </div>
  <div ng-switch-when="2">
      <my-sub-area2></my-sub-area>
  </div>
  <div ng-switch-when="3">
      <my-sub-area3></my-sub-area>
  </div>
</ng-switch> 
```

主页面的控制器。（来自主要导航）

```
app.controller('page1Ctrl', function($scope, $routeParams) {
     $scope.sub = $routeParams.sub;
}); 
```

子区域指令

```
app.directive('mySubArea1', function(){
    return {
        restrict: 'E',
        templateUrl: 'mySubArea1.html',
        controller: function($scope) {
            //controller for your sub area.
        }
    };
}); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-08-15T10:05:47.087

您也可以出于相同目的签出此库：

[http://angular-route-segment.com](http://angular-route-segment.com)

看起来和你要的一样，使用起来比ui-router简单多了。从[演示站点](http://angular-route-segment.com/src/example/)：

JS：

```
$routeSegmentProvider.

when('/section1',          's1.home').
when('/section1/:id',      's1.itemInfo.overview').
when('/section2',          's2').

segment('s1', {
    templateUrl: 'templates/section1.html',
    controller: MainCtrl}).
within().
    segment('home', {
        templateUrl: 'templates/section1/home.html'}).
    segment('itemInfo', {
        templateUrl: 'templates/section1/item.html',
        controller: Section1ItemCtrl,
        dependencies: ['id']}).
    within().
        segment('overview', {
            templateUrl: 'templates/section1/item/overview.html'}). 
```

顶级 HTML：

```
<ul>
    <li ng-class="{active: $routeSegment.startsWith('s1')}">
        <a href="/section1">Section 1</a>
    </li>
    <li ng-class="{active: $routeSegment.startsWith('s2')}">
        <a href="/section2">Section 2</a>
    </li>
</ul>
<div id="contents" app-view-segment="0"></div> 
```

嵌套 HTML：

```
<h4>Section 1</h4>
Section 1 contents.
<div app-view-segment="1"></div> 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-09-03T11:51:44.543

我也在 Angular 中的嵌套视图中苦苦挣扎。

一旦我掌握了[ui-router](https://github.com/angular-ui/ui-router)，我就知道我永远不会回到角度默认路由功能。

这是一个使用多层视图嵌套的示例应用程序

```
app.config(function ($stateProvider, $urlRouterProvider,$httpProvider) {
// navigate to view1 view by default
$urlRouterProvider.otherwise("/view1");

$stateProvider
    .state('view1', {
        url: '/view1',
        templateUrl: 'partials/view1.html',
        controller: 'view1.MainController'
    })
    .state('view1.nestedViews', {
        url: '/view1',
        views: {
            'childView1': { templateUrl: 'partials/view1.childView1.html' , controller: 'childView1Ctrl'},
            'childView2': { templateUrl: 'partials/view1.childView2.html', controller: 'childView2Ctrl' },
            'childView3': { templateUrl: 'partials/view1.childView3.html', controller: 'childView3Ctrl' }
        }
    })

    .state('view2', {
        url: '/view2',
    })

    .state('view3', {
        url: '/view3',
    })

    .state('view4', {
        url: '/view4',
    });
}); 
```

可以看出有 4 个主视图（view1、view2、view3、view4），view1 有 3 个子视图。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-27T17:19:10.843

您可以使用 ng-include 来避免使用嵌套的 ng-views。

[http://docs.angularjs.org/api/ng/directive/ngInclude](http://docs.angularjs.org/api/ng/directive/ngInclude)
[http://plnkr.co/edit/ngdoc:example-example39@snapshot?p=preview](http://plnkr.co/edit/ngdoc:example-example39@snapshot?p=preview)

我的索引页使用 ng-view。然后在我需要嵌套框架的子页面上。我使用 ng-include。该演示显示了一个下拉列表。我用链接 ng-click 替换了我的。在函数中我会放 $scope.template = $scope.templates[0]; 或 $scope.template = $scope.templates[1];

```
$scope.clickToSomePage= function(){
  $scope.template = $scope.templates[0];
}; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-23T15:41:30.967

Angular ui-router 支持嵌套视图。我还没有使用它，但看起来很有希望。

[http://angular-ui.github.io/ui-router/](http://angular-ui.github.io/ui-router/)

# java - 在 Oracle ADF 上使用 row.setAttribute 获取 NullPointerException

> ID：12863666
> 
> 赞同：0
> 
> 时间：2012-10-12T16:49:19.453
> 
> 标签：java, nullpointerexception, weblogic, jdeveloper, oracle-adf

我现在正在尝试学习 Oracle ADF，并且在 Java bean 上运行以下代码时遇到 NullPointerException。你能帮我弄清楚我做错了什么吗？这是从 JSPX 页面上的按钮调用的。

```
public String cb1_action() {
    try{
        BindingContext bindingctx = BindingContext.getCurrent();
        BindingContainer bindings = bindingctx.getCurrentBindingsEntry();
        DCBindingContainer bindingsImpl = (DCBindingContainer)bindings;
        DCIteratorBinding iter = bindingsImpl.findIteratorBinding("ViewObj1Iterator");

        Row row = iter.getCurrentRow();

        row.setAttribute("Id", 123);
        row.setAttribute("Nome", "Pedro Teste");

    }
    catch(Exception e) {
        System.out.println("Excepcao em: ");
        e.printStackTrace();
    }

    return null;
} 
```

根据堆栈跟踪，错误发生在第一行。setAttribute() 行。此外，我正在使用带有集成 WebLogic 服务器的最新版本的 JDeveloper。

最好的祝福，

佩德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:55:41.987

```
Row row = iter.getCurrentRow();
if(row  != null){
    row.setAttribute("Id", 123);
    row.setAttribute("Nome", "Pedro Teste"); //name?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:42:20.220

您收到错误的信息

> row.setAttribute("Id", 123);

让我认为您尝试更改行的主键属性，这是不允许的。不确定这一点，因为你没有提到你得到的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:48:54.563

好的，这就是我想出如何解决这个问题的方法：

首先，我让 jDeveloper 为 Application Module 生成一个类。在那个类中，我添加了以下方法：

```
public void testEntityObject()
{
    System.out.println("Let's try our Entity Object...");

    try
    {
        EntityDefImpl entity = TesteEOImpl.getDefinitionObject();
        TesteEOImpl ti = (TesteEOImpl)entity.createInstance2(getDBTransaction(), null);
        ti.setId(new BigDecimal(123));
        ti.setNome("Entity Object test...");

        getDBTransaction().commit();

        System.out.println("Looks good :-)");
    }
    catch(Exception e) 
    {
        System.out.println("It seems something went wrong :-(");
        e.printStackTrace();
    }
}

public void testViewObject() {
    System.out.println("Let's try our View Object...");

            ViewObjectImpl vo = this.getTeste1();

        try{
            Row row = vo.createRow();
            row.setAttribute("Id", 234);
            row.setAttribute("Nome", "VO test");
            vo.insertRow(row);
            getDBTransaction().commit();
            System.out.println("Looks good :-)")
        }
        catch(Exception e) {
            System.out.println("It seems something went wrong :-(");
            e.printStackTrace();
        }

    } 
```

这些方法由连接到页面上两个按钮的托管 bean 调用。此托管 bean 具有以下方法。我将只发布其中一个，因为只有方法名称发生了变化：

```
public String cb1_action() {

    try{
    FacesContext fctx = FacesContext.getCurrentInstance(); 
    BindingContext bindingContext = BindingContext.getCurrent();
    DCDataControl dc = bindingContext.findDataControl("AppModuleAMDataControl");
    AppModuleAMImpl am = (AppModuleAMImpl)dc.getDataProvider();

    am.criarTesteComEntityObject();
    }
    catch(Exception e) {
        e.printStackTrace();
    }

    return null;
} 
```

我知道这不是火箭科学或其他任何东西，但我花了一段时间才到达那里......基本上，你的回答帮助我去调查正在发生的事情。原因？糟糕的设计！ADF应该是有组织的......谢谢大家！:D

# apache - url 重写和 404 错误页面未找到

> ID：12863667
> 
> 赞同：0
> 
> 时间：2012-10-12T16:49:23.520
> 
> 标签：apache, .htaccess, url-rewriting

我正在使用这样的 url 重写

```
RewriteRule ^help$ help.php 
```

因此，如果用户使用 domain.com/help 它可以工作，但是如果用户调用诸如 domain.com/help/ 之类的页面，它会发送 err 404 page not found 如何解决这个问题，在 2 种情况下它做同样的工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:57:08.777

试试这个规则：

```
RewriteRule ^help/?$ help` 
```

添加`/?`使尾部斜杠成为可选的。然后模式开始匹配`help`以及`help/`

[您可以在此处](http://martinmelin.se/rewrite-rule-tester/)测试此规则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:01:28.757

您需要使正则表达式中的尾部斜杠可选：

```
RewriteRule ^help/?$ help.php 
```

# c# - 加载附加 DLL 的 .Net 对象标记

> ID：12863669
> 
> 赞同：0
> 
> 时间：2012-10-12T16:49:30.583
> 
> 标签：c#, .net, internet-explorer, com, object-tag

好的，所以我有一个项目来创建一个 .Net 控件，该控件通过网页中的 COM 对象与客户端条形码扫描仪进行交互（只需要 IE）。为此，我们使用了一个 .Net Windows 窗体控件库 DLL，该 DLL 使用 Object 标签加载：

```
<object id="scannerCont" classid="http:ControlAssembly.dll#Controls.MyControl"/> 
```

到目前为止，我已经让 .Net 控件在网页中呈现，但现在我遇到了麻烦，因为我无法让控件获得对其他 DLL 的访问权限。基本上，该控件调用一个非托管 DLL，该 DLL 提供对扫描仪单元的 COM 互操作访问。当我加载页面而不尝试访问 DLL 时，它加载得很好，但是当我尝试引用它时，我在临时 Internet 文件文件夹中收到 FusionBindErrors。

错误如下：

```
*****   IEHOST Error Log (Friday, 12 October 2012 09:27)    *****

URL:        http://scanner:8014/scanner/ControlAssembly.dll
Zone:       2
Assembly Name:  ControlAssembly.dll
Type Name:  Controls.MyControl

----- Thrown Exception -----

System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.IO.FileLoadException: Could not load file or assembly 'ActiveScanner, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. Failed to grant minimum permission requests. (Exception from HRESULT: 0x80131417)
File name: 'ActiveScanner, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' ---> System.Security.Policy.PolicyException: Required permissions cannot be acquired.
   at System.Security.SecurityManager.ResolvePolicy(Evidence evidence, PermissionSet reqdPset, PermissionSet optPset, PermissionSet denyPset, PermissionSet& denied, Boolean checkExecutionPermission)
   at System.Security.SecurityManager.ResolvePolicy(Evidence evidence, PermissionSet reqdPset, PermissionSet optPset, PermissionSet denyPset, PermissionSet& denied, Int32& securitySpecialFlags, Boolean checkExecutionPermission)
   at Controls.MyControl..ctor()
   --- End of inner exception stack trace ---
   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandle& ctor, Boolean& bNeedSecurityCheck)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean fillCache)
   at System.RuntimeType.CreateInstanceImpl(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean fillCache)
   at System.Activator.CreateInstance(Type type, Boolean nonPublic)
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateComInstanceFrom(String assemblyName, String typeName, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm)
   at System.AppDomain.CreateComInstanceFrom(String assemblyFile, String typeName, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm)
   at System.AppDomain.CreateComInstanceFrom(String assemblyFile, String typeName, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm)
   at Microsoft.IE.SecureFactory.CreateInstanceWithSecurity2(Int32 dwFlags, Int32 dwZone, String wszSite, String wszId, String wszConfig, String wszLicenses, String wszDeploymentManifest) 
```

现在，据我了解，这是由于权限问题造成的错误。在你们回应说将网页添加到受信任的站点列表之前，这不是一个选项。这是一个面向客户的组件，我们最多只能将他们提交给接收安全警告消息，他们可以单击该消息以允许控制提升的权限。

我一直试图找到解决这个问题的方法，但似乎这不是一种广泛采用的做法，因此关于如何缓解此错误的文档很少。

我想注意的是，如果我从加载控件的网站文件夹中删除无关的 DLL，我会收到一个 File Not Found FusionBindError，这意味着一旦我解决了这个权限，系统应该能够加载这个无关的 DLL问题...

有人有授予此权限的经验吗？同样，我们对最终用户从 .Net 获得弹出窗口要求他们授予此权限的权限感到满意，但我们不能要求最终用户将我们的站点添加到受信任区域。

我想知道我是否可以在对象标记中添加一些信息来说明它也需要这个其他 DLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:07:30.510

如您所见，托管在 IE 中的 .NET 控件在具有受限权限的“沙盒”中运行。对于 .NET 2.0 / 3.0 / 3.5，调整权限的唯一方法是修改客户端计算机上的代码访问安全 (CAS) 策略。我无法从错误消息中看出所需的特定权限，但我猜 ActiveScanner.dll 要求“FullTrust”（因为它必须与 COM 互操作）——并且 Internet Explorer 中没有授予完全信任的区域默认。

在 .NET 4.0+ 中，沙盒模型发生了变化（它使用代码中的属性——SecurityCrtical、SecurityTransparent 等）；我没有使用过 .NET 4.0，但我再次认为 Internet Explorer 不会授予您“完全信任”您的控制权。

总结一下：我不知道你可以在网页/对象标签上做任何事情来请求额外的权限。IE 根本不会在不修改客户端 PC 上的某些内容的情况下授予完全信任权限。

# c# - 提取字符串某些部分的最有效方法是什么？

> ID：12863671
> 
> 赞同：0
> 
> 时间：2012-10-12T16:49:36.577
> 
> 标签：c#

我有以下对象：

```
public class Color
{
   public string RGB = "000225123";

} 
```

我需要能够解析出 R、G 和 B 组件，但它们可能不是那么精确，但是，我会知道顺序。所以一种方式，它可能是`RGB`，但另一种方式它可能是`RBG`。

我想过这样的事情：

```
string G =  RGB.Substring(RGB.IndexOf('2'),3); 
```

但是在这里我碰巧知道 G 的开始和结束位置，所以我可以对其进行硬编码，这让我想到了另一个问题，即存储订单的最佳方式是什么。我曾想过做类似的事情：

```
string order = "RGB";

string RGB = "000225123";

string R = RGB.Substring(order.IndexOf('R'),3); 
```

上述方法可行，但是对于每个部分可以是不同长度的情况，`R`例如可以是 2 或 3 个字符，那是我单独存储的东西还是我将其存储在订单中？

我可能有这样的数字：

`28-34-29-000-00.0`

或者它可能是有序的

`29-34-28-000-00.0`

在上面的`28`和`29`被切换，我会知道这个顺序，我只需要知道如何解析它。

这是一个更现实的场景和解决方案，但我不确定它是否足够有效：

字符串顺序=“TSR”；

```
string value = "20-10-28-0000-0011";

string[] tokens = value .Split('-');

string t= tokens[order.IndexOf('T')];

string s= tokens[order.IndexOf('S')];

string r= tokens[order.IndexOf('R')]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:56:21.193

我将创建一个包含解析方法的接口。

例如，

```
IParseColorString
{
  ColorParts Parse(String s);
}

ColorParts
{
  public string R {get;}
  public string G {get;}
  public String B {get;}
  // or if you wanted the int directly have int return type instead of string
} 
```

然后让所有具有适当顺序的类派生接口：

```
ParseRGB : IParseColorString
{
    public ColorParts Parse(String s)
    {
       //  parsing logic for RGB
    }
}

ParseRBG : IParseColorString
{
  public ColorParts Parse(String s)
  {
     // parsing logic for RBG
  }
} 
```

然后随心所欲地使用它们。您甚至可以拥有一个将它们作为静态实例的工厂

```
ColorParsingFactory
{
    public static IParseColorString ParseRGB {get{/* gets the RGB parser */}}
    public static IParseColorString ParseRBG {get{/* gets the RBG parser */}}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:59:08.227

您可以使用这样的函数从字符串中提取组件：

```
public static int GetComponent(string data, string format, char component) {
  return Int32.Parse(new String(data.Where((c, i) => format[i] == component).ToArray()));
} 
```

用法：

```
string color = "000225123";
string format = "RRRGGGBBB";

int red = GetComponent(color, format, 'R');
int green = GetComponent(color, format, 'G');
int blue = GetComponent(color, format, 'B'); 
```

它适用于您可以这样描述的任何格式：

```
string time = "2012-10-12 19:02";
string format = "YYYY MM DD hh mm";

int year = GetComponent(time, format, 'Y');
int month = GetComponent(time, format, 'M');
int day = GetComponent(time, format, 'D');
int hour = GetComponent(time, format, 'h');
int minute = GetComponent(time, format, 'm'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:10:40.643

如果我理解正确，还有其他一些服务可以给你一个订单和一个 RGB 字符串？

在这种情况下，让我们尝试**忠实地存储类型**并**在到达时转换数据**。

```
public class Color{

public int R{
    get;
    set; 
    }

public int G{
    get;
    set; 
    }

public int B{
    get;
    set; 
    }

public Color(string mixedRGB, string order){
    R = Int32.Parse(mixedRGB.Substring(order.IndexOf('R'),3));
    G = Int32.Parse(mixedRGB.Substring(order.IndexOf('G'),3));
    B= Int32.Parse(mixedRGB.Substring(order.IndexOf('B'),3));
} 
```

如果您有内存限制，这将为您节省空间，并避免为您的对象分配无意义的值。（RGB字符串“DF）_3nAv1”是什么颜色？）

您将知道 R、G 和 B 对应的值是什么，因为您将它们分开存储。如果你需要经常组合它们，你可以在这个类中创建一个函数来组合它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:59:47.070

将颜色转换为数字的更好方法是使用 ARGB 格式

```
Color c = Color.Aquamarine;
// Or if you have R-G-B values:  Color c = Color.FromArgb(111,222,333);
int argb = c.ToArgb(); // --> -8388652
string s = argb.ToString(); // --> "-8388652"

// Backwards
argb = Int32.Parse(s);
c = Color.FromArgb(argb);

int R = c.R;
int G = c.G;
int B = c.B; 
```

* * *

更新：

通过维护 RGB 部分将其存储为字符串的简单方法是

```
string s1 = "RGB;123;255;77";
string s2 = "RBG;123;77;255";

string[] parts = s1.Split(';');

int r, g, b;
switch (parts[0]) {
    case "RGB":
        r = Int32.Parse(parts[1]);
        g = Int32.Parse(parts[2]);
        b = Int32.Parse(parts[3]);
        break;
    case "RBG":
        r = Int32.Parse(parts[1]);
        b = Int32.Parse(parts[2]);
        g = Int32.Parse(parts[3]);
        break;
    default:
        r = 0;
        b = 0;
        g = 0;
        break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T17:04:23.513

由于您知道顺序，因此可以使用[字符串 indexer](http://msdn.microsoft.com/en-us/library/system.string.chars.aspx)获取值。

从 MSDN 公然窃取的示例：

```
string str1 = "Test";
for (int ctr = 0; ctr <= str1.Length - 1; ctr++ )
   Console.Write("{0} ", str1[ctr]);

// The example displays the following output: 
//      T e s t 
```

您可能还想查看`System.Drawing.Color`. 如果它真的是你正在解析的颜色，你甚至不需要定义你自己的结构。

# python - 在 genfromtxt 中使用转换器功能失败

> ID：12863673
> 
> 赞同：3
> 
> 时间：2012-10-12T16:49:38.307
> 
> 标签：python, numpy, python-3.x, matplotlib, genfromtxt

当我尝试使用 genfromtxt 读取空格分隔的文件并使用转换器函数以逗号作为小数点分隔符转换数字时，出现类型错误。我的转换器功能似乎有问题。但是，当我在单个值上使用它时，它确实可以正常工作。

这是我的代码（我正在使用 Matplotlib/Pylab）：

```
t = dtype([('Date', 'U12'), ('Time', 'U10'), ('Cond', 'f4'), ('Temp', 'f4')])

conv = lambda valstr: float(valstr.replace(',','.'))

c = {2:conv, 3:conv}

data = genfromtxt('Example.csv', dtype = t,
    skip_header=1, delimiter = ' ', converters = c) 
```

数据如下所示：

```
Date Time Cond Temp
11-10-2012 00:00:14 5,430583 29,5107
11-10-2012 00:00:15 5,431812 29,45066
11-10-2012 00:00:16 5,435501 29,43862
11-10-2012 00:00:17 5,436732 29,43862
... 
```

这是错误消息的一部分：

* * *

```
TypeError                                 Traceback (most recent call last)
<ipython-input-41-c65c2d17c55d> in <module>()
      5 c = {2:conv, 3:conv}
      6 
----> 7 data = genfromtxt('Example.csv', dtype = t, skip_header=1, delimiter = ' ', converters = c)

...

<ipython-input-41-c65c2d17c55d> in <lambda>(valstr)
      1 t = dtype([('Date', 'U12'), ('Time', 'U10'), ('Cond', 'f4'), ('Temp', 'f4')])
      2 
----> 3 conv = lambda valstr: float(valstr.replace(',','.'))
      4 
      5 c = {2:conv, 3:conv}

TypeError: expected an object with the buffer interface 
```

我在这里做错了什么，或者这是 genfromtxt 中的某种错误？

我在 Win7 x64 上使用 Python 3.2。Numpy 版本是 1.6.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:39:21.113

显然，genfromtxt 将读取列作为字节字符串提供给转换器函数，而不是作为 unicode 字符串。

通过更改转换器函数的代码，我解决了这个问题，如下所示：

```
conv = lambda valstr: float(valstr.decode("utf-8").replace(',','.')) 
```

# matlab - 在 Matlab 中插值 3D 圆柱的表面

> ID：12863674
> 
> 赞同：10
> 
> 时间：2012-10-12T16:49:42.067
> 
> 标签：matlab, 3d, matlab-figure

我有一个描述 3D 圆柱 ( `xx,yy,zz,C`) 点云的数据集： ![3D点云](../Images/bc87217b8a0a6ef1075aa6b8bbe1ef8e.png)

我想从这个数据集中制作一个表面图，类似于这个 ![在此处输入图像描述](../Images/4e98c0e65ec39253d812560d42875c87.png)

为了做到这一点，我认为我可以将分散的数据插入`TriScatteredInterp`到常规网格上，然后使用以下方法绘制它`surf`：

```
F = TriScatteredInterp(xx,yy,zz);
max_x = max(xx); min_x = min(xx);
max_y = max(yy); min_y = min(yy);
max_z = max(zz); min_z = min(zz);
xi = min_x:abs(stepSize):max_x;
yi = min_y:abs(stepSize):max_y;
zi = min_z:abs(stepSize):max_z;
[qx,qy] = meshgrid(xi,yi);
qz = F(qx,qy);
F = TriScatteredInterp(xx,yy,C);
qc = F(qx,qy);

figure
surf(qx,qy,qz,qc);
axis image 
```

这对于凸面和凹面物体非常有效，但对于圆柱体则结束： ![在此处输入图像描述](../Images/ef77dff92d3f925ae259f94de05b858d.png)

任何人都可以帮助我如何实现更好的情节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:46:00.240

你试过德劳内三角测量吗？

[http://www.mathworks.com/help/matlab/ref/delaunay.html](http://www.mathworks.com/help/matlab/ref/delaunay.html)

```
load seamount
tri = delaunay(x,y);
trisurf(tri,x,y,z); 
```

![阴谋](../Images/f0edb0ef0f067dc2ff099a07b43d65b2.png)

还有 TriScatteredInterp

[http://www.mathworks.com/help/matlab/ref/triscatteredinterp.html](http://www.mathworks.com/help/matlab/ref/triscatteredinterp.html)

```
ti = -2:.25:2;
[qx,qy] = meshgrid(ti,ti);
qz = F(qx,qy);
mesh(qx,qy,qz);
hold on;
plot3(x,y,z,'o'); 
```

![在此处输入图像描述](../Images/d7b047ee83e765331faadb6e0089cf06.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T10:45:56.730

我认为您正在寻找的是[凸壳](http://www.mathworks.com/help/matlab/ref/convhull.html)函数。请参阅其文档。

> K = convhull(X,Y,Z) 返回点 (X,Y,Z) 的 3-D 凸包，其中 X、Y 和 Z 是列向量。K 是表示凸包边界的三角剖分。K 的大小为 mtri-by-3，其中 mtri 是三角形刻面的数量。也就是说，K 的每一行都是根据点索引定义的三角形。

二维示例

```
xx = -1:.05:1; yy = abs(sqrt(xx));
[x,y] = pol2cart(xx,yy);
k = convhull(x,y);
plot(x(k),y(k),'r-',x,y,'b+') 
```

![在此处输入图像描述](../Images/4bdfe91d43a96c216b8340879106b7f9.png)

使用 plot 在二维中绘制 convhull 的输出。使用 trisurf 或 trimesh 在 3-D 中绘制 convhull 的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:44:12.497

TriScatteredInterp 适用于拟合 z = f(x,y) 形式的 2D 表面，其中 f 是单值函数。像你一样适合点云是行不通的。

由于您正在处理圆柱体，本质上是一个 2D 表面，如果您转换为极坐标，您仍然可以使用 TriScatterdInterp，例如，将半径拟合为角度和高度的函数——类似于：

```
% convert to polar coordinates:
theta = atan2(yy,xx);
h = zz;
r = sqrt(xx.^2+yy.^2);

% fit radius as a function of theta and h
RFit = TriScatteredInterp(theta(:),h(:),r(:));

% define interpolation points
stepSize = 0.1;
ti = min(theta):abs(stepSize):max(theta);
hi = min(h):abs(stepSize):max(h);
[qx,qy] = meshgrid(ti,hi);
% find r values at points:
rfit = reshape(RFit(qx(:),qy(:)),size(qx));
% plot
surf(rfit.*cos(qx),rfit.*sin(qx),qy) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:10:44.927

圆柱体是与一条线等距的所有点的集合。所以你知道你的`xx`和`yy`数据`zz`有一个共同点，那就是它们都应该与对称线等距。您可以使用它来生成一个新圆柱体（在本例中，对称线取为 z 轴）：

```
% best-fitting radius 
% NOTE: only works if z-axis is cylinder's line of symmetry
R = mean( sqrt(xx.^2+yy.^2) );

% generate some cylinder
[x y z] = cylinder(ones(numel(xx),1));

% adjust z-range and set best-fitting radius
z = z * (max(zz(:))-min(zz(:))) + min(zz(:));
x=x*R;
y=y*R;

% plot cylinder
surf(x,y,z) 
```

# compiler-construction - CONFIG_X86_WP_WORKS_OK的作用是什么？

> ID：12863676
> 
> 赞同：2
> 
> 时间：2012-10-12T16:49:49.757
> 
> 标签：compiler-construction, linux-kernel, kernel

有人可以帮我理解这个声明：内核配置中的 CONFIG_X86_WP_WORKS_OK 吗？它的功能是什么？它是如何工作的？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:03:49.673

需要工作内存写保护

CONFIG_X86_WP_WORKS_OK

因此，如果您启用此选项，内核将假定您的处理器在主管模式下正确处理对页面的写入。

[http://lkml.indiana.edu/hypermail/linux/kernel/0003.1/0009.html](http://lkml.indiana.edu/hypermail/linux/kernel/0003.1/0009.html)

以上是旧线程。最近的代码似乎没有这个评论。

WP 写保护 确定 CPU 是否可以写入标记为只读的页面

[http://en.wikipedia.org/wiki/Control_register](http://en.wikipedia.org/wiki/Control_register)

从下面

[http://src3.org/#RHEL6-2.6.32+220.el6/arch/x86/mm/init_32.c#L845](http://src3.org/#RHEL6-2.6.32+220.el6/arch/x86/mm/init_32.c#L845)

检查 cpu 中的 WP 位并找到不工作的 WP 位和紧急系统。

[http://vulnfactory.org/blog/2011/08/12/wp-safe-or-not/](http://vulnfactory.org/blog/2011/08/12/wp-safe-or-not/)

# python - Python 中的 MongoDB 连接管理

> ID：12863678
> 
> 赞同：5
> 
> 时间：2012-10-12T16:50:01.997
> 
> 标签：python, mongodb, database-connection

这样做更好吗

```
from pymongo import Connection

conn = Connection()
db = conn.db_name

def contrivedExample(firstName)
    global db
    return db.people.find_one({'first-name': firstName}) 
```

或者

```
from pymongo import Connection

def contrivedExample(firstName):
    with Connection() as conn:
        return conn.db_name.people.find_one({'first-name': firstName}) 
```

各种基本的 MongoDB 教程（无论是否面向 Python）都暗示应用程序应该在启动时连接一次；真的是这样吗？对于非平凡的、长时间运行的应用程序，答案是否会改变？Web 应用程序的答案是否会有所变化？单连接与按请求连接的优缺点是什么？

假设“启动时一次”是正确答案，那么在 中启动该连接是否合适`__init__.py`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:30:22.923

pymongo [Connection 类](http://api.mongodb.org/python/current/api/pymongo/connection.html)支持连接池，从 2.2 版开始，该`auto_start_request`选项可确保在线程的生命周期内将相同的套接字用于连接活动（默认行为）。此外，有必要时重新连接的内置支持，尽管您的应用程序代码应该处理即时异常。

对于您的问题，我相信最好依靠 pymongo 自己的连接池并为每个线程请求一个新连接。[此 Stack Overflow 线程](https://stackoverflow.com/a/11498804/162228)还讨论了一些最佳实践并解释了一些可用的选项，您可能会发现它们很有帮助。如有必要，您可以选择在线程之间共享同一个套接字。

# sql - 将行值插入另一个表的列

> ID：12863680
> 
> 赞同：1
> 
> 时间：2012-10-12T16:50:11.160
> 
> 标签：sql, oracle, plsql, oracle10g

我正在尝试为我的项目实现**撤消**和**日志记录**功能。

当用户使用**DELETE_ROW**过程从表中删除一行时，我从该行中选择所有值并将其插入到我的 row_history 表中，方法是使用**LOG_DELETED_ROW**过程将行值序列化为 xml，然后我从其原始表中删除行。

使用 Oracle 的内置函数进行序列化很容易，但我找不到反序列化行数据并将其插入回自己的表的方法。

**有没有办法将删除的行存储到另一个表中并在需要时恢复它？**

**删除程序：**

```
create or replace procedure DELETE_ROW(tableName varchar2, userId varchar2, columnName varchar2, columnValue number) is
begin
  log_deleted_row(tableName, userId, columnName, columnValue);
  execute immediate 'delete from ' || tableName || ' where ' || columnName || ' = ' || columnValue;
end DELETE_ROW; 
```

**记录程序：**

```
create or replace procedure LOG_DELETED_ROW(tableName varchar2, userId varchar2, columnName varchar2, columnValue number) is
tableId number;
begin
  SELECT ID into tableId FROM TABLES WHERE NAME = tableName;

execute immediate
  'INSERT INTO ROW_HISTORY(TABLE_ID,ROW_ID,ROW_DATA)
   SELECT 
   '|| tableId ||', 
   '|| columnValue ||',
   to_clob(
       DBMS_XMLGEN.getxmltype(
           ''SELECT * FROM ' || tableName || ' where ' || columnName || ' = ' || columnValue || '''
       ) 
   )FROM DUAL';

end LOG_DELETED_ROW; 
```

**行历史表：**

```
create table ROW_HISTORY
(
  ID       NUMBER not null,
  TABLE_ID NUMBER not null,
  ROW_ID   NUMBER not null,
  ROW_DATA CLOB not null
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:15:42.443

[DBMS_XMLSAVE](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_xmlsav.htm) seems to be the thing you need.Here is a procedure which should do what you need to do.

```
CREATE OR REPLACE PROCEDURE insert_xml_data(p_table IN VARCHAR2, xml_data IN CLOB) IS
   t_context    DBMS_XMLSAVE.CTXTYPE;
   t_rows    NUMBER;
 BEGIN
   t_context := DBMS_XMLSAVE.NEWCONTEXT(p_table); 
   t_rows := DBMS_XMLSAVE.INSERTXML(t_context,xml_data); 
   DBMS_XMLSAVE.CLOSECONTEXT(t_context); 
 END;
 / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:10:28.977

我相信你可以在这里使用[DBMS_SQL](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sql.htm)包——它可以让你在知道表名和列的情况下重建插入语句。

另一种更复杂的方法是实例化[LCR$_ROW_RECORD](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/t_lcr.htm)对象，然后运行它的 EXECUTE 成员——它将执行实际的插入。

# ussd - 通话后开始 USSD 会话

> ID：12863681
> 
> 赞同：1
> 
> 时间：2012-10-12T16:50:13.203
> 
> 标签：ussd

如何从呼叫中启动 ussd 会话到我的 ivr 中的电话号码？例如，如果用户拨打一个号码并通过录音应答，当通话结束时，我想在呼叫者的手机（使用 ussd）上显示一个 PIN 码。我知道这种机制应该是可能的，因为我在 globalussd.com 网站上尝试过演示

# css - 文字下划线边距

> ID：12863683
> 
> 赞同：0
> 
> 时间：2012-10-12T16:50:15.200
> 
> 标签：css, text, margin

我想设置文档顶部边缘和文本行（与下划线相同的行）之间的距离，例如 200px，不管文本有多大（即使文本会大到超出顶部文档边缘）

![在此处输入图像描述](../Images/591f2c5de4122e860e7d96cac7e15a0d.png)

红线显示文本的底线和文档的上边缘，我希望它们之间的距离恒定。文字大小可能不同

[http://jsbin.com/azanuw/9/edit](http://jsbin.com/azanuw/9/edit) - 示例 - 如何使他们的底线具有相同的最高位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:55:35.257

在红线的一部分创建一个 div。给 padding-top:200px; 对于这个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:55:53.283

您想使用`em`间距作为边距。`em`高度是字母“m”的垂直高度。这样，当文本大小发生变化时，顶部的间距将与文本大小垂直成比例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:59:23.313

试试这个[演示](http://jsbin.com/azanuw/3/edit)

无论字体大小如何，文本底部都将距顶部 200 像素

**CSS**

```
body {background:#000; margin:0;}
.topNav {color:#fff; height:200px; border:solid 1px #f00; position:relative; }
.text {position:absolute; bottom:0px;font-size:20px;} 
```

**HTML**

```
<body>
  <div class="topNav">
    <div class="text">Some text goes hear</div>

  </div>
</body> 
```

# wpf - 缩放 InkCanvas 笔划以适合特定尺寸以裁剪出未使用的空间

> ID：12863690
> 
> 赞同：1
> 
> 时间：2012-10-12T16:50:31.900
> 
> 标签：wpf, scale, viewbox, inkcanvas

我正在尝试缩放 InkCanvas 的内容 (Strokes) 以适应固定的打印页面大小。我想从 InkCanvas 中裁剪出所有周围的空白，并在保持纵横比的同时放大 Strokes 以适应页面。

在标记下方的处理程序中，您可以看到我正在更改从 800x300 开始的网格尺寸，并将其设置为 425x550，是可打印页面大小的一半。

**标记：**

```
 <Grid>

    <Button Height="100" Width="100" HorizontalAlignment="Left" PreviewMouseLeftButtonDown="Button_PreviewMouseLeftButtonDown_1" />

    <Grid Width="1200" Height="1400" Background="Aquamarine" HorizontalAlignment="Right" VerticalAlignment="Top">

        <Grid Background="Red" x:Name="grid" Width="800" Height="300">

            <Viewbox x:Name="vb"  Width="800" Height="300" Stretch="Fill" StretchDirection="Both">

                <InkCanvas Width="500" Height="500" Background="Transparent" IsEnabled="True"/>
            </Viewbox>

        </Grid >

    </Grid>
</Grid> 
```

* * *

**代码隐藏文件：**

```
bool b = true;

private void Button_PreviewMouseLeftButtonDown_1(object sender, MouseButtonEventArgs e)
    {
        if (b)
            {
            //I toyed with using Uniform, UniformToFill, and Fill
            vb.Stretch = Stretch.Fill;
            grid.Width = 425;
            grid.Height = 550;

            //scale viewbox down until it fits horizontally
            var scaleX = grid.Width / vb.Width;
            vb.Width *= scaleX;
            vb.Height *= scaleX;

            //if constraining it to the width made it larger than it needed to be vertically, scale it down
            if (vb.Height > grid.Height)
            {
                var scaleY = grid.Height / vb.Height;
                vb.Width *= scaleY;
                vb.Height *= scaleY;
            }
            b = false;
        }
        else
        {
           //reset it back to what it was
            vb.Stretch = Stretch.Fill;
            grid.Width = 800;
            grid.Height = 300;
            vb.Width = grid.Width;
            vb.Height = grid.Height;
            b = true;
        } 
```

# cakephp - Cakephp 使会话长时间保持活动状态

> ID：12863693
> 
> 赞同：1
> 
> 时间：2012-10-12T16:50:50.990
> 
> 标签：cakephp

我正在构建一个名为 Trackosaur 的应用程序，它可以跟踪您所做事情的时间。我为此使用 Cake2+jQuery1.8。我面临的问题与会话超时有关。我可以通过 php ini 调整会话超时的时间。但我需要在很长一段时间（10 多个小时）内“保持活力”。所以我在我的 UserController 中设置了一个对一个简单函数的 ajax 调用，它只在其中使用 session_start() 。

**JS**

```
function keepAlive()
{
        $.ajax({
            type: 'get',
            url: '/users/keepalive'
        }).done(function(data){});
} 
```

**蛋糕**

```
public function keepalive()
{
    session_start();
} 
```

ajax 调用每 10 分钟进行一次。我不确定这是否是保持会话活跃的好方法。有没有更好的方法可以使用 Cake 本身的东西而不是使用 session_start 来做到这一点？

非常感谢您的时间:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:03:08.923

在您的核心配置文件中，您可以更改会话超时值。

在 CakePHP 1.3 中这很容易。只需找到它并更改为您的值（36000 10 小时）。

**应用程序/配置/core.php**

```
/**
 * Session time out time (in seconds).
 * Actual value depends on 'Security.level' setting.
 */
Configure::write('Session.timeout', '120'); 
```

在 CakePHP 2 中，找到这一行并阅读上面的注释块，了解如何配置会话时间。我自己不必这样做，但我认为：

```
Configure::write('Session', array(
    'defaults' => 'php',
    'Session.timeout' => 36000
)); 
```

# fullcalendar - 在 FullCalendar 中访问日历事件数据

> ID：12863697
> 
> 赞同：3
> 
> 时间：2012-10-12T16:51:22.983
> 
> 标签：fullcalendar

我正在尝试使用 FullCalendar 在网页上呈现来自 Google 日历的事件。我想要开始日期/时间、描述和地点。一个 div 中的未来事件和另一个 div 中的过去事件。

现在我有 FullCalendar 的基本功能：在我的页面上显示我的 gcal 事件的完整日历。

所以我的问题是：如何访问数据并将其呈现为页面上的文本？gcal.js 文件中有一段代码如下所示

```
events.push({
   id: entry['gCal$uid']['value'],
   title: entry['title']['$t'],
   url: url,
   start: start,
   end: end,
   allDay: allDay,
   location: entry['gd$where'][0]['valueString'],
   description: entry['content']['$t']
  });
}); 
```

我将如何访问这个事件数组？

希望这个问题不要太含糊，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:02:26.700

请参阅：[客户端事件](http://arshaw.com/fullcalendar/docs/event_data/clientEvents/)

您还可以使用函数，例如：

```
mycal.fullCalendar('clientEvents', function(ev) {
 // ev is Event object...
}); 
```

# jquery - 使用 PHPQuery 获取 CSS 计算的元素样式

> ID：12863702
> 
> 赞同：2
> 
> 时间：2012-10-12T16:51:51.007
> 
> 标签：jquery, css, phpquery

当然，我可以使用[PHPQuery](http://code.google.com/p/phpquery/)加载页面并从所有链接中获取所有文本和 URL：

```
foreach (pq('a') as $link) {
    echo 'Description: '.pq($link)->text().PHP_EOL;
    echo 'URL: '.pq($link)->attr('href').PHP_EOL; 
```

但由于 PHPQuery 是一个 PHP 脚本，而不是一个功能齐全的 Web 浏览器，我无法像在开发人员控制台中那样获得元素的计算样式（例如它的字体大小）：

```
jQuery('a').eq(0).css('font-size');
"12px" 
```

有没有人设法做到这一点 - 即模拟浏览器并找到字体选择，屏幕上的位置等 - 使用其他一些 PHP 库或插件？

# php - 我们如何在 Magento 中使用自定义选项类型文件将产品代码添加到购物车？

> ID：12863721
> 
> 赞同：2
> 
> 时间：2012-10-12T16:53:12.503
> 
> 标签：php, javascript, magento

我正在使用自定义选项类型文件将产品添加到 Magento 中：

```
$cart = Mage::getModel('checkout/cart');
$cart->init();
$pModel = Mage::getSingleton('catalog/product');
foreach($prodArray as $_prod){
  $products = explode("=",$_prod);
  $product_id = $products[0];
  $prod_qty = $products[1];
  $pModel->unsetData();
  $pModel = Mage::getModel('catalog/product')->load($product_id);
  try {
    $cart->addProduct($pModel,$prod_qty);
  }
  catch (Exception $e) { continue; }
  echo  "<br>Product has been added to Cart of id: $product_id with Quantity: $prod_qty";
}
$cart->save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:41:56.173

也许为时已晚，但今天我遇到了同样的问题，我找到了解决方案。我需要将产品添加到购物车，其中一个选项是文件。

它适用于 Magento 1.7，但我还没有在其他版本上测试过它。

```
// the path of the file, relative to Magento base directory.
// For example /media/image.jpg
$image = "YOURFILE.JPG";
// the ID of the product
$product_id  = XXX;

$product     = Mage::getModel('catalog/product')->load($product_id);

$cart = Mage::getModel('checkout/cart');
$cart->init();
$params = array(
    'product' => $product_id,
    'qty' => 1,
    'options' => array(
        12345 => array(
                'quote_path' => $image,
                'secret_key' => substr(md5(file_get_contents(Mage::getBaseDir() . $image)), 0, 20)),
    )
);

$cart->addProduct($product, $params);
$cart->save();

Mage::getSingleton('checkout/session')->setCartWasUpdated(true); 
```

（12345 是选项 ID，您可以对其进行硬编码，也可以使用以下方法获取 ID 列表：[https](https://stackoverflow.com/a/8317707) ://stackoverflow.com/a/8317707 ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:16:03.447

根据您的头衔，我不确定您要做什么。

我想您想知道如何以编程方式将带有选项的产品添加到您的购物车中？

此链接涵盖： [如何获取 Magento 中可配置项目的 URL？](https://stackoverflow.com/questions/1315578/how-to-get-the-url-to-a-configurable-item-in-magento) 访问者提到结构的 url：/checkout/cart/add?product=47&qty=1&super_attribute[496]=4

以编程方式将一个简单的产品添加到您的购物车就像按照此结构的链接一样简单：http: [//yoursite.com/index.php/checkout/cart/add ?product=product_id&qty=qty](http://yoursite.com/index.php/checkout/cart/add?product=product_id&qty=qty)

显然，您需要将其作为 cookie 的“真实”用户等。如果我不理解您的用例，请添加更多评论。

# ios - GPUImage 取图像列的总和

> ID：12863725
> 
> 赞同：0
> 
> 时间：2012-10-12T16:53:33.760
> 
> 标签：ios, gpuimage

我在我的项目中使用 GPUImage，我需要一种有效的方法来获取列总和。天真的方式显然是检索原始数据并添加每一列的值。有人可以为此提出更快的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:16:11.330

一种方法是使用我对 GPUImageAverageColor 类采取的方法（如[本答案](https://stackoverflow.com/questions/12168072/fragment-shader-average-luminosity/12169560#12169560)中所述），而不是在每一步减少每个帧的总大小，只对图像的一个维度执行此操作。

平均滤色器通过在 X 和 Y 上降低四倍来确定整个图像的平均颜色，每一步平均 16 个像素为一个。如果在单个方向上操作，您应该能够使用硬件插值在单个方向上每步减少 18 倍，并具有良好的性能。您的最后一步可能需要在小得多的图像上进行基于 CPU 的快速迭代，或者需要调整此着色器的版本，将列中的最后几个像素拉到该列的最终结果像素中。

您注意到我在这里一直在谈论平均，因为任何 OpenGL ES 操作的输出值都需要以颜色表示，每个通道只有 0-255 范围。总和很容易溢出，但您可以使用平均值作为总和的近似值，动态范围更有限。

如果您只关心一个颜色通道，您可以将更大的值编码到 RGBA 通道中，并以这种方式保持 32 位和。

除了我上面描述的之外，您可以在 Accelerate 框架的帮助下查看执行此总和。虽然可能不如基于着色器的减少那么快，但它可能足以满足您的需求。

# android - 从终结器调用 Bitmap#recycle() 会导致 Android 应用程序静默终止

> ID：12863728
> 
> 赞同：2
> 
> 时间：2012-10-12T16:53:54.070
> 
> 标签：android, bitmap, recycle

Android 中的`Bitmap`内存问题导致我实现了一个自定义加载器和下载器类，该类将从网络下载图像，存储本地副本，并`Bitmap`在请求时从本地副本创建一个。我将它们保存在一个列表中，`SoftReference<T>`以便它们保存一段时间，然后进行垃圾收集，此时`finalize()`调用该类的方法：

```
protected void finalize() throws Throwable {
    Log.w("IMAGEPACK", "Finalizing " + mBitmap);
    if(mBitmap!=null&&!mBitmap.isRecycled()) mBitmap.recycle();
    super.finalize();
} 
```

查看 LogCat，我确定这段代码发生在崩溃之前。我还单步执行了代码，它在这条线上失败了。

我以前有一个使用同步引用计数的解决方案，它看起来非常可靠，但是在我想避免这种情况之前，手动编写的引用计数遇到了很大的问题。我可能不得不恢复它，但我想知道为什么位图回收在这里失败。

我目前正在 2.3.3 上测试三星 Galaxy S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:10:51.190

`recycle()`如果您丢失了 be 的引用，您实际上不需要打电话`Bitmap`。该类`Bitmap`已经覆盖`finalize()`和释放内存，因此您正在做的事情是多余的。

此外，根据文档本身：

> 这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

如果您不再需要位图，则存在回收，但无论出于何种原因，您都需要保留引用（也许您正在使用要保留的额外元数据重载 Bitmap 对象）。如果您只是持有对 Bitmap 对象的引用，那么取消引用就足够了。

# java - Open a file from archive without temporary extraction

> ID：12863731
> 
> 赞同：2
> 
> 时间：2012-10-12T16:54:05.507
> 
> 标签：java, android, file, zip

Right now I'm working on an archive browsing application that lets users navigate through archive contents, extract the archives and preview the files inside the archive. I'm using `java.util.zip` API. To preview a file I'm extracting it temporarily and opening it as a usual existing file. As you may understand, that's not a good approach since it won't preview files if there's not enough space to make a temporary extraction. Is there a working solution for passing `ZipInputStream` to an `Activity` to open it as a file? Is there another workaround for this problem? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:05:42.210

In principle, you could create a `ContentProvider` that serves up the `ZipInputStream`.

In [this sample project](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe) I demonstrate how to create a `ContentProvider` supporting `openFile()` that uses a pipe created by `ParcelFileDescriptor.createPipe()` to serve up a file. `createPipe()` returns a pair (two-element array) of `ParcelFileDescriptors` representing the ends of the pipe. You use the second element out of the array to write to via an `OutputStream`; `openFile()` returns the first element out of the array to be passed by Android to the calling process. The caller would use `openInputStream()` to read in what you transfer via the pipe.

In my case, I am sending an asset on which I get an `InputStream` via `AssetManager`. In your case, you would use your `ZipInputStream`.

Note that my sample project assumes it is being run on a device that has a PDF viewer, since it is serving a PDF out of assets and trying to open it via `startActivity()`.

# php - PHP：数据库迁移工具

> ID：12863732
> 
> 赞同：2
> 
> 时间：2012-10-12T16:54:13.037
> 
> 标签：php, database-migration, utility

我想要一个简单的 PHP 数据库迁移工具。我的主要要求：

1.  具有最小依赖性的独立解决方案（无框架）
2.  方便的方法（不仅仅是 $db->prepare('create table ...')->execute()）
3.  cli 工具（与部署系统集成）
4.  轻松与现有项目集成
5.  它不应该被放弃（我发现的所有解决方案都在 2-3 年前最后一次提交，还有很多未解决的问题）。

我希望它可以与 MySQL 一起使用，不需要其他数据库。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:01:15.960

我在以前的公司使用[过 liquibase](http://www.liquibase.org/)。这不是最直接的设置，但运行良好，足以满足我们的要求。目的是能够在我们的 VCS 中共享数据库迁移，让 4 名开发人员的小团队的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:00:10.563

直接使用[MySQL](http://mysql.com)。它涵盖了除要求 #2 之外的所有内容。

> 具有最小依赖性的独立解决方案（无框架）

大概你已经安装了 MySQL。因此，没有设置/依赖项。

> cli 工具（与部署系统集成）

`mysql`, `mysqladmin`, `mysqldump`-[阅读更多...](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)

> 轻松与现有项目集成

同样，您已经拥有 MySQL。

> 它不应该被抛弃

被 Sun/Oracle 收购。哪儿也不去。

# php - 如何覆盖 i18n 文件中的默认文本？

> ID：12863737
> 
> 赞同：2
> 
> 时间：2012-10-12T16:54:28.040
> 
> 标签：php, internationalization, symfony-1.4

我需要覆盖 Symfony 的 i18n 部分固有的一些默认文本。

这些文件存储在`lib/vendor/symfony/lib/i18n/data`. 它们包含给定文化的国家名称、月份、指标等。

这是一个快照`es.dat`：

```
a:19:{s:9:"Countries";a:278:{i:1;s:9:"Américas";i:2;s:6:"Caribe";i:3;s:17:"Europa meridional";i:5;s:11:"Suramérica";i:0;s:8:"Oceanía";i:9; 
```

我需要`portugués de Brasil`换成`portugués (Brasil)`. 由于不建议修改`.dat`文件，我该如何覆盖这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T04:50:49.707

如果是关于语言选择器，我猜你正在使用`sfWidgetFormI18nChoiceLanguage`. 因此，最简单的方法是创建自己的 wdiget（将是当前 wdiget 的 ac/p）来替换所有选项中所需的值。创建新的小部件`lib/widget/myWidgetFormI18nChoiceLanguage.class.php`：

```
class myWidgetFormI18nChoiceLanguage extends sfWidgetFormChoice
{
  protected function configure($options = array(), $attributes = array())
  {
    parent::configure($options, $attributes);

    $this->addOption('culture');
    $this->addOption('languages');
    $this->addOption('add_empty', false);

    // populate choices with all languages
    $culture = isset($options['culture']) ? $options['culture'] : 'en';

    $languages = sfCultureInfo::getInstance($culture)->getLanguages(isset($options['languages']) ? $options['languages'] : null);

    $addEmpty = isset($options['add_empty']) ? $options['add_empty'] : false;
    if (false !== $addEmpty)
    {
      $languages = array_merge(array('' => true === $addEmpty ? '' : $addEmpty), $languages);
    }

    // change the language here based on the iso code
    $languages['pt_BR'] = 'portugués (Brasil)';

    $this->setOption('choices', $languages);
  }
} 
```

如果你想改变显示 iso_code 的方式（当你使用 i18n 助手时`format_language`），你也可以这样做。使用以下命令创建您自己的助手（如`/lib/helper/myi18NHelper.php`）：

```
function format_language($language_iso, $culture = null)
{
  $c = sfCultureInfo::getInstance($culture === null ? sfContext::getInstance()->getUser()->getCulture() : $culture);
  $languages = $c->getLanguages();

  // change the language here based on the iso code
  $languages['pt_BR'] = 'portugués (Brasil)';

  return isset($languages[$language_iso]) ? $languages[$language_iso] : '';
} 
```

然后你可以这样称呼它：

```
<?php use_helper('myi18N') ?>

<?php echo format_language('pt_BR') ?> 
```

**编辑：**

如果您想使用这个新的小部件，请更新您的表单类并简单地替换`sfWidgetFormI18nChoiceLanguage`为`myWidgetFormI18nChoiceLanguage`.

# c++ - 这个 C++ 代码试图实现什么？

> ID：12863738
> 
> 赞同：3
> 
> 时间：2012-10-12T16:54:28.440
> 
> 标签：c++, templates

我正在[http://sourceforge.net/projects/dtmf/](http://sourceforge.net/projects/dtmf/)研究 DTMF 代码。我遇到了一些我无法理解的 C++ 代码：

```
template<int, int, int, int> class Types;
template <> class Types<5, 4, 2, 1>
{
public:
        typedef long int Int40;
        typedef unsigned long int Uint40;
        typedef int Int32;
        typedef unsigned int Uint32;
        typedef short int Int16;
        typedef unsigned short int Uint16;
        typedef char Int8;
        typedef unsigned char Uint8;
};
template <> class Types<8, 4, 2, 1>
{
public:
        typedef long int Int64;
        typedef unsigned long int Uint64;
        typedef int Int32;
        typedef unsigned int Uint32;
        typedef short int Int16;
        typedef unsigned short int Uint16;
        typedef char Int8;
        typedef unsigned char Uint8;
};
template <> class Types<4, 4, 2, 1>
{
public:
        typedef int Int32;
        typedef unsigned int Uint32;
        typedef short int Int16;
        typedef unsigned short int Uint16;
        typedef char Int8;
        typedef unsigned char Uint8;
};

// For 16bit chars
template <> class Types<2, 1, 1, 1>
{
public:
        typedef long int Int32;
        typedef unsigned long int Uint32;
        typedef short int Int16;
        typedef unsigned short int Uint16;
};

typedef Types<sizeof(long int), sizeof(int), sizeof(short int), sizeof(char)>::Int32     INT32;
typedef Types<sizeof(long int), sizeof(int), sizeof(short int), sizeof(char)>::Uint32    UINT32;
typedef Types<sizeof(long int), sizeof(int), sizeof(short int), sizeof(char)>::Int16     INT16;
typedef Types<sizeof(long int), sizeof(int), sizeof(short int), sizeof(char)>::Uint16    UINT16; 
```

从那里开始，它们就像普通的原始类型一样使用：

```
static const INT16 tempCoeff[8]; 
```

我的直觉告诉我，所有这些东西都实现了某种跨平台可移植性。我是对的，还是还有更多？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:59:29.200

看起来他们正在重新发明`stdint.h`（我相信在某些/许多版本的 MS 编译器中不支持），为基于对`sizeof`. 请注意，接受的第四个模板参数`sizeof(char)`完全无用，`sizeof(char)`始终为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:54:10.873

让我们看看我们是否可以设计一个更理智的方法（需要`CHAR_BIT`为平台正确定义）：

```
namespace portable_inttypes
{
    template<typename Tchain, typename T, typename Tun, size_t Tsize = sizeof (T) * CHAR_BIT, bool atleast64 = Tsize >= 64>
    struct autodef_helper64 : Tchain {};

    template<typename Tchain, typename T, typename Tun, size_t Tsize>
    struct autodef_helper64<Tchain, T, Tun, Tsize, true> : Tchain
    {
        typedef T int_least64_t;
        typedef Tun uint_least64_t;
    };

    template<typename Tchain, typename T, typename Tun>
    struct autodef_helper64<Tchain, T, Tun, 64, true> : Tchain
    {
        typedef T int64_t, int_least64_t;
        typedef Tun uint64_t, uint_least64_t;
    };

    template<typename Tchain, typename T, typename Tun, size_t Tsize = sizeof (T) * CHAR_BIT, bool atleast32 = Tsize >= 32>
    struct autodef_helper32 : autodef_helper64<Tchain, T, Tun> {};

    template<typename Tchain, typename T, typename Tun, size_t Tsize>
    struct autodef_helper32<Tchain, T, Tun, Tsize, true> : autodef_helper64<Tchain, T, Tun>
    {
        typedef T int_least32_t;
        typedef Tun uint_least32_t;
    };

    template<typename Tchain, typename T, typename Tun>
    struct autodef_helper32<Tchain, T, Tun, 32, true> : autodef_helper64<Tchain, T, Tun>
    {
        typedef T int32_t, int_least32_t;
        typedef Tun uint32_t, uint_least32_t;
    };

    template<typename Tchain, typename T, typename Tun, size_t Tsize = sizeof (T) * CHAR_BIT, bool atleast32 = Tsize >= 16>
    struct autodef_helper16 : autodef_helper32<Tchain, T, Tun> {};

    template<typename Tchain, typename T, typename Tun, size_t Tsize>
    struct autodef_helper16<Tchain, T, Tun, Tsize, true> : autodef_helper32<Tchain, T, Tun>
    {
        typedef T int_least16_t;
        typedef Tun uint_least16_t;
    };

    template<typename Tchain, typename T, typename Tun>
    struct autodef_helper16<Tchain, T, Tun, 16, true> : autodef_helper32<Tchain, T, Tun>
    {
        typedef T int16_t, int_least16_t;
        typedef Tun uint16_t, uint_least16_t;
    };

    template<typename Tchain, typename T, typename Tun, size_t Tsize = sizeof (T) * CHAR_BIT, bool atleast8 = Tsize >= 8>
    struct autodef_helper8 : autodef_helper16<Tchain, T, Tun> {};

    template<typename Tchain, typename T, typename Tun, size_t Tsize>
    struct autodef_helper8<Tchain, T, Tun, Tsize, true> : autodef_helper16<Tchain, T, Tun>
    {
        typedef T int_least8_t;
        typedef Tun uint_least8_t;
    };

    template<typename Tchain, typename T, typename Tun>
    struct autodef_helper8<Tchain, T, Tun, 8, true> : autodef_helper16<Tchain, T, Tun>
    {
        typedef T int8_t, int_least8_t;
        typedef Tun uint8_t, uint_least8_t;
    };

    struct autodef_base {};
    typedef autodef_helper8<autodef_base, long long, unsigned long long> autodef_longlong;
    typedef autodef_helper8<autodef_longlong, long, unsigned long> autodef_long;
    typedef autodef_helper8<autodef_long, int, unsigned> autodef_int;
    typedef autodef_helper8<autodef_int, short, unsigned short> autodef_short;
    typedef autodef_helper8<autodef_short, signed char, unsigned char> autodef_char;
}

typedef portable_inttypes::autodef_char inttypes;

int main(void)
{
    return sizeof(inttypes::uint32_t);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:57:34.030

这段代码计算出不同基本标量类型的大小，并根据它定义了一些类型。

所以是的，它用于跨平台兼容性。但是，为什么以*这种方式*使用它超出了我的理解。

# java - 将 OpenJMS 服务器作为嵌入式应用程序运行

> ID：12863743
> 
> 赞同：0
> 
> 时间：2012-10-12T16:54:48.743
> 
> 标签：java, openjms

我有一个应用程序也需要作为 JMS 服务器（代理）。所以我想在同一个 JVM 中启动 OpenJMS 服务器。[我粗略地读到这是可能的，但我在http://openjms.sourceforge.net](http://openjms.sourceforge.net)站点或其他任何地方都找不到任何示例或解释。

有没有人这样做过，有多简单？我知道 HornetQ 非常简单，但我们希望继续使用 OpenJMS。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:45:17.127

是的，在 HornetQ 中，您只需两行代码和一个配置 xml 即可启动嵌入式 jms 服务器。

既然 HornetQ 是基于 POJO 和开源的，你为什么不选择它呢？

皮耶罗。

您还可以在新的 HornetQ 书中查看有关嵌入 HornetQ 的更多详细信息

[www.amazon.com/dp/1849518408/?tag=packtpubli-20](https://rads.stackoverflow.com/amzn/click/com/1849518408)

# python - 开始使用 numpy 或 scipy？

> ID：12863745
> 
> 赞同：0
> 
> 时间：2012-10-12T16:54:59.810
> 
> 标签：python, numpy, python-2.7, scipy

我仔细阅读了之前帖子中有用的贡献者的描述`numpy`和`scipy`推荐。

由于我是 Python 的初学者，请您帮助我：例如，我在文件`stats1.txt`夹中有一个文件（）`c:\\programming`；这个 .txt 文件有一列有 1000 个值；现在我想获得这些值的描述性统计数据（平均值、中值、最大值、最小值、标准差）。

如何开始使用`numpy`或`scipy`在同一文件或新文本文件中执行结果来编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:04:34.223

它需要对python的工作原理有一些基本的了解，它是一种面向对象的语言。所以你基本上解析输入文件，因为你说文件只有一列，你只需要将值转换为数字

```
with open('stats1.txt') as f:
    lines=[float(i) for i in f.xreadlines()] 
```

这将为您提供一个类似于您使用电子表格打开它时所看到的表格，请注意它假定所有值都是数字，如果您混合了文本，则需要进行更多排序。然后你把它变成一个numpy数组

```
nlines=numpy.array(lines) 
```

然后，要获得您的统计值，

```
stdev=nlines.std()
min_=nlines.min()
max_=nlines.max()
mean=nlines.mean()
import collections
mode=collections.Counter(nlines).most_common()[0] 
```

# excel - VBA使用相同的宏按钮展开/折叠行

> ID：12863752
> 
> 赞同：5
> 
> 时间：2012-10-12T16:55:27.400
> 
> 标签：excel, vba

关于如何运行一个简单的宏按钮，我们有一个小问题。此按钮的用途有两个：展开一行和折叠一行。

**1**在按下按钮时启动此 VBA 命令：

```
Sub Macro7()

Rows(7).ShowDetail = True

End Sub 
```

此命令扩展第 7 行。

**2**再次按下按钮（同时扩展行），此 VBA 被启动：

```
Sub Macro7()

Rows(7).ShowDetail = False

End Sub 
```

这会折叠该行。

有没有办法将一个按钮链接到两个宏？

提前致谢！！！

米

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T17:30:30.580

```
Sub Macro7()  
    With Rows(7)
        .ShowDetail = Not .ShowDetail
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T17:03:23.770

无需。只需调整宏以检查行的当前状态（折叠或展开）并采取相应措施：

```
Sub ExpandOrCollapse()

Rows(7).ShowDetail=IIF(Rows(7).ShowDetail,False,true)

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T18:00:32.547

我尝试了上述答案，但对我不起作用。以下是有效的代码：

```
Sub rowExpanded()

Rows("7:7").Select
Selection.EntireRow.Hidden = IIf(Selection.EntireRow.Hidden, False, True)

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:04:30.020

尝试这个

```
Dim rowExpanded As Boolean
rowExpanded = Rows(7).ShowDetail

If rowExpanded = True Then
    Rows(7).ShowDetail = False
Else
    Rows(7).ShowDetail = True
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T01:39:55.057

尝试使用命令按钮（ActiveX 控件）。使用按钮标题来识别切换状态。

```
Private Sub CommandButton1_Click()

    If CommandButton1.Caption = "-" Then
        ActiveSheet.Outline.ShowLevels Rowlevels:=1, ColumnLevels:=1
        JobDescriptionToggleButton.Caption = "+"
    Else
        ActiveSheet.Outline.ShowLevels Rowlevels:=8, ColumnLevels:=8
        JobDescriptionToggleButton.Caption = "-"
    End If

End Sub 
```

# ios - Adobe AIR NetworkInfo 原生扩展不支持 AIR 模拟器？

> ID：12863753
> 
> 赞同：4
> 
> 时间：2012-10-12T16:55:29.897
> 
> 标签：ios, flash, air

嗨，我下载了 AIR NetworkInfo 本机扩展 (http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/networkinfo.html)，当我在 ipad 上测试它时它可以工作，但当我测试时我在桌面上的应用程序出现错误

> “无法加载内容，因为加载扩展时出现问题：错误：MacOS-x86 不支持请求的扩展 com.adobe.Networkinfo。”

我有其他不会引发此错误的扩展。我正在使用 Flashbuilder 4.6，当我查看适用于 Apple IOS 的 Actionscript 构建包时，我看到一个警告，即扩展名“不支持 AIR 模拟器”。我不想每次在桌面上测试时都删除扩展名，也不应该这样做。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:07:33.917

这是因为 NetworkInfo ANE 是为 ARM 架构编译的，不会在您的模拟器上运行，只能在真实设备上运行。您应该执行构建脚本以避免每次需要发布构建时添加和删除。

# android - 自定义 ProgressDialog 扩展 Dialog 或 ProgressDialog？

> ID：12863763
> 
> 赞同：3
> 
> 时间：2012-10-12T16:56:25.327
> 
> 标签：android, progressdialog

我只是想创建一个旋转的进度对话框。没有文字，没有边框，没有背景。只是一个旋转的通知，轻轻地位于内容顶部的屏幕中心。

在创建此自定义对话框时，我看到了两个不同的 Stack Overflow 问题。

他们都使用这种样式：

```
 <style name="NewDialog" parent="@android:style/Theme.Dialog">

    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:colorBackground">#ffffff</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:width">600dip</item>
    <item name="android:height">100dip</item>
     <item name="android:textColor">#FF0000</item>

</style> 
```

但是在 Java 方面，一个扩展了 Dialog 并包含了很多自定义内容，另一个就是这样：

```
public class MyProgressDialog extends ProgressDialog {

    public MyProgressDialog(Context context) {
        super(context, R.style.NewDialog);

    }

} 
```

在第一个（扩展对话框）上，我得到一个空白。没有对话。没有。在上面的代码示例中，我看到一个缩小的小对话框在一个偏离中心的黑盒子内旋转。

哪种方法更正确，我可以提供有关如何实现此方法的示例吗？

另外，如何使该对话框透明/无边框？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T22:57:00.790

现在执行此操作的“正确方法”是扩展 DialogFragment [http://developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

如果您没有使用兼容性库，那么您就不是在当前的 Android 世界中进行编程。

如果你想扩展 Dialog，那么我这里有一些示例代码：[https](https://github.com/tom-dignan/nifty/tree/master/src/com/tomdignan/nifty/dialogs) ://github.com/tom-dignan/nifty/tree/master/src/com/tomdignan/nifty/dialogs在这段代码中，我实现了一种通过扩展 Dialog 来实现“进度对话框”。我扩展了 Dialog 因为我想要完全控制并且希望我的 Dialog 是全屏的。

不过，我建议阅读上面的 DialogFragment 文档并使用它。

所以说真的，这里没有对错之分。扩展这三个类中的任何一个都可以，但最简洁和最新的方法是 DialogFragment 方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T11:29:21.527

一种方法是使用自定义对话框，请求功能 No_Title 并将背景可绘制资源设置为透明。

您可以使用以下代码，我刚刚在 Android 4.0.3 ICS 上编写并测试了它。

布局文件夹中的 xml 布局是 dialog_progress.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ProgressBar
        android:id="@+id/dialogProgressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"/>

</LinearLayout> 
```

显示对话框并使其透明的java代码如下。

```
Dialog dialog = new Dialog (this);

dialog.requestWindowFeature (Window.FEATURE_NO_TITLE);
dialog.setContentView (R.layout.dialog_progress);
dialog.getWindow ().setBackgroundDrawableResource (android.R.color.transparent);
dialog.show (); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T14:04:41.577

通过在 ImageView 上使用逐帧动画而不是制作自定义进度对话框，可以很容易地实现类似的效果。为此，您只需要一系列图像（可以从任何 gif 中提取）。然后您可以在其上应用逐帧动画。它会做你想要的。

我用下面的代码做了类似的事情-：

// 逐帧动画的 XML

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:oneshot="false" >

<item
    android:drawable="@drawable/frame00"
    android:duration="150"/>
<item
    android:drawable="@drawable/frame01"
    android:duration="150"/>
<item
    android:drawable="@drawable/frame02"
    android:duration="150"/>
<item
    android:drawable="@drawable/frame03"
    android:duration="150"/>
<item
    android:drawable="@drawable/frame04"
    android:duration="150"/>
<item
    android:drawable="@drawable/frame05"
    android:duration="150"/>
<item
    android:drawable="@drawable/frame06"
    android:duration="150"/> 
```

用于启动动画的 Java 代码：-

```
ImageView iv = (ImageView)findViewById(R.id.progressDialog);
iv.setBackgroundResource(R.anim.progress_dialog_icon_drawable_animation);
AnimationDrawable aniFrame = (AnimationDrawable) iv.getBackground();
aniFrame = (AnimationDrawable) iv.getBackground();
aniFrame.start(); 
```

![我从上面的代码中实现了这一点](../Images/360ffdef5d82b526f111bc351e28ce7f.png)

希望能帮助到你 ！

# bash - 如何在bash中选择值的子集

> ID：12863767
> 
> 赞同：3
> 
> 时间：2012-10-12T16:56:31.057
> 
> 标签：bash, subset

我有一个文件说 input.dat 像这样

```
column1 column2
 0       0
 1.3     1.6
 1.8     2.1
 2.0      
 2.6 
```

我需要从第 1 列中提取值的子集，这些值最接近第 2 列中的值，以便两列中的条目总数相等。在这个例子中，我需要获得的输出

```
column1 column2
0      0 
1.8    1.6
2.0    2.1 
```

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:29:50.367

如果这是您的限制，则可以使用 bash 脚本执行此操作，但使用 Python / C++ / Java 处理此类问题会更​​容易，因为这是优化二分匹配问题的一个版本（你必须如果在脚本中重复读取每一行，或者使用大量辅助变量）

==> 如果我们可以假设两列中的值都已排序并递增，那么一个简单的解决方案是：

对于第二列中的每个值：

*   依次读取第一列中的值，直到 col2_value - col1_value 的差值从负变为正
*   然后找到 min( abs(negative_difference), positive_difference ) 并选择对应于较小差异的 col1_value
*   从 col1 和 col2 中删除两个条目并将它们添加到结果表中
*   重复这个过程，直到原表的col2中没有任何东西

这具有 m*n 的最坏情况运行时间，其中 m 是 col1 中的 # 个条目，n 是 col2 中的 # 个条目，如果您很聪明并进行恒定时间交替检查，则平均运行时间为 O(n)（比较 -1 , +1 来自最后选择的 col1_value 的索引，因为 -2、+2 等当然会导致更大的差异）而不是连续的，以找到 col2 中的当前值和 vol1 中的值之间的最小差异。

这是一个幼稚的解决方案，因为它不会最小化系统中的整体差异。最佳解决方案是 NP，因此对于大型数据集，您可能做的最好的事情就是使用一种近似图形算法进行匹配。

# android - Android：在通知栏中修改右上角的时钟

> ID：12863772
> 
> 赞同：0
> 
> 时间：2012-10-12T16:57:04.577
> 
> 标签：android, eclipse, adt, clock

我正在使用带有 ADT 的 Eclipse 来开发适用于 Android (ICS) 的应用程序，并且拥有一部 HTC Sensation 手机。是否有可能修改状态栏右侧显示的数字时钟，使其除小时和分钟外还显示秒？

如果可能的话，有人可以发布一些访问 HTC 状态栏和/或时钟的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:01:06.933

这是不可能的，因为您无法访问通知栏的时钟或电池指示灯等。

# c++ - 未初始化变量的值是如何确定的？

> ID：12863777
> 
> 赞同：5
> 
> 时间：2012-10-12T16:57:25.220
> 
> 标签：c++, initialization

给定一个程序：

```
int main()
{

    short myVariableName1;  // stores from -32768 to +32767
    short int myVariableName2;  // stores from -32768 to +32767
    signed short myVariableName3;  // stores from -32768 to +32767
    signed short int myVariableName4;  // stores from -32768 to +32767
    unsigned short myVariableName5;  // stores from 0 to +65535
    unsigned short int myVariableName6;  // stores from 0 to +65535

    int myVariableName7;  // stores from -32768 to +32767
    signed int myVariableName8;  // stores from -32768 to +32767
    unsigned int myVariableName9;  // stores from 0 to +65535

    long     myVariableName10;  // stores from -2147483648 to +2147483647
    long     int myVariableName11;  // stores from -2147483648 to +2147483647
    signed   long myVariableName12;  // stores from -2147483648 to +2147483647
    signed   long int myVariableName13;  // stores from -2147483648 to +2147483647
    unsigned long myVariableName14;  // stores from 0 to +4294967295
    unsigned long int myVariableName15;  // stores from 0 to +4294967295
    cout << "Hello World!" << endl;
    cout << myVariableName1 << endl;
    cout << myVariableName2 << endl;
    cout << myVariableName3 << endl;
    cout << myVariableName4 << endl;
    cout << myVariableName5 << endl;
    cout << myVariableName6 << endl;
    cout << myVariableName7 << endl;
    cout << myVariableName8 << endl;
    cout << myVariableName9 << endl;
    cout << myVariableName10 << endl;
    cout << myVariableName11 << endl;
    cout << myVariableName12 << endl;
    cout << myVariableName13 << endl;
    cout << myVariableName14 << endl;
    cout << myVariableName15 << endl;
    cin.get();

    return 0;
} 
```

打印出未分配的变量将打印之前存储在该内存位置中的任何内容。我注意到的是，在多次连续执行中，打印的值没有改变——这告诉我每次执行时内存中的位置都是相同的。

我只是好奇这是如何确定的，为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:00:55.543

这些变量存在于堆栈中。程序的执行看起来是确定性的，所以每次运行时都会发生相同的事情。它不一定选择相同的地址（现在许多运行时都使用地址空间随机化技术来确保每次运行之间的堆栈地址**不同**），但堆栈上的相对地址每次都包含相同的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:00:55.997

它们可以是任何东西，不要依赖它们来成为任何特定的东西。
从技术上讲，这些值是**Indeterminate**。

请注意，使用 Indeterminate 值会导致**Undefined Behavior**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T17:01:07.270

它们都是基于堆栈的。可能启动代码已经使用了这些位置，所以你会得到它留在其中的任何东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T17:00:59.147

该行为未定义为“之前存储在该内存位置的任何内容”，但它根本**没有定义。无法保证会发生什么**。

我最好的猜测是您的操作系统正在使用虚拟内存（就像大多数现代操作系统一样），因此每次都为您提供相同的内存地址。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-12T17:04:45.670

与人类不同，计算机是确定性的。

通常在读取尚未赋值的变量时使用编译器选项是一个好主意。

因此，操作系统会提取代码并每次都执行完全相同的操作。因此结果相同。

但是，如果您开始摆弄代码，则可执行文件会有所不同。由于您没有具体说明，因此下次您会得到不同的结果。

因此，总而言之，只需使用编译器的所有功能来帮助您发现此错误并养成在使用该变量之前给变量值的习惯。

# jquery - 从 jquery 函数和 ajax 调用返回值

> ID：12863778
> 
> 赞同：0
> 
> 时间：2012-10-12T16:57:27.103
> 
> 标签：jquery

我正在寻找从 jquery 函数内部的 ajax 调用返回值。我有这个代码，但它返回`undefined`。非常感谢任何关于我做错了什么的帮助。

```
$.inlDo = function(action,rec,val) {
    $.ajax({
        type: 'POST', url: 'editFile.php?do='+action+'&record='+rec+'&val='+val,
        success: function(d) {
            return 'ok';
        }
    });
}

alert($.inlDo('del',id,'')); 
```

ajax 调用是成功的，所以这不太可能是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:59:53.127

您不能使用 ajax 调用返回值

```
$.inlDo = function(action,rec,val) {
    $.ajax({
        type: 'POST', url: 'editFile.php?do='+action+'&record='+rec+'&val='+val,
        success: function(d) {
          alert(d);
       //i will suggest you to add a function call back
         compltedRequest(d);
        }
    });
}

function completdRequest(data)
 {
  alert("request has been completed");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:00:18.553

试试这样：

```
$.inlDo = function(action,rec,val) {
    return $.ajax({
        async: false,
        type: 'POST', url: 'editFile.php?do='+action+'&record='+rec+'&val='+val,
        success: function(d) {
            return 'ok';
        }
    }).responseText;
} 
```

如果您正在接收 XML 或 JSON 响应，您应该使用一些 XML 解析器，或 JSONIFY 用于 JSON 响应，以便您可以将响应作为对象访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:12:47.757

问题是这是一个异步调用。`alert`正在尝试显示 的结果`$.inlDo`，但它不返回您指定为回调的函数。

该`$.inlDo`函数不阻塞地返回，即它不等待ajax 调用完成然后继续执行。ajax 调用可以在返回后（甚至一段时间后）完成`$.inlDo`。

然后发生的情况是，`success`一旦从服务器返回数据（即 ajax 调用完成），就会执行回调。在此回调中，您必须处理结果。此功能应该执行`alert`（如@Zlatan 建议）或更新网页等。

如果您希望调用阻塞，即等到响应返回，则使用`async: false`配置。何时可以使用同步（阻塞）调用存在一些限制。

更多信息：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# objective-c - 自定义 MKOverlayView/未修改的 MKPolygonView 在某些缩放级别被裁剪

> ID：12863781
> 
> 赞同：5
> 
> 时间：2012-10-12T16:57:44.983
> 
> 标签：objective-c, ios, mapkit

当有多个叠加层添加到地图时，我遇到了自定义 MKOverlayView 和标准 MKPolygonView 在某些缩放级别被裁剪的问题。

[两次双击缩放级别的阿尔及利亚叠加层。](https://oneironautics.org/images/map2.png)

[三个双击缩放级别的阿尔及利亚叠加层。注意剪辑。](https://oneironautics.org/images/map3.png)

几点观察：

*   无论我是使用自定义 MKOverlayView 还是返回具有相同多边形的 MKPolygonView，都会发生这种情况。
*   如果我只绘制一个叠加层，则不会出现此问题。
*   这不会发生在所有叠加层上——只有一些。

就代码而言：这会将覆盖添加到 NSMutableArray (borderOverlays)，然后在其他地方访问它以加载特定国家 ID 的覆盖。minX/minY/maxX/maxY 是纬度/经度值；多边形是从 ESRI shapefile 构造的路径。

```
CLLocationCoordinate2D mbrMin = CLLocationCoordinate2DMake(minY, minX);
CLLocationCoordinate2D mbrMax = CLLocationCoordinate2DMake(maxY, maxX);
MKMapPoint minPoint = MKMapPointForCoordinate(mbrMin);
MKMapPoint maxPoint = MKMapPointForCoordinate(mbrMax);
MKMapSize size = MKMapSizeMake(maxPoint.x - minPoint.x, maxPoint.y - minPoint.y);
MKMapRect rect = MKMapRectMake(minPoint.x, minPoint.y, size.width, size.height);

if ( spans180 ) {
    rect = MKMapRectMake(minPoint.x, minPoint.y, MKMapSizeWorld.width * 2, size.height);
}

CustomMKOverlay* overlay = [[CustomMKOverlay alloc] initWithPolygon:polygon withBoundingMapRect:rect];
[borderOverlays addObject:overlay]; 
```

叠加层通过以下方式添加到地图中：

```
[mapView addOverlay:overlay]; 
```

viewForOverlay：

```
- (MKOverlayView *)mapView:(MKMapView*)aMapView viewForOverlay:(id<MKOverlay>)overlay
{
    if ( [overlay isKindOfClass:[CustomMKOverlay class]] ) {
        /* Note: the behaviour if this chunk is not commented is the exact same as below. 
        CustomMKOverlayView* overlayView = [[[CustomMKOverlayView alloc] initWithOverlay:overlay withMapView:aMapView] autorelease];
        [borderViews addObject:overlayView];
        return overlayView; */

        MKPolygonView* view = [[[MKPolygonView alloc] initWithPolygon:((CustomMKOverlay*)overlay).polygon] autorelease];
        view.fillColor = [((CustomMKOverlay*)overlay).colour colorWithAlphaComponent:0.5f];
        view.lineWidth = 5.0f;
        view.strokeColor = [UIColor blackColor];
        [borderViews addObject:view];
        return view;
    }
} 
```

使用 MKPolygonView 时，没有绘图代码（示例所示）。不过，为了完成，这是我的自定义绘图代码，并且会出现同样的问题。轮廓通常绘制 - 这实际上是调试绘图，它在覆盖层的 boundingMapRect 周围绘制一个矩形并填充它而不用勾勒轮廓。

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context
{    
    CustomMKOverlay* overlay = (CustomMKOverlay*)self.overlay;

    CGRect clipRect = [self rectForMapRect:overlay.boundingMapRect];
    CGContextAddRect(context, clipRect);
    CGContextClip(context);

    UIColor* colour = [UIColor redColor];
    colour = [colour colorWithAlphaComponent:0.5f];
    CGContextSetFillColorWithColor(context, [colour CGColor]);
    CGRect fillRect = [self rectForMapRect:overlay.boundingMapRect];
    CGContextFillRect(context, fillRect);
} 
```

可以说，在这一点上我有点难过 - 就好像正在加载的缩放平铺在覆盖上绘制。我已经介绍了有关 TileMap 和 HazardMap 的各种示例，但是由于我没有加载自己的地图图块，因此它们并不是很有帮助。

我可能错过了一些非常明显的东西。任何帮助，将不胜感激。如有必要，我很乐意提供更多代码/上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T23:21:18.123

罪魁祸首似乎是：

```
CLLocationCoordinate2D mbrMin = CLLocationCoordinate2DMake(minY, minX);
CLLocationCoordinate2D mbrMax = CLLocationCoordinate2DMake(maxY, maxX); 
```

MKOverlays 的边界矩形显然需要基于边界区域的西北/东南坐标，而不是西南/东北（这是 ESRI shapefile 存储其边界坐标的格式）。将违规代码更改为：

```
CLLocationCoordinate2D mbrMin = CLLocationCoordinate2DMake(maxY, minX);
CLLocationCoordinate2D mbrMax = CLLocationCoordinate2DMake(minY, maxX); 
```

似乎解决了缩放和奇怪的轮廓异常的所有问题。我希望这对将来遇到这个问题的人有所帮助（如果没有，我想听听，因为这个解决方案对我来说是一种享受）。

另外：如果有人可以指出任何说明这一点的文档，我想看看。

# iphone - 如何将视频添加到 iPhone 应用程序

> ID：12863782
> 
> 赞同：0
> 
> 时间：2012-10-12T16:57:45.917
> 
> 标签：iphone, objective-c, ios, cocoa-touch, video

> **可能重复：**
> [iPhone 支持的视频文件格式](https://stackoverflow.com/questions/1535836/video-file-formats-supported-in-iphone)

我想知道哪些格式可以放在 iPhone 应用程序中，有一个视图，我想把这个视频放在那里自动开始......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:35:00.037

此代码应将 MPMoviePlayerController 添加到您的视图中，并使用已导入项目的视频自动开始播放。

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"mp4"];
NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
player = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
player.frame = CGRectMake(0, 0, 1024, 768);
[self.view addSubview:player.view];
player.fullscreen = NO;
[player play]; 
```

*例如，我使用了 .mp4 文件类型

# objective-c - 无法加载从带有标识符的包中的笔尖引用的图像

> ID：12863783
> 
> 赞同：0
> 
> 时间：2012-10-12T16:57:48.823
> 
> 标签：objective-c, ios, xcode, debugging

我从我的项目中删除了很多不再使用的图像。现在在日志中，我得到了一堆

无法加载从包中带有标识符“com.mystuff.hello”的笔尖引用的“Sending.png”图像

我从项目中删除但不再使用的图像。该应用程序正常运行，但我在日志中得到了所有这些我想要删除的警告。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:15:30.177

可能您从不再使用的 nib 文件中引用了图像。如果是这种情况，删除那些未使用的 nib 文件将解决问题。

# javascript - 带有并发请求的 Internet Explorer 8 图像加载

> ID：12863785
> 
> 赞同：0
> 
> 时间：2012-10-12T16:57:55.533
> 
> 标签：javascript, image, internet-explorer-8, preloader

在我的应用程序中，我插入了一个非常基本的图像预加载器，它基本上会生成许多与应用程序中使用的图像匹配的图像对象，并尝试尽早加载它们。这在所有浏览器中都可以正常工作 - 除了 Internet Explorer 8。

我将回调附加到 Image 对象的 onload 和 onerror 事件，仅当所有图像对象都触发了其中一个时才显示我的主页。然而，在 Internet Explorer 8 中，在创建了 80 个 Image 对象后，每个对象在 onload 和 onerror 上都具有相同的功能，我只得到一个回调。

这是一个已知问题吗？是否有解决方法？

# sql-server-2008 - 替换旧光标的更好解决方案？

> ID：12863786
> 
> 赞同：0
> 
> 时间：2012-10-12T16:58:01.330
> 
> 标签：sql-server-2008

我有两张这样的桌子

table1 按 paymentid、paydate 排序：

```
 paymentid   paydate   amount

  1         20120101    100

  1         20120101    150

  1         20120101    150

  2         20120115    100

  2         20120115    100

... 
```

表2按paymentid、paydate排序：

```
paymentid    paydate   pay1   pay2   pay3....base on the position from table1...up to pay20

1            20120101   null  null    null   

2            20120115   null  null    null

... 
```

更新后table2应该是这样的

```
1            20120101   100   100     150   null.....

2            20120115   100   100     null  null    null..... 
```

到目前为止，我可以提出的可能解决方案是：

1，用于循环通过 table1 的临时表

2、游标……目前的解决办法：

```
declare @paymentid int 

declare @paydate   char(10)

declare @amount    money

declare @count int

declare @saveid int

declare @savedate char(10)

delcare cur cursor for select paymentid, paydate, amount from table1 order by paymentid, paydate

open cur

fetch next from cur into @paymentid,@paydate,@amount

while @@fetch_status = 0

  if @saveid <> @paymentid or @savedate <> @paydate

     set @count = 1

     set @saveid = @paymentid

     set @savedate = @paydate

  else set @count = @count + 1

  if @count = 1

  update table2 

  set pay1 = @amount

  where paymentid = @paymentid and paydate = @paydate

  if @count = 2

  update table2 

  set pay2 = @amount

  ...

  fetch next

  ... 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:15:08.020

Try this

[SQL Fiddle](http://sqlfiddle.com/#!3/50f69/11)

```
declare @Test Table (paymentid int, 
                   paydate varchar(25), amount int)

INSERT INTO @Test

SELECT 1,'20120101',100
UNION ALL
SELECT 1,'20120101',150
UNION ALL
SELECT 1,'20120101',150
UNION ALL
SELECT 2,'20120115',100
UNION ALL
SELECT 2,'20120115',100

--INSERT into Table2 //insert here
SELECT * FROM (
SELECT *, 'pay' + CAST(Row_Number() OVER (Partition by paymentid, 
                        paydate order by amount) AS VARCHAR) PayCol
FROM @Test
)  V
PIVOT 
(
  MAX(Amount) For PayCol IN 
   (pay1,pay2,pay3,pay4, pay5, pay6, pay7, pay8, pay9, pay10,
        pay11,pay12,pay13,pay14, pay15, pay16, pay17, pay18, pay19, pay20)
) As P 
```

# java - 使用 Android(Java) 配对蓝牙设备时如何获取和/或设置链接密钥？

> ID：12863789
> 
> 赞同：3
> 
> 时间：2012-10-12T16:58:18.520
> 
> 标签：java, android, bluetooth

我对Android开发真的很陌生，所以我有很多问题。现在我正在尝试通过蓝牙连接两个设备。到目前为止，我能够做到这一点，我已经连接了两台平板电脑，但现在我被要求保存 LinkKey 并使用它的一些字节来创建一个 PIN。那么，我怎样才能得到那个 LinkKey？我已经读到它保存在两个设备上以供将来连接，但我不知道如何获取它。

另外，我读到这个设备可以删除那些 LinkKey，然后会发生什么？如果他们再次尝试相互连接，他们会使用相同的 LinkKey 还是创建一个新的？

最后一件事。我必须将平板电脑连接到既没有显示器也没有键盘的设备，正常的蓝牙连接就足够了吗？我这样做是为了建立连接：

```
final UUID MY_UUID = UUID.randomUUID();
        //tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        Method m = null;
        try {
            m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        tmp = (BluetoothSocket) m.invoke(device, 1);
        mmSocket = tmp;

    Thread connectionThread = new Thread(new Runnable(){

    public void run() {
        // Cancel discovery because it will slow down the connection
        mBluetoothAdapter.cancelDiscovery();

        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)
        manageConnectedSocket(mmSocket);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:14:53.730

链接密钥创建是在堆栈/LMP（链接管理器）级别完成的，而不是在应用程序级别。蓝牙设备检查链接密钥是否存在，如果存在则不进行配对，蓝牙连接将继续，如果在蓝牙堆栈上没有找到链接密钥，LMP（链接管理器）将启动一个新的配对过程，一次配对完成，蓝牙连接将继续。如果删除链接密钥，将为连接生成一个新的链接密钥。

尝试在 adb shell (`/data/misc/bluetoothd`或`data/misc/bluetooth`) 中检查链接密钥，它将在配对设备信息中可用。

# javascript - 在 Javascript 中，如何获取 gridview 的当前页面索引？

> ID：12863790
> 
> 赞同：0
> 
> 时间：2012-10-12T16:58:22.647
> 
> 标签：javascript, asp.net, gridview

我有一个网格视图，它在创建行时添加一个 onclick 属性。作为 Javascript 方法的一部分，我附上了以下代码：

```
alert('<%=gvxTaskList.PageIndex%>'); 
```

但无论我点击哪个页面，警报总是返回 0 而不是当前页面的索引。每次点击新页面时，如何通过Javascript获取当前页面索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:03:27.990

试试这个来获取当前页面索引： -

```
<code> 
   var CurrentIndexOfPage= Grid1.get_currentPageIndex(); 
</code> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:07:14.337

你没有。

Gridview 呈现为 html 表格。Javascript 对 GridViews 一无所知。

您可以将页面索引放在隐藏控件中并阅读它。

# ruby - 使用 Sidekiq、Capistrano、Sinatra 进行部署

> ID：12863793
> 
> 赞同：5
> 
> 时间：2012-10-12T16:58:40.883
> 
> 标签：ruby, sinatra, capistrano, sidekiq

作为使用 Sinatra 进行 capistrano 部署的一部分：

```
* executing `sidekiq:start'
* executing "cd /var/www/nodes/current ; nohup bundle exec sidekiq -e production -C /var/www/nodes/current/config/sidekiq.yml -P /var/www/nodes/current/tmp/pids/sidekiq.pid -r /var/www/nodes/current/app/nodes.rb >> /var/www/nodes/current/log/sidekiq.log 2>&1 &" 
```

[根据sidekiq/issues/10](https://github.com/mperham/sidekiq/issues/10)，我无论如何都看不到让 -r （要求）指向我的 Sinatra 。该应用程序位于 ./app/nodes.rb 中。

我的 config.ru 是

```
require './app/nodes'
run Nodes 
map '/sidekiq' do
    run Sidekiq::Web
end 
```

'./app/nodes' 在节点和 sidekiq 需要运行的所有环境中加载。

在[sidekiq/capistrano.rb](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/capistrano.rb)中，目前没有传入 -r 标志的选项。

sidekiq.log 按预期报告此错误：

```
2012-10-12T01:04:59Z 8175 TID-bf65s INFO:                  
2012-10-12T01:04:59Z 8175 TID-bf65s INFO:   Please point sidekiq to a Rails 3 application or a Ruby file
2012-10-12T01:04:59Z 8175 TID-bf65s INFO:   to load your worker classes with -r [DIR|FILE].
2012-10-12T01:04:59Z 8175 TID-bf65s INFO: 
```

有任何想法吗？

五

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:37:30.243

由 Sidekiq 的创建者 Mike Perham 解决：[在 github 上](https://github.com/mperham/sidekiq/issues/440)。在 sidekiq.yml 中，您可以添加特定的 require 选项。非常感谢！

# c# - 实体框架：如何在 Code First 迁移中禁用模型兼容性检查

> ID：12863794
> 
> 赞同：1
> 
> 时间：2012-10-12T16:58:39.973
> 
> 标签：c#, entity-framework, ef-code-first, migration, entity-framework-migrations

我想创建一个数据库初始化程序，无论模型是否处于正确状态，它都会运行所有挂起的迁移。即我希望初始化程序运行所有迁移，即使它认为模型状态自生成迁移以来已经改变，因此它不会出现以下错误：

> 无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移已禁用。

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:44:31.590

打开自动迁移。该错误表示它无法使您的数据库与您的代码同步，因为您的类包含不在任何基于代码的迁移中的更改。

# ios - 基于iOS设备的自适应定位

> ID：12863816
> 
> 赞同：0
> 
> 时间：2012-10-12T17:00:17.913
> 
> 标签：ios, dynamic, cocos2d-iphone, positioning

几个月前我制作了一个 iPhone 游戏，现在正尝试将其作为通用应用程序移植到带有 Cocos2D 的 iPad 和 iPhone 5 上。我想知道是否有一种简单的方法可以根据运行游戏的设备确定对象应该放置在哪里。

我可以使用 if 语句来确定游戏在哪个设备上运行，因此当我为设备获得正确尺寸的图像时，我可以为每个对象设置单独的位置，但似乎会有一个数学公式可以让我使用更少的代码。显然，像全屏背景这样的东西非常简单，因为它只需要居中：

```
[background setPosition:CGPointMake(screenSize.width/2,screenSize.height/2)]; 
```

我不知道如何将旧的 3.5 英寸、640 x 960 分辨率 iPhone 上的 X = 144 & Y = 330 按钮调整为 iPad 或 iPhone 5 分辨率。

如果它能让我的生活更轻松，我愿意使用更新版本的 iOS，但因为我没有使用任何 Apple 的对象，所以我不知道这是否可能。

也许这甚至是不可能的，因为 iPhone 和 iPad 版本的按钮大小不同，但我想我会问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:21:44.527

是的，我通常面临同样的问题，但如果它只是一个静态对象放置，我将为`relative coordinates instead of absolute`每个对象设置一个静态对象，然后使用屏幕尺寸正确放置它们，因此您可能想要使用如下功能：

```
-(CGPoint) relativeToScreen:(CGPoint) p { 
    return ccp(screenSize.width * p.x, screenSize.height * p.y) 
} 
```

其中 0.0 <= px =< 1.0 和 py 相同

并且不要忘记你的`anchorPoint`，因为节点位置也是基于它的

我希望你已经发现 cocos2d 已经代替你进行图像选择了，你只需要为你的图像设置正确的后缀：`-hd, -ipad, -ipadhd`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:22:11.033

对于 iphone5 分辨率，我将 hud 按钮相对于屏幕尺寸进行定位。与您为背景所做的非常相似。因此，例如，我想要在左上角的暂停按钮我会像这样放置：

```
[pauseButton setPosition:CGPointMake(0.0f + 30.0f, screenSize.height - 50.0f)]; 
```

对于 ipad，它变得非常棘手。我实施的懒惰方法是使用内容比例因子并放大所有内容并使用“死”边框来补偿 ipad 的屏幕比例。不是最好的，但至少您可以为 ipad 重复使用所有相同的资产。

# algorithm - Dijkstra 算法修正

> ID：12863818
> 
> 赞同：1
> 
> 时间：2012-10-12T17:00:26.250
> 
> 标签：algorithm, graph, graph-algorithm, dijkstra

我知道 Dijkstra 的最短路径算法。但是，如果我要修改它，而不是找到最短路径，而是使用贪心算法找到最长的路径。我必须对下面的代码做什么：

这是我使用的：

作为比较函数在最短路径版本中选择正确的节点：

```
 if (Cost(potential_node) > Cost(current_node) + cost(source , current_node)) then
 cost (potential_node) = cost(current_node) + cost (source, current_node) 
```

但是，另一方面，这是行不通的：

```
 if (Cost(potential_node) < Cost(current_node) + cost(source , current_node)) then
 cost (potential_node) = cost(current_node) + cost (source, current_node) 
```

有点困惑，非常感谢一些反馈

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T17:10:59.443

[最长路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard) ，因此没有已知的多项式解。

建议的修改不起作用，因为当 dijkstra 的算法将节点标记为“关闭”时，这意味着 - 永远不会有更短的路径。如果您关闭了一个节点，则在尝试最长路径时，该声明不正确 - 这并不意味着不再有通往该节点的路径。

回想一下，这正是我们在每个步骤中在 Dijkstra 算法上证明的（更多的“松弛”不会找到任何更短的路径），但是如果您使用 midification 找到当前最长的顶点路径 - 这并不意味着它确实是最长的一条 - 可能还有一条最长的路径尚未探索。

* * *

**编辑** - 当它不起作用时的反例（请原谅我是一个糟糕的 ascii 艺术家）

```
 A
      /   \
     /     \
    1       2  
   /         \
  B-----5---> C
V = {A,B,C} ;  E = { (A,B,1), (A,C,2), (B,C,5) } 
```

现在，从 开始`A`，这种方法将首先找到`C`“最长路径”并关闭它。`C`从现在开始 -根据 Dijkstra 的算法没有任何变化，因此您将得出结论，从`A`to的最长路径`C`长度为 2，而路径`A->B->C`更长。

# ruby - 将 ruby 散列扁平化为删除键的数组

> ID：12863819
> 
> 赞同：9
> 
> 时间：2012-10-12T17:00:25.810
> 
> 标签：ruby

有没有一种快速的方法可以将散列扁平化为删除键的数组？

```
h={:at => [10, 20], :width => 100, :height => 200} 
```

结果：

```
[[10, 20], 100, 200] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T17:01:54.933

有一个内置的哈希方法：`h.values`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T17:01:49.973

这很容易：

```
h.values 
```

如果您希望它按特定顺序进行，则需要做更多的工作。

# jquery - jQuery可拖动到相对定位的父容器

> ID：12863822
> 
> 赞同：1
> 
> 时间：2012-10-12T17:00:51.190
> 
> 标签：jquery, draggable, css-position

请看这里的代码：http: [//jsfiddle.net/MbYq6/](http://jsfiddle.net/MbYq6/)

拖动蓝色标记并将其放置在地图上后，标记会将自身重新定位到偏移值。我不知道坐标从哪里来。

标记在其位置属性是相对的父容器中应该是绝对位置。

如果有人碰到同样的问题并解决了，请告诉我。

谢谢山姆

# php - MySql mysql_real_escape_string 错误

> ID：12863824
> 
> 赞同：1
> 
> 时间：2012-10-12T17:00:53.933
> 
> 标签：php, mysql, forms, code-injection, mysql-real-escape-string

```
<?php
include("../scripts/createconnect.php");

if(isset($_POST['submitted'])) {

    $username = mysql_real_escape_string ($_POST['username']);
    $password = mysql_real_escape_string ($_POST['password']);

    $sqlinsert = "INSERT INTO Testing (User_Id, username, password)
        VALUES (NULL,'$username', '$password');"; 

    if (!mysqli_query($dbcon, $sqlinsert)) {
        die('error inserting into database');
        } // end of nested if statement

        $newrecord ="Congratulations!";

}  
?> 
```

我有一个由数据库输入的工作表单。我正在学习有关 MySql 注入预防的知识。

我正在尝试使用 mysql_real_escape_string 方法开始，但似乎遇到了格式错误。

我已确认我的数据库已连接。当我将 mysql_real_escape_string 添加到我的表单输入时，我现在遇到了一个错误。

我的远程文件“createconnect.php”通过 mysqli_connect 成功连接。

我添加了教程中详述的 ysql_real_escape_string，现在无法将数据输入到我的 MYSQL 数据库中。有人能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:28:15.227

你不能以这种方式编写代码。mysql 函数不能在 mysqli 中使用，如果你想使用 mysqli 来运行 php 查询。检查此链接：[http](http://scriptforyou.com/mysql-easily-insert-and-update-records/) ://scriptforyou.com/mysql-easily-insert-and-update-records/ 。这是使用 mysqli 的最佳教程。

也避免使用 mysql_real_escape_string 。编码快乐！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:35:37.650

**mysqli**有类似的功能称为[`mysqli_real_escape_string`](http://www.php.net/manual/en/mysqli.real-escape-string.php)

尝试

```
 $link = new mysqli("localhost", "my_user", "my_password", "dbaname");
 $username = mysqli_real_escape_string ($link,$_POST['username']);
 $password = mysqli_real_escape_string ($link,$_POST['password']); 
```

# css - 是否有可靠的方法来查找 CSS 职位？

> ID：12863828
> 
> 赞同：1
> 
> 时间：2012-10-12T17:00:56.013
> 
> 标签：css

在使用 css 进行网站布局与表格时，我接受了许多人的建议。我对 CSS 有很好的理解，但有一件事我想知道。也就是说，是通过猜测和检查找到正确的位置，还是有办法在第一次找到更精确的答案。

目前我正在做的是放置一个位置，看看它降落在哪里，然后进行多次调整，直到它到达我想要的位置。对我来说，这似乎有点野蛮，并且必须有更好的方法来做到这一点。

那么有没有更好的方法来找到正确的位置？

感谢您的投入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:32:20.077

规划您的设计和布局，了解 CSS 及其工作原理。实践。我可以在一张纸上画出一个设计，标出它的尺寸，然后在那张纸上写下 CSS，一旦编码出来并在现场环境中进行测试，我就可以 100% 地使用布局。仅仅因为我计划了我的设计，花时间进行数学计算以得出我的 css 值，并且我知道哪些 css 值做什么，何时使用它们，以及如何使用它们。

最好的建议，尽可能多地继续阅读和学习。在编写代码之前，至少开始为您的设计绘制简单的线框草图，并用所需的尺寸标记每个元素和空间，然后在进行设计时使用这些数字。

最后，不确定这是否属实，但听起来您只是在使用绝对定位？如果是这样，请学习如何使用相对定位、浮动、边距、填充等。虽然它可能更复杂，但它是一种更加动态和灵活的网站构建方式，您可以进行更简洁的设计，适用于所有浏览器并在所有浏览器上看起来都正确，而不仅仅是在受控条件下的一些浏览器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T17:04:05.793

**这是它的完成方式**

但是，如果您想这样做，请使用 Photoshop 或任何用于创建网站设计并检查位置的设计工具，然后尝试在 CSS 中给出它。我相信它不会是完美的，但你会很接近

# objective-c - self 对象中的值正在更改为 null 目标 c

> ID：12863830
> 
> 赞同：0
> 
> 时间：2012-10-12T17:01:05.463
> 
> 标签：objective-c, xcode, web-services, null, self

```
if([elementName isEqualToString:@"EmpWithNameAndID"]){
    [emps addObject:empObject];
    NSLog(@"count of emps is : %d",emps.count);

    self.managedObjectContext = appDelegate.managedObjectContext;

    EmpWithName *empWithNameObj = [NSEntityDescription insertNewObjectForEntityForName:@"EmpWithName"
                                                                inManagedObjectContext:self.managedObjectContext];
    if(!self.empObject){
        NSLog(@"Not nil");}
    else {
        NSLog(@"Yo Nil");
    }

    empWithNameObj.empID =self.empObject.empID;//@"123"
    empWithNameObj.empName =self.empObject.empName;//@"ABC"

    NSLog(@"emp object id is: %@",empWithNameObj.empID);
    NSLog(@"emp name is %@",empWithNameObj.empName);

    if(self.managedObjectContext == nil)
    { NSLog(@"S MOC is nil");}
    else {
        NSLog(@"S MOC is Not NIL");
    }

    NSError *error;
    if(![self.managedObjectContext save:&error]){
        NSLog(@"Failed to save the object");
    }
    else {

        NSLog(@"saved object");
    }
    if(error == nil)
    {
        NSLog(@"Good saved");
    }
    else {
        NSLog(@"something went wrong while saving");
    }
}
else {

    if([elementName isEqualToString:@"empName"] || [elementName isEqualToString:@"EmpID"]){

        NSLog(@"Element name is: %@ and its value is : %@ ",elementName,currentElementValue);

        if(!empObject)
        {
            NSLog(@"just empobject not nil");
        }
        else {
            NSLog(@"its nil.empobject");
        }

        if(!self.empObject){
            NSLog(@"Not nil");}
        else {
            NSLog(@"Yo Nil");
        }

        [self.empObject setValue:currentElementValue forKey:elementName];

            if([elementName isEqualToString:@"empName"]){
            NSLog(@"empName stored is %@", self.empObject.empName);
        }
        if([elementName isEqualToString:@"EmpID"]){
            NSLog(@"EmpID value stored is %@",self.empObject.empID);
        }
        currentElementValue = nil;
    }
} 
```

所以上面所有的代码都在 NSXMLParser 的 didEndElement 中。在代码末尾的 else 部分中，就在我将 currentElementValue 设置为 nil 之前，我有两个 if 条件。因此，当 elementName 为 empName 时，它​​会将其记录到输出“empName stored is (null)”中。但在此之前我有这个日志语句“元素名称是：empName，它的值是：

```
ABC". 
```

所以我的问题是它是否知道元素名称和它的值为什么它不保存它的值。为什么他们记录为空值？请帮忙。如果需要更多信息，请询问。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:25:46.087

好吧，我想出了一个解决方案。我不知道这是否正确，但我得到了我想要的。我所做的是在 else 块中而不是保存到 self.empObject 我使用了我在 initParser 中创建的 NSMutabledictionary 并将值添加到它们。然后在 if 块中使用该字典按键名检索值（因为我已经知道键名）并将它们分配给 empNameWithObj 并在字典上执行 removeAllObjects 。其余程序相同。有效。

# java - java中的String IndexOut Of Bounds Exception错误

> ID：12863832
> 
> 赞同：0
> 
> 时间：2012-10-12T17:01:06.260
> 
> 标签：java

我制作了一个程序来反转输入字符串的单词有一个错误代码：

> ```
>  Exception in thread "main" java.lang.StringIndexOutOfBoundsException:String index out of range: 17
>                    at java.lang.String.charAt(String.java:695)
>                    at Rev.main(Rev.java:14) 
> ```

主程序代码为：

> ```
> import java.io.*;
> class Rev
> {
>  public static void main(String args[])throws IOException
>   {
>     BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
>     System.out.println("Enter String");
>     String a=br.readLine();
>     a=" "+a+" ";
>     int x=a.length();
>     String b;
>     for(int z=a.length()-1;z>=0;z--)
>     {
>      if (a.charAt(z)==' ')
>      {
>       b=a.substring(z,x);
>       System.out.print(b+" ");    
>       a=a.replace(b,"");
>      }
>     }
>   } 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:22:01.957

如果 Java 专业人士需要解决您的问题，他只需几行代码即可完成：

```
final List<String> words = Arrays.asList(input.split(" "));
Collections.reverse(words);
for (String word : words) System.out.print(word + " ");
System.out.println(); 
```

如果您将此作为练习并想自己实现，您仍然可以考虑使用相同的基本思想。例如，遍历您的字符串并将空格的所有位置收集到`List<Integer>`. 然后使用`input.substring(list.get(i), list.get(i-1))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:15:31.303

You know the string index you're specifying is wrong. You know where the error's occurring. Add `System.out.println` calls to print the sting index and the length of the string just before the errant statement, and at other critical points in your code. Debug the problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:12:20.870

也许你应该尝试：

```
int x=a.length()-1; 
```

子字符串导致错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:12:25.370

为什么不将输入按空间拆分并存储在数组中并反转数组？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T17:20:51.720

好吧，我知道这不是您问题的答案，但是您为什么不尝试 StringBuilder 或 StringBuffer 方法，称为 reverse()

```
StringBuilder sb = new StringBuilder("Hello");

sb.reverse(); 
```

# c# - DB2 的 CreateSprocAccessor 参数问题

> ID：12863834
> 
> 赞同：1
> 
> 时间：2012-10-12T17:01:08.800
> 
> 标签：c#, stored-procedures, parameters, db2, enterprise-library

我正在使用 Enterprise Library 5.0，并且可以使 CreateSqlStringAccessor 与自定义参数映射器一起正常工作，但我得到：错误 [42884] [IBM][DB2] SQL0440N 没有名为“MySchema.MySPName”的授权例程，类型为“”找到了兼容的参数。SQLSTATE=42884

CreateSprocAccessor 代码：

```
var database = EnterpriseLibraryContainer.Current.GetInstance<Database>("MyDataSource");
var storedProcAccessorCommand = database.CreateSprocAccessor<ObjectResult>("MySchema.MySPName", new PersonKeyParameterMapper());
var searchResult = storedProcAccessorCommand.Execute("123456");
var rowCount = searchResult.Count(); 
```

CreateSqlStringAccessor 代码：

```
var database = EnterpriseLibraryContainer.Current.GetInstance<Database>("MyDataSource");
var command = database.CreateSqlStringAccessor<ObjectResult>("select FirstName, LastName, MiddleName from MySchema.MyTable where PersonKey = @PersonKey", new PersonKeyParameterMapper());
var searchResult = command.Execute("123456");
var rowCount = searchResult.Count(); 
```

对象结果：

```
public class ObjectResult
{
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
} 
```

PersonKeyParameterMapper 代码：

```
public class PersonKeyParameterMapper : IParameterMapper
{
    public void AssignParameters(DbCommand command, object[] parameterValues)
    {
        var personKey = command.CreateParameter();
        personKey.ParameterName = "@PersonKey";
        personKey.DbType = DbType.String;
        personKey.Value = parameterValues[0];
        command.Parameters.Add(personKey);
    }
} 
```

DB2 存储过程接口：

```
CREATE PROCEDURE MySchema.MySPName (  
    IN PersonKey VARCHAR(9)
) 
```

我已经阅读了 DB2 需要 ParameterMappers，但不确定为什么它适用于 SqlString 而不是 Sproc。我尝试将参数传递为“@PersonKey”和“PersonKey”，但都不起作用。谢谢。

# css - 移除元素的继承属性（box-sizing）

> ID：12863835
> 
> 赞同：37
> 
> 时间：2012-10-12T17:01:09.133
> 
> 标签：css, twitter-bootstrap, lightbox

我在引导站点上使用 jQuery 灯箱插件。它已`box-sizing: border-box`通过通用选择器设置。

```
* {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

因此，灯箱 div 不会正确显示（有时会出现垂直滚动条）。一旦我们通过网络检查器删除它，它看起来就可以了。有没有办法删除这个特定元素的 box-sizing 属性。 `box-sizing:''`或`box-sizing:none`似乎不起作用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-12T17:03:10.193

`box-sizing`^([msdn](https://msdn.microsoft.com/en-us/library/dd183522(v=vs.85).aspx)、) mdn ^([CSS](https://developer.mozilla.org/en/docs/Web/CSS/box-sizing))属性默认为`box-sizing: content-box;`. 您是否尝试过使用它来覆盖继承的样式？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-31T07:22:22.207

您可以使用

```
*:not(.classname){
  box-sizing : border-box;
} 
```

`classname`将是您要从通用选择器中排除的元素类。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-21T11:57:09.930

我在 bootstrap 上遇到了类似的问题，我确实`<a>`像这样覆盖了 box-sizing CSS 属性，

```
a *,
a *:before,
a *:after {
    -webkit-box-sizing: content-box !important;
    -moz-box-sizing: content-box !important;
    box-sizing: content-box !important;
} 
```

根据您的需要定制它。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-06-25T06:59:38.380

像这样覆盖：

```
* {
box-sizing: border-box!important;
} 
```

# c# - c# threading：通过threading.timer创建一个comcomponent并从不同的threadingTimer实例中处理相同的组件

> ID：12863837
> 
> 赞同：0
> 
> 时间：2012-10-12T17:01:21.267
> 
> 标签：c#, .net, com-interop

我有一个 c# 应用程序，它在触发 Threading.Timer 事件时创建并启动一个 directshow 图。一段时间后，一个不同的 Timer 实例尝试通过 Marshal.ReleaseComObject(theGraph) 停止和处理图形。

这会导致线程问题，Visual Studio 告诉我，我尝试从创建它的线程之外的不同线程处理 com 对象（在本例中为图表），从而导致数据损坏的风险。

我如何回到原来的线程来停止和处理图表？

我对线程知之甚少，我一直忽略这个问题，但我现在有一些时间来了解有关线程的更多信息以及我应该如何正确使用它。

任何指针最受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:20:33.927

我在这里找到了我的问题的解决方案：http: [//www.codeproject.com/Articles/12082/A-DelegateQueue-Class](http://www.codeproject.com/Articles/12082/A-DelegateQueue-Class)

# r - 将字符转换为日期时间

> ID：12863841
> 
> 赞同：6
> 
> 时间：2012-10-12T17:01:31.423
> 
> 标签：r

在 data.frame 中，我有一个日期时间戳，格式如下：

```
head(x$time)
[1] "Thu Oct 11 22:18:02 2012" "Thu Oct 11 22:50:15 2012" "Thu Oct 11 22:54:17 2012"
[4] "Thu Oct 11 22:43:13 2012" "Thu Oct 11 22:41:18 2012" "Thu Oct 11 22:15:19 2012" 
```

每次我尝试使用`as.Date`、**lubridate**或**zoo**转换它时，我都会得到`NA`s 或 Errors。

将这个时间转换为可读形式的方法是什么？

我试过了：

```
 Time<-strptime(x$time,format="&m/%d/%Y  %H:$M")
    x$minute<-parse_date_time(x$time)
    x$minute<-mdy(x$time)
    x$minute<-as.Date(x$time,"%m/%d/%Y %H:%M:%S")
    x$minute<-as.time(x$time)
    x$minute<-as.POSIXct(x$time,format="%H:%M")
    x$minute<-minute(x$time) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T17:07:14.813

你真正想要的是`strptime()`。尝试类似：

```
strptime(x$time, "%a %b %d %H:%M:%S %Y") 
```

作为您可以做的有趣事情的一个例子，请`strptime()`考虑以下内容：

```
thedate <- "I came to your house at 11:45 on January 21, 2012."
strptime(thedate, "I came to your house at %H:%M on %B %d, %Y.")
# [1] "2012-01-21 11:45:00" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T23:29:37.373

另一种选择是使用`lubridate::parse_date_time()`：

```
library(lubridate)
parse_date_time(x$time, "%a %b %d %H:%M:%S %Y") 
```

或者更简单地说：

```
parse_date_time(x$time, "abdHMSY") 
```

从文档：

> 它在两个方面与 base::strptime() 不同。首先，它允许指定格式出现的顺序，而无需包含分隔符和 % 前缀。这样的格式化参数被称为“顺序”。其次，它允许用户指定几种格式顺序来处理异构日期时间字符表示。

文档包含 lubridate 识别的所有格式（“abdHMSY”等）。

# php - JavaScript图像调整大小缓慢

> ID：12863845
> 
> 赞同：1
> 
> 时间：2012-10-12T17:01:46.080
> 
> 标签：php, javascript, html, image, resize

我正在处理的一个网站有很多从数据库中提取的图像。图像的尺寸不一致，我试图将它们显示在统一大小的框（div）中。我不知道任何图像的尺寸，但我可以通过以下方式检索它们：

```
document.getElementById( myImage ).width
document.getElementById( myImage ).height 
```

在此之后，我进行测试以查看如何调整图像大小以适合统一框。最后我设置了效果：

```
document.getElementById( myImage ).width = theNewWidth
document.getElementById( myImage ).height = theNewHeight 
```

`onload="resizingFunction( imgId );"`通过在 img 标签中使用，每个图像只调用一次此函数。数据库中的每个图像完成此功能大约需要 1-2 秒，并且该功能永远不会再为任何这些图像运行。尽管从未再次运行，但如果我使用此功能，该站点的运行速度会明显变慢。谷歌搜索后，我尝试添加：

```
document.getElementById( myImage ).removeAttribute("width")
document.getElementById( myImage ).removeAttribute("height") 
```

在设置新的宽度和高度之前。这确实提高了速度，但它仍然比我没有调整图像大小时要慢。同样，为了澄清起见，每张图片在加载后都会调整一次大小，但由于某种原因，这仍然会减慢网站的速度。

图像是通过 PHP 回显到 JavaScript 中创建的。这是必要的，因为它们需要来自数据库 (PHP) 的信息，而 JavaScript 将它们放置在正确的框 (div) 中。这是图像代码的创建：

```
echo "\t\t\tdocument.getElementById('gBox".$i."').innerHTML = '<img onload=\"image_applyToGrid(".$i.");\" id=\"img".$i."\" style=\"left:0; top:0;\" src=\"'+gBoxes[".$i."].imgPath+'\"/>';\n"; 
```

这是图像在加载后调用的图像大小调整函数：

```
function image_applyToGrid(inId) {
inIdImage = document.getElementById("img"+inId);
var imgW = inIdImage.width;
var imgH = inIdImage.height;
if (imgW > imgH) {
    var proportions = imgW/imgH;
    imgH = gridUnit;
    imgW = gridUnit*proportions;
    inIdImage.style.left = -((imgW-gridUnit)>>1)+"px";
}
else {
    var proportions = imgH/imgW;
    imgW = gridUnit;
    imgH = gridUnit*proportions;
    inIdImage.style.top = -((imgH-gridUnit)>>1)+"px";
}
inIdImage.removeAttribute("width");
inIdImage.removeAttribute("height");
inIdImage.width = imgW;
inIdImage.height = imgH;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:08:51.230

使用 Javascript 调整图像大小通常不是一种理想的方法。您正在消耗所有带宽来通过网络发送完整尺寸的图像，然后将它们缩小。更好的方法是从图像存储中提取图像并在服务器端调整它们的大小。然后将结果存储在服务器端缓存中，以便您可以为所有客户端请求提供优化的图像。这里不需要过多考虑缓存的概念，在这种情况下，它可以像目录或数据库中的新列一样简单。（FWIW，我不喜欢将二进制数据存储在数据库中，但这可能是另一个讨论）

见： http: [//www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:04:26.680

图片可能太大了。我建议准备图像以供网络使用。谷歌“优化网络图像”以获取有关如何执行此操作的一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:06:24.130

拍摄全尺寸图像并以不同尺寸加载整个图像是不好的做法。考虑生成缩略图并将其放置在页面上。

如果您有一个 2500x2500 的图像，而您只是将高度和宽度设置为 500x500，则仍然需要加载整个 2500x2500 的图像。

# ruby-on-rails - Rails 3.2 范围内的路由错误

> ID：12863848
> 
> 赞同：0
> 
> 时间：2012-10-12T17:02:03.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

这个问题花了我一整天...

好;

我只是想将我所有的管理页面放在 /admin 目录中，并仅通过 domain/admin 样式接收它们。我试图让它与[本](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing%20this)指南一起运行。

根据该官方指南，我正在寻找的是`scope`在我的`routes.rb`文件中使用。因为，我在我的页面中使用了多次命名路由音调。我不希望我的`program_path`命名路线改变`admin_program_path`，因为我有 28 种不同的用法。

所以我应该使用`scope`而不是`namespace`.

问题是：我无法`scope`使用我的项目。

这是我的路线.rb

```
 scope "/admin" do

  get "access/login"
  get "access/index"

  match "access/login_attempt", to: "access#login_attempt"
  match "access/logout", to: "access#logout"

  resources :admin_users

  root to: 'programs#index'

  resources :programs
  resources :program_categories
  resources :program_subcategories

  resources :articles
  resources :pictures

  match '/kategoriler/:id' => 'program_categories#show'
  match '/kategoriler' => 'program_categories#index'
  match '/kategori/yeni' => 'program_categories#new'
  match 'program/yeni' => 'programs#new'
  match 'programlar' => 'programs#index'
  match '/progam_categories/select_category/:program_id' => 'program_categories#select_category'
  match '/program_subcategories/select_subcategory' => 'program_subcategories#select_subcategory'
  match '/program_subcategory/add_subcategory' => 'program_subcategories#add_subcategory'

  end 
```

这是我的控制器开始：

```
class ProgramsController < ApplicationController 
```

就像这里所说的：

```
If you want to route /admin/posts to PostsController (without the Admin:: module prefix), you could use
scope "/admin" do
  resources :posts, :comments
end 
```

结果，我得到了什么？

此错误消息：

```
Routing Error

uninitialized constant ProgramsController 
```

无论我尝试访问哪个控制器，错误都会以这种方式发生变化。例如`uninitialized constant ProgramCategoriesController`，`uninitialized constant ProgramSubcategoriesController`等等...

我试图将`application_controller`两者都放在管理文件夹和控制器目录的根目录中......没办法。

我的错误在哪里？:(

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:27:04.713

尝试使用`:module`参数：

```
scope '/admin', :module => 'admin' do
  # ...
end 
```

假设您的控制器位于`Admin`模块命名空间中，因此它们以“Admin::”开头。

**[编辑]**

这是对您在下面有关路径冲突的评论中的问题的回应。您可以使用`:as`参数，例如：

```
scope '/admin', :module => 'admin', :as => 'admin' do
  # ...
end 
```

你可以用`rake routes`. admin 范围内的所有路由现在都应该以 'admin_' 开头

# mysql - MySQL自动增量没有条目

> ID：12863850
> 
> 赞同：0
> 
> 时间：2012-10-12T17:02:13.303
> 
> 标签：mysql

我有一个数据库，其中有一个 Auto_Increment 主键 ID 以及一个名为 MUID 的字段。MUID 将 6Byte Hex-ids 存储在 varchar 中，并被标记为唯一。

当我使用以前不存在的 MUID 进行新条目时，一切都很好。另一方面，如果我不小心尝试注册相同的 MUID 两次，它不会创建一个新条目（这就是我想要的），但它仍然会增加自动 ID！

知道如何解决这个问题吗？

# .net - Web 服务命名空间

> ID：12863855
> 
> 赞同：1
> 
> 时间：2012-10-12T17:02:50.800
> 
> 标签：.net, vb.net, web-services, soap

我的网络服务命名空间有问题。它在我的计算机上运行良好，但是当我将其上传到团队基础服务器时，它对其他人不起作用。

我在网络服务中的代码（位于其自己的应用程序的“Sentry.SAID”命名空间中：

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel
Imports Sentry.SAID.Core
Imports Sentry.SAID.Web

<System.Web.Services.WebService(Namespace:="http://localhost")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class Powerbeatws
    Inherits System.Web.Services.WebService 
```

“Sentry.SAID”命名空间中“Sentry.SAID.Web”应用程序中的 XML 文件

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="PowerbeatwsSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
         receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
         bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="11000000" maxBufferPoolSize="524288"
         maxReceivedMessageSize="11000000"
         messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
         useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
           maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
             realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:62862/Powerbeatws.asmx" binding="basicHttpBinding"
       bindingConfiguration="PowerbeatwsSoap" contract="PowerbeatSR.PowerbeatwsSoap"
       name="PowerbeatwsSoap" />
    </client>
  </system.serviceModel> 
```

如果我将端点地址更改为 localhost/Powerbeatws.asmx，则会引发错误。有什么想法可以让我使用 localhost 在单独的计算机上工作吗？

目前，要使其在任何其他计算机上工作，必须添加新的服务参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:44:30.090

对于 Web 服务，我们必须记住涉及 2 个实体，托管的服务和使用它的客户端。

如果两者都在其绑定中使用 localhost，则它们必须假定相同的端口号，或者从 TFS 下载您的代码的人必须将端点绑定从 localhost:62862 更改为服务在其机器上运行的任何端口。

您也可以通过 Web 服务上的配置或通过每个人都使用众所周知的端口（例如 51000）的代码来创建特定的托管地址。将端点绑定更改为 localhost:51000 并确保服务主机正在侦听端口 51000 和它应该可以正常工作。

我认为问题在于团队没有在其本地主机上使用相同的端口号，因此绑定不起作用。它可以在您的机器上运行，因为您将服务托管在端口 62862 上。

虽然可能是错的。不确定他们看到了什么异常，但这在共享 Web 服务代码时并不少见。

# javascript - JavaScript - 字符串与整数键

> ID：12863861
> 
> 赞同：3
> 
> 时间：2012-10-12T17:03:14.670
> 
> 标签：javascript, performance, benchmarking

我正在运行 jQuery 的性能基准测试（不要问），并发现了一些有趣的东西。由于某种原因，`this[0] = element`与`this.foo = element`. 这是强制性的[jsPerf 案例](http://jsperf.com/string-integer-property)。

任何人都可以解释为什么会有这样的性能影响吗？除了明显的“使用字符串键”之外，还有什么方法可以提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:20:04.313

`[0]`必须发现不兼容，转换为字符串 ( ) `"0"`，然后用作字符串查找`["0"]`。

我不知道它可以 100% 地解释正在发生的事情，但无论如何，这是普遍的部分。
其余大部分将是引擎盖下的优化，基于每个引擎。

这也不是数组，也不是数组查找。
它只是对象上的括号符号。

# php - Wordpress 侧边栏显示在查看页面源中，但不是实时页面...有时

> ID：12863866
> 
> 赞同：1
> 
> 时间：2012-10-12T17:03:37.633
> 
> 标签：php

我正在重新设计我们的网站，但没走多远就遇到了障碍。我在 PHP 中创建了四个动态侧边栏，并在索引中将它们全部调用。当我加载索引时，只显示了三个。有些人是四个，有些人是三个。无论哪种方式，当您查看页面源时都会显示第四个侧边栏，但不会在实时站点上显示。

我已经多次清除缓存，包括使用和不使用 WP Super Cache。

这是网站：[http ://dev.greyinkstudios.com](http://dev.greyinkstudios.com)

和 functions.php 调用：

```
 // Register widgetized areas
add_action( 'init', 'theme_widgets_init' );
function theme_widgets_init() {
    // Area 1
    register_sidebar( array (
    'name' => 'Find Us',
    'id' => 'findus',
    'before_widget' => '<div id="%1$s" class="widget-container %2$s">',
    'after_widget' => "</div>",
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
  ) );

    // Area 2
    register_sidebar( array (
    'name' => 'Conventions',
    'id' => 'cons',
    'before_widget' => '<div id="%1$s" class="widget-container %2$s">',
    'after_widget' => "</div>",
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
  ) );

    //Area 3
    register_sidebar( array (
    'name' => 'Support WoBG',
    'id' => 'support',
    'before_widget' => '<div id="%1$s" class="widget-container %2$s">',
    'after_widget' => "</div>",
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
  ) );

     //Area 4
    register_sidebar( array (
    'name' => 'Advertisement',
    'id' => 'ads',
    'before_widget' => '<div id="%1$s" class="widget-container %2$s">',
    'after_widget' => "</div>",
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
  ) );
  } // end theme_widgets_init 
```

以及我在索引中调用它的代码（最初我使用 ID 来调用它们，但由于某种原因，这仅导致前两个侧边栏显示。所以我切换到名称。）：

```
 <!-- #content -->

 <?php // get_sidebar(); ?> 
    <div id="sidebar-findus" class="sidebar">

        <?php dynamic_sidebar( 'Find Us' ); ?>

    </div>
<div id="sidebar-cons" class="sidebar">

    <?php dynamic_sidebar( 'Conventions' ); ?>

</div>

<div id="sidebar-support" class="sidebar">

    <?php dynamic_sidebar( 'Support WoBG' ); ?>

</div>

<div id="sidebar-ads" class="sidebar">

    <?php dynamic_sidebar( 'Advertisement' ); ?>

</div> 
```

我通过 W3 验证器运行它，它抛出的唯一异常是 Comic Easel 插件，它们是未解析的 & 符号。但是当我深入研究代码时，它们实际上`&amp;`并非如此。

不管怎样，我禁用了插件，它仍然做了同样的事情。所以我很茫然！

提前致谢！

# android - 以编程方式在 LinearLayout 中插入自定义视图，拉伸它并使其成为正方形

> ID：12863871
> 
> 赞同：2
> 
> 时间：2012-10-12T17:04:01.813
> 
> 标签：android, android-view, pie-chart

我有一个`LinearLayout`（持有人），它有`match_parent`宽度和高度。在这个支架中，我插入了一个`View`（扩展的类`View`）。我`onCreate`在 Activity 的方法中执行此操作。

我的问题是，如何让这个孩子在`View`水平和垂直方向上最大程度地伸展，保持正方形，从父 LinearLayout 中填充尽可能多的区域？

这是我现在用作起点的内容：

```
 pieContainer = (LinearLayout) findViewById(R.id.pie_container_id);
    pie = new PieView(this);
    pieContainer.addView(pie); 
```

我尝试过在两侧（主要活动和`PieView`类）覆盖 onMeasure 方法，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:24:42.317

试试这个自定义 SquareView

```
public class SquareView extends View {
  public SquareView(Context context) {
    super(context);
  }

  public SquareView(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  public SquareView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }

  public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int size = Math.min(getMeasuredWidth(), getMeasuredHeight());
    setMeasuredDimension(size, size);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:17:51.367

我想你可以得到整个屏幕的宽度

```
DisplayMetrics display = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics( display );
int screenW = display.widthPixels; 
```

并设置to的宽度和`View`to`fill_parent`的高度`View``screenW`

也许是这样的：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, screenW); // (width, height)
yourView.setLayoutParams(params); 
```

或者我可能完全误解了你的问题。这里很晚了，我累了:) 对不起，如果是这样的话。

让我知道它是否有效:)

# excel - 如何对超过 1500 行的范围进行排序？

> ID：12863876
> 
> 赞同：0
> 
> 时间：2012-10-12T17:04:16.080
> 
> 标签：excel, vba

```
Public r1 As Range, rOb As Range, rDat As Range
Set r1 = Range(db.Range("B3"), db.Range("I" & Rows.Count).End(xlUp)) ' about 1500 rows
Set rOb = Range(db.Range("B3"), db.Range("B" & Rows.Count).End(xlUp))
Set rDat = Range(db.Range("G3"), db.Range("G" & Rows.Count).End(xlUp))

r1.Sort Key1:=rOb
'Or
r1.Sort Key1:=rDat 
```

只有大约 900 行被排序。其余的都不是。
有时，排序根本不起作用。
也试过：

```
r1.Sort Key1:=Range(db.Range("G3"), db.Range("G" & Rows.Count).End(xlUp)) 
```

同样的结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:23:34.517

确保您的范围选择最后一行。如果第一列底部有空白单元格，则您的范围不完整。

尝试使用

```
Set r1 = db.Range("B3").currentregion 
```

或者

```
r1 = Range(db.Range("B3"), db.Range("I" & db.cells(Rows.Count,"B").End(xlUp).row) 
```

您将“B”设置为数据中没有空格的列

# jquery - Fancybox 的无限滚动回调

> ID：12863877
> 
> 赞同：0
> 
> 时间：2012-10-12T17:04:17.350
> 
> 标签：jquery, wordpress, fancybox, jquery-isotope, infinite-scroll

我在我的网站上同时使用 Infinite Scroll 和 Fancybox 时遇到问题。在最初加载的图像上一切正常......然后一旦通过无限滚动拉出新内容，新图像就不再用 Fancybox 打开......到目前为止，原来的 Fancybox 调用从未“看到”新元素。

所以我需要把 Fancybox 通过 Infinite Scroll 回调。或者至少这是我在这里和谷歌上阅读后提出的。

但是，我的代码现在确实将 Fancybox 应用于新加载的图像，但 Fancybox 覆盖显示错误：无法加载请求的内容。请稍后再试。

似乎无法弄清楚问题是什么，非常感谢您的帮助！

[www.deborre.net#portfolio](http://www.deborre.net#portfolio)

哦，是的，我还应该提到我也在使用同位素，一切都在 Wordpress 上运行。我还发现了这个：[在 Infinite-Scroll 旁边使用 EasyFancybox Wordpress 插件，](https://stackoverflow.com/questions/8491383/using-easyfancybox-wordpress-plugin-alongside-infinite-scroll)但还没有设法让它正确地为我工作......

到目前为止我想出了什么：

```
 // ISOTOPE
    $(window).load(function(){
        var $container = $('#portfolio-centre-wrap')
        // initialize Isotope
        $container.isotope({
          // options...
          resizable: false, // disable normal resizing
          // set columnWidth to a percentage of container width
            itemSelector : '.portfolio-item',
          masonry: { columnWidth: $container.width() / 3 }
        });
        $container.infinitescroll({
            navSelector  : '#pagination',    // selector for the paged navigation 
            nextSelector : '#pagination .next a',  // selector for the NEXT link (to page 2)
            itemSelector : '.portfolio-item',     // selector for all items you'll retrieve
            loading: {
                finishedMsg: 'Sorry, that is it for now...',
                img: 'http://dev.deborre.net/wp-content/themes/deborre2012v2/_img/loading.gif',
                msgText: ''
              }
            },
            // call Isotope as a callback
            function(newElements) {
              var $newElems = $(newElements);
              $newElems.imagesLoaded(function(){
                $container.isotope('appended', $newElems );
                //fancybox
                var thumbnails = jQuery("a:has(img)").not(".nolightbox").filter( function() { return /\.(jpe?g|png|gif|bmp)$/i.test(jQuery(this).attr('href')) });
                thumbnails.addClass("fancybox").attr("rel","fancybox").getTitle();
                $(newElements).fancybox({
                        'cyclic': true,
                        'autoScale': true,
                        'padding': 10,
                        'opacity': true,
                        'speedIn': 500,
                        'speedOut': 500,
                        'changeSpeed': 300,
                        'overlayShow': true,
                        'overlayOpacity': "0.8",
                        'overlayColor': "#585858",
                        'titleShow': false,
                        'titlePosition': 'inside',
                        'enableEscapeButton': true,
                        'showCloseButton': true,
                        'showNavArrows': true,
                        'hideOnOverlayClick': true,
                        'hideOnContentClick': true,
                        'width': 560,
                        'height': 340,
                        'transitionIn': "fade",
                        'transitionOut': "fade",
                        'centerOnScroll': true
                 });    
              });
            }      
        ); 
```

//回答：

它似乎在变化：

```
$(newElements).fancybox({ 
```

到：

```
$(.fancybox).fancybox({ 
```

为我解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:03:23.687

您正在使用 fancybox v1.3.4 并且该版本不支持动态添加的元素（无限滚动将这些元素动态添加到 DOM）......因此请查看[https://stackoverflow.com/a/9084293/1055987](https://stackoverflow.com/a/9084293/1055987)以获取解决方法。

# java - Jtable - 使用可变高度行滚动到底部

> ID：12863880
> 
> 赞同：0
> 
> 时间：2012-10-12T17:04:25.713
> 
> 标签：java, swing, scroll, jtable, jscrollpane

我正在尝试自动滚动到具有可变行高并定期刷新的 JTable 的底部（在 scrollPane 内）。是否有一个我可以覆盖的监听器，或者一个我可以监听的事件，这将在表格被重绘并在底部使用新行之后发生？

我通过覆盖列的渲染器来实现可变高度，以在列中的文本长于在列宽的一行中显示时重置行高。

```
private void adjustRowHeight( )
{
    if ( _table == null )
    {
        return;
    }

    int cWidth = _table.getTableHeader().getColumnModel().getColumn(_column).getWidth();
    _textComponent.setSize( new Dimension( cWidth - 2*HORIZONTAL_GAP, MAX_HEIGHT ) );
    int prefH = _textComponent.getPreferredSize().height;

    boolean isTooBig = prefH > MAX_HEIGHT;

    if (isTooBig)
    {
        prefH = MAX_HEIGHT;
    }

    _table.setRowHeight(_row, prefH + 2 );
} 
```

我的`scrollToBottom`代码，如下。

在我使行可变高度之前，它引用了行数而不是 MAX_VALUE，但是引用有效的行索引使用默认行高来计算行的位置，而不是可变行高。

```
 _table.scrollRectToVisible( _table.getCellRect( Integer.MAX_VALUE, 0, true ) ); 
```

使用 Integer.MAX_VALUE 会覆盖默认计算以使用**表格的**高度作为矩形的 y 值。我认为正在发生的是，即使新行已添加到表中，在重绘表（并重置高度）之前也会调用此代码。是否有一个事件我可以听以了解何时重置桌子上的高度，然后我可以滚动到底部？还是我在这里缺少其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:12:44.270

有两种方法，

*   搬家`JScrollBar`

*   移动`JViewport`，

我也更喜欢这种方式，然后可以使用`Point`它及其坐标进行管理，[例如](https://stackoverflow.com/a/7052751/714968)

> 是否有一个我可以覆盖的监听器，或者一个我可以监听的事件，这将在表格被重绘并在底部使用新行之后发生？
> 
> 是否有一个事件我可以听以了解何时重置桌子上的高度，然后我可以滚动到底部？

```
private void addTableListener() {
    model.addTableModelListener(new TableModelListener() {

        @Override
        public void tableChanged(TableModelEvent tme) {
            if (table.getRowCount() > 0) {
                if (tme.getType() == TableModelEvent.INSERT) {

                } else if (tme.getType() == TableModelEvent.DELETE) {

                } else if (tme.getType() == TableModelEvent.UPDATE) {

                }
            }
        }
    });
} 
```

一切都取决于 od `ListSelectionModel`,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:35:36.110

> 是否有一个我可以覆盖的监听器，或者一个我可以监听的事件，这将在表格被重绘并在底部使用新行之后发生？
> 
> 是否有一个事件我可以听以了解何时重置桌子上的高度，然后我可以滚动到底部？

是的。在 JTable 的父类中找到，`Component#addComponentListener( ComponentListener )`我可以在其中覆盖该`componentResized`方法。

# javascript - 如何检查 Div 是否为空然后执行操作

> ID：12863884
> 
> 赞同：1
> 
> 时间：2012-10-12T17:04:49.310
> 
> 标签：javascript, html, redirect, contains

我正在使用 HTML5、CSS 和**Javascript构建个人助理**

这就是我*当前的*问题。

我有一个`<div>`包含脚本，其中包含询问问题时的响应以及问题是否匹配它写入该响应的脚本。

我需要一个脚本来检查这个 div 是否为空，在**Javascript**中，而不是**jQuery**

我需要检查 div 是否为空，因为这意味着没有响应。

然后让它重定向到错误页面。

一个问题和对它的响应如下所示：

```
 <script type="text/javascript">
{
var q = getValue("q");
var name = getValue("name");
}
if (q == 'Whats+up') {
document.write("Not much " + name + ".");
}
else {

}
</script> 
```

这是我尝试的最后一个代码：

```
 <script>

    var theDiv = document.getElementById("responce");
    var q = getValue("q");
    if(theDiv.innerHTML == ''){
    window.location = 'error.html?name=Brandon&q='+q;
    }
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:35:39.837

尝试这个

```
<script type="text/javascript">
{
var q = getValue("q");
var name = getValue("name");
}
if (q == 'Whats+up') {
document.write("<div id='response_text'>"+"Not much " + name + "."+"</div>");
}
else {

}
</script> 
```

接着：

```
<script>

var theDiv = document.getElementById("response_text");
var q = getValue("q");
if(theDiv==null || theDiv.innerHTML == ''){
window.location = 'error.html?name=Brandon&q='+q;
}
</script> 
```

话虽如此，使用 ajax 可能有更好/更具可扩展性的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:41:18.340

`script`您可以检查，如果在s 中没有其他元素`div`：

```
<script>
    var theDiv = document.getElementById('responce'),
        q = getValue('q'),
        scripts = theDiv.getElementsByTagName('SCRIPT').length;
    if (theDiv.children.length - scripts === 0) {
        window.location = 'error.html?name=Brandon&q=' + q;
    }
</script> 
```

但是，我建议您摆脱所有内联脚本，并将它们放在文档中或结束标记`head`之前。`body`

**编辑**

快速解决方法是`script`将`#responce`.

# node.js - 使用 node.js 时是否有很好的 V8 命令行参数参考

> ID：12863887
> 
> 赞同：18
> 
> 时间：2012-10-12T17:05:00.097
> 
> 标签：node.js, command-line-arguments, v8

对于 Node.js 可用的各种命令行选项，我似乎找不到很好的参考。我对那些控制 V8 内存使用的人特别感兴趣。例如--max_new_space_size、--max_old_space_size 等。

我在哪里可以找到这些是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T17:37:41.583

如果您使用参数 --v8-options 启动 node，您将获得 node 的所有 v8 相关选项的列表。不确定是否有任何特定的 DOC 概述了所有这些选项（虽然肯定会很高兴）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-10T18:27:59.890

2年，没有明确的答案。我使用 v8 源代码作为参考：

[github.com/v8/v8/blob/master/src/flags/flag-definitions.h](https://github.com/v8/v8/blob/master/src/flags/flag-definitions.h)

这些也应该通过 chrome 在 chrome 中工作`--js-flags`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-06T17:21:10.867

有一个有点过时的 Node.js v8 标志列表，位于

[https://github.com/thlorenz/v8-flags/blob/master/flags-0.11.md](https://github.com/thlorenz/v8-flags/blob/master/flags-0.11.md)

这是一个社区驱动的列表，提供了有关选项功能、度量单位和默认值的一些详细信息。

# android - 仅从传感器获取 1 个事件

> ID：12863888
> 
> 赞同：0
> 
> 时间：2012-10-12T17:05:16.320
> 
> 标签：android, sensors, android-sensors

我试图从方向传感器只获得 1 个事件。

我的代码是：

```
@Override
public void onSensorChanged(SensorEvent event) {
Log(event);
unregisterSensor(...);
} 
```

然后每 1000 毫秒在一个线程中执行一次：

```
registerSensor();
Thread.sleep(2000); 
```

问题是，如果我在方法结束后取消注册传感器（就像我已经完成的那样），那么下一次（当我重新注册传感器时）它将记录之前捕获的相同值事件（移动手机时） . 如果我让 onSensorChanged 能够运行两次（使用计数器），那么它会检测到正确的值并将该值记录两次。

只调用一次的方法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:13:03.127

根据您的代码，在`onSensorChanged()`您记录 a`myevent`中，而不是`event`作为参数得到的。

此外，那 - 你为什么不告诉`LocationManager`你每 1 或 2 秒只向你发送新事件，而不是注册和取消注册的所有麻烦？您可以使用方法的`minTime`参数来执行此操作`LocationManager#requestLocationUpdates()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:21:02.460

我不知道传感器正在跟踪事件，但我也不感到惊讶，因为我在 Locationlistener for network provider 中看到了类似的行为。

话虽如此，我建议您让`onSensorChanged()`调用几次，删除第一个（即缓存）并平均（或使用低通滤波器）以下几个。您将获得更好的准确性，并且更多的事件不会结束您的电池:-)

祝你好运。

# c++ - 提升单元测试不会失败

> ID：12863889
> 
> 赞同：0
> 
> 时间：2012-10-12T17:05:30.550
> 
> 标签：c++, unit-testing, boost

我正在学习 boost 单元测试，我很高兴地发现它可以检测内存泄漏，所以我正在测试它。我创建了以下可怕的方法：

```
int ForTest::Compare(const ForTest item)
{
    ForTest* existing_item = this;
    char* x=new char[1024];
    m_name = std::string(x);
    if (existing_item->m_count * existing_item->m_price == item.m_count * item.m_price) return 0;
    if (existing_item->m_count * existing_item->m_price > item.m_count * item.m_price) return 1;    
    return -1;
}
BOOST_AUTO_TEST_CASE( a_test_case)
{
    BOOST_TEST_CHECKPOINT("weird...");

    ForTest alpha("Pen", 4, 4.3);
    ForTest beta;

    BOOST_CHECK_EQUAL(alpha.Compare(beta), 1);  
} 
```

我显然在这里创建了 2 个内存泄漏。为什么测试人员不关心？我的测试以优异的成绩通过。

我不想修改实际代码，正如我在这里看到的：http: [//www.boost.org/doc/libs/1_35_0/libs/test/example/exec_mon_example.cpp](http://www.boost.org/doc/libs/1_35_0/libs/test/example/exec_mon_example.cpp)

为什么我没有收到错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:39:57.193

我不确定提升，但要让 Visual Studio 的调试堆管理器工作，你必须写这样的东西：

```
#include <crtdbg.h>

#ifdef _DEBUG
static char THIS_FILE[] = __FILE__;
#define new new( _NORMAL_BLOCK, THIS_FILE, __LINE__ )
#endif

int main()
{
    _CrtSetDbgFlag( _CRTDBG_LEAK_CHECK_DF | _CrtSetDbgFlag( _CRTDBG_REPORT_FLAG ) );
    new int(2036427631); // deliberate leak
} 
```

因为它泄露了 DEBUG 版本的输出，所以看起来像这样：

```
Detected memory leaks!
Dumping objects ->
d:\fun\try\try.cpp(11) : {66} normal block at 0x00345C40, 4 bytes long.
 Data: <okay> 6F 6B 61 79 
Object dump complete.
The program '[3216] try.exe: Native' has exited with code 0 (0x0). 
```

可能 boost 使用相同的东西来检测内存泄漏。

RELEASE 版本不检测内存泄漏，因为 Visual Studio 的“调试堆管理器”在 RELEASE 版本中不起作用。您认为为什么他们将其命名为“调试堆管理器”？

# android - Android：解析未知 JSON 标签

> ID：12863892
> 
> 赞同：1
> 
> 时间：2012-10-12T17:05:46.770
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

在搜索了很多没有结果之后，我终于决定在这里问这个问题。

这是此 Facebook 博客文章的摘录：[https ://developers.facebook.com/blog/post/592/](https://developers.facebook.com/blog/post/592/)

```
{
 . . .
      "story": "Dhiren Patel likes Marmot.",
      "story_tags": {
        "19": [
          {
            "id": 101961456910,
            "name": "Marmot",
            "offset": 19,
            "length": 6
          }
        ],
        "0": [
          {
            "id": 1207059,
            "name": "Dhiren Patel",
            "offset": 0,
            "length": 12
          }
        ]
      }, 
 . . .
} 
```

我使用的是上面链接的博客中的示例，但本质上，使用 FB Graph API 时的数据集是相同的。现在，我知道如何解析嵌套和所有内容`JSONObjects`。`JSONArrays`但我对这种数据一无所知。**示例中的19**和**0**由嵌套`offset`标签确定，并随帖子而变化。我如何解释未知的 JSON 标签和代码以获取其中的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T14:27:53.550

据我了解，您遇到的问题是您不知道如何获取密钥，这些密钥是根据帖子或其他内容动态生成的（例如在 json: **19, 0**中）。以下是您应该解析此 JSON 的方式：

```
JSONObject mStoryTags = mMainObj.getJSONObject("story_tags");
if(mStoryTags != null){
    Iterator<Object> keys = mStoryTags.keys();
    while(keys.hasNext()){
        String id = String.valueOf(keys.next()); // This value represent 19
        JSONArray mTag = mStoryTags.getJSONArray(id);
        if(mTag != null){
            for(int i = 0; i < mTag.length();i++){
                JSONObject mElem = mTag.getJSONObject(i);
                if(mElem != null){
                    int objectId = mElem.getInt("id"); // value: 101961456910
                    // and etc.
                }
            }
        }
    }
} 
```

希望这对遇到同样问题的人有所帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:37:10.843

如果您有一个代表上述“story_tags”范围的 JSONObject，您应该能够通过以下方式遍历各个标签：

```
for (String key : storyTagsJSON.keys()) {
    JSONObject tagJSON = storyTagsJSON.optJSONObject(key);
    ... 
```

# c# - MVC3实体框架中slickgrid的使用

> ID：12863893
> 
> 赞同：0
> 
> 时间：2012-10-12T17:05:48.403
> 
> 标签：c#, asp.net-mvc-3, entity-framework, slickgrid

我想在我的项目中使用 slickgrid 来轻松编辑时间表。我下载了它，发现文件夹和我访问过的网站上的文档非常模糊。他们没有显示有关如何从数据库中提取的代码。是否有人拥有或知道任何显示 slickgrid 实现的视图、模型和控制器的示例？代码项目中有一个示例，但它使用不在数据库中的数据，并且概念非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:24:01.803

我以前从未使用过 slickgrid，但基于示例页面[slickgrid 示例](https://github.com/mleibman/SlickGrid/blob/master/examples/example1-simple.html "光滑网格示例")，以下内容可能会帮助您朝着正确的方向前进：

```
//Controller
public JsonResult GetSlickGridData()
{
        var slickGridData = db.SlickGridData.ToList();
        return Json(slickGridData, JsonRequestBehavior.AllowGet);
}

//View
var data = [];
$.getJSON("/Index/GetSlickGridData", function (items) {
data = items;
});
grid = new Slick.Grid("#myGrid", data, columns, options); 
```

所以这里的想法是使用 jquery getJSON 方法来调用您的控制器并带回信息并将其存储在数据中。同样，我对 slickgrid 不太熟悉，因此您可能还必须将上面的“项目”转换为 javascript 数组，然后再将其分配给“数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:35:14.643

您是否查看过开发人员提供的电子表格示例？[http://mleibman.github.com/SlickGrid/examples/example-spreadsheet.html](http://mleibman.github.com/SlickGrid/examples/example-spreadsheet.html)

# vb.net - 始终在复选框控件中的文本旁边进行检查

> ID：12863894
> 
> 赞同：2
> 
> 时间：2012-10-12T17:05:53.620
> 
> 标签：vb.net, winforms, visual-studio, checkbox, alignment

我有一个奇怪的，看似简单的问题。我的表单上有大约 6 个复选框控件，需要正确对齐以获得最佳外观和吸引力。我的问题是，有没有办法通过代码或属性，让复选框控件上的复选框始终靠近文本的左侧，无论文本的长度是多少？

目前有对齐检查和文本的选项，但是随着文本不断地从长变短，如果复选框可以一直贴在文本旁边，那就太好了。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:46:42.633

尝试这个：

*   设置`AutoSize`为`True`（默认）
*   设置`RightToLeft`为`No`（默认）
*   设置`Anchor`为`Right`仅（非默认）

# asp.net - 根据客户端证书的存在限制对我的 ASP.NET 站点的访问

> ID：12863895
> 
> 赞同：1
> 
> 时间：2012-10-12T17:05:54.487
> 
> 标签：asp.net, c#-4.0, iis, iis-7, x509

我有一个 ASP.NET 站点，我也想限制访问。我已经配置了服务器端证书，所以一切都很好，我可以很容易地向我想访问该站点的第三方颁发客户端证书。

我希望公共网站以下列方式运行：

*   用户提出请求

    *   如果用户有一个有效的证书，继续加载页面
    *   否则，要么什么都不做，要么返回一个 Forbidden 等。

所以，听起来很简单。我的问题是这样做的最佳实践方法是什么？应该在代码中检查客户端证书，还是在 IIS 服务器本身上执行此操作更安全？

任何意见是极大的赞赏。

谢谢

# class - 类中的 PHP 调用类返回错误：500

> ID：12863897
> 
> 赞同：2
> 
> 时间：2012-10-12T17:06:06.563
> 
> 标签：class, include, php

我很难在另一个班上新班。这是一个设置示例：

索引.php

```
<?php
   include("functions/userFunctions.php");

   $user = new UserFunctions ();
   $user->validate();
?> 
```

用户函数.php

```
<?php
   include("../db/userDB.php");

   class UserFunctions extends UserDB
   {
       public function GetHello(){
          $this->DBHello();
       }
   }
?> 
```

用户数据库.php

```
<?php
   class UserDB
   {
       public function DBHello(){
          return "Hello"
       }
   }
?> 
```

Chrome 返回：HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

这怎么行不通？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T17:07:42.193

将此添加到代码的顶部

```
error_reporting(E_ALL);
ini_set("display_errors","On"); 
```

正确的 PHP 错误将显示或在您的`PHP.ini settings`

# sql - SQL Server 2008：varchar 到 datetime 的转换失败

> ID：12863900
> 
> 赞同：0
> 
> 时间：2012-10-12T17:06:19.447
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我对以下代码有问题：

```
USE [PCIPNY];

insert into [dbo].[test_Drug_Medication_1]
(
       [MedicationID] ,[ClinicID] ,[PatientID] ,[MyDrugID] ,[NDC] ,[DoctorID] ,[DrugID] ,[DrugFullDesc] ,[Generic_Name]
      ,[Print_Name] ,[Manufacture] ,[Inactive_Date] ,[Strength] ,[Units] ,[Pkg_Size] ,[Pkg_Type] ,[Route] ,[Take]
      ,[Frequency] ,[Duration] ,[Qualifier] ,[Quantity] ,[Refill] ,[Note] ,[DAW] ,[CreateDate] ,[CreateBy]
      ,[ModifyBy],[IsControl] ,[UserDefine] ,[scheduleLevel] ,[BeginDate] ,[EndDate] ,[Active] ,[sente]
      ,[OnCologyCheckStatus] ,[OnCologyCheckStatus1] ,[OnCologyCheckStatus2] ,[SIG] ,[Printed] ,[ICDCode] ,[SendeFaxed] ,[DosageForm] ,[GPI]
      ,[IsBrand] ,[IsGeneric] ,[GenericAndBrand] ,[SigUnit] ,[IsDrug] ,[Status]
)

SELECT
      [MedicationID] ,[ClinicID] ,[PatientID] ,[MyDrugID] ,[NDC] ,[DoctorID] ,[DrugID] ,[DrugFullDesc] ,[Generic_Name]
      ,[Print_Name] ,[Manufacture] ,[Inactive_Date] ,[Strength] ,[Units] ,[Pkg_Size] ,[Pkg_Type] ,[Route] ,[Take]
      ,[Frequency] ,[Duration] ,[Qualifier] ,[Quantity] ,[Refill] ,[Note] ,[DAW] ,[CreateDate] ,[CreateBy]
      ,[ModifyBy] ,[IsControl] ,[UserDefine] ,[scheduleLevel] ,[BeginDate] ,[EndDate] ,[Active] ,[sente]
      ,[OnCologyCheckStatus] ,[OnCologyCheckStatus1] ,[OnCologyCheckStatus2] ,[SIG] ,[Printed] ,[ICDCode] ,[SendeFaxed] ,[DosageForm] ,[GPI]
      ,[IsBrand] ,[IsGeneric] ,[GenericAndBrand] ,[SigUnit] ,[IsDrug] ,[Status]

  FROM [ec14].[dbo].[Drug_Medication]
    where 1=1
      and clinicid in (select clinicid from [dbo].[clinic] where org_db = 'ec14' and ClinicID=1234); 
```

我收到了这个错误：

> > 消息 241，级别 16，状态 1，第 3 行
> > 从字符串转换日期和/或时间时转换失败。

我发现错误在列中`begindate`。

`begindate`ec04（原始位置）中的列是`charvar(16)`数据类型。PCIPNY(destination location) 中
的列是数据类型。`begindate``datetime`

有什么解决方案可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:14:22.933

In the SELECT clause from source, change

```
BeginDate 
```

To

```
CASE WHEN ISDATE(BeginDate) = 1 then CAST(BeginDate AS DATETIME) END 
```

It is a case of not setting the DMY/MDY format correct? You can try changing [SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx). Or are all the dates (in varchar) in a specific format that can actually be converted? If so you can use [CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx) with a format specifier.

```
CONVERT(datetime, BeginDate, 103) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:13:45.400

尝试投射您从 ec14 中选择的字段 ..

`, cast(begindate as datetime) ,`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:13:49.330

确保日期格式正确，或者列没有移动。当插入的列的顺序错误之前，我遇到过这个错误。尝试进入日期字段的数据可能不是日期和另一个字段。

# algorithm - 在不使用任何数据结构的情况下找到两组交集的算法

> ID：12863904
> 
> 赞同：2
> 
> 时间：2012-10-12T17:06:24.687
> 
> 标签：algorithm, sorting

我想知道在不使用任何外部数据结构（如哈希表）的情况下有效地确定两个相等元素（比如整数）数组的交集的算法（O（nlogn））？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T17:14:37.820

排序，然后使用迭代器对每个~~元素~~数组进行迭代：

```
if A[iter1] > B[iter2]: increase iter2
else if A[iter1] < B[iter2]: increase iter1
else: element is in intersection, print and increase both iters 
```

排序是`O(nlogn)`，迭代是`O(n)`，总`O(nlogn)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:24:57.587

*   对数组进行排序
*   遍历它们并存储匹配项

就像是...

```
var A = [0...N];
var B = [0...N];
var result = [];
Array.sort(A);
Array.Sort(B);
for(var x=0, y=0; x < N && y < N; x++) {
    while(A[x] < B[y] && y < N) {
        y++;
    }
    if(A[x] == B[y]) {
        result.push( B[y++] );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T10:52:40.370

**n 个集合的交集**

给定 n 组不同大小的整数。每个集合也可能包含重复项。如何找到所有集合的交集。如果一个元素在所有集合中多次出现，则应该在结果中多次添加它。

例如，考虑有三个集合 {1,2,2,3,4} {2,2,3,5,6} {1,3,2,2,6}。给定集合的交集应该是 {2,2,3}

以下是解决此问题的有效方法。

1.  对所有集合进行排序。
2.  取最小的集合，将所有元素及其频率插入到地图中。
3.  对于地图中的每个元素，请执行以下操作 .....a。如果该元素不存在于任何集合中，请忽略它……..b。查找每个集合中元素的频率（使用二分搜索）。如果它小于地图中的频率，则更新频率……..c。如果在所有集合中都找到该元素，则将其添加到结果中。

时间复杂度：假设有“n”个列表，列表的平均大小为“m”。排序阶段需要 O( n* m *log m) 时间（对 n 个平均长度为 m 的列表进行排序）。搜索阶段需要 O( m * n * log m) 时间。（对于列表中的每个元素，我们用 log m 时间搜索 n 个列表）。所以总的时间复杂度是O(n *m* log m)。

辅助空间：用于存储地图的 O(m) 空间。

# javascript - Rails 3 - 如何延迟解析 JavaScript

> ID：12863905
> 
> 赞同：2
> 
> 时间：2012-10-12T17:06:27.477
> 
> 标签：javascript, ruby-on-rails-3, deferred-execution

我正在尝试优化我的网站，我得到的建议之一是推迟解析 JavaScript。我已经用谷歌搜索了几个小时，但我还没有在 Rails 3 中找到一个优雅的解决方案。我使用的是标准

```
<%= javascript_include_tag :application -%> 
```

在我的代码中标记，就在 . 有人知道延迟加载 application.js 文件的所有 Javascript 的相对简单的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-19T01:49:00.347

我知道这是一个老问题，但如果有人仍在寻找解决方案：我解决了将问题移到`<%= javascript_include_tag 'application' %>`最后的问题。

```
 ....
  <%= stylesheet_link_tag 'application', :media => 'all' %>
</head>
<body>
  ...
</body>
  <%= javascript_include_tag 'application' %>
</html> 
```

我希望它可以帮助某人...

# asp.net - 继承 BasePage 类适用于某些页面，而不是所有页面

> ID：12863909
> 
> 赞同：0
> 
> 时间：2012-10-12T17:06:51.327
> 
> 标签：asp.net, vb.net, visual-studio-2010

我继承了一个 VB.Net 2.0 站点并正在 Visual Studio 2010 中构建项目。所有 aspx.vb 代码隐藏文件都继承了 App_Code 文件夹中存在的 BasePage。让我难过的是，有些类知道 BasePage 而其他类不知道，但我找不到模式。作为 VB.Net 的新手，我不知道从哪里开始寻找。

所有文件的继承语句如下所示：

```
Partial Class SomePage_Default
    Inherits BasePage 
```

代码在部署时有效，这个问题只是在我的开发环境中，限制我在本地运行它。

我可能会错过什么拒绝访问 App_Code\BasePage.vb

# arrays - 给定数字中所有可能的数字排列

> ID：12863911
> 
> 赞同：-1
> 
> 时间：2012-10-12T17:06:54.800
> 
> 标签：arrays, algorithm, database-design, loops, discrete-mathematics

用户应该输入他的号码有多少位，然后他应该输入他的号码。然后代码应该以所有可能的方式排列该数字，而不是递归。

例如，数字 123 可以按 6 种方式排列：

123 132 213 231 312 321

只是一个旁注，如果我问这个问题的方式有问题，或者如果需要更多信息，请告诉我。即使你不知道我的问题的答案。我真的需要回答这个问题，我想我开始为此发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:14:35.073

This is equivalent to generating all permutations.

```
For generating the next permutation after the current one(the first one is 123):
  1\. Find from right to left the first position pos where current[pos] < current[pos + 1]
  2\. Increment current[pos] to the next possible number(some numbers are maybe already used)
  3\. At the remaining positions(> pos) put the smallest possible numbers not used.
  4\. Go to 1. 
```

Here is a working code, printing all permutations:

```
import java.util.Arrays;
import java.util.HashSet;
import java.util.Scanner;
import java.util.Set;

public class Main {

    public static void main(String[] args) {
        final int n = 3;

        int[] current = new int[n];
        for (int i = 1; i <= n; i++) {
            current[i - 1] = i;
        }

        int total = 0;
        for (;;) {
            total++;

            boolean[] used = new boolean[n + 1];
            Arrays.fill(used, true);

            for (int i = 0; i < n; i++) {
                System.out.print(current[i] + " ");
            }

            System.out.println();

            used[current[n - 1]] = false;

            int pos = -1;
            for (int i = n - 2; i >= 0; i--) {              
                used[current[i]] = false;

                if (current[i] < current[i + 1]) {
                    pos = i;
                    break;
                }
            }

            if (pos == -1) {
                break;
            }               

            for (int i = current[pos] + 1; i <= n; i++) {
                if (!used[i]) {
                    current[pos] = i;
                    used[i] = true;
                    break;
                }
            }

            for (int i = 1; i <= n; i++) {
                if (!used[i]) {
                    current[++pos] = i;
                }
            }
        }

        System.out.println(total);
    }       
} 
```

P.S. I wrote the code just now in a couple of minutes. I don't claim that the code is clean or the variables are named good.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:00:46.267

稍微[搜索](https://www.google.com/#hl=en&sclient=psy-ab&q=permutation+algorithm)一下，你会发现一些算法，例如[Johnson-Trotter 算法](http://www.cut-the-knot.org/Curriculum/Combinatorics/JohnsonTrotter.shtml)，它可以用 5 行来描述：

```
用 <1 <2 ... <n 初始化第一个排列
虽然存在一个移动整数
  找到最大的移动整数 k
  交换 k 和它正在查看的相邻整数
  反转所有大于 k 的整数的方向

```

# ruby-on-rails - 使用自动过期密钥缓存俄罗斯娃娃片段 - 性能优缺点

> ID：12863915
> 
> 赞同：12
> 
> 时间：2012-10-12T17:07:27.330
> 
> 标签：ruby-on-rails, fragment-caching, 37-signals

该问题基于 2 篇文章：
-来自 37signals 的 DHH 的[Basecamp Next](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)
- Adam Hawkins[的 Rails 中的高级缓存](http://broadcastingadam.com/2012/07/advanced_caching_part_2-using_strategies/)

我对使用俄罗斯娃娃缓存的性能影响有点困惑，特别是：

1.  当使用自动过期键时，似乎每个请求都会导致访问数据库以获取对象时间戳 - 我错过了什么吗？（我知道在最好的情况下，您必须只为层次结构中的顶级键这样做，但仍然......）

2.  在第 1 篇文章中，他们缓存了一个待办事项列表以及每个待办事项。缓存列表非常有意义，因为它节省了大量工作（所有项目的数据库查询）。但是为什么要缓存单个项目呢？您已经在数据库中获取项目时间戳，那么您到底要保存什么？生成几行html？

3.  在第 2 篇文章中，Adam 像这样缓存视图的块： `cache [post, 'main-content']`... `cache [post, 'comments']` 添加评论时，它会更改帖子的时间戳，因此会使两个整体无效。然而，`main-content`并没有改变——你不想重新生成它！！！如何只使评论无效。（这实际上是一个非常常见的用户案例 - 一个具有一些逻辑独立部分的模型：对象本身、不同的关联、其他存储中的数据等）

对我来说，似乎俄罗斯娃娃缓存只有在嵌套对象的层次结构较深时才有意义。（在 basecamp 中，您有项目-> 待办事项列表-> 待办事项-> 项目列表）。但是，如果您的层次结构较浅，最好自己进行失效。

对于任何反馈，我们都表示感谢！
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T18:25:41.833

1.  顶层确实需要命中数据库。您可以通过将时间戳存储在单独的缓存条目中来避免这种情况，该条目由模型和 id 键入。文章 1 的一位评论者（Manuel F. Lara）提出了同样的建议：“是否有另一个像 projects/15-time 这样的缓存，你总是拥有项目列表的最后一个时间戳？”

2.  我认为您对嵌套中的“最低”级别是正确的。您可能需要进行一些测试以查看数据库访问与呈现微小部分的相对性能。

3.  另一个好点。根据rails docs，如果您将符号传递给`:touch`它将更新该属性，此外`updated_at`-也许还有一种方法可以跳过更改`Post#updated_at`并仅更新`comments_updated_at`. 然后您可以使用后者进行缓存。但是，如果您试图避免 DB 访问，则必须为此时间戳存储另一个缓存键（如上面的 #1 中所示）。

我想你必须决定这一切是否值得你麻烦。这两篇文章展示了简单、人为的例子来教授这些原则。在具有复杂关联的应用程序中，“分代”缓存方法可能更易于管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:31:25.667

1.  是的。但通常最好的情况和相当好的情况经常出现。
2.  是的。在我开发的一些应用程序中，渲染视图的时间是执行查询的 10-20 倍。看看你的基准。
3.  如果渲染帖子的成本很高，您可能不想触摸帖子，而是从`[@post.comments.max(:updated_at), @post.comments.size]`.

# php - php标头根本没有重定向

> ID：12863920
> 
> 赞同：1
> 
> 时间：2012-10-12T17:07:45.920
> 
> 标签：php, header

好的，所以我之前问过这个问题并得到了很多很好的答案，不幸的是他们都没有改变结果。我正在尝试在我正在处理的网站上的“登录”页面后重定向。我在会话中收集 id 并尝试重定向。这在我使用的许多站点中都可以正常工作，与此站点的一个区别是它不使用 localhost，它有一个服务器名称。起初我在标题前有一个 echpo，每个人都告诉我这是问题所在，我将其删除以修复它，但没有任何改变。这是代码：

```
<?php 
/*set all the variables*/ 
$email = $_POST['email']; 

$password = sha1($_POST['password']);   /* hash the password*/ 

$conn = mysqli_connect ('servername', 'username', 'password', 'databasename') or die('Error connecting to MySQL server'); 
/*select the id from the users table that match the conditions*/ 
$sql = "SELECT id FROM users WHERE email = '$email' AND password = '$password'"; 

$result = mysqli_query($conn, $sql) or die('Error querying database.'); 

$count = mysqli_num_rows($result); 

if ($count == 1) { 

$row = mysqli_fetch_array($result); 

session_start(); 

$_SESSION['user_id'] = $row['id']; 

/*If true head over to the users table*/ 
header('location: users_table.php'); 

} 
/*If invalid prompt them to adjust the previous entry*/ 
else { 
echo '<h2>Invalid Login</h2><br />'; 
echo '<h2>Click <a href="javascript:history.go(-1)">HERE</a> to go back and adjust your entry.</h2>'; 
                    } 

mysqli_close($conn); 

?> 
```

页面上唯一的其他代码是 HTML HEAD 和 BODY 标记。我什至向我的一位老大学老师寻求帮助，他说代码看起来不错，但他找不到问题。所以我又问了。有没有办法可以使用 HTML 或 SCRIPT 重定向并留在会话中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:15:12.553

检查这些问题

你已经发送了标题吗？如果是，那么这就是使它无法运行的原因。之前检查 php 错误或空行

```
exit; 
```

在标头功能之后

```
header('Location: users_table.php'); 
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:09:18.743

[14.30 地点](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

> Location response-header 字段用于将接收者重定向到 Request-URI 以外的位置，以完成请求或识别新资源。对于 201（已创建）响应，位置是请求创建的新资源的位置。对于 3xx 响应，位置应该指示服务器的首选 URI，用于自动重定向到资源。字段值由单个绝对 URI 组成。

尝试使用绝对 URI

```
header("Location: http://www.xxx.com/users_table.php"); 
```

如果出现错误，您还可以在页面顶部添加以下内容

```
error_reporting(E_ALL);
ini_set("display_errors","On"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:21:28.613

有几件事可能会出错：

首先，您说您在此页面上有其他 html。如果您的重定向遵循 html，这将导致错误。例如：

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

```
<html>
<?php
/* This will give an error. Note the output
 * above, which is before the header() call */
header('Location: http://www.example.com/');
?> 
```

其次，您可能正在冲突会话。将您的会话替换为：

```
if( !isset( $_SESSION ) ){
  session_start();
} 
```

第三，您需要在重定向中将 Location 大写：

```
/*If true head over to the users table*/ 
header('location: users_table.php'); 
```

应该

```
/*If true head over to the users table*/ 
header('Location: /users_table.php'); 
```

最后但同样重要的是，打开错误报告！在任何 html 之前的脚本的最顶部，将此代码放入：

```
ini_set( 'display_errors', 1 );
error_reporting( E_ALL ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:00:18.247

如果我是你，我会做以下事情：

**1) 查找错误：**设置`error_reporting(E_ALL);`在页面顶部以确保您能看到所有内容。您还可以查看 php 错误日志以调查是否可以在那里看到任何错误。日志文件的位置取决于您的机器设置和配置。

**2）删除一切：**删除或注释所有其他不必要的代码，只需使用`header`和`die`功能，看看它们是否正常工作。

```
<?php 

header("Location: http://www.google.com/"); 
die(); 

?> 
```

如果有效，则继续执行第 3 步，否则转到最后一步。

**3）检查代码是否执行：**只需注释`header`函数，然后`echo 'ok';`在此之前只写一行。如果您在渲染页面上**没有**看到它`ok`，那么您的代码根本没有执行。继续执行第 4 步，否则，如果您看到`ok`，则转到最后一步。

**4）看可疑的地方：**试着评论你的`SQL Query`部分，把你的`if`陈述从`if ($count == 1) {`改为`if (true) {`。如果您的页面被重定向，那么您在从`MySQL`表中获取数据时会出错。如果`header`没有再次工作，则转到最后一步。

**5）最后一步：在其他机器上测试：**我会在其他机器上测试相同的代码，包括其他开发环境和/或不同的托管服务器。如果它在其他具有不同配置的机器上工作，那么**问题就是你的机器！**

尝试安装新服务器并重新开始，看看是否存在问题。但是，如果您的问题即使在其他机器上仍未解决，请尝试将您的源代码更改`Encoding`为`UTF-8 without BOM`. 它可以在最后一刻起作用！

如果以上任何一个步骤都不适合您，只需将其留在那儿，去买一些啤酒，尝试在电视上看一些烹饪节目，写几条短信并打 1-2 个电话，当您至少过了 2 个小时，然后回到这里从第 1 步重新开始。相信你最终会解决的！永不放弃！:)

**更新：**经典错误！...检查你没有任何`new line`或`white space`之前你的 PHP 开始标记`<?php`。在做任何其他事情之前先检查一下！:)

（顺便说一句，我在问题解决后添加了更新，我从接受的答案中获取）

# ruby-on-rails - Salesforce：可以使用 REST API 中的“describeLayout”功能吗？

> ID：12863922
> 
> 赞同：0
> 
> 时间：2012-10-12T17:07:50.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, salesforce, databasedotcom-gem

我知道`describeLayout`可以从 SOAP API 访问，但是否也可以从 REST API 访问它？我对使用[databasedotcom](https://github.com/heroku/databasedotcom) Ruby gem 访问这个函数特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:15:57.747

不，rest API 目前没有与 SOAP API 中的 describeLayout 调用等效的功能。

# php - 如何在页面加载时预加载由 Javascript 编写的 HTML？

> ID：12863923
> 
> 赞同：0
> 
> 时间：2012-10-12T17:08:01.340
> 
> 标签：php, javascript, jquery, html

所以这就是我想要实现的目标。我的网页中目前有一个 FeedBurner 脚本。我使用`<script>`提要的标签，当页面加载时，脚本会生成提要 HTML。我想要做的是让所有与提要相关联的 HTML 预加载然后淡入。我尝试将脚本放在外部文件中并进行 Ajax 调用，但实际上并没有等到所有内容都完成加载.

我目前正在使用 jQuery。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:11:58.823

将该代码放入`window load`函数中，而不是 DOM Ready

```
$(window).load(function() {
      // Make ajax request here and check if that helps
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:55:26.110

像 Sushanth 所说的那样在 window.load 上使用 ajax 调用，并在其上附加 display:none，然后将其淡入。

```
$(window).load(function() {
      $content = $.get();
      $content.css('display', 'none').appendTo('#my_element').fadeIn()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:34:02.747

你可以在你的身体部位使用这样的 JS 函数。

```
<body onload="func()"> 
```

# ruby-on-rails - Rails：将文件设置为 file_field

> ID：12863924
> 
> 赞同：3
> 
> 时间：2012-10-12T17:08:13.993
> 
> 标签：ruby-on-rails, ruby, forms, file-upload, filefield

具有以下形式：

```
= form_for company, html: { multipart: true } do |form|
    = form.label :logo, 'Upload Image'
    = form.file_field :logo 
```

我想将 file_field 值设置为另一个用户上传的图像（具有`ActionDispatch::Http::UploadedFile`类对象）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-31T12:02:17.943

由于安全原因，您不能设置文件字段及其值。

例如，您是否希望互联网上的网站能够自动设置`C:/some_secret_folder/password.txt`文件字段的值并通过 JS 提交表单？

# sip - 将 Skype 连接到 Asterisk

> ID：12863926
> 
> 赞同：7
> 
> 时间：2012-10-12T17:08:16.567
> 
> 标签：sip, asterisk, skype

我有一个 Asterisk PBX 正在开发中，如果可能的话，我想链接到一个 Skype 帐户。这个想法是人们会调用一个特定的 Skype 用户名，然后被重定向到我的 SIP，然后通过它到 Asterisk。这是可行的吗？我环顾四周，看到了 Skype for Asterisk 驱动程序，但当然已经停产了。还有其他选择吗？我宁愿不必通过常规的 PSTN 电话网络，而是通过 SIP 直接从 Skype 到 Asterisk。如果您对如何配置我的 sip.conf 以使其正常工作有任何提示，我们也将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T18:43:12.143

[Skype 通过称为Skype Connect](http://www.skype.com/intl/en-us/business/skype-connect/)的服务为其网络提供标准的 SIP 中继接口。除了出站 PTSN 拨号外，还支持来自 Skype 用户的入站呼叫和可选的 PSTN 在线号码。

以下是关于如何配置 Asterisk（sip.conf 和 extensions.conf）以通过 SIP 通道连接到 Skype Connect 中继的指南：[http ://www.remsys.com/blog/skype-connect-to-asterisk](http://www.remsys.com/blog/skype-connect-to-asterisk)

有了 SIP 中继产品，我怀疑 Skype 是否会再次支持 PBX 的本地 Skype 协议驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:15:01.837

[http://sites.psu.edu/psuvoip/2011/12/09/skype-for-asterisk-using-freeswitch-for-hackers/](http://sites.psu.edu/psuvoip/2011/12/09/skype-for-asterisk-using-freeswitch-for-hackers/)

这里向您展示如何使用[FreeSwitch](https://freeswitch.org/) + [mod_skypeopen](https://freeswitch.org/confluence/display/FREESWITCH/mod_skypopen)作为 Asterisk 的 Skype 网关

这很复杂，但我认为这是目前获得您想要的东西的唯一可行方法。

# sql - SQL 分组错误 - “不是 GROUP BY 表达式”

> ID：12863928
> 
> 赞同：4
> 
> 时间：2012-10-12T17:08:19.750
> 
> 标签：sql, oracle

我的 SQL 查询似乎有问题，这让我发疯。我似乎无法让小组工作。我不断收到以下错误：

```
00979\. 00000 -  "not a GROUP BY expression" 
```

**我的查询：**

```
SELECT customers.customer_first_name, customers.customer_last_name, orders.customer_numb, books.author_name, books.title
FROM customers
LEFT OUTER JOIN orders ON (orders.customer_numb = customers.customer_numb)
LEFT OUTER JOIN order_lines ON (order_lines.order_numb = orders.order_numb)
LEFT OUTER JOIN books ON (books.isbn = order_lines.isbn)
WHERE (customers.customer_numb = 6)
GROUP BY (books.title) 
```

数据库架构：

**顾客：**

![在此处输入图像描述](../Images/465cb6bd2e1996181dfc70de22b55064.png)

**订单行和订单：**

![在此处输入图像描述](../Images/372cc2a17e7538ef0dd563d04e32c641.png)

**我想要实现的目标：** 我正在尝试按书名分组，这样它就不会显示重复的标题。

如果我遗漏了什么，我深表歉意，谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T17:11:01.347

你不明白什么？您的 select 语句包含许多不在`group by`子句中的列。试试这个：

```
SELECT customers.customer_first_name, customers.customer_last_name, orders.customer_numb, books.author_name, books.title 
FROM customers 
LEFT OUTER JOIN orders ON (orders.customer_numb = customers.customer_numb) 
LEFT OUTER JOIN order_lines ON (order_lines.order_numb = orders.order_numb) 
LEFT OUTER JOIN books ON (books.isbn = order_lines.isbn) 
WHERE (customers.customer_numb = 6) 
GROUP BY customers.customer_first_name, customers.customer_last_name, orders.customer_numb, books.author_name, books.title 
```

由于您没有汇总任何内容，因此您可以省略`group by`, 并仅`distinct`在`select`子句中使用：

```
select distinct  customers.customer_first_name, customers.customer_last_name, orders.customer_numb, books.author_name, books.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:11:55.560

```
SELECT DISTINCT customers.customer_first_name, customers.customer_last_name, orders.customer_numb, books.author_name, books.title
FROM customers
LEFT OUTER JOIN orders ON (orders.customer_numb = customers.customer_numb)
LEFT OUTER JOIN order_lines ON (order_lines.order_numb = orders.order_numb)
LEFT OUTER JOIN books ON (books.isbn = order_lines.isbn)
WHERE (customers.customer_numb = 6) 
```

改用 DISTINCT 也许？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:22:18.813

听起来您想要的是客户列表和他们购买的不同书籍。我会像这样重写查询，它应该做你想要的：

```
select c.customer_first_name ,
       c.customer_last_name  ,
       c.customer_numb       ,
       b.author_name         ,
       b.title               
from customers c
left join ( select distinct
                   o.customer_numb ,
                   ol.isbn         
            from      orders      o
            left join order_lines ol on ol.order_number = orders.order_numb
          ) cb on cb.customer_numb = c.customer_numb
join books b on b.isbn = cb.isbn
where c.customer_numb = 6 
```

如果您想计算他们购买了每个标题的数量，请将 from 子句中的派生表（也称为内联视图或虚拟表）更改为使用，`group by`而不是`select distinct`将适当的聚合函数添加到结果集中。

这是您的原始查询向南的地方：结果集中的每一列都必须是

*   `group by`子句中的列或表达式，
*   字面意思，或...
*   聚合函数

虽然这里有一些例外（例如，您可以拥有一个仅依赖于分组列和聚合函数的表达式），虽然 SQL 标准假定允许其他列，但大多数实现都不允许。

考虑这样的查询，您在客户和订单之间有一对多的关系，其中单个订单可能被运送到一个地址或另一个地址。

```
select c.customer_id , o.shipping_address , orders = count(*)
from customer c
join order    o on o.customer_id
group by c.customer_id 
```

`o.shipping_address`在这种情况下的语义是什么？您已按客户 ID 对订单进行分组，并将整个组折叠成一行。`customer_id`很容易，因为这是分组标准：根据定义，整个组共享相同的值。`count(*)`也很容易，因为它只是组中的行数。

但是，“shipping_address”是一个问题：该组可能有多个送货地址值，但聚合组只能返回一个值。第一的？最后的？别的东西？

SQL Server 曾经有一个非常不标准的实现，允许这种奇怪的东西。在这种情况下，它所做的基本上是将组聚合到单行中，然后将跨组中所有行的每一行聚合的数据连接起来。不完全是直观的行为。

# javascript - YUI 测试模拟 - 我可以用 3 个不同的值验证一个方法被称为 3x 吗？

> ID：12863935
> 
> 赞同：1
> 
> 时间：2012-10-12T17:08:46.907
> 
> 标签：javascript, unit-testing, mocking, yui

我正在使用最新版本的 YUI Test 来测试我的项目。

我有一种情况，我用 Foo 方法创建了一个 Mock。我希望 Foo 将被调用三次。第一次，它的值是“A”，第二次，它的值是“B”，第三次，它的值是“C”。第三次调用它时，它应该返回 true。

这是我想写的一个例子，但这似乎不起作用，只有最后一个条件得到验证。

```
var mock = Y.Mock();
Y.Mock.expect(mock, { method: "foo", args: ["A"] });
Y.Mock.expect(mock, { method: "foo", args: ["B"] });
Y.Mock.expect(mock, { method: "foo", args: ["C"], returns: true }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:15:29.107

查看源代码，似乎代码存储了一个键控方法名称的映射，因此每个方法名称只能有一个期望。您可能应该提交增强请求，因为您的用例很常见。

# visual-studio - 根据需要进行标记和组装以分发

> ID：12863941
> 
> 赞同：0
> 
> 时间：2012-10-12T17:09:18.890
> 
> 标签：visual-studio, msbuild

我正在开发一个自定义框架程序集，其中包含我的一个客户的业务逻辑。从 WinForms 到 ASP.Net 等，几乎任何地方都引用了这个程序集。

几周前，我决定添加（在 PostSharp 和 IPWorks 之后）Newtonsoft.Json 以获得一些类的序列化输出。奇迹般有效。

我现在面临的问题是我无法将 Newtonsoft.Json 程序集自动复制到引用该框架的项目中。在框架的编译过程中，PostSharp 和 IPWorks 都被正确复制到使用框架的任何应用程序的 bin 文件夹中（作为参考），但是 Newtonsoft.Json 程序集......我找不到将其复制过来的方法。

我知道这一定很简单，但我还没有找到实现它的方法。我搜索过 hi 和 low （我知道如何“谷歌它！”）但想出了 zilch（VS2012 项目文件格式、MSBuild 文档等）。

详细说明：

我的框架.dll

*   nsoftware.IPWorks.dll
*   PostSharp.dll
*   牛顿软件.Json

编译时...没问题

我的应用程序.exe

*   我的框架.dll
*   *   nsoftware.IPWorks（自动包含）
*   *   PostSharp（自动包含）
*   *   Newtonsoft.Json（一直丢失）

显然，这导致我忘记了我必须手动复制 dll。

我需要一种方法来以某种方式告诉 MyFramework.dll，它不仅伴随着 IPWorks 和 PostSharp，而且伴随着 Newtonsoft.Json，而无需手动将其添加到 MyApplication.exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:10:35.473

在参考属性上，您是否将本地复制设置为 true？

# meteor - 与流星服务器断开连接

> ID：12863942
> 
> 赞同：1
> 
> 时间：2012-10-12T17:09:22.533
> 
> 标签：meteor

每小时几次，所有用户（大约 100 个）都与流星服务器断开连接。他们无法重新连接。状态标志保持为假。然后我有义务在流星服务器上再次部署应用程序以使其可用。我在日志中没有看到任何异常。关于这个问题的原因的任何想法？

# macos - 如何使用 pkgbuild 为 $HOME 指定默认安装位置？

> ID：12863944
> 
> 赞同：8
> 
> 时间：2012-10-12T17:09:36.103
> 
> 标签：macos, installation, pkgbuild

我正在将我们的安装程序从 PackageMaker 移植到 pkgbuild 并尝试将默认安装位置设置为当前用户的主目录，并且仍然允许用户在系统范围内安装。

在我的分发文件中，我有 enable_currentUserHome="true" 和 enable_localSystem="true" 正确地允许用户“为这台计算机的所有用户安装”或“仅为我安装”。但是，我希望默认选择“仅为我安装”。

pkgbuild 有一个用于“--install-location”的命令行选项，手册页说它指定了默认位置，但没有提到如何指定主目录。我试过“~”和“$HOME”但没有运气。有什么我不知道的宏吗？

有谁知道如何告诉 pkgbuild 默认安装在当前用户的主目录下？

提前致谢！

-欧文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:52:54.007

pkgbuild 为您生成组件包。尽管可以单独安装组件包，但它通常被合并到产品存档中。在产品存档中，您可以设置安装域，如 localSystem 和 home。

例如`pkgbuild --install-location /Application`，如果选择本地系统域，将按预期将其安装到 /Application 中，如果选择家庭安装，则安装到 $HOME/Application 中。

也就是说，我**强烈反对**使用安装程序进行**主文件夹**安装。它只是在现实世界中不起作用。

请参阅我`Known Issues and Workarounds`在[制作 OS X 安装程序包](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re)以及[安装程序问题和解决方案](http://simx.me/technonova/tips/packagemaker_and_installer.html)中的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T10:06:29.747

一种解决方法是像这样设置分发文件参数：

```
enable_localSystem="false" 
enable_anywhere="true" 
enable_currentUserHome="true" 
```

默认情况下将选择家庭安装，因为它是启用的首选。

用户仍然可以通过选择`Install on a specific disk...`->在系统范围内安装它`Macintosh HD`。缺点：对用户来说比直接选择要容易：`Install for all users of this computer`.

# r - 保留符合特定条件的数据框行 - 扩展

> ID：12863945
> 
> 赞同：1
> 
> 时间：2012-10-12T17:09:41.337
> 
> 标签：r, dataframe

我很快问了以下问题：

[保留符合特定条件的数据框行](https://stackoverflow.com/questions/12861596/keep-rows-of-data-frame-that-match-certain-criteria)

我想知道是否可以扩展提供的代码，例如，只给我那些 b 列中的数字至少出现在 4 个字母 A、B、C 和 D 中的 X 中的行？因此，例如，数字 5 出现在 B、C、D 的 a 列中，但不在 A 中。但是，我想返回数字出现在 4 个字母中的至少 2 个中的所有行。这意味着，数字 5 当然应该加上所有字母中出现的所有数字。希望我想说的很清楚。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:29:36.273

我发现我的解决方案很容易扩展：

```
keep <- apply( x, 1,
          function( y ) length( which( LETTERS[1:4] %in% x[ x[,2] == y[2], 1 ] ) ) >= 3 ) 
```

# jquery - 将数据传递给 on()

> ID：12863948
> 
> 赞同：2
> 
> 时间：2012-10-12T17:10:15.810
> 
> 标签：jquery

```
var i = 1;

$('select').on("change", i, function () {
    alert(i);
}); 
```

这没有做任何事情，我不确定为什么......

```
var i = 1;

$('select').change(function (i) {
    alert(i);
}); 
```

这是返回 [object Object]

无论如何，我希望能够将 int 传递给 change 方法，并且看不到我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:15:39.800

The parameter in the function in the event is not one you pass, it's the [event object](http://api.jquery.com/category/event-object/), and it's passed by jQuery when the event is ran.

You can pass a value to [`.on`](http://api.jquery.com/on/), and its value will appear in [`event.data`](http://api.jquery.com/event.data/).

Example:

```
var i = 1;

$('select').on("change", i, function (e) {
    alert(e.data);  // e.data will be the variable passed to .on
}); 
```

Or since you are declaring `i` outside the function, you can just use it inside.

```
var i = 1;

$('select').on("change", function (e) {
    alert(i);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:11:57.513

下面的代码应该可以工作，因为`i`它是一个全局变量

```
var i = 1;

$('select').on("change", function() {
    alert(i);
}); 
```

或者，如果您想将`i`数据作为数据传递给事件，那么这也可以：

```
var i = 1;
$('select').on("change", {i: i}, function(e) {
    alert(e.data.i);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:21:09.877

> 这是返回 [object Object]
> 
> ```
> $('select').change(function (i) {
>     alert(i);
> }); 
> ```

这不是将变量传递`i`给您的事件处理程序，而是使用具有**name的第一个参数****定义**您的处理程序。触发事件时，将调用处理程序并将当前**事件对象**作为第一个参数传递，即引用该[事件对象](http://api.jquery.com/category/event-object/)[*^([docs])*](http://api.jquery.com/category/event-object/)。 **`i`**`i`[](http://api.jquery.com/category/event-object/)****

 ****您只能在**调用**函数时将参数传递给您，而不是在**定义**它们时。

* * *

> 这没有做任何事情，我不确定为什么......
> 
> ```
> $('select').on("change", i, function () {
>    alert(i);
> }); 
> ```

您传递给的第二个参数`.on`应该是一个包含选择器的字符串，它允许事件委托，或者~~包含的对象~~您要在事件处理程序中提供的数据。但是，此数据不会直接传递给事件处理程序，它可以通过事件对象的`.data`属性访问（见下文）。

* * *

话虽如此，您有两种可能性：

1.  使用您的处理程序作为闭包，就像[Omar 在他的 answer 中显示的那样](https://stackoverflow.com/a/12863975/218196)。但请注意，无论何时`i`更改并执行事件处理程序，它的当前值都是`i`.

2.  如果您想“传递” 的快照`i`，即它在定义事件处理程序时所具有的值，则可以如前所述传递一个数据对象`.on`，您可以通过处理程序中的事件对象访问该数据对象：

    ```
    $('select').on("change", {value: i}, function(event) {
        alert(event.data.value);
    }); 
    ```

    有关详细信息，请参阅[`event.data` *^([文档])*](http://api.jquery.com/event.data/)。

* * *

我强烈建议阅读[`.on` *^([docs])*](http://api.jquery.com/on/)文档。它包含大量关于它和 jQuery 中的事件处理如何工作的信息。您似乎还没有完全理解函数的工作原理，在这种情况下，您应该查看 MDN JavaScript 指南中[关于函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions)的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:35:33.953

这可能会有所帮助：

1）当你这样做时

```
$('select').on('change',i,function(ev){...}); 
```

然后值 i 将分配给 ev.data。所以在你的处理程序中，你可以这样做：

```
$('select').on('change',i,function(ev){
     alert(ev.data)
}); 
```

2）为了更好地理解为什么第二个不能像你预期的那样工作，因为在 JS 中，你可能想了解作用域在 JS 中是如何工作的。

但总结是，您在警报中访问的变量 i 是事件处理程序范围内的局部变量。

```
function(i){ alert(i) },// here i is the event object . 
```

只需将变量名称更改为 x 即可。

```
var i = 1;

$('select').change(function (x) {
    alert(i);
}); 
```****

# java - Java GUI 通过组合框改变颜色，使用集合和对象数组

> ID：12863949
> 
> 赞同：0
> 
> 时间：2012-10-12T17:10:16.000
> 
> 标签：java, swing, generics, collections, jcombobox

这是一项任务，很多事情（比如扩展 JFrame）都是愚蠢的做事方式，但我必须这样做。

我正在创建一个程序，该程序将“colours.txt”作为输入，其中包含格式中的 20 种颜色

```
white FFFFFF
yellow FFFF00 
```

将创建一个具有颜色组合框和退出按钮的 GUI 窗口。组合框填充了颜色的单词表示，当单击它们时，GUI 窗口的背景将更改为该颜色，使用十六进制值更改颜色，而不是颜色名称。我必须使用一个集合来完成这个。我正在重新阅读所有这些材料，但我真的迷失了一些领域。使用以下代码，我可以创建一个窗口并填充组合框，如果我愿意，我可以将颜色名称打印到控制台，但我认为可以工作的代码不起作用。这是一个范围问题，我不知道如何设置它以便我可以编写该行

```
frame.setBackground(Color.decode(jcbColour.getSelectedItem().hex)); 
```

或类似的东西。

```
package cmis242fp;

import java.awt.*;
import java.awt.event.*;
import java.io.File;
import java.util.*;
import javax.swing.*;

public class Cmis242fp extends JFrame {
    private JButton jbtExit = new JButton("Exit"); //action button
    private static JComboBox jcbColour = new JComboBox(); //drop down of colors

    public Cmis242fp() {
        JPanel myPanel = new JPanel(new BorderLayout());
        myPanel.add(new JLabel("Select a colour:"));
        myPanel.add(jcbColour, BorderLayout.CENTER);
        myPanel.add(jbtExit, BorderLayout.SOUTH);
        myPanel.setBorder(BorderFactory.createEmptyBorder(100, 100, 100, 100));
        myPanel.setMinimumSize(new Dimension(300,300));
        myPanel.setMaximumSize(new Dimension(700,700));

        jcbColour.setMaximumSize(new Dimension(30,30));
        jcbColour.setMaximumSize(new Dimension(60,60));
        add(myPanel);
        jcbColour.addActionListener(new ComboBoxListener());
        jbtExit.addActionListener(new ButtonListener());
    }

    private class ButtonListener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    }

    private class ComboBoxListener implements ActionListener {
        public void comboAction(Color color) {
            frame.setBackground(color);
        }
        public void actionPerformed(ActionEvent e) {

            //comboAction(Color.decode(jcbColour.getSelectedItem());

        }
    }

    public static class Colour implements Comparable<Colour> {
        private String name;
        private String hex;
        public Colour(String name, String hex) {
            this.name = name;
            this.hex = hex;
        }
        public String ntoString() {return name;}
        public String htoString() {return hex;}
        @Override
        public int compareTo(Colour colour) {
            return this.name.compareTo(colour.name);
        }
        public String toString(){
            return name;
        }
        public String toHex() {
            return hex;
        }
    }

    public static void loadColours(String fileName) {
        java.util.List<Colour> coloursList = new ArrayList<Colour>();

        Scanner inFile = null;
        try {
            inFile = new Scanner(new File(fileName));
            while (inFile.hasNext()) {
                coloursList.add(new Colour(inFile.next(), inFile.next()));
            }
        }
        catch (Exception other) {
            System.out.println(other);
        }
        finally {
            if (inFile != null) {
                inFile.close();
            }
        }

        for(int x = 0; x < coloursList.size(); x++) {
            jcbColour.addItem(coloursList.get(x));
        }
    }

    public static void main(String[] args) {

        String filename = "colours.txt";
        loadColours(filename);
        Cmis242fp frame = new Cmis242fp();
        frame.setSize(350,350);
        frame.setMinimumSize(new Dimension(300,300));
        frame.setMaximumSize(new Dimension(750,750));
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:33:28.437

尝试

```
JFrame.getContentPane().setBackground() 
```

此外，您不需要使组合框静态，您可以在框架的方法中加载颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:38:42.093

如果您设置框架的背景，您将看不到任何区别。最简单的方法（即无需更改大部分代码）是设置`myPanel`为类变量并将您的侦听器更改为：

```
private class ComboBoxListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        myPanel.setBackground(Color.decode(jcbColour.getSelectedItem().toString()));
    }
} 
```

现在，当您选择组合框的一个项目时，背景将相应更改，但请注意该`decode`方法适用于 form 中的字符串`#XXXXXX`，因此如果您想使用此技术，则必须仅将那种类型的字符串插入组合框（包括符号）。

# c# - DbConnection.EnlistTransaction 做什么？

> ID：12863950
> 
> 赞同：13
> 
> 时间：2012-10-12T17:10:18.623
> 
> 标签：c#, entity-framework, transactions

DbConnection.EnlistTransaction 做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-05-16T09:48:18.463

[`DbConnection.EnlistTransaction`](https://docs.microsoft.com/en-us/dotnet/api/system.data.common.dbconnection.enlisttransaction)允许：

*   将连接加入到[`System.Transactions.Transaction`](https://docs.microsoft.com/en-us/dotnet/api/system.transactions.transaction). 它有一些限制：
    *   如果连接已经参与“本地”事务 ( [`System.Data.Common.DbTransaction`](https://docs.microsoft.com/en-us/dotnet/api/system.data.common.dbtransaction))，它可能会因异常而失败。（这似乎取决于具体的连接实现：Firebird 2 在这种情况下不会抛出异常，[`SqlConnection`](https://docs.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection)并且可能大多数其他人都会抛出异常。）
    *   如果连接已经加入到另一个`System.Transactions.Transaction`，并且这个另一个事务仍然处于活动状态，它将失败并出现异常。
*   至少由 和 支持重复加入`SqlConnection`同一[`OleDbConnection`](https://docs.microsoft.com/en-us/dotnet/api/system.data.oledb.oledbconnection)事务[`OdbcConnection`](https://docs.microsoft.com/en-us/dotnet/api/system.data.odbc.odbcconnection)。
    其他[`DbConnection`](https://docs.microsoft.com/en-us/dotnet/api/system.data.common.dbconnection)实现可能不同。例如，[`HanaConnection`](https://help.sap.com/viewer/0eec0d68141541d1b07893a39944924e/2.0.02/en-US/d19390d16d6110149af29776dce510bc.html)（从 HANA 2 SP3 开始）在这种情况下会抛出异常，这对于在连接字符串中未禁用连接自动登记时总是显式登记的代码来说非常不方便。
    如果连接当前正在使用某些资源，例如被打开的数据读取器使用，其他提供者也可能无法在同一事务中重新登记。（这种情况看起来像是过早检查这些连接的内部实现，在意识到提供的事务已经加入之前完成。）
*   离开已登记连接的事务，前提是该事务不再处于活动状态。（否则，尝试使用连接可能会因异常而失败，至少使用`OdbcConnection`.）`null`为此提供事务。
    请注意，某些连接不支持此功能，例如[`SqlCeConnection`](https://docs.microsoft.com/en-us/previous-versions/sql/compact/sql-server-compact-4.0/1cty35hs(v=vs.100))，它会抛出一个`NullReferenceException`，和[`SQLiteConnection`](https://system.data.sqlite.org)（至少到 v1.0.105），它会抛出一个`ArgumentNullException`.
    如果您想将连接用于某些其他操作而不将其加入另一个事务中，则可能需要在完成后离开事务。一些连接似乎会自动离开交易，而另一些似乎不会。
    范围处置后的连接行为也可能会根据先前的事务是否已分发而改变。分发时，范围处置可以在所有参与者投票后立即结束（两个阶段的第一阶段提交），导致范围处置之后的代​​码同时执行到第二阶段，同时包含到自己的连接第二阶段. （[见这里](https://github.com/npgsql/npgsql/issues/1571#issuecomment-308651461)。）根据连接实现，明确要求离开事务可能会减轻麻烦。

`DbConnection.EnlistTransaction`通常与[`System.Transactions.Transaction.Current`](https://docs.microsoft.com/en-us/dotnet/api/system.transactions.transaction.current). 如果在 : 中获取（打开）连接，则不需要使用它[`TransactionScope`](https://docs.microsoft.com/en-us/dotnet/api/system.transactions.transactionscope)：在这种情况下，连接会自动将自己加入当前事务（除非其连接字符串另有说明`enlist=false`）。但是再一次，一些连接实现在这里也可能有所不同：一些默认情况下没有启用自动登记，并且具有完全不同的语义（如6.0 版本之前的[FbConnection](https://www.firebirdsql.org/en/net-examples-of-use/)），或者使用不同的连接字符串参数（如[`MySqlConnection`](https://dev.mysql.com/doc/dev/connector-net/6.10/html/T_MySql_Data_MySqlClient_MySqlConnection.htm)它使用`AutoEnlist`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T17:15:13.607

It allows you to coordinate transactions between multiple connections. A connection will automatically enlist in a transaction if you use TransactionScope. Otherwise you have to do the enlist with an existing transaction.

# c# - MVC 编辑器模板访问多条记录的公共数据

> ID：12863954
> 
> 赞同：0
> 
> 时间：2012-10-12T17:10:31.320
> 
> 标签：c#, asp.net-mvc-3, mvc-editor-templates

我想在我的对象的表中列出可编辑的行

```
class Widget
{
    string shape;
    string color;
} 
```

颜色将来自下拉列表，所以我有一个这样的视图模型

```
class WidgetListViewModel
{
    List<Widget> widgets;
    SelectList colorsSelectList;
} 
```

我有一个用于 Widget 的 EditorTemplate (WidgetEditorTemplate)。

以下是在视图中调用模板的方式：

```
for(int i=0; i< in WidgetListViewModel.widgets.Count; i++)
{
    EditorFor(WidgetListViewModel.widgets[i], "WidgetEditorTemplate");
} 
```

我的问题是，在 WidgetEditorTemplate 中，如何访问颜色选择列表？

我知道我可以将 colorsSelectList 添加到 Widget 模型（或新的视图模型），但是我必须为每个小部件记录加载 colorsSelectList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:16:23.863

首先，你不应该使用 for 循环。如果您在列表上使用 EditorFor，它应该自动为列表中的每个项目调用 Widget 编辑器。

除此之外，我知道这不是您想听到的，但我认为您的选择是将所选颜色添加到 Widget 视图模型。视图模型的想法是它应该包含渲染视图所需的所有数据。在这种情况下，您需要颜色信息来渲染视图，所以它应该放在视图模型中。

另一种选择是将 Widget 内容放在部分视图中，而不是编辑器模板中。首次加载页面时，使用服务器端 RenderPartial 将其包含在内。当颜色改变时，您可以执行 ajax 回调以使用新颜色重新渲染部分。这条路线给你一个可能太慢的回调，但它让你只需将所选颜色作为参数传递，而不必将其存储在任一模型上。

# php - SQL 注入保护 - 单引号

> ID：12863957
> 
> 赞同：6
> 
> 时间：2012-10-12T17:10:48.343
> 
> 标签：php, mysql, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我一直在做一些测试来保护我的网站免受 SQL 注入。我看到有几种方法可以做到这一点，转义我的用户输入，添加斜杠，或者更好的是使用参数化的 sql 语句。

我有这个测试代码..

```
$q=$_GET["q"];
$game = mysql_query("SELECT * FROM `Games` WHERE `id` = '$q'");
$game = mysql_fetch_array($game);

echo "<h4>ID: ".$game[0]."<br /></h4>name: " . $game[1]; 
```

我尝试了几个 SQLi 请求，但无法让我的测试页面出错，或者显示任何额外的数据。

但是当我将我的 sql 语句代码更改为此（删除了 $q 周围的单引号）..

```
$game = mysql_query("SELECT * FROM `Games` WHERE `id` = $q"); 
```

我可以执行简单的 SQLi 并获得一些结果。

那么将我的用户输入用单引号括起来就足够了吗？或者我是否看过更复杂的 SQLi 技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:18:45.843

您是在提到 SQL 注入和参数化语句，但似乎没有跨 PDO？- 使用 PDO [http://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:39:57.143

试试这个输入：

```
abc' OR id <> ' 
```

它将导致以下语句：

```
"SELECT * FROM `Games` WHERE `id` = 'abc' OR id <> ''" 
```

这将返回所有游戏，而不仅仅是一个。如果您的页面允许显示整个结果，那么我们肯定会看到太多......

出路是使用带有预准备语句的 PDO，至少是`mysqli_real_escape_string()`在将用户输入插入 SQL 语句之前的函数。

SQL 注入可以做更多的事情，在最坏的情况下，您甚至可以控制服务器。看看这个[SQL 注入备忘单](http://ferruh.mavituna.com/sql-injection-cheatsheet-oku/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:14:54.107

you should use `mysql_real_escape_string()` function

In this case you have to use the single quotes

```
 $game = mysql_query("SELECT * FROM `Games` WHERE `id` = '$q'"); 
```

let suppose user input is `1'` than the escape_string output will be `1\'`

if you are not using quotes than the query will be

```
SELECT * FROM `Games` WHERE `id` = 1'

//that is wrong or a injection 
```

But in the single quotes case

```
SELECT * FROM `Games` WHERE `id` = '1\'' 
```

that is good and can remove the `sql-injection`

# vba - 访问自定义组

> ID：12863959
> 
> 赞同：2
> 
> 时间：2012-10-12T17:10:54.027
> 
> 标签：vba, ms-access

我将 Access 2007 数据库配置为在导航窗格中使用“自定义”组。我以一种有意义的方式对我的所有表格进行了分组。但是，每当我更新链接表时，它都会丢失其分组。

我一直无法找到避免这种情况的方法。由于这似乎是不可避免的，我想简单地有一个宏，以编程方式将表添加回正确的组。我还没有找到任何关于如何做到这一点的例子。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-04-17T18:03:57.990

旧线程，我知道，但我只需要处理这个问题，并认为我会分享我的解决方案：一个将对象移动到组的函数。

```
Public Function SetNavPaneGroup(strObjName, strGroupName)
    Dim strSql, idObj, idGrp, db
    Set db = CurrentDb
    idObj = DLookup("Id", "MSysNavPaneObjectIDs", "Name='" & strObjName & "'")
    idGrp = DLookup("Id", "MSysNavPaneGroups", "Name='" & strGroupName & "'")

    If DCount("*", "MSysNavPaneGroupToObjects", "GroupID = " & idGrp & " AND ObjectID = " & idObj) > 0 Then
        strSql = "UPDATE MSysNavPaneGroupToObjects SET GroupID = " & idGrp & ", Name='" & strObjName & "' WHERE ObjectID = " & idObj
        db.Execute strSql, dbFailOnError
    Else
        strSql = "INSERT INTO MSysNavPaneGroupToObjects ( GroupID, ObjectID, Name ) " & vbCrLf & _
        "VALUES (" & idGrp & "," & idObj & ",'" & strObjName & "');"
        db.Execute strSql, dbFailOnError
    End If
    RefreshDatabaseWindow
    Set db = Nothing
End Function 
```

享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:58:45.863

您应该可以通过编辑系统表 MSysNavPaneGroupToObjects 来做到这一点。您需要来自 MSysNavPaneObjectIDs 的表 ID 和来自 MSysNavPaneGroups 的组 ID（右键单击导航窗格以访问“导航选项”并选中“显示系统对象”）。然后您可以使用如下查询来更改表的组。

```
UPDATE MSysNavPaneGroupToObjects SET GroupID = 9 WHERE ObjectID = 268 
```

因为您使用系统文件，所以在开始之前备份您的 .accdb 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T11:21:47.080

类似的问题，虽然 mjoshawa 的建议对我不太奏效，但我通过在 MsSystemNavPaneGroupToObjects 表中插入一个新行来让它工作。

```
INSERT INTO MSysNavPaneGroupToObjects ( GroupID, ObjectID, Name )
VALUES ( 55, 418, 'TableName' ) 
```

这在创建表后立即作为 UI 宏的一部分工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-30T11:58:04.597

`put_into_group(obj_name, group_name)`通过在 中追加/更新记录将对象移动到指定组`MSysNavPaneGroupToObjects`。

```
Function DLookupArr(Expr, Domain, Criteria)
' https://stackoverflow.com/questions/5864160
    Dim arr
    Set rs = CurrentDb.OpenRecordset("SELECT " & Expr & " FROM " & Domain & " WHERE " & Criteria)
    If rs.EOF Then
        DLookupArr = Array()
        Exit Function
    End If
    rs.MoveFirst
    Do While Not rs.EOF
        If IsEmpty(arr) Then ReDim arr(0) Else ReDim Preserve arr(UBound(arr) + 1)
        arr(UBound(arr)) = rs(Expr)
        rs.MoveNext
    Loop
    DLookupArr = arr
End Function

Function in_arr(v, arr) As Boolean
    For Each i In arr
        If i = v Then
            in_arr = True
            Exit Function
        End If
    Next i
End Function

Function get_object_group_id(obj_id) As Long
    obj_group_ids = DLookupArr("GroupID", "MSysNavPaneGroupToObjects", "ObjectID=" & obj_id) ' All object's groups
    groups_ids = DLookupArr("Id", "MSysNavPaneGroups", "GroupCategoryID=3") ' All groups IDs
    For Each i In obj_group_ids
        If in_arr(i, groups_ids) Then 'if it's a user-defined group then move from it to `group_name`
            get_object_group_id = i
            Exit For
        End If
    Next i
End Function

Function put_into_group(obj_name, group_name) As Boolean
    obj_id = DLookup("Id", "MSysObjects", "Name='" & obj_name & "'") ' Object-to-move ID
    If IsNull(obj_id) Then Exit Function
    obj_group_id = get_object_group_id(obj_id)
    group_id = DLookup("Id", "MSysNavPaneGroups", "Name='" & group_name & "' And GroupCategoryID=3") ' Target group ID
    If IsNull(group_id) Then Exit Function
    If obj_group_id = group_id Then ' already in group `group_name`
        put_into_group = True
        Exit Function
    End If
    If obj_group_id <> 0 Then ' if it's a user-defined group then move from it to `group_name`
        sql_s = "UPDATE MSysNavPaneGroupToObjects SET GroupID = " & group_id & _
                " WHERE ObjectID=" & obj_id & " And GroupID=" & obj_group_id
    Else ' if object was not in any user-defined groups then add new entry
        sql_s = "INSERT INTO MSysNavPaneGroupToObjects (GroupID, ObjectID, Name) " & _
                "VALUES (" & group_id & "," & obj_id & ",'" & obj_name & "')"
    End If
    CurrentDb.Execute sql_s, dbFailOnError
    RefreshDatabaseWindow
    put_into_group = True
End Function 
```

# c# - C#：使用内联对象实例化直接设置子类属性

> ID：12863960
> 
> 赞同：2
> 
> 时间：2012-10-12T17:10:58.497
> 
> 标签：c#, object, inline, instantiation

我意识到还有其他方法可以给这只猫剥皮，但我希望有人能帮助我理解为什么在 C# 中，当内联实例化“主”对象时，我不能直接设置子类属性。

例如，如果我有以下课程：

```
public class SubClass
{
  public string SubField { get; set; }
}

public class MainClass
{
  public string MainField { get; set; }
  public SubClass Sub { get; set; }

  public MainClass()
  {
    Sub = new SubClass();
  }
} 
```

如果我尝试以下操作，我会收到错误：

```
var main = new MainClass
{
  MainField = "Main Value",
  Sub.SubField = "Sub Value"
}; 
```

我在“Sub.SubField = ...”行得到的错误是：

```
* "Invalid initializer member declarator"
* "The name 'Sub' does not exist in the current context" 
```

当然，以下是有效的：

```
var main = new MainClass
{
  MainField = "Main Value",
  Sub = new SubClass { SubField = "Sub Value" }
}; 
```

但是，它更麻烦，而且在我看来，封装更少。

我很困惑为什么 C# 不能识别声明的对象和/或它如何知道它没有被实例化。在其他情况下就没有那么小心了。

我确定我错过了一个主要概念。有没有人来开导我？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:28:41.110

这将做你想要的：

```
var main = new MainClass { 
  MainField = "Main Value", 
  Sub = { SubField = "Sub Value" } 
}; 
```

上面的代码实际上被编译成以下几行：

```
var main = new MainClass(); 
main.MainField = "Main Value";
main.Sub.SubField = "SubValue"; 
```

我更喜欢对象初始化语法，因为它的噪音略小，而且因为大多数开发人员习惯于使用 C# 块，他们更有可能将所有东西放在一起。

我还建议使 MainClass 上的 Sub 属性具有私有可设置性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:15:31.663

First, that's not a subclass. It's a separate object that is exposed as a property...

To quote MS: Object initializers let you assign values to any accessible fields or properties of an object at creation time without having to explicitly invoke a constructor.

See: [http://msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:40:20.700

您正在尝试的内容是非法的，并且无论如何都没有意义，因为`Sub`它是一个新对象。你仍然可以实现你想要的（见安迪的回答）。

查看 C# 语言规范中的第 7.6.10.2 节 Object initializers，其中指出：

> 对象初始化器由一系列成员初始化器组成，由 { 和 } 标记括起来并用逗号分隔。每个成员初始化器必须命名正在初始化的对象的可访问字段或属性，后跟等号和表达式或对象初始化器或集合初始化器。对象初始值设定项为同一字段或属性包含多个成员初始值设定项是错误的。对象初始化器不可能引用它正在初始化的新创建的对象。

# javascript - 页面关闭时cookies不会被删除？

> ID：12863963
> 
> 赞同：1
> 
> 时间：2012-10-12T17:11:02.573
> 
> 标签：javascript, jquery, html

![在此处输入图像描述](../Images/bc24e17015a2c82f879ff9be6dee4b84.png)
我在页面加载时创建 cookie（页面加载计数），然后在关闭窗口时删除 cookie

**我的问题**：cookie 没有被删除我的代码：http

**:** [//jsfiddle.net/Y3xs7/6](http://jsfiddle.net/Y3xs7/6)

编辑：我删除过期日期但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:14:27.227

write this code anywhere in script tag

```
window.onbeforeunload=clear_cookie; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:16:08.960

您将 cookie 设置为一个月后过期。

```
var futdate = new Date()
var expdate = futdate.getTime()
expdate += 3600000 * 24 *30  //expires in 1 hour (ed note: actually one MONTH)
futdate.setTime(expdate)

var newCookie="pageCount="+counter
newCookie += "; expires=" + futdate.toGMTString()
window.document.cookie=newCookie 
```

浏览器关闭时不会删除持久性 cookie（具有特定到期日期的）。

如果你不给 cookie 一个过期日期，它就会变成一个会话 cookie，当浏览器关闭时它会被删除。

另请注意，从[Chrome 19](http://code.google.com/p/chromium/issues/detail?id=1285134)和[Firefox 3](https://bugzilla.mozilla.org/show_bug.cgi?id=443354)开始，如果浏览器的启动模式选项为“从我离开的地方继续”，则不会删除会话 cookie。

# javascript - 通过url在页面上查找图片，并将数据放在下面

> ID：12863966
> 
> 赞同：0
> 
> 时间：2012-10-12T17:11:10.440
> 
> 标签：javascript, image, url, element

我试图找出一种通过 DOM 中的 URL 查找图片的方法，然后在图片下方插入一个小表单。我需要帮助来理解通过 URL 在页面上查找图片的想法，以及如何将数据放在图片正下方。它不需要什么花哨的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:13:19.050

可以很容易地用 jQuery 完成：

```
$('img:not([src="imageNameHere.png"])'); 
```

只要确保你把下面这行放在你的脑海里

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:13:23.153

使用 jquery 非常简单：

```
$('img[src=/url/to/image]') 
```

使用标准 JS，你会遇到更多类似的东西

```
imgs = document.getElementsByTagName('img');
for (i = 0; i < imgs.length; i++) {
   if (imgs.src == '/usr/to/image') {
      ...
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:13:39.943

您可以使用属性等于选择器。

[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

因此类似于：

```
$("img[src='Your URL']") 
```

然后添加一个表单，您可以使用 Append 方法

[http://api.jquery.com/append/](http://api.jquery.com/append/)

因此类似于：

```
$("img[src='Your URL']").append("your HTML"); 
```

编辑：

请参阅工作示例的 JS 小提琴：http: [//jsfiddle.net/2RDJU/1/](http://jsfiddle.net/2RDJU/1/)

我实际上使用了`after()` [http://api.jquery.com/after/](http://api.jquery.com/after/)而不是 append，因为我们无法将 HTML 插入到 img 标签中。

# spring - 如何使用 Dojo 在 Spring WebFlow 项目中制作所需的复选框

> ID：12863967
> 
> 赞同：0
> 
> 时间：2012-10-12T17:11:11.517
> 
> 标签：spring, spring-mvc, dojo, spring-webflow

如何使用 Dojo 在 Spring WebFlow 项目中制作所需的复选框。我想知道如何制作提交下一页时所需的复选框。如果用户没有单击复选框选项之一，我不希望提交工作。谢谢。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<style type="text/css" media="screen">
 @import url("<c:url value="/resources/dojo/resources/dojo.css"/>");
 @import url("<c:url value="/resources/dijit/themes/claro/claro.css"/>");
</style>     

<script djconfig="parseOnLoad: true"
 src="<c:url value="/resources/dojo/dojo.js"/>" type="text/javascript"></script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring.js" />"> </script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring-Dojo.js" />"></script>
<script type="text/javascript">dojo.require("dojo.parser");</script>

<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body class="claro">
    <h2>CheckBox Test</h2>
    <p>
    <p>
    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <div id="container">
            <table>
                <tr>
                    <td><font color=red><form:errors path="sex" /></font><b>Do you have a kid(s) of the follow sex type:</b></td>
                    <td><form:checkbox path="sex" id="sex" value="MALE" /> MALE |  
                        <form:checkbox path="sex" id="sex" value="FEMALE" />FEMALE
                        <script type="text/javascript">
                            dojo.query("#sex input[type='checkbox']").forEach(function(element){
                                Spring.addDecoration(new Spring.ElementDecoration({
                                    elementId: element.id,
                                    widgetType : "dijit.form.CheckBox",
                                    widgetAttrs : { checked : element.checked, required : true,
                                        validate: function (){
                                               if(dojo.query("INPUT[type='checkbox']", 'customer').filter(function(n){return n.checked;}).length > 0){return true;} else {alert('choose a type');return false;}
                                          }
}
                                }));
                            });
                        </script>
                        </td></tr>
                        </table>
        </div>
        <p>
        <input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <input type="submit" name="_eventId_cancel" value="Cancel" />
        <p>
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));
        </script>
    </form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:42:28.503

让我猜猜：0 个或只有 1 个复选框真的有装饰。

这里有几件事：复选框不是单选按钮，您不应该这样使用它们。

您希望每个复选框都有不同的 id 和路径，因为每个复选框都有不同的字段。

即使你设法做你想做的事，有人可以检查男性和女性......

您可以将多个复选框与 form:checkbox 一起使用，但它们将链接到数组或列表

验证功能的示例（如果它是您拥有的唯一复选框，否则查询类或类似的东西）：

```
validate: function (){
           if(dojo.query("INPUT[type='checkbox']", 'customer').filter(function(n){return n.checked;}).length > 0){return true;} else {alert('choose a type');return false;}
      } 
```

# wcf - 带有 wsDualHttpBinding 阻塞调用的 WCF

> ID：12863973
> 
> 赞同：0
> 
> 时间：2012-10-12T17:11:41.337
> 
> 标签：wcf, wsdualhttpbinding

我的情况是我使用 wsDualHttpBinding 作为绑定。

但我注意到了一些意想不到的事情。当我尝试向服务操作发送请求时，但我的代码正在处理回调消息（我已经在那里放置了一个 Thread.Sleep 来模拟），然后服务调用会卡住（甚至可能会超时）直到回调消息被完全处理。他们不应该是独立的，还是通道一次只能处理一条消息，不管是服务请求还是回调消息？我一直在使用同一个频道，要么接收回调消息，要么发送新请求。此应用程序作为服务运行，因此不涉及 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:50:28.863

尝试

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant)] 
```

在单线程配置中支持回调是一种特殊模式。

[http://msdn.microsoft.com/en-us/library/system.servicemodel.concurrencymode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.concurrencymode.aspx)

# iphone - 带有 Elements API 的 MonoTouch.Dialog 中的下拉菜单（组合框）？

> ID：12863977
> 
> 赞同：1
> 
> 时间：2012-10-12T17:12:00.487
> 
> 标签：iphone, ios, xamarin.ios, monotouch.dialog

我知道通过简单地使用 MonoTouch.Dialog 高级反射 API 很容易`Enum`做到这一点，但是如何使用低级元素 API 来完成呢？我似乎无法找到一种为`EntryElement`项目提供数据源的方法。我要解决这个问题了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:32:41.057

你可以看看反射 API 是如何做到的，它实际上非常简单，它只是创建一个 RootElement，然后用它需要的各种值填充它。

像这样的东西：

```
var section = new Section ("My Section");
for (int i = 0; i < 32; i++){
    section.Add (new RadioElement ("Element " + i));
}

var myRadio = new RootElement ("My Radio", new RadioGroup (null, 0)) { 
   section 
}; 
```

# c++ - 该程序的有效算法

> ID：12863978
> 
> 赞同：2
> 
> 时间：2012-10-12T17:12:03.267
> 
> 标签：c++, algorithm

我必须执行从用户那里获取的程序：
n - 元素数
m - 对数（两个元素成对）
然后用户将写入所有对 > 1 和 2；1 和 3, ...
并且应该输出具有最多元素的数字 >> 其中每个元素都与该数字的所有其他元素成对出现。
例如：

* * *

输入：（第一行 n 和 m）下一行有对

```
 5 6           
                                 1 2
                                 1 3
                                 1 4
                                 1 5
                                 3 2
                                 4 2 
```

输出：`1 2 3`或`4 1 2`
（`1 2 3 4`不好，因为元素 3 和 4 不是成对的）（1 5 也不好，因为 1 5 成对但它们不是最大的）

* * *

我需要让这个程序在 n = 100000 和 m 高达 300000 的情况下在 2 秒内运行。有什么有效的方法吗？我试过用所有组合来做，然后我检查了所有元素是否成对，但这不是有效的方法（100 年才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:38:51.077

如果我正确理解您的问题，您可以保留一个包含 10 个元素（0-9）的数组，然后为每个元素保留另一个布尔数组，以确定是否观察到一对：

```
bool pairs[10][10]; 
```

当你看到这对 (1,2) 时，你可以这样做：

```
pairs[1][2] = true; 
```

要确定哪个数字的对数最多，您只需将布尔值相加即可。

但是，您确实存在希望 (1, 2) 与 (2, 1) 相同的问题。为了解决这个问题，您可以下达命令：

```
void order(int &a, int &b) {
    if (b < a) swap(a, b);
} 
```

# java - Java 泛型：“Core Java”教程的解决方案不适用于 Eclipse？

> ID：12863979
> 
> 赞同：0
> 
> 时间：2012-10-12T17:12:03.223
> 
> 标签：java, eclipse, generics

我正在阅读 Hortsmann 和 Cornell 的《Core Java》一书（Vol.1）。在泛型一章中，他们建议了一个故意错误的输入，以便查看编译器所说的内容。我的问题是：不仅编译器不会给我同样的错误，而且当我按照书中所述更正输入时，它也会继续给我错误。这是交易：

```
public class PairTest1 {
    public static void main(String[] args) {
        double middle = ArrayAlg.getMiddle(3.14, 1729, 0);
    }
}

class ArrayAlg {
    public static <T> T getMiddle(T[] a) {
        return a[a.length / 2];
    }
} 
```

这本书说我应该得到错误：

> 找到：java.lang.Number&java.lang.Comparable>，要求：double。

相反，Eclipse 不会让我运行程序，说

> ArrayAlg 类型中的方法 getMiddle(T[]) 不适用于参数 (double, int, int)

然后书上说

> 补救方法是将所有参数写为双精度值。

因此，我将 1729 更改为 1729.1，将 0 更改为 0.1。现在 Eclipse 说：

> ArrayAlg 类型中的方法 getMiddle(T[]) 不适用于参数 (double, double, double)

嗯……我不明白发生了什么。建议？

谢谢和问候

编辑：我试图创建数组`double[] doubles = { 3.14, 1729.1, 0.1 };`并将其作为参数提供，但现在我得到了错误`The method getMiddle(T[]) in the type ArrayAlg is not applicable for the arguments (double[])`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:15:07.070

The function expects an array, but you are passing 3 individual double parameters instead.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T17:16:18.443

你应该把你的电话改成

```
double middle = ArrayAlg.getMiddle(new Double[]{ 3.14, 1729.0, 0.0 }); 
```

如果您想以您正在做的方式传递它们，那么您应该将声明更改为

```
public static <T> T getMiddle(T... a)
{
    return a[a.length / 2];
} 
```

使用 Java 的 var-arg 语法。然后您可以将该方法称为

```
double middle = ArrayAlg.getMiddle(3.14, 1729.0, 0.0); 
```

# html - 需要使用修复标题滚动水平表

> ID：12863981
> 
> 赞同：2
> 
> 时间：2012-10-12T17:12:12.577
> 
> 标签：html, css, html-table, fixed-header-tables

我需要在开始时滚动一个带有 2 个固定列的水平表。这是到目前为止我所拥有的链接，我知道我非常接近，我只是无法让包装器包裹桌子的主体。

[http://jsfiddle.net/ajamali/TBnqw/1147/](http://jsfiddle.net/ajamali/TBnqw/1147/)

 `任何想法，我错过了什么？`

# javascript - 单击按钮删除/添加类

> ID：12863991
> 
> 赞同：2
> 
> 时间：2012-10-12T17:12:33.597
> 
> 标签：javascript, jquery, html

我希望能够从 div 中删除一个类并在单击按钮时添加另一个类。但我无法让它工作。

```
<div class="hiddennav displaynone">
  <ul>
    <?php wp_nav_menu(array('menu' => 'Main Nav menu')); ?>
  </ul>
</div> <!-- end div hiddennav -->
<div class="fixednav">
  <div class="shownav"><a href="#" class="shownavbutton"></a></div>
  <!-- end div shownav -->
</div> <!-- end div fixednav --> 
```

这是jQuery：

```
$(document).ready(function(){
  $(".shownavbutton").click(function() {
    $(".hiddennav").removeClass("displaynone").addClass("displayblock");
  }); 
```

我希望它在多次单击时也能切换类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:13:52.227

尝试`$(selector).toggleClass(class)`：

```
$(document).ready(function(){ 
    $(".shownavbutton").click(function() { 
        $(".hiddennav").toggleClass("displaynone").toggleClass("displayblock");
    });
}); 
```

或者，您也可以使用 CSS 方法（假设这是您通过您的`displaynone`和`displayblock`类完成的全部工作）：

```
$(".hiddennav").toggle(function() {
    $(this).css('display','none');
}, function() {
    $(this).css('display','block');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:14:27.993

Try this

```
 $(".hiddennav").toggleClass("displaynone displayblock"); 
```

# ios - iDevice原生耳机按键功能变化

> ID：12863994
> 
> 赞同：1
> 
> 时间：2012-10-12T17:12:45.387
> 
> 标签：ios, xcode, audio, avaudioplayer, headphones

我有 AVAudioPlayer 和应用程序。我想将耳机按钮功能从“音量增大/音量减小”更改为“播放暂停/前进”。可能吗？寻求任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:29:52.360

Apple 记录的 API 无法执行您希望实现的功能

# python - 在python中返回值的类定义

> ID：12863997
> 
> 赞同：-3
> 
> 时间：2012-10-12T17:12:53.833
> 
> 标签：python

我已经定义了一个类

代码.py

```
class test:
     def __init__(self.x,self.y):
       self.x = x
       self.y = y

    def sum(self):
      z = self.x + self.y
      return z

def main():
   x = test(1,2)
   valsum = x.sum() 
```

我希望在调用类而不是调用方法 id 时返回总和？

我将如何编码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:13:47.803

为此使用一个函数：

```
def test(*args):
    return sum(args) 
```

或者更好的是，只需使用内置：

```
sum((1,2)) 
```

* * *

如果你有充分的理由想要这个，你可以随时将这些东西包装在另一个函数中：

```
def testsum(a,b):
    t = test(a,b)
    return t.sum() 
```

或者你可以这样做：

```
result = test(a,b).sum() 
```

直接地。这应该谨慎使用，因为它效率低下......

* * *

最后（正如评论中所指出的，如果你覆盖`__new__`，你可以这样**做**，不要这样做）

```
class test(object):
    def __new__(cls,*args):
       return sum(*args)

print (test(1,2,3,4)) #10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T17:26:07.037

您可以覆盖[`__new__()`](http://docs.python.org/reference/datamodel.html#object.__new__)：

```
class test(object):
    def __new__(cls, x, y):
        return x+y

z = test(1, 2)
print z # => 3 
```

也就是说，我不能强调这样做是多么令人难以置信，或多或少总是如此。

虽然我们毫无意义，但您也可以有`sum()`一个方法：

```
class test(object):
    def __new__(cls, *args, **kwargs):
        test_obj = super(test, cls).__new__(cls)
        test_obj.__init__(*args, **kwargs)
        return test_obj.sum()

    def __init__(self, x, y):
        test.x = x
        test.y = y

    def sum(self):
        return self.x + self.y

z = test(1, 2)
print z 
```

但是，没有办法在`__new__`实现之外访问它。`test`或者不通过手动调用`object.__new__()`and来“艰难地”创建实例`__init__`，此时您在主管手中遭受的任何暴力都是合理的。

为了最大限度地变态，这是[@kindall](https://stackoverflow.com/users/416467/kindall)建议的变体——当然是不必要的过度设计：

### 使用元类

```
class meta_delegate(type):
    def __call__(cls, *args, **kwargs):
        obj = cls.__new__(cls)
        obj.__init__(*args, **kwargs)
        delegate = cls.__delegate
        if (isinstance(delegate, basestring)):
            delegate = getattr(obj, delegate)
            return delegate()
        else:
            return delegate(obj)

    @staticmethod
    def to(delegate):
        def __new__(*args, **kwargs):
            cls = meta_delegate(*args, **kwargs)
            cls.__delegate = delegate
            return cls
        return __new__

class test(object):
    def __init__(self, x, y):
        test.x = x
        test.y = y

    def sum(self):
        return self.x + self.y

    __metaclass__ = meta_delegate.to(sum) 
```

我真的很惊讶它的工作原理。似乎调用元类不使用它的`__call__`.

最后一个只是为了说明这一切的毫无意义：

### 如此毫无意义，它是循环的

```
class meta_delegate(type):
    def __call__(cls, *args, **kwargs):
        return cls.__delegate(*args, **kwargs)

    @staticmethod
    def to(delegate):
        def __new__(*args, **kwargs):
            cls = meta_delegate(*args, **kwargs)
            cls.__delegate = staticmethod(delegate)
            return cls
        return __new__

class test(object):
    __metaclass__ = meta_delegate.to(lambda x, y: x+y) 
```

这里的委托可以是任何可调用的，而且 API 更简单！现在，如果你能原谅我，我会去喝一杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:18:04.700

虽然不可能从构造函数返回任何值，但您可以使用`__call__`魔法方法使您的对象直接可调用。

```
class Sum:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    def __call__(self):
        return self.x + self.y

x = Sum(4,7)
x() # = 11 
```