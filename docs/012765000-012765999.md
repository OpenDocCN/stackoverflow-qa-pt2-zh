# StackOverflow 问答 12765000-12765999

# opengl - OpenGL中的色彩空间转换

> ID：12765002
> 
> 赞同：1
> 
> 时间：2012-10-07T00:11:51.440
> 
> 标签：opengl, 3d, nvidia, yuv, color-space

有没有办法在 OpenGL 中进行颜色转换（例如从 RGB 到 YUV420p 来回）？我可以使用后台缓冲区的内容、纹理或 FBO。我在这里看到了这个问题，但仅限于 OpenGL 1.1，并且我不受任何特定版本的 OpenGL 的限制。 [OpenGL 色彩空间转换](https://stackoverflow.com/questions/1632266/opengl-colorspace-conversion)

我想知道是否有更新/更快的方法可以使用更新的版本来做到这一点。我不希望使用任何特定于硬件的东西，但如果需要，我正在使用 Nvidia GPU。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T10:07:43.983

由于您想要更新/更快，是的，您可以尝试使用 CUDA 或 OpenCL。它们是否会比着色器快得多......我不知道，请告诉我们。如果有的话，它可以让您更好地控制资源如何分配给任务。

这两个框架都有与 OpenGL 共享内存的方法，因此您应该能够只编写一个内核并将其传递给您的 opengl 纹理/fbo。

我碰巧为 xpra 编写了许多这样的模块，你可以在这里找到它们的链接：[xpra wiki: CSC](http://xpra.org/trac/wiki/CSC)（代码是 GPL2+）

# posix - libc 函数“strcpy()”是否调用任何系统调用？

> ID：12765008
> 
> 赞同：4
> 
> 时间：2012-10-07T00:13:11.000
> 
> 标签：posix, libc, system-calls, strcpy

我想知道是否有任何 libc 函数不调用任何 syscall()？例如，对于 libc 函数“strcpy()”，它是否有任何系统调用（让我们考虑所有可能的 linux 系统）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T00:36:50.543

系统调用在性能方面非常繁重，因为它们意味着将上下文切换到内核中。因此，对于像这样的简单库函数`strcpy`（其功能实际上等效于`while(*d++ = *s++)`，但可能针对架构进行了优化），系统调用没有任何意义。

请注意，复制期间的页面错误可能会导致内核上下文切换和系统调用的出现，但这不是`strcpy`直接调用系统调用的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T00:26:23.470

系统调用有点像从用户空间（程序运行的地方）到内核空间的接口。当你在做一些只有内核才能做的事情时需要它们，比如与硬件通信（例如从网卡读取字节，启动进程，甚至通过 malloc（使用`brk`）分配内存等）。

另一方面，Userland 函数，例如`strcpy`，并没有缩进来执行系统调用。他们不需要特殊的权限来做他们所做的事情，他们只是在用户空间中对进程的内存进行操作。

由于系统调用引入了主要的性能损失（将模式从用户更改为内核空间并返回代价高昂），因此`strcpy`从设计的角度来看，将它们置于经常调用的函数中是没有意义的，因此不太可能被看到。

# c - 在调用 execvp 之前 C 测试文件是否存在

> ID：12765010
> 
> 赞同：4
> 
> 时间：2012-10-07T00:13:15.533
> 
> 标签：c, shell, testing, path, execvp

我正在 ubuntu 上编写一个 UNIX minishell，并尝试在此时添加内置命令。当它不是内置命令时，我 fork 然后子执行它，但是对于内置命令，我将在当前进程中执行它。

因此，我需要一种方法来查看文件是否存在（如果存在，则不是内置命令），但是 execvp 使用环境 PATH 变量自动查找它们，所以我不知道如何事先手动检查。

那么，你们知道我如何通过提供名称来测试参数以查看它是否是内置命令吗？

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T00:52:40.847

我已经测试了汤姆的答案

它包含许多问题。我在这里修复了它们并提供了一个测试程序。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <sys/stat.h>

int is_file(const char* path) {
    struct stat buf;
    stat(path, &buf);
    return S_ISREG(buf.st_mode);
}

/*
 * returns non-zero if the file is a file in the system path, and executable
 */
int is_executable_in_path(char *name)
{
    char *path = getenv("PATH");
    char *item = NULL;
    int found  = 0;

    if (!path) 
        return 0;
    path = strdup(path);

    char real_path[4096]; // or PATH_MAX or something smarter
    for (item = strtok(path, ":"); (!found) && item; item = strtok(NULL, ":"))
    {
        sprintf(real_path, "%s/%s", item, name);
        // printf("Testing %s\n", real_path);
        if ( is_file(real_path) && !(
               access(real_path, F_OK) 
            || access(real_path, X_OK))) // check if the file exists and is executable
        {
            found = 1;
        }
    }

    free(path);
    return found;
}

int main()
{
    if (is_executable_in_path("."))
        puts(". is executable");
    if (is_executable_in_path("echo"))
        puts("echo is executable");
} 
```

笔记

1.  返回值的测试`access`被颠倒了
2.  第二个 strtok 调用有错误的分隔符
3.  strtok 改变了`path`论点。我的示例使用副本
4.  没有什么可以保证连接中的正确路径分隔符 char`real_path`
5.  没有检查匹配的文件是否实际上是一个文件（目录也可以是“可执行的”）。这会导致奇怪的事情，比如`.`被识别为外部二进制文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:21:40.433

您可以遍历 PATH 目录，并且对于 PATH 中的每个条目（您必须将 PATH 与`:`，可能使用[strtok](http://www.manpagez.com/man/3/strtok/)分开）在每个路径的末尾连接调用的命令的名称。创建此路径后，请检查文件是否存在以及是否可以使用[access](http://linux.die.net/man/2/access)执行。

```
int is_built_in(char *path, char *name)
{
  char *item = strtok(path, ":");

  do {
    char real_path[4096] = strcat(item, name); // you would normally alloc exactly the size needed but lets stick to it for the sake of the example
    if (!access(real_path, F_OK) && !access(real_path, X_OK)) // check if the file exists and is executable
      return 0;
  } while ((item = strtok(NULL, ":")) != NULL);
  return 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T00:53:51.893

您可以做的是您可以更改特定目录的路径，然后使用`#include<dirent.h>`头文件及其`readdir`和`scandir`函数遍历目录或`stat`结构以查看该文件是否存在于目录中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T03:40:05.380

为什么要在调用*之前*`execvp`进行测试？那是错误的做法。只要打电话`execvp`，它会告诉你程序是否不存在。

# c# - 在页面加载时在 datalist 中找到控件

> ID：12765015
> 
> 赞同：0
> 
> 时间：2012-10-07T00:14:59.153
> 
> 标签：c#, asp.net, visual-studio-2010

我想在页面加载方法的数据列表中找到一个项目这是我的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    //some code here

    for (int i = 0; i < count  ; i++)
    {
        LinkButton LinkButton6 = (LinkButton)sender;
        DataListItem item = (DataListItem)LinkButton6.NamingContainer;
        LinkButton lnkbtn6 = (LinkButton)DataList1.Items[item.ItemIndex].FindControl("LinkButton6");  
     }  
 } 
```

但在我看来这个错误：无法将“ASP.default2_aspx”类型的对象转换为“System.Web.UI.WebControls.LinkBut​​ton”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:45:10.333

`Page_Load`不是由 LinkBut​​ton 触发的事件，因此 sender 不能是 LinkBut​​ton。这是一个页面事件。`OnItemDataBound`改为使用

标记

```
<asp:DataList OnItemDataBound="DataList1_OnItemDataBound" runat="server" ID="MdataList">
<ItemTemplate>
    <asp:LinkButton runat="server" ID="LinkButton6" Text="Text"></asp:LinkButton>
</ItemTemplate>
</asp:DataList> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void DataList1_OnItemDataBound(object sender, DataListItemEventArgs e)
{
    LinkButton lnkBtn6 = (LinkButton)e.Item.FindControl("LinkButton6");
    lnkBtn6.Text = "Some Text Here";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:22:33.087

在这条线上：

```
LinkButton LinkButton6 = (LinkButton)sender; 
```

`sender`对象是，`Page`不是`LinkButton`，不是吗？

# c# - C# 中的 InvalidCastException、DLL 和反射问题

> ID：12765016
> 
> 赞同：0
> 
> 时间：2012-10-07T00:15:00.493
> 
> 标签：c#, reflection, dll, interface, .net

我正在尝试使用带有反射的预编译 DLL，为我的类在 DLL 中实例化一个接口。我按书本试过，但它不起作用。当我尝试执行以下操作时，它会抛出 InvalidCastException：

```
ICompute iCompute = (ICompute)Activator.CreateInstance(type); 
```

当然类型是我的实现 ICompute 接口的类。我被困住了，不知道该怎么办。完整代码如下：

这是 DLL 内容：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication18
{
    public class ClassThatImplementsICompute : ICompute
    {
       public int sumInts(int term1, int term2)
       {
           return term1 + term2;
       }

       public int diffInts(int term1, int term2)
       {
           return term1 - term2;
       }
    }
} 
```

实际程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Reflection;

namespace ConsoleApplication18
{

    public interface ICompute
    {
        int sumInts(int term1, int term2);
        int diffInts(int term1, int term2);
    }

    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Loading dll...");
            Assembly assembly = Assembly.LoadFrom("mylib.dll");

            Console.WriteLine("Getting type...");
            Type type = assembly.GetType("ConsoleApplication18.ClassThatImplementsICompute");
            if (type == null) Console.WriteLine("Could not find class type");

            Console.WriteLine("Instantiating with activator...");
            //my problem!!!
            ICompute iCompute = (ICompute)Activator.CreateInstance(type);

            //code that uses those functions...

        }
    }
} 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:31:07.187

问题与您如何加载程序集有关`Assembly.LoadFrom()`。

`LoadFrom()``ICompute`与您尝试转换到的接口的上下文相比，将程序集加载到不同的上下文中。`Assembly.Load()`如果可能，请尝试使用。即将程序集放入 bin / probing path 文件夹并按完整的强名称加载。

一些参考资料： http: [//msdn.microsoft.com/en-us/library/dd153782.aspx](http://msdn.microsoft.com/en-us/library/dd153782.aspx) [http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)（见LoadFrom 的劣势位）

# post - OS X 上的 acr122 标签阅读器应用程序

> ID：12765017
> 
> 赞同：3
> 
> 时间：2012-10-07T00:15:10.970
> 
> 标签：post, osx-lion, nfc

当用户将标签点击到 ACR122U nfc 阅读器时，我需要制作一个应用程序，将带有数据的 POST 发送到 Web 服务。应用程序需要在启动后继续自行运行，并在每次点击标签时发送 POST。基于标签数据的条件逻辑需要控制应用程序中的 POST url。这是一个简短的 POC 安装，在 4 小时内不超过 500 次标签滑动。当用户点击几个标签时，将有一个阅读器和一个显示带有累积列表的网页的屏幕。

由于我有一台 MacBook Pro (OS X 10.7)，因此我尝试了几种使用该平台的方法。不幸的是，没有成功。我更喜欢 OS X 解决方案，但愿意接受建议。

鉴于以下情况，我需要做什么？有没有更好/更简单的方法？

1.  tagstand_writer：

    *   ACR122U 附带名为“tagstand_writer_macosx_0_6_5_beta”的软件。tagstand_writer 似乎不包含我想要的功能。似乎只启用简单的读/写而无需连续轮询。它可以由执行轮询的包装应用程序使用，还是可以以我不知道的方式使用以实现所需的功能？无论如何，我尝试按照说明为我的标签写一个 url，但无法做到。我忘记了问题是什么，但似乎不值得追求。但是，我能够按照说明阅读标签。
2.  [libnfc](http://www.libnfc.org/)

    *   在寻找线索时，我偶然发现了 libnfc。因此，我深入了解并勇敢地安装了过程。它进行得并不顺利。文档是“好的”（不是防错的），而且这个过程很有挑战性。我在配置/制作过程中遇到了一些坑洞，花了一段时间。最终，我能够运行其中一个示例。但是，我不确定下一步该做什么。似乎水平很低。提供了一个名为“nfc-poll”的示例，但是，它在读取标签后退出，我不确定我是否可以让它做我想做的事。我认为这是我 3 次尝试中最有希望的一次，但不知道下一步该做什么。
3.  [标记事件](http://code.google.com/p/tageventor/)

    *   寻找更高层次的起点，我找到了tageventor。tagEventor 似乎很有希望，一旦启动，就应该在读取标签时运行和轮询并调用脚本。脚本，据说可以是任何东西。所以，我尝试了，但无法让它工作。我在 github 上找到了一个[更新的版本](https://github.com/bettse/tagEventor)，并尝试过也无济于事。我可以让 tagEventor 运行，但是当我将标签触到阅读器时出现错误：“错误：readerCheck::RPC 传输错误”。我不知道那是什么，互联网显然也不知道。此外，在尝试调试 tageventor 时，我确实注意到我的控制台正在输出错误：“阅读器 ACS ACR122U PICC 接口 00 00 中的令牌无法使用（错误 229）”，无论 tageventor 是否正在运行。

什么是简单/快速的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T03:51:21.173

我建议你使用类似的东西：echo 1 | pcsctest >out.txt 猫 out.txt | grep "当前阅读器 ATR 值" | tr -d " " | tr ":" " " | awk '{print $2}' 在您的应用程序中获取 ART ，您可以创建一个 bash 脚本并将其置于守护程序模式（如果您愿意）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T21:34:18.657

遗憾的是，我没有及时找到 OS X 解决方案，而是使用了 Windows 盒子，这很容易。该 SDK 适用于 Windows：[http ://www.acs.com.hk/en/products/12/acr122u-nfc-contactless-smart-card-reader-software-developmnt-kit/](http://www.acs.com.hk/en/products/12/acr122u-nfc-contactless-smart-card-reader-software-developmnt-kit/)

# android - 套接字关闭时间

> ID：12765020
> 
> 赞同：0
> 
> 时间：2012-10-07T00:16:05.697
> 
> 标签：android, sockets, timing

自从从冰淇淋三明治升级到果冻豆后，我在客户端（Galaxy Nexus）和自定义服务器之间似乎存在时间问题。这是一般流程：

1.  客户端打开套接字，发送 HTTP 到服务器
2.  服务器接受，启动新线程，以 HTTP 标头和 200 OK 响应。
3.  服务器将（二进制）文件写入套接字。
4.  客户端从套接字读取数据并保存到文件中。
5.  服务器线程写入所有数据后，关闭套接字，并终止

在 Jelly Bean 更新之前的几个月里，这一直运作良好。自更新以来，二进制传输的成功率约为 70%。当 'serverSocket.getInputStream().read' 返回 -1 表示已到达流的末尾时，剩余的 30% 失败。未读取任何数据，未引发错误异常，logcat 中没有任何内容。

当我在步骤 5 中更改服务器行为时，可能会出现计时问题。线程在写入后关闭套接字并观察到问题。如果我删除套接字关闭，在写入后终止线程，并让操作系统最终关闭套接字，那么它似乎一直在工作。

我使用 tcpdump 和 WireShark 来查看成功和失败情况下的数据包。在失败的情况下，套接字会在几毫秒内关闭，而在成功的情况下，套接字会在四分之一秒或更多秒内关闭。这样做的结果是，我们在套接字关闭中造成的任何延迟都会提高我们成功的机会。

如果有人对我们可能会导致此问题的措施有任何建议，或者对如何缩小问题范围有任何建议，请随时回复。如果需要，我可以添加代码示例。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T01:23:58.587

看起来当服务器请求关闭连接时，套接字立即关闭。也许默认的 ocket 逗留时间在版本之间发生了变化？？？

尝试使用以下方法设置套接字逗留时间：

```
socket.setSoLinger(boolean on, int timeout); 
```

如果某些数据仍在等待发送，则让服务器在关闭通道之前等待一段时间。

如果这不能解决，您可以将上面的流程更改为：

...

4.Client从socket读取数据并保存到文件中。

5.Client向服务器发送确认。

6.服务器关闭连接。

--EDITED-- 在没有额外的 TCP 数据包传输结束确认的情况下实现上述目标的优雅方法是：

当服务器完成写入套接字调用时：

```
socket.shutdownOutput(); 
```

当客户端 socket.read() 返回 -1 时，客户端调用：

```
socket.close(); 
```

这确保客户端被告知所有数据都已发送，并且发送方将等待套接字关闭协议完成。

# php - session_start() 不能在线工作

> ID：12765024
> 
> 赞同：0
> 
> 时间：2012-10-07T00:17:01.240
> 
> 标签：php

我在为用户设置会话时遇到问题。它在我的本地主机上工作，但在网上它不起作用。

我有一个名为“s”的用户名，我创建了一个页面来查看问题所在

这是代码。测试.php

```
<?php 
session_start();
require 'connect.php';

$username = @$_POST['username'];

?>

<div class="center_body">
    <div class="search_field">
            <form method="POST" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                <table border="0" width="100%" cellspacing="0" cellpadding="0">
                    <td align="left">username:</td>
                    <td align="right"><input type="text" name="username" class="search" /></td>
                </tr>

                </table>
                <input type="submit" value="log in" class="search" /></p>
            </form>
            </tr>

    </div>
</div>

<?php
$result = mysql_query("SELECT username FROM users WHERE username='$username'") or die(mysql_error);

    while($row = mysql_fetch_assoc($result))
    {
        $user = $row['username'];

    }

    if($username == $user)
    {
        echo '<div class="search_field"><b>you have logged successfully</b></div></ br>';
       $_SESSION['username'] = $username;

    }

    if(isset($_SESSION['username']))
    {
        echo $_SESSION['username'];
    }

?> 
```

像上面的代码一样，它可以工作，而且我可以打印用户名。但是当我将 test.php 编辑为

```
<?php 
session_start();
require 'connect.php';
    if(isset($_SESSION['username']))
    {
        echo $_SESSION['username'];
    }

?> 
```

现在，这个页面应该打印用户名，因为我已经成功创建了会话。但它什么也没打印，所以会话似乎不起作用

你有什么问题？

编辑：connect.php

```
<?php

$connect = @mysql_connect("localhost","root","") or die("error in connection");
$select  = @mysql_select_db("abc") or die ("no databse selected");

?> 
```

当然，我将数据更改为连接到我的主机数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:31:58.497

试试看：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST'){
    $result = mysql_query("SELECT username FROM users WHERE username='$username' LIMIT 1") or die(mysql_error);
    while($row = mysql_fetch_assoc($result))
    {

        if($username == $row['username'])
        {
            echo '<div class="search_field"><b>you have logged successfully</b></div></ br>';
           $_SESSION['username'] = $username;
           break;

        }

    }    
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T03:09:39.787

好吧，伙计们，因为我认为它来自我的主机站点。

支持人员告诉我“我已经为您的帐户设置了 session.save_path。” 问题就解决了。

非常感谢你们，尤其是丹尼尔：）

祝你好运 ：）

# pygame - SimpleCV 1.3 更新 & pygame

> ID：12765025
> 
> 赞同：0
> 
> 时间：2012-10-07T00:17:12.630
> 
> 标签：pygame, simplecv

我最近更新到 SimpleCV 1.3。当我尝试运行示例时，我得到以下信息：

```
objc[92210]: Class SDLTranslatorResponder is implemented in both /Library/Frameworks/SDL.framework/Versions/A/SDL and /usr/local/lib/libSDL-1.2.0.dylib. One of the two will be used. Which one is undefined.
objc[92210]: Class SDL_QuartzWindow is implemented in both /Library/Frameworks/SDL.framework/Versions/A/SDL and /usr/local/lib/libSDL-1.2.0.dylib. One of the two will be used. Which one is undefined.
objc[92210]: Class SDL_QuartzWindowDelegate is implemented in both /Library/Frameworks/SDL.framework/Versions/A/SDL and /usr/local/lib/libSDL-1.2.0.dylib. One of the two will be used. Which one is undefined.
objc[92210]: Class SDL_QuartzView is implemented in both /Library/Frameworks/SDL.framework/Versions/A/SDL and /usr/local/lib/libSDL-1.2.0.dylib. One of the two will be used. Which one is undefined.

WARNING: You need the python image library to save by filehandle
WARNING: You need the python image library to save by filehandle
WARNING: You need the python image library to save by filehandle 
```

考虑到这与之前的 pygame 安装有关，当我删除旧的 pygame 文件夹（其中很少）时，我收到错误：“ImportError：没有名为 pygame 的模块”。

我怎样才能摆脱这个？这是我必须处理的事情，直到明天晚上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:54:26.190

ImportError 表示正确的文件夹不在您的`PYTHONPATH`环境变量中。

# ruby - 如何存储 ruby 代码块

> ID：12765030
> 
> 赞同：25
> 
> 时间：2012-10-07T00:18:07.127
> 
> 标签：ruby, block, proc

我想将“代码块”存储在要重用的变量中，例如：

```
block = do
|test| puts test
end

3.upto(8) block 
```

有人可以告诉我我做错了什么吗？（或者如果这是不可能的）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-07T00:27:49.997

在 Ruby 中有很多方法可以做到这一点，其中一种是使用 Proc：

```
foo = Proc.new do |test|
  puts test
end

3.upto(8) { foo.call("hello world") } 
```

阅读有关 Procs 的更多信息：

*   [http://www.reactive.io/tips/2008/12/21/understanding-ruby-blocks-procs-and-lambdas](http://www.reactive.io/tips/2008/12/21/understanding-ruby-blocks-procs-and-lambdas)
*   [http://www.skorks.com/2010/05/ruby-procs-and-lambdas-and-the-difference-between-them/](http://www.skorks.com/2010/05/ruby-procs-and-lambdas-and-the-difference-between-them/)

更新一下，上面的方法可以改写如下：

```
# using lower-case **proc** syntax, all on one line
foo = proc { |test| puts test }
3.upto(8) { foo.call("hello world") }

# using lambda, just switch the method name from proc to lambda
bar = lambda { |test| puts test }
3.upto(8) { bar.call("hello world") } 
```

它们基本上是非常相似的方法，有细微的差别。

最后，可能有更优雅的方式来做我所概述的事情，很高兴听到任何有更好方式的人的意见。希望这可以帮助。

# c++ - 设置帧率？这是一个好主意吗？

> ID：12765031
> 
> 赞同：0
> 
> 时间：2012-10-07T00:18:15.457
> 
> 标签：c++, frame, rate

> **可能重复：**
> [控制帧速率的常用方法是什么？](https://stackoverflow.com/questions/5508922/whats-the-usual-way-of-controlling-frame-rate)

在编程方面，我是个业余爱好者，但我想问一下这是否是一种有效的处理方式。

现在，我的程序目前每一步都会自我更新，但我希望将程序分成更小的帧速率。我目前的想法是在 main 中设置一个时钟，每 30 次左右（例如），游戏将自行更新。但是，我希望在该时间段内（例如，每 10 秒）分别更新程序的不同部分，并在该时间段结束时更新屏幕。我认为这将有助于减轻一些“压力”（假设有）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:26:41.707

我不会那样做的。它将变得更好/更容易/更干净，尤其是在开始时，尽可能频繁地更新游戏/屏幕（例如，将其置于 while(true) 循环中）。然后每次迭代，计算出经过的时间并相应地使用它。（例如，每经过 20 毫秒移动一个对象 1 个像素）或其他东西

这是一个更好的起点的原因是，您将很难保证准确的 30fps 并且游戏会表现得很奇怪（例如，如果一台速度较慢的计算机只能拉 15fps，您不希望物体以两倍的速度运行）更不用说漂移/个别慢帧等。

# java - 如何为这个方程编写一个java程序

> ID：12765032
> 
> 赞同：-1
> 
> 时间：2012-10-07T00:18:15.787
> 
> 标签：java, math

请看一下这个主题： [我可以计算这些数字的平均值吗？](https://stackoverflow.com/questions/340376/can-i-calculate-the-average-of-these-numbers?rq=1) 我该如何为此编写程序？在正确的答案中，他只是在没有 java 程序的情况下编写了方程式，例如他使用了 newValue 而没有初始化 newValue。这是等式：

```
int currentScore = (currentScore * currentCount + newValue) / currentCount; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:24:05.017

请找到以下损坏的步骤：

```
 private float calculateNewScore(){
        float currentScore = 6.1123
        int currentCount = 12;
        float newValue = 4.5;
        int newCount = currentCount+1;

        float newScore = (currentScore * currentCount + newValue) / newCount ;

    } 
```

如果您正在寻找示例程序，它可能是这样的：

```
 public class CalculateScore {

  public static void main(String[] args) {
    float currentScore = 6.1123; //you can initialize with any desired value
    int currentCount = 12;//you can initialize with any desired value

    float newValue = 0;
    Scanner scanner = new Scanner( System.in );     

    do{
        System.out.println("Enter your new value. Enter 0 or negative to exit.");
        newValue = scanner.nextFloat();
        if(newValue>0){
            currentScore = (currentScore*currentCount+newValue)/(++currentCount);
            System.out.println("Your new score is "+currentScore);
        }else{
            System.out.println("Program is exiting");
        }

    }while(newValue >0);
   }
  } 
```

# mysql - 简单的命令行命令在尝试导入 .sql 文件时出现语法错误

> ID：12765034
> 
> 赞同：1
> 
> 时间：2012-10-07T00:18:53.893
> 
> 标签：mysql, sql, command-line, import, phpmyadmin

```
openextreme < 'www/downloads/official_games_db.sql' 
```

就是这样。我试过带和不带引号、双引号、完整的文件路径、只是文件名等。我想`official_games_db.sql`（一个表）导入数据库`openextreme`（确实存在）。该文件很好，因为通过 phpMyAdmin 导入它可以完美地工作。但是由于各种原因，我希望通过命令行来完成它。

我不断收到错误 1064，语法，但除此之外没有真正的帮助。我已经搜索过了，据我所知，我是正确的。我也试过在结尾加分号和不加分号。我无计可施。非常感谢任何和所有帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:23:32.160

mysql -u 用户名 -p 数据库名 < 路径/example.sql

# clojure - clojure: (apply fn coll) vs (apply #(apply fn %&) coll)

> ID：12765035
> 
> 赞同：6
> 
> 时间：2012-10-07T00:19:18.637
> 
> 标签：clojure

我正在通过 labrepl 工作，我看到了一些遵循这种模式的代码：

```
;; Pattern
(apply #(apply f %&) coll)

;; Concrete example
user=> (apply #(apply + %&) [1 2 3 4])
10 
```

这似乎等同于这种模式：

```
;; Pattern
(apply f coll)

;; Concrete example
user=> (apply + [1 2 3 4]) 
10 
```

这些模式是否等效？如果没有，有什么区别，你什么时候用一个而不是另一个？

我从labrepl 的元胞自动机实验室的[step 函数中获取了前一种模式：](https://github.com/relevance/labrepl/blob/master/src/solutions/automaton.clj#L54)

```
(defn step
  "Advance the automation by one step, updating all cells."
  [board]
  (doall
   (map (fn [window]
          (apply #(apply map brians-brain-rules %&)
                 (doall (map torus-window window))))
        (torus-window board)))) 
```

**更新：**我添加了每个模式的具体示例，以帮助使问题更清晰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:07:51.290

不，没有区别。没有理由写更长的形式；我只能假设它是通过对曾经有意义的代码进行逐步更改来实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:42:17.563

本质上，这两种形式都完成了同样的事情，并且或多或少是相同的。每个都提供了一种引入匿名函数的方法。

Using`#(...`是匿名函数的 Clojure 阅读器简写。它有点等价于`(fn [arg1 & args]...`，但您不能将一个`#(...`匿名函数嵌入另一个匿名函数中，并且参数表示为`% %2...`or`%1 %2...`而不是向量绑定`(fn [arg & args]`。

两者都是表达匿名函数的方法。`#(...`用于更简单的功能，`(fn...`用于更详细的功能。

`#(...`倾向于使事情看起来更整洁。

# php - 正则表达式帮助

> ID：12765036
> 
> 赞同：0
> 
> 时间：2012-10-07T00:19:42.883
> 
> 标签：php, regex

我正在尝试匹配半动态生成的字符串。所以我可以看看它的格式是否正确，然后从中提取我需要的信息。我的问题是，无论我多么努力地掌握正则表达式，我都无法终生理解它。即使在所谓的生成器的帮助下。

我有几个不同的字符串，如下所示。`[@img:1234567890]`和`[@user:1234567890]`和`[@file:file_name-with.ext]`。像这样的字符串 pass through 旨在通过过滤器，因此它们可以被链接替换，或者更易读的名称。但是再试一次，我可能无法为其中任何一个想出一个正则表达式。

我正在寻找格式：`[@word:]`我将从字符串中删除 [、]、@ 和单词，这样我就可以相应地对我的数据库进行查询，无论它是什么，并相应地使用它。只是正则表达式位阻碍了我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:10:16.687

这就是我要做的。

```
<pre>
<?php

    $subj = 'An image:[@img:1234567890], a user:[@user:1234567890] and a file:[@file:file_name-with.ext]';
    preg_match_all('~(?<match>\[@(?<type>[^:]+):(?<value>[^\]]+)\])~',$subj,$matches,PREG_SET_ORDER);
    foreach ($matches as &$arr) unset($arr[0],$arr[1],$arr[2],$arr[3]);
    print_r($matches);

?>
</pre> 
```

这将输出

```
Array
(
    [0] => Array
        (
            [match] => [@img:1234567890]
            [type] => img
            [value] => 1234567890
        )

    [1] => Array
        (
            [match] => [@user:1234567890]
            [type] => user
            [value] => 1234567890
        )

    [2] => Array
        (
            [match] => [@file:file_name-with.ext]
            [type] => file
            [value] => file_name-with.ext
        )

) 
```

这是我如何使用该`preg_replace_callback()`函数的伪版本：

```
function replace_shortcut($matches) {
    global $users;
    switch (strtolower($matches['type'])) {
        case 'img'  : return '<img src="images/img_'.$matches['value'].'jpg" />';
        case 'file' : return '<a href="files/'.$matches['value'].'" target="_blank">'.$matches['value'].'</a>';
        // add id of each user in array
        case 'user' : $users[] = (int) $matches['value']; return '%s';
        default : return $matches['match'];
    }
}

$users = array();
$replaceArr = array();

$subj = 'An image:[@img:1234567890], a user:[@user:1234567890] and a file:[@file:file_name-with.ext]';
// escape percentage signs to avoid complications in the vsprintf function call later
$subj = strtr($subj,array('%'=>'%%'));
$subj = preg_replace_callback('~(?<match>\[@(?<type>[^:]+):(?<value>[^\]]+)\])~',replace_shortcut,$subj);

if (!empty($users)) {

    // connect to DB and check users
    $query = "  SELECT `id`,`nick`,`date_deleted` IS NOT NULL AS 'deleted'
                FROM `users` WHERE `id` IN ('".implode("','",$users)."')";
    // query
    // ...
    // and catch results
    while ($row = $con->fetch_array()) {
        // position of this id in users array:
        $idx = array_search($row['id'],$users);
        $nick = htmlspecialchars($row['nick']);
        $replaceArr[$idx] = $row['deleted'] ?
            "<span class=\"user_deleted\">{$nick}</span>" :
            "<a href=\"users/{$row['id']}\">{$nick}</a>";
        // delete this key so that we can check id's not found later...
        unset($users[$idx]);
    }
    // in here:
    foreach ($users as $key => $value) {
        $replaceArr[$key] = '<span class="user_unknown">User'.$value.'</span>';
    }
    // replace each user reference marked with %s in $subj
    $subj = vsprintf($subj,$replaceArr);

} else {

    // remove extra percentage signs we added for vsprintf function
    $subj = preg_replace('~%{2}~','%',$subj);

}
unset($query,$row,$nick,$idx,$key,$value,$users,$replaceArr);

echo $subj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:25:14.193

不知道你说的发电机是什么意思。我总是使用在线匹配器来查看我的测试用例是否有效。@Virendra 几乎拥有它，除了忘记逃避字符`[]`。

```
/\[@(\w+):(.*)\]/ 
```

您需要以正则表达式分隔符开始和结束，在本例中为“/”字符。

然后我们转义正则表达式使用的'[]'来匹配字符范围，因此是'['。

接下来我们匹配一个文字“@”符号。

现在我们要保存下一场比赛，以便我们以后可以使用它，所以我们用`()`.

`\w`匹配一个`word`. 基本上任何不是空格、标点符号或行字符的字符。

再次匹配文字`:`。

将第二部分放在匹配组中可能很有用，因此`(.*)`可以多次匹配任何字符，并为您保存。

`]`然后我们像之前所做的那样逃避关闭。

由于听起来您想稍后在查询中使用匹配项，我们可以使用[preg_match](http://php.net/manual/en/function.preg-match.php)将匹配项保存到数组中。

```
$pattern = '/\[@(\w+):(.*)\]/';
$subject = '[@user:1234567890]';
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

会输出

```
array(
    [0] => '[@user:1234567890]', // Full match
    [1] => 'user', // First match
    [2] => '1234567890' // Second match
) 
```

我发现一个特别有用的工具是[txt2re](http://www.txt2re.com/index-php.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T00:25:32.690

你可以尝试这样的事情：

```
/\[@(\w+):([^]]*)\]/ 
```

`\[`转义`[`字符（否则解释为字符集）；`\w`表示任何“单词”字符，并`[^]]*`表示任何非`]`字符（为了避免匹配超过标签的末尾，`.*`可能）。parens 对各种匹配的部分进行分组，以便您可以使用`$1`and `$2`in`preg_replace`来生成替换文本：

```
echo preg_replace('/\[@(\w+):([^]]*)\]/', '$1 $2', '[@link:abcdef]'); 
```

印刷`link abcdef`

# matlab - 在稀疏矩阵中递增值需要很长时间

> ID：12765038
> 
> 赞同：4
> 
> 时间：2012-10-07T00:19:59.073
> 
> 标签：matlab

我正在运行以下代码，其中`M`是 ~200,000 × ~200,000 稀疏矩阵和`points`~200,000 × 2 矩阵

```
inds=sub2ind(size(M),points(:,1),points(:,2));
M(inds)=M(inds)+1; 
```

问题是第二行需要很长时间才能运行（15-90 秒）。该操作需要更长的时间，具体取决于有多少索引`inds`是“新的”（即在稀疏矩阵中还没有值）

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T00:45:12.300

这是一个想法：

```
M = M + sparse(points(:,1),points(:,2),1,size(M,1),size(M,2),size(points,1)); 
```

[只是让你知道，](http://www.mathworks.com/help/matlab/ref/sparse.html)

> `S = sparse(i,j,s,m,n,nzmax)`使用向量`i`、`j`和`s`来生成一个 `m`稀疏`n`矩阵，使得`S(i(k),j(k)) = s(k)`，空间分配给`nzmax`非零值。向量`i`、`j`和`s`都是相同的长度。其中任何为零的元素以及和`s`的相应值都将被忽略。任何具有重复值的元素和被加在一起。`i``j``s``i``j`

### 对于好奇：

```
M = sprand(200000,200000,1e-6);
points = [randperm(200000) ; randperm(200000)]'; %'//Initialization over
Mo = M;
tic; 
inds=sub2ind(size(Mo),points(:,1),points(:,2));
Mo(inds) = Mo(inds)+1;
toc
tic; 
M = M + sparse(points(:,1),points(:,2),1,size(M,1),size(M,2),size(points,1));
toc 
```

# python - BFS 图搜索中展开的节点过多

> ID：12765039
> 
> 赞同：0
> 
> 时间：2012-10-07T00:20:11.040
> 
> 标签：python, search, graph, nodes, breadth-first-search

我正在解决一个 AI 课程的问题，我必须使用 Python 中的 BFS 算法实现图形搜索。我的实现实际上找到了解决方案，但它扩展了太多节点。答案说应该扩展 269 个节点，但我得到了 275 个。

为了跟踪访问过的节点，我使用字典。键是展开状态，值是 1。一旦我得到一个节点的后继者，我会检查它们是否存在于字典中。如果是，我就忽略这个继任者。如果没有，我把它推到边缘（队列）。我认为这个过程会阻止扩展已经访问过的节点，但似乎并非如此。

任何人都可以给我一个提示吗？不需要任何代码，因为我想要的只是对可能出现的问题有所了解。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:38:18.187

没有太多信息可以继续，但我怀疑以下是您的问题。将节点添加到边缘队列后，您必须立即将它们添加到访问过的字典中。如果你等到你访问它们（即当它们到达边缘队列的头部时），那么你可能在边缘队列中有两次相同的节点。

也不要忘记将开始节点添加到访问过的字典中。

# file-transfer - 佳能 EDSDK 示例代码 - 帮助了解将文件保存到位置

> ID：12765043
> 
> 赞同：1
> 
> 时间：2012-10-07T00:21:54.827
> 
> 标签：file-transfer, canon-sdk

我是 EDSDK 的新手，但到目前为止对结果非常满意。我的程序可以正常保存到相机，但是当我设置为 saveTo Host 时，我不清楚它认为应该保存到哪里。

一切似乎都奏效了。回调函数被调用，进度条动画，但我不知道它认为它指向文件的位置。

我得到的最接近的是找到发出@“download”命令的位置，这个调用的参数应该被转换为（EdsDirectoryItemRef）

这一切似乎都来自 EDSCALLBACK handleObjectEvent 但我无法弄清楚它是如何构造的。

理想情况下，我希望能够指定我希望图像在磁盘上的位置。有人可以提供一些帮助吗？

[编辑]

好的，我看到图像正在进入构建目录，但也许有人可以帮助我理解原因。或者更好的是如何为自己指定路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:27:24.603

当您设置 saveTo_Host 时，图像将存储在相机的临时内存中。然后，相机触发一个 DirItemRequestTransfer 事件，该事件将调用回调函数“handleObjectEvent”。存储在相机临时内存中的图像引用被传递给回调函数。在 handleObjectEvent 回调函数中，您可能会创建一个文件流并使用 EdsDownload 将文件下载到 PC 上的位置（由文件流指定）。

创建文件流时，您需要指定文件名（第一个参数）。此文件名确定图像的存储位置。如果您只指定没有路径的文件名，则图像将存储在构建目录中。如果您想将文件保存在特定位置，则需要指定文件名及其路径。

希望这可以帮助。

# c# - 在具有 MVP 模式的 Winforms (C#) 中使用 backgroundworker

> ID：12765047
> 
> 赞同：4
> 
> 时间：2012-10-07T00:22:15.687
> 
> 标签：c#, winforms, backgroundworker, mvp

我一直在尝试使用 MVP 模式重构应用程序的意大利面条代码。但现在我正在为此苦苦挣扎：

具有按钮的表单，该按钮调用（后台工作人员的）DoWork 方法，这是一个长操作。我的问题是，如果我将长操作从视图移到 Presenter 中，那么如何将进度更改从此操作发送到视图？BGW也必须在Presenter中？你能给我一个如何做到这一点的样本吗？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:02:07.403

这概述了 BackgroundWorker 的使用：

```
private BackgroundWorker _backgroundWorker;

public void Setup( )
{
    _backgroundWorker = new BackgroundWorker();
    _backgroundWorker.WorkerReportsProgress = true;
    _backgroundWorker.DoWork +=
      new DoWorkEventHandler(BackgroundWorker_DoWork);
    _backgroundWorker.ProgressChanged +=
      new ProgressChangedEventHandler(BackgroundWorker_ProgressChanged);
    _backgroundWorker.RunWorkerCompleted +=
      new RunWorkerCompletedEventHandler(BackgroundWorker_RunWorkerCompleted);

    // Start the BackgroundWorker
    _backgroundWorker.RunWorkerAsync();
}

void BackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // This method runs in a background thread. Do not access the UI here!
    while (work not done) {
        // Do your background work here!

        // Send messages to the UI:
        _backgroundWorker.ReportProgress(percentage_done, user_state);
        // You don't need to calculate the percentage number if you don't
        // need it in BackgroundWorker_ProgressChanged.
    }
    // You can set e.Result = to some result;
}

void BackgroundWorker_ProgressChanged(object sender,
                                      ProgressChangedEventArgs e)
{
    // This method runs in the UI thread and receives messages from the backgroud thread.

    // Report progress using the value e.ProgressPercentage and e.UserState
}

void BackgroundWorker_RunWorkerCompleted(object sender,
                                         RunWorkerCompletedEventArgs e)
{
    // This method runs in the UI thread.
    // Work is finished! You can display the work done by using e.Result
} 
```

* * *

**更新**

这个 BackgroundWorker 必须在原因的演示者中。MVP、MVC 或 MVVM 等模式的想法是从视图中删除尽可能多的代码。视图只有非常特定于视图本身的代码，例如在`Paint`事件处理程序中创建视图或绘图等。视图中的另一种代码是与演示者或控制器通信所必需的代码。然而，呈现逻辑必须在呈现器中。

您将使用`BackgroundWorker_ProgressChanged`在 UI 线程中运行的方法将更改发送到视图。通过调用视图的公共方法或通过设置视图的公共属性或通过将视图的属性或其控件的属性绑定到它来公开视图可以附加的公共属性。（这是从 MVVM 模式借用的。）`INotifyPropertyChanged`如果您决定将视图绑定到演示者的属性，演示者必须实现以通知视图属性已更改。

*注意*：UI 线程以外的其他线程不允许直接与视图交互（如果尝试这样做会引发异常）。因此，BackgroundWorker_DoWork 不能直接与视图交互，因此会调用 ReportProgress，而后者又会在 UI 线程中运行 BackgroundWorker_ProgressChanged。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T09:44:59.843

您可以将 BackGroundWorker 放置在 Presenter 中，并在视图中添加一个方法以显示进度。像这样的东西：

```
//Add a method to your view interface to show progress if you need it.
public interface IView
{
     void ShowProgress(int progressPercentage);
}
//Implement method in the view.
public class MyView : Form, IView
{
    public MyView()
    {
        //Assume you have added a ProgressBar to the form in designer.
        InitializeComponent();
    }

    public void ShowProgress(int progressPercentage)
    {
        //Make it thread safe.

        if (progressBar1.InvokeRequired)
            progressBar1.Invoke(new MethodInvoker(delegate { progressBar1.Value = progressPercentage; }));
        else
            progressBar1.Value = progressPercentage;
    }
}

// In your presenter class create a BackgroundWorker and handle it's do work event and put your time consuming method there.
public class MyPresenter
{
    private BackgroundWorker _bw;

    public MyPresenter()
    {
        _bw = new BackgroundWorker();
        _bw.WorkerReportsProgress = true;
        _bw.DoWork += new DoWorkEventHandler(_bw_DoWork);
    }

    private void _bw_DoWork(object sender, DoWorkEventArgs e)
    {
        //Time consuming operation
        while (!finished)
        {
            //Do the job
            _bw.ReportProgress(jobProgressPercentage);

        }
    }

    public void StartTimeConsumingJob()
    {
        _bw.RunWorkerAsync();
    }
} 
```

完成后不要忘记 Dispose BackgroundWorker。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T18:50:10.663

根据您的意见，我设法解决了这个问题。请评论您使用此方法可能发现的任何缺陷：

*** 查看界面 ***

```
public interface IView
{
   void ShowProgress( int progressPercentage);
} 
```

*** 查看（表格）***

```
public partial class Form1 : Form, IView
    {
        MyPresenter p ;

        public Form1()
        {
            InitializeComponent();
            p = new MyPresenter(this);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (p.IsBusy())
            {
                return;
            }
            p.StartTimeConsumingJob();
        }

        public void ShowProgress(int progressPercentage)
        {
            if (progressBar1.InvokeRequired)
                progressBar1.Invoke(new MethodInvoker(delegate { progressBar1.Value = progressPercentage; }));
            else
                progressBar1.Value = progressPercentage;
        }

        private void button2_Click(object sender, EventArgs e)
        {
            p.Cancel();
        }

    } 
```

*** 主持人 ***

```
public class MyPresenter
{
    private BackgroundWorker _bw;
    private IView _view;

    public MyPresenter(IView Iview)
    {
        _view = Iview;
        _bw = new BackgroundWorker();
        _bw.WorkerReportsProgress = true;
        _bw.WorkerSupportsCancellation = true;
        _bw.DoWork += new DoWorkEventHandler(_bw_DoWork);
        _bw.ProgressChanged += new ProgressChangedEventHandler(_bw_ProgressChanged);
        _bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(_bw_Completed);
    }

    public void StartTimeConsumingJob()
    {
        _bw.RunWorkerAsync();
    }

    private void _bw_DoWork(object sender, DoWorkEventArgs e)
    {
        //Time consuming operation Do the job
        Thread.Sleep(1000);
        _bw.ReportProgress(50);
        Thread.Sleep(2000);
        if(_bw.CancellationPending)
        {
            e.Result = false;
        }
    }

    public bool IsBusy()
    {
        return _bw.IsBusy;
    }

    public void Cancel()
    {
        _bw.CancelAsync();
    }

    private void _bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        _view.ShowProgress(e.ProgressPercentage);
    }

    private void _bw_Completed(object sender, RunWorkerCompletedEventArgs e)
    {
        if((bool)e.Result)
        _view.ShowProgress(100);
        else
            _view.ShowProgress(0);

        _bw.Dispose();
    }
} 
```

# android - 如何（即，什么意图操作）启动电子邮件应用程序的设置电子邮件帐户活动（添加新电子邮件帐户活动）

> ID：12765048
> 
> 赞同：0
> 
> 时间：2012-10-07T00:22:18.543
> 
> 标签：android, android-intent, action

在我的应用程序中，我想开始设置电子邮件应用程序的新电子邮件帐户活动，如下所示：http: [//i.stack.imgur.com/BNYnj.png](http://i.stack.imgur.com/BNYnj.png)

我看过这个[http://source-android.frandroid.com/packages/apps/Email/AndroidManifest.xml](http://source-android.frandroid.com/packages/apps/Email/AndroidManifest.xml)

并尝试开始设置电子邮件活动：

```
Intent intent = new Intent("com.android.email.CREATE_ACCOUNT");
startActivity(intent); 
```

但是我遇到了一个异常： E/AndroidRuntime(517): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.email.CREATE_ACCOUNT }

有人请帮帮我吗？

非常感谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:40:25.720

This works for from APIs 4.0+.

```
Intent intent = new Intent("com.android.email.CREATE_ACCOUNT");
intent.putExtra("FLOW_MODE", 0);
startActivity(intent); 
```

Below works for from APIs 2.1+. Maybe also work for lower versions (not tested).

```
Intent intent = new Intent();
intent.setClassName("com.android.email", "com.android.email.activity.setup.AccountSetupBasics");
intent.putExtra("FLOW_MODE", 0);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:51:33.387

您可以尝试使用明确的意图。代替

```
new Intent("com.android.email.CREATE_ACCOUNT") 
```

利用

```
new Intent(context, com.android.email.activity.setup.AccountSetupBasics.class) 
```

您可能还想查看整个[ACTION_ADD_ACCOUNT](http://developer.android.com/reference/android/provider/Settings.html#ACTION_ADD_ACCOUNT)操作字符串。它可以做你正在寻找的东西，而无需使用特定的应用程序。例如，当 oem 安装与库存 android 不同的电子邮件应用程序时。如果发生这种情况，将没有任何东西可以处理显式或隐式意图。

# php - phpfox - Phpfox::getParam() 做什么？

> ID：12765055
> 
> 赞同：-1
> 
> 时间：2012-10-07T00:23:34.397
> 
> 标签：php, phpfox

我已经通过电子邮件发送了 phpfox，他们正在花时间回邮件，我只是想知道 getParam() 是做什么的？而且它似乎得到了设置，例如 Phpfox::getParam('user.approve_users') 设置在哪里？我在任何地方都找不到它们

谢谢你的帮助

:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T00:51:03.777

你熟悉 API（和 google.com）吗？

你的答案在那里：

[http://www.phpfox.com/phpapi/Phpfox/Phpfox_Setting.html](http://www.phpfox.com/phpapi/Phpfox/Phpfox_Setting.html)

> getParam（第 331 行）
> 获取设置及其值。return：返回设置的值，可以是 STRING、ARRAY、BOOL 或 INT。

只需阅读 API

# android - 获取数据 -sqlite 和 android

> ID：12765063
> 
> 赞同：0
> 
> 时间：2012-10-07T00:25:42.353
> 
> 标签：android, sqlite

当我写

```
 Cursor c = customersDB.rawQuery("SELECT Name, Street, Block, City  FROM "    +
                            TABLE_NAME +
                            " where Name == 'VOLKSWAGEN '", null); 
```

它的工作goog。

但：

```
String x="ll";

                     Cursor c = customersDB.rawQuery("SELECT Name, Street, Block, City  FROM "    +
                            TABLE_NAME +
                            " where Name == "+x, null); 
```

犯错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:41:29.163

您需要将变量用单引号括起来并以分号结尾。我的建议是使用 string.format 所以你的查询字符串看起来像

```
String.format("SELECT Name, Street, Block, City FROM %1$s WHERE Name == '%2$s';", TABLE_NAME, x) 
```

另一种方法是`"SELECT Name, Street, Block, City FROM " + TABLE_NAME + "where Name == '" + x + "';", null);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:51:55.040

如果可能，您应该始终使用参数：

```
String x="ll";
Cursor c = customersDB.rawQuery(
              "SELECT Name, Street, Block, City FROM " + TABLE_NAME +
              " WHERE Name == ?",
              new String[]{ x }); 
```

这避免了格式化问题和[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

# vb.net - 按两个属性排序列表，ParentID 和 ChildID

> ID：12765068
> 
> 赞同：0
> 
> 时间：2012-10-07T00:26:36.207
> 
> 标签：vb.net, list

我有一个具有 3 个属性的类：名称、ID 和 ParentID。

我的数据：

```
 Name       ID     ParentID
        Event A    1      1
        Event B    2      1
        Event C    3      1
        Event D    4      2 
```

我将所有内容都放在 List 中，并尝试使用 OrderBy 或 Sort 方法。不确定哪个会更好。

我需要对列表中的数据进行排序，以便事件将其子项作为列表中的下一项。对此的任何帮助将不胜感激，顺便说一句，我在 VB 中这样做。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:33:44.080

您可以像这样对列表进行排序

```
list.Sort(Function(x, y) 2 * x.ParentID.CompareTo(y.ParentID) + _
                         x.ChildID.CompareTo(y.ChildID)) 
```

说明：我在这里使用 lambda 表达式。您可以将其视为一种函数的内联声明。`CompareTo`返回`-1`,`0`或`+1`. 负数表示`x`小于`y`，`0`两者相等且`+1`均值`x`大于`y`。通过将第一个比较乘以 2，其符号优先于第二个比较。第二个只有一个效果，如果第一个返回`0`。

与 LINQ相比，使用列表`Sort`方法的优点是列表是就地排序的。使用 LINQ，您必须创建一个新列表。

# uml - 在 UML 2 序列图中绘制链式成员函数的正确方法是什么？

> ID：12765070
> 
> 赞同：0
> 
> 时间：2012-10-07T00:26:41.940
> 
> 标签：uml, sequence-diagram

通常，序列图上的调用采用以下形式

```
function(parameters); 
```

我如何绘制这样的链式函数调用图？：

```
stdList.front().pack(parameters); 
```

front() 返回一个不同类的对象，所以这有点像写......

```
StdList stdList;
SomeClass a& = stdList.front();
a.pack(parameters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:28:05.700

好像是自叫。让方法调用循环回调用它的实例。

# c# - ServiceStack.Text.JsonSerializer.DeserializeFromString () 如果字符串包含 \n 则无法反序列化

> ID：12765072
> 
> 赞同：1
> 
> 时间：2012-10-07T00:27:25.947
> 
> 标签：c#, .net, json, deserialization, servicestack

试： `T obj = JsonSerializer.DeserializeFromString<T>(jsonData);`

在整个有几个`\n`' 的字符串上。JayRock 的库成功反序列化如下： `T obj = (T)JsonConvert.Import(typeof(T), jsonData);`

这是一个错误，还是我需要手动删除换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:04:30.263

我遇到的问题不是 \n，而是我的 DTO 上缺少公共属性。

RE：[ServiceStack.Text 可以将 JSON 反序列化为自定义泛型类型吗？](https://stackoverflow.com/questions/12771101/can-servicestack-text-deserialize-json-to-a-custom-generic-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:25:23.170

调试器预览弹出窗口将实际换行符显示为 \n，以便预览保持单行。文本可视化器正确显示换行符。

这对我来说意味着 JSON 本身已损坏，因为换行符***应该***用`\n`.

字符串中的换行符在 Javascript 中是非法的，因此在 JSON 中也是如此。

*如果问题没有发生这种情况*：nuget 版本于 10 月 1 日发布，但是 10 月 3 日在 github 中有一个提交，并附有评论“希望一劳永逸地修复空白问题”。值得尝试。

# php - 检查要呈现的时间戳是否为 3 小时 - php

> ID：12765074
> 
> 赞同：-3
> 
> 时间：2012-10-07T00:28:04.593
> 
> 标签：php

> **可能重复：**
> [检查时间戳是否为 x 小时？](https://stackoverflow.com/questions/8771981/check-if-timestamp-is-x-hours-old)

在 PHP 中，如何确定从`timestamp`（格式为`2012-08-06 18:22:02`）到当前时间是否已经 3 小时或更长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T00:31:26.257

```
if (time() > (strtotime($timeToCheck) + 10800)) 
```

# jquery - 为什么这不输出我的选择？

> ID：12765080
> 
> 赞同：0
> 
> 时间：2012-10-07T00:29:42.493
> 
> 标签：jquery

单选按钮具有将添加并显示在 div 中的数值：`sub-total-t`

# JS

```
$(document).ready(function() {
  $('label').click(function() {
    var total = 0;
    $('.option:checked').each(function() {
      total += parseFloat($(this).data('number'))   
    });
    $('.sub-total-t').html('$' + total.toFixed(2));
  });
}); 
```

# HTML

```
<label><input type="radio" name="print" class="option" data-number="25" value="p10"/> Starter 500 </label>
<div id="sub-pricing">
<h3> Sub-Total </h3>
<div class="sub-total-t">$</div>
</div> 
```

为什么这不显示我的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:36:01.903

对我来说工作得很好。只需稍加修改即可使用您的代码。见[演示](http://jsfiddle.net/kaidul/fGgJS/)

# ajax - 是否可以使用 MVC4 创建纯 ajax 应用程序？

> ID：12765081
> 
> 赞同：0
> 
> 时间：2012-10-07T00:30:05.427
> 
> 标签：ajax, asp.net-mvc

我听说可以使用 Web 服务创建带有 ASP.NET Web 表单的纯 ajax 应用程序。MVC4 怎么样？无论如何我可以用 MVC4 创建一个纯 ajax 应用程序吗？如果是这样，我应该如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:38:05.310

我认为您正在寻找的是位于 MVC4 之上的 ASP.Net 单页应用程序 (SPA)。查看[www.asp.net/single-page-application](http://www.asp.net/single-page-application)了解细节。

# jquery - textarea 占用太多高度

> ID：12765082
> 
> 赞同：0
> 
> 时间：2012-10-07T00:30:12.987
> 
> 标签：jquery, html, css, textarea

我的 HTML 只是正文中的一个文本区域。

我的 JavaScript（带有 jquery）是：

```
$(function()
{
    $("body").height($(window).height())
}) 
```

我的 CSS 是：

```
textarea
{
    width: 100%;
    height: 100%;
    resize: none;
    background-color: red;
    border: none;
    padding: 0;
}
textarea:focus
{
    outline: none;
}
body
{
    background-color: #DBDBDB;
    margin: 0;
} 
```

谁能告诉我为什么有一个滚动条（文本区域不够小，无法适应窗口的高度）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:06:50.103

It was because of the **line-height** property of the body.. Set it to 0..

```
body
{
    line-height: 0;
} 
```

If you do not want to do this you can set the textarea `height:99%;` instead

[Check FIDDLE](http://jsfiddle.net/RVWvY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:08:24.867

Though it is not the best solution, I have just applied a little trick and it's working for all sizes of monitors!

```
 $(function()
{
    var height = $(window).height() -5;
    var width = $(window).width() - 5;
    $('#someId').css('height', height);
    $('#someId').css('width', width);
}); 
```

CSS:

```
 textarea
    {
        resize: none;
        background-color: red;
        border: none;
        padding: 0;
        margin: 0;
        outline: none;
    }
    textarea:focus
    {
        outline: none;
    }
    body
    {
        background-color: #DBDBDB;
        margin: 0;
    }​ 
```

See the [demo](http://jsfiddle.net/kaidul/6t9LP/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T00:40:01.267

您看到滚动条的原因是 textarea 仍然有边距。要解决此问题，请将 textarea 的边距设置为 0。

修改后的 CSS：

```
textarea
{
    width: 100%;
    height: 100%;
    resize: none;
    background-color: red;
    border: none;
    padding: 0;
    margin: 0;
}
textarea:focus
{
    outline: none;
}
body
{
    background-color: #DBDBDB;
    margin: 0;
} 
```

编辑：

上面的代码适用于不对元素进行“独特”更改的浏览器。Chrome 显然以某种方式增加了额外的高度。要专门为 Chrome 解决此问题，您必须为元素添加负边距（例如：边距：-2px 0）。此外，我的建议是仅在 Chrome 是浏览器时添加负边距（搜索如何执行此操作）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-07T01:01:49.040

如果您在页面上只有一个文本区域，请为 body 和 html 标签设置 hight

CSS：

```
html,body{ height:100%} 
```

演示：http: [//jsfiddle.net/SWLsH/1](http://jsfiddle.net/SWLsH/1)

编辑： 100% 的 textarea 高度不考虑导致正文滚动条的边框。使高度 99%

# r - R 数据颜色中的主成分分析

> ID：12765083
> 
> 赞同：6
> 
> 时间：2012-10-07T00:30:14.190
> 
> 标签：r, ggbiplot

大家好，我有一个简单的问题，但我无法在任何教程中得到答案。我对一组数据进行了简单的主成分分析，然后用双图绘制我的数据。

```
CP <- prcomp(dat, scale. = T)
summary(CP)

biplot(CP) 
```

有了这个，我就第一个和第二个组件得到了我的数据的散点图。我希望按颜色分隔我的数据，指示 R 将我的前 20 个数据绘制为红色，将接下来的 20 个数据绘制为蓝色。我不知道如何告诉 R 为这两组数据着色。任何帮助将不胜感激。谢谢！（我对 R 很陌生）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T05:01:57.650

**免责声明：**这不是一个直接的答案，但可以调整以获得所需的输出。

```
library(ggbiplot)
data(wine)
wine.pca <- prcomp(wine, scale. = TRUE)
print(ggbiplot(wine.pca, obs.scale = 1, var.scale = 1, groups = wine.class, ellipse = TRUE, circle = TRUE)) 
```

![在此处输入图像描述](../Images/992b588237ff23a8df319018520556ba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:43:51.587

使用`plot()`将为您提供更大的灵活性 - 您可以单独使用它或与`text()`文本标签一起使用，如下所示（感谢@flodel 提供有用的评论）：

```
col = rep(c("red","blue"),each=20)
plot(CP$x[,1], CP$x[,2], pch="", main = "Your Plot Title", xlab = "PC 1", ylab = "PC 2")
text(CP$x[,1], CP$x[,2], labels=rownames(CP$x), col = col) 
```

但是，如果您想使用`biplot()`此代码：

```
biplot(CP$x[1:20,], CP$x[21:40,], col=c("red","blue")) 
```

# haskell - 不同 Num 类型的不等式

> ID：12765093
> 
> 赞同：1
> 
> 时间：2012-10-07T00:32:39.837
> 
> 标签：haskell

如何让下面的代码用于比较不同的数字类型？

```
foo::(Num a) => (Num b) => a -> b -> Bool
foo a b = (a == b) 
```

我从上下文 (Num a, Num b) 中推断出 (a ~ b) 时出错

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T00:57:19.793

首先，您的类型签名在语法上是错误的（根据我对报告中[的上下文无关语法](http://www.haskell.org/onlinereport/haskell2010/haskellch10.html#x17-18000010.5)的阅读，尽管 GHC 接受它），它应该是

```
foo::(Num a, Num b) => a -> b -> Bool 
```

关于这个问题，你不能这样做，`(<)`有 type `Ord a => a -> a -> Bool`，所以两个参数必须具有相同的类型。

有了比 just 更强的限制`Num`，例如，您可以拥有

```
bar :: (Real a, Real b) => a -> b -> Bool
bar a b = toRational a < toRational b 
```

您需要能够将两个参数转换为相同的目标类型（通过有意义的转换）来比较这些值。对于类中的`Real`类型，`toRational`提供到公共目标类型的这种转换（如果起始类型是浮点类型，则警告`toRational`不适用于 NaN 和无穷大）。对于约束`toInteger`将达到相同的效果。`Integral`

只有一个`Num`约束，没有这样的通用目标类型可用。

对于您的特殊需要，您可以选择一个目标类型并定义一个

```
class Convertible a where
    toTarget :: a -> Target 
```

如果`Real`或`Integral`不是可行的约束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T00:57:41.393

这应该是不可能的——因为不是每个都`Num`可以比较——说你甚至有

```
foo :: Num a => a -> b -> Bool
foo x y = x < y 
```

然后将它用于复数`<`你会使用什么概念？字典顺序是一种选择，但不清楚它是否有意义。

如果你有两种不同的数字类型，我反过来问你：“你会如何比较复数和实数？或者小时，可以`Num`通过使用模计算来作为一个实例，与分钟？”

如果您用作`Real a`约束，您将拥有该`toRational`功能 - 一种解决可比性问题的方法。

```
foo :: (Real a, Real b) => a -> b -> Bool
foo x y = x' < y'
        where x' = toRational x
              y' = toRational y 
```

# spring - 如何使用 Hibernate Web 应用程序编写 Spring？

> ID：12765095
> 
> 赞同：1
> 
> 时间：2012-10-07T00:32:45.663
> 
> 标签：spring, hibernate

我正在开发 Web 应用程序，其中我有 90 个字段用于 Person 类，分为家庭详细信息、教育详细信息、个人详细信息等......

我想为每个人提供单独的表格，例如家庭详细信息有父亲姓名，母亲姓名兄弟姐妹等......其他字段等等

我希望每个详细信息都有单独的表格，所有表格都有共同的参考 ID

我的问题是我应该写多少个 bean 类？我可以从多个表单映射到多个表吗？

```
class PersonRegister{
  private Long iD;
  private String emailID;
  private String password;
   .
    .

     }//for register....... 
```

登录后，我需要维护他/她的详细信息

任何一个

```
class person{
} 
```

或者

```
class PersonFamilyDetails{}
class PersonEducationDetails{} 
etc 
```

软件开发标准指定以哪种方式创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:40:09.200

您的问题归结为数据库规范化，正如 Boyce 和 Codd 深入描述的那样，请参阅 [http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)。

数据库规范化的主要优点是避免修改异常。在您的情况下，如果您为每个人准备一张表，例如， **father-firstname**和**father-lastname**，并且您有多个具有相同父亲的人，则此数据将重复，并且当您发现father-lastname 中的拼写错误时，您可以为一个兄弟姐妹修改它，而不是为下一个兄弟姐妹修改它。

在这个简化的情况下，数据库设计最佳实践将要求第一次规范化为一个单独的表，其中包含**parent-id**、**father-firstname**和**Father-lastname**，并且您的**person**表与其具有一对多关系。

对于一对一的关系，例如**person** -> **personeducationdetails**，存在一些争论。在第一范式的原始定义中，每个可选字段都将通过放置它自己的表格来规范化。后来通过在关系数据库中引入“null”来削弱这一点，请参见[http://en.wikipedia.org/wiki/First_normal_form#cite_note-CoddRule-12](http://en.wikipedia.org/wiki/First_normal_form#cite_note-CoddRule-12)。但是，如果一整套列可能同时为空，您可以将它们放在具有一对一关系的单独表中。

例如，如果您不知道某个人的educationdetails，则其所有相关字段均为空，因此您最好将它们拆分到单独的表中，并且根本没有该**人的****personeducationdetails**记录。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:42:18.427

不要过分，我相信在你的情况下，从维护的角度来看，单个但非常*宽*（即有很多列）的表将是最有效和最简单的。唯一要记住的是，在加载大量行时，只查询必要的列/字段子集。否则，您将获取数千字节的不必要数据，特定用例不需要这些数据。

不幸的是，Hibernate 没有直接支持，在为 设计映射时`Person`，你最终会得到巨大的类，甚至更糟——Hibernate 总是会获取所有简单的列（以及多对一关系）。但是，您可以通过在仅包含列子集的数据库中创建多个视图或将多个 Java 类映射到同一个表但仅映射到列子集来克服此问题。

仅当您的模式未规范化时，将您的数据库模型拆分为多个表才是有益的。例如，当存储兄弟姐妹的名字和姓氏时，您可能希望有一个单独的`Sibling`表，并且下次输入其他家庭成员时，您可以*重复使用*同一行。这使得数据库更小，并且在按兄弟搜索时可能更快。**

# c# - 服务器端数据库写入的最佳策略

> ID：12765096
> 
> 赞同：1
> 
> 时间：2012-10-07T00:33:06.007
> 
> 标签：c#, mysql

我有一台服务器，它为连接到它的客户端对数据库进行多次写入。与它的联系越多，它的写作就越多。我的问题是..我怎样才能最优雅地处理这个？随着数据库变得越来越大，插入/更新花费的时间越来越长，这反过来又落后于客户端，因为来自服务器的响应越来越慢。

我想到的一件事是拥有一个 DB Helper 程序，我将其写入 QUEUE 数据库，并作为一个单独的应用程序，它将在分配时写入。这将使服务器更加专注，但我不确定这是否是最佳路线。

任何帮助都会很棒。

```
<Debug> -- 10/6/2012 8:57:15 PM -- UPDATE mapdata SET X = @1, Y = @2, Rank = @3, Health = @4, Beacons = @20,Armors = @5, Duals = @6, Missiles = @7, Homings = @8, Radars = @9, HasRankKill = @10, TotalPP = @11, RankPP = @12, KillCount = @13, DeathCount = @14, TimePlayed = @15, EnabledEquipment = @16 WHERE MapID = @17 AND TankID = @18 AND Color = @19;
<Debug> -- 10/6/2012 8:57:15 PM -- Time to execute: 00:00:00.0468003 
```

这需要半秒钟才能执行。

我在 MapData 上有如下索引：

```
PRIMARY: MapID, TankID, Color
MapID: MapID
TankID: TankID

'MapData', 'CREATE TABLE `mapdata` (\n  `MapID` int(11) NOT NULL,\n  `TankID` int(11) NOT NULL,\n  `Color` tinyint(4) NOT NULL,\n  `X` int(11) DEFAULT \'-1\',\n  `Y` int(11) DEFAULT \'-1\',\n  `Rank` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Health` int(11) NOT NULL DEFAULT \'1200\',\n  `Armors` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Duals` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Missiles` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Homings` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Radars` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Beacons` tinyint(4) NOT NULL DEFAULT \'0\',\n  `HasRankKill` bit(1) NOT NULL DEFAULT b\'0\',\n  `TotalPP` bigint(20) NOT NULL DEFAULT \'0\',\n  `RankPP` bigint(20) NOT NULL DEFAULT \'0\',\n  `KillCount` int(11) NOT NULL DEFAULT \'0\',\n  `DeathCount` int(11) NOT NULL DEFAULT \'0\',\n  `TimePlayed` time NOT NULL DEFAULT \'00:00:00\',\n  `EnabledEquipment` tinyint(4) NOT NULL DEFAULT \'0\',\n  `Prestige` tinyint(4) NOT NULL DEFAULT \'0\',\n  PRIMARY KEY (`MapID`,`TankID`,`Color`),\n  KEY `MapID` (`MapID`),\n  KEY `TankID` (`TankID`),\n  CONSTRAINT `mapdata_ibfk_1` FOREIGN KEY (`MapID`) REFERENCES `maps` (`ID`) ON DELETE CASCADE,\n  CONSTRAINT `mapdata_ibfk_2` FOREIGN KEY (`TankID`) REFERENCES `tank` (`ID`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=latin1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:55:28.437

防止服务器陷入困境的典型方法是使用多线程。这允许服务器在线程处理数据库更新时继续响应传入的请求。我不确定 mysql 是否是线程安全的，因此您可能必须在数据库周围实现锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T20:44:12.970

我为多人游戏所做的方法是在线程上生成一个 DBManager。

DBManager 将是一个单例类，带有一个名为 lock 的静态对象

这有一个公共方法“Enqueue”，它将采用原始 SQL 或特定游戏对象保存到数据库（在这种情况下为坦克）

当您进入 enqueue 时，您在上面的锁定对象上调用 Lock，并将需要保存到 DB 的项目列表排入队列并返回，以便应用程序可以继续。

The thread would wake up every 30 seconds or so, process the queue and then go back to sleep.

The down side to this method is that you will have a potential for data loss, so you can lose the sleep/wake cycle to reduce the risk but obviously thats a bit more data/processor intensive.

# ruby - Ruby Regex 与 Rubular 不同

> ID：12765097
> 
> 赞同：3
> 
> 时间：2012-10-07T00:33:20.663
> 
> 标签：ruby, regex, rubular

我在 Rubular.com 和我的带有 Ruby 1.9.2 的 VM Linux 上尝试相同的超级简单正则表达式我不知道为什么我得到不同的输出：VM：

```
my_str = "Madam Anita"
puts my_str[/\w/] 
```

这个输出：女士

在 Rubular 上它输出：MadamAnita Rubular： [http ://www.rubular.com/r/qyQipItdes](http://www.rubular.com/r/qyQipItdes)

我很想得到一些帮助。我卡在这里。我将无法为 hw1 测试我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T00:39:19.580

不，它不是真的。它匹配“女士”和“安妮塔”中的所有字符，但不匹配空格。您遇到的问题是`my_str[/\w/]`仅返回给定正则表达式的单个匹配项，而 Rubular 突出显示所有可能的匹配项。

如果您需要所有事件，您可以这样做：

```
1.9.3p194 :002 > "Madam Anita".scan(/\w+/)
 => ["Madam", "", "Anita", ""] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T00:40:06.250

实际上，`\w`匹配*单个字符*。Rubular 中的结果包含相邻字符之间的空格来告诉您这一点（尽管我希望它们也能使突出显示更明显......）。与匹配的输出进行比较[`\w+`](http://www.rubular.com/r/rZ8Bdfj3xp)，匹配两个字符串 (`Madam`和`Anita`)。

# rest - Ext JS rest 代理在保存模型实例时出错

> ID：12765100
> 
> 赞同：0
> 
> 时间：2012-10-07T00:33:50.647
> 
> 标签：rest, extjs, model, proxy

[我只是从http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Rest](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Rest.Here)尝试一些示例。代码如下：

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: ['id', 'name', 'email'],

    proxy: {
        type: 'rest',
        url : '/users'
    }
});

var user = Ext.create('User', {name: 'Ed Spencer', email: 'ed@sencha.com'});

user.save(); //POST /users 
```

当我创建一个新的 User 实例并调用 save 方法时，我收到此错误：

未捕获 无法解析服务器返回的 JSON：您正在尝试解码无效的 JSON 字符串：

这里是来自 chrome web 开发者控制台的完整错误警告：

```
Uncaught Unable to parse the JSON returned by the server: You're trying to decode an invalid JSON String: <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
 <head>
  <title>Index of /users</title>
 </head>
 <body>
<h1>Index of /users</h1>
<table><tr><th><img src="/icons/blank.gif" alt="[ICO]"></th><th><a href="?C=N;O=D">Name</a></th><th><a href="?C=M;O=A">Last modified</a></th><th><a href="?C=S;O=A">Size</a></th><th><a href="?C=D;O=A">Description</a></th></tr><tr><th colspan="5"><hr></th></tr>
<tr><td valign="top"><img src="/icons/back.gif" alt="[DIR]"></td><td><a href="/">Parent Directory</a>       </td><td>&nbsp;</td><td align="right">  - </td><td>&nbsp;</td></tr>
<tr><th colspan="5"><hr></th></tr>
</table>
<address>Apache/2.2.14 (Win32) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l mod_autoindex_color PHP/5.3.1 mod_apreq2-20090110/2.7.1 mod_perl/2.0.4 Perl/v5.10.1 Server at localhost Port 80</address>
</body></html> 
```

# mysql - 在一个查询中从具有公共列的多个表中删除？

> ID：12765102
> 
> 赞同：0
> 
> 时间：2012-10-07T00:34:44.243
> 
> 标签：mysql, join, sql-delete, micro-optimization

微优化我知道，这更多是因为我好奇。

我有两个链接表，

```
blog_categories_posts => post_id, category_id  
blog_tags_posts       => post_id, tag_id 
```

我根据以下内容从两个表中删除所有链接`post_id`：

```
DELETE FROM blog_categories_posts WHERE post_id = {$id};
DELETE FROM blog_tags_posts WHERE post_id = {$id}; 
```

无论如何，我想知道是否可以同时从两个表中删除，以及它是否会是性能（虽然是微的）命中或增益？

我想如果它起作用：

```
DELETE FROM blog_categories_posts, blog_tags_posts where post_id = {$id} 
```

或类似的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T15:45:28.420

语法在mysql网站上：[删除语法](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

```
DELETE FROM tbl1, tbl2
USING tbl1
JOIN tb2 USING (id)
WHERE id = :id 
```

因此，对于您的示例，它将是：

```
DELETE FROM blog_categories_posts, blog_tags_posts
USING blog_categories_posts
JOIN blog_tags_posts USING (post_id)
WHERE post_id = $id 
```

添加许多表也很容易：

```
DELETE FROM tbl1, tbl2, tbl3, tbl4, tbl5
USING tbl1
JOIN tb2 USING (id)
JOIN tb3 USING (id)
JOIN tb4 USING (id)
JOIN tb5 USING (id)
WHERE id = :id 
```

# c++ - 如何使用 Boost.Process 0.5 运行命令行/终端实用程序？

> ID：12765110
> 
> 赞同：3
> 
> 时间：2012-10-07T00:36:23.843
> 
> 标签：c++, boost, process

我发现有一个新的[Boost.Process 0.5](http://www.highscore.de/boost/process0.5/)但我看不到如何在 Windows Linux 和 Mac`ping`或`echo`.

我用简单的方法让它至少在 Windows 上工作：

```
#include <string>
#include <iostream>
#include <boost/asio.hpp>
#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/iostreams/stream.hpp>
#include <boost/process.hpp>
#include <boost/filesystem/path.hpp>
#include <boost/system/error_code.hpp>

namespace bp = boost::process;
namespace bpi = boost::process::initializers;
namespace bio = boost::iostreams;
int main()
{
    bp::pipe p = bp::create_pipe();
    {
        bio::file_descriptor_sink sink(p.sink, bio::close_handle);
        boost::filesystem::path p("C:/Windows/System32/cmd.exe");
        boost::system::error_code ec;
        bp::execute(
            bpi::run_exe(p),
            bpi::set_cmd_line(L"cmd /c echo --echo-stderr hello"),
            bpi::bind_stdout(sink),
            bpi::set_on_error(ec)
            );
    }

    bio::file_descriptor_source source(p.source, bio::close_handle);
    bio::stream<bio::file_descriptor_source> is(source);

    std::string s;
    is >> s;
    std::cout << s << std::endl;
    std::cin.get();
    return 0;
} 
```

在 Windows 上这可以正常工作，但是如何让它跨平台也可以在 Mac 和 Linux 上工作？（我很愚蠢，不知道如何编写一条适用于任何 Unix 终端（或至少适用于 Linux Bash 和 mac 默认终端）的路径）所以如何在 Windows 和 Unix 上使用 Boost.Process 0.5 运行命令行/终端实用程序像操作系统（最好不要每次都写到终端的路径，而只是写像`echo`or`ping`和它的参数的应用程序）？

...在prevoius版本中找到相关代码：

```
 std::string exe; 
    std::vector<std::string> args; 

#if defined(BOOST_POSIX_API) 
    exe = "/bin/sh"; 
    args.push_back("sh"); 
    args.push_back("-c"); 
    args.push_back(command); 
#elif defined(BOOST_WINDOWS_API) 
    char sysdir[MAX_PATH]; 
    UINT size = ::GetSystemDirectoryA(sysdir, sizeof(sysdir)); 
    if (!size) 
        boost::throw_exception(boost::system::system_error(boost::system::error_code(::GetLastError(), boost::system::get_system_category()), "boost::process::launch_shell: GetWindowsDirectory failed")); 
    BOOST_ASSERT(size < MAX_PATH); 

    exe = std::string(sysdir) + (sysdir[size - 1] != '\\' ? "\\cmd.exe" : "cmd.exe"); 
    args.push_back("cmd"); 
    args.push_back("/c"); 
    args.push_back(command); 
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:25:01.697

在 boost.process 0.5 下`shell_path()`引入了 API，因此以下内容可能会让您着迷

```
#if defined(BOOST_POSIX_API) 
    #define SHELL_COMMAND_PREFIX "-c"
#elif defined(BOOST_WINDOWS_API) 
    #define SHELL_COMMAND_PREFIX "/c"
#endif

filesystem::path shellPath = process::shell_path();
std::string cl = shell_path().string() + " " SHELL_COMMAND_PREFIX " ";
cl += "ping 127.0.0.1";
execute(  
        set_cmd_line(cl),
        throw_on_error()
); 
```

如果你真的想隐藏#ifdef，我会继续编辑提升源以返回相关的命令前缀（添加新的 API），毕竟开源不是吗？:)。您可以在 boost/process/windows/shell_path.hpp 和 boost/process/posix/shell_path.hpp 找到要编辑的相关资源

# ruby-on-rails - 如何重构 create_unique 方法中的复杂逻辑？

> ID：12765113
> 
> 赞同：0
> 
> 时间：2012-10-07T00:37:35.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring

我想简化这个复杂的逻辑来创建唯一的 Track 对象。

```
def self.create_unique(p)
  f = Track.find :first, :conditions => ['user_id = ? AND target_id = ? AND target_type = ?', p[:user_id], p[:target_id], p[:target_type]]
  x = ((p[:target_type] == 'User') and (p[:user_id] == p[:target_id]))
  Track.create(p) if (!f and !x)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:46:26.803

这是用一些简单的提取方法重写的：

```
def self.create_unique(attributes)
  return if exists_for_user_and_target?(attributes)
  return if user_is_target?(attributes)

  create(attributes)
end

def self.exists_for_user_and_target?(attributes)
  exists?(attributes.slice(:user_id, :target_id, :target_type))
end

def self.user_is_target?(attributes)
  attributes[:target_type] == 'User' && attributes[:user_id] == attributes[:target_id]
end 
```

这次重写显示了我对帮助解释意图的小型描述性方法的偏好。我也喜欢在像这样的情况下使用保护子句`create_unique`；最后一行 ( ) 揭示了幸福的道路`create(attributes)`，但守卫清楚地描述了例外情况。我相信我使用`exists?`in`exists_for_user_and_target?`可以很好地替代`find :first`，尽管它假设 Rails 3。

您也可以考虑使用唯一性主动模型验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T05:25:40.663

```
@@keys = [:user_id, :target_id, :target_type]
def self.create_unique(p)
  return if Track.find :first, :conditions => [
    @@keys.map{|k| "#{k} = ?"}.join(" and "),
    *@@keys.map{|k| p[k]}
  ]
  return if p[@@keys[0]] == p[@@keys[1]]
  return if p[@@keys[2]] == "User"
  Track.create(p)
end 
```

# android - 以编程方式更改启动器活动

> ID：12765118
> 
> 赞同：14
> 
> 时间：2012-10-07T00:38:24.323
> 
> 标签：android, android-activity, launcher

有没有办法可以更改应用程序启动时启动的活动？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-07T01:16:06.163

我建议在清单中始终指定一个辅助活动作为启动器活动。然后，在该活动的 onCreate 中，您可以做任何需要决定启动哪个应用程序然后完成辅助活动的决定。例子：

在您的清单（启动器活动）中：

```
<activity android:name=".HelperActivity" ... /> 
```

然后，在 HelperActivity 的 onCreate 中：

```
@Override
public void onCreate(Bundle b){
    super.onCreate();
    //determine what activity you want
    startActivity(new Intent(this, NewActivity.class);
    finish();
} 
```

# python - 可以从opencv中的视频文件中删除帧

> ID：12765123
> 
> 赞同：0
> 
> 时间：2012-10-07T00:39:44.053
> 
> 标签：python, opencv

我可以使用 .opencv 2 打开视频并使用`cv2.VideoCapture(myvideo)`. 但是有没有办法使用opencv 2删除该视频中的一帧？删除必须就地发生，也就是说，由于删除的帧，正在播放的文件将以更短的时间结束。简单地将矩阵归零是不够的。

例如：

```
video = cv2.VideoCapture(myvideo.flv)

while True:
    img = video.read()

    # Show the image
    cv2.imgshow(img)

    # Then go delete it and proceed to next frame, but is this possible?
    # delete(img)?? 
```

因此，上述代码在技术上将在末尾包含 0 个字节，因为它读取然后删除视频文件中的帧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:44:28.617

OpenCV 不是这项工作的正确工具。为此，您需要一个媒体处理框架，例如 ffmpeg (=libavformat/libavcodec/libswscale) 或 GS​​treamer。

此外，根据所使用的编码方案，可能无法仅删除单个帧。只有在仅由*帧内*帧（I 帧）组成的视频中，才能进行帧精确编辑。如果视频在所谓*的图片组*(GOP) 中进行编码，则删除单个帧需要重新编码它所属的整个 GOP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:49:48.107

**您不能就地执行此操作**，但您可以使用 OpenCV 的[VideoWriter](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=videocapture#videowriter)在新视频文件中写入所需的帧。

# mysql - 将日期与不能在 mysql 中立即连接的表进行比较

> ID：12765134
> 
> 赞同：1
> 
> 时间：2012-10-07T00:42:42.563
> 
> 标签：mysql, join

这很可能是一个简单的问题，但我不知道如何解决它。

在这种情况下，我有三个表。事件、广告和访问。广告和访问都有 event_id 字段，访问有一个 ad_id 字段。最后，我们要比较两个事件日期。

根据广告的 ID，我需要获取所有访问，其中他们的事件日期晚于广告的事件日期。

我很想提供一些代码，但在这种情况下，我很迷茫，我不知道如何在这样的连接上进行连接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:49:14.637

```
select v.*
from ads a
join events ae on ae.id = a.event_id
join visits v on v.id = a.visit_id
join events ve on ve.id = v.event_id and ve.event_date > ae.event_date
where a.id = ? 
```

这里的诀窍是在`on`加入访问事件的子句中添加一个条件，与广告事件进行比较。

还要注意，可以通过分配不同的表别名来多次连接同一个表。

# ruby-on-rails-3 - Rails 虚拟属性数组

> ID：12765135
> 
> 赞同：1
> 
> 时间：2012-10-07T00:42:48.670
> 
> 标签：ruby-on-rails-3, model, simple-form

我正在我的模型中创建一个虚拟属性：

```
def entities
  @entities = Array.new()
  @entities.push(self.contact.name)
  @entities.push(self.contact.partner.name) if self.contact.partner
  @entities.push('Joint') if self.contact.partner
  @entities
end 
```

然后在我的表单中，我试图从嵌套数组中使用这个数组。我正在使用简单的形式，所以它看起来像这样

```
<%= f.input :ownership, collection: :entities, :include_blank => false, :label => false %> 
```

然而，这给了我一个错误：

```
undefined method `to_a' for :entities:Symbol 
```

如果我创建了一个数组，我不明白为什么它不呈现为一个数组。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:14:01.947

您不能`:entities`用作集合：

```
<%= f.input :ownership, collection: :entities ...%> 
```

那是行不通的。该错误表明 Simple Form 正在尝试将参数转换`:entities`为数组，这会导致错误。

你需要给它一个实际的集合：

```
<%= f.input :ownership, collection: @object.entities ... %> 
```

# php - PHP MySQL 混乱

> ID：12765145
> 
> 赞同：1
> 
> 时间：2012-10-07T00:44:28.403
> 
> 标签：php, mysql

我是 PHP 新手，不了解与 mysql 的交互，尤其是运行后的查询。这是我的代码：

```
$mysqli = new mysqli('localhost', 'foo', 'bar', 'table');
    if ($mysqli->connect_error) {
        die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    }

    $sql = "select column_name from information_schema.columns where table_name='activity'";
    if ($execute = $mysqli->query($sql)) {
        $result = mysqli_fetch_array($execute);//trying an array
        $row_count = count($result);
    }
    for ($i=0; $i < $row_count; $i++) { 
        echo $i . ' ' . $result['column_name'] . '<br>';
    } 
```

当我像这样运行它时，我得到这个输出：

```
0 i
1 d 
```

什么？
当我在数据库上运行相同的查询时，我得到了这个：

```
column_name
___________
id
name
description
score
quality_id
date_mod 
```

这正是我想要的，但在 php.ini 中。
我也试过这个：

```
for ($i=0; $i < $row_count; $i++) { 
    echo mysql_result($execute, $i, 'column_name');
} 
```

我得到

> mysql_result() 期望参数 1 是资源

我没有得到什么？

有什么方法可以让数据库交互更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:59:39.100

调用`mysqli_fetch_array`将结果集的第一行作为数组提供给您，它不会为您提供数组中的所有结果。

如果您想获得所有结果，则必须执行以下操作：

```
$i = 0;
While ($result = mysqli_fetch_array($execute))
{
  echo $i . ' ' . $result['column_name'] . '<br>';
  $i++;
} 
```

顺便问一下，你确定你在呼应`$result['column_name']`吗？从你得到的结果来看，你正在使用它`$result[$i]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:03:48.333

乍一看，我看到

```
if ($execute = $mysqli->query($sql)) { 
```

$execute 未定义，您应该使用 == 进行比较

```
$mysqli = new mysqli('localhost', 'foo', 'bar', 'table');
    if ($mysqli->connect_error) {
        die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    }

    $sql = "select column_name from information_schema.columns where table_name='activity'";

    /**
     * Execute the query. Returns false on failure.
     * On success, returns an an object (we store that object in $result)
     * in which you can do things like fetch_array(), etc
     */
    $result = $mysqli->query($sql);

        /**
         * in here you can pass MYSQLI_NUM, MYSQLI_ASSOC, MYSQLI_BOTH
         * MYSQLI_NUM will allow you to do echo $row[0];
         * MYSQLI_ASSOC will allow you to do echo $row['column_name'];
         * MYSQLI_BOTH will let you do both.
         */

        // Store results in the $row array
        $rows = $result->fetch_array(MYSQLI_ASSOC) // in here you can pass MYSQLI_NUM, MYSQL_ASSOC or MYSQL_BOTH
        $row_count = count($rows);
    }
    for ($i=0; $i < $row_count; $i++) { 
        echo $i . ' ' . $row['column_name'] . '<br>';
} 
```

# c# - 服务器登录和数据库用户的问题

> ID：12765148
> 
> 赞同：0
> 
> 时间：2012-10-07T00:45:18.273
> 
> 标签：c#, sql-server

我在目录 \Security\Logins\ 中创建了新的登录名 - ttt，密码为 ttt。然后我创建了角色 db_datawriter 的用户 ttt。

要检查用户是 admin( `db_owner`) 还是只是用户，我在 SQL MS 中调用函数`IS_MEMBER('db_owner')`（使用登录 ttt 和密码 ttt 的 SQL 身份验证运行），结果为 0。

当我在 C# 中调用此函数时，结果始终为真（或 1）。

```
 Database obj = new Database(new Server(@"ADMIN-PC\MSSQLSERVER2"),"ShoppingMall");
 bool user = obj.IsMember("db_owner"); 
```

`Database`是`microsoft.sqlserver.management.smo` 连接字符串中的一个类是

```
 string connection_string = @"Data Source=ADMIN-PC\MSSQLSERVER2;InitialCatalog=ShoppingMall;User ID=ttt;Password=ttt"; 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:58:40.427

我相信您需要在 smo 用户对象上调用“IsMember”方法，而不是数据库对象。

```
Database db = new Database(new Server(@"ADMIN-PC\MSSQLSERVER2"),"ShoppingMall");
User user = new User(db, "ttt");
bool isMember = user.IsMember("db_owner"); 
```

# c# - 第二次访问数据库访问错误？C＃

> ID：12765151
> 
> 赞同：0
> 
> 时间：2012-10-07T00:47:11.080
> 
> 标签：c#, database, list, ms-access

嘿伙计们，我正在使用 C#，我已经成功访问​​了我的数据库并分配了变量等，但我想再次访问它，由于某种原因，它在这一点上失败了：

```
 OleDbDataReader reader = command.ExecuteReader(); 
```

这是可能帮助你们更好地理解的代码片段。如果有人能指出我可能做错了什么，我将不胜感激。

```
 //#########################
        //   DATABASE OPERATIONS
        //#########################

        // Create the database connections
        string usersConnString = (@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\kronix\Documents\theitguy.accdb");

        OleDbConnection theitguyDBConn = new OleDbConnection(usersConnString);

        //==============================
        //   Populate Customers Table
        //==============================

        try
        {
            // Open theitguy database connection
            theitguyDBConn.Open();

            // Select the fields you want to retrieve from in the database
            string selectString = "SELECT ID, Name, Surname, Address, Town, County, Postcode, HomeNumber, MobileNumber, Email FROM Customers";

            OleDbCommand command = new OleDbCommand(selectString, theitguyDBConn);

            //Send the CommandText to the connection, and then build an OleDbDataReader.
            //Note: The OleDbDataReader is forward-only.
            OleDbDataReader reader = command.ExecuteReader();

            // PROCESS THE DATABASE AND ADD THEM TO THE LISTS FOR USE LATER IN THE PROGRAM
            while (reader.Read())
            {
                custID.Add(reader["ID"].ToString());
                custName.Add(reader["Name"].ToString());
                custSurname.Add(reader["Surname"].ToString());
                custAddress.Add(reader["Address"].ToString());
                custTown.Add(reader["Town"].ToString());
                custCounty.Add(reader["County"].ToString());
                custPostcode.Add(reader["Postcode"].ToString());
                custHomeNumber.Add(reader["HomeNumber"].ToString());
                custMobileNumber.Add(reader["MobileNumber"].ToString());
                custEmail.Add(reader["Email"].ToString());
            }

            // Dispose of the data once used
            reader.Dispose();
            reader.Close();

            // Close the database connection
            theitguyDBConn.Close();

        }
        catch (Exception ex)
        {
            Console.Write("ERROR 201 (Form2): Error reading Customers table in theitguy Database\n");
        }

        //==============================
        //   Populate Repairs Table
        //==============================

        try
        {
            // Open theitguy database connection
            theitguyDBConn.Open();

            // Select the fields you want to retrieve from in the database
            string selectString = "SELECT ID, CustID, Name, Surname, DateIn, Device, Colour, ContactNumber1, ContactNumber2, EstimatedCost, ReportedProblem, Diagnostics, EngineerRemarks, WorkCompleted, PartsUsed, PartsCost, PartsID, Engineer, TotalCost, DateCompleted FROM Repairs";

            OleDbCommand command = new OleDbCommand(selectString, theitguyDBConn);

            //Send the CommandText to the connection, and then build an OleDbDataReader.
            //Note: The OleDbDataReader is forward-only.
            OleDbDataReader reader = command.ExecuteReader();   //###IT'S FAILING HERE!!!###

            // PROCESS THE DATABASE AND ADD THEM TO THE LISTS FOR USE LATER IN THE PROGRAM
            while (reader.Read())
            {
                repID.Add(reader["ID"].ToString());
                repCustID.Add(reader["ID"].ToString());
                repName.Add(reader["ID"].ToString());
                repSurname.Add(reader["ID"].ToString());
                repDateIn.Add(reader["ID"].ToString());
                repDevice.Add(reader["ID"].ToString());
                repColour.Add(reader["ID"].ToString());
                repContactNumber1.Add(reader["ID"].ToString());
                repContactNumber2.Add(reader["ID"].ToString());
                repEstimatedCost.Add(reader["ID"].ToString());
                repReportedProblem.Add(reader["ID"].ToString());
                repDiagnostics.Add(reader["ID"].ToString());
                repEngineerRemarks.Add(reader["ID"].ToString());
                repWorkCompleted.Add(reader["ID"].ToString());
                repPartsUsed.Add(reader["ID"].ToString());
                repPartsCost.Add(reader["ID"].ToString());
                repPartsID.Add(reader["ID"].ToString());
                repEngineer.Add(reader["ID"].ToString());
                repTotalCost.Add(reader["ID"].ToString());
                repDateCompleted.Add(reader["ID"].ToString());
            }

            // Dispose of the data once used
            reader.Dispose();
            reader.Close();

            // Close the database connection
            theitguyDBConn.Close();

        }
        catch (Exception ex)
        {
            Console.Write("ERROR 202 (Form2): Error reading Repairs table in theitguy Database\n");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:00:50.507

Whoopsie，我发出了嘘声....我发现了我的问题。

我忘了正确命名以下内容：

```
 repCustID.Add(reader["ID"].ToString());
            repName.Add(reader["ID"].ToString());
            repSurname.Add(reader["ID"].ToString()); 
```

应该

```
 repCustID.Add(reader["CustID"].ToString());
            repName.Add(reader["Name"].ToString());
            repSurname.Add(reader["Surname"].ToString()); 
```

傻我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:29:49.373

Actually that wasn't the only fault...... the REAL PROBLEM was that I was trying to convert currency type in access into a string.

# android - 以编程方式删除 ViewPager，何时（或如何确保）包含的片段被销毁？

> ID：12765152
> 
> 赞同：5
> 
> 时间：2012-10-07T00:47:19.773
> 
> 标签：android, android-fragments, android-viewpager

事先搜索过这个问题，我可以找到许多关于`Fragment`从`ViewPager`. 然而，我在这里真正关心的是如何以编程方式`ViewPager`从它的包含中删除整个“干净” `ViewGroup`，当它`ViewPager`已用于`Fragment`通过 a 显示 s 时`FragmentPagerAdapter`，并确保包含`Fragment`的 s 被正确销毁。

为了进一步扩展这个问题，我有一个横向的两窗格布局，其中从`Fragment`左侧 a 内的列表中进行选择，然后将所选内容放置在 a 内的右侧`FrameLayout`。关键是内容可能会或可能不会分页。因此，内容必须要么以`ViewPager`格式显示，要么如果不分页，则`Fragment`直接用单个表示。

为了显示单个`Fragment`，我只需`FragmentTransaction`像往常一样执行 a ，以便将`Fragment`放入`FrameLayout`容器中。另一方面，如果要显示分页内容，那么我创建一个`ViewPager`并将其添加为`FrameLayout`.

当我需要更改内容时，如果以前的内容是独立的，`Fragment`那么我可以简单地通过`FragmentTransaction` `.remove()`. 当我这样做时，`Fragment`会按预期经历`onPause()`...`onDestroy()`循环。如果之前的内容是 a`ViewPager`那么我将它从`FrameLayout`using中删除`.removeAllViews()`。这里我遇到了问题：我没有看到任何`onPause()`...`onDestroy()`方法`Fragment`在`ViewPager`通过`FragmentPagerAdapter`.

从用户的角度来看，该应用程序运行良好。经过几轮`ViewPager`被移除后，我可以看到 GC 正在回收内存。但是，我不喜欢`Fragment`没有调用这些 s 的生命终结方法的事实，因为我无法在其中进行任何清理，而且它看起来并不“正确”。

有没有一种方法可以挂钩，以便在s与其父级分离时删除`ViewPager`'s `Fragment`s ，也许？`ViewPager`换句话说，当我知道`ViewGroup`不再使用 s 时，我会在`FragmentTransaction`某处（可能在 s 中`FragmentPagerAdapter`）执行 s 以删除那些`Fragment`s。

或者，我意识到我可以`ViewPager`永久保留右侧，并动态交换其中的`Fragment`s。当然，在某些时候它只保留一页并不重要。如果这将是一个更好的方法，那么我将重构我的代码来做到这一点，但我会很感激意见。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T11:04:11.630

> 但是，我不喜欢没有调用那些 Fragments 的生命终结方法的事实，因为我无法在其中进行任何清理，而且它看起来并不“正确”。

当活动被销毁时，它们应该被清理，如果这对你来说还不算太晚（例如，堆问题）。

> 换句话说，当我知道不再使用 ViewGroup 时，我会在某个地方（可能在 FragmentPagerAdapter 中）执行 FragmentTransactions 以删除这些 Fragment。

您没有执行交易以将片段放在那里。因此，您不能轻易地执行事务来删除碎片。如果您切换到`FragmentStatePagerAdapter`并调用`setAdapter(null)`，它应该会导致寻呼机中的所有现有片段被破坏，通过我对源代码的阅读。`FragmentPagerAdapter`从不使用`remove()`，但`FragmentStatePagerAdapter`确实从其`destroyItem()`方法中使用，并且`destroyItem()`当`null`向`setAdapter()`.

# iphone - 如何添加搜索栏以从选取器视图中选取排序数据

> ID：12765153
> 
> 赞同：1
> 
> 时间：2012-10-07T00:47:39.023
> 
> 标签：iphone, ios, uipickerview, uisearchbar

大家好，我添加了一个选择器视图来从中选择区域。这个选择器视图包含 200 多个区域，因此很难从选择器视图中滚动和选择。

有没有办法添加搜索栏并将其与选择器视图连接？我尝试通过覆盖它使用搜索栏委托方法来做到这一点，但我无法实现目标。

所以请帮助我，以便我可以做到，或者如果有其他可能的方式，那么也告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:53:19.770

选择器视图用于少量选择。使用表格视图代替如此大量的选项。

只是为了支持我的说法，[Apple 人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW23)说

> 如果您需要显示大量值，请考虑使用表格视图而不是选择器。这是因为表格视图的高度越大，滚动速度就越快。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T15:01:20.163

我同意大麦的观点，即 PickerView 对于大量选择来说是一种糟糕的工具；如果可能使用其他东西，那将是合适和最好的，但话虽如此：

YHCPickerView 看起来很有希望：

[http://code4app.net/ios/PickerView-with-Search-Bar/509fb2e86803faf25c000000](http://code4app.net/ios/PickerView-with-Search-Bar/509fb2e86803faf25c000000)

从该类的粗略视图来看，它似乎具有几个不同且不同的 UI 元素、用于收集搜索条件的文本字段、用于执行搜索的按钮以及基本的选择器视图。当按钮按下事件发生时，搜索条件简单直接地过滤选择器数据/模型。这样，您只需从选择器中编辑实际数据。

如果您分别处理其中的每一个，它应该可以更轻松地创建您想要的内容，因为您只需要处理每个单独的 UI 元素的基本功能和委托并将它们的效果链接在一起，而不是试图劫持现有的委托。

-干杯

# postgresql - 以周为单位的每天的 PostgreSQL 数量

> ID：12765154
> 
> 赞同：2
> 
> 时间：2012-10-07T00:48:05.887
> 
> 标签：postgresql

我整天都在努力寻找解决这个挑战的方法。

我有一张桌子：

```
 id   | amount  | type |            date            |              description              | club_id 
-------+---------+------+----------------------------+---------------------------------------+---------+--------
   783 |   10000 |    5 | 2011-08-23 12:52:19.995249 | Sign on fee                           |       7 
```

该表的数据比这多得多。

我想做的是在给定特定的club_id的情况下获得每周的金额总和。

我结束的最后一件事是这样，但它不起作用：

```
WITH RECURSIVE t AS (
    SELECT EXTRACT(WEEK FROM date) AS week, amount FROM club_expenses WHERE club_id = 20 AND EXTRACT(WEEK FROM date) < 10 ORDER BY week 
    UNION ALL 
    SELECT week+1, amount FROM t WHERE week < 3
)
SELECT week, amount FROM t; 
```

我不确定为什么它不起作用，但它抱怨 UNION ALL。

我马上就要去睡觉了，所以明天之前我将无法看到任何答案（对不起）。

我希望我已经充分描述了它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:34:49.980

在我看来，您正在尝试使用 UNION ALL 来检索查询第一部分的子集。那是行不通的。你有两个选择。第一个是使用用户定义的函数来添加你需要的行为，第二个是嵌套你的 WITH 子句。我倾向于前者，但你可能更喜欢后者。

要执行函数/表方法方法，您需要创建一个函数，该函数接受表中的一行作为输入并且不直接命中表。这提供了很多好处，包括轻松索引输出的能力。这里的函数看起来像：

```
CREATE FUNCTION week(club_expense) RETURNS int LANGUAGE SQL IMMUTABLE AS $$
    select EXTRACT(WEEK FROM $1.date)
$$; 
```

现在您有了一个可用的宏，可以在您使用列的地方使用它。然后您可以：

```
SELECT c.week, sum(amount) FROM club_expense c
 GROUP BY c.week; 
```

请注意，c。前一周不是可选的。解析器将其转换为周（c）。如果您想将其限制为一年，您可以对年份执行相同的操作。

这是 Postgres 的一个非常简洁、有用的特性。

# ruby-on-rails - factorygirl 参数顺序中断 create() 方法？

> ID：12765164
> 
> 赞同：0
> 
> 时间：2012-10-07T00:50:14.873
> 
> 标签：ruby-on-rails, factory-bot

为什么：

fi = FactoryGirl.create(:finder_item, store_id: s.id, :category_foo, :random_question)

抛出错误`finder_item_spec.rb:20: syntax error, unexpected ',', expecting tASSOC (SyntaxError)`

但只需重新排序，以便特征在分配之前正常工作：

fi = FactoryGirl.create(:finder_item, :category_foo, :random_question, store_id: s.id)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:45:56.833

您的一个论点不仅仅是符号类型 - 它是`:key => value`, 并且对于具有不同类型的参数的 FG 顺序很重要。

# php - Codeigniter：创建新类以与数据库交互

> ID：12765166
> 
> 赞同：0
> 
> 时间：2012-10-07T00:50:17.430
> 
> 标签：php, codeigniter, tankauth

好的，所以我正在使用 codeigniter 和 tankauth。我想创建一个功能，用户可以在其中提出问题并将问题存储在数据库中。似乎很简单，尽管一旦我开始为控制器、库和模型创建新类，我似乎遇到了问题。这是我到目前为止所做的：

VIEW：welcome.php（这是第一个页面，用户可以通过锚点进入ask_question页面，当它工作时很好）。

```
<?php echo anchor('/ask/ask_question', 'Ask a Question'); ?></br> 
```

查看：ask_question.php

```
Ask a questsion bro!</br>
</br>
<?php 
$title = array(
           'name' => 'title',
           'id' => 'title',
           'value' => set_value('title'),
           'maxlength' => 750,
           'size' => 30,
           'style' => 'width: 100px',
           );
$body = array(
          'name' => 'body',
          'id' => 'body',
          'value' => set_value('body'),
          'maxlength' => 5000,
          'size' => 30,
          'style' => 'width: 100px',
          );
?>
<?php echo form_open('/Ask/ask_question'); ?>
<table>
    <tr>
        <td><?php echo form_label('Title', $title['id']); ?></td>
        <td><?php echo form_input($title); ?></td>
    <td style="color: red;"><?php echo form_error($title['name']); ?><?php echo isset($errors[$title['name']])?$errors[$title['name']]:''; ?></td>
    </tr>
    <tr>
        <td><?php echo form_label('Body', $body['id']); ?></td>
        <td><?php echo form_input($body); ?></td>
    <td style="color: red;"><?php echo form_error($body['name']); ?><?php echo isset($errors[$body['name']])?$errors[$body['name']]:''; ?></td>
    </tr>
</table>
<?php echo form_submit('ask_question', 'Ask Question'); ?>
<?php echo form_close(); ?> 
```

控制器：ask.php

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class ask extends CI_Controller
{
    function __construct()
    {
        parent::__construct();

        $this->load->helper(array('form','url'));
        $this->load->library('Ask_Question');
        $this->load->library('tank_auth');
        $this->load->library('form_validation');
        $this->lang->load('tank_auth');
    }

    function index()
    {
      if (!$this->tank_auth->is_logged_in()) {
        redirect('/auth/login/');
      }
      else {
        $this->load->view('/ask/ask_question/');
      }
    }

    function ask_question()
    {
      if (!$this->tank_auth->is_logged_in()) {
        redirect('/auth/login/');
      }
      elseif ($this->tank_auth->is_logged_in(FALSE)) {
        redirect('/auth/send_again/');
      }
      else {
        $this->form_validation->set_rules('title', 'Title', 'trim|required|xss_clean|min_length[15]');
        $this->form_validation->set_rules('body', 'Body', 'trim|required|xss_clean|min_length[15]');
        if ($this->form_validation->run()) {
          if (!is_null($data = $this->Ask_Question->ask_question(
                                     $this->form_validation->set_value('title'),
                                     $this->form_validation->set_value('body')))) {
        $data['site_name'] = $this->config->item('website_name', 'tank_auth');
          }
          else {
        $errors = $this->Ask_Question->get_error_message();
        foreach ($errors as $k => $v) $data['errors'][$k] = $this->lang->line($v);
          }
        }
      }
      $this->load->view('/ask/ask_question/');
    }
} 
```

图书馆：Ask_Question.php

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

require_once('phpass-0.1/PasswordHash.php');

define('STATUS_ACTIVATED', '1');
define('STATUS_NOT_ACTIVATED', '0');

/**
 * Tank_auth
 *
 * Authentication library for Code Igniter.
 *
 * @package     Tank_auth
 * @author      Ilya Konyukhov (http://konyukhov.com/soft/)
 * @version     1.0.9
 * @based on    DX Auth by Dexcell (http://dexcell.shinsengumiteam.com/dx_auth)
 * @license     MIT License Copyright (c) 2008 Erick Hartanto
 */
class Ask_Question
{
    private $error = array();

    function __construct()
    {
        $this->ci =& get_instance();

        $this->ci->load->config('tank_auth', TRUE);

        $this->ci->load->library('session');
        $this->ci->load->database();
        $this->ci->load->model('questions');

        // Try to autologin
        $this->autologin();
    }

    function ask_question($title, $body)
    {
      $user_id = $this->ci->session->userdata('user_id');
      $class_id = '1';
      $tag1 = 'KENT';
      $this->ci->questions->ask_question($user_id, $class_id, $title, $body, $tag1);
      return NULL;
    }

    function get_error_message()
    {
        return $this->error;
    }
} 
```

模型：问题.php

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
 * Users
 *
 * This model represents user authentication data. It operates the following tables:
 * - user account data,
 * - user profiles
 *
 * @package Tank_auth
 * @author  Ilya Konyukhov (http://konyukhov.com/soft/)
 */
class questions extends CI_Model
{
    private $table_name         = 'users';          // user accounts
    private $profile_table_name = 'user_profiles';  // user profiles

    function __construct()
    {
        parent::__construct();

        $ci =& get_instance();
        $this->table_name           = $ci->config->item('db_table_prefix', 'tank_auth').$this->table_name;
        $this->profile_table_name   = $ci->config->item('db_table_prefix', 'tank_auth').$this->profile_table_name;
    }

    function ask_question($user_id, $class_id, $title, $body, $tag1)
    {
      $this->db->insert('questions', array('user_id'=>$user_id,'class_id'=>$class_id, 'question_title'=>$title, 'question_content'=>$body, 'focus_peak_1'=>$tag1)); 
      return NULL;
    }
} 
```

在使用已经创建的类之前我已经完成了这样的事情，没问题。我还没有创建自己的课程。我不确定我是否正在写（我只是复制了当前类的设置方式）。所以请让我知道我是否有任何错误或任何事情。现在我根本无法显示我的表格。该页面是空白的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:38:06.873

我不确定这是否是唯一的错误——但它是其中之一——改变你的“资本”：

**来自 ask_question.php：**

```
<?php echo form_open('/Ask/ask_question'); ?> 
```

至

```
<?php echo form_open('/ask/ask_question'); ?> 
```

**来自 ask.php：**

```
 class ask extends CI_Controller 
```

至

```
 class Ask extends CI_Controller 
```

# java - 忽略Android中HTML中的特定标签

> ID：12765169
> 
> 赞同：2
> 
> 时间：2012-10-07T00:50:36.177
> 
> 标签：java, android, html, regex

我有这个解析的内容：

```
<div id=\"spArticleColumn\" score=\"55.0\">\n\n\t\t\t\t\t\n\n\t\t\t<div id=\"spArticleTopAsset\" score=\"40.0\">\n\t\t\t\t\t\n<div class=\"spArticleImageBox spAssetAligncenter\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span href=\"http://www.spiegel.de/politik/deutschland/bild-859871-409806.html\">\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://cdn3.spiegel.de/images/image-409806-panoV9free-jzco.jpg\" width=\"520\" border=\"0\" class=\"spPanoImageTeaserPic\" title=\"Peer Steinbrück: Vorträge waren mit mindestens 7000 Euro vergütet\" alt=\"Peer Steinbrück: Vorträge waren mit mindestens 7000 Euro vergütet\"></span>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\n</div>\n\t\t\t\n\t\t\t\t\n\t\t\t\t\n<div id=\"spFbTwitterBarStd\" score=\"1.25\">\n\n\t\n\t\t\n\t\n\t\n\n\t\t\t\n\t</div>\n<div id=\"spArticleSection\">\n\t\n<p>Hamburg<b> -</b> Nach Informationen des SPIEGEL pflegte der SPD-Kanzlerkandidat Steinbrück eine größere Nähe zu Bankenlobbyisten und einer Wirtschaftskanzlei als bisher bekannt. Diese durften in seiner Zeit als Bundesfinanzminister die Gründung einer halbstaatlichen Beratungsfirma für Public-Private-Partnership-Modelle vorbereiten - später hielt Steinbrück bei einigen der beteiligten Firmen bezahlte Vorträge.</p>\n\n<p>\n\n\tDie Lobbyorganisation Initiative Finanzstandort Deutschland erarbeitete 2007 das Konzept für diese Beratungsfirma (ÖPP Deutschland AG), das Rechtsgutachten lieferte die Wirtschaftskanzlei Freshfields Bruckhaus Deringer; Steinbrück stimmte dem Konzept zu, das Finanzministerium beteiligte sich später mit rund 50 Prozent an der ÖPP Deutschland AG. Nach seinem Ausscheiden aus dem Ministerium trat Steinbrück sowohl bei Freshfields Bruckhaus Deringer als auch bei mehreren beteiligten Finanzinstituten wie der Deutschen Bank und der Landesbank Hessen-Thüringen als Redner auf - vergütet mit jeweils mindestens 7000 Euro.</p>\n\n<p>Auch von der Automatenwirtschaft, die Lobbyarbeit für Spielcasinos betreibt, ließ sich Steinbrück engagieren. Im Herbst 2010 trat er bei Feierlichkeiten zum 20-jährigen Jubiläum des \"Forums für Automatenunternehmer in Europa\" auf. Auf der Liste seiner Nebentätigkeiten ist als Auftraggeber nur eine Forum Marketing-Service GmbH in Berlin genannt; sie gehört der Automatenwirtschaft.</p>\n\n<p>Steinbrück hatte am Freitag nach massivem öffentlichen Druck plötzlich angekündigt, <a href=\"http://www.spiegel.de/politik/deutschland/debatte-um-nebeneinkuenfte-peer-steinbrueck-beugt-sich-der-kritik-a-859705.html\" title=\"alle Informationen zu seinen Honoraren so schnell und umfassend wie möglich offen zu legen\" class=\"spTextlinkInt\">alle Informationen zu seinen Honoraren so schnell und umfassend wie möglich offen zu legen</a>. Kurz zuvor hatte er dies noch abgelehnt. Derzeit müssen Abgeordnete Nebeneinkünfte nicht konkret preisgeben, sondern lediglich drei Stufen zuordnen - bis 3500 Euro, bis 7000 Euro und mehr als 7000 Euro. Ein Abgeordneter kann von einem Auftraggeber also wesentlich mehr erhalten, ohne dies öffentlich zu machen. Steinbrück hat in der laufenden Legislaturperiode mehr als 80 Vorträge gehalten, für die er Honorare der höchsten Stufe bekommen hat.</p>\n\n<p>Die Bundestagsverwaltung hat nach SPIEGEL-Informationen einen Vorschlag zur Veröffentlichung der Nebentätigkeiten von Abgeordneten erarbeitet: die bisher dreistufige Anzeigepflicht um sieben Stufen zu ergänzen. Die Abgeordneten müssten dann auch Honorare von mehr als 100.000 oder 150.000 Euro gesondert ausweisen. </p>\n\n<p>In einem Interview mit dem Deutschlandfunk hatte Steinbrück am Samstag vor den Folgen gewarnt, die die Debatte um Nebeneinkünfte von Parlamentariern auslösen könne. Bei den Wählern könnten Ressentiments bestätigt werden, dass Politiker sich in einem System der Vorteilsnahme und Selbstbereicherung bewegten. \"Da muss man aufpassen, dass man über Parteigrenzen hinweg nicht einen Prozess in Gang setzt, der die Politik insgesamt beschädigt\", mahnte Steinbrück. Er glaube zudem, dass eine gewisse Privatheit gelten müsse. \"Ich glaube, dass es Transparenz nur in Diktaturen gibt\", sagte Steinbrück. Kritik an seinen bezahlten Vorträgen vor Bankern nannte Steinbrück \"dämlich\" und \"absurd\". Im Deutschlandfunk sagte er, Teilnehmer seiner Vorträge würden bestätigen können, \"dass ich alles andere als ein <a href=\"http://www.spiegel.de/politik/deutschland/steinbrueck-wettert-gegen-kritiker-kein-knecht-des-kapitals-a-859816.html\" title=\"Knecht des Kapitals\" class=\"spTextlinkInt\">Knecht des Kapitals</a> gewesen bin\".</p>\n\n<p>\n<b>Diese Meldung kommt aus dem neuen SPIEGEL. Hier können Sie das Heft ab Sonntag um acht Uhr kaufen.</b>\n</p>\n\n</div>\n\n\t\t\n\n\n<br class=\"spBreakNoHeight\" clear=\"all\"></div>\n\t\t\t\t\n\t\t\t\t 
```

正如你所看到的，除了一个图像之外，它只是文本：

```
<img src=\"http://cdn3.spiegel.de/images/image-409806-panoV9free-jzco.jpg\" width=\"520\" border=\"0\" class=\"spPanoImageTeaserPic\" title=\"Peer Steinbrück: Vorträge waren mit mindestens 7000 Euro vergütet\" alt=\"Peer Steinbrück: Vorträge waren mit mindestens 7000 Euro vergütet\"> 
```

我想将此内容设置为这样的 TextView：

```
txt1.setText(Html.fromHtml(the content above)); 
```

但我不能，因为这个 HTML 中有一个图像。我无法将图像设置为 TextView，因此 Android 会显示一个蓝色错误框，但其余部分（文本）显示良好。

所以我的问题是：我可以用正则表达式替换标签和其中的所有内容吗？还是用一些不同的方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T00:58:10.700

我一直是这样的东西的正则表达式替换的粉丝。

如果你没有结束标签，你应该有类似的东西：

```
htmlContent = htmlContent.replaceAll("<img.*?>", ""); 
```

如果您确实有结束标签，请使用：

```
htmlContent = htmlContent.replaceAll("<img.*?>.*?</img>", ""); 
```

# java - 如何用布尔值创建一个mutator方法

> ID：12765170
> 
> 赞同：0
> 
> 时间：2012-10-07T00:50:41.720
> 
> 标签：java, arraylist, bluej

我被要求创建一个使用 Array List 实现作业队列的类。我们可以将作业和运行时添加到队列中。作业从 JobInQueue 列表中的队列前面运行，myPendingTime 被减去，完成的作业进入 Finishedjobs 列表。

看起来我们必须为此使用 boolean mutator 方法，但我不确定如何创建此方法。谁能告诉我该怎么做。

```
/**
  * runs the first job on the queue if there is enough time on the clock.
  */
public boolean runJob()
{
    boolean jobDone = runJob(); 
     if(myJobInQueue.isEmpty() && myDuration > myPendingTime){
       myDuration-= myPendingTime;
       myJobInQueue.remove(0);
       myFinishedJobs.add(myJobInQueue.get(0));
       System.out.println("The job runing is : "+ myJobInQueue.get(0));
       jobDone=true;
     }
    return jobDone ; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:10:33.790

Based on your inputs, please find the updated program below:

```
 public void runJob(){
    boolean jobDone = false; 
    if(!myJobInQueue.isEmpty() && myDuration > myPendingTime){
         myDuration-= myPendingTime;
         myFinishedJobs.add(myJobInQueue.get(0));
         myJobInQueue.remove(0);
         System.out.println("The job runing is : "+ myJobInQueue.get(0));
        jobDone=true;
    }
    if(!jobDone ){
         runJob();
    } 
  } 
```

Also I believe you want to check, `myJobInQueue` is not empty i.e. `if(!myJobInQueue.isEmpty() && myDuration > myPendingTime)`.

# c++ - 为什么受保护的继承会导致 dynamic_cast 失败？

> ID：12765174
> 
> 赞同：5
> 
> 时间：2012-10-07T00:51:21.577
> 
> 标签：c++, public, protected, dynamic-cast

我将 C++ 基类更改为`protected`继承，并且我`dynamic_cast`的 (s) 停止工作。

为什么要改变继承来`protected`改变行为`dynamic_cast`？

```
struct Base {
  static Base *lookupDerived(); // Actually returns a Derived * object.
};

struct Derived : protected /* Switch this to public to get it working */ Base {
 static void test() {
   Base *base = lookupDerived();

   if (dynamic_cast<Derived *>(base)) {
      std::cout << "It worked (we must be using public inheritance)." << std::endl;
   } else {
      std::cout << "It failed (we must be using protected inheritance)." << std::endl;
   }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T01:40:16.790

作为外部用户，您无法访问类的受保护或私有成员。这同样适用于受保护或私有继承。类的作者不希望外部用户访问受保护/私有父类，就像他们希望外部用户访问受保护/私有成员一样。

原因之一：假设父类有一个非虚析构函数。从基类指针删除实例派生类将导致未定义的行为。使父类受保护/私有意味着你不能这样做（见脚注）。

另一个原因：假设相关类的作者不希望外部用户访问父类的公共成员。可以使用公共继承 ( *is-a* ) 并将这些公共接口降级为受保护或私有，但这将违反 Liskov 替换原则。受保护或私有继承不是一种*关系*。这些公共方法通过受保护或私有继承变为受保护或私有。Liskov 替换没有问题，因为受保护/私有继承不是*is-a*。

脚注：有一个丑陋的方法来解决这个问题：使用 C 风格的强制转换。外部用户可以将派生类指针转换为基类指针，即使基类不可访问。对我来说，这是使用`-Wold-style-cast -Werror`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T00:57:46.983

当您将继承更改为受保护时，两个类之间的关系从对象外部隐藏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T00:59:18.447

私有（或受保护）继承在语义上与公共继承不同。它不是“is-a”关系，而是“实现为”关系。

这意味着您不能将基类用作派生对象的句柄。

# html - 倾斜的类按钮中的文本不倾斜

> ID：12765176
> 
> 赞同：2
> 
> 时间：2012-10-07T00:51:54.977
> 
> 标签：html, css

我已经为我的网站创建了一个带有 CSS 类的按钮，并且我希望它具有平行四边形形状，因此我使用了 skew 函数来创建形状。代码是正确的，按钮具有我想要的形状，但按钮内的文本在其换行后也出现了倾斜。有一种方法可以使文本看起来不像按钮内的斜塔？这是html代码：

```
<input type="submit" alt="submit" value="Login" class="button"> 
```

这就是按钮类的 CSS：

```
.button {
    float: top;
    width: 275px;
    height: 40px;
    margin-top: 6px;
    display: inline-block;
    font-family: Impact;
    text-align: center;
    -webkit-transform: skewX(20deg);
    -moz-transform: skewX(20deg);
    -o-transform: skewX(20deg);
    transform: skewX(20deg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:46:30.873

部分支持 Sidharth，我认为您不会绕过包装元素来应用 CSS 转换，然后为其子元素（提交输入）重置它：

```
<div class="button-wrapper">
  <input type="submit" alt="submit" value="Login">
</div> 
```

Sidharth 的回答意味着您完全隐藏原始`<input>`文件并在单击样式包装器时依赖 JavaScript 来触发对其的单击，但这里有一个简单的解决方法：设置样式并从嵌套元素中删除所有样式并将`button-wrapper`其设为 100 % 宽（[jsBin 示例](http://jsbin.com/obusoy/6/edit)）：`:hover``<input>`

```
.button-wrapper {
  background: #fff;
  border: 1px solid #bbb;
  border-color: #ddd #ccc #bbb;
  overflow: hidden;

  -webkit-transform: skewX(20deg);
  -moz-transform: skewX(20deg);
  -o-transform: skewX(20deg);
  transform: skewX(20deg);
}

.button-wrapper:hover {
  background: #efe;
  border-color: #090;
}

.button-wrapper input {
  background: transparent;
  border: 0;
  cursor: pointer;
  font-size: 20px;
  font-weight: bold;
  padding: 4px 0;
  margin: 0;
  width: 100%;

  -webkit-transform: skewX(-20deg);
  -moz-transform: skewX(-20deg);
  -o-transform: skewX(-20deg);
  transform: skewX(-20deg);
}

.button-wrapper input:hover {
  color: #060;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T03:08:40.833

我知道几年过去了，但我刚刚遇到了同样的问题，发现只需对文本进行反向倾斜就可以解决我的问题，如下所示：

```
.yellowShape {
     background-color: rgba(244,255,88,0.92);
     padding: 3px;
     -webkit-transform: skew(20deg);
     transform: skew(20deg); 
}

.yellowShape p {
    -webkit-transform: skew(-20deg);
    transform: skew(-20deg); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T01:04:05.493

为“按钮”创建一个包装器并将文本放入其中。但是，如果单击文本，则需要使用 javascript 触发按钮上的“单击”，否则它不会“传播”到按钮。

# c# - Equals 的接口扩展方法

> ID：12765177
> 
> 赞同：1
> 
> 时间：2012-10-07T00:52:05.500
> 
> 标签：c#, dependency-injection, extension-methods

我正在使用依赖注入并具有以下接口：

```
public interface IAchievement : IEquatable<IAchievement>
{
    string GetName();

    string GetDescription();
} 
```

我有 IEquatable 因为我可以定义 Equals 方法（对于 list.contains() 正常工作）。问题是，Equals 方法对于所有实现该接口的类来说是完全相同的。有没有办法使用扩展方法为接口定义它？我可以在实现类和接口之间的层次结构中粘贴一个“抽象”类，但担心这会破坏依赖注入的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:59:09.400

您可以使用扩展方法为所有类提供通用实现，但每个类仍然需要自己实现 Equals() 然后调用扩展方法。不能使用扩展方法来满足接口。

使用抽象类与 DI 并不矛盾。你仍然会传递接口。只是所有的具体类都有一个共同的基础。

# jquery - 使用函数从外部文件添加 div？

> ID：12765179
> 
> 赞同：0
> 
> 时间：2012-10-07T00:52:15.577
> 
> 标签：jquery

我正在为一个工作 Intranet 站点创建一个常见问题解答页面，并且希望有一个包含问题的文件和一个包含相关答案的文件，因此不必编辑多个不同的页面，我只需编辑 2 个页面即可。我已经让它工作了，所以当点击问题时，答案会显示在 faq.php 页面上的问题下方：

```
<ul>
<li><a id="abc" href="#"> question here</a></li>
<div id="abc1"></div>
</ul> 
```

在我的外部 jQuery 脚本页面上：

```
$(function() {
    $('#abc').click(function() {
        $('#abc1').load('test.php #xyz');
}); 
```

它工作得很好......有没有办法将它放入一个函数中，这样我就不必为每个新问题 div id 编写一个新的 jQuery 块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:01:31.160

不要使用身份证。**ID 应该是唯一的。**因此，如果您将您的功能与 ID 选择器挂钩，它将是具体的。我们需要一些通用的解决方案。

使用 css 类选择器，以便您可以将其应用于许多项目。所以我会像这样对标记做一个小的调整。

```
 <ul>
    <li>
        <a id="abc" href="#" class="q"> question here</a>
        <div id="abc1" class="a"></div>
    </li>
    <li>
        <a id="abc2" href="#" class="q"> question 2 here</a>
        <div id="abc2" class="a"></div>
    </li>
 </ul> 
```

脚本

```
$(function() {
    $('.q').click(function() {
      var item=$(this);
      item.parent().find(".a").load('test.php #xyz');
}); 
```

如果您想将点击问题的 ID 传递给 test.php 页面以获取该特定问题的答案，您可以发送 ID（标签的）

```
$(function() {
    $('.q').click(function() {
      var item=$(this);
      var clickedQuestionId=item.attr("id");
      item.parent().find(".a").load("test.php?qid="+clickedQuestionId+"#xyz");
    });
}); 
```

这是一个 jsFiddle 演示（在答案中使用静态文本而不是调用 ajax 方法） [http://jsfiddle.net/EcWFm/11/](http://jsfiddle.net/EcWFm/11/)

# c# - ORA-01843: 不是一个有效的月份 -- 在 DB 上工作但在 asp.net 网页上做同样的事情时不行

> ID：12765181
> 
> 赞同：2
> 
> 时间：2012-10-07T00:52:51.207
> 
> 标签：c#, asp.net, oracle

我正在尝试使用“添加按钮”通过 asp.net C# 网页将记录插入数据库。我的数据库上的日期格式是“dd/MON/yyyy”。isert 语句在我的数据库上运行良好，但在 asp.net 中却不行。

在我的数据库上:: 工作正常！

```
INSERT INTO EVENT (RES_ID,EMP_ID,PHONE_NUMBER,EVENT_DT,TIME_SLOT)  
values (null,100,'123-123-1233','01/Oct/2012','08:00 PM - 12:00 AM'); 
```

Om myaspx.cs page:: THROWS THE ERROR ""插入记录时出错！ORA-01843: 网页上的“月份无效”。

```
 string insertSQL;
    insertSQL = "insert into event (res_id,emp_id,phone_number,event_dt,time_slot) ";
    insertSQL += " values (:res_id,:emp_id,:phone_number,:event_dt,:time_slot)";

    OracleConnection con = new OracleConnection(connectionString);
    OracleCommand cmd = new OracleCommand(insertSQL, con);

    cmd.Parameters.Add(":emp_id", cboResOrEmpName.SelectedValue);
    cmd.Parameters.Add(":res_id", null);
    cmd.Parameters.Add(":phone_number", txtContactNo.Text);
    cmd.Parameters.Add(":time_slot", rblTimeSlot.Text);
    cmd.Parameters.Add(":event_dt", txtEvtDt.Text);

    // Try to open the database and execute the update.
    int added = 0;
    try
    {
        con.Open();
        added = cmd.ExecuteNonQuery();
        lblResults.Text = added.ToString() + " record added!";
    }
    catch (Exception err)
    {
        lblResults.Text += "Error inserting record! ";
        lblResults.Text += err.Message;
    }
    finally
    {
        con.Close();
    } 
```

我使用带有 AJAX 日历扩展的事件日期的文本框。以下是它的定义。

```
<asp:TextBox ID="txtEvtDt" runat="server"></asp:TextBox>
<asp:CalendarExtender ID="txtEvtDt_CalendarExtender" runat="server" 
TargetControlID="txtEvtDt" Format="dd/MMM/yyyy">
</asp:CalendarExtender> 
```

请帮我理解问题。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T04:48:34.413

希望这会奏效

```
cmd.Parameters.Add(":event_dt", DateTime.ParseExact(txtEvtDt.Text, "dd/MMM/yyyy", CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T09:27:19.157

您的 SQL 语句在您的数据库上运行良好大概是因为`DD/Mon/YYYY`它是您用来连接到 Oracle 的任何程序（SQL*Plus、SQL Developer、TOAD、PL/SQL Developer 等）的默认日期格式。大概是当 ASP.NET 连接到数据库它不使用相同的默认日期格式。

我建议不要依赖日期和字符串之间的自动转换。如果您在日期和字符串之间进行转换，请*始终*明确说明。用于`TO_DATE(some_string, 'DD/Mon/YYYY')`将字符串转换为日期，以及`TO_CHAR(some_date, 'DD/Mon/YYYY')`将日期转换为字符串。

所以，在你的`insertSQL`字符串中，我建议`:event_dt`用`TO_DATE(:event_dt, 'DD/Mon/YYYY')`.

# c++ - C++11 可变参数模板函数调用转发

> ID：12765182
> 
> 赞同：1
> 
> 时间：2012-10-07T00:52:53.717
> 
> 标签：c++, templates, c++11, variadic-templates

我试图弄清楚如何创建一个 C++11 模板函数，它将在两个约定之间转换函数调用：第一个是使用 Variant（注意：变体是一种多态类型，它是子类 IntVariable 的基础， DoubleVariant 等），第二个是 C 函数调用。

我们在编译时知道每一条信息：参数计数是参数的数量，参数/返回类型取决于“cfunc”变量类型。

```
// We will assume that the two following functions are defined with their correct
// specializations.

template < typename T >
Variant * convertToVariant( T t );

template < typename T >
T convertFromVariant( Variant * variant );

// The following function is incomplete, the question is how to convert the
// variant parameters into a C function call ?

template < typename Return, typename... Arguments >
Variant * wrapCFunction< Return cfunc( Args... ) >(int argc, Variant ** argv) {
    // Here comes the magic call of cfunc, something like :
    if ( argc != mpl::count< Args... >::value )
        throw std::runtime_error( "bad argument count" );
    return cfunc( convertFromVariant< Args... >( argv[ X ] )... );
}

// Example use case :

int foo( int a, int b );

int main(void) {
    int argc = 2;
    Variant * argv[2] = { new IntVariant( 5 ), new IntVariant( 6 ) };

    Variant * res = wrapCFunction< foo >( argc, argv );
    IntVariant * intRes = dynamic_cast< IntVariant >( res );

    return intRes ? intRes->value : -1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T02:00:35.080

使用[索引技巧](http://loungecpp.wikidot.com/tips-and-tricks:indices)，这很容易：

```
template<unsigned...> struct indices{};

template<unsigned N, unsigned... Is>
struct indices_gen : indices_gen<N-1, N-1, Is...>{};

template<unsigned... Is>
struct indices_gen<0, Is...> : indices<Is...>{};

// assuming the parameters were actually like this
template<typename Return, typename... Args, unsigned... Is>
Variant* wrapCFunction(Return (*cfunc)(Args...), int argc, Variant** argv, indices<Is...>) {
    return cfunc(convertFromVariant<Args>(argv[Is])...);
}

template<typename Return, typename... Args>
Variant* wrapCFunction(Return (*cfunc)(Args...), int argc, Variant** argv) {
    if (argc != sizeof...(Args))
        throw std::runtime_error("bad argument count");
    return wrapCFunction(cfunc, argc, argv, indices_gen<sizeof...(Args)>());
} 
```

请注意代码中的一些更改。首先，`sizeof...(Args)`产生包中参数的数量。`cfunc`其次，我修复了函数的签名以作为实际参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:57:06.067

```
class Variant;
template < typename T > Variant * convertToVariant( T t );
template < typename T > T convertFromVariant( Variant * variant );

template <typename Return, typename... Arguments>
struct WrapCFunctionImpl {
  template<int argsToAdd, int... argIndexes>
  struct Impl {
    typedef typename Impl<argsToAdd - 1, argIndexes..., sizeof...(argIndexes)>::Type Type;
  };
};
template <typename Return, typename... Arguments>
template <int... argIndexes>
struct WrapCFunctionImpl<Return, Arguments...>::Impl<0, argIndexes...> {
  typedef Impl Type;
  static Variant* run(Return cfunc( Arguments... ), Variant ** argv) {
    return convertToVariant( cfunc( convertFromVariant<Arguments>( argv[argIndexes] )... ) );
  }
};

template < typename Return, typename... Arguments >
Variant * wrapCFunction(Return cfunc( Arguments... ), Variant ** argv) {
    return WrapCFunctionImpl<Return,Arguments...>::template Impl<sizeof...(Arguments)>::Type::run(cfunc, argv);
}

int foo(int, int);
Variant *f(Variant** x) {
  return wrapCFunction(foo, x);
} 
```

这里的大部分困难是生成数组索引的递归。可能有更简单的方法可以做到这一点，但这很有效。

# matlab - 求解 *sparse* 上三角系统

> ID：12765184
> 
> 赞同：6
> 
> 时间：2012-10-07T00:53:11.030
> 
> 标签：matlab, linear-algebra, sparse-matrix, triangular

如果我想解决一个*完整*的上三角系统，我可以调用`linsolve(A,b,'UT')`. 但是，稀疏矩阵目前不支持此功能。我该如何克服呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:59:28.620

UT 和 LT 系统是最容易解决的系统之一。[在 wiki 上](http://en.wikipedia.org/wiki/Triangular_matrix#Forward_and_back_substitution)阅读有关它的信息。知道了这一点，就很容易编写自己的 UT 或 LT 求解器：

```
%# some example data
A = sparse( triu(rand(100)) );
b = rand(100,1);

%# solve UT system by back substitution    
x = zeros(size(b));
for n = size(A,1):-1:1    
    x(n) = (b(n) - A(n,n+1:end)*x(n+1:end) ) / A(n,n);    
end 
```

LT 系统的过程非常相似。

话虽如此，使用 Matlab 的反斜杠运算符通常更容易和更快：

```
x = A\b 
```

正如 nate 已经指出的，这也适用于备件矩阵。

请注意，此运算符还解决了具有非正方形`A`或如果在主对角线上`A`具有等于零（或 ）的某些元素的 UT 系统。`< eps`它以最小二乘的方式解决了这些情况，这可能对您来说是可取的，也可能不是您想要的。您可以在执行求解之前检查这些情况：

```
if size(A,1)==size(A,2) && all(abs(diag(A)) > eps)
    x = A\b;
else
    %# error, warning, whatever you want
end 
```

通过键入阅读有关（反）斜杠运算符的更多信息

```
>> help \ 
```

或者

```
>> help slash 
```

在 Matlab 命令提示符下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T06:59:33.700

**编辑**由于您需要的是三角求解过程，也称为后向/前向替换，因此您可以使用普通的 MATLAB 反斜杠`\`运算符：

```
x = U\b 
```

如原始答案中所述，MATLAB 将识别出您的矩阵是三角形的事实。为了确定这一点，您可以将性能与[SuiteSparse](http://www.cise.ufl.edu/research/sparse/SuiteSparse/)`cs_usolve`中的过程进行比较。它是一个用 C 语言实现的 mex 函数，用于计算上三角稀疏矩阵的稀疏三角求解（那里也有类似的函数：和）。`cs_lsolve``cs_utsolve``cs_ltsolve`

您可以查看原生 MATLAB 和稀疏 Cholesky 分解上下文中的[性能比较。](http://milamin.sourceforge.net/technical-notes/forward-and-backward-substitution)`cs_l(t)solve`从本质上讲，MATLAB 性能很好。唯一的陷阱是如果你想解决一个转置系统

```
x = U'\b 
```

MATLAB**无法**识别并显式创建`U`. 在这种情况下，您应该`cs_utsolve`明确调用。

**原始答案**如果您的系统是对称的并且您只存储上三角矩阵部分（这就是我在您的问题中*完全*理解的方式），并且如果 Cholesky 分解适合您，如果您的矩阵是正定的，则[​​ chol处理对称矩阵。](http://www.mathworks.se/help/matlab/ref/chol.html)对于不定矩阵，您可以使用[ldl](http://www.mathworks.se/help/matlab/ref/ldl.html)。两者都处理稀疏存储并处理对称矩阵部分。

较新的 matlab 版本为此使用[cholmod 和 suitesparse](http://www.cise.ufl.edu/research/sparse/SuiteSparse/)。这是迄今为止我所知道的表现最好的 Cholesky 分解。在 matlab 中，它也使用并行 BALS 进行并行化。

您从上述函数中获得的因子是上三角矩阵 L 使得

```
A=LL' 
```

您现在需要做的就是执行前向和后向替换，这既简单又便宜。在 matlab 中，这是在反斜杠运算符中自动完成的

```
x=L'\(L\b) 
```

矩阵可以是稀疏的，matlab 会识别出它是上三角/下三角。您还可以将此调用与前向替换一起用于使用 cholesky 分解获得的因子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T06:29:43.557

您可以在稀疏矩阵上使用 MLDIVIDE( \ ) 或 MRDIVIDE( / ) 运算符...

# c++ - C++ 运算符覆盖 - 为什么它是朋友首选？

> ID：12765186
> 
> 赞同：5
> 
> 时间：2012-10-07T00:54:05.890
> 
> 标签：c++

继续上[一个问题](https://stackoverflow.com/questions/12764696/operator-override-when-to-use-friend/12764769#comment17250263_12764769)，我想问一下为什么首选 C++ 运算符覆盖中的“朋友”形式的加法

总结一下：

对于加法运算符覆盖，有两种方法可以做到：

```
int operator+(Object& e);
friend int operator+(Object& left, Object& right); 
```

为什么首选第二种（朋友）形式？有什么优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T01:03:28.590

非成员版本（朋友或其他）是首选，因为它可以支持运算符左侧和右侧的隐式转换。

给定一个可隐式转换为 Object 的类型：

```
struct Widget
{
  operator Object() const;
}; 
```

`Widget`如果左侧出现的实例，则只能调用非成员版本：

```
Widget w;
Object o;

o + w; // can call Object::operator+( Object & ) since left-hand side is Object
w + o; // can only call operator+( Object &, Object & ) 
```

* * *

回应您的评论：

通过在 中定义转换运算符`Widget`，我们通知编译器 的实例`Widget`可以自动转换为 的实例`Object`。

```
Widget w;
Object o = w;  // conversion 
```

在表达式`o + w`中，编译器`Object::operator+( Object & )`使用通过转换`w`为`Object`. 所以结果和写一样`o + w.operator Object()`。

但是在表达式`w + o`中，编译器会寻找`Widget::operator+`（不存在的）或非成员`operator+( Widget, Object )`。后者可以通过转换为上述来`w`调用`Object`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:17:22.397

该规则不是通用的：`friend`当您实现一个逻辑对称操作时，该版本是首选的，该操作采用相同类型的两个参数，例如您的帖子演示的情况。

This implementation underscores the fact that the operation is truly symmetric: it's not a 'Object this' that adds `Object e` to itself - rather, that's an addition of `lhs` and `rhs`.

In situations when the operation is non-symmetric - for example, when you add an `int` to an iterator, you should prefer the first way of implementing operators, namely

```
Object& operator+(int& offset); 
```

# ruby - 在迭代期间使用 collect 修改数组

> ID：12765188
> 
> 赞同：1
> 
> 时间：2012-10-07T00:54:21.573
> 
> 标签：ruby

我正在使用 collect 方法来更改数组的值。我期望数组的值会改变，但这并没有发生。在下面的代码中，数组被初始化并且值被设置为 1,2,3,4,5。我将这些值打印到屏幕上，以显示任何更改之前的值。

将原始数组打印到屏幕后，我遍历数组并使用任何可枚举的 .collect 方法更改值。

当我将 'arr' 的值打印到屏幕上时（请参见下面的最后一行代码），它会打印与开始数组完全相同的输出！简而言之，'arr' 的值在使用 collect 遍历数组之前和之后是相同的。我希望第一个看跌期权是 [1,2,3,4,5]，第二个看跌期权是 [2,4,6,8,10]。

你能看到我在这里错过了什么吗？？？

```
arr = [1,2,3,4,5]

puts arr # outputs 1 2 3 4 5
arr.collect { |x| x * 2 }
puts arr # still outputs 1 2 3 4 5 - not 2 4 5 8 10 as I expect 
```

在相关说明中，我可以根据需要更改 collect with map（和 map with collect）还是有区别？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T01:05:51.840

`collect`（ 的别名`map`）不会就地修改数组。它返回一个新数组。所以：

```
arr = arr.collect { |x| x * 2} 
```

如果您确实想就地修改数组，请使用`collect!`（的别名`map!`）：

```
arr.collect! { |x| x * 2} 
```

`map`可与`collect`; `map!`可与`collect!`

# c++ - 将字符数组传递给函数 | 奇怪的错误

> ID：12765190
> 
> 赞同：0
> 
> 时间：2012-10-07T00:54:41.400
> 
> 标签：c++

基本上我有一个缓冲区，我在其中寻找各种标志来从二进制文件格式中读取某些字段。我已将文件读入缓冲区，但是当我开始编写代码以在缓冲区中搜索标志时，我立即碰壁了。我是 C++ 菜鸟，但这是我所拥有的：

```
void FileReader::parseBuffer(char * buffer, int length)
{
  //start by looking for a vrsn
  //Header seek around for a vrns followed by 32 bit size descriptor
  //read 32 bits at a time
  int cursor = 0;
  char vrsn[4] = {'v','r','s','n'};
  cursor = this->searchForMarker(cursor, length, vrsn, buffer);
}

int FileReader::searchForMarker(int startPos, int eof, char marker[], char * buffer)
{
  int cursor = startPos;
  while(cursor < eof) {
    //read ahead 4 bytes from the cursor into a tmpbuffer
    char tmpbuffer[4] = {buffer[cursor], buffer[cursor+1], buffer[cursor+2], buffer[cursor+3]}; 
    if (strcmp(marker, tmpbuffer)) {
      cout << "Found: " << tmpbuffer;
      return cursor;
    }
    else {
      cout << "Didn't Find Value: " << marker << " != " << tmpbuffer;
    }
    cursor = cursor + 4;
  }
} 
```

我的标题如下所示：

```
#ifndef __FILEREADER_H_INCLUDED__
#define __FILEREADER_H_INCLUDED__

#include <iostream>
#include <fstream>
#include <sys/stat.h>

class FileReader {
  public:
    FileReader();
    ~FileReader();
    int open(char *);
    int getcode();
  private:
    void parseBuffer(char *, int);
    int searchForMarker(int, int, char[], char *);
    char *buffer;
};

#endif 
```

我希望用 strcmp 找回与 vrsn 的匹配，但我的结果看起来像这样

```
Didn't Find Value: vrsn != vrsn
Found: 
```

看起来它在通过我正在寻找的 char 数组后的第二遍中找到了它。

相关十六进制码

![十六进制](../Images/71e526b927ca7b36a0a03301f9d132e9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:31:54.853

您的问题有两个方面：

1.  `strcmp`成功时返回“0”，而不是失败时。阅读文档。

2.  `strcmp`需要以 null 结尾的字符串。您说您选择了非终止`char`数组，因为这是您的数据库库使用的。好吧，好吧。但是，您仍然违反`strcmp`. 改为使用`strncmp`（它需要一个长度参数），或者最好*实际编写 C++*并开始使用`std::vector<char>`和朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:06:38.693

Shouldn't that be something like `int FileReader::searchForMarker(...) { .... }`?

For the second query, I guess the `strcmp` works when it has two null terminated strings as its arguments. For example `str1[]="AAA";` and `str2[]="AAA";` then `strcmp()` would be used as `if(strcmp(str1,str2)==0)` which will return `0` to indicate that they are equal. In your case, the `tmpbuffer` that you have created is not a null terminated string unless you add `\0` in the end.So you might want to add `\0` in the end of your `tmpbuffer` to create a string of `'v' 'r' 'n' 's'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T01:21:38.170

> ```
> char vrsn[4] = {'v','r','s','n'}; 
> ```

仅包含指定的 4 个字符。最后没有空字符的空间。

> ```
>  char tmpbuffer[4] = {buffer[cursor], buffer[cursor+1], buffer[cursor+2], buffer[cursor+3]}; 
> ```

仅包含缓冲区中的 4 个字符。最后没有空字符的空间。

最终你打电话：

> ```
> if (strcmp(marker, tmpbuffer)) { 
> ```

strcmp() 函数期望它的每个参数都以空字符 ('\0') 结尾。它想使用以空结尾的字符串。

由于您的数据不是以空值结尾的，因此您可能希望使用 memcmp() 而不是 strcmp()。

此外，当 strcmp() 的参数相等时，它返回零，因此 if 语句中的条件被反转。（零为假，其他一切为真。） memcmp() 函数在其参数相等时也将返回零。

# mysql - != 查询失败如何在同一个 where 语句中同时使用 = 和 !=

> ID：12765191
> 
> 赞同：-1
> 
> 时间：2012-10-07T00:54:41.947
> 
> 标签：mysql

此查询有效：

```
SELECT stock_number 
FROM t2d_vehicles
WHERE stock_number = '02929A'
AND dealer_id = 130128 
```

这个没有：

```
SELECT stock_number 
FROM t2d_vehicles 
WHERE stock_number = '02929A' 
AND dealer_id = 130128 
AND feed_id != 9 
```

我不能在 WHERE 中将 != 与 = 结合起来吗？

这是表的一个简单的一点点：

```
"stock_number","dealer_id","feed_id"
"02929A",130128,9
"02929A",130128,10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:00:32.457

如果`feed_id`是`NULL`，`feed_id != 9`将会是`true`。

尝试这个：

```
...
AND (feed_id != 9 OR feed_id IS NULL) 
```

在 SQL 中，`NULL`既不等于也不等于 amy 的特定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:56:50.300

在 MySQL`!=`中应该可以正常工作，但实际上标准 SQL 中的首选语法是`<>`. 根据[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#operator_not-equal)，这两个运算符应该做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T00:58:41.103

你试过用NOT吗？

从 t2d_vehicles 中选择 stock_number，其中 stock_number = '02929A' AND Dealer_id = 130128 AND (NOT feed_id = 9)

# android - 首次添加 AppWidget 未完成更新

> ID：12765192
> 
> 赞同：2
> 
> 时间：2012-10-07T00:55:01.103
> 
> 标签：android, android-intent, appwidgetprovider, android-appwidget

**编辑：我安装了我的 app 4.x 设备，没有问题。问题仅存在于 3.x 设备。**

当设备上的用户设置发生更改时，我正在尝试手动更新 AppWidget。为此，我使用与此类似的代码：

```
ComponentName thisWidget = new ComponentName(this, MyAppWidget.class); 
AppWidgetManager manager = AppWidgetManager.getInstance(this); 
manager.updateAppWidget(thisWidget, updateViews); 
```

我可以说我的 AppWidget onUpdate 方法被调用，因为我在代码中记录了一些调试字符串到 logcat。但是 AppWidget 本身不会在屏幕上改变。

有趣的部分来了：如果我旋转我的设备并强制刷新主屏幕（从 PORTRAIT 到 LANDSCAPE，反之亦然），那么最后我的 AppWidget 就会更新。但是旋转设备不会触发调用 onUpdate 方法，因此 AppWidget 必须使用早期更新中提供的 RemoteViews。

有人可以解释我在处理更新时如何强制我的 AppWidget 的主屏幕重绘吗？

我在用`<uses-sdk android:minSdkVersion="11" />`

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
  int[] appWidgetIds) {

  // Get all ids
  ComponentName thisWidget = new ComponentName(context, MyProvider.class);
  int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
  // Build the intent to call the service
  Intent intent = new Intent(context.getApplicationContext(), MyService.class);
  intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);

  RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.appwidget_layout);

  appWidgetManager.updateAppWidget(appWidgetIds, views);

  // Update the widgets via the service
  context.startService(intent);
} 
```

我的服务：

```
@Override
public void onStart(Intent intent, int startId) {
    Log.i(LOG, "Called");

    this.appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

    this.allWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    ComponentName thisWidget = new ComponentName(getApplicationContext(), MyProvider.class);
    int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);
    Log.w(LOG, "From Intent" + String.valueOf(allWidgetIds.length));        
    Log.w(LOG, "Direct" + String.valueOf(allWidgetIds2.length));
    config = getResources().getConfiguration();

    for (int widgetId : allWidgetIds) {
        //do things like starting ASYNCs (couple of them) to fetch data from server
        //and set an adapter for the gridview
    }   

    Intent intentOpen = new Intent(getApplicationContext(), MainFragmentActivity.class);
    PendingIntent open = PendingIntent.getActivity(getApplicationContext(), 0, intentOpen, 0);
    remoteViews.setOnClickPendingIntent(R.id.widget_whole, open);
    remoteViews.setViewVisibility(R.id.widgetProgress, View.GONE);
    appWidgetManager.updateAppWidget( thisWidget, remoteViews );    
    Log.d(LOG, "sent!!");       
}
stopSelf();

super.onStart(intent, startId); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T18:45:18.647

对我来说，这听起来像是启动器应用程序中的一个错误。每次调用***AppWidgetManager***`updateAppWidget`时都会收到新布局，并且启动器负责使用这个新布局重绘小部件。

 *当屏幕被旋转`onUpdate`并且`updateAppWidget`没有被调用，但是启动器用它的新布局重绘小部件时，这意味着***AppWidgetManager***已经成功地接收到了这个新布局。

当屏幕旋转时，启动器被迫重新绘制所有内容（重新创建其 Activity），这就是它显示新布局的原因。

而且这个bug可能在Android 4.0+中修复了

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T14:28:53.887

我会尝试调用`invalidate()`您的小部件中的视图。调用它会强制系统重绘视图。*

# jsf-2 - 不常见的 NoSuchEJBException：会话超时、浏览器刷新后 EJB 已被删除

> ID：12765195
> 
> 赞同：0
> 
> 时间：2012-10-07T00:55:45.613
> 
> 标签：jsf-2, java-ee-6, jboss7.x, ejb-3.1

我有一个 facelet 在会话超时后 30 秒刷新浏览器窗口，例如

```
<a4j:region>
<h:form>
<a4j:poll id="poll" interval="#{(session.maxInactiveInterval + 30)*1000}" onbegin="window.document.location.href='/Patrac'"/>
</h:form>
</a4j:region> 
```

重新加载时，facelet 会导致在 SFSB 上调用方法，例如

```
<ui:define name="title">PATRAC - #{workflowManager.currentWorkflow.screenTitle}</ui:define> 
```

SFSB 是会话范围的。

```
@SessionScoped

@Stateful

public class WorkflowManager {

    ... 

    public Workflow getCurrentWorkflow() { return currentWorkflow; }

    @PreDestroy public void bye() { System.out.println("Destroying: "+ getClass().getName() +", ID = "+ getId()); }

} 
```

85% 的时间屏幕刷新无意外：

```
15:56:44,951 INFO  [stdout] (http-/127.0.0.1:8443-1) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -1906221148858801782
15:56:44,968 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/
15:58:01,343 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -3546919396833964128
15:58:15,288 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-3) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
15:58:15,319 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-4) NoCacheFilter.doFilter() URI: /Patrac/
15:58:15,349 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-3) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
15:58:15,389 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-4) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
15:59:45,771 INFO  [stdout] (http-/127.0.0.1:8443-1) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -5655846827584878649
15:59:45,777 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
15:59:45,800 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-1) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
15:59:45,890 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:00:01,356 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = 4579100734353654546
16:01:01,363 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = 4317425328092070112
16:01:16,518 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-3) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:01:16,526 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-8) NoCacheFilter.doFilter() URI: /Patrac/
16:01:16,544 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-3) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
16:01:16,572 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-3) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:02:46,894 INFO  [stdout] (http-/127.0.0.1:8443-1) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = 7360031599060690367
16:02:46,900 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:02:46,923 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-6) NoCacheFilter.doFilter() URI: /Patrac/
16:02:46,950 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-1) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
16:02:46,975 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:03:01,380 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -5741388414554084710
16:04:01,389 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -1149102875316717372
16:04:01,395 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -7198492156368620025
16:04:17,355 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-7) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:04:17,365 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-8) NoCacheFilter.doFilter() URI: /Patrac/
16:04:17,405 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-7) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
16:04:17,460 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-8) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:05:47,769 INFO  [stdout] (http-/127.0.0.1:8443-7) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -8106288024707282506
16:05:47,773 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-7) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:05:47,808 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-6) NoCacheFilter.doFilter() URI: /Patrac/
16:05:47,809 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-7) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
16:05:47,856 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-7) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:06:01,409 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = 6737131848251158629
16:07:01,419 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -3248726216386741006
16:07:01,423 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = -7798326820709515585
16:07:18,188 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-8) NoCacheFilter.doFilter() URI: /Patrac/
16:07:18,188 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:07:18,219 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-1) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1
16:07:18,250 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-1) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml 
```

但是，有时会发生以下情况：

```
16:08:48,536 INFO  [stdout] (http-/127.0.0.1:8443-7) Destroying: com.patrac.controller.statemachine.WorkflowManager, ID = 601708170643229812
16:08:48,537 INFO  [com.patrac.filter.NoCacheFilter] (http-/127.0.0.1:8443-7) NoCacheFilter.doFilter() URI: /Patrac/index.xhtml
16:08:48,540 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host]] (http-/127.0.0.1:8443-3) Exception sending request initialized lifecycle event to listener instance of class org.jboss.weld.servlet.WeldListener: javax.ejb.NoSuchEJBException: JBAS016055: EJB has been removed
    at org.jboss.as.weld.ejb.StatefulSessionObjectReferenceImpl.getBusinessObject(StatefulSessionObjectReferenceImpl.java:124) [jboss-as-weld-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:108) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at com.patrac.controller.statemachine.WorkflowManager$Proxy$_$$_Weld$Proxy$.toString(WorkflowManager$Proxy$_$$_Weld$Proxy$.java) [Patrac-ejb.jar:]
    at java.lang.String.valueOf(String.java:2854) [rt.jar:1.7.0_07]
    at java.lang.StringBuilder.append(StringBuilder.java:128) [rt.jar:1.7.0_07]
    at org.jboss.weld.context.SerializableContextualInstanceImpl.toString(SerializableContextualInstanceImpl.java:60) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at java.lang.String.valueOf(String.java:2854) [rt.jar:1.7.0_07]
    at java.lang.StringBuilder.append(StringBuilder.java:128) [rt.jar:1.7.0_07]
    at org.jboss.weld.context.beanstore.AttributeBeanStore.attach(AttributeBeanStore.java:109) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.jboss.weld.context.AbstractBoundContext.activate(AbstractBoundContext.java:66) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.jboss.weld.servlet.WeldListener.requestInitialized(WeldListener.java:141) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:372) [jbossweb-7.0.17.Final.jar:]
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:897) [jbossweb-7.0.17.Final.jar:]
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:634) [jbossweb-7.0.17.Final.jar:]
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:2039) [jbossweb-7.0.17.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
16:08:48,561 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http-/127.0.0.1:8443-7) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1 
```

堆栈跟踪始终出现在浏览器窗口中，因此在会话超时时浏览器发出请求后会发生这种情况。只有在 SFSB 被销毁的几乎同时（毫秒内）收到请求时才会发生这种情况。它永远不会在注销时发生，尽管 302 REDIRECT 会导致浏览器在 SFSB 被销毁后仅几毫秒内发出请求。似乎不仅时间是一个因素，而且每次发生这种情况时都会抛出 ViewExpiredException 。

似乎正在发生的事情是因为会话超时但 EJB 没有立即删除，当浏览器发出请求时，JBoss 从超时会话中删除 EJB，然后抛出 EJB 已被删除而不是首先删除的异常创建一个新的 EJB 并将其绑定到新会话。

如何处理 NoSuchEJBException，或者更好地完全避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:43:40.327

通过将 ViewExpiredExceptionHandler 重定向到 facelet viewExpired.xhtml 解决了这个问题。

在此更改之前，ViewExpiredExceptionHandler 被重定向到 Web 应用程序的根目录 /Patrac，并且 web.xml 中的以下条目导致另一个重定向到 index.xhtml：

```
 <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list> 
```

此外，index.xhtml 被配置为刷新到 /Patrac，这将被重定向到 /Patrac/index.xhtml，这将导致 ViewExpiredException，这将导致另一个重定向 /Patrac，这将重定向到欢迎页面，/ Patrac/index.xhtml，全部快速连续。

```
<a4j:poll id="poll" interval="#{(session.maxInactiveInterval + 30)*1000}" onbegin="window.document.location.href='/Patrac'"/> 
```

通常，没有问题。但是根据 Servlet 规范，会话不一定会在部署描述符中指定的时间完全销毁——存在一些变化。因此，有时当浏览器刷新发生在服务器端会话被销毁的几毫秒内，并且 JBoss 还没有完成清理其状态时，就会抛出 NoSuchEJBExceptions。

将 index.xhtml 中的客户端 ajax 轮询/超时更改为以下内容，并确保 viewExpiredException.xhtml 没有执行任何浏览器刷新/ajax 轮询，从而使问题消失。

```
<a4j:poll id="poll" interval="#{(session.maxInactiveInterval + 30)*1000}" onbegin="window.document.location.href='/Patrac/viewExpired.xhtml"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:25:34.670

尝试使用 StatefulTimeout

```
 @StatefulTimeout(unit = TimeUnit.MINUTES, value = 30) 
```

# css - 如何在表格中有一个struts2表格？

> ID：12765196
> 
> 赞同：2
> 
> 时间：2012-10-07T00:55:48.930
> 
> 标签：css, jsp, struts2

我试图将我的表格放在一个表格中，但它会生成一个表格并让它变得一团糟。生成的表如下：

```
 <div>
<s:form action="myaction" >
  <table border="1">
   <tr>
    <td><s:textfield name="name" label="Name" /></td>
    <td><s:textfield name="family" label="Family" /></td>
    <td><s:submit/></td>
   </tr>
  </table>
   </s:form>
 </div> 
```

源代码 ：

```
<div>
 <form id="myaction" name="myaction" action="/application/myaction.action" method="post">
        <table class="wwFormTable">   <<<generated table
       <table border="1">
         <tr>
         <td><tr>
                <td class="tdLabel"><label for="Search_Name" class="label">Name:</label></td>
             <td
               ><input type="text" name="Name" value="" id="Search_Name"/></td>
            </tr>
            </td>
          <td><tr>
               <td class="tdLabel"><label for="Search_Family" class="label">Family:</label></td>
         <td
          ><input type="text" name="Family" value="" id="Search_Family"/></td>
      </tr>
      </td>
  <td><tr>
       <td colspan="2"><div align="right"><input type="submit" id="Search_0" value="Submit"/>
         </div></td>
        </tr>
        </td>
   </tr>
   </table>
    </table></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:39:28.910

`"simple"`如果您不想使用 S2 的默认主题，请使用`"xhtml"`主题。

您将失去 S2 的自动错误报告。您不妨考虑创建自己的主题。

或者，您可以`"simple"`在单个控件上使用主题。

[请参阅“主题和模板”文档以开始使用](http://struts.apache.org/2.x/docs/themes-and-templates.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:58:11.140

尝试在 struts 表单标签中使用任何主题

例如：

```
<s:form action="Courses" theme="css_xhtml">
  <table border="0">
    <tr>
      <td><s:textfield name="courseAbbr" /></td>
    </tr>
  </table>
</s:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T17:41:59.267

也许您应该改用此代码...

```
<sp:form >
    <tr>
        <td>
            <table>
                <sp:textfield name="name"></sp:textfield>
            </table>
        </td>
        <td>
            <table>
                <sp:textfield name="family"></sp:textfield>
            </table>
        </td>
        <td>
            <table>
                <sp:submit/>
            </table>
        </td>
    </tr>
</sp:form> 
```

# c# - C# windows 窗体应用程序，从子窗体关闭父窗体

> ID：12765199
> 
> 赞同：0
> 
> 时间：2012-10-07T00:56:17.603
> 
> 标签：c#, forms, parent-child

我知道这听起来有点令人困惑，但它就是这样。所以我有这个父表单，当我单击一个按钮时，会出现一个新的子表单（请注意，我的父表单仍然打开）。我想要的是当我从我的子表单中按下一个按钮时，我想要一个新的父表单来显示并关闭从一开始就已经打开的父表单。我希望这听起来不会令人困惑。我尝试玩弄它，但似乎没有任何效果我的父母表格上有这样的东西

```
Form2 loging = new Form2();    
loging.ShowDialog(); 
```

在我的孩子表格上

```
Form1 loging = new Form1();
loging.Close()
loging.ShowDialog();
this.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:22:50.313

根据您对 Mitch 的评论，听起来您需要在关闭子表单后重新绑定主表单上的数据。这是比关闭/重新打开主窗体更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:11:18.947

根据您对 Mitch 的评论，您应该这样做：

1.  在您的父表单中，创建一个指向您的客户列表的静态 ListView 对象

    ```
    public partial class Form1 : Form
    {
        public static ListView lsvCustomer; 
        public Form1()
        {
            InitializeComponent();
            // this will allow access from outside the form
            lsvCustomer = this.listView1; 
        }

        private void button1_Click(object sender, EventArgs e)
        {
           frmInput f = new frmInput();
           f.ShowDialog(this);
        }
    } 
    ```

2.  然后在您的子表单中，您直接从您的子表单更新列表，如下所示：

    ```
    public partial class frmInput : Form
    {
        public frmInput()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //update user input to customer list in parent form
            Form1.lsvCustomer.Items.Add(textBox1.Text);
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T01:06:13.633

简而言之，您无法更改窗口的父级，也无法更改窗口是否为模态。销毁孩子，关闭父母，打开一个新的父母，显示一个新的孩子。或者，如果子窗口不需要是模态的，则创建子窗口，`Form.Show()`然后在子窗体中执行以下操作：

```
parentForm.Close();
Form newParent = new NewParentForm();
newParent.Show();
this.BringToFront(); 
```

MFC 曾经能够伪装成模态，但它通过使用自定义窗口过程来做到这一点——这在 C# 中并不是特别容易做到的。

# java - 错误：无法找到或加载主类 hello.world.HelloWorld

> ID：12765201
> 
> 赞同：4
> 
> 时间：2012-10-07T00:56:26.253
> 
> 标签：java

我正在尝试运行这个名为“hello user”的项目。我是 Java 新手，所以写了一个简单的程序，取你的名字，并显示“Hello”。在运行它时，我收到以下错误：

```
run:
Error: Could not find or load main class hello.world.HelloWorld
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

但是当我运行 file 时`HelloWorld.java`，它​​做得很好

我在 Netbeans IDE 7.2 上执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:30:20.250

它可能与 IDE 有关，而不是编码错误。由于“运行文件”运行正常，但“运行项目”没有，我相信你在 IDE 本身中需要设置一些东西。右键单击项目，然后选择“设置为主”，现在运行项目。我是只是猜测，可能对您没有帮助。但值得一试。如果没有帮助，请也粘贴您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:59:52.813

您需要运行`.class`包含该`public static void main(String[] args)`方法的文件..

在这里，您`HelloWorld.java file`可能包含一个`class`with`main()`方法.. 所以，您可以运行它..

这是因为，任何 Java 程序的执行都是从调用`main()`..开始**`JVM`**的`main()`

因此，请确保无论`class`您正在运行什么文件，它都应该有`main()`方法..

**更新**：-对于起点，您可能可以跳过使用`packages`.. 只需使用没有包的普通 Java 类..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T01:06:36.143

Your class needs a `public static void main(String[] args)` function. And moreover I suspect that the error could be in the package.

If you want your class in `<main_package>.<sub_package>`, The directory structure is

```
- main_package
    - sub_package
        -HelloWorld.java 
```

And be sure to write your class like this.

```
package main_package.sub_package;

public class HelloWorld {

    public static void main(String[] args){
        System.out.println("Hello " + args[o]);
    }

} 
```

This is all due to the naming convention in Java

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T03:04:23.857

此消息也可能出现在 Eclipse（在我的情况下为 Juno 4.2.2）中，我发现了两个可能的原因。在我的情况下： 1\. DTD 出错。我删除了文件并解决了问题*。2\. 清理项目后，我在外部构建的一个外部 Jar 已被删除，从 Properties -> Java Build Path -> Libraries 中可以看出。*

*以上问题解决后，需要重启Eclipse

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-01T17:25:21.867

如果您使用的是 intellij idea，那么只需重建（清理和构建）项目可能会解决您的问题。因为 intellij 可能仍在尝试加载不存在或已更改的旧类

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-07T01:02:06.277

确保您调用如下所示：

```
 public class HelloWorld {

        public static void main(String[] args) {
            System.out.println("hello user");
        }
    } 
```

以独立模式运行Java类，`public static void main(String[] args)`是入口方法，这是必须的。

# git - 撤消“git reset --merge”

> ID：12765204
> 
> 赞同：5
> 
> 时间：2012-10-07T00:56:44.520
> 
> 标签：git, merge, reset, undo

我已经做了：

```
git reset --merge 
```

我丢失了对某些文件的最新修改，如何撤消最后一个操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T01:52:00.903

您可以查看您的 reflog 以找到您之前的提交：

```
git reflog 
```

找到之前的提交后，复制 sha-1 哈希并

```
git reset <commit sha-1> --hard 
```

虽然，如果您丢失的是未提交的修改，那么它们就丢失了。

# python - Python 子进程库：从 Python 运行 grep 命令

> ID：12765207
> 
> 赞同：0
> 
> 时间：2012-10-07T00:57:10.790
> 
> 标签：python, bash, shell

我正在尝试使用子进程库从我的 Python 模块运行 grep 命令。因为，我正在对 doc 文件执行此操作，所以我正在使用 Catdoc 第三方库来获取计划文本文件中的内容。我想将内容存储在文件中。我不知道我哪里出错了，但是程序无法生成纯文本文件并最终无法获得 grep 结果。我已经浏览了错误日志，但它是空的。感谢所有的帮助。

```
def search_file(name, keyword):
    #Extract and save the text from doc file
    catdoc_cmd = ['catdoc', '-w' , name, '>', 'testing.txt']
    catdoc_process = subprocess.Popen(catdoc_cmd, stdout=subprocess.PIPE,stderr=subprocess.PIPE, shell=True)
    output = catdoc_process.communicate()[0]
    grep_cmd = []
    #Search the keyword through the text file
    grep_cmd.extend(['grep', '%s' %keyword , 'testing.txt'])
    print grep_cmd
    p = subprocess.Popen(grep_cmd,stdout=subprocess.PIPE,stderr=subprocess.PIPE, shell=True)
    stdoutdata = p.communicate()[0]
    print stdoutdata 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:06:57.320

On UNIX, specifying `shell=True` will cause the first argument to be treated as the command to execute, with all subsequent arguments treated as *arguments to the shell itself*. Thus, the `>` won't have any effect (since with `/bin/sh -c`, all arguments after the command are ignored).

Therefore, you should actually use

```
catdoc_cmd = ['catdoc -w "%s" > testing.txt' % name] 
```

A better solution, though, would probably be to just read the text out of the subprocess' `stdout`, and process it using `re` or Python string operations:

```
catdoc_cmd = ['catdoc', '-w' , name]
catdoc_process = subprocess.Popen(catdoc_cmd, stdout=subprocess.PIPE,stderr=subprocess.PIPE)
for line in catdoc_process.stdout:
    if keyword in line:
        print line.strip() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:07:39.447

I think you're trying to pass the > to the shell, but that's not going to work the way you've done it. If you want to spawn a process, you should arrange for its standard out to be redirected. Fortunately, that's really easy to do; all you have to do is open the file you want the output to go to for writing and pass it to popen using the stdout keyword argument, instead of PIPE, which causes it to be attached to a pipe which you can read with communicate().

# python - count() 方法中的整数到布尔转换

> ID：12765210
> 
> 赞同：7
> 
> 时间：2012-10-07T00:57:32.830
> 
> 标签：python

```
[1, 1, 1, 2, 2, 3].count(True)

>>> 3 
```

如果返回所有不等于的值，为什么返回`3`而不是返回？`6``bool(i)``True``i``0`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T00:58:08.587

```
In [33]: True == 1
Out[33]: True

In [34]: True == 2
Out[34]: False

In [35]: True == 3
Out[35]: False 
```

`True`和`False`是 的实例`bool`，并且`bool`是 的子类`int`。

从[文档](http://docs.python.org/library/numbers.html#numbers.Integral)：

> [布尔值] 表示真值 False 和 True。表示值 False 和 True 的两个对象是唯一的布尔对象。布尔类型是普通整数的子类型，**布尔值在几乎所有上下文中的行为分别类似于值 0 和 1，**例外是当转换为字符串时，返回字符串“False”或“True”，分别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:33:55.393

最好通过理解来完成：

```
>>> sum(1 for i in [1,1,1,2,2,3,0] if i)
6 
```

或者

```
sum(bool(i) for i in [1,1,1,2,2,3,0]) 
```

或以相反的方式计算，因为 False 没有任何歧义，不是 0

```
>>> li=[1, 1, 1, 2, 2, 3, 0]
>>> len(li) - li.count(False)
6 
```

更好的是：

```
sum(map(bool,li)) 
```

# mysql - 算在where语句中？

> ID：12765213
> 
> 赞同：0
> 
> 时间：2012-10-06T23:53:52.663
> 
> 标签：mysql

我理解这个错误，我不知道如何解决这个问题。也许我写错了，但我应该有超过 1 个计数？我应该对每个网址进行计数吗？我只想显示 url 以及当超过 1 时它重复了多少次。

```
mysql> select count(*) as c, url from PageInfo where c>1 group by url;
ERROR 1054 (42S22): Unknown column 'c' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:58:08.510

我不知道 mySQL 但在 MSSQL 我会做

```
select count(url) as c, url from PageInfo group by url having count(url) > 1; 
```

因此更改是更改`count(*)`to`count(url)`并将您的过滤器移动到`having`子句中（并在那里添加一个额外的计数，因为您不能在有子句的 select 子句中引用名称）。

# javascript - Primefaces 从 2.2.1 版更改为 3.4 版？

> ID：12765217
> 
> 赞同：0
> 
> 时间：2012-10-07T00:58:13.567
> 
> 标签：javascript, jquery, primefaces

我正在整合在线白板项目，这里可以找到源 [代码](http://code.google.com/p/online-whiteboard/)。它最初是为 primefaces 2.2.1 版编写的，但我们希望与使用最新 primefaces 3.4 版的主应用程序集成。更改为最新版本后，我们收到很多 javascript 错误，其中很少粘贴在下面。如果我们必须从 primefaces 的 2.2.1 版本升级到 3.4，我们需要寻找什么？

# 错误

```
Uncaught TypeError: Object [object Object] has no method 'dialog' whiteboard.js.jsf:67
Uncaught ReferenceError: whiteboardDesigner is not defined :8080/emyed-whiteboard/whiteboard/workplace/fc4b4afe-f96f-442b-a0d0-bb29a46836dc/9fb61421-8c0f-4cbb-b0f7-96dc5e31bd56/:73
Resource interpreted as Image but transferred with MIME type text/css: "http://localhost:8080/emyed-whiteboard/javax.faces.resource/whiteboard.css.jsf?ln=css". jquery.js.jsf:14
Uncaught ReferenceError: whiteboardDesigner is not defined :8080/emyed-whiteboard/whiteboard/workplace/fc4b4afe-f96f-442b-a0d0-bb29a46836dc/9fb61421-8c0f-4cbb-b0f7-96dc5e31bd56/:82 
```

根据上述错误，未定义 whiteboardDesigner。但它已经在其中一个 javascript 中定义。

出现错误的 HTML 页面

```
 <button type="button" title="Draw Free Line" onclick="whiteboardDesigner.switchToMode('freeLineMode', 'pointer')" class="toolboxItem ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" value="Draw Free Line">
Uncaught ReferenceError: whiteboardDesigner is not defined 
```

Javascript

```
// create a global whiteboard designer instance
whiteboardDesigner = new WhiteboardDesigner(new WhiteboardConfig(), whiteboardId, user, pubSubUrl, pubSubTransport); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:47:25.413

除了[PrimeFaces 博客，PrimeFaces](http://blog.primefaces.org/)[在其 Google 代码站点上](https://code.google.com/p/primefaces/wiki/MigrationGuide)保留了迁移指南。

我有点担心看到你发布的代码。它看起来像 Java，而不是 JavaScript。（虽然我不是 JavaScript 专家。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:37:15.447

发现，我们已经在资源目录中包含了 jQuery 库。以下是为解决问题而采取的两项措施。

```
1.Since primefaces 3.4 comes with latest version of jQuery library, we have removed the library which we added in the resource dir. This have resolved the issue. 
2\. Added jQuery-UI to the resource dir for dialog function to work 
```

# python - '"NoneType' 对象不可下标"。试图创造蒙蒂霍尔理论

> ID：12765219
> 
> 赞同：2
> 
> 时间：2012-10-07T00:58:16.640
> 
> 标签：python, python-3.x

（我的意思是蒙蒂霍尔问题，这个网站不会让我提交标题中带有“问题”的东西）

我正在尝试在 python 中创建 Monty Hall 问题，我以为我有一个很好的计划，但我收到错误““NoneType”对象不可下标”。当我尝试嵌套列表时会发生这种情况。有谁知道我该怎么做？或修复它？

谢谢你。

这是代码：

```
car = 0
goat = 0
turns = 0
amount = 100

import random

items = ["New Car", "Goat", "Goat"]
doors = ["Door1", "Door2", "Door3"]

while turns < amount:
    x = random.shuffle(items)
    door = random.shuffle(doors)
    door1 = [door[0], x[0]]
    door2 = [door[1], x[1]]
    door3 = [door[2], x[2]]

    new_list = [door1, door2, door3]

    player_choice = random.randint(0, 2)
    if player_choice == 0:
        print("You have chosen {0}, and behind that is a {1}".format(door1[0], door1[1]))
        if new_list[0][1] == "New Car":
            car += 1
            turns += 1
        else:
            goat += 1
            turns += 1 
```

然后错误：

```
Traceback (most recent call last):
  File "<string>", line 250, in run_nodebug
  File "C:\Programming\Random Programs\Monty Hall Problem.py", line 16, in <module>
    door1 = [door[0], x[0]]
TypeError: 'NoneType' object is not subscriptable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T01:04:23.077

`random.shuffle`不返回结果。它只是修改您作为参数传递的列表。

也许你想要这样的东西？

```
random.shuffle(items)
random.shuffle(doors)
door1 = [doors[0], items[0]]
door2 = [doors[1], items[1]]
door3 = [doors[2], items[2]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:59:51.167

`random.shuffle`就地洗牌它不会返回任何东西......我想你想要`random.choice`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T01:02:25.947

`random.shuffle`就地打乱列表，但不返回任何内容。

改用`random.choice`：

```
door1 = [random.choice(doors), random.choice(items)] 
```

# .net - .NET 项目设计

> ID：12765223
> 
> 赞同：0
> 
> 时间：2012-10-07T00:58:51.427
> 
> 标签：.net, desktop-application, setup-project

对我们大多数人来说，这可能是一个非常愚蠢的问题，但我完全不知道 .NET 项目层次结构应该如何......

我有 Java 背景，通常项目层次结构是

```
+project-db-layer
+project-common
+project-db-api
+project-business-layer
+project-ui 
```

通常，我为 Java 解决方案创建 5 个项目（这是最多的，我主要使用 3 个项目，如模型-视图-控制器层次结构）。

我想知道，如果有人可以在这里提出一些指导方针，或者指点我进行一些在线测试（我找不到一个像样的），那么项目结构应该如何在 .NET 中用于桌面应用程序。

PS：这个项目的背景很少。我计划制作一个基于 .NET v 2 的 .NET 应用程序（因为我的目标受众仍然拥有具有标准 RAM 的 WindowsXP）。桌面应用程序将是面向数据库的，保留客户记录、发票、仓库、库存、购买/销售等。

这让我想起了另一个问题，基于我的项目，.NET 是更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:17:08.970

The project layout you have described sounds appropriate for the type of application you describe. The only reccomendation I would make is that you use the .Net convention of the Project name being used for the Namespace. You would, therefore, end up with the slightly changed list of projects:

*   Company.ProjectName.DbLayer
*   Company.ProjectName.Common
*   Company.ProjectName.DbApi
*   Company.ProjectName.BusinessLayer
*   Company.ProjectName.Ui

This is, of course, very loose guidance, and it does not apply universally, but it is the reccomendation I give to my developers.

Re: @stakx, I do agree, you may not wish to rule out newer versions of .Net. You may see performance improvements on newer versions. With those requirements, you may wish to avoid WPF, as it imposes a slightly higher set of requirements, but the requirements for .net2 are near identical for .net4 for a winforms application. The real consideration is whether the target framework will already be installed.

# ios - iOS：使用自动布局更改 UIScrollview 的内容大小

> ID：12765224
> 
> 赞同：9
> 
> 时间：2012-10-07T00:58:55.487
> 
> 标签：ios, uiscrollview, ios6, autolayout

我在`UIScrollView`. 我试图在打开键盘时在滚动视图内容的底部添加一些空间，以便用户可以看到所有字段。`UISCrollView`我使用以下代码将表单视图添加到添加所有需要的约束中：

```
 [_infoView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[_infoView(1730)]" options:0 metrics:nil views:views]];

[_scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_infoView]|" options:0 metrics:nil views:views]];

[_scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_infoView]|" options:0 metrics:nil views:views]];

[_scrollView addConstraint:[NSLayoutConstraint constraintWithItem:_infoView
                                                        attribute:NSLayoutAttributeCenterX
                                                        relatedBy:NSLayoutRelationEqual
                                                           toItem:_scrollView
                                                        attribute:NSLayoutAttributeCenterX
                                                       multiplier:1
                                                         constant:0]]; 
```

如您所见，我在第一行中指定了表单的高度并`scrollview`自动调整其内容大小。现在我想增加表单的高度，所以我尝试用更大的高度重置约束，但它不起作用。然后我尝试使用该`[_scrollView setContentSize:]`方法，但这也行不通。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:27:20.180

如果我理解这个问题，我会建议在而不是调用上调整`contentInset`属性。请注意，文档说：`UIScrollView``layoutSubviews`

> 使用此属性可添加到内容周围的滚动区域。大小的单位是点。默认值为`UIEdgeInsetsZero`。

您仍然需要收听键盘隐藏/显示通知，以便知道何时调整滚动视图的高度：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

然后`keyboardWillShow`你可以这样做：

```
UIEdgeInsets insets = UIEdgeInsetsMake(0, 0, 100, 0);
scrollView.contentInset = insets; 
```

`100`是您要调整的高度`scrollView`。我使用 a 来执行此操作`UITableView`，其中我的表单元素为`UITableViewCell`s，并且效果很好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-05T11:36:46.737

我不确定你在哪里添加上面的代码，但下面应该可以解决你的问题

在您的 init 函数中，添加以下内容：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
        [center addObserver:self selector:@selector(noticeShowKeyboard:) name:UIKeyboardDidShowNotification object:nil];
        [center addObserver:self selector:@selector(noticeHideKeyboard:) name:UIKeyboardWillHideNotification object:nil]; 
```

将以下内容添加到您的 .h

```
CGSize keyboardSize;
int keyboardHidden;      // 0 @ initialization, 1 if shown, 2 if hidden 
```

将以下内容添加到您的 .m

```
-(void) noticeShowKeyboard:(NSNotification *)inNotification {
    keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    keyboardHidden = 1;
    [self layoutSubviews];        // Not sure if it is called automatically, so I called it

}
-(void) noticeHideKeyboard:(NSNotification *)inNotification {
    keyboardHidden = 2;
    [self layoutSubviews];       // Not sure if it is called automatically, so I called it

}

- (void) layoutSubviews
{
    [super layoutSubviews];

    if(keyboardHidden == 1) {
        scrollview.frame = CGRectMake(scrollview.frame.origin.x, scrollview.frame.origin.y, scrollview.frame.size.width, scrollview.frame.size.height + keyboardSize.height);
    }
    else if(keyboardHidden == 2) {
        scrollview.frame = CGRectMake(scrollview.frame.origin.x, scrollview.frame.origin.y, scrollview.frame.size.width, scrollview.frame.size.height - keyboardSize.height);
    }
} 
```

我覆盖`layoutsubviews`了，现在我认为它应该可以工作。

# c++ - 指向成员函数的 C++ 函数指针 - 它接收哪个地址？

> ID：12765228
> 
> 赞同：3
> 
> 时间：2012-10-07T00:59:19.897
> 
> 标签：c++, function-pointers

假设我有这个类：

```
class Shape
{
public:
    int value;

    Shape(int v) : value(v) {};

    void draw()
    {
        cout << "Drawn the element with id: " << value << endl;
    }
}; 
```

和以下代码（有效）

```
 Shape *myShapeObject = new Shape(22);

    void (Shape::*drawpntr)();
    drawpntr = &Shape::draw;

    (myShapeObject ->*drawpntr)(); 
```

我有一个 drawpntr 函数指针，指向 Shape 类的返回 0 参数的函数成员。

我想问的第一件事：

```
drawpntr = &Shape::draw; 
```

该函数是一个成员函数，这里没有对象.. drawpntr 接收什么地址？这个类甚至不应该存在

我同意这条线

```
(myShapeObject->*drawpntr)(); 
```

因为我知道我不能取消引用指向成员函数的函数指针（没有对象-> 没有函数），但是实际存储在 drawpntr 中的地址是什么？没有对象时

```
drawpntr = &Shape::draw; 
```

行被调用..并且该类也不应该作为实体存在

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T01:06:15.777

所有成员函数共享相同的代码，因此它们在内存的代码段中具有相同的地址。成员函数仅在不同的实例上运行，因为它们隐式传递了不同的`this`指针值。它们不以任何方式与它们操作的任何实例相关联。`drawpntr`如果函数是非虚拟的，则的实际值可以静态确定，如果函数是虚拟的，则可以动态（通过[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)）确定。

# c# - 搜索一项或全部

> ID：12765229
> 
> 赞同：-4
> 
> 时间：2012-10-07T00:59:35.513
> 
> 标签：c#, sql, linq-to-sql

我有一个包含两列的 SQL 表：

```
Name  Number    
A     0  
C     1         
B     2  
C     3 
```

我想使用 LINQ 搜索名称（一个或全部）

换句话说：这个函数：`Search("C")`。将给出以下结果：

```
C1
C3 
```

或搜索（全部）。结果：

```
A   0  
C   1  
B   2  
C   3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:18:23.467

首先，很不清楚你为什么要搜索你知道不会限制任何东西的东西，返回整套记录。

因此，如果您想知道如何使用 LINQ 搜索特定名称，请查看以下内容：

```
public class NameObject
{
     public string Name { get; set; }
     public int Number { get; set; }
}

static void Main(string[] args)
{
     List<NameObject> names = new List<NameObject>();

     names.Add(new NameObject(){ Name="A", Number = 1});
     names.Add(new NameObject(){ Name="B", Number = 1});
     names.Add(new NameObject(){ Name="B", Number = 2});
     names.Add(new NameObject(){ Name="C", Number = 1});
     names.Add(new NameObject(){ Name="C", Number = 2});

     var searchResult = names.Where(x=> x.Name == "C");
} 
```

此外，如果您使用的是 DataTable，您可以：

```
DataRow[] searchResult = table.Select("name = 'C'"); 
```

# javascript - 如何动态设置 src 地址？

> ID：12765231
> 
> 赞同：3
> 
> 时间：2012-10-07T00:59:43.187
> 
> 标签：javascript, src

我正在尝试从页面 url 中获取信息以设置数据文件的 src。

因此，假设页面 url 是：page.html?x=data_file_3（想法是我可以更改 url 以访问其他数据文件：data_file_4 等）

我抓取 url 的“data_file_3”部分并将其放入一个变量中：（我使用的代码工作正常——所以结果是）文件夹 =“/data_file_3/content.js”——这个文件的内容是只是一个数组

然后我试试这个：

```
<script id="url" type="text/javascript"></script>

<script language="javascript">
...
var u = document.getElementById('url');
u.src = folder;
...
</script> 
```

但这不起作用（数组数据没有显示在页面上）。我把这段代码放在我以前硬编码的地方：

```
<script type="text/javascript" src="/data_file_3/content.js"></script> 
```

硬编码版本有效。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T01:06:36.807

Sounds like you are trying to create script tags dynamically.

```
var scr = document.createElement('script');
    scr.src = 'script_path';

document.getElementsByTagName('head')[0].appendChild(scr); 
```

You can wrap this in a function where 'script_path' is whatever you're path you're passing in.

Note also that 'text/javascript' is not required. All browsers understand that its javascript.

# jquery - Rails - 通过 jQuery 验证错误创建对象

> ID：12765234
> 
> 赞同：0
> 
> 时间：2012-10-07T00:59:56.727
> 
> 标签：jquery, ruby-on-rails-3

我一直在关注[这个站点](http://stjhimy.com/posts/07-creating-a-100-ajax-crud-using-rails-3-and-unobtrusive-javascript)上的教程来创建一个 jQuery CRUD 表单。

我有一个`Artist`具有单一验证的模型来检查`display_name`字段的唯一性。

当发布创建操作时，WEBrick 日志的相关部分显示如下：

```
Started POST "/artists" for 10.1.1.1 at 2012-10-07 13:50:00 +1300
Processing by ArtistsController#create as JS
  Parameters: { (ommited parts for brevity) , "artist"=>{"display_name"=>"Banksy"}, "commit"=> "Create Artist"}
  User Load (0.6ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Artist Load (0.5ms)  SELECT `artists`.* FROM `artists`
   (0.4ms)  BEGIN
  Artist Exists (1.4ms)  SELECT 1 AS one FROM `artists` WHERE `artists`.`display_name` IS NULL LIMIT 1
   (0.5ms)  ROLLBACK
  Rendered artists/create.js.erb (0.5ms)
Completed 200 OK in 71ms (Views: 55.5ms | ActiveRecord: 3.4ms) 
```

我很难理解当很明显在传递的参数中`display_name`设置为非空字符串时，但在运行的验证查询中，它正在检查它是否为空的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:10:20.473

“POST /artists”控制器动作的源代码是什么？

该**创建**操作必须`params`适当地访问。在这种情况下，类似于：

```
def create
  @artist = Artist.create(params[:artist])
  # then render or redirect
end 
```

你的行动`Artist.create`是否正确`params`？

# json - Sencha Touch 可搜索列表——带有数据代理的新视图

> ID：12765236
> 
> 赞同：0
> 
> 时间：2012-10-07T01:00:04.590
> 
> 标签：json, sencha-touch, extjs

这里有两个简单的问题......我如何使用这个例子

[http://try.sencha.com/touch/2.0.0/examples/list-search/](http://try.sencha.com/touch/2.0.0/examples/list-search/)

的可搜索列表，但在新视图中打开？该示例将其定义为 app.js 中的主应用程序，但我想在“FirstApp.view.searchlist”中使用它

我知道答案很简单，但我仍然是一只年轻的蚱蜢，需要朝着正确的方向努力。

此外，我不想像示例那样从嵌入式存储中提取数据，而是想对其进行修改以从外部/代理 JSON 存储中提取数据，该存储的定义如下：

店铺：

```
Ext.define('FirstApp.store.StudentStore',{
extend:'Ext.data.Store',

config:{

    autoLoad:true,
    model:'FirstApp.model.people',
    sorters: 'lastName',
    proxy:{
        type:'ajax',
        url:'http://xxxyyyzzz.com/data/dummy_data.json',
        reader:{
            type:'json',
            rootProperty:'results'
        }
    }
}
}); 
```

模型：

```
Ext.define('FirstApp.model.people', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['firstName', 'lastName' , 'image','status', 'phone','rank','attendance', 'discipline','recent']
    }
}); 
```

那么，我怎样才能将该示例转换为我的应用程序中的“视图”，以及我的数据存储和模型？

任何帮助是极大的赞赏！谢谢！

杰克

**- - - - - -更新 - - - - - - -**

好的太棒了。通过将您的方法与我找到的另一个教程相结合，我能够实现搜索功能（激发）。现在还有一个问题……看起来很简单，但很难！选择/单击项目后，如何打开新的“详细信息”视图？

搜索列表：

```
Ext.define('FirstApp.view.MainPanel', {
extend: 'Ext.dataview.List',
alias : 'widget.mainPanel',

config: {
    store : 'Students',

    itemTpl:
        '<h1>{firstName:ellipsis(45} {lastName:ellipsis(45)}</h1>' ,
    itemCls:'place-entry',

    items: [
        {
            xtype: 'toolbar',
            docked: 'top',

            items: [
                {
                    xtype: 'searchfield',
                    placeHolder: 'Search People...',
                    itemId: 'searchBox'
                }
            ]
        }
    ]
}
}); 
```

详细信息视图（我想在从搜索列表/主面板视图中单击名称时打开）：

```
Ext.define('FirstApp.view.Details',{
    extend:'Ext.Panel',
    xtype:'details',
    config:{
    layout:'fit',
    tpl:'<div class="image_container"><img src="{image}"></div>' +
        '<h1>{firstName:ellipsis(25)} {lastName:ellipsis(25)}</h1>'+
        '<div class="status_container">{status:ellipsis(25)}</div> '+
        '<div class="glance_container">    <div class="value_box"><div class="value_number"> {rank:ellipsis(25)}</div> <p class="box_name">Rank</p> </div>    <div class="value_box"><div class="value_number"> {attendance:ellipsis(25)}</div> <p class="box_name" style="margin-left: -10px;">Attendance</p> </div>  <div class="value_box"><div class="value_number">{discipline:ellipsis(25)}</div> <p class="box_name" style="margin-left: -4px;">Discipline</p> </div>    <div class="value_box"><div class="value_number"> {recent:ellipsis(25)}</div> <p class="box_name">Recent</p> </div> </div> '+
        '<h2>Phone:</h2> <div class="phone_num"><p><a href="tel:{phone:ellipsis(25)}">{phone:ellipsis(25)}</a></p></div>'+
        '<h3>Some info:</h3><p>Round all corners by a specific amount, defaults to value of $default-border-radius. When two values are passed, the first is the horizontal radius and the second is the vertical radius.</p>',

    scrollable:true,
    styleHtmlContent:true,
    styleHtmlCls:'details'
}

}) 
```

搜索控制器：

```
Ext.define('FirstApp.controller.SearchController', {
    extend : 'Ext.app.Controller',

    config: {
        profile: Ext.os.deviceType.toLowerCase(),
        stores : ['StudentStore'],
        models : ['people'],
        refs: {
            myContainer: 'MainPanel',
            placesContainer:'placesContainer'
        },
        control: {
            'mainPanel': {
                activate: 'onActivate'
            },
            'mainPanel searchfield[itemId=searchBox]' : {
                clearicontap : 'onClearSearch',
                keyup: 'onSearchKeyUp'
            },
            'placesContainer places list':{
                itemtap:'onItemTap'
            }
        }

    },

    onActivate: function() {
        console.log('Main container is active');
    },

    onSearchKeyUp: function(searchField) {
        queryString = searchField.getValue();
        console.log(this,'Please search by: ' + queryString);

        var store = Ext.getStore('Students');
        store.clearFilter();

        if(queryString){
            var thisRegEx = new RegExp(queryString, "i");
            store.filterBy(function(record) {
                if (thisRegEx.test(record.get('firstName')) ||
                    thisRegEx.test(record.get('lastName'))) {
                    return true;
                };
                return false;
            });
        }

    },

    onClearSearch: function() {
        console.log('Clear icon is tapped');
        var store = Ext.getStore('Students');
        store.clearFilter();
    },

    init: function() {
        console.log('Controller initialized');
    },
    onItemTap:function(list,index,target,record){  // <-----NOT WORKING 
        this.getPlacesContainer().push({
            xtype:'details',
            store:'Students',
            title:record.data.name,
            data:record.data
        })

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:29:17.950

好问题。我假设您正在尝试构建列表或数据视图。这里的关键是给你的商店一个'storeId'。我在下面修改了您的商店：

```
Ext.define('FirstApp.store.StudentStore',{
    extend:'Ext.data.Store',
    config:{
        storeId: 'Students', // Important for view binding and global ref
        autoLoad:true,
        model:'FirstApp.model.people',
        sorters: 'lastName',
        proxy:{
            type:'ajax',
            url:'http://xxxyyyzzz.com/data/dummy_data.json',
            reader:{
                type:'json',
                rootProperty:'results'
            }
        }
    }
}); 
```

然后在您的视图中，您引用要绑定到的商店。这是我的一个应用程序中的示例列表视图。请注意，配置对象有“存储”，它引用了我们上面的存储：

```
Ext.define('app.view.careplan.CarePlanTasks', {
    extend: 'Ext.dataview.List',
    xtype: 'careplanTasks',
    requires: [
        'app.view.template.CarePlan'
    ],
    config: {
        store: 'Students', // Important!  Binds this view to your store
        emptyText: 'No tasks to display',
        itemTpl: Ext.create('app.view.template.CarePlan'),
    },

    constructor : function(config) {
        console.log('CarePlan List');
        this.callParent([config]);
    }
}); 
```

现在您有了 storeId，您可以通过执行以下操作在应用程序的任何位置访问此商店：

```
Ext.getStore('Students') 
```

您也可以通过调用 load 方法从服务器加载记录：

```
Ext.getStore('Students').load(); 
```

您可以在应用程序的任何位置执行此操作，但通常最好在您的控制器中执行此操作。

希望这可以帮助。

======= 更新您的更新 ======

所以看看你的代码我认为你需要修改你的列表视图和控制器。给“FirstApp.view.MainPanel”一个 xtype：“MainPanel”。接下来修改您的控制器配置，如下所示：

```
config: {
    profile: Ext.os.deviceType.toLowerCase(),
    stores : ['StudentStore'],
    models : ['people'],
    refs: {
        mainPanel: 'MainPanel',    // set the object KEY to the name you want to use in the control object and set the VALUE to the xtype of the view
        placesContainer:'placesContainer'
    },
    control: {
        'mainPanel': {   //  this matches the key above, which points to your view's xtype
            activate: 'onActivate',
            itemtap: 'onItemTap'  //  listen for the item tap event on this List
        },
        'mainPanel searchfield[itemId=searchBox]' : {
            clearicontap : 'onClearSearch',
            keyup: 'onSearchKeyUp'
        },
        'placesContainer places list':{
            itemtap:'onItemTap'
        }
    }

}, 
```

# ruby-on-rails - 在 factorygirl 中，初始化 field2 时有什么方法可以引用 field1 的值？

> ID：12765252
> 
> 赞同：16
> 
> 时间：2012-10-07T01:03:27.840
> 
> 标签：ruby-on-rails, factory-bot

在工厂中，如何引用正在创建的对象中其他字段之一的值？

假设我的模型 Widget 有两个字段，`nickname`并且`fullname`

在我的工厂内部，我想在每次创建工厂时使用 Faker 创建一个不同的随机昵称。（终于想通了我必须使用sequence(:nickname)，否则所有工厂的名字都是一样的。）

为了使一些断言更容易测试，我想生成一个基于昵称的全名，比如`fullname = "Full name for #{nickname}"`

```
FactoryGirl.define do
  factory :widget do 
    sequence(:nickname) { |n| Faker::Lorem.words(2).join(' ') }
    sequence(:fullname) { |n| "Full name for " + ????? }
  end
end 
```

不管我放在哪里？？？去，我得到`#<FactoryGirl::Decl...`的不是昵称。

我尝试了 name、name.to_s、name.value ......似乎没有任何效果。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-07T01:35:12.787

是的。[这是 Factory Girl 的入门文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)中的一个示例：

```
factory :user do
  first_name "Joe"
  last_name  "Blow"
  email { "#{first_name}.#{last_name}@example.com".downcase }
end

FactoryGirl.create(:user, last_name: "Doe").email
# => "joe.doe@example.com" 
```

另外，我通常分别定义我的序列，在`config/application.rb`：

```
FactoryGirl.define do
  sequence(:random_string) { |s| ('a'..'z').to_a.shuffle[0, 30].join }
end 
```

你可能会从做同样的事情中受益。然后你可能会做类似的事情：

```
FactoryGirl.define do
  factory :widget do 
    nickname generate(:name_faker) # assuming you had defined a :name_faker sequence
    fullname generate("Full name for #{nickname}")
  end
end 
```

# c# - 试图从空的一对一属性分配 id：ContentItemRecord - Orchard CMS

> ID：12765254
> 
> 赞同：1
> 
> 时间：2012-10-07T01:03:31.813
> 
> 标签：c#, asp.net, orchardcms

我正在为 Orchard CMS 编写模块。

有几张桌子。在 Migrations.cs 中：

它工作正常：

```
 SchemaBuilder.CreateTable("CustomerPartRecord", table => table
            .ContentPartRecord()
            .Column<string>("FirstName", c => c.WithLength(50))
            .Column<string>("LastName", c => c.WithLength(50))
            .Column<string>("Title", c => c.WithLength(10))
            .Column<DateTime>("CreatedUtc")
            );

        ContentDefinitionManager.AlterPartDefinition("CustomerPart", part => part
            .Attachable(false)
            );

        ContentDefinitionManager.AlterTypeDefinition("Customer", type => type
            .WithPart("CustomerPart")
            .WithPart("UserPart")
            );
        return 6; 
```

但它不起作用：

```
 SchemaBuilder.CreateTable("OrderPartRecord", t => t
            .ContentPartRecord()
            .Column<int>("CustomerId", c => c.NotNull())
            .Column<DateTime>("CreatedAt", c => c.NotNull())
            .Column<decimal>("SubTotal", c => c.NotNull())
            .Column<string>("Status", c => c.WithLength(50).NotNull())
            );

        ContentDefinitionManager.AlterPartDefinition("OrderPart", part => part
             .Attachable(false)
        );

        ContentDefinitionManager.AlterTypeDefinition("Order", type => type
            .WithPart("OrderPart")
        ); 
```

尝试添加订单时出现错误。错误：**试图从空的一对一属性分配 id：ContentItemRecord**出了什么问题？

升级版：

处理程序：

```
public class OrderPartHandler : ContentHandler
{
    public OrderPartHandler(IRepository<OrderPartRecord> repository)
    {
        Filters.Add(StorageFilter.For(repository));
    }
} 
```

并创建订单：

```
_orderRepository.Create(order); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:31:59.030

您永远不应该为零件记录自己创建记录。如果要在没有内容项的情况下创建它，请将其设为常规记录，而不是内容部分记录。内容部分记录需要始终与内容项相关联并通过内容管理器创建，而不是直接通过存储库创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T18:30:52.600

正如我所猜测的，您正在尝试使用存储库创建一个订单，如果您没有采取足够的措施，则会导致错误。要解决此问题，请使用 ContentManager 创建订单，因为 Order 实际上是一个内容项。

PS:/这个错误和nHibernate有关，特别是关于entites之间的关联。阅读此链接以获取更多信息：[休眠：尝试从空的一对一属性分配 id：员工](https://stackoverflow.com/questions/11104897/hibernate-attempted-to-assign-id-from-null-one-to-one-property-employee)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-11T23:18:43.793

实际上，您可以通过将缺少的参数分配给您的零件记录来解决此问题，它只需要填写订单。ContentPartRecord = your_content_item.Record;

# javascript - 数据表中的字母数字零填充？

> ID：12765256
> 
> 赞同：2
> 
> 时间：2012-10-07T01:03:46.163
> 
> 标签：javascript, jquery, datatables, google-sheets

我觉得这有一个“呃”的答案，但是

我正在使用 jQuery 插件 DataTables.net 来显示 json Google 电子表格。你可以在这里看到它的作用：http: [//jsfiddle.net/ukoku/jEqu2/2/](http://jsfiddle.net/ukoku/jEqu2/2/)

我想按位置列对行进行排序，该列以 A1、B2 格式读取，如国际象棋。对于数字，我知道我需要零填充，但我不知道如何将零添加到字母数字数据，我也不知道如何使用 DataTables 而不是常规字符串来做到这一点。

编辑：对不起，我不清楚。我认为需要添加零的位置是在字母字符和位置插槽中的数字之间。例如，目前，Q9 排序在 Q14 之后。我需要它首先按 alpha (Ax, Bx) 排序，然后在该排序中作为数字。通常，当我的 1 显示为高于 10 时，这是因为我需要用零填充来获得 001 和 010。但我不确定如何在 Q009 和 Q014 等的数字之间添加零，或者这甚至是正确的解决方案。

最终，目标是自定义 CSS 以在组中显示具有相同位置的行。老实说，我也不知道这是否可能，但因为我什至无法对数据进行排序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:40:10.017

这是你追求的正确轨道吗？[http://jsfiddle.net/rMUWD/](http://jsfiddle.net/rMUWD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:40:11.097

这是另一种方法：

```
var compare = function(a, b) {
        return a > b ? 1 : a === b ? 0 : -1;
    },
    compareAlphanumeric = function (a, b) {
        alpha = compare(a.alpha, b.alpha);
        numeric = compare(a.numeric, b.numeric);
        return (alpha === 1 | (alpha === 0 && numeric === 1)) ? 1 : (alpha === 0 && numeric === 0) ? 0 : -1;
    };
jQuery.fn.dataTableExt.oSort['alphaNumeric-asc'] = function(a, b) {
    var r = /^([A-Za-z]+)([0-9]+$)/,
        a = {
            "alpha": a.split(r)[1],
            "numeric": parseInt(a.split(r)[2], 10)
        },
        b = {
            "alpha": b.split(r)[1],
            "numeric": parseInt(b.split(r)[2], 10)
        };
        return compareAlphanumeric(a, b);
};
jQuery.fn.dataTableExt.oSort['alphaNumeric-desc'] = function(a, b) {
    var r = /^([A-Za-z]+)([0-9]+$)/,
        a = {
            "alpha": a.split(r)[1],
            "numeric": parseInt(a.split(r)[2], 10)
        },
        b = {
            "alpha": b.split(r)[1],
            "numeric": parseInt(b.split(r)[2], 10)
        };
        return compareAlphanumeric(b, a); //reverse a and b for desc
}; 
```

在这里工作小提琴：http: [//jsfiddle.net/jEqu2/3/](http://jsfiddle.net/jEqu2/3/)

该`compare`函数是您的基本比较函数。`compareAlphanumeric`根据以下真值表返回 1、0 或 -1：

```
/*
        Alpha   Numeric     Result
        -1      -1          -1
        -1      0           -1
        -1      1           -1
        0       -1          -1
        0       0           0
        0       1           1
        1       -1          1
        1       0           1
        1       1           1
*/ 
```

大部分实际工作是在`oSort`函数中完成的：

```
//First declare a RegExp to split the location into an array of [letter, number] 
var r = /^([A-Za-z]+)([0-9]+$)/,
//convert the passed "a" parameter to an object containing its letter and number,
//and parse the number portion to an actual number instead of its string representation.
    a = {
        "alpha": a.split(r)[1],
        "numeric": parseInt(a.split(r)[2], 10)
    },
//do the same for b
    b = {
        "alpha": b.split(r)[1],
        "numeric": parseInt(b.split(r)[2], 10)
    };
//return the alphanumeric comparison
    return compareAlphanumeric(a, b); 
```

而在降序`oSort`中，我们只需要切换传递给的参数的顺序即可`compareAlphanumeric`。

# visual-studio - 通过 tfsbuild 发布 vs 包

> ID：12765262
> 
> 赞同：2
> 
> 时间：2012-10-07T01:04:47.960
> 
> 标签：visual-studio, iis, deployment, packages, tfsbuild

我目前正在通过 Visual Studio 和 tfs bulid 2010 集成 web 部署包发布，并且有一些问题：

*   对于不同的环境，每个环境都需要发布配置文件吗？
*   作为发布的一部分，是否可以针对数据库执行生成的数据库？
*   如果以前不存在，是否可以在发布配置文件中创建应用程序池、网站、对其进行配置等？
*   Re tfs build - 是否可以单击按钮以基于选定的发布配置文件部署成功的构建？

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T18:44:27.770

我知道您正在尝试使用 webdeploy，尽管大多数企业架构将使用其他工具。我建议使用 powershell 远程工具。这为您提供了 .NET 框架的全部功能，可以使用您想要的任何工具进行数据库部署。

我通常创建不同的转换来转换配置文件。根据您部署到的环境，您可以使用与您的环境匹配的适当转换或根据需要操作转换。

# python - Python - 搜索文本中的出现

> ID：12765264
> 
> 赞同：0
> 
> 时间：2012-10-07T01:05:26.537
> 
> 标签：python, algorithm, search

我有一个短语列表。我需要检查这些短语的一部分是否出现在一大段文本中。

例如

*   `Marshmallows are delicious and warm`
*   `Giant unicorns sign wonderful melodies of the imminent apocalypse`
*   `The wizards assaulted the fort, but forgot their spell books at home!`

文本块是：

`Marshmallows are delicious. I've been snacking on them while the wizards assaulted the fort. The unicorns sign wonderful melodies of those who forgot their spell books at home. [...]`

* * *

额外说明：

我不能依靠停用词来拆分，例如“and”、“or”和标点符号。

* * *

关于图书馆和/或策略的任何想法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:18:45.490

您可以按长度降序创建每个短语的“部分”，然后在文本块中找到这些部分。

例如

```
>>> text = "Marshmallows are delicious. I've been snacking on them while the wizards assaulted the fort. The unicorns sign wonderful melodies of those who forgot their spell books at home."
>>> phrase='Giant unicorns sign wonderful melodies of the imminent apocalypse'
>>> words = phrase.split()
>>> parts = list()
>>> for length in range(len(words),3,-1): #Assuming a part is atleast 3 words
    for start in range(0,len(words)-length + 1):
        parts.append(' '.join(words[start:start+length]))
>>> #A step of -1 ensures the list is sorted in a decreasing order of length.
>>> parts
['Giant unicorns sign wonderful melodies of the imminent apocalypse', 'Giant unicorns sign wonderful melodies of the imminent', 'unicorns sign wonderful melodies of the imminent apocalypse', 'Giant unicorns sign wonderful melodies of the', 'unicorns sign wonderful melodies of the imminent', 'sign wonderful melodies of the imminent apocalypse', 'Giant unicorns sign wonderful melodies of', 'unicorns sign wonderful melodies of the', 'sign wonderful melodies of the imminent', 'wonderful melodies of the imminent apocalypse', 'Giant unicorns sign wonderful melodies', 'unicorns sign wonderful melodies of', 'sign wonderful melodies of the', 'wonderful melodies of the imminent', 'melodies of the imminent apocalypse', 'Giant unicorns sign wonderful', 'unicorns sign wonderful melodies', 'sign wonderful melodies of', 'wonderful melodies of the', 'melodies of the imminent', 'of the imminent apocalypse']
>>> for part in parts:
    if part.lower() in text.lower(): #for case insensitivity
        found = part
        break

>>> found
'unicorns sign wonderful melodies of' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:21:38.797

查看 Xapian 以存储可搜索信息并检索它（结果 = 结果！）以及 Levenshtein 距离算法，其中有几个模块可供使用。

# android - 两次 setOnItemSelectedListener

> ID：12765267
> 
> 赞同：0
> 
> 时间：2012-10-07T01:06:02.693
> 
> 标签：android

我有 3 个微调器 A,B,C 并且我希望当用户从 A 中选择元素时，B 会得到他的项目。它的工作很好：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> aParentView, View aView, int aPosition, long anId) {

            String selectedCompany2=String.valueOf(spinner.getSelectedItem());
            String selectedCompany =  getResources().getStringArray(R.array.songsArray)[spinner.getSelectedItemPosition()]; //the company name

            ArrayList<String> results = new ArrayList<String>();

            x="'"+selectedCompany2+"'";

            Cursor c = customersDB.rawQuery("SELECT Name, Street, Block, City  FROM "    +
                    TABLE_NAME +

                    " where Name == "+ x , null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String name = c.getString(c.getColumnIndex("Name"));
                        String street = c.getString(c.getColumnIndex("Street"));

                        String city = c.getString(c.getColumnIndex("City"));

                        if(!results.contains(street))
                            results.add(street);

                    }while (c.moveToNext());
                }
            }

            String [] countries = results.toArray(new String[results.size()]);

            moduleOfSpecificCompany = (Spinner) findViewById(R.id.degemSpinner1);
            ArrayAdapter<String> spinnerArrayAdapter_degem = new ArrayAdapter<String>(DelekActivity.this,   android.R.layout.simple_spinner_item, countries);           
            spinnerArrayAdapter_degem.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down vieww
            moduleOfSpecificCompany.setAdapter(spinnerArrayAdapter_degem);

        }

        public void onNothingSelected(AdapterView<?> aParentView) {
            // your code here

        }

    }); 
```

但是，我也希望当用户在 B 中选择某些东西时，会出现 c 的数据。我写了这个，我得到了一个错误：

```
moduleOfSpecificCompany.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> aParentView, View aView, int aPosition, long anId) {

            String selectedCompany3=String.valueOf(moduleOfSpecificCompany.getSelectedItem());
            ArrayList<String> results2 = new ArrayList<String>();

            x="'"+selectedCompany3+"'";

            Cursor c = customersDB.rawQuery("SELECT Name, Street, Block, City  FROM "    +
                    TABLE_NAME +

                    " where Name == "+ x , null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String name = c.getString(c.getColumnIndex("Name"));
                        String street = c.getString(c.getColumnIndex("Street"));
                        String Block = c.getString(c.getColumnIndex("Block"));
                        String city = c.getString(c.getColumnIndex("City"));

                        if(!results2.contains(Block))
                            results2.add(Block);

                    }while (c.moveToNext());
                }
            }

            String [] countries2 = results2.toArray(new String[results2.size()]);

            /*moduleOfSpecificCompany = (Spinner) findViewById(R.id.manoaSpinner1);
            ArrayAdapter<String> spinnerArrayAdapter_manoa = new ArrayAdapter<String>(DelekActivity.this,   android.R.layout.simple_spinner_item, countries2);          
            spinnerArrayAdapter_manoa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down vieww
            moduleOfSpecificCompany.setAdapter(spinnerArrayAdapter_manoa);

            if (customersDB != null)
                customersDB.execSQL("DELETE FROM " +   TABLE_NAME);
            customersDB.close();
**/

        }

        public void onNothingSelected(AdapterView<?> aParentView) {
            // your code here

        }

    }); 
```

代码不是那么相关。关键是当我使用 setOnItemSelectedListener 2 次时出现错误。谢谢ypi，对我的英语感到抱歉。

日志：

```
 10-07 01:15:30.907: D/dalvikvm(2588): GC_EXTERNAL_ALLOC freed 748 objects / 55680 bytes in 242ms
10-07 01:15:45.305: D/dalvikvm(2588): GC_FOR_MALLOC freed 3176 objects / 154984 bytes in 116ms
10-07 01:16:10.644: D/dalvikvm(2588): GC_EXTERNAL_ALLOC freed 186 objects / 8784 bytes in 83ms
10-07 01:16:12.674: D/AndroidRuntime(2588): Shutting down VM
10-07 01:16:12.674: W/dalvikvm(2588): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-07 01:16:12.684: E/AndroidRuntime(2588): FATAL EXCEPTION: main
10-07 01:16:12.684: E/AndroidRuntime(2588): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.save_money/com.example.save_money.DelekActivity}: java.lang.NullPointerException
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.os.Looper.loop(Looper.java:123)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at java.lang.reflect.Method.invokeNative(Native Method)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at java.lang.reflect.Method.invoke(Method.java:521)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at dalvik.system.NativeStart.main(Native Method)
10-07 01:16:12.684: E/AndroidRuntime(2588): Caused by: java.lang.NullPointerException
10-07 01:16:12.684: E/AndroidRuntime(2588):     at com.example.save_money.DelekActivity.onCreate(DelekActivity.java:3057)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-07 01:16:12.684: E/AndroidRuntime(2588):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-07 01:16:12.684: E/AndroidRuntime(2588):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:17:11.453

如果您想要查询中来自多个名称的数据，您需要使用类似的查询

```
SELECT Name, Street, Block, City FROM TableName WHERE Name = '1stName' 
```

然后如果用户选择C，你可以追加`OR Name = '2ndName'`

然后附加一个';'

# java - java：如何检查两个数组是否包含公共元素？

> ID：12765271
> 
> 赞同：1
> 
> 时间：2012-10-07T01:06:34.103
> 
> 标签：java

有没有简单的方法来检查两个数组是否包含任何公共元素？这合适吗？数组包含 char 类型。

```
Arrays.asList(encryptU).contains(Ualpha[randNum])); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T01:46:16.947

如果数组很小，那么具有嵌套 for 循环（例如 @scaryrawr's）的解决方案将表现最佳。

如果数组足够大，那么`O(N^2)`上述解决方案的复杂性就会有问题。解决方案是使用 HashSet；例如

```
HashSet<Character> tmp = new HashSet<Character>();
for (char ch : arr1) {
    tmp.add(ch);
}
for (char ch : arr2) {
    if (tmp.contains(ch)) {
        // elements in common!!
    }
} 
```

这是`O(N)`及时的，尽管比例常数相当大。（我认为您需要数组大小的乘积为 20 或 30 才能比嵌套循环解决方案更快……但这是一个猜测。）此外，这需要`O(N)`临时空间。

* * *

如果字符的*范围*有限，那么您可以使用 a`BitSet`而不是 a `HashSet`。这也将大致`O(N)`在时间和空间上，尽管字符的范围也是复杂性的一个因素，因此称其`O(N)`为过度简化。

* * *

But we are probably "over-thinking" this. The best advice would probably be to implement something simple, and if there is a suspicion that performance is a real concern then **profile it** to avoid wasting your time with *unnecessary* optimizing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:18:30.997

任何常见元素：

```
char[] a = {...};
char[] b = {...};
boolean hasCommon = false;
for (char alpha : a) {
    for (char beta : b) {
        if (alpha == beta) {
            hasCommon = true;
            break;
        }
    }
    if (hasCommon) { break; }
} 
```

只是检查一个中的某个随机位置是否包含在另一个中会给你一些假阴性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T01:23:54.877

试试这个例子

```
Character[] arr1 = {'a', 'b', 'c', 'd', 'e'}
Character[] arr2 = {'a', 'b', 'c', 'd', 'e'}

boolean matches = arr.toString().equals(arr2.toString()); 
```

这将检查两个数组是否完全相等。

如果你想看看它们是否有共同点，

```
List<Character> chars = Arrays.asList(arr1);
List<Character> chars2 = Arrays.asList(arr2);

boolean matches = (chars.retainAll(chars2).size()==0)?false:true; 
```

希望这可以帮助。

# boolean-logic - Boolean Algebra simplification

> ID：12765286
> 
> 赞同：0
> 
> 时间：2012-10-07T01:09:45.413
> 
> 标签：boolean-logic

is it possible to simply this Boolean function

```
(!A*!B*!C) + (!A*!B*C*!D) + (A*!B*!C*D) + (A*!B*C*!D) + (A*B*!C*!D) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:29:15.103

I came up with this:

```
(!B*(!A*(!C+!D))+A*(C XOR D)) + (A*B*!C*!D) 
```

Messy to look at, but there are fewer terms.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:29:26.470

Look at the truth table:

```
A B C D X
0 0 0 0 1
0 0 0 1 1
0 0 1 0 1
0 0 1 1 0
0 1 0 0 0
0 1 0 1 0
0 1 1 0 0
0 1 1 1 0
1 0 0 0 0
1 0 0 1 1
1 0 1 0 1
1 0 1 1 0
1 1 0 0 1
1 1 0 1 0
1 1 1 0 0
1 1 1 1 0 
```

It looks like you can take the three parts of the table where X = 1 and simplify this to the sum of three terms:

```
!A*!B*!(C*D) + A*!B*(C^D) + A*B*!C*!D 
```

Note that I've use XOR (^) in the second term. If you can't use XOR then you'll need to expand the second term a little.

You can reduce the number of terms further by factoring out either `!B` or `A` for two of the terms, e.g.

```
!B*(!A*!(C*D) + A*(C^D)) + A*B*!C*!D 
```

or:

```
!A*!B*!(C*D) + A*(!B*(C^D) + B*!C*!D) 
```

# php - If Else to look into SQL permissions

> ID：12765288
> 
> 赞同：-1
> 
> 时间：2012-10-07T01:10:20.070
> 
> 标签：php, mysql

So I'm trying to write a temp way to login to the admin panel using an if else statement while I read up on PDO. If someone could tell me where the error lies here it would be much appreciated.

I've updated my code after looking around a little bit, but I still have the issue of nothing showing up where my code belongs and pulling the information it should.

```
<?php
        $admin    = $_SESSION['admin_login'];
        $con=mysql_connect("$server","$user","$pass");
        if
        (!$con)
        {
            die('Could not Connect' .mysql_error());
            }
        mysql_select_db($webdb, $con);
            $result=mysql_query("SELECT * FROM permissions WHERE username= '$admin' ");
            $row = mysql_fetch_assoc($result);
            if ($row['permissions']=="3")
                {
                    echo 'Admin Panel';
                }
                elseif ($row['permissions']=="1")
                {
                    echo 'include acp_error.php';
                }

                    ?> 
```

Is what I've updated to; Does anyone see any issue here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:16:28.503

mysql_query returns a statement HANDLE, not the value(s)/row(s) you're trying to select. YOu need to FETCH a row of data to be able to get the values you need to compare.

```
$result = mysql_query(...) or die(mysql_error());
$row = mysql_fetch_assoc($result);
if ($row['somefield'] == 3) { 
    ...
} 
```

Please note that things like

```
"$webdb" 
```

are pointless cargo-cult programming. A simple

```
$webdb 
```

is all that's needed for such things. There is not point in creating a new string, whose sole contents are the contents of a variable - just use the variable itself.

As well, note that you're vulnerable to [SQL injection](http://bobby-tables.com) via that $_SESSION value you're using in the query. If that's a text value, and contains user-supplied data, your server is trivial to pwn.

# asp.net - get sql data based on logged in user

> ID：12765294
> 
> 赞同：1
> 
> 时间：2012-10-07T01:11:09.210
> 
> 标签：asp.net, sql-server

i am using Visual Studio 2010 professional and SQL server 2008 R2 express

what i am trying to do is detect who is the logged in user and display their detail in a gridview. the logged in user has used asp.net authentication, i have allowed users to access the page using the login process, they have the "user" role set to allow. the admin account can view all users in the account from a gridview, but i also want a logged in user to see their own details in the members section.

this is shown in the code-behind

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs)
Session("MemberDetails") = User.Identity.Name
End Sub 
```

this is in the main page

```
<asp:Gridview>
<Columns>
<asp:BoundField DataField="username" HeaderText="username" />
<$ many more fields here--$>
</Columns>
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
SelectCommand="SELECT username, salutation, fname, sname, address, suburb, postcode, dayphone FROM member WHERE (username = @username)">
<SelectParameters>
<asp:SessionParameter Name="username" SessionField="MemberDetails" />
</SelectParameters>
</asp:SqlDataSource> 
```

all of it should work but instead i get a blank page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:28:02.210

您的 GridView 标签不完整，尤其是`DataSourceID="SqlDataSource1"`

```
<asp:Gridview runat="server" ID="gvUsers" DataSourceID="SqlDataSource1">
<Columns>
<asp:BoundField DataField="username" HeaderText="username" />
<$ many more fields here--$>
</Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T01:54:10.427

这个 vb 代码隐藏解决了我的问题：

```
Protected Sub SqlDataSource1_Selecting(ByVal sender As Object, ByVal e As SqlDataSourceSelectingEventArgs) Handles SqlDataSource1.Selecting
        e.Command.Parameters(0).Value = Me.User.Identity.Name
    End Sub 
```

# c++ - 使用退格控制字符擦除

> ID：12765297
> 
> 赞同：20
> 
> 时间：2012-10-07T01:11:46.337
> 
> 标签：c++, escaping

我正在尝试使用退格控制字符`'\b'`来擦除行尾的尾随逗号。虽然它在没有其他输出到`stdout`的情况下有效，但如果在 之后有另一个输出`'\b'`，它就变得无用了。这是一个例子：

```
#include <iostream>

using namespace std;

int main()
{
    int a[] =  { 1, 3, 4, 5, 6, 32, 321, 9};
    for ( int i = 0; i < 8; i++) {
        cout << a[i] << "," ;
    }
    cout << "\b" ;
    //cout << endl;
    return 0;
} 
```

在上面的代码块中，如果该行被注释为所见，我们将得到所需的结果，在数字 9 之后没有逗号。但是，如果该行未注释，则逗号重新出现。

在我的程序中，我不希望逗号在那里，但希望在 9 之后有一个结束行。我该怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-07T01:18:09.977

擦除控制台上最后一个字符的常用方法是使用序列`"\b \b"`。这会将光标向后移动一个空格，然后写入一个空格以擦除字符，然后再次退格，以便新的写入从旧位置开始。请注意，`\b`它本身仅移动光标。

当然，您总是可以避免首先输出逗号：

```
if(i > 0) cout << ",";
cout << a[i]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T04:53:42.377

或者，如果您喜欢 C+11 hack：

```
adjacent_difference(a.begin(), a.end(), ostream_iterator<int>(std::cout),
  [](int x, int)->int { return std::cout << ",", x; }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-01T12:06:13.877

使用退格转义序列会导致小问题。如果你想打印你的数组并且你已经预先定义了它 - 它的大小总是非零。现在假设你不知道你的数组、集合、列表或任何你想打印的东西的大小，它可能是零。如果你已经打印了某事。在打印你的东西之前，你应该打印零元素，你的退格键会吞噬已经打印的东西。

假设您获得了指向内存位置和要打印和使用的元素数量的指针...：

```
void printA(int *p, int count)
{
    std::cout << "elements = [";

    for (int i = 0; i < count; i++)
    {
        std::cout << p[i] << ",";
    }

    std::cout << "\b]\n";
} 
```

...打印：

```
int tab[] = { 1, 2, 3, 4, 5, 6 };

printA(tab, 4);
printA(tab, 0); // <-- a problem 
```

你最终得到：

```
elements = [1,2,3,4]
elements = ] 
```

在这种特殊情况下，您的左括号被“吃掉”了。最好不要在元素后打印逗号并删除最后一个，因为您的循环可能执行零次并且没有逗号可删除。而是在之前打印逗号 - 在每个元素之前是 - 但跳过第一个循环迭代 - 像这样：

```
void printB(int *p, int count)
{
    std::cout << "elements = [";

    for (int i = 0; i < count; i++)
    {
        if (i != 0) std::cout << ',';
        std::cout << p[i];
    }

    std::cout << "]\n";
} 
```

现在这段代码：

```
printB(tab, 4);
printB(tab, 0); 
```

生成这个：

```
elements = [1,2,3,4]
elements = [] 
```

带退格键 esc。下一个 你永远不知道你可能会删除什么。

[工作示例](https://www.onlinegdb.com/Hk4Ho58UV)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-15T19:37:17.260

是的， \b 只会移动诅咒，所以当你结束该行时，它只会将其移回该行的末尾。所以要实际擦除最后一部分，在 \b 之后有一个空格来实际擦除最后一个逗号。例如：cout<<"\b";

# c - 如果另一个头文件已经包含它，我是否需要在源中包含系统头文件？

> ID：12765298
> 
> 赞同：0
> 
> 时间：2012-10-07T01:12:12.360
> 
> 标签：c, header

例如，在头文件`example.h`中，我写道：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h> 
```

在源文件`example.c`中，我写道：

```
#include "example.h` 
```

如果我需要这些库的功能，我还需要明确写这些行吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:14:36.993

不。

请记住，这包括类似于某种文本替换的工作，因为它是由**预处理器**完成的。

当您编写时，在某个文件上：

```
#include "someheader.h" 
```

就像该行将替换为头文件的实际内容一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:13:52.617

不，你没有。

就像它的名字一样，包含会将头文件的全部内容包含在 .c 文件中。

如果您使用的是 linux，请尝试`cpp example.c`或`gcc -E example.c`查看有什么`#include`作用。*您将在您的文件上运行 c 预处理器，这是在编译之前解释所有 # 启动指令的程序*

# c# - 在 C# 中使用 DLL 时的工作流程

> ID：12765300
> 
> 赞同：0
> 
> 时间：2012-10-07T01:13:12.517
> 
> 标签：c#, dll, workflow

我正在尝试学习在库中编写代码并将它们编译成 C# 中的 DLL。

这就是我所做的：

我有一个主要的 VS 项目，我在其中拼凑了我正在编写的应用程序的不同部分。

我在单独的 VS 项目中编写我的课程。然后，我将它们编译成 DLL，我会将这些 DLL 复制到主 VS 项目中。主 VS 项目将引用这些 DLL，然后在其逻辑中使用它们。

然而，问题是当 DLL 中编译的代码出现错误或问题时，调试变得非常困难。编译器不会告诉错误究竟来自哪里。此外，当我对驻留在 DLL 中的类进行更改时，在处理主 VS 项目时，我必须始终重新编译和替换它们。

这样，我的工作流程变得非常突兀。使用 DLL 时正确的工作流程应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:15:39.393

将 DLL 项目添加到包含主项目的解决方案文件中，您将能够使用调试器中断该代码（右键单击解决方案 -> 添加现有项目）。

# css - div 外部的 html 内容出现在 div 内部

> ID：12765301
> 
> 赞同：2
> 
> 时间：2012-10-07T01:13:28.607
> 
> 标签：css, html

我的 DIVS 操作有问题。基本上我有一个 div 和 div 之外，如果我放一些 html 文本它仍然显示在 div 内。我不确定我做错了什么。如果有人可以偷看，我将不胜感激。提前致谢。

html:

```
<div id="content">

            <p>  To submit <?php echo $_SESSION['sight_type']?> sightings, choose a location type.</p>

        <div id = "form_location_type" >`

        <form method="POST" action="location_type_input.php">
            <table>
            <tr>
            <td><input type="radio" name="location_type" value="new"  /></td><td><p> New location</p></td></tr>
            <tr>
            <td><input type="radio" name="location_type" value="saved" /></td><td><p> Saved location</p></td>
            <td><input type="submit" value="Continue"></td></tr>
            <table>
        </form>
        </div>     <!-- End form_location_type div -->
         THIS SHOULD BE OUTSIDE ABOVE DIV BUT IT PRINTS INSIDE                   
    </div> <!-- End content div -->

    <div id="footer"> <?php include 'footer.php'; ?> </div> <!-- End footer div --> 
```

css（最相关的是最后评论的部分）

```
html { height: 100%; }
body, html { min-height: 100%; height: 100%;margin : 0;
    padding : 0; }
/*html, body {
    height:auto
    height: 100%; }/* Required */

body {

    width:100%;
    line-height : 1.8em;
    color : #000000;
    background : #F5F5FF; 
    }

#container {

    position: relative;
    min-height: 100%;
    width : 800px;
    margin : 0 auto 0 auto;
    border-style: solid;
    border-width:1px;
    background : #FFFFCC;
    -moz-box-shadow: 10px 10px 5px #888888; /* shadow border */
    box-shadow: 10px 10px 5px #888888;
    }
#footer {
    clear:both;
    position:absolute;
    text-align: center;
    left:0;
    bottom: 0;
    width: 800px;
    background : #FFFFCC;
    font : 75% "Trebuchet MS", verdana, arial, tahoma, sans-serif; 

    } 

/* form on form_location_type.php */   
#form_location_type {

margin: 0 auto;
background:white;
border:solid 1px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T01:17:11.353

确保正确关闭表：

```
<table>
    ...
</table> 
```

这似乎是问题所在：http: [//jsfiddle.net/RDGuY/2/](http://jsfiddle.net/RDGuY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:48:12.270

您没有正确关闭表。

添加

```
</table> 
```

而不是

```
<table> 
```

在 form_location_type div 的末尾

另外尝试在 form_location_type div 中添加一些底部填充：

在您的 CSS 中添加以下代码：

```
#form_location_type {
  padding-bottom: 2em;
} 
```

现在检查文本是否与表单 div 分离？？？

# c - 从 C 调用 R 函数“优化”

> ID：12765304
> 
> 赞同：0
> 
> 时间：2012-10-07T01:13:55.557
> 
> 标签：c, r

我是 C 的新手。

我正在尝试使用 C 中的 optim 函数。根据“编写 R 扩展”第 5.8 节，Nelder Mead 方法需要 16 个参数：

```
void nmmin(int n, double *xin, double *x, double *Fmin, optimfn fn,
           int *fail, double abstol, double intol, void *ex,
           double alpha, double beta, double gamma, int trace,
           int *fncount, int maxit); 
```

据我了解，与 R 接受函数参数中的默认值不同，C 要求函数的用户提供所有参数。尽管我阅读了 optim hep page，但我仍然无法理解其中一些参数的含义，即：

*   失败
*   进入
*   前任
*   fncount

如果有人能告诉我所有论点的描述在哪里，我将不胜感激。

ps

以下是我弄清楚它们是什么的论点：

*   n：参数个数，
*   xin：参数的初始值
*   x：存储退出时的最终参数，带有 fi
*   Fmin：目标函数的最终值
*   fn：目标函数
*   abstol：绝对宽容
*   maxit：最大迭代次数
*   跟踪：非负整数。如果是肯定的，则生成关于优化进度的跟踪信息。

以下是特定于 Nelder Mead 方法的一些参数：

*   alpha：R optim 函数使用 = 1

*   beta：R optim 函数使用 = 0.5

*   gamma: R optim function uses = 2 （我通过阅读 optim 函数代码找到了这些默认值）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:35:54.383

fail - 如果函数失败，则接收 true

inl - 用户初始化的转换容差

ex - 传递给优化函数 (fn) 的数据

alpha - 反射因子

beta - 收缩和减少因子

伽马扩展因子

fncount - 接收优化函数在迭代循环中被调用的次数

您可以在此处查看如何使用这些参数：

[http://fossies.org/dox/R-2.15.1/optim_8c_source.html#l00674](http://fossies.org/dox/R-2.15.1/optim_8c_source.html#l00674)

例如， inol 的使用方式如下：

```
convtol = intol * (fabs(f) + intol);
if (trace) Rprintf("  Scaled convergence tolerance is %g\n", convtol); 
```

这里有一些关于 Nelder-Mead 算法的更多细节，使用 Pascal 代码：

[http://books.google.com/books?id=M9hTn3UAheQC&pg=PA173](http://books.google.com/books?id=M9hTn3UAheQC&pg=PA173)

（计算机的紧凑数值方法：John C. Nash 的线性代数和函数最小化）

# objective-c - 不推荐的设置对象映射的方法

> ID：12765311
> 
> 赞同：0
> 
> 时间：2012-10-07T01:15:00.090
> 
> 标签：objective-c, ios, restkit

我有一个 Ruby On Rails 本地服务器正在运行，它为我提供以下 JSON：

```
[ { "content" : "Here is content",
    "created_at" : "2012-10-07T01:06:51Z",
    "id" : 4,
    "name" : "Joe",
    "title" : "Title 1",
    "updated_at" : "2012-10-07T01:06:51Z"
  },
  { "content" : "Here is content",
    "created_at" : "2012-10-07T01:07:09Z",
    "id" : 5,
    "name" : "John",
    "title" : "Title2",
    "updated_at" : "2012-10-07T01:07:09Z"
  }
] 
```

我正在使用 RestKit 将其解析为`Post`模型对象，如下所示：

```
- (void)loadObjects
{
    RKObjectMapping *objectMapping = [RKObjectMapping mappingForClass:[Post class]];
    [objectMapping mapKeyPath:@"id" toAttribute:@"postId"];
    [objectMapping mapKeyPath:@"created_at" toAttribute:@"createdAt"];
    [objectMapping mapKeyPath:@"content" toAttribute:@"content"];
    [objectMapping mapKeyPath:@"title" toAttribute:@"title"];
    [objectMapping mapKeyPath:@"name" toAttribute:@"name"];
    [objectMapping mapKeyPath:@"updated_at" toAttribute:@"updatedAt"];

    RKObjectManager* manager = [RKObjectManager objectManagerWithBaseURLString:@"http://localhost:3000/"];
    [manager loadObjectsAtResourcePath:@"/posts" objectMapping:objectMapping delegate:self];
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects {
    NSLog(@"%@", objects);
} 
```

这工作正常，但是`loadObjectsAtResourcePath:objectMapping:delegate:`不推荐使用。我认为我应该因此使用`loadObjectsAtResourcePath:delegate:`，但我无法找到一种方法来设置`objectMapping`. 有什么想法吗？

**更新**

我现在像这样设置委托：

```
[manager loadObjectsAtResourcePath:@"/posts" usingBlock:^(RKObjectLoader *loader) {
    loader.objectMapping = objectMapping;
    loader.delegate = self;
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:03:49.593

restkit[文档](http://restkit.org/api/master/Classes/RKObjectManager.html#//api/name/loadObjectsAtResourcePath%3ausingBlock%3a)说，如果您使用`loadObjectsAtResourcePath:usingBlock:`，您可以从 a 块内部设置 objectMapping。

```
- (void)loadObjectUsingBlockExample {
    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/monkeys.json" usingBlock:^(RKObjectLoader *loader) {
        loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[Monkey class]];
    }];
} 
```

# html - 如何从 web2py 数据库中制作下拉菜单

> ID：12765321
> 
> 赞同：1
> 
> 时间：2012-10-07T01:17:19.810
> 
> 标签：html, database, menu, web2py

我正在尝试从产品名称的 web2py 数据库中填充下拉导航栏。该表在 db.py 中定义如下：

```
db.define_table('product',
Field('prodid', unique=True),
Field('name'),
Field('stock', 'integer')) 
```

我做了一些研究，发现有很多方法可以从 SQL 数据库中使用 PHP，但是我无法找到任何关于从 web2py 中的本地数据库中检索的信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:52:15.573

这是向导提供的代码（在“格式”中进行了调整）：

```
########################################
db.define_table('t_products',
    Field('f_prodid', type='string',
          label=T('Prodid')),
    Field('f_name', type='string',
          label=T('Name')),
    Field('f_stock', type='string',
          label=T('Stock')),
    format='%(f_name)s',
    migrate=settings.migrate)

########################################
db.define_table('t_orders',
    Field('f_orderid', type='string',
          label=T('Orderid')),
    Field('f_product_name', type='reference t_products',
          label=T('Product Name')),
    format='%(f_orderid)s',
    migrate=settings.migrate) 
```

关键词是第二个表中的“参考”和第一个表中的“格式”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:53:46.870

试试这个：

```
{{ rows = db().select(db.product.ALL) }}
{{if len(rows):}}
<ul>
{{ for r in rows: }}
  <li>
    <a href="yourlink/{{=r.id}}">
        {{=r.name}}
    </a>
  </li>
{{pass}}
</ul>
{{pass}} 
```

# php - 简单的 PHP 电子邮件表单不起作用

> ID：12765323
> 
> 赞同：3
> 
> 时间：2012-10-07T01:17:39.697
> 
> 标签：php, html, forms, email

非常简单的电子邮件表单代码。工作过一次，但不再工作，即使在不同的地址。也就是说，电子邮件不再显示，但我并没有误会。

```
<form action="/mail-us.php" method="POST">
    <p>Name</p> <input type="text" name="name">
    <p>Email</p> <input type="text" name="email">
    <p>Message</p><textarea name="message" rows="6" cols="25"></textarea><br />
    <input type="submit" value="Send"><input type="reset" value="Clear">
</form> 
```

这是PHP

```
<?php $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    $formcontent="From: $name \n Message: $message";
    $recipient = "blah@x-matic.net";
    $subject = "X-Matic Contact Form";
    $mailheader = "From: $email \r\n";
    mail($recipient, $subject, $formcontent, $mailheader) or die("Error sending email!");
?> 
```

请注意，我使用我的 gmail 帐户（从 gmail 到电子邮件，而不是从表单到电子邮件）测试了电子邮件，并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T18:06:04.887

```
if(isset($_POST['submit']))
{
    $to = "xxx@google.com";
    $subject = "Email from Sender; // quotation marks end ;
    $name_field = $_POST['name'];
    $email_field = $_POST['email'];
    $message = $_POST['message'];
    $body = "From: $name_field\n E-Mail: $email_field\n Message:\n $message";

    mail($to, $subject, $body);
}
else
{
    echo "Mail sending Failure!";
}
?> 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:35:37.357

除非您想在您的计算机上安装[Pegasus Mail](http://pmail.com)`mail()` ，否则该功能将无法在您的本地计算机上运行，​​因为您的计算机没有安装邮件服务器。

要么，要么使用 SMTP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T05:05:53.067

在 localhost 中使用 SMTP 邮件，并在站点位于网络服务器（即您的网络主机）后切换到 mail()

至少那是我所做的。

# jquery - jquery如果url第一个路径名匹配href然后

> ID：12765324
> 
> 赞同：4
> 
> 时间：2012-10-07T01:18:01.370
> 
> 标签：jquery, regex, url, filter, href

这也参考了另一个线程：[jQuery - If URL matches href then move LI to top of UL?](https://stackoverflow.com/questions/4145420/jquery-if-url-matches-href-then-move-li-to-top-of-ul)

jQuery代码：

```
//set var to current url
var url = window.location.toString();

//if url matches li's anchor then bring it to the top of the list
$('.nav li a').each(function(){
   var myHref= $(this).attr('href');
   if( url == myHref) {
        $(this).closest("li").prependTo(".nav");
   }
}); 
```

HTML 只是来自 Wordpress 导航，因此类似于：

```
<navrole="navigation">
  <ul>
    <li>
      <a href=""> 
```

导航指向类别，并且 url 与 href 匹配，并且代码有效。但是，当我在一个类别的子页面中时，我无法弄清楚如何让代码也触发，例如当 url 是：

```
domain.com/category-name/child-page 
```

如果我可以让 Jquery 只检测到域之后的第一个路径名，那么我将是黄金。第一个路径名之后的任何内容都可以省略或设置为通配符或其他内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:36:02.607

您可以尝试使用`attribute contains selector`：

```
var dom = document.domain;
var f = location.pathname.split('/')[1]; 
var url = dom + "/" + f;

$('.nav li a[href*="'+url+'"]').closest("li").prependTo(".nav"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:27:27.337

我已经为我的网站实施了这种技术。我是这样做的：

```
var Tabs = ["Tab1", "Tab2", "Tab3", "Tab4", "Tab5"];
var pathname = document.location.pathname;
for (var i = 0; i < Tabs.length; i++) {

    //RegExp to check the name after first '/'
    var TabRE = new RegExp("^\/(" + Tabs[i] + ")");
    if (TabRE.test(pathname)) {
        //Tab identified!!!
    } 
```

或者，如果您只是想获得“通过域的第一个路径名”，您可以简单地做

```
var path = (document.location.pathname).substring(1);
var name;
if (path.indexOf('/') >= 0)
    name = path.substring(0, path.indexOf('/'));
else name = path; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T01:32:00.080

您将要使用路径名来访问您的域名之后的所有内容。然后用斜杠分割字符串。

```
var pathname = window.location.pathname;  //"category-name/child-page"
var path_components_arr = pathname.split("/");  //array containing components from above, in order. 
```

然后 path_components 给你一个数组，每个元素都是斜线之间路径的一部分。听起来你只需要那个数组的第一个元素......我相信你可以从那里拿走它！

希望有帮助！

# c# - PLINQ 查询，需要知道执行了多少次迭代

> ID：12765329
> 
> 赞同：0
> 
> 时间：2012-10-07T01:18:59.253
> 
> 标签：c#, c#-4.0, task-parallel-library, plinq, parallel-extensions

我基本上在做的是在一系列字母组合上并行迭代，当我得到我想要的组合时，它被认为是胜利。我想从这个查询中获得所有的胜利（它做得正确），但诀窍是如何跟踪执行胜利测试的次数（基本上是返回真/假的方法，它赢了）。

我正在类中创建一个实例变量，每次执行组合测试时都会递增，但每次运行该过程时，我都会为该实例变量获得不同的数字。我意识到这是一个线程问题，但我不确定如何解决它。

当遇到此问题时，查询需要停止的获胜次数有一个最大限制。如果我没有那个约束，我显然不需要知道组合运行的次数，因为它会运行所有组合，但是正如你所见，当我达到最大值时我需要中断查询限制。

```
public Results GetWinResults()
{
         ParallelQuery<string> winningCombos = from n in _nextCombination.GetNextCombo().AsParallel()                                          
                       where processNextCombo(n) // where there was a win
                       select n;

         List<string> wins = new List<string>();

         foreach (var winningCombo in winningCombos)
         {
               wins.Add(winningCombo);
               if (wins.Count == winsMaxLimit)
                  break;
         }

         return new Results { Wins = wins, CombosTried = totalCombosRun };
 }

 private bool processNextCombo(string combo)
 {
     totalCombosRun++;
     // do tests to see if combo was a winner
     if (didWin)
        return true;
     return false;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:23:20.977

您可以使用[Interlocked](http://msdn.microsoft.com/en-us/library/dd78zt0c%28v=vs.80%29.aspx)类以线程安全的方式递增 int：

```
 int totalCombosRun=0;

 private bool processNextCombo(string combo)
 {
     Interlocked.Increment(ref totalCombosRun);
     // do tests to see if combo was a winner
     if (didWin)
        return true;
     return false;
 } 
```

# exception - Watir-Webdriver：在错误/异常/失败时截屏。如何？

> ID：12765332
> 
> 赞同：0
> 
> 时间：2012-10-07T01:19:21.327
> 
> 标签：exception, error-handling, screenshot, watir-webdriver

我是 Watir-Webdriver 的新手。我写了一个函数来截取屏幕截图，它工作正常。我的问题是我需要在测试用例执行期间发生任何错误/异常或失败时调用该方法。我用谷歌搜索了它，找不到任何相关的东西。我试过救援块，但它对我不起作用。任何帮助表示赞赏。谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T02:05:32.817

[Alister Scott](https://stackoverflow.com/users/503158/alister-scott)有关于在使用黄瓜时获取[WatirMelon屏幕截图的信息：](http://watirmelon.com/2011/08/04/capturing-screenshots-in-watir-webdriver-cucumber/)

```
After do |scenario|
  if scenario.failed?
    Dir::mkdir('screenshots') if not File.directory?('screenshots')
    screenshot = "./screenshots/FAILED_#{scenario.name.gsub(' ','_').gsub(/[^0-9A-Za-z_]/, '')}.png"
    Browser::BROWSER.driver.save_screenshot(screenshot)
    embed screenshot, 'image/png'
  end
end 
```

# c - 在 Shell 中使用管道进行作业控制

> ID：12765336
> 
> 赞同：1
> 
> 时间：2012-10-07T01:21:32.100
> 
> 标签：c, shell, process, jobs

我正在用 C 编写一个 shell。我正在尝试为每个作业设置一个新的进程组。每个管道的第一个进程成为作业进程组的领导者，其他进程加入领导者的进程组。

因此，在这种情况下，`cat somefile | wc`流程`cat`将成为流程领导者。

如何使用 实现这种行为`setpgid`？如果我在每个进程上循环，我是否需要存储`pid`第一个 fork 的值并将其用作后续循环迭代的组 ID 以在子类中设置适当的进程组 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:18:06.677

如果我是你，我会使用父母收到的 fork() pid 并执行 setpgid(child_pid,your_gid);。getpgid(0) 可用于返回您的组 ID。使用这两条信息来执行 setpgid()。

# bash - Bash条件句中括号和方括号的区别

> ID：12765340
> 
> 赞同：77
> 
> 时间：2012-10-07T01:21:40.830
> 
> 标签：bash, bash, if-statement

在学习一点[bash](/questions/tagged/bash "显示标记为“bash”的问题")的同时，我看到了四种使用`if`语句的方式：

*   单括号 - ( ... )
*   双括号 - (( ... ))
*   单方括号 - [ ... ]
*   双方括号 - [[ ... ]]

bash中的括号和方括号有什么区别。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-07T02:23:22.497

您列出的测试：

*   单括号 - ( ... ) 正在创建一个子shell
*   双括号 - (( ... )) 用于算术运算
*   单方括号 - [ ... ] 是 POSIX 的语法`test`
*   双方括号 - [[ ... ]] 是 bash 条件表达式的语法（类似于`test`但更强大）

并不详尽，您可以使用*布尔逻辑*

```
if command; then ... 
```

也是，因为命令具有退出状态。在`bash`,`0`是`true`和 >`0`是`false`.

你可以看到这样的退出状态：

```
command
echo $? 
```

看 ：

[http://wiki.bash-hackers.org/syntax/basicgrammar](http://wiki.bash-hackers.org/syntax/basicgrammar)
[http://wiki.bash-hackers.org/syntax/arith_expr](http://wiki.bash-hackers.org/syntax/arith_expr)
[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-08T08:34:07.470

shell 本身只运行命令并评估其退出代码。零退出代码表示成功；所有其他值表示失败。

```
if command; then
    : things to do if the exit code from command was 0
else
    : things to do if it was not 0
fi

while command; do
    : things to do if the exit code was 0
done 
```

该命令`[`(aka `test`) 在条件句中非常常用，因为原始 Bourne shell 缺少内置运算符来检查字符串是否为空或文件是否存在。现代 shell 内置了这个命令，许多 shell 都有扩展和现代化的版本`[[`，但是这不能正确地移植到 POSIX `sh`，因此应该避免用于可移植脚本。[这个相关问题](/questions/3427872/whats-the-difference-between-and-in-bash)更详细地解释了两者之间的差异。

该符号`(( ... ))`引入了算术上下文。同样，这不是原始 Bourne shell 的一部分（它有专门的外部工具`expr`来处理这些事情），但现代 shell 内置了它。如果算术评估的结果是，则算术表达式的结果代码为 0不是 0（或错误）。

该符号`( command )` 创建一个子外壳并`command`在其中进行评估。在某些情况下，这实际上是必要且有用的，但如果您只是学习语法，则不太可能需要它。

...事实上，在我看到的大多数脚本中，这显然是没有必要的。

另一个需要注意的反模式是

```
command
if [ $? = 0 ]; then
    : things
fi 
```

您几乎不需要`$?`明确检查，特别是，将其与零进行比较是在幕后*专门*`if`为您做的事情。这应该简单地重构为`while`

 *```
if command; then
    : ... 
```*

# php - 如何从php中的下拉列表中获取值

> ID：12765341
> 
> 赞同：0
> 
> 时间：2012-10-07T01:21:40.607
> 
> 标签：php

我在一个表中有几个下拉列表，如果它不是 0，我正在尝试检索下拉列表的值。

我有一个项目表，每个项目都有下拉列表。下面是我创建下拉列表的方法，我给它命名为 tableid，因为这是特定产品的唯一标识符。

```
echo "<td><select name=". $row['goosedown_id'] .">
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>"; 
```

然后，一旦提交了表单，我就会尝试打印我可以打印的任何值......因为我不确定如何继续......我这样做是这样的。

```
$goosedown_id = check_input($_POST['goosedown_id']);
//..

goose down = $goosedown_id 
```

我希望能够打印出相关值或根据表中的其他项目（即价格等）计算价格，但我希望有人可以帮助我尝试首先访问不为 0 的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:23:37.620

您是否查看了您正在构建的页面的来源？你的表格将是

```
<td><select name="value_of_the_variable_your_insert"> 
```

不是

```
<td><select name="goosedown_id"> 
```

由于您要插入`$row['goosedown_id']`，因此您需要查找该变量的 VALUE，例如

```
$_POST[$row['goosedown_id']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T20:27:46.503

看看下面的例子：

```
<!DOCTYPE html>
<head>
    <link href="loginmodule.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <?php
    if (count($_POST)) {
        for ($i = 0; $i < $_POST["nr_rows"]; $i++) {
            echo "<h2>id=".$_POST["goosedown_id"][$i].", qty=".$_POST["qty"][$i]."</h2>\n";
        }
        die("<pre>".print_r($_POST, true)."</pre>\n");
    } else {
        // connect to the database
        $link = mysqli_init();

        // Adjust hostname, username, password and database name before use!
        $db = mysqli_real_connect($link, "localhost", "root", "", "test") or die(mysqli_connect_error());

        $SQL = "SELECT * FROM 5050goosedown ORDER BY price ASC";
        $result = mysqli_query($link, $SQL) or die(mysqli_error($link));

        $rows = array();
        for ($i = 1; $row = mysqli_fetch_assoc($result); $i++){
            $rows[] = array(
                'id'        => $row['goosedown_id'],
                'bgcolor'   => ($i % 2) ? '#F5F5F5' : '#E5E5E5',
                'name'      => htmlentities($row['name']),
                'size'      => ($row['width'] || $row['height']) ? $row['width'].'/'.$row['height'] : '',
                'fill'      => $row['normal_fill'].'/'.$row['our_fill'],
                'old_price' => $row['old_price'] ? $row['old_price'] : '',
                'price'     => $row['price']
            );
        }
    }
    ?>
    <form action="<?= $_SERVER['SCRIPT_NAME'] ?>" method="post">
        <table border="0" width="600">
            <tr>
                <th width="30%" colspan="2"><b>50/50 Goose Down:</b></th>
                <th width="30%"><i>Normal Fill / Our Fill</i></th>
                <th width="12.5%"><i>Old Price</i></th>
                <th width="12.5%"><i>Price</i></th>
                <th width="12.5%"><i>Quantity</i></th>
            </tr>
            <?php foreach ($rows as $row): ?>
            <tr bgcolor="<?= $row['bgcolor'] ?>">
                <td><?= $row['name'] ?></td>
                <td><?= $row['size'] ?></td>
                <td><?= $row['fill'] ?></td>
                <td><?= $row['old_price'] ?></td>
                <td><?= $row['price'] ?></td>
                <td>
                    <select name="qty[]">
                        <?php for ($i = 0; $i <= 8; $i++): ?>
                        <option value="<?= $i ?>"><?= $i ?></option>
                        <?php endfor ?>
                    </select>
                    <input type="hidden" name="goosedown_id[]" value="<?= $row['id'] ?>" />
                </td>
            </tr>
            <?php endforeach ?>
        </table>
        <input type="submit" name="myButton" id="myButton" value="Submit" />
        <input type="hidden" name="nr_rows" value="<?= count($rows) ?>">
    </form>    
</body>
</html> 
```

# clojure - 如何在线程 (->) 宏中键入提示？

> ID：12765342
> 
> 赞同：7
> 
> 时间：2012-10-07T01:21:44.103
> 
> 标签：clojure, macros

我有一些 Clojure 代码试图通过几层 Java 代码进行互操作（在这种情况下，[`java.nio.Path`](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/file/Path.html)通过[`java.nio.file.WatchEvent<?>`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchEvent.Kind.html)：

```
(defn unroll-event
  [^WatchEvent event]
  { :kind (.kind event)
    :context (.context event)
    :path (-> event .context .toAbsolutePath .toString)}) 
```

在这段代码中，我输入了 hinted `event`，所以我认为它*应该*能够弄清楚`.context`应该返回什么，因此能够弄清楚什么`.toAbsolutePath`和`.toString`做什么。我认为在这种情况下，由于[`.context`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchEvent.html#context%28%29)is defined 返回了一个泛型类型`T`，我想知道是否可以键入提示调用`.context`. 我已经尝试分别在`^java.nio.file.Path`to `.context`、 and`^Path`和`^String`to`.toAbsolutePath`和之前添加`toString`，但我仍然收到警告：

```
Reflection warning, junkcode/core.clj:28 - reference to field toAbsolutePath can't be resolved.
Reflection warning, junkcode/core.clj:28 - reference to field toString can't be resolved. 
```

在这种情况下我能做些什么吗？是因为它`->`是一个宏并且其中有用于类型提示的特殊规则吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:07:16.727

`(-> x .blah ^String .bar)`基本上，扩展为 ，`(^String .bar (.blah x))`这显然不是您想要提示的地方。关键是类型提示在任何上下文（例如宏）中都没有特殊行为：它只是应用于源代码符号的元数据。在您的示例`->`中，没有任何地方可以将元数据放在输入表单上，这会导致它在输出表单中出现在您想要的位置。所以你需要写一些其他的形式，比如`(-> ^Path (.context event) .toAbsolutePath str)`，例如。

此外，Clojure 的推理器对泛型类型一无所知，因此方法返回 T 被视为方法返回对象，这解释了为什么您需要在这里提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-12T19:11:27.177

我不知道这是否一直如此，但在 Clojure 1.4.0、1.5.1 和 1.6.0 中，`->`只要使用括号，就可以随时输入提示：

```
user=> (set! *warn-on-reflection* true)
true
user=> (fn [^java.nio.file.WatchEvent e] 
         (-> e ^java.nio.file.Path .context .toAbsolutePath))
Reflection warning, /private/var/folders/9_/wdph6m796zzc8trzcbtcmhrn5bjpt0/T/form-init8364673644863044068.clj:1:35 - reference to field toAbsolutePath on java.lang.Object can't be resolved.
#<user$eval1995$fn__1996 user$eval1995$fn__1996@8128f39>
user=> ; but no warning if we do
user=> (fn [^java.nio.file.WatchEvent e]
         (-> e ^java.nio.file.Path (.context) .toAbsolutePath))
#<user$eval1999$fn__2000 user$eval1999$fn__2000@4747e32a> 
```

唯一的区别是周围的括号`.context`。

# git - oh-my-zsh 慢，但仅适用于某些 Git 存储库

> ID：12765344
> 
> 赞同：156
> 
> 时间：2012-10-07T01:21:57.717
> 
> 标签：git, zsh

我最近开始使用 Zsh，它很棒。不幸的是，对于我认为是我的“主要”项目的项目，一切都很慢。我的意思是，每次我运行命令时——`ls`例如——在命令执行时间和我可以再次使用终端的时间之间大约有 5 秒的延迟。

这个让 Zsh 这么慢的 repo 有什么不同呢？我认为这是 Zsh 特有的东西，因为在我开始使用 Zsh 之前没有问题。我试着做一个`git clean`，但没有任何明显的区别。

如果这很重要，我在 Mac OS X 上。

**更新：**原来我`.zshenv`的这行是让它变慢的原因：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

如果我评论那条线，它会从大约 3 秒变为大约 1 秒。不幸的是，我需要这条线，因为我的许多项目都使用 RVM。我不知道现在该怎么办。

**更新 2**：这似乎是一个特别的 oh-my-zsh 事情。如果我不加载`~/.oh-my-zsh/oh-my-zsh.sh`，我没有问题。

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2014-09-16T08:32:23.523

您可以将其添加到您的 git 配置中，zsh 将不再检查状态

```
git config --add oh-my-zsh.hide-status 1
git config --add oh-my-zsh.hide-dirty 1 
```

* * *

### 解释

[lib/git.zsh](https://github.com/robbyrussell/oh-my-zsh/blob/master/lib/git.zsh)中有两个中央 git 函数：

*   `git_prompt_info()`
*   `parse_git_dirty()`

每个方法都有一个 git config 开关来禁用它：

*   `oh-my-zsh.hide-status`
*   `oh-my-zsh.hide-dirty`

一些主题创建自己的 git 查询，有时会[忽略这些标志](https://github.com/robbyrussell/oh-my-zsh/issues/4561)。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-08-10T06:22:23.207

Oh_my_zsh 对于某些 repos 来说似乎很慢，因为它会在每个命令之后检查 repo 的状态。此行为可以在新版本的 .oh_my_zsh 中被覆盖。只需取消注释 .zshrc 中的以下行：

> DISABLE_UNTRACKED_FILES_DIRTY="真"

在此之后，重新启动您的终端或运行以下命令：

> 源〜/ .zshrc

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-20T19:10:10.787

它可能是在每个命令之后调用 git 和 rvm 的主题。

对我来说，更改`ZSH_THEME="juanghurtadoto"`为完全`ZSH_THEME="miloshadzic"`删除每个命令后的 2 秒延迟。

可以在[https://github.com/robbyrussell/oh-my-zsh/wiki/themes找到主题](https://github.com/robbyrussell/oh-my-zsh/wiki/themes)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-12-03T01:00:02.013

对我来说，VirtualBox（来宾）很慢，因为我使用的是同步文件夹。我仍然希望它在足够快的 OS X（主机）上启用。我没有使用与 repo 一起存储并在来宾和主机上都更改它的本地配置设置，而是**仅在来宾上使用全局配置设置**：

```
git config --global --add oh-my-zsh.hide-dirty 1 
```

如果我只想要一个回购：

```
git config --add oh-my-zsh.hide-dirty 1 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-10-08T07:49:58.653

有多种方法可以加速，如“ [zsh 启动速度非常慢](https://superuser.com/questions/236953/zsh-starts-incredibly-slowly)`oh-my-zsh`”中详述，清理插件部分。

例如，博客文章“ [Fix for oh-my-zsh git-svn prompt slowness](http://marc-abramowitz.com/archives/2012/04/10/fix-for-oh-my-zsh-git-svn-prompt-slowness/) ”提到该`parse_git_dirty`功能是一个潜在问题。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-02-16T18:54:34.660

我终于弄明白了。我的项目有一个`rake`包含大量文件（如 20,000 个）的文件夹。我不知道那个文件夹是用来做什么的，但我删除了它，Zsh 不再慢，我的应用程序似乎仍然可以工作。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-07-03T16:35:46.737

对于其他希望改善 zsh git 延迟的人来说，以下将我的延迟从 降低`40ms`到`4ms`：

1.  编译并安装优化的[`git-branch-name`](https://github.com/notfed/git-branch-name)命令：

    ```
    git clone https://github.com/notfed/git-branch-name
    cd git-branch-name
    make
    sudo install git-branch-name /usr/local/bin/ 
    ```

2.  将此添加到您的`~/.zshrc`：

    ```
    function git_prompt_info() {
        ref=$(git-branch-name -q -h 12 -b 64) || return
        echo "${ZSH_THEME_GIT_PROMPT_PREFIX}${ref}${ZSH_THEME_GIT_PROMPT_CLEAN}${ZSH_THEME_GIT_PROMPT_SUFFIX}"
    } 
    ```

（`-h`和`-b`标志分别控制分支名称和散列的截断长度。）

有了这个，我可以保持输入并且不会遇到任何滞后。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-12-02T09:51:02.800

如果您不关心其他版本控制程序，但是`git`，您可以禁用`vcs_info`您的所有 s并用本机命令`*.zsh-theme`替换它们。`git`

例如，我通过以下方式调整我`agnoster.zsh-theme`的：

1.  注释/删除所有具有`vcs_info`,
2.  编辑`prompt_git()`函数中的代码：

    `ref="$vcs_info_msg_0_"`到

    `ref="$(git branch 2>/dev/null | grep -Po '(?<=\* ).*$')"`

所以，基本上，我只是禁用了所有`vcs_info`操作，而是使用本机`git`命令来检查 repo 的状态。结果，我仍然可以看到我有用的 git 提示符，其速度与在非 git 目录中工作一样快。通过这个小修改，我的 zsh 在 git repos 中的运行速度可以提高 4-5 倍。

*注意：使用 GNU grep 而不是 BSD grep。*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-15T07:41:11.517

上面的答案没有解决我的问题。就我而言，该功能`git_prompt_status`比其他功能花费了太多时间。所以我修改了~/.oh-my-zsh/lib/git.zsh，用`git_prompt_status`我的早期返回版本替换了函数：

```
function git_prompt_status() {
  STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  echo $STATUS
  return

  local INDEX STATUS
  INDEX=$(command git status --porcelain -b 2> /dev/null)
  STATUS=""
  if $(echo "$INDEX" | command grep -E '^\?\? ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_UNTRACKED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^A  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_ADDED$STATUS"
  elif $(echo "$INDEX" | grep '^M  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_ADDED$STATUS"
  elif $(echo "$INDEX" | grep '^MM ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_ADDED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^ M ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  elif $(echo "$INDEX" | grep '^AM ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  elif $(echo "$INDEX" | grep '^MM ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  elif $(echo "$INDEX" | grep '^ T ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^R  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_RENAMED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^ D ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_DELETED$STATUS"
  elif $(echo "$INDEX" | grep '^D  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_DELETED$STATUS"
  elif $(echo "$INDEX" | grep '^AD ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_DELETED$STATUS"
  fi
  if $(command git rev-parse --verify refs/stash >/dev/null 2>&1); then
    STATUS="$ZSH_THEME_GIT_PROMPT_STASHED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^UU ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_UNMERGED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^## [^ ]\+ .*ahead' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_AHEAD$STATUS"
  fi
  if $(echo "$INDEX" | grep '^## [^ ]\+ .*behind' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_BEHIND$STATUS"
  fi
  if $(echo "$INDEX" | grep '^## [^ ]\+ .*diverged' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_DIVERGED$STATUS"
  fi
  echo $STATUS
} 
```

虽然我使用 ZSH_THEME_GIT_PROMPT_MODIFIED 作为未确定的标记，但您可以选择任何您喜欢的状态来指示或在您的情况下实现更快的`git_prompt_status`功能。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-12T17:57:55.687

对于使用[宇宙飞船](https://github.com/denysdovhan/spaceship-prompt)主题的任何人，请将其添加到`.zshrc`：

```
SPACESHIP_GIT_STATUS_SHOW="false" 
```

为我工作。显然，您将在终端提示符中丢失 git 状态。

这个主题的 git 选项可以在~~[这里找到](https://github.com/denysdovhan/spaceship-prompt/blob/master/docs/Options.md#git-git)~~

**编辑**

git 选项的更新链接在[这里](https://spaceship-prompt.sh/options/#git-git)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-26T13:02:21.623

我遇到过同样的问题。我运行以下命令来获取所有未使用硬编码 git 插件的主题的列表：

`grep --files-without-match "git" ~/.oh-my-zsh/themes/*`

提示变得更快，但我不喜欢这些主题中的任何一个。

我最终使用了 powerline10k，它可以配置为看起来很漂亮并且没有速度问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-15T00:20:26.723

我想保持我的 git 状态，所以所有其他答案对我没有帮助。

真正帮助我的是在 git 存储库中运行这个对我来说很慢的命令：

```
git gc 
```

它代表 Garbage Collect 并[在此处](https://git-scm.com/docs/git-gc)进行了充分解释，但基本上：

> [它] 在当前存储库中运行许多内务处理任务，例如压缩文件修订（以减少磁盘空间并提高性能）

运行此命令后，不再加载。一切又是瞬间的。

# php - mysql insert PHP语句不断抛出错误

> ID：12765345
> 
> 赞同：0
> 
> 时间：2012-10-07T01:21:59.877
> 
> 标签：php

有谁知道为什么以下`PHP`代码不断抛出错误：除了 if 语句 $result 没有通过并给我该`Echo 'Error'`语句之外，我无法记录任何正确的错误。我的插入有问题吗？

```
 $new_tbl_name = 'Password_Reset';

   $sql = "INSERT INTO $new_tbl_name (Email, Key) VALUES ('$email','$resetHash')";

   $result = mysql_query($sql);

    if ($result) {
    }
    else {
       echo 'Error';
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:25:29.087

`key`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，你必须转义它：

```
INSERT INTO $new_tbl_name (Email, `Key`) VALUES
                                  ^   ^ 
```

作为一般建议，简单地说“错误”对于调试目的完全没有用。让 mysql 告诉你出了什么问题：

```
if (!$result) {
   die(mysql_error());
} 
```

这样您就知道出了什么问题，而不仅仅是在黑暗中四处寻找。

# python - 金字塔 AuthTktAuthenticationPolicy 秘密参数

> ID：12765349
> 
> 赞同：6
> 
> 时间：2012-10-07T01:22:25.743
> 
> 标签：python, authentication, pyramid

Pyramid 函数的“秘密”参数究竟是什么`pyramid.authentication.AuthTktAuthenticationPolicy`？[文档](http://pyramid.readthedocs.org/en/latest/api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy)说它是“用于 auth_tkt cookie 签名的（字符串）。必需。” 该[教程](http://pyramid.readthedocs.org/en/latest/tutorials/wiki/authorization.html#add-authentication-and-authorization-policies)说它是“一个字符串，表示由该策略表示的'身份验证票'机器使用的加密密钥”。

什么是 auth_tkt cookie 签名？这是什么“身份验证票”机制？这个秘密应该是我作为哈希值存储在数据库中的东西吗？我真的很困惑。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T10:06:31.873

tkt auth cookie 是多条信息的安全散列，包括用户名和可选的时间戳，但不包括用户密码。一旦通过身份验证，您将这样的 cookie 提供给用户，每次用户返回时，您只需再次提取用户名并知道它是同一用户。

但是，为了*保证*此 cookie 的安全，您需要有一个服务器端机密。只有拥有该秘密的服务器才能创建这些 cookie；如果攻击者掌握了它，他可以为任意用户生成身份验证 cookie，而无需知道这些用户的密码。

策略的`secret`参数是服务器端密钥；这就像您的服务器的主密码。如果您为您的站点运行多个进程（并且通常使用 WSGI），则需要使其在您的进程中保持一致，以确保每个进程都可以验证 cookie。您可以在配置文件、源代码或数据库中指定它；这取决于您需要多大的灵活性、您的安全策略以及您是否需要与其他系统共享秘密。

您可以使用相同的标准与域中也需要对您的用户进行身份验证的其他系统共享密钥。例如， Apache 有一个`mod_auth_tkt`模块，Plone 使用相同的标准，通过共享密钥，您可以跨不同的 Web 应用程序为您的用户提供单点登录。

请注意，更改密钥意味着现有会话无效，用户必须重新进行身份验证。

在任何情况下，现有 cookie 的生命周期都是有限的；`timeout`如果您在策略上配置参数，嵌入的时间戳会限制它被接受为有效的时间。设置超时和补发时间是个好政策；任何在超时内重新访问您的应用程序的用户都将被重新发布一个带有新时间戳的新 cookie，以保持他们的会话新鲜。这样，如果您的用户不返回，您的会话 cookie 会自动过期，并且他们的 cookie 不能在以后被攻击者重用。该`reissue`参数可让您控制新令牌的发布速度；在几秒钟内重新访问您的服务器`reissue`不会产生新的令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T02:25:09.253

据我所知，秘密参数只是一个字符串，用作创建 cookie 的盐。你可以放任何你想要的东西。将它放在您的配置文件中应该绰绰有余。将其保存在数据库中可能有点过大，但如果您想使创建的任何内容无效，我想更改密钥将使所有 cookie 和在更改之前创建的会话无效。

# java - 从读取文件中拆分结果的更好方法？

> ID：12765353
> 
> 赞同：1
> 
> 时间：2012-10-07T01:23:15.947
> 
> 标签：java, arrays, arraylist, split

我有一个读取文件并将结果收集到数组列表中的函数。数组列表看起来像这样（数据）

> [12, 亚当, 1993, 1234, 鲍勃, 1992]

然后我需要将这些细节加载到称为患者的新对象中。到目前为止，这是我将每个单独的数组列表项放入其自己的患者中的当前方法，但它一直困扰着我，说我正在传递 String String Int，它需要是一个 String。

s 看起来像这样

> 12, 亚当, 1993

这是代码

```
public void loadPatients()throws Exception
{
    ArrayList<String> data = IO_Support.readData("PatientData.txt");

    System.out.println(data);
    for(String s : data)
    {
        Sytem.out.println(s);
        patientList.add(new Patient(s));
    } 
} 
```

有没有办法将我的数组列表结果推送到一个字符串中以传递给患者对象，或者我应该使用不同的方式来拆分字符串结果？

读取数据看起来像这样

```
public static ArrayList<String> readData(String fileName) throws Exception
{
    ArrayList<String> data = new ArrayList<String>();
    BufferedReader in = new BufferedReader(new FileReader(fileName));

    String temp = in.readLine(); 
    while (temp != null)
    {
        data.add(temp);
        temp = in.readLine();   
    }
    in.close();
    return data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:24:49.190

```
while (temp != null)
{
    temp = in.readLine();   
} 
```

**首先**，你永远不会将你的输入添加到 ArrayList 中。这个 while 循环没有意义。它只是读取用户输入，并在每个场合吞下它。

**另外**，在看到您的异常之后，可以确定您正在使用`1-arg constructor`其中`Patient class`不存在的..只有`0-arg constructor`和`2-arg constructor`在`Patient`课堂上..您确实需要使用它们。

请参阅方法中的此代码`loadPatient`。您需要在**Patient 类中添加一个****1-arg 构造函数**来编译它。

 **```
patientList.add(**new Patient(s)**); --> Will not work 
```

因此，在您的 Patient 类中，添加：-

```
public Patient(String s) {
    this.s = s;
} 
```

`this.s``s`是要存储您传递的实例变量..**

# c++ - 简单的 2D 自上而下车辆碰撞物理算法？

> ID：12765363
> 
> 赞同：0
> 
> 时间：2012-10-07T01:24:48.667
> 
> 标签：c++, algorithm

我正在尝试创建一个简化的 GTA 2 克隆来学习。我正在研究车辆碰撞/物理。我要说的基本思想是将由车辆 A 的位置和速度确定的力 F 施加到车辆 B 上的点 P 上。但这到底应该做什么呢？我的车辆有一个中心位置和一个角度，但我不确定应用力应该做什么。撞击后如何确定车辆的新中心和角度？

它不必是现实的，只是可以完成工作的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:53:39.913

在 2d 中，您需要使您的算法满足三角不等式。

# php - $_SERVER['HTTP_REFERER']

> ID：12765365
> 
> 赞同：0
> 
> 时间：2012-10-07T01:25:17.507
> 
> 标签：php, email, reporting-services, error-reporting

我正在我的网站上创建一个报告问题链接，我希望它通过电子邮件将他们在单击报告链接之前的最后一个地址发送给我。我知道/认为您使用 $_SERVER['HTTP_REFERER'] 但我不知道如何将其放入邮件代码中？那么如果没有它，您将如何写这是我的邮件代码。

```
Mail("email@email.com", "Subject", "Message");
echo "Report Sent"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T15:46:40.773

除了关于可以嗅探的 http 引用者、匿名代理等的所有内容之外，依赖 HTTP_REFERER 并不是一个好的编程标准。

相反，如果您有，例如：

```
http://www.example.com/application/client.php 
```

用户可以点击的地方

```
http://www.example.com/application/report_problem.php 
```

只需将“...client.php”字符串传递给您将创建的“...report_problem.php”报告问题处理程序。

将“originating”页面链接传递给“report_problem”很容易，可以这样做：

```
<?php
    // pages where you will append the "problem link"

    // $this_page holds an "url encoded" version of the request uri ( e.g. /application/client.php )
    $this_page = rawurlencode ( $_SERVER["REQUEST_URI"] );
?>
<a href="report_problem.php?originating_page=<?=$this_page;?>">Report problem</a> 
```

然后，在“report_problem.php”代码中：

```
<?php
     // report_problem.php

     $originating_page = ( array_key_exists ( 'originating_page', $_GET ) && ! empty ( $_GET['originating_page'] ) ? rawurldecode ( $_GET['originating_page'] ) : null;

     if ( ! empty ( $originating_page ) ) {
              $message = 'Error report: <p>Last site visited: ' . $originating_page . '</p>....';
              mail("email@email.com", "Subject", $message);
     }
     else mail("email@email.com", "Subject", "Problem from unkown page");
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:33:11.760

消息应该是一个变量，您可以将信息放入：

```
$message = "Error report: <p>Last site visited: {$_SERVER['HTTP_REFERER']}</p>....";

mail("email@email.com", "Subject", $message); 
```

请注意，该`HTTP_REFERER`位位于字符串中的 {} 内。那是强制它推断值（我不喜欢字符串连接）。

另请注意，如上所述，不能保证 REFERER 将具有正确的值或任何值。

# symfony - 如何在 Symfony 中的表单中添加未绑定的字段，否则绑定到实体？

> ID：12765368
> 
> 赞同：24
> 
> 时间：2012-10-07T01:25:48.003
> 
> 标签：symfony, symfony-forms, symfony-2.1

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-07T05:20:57.047

在您的表单中添加一个带有 false property_path 的文本字段：

```
$builder->add('extra', 'text', array('property_path' => false)); 
```

然后，您可以访问控制器中的数据：

```
$extra = $form->get('extra')->getData(); 
```

**更新**

自 Symfony 2.1 以来的新方法是使用该`mapped`选项并将其设置为`false`.

`->add('extra', null, array('mapped' => false))`

Henrik Bjørnskov 的更新信息致谢（下方评论）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-07T20:20:09.787

从 Symfony 2.1 开始，使用以下`mapped`选项：

```
$builder->add('extra', 'text', [
    'mapped' => false,
]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-19T18:55:04.937

根据[文档](http://symfony.com/doc/current/reference/forms/types/form.html#allow-extra-fields)：

**允许额外字段**

> 通常，如果您提交未在表单中配置的额外字段，您将收到“此表单不应包含额外字段”。验证错误。
> 
> 您可以通过启用`allow_extra_fields`表单上的选项来消除此验证错误。

**映射**

> 如果您希望在读取或写入对象时忽略该字段，您可以将该`mapped`选项设置为 false。

```
class YourOwnFormType extends AbstractType
{
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(
            array(
                'allow_extra_fields' => true
            )
        );
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $form = $builder
            ->add('extra', TextType::class, array(
                'label' => 'Extra field'
                'mapped' => false
            ))
        ;
        return $form;
    }
} 
```

# app-store - ErrorCode, Ti.storekit-1.6.0

> ID：12765369
> 
> 赞同：1
> 
> 时间：2012-10-07T01:26:05.820
> 
> 标签：app-store, titanium-mobile

I develop now using Ti.storekit-1.6.0. (TitaniumStudio SDK-2.1.3GA)

## Description below shows the current my code

```
$btnItem1.addEventListener('click', function(e){
 // 250 
var product = 'net.oratta.info.0250';
var Storekit = require('ti.storekit');
Storekit.purchase(product, function (evt) {
         switch (evt.state) {
              case Storekit.FAILED:
                      alert('ERROR: Buying failed!');
                      break;
               case Storekit.PURCHASED:
               case Storekit.RESTORED:
                      alert('Thanks!');
                      //markProductAsPurchased(product.identifier);
                      break;
          }
     });
 }); 
```

* * *

## The information of iTuensConnect has become like below

Apple ID : 567415203 Bundle ID : net.oratta.info

[In-App Purchase Summary] Reference Name: 250 Coin Product ID: net.oratta.info.0250 Type: Consumable

## Apple ID: 568619867

But, following kind of error coming out, it does not operate normally

> "-[__NSCFString product]: unrecognized selector sent to instance 0x1d4f7c20"

When how it does, this error can be evaded? I request your advice.

Thanks,

# c - 在 C 语言中，当我在函数签名之后、函数体之前声明变量时，这意味着什么？

> ID：12765371
> 
> 赞同：1
> 
> 时间：2012-10-07T01:26:25.307
> 
> 标签：c, function, syntax, compiler-errors, method-signature

> **可能重复：**
> [为什么声明放在 func() 和 {} 之间？](https://stackoverflow.com/questions/5491026/why-are-declarations-put-between-func-and)

在 C 语言中，当我在函数签名之后、函数体之前声明变量时，这意味着什么？

例子：

```
int foo (i) int i {
    printf ("the value of variable 'i' is: %d", i);
    return i;
} 
```

当我编译除了初始化变量 i 之外的代码时，我得到一个编译错误：“无法初始化参数：p”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T01:28:14.547

这意味着您正在查看旧代码。那是旧的 K&R 语法。
基本上它说，**i**是论点，它是一个**int**

您可以将其重写为

```
int foo (int i) 
{
    printf ("the value of variable 'i' is: %d", i);
    return i;
} 
```

# php - 使用 php 中的选择框添加具有隐藏输入的用户

> ID：12765372
> 
> 赞同：2
> 
> 时间：2012-10-07T01:26:39.640
> 
> 标签：php, mysql, arrays

我试图允许用户通过选择框在表单上添加其他用户。因此，用户可以从下拉选择中选择另一个用户，按添加用户，然后将他们添加到数组中。用户可以选择另一个用户，并且应该将第二个用户添加到此数组中。现在，每次添加用户时，原始用户都会消失。我尝试使用隐藏输入，但我没有任何运气。

关于formprocessing.php

```
 //this generates a list of users. The code to actually generate the users is omitted
 <center><h3>Invite Friends</h3></center><br>
     <form method="post">
     <tr><td>Friends:</td><td><select name ="friend"><Option value="">Friends<? echo $selection; ?></Select></td>
     <input type="hidden" name="hiddenFriends" value="<? echo $friends; ?>"/>
     <td><input type="submit" name="submitFriend" value="Add Friend"/>
     </form> 
```

在 form.php 上

```
//i'm trying to create an array of users which are added. When completed, they'll be added to the db
<?
if(isset($_POST['submitFriend'])){
    if(count($_POST['hiddenFriends']) > 0){
        $friend = $_POST['friend'];
        array_push($friends,$_POST['friend']);
    }
    else{
        $friends = array('');
        array_push($friends,$_POST['friend']);
    }
}
?><input type="hidden" name="hiddenFriends" value="<? echo $friends; ?>"/><?
print_r($friends);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:35:28.603

伙计，您试图将 PHP 数组添加到 html 输入中。这**是不可能**的。

但不要担心你可以使用explode 和implode 函数。

```
<?
$friends = array();
if(isset($_POST['submitFriend'])){

    if(strlen($_POST['hiddenFriends']) > 0){
        $friends = explode(',',$_POST['hiddenFriends']);                
    }    
    $friends[] = $_POST['friend'];
}
?>
<input type="hidden" name="hiddenFriends" value="<? echo implode(',',$friends); ?>"/> 
```

# phpstorm - How to jump the top of the file in PhpStorm?

> ID：12765373
> 
> 赞同：47
> 
> 时间：2012-10-07T01:27:00.677
> 
> 标签：phpstorm

Does anyone know if there's a shortcut key on Mac for going directly to the top of the file? (Or, for that matter, the bottom?) I can't find one so for now I'm using Cmd-G, 1.

Thanks.

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-07T09:11:16.770

`Cmd`+ `Home`/ `Cmd`+`End`

如果您的键盘缺少`Home`/`End`键，请使用`fn`+`←</kbd>/`fn`+ `→` ([reference](http://www.danrodney.com/mac/))`

您可以随时更改 PhpStorm `Preferences`|中的默认快捷方式。`Keymap`：

![在此处输入图像描述](../Images/12742cf44a5d8bbe37ea57483c4549de.png)

# android - How do I use setNdefPushMessage()

> ID：12765374
> 
> 赞同：1
> 
> 时间：2012-10-07T00:40:35.273
> 
> 标签：android, nfc

(using 4.1.1 JellyBean on a Nexus S) I am trying to follow [these instructions](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setNdefPushMessage%28android.nfc.NdefMessage,%20android.app.Activity,%20android.app.Activity...%29), but the restrictions on in which activities `setNdefPushMessage()` can be used are to me somewhat vague. Presently my app, which has an activity for handling http requests via:

```
<activity android:name=".HandleUrlActivity"
          android:label="@string/title_handle_url_message" >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" /
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="http" />
    </intent-filter>
</activity> 
```

crashes with:

```
java.lang.IllegalStateException: API cannot be called while activity is paused 
```

when setNdefPushMessage() is called within HandleUrlActivity().

In what activities can setNdefPushMessage() be used? Or how can I keep an activity running until the Ndef is served and how do I know when that activity can return/exit? Calling:

```
 NfcAdapter nfcAdapter = NfcAdapter.getDefaultAdapter(this);
    nfcAdapter.setNdefPushMessage(ndef, this);
    nfcAdapter.wait(); 
```

gives the above error with or without the wait. Clearly `setNdefPushMessage()` needs some support mechanisms to handle the wait-for-nfc-receive-capable-device-proximity and then send events and I expected it to block until all this was complete, but apparently it does not.

(`enableForegroundNdefPush/disableForegroundNdefPush` apparently addressed this issue but appear to have been deprecated for ICS/JB with claims that `setNdefPushMessage` handles all this...)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:25:12.390

What are you trying to do? `setNdefPushMessage()` simply registers a message, it will only be sent when the Android runtime detects a compatible device. You have no control over this, so there is no point in calling `wait()`, etc (generally you shouldn't try to control the activity lifecycle). Calling it in `onCreate()` should work, but not calling it in the constructor when the activity is not yet full constructed and there is no valid `Context`. Generally though, having this in an activity that handles `VIEW` doesn't make much sense, since you can't really control when it will be started, so what are you trying to accomplish?

# c - having trouble initializing a doubly linked list in C using Visual Studios 2010

> ID：12765377
> 
> 赞同：1
> 
> 时间：2012-10-07T01:27:31.947
> 
> 标签：c

I am trying to create a doubly linked list for a homework. I'm using the book mastering algorithms with C by Kyle Louden as a guideline. The book states that i need to initialize a doubly linked list before I use it which I'm trying to do but when I enter my code visual studios tells me "incomplete type not allowed for the following line "void dlist_init(Dlist *list, void (*destroy)(void *data)){}", it also states that Dlist is undefined but from what I understood that wasn't a variable to be defined. I am very new to this so i might be completely wrong. please let me know any problems you see. the full code is as follows :

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "bool.h"
#include "dlinklist.h"
#include "DlistElmt.h"
#include "Dlist.h"
#include "dlistdata.h"

/**************************************************************************************************/

int main(int argc, char* argv[])
{
    FILE* ifp, *ofp;
    //char outputFilename[] = argv[2];
    int hour, min;
    int* list;
    float temp;

    if(argc != 3)    /* argc should be 3 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf("usage: %s filename", argv[0]);
    }
    else
    {
        // We assume argv[1] is a filename to open
        ifp = fopen(argv[1], "r");

        if(ifp == 0)
        {

            printf("Could not open file\n");
        }

        else
        {

            ofp = fopen(argv[2], "w");
        }
    }
}

void dlist_init(Dlist* list, void (*destroy)(void* data))
{

    list->size = 0;
    list->destroy = destroy;
    list->head = NULL;
    list->tail = NULL;

    return;

} 
```

I also have the following headers:

dlinklist.h

```
/**************************************************************************************************/

#ifndef DLIST_H
#define DLIST_H

#include <stdlib.h>
#include "DlistElmt.h"
#include "Dlist.h"
#include "Dlistdata.h"

/**************************************************************************************************/

#endif 
```

Dlist.h

```
/**************************************************************************************************/

#ifndef DLIST_H
#define DLIST_H

#include <stdlib.h>
#include "dlinklist.h"
#include "DlistElmt.h"
#include "Dlistdata.h"

/**************************************************************************************************/

typedef struct Dlist_ {

int size;

int (*match)(const void *key1, const void *key2);
void (*destroy)(void *data);

DlistElmt *head;
DlistElmt *tail;

} Dlist;

#endi 
```

dlistdata.h

```
/**************************************************************************************************/

#ifndef DLISTDATA_H;
#define DLISTDATA_H;

#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "dlinklist.h"
#include "DlistElmt.h"
#include "Dlist.h"

/**************************************************************************************************/

void dlist_init(Dlist *list, void (*destroy)(void *data));

#endif 
```

DlistElmt.h

```
/**************************************************************************************************/

#ifndef DLISTELMT_H
#define DLISTELMT_H

#include <stdlib.h>
#include "dlinklist.h"
#include "Dlist.h"
#include "Dlistdata.h"

/**************************************************************************************************/

typedef struct DlistElmt_ {

void *data;
struct DlistElmt_ *prev;
struct DlistElmt_ *next;

} DlistElmt;

/**************************************************************************************************/

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:01:34.407

您的头文件中出现了递归混乱。

1.  您的主文件只需要`#include "dlinklist.h"`. 该标题包括其他标题。
2.  `dlinklist.h`包含错误的守卫名称。 `DLINKLIST_H`不是`DLIST_H`。
3.  `dlistelmt.h`根本不需要包含行。
4.  `dlist.h`只需要`#include "dlistelmt.h"`，因为它在其声明中使用它。
5.  `dlistdata.h`只需要 `#include "dlist.h" 因为它在其声明中使用它。

您发布的主文件缺少一些花括号和格式。我刚刚编辑了你的问题来解决它。

# .net - 在 SimpleInjector 中基于泛型类型约束条件注册命令装饰器

> ID：12765386
> 
> 赞同：3
> 
> 时间：2012-10-07T01:29:43.217
> 
> 标签：.net, dependency-injection, inversion-of-control, decorator, simple-injector

如何在中注册**条件装饰**器`SimpleInjector`？这是我的定义：

```
public interface ICommand { }

public interface ICleanableCommand : ICommand {
    void Clean();
}

public interface ICommandHandler<in TCommand> 
    where TCommand : ICommand {
    void Handle(TCommand command);
}

public class CleanableCommandHandlerDecorator<TCommand> 
    : ICommandHandler<TCommand> 
    where TCommand : ICleanableCommand {

    private readonly ICommandHandler<TCommand> _handler;

    public CleanableCommandHandlerDecorator(
        ICommandHandler<TCommand> handler) {
        _handler = handler;
    }

    void ICommandHandler<TCommand>.Handle(TCommand command) {
        command.Clean();
        _handler.Handle(command);
    }
} 
```

我正在尝试：

```
container.RegisterManyForOpenGeneric(
    typeof(ICommandHandler<>),
    AppDomain.CurrentDomain.GetAssemblies()
    );

container.RegisterDecorator(
    typeof(ICommandHandler<>),
    typeof(CleanableCommandHandlerDecorator<>)
    // ,context => context.ImplementationType ???
    // I want to register this decorator for commandhandlers 
    // which their command implements ICleanableCommand 
    ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:43:51.750

您可以使用`RegisterDecorator`带 an 的重载`DecoratorPredicateContext`来定义应应用装饰器的条件。但是，由于在您的情况下，条件只是泛型类型约束，因此您不必提供谓词。当给定的服务类型不可装饰时，Simple Injector 将自动忽略装饰器，这包括泛型类型约束。

换句话说，只需按如下方式注册您的装饰器，它就会正常工作：

```
container.RegisterDecorator(
    typeof(ICommandHandler<>),
    typeof(CleanableCommandHandlerDecorator<>)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:46:01.903

看来我可以使用**`DecoratorPredicateContext.ServiceType`**：

```
container.RegisterDecorator(
    typeof(ICommandHandler<>),
    typeof(CleanableCommandHandlerDecorator<>),
    context => {
        var genArg = context.ServiceType.GetGenericArguments()[0];
        return typeof(ICleanableCommand).IsAssignableFrom(genArg);
    }); 
```

# ruby-on-rails - Ruby/Rails 中内置函数自定义版本的命名约定

> ID：12765388
> 
> 赞同：2
> 
> 时间：2012-10-07T01:29:50.390
> 
> 标签：ruby-on-rails, ruby, naming-conventions

我已经定义了一个自定义版本的 Rails`flash`函数来添加一些功能。是否为此制定了命名约定？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T15:04:41.777

不，但请确保给它起一个非常具有描述性的名称，以描述它与 normal 不同的原因`flash`。否则，新来的人看到代码可能会对它的用途感到困惑。我也会考虑`_`在它的开头放一个。

# javafx-2 - 在 javafx-2.2 中的 TableView 中设置可编辑的整数列

> ID：12765392
> 
> 赞同：2
> 
> 时间：2012-10-07T01:30:47.540
> 
> 标签：javafx-2, javafx

我是 javafx 的新手，我试图创建可编辑的整数列。

我已经阅读了[http://docs.oracle.com/javafx/2/api/](http://docs.oracle.com/javafx/2/api/)和[http://docs.oracle.com/javafx/2/ui_controls/table-view.htm](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm) 并且仍然有关于使用的大问题整数属性。

我创建了一个包含 IntegerProperty 的模型。IntegerProperty 是*ObservableValue[Number]*的后代。TableColumn 在字段类型上是不变的，所以我被迫将此列输入为*TableColumn[MyModel,Number]*。比我需要创建允许编辑整数单元格的 cellFactory 。*TextFieldTableCell(IntegerStringConverter)*应该实现这个目标，但是 IntegerStringConverter 的类型是*StringConverter[Integer]*而不是 StringConverter[Number] 并且 TextFieldTableCell 对于值类型也是不变的。

所以我有冲突：

*   IntegerProperty 需要 Number 类型
*   StringConverter 提供 Integer 类型
*   TableColumn 是不变的，需要两种类型都匹配

TableColumn 应该如何与此限制一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T05:09:20.123

我认为在为 Scala 2.10 使用 ScalaFX 1.0.0.M2 时遇到了类似的问题。我一直在使用：

```
private val portColumn = new TableColumn[Model, Int] {
    text = "Port"
    cellValueFactory = {
      _.value.port
    }
  } 
```

为了解决这个问题，我把它改成了：

```
private val portColumn = new TableColumn[Model, Number] {
    text = "Port"
    cellValueFactory = {
      _.value.port.delegate
    }
  } 
```

此外，**非常重要的是**，我必须升级到 ScalaFX 1.0.0。用于 Scala 2.10 的*M4 。*

我没有使单元格可编辑，所以我会尝试一下，让你知道它是怎么回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:55:25.510

我记得曾经使用 javafx.beans.property.adapter.JavaBeanIntegerPropertyBuilder 构建 javafx.beans.property.adapter.JavaBeanIntegerProperty 时我必须做类似的事情。

我建议你使用这个适配器类而不是 IntegerProperty。我现在有点紧张，但我会尽快实施并编辑这个答案。

# python - 在 spynner 模块中使用 nativeClickAt() 方法的 Segfault

> ID：12765394
> 
> 赞同：1
> 
> 时间：2012-10-07T01:30:48.907
> 
> 标签：python, qt, webkit, spynner

我不确定如何使用`nativeClickAt()`方法单击任意位置。

在[spynner 课程](https://github.com/makinacorpus/spynner/blob/master/src/spynner/browser.py)中，医生说：

```
"""Click on an arbitrar location of the browser.
@param where: where to click (QPoint)
@param real: if not true coordinates are relative to the window instead
    of the screen
@timeout seconds: seconds to wait after click""" 
```

我已经搜索了[QT doc](http://qt-project.org/doc/qt-4.8/qpoint.html#QPoint-2)以确定什么是`QPoint`对象。所以它似乎是x，y坐标。

到目前为止我尝试了什么：

```
import spynner
from PyQt4 import QtCore

browser = spynner.Browser(
    embed_jquery = True,
    debug_level = spynner.DEBUG
)

(...)

place = QtCore.QPoint(311,443)
print place # PyQt4.QtCore.QPoint(311, 443)
browser.nativeClickAt(place, 3, real=True) 
```

但是当我运行脚本时，**我得到一个 segfault error**。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:04:21.887

我们已经讨论了这个非公开脚本的脱单。

我们所做的：

*   您必须有一个 ui 才能发送原始点击事件：`browser.show()`
*   脚本执行时不能隐藏窗口，否则会在 void -> segfault 中单击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:02:43.233

本机点击很大程度上取决于浏览器的状态及其在您触发事件时可能变得不可用的帧，从而导致段错误。

因为它实际上取决于用例，所以最简单的方法是进行可重复的测试！

尽管如此，我会检查自 2.0 升级以来该方法是否正确运行。

也一定要拥有最新的 spynner ！

此外，要在发生段错误时跟踪 spynner 错误，最好始终使用 gdb 或任何调试器。是的，过去我总是通过更改代码来解决段错误。

# php - 用于过滤帖子字段中的输入的正则表达式

> ID：12765395
> 
> 赞同：1
> 
> 时间：2012-10-07T01:31:08.427
> 
> 标签：php

该字段唯一可能的值`P`后跟一个`0,1,2,3,4`和`0,1,2,3,4`

```
$option_print = $this->input->post('print');

if (!preg_match('^/p[0-4][0-4]/', $option_print)) 
{ redirect('#example'); } else { ... } 
```

有效输入示例：

*   `p00`-> 有效
*   `p10`-> 有效

无效输入示例：

*   `v00`-> 无效
*   `f10`-> 无效
*   `ffs`-> 无效

那么我应该如何`regex`正确构建以过滤 VALID 输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:34:27.163

这个怎么样：

```
!preg_match('/^p[0-4][0-4]$/', $option_print) 
```

甚至这样：

```
!preg_match('/^p[0-4]{2}$/', $option_print) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:37:40.797

您的正则表达式几乎完全有效。但你在那`^`之前`/`写了为什么它不起作用

```
'/^p[0-4][0-4]$/' 
```

# constraints - 最小独立集

> ID：12765396
> 
> 赞同：4
> 
> 时间：2012-10-07T01:31:21.423
> 
> 标签：constraints, z3, satisfiability

给定一组`s`公式，我想找到一个最小的子集`s'`，`s`它暗示`s`. 我称之为`s`最小独立集，因为对于 中的每一对`a,b`，并不意味着`s'`，反之亦然。 `a``b`

在我看来，天真的方法需要`O(2^|s|)`复杂性。有没有更有效的方法？能否对这个问题进行编码，以利用当前的 smt/sat 求解器（例如 unsat 核心）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T05:54:50.577

也许现在对你来说太晚了。但是您可以通过 1 个循环来计算这样的集合。

```
IS = F1 // first formula in s
for each formula Fi in {F2,..Fn} in s
  if ((not IS) AND Fi) is UNSAT
     IS = IS AND Fi 
```

该集合`IS`包含独立集合。

# memory-management - 处理 UIImage 和 CGI mage

> ID：12765402
> 
> 赞同：0
> 
> 时间：2012-10-07T01:32:38.000
> 
> 标签：memory-management, xamarin.ios, uiimage, dispose, cgimage

使用完之后，是否需要在 MonoTouch 应用程序中处理`UIImage`s 和s？`CGImage`处置其中任何一个有什么影响？

如果图像仍然可见，处理它们中的任何一个是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:12:02.040

我建议对这样的图像使用`using`块：

```
using (var image = UIImage.FromFile ("demo.png"))
{
    //do something with your image here
    //such as passing it to an UIImageView.Image
} 
```

当对象离开该块时，它将自动处置。

或者，您可以`Dispose()`在知道使用完毕后调用 UIImage。

如果您不处理它们并加载大量图像，您最终将耗尽内存。使用该方法加载大图像`UIImage.FromBundle()`是一个坏主意，因为它们被缓存，并且您无法控制何时处理缓存。

如果您处理`UIImage`当前显示的一个，则不会发生任何坏事，`UIImageView`因为它保留了对图像的自己的引用。因此，只有 C# 托管图像会被处理掉，但不一定是 Cocotouch 图像。

# android - 使用 EditText 添加数据库

> ID：12765403
> 
> 赞同：-1
> 
> 时间：2012-10-07T01:32:46.143
> 
> 标签：android, sqlite

嗨，我是 android 编程新手，我需要你的帮助，我想使用 EditText 和 Button 创建一个 android 数据库，按钮是提交插入到 EditText 中的数据，我有两个 Activity，第一个是添加数据库，第二个是正在查看保存的数据库列表。我正在创建一个简单的“添加员工并将其保存到数据库”

这是我创建数据库的代码；

```
SQLiteDatabase db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
db.execSQL("CREATE TABLE IF NOT EXITS employee (name VARCHAR, positon VARCHAR);"); 
```

现在我不知道如何将 editTtext 中的数据插入到查看数据库中，任何答案都值得赞赏。谢谢 xyvyre

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:12:37.943

有关如何在列表视图中显示数据的一些教程，请参阅[官方记事本示例](http://developer.android.com/training/notepad/notepad-ex1.html)（尤其是`fillData()`方法），或[Android SQLite 数据库和 ContentProvider - 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)。

# symfony - Symfony2文件上传擦除旧数据

> ID：12765404
> 
> 赞同：0
> 
> 时间：2012-10-07T01:33:09.613
> 
> 标签：symfony, doctrine-orm, symfony-forms

我的实体有 3 个属性可以上传照片： photo1 photo2 photo3

如果我在没有文件的情况下提交这会取消设置所有旧数据文件，我会在第一时间坚持这一点，在编辑表单上

我的控制器（与新建/编辑相同，是个人资料表单）：

```
public function perfilAction()
    {
        $peticion = $this->getRequest();
        $em = $this->getDoctrine()->getEntityManager();

        $usuario = $this->get('security.context')->getToken()->getUser();
        $user  = $em->getRepository('GarotaBundle:Garota')->find(1);
        $formulario = $this->createForm(new GarotaType(), $usuario);

        if ($peticion->getMethod() == 'POST') {

            $formulario->bindRequest($peticion);

            if ($formulario->isValid()) {

                $usuario->subirFoto1();
                $usuario->subirFoto2();     
                $usuario->subirFoto3();
                /*echo "<pre>";
                var_dump($usuario);

                echo "<br /><br /><br /><br /><br />";
                var_dump($user);
                exit;
                */
                if($usuario->getFoto1() == null)
                    $usuario->setFoto1($user->getFoto1());

                if($usuario->getFoto2() == null)
                    $usuario->setFoto2($user->getFoto2());

                if($usuario->getFoto3() == null)
                    $usuario->setFoto3($user->getFoto3());

                $em->persist($usuario);
                $em->flush();

                $this->get('session')->setFlash('info',
                    'Dados atualizados com sucesso'
                );
                return $this->redirect($this->generateUrl('perfil'));
            }
        }

        return $this->render('GarotaBundle:Default:perfil.html.twig', array(
            'usuario'    => $usuario,
            'formulario' => $formulario->createView()
        ));
    } 
```

我的课：

```
<?php

namespace Garotas\GarotaBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints as DoctrineAssert;
use Symfony\Component\Validator\ExecutionContext;
use Garotas\GarotaBundle\Util\Util;

/**
 * Garotas\GarotaBundle\Entity\Garota
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Garotas\GarotaBundle\Entity\GarotaRepository")
 * @DoctrineAssert\UniqueEntity("login")
 */
class Garota  implements UserInterface
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $login
     *
     * @ORM\Column(name="login", type="string", length=255)
     */
    private $login;

    /**
     * @var string $password
     *
     * @ORM\Column(name="password", type="string", length=255)
     */
    private $password;

     /**
     * @var string $password
     *
     * @ORM\Column(name="nome", type="string", length=255)
     */
    private $nome;

     /**
     * @var string $password
     *
     * @ORM\Column(name="email", type="string", length=255)
     */
    private $email;

    /**
     * @var string $salt
     *
     * @ORM\Column(name="salt", type="string", length=255)
     */
    private $salt;

    /**
     * @var string $foto1
     *
     * @ORM\Column(name="foto1", type="string", length=255,nullable=true)
     * @Assert\Image(maxSize = "500k")
     */
    private $foto1;

    /**
     * @var string $foto2
     *
     * @ORM\Column(name="foto2", type="string", length=255,nullable=true)
     * @Assert\Image(maxSize = "500k")
     */
    private $foto2;

    /**
     * @var string $foto3
     *
     * @ORM\Column(name="foto3", type="string", length=255,nullable=true)
     * @Assert\Image(maxSize = "500k")
     */
    private $foto3;

    /**
     * @var \DateTime $data_cadastro
     *
     * @ORM\Column(name="data_cadastro", type="datetime")
     */
    private $data_cadastro;

    /**
     * @var boolean $eliminada
     *
     * @ORM\Column(name="eliminada", type="boolean")
     */
    private $eliminada;

    /**
     * @var boolean $eliminada
     *
     * @ORM\Column(name="termos", type="boolean")
     */
    private $termos;

    /**
     * @var boolean $eliminada
     *
     * @ORM\Column(name="assinado", type="boolean")
     */
    private $assinado;

    /**
     * @var boolean $eliminada
     *
     * @ORM\Column(name="categoria", type="integer")
     */
    private $categoria;

    function equals(\Symfony\Component\Security\Core\User\UserInterface $usuario)
    {
        return $this->getLogin() == $usuario->getLogin();
    }

    /**
     * Método requerido por la interfaz UserInterface
     */
    function eraseCredentials()
    {
    }

    /**
     * Método requerido por la interfaz UserInterface
     */
    function getRoles()
    {
        return array('ROLE_GAROTA');
    }

    /**
     * Método requerido por la interfaz UserInterface
     */
    function getUsername()
    {
        return $this->getLogin();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set login
     *
     * @param string $login
     * @return Garota
     */
    public function setLogin($login)
    {
        $this->login = $login;

        return $this;
    }

    public function __toString()
    {
        return $this->getNome();
    }

    public function subirFoto1()
    {
        $directorioDestino = __DIR__.'/../../../../web/garotas';

        if (null === $this->foto1) {
        return;
    }

        $nombreArchivoFoto = 'girleria-'.Util::getSlug($this->getNome()).rand(1,9).rand(1,9).rand(1,9).rand(1,9).rand(1,9).'.'.$this->foto1->guessExtension();

        $this->foto1->move($directorioDestino, $nombreArchivoFoto);

        $this->setFoto1($nombreArchivoFoto);

    }

    public function subirFoto2(){

        $directorioDestino = __DIR__.'/../../../../web/garotas';
             if (null === $this->foto2) {
        return;
    }

        $nombreArchivoFoto = 'girleria-'.Util::getSlug($this->getNome()).rand(1,9).rand(1,9).rand(1,9).rand(1,9).rand(1,9).'.'.$this->foto2->guessExtension();

        $this->foto2->move($directorioDestino, $nombreArchivoFoto);

        $this->setFoto2($nombreArchivoFoto);

    }

    public function subirFoto3(){

        $directorioDestino = __DIR__.'/../../../../web/garotas';
         if (null === $this->foto3) {
        return;
    }   

        $nombreArchivoFoto = 'girleria-'.Util::getSlug($this->getNome()).rand(1,9).rand(1,9).rand(1,9).rand(1,9).rand(1,9).'.'.$this->foto3->guessExtension();

        $this->foto3->move($directorioDestino, $nombreArchivoFoto);

        $this->setFoto3($nombreArchivoFoto);

    }

    /**
     * Get login
     *
     * @return string 
     */
    public function getLogin()
    {
        return $this->login;
    }

    public function setNome($nome)
    {
        $this->nome = $nome;

        return $this;
    }

    public function getNome()
    {
        return $this->nome;
    }

    public function setEmail($email)
    {
        $this->email = $email;

        return $this;
    }

    public function getEmail()
    {
        return $this->email;
    }

    /**
     * Set password
     *
     * @param string $password
     * @return Garota
     */
    public function setPassword($password)
    {
        $this->password = $password;

        return $this;
    }

    /**
     * Get password
     *
     * @return string 
     */
    public function getPassword()
    {
        return $this->password;
    }

    /**
     * Set salt
     *
     * @param string $salt
     * @return Garota
     */
    public function setSalt($salt)
    {
        $this->salt = $salt;

        return $this;
    }

    /**
     * Get salt
     *
     * @return string 
     */
    public function getSalt()
    {
        return $this->salt;
    }

    /**
     * Set foto1
     *
     * @param string $foto1
     * @return Garota
     */
    public function setFoto1($foto1)
    {
        $this->foto1 = $foto1;

        return $this;
    }

    /**
     * Get foto1
     *
     * @return string 
     */
    public function getFoto1()
    {
        return $this->foto1;
    }

    /**
     * Set foto2
     *
     * @param string $foto2
     * @return Garota
     */
    public function setFoto2($foto2)
    {
        $this->foto2 = $foto2;

        return $this;
    }

    /**
     * Get foto2
     *
     * @return string 
     */
    public function getFoto2()
    {
        return $this->foto2;
    }

    /**
     * Set foto3
     *
     * @param string $foto3
     * @return Garota
     */
    public function setFoto3($foto3)
    {
        $this->foto3 = $foto3;

        return $this;
    }

    /**
     * Get foto3
     *
     * @return string 
     */
    public function getFoto3()
    {
        return $this->foto3;
    }

    /**
     * Set data_cadastro
     *
     * @param \DateTime $dataCadastro
     * @return Garota
     */
    public function setDataCadastro($dataCadastro)
    {
        $this->data_cadastro = $dataCadastro;

        return $this;
    }

    /**
     * Get data_cadastro
     *
     * @return \DateTime 
     */
    public function getDataCadastro()
    {
        return $this->data_cadastro;
    }

    /**
     * Set eliminada
     *
     * @param boolean $eliminada
     * @return Garota
     */
    public function setEliminada($eliminada)
    {
        $this->eliminada = $eliminada;

        return $this;
    }

    /**
     * Get eliminada
     *
     * @return boolean 
     */
    public function getEliminada()
    {
        return $this->eliminada;
    }

    public function setTermos($termos)
    {
        $this->termos = $termos;

        return $this;
    }

    public function getTermos()
    {
        return $this->termos;
    }

    public function setAssinado($assinado)
    {
        $this->assinado = $assinado;

        return $this;
    }

    public function getAssinado()
    {
        return $this->assinado;
    }

    public function setCategoria($categoria)
    {
        $this->categoria = $categoria;

        return $this;
    }

    public function getCategoria()
    {
        return $this->categoria;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:16:54.240

好的，不久前有这个“问题”，基本的想法是：

*   从数据库中获取对象
*   在表单绑定之前将当前文件存储到变量中（例如 $oldFile = $object->getFile()）
*   将传入的请求绑定到表单
*   `if ( $object->getFile() === NULL ) $object->setFile($oldFile)`

希望这可以帮助...

# python - 运算符重载 Python

> ID：12765407
> 
> 赞同：1
> 
> 时间：2012-10-07T01:33:38.207
> 
> 标签：python, set

是否可以实现一个类的方法，以便它的对象与 set() 函数一起使用？所以 Set(objarray) 会返回唯一的对象。当然，创建我自己的集合是一种选择，但如果它已经存在，我只是不想重新发明轮子。

编辑：我想我让你们对我的英语感到困惑。这就是我在课堂上所拥有的 - 我有一个 Person 类，其中包含人名和地址作为其成员。这就是我想做的-

```
persons = []
for i in range (50):
  name = raw_input("Enter Name")
  address = raw_input("Address")
  persons.append(Person(name,address))
unique = Set(persons) #would only return one person from an address. 
                      #The rest from the same address will be removed 
```

我希望清除混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:39:54.420

是的。首先，如果您的类既不实现`__hash__`也不实现`__eq__`，那么它们已经`id`是可散列的（ 用作散列值，比较由 完成`is`）。

或者，如果您实现`__hash__`and `__eq__`，那么您的类实例可以安全地用于集合或字典键：

```
>>> class Foo:
...     def __init__(self, val): self.val = val
...     def __hash__(self): return hash(self.val)
...     def __eq__(self, other): return self.val == other.val
...     def __repr__(self): return 'Foo(%r)' % self.val
... 
>>> print set([Foo(3), Foo("bar")])
set([Foo(3), Foo('bar')]) 
```

如果您希望能够`set`直接调用您的类的实例，请重载`__iter__`以使类实例看起来是可迭代的：

```
>>> class CharSeq:
...     def __init__(self, first, last):
...         self.first = ord(first)
...         self.last = ord(last)
...     def __iter__(self):
...         return (chr(i) for i in xrange(self.first, self.last+1))
... 
>>> set(CharSeq('a', 'c'))
set(['a', 'c', 'b']) 
```

# php - 数学函数在 PHP 中运行良好，但在 Objective C 中错误

> ID：12765409
> 
> 赞同：0
> 
> 时间：2012-10-07T01:33:48.787
> 
> 标签：php, objective-c, ios, math

我数学不好，但我需要将 PHP 数学例程转换为 Objective C，以便在 iOS 应用程序中进行计算。

我有这段代码，在 PHP 中，它工作正常：

```
 function torad ( $arg )        { return ($arg * (pi() / 180.0)); }         
 function kepler ( $m, $ecc ) {
    $EPSILON = 1e-6;
    $m = torad( $m );
    $e = $m;
    do  {
        $delta = $e - $ecc * sin( $e ) - $m;
        $e -= $delta / ( 1 - $ecc * cos($e) );
    } while ( abs($delta) > $EPSILON );
    return ( $e );
 } 
```

这是代码，我在 Objective C 中（对于 iOS）：

```
+ (double) toRad:(double)arg{
    return (arg * (3.14159265 / 180.0));  // 3.14159265 = pi()
}

+ (double) kepler:(double)m  ecc:(double)ecc {
    double EPSILON = 1e-6;
    double _m = [self toRad:m];
    double e = _m;

    double delta;

    do {
        delta = e - ecc * sin(e) - m;
        e -= delta / (1 - ecc * cos(e));
    } while (abs(delta) > EPSILON);

    return e;
} 
```

开普勒函数工作错误。也许，你可以说，我错在哪里？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:40:59.240

您在这一行中使用`m`而不是：`_m`

```
delta = e - ecc * sin(e) - m; 
```

# iphone - iOS 实时音频 I/O

> ID：12765416
> 
> 赞同：5
> 
> 时间：2012-10-07T01:35:15.573
> 
> 标签：iphone, ios, audio, real-time, recording

iOS 开发新手，我设法创建了一个基本应用程序，可以通过 iPhone 主麦克风/耳机麦克风录制音频，然后在按下播放按钮时重播该音频。

我需要的是同时播放当前录制的音频，而不是录制到文件中，然后播放后期录制。所以基本上，在（例如）耳机麦克风和耳机之间创建一个实时音频循环。

有可能做到这一点吗？

如果是这样，有人可以帮我指出实现此功能的正确方向。所需的框架和任何代码片段将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:10:33.963

是的，你想要做的事情是很有可能的。看看 [AurioTouch](https://github.com/ooper-shlab/aurioTouch2.0-Swift)

# jquery - .li悬停上的jQuery幻灯片事件？

> ID：12765418
> 
> 赞同：0
> 
> 时间：2012-10-07T01:35:33.037
> 
> 标签：jquery, list

我的设置是一个无序列表，其中列表项的背景是图像。当一个人将鼠标悬停在列表项上时，我需要滑入 3 个 div（每个以不同的方式）。

```
<ul id="tiles">
  <li class="hoverme" style="background: url(images/pic.jpg);">
     <div id="slide_div_1" style="display: none;">
       Lalala
     </div>
     <div id="slide_div_2" style="display: none;">
       Yayaya
     </div>
     <div id="slide_div_3" style="display: none;">
       Bababa
     </div>
  </li>
</ul> 
```

这可以用jQuery完成吗？我无法在任何地方对其进行故障排除。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:01:42.863

以下演示将宽度设置为零而不是`display: none`使用 jQuery 在计时器上为子 div 的宽度设置动画。演示可能需要根据您正在寻找的效果进行修改

演示：http: [//jsfiddle.net/L2tbf/1/](http://jsfiddle.net/L2tbf/1/)

# c# - SerialPort.ReadExisting 方法不显示接收到的数据

> ID：12765423
> 
> 赞同：0
> 
> 时间：2012-10-07T01:36:01.997
> 
> 标签：c#, exception, methods, serial-port, grasshopper

以下代码正在构建且没有错误，但是当我运行程序时，接收到的数据未显示在输出中。当我在上放置断点时，`myReceivedLines = port.ReadExisting();`我得到：

`System.InvalidOperationException`.

在程序本身中，重新启动我的计算机后它说：

`Access to COM5 is denied`

我能做些什么来解决这个问题？

代码：

```
//Fields
SerialPort port;
string myReceivedLines;

   protected override void SolveInstance(IGH_DataAccess DA)
  {

    List<string> gcode = new List<string>();
    DA.GetDataList(0, gcode);
    string selectedportname = default(string);
    DA.GetData(1, ref selectedportname);
    int selectedbaudrate = default(int);
    DA.GetData(2, ref selectedbaudrate);
    bool connecttodevice=default(bool);
    DA.GetData(3, ref connecttodevice);
    bool sendtoprint= default(bool);
    DA.GetData(4, ref sendtoprint);

    if (!DA.GetDataList(0, gcode)) return;
    if (!DA.GetData(1, ref selectedportname)) return;
    if (!DA.GetData(2, ref selectedbaudrate)) return;
    if (!DA.GetData(3, ref connecttodevice)) return;
    if (!DA.GetData(4, ref sendtoprint)) return;

    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); //Create the serial port
    port.DtrEnable = true;   //enables the Data Terminal Ready (DTR) signal during serial communication (Handshaking)
    port.Open();             //Open the port
    port.DataReceived += this.portdatareceived;

    if (gcode == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "Specify a valid GCode");
        return;
    }

    if (connecttodevice == true)
    {
        DA.SetDataList(0, myReceivedLines);
    }

        if (sendtoprint == true)
        {
            foreach (String s in gcode)
            {
                port.WriteLine(s);
            }
        }

              }

    //subscriber method for the port.DataReceived Event
    private void portdatareceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
            myReceivedLines = port.ReadExisting();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:58:31.263

SerialPort 的 DataReceived 事件在与 UI 线程不同的线程上运行。您将需要执行类似 MSDN Page for The [DataReceived](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived%28v=vs.100%29.aspx) Event 建议的操作。您收到拒绝访问错误的原因是因为端口仍然打开，重新启动计算机以纠正重新启动程序是不够的。

即来自上面的链接

```
private static void DataReceivedHandler( object sender, SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    string indata = sp.ReadExisting();
} 
```

# javascript - 如何将 javascript 嵌入到远程加载引导模式中

> ID：12765424
> 
> 赞同：2
> 
> 时间：2012-10-07T01:36:24.180
> 
> 标签：javascript, django, web-applications, twitter-bootstrap

目前我正在引导模式对话框中加载远程 URL，我最近尝试将验证码（远程 URL 是登录/注册表单）加载到模式中，但似乎脚本被删除了。有没有办法避免/抵消这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:09:34.137

Bootstrap 使用[jQuery.load](http://api.jquery.com/load/)将远程交付的 HTML 注入到模态中。该方法在注入之前删除`<script>`标签，以防止 IE 中的错误。这是它执行此[操作的注释源的链接。](http://robflaherty.github.com/jquery-annotated-source/docs/12-ajax.html#section-32)

一般来说，期望从 AJAX 接收的 HTML 作为字符串执行其`<script>`标签是一个坏主意。如果您可以控制远程服务器，则可能需要重构您的方法并将 CAPTCHA 脚本单独加载到您的文档中。

# grails - 另一个 Grails 插件的资源插件依赖项

> ID：12765426
> 
> 赞同：3
> 
> 时间：2012-10-07T01:37:22.363
> 
> 标签：grails, grails-plugin

我正在尝试在 Resources Plugin 之上构建一个 Grails 插件。基本上它只是一个 ResourceMapper。所以，我需要使用`MapperPhase`枚举。

我尝试将以下内容添加到`BuildConfig.groovy`：

```
plugins {
    build(":tomcat:$grailsVersion",
          ":release:2.0.3",
          ":rest-client-builder:1.0.2") {
        export = false
    }
    runtime(":resources:1.1.6")
} 
```

*也尝试编译（“：资源：1.1.6”），但结果相同*

*正如我所看到的，对于基于资源的*插件来说，这是非常标准的做法，并且应该可以工作。顺便说一句，当我尝试运行主应用程序时，它失败了：

```
| Error Compilation error: startup failed:
  ***/XXXResourceMapper.groovy: 5: unable to resolve class org.grails.plugin.resource.mapper.MapperPhase
 @ line 5, column 1.
   import org.grails.plugin.resource.mapper.MapperPhase 
```

而且，我正在使用 Intellij IDEA，它也无法解析这个枚举。

在这种情况下，我应该如何指定对 Resources Plugin 的依赖？

PS 在使用此插件的主 Grails 应用程序中，我使用本地插件定义（如`grails.plugin.location.'XXX-resources' = 'XXX'`）。如果有事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:16:35.387

我发现自己有完全相同的错误。但是，在我的情况下，这是由 gwt 插件（0.8 版）引起的。

就我而言，我解决了将我**所有**的插件引用从 applicaiton.properties 迁移到 BuildConfig.groovy 脚本的问题。像这样：

**来自** application.properties

```
plugins.cloud-foundry=1.2.2
plugins.cloud-support=1.0.11
plugins.hibernate=2.1.1
plugins.jquery=1.7.2
plugins.mail=1.0
plugins.message-digest=1.1
plugins.navigation=1.3.2
plugins.recaptcha=0.5.2
plugins.spock=0.6
plugins.spring-mobile=0.4
plugins.spring-security-core=1.2.7.3
plugins.spring-security-openid=1.0.4
plugins.svn=1.0.0.M1
plugins.tomcat=2.1.1 
```

**到**BuildConfig.groovy

```
plugins {
        build ":tomcat:$grailsVersion"
        compile ":gwt:0.8"
        compile name:'spring-mobile', version:'0.4'
        compile ":cloud-foundry:1.2.3"
        compile ":spring-security-core:1.2.7.3"
        compile ":spring-security-openid:1.0.4"
        compile ":cloud-support:1.0.11"
        compile ":hibernate:2.1.1"
        compile ":mail:1.0.1"
        compile ":message-digest:1.1"
        compile ":navigation:1.3.2"
        compile ":recaptcha:0.5.2"
        compile ":spring-mobile:0.4"
        compile ":svn:1.0.0.M1"

        runtime ":database-migration:1.2"
        runtime ":jquery:1.7.2"

        test ":spock:0.6"
    }
```

希望这对您也有帮助！

# c++ - 未定义的符号 - 混淆

> ID：12765428
> 
> 赞同：2
> 
> 时间：2012-10-07T01:37:57.710
> 
> 标签：c++, c, ubuntu, linker-errors

在 Ubuntu 10.04 LTS 上：

```
/usr/bin/g++ -> g++-4.4
/usr/bin/gcc -> gcc-4.4 
```

我正在 Ubuntu 中编写一个基于 openssl 库（libssl.a 和 libssl.so）的 libssl_ext 库当我输入

```
$nm -C -defined-only -g libssl_ext.so 
```

我可以看到定义了以下符号

```
00005140 D SSLv3_enc_data_Ext
**00002800 T SSLv3_server_method_Ext**
00005174 A __bss_start
00005174 A _edata
0000517c A _end
00003aa8 T _fini
00001954 T _init
00002d70 T ssl3_accept_Ext
00002480 T ssl3_enc_Ext
00002850 T ssl3_get_client_key_exchange_Ext
000026f0 T ssl3_write_Ext
00002320 T ssl3_write_bytes_Ext 
```

当我输入：

```
$nm -C -defined-only -g libssl.so 
```

我可以看到定义了以下符号

```
....
00018930 T SSLv3_client_method
00050600 D SSLv3_enc_data
00013640 T SSLv3_method
**00013690 T SSLv3_server_method**
00026f40 T TLSv1_client_method
000506c0 D TLSv1_enc_data
00026ea0 T TLSv1_method
00026ef0 T TLSv1_server_method
..... 
```

当我在 server.cpp 代码中调用 SSLv3_server_method_Ext 时，它有一个问题：

```
server.cpp:70: undefined reference to SSLv3_server_method_Ext() 
```

当我输入：

```
$ nm -C --undefined-only -g server.o 
```

它显示以下内容：

```
U CRYPTO_free
U ERR_print_errors_fp
U SSL_CIPHER_get_name
U SSL_CTX_ctrl
U SSL_CTX_free
U SSL_CTX_new
U SSL_CTX_set_cipher_list
U SSL_accept
U SSL_free
U SSL_get_current_cipher
U SSL_get_error
U SSL_get_peer_certificate
U SSL_get_version
U SSL_library_init
U SSL_new
U SSL_read
U SSL_set_fd
U SSL_shutdown
U SSL_write
**U SSLv3_server_method**
U X509_NAME_oneline
U X509_free
**U SSLv3_server_method_Ext()**
U __gxx_personality_v0
U accept
U bind
U close
U exit
U htons
U inet_ntoa
U listen
U memset
U perror
U printf
U puts
U socket
U stderr 
```

当我将**libssl.so 中的 SSLv3_server_method 与 server.o**链接时存在差异，它显示为“U SSLv3_server_method”并且可以与 libssl.so 成功链接。但是，当我将**libssl_ext.so 中的 SSLv3_server_method_Ext 与 server.o**链接时，它显示为“U SSLv3_server_method_Ext()”，并且由于未定义对 SSLv3_server_method_Ext() 的引用而失败

如果有人向我解释**为什么 server.o 正在寻找 SSLv3_server_method_Ext() 而不是 SSLv3_server_method_Ext**以及如何解决这个问题？当我调用 libssl.so 并找到它时，链接器正在正确查找 SSLv3_server_method。

# node.js - 如何在express和node中从html表单发送put请求

> ID：12765431
> 
> 赞同：4
> 
> 时间：2012-10-07T01:39:11.233
> 
> 标签：node.js, express

我有一个用于编辑对象的表单，我想使用 express 3.x 和 node.js 正确处理它

编辑项目路线：`/item/edit`显示用于编辑对象的表单。

我想我有三个选择：

1) 放置一个值为“edit”的隐藏字段，以便我可以正确处理它。这需要做更多的工作，因为我必须处理它，`app.post('/item', routes.item.post);`其中还将处理新的创建和更新。

2) 仅使用 jQuery.ajax() put 调用提交编辑表单。这允许我使用`app.put('/item', routes.item.put);`

3) 向 /item/edit 而不是 /item 发送一个帖子请求来处理更新/编辑帖子将仅用于在 /item/edit 处进行更新：`app.post('/item/edit', routes.item.edit.post);`

解决方案 #2 是唯一一个在查看 app.js 中的代码时直观且明显的解决方案，并且遵循 CRUD 的标准约定。但是如果由于某种原因没有启用 javascript，他们就不能编辑他们的对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T02:01:58.920

[http://www.senchalabs.org/connect/middleware-methodOverride.html](http://www.senchalabs.org/connect/middleware-methodOverride.html)

表示：

```
app.use(express.bodyParser())
app.use(express.methodOverride()) 
```

你的html表单：

```
<form method="POST">
  <input type="hidden" name="_method" value="put">
</form> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-14T16:39:09.360

对于最近遇到此问题的任何人，这里是对我有用的更新语法。当您阅读本文时可能会有所不同，因此如果这不起作用，只需检查[方法覆盖说明](https://github.com/expressjs/method-override)。但是`method-override 2.3.10`与`Express 4.13.4`以下内容一起使用应该可以。

```
<form method="POST" action="/edit-post/<post.id>?_method=PUT">
   .....
  <button type="submit">Update Post</button>
</form> 
```

# java - 如何告诉 Proguard 在构建中保持相同的混淆名称

> ID：12765432
> 
> 赞同：1
> 
> 时间：2012-10-07T01:39:13.713
> 
> 标签：java, obfuscation, proguard

假设我有 2 个类 - `my.Class1 and my.Class2` 分别混淆 `a.A & a.B` 。

当我添加/删除其他类或升级 proguard 版本时，如何确保`my.Class1 and my.Class2`保留跨版本的混淆名称？`a.A and a.B`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:07:40.607

您可以在第一遍中使用[-printmapping ，在第二遍中使用](http://proguard.sourceforge.net/manual/usage.html#printmapping)[-applymapping](http://proguard.sourceforge.net/manual/usage.html#applymapping)。

# jquery - JQuery 冲突 - 在 Wordpress 插件上强制 Buddypress 兼容性

> ID：12765438
> 
> 赞同：1
> 
> 时间：2012-10-07T01:40:12.827
> 
> 标签：jquery, wordpress, conflict, buddypress

经过几个小时的研究试图挖掘这场冲突的根源，我正在屈服 - 是时候让 SO 的军队发挥一些魔力了。我无法解决阻止注册表单显示 Ajax 驱动的文件上传按钮的任何 jquery/ajax 冲突。该表单由一个名为“User Meta”的插件驱动，该插件基本上通过 wp_usermeta 表为用户管理额外的字段和表单）。

您可以在此处查看问题表单（注意“企业徽标”和“头像”没有上传按钮）： [http](http://dev.buildersinaugusta.com/members/rrawls/) ://dev.buildersinaugusta.com/members/rrawls/ 但是，除此之外，我还可以向您展示在此页面上显示文件上传按钮工作的相同表单：http: [//dev.buildersinaugusta.com/member-profile/](http://dev.buildersinaugusta.com/member-profile/)
区别？非工作表单位于 buddypress 上，而工作表单位于标准 wordpress 页面上。所以这个问题肯定以某种方式根植于我设置的 buddypress 模板，为此我使用 buddypress 模板包插件修改了模板。

更多背景：如果有用信息，我的主题是龙门驱动的火箭主题。

知道大多数 wordpress 插件与 Buddypress 不兼容，看到一半以上的 JS 和 CSS 插件元素没有被加载也就不足为奇了，但有些保留了所有主要功能，只有 ajax 文件上传有问题。该插件确实加载了它自己的 jquery / jquery ui 库，它们在标准的 wordpress 页面上显然可以很好地相互配合，但在 buddypress 页面上却没有。

我修复这个问题的主要方法（它可以手动强制其他插件的兼容性，尽管它们更轻量级）是，使用 firebug，确定所有丢失的元素并将它们手动排入functions.php，你现在可以看到结果在页面的底部。在这种情况下，可以肯定的是一个庞大的修复（如果它确实有效），并且我想稍后简化，但这是我所知道的最快的故障排除方法。

显然，这些元素的加载顺序可能是一个问题——头部加载一半，而我的手动入队加载在主体底部。但这就是我所得到的。我似乎无法想象接下来要寻找什么。

如果需要，我可以在这两个页面上粘贴完整的源代码，但我认为在这种情况下，链接到页面会更合适。任何帮助将不胜感激。

# java - Java：在迭代器中使用 MyLinkedList 添加方法

> ID：12765439
> 
> 赞同：0
> 
> 时间：2012-10-07T01:40:15.170
> 
> 标签：java, eclipse, iterator, linked-list

这可能与 eclipse 的问题有关，但这可能是我的代码某处的问题。无论如何，我有一个 MyLinkedList 类，并且我使用了一个迭代器。当我编写迭代器时，它不允许我通过使用 MyLinkedList.list.add(x, index) 来使用 add 方法。它告诉我：“MyLinkedList 类型中的方法 add(T, int) 不适用于参数 (T, int)”。建议的修复根本不改变任何代码（比如想要将方法的参数类型从 (T, int) 更改为 (T, int)。remove 方法调用相同类型的参数并且工作正常。我会将代码发布到 MyLinkedList 中的 add 方法和迭代器中的 add 方法。

班上：

```
public void add(T x, int index)
{
    if((index < 0) || (index > size))
        throw new IndexOutOfBoundsException();
    if(size == 0)
    {
        this.head = this.tail = new Node(x, null, null);
    }
    else if(index == 0)
    {
        this.head = new Node(x, this.head, null);
        this.head = this.head.getNext().getPrev();
    }
    else if(index == size)
    {
        this.tail = new Node(x, null, this.tail);
    }
    else 
    {
        Node<T> temp = new Node(null, null, null);

        temp.setData(x);
        if(index < this.size() / 2)
        {
            temp = this.head;
            for(int i = 0; i < index; i++)
            {
                temp = temp.getNext();
            }
        }
        else
        {
            temp = this.tail;
            for(int i = this.size(); i > index; i--)
            {
                temp = temp.getPrev();
            }
        }

        temp.getNext().setPrev(temp);
        temp.getPrev().setNext(temp);
        temp.setData(x);

    }
    this.size++;
} 
```

迭代器方法：

```
public void add(T x) 
    {
        if(modCount != expModCount)
            throw new ConcurrentModificationException();

        MyLinkedList.this.add(x, index); //the problem is in this line

        modCount--;
        index++;
    } 
```

整个程序（肯定有一些事情不完全正确，但我更关注 add 方法的问题。如果您发现代码有任何其他问题并希望指出我正确的方向，这对我也有帮助）：

```
public class MyLinkedList<T> extends AbstractList<T> 
{

  private static class Node<T>
  {
    private T data;
    private Node<T> prev;
    private Node<T> next;

    /**
     * Constructor
     * @param nodeData - the data in type T that is stored in the node
     * @param nodePrev - the node previous to the node initialized
     * @param nodeNext - the node following the initialized node
     */
    public Node(T nodeData, Node<T> nodePrev, Node<T> nodeNext)
    {
        this.data = nodeData;
        this.prev = nodePrev;
        this.next = nodeNext;
    }

    /**
     * gets the node previous to this one
     * @return returns the node previous to this
     */
    public Node<T> getPrev()
    {
        return this.prev;
    }

    /**
     * sets the node previous to this
     * @param temp the node used to set the previous node to
     */
    public void setPrev(Node<T> temp)
    {
        this.prev = temp.prev;
    }

    /**
     * gets the node after this node
     * @return the node following this node
     */
    public Node<T> getNext()
    {
        return this.next;
    }

    /**
     * sets the node after this node in the list
     * @param prev - the node 
     */
    public void setNext(Node<T> prev)
    {
        this.next = prev.next;
    }

    /**
     * get the data from this node
     * @return the data from this node
     */
    public T getData()
    {
        return this.data;
    }

    /**
     * set the data in this node
     * @param data - the data to be put in this node
     */
    public void setData(T data)
    {
        this.data = data;
    }
}

private int size;
private int modCount;
public Node<T> head;
public Node<T> tail;

/**
 * Constructor for MyLinkedList that sets the head and tail of the list to point to null and the size set to 0
 */
MyLinkedList()
{
    this.head = new Node<T>(null, null, null);
    this.tail = new Node<T>(null, null, null);
    this.size = 0;
}

/**
 * gets the data from the node specified by the index
 * @param index - the index of the node
 * @return the data of the node with index index
 */
@Override
public T get(int index)
{
    Node<T> temp = new Node(null, null, null);

    if((index < 0) || (index > size))
    {
        throw new IndexOutOfBoundsException();
    }

    if(index < this.size() / 2)
    {
        temp = this.head;
        for(int i = 0; i < index; i++)
        {
            temp = temp.getNext();
        }

        return temp.getData();
    }
    else
    {
        temp = this.tail;
        for(int i = this.size(); i > index; i--)
        {
            temp = temp.getPrev();
        }

        return temp.getData();
    }
}

/**
 * adds data to the list at the specified index
 * @param x - the data to be stored
 * @param index - where in the list the data is stored
 */
public void add(T x, int index)
{
    if((index < 0) || (index > size))
        throw new IndexOutOfBoundsException();
    if(size == 0)
    {
        this.head = this.tail = new Node(x, null, null);
    }
    else if(index == 0)
    {
        this.head = new Node(x, this.head, null);
        this.head = this.head.getNext().getPrev();
    }
    else if(index == size)
    {
        this.tail = new Node(x, null, this.tail);
    }
    else 
    {
        Node<T> temp = new Node(null, null, null);

        temp.setData(x);
        if(index < this.size() / 2)
        {
            temp = this.head;
            for(int i = 0; i < index; i++)
            {
                temp = temp.getNext();
            }
        }
        else
        {
            temp = this.tail;
            for(int i = this.size(); i > index; i--)
            {
                temp = temp.getPrev();
            }
        }

        temp.getNext().setPrev(temp);
        temp.getPrev().setNext(temp);
        temp.setData(x);

    }
    this.size++;
}

/**
 * gets the size of the list
 * @return the size of the list
 */
@Override
public int size() 
{
    return this.size;
}

/**
 * @return returns whether or not the list is empty
 */
public boolean isEmpty()
{
    return (this.size() == 0);
}

/**
 * clears the list by setting the head and tail of the list equal to null and the size equal to 0
 */
public void clear()
{
    this.head = new Node<T>(null,null,null);
    this.tail = new Node<T>(null,null,null);

    this.tail = this.head.getNext();
    this.size = 0;
}

/**
 * removes a node from the list
 * @return the data from the removed node
 */
public T remove(int index)
{
    Node<T> temp;
    if ((index < 0) || (index >= size) || isEmpty())
    {
        throw new IndexOutOfBoundsException();
    }
    if(index == 0)
    {
        temp = new Node(this.head.getData(), null, this.head.getNext());
        this.head = this.head.getNext();
    }
    else
    {
        Node<T> prev = new Node(null,null,null);
        prev = getNth(index - 1);
        temp = new Node(prev.getNext().getData(), null, null);
    }
    this.size--;
    return temp.getData();
}

/**
 * gets the node at the index index
 * @param index - the index of the node we want to return
 * @return the node at the specified index
 */
private Node<T> getNth(int index)
{
    Node<T> temp;
    if(index < 0 || index > size)
        throw new IndexOutOfBoundsException();

    if(index < this.size() / 2)
    {
        temp = this.head;
        for(int i = 0; i < index; i++)
        {
            temp = temp.getNext();
        }
    }
    else
    {
        temp = this.tail;
        for(int i = this.size(); i > index; i--)
        {
            temp = temp.getPrev();
        }
    }
    return temp;
}

private class Iterator<T> implements ListIterator<T>
{
    private Node<T> currentNode;
    private int expModCount = modCount;
    int index = 0;

    /**
     * adds the data to the list using the add method from MyLinkedList
     */
    @Override
    public void add(T x) 
    {
        if(modCount != expModCount)
            throw new ConcurrentModificationException();

        MyLinkedList.this.add(x, index);

        modCount--;
        index++;
    }

    /**
     * @return returns true if the current node is not the tail, returns false if the current node is the tail of the list
     */
    @Override
    public boolean hasNext() 
    {
        if (currentNode.equals(MyLinkedList.this.tail))
            return false;
        else
            return true;
    }

    /**
     * @return returns true if the current node is not the head of the list, returns false if the current node is the head of the list
     */
    @Override
    public boolean hasPrevious()
    {
        if (currentNode.equals(MyLinkedList.this.head))
            return false;
        else
            return true;
    }

    /**
     * @return the data from the next node
     */
    @Override
    public T next() 
    {
        if(modCount != expModCount)
            throw new ConcurrentModificationException();
        if(hasNext() == false)
            throw new NoSuchElementException();

        T nextData = currentNode.getData();
        currentNode.setData(currentNode.getNext().getData());

        index++;

        return nextData;
    }

    /**
     * @return the index of the next node
     */
    @Override
    public int nextIndex()
    {
        return index + 1;
    }

    /**
     * @return the data from the previous node
     */
    @Override
    public T previous() 
    {
        if(modCount != expModCount)
        {
            throw new ConcurrentModificationException();
        }
        if(hasPrevious() == false)
        {
            throw new NoSuchElementException();
        }

        T prevData = currentNode.getPrev().getData();
        currentNode.setData(currentNode.getPrev().getData());

        index--;

        return prevData;
    }

    /**
     * @return the index of the previous node
     */
    @Override
    public int previousIndex() 
    {
        return index - 1;
    }

    /**
     * removes a node using the MyLinkedList remove method
     */
    @Override
    public void remove()
    {
        if(modCount != expModCount)
            throw new ConcurrentModificationException();

        MyLinkedList.this.remove(currentNode);
        modCount--;
    }

    /**
     * sets the data of the current node
     * @param x - the data to set to the current node.
     */
    @Override
    public void set(T x) 
    {
        currentNode.setData(x);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:42:38.950

嘿，问题是您的 Iterator 接口中的类型 E 和类型 E MyLinkedList 类正在发生冲突。如果您删除 Iterator 的类型 E，则不会出现此问题。但是，为了确保类型安全，请考虑像实现集合框架一样实现它，例如[AbstractList.java](http://www.docjar.com/html/api/java/util/AbstractList.java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:55:37.200

我认为解决此问题的最简单方法是使您的迭代器不是参数化类，而是使用外部类中的参数：

```
private class MyIterator implements ListIterator<T> 
```

你设置它的方式，`<T>`in`Iterator<T>`是在屏蔽 in `MyLinkedList<T>`，所以编译器无法知道它们是否是同一类型。无论如何，内部类都从外部类继承参数，因此您`T`的迭代器内部类中仍然有一个可用的参数。

顺便说一句，同样的推理也适用于你的`Node`班级。您应该从类声明中删除参数。您仍然可以在类主体中使用它，因为它是从外部类继承的。

# c++ - C++ lambda 表达式（匿名函数）

> ID：12765442
> 
> 赞同：2
> 
> 时间：2012-10-07T01:40:39.533
> 
> 标签：c++, lambda, c++11

> **可能重复：**
> [什么是 C++11 中的 lambda 表达式？](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)

我在 C++ 中找到了这个表达式（C++11 最令人兴奋的特性之一）：

```
int i = ([](int j) { return 5 + j; })(6); 
```

为什么我得到11？请解释这个表达式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T01:42:04.837

`[](int j) { return 5 + j; }`是一个将 a`int`作为参数并调用它的 lambda `j`。它将 5 添加到此参数并返回它。after 表达式立即调用 lambda，因此`(6)`您将 6 和 5 加在一起。

它大致相当于这段代码：

```
int fn(int j) {
    return 5 + j;
}

int i = fn(6); 
```

当然，除了它不创建命名函数。智能编译器可能会内联 lambda 并进行常量折叠，从而简单地减少到`int i = 11;`.

# jquery - 将标记映射为 Backbone.js 视图

> ID：12765445
> 
> 赞同：4
> 
> 时间：2012-10-07T01:41:04.340
> 
> 标签：jquery, google-maps-api-3, backbone.js, underscore.js, leaflet

我一起使用地图和backbone.js。使用的 Map JS 库是 Leaflet，但谷歌地图 API 也将在这里应用。

**问题：** Backbone.js 允许我们将展示（视图）与数据（模型、集合）分开。在使用 Google Maps JS API 或 Leaflets 时，我们似乎无法控制标记的呈现，因此无法为每个标记提供主干视图。这是真的？

将 Maps 与backbone.js 一起使用时，我开始在回调函数中获取嵌套视图和事件处理程序。

**JS（传单，类似于 Google Maps API）**

```
// Handle a dragging on the map
map.on('dragend', function() {
    App.markersList.fetch(
        data: someData,
        processData: true
        function() {
            App.markersListView.render();
    };)
});

// Handle a click on a Marker
map.on('popupopen', function() {
    // Activate bootstrap tabs
    $('#tabs').tab();

    // Submit click handler
    $('#submit-button').click(function() {
        $.post('/api/submit-something',
            {data: data},
            function() {
                // Remove some divs
                $('#some-divs').fadeOut();
            })
    })

    // Activate slideshow
    Galleria.loadTheme('/js/vendor/galleria.miniml.min.js');
    Galleria.configure({
        height: 320
    });
    Galleria.run('#galleria');

    // Validation
    $('.email-link form').validate({
        rules: { ... }
    });

}); 
```

好吧，您明白了……我需要在 Backbone 的 MVC 结构之外执行这些操作。我可能会错过将两者整合在一起的正确方法。有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:02:36.930

我想对于标记的视图，您的意思是该标记的弹出内容？可以将视图绑定为功能的弹出内容。至少在传单中是这样。

关键是，Leaflet Popups 允许使用提供的 DOM 元素作为其内容。要对标记背后的模型有适当的了解，您可以将标记指定为模型的属性。这使您可以获取模型的关联标记。另一种方式可以通过将事件绑定到其签名包含模型的标记来实现。

这是我的地图视图的简化片段，如何在获取集合后进行设置：

```
_.each(collection.models, function (model) {
    var attr = model.attributes,
        marker = new L.Marker(new L.LatLng(attr.lat, attr.lon));

        marker.on('click', function () {
            App.vent.trigger("model:select", model);
        });

        model.marker = marker;
        map.addLayer(marker);
}); 
```

在这里，为集合中的每个模型绘制一个标记，然后标记成为模型的属性。此外，每个标记都与一个单击事件绑定，该事件触发应用程序范围事件聚合器上的自定义“模型：选择”事件。从这里开始，您可以使用该事件通过捕获以下事件来设置弹出视图：

```
common.vent.on('model:select', function (model) {
    this.select(model);
    this.initPopup(model);
}, this); 
```

InitPopup 可能如下所示：

```
initPopup = function (model) {
    var marker = model.marker,
        view = new PopupView({model: model});

    marker.bindPopup(view.render().el).openPopup();
}; 
```

PopupView 是一个 Backbone 视图（嗯，在我的例子中是 Marionette。）完成模板和事件处理等。

# javascript - 不要等待功能完成

> ID：12765446
> 
> 赞同：2
> 
> 时间：2012-10-07T01:41:16.727
> 
> 标签：javascript, node.js

> **可能重复：**
> [在 node.js 中“生成线程”的行为](https://stackoverflow.com/questions/10042648/spawn-a-thread-like-behaviour-in-node-js)

如何在不等待大量操作完成的情况下让我的代码继续运行？

```
var foo = function()
{
    var i = 1000000000;
    while (i > 0)
    {
        i--;
    }
};
console.log("start");
foo();
console.log("end"); 
```

**编辑** 这不适用于网络开发。我正在使用 node.js

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:31:56.333

在`node.js`中，您可以使用`process.nextTick()`它。它将推迟执行长时间运行的任务，直到下一次绕过事件循环。

```
var foo = function()
{
    var i = 1000000000;
    while (i > 0)
    {
        i--;
    }
};
console.log("start");
process.nextTick(foo());
console.log("end"); 
```

请记住，虽然这将允许此请求立即返回，但当它最终被执行时，它仍然会阻塞线程。Node.js 不适用于长时间运行的 CPU 密集型任务，它针对处理大量轻量级连接进行了优化。

如果您需要使用节点执行 CPU 密集型工作，您应该查看一个作业队列（如`kue`或任何其他 pub/sub 实现），您将作业放置在队列中，第二个 node.js 进程可以侦听新作业并执行它们当他们进来时。

这将允许您的主节点进程快速处理新请求，并允许几个后台节点进程处理所有这些长时间运行的作业。

# shell - 为什么管道命令不起作用

> ID：12765448
> 
> 赞同：0
> 
> 时间：2012-10-07T01:41:34.573
> 
> 标签：shell

```
firefox $(grep -l "mysed" /home/test) 
```

该命令可以打开我所有包含 `mysed` firefox中单词的文件，当我将命令更改为以下内容时，

```
grep -l "mysed" /home/test |  firefox 
```

为什么firefox无法打开grep选择的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:43:26.223

因为管道不应用参数。管道将标准输出从一个进程重定向到另一个进程的标准输入。

您可以使用`xargs`来实现您想要的：

```
grep -l "mysed" /home/test | xargs firefox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:45:06.300

第一个命令将要打开的文件作为命令行参数提供给 Firefox，而第二个命令在 Firefox 的 STDIN 上提供它们不解释，因此无法打开它们。

# python - 在 Python 中将类型作为 (1) 序列 (2) 可迭代类型的确切规范是什么？

> ID：12765451
> 
> 赞同：2
> 
> 时间：2012-10-07T01:42:29.173
> 
> 标签：python, collections

类定义中必须实现哪些方法才能将其视为序列类型和可迭代类型？如果它们有正式的定义，您是否还可以提供对 PEP 或其他定义它的文档的参考？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T01:45:46.247

从[词汇表](http://docs.python.org/glossary.html)：

可迭代的是：

> 带有`__iter__()`or`__getitem__()`方法的对象。可迭代的示例包括所有序列类型（如 list、str 和 tuple）和一些非序列类型，如 dict 和 file。当可迭代对象作为参数传递给内置函数 iter() 时，它会返回该对象的迭代器。此迭代器适用于遍历一组值。

一个迭代器是：

> 具有 next() 方法的可迭代对象。迭代器需要有一个`__iter__()`返回迭代器对象本身的方法。迭代器适用于遍历一组值。

一个序列是：

> 一个 iterable，它支持通过`__getitem__()`特殊方法使用整数索引进行有效的元素访问，并定义了一个 len() 方法，该方法返回序列的长度。一些内置的序列类型是 list、str、tuple 和 unicode。请注意， dict 也支持 `__getitem__()`and `__len__()`，但被认为是映射而不是序列，因为查找使用任意不可变键而不是整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T01:45:19.160

collections 模块定义了用于定义序列和可迭代对象的抽象基类。对于可迭代，您必须定义`__iter__`，对于序列，您必须定义`__getitem__`。请参阅[http://docs.python.org/library/collections.html#collections-abstract-base-classes](http://docs.python.org/library/collections.html#collections-abstract-base-classes)。

# c# - [] 是在 json 结果中表示空值的有效方法吗？

> ID：12765452
> 
> 赞同：0
> 
> 时间：2012-10-07T01:42:46.833
> 
> 标签：c#, .net, json, api, jayrock

我正在尝试使用第 3 方 JSON API，并且预计 null 值将根本没有提供任何值、被排除在结果之外或某些默认值。相反，如果值不存在，API 会返回 [] 来代替单个值（不是数组）：

```
"SomeExpectedDate": [],
"SomeExpectedString": [],
... 
```

当我尝试使用 JayRock JsonConvert 对其进行反序列化时，它失败了，因为我试图加载到单个 String 或 DateTime 值中。

这正常吗，还是我应该去向 API 提供者投诉（这是最近推出的 API）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:56:11.387

一般来说，没有。在 JSON`[]`中表示一个空数组。如果要表示空值，请使用`null`关键字。像：

```
{"someString": null} 
```

尽管就您希望如何在 JSON 中*表示*空值而言，这完全取决于您。如果您编写接收代码以便它理解空数组等效于 null，那肯定会起作用。

然而，在我看来，这将是一种非常有问题/不可靠/难以维护的方法。使用关键字更有意义`null`，否则使用空字符串 ( `{"someString": ""}`)。

**编辑：**

为了回应您关于此问题与使用第三方 API 相关的更新，我认为这绝对是 API 提供者处理的问题。`[]`如果他们真正的意思是，他们不应该回来`null`。虽然他们发送的内容在技术上仍然是有效的 JSON，但他们使用`[]`而不是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:23:25.540

如果您使用的第三方 API 说空数组为空，那么这是完全有效的，您需要围绕它编写代码。

它肯定不同于我以前见过的任何东西，因为 json 有一个实际的`null`关键字，但它是完全合法的语法。

# java - Java JPanel 不绘画

> ID：12765459
> 
> 赞同：0
> 
> 时间：2012-10-07T01:45:15.497
> 
> 标签：java, swing, jpanel, paint, repaint

我遇到了这个相当奇怪的问题——单击按钮后，程序会初始化一个新的 JPanel 对象并尝试立即对其进行绘制。在 repaint() 之后，它将打开一个到服务器的套接字并执行一些交互。我遇到的问题是 repaint() 在套接字交互完成之前不会绘制屏幕。这是代码。

创建 GameGUI JPanel 对象

```
this.startmenu.setVisible(false);
//startmenu is what the user looks at prior to clicking the button
this.game = new GameGUI(this, this.saver,
                        new Player(this.startmenu.getPlayerDataSelection()), in);
this.game.run();//performs the socket interactions 
```

构造 GameGUI JPanel 对象

```
this.game = new PlayingFieldGUI();
//this is a panel inside the panel
this.setLayout(new FlowLayout());
//just need game panel and users panel side by side
this.add(this.game);
this.client.add(this);//client is the jpanel that holds this
this.setVisible(true);
this.game.setVisible(true);
this.client.repaint();//attempting to repaint 
```

该`run()`函数为`GameGUI`. 完成套接字调用后，它会正确绘制背景。如果我要在交互过程中终止与套接字交互的服务器，则会发生异常抛出以及应该在 GameGUI 构造中发生的绘制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:25:03.747

考虑发布一个[SSCCE](http://sscce.org/)，没有它，很难说是什么问题。但是，根据您的描述，您可能会阻止*事件调度线程*(EDT) 与套接字交互。

`repaint()`只安排组件更新，不会立即触发`paint()`。绘画发生在 EDT 上，所以如果你阻止 EDT，那么你就是在干扰绘画机制。

考虑使用工作线程来处理长时间运行的任务。查看[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)，它就是为此目的而设计的。另请参阅[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解有关 EDT 的更多详细信息。

# django - 在模型中自动生成多个 M2M 关系

> ID：12765460
> 
> 赞同：0
> 
> 时间：2012-10-07T01:45:16.347
> 
> 标签：django, django-models

我有以下模型（简化）：

```
class InscriptionDate(models.Model):
    start_date = models.ForeignKey('Date', related_name='+')
    end_date = models.ForeignKey('Date', related_name='+')
    dates_in_range = models.ManyToManyField('Date', blank=True)

class Date(models.Model):
    year = models.IntegerField(max_length=4)
    era = models.CharField(max_length=2, choices=ERA_CHOICES, default=BC) 
```

在选择开始日期和结束日期之后，我希望在保存时为 dates_in_range 生成所有相关的 M2M 关系。这个想法是可以查询范围内的任何日期，并且它将返回与该日期关联的条目。

以下是不正确的，但这是我正在考虑采取的那种方法：

```
 def save(self):
       start = self.start_date.year
       end = self.end_date.year
       for i in range(start, end):
          self.dates_in_range.add(year)
       super(InscriptionDate, self).save() 
```

是否可以以这种方式循环用于 M2M 关系的 add()？我可以通过这种方式从输入数据生成和添加整个 M2M 关系列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:56:04.663

为什么不？请记住在 /after/`save()`调用后执行此操作，因为您需要 PK 来添加 m2ms。

```
super(...).save()
self.dates_in_range.clear()
for year in range(start_year, end_year):
    date, created = Date.objects.get_or_create(year=year)
    self.dates_in_range.add(date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:03:43.547

您可以轻松使用已有的代码并使用[保存后信号来实现它](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_save)

例如

```
from django.dispatch import receiver

@receiver(models.signals.post_save, sender=InscriptionDate)
def add_dates_in_range(sender, instance, **kwargs):
    #assumes both years are in AD
    start_year = instance.start_date.year
    end_year = instance.end_date.year
    for year in range(start_year, end_year+1) #to include end_year
        date = Date.objects.get_or_create(year = year, era = 'AD')[0]
        instance.dates_in_range.add(date) 
```

您也可以将 dates_in_range 实现为方法而不是多对多关系，但这实际上取决于您计划如何使用模型。

例如（假设您已经拥有 start_date 和 end_date 之间所有年份的 Date 对象，并且所有时代都是 AD）

```
class InscriptionDate(models.Model):
    start_date = models.ForeignKey('Date', related_name='+')
    end_date = models.ForeignKey('Date', related_name='+')
    def dates_in_range(self):
        return Date.objects.filter(year__lte = self.end_date.year, year__gte = self.start_date.year, era = 'AD') 
```

# c# - 无法获取 DisplayMemberPath 以在列表框中显示绑定的对象数据

> ID：12765470
> 
> 赞同：0
> 
> 时间：2012-10-07T01:47:16.593
> 
> 标签：c#, wpf, data-binding, listboxitem, ivalueconverter

长话短说，我的应用程序有一部分包含一系列绑定到 Xaml 中的对象实例的列表框。使用`IValueConverter`，我能够`<Part>`从主对象`.ToString()`中检索对象列表并显示检索到的对象的形式。但是，我想要做的是显示`Name`对象的属性。我将 设置`DisplayMemberPath`为`Name`但结果仅将`listboxitem`. 我已经在下面发布了代码的相关部分：

XAML：

```
<Window.Resources>
    <local:LocationtoEquipmentCOnverter x:Key="locationEquipmentFiller" />
</Window.Resources>
<Window.DataContext>
    <local:MegaWdiget/>
</Window.DataContext>
<ListBox x:Name="listboxFront" HorizontalAlignment="Left" Margin="180,45,0,0" VerticalAlignment="Top" Width="82" Opacity="0.5" ItemsSource="{Binding ConverterParameter=Front, Converter={StaticResource locationEquipmentFiller}, Mode=OneWay}" DisplayMemberPath="Name"/> 
```

值转换器：

```
public class LocationtoEquipmentCOnverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        MegaWidget MWidget = (MegaWidget)value;
        Location loc = MWidget.Locations[(string)parameter];
        return loc.Contents;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

MegaWidget 对象包含以下内容：

```
[XmlElement]
public Dictionary<string, Location> Locations { get; set; } 
```

位置对象包含一个列表，其中包含我需要查询其名称的实际对象：

```
 public List<Part> Contents; 
```

**找到解决方案**

在继续按照 Mate 推荐的故障排除路线后，我发现传递的对象是 Part 对象而不是 ListBoxItems。这导致`ListBox`填充实际对象而不是 ListBoxItems。通过更改`ValueConverter`传递`List`ListBoxItems 并将内容标记设置为我需要的内容，ListBoxes 可以正确填充。我在下面的问题区域中列出了解决方案：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:38:03.217

在继续按照 Mate 推荐的故障排除路线后，我发现传递的对象是 Part 对象而不是 ListBoxItems。这导致 ListBox 被实际对象而不是 ListBoxItems 填充。通过更改 ValueConverter 以传递 ListBoxItems 列表并将内容标记设置为我需要的内容，ListBoxes 可以正确填充。

新的 ValueConverter：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    MegaWidget MWidget = (MegaWidget)value;
    Location loc = MWidget.Locations[(string)parameter];
    List<ListBoxItem> displayContent = new List<ListBoxItem>();

    foreach (Part item in loc.Contents)
    {
        ListBoxItem lbi = new ListBoxItem();
        lbi.Content = item.Name;
        displayContent.Add(lbi);
    }

    return displayContent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:33:56.343

根据您的回复“如果我不添加 DisplayMemberPath，但显示继承 (system.MWidget.Part)”，我想属性 Name 为空。

要检查，请测试：

```
public class LocationtoEquipmentCOnverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,   System.Globalization.CultureInfo culture)
    {
        MegaWidget MWidget = (MegaWidget)value;
        Location loc = MWidget.Locations[(string)parameter];

        //Refers to Class "Content" used in loc.Contents collection. I do not know what the name that you have used
        foreach (Content item in loc.Contents)
        {
            item.Name += "***";
        }

        return loc.Contents;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T07:56:12.740

这里有一个例子howto

*   模型

    ```
    public class MegaWidget
    {
        public Dictionary<string, Location> Locations { get; set; }
    }

    public class Location
    {
        public List<Part> Contents { get; set; }
    }

    public class Part
    {
        public int Id { get; set; }
        public string PartName { get; set; }
    } 
    ```

*   转换器

    ```
    public class LocationEquipmentConverter : IValueConverter
    {
        public object Convert( object value, Type targetType, object parameter, CultureInfo culture )
        {
            MegaWidget widget = value as MegaWidget;
            string location = (string) parameter;
            return widget?.Locations[ location ]?.Contents;
        }

        public object ConvertBack( object value, Type targetType, object parameter, CultureInfo culture )
        {
            throw new NotImplementedException( );
        }
    } 
    ```

*   视图模型

    ```
    public class FooViewModel : ViewModelBase
    {
        public FooViewModel()
        {
            Widget = new MegaWidget
            {
                Locations = new Dictionary<string, Location>
                {
                    [ "Front" ] = new Location
                    {
                        Contents = new List<Part>
                        {
                            new Part { Id = 1, PartName = "Part 01" },
                            new Part { Id = 2, PartName = "Part 02" },
                            new Part { Id = 3, PartName = "Part 03" },
                        }
                    },
                    [ "Back" ] = new Location
                    {
                        Contents = new List<Part>
                        {
                            new Part { Id = 11, PartName = "Part 11" },
                            new Part { Id = 12, PartName = "Part 12" },
                            new Part { Id = 13, PartName = "Part 13" },
                        }
                    },
                }
            };
        }

        public MegaWidget Widget { get; }

        #region Property FrontPart
        private Part _frontPart;

        public Part FrontPart
        {
            get { return _frontPart; }
            set { SetProperty( ref _frontPart, value ); }
        }
        #endregion

        #region Property BackPart
        private Part _backPart;

        public Part BackPart
        {
            get { return _backPart; }
            set { SetProperty( ref _backPart, value ); }
        }
        #endregion
    } 
    ```

*   看法

    ```
    <Window x:Class="WPG.WpfApp.FooView"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            xmlns:ViewModel="clr-namespace:WPG.WpfApp.ViewModel"
            xmlns:local="clr-namespace:WPG.WpfApp"
            mc:Ignorable="d"
            Title="FooView" Height="300" Width="300">
        <Window.Resources>
            <ViewModel:LocationEquipmentConverter x:Key="LocationEquipmentConverter"/>
        </Window.Resources>
        <Window.DataContext>
            <ViewModel:FooViewModel/>
        </Window.DataContext>
        <Grid>
            <StackPanel>
                <ListBox ItemsSource="{Binding Widget, ConverterParameter=Front, Converter={StaticResource LocationEquipmentConverter}, Mode=OneWay}"
                         SelectedItem="{Binding Path=FrontPart}"
                         DisplayMemberPath="PartName"/>
                <ListBox ItemsSource="{Binding Widget, ConverterParameter=Back, Converter={StaticResource LocationEquipmentConverter}, Mode=OneWay}"
                         SelectedItem="{Binding Path=BackPart}"
                         DisplayMemberPath="PartName"/>
            </StackPanel>
        </Grid>
    </Window> 
    ```

*   截屏

[![在此处输入图像描述](../Images/1f8d418361bc5ee0aa6d3ea73b08c9d1.png)](https://i.stack.imgur.com/jwe74.png)

# php - 拥有不同版本的 API

> ID：12765478
> 
> 赞同：0
> 
> 时间：2012-10-07T01:49:01.770
> 
> 标签：php, jquery, codeigniter, backbone.js, laravel

在查看其他人的代码时，我注意到一些他们的 javascript/backbone.js 以一种很容易更改其服务器端 API 版本的方式进行编码。

```
API_URL = '/api/v2/'; 
```

**问题：**`v2`能够轻松更改所使用`v1`的API 版本`v3`但不能轻松更改客户端代码的目的是什么？

这是一个主干.js 片段的示例：

```
var POST_API = '/api/v1/post/'

window.Post = Backbone.Model.extend({
    url: POST_API
})

window.Posts = Backbone.Collection.extend({
    model: Post,
    url: POST_API
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:55:20.513

目的是当 API 升级时，服务或脚本（主要来自第三方）仍然能够使用旧的 API。

这意味着，通过这种在 API url 中使用版本名称的方式，您可以在不破坏旧代码/应用程序的情况下更新 API（只要旧版本仍然可用）。

# sql - 复合键与额外的唯一列

> ID：12765480
> 
> 赞同：1
> 
> 时间：2012-10-07T01:50:00.490
> 
> 标签：sql, performance, sqlite, composite-key, unique-constraint

`UNIQUE`对两列使用约束与仅使用一列包含两列值/GUID 的串联并在其上使用索引之间是否存在任何重大开销差异？例如，与其使用（两个不同的列）作为唯一约束，不如添加一个包含或随机 GUID`|John|Smith|`的额外列更有效？`JohnSmith`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:56:43.600

我会添加这两个列并对它们定义一个唯一约束，因为它们似乎具有业务相关性并且 GUID 似乎不合适。此外，不将它们组合起来的动机是避免`SUBSTRING`以后进行任何操作以单独处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:40:42.647

索引本身不会有太大的区别，但是将额外的字段添加到表中会使每条记录变大，从而由于额外的 I/O 而使对表的任何操作变慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:44:22.687

连接两列用作键似乎很愚蠢——当您声明复合键时，数据库完全有能力为您做这件事。向表中添加额外的 INT 或 GUID 键是否有意义取决于这两列是否真的*是*表的主键。如果是的话，为什么还要携带额外列的额外开销（您仍然需要前两列的索引以确保它们保持唯一性）。但是，如果它们不是真正的主键（如在您的示例中，名字和姓氏在几乎任何现实世界系统中都不能被视为主键），那么您将需要一个单独的主键。

# actionscript-3 - 帧数等于数——生命条

> ID：12765481
> 
> 赞同：1
> 
> 时间：2012-10-07T01:50:45.820
> 
> 标签：actionscript-3, flash

我创建了一个条形图，它在第 1 帧上是满的，然后在第 100 帧上是空的，我已经把它变成了补间形状。我想创建一个代码，当我按下某个按钮时，它会耗尽条形图，因此只要按住某个按钮，帧就会从 1 变为 100。

我正在考虑一种方法来做到这一点，但这似乎是不可能的。

```
var maxHP:int = 100;
var currentHP:int = maxHP;
var percentHP:Number = currentHP / maxHP; 
```

我想让 percentHP var 等于条，所以当它达到 50 时，它将达到第 50 帧，依此类推。

这是解决这个问题的正确方法吗？

谢谢。

* * *

以下是我试图在下面修复的代码中使用的变量。此外，我正在创建的游戏有多个角色，所以我所指的栏位于几个电影剪辑中。

基本上，当角色双跳时，它正在飞行，并且条耗尽。一旦酒吧耗尽到 0（或当 PercentHP 为 0 时），那么它应该结束飞行。之后，我希望酒吧能够恢复到 100 加班。

```
var percentHP = Number(Bar.CBar.CMana_bar.currentFrame) / Number(100);
var gravityConstant:Number = 1;   
var doubleJumpReady:Boolean = false;
var flyingJump:Boolean = false;
var upReleasedInAir:Boolean = false;

function loop(e:Event):void{
    //Flying
            if(upReleasedInAir == true){ // if the player releases the up arrow key
                upReleasedInAir = false; // set the variable to true
            }
            if(doubleJumpReady == false){
                doubleJumpReady = true;
            }
        } else { //if we are not touching the floor

            ySpeed += gravityConstant; //accelerate downwards

            //Flying
            if(upPressed == false && upReleasedInAir == false){
                upReleasedInAir = true;
                //trace("upReleasedInAir");
            }
            if(doubleJumpReady && upReleasedInAir){
                if(upPressed){ //and if the up arrow is pressed
                    flyingJump = true;
                    //trace("doubleJump!");
                    doubleJumpReady = false;
                    ySpeed = jumpConstant + 8; //set the y speed to the jump constant
                    gravityConstant = 0;
                    Bar.CBar.CMana_bar.play();
                    //trace(percentMP);
                }
                }
                if(Bar.CBar.CMana_bar.currentFrame == 100 && percentHP == 0){
            gravityConstant = 1;
            Bar.CBar.CMana_bar.stop();
            flyingJump = false;
            doubleJumpReady = false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:44:01.407

如果您询问如何通过编号到达帧，请使用以下`MovieClip.gotoAndStop`方法：

```
loaderBar.gotoAndStop(percentHP); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:05:54.153

您应该做的是将 MOUSE_DOWN 和 MOUSE_UP 事件附加到您的按钮。在`stop();`您的栏的第 1 帧中输入，然后使用 MOUSE_DOWN 和 MOUSE_UP 在您的栏播放或停止动画。类似于以下内容：

```
button.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
button.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler);
function mouseDownHandler(e:Event):void{
bar.play();
} 
function mouseUpHandler(e:Event):void{
bar.stop();
percentHP = Number(bar.currentFrame) / Number(100); //If you still need to know the percent
} 
```

# arrays - FQL：如何在 fql 语句中使用数组？

> ID：12765483
> 
> 赞同：1
> 
> 时间：2012-10-07T01:52:04.930
> 
> 标签：arrays, facebook-fql

如何在下面的行中使用数组而不是 $id，

```
$fql = "SELECT uid, rsvp_status FROM event_member WHERE eid=" . $id; 
```

所以它变成了：

```
$array[0] = "12345678";
$array[1] = "87654321";
$fql = "SELECT uid, rsvp_status FROM event_member WHERE eid=" . $array; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:58:32.800

您想使用`in`运算符：

```
$array[0] = "12345678";
$array[1] = "87654321";
$fql = "SELECT uid, rsvp_status FROM event_member WHERE eid in (".
       implode(',', $array). 
       ")"; 
```

# python - Python 2.7 使用斜纹，正确保存下载的文件

> ID：12765486
> 
> 赞同：2
> 
> 时间：2012-10-07T01:53:06.837
> 
> 标签：python, twill

```
import twill
twill.commands.agent("Mozilla/5.0 (Windows NT 6.2; WOW64; rv:15.0) Gecko/20120910144328 Firefox/15.0.2")
twill.commands.go('loginpage...')

twill.commands.fv("1", "txtUserName", "username")
twill.commands.fv("1", "txtPassword", "password")

# Login Page
twill.commands.submit()

# Pre Registration Report Selection
twill.commands.submit()

# Generate and download the report.
twill.commands.go("ReportGenerator.ashx")

print "Done!"

twill.commands.redirect_output('PreRegistration.xls')
#twill.commands.save_html('PreRegistration.xls') 
```

这就是我目前正在尝试使用的。

该网站的工作方式如下：

1.  登录页面重定向到另一个表单，让我选择要生成的报告。
2.  我想要所有默认选择，所以我只是再次提交页面。
3.  然后我访问另一个生成报告的页面，然后强制下载文件。

redirect_output 不保存 xls 文件。

save_html 确实保存了信息，但它损坏了某些东西，Excel 根本无法读取它。我使用 kdiff 来检查任何差异，它声称有很多但左/右的数据是相同的，想知道这是否是 line-endings..etc 的问题。不是100%确定。

我已经检查了斜纹布网站上的命令页面，但我不确定如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:08:13.480

我怀疑这是一个行尾问题。修改斜纹布的 save_html 函数写为 'wb' 而不是 'w'，一切都很好。

# c++ - 将 char 数组转换为整数

> ID：12765488
> 
> 赞同：2
> 
> 时间：2012-10-07T01:53:57.880
> 
> 标签：c++

基本上我正在阅读一种二进制格式，其中 4 个字节指定要遵循的字符串的大小。所以我想将我从缓冲区读取的 4 个字符转换为 1 个整数。

这就是我所拥有的。

```
int FileReader::getObjectSizeForMarker(int cursor, int eof, char * buffer) {
  //skip the marker and read next 4 byes
  int cursor = cursor + 4; //skip marker and read 4
  char tmpbuffer[4] = {buffer[cursor], buffer[cursor+1], buffer[cursor+2], buffer[cursor+3]};
  int32_t objSize = tmpbuffer;
  return objSize;

} 
```

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T02:06:21.060

手动解包非常容易：

```
unsigned char *ptr = (unsigned char *)(buffer + cursor);
// unpack big-endian order
int32_t objSize = (ptr[0] << 24) | (ptr[1] << 16) | (ptr[2] << 8) | ptr[3]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T02:05:35.660

假设这些是存储的 MSB（即大端）。

```
unsigned char *p = (unsigned char*)buffer + cursor;
uint32_t uiSize = (unsigned int)*p <<24 |
                  (unsigned int)*(p+1) << 16 |
                  (unsigned int)*(p+2) << 8 |
                  (unsigned int)*(p+3); 
```

组装*后将*结果转换为带符号的 int 。我知道这很可怕，但我的打字技巧也是如此。

注意：老实说，我不记得隐式向上转换是否将符号从 char 扩展为 int，但如果确实如此，并且此处的任何单个字节被或一起是最高位点亮的，你如果 *p 不是，可能会感到惊讶。因此，看似偏执的 unsigned cast-o-festival，以及仅*在*完全组装后才转换为 signed-int 的后续行动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T01:56:58.500

这应该可以解决问题：

```
objSize = 0;
for (int i = 0; i < 4; ++ i)
    objeSize += ((int)tmpbuffer[i]) << (8 * i); 
```

或者

```
objSize = 0;
for (int i = 0; i < 4; ++ i)
    objeSize += ((int)tmpbuffer[i]) << (8 * (3 - i)); 
```

正如 nneonneo 指出的那样，对于大端

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-07T01:58:23.380

您所拥有的应该可以正常工作，但要替换它

```
int32_t objSize = tmpbuffer; 
```

为了这

```
int32_t objSize = *((int32_t*)tmpbuffer); 
```

*   它必须在相同的架构中存储和读取。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-07T05:19:40.047

您可以使用该`ntohl`功能将网络字节顺序转换为主机字节顺序。无需重新发明轮子。这还具有一些可移植性的优点，并且只要使用正确的标头，就可以在大端和小端操作系统上工作。下面是一个 Windows 示例，但该功能在 Linux 上也可用：

```
#include <winsock.h>
#include <iostream>

int main()
{
    char buffer[] = "MARK\x00\x00\x00\x08";
    // Point to the 4-byte network (big-endian) order value.
    unsigned long * size = (unsigned long *)(buffer + 4);
    // Dereference and convert it.
    std::cout << ntohl(*size) << std::endl;
    return 0;
} 
```

输出：

```
8 
```

# r - 如何创建带状图？

> ID：12765497
> 
> 赞同：13
> 
> 时间：2012-10-07T01:56:57.247
> 
> 标签：r

我想创建一个带状图（实际上它是多组分类变量的线图），但以 3d 样式显示。这看起来像这样：

![带状图示例](../Images/b3cc5eaf923f7ac25488952aa91dd56a.png)

因此，也许我们希望将以下示例数据绘制为带状图：

```
set.seed(10)
fun <- function(i) data.frame(person=rep(LETTERS[i], 26), 
    letter=letters, count=sample(0:100, 26, T))
dat <- do.call(rbind, lapply(1:10, function(i) fun(i)))

library(ggplot2) #a traditional 2-d line plot of the data
ggplot(data=dat, aes(x=letter, y=count, group=person, color=person)) + 
    geom_line() 
```

这如何在 R 中实现？我知道可能有更好的方法来显示数据，但我目前的兴趣是制作带状图。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-07T12:43:01.663

希望下面的示例将帮助您指出正确的方向：

```
# data
mat <- matrix(dpois(rep(1:20, 10), lambda=rep(10:1, each=20)), ncol=10)

# 2d line plot
matplot(mat, type="l", col="black", lty=1)

# 3d ribbon plots
par(mar = c(0, 1, 0, 1))
par(mfrow=c(1,2))
persp(z=mat[,rep(seq(ncol(mat)), each=2)], r=5, theta=320, phi=35, shade=0.5,
      border=NULL, col=rep(c("#808080FE","#00000000"), each=nrow(mat)-1))
persp(z=mat[,rep(seq(ncol(mat)), each=2)], r=5, theta=320, phi=35, shade=0.5,
      border=NA, col=rep(c("#808080FE","#00000000"), each=nrow(mat)-1))
par(mfrow=c(1,1))
par(mar = c(5,4,4,2)+.1) 
```

![功能区示例](../Images/20926e9b3208b091d640bf073663e696.png)

如您所见，这里的基本思想非常简单。我们将要绘制的值组织到矩阵中，复制矩阵中的列，使它们成对出现，然后使用 绘制值`persp()`，确保在透明和不透明颜色之间交替。然而，还有一些棘手的细节有待解决，特别是关于如何处理边框参数。我会把这些细节留给你。

希望这可以帮助。

# javascript - ember，为什么我需要用这个包装 append 才能工作？

> ID：12765499
> 
> 赞同：0
> 
> 时间：2012-10-07T01:57:01.373
> 
> 标签：javascript, function, append, ember.js, handlebars.js

我是 ember 的入门者，我的问题很简单，我想在我的 html 中附加一个把手，很简单，但是附加（在我所有的实验中）只有在我用 $(function(){...}) 包装它时才有效。我不想使用它（如果可能的话....）。任何替代方案，解决方案，建议？

```
<!--handlebar-->
<script type="text/x-handlebars" data-template-name="text">
  <h1>Send the message:</h1>              
  <input {{action "clicked" on="click"}} {{bindAttr name="name_attribute"}}  value='click me!!' type="button"/>
</script>​

<script>
  //namespace
  App = Ember.Application.create();

  //define view 
  App.myview = Ember.View.extend({
    templateName: 'text',
    name_attribute:'name_buttooooon',               
    message: '',
    clicked: function(event) {
      jQuery('#templateHere').html((this.get('name_attribute')));
    }                               
  });

  //create view
  App.myview=App.myview.create();

  //insert view in body
  $(function() {
    App.myview.append('#templateHere');  //Why I need to wrap this line in $(function(){..})???
  });

</script>

<div id="templateHere"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:13:08.037

用于`Ember.Application.ready`在应用加载后执行操作：

```
App = Ember.Application.create(
  ready: function() {
    this.myview.append('#templateHere');
  }
); 
```

# php - Smarty，在字符串上截断字符串？

> ID：12765501
> 
> 赞同：0
> 
> 时间：2012-10-07T01:57:56.217
> 
> 标签：php, string, smarty

我有一个php博客，

在博客中，用户可以输入`{split}`他们希望将内容拆分为片段等的位置。

然后，在 smarty 模板中，如果我想显示我刚刚使用的拉帖`{$content|replace:'{split}':''}`

但我想做的另一件事是让内容完成`{split}`

就像是`{$content|stop_at:'{split}'|strip_tags}`

是否存在实现此类功能的修饰符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:20:18.160

当然使用 regex_replace。这应该有效：

```
{$content|regex_replace:"/(.*)({split}.*)/i":"\1"|strip_tags} 
```

这会将直到 {split} 的所有内容都捕获到第一个反向引用 (\1) 中，并允许您丢失变量的所有其余部分。目前没有我的 Smarty 设置（实际上刚刚开始），但这个概念在 PHP 中有效。

# java - 获取 ObjectInputStream 以查看不同的对象

> ID：12765505
> 
> 赞同：1
> 
> 时间：2012-10-07T01:58:30.327
> 
> 标签：java, client, objectinputstream

我正在制作一个服务器-客户端应用程序。我的应用程序有两个部分，聊天部分和游戏部分。当我聊天时，我发送 String 对象，当我玩游戏时，它发送 Game 对象到另一台计算机。我怎样才能让我的 ObjectInputStream 看到这两种对象之间的区别。我一直在尝试这样的事情：

```
if (input.readObject().getClass().isAssignableFrom(Game.class)){
                 game1 = (Game) input.readObject();
                  output.writeObject(game1);
                  output.flush();
             }else{
                 message = (String) input.readObject();
                 output.writeObject(message);
                 output.flush();
             } 
```

当我想使用游戏对象时，它会抛出 NotSerializableException，但是聊天部分正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:02:02.597

你的`Game`对象实现了`Serializable`吗？如果您希望能够使用`ObjectInputStream`/读取/写入它，则必须这样做`ObjectOutputStream`。

此外，除了使`Game`可序列化之外，这同样适用于`Game`类中声明的每个字段。每个都必须实现`Serializable`或声明为`transient`（或`static`）成员。如果不满足这些条件，您将`NotSerializableException`在尝试编写对象时得到一个。

**编辑：**

您的代码中还有其他一些问题。一方面，你打电话的`readObject()`次数太多了。我建议尝试类似：

```
Object next = input.readObject();
if (next instanceof Game) {
    game1 = (Game)next;
    //...
}
else if (next instanceof String) {
    message = (String)next;
    //...
}
else {
    System.out.println("Unexpected object type:  " + next.getClass().getName());
} 
```

# android - 当我在手机上运行应用程序时布局发生变化

> ID：12765507
> 
> 赞同：0
> 
> 时间：2012-10-07T01:58:41.430
> 
> 标签：android, android-layout, button, textview, android-edittext

在 Eclipse 中的图形布局中，EditView、TextView 和按钮是我希望它们出现的位置。但是当我在手机上运行它们时，它们会被移动到不同的位置。有人可以帮我把它们放在我想让它们放在哪里吗？

这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/backgroundhdpi" >

        <EditText
            android:id="@+id/bill"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="100dp"
            android:ems="10"
            android:inputType="phone"
            android:text="Enter Your Bill"
            android:textSize="18dip" />

        <Button
            android:id="@+id/calculateTip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/bill"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="40dp"
            android:layout_marginLeft="15dp"
            android:text="Calculate" />

        <TextView
            android:id="@+id/tipOwed"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/bill"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="123dp"
            android:scrollHorizontally="false"
            android:text="Time to Tip!"
            android:textColor="#2c6f37"
            android:textSize="35dip"
            android:textStyle="bold" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:00:09.687

如果我可能会问，您尝试运行您的代码的手机类型/单元是什么？从用户的角度来看，程序的布局有时取决于他们正在使用的手机屏幕。

例子：

您使用 Galaxy S2 模拟器运行该应用程序，并尝试在 Galaxy Y 中运行它。由于两者的屏幕分辨率不同，您会注意到布局可能占用的空间之间的差异。

Also, are you placing the images that are being used in your layout in a single drawable folder? Like for example, drawable-hdpi? Placing images that will be later on used by your layout in different drawable folders could affect directly the size or resolution of the image.

# perl - perl中字符串中引号中的cat命令有什么作用？

> ID：12765509
> 
> 赞同：0
> 
> 时间：2012-10-07T01:59:58.810
> 
> 标签：perl

```
#tf.pl
#!/usr/local/bin/perl
use Util;
$file = shift;
$text = `cat $file`;
my @words = split_words ($text);
my @words = lc_words (@words);
my %count = count_hash(@words);
while (my ($w, $c) = each %count) {
    print "$w\t$c\n";
    $df{$w} = 1;
} 
```

我在一个网站上遇到了该代码。在第 3 行 $file 给出了将与命令行参数一起提供的文件的名称（如果我错了，请纠正我，我是 Perl 新手）

在第 4 行，您会看到：

```
$text = `cat $file`; 
```

我想知道这条线到底是做什么的？我知道`cat filename`在向您显示终端中文件的内容（再次，如果错了，请纠正我。Linux 菜鸟也是）

我在 IRC 上问过这个问题，有人说这是一种糟糕的做事方式，但我真的很想知道这比知道它的更好选择更重要的是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T02:01:57.770

它`cat`在命名文件上运行命令（`$file`在命令行中由 Perl 扩展，而不是 shell）并捕获字符串中的输出。这是在一行 Perl 代码中将文件内容放入变量中的一种方式（不是特别有效的方式）。

处理此问题的另一种方法是使用[`File::Slurp`](http://search.cpan.org/perldoc?File%3A%3ASlurp)CPAN 上的模块或其亲属之一，但也可以在简单的 Perl 函数中使用更多代码行来完成。理想情况下，您编写该函数一次并重用它（有人已经使用 File::Slurp 为您完成了该操作）。

如果脚本文件被称为“xx.pl”（或者有一个“xx.pl”文件），则此代码有效。

```
#!/usr/bin/env perl
use strict;
use warnings;

sub slurp
{
    my($file) = @_;
    open my $handle, '<', $file or return undef;
    local $/ = undef;
    my $content = <$handle>;
    close $handle;
    return $content;
}

my $content = slurp("xx.pl");
print $content; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T02:02:29.723

*反引号*（以便将它们与引号或 区别开来）`'`将`"`它们包含的任何内容作为外部应用程序运行，然后赋值将输出捕获到变量`$text`。内容（在反引号内）可以是任何可运行的进程：

```
$fileList = `ls`
$userList = `who` 
```

等等。

这通常不是一个好主意，因为它将程序与特定的操作系统（`cat`在这种情况下带有命令的操作系统）联系在一起。

这*可能*不是问题，但您应该知道它会降低可移植性。

有一些完全可以接受的方法可以将文件的内容放入 Perl 中的变量中，一种适用于所有平台（`open`、、`while <BLAH>`附加字符串和`close`）的方法，例如这个示例程序`xyzzy.pl`以两种不同的方式读取自身（第一个便携式，另一个不是）：

```
$sample1 = "";
open (INFILE, "xyzzy.pl") || die "Urk!";
while (<INFILE>) {
    $sample1 .= $_;
}
close (INFILE);

$sample2 = `cat xyzzy.pl`;

if ($sample1 ne $sample2) {
    print "Different\n";
    print "[$sample1]\n";
    print "[$sample2]\n";
} else {
    print "Same\n";
} 
```

输出：

```
Same 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T02:05:05.510

请参阅[perldoc perlop](http://perldoc.perl.org/perlop.html)`qx`。反引号运行命令并将文件的内容存储到标量变量、换行符和所有内容中。`cat``$text`

# c++ - C++ 链表类 -> 头文件

> ID：12765517
> 
> 赞同：1
> 
> 时间：2012-10-07T02:01:54.967
> 
> 标签：c++, header, winmain

> **可能重复：**
> [未定义对“WinMain@16”的引用](https://stackoverflow.com/questions/5259714/undefined-reference-to-winmain16)

我一直在研究一个循环的双链表。决定创建一个类并使用一个标题。我是 C++ 新手，所以我检查了如何实现它。我不确定我是否正确实现了列表中的结构节点。

编译 Clist.cpp 文件后，我收到此错误。

```
(.text+0xd2): undefined reference to `WinMain@16'
collect2: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 1 seconds)
1 errors, 0 warnings
d:\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\libmingw32.a(main.o):main.c|| undefined reference to `WinMain@16'| 
```

--

```
#ifndef CLIST_H
#define CLIST_H
struct  Node {
        char data;
        Node *prev, *next;
        Node (char d, Node *p, Node *n): data(d), prev(p), next(n)
        {
            if(p) prev->next = this;
            if(n) next->prev = this;
        }
};

class Clist
{
    public:
        Clist(char);
        virtual ~Clist();
        Node *head;     // current node that is being pointed to
        int size;
        bool isEmpty();
        void addNodeBefore(char);           // inserted before head
        void addNodeAfter(char);            // inserted after head
        void addNodeBeforeData(char, Node*);// Same as above, inserted before/after a specific node
        void addNodeAfterData(char, Node*);
        void out(bool);     // Prints the list, true starts from beginning, false starts from end
        void setData(char);
        void setPrev(Node*);
        void setNext(Node*);
        bool findData(char);    // Searches through the list to find the char
        void deleteData(char, bool);

};

#endif // CLIST_H 
```

--

```
#include "Clist.h"
#include <string.h>
#include <iostream>
using namespace std;

Clist::Clist(char d)
{
    head = new Node(d, NULL, NULL);
    head->next = head->prev = head;
    size = 1;

}
Clist::~Clist()
{

    Node *tmp = this->head;
    Node *temp;
    while(tmp->prev)
        tmp = tmp->prev;
    while(tmp)
    {

        temp = tmp->next;
        delete tmp;
        tmp = temp;
    }
    tmp = temp = NULL;

}
bool Clist::isEmpty()
{   return (this->size == 0);}

void Clist::addNodeBefore(char d)
{
    Node *n = head;
    Node *p = head->prev;

    Node *temp = new Node (d, p, n);
    size++;
    //cout << "added: " << temp->data << "  before: "
    //      << temp->prev->data << "  after: " << temp->next->data << endl;

}
void Clist::addNodeAfter(char d)
{
    Node *n = head->next;
    Node *p = head;

    Node *temp = new Node (d, p, n);
    size++;
    //cout << "added: " << temp->data << "  before: "
    //      << temp->prev->data << "  after: " << temp->next->data << endl;

}
void Clist::out(bool dir)   // True to traverse next, false to traverse prev
{
    if (dir)
    {
        Node *tmp = head;
        do{
            cout << tmp->data;
            tmp = tmp->next;
        }while(tmp != head);
    }else
    {
        Node *tmp = head;
        do{
            cout << tmp->data;
            tmp = tmp->prev;
        }while(tmp != head);
    }
    cout << endl;

}
void Clist::setData(char Data)
{
    this->head->data = Data;
}
void Clist::setPrev(Node* Prev)
{
    this->head->prev = Prev;
}
void Clist::setNext(Node* Next)
{
    this->head->next = Next;
}
bool Clist::findData(char search)
{
    int counter = 0;
    Node *tmp = head;
    while(tmp->next != head)
    {
        if(tmp->data == search)
            counter++;
        tmp = tmp->next;
    }

    if (counter > 0)
    {
        cout << "'" << search << "' was found " << counter << " time(s)" << endl;
        return true;
    }else
    {
        cout << "'" << search << "' was not found" << endl;
        return false;
    }
}

void Clist::deleteData(char search, bool all)   // If true, it will delete all nodes with the same search
{                                               // If false, it will delete the first Node only
    Node *tmp = head;
    while(tmp)
    {
        if(tmp->data == search)
        {
            cout << "Deleting " << search << endl;
            tmp->prev->next = tmp->next;
            tmp->next->prev = tmp->prev;
            if (false)
                return;
        }
        tmp = tmp->next;

    }
} 
```

--

```
#include <string.h>
#include <iostream>
#include "Clist.h"
using namespace std;

int main(int argc, char* argv[])
{

    char s[]="abcfdefghijklmgnopqrsatuvwxyz";

    Clist *list; // ptr to head of list
    Node *curr; // ptr to current node of the list

    // call constructor and initialize first Node
    list = new Clist(s[0]);

    for(size_t i=1; i < strlen(s); i++) // create the rest of the linked list
        list->addNodeAfter(s[i]);

    list->out(true);
    list->out(false);

    cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:26:10.810

由于我使用的是 IDE（代码块），因此我尝试使用项目工作区。添加了这个类，它现在可以工作了。

# java - 标签未显示在 GUI 中（可能是因为背景图片？）

> ID：12765527
> 
> 赞同：0
> 
> 时间：2012-10-07T02:03:29.967
> 
> 标签：java, user-interface, javafx, scenebuilder

我已经尝试了一个星期左右的聊天，目标是聊天将成为一个包含人物和背景房间的动画聊天。到目前为止，我已经创建了具有背景的 gui，现在已经到了我想在有人连接时添加我的角色的地步。GUI 是在 JavaFx Scenebuilder 中创建的，样式表是在 CSS 中创建的。

这背后的想法是，当有人连接到服务器时，他们会得到一个聊天人，然后是屏幕上的一个随机位置站立（稍后我会实施移动:)）但我的问题是当我尝试创建标签时附上图片，GUI似乎没有显示图片（如下图示例所示），我的代码如下所示：

```
 Label test = new Label();
    test.setStyle("build.css");
    test.setText("Here i am");
    test.setVisible(true);

    Image img = new Image(getClass().getResourceAsStream("Figur.png"));
    Label test2 = new Label("", new ImageView(img));
    test2.setLayoutX(50);
    test2.setLayoutY(30);
    test2.setVisible(true); 
```

上面的代码是 2 次尝试创建标签，但 Gui 仍然没有实际显示它们。我目前的想法是标签隐藏在 GUI 的背景图片后面，因为我只是通过 CSS 添加了图片（使用以下代码）：

```
#AnchorPane{-fx-background-image:url('Background.JPG');} 
```

谁能帮助我并指导我如何让我的标签出现在图片中并可见？:)

先感谢您！

![我的程序图片](../Images/4764a203ee0b6d264a0f3a7b6bd7690b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:43:52.993

你的第一次尝试是错误的

```
test.setStyle("build.css"); 
```

像下面这样加载你的 CSS 样式表

```
scene.getStylesheets().add(getClass().getResource("build.css").toExternalForm()); 
```

并将加载的 css 中定义的自定义 id 选择器应用于测试标签

```
test.setId("myTestId"); 
```

您的第二次尝试是正确的。展示如何将这些标签添加到场景中。
**更新：**要动态添加标签，请执行以下操作。
在 FXML 文件的控制器类中，链接到锚窗格并向其添加标签：

```
@FXML private AnchorPane anchorPane; // where fx:id = anchorPane
anchorPane.getChildren().addAll(test, test2); 
```

# .htaccess - 合并一些 Mod 重写规则

> ID：12765529
> 
> 赞同：2
> 
> 时间：2012-10-07T02:03:52.197
> 
> 标签：.htaccess, mod-rewrite

这更像是这个问题的后续问题： [.htaccess - 如何强制“www”。以一般的方式？](https://stackoverflow.com/questions/4916222/htaccess-how-to-force-www-in-a-generic-way)

我有这个规则：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我想将它们与该答案中提供的合并：

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

这些是正确的结果（正确的顺序和规则）吗？

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

到目前为止，一切都按预期工作，但我所有的测试都是在临时 URL 中完成的，而不是在实际域中完成的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:40:41.443

这些规则应该可以满足您的需求，但我会稍微调整一下。既然你有什么作品，这只是基于我的喜好的建议。:)

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php/$1 [L]
</IfModule> 
```

我发现当所有不是规则的重写选项都排在第一位时会更容易阅读。我还喜欢添加空行，以便更容易查看一组规则的结束位置和下一组规则的开始位置。

这条规则是不必要的：`RewriteRule ^index\.php$ - [L]`因为下一条规则只会影响对未映射到真实文件的 URI 的请求。因为文件系统上存在index.php，所以不会触发下一条规则。

对于 index.php 规则，添加 /$1 会使请求在 $_SERVER['PATH_INFO'] 中可用，这取决于您的代码的编写方式，这可能会有所帮助。这绝对不是必需的，但是对于像 WordPress 或 CodeIgniter 这样的应用程序来说，建议这种方法很常见，所以我认为值得一提。

# mysql - 根据我的 Select 语句获取正确的 MySQL 更新语句

> ID：12765531
> 
> 赞同：0
> 
> 时间：2012-10-07T02:04:34.727
> 
> 标签：mysql, sql-update

我的数据库中有一个错误，需要大量纠正一些位......但这并不容易......或者我认为！？我不擅长 SQL 语句。大多数情况下，它们用于提取数据，而不是大量输入数据。所以我想确保在我把事情弄得一团糟之前，我的语句是正确的。这是我的查询...

```
 SELECT * FROM tickets_messages
    INNER JOIN tickets ON tickets_messages.ticket_id = tickets.id 
    INNER JOIN people ON tickets_messages.person_id = people.id
    WHERE tickets.person_id = 201 AND tickets_messages.person_id = 32 
```

我们在系统中有“票”，由两个表 People 和 ticket_messages 链接。有些消息需要在 id 32.. 和一些在 id 201 下，这就是为什么我执行内部连接来查找系统认为属于 201.. 但实际上在 ticket_messages 中显示为 32 的票证。

简而言之，我想将带有内部连接的 select 语句更改为 update 语句。任何人对此有任何建议......因为我在这个领域感到有点动摇。

PS这是我的猜测..是正确的：

```
 UPDATE tickets_messages SET person_id = 201 
   INNER JOIN tickets ON tickets_messages.ticket_id = tickets.id 
   INNER JOIN people ON tickets_messages.person_id = people.id
   WHERE tickets.person_id = 201 AND tickets_messages.person_id = 32 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:43:18.930

你有什么问题？你只是想让某人确认 UPDATE 命令会做你想做的事吗？如果目标是`ticket_messages.person_id`在 SELECT 查询找到的所有记录中设置为 201，那么它看起来对我来说是正确的。

# scala - Scala Actors - 使用 SingleThreadedScheduler 和接收

> ID：12765532
> 
> 赞同：0
> 
> 时间：2012-10-07T02:04:53.417
> 
> 标签：scala, scheduled-tasks, generator, actor

我正在与 Scala Actors 合作尝试实现一些调度程序算法。

调度程序接收两个函数，它们在计算过程中调用一些“交互”函数。例如：

```
def func1(x:Int, y:Int)(scheduler:MyScheduler):Int = {
   var z = 0
   if (scheduler.interact(1)) {
       return 7
   }
   z = x * y
   for (c <- 1 to 10) {
       if (scheduler.interact(z)) {
           return z
       }
       z = z * c
   }
   z
} 
```

现在调度器需要**顺序**运行这两个函数，并且每当一个函数的执行到达“交互”时，调度器决定是让同一个函数继续还是暂停它并唤醒另一个函数计算。

你可以把它想象成运行 python 生成器，调度器决定每次调用哪个生成器的*next() 。*

我使用 Scala Actors 实现了这一点——每个函数都在一个actor中执行，并且`interact`操作向主线程（调度程序）回复一些值并调用“receive”来等待来自主线程的消息。

请注意，我不能使用“react”而不是“receive”，因为我需要执行从接收块中断（并从“交互”函数返回）。

[然后我想通过使用SingleThreadedScheduler](http://www.scala-lang.org/api/current/scala/actors/scheduler/SingleThreadedScheduler.html)让我的演员始终在主线程上运行来改进实现。

但是，似乎与“react”不同，“receive”函数尝试创建一个阻止执行的新线程。

在“react”和“receive”之间是否存在某些东西，其中执行会像“receive”一样离开块，但要避免像“react”那样创建新线程？或者也许我可以通过其他方式将线程数限制为 1？

A-Posteriori 我读过关于 scala continuations 的文章，但这需要太多的代码更改（你会同意 scala continuations 使用起来有点复杂......）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:19:33.773

这种挑战证明演员模型并不总是正确的抽象。正如您所说，延续通常会使事情变得更加复杂，对于那些阅读您的代码的人来说，甚至可能相当模糊。

我自己的偏好是找到一种方法来清楚地推理线程实际将要做什么。幸运的是，这可以使用出色的 JCSP API（来自 UKC）来实现。虽然这是一个 Java API，但它在 Scala 中也可以正常工作，并且成熟稳定（有一个 Oxford Uni 纯 Scala 项目，但可能还不成熟）。JCSP 实现了 Hoare 的 CSP，这是一种数学代数，但一旦您意识到它是事件驱动的，它就很容易使用。演员可以很容易地在 JCSP 中建模，但反之则不行。

在您的应用程序中，您的调度程序将拥有自己的 CS-Process（也称为 Java 线程），并将根据接收到的事件确定自己的状态和生命周期。这允许它按顺序调用这两个函数，而不是同时重叠，而是成为更广泛的线程活动套件的一部分。

[http://www.cs.kent.ac.uk/projects/ofa/jcsp/](http://www.cs.kent.ac.uk/projects/ofa/jcsp/)提供背景资料。该罐子位于[http://mvnrepository.com/artifact/org.codehaus.jcsp/jcsp](http://mvnrepository.com/artifact/org.codehaus.jcsp/jcsp)

# php - 为什么 jQuery.parseJSON 不接受换行符？

> ID：12765533
> 
> 赞同：4
> 
> 时间：2012-10-07T02:05:04.723
> 
> 标签：php, javascript, jquery, json

好的，所以我一直在处理返回手工 JSON 的 PHP 5.3 服务器（因为在 5.3`JSON_UNESCAPE_UNICODE`中`json_encode`函数中没有），在阅读[了这个线程](https://stackoverflow.com/a/2275428/276451)并进行了一些测试之后，我想我在 jQuery 的`parseJSON`函数中发现了一个问题。

假设我有以下 JSON：

```
{
    "hello": "hi\nlittle boy?"
} 
```

如果您使用[jsonlint.com](http://jsonlint.com/)检查它，您可以看到它是有效的 JSON。但是，如果您尝试以下操作，您会收到一条错误消息：

```
$(function(){
    try{
        $.parseJSON('{ "hello": "hi\nlittle boy?" }');
    } catch (exception) {
        alert(exception.message);
    }    
});​ 
```

[链接到小提琴](http://jsfiddle.net/m8t89/)。

我在 jQuery 上打开了一个[错误报告](http://bugs.jquery.com/ticket/12666)，因为我认为这是一个正确的错误。你怎么看？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T02:11:28.670

这不是一个错误，它与 JavaScript 中字符串文字的处理方式有关。当你有：

```
'{ "hello": "hi\nlittle boy?" }' 
```

...您的字符串将被解析为：

```
{ "hello": "hi
little boy?" } 
```

...*在*它被传递给`parseJSON()`. 这显然不是有效的 JSON，因为在`\n`“hi little boy?”中间已经转换为文字换行符。细绳。

您希望 ' ' 序列在转换为文字换行符之前`\n`使其成为函数。`parseJSON()`为此，需要在文字字符串中对其进行*两次转义。*像：

```
'{ "hello": "hi\\nlittle boy?" }' 
```

示例：http: [//jsfiddle.net/m8t89/2/](http://jsfiddle.net/m8t89/2/)

# c# - 将数据添加到mssql字符串到字节错误c#

> ID：12765535
> 
> 赞同：1
> 
> 时间：2012-10-07T02:05:32.377
> 
> 标签：c#, sql-server, database, insert

我正在尝试将一些数据放入使用 Visual Basic 创建的 MSSQL 数据库中。当我执行代码时，我收到以下错误：

```
Error   21  Cannot implicitly convert type 'string' to 'byte[]' c:\users\hussein\documents\visual studio 2012\Projects\WebApplication2\WebApplication2\defualt.aspx.cs  32  33  WebApplication2
Error   22  Cannot implicitly convert type 'string' to 'byte[]' c:\users\hussein\documents\visual studio 2012\Projects\WebApplication2\WebApplication2\defualt.aspx.cs  33  32  WebApplication2
Error   23  Cannot implicitly convert type 'string' to 'byte[]' c:\users\hussein\documents\visual studio 2012\Projects\WebApplication2\WebApplication2\defualt.aspx.cs  34  34  WebApplication2
Error   24  Cannot implicitly convert type 'string' to 'byte[]' c:\users\hussein\documents\visual studio 2012\Projects\WebApplication2\WebApplication2\defualt.aspx.cs  35  34  WebApplication2 
```

这是我的代码，我试图将字符串转换为`byte[]`，但我的数据库中有二进制文本。

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml.Linq;
using System.Linq;
using System.Data.Linq;

namespace WebApplication2
{
    public partial class defualt : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Unnamed5_Click(object sender, EventArgs e)
        {
            if ((TextBox1.Text == "" || TextBox2.Text == "" || TextBox3.Text == "" || TextBox4.Text == ""))
            {
                Label1.Text = "<h3>- Du måste fylla i alla fält, brorsan</h3>";
            }
            else
            {
                DatabaseEntities db = new DatabaseEntities();
                var nyMedlem = new medlemar();
                nyMedlem.namn = TextBox1.Text;
                nyMedlem.anv = TextBox2.Text;
                nyMedlem.losen = TextBox3.Text;
                nyMedlem.epost = TextBox4.Text;
                db.medlemar.Add(nyMedlem);
                db.SaveChanges();
                Label1.Text = "<h3>- Nu är du medlem</h3>";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:23:24.660

您可能将 4 个文本字段保存到格式为 byte[] 的数据库字段中，因此您将获得 4 次转换。

试试这个：它需要改变 medlemar 类。

```
string x = TextBox1.Text;
byte[] y = System.Text.Encoding.UTF8.GetBytes(x);

nyMedlem.(something of data type byte[]) = y; 
```

# mysql - 从 MySQL 获取昨天的查询

> ID：12765539
> 
> 赞同：0
> 
> 时间：2012-10-07T02:06:48.610
> 
> 标签：mysql, sql

我正在尝试获取昨天的查询！使用此代码，我可以获得今天的查询，但我不知道应该怎么做才能显示昨天的查询：

```
$t_date = date( 'Y-m-d H:i', $_TIME - (3596 * 24) );
$twall = $db->super_query("SELECT COUNT(*) as c 
                             FROM dle_photo_post 
                            WHERE date > = '$t_date'
                              AND date < = '$t_date' + INTERVAL 24 HOUR 
                              AND moder = '0' ");

$twall = $twall['c']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:10:47.063

尝试这个：

```
SELECT COUNT(*) as c 
FROM dle_photo_post 
WHERE date between 
                date_sub(curdate(), interval 2 day) 
            and date_sub(curdate(), interval 1 day)
    AND moder = '0' 
```

# c# - 即使我可以看到值，会话也返回 null

> ID：12765540
> 
> 赞同：0
> 
> 时间：2012-10-07T02:07:32.570
> 
> 标签：c#, asp.net-mvc, session

```
public class BaseController : Controller
{
    public string UserId { set; get; } 
    public string AccessToken { set; get; }

    private readonly IUnitOfWork _unit;

    public BaseController(IUnitOfWork unit)
    {
        _unit = unit;
    }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    { 
        UserId = Session["_UserId"] as string; 
        AccessToken = Session["_AccessToken"] as string;
        // ......
    }
 } 
```

即使 AccessToken 返回值。UserId 即将到来，`null`即使我可以调试并看到`Session`对象中有一个值。

我在会话中设置它们：

```
 Session.Add("_UserId", user.Id);
        Session.Add("_AccessToken", user.AccessToken); 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:09:15.893

```
UserId = Session["_UserId"] as string; 
```

看起来键“_UserId”的值不是字符串 - 因此您得到`null`结果。

# stringstream - 将数组传递给字符串流

> ID：12765541
> 
> 赞同：0
> 
> 时间：2012-10-07T02:07:33.060
> 
> 标签：stringstream, memory-address

这是我从未注意到的事情，但由于某种原因你不能做类似的事情

```
sstr << myarray; 
```

如果你这样做“sstr”将包含“myarray”的地址，你必须这样做

```
for(int i;i < sizeof(myarray);i++)
{
sstr << myarray[i];
} 
```

我想知道为什么会发生这种情况，我不记得曾经这样做过，但我个人认为有时现实本身会改变只是为了惹恼我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:17:38.480

您需要为数组定义自己的流操作才能显示它。

```
#include <iostream>
#include <vector>
using namespace std;

template <typename T>
class mydata
{
public:
    mydata(int size = 0) { for (int i = 0; i < size; i++) add(0); }
    ~mydata() { }
    void add(T x) { data.push_back(x); }
    void remove(int pos) { data.erase(data.begin() - pos); }
    T& operator[](int pos) { return data[pos]; }
    friend ostream& operator<<(ostream& os, const mydata<T>& name) {
       for (int i = 0; i < x.data.size(); i++) os << x.data[i] << " "; return os; }
private:
    vector<T> data;
}; 
```

那将是封装数据的标准类。如果你想像你一样做手术`mydata<int> b(8); b[7] = 8;`。<< 运算符的代码在类中的原因是因为模板要求特定于类型名称的代码位于模板本身内。

最后，这就是代码的实现方式。

```
int main()
{
    mydata<char> charData;
    mydata<int> intData;
    for (int i = 0; i < 20; i++) {
        charData.add(65+i);
        intData.add(i);
    }
    cout << charData << endl;
    cout << intData;
    cin.get();
    return 0;
} 
```

输出如下所示：
`A B C D E F G H I J K L M N O P Q R S T`
`0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19`

# vb.net - 无法在 VB.NET 中使用 Fluent API 定义复合 PK

> ID：12765542
> 
> 赞同：1
> 
> 时间：2012-10-07T02:07:39.967
> 
> 标签：vb.net, entity-framework, fluent-interface

我正在尝试为其中一个列是另一个表的 FK 的类定义复合 PK。代码编译没有任何错误，但是当我尝试迁移更改时出现以下错误

```
PM> Update-Database -Force -TargetMigration:0
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
System.InvalidOperationException: The properties expression 'x => new VB$AnonymousType_0`2(RtepNumber = x.RtepNumber, ContractId = x.Contract.ContractId)' is not valid. The expression should represent a property: C#: 't => t.MyProperty'  VB.Net: 'Function(t) t.MyProperty'. When specifying multiple properties use an anonymous type: C#: 't => new { t.MyProperty1, t.MyProperty2 }'  VB.Net: 'Function(t) New With { t.MyProperty1, t.MyProperty2 }'.

The properties expression 'x => new VB$AnonymousType_0`2(RtepNumber = x.RtepNumber, ContractId = x.Contract.ContractId)' is not valid. The expression should represent a property: C#: 't => t.MyProperty'  VB.Net: 'Function(t) t.MyProperty'. When specifying multiple properties use an anonymous type: C#: 't => new { t.MyProperty1, t.MyProperty2 }'  VB.Net: 'Function(t) New With { t.MyProperty1, t.MyProperty2 }'. 
```

但是，据推测导致异常的那个似乎确实在请求的语法中。

给定以下课程

```
Public Class ParentClass
   Public Property ParentClassId as String

   Public Property Title As String

   Public Property ChildClasses As ICollection(Of ChildClass)
End Class

Public Class ChildClass      
   Public Property ParentClass As ParentClass

   Public Property ChildClassId As String

   Public Property Title As String
End Class 
```

以及以下 Fluent API 代码

```
Protected Overrides Sub OnModelCreating(ByVal modelBuilder As System.Data.Entity.DbModelBuilder)
   MyBase.OnModelCreating(modelBuilder)

   modelBuilder.Entity(Of Models.ChildClass).HasRequired(Function(x) x.ParentClass).WithMany(Function(x) x.ChildClasses).Map(Function(x) x.MapKey("ContractId"))

   modelBuilder.Entity(Of Models.ChildClass).HasKey(Function(x) New With {x.ParentClass.ParentClassId, x.ChildClassId})
End Sub 
```

等效的 SQL 代码是

```
CREATE TABLE [dbo].[ParentClass](
    [ParentClassId] [nvarchar](10) NOT NULL,
    [Title] [nvarchar](25) NOT NULL,
 CONSTRAINT [PK_ParentClass] PRIMARY KEY CLUSTERED 
(
    [ParentClassId] ASC
)
)
GO

CREATE TABLE [dbo].[ChildClass](
    [ParentClassId] [nvarchar](10) NOT NULL,
    [ChildClassId] [nvarchar](10) NOT NULL,
    [Title] [nvarchar](25) NOT NULL,
 CONSTRAINT [PK_ChildClass] PRIMARY KEY CLUSTERED 
(
    [ParentClassId] ASC,
    [ChildClassId] ASC
)
)
GO

ALTER TABLE [dbo].[ChildClass]  WITH CHECK ADD  CONSTRAINT [FK_ChildClass_ParentClass] FOREIGN     KEY([ParentClassId])
REFERENCES [dbo].[ParentClass] ([ParentClassId])
GO

ALTER TABLE [dbo].[ChildClass] CHECK CONSTRAINT [FK_ChildClass_ParentClass]
GO 
```

感谢您提供任何帮助。

**编辑：**

经过更多的研究（即实验），问题似乎源于在 PK 定义中使用导航属性。所以改变代码看起来像

```
Public Class ChildClass      
   Public Property ParentClassId As String

   Public Property ChildClassId As String

   Public Property Title As String
End Class

Protected Overrides Sub OnModelCreating(ByVal modelBuilder As System.Data.Entity.DbModelBuilder)
   MyBase.OnModelCreating(modelBuilder)

   modelBuilder.Entity(Of Models.ChildClass).HasKey(Function(x) New With {x.ParentClassId, x.ChildClassId})
End Sub 
```

清除异常，但当然，我现在在 ChildClass 中丢失了 ParentClass 导航属性。

还是一头雾水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:17:48.330

看来您**必须**在子类中具有标量属性。只能使用显式标量属性定义键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:12:20.280

您可以将导航属性保留在您的课程中......

```
Public Class ChildClass      
    Public Property ParentClassId As String

    Public Property ChildClassId As String

    Public Property Title As String

    Public Property ParentClass As ParentClass
End Class 
```

...然后在您的映射中使用`HasForeignKey`而不是：`MapKey`

```
modelBuilder.Entity(Of Models.ChildClass). _
    HasKey(Function(x) New With {x.ParentClassId, x.ChildClassId})

modelBuilder.Entity(Of Models.ChildClass). _
    HasRequired(Function(x) x.ParentClass). _
    WithMany(Function(x) x.ChildClasses). _
    HasForeignKey(Function(x) x.ParentClassId) 
```

如果外键在数据库表中有另一个名称，则添加列名映射：

```
modelBuilder.Entity(Of Models.ChildClass). _
    Property(Function(x) x.ParentClassId). _
    HasColumnName("ContractId") 
```

# c - 实时压缩 32 位 RGBA 图像数据

> ID：12765543
> 
> 赞同：2
> 
> 时间：2012-10-07T02:07:46.493
> 
> 标签：c, compression, rgba

压缩 RGBA 32 位图像数据的最快算法是什么？我在 C 中工作，但很高兴看到其他编程语言的示例。

现在我正在使用 LZ4，但我正在考虑运行长度/增量编码。

无损编码，现实生活中的图像和计算机生成/剪贴画图像的混合。Alpha 通道始终存在，但通常是恒定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T16:55:51.873

我最终只使用了 LZ4。没有什么比这更快了，LZ4 通常至少减小了 50% 的尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:24:36.330

Lossy or lossless?
"Real" images or computer graphics?
Do you actually have an alpha channel?

If you need lossless (or semi=lossless) then converting into YUV and compressing that will probably reduce by about 1/2 (after already having it in going to 2bytes/pixel) try [Huffyuv](http://neuron2.net/www.math.berkeley.edu/benrg/huffyuv.html)

If you have real images then H264 can do very high compression and there are optomised libraries and HW support so it can be very fast.

If you have computer graphics type images with few colours but need to preserve edges, or you actually have an A channel then run length might be good - try splitting the image into per-colour frames first.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:27:28.193

LZ4 是 LZ77 系列，它只有几行代码，但我自己从未做过，但我猜你是正确的运行长度或增量代码是最快的，也适合图像。还有snappy算法。最近我尝试使用 exdupe 实用程序来压缩我的虚拟机。这东西也快得不可思议：[http](http://www.exdupe.com) ://www.exdupe.com 。exdupe 似乎使用了 rzip 东西：[http](http://encode.ru/threads/1354-Data-deduplication) ://encode.ru/threads/1354-Data-deduplication 。

# php - Wordpress：SCREAM：忽略错误抑制，解析错误：语法错误，

> ID：12765552
> 
> 赞同：0
> 
> 时间：2012-10-07T02:10:50.143
> 
> 标签：php, html, wordpress, content-management-system

好的，所以我正在为自己创建一个主题，即使我使用最基本的循环，我仍然会收到一个 php 错误：

```
( ! ) SCREAM: Error suppression ignored for
( ! ) Parse error: syntax error, unexpected end of file in C:\wamp\www\newsite\blog\wp-content\themes\cakes\index.php on line 121
Call Stack
#   Time    Memory  Function    Location
1   0.0015  142656  {main}( )   ..\index.php:0
2   0.0023  144760  require( 'C:\wamp\www\newsite\blog\wp-blog-header.php' )    ..\index.php:19
3   0.3452  9323760 require_once( 'C:\wamp\www\newsite\blog\wp-includes\template-loader.php' )  ..\wp-blog-header.php:16 
```

211 主题或我使用的任何其他主题都不会发生这种情况，所以我知道这不是 wordpress 设置的问题。我只是不知道它是什么，我需要在我的主题文件中引用任何东西吗？

这是我的 index.php 的 pastebin：http: [//pastebin.com/ahaFhy43](http://pastebin.com/ahaFhy43)，这是我主题文件夹中除了 style.css 之外的唯一文件。

编辑：已解决，只需将其添加到我的模板顶部：

```
<?php 
/* Short and sweet */
define('WP_USE_THEMES', false);
require('./wp-blog-header.php');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:01:04.833

已解决，只需添加

```
<?php 
/* Short and sweet */
define('WP_USE_THEMES', false);
require('./wp-blog-header.php');
?> 
```

到 index.php 的顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T09:20:20.987

有时，当您没有清除网站的缓存时会发生这种情况。定义（'WP_USE_THEMES'，假）；执行 wordpress 升级后 index.php 中的内容将丢失

# ms-access - 根据总销售额分配排名

> ID：12765553
> 
> 赞同：0
> 
> 时间：2012-10-07T02:11:02.607
> 
> 标签：ms-access, ms-access-2007

我需要创建一个名为“rank”的字段，它根据总销售额对每个零件 ID 进行排名，方法是根据总销售额分配一个序列号，总销售额越高，排名值越低。例如，销量最高的部件 ID 的排名值为“1”，销量次之的部件 ID 的排名值为“2”，销量最低的部件 ID 排名最高数字。

如果 2 个不同的零件 ID 具有相同的总销售额，那么它们共享相同的排名就可以了。请提供我要复制和粘贴的 SQL

非常感谢你，纳撒尼尔

```
SELECT qry_rank_01.[total sales amount], qry_rank_01.PART_ID 
```

FROM qry_rank_01；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:33:03.480

如果重复值具有顺序编号的等级是可以的，那么下面的函数应该可以工作

```
SELECT tbl_rank_01.PART_ID, CInt(DCount("total_sales_amt","tbl_rank_01","total_sales_amt >= " & [total_sales_amt])) AS rank, tbl_rank_01.total_sales_amt AS ttl_sls_amt365
FROM tbl_rank_01
WHERE (((tbl_rank_01.total_sales_amt)>0))
ORDER BY CInt(DCount("total_sales_amt","tbl_rank_01","total_sales_amt >= " & [total_sales_amt])), tbl_rank_01.total_sales_amt; 
```

# python - Python 2.7 中的类 - 不知道出了什么问题

> ID：12765556
> 
> 赞同：0
> 
> 时间：2012-10-07T02:12:12.397
> 
> 标签：python, class, methods

只是一个简单的程序来存款和从账户中取款。我正在尝试通过测试来学习课程。

```
class bank:
    def __init__(self):
        self.origBal = 0
    def deposit(self, amount):
        self.origBal += amount
    def withdraw(self, amount):
        self.origBal -= amount
b = bank()
d = bank()
w = bank() 
```

我遇到的那个问题可能最好从输出中看出。

例如，这里是输出。

```
w.withdraw(3423)
b.origBal
-3423
d.deposit(3423)
b.origBal
-3423
d.deposit(322423)
d.origBal
325846
d.deposit(3223)
d.origBal
329069
w.withdraw(324334)
b.origBal
-3423
w.withdraw(234)
b.origBal
-3423 
```

不完全确定发生了什么。

我确信我可以通过手动输入 (-n) 或 (+n) 来修复它，并且只有一种方法，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:22:45.193

When you do `b = bank()` you create one bank. When you do `d = bank()` you create a second bank. When you do `w = bank()` you create a third bank. Each bank has its own `origBal`. Calling `deposit` or `withdraw` on one of the three objects won't affect either of the other two objects. If you do

```
b = bank()
b.deposit(10)
b.withdraw(100) 
```

. . . then things should work as you seem to expect.

You should read [the Python tutorial](http://docs.python.org/tutorial/) to learn how classes work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:27:09.907

要执行您想要的操作，您需要使用类变量而不是对象变量。这些由整个类定义和使用，如下所示。

```
class Bank(object):
    origBal = 0
    def deposit(self, amount):
        Bank.origBal += amount
    def withdraw(self, amount):
        Bank.origBal -= amount

b = Bank()
d = Bank()
w = Bank()

w.withdraw(3423)
b.origBal
-3423
d.deposit(3423)
b.origBal
0
d.deposit(322423)
b.origBal
322423
d.deposit(3223)
b.origBal
325646
w.withdraw(324334)
b.origBal
1312
w.withdraw(234)
b.origBal
1078 
```

# python - 两个字符串列表的交集

> ID：12765558
> 
> 赞同：2
> 
> 时间：2012-10-07T02:12:24.343
> 
> 标签：python, string, algorithm, data-structures, set

我有一个面试问题大致如下：

> 给定两个无序客户列表，返回两个列表的交集。也就是说，返回出现在两个列表中的客户列表。

我建立的一些东西：

*   假设每个客户都有一个唯一的名字
*   如果两个列表中的名称相同，则为同一客户
*   姓名的格式为名字姓氏
*   没有 II、Jr、怪异角色等的诡计。

我认为关键是要找到一种有效的算法/数据结构的使用来尽可能有效地做到这一点。

我的进度是这样的：

*   将一个列表读入内存，然后一次读取另一个列表一项，看看是否有匹配项
*   按字母顺序排列两个列表，然后从一个列表的顶部开始，查看每个项目是否出现在另一个列表中
*   将两个列表放入有序列表，然后使用较短的列表逐项检查（这样，一个列表有 2 个项目，您只检查这 2 个项目）
*   将一个列表放入哈希中，并检查另一个列表中是否存在键

面试官一直在问，“下一步是什么？”，所以我想我错过了其他东西。

任何其他技巧可以有效地做到这一点？

旁注，这个问题是在 python 中的，我刚刚读过 about `sets`，它似乎尽可能有效地做到这一点。知道数据结构/算法`sets`是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T02:23:12.797

It really doesnt matter how its implemented ... but I believe it is implemented in C so it is faster and better `set([1,2,3,4,5,6]).intersection([1,2,5,9])` is likely what they wanted

In python readability counts for alot! and set operations in python are used extensively and well vetted...

that said another pythonic way of doing it would be

```
list_new = [itm for itm in listA if itm in listB] 
```

or

```
list_new = filter(lambda itm:itm in listB,listA) 
```

basically I believe they were testing if you were familliar with python, not if you could implement the algorithm. since they asked a question that is so well suited to python

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:19:21.883

1.  将一个列表放[入布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)并使用它来过滤第二个列表。
2.  将过滤后的第二个列表放入布隆过滤器并使用它来过滤第一个列表。
3.  对两个列表进行排序，并通过上述方法之一找到交集。

这种方法的好处（除了让你在面试中正确使用半模糊的数据结构）是它不需要任何 O(n) 存储，直到你（很有可能）减少了问题的大小。

* * *

> 面试官一直在问，“下一步是什么？”，所以我想我错过了其他东西。

也许他们会一直问，直到你没有答案。

* * *

[http://code.google.com/p/python-bloom-filter/](http://code.google.com/p/python-bloom-filter/)是布隆过滤器的python 实现。

# ios - iOS NSURLRequests 无法识别 Rails 应用程序会话

> ID：12765559
> 
> 赞同：0
> 
> 时间：2012-10-07T02:12:43.727
> 
> 标签：ios, ruby-on-rails, ruby, nsurlconnection, nsurlrequest

我有一个带有单个控制器的简单 Rails 应用程序。我的控制器的某些方法有一个“过滤前”，我通过查看会话对象来检查用户是否已登录：

```
@user = User.where(:id => session[:user_id]) if session[:user_id] 
```

在我的控制器的“登录”方法中，我这样做：

```
session[:user_id] = user.id 
```

很平常的东西。如果我从网络浏览器 (Chrome) 访问我的应用程序，一切正常。但是，当我使用 iOS 应用程序中的 NSURLRequest 访问我的 rails 应用程序时，服务器总是为每个请求创建一个新会话。它似乎永远无法识别现有会话，即使请求正在发送带有正确会话 ID 的 cookie。事实上，如果我查看我的 rails 应用程序中的“cookies”对象，我可以看到它包含会话 ID。但是，会话对象始终为空！不知道为什么服务器无法检索会话。我正在使用Passenger Phusion。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:20:55.537

如果您正在`POST`登录您的登录页面，并且帖子不包含与会话中的令牌匹配的 CSRF 令牌，那么 Rails 将失败请求并使会话无效/重置作为安全预防措施。

要修复它，只需从会话中读取 CSRF 令牌并将其包含在您的请求中，或者关闭 CSRF 令牌检查，您可以将其放置`skip_before_filter :verify_authenticity_token`在控制器中以跳过 CSRF 保护检查。请注意，后一种方法确实会打开潜在的安全漏洞，因此如果它完全可行，建议包括令牌并检查它们。

# r - 有什么方法可以添加到 R 中的列名？

> ID：12765560
> 
> 赞同：2
> 
> 时间：2012-10-07T02:13:09.467
> 
> 标签：r

我是 R 新手，需要一些帮助。基本上，我在数据框中有微阵列数据，并想附加到列名。列命名为：A、B、C 等。

> [用户] > 名称（first.df）
> 
> [1] “A” “B” “C” “D”

另一个数据框将每个因素（A、B、C 等）标识为“好”或“坏”

> [用户] > second.df
> 
> [1] 一个好的
> 
> 坏
> 
> C 不好
> 
> D 好

有没有办法将“好”/“坏”添加到第一个数据框的列标题？

> [用户] > 名称（first.df）
> 
> [1] “A-好” “B-坏” “C-坏” “D-好”

我尝试将名称隔离到他们自己的数据框（例如 names(first.df) <- c(names(first.df), second.df[,2]) 并没有运气合并。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:18:46.540

有几种方法可以做到这一点。这是一个快速的方法：

```
 paste(names(first.df), second.df, sep="-") 
```

# android - 如何获取在 TrafficStats 中发送和接收的正确字节数？

> ID：12765562
> 
> 赞同：12
> 
> 时间：2012-10-07T02:13:12.997
> 
> 标签：android, traffic, network-traffic, traffic-measurement

我的应用程序正在尝试计算通过 WiFi/LAN 和移动数据连接发送和接收的字节数。为此，我`TrafficStats`在某个时间点获取计数器的值，并在下次检查时从其值中减去该值。

```
// get current values of counters
long currentMobileTxBytes = TrafficStats.getMobileTxBytes();
long currentMobileRxBytes = TrafficStats.getMobileRxBytes();
long totalTxBytes = TrafficStats.getTotalTxBytes();
long totalRxBytes = TrafficStats.getTotalRxBytes();

// to get mobile data count, subtract old from current
long currentMobileSent = currentMobileTxBytes - oldMobileTxBytes;
long currentMobileReceived = currentMobileRxBytes - oldMobileRxBytes;

// to get WiFi/LAN data count, subtract total from mobile
long currentNetworkSent = totalTxBytes - currentMobileTxBytes;
long currentNetworkReceived = totalRxBytes - currentMobileRxBytes; 
```

我觉得上述算法是合理的，但是，我不确定如何检查这些计数器的准确性。例如，当我尝试通过 WiFi 将 2.7MB 的文件上传到 Dropbox 时，`currentMobileSent`我得到的值约为 10MB。即使在下一次检查之前没有上网，我得到的非零值表明我在等待期间确实收到了一些字节的数据。

有没有办法让我检查`TrafficStats`这些数字是如何得出的？我知道除了我的浏览器之外，可能还有其他应用程序在后台运行连接到互联网，但是 2.7MB 到 10MB 似乎是一个巨大的跳跃——我什至没有做任何事情就“收到”了一次 90MB。还是我计算发送和接收字节的方式有问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T04:15:24.880

来自[技术共和国](http://www.techrepublic.com/blog/software-engineer/create-a-network-monitor-using-androids-trafficstats-class/)：

1.  在 Eclipse 中创建一个新的 Android 项目。请记住使用 TrafficStats 类，您必须针对 Android 2.2 (Froyo) 或更高版本的 API。

2.  在该`/res/layout`文件夹中，我们将创建一个 activity_main.xml 资源。对于这个项目，我们只是在垂直堆叠的线性布局中使用一系列文本视图。

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical">

   <TextView
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:gravity="center"
       android:paddingBottom="20dip"
       android:text="Traffic Stats Demo"
       android:textSize="16sp"
       android:textStyle="bold" />

   <TextView
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:gravity="center"
       android:text="Transmit Bytes"
       android:textColor="#00ff00"
       android:textSize="14sp" />

   <TextView
       android:id="@+id/TX"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:gravity="center"
       android:text="0"
       android:textSize="14sp" />

   <TextView
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:gravity="center"
       android:text="Receive Bytes"
       android:textColor="#ff0000"
       android:textSize="14sp" />

   <TextView
       android:id="@+id/RX"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:gravity="center"
       android:text="0"
       android:textSize="14sp" />
</LinearLayout> 
```

布局到位后，我们可以转到 /src 文件夹。通过扩展 Activity/AppCompatActivity 类创建 MainActivity.java。让我们继续声明三个私有类变量。

**MainActivity.java**

```
package com.authorwjf;

import android.app.Activity;
import android.app.AlertDialog;
import android.net.TrafficStats;
import android.os.Bundle;
import android.os.Handler;
import android.widget.TextView;

public class Main extends Activity {
    private Handler mHandler = new Handler();
    private long mStartRX = 0;
    private long mStartTX = 0;
} 
```

我们将使用 on create override 来初始化我们的私有变量，并在 UI 线程上安排回调。记下对枚举 TrafficStats.UNSUPPORTED 的检查。虽然我对 TrafficStats 类的体验一帆风顺，但 Google 官方文档指出，某些设备可能不支持这种类型的报告，在这种情况下，调用会返回上述值。出于这个原因，防御性地编写代码是一个好主意，正如我在这里演示的那样。

**MainActivity.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mStartRX = TrafficStats.getTotalRxBytes();
    mStartTX = TrafficStats.getTotalTxBytes();

    if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED) {
        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Uh Oh!");
        alert.setMessage("Your device does not support traffic stat monitoring.");
        alert.show();
    } else {
        mHandler.postDelayed(mRunnable, 1000);
    }
} 
```

最后但并非最不重要的一点是，我们需要更新我们的显示并重新安排可运行文件。

**MainActivity.java**

```
private final Runnable mRunnable = new Runnable() {
    public void run() {
        TextView RX = (TextView) findViewById(R.id.RX);
        TextView TX = (TextView) findViewById(R.id.TX);
        long rxBytes = TrafficStats.getTotalRxBytes() - mStartRX;
        RX.setText(Long.toString(rxBytes));
        long txBytes = TrafficStats.getTotalTxBytes() - mStartTX;
        TX.setText(Long.toString(txBytes));
        mHandler.postDelayed(mRunnable, 1000);
    }
}; 
```

# matlab - 对矩阵的行而不是列求和

> ID：12765563
> 
> 赞同：0
> 
> 时间：2012-10-07T02:13:34.337
> 
> 标签：matlab

我有一个 21x19 矩阵`B`

矩阵的每个索引都是 1,0 或 -1。我想计算每一行和每一列的出现次数。执行列计数很容易：

```
Colcount = sum( B == -1 );
Colcount = sum( B == 0  );
Colcount = sum( B == 1  ); 
```

然而，访问另一个维度来获得行数被证明是困难的。可以在一个语句中访问它会很棒。然后我需要使用 fprintf 语句将结果打印到屏幕上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T02:39:56.763

默认情况下`sum`对矩阵的列进行操作。您可以通过为 sum 指定第二个参数来更改此设置。例如：

```
A = [ 1 1 1; 0 1 0]; 
C = sum(A,2);
C -> [3; 1]; 
```

此外，您可以`transpose`使用矩阵并获得相同的结果：

```
A = [ 1 1 1; 0 1 0]; 
C = sum(A');  % Transpose A, ie convert rows to columns and columns to rows
C -> [3 1];  % note that the result is transposed as well 
```

然后调用`fprintf`很容易，为它提供一个向量，它将为该向量的每个索引生成一个字符串。

```
fprintf('The count is %d\n', C) 
```

> 计数为 3
> 
> 计数为 1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T02:39:53.830

[SUM](http://www.mathworks.com/help/matlab/ref/sum.html;jsessionid=9125cd24d6ebd96620a8cf28c3b1)的第二个输入参数指示[您想要求和的方向](https://stackoverflow.com/questions/2651267/why-is-sumx-1-the-sum-of-the-columns-in-matlab)。

例如，如果要分别计算`1`沿行和列出现的次数，并使用 打印结果`fprintf`，可以编写：

```
rowCount = sum(B==1,2);
colCount = sum(B==1,1); %# 1 is the default
fprintf('The rowCount of ones is\n%s\nThe colCount of ones is\n%s\n',...
   num2str(rowCount'),num2str(colCount)) 
```

请注意，我使用它`num2str`以便您可以轻松地打印矢量。

# random - 为测试生成强烈偏向的随机数

> ID：12765564
> 
> 赞同：2
> 
> 时间：2012-10-07T02:13:38.150
> 
> 标签：random, lua, automated-tests, distribution

我想用随机输入运行测试，并且需要生成“合理的”随机数，即匹配得足以通过测试函数的先决条件的数字，但希望在其代码内部造成更严重的破坏。

`math.random()`（我正在使用 Lua）产生均匀分布的随机数。将这些按比例放大将产生比小数字更多的大数字，并且整数将非常少。

我想以一种强烈支持“简单”数字的方式倾斜随机数（或使用旧函数作为随机源生成新的），但仍将覆盖整个范围，即扩展到正/负无穷大（或`±1e309`为`double`）。这表示：

*   最多十个数字应该是最常见的，
*   整数应该比分数更常见，
*   以 0.5 结尾的数字应该是最常见的分数，
*   其次是 0.25 和 0.75；然后是 0.125，
*   等等。

不同的描述：固定一个基本概率*x*使得概率总和为 1，并将数字*n*的概率定义为*x ^k* 其中*k*是其中*n*被构造为超现实数^(**1**)的世代。这将*x*分配给 0，*x ²*分配给 -1 和 +1， *x ³*分配给 -2，-1/2，+1/2 和 +2，依此类推。这很好地描述了接近我想要的东西（它有点倾斜），但几乎无法用于计算随机数。结果分布在任何地方都不是连续的（它是分形的！），我不确定如何确定基本概率`x`（我认为对于无限精度，它将为零），并且基于此通过迭代计算数字非常慢（花费近乎无限的时间来构造大数字）。

有谁知道一个简单的近似值，给定一个均匀分布的随机源，会产生如上所述非常粗略分布的随机数？

我想进行数千次随机测试，数量/速度比质量更重要。尽管如此，更好的数字意味着更少的输入被拒绝。

Lua 有 JIT，所以性能通常不是什么大问题。然而，基于随机性的跳跃会破坏每一个预测，而且许多调用`math.random()` 也会很慢。这意味着封闭公式将比迭代或递归公式更好。

* * *

¹维基百科有[一篇关于超现实数字](https://en.wikipedia.org/wiki/Surreal_number)的文章，[图片很好](https://en.wikipedia.org/w/index.php?title=File:Surreal_number_tree.svg)。一个超现实数是一对两个超现实数，即`x := {n|m}`，它的值是这对中间的数，即（对于有限数）`{n|m} = (n+m)/2`（作为有理数）。如果该对的一侧为空，则将其解释为递增（或递减，如果右侧为空）。如果两边都是空的，那就是零。最初，没有数字，所以唯一可以建立的数字是`0 := { | }`. 在第二代中，我们可以构建数字`{0| } =: 1`，而在第三代中，`{ |0} =: -1`我们得到 `{1| } =: 2`、和（加上一些更复杂的已知数字表示，例如）。请注意，例如`{|1} =: -2``{0|1} =: 1/2``{-1|0} =: -1/2``{-1|1} ? 0``1/3`永远不会由有限数生成，因为它是一个无限小数——浮点数`1/3`也是如此，永远不会精确表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:03:30.600

这个算法怎么样？

1.  使用库函数在 (0, 1) 中生成随机浮点数
2.  根据所需的概率密度函数生成一个随机整数舍入点（例如，0 概率为 0.5，1 概率为 0.25，2 概率为 0.125，...）。
3.  通过该舍入点“舍入”浮点数（例如`floor((float_val << roundoff)+0.5)`）
4.  根据另一个 PDF 生成一个随机积分指数（例如 0、1、2、3，每个概率为 0.1，然后递减）
5.  将舍入浮点数乘以 2 ^(exponent)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:27:48.090

对于类似超现实的十进制扩展，您需要一个随机二进制数。 *偶数*位告诉您是停止还是继续，*奇数*位告诉您在树上是向右还是向左：

```
> 0... => 0.0 [50%] Stop
> 100... => -0.5 [<12.5%] Go, Left, Stop
> 110... => 0.5 [<12.5%] Go, Right, Stop
> 11100... => 0.25 [<3.125%] Go, Right, Go, Left, Stop
> 11110... => 0.75 [<3.125%] Go, Right, Go, Right, Stop
> 1110100... => 0.125
> 1110110... => 0.375
> 1111100... => 0.625
> 1111110... => 0.875 
```

快速生成随机二进制数的一种方法是查看 math.random() 中的十进制数字，并将 0-4 替换为 '1' ，将 5-9 替换为 '1'：

*   0.8430419054348022 变成 1000001010001011 变成`-0.5`

*   0.5513009827118367 变成 1100001101001011 变成`0.25` 等

没有做过太多的lua编程，但是在Javascript中你可以这样做：

```
Math.random().toString().substring(2).split("").map(
    function(digit) { return digit >= "5" ? 1 : 0 }
); 
```

或真正的二进制扩展：

```
Math.random().toString(2).substring(2) 
```

不确定哪个更真正“随机”——您需要对其进行测试。

您*可以*通过这种方式生成超现实数字，但大多数结果将是 a/2^b 形式的小数，整数相对较少。在第 3 天，仅产生 2 个整数（-3 和 3）与 6 个小数，第 4 天为 2 与 14，第 n 天为 2 与 (2^n-2)。

如果你从 中添加两个均匀随机数`math.random()`，你会得到一个新的分布，它具有类似“三角形”的分布（从中心线性递减）。添加 3 或更多将获得更多的“钟形曲线”，例如以 0 为中心的分布：

```
math.random() + math.random() + math.random()  - 1.5 
```

除以随机数将得到一个真正的百搭数：

```
A/(math.random()+1e-300) 
```

这将返回 A 和（*理论上*）A*1e+300 之间的结果，尽管我的测试表明 50% 的时间结果在 A 和 2*A 之间，大约 75% 的时间在 A 和 4*A 之间。

将它们放在一起，我们得到：

```
round(6*(math.random()+math.random()+math.random() - 1.5)/(math.random()+1e-300)) 
```

这有超过 70% 的数字在 -9 和 9 之间返回，很少出现一些大数字。

请注意，此分布的平均值和总和将趋向于向较大的负数或正数发散，因为您运行它的次数越多，分母中的小数就越有可能导致数字“爆炸”到一个很大的数字，例如 147,967 或 -194,137。

有关示例代码，请参阅[要点](https://gist.github.com/3957208)。

[乔什](http://about.me/joshuaweinstein)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T07:42:10.177

您可以立即计算出第 n 个出生的超现实数。

例如，第 1000 个超现实数是：

1.  转换为二进制：

    1000 dec = 1111101000 仓

2.  1 成为加号和 0 的减号：

    1111101000

    +++++-+---

3.  第一个“1”位是 0 值，下一组相似的数字是 +1（对于 1）或 -1（对于 0），然后每个值是 1/2、1/4、1/8 等后续位。

    1 1 1 1 1 0 1 0 0 0

    + + + + + - + - - -

    0 1 1 1 1 哈哈哈哈哈

    +0+1+1+1+1-1/2+1/4-1/8-1/16-1/32

    = 3+17/32

    = 113/32

    = 3.53125

此表示形式的二进制长度等于该数字的诞生日期。

超现实数的左右数是二进制表示，其尾部分别剥离回最后的 0 或 1。

超现实数字在 -1 和 1 之间均匀分布，其中一半的特定日期创建的数字将存在。1/4 的数字均匀分布在 -2 到 -1 和 1 到 2 之间，依此类推。最大范围将为与您提供的天数匹配的负整数到正整数。这些数字慢慢地趋于无穷大，因为每天只会在负数和正数范围内增加一个，而日期包含的数字是最后一天的两倍。

编辑：

这种位表示的一个好名字是“sinary”

负数是转置。前任：

```
100010101001101s -> negative number (always start 10...)

111101010110010s -> positive number (always start 01...) 
```

我们注意到所有位翻转都接受第一个转置位。

Nan => 0s（因为所有其他数字都以 1 开头），这使得它非常适合在计算机中的位寄存器中表示，因为需要前导零（我们不再制作三进制计算机......太糟糕了）

所有康威超现实代数都可以在这些数字上完成，而无需转换为二进制或十进制。

sinary 格式可以看作是一个简单的计数器加上一个 2 的补码十进制表示。

这是关于finary的不完整报告（类似于sinary）：[https ://github.com/peawormsworth/tools/blob/master/finary/Fine%20binary.ipynb](https://github.com/peawormsworth/tools/blob/master/finary/Fine%20binary.ipynb)

# python - 从参数列表创建列表

> ID：12765566
> 
> 赞同：-2
> 
> 时间：2012-10-07T02:14:34.670
> 
> 标签：python, list, python-2.7, arguments

有没有办法将参数列表转换为列表？

像：

```
list(*arguments) 
```

不起作用，因为 list() 最多接受 1 个参数...

我试图将元组的元组转换为列表

```
list(('a', *('b', 5)) 
```

根本没用……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:39:09.457

对于元组的元组，例如，

```
a = ((1, 2), (3, 4), (5, 6)) 
```

将其放入列表取决于您期望的列表 - 您可以将元组直接传递到`list`（它需要任何可迭代的）以获得元组列表：

```
>>> list(a)
[(1, 2), (3, 4), (5, 6)] 
```

相反，如果您想要一个扁平列表，您想要[`itertools.chain`](http://docs.python.org/library/itertools.html#itertools.chain)- 它为您提供了一个生成器，但您可以将其传递*给*获取`list`列表：

```
>>> import itertools
>>> list(itertools.chain.from_iterable(a))
[1, 2, 3, 4, 5, 6] 
```

如果你想要一个列表列表，你需要一个列表理解：

```
>>> [list(b) for b in a]
[[1, 2], [3, 4], [5, 6]] 
```

为了展平一个由元组和单个值组成的异构元组，它会变得有点复杂——你要做的就是把所有的单个值变成单长度的元组或列表，然后和`chain`上面的例子一样。如果你只想展平元组，而不是，例如，嵌套列表，你可以这样做：

```
>>> a = ('a', ('b', 'c'))
>>> list(itertools.chain.from_iterable(b if isinstance(b, tuple) else [b] for b in a))
['a', 'b', 'c'] 
```

# php - 为什么我的 PHP mail() 函数不能用正确的换行符发送它？

> ID：12765569
> 
> 赞同：0
> 
> 时间：2012-10-07T02:16:03.803
> 
> 标签：php

代码如下。我希望它分隔 [From: xxxxxx] 部分，以便正文/消息的其余部分出现在不同的行上。

```
<?php

    $name = $_POST["name"];
    $email = $_POST["email"];
    $message = $_POST["message"];

    $recipient = "me@christianselig.com";
    $subject = "Message From Website";
    $body = "[From: " . $name . "]\n\n" . $message;
    $headers = "From: " . $email . "\r\n";
    $headers .= "Content-type: text/html; charset=UTF-8" . "\r\n";

    $success = mail($recipient, $subject, $body, $headers);

    echo $success;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:19:22.233

您应该使用 HTML 标签`<br />`而不是 `\n`

像这样：

```
$body = "[From: " . $name . "]<br /><br />" . $message; 
```

以及使用该`mail()`功能的建议：

```
if( mail($recipient, $subject, $body, $headers) )
    echo 'Success';
else
    echo 'Fail'; 
```

**编辑 1**

当您尝试以纯文本形式发送时，您应该使用`\r\n`，这是纯文本中换行的转义序列。例子：

```
$formcontent="[From: " . $name . "]\r\n\r\n" . $message; 
```

# c++ - 使用 Zip Utils 压缩增量文件名

> ID：12765572
> 
> 赞同：0
> 
> 时间：2012-10-07T02:16:57.150
> 
> 标签：c++, dynamic, zip, filenames

您好，我一直在使用来自 [http://www.codeproject.com/Articles/7530/Zip-Utils-clean-elegant-simple-C-Win32的“Zip Utils”](http://www.codeproject.com/Articles/7530/Zip-Utils-clean-elegant-simple-C-Win32)

压缩文件和文件夹。简单的事情是如果知道文件名我只需要做这样的事情

```
HZIP hz; DWORD writ;
hz = CreateZip(_T("filename\\image1.zip"),0); 
```

问题是我在尝试通过在循环中增加文件名来压缩文件时出错

```
 int i= 0;
for(i=0; i<record; i++)
{
     ZipAdd(hz,_T("doc"+i+1+".kml"), _T("filename\\doc"+i+1+".kml"));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:35:19.377

这不是编写代码的最有效方式，但它说明了这个概念。使用 to_string( ... ) 将数字转换为字符串以进行连接。它需要一个很长的参数，而不是一个 int。

```
long long i;
string filepath1, filepath2;
for(i=0; i<record; i++)
{
   filepath1 = "doc" + to_string(i + 1) + ".klm";
   filepath2 = "GenFiles\\doc" + to_string(i + 1) + ".klm";
   ZipAdd(hz,filepath1,filepath2);
} 
```

# verilog - Verilog中的加法器

> ID：12765579
> 
> 赞同：1
> 
> 时间：2012-10-07T02:19:20.877
> 
> 标签：verilog

我正在用 Verilog 设计一个加法器。它将有两个大小为 N 的输入和两个输出。第一个输出的大小为 2N，第二个输出的大小为 K。

这是我到目前为止所拥有的：

```
module adder(
  out,
  CCR,
  inA,
  inB
);
parameter N=8,CCR_size=8;
parameter M=2*N;
input  [N-1:0]        inA,inB;
output [M-1:0]        out;
output [CCR_size-1:0] CCR;
reg    [N:0]          temp;
always @(inA or inB)
  begin
    temp      = inA+inB;
    CCR[0]    = temp[N];
    out[N-1:0]= temp[N-1:0];
    out[M-1:N]= 'b0;
  end
endmodule 
```

*从评论中移出：* 但是这没有编译。我有错误

```
CCR[0],out[N-1:0] and out[M-1:N]

# Error: VCP2858 adder.v : (16, 20): CCR[0] is not a valid left-hand side of a procedural assignment.
# Error: VCP2858 adder.v : (17, 28): out[N-1:0] is not a valid left-hand side of a procedural assignment.
# Error: VCP2858 adder.v : (18, 20): out[M-1:N] is not a valid left-hand side of a procedural assignment. 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T14:06:26.250

寄存器数据类型用作程序块中的变量。当信号位于程序赋值的左侧时，必须使用寄存器数据类型。由于端口的默认类型是`wire`您收到错误消息。将输出端口更改为类型`reg`应该可以解决问题。

```
output reg[M-1:0] out;
output reg[CCR_size-1:0] CCR; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:28:09.597

包括来自@damage 的答案，将输出声明为 reg 类型，您还将 CCR 定义为 8 位宽，然后仅分配 LSB。

加法器的位增长比最大输入高 1 位。

我将实施为：

```
module adder(
  parameter N       =8,
  parameter CCR_size=8
)(
  input      [N-1:0]        inA,
  input      [N-1:0]        inB,
  output     [2*N-1:0]      out,
  output reg [CCR_size-1:0] CCR,
);
reg [n:0] sum;

always @* begin
  {CCR, sum}      = inA + inB;
end

assign out = sum; //Will Zero pad

endmodule 
```

# c++ - 仅在释放模式下的堆损坏

> ID：12765586
> 
> 赞同：0
> 
> 时间：2012-10-07T02:21:22.897
> 
> 标签：c++, visual-c++

这是一个打印线程，打印我当前正在运行的程序的统计信息

```
void StatThread::PrintStat(){
clock_t now = 0;
UINT64 oneMega = 1<<20;
const char* CUnique = 0;;
const char* CInserted = 0;;
while((BytesInserted<=fileSize.QuadPart)&&flag){
    Sleep(1000);
    now = clock();
    CUnique = FormatNumber(nUnique);
    CInserted = FormatNumber(nInserted);
    printf("[ %.2f%%] %u / %u dup %.2f%% @ %.2fM/s %.2fMB/s %3.2f%% %uMB\n",
        (double)BytesInserted*100/(fileSize.QuadPart),
        nUnique,nInserted,(nInserted-nUnique)*100/(double)nInserted,
        ((double)nInserted/1000000)/((now - start)/(double)CLOCKS_PER_SEC),
        ((double)BytesInserted/oneMega)/((now - start)/(double)CLOCKS_PER_SEC),
        cpu.GetCpuUtilization(NULL),cpu.GetProcessRAMUsage (true));
    if(BytesInserted==fileSize.QuadPart)
        flag=false;
}
delete[] CUnique;    //would have worked with memory leak if commented out
delete[] CInserted;  // crash at here! heap corruption 
} 
```

这是返回指向 char 数组的指针的 FormatNumber

```
const char* StatThread::FormatNumber(const UINT64& number) const{
char* result = new char[100];
result[0]='\0';
_i64toa_s(number,result,100,10);
DWORD nDigits = ceil(log10((double)number));
result[nDigits] = '\0';
if(nDigits>3){
    DWORD nComma=0;
    if(nDigits%3==0)
        nComma = (nDigits/3) -1;
    else
        nComma = nDigits/3;
    char* newResult = new char[nComma+nDigits+1];
    newResult[nComma+nDigits]='\0';
    for(DWORD i=1;i<=nComma+1;i++){
        memcpy(newResult+strlen(newResult)-i*3-(i-1),result+strlen(result)-i*3,3);
        if(i!=nComma+1){
            *(newResult+strlen(newResult)-4*i) = ',';   
        }
    }
    delete[] result; 
    return newResult;
}
return result;
} 
```

真正奇怪的是，由于堆损坏，它仅在发布模式下崩溃，但在调试模式下运行平稳。我已经到处检查了，没有发现明显的内存泄漏，甚至Memory Leak Detector也是这么说的。

```
Visual Leak Detector Version 2.2.3 installed.
The thread 0x958 has exited with code 0 (0x0).
No memory leaks detected.
Visual Leak Detector is now exiting.
The program '[5232] Caching.exe' has exited with code 0 (0x0). 
```

但是，当在发布模式下运行时，它抛出了一个错误，说我的程序停止工作并且我点击了调试，它指向了导致堆损坏的行。

```
The thread 0xe4c has exited with code 0 (0x0).
Unhandled exception at 0x00000000770E6AE2 (ntdll.dll) in Caching.exe:          0xC0000374: A heap has been corrupted (parameters: 0x000000007715D430). 
```

如果我注释掉这一行，它可以正常工作，但 Memory Leak Detector 会抱怨内存泄漏！我不明白在没有内存泄漏的情况下如何导致堆损坏（至少泄漏检测器是这么说的）。请帮助，提前谢谢。

编辑：堆损坏已修复，因为在最后一次迭代中，我仍然将 3 个字节复制到前面，而不是剩下的任何内容。谢谢大家的帮助！

```
const char* StatThread::FormatNumber(const UINT64& number) const{
char* result = new char[100];
result[0]='\0';
_ui64toa_s(number,result,100,10);
DWORD nDigits = (DWORD)ceil(log10((double)number));
if(number%10==0){
    nDigits++;
}
result[nDigits] = '\0';
if(nDigits>3){
    DWORD nComma=0;
    if(nDigits%3==0)
        nComma = (nDigits/3) -1;
    else
        nComma = nDigits/3;
    char* newResult = new char[nComma+nDigits+1];
    DWORD lenNewResult = nComma+nDigits;
    DWORD lenResult = nDigits;
    for(DWORD i=1;i<=nComma+1;i++){
        if(i!=nComma+1){
            memcpy(newResult+lenNewResult-4*i+1,result+lenResult-3*i,3);
            *(newResult+lenNewResult-4*i) = ',';    
        }
        else{
            memcpy(newResult,result,lenNewResult-4*(i-1));
        }
    }
    newResult[nComma+nDigits] = '\0';
    delete[] result; 
    return newResult;
}
return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T08:57:52.153

很抱歉直言不讳，但是“格式化”字符串的代码**太可怕**了。

首先，您传入一个无符号的 64 位 int 值，而是将其格式化为有符号值。如果您声称出售香蕉，则不应该给您的客户大蕉。

但更糟糕的是，您返回的内容（当您不崩溃时）甚至都不正确。如果用户传入 0，那么你什么也不返回。如果用户传入 1000000，则返回 100,000，如果用户传入 10000000，则返回 1,000,000。哦，好吧，朋友之间的某些数字的 10 倍是多少？;)

这些以及崩溃是您的代码执行的疯狂指针算法的症状。现在，对于错误：

首先，当您分配“newResult”时，您会使缓冲区处于非常奇怪的状态。第一个 nComma + nDigits 字节是随机值，后跟一个 NULL。然后在该缓冲区上调用 strlen。strlen 的结果可以是 0 到 nComma + nDigits 之间的任何数字，因为 nComma + nDigit 字符中的任何一个都可能包含空字节，这将导致 strlen 过早终止。换句话说，在那之后代码是不确定的。

旁注：如果您好奇它为什么在调试版本中起作用，那是因为编译器和运行时库的调试版本试图通过为您初始化内存来帮助您捕获错误。在 Visual C++ 中，填充掩码通常是 0xCC。这确保您的 strlen() 中的错误在调试版本中被掩盖。

修复这个错误非常简单：只需用空格初始化缓冲区，然后是 NULL。

```
char* newResult = new char[nComma+nDigits+1];
memset(newResult, ' ', nComma+nDigits);
newResult[nComma+nDigits]='\0'; 
```

但是还有一个错误。让我们尝试将数字 1152921504606846975 格式化为 1,152,921,504,606,846,975。让我们看看一些花哨的指针算术运算给我们带来了什么：

```
memcpy(newResult + 25 - 3 - 0, result + 19 - 3, 3)
*(newResult + 25 - 4) = ','
memcpy(newResult + 25 - 6 - 1, result + 19 - 6, 3)
*(newResult + 25 - 8) = ','
memcpy(newResult + 25 - 9 - 2, result + 19 - 9, 3)
*(newResult + 25 - 12) = ','
memcpy(newResult + 25 - 12 - 3, result + 19 - 12, 3)
*(newResult + 25 - 16) = ','
memcpy(newResult + 25 - 15 - 4, result + 19 - 15, 3)
*(newResult + 25 - 20) = ','
memcpy(newResult + 25 - 18 - 5, result + 19 - 18, 3)
*(newResult + 25 - 24) = ','
memcpy(newResult + 25 - 21 - 6, result + 19 - 21, 3) 
```

如您所见，您的最后一个操作在您分配的缓冲区开始*前2 个字节复制数据。*这是因为您假设您将始终复制 3 个字符。当然，情况并非总是如此。

坦率地说，我认为您的 FormatNumber 版本不应该是固定的。所有指针算术和计算都是等待发生的错误。这是我写的版本，你可以使用它。我认为它更理智，但你的里程可能会有所不同：

```
const char *StatThread::FormatNumber(UINT64 number) const
{
    // The longest 64-bit unsigned integer 0xFFFFFFFF is equal
    // to 18,446,744,073,709,551,615\. That's 26 characters
    // so our buffer will be big enough to hold two of those
    // although, technically, we only need 6 extra characters
    // at most.
    const int buflen = 64;

    char *result = new char[buflen];
    int cnt = -1, idx = buflen;

    do
    {
        cnt++;

        if((cnt != 0) && ((cnt % 3) == 0))
            result[--idx] = ',';

        result[--idx] = '0' + (number % 10);
        number = number / 10;
    } while(number != 0);

    cnt = 0;

    while(idx != buflen)
        result[cnt++] = result[idx++];

    result[cnt] = 0;

    return result;
} 
```

PS：“*关闭 10 倍*”的东西留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:42:28.817

在线上

```
DWORD nDigits = ceil(log10((double)number)); 
```

100 需要三个数字，但 log 100 = 2。这意味着您为`char* newResult = new char[nComma+nDigits+1];`. 这意味着您的堆单元的末尾被覆盖，这导致您看到的堆损坏。调试堆分配可能更宽容，这就是崩溃仅在调试模式下的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:40:20.397

堆损坏通常是由覆盖堆数据结构引起的。在没有良好边界检查的情况下，大量使用了“result”和“newResult”。当您进行调试构建时，整个对齐方式会发生变化，并且错误不会发生。

我将首先添加这样的检查：

```
DWORD nDigits = ceil(log10((double)number));
if(nDigits>=100){printf("error\n");exit(1);}
result[nDigits] = '\0'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T02:42:40.880

`StatThread::PrintStat`您的功能中有两件事。

如果循环体多次执行，这就是内存泄漏。您将重新分配这些指针，而无需调用`delete[]`以前的值。

```
while((BytesInserted<=fileSize.QuadPart)&&flag){
    ...
    CUnique = FormatNumber(nUnique);
    CInserted = FormatNumber(nInserted);
    ...
} 
```

这应该是分配`=`还是比较`==`？

```
if(BytesInserted=fileSize.QuadPart)
    flag=false; 
```

**编辑添加：**

在您的`StatThread::FormatNumber`函数中，此语句在块的末尾添加了一个空终止符，但前面的字符可能包含垃圾（`new`分配的内存不为零）。subsequest 调用`strlen()`可能会返回意外的长度。

```
newResult[nComma+nDigits]='\0'; 
```

# java - 除非我调整 JFrame 的大小，否则图像不会出现

> ID：12765588
> 
> 赞同：2
> 
> 时间：2012-10-07T02:21:52.057
> 
> 标签：java, image, swing, paintcomponent, drawimage

我一直在尝试使用 JPanel 在 JFrame 上显示图像，但只有在调整 JFrame 大小时才会显示图像

展示：

```
package display;

import javax.swing.JFrame;
import img.*;

public class Screen extends JFrame{

    private static final long serialVersionUID = 1L;

    Spaceship s = new Spaceship();
    public static void main(String[]args){
    new Screen();
    }

    public Screen(){
    setTitle("Spaceships!");
    setSize(700,605);
    setLocationRelativeTo(null);
    add(s);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);

    }
} 
```

飞船

```
package img;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;

import javax.swing.JPanel;

public class Spaceship extends JPanel{

    private static final long serialVersionUID = 1L;

    Image spaceship = (Image)Toolkit.getDefaultToolkit().getImage(getClass().getResource("res/spaceship.png"));

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(spaceship,100,100,null);
    }
} 
```

我知道发生了什么，所以我得到的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:42:02.270

`Toolkit.createImage()`异步加载图像。尝试指定图像观察者。`JPanel`实现`ImageObserver`所以可以使用以下行：

```
g.drawImage(spaceship, 100, 100, this); 
```

作为替代方案，您可以使用`ImageIO.read`which 同步加载图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:42:30.853

根据[JFrame 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，他们建议在设置可见之前执行 pack 或 setSize。改变 add 和 setSize 的顺序怎么样？

```
public Screen(){
    setTitle("Spaceships!");
    setLocationRelativeTo(null);
    add(s);
    setSize(700,605);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);

} 
```

# java - java数组列表迭代

> ID：12765598
> 
> 赞同：0
> 
> 时间：2012-10-07T02:24:06.380
> 
> 标签：java

这会导致不可预测的行为吗？

```
 ArrayList<X> x = new ArrayList<>();
 //x.add(new X())...
f:
for(int i = 0; i < x.size() -1;)
{
      X y = x.get(i);
      for(int j = i + 1; j < x.size();)
       {
          if(a) {
           x.remove(j);
           continue;
          }
          if(b) {
           x.remove(i);
           continue f;
          }
          j++;
        }
       i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:37:13.013

我不认为这将是不可预测的，但你的风格对我来说似乎是错误的，所以你的方法是可疑的。

使用标签是个坏主意，决定使用它表明你的方法有缺陷。

您可能想查看有关在 ArrayList 上删除的讨论，但基本上，LinkedList 将是 fsster：

[http://www.velocityreviews.com/forums/t587893-best-way-to-loop-through-arraylist-and-remove-elements-on-the-way.html](http://www.velocityreviews.com/forums/t587893-best-way-to-loop-through-arraylist-and-remove-elements-on-the-way.html)

但是，删除这种方式将起作用。

**更新：**

哎呀，刚刚看到几个错误：

```
 if(a) {
       x.remove(j);
       continue;
      } 
```

好的，在这一个中，您将返回 j 的循环，但您没有增加 j。

```
 if(b) {
       x.remove(i);
       continue f;
      } 
```

这对 i 来说也是一样的。

因此，您需要进行类似的更改来修复它：

```
for(int i = 0; i < x.size() -1; i++) 
```

这样，当您点击时，`continue`它仍然会转到下一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:27:27.540

最好创建一个`array`包含要删除的索引。`for`并用主循环中的索引填充它。比你可以做这样的事情：

```
Collections.sort(indexesToRemoveArr);
Collections.reverse(indexesToRemoveArr);
for (int indexToRemove : indexesToRemoveArr) {
     arr.remove((int) indexToRemove );
} 
```

在该代码中，我从头到尾删除索引。这就是为什么它不会有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:18:36.530

是的。编译器只会优化和调用 x.size() 一次。因此，一旦删除元素，您的终止条件就会变得不正确。

# c++ - 记忆递归 C++

> ID：12765606
> 
> 赞同：4
> 
> 时间：2012-10-07T02:25:40.870
> 
> 标签：c++, recursion, memoization, recursive-datastructures

我正在实现一个带有记忆的递归函数以加快速度。该程序的要点如下：

我洗一副牌（红牌和黑牌的数量相等），然后开始正面朝上处理它们。在任何一张牌之后，你可以说“停止”，此时我为每张红牌支付 1 美元，而你为每张黑牌支付 1 美元。你的最佳策略是什么，你愿意花多少钱来玩这个游戏？

我的递归函数如下：

```
double Game::Value_of_game(double number_of_red_cards, double number_of_black_cards)
{
    double value, key;

    if(number_of_red_cards == 0)
    {
    Card_values.insert(Card_values.begin(), pair<double, double> (Key_hash_table(number_of_red_cards, number_of_black_cards), number_of_black_cards));
    return number_of_black_cards;
    }
    else if(number_of_black_cards == 0)
    {
    Card_values.insert(Card_values.begin(), pair<double, double> (Key_hash_table(number_of_red_cards, number_of_black_cards), 0));
    return 0;
    }

    card_iter = Card_values.find(Key_hash_table(number_of_red_cards, number_of_black_cards));
    if(card_iter != Card_values.end())
    {
        cout << endl << "Debug: [" << number_of_red_cards << ", " << number_of_black_cards << "] and value = " << card_iter->second << endl;
    return card_iter->second; 
    }

    else 
    {
    number_of_total_cards = number_of_red_cards + number_of_black_cards;
        prob_red_card = number_of_red_cards/number_of_total_cards;
        prob_black_card = number_of_black_cards/number_of_total_cards;

    value = max(((prob_red_card*Value_of_game(number_of_red_cards - 1, number_of_black_cards)) + 
             (prob_black_card*Value_of_game(number_of_red_cards, number_of_black_cards - 1))), 
             (number_of_black_cards - number_of_red_cards));
    cout << "Check: value = " << value << endl;

    Card_values.insert(Card_values.begin(), pair<double, double> (Key_hash_table(number_of_red_cards, number_of_black_cards), value));

        card_iter = Card_values.find(Key_hash_table(number_of_red_cards , number_of_black_cards ));
        if(card_iter != Card_values.end());
        return card_iter->second;
     } 
}

double Game::Key_hash_table(double number_of_red_cards, double number_of_black_cards)
{
    double key = number_of_red_cards + (number_of_black_cards*91);
    return key; 
} 
```

第三个 if 语句是代码的“记忆”部分，它存储了所有必要的值。地图中保存的值可以被认为是一个矩阵，这些值将对应于某些#red 牌和#black 牌。真正奇怪的是，当我对总共 8 张卡片（4 张黑色和 4 张红色）执行代码时，我得到了一个错误的答案。但是当我执行 10 张牌的代码时，我的答案是错误的，但现在我对 4 个黑色和 4 个红色的答案是正确的（8 张牌）！12 张卡片也可以这样说，我得到 12 张卡片的错误答案，但 10 张卡片的正确答案，依此类推。代码中有一些错误，但是我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T07:09:39.413

没有人真正回答这个问题。所以我会试一试，尽管[nneonneo](https://stackoverflow.com/users/1204143/nneonneo)实际上将他或她的手指放在了问题的可能根源上。

在这种情况下，第一个问题可能实际上不是问题，但像拇指酸痛一样突出......您`double`用来保存一个您主要视为整数的值。在这种情况下，在大多数系统上，这可能没问题。但作为一般做法，这是非常糟糕的。特别是因为您检查 a`double`是否完全等于 0。在大多数系统上，对于大多数编译器，double 可能会以完美的精度将整数值保存到相当大的大小，只要您限制自己添加，减去和乘以其他整数或伪装成整数的双打以获得新值。

但是，这可能不是您所看到的错误的根源，它只是为每个优秀的程序员敲响了臭代码的警钟。它应该被修复。唯一真正需要它们为双打的时候是在计算红色或黑色的相对概率时。

这让我想到了可能是你的问题。您的代码中有这两个语句：

```
number_of_total_cards = number_of_red_cards + number_of_black_cards;
prob_red_card = number_of_red_cards/number_of_total_cards;
prob_black_card = number_of_black_cards/number_of_total_cards; 
```

当然，应该是：

```
number_of_total_cards = number_of_red_cards + number_of_black_cards;
prob_red_card = number_of_red_cards/double(number_of_total_cards);
prob_black_card = number_of_black_cards/double(number_of_total_cards); 
```

因为你是一个优秀的程序员，并且将这些变量声明为整数。

大概`prob_red_card`和`prob_black_card`是类型的变量`double`。但是它们没有在您向我们展示的代码中的任何地方声明。这意味着无论它们在哪里声明，或者它们的类型是什么，它们都必须被递归调用树中的所有子调用有效地共享`Game::Value_of_game`。

这几乎肯定不是你想要的。在函数的递归调用树中的任何给定调用期间，很难推断这些变量具有什么值以及这些值代表什么。它们确实必须是局部变量才能使算法易于分析。幸运的是，它们似乎只在`else`特定`if`语句的子句中使用。因此可以在最初为它们赋值时声明它们。这可能是这段代码应该阅读的内容：

```
unsigned const int number_of_total_cards = number_of_red_cards + number_of_black_cards;
const double prob_red_card = number_of_red_cards/double(number_of_total_cards);
const double prob_black_card = number_of_black_cards/double(number_of_total_cards); 
```

请注意，我也声明了它们`const`。将您不希望在变量生命周期内更改的任何变量声明为`const`. 它通过在您意外编写不正确的代码时要求编译器告诉您，帮助您编写更正确的代码。它还可以帮助编译器生成更好的代码，尽管在这种情况下，即使是对代码的简单分析也表明它们在其生命周期内没有被修改并且可以被视为 const，因此大多数体面的优化器基本上会`const`为你提供代码优化的目的，尽管这仍然不会给您带来编译器告诉您是否不小心以非常量方式使用它们的好处。

# ruby - 本地编程中的数据库

> ID：12765607
> 
> 赞同：0
> 
> 时间：2012-10-07T02:26:01.210
> 
> 标签：ruby, database, oop

我正在尝试在 Ruby 中建模合作，并且我有类似 `Simulator`和`Agent`. 我发现我最终会做一些适合数据库的事情，比如说`this.agent.find_by_id(1).score.increment`or `this.cooperate`，其中合作将一个值传递给模拟器，然后为两个代理的分数增加一些值，并为代理保留一个计数。这是可能的，还是我只是想错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:11:16.083

您可以在 Rails 之外使用 ActiveRecord：

```
require 'active_record'
require 'mysql2'

ActiveRecord::Base.establish_connection(
  :adapter  => 'mysql2',
  :database => 'database_name',
  :username => 'username',
  :password => 'password',
  :host     => 'localhost'
) 
```

你的类应该只继承自`ActiveRecord::Base`. 您可能还可以使用 Mongoid 或任何其他数据库映射器。

# java - 您可以在 Eclipse 中导入非归档项目目录吗？

> ID：12765608
> 
> 赞同：1
> 
> 时间：2012-10-07T02:26:08.687
> 
> 标签：java, eclipse, import, project

我读[了这篇](http://agile.csc.ncsu.edu/SEMaterials/tutorials/import_export/)文章，它展示了如何在 Eclipse 中导入/导出项目（虽然它看起来有点过时，而且我使用的是 3.7 Indigo）。

要导出项目，您可以转到`File >> Export`它在本地文件系统上创建某种“项目存档”文件。然后，您可以将其通过电子邮件发送给其他人，后者可以将存档作为新项目或现有项目导入。

但是如果你没有一个“存档”文件开始呢？！？如果您只有项目文件和目录但没有所有 Eclipse 元数据（.project 文件等）怎么办？反正有没有告诉 Eclipse 看，说：

```
/home/myuser/some/path/to/project/root/
    src/main/java
        SomeObject.java
    build.xml 
```

...并让它作为一个新的 Java 项目来阅读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:50:51.970

`.project`和`.classpath`文件是项目结构的基础。如果没有`.project`文件 Eclipse 将无法识别您的项目。这`.classpath`也很重要，但是环境之间会发生变化。如果您使用其他环境中的文件，则必须重新配置一些设置。

我建议您使用版本控制系统以及一些 Eclipse 插件，而不是通过电子邮件发送代码。例如 SVN + Subclipse。

如果您真的想将项目发送给另一个人，只需将项目的文件夹发送给他，然后通过右键单击项目资源管理器并选择*Import > Existing Project into workspace*将其作为现有项目导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:46:39.917

请尝试以下步骤：

1.  创建一个Java项目`Eclipse`如下：

    ![在此处输入图像描述](../Images/d9e51acc04cdc4509330acebbe9c0b09.png)

    ![在此处输入图像描述](../Images/1b3d2ad326f76ff77c631c9b9bdf07f4.png)

2.  从您的文件系统加载项目内容，如下所示：

    ![在此处输入图像描述](../Images/6be1fcc7ae3b5f07dedd322c584ab705.png)

    ![在此处输入图像描述](../Images/4fd7805e652c91f7490ca4054e070820.png)

希望这对你有用。

# jquery - 在哪里放置用于验证电子邮件地址的正则表达式

> ID：12765613
> 
> 赞同：0
> 
> 时间：2012-10-07T02:27:13.590
> 
> 标签：jquery, jquery-validation-engine

我在 github 上发现了一个帖子，其中有人提供了一个正则表达式来修复电子邮件验证，但没有解释它应该放在哪里。它是这样开始的：

```
 "email": {
                 "alertText": "* Invalid Email Address"
             }, 
```

有人可以告诉我我会把它放在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:17:56.723

这是我的电子邮件规则：

```
"email": {
    // Shamelessly lifted from Scott Gonzalez via the Bassistance Validation plugin http://projects.scottsplayground.com/email_address_validation/
    "regex": /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
    "alertText": "* Invalid email address"
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:58:21.780

我知道你想通了，但为了别人想知道

```
<input value="someone@nowhere.com" class="validate[custom[email]]" type="text" name="myEmail" id="myEmail" />
```

其中“email”是您要使用的验证的名称。有关更多信息，请参阅[github 存储库文档](https://github.com/musicm122/jQuery-Validation-Engine)。

# dll - ILMerge & Keep 程序集名称

> ID：12765615
> 
> 赞同：3
> 
> 时间：2012-10-07T02:27:55.550
> 
> 标签：dll, ilmerge, assembly-name

我需要合并一些 dll，文件名和程序集名称都需要与我的主 dll (mydll.dll) 相同。我还需要 pdb 文件。我该怎么做？

以下是我尝试过的几件事：

*   只需使用 ILMerge mydll.dll .... /out:mydll.dll 失败并显示“访问路径 ...mydll.pdb 被拒绝”。

*   将 mydll.dll 重命名为 mydllTemp.dll，将 mydll.pdb 重命名为 mydllTemp.pdb，然后 ILMerge mydelltemp.dll .... /out:mydll.dll 失败并显示“与 ...mydlltemp.dll 关联的 pdb 已过期" 我认为这是因为 ilmerge 会查看程序集名称来查找 pdb，因此它会查找已重命名的 mydll.pdb。

*   将 mydll.dll 重命名为 mydllTemp 然后 ILMerge mydelltemp.dll .... /out:mydll.dll 这可以正常工作，但是当我将调试器附加到进程时它不会触发

*   ILMerge mydll.dll ... /out:mydlltemp.dll 将 mydlltemp.dll 重命名为 mydll.dll 并将 mydlltemp.pdb 重命名为 mydll.pdb 现在我可以将调试器附加到触发断点的进程。但是，程序集名称现在是 mydlltemp 而不是 mydll

那么我怎样才能让它工作并拥有原始的程序集名称呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:13:08.720

您并没有真正提到这是在标准开发过程中还是这是构建过程的一部分。

如果是用于标准开发，您真的需要合并所有内容来进行测试吗？

如果它用于您的构建过程，您可以将输出转到不同的目录（您可能首先需要 mkdir），然后您可以重用相同的程序集名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:07:10.637

合并到另一个目录，使用 /out:somedir\mydll.dll

# php - 来自查询字符串 URL 的友好 URL

> ID：12765616
> 
> 赞同：0
> 
> 时间：2012-10-07T02:28:08.987
> 
> 标签：php, url, search, friendly-url

当我在我的网站上键入搜索以获取类似的 url`mysite.com/searach/blabla/video`而不是`mysite.com/?search=blabla&type=video`. 请不要告诉我必须使用 CodeIgniter，因为它没有帮助。我确信我需要的只是 PHP 中的一个小函数。

这是我的`search.php`：

```
<form id="searchwrapper" name="searchform">
<input type="text" class="searchbox" id="txtSearch" name="search" alt="Search Criteria" />
<input type="submit" src="../images/empty.png" class="searchbox_submit"/>

<p id="circ">
<input  type="radio" id="mp3" name="type" checked value="mp3"/>
<label class="circ-btn normal" for="mp3">mp3</label>
                        </p>
<p id="circ">
<input type="radio" id="album" name="type" <?php echo $radio2;?> value="album"/>
<label class="circ-btn normal" for="album">Album</label></p>                
</form> 
```

我的`.htacces`规则设置正确；当我使用 直接访问我的网站时`mysite.com/searach/blabla/video`，它工作正常，但这不是问题。当我在我的网站上键入搜索时，我需要有这样的链接。相反，我得到了这个链接，这是不对的`mysite.com/?search=blabla&type=video`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:36:49.973

您可以使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)，并将其放入您的`.htaccess`文件中

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^search/([^/\.]+)/([^/\.]+)/?$ index.php?search=$1&type=$2 [L] 
```

然后在你的 php 中使用它

```
$URI = substr($_SERVER['REQUEST_URI'], 1);
$URIparts = explode("/", $URI); 
```

这为您提供了一个包含 url 部分的数组。

此外，您应该尝试[清理输入](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)以确保安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:01:47.163

正如其他人评论的那样，如果您使用的是 apache，则需要 mod_rewrite。

如果您真的想输入搜索并最终以 SEF URL 结尾，如您所描述的，您需要类似以下内容：

```
RewriteCond %{QUERY_STRING} ^search=(\w+)&type=(\w+)$
RewriteRule ^ http://mysite.com\/%1\/%2? [R,L] 
```

..这将重定向请求，例如

```
http://mysite.com/index.php?search=A&type=B 
```

.. 至

```
http://mysite.com/A/B 
```

.. 和 JKirchartz 提供了使用 php 脚本作为 SEF url 的示例，例如，让 apache 服务

```
http://mysite.com/video.php?search=A&type=B 
```

..幕后当

```
http://mysite.com/A/B 
```

.. 被请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:32:34.230

您可以使用 apache Mod Rewrite，尽管对于刚学习它的人来说可能会令人沮丧。或者，您可以将您的网站移动到诸如 drupal、wordpress 或 joomla 之类的 cms 上，并让它自动为您创建一个别名。

# objective-c - 可重入读/写锁定结构？

> ID：12765617
> 
> 赞同：16
> 
> 时间：2012-10-07T02:29:16.953
> 
> 标签：objective-c, ios, multithreading, locking

我是一位经验丰富的 .NET 程序员，并且正在使用 iOS 伸展我的腿。.NET 中我最喜欢的多线程结构之一是[ReaderWriterLock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx)。它允许多个读取器或单个写入器。我在 iOS 中真正缺少的一个功能是锁是可重入的。也就是说，[读取器线程可以多次获取读取锁](http://msdn.microsoft.com/en-us/library/9209893x.aspx)，只要它们释放它的次数相同。同样，单个写入线程可以多次获取锁，只要它释放相同数量的锁即可。

我研究了 iOS 框架，似乎没有一个结构提供相同的支持，包括重入。我还查看了 pthread 库。我找到了rwlock，但它不允许重入。

iOS上有什么允许重入读写锁的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-07T19:58:00.287

是的，该`@synchronized`指令是可重入的。请参阅[线程](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocThreading.html)编程指南中的使用 @synchronized[指令](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)以及ObjC 编程语言中的线程。

也就是说，你几乎不应该在 iOS 中使用它。在大多数情况下，您可以避免使用各种锁，更不用说重入锁之类的重量级（慢速）锁了。请参阅并发编程指南，特别是[Migrating Away from Threads](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW1)部分，了解 iOS 偏爱的基于队列的方法而不是手动线程管理和锁定的详细信息。

例如，读/写锁使用 Grand Central Dispatch 的工作方式如下：

```
- (id)init {
   ...
   _someObjectQueue = dispatch_queue_create("com.myapp.someObject", 
                                            DISPATCH_QUEUE_CONCURRENT);
 }

// In iOS 5 you need to release disptach_release(_someObjectQueue) in dealloc,
// but not in iOS 6.

- (id)someObject {
  __block id result;
  dispatch_sync(self.someObjectQueue, ^{
    result = _someObject;
  });
  return result;
}

- (void)setSomeObject:(id)newValue {
  dispatch_barrier_async(self.queue, ^{
    _someObject = newValue;
}); 
```

这种方法允许使用独占写入器的无限并行读取器，同时确保写入器永远不会饿死，并且写入和读取是序列化的，同时避免任何内核调用，除非存在实际争用。这就是说它非常快速和简单。

当读者出现时，您将请求排队以读取该值，并等待它处理。当写入器出现时，它会将屏障请求排队以对其进行更新，这要求当前没有来自该队列的其他请求正在运行。使用这种结构，开发人员不需要管理任何锁。只需按照您希望它们运行的​​顺序将它们放入队列中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T03:45:47.950

来自 iOS[线程编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)：

> 系统仅支持使用 POSIX 线程的读写锁。有关如何使用这些锁的更多信息，请参见[pthread](http://developer.apple.com/library/ios/documentation/System/Conceptual/ManPages_iPhoneOS/man3/pthread.3.html#//apple_ref/doc/man/3/pthread)手册页。

所以我猜如果pthreads不支持重入，答案是否定的。

# macos - 尝试使用 sed 从文件中删除行——我做错了什么？

> ID：12765618
> 
> 赞同：0
> 
> 时间：2012-10-07T02:29:49.083
> 
> 标签：macos, excel, csv, sed

我有一个 .csv 文件，我想在其中删除第 355686 行和第 1048576 行之间的行。

我在终端（在 MacOSx 上）中使用了以下命令：

```
sed -i.bak -e '355686,1048576d' trips3.csv 
```

这会生成一个名为 trips3.csv.bak 的文件——但当我在 Excel 中重新打开它时，它仍然有 1,048,576 行。

欢迎和赞赏您的任何想法或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T04:32:13.493

我怀疑问题是excel使用回车符（\r，八进制015）来分隔记录，而sed假设行由换行符（\n，八进制012）分隔；这意味着 sed 会将整个文件视为一个非常长的行。我认为没有一种简单的方法可以让 sed 让 sed 将 CR 识别为行分隔符，但是使用 perl 很容易：

```
perl -n -015 -i.bak -e 'print if $. < 355686 || $. > 1048576' trips3.csv 
```

（注意：如果 1048576 是文件中的“行”数，则可以省略该`|| $. > 1048576`部分。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T02:36:21.703

不确定 osx sed 实现，但是当传递带有备份扩展名的 -i 标志时，gnu sed 实现首先将原始文件复制到指定的备份并就地修改原始文件。您应该会在原始文件 trip3.csv 中看到减少的行数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:55:21.600

```
awk '!(NR>355686  && NR <1048576)' your_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T04:21:22.947

一些应该完成工作的咒语（如果你安装了 Ruby，显然）

```
ruby -pe 'exit if $. > 355686' < trips3.csv > output.csv 
```

如果你更喜欢 Perl/Python，只要按照文档做类似的事情，你应该没问题。:)

另外，我正在使用Dave的[Ruby one-liners 之一。](http://reference.jumpingmonkey.org/programming_languages/ruby/ruby-one-liners.html#h5)

编辑：对不起，忘了说你需要'> output.csv'来将标准输出重定向到一个文件。

# iphone - iPhone 5 图像问题

> ID：12765619
> 
> 赞同：1
> 
> 时间：2012-10-07T02:30:24.407
> 
> 标签：iphone, uiimage, ios6

我有一个正在制作的应用程序，但我使用的背景图像在我的 iPhone 5 上不起作用。当我将它加载到我的 iPhone 4 上时，一切正常。它的大小是 -568h@2x.png 对，它看起来很大或它将加载@2x.png 并给它一个平铺外观。任何人都知道可能是错的。我尝试在 IB 中以编程方式制作 UIImage。两者都没有成功。我什至尝试过 if else 方法来根据屏幕高度加载不同的 png。我到了可以辞职的地步。任何方向或指导。我有我所有的代码，但不知道发布什么是最好的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:23:36.543

听起来您可能需要制作两个单独的故事板/xib，一个用于 iPhone 5，另一个用于 iPhone 4S/4/3GS，等等。这里有一个[链接](https://stackoverflow.com/questions/12536689/xcode-4-5-how-to-pick-storyboards-at-launch)会告诉你如何做。

# html-agility-pack - 使用 htmlagilitypack c# 重复仅出现几次且具有不同值的对象。

> ID：12765626
> 
> 赞同：0
> 
> 时间：2012-10-07T02:33:14.637
> 
> 标签：html-agility-pack

我有一个我似乎无法在这里解决的问题。假设我有一些像 beneth 这样的 html，我想解析。所有这些 html 都在页面上的一个列表中。并且名称会像我写的示例一样重复。

```
<li class = "seperator"> a date </li>
<li class = "lol"> some text </li>
<li class = "lol"> some text </li>
<li class = "lol"> some text </li>

<li class = "seperator"> a new date </li>
<li class = "lol"> some text </li>

<li class = "seperator"> a nother new date </li>
<li class = "lol"> some text </li>
<li class = "lol"> some text </li> 
```

我确实设法使用 htmlagility pack 来单独解析每个 li 对象，并且几乎按照我想要的方式格式化它。我的打印 atm 看起来像这样：

```
"a date"    "some text"
"some text"
"some text"
"some text"

"a new date"  "some text"

"a nother new date "    "some text"
"some text"
"some text" 
```

我想要达到的目标：

```
"a date"    "some text"
"a date"    "some text"
"a date"    "some text"
"a date"    "some text"

"a new date"    "some text"

"a nother new date "    "some text"
"a nother new date "    "some text"
"a nother new date "    "some text" 
```

但问题是在每个分隔符下，每个 lol 对象的计数可能会有所不同。所以有一天，网页可能在日期 1 下有一个 lol 对象，第二天它可能有 10 个 lol 对象。因此，如果有一种智能/简单的方法可以以某种方式计算分隔符之间的 lol 对象的数量，我会感到很痛苦。或者如果有另一种方法来解决这个问题？例如在 htmlagilitypack 中。是的，我需要在每个 lol 对象前面加上正确的日期，而不仅仅是在第一个对象前面。如果分隔符类在最后一个 lol 对象下方结束，这将是小菜一碟，但遗憾的是事实并非如此......我认为我不需要在这里粘贴我的代码，但基本上我所做的是解析页面，提取分隔符和 lol 对象并将它们添加到列表中，我将它们拆分为分隔符和 lol 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:12:58.450

这是计划，选择所有`seperator`元素，然后找到所有具有所需类的连续兄弟元素。

不幸的是，在当前版本的 HTML Agility Pack 中没有简单的方法来获取同级的集合，您只能访问（一个）下一个同级。很难使用 LINQ 从链接结构中收集数据。而且由于 HTML 中没有真正的层次结构，这将是一个挑战。

如果您有可用的 XPath，则可以使用该`following-sibling`轴来获取所有以下同级元素以及`TakeWhile()`执行以下操作的方法：

```
var htmlStr = @"<li class = ""seperator""> a date </li>
<li class = ""lol""> some text </li>
<li class = ""lol""> some text </li>
<li class = ""lol""> some text </li>

<li class = ""seperator""> a new date </li>
<li class = ""lol""> some text </li>

<li class = ""seperator""> a nother new date </li>
<li class = ""lol""> some text </li>
<li class = ""lol""> some text </li>";

var doc = new HtmlDocument();
doc.LoadHtml(htmlStr);
var data =
    from li in doc.DocumentNode.SelectNodes("li[@class='seperator']")
    select new
    {
        Separator = li.InnerText,
        Content = li.SelectNodes("following-sibling::li")
            .TakeWhile(sli => sli.Attributes["class"].Value == "lol")
            .Select(sli => sli.InnerText)
            .ToList(),
    }; 
```

* * *

否则，如果您没有可用的 XPath，则可以使用以下任何链接结构创建可枚举：

```
public static class Extensions
{
    public static IEnumerable<TSource> ToLinkedEnumerable<TSource>(
        this TSource source,
        Func<TSource, TSource> nextSelector,
        Func<TSource, bool> predicate)
    {
        for (TSource current = nextSelector(source);
                predicate(current);
                current = nextSelector(current))
            yield return current;
    }

    public static IEnumerable<TSource> ToLinkedEnumerable<TSource>(
        this TSource source, Func<TSource, TSource> nextSelector)
        where TSource : class
    {
        return ToLinkedEnumerable(source, nextSelector, src => src != null);
    }
} 
```

然后你的查询现在变成这样：

```
var data =
    from li in doc.DocumentNode.Elements("li")
    where li.Attributes["class"].Value == "seperator"
    select new
    {
        Separator = li.InnerText,
        Content = li.ToLinkedEnumerable(sli => sli.NextSibling)
            .Where(sli => sli.Name == "li")
            .TakeWhile(sli => sli.Attributes["class"].Value == "lol")
            .Select(sli => sli.InnerText)
            .ToList(),
    }; 
```

# ruby-on-rails-3 - Rails AJAX 将部分插入 div

> ID：12765627
> 
> 赞同：1
> 
> 时间：2012-10-07T02:33:44.763
> 
> 标签：ruby-on-rails-3, jquery

我的模型中有很多数据需要编辑许多表单。我所做的是创建一个页面，该页面采用 ?id=something&otheroption=something 之类的选项，并根据这些输入呈现正确的编辑表单。现在，我正在尝试创建实际的编辑页面。该计划是让用户从下拉列表中选择“id”和“otheroption”，然后 AJAX 调用将使用正确的形式更新 DIV。

我需要做的是以某种方式将其放入部分中，以便我可以向其中发送 AJAX 请求，让 rails 处理选项，渲染部分，并返回 AJAX 请求。我如何用 JQuery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:42:00.420

我所做的是创建一个带有 js 响应的控制器操作，然后呈现部分响应。举个例子：

**HTML**

```
<div id="div_id"></div> 
```

**控制器**

```
def ajax_responder

  @data = query

  respond_to do |format|
   format.js
  end
end 
```

**JS部分**

```
jQuery("#div_id").html("<%= escape_javascript(render "html_partial")  %>"); 
```

**HTML 部分**

```
whatever your html partial with data would be 
```

这可能非常糟糕......我愿意接受反馈。

# c# - 在 Win8 Metro 应用程序中删除转义字符的问题

> ID：12765628
> 
> 赞同：0
> 
> 时间：2012-10-07T02:33:53.923
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5

出于某种原因，我很难在 Metro 中删除转义字符。

一个例子：

```
Document = Document.Replace(@"\t", " ")
                   .Replace(@"\n", " ")
                   .Replace(@"\r", " ")
                   .Replace(@"\v", " "); 
```

那没有任何作用。

示例字符串：`"public static int main()\v{\v\t\v}\r"`

`Also .Replace(@'\', ' ')`也不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:43:20.977

删除您的“@”符号。您不想搜索后跟 t 的反斜杠。您要搜索选项卡：“\t”，而不是 @“\t”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T02:52:36.573

试试这个： `Regex.Replace (inputString, @"[\t\v\r\n]+", "\x20").Trim ()`

# google-app-engine - 数据存储区 (ndb) 在内容中插入换行符（类型：TextProperty）

> ID：12765629
> 
> 赞同：1
> 
> 时间：2012-10-07T02:33:56.910
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个看起来像这样的模型：

```
class Foo(ndb.Model):
    bar = ndb.TextProperty(required=True)
    # other properties 
```

我正在使用 jinja2 进行模板化：

```
{{ bar|safe }} 
```

我“放入”[这个](http://cl.ly/image/1S3Z3b2v0v0U)：

```
<p>I think it is always going to be challenging planning a wedding in a foreign country. 1234 Weddings was able to pre-arrange everything before our arrival and even meet us at the airport to attend to last minute details.<br> The wedding itself was even more amazing than we could have imagined and flawless. For our day, 1234 Weddings became a part of our family and our memories. We are so greatful for the professional communication and creativity that made our day so special.</p> 
```

ndb 破坏文本，[输出](http://cl.ly/image/291w1x2s0S3C)：

```
<p>I think it is always going to be challenging planning a wedding in a for=
eign country. 1234 weddings was able to pre-arrange everything before our a=
rrival and even meet us at the airport to attend to last minute details.<br=
>The wedding itself was even more amazing than we could have imagined and f=
lawless. For our day, 1234 Weddings became a part of our family and our mem=
ories. We are so greatful for the professional communication and creativity=
 that made our day so special.</p> 
```

这只发生在我部署的站点上。localhost 上的相同代码不会产生此问题。

可能相关：

*   我的本地应用程序引擎没有持久数据存储。
*   bar 最初是“StringProperty”类型。在将类型更改为“TextProperty”后，我注意到了这个问题，但在更改之前没有进行广泛的测试，因此问题可能在此之前就存在。

任何帮助，将不胜感激。
TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:01:45.140

Blobstore 上传处理程序中有一个错误导致同时提交的文本出现编码问题，这里的评论有一个过去对我有用的补丁：[http ://code.google.com/p/googleappengine/issues /detail?id=2749](http://code.google.com/p/googleappengine/issues/detail?id=2749)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:38:47.733

它不是 NDB——它也不是 Datastore 对您的文本做这样的事情。它看起来像是某种内容编码，特别是引用打印，可能由浏览器应用？

# sql - 奖励符合条件的产品

> ID：12765630
> 
> 赞同：2
> 
> 时间：2012-10-07T02:34:02.063
> 
> 标签：sql, sql-server, sql-server-2008

```
products purchased
--------------------------
bana
bana
bana
stra
kiwi

reward requirements table (related to a rewards table)
reward id, products
----------------------
1,bana
1,bana
1,bana
2,stra
2,bana
3,stra
4,cart
5,bana
5,bana
5,oliv 
```

你能帮我用sql来获得购买的产品有资格获得的奖励吗？

在上述情况下，奖励 ID 为：

```
1
2
3 
```

如果有更好的设计可以使解决方案更容易，我也欢迎这些。我希望使用产品名称是为了更容易解释。（稍后我将替换为产品 ID）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T05:44:40.640

此查询将解决您的问题。

```
select r.reward_id
from (
  select reward_id, product, count(*) needed
  from reward_requirements
  group by reward_id, product
) r
left join (
  select product, count(*) bought
  from products_purchased
  group by product 
) p on r.product=p.product and p.bought >= r.needed
group by r.reward_id
having count(reward_id) = count(distinct p.product)
order by r.reward_id 
```

为了使您的设计更好，您可以重做reward_requirements 以获得列（产品，需要），而不必多次列出它。它还将摆脱第一个子查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:28:04.157

使用此架构：

```
CREATE TABLE            product
(
    product_id          int IDENTITY
    , name              varchar(50)
)

CREATE TABLE            requirement
(
    requirement_id      int IDENTITY
    , product_id        int
    , quantity          int
    , reward_id         int
)

CREATE TABLE            reward
(
    reward_id           int IDENTITY
    , reward            varchar(50)
)

CREATE TABLE            purchased
(
    purchased_id        int IDENTITY
    , product_id        int
    , quantity          int
) 
```

您的查询变为：

```
SELECT      requirement.reward_id
FROM        requirement
            LEFT JOIN purchased
                ON  purchased.product_id = requirement.product_id
                AND purchased.quantity >= requirement.quantity
GROUP BY    requirement.reward_id
HAVING      COUNT(purchased.product_id) = COUNT(requirement.reward_id); 
```

这是一个可以玩的 SQLFiddle：[http ://sqlfiddle.com/#!3/e93c9/7](http://sqlfiddle.com/#!3/e93c9/7)

# ios - ipad 应用程序 - 方向旋转性能很差

> ID：12765631
> 
> 赞同：0
> 
> 时间：2012-10-07T02:34:06.020
> 
> 标签：ios, performance, ipad, rotation

我的 iPad 应用程序是主细节样式的。详细视图包含一个自定义视图（我们称之为板视图），该视图中的所有内容都在 drawRect() 中绘制。iPad 旋转方向时，由于细节视图大小发生变化，需要重新绘制整个板视图。到目前为止一切正常。但我注意到一个问题，当 iPad 旋转方向时，我的应用程序在旋转屏幕之前总是延迟几秒钟。我检查了邮件应用程序，当 iPad 旋转时，它的屏幕会立即旋转。

我想知道如何调试这样的性能问题。那是因为板视图的 drawRect() 执行速度太慢了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:59:16.850

> 我想知道如何调试这样的性能问题。那是因为板视图的 drawRect() 执行速度太慢了吗？

您可以通过在仪器（Product-->Profile 或 cmd-I）中运行您的应用程序并选择时间分析器来发现这一点。当您旋转设备时，您应该会看到 CPU 活动的峰值——仪器会告诉您这段时间用在了哪里。

它可能*是*drawRect，如果你正在重绘整个视图并且它是一个复杂的绘图操作。但是，现阶段很难进一步提供帮助。

# linux - 如何在 softirq 上下文中运行 hrtimer 处理程序？

> ID：12765632
> 
> 赞同：2
> 
> 时间：2012-10-07T02:34:15.993
> 
> 标签：linux, timer, interrupt

我找到了有关 hrtimer 的教程：http: [//www.ibm.com/developerworks/linux/library/l-timers-list/](http://www.ibm.com/developerworks/linux/library/l-timers-list/)

我相信它使用的方式会在 hardirq 上下文中运行回调处理程序，对吗？但它也说“**一个有趣的方面是能够定义回调函数的执行上下文（例如在softirq或hardiirq上下文中）** ”

我检查了 hrtimer.h 文件，但它真的不是那么直观。有谁知道如何在 softirq 上下文中运行它？在hardirq中运行它是否相似？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T21:40:00.153

此信息与旧内核有关 - 在最近的版本中，此功能已被删除，以降低代码复杂性并避免错误。现在 hrtimer 总是在禁用 IRQ 的 hardirq 上下文中运行。

一种可能的方法是使用 tasklet_hrtimer

```
#include <linux/interrupt.h>

struct tasklet_hrtimer mytimer;

enum hrtimer_restart callback(struct hrtimer *t) {
   struct tasklet_hrtimer *mytime=container_of(t,struct tasklet_hrtimer,timer);

   ...
}

...
tasklet_hrtimer_init(&mytimer,callback,clock,mode);
tasklet_hrtimer_start(&mytimer,time,mode);
... 
```

在上面的示例中，您应该将`clock`,`mode`和替换`time`为适当的值。

如果您想将数据传递给您的回调，那么您必须将 tasklet_hrtimer 变量嵌入到您的某个结构中，并使用 container_of 技巧来获取您的数据。

不太明显，您的结构将包含一个 tasklet_hrtimer，它将包含一个 hrtimer 结构。当你得到一个指向最内层元素的指针并且你知道它与父元素有一个固定的偏移量时，你可以到达父元素。

# java - 从一些示例线程代码中获取 RuntimeException

> ID：12765633
> 
> 赞同：0
> 
> 时间：2012-10-07T02:34:41.453
> 
> 标签：java, android, multithreading

我开始研究线程，我不明白为什么下面的简单代码不起作用。它正在抛出：

```
RuntimeException: can't create handler inside thread that has not called looper.prepare(): 
```

这是代码

```
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.id1:
        Thread th =new Thread(new Runnable() {
               public void run() {
                update();
                delObjects();
                addObjects();

               }
              }); 
        th.start();
        break;
        }
    } 
```

我读到有时当您尝试修改 UI 时会发生错误，但这不是我的情况。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:48:59.290

如果你没有访问 UI 的东西，那么你很可能在做深度线程。基本上，您不能从已经线程化的 run() 方法之外启动线程。所以你的方法，

```
update();
delObjects();
addObjects(); 
```

可能正在使用线程，这会导致此问题。在大多数情况下，您不需要这样的线程，因为您已经在 UI 线程之外，因此您可以跳过这些函数内部的线程。在某些情况下，如果必须在没有运行包装线程的其他地方使用这些函数，则可能需要在方法本身中有线程。因此，如果是这种情况，请将您的代码更改如下。

```
public void onClick(View v) {

    switch (v.getId()) {
        case R.id.id1:
        Thread th = new Thread(new Runnable() {
            public void run() {
                //Prepare for further threading.
                Looper.prepare();

                update();
                delObjects();
                addObjects();
            }
        }); 
        th.start();
        break;
    }
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:38:32.630

创建线程时，使用 var name “th”，但启动线程时，使用“th1”。当您提出问题时，这是一个错字，还是您的代码中的错误？

# mysql - 如何将键 0 插入 mysql 的 AUTO_INCREMENT 行？

> ID：12765635
> 
> 赞同：1
> 
> 时间：2012-10-07T02:35:34.350
> 
> 标签：mysql

> **可能重复：**
> [如何强制 MySQL 将 0 作为有效的自动增量值](https://stackoverflow.com/questions/1142472/how-to-force-mysql-to-take-0-as-a-valid-auto-increment-value)

我知道我可以对现有行进行更新，但是是否可以插入 id 为 0 的行？

```
mysql> create table inc( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, sz TEXT);
Query OK, 0 rows affected (0.10 sec)

mysql> insert into inc(id, sz) select 25, "a";
Query OK, 1 row affected (0.02 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into inc(id, sz) select 25, "a";
ERROR 1062 (23000): Duplicate entry '25' for key 'PRIMARY'
mysql> insert into inc(id, sz) select 27, "b";
Query OK, 1 row affected (0.04 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into inc(id, sz) select -5, "c";
Query OK, 1 row affected (0.03 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into inc(id, sz) select 0, "d";
Query OK, 1 row affected (0.15 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> select * from inc;
+----+------+
| id | sz   |
+----+------+
| -5 | c    |
| 25 | a    |
| 27 | b    |
| 28 | d    |
+----+------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:44:14.547

来自[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

“没有为 AUTO_INCREMENT 列指定值，因此 MySQL 自动分配了序列号。您也可以显式地将 NULL 或 0 分配给该列以生成序列号。”

所以似乎使用 0 只是告诉它 auto_increment。

但是，如果您要分配 ID 号，我不确定您为什么将列定义为使用 AUTO_INCREMENT？

# c# - 请求的资源不支持 HTTP 方法“GET”

> ID：12765636
> 
> 赞同：104
> 
> 时间：2012-10-07T02:35:41.340
> 
> 标签：c#, routing, asp.net-web-api

我的路线配置正确，我的方法有装饰标签。我仍然收到“请求的资源不支持 HTTP 方法 'GET'”消息？

```
[System.Web.Mvc.AcceptVerbs("GET", "POST")]
[System.Web.Mvc.HttpGet]
public string Auth(string username, string password)
{
  // Décoder les paramètres reçue.
  string decodedUsername = username.DecodeFromBase64();
  string decodedPassword = password.DecodeFromBase64();

  return "value";
} 
```

这是我的路线：

```
config.Routes.MapHttpRoute(
    name: "AuthentificateRoute",
    routeTemplate: "api/game/authentificate;{username};{password}",
    defaults: new { controller = "Game",
                    action = "Auth", 
                    username = RouteParameter.Optional, 
                    password = RouteParameter.Optional },
    constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
);

config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { controller = "Home", id = RouteParameter.Optional }
); 
```

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-10-07T05:45:24.700

请使用 System.Web 中的属性。WebAPI 操作上的**Http命名空间：**

```
 [System.Web.Http.AcceptVerbs("GET", "POST")]
    [System.Web.Http.HttpGet]
    public string Auth(string username, string password)
    {...} 
```

它不起作用的原因是因为您使用的是来自**MVC**命名空间 的属性`System.Web.Mvc`。命名空间中的类`System.Web.Http`用于**WebAPI**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-30T01:26:22.107

就我而言，路由签名与方法参数不同。我有 id，但我接受 documentId 作为参数，这导致了问题。

```
[Route("Documents/{id}")]   <--- caused the webapi error
[Route("Documents/{documentId}")] <-- solved
public Document Get(string documentId)
{
  ..
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-30T09:52:29.317

只需使用此属性

```
[System.Web.Http.HttpGet] 
```

不需要这行代码：

```
[System.Web.Http.AcceptVerbs("GET", "POST")] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-09-03T15:06:55.657

通过`http(s)`在访问端点时使用解决了这个问题。我访问的路线在`http`. 所以我想说验证路由可用的协议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-08T22:52:37.297

我遇到了同样的问题。我已经有 4 个控制器运行良好，但是当我添加这个控制器时，它返回“请求的资源不支持 HTTP 方法'GET'”。我在这里和其他几篇相关文章中尝试了所有内容，但对解决方案漠不关心，因为正如 Dan B. 在回应答案时提到的那样，我已经让其他人工作正常。

我走了一会儿，回来了，马上意识到当我添加控制器时，它嵌套在“控制器”类下，而不是我的其他控制器所在的“ApiController”类下。我假设我选择了错误的脚手架选项来构建 Visual Studio 中的 .cs 文件。因此，我包含了 System.Web.Http 命名空间，更改了父类，并且在没有附加属性或路由的情况下一切正常。

# ios - 苹果游戏中心和Facebook找朋友iOS6

> ID：12765637
> 
> 赞同：2
> 
> 时间：2012-10-07T02:35:49.287
> 
> 标签：ios, facebook, ios6, game-center

我主要是想澄清以下几点：

**1\. 有人告诉我，在 iOS 5 及以下版本中，如果您使用 Game Center 设置多人游戏，“查找 Facebook 好友”功能（如与好友争吵）不是内置的，因此您需要单独的管理此操作的那种服务器 - 这是正确的吗？**

根据 iOS 文档：

*社交框架 (Social.framework) 为访问用户的社交媒体帐户提供了一个简单的界面。该框架取代了 iOS 5 中引入的 Twitter 框架，并增加了对其他社交帐户的支持，包括 Facebook 和新浪微博服务。应用程序可以使用此框架将状态更新和图像发布到用户的帐户。此框架与 Accounts 框架一起为用户提供单点登录模型，并确保批准对用户帐户的访问。UIKit 框架还提供了一个新的 UIActivityViewController 类，用于显示用户可能对某些选定内容执行的操作。此类的一种用途是允许用户将内容发布到社交帐户，例如 Twitter 或 Facebook。您可以在 iPhone 上模态地展示这个课程，或者在 iPad 上使用弹出框控制器。当用户点击其中一个按钮时，视图控制器会呈现一个新界面来执行相关操作。有关社交框架的更多信息，请参阅社交框架参考。有关 UIActivityViewController 类的信息，请参阅 UIKit 框架参考。*

参考： [https ://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html#//apple_ref/doc/uid/TP40011812-SW1](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html#//apple_ref/doc/uid/TP40011812-SW1)

**2\. 从上面来看，iOS 6 的 Game Center 中似乎内置了“查找 Facebook 朋友”操作 - 这是正确的吗？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:57:28.050

不幸的是，iOS6 上不存在您所描述的功能（查找 Facebook 朋友以连接多人比赛），至少目前不存在。

包含的内容有点不同，而且不那么令人兴奋。如果您在设备上访问 Game Center 应用程序，您现在会得到一个“推荐朋友”列表，该列表是从您的 facebook 朋友和设备上的联系人生成的。

获取 facebook 好友匹配功能仍然需要您设置自己的服务器，这很遗憾。

# hibernate - 如何使 hibernate.cfg.xml 成为数据源 bean

> ID：12765638
> 
> 赞同：1
> 
> 时间：2012-10-07T02:35:50.723
> 
> 标签：hibernate

我有一个 hibernate.cfg.xml 文件，但我想将它作为数据源 bean 引用。有没有办法做到这一点？我所拥有的是：

```
<beans:bean id="foo" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <beans:property name="configLocation" value="classpath:hibernate.cfg.xml"/> 
```

但它不是数据源。任何帮助将不胜感激。

为了添加一些上下文，我想在我的应用程序中集成 Spring Security，提供数据库作为身份验证管理器源的方法之一如下（取自[此处](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#what-is-acegi-security)）：

```
 <authentication-manager>
        <authentication-provider>
            <jdbc-user-service data-source-ref="securityDataSource"/>
        </authentication-provider>
    </authentication-manager> 
```

其中“securityDataSource”是应用程序上下文中DataSource bean的名称，指向一个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:41:42.450

你有两个选择：

1.  如果您不使用`hibernate.cfg.xml`其他任何地方，则可以完全消除它，只需使用 Spring 的配置（见下文）

2.  如果您`hibernate.cfg.xml`出于某种原因需要（您在其他地方使用它），请保留该文件并添加 Spring 配置

* * *

示例配置（注意数据库访问在单独的`dataSource`bean 中）

```
<beans:bean id="foo" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
       <property name="hibernateProperties">
            <props>
                <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
                ...
        </property>
        <property name="packagesToScan">
            <list>
                <value>some.package</value>
            </list>
        </property>
    <property name="dataSource" ref="c3p0DataSource" />

<bean id="c3p0DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    scope="singleton"
        destroy-method="close">
        <property name="driverClass">
            <value>org.postgresql.Driver</value>
        </property>
        <property name="jdbcUrl">
            <value>${jdbc.url}</value>
        </property>
        <property name="user">
            <value>${jdbc.user}</value>
        </property>
        <property name="password">
            <value>${jdbc.pw}</value>
        </property>
    </bean> 
```

[您可以在http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html)中查看有关配置选项的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:55:04.137

如果您使用的是hibernate而不是为什么使用jdbc，您可以像这样使用spring bean

```
<security:authentication-manager>
<security:authentication-provider ref="myAuthenticationProvider" />
</security:authentication-manager>
<bean id="myAuthenticationProvider" class="com.something.MyAuthenticationProvider"/> 
```

其中 MyAuthenticationProvider 是实现 AuthenticationProvider 的 Spring bean。您还可以查看以下链接以获取更多帮助[Link1](http://www.mkyong.com/spring-security/spring-security-form-login-using-database/)和[Link2](http://beansgocrazy.blogspot.in/2011/07/custom-authentication-with-spring.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:16:36.300

您可以直接从 spring 创建，不需要 cfg.xml 文件。

dialect 50 false false false 您可以在此处配置所有 Hibernate 属性...

# ruby-on-rails - Prawn 中的二维码（PDF Gem），使用表格？或不同的简单解决方案？

> ID：12765640
> 
> 赞同：0
> 
> 时间：2012-10-07T02:36:10.527
> 
> 标签：ruby-on-rails, qr-code, prawn

我已经尝试了许多用于创建 PDF 文档的 gem，其中一些非常好用，没有太多困难。我的任务是在 PDF 文档中创建一个二维码。我在 QR 生成器和 PDF 生成器之间尝试了很多组合。虽然我在将二维码导入 PDF 文档时遇到了很多麻烦。我正在使用`rqrcode`gem，我喜欢它，因为它从 CSS 生成二维码，而不是图像。

我尝试过使用专门为使用 Prawn 生成 QR 码而构建的 gem，但是我不断收到一条消息，说它无法识别该`modules`方法。我得到的最接近的是在我的`html`文档中使用类似的结构。但这只是在没有表格的情况下使用它，这是没有用的，因为 gem 通过输出表格和 CSS 来工作。

我知道这很模糊，但是由于可能的解决方案和我尝试过的不同尝试的数量，我不确定我应该提供哪些其他信息。

有任何想法吗？`rqrcode`有没有其他人设法使用 Prawn 中的表格创建带有 gem 的 QR 码？

表格在视图中的外观（HTML，不是 PDF）：

```
<table class="qr">
 <% qr.modules.each_index do |x| -%>
   <tr>
   <% qr.modules.each_index do |y| -%>
    <% if qr.dark?(x,y) -%>
    <td class="black"/>
    <% else -%>
    <td class="white"/>
    <% end -%>
   <% end -%>
   </tr>
 <% end -%>
</table> 
```

我最接近的没有它打破`.prawn.pdf file`（当我尝试添加一个表格时它打破了）。并且只是测试是否有效`*`，当我尝试将其更改为单元格背景时它会中断。`!``modules method`

```
@qr.modules.each_index do |x|
   @qr.modules.each_index do |y|
    if @qr.dark?(x,y)
      pdf.text "!"
    else
      pdf.text "*"
    end
   end
 end 
```

宝石文件

```
gem 'prawn'

gem 'prawn-qrcode'

gem "rqrcode", "~> 0.4.2" 
```

**更新**

我找到了一些有用的[代码](https://gist.github.com/1791941)，尽管现在我遇到的问题是 QR 码的实际大小。我希望能够把二维码做得很大。令人惊讶的是，新代码中的参数实际上并没有改变大小。实际二维码中的`size`参数确实会稍微改变大小，但它实际上是在改变二维码的[版本](http://en.wikipedia.org/wiki/QR_code#Design)，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:36:43.510

我有一个几乎类似的问题。我必须生成一个条形码的 pdf 文档。条形码需要在 html 视图的网格中显示，当用户单击“另存为 pdf”时，视图的 pdf 文件将发送给用户。我解决了它

在控制器中，上课前

```
require 'rubygems'
require 'barby'
require 'barby/barcode/code_128'
require 'chunky_png'
require 'barby/outputter/png_outputter'
require 'aws/s3' 
```

控制器方法

```
def generate_barcode
   ...
   @barcode_numbers = inspection.get_barcode_numbers
   ...
   @barcode_numbers.each do |d|
     barcode = Barby::Code128B.new(d)
     image_path = get_image_path + "code_#{params[:inspection_id]}_#{@spec.id}_#{d.sub('.', '0')}.png"
     File.open(image_path, 'w'){|f|
       f.write barcode.to_png(:height => 50, :margin => 3)
       Barcode.create(:filename => "code_#{params[:inspection_id]}_#{@spec.id}_#{d.sub('.', '0')}.png", :measurement => d)
     }
   end
   html = render_to_string(:action => "generate_barcode.html.haml", :layout => false)
   kit = PDFKit.new(html)
   send_data(kit.to_pdf, :filename => 'barcodes.pdf', :type => 'application/pdf', :disposition => 'inline')
   @all_barcodes.each do |d|
     File.delete("#{Rails.root}/tmp/#{d.filename}")
   end if Rails.env != "development"
   @all_barcodes.destroy_all 
```

# vb.net - VB：调用方法而不启动类

> ID：12765646
> 
> 赞同：0
> 
> 时间：2012-10-07T02:37:35.800
> 
> 标签：vb.net, class

好的，所以我在一个类中有一堆方法。我如何在不启动它的情况下调用这些方法：

```
Dim aa as new classname
aa.method 
```

我想这样做的原因是我不必继续重新启动它以丢失其可变数据。

在 php 中，您可以创建一个静态方法，然后调用该方法而不创建该类的实例

我们如何在 vb 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:39:30.057

VB中的静态等价物是Shared

# timezone - MinGW MSYS、MSVCRT 和 TZ 环境变量

> ID：12765650
> 
> 赞同：4
> 
> 时间：2012-10-07T02:38:50.007
> 
> 标签：timezone, mingw, msvcrt, msys

简而言之，如何让 MSVCRT 和 MinGW MSYS 共享 TZ 环境变量而不冲突？或者，如何使两者都支持时区而不会发生冲突？

## 更多的信息

为了让 MSYS 的 date 命令显示正确的本地时间，并且因为 MSYS 本身使用自己的 C 运行时而不是 MSVCRT，我[根据 GNU C 库文档](http://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html)设置了 TZ 环境变量：

```
export TZ="BRT+3BRST,M10.3.0/0,M2.3.0/0" 
```

不幸的是，[这与 Microsoft C runtime specs 冲突](http://msdn.microsoft.com/en-us/library/90s5c885%28v=vs.80%29.aspx)，后者规定了 DST 名称部分：

> *如果夏令时在该地区从未生效，请设置 TZ 而不为 dzn 设置值。C 运行时库假定美国实施夏令时 (DST) 计算的规则*

因此，在 TZ 变量中简单地存在 DST 名称将导致依赖于`_tzset`美国以外的程序出现故障。这是我在 Bazaar DVCS 的情况，我的提交时间错误，晚了一小时，因为 MSVCRT 假设我已经根据 TZ 设置进入 DST 期间。如果我将 TZ 留空，MSYS 日期会显示 UTC 时间，但 MSVCRT（和 Bazaar）工作得很好。如果我如上所述设置 TZ，则 MSVCRT 会增加一小时的提交时间，但 MSYS 日期显示本地时间。

Bazaar 受到影响，因为它使用 Python，而 Python 在 Windows 下又使用 MSVCRT。即使我可以从 DST 名称中删除所有内容，这也会破坏 MSYS 中的日期命令。我也尝试了 TZ 的几个值。除了上面 GNU 参考中描述的内容之外，MSYS 似乎缺少任何进一步的时区支持。另外，我想避免只在调用 Bazaar 时设置 TZ，或者只在调用 date 命令时设置它，而是一个更通用的解决方案。

**替代格式和 zoneinfo 数据库**

TZ 有另一种格式，上面的 GNU 文档中的第三种格式，但 MSYS 似乎不支持它，如下所述：

> *但是 POSIX.1 标准只规定了前两种格式的细节，*

似乎这第三种格式只是 IANA 的时区数据库，[它描述了一种不同的 TZ 格式，](http://www.iana.org/time-zones/repository/tz-link.html) MSYS 似乎也不支持，如下所述：

> *要在扩展的 POSIX 实现上使用数据库，请将 TZ 环境变量设置为位置的全名，例如`TZ="America/New_York"`.*

Desipe 上面我试图将 IANA 的 zoneinfo 手动安装到 MSYS 上，但没有成功。我不确定这些语句是否正确，MSYS 甚至无法识别它们的格式，或者我只是未能正确安装 zoneinfo 数据文件。我找不到编译的版本，我自己也编译不了，所以我只是尝试了 Ubuntu 的 tzdata 包。

不过，对我来说奇怪的是，上面的 GNU C 库文档已经带有一个时区数据库（在我看来，这听起来像 zoneinfo）。但是，如前所述，我在 MSYS 的任何地方都找不到安装任何类型的时区数据库，也找不到与时区相关的任何 mingw-get 包。我想知道开发人员是否只是将其从版本中删除。这就是文档所说的：

> *GNU C 库带有一个包含世界大部分地区时区信息的大型数据库，该数据库由志愿者社区维护并置于公共领域。*

所以总而言之，如果我可以在 MSYS 中进行 zoneinfo 或类似的替代工作，那么我可以放弃我目前设置 TZ 的方法如上。但是，我在 MSYS 中找不到任何关于时区支持的好信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:53:40.730

简单的解决方案是按照您的预期设置您的 Windows 环境变量，然后将 MSYS 的 ~/.profile 文件中的变量更改为 POSIX 的预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:21:21.667

我发现 MSYS 实际上应该在没有 TZ 的情况下自动检测时区。以下错误报告记录了该问题：[MSYS can't handle timeozones in localized Windows](https://sourceforge.net/tracker/?func=detail&aid=3579559&group_id=2435&atid=102435)。

**与此同时**

到目前为止，我发现的最佳解决方案是：

1.  创建一个名为 example 的包装脚本`runcrt.sh`，可从系统路径获得并包含：

    ```
    #!/bin/bash
    env -u TZ $(basename "$0").exe "$@" 
    ```

2.  为该脚本创建 NTFS 符号链接，一个用于我打算在 MSYS 中运行的每个 MSVCRT 程序，但没有 exe 扩展名并且在系统路径中的实际可执行文件之前。例如，ruby、python、bzr 等。

3.  出于性能原因，将 TZ 的配置（动态生成的导出语句）缓存到`/etc/profile.d/timezone.sh`Windows 初始化中（实际上我们只需要每年更新一次 TZ，这是 DST 周期可能改变的频率，但无论如何）。

4.  将 BASH_ENV 设置为`/etc/profile.d/timezone.sh`，因此不仅交互式 bash 会话而且 shell 脚本也可以感知时区。

这样，无论是交互方式还是从 shell 脚本，对 的调用`bzr commit`都会将正确的提交日期放入代码存储库，因为该命令是在未设置 TZ 的情况下执行的。同样，为所有其他命令（例如 date 和 ls）设置了 TZ，因此它们也打印正确的本地时间。我已经放弃了仅为 MSYS 命令设置 TZ 并将其留空的相反方法，因为未设置操作比采购导出要快得多。

**MSYS2 作为替代**

但是，MSYS2 不受此错误的影响，并且可以正确识别时区。事实上，它有适当的时区支持：

```
$ tzset
America/Sao_Paulo

$ date +"%T, timezone %Z (%z)"
10:18:12, timezone BRT (-0300)

$ TZ=America/Los_Angeles date +"%T, timezone %Z (%z)"
06:18:14, timezone PDT (-0700) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:39:27.857

在您的环境中，运行纯 Windows 没有任何问题，没有 msys。当您不访问本机 Windows 应用程序（如 Bazaar）时，运行纯 msys 也没有问题。这就是我从你的问题中假设的。

取消设置在 msys 下运行的每个 Windows 命令的特殊脚本包装器`TZ`似乎是合理的，我想这就是你所做的。我知道这不是您期望的答案，也不是您可以自己写的答案，但是由于没有其他答案，我认为至少应该在这里 :) 最不邪恶。

最后我想象3个级别的设置`TZ`：

1.  在 Windows 系统设置中为 Microsoft 设置的值
2.  Msys 的值设置在`/etc/profile`或`msys.bat`
3.  Microsoft 再次在包装器中运行 Msys 中的 Windows 命令的值，例如：
    `#!/bin/bash`
    `export TZ=; /usr/bin/bazaar "$@"`
    在文件中`/usr/local/bin/bazaar`

我无法想象更通用的解决方案。shell 如何知道`TZ`给定命令首选哪个版本的变量？

# clojure - 如何在 Clojure 中的函数上覆盖 toString？

> ID：12765657
> 
> 赞同：1
> 
> 时间：2012-10-07T02:40:10.323
> 
> 标签：clojure

例如，假设我将 StringBuilder 包装在一个函数中，以便在 Clojure 中更轻松地使用它。我可以轻松地在缓冲区上制作函数调用的无参数版本 toString ，例如

```
(defn builder
  ([^StringBuilder sb]
     (fn
       ([] (.toString sb))
       ([& args]
          (doseq [arg args]
            (.append sb arg)))))
  ([] (builder (StringBuilder.)))) 
```

这是完全可行的，但是，我想知道如何在函数本身上覆盖 .toString() ，这样我就可以返回 StringBuilder 或我关闭的任何其他对象的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:58:11.747

您可以尝试使用[https://github.com/technomancy/serializable-fn](https://github.com/technomancy/serializable-fn)，它使函数在打印时包括其封闭范围。不过，它会打印 stringbuilder 的 pr-str，这可能是也可能不是您想要的。

# html - 如何防止在创建新用户表单中自动填充管理员信息？

> ID：12765660
> 
> 赞同：2
> 
> 时间：2012-10-07T02:41:27.217
> 
> 标签：html, google-chrome, yii, autofill

使用[Yii 1.1.12](http://www.yiiframework.com/) php 框架虽然这可能不相关。当以管理员用户身份登录时，在我的创建新用户页面（我创建的一个 mvc 视图）上，表单会自动填充管理员的用户名和密码（至少在使用谷歌浏览器时使用，因为我已经为网站保存了它们） .

然而，表单的目的是创建全新的用户，因此自动填充管理员的用户名和密码是没有意义的。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T03:22:35.773

```
<?php echo $form->textField($model,'username',array('value'=>'', 'placeholder'=>"Username", 'autocomplete'=>"off")); ?>
<?php echo $form->passwordField($model,'password',array('value'=>'', 'placeholder'=>"Password", 'autocomplete'=>"off")); ?> 
```

# excel - 无法识别类对象

> ID：12765661
> 
> 赞同：1
> 
> 时间：2012-10-07T02:41:37.983
> 
> 标签：excel, vba

我遇到了无法识别类对象的问题（错误 91，未设置对象引用）。这是代码：

```
---Main (Standard Module)
Option Explicit
Public wbCode As Workbook

Public Sub MainSub()
Dim str As String
Dim tables As New CTables
Call SetExcelObjects
str = tables.shExclusions.Cells(20, 1) ---this produces error 91
End Sub

Public Sub SetExcelObjects()
Dim tables As New CTables
Dim str As String
Set wbCode = ThisWorkbook
Set tables.shExclusions = wbCode.Worksheets("Exclusions")
str = tables.shExclusions.Cells(20, 1) ---this line executes okay
End Sub

---CTables (Class Module)
Option Explicit
Public shExclusions As Worksheet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:47:17.830

尝试这个：

```
---Main (Standard Module) 
Option Explicit 
Public wbCode As Workbook 

Public Sub MainSub() 
Dim str As String 
Dim tables As New CTables 
Call SetExcelObjects(tables)
str = tables.shExclusions.Cells(20, 1) ---this produces error 91 
End Sub 

Public Sub SetExcelObjects(tables as CTables) 
Dim str As String 
Set wbCode = ThisWorkbook 
Set tables.shExclusions = wbCode.Worksheets("Exclusions") 
str = tables.shExclusions.Cells(20, 1) ---this line executes okay 
End Sub 

---CTables (Class Module) 
Option Explicit 
Public shExclusions As Worksheet 
```

# c++ - 交换单链表节点会创建一个无限循环

> ID：12765664
> 
> 赞同：0
> 
> 时间：2012-10-07T02:42:11.767
> 
> 标签：c++, linked-list

我的节点有一个整数值。我希望我的程序使用这样的值交换两个节点：

```
void reemplazarNodosConValores(int a,int b) {
    node *antecedenteDelPrimero = antecedentePorValor(a);
    node *antecedenteDelSegundo = antecedentePorValor(b);
    node *primero = nodoPorValor(a);
    node *segundo = nodoPorValor(b);
    node *nextDelPrimero = siguienteNodo(primero);
    node *nextDelSegundo = siguienteNodo(segundo);

    antecedenteDelSegundo->next = primero;
    primero->next = nextDelSegundo;

    antecedenteDelPrimero->next = segundo;
    segundo->next = nextDelPrimero;
} 
```

如您所见，我创建了六个变量。两个节点。每个节点之前的节点。以及每个节点之后的节点。

然后，我进行交换。

但是，当我尝试打印节点时，交换似乎会产生无限循环。

我的交换基于这个答案：[https ://stackoverflow.com/a/1536011/555690](https://stackoverflow.com/a/1536011/555690)

**编辑**：其他功能，根据要求：

```
node *antecedentePorValor(int x) {
    node *resultado = NULL;
    for (int i = 0; i < counter; ++i) {
        resultado = siguienteNodo(resultado);
        if (siguienteNodo(resultado)) {
            if (siguienteNodo(resultado)->data == x) {
                break;
            }
        }
    }
    return resultado;
}

node *nodoPorValor(int x) {
    node *resultado = head;
    for (int i = 1; i < counter; ++i) {
        if (resultado->data == x) {
            break;
        }
        resultado = resultado->next;
    }
    return resultado;
}

node *siguienteNodo(node *nodo) {
    node *resultado;
    if (nodo) {
        resultado = nodo->next;
    }else{
        resultado = head;
    }
    return resultado;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:58:41.717

有几种情况你需要小心

1.  具有值`b`的节点紧跟在具有值的节点之后，`a`反之亦然
2.  值为`a`or`b`的节点是列表中的第一个节点
3.  `a`具有值或值的节点不止一个`b`

如果没有看到函数`antecedentePorValor`和`nodoPorValor`. 案例 #1 有一个错误。

编辑：为了说明为什么 #1 存在错误，假设 node(a) 指向 node(b)，然后

```
void reemplazarNodosConValores(int a,int b) {
    node *antecedenteDelPrimero = antecedentePorValor(a); // node preceding a
    node *antecedenteDelSegundo = antecedentePorValor(b); // node preceding b (a)
    node *primero = nodoPorValor(a);                      // node that contains a
    node *segundo = nodoPorValor(b);                      // node that contains b
    node *nextDelPrimero = siguienteNodo(primero);        // node following a (b)
    node *nextDelSegundo = siguienteNodo(segundo);        // node following b

    antecedenteDelSegundo->next = primero; // a->next = a
    primero->next = nextDelSegundo;        // a->next = node following b

    antecedenteDelPrimero->next = segundo; // preva->next = b
    segundo->next = nextDelPrimero;        // b->next = b <<== b points to self!!
} 
```

在评论中，我使用速记`preva`来表示`antecedenteDelPrimero`和`a`表示`primero`和`b`表示`segundo`。

# objective-c - 如何在 Objective C 的非正式协议中使用方法

> ID：12765666
> 
> 赞同：3
> 
> 时间：2012-10-07T02:42:23.457
> 
> 标签：objective-c, macos, protocols

我正在学习用Objective C编写一个简单的Web Browser Mac App。我有一个简单的文本字段作为地址栏和一个Webview。因此，当我单击链接时页面发生变化时，我希望在文本字段中更新网站地址。

谷歌搜索后，我意识到我可以使用一种方法

```
 didStartProvisionalLoadForFrame 
```

在 WebFrameLoadDelegate 协议中。然后我继续输入

```
@interface AppDelegate : NSObject <NSApplicationDelegate,WebFrameLoadDelegate> 
```

这导致了一个错误。经过进一步搜索，我发现这是由于 WebFrameLoadDelegate 是一个非正式协议。

那么我的问题是：使用非正式协议指定的以下方法的语法是什么？

```
- (void)webView:(WebView *)webView didFinishLoadForFrame:(WebFrame*)frame; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:52:03.593

使用非正式协议，您无需声明符合协议即可实现方法。`WebFrameLoadDelegate`不是类型，只是`NSObject`类别的名称。

它们之所以存在，是因为以前无法​​指定协议中的方法是可选的（`@optional`and`@required`关键字不存在。）当必要的关键字被添加到 Objective-C 时，Apple 开始转向带有可选方法的正式协议，这使得更好的类型安全和自我记录的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T03:08:09.290

如果您手动创建 webview，那么只需将您自己的类设置为委托，如下所示`[webview setDelegate:self]`。但是，如果您改为在 IB 中创建 webview，则可以将委托链接到那里。

[![](../Images/e1e408ac706400ab59a2c7d08927fedf.png)](https://i.stack.imgur.com/m9wcP.png)

一旦您将您的类设置为 webview 的委托，您就可以实现该方法而无需任何额外的代码。

```
- (void)webView:(WebView *)webView didFinishLoadForFrame:(WebFrame*)frame
{
    //Do stuff here.
} 
```

WebView 将在完成加载帧时简单地调用您的方法。

如果你想知道它是如何工作的，这一切都可以追溯到委托的构造。WebView 将检查委托是否为 nil。如果不是，那么它将调用`respondsToSelector:`以检查委托是否已实现委托方法。非正式代表只是一种允许可选协议方法的旧方法，正如@JonathanGrynspan 所述，不应再使用它

如果你不知道，如果你在 IB 中连接它，你不必明确声明你的类确认协议（即使它不是非正式的）。

顺便说一句，如果您正在开发 webview，请查看 Apple 的[开发指南](https://developer.apple.com/library/archive/#documentation/Cocoa/Conceptual/DisplayWebContent/DisplayWebContent.html#//apple_ref/doc/uid/10000164i)。它为您提供了有关创建 webview 基础知识的分步教程，包括何时更改 webview 的 URL 地址。

# javascript - 用于第三方嵌入式小部件的 Google Analytics（分析）

> ID：12765670
> 
> 赞同：3
> 
> 时间：2012-10-07T02:42:35.103
> 
> 标签：javascript, google-analytics, analytics

我已经能够在我们的应用程序中在一定程度上对此进行测试，但是我仍在使用谷歌分析测试水域，看看它是否是应用分析的最佳选择；用于外部嵌入的 javascript。

我能够触发自定义事件和自定义页面视图。但是，我希望看到嵌入了小部件的所有站点上的所有在线用户。它目前显示在线用户，但它使用相对 URL 路径，而不是域或完整路径。

我希望收集的数据点类型是用户与应用程序进行的特定交互，以及可以深入到嵌入发布者的实时统计数据。

有没有人使用谷歌分析进行第三方嵌入的经验？还是有其他更适合这种性质的应用程序分析的服务？

# matlab - 关于在matlab 3D图中将xlabel对齐到轴的中心

> ID：12765674
> 
> 赞同：2
> 
> 时间：2012-10-07T02:43:20.227
> 
> 标签：matlab, plot

我在 matlab 中绘制一些 3D 数据并尝试旋转 xlabel，使其与 xaxis 的方向相同。我将当前 3D 图形的视图固定到某个角度，并且通过跟踪和错误，我找到了旋转标签的正确角度。

```
view(al, ae);  % where al and ae is the parameter for the view I want
theta = 52;    % this angle is obtained by trail and error
xlabel('label at some angle', 'rot', theta) 
```

现在标签指向正确的方向但我发现它不再停留在相应轴的中心，即标签的中心不再与x轴的中心对齐。有没有办法让它们再次对齐？

实际上，我尝试了类似[enter link description here](http://www.mathworks.com/matlabcentral/fileexchange/27450-align-axes-labels-in-3d-plot/content/axesLabelsAlign3D.m)之类的方法，但对于视图来说效果不是很好。通过遵循该链接中的想法，我尝试了类似

```
xf = 1.2*min(get(gca, 'xlim'));   % in my case zero is the middle or the xlim
yf = 1.2*min(get(gca, 'ylim'));   % in my case zero is the middle or the ylim
set(get(gca,'XLabel'),'Position', [0, yf, zf]);
set(get(gca,'YLabel'),'Position', [xf, 0, zf]);
set(get(gca,'xlabel'),'rot',thetax);
set(get(gca,'ylabel'),'rot',thetay);
set(get(gca,'zlabel'),'rot',thetaz); 
```

所以使用上面的代码，我在旋转之前将标签的位置设置在靠近相应轴中心的位置。如果标签只有一个字符，那么它可以工作。但是如果标签很长，那么它将使第一个字符与轴的中心对齐。原因是我没有考虑标签的长度。我知道我应该，但问题是我应该将标签从轴中心偏移多少？我只知道标签的字体大小和总字符数，如何知道标签的实际长度？谢谢。

# iphone - Theos 提出问题

> ID：12765676
> 
> 赞同：2
> 
> 时间：2012-10-07T02:43:26.937
> 
> 标签：iphone, ios, jailbreak

我一直在关注本教程： [http ://brandontreb.com/beginning-jailbroken-ios-development-building-and-deployment/](http://brandontreb.com/beginning-jailbroken-ios-development-building-and-deployment/)

以 foobar 的名称启动应用程序。但是当我输入'make'时，我得到......

```
19:33:14-~/code/theos/foobar$ make
Making all for application foobar...
 Compiling main.m...
 Compiling foobarApplication.mm...
 Compiling RootViewController.mm...
 Linking application foobar...
ld: file is universal (4 slices) but does not contain a(n) armv6 slice:     /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.o for architecture armv6
collect2: ld returned 1 exit status
make[2]: *** [obj/foobar] Error 1
make[1]: *** [internal-application-all_] Error 2
make: *** [foobar.all.application.variables] Error 2 
```

因为我使用的是theos 而不是xcode（虽然安装了4.5，但使用了6.0 SDK），更改构建设置没有帮助。

仅供参考，我正在为 iphone iOS 4.3.3 开发

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T08:41:04.697

这目前是 theos 中的一个已知问题，如果您只能使用 iOS6 SDK 访问 Xcode 4.5，则应将以下内容放在 makefile 的顶部：

```
ARCHS = armv7 
```

如果您可以访问较旧的 SDK，则以下内容将允许您成功编译 armv6：

```
TARGET = iphone:sdkversion 
```

其中 sdkversion 是“4.0”等形式的数字字符串，因此如果您想使用 5.1 SDK（允许您创建 armv6 对象的最新版本），请将以下内容放在 makefile 的顶部：

```
TARGET = iphone:5.1 
```

# android - 在android应用程序中为希伯来语设置从右到左的方向

> ID：12765677
> 
> 赞同：1
> 
> 时间：2012-10-07T02:43:29.007
> 
> 标签：android, hebrew, right-to-left

我用希伯来语写了一个应用程序，但是单词的方向有问题：

这是代码：

```
textView2.setText("יצרן: " + company + "\n");
textView2.append("דגם: " + degem + "\n");
textView2.append("מנוע: " + manoa + "\n");
textView2.append("ק'מ/ליטר: "+  watt + "\n");
textView2.append("נסיעה: " + timeString + " " + timeMedida+"\n"); 
```

我有：

上一页：阿巴特

代替

巴特：יצרן

和

来源：005

代替

时长：500

xml：

```
<TextView
    android:id="@+id/txt_1_delek"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
            android:gravity="center"

    android:layout_marginTop="50sp"
    android:layout_marginRight="100sp"
    android:layout_marginLeft="100sp"
    android:text="myTextView"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T21:42:53.620

万一有人偶然发现这个老问题并正在寻找答案... Amir 的链接指向正确的方向。您需要的是更改文本的基本方向（而不是对齐方式，因此如链接“gravity.RIGHT”中所述，不会有帮助）。在字符串的开头插入“左标记”unicode 字符 \u200F 就可以了。

顺便说一句，只是将它添加为硬编码字符对我不起作用，显然是因为编码问题。我宁愿避免在代码中处理它，所以我只是从 strings.xml 中将字符提取为字符串，让 android 根据需要进行转换，然后附加字符串（在你的情况下为“יצרן:”+ company+“ \n") 实时。

# solr - 设置 Solr 并查询它

> ID：12765679
> 
> 赞同：1
> 
> 时间：2012-10-07T02:44:04.277
> 
> 标签：solr, solrj, solr-query-syntax

我是新手`Solr`。

1.  我找不到合适的文档来帮助我了解我需要添加的所有`solrconfig.xml`内容以及要删除的内容。

2.  我的`SolrDocument`将包含`id, field1, field2`. 在 2 个字段中，我想更新其中的 1 个。我该怎么办？我尝试了一些东西，但它覆盖了整个文档。

3.  `/update`不管用。

我必须从一个类中添加`documents`和检索它们。`Java`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T04:11:14.357

1.  您可以参考[Solr Wiki 获取 Solr Config.xml](http://wiki.apache.org/solr/SolrConfigXml)，这是了解配置选项的一个很好的起点。

2.  Solr 并没有真正的更新概念，它总是删除现有文档并用新文档替换它。几年前就有一个功能请求开放[JIRA-139](https://issues.apache.org/jira/browse/SOLR-139)来解决这个问题，但截至今天它显示修复版本为 4.1。但是[Solr 4.0](http://wiki.apache.org/solr/Solr4.0)有一个新功能`Atomic update`，如果这对您来说非常重要，您可以尝试一下。注意：`Solr 4.0`仍然是 Beta。

3.  '/update' 不工作 -> 你的意思是不工作，因为它正在用新文档替换旧文档，还是你得到错误/异常？

4.  要从 Java 添加和检索文档，您可以使用`SolrJ`. SolrJ 是以编程方式访问 Solr 的 Java 客户端。[SolrJ-Solr 维基](http://wiki.apache.org/solr/Solrj)。

# java - 如何使用 java jdbc 连接到本地 SQL 数据库

> ID：12765681
> 
> 赞同：0
> 
> 时间：2012-10-07T02:44:34.790
> 
> 标签：java, android, sql, sql-server, sql-server-2008

当我尝试这样的事情时：
**Class.forName("com.mysql.jdbc.Driver").newInstance(); DriverManager.getConnection("jdbc:mysql://192.168.2.116:3306/SocialFamilyTree");**

我收到一个错误：
**com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链接失败**

试过：

```
try{
    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
    DriverManager.getConnection("jdbc:sqlserver://localhost:1433");

}catch(Exception e){
    System.out.println("Couldn't get database connection.");
    e.printStackTrace();
} 
```

并得到：

```
Couldn't get database connection.
Oct 06, 2012 11:15:37 PM com.microsoft.sqlserver.jdbc.SQLServerConnection <init> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:03:10.460

如果您尝试连接到 sql server，您的代码是错误的，因为您正在尝试连接到 mysql。

使用 jtds 或 sql server driver 连接 Microsoft SQL Server 2005 JDBC Driver

```
DRIVER CLASS: com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

驱动程序位置：指定 Microsoft SQL Server 驱动程序在您的计算机上的位置。有关详细信息，请参阅 Microsoft SQL Server 驱动程序文档。某些版本的 Microsoft SQL Server 驱动程序需要多个 jar 文件作为驱动程序位置。在这种情况下，只需用分号分隔每个文件位置。

```
JDBC URL FORMAT: jdbc:sqlserver://<server_name>:<port> 
```

Microsoft SQL Server 的默认端口是 1433。通常，如果数据库服务器正在使用默认端口，则可以省略 JDBC url 的 : 值。

例子：

```
jdbc:sqlserver://neptune.acme.com:1433 

jdbc:sqlserver://127.0.0.1:1433 
```

# python - 延迟/调用类属性设置等于方法

> ID：12765684
> 
> 赞同：0
> 
> 时间：2012-10-07T02:45:35.523
> 
> 标签：python, django

# 问题

是否可以实例化一个对象，将该对象的属性设置为类方法，但延迟调用该方法，同时启用对该属性的访问（`obj.name`）而不必将其作为方法调用（`obj.name()`）

## 背景

我有一个实例化对象的类。该实例化的一部分是设置一个等于数据库对象的属性，这需要查找。当实例化许多对象（数百个）时，这种查找可能会很慢。

我想以某种方式延迟查找，直到需要该信息。但是，我不想调用对象上的方法来进行查找，我想简单地访问属性 ( `object.attribute`)

## 简单的例子/到目前为止我尝试过的

```
class Article(object):

    def __init__(self, id, author):
        self.id = id
        # Note the lack of () after lookup_author below
        self.author = self.lookup_author

        # Temporary holding place for author data
        self.__author = author

    def lookup_author(self):
        # A lookup that would be nice to delay / run as needed
        # Would be something like Author.objects.get(author=self.__author)
        # but set to something simple for this example
        return '<Author: John Doe>'

article1 = Article(1, 'John Doe')

# Returns the bound method
# E.g. <bound method Article.lookup_author of <__main__.Article object at 0x100498950>>
print article1.author

# Calls the method properly, however, you have to use the method calling
# notation of .state() versus .state which is more natural and expected
# for attributes
# Returns <Author: John Doe>
print article1.author() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:04:45.037

使用属性，您可以`article1.author`实际调用`self.lookup_author`并返回它。

输出：

```
John Doe
<Author: John Doe>

bob
<Author: bob> 
```

代码：

```
class Article(object):
    def __init__(self, id, author):
        self.id = id
        self.__author = None

    def lookup_author(self):
        return "John Doe"

    def __str__(self):
        return "<Author: {}>".format(self.author)

    @property
    def author(self):
        if self.__author is None:
            self.__author = self.lookup_author()
        return self.__author

    @author.setter
    def author(self,name):
        self.__author = name

article1 = Article(1, 'John Doe')
print "\n", article1.author
print article1

article1.author = 'bob'
print "\n", article1.author
print article1 
```

出于某种原因，如果需要，`__author`在使用 getter 之前甚至不必存在。您可以使用异常来做到这一点。

# javascript - 种子随机的文本输入

> ID：12765685
> 
> 赞同：2
> 
> 时间：2012-10-07T02:45:39.497
> 
> 标签：javascript, random, theory, seeding

我将如何从用户那里获取文本输入（他们的键盘允许他们输入的任何内容），并将其传输到一个数字？

从那里，我可能会获取该数字，并将其输入到种子随机数生成器中。

**我从 Minecraft 的随机种子选项中得到了这个想法，但我在上面找不到任何东西。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:52:30.473

可能有更有趣的算法，但这只是将字符转换为整数并将其乘以位置以加权它们（因此“abc”与“cba”不同）。你也可以使用某种散列函数，但我认为这可能是过度的。​</p>

```
var input = 'askljfhasjfh', num = 0;

for (var i = 0, len = input.length; i < len; ++i) {
  num += input.charCodeAt(i) * (i + 1);
}

console.log(num);
```

但请记住，您不能`Math.random()`在 Javascript 中为函数播种，它始终只使用当前日期作为种子。

# functional-programming - VHDL 或 Verilog 中的高阶函数

> ID：12765688
> 
> 赞同：3
> 
> 时间：2012-10-07T02:46:10.400
> 
> 标签：functional-programming, vhdl, verilog, higher-order-functions

我一直在使用更多函数式语言进行编程，并且已经开始欣赏元组之类的东西，以及地图和折叠/聚合之类的高阶函数。VHDL 或 Verilog 是否有任何这些结构？

看起来 HDL 将是这类纯组合器的完美应用——虽然这些组合器仅由 Haskell、F#、LINQ 等中的命令式进程模拟，但硬件实际上*是*时钟节拍之间的纯功能。

乍一看，这两种语言看起来都很*奇怪*。对我来说，命令式 CPU 应用程序开始用函数式语言编写，而函数式 HDL 代码以命令式风格编写，这似乎很奇怪。

无论如何，问题是，有没有办法做一些简单的事情，比如

```
divByThreeCount = count (\x -> x `mod` 3 == 0) myArray 
```

或者

```
myArray2 = map (\x -> x `mod` 3) myArray 
```

或者更好的是让我用这些语言中的任何一种递归地定义我自己的高级构造？如果不是，哪种语言最接近？

这两种语言似乎都计划朝着这个方向取得进展吗？或者这真的没有我作为 HDL 新手所想的那么有用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:22:51.980

我认为您是对的，HDL 的命令式风格与组合电路的更多功能方面之间存在冲突。用本质上是线性的语言来描述并行电路很奇怪，但我认为功能齐全的 HDL 将是一场灾难。

函数式语言的问题（我发现）是很容易编写占用大量资源的代码，无论是时间、内存还是处理能力。这就是他们的力量；它们可以非常简洁地表达复杂性，但它们这样做是以牺牲资源管理为代价的。把它放在一个 HDL 中，我认为在综合时你会有很多大型、耗电的设计。

以您的地图为例：

```
myArray2 = map (\x -> x `mod` 3) myArray 
```

你想怎么合成？对我来说，您已经为数组的每个元素描述了一个模运算符。忽略模数并不便宜的事实，这是您的意图，如果不是，您将如何更改它？如果我开始以某种方式分解该函数，以便我可以说“实例化一个运算符并多次使用它”，我就会失去函数式语言的很多力量。

...然后我们得到了保留状态。保留状态在硬件中无处不在。你需要它。您当然不会使用纯粹的函数式语言。

也就是说，不要丢弃你的函数式设计模式。组合过程 (VHDL) 和“始终块” (Verilog) 可以被视为将自身应用于其输入处呈现的数据的函数。管道可以被视为功能链。通常，您构建设计的方式看起来很实用，并且可以与 Erlang 中流行的“Actor”设计模式共享很多。

那么有什么东西可以从函数式编程中学习吗？当然。我是否希望 VHDL 和 Verilog 从函数式语言中获得更多？有时。问题是函数式语言太快太高了。如果我无法区分“多次使用 f() 的一个实例”和“使用 f() 的多个实例”，那么它就不能做硬件描述语言必须做的事情......描述硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-24T09:48:03.127

查看[http://clash-lang.org](http://clash-lang.org)以获取转换为 VHDL/Verilog 的高阶语言的示例。它允许函数作为参数传递、currying 等，甚至是一组有限的递归数据结构 ( `Vec`)。正如您所期望的那样，纯`moore`函数在给定步进/输出函数和开始状态的情况下实例化有状态的摩尔机。它有这个签名：

```
moore :: (s -> i -> s) -> (s -> o) -> s -> Signal i -> Signal o 
```

`Signal`s 对时序逻辑中随时间演变的值进行建模。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T04:55:09.677

BlueSpec 被一个小型 com 使用。只有少数人知道 - 英特尔

它是 SystemVerilog (SV) 的扩展，称为 BSV

但它不是开放的——我认为你可以在不支付 BlueSpec.com 大笔资金的情况下尝试使用甚至学习它

还有Xilinx用的Lava，不知道能不能直接用。

注意：在 Vhdl 函数中（也可能是 Verilog）不能有时间延迟（你不能要求函数等待 clk 事件）Vhdl 有一个标准。库。对于复数。卡尔。但在 Vhdl 中，您可以更改或重载系统函数，如 add (“+”) 并定义您的实现。您可以声明向量或矩阵添加 sub mul 或 div (+ - * /) 函数，使用通用大小 (any) 和递归声明 - 大多数合成器将“理解您”并按照您的要求进行操作。

# python - 用python解析一个HTML页面

> ID：12765694
> 
> 赞同：1
> 
> 时间：2012-10-07T02:46:57.297
> 
> 标签：python, html-parsing

我想在这样的网站源代码中进行解析

```
If (something="<BODY>"):
 while (something!="</BODY>"):
  if (something="https")   :
    put the word on a list 
```

**问题是我不知道解析的方法**（我的意思是我用来阅读源代码的函数）。我在一个对象中有源代码，即`MyObj`

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:49:41.210

使用 HTML 解析库来解析 HTML。两个流行的好方法是[beautifulsoup](http://www.crummy.com/software/BeautifulSoup/)和[lxml](http://lxml.de/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T02:49:39.510

[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)是我用过的最好的 HTML 解析库，来看看吧。

# java - 静态方法不能运行其他方法？

> ID：12765696
> 
> 赞同：0
> 
> 时间：2012-10-07T02:47:20.867
> 
> 标签：java, methods, static

所以，我正在尝试制作一个非常简单的程序。

```
public class test {
    public static void main (String args[]){
        System.out.println("Yum! Pi!");
        int pi = 1;
        varCreate();
        varAdd();
    }
    public void varCreate () {
        pi++;
    }
    public void varAdd () {
        System.out.println(pi);
    }
} 
```

它不会让我这样做，它说的是：“无法从类型测试中对非静态方法 varAdd 进行静态引用”我确信这是一个非常简单的错误，我只是找不到它。感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:49:17.197

静态方法只能调用静态方法。

要么使函数成为静态函数，要么创建一个实例变量来调用这些方法。

```
public class test {
    static int pi = 1;
    public static void main (String args[]){
        System.out.println("Yum! Pi!");
        varCreate();
        varAdd();
    }
    public static void varCreate () {
        pi++;
    }
    public static void varAdd () {
        System.out.println(pi);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T03:11:55.847

您需要实例化您的 Test 类以使用（非静态）方法：

```
class Test {
    int pi = 1;

    public static void main (String args[]){
        System.out.println("Yum! Pi!");
        Test t = new Test();
        t.varCreate();
        t.varAdd();
    }
    public void varCreate () {
        pi++;
    }
    public void varAdd () {
        System.out.println(pi);
    }
} 
```

`

# jquery - jQuery查找文本字符串并添加类

> ID：12765697
> 
> 赞同：0
> 
> 时间：2012-10-07T02:47:28.410
> 
> 标签：jquery, addclass

好的，我正在尝试查找某些用户的文本字符串，例如 TheGamer、runawayhorses 等。当代码在 td> 中找到这些文本字符串时，它会添加类来更改它的背景颜色......它给了我很多问题。

```
$(window).ready(function () {
$('.post > span > a:contains("TheGamer,runawayhorses")').next('tr').parent('tr').addClass      ('manager');
}); 
```

生成的 HTML=

```
<tbody>
<tr align="right">
<tr>
<tr class="post">
<td class="row1" width="150" valign="top">
<span class="name">
<strong>
<a href="/u1">
<span style="color:#09B300">
<strong>TheGamer</strong>
</span>
</a>
</strong>
</span>
<br>
<span class="gensmall toggle" style="cursor:pointer;">View More</span>
<div id="hidden" class="hidden" style="padding: 1px; width: 150px; height: 50px; background: none repeat scroll 0% 0% rgb(196, 196, 196); border: 3px solid rgb(0, 0, 0); position: absolute; z-index: 999; display: none;">
<span class="postdetails poster-profile"></span>
<br>
<span>Admin</span>
<br>
<span>
<span style="white-space:nowrap;">
<img title="" alt="" src="http://i45.servimg.com/u/f45/17/65/32/03/title113.gif">
<span style="white-space:nowrap;">
10
<br>
<span style="white-space:nowrap;">
20
 <br>
 <span style="white-space:nowrap;">
  2012-07-10
<br>
<span style="white-space:nowrap;">
23
 <br>
 <span style="white-space:nowrap;">
New York
 <br>
 <br>
 <img style="width:150px;height:1px" alt="" src="http://illiweb.com/fa/empty.gif">
 </td>
 <td class="row1" width="100%" valign="top" height="28" colspan="2">
 </tr>
 <tr>
 <tr class="post">
 <td class="row2" width="150" valign="top">
 <span class="name">
 <strong>
 <a href="/u3">
 <span style="color:#09B300">
  <strong>NOT USERS</strong>
 </span>
 </a>
 </strong>
 </span>
 <br>
  <span class="gensmall toggle" style="cursor:pointer;">View More</span> 
```

生成的 HMTL 显示的是，带有 post 类的 tr 应该将背景颜色更改为我想要的颜色。.row1 和 .row2 已经有背景颜色，所以我相信我的 CSS 在颜色之后必须有一个 !important ......

请提供任何建议或示例。我不想更改该字段中的所有 tr，只更改带有我提供的文本字符串的那些。我不能只进入生成的 HTML 的原因是因为这是一个论坛板，下面的信息由 php 占位符解析。这就是我需要 jQuery 的原因

# c# - WinRT (C#) 上的 System.Diagnostic.Process 的等价物是什么？

> ID：12765699
> 
> 赞同：5
> 
> 时间：2012-10-07T02:47:35.703
> 
> 标签：c#, process, windows-8, windows-runtime

我需要从我的 WinRT 应用程序启动几个命令，就像它是命令控制台一样，为了做到这一点，在不是 WinRT 应用程序上，要使用的类是 System.Diagnostic.Process 但在 Win RT 上他的类不是可用，是否有任何等效的类或方法可以使用？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T07:43:36.920

正如 Marylin 已经说过的，Windows Store Apps 不能直接启动其他进程。您只能使用 Launcher.LaunchFileAsync 为传递的文件具有的文件类型（文件结尾）启动默认应用程序。使用它，您可以在 Windows 中定义像 .process 这样的自定义文件类型，并将其处理程序应用程序设置为您编写的无窗口桌面应用程序。桌面应用程序读取进程文件，该文件包含要启动的应用程序的路径，并使用进程启动它。

这个技巧肯定会通过认证失败，但在您部署到跳过商店的企业的应用程序中可能很有用。如果启动桌面应用程序，问题将是 Windows 应用商店应用程序设置为后台。我认为这是 Microsoft 不允许将其用于经过认证的应用程序的原因之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T02:51:35.053

您无法从 Windows 应用商店应用程序中执行此操作 - 这些应用程序已被沙盒化并且无权访问其他进程。更多细节[在这里](http://blogs.msdn.com/b/b8/archive/2012/05/17/delivering-reliable-and-trustworthy-metro-style-apps.aspx)。

# java - 检测首次运行

> ID：12765700
> 
> 赞同：1
> 
> 时间：2012-10-07T02:47:51.493
> 
> 标签：java, android, oncreate

我正在尝试使用以下代码检测我的应用程序是否曾经运行过：

（这是在我的默认 Android 活动中）

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    if (savedInstanceState == null) {
        Log.w("activity", "first time");
        setContentView(R.layout.activity_clean_weather);
    } else {

        Log.w("activity", "second time");
        setContentView(R.layout.activity_clean_weather);
    }

 } 
```

当我第一次运行该应用程序时，它说第一次，当我第二次运行它时，第一次，第三次，第一次......

我使用的是实际的 Android 设备，并且每次都没有使用运行按钮。我使用 Eclipse 运行按钮运行应用程序一次，然后关闭应用程序并按下手机上的图标。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T02:53:46.167

`savedInstanceState`更多的是用于在状态之间切换，例如暂停/恢复之类的事情。它也必须始终由您创建。

在这种情况下，您想要的是[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html).

像这样的东西：

```
public static final String PREFS_NAME = "MyPrefsFile"; // Name of prefs file; don't change this after it's saved something

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); // Get preferences file (0 = no option flags set)
    boolean firstRun = settings.getBoolean("firstRun", true); // Is it first run? If not specified, use "true"

    if (firstRun) {
        Log.w("activity", "first time");
        setContentView(R.layout.activity_clean_weather);

        SharedPreferences.Editor editor = settings.edit(); // Open the editor for our settings
        editor.putBoolean("firstRun", false); // It is no longer the first run
        editor.commit(); // Save all changed settings
    } else {
        Log.w("activity", "second time");
        setContentView(R.layout.activity_clean_weather);
    }

} 
```

我基本上直接从[Storage Options 的文档中获取](http://developer.android.com/guide/topics/data/data-storage.html#pref)了这段代码，并将其应用于您的情况。早点学习是个好概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:51:49.850

您可以使用自定义的共享偏好来归档您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:54:31.523

事实是，它`savedInstanceState`保存跨活动的持久数据。因此，如果您重新启动应用程序，`savedInstanceState`将在运行中为空。您应该使用一个`Preference`或一些数据库条目来跟踪您的第一次运行。我自己`SharedPreference`为此目的使用 a 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T02:54:52.810

`savedInstanceState`如果应用程序尚未加载到内存中，则将为 null。如果您想检测应用程序是否第一次运行，您必须应用不同的技术，例如使用 sharedPrefs / DB 来存储第一次运行的属性。

即检查属性“firstRun”的sharedPrefs

如果存在，那么它不是第一次运行

否则这是第一次运行

将 firstRun 属性设置为 true

# java - 为什么 java.lang.Math 扩展 java.lang.Object？

> ID：12765701
> 
> 赞同：-2
> 
> 时间：2012-10-07T02:47:57.950
> 
> 标签：java, inheritance

根据[Math](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)类的 Java API，Math 扩展了 Object 类：

```
public final class Math extends Object 
```

但是，Math 不继承 Object 的方法，并且您也不能构造 Math 对象（编辑：此语句是错误的，部分是错误的；见下文）。

我的问题是为什么要这样做？如果它是一个对象，那么它应该具有 Object 的基本方法。如果它不是一个对象，那么我觉得它不应该扩展 Object.

而且，假设扩展 Object 有充分的理由，它是如何完成的？换句话说，继承的方法和构造函数是如何被抑制的？

数学是我心目中这种静态定义类最重要的例子（我猜你会这么称呼它？），但这个问题也可能适用于具有类似目的的类。

编辑：所以我知道所有类都隐式扩展 Object. 困扰我的是，对我来说，理论上“对象”的概念——具有状态和相关功能的东西——与这里正在做的事情之间存在逻辑脱节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:49:24.860

对象是一切的超类。所有类都扩展 Object

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T02:49:56.623

`Math` *确实*继承了`Object`的方法。Java 中的每个类最终*都必须*继承自`Object`. 但既然你不能构造`Math`对象，那也没关系。这些方法是继承的，但无法构造实例，您永远无法从`Math`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T02:54:30.860

每个类都隐式扩展`Object`，除非它们扩展另一个类（Java 不允许多重继承）。

仍然！通过扩展另一个类，你最终会扩展`Object`，因为最后一个不扩展另一个特定类的类扩展了`Object`。

这个“默认继承”背后的概念可以直接从`Object`'s JavaDoc 中提取：

> 类对象是类层次结构的根。每个类都有 Object 作为超类。所有对象，包括数组，都实现了这个类的方法。

*编辑：* Math 确实继承`Object`的方法。它不会强行覆盖它们，并且调用派生到超类的实现。

你应该注意`Math`课堂的一个重要方面。它定义的常量和方法主要是静态的。数学函数不依赖于类的特定实例，因为这些计算与上下文无关。

您没有特别的理由来创建 Math 类的实例，这就是它的构造函数不可见的原因。您不能这样做`Math m = new Math()`，这就是为什么您看不到诸如`equals`or之类的方法的原因`hashcode`。特别是由于该类是最终类且无法扩展，因此您无法创建定义它们的子类。恕我直言，这毫无意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T02:51:41.497

`Object`是每个java类的超类。你错了，它`Math`确实继承了对象的方法。

如果您想了解更多信息，请查看源代码。

[http://www.docjar.com/html/api/java/lang/Math.java.html](http://www.docjar.com/html/api/java/lang/Math.java.html)

# javascript - 为什么将图像从画布保存到 Android 上的本地系统不起作用？

> ID：12765702
> 
> 赞同：2
> 
> 时间：2012-10-07T02:48:09.703
> 
> 标签：javascript, android, jquery, canvas, local-storage

我已经引用[了 this](http://www.nihilogic.dk/labs/canvas2image/)和[this](https://stackoverflow.com/questions/9926152/phonegap-android-how-to-save-the-capture-image-from-camera-in-the-sd-card)，但我仍然有疑问为什么这里的代码不起作用？

```
var canvas;
$(document).ready(function(){
"use strict";
$(' #test_local_storage_btn ').bind('click', function(){
"use strict";
canvas= document.getElementById('drawing_plate');

alert("test_local_storage_btn");
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, get_FileSys,    request_fail);
});//function and bind. 

});//function and ready. 

function request_fail(){
 "use strict";
 alert("request FS failed");
}

function get_FileSys(fileSystem){
"use strict";
alert("request file system OK");
fileSystem.root.getFile("/sdcard/story_repository/test.png",{create:    true, exclusive: false},get_file_entry,get_file_fail);

}
function get_file_fail(){}
function get_file_entry(fileEntry){
"use strict";
alert("Get file entry successfully.");
fileEntry.createWriter(gotFileWriter,create_writer_fail);
} 

function gotFileWriter(writer){
"use strict";
writer.onwrittened= function (evt){
writer.write(canvas.toDataURL("image/png"));
};
}

function create_writer_fail(){
alert("create_writer_fail");
} 
```

我认为这个仪器**writer.write(canvas.toDataURL("image/png"));** 应该工作，但它没有。
我不明白的是**canvas.toDataURL("image/png")**返回一个字符串，它应该写入文件中。但是什么都没有创建...根据链接[this](https://stackoverflow.com/questions/9926152/phonegap-android-how-to-save-the-capture-image-from-camera-in-the-sd-card)，变量 photo 返回它的值（photo.value）并且它可以工作。但是现在，当我做类似的事情时，为什么它不起作用？我只是想要一个解释。感谢你！！

**更新：我在 PhoneGap 上工作，[但这](http://www.nihilogic.dk/labs/canvas2image/)不起作用。** **/ **

# c - 从 C 上的文本文件创建双向链表

> ID：12765713
> 
> 赞同：1
> 
> 时间：2012-10-07T02:50:01.930
> 
> 标签：c, scanf, doubly-linked-list

我必须从一个文本文件中创建一个双向链表，其中每一行都有时间和温度。例如每一行是这样的：12:48 23.69

所以我无法将数据放入双向链表。我不知道如何实现它。所以我做了一个元素的 typedef 结构的数组，并希望我可以从数组的第一个元素开始，然后将下一个指向数组的第二个元素。这就是我所拥有的...

所以这是我的双向链表头文件：

```
#include<stdio.h>
typedef struct tempdata_{

    int *hour;
    int *min;
    int *temp;
    struct tempdata_ *next;
    struct tempdata_ *prev;
}tempdata;

teypdef struct templist_{

    tempdata *head;
    tempdata *tail;
    int size;
}templist; 
```

`

这是我的主文件：

```
 #include <stdio.h>
 #include "linkedlist.h"

int main ( int argc, char *argv[] )
 {
    FILE *ifp, *ofp;
    //char outputFilename[] = argv[2];
    int SIZE = 1;
    tempdata tempdata1[100];
    tempdata *temp, *current = NULL;

    if ( argc != 2 ) /* argc should be 3 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: %s filename", argv[0] );
    }
    else 
    {
        // We assume argv[1] is a filename to open
        ifp = fopen( argv[1], "r" );

        /* fopen returns 0, the NULL pointer, on failure */
        if ( ifp == 0 )
        {
             printf( "Could not open file\n" );
        }
        else 
        {
            //ofp = fopen(outputFilename, "w");

            /* reads the hours, min, tempeture integers and temperature decimals and
            prints them out on the screen and on the output file that is given.
            we dont need this printing function but I just left to have the       function do something*/

            while (fscanf(ifp, "%d:%d %d.%d ", &tempdata1[SIZE].hour, &tempdata1[SIZE].min, &tempdata1[SIZE].tempI, &tempdata1[SIZE].tempD) != EOF) {
                 printf("the tempeture is  %d.%d at %d:%d\n", tempdata1[SIZE].tempI, tempdata1[SIZE].tempD, tempdata1[SIZE].hour, tempdata1[SIZE].min);

                    /*fprintf(ofp, "the tempeture is  %d.%d at %d:%d\n", tempdata1[SIZE].tempI, tempdata1[SIZE].tempD, tempdata1[SIZE].hour, tempdata1[SIZE].min);*/
                SIZE++;
 }

 fclose(ifp);
 //fclose(ofp);

        }
    }
    getchar();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:00:41.043

您想要`int`而不是`int *`在您的数据结构中，并且温度应该是 a`float`或`double`而不是 an `int`（这大大简化了输入；否则，当您使用两个整数输入温度时，正确处理 26.09 和 26.9 是相当困难的）。

```
typedef struct tempdata tempdata;

struct tempdata
{
    int       hour;
    int       min;
    float     temp;
    tempdata *next;
    tempdata *prev;
}; 
```

如果没有错字，您的标题会更有说服力：

```
typedef struct templist templist;

struct templist
{
    tempdata *head;
    tempdata *tail;
    int size;
} templist; 
```

拥有一组`tempdata`结构实际上比双向链表更明智，但我担心它会破坏练习的目标。您可能应该根据需要动态分配结构。我会使用`fgets()`plus `sscanf()`，但您正在检查结果`fscanf()`- 这很好 - 但如果数据格式错误，您可能会卡住，因为文件不在 EOF 但不包含`fscanf()`需要的数字。您应该检查返回值是否为 3（每个转换的字段一个），如果不是，则中断循环。

要创建一个列表，您将需要一个类型的变量`templist`，并适当地初始化。

我根据你的大纲组装了下面的程序。给定数据文件：

```
12:29 26.34
13:32 28.23
14:20 28.56
15:30 29.10
16:18 30.45
17:20 28.12
18:20 26.98
19:35 24.12 
```

我得到的输出是：

```
Data: 12:29  26.34
Data: 13:32  28.23
Data: 14:20  28.56
Data: 15:30  29.10
Data: 16:18  30.45
Data: 17:20  28.12
Data: 18:20  26.98
Data: 19:35  24.12

Data entry complete:
Head: 0x102800BB0, Tail: 0x102800C90, Size: 8
Temp: 0x102800BB0: 12:29  26.34
Temp: 0x102800BD0: 13:32  28.23
Temp: 0x102800BF0: 14:20  28.56
Temp: 0x102800C10: 15:30  29.10
Temp: 0x102800C30: 16:18  30.45
Temp: 0x102800C50: 17:20  28.12
Temp: 0x102800C70: 18:20  26.98
Temp: 0x102800C90: 19:35  24.12 
```

### 代码

```
#include <assert.h>
#include <errno.h>
#include <inttypes.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct tempdata tempdata;

struct tempdata
{
    int       hour;
    int       min;
    float     temp;
    tempdata *next;
    tempdata *prev;
};

typedef struct templist templist;

struct templist
{
    tempdata *head;
    tempdata *tail;
    int size;
};

static void add_to_list(templist *list, tempdata *new_temp)
{
    assert(list != 0);
    assert(list->size >= 0);
    assert((list->head == 0 && list->tail == 0 && list->size == 0) ||
           (list->head != 0 && list->tail != 0 && list->size != 0));
    new_temp->prev = list->tail;
    new_temp->next = 0;
    list->size++;
    if (list->head == 0)
        list->head = new_temp;          /* New list */
    else
        list->tail->next = new_temp;    /* Add to tail of list */
    list->tail = new_temp;
}

static void print_temp(const tempdata *data)
{
    printf("%d:%d %6.2f\n", data->hour, data->min, data->temp);
}

static void print_list(const templist *list)
{
    const tempdata *data;
    assert(list != 0);
    assert(list->size >= 0);
    assert((list->head == 0 && list->tail == 0 && list->size == 0) ||
           (list->head != 0 && list->tail != 0 && list->size != 0));
    printf("Head: 0x%" PRIXPTR ", Tail: 0x%" PRIXPTR ", Size: %d\n",
            (uintptr_t)list->head, (uintptr_t)list->tail, list->size);
    for (data = list->head; data != 0; data = data->next)
    {
        printf("Temp: 0x%" PRIXPTR ": ", (uintptr_t)data);
        print_temp(data);
    }
}

int main(int argc, char **argv)
{
    FILE *ifp;
    templist list = { NULL, NULL, 0 };
    char line[2048];

    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s filename\n", argv[0]);
        return(EXIT_FAILURE);
    }

    ifp = fopen(argv[1], "r");

    if (ifp == 0)
    {
        fprintf(stderr, "%s: could not open file %s (%d: %s)\n", argv[0], argv[1], errno, strerror(errno));
        return(EXIT_FAILURE);
    }

    while (fgets(line, sizeof(line), ifp) != 0)
    {
        tempdata  temp_val;
        tempdata *new_temp;

        if (sscanf(line, "%d:%d %f", &temp_val.hour, &temp_val.min, &temp_val.temp) != 3)
        {
            fprintf(stderr, "%s: failed to scan line - %s", argv[0], line);
            return(EXIT_FAILURE);
        }
        printf("Data: ");
        print_temp(&temp_val);
        if ((new_temp = malloc(sizeof(*new_temp))) == 0)
        {
            fprintf(stderr, "%s: failed to allocate memory (%zu bytes)\n", argv[0], sizeof(*new_temp));
            return(EXIT_FAILURE);
        }
        new_temp->hour = temp_val.hour;
        new_temp->min  = temp_val.min;
        new_temp->temp = temp_val.temp;
        new_temp->next = 0;
        new_temp->prev = 0;
        add_to_list(&list, new_temp);
        /*print_list(&list);*/
    }
    fclose(ifp);

    printf("\nData entry complete:\n");

    print_list(&list);
    return(EXIT_SUCCESS);
} 
```

# php - 为什么用于排序的 foreach 循环一结束，多维子数组的排序顺序就会恢复？

> ID：12765714
> 
> 赞同：3
> 
> 时间：2012-10-07T02:50:16.560
> 
> 标签：php, arrays, multidimensional-array, sorting

我在 PHP 中有一个非常奇怪的与数组排序相关的问题，这让我完全发疯。我已经用谷歌搜索了几个小时，但仍然没有任何迹象表明其他人有这个问题，或者这应该发生在开始，所以这个谜团的解决方案将不胜感激！

用尽可能少的词来描述问题/问题：当使用 foreach 循环根据多层深度嵌套数组中的值对数组进行排序时，一旦执行离开循环，结果数组排序顺序就会恢复，即使它在循环内工作正常。为什么会这样，我该如何解决？

这是我的问题的示例代码，希望它比上面的句子更清楚：

```
$top_level_array = array('key_1' => array('sub_array' => array('sub_sub_array_1' => array(1),
                                                               'sub_sub_array_2' => array(3),
                                                               'sub_sub_array_3' => array(2)
                                                              )
                                         )
                        );

function mycmp($arr_1, $arr_2)
{
    if ($arr_1[0] == $arr_2[0])
    {
        return 0;
    }
    return ($arr_1[0] < $arr_2[0]) ? -1 : 1;
}

foreach($top_level_array as $current_top_level_member)
{
    //This loop will only have one iteration, but never mind that...
    print("Inside loop before sort operation:\n\n");
    print_r($current_top_level_member['sub_array']);

    uasort($current_top_level_member['sub_array'], 'mycmp');

    print("\nInside loop after sort operation:\n\n");
    print_r($current_top_level_member['sub_array']);
}
print("\nOutside of loop (i.e. after all sort operations finished):\n\n");
print_r($top_level_array); 
```

其输出如下：

```
Inside loop before sort operation:

Array
(
    [sub_sub_array_1] => Array
        (
            [0] => 1
        )

    [sub_sub_array_2] => Array
        (
            [0] => 3
        )

    [sub_sub_array_3] => Array
        (
            [0] => 2
        )

)

Inside loop after sort operation:

Array
(
    [sub_sub_array_1] => Array
        (
            [0] => 1
        )

    [sub_sub_array_3] => Array
        (
            [0] => 2
        )

    [sub_sub_array_2] => Array
        (
            [0] => 3
        )

)

Outside of loop (i.e. after all sort operations finished):

Array
(
    [key_1] => Array
        (
            [sub_array] => Array
                (
                    [sub_sub_array_1] => Array
                        (
                            [0] => 1
                        )

                    [sub_sub_array_2] => Array
                        (
                            [0] => 3
                        )

                    [sub_sub_array_3] => Array
                        (
                            [0] => 2
                        )

                )

        )

) 
```

如您所见，在循环内的排序操作（如预期的那样）之前排序顺序是“错误的”（即不是按最内层数组中的所需值排序），然后在循环内的排序操作之后变为“正确” （如预期的那样）。

到现在为止还挺好。

但是，一旦我们再次离开循环，顺序突然恢复到原来的状态，好像排序循环根本没有执行？！？

这是怎么发生的，那么我将如何以所需的方式对这个数组进行排序？

我的印象是，无论是 foreach 循环还是 uasort() 函数都不是在相关项目的单独实例上运行（而是在引用上，即就地），但上面的结果似乎表明不是这样？如果是这样，我将如何能够执行所需的排序操作？

（为什么整个互联网上除了我以外的其他人似乎都没有这个问题？）

PS。别管这个例子中要排序的奇怪数组的设计背后的原因，它当然只是一个更复杂代码中实际问题的简化 PoC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T03:03:57.767

您的问题是对 PHP 如何在 foreach 构造中提供“价值”的误解。

```
foreach($top_level_array as $current_top_level_member) 
```

变量 $current_top_level_member 是数组中值的副本，而不是对 $top_level_array 内部的引用。因此，您的所有工作都发生在副本上，并在循环完成后被丢弃。（实际上它在 $current_top_level_member 变量中，但 $top_level_array 永远不会看到更改。）

你想要一个参考：

```
foreach($top_level_array as $key => $value)
{
    $current_top_level_member =& $top_level_array[$key]; 
```

**编辑：**

您还可以使用`foreach`按引用表示法（air4x 的帽子提示）来避免额外的分配。请注意，如果您正在使用对象数组，它们已经通过引用传递。

```
foreach($top_level_array as &$current_top_level_member) 
```

要回答您关于为什么 PHP 默认使用副本而不是引用的问题，这仅仅是因为语言的规则。标量值和数组按值分配，除非使用`&`前缀，并且对象总是按引用分配（[从 PHP 5 开始](http://www.php.net/manual/en/language.references.whatdo.php)）。这可能是由于普遍的共识，即使用所有期望对象的副本通常会更好。但是——它并不像你想象的那样慢。PHP 使用一种称为写时复制的惰性副本，它实际上是一个只读引用。在第一次写入时，会制作副本。

> PHP 使用惰性复制机制（也称为写时复制），该机制在修改变量之前不会实际创建变量的副本。
> 
> 来源：[http ://www.thedeveloperday.com/php-lazy-copy/](http://www.thedeveloperday.com/php-lazy-copy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:46:50.067

您可以在`&`之前添加`$current_top_level_member`并将其用作对原始数组中变量的引用。然后您将对原始数组进行更改。

```
foreach ($top_level_array as &$current_top_level_member) { 
```

# iphone - XCode为不同的行编辑UITableView textFields

> ID：12765725
> 
> 赞同：0
> 
> 时间：2012-10-07T02:52:15.787
> 
> 标签：iphone, xcode, ios5, uitableview

我有一个程序，它显示一个只有 1 个单元格行的表格，其中客户的信息要使用 2 个文本字段键入。（如下图）

![第一张截图](../Images/cc49a123a2671e60c7ac6f5937e30305.png)

用户可以单击“添加”符号为他们的兴趣添加新行。

当用户选择主类别时，子类别应自动填充信息。

我的问题是，当我说 2 行单元格时，我无法使用 mainCategory 中的选择自动填充第二个子类别，因为我不知道如何识别它们。

我已经在这个视图中实现了 UITableView/UIPickerView 委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:18:57.143

使用文本字段的方便`tag`属性。您可以在 Xcode 中的 Interface Builder 中设置这些以区分您的两个字段。

现在您可以像这样识别特定行及其索引路径，例如`textField:didBeginEditing`：

```
#define mainTag 2
#define subTag 3

UITableViewCell *cell = (UITableViewCell*)textField.superview.superview;
NSIndexPath *indexPath = [_tableView indexPathForCell:cell];
UITextField *mainCategory = (UITextField*)[cell viewWithTag:mainTag];
UITextField *subCategory = (UITextField*)[cell viewWithTag:subTag]; 
```

诀窍是文本字段是一个名为的视图的子视图，`contentView`它是 every 的一部分，`UITableViewCell`它又是单元格本身的子视图。

# objective-c - Objective-C 中的正则表达式语法

> ID：12765729
> 
> 赞同：3
> 
> 时间：2012-10-07T02:52:52.400
> 
> 标签：objective-c, regex

我到处寻找，找不到适用于此的解决方案。

我有：

```
- (BOOL) textFieldShouldEndEditing:(UITextField *)textField {
    NSString *regEx = @"/^[1-9]\d*(\.\d+)?$/";
    NSRange r = [textField.text rangeOfString:regEx options:NSRegularExpressionSearch];

    if (r.location == NSNotFound) {
        UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Entry Error"
                                                     message:@"Enter only numbers or decimals"         
                                                    delegate:self 
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles:nil];
        [av show];

        return NO;
    } else {
        return YES;
    }
} 
```

但是正则表达式不起作用。我希望它只接受数字和小数。我知道与正则表达式的代码有一些奇怪的区别，你必须加倍反斜杠或其他东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:03:39.210

删除开头的 [1-9] 以及正斜杠并转义反斜杠，因此它只是：

```
 "^\\d*(\\.\\d+)?$" 
```

请参阅[如何在 Objective-C 中正确转义此正则表达式？](https://stackoverflow.com/questions/7856675/how-can-i-escape-this-regex-properly-in-objective-c)

# matlab - 用多项式展开矩阵

> ID：12765730
> 
> 赞同：4
> 
> 时间：2012-10-07T02:53:05.027
> 
> 标签：matlab, matrix, polynomial-math

假设我有一个包含 3 列的矩阵`c1`A`c2`和`c3`。

```
1 2 9
3 0 7
3 1 4 
```

我想要一个维度为 (3x3n) 的新矩阵，其中第一列是`c1`，第二列是`c1^2`，n 列是`c1^n`，n+1 列是`c2`，n+2 列是`c2^2`等等。在 MATLAB 中有没有一种快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T03:07:03.717

结合[PERMUTE](http://www.mathworks.com/help/matlab/ref/permute.html)、[BSXFUN](http://www.mathworks.com/help/matlab/ref/bsxfun.html)和[RESHAPE](http://www.mathworks.com/help/matlab/ref/reshape.html)，您可以很容易地做到这一点，使其适用于任何大小的`A`. 为清楚起见，我已将说明分开，您可以根据需要将它们组合成一行。

```
n = 2;
A = [1 2 9; 3 0 7; 3 1 4];
[r,c] = size(A);

%# reshape A into a r-by-1-by-c array
A = permute(A,[1 3 2]);

%# create a r-by-n-by-c array with the powers
A = bsxfun(@power,A,1:n);

%# reshape such that we get a r-by-n*c array
A = reshape(A,r,[])

A =

     1     1     2     4     9    81
     3     9     0     0     7    49
     3     9     1     1     4    16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:04:50.197

尝试以下操作（现在无法访问 Matlab），它应该可以工作

```
    A = [1 2 9; 3 0 7; 3 1 4];
    B = [];
    对于 i=1:n
         B = [B A.^i];
    结尾
    B = [B(:,1:3:end) B(:,2:3:end) B(:,3:3:end)];

```

更节省内存的例程：

```
    A = [1 2 9; 3 0 7; 3 1 4];
    B = 零（3,3*n）；
    对于 i=1:n
         B(3*(i-1)+1:3*(i-1)+3,:) = A.^i;
    结尾
    B = [B(:,1:3:end) B(:,2:3:end) B(:,3:3:end)];

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:01:56.283

这是一种解决方案：

```
n = 4;
A = [1 2 9; 3 0 7; 3 1 4];
Soln = [repmat(A(:, 1), 1, n).^(repmat(1:n, 3, 1)), ...
        repmat(A(:, 2), 1, n).^(repmat(1:n, 3, 1)), ...
        repmat(A(:, 3), 1, n).^(repmat(1:n, 3, 1))]; 
```

# c - 如何在c中将一串数字（字符）转换为整数值

> ID：12765734
> 
> 赞同：0
> 
> 时间：2012-10-07T02:54:10.817
> 
> 标签：c

我需要将数字字符数组转换为整数值，以便在 C 中执行数学运算。当我使用 atoi(argv[2][count]) 时，它只将第一个数字转换为整数。因此，如果 argv[2]=123，它只会将“1”转换为整数 1。我怎样才能让“123”成为一个整数值 123？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:55:25.067

atoi 是一个很好的函数，但是您可以在 C 中编写自己的 atoi 函数。

```
int xatoi(char *s)
{
   int result=0;       

   while(*s)
   {

     result=result*10+(*s-48);
     s++; 
    }

  return result; 
```

这背后的逻辑是每个字符'1'，'2'，......的ascii值被存储例如'1'具有ASCII值'49'。请编译上面的程序并检查我没有测试过的错误，但我相信它会工作。

请参阅下面的链接以供参考 [http://www.newebgroup.com/rod/newillusions/ascii.htm](http://www.newebgroup.com/rod/newillusions/ascii.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:15:14.097

`argv`是一个字符串数组的数组，因此`argv[N]`为您提供了一个数组。但是为您提供存储在数组`argv[N][J]`位置的元素。但是，奇怪的是编译器没有抱怨您的代码，因为函数实际上需要一个指针（指向以空字符结尾的字符串）而不是字符值。编译器应该说类似. 我建议您不要忽略警告。就我个人而言，我倾向于编译具有最高警告级别的代码并且没有一个警告，尽管我们工作的代码库是数百万行代码。`J``argv[N]``atoi()``warning: passing argument 1 of ‘atoi’ makes pointer from integer without a cast`

另外，更喜欢使用`strtol`over `atoi`。问题`atoi`在于它忽略了无效输入（即，如果没有问题，则只返回 0，而不影响`errno`）。

无论如何，这是一个如何从命令行获取基数为 10 的整数数组的示例：

```
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{
    int  i;
    int  n;
    char    *e;
    int     *v;

    if (argc < 2) {
        fprintf(stderr, "Please specify some numbers\n");
        return EXIT_FAILURE;
    }

    n = argc - 1;
    v = alloca(sizeof(int) * n);

    for (i = 1; i < argc; ++i) {
        v[i-1] = strtol(argv[i][i], &e, 10);
        if (!v && errno) {
            fprintf(stderr, "Cannot convert '%s' into number: %s\n",
                argv[i], strerror(errno));
            return EXIT_FAILURE;
        } else if (*e != '\0') {
            fprintf(stderr, "%s is not a number\n", argv[i]);
            return EXIT_FAILURE;
        }
    }

    printf("You have entered the following numbers: %d", v[0]);

    for (i = 1; i < n; ++i)
        printf(", %d", v[i]);
    printf("\n");

    return EXIT_SUCCESS;
} 
```

希望它是有用的。

# c++ - MacOS X-C++ 中的分段错误 11

> ID：12765735
> 
> 赞同：0
> 
> 时间：2012-10-07T02:51:49.820
> 
> 标签：c++, data-structures, static

运行以下代码时出现“分段错误 11”错误。代码实际上可以编译，但我在运行时收到错误。

//** Terror.h **

```
#include <iostream>
#include <string>
#include <map>

using std::map;
using std::pair;
using std::string;

template<typename Tsize>
class Terror
{
    public:
    //Inserts a message in the map.
    static Tsize    insertMessage(const string& message)
    {
        mErrorMessages.insert( pair<Tsize, string>(mErrorMessages.size()+1, message) );
        return mErrorMessages.size();
    }

    private:
    static map<Tsize, string>       mErrorMessages;
};

template<typename Tsize>
map<Tsize,string> Terror<Tsize>::mErrorMessages; 
```

//** 错误.h **

```
#include <iostream>
#include "Terror.h"

typedef unsigned short errorType;
typedef Terror<errorType>   error;
errorType memoryAllocationError=error::insertMessage("ERROR: out of memory."); 
```

//** main.cpp **

```
#include <iostream>
#include "error.h"
using namespace std;

int main()
{   
    try
    {
        throw error(memoryAllocationError);
    }
    catch(error& err)
    {
    }
} 
```

我对代码进行了某种调试，并且在将消息插入静态映射成员时发生了错误。一个观察是，如果我把这条线：

```
errorType memoryAllocationError=error::insertMessage("ERROR: out of memory."); 
```

在“main()”函数内部而不是在全局范围内，那么一切正常。但我想在全局范围内扩展错误消息，而不是在本地范围内。该映射是静态定义的，因此所有“错误”实例共享相同的错误代码和消息。你知道我怎么能得到这个或类似的东西。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:18:55.527

当我尝试在 Mac OS X 10.7 上运行我为 OS X 10.8 编译的应用程序时，我遇到了同样的问题。

将目标设置为 10.7 解决了这个问题。该应用程序在 10.7 和 10.8 OS X 环境中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:29:58.257

您需要通过调用来确保`mErrorMessages`在使用它之前运行构造函数`insertMessage`。你可以以任何你想要的方式来做这件事，但你*必须*以某种方式去做。

# java - 运算符/分配/关于类的事情（Java）

> ID：12765741
> 
> 赞同：0
> 
> 时间：2012-10-07T02:55:28.687
> 
> 标签：java

不完全确定如何表达这一点，抱歉标题模棱两可。无论如何，这基本上是我的建议。

基本上，我知道如何使用构造函数和函数等将值传递给类，例如，

```
class bob {
    int value;
    public bob(int x) {
        value = x;
    }
}

bob test = bob(5); 
```

但是你如何处理运营商之类的事情呢？比如，如果一个人将这些类加在一起：

```
bob test1 = bob(5), test2 = bob(3), test3 = test1 + test2; 
```

如果一个人试图将两个实例化的对象加在一起，我怎么能让它真正做点什么？

或者，如果我说类似的话，

```
bob test = 5; 
```

我怎么能用你初始化它的值做一些事情呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:57:12.543

你不能在Java中做任何事情。Java 的运算符仅适用于原始类型（String 作为特殊例外），常规对象只能使用兼容对象或`null`.

相反，您应该定义适当的方法和构造函数：

```
public bob add(bob other) { ... } 
```

然后使用

```
bob test1 = new bob(5);
bob test2 = new bob(3);
bob test3 = test1.add(test2); 
```

既然做不到`bob test = 5;`，那就做吧`bob test = new bob(5);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:59:51.137

Java 不是 C++。你不能在没有`new`关键字的情况下调用构造函数（除非你使用反射，但这完全是另一个话题）。您也不能覆盖喜欢`+`使用自定义对象类型的运算符。

相反，如果将对象类型的一个实例添加到另一个实例在语义上是合适的，则可以通过定义一个`add()`方法来实现，例如：

```
class Bob {
    int value;
    public Bob(int x) {
        value = x;
    }

    public Bob add(Bob other) {
        return new Bob(this.value + (other == null ? 0 : other.value));
    }
} 
```

进而：

```
Bob test1 = new Bob(5);
Bob test2 = new Bob(3);
Bob test3 = test1.add(test2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:05:29.043

你的类声明是正确的。（在一个完全不相关的主题中，按照惯例，Java 类应该以大写字母开头。即，您的类应该命名为 Bob。但这与问题无关......）

创建对象并将参数传递给构造函数的正确语法是：

```
Bob test = new Bob(5); 
```

至于加法，您不能直接与运营商合作。有些语言允许您指定运算符对对象执行的操作，但 Java 不是其中之一。（您可以在 Google 上搜索运算符重载以获取更多信息。）

如果你想要添加类型的东西，你实际上必须为它定义一个函数。在你的情况下，你可以做两件事：

您可以定义一个实例函数：

```
class Bob {
// The other stuff you listed, like the constructor and the private field
    public Bob add(Bob other) {
        return new Bob(value + (other == null ? 0 : other.value));
    }
} 
```

或者，您可以定义一个静态函数：

```
class Bob {
// The other stuff you listed, like the constructor and the private field
    public static Bob add(Bob one, Bob other) {
        return new Bob((one == null ? 0 : one.value) + (other == null ? 0 : other.value));
    }
} 
```

第一个，你打电话给

```
test3 = test1.add(test2); 
```

第二个，你打电话给

```
test3 = Bob.add(test1, test2); 
```

# c - MinGW 上函数“getaddrinfo”的隐式声明

> ID：12765743
> 
> 赞同：6
> 
> 时间：2012-10-07T02:55:45.087
> 
> 标签：c, winapi, mingw, winsock2, getaddrinfo

我有一个使用`getaddrinfo()`. 它在 Linux 和 Mac OS X 上按预期工作。

我正在将其移植到 Windows 中。

当我编译它（使用 MinGW gcc）时，我收到以下警告：

```
ext/socket/socket.c: In function 'sl_tcp_socket_init':
ext/socket/socket.c:98:5: warning implicit declaration of function 'getaddrinfo' [-Wimplicit-function-declaration]
ext/socket/socket.c:104:9: warning implicit declaration of function 'freeaddrinfo' [-Wimplicit-function-declaration] 
```

然后整个事情无法与未定义的引用链接`getaddrinfo()`和`freeaddrinfo()`。

现在，根据[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms738520%28v=vs.85%29.aspx)，`getaddrinfo()`在 Windows 上受支持，位于头文件`Ws2tcpip.h`和库文件`Ws2_32.lib`中。

我包含`Ws2tcpip.h`并链接到`-lWs2_32`，所以我不确定为什么这不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T03:19:34.880

如果您查看 ws2tcpip.h 的第 297 行，您可以看到检查了 _WIN32_WINNT 的值。

```
#if (_WIN32_WINNT >= 0x0501)
void WSAAPI freeaddrinfo (struct addrinfo*);
int WSAAPI getaddrinfo (const char*,const char*,const struct addrinfo*,
                struct addrinfo**);
int WSAAPI getnameinfo(const struct sockaddr*,socklen_t,char*,DWORD,
               char*,DWORD,int);
#else
/* FIXME: Need WS protocol-independent API helpers.  */
#endif 
```

只需在包含之前#define `_WIN32_WINNT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T20:19:41.137

如果你想让你的代码在编译器范围内，你实际上也应该`NTDDI_VERSION`使用与`_WIN32_WINNT`. 如果没有这个定义，`_WIN32_WINNT`您将无法使用`getaddrinfo()`某些编译器（即 Watcom）。最好以与 Windows SDK 相同的方式包装它：

```
#define _NTDDI_VERSION_FROM_WIN32_WINNT2(ver)    ver##0000
#define _NTDDI_VERSION_FROM_WIN32_WINNT(ver)     _NTDDI_VERSION_FROM_WIN32_WINNT2(ver)

#ifndef _WIN32_WINNT
#  define _WIN32_WINNT 0x501
#endif
#ifndef NTDDI_VERSION
#  define NTDDI_VERSION _NTDDI_VERSION_FROM_WIN32_WINNT(_WIN32_WINNT)
#endif 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-23T14:31:50.170

据说解决这个问题的正确方法是：

```
#define WINVER WindowsXP 
```

或者也许更明智地添加`-DWINVER=WindowsXP`到您的`CPPFLAGS`.

参考： http: [//mingw.5.n7.nabble.com/Undefined-reference-to-getaddrinfo-td5694.html](http://mingw.5.n7.nabble.com/Undefined-reference-to-getaddrinfo-td5694.html)

注意：但是对我不起作用。

# string - 在 Python 中，如何打印包含大数字的字典而不在大数字后插入“L”？

> ID：12765744
> 
> 赞同：1
> 
> 时间：2012-10-07T02:55:44.713
> 
> 标签：string, dictionary, python-2.7, long-integer, repr

我有一本字典如下

```
d={'apples':1349532000000, 'pears':1349532000000} 
```

执行 str(d) 或 repr(d) 会导致以下输出

```
{'apples': 1349532000000L, 'pears': 1349532000000L} 
```

如何在不向数字添加 L 的情况下获取 str、repr 或 print 以显示字典？

我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:57:27.363

你不能，因为`L`后缀表示一个 64 位整数。没有它，这些数字就是 32 位整数。这些数字不适合 32 位，因为它们太大了。如果`L`后缀被省略，则结果将不是有效的 Python，而重点`repr()`是发出有效的 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:24:37.790

好吧，这有点尴尬，经过多次尝试，我才找到了解决方案:-P

一种方法（适合我的目的）是使用 json.dumps() 将字典转换为字符串。

```
d={'apples':1349532000000, 'pears':1349532000000}

import json
json.dumps(d) 
```

输出

```
'{"apples": 1349532000000, "pears": 1349532000000}' 
```

# c++ - 如何从 char * 缓冲区中的位置 y 读取 x 个字符？

> ID：12765745
> 
> 赞同：1
> 
> 时间：2012-10-07T02:56:02.497
> 
> 标签：c++

我正在读取缓冲区（char *）并且我有一个光标，我在其中跟踪缓冲区的起始位置，有没有办法将字符 7-64 复制出缓冲区，或者我最好的选择只是循环从位置 x 到位置 y 的缓冲区？

目标缓冲区的大小是另一个函数动态计算的结果

初始化这个返回

`variable-sized object 'version' may not be initialized`

相关代码部分：

```
int32_t size = this->getObjectSizeForMarker(cursor, length, buffer);
cursor = cursor + 8; //advance cursor past marker and size
char version[size] = this->getObjectForSizeAndCursor(size, cursor, buffer); 
```

-

```
char* FileReader::getObjectForSizeAndCursor(int32_t size, int cursor, char *buffer) {
  char destination[size];
  memcpy(destination, buffer + cursor, size);
} 
```

-

```
int32_t FileReader::getObjectSizeForMarker(int cursor, int eof, char * buffer) {
  //skip the marker and read next 4 byes
  cursor = cursor + 4; //skip marker and read 4
  unsigned char *ptr = (unsigned char *)buffer + cursor;
  int32_t objSize = (ptr[0] << 24) | (ptr[1] << 16) | (ptr[2] << 8) | ptr[3];
  return objSize;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:59:48.153

将指针`buffer`向前移动六个单位（以到达第七个索引），然后[`memcpy`](http://pubs.opengroup.org/onlinepubs/009695399/functions/memcpy.html)移动 64-7 (57) 个字节，例如：

```
const char *buffer = "foo bar baz...";
char destination[SOME_MAX_LENGTH];
memcpy(destination, buffer + 6, 64-7); 
```

您可能希望终止该`destination`数组，以便可以使用标准 C 字符串函数来处理它。请注意，我们在*第 58*个索引处添加了空字符，在被复制的 57 个字节之后：

```
/* terminate the destination string at the 58th byte, if desired */
destination[64-7] = '\0'; 
```

如果您需要使用动态大小的`destination`，请使用指针而不是数组：

```
const char *buffer = "foo bar baz...";
char *destination = NULL;

/* note we do not multiply by sizeof(char), which is unnecessary */
/* we should cast the result, if we're in C++ */
destination = (char *) malloc(58); 

/* error checking */
if (!destination) { 
    fprintf(stderr, "ERROR: Could not allocate space for destination\n");
    return EXIT_FAILURE;
}

/* copy bytes and terminate */
memcpy(destination, buffer + 6, 57);
*(destination + 57) = '\0';
...

/* don't forget to free malloc'ed variables at the end of your program, to prevent memory leaks */
free(destination); 
```

老实说，如果您使用 C++，那么您真的应该使用 C++[字符串库](http://www.cplusplus.com/reference/string/)和[`std::string`](http://www.cplusplus.com/reference/string/string/)类。然后，您可以在您的实例上调用[`substr`](http://www.cplusplus.com/reference/string/string/substr/)substring 方法`string`来获取感兴趣的 57 个字符的子字符串。这将涉及更少的头痛和更少的重新发明轮子。

但是上面的代码应该对 C 和 C++ 应用程序都有用。

# numerics - 从数字中推导出一个唯一的数字

> ID：12765746
> 
> 赞同：0
> 
> 时间：2012-10-03T09:29:18.483
> 
> 标签：numerics

我在每个节点有 N 个孩子的树上工作。

在我的例子中，每个节点都有一个唯一的标识符。我想从子标识符中推断出父节点的标识符。

因此，我们可以添加一个子标识符的信息来推断，例如：如果父亲的节点是“123”，那么子节点是“123.3”，那么我们就可以推断出（123.3）的父亲是“123”。但是有一个问题，我们有一棵大树，那么一个节点标识符可以是“12.3.4.1.2.4.5...”，这不是一个好的解决方案。

使用简单数字生成子标识符然后推断父标识符（考虑到它在整个树中是唯一的）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:37:58.570

如何将节点的路径编码为二进制、三进制等（匹配 N）整数？例如，二进制数字 14 是`{1, 1, 1, 0}`，这可以表示 `right -> right -> right -> left`. 或者对于三叉树，33 的三进制数字是`{1, 0, 2, 0}`，这可以表示`middle -> left -> right -> left`.

# php - 高级自定义字段 - 找不到 sub_field

> ID：12765748
> 
> 赞同：0
> 
> 时间：2012-10-07T02:56:26.163
> 
> 标签：php, wordpress, custom-fields

我是 Wordpress 和 PHP 的新手，所以不知道如何表达这个问题。

我正在开发一个带有自定义页面的 Wordpress 博客（页面的 2 列布局），并且我正在使用[Advanced Custom Fields](http://www.advancedcustomfields.com/)。

无论如何，所以我有一个名为 content_row 的自定义字段，它有一个名为 row 的子字段，并且有 2 个名为 left_column 和 right_column 的子字段。

由于某种原因，我无法提取行内容:(

**我的 page.php 代码（在第一次回显时，我在屏幕上看到“bool(false)”）：**

```
<?php get_header(); ?>

<section style="margin-top:400px;">

<?php 
if( get_field('content_row') ): ?>

    <?php echo var_dump(has_sub_field('row')); ?>

    <?php while( has_sub_field('row') ): ?>

        <?php echo "test"; ?>

    <?php endwhile; ?>

<?php endif; ?>

</section>

<?php get_footer(); ?> 
```

有什么想法/想法吗？让我知道你们是否需要查看更多代码...下面的一些屏幕截图： ![在此处输入图像描述](../Images/ebc138d448b6ac526b392f08a7ea4bf0.png) ![在此处输入图像描述](../Images/7928ad86548f5071da1306b70903c689.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:52:50.117

想通了！

```
<?php while(the_flexible_field("row")): ?>

<?php if(get_row_layout() == "2_column"): // layout: Content ?>

    <div class="content">
        <?php the_sub_field("left_column"); ?>
        <?php the_sub_field("right_column"); ?>
    </div>

    </div>

<?php endif; ?> 
```

# hash - pbkdf2 密钥长度

> ID：12765749
> 
> 赞同：3
> 
> 时间：2012-10-07T02:56:51.040
> 
> 标签：hash, pbkdf2

[PBKDF2](https://defuse.ca/php-pbkdf2.htm)中的 $key_length 是多少

它说它将从输入中派生，但我看到人们使用 256 或更大的 key_lengths，但是当我输入 256 作为 key_length 时，输出是 512 个字符。这是故意的吗？我可以安全地使用 64 作为 key_length 输出长度为 128 个字符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:51:39.667

$key_length 是您希望从 PBKDF2 获得的输出字节数。（请注意，如果 key_length 大于散列算法的输出字节数，则该过程重复两次，从而减慢散列的速度可能超出您的预期。例如，SHA256 给出 32 个字节的输出，因此要求 33 个字节将大约是要求 32 的两倍。）

您提到的长度加倍是因为代码将输出字节转换为十六进制（即每 1 个字节 2 个字符），除非您指定 $raw_output = true。包含的测试向量指定 $raw_output = false，因为十六进制更易于使用和在线发布。根据您在应用程序中存储数据的方式，您可以决定是否要将结果存储为十六进制、base64 或仅原始二进制数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-25T12:56:25.737

[在基于密码的密码术规范版本 2.0](https://www.ietf.org/rfc/rfc2898.txt)的 IETF 规范中，密钥长度定义为“派生密钥的八位字节的预期长度，一个正整数，最多 (2^32 - 1) * hLen” 这里 hLen 表示以伪随机函数输出的八位字节。有关 pbkdf2 的更多详细信息，您可以参考[如何使用 PBKDF2 安全地存储密码](https://medium.com/@kasunpdh/how-to-store-passwords-securely-with-pbkdf2-204487f14e84)

# java - 为什么这给了我一个无限循环？

> ID：12765754
> 
> 赞同：0
> 
> 时间：2012-10-07T02:57:37.967
> 
> 标签：java

我正在查看一个用于计算投资的代码，直到它翻了一番，我收到了一个我似乎无法解决的无限循环。谁能弄清楚为什么这给了我一个无限循环？我已经经历了自己，但我似乎无法找到问题所在。所指的“期间”是每年复利的次数。

```
double account = 0; //declares the variables to be used
   double base = 0;
   double interest = 0;
   double rate = 0;
   double result = 0;
   double times = 0;
   int years = 0;
   int j;

   System.out.println("This is a program that calculates interest.");
   Scanner kbReader = new Scanner(System.in); //enters in all data  
   System.out.print("Enter account balance: ");
   account = kbReader.nextDouble();
   System.out.print("Enter interest rate (as decimal): ");
   rate = kbReader.nextDouble();

   System.out.println("                    " + "Years to double" + "     " +     "Ending balance");
   base = account;
   result = account;
   for (j=0; j<3; j++){
       System.out.print("Enter period: ");
       times = kbReader.nextDouble();
       while (account < base*2){
           interest = account * rate / times;
           account = interest + base;
           years++;
       }
        account = (((int)(account * 100))/100.0);
       //results
       System.out.print("                         " + i + "               " + account + "\n");
       account = result;
   } 
```

代码应要求三个“期间”，或输入数据每年复合的三个不同时间（例如每年、每月、每天等）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:02:16.153

您应该添加一些健全性检查。要么检查所有数字是否会导致有限数量的循环（`account`和`rate`！= 0，可能还有其他一些东西），或者更简单地说，如果你的循环次数超过了合理的次数（例如 1000 次），则中断。我的猜测是这`rate`不会`0`导致帐户增加，因此它将永远循环。

你有一个计算错误：

```
account = interest + base; 
```

大概这应该是：

```
account = account + interest; 
```

另外，您确定要进行 int 演员表吗？

```
account = (((int)(account * 100))/100.0); 
```

您显然正在丢弃小于 1 美分的值。但是，如果利息太小，您将不会得到任何改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:06:16.643

而不是做

```
account =interest +base 
```

你应该有

```
account = interest +account 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:03:22.320

它可能永远循环的原因是 的`double`计算`account`被强制转换为有效地截断`int`，所以如果`rate`它太小并且新的值`account`至少没有变大，它可能永远不会改变`0.005`。

# eclipse - 有没有办法防止Eclipse中Java关键字的半粗体？（内有示例图片）

> ID：12765756
> 
> 赞同：1
> 
> 时间：2012-10-07T02:58:20.150
> 
> 标签：eclipse

我正在尝试切换到“合适的”IDE，但我无法摆脱它显示字体的糟糕方式。

我在 sublimeText 和 Eclipse 中都使用 Monaco 字体，大小均为 9，常规。

崇高看起来像这样： ![在此处输入图像描述](../Images/95c8401139374374ec6dd94008c69093.png)

而 Eclipse 对相同字体的渲染如下所示： ![在此处输入图像描述](../Images/b7924b8287db2183ee329ae4e9776387.png)

这都是半粗体和脏兮兮的样子！我注意到其中大部分仅适用于 java 关键字，例如“public”、“class”等。非关键字看起来不错。所以，我猜这在 Eclipse 的很多很多菜单中的某个地方是可编辑的。

有谁知道如何关闭关键字的半粗体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:01:17.313

从窗口菜单中，选择首选项。然后在搜索字段中输入“字体”。您将看到颜色和字体选项，可让您调整几种不同语言（包括 Java）的外观。我假设您可以删除粗体，尽管我没有检查详细信息。

[这个问题](https://stackoverflow.com/q/10592731/4794)上描述的选项也可能是相关的。

# android - 每次更改 TextView 时对其进行动画处理

> ID：12765758
> 
> 赞同：0
> 
> 时间：2012-10-07T02:58:47.270
> 
> 标签：android, eclipse, animation, textview

我有一个按钮，每次单击它时基本上都会更改 TextView。是否可以将动画与此相关联？我看过诸如 3D 翻转之类的东西，但它们对我来说似乎有点太先进了。有更简单的建议吗？

```
final Button button1 = (Button) findViewById(R.id.button1);
            final TextView textView = (TextView) findViewById(R.id.text_random_text);
            button1.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    textView.setText(getNextRandomCuisine());
     }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:54:36.477

我建议你看看 Android 网页。[http://developer.android.com/reference/android/view/animation/AnimationUtils.html](http://developer.android.com/reference/android/view/animation/AnimationUtils.html) 类 AnimationUtils 帮助您从 xml 文件夹加载和动画模式，例如，您可以制作“淡入淡出”动画，您应该很喜欢创建一个 xml datei，将其命名为例如“fadein.xml”它应该是这样的

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<alpha
    android:duration="200"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" >
</alpha> 
```

有了这个，你只是告诉你的 android 设备，这个动画应该改变你的视图的 alpha 值（也是透明度），从 0 到 1，使你的视图可见，“duration”参数就是任何毫秒的时间执行这个动画。

# javascript - Javascript 无法与 HTML 5 地理位置一起正常工作

> ID：12765769
> 
> 赞同：0
> 
> 时间：2012-10-07T03:00:09.327
> 
> 标签：javascript, html, geolocation

所以我有一些似乎不起作用的代码。这几乎是页面的顶部。上面只是一些其他的声明

```
window.lat = 42.688;
window.lng = -75.980;

$(function () {
    if (Modernizr.geolocation) {
        alert('ayoson');
        navigator.geolocation.getCurrentPosition(function (position) {
            window.lat = position.coords.latitude;
            window.lng = position.coords.longitude;

        })
    }
    // Build map
    var mapOptions = {
        center: new google.maps.LatLng(window.lat, window.lng),
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }; 
```

我只是以我设置的默认值结束，即使当我在 Modernizr.geolocation 中放置警报时它也会触发。此外，如果我在上方放置警报`var mapOptions`（如`alert(window.lng);`），第一个警报将不再触发。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:11:03.307

的回调在分配*后*的某个时间*异步*`navigator.geolocation.getCurrentPosition`执行。（可能）需要用户的反馈，回调仅在之后执行。同时，您的其余代码继续运行。 **`var mapOptions``navigator.geolocation.getCurrentPosition`**

 **如果用户忽略回调，则根本无法保证回调运行，因此最好的策略是使用默认位置构建地图，然后在成功定位用户后，从回调中*更新地图位置。*`navigator.geolocation.getCurrentPosition`**

# python - BeautifulSoup 在 BeautifulSoup 中处理 '<' '>' html 标签

> ID：12765782
> 
> 赞同：1
> 
> 时间：2012-10-07T03:03:14.757
> 
> 标签：python, beautifulsoup

我有一个 unicode 字符串。在字符串中，我将字符串中的 '\r' 字符替换为 '<\p>'，并将其传递给 BeautifulSoup 进行解析。

如果我在替换后的字符串之后打印，我会看到替换正常。但是当我将字符串传递给 BeautifulSoup 时，它会将其视为 < 和 >。这是为什么 ？

我似乎与编码有关，但不确定是什么。

替换字符串

```
fileString.encode('utf-8')  
fileString = re.sub('\r', "/<\p>", fileString)  
fileString.encode('utf-8')

htmlTag = BeautifulSoup(fileString, from_encoding='utf-8') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:06:52.020

`<\p>`不是结束标签。斜线则相反：

```
fileString = fileString.replace('\r', '</p>') 
```

# django - psycopg2 ImportError 的 Django 错误：DLL 加载失败

> ID：12765800
> 
> 赞同：7
> 
> 时间：2012-10-07T03:07:22.977
> 
> 标签：django, heroku, importerror

您好，当我尝试在虚拟环境中运行 syncdb 时出现此错误。

如果我将 psycopg2 文件夹复制到我的项目文件夹（我有我的`manage.py`和`settings.py`），那么这个错误就会消失。但是当代码被推送到heroku时我仍然会收到这个错误。

我参考了很多在线资料，但不是很幸运。

```
File "c:\Users\mayayadav\anteus\venv\lib\site-packages\psycopg2-2.4.5-py2.7-wi
  n32.egg\psycopg2\__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: DLL load failed: The specified module could not be found. (venv) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T19:29:37.040

我遇到了同样的问题`Windows`，我让它工作的方式是`psycopg2`从以下位置安装：

[http://www.stickpeople.com/projects/python/win-psycopg/](http://www.stickpeople.com/projects/python/win-psycopg/)

并以这种方式推荐这里[http://initd.org/psycopg/install/](http://initd.org/psycopg/install/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-27T10:36:14.650

在安装二进制文件不是最新的情况下（就像今天发生的那样：最新的 Python 是 3.4 和 PostgresSQL - 9.3，而最新的可用分别是 3.3 和 9.2.6），添加 PostgresSQL 二进制路径就足够了（例如`C:\Program Files\PostgreSQL\9.3\bin`）到路径变量。

注意：您需要重新启动命令行才能使其正常工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-10-29T01:42:58.607

**2019 更新**

`psycopg2`我在 Python 3.8 和2.8.3 和 2.8.4 中遇到了同样的问题。显然`psycopg2`还不能与 Python 3.8 一起使用（可以理解，因为最近发布了 3.8）。对我来说，解决方法是回到使用 Python 3.7。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-02T19:05:47.153

这是一个老问题......我遇到了 PyCharm 和 virtualenv 的问题，PyCharm 有 pip install psycopg2 的问题。我将 _psycopg.cp38-win_amd64.pyd 从全局 python 复制到 \venv\Lib\site-packages\psycopg2。一切都完成了。

# php - 如何在 ajax GET 返回上执行字符串方法

> ID：12765802
> 
> 赞同：-3
> 
> 时间：2012-10-07T03:07:34.480
> 
> 标签：php, ajax

问候，程序员们，我有一个问题......请记住，我完全是自学成才的，所以这可能是一个愚蠢的问题，但我已经做了几个小时的研究，似乎没有人有同样的问题问题.. 我正在开发一个 php 项目，我需要能够执行和 ajax GET 请求，然后将响应存储为字符串变量并对其执行一些字符串方法。这可能吗？如果是这样，我该怎么做。

提前致谢。

PS：我一直在使用 JQuery 的 .load() 方法来执行 GET 和 POST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:22:43.487

我不确定您是否阅读过文档，但它在[这里](http://api.jquery.com/load/)

查找**示例：如果 Ajax 请求遇到错误，则显示通知。**

```
$("#success").load("/not-here.php", function(response, status, xhr) {
  if (status == "error") {
    var msg = "Sorry but there was an error: ";
    $("#error").html(msg + xhr.status + " " + xhr.statusText);
  }
}); 
```

`response`应该包含您要操作的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:30:02.000

`.load`如果您必须将其用于其他事情而不仅仅是与 DOM 交互，则以下方法可能是比使用该函数更好的方法。

```
$.get("from-page.php", function(data) {
    var manipulated = data.substring(data.length, Math.ceil(data.length / 2));
    //any kind of manipulations you want

    $("#div").html(manipulated);
}); 
```

# c# - 这是.Net反射中的错误吗？

> ID：12765804
> 
> 赞同：5
> 
> 时间：2012-10-07T03:08:06.837
> 
> 标签：c#, .net, reflection, linq-expressions

**答案是：**不，这不是错误。区别在于[ReflectedType](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.reflectedtype%28v=vs.85%29.aspx)。

**所以这里真正的问题是：**有没有办法比较两个`PropertyInfo`对象，对于相同的属性，但从不同的类型反映，以便它返回`true`？

## 原始问题

此代码使用**两种不同的方式为****相同的属性**`PropertyInfo`生成两个对象。因此，这些属性信息以某种方式进行了**不同的比较。**我已经失去了一些时间试图弄清楚这一点。

 ******我究竟做错了什么？

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;

namespace TestReflectionError
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.BufferWidth = 200;
            Console.WindowWidth = 200;

            Expression<Func<object>> expr = () => ((ClassA)null).ValueA;
            PropertyInfo pi1 = (((expr as LambdaExpression)
                .Body as UnaryExpression)
                .Operand as MemberExpression)
                .Member as PropertyInfo;

            PropertyInfo pi2 = typeof(ClassB).GetProperties()
                .Where(x => x.Name == "ValueA").Single();

            Console.WriteLine("{0}, {1}, {2}, {3}, {4}", pi1, pi1.DeclaringType, pi1.MemberType, pi1.MetadataToken, pi1.Module);
            Console.WriteLine("{0}, {1}, {2}, {3}, {4}", pi2, pi2.DeclaringType, pi2.MemberType, pi2.MetadataToken, pi2.Module);

            // these two comparisons FAIL
            Console.WriteLine("pi1 == pi2: {0}", pi1 == pi2);
            Console.WriteLine("pi1.Equals(pi2): {0}", pi1.Equals(pi2));

            // this comparison passes
            Console.WriteLine("pi1.DeclaringType == pi2.DeclaringType: {0}", pi1.DeclaringType == pi2.DeclaringType);
            Console.ReadKey();
        }
    }

    class ClassA
    {
        public int ValueA { get; set; }
    }

    class ClassB : ClassA
    {
    }
} 
```

这里的输出是：

```
Int32 ValueA, TestReflectionError.ClassA, Property, 385875969, TestReflectionError.exe
Int32 ValueA, TestReflectionError.ClassA, Property, 385875969, TestReflectionError.exe
pi1 == pi2: False
pi1.Equals(pi2): False
pi1.DeclaringType == pi2.DeclaringType: True 
```

## 罪魁祸首：[`PropertyInfo.ReflectedType`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.reflectedtype%28v=vs.85%29.aspx)

我发现这两个对象之间有区别……它在`ReflectedType`. 文档是这样说的：

> 获取用于获取此成员的类对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:23:37.870

为什么不直接比较 MetadataToken 和 Module。

根据组合唯一标识的文档。

[MemberInfo.MetadataToken](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.metadatatoken.aspx)
*一个值，它与 Module 结合，唯一地标识一个元数据元素。*

```
static void Main(string[] args)
{
    Console.BufferWidth = 200;
    Console.WindowWidth = 140;

    PropertyInfo pi1 = typeof(ClassA).GetProperties()
        .Where(x => x.Name == "ValueA").Single();
    PropertyInfo pi2 = typeof(ClassB).GetProperties()
        .Where(x => x.Name == "ValueA").Single();
    PropertyInfo pi0 = typeof(ClassA).GetProperties()
        .Where(x => x.Name == "ValueB").Single();
    PropertyInfo pi3 = typeof(ClassB).GetProperties()
        .Where(x => x.Name == "ValueB").Single();
    PropertyInfo pi4 = typeof(ClassC).GetProperties()
        .Where(x => x.Name == "ValueA").Single();
    PropertyInfo pi5 = typeof(ClassC).GetProperties()
        .Where(x => x.Name == "ValueB").Single();

    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi1, pi1.ReflectedType, pi1.DeclaringType, pi1.MemberType, pi1.MetadataToken, pi1.Module);
    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi2, pi2.ReflectedType, pi2.DeclaringType, pi2.MemberType, pi2.MetadataToken, pi2.Module);
    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi0, pi0.ReflectedType, pi0.DeclaringType, pi0.MemberType, pi0.MetadataToken, pi1.Module);
    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi3, pi3.ReflectedType, pi3.DeclaringType, pi3.MemberType, pi3.MetadataToken, pi3.Module);
    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi4, pi4.ReflectedType, pi4.DeclaringType, pi4.MemberType, pi4.MetadataToken, pi4.Module);
    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi5, pi5.ReflectedType, pi5.DeclaringType, pi5.MemberType, pi5.MetadataToken, pi5.Module);

    // these two comparisons FAIL
    Console.WriteLine("pi1 == pi2: {0}", pi1 == pi2);
    Console.WriteLine("pi1.Equals(pi2): {0}", pi1.Equals(pi2));

    // this comparison passes
    Console.WriteLine("pi1.DeclaringType == pi2.DeclaringType: {0}", pi1.DeclaringType == pi2.DeclaringType);

    pi1 = typeof(ClassA).GetProperties()
        .Where(x => x.Name == "ValueB").Single();

    pi2 = typeof(ClassB).GetProperties()
        .Where(x => x.Name == "ValueB").Single();

    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi1, pi1.ReflectedType, pi1.DeclaringType, pi1.MemberType, pi1.MetadataToken, pi1.Module);
    Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}", pi2, pi2.ReflectedType, pi2.DeclaringType, pi2.MemberType, pi2.MetadataToken, pi2.Module);

    // these two comparisons FAIL
    Console.WriteLine("pi1 == pi2: {0}", pi1 == pi2);
    Console.WriteLine("pi1.Equals(pi2): {0}", pi1.Equals(pi2));

    Console.ReadKey();
}
class ClassA
{
    public int ValueA { get; set; }
    public int ValueB { get; set; }
}
class ClassB : ClassA
{
    public new int ValueB { get; set; } 
}
class ClassC
{
    public int ValueA { get; set; }
    public int ValueB { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T04:28:39.723

*永远不要*假设库中存在错误，除非您确实知道自己在做什么并且已经详尽地测试了该问题。

`PropertyInfo`对象没有相等的概念。当然，它们可能代表相同的结果，但**它们*不会*`==`使运算符重载，**因此您不能假设它们*应该*如此。因为他们没有，它只是简单地做一个参考比较并猜猜是什么，他们指的是两个独立的对象，因此是`!=`.

另一方面，`Type`对象也不会使`==`运算符重载，但似乎将两个实例与`==`运算符进行比较是可行的。为什么？因为类型实例实际上是作为单例实现的，这是一个实现细节。因此，给定两个对同一类型的引用，它们将按预期进行比较，因为您实际上是在比较对同一实例的引用。

不要期望调用框架方法时获得的*每个*对象都会以相同的方式工作。框架中没有多少使用单例。在此之前检查所有相关文档和其他来源。

* * *

重新审视这一点，我被告知从 .NET 4 开始，`Equals()`方法和`==`运算符已针对该类型实现。不幸的是，文档并没有过多地解释它们的行为，但使用 .NET Reflector 等工具揭示了一些有趣的信息。

根据反射器，mscorlib 程序集中的方法实现如下：

```
[__DynamicallyInvokable]
public override bool Equals(object obj)
{
    return base.Equals(obj);
}

[__DynamicallyInvokable]
public static bool operator ==(PropertyInfo left, PropertyInfo right)
{
    return (object.ReferenceEquals(left, right)
        || ((((left != null) && (right != null)) &&
             (!(left is RuntimePropertyInfo) && !(right is RuntimePropertyInfo)))
        && left.Equals(right)));
} 
```

在继承链（`RuntimePropertyInfo`-> `PropertyInfo`-> `MemberInfo`-> `Object`）中上下移动，`Equals()`一直调用基本实现，`Object`因此它实际上进行了对象引用相等比较。

操作员专门检查以`==`确保两个`PropertyInfo`对象都不是`RuntimePropertyInfo`对象。据我所知，`PropertyInfo`您使用反射获得的每个对象（在此处显示的用例中）都将返回一个`RuntimePropertyInfo`.

基于此，看起来框架设计者很*认真地*使它（运行时）`PropertyInfo`对象不可比较，即使它们代表相同的属性。您只能检查属性是否引用相同的`PropertyInfo`实例。我不能告诉你他们为什么做出这个决定（我有我的理论），你必须从他们那里听到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T16:37:11.993

我比较`DeclaringType`和`Name`。这报告了来自两个不同泛型类型的“相同”属性是不同的（例如，`List<int>.Count`和`List<string>.Count`）。比较`MetadataToken`并`Module`会报告这两个属性是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T17:26:22.470

`MemberInfo`一开始，如果在直接访问该成员（而不是通过反射）时返回相同的值，那么两个相等似乎是有道理的。因为`FieldInfo`这似乎更合理。但是，因为属性可以在子类中扩展，并且可以在成员声明中添加`PropertyInfo`不同的属性，所以不太清楚。`CustomAttributes`这意味着严格考虑访问的值不足以定义相等性。但是，如果这是您想要的平等定义，那么您可能需要考虑以下`AreEqual3(...)`方法：

```
private class Person {
    [CustomAttribute1]
    public virtual String Name { get; set; }
}

private class Person2 : Person {
    [CustomAttribute2]
    public override String Name { get; set; }
}

public static void TestMemberInfoEquality() {
    MemberInfo m1 = ExpressionEx.GetMemberInfo<Person>(p => p.Name);
    MemberInfo m2 = ExpressionEx.GetMemberInfo<Person2>(p => p.Name);
    bool b1 = m1.MetadataToken == m2.MetadataToken; // false
    bool b2 = m1 == m2; // false (because ReflectedType is different)
    bool b3 = m1.DeclaringType == m2.DeclaringType; // false
    bool b4 = AreEqual1(m1, m2); // false
    bool b5 = AreEqual2(m1, m2); // false
    bool b6 = AreEqual3(m1, m2); // true
}

public static bool AreEqual1(MemberInfo m1, MemberInfo m2) {
    return m1.MetadataToken == m2.MetadataToken && m1.Module == m2.Module;
}

public static bool AreEqual2(MemberInfo m1, MemberInfo m2) {
    return m1.DeclaringType == m2.DeclaringType && m1.Name == m2.Name;
}

public static bool AreEqual3(MemberInfo m1, MemberInfo m2) {
    return m1.GetRootDeclaration() == m2.GetRootDeclaration();
}

public static MemberInfo GetRootDeclaration(this MemberInfo mi) {
    Type ty = mi.ReflectedType;
    while (ty != null) {
        MemberInfo[] arr = ty.GetMember(mi.Name, mi.MemberType, BindingFlags.Instance | BindingFlags.Public);
        if (arr == null || arr.Length == 0)
            break;
        mi = arr[0];
        ty = ty.BaseType;
    }
    return mi;
} 
```

该方法只为`Public`和`Instance`成员编写。其他一些讨论线程建议使用`AreEqual1(...)`or`AreEqual2(...)`方法，但它们返回`false`给定示例。******

# ios6 - 更新其内容的本地通知

> ID：12765807
> 
> 赞同：0
> 
> 时间：2012-10-07T03:08:31.327
> 
> 标签：ios6, uilocalnotification

代码：

```
-(void)viewWillDisappear:(BOOL)animated
{
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [[NSDateComponents alloc] init];

    [components setDay: 3];
    [components setMonth: 7];
    [components setYear: 2012];
    [components setHour: 21];
    [components setMinute: 21];
    [components setSecond: 30];
    [calendar setTimeZone: [NSTimeZone defaultTimeZone]];
    NSDate *dateToFire = [calendar dateFromComponents:components];

    UILocalNotification *noti =[[UILocalNotification alloc] init];
    noti.fireDate = dateToFire;
    noti.repeatInterval = kCFCalendarUnitDay;
    noti.soundName = @"chun.aiff";
    noti.alertBody = [NSString stringWithFormat:@"Personal balance: %i", -PB];

    [[UIApplication sharedApplication] scheduleLocalNotification:noti];
} 
```

缺陷：

如果我是对的，我会说一旦这个本地通知被“嵌入”到设备的内存中，它就会与*每个*已创建的本地通知保持一致。我说的对吗？如果这是真的，我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:27:38.803

通知警报正在重复，因为您使用了：

```
noti.repeatInterval = kCFCalendarUnitDay; 
```

您的通知警报仅安排在您使用触发日期设置的日期，但警报会按照您设置的一天间隔重复。如果您不想重复，请将其设置为 nil。

希望它能解决你的问题。:)

# c# - 如何在try and catch中继续foreach？

> ID：12765808
> 
> 赞同：6
> 
> 时间：2012-10-07T03:08:47.383
> 
> 标签：c#, .net

如果我在执行 foreach 期间发现异常，我可以继续执行吗？

```
foreach (string d in Directory.GetDirectories(path))
    {
        try
        {
            foreach (string f in Directory.GetFiles(path))
            {
                //do something
            }
            //do something
        }
        catch
        {
           // If there is an error in the foreach, I want it to keep on going
        }
    } 
```

我问这个是因为它在`foreach`获取所有文件之前突然终止。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T03:12:05.170

只需这样做：

```
foreach (string d in Directory.GetDirectories(path))
{
        foreach (string f in Directory.GetFiles(path))
        {
            try
            {
                //do some thing
            }
            catch
            {
               // If there is an error on the foreach, I want it to keep on going to search another one
            }
        }
        //do some thing
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T03:11:21.933

```
foreach (string d in Directory.GetDirectories(path)) {
    foreach (string f in Directory.GetFiles(path)) {
        try {
            //do some thing
        } catch { /* log an error */ }
    }

    try {
        //do some thing
    } catch { /* log an error */ }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T17:57:37.457

```
foreach (string d in Directory.GetDirectories(path))
{
    try
    {
        foreach (string f in Directory.GetFiles(path))
        {
            //do something
        }
        //do something
    }
    catch(Excepion)
    {
       // If there is an error in the foreach, log error and...
            continue;
    }
} 
```

# asp-classic - 强制用户下载文件

> ID：12765809
> 
> 赞同：1
> 
> 时间：2012-10-07T03:08:52.690
> 
> 标签：asp-classic, vbscript

我想强制用户下载文件。我的网站文件夹路径是`D:\websites\domain\` ，文件路径是`E:\folder\file.bak`，

ASP - VBScript

```
<%

   Dim Stream
   Dim Contents
   Dim FileName
   FileName = "E:\db\A101.bak"
   Response.ContentType = "application/octet-stream"
   Response.AddHeader "content-disposition", "attachment; filename=" & FileName
   Set Stream = server.CreateObject("ADODB.Stream")
   Stream.Open
   Stream.LoadFromFile Server.MapPath(FileName)
   Contents = Stream.ReadText
   Response.BinaryWrite Contents
   Stream.Close
   Set Stream = Nothing

%> 
```

如果文件在我的网站文件夹中，它工作得很好，但是如果我使用路径 E:\db\A101.bak 给我一个错误， `File not Found`. 由于安全原因，我无法在网站文件夹中移动文件。帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:14:36.163

由于您已经知道您的物理路径，因此您不需要 Server.MapPath 方法。（此方法通常用于将虚拟路径转换为物理路径） Server.MapPath 方法可能不适用于网站结构之外的路径...

所以，尝试使用

```
Stream.LoadFromFile FileName 
```

# javascript - AJAX 调用后，使用 jQuery 插件的验证不起作用

> ID：12765811
> 
> 赞同：0
> 
> 时间：2012-10-07T03:08:59.783
> 
> 标签：javascript, jquery, ajax, jquery-plugins, jquery-validate

我正在尝试使用 jQuery 插件验证表单。我在表格上有三个常用的选择框，国家，州和城市。像往常一样，国家选择框在页面加载时填充。`onchange`在使用 Ajax 的各个选择框的事件上填充两个连续的选择框 。

```
<div>
  <label> Country<span style="color: Red;">*</span></label>
  <select id="cmb_country" name="cmb_country" validation="required" class="inputText" onchange="fillState(this.value,0);">
    <option value=''>Select</option>
    <?php $combo->combo("select country_id, country_name from country", 0);?>
  </select>
</div>
<div class="clear"> </div>

<div>
  <label> State<span style="color: Red;">*</span></label>

  <span id="stateList">                         
      <select id="cmb_state" name="cmb_state" validation="required" class="inputText" onchange="fillCity(this.value, 0);">
        <option value=''>Select</option>                                                
      </select>
  </span>
</div>
<div class="clear"> </div>

<div>
  <label> City<span style="color: Red;">*</span></label>
  <span id="cityList">                          
      <select id="cmb_city" name="cmb_city" validation="required" class="inputText">
        <option value=''>Select</option>                                                
      </select>
  </span>
</div>
<div class="clear"> </div> 
```

在阻止提交表单的 Ajax 调用之后，以下 jQuery 代码总是返回 false。

```
var Form = function(form) {

    var fields = [];

    form.find("[validation]").each(function() {
        var field = $(this);

        if (field.attr('validation') !== undefined) {
            fields.push(new Field(field));
        }
    });
    this.fields = fields;
}
Form.prototype = {
    validate: function() {

        for (field in this.fields) {

            this.fields[field].validate();
        }
    },
    isValid: function() {

        for (field in this.fields) {
            if (!this.fields[field].valid) {

                this.fields[field].field.focus();
                return false;
            }
        }
        return true;
    }
} 
```

如果不使用 Ajax，它运行良好，那么如何在使用 Ajax 填充所有选择框后使其工作？

# csv - 使用 Drive v2 API 将 CSV 上传到 Google Drive 电子表格

> ID：12765813
> 
> 赞同：25
> 
> 时间：2012-10-07T03:09:27.410
> 
> 标签：csv, google-drive-api, google-sheets

如何使用**Drive API v2将本地****CSV**文件上传到 Google Drive，以便上传的文件采用**原生 Google 电子表格**格式。最好在 Python 中，但一个原始的 HTTP 请求就足够了。

 ****我尝试了什么：

1.  请求正文内容类型：'application/vnd.google-apps.spreadsheet'，media_body 内容类型：'text/csv'。--> 401 错误请求

2.  请求正文内容类型：'application/vnd.google-apps.spreadsheet'，media_body 内容类型：'application/vnd.google-apps.spreadsheet'。--> 400 错误请求

3.  ...（其他几个，例如将属性排除在外等类似情况，通常得到 400 或 Drive 没有将其识别为原生电子表格）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-08T23:34:38.060

您的插入请求应指定`text/csv`为内容类型。转换文件的技巧是将`?convert=true`查询参数添加到请求 url：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-16T02:12:30.567

**（2017 年 3 月）**请注意，虽然该问题专门询问 Drive API v2，但开发人员应该知道[Google Drive API](http://developers.google.com/drive)团队在 2015 年底[发布了 v3](http://developers.google.com/drive/v3)`insert()` ，并在该版本中更改了名称`create()`以更好地反映文件操作。也没有更多的转换标志——你只需指定 MIMEtypes ......想象一下！

文档也得到了改进：现在有一个[专门用于上传](http://developers.google.com/drive/v3/web/manage-uploads)（简单、多部分和可恢复）的特殊指南，附带 Java、Python、PHP、C#/.NET、Ruby、JavaScript/Node.js 和 iOS 中的示例代码/Obj-C 上传一个文件和另一个将 CSV 文件导入为 Google 表格的文件。

只是为了说明它是多么简单，下面是另一种 Python 解决方案（针对文档中的示例），用于不需要`apiclient.http.MediaFileUpload`该类的短文件（“简单上传”）。此代码段假定您的身份验证代码适用于您的服务端点所在`DRIVE`的最小身份验证范围为`https://www.googleapis.com/auth/drive.file`.

```
# filenames & MIMEtypes
DST_FILENAME = 'inventory'
SRC_FILENAME = DST_FILENAME + '.csv'
SHT_MIMETYPE = 'application/vnd.google-apps.spreadsheet'
CSV_MIMETYPE = 'text/csv'

# Import CSV file to Google Drive as a Google Sheets file
METADATA = {'name': DST_FILENAME, 'mimeType': SHT_MIMETYPE}
rsp = DRIVE.files().create(body=METADATA, media_body=SRC_FILENAME).execute()
if rsp:
    print('Imported %r to %r (as %s)' % (SRC_FILENAME, DST_FILENAME, rsp['mimeType'])) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-21T20:27:30.410

Claudio Cherubino 的回答是正确的——您必须手动添加参数。既然你在 Python 中问过，这里有一个具体的例子：

```
body = {
    'mimeType':'text/csv',
    'title': 'title'
}

# service: your authenticated service
# media: your apiclient.http.MediaFileUpload object, with 'text/csv' mimeType
req = service.files().insert(media_body=media, body=body)

# patch the uri to ensure conversion, as the documented kwarg seems to be borked.
# you may need to use '?convert=true' depending on the uri, not taking that into
# account here for sake of simplicity.
req.uri = req.uri + '&convert=true'

# now we can execute the response.
resp = req.execute()

# should be OK
assert resp['mimeType'] == u'application/vnd.google-apps.spreadsheet' 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-11T00:41:42.607

爪哇：

```
 //Insert a file  
    File body = new File();
    body.setTitle("CSV");
    body.setDescription("A test document");
    body.setMimeType("text/csv");

    java.io.File fileContent = new java.io.File("document.csv");
    FileContent mediaContent = new FileContent("text/csv", fileContent);

    Insert insert = service.files().insert(body, mediaContent);
    insert.setConvert(true);
    File file = insert.execute();
    System.out.println("File ID: " + file.getId()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T10:30:07.580

开始的最佳方式是使用 [https://developers.google.com/drive/v2/reference/files/insert#try-it上的网络表单](https://developers.google.com/drive/v2/reference/files/insert#try-it)****

# c# - 获取字符串中字符的所有索引的更有效方法

> ID：12765819
> 
> 赞同：31
> 
> 时间：2012-10-07T03:11:09.177
> 
> 标签：c#

而不是遍历每个字符以查看它是否是您想要的，然后将您的索引添加到列表中，如下所示：

```
 var foundIndexes = new List<int>();
     for (int i = 0; i < myStr.Length; i++)
     {
        if (myStr[i] == 'a')
           foundIndexes.Add(i);
     } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-07T03:29:19.770

您可以使用`String.IndexOf`，请参见下面的示例：

```
 string s = "abcabcabcabcabc";
    var foundIndexes = new List<int>();

    long t1 = DateTime.Now.Ticks;
    for (int i = s.IndexOf('a'); i > -1; i = s.IndexOf('a', i + 1))
        {
         // for loop end when i=-1 ('a' not found)
                foundIndexes.Add(i);
        }
    long t2 = DateTime.Now.Ticks - t1; // read this value to see the run time 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-06-03T13:11:47.327

`yield`我对所有结果使用以下扩展方法：

```
public static IEnumerable<int> AllIndexesOf(this string str, string searchstring)
{
    int minIndex = str.IndexOf(searchstring);
    while (minIndex != -1)
    {
        yield return minIndex;
        minIndex = str.IndexOf(searchstring, minIndex + searchstring.Length);
    }
} 
```

用法：

```
IEnumerable<int> result = "foobar".AllIndexesOf("o"); // [1,2] 
```

边缘情况的旁注：这是一种适用于一个或多个字符的字符串方法。如果`"fooo".AllIndexesOf("oo")`结果只是`1` [https://dotnetfiddle.net/CPC7D2](https://dotnetfiddle.net/CPC7D2)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-07T03:14:24.543

怎么样

```
string xx = "The quick brown fox jumps over the lazy dog";

char search = 'f';

var result = xx.Select((b, i) => b.Equals(search) ? i : -1).Where(i => i != -1); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-07T03:23:11.487

原始迭代总是更好且最优化。

除非它是一个有点复杂的任务，否则你永远不需要寻求更好的优化解决方案......

所以我建议继续：

```
var foundIndexes = new List<int>();

for (int i = 0; i < myStr.Length; i++)

     if (myStr[i] == 'a') foundIndexes.Add(i); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-07T03:22:33.543

如果字符串很短，搜索一次字符串并计算字符出现的次数可能更有效，然后分配该大小的数组并再次搜索字符串，记录数组中的索引。这将跳过任何列表重新分配。

归结为字符串的长度和字符出现的次数。如果字符串很长并且字符出现几次，则搜索一次并将索引附加到 a`List<int>`会更快。如果字符出现多次，那么搜索字符串两次（一次计数，一次填充数组）可能会更快。临界点的确切位置取决于许多无法从您的问题中推断出的因素。

如果您需要在字符串中搜索多个不同字符并分别获取这些字符的索引列表，则在字符串中搜索一次并构建一个`Dictionary<char, List<int>>`（或`List<List<int>>`使用字符偏移量`\0`作为外部数组的索引）可能会更快.

最终，您应该对应用程序进行基准测试以发现瓶颈。通常，我们认为会执行缓慢的代码实际上非常快，并且我们将大部分时间都花在了 I/O 或用户输入上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-10T16:05:36.880

```
 public static List<int> GetSubstringLocations(string text, string searchsequence)
    {
        try
        {
            List<int> foundIndexes = new List<int> { };

            int i = 0;
            while (i < text.Length)
            {
                int cindex = text.IndexOf(searchsequence, i);

                if (cindex >= 0)
                {
                    foundIndexes.Add(cindex);
                    i = cindex;
                }

                i++;

            }

            return foundIndexes;
        }
        catch (Exception ex) { }
        return new List<int> { };
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-10T11:34:55.693

```
public static String[] Split(this string s,char c = '\t')
    {
        if (s == null) return null;
        var a = new List<int>();
        int i = s.IndexOf(c);
        if (i < 0) return new string[] { s };
        a.Add(i);
        for (i = i+1; i < s.Length; i++) if (s[i] == c) a.Add(i);
        var result = new string[a.Count +1];            
        int startIndex = 0;
        result[0] = s.Remove(a[0]);
        for(i=0;i<a.Count-1;i++)
        {
            result[i + 1] = s.Substring(a[i] + 1, a[i + 1] - a[i] - 1);
        }
        result[a.Count] = s.Substring(a[a.Count - 1] + 1);
        return result;
    } 
```

# java - 将像素从图像复制到网络摄像头

> ID：12765825
> 
> 赞同：1
> 
> 时间：2012-10-07T03:11:23.353
> 
> 标签：java, image, converter, pixel, processing

我想要做的是将视频摄像头中的像素转换为图像以解释它更好地想象一个 3d 模型所以..像素将是每个多边形，我想做的是将每个多边形转换成图像.

我到目前为止是这样的：

```
**
import processing.video.*;
PImage hoja;
Capture cam;
boolean uno, dos, tres, cuatro;

import ddf.minim.*;

Minim minim;
AudioPlayer audio;
float set;

void setup() {

  //audio
  minim = new Minim(this);
 // audio = minim.loadFile("audio");
 // audio.loop();

//  
  uno=false;
  dos=false;
  tres=false;
  cuatro=true;
  size(640, 480);
  hoja=loadImage("hoja.gif");

    cam = new Capture(this, width, height);
    cam.start();

}

void draw() {
  if (cam.available() == true) {
    cam.read();

    if (uno==true) {
      filtroUno();
       image(cam, 0, 0, 640, 480);
       }
          if (dos==true) {
        filtroDos();
      }

      if(tres==true){
      filtroTres();
      }

      if(cuatro==true){
        filtroCuatro();
        image(cam, set, 0,640,480);
      }
  }

  // The following does the same, and is faster when just drawing the image
  // without any additional resizing, transformations, or tint.
  //set(0, 0, cam);
}

void filtroUno() {
  cam.loadPixels();
  hoja.loadPixels();
  for (int i=0;i<cam.pixels.length;i++) {
    if (brightness(cam.pixels[i])>110) {
      cam.pixels[i]=color(0, 255, 255);
    }
    else {
      cam.pixels[i]=color(255, 0, 0);
    }
  }

   for (int i=0;i<cam.width;i+=10) {

    for (int j=0;j<cam.height;j+=10) {
      int loc=i+(j*cam.width);
      if (cam.pixels[loc]==color(255, 0, 0)) {
        for (int x=i;x<i+10;x++) {
          for (int y=j;y<j+10;y++) {
            //  println("bla");
            int locDos=i+(j*cam.width);
            cam.pixels[locDos]=hoja.get(x, y);
          }
        }
      }
    }
  }

  cam.updatePixels();
}
** 
```

问题是每个像素都在为我创建一个矩阵，所以..不是重新创建要做什么的 id。

我有方法 filtroUno 但它没有显示好..结果是

```
void filtroUno() {
  cam.loadPixels();
  hoja.loadPixels();
  for (int i=0;i<cam.pixels.length;i++) {
    if (brightness(cam.pixels[i])>110) {
      cam.pixels[i]=color(0, 255, 255);
    }
    else {
      cam.pixels[i]=color(255, 0, 0);
    }
  }

  for (int i=0;i<cam.width;i+=10) {

    for (int j=0;j<cam.height;j+=10) {
      int loc=i+j*hoja.width*10;
      if (cam.pixels[loc]==color(255, 0, 0)) {
        for (int x=i;x<i+10;x++) {
          for (int y=j;y<j+10;y++) {
            //  println("bla");
            int locDos=x+y*hoja.height*10;
            cam.pixels[locDos]=hoja.get(x, y);
          }
        }
      }
    }
  }

  cam.updatePixels();
} 
```

![在此处输入图像描述](../Images/aa3970105d6b505f594dfa449e249999.png)

我希望你能帮助我谢谢

注意：每个红色像素应该是 gif 图像，图像大小为 10x10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:33:43.840

我认为您正在做的是循环遍历网络摄像头图像中的每 10 个像素，如果该像素是红色的，则您将 10x10px gif 的内容放在网络摄像头图像上，而 gif 的左上角位于红色像素.

```
// loop through each 10th column in the camera
for (int i=0;i<cam.width;i+=10) {

    // loop through each 10th row in the camera
    for (int j=0;j<cam.height;j+=10) {            

        // calculate the pixel location at (i, j)
        int loc=i+(j*cam.width);

        // check the pixel is red
        if (cam.pixels[loc]==color(255, 0, 0)) {

            // loop through each column in the gif image
            for (int x=0;x<10;x++) {

                // loop through each row in the gif image
                for (int y=0;y<10;y++) {

                    int locDos = (i + x) + ((j + y) * cam.width);
                    cam.pixels[locDos]=hoja.get(x, y);
                }
            }
        }
    }
} 
```

# c++ - 在 for 循环中声明向量

> ID：12765828
> 
> 赞同：1
> 
> 时间：2012-10-07T03:11:52.017
> 
> 标签：c++, scope, initialization, stdvector

我有一个指向向量的指针数组，`vector<int> *F[12];`我希望初始化一些向量并将它们的地址存储在 F 中。

```
for(uint i = A; i <= B; ++i){
    vector<uint> newvec(pow2(i), 0);
    F[i] = &newvec;
} 
```

但是当我稍后尝试访问它们时，我发现它们并非全为零：

```
for(uint i = A; i <= B; ++i){
    for(uint j = 0; j <= pow2(i); ++j){
        if((*F[i]).at(j) != 0){
            cout << i << "/" << j << "/" << (*F[i]).at(j) << "|";
        }
    }
} 
```

我认为这与声明的向量的范围有关。为什么内存被释放了？我必须使用`malloc`并从中创建一个向量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:12:46.700

`newvec`循环退出时超出范围。此时任何现有的引用或指向它的指针都是无效的。您需要在适当的范围内声明该对象（在这种情况下，我不知道这对您来说是什么，但肯定在`for`循环之外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T03:14:52.317

每次迭代都会在调用堆栈上创建 newvec。每次通过你创建它的循环，创建一个指向它的指针，然后它就消失了。您想使用“新”运算符在堆中创建一个更持久的向量实例。

# iphone - 填充不是我的 NavigationController 的 rootViewController 的 TableViewController

> ID：12765832
> 
> 赞同：0
> 
> 时间：2012-10-07T03:12:24.533
> 
> 标签：iphone, ios5

好的，所以我完成了一个教程，让我以这种方式从 appDelegate.m 文件填充 TableViewController。

`UINavigationController *navController = (UINavigationController *) self.window.rootViewController; MasterViewController *masterController = [navController.viewControllers objectAtIndex:0]; masterController.bugs = bugs;`

我正在尝试自己的小应用程序进行一些练习，但我这样做的方式是我的 TableViewController 不是 rootViewController。这是之后的下一个视图。我正在使用情节提要来创建我的 GUI，不确定这是否需要了解。

基本上我的对象有一个成员是和数组，我想在 appDelegate 文件中创建对象，并用我的对象中的数组填充 TableViewController。

以下是一些额外的细节：

有人建议我将 0 索引替换为 1 但我收到此异常错误

2012-10-07 21:34:23.785 EasyBudget[5257:f803] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]：索引 1 超出范围 [0 .. 0]” ***首先抛出呼叫堆栈:( 0x14b5022 0xeb5cd6 0x14a1644 0x20c8 0x16386 0x17274 0x26183 0x1139fef5 0x1139fef5 0x1489195 0x139fef5 0x139fef5 0x1489195 0x132ff2 0x1489195 0x13edff2 0x13ech8da 0x13ebd84 0x13ebc9b 0x16c65 0x18626 0x12fd 0x11065 0x1）终止称为抛出异常

我理解异常的原因。出于某种原因，我的导航控制器中保存不同视图的数组只有一个 0 索引。我只是不确定如何解决这个问题。我以 Navigation Controller -> ViewController（这是我的根视图关系）-> Table View Controller（这是我要访问的视图）的方式设置我的故事板。我从根视图控制器向表视图控制器添加了一个带有 push segue 的条形按钮项。当我在添加代码之前构建和运行一切正常时，我可以按下我的按钮，它从我的视图控制器转到我的表视图控制器，我能够按下导航栏自动制作的后退按钮以返回我的视图控制器。我希望这一切都正确完成。任何更多的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:19:39.657

> 好的，所以我完成了一个教程，让我以这种方式从 appDelegate.m 文件填充 TableViewController。

这对于“教程”来说是有意义的，因为表视图控制器是导航控制器的根视图控制器，所以它总是可用的。我猜点击表格中的一行可能会导致应用程序转换到与点击的行相关的详细视图控制器，并且该详细视图控制器可能是由表视图控制器设置的。

您可以在您的应用程序中遵循相同的模式：让您的应用程序委托执行任何必要的操作来设置导航控制器的根视图控制器，然后让*该*控制器设置它转换到的任何视图控制器。由于您使用的是故事板，因此最好在视图控制器的`-prepareForSegue:sender:`方法中执行此操作——您可以在该方法中获取 segue 的目标视图控制器并传递新控制器所需的任何数据（即您的表视图控制器）去做这件事。

# python - 计算 Python 列表中真正布尔值的数量

> ID：12765833
> 
> 赞同：182
> 
> 时间：2012-10-07T03:12:41.943
> 
> 标签：python, list, boolean, counting

我有一个布尔值列表：

```
[True, True, False, False, False, True] 
```

我正在寻找一种方法来计算`True`列表中的数量（因此在上面的示例中，我希望返回为`3`。）我找到了查找特定元素出现次数的示例，但是还有更多自从我使用布尔值以来，有效的方法是什么？我在想类似于`all`or的东西`any`。

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2012-10-07T03:13:56.973

`True`等于`1`。

```
>>> sum([True, True, False, False, False, True])
3 
```

* * *

## 回答 #2

> 赞同：196
> 
> 时间：2012-10-07T06:57:39.083

`list`有一个[`count`](https://docs.python.org/3/tutorial/datastructures.html#more-on-lists)方法：

```
>>> [True,True,False].count(True)
2 
```

这实际上比 更有效`sum`，并且对意图更明确，因此没有理由使用`sum`：

```
In [1]: import random

In [2]: x = [random.choice([True, False]) for i in range(100)]

In [3]: %timeit x.count(True)
970 ns ± 41.1 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [4]: %timeit sum(x)
1.72 µs ± 161 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-10-07T03:56:50.573

如果您只关心常量`True`，那么简单`sum`就可以了。但是，请记住，在 Python 中，其他值`True`也会计算。更强大的解决方案是使用`bool`内置：

```
>>> l = [1, 2, True, False]
>>> sum(bool(x) for x in l)
3 
```

更新：这是另一个同样强大的解决方案，具有更透明的优势：

```
>>> sum(1 for x in l if x)
3 
```

PS Python琐事：`True` *可能*不是1。警告：不要在工作中尝试这个！

```
>>> True = 2
>>> if True: print('true')
... 
true
>>> l = [True, True, False, True]
>>> sum(l)
6
>>> sum(bool(x) for x in l)
3
>>> sum(1 for x in l if x)
3 
```

更邪恶：

```
True = False 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-07T03:14:16.643

您可以使用`sum()`：

```
>>> sum([True, True, False, False, False, True])
3 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-12-12T14:06:46.383

在阅读了关于这个问题的所有答案和评论后，我想做一个小实验。

我生成了 50,000 个随机布尔值并调用`sum`了`count`它们。

这是我的结果：

```
>>> a = [bool(random.getrandbits(1)) for x in range(50000)]
>>> len(a)
50000
>>> a.count(False)
24884
>>> a.count(True)
25116
>>> def count_it(a):
...   curr = time.time()
...   counting = a.count(True)
...   print("Count it = " + str(time.time() - curr))
...   return counting
... 
>>> def sum_it(a):
...   curr = time.time()
...   counting = sum(a)
...   print("Sum it = " + str(time.time() - curr))
...   return counting
... 
>>> count_it(a)
Count it = 0.00121307373046875
25015
>>> sum_it(a)
Sum it = 0.004102230072021484
25015 
```

为了确定，我又重复了几次：

```
>>> count_it(a)
Count it = 0.0013530254364013672
25015
>>> count_it(a)
Count it = 0.0014507770538330078
25015
>>> count_it(a)
Count it = 0.0013344287872314453
25015
>>> sum_it(a)
Sum it = 0.003480195999145508
25015
>>> sum_it(a)
Sum it = 0.0035257339477539062
25015
>>> sum_it(a)
Sum it = 0.003350496292114258
25015
>>> sum_it(a)
Sum it = 0.003744363784790039
25015 
```

如您所见，`count`比 快 3 倍`sum`。所以我建议`count`像我在`count_it`.

Python 版本：3.6.7
CPU 内核：4
RAM 大小：16 GB
操作系统：Ubuntu 18.04.1 LTS

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-14T18:31:48.380

只是为了完整起见（`sum`通常更可取），我想提一下，我们也可以使用它`filter`来获取真实值。在通常情况下，`filter`接受一个函数作为第一个参数，但如果你传递它`None`，它将过滤所有“真实”值。这个特性有点令人惊讶，但是有很好的文档记录并且在 Python 2 和 3 中都可以使用。

版本之间的区别在于，在 Python 2 中`filter`返回一个列表，因此我们可以使用`len`：

```
>>> bool_list = [True, True, False, False, False, True]
>>> filter(None, bool_list)
[True, True, True]
>>> len(filter(None, bool_list))
3 
```

但是在 Python 3 中，`filter`返回一个迭代器，所以我们不能使用`len`，如果我们想避免使用`sum`（出于任何原因），我们需要将迭代器转换为一个列表（这使得这变得不那么漂亮了）：

```
>>> bool_list = [True, True, False, False, False, True]
>>> filter(None, bool_list)
<builtins.filter at 0x7f64feba5710>
>>> list(filter(None, bool_list))
[True, True, True]
>>> len(list(filter(None, bool_list)))
3 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-08T20:38:16.683

先跑过去比较安全`bool`。这很容易做到：

```
>>> sum(map(bool,[True, True, False, False, False, True]))
3 
```

然后，您会将 Python 认为是 True 或 False 的所有内容捕获到适当的存储桶中：

```
>>> allTrue=[True, not False, True+1,'0', ' ', 1, [0], {0:0}, set([0])]
>>> list(map(bool,allTrue))
[True, True, True, True, True, True, True, True, True] 
```

如果您愿意，可以使用推导式：

```
>>> allFalse=['',[],{},False,0,set(),(), not True, True-1]
>>> [bool(i) for i in allFalse]
[False, False, False, False, False, False, False, False, False] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-07T04:22:57.463

我更喜欢`len([b for b in boollist if b is True])`（或生成器表达式等价物），因为它是不言自明的。没有 Ignacio Vazquez-Abrams 提出的答案那么“神奇”。

或者，您可以这样做，它仍然假设 bool 可转换为 int，但不对 True 的值做任何假设： `ntrue = sum(boollist) / int(True)`

# c# - 如何确定 RESX 文件的语言

> ID：12765835
> 
> 赞同：0
> 
> 时间：2012-10-07T03:12:46.007
> 
> 标签：c#, localization, resx

我从网上读过一些东西，这让我很困惑。

.resx 文件（来自任何应用程序）可以是：

1.  +“语言”+“。” + + '.resX'（例如：Word.fr-CA.resx）

2.  或只是“Word.resx”

那么当我打开程序时如何确定 resx 文件的语言呢？

resx 文件中没有像“xml:lang”这样的标签或元素。

我应该使用文件的“扩展名”来决定它的语言环境吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:53:17.080

它纯粹是通过命名约定来完成的，

*   Word.fr-CA.resx 或任何类似内容用于 fr-CA（文化）。
*   Word.resx 是中性的，它应该与`[assembly:NeutralResourcesLanguageAttribute]`.

[http://msdn.microsoft.com/en-us/library/hhz003sc.aspx](http://msdn.microsoft.com/en-us/library/hhz003sc.aspx)

# c# - 在 C# 中使用 XmlSerializer.Deserialize() 反序列化父命名空间之外的子节点

> ID：12765837
> 
> 赞同：3
> 
> 时间：2012-10-07T03:12:58.603
> 
> 标签：c#, xml, serialization, deserialization

我有一个使用命名空间来帮助反序列化存储在 XML 中的对象的应用程序。XML 命名空间也是对象所在的 C# 命名空间。例如，给定以下 XML 片段：

```
<xml-config xmlns:app="MyAppNS">
  <app:Person>
    <Name>Bill</Name>
    <Car>
      <Make>Honda</Make>
      <Model>Accord</Model>
    </Car>
  </app:Person>

  <app:Person>
    <Name>Jane</Name>
    <Car>
      <Make>VW</Make>
      <Model>Jetta</Model>
    </Car>
  </app:Person>

  <app:Car>
    <Make>Audi</Make>
    <Model>A6</Model>
  </app:Car>
</xml-config> 
```

配置实际上只是一个随机的对象包。如您所见，顶层混合了`Person`和对象。`Car`我使用命名空间在加载时确定对象类型以进行正确的反序列化。这是加载文档的代码：

```
public static void LoadFile(String file) {
    XmlDocument doc = new XmlDocument();
    doc.Load(file);

    XmlNode root = doc.DocumentElement;
    foreach (XmlNode child in root.ChildNodes) {
        if (child.NodeType != XmlNodeType.Element) {
            continue;
        }

        Object obj = LoadObject(child);
        // TODO handle object here...
    }
}

private static Object LoadObject(XmlNode node) {
    Object obj = null;

    StringBuilder str = new StringBuilder();
    if ((node.Prefix != null) && (node.Prefix != "")) {
        str.Append(node.NamespaceURI).Append('.');
    }
    str.Append(node.LocalName);

    Assembly assy = Assembly.GetExecutingAssembly();
    Type type = assy.GetType(str.ToString());
    XmlSerializer serdes = new XmlSerializer(type);

    using (XmlNodeReader reader = new XmlNodeReader(node)) {
        obj = serdes.Deserialize(reader);
    }

    return obj;
} 
```

许多人马上就看到了问题，但是当使用此代码时，生成的`Person`对象是空的，但是没有错误。让反序列化器填充子元素的唯一方法是为子元素使用相同的命名空间：

```
 <app:Person>
    <app:Name>Bill</app:Name>
    <app:Car>
      <app:Make>Honda</app:Make>
      <app:Model>Accord</app:Model>
    </app:Car>
  </app:Person> 
```

我尝试过的唯一其他选择是使用完全限定的类型名称作为元素名称（没有命名空间），但是我没有任何运气。有没有办法让反序列化器接受 XML 节点的非前缀子节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:12:39.933

我终于找到了一种方法来完成此操作，修改[此处](https://stackoverflow.com/questions/870293/can-i-make-xmlserializer-ignore-the-namespace-on-deserialization)找到的答案。

我创建了一个自定义反序列化器，它复制了起始节点的命名空间：

```
public class CustomXmlNodeReader : XmlNodeReader {

    private String _namespace;

    public CustomXmlNodeReader(XmlNode node) : base(node) {
        _namespace = node.NamespaceURI;
    }

    public override String NamespaceURI {
        get { return _namespace; }
    }
} 
```

使用此阅读器，我可以使用以下内容加载存储的对象：

```
using (XmlNodeReader reader = new CustomXmlNodeReader(node)) {
    obj = serdes.Deserialize(reader);
} 
```

我知道这对于 XML 来说有点糟糕（强制应用特定的命名空间），但是它非常适合我的需要。在这里回答，以防它帮助其他人。

# php - 轻松显示消息的 PHP 函数

> ID：12765839
> 
> 赞同：-1
> 
> 时间：2012-10-07T03:13:35.973
> 
> 标签：php, function, echo

我正在尝试制作一个函数，让我可以使用 PHP 在我的页面中轻松显示消息。

我的功能：

```
/*
* Function to easy write modal / help boxes
*/
function modal($title, $message)
{
        echo '
        <!-- HELP MODAL -->
        <div style="display:none;">
            <div id="help" class="modal-content inline">
            <h3>'.$title.'</h3>
            '.$message.'
            </div>
        </div>
        <!-- END HELP MODAL -->         
        ';
} 
```

还有我的 PHP 代码：

```
<?php echo modal("Title Message","Message <br /> <a href='link'>link</a>"); ?> 
```

这不起作用。我打开了error_reporting，但没有看到错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:15:53.043

您已`display: none;`设置为属性。除非您有一些客户端脚本可以更改此设置，否则您的回显 HTML 将永远不会对用户可见。

但是，如果 HTML 没有首先呈现（即`echo`什么都不做的调用），那么有些问题，所以请编辑您的问题以显示呈现的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:31:50.983

尝试使用`return`模态函数中的 echo 语句。

```
$text = '<div> Your div </div>';
return $text; 
```

或者

在您的模态函数中创建一个`exit`after echo 语句

```
echo '<div> Your div </div>';
exit; 
```

# wpf - WPF 中的线框渲染

> ID：12765841
> 
> 赞同：7
> 
> 时间：2012-10-07T03:14:14.753
> 
> 标签：wpf, 3d

我必须在一个大型 WPF 应用程序中编写一个线框 3D 渲染器，它可以做很多事情但是 WPF 没有本机能力来做到这一点。

有些人使用 Microsoft 的“3D Tools for WPF”，特别是它的 ScreenSpaceLines3D 类。但是在网上有关于该类性能缓慢和各种错误的抱怨，而且该类库似乎自 2007 年以来就没有维护过！

其他人建议使用 Helix 3D 工具包中的 LinesVisual3D 类，但显然这也是错误的 ( [http://helixtoolkit.codeplex.com/workitem/9957](http://helixtoolkit.codeplex.com/workitem/9957) )

Charles Petzold 有一个 3D 库——有人知道它相当强大吗？

那么我在这里有什么好的选择吗？例如，有没有在 WPF 窗口中做 OpenGL3D 的好方法？是否有其他优秀的 WPF 库可以可靠地做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:22:04.963

查看 SlimDX。XNA 和托管 DirectX 等已弃用或过时。可能还检查 SharpDX 我有一段时间没有检查它。我们在 .NET 中将 SlimDX 用于 DirectX，这很好。您可能正在寻找的是使用 SlimDX 在 D3DImage 上呈现 WPF 互操作。另一种可能的选择是使用托管的 WinForms 控件并使用它的句柄与 DirectX 与 SlimDX 进行互操作，这可能会更快，但您会失去与 WPF 渲染引擎等更容易的互操作。如果您使用 D3DImage，它会变成您可以使用的 ImageBrush设置为任何背景，您不必担心空域问题等。

编辑：哦，是的，由于某种原因，SlimDX 在下载中不再有他们的示例，但是如果您下载它，他们的源代码就有示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:41:21.003

[这个页面](http://www.codeproject.com/Articles/23736/Creating-OpenGL-Windows-in-WPF)似乎有关于使用 OpenGL 的信息。微软还提到了使用 Direct3d 和 XNA。XNA 非常易于使用，如果您已经了解 OpenGL，那么学习 Direct3d 可能不会有太大问题。我承认，当我学习 Direct3d 时，它上面的材质不如 OpenGL 材质。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T03:30:48.670

我看到很多回复都提到了这个问题的 3rd 方解决方案。

对于纯 WPF 解决方案，我从现有的 Model3D 创建了一个新的 Model3D，其中每个方面都创建了一个洞。即分成6个新的刻面，每条“线”的宽度与原始刻面大小成正比。

这样做的原因是它看起来比固定线宽更好，但如果需要，您可以使用固定线宽。

可选择将中心孔填充为黑色的新刻面（在组中单独的 Model3D），并且您可以移除隐藏线。

对于刻面中的三个点 A0、B0 和 C0，计算 AB、AC 和 BC 的中点。新点 A1 是沿 BC 线的 1/20。对接下来的两个点 B1 和 C1 重复此操作。

“线条”的 6 个新方面由以下组合表示：

A0, B0, B1
A0, B1, A1
A0, C1, C0
A0, A1, C1
B0, C0, C1
B0, C1, B1

将 A1、B1 和 C1 添加到另一个模型以用于隐藏线移除变体。

# python - 优化 Python 中的查找和匹配代码

> ID：12765844
> 
> 赞同：1
> 
> 时间：2012-10-07T03:14:39.673
> 
> 标签：python, optimization, findall

我有一个将两个文件作为输入的代码：（1）字典/词典（2）一个文本文件（每行一个句子）

我的代码的第一部分以元组形式读取字典，因此输出如下内容：

```
('mthy3lkw', 'weakBelief', 'U')

('mthy3lkm', 'firmBelief', 'B')

('mthy3lh', 'notBelief', 'A') 
```

代码的第二部分是在文本文件中的每个句子中搜索这些元组中位置 0 的单词，然后打印出句子、搜索词及其类型。

所以给定句子 mthy3lkw ana mesh 3arif ，期望的输出是：

["mthy3lkw ana mesh 3arif", ' **mthy3lkw** ', 'weakBelief', 'U'] 假设在字典中找到突出显示的单词。

我的代码的第二部分——匹配部分——太慢了。我怎样才能让它更快？

这是我的代码

```
findings = [] 
for sentence in data:  # I open the sentences file with .readlines()
    for word in tuples:  # similar to the ones mentioned above
        p1 = re.compile('\\b%s\\b'%word[0])  # get the first word in every tuple
        if p1.findall(sentence) and word[1] == "firmBelief":
            findings.append([sentence, word[0], "firmBelief"])

print findings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:20:19.070

将您的元组列表转换为[trie](https://stackoverflow.com/questions/11015320/how-to-create-a-trie-in-python)，并将其用于搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:32:11.573

构建一个 dict 查找结构，以便您可以快速从元组中找到正确的查找结构。然后你可以重组你的循环，而不是为每个句子遍历整个字典，尝试匹配每个条目，而是遍历句子中的每个单词并在字典中查找它：

```
# Create a lookup structure for words
word_dictionary = dict((entry[0], entry) for entry in tuples)

findings = []
word_re = re.compile(r'\b\S+\b') # only need to create the regexp once
for sentence in data:
    for word in word_re.findall(sentence): # Check every word in the sentence
        if word in word_dictionary: # A match was found
            entry = word_dictionary[word]
            findings.append([sentence, word, entry[1], entry[2]]) 
```

# linux - bash脚本杀死一个小时以上的php进程

> ID：12765850
> 
> 赞同：3
> 
> 时间：2012-10-07T03:17:11.083
> 
> 标签：linux, bash, awk, grep, kill-process

我有以下内容：

```
kill -9 `ps aux | grep php | awk '$9 !~ /[0-9]:[0-9]/' | awk '{print $2}'` 
```

它所做的是杀死被 fcgid 遗弃的进程并杀死它们以释放 RAM。我想每小时运行一次，但想杀死一个小时以上的进程。我只是不确定如何修改脚本来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T03:25:56.887

尝试以下 bash 代码：

```
for i in $(pidof php); do
    pidtime=$(stat -c '%Y' /proc/$i)
    now=$(date +%s)
    ((now - pidtime >= 3600)) && { kill $i; sleep 1; kill &>/dev/null -9 $i; }
done 
```

和 crontab ：

```
crontab -e
0 * * * * /path/to/the/script.bash 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T21:54:49.277

解决了：

```
/bin/ps -Ao"command,pid,ppid"|/bin/grep ' 1$'|/bin/grep /php|/bin/awk '{ print $2; }'|/usr/bin/xargs --no-run-if-empty kill -9 
```

# java - 使用 JDK 7 u7 和 netbeans 7.2 解析日期会产生不需要的结果

> ID：12765851
> 
> 赞同：0
> 
> 时间：2012-10-07T03:18:01.210
> 
> 标签：java, parsing, date

在标题环境中尝试这个：

[http://www.javadb.com/check-if-a-string-is-a-valid-date](http://www.javadb.com/check-if-a-string-is-a-valid-date)

但是，它没有以正确的方式工作。当`dateFormat.parse(inDate.trim());`被调用时，它不会引发错误，而是对日期加一。

例如，如果`inDate.trim()`是`"2005-02-29"`，那么它会使解析像`"2005-03-01"`。

显然，我不会有这种行为。可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:19:58.260

2005年2月有28天。通过解析`"2005-02-29"`，有一天的偏移量将日期变为 3 月 1 日。用于`setLenient(false)`防止解析器“调整”无效日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:21:07.973

将 上的[`setLenient()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)方法设置[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)为 false 以在这种情况下抛出错误：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
sdf.setLenient(false);
System.out.println(sdf.parse("2005-02-29")); // This would throw parse exception. 
```

# php - 错误：无法打开流：HTTP 请求失败！使用 for 循环读取 JSON 数据时

> ID：12765853
> 
> 赞同：0
> 
> 时间：2012-10-07T03:18:45.400
> 
> 标签：php, json, twitter

我正在创建一个 web 应用程序，它收集 twitter 用户对某个关键字（在 PHP 中）的所有评论，并且我使用这个 URL：[http](http://search.twitter.com/search.json) ://search.twitter.com/search.json 。

问题是：我使用 for 循环来检索所有评论，当涉及到第 21 页时，它会抛出此错误：

```
Warning: file_get_contents(http://search.twitter.com/search.json?page=21&max_id=254777971188039680&q=love&rpp=100&result_type=mixed): failed to open stream: HTTP request failed! HTTP/1.0 403 Forbidden in C:\xampp\htdocs\cs2\action.php on line 30 
```

但是，如果我通过将 URL 输入到浏览器的地址栏来访问上面的链接（http://search.twitter.com/search.json?page=21&max_id=254777971188039680&q=love&rpp=100&result_type=mixed），它仍然会返回结果！

那么，为什么这个链接可以被浏览器直接访问，而不能被`file_get_contents`函数读取呢？

//添加代码：

```
<?php
    $keyword1 = $_POST["key"];
    $keyword = str_replace(' ', '%20',$keyword1);
    $url = "http://search.twitter.com/search.json?q=$keyword&rpp=100&result_type=mixed";
    $json_string = file_get_contents($url);
    $data = json_decode($json_string);
    $olddata = $data;
    $size = count($data->{"results"});
    $_SESSION["dem"] = 0;
    for($i = 0; $i < $size;$i++){
        echo($data->{"results"}[$i]->{"text"}."<br/>");
        $_SESSION["dem"]++;
    }
    while(true){
        try{
        sleep(0.01);
        $url = "http://search.twitter.com/search.json".$olddata->{"next_page"};
        if(strcmp($url,"http://search.twitter.com/search.json") == 0) break;
        $json_string = file_get_contents($url);
        $data = json_decode($json_string);
        $olddata = $data;
        $size = count($data->{"results"});
        for($i = 0; $i < $size;$i++){
            echo($data->{"results"}[$i]->{"text"}."<br/>");
            $_SESSION["dem"]++;
        } 
        }
        catch(Exception $e){

            break;
        }
    }

?> 
```

# c++ - 如何编写一个返回类型的函数，该类型是其子函数的返回类型

> ID：12765855
> 
> 赞同：3
> 
> 时间：2012-10-07T03:18:52.597
> 
> 标签：c++

我想写一个函数来调用几个子函数并返回这些子函数的结果。

```
sub functions:
template<class A> A sub1(A a)
template<class B> B sub2(B b, int i)
template<class C> C sub3(C c, string p) 
```

该函数将在 switch 语句中相应地调用它们。抱歉，我只有伪代码，因为我对这个问题感到困惑并且没有开始编写代码。

```
mf(string s)
{
  int k;
  k = process(s)
  string
  switch (k){
  case 0:
    return sub1(k);
  case 1:
    return sub2(s, k);
  case 2:
    return sub3(k, s);
  default:
    break;
  }
} 
```

由于现在没有返回类型，我如何在上面定义 mf ？再次使用模板？顺便说一句，我的 c++ 编译器确实支持我不太熟悉的 c++ 11 标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T03:28:53.543

如果您需要一个返回其子函数值的函数，则所有这些函数都需要相同的返回类型。

这是一个没有意义的小例子：

```
double calculatedPositive(double value)
{
    // Do stuff
}

double calculatedNegative(double value)
{
    // Do stuff
}

double functionA(double value)
{
     if(value > 0)
         return calculatePositive(value);
     else
         return calculateNegative(value);
} 
```

P.-S。如果您说出您想要达到的目标，我们可以为您提供更好的答案；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T04:57:30.087

C++ 基本上是一种静态类型语言，这意味着所有类型的表达式都是在编译时而不是在运行时决定的。

在静态类型语言中使用动态类型是可能的，但不建议广泛使用。因为这样做你放弃了该语言提供的几乎所有多态特性。您必须手动检查类型，或实现您自己的基于动态类型的多态性。

如果返回的数据不太复杂，标记结构通常是个好主意：

```
struct Value
{
    enum {INT, FLOAT, PTR} type;
    union
    {
        int   int_data;
        float float_data;
        void *ptr_data;
    };
}; 
```

对于需要支持大量操作的更复杂的数据类型，您应该考虑使用抽象接口和继承。

如果您认真考虑过这个问题，并且认为上述方法都不适用于您的问题，并且动态类型是最好的方法，那么这里有一些选项：

*   `boost::any`-- 适用于所有类型的独特容器。需要测试类型并在使用前手动转换它们。

*   `boost::variant`- 一个类似联合的容器，它通过`boost::static_visitor`.

*   一些编程框架有自己的动态类型支持。一个例子是`QVariant`在 Qt 中。如果您在这样的框架中，通常建议使用它们而不是其他库中的其他东西。

# c++ - C++ - getline() 出于某种原因一遍又一遍地读取同一行

> ID：12765861
> 
> 赞同：1
> 
> 时间：2012-10-07T03:20:58.550
> 
> 标签：c++, getline

我想知道 WTF 我的 while 循环调用 istream& getline ( istream& is, string& str ); 继续阅读同一行。我有以下调用getline的while循环（嵌套在几个级别的其他while循环和if语句中），但我的输出语句是while循环代码块中的第一个代码行告诉我它正在读取同一行并且再说一遍，这就解释了为什么我的程序完成后我的输出文件不包含正确的数据。

```
while (getline(file_handle, buffer_str)) {
      cout<< buffer_str <<endl;
      cin.get();
      if ((buffer_str.find(';', 0) != string::npos) && (buffer_str.find('\"', 0) != string::npos)) { //we're now at the end of the 'exc' initialiation statement
         buffer_str.erase(buffer_str.size() - 2, 1);
         buffer_str += '\n';
         for (size_t i = 0; i < pos; i++) {
             buffer_str += ' ';
         }
         buffer_str += "throw(exc);\n";
         for (size_t i = 0; i < (pos - 3); i++) {
             buffer_str += ' ';
         }
         buffer_str += '}';
      }

      else if (buffer_str.find(search_str6, 0) != string::npos) { //we're now at the second problem line of the first case
         buffer_str += " {\n";
         output_str += buffer_str;
         output_str += '\n';
         getline(file_handle, buffer_str); //We're now at the beginning of the 'exc' initialiation statement
         output_str += buffer_str;
         output_str += '\n';

         while (getline(file_handle, buffer_str)) {
               if ((buffer_str.find(';', 0) != string::npos) && (buffer_str.find('\"', 0) != string::npos)) { //we're now at the end of the 'exc' initialiation statement
                 buffer_str.erase(buffer_str.size() - 2, 1);
                 buffer_str += '\n';
                 for (size_t i = 0; i < pos; i++) {
                     buffer_str += ' ';
                 }
                 buffer_str += "throw(exc);\n";
                 for (size_t i = 0; i < (pos - 3); i++) {
                     buffer_str += ' ';
                 }
                 buffer_str += '}';
               }

               output_str += buffer_str;
               output_str += '\n';

               if (buffer_str.find("return", 0) != string::npos) {
                  getline(file_handle, buffer_str);
                  output_str += buffer_str;
                  output_str += '\n';
                  about_to_break = true;
                  break; //out of this while loop
               }
         }
      }
      if (about_to_break) {
         break; //out of the level 3 while loop (execution then goes back up to beginning of level 2 while loop)
      }
      output_str += buffer_str;
      output_str += '\n';
} 
```

由于这个问题，我的 if 语句和我的循环中的 else 语句没有按应有的方式运行，并且它不会在应该的时候跳出该循环（尽管它最终会跳出它，但我没有不知道到底是怎么回事）。

任何人都知道可能导致此问题的原因是什么？

提前致谢。

# ruby-on-rails - 如何将现有模型与 Rails 中的新模型相关联

> ID：12765862
> 
> 赞同：0
> 
> 时间：2012-10-07T03:21:03.563
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个“小费”模型和一个“团队”模型。我正在尝试创建一个表单，用户将在其中从几场比赛中选择获胜的球队。到目前为止，用户可以选择获胜的团队，并且这些 id 被保存为 Tip 模型 (team_id) 中的外键。但是保存后，我不能去（例如）@tip.team.name。我需要做什么 ？我如何关联它（我虽然如果设置了外键，rails 可能会神奇地做到这一点），我对 rails 很陌生。谢谢你的帮助 ！

```
class Tip < ActiveRecord::Base
attr_accessible :user_id, :team_id, :team, :game_id, :game, :comp, :comp_id
belongs_to   :game
belongs_to   :comp
belongs_to   :team
end

class Team < ActiveRecord::Base
attr_accessible :name
has_many   :tips
end

def create
params['game'][0].each do |key, value|
    @tip = Tip.new
    @tip.team_id = value
    @tip.game_id = key
    @tip.save
end 
```

最后一种方法也可能很混乱，但不知道该怎么做。我想以一种形式创建几个“提示”。

编辑：要明确的是，我很确定这是一对多的关系，我正在以一种形式创建多个提示，但每个提示仅与一个团队有关。

编辑：实际上我的方法（我确信这不是最好的方法，确实允许tip.team.name。这是一个与我的测试数据相关的愚蠢错误，让我不这么认为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:06:57.273

您真正需要的是使用 has_many through 关系来链接提示和团队。这是因为一个小费可以有多个团队，但一个团队也可以有多个小费。您将需要创建第三个表来执行此操作，可能名为 TeamsTips。以下是您可以设置的方法：

```
class Tip < ActiveRecord::Base
  has_many :teams_tip
  has_many :teams, :through => :teams_tip
end

class TeamsTip < ActiveRecord::Base
  belongs_to: teams
  belongs_to: tips
end

class Team < ActiveRecord::Base
  has_many :teams_tip
  has_many :tips, :through => :teams_tip
end 
```

现在，当您拥有 @tip 时，您可以使用 @tip.teams 找到所有团队。请记住，这将是一个数组，因此要让第一支队伍使用@tip.teams[0]。同样，如果你有一个@team，你可以通过@team.tips 获得它的所有提示。

有关如何通过关联设置此 has_many 的更多信息，请参阅[Active Record 关联指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:17:24.990

如果您的关联是“提示属于一个团队”和“团队可以有很多提示”，那么您在问题中定义的关联是正确的。

如果您想在创建团队时创建多个提示或为已创建的团队添加/编辑/删除提示，请查看“accepts_nested_attributes_for”和[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)。

如果您可以使用“@team.name”获取团队名称，那么您应该使用“@tip.team.name”获取它

# java - Java中的长变量/方法名有什么本质上的错误吗？

> ID：12765864
> 
> 赞同：2
> 
> 时间：2012-10-07T03:21:38.817
> 
> 标签：java

> **可能重复：**
> [Java 方法名称何时过长？](https://stackoverflow.com/questions/2230871/when-is-a-java-method-name-too-long)

我知道这可能是个人意见的问题，但我想知道什么是标准做法，什么是不受欢迎的。

我的一位大学教授似乎总是让他的变量和方法名称尽可能短（例如，getAmt() 而不是 getAmount）。

我对此没有异议，但就个人而言，如果它增加了描述性，我更喜欢我的时间更长一点，这样阅读它的人就不必检查或参考文档。

例如，我们创建了一个给定球员列表的方法，返回进球最多的球员。我做了这个方法`getPlayerWithMostGoals()`，这是错的吗？我辛辛苦苦地选择了一种让它变短的方法，但后来我想“为什么？”。它清楚地表达了这一点，并且 Eclipse 可以在我键入时轻松自动完成它。

我只是想知道短变量名是否已成为过去，因为需要所有内容都尽可能小以提高效率。这仍然是一个要求吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T03:39:12.840

本质上没有错，最好是描述性的而不是神秘的。但是，对于尝试做太多事情或可以重构的方法来说，这通常是代码异味

坏的：`getActInfPstWeek`

好的：`getAccountInformationForPastWeek()`

更好的`getAccountInformation(DateRange range)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T03:29:43.250

我更喜欢长变量/方法名称来描述正在发生的事情。在您的情况下，我认为 getPlayerWithMostGoals() 是合适的。当我看到像“amt”这样的短变量名时，这让我很困扰，我必须将其转置在我的脑海中（转换为“数量”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:36:00.700

类似的东西`getAmt()`看起来像`C++`代码风格......在java中通常使用更具描述性的名称。

你的教授提出了一个很好理解的方法。但这是一个非常流行的词。这不是一般情况。使用你的“longWordStyle”风格它更像是java。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T03:36:05.473

根据标准，建议使用较长的描述性名称，以使其在长期内更具可读性和可维护性。如果您使用非常简短的命名，例如变量 as `a`，您将忘记自己，一段时间后该变量的含义。这在更大的程序中变得更加成问题。虽然我没有看到使用`getAmt()`代替的问题`getAmount()`，但绝对`getPlayerWithMostGoals()`比类似的更可取`getPlayer()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T03:37:52.930

长名称，短名称，这一切都取决于。有很多方法和讨论，但实际上方法的名称应该反映其意图。这有助于您进一步理解代码。举这个例子。

```
public void print(String s) 
```

漂亮的名字，简短，简洁......不是吗？好吧，实际上没有，如果没有文档告诉您“打印”是什么意思。我说`System.our.println`的是一种打印字符串的方式，但您可以将打印定义为将字符串保存在文件中或在对话框中显示。

```
public void printInConsole(String s) 
```

现在没有任何误解。大多数人可以告诉您，您可以阅读该方法的 JavaDoc 来理解它，但是......您是否要阅读完整的段落来确定您要使用的方法是否满足您的需求？

IMO，方法应该至少描述一个动作和一个实体（如果它们与一个相关）。“长”也是一种看法……但真正长的名称会使代码难以结构化。这是一个获得适当平衡的问题。

根据经验，我会取消缩写并使用 JavaDoc 来进一步描述方法的意图。描述性名称可以很长，但奖励是可读性和不言自明的代码。

# java - 单击文本字段并清除文本？

> ID：12765872
> 
> 赞同：1
> 
> 时间：2012-10-07T03:22:55.490
> 
> 标签：java, swing, jtextfield

是否有可能当我单击文本字段时，它会清除那里输入的最近文本？我的情况是，假设这些是文本字段。

```
 Name: Last Name     First Name      Middle Initial 
```

然后我会单击姓氏，它将被清除，与名字和中间名首字母相同。感谢阅读，希望你能帮到我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T03:34:51.187

考虑一个 FocusListener，其中所有文本都被选中：

```
myTextField.addFocusListener(new FocusAdapter() {
  public void focusGained(FocusEvent fEvt) {
    JTextField tField = (JTextField)fEvt.getSource();
    tField.selectAll();
  }
}); 
```

通过选择所有文本，您可以让用户选择键入并删除当前文本并将其替换为新文本，或者使用鼠标或箭头键保留当前文本并可能更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:44:13.657

我认为气垫船是对的。最好使用 a`FocusListener`来达到这个目的。

我会编写一个可以处理这个问题的实用程序类，我已经为自动选择做了类似的事情。意味着我不必扩展出现的每个文本组件，也不必因为失去做同样事情的小焦点听众而混乱。

```
public class AutoClearOnFocusManager extends FocusAdapter {

    private static final AutoClearOnFocusManager SHARED_INSTANCE = new AutoClearOnFocusManager();

    private AutoClearOnFocusManager() {

    }

    public static AutoClearOnFocusManager getInstance() {
        return SHARED_INSTANCE;
    }

    @Override
    public void focusGained(FocusEvent e) {
        Component component = e.getComponent();
        if (component instanceof JTextComponent) {
            ((JTextComponent)component).setText(null);
        }
    }

    public static void install(JTextComponent comp) {
        comp.addFocusListener(getInstance());
    }

    public static void uninstall(JTextComponent comp) {
        comp.removeFocusListener(getInstance());
    }        
} 
```

然后你只需要使用

```
JTextField textField = new JTextField("Some text");
AutoClearOnFocusManager.install(textField); 
```

如果您只是想提供“提示”（提示用户的字段内的文本），您还可以查看[Prompt API](http://code.google.com/p/xswingx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:32:30.703

为什么不使用`mouseClicked`事件？

所以，你可以有类似的东西

```
jTextFieldMyText.addMouseListener(new java.awt.event.MouseAdapter() {
    public void mouseClicked(java.awt.event.MouseEvent evt) {
        jTextFieldMyTextMouseClicked(evt);
    }
});

private void jTextFieldMyTextMouseClicked(java.awt.event.MouseEvent evt) {
    jTextFieldMyText.setText("");
} 
```

在焦点的情况下

```
jTextFieldMyText.addFocusListener(new java.awt.event.FocusAdapter() {
    public void focusGained(java.awt.event.FocusEvent evt) {
        jTextFieldMyTextFocusGained(evt);
    }
});

private void jTextFieldMyTextFocusGained(java.awt.event.MouseEvent evt) {
    jTextFieldMyText.setText("");
} 
```

如果不希望立即删除文本，请多次使用`selectAll()`而不是建议`setText("")`

# css - CSS：列表项中的锚点不会保持 100% 高度

> ID：12765877
> 
> 赞同：0
> 
> 时间：2012-10-07T03:24:07.993
> 
> 标签：css, vertical-alignment, css-tables

所以，这里的瘦...

我有[一个页面，其中包含一个列表`display:table-cell`](http://www.flcbranson.org/estherssistershusband.php)。随着浏览器宽度的调整，列表的内容（锚点）可能会换行到 2 行。问题是不换行到 2 行的锚不会保持 100% 的高度。

CSS...

```
.home .pushes ul {display:table;}
.home .pushes ul li {display:table-cell; vertical-align:middle; width:25%; background-color:#e5a015; color:#ffffff;}
.home .pushes ul li a {display:block; padding:4em 0; padding:4rem 0;} 
```

因此， 的高度`<li>`应由 的高度和填充确定`<a>`。但是，既然是`<display:table-cell>`，高度是由最高者决定的`<a>`。

好的，所以只需设置`a {height:100%;}`. 但是，然后，锚不保留填充。所以，只是设置`li {height:160px;}`或其他东西。但是，锚点不是垂直居中的。所以，只需设置`li {line-height:160px;}`. 但是，当它包裹到 2 行时，锚是巨大的。

那么，男人要做什么呢？

我能做到`li {display:inline-block;}`。但我希望所有盒子的高度相同。

JJ

编辑...

为后代包含的 HTML...

```
<ul>
    <li>bleh</li>
    <li>bleh</li>
</ul> 
```

JJ

编辑 2...

锚点背景颜色是没有增长其父级的全部高度。

![注意底部的 4 个框](../Images/d500ac4e794ef56edd451f61ceca0fc0.png)

我没有意识到我可以上传图片。谢谢你的提示。

JJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T02:38:20.253

解决此问题的最佳方法是使用位置：相对和位置：绝对。

例子：

```
li {
  position: relative;
}

li a {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
} 
```

但是，上述方法不起作用，因为您的 li 使用的是“display: table-cell;” 和 position: relative 没有为表格单元格定义（请参阅：[在 TD 中使用相对位置/绝对位置？](https://stackoverflow.com/questions/4564638/using-position-relative-absolute-within-a-td)）。

因此，您唯一的选择是使用 Javascript 来完成这项工作。有很多解决方案，但这里有一个：

使用 jQuery 调整大小方法 ( [http://api.jquery.com/resize/](http://api.jquery.com/resize/) ) 来跟踪窗口何时调整大小。当窗口调整大小时，修改锚标记的填充，使其继续覆盖整个空间。

# iphone - Objective-C 将块传递到块中

> ID：12765879
> 
> 赞同：2
> 
> 时间：2012-10-07T03:24:35.203
> 
> 标签：iphone, retain, block

这是一个有点棘手的场景。我一直在研究积木并第一次开始实施它们，我发现自己想创建一个“复合积木”。这是我的代码，大致如下：

```
- (void)moveToPosition:(NSInteger)pos withVelocity:(CGFloat)vel onCompletion:(void(^)(BOOL completed))completionBlock
{

    void (^compoundBlock) (BOOL completed) = ^(BOOL completed) {
        [self unlockInteractionFromPullDownMenuTab];
        void(^innerCompletionBlock)(BOOL completed) = completionBlock;
        innerCompletionBlock(completed);
    };

    // Animate
    [UIView animateWithDuration: duration
                     animations: ^void{ [self.pullDownMenu setFrame:newFrame]; }
                     completion: compoundBlock
     ];

} 
```

目标是获取传递给此方法的代码块，向其中添加一些内容，然后将其传递给动画方法调用。但是，我无法在线访问：

```
innerCompletionBlock(completed); 
```

我认为我的 innerCompletionBlock 正在被释放，但我不完全确定为什么。据我了解，块会复制你扔给它们的所有内容，包括对自我的引用——这会产生保留循环，而我最近学会了避免这种情况。

实际上，我最初尝试过这个：

```
void (^compoundBlock) (BOOL completed) = ^(BOOL completed) {
    [self unlockInteractionFromPullDownMenuTab];
    completionBlock(completed);
}; 
```

但是我得到了错误的访问，我想也许compoundBlock没有复制completionBlock，所以我在块内显式声明了一个（块）变量并分配它以试图让它保留（也许有点傻，但我在 ARC 下运行，所以我不能手动保留调用）。

无论如何，很明显，compoundBlock 在传递给 UIView 时会被保留，但我不确定如何在 CompoundBlock 中保留我的 onCompletion/innerCompletionBlock，因为我在 ARC 下运行。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:36:56.193

啊哈，想通了。有点傻，真的。

有很多次我调用方法`- (void)moveToPosition:...`并传递`nil`给`completionBlock`参数......因为我不需要在动画结束时做任何额外的事情，只想要`[self unlockInteractionFromPullDownMenuTab];`在复合块中添加的内容。

有道理，对吧？

...仅当您在调用块之前检查 nil 时。正如SO[其他地方](https://stackoverflow.com/a/10473877/700471)所讨论的，“当你执行一个块时，首先测试块是否为 nil 很重要”。好吧，我在那里吸取了教训。

此代码有效：

```
// Compound completion block
void (^compoundBlock) (BOOL completed) = ^(BOOL completed) {
    [self unlockInteractionFromPullDownMenuTab];
    if (completionBlock != nil) {
        completionBlock(completed);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:32:24.247

块是在堆栈上创建的。您需要复制`completionBlock`到堆中，以便确保在尝试运行它时它仍然有效。只需将其放在方法的顶部：

```
completionBlock = [completionBlock copy]; 
```

请注意，如果`completionBlock`已经*在*堆上，这只会返回相同的堆副本。

# python - 对图像 pyglet 应用转换

> ID：12765895
> 
> 赞同：0
> 
> 时间：2012-10-07T03:29:34.590
> 
> 标签：python, transformation, pyglet

我正在尝试从第一人称视角制作 rpg。我查看了 pyglet api 参考，但我能找到的唯一在同一轨道上的是“get_transform”方法，这只提供了翻转和旋转的选项（据我所知）

有没有办法在pyglet中做到这一点？我需要在我的项目中使用一些 OpenGL 的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:57:19.580

Pyglet 使用 OpengL，看看：[http ://www.pyglet.org/doc/programming_guide/index.html](http://www.pyglet.org/doc/programming_guide/index.html)

# java - 使用 App Engine 存储的字符串的最大长度？

> ID：12765897
> 
> 赞同：12
> 
> 时间：2012-10-07T03:29:41.133
> 
> 标签：java, google-app-engine, objectify

使用 App Engine存储`String`字段时：

*   App Engine 数据存储区可以处理的最大值`length()`是多少？`String`
*   此外，如果使用 Objectify，此最大长度是否相同，或者 Objectify 是否进行了一些影响此最大长度的处理？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T18:20:46.370

Objectify 会自动将超过 500 个字符的字符串转换为原生文本存储。如果要索引字符串，请小心；文本对象未编入索引，因此 String > 500 字符将未编入索引。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-01T00:48:50.530

我认为对此的回应已经过时，所以我正在更新。我正在使用 GAE 版本 1.9.22 并在错误日志中收到此信息：

字符串属性必须为**1500**字节或更少。相反，使用 com.google.appengine.api.datastore.Text，它可以存储任意长度的字符串。

使用 com.google.appengine.api.datastore.Text 可以很好地将 String 对象转换为 Text（例如，在代码的**服务器端**使用 new Text(thisString) 。对 com.google.appengine.api 中的库的任何引用。 datastore.* 在客户端不起作用。找不到类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-07T04:54:53.467

根据[文档](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)，500 个字符。不，Objectify 是一个包装器，不会修改您的数据，因此数据大小限制没有改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-23T17:48:29.547

根据 2016 年 10 月对 Google 数据存储区文档的更新，以下是限制

> 索引字符串属性的 UTF-8 编码的最大大小：1,500 字节
> 
> 未索引属性的最大大小：1,048,487 字节（1 MiB - 89 字节）

`String`因此，您可以在未索引的属性中存储大小接近 1MB 的字符串。

# c - C 将字符串映射到函数

> ID：12765899
> 
> 赞同：1
> 
> 时间：2012-10-07T03:29:48.460
> 
> 标签：c, string, shell, map, function-pointers

所以，我正在制作一个 Unix minishell，但遇到了障碍。我需要能够执行内置函数，所以我做了一个函数：

```
int exec_if_built_in(char **args) 
```

它需要一个字符串数组（第一个是命令，其余是参数）。对于非内置命令，我只使用 execvp 之类的命令，但是我需要找到一种将第一个字符串映射到函数的方法。我正在考虑制作两个数组，一个是字符串，另一个是带有相应的函数指针。但是，由于其中许多功能会有所不同（返回和接受不同的东西），因此这种方法行不通。我还想过用名称属性和函数指针属性创建一个结构数组，但是由于我将使用的函数的不同性质，这将不起作用。

那么，根据字符串的输入执行函数的最佳方法是什么？如何将字符串映射到某个函数？我对函数指针不是很熟悉，所以我可能会遗漏一些东西。

谢谢你们的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T03:35:28.970

> 我正在考虑制作两个数组，一个是字符串，另一个是带有相应的函数指针。

这是正确的做法。制作接受相同类型参数的包装器函数^*然后从包装器内部调用“真实”函数。

如果您想“为风格赢得额外积分”，请按字母顺序对字符串数组进行排序，并对字符串数组使用二进制搜索。当两个数组变大时，这将使您节省一些 CPU 周期。

* * *

^*也许您可以使用`char **`，因为这就是您的`exec_if_built_in`需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T03:33:17.553

如果您的案例如此多样化以至于表驱动方法不合适，那么 if/else-if 级联可能是最好的解决方案。

```
if(!strcmp(args[0], "cat")) {
    /* cat a file */
} else if(!strcmp(args[0], "dog")) {
    /* dog a file */
} else if(!strcmp(args[0], "echo")) {
    /* create an echo chamber */
} ... 
```

# magento - 客户登录时未显示 Magento UPS 运输选项

> ID：12765905
> 
> 赞同：1
> 
> 时间：2012-10-07T03:30:48.290
> 
> 标签：magento, ups

好的，我已经解决了我的问题（见下文），但需要一个新的解决方案。我将 UPS 包裹的重量限制设置为 22 磅。我假设超过 22 磅的订单会被分成多个包裹。例如，总订单可能是 33 磅，我需要计算一个 22 磅的包裹和一个 11 磅的包裹的运费。

UPS 选项被禁用，而不是计算两个或多个包裹的运费。有人知道解决方法吗？

原始问题---当我以注册用户身份登录时尝试结帐时，UPS XML 模块未显示为选项。但是，当我以客人身份结账时，UPS 选项会出现。谁能帮我解决这个问题？我确实更改了很多 .xml 文件，但我认为我没有弄乱任何东西来禁用注册用户的特定运输选项。无论如何，我们将不胜感激！

谢谢，加里

# javascript - 在 Javascript 中从对象中提取数据 - 已修复 - 我的双重编码 Json Epic 失败

> ID：12765906
> 
> 赞同：0
> 
> 时间：2012-10-07T03:31:31.347
> 
> 标签：javascript, php, jquery, json, ajax

我在从 PHP 传回的对象中检索数据时遇到问题。我尝试了许多不同的方法来访问这些数据，但都没有奏效。

在 Firebug 中，我看到以下内容......（在 Firebug 中看起来更好） - 我试图让它看起来尽可能接近 Firebug

**结果** 对象 { data="{"formName":"form3","formData":"数据在这里"}", phpLiveDebug="<...s: 198.91.215.227"}

**数据** "{"formName":"form3","formData":"数据在这里"}"

**phpLiveDebug** "<...s: 198.91.215.227"

我可以访问 phpLiveDebug 没问题，但数据部分是一个对象。我尝试了以下...

```
 success: function(results) {
            //$("#formName").val(results.data.formName);
            //$("#formName").val(results.data[0].formName);
            //$("#formName").val(results.data[0]);
            //$("#formName").val(results.data[1]);
            //$("#formName").val(results.data[0]["formName"]);
            var tmp = results.data[formName]; 
            alert("!" + tmp + "!");
            $("#formName").val(tmp);
            $("#jqueryPHPDebug").val(results.phpLiveDebug);
        } 
```

此行在上面的示例中有效...

```
$("#jqueryPHPDebug").val(results.phpLiveDebug); 
```

但是...我不知道如何获取 results.data 部分中的数据...正如您在上面看到的，我一直在尝试不同的东西，甚至没有列出更多的东西。

我真的希望这条线能起作用:)

```
var tmp = results.data[formName]; 
```

但事实并非如此。所以，经过多天的阅读和修改，我的解决方案是重新编写它以返回类似于 phpLiveDebug 的数据，但后来我想......这一定是我忽略的一些简单的东西......

感谢您的时间。如果可以的话，请尝试解释为什么我上面的逻辑（我试图找出正确方法的可怕尝试）是错误的？

**更新 - 这里的这条线应该有效......但没有......这就是为什么......**

```
 success: function(results) {
            //$("#formName").val(results.data.formName); 
```

为什么这不起作用...

**在我的职能中，我...**

```
 $jsonData["formName"] = $rowName; // the name of the form we are fetching
    $jsonData["formData"] = "data goes here";

    return (json_encode($jsonData)); 
```

**我如何调用该函数...**

```
$dataReturn["data"] = $ds1->Invoke(rawurldecode($_POST["data"]));
if (DEBUGMODE) $dataReturn["phpLiveDebug"] = EH::CloseDebug();
exit (json_encode($dataReturn)); 
```

**我对数据进行了双重编码......出于某种原因......**

```
$("#formName").val(results.data.formName); 
```

没有工作。

**我通过更改 1 行来修复代码...**

```
return (json_encode($jsonData)); 
```

到

```
return $jsonData; 
```

希望这对某人有帮助！

我不知道它到底做了什么不工作，但是......它现在工作了！

*我想知道当你编码一个数组然后添加另一个数组并重新编码时内部会发生什么！* 双重编码。我的错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:35:04.650

键是字符串。

```
var tmp = results.data['formName']; 
```

或者

```
var tmp = results.data.formName; 
```

# c++ - 处理 16 位字符和 char[]

> ID：12765913
> 
> 赞同：0
> 
> 时间：2012-10-07T03:33:41.173
> 
> 标签：c++

因此，在我正在解析的文件格式中，我正在将文件读入缓冲区，似乎每个字母都是 16 位宽。当我将其读入 char * 然后尝试将其打印到 cout 时，它返回一个字符，我假设是因为“2”。表示为 '00 32 00 2E' 我担心它会将其视为 {'\0', '2', '\0', '.'} 并认为它会立即终止。

拥有 16 位字符是否有技巧，或者我是否在寻找不同的数据类型？

# c - 如何使用 vc++2010 链接最新稳定版本的 libCURL

> ID：12765914
> 
> 赞同：2
> 
> 时间：2012-10-07T03:33:40.127
> 
> 标签：c, libcurl

在完全不同的环境（工作、家庭）中的两台不同的机器上，我无法开箱即用地编译 libCURL。运行 nmake -f Makefile.vc mode=dll VC=10，我得到 _IdnToAscii 和 _IdnToUnicode 的未解决的外部符号错误。我相信定义在 Normaliz.lib 中，它在 LFLAGS 中被引用，但它要么没有找到它，要么我拥有的版本没有这些功能。但是我没有看到任何下载此文件的选项...除了注释掉使用这些功能的 2 行之外，任何人都有一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:28:26.190

看起来您没有来自 Windows 的 IDN API。根据 Windows 文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd318151%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318151%28v=vs.85%29.aspx)

以及 libcurl 构建说明： [https ://github.com/bagder/curl/blob/master/winbuild/BUILD.WINDOWS.txt](https://github.com/bagder/curl/blob/master/winbuild/BUILD.WINDOWS.txt)

IDN API 可从 Vista 及更高版本获得，并可从以下位置安装： http: [//www.microsoft.com/downloads/details.aspx? FamilyID=AD6158D7-DDBA-416A-9109-07607425A815](http://www.microsoft.com/downloads/details.aspx?FamilyID=AD6158D7-DDBA-416A-9109-07607425A815)

您可以在 Vista 上构建它，也可以从 Microsoft 安装软件包或放弃 IDN。要在没有 IDN 的情况下构建，只需将**ENABLE_IDN=no**传递给**nmake**。

**注意：**在重新运行具有不同参数的 nmake 之前删除各种构建目录很重要，因为某些库引用可能已经在生成的目标代码中。

# java - 为什么要从我的 LinkedList 中删除所有元素？

> ID：12765917
> 
> 赞同：0
> 
> 时间：2012-10-07T03:33:57.397
> 
> 标签：java, linked-list, doubly-linked-list

为什么我的 remove 方法要从我的双向链表中删除每个元素？如果我取出 if/else 语句，那么我可以成功删除中间元素，但列表头部或尾部的元素仍然存在。但是，我添加了 if/else 语句来处理头部和尾部的元素，不幸的是，这个方法现在删除了我列表中的每个元素。我做错了什么？

```
package week6;

import java.util.Iterator;

public class DblLinkedList<E>
{
   private LinkEntry<E> head = null;
   private LinkEntry<E> tail = null;
   private int size = 0;

   public DblLinkedList()
   {
      head = tail = null;
   }

   public boolean is_empty()
   {
      if (head == null) 
          return true;
      return false;
   }

   public int size()
   {
       int count = 0;
       for (LinkEntry<E> current = head; current != null; current = current.next)
           count++;
       return count;
   }

   public boolean add(E e)
   {   
      LinkEntry<E> new_element = new LinkEntry<E>();
      new_element.element = e;

          if (head == null)
          {
              new_element.next = head;
              head = new_element;
              tail = head;
          }
          else
          {
              tail.next = new_element;
              new_element.previous = tail;
              tail = new_element;
          }
          return true;
   }

   public void remove(int n)
   {
       LinkEntry<E> remove_this = new LinkEntry<E>();

       //if nothing comes before remove_this, set the head to equal the element after remove_this
       if (remove_this.previous == null)
           head = remove_this.next;

       //if nothing comes after remove_this, set the tail equal to the element before remove_this
       else if (remove_this.next == null)
           tail = remove_this.previous;
       //otherwise set the next element's previous pointer to the element before remove_this
       else
       {
           //if remove_this is located in the middle of the list, enter this loop until it is
           //found, then remove it, closing the gap afterwards.
           int i = 0;
           for (remove_this = head; remove_this != null; remove_this = remove_this.next)
           {
               //if i == n, stop and delete 'remove_this' from the list
               if (i == n)
               {               
                   //set the previous element's next to the element that comes after remove_this
                   remove_this.previous.next = remove_this.next;
                   //set the element after remove_this' previous pointer to the element before remove_this
                   remove_this.next.previous = remove_this.previous;
                   break;
               }
               //if i != n, keep iterating through the list
               i++; 
           }
       }
   }

   /*
    * Print the doubly linked list starting at the beginning.
    */
   public void print_from_beginning()
   {
      LinkEntry<E> current = new LinkEntry<E>();
      for (current = head; current != null; current = current.next)
      {
          System.out.print(current.element + " ");
      }
   }

   /*
    * Print the doubly linked list starting the end.
    */
   public void print_from_end()
   {
      LinkEntry<E> current = new LinkEntry<E>();
      for (current = tail; current != null; current = current.previous)
      {
          System.out.print(current.element + " ");
      }
   }

   /* ------------------------------------------------------------------- */
   /* Inner classes                                                      */
   protected class LinkEntry<E>
   {
      protected E element;
      protected LinkEntry<E> next;
      protected LinkEntry<E> previous;

      protected LinkEntry() { element = null; next = previous = null; }
   }
   /* ------------------------------------------------------------------- */
   protected class DblLinkedListImplIterate<E> implements Iterator<E>
   {

       protected LinkEntry<E> next;

       protected DblLinkedListImplIterate()
       {
           next = (LinkEntry<E>) head;
       }

    @Override
    public boolean hasNext() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public E next() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void remove() {
        // TODO Auto-generated method stub
    }   
   }
} 
```

我测试我的方法的主要课程是：

```
package week6;

public class App {

    public static <E> void main(String[] args) {

        DblLinkedList<String> list = new DblLinkedList<String>();

        list.add("Bill");
        list.add("Rohan");
        list.add("James");
        list.add("Krishna");
        list.add("Javier");
        list.add("Lisa");

        System.out.println("List size after all names are added: " + list.size());

        //a. Print the linked list starting at the beginning.
        System.out.println("\nPrint the linked list starting at the beginning:");
        list.print_from_beginning();
        System.out.println();

        //b. Print the linked list starting at the end.
        System.out.println("\nPrint the linked list starting at the end:");
        list.print_from_end();
        System.out.println();

        //c. Remove Bill and print the linked list starting from beginning.
        System.out.println("\nRemove Bill and print the linked list starting from beginning:");
        list.remove(1);
        list.print_from_beginning();
        System.out.println();

        //d. Remove Lisa and print the linked list starting from end.
        System.out.println("\nRemove Lisa and print the linked list starting from end:");
        list.remove(5);
        list.print_from_end();
        System.out.println();

        //e. Remove Krishna and print the linked list starting from the beginning.
        System.out.println("\nRemove Krishna and print the linked list starting from the beginning:");
        list.remove(2);
        list.print_from_beginning();
        System.out.println();

        System.out.println("\nList size: " + list.size());

    }
} 
```

我运行程序后打印出来的结果是：

```
List size after all names are added: 6

Print the linked list starting at the beginning:
Bill Rohan James Krishna Javier Lisa 

Print the linked list starting at the end:
Lisa Javier Krishna James Rohan Bill 

Remove Bill and print the linked list starting from beginning:

Remove Lisa and print the linked list starting from end:
Lisa Javier Krishna James Rohan Bill

Remove Krishna and print the linked list starting from the beginning:

List size: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:45:06.997

通过添加两个`if`块来处理第一个和最后一个，除了之前的内容之外，您还添加了 2 个要运行的可执行块。现在所有三个块都一起执行。我相信你正在尝试做这样的事情（一次只执行一个块）：

```
 public void remove(int n)
   {
       LinkEntry<E> remove_this = new LinkEntry<E>();
      //if remove_this is located in the middle of the list, enter this loop until it is
       //found, then remove it, closing the gap afterwards.
       int i = 0;
       boolean removed = false;
       remove_this = head;

       while(removed == false){
           //if nothing comes before remove_this, set the head to equal the element after remove_this
           if (remove_this.previous == null){
               head = remove_this.next;
               head.previous = null;
               removed = true;
           }

           //if nothing comes after remove_this, set the tail equal to the element before remove_this
           else if (remove_this.next == null){
               tail = remove_this.previous;
               tail.next = null;
               removed = true;
           }
           //otherwise set the next element's previous pointer to the element before remove_this
           else{
               //if i == n, stop and delete 'remove_this' from the list
               if (i == n) {               
                   //set the previous element's next to the element that comes after remove_this
                   remove_this.previous.next = remove_this.next;
                   //set the element after remove_this' previous pointer to the element before remove_this
                   remove_this.next.previous = remove_this.previous;
                   removed = true;
                   break;
               }
               //if i != n, keep iterating through the list
           }
           if(!removed){
               remove_this = remove_this.next;
           }
           i++; 
       }
   } 
```

请注意：当您分配`head`或`tail`处于第一个`if else`条件时，当时`remove_this`是空的，因此使您的`head`或`tail`作为`null`您的打印程序不会打印任何内容。

# android - 复制到 /system - android

> ID：12765919
> 
> 赞同：0
> 
> 时间：2012-10-07T03:34:15.070
> 
> 标签：android, root, su

我一直在尝试将 apk 从另一个 apk 的资产复制到 /system。

这是我所做的，它在我以前的应用程序中工作，但在这个应用程序中没有。我添加了写入外部存储的权限。它正在成功复制到内部存储，而不是 /system。有没有办法直接复制到/system？

> copyStream("y.apk","/sdcard/x.apk");
> 
> ```
> Process mSuProcess;
> 
> mSuProcess = Runtime.getRuntime().exec("su");
> 
> new DataOutputStream(mSuProcess.getOutputStream()).writeBytes("mount -o remount rw /system");
> 
> DataOutputStream mSuDataOutputStream = new DataOutputStream(mSuProcess.getOutputStream());
> 
> mSuDataOutputStream.writeBytes("cp /sdcard/x.apk /system/app/x.apk"); 
> 
> mSuDataOutputStream.writeBytes("exit\n"); 
> ```

# php - 不能在写上下文中使用方法返回值；不知道从这里去哪里

> ID：12765922
> 
> 赞同：0
> 
> 时间：2012-10-07T03:34:43.153
> 
> 标签：php, mysql

> **可能重复：**
> [不能在写上下文中使用函数返回值](https://stackoverflow.com/questions/5321522/cant-use-function-return-value-in-write-context)

这是我的变量来源。

```
<?php
if ($admin->get_permissions()=3)
echo 'Welcome to the Admin Panel';
else
echo 'Sorry, You do not have access to this page';
?> 
```

我实际上试图用 if 语句调用的代码是：

```
public function get_permissions() {
        $username = $_SESSION['admin_login'];
        global $db;
        $info = $db->get_row("SELECT `permissions` FROM `user` WHERE `username` = '" . $db->escape($username) . "'");
        if(is_object($info))
            return $info->permissions;
        else
            return '';
    } 
```

这应该是一种通过使用 else if 语句来调用我的用户被授权的页面的简单方法。*或者所以我想*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:36:17.503

你需要改变

```
$admin->get_permissions()=3 
```

至

```
$admin->get_permissions()==3 
```

`=`是赋值运算符，`==`是相等比较运算符。解析器告诉您不能分配`3`给函数的结果。这样做没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:36:06.537

`=`!=`==`

```
if ($admin->get_permissions() == 3) 
```

# asp.net-mvc - 我可以让 razor 将 .html 文件扩展名识别为自己的吗？

> ID：12765932
> 
> 赞同：2
> 
> 时间：2012-10-07T03:36:08.937
> 
> 标签：asp.net-mvc, razor

所以我可以使用设计器模式吗？我对 asp.net mvc html 助手的依赖较少，但并没有完全放弃它，而是选择使用纯 html（在设计模式下渲染应该没有问题）

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:43:02.357

编写你自己的视图引擎

```
public class MyRazorViewEngine : RazorViewEngine 
{
    public MyRazorViewEngine() 
{
        base.AreaViewLocationFormats = new string[]
    {
    "~/Areas/{2}/Views/{1}/{0}.html", 
    "~/Areas/{2}/Views/Shared/{0}.html", 
        };
 .... 
```

有关要包含的其余位置，请参阅 System.Web.Mvc.RazorViewEngine

然后在启动时注册

```
ViewEngines.Engines.Clear();
ViewEngines.Engines.Add(new MyRazorViewEngine()));
    RazorCodeLanguage.Languages["html"] = new CSharpRazorCodeLanguage(); 
```

并将以下内容添加到您的应用程序 web.config

```
<system.web>    
  <compilation debug="true" targetFramework="4.5" >
    <assemblies>
      <add assembly="System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </assemblies>
    <buildProviders>
      <add extension=".html"          type="System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor"/>
    </buildProviders>
  </compilation>
</system.web> 
```

上行 - 你得到设计师模式，下行 - 你失去了所有剃须刀突出显示和智能感知

# css - 完整的日历 CSS - 在日历画布之外显示事件

> ID：12765935
> 
> 赞同：0
> 
> 时间：2012-10-07T03:36:57.567
> 
> 标签：css, fullcalendar

如果您查看 fullCalendar 网站，我们会看到一个日历。

如果我试图拖动日历的事件，这些事件总是隐藏在画布的边缘后面![隐藏在画布边缘后面](../Images/a3d32df0868eeac50634d146d654ea17.png)

有什么办法可以修改 CSS，所以事件会在画布之外弹出？![出现在画布外？](../Images/33751d45a28e03a09db07f45713acf11.png)

可以在这里找到日历：http: [//arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:40:17.793

将此添加到您的 CSS 文件中：

```
div.fc-view.fc-view-month.fc-grid {
  overflow: visible;
} 
```

# jquery - 自定义 JQuery 日期选择器不返回所选日期

> ID：12765940
> 
> 赞同：0
> 
> 时间：2012-10-07T03:38:14.007
> 
> 标签：jquery

我使用 datepicker 插件构建了一个自定义选择器，它只让我在一年的两个学期之间进行选择。它必须是 1 月至 6 月或 7 月至 12 月。

```
<script>
$(document).ready(function() {
$( "#semester" ).datepicker({
    stepMonths: 6,
    nextText: "Next semester",
    prevText: "Previous semester",
    monthNames: ["January - June", "", "", "", "", "", "July - December", "", "", "", "", ""]
});
$( "#semester" ).datepicker('setDate', new Date(2012,0,1));
});
</script> 
```

和

```
<style>
.ui-datepicker-calendar {
    display: none;
}
</style> 
```

好吧，我还不能发布图片，但它基本上给了我一个像“一月至十二月”这样的单行字。向右滚动给我“2012 年 7 月至 12 月”，依此类推。

我称之为使用

```
<div id="semester" name="semester" class="date-picker"></div> 
```

在带有标准提交按钮的标准表单内。

现在，它看起来正是我想要的方式，因为我不想要一个，`<input type="text">`但问题是根据 print_r($_POST)，这种方式不会发送数据，但表单中的其他元素是。我显然在这里遗漏了一些东西。

注意：我决定基本上使用 JQuery 来进行设计偏好，因为 datepicker 看起来很整洁。虽然，我现在意识到为此使用 JQuery 可能有点矫枉过正，但既然我已经做到了这一步，我想完成它。

此外，如果有人对我如何实现这一点有更好/更简单甚至同样巧妙的想法，请告诉我。提前致谢。

编辑：我在这里找到了另一个主题，其中我也遇到了同样的问题：[请参阅答案](https://stackoverflow.com/a/8721023/1115775)。显然，一旦我隐藏了日期，就无法选择日期。也许这个问题的答案将包括一个涉及`setDate`? 我不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:10:24.467

表单提交中不包含 Div 元素，即使具有 name 属性也是如此。您要使用的是隐藏输入，并使用您的日期选择器更改此输入的值。

```
$( "#semester" ).datepicker({
    stepMonths: 6,
    nextText: "Next semester",
    prevText: "Previous semester",
    monthNames: ["January - June", "", "", "", "", "", "July - December", "", "", "", "", ""],
    onChangeMonthYear: function(year, month) {
        $('#semesterInput').val(month + ", " + year);
    }
}); 
```

HTML：

```
<div id="semester" class="date-picker"> </div>
<input type="hidden" id="semesterInput" name="semester" /> 
```

此外，请参阅[jQuery Datepicker 文档](http://jqueryui.com/demos/datepicker/)。

# jquery - slideToggle 的问题

> ID：12765943
> 
> 赞同：2
> 
> 时间：2012-10-07T03:39:34.430
> 
> 标签：jquery, addclass, slidetoggle, removeclass

我对 jQuery 有一个小问题。在 HTML 中，我有四个链接。我正在使用 addClass() 和 removeClass() 来指示选择了哪个链接，并且工作正常。但是，我有一个特定的链接，#gallery，它启动了一个幻灯片切换（），列表下方有一个 div。问题是，如果 div 正在显示，并且用户选择了不同的链接，则 .selected 类会正确更改，但 div #book 不会关闭。关于如何解决这个问题的任何想法？我已经包含了下面的所有代码，但是（[我在这里有一个小提琴](http://jsfiddle.net/tGW3D/)，这可能要容易得多。

提前致谢！

HTML

```
<ul>
<li><a class="link" href="#">Click here</a></li>
<li><a class="link" id="gallery" href="#">Click here</a></li>
<li><a class="link" href="#">Click here</a></li>
<li><a class="link" href="#">Click here</a></li>
</ul>
<div id="book"></div> 
```

CSS

```
.link:link, .link:visited { text-decoration:none; }

#book { width:100px; height:100px; background:blue; }

.selected { color:red; } 
```

JS

```
var $book = $('#book');
var $gallery = $('#gallery');

$book.hide();
$('a').click(function(){
$('a.selected').removeClass('selected');
$(this).addClass('selected');
});

$gallery.toggle(
function(){$book.slideDown('slow');},
function(){ 
    $book.slideUp('slow');
    $gallery.removeClass('selected');        
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:49:20.123

`toggle`方法已弃用，您可以`slideToggle`改用，您可以使用 if 语句，如果目标不是具有画廊 ID 的元素，则滑动`#book`元素。

```
$('a').click(function(e) {
    $('a.selected').removeClass('selected');
    $(this).addClass('selected');
    if (e.target.id != 'gallery') $book.slideUp('slow');
});

$gallery.click(function() {
    $book.slideToggle('slow');
}); 
```

[http://jsfiddle.net/Z244D/](http://jsfiddle.net/Z244D/)

# android - 横向模式下 Android ListView 中每行 2 个项目

> ID：12765944
> 
> 赞同：2
> 
> 时间：2012-10-07T03:39:37.143
> 
> 标签：android, android-listview, landscape

在 YouTube android 应用程序中，当您搜索视频时`ListView`，会显示视频结果，**每行 1 个项目**：

![在此处输入图像描述](../Images/28db8e633457ee64467f7e6a0001f5ea.png)

当您将手机旋转到横向模式时，**每行**`ListView`显示2 个项目：

 **![在此处输入图像描述](../Images/28396770834a30eef6ac791182dccbb9.png)

我怎样才能在我的应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:48:40.790

我想你现在已经有了你的解决方案，但对于其他人来说，这可能是一个解决方案：尝试使用 a `GridView`with`android:numColumns="1"`或`2`取决于屏幕方向。

[谷歌指南](http://developer.android.com/guide/topics/ui/layout/gridview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:33:46.030

那要看，

1）您可以使用GridView，如果您的视图较小，它将自动填充横向空间。如果你想要正好 2，你需要设置你的视图宽度，正好是横向模式下屏幕宽度的一半。或者选择选项 2

2）您可以使用不同的适配器。纵向适配器是常用的。景观适配器返回 getCount 小两倍，并在视图创建方法中使用 LinearLayout 和它的子宽度 weight = 1 和 layout_width = 0 创建包含 2 个项目的单元格**

# java - 从 C++ 调用 Java Swing

> ID：12765945
> 
> 赞同：1
> 
> 时间：2012-10-07T03:39:51.463
> 
> 标签：java, c++, swing, wrapper

我用Java（基于Swing）制作了一个游戏引擎，我不想将它翻译成c++并简化这个过程，我想知道如何从c++调用Java api。

基本上我不想做的是使用包装java库并使其可用于c++的包装器。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:33:26.907

使用 JNI。尽量保持对原始数据类型的调用。从 c++ 调用 java 并返回时，它需要覆盖。以下可能是一个很好的帮助。

[http://www.steveolyo.com/JNI/JNI.html](http://www.steveolyo.com/JNI/JNI.html)

# jquery - 使用 AJAX 和 jQuery 下载表单提交和验证

> ID：12765946
> 
> 赞同：0
> 
> 时间：2012-10-07T03:40:03.867
> 
> 标签：jquery, ajax, forms

我为电子邮件地址创建了一个输入表单，该表单可以正常工作并使用 AJAX 和 jQuery 进行验证。我所需要的只是“提交”按钮，以便在验证表单后开始下载特定文件。此文件不会更改，只要电子邮件有效，每个用户都将相同。

我需要在我的 jQuery 验证文件中添加什么才能使其正常工作？谢谢！

这是我的表单代码：

```
<form name="contact" method="post">

    <div id="multitudes-download-form">

        <div style="float:left;">
            <label for="email">Your Email:</label>
            <input type="text" name="email" id="email" value=""/>
        </div>

        <div>
        <input type="submit" name="submit" class="button" id="submit_btn" value="Download Now" />

        <span class="error" id="email_val_error">Please provide a valid email address.</span><div id="loadingdiv" style="float:right;"><img src="../ajax-loader.gif"/></div>
        </div>
    </div>

</form> 
```

这是我的验证：

```
$(function() {
  $('.error').hide();
  $('input.text-input').css({backgroundColor:"#FFFFFF"});
  $('input.text-input').focus(function(){
    $(this).css({backgroundColor:"#FFDDAA"});
  });
  $('input.text-input').blur(function(){
    $(this).css({backgroundColor:"#FFFFFF"});
  });

  $(".button").click(function() {
        // validate and process form
        // first hide any error messages
    $('.error').hide();

        var email = $("input#email").val();
        var atpos=email.indexOf("@");
        var dotpos=email.lastIndexOf(".");
        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length || email== "") {
        $("span#email_val_error").fadeIn();
        $("input#email").focus();
        return false;
    }

        var dataString = 'email=' + email;
        //alert (dataString);return false;

        $.ajax({
      type: "POST",
      url: "process.php",
      data: dataString,
      success: function() {
        $('#multitudes-download-form').html("<h6>Thank you!</h6>")
        .hide()
        .fadeIn(500, function() {
        });
      }
     });
    return false;
    });
});

$(function() {
    $('#loadingdiv')
    .hide()  // hide it initially
    .ajaxStart(function() {
        $(this).fadeIn();
    })
    .ajaxStop(function() {
        $(this).hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:02:06.730

您可以使用 ajax 成功事件上的单击功能触发锚标记以下载文件。提供锚标签的下载链接，并将其设置为 display:none 作为内联样式

# c++ - 使用 C++ 序列化对象的首选方法

> ID：12765949
> 
> 赞同：5
> 
> 时间：2012-10-07T03:41:06.403
> 
> 标签：c++, serialization

Java 有一种非常简单的方法来序列化对象。在 C++ 中找不到类似的东西。我找到了[Boost Serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)，以及使用 ifstream 和 ofstream的[基本方法。](http://www.functionx.com/cpp/articles/serialization.htm)

我有一个任务类，它有一个标题、ID、状态和日期/时间。我想在类中实现一个序列化函数，以二进制模式保存该对象。但我想将类的多个实例保存在一个二进制文件中。比方说，一个任务数组。

在类上实现序列化方法会是一个好方法吗？它一次只会序列化一个，如果我使用 ifstream/ofstream，它看起来不太好，因为我会经常打开和关闭文件。此外，每个任务都将保存在不同的文件中。

Boost 的序列化看起来不错，但如果可能的话，对我来说最好避免第三方依赖。

实现这一目标的最佳方法是什么？

我的班级标题：

```
#ifndef TASK_H
#define TASK_H

class Task {
    public:
        enum Status { COMPLETED, PENDIENT };
        Task(std::string text);
        ~Task();
        // SETTERS
        void setText(std::string text);
        void setStatus(Status status);
        // GETTERS
        const std::string getText() const;
        const bool getStatus() const;
        const int getID() const;
        const int getCount() const;
        const std::string getDate() const;
        const std::string getTime() const;
        // DATE
        const int getDay() const;
        const int getMonth() const;
        const int getYear() const;
        // TIME
        const int getSecond() const;
        const int getMinute() const;
        const int getHour() const;
        // UTILS
        //serialize
        const void printFormatted() const;
        // OVERLOAD
        bool operator==( const Task &text2 ) const;
    private:
        void setID();
        static int sCount;
        int id;
        std::string text;
        Status status;
        tm *timestamp;
};

#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T03:48:06.327

如果你只有一个非常简单的类来序列化，那么实现一个序列化函数来写出你需要保存的少数成员并不难。您没有给出显示您的类的代码示例，但是只要不涉及指针，它应该相对容易一些成员。如果您写出序列化的对象数量，然后是其中包含的数据，那么这可能足以满足您的目的。

如果您想自己实现序列化，我将有一个外部函数（可能是您班级的朋友）处理 Task 数组的序列化，而不是尝试将数组序列化放入您的班级。您可以做的是`serialiseObject()`向您的类中添加一个序列化单个对象的函数，然后从数组序列化函数中重复调用它。这是一个比将数组序列化也固定在类本身上更简洁的设计。

一旦你开始序列化稍微复杂一点的 C++ 对象，尤其是那些包含引用和指针的对象，序列化很快就会成为一个难题，你真的非常想使用经过充分测试的现有第三方机制。

也就是说，作为一个以 C++ 开发为生的人，我认为对 boost 的依赖是正常的，而不是我想要避免的第三方库。Boost 为您提供了许多附加功能，我认为它是“我的标准库”的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T03:54:03.133

由于在 C++ 中没有序列化数据的标准，因此“首选”方式是您更喜欢的方式。Boost 是完全可以接受的，除非您的项目明确禁止使用第三方库，在这种情况下，您当然可以自行开发。

如果您选择自己滚动，请确保您的序列化器和反序列化器不会自行打开和关闭流。相反，调用者需要将流传递给他们。有关更多信息，请参阅[此链接](http://www.parashift.com/c++-faq/serialize-selection.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:46:10.357

我还使用 Google protobuf 进行序列化。虽然不是严格的序列化，但 Google protobuf 可以非常高效且跨平台的数据容器。

# mysql - 如果其中一个字段尚不匹配，如何将一个表移动到另一个表

> ID：12765952
> 
> 赞同：1
> 
> 时间：2012-10-07T03:41:37.747
> 
> 标签：mysql, sql, database, database-table

我无法在数据库中移动内容。我有两个具有不同列名的表，同名的一个是“zip”，但它们具有相同的数据。如果邮政编码在表 b 中不存在，我想从表 A 移动到表 b。我正在使用 mysql 命令行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:44:51.060

采用`INSERT INTO....SELECT`

```
INSERT INTO TableB(colName)
SELECT colName 
FROM    TableB b
        LEFT JOIN TableA a
            ON a.colName = b.colName
WHERE   a.colName IS NULL 
```

`TableA.colName`如果`NULL`它不存在于`TableB`. 只需更改`colName`表中的列名称即可。

**更新 1**

```
INSERT INTO skadate_location_city
    (
        Feature_int_id,
        Admin1_str_code,    
        Country_str_code,
        Feature_dec_lat,    
        Feature_dec_lon,
        zip
    )
SELECT  
        a.city_id     AS Feature_int_id,
        a.state_id    AS Admin1_str_code, 
        a.country_id  AS Country_str_code,
        a.latitude    AS Feature_dec_lat,
        a.longitude   AS Feature_dec_lon,
        a.zip
FROM    skadate_location_zip a
        LEFT JOIN skadate_location_city b
            ON a.zip = b.zip
WHERE   b.zip IS NULL 
```

# javascript - Angular JS：引导选项卡未正确显示

> ID：12765953
> 
> 赞同：0
> 
> 时间：2012-10-07T03:41:42.357
> 
> 标签：javascript, twitter-bootstrap, angularjs

为什么 AngularJS tabbale 指令不显示选项卡。

[http://plnkr.co/edit/yu0Bh0?p=preview](http://plnkr.co/edit/yu0Bh0?p=preview)

这是 angularJS 的可选部分，在文档中随处使用（[此处](http://docs.angularjs.org/guide/overview)）

该指令的来源在[这里](https://github.com/angular/angular.js/blob/master/src/bootstrap/bootstrap.js#L52)。

我在文档站点中没有看到任何特殊的 CSS。

## 编辑：

plunkr（上）的标记是从上面给出的文档链接中复制的。但是，当尝试使用 Angular 主页 (angularjs.org) 上的标记时，它可以工作。不确定它在文档站点上是如何工作的。工作标记具有`data-toggle`属性和指向选项卡窗格的 url 片段。

```
<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class=""><a href="#project-html" data-toggle="tab">index.html</a></li>
        <li class=""><a href="http://angularjs.org/#project-js" data-toggle="tab">project.js</a></li>
        <li class=""><a href="http://angularjs.org/#list-html" data-toggle="tab">list.html</a></li>
        <li class="active"><a href="http://angularjs.org/#detail-html" data-toggle="tab">detail.html</a></li>
        <li class=""><a href="http://angularjs.org/#mongolab-js" data-toggle="tab">mongolab.js</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane" id="project-html">
            <h1>project</h1>
        </div>
        <div class="tab-pane" id="project-js">
            <h1>project js</h1>

        </div>
        <div class="tab-pane" id="list-html">
            <h1>project html</h1>

        </div>
        <div class="tab-pane active" id="detail-html">
        </div>
        <div class="tab-pane" id="mongolab-js">
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:58:13.583

必须在某处编写一些功能/代码才能使选项卡工作。目前，您所拥有的只是 html 和 css（提供结构和样式）并且缺少行为部分（JS 部分）。

在 Angular 中，此行为是自定义编写的，并由指令提供。在 bootstap 中，您需要包含 js 文件（ bootstrap.js ？）。然后有两种方法可以使这项工作。要么在适当的位置包含文档中指定的 data-* 元素，要么在文档就绪调用中包含类似

```
$(".tabbable").tabs(); 
```

在您的 JS 代码中某处。这是您的 plunker 中缺少的行为部分。

# arrays - 如何在 PostgreSQL 中获取数组的最后一个元素？

> ID：12765955
> 
> 赞同：30
> 
> 时间：2012-10-07T03:42:30.900
> 
> 标签：arrays, postgresql, indexing

关于数组的[PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/arrays.html)提供了一个示例，`[-1]`用于访问似乎是数组的最后一个元素；然而，虽然`SELECT arr[2:3];`产生`{5,9}`，`arr[2:-1]`结果`{}`。

在PostgreSQL中如何获取数组的最后一个元素？

编辑：Windows，PostgreSQL v9.2.1

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2018-01-08T07:44:16.430

对于任何数组“arr”，要获取数组 arr 的最后一个元素，请使用

```
SELECT arr[array_upper(arr, 1)]; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-07T04:16:17.243

我认为你误解了这个例子。PostgreSQL 数组不必从 1 索引到`n`，[这只是默认值](http://www.postgresql.org/docs/current/static/arrays.html#ARRAYS-ACCESSING)：

> 默认情况下，PostgreSQL 对数组使用从 1 开始的编号约定，即一个包含***n 个***元素的数组以 . 开头`array[1]`和结尾`array[n]`。

您正在查看的示例是这样的：

```
SELECT f1[1][-2][3] AS e1, f1[1][-1][5] AS e2
 FROM (SELECT '[1:1][-2:-1][3:5]={{{1,2,3},{4,5,6}}}'::int[] AS f1) AS ss; 
```

但是这些负数不像在 Perl 等语言中那样从数组的末尾开始索引。在该`FROM (SELECT ...`部分中，他们指定了开始和结束索引，因此 -1 in`f1[1][-1][5]`只是一个普通的旧索引。考虑这个[`array_dims`](http://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE)结果：

```
=> SELECT array_dims('[1:1][-2:-1][3:5]={{{1,2,3},{4,5,6}}}'::int[]);
    array_dims     
-------------------
 [1:1][-2:-1][3:5] 
```

如果您使用默认的基于 1 的数组，那么您可以使用简单的`arr[array_length(arr, 1)]`. 如果您不使用默认`[1:n]`数组，那么您将不得不弄乱[`array_lower`](http://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE)并[`array_upper`](http://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE)获取第一个和最后一个元素；或者，根据具体情况，您可以使用[`unnest`](http://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE)解包数组，然后将数组作为行集使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-03T15:36:10.263

如果有人使用 Postgre 9.5，[文档](https://www.postgresql.org/docs/9.5/functions-json.html)说：

`-> int`

> 获取 JSON 数组元素（从零开始索引，负整数从末尾开始计数）

所以这对我有用：

```
to_json(arr)->-1 
```

# javascript - HTML 中类似桌面的过渡效果

> ID：12765961
> 
> 赞同：1
> 
> 时间：2012-10-07T03:45:14.243
> 
> 标签：javascript, html, animation, css-transitions

我想在我的 HTML Web 应用程序中创建导航幻灯片动画效果。我只是想知道这是否可能。

场景是：第 1 页 = 联系人列表，第 2 页 = 联系人详细信息。

当用户在列表中选择一个联系人并单击详细信息时，我希望联系人列表向左滑动，而联系人详细信息从右侧滑入（如 iOS 导航应用程序）。

这可能吗？联系人列表和详细信息是两个单独的网页。

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:08:08.867

我的第一个想法是使用 Jquery 移动转换。那个框架真的很接近iOS的UI

[http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-transitions.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-transitions.html)

但是你必须更清楚你所说的单独网页是什么意思。如果您使用动态内容，则可以使用 iframe、锚标记甚至 ajax 调用。

就个人而言，我真的更喜欢 Jquery 的移动方法。每个“页面”都包含在单个 html 文档中带有页面标记的 div 中，也可以加载具有不同过渡效果的其他 html 页面

看看这个例子 [http://jsfiddle.net/4Bgx7/2648/](http://jsfiddle.net/4Bgx7/2648/)

# java - 在 CXF 中使用 spring 并生成服务器和客户端

> ID：12765964
> 
> 赞同：0
> 
> 时间：2012-10-07T03:45:51.600
> 
> 标签：java, web-services, spring, cxf

我创建了一个 Web 服务来添加两个数字，我首先设计了 wsdl，然后使用 cxf 工具 wsdl2java 我创建了服务器和客户端，并且它运行成功，请建议并分享一些可以指导如何实现的 url与 cxf 2 中的 spring 相同，使用 wsdl first 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:15:27.020

使用 Apache CXF 非常简单，并且很容易与 Spring 集成。

此链接提供了使用 Spring 创建服务和客户端所需的一切。

[http://cxf.apache.org/docs/writing-a-service-with-spring.html](http://cxf.apache.org/docs/writing-a-service-with-spring.html)

# c++ - 空 std::ios::openmode？

> ID：12765966
> 
> 赞同：0
> 
> 时间：2012-10-07T03:46:43.723
> 
> 标签：c++, file-io, fstream

我有一个带有函数的基类`virtual std::ios::openmode defaultMode() const`。

如果我想要：这个函数的语法是什么`(defaultMode() | mode) == mode`，模式是另一个`std::ios::openmode`？如何返回`std::ios::mode`不会修改其他模式的“空”？

# javascript - 我如何从我的 ajax 函数中传递除 json 之外的对象？

> ID：12765968
> 
> 赞同：1
> 
> 时间：2012-10-07T03:46:57.553
> 
> 标签：javascript, jquery

我有以下代码：

```
function submitHandler(dialog) {

    dialog.$submits.disableBt();
    dialog.$message.addMessage("loading", "<li>Contacting Server, please wait ...</li>");
    $.ajax({
        url: href,
        dataType: 'json',
        type: 'POST',
        data: dialog.$form.serializeArray()
    })
        .done(onSubmitDone())
        .fail(onSubmitFail());
} 
```

这个函数有一个对话框参数，它是一个看起来像这样的对象：

```
{
        $modal: $modal,
        $form: $modal.find('.form'),
        $message: $modal.find('.message'),
        $submits: $modal.find('.submit-button'),
        href: $form.attr('data-href')
    }; 
```

我需要将对话对象发送到 onSubmitDone 和 onSubmitFail 函数。以前我没有使用对象来保存 $modal、$form 等，并且这些变量都可用于包含在外部函数中的所有函数

两个问题：

**将事物作为对象的一部分传递是明智的，还是应该在外部函数的顶部声明这些变量。**

如果我确实传递了对象，我该如何将它传递给以下对象：

```
function onSubmitDone(json) {
    json = json || {};
    if (json.Success) {
        switch (action) { 
```

我知道我的 json 对象已传递，但我怎样才能传递对话框对象呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:01:21.700

将对话框参数传递给 ajax 回调的一种方法是将其包含在回调定义中，如下所示：

```
function submitHandler(dialog) {
    dialog.$submits.disableBt();
    dialog.$message.addMessage("loading", "<li>Contacting Server, please wait ...</li>");
    $.ajax({
        url: href,
        dataType: 'json',
        type: 'POST',
        data: dialog.$form.serializeArray(),
        success: function(data, textStatus, jqXHR) {
            onSubmitDone(data, textStatus, jqXHR, dialog);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            onSubmitFail(jqXHR, textStatus, errorThrown, dialog);
        }
    });
} 
```

我明确了所有回调参数（data、textStatus、jqXHR、errorThrown），但如果您不想使用它们，则不需要全部使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:59:21.433

[Underscore js](http://underscorejs.org/)是一个用于对象处理和操作的独特且非常棒的库

既然你想传递你的对象是明智的在函数之外声明它然后你可以访问你的对象的部分并在你的函数体中使用它们。

您的代码将如下所示：

```
var jsonObj;    
function submitHandler(dialog) {
        jsonObj=dialog.$form.serializeArray();
        dialog.$submits.disableBt();
        dialog.$message.addMessage("loading", "<li>Contacting Server, please wait ...</li>");
        $.ajax({
            url: href,
            dataType: 'json',
            type: 'POST',
            data:jsonObj 
        })
            .done(onSubmitDone(jsonObj))
            .fail(onSubmitFail(jsonObj));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T04:11:21.687

关于你的问题，如果你可以传递对象是否明智，你可能会发现这样做有点麻烦，需要在需要使用它时将变量拖到周围。我建议将您的对话框对象封装在您的 submitHandler() 函数的父范围内，以便它可用于 submitHandler、onSubmitDone 等。

关于第二个问题，如果您要传递它以及如何将对话对象也传递给 onSubmitDone 函数，您始终可以将响应和对话对象传递给 onSubmitDone 函数，如下所示：

```
.done(onSubmitDone(response, dialog)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T04:21:30.447

如果您将对象作为 的`context`选项传递`$.ajax`，它将在`this`内部`onSubmitDone`和中可用`onSubmitFail`：

```
var jsonObj; // do you really need this global?

function submitHandler(dialog) {
    jsonObj=dialog.$form.serializeArray();
    dialog.$submits.disableBt();
    dialog.$message.addMessage("loading", "<li>Contacting Server, please wait ...</li>");
    $.ajax({
        url: href,
        dataType: 'json',
        type: 'POST',
        data: jsonObj ,
        context: dialog
    })
        // Don't call the handlers from here, no ()!
        .done(onSubmitDone)
        .fail(onSubmitFail);
}

// Receives the data from the server
function onSubmitDone(response) {
    // your object is available as 'this':
    console.log(this.$modal);
}

// Different params here, but 'this' is the same
function onSubmitFail(jqXHR, textStatus) { /* ... */ } 
```

# java - 可以使用什么过程来比较两个单独列表中的元素？

> ID：12765970
> 
> 赞同：0
> 
> 时间：2012-10-07T03:47:32.770
> 
> 标签：java, list, compare

我需要首先访问然后比较两个单独列表中的元素，并根据具有较小值的元素，删除较小的元素并将其分配到第三个列表中的位置。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:59:31.850

我相信您可以将两个列表的元素添加到列表之一的新列表中，然后按升序对其进行排序，例如下面（伪代码）：

```
 List<Integer> list1 = Arrays.asList(2,4,5);
    List<Integer> list2 = Arrays.asList(2,6,8,9,12,56);

    List<Integer> mergedList = new ArrayList<Integer>();
    mergedList.addAll(list1);
    mergedList.addAll(list2);
    Collections.sort(mergedList); 
```

现在`mergedList`应该有排序的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T04:28:40.640

仅供您学习，请在下面找到**示例手动合并程序**：

```
 List<Integer> list1 = Arrays.asList(2,4,5);
    List<Integer> list2 = Arrays.asList(2,6,8,9,12,56);

    List<Integer> mergedList1 = new ArrayList<Integer>();
    mergedList1.add(list1.get(0));

    for(int indx = 1; indx< list1.size(); indx++){
        int valueToMerge = list1.get(indx);
        boolean merged = false;
        for(int indx1 = 0; indx1< mergedList1.size(); indx1++){
            if(mergedList1.get(indx1) > valueToMerge){
                //add the value in middle
                mergedList1.add(indx1, valueToMerge);
                merged = true;
                break;
            }
        }
        if(!merged){
            //add the value in the end
            mergedList1.add(valueToMerge);
        }
    }

    for(int valueToMerge: list2){
        boolean merged = false;
        for(int indx1 = 0; indx1< mergedList1.size(); indx1++){
            if(mergedList1.get(indx1) > valueToMerge){
                //add the value in middle
                mergedList1.add(indx1, valueToMerge);
                merged = true;
                break;
            }
        }
        if(!merged){
            //add the value in the end
            mergedList1.add(valueToMerge);
        }
    } 
```

# python - Python3 ASCII 十六进制到二进制字符串的转换

> ID：12765971
> 
> 赞同：2
> 
> 时间：2012-10-07T03:47:40.193
> 
> 标签：python

我在 Windows 上使用 Python 3.2.3，并尝试将 C 样式 ASCII 文件中的二进制数据转换为其二进制等效项，以便以后使用 struct 模块进行解析。例如，我的输入文件包含“0x000A 0x000B 0x000C 0x000D”，我想将其转换为“\x00\x0a\x00\x0b\x00\x0c\x00\x0d”。

我遇到的问题是 Python 3 中的字符串数据类型发生了变化，并且将十六进制转换为二进制的内置函数（例如`binascii.unhexlify()`）不再接受常规的 unicode 字符串，而只接受字节字符串。这种从 unicode 字符串转换为字节字符串并返回的过程让我感到困惑，所以我想知道是否有更简单的方法来实现这一点。以下是我到目前为止的内容：

```
with open(path, "r") as f:
    l = []
    data = f.read()
    values = data.split(" ")

    for v in values:
            if (v.startswith("0x")):
                    l.append(binascii.unhexlify(bytes(v[2:], "utf-8").decode("utf-8")

    string = ''.join(l) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T04:08:50.470

正如 agf 所说，以 'r' 模式打开图像将为您提供字符串数据。由于您在这里唯一要做的就是查看二进制数据，因此您可能希望以“rb”模式打开并生成字节类型的结果，而不是 str。

就像是：

```
with open(path, "rb") as f:
    l = []
    data = f.read()
    values = data.split(b" ")

    for v in values:
            if (v.startswith(b"0x")):
                    l.append(binascii.unhexlify(v[2:]))

    result = b''.join(l) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T04:13:04.887

```
3>> ''.join(chr(int(x, 16)) for x in "0x000A 0x000B 0x000C 0x000D".split()).encode('utf-16be')
b'\x00\n\x00\x0b\x00\x0c\x00\r' 
```

# php - MySql 错误 #1005 - 无法创建表

> ID：12765977
> 
> 赞同：3
> 
> 时间：2012-10-07T03:49:04.757
> 
> 标签：php, mysql, yii, phpmyadmin

我在使用 yii 进行敏捷 Web 应用程序开发教程时写了一个查询。我试图用这个查询改变一个表，并在 phpmyadin 中得到这个错误

```
#1005 - Can't create table 'trackstar_dev.#sql-152_16' (errno: 121) (<a href="server_engines.php?engine=InnoDB&amp;page=Status&amp;token=af80b3320dff7dfda18d88d97fe80da4">Details...</a>) 
```

这是我的查询

```
ALTER TABLE `tbl_project_user_assignment` ADD CONSTRAINT `FK_project_
user` FOREIGN KEY (`project_id`) REFERENCES `tbl_project` (`id`) ON
DELETE CASCADE ON UPDATE RESTRICT 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:52:21.207

这种情况发生在表`tbl_project_user_assignment`已经包含在表中`project_id`找不到的记录（*您想要引用*）时`tbl_project`。`id`. 您可以做的最好的方法是清空`tbl_project_user_assignment`并再次更改它以添加约束。

# delphi - 使用 Brother 打印机打印为垃圾的 PDF

> ID：12765981
> 
> 赞同：2
> 
> 时间：2012-10-07T03:50:15.070
> 
> 标签：delphi, pdf, printing, delphi-4

> **可能重复：**
> [Delphi：如何在不显示的情况下打印 PDF？](https://stackoverflow.com/questions/2055307/delphi-how-to-print-a-pdf-without-showing-it)

在不同的打印机上打印时遇到不同的行为。在我的打印机上，PDF 打印是正确的，但是对于“Brother”打印机，相同的 PDF 打印为乱码（文件内容被打印）。如果使用 Adob​​e Reader 将相同的 PDF 文件直接发送到打印机，则在兄弟打印机上也可以正确打印。

为了打印 PDF 文件，我使用 LoadFromFile 函数读取了 TMemoryStream 对象中的内容。指定的 docinfo 值如下 -

```
DocInfo.pDocName := pChar('My Document');
DocInfo.pOutput := Nil;
DocInfo.pDatatype := pChar('RAW'); 
```

之后使用 WritePrinter 函数，将命令发送到打印机句柄。

在我看来，好像兄弟打印机无法读取 PDF 编码格式。

感谢您在这方面的任何帮助。

PS：我的应用程序在 Delphi4 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T06:39:43.617

[WritePrinter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145226%28v=vs.85%29.aspx)用于[将原始打印机特定数据发送到打印机](https://stackoverflow.com/questions/9069119/sending-raw-data-to-printer-using-writeprinter)。

有些打印机可以理解 PDF，有些则不能。

您应该有一个可以理解 PDF 的应用程序将其打印到打印机。

许多应用程序都可以做到这一点，最突出的当然是[Adob​​e Reader](http://get.adobe.com/reader)。

[这个答案显示了三种方法](https://stackoverflow.com/a/2055475/29290)：Adobe Reader ActiveX、Adobe Reader 应用程序、GhostView/GhostPrint。它还引用了其他一些方法。

# ruby-on-rails - 邮件程序中的“普通”身份验证类型是什么？

> ID：12765983
> 
> 赞同：0
> 
> 时间：2012-10-07T03:50:22.623
> 
> 标签：ruby-on-rails, mailer

查看动作邮件程序的[Rails 指南，动作邮件程序](http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration)中的“普通”是什么`authentication_type`意思`smtp_settings`？

这是否意味着我的密码将以明文形式发送？（如果有帮助，我将使用 gmail 作为 smtp 提供程序。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:13:37.583

根据[这篇文章](http://www.samlogic.net/articles/smtp-commands-reference-auth.htm)“虽然使用关键字 PLAIN，但用户名和密码不会以纯文本形式通过 Internet 发送 - 它们始终是 BASE64 编码的”

然而，“使用 PLAIN 身份验证机制的一个缺点是，如果有人监视 SMTP 通信，用户名和密码可以很容易地被解码。为了获得更高的安全性，可以使用名为 CRAM-MD5 的身份验证机制。”

# c# - 以任意顺序将两个数据表行与两个整数进行比较

> ID：12765985
> 
> 赞同：0
> 
> 时间：2012-10-07T03:52:05.820
> 
> 标签：c#

我正在做一些比较，我有一个文本列的数据表，并且我将每一行数据表与所有其他行进行比较。

我的观点是避免双重比较。

我想将比较行的 ID 写入其他数据表，所以每次我都可以检查这两行是否已经比较。

```
Table of already compared rows:
------
1245 4589
5589 6952
2233 2339 
```

因此，如果我想比较 ID 为 6952 和 5589 的行，我想查看已比较行的表中是否存在列 6952/5589 或 5589/6952 的行。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:51:18.870

我认为您可以添加另一个字符串列，该列以分隔的形式存储比较的列 ID。

```
i.e. ,1234,5434,32453, 
```

所以你只有一个字符串比较。比较**,ID,**与该列的值

# c# - 将基于 2D Tile 的形状转换为简化的多边形

> ID：12765991
> 
> 赞同：5
> 
> 时间：2012-10-07T03:54:24.243
> 
> 标签：c#, xna, polygon, tile

![基于瓦片的世界转换为多边形形状](../Images/26050d6a0fb3a1bcf8165c2679af80be.png)

如上图所示，我有一个二维图块数组，每个图块在我的游戏世界中有 4 个点。我正在寻找一种方法，将这些由单个图块构造的形状转换为简化的（没有不必要的顶点，只有那些需要形成轮廓的顶点）多边形形状。

我一直在环顾四周，在这里和其他地方，但运气不佳。但也许我不知道要搜索的正确术语。任何帮助表示赞赏。

额外信息：我希望用它来优化动态照明。如果有人有不同的方法在基于图块的世界中实现快速动态阴影，那也将回答这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:06:09.860

我建议下一个算法：

1.  将所有边缘位置存储到二维数组中（边缘位置是边缘的中心）。
2.  计算此数组中的重复边（1 没有重复，2 与另一条边相交。其他值是不可丢失的）。
3.  从具有重复计数 1（无重复）的数组中选取第一个未标记的边，并在特定方向（例如顺时针）应用简单的递归填充算法，直到到达第一个边。所有这些边将形成一个简化的多边形。如果未建立未标记的边缘，则转到 5。
4.  将步骤 3 中的所有这些边标记为已使用。转到第 3 步。
5.  结尾。

为了更直观地表示算法，我在下面发布了一张图片。

![在此处输入图像描述](../Images/ff99d0c172382f14d8fd45831d2e7f7d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T04:23:54.133

幼稚的方法是简单地遍历每个图块并将任何过渡边缘标记为多边形，但您可以重用通用[边缘检测](http://en.wikipedia.org/wiki/Edge_detection)例程以获得更好的性能。

之后，您可能会对细分这些多边形感兴趣，以便将它们转换为三角形的集合（使后面的阴影/照明/相交数学变得简单得多），在这种情况下，唯一的问题是如果您最终得到一个凹面多边形，但是一个不错的镶嵌器应该允许您将其分解为凸多边形。我认为 XNA 没有内置任何用于镶嵌的东西，因此您可能需要找到一个实用程序库来为您完成它。

# php - SQL 查询无法正常工作

> ID：12765992
> 
> 赞同：0
> 
> 时间：2012-10-07T03:55:14.937
> 
> 标签：php, mysql, sql

我想从 mysql 数据库中获取迄今为止的记录。我写了这个，但它不起作用：

```
$from_date = "2012-06-19";
$to_date = "2012-06-24";

SELECT * 
  FROM `contracts` 
 WHERE `indate` >= '$from_date' 
   AND `indate` <= '$to_date' 
 ORDER BY `id` DESC 
```

我的日期是 : `2012-06-20`, `2012-06-21`, `2012-06-22`,`2012-06-23`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:29:55.310

试试下面：

```
 SELECT * 
      FROM contracts 
     WHERE indate >= to_date('2012-06-19','yyyy-mm-dd') 
       AND indate <= to_date('2012-06-24','yyyy-mm-dd') 
     ORDER BY id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T04:08:33.643

你在做什么应该工作正常。我在工作中一直从这样的日期字段中进行选择。

```
mysql> create table contracts (indate date);
Query OK, 0 rows affected (0.02 sec)

mysql> insert into contracts values ('2012-10-06'), ('2012-11-04'), ('2012-09-17');
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> set @from_date = '2012-10-01';
Query OK, 0 rows affected (0.00 sec)

mysql> set @to_date = '2012-10-31';
Query OK, 0 rows affected (0.00 sec)

mysql> select * from contracts where indate >= @from_date and indate <= @to_date;
+------------+
| indate     |
+------------+
| 2012-10-06 |
+------------+
1 row in set (0.00 sec) 
```

我当然在这里使用了 mysql 变量，但它们什么都没有；它们只包含字符串。你可以这样做：

```
mysql> select * from contracts where indate >= '2012-10-01' and indate <= '2012-10-31';
+------------+
| indate     |
+------------+
| 2012-10-06 |
+------------+
1 row in set (0.00 sec) 
```

OP 是对的，BETWEEN 更简洁：

```
mysql> select * from contracts where indate between '2012-10-01' and  '2012-10-31';
+------------+
| indate     |
+------------+
| 2012-10-06 |
+------------+
1 row in set (0.00 sec) 
```

日期比较的神奇之处在于该字段是日期类型的。

# javascript - 如何在 Meteor 中进行分页而不闪烁？

> ID：12765995
> 
> 赞同：6
> 
> 时间：2012-10-07T03:55:52.187
> 
> 标签：javascript, meteor

[与这里](https://stackoverflow.com/questions/10794555/is-there-any-way-to-know-when-an-meteor-subscription-is-valid)的这个问题相关，是否有一种使用 Meteor 实现分页的惯用方式，它不会在客户端显示中间结果（这会导致页面跳转）。

我从排行榜示例中派生了一个应用程序，本质上，在我正在使用的客户端上：

```
Template.scores.created = ->
    Meteor.autosubscribe ->
        Meteor.subscribe 'players', Session.get('page_size'), Session.get('current_page'), sortOrder() 
```

和服务器

```
Meteor.publish 'players', (page_size, current_page, sort) ->
    Players.find({}, sort: sort, skip: (current_page-1)*page_size, limit: page_size) 
```

由于流星订阅新数据然后删除旧数据的方式，所有新项目在旧项目被删除之前都会短暂显示，这会导致我想摆脱的闪烁效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T04:08:28.103

我现在能够实施一个足够好的解决方法。这不是很好，因为它确实会导致少量的“闪烁”，但假设客户端和服务器运行得很快，这是可以容忍的。

解决方案主要是从以下位置更改模板帮助程序代码：

```
Template.scores.players = ->
    return Players.find({}, sort: sortOrder()) 
```

至：

```
Template.scores.players = ->
    return Players.find({}, sort: sortOrder()).fetch().slice(0,Session.get('page_size')) 
```

这将项目的客户端视图限制为页面大小的最大值，以便在删除旧项目之前到达客户端的其他项目不会扩大正在查看的项目列表的整体大小。

随着项目的到达和消失，仍然会产生一些“闪烁”，但是由于列表的大小没有改变，它并不像没有切片的实现那么糟糕。

# jakarta-ee - struts2 在页面加载时禁用验证

> ID：12765997
> 
> 赞同：3
> 
> 时间：2012-10-07T03:56:23.763
> 
> 标签：jakarta-ee, struts2

我正在使用基于 xml 的验证。

**问题：**

我不想在第一次加载页面时对输入表单执行验证，因为所有字段都是空白供用户填写的。假设注册表单添加新学生。一旦我单击按钮，它就会执行。

**注意：** *即使在单击按钮时进行验证，我也希望保留相同的 url。新表单 URL 是`http://localhost:8000/Struts2_Spring_Crud/student/add`，如果验证失败，甚至 url 应该是相同的。*

**struts.xml**

```
<default-action-ref name="list"/>
        <action name="list" class="com.myapp.actions.StudentAction" method="getAllStudents">
            <!--<interceptor-ref name="myInterceptor"/>-->
            <result name="success" type="tiles">/student.list.tiles</result>
        </action>

    <!--<action name="add">
                <result type="tiles">/student.edit.tiles</result>
            </action>-->
            <action name="add" class="com.myapp.actions.StudentAction" method="insertOrUpdateStudent">
                <result name="success" type="redirectAction">list</result>
                <result name="input" type="tiles">/student.edit.tiles</result>
            </action> 
```

**输入表格**

```
<s:fielderror/>
    <s:form action="add" method="POST">

        <s:label name="name" value="Name *"/>
        <s:textfield name="student.name" value="%{student.name}"/>
        <s:fielderror fieldName="student.name"/>

        <s:label name="age" value="Age *"/>
        <s:textfield name="student.age" value="%{student.age}"/>

        <s:submit name="saveForm" value="#title"/>
    </s:form> 
```

**已编辑：**如果我添加 excludeMethods 比这个 url`http://localhost:8000/Struts2_Spring_Crud/student/add`发送给我`http://localhost:8000/Struts2_Spring_Crud/student/list`并且我的添加表单没有显示。

```
 <action name="add" class="com.myapp.actions.StudentAction" method="insertOrUpdateStudent">
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
            <result name="success" type="redirectAction">list</result>
            <result name="input" type="tiles">/student.edit.tiles</result>
        </action> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T21:15:38.557

我遇到了这个问题，我终于找到了一种解决方法，您只需要一个操作来处​​理所有事情并在浏览器上保持相同的 URL：

`http://localhost:8000/Struts2_Spring_Crud/student/add`

struts.xml 只会是：

```
<action name="add" class="com.myapp.actions.StudentAction" method="insertOrUpdateStudent">
    <result name="success" type="redirectAction">list</result>
    <result name="input" type="tiles">/student.edit.tiles</result>
</action> 
```

第一次加载页面时，首先调用与“添加”操作关联的类。然后班级中的现场学生为空。然后，您可以依靠该事实来清除 strut 所做的验证。

因此，您应该向您的操作类添加一个 validate() 方法，该方法将删除 strut 愚蠢地发现的验证错误：

```
public class StudentAction extends ActionSupport{
   MyStudent student;

   public MyStudent getStudent(){
       return student;
   }
   public void setStudent(MyStudent student){
       this.student=student;
   }

   public String execute(){
       if (student==null) return INPUT; //First time page loads. We show page associated to INPUT result.
       return SUCCESS; // If student is not null and execute was called it means that everything went fine, we should return SUCCESS and go to the page associated to the SUCCESS result.
   }

   public String insertOrUpdateStudent(){
       if (student==null) return INPUT;  
       return SUCCESS;   
   }

 .....
   @Override
   public void validate(){ //
      if (student==null){ //First time page loads, student is null.
         setFieldErrors(null); //We clear all the validation errors that strut stupidly found since there was not form submission.
      }
   }
} 
```

Struts 首先通过 xml 验证器验证表单，然后调用您的 validate 方法。

当您在表单上点击提交时，strut 创建一个 MyStudent 对象，调用 setStudent(...)，然后逐个字段调用 getStudent()，然后调用 MyStudent 对象的 set"FieldName"。之后，它通过 xml 验证器验证学生对象，然后调用您的验证方法。

如果在调用 validate() 方法后仍然存在错误，则 strut 将返回一个“INPUT”结果，而无需在您的情况下调用 execute() 或 insertOrUpdateStudent() 方法。

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:49:11.253

您可以使用`fieldexpression validator` [http://struts.apache.org/2.x/docs/fieldexpression-validator.html](http://struts.apache.org/2.x/docs/fieldexpression-validator.html)进行条件验证，例如基于一些隐藏字段`id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T04:08:26.240

我正在使用基于注释的验证。在我的 struts.xml 我有

```
<interceptor-ref name="validation">
  <param name="validateAnnotatedMethodOnly">true</param>
</interceptor-ref> 
```

您可能想尝试为基于 xml 的验证添加 excludeMethods

```
<interceptor-ref name="validation">
  <param name="excludeMethods">input,back,cancel,browse</param>
</interceptor-ref> 
```

这是[验证拦截器](http://struts.apache.org/2.0.11/docs/validation-interceptor.html)的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T21:05:08.353

我总是使用另一个指标来做到这一点：

JSP：

```
<s:form action="add">
    <s:hidden name="postBack" value="true"/>
    <%-- your fields --%>
</s:form> 
```

行动：

```
public String execute(){
    if(!postBack){
        return OPEN;
    } else if(!validate()) {
        return INPUT;
    } else {
        save();
        return SUCCESS;
    }
} 
```

配置：

```
<action name="add" class="com.myapp.actions.StudentAction" method="insertOrUpdateStudent">
    <result name="success" type="redirectAction">list</result>
    <result name="input" type="tiles">/student.edit.tiles</result>
    <result name="open" type="tiles">/student.edit.tiles</result>
</action> 
```