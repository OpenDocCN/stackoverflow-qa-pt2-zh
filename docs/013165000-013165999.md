# StackOverflow 问答 13165000-13165999

# .net - 导致存档损坏（故意）

> ID：13165329
> 
> 赞同：1
> 
> 时间：2012-10-31T18:25:56.590
> 
> 标签：.net, windows-7, 64-bit, archive, corruption

我目前正在尝试调试一些客户遇到的一些存档损坏问题。我们的产品通过补丁更新，在某些情况下（特别是一些 Win7 64 位用户），这个补丁过程似乎破坏了产品使用的一些档案。损坏总是局限于存档中的一个文件，而不是整个存档。

这里的问题是我完全无法重现他们正在经历的存档损坏。当然，尝试修复问题的根源是我的主要目标，但我还需要诊断和修复现有的损坏。但是，我无法想出一个像样的测试用例。我可以很容易地破坏整个存档（只需使用十六进制编辑器进行修改就可以了），但不仅仅是其中的一个文件。

关于如何做到这一点的任何想法？在这种情况下，由于档案太大，我无法让用户将他们损坏的版本上传给我，所以这不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:57:13.657

如果客户可以访问干净和损坏的存档，您可以要求他们生成二进制文件的差异吗？然后客户只需发送补丁文件，该补丁文件应该比整个存档小得多。
对于一种可能的二进制差异工具，请参阅 - [http://www.daemonology.net/bsdiff/](http://www.daemonology.net/bsdiff/)

# python - Python：Matplotlib 按钮不起作用

> ID：13165332
> 
> 赞同：3
> 
> 时间：2012-10-31T18:26:17.980
> 
> 标签：python, matplotlib

我有这段代码，其中包含一个调用按钮`bbutton`，当按下该按钮时执行该`movetext`功能：

```
from pylab import *
from matplotlib.widgets import  RectangleSelector
from matplotlib.widgets import Button
import numpy as np
import matplotlib.pylab as plt

fig = plt.figure()
ax = fig.add_subplot(111)

delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-2.0, 2.0, delta)
X, Y = np.meshgrid(x, y)
Z1 = bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
Z = (Z1 - Z2) * 10

plt.contourf(X, Y, Z)

text1=plt.text(0, 0, 'ghghg',color='black',fontsize=14) 
plt.text(1, 1, 'Calculation ',color='black',fontsize=14)
plt.title('Average ')

plt.xlabel('Longtitude ', fontsize=14, color='black')
plt.ylabel('Latitude ', fontsize=14, color='black')
plt.grid(True)

def onselect(eclick, erelease):
     'eclick and erelease are matplotlib events at press and release'
     text1.set_text('Geo ')
     text1.set_x(eclick.xdata)
     text1.set_y(eclick.ydata)
     plt.draw()

def toggle_selector(event):
    print ' Key pressed.'
    if event.key in ['Q', 'q'] and toggle_selector.RS.active:
       print ' RectangleSelector deactivated.'
       toggle_selector.RS.set_active(False)
    if event.key in ['A', 'a'] and not toggle_selector.RS.active:
       print ' RectangleSelector activated.'
       toggle_selector.RS.set_active(True)

def movetext(self):
     print 'clearing plot'
     text1.set_x(np.random.random(1))
     text1.set_y(np.random.random(1))
     plt.draw()

toggle_selector.RS = RectangleSelector(ax, onselect, drawtype='line')
plt.connect('key_press_event', toggle_selector)

buttonaxe = plt.axes([0.7, 0.05, 0.1, 0.1])
bbutton = Button(buttonaxe, 'movetext',color='0.85', hovercolor='0.95')
bbutton.on_clicked(movetext)

plt.show() 
```

放置在底部的按钮工作正常。但是在下面的示例中，如果我只是将所有代码放在一个名为`Plotter`按钮的函数中，则会在图中显示但它不起作用。当鼠标悬停在按钮上方时没有变化，并且连接的功能`movetext`没有执行。

```
from pylab import *
from matplotlib.widgets import  RectangleSelector
from matplotlib.widgets import Button
import numpy as np
import matplotlib.pylab as plt

fig = plt.figure()
ax = fig.add_subplot(111)

def Plotter():

    delta = 0.025
    x = np.arange(-3.0, 3.0, delta)
    y = np.arange(-2.0, 2.0, delta)
    X, Y = np.meshgrid(x, y)
    Z1 = bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
    Z2 = bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
    Z = (Z1 - Z2) * 10
    #Z1 = mlab.bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
    plt.contourf(X, Y, Z)
    text1=plt.text(0, 0, 'ghghg',color='black',fontsize=14) 
    plt.text(1, 1, 'Calculation ',color='black',fontsize=14)
    plt.title('Average ')

    plt.xlabel('Longtitude ', fontsize=14, color='black')
    plt.ylabel('Latitude ', fontsize=14, color='black')
    plt.grid(True)

    def onselect(eclick, erelease):
         'eclick and erelease are matplotlib events at press and release'
         text1.set_text('Geo ')
         text1.set_x(eclick.xdata)
         text1.set_y(eclick.ydata)
         plt.draw()

    def toggle_selector(event):
        print ' Key pressed.'
        if event.key in ['Q', 'q'] and toggle_selector.RS.active:
           print ' RectangleSelector deactivated.'
           toggle_selector.RS.set_active(False)
        if event.key in ['A', 'a'] and not toggle_selector.RS.active:
           print ' RectangleSelector activated.'
           toggle_selector.RS.set_active(True)

    def movetext(self):
         print 'clearing plot'
         text1.set_x(np.random.random(1))
         text1.set_y(np.random.random(1))
         plt.draw()

    toggle_selector.RS = RectangleSelector(ax, onselect, drawtype='line')
    plt.connect('key_press_event', toggle_selector)

    buttonaxe = plt.axes([0.7, 0.05, 0.1, 0.1])
    bbutton = Button(buttonaxe, 'movetext',color='0.85', hovercolor='0.95')
    bbutton.on_clicked(movetext)
Plotter()    
plt.show() 
```

有人可以解释这种行为吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T02:11:19.107

这是因为`bbutton`是一个本地名字，当`Plotter()`调用结束时，名字`bbutton`就没有了，没有任何对Button对象的引用，它会被垃圾回收器回收。

为了解决这个问题，你可以创建一个对它的虚拟引用，例如将以下行添加到末尾`Plotter`：

```
buttonaxe._button = bbutton 
```

# java - 在 Maven 项目之间导入协议缓冲区定义

> ID：13165333
> 
> 赞同：15
> 
> 时间：2012-10-31T18:26:18.510
> 
> 标签：java, maven, protocol-buffers

我目前管理着几个单独的 Maven 项目，在这些项目中我使用 Protobufs 作为序列化格式并通过网络传输。我正在使用 David Trott 的[maven-protoc 插件](https://github.com/dtrott/maven-protoc-plugin)在编译时生成代码。

一切都很好，直到我希望这些项目在彼此之间进行通信——或者更确切地说，使用彼此的 protobufs。protobuf 语言有一个“import”指令，它可以满足我的要求，但我面临着让项目 A 导出“.proto”文件（或可能是某种中间格式？）以供项目 B 依赖的挑战。

Maven 为项目提供了一种捆绑资源的方法，但是 AFAIK，这些是在运行时由代码使用，而不是在编译/源代码生成阶段由目标使用——至少我无法找到描述的文档我想要达到的目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T22:37:38.070

我找到了另一种实现方式，它不涉及任何 Maven 魔法。深入研究 maven-protoc 插件的代码，我发现这是一个受支持的用例——该插件将在依赖的 jar 中查找和收集 .proto 文件并将它们解压缩到一个临时目录中。然后将该目录设置为 protoc 调用的导入路径。

所需要做的就是将 .proto 文件包含在依赖项的包中，我通过使其成为资源来做到这一点：

项目/a/src/main/resources/a.proto

现在在 projects/b/pom.xml 中，添加 'a' 作为常规 Maven 依赖项，然后从 b.proto 导入 a.proto，就好像它存在于本地一样：

b.proto：导入“a.proto”；

这并不理想，因为文件名可能会在各个项目之间发生冲突，但这应该很少发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T21:04:17.750

您可以将 .proto 文件打包到生成它们的项目中的单独 .jar/.zip 中，并使用专用分类器将它们发布到您的存储库中。使用程序集插件可能有助于在此处发布接近发布期间构建的“源 jar”的内容。

然后，在使用它们的项目上，将先前创建的工件添加为依赖项。使用具有“解包依赖”目标的依赖插件，并将其绑定到“编译”之前的阶段。

# ios - UIWebView didFinishLoad 在链接点击后不会触发

> ID：13165335
> 
> 赞同：0
> 
> 时间：2012-10-31T18:26:38.997
> 
> 标签：ios, xcode, uiwebview

我接手了一个项目，在这个应用程序中，这里的主要目标是拥有一个 web 视图，并根据字符串检查检查每个页面加载 URL，以确定需要执行哪些后台功能。

问题是，webViewDidFinishLoad 似乎只在创建 webview 本身时触发一次。任何时候点击内部链接，它都不会再次触发。

在 onViewLoad 中，我确实将委托设置为 self，并且无论如何事情都相对到位，但这并不是在每次页面加载时都被触发。

这说。

shouldStartLoadWithRequest 可以。但是，因为它正在启动请求，并且在事件触发时 URL 还没有完全加载，所以当我使用它时，它会获取请求页面的当前 URL 而不是目标 URL

```
NSString *curURL = [webView stringByEvaluatingJavaScriptFromString:@"window.location.href"]; 
```

其他函数要么不返回任何内容，要么与上面的函数完全相同

```
//NSString *curURL = self.webView.request.URL.absoluteString;
//NSString *curURL = webView.request.mainDocumentURL.absoluteString; 
```

所以，我在这里不知所措，在Android上做这个相对简单，但是webView的方法数量有限让我郁闷..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:44:51.330

问题出在使用 jQueryUI Mobile 1.0.4 的网站上。这不仅通过在混合中附加一个 # 和下一个 url 来加载 url，

**http://url.com/somepage.php?item=1#/somepage.php?item=2**

此外，这样做会以某种方式诱使 webView 认为页面已更改，尽管直接更改了 URL。因此，webViewDidFinishLoad 在使用库加载后续页面后永远不会触发。

伤心。图书馆看起来也不错。

# hadoop - 用 pig 过滤空值

> ID：13165337
> 
> 赞同：14
> 
> 时间：2012-10-31T18:26:41.633
> 
> 标签：hadoop, apache-pig

这看起来像一个愚蠢的问题，但我找不到从我的行中过滤空值的方法。这是我转储对象地理信息时的结果：

> 转储地理信息；
> ([longitude#70.95853,latitude#30.9773])
> ([longitude#-9.37944507,latitude#38.91780853])
> (null)
> (null)
> (null)
> ([longitude#-92.64416,latitude#16.73326])
> (null)
> (null)
> ([经度#-9.15199849,纬度#38.71179122])
> ([经度#-9.15210796,纬度#38.71195131])

这是描述

> 描述地理信息；
> 地理信息：{geoLocation：字节数组}

我想要做的是过滤这样的空值：

> geoinfo_no_nulls = 按地理位置过滤地理信息不为空；

但结果保持不变。什么都没有过滤。

我也尝试过这样的事情

> geoinfo_no_nulls = 按地理位置过滤地理信息！= 'null';

我得到了一个错误

> org.apache.pig.backend.executionengine.ExecException：错误 1071：无法将映射转换为字符串

我究竟做错了什么？

细节，在 ubuntu 上运行，hadoop-1.0.3 和 pig 0.9.3

pig -version Apache Pig 版本 0.9.3-SNAPSHOT (rexported) 编译于 2012 年 10 月 24 日，19:04:03

java version "1.6.0_24" OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1) OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T04:54:32.413

谢谢你们的回答。它帮助我找到路径。

最后，问题与我使用的 JsonLoader 相关。我不知道究竟是为什么，但它似乎有一个带有空字符串的错误。

我终于将代码更改为使用[https://github.com/kevinweil/elephant-bird](https://github.com/kevinweil/elephant-bird)。

代码现在看起来像这样：

```
 register 'elephant-bird-core-3.0.0.jar'
    register 'elephant-bird-pig-3.0.0.jar'
    register 'google-collections-1.0.jar'
    register 'json-simple-1.1.jar'

    json_lines = LOAD '/twitterecho/tweets/stream/v1/json/2012_10_10/08' USING com.twitter.elephantbird.pig.load.JsonLoader();

    geo_tweets = FOREACH json_lines GENERATE (CHARARRAY) $0#'id' AS id, (CHARARRAY) $0#'geoLocation' AS geoLocation;

    tweets_grp = GROUP geo_tweets BY id;
    unique_tweets = FOREACH tweets_grp {
          first_tweet = LIMIT inpt 1;
          GENERATE FLATTEN(first_tweet);
    };

    only_not_nulls = FILTER geo_tweets BY geoLocation is not null;
    store only_not_nulls into '/twitter_data/results/geo_tweets'; 
```

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T18:40:21.813

我遇到了类似的问题，这样的事情对我有用：

```
geoinfo_no_nulls = FILTER geoinfo BY geoLocation != ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T22:55:39.653

假设您希望您的地理位置是以经度和纬度为键的地图，您可以将数据加载为地图并检查空值，如下所示：

```
A = LOAD 'data' AS (f1:map[]);
B = FILTER A BY f1#longitude is not null and f1#latitude is not null; 
```

不过，这只是一种解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:22:16.380

尝试这个：

`geoinfo_no_nulls = FILTER geoinfo BY (geomap#'geoLocation' is not null);`

正如我从错误中看到的那样，它将类型识别为地图。您需要指定地图的特定键。如果这不起作用，您通常无法正确获取该数据作为地图。请按照 Fred 的指示尝试。

# uiimage - 将图像保存到文档目录 - 不起作用 - 仅创建一个零字节文件

> ID：13165338
> 
> 赞同：0
> 
> 时间：2012-10-31T18:26:49.243
> 
> 标签：uiimage, uiimagepickercontroller

我正在尝试制作一个简单的应用程序来拍照并将文件保存到 UIImageview 和文档文件夹中，以便以后可以将其作为 UIImageview 调用。为了了解应用程序是否真的在制作文件，我打开了应用程序支持 .plist 文件中的 iTunes 文件共享。

问题是生成的文件是零字节。我试过PNG和JPG格式。

```
- (IBAction)picImage:(id)sender {
imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;

//check to see if the device has camera capability
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

}
else
{
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
}

[self presentViewController:imagePicker animated:YES completion:nil];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    //set the UIImageView to the selected image
    playerImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];

    //obtaining saving path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *imagePath = [documentsDirectory stringByAppendingPathComponent:@"player.png"];

    UIImage *editedImage = [UIImage imageWithContentsOfFile:imagePath];
    NSData *imageData = UIImagePNGRepresentation(editedImage);
    //NSData *imageData = UIImageJPEGRepresentation(editedImage,1.0);

    // This actually creates the image at the file path specified, with the image's NSData.
   [[NSFileManager defaultManager] createFileAtPath:imagePath contents:imageData attributes:nil];

    //dismiss the imagepicker view controller
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
[self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:51:35.627

试试这个代码，让我知道它是否有效..!!!!

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *strimagename;
    strimagename=[NSString stringWithFormat:@"Test.jpg"];

NSString *thumbFilePath = [documentsDirectory stringByAppendingPathComponent:strimagename];
UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
NSData *thumbData = UIImageJPEGRepresentation(image, 1);
[thumbData writeToFile:thumbFilePath atomically:YES];
[imgPicker dismissModalViewControllerAnimated:YES]; 
```

此代码将图像保存在文档文件夹中..

快乐编码..!!!!!!

# windows-8 - 我的应用内购买是否可供我的应用的试用用户使用？

> ID：13165345
> 
> 赞同：2
> 
> 时间：2012-10-31T18:27:11.530
> 
> 标签：windows-8, microsoft-metro, windows-store-apps, windows-store

在适用于 Windows 8 的 Windows 应用商店中，我的应用程序试用版用户是否完全可以使用我的应用程序内购买？如果没有，他们是否可以在试用版期间购买应用内购买？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:35:01.847

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx)：

> 注意：只有购买了您应用的完整版的客户才能进行应用内购买。

这不会阻止您让您的应用程序免费，然后限制他们可以访问的内容，直到他们进行应用程序内购买以“升级”到“完整”版本。

# java - MyBatis 获取最后插入 ID

> ID：13165349
> 
> 赞同：2
> 
> 时间：2012-10-31T18:27:32.920
> 
> 标签：java, sql, postgresql, insert, mybatis

我有一个 Java POJO：

```
public class Widget {
    private int id;
    private String name;
    // ...
} 
```

我正在尝试使用 MyBatis 将新的插入到我的 Postgres 数据库`Widget`的`widget`表中，并使用此插入方法将传入的 POJO 与新插入的`widget`表记录的自动生成的 id 一起注入：

```
// Notice the widget's id is left null.
Widget w = new Widget("name-of-widget");

WidgetMapperImpl widgetMapper = new WidgetMapperImpl();
widgetMapper.insertWidget(w);

// At runtime this prints null (the id is not being set).
System.out.println(w.getId()); 
```

并且`WidgetMapper.java`：

```
public interface WidgetMapper {
    public void insertWidget(@Param("widget") Widget widget);
} 
```

这是`WidgetMapper.xml`：

```
<mapper namespace="com.myapp.WidgetMapper">
    <cache flushInterval="360000" />

    <resultMap id="WidgetMapperResult" type="com.myapp.Widget">
        <result property="id" column="widget_id"/>
        <result property="name" column="widget_name" />
    </resultMap>

    <insert id="insertWidget" parameterType="com.myapp.Widget" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO
            myapp.widgets
            (
                widget_name
            )
            VALUES
            (
                #{widget.name}
            );

            <selectKey keyProperty="id" resultType="int" order="AFTER">
                SELECT CURRVAL('widget_id_seq') AS widget_id
            </selectKey>
    </insert>
</mapper> 
```

同样，此代码可以正常编译和构建。在运行时，在我调用之后`widgetMapper.insertWidget(Widget)`，然后尝试访问它的`Widget`id，它是 null，所以 ID 注入不起作用。谁能发现为什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:51:32.523

据我记得，你不能同时使用`useGeneratedKeys="true"`和`selectKey`。

所以一个解决方案可以是：要么实现`getGeneratedKeys`JDBC driver for Postgres 的方法就可以处理你所需要的（我不知道 JDBC 和 postgres 序列是如何协同工作的），所以你只使用`useGeneratedKeys="true"`. 或者你必须使用`selectKey`，然后你必须打开`useGeneratedKeys`属性。

# mysql - 复合索引中的单独连接子句

> ID：13165352
> 
> 赞同：6
> 
> 时间：2012-10-31T18:27:56.363
> 
> 标签：mysql, composite-index

有一个综合指数是否有利于这样的事情：

```
SELECT * FROM a INNER JOIN b ON(a.id=b.id)
                INNER JOIN c ON(a.bar=c.id)
                INNER JOIN d ON(a.foo=d.id) 
```

索引将是：

```
(a.id, a.bar, a.foo) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:30:36.323

只有索引的前沿会被使用 ( `a.id`)，所以只有`INNER JOIN`to`b`会从索引中受益......所以索引中的附加列 (`a.bar`和`a.foo`) 在发布的示例查询中没有好处。

[从 MySql 文档](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)：

> 如果列不构成索引的最左前缀，则 MySQL 无法使用索引执行查找。假设您有`SELECT` 此处显示的语句：
> 
> ```
> SELECT * 
> FROM tbl_name 
> WHERE col1=val1; 
> 
> SELECT * 
> FROM tbl_name 
> WHERE col1=val1 AND col2=val2;
> 
> SELECT * 
> FROM tbl_name 
> WHERE col2=val2; 
> 
> SELECT * 
> FROM tbl_name 
> WHERE col2=val2 AND col3=val3; 
> ```
> 
> 如果 上存在索引`(col1, col2, col3)`，则只有前两个查询使用该索引。第三和第四个查询确实涉及索引列，`(col2)`但`(col2, col3)`不是`(col1, col2, col3)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-15T04:10:13.603

当`JOINing`（即`INNER JOIN`, not `LEFT JOIN`）时，优化器将选择*任何*表作为“第一个”表。然后它将使用该`ON`子句移动到下一个表并执行“NLJ”（嵌套循环连接）以进入第二个表。等等。

*通常*，当有一个`WHERE`子句（或某些其他事情）时，它将确定哪个表是“第一个”。没有它，优化器*通常会*选择最小的表。

给定一个`WHERE`表上的子句，它将寻找“最佳”`INDEX`使用。`WHERE`这样的索引很可能在子句中涉及一个或多个列。两个索引不会（极少数例外）同时用于单个表。

当移动到“下一个”表时，子句中列上的索引*可能决定了最佳索引。*`ON`请注意，如果您有`ON a.x=b.x AND a.y=b.y`，那么复合`INDEX(x,y)`（任意顺序）是可取的。

回到不决定从哪个表“开始”的情况......优化器将为该表尝试各种顺序。对于每个不同的排序，都有一组不同的索引。

为了这

```
 FROM a 
     INNER JOIN b ON(a.id=b.id)
     INNER JOIN c ON(a.bar=c.id)
     INNER JOIN d ON(a.foo=d.id) 
```

这些是最佳的，但我们不一定能预测将使用哪个：

```
a:  (id)  -- if coming from b
a:  (bar) -- if coming from c
a:  (foo) -- if coming from d
b:  (id)  -- if coming from b 
c:  (id)  -- if coming from a
d:  (id)  -- if coming from a 
```

注意：您可能已经`PRIMARY KEY(id)`在每个表中都有，因此无需添加`INDEX(id)`.

您说`SELECT *`，这意味着您想要所有四个表中的所有列。如果情况并非如此，我们可以讨论另一种优化：“覆盖索引”。

更多讨论：http: [//mysql.rjweb.org/doc.php/index_cookbook_mysql](http://mysql.rjweb.org/doc.php/index_cookbook_mysql)

# java - Java 扩展/包装内置类有多普遍

> ID：13165353
> 
> 赞同：4
> 
> 时间：2012-10-31T18:27:55.837
> 
> 标签：java, class, coding-style, built-in

我是 Java 语言的新手，我尝试编写我的第一个相对复杂的程序。在我写了几个类之​​后，我意识到我几乎没有直接使用内置类（如 BigInteger、MessageDigest、ByteBuffer），因为它们并不完全符合我的需求。相反，我编写自己的类，并在类内部使用内置类作为属性。例子：

```
public class SHA1 {
    public static final int SHA_DIGEST_LENGTH = 20;

    private MessageDigest md;

    public SHA1() {
        try {
            md = MessageDigest.getInstance("SHA-1");
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
    }

    public void update(byte[] data) {
        md.update(data);
    }

    public void update(BigNumber bn) {
        md.update(bn.asByteArray());
    }

    public void update(String data) {
        md.update(data.getBytes());
    }

    public byte[] digest() {
        return md.digest();
    }
} 
```

通过以下简单的类，我在使用 SHA1 时不必使用 try catch，我可以将自定义 BigNumber 类作为参数，也可以将 String 作为参数来更新函数。

以下 BigNumber 类包含我需要的所有函数以及我需要它们的确切方式。

```
public class BigNumber {
    private BigInteger m_bn;

    public BigNumber() {
        m_bn = new BigInteger("0");
    }

    public BigNumber(BigInteger bn) {
        m_bn = bn;
    }

    public BigNumber(String hex) {
        setHexStr(hex);
    }

    //reversed no minsize
    public byte[] asByteArray() {
        return asByteArray(0, true);
    }

    //reversed with minsize
    public byte[] asByteArray(int minSize) {
        return asByteArray(minSize, true);
    }

    public byte[] asByteArray(int minSize, boolean rev) {
        byte[] mag = m_bn.toByteArray();

        //delete sign bit
        //there is always a sign bit! so if bitNum % 8 is zero then
        //the sign bit created a new byte (0th)
        if(getNumBits() % 8 == 0) {
            byte[] tmp = new byte[mag.length-1];
            System.arraycopy(mag, 1, tmp, 0, mag.length-1);
            mag = tmp;
        }

        //extend the byte array if needed
        int byteSize = (minSize >= getNumBytes()) ? minSize : getNumBytes();
        byte[] tmp = new byte[byteSize]; 

        //if tmp's length smaller then byteSize then we keep 0x00-s from left
        System.arraycopy(mag, 0, tmp, byteSize-mag.length, mag.length);

        if(rev) ByteManip.reverse(tmp);

        return tmp;
    }

    public String asHexStr() {
        return ByteManip.byteArrayToHexStr(asByteArray(0, false));
    }

    public void setHexStr(String hex) {
        m_bn = new BigInteger(hex, 16);
    }

    public void setBinary(byte[] data) {
        //reverse = true
        ByteManip.reverse(data);
        //set as hex (binary set has some bug with the sign bit...)
        m_bn = new BigInteger(ByteManip.byteArrayToHexStr(data), 16);
    }

    public void setRand(int byteSize) {
        byte[] tmp = new byte[byteSize];
        new Random().nextBytes(tmp);
        //reversing byte order, but it doesn't really matter since it is a random
        //number
        setBinary(tmp);
    }

    public int getNumBytes() {
        return (m_bn.bitLength() % 8 == 0) ? (m_bn.bitLength() / 8) : (m_bn.bitLength() / 8 + 1);
    }

    public int getNumBits() {
        return m_bn.bitLength();
    }

    public boolean isZero() {
        return m_bn.equals(BigInteger.ZERO);
    }

    //operations
    public BigNumber modExp(BigNumber exp, BigNumber mod) {
        return new BigNumber(m_bn.modPow(exp.m_bn, mod.m_bn));
    }

    public BigNumber mod(BigNumber m) {
        return new BigNumber(m_bn.mod(m.m_bn));
    }

    public BigNumber add(BigNumber bn) {
        return new BigNumber(m_bn.add(bn.m_bn));
    }

    public BigNumber subtract(BigNumber bn) {
        return new BigNumber(m_bn.subtract(bn.m_bn));
    }

    public BigNumber multiply(BigNumber bn) {
        return new BigNumber(m_bn.multiply(bn.m_bn));
    }   
} 
```

我的问题是在 Java 语言中使用这些类而不是内置类有多普遍？它是否使其他程序员无法阅读我的代码（与使用内置类实现所有内容相比）？

我读过新的 C++ 程序员拼命地尝试编写他们以前用 C 编写的代码，因此 C++ 的好处对他们来说仍然是隐藏的。恐怕我在 Java 中做了类似的事情：尝试自己实现所有东西，而不是直接使用内置类。这是否发生（例如在 BigNumber 类中）？

感谢您的意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:34:28.583

我通常会编写一个实用程序类来支持我处理逻辑。如

```
public class CommonUtil{

  public byte[] asByteArray(int minSize)
  {
    return "something".getBytes();
  }

  // add more utility methods

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:37:23.763

当您通过这样做增加一些价值时，包装一个类是有意义的。如果您要添加小功能，则值得使用实用程序类而不是包装现有的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T18:46:30.240

我认为，如果您没有充分的理由再次实现相同的功能，您可能不应该这样做。这里有几个原因：

*   内置类被世界各地的很多人使用，因此错误比你的代码少
*   有 Java 经验的用户在使用标准类方面会比你的类更好，他们将需要更少的时间来理解你的代码并在你的项目中编写新的东西
*   内置类具有良好的文档，因此使用起来要容易得多
*   实现由 Java 专业人员实现和测试的东西是在浪费时间。最好专注于自己的项目
*   如果您正在编写一个长期项目，您将需要支持您的所有课程。Oracle 已经支持内置类。让他们做他们的工作！
*   最后的但并非最不重要的。你确定你比内置类的作者更了解这个问题吗？只有答案是肯定的，才考虑编写自己的实现。即使是日常使用的类（例如集合或与时间相关的类）的实现也可能很棘手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T18:48:12.810

通过创建一个为您做这些事情的课程，您不会获得任何东西。如果您要经常执行某些操作，那么您可能想要创建一个带有静态方法的新类，为您完成这些重要的事情。

假设您始终需要一个排序数组。您可以创建一个新课程，我们称之为`SortedArray`. [您可以在添加某些内容时对其进行排序，但是当您可以添加所有内容然后调用（实用程序）方法Arrays.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28byte%5b%5d%29)时，为什么要这样做呢？对于常见操作，请查看 Java 的[Arrays](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)类 - 如果您经常做某事，那是您为其创建方法的东西，例如搜索和排序。在您的情况下，您可以创建一个实用方法，将 BigInteger 转换为您的字节数组。您不应该只是制作自己的“更好”版本来满足您的需求。当其他人查看您的代码时，使用标准对象会好得多，而不是使用不使用的[自定义对象](http://thedailywtf.com/Articles/CommonUtils-and-the-Inadequate-javalang.aspx).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T18:37:21.527

正如@Shark 评论的那样，创建自己的解决方案没有意义，因为：

1.  他们需要时间来创造
2.  他们变得不那么灵活

但是，您可以扩展类（推荐）或使用可能更适合您的 3rd 方框架。

# sql - 在 EJB 查询 IN 子句中绑定变量

> ID：13165356
> 
> 赞同：0
> 
> 时间：2012-10-31T18:28:06.357
> 
> 标签：sql, oracle, ejb-3.0, bind-variables

是否可以像这样在 EJB IN 子句中绑定列表？

```
Query query = myEntitymanager.createNativeQuery("SELECT e FROM EntityName e WHERE e.id IN (:ids)");
//ids is a List of Long
query.setParameter("ids", ids);
result = query.getResultSet(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:45:44.047

**IN**子句在 JQPL 中有效，在这里[http://docs.oracle.com/javaee/6/tutorial/doc/bnbuf.html#bnbvf](http://docs.oracle.com/javaee/6/tutorial/doc/bnbuf.html#bnbvf)您可以在 javaee 6 规范中阅读它。
但是你想做什么？在您的示例中，您正在构建本机查询，因此 IN 子句支持和行为取决于您使用的 jdbc 驱动程序。

# cakephp - cakephp 包含关联条件问题

> ID：13165364
> 
> 赞同：2
> 
> 时间：2012-10-31T18:28:35.183
> 
> 标签：cakephp

我有以下协会

后->小学->中学

```
$results = $this->Post->find('all', array(
    'conditions' => array(
        'Post.post_id =' => 2,
        'Primary.secondary_id !=' => null
    ),
    'contain' => array(
        'Primary' => array(
            'Secondary' => array(
                'conditions' => array('Secondary.short_code =' => 'code')
            )
        )
    )
)); 
```

返回这个。

```
Array
(
    [0] => Array
        (
            [Post] => Array
                (
                    [id] => 2
                    [created] => 2012-10-29 09:48:29
                    [modified] => 2012-10-29 09:48:29
                )

            [Primary] => Array
                (
                    [id] => 3
                    [secondary_id] => 6
                    [Secondary] => Array
                        (
                            [id] => 6
                            [short_code] => code
                            [created] => 2012-10-31 11:19:56
                            [modified] => 2012-10-31 11:20:03
                        )

                )

        ) 
```

但是当我改变

```
'conditions' => array('Secondary.short_code =' => 'code') 
```

到

```
'conditions' => array('Secondary.short_code !=' => 'code') 
```

当我不想要它时，它仍然返回主记录。

```
Array
(
    [0] => Array
        (
            [Post] => Array
                (
                    [id] => 2
                    [created] => 2012-10-29 09:48:29
                    [modified] => 2012-10-29 09:48:29
                )

            [Primary] => Array
                (
                    [id] => 3
                    [secondary_id] => 6
                    [Secondary] => Array
                        (
                        )

                )

        ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T18:52:46.337

很难确切知道您希望达到什么目标，但我认为这听起来像是您试图根据“次要”模型的条件来限制“主要”结果。

如果是这种情况，您将需要使用`joins()`而不是`contain()`.

原因：当您使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)时，它实际上会执行单独的查询，然后在将数据返回给您之前组合结果。这样做在很多方面都很棒，但它不允许您根据针对其子项的条件来限制父项结果。

为此，只需使用[joins()](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。（创建 MySQL JOIN 的 CakePHP 语法）

# sql - SQL 字典表是否应该有 IDENTITY 列

> ID：13165368
> 
> 赞同：3
> 
> 时间：2012-10-31T18:29:15.340
> 
> 标签：sql, dictionary

我的应用程序需要一个`Dictionary`只能由以下人员引用的通用查找表`KEY {VARCHAR(N) UNIQUE}`

有什么理由我不应该设置`KEY`为主键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:34:08.940

您绝对可以使用 VARCHAR 作为主键。但是作为主键，如果有任何机会，将很难更新。但是根据您的需要，您绝对可以使用 VARCHAR 作为主键

# objective-c - 在 IOS 中渲染交互式 PDF

> ID：13165376
> 
> 赞同：1
> 
> 时间：2012-10-31T18:30:01.340
> 
> 标签：objective-c, ios5, ios6, core-graphics

为了在 Objective C 中渲染 PDF，我们调用`CGContextDrawPDFPage`方法。在IOS6中，使用这种方法渲染交互式PDF会占用大量内存，一段时间后会导致内存警告。这是因为应用程序内部移动页面的缓存机制。但是由于内存警告，应用程序正在崩溃。当我在 IOS6 中配置应用程序时，内存在 IOS5 中运行良好并且内存稳定。有人知道这个问题吗？IOS6中的PDF渲染（`CoreGraphics`& ）框架有什么变化吗？`QuartzCore`

# drupal - Drupal 日期重复间隔继承

> ID：13165379
> 
> 赞同：1
> 
> 时间：2012-10-31T18:30:19.017
> 
> 标签：drupal, drupal-7, drupal-modules

我需要一个用于重复事件的全局间隔模板。我正在构建一个日程管理网络应用程序。我有一组事件在某个时刻定期发生。例如，我有一个火车时刻表。在某些冬季或夏季期间，他们每周都会重复自己。使用日期模块，我必须输入**每条**火车路线的夏季时段的结束日期和开始日期。我想要做的是简单地添加一个分类术语，它将保持重复间隔和一些假期排除......

这个更多的 Drupal 哲学问题，但我认为其他人之前也遇到过类似的问题。也许我从一个错误的角度来看待这个问题，有人可以借给我一双新的眼睛。

# android - 锁定（“Kiosk 模式”）Android 设备

> ID：13165384
> 
> 赞同：4
> 
> 时间：2012-10-31T18:30:46.703
> 
> 标签：android, kiosk

在满足以下要求的同时，您将如何锁定 Android 设备：

*   访问 Wifi 网络
*   访问单个公司的应用程序
*   能够下载/更新到公司应用程序的较新版本
*   访问蓝牙打印机

显然，这是一个非常普遍的问题，但我希望得到一些指导。这个问题有没有现成的解决方案？我知道 SecureLock 和 Device Lock 之类的应用程序，但是这些应用程序中的任何一个都允许为我们的应用程序更新应用程序吗？

如果我们将设备预配置为只有我们的应用程序而没有其他应用程序，删除所有其他应用程序会怎样？

同样，只是在这里寻找一些方向/建议。

注意：我知道基本上任何事情都可以通过发布自定义版本的 Android 来完成，但实施工作是我们决定解决方案的一个因素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T22:14:28.287

我相信大部分可以通过构建“启动器”应用程序并使其全屏（覆盖状态栏）来实现。查看 API 演示[主页](http://developer.android.com/tools/samples/index.html)。

> 访问 Wifi 网络

您可以使用[WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html)来处理列表/连接/等。

> 访问单个公司的应用程序

将主应用程序创建为启动器使您能够控制可以安装/卸载/启动/等其他应用程序。

> 能够下载/更新到公司应用程序的较新版本

这可以通过简单地下载更新的 .apk（具有更大的版本代码）并[通过 Intent to install 打开文件来](https://stackoverflow.com/a/4969421/377260)轻松完成。

> 访问蓝牙打印机

我对此了解不多，但是如果可以在普通应用程序中完成，则启动器方法将涵盖它。

# iphone - 如何以简单的方式将 iPhone 应用程序转换为通用应用程序？

> ID：13165386
> 
> 赞同：2
> 
> 时间：2012-10-31T18:30:55.267
> 
> 标签：iphone, objective-c, ios, ipad

我有一个使用 iOS 开发的 iPhone 应用程序，我需要将该应用程序转换为通用应用程序，以便该应用程序可以出现在 AppStore 的 iPad 应用程序部分。

就像将我的项目中的设备部分更改为通用一样简单，或者我必须重新开发应用程序，创建新视图等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:40:39.583

这完全取决于您的应用程序，但一般来说，是的，您需要创建新视图。

我的意思是，即使您想保持完全相同的 UI，提供 iPad 特定版本的 xib 文件或调整您以编程方式创建的视图也会更方便。这是因为 iPad 不仅仅是更大的事实：它有不同的比例（3:4 与 2:3），这完全改变了一切。您可能会尝试为您的视图和分组视图使用自动调整大小设置，以使相同的 xib 在两个屏幕上按需要工作，但我怀疑这不是那么容易，除非是非常简单的界面。

无论如何，这不是故事的结局。

实际上，您不会希望 iPad 的“好”应用程序具有与 iPhone 版本相同的 UI，因为更大的屏幕空间确实需要使用不同的布局和信息和控件的组织。

正如我所说，它在很大程度上取决于您的应用程序（游戏是上述规则的最强例外），但在大多数情况下，如果您专门为 iPad 重新设计它，而不是简单地调整它（这样在 1x/2x 模式下不显示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:42:33.097

简单的答案是肯定的，只需将设备系列更改为通用即可。但这毫无意义，您甚至可能会被 Apple 拒绝。

花点时间实际创建一个利用更大屏幕的应用程序。使用拆分视图控制器和弹出框或任何适合您的应用程序的东西。

只是让你的主视图更大对你的用户来说是一种糟糕的体验。

# templates - 将属性动态插入 JSF2/Primefaces 模板？

> ID：13165394
> 
> 赞同：2
> 
> 时间：2012-10-31T18:31:47.210
> 
> 标签：templates, jsf-2, primefaces, facelets

我正在创建一个简单的 Web 应用程序来尝试使用 PrimeFaces 的 JSF2，到目前为止，它开箱即用的功能给我留下了深刻的印象。通过各种教程和文章，我对模板中的属性以及是否可以插入这些属性有疑问。

我知道我可以在模板中插入大量 HTML 内容，例如：

```
<title>
  <ui:insert name="title">Default Title</ui:insert>
</title> 
```

但在某些情况下，在属性级别插入会很有用。我想到的具体一个是 TabMenu，如果您使用 TabMenu 进行导航（并且您希望每个页面上都使用相同的 TabMenu，因此使用模板很有意义），您可能希望根据不同设置“activeIndex”您正在查看的页面。然而，这似乎不适用于模板文件：

```
<p:tabMenu <ui:insert name="activeIndex">activeIndex="0"</ui:insert>>
  <p:menuitem value="Overview" outcome="main" icon="ui-icon-star"/>
  <p:menuitem value="Demos" outcome="demos" icon="ui-icon-search" />
  <p:menuitem value="Documentation" outcome="docs" icon="ui-icon-document"/>
</p:tabMenu> 
```

希望这是有道理的。有没有办法做到这一点，或者这个设计完全错误并且有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:56:19.470

将其作为`<ui:param>`.

例如在模板客户端中：

```
<ui:composition template="/WEB-INF/templates/some.xhtml">
    <ui:param name="activeIndex" value="0" />

    ...
</ui:composition> 
```

在主模板中：

```
<p:tabMenu activeIndex="#{activeIndex}"> 
```

# json - awk 将配置文件转换为 json

> ID：13165395
> 
> 赞同：1
> 
> 时间：2012-10-31T18:31:55.093
> 
> 标签：json, shell, awk, scripting-language

我有一个像这样的配置文件：

```
[sectionOne]
key1_1=value1_1
key1_n=value1_n

#this is a comment
[sectionTwo]
key2_1=value2_1
key2_n=value2_n

;this is a comment also
[SectionThree]
key3_1=value3_1
key3_n=value3_n
[SectionFor]
... 
```

我需要使用最少的 shell 工具将它翻译成 json（没有 perl、python、php，只有 sed、awk 可用）

所需的输出是：

```
[
{"sectionOne": { "key1_1": "value1_1","key1_n": "value1_n"} },
{"sectionTwo": { "key2_1": "value2_1","key2_n": "value2_n"} },
{"sectionThree": { "key3_1": "value3_1","key3_n": "value3_n"}}
....
] 
```

我尝试了几种方法/小时，没有成功

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:14:22.793

您的示例输入和所需输出之间存在一些不一致，因此很难确定，但这应该很接近并且如果不是 100% 您想要的也很容易调整：

```
$ cat file
[sectionOne]
key1_1=value1_1
key1_n=value1_n

#this is a comment
[sectionTwo]
key2_1=value2_1
key2_n=value2_n

;this is a comment also
[SectionThree]
key3_1=value3_1
key3_n=value3_n
$
$ cat tst.awk
BEGIN{
   FS="="
   print "["
}

/^([#;]|[[:space:]]*$)/ {
   next
}

gsub(/[][]/,"") {
   printf "%s{\"%s\": { ", rs, $0
   rs="} },\n"
   fs=""
   next
}

{
   printf "%s\"%s\": \"%s\"", fs, $1, $2
   fs=","
}

END{
   print rs "]"
}
$
$ awk -f tst.awk file
[
{"sectionOne": { "key1_1": "value1_1","key1_n": "value1_n"} },
{"sectionTwo": { "key2_1": "value2_1","key2_n": "value2_n"} },
{"SectionThree": { "key3_1": "value3_1","key3_n": "value3_n"} },
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:14:34.897

```
awk 'BEGIN{ print "[" }
    /^[#;]/{ next }  # Ignore comments
    /^\[/{ gsub( "[][]", "" ); printf "%s{\"%s\": { ", s ? "}},\n" : "", $0; n=0; s=1 }
    /=/ { gsub( "=", "\":\"" ); printf "%c\"%s\" ", n ? "," : "", $0; n=1 }
    END{ print "}}\n]" }
' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:21:53.060

这是使用 bash 的解决方案`awk`：

```
#!/bin/bash

awk -F"=" 'BEGIN{in_section=0; first_field=0; printf "["}
            {
                last=length($1);
                if ( (substr($1,1,1) == "[") && (substr($1,last, last) == "]")) {
                    if (in_section==1) {
                        printf "} },";
                    }
                    section=substr($1, 2, last-2);
                    printf "\n{\"%s\":", section;
                    printf " {";
                    first_field=1;
                    in_section=1;
                } else if ( substr($1, 1, 1) == "#" || substr($1, 1, 1) == ";"){

                } else if ( ($1 != "") && ($2 != "") ) {
                    if (first_field==0) {
                        printf ", ";
                    }
                    printf "\"%s\": \"%s\"", $1, $2;
                    first_field=0;
                }

            }
            END{printf "} }\n]\n"}' 
```

# c# - 使用 SmtpClient 时“操作超时”

> ID：13165396
> 
> 赞同：14
> 
> 时间：2012-10-31T18:32:03.950
> 
> 标签：c#, .net, email, smtp, gmail

我正在尝试使用 C# 框架创建一个小应用程序来发送电子邮件。但是，它不起作用。该应用程序总是给我“操作超时”。我不知道为什么。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
   {
     MailAddress fromAddress = new MailAddress("from@gmail.com");
     MailAddress toAddress = new MailAddress("to@gmail.com");

     MailMessage mail = new MailMessage(fromAddress.Address, toAddress.Address);
     mail.Subject = "Testing";
     mail.Body = "contents.";

     SmtpClient client = new SmtpClient();
     client.Host = "smtp.gmail.com";
     client.Port = 587;
     client.EnableSsl = true;
     client.Timeout = 100;
     client.UseDefaultCredentials = false;
     client.Credentials = new NetworkCredential("username", "password");

     try
        {
            client.Send(mail);
            MessageBox.Show("Mail Sent!", "Success", MessageBoxButtons.OK);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK);
        }

    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T19:30:06.490

尝试设置更高的超时限制。它以毫秒为单位。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net.Mail;
using System.Net;

namespace GmailSendTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MailAddress fromAddress = new MailAddress("myusername@gmail.com");
            MailAddress toAddress = new MailAddress("myusername@gmail.com");

            MailMessage mail = new MailMessage(fromAddress.Address, toAddress.Address);
            mail.Subject = "Testing";
            mail.Body = "contents.";

            SmtpClient client = new SmtpClient();
            client.Host = "smtp.gmail.com";
            client.Port = 587;
            client.EnableSsl = true;
            client.Timeout = 10000;
            client.UseDefaultCredentials = false;
            client.Credentials = new NetworkCredential("myusername", "mypassword"); 

            try
            {
                client.Send(mail);
                MessageBox.Show("Mail Sent!", "Success", MessageBoxButtons.OK);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK);
            }
        }
    }
} 
```

# sql - 在自引用表上编写递归 SQL 查询

> ID：13165398
> 
> 赞同：5
> 
> 时间：2012-10-31T18:32:12.760
> 
> 标签：sql, sql-server, recursion, common-table-expression

我有一个数据库，其中包含一个名为 Items 的表，其中包含以下列：

*   ID - 主键，唯一标识符
*   名称 - nvarchar(256)
*   ParentID - 唯一标识符

name 字段可用于构建项目的路径，方法是遍历每个 ParentId，直到它等于“11111111-1111-1111-1111-111111111111”，这是一个根项目。

因此，如果您有一个包含以下行的表

```
ID                                   Name        ParentID
-------------------------------------------------------------------------------------
11111111-1111-1111-1111-111111111112 grandparent 11111111-1111-1111-1111-111111111111
22222222-2222-2222-2222-222222222222 parent      11111111-1111-1111-1111-111111111112
33333333-3333-3333-3333-333333333333 widget      22222222-2222-2222-2222-222222222222 
```

因此，如果我在上面的示例中查找 ID 为“33333333-3333-3333-3333-333333333333”的项目，我想要路径

```
/grandparent/parent/widget 
```

回来。我试图写一个 CTE，因为看起来这就是你通常会完成这样的事情的方式 - 但由于我不做很多 SQL，我不太清楚我哪里出错了。我查看了一些示例，这与我似乎能够得到的一样接近——它只返回子行。

```
declare @id uniqueidentifier
set @id = '10071886-A354-4BE6-B55C-E5DBCF633FE6'
;with ItemPath as (
    select a.[Id], a.[Name], a.ParentID 
        from Items a
            where Id = @id

    union all

    select parent.[Id], parent.[Name], parent.ParentID 
        from Items parent 
            inner join ItemPath as a
                on a.Id = parent.id
                    where parent.ParentId = a.[Id]
)
select * from ItemPath 
```

我不知道如何为路径声明一个局部变量并在递归查询中继续附加它。在此之后，我将尝试至少将所有行都发送给父级。如果有人也可以提供帮助-我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T18:43:16.597

好吧，这是可行的解决方案

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/afd16/2)

```
declare @id uniqueidentifier
set @id = '33333333-3333-3333-3333-333333333333'

;with ItemPath as 
(
    select a.[Id], a.[Name], a.ParentID 
    from Items a
    where Id = @id

    union all

    select parent.[Id], parent.[Name] + '/' + a.[Name], parent.ParentID 
    from ItemPath as a
        inner join Items as parent on parent.id = a.parentID
)
select * 
from ItemPath
where ID = '11111111-1111-1111-1111-111111111112' 
```

我不太喜欢它，我认为更好的解决方案是换一种方式。等一下，我试着写另一个查询:)

**更新**在这里

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/b1aee/1)

```
create view vw_Names
as
    with ItemPath as 
    (
        select a.[Id], cast(a.[Name] as nvarchar(max)) as Name, a.ParentID 
        from Items a
        where Id = '11111111-1111-1111-1111-111111111112'

        union all

        select a.[Id], parent.[Name] + '/' + a.[Name], a.ParentID 
        from Items as a
            inner join ItemPath as parent on parent.id = a.parentID
    )
select * 
from ItemPath 
```

现在你可以使用这个视图

```
declare @id uniqueidentifier
set @id = '33333333-3333-3333-3333-333333333333'

select * 
from vw_Names where Id = @id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-19T18:25:42.947

我需要这个答案的稍微不同的版本，因为我想生成树中所有谱系的列表。我还想知道每个节点的深度。我添加了一个可以循环访问的顶级父级临时表和一个用于构建结果集的临时表。

```
 use Items

    Select *
    Into   #Temp
    From   Items
    where ParentID=0

    Declare @Id int 

    create table #Results 
    (
        Id int,
        Name nvarchar(max),
        ParentId int,
        Depth int
    )
    While (Select Count(*) From #Temp) > 0
    Begin
        Select Top 1 @Id = Id From #Temp
        begin
            with ItemPath as 
            (
                select a.[Id], cast(a.[Name] as nvarchar(max))as Name, a.ParentID ,1 as 
Depth
                from Items a
                where a.ID = @id

                union all

                select a.[Id], parent.[Name] + '/' + a.[Name], a.ParentID, 1 + Depth
                from Items as a
                    inner join ItemPath as parent on parent.id = a.parentID
            )
            insert into #Results
            select *
            from ItemPath
        end         
        Delete #Temp Where Id = @Id            
    End
    drop table #Temp           
    select * from #Results
    drop table #Results 
```

如果我们从下表开始...

```
Id Name   ParentID
1  Fred   0
2  Mary   0
3  Baker  1
4  Candle 2
5  Stick  4
6  Maker  5 
```

我们会得到这个结果表。

```
Id Name                    ParentID Depth
1  Fred                    0        1
2  Mary                    0        1
3  Fred/Baker              1        2
4  Mary/Candle             2        2
5  Mary/Candle/Stick       4        3
6  Mary/Candle/Stick/Maker 5        4 
```

# c# - 如何读取 xml 文件并将其绘制到 WebMatrix (C#) 页面

> ID：13165403
> 
> 赞同：0
> 
> 时间：2012-10-31T18:32:43.267
> 
> 标签：c#, xml, razor, webmatrix

尽管我尝试了多少次，但我从来没有成功地在 WebMatrix（或 JavaScript）中成功加载 xml 文档。

没有在线示例是完整或准确的。

如果我有一个包含这个（并且只有这个）的 xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<someNode>
    <someValue>HEY THERE! I'M XML!</someValue>
    <someValueTwo>Another Value</someValueTwo>
</someNode> 
```

我如何（从加载 xml 文档等开始）在我的一个 WebMatrix 页面上绘制两个元素的值（请包括您提供的代码的位置，因为我不知道）。

请包括我需要代码的所有地方，而不仅仅是加载或写入页面。

****** *** ** *** ****更新：******* *** *********

 ****哦，好吧，nvm，xml反正也没用，我就用另一个数据库或者渲染另一个外部cshtml页面的内容什么的。

我以前看过 XPath 等等，但我并不担心通过标记名、id、属性等来选择它们，因为研究起来很容易。

有时我想知道为什么 XML 仍然存在......（是的，我知道它（应该）帮助跨不同语言和平台传递数据）但事实是，即使有在线教程和演练，它也不起作用，而且似乎没有人真正知道如何做到这一点。为什么它还在？WebMatrix 是不是该摆脱基于 xml 的方法了，因为它们不起作用，而且没有人知道如何尝试加载 xml 文件而不会出错？

只是好奇xml是否会在未来的更新中淡出。

****** *** ** *** ****更新：******* *** *********

 ****好的，有人告诉我 xml 应该仍然有用。你必须不是我才能让它工作吗，大声笑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:16:09.607

我从来没有对 WebMatrix 做过任何事情，所以在这方面我不会有太多话要说。然而，我对您对 XML 的态度感到困惑。如果您的意思只是 XML 在 WebMatrix 上下文中不可用，我既不能确认也不能否认；但是，XML 在许多其他场景中非常有用，您的问题不清楚您是否知道这一点。抱歉，我对您的问题无能为力，只是澄清一下，就数据文件格式而言，XML 是一个非常强大的工具。********

# asp.net - 使用 HttpModule 拦截对 iisnode 的请求

> ID：13165404
> 
> 赞同：0
> 
> 时间：2012-10-31T18:32:46.853
> 
> 标签：asp.net, node.js, umbraco, iisnode

我有一个使用 iisnode 在 .net 应用程序的子目录中运行的 nodejs 应用程序（实际上是 umbraco）。

.net 应用程序使用表单身份验证，我想使用与 .net 应用程序相同的机制来保护 iisnode 应用程序。

我已经尝试使用 iisnode 应用程序注册模块，但它似乎甚至没有触发事件处理程序。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:57:40.200

似乎创建一个 HttpModule 来拦截 nodejs 请求是不可能的。但是，我确实找到了一种方法来获取我所追求的身份验证信息。

我在我的 nodejs (expressjs) 应用程序中创建了一些中间件，这些中间件从请求中提取标头（包括 cookie），并使用这些相同的标头向 asp.net 应用程序上专门创建的 url 发出请求。

此 url 仅返回 cookie 中指定的用户的用户信息（如果存在 cookie）。如果我得到一些信息，那么我知道用户已登录。没有信息意味着他们没有登录，我重定向到 umbraco 登录页面。

# ruby-on-rails - 在非测试环境中创建 Rails 测试仪表板

> ID：13165406
> 
> 赞同：1
> 
> 时间：2012-10-31T18:32:51.347
> 
> 标签：ruby-on-rails, testing

我想创建一个在线管理仪表板，它将指示我们最重要的测试是否通过。我已经编写了测试，但是如何按需运行它们并查看它们在非测试（生产）环境中的结果？

如果可能的话，我想避免重写测试代码。

我对如何做到这一点有 3 个想法（不确定它们是否有用）：

1.  使用系统调用 grep`-v`测试的详细 ( ) 输出
2.  使用不同的 test_runner 可以更容易地通过系统调用解析输出
3.  以某种方式抽象测试功能，以便它们可以在非测试环境中使用。（不知道我会如何做到这一点..

# xml - 将�解码为真实字符

> ID：13165408
> 
> 赞同：9
> 
> 时间：2012-10-31T18:33:02.500
> 
> 标签：xml, unicode

当我从 Twitter 的 Stream API 读取数据然后写入 xmlfile 时。

但是一些特殊字符`&#55357;`会导致错误（我的意思是当我在 Chrome 中打开那个 xmlfile 时，Chrome 说那个字符有错误！）

我想`&#55357;`在写入 xmlfile 之前将该编码序列 ( ) 转换为真实字符 (�)！

如何实施？

- - - - - - -添加 - - - - - - -

这是 XMLFile 内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<text>@carlyraejepsen would be a dream if you follow me, please follow me?, I love you so much you're my inspiration</text>
<text>someone please bring me a caramel apple and a mocha from black cat. i'll love you forever</text>
<text>“@G_MartinFlyKick: Marry me Juliet.I love you and that's all I really know.”&amp;#55357;&#56834;&#55357;&#56834;&#55357;&#56834;&#55357;&#56834;&#55357;&#56834;</text>
<text>"I need to see a picture of him cuz Im trying to imagine you guys making love and all I see is u climbing on top of a big question mark"lmao</text>
<text>@District3music hi, I LOVE YOU follow me please? &amp;lt;3 xx 23</text>
<text>RT @syardley_: So appreciative of my family and people I love, wouldn't be where I am without them. #thankful</text>
<text>#DISTRICT3HALLOWEENFOLLOWSPREE #DISTRICT3HALLOWEENFOLLOWSPREE #3EEKERFROMTHENETHERLANDS love you! Please follow ? @District3music x42</text>
<text>Arguably my favorite electronic music producer @Kluteuk is coming back to Toronto on Dec 22nd. So stoked. Guy has made so many tunes I LOVE.</text>
<text>The stakes are high, the water's rough, but this love is ours.</text>
<text>@NiallOfficial Answer me, I love you very much. Venezuela loves. jhgj</text>
<text>Love this shit http://t.co/qSP79NKx</text>
</root> 
```

这是来自 Chrome 的错误：

```
This page contains the following errors:

error on line 5 at column 91: xmlParseCharRef: invalid xmlChar value 55357
Below is a rendering of the page up to the first error. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-31T18:43:38.280

字符引用`&#55357;`表示代理代码点 (U+D83D)，因此尝试将其转换为字符是错误的。它不是一个字符，甚至不是半个字符。

您需要回溯到生成参考的点。原因可能是字符编码混乱。在 UTF-16 中，代理代码单元可能会出现，但当数据被解释为字符并例如转换为另一种编码或转换为字符引用时，必须成对处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-14T01:44:51.013

您可以在服务器响应后使用正则表达式来替换它。python中的简单示例：

```
import re 
pattern = re.compile(r'&#')
new_content = pattern.sub(' ', SERVER_RESPONSE) 
```

# html - 如何使用 CSS 使我的 Div 盒子支架在里面看起来像这样？

> ID：13165409
> 
> 赞同：1
> 
> 时间：2012-10-31T18:33:03.370
> 
> 标签：html, css

我有一些问题让我的 div 框持有人看起来像这样：

![盒子](../Images/88126eca320647111fd29198dc0e2b0b.png)

我一直试图让我的持有人 div 框看起来像这样，但我似乎无法像 img 那样得到它。

这就是我的 html 的样子：

```
 <div class="productholdercart">  
         <img src="@Html.DisplayFor(modelItem => item.Image)" alt="" />
         <div class="productinfo2"> </div>
         <div class="productprice2"><input type="button" value="Delete" class="button"<div> 
```

这是CSS：

```
.productholdercart
{

width: 931px;
height:200px;
margin-left: 133px;
margin-bottom: 30px;
background-color: white; 
border-style:solid;
border-width: 1px;
border-color: #d2d2d2;

background: -webkit-gradient(linear, left top, left bottom, 
color-stop(0%, white), color-stop(50%, white), color-stop(170%, #ffffff)); 
background: -moz-linear-gradient(top, white 0%, white 55%, #ffffff 150%); 
}

.productholdercart img 
{
    margin-top:5px;
    display: inline-block;
    height: 136px;
    width:120px;
}

.productinfo2 
{
    margin-top: 10px;
    display: inline-block;
    vertical-align: top;
    height: 40px;
    border-style:solid;
    border-width:1px;
    width:800px;

}

.productinfo2 h2 
{
font-family:Georgia;
font-size:18px;
color:#BED600;
}

.productinfo2 p 
{
margin-top: -13px;
font-family: Verdana;
font-size:12px;
color:#333333;
}

.productprice2 
{

    width:800px;
    height: 40px;
    text-align: right;
    border-style:solid;
    border-width:1px;
    float:left;

}

.productprice2 h2 
{
font-size: 20px;
color:#333333;
font-family: Verdana;
} 
```

感谢任何形式的帮助，以使其看起来像 img。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:41:58.617

这是我的编辑：

```
.productholdercart img 
{
margin-top:5px;
display: inline-block;
height: 136px;
width:120px;
 float:left;
}

.productinfo2 
{
margin-top: 10px;
display: inline-block;
vertical-align: top;
height: 40px;
border-style:solid;
border-width:1px;
width:800px;
float:right;

}

.productprice2 
{
width:800px;
height: 40px;
text-align: right;
border-style:solid;
border-width:1px;
float:right;
clear:right;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:45:22.817

像下面这样的东西应该可以帮助你：

> HTML

```
<div id="container">
        <div id="img-container"></div>
        <div class="text-container">
            <div class="product-info"></div>
            <div class="product-info"></div>
        </div>
    </div> 
```

> CSS

```
 #container{width:560px;margin:auto;border:1px solid red;overflow:hiden;height:300px;}
        #img-container{float:left;border:1px solid red;width:200px;height:280px;margin-top:10px;margin-left: 4px;}
        .text-container{float:left;width:340px;height:280px;margin-left:10px;margin-top:10px;}
        .product-info {
    border: 1px solid blue;
    height: 124px;
    margin-left: 10px;
    margin-right: 10px;
    margin-top: 9px;
    overflow: hidden;
} 
```

[演示](http://jsfiddle.net/ggvbY/1/)

# wcf - 如何从 SSIS 自定义日志提供程序调用 WCF 服务？

> ID：13165415
> 
> 赞同：1
> 
> 时间：2012-10-31T18:33:27.807
> 
> 标签：wcf, ssis

我创建了一个 SSIS 自定义日志提供程序（SQL Server 2012 / Visual Studio 2010 / .Net Framerowk 4），现在我必须调用 WCF 服务。我不知道该怎么做，因为这是一个自定义库项目，没有配置文件。

想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:51:24.417

这在 SSIS 中是一件棘手的事情。您最好从 C# 调用 WCF 服务并使用该应用程序来填充并暂存一个您可以从 SSIS 访问的表。

话虽如此...如果您想访问 WCF 服务，这里是基本步骤。

1.  WCF 端点配置设置。WCF 服务的端点必须放在 dtsexec.exe.config 和位于以下文件夹中的 DtsDebugHost.exe.config 文件中：C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn 它会如果您也在运行 64 位 SQL Server，请明智地在 Program Files 文件夹中执行相同的操作。

2.  现在您可以创建您的 SSISScript 并通过右键单击 References 然后添加服务来添加服务引用。

3.  如果您已将自己的“内部”代理和合同编译到 DLL 中，那么您需要将它们复制到与上述 dtsexec.exe 相同的位置，以及在 GAC 中注册它们。

4.  请记住...您需要在 SSIS 包将运行的地方执行此操作，因此通常是您的本地 SSIS 实例和生产 SQL Server。

5.  现在......对此的替代方法可能是“蛮力”在您的 SSIS 脚本中的代码中对所有 WCF 端点设置进行编码。我还没有厌倦这一点，但如果它有效，将消除在那些晦涩的位置和配置文件中对端点的需求。这将是更清洁和更好的路线。然后，您可以将 WCF 端点和其他设置存储为变量，并将它们作为只读值传递到 SSIS 脚本中。

祝你好运！

# apache - 在内部将域重定向到另一个域

> ID：13165419
> 
> 赞同：0
> 
> 时间：2012-10-31T18:33:32.843
> 
> 标签：apache, multiple-domains

我们有一个从 foo.com 运行的旧版 Web 应用程序和一个在 demo.bar.com 上运行的新版本，两者都从单个 apache 服务器运行。

httpd-vhosts.conf 文件如下所示：

```
<VirtualHost *:80>
        DocumentRoot /dir1
        ServerName foo.com
</VirtualHost>

<VirtualHost *:80>
        DocumentRoot /dir2
        ServerName demo.bar.com
</VirtualHost> 
```

目前，我们将应用程序从演示 URL 半自动迁移到生产 URL - 复制目录、更改配置文件等......

有时这很容易，有时则不然 - 取决于应用程序的复杂性。

是否可以指示 apache Web 服务器在内部将流量从 foo.com 重定向到 demo.bar.com，其中客户端看不到 demo.bar.com 并且 demo.bar.com 看不到幕后重定向？

如果可能，是否对 cookie、基本访问身份验证等有任何影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:34:56.150

I think you're looking for a [reverse proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreverse). To redirect all traffic, you could do something like this:

```
## in the foo.com virtual host
ProxyPassReverse / http://demo.bar.com/ 
```

# php - Symfony2 中的 CollectionType 验证

> ID：13165422
> 
> 赞同：3
> 
> 时间：2012-10-31T18:33:50.327
> 
> 标签：php, forms, validation, symfony, doctrine

我花了很多时间来解决这个问题，但我没有找到正确的解决方案

我有一个可以包含多个实体地址的用户实体。用户实体的验证应该像这样运行：

*   用户必须至少有两个实体地址
*   用户必须拥有最多三个实体地址
*   地址有自己的验证约束

两个实体都有自己的 formType，Address 是 User formType 中的 CollectionType。

目前，我在我的用户控制器中创建了 3 个正确显示在视图中的地址。我使用 'Assert\Count' 和 'min=2' 来验证实体中的表单。在我的控制器中，我过滤查询以删除尚未完成的地址，然后验证表单。这种方法是不正确的。如果表格无效，我无法显示这 3 个地址，我只有已填写的地址。另外，我用 Twig 制作视图时，字段中不存在错误

理想的逻辑如下：地址经过验证，用户只考虑有效地址。用户检查其验证约束是否得到遵守，然后将用户实体存储在数据库中。很简单，对吧？（……嗯，我就是这么想的）

你有什么想法或博客文章可以解决我的问题吗？

编辑（回答评论中的问题）

在用户实体中

```
<?php
//...
* @Assert\Count(
*      min=2,
*      minMessage="user_form_not_enough_addresses",
*      max=3,
*      maxMessage="user_form_too_much_addresses"
* )
*/
private $addresses;
//... 
```

在用户控制器中（当我过滤请求时）

```
//...

// Removing not completed addresses from request
$this->_filterRequest($request);

$userType = new UserType();
$user = new User();

$userForm = $request->get($userType->getName());
foreach ($userForm['addresses'] as $address) {
    $user->getAddresses()->add(new Address());
}

$form = $this->createForm($userType, $user);
$form->bind($request); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:25:31.957

经过一些研究，唯一可接受的解决方案是使用 Symfony 事件。

我们必须区分两个部分：验证和数据记录。在这两个部分中，您必须使用验证器验证地址并根据发现的错误执行某些操作。

在验证的情况下，您必须复制文件验证，`ValidationListener.php`然后使用服务来匹配您的文件。然后简单地自定义验证机制。目标是仅显示无效但需要或不需要但填充了某些字段的地址，只需搜索不同的情况并`ViolationMapperInterface::mapViolation()`在应显示错误时使用。

在记录数据的情况下，只需过滤无效地址以确保 Doctrine 不会考虑它们（否则会导致 SQL 错误）

# objective-c - NSRuleEditor 的指南或示例？

> ID：13165424
> 
> 赞同：13
> 
> 时间：2012-10-31T18:34:08.943
> 
> 标签：objective-c, macos, cocoa, nscontrol

`NSRuleEditor`看起来像一个非常强大的类，它看起来像 iTunes 智能播放列表或 Finder 智能文件夹之类的东西正在使用它。
（*我认为它应该被称为 NSSmartRuleEditor ...*）

但是除了参考之外，还有**其他**类型的文档吗？

某种示例代码或指南会很好，但看起来 ADC 没有任何东西可以提供.. 到目前为止`NSRuleEditor`，它似乎是 Cocoa 中记录最少的控件！

有人知道任何使用控件、博客文章等的开源项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:42:07.837

我认为您可能应该寻找 NSPredicateEditor 而不是 NSRuleEditor。NSPredicateEditor 是 NSRuleEditor 的子类，用于编辑“智能”播放列表等。

苹果的文档： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSPredicateEditor_class/Reference/NSPredicateEditor.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSPredicateEditor_class/Reference/NSPredicateEditor.html)

示例应用程序： [https ://developer.apple.com/library/mac/#samplecode/PhotoSearch/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/PhotoSearch/Introduction/Intro.html)

# magento - Magento Adding a Custom Layout to individual product

> ID：13165427
> 
> 赞同：0
> 
> 时间：2012-10-31T18:34:25.653
> 
> 标签：magento

Hi

I have an online estore setup using magento 1.6.2 CE, an have a very novice like question!!

THE SITUATION / FACTS:

1\. I have created Categories and sub categories.

2\. To categories i have added a custom template for left navigation.

3\. I want this template to also apply to products that i have applied to the category/ sub category. For this, i have selected Apply To Products under Custom Design to Yes.

4\. i want custom left navigations for products in different categories./p>

HOw ITS ACTING:

when i access the product using the category name/ sub category name, the template is applied to it on the individual products page. For example, say the category is MENS, and the product name is shirts, so when i access it using www.mydomain.com/MENS/shirts.html the template is applied and i see the custom left menu.

PROBLEM:

when the shirts page is accessed directly, like magento does, ie www.mydomain.com/shirts.html, the custom template is not applied. it shows blank.

what is the possible workaround for this? I have tried setting APPLY TO PRODUCTS to NO, and then adding custom layout template to each product individually... but this is too cumbersome..

Thanks

Moody

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:38:42.253

导航到您的 catalog.xml 文件

应用>设计>前端>基础>默认>布局>catalog.xml

如果没有复制它，您可能已经在您的主题文件夹中拥有此文件。

搜索

```
<catalog_product_view translate="label">
        <label>Catalog Product View (Any)</label>
        <!-- Mage_Catalog -->
        <reference name="root"> 
```

此下方的行应说明如下内容：

```
<action method="setTemplate"><template>page/2columns-right.phtml</template></action>
    </reference> 
```

编辑此内容，使其改为说明此内容

```
<action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference> 
```

注意列表示已从右到左更改，重新上传文件。嘿，它已经完成了！

[emagen - Magento 设计师，Shepherds Bush，西伦敦](http://www.emagen.co.uk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:34:58.943

您不能在配置 > 目录 > 搜索引擎优化中将“使用产品 URL 的类别路径”设置为是吗？

# c# - 自动化 Microsoft FOPE（Forefront Online Protection for Exchange）搜索

> ID：13165432
> 
> 赞同：0
> 
> 时间：2012-10-31T18:34:43.950
> 
> 标签：c#, exchange-server

所以我一直在研究一种在 FOPE 上自动搜索的方法。令人讨厌的是，Microsoft 没有提供 API 来访问它收集的数据，因此我必须模拟一个具有登录、cookie、抓取页面的所有怪癖的网络浏览器，然后使用该数据进一步抓取其中的某些链接。我应该能够得到最后几个部分，但是 MS 用于 FOPE 的设置让我感到困惑。我会发布我所知道的和我所拥有的，希望其他管理员或编码员可以提供帮助。也许这里的信息会帮助其他管理员解决这个问题，因为似乎 MS 实际上并不想让它变得用户友好。

**[https://sts.messaging.microsoft.com/login.asp](https://sts.messaging.microsoft.com/login.asp)**

```
<form name="signin" method="post" id="signin" action="">
<span class="normal">Sign in:</span>                 
<fieldset>
    <label for="email">User name:</label>
    <input type="text" id="email" name="email" maxlength="384" value="" /><br />
    <label for="Password">Password:</label>
    <input type="password" id="Password" name="Password" maxlength="256" /><br />
    <input type="submit" id="submit_signin" name="SignIn" value="Sign in" />
</fieldset>
</form> 
```

登录后，它会将我带到[https://admin.messaging.microsoft.com/Home.mvc/](https://admin.messaging.microsoft.com/Home.mvc/)（经过几次自动重定向）。在这里，我单击工具按钮，将我带到搜索页面。

**[https://admin.messaging.microsoft.com/TraceMessage.mvc/Index/123456](https://admin.messaging.microsoft.com/TraceMessage.mvc/Index/123456)**

```
<fieldset>
    <div class="legend">
        <h3><span>Search Parameters</span></h3>
    </div>
    <ul class="fieldset">
        <li class="row large">
            <div class="field"><div class="shell">
    <label for="Sender">* Sender address:</label>
    <span class="input"><span><input type="text" id="Sender" name="Sender" value="" /></span></span>
            </div></div>
            <div class="field last"><div class="shell">
    <label for="Recipient">* Recipient address:</label>
    <span class="input"><span><input type="text" id="Recipient" name="Recipient" value="" /></span></span>
            </div></div>
        </li>
        <li class="row large">
            <div class="field"><div class="shell">
    <label for="Start">* Start date:</label>
    <span class="input"><span><input type="text" id="Start" name="Start" value="10/29/2012 1:19:20 PM"/></span></span>
            </div></div>
            <div class="field last"><div class="shell">
    <label for="End">* End date:</label>
    <span class="input"><span><input type="text" id="End" name="End" value="10/31/2012 1:19:20 PM"/></span></span>
            </div></div>
        </li>
        <li class="row large">
            <div class="field"><div class="shell">
    <label for="Adjust">Time zone:</label>
    <div class="input select">
        <select id="Adjust" name="Adjust">
            <option value="-5"  selected="selected"  >
                UTC-5</option>
        </select>
            </div></div></div>
            <div class="field last"><div class="shell">
    <label for="MessageId">Message ID:</label>
    <span class="input"><span><input type="text" id="MessageId" name="MessageId" value=""/></span></span>
            </div></div>
        </li>
    </ul>
    <br />* Fields marked with the star are required.
</fieldset>
<div>
    <span class="buttons">
        <input type="submit" id="submit" value="Search" />
    </span>
</div> 
```

在此页面上，我需要插入发件人 (user@exampleSender.com) 和收件人域 (exampleReceiver.com)。在使用一些 JS 显示它正在工作后，结果会填充到页面中。

我已经[通过 C# 以](https://stackoverflow.com/questions/930807/c-sharp-login-to-website-via-program)[编程方式查看了将用户名和密码发布到登录页面](https://stackoverflow.com/questions/5869785/post-username-and-password-to-login-page-programmatically)以及登录到网站，但这两种解决方案似乎都不起作用。我希望那里的一些 FOPE 管理员可以帮助我弄清楚发生了什么以及如何进行这项工作。如果您需要我尝试一些东西或提供更多信息，请告诉我。

## 更新#1

所以我在这方面取得了一些进展。XAML 端并没有什么特别之处（只是一个带有 URL 空间的文本框、一个开始搜索的按钮和一个 WPF WebBrowser。

```
 private void executeButton_Click(object sender, RoutedEventArgs e)
    {
        DateTime timeNow = DateTime.Now;
        TimeZone zone = TimeZone.CurrentTimeZone;
        TimeSpan offset = zone.GetUtcOffset(DateTime.Now);

        this.wbControl.Navigate("https://admin.messaging.microsoft.com/TraceMessage.mvc/Trace/123456?s=" + Uri.EscapeUriString(this.inputTB.Text) + "&r=example.com&d=" + Uri.EscapeUriString(timeNow.AddDays(-29).ToString()) + "&e=" + Uri.EscapeUriString(timeNow.ToString()) + "&a=" + Uri.EscapeUriString(offset.Hours.ToString()));
   }

    private void wbControl_LoadCompleted_1(object sender, NavigationEventArgs e)
    {
        string email = "AUSERNAME";
        string password = "APASSWORD";

        dynamic doc = this.wbControl.Document;

        doc.GetElementById("email").SetAttribute("value", email);
        doc.GetElementById("Password").SetAttribute("value", password);
        doc.GetElementById("submit_signin").InvokeMember("click");
    } 
```

由于目前这是为了测试功能，某些方面是硬编码的（用户名和密码），最终不会这样。在这一点上，当涉及到代码的 InvokeMember("click") 部分时，我被卡住了。似乎出现以下错误：

> >未知模块中发生“Microsoft.CSharp.RuntimeBinder.RuntimeBinderException”类型的异常。但未在用户代码中处理
> 
> 附加信息：'System.MarshalByRefObject.InvokeMember(string, >System.Reflection.BindingFlags, System.Reflection.Binder, object[], >System.Reflection.ParameterModifier[], System.Globalization.CultureInfo, string[])' 是>由于其保护级别而无法访问
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

所以我把它包装在一个空白的 try/catch 中，但本质上它仍然没有提交表单。有没有人有什么建议？

## 更新#2

似乎我一直坐在答案上提交表格。为什么应该谨慎使用动态的另一个原因，因为您不会获得任何 IntelliSense 帮助。我提交表格所做的只是：

```
doc.GetElementById("submit_signin").Click(); 
```

现在我只需要研究如何从搜索中获取结果（仅在 JavaScript 中）并确定提交表单后加载的页面何时完成加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:49:48.597

好的，经过多次战斗，我得到了一个有效的解决方案。如果有人需要复制/改进它，我会发布 .cs 代码。到目前为止，它工作得很好：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections;
using HtmlAgilityPack;
using System.Data;

namespace TestApp
{
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void executeButton_Click(object sender, RoutedEventArgs e)
    {
        DateTime timeNow = DateTime.Now;
        TimeZone zone = TimeZone.CurrentTimeZone;
        TimeSpan offset = zone.GetUtcOffset(DateTime.Now);

        string email = "USERNAME";
        string password = "PASSWORD";

        List<string> URLList = new List<string>();

        foreach (string domain in Domains)
        {
            URLList.Add("https://admin.messaging.microsoft.com/TraceMessage.mvc/AsyncMessageList/123456?s=" + Uri.EscapeUriString(this.inputTB.Text) + "&r=" + domain + "&d=" + Uri.EscapeUriString(timeNow.AddDays(-29).ToString()) + "&e=" + Uri.EscapeUriString(timeNow.ToString()) + "&a=" + Uri.EscapeUriString(offset.Hours.ToString()));
        }

        var domainQueue = new Queue<string>(URLList);

        Action navigateQueue = () =>
        {
            if (domainQueue.Count != 0)
            {
                this.wbControl.Navigate(domainQueue.Dequeue());
            }
            else
            {
                MessageBox.Show("Completed");
            }
        };

        this.wbControl.LoadCompleted += (o, e0) =>
        {
            if (this.wbControl.IsLoaded == true)
            {
                dynamic doc = this.wbControl.Document;

                try
                {
                    doc.GetElementById("email").SetAttribute("value", email);
                    doc.GetElementById("Password").SetAttribute("value", password);
                    doc.GetElementById("submit_signin").Click();
                }
                catch
                {
                }

                if (e0.Uri.AbsolutePath.Contains("AsyncMessageList"))
                {
                    List<string> DetailsList = new List<string>();
                    DetailsList.AddRange(ExtractAllAHrefTags(doc));

                    foreach (string href in DetailsList)
                    {
                        domainQueue.Enqueue(href);
                    }
                    navigateQueue();
                }

                if (e0.Uri.AbsolutePath.Contains("Details"))
                {
                    resultsTB.Text += ParseEntries(doc);
                    navigateQueue();
                }

            }
        };

        navigateQueue();
    }

    private string ParseEntries(dynamic inputDoc)
    {
        HtmlAgilityPack.HtmlDocument docHAP = new HtmlAgilityPack.HtmlDocument();
        docHAP.LoadHtml(inputDoc.Body.InnerHtml.ToString());

        string csv = "";

        foreach (HtmlNode emNode in docHAP.DocumentNode.SelectNodes("//em"))
        {
            if (emNode.Attributes["class"] == null)
            {
                csv += "\"" + emNode.InnerText.ToString() + "\",";
            }
        }
        csv = csv.Remove(csv.Length - 1, 1) + "\"" + Environment.NewLine;
        return csv;
    }

    private List<string> ExtractAllAHrefTags(dynamic inputDoc)
    {
        HtmlAgilityPack.HtmlDocument docHAP = new HtmlAgilityPack.HtmlDocument();
        docHAP.LoadHtml(inputDoc.Body.InnerHtml.ToString());

        List<string> hrefTags = new List<string>();
        try
        {
            foreach (HtmlNode link in docHAP.DocumentNode.SelectNodes("//a[@href]"))
            {
                HtmlAttribute att = link.Attributes["href"];
                hrefTags.Add("https://" + this.wbControl.Source.Host.ToString() + System.Web.HttpUtility.HtmlDecode(att.Value));
            }
        }
        catch
        {
        }

        return hrefTags;
    }

    private List<string> Domains
    {
        get
        {
            List<string> currentDomains = new List<string>();
            currentDomains.Add("example.com");
            currentDomains.Add("sub.example.com");
            currentDomains.Add("it.example.com");
            return currentDomains;
        }
    }
}
} 
```

# java - Java GAE UrlFetch 是否支持 HTTP PUT？

> ID：13165438
> 
> 赞同：1
> 
> 时间：2012-10-31T18:35:02.713
> 
> 标签：java, google-app-engine, http-post, urlfetch, http-put

如何使用 UrlFetch 服务为 Google App Engine 的 Java 运行时执行 HTTP PUT 请求？

我的应用程序中的以下代码将发送一个 POST 请求：

```
URL url = ...;
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setReadTimeout(MAX_TIMEOUT); // Maximum allowable timeout on GAE of 60 seconds
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setRequestProperty("Content-Type", "application/json; charset=utf-8");
OutputStreamWriter writer = null;
try {
    writer = new OutputStreamWriter(conn.getOutputStream(), Charset.forName("utf-8"));
    writer.write(jsonContent);
} finally {
    if (writer != null)
        writer.close();
    }
}
InputStream inStream = null;
E response = null;   // Unmarshalled using Jackson
try {
    inStream = conn.getInputStream();
    if (status != 204) { // NO CONTENT => No need to use Jackson to deserialize!
        response = mapper.readValue(inStream, typeRef);
    }
} finally {
    if (inStream != null) {
        inStream.close();
    }
} 
```

`POST`我尝试执行与for相同的操作`PUT`，但我不断收到 Method Not Allowed 的*405* HTTP 错误。谢谢您的帮助。

**参考：** [https ://developers.google.com/appengine/docs/java/urlfetch/overview](https://developers.google.com/appengine/docs/java/urlfetch/overview)

不幸的是，GAE Java 的文档不如 Python 版本的 GAE URL fetch ( [https://developers.google.com/appengine/docs/python/urlfetch/overview](https://developers.google.com/appengine/docs/python/urlfetch/overview) )。谷歌的任何人都想说为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:49:34.817

我认为你的代码有效。您看到的`HTTP 405`来自您正在联系的服务器（并非所有服务支持`PUT`）。`curl`如果您想确认不是您的代码有问题，可以尝试使用来点击 URL：

```
curl -X PUT -d "foo=bar" http://your_site.com/path/to/your/resource 
```

# vb.net - Object reference not set to an instance of an object in Visual Studio 2010

> ID：13165441
> 
> 赞同：0
> 
> 时间：2012-10-31T18:35:32.217
> 
> 标签：vb.net, winforms, .net-4.0

I am trying to make a program that takes a text from a file and writes it into a label in visual studios 10\. I want to be able to click buttons on the exe to make it go from the previous line to the next line and vise versa. I am storing the text into an array and then making the label equal the text on the given part of the array. I am receiving the error "Object reference not set to an instance of an object." Can anyone help ? thanks. here is part of my code my code:

```
 Private Sub BrowseButton_Click(sender As System.Object, e As System.EventArgs) Handles BrowseButton.Click

            Dim UserInput As DialogResult = Browser.ShowDialog()

            If UserInput = Windows.Forms.DialogResult.Cancel Then
                Return
            End If

            FileOpen(1, Browser.FileName, OpenMode.Input)
            Do While Not EOF(1)
                Input(1, InternalTextFile(Index))
                Index += 1
            Loop
            FileClose(1)
            Output1Text.Text = InternalTextFile(Index)
            Output2Text.Text = InternalTextFile(Index + 1)

    End Sub 
```

The error arises On the line `Input(1, InternalTextFile(Index))`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:19:42.257

看起来你可能想要这样的东西：

```
Private Sub BrowseButton_Click(sender As System.Object, e As System.EventArgs) Handles BrowseButton.Click
    If Browser.ShowDialog() = Windows.Forms.DialogResult.Cancel Then Exit Sub

    Dim InternalTextFile() As String = File.ReadAllLines(Browser.FileName)
    Output1Text.Text = InternalTextFile(InternalTextFile.Length - 2)
    Output2Text.Text = InternalTextFile(InternalTextFile.Length - 1)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:06:51.343

没有看到更多代码很难说，但如果错误是 on `Input(1, InternalTextFile(Index))`，则很可能该变量`InternalTextFile`从未被赋值。可能是这样的？

```
Dim InternalTextFile As New List(of String)
Dim reader As StreamReader = New StreamReader(Browser.FileName)
Try
    Do 
        InternalTextFile.Add(reader.ReadLine)
    Loop Until reader.Peek = -1
Finally
    reader.Close()
End Try 
```

# asp.net - 在 Page_Load 中添加带有 css 和事件处理程序的按钮

> ID：13165445
> 
> 赞同：0
> 
> 时间：2012-10-31T18:35:53.747
> 
> 标签：asp.net, event-handling, asp.net-placeholder

我试图将按钮添加到占位符，每个按钮都有一个事件处理程序到相同的方法。

```
 if (!this.IsPostBack)
        {

                foreach (Entry ent in results)
                {
                    HtmlButton btn = new HtmlButton();
                    btn.ServerClick += new EventHandler(resultSelected);
                    btn.InnerText = ent.name;
                    btn.ID = ent.ID.ToString();
                    PlaceHolder1.Controls.Add(btn);
                }
       } 
```

1）按钮被添加到页面但是当它被点击时方法（resultSelected）没有被调用，只有Page_Load再次被调用。当它进入 Page_Load 时， PlaceHolder 是空的（按钮不显示在页面上）。我该如何完成我试图做的事情？

2) 如何将 CSS 类分配给以这种方式创建的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:02:08.353

当您第一次开始使用 ASP.NET 时，这是很常见的问题 - 在服务器端添加动态控件。

1.  首先，您必须在每个页面请求上添加这些控件并分配事件处理程序 - 在每个回发时也是如此。为了正确处理和恢复 ViewState，您必须为它们分配相同的 ID 并应用相同的层次结构。
2.  控件需要在页面加载事件之前添加 - 最方便的是在覆盖方法中添加它们，该方法在before方法`CreateChildControls()`中触发。`Postback``OnLoad`
3.  事件在 OnLoaded 方法之后触发，因此如果您将在例如`OnPreRender`/`Render`方法中创建任何控件 - 任何事件都不会被触发。

这是最直接的方法，在我的描述中跳过了一些细节。有关更多详细信息，请阅读有关 ASP.NET 应用程序生命周期的信息。

至于问题的第二部分，您可以使用[Style Property](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.style.aspx)的显式样式设置，也可以使用[Attributes Property](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.attributes.aspx)添加类属性，但现在我猜，因为我认为 HtmlButton 没有`CssClass`属性.

# java - Failed to load applicationContext - cannot find applicaitonContext-test

> ID：13165446
> 
> 赞同：0
> 
> 时间：2012-10-31T18:35:58.313
> 
> 标签：java, spring

I'm trying to run integration tests but my project keeps failing to load my application context. Here's the error trace:

`java.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308) at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109) at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.weaving.AspectJWeavingEnabler#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079) at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:643) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407) at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84) at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1) at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280) at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304) ... 24 more Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) at org.springframework.context.weaving.LoadTimeWeaverAwareProcessor.postProcessBeforeInitialization(LoadTimeWeaverAwareProcessor.java:95) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) ... 36 more Caused by: java.lang.IllegalStateException: ClassLoader [sun.misc.Launcher$AppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar at org.springframework.context.weaving.DefaultContextLoadTimeWeaver.setBeanClassLoader(DefaultContextLoadTimeWeaver.java:83) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1436) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1408) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) ... 45 more`

 `ClassLoader does not provide an 'addTransformer(ClassFileTransformer)' method? What are you talking about, Java?`

# android - 未使用正确的 SDK 找到 Holo 主题

> ID：13165448
> 
> 赞同：1
> 
> 时间：2012-10-31T18:36:09.343
> 
> 标签：android, intellij-idea, android-theme

使用 SDK 4.1.2 编译 Android 项目时收到以下错误：

`/res/values-v14/styles.xml:3: error: Error retrieving parent for item: No resource found that matches the given name '@android:Theme.Holo.Light'.`

values-v14 资源目录是唯一引用这个主题的地方。

我的清单中的 uses-sdk 是`<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="16"/>`，项目 SDK 设置为使用带有 Google API 的 Android 4.1.2 构建。

谁能给我一些关于可能发生的事情的想法？

我正在使用最新版本的 Intellij IDEA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:14:17.823

由于这是一个从 Eclipse 导入的项目，我不得不返回并在 Eclipse 中将构建的 SDK 更改为 4.1.2，然后 IDEA 决定玩得很好。

# python - Control precision/printing of exponential numbers

> ID：13165453
> 
> 赞同：1
> 
> 时间：2012-10-31T18:36:25.280
> 
> 标签：python

What is the best way to control printing of 64-bit floating point numbers in Python?

I can use the `%e` specifier to easily show all numbers in exponential format. However, I only want to use exponential format if the number has more than x amount of digits in it. For example, below is the raw 64-bit floating point number and what I would like it to look like as a string:

```
value       what's printed

1.123456    1.123456
123456.1234 12345.6e4
1.0         1.0
.1234567    1.23456e-1 
```

Above I only want to see 7 digits total and then convert to exponential notation if there are more needed.

Does this make any sense? Essentially I would like to be able to use exponential notation only when some threshold for the number is reached. I know `%e` allows specifiers like `%.3e` but this will always use exponential notation regardless of the number size.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:44:39.430

您可能可以用`'%g'`-- 来做一些事情，这将使用 or 的较短`%f`者`%e`：

```
>>> '%.4g'%(1154.2)
'1154'
>>> '%.4g'%(11545.2)
'1.155e+04'
>>> '%.4g'%(1.15452)
'1.155'
>>> '%.4g'%(0.000005321)
'5.321e-06' 
```

换句话说，这将打印出一个具有 4 位有效数字的数字，并在必要时使用科学计数法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:52:55.557

我想我可以做类似的事情：

```
>>> def pretty_float(val):
...   if len(repr(val)) > 7:
...     return '%e' % val
...   else:
...     return repr(val)
... 
```

# jquery - Phonegap file storage of local files

> ID：13165454
> 
> 赞同：3
> 
> 时间：2012-10-31T18:36:27.183
> 
> 标签：jquery, cordova

Is it possible to store the Jquery-1.7.2.mins.js with in side the build? This way the app does not have to download the file every time the application is launched and reducing the time it takes for the app to complete it's launch

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:53:26.883

是的当然。只需将其包含在 www 目录中，并有相对的 html 链接即可。

# jquery - 最后点击的元素

> ID：13165458
> 
> 赞同：1
> 
> 时间：2012-10-31T18:36:54.763
> 
> 标签：jquery

我有一个这样的 div 列表：

```
<div class="item">Click</div>
<div class="content">Hidden Content</div>
<div class="item">Click</div>
<div class="content">Hidden Content</div>
<div class="item">Click</div>
<div class="content">Hidden Content</div>
<div class="item">Click</div>
<div class="content">Hidden Content</div>
<div class="item">Click</div>
<div class="content">Hidden Content</div> 
```

加载页面时，将显示具有 id 内容的第一个 div。我想做的是当我单击其他一些 div (id="item") 以隐藏前一个单击项目的内容并对前一个单击的 div (id="item") 进行一些更改时。到目前为止，我已经尝试过：

```
$(document).ready(function(){
        $(".item").first().css("border-right","none");
        $(".item").click(function(e) {
        $pressed = $(this);
             if ($pressed.data("lastclick")){
                    $pressed.data("lastclick").css("border-right","solid");
                    $pressed.data("lastclick").css("border-right-width","1px");
                    $pressed.data("lastclick").find("span").remove();
             } 
    $(this).next(".content").slideToggle(\'slow\', function() {
                 if ( $(this).is(":visible")) {
                      $pressed.css("border-right","none");
                      $pressed.append(\'<span style="float:right;font-weight:bold">\'+$(this).children().length+\'</span>\');
                      $pressed.data("lastclick",$pressed);    
            }
            });});}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T18:49:32.517

将最后点击的项目存储在一个简单的 JavaScript 变量中

```
var lastClicked;
$(".item").click(function(e) {
    $(this). // Do your stuff to the clicked element here

    // Then do what you will to the last-clicked element
    // ...

    // And finally assign the clicked element to the lastClicked variable
    lastClicked = clicked;
} 
```

**一些有用的提示：**

*   正如评论中提到的，. 是一个类选择器，# 是一个 ID 选择器。您在示例中尝试使用类选择器按 ID 选择元素。

*   在我拥有的地方，`$(this)`您可以链接运营商。也就是说，您可以将 CSS 运算符与其余运算符链接起来，并使用一条链接的命令行，而不是重复选择器（这是一种性能浪费）。

*   您可以使用带有 .css() 命令的“映射”来一次应用多个样式，如下所示：

.css({border-right: 'solid', border-right-width: '1px'})

...但是在您的情况下，您只是在修改边框，您可以（并且应该）简单地这样做：

```
border-right: 1px solid black; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:47:12.717

您可以通过执行与此类似的操作来简化您的代码。

**[JSFIDDLE](http://jsfiddle.net/aP8dB/)**

```
$('.item').click(function(){
  $('.content').slideUp();
  $(this).next('.content').slideDown()        
})​ 
```

# objective-c - NSNotification or Delegate to register for when the visible view changes

> ID：13165459
> 
> 赞同：6
> 
> 时间：2012-10-31T18:36:58.473
> 
> 标签：objective-c, ios, uinavigationcontroller, uitabbarcontroller

I'm developing a project in objective-c for ios, and I have a view with multiple tabs using a subclass of UITabBarController. Each tab has it's own UINavigationController. When a view loads on a tab, the appropriate activation events fire (viewWillAppear, viewDidLoad, etc.). However, once you tap on a different tab, and tap back, not all these events will fire again since the view is already the visible view for that specific tab (viewDidLoad for example).

My question is this: is there a notification or delegate that I can simply register for and get notified when the visible view in the window changes? I've done some research and I didn't find anything specific for this. What I plan on doing is:

1.  Check the visible view when the tab bar index changes: tabBarController:didSelectViewController
2.  Register for this event on each navigation controller: navigationController:didShowViewController:animated:

By doing this, I should be notified whenever the visibleViewController changes by either changing the tab, or navigating within the tab's navigation flow (except for modals, in this case, I don't care about them. They are handled already).

Is this the right approach?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:08:40.500

你看过 UITabBarControllerDelegate 吗？这种方法听起来你正在寻找什么：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

从文档中：

```
In iOS v3.0 and later, the tab bar controller calls this method regardless 
of whether the selected view controller changed. In addition, it is called only
in response to user taps in the tab bar and is not called when your code 
changes the tab bar contents programmatically. 
```

这是链接：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:33:24.640

首先实现UITabBarController委托方法“tabBarController:didSelectViewController”并在app委托中注册。您不能在每个导航控制器中注册它。只有一个对象可以是委托。在该方法中，将其类型转换为 UINavigationController。

然后通过在 UINavigationController 上调用“topViewController”来获取 UIViewController。然后直接调用viewWillAppear:方法就可以了。

# ruby-on-rails - 将 Rails 存储库中的文件同步到 S3

> ID：13165460
> 
> 赞同：0
> 
> 时间：2012-10-31T18:37:03.057
> 
> 标签：ruby-on-rails, git, amazon-s3, rake

我正在考虑实现一个 rake 任务，它将我的存储库中的某些文件同步到 S3。问题是我只想在我的仓库中更改文件时更新文件。因此，如果文件 A 被修改而 B 保持不变，则在我的下一次应用程序部署期间，只有文件 A 将同步到 S3。

确定文件已被修改的可靠方法是什么？我正在考虑使用`git`来确定文件是否已在本地更改......还有其他方法可以做到这一点吗？S3 是否提供与此类似的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:04:19.383

S3 目前不支持条件`PUT`s，这将是理想的解决方案，但您可以通过两个请求来获得此行为。您的同步操作如下所示：

*   对于您想要在 S3 上的每个文件：
    *   计算本地文件的MD5。
    *   发出`HEAD`对该 S3 对象的请求。
    *   如果对象不同或对象不存在，则发出`PUT`请求。`Content-MD5`

也就是说，这听起来很像您对资产所做的事情，在这种情况下，您将重新发明轮子。Rails 3 资产管道很好地解决了这个问题——特别是，对资产进行指纹识别并将哈希放入 URL 允许您为它们提供非常长的`max-age`值，因为它们是不可变的——并且[`asset_sync`gem](https://github.com/rumblelabs/asset_sync)已经可以自动将您的资产放在 S3 上.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:48:22.760

删除的文件怎么办？最简单的方法是用最新的来爆破整个目录。

# python - Is it possible to use searchsorted with a MultiIndex index in Pandas?

> ID：13165461
> 
> 赞同：2
> 
> 时间：2012-10-31T18:37:10.640
> 
> 标签：python, indexing, pandas, fuzzy-search

I have a DataFrame that has a MultiIndex index. It can be regenerated as follows:

```
import pandas as pd
import numpy as np
from numpy.random import randn as randn
from numpy.random import randint as randint
from datetime import datetime
# setup data
obs1 = [ob if ob > 0 else ob *-1 for ob in randn(10)*100]
obs2 = [randint(1000) for i in range(10)]
labels = ['A12', 'B12', 'A12', 'A12', 'A12','B12', 'A12','B12', 'A13', 'B13']
dates = [datetime(2012, 11, i) for i in range(1,11)]
dates[0] = dates[1]
dates[5] = dates[6]
# setup index and dataframe
m_idx = pd.MultiIndex.from_tuples(zip(dates, labels), names=['date', 'label'])
data_dict = {'observation1':obs1, 'observation2':obs2}
df = pd.DataFrame(data_dict, index=m_idx) 
```

OUTPUT:

```
In [17]: df
Out[17]: 
                  observation1  observation2
date       label                            
2012-11-02 A12       79.373668           224
           B12      130.841316           477
2012-11-03 A12       45.312814           835
2012-11-04 A12      163.776946           623
2012-11-05 A12      115.449437           722
2012-11-07 B12       38.537737           842
           A12       84.807516           396
2012-11-08 B12       35.186265           707
2012-11-09 A13       60.171620           336
2012-11-10 B13      123.750614           540 
```

Dates of Interest:

```
dates_of_interest = [datetime(2012,11,1), datetime(2012,11,6)] 
```

I am interested in creating a dataframe with a subset of the following criteria:

*   date is nearest to one of the dates of interest
*   label has 'A' in the string

So the result of my subindex would look like the following:

```
 observation1  observation2
date       label                            
2012-11-02 A12       79.373668           224
2012-11-07 A12       84.807516           396 
```

Ideally, I would be able to get data for all observations "near" the criteria, so that the return dataset might look like:

```
 observation1  observation2
date       label                            
2012-11-02 A12       79.373668           224
2012-11-05 A12      115.449437           722
2012-11-07 A12       84.807516           396 
```

But for a start I would just be happy to get the first result. I suspect that I need to use searchsort and asof, but I am not quite sure how to do that with. A MultiIndex.

Does anyone know how to get there from here?

Regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:16:04.943

使用`Series.asof`是一种自然的方式，但我看到了一些缺点：

*   您正在寻找一个*接近*的时间戳，其中`asof`搜索*最新*的时间戳。在您的示例中，如果您搜索`datetime(2012, 11, 1)`（早于 中的任何条目`df`），**您将获得一个`NaN`value**。
*   它仅适用于时间序列，因此您必须应用`reset_index`到您的`DataFrame` 然后选择一些任意列作为时间序列。换句话说，它使你的代码有点尴尬和复杂。

这是解决您的第一项任务的更强大的替代方案，您可以使用以下方法在时间戳索引中搜索近似命中[`numpy.searchsorted`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html)：

```
import numpy as np

# it is important that df is sorted by date
df.sort_index(inplace=True)

dates_ix = df.index.levels[0]
nearest_date = lambda date: dates_ix[np.searchsorted(dates_ix, date)]
approx_dates = map(nearest_date, dates_of_interest)
# select the desired entries in the index
df.select(lambda (date, label): (date in approx_dates and 
                                 label.find('A')!=-1)) 
```

# vb.net - 返回 SAFEARRAY(Long) 导致 SafeArrayTypeMismatchException 的 COM 对象

> ID：13165475
> 
> 赞同：1
> 
> 时间：2012-10-31T18:38:36.183
> 
> 标签：vb.net, com, safearray

我使用他们提供的 API 类型库为我们在工作中使用的程序编写插件。它是一个名为 SCAPI 的 COM 对象。COM 对象是为 VB6 编写的，因此当我为 .NET 添加它的引用时，会创建它的互操作版本。

当我使用以下代码时，它应该根据文档返回一个 SAFEARRAY(Long)，我收到一条错误消息，说我有一个 SafeArrayTypeMismatchException。

```
 Dim oBag As SCAPI.PropertyBag = tempModel.PropertyBag
 Dim x = oBag.Value("Created") 
```

该错误是从 SCAPI.PropertyBagClass.get_Value(Object Property) 函数引发的，该函数是 COM 对象的一部分，而不是我写的东西。经过我所做的所有研究，我似乎无法弄清楚我需要做什么才能使其正常工作。我使用 tlbimp.exe 来获取方法信息，但它似乎不包含任何 [out] 标签，即使我使用了相同的函数 oBag.Value("Name")，它返回一个字符串值并且不会抛出错误：

```
 .method public hidebysig newslot specialname abstract virtual 
         instance object 
         marshal( struct) 
         get_Value([in] object  marshal( struct) Property) runtime managed internalcall
 {
 .custom instance void [mscorlib]System.Runtime.InteropServices.DispIdAttribute::.ctor(int32) = ( 01 00 01 00 02 60 00 00 )                         // .....`..
 } // end of method ISCPropertyBag::get_Value 
```

# r - 特定事件之间的时间计算

> ID：13165478
> 
> 赞同：2
> 
> 时间：2012-10-31T18:38:53.467
> 
> 标签：r, date, time

这是我的数据的一个子集：

```
Fr         Sig  Code NumDet    Date.Time          Aerial
62  150102 102   15    195 2012-09-14 18:28:00      1
63  150102 102   15    189 2012-09-14 18:32:00      1
64  150102 106   15    213 2012-09-14 18:36:00      1
65  150102 102   15    152 2012-09-14 18:40:00      1
66  150102 105   15    190 2012-09-14 18:46:00      1
67  150102  97   15      4 2012-09-14 18:51:00      2 
```

我正在尝试计算 Aerial 1 上的第一次检测和 Aerial 2 上的第一次检测之间的时间。因此在这个数据集中它将是 23 分钟

我已经尝试过变体，`difftime`但似乎无法根据航空编号选择特定时间。

我试过了：

```
a <- difftime(table$Date.Time[2:length(table$Aerial == "1")], 
              table$Date.Time[2:length(table$Aerial == "2")]) 
```

但它甚至不接近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:06:31.780

该命令使用`difftime`

```
difftime(table$Date.Time[table$Aerial == "2"][1],
         table$Date.Time[table$Aerial == "1"][1]) 
```

将返回

```
Time difference of 23 mins 
```

# python - 如何反序列化python打印的字典？

> ID：13165479
> 
> 赞同：2
> 
> 时间：2012-10-31T18:38:55.973
> 
> 标签：python, dictionary, deserialization

我在数据库中有 python 的 str 字典表示形式为 varchars，我想检索原始的 python 字典

如何根据字典的 str 表示再次拥有字典？

## 例子

```
>>> dic = {u'key-a':u'val-a', "key-b":"val-b"}
>>> dicstr = str(dic)
>>> dicstr
"{'key-b': 'val-b', u'key-a': u'val-a'}" 
```

在示例中，会将 dicstr 转回可用的 python 字典。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T18:40:30.327

`ast.literal_eval()`在这种情况下使用and 优先`repr()`于`str()`，因为`str()`不能保证字符串可以转换回有用的对象。

```
In [7]: import ast

In [10]: dic = {u'key-a':u'val-a', "key-b":"val-b"}

In [11]: strs = repr(dic)

In [12]: strs
Out[12]: "{'key-b': 'val-b', u'key-a': u'val-a'}"

In [13]: ast.literal_eval(strs)
Out[13]: {u'key-a': u'val-a', 'key-b': 'val-b'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:41:31.123

您可以使用`eval()`或`ast.literal_eval()`。大多数`repr()`字符串可以被评估回原始对象：

```
>>> import ast
>>> ast.literal_eval("{'key-b': 'val-b', u'key-a': u'val-a'}")
{'key-b': 'val-b', u'key-a': u'val-a'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T19:05:54.123

`ast.literal_eval`可能是简单的 dicts 的方法，但是您可能应该重新考虑您的设计，而不是首先将此类文本保存在数据库中。例如

```
import collections
d = {'a':1, 'b': collections.defaultdict()}

import ast
print ast.literal_eval(repr(d)) 
```

如果它包含任何非基本类型，这将不起作用并且`ValueError('malformed string')`基本上你不会被转换回 dict。

**更好的方法**是使用 pickle 或 json 或类似的东西来转储 dict

```
import collections
d = {'a':1, 'b': collections.defaultdict()}

import json
print json.loads(json.dumps(d)) 
```

**总结**：使用序列化`repr`，使用反`ast.literal_eval`序列化是不好的，使用序列化`json.dumps`和反序列化使用`json.loads`是好的

# django - Django Endless Pagination - 显示当前结果数（不是页面）

> ID：13165486
> 
> 赞同：1
> 
> 时间：2012-10-31T18:39:22.393
> 
> 标签：django, django-endless-pagination

我正在使用 django 的无休止的分页搜索结果，我想在顶部创建一条消息，简单地说明，例如：

`showing 20 results of 124`

甚至更好：

`showing results 20 to 40 of 124`

[在无尽的分页文档](http://django-endless-pagination.readthedocs.org/en/latest/templatetags_reference.html#paginate)中，我看不到任何获取当前结果数量的方法。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T13:24:43.233

人们倾向于把这个复杂化。我发现你的 current_start_index 和 current_end_index 函数在源代码中有很好的记录（但在实际文档中没有）。

以下是您将如何使用它们来实现这一目标。

{{ pages.current_start_index }} 到 {{ pages.current_end_index }} {{ pages.total_count }} 个结果

希望这可以帮助某人：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T15:24:28.857

解决方案：

使用**分页**模板标签后，调用 {% get_pages %} 并将总结果设置为如下变量：

```
{% paginate items %}
{% get_pages %}
{% with total=pages.total_count %}

<div>Total results: {{ total }}</div>

{% for item in items %}
 ...
{% endfor %}

{% endwith %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T18:00:08.597

I have wrote my own custom tag for that matter by using the existing tag:

```
from endless_pagination import (
    settings,
    utils,
)

@register.inclusion_tag("endless_pagination/show_more.html", takes_context=True)
def show_more_with_counts(context, per_page_count, total_count, first_page_count=0,
    verb='enteries', loading=settings.LOADING, show_total_in_end=True):
    # This template tag could raise a PaginationError: you have to call
    # *paginate* or *lazy_paginate* before including the showmore template.
    data = utils.get_data_from_context(context)
    page = data['page']
    # show the template only if there is a next page
    if page.has_next():
        request = context['request']
        page_number = page.next_page_number()
        # Generate the querystring.
        querystring_key = data['querystring_key']
        querystring = utils.get_querystring_for_page(
            request, page_number, querystring_key,
            default_number=data['default_number'])
        curr_page_num = int(request.GET.get(querystring_key, 1))
        if curr_page_num == 1:
            if first_page_count:
                start = first_page_count + 1
            else:
                start = per_page_count + 1
        else:
            if first_page_count:
                start = (curr_page_num * per_page_count) - first_page_count
            else:
                start = (curr_page_num * per_page_count) + 1
        end = (per_page_count + start) - 1
        if end > total_count:
            end = total_count
        label = 'Load %(start)s to %(end)s of %(total)s %(verb)s' % {
            'start': start, 'end': end, 'total': total_count, 'verb': verb}
        return {
            'label': label,
            'loading': loading,
            'path': data['override_path'] or request.path,
            'querystring': querystring,
            'querystring_key': querystring_key,
            'request': request,
            'show_total_in_end': show_total_in_end,
        }
    else:
        if total_count > 0:
            return {
                'label': 'Showing %(start)s of %(end)s %(verb)s' % \
                    {'start': total_count, 'end': total_count, 'verb': verb},
                'show_total_in_end': show_total_in_end,
            }
        else:
            return {} 
```

Also I have following `show_more.html` template:

```
{% load i18n %}
{% if querystring %}
    <div class="endless_container">
        <a class="endless_more" href="{{ path }}{{ querystring }}"
            rel="{{ querystring_key }}" style="font-size: 11px; color: #c13923;">{{ label }}</a>
        <div class="endless_loading" style="display: none;">{{ loading|safe }}</div>
    </div>
{% elif show_total_in_end %}
    <a href="#" style="text-decoration: none; color: #999; cursor:default; font-size: 11px;" onclick='return false;'>{{ label }}</a>
{% endif %} 
```

How to use:

```
{% show_more_with_counts 10 qs_count verb='users' %}
# it will say `Load 1 to 10 of 100 users` for first page
# it will say `Load 11 to 20 of 100 users` for 2nd page, and so on 
```

You have to pass `per_page_count`, total number of objects in a queryset or list `total_count`, and the `verb` to use.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:17:07.890

我会这样做：

计算数据库中的条目总数并传递给模板`124`。然后使用分页限制来限制每页的总条目数。数一数，随心所欲地展示。

# c# - 关于更新可序列化类的奇怪 WCF 错误

> ID：13165489
> 
> 赞同：1
> 
> 时间：2012-10-31T18:39:44.373
> 
> 标签：c#, .net, wcf

这是设置，我有一个集合类`MyAssembly`，看起来像这样：

```
[Serializable()]
public class MyCollection : List<MyItem> //MyItem is also serializable
{
    public string MyProperty{ get; set; }

    //some methods for use by the current assembly
} 
```

我有一个应用程序引用了 wcf 服务，而该服务又引用了 this `MyAssembly`。

**问题：**过去我们对类进行了许多更改而没有任何问题，但是我最近添加了几个新方法（没有新属性）到`MyCollection`重新编译和重新部署 wcf 服务之后，使用该服务的应用程序将全部`MyCollection`在被调用时突然返回 null 。

**解决方案和问题：**更新应用程序中的服务引用使一切恢复正常，但我的问题是为什么？我的理解是，除非更改或删除某些内容，否则无需更新参考即可将新项目添加到您的课程中。有人可以解释一下或在某处推荐我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:47:07.727

当您添加对 wcf 服务的引用时，服务对象的副本（不是实际的真实副本，更像是代理对象）被放置在客户端。因此，当您更新 wcf 服务对象时，客户端仍然只剩下旧的（无效的）副本。在 wcf 服务器 ServiceContract 或 DataContract 上进行更改时，您应该始终在客户端更新引用。

# devise - 设计定制

> ID：13165491
> 
> 赞同：0
> 
> 时间：2012-10-31T18:39:54.227
> 
> 标签：devise, ruby-on-rails-3.2, administration

我想为管理员用户配置设计 gem。在我的应用程序中，我安装了设计 gem，目前它被用作在我的应用程序中拥有帐户的普通用户。我想在我的应用程序中添加管理，以便管理员用户可以删除或修改对特定用户帐户的等操作，还可以执行其他管理工作，例如删除不适合公共用户的用户数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:47:09.553

我会研究两个宝石：[RailsAdmin](https://github.com/sferik/rails_admin)和[CanCan](https://github.com/ryanb/cancan)。

# javascript - 使用 JQuery/Javascript 计算动态 HTML 值

> ID：13165492
> 
> 赞同：0
> 
> 时间：2012-10-31T18:39:55.777
> 
> 标签：javascript, jquery, html

我想创建一个表，其中动态值根据用户选择的值显示在列中。下面是我的代码。所以基本上，根据选择的成人人数和儿童人数，将计算价格。因此，如果有人选择 1 位成人和 0 位儿童，则 2 日票的金额应为 235 美元，3 日票的金额应为 301 美元，依此类推。我希望在选择框的选择更改方法上完成此操作。我对 JQuery 也不是很熟悉。我如何使用 JQuery 来完成这个？

```
Ages 10+:

<select id="Adult" name="Adult">
<option selected="selected" value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
</select>

Ages 3-9:

<select id="Child" name="Child">
<option selected="selected" value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
</select>

<table width="800" border="1" align="center">
  <tr>
    <td width="224">Product</td>
    <td width="246">Ages 10+</td>
    <td width="192">Ages 3-9</td>
    <td width="110">Price</td>
  </tr>
  <tr>
    <td>2 Day Ticket</td>
    <td>$235.00</td>
    <td>$223.00</td>
    <td>$<span class="amount"></span> </td>
  </tr>
  <tr>
    <td>3 Day Ticket</td>
    <td>$301.00</td>
    <td>$285.00</td>
    <td>$<span class="amount"></span></td>
  </tr>
  <tr>
    <td>4 Day Ticket</td>
    <td>$315.00</td>
    <td>$298.00</td>
    <td>$<span class="amount"></span></td>
  </tr>
  <tr>
    <td>5 Day Ticket</td>
    <td>$328.00</td>
    <td>$309.00</td>
    <td>$<span class="amount"></span></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:45:35.753

这是完成您要执行的操作的完整代码。我在总数中添加了一些 id。有关工作示例，请参见[小提琴。](http://jsfiddle.net/4Jegn/1/)最好不要对这些值进行硬编码，但这可以作为一个起点。

```
var numAdult = 0;
var numChild = 0;

$("#Adult").change( function(){
    numAdult = $("#Adult").val();
    calcTotals();
});
$("#Child").change( function() {
    numChild = $("#Child").val();
    calcTotals();
});

function calcTotals(){
    $("#2DayTotal").text(235*numAdult + 223*numChild);
    $("#3DayTotal").text(301*numAdult + 285*numChild);
    $("#4DayTotal").text(315*numAdult + 298*numChild);
    $("#5DayTotal").text(328*numAdult + 309*numChild);
} 
```

# scala - 如何保存 TypeTag 然后稍后使用它将类型重新附加到 Any (Scala 2.10)

> ID：13165493
> 
> 赞同：5
> 
> 时间：2012-10-31T18:40:02.840
> 
> 标签：scala, scala-2.10

我正在尝试制作自定义异构列表和地图。尽管有使用 Manifest 的示例，但在 Scala 2.10 中它们已被弃用，我应该使用 TypeTags（或 Classtags）。在地图的情况下，我似乎可以使用（例如）元组 String->(TypeTag[ _ <: Any ], Any ) 保留 Any 与 Type 的绑定。

我的问题是如何从恢复的 TypeTag 和未定义的 T 中获取能够返回 TypeTag.tpe 的实例 - 在我拥有的代码中 `//** How do I use saved typeTag to define T here?**`

正如所写，get 方法中没有编译器错误，但 T 设置为 Nothing 并返回 Some(Nothing)。我希望我的注释行起作用： `case Some( x ) => // println( "Get 2*'pi'=" + x*2 )`在有编译器消息的地方，“值 * 不是 Nothing 的成员”。我意识到我可以写得更紧凑，但完成后，我可以将鼠标悬停在我的 IDE 中并一步一步地跟随。有一个相关的问题 - [Scala：什么是 TypeTag 以及如何使用它？](https://stackoverflow.com/questions/12218641/scala-2-10-what-is-a-typetag-and-how-do-i-use-it) 但它似乎并没有走到“最后一英里” - 重新标记任何。

这个怎么做？

这是我到目前为止的代码：

 `````
import scala.reflect._
import scala.reflect.runtime.universe._
import collection.mutable.Map

object Test extends HMap {

  def main( args: Array[ String ] ) {

    var hmap = new HMap
    hmap( "anInt" ) = 1
    hmap( "pi" ) = 3.1416f
    hmap( "c" ) = "hello"
    // Test
    val result = hmap.get( "pi" )
    result match {
      case Some( x ) =>
        println( "Get 'pi'=" + x*2 )
      case _ =>
    }
  }
}

class HMap {
  private var coreMap = 
    Map.empty[ String, ( TypeTag[ _ <: Any ], Any ) ]

  // Save the type tag with the value
  def update[ T: TypeTag ]( key: String, value: T ) = 
    coreMap.put( key, ( typeTag[ T ], value ) )

  override def toString = coreMap.toString

  def get[ T: TypeTag ]( key: String ): Option[ T ] = {
    val option = coreMap.get( key )
    val result = option match {
      case None => None
      case Some( x ) => {
        val typeTag = x._1; val value = x._2
        println( "Matched Type = " + 
            typeTag.tpe + "   Value=" + value )
        // **** How do I use saved typeTag to define T here? ****
        val v = value.asInstanceOf[ T ]
        val s = Some( v )
        println( "Returning " + s )
        s
      }
    }
    result
  }
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:48:15.760

T 是在调用 get 方法时定义的，不能在函数内部将其更改为另一种类型。编译器需要信息来获取 T 的类型信息，或者您必须明确提供它：

```
def get[T](key: String) = m.get(key).map(_.asInstanceOf[T])
get[Int]("anInt") 
```

如果键入了一个键，则可以推断出 T：

```
class Key[T](name: String)
def get[T](key: Key[T]) = ...
get(Key[Int]("anInt")) 
```

要在从地图获取时检查类型是否正确，您可以执行最初的操作，保存类型和值：

```
val m = Map.empty[String, (Type, Any)]

def put[T: TypeTag](key: String, value: T) = m.put(key, (typeOf[T], value))

def get[T: TypeTag](key: String) = m.get(key) match {
    case Some((t, v)) if t =:= typeOf[T] => Some(v.asInstanceOf[T])
    case _ => None
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:51:57.190

这是我自己的答案：

我不需要 TypeTags，也不需要键控类型或元组。只是简单的泛型似乎可以。我不需要一个匹配和案例类来枚举 Any 的可能值。只是一个简单的名称-值对映射。然后我使用它访问它

`hmap.get Float .... println( "Get 'pi'=" + x * 2 )`

仅调用： hmap.get Float 似乎是合理且非常易读的。在编译时不检查类型，所以如果我要求错误的类型，我会得到运行时错误。如果我决定过滤类型，那么有地方可以这样做。我应该检查可转换性并让 Option 返回 None 如果它不能完成，而不是像现在这样返回 Exception 。

对我来说，上面的内容比后来的转换更整洁，而且读起来更好，因为所有错误处理都可以在 get 中而不是 using 中：

`hmap.get("pi").asInstanceOf[Float].`

谢谢你的帮助！

这是现在更简单的代码：

 `````
 import collection.mutable.Map

object Test extends HMap {

  def main( args: Array[ String ] ) {

    var hmap = new HMap
    hmap( "anInt" ) = 1
    hmap( "pi" ) = 3.1416f
    hmap( "c" ) = "hello"
    // Test
    val result = hmap.get[ Float]( "pi" )
    result match {
      case Some( x ) =>
        println( "Get 'pi'=" + x * 2 )
      case _ => println("Not found")
    }
  }
}

class HMap {
  private var coreMap =
    Map.empty[ String, Any ]

  // Save the key with the value
  def update[ T ]( key: String, value: T ) =
    coreMap.put( key, value )

  def get[ T ]( key: String ): Option[ T ] = {
    val option = coreMap.get( key )
    option match {
      case None      => None
      case Some( x ) => Some( x.asInstanceOf[ T ] )
    }
  }
} 
```````

# android - android如何在弹出自定义对话框时显示虚拟键盘

> ID：13165494
> 
> 赞同：-2
> 
> 时间：2012-10-31T18:40:09.143
> 
> 标签：android

> **可能重复：**
> [Android：当焦点位于 EditText 上时自动显示软键盘](https://stackoverflow.com/questions/2403632/android-show-soft-keyboard-automatically-when-focus-is-on-an-edittext)

我想在弹出对话框立即输入文本时显示软键盘？（我使用android 2.3.3）我已经搜索过了。但是我发现的所有解决方案都不起作用？帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:56:04.723

如果你有自定义对话框，所以你可以设置 editText 请求焦点......所以它会显示键盘：

```
<EditText
  ...  >
     <requestFocus />
</EditText> 
```

# c# - 匹配 # 符号前的第一个数字

> ID：13165495
> 
> 赞同：0
> 
> 时间：2012-10-31T18:40:13.197
> 
> 标签：c#, regex

如何匹配此行中#之前的所有第一个数字

```
26909578#Sbrntrl_7x06-lilla.avi#356028416#2012-10-24 09:06#0#http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html#[URL=http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html]http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html[/URL]#<a href="http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html">http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html</a>#http://bitshare.com/?f=dvk9o1oz#http://bitshare.com/delete/dvk9o1oz/4511e6f3612961f961a761adcb7e40a0/Sbrntrl_7x06-lilla.avi.html 
```

我想得到这个号码 26909578 我的尝试

```
 string text = @"26909578#Sbrntrl_7x06-lilla.avi#356028416#2012-10-24 09:06#0#http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html#[URL=http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html]http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html[/URL]#<a href=""http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html"">http://bitshare.com/files/dvk9o1oz/Sbrntrl_7x06-lilla.avi.html</a>#http://bitshare.com/?f=dvk9o1oz#http://bitshare.com/delete/dvk9o1oz/4511e6f3612961f961a761adcb7e40a0/Sbrntrl_7x06-lilla.avi.html";

        MatchCollection m1 = Regex.Matches(text, @"(.+?)#", RegexOptions.Singleline); 
```

但随后它输出所有文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:45:51.020

明确说明它必须从字符串的开头开始：

```
@"^(.+?)#" 
```

或者，如果您知道这将始终是一个数字，请将可能的字符限制为数字：

```
@"^\d+" 
```

或者使用该函数`Match`代替`Matches`. `Matches`明确地说，“给我所有的比赛”，而`Match`只会返回第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:47:46.573

或者，在像这样的微不足道的情况下，您也可以考虑使用非 RegEx 方法。该`IndexOf()`方法将找到“#”，您可以轻松地剥离之前的内容。

我什至为 C# 编写了一个`sscanf()`替代品，您可以在我的文章[A sscanf() Replacement for .NET](http://www.blackbeltcoder.com/Articles/strings/a-sscanf-replacement-for-net)中看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T18:50:42.133

如果您不想/不喜欢使用正则表达式，请使用字符串生成器并循环直到您点击#。

像这样

```
StringBuilder sb = new StringBuilder();
string yourdata = "yourdata";
int i = 0;
while(yourdata[i]!='#')
{
   sb.Append(yourdata[i]);
   i++;
}

//when you get to that # your stringbuilder will have the number you want in it so return it with .toString();

string answer = sb.toString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T18:51:12.740

整个字符串（最终 url 除外）由可以匹配的段组成`(.+?)#`，因此您将获得多个匹配项。仅从匹配返回的集合中检索第一个匹配项`.+?(?=#)`

# java - Documentbuilder.parse 返回错误权限被拒绝

> ID：13165497
> 
> 赞同：2
> 
> 时间：2012-10-31T18:40:24.243
> 
> 标签：java, xml

我正在尝试使用以下代码在 java 中解析 xml

```
File fXmlFile = new File(DAL_DB_ALARM_MOVED_XML);
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(fXmlFile);
doc.getDocumentElement().normalize(); 
```

`Permission Denied`上面的代码在调用 parse() 时抛出异常。有人可以在这里帮助我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:42:04.837

也许您在文件系统上有读取权限问题？
请验证这一点，并打印 stracktrace。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:48:07.223

试试这里的建议。

[在 java 中解析 XML 的访问权限](https://stackoverflow.com/questions/7029007/access-right-to-parse-an-xml-in-java)

确保您具有读取权限并且不要保持文件打开（试一试）。

# node.js - 使用 Compass + Sass Foundation 3 部署 Node.js 的 Heroku

> ID：13165499
> 
> 赞同：3
> 
> 时间：2012-10-31T18:40:29.623
> 
> 标签：node.js, heroku, sass, zurb-foundation, compass-sass

尝试使用 SASS + Compass Foundation 3 启动并运行我的应用程序并且遇到问题，我已经更新到 cedar 堆栈上的 node.js buildpack。我收到警告：在 package.json 中没有指定 Node.js 的版本，但是我正在指定一个版本。我不确定这是否是因为我现在在我的仓库中有一个 Gemfile 和一个 Compass 的 config.rb 文件，但一切都在本地运行良好。

```
{
  "name": "Name",
  "version": "1.0.1",
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  },
  "private": true,
  "scripts": {
  "start": "node app"
  },
  "dependencies": {
  "express": "2.4.3",
  "jade": "*",
  "mailchimp": "*" ,
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:49:36.553

在这里，添加一个答案只是为了将这个从未回答的列表中删除；）

正如我（不是真的）怀疑的那样，问题是后面的额外逗号`"mailchimp": "*" ,`

# c++ - Windows 全局挂钩 C++

> ID：13165501
> 
> 赞同：0
> 
> 时间：2012-10-31T18:40:35.417
> 
> 标签：c++, winapi, hook

我一直在阅读帖子并尝试不同的方法，但我无法完成这项工作。

我希望能够在用户单击我的应用程序之前跟踪最后一个窗口。这样我可以把它带到前面并发送一个复制命令来检索用户选择的任何内容。

我考虑过使用挂钩来接收激活窗口的通知，但它没有按预期工作。我正在使用**HSHELL_WINDOWACTIVATED**全局挂钩来跟踪当前和最后一个活动窗口，但我总是让两个句柄相同，指向我的应用程序。

代码如下所示：

```
#pragma data_seg("ASEG")  
  HWND lastWindow = 0;
  HWND currentWindow = 0;
#pragma data_seg()  
#pragma comment(linker, "/section:ASEG,RWS") 

HINSTANCE dllHandle;  

BOOL APIENTRY DllMain(    
         HINSTANCE hinstDLL,  
         DWORD fdwReason,  
         PVOID lpReserved )  
{ 
    switch( fdwReason )  
    {  
    case DLL_PROCESS_ATTACH:    
        dllHandle = hinstDLL;    
        return TRUE;  
        break;  
    }  
}  

LRESULT CALLBACK ShellHookProc(int nCode, WPARAM wParam, LPARAM lParam)   
{  
    if (nCode > 0)
    {
        switch (nCode)
        {
        case HSHELL_WINDOWACTIVATED: lastWindow = currentWindow;
                         currentWindow = (HWND)wParam;
                         break;
        }
    }

    return ::CallNextHookEx(NULL, nCode,wParam,lParam);
}

extern "C" {

__declspec(dllexport) void Init()
{   
    SetWindowsHookEx(WH_SHELL, ShellHookProc, dllHandle, 0);    
}

} 
```

稍后我会使用 lastWindow 将该窗口置于最前面并发送 Ctrl+C 命令。

如果您为每个句柄调用 GetWindowTextA(..)，那么当您第一次激活不同的窗口并返回应用程序时，lastWindow 将检索空白和 currentWindow 我的应用程序名称。任何连续的激活都会为 lastWindow 和 currentWindow 检索我的应用程序的名称。我不太明白为什么会这样。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:46:37.767

我认为您可以使用 SetWinEventHook。这个钩子应该允许您捕获 EVENT_SYSTEM_FOREGROUND 消息，以便每次将窗口带到前台时，您都可以捕获窗口句柄。然后，当您的应用程序窗口被激活时，只需查看您捕获的最后一个值。

看到这个：[https ://stackoverflow.com/a/4407715/1502289](https://stackoverflow.com/a/4407715/1502289)

此外，在您自己的代码中，您可以简单地进行比较以查看窗口句柄是否是您自己的窗口的句柄。如果没有，请保存句柄。

例子：

```
...
case HSHELL_WINDOWACTIVATED: 
if (lastWindow != [your own window's handle])
{
    lastWindow = (HWND)wParam;
}
break;
... 
```

# java - java - 如何使服务器连接到Java中的另一台服务器

> ID：13165503
> 
> 赞同：0
> 
> 时间：2012-10-31T18:40:44.027
> 
> 标签：java, sockets, networking

java - 如何使服务器连接到Java中的另一台服务器

我的程序是复制文件系统。所以，我需要客户端连接到服务器才能读取或写入文本文件。这很容易实现 throw TCP 连接。但问题是如何使服务器连接其他服务器以避免文本文件中的冲突。

我已阅读有关多播抛出 UDP 连接的信息。我可以让服务器必须一种使用 TCP 与客户端的连接和另一个使用 TCP 的连接来向组中的其他服务器多播请求吗？或者如果有另一种方法来实现它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:44:25.440

我建议您查看组通信框架，例如 jgroups。[在此处](http://www.jgroups.org/manual/html/user-advanced.html)
查找有关 TCP 传输的说明。

# php - php 应用程序的 git 配置文件

> ID：13165505
> 
> 赞同：0
> 
> 时间：2012-10-31T18:40:54.633
> 
> 标签：php, git, version-control, git-commit

所以这就是发生的事情：

*   我有一个本地仓库供开发人员使用
*   推送到原始主机
*   从我的测试环境中，我总是`git pull`更新

现在当然我在测试环境中有不同的配置文件。我在测试环境中本地更改了我的配置文件。在匆忙的时刻（...）我在合并发生冲突后提交了我的本地更改。现在应用程序运行良好，但 git 告诉我

> 您的分支领先于 'origin/master' 13 次提交。

我明白，因为我提交了我的本地更改 - 我不想推动掌握。解决此问题的正确方法是什么？我想要：

*   拥有配置文件的本地副本
*   不想弄乱测试环境中基本正确的配置
*   摆脱“你的分支在前面”的消息
*   保持我的主人和我的测试环境清洁

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:44:28.760

你想丢弃你在 dev 上的本地提交

```
git push -f . origin/master:master 
```

或者

```
git reset --hard origin/master 
```

如果你已经在那个分支上。

处理配置转换的最佳方法是使用涂抹/清洁脚本。它们在属性章节中的 progit.org/book 中进行了解释。您提交了一个无法正常工作的配置。依靠脚本将配置转换为每个环境所需的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:00:34.587

如果您只想更改最近的提交，这很容易。您暂存您想要进行的更改，然后修改您的最后一次提交。

在您的情况下，您可以将配置文件更改回您想要的方式，暂存它，然后提交修改。用于`config.php`您的配置文件，它看起来像：

```
$ git add config.php
$ git commit --amend 
```

请参阅 Pro Git 的[重写历史](http://git-scm.com/book/en/Git-Tools-Rewriting-History)章节

# java - 使用正则表达式的数学集验证

> ID：13165509
> 
> 赞同：8
> 
> 时间：2012-10-31T18:41:02.650
> 
> 标签：java, regex

我需要验证给定字符串的用户并验证它是一个有效的集合，可能是一个包含内部集合的集合。例子：

```
 1) {1, 2, 3, 4} = valid
 2) {1, 2, {3, 4}, 5} = valid
 3) 1, 2, 3, 4 = invalid (missing brackets)
 4) {1, 2, {3, 4, 5} = invalid (missing inner bracket) 
```

这是我正在使用的正则表达式（为了便于阅读而分解）：

```
String elementSeparator = "(,\\s)?";
String validElement = "(\\{?[A-Za-z0-9]*\\}?" + elementSeparator + ")*";
String regex = "^\\{" + validElement + "\\}$"; 
```

目前它接受带有可选的开始和结束括号的集合，但我需要它只接受它们都在那里，而不是如果内部集合缺少括号。在我当前的实现中，第 4 个示例被接受为有效集合。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:55:17.793

这是一些 Java 伪代码，用于在不使用任何重量级工具（如 ANTLR）的情况下解决此问题。基本方法是将输入拆分为由以下组成的标记

1.  单个打开或关闭大括号
2.  一个逗号
3.  空白
4.  标识符

然后您扫描令牌，随时跟踪嵌套级别。如果到最后嵌套级别不为零，则输入字符串有一个不平衡的大括号。

```
Pattern token = Pattern.compile("([{}]|,|[A-Aa-z0-9]+|\s+)");
int nesting = 0
Matcher m = token.matcher(inputString);
while(m.find())
{
    if (m.group(1).equals("{")
        nesting++;
    else if (m.group(1).equals("}")
    {
        nesting--;
        if (nesting < 0)
            error - too many right braces
    }
    else
        ....
}
if (nesting != 0) 
    log("incorrect nesting"); 
```

一旦你有了这个框架，你就可以增强它来检测连续两个逗号之类的东西：当你看到一个逗号时设置一个标志，当你看到一个标识符（但不是空格）时清除标志。在逗号和右大括号的分支中，您测试标志并发出错误消息，因为此时的逗号无效。依此类推，无论您需要什么验证。

请注意，我上面的伪代码不是一个完整的解决方案，只是为了给您提供一般方法。一个完整的解决方案会涉及更多，因为它必须处理无效字符，从而使词法分析器（将字符串分解为标记的部分）更加复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T18:48:20.980

由于您使用匹配括号，简单的正则表达式语法是不够的。您需要研究所谓的上下文无关语法。我建议研究 ANTLR，但这将是一个比你想象的更重的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:01:15.667

一种简单的方法是搜索最后一个“{”，然后是紧随其后的“}”。然后验证中间的文本是否有效（应该是逗号分隔的列表）。然后用一个虚拟值替换整个字符串（从'{'到'}'，例如0。然后重复直到你剩下0，否则你会遇到错误。

# encoding - Jython 的 Java 和 Python 级别中的不同编码

> ID：13165510
> 
> 赞同：3
> 
> 时间：2012-10-31T18:41:04.210
> 
> 标签：encoding, character-encoding, jython, sikuli, jython-2.5

我正在使用使用 jython2.5.2 的 Sikuli（参见 sikuli.org）。

以下是 Java 级别的 Region 类的摘要：

```
public class Region {

    // < other class methods >

    public int type(String text) {
        System.out.println("javadebug: "+text); // debug output
        // do actual typing
    }
} 
```

在 Pythonlevel 上有一个 Wrapperclass：

```
import Region as JRegion            // import java class
class Region(JRegion):

    # < other class methods >

    def type(self, text):
        print "pythondebug: "+text  // debug output
        JRegion.type(self, text) 
```

这适用于 ascii 字符，但是当我使用 ö、ä 或 ü 作为文本时，会发生这种情况：

```
// python input:
# -*- encoding: utf-8 -*-
someregion = Region()
someregion.type("ä")

// output:
pythondebug: ä
javadebug: Ã¤ 
```

该字符在传递给 Java 对象时似乎转换错误。

我想知道这里到底出了什么问题以及如何解决这个问题，以便在pythonmethod中输入的字符在javamethod中是相同的。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:21:34.400

从 Jython 代码来看，您必须告诉 Java，该字符串是 UTF-8 编码的：

```
def type(self, text):
    jtext = java.lang.String(text, "utf-8")
    print "pythondebug: " + text  // debug output
    JRegion.type(self, jtext) 
```

# sql-server - 无法在 sql server 2000 中创建与已删除用户名同名的新用户

> ID：13165512
> 
> 赞同：1
> 
> 时间：2012-10-31T18:41:10.300
> 
> 标签：sql-server

我们必须从所有数据库中删除旧用户名，但是现在当我们尝试将其添加回来时，我们得到错误 15023 用户已存在。我检查了所有数据库以确保它没有并且我已经运行

```
EXEC sp_change_users_login 'Auto_Fix', 'my_example_username' 
```

然而，这个固定为 0，我仍然得到同样的错误。我还尝试在运行 auto_fix 时将域放在 my_example_username 前面，但仍然没有运气。

我通过登录并添加新用户在企业管理器中创建用户。

我正在运行 windows server 2000、iis 6 和 sql server 2003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:51:54.163

请在你的数据库上试试这个：-

```
 EXEC sp_change_users_login 'Auto_Fix', 'my_example_username', NULL, 'Password' 
```

看看这个[链接](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/SQL_Server_2008/A_4376-SQL-Server-Error-%2715023%27-User-or-role-already-exists-in-the-current-database-when-you-perform-restore-database-from-backup.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:55:03.627

尝试运行

```
Select @@version 
```

我认为您的版本是 2005。我在 2005 中遇到了同样的问题...

它解决了跑步

```
sp_change_users_login 'Auto_Fix', 'user' 
```

或者

```
 declare @user nvarchar(20)
set @user = N'user'

    declare @qry as nvarchar(1000)
set @qry = 
'
--Me dice si tiene algun schema y el nombre  de este
SELECT name FROM  sys.schemas WHERE principal_id = USER_ID(''' + @user + ''')
---se lo sacamos
ALTER AUTHORIZATION ON SCHEMA:: ' + @user + ' TO dbo

--si tiene owner se lo sacamos
EXEC sp_droprolemember N''db_owner'', N''' + @user + '''
----borramos  al usr 
DROP USER [' + @user + ']
'
print (@qry)        
exec (@qry) 
```

我使用动态 sql 因为我必须删除多个用户..

# ios - iOS“从左/右滑入”视图动画

> ID：13165517
> 
> 赞同：3
> 
> 时间：2012-10-31T18:41:36.160
> 
> 标签：ios, ios6, core-animation, uiviewanimation

我的 iOS6 应用程序有一个多级表视图，其叶节点打开单独的视图。表格第一级的动画将旧视图滑出到左侧，新视图从右侧滑入。从表格视图转换到非表格视图时，我还想使用这个滑入式动画。如何？

这里有更多信息：

在表格视图的第一级，有披露指标![在此处输入图像描述](../Images/bd0cdf4e47255d8859e5ecb3e2152e7d.png)。单击一个时，表格的第一级滑向左侧，第二级视图从右侧滑入。好的。

在表格的第二层，有详细信息披露按钮![在此处输入图像描述](../Images/b23556ff5954cb6a4e82ad712cfe60af.png)，可将用户带到表格中该元素的详细信息视图。

我也想在这里提供相同的动画：表格视图应该向左滑动，新视图应该从右侧滑入。

首先，我是否正确，这是在这种情况下使用的正确动画？

其次，你知道为什么这个“滑入”动画不在[`UIViewAnimationTransition`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)下面的标准视图动画中吗？

```
typedef enum {
   UIViewAnimationTransitionNone,
   UIViewAnimationTransitionFlipFromLeft,
   UIViewAnimationTransitionFlipFromRight,
   UIViewAnimationTransitionCurlUp,
   UIViewAnimationTransitionCurlDown,
} UIViewAnimationTransition; 
```

最后，如果我确实想在动画中使用与表格视图相同的幻灯片，但它不能作为标准视图之一使用，那么在表格视图和非表格视图之间转换时应该如何添加此动画？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T18:47:44.053

通常这种类型的动画是在 a 中完成的`UINavigationController`，并且是将新的 viewController 推入堆栈的结果。如果你想模拟它，你需要做的就是将新暴露的视图添加到你当前的基础视图中，在当前视图的右侧（即离屏）并使用`UIView`'`animateWithDuration:animations:completion:`方法来移动屏幕上和屏幕外视图向左一屏。（使用该`completion:`块删除原始视图或将其保留在原处，以便您可以轻松地将其动画化回屏幕上。）

# symfony - 出现错误：不应静态调用非静态方法 Phactory\Sql\Phactory::reset()

> ID：13165518
> 
> 赞同：2
> 
> 时间：2012-10-31T18:41:53.220
> 
> 标签：symfony, phpunit, phactory

我有一个很小的 ​​PHPUnit 测试，看起来像这样：

```
<?php
namespace VNN\PressboxBundle\Tests\Entity;
namespace VNN\PressboxBundle\Entity;

use VNN\PressboxBundle\Entity\User;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Phactory\Sql\Phactory;

class UserTest extends EntityTest
{
    public function testCreate()
    {   
        Phactory::reset();
    }   
} 
```

当我尝试运行它时，我得到了这个：

```
There was 1 error:

1) VNN\PressboxBundle\Entity\UserTest::testCreate
ErrorException: Runtime Notice: Non-static method Phactory\Sql\Phactory::reset() should not be called statically, assuming $this from incompatible context in /Users/jason/Web/pressbox/src/VNN/PressboxBundle/Tests/Entity/UserTest.php line 13 
```

那是怎么回事？所有文档都静态地调用它。

我在 Symfony 2.0 上这样做，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:05:47.890

文档说您应该直接使用顶级`Phactory`类——`lib/`而不是单个实现，例如根据您传递给`Phactory/Sql/Phactory`的对象实例化的实现。改变`PDO``setConnection`

```
use Phactory\Sql\Phactory; 
```

到

```
require_once 'Phactory/lib/Phactory.php'; 
```

主类位于全局命名空间中，不需要`use`声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T10:08:35.213

[https://github.com/chriskite/phactory/issues/30](https://github.com/chriskite/phactory/issues/30)

> 从代码来看，setConnection、define 和 create 不是静态函数，但 README 和网站指南并未反映这一点。

例如测试代码 [https://github.com/chriskite/phactory/blob/next/tests/Phactory/Sql/PhactoryTest.php](https://github.com/chriskite/phactory/blob/next/tests/Phactory/Sql/PhactoryTest.php)

```
use Phactory\Sql\Phactory;
...
$this->pdo = new \PDO("sqlite:test.db");
$this->phactory = new Phactory($this->pdo);
$this->phactory->define('user');
$this->phactory->reset(); 
```

不知道什么时候改的。

反正来晚了……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T18:16:58.250

当前版本 0.3.2 与记录的静态方法结构不向后兼容。

这是中断提交：[https ://github.com/chriskite/phactory/commit/d3b60eeedea955ab7b5803ec29446d19888d3849](https://github.com/chriskite/phactory/commit/d3b60eeedea955ab7b5803ec29446d19888d3849)

[不幸的是， http](http://phactory.org) ://phactory.org上的文档尚未更新，并且 pearhub 存储库不再可用。

我会看看测试的例子：[https ://github.com/chriskite/phactory/blob/next/tests/Phactory/Sql/PhactoryTest.php](https://github.com/chriskite/phactory/blob/next/tests/Phactory/Sql/PhactoryTest.php)

# php - 如何使用动态 url 通过 php 发送邮件

> ID：13165521
> 
> 赞同：-1
> 
> 时间：2012-10-31T18:42:02.407
> 
> 标签：php, onclick, echo, sendmail

我有一个大问题！我需要跟踪用户在我的网站上所做的事情。作为解决它的一种方法，我创建了一个 sendmail 功能，以便在用户每次单击按钮时向我发送一封电子邮件。代码是这样的：

```
<div class="buy">
<a onclick="target='_blank'" href="<?php echo $this->product['from'];?>">

<?php
// The message
$message = "A new buy";
$link = "<?php echo $this->product['from'];?>";

// Send
mail('xxx@mail.com', '@buy PRODUCT', $message, $link);
?> 

<img src="http://xxx.com/data/images/xxx.jpg" alt="Comprar"       />                            
</a>
</div> 
```

我收到的消息是

```
"A new buy

**<?php echo $this->product['from'];?>**" 
```

它应该看起来像：

“新买

**http://www.xxxx.com** "

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:47:52.370

代替：

```
$link = "<?php echo $this->product['from'];?>"; 
```

采用

```
$link = $this->product['from']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:19:20.620

好的，那么试试这个：

```
$message = "A new buy ".PHP_EOL.PHP_EOL;//add two new lines for plaintext message
$message .= $this->product['from']; //add link to the end of message

// Send
mail('xxx@mail.com', '@buy PRODUCT', $message); //no need for fourth parameter 
```

进一步阅读：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

为了方便发送电子邮件，请使用 phpmailer：

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

# html - 带有滚动内容的垂直居中未知高度 div

> ID：13165525
> 
> 赞同：2
> 
> 时间：2012-10-31T18:42:21.903
> 
> 标签：html, css, centering

我正在尝试制作一个类似灯箱的窗口，它有一个已知高度的标题栏和一个未知高度的内容区域。

我正在使用[一个浮动的伪元素`vertical-align: middle`](http://css-tricks.com/centering-in-the-unknown/)来垂直居中它。这完美地工作......当窗口的高度小于视口的高度时。

（来自 CSS-tricks 的复制粘贴代码）

```
/* This parent can be any width and height */
.block {
  text-align: center;
}

/* The ghost, nudged to maintain perfect centering */
.block:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
   also be of any width and height */ 
.centered {
  display: inline-block;
  vertical-align: middle;
  width: 300px;
} 
```

**我的问题是当滚动内容变得高于视口时，我不知道如何限制窗口高度并保持垂直居中。**

如果窗口没有标题栏和内部内容区域，这很容易通过对窗口元素应用`max-height`and来实现。`overflow: auto`但我想要一个标题栏，并且我希望滚动条只出现在窗口的内容区域中，如下图所示：

![在此处输入图像描述](../Images/36f1c23d2378dbcf0a4a78a20aee532d.png)

我可以`overflow: auto`在内容区域上`max-height`设置，但以百分比设置（我需要，因为我不能假设用户的视口高度）似乎被忽略了。

这种布局可以不使用 JS 吗？

[这是一个可以玩的演示](http://jsbin.com/olajih/6/edit)。窗口在视口下方溢出，尽管如果您删除了足够的内容（使其比视口短），它将垂直居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T17:29:54.323

给出`bg` `height:100%;`并给出`window`您想要的百分比高度[**更新演示**](http://jsbin.com/olajih/28/edit)

```
.bg {
  position: fixed;
  top: 0; bottom: 0; left: 0; right: 0;
  background: rgba(0,0,0,0.5);
  text-align: center;
  height:100%; /* The important part you were missing */
}
.window {
  vertical-align: middle;
  display: inline-block;
  position: relative;
  height:75%; /* The height you desire */
}
.bg:before {
  content: '';
  height: 100%;
  vertical-align: middle;
  display: inline-block;  
}
.titlebar {
  height: 30px; /* arbitrary value but height is known and static */
  position: absolute;
  left: 0; right: 0;
}
.window .content {
  margin-top: 30px; /* same abritrary value as titlebar height */
  height:calc(100% - 60px); /* I would think that this would be 30px, 
                               but in practice it needed 60px... */
  overflow:auto;
} 
```

附带说明一下，您应该将演示中的所有 CSS 包含在同一个位置，我很困惑为什么我的方法无法正常工作，直到我注意到在演示的最底部添加了填充

**编辑**

显然，您想要做的事情在纯 CSS 中是不可能的，因为您必须`height`将. 因此，我添加了一行 javascript，它完全按照您的要求工作`window``auto`

```
document.getElementsByClassName('window')[0].style.height = 
    document.getElementsByClassName('window')[0].offsetHeight + "px"; 
```

[**更新的演示**](http://jsbin.com/olajih/31/edit)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-31T18:57:46.920

```
!important 
```

在任何元素中都有可能解决这个问题。

# javascript - Jquery Accordion，按 ID 设置活动

> ID：13165529
> 
> 赞同：2
> 
> 时间：2012-10-31T18:42:50.780
> 
> 标签：javascript, jquery, html

所以我已经尝试了一切，但似乎无法弄清楚，我所拥有的是一个动态插入数据的手风琴，我需要发生的是我需要插入数据的 id 作为 h3 部分的 id然后依次被点击并打开...

```
<script>
jQuery(function() {
    jQuery( "#work" ).accordion({
    collapsible: true,
    active: 1});
});
</script> 
```

所以现在第一个 H3 将打开，但我希望能够通过 H3 id 设置哪个 div

```
<h3 id='$record[wid]'>
        <a id='clickable' href='#'>
            <div class='workitem'>
                <span class='mosaic-overlay'>
                    <div class='details'>
                        <a name='$record[wid]'></a>
                        <span class='title'>$record[title]
                        </span>
                    <br />
                        <span class='subtitle'>$record[subtitle]
                        </span>
                    </div>
                </span>
                <span class='mosaic-backdrop'>
                    <img src='/img/work/$record[image]' />
                </span>
            </div>
        </a>
    </h3> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:55:23.027

在我在项目中使用的手风琴上，我只是将活动设置为“h3#”+我想要打开的手风琴折叠的 id。

```
<script type='text/javascript'>
jQuery(function() {
    jQuery( "#work" ).accordion({
    collapsible: true,
    active: "h3#id"
    });
});
</script> 
```

我相信它是标准的 jQueryUI 手风琴，所以希望它也对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-27T18:21:53.860

对于遇到这个较旧主题的其他人，jQuery Accordion 现在对“活动”选项使用基于数字的值 > [https://api.jqueryui.com/accordion/#option-active](https://api.jqueryui.com/accordion/#option-active) > 0 = 第一个手风琴选项卡 > 1 = 第二个手风琴选项卡等活动： 1 将显示第二个手风琴选项卡打开/活动。此外，您可能希望使用 autoHeight、clearStyle 和 heightStyle 选项，以便在活动手风琴选项卡的底部没有额外的空白。

```
<script type="text/javascript">
/* <![CDATA[ */
jQuery(document).ready(function($){
    $( "#accordion" ).accordion({
    collapsible: true,
    active: 1,
    autoHeight: true,
    clearStyle: true,
    heightStyle: "content"
    });
});
/* ]]> */
</script> 
```

# jquery - 如何从不包含内部表单的jquery ui对话框发送表单

> ID：13165530
> 
> 赞同：0
> 
> 时间：2012-10-31T18:42:50.647
> 
> 标签：jquery, jquery-ui

我有以下表格，其中包含一些我需要发送的数据。

```
<form action="http://localhost/sp/index.php/daily_operation/turn_close" method="post" accept-charset="utf-8" id="form" name="form" class="form_cash"><br />           <input type="hidden" id="total_amount" name="total_amount" value="0">

                  <div>
                  <fieldset class="fieldset">

                  <legend>Billetes</legend>
                  <div class="row_form_div">
                      <label for="hundred_amount">100</label>
                      <input type="text" id="hundred_amount" name="hundred_amount" class="billet"/>
                      <input type="hidden" id="hundred_denomination_id" name="hundred_denomination_id" value="1">
                  </div>

                  <div class="row_form_div">
                      <label for="fith_amount">50</label>
                      <input type="text" name="fith_amount" id="fith_amount"  class="billet"/>
                      <input type="hidden" id="fith_denomination_id" name="fith_denomination_id" value="2">
                  </div>

                  <div class="row_form_div">
                      <label for="twenty_amount">20</label>
                      <input type="text" name="twenty_amount" id="twenty_amount" class="billet"/>
                      <input type="hidden" id="twenty_denomination_id" name="twenty_denomination_id" value="3">
                  </div>

                  <div class="row_form_div">
                      <label for="ten_amount">10</label>
                      <input type="text" name="ten_amount" id="ten_amount" class="billet"/>
                      <input type="hidden" id="ten_denomination_id" name="ten_denomination_id" value="4">
                  </div>

                  <div class="row_form_div">
                      <label for="five_amount">5</label>
                      <input type="text" name="five_amount" id="five_amount" class="billet"/>
                      <input type="hidden" id="five_denomination_id" name="five_denomination_id" value="5">
                  </div>

                  <div class="row_form_div">
                      <label for="one_amount">1</label>
                      <input type="text" name="one_amount" id="one_amount" class="billet"/>
                      <input type="hidden" id="one_denomination_id" name="one_denomination_id" value="6">
                  </div>

                 </fieldset>
                 </div>
</form> 
```

在发送之前，我需要询问表单数据的条件。我构建了一个 jquery ui 对话框来询问条件

```
<div id="dialog-confirm" title="&iquest;Cerrar turno con diferencia?">
            <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;">
            </span>El desglose insertado no coincide con el total por concepto de operaciones. Esto significa que cerrar&aacute; el turno con diferencia. 
            &iquest;Est&aacute; seguro?</p>
        </div> 
```

我用以下 JQuery 代码调用：

```
$( "#dialog-confirm" ).dialog({
    resizable: false,
    autoOpen:false,
    height:150,
    width:340,
    open:false,
    modal: true,
    buttons: {
        "No": function() {
            $( this ).dialog( "close" );
        },
        "Si": function() {
                $("#form").submit();
                $(this).dialog('close');
                }
        }
    }
}); 
```

这是为了发送表格中发布的数据，但没有任何反应。

我也尝试过用 Ajax 做到这一点

```
 "Si": function() {
                $("#form").submit();
                if (true) {
                    {
                        $.ajax({
                            type: "POST",
                            dataType: "json",
                            url: 'daily_operation/turn_close',
                            data: $("#form").serialize(), // serializes the form's elements.
                            success: function(data)
                            {
                            },
                            error: function(data) {
                                bValid = false;
                            }
                        });

                    }
                    $(this).dialog('close');
                }
        } 
```

但仍然没有发送任何内容。

请你帮助我好吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:19:03.267

问题是您是尝试以传统方式发送它还是使用 AJAX

```
$("#form").submit(); 
```

这应该发送它，但存在一些问题（例如，IE 要求表单包含提交按钮！）。这种方法会产生很多问题。我建议使用 AJAX。开始尝试看看会发生什么。：

```
$.ajax({
                            type: "POST",
                            dataType: "json",
                            url: 'daily_operation/turn_close',
                            data: $("#form").serialize(), 
                            beforeSend : function(){
                                  alert($("#form").serialize());
                            },
                            success: function(data)
                            {
                                 alert(data);
                            },
                            error: function(data) {
                                bValid = false;
                            }
                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T03:42:14.643

我知道这是一篇旧帖子，但我想我知道为什么表单没有提交。代替

`$("#form").submit();`

它应该是

`$("#form")[0].submit();`.

`.submit()``form`是实际HTML 元素的内置 javascript 函数。它应该用于实际元素。在纯 JS 中：

```
document.getElementById("form").submit(); 
```

jQuery`.submit()`用于将函数附加到`submit`事件。像：

```
$("#form").submit(function() { 
   return true; 
}); 
```

在 jQuery 中，您可以使用`.get()`函数或数组索引来获取实际的 HTML 元素。所以这：

```
$("#form").get(0).submit(); 
```

也应该工作。

# python - 在内部带有长文本的变量上使用“”而不是“

> ID：13165531
> 
> 赞同：0
> 
> 时间：2012-10-31T18:42:55.710
> 
> 标签：python, pep8

我的问题很简单。

当我将长 sql 语句写入变量时，我使用以下形式：

```
sql = """ select a, b, c, d ,e,
          from tables where a=a and b=b and c=c and so on..
      """ 
```

但是，在 if 语句的变量上使用这种“技术”是否正确？

示例 1：

```
if message[0] == """ this is a huge message, and it will
probably break to a second line, ( i told you )
""":
    print "   alfa "
else:
    print "  omega " 
```

示例 2：

```
html=i.invoke_server('localhost')

doc = LH.fromstring(html)
LE.strip_tags(doc,'b')
regex ="""
//td[text()='activeThreadCount']
/following-sibling::*/text()
""" 
```

在示例二中，我相信它可以实现 PEP8 所说的使用

```
regex ="""
//td[text()='activeThreadCount']
/following-sibling::*/text()
""" 
```

反而

```
regex ="//td[text()='activeThreadCount']/following-sibling::*/text()" 
```

但它是正确的吗？以这种方式拆分正则表达式、xpath xpressions 或其他东西？

这个问题主要是因为遵循 PEP8 关于在一行上最多使用 79 个字符的步骤。

如果这不是正确的方法，可以采取什么措施来遵循 PEP8 指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:15:02.577

""" 是个好办法，但有时我觉得这样更好：

```
customMsg = "****************\n"
customMsg +="* SOME STRING  *\n"
customMsg +="****************\n"

print customMsg

****************
* SOME STRING  *
**************** 
```

注意'\n'的用法：

这将与以下内容相同：

```
customMsg ="****************\n* SOME STRING  *\n****************\n"
print customMsg

****************
* SOME STRING  *
**************** 
```

但是第一个很明显

“““ 例子：

```
customMsg ="""****************
* SOME STRING  *
****************
""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:54:38.513

对于模块，当使用(or )`re`时，建议在非常复杂的正则表达式中使用多行字符串。请参阅[http://docs.python.org/2/library/re.html#re.X](http://docs.python.org/2/library/re.html#re.X)（引文）：`re.VERBOSE``re.X`

> 此标志允许您编写看起来更好的正则表达式。模式中的空格被忽略，除非在字符类中或前面有未转义的反斜杠，并且当行包含“#”既不在字符类中也不在前面有未转义的反斜杠时，从最左边开始的所有字符，如 '# ' 到行尾被忽略。
> 
> 这意味着以下两个匹配十进制数的正则表达式对象在功能上是相等的：

```
a = re.compile(r"""\d +  # the integral part
                   \.    # the decimal point
                   \d *  # some fractional digits""", re.X)
b = re.compile(r"\d+\.\d*") 
```

注意`r"raw string"`使用正则表达式模式时的用法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T20:01:20.407

三重引号语法非常适合嵌入多行文本，其中需要换行符：

```
message = """\
This is a multi-line message.

 + Source lines match string lines 1:1.
 + No '\\n' noise.
""" 
```

不幸的是，如果你把它放在缩进代码的中间，每行的前导空格就会成为字符串的一部分。 [`textwrap.dedent()`](http://docs.python.org/2/library/textwrap.html#textwrap.dedent)节省一天：

```
def f():
   """Indented docstrings look good.

   If you'll peek at f.__doc__, you'll see leading whitespace here.
   But we don't care because pydoc, doctest and other docstring-parsing
   tools are smart enough to strip it.
   """
   if X:
       print """\
Here I'm writing flush-left to avoid leading whitespace.
But this breaks the visual flow in a horrible way!
"""
   print "where am I now? how did I get here?"
   print textwrap.dedent("""\
       This is much better!  I can have the cake and eat it.
       Unlike docstrings, don't start the first line after quotes.
       """) 
```

但是在您的所有示例中，都不需要换行符。
在某些情况下，例如 SQL，您不必在意。对于长正则表达式，请查看该[`re.VERBOSE`](http://docs.python.org/2/library/re.html#re.X)选项，允许非重要的空格，甚至是注释。不知道xpath。

如果您关心精确的字符串，请不要使用三引号。使用串联：

```
xpath = ("//td[text()='activeThreadCount']"
         "/following-sibling::*"
         "/text()") 
```

最后，不要盲目地遵循 80 列指南。与周围的代码和人员保持一致，但请记住，在某些情况下，排长队实际上可能是最好的。例如，您希望阅读源代码的人单击或复制粘贴的长 URL 更方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:46:29.380

您可以转义新行。尝试：

```
"This is a really long string \
that is going to break lines" 
```

这将打印为“这是一个非常长的字符串，会断行”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T19:23:06.103

我认为这是一个变体：如果你的函数变得很长，把它分成几块。如果您正在创建 sqlstrings，为什么不编写如下内容：

```
def sqlmap(*arg):
    sql = "select * from TABLE where "
    for a,b in arg[0].items():
        op,val = b
        sql += " ".join([a,op,val])

    print '>> ',sql

conditions = {'A':['=','B']}
sqlmap(conditions) 
#output >>  select * from TABLE where A = B 
```

# c# - 反序列化从 Android 应用程序发送到 WCF Web 服务的 JSON 对象

> ID：13165533
> 
> 赞同：0
> 
> 时间：2012-10-31T18:43:02.697
> 
> 标签：c#, android, wcf

我正在尝试将 JSON 对象发送到我的 webservice 方法，该方法的定义如下：

```
public String SendTransaction(string trans)
{
            var json_serializer = new JavaScriptSerializer();
            Transaction transObj = json_serializer.Deserialize<Transaction>(trans);
            return transObj.FileName;       
} 
```

我想在哪里返回我作为参数得到的这个 JSON 字符串的 FileName。

安卓应用程序代码：

```
HttpPost request = new HttpPost(
                "http://10.118.18.88:8080/Service.svc/SendTransaction");
        request.setHeader("Accept", "application/json");
        request.setHeader("Content-type", "application/json");

        // Build JSON string
        JSONStringer jsonString;

        jsonString = new JSONStringer()
                .object().key("imei").value("2323232323").key("filename")
                .value("Finger.NST").endObject();

        Log.i("JSON STRING: ", jsonString.toString());

        StringEntity entity;

        entity = new StringEntity(jsonString.toString(), "UTF-8");

        entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));
        entity.setContentType("application/json");

        request.setEntity(entity);

        // Send request to WCF service
        DefaultHttpClient httpClient = new DefaultHttpClient();

        HttpResponse response = httpClient.execute(request);
        HttpEntity httpEntity = response.getEntity();
        String xml = EntityUtils.toString(httpEntity);

        Log.i("Response: ", xml);
        Log.d("WebInvoke", "Status : " + response.getStatusLine()); 
```

我只得到一个很长的 html 文件，它告诉我`The server has encountered an error processing the request`. 状态码是`HTTP/1.1 400 Bad Request`

我的 Transaction 类在 C# 中定义如下：

```
 [DataContract]
public class Transaction
{
    [DataMember(Name ="imei")]
    public string Imei { get; set; }

    [DataMember (Name="filename")]
    public string FileName { get; set; }
} 
```

我怎样才能以正确的方式做到这一点？

**编辑，这是我的 web.config**

```
 <?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <behaviors>

          <endpointBehaviors>
            <behavior name="httpBehavior">
                <webHttp />
            </behavior >
        </endpointBehaviors>

      <serviceBehaviors>
        <behavior name="">
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    <services>
      <service name="Service.Service">
        <endpoint address="" behaviorConfiguration="httpBehavior" binding="webHttpBinding" contract="Service.IService"/>
      </service>
    </services>

    <protocolMapping>
        <add binding="webHttpBinding" scheme="http" />
    </protocolMapping>

    <!--<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />-->
  </system.serviceModel>
  <system.webServer>
  <!-- <modules runAllManagedModulesForAllRequests="true"/>-->
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:40:40.687

*@Tobias，这不是答案。但由于评论有点长，我把它贴在这里。也许它可以帮助诊断您的问题。[完整的工作代码]。*

```
public void TestWCFService()
{
    //Start Server
    Task.Factory.StartNew(
        (_) =>{
            Uri baseAddress = new Uri("http://localhost:8080/Test");
            WebServiceHost host = new WebServiceHost(typeof(TestService), baseAddress);
            host.Open();
        },null,TaskCreationOptions.LongRunning).Wait();

    //Client
    var jsonString = new JavaScriptSerializer().Serialize(new { xaction = new { Imei = "121212", FileName = "Finger.NST" } });
    WebClient wc = new WebClient();
    wc.Headers.Add("Content-Type", "application/json");
    var result = wc.UploadString("http://localhost:8080/Test/Hello", jsonString);
}

[ServiceContract]
public class TestService
{
    [OperationContract]
    [WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    public User Hello(Transaction xaction)
    {
        return new User() { Id = 1, Name = "Joe", Xaction = xaction };
    }

    public class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public Transaction Xaction { get; set; }
    }

    public class Transaction
    {
        public string Imei { get; set; }
        public string FileName { get; set; }
    }
} 
```

# webforms - PowerBuilder 12.5 Web 表单 - 列不可编辑或在部署时丢失选项卡顺序

> ID：13165536
> 
> 赞同：3
> 
> 时间：2012-10-31T18:43:08.150
> 
> 标签：webforms, powerbuilder, datawindow, powerbuilder.net

我是一位经验丰富的 PB 开发人员，但主要使用典型的客户端-服务器架构，并且在使用**PB12.5 Classic**部署到**IIS7.5的****Web 窗体**应用程序时确实遇到了问题。

 ****我正在创建一个在设计模式下完美运行的可更新数据对象（Web 服务），但是当从部署的 IIS 服务器运行时，我设置为正选项卡顺序（可编辑）的所有列**看起来好像它们有一个选项卡顺序零**。我无法选择一行，无法将焦点移到一列，唯一起作用的是添加到数据对象的一些按钮（通用插入和删除）。

我已经尝试了 Web 生成选项卡下数据对象设计中的所有可能选项，包括 HTML/XHTML、HTML、XHTML、XML 等。我尝试检查所有 Javascript 生成复选框（生成 JS、客户端事件、客户端验证、计算字段、客户端格式化、客户端脚本化、生成 DDDW 帧，但这些都无济于事。

我已经尝试了所有三种分页方法，XMLClientSide、PostBack、Callback。请注意，我的分页工作正常。我只是无法使可编辑的列（带有正标签顺序）获得焦点！这通常是新手的错误，但在 Web 窗体部署中有些不同，我需要帮助。

我的数据对象类型是表格。Web 服务更新，我已经通过数据对象预览尝试了所有的 Web 服务功能。我在同一台计算机上运行 IIS 7.5。已安装所有运行时 DLL。在工程对象的Win32动态库文件中包含了Sybase.PB.WebService.Runtime.dll、RuntimeRemoteLoader.dll、WSDL.dll、WSDLRemoteLoader.dll。在 Win32 动态库文件中包含了 dataservice 非可视 dll。我对基本的 SQL 数据源数据对象有同样的问题。

我已经包含了来自我的窗口的编辑源的片段，这些片段涵盖了 HTML 的主要数据对象部分和已部署 Web 表单应用程序的一行数据对象的 HTML **，**希望可能有一些识别信息：

**首先是源的数据对象部分：**

```
<div style="position: relative; height: 4.893in; width: 4.666in; background-color: rgb(255, 255, 255); " id="objdw_1_datawindow" bisinit="true" dwname="objdw_1" irowno="-1" icolno="-1" ibandid="-1" igroup="-1" iautoselect="0" gobname="datawindow"> 
```

**下一行的来源：**

```
<span id="objdw_1_detail_18" class="objdw-111" style="position: absolute; left: 0in; top: 4.435in; width: 100%; height: 0.229in; " onclick="{if (eval ('typeof objdw_1') == 'object') objdw_1.itemClicked(18,-1,'datawindow',0,-1);}" onmousedown="{var ret; ret= objdw_1.itemRButtonDown(18,-1,'datawindow',0); return ret;}">
<input type="text" name="catname_18" id="objdw_1_18_3" size="18" value="Business" class="objdw-116" tabindex="137" style="position: absolute; left: 0.073in; top: 0.021in; width: 2.103in; height: 0.188in; " onfocus="{objdw_1.itemGainFocus(18,3,this,objdw_1.gobs.catname); objdw_1.selectControlContent(this);}" onclick="{var ret; ret= objdw_1.itemClicked(18,3,'catname',0,-1); return ret;}" onchange="{this.bChanged = true;}" onkeypress="return DW_EditKeyPressed(event, this, -1);" onblur="{objdw_1.itemLoseFocus (this);}" onmousedown="{var ret; ret= objdw_1.itemRButtonDown(18,3,'catname',0); return ret;}"/>
<input type="text" name="createdate_18" id="objdw_1_18_4" size="5" value="05/02/11" class="objdw-117" tabindex="-32766" style="position: absolute; left: 3.395in; top: 0.021in; width: 0.656in; height: 0.188in; " readonly="" onfocus="{objdw_1.itemGainFocus(18,4,this,objdw_1.gobs.createdate); objdw_1.selectControlContent(this);}" onclick="{var ret; ret= objdw_1.itemClicked(18,4,'createdate',0,-1); return ret;}" onchange="{this.bChanged = true;}" onblur="{objdw_1.itemLoseFocus (this);}" onmousedown="{var ret; ret= objdw_1.itemRButtonDown(18,4,'createdate',0); return ret;}"/>
<input type="button" name="b_1_18" value="x" class="objdw-118" style="position: absolute; left: 4.188in; top: 0.01in; width: 0.207in; height: 0.208in; " onclick="{objdw_1.buttonPress('DeleteRow',18,'b_1',0,-1); objdw_1.restoreFocus();}"/>
<input type="button" name="b_3_18" value="+" class="objdw-119" style="position: absolute; left: 4.459in; top: 0.01in; width: 0.207in; height: 0.208in; " onclick="{objdw_1.buttonPress('InsertRow',18,'b_3',0,-1); objdw_1.restoreFocus();}"/> 
```

有没有其他人经历过这种情况，如果有，解决方案是什么？有人问我是否尝试过不同的浏览器，我尝试过 Chrome 和 IE。

非常感谢你。

**添加于 11-11-12：**根据成员提出的评论和问题，我在事后添加了一些有用的信息。

1.  我尝试过哪些浏览器？我已经尝试过 IE（32 和 64 位）版本 9.0.8112.16424、Chrome 版本 23.0.1271.64 m，并且两者都不允许编辑制表符顺序大于零的列。

2.  应该支持 IE，所以我决定用这个浏览器更加努力。我在 Windows 2008 R2 Server 上进行测试，显然 Microsoft 出于安全原因自动在服务器上打开 Internet Explorer 增强安全性。增强的安全性使浏览器使用起来非常烦人，并且必须禁用 javascript，这最终导致 Web 表单数据窗口无法按我预期的那样运行。[我按照这些说明](http://blogs.technet.com/b/thailand/archive/2012/09/13/how-to-disable-internet-explorer-enhanced-security-configuration-in-windows-server-2012.aspx)关闭了 IE 增强安全性，并且 Web 表单应用程序工作正常！

**2013 年 7 月 2 日添加：**有评论询问我是否查看了生成的 Javascript/CSS/HTML 并确定在非 IE 浏览器中出现了什么问题，我不得不承认我没有花太多时间研究为什么非 IE 浏览器如果有人确实解决了这个问题，请添加评论。

```
**Summary**: I hoped for a solution, however it looks like the real answer to this question is going to be that IE is the only supported browser. When Sybase says that non-IE browsers are not supported they really mean that non-IE browsers will probably not work. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:58:53.937

正如 Sybase 在[Web 表单 FAQ](http://www.sybase.com/detail?id=1061922)中所述，他们并没有过多关注跨浏览器兼容性：

> 我们正在评估 Firefox 和 Safari 是否支持多浏览器。菜单是使用第三方菜单 web 控件实现的，该控件将菜单项呈现为超链接。

许多其他功能很可能在 IE 以外的其他浏览器中出现错误行为:(****

# javascript - 图像有 click() 函数吗？

> ID：13165541
> 
> 赞同：0
> 
> 时间：2012-10-31T18:43:32.410
> 
> 标签：javascript

有`click()`图片功能吗？不是功能，而是像按钮这样`onClick`的实际功能`click()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:44:46.790

不，图像没有`click`功能。

将[HTMLImageElement](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-17701901)（未`click`列出）的 IDL 与[HTMLInputElement](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-6043025)（`click`列出）的 IDL 进行比较。

（不过，有趣的是，HTML5 规范——更新的——不再`click`在 s 上显示函数`HTMLInputElement`。链接：[HTML5`HTMLImageElement`](http://www.w3.org/TR/html5/the-img-element.html#the-img-element) - [HTML5`HTMLInputElement`](http://www.w3.org/TR/html5/the-input-element.html#the-input-element)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:46:08.767

**编辑**

你也可以试试这个 jQuery 解决方案

```
<img src="http://jsfiddle.net/img/logo.png" /> 
```

像这样绑定事件：

```
$(function () {
  $("img").click(function() {
    alert('Hello World!');  
  });
}); 
```

* * *

**javascript和html解决方案**

我认为不是，但您可以像这样解决问题

```
<a href="#" onClick="alert('Hello World!')"><img title="The Link" /></a> 
```

这使您的图像可点击

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:52:32.930

将图像放入按钮中。

```
<button><image src="foo"/></button> 
```

您可以在内部使用背景图像而不是图像标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:55:08.853

你有什么理由不绑定到`mouseup`事件？

[http://jsfiddle.net/kR3P9/](http://jsfiddle.net/kR3P9/)

对于 id 为“ **example** ”的图像：

```
function init() {
    var example = document.getElementById("example");
    example.addEventListener("mouseup", function() {
       alert("Mouse up!");
    }, false);
}

document.addEventListener("DOMContentLoaded", init, false);​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T18:57:15.583

听起来您正试图对图像进行操作。如果单击图像时图像在页面上执行操作，则它可能已经包含在标签中。在没有看到您正在处理的页面的情况下，我猜您可以使用

```
$(imageElement).parent("a").click()
```

# c# - 将 DGV 中的行复制到列表中

> ID：13165547
> 
> 赞同：1
> 
> 时间：2012-10-31T18:43:40.093
> 
> 标签：c#, .net, winforms, list, datagridview

这样我就可以从我的 datagridview 中作为列表访问。我在这里面临的问题..可以说如果我`6 rows`在 DGV 中，当它更新到它显示的列表时`36rows`。我该如何解决这个问题？

```
for (int i = 0; i < testDsrcConfigs .Count; i++ )
            {
                Console.WriteLine(testDsrcConfigs [i]);
            } 
```

从 for 循环中，我可以看到 6 行。可以用`for loop`吗？？我怎样才能适应循环来访问成员？请帮助我..！

```
List<SdrcConfig> testDsrcConfigs = new List<SdrcConfig>();

foreach (GridViewRowInfo dr in RadGridView.Rows)
    {
        //Create a TrafficLane list 
        List<TrafficLane> covTrafLane = new List<TrafficLane>();

        if (dr.Cells["bct0"].Value != "XXXX")
            {
                covTrafLane.Add(new TrafficLane(dr.Cells["bct0"].Value.ToString()));
            }
        if (dr.Cells["bct1"].Value != "XXXX")
            {
                covTrafLane.Add(new TrafficLane(dr.Cells["bct1"].Value.ToString()));
            }
        if (dr.Cells["bct2"].Value != "XXXX")
            {
                covTrafLane.Add(new TrafficLane(dr.Cells["bct2"].Value.ToString()));
            }
        if (dr.Cells["bct3"].Value != "XXXX")
            {
                covTrafLane.Add(new TrafficLane(dr.Cells["bct3"].Value.ToString()));
            }

            //Create RseDevicePosition
            DevicePosition devPos;
            int ctx;
            Int32.TryParse(dr.Cells["bx"].Value.ToString(), out ctx);
            int cty;
            Int32.TryParse(dr.Cells["by"].Value.ToString(), out cty);
            int ctz;
            Int32.TryParse(dr.Cells["bz"].Value.ToString(), out ctz);
            int bazu;
            Int32.TryParse(dr.Cells["bazim"].Value.ToString(), out bazu);
            int bele;
            Int32.TryParse(dr.Cells["belev"].Value.ToString(), out bele);
            int bti;
            Int32.TryParse(dr.Cells["btilt"].Value.ToString(), out bti);

            ushort devnum = UInt16.Parse(dr.Cells["bdevnum"].Value.ToString());

            devPos = new DevicePosition(
                new ValueWithUnit<int>(ctx, "mm"),
                new ValueWithUnit<int>(cty, "mm"),
                new ValueWithUnit<int>(ctz, "mm"),
                new ValueWithUnit<int>(bazu, "tenthOfDegree"),
                new ValueWithUnit<int>(bele, "tenthOfDegree"),
                new ValueWithUnit<int>(bti, "tenthOfDegree"));

            ((MyConfig.
            .ObuTransactionSystemConfig as DsrcTransactionSystemConfig).
                 DsrcSystemConfig as MultiLaneDsrcSystemConfig).DsrcConfigs.ForEach(
                     dsrcBeacon => testDsrcConfigs.Add(
                         new SdrcConfig(
                             dr.Cells["bid"].Value.ToString(), 
                             dr.Cells["bdesc"].Value.ToString(),        
                             covTrafLane,
                             devPos, devnum,
                             dsrcBeacon.Settings)));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:32:51.847

进行以下更改：

```
((MyConfig.
        .ObuTransactionSystemConfig as DsrcTransactionSystemConfig).
             DsrcSystemConfig as MultiLaneDsrcSystemConfig).DsrcConfigs.ForEach(
                 dsrcBeacon => testDsrcConfigs.Add(
                     new SdrcConfig(
                         dr.Cells["bid"].Value.ToString(), 
                         dr.Cells["bdesc"].Value.ToString(),        
                         covTrafLane,
                         devPos, devnum,
                         dsrcBeacon.Settings))); 
```

到

```
testDsrcConfigs.Add(
                     new SdrcConfig(
                         dr.Cells["bid"].Value.ToString(), 
                         dr.Cells["bdesc"].Value.ToString(),        
                         covTrafLane,
                         devPos, devnum,
                         ((MyConfig.
    .ObuTransactionSystemConfig as DsrcTransactionSystemConfig).
         DsrcSystemConfig as MultiLaneDsrcSystemConfig).DsrcConfigs[0].Settings); 
```

# javascript - 如何根据 UTC RFC 3339 时间戳创建本地化的 JavaScript 日期

> ID：13165548
> 
> 赞同：2
> 
> 时间：2012-10-31T18:43:57.653
> 
> 标签：javascript, date

假设以下 UTC RFC 3339 时间戳：

`2012-09-30 12:12:12Z`

`Date`什么是在 JavaScript中生成本地化的好方法？

我已经得出了以下令人费解的（但有效的）解决方案，我不禁认为我错过了一些东西。

```
/**
 * Accepts a string on the format YYYY-MM-DD HH:MM:SS
 * and returns a localised Date
 */
DateUtils.localised_date_from = function (rfc_timestamp) {
    var date_parts = rfc_timestamp.substring(0, 10).split("-"),
        time_parts = rfc_timestamp.substring(10).split(":"),
        year = parseInt(date_parts[0], 10),
        month = parseInt(date_parts[1], 10) - 1,
        date = parseInt(date_parts[2], 10),
        hours = parseInt(time_parts[0], 10),
        minutes = parseInt(time_parts[1], 10),
        seconds = parseInt(time_parts[2], 10),
        utc_timestamp = Date.UTC(year, month, date, hours, minutes, seconds);

    return new Date(utc_timestamp);
}; 
```

**编辑**：

`Date.parse`应该是一个很好的起点，但在旧浏览器中根本不适用于 RFC3339，至少在 IE8 中没有`new Date(Date.parse("2012-09-30 12:12:12Z"))`返回`NaN`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:46:45.713

（发表评论）

```
new Date(Date.parse("2012-09-30 12:12:12Z")). 
```

给我：

```
Sun Sep 30 2012 07:12:12 GMT-0500 (Central Daylight Time) 
```

**编辑**

我找不到（快速谷歌）解析 RFC 3339 是否是 ECMA 脚本规范的一部分，所以不能保证这是跨浏览器。在 Chrome 22 中为我工作。

如果遇到问题，可能值得查看[http://www.datejs.com/](http://www.datejs.com/)

# sql - 在 sql server 查询更新编号列表一个字段到另一个字段的位置

> ID：13165550
> 
> 赞同：0
> 
> 时间：2012-10-31T18:44:22.963
> 
> 标签：sql, sql-server, insert, where-in

我正在使用 SQL Server，在下面的查询中，我有一个问题。当我在列表中执行位置时，我不确定左侧的字段是否会与右侧的字段（来自同一个表）一起更新。

```
update loc 
set locShortName = locName 
where locid in (3,4,11,13,14,15,16,18,19,20,21,24,32,41,45,68,69,77,82,85)

update loc set locShortName = locName where locid = 3 (move to next record in the list)      
update loc set locShortName = locName where locid = 4 (move to next record in the list)
update loc set locShortName = locName where locid = 11(move to next record in the list) 
```

等等...

我认为它将采用列表中的第一个数字并解决字段值设置，然后移至列表中的下一个。

我的预期正确吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:47:37.607

这在我看来是正确的。每当我像这样编写一次性更新查询时，我总是首先在表的副本上对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:47:37.110

```
update loc set locShortName = locName where locid in 
(3,4,11,13,14,15,16,18,19,20,21,24,32,41,45,68,69,77,82,85) 
```

你可以认为它是这样工作的：

排一排。如果 locid 在列表中，将获取该行的 locName 并将其放入 locShortName。

换一排。如果 locid 在列表中，将获取该行的 locName 并将其放入 locShortName。

换一排。如果 locid 不在列表中，它不会做任何事情。

等等

它不会一次处理一个，但概念结果将是这样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:54:15.827

您的期望几乎是正确的，它不是一次处理一条记录，而是处理整套记录。它会提取 locid = ... 的记录，然后一举将 locShortname 字段更新为每条记录中的 locname 字段。在编写 SQl 代码时，您永远不应该考虑处理单个记录，而只考虑处理记录集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:57:40.897

前两个答案并不正确，它将读取和更新单个隐式事务中的所有记录（以查询开始和结束）。查询的更新部分将映射来自同一记录的“locShortName”和“locName”值。

我发现知道要更新什么的最简单方法是编写更新查询，如下所示。完成后，我通常会删除副作用语法。

```
--update l
--set locShortName = locName 
select locShortName = locName
from loc as l
where locid in (3,4,11,13,14,15,16,18,19,20,21,24,32,41,45,68,69,77,82,85); 
```

正如我所说，当您完成时，要么删除选择行并取消注释更新/设置行，要么删除副作用语法。如果您还想加入其他表，这种格式会很有用。

只需确保每次更改 select 语句时，都对 update 语句进行相应的更改（即使已注释）。

当您不确定查询的结果时，另一个好的做法是开始一个事务，以便您可以检查其产生的更改和行数。然后，您可以根据需要提交或回滚事务。我只是警告它会锁定那些行或表，所以不要在活动系统中逗留太久。

# c - libxml2：不单独报告'或'之类的字符

> ID：13165554
> 
> 赞同：0
> 
> 时间：2012-10-31T18:44:38.110
> 
> 标签：c, libxml2

我是 libxml 的新手，到目前为止一切都很好，但我注意到一件让我烦恼的事情：当 libxml 报告字符时，即调用处理程序的字符函数时，“特殊”字符如 ' 或 " 或单独报告。例如：

```
"It's a nice day today. Don't you agree?"
report:"
report: It
report: '
report: s a nice day today. Don
report: '
report: you aggree?
report: " 
```

有没有办法改变这种行为，所以它会被报告为一个完整的字符串？不要误会我的意思，使用 strcat 将原始字符串放在一起不是问题，但这是额外的工作；）

我搜索了标题和网络，但没有找到解决方案。先感谢您。

编辑：因为上面的处理程序描述需要更多解释。通过报告字符，我的意思是当处理程序的 (htmlSAXHandler) handler.characters 回调函数被调用时，我分配了：

```
void _characters(void *context, const xmlChar *ch, int len) {
    printf("report: %s\n", chars);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:10:45.090

如果您的文档不会太大以至于无法将其全部保存在内存中，您可能希望查看 DOM 解析而不是注册 SAX 回调。

```
#include <stdio.h>
#include <libxml/HTMLparser.h>
#include <libxml/tree.h>

int main()
{
  htmlDocPtr doc;
  xmlNodePtr root, node;
  char *output;
  char *rawhtml = "<html><body>\"It's a nice day today.  Don't you agree?\"</body></html>";
  doc = htmlReadDoc(rawhtml, NULL, NULL, XML_PARSE_NOBLANKS);
  root = xmlDocGetRootElement(doc);
  node = root->children;
  output = xmlNodeGetContent(node);
  printf("output=[%s]\n", output);
  if(output)
    xmlFree(output);
  if(doc)
    xmlFreeDoc(doc);
} 
```

生产

```
output=["It's a nice day today.  Don't you agree?"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:41:10.237

恐怕你应该忍受它。如果您遇到一个包含 100K 字符的 HTML 文档，您是否还希望它一次性提供所有字符？我认为您应该随时准备好拆分角色。然后将它们拆分为特殊字符没有区别。

如果您的软件旨在仅读取小型 HTML 文档，则此答案是不够的，但我敢打赌 libxml 作者并没有考虑对此类情况进行特殊处理。

# android - 如何以编程方式打开安全设置并在安全设置中向下滚动活动？

> ID：13165556
> 
> 赞同：0
> 
> 时间：2012-10-31T18:44:42.813
> 
> 标签：android

我想打开安全设置，然后以编程方式向下滚动安全活动。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:10:30.820

这不是一项简单的任务，但我相信使用与[Robotium](https://github.com/jayway/robotium/)类似的实现是可能的。

我相信关键是使用 ActivityMonitor 类和服务将事件发送到另一个活动启动的活动。这应该使您走上正确的道路。您可以查看 ActivityUtils.java 类以查看如何实例化 ActivityMonitor 的示例。您可能会复制部分 Robotium 代码并将其用于启动设置并导致滚动事件发生。

# iphone - 清除 UILabel 文本并在 xcode 中再次重置？

> ID：13165560
> 
> 赞同：-1
> 
> 时间：2012-10-31T18:44:51.573
> 
> 标签：iphone, xcode, uilabel

我有一个 UILabel 设置它的文本。但是当我检查某些条件并尝试更改 UILabel 的文本（如果条件不满足）时，我会在 UILabel 的已经存在的文本上获取其他其他文本，即两个文本都是重叠的..首先我想要清除当前文本并将相同的 UILabel 重置为其他文本..我该怎么做？

我在做这个

```
label.text=@"Welcome";
if(check for some condition)
{
  label.text=@"Sorry";
} 
```

但是两个文本相互重叠......我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:58:33.097

如果你想先清除标签

```
label.text = @""; 
```

然后给标签一些价值

```
label.text = @"Sorry"; 
```

我知道这很愚蠢，但有时它会起作用。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:57:13.753

You can try this:

```
label.text = nil; 
```

And after the condition, you reassign the text.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T02:47:18.917

我在使用 Swift 3 时遇到了同样的问题。有时会出现断断续续的情况，并且文本交换看起来像一个标签。我决定如下：

```
 self.label.text = "00:00:00"
 self.label.setNeedsLayout() 
```

# javascript - 使用 d3js 遍历 SVGElement 路径？

> ID：13165568
> 
> 赞同：4
> 
> 时间：2012-10-31T18:45:34.070
> 
> 标签：javascript, svg, d3.js

我正在关注本教程： [http ://bl.ocks.org/2206529](http://bl.ocks.org/2206529)

我想确定每个州的中心区域，但我有两个问题：

1.  如何遍历每个州的 SVG 元素？
2.  如何确定该特定 SVG 元素的中间坐标？

我的 g 元素包含许多路径，其中每个路径代表一个状态。似乎当我使用以下代码时：

```
states.selectAll("path") 
```

我想使用以下方法找到路径的中心：

```
 states.selectAll("path").attr("d", function(d) {
        // Get centroid(d)
    }); 
```

但是函数参数不做任何事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T11:58:45.253

这是 attr 的错误使用。带有第二个参数的 attr 函数用于设置属性，而不仅仅是用于迭代集合。您应该使用每个功能

> [https://github.com/mbostock/d3/wiki/Selections#wiki-each](https://github.com/mbostock/d3/wiki/Selections#wiki-each)
> 
> # selection.each(函数)
> 
> 为当前选择中的每个元素调用指定的函数，传入当前数据 d 和索引 i，以及当前 DOM 元素的 this 上下文。几乎所有其他运算符都在内部使用此运算符，并可用于为每个选定元素调用任意代码。通过在回调函数中使用 d3.select(this)，可以使用 each 运算符递归处理选择。

```
states.selectAll("path").each(function(d, i) {

        // Get centroid(this.d)
}); 
```

# vb.net - 从“外部”将位图绘制到表单背景上

> ID：13165570
> 
> 赞同：0
> 
> 时间：2012-10-31T18:45:36.857
> 
> 标签：vb.net, forms, graphics

我想在表单上绘制位图，但不是从表单内。我宁愿做这样的事情：

```
myBitmap.DrawUnscaled(frmOverlay.DefInstance.Graphics) 
```

但这对我来说看起来很奇怪，而且肯定是不正确的。请问有什么好的方法可以做到这一点？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:08:28.667

您可以简单地公开目标表单的 Image 属性：

```
Class destForm

    Public WriteOnly Property SetImage As Image
        Set(value As Image)
            Me.BackgroundImage = value
            Me.Invalidate
        End Set
    End Property

    '...

End Class 
```

然后从您要设置图像的表单/位置调用（您可以在此处同时使用`Bitmap`和`Image`对象）：

```
destForm.SetImage = myBitmap 
```

您可以选择在属性上使用参数来设置填充模式等（此示例中未显示）。

# jquery - 取 href 值，存储在变量中并删除 http://

> ID：13165571
> 
> 赞同：1
> 
> 时间：2012-10-31T18:45:44.117
> 
> 标签：jquery, string, variables, href

我整个下午都在试穿试穿，没有运气。我需要做的是获取`href=""`链接的值并将其存储在新变量或新属性中（在 内部`a`），但`http://`事先已将其删除。这将使`href`值保持不变，以便它仍然指向链接，但我也有一个没有 http:// 的版本。

到目前为止，这是我尝试过的代码：

```
$("a[href]").each(function() {
    var link = $(this).replace('http://', '');
}); 
```

我认为这是正确的，但我不太擅长 jQuery 或 JS，所以如果有人能完成它/从头开始，我将非常感激 :)

最终，我希望能够将没有 http:// 的链接放入 的伪元素中 `a`，使用`a:before`.

我也有一个[jsfiddle](http://jsfiddle.net/dSHH4/)。

非常感谢任何帮助我的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:52:56.857

只需使用`this.href`而不是`$(this)`.

如果你想处理`https`好`http`，你可以使用正则表达式：

```
var link = this.href.replace(/^https?:\/\//, ''); 
```

此外，由于您想在`:after`伪元素中显示此值，请存储`link`在数据属性中。这样，您可以直接从 CSS 中获取值：

```
$("a[href]").each(function() {
    var link = this.href.replace(/^https?:\/\//, '');

    $(this).attr('data-href', link);
}); 
```

然后将您的 CSS 更改为：

```
a:before {
    content: 'This link goes to ' attr(data-href); 
```

**演示：http: [//jsfiddle.net/dSHH4/1/](http://jsfiddle.net/dSHH4/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T18:50:22.517

a[href] 不选择 href 属性，它选择具有此属性的元素，因此您必须调用属性手册：

```
$("a[href]").each(function() {
        var link = $(this).attr('href').replace('http://', '');
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T19:00:39.550

简单我会这样做：

```
<script type="text/javascript">
    $(function() {
        var withhref = $("a").attr("href"); alert(withhref);
        var withouthref = $("a").attr("href").replace("http://","");  alert(withouthref);

    })
    </script> 
```

[演示](http://jsfiddle.net/4bbdj/)

# objective-c - 为什么我的班级用错误代码 138 使我的 OCUnit 测试用例崩溃？

> ID：13165581
> 
> 赞同：1
> 
> 时间：2012-10-31T18:46:21.027
> 
> 标签：objective-c, ios, unit-testing, ocunit

我编写的一个类使我的测试用例崩溃，错误代码为 138。该类返回一个 NSString，其中包含来自 UIWebView 的用户代理字符串：

```
@interface MyWebViewUserAgent : NSObject <UIWebViewDelegate> {
    NSString* userAgent;
    UIWebView* webView;
}

- (NSString*) userAgentString;

@end

#import "MyWebViewUserAgent.h"

@implementation MyWebViewUserAgent

- (NSString*) userAgentString {
    if (userAgent != nil) return userAgent;

    webView = [[UIWebView alloc] init];
    webView.delegate = self;
    [webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @"http://127.0.0.1"]]];

    // Wait for the web view to load our bogus request and give us the secret user agent.
        while (userAgent == nil) {
        // This executes another run loop. 
        [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate distantFuture]];
    }

    NSString *currentDeviceType = [[UIDevice currentDevice] model];
    NSRange range = [userAgent rangeOfString:currentDeviceType];

    if (range.location == NSNotFound) {

        // Should only happen when iPhone-targeted app is running on an iPad.
        NSRange rangeToReplace = [userAgent rangeOfString:@"iPhone;"];
        if (rangeToReplace.length > 0) {
            userAgent = [userAgent stringByReplacingCharactersInRange:rangeToReplace withString:@"iPad;"];
        }
    }
    return userAgent;
}

- (BOOL) webView: (UIWebView*) web_view shouldStartLoadWithRequest: (NSURLRequest*) request navigationType: (UIWebViewNavigationType) navigation_type {
    userAgent = [request valueForHTTPHeaderField: @"User-Agent"];
    [webView release];
    return NO; // Return no, we don't care about executing an actual request.
}

- (void) dealloc {
    [super dealloc];
}

@end 
```

现在，这是我的测试用例：

```
#import <SenTestingKit/SenTestingKit.h>
#import <UIKit/UIKit.h>
#import "MyWebViewUserAgent.h"

@interface MyUnitTests : SenTestCase {
    MyWebViewUserAgent *ua;
}

@end

@implementation MySDKUnitTests

- (void)setUp
{
    [super setUp];
}

- (void)tearDown
{
    // Tear-down code here.
    [super tearDown];
}

- (void)testUserAgentString {
    ua = [[MyWebViewUserAgent alloc] init];
    STAssertNotNil(ua, @"User agent object is nil.");
    STAssertNotNil([ua userAgentString], @"user agent string is nil");
    [ua release];
}

@end 
```

`STAssertNotNil`测试中的第一个`testUserAgentString`工作正常，但第二个`STAssertNotNil`是使测试崩溃的行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:42:51.333

您的项目没有为单元测试正确设置。尝试[检查这些设置](https://stackoverflow.com/questions/12546238/unit-tests-fail-then-dont/12624873#12624873)。如果失败，请尝试创建一个新项目，选择“包含单元测试”。

# ruby-on-rails - 基于 STI 类型的 Rails 多态视图和操作

> ID：13165588
> 
> 赞同：1
> 
> 时间：2012-10-31T18:46:37.617
> 
> 标签：ruby-on-rails, ruby

这似乎是一个类似的问题，但两年后的答案可能会有所不同：[Rails way to render different actions & views based on user type?](https://stackoverflow.com/questions/3542928/rails-way-to-render-different-actions-views-based-on-user-type)

我有一个可以有多种类型的 STI 模型。通常，但并非总是如此，视图会因类型而异。同样，控制器操作的逻辑可能因类型而异。我想避免必须根据类型更改 if/elsif 条件的高维护成本。

我可以想出几种方法来编写一些辅助函数/模块来使这更容易，但想知道是否已经存在为此目的构建的任何 gem。

您的想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:21:02.027

只要在路由文件中声明它们，就可以为不同的 STI 类型创建单独的控制器。IE。

```
Base < ActiveRecord::Base
end

Foo < Base
end

Bar < Base
end

#config/routes.rb
resources :foos
resources :bars 
```

然后你只需要为它们各自的方法/视图生成一个控制器`foo`和一个控制器。`bar`

对于常见元素，您可以使用局部视图和基本模型。（您也许也可以以某种方式使用 Base 控制器。不过我不确定）

# facebook - 通过客户端软件使用用户名/密码访问 Facebook api

> ID：13165589
> 
> 赞同：3
> 
> 时间：2012-10-31T18:46:37.623
> 
> 标签：facebook, oauth

是否可以通过直接昵称/密码连接以编程方式访问 fb api？如果没有，在保持它是一个真正的客户端应用程序（没有服务器在任何地方运行）的同时如何连接到 api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:52:17.937

不; 您需要使用支持的 OAuth[登录](https://developers.facebook.com/docs/concepts/login/)流程之一 - 尽管那里有与桌面应用程序兼容的流程，这里有一个示例：[https ://developers.facebook.com/docs/howtos/login/login-for-desktop/](https://developers.facebook.com/docs/howtos/login/login-for-desktop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T23:15:48.530

这行得通:) 这是一个丑陋的黑客，它取决于[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)页面的内容，但它确实有效。那么为什么没有标准化的方法呢？

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.client.utils.URLEncodedUtils;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.DomNode;
import com.gargoylesoftware.htmlunit.html.HtmlAnchor;
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;

public class Main {

    public static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException,
        URISyntaxException {

    Main m = new Main();
    m.dosth();
}

public void dosth() throws FailingHttpStatusCodeException, MalformedURLException, IOException, URISyntaxException {
    String accessToken = login(Credentials.username, Credentials.password);

    System.out.println(accessToken);

}

/**
 * @param username
 * @param password
 * @return facebook access token
 * @throws IOException
 * @throws MalformedURLException
 * @throws FailingHttpStatusCodeException
 * @throws URISyntaxException
 */
public String login(String username, String password) throws FailingHttpStatusCodeException, MalformedURLException,
        IOException, URISyntaxException {
    WebClient wc = new WebClient();
    wc.setCssEnabled(false);
    wc.setJavaScriptEnabled(false);
    HtmlPage page = wc.getPage("https://www.facebook.com");
    HtmlForm form = (HtmlForm) page.getElementById("login_form");
    form.getInputByName("email").setValueAttribute(username);
    form.getInputByName("pass").setValueAttribute(password);
    HtmlPage home = null;
    for (DomNode node : form.getDescendants()) {
        if (node instanceof HtmlSubmitInput) {
            home = ((HtmlSubmitInput) node).click();
            break;
        }
    }

    // assume log in worked out

    HtmlPage api = wc.getPage("https://developers.facebook.com/docs/reference/api/");
    HtmlAnchor a = api.getAnchorByText("https://graph.facebook.com/me/friends?access_token=...");
    URI href = new URI(a.getHrefAttribute());
    List<NameValuePair> params = URLEncodedUtils.parse(href, "utf-8");
    for (NameValuePair pair : params) {
        if (pair.getName().equals("access_token")) {
            return pair.getValue();
        }
    }
    return null;
}
} 
```

更新好吧，这实际上不像我想的那样工作，因为您只有在授予“开发者”应用程序权限后才能获得此令牌。

# php - 使用 simplexml 更改以命名空间为前缀的属性值

> ID：13165591
> 
> 赞同：0
> 
> 时间：2012-10-31T18:46:48.887
> 
> 标签：php, simplexml

我想使用 simplexml 更改以命名空间为前缀的属性的值：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16"> 
```

这些方法不起作用：

```
$usesSDKTag['android:minSdkVersion'] = $minSdkVersion;
$usesSDKTag['minSdkVersion'] = $minSdkVersion; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:14:41.987

我最终重新创建了节点并为其添加了带有命名空间前缀的属性：

```
if( isset($xmlManifest->{"uses-sdk"}) ) {
     unset($xmlManifest->{"uses-sdk"});
}
$usesSDKTag = $xmlManifest->addChild('uses-sdk');
$usesSDKTag->addAttribute('android:minSdkVersion', $minSdkVersion, 'http://schemas.android.com/apk/res/android');
$usesSDKTag->addAttribute('android:targetSdkVersion', $minSdkVersion, 'http://schemas.android.com/apk/res/android');
$usesSDKTag->addAttribute('android:maxSdkVersion', $maxSdkVersion, 'http://schemas.android.com/apk/res/android'); 
```

# c# - Windows 柱形图不显示图例

> ID：13165592
> 
> 赞同：1
> 
> 时间：2012-10-31T18:46:49.083
> 
> 标签：c#, charts, legend

```
BarGraph.Titles.Clear();
BarGraph.Titles.Add(cmbGraphOptions.SelectedItem.ToString());

Series series = new Series(seriesTitle);

series.ChartType = chartType == "Column" ? SeriesChartType.Column : SeriesChartType.Pie;
series.Palette = ChartColorPalette.EarthTones;

foreach (IGraphData t in mGraphVm.Data)
{
    if (t.XAxis != null && t.YAxis > 0)
    {
        series.Points.AddXY(t.XAxis, t.YAxis);
        series.Palette = ChartColorPalette.EarthTones;
        series.IsValueShownAsLabel = true;
        series.ToolTip = t.XAxis;
        series.Legend = "Legend1";
        series.IsVisibleInLegend = true;
    }
}
BarGraph.Series.Add(series); 
```

上面的代码显示了饼图和柱形图。但在柱形图的情况下，它不显示图例......而饼图确实正确显示了图例。

但是，对于柱形图..当我将代码更改为以下代码段时，它确实显示了图例，但这次它开始从中心而不是左侧绘制条形图。

```
foreach (IGraphData t in mGraphVm.Data)
{
    if (t.XAxis != null && t.YAxis > 0)
    {
        series = this.BarGraph.Series.Add(t.XAxis);
        series.Points.Add(t.YAxis);

        series.ToolTip = t.XAxis;
        series.IsValueShownAsLabel = true;

        //RnD
        //series.Points.AddXY(t.XAxis, t.YAxis);
        //series.Points.AddY(t.YAxis);

        //series.XValueMember = t.XAxis;
        //series.YValueMembers = t.YAxis.ToString();
    }
} 
```

我需要图表来绘制从左侧开始并带有图例的点。

任何帮助将非常感激。

# sql - 在 SQL Server 中，有没有办法从标识列中获取单个值并在同一范围内重复使用它？

> ID：13165594
> 
> 赞同：-2
> 
> 时间：2012-10-31T18:46:59.730
> 
> 标签：sql, sql-server, tsql, variables, select

在标题中很难说出这个问题。假设您有一个名为 Users 的表，假设它有一个名为“Id”的身份/主键列。假设您想在同一个事务中获取您所知道的只是一个属于相当特定的 WHERE 子句或其他内容的 Id 实例，然后在一个非常冗长的 SELECT 语句中重复回收它，然后立即执行。这可以在 SQL Server 中完成吗？基本上我要避免的是如下内容：

```
Dim id As Int32 = DBA.OneTimeQuery("SELECT Id FROM users <where clause>").Rows(0)(0)
Return DBA.OneTimeQuery("SELECT <a lot of different things, involving multiple sub
    -selects that have to pull from the variable id>")
'DBA.OneTimeQuery returns a DataTable 
```

我知道我可以通过回收第一个 where 子句来避免使用两个不同的连接或其他任何东西，但是即使是相同的连接和事务不断重新查找相同的确切信息也是非常浪费的。

我想避免让 Sql Server 多次从 Id 列中搜索该单个值，并且我还希望能够将它放在同一个 Sql 事务和连接中。如何才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:48:51.923

您可以在存储过程中执行此操作。您将 ID 存储在变量中并在需要时使用它：

```
DECLARE @MyID int

SET @MyID = (SELECT SomeID FROM MyUsers WHERE ... )

--now use @MyID

SELECT Foo.Bar, Foo.Rascal FROM MyTable WHERE UserID = @MyID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:52:52.087

为什么不能执行连接？

```
SELECT <Lengthy listing> 
FROM <Some Table> INNER JOIN Users 
ON <Some Property from Some table> = Users.Id 
WHERE <Your filter clause over the Users table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:49:13.540

将其存储在 SQL 变量中？

我已经构建了冗长的脚本，我首先在其中插入一条新记录，将插入的 ID 存储到一个变量中，然后在其余代码中重用该变量。

```
DECLARE @insertedID int;
INSERT INTO table1 ();

SET @insertedID = @@IDENTITY;

INSERT INTO table2 (table1ID) VALUES (@insertedID);
INSERT INTO table3 (table1ID) VALUES (@insertedID); 
```

等等

# caching - 为什么 ItemCount 下降，但没有被驱逐？

> ID：13165597
> 
> 赞同：1
> 
> 时间：2012-10-31T18:47:12.257
> 
> 标签：caching, appfabric

[我使用此处](http://msdn.microsoft.com/en-us/library/ff921021%28v=azure.10%29.aspx)指示的计数器运行 perfmon ，它从不显示任何东西被驱逐，但是当我在 powershell 中运行 Get-CacheStatistics 时，ItemCount 不断增加和减少。任何人都可以对这种看似奇怪的行为有所了解吗？

哦，是的，我的缓存也配置为 TimeToLive：10 分钟 CacheType：Partitioned Secondary：0 IsExpirable：False EvictionType：LRU NotificationsEnabled：True

基本上我不希望任何东西被驱逐，但如果它必须使用 LRU。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:39:42.110

我想我明白了，虽然我不明白为什么会这样。即使 IsExpirable 为假，似乎也不会忽略 TTL。事实证明，物品正在过期并没有被驱逐。

# iphone - IOS设置方向不起作用

> ID：13165601
> 
> 赞同：1
> 
> 时间：2012-10-31T18:47:33.277
> 
> 标签：iphone, ios, xcode, landscape, portrait

正如标题所描述的，我的应用 atm 中的方向存在很大问题。似乎我根本无法控制不同幻灯片中的方向。我尝试过以下事情并且在我的应用程序中有效/无效：

*   Xcode 拒绝在任何幻灯片上监听 shouldAutorotateToInterfaceOrientation 方法中给出的任何代码。

*   Xcode 拒绝收听每张幻灯片的 stoaryboad 中给出的任何设置。

*   Xcode 监听 info-plist 文件，但您只能从该文件中为应用程序中的所有视图/幻灯片设置方向。我想要一些幻灯片只允许横向模式和其他纵向模式。

我试图删除我的应用程序中的所有 UINavigationBars/Tabbars 并且实际上只使用 1 个单个 ViewController 作为初始 ViewController 并且问题仍然存在，只能从 info-plist 文件管理方向。基本上，该应用程序会重新听除调整方向设置的 info-plist 文件以外的任何内容？

我已经尽力理解这个问题，但我不能说我已经获得了更大的“啊哈时刻”，因为苹果提供的所有可能的调整设置的方法至少在我的应用程序中根本不起作用，伟大的苹果！....我们有没有其他人以前经历过这个问题或以前听说过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:34:02.110

`- (BOOL)shouldAutorotateToInterfaceOrientation:`在 iOS 6 中已弃用。

您应该覆盖`- (NSUInteger)supportedInterfaceOrientations`UIViewController 子类的方法。

例子：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;
} 
```

**编辑：**

如果您使用的是 UINavigationController，则还必须对其进行子类化，并实现上述逻辑。这是预期的功能。相关 StackOverflow 问答：

[iOS 6 错误：当导航控制器用作窗口根时未调用supportedInterfaceOrientations](https://stackoverflow.com/a/12893485/314042)

[iOS 6 旋转：supportedInterfaceOrientations 不起作用？](https://stackoverflow.com/a/12411651/314042)

[为不同的UIViewControllers设置不同的supportedInterfaceOrientations](https://stackoverflow.com/a/12602243/314042)

# java - 如何嗅探 Java 应用程序的串行连接

> ID：13165607
> 
> 赞同：0
> 
> 时间：2012-10-31T18:48:05.290
> 
> 标签：java, python, serial-port, pyserial

我正在尝试发现 Java 应用程序的连接参数。根据Java app上的状态栏，连接值为：com1, 4800-baudrate, 8-eightbits, 1-stopbits, e-parity)。但是，当使用 pySerial 连接到设备（嵌入式 Linux 设备 -Ubuntu）时，我收到拒绝访问响应。我觉得 com1 正在与端口号或其他东西一起使用。无论如何，这是我正在使用的：

```
import serial
import time

ser = serial.Serial(
       port='COM1',
       baudrate=4800,
       parity=serial.PARITY_EVEN,
       stopbits=serial.STOPBITS_ONE,
       bytesize=serial.EIGHTBITS)

ser.open()
ser.isOpen()

print ser.baudrate() 
```

错误：

```
Traceback (most recent call last):
File "C:\Users\me\Desktop\file.py", line 12, in <module>
ser.open()
File "C:\Python27\lib\site-packages\serial\serialwin32.py", line 56, in open
raise SerialException("could not open port %s: %s" % (self.portstr, ctypes.WinError()))
SerialException: could not open port COM1: [Error 5] Access is denied. 
```

我感谢提供的任何帮助和/或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:27:32.123

如果已经打开，则无法打开（尝试使用任何软件拆分 com 端口） `serial splitter` 如果您有 2 个串行端口，请用电缆制作嗅探器...

此致

# cocoa-touch - Cocos2d：如何让精灵的子类在触摸时调用选择器？

> ID：13165610
> 
> 赞同：0
> 
> 时间：2012-10-31T18:48:08.460
> 
> 标签：cocoa-touch, cocos2d-iphone, sprite

如何让精灵的子类在触摸时调用选择器？

我希望 Sprite 对触摸做出反应并在触摸结束时调用选择器。我知道如何让它对触摸做出反应，但我不知道如何指定我应该调用哪个选择器。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:16:30.670

您的意思是您希望能够在精灵上设置目标和选择器吗？

您可以通过设置将目标和选择器存储在实例变量中的方法来做到这一点。

```
__weak id _target;
SEL _selector;

-(void)setTarget:(id)target andSelector:(SEL)selector
{
     _target = target;
     _selector = selector;
}

-(void)ccTouchesEnded...
{
    [_target performSelector:_selector];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:58:19.487

在图层中，首先启用触摸并添加 ccTouchesBegan 来跟踪触摸。

```
self.isTouchEnabled = YES; 
```

您可以使用此功能来查找触摸。

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint touchLocation = [myTouch locationInView:[myTouch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL:location];

    if(CGRectContainsPoint([sprite boundingBox], touchLocation) )
    {
        [sprite youTouched];
    }
} 
```

# java - 如何确定哪些行在可滚动的 JTextArea 中可见？

> ID：13165617
> 
> 赞同：10
> 
> 时间：2012-10-31T18:48:21.643
> 
> 标签：java, swing, user-interface, jtextcomponent

如何确定可滚动 JTextArea（JScrollPane 中的 JTextArea）中第一条可见行的数量和当前可见的行数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T22:24:46.143

有趣的问题花了我一段时间，但我认为我有一个非常有效的答案。然而，可能有一些更好的方法；随时发表评论以改进答案。

策略：

1.  使用 FontMetrics 和 getVisibleRect() 查找哪些行可见
2.  查找可见行的内容。

所以，我的想法是我们应该从可见的矩形开始。基于此，我们可以找出第一个可见的垂直偏移量（`getVisibleRect().y`）和可见垂直偏移量的结束（`getVisibleRect().y+getVisibleRect().height`）。一旦我们有了它，通过使用字体的高度，我们可以确定哪些行是可见的。

第二部分是找出这些行包含什么。这是我使用[`Utilities`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html)并`getRowStart()`发挥`getRowEnd()`作用的地方。

这是我详细说明的示例代码（当您调整框架大小或滚动文本区域时，结果将输出到控制台）：

```
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.text.BadLocationException;
import javax.swing.text.Utilities;

public class TestTextAre {

    private void initUI() {
        JFrame frame = new JFrame(TestTextAre.class.getSimpleName());
        final JTextArea ta = new JTextArea(5, 25);
        ta.setText("Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has "
                + "been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of "
                + "type and scrambled it to make a type specimen book.\n It has survived not only five centuries, but also the "
                + "leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the"
                + " release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing "
                + "software like Aldus PageMaker including versions of Lorem Ipsum.");
        ta.setColumns(20);
        ta.setEditable(false);
        ta.setLineWrap(true);
        ta.setWrapStyleWord(true);
        JScrollPane scrollpane = new JScrollPane(ta);
        scrollpane.getVerticalScrollBar().addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                if (e.getValueIsAdjusting()) {
                    return;
                }
                printTAVisibleInfo(ta);
            }
        });
        frame.add(scrollpane);
        frame.addComponentListener(new ComponentAdapter() {
            @Override
            public void componentResized(ComponentEvent e) {
                printTAVisibleInfo(ta);

            }

        });
        frame.pack();
        frame.setVisible(true);
    }

    private void printTAVisibleInfo(final JTextArea ta) {
        List<Row> taInfo = getTAInfo(ta);
        int y1 = ta.getVisibleRect().y;
        int y2 = y1 + ta.getVisibleRect().height;
        int lineHeight = ta.getFontMetrics(ta.getFont()).getHeight();
        int startRow = (int) Math.ceil((double) y1 / lineHeight);
        int endRow = (int) Math.floor((double) y2 / lineHeight);
        endRow = Math.min(endRow, taInfo.size());
        System.err.println(startRow + " " + endRow);
        for (int i = startRow; i < endRow; i++) {
            System.err.println(taInfo.get(i) + " is visible");
        }
    }

    private List<Row> getTAInfo(final JTextArea ta) {
        List<Row> taInfo = new ArrayList<TestTextAre.Row>();
        int start = 0;
        int end = -1;
        int i = 0;
        try {
            do {
                start = Utilities.getRowStart(ta, end + 1);
                end = Utilities.getRowEnd(ta, start);
                taInfo.add(new Row(i, start, end, ta.getDocument().getText(start, end - start)));
                i++;
            } while (end < ta.getDocument().getLength());

        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return taInfo;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTextAre().initUI();
            }
        });
    }

    public static class Row {
        private final int row;
        private final int start;
        private final int end;
        private final String text;

        public Row(int row, int start, int end, String text) {
            super();
            this.row = row;
            this.start = start;
            this.end = end;
            this.text = text;
        }

        public int getRow() {
            return row;
        }

        public int getStart() {
            return start;
        }

        public int getEnd() {
            return end;
        }

        public String getText() {
            return text;
        }

        @Override
        public String toString() {
            return "Row " + row + " contains " + text + " (" + start + "," + end + ")";
        }
    }

} 
```

如果您还有一个水平滚动条，我想您应该能够使用`FontMetrics.stringWidth()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T01:15:21.553

好的，这是我对这个问题的看法......（虽然很好的问题）

![在此处输入图像描述](../Images/c92cae8b858c2eb01943ff06e34865b3.png)

对于此解决方案，您需要考虑一个小问题。它将返回部分显示的行。

```
public class TestTextArea {

    public static void main(String[] args) {
        new TestTextArea();
    }

    public TestTextArea() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestTextAreaPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestTextAreaPane extends JPanel {

        private JTextArea textArea;
        private JTextArea viewText;

        public TestTextAreaPane() {
            setLayout(new GridLayout(2, 1));
            textArea = new JTextArea(20, 100);
            textArea.setWrapStyleWord(true);
            textArea.setLineWrap(true);
            textArea.setText(loadText());

            viewText = new JTextArea(20, 100);
            viewText.setWrapStyleWord(false);
            viewText.setLineWrap(false);
            viewText.setEditable(false);

            JScrollPane scrollPane = new JScrollPane(textArea);
            add(scrollPane);

            add(viewText);

            scrollPane.getViewport().addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    if (textArea.getText().length() > 0) {
                        JViewport viewport = (JViewport) e.getSource();
                        Rectangle viewRect = viewport.getViewRect();

                        Point p = viewRect.getLocation();
                        int startIndex = textArea.viewToModel(p);

                        p.x += viewRect.width;
                        p.y += viewRect.height;
                        int endIndex = textArea.viewToModel(p);

                        if (endIndex - startIndex >= 0) {

                            try {
                                viewText.setText(textArea.getText(startIndex, (endIndex - startIndex)));
                            } catch (BadLocationException ex) {
                                ex.printStackTrace();
                                viewText.setText(ex.getMessage());
                            }

                        }

                    }

                }
            });

        }

        protected String loadText() {
            String text = null;
            File file = new File("src/testtextarea/TestTextArea.java");

            BufferedReader br = null;
            try {
                br = new BufferedReader(new FileReader(file));
                StringBuilder sb = new StringBuilder(128);
                String read = null;
                while ((read = br.readLine()) != null) {
                    sb.append(read).append("\n");
                }

                text = sb.toString();
            } catch (IOException exp) {
                exp.printStackTrace();
            } finally {
                try {
                    br.close();
                } catch (Exception e) {
                }
            }

            return text;
        }
    }
} 
```

# symfony - Symfony通过yaml可配置的实体路径？

> ID：13165622
> 
> 赞同：1
> 
> 时间：2012-10-31T18:48:58.967
> 
> 标签：symfony, doctrine, yaml

我做了一个基本的捆绑包。在我的包中，我的 Doctrine 实体之一*需要*扩展，所以我需要知道如何加载我的包的用户创建的实体。

我看到其他捆绑包在做一些事情，例如：

```
my_bundle:
    product_class: Acme\MyBundle\Entity\Product 
```

然后做类似的事情：

```
$product = $this->container->get( 'my_bundle.product_manager' ); // somehow uses the yaml value for my_bundle.product_class
$product->setName( 'test' );
$product->save( ); 
```

似乎这些捆绑包正在以某种方式将 YAML 转换为可用的学说实体。他们是如何做到这一点的以及最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:29:36.603

通过使用 Symfony 文档中的服务工厂解决了这个问题。我将用户的参数传递给工厂，它作为存储库工作得很好。

# java - Java 小程序在全屏模式下的性能优势？

> ID：13165624
> 
> 赞同：2
> 
> 时间：2012-10-31T18:49:08.810
> 
> 标签：java, applet, awt, fullscreen

我以前用 Java 制作过游戏，现在正在尝试我的第一个 Applet。我的计划是让我的小程序在用户调整窗口大小时调整大小以适应窗口。我想知道如果将浏览器置于全屏模式（F11 for chrome），是否有可能从 Java Applet 中的“页面翻转”中获得性能提升？我计划稍微宣传一下，通过在大多数浏览器中按 F11 可以像“全屏”一样玩游戏 - 所以我希望它会有一些用处......我只是想知道是否有可能获得当常规 Java 应用程序进入全屏模式时，我可以在 Applet 中获得一些相同的性能优势。

我猜测这是不可能的，原因如下：我认为浏览器无法检测到页面中的 Applet 处于“全屏”状态并直接访问显示器的硬件，其次。 .. 我不认为大多数浏览器会选择将它传递给小程序。

任何人都知道浏览器是否在全屏情况下对页面进行任何特殊控制？

另一方面，Applet 是否有可能超越浏览器的上下文变成全屏显示？

# c# - 确定最高值的有效方法（有或没有偏移）

> ID：13165625
> 
> 赞同：1
> 
> 时间：2012-10-31T18:49:09.600
> 
> 标签：c#, algorithm, sorting, data-structures, sortedlist

我目前正在循环中使用 SortedList 以降序对某些值进行排序：

```
for(...)
{
    float rawValue;
    float offset;
    sortedList.Add(rawValue + offset, index);
} 
```

我有兴趣找出`sortedList[0]`（即具有最高 rawValue+offset 的条目）是否也是最高条目，如果我们按照它们的原始值对条目进行排序，而没有偏移量？

显而易见的解决方案是在同一个循环中填充另一个 sortedRawValuesList，但我认为有更快、更高效的方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:52:39.303

您不能在迭代时简单地跟踪最高的 rawValue 吗？如果偏移量在每次迭代中发生变化，您可能还想保存偏移量。

```
float highestRawVal = float.MinVal;
float offset_ForHighestRawVal = float.MinVal;
for(...)
{
    float rawValue;
    float offset;
    sortedList.Add(rawValue + offset, index);
    if(highestRawVal < rawVal)
    {
        highestRawVal = rawValue;
        offset_ForHighestRawVal = offset;
    }
}

if (highestRawVal + offset_ForHighestRawVal == sortedList[0])
    Console.WriteLine("They Match"); 
```

然后你可以简单地检查它们是否匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:57:14.223

将一堆值添加到 a`SortedList`只是为了对数据进行排序是相当低效的。您实际上是在进行“插入排序”，即 O(n^2)。最广泛使用的排序算法是 O(n*log(n))。

最重要的是，如果您只需要最大值，您可以只循环一次数据并在 O(1) 时间内计算最大值。

要找到最大值，只需使用 LINQ 的`Max`函数：

```
IEnumerable<X> data = ...;

float max = data.Max(item => doSomeComputation(item)); 
```

要获取生成最大值的项目，您可以使用 MaxBy。（不幸的是 .NET 不直接发布它，您需要自己编写/添加它。）

```
X maxItem = data.MaxBy(item => doSomeComputation(item));

public static TSource MaxBy<TSource, TKey>(this IEnumerable<TSource> source
    , Func<TSource, TKey> selector
    , IComparer<TKey> comparer = null)
{
    if (comparer == null)
    {
        comparer = Comparer<TKey>.Default;
    }
    using (IEnumerator<TSource> iterator = source.GetEnumerator())
    {
        if (!iterator.MoveNext())
        {
            throw new ArgumentException("Source was empty");
        }

        TSource maxItem = iterator.Current;
        TKey maxValue = selector(maxItem);

        while (iterator.MoveNext())
        {
            TKey nextValue = selector(iterator.Current);
            if (comparer.Compare(nextValue, maxValue) > 0)
            {
                maxValue = nextValue;
                maxItem = iterator.Current;
            }
        }
        return maxItem;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T18:52:22.790

为什么不简单地利用 LINQ 为您做这种事情呢？

```
var sortedList = // Get List

var withOffsets = sortedList.Select(x => new { Original = x, Offset = x + offset }).OrderBy(x => x.Offset);

if(sortedList.First() == withOffsets.First())
   // True! 
```

# php - 在 PHP 中使用 PDO

> ID：13165627
> 
> 赞同：1
> 
> 时间：2012-10-31T18:49:16.337
> 
> 标签：php, mysql, pdo

我在这里发现了很多与 MySQL 和设计查询有关的问题，我们总是告诉他们的第一件事是“不要使用 mysql_* 函数 - 它们已被弃用”。所以我想我会添加一个在你的 PHP 程序中设置 PDO 连接的快速指南，以便我们可以在这里推荐新的 PHP 开发人员，并帮助他们的程序更安全。

那些在 PHP 和 PDO 方面的经验，请随时编辑并在必要时添加，以使其对 PDO 的初学者更有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:49:16.337

**第 1 步：** *设置新的 PDO 连接*

这并不像有时想象的那么难。首先，您可以找到那些 mysql_connect/mysql_select_db 并用以下代码替换它们：

```
//Obviously, replace these with your own values
$host = 'host_name';
$dbname = 'database_name';
$user = 'user_name';
$pass = 'user_pass';
try
{
    $DB = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
}
catch(PDOException $e)
{  
    echo $e->getMessage();  
} 
```

这将创建您的 PDO 对象，该对象具有 mysql_* 调用的所有相同功能，然后是一些。

**第 2 步：** *提交查询*

一旦你有了你的 PDO 对象，你就可以开始使用它来查询你的数据库。我们将首先看一个基本的选择查询，因为我们将使用的技术在大多数查询类型中都是相似的。现在，您可以直接查询，但这会带走 PDO 的一些功能。相反，我们可以使用准备好的语句。通过这样做，PDO 将为我们防止注入甚至意外的查询破坏。这是一个例子：

```
$query = "SELECT * FROM table_name WHERE col1=':value1' AND col2=':value2'";
$statement = $DB->prepare($query);
$statement->execute(array(':value1' => 1, ':value2' => 2)); 
```

此时，我们已经查询了数据库，并且有一个包含结果的语句对象。这里的好处是，代替执行语句中的 1 或 2，我们可以使用用户生成的值，甚至无需检查 SQL 注入尝试，因为 PDO 会捕获它们并自动修复它们。（尽管如此，您仍然应该在使用用户生成的值之前检查它们是否存在。）

**第 3 步：** *检索结果*

现在，我们需要获取我们正在搜索的数据，以便我们可以使用它。使用 PDO 非常简单，您只需要调用 fetch 命令，就像您之前使用*mysql_fetch_array()*命令一样。您还需要将它包含在 while 循环中以检索所有结果，因为它的行为几乎与*mysql_fetch_array()*相同。

```
//You can use several options in fetch, to determine what kind of results you get.
//PDO::FETCH_ASSOC -> gives you column names as the array indices
//PDO::FETCH_NUM   -> Gives you the column number as the indices
// By default, it uses PDO::FETCH_BOTH which does both.
while($row = $statement->fetch(PDO::FETCH_ASSOC))
{
     echo "Col1: " . $row['col1'] . "<br />";
     echo "Col2: " . $row['col2'] . "<br />";
     echo "Col3: " . $row['col3'] . "<br />";
     echo "Col4: " . $row['col4'];
} 
```

显然，这是一个非常简单的布局，但是您可以看到它是如何工作的，并且可以根据您的需要对其进行修改。这与您当前的 mysql_* 代码完全相同，只是它以更简单更安全的方式进行。

**第 4 步：** *可能性*

从这里，您可以看到如何替换您的基本 mysql_* 函数。您也可以用 PDO 调用替换所有其他 mysql 函数，例如：

**mysql_num_rows()** == *$statement->rowCount()*（在你执行查询后使用） **mysql_real_escape_string()** ==*你甚至不再需要这个了！*
**mysql_insert_id()** == *$statement->lastinsertid()*

PHP 的 PDO 使用的权威指南可以在这里找到：http:
[//us3.php.net/manual/en/book.pdo.php](http://us3.php.net/manual/en/book.pdo.php)

这是一个关于 mysqli 与 PDO 优缺点的问题：
[mysqli 或 PDO - 优缺点是什么？](https://stackoverflow.com/q/13569/1507210)

# asp.net - 四位数字的正则表达式 ASP.Net

> ID：13165631
> 
> 赞同：0
> 
> 时间：2012-10-31T18:49:24.147
> 
> 标签：asp.net, regex

我一直在寻找用于在 ASP.Net 中的文本框上使用的正则表达式来验证四位数字。

四位数字一分为二，第一位数字需要为 0 - 9，数字的最后一部分可以是 001 到 365。因此，您可以是 1001 或 0365，这将是有效数字。基本上，它是日期代码，数字的第一部分或第一个数字是年份，最后一部分是日/月，所以 001 是 1 月 1 日或 365 是 12 月 31 日。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:53:47.413

使用正则表达式验证数字范围有点棘手但可能：

```
^[0-9](00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-5])$ 
```

我建议你这样做，是这样的：

```
^[0-9]([0-9]{3})$ 
```

然后您获取第一个捕获的匹配项（仅包含最后三位数字）并检查它是否大于`0`和小于`366`：

```
Match m = Regex.Match(input, @"^\d(\d{3})$");
int day = int.Parse(m.Groups[1].Value);
if(day > 0 && day < 366)
   // valid
else
   // invalid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:56:11.753

我同意@greg，这不是正则表达式的适当用途。但是由于位数是固定的，所以真的不难做到：

```
^\d([12]\d\d|3[0-5]\d|36[0-5]|0\d[1-9]|0[1-9]\d)$ 
```

无需转换为 int 进行验证。

翻译：第一个数字可以是任何东西；它后面必须跟任何 3 位数字： 以 1 或 2 开头；或以 3[0-5] 开头；或以 36 开头，最多为 365；或以 0 开头并且有一个非零数字（感谢@m.buettner！）

*注：*在上面，`\d`表示“数字”。在 .NET 上，您可以替换`[0-9]`每个`\d`.

奖励：要允许闰年有 366 天，只需将上述值翻倍并将其设置为第一位。如果 2 表示 2012 年，0 表示 2020 年，闰年数字为 2,6,0，您有：

```
^([1345789]([12]\d\d|3[0-5]\d|36[0-5]|0\d[1-9]|0[1-9]\d)|[260]([12]\d\d|3[0-5]\d|36[0-6]|0\d[1-9]|0[1-9]\d))$ 
```

是的，已经失控了。如果您可以转换为 int 并进行检查，请执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T18:58:13.067

我同意格雷格的观点。您可以验证该条目是否为数字并且基本上符合您的规范，但您仍需要在验证格式后以编程方式进行检查。

一个正则表达式是 /^[0-9]{1}[0-3]{1}[0-9]{2}$/

然后你必须分开最后三位数字并进行验证。

www.regextester.com 非常适合快速尝试表达式。www.regexlib.com 是一个很好的存储库，包含大量用户提交的正则表达式字符串。

# android - 解锁屏幕的替代方案

> ID：13165636
> 
> 赞同：0
> 
> 时间：2012-10-31T18:49:41.627
> 
> 标签：android

我正在开发一个需要在某个时刻解锁手机的应用程序，我知道这可以通过使用 KeyguardManager 来完成，[这](https://stackoverflow.com/questions/3908337/problem-with-keyguardmanager)是一种方法，但我使用的是 API 16，AndroidLint 告诉我这是已弃用。那么，在最新的 API 中是否有任何新的方法来处理这个问题？

# doctrine - DoctrineExtensions(Beberlei) 不起作用 - 教义 2

> ID：13165637
> 
> 赞同：3
> 
> 时间：2012-10-31T18:50:02.447
> 
> 标签：doctrine, doctrine-orm, dql, doctrine-extensions

我安装了[Beberlei DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)但无法让 mysql DAY 和 YEAR 工作。

我的自动加载器中有这个：

```
$doctrineExtensions = new Doctrine\Common\ClassLoader('DoctrineExtensions', ROOT.DS.'library');
$doctrineExtensions->register(); 
```

当我尝试执行以下 dql 语句时

```
 SELECT YEAR(e.eventdate) FROM \Entities\Event e 
```

**我收到以下错误：**错误：预期的已知函数，在 /usr/local/lib/php/Doctrine/ORM/Query/QueryException.php:42 中获得了“YEAR”

在我的文件顶部，我有

```
use \DoctrineExtensions\Query\Mysql; 
```

如果我输入，我可以看到它可以找到类：

```
 $test = \DoctrineExtensions\Query\Mysql\Year::getSql(); 
```

但如果我输入

```
 $test = Year::getSql(); 
```

似乎缺少一些实现，但无法找出问题所在..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-04T16:31:31.813

请注意，`Doctrine\Common\ClassLoader`现在已弃用其他答案中使用的内容。

正确的方法是这样的：

```
use DoctrineExtensions\Query\Mysql\Year;
...
$config = new \Doctrine\ORM\Configuration();
// Can also be:
// $config = \Doctrine\ORM\Tools\Setup::createConfiguration();
// Or:
// $config = \Doctrine\ORM\Tools\Setup::createAnnotationMetadataConfiguration([...]);
$config->addCustomDateTimeFunction('YEAR', Year::class); 
```

您还可以使用完全限定的类名从配置文件加载`Doctrine\ORM\Configuration` `setCustomDateTimeFunctions([...])`，如下所示：

```
doctrine:
  orm:
    dql:
      datetime_functions:
        year: DoctrineExtensions\Query\Mysql\Year
        month: DoctrineExtensions\Query\Mysql\Month 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-18T22:11:28.877

您需要注册该功能：

```
$classLoader = new \Doctrine\Common\ClassLoader('DoctrineExtensions');
$classLoader->register();
...

$config = $this->getEntityManager()->getConfiguration();
$config->addCustomDatetimeFunction('YEAR', 'DoctrineExtensions\Query\Mysql\Year'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-20T14:25:42.827

有点晚了 :) 但它会帮助像我这样从客户那里获得旧项目的其他人。

您必须注册 DoctrineExtension 目录的命名空间：

```
$classLoader = new \Doctrine\Common\ClassLoader('DoctrineExtensions', APPPATH . 'libraries/vendor/beberlei');
$classLoader->register(); 
```

现在，当您`DoctrineExtensions`从 composer 获取时，它位于`src`目录下，因此只需向上移动`src`目录的内容（在 下`DoctrineExtensions`）并将所需的扩展名添加到 config ：

```
$config->addCustomDatetimeFunction('YEAR', 'DoctrineExtensions\Query\Mysql\Year'); 
```

# asp.net - 在 ASP.NET 上工作时如何确保服务器正在处理处理而不是客户端

> ID：13165640
> 
> 赞同：0
> 
> 时间：2012-10-31T18:50:19.840
> 
> 标签：asp.net, client-server

我有一个问题，用户可以转到一个页面，单击一个按钮来启动任何给定的过程，通常涉及在数据库中插入或更新数据，这可能需要一些时间，但如果用户离开页面进程停止并且没有按预期完成。所有代码都在代码后面，据我所知，应该由服务器而不是客户端处理。所以我的问题是，我必须做些什么来确保如果用户登录网站、启动一个流程并完全离开网站，该流程仍将按应有的方式完成？

# java - 如何使用带参数的随机类？

> ID：13165645
> 
> 赞同：0
> 
> 时间：2012-10-31T18:50:29.920
> 
> 标签：java, parameters

如何使用随机类创建参数？我这样做，但它发出一条错误消息。

```
import java.util.Random;

public class DiceSimulation { 
    public static void main(String[] args)
    {
          final int NUMBER = 10000;

         Random generator = new Random();

         int die1Value; int die2Value; int count = 0; int snakeEyes = 0; 
         int twos = 0; int threes = 0; int fours = 0; int fives = 0; 
         int sixes = 0;

         while (count < NUMBER) {

              die1Value = generator.nextInt(1, 6); 
              die2Value = generator.nextInt(1, 6);

              if (die1Value == die2Value)   { 
                    if(die1Value == 1) { snakeEyes++; } 
                    else if (die1Value == 2) { twos++; } 
                    else if (die1Value == 3) { threes++; } 
                    else if (die1Value == 4) { fours++; } 
                    else if (die1Value == 5) { fives++; } 
                    else if (die1Value == 6) { sixes++; }

              }     
              count++; 
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:53:16.767

语法不正确。请阅读[`Java Doc`](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)。您可以编写如下方法。

```
 public static int generateBetween(int number, int max) {
    Random random = new Random();
    int generated = random.nextInt(max - number);//<--Between so Max -Number
    return generated+number;//<--Add here number so that it will be between
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:54:00.260

这个语法是错误的：

```
 die1Value = generator.nextInt(1, 6); 
  die2Value = generator.nextInt(1, 6); 
```

`nextInt(int)`只接受一个参数，所以改变它如下：

```
 die1Value = generator.nextInt(7); //This will generate int between 0 & 6
  die2Value = generator.nextInt(7); //This will generate int between 0 & 6 
```

如果要生成基于范围的随机数，请使用一种解决方法，使用`nextDouble()`它生成介于`0.0`和之间的值，`1.0`如下所示：

```
die1Value= 1+ (int)(generator.nextDouble()*5);//This will generate int between 1&6
die2Value= 1+ (int)(generator.nextDouble()*5);//This will generate int between 1&6 
```

句法：

```
 die1Value = min+ (int)(generator.nextDouble()*(max-min));
  die2Value = min+ (int)(generator.nextDouble()*(max-min)); 
```

# c - 我可以检查一个指针是否已分配给 malloc 以外的东西吗？

> ID：13165647
> 
> 赞同：0
> 
> 时间：2012-10-31T18:50:41.663
> 
> 标签：c, pointers, null, malloc, string

将`char *`指针设置为 后`malloc(size)`，有没有办法检查它是否仍未更改？我认为指向未分配空间的指针将评估为`NULL`但显然不是：

```
char *string = malloc(500);
if(string==NULL) puts("Hello World");
else puts("It's not null"); 
```

我认为这应该输出`"Hello World"`，但事实并非如此。我如何检查字符串是否被类似的东西改变了，`strcpy()`或者`strcat()`，甚至与我自己的项目更相关，通过：

```
fgets(string, 499, fr) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:57:26.773

您似乎对`malloc()`NULL 的作用和作用有些困惑。

该`malloc()`函数分配空间，但不将空间初始化为任何值。from 的返回值`malloc()`是指向该空间（的第一个字节）的指针。除非您尝试分配零字节^(1 ，否则如果它无法分配与您要求的一样多的空间)²，则 from 的返回值`malloc()`只会是 NULL 。

因此，除非您的系统内存非常不足，否则您的程序不会打印“Hello World”。指针`string`将是一个有效的内存位置。

完全未定义的是`string`指向的数据。您必须以某种方式对其进行初始化，例如，使用：

```
strcpy(string, "Hello World"); 
```

现在您可以安全地执行以下操作：

```
printf("%s!\n", string); 
```

在初始化之前，读取内存是不“安全的”；无法保证您会在其中找到什么。您的程序不会崩溃，但所见即所得。

您还可以安全地使用：

```
if (fgets(string, 500, stdin) != 0)
    printf("Read: %s", string); 
```

注意`fgets()`为终端预留空间`'\0'`；您不必将空间缩小一个。

* * *

你问：

> 我如何检查是否`string`已被类似`strcpy()`or`strcat()`或 ...

对于大多数实际目的，您无法确定它是否已被修改，因为内存没有定义的内容。如果你真的想知道，你可能会这样做：

```
char *string_copy = malloc(500);
if (string_copy != NULL)
    memmove(string_copy, string, 500); 
```

复制分配的内存的原始内容，然后使用：

```
if (memcmp(string_copy, string, 500) != 0)
   ...someone changed either string or string_copy (or both)... 
```

这是相当薄的冰；分配空间中的值没有定义，但在实践中，我会惊讶地发现它不起作用。另一方面，我想不出我会对这种知识感兴趣的情况。如果我分配内存，是为了使用它——通常几乎是立即使用。

* * *

¹如果您分配零字节，您将获得两种实现定义的行为之一。要么你得到一个返回的 NULL 指针，要么你得到一个有效的、非 NULL 指针，指向与任何其他内存分配不同的零字节可访问内存（因此你不能安全地访问）。无论哪种方式，结果都可以安全地传递给`free()`. 如果您分配零字节，则任何通过返回的指针访问内存的尝试都会导致未定义的行为。

²请注意，在Linux上，你可以要求大量内存，`malloc()`并声称会为你分配，但你可能会发现，当你访问它时，它根本不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:52:39.550

你不能以一种可靠的、跨平台的方式。为什么不将返回的内存初始化`malloc()`为全零呢？然后你可以看看它是否被改变了。

在您的示例中，您正在测试指针本身的值，它将指向分配的内存。`malloc()`除非失败，否则不能为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T19:10:07.287

`After setting a char * pointer to malloc(size), is there a way to check if it's still not been changed?`

*   是的，几乎你在做什么，但你需要将指针指向`NULL`. 然后你就会知道它是否被`NULL`你的代码改变了。

`I thought that a pointer to unassigned space would evaluate to NULL`

`NULL`不，当您将其设置为时，指针的计算结果为`NULL`：

```
char *string = NULL;
if(string==NULL) puts("Hello World"); //Will execute this
else puts("It's not null");

string = malloc(500);  //Assuming this was successful

if(string==NULL) puts("Hello World");
else puts("It's not null");  //Now we'll execute this 
```

`I think this should output "Hello World" but it doesn't`

*   对，因为它不是`NULL`一个有效的指针值（假设`malloc()`是成功的）

`How can I check if string has been changed by something like strcpy() or strcat() or fgets()`

*   您无法从指针值中检查这一点，您需要自己跟踪字符串何时更改。[fgets()](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)`NULL`在失败的情况下返回，所以如果发生这种情况，你的字符串不会改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T18:56:20.357

这话是谁说的，`I thought that a pointer to unassigned space would evaluate to NULL but apparently not`？

后`char *string = malloc(500);`

`string`指向该分配空间的第一个字节或`heap`（除非分配以某种方式失败）因此您的`string`指针不是`NULL`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T19:00:40.377

将指针视为整数变量，其值为内存地址，因此如果指针为空，则表示该变量的实际值为不存在的地址空（由值 0 表示）。

当您编写类似`char *p = (char *)malloc(100);`您要求的内容时，编译器会找到 100 个字节的未使用空间并将 p 的值设置为该空间中第一个字节的地址。现在变量有一个值并且它不是 Null。

现在鉴于变量 p 本身与该地址之后的任何内存插槽（用 C 术语）是否更改无关**。**`p*`

# tcl - 在一个事件上绑定两个命令

> ID：13165649
> 
> 赞同：0
> 
> 时间：2012-10-31T18:50:59.457
> 
> 标签：tcl, tk

我想将一个动作绑定到两个命令，这些命令将一个接一个地完成。我尝试了以下语法：

```
$g marker bind $point <Button-1> [list $table HighLightCell 1 [expr [lindex $value 1] + 3] \; __highlight_selected $table $sparam $eyes sparam_eyes $graph] 
```

我也尝试了一些其他变体，但没有一个奏效。

`$g`是一个 blt 图，它像 Tk 中的普通绑定一样处理绑定。发生的情况是，Tcl 认为所有参数都是参数，`$table HighLightCell`并且不会将其解释`;`为一个命令的结尾和新命令的开始。

我不能使用`{...}`语法，因为我需要将变量放在命令中，而我无法使用`{...}`. 如何在不创建将调用这些命令的新 proc 的情况下放置 2 个将在事件发生时执行的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:24:21.723

即使我同意这种`proc`方式更好，您也可以尝试以下两种方式。

第一个是使用双引号进行分组，`"..."`类似于大括号，但允许变量扩展和命令替换。您的代码将类似于：

```
$g marker bind $point <Button-1> "$table HighLightCell 1 [expr [lindex $value 1] + 3] ; __highlight_selected $table $sparam $eyes sparam_eyes $graph" 
```

（请注意，分号不会被转义。）

第二个是使用`eval`, 并将两个命令的执行推迟到它。你可以试试这个：

```
$g marker bind $point <Button-1> [list eval $table HighLightCell 1 [expr [lindex $value 1] + 3] \; __highlight_selected $table $sparam $eyes sparam_eyes $graph] 
```

`eval`只需根据其参数形成的命令调用解释器。如果其中有分号，则命令将是两个。这一次必须对分号进行转义，因为它必须由 the`eval`而不是 before 解释。

我使用以下简单代码尝试了这两种方法，它们都有效：

```
set x 1
set y 2
pack [button .b1 -text Test1]
pack [button .b2 -text Test2]
bind .b1 <Button-1> "puts $x; puts $y"
bind .b2 <Button-2> [list eval puts $x \; puts $y] 
```

单击任一按钮会产生相同的结果，这是预期的

```
1
2 
```

还有一件事，最好将`expr`命令的参数放在大括号内，所以在你的代码中你应该替换

```
expr [lindex $value 1] + 3 
```

和

```
expr {[lindex $value 1] + 3} 
```

你不必担心`$value`变量的替换和`lindex`命令的执行：`expr`为你做这件事，但它也优化了执行。[您可以在 wiki ( http://wiki.tcl.tk/583](http://wiki.tcl.tk/583) ) 或`expr`手册页 ( [http://www.tcl.tk/man/tcl8.5/TclCmd/expr.htm](http://www.tcl.tk/man/tcl8.5/TclCmd/expr.htm) )中找到更多信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T21:01:30.357

`+`在下一个脚本的开头使用进行绑定，如下所示：

```
bind . <KeyPress-a> "puts one"
bind . <KeyPress-a> "+ puts two" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:14:30.833

该`list`命令只构造单个命令的调用。这就是它的作用（好吧，也可以建立列表，但这在这里无关紧要）。您想使用两个命令，因此您应该将分号（或换行符）放在生成分开的命令的两个调用*之外，如下所示：*`list`

```
$g marker bind $point <Button-1> [list \
        $table HighLightCell 1 [expr [lindex $value 1] + 3]
    ]\;[list \
        __highlight_selected $table $sparam $eyes sparam_eyes $graph] 
```

但是，我真的建议在这一点上使用一个小的帮助程序。从长远来看，它将为您节省很多困惑。

```
proc DoSomeHighlighting {table value sparam eyes sparam_eyes graph} {
    $table HighLightCell 1 [expr {[lindex $value 1] + 3}]
    __highlight_selected $table $sparam $eyes sparam_eyes $graph
}

# Can be a number of lines of code in here, of course

$marker bind $point <1> [list DoSomeHighlighting $table $value $sparam $eyes $sparam_eyes $graph] 
```

一旦您决定必须在运行时进行更多的值计算，这一点就变得尤为重要。

# c++ - 如何在不单击的情况下初始化 QComboBox 的默认值？

> ID：13165659
> 
> 赞同：4
> 
> 时间：2012-10-31T18:51:27.763
> 
> 标签：c++, qt

如何在不单击的情况下初始化 QComboBox 的默认值？我试过了

```
ui->combBox->setCurrentIndex(1); 
```

但是当我最初读取该值时，不幸的是**-1**并且仅在单击 QComboBox 后，它的值才变为**1**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T19:06:03.207

您确定 QComboBox 中至少有两个值吗？从 0 开始计数，而不是 1。如果要选择第一个值，则需要：

```
ui->combBox->setCurrentIndex(0); 
```

如果这不是问题，并且组合框中确实有两个值，那么请确保首先设置了 ui。这个调用需要先执行：

```
ui->setupUi(this); 
```

它实际上是用 .ui 文件中指定的值填充组合框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:18:53.263

我解决了这个问题。`ui->combBox->setCurrentIndex(1);`之前在构造函数中 .... `connect(ui->combBox,SIGNAL(currentIndexChanged(int))`@ *Nikos C.*非常感谢您的提示。

# windows - 如何使用 certmgr 在 Excel 中将证书添加到受信任的发布者？

> ID：13165665
> 
> 赞同：6
> 
> 时间：2012-10-31T18:51:45.237
> 
> 标签：windows, certificate

我试过了：

```
certmgrs /add myCert.cer /s /r localMachine root 
```

我已经尝试了几种变体，例如：`localMachine` `trustedPublishers`

每次我在命令行上尝试这个时，它只会加载 certmgr 实用程序窗口。我看不到这个命令行调用做任何事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T20:28:44.270

在命令行上执行此操作的最佳方法如下：

```
certutil -addstore "TrustedPublisher" certificate.cer 
```

这里的另一个答案在我的情况下不起作用。我必须通过命令行添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:05:40.040

请先查看以下文章。它向您展示了如何在 MS Office 2010 中创建自己的数字证书。

1.  [2010 Office - 创建您自己的数字证书](http://office.microsoft.com/en-us/excel-help/create-your-own-digital-certificate-HP005249558.aspx)

2.  [添加、删除、查看受信任的发布者](http://office.microsoft.com/en-us/excel-help/add-remove-or-view-a-trusted-publisher-HA010034138.aspx)

您也可以进行更多搜索以了解如何在 Excel 2003、2007 中添加数字证书（虽然不是我喜欢的版本）。

# ruby-on-rails - ruby 服务器和 ruby 控制台中函数调用的差异？

> ID：13165668
> 
> 赞同：1
> 
> 时间：2012-10-31T18:51:51.580
> 
> 标签：ruby-on-rails, ruby

ruby 新手，试图弄清楚如何调试这个问题 - 我一直在研究一种搜索方法，搜索调用在服务器上正确返回，但不是控制台。

```
Item.where() { has_keyword "phone" } 
```

在服务器上返回 []，在控制台上返回一个包含 15 个对象的列表。服务器和控制台之间存在哪些差异？我应该从哪里开始寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:29:11.837

“has_keyword”是应用程序内部的函数还是 Rails 原生的函数？如果您自己编写了该函数，则可能需要先包含该文件，然后才能从 rails 访问该函数。

[如何从 Rails 的控制台调用控制器/视图方法？](https://stackoverflow.com/questions/151030/how-do-i-call-controller-view-methods-from-the-console-in-rails)

我的建议是将函数编写为模型范围，这样您就可以通过说类似的话来访问它`Item.has_keyword("Phone")`

[http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

# ios - XCode 中的越南语文本编辑器

> ID：13165670
> 
> 赞同：0
> 
> 时间：2012-10-31T18:51:53.943
> 
> 标签：ios, xcode, text, translation

我已经为 FIG 本地化并添加了越南语本地化文件，但 VN 文本文件不会在 XCode 4.4 中显示。我得到一个空编辑器。finder 中的预览对于这些文件来说看起来不错，并且它们在较旧的已发布版本中工作。

是否有一个地方可以告诉 XCode 以 UNICODE 而不是 UTF8 格式读取这些文件？

或者，我是否必须将我所有的本地化文件更改为 UNICODE？（它是越南语的 UNICODE，对吗？）

或者，我是否只是相信这些文件很好，而忽略了我无法在 XCODE 中显示它们的事实？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:09:02.583

没关系。我的越南本地化文件的路径错误。

# java - 无法对 GWT 堆栈跟踪进行反混淆

> ID：13165680
> 
> 赞同：16
> 
> 时间：2012-10-31T18:52:43.633
> 
> 标签：java, gwt

我们正在尝试将未捕获的 GWT 异常（我们使用 GWT 2.5 rc1）发送到我们的服务器以进行日志记录和调试。我们想要对异常堆栈跟踪进行去混淆处理，否则它将毫无用处。

经过一番调查，我发现[7 Tips for Exception Handling in GWT](http://www.summa-tech.com/blog/2012/06/11/7-tips-for-exception-handling-in-gwt/)和[WebModeExceptions](http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions)包含有价值的信息。

因此，我们创建了一个 GWT UncaughtExceptionHandler，它使用自定义 RPC 服务来传输异常及其堆栈跟踪。这很好用。

如[WebModeExceptions deobfuscation 部分所述](http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions#Resymbolization_/_Deobfuscation)，我们在 GWT 模块中启用了堆栈跟踪仿真：

```
<set-property name="compiler.stackMode" value="emulated" />
<set-configuration-property name="compiler.emulatedStack.recordLineNumbers"
    value="true" /> 
```

现在我们的堆栈跟踪看起来像这样：

```
com.google.gwt.core.client.JavaScriptException: (TypeError) : Cannot call method 'pp' of null
    Unknown.aT(Unknown Source:174)
    Unknown.AVa(Unknown Source:501)
    Unknown.YF(Unknown Source:29)
    Unknown.Lqb(Unknown Source:138)
    ... 
```

对我来说这似乎没问题，因为它包含混淆的方法名称和行号，这似乎是[WebModeExceptions deobfuscation 部分](http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions#Resymbolization_/_Deobfuscation)中描述的所需内容。

然后我们使用 -extra 参数编译 GWT 模块以获取符号映射。

我们的自定义日志服务使用 symbolMaps 目录来调用 com.google.gwt.logging.server.StackTraceDeobfuscator。我们使用 X-GWT-Permutation http 标头来调用反混淆器。我介入了反混淆方法以确保它可以加载符号图。它可能。我验证了使用的符号映射文件名与 GWT 模块的 *.cache.js 文件名匹配。它确实匹配。

所以基本上，该服务是这样做的：

```
// Create the deobfuscator
String dir = getSymbolMapsDirPath();
StackTraceDeobfuscator deobfuscator = new StackTraceDeobfuscator(dir);

// request is the HttpServletRequest
String strongName = request.getHeader(RpcRequestBuilder.STRONG_NAME_HEADER);

// Deobfuscate the stack trace
exception.setStackTrace(
    deobfuscator.deobfuscateStackTrace(exception.getStackTrace(), strongName));

// Log the exception
logger.severe("Uncaught GWT exception", exception); 
```

最终结果是堆栈跟踪不会被去混淆。有时，某些行会被错误的类和方法名反混淆，但仅此而已。查看 symbolMap 文件时，堆栈跟踪中的实际符号与 symbolMap 文件中的任何符号都不匹配。

知道我们在这里做错了什么吗？

**编辑：我尝试了 RemoteLoggingServiceImpl 并且得到了相同的结果。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T18:27:35.433

经过进一步调查，似乎`-XenableClosureCompiler`我们使用的新 GWT 编译器选项生成的代码不输出使用编译器生成的符号映射的堆栈跟踪。删除该选项后，可以成功地对堆栈跟踪进行反混淆。

附带说明一下，启用堆栈跟踪反混淆所需的编译器和 GWT 模块选项（我的问题中描述的那些并删除了闭包编译器选项）使我们的最终 js 文件比以前大一倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-15T11:48:30.307

问题中的版本`StackTraceDeobfuscator`现已弃用。这是新的方式（并没有太大的不同）：

仍然在 .gwt.xml 文件中设置属性：

```
<set-property name="compiler.stackMode" value="emulated" />
<set-configuration-property name="compiler.emulatedStack.recordLineNumbers" value="true" /> 
```

然后，一旦异常被传递回您的服务器`RemoteServiceServlet`：

```
import com.google.gwt.core.server.StackTraceDeobfuscator;
import com.google.gwt.user.client.rpc.RpcRequestBuilder;

String path = getServletConfig().getServletContext().getRealPath("/WEB-INF/deploy/<your module name>/symbolMaps/");
StackTraceDeobfuscator deobfuscator = StackTraceDeobfuscator.fromFileSystem(path);
String strongName = getThreadLocalRequest().getHeader(RpcRequestBuilder.STRONG_NAME_HEADER);

// Do the magic
deobfuscator.deobfuscateStackTrace(exception, strongName);

// Log it
logger.severe("Uncaught GWT exception", exception); 
```

# c - 使用 makefile 从 lex 文件生成 a.out

> ID：13165681
> 
> 赞同：2
> 
> 时间：2012-10-31T18:52:43.413
> 
> 标签：c, makefile, lex, flex-lexer

我有`auto.lex`并且我想生成`a.out`这个文件。

我试过了 -

```
a.out: lex.yy.c
    gcc -c lex.yy.c

lex.yy.c: auto.lex
    flex -c auto.lex 
```

但它没有用。

**编辑：**

变成 -

```
a.out: lex.yy.c 
    gcc lex.yy.c 
lex.yy.c: auto.lex 
    flex auto.lex 
```

并固定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:12:28.010

lex 文件的推荐后缀是`.l`. GNU make 有一个内置规则`.l.c`，可以从 lex 源代码创建 C 代码。`auto`因此，如果您想从中创建可执行文件`auto.l`，则根本不需要 makefile。只需输入`make auto`：

```
$使汽车
lex -t auto.l > auto.c
cc -c -o auto.o auto.c
cc auto.o -lfl -o 自动
rm auto.o auto.c

```

# xaml - WPF：将相同的 ItemTemplate 应用于多个组合框

> ID：13165686
> 
> 赞同：1
> 
> 时间：2012-10-31T18:53:08.973
> 
> 标签：xaml, datatemplate, itemtemplate

在我的应用程序中，我为 ComboBox 创建了一个 DataTemplate。（请参阅下面的 XAML。）我想将此样式应用于应用程序中的多个 ComboBox。我怎样才能做到这一点？

```
<ComboBox Name="mouseColorCmbx" AutomationProperties.AutomationId="SimulationOptionsPanel_mouseColorCmbx" Grid.Column="1" Grid.Row="0" Margin="0 0 0 0" HorizontalAlignment="Stretch" VerticalAlignment="Center">
            <ComboBox.ItemTemplate>
                <DataTemplate DataType="Forms:ColorInfo">
                    <StackPanel Orientation="Horizontal" Margin="0,3,0,0">
                        <Border Margin="2,0,2,0" BorderThickness="1">
                            <Border.BorderBrush>
                                <SolidColorBrush Color="Black"/>
                            </Border.BorderBrush>
                            <Border.Background>
                                <SolidColorBrush Color="{Binding Path=Color}"/>
                            </Border.Background>
                            <Rectangle Height="10" Width="25"/>
                        </Border>
                        <TextBlock Text="{Binding Path=Name}"/>
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:38:19.123

您应该使用[应用程序资源](http://msdn.microsoft.com/en-us/library/ms746624.aspx)。将您自己的样式（模板）添加到全局资源允许您与多个控件共享它。

# url - mod_rewrite 和“漂亮的网址”

> ID：13165687
> 
> 赞同：0
> 
> 时间：2012-10-31T18:53:13.820
> 
> 标签：url, mod-rewrite, seo

我在使用 mod_rewrite 获得干净的、对 SEO 友好的 url 方面能力不足，但我真的下定决心要学习。我找到了各种在线教程，但似乎无法真正理解足够的信息以按照我想要的方式操作它。

```
I have a home page: http://mysite.com/index.html

which I would like to display as: http://mysite.com/home 
```

同样，我有子目录：

```
http://mysite.com/about/index.html
http://mysite.com/contact/index.php
Which I would like to display as 
http://mysite.com/about
and http://mysite.com/contact 
```

**以及不同产品的画廊部分，每个产品都有一个独特的页面，例如：**

```
http://mysite.com/products/happybunnies.html OR
http://mysite.com/products/sillytigers.html
That I want to display as:
http://mysite.com/products/happy-bunnies/ AND
http://mysite.com/products/silly-tigers/ 
```

最后一个对我来说是最重要的。如果有人能找到慷慨的解释：

1.  整个 .htaccess 文件的样子，包括实际编写代码之前的任何必要的开始和结束标记

2.  mod_rewrite 代码采用“happybunnies.html”并使其成为“happy-bunnies”。以及允许这种情况发生的 html 文件中的任何必要信息。（我在 url 中看到类似“name=”的内容，但我不明白将其放在文件中的哪个位置）

我觉得这很简单，但我只是缺少对它的更好理解。太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T09:46:04.907

```
RewriteEngine on
RewriteCond %{QUERY_STRING} =m=1
RewriteCond %{REQUEST_URI} =/index.html
RewriteRule ^.* /home? [R=301]
RewriteRule ^home /index.html?m=1 [QSA] 
```

试一试，看看它是如何为你工作的

# c# - 序列化和发送协议缓冲区消息

> ID：13165690
> 
> 赞同：2
> 
> 时间：2012-10-31T18:53:18.247
> 
> 标签：c#, serialization, network-programming, protocol-buffers, protobuf-net

我已经用 c# 编写了这个 protobuf 消息

*   **C#客户端：**

    ```
     public AddressBook InitializeAdressBook() { 

            Person newContact = new Person();
            AddressBook addressBookBuilder = new  AddressBook();
            Person john = new Person();
            john.id=1234;
            john.name="John Doe";
            john.email="jdoe@example.com";
            Person.PhoneNumber nr = new Person.PhoneNumber();
            nr.number="5554321";
            john.phone.Add(nr);
            addressBookBuilder.person.Add(john);
            TextBox.Text += ("Client: Initialisiert? " + addressBookBuilder.ToString()) + "\t" + "\n";
            TextBox.Text += " Erster Person " + addressBookBuilder.person.First().name + "\t" + "\n";

            return addressBookBuilder;
        } 
    ```

**问题**

我正在尝试将 protobuf 消息从 ac# 客户端发送到此 java 服务器...

*   **Java 服务器**

    ```
    public ControllerThread(Socket s){
    this.s = s; 
    try {
            AddressBook adb = AddressBook.parseFrom(s.getInputStream());
            System.out.println("Server: Addressbook:" + adb.getPersonCount());

        } catch (IOException e) { 
            System.out.println("Server: BufferedReader oder PrintWriter von ThermoClient konnte nicht erstellt werden");
            e.printStackTrace(); } 
        } 
    ```

    }

**问题：**

我应该将此消息序列化为字节数组，以便我可以将其发送到 java 服务器...不幸的是，**ProtoBuf.Serializer.Serialize**方法不返回字节数组。那么如何将其序列化为字节数组并将其发送到我的 Java 服务器呢？任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:56:54.200

protobuf-net（又名`ProtoBuf.Serializer.Serialize`）写入*流*。如果您有可用的套接字`NetworkStream`，则可以直接写入该套接字。如果你真的想要一个`byte[]`，那么使用`MemoryStream`：

```
byte[] data;
using(var ms = new MemoryStream()) {
     Serializer.Serialize(ms, obj);
     data = ms.ToArray();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T20:00:30.867

首先，您最好仔细检查 Java 服务器的协议。如此处所述[，](https://developers.google.com/protocol-buffers/docs/techniques#streaming) protobuf 不是自定界的。这意味着如果你有一个 TCP 连接并且正在发送多个 protobuf 消息，则必须有一些其他的底层协议来处理帧 - 确定一个消息在哪里结束，另一个在哪里开始。

让我们暂时忽略这个问题。序列化消息的实际代码取决于您使用的 C#/protobuf 库。如果你使用 Jon Skeet 的[protobuf-csharp-port](http://code.google.com/p/protobuf-csharp-port/)你可以这样序列化它：

```
AddressBook book = InitializeAddressBook();
byte[] bookBytes = book.ToByteArray(); 
```

bookBytes 是地址簿，序列化为字节数组。然后使用您想要的任何套接字库（例如[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient%28v=vs.100%29.aspx)）将数据（bookBytes）发送到 Java 服务器。

我不相信这会起作用，因为我认为您没有告诉我们有关 Java 服务器的详细信息。

# html - 颜色：无；选择

> ID：13165695
> 
> 赞同：2
> 
> 时间：2012-10-31T18:53:30.393
> 
> 标签：html, css

我有一个链接，它的文本颜色将通过`.light`或应用`.dark`。当悬停在该链接上时，该链接还应用了文本颜色，我无法删除样式（但我可以修改它）。我希望当用户将鼠标悬停在链接上时文本的颜色不会改变。

[http://jsfiddle.net/nCt58/1/](http://jsfiddle.net/nCt58/1/)

```
<h2><a href="resume" class="light">Resume</a></h2>

a:hover { color:#ff0000; } //cannot remove this style
.light { color:#888; }
.dark { color:#000; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T18:55:44.627

只需添加另一个选择器来覆盖`a:hover`：

```
.light, .light:hover { color:#888; } 
```

**演示：http: [//jsfiddle.net/nCt58/4/](http://jsfiddle.net/nCt58/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:55:35.730

您可以只使用 !important 属性。

```
.light {color:#888 !important;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T18:56:17.203

你可以这样做：

```
a:hover { color:#222222 !important; } 
```

鉴于`#222222`它是未悬停时的正常颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T18:58:14.667

悬停状态使用与正常状态相同的颜色。像这样：

```
.light, a.light:hover{ color:#888}
.dark, a.dark:hover { color:#000; } 
```

# wordpress - nginx wordpress clean urls 仅在某些子站点中有效

> ID：13165697
> 
> 赞同：1
> 
> 时间：2012-10-31T18:53:34.823
> 
> 标签：wordpress, nginx, clean-urls

我目前将此设置（具有不同的根路径）用于我的 nginx 机器上的另一个站点，对于该站点，这适用于干净的 url。

```
location ^~ /learn {
        root    /var/www/blogs/mysite/learn;
        index   index.php index.html index.htm;
        try_files $uri $uri/ /index.php;

        location ~ \.php$ {
            fastcgi_split_path_info ^(.*\.php)(.*)$;
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
            fastcgi_pass 127.0.0.1:9000;
        }
} 
```

但是，当应用于同一台机器上的不同站点时，干净的 url 会导致找不到页面错误。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:23:46.283

就`try_files`行了，我`/learn`之前添加`index.php`并解决了问题。

```
try_files $uri $uri/ /learn/index.php; 
```

# python - django 中是否有任何模板标签可以制作 ast.literal_eval？

> ID：13165699
> 
> 赞同：0
> 
> 时间：2012-10-31T18:53:38.200
> 
> 标签：python, django, django-templates

django 中是否有任何模板标签或解决方法可以`ast.literal_eval(some_str)`在模板中制作？

我应该创建一个新的模板标签来做到这一点吗？在这种情况下，该模板标签将如何？

我问的原因可以在这里找到[如何反序列化python打印的字典？](https://stackoverflow.com/questions/13165479/how-to-deserialize-a-python-printed-dictionary)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:55:04.003

不

为什么会有这样一个特定的标签，为什么会使用它？

您可以轻松添加一个

```
# file: literal_eval.py

import ast

def literal_eval(value):
    return ast.literal_eval(value)

from django import template
register = template.Library()
register.filter('literal_eval', literal_eval) 
```

你可以在模板中这样使用它

```
{% load literal_eval %}

{{ some_str|literal_eval }} 
```

现在这导致了**“为什么？”的问题。**你会用这个做什么？

**编辑**：OP说“他想反序列化一些保存为varchar的python dict”，在这种情况下模板不是这样做的地方，首先将文本转换为dict，然后将其传递给模板。

最好还是重新考虑正在做的事情，保存字典`repr`不是序列化的方法，使用`literal_eval`不是反序列化字典的方法，使用`json.dumps`或这种格式将字典放入数据库并用于`json.loads`将其转换回字典。你也可以用泡菜，但我不推荐它。

# sql - SQL更新表数据查询

> ID：13165703
> 
> 赞同：0
> 
> 时间：2012-10-31T18:53:58.970
> 
> 标签：sql, sql-server

在我的情况下，我想运行更新查询以在指定日期期间更新 PercentAvailability 列值 0 到 100 `2012-10-28 03:31:01 to 2012-10-28 08:31:01`。见下图。

![在此处输入图像描述](../Images/812c81fc8d16bf1ac3877a09c431d57a.png)

如何运行查询以在指定日期之间更新上述数据？

注意：我有很多 ApplicationID 都有这个问题，所以我如何对所有 ApplicationID 运行查询，我相信我们需要运行 JOIN 语法，但如果你给出一些简短的提示会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T18:55:24.367

使用此查询

```
update your_table
set PercentAvailability = 100
where PercentAvailability = 0
and [DateTime] between '2012-10-28 03:31:01' and '2012-10-28 08:31:01' 
```

或者，如果您只想为特定更新相同的内容，`ApplicationID`请执行

```
update your_table
set PercentAvailability = 100
where PercentAvailability = 0
and [DateTime] between '2012-10-28 03:31:01' and '2012-10-28 08:31:01'
and ApplicationID = 1235 
```

或`ApplicationID`多做

```
update your_table
set PercentAvailability = 100
where PercentAvailability = 0
and [DateTime] between '2012-10-28 03:31:01' and '2012-10-28 08:31:01'
and ApplicationID in (1235, 1236, 1237) 
```

或者对于一个大数字或者`ApplicationID`你可以做一个子查询

```
update your_table
set PercentAvailability = 100
where PercentAvailability = 0
and [DateTime] between '2012-10-28 03:31:01' and '2012-10-28 08:31:01'
and ApplicationID in (select ApplicationID from another_table where somecondition) 
```

# php - 会话重复条目

> ID：13165710
> 
> 赞同：1
> 
> 时间：2012-10-31T18:54:20.310
> 
> 标签：php, codeigniter, session

我收到以下问题

![错误](../Images/4ed384a03754d0e44d2a6bd38553d08e.png)

我似乎无法真正复制错误，因为它是随机发生的。但我认为当我使用 chrome 和 Internet Explorer 查看网站时会发生这种情况。在我的数据库中，它有时会使用新的“last_activity”更新所有会话记录

在 web 和 github 上搜索了类似的问题，但没有找到任何东西。

我正在使用开发分支

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:58:33.153

该查询告诉数据库更新所有行，并且会话 ID 将是唯一的。

它应该是

```
UPDATE xxx SET `last_activity` = 1234 WHERE `session_id` = 'yoursessid' 
```

注意 WHERE 子句。显然 1234 是您的时间戳，而 yoursessid 是实际的会话字符串

# c# - 如何执行数据表与 JSON 之间的序列化和反序列化

> ID：13165712
> 
> 赞同：0
> 
> 时间：2012-10-31T18:54:36.623
> 
> 标签：c#, serialization, json.net

我正在尝试找到一种方法来将具有一个数据表的数据集序列化和反序列化为 JSON，并使用 JSON.NET 从 JSON 返回数据集/数据表，但是我发现的所有示例和示例都只是从数据集或数据表中序列化到 JSON，从来没有两种方式。我们有一个系统来处理 XML 序列化数据集和数据表，我们仍然需要以这种格式保留它们，但允许某些 UI 视图将数据呈现为 JSON。

数据可以有空值，这是有效的。

任何帮助将非常感激。

示例（一种方式序列化）：
[http ://www.west-wind.com/weblog/posts/2008/Sep/03/DataTable-JSON-Serialization-in-JSONNET-and-JavaScriptSerializer](http://www.west-wind.com/weblog/posts/2008/Sep/03/DataTable-JSON-Serialization-in-JSONNET-and-JavaScriptSerializer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:02:56.337

这一切都取决于您希望如何管理反序列化。就个人而言，我喜欢使用基于 LINQ 的方法，其工作方式如下：

```
// Get the children of the JSON result (This example is from my own code,
// in which case I have one big "result" node which contains a bunch of
// children that I am interested in deserializing.
var jsonChildren = JObject.Parse(response)["results"].Children();

// Now use a LINQ statement to deserialize. For example...
var jsonResults = jsonChildren.Select(x =>
{
    new MyObject
    {
        Prop1 = x["Var1"],
        Prop2 = x["Var2"],
    }
}); 
```

归根结底，您可以像使用键值对数组一样使用 JSON 子 IEnumerable，使用方括号语法访问必要的后代。LINQ 只是让事情变得更干净一些。

**更新**

不确定这是否适用于您的情况，但这里有一篇关于使用动态对象的有趣文章[http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-动态 JSON 解析](http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T20:45:54.870

以下链接指向 Newtonsoft.Json.Converters.DataTableConverter.cs 的源代码，它可以满足您的需求，它非常简单，似乎是最好的路线。

[https://github.com/JamesNK/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/Converters/DataTableConverter.cs](https://github.com/JamesNK/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/Converters/DataTableConverter.cs)

# c# - 通过 C# 在 SQL Server 2008 上可靠地删除数据库

> ID：13165719
> 
> 赞同：7
> 
> 时间：2012-10-31T18:55:19.890
> 
> 标签：c#, sql-server-2008

我目前正在尝试通过以下代码删除数据库

```
using Microsoft.SqlServer.Management.Smo;

var server = new Server(Server);
server.KillAllProcesses("Db");
server.KillDatabase("Db"); 
```

有时它有效，但其他我得到以下异常：

> Microsoft.SqlServer.Management.Smo.FailedOperationException：服务器“Host1”的终止数据库失败。
> ---> Microsoft.SqlServer.Management.Common.ExecutionFailureException：执行 Transact-SQL 语句或批处理时发生异常。
> ---> System.Data.SqlClient.SqlException：此时无法更改数据库“Db”的状态或选项。数据库处于单用户模式，并且当前有一个用户连接到它。

关于如何通过代码可靠地删除数据库的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:50:31.380

要通过 SMO 可靠地删除数据库，调用`server.KillDatabase("Db");`. [MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.killdatabase.aspx)确实声明会`KillDatabase`丢弃活动连接，即使他们的示例有点误导。

`KillDatabase`问题`ALTER DATABASE [Db] SET SINGLE_USER WITH ROLLBACK IMMEDIATE`然后`DROP DATABASE`。`KillAllProcesses`列出所有连接并将每个进程发出一个终止作为单独的批处理；假设是异步的，在将数据库设置为单用户模式`KillAllProcesses`后发生终止时引发异常。`KillDatabase`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:01:30.097

在我的情况下，我得到的错误是通过在 KILL 方法之前添加 server.Databases.Refresh 来修复的。原因是我试图删除的数据库是在实例化服务器对象之后创建的，换句话说，我是临时创建一个数据库，从中提取数据并删除它。数据库未显示在数据库（对象）列表中。添加刷新就可以了...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-07T18:04:01.203

使用 MSDN 时出现错误（“drop failed...”）：

```
dbServer.KillAllProcesses(db.Name);
dbServer.KillDatabase(db.Name); 
```

解决方法是：

```
string sqlCommandText = @"USE master; 
ALTER DATABASE [" + db.Name + "] SET SINGLE_USER WITH ROLLBACK IMMEDIATE; 
DROP DATABASE [" + db.Name + "]";  
dbServer.ConnectionContext.ExecuteNonQuery(sqlCommandText); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T13:05:58.400

我通过在没有池的情况下创建 ServerConnection 来修复此类错误。像这样：

```
var serverConnection = new ServerConnection(serverName)
{
     ...,
     NonPooledConnection = true
};
server = new Server(serverConnection);
server.KillAllProcesses(databaseName); 
```

# java - httpheader 中的编码问题导致 struts 2

> ID：13165724
> 
> 赞同：1
> 
> 时间：2012-10-31T18:55:39.653
> 
> 标签：java, jquery, ajax, encoding, struts2

我在 struts 2 应用程序中发送标题中的自定义错误消息。我通过在 struts.xml 文件中添加一个全局结果来完成它，例如：

```
<global-results>
    <result name="badDataError" type="httpheader">
       <param name="status">500</param>
       <param name="headers.errorMessage">${exception.message}</param>
    </result>
</global-results>

<global-exception-mappings>
    <exception-mapping result="badDataError" exception="mypackage.BadDataException" />
</global-exception-mappings> 
```

所以当我抛出一个异常时

```
throw new BadDataException("my error message"); 
```

然后该消息包含在文件的标题中，因此可以在 json 中作为错误读取：

```
$.ajax(
    { 
        url: ...,
        type: "POST",
        data: ...,
        success: function(data, textStatus) {
            alert("save works");
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            var errorMessage = XMLHttpRequest.getResponseHeader('errorMessage'); 
            var message = "There has been an error";
            if (errorMessage != null){
                message = message + ':<br/>'+errorMessage;
            }
            alert(message);
        },
        dataType: "json"
    }
); 
```

这可行，但是每当我发送带有任何特殊字符（例如á éñ ...）的消息时，它都不会在警报中正确显示，也不会通过使用console.log（）显示变量来正确显示，尽管如果我在那里使用firebug 消息正确显示，好像它没有在 javascript 中使用正确的编码。

我试图在ajax调用中设置

```
contenType: 'application/x-www-form-urlencoded; charset=UTF-8'
or
contenType: 'application/x-www-form-urlencoded; charset=ISO-8859-1' 
```

但没有任何成功。

我如何知道错误消息和标头使用了哪种编码，并且能够为它选择不同的编码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:33:03.407

此处定义了非 ASCII 文本的标头字段编码：[http ://www.ietf.org/rfc/rfc2047.txt](http://www.ietf.org/rfc/rfc2047.txt)

阅读起来并不难，在那里你会找到答案。编码标头字段的示例是

```
 =?iso-8859-1?q?this=20is=20some=20text?= 
```

# haxe - Haxe 方法内的条件编译

> ID：13165731
> 
> 赞同：1
> 
> 时间：2012-10-31T18:56:07.953
> 
> 标签：haxe

在 Haxe 编程语言中，是否可以在方法定义中检测目标语言，如此处所示？

```
class Test {
    static function main() {
        trace("Hello World !");
        #if java
            trace("This is compiled to Java");
        #elseif js
            trace("This is compiled to Javascript");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T20:57:02.760

这应该可以，您只需要在最后一次跟踪之后添加#end。

# mysql - 缺少 mysql.h 并试图找到 mysql-devel

> ID：13165738
> 
> 赞同：3
> 
> 时间：2012-10-31T18:56:28.140
> 
> 标签：mysql, sql, windows, r, rmysql

（我已经解决了四五个与我相关的问题，但我遇到的这个症结似乎并没有在它们中得到解决。）

在尝试在 Windows 机器上的 RStudio 上运行 RMySQL 时，我一直在尝试遵循此处提供的帮助：[如何将 R 与 MySQL 连接或如何安装 RMySQL 包？](https://stackoverflow.com/questions/10292326/how-to-connect-r-with-mysql-or-how-to-install-rmysql-package)在这里：[在 R for Windows 中使用 MySQL](https://stackoverflow.com/questions/5223113/using-mysql-in-r-for-windows)

我能够完成步骤 1、3、4、5，但不能完成 #2。

我已经尝试搜索丢失的标头**mysql.h**本身，但我找到的所有内容都是针对不同平台的，或者指向[http://dev.mysql.com/downloads/mysql/#downloads](http://dev.mysql.com/downloads/mysql/#downloads)，我真的看不到对标题的任何引用。

我看到的另一个建议是安装 mysql-devel，但同样，我为此找到的所有链接都没有任何效果。

提前感谢您的帮助：我希望它很容易解决！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:17:37.487

获取[MySQL 社区服务器](http://www.mysql.com/downloads/mysql/?product=community)并将其安装在您的系统上。它包含一个名为的目录`include`，您可以在其中找到`mysql.h`. 您还可以下载应用程序的 ZIP 文件版本并使用它来获取标头，而无需在系统中安装任何东西。使用这个包中的头文件，我[在过去成功地构建了 RMySQL](http://martin.von-gagern.net/howtos/20110728-rmysql/)。

# css - 浏览器窗口未处于最大模式时的换行符

> ID：13165742
> 
> 赞同：-1
> 
> 时间：2012-10-31T18:56:37.277
> 
> 标签：css, responsive-design

我正在尝试设计（响应式）一个将完美出现在每个设备中的网站。我正在使用蓝图 CSS 框架（转换为流体）我有以下代码用于简单标题。

HTML

```
<div class="prepend-3" style="margin-top:20px;">
   <h1>Stack <span style="color:#C6CBCE">Overflow</span></h1>
</div> 
```

我的 CSS

```
h1 { 
   padding: 20px 0; margin: 0; 
   font-family: "Trebuchet MS", serif; 
   font-size: 9em; color: #222; 
   font-weight: normal; 
   line-height: 80px; } 
```

我面临的问题是，当我运行将浏览器窗口保持在最大模式的代码时，我可以看到“堆栈”和“溢出”这两个词都在同一行，这是完美的，但是当我不最大化浏览器的窗口时，这条线像下面一样分解。

你能告诉我如何解决这个问题（让它响应）？

谢谢 ：）

![在此处输入图像描述](../Images/b258b74bf71eb12712e4dd7395483d14.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:59:00.943

尝试使用`white-space: nowrap;`属性

```
h1 { 
   padding: 20px 0; 
   margin: 0; 
   font-family: "Trebuchet MS", serif; 
   font-size: 9em; 
   color: #222; 
   font-weight: normal; 
   line-height: 80px;
   white-space: nowrap; <------Here
} 
```

或者准确地说，您还可以使用 CSS3 @media 查询指定特定于屏幕尺寸的不同样式，但我希望您按照您指定的方式使用它`Responsive`

```
@media only screen and (max-device-width: 480px) {
 /* Styles Goes Here */  
} 
```

# plone - metal:use-macro 和 metal:define-macro 在五个 ViewPageTemplateFile 中

> ID：13165748
> 
> 赞同：6
> 
> 时间：2012-10-31T18:57:19.340
> 
> 标签：plone

我想在单个五个 ViewPageTemplateFile 页面模板中使用宏，以避免复制粘贴我的代码。

以下是我的尝试：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:omit-tag=""
      >

    <metal:row define-macro="row">
        <tal:block repeat="widget view/widgets">
            <div tal:attributes="class python:'%s%s' % (widget.klass, widget.mode=='hidden' and ' hidden' or '')"
                 tal:condition="python:view._includeRow(widget.name)">

                <div tal:replace="structure widget/render"></div>

            </div>
        </tal:block>
    </metal:row>

    <table class="datagridwidget-table-view" tal:attributes="data-extra view/extra">
        <thead>
            <tr>
                <th class="header">
                    <!-- -->
                </th>
                <th id="" class="header" tal:condition="view/allow_insert"></th>
                <th id="" class="header" tal:condition="view/allow_delete"></th>
                <th id="" class="header" tal:condition="view/allow_reorder"></th>
                <th id="" class="header" tal:condition="view/allow_reorder"></th>
            </tr>
        </thead>
        <tbody class="datagridwidget-body" tal:attributes="data-name_prefix view/name_prefix; data-id_prefix view/id_prefix">
            <tal:row repeat="widget view/getNormalRows">
                <tr>
                    <metal:macro use-macro="here/row" />
                </tr>
            </tal:row>

            <tal:row condition="view/getTTRow" define="widget view/getTTRow">
                <tr>
                    <metal:macro use-macro="here/row" />
                </tr>
            </tal:row>

            <tal:row condition="view/getAARow" define="widget view/getAARow">
                <tr>
                    <metal:macro use-macro="here/row" />
                </tr>
            </tal:row>

    </tbody>
</table>
<input type="hidden" tal:replace="structure view/counterMarker" />
</html> 
```

但是，**这里**没有定义（据我所知，它是旧的独立页面模板的处理方式）。

如何从 ViewPageTemplate .pt 模板中引用模板本身并在 .pt 文件中使用/定义宏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T19:10:48.480

我想你想要：

```
<metal:macro use-macro="template/macros/row" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T19:19:00.890

使用时，`ViewPageTemplateFile`您可以访问（至少）模板中的以下变量：

*   这里
*   模板
*   看法

`view/context`因此，您可以使用`template/macros`@davisagli 指示的方式访问“行”宏，而不是“这里”（相当于）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-06T04:13:01.203

它也可能喜欢

```
<metal:macro use-macro="here/ViewPageTemplate/macros/row" /> 
```

# javascript - 如何从ajax返回数据设置属性值

> ID：13165749
> 
> 赞同：0
> 
> 时间：2012-10-31T18:57:20.993
> 
> 标签：javascript, ajax, jquery

您好我有一种情况，我从 ajax 脚本返回的数据中显示了一些标签。我在 jsp 上已经存在另一个标签，它接受每个链接的 onClick 值。问题是在 jquery append 创建标签时没有设置 onclick 属性。

这是代码：-

```
$(document).ready(function() {
    $("#getResults").click(function(){

     $.post("getRefineSearchResultsPath", {bug:bug}, function(data) {

    var value = "<div id='list' class='attachment'>";
    value += "<ul class='unstyled'>";
    $issue.find('attachment').each(function(){

    var $attachment = $(this);
    value += "<li>";
    value += "<a href='#' onclick='document.f1.attachmentName.value='" +$attachment.find('attachmentName').text(); 
    value += "';document.f1.issueKey.value='"+$attachment.find('attachmentissueKey').text();
    value += "';document.f1.digest.value='"+$attachment.find('attachmentdigest').text();
    value += "';document.f1.submit();'>"+$attachment.find('attachmentName').text();
                                value += "</a>";
                                value += "</li>";
    });

    value +="</ul>";
    value +="</div>";

    $("#result").append(value);
    });
    });

}); 
```

我的 JSP 在这里：-

```
<html>
<body>

<button id="getResults" type="button" class="btn">Get</button>

<form name=f1 action="fetchAttachments" method="POST">
                    <input name=attachmentName type=hidden value=undefined> <input
                        name=issueKey type=hidden value=undefined> <input
                        name=digest type=hidden value=undefined>
                </form>

<div id="result">
&nbsp;
</div>

</body>
</html> 
```

所以基本上在每个链接上点击表单应该被提交。如果我使用 JSTL 在 JSP 上呈现结果，这工作正常但是当我通过 Ajax 以 xml 形式获取数据结果时不起作用。总之，onclick 属性没有设置。知道可能是什么原因吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:06:50.503

看看生成了什么

```
<a href='#' onclick='document.f1.attachmentName.value='" +$attachment.find('attachmentName').text(); 
```

当它被渲染时

```
<a href='#' onclick='document.f1.attachmentName.value='someText' 
```

您有报价问题。

# sql-server - 分离在多个进程中访问的 SQL DB

> ID：13165754
> 
> 赞同：0
> 
> 时间：2012-10-31T18:57:35.493
> 
> 标签：sql-server, ado.net

我有一组访问同一个 SQL 数据库的程序（考虑父进程和子进程）。它在程序过程中被连接和分离。只有当我在两个进程都访问它时尝试分离它时我才会遇到问题。连接都已关闭，但如果我尝试执行 sp_detach 存储过程，我会收到一条错误消息，指出它正在使用且无法分离。我需要解决多进程访问的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:51:33.337

如果所有连接都已关闭，则多进程访问没有任何具体内容。在您的情况下，我怀疑其中一个连接并未真正关闭，您只是认为它是。

在调用 sp_detach 之前，运行以下代码：

```
ALTER DATABASE [YourDbName]
SET SINGLE_USER WITH ROLLBACK IMMEDIATE; 
```

我一直认为这是本着防御性编码精神的这种性质的自动化程序的最佳实践。（并不是说我通常会考虑在自动化过程的最佳实践中分离数据库）

# python - 绑定在销毁后仍然存在

> ID：13165756
> 
> 赞同：2
> 
> 时间：2012-10-31T18:57:42.347
> 
> 标签：python, tkinter

销毁绑定到外部小部件的窗口时遇到问题。

例如，我有一个根窗口，和许多不同的子窗口（在代码中是相同的，以使其简单）。

当我从根目录打开子窗口时。它创建一个窗口并绑定到来自根窗口的信号。所有子窗口都将绑定到同一个信号，但绑定到不同的回调（每个子窗口一个）。

然后，当我销毁这个子窗口（单击右上角的 X）时，绑定仍然存在，这意味着子窗口仍然存在。

问题是：如何使用绑定销毁子窗口，让其他回调保持活动状态？

在子窗口 _destroy 方法中，我尝试过

```
root.unbind("<<EverybodyDoSomething>>", self.bind1) 
```

但我得到一个错误

> TclError: 无法删除 Tcl 命令

如果我使用

```
root.unbind("<<EverybodyDoSomething>>") 
```

所有与信号相关的回调都被解除绑定。

```
import Tkinter as Tk

root = Tk.Tk()
i_window = 0

def generate_dosomething_signal():
    root.event_generate('<<EverybodyDoSomething>>', when = 'tail')

def subwindow():
    SubWindow()

class SubWindow(Tk.Tk):
    def __init__(self):
        global i_window
        Tk.Tk.__init__(self)
        self.i = str(i_window)
        i_window += 1
        l = Tk.Label(master=self, text='This is s Sub Window %s!!!!'%self.i)
        l.pack()
        self.bind1 = root.bind('<<EverybodyDoSomething>>', 
                               self.callback_from_sub_window, '+')

        self.bind('<Destroy>', self._destroy)

    def _destroy(self, *args):
#        root.unbind('<<EverybodyDoSomething>>', self.bind1)
#        root.unbind('<<EverybodyDoSomething>>')
        pass

    def callback_from_sub_window(self, *args):
        print 'callback from Sub Window ' + self.i

bStartWindow = Tk.Button(master=root, text='Start Sub Window', command=subwindow)
bStartWindow.pack()

bDoSomethingEverywhere = Tk.Button(master=root, text='Do something everywhere', 
                                   command = generate_dosomething_signal)
bDoSomethingEverywhere.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:07:42.777

你说的不是 Tkinter 的正常行为。通常，当您销毁一个小部件时，它的所有子小部件也会被销毁。当它们被摧毁时，它们的绑定也随之而来。

很可能，问题的根源在于您创建了多个根小部件的实例。你根本无法做到这一点。一个 Tkinter 应用程序必须有一个 的实例`Tk`，并且只有一个正在运行的`mainloop`.

如果您想要多个顶级窗口，请为您的第二个和后续窗口创建[Toplevel实例。](http://effbot.org/tkinterbook/toplevel.htm)

此外，您不应该使用`bind(...,"+")`来完成此任务。正如您所发现的，没有办法删除这样的绑定。您可以完全删除与 的所有绑定`<<EverybodyDoSomething>>`，但不能仅删除使用`bind(..."+")`.

您需要做的是拥有一个调用单个函数的单个绑定。然后，此函数可以遍历顶层窗口列表，将事件发送到每个窗口。您可以简单地跳过任何不再存在的窗口。您可以使用自省来获取顶级窗口列表，也可以通过在每次代码创建窗口引用时附加一个窗口引用来手动维护此列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T23:46:11.157

这完成了你想要的：

```
import Tkinter as Tk

root = Tk.Tk()
i_window = 0

def generate_dosomething_signal():
    global root
    root.event_generate('<<EverybodyDoSomething>>', when = 'tail')

def subwindow():
    global root
    SubWindow(root)

class SubWindow():
    def __init__(self, root):
        global i_window
        self.root = root

        self.subwindow = Tk.Toplevel()
        self.i = str(i_window)
        self.destroyed = False
        i_window += 1
        l = Tk.Label(master=self.subwindow, text='This is s Sub Window %s!!!!'%self.i)
        l.pack()
        self.bind1 = self.root.bind('<<EverybodyDoSomething>>', 
                               self.callback_from_sub_window, '+')
        self.subwindow.protocol("WM_DELETE_WINDOW", self._destroy)
        #self.subwindow.bind('<Destroy>', self._destroy)

    def _destroy(self, *args):
        self.subwindow.destroy()
        self.destroyed = True
        print "Destroyed ", self.i

    def callback_from_sub_window(self, *args):
        if self.destroyed == False:
            print 'callback from Sub Window ' + self.i

bStartWindow = Tk.Button(master=root, text='Start Sub Window', command=subwindow)
bStartWindow.pack()

bDoSomethingEverywhere = Tk.Button(master=root, text='Do something everywhere', 
                                   command = generate_dosomething_signal)
bDoSomethingEverywhere.pack()

root.mainloop() 
```

他们明确地告诉您，您需要将子窗口创建为顶层。此外，请注意，每次创建 Subwindow() python 对象时，它都是一个指向绑定到 <<EverybodyDoSomething>> 事件的根窗口的指针，然后作为回调附加函数 callback_from_sub_window() 的本地实例. 尽管窗口已被销毁（从 Tk 的角度来看），但此类子窗口的 Subwindow() 对象仍然存在，因此它的 callback_from_sub_window() 函数仍然存在。作为对事件作出反应的根窗口，去执行每个创建（和/或销毁）子窗口的“私有”回调函数callback_from_sub_window()。在 Subwindow() 类中安装 self.destroyed 标志可以防止被破坏的子窗口作为回调做出反应。

# sockets - 如何将 openSSL 与内存 BIO 和非阻塞套接字一起使用

> ID：13165757
> 
> 赞同：7
> 
> 时间：2012-10-31T18:57:44.387
> 
> 标签：sockets, ssl, openssl, client, nonblocking

我是 openSSL 的新手，我试图找出在使用非阻塞套接字以及 libevent、libev 或 libuv 等库与内存 BIO 结合时创建 https 连接的最佳/好的解决方案。

我试图弄清楚如何管理 openSSL 调用/数据和应用程序数据。简而言之，我对 ssl 客户端应用程序应该如何工作的理解是这样的：

*   创建 SSL_CTX
*   创建一个新的套接字连接（例如我正在使用 libuv）
*   创建两个内存 BIO：
    *   一个充满了我从服务器收到的数据（readBio）
    *   另一个用于在应用程序代码中读取。（写生物）
*   创建 SSL* 并将状态设置为 SSL_connect_state
*   使用 SSL_do_handshake 启动握手过程
*   [循环] 接收/发送数据

由于我正在使用 libuv（但这可能是任何其他异步/非阻塞库），我有一个*读取*回调，当在套接字上接收到数据时会调用它。当我有必须写入套接字的数据时，我将此数据传递给库的*写入* 函数（在 this 中`uv_write()`），但在这之间我需要调用 SSL。

所以在调用 SSL_do_handshake(...) 之后，SSL 将一些数据存储到 writeBIO 中，我必须读取这些数据并将其传递到套接字中。我在想一个问题，我怎么知道 SSL 将数据存储到这个 BIO 中，其次我怎么知道我应该什么时候通过套接字发送这个。

在查看了一些代码之后，我发现在调用 SSL_do_handshake() 之后我必须从 writeBIO 中消费。但是我不清楚接下来的步骤。在 s 结束握手的第一个字节之后，libuv 的“事件”循环使一切都在运动；当新数据到达套接字时，我的 '`onread()`回调被调用。但是我该如何处理这些传入的数据呢？（例如，我自己是否保持 SSL 状态（<-- 有些人建议我*不*要这样做））。

尽管我已经看到很多使用阻塞套接字和核心 SSL 功能建立连接的示例，但我还没有找到一个很好的干净/简约的示例来展示如何将内存 BIO 用作客户端。

我在这里粘贴了一些用于测试 openSSL 的代码：[https ://gist.github.com/3989091](https://gist.github.com/3989091)

有人可以描述使用带有 SSL 的异步/非阻塞套接字和内存 BIO 的过程吗？

谢谢R

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-21T19:22:47.643

我还整理了一个将内存 BIO 与非阻塞套接字和基于轮询的事件循环一起使用的基本示例。

[ssl_server_nonblock.c](https://gist.github.com/darrenjs/4645f115d10aa4b5cebf57483ec82eca)

我认为在这里发布该示例的所有源代码是有意义的。但这里是示例代码所做的概要。

## 加密和未加密字节流

此图显示了读写内存 BIO（rbio 和 wbio）如何分别与套接字读取和写入相关联。在入站流（数据进入程序）中，从套接字读取字节并通过 BIO_write 复制到 rbio。这表示将加密数据传输到 SSL 对象中。然后通过调用 SSL_read 获取未加密的数据。反向发生在出站流上，将未加密的用户数据传输到加密数据的套接字写入中。

```
 +------+                                    +-----+
  |......|--> read(fd) --> BIO_write(rbio) -->|.....|--> SSL_read(ssl)  --> IN
  |......|                                    |.....|
  |.sock.|                                    |.SSL.|
  |......|                                    |.....|
  |......|<-- write(fd) <-- BIO_read(wbio) <--|.....|<-- SSL_write(ssl) <-- OUT
  +------+                                    +-----+

          |                                  |       |                     |
          |<-------------------------------->|       |<------------------->|
          |         encrypted bytes          |       |  unencrypted bytes  | 
```

# android - 创建人像 GoogleTV 应用程序

> ID：13165766
> 
> 赞同：1
> 
> 时间：2012-10-31T18:58:34.050
> 
> 标签：android, google-tv

我很难强迫我的应用在 Google TV 上使用纵向模式。我知道这在技术上不受支持，但我觉得我应该能够以某种方式手动执行此操作，尤其是看到 Google Play 上的某些应用程序成功地在系统范围内强制执行此行为（例如： https: [//play.google.com/store/apps /details?id=com.coinsoft.android.orientcontrol](https://play.google.com/store/apps/details?id=com.coinsoft.android.orientcontrol)和[https://play.google.com/store/apps/details?id=nl.fameit.rotate&hl=en](https://play.google.com/store/apps/details?id=nl.fameit.rotate&hl=en)）。

在我的活动中，我正在做：

```
public void onStart() {
    View root = findViewById(android.R.id.content);     
    Animator anim = AnimatorInflater.loadAnimator(this, R.anim.rotate_90);                  
    anim.setTarget(root);
    anim.start();
} 
```

我的rotate_90.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="0"
    android:propertyName="rotation"
    android:repeatCount="0"
    android:valueTo="90"
    android:valueType="floatType" /> 
```

这似乎有效，但当然不能完全符合我的要求。视图已旋转，但最左侧的所有项目现在都在屏幕外。有没有办法动态调整根布局的大小以适应纵向模式的屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:50:34.723

您是否有理由试图强制您的应用程序以设备不支持的方向运行？如果您无论如何都是从头开始编写应用程序（听起来很像），为什么不支持正确的屏幕方向呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:50:50.143

当然，在发布之后，我想出了一些似乎可行的方法：

```
 View root = findViewById(android.R.id.content);

    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int height = displaymetrics.heightPixels;
    int width = displaymetrics.widthPixels;

    root.getLayoutParams().height = width;
    root.getLayoutParams().width = height;
    root.requestLayout();

    root.setPivotX(height);
    root.setPivotY(height);

    Animator anim = AnimatorInflater.loadAnimator(this, R.anim.rotate_90);      
    anim.setTarget(root);
    anim.start(); 
```

任何更好的答案将不胜感激，但我认为这没有任何不利之处。

# c# - 从集合中获取一系列值

> ID：13165769
> 
> 赞同：0
> 
> 时间：2012-10-31T18:58:44.340
> 
> 标签：c#, .net, linq

给定这样的列表...

```
string[] fields = new[]
{
     "Value1", 
     "TableStart:Value2", 
     "Value3", 
     "Value4", 
     "TableEnd:Value2", 
     "Value5", 
     "Value6"
}; 
```

有没有一种方法可以在不编写循环的情况下检索“TableStart”和“TableEnd”语句之间的所有信息？我认为 Linq 可能有一些方法可以实现这一点，但我想不出一个。

在上面的示例中，我期望一个包含“Value3”和“Value4”的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:02:41.447

也许：

```
var result = fields.SkipWhile(s => !s.Contains("TableStart"))
                   .Skip(1)
                   .TakeWhile(s => !s.Contains("TableEnd"))
                   .ToList(); 
```

但我更喜欢一个简单的循环。

# javascript - setTimeout 和关闭

> ID：13165770
> 
> 赞同：0
> 
> 时间：2012-10-31T18:58:48.383
> 
> 标签：javascript, settimeout

有人可以解释为什么 Eg1 在 FF 中工作但在 IE 中不工作，以及 Eg2 如何在 FF 和 IE 中工作？

## 例1

```
// ----- works in FF, not in IE   
var msg = "Hello World";
setTimeout(doAlert, 1, msg);
function doAlert(msg)
{
    alert(msg);
} 
```

## 例2

```
// ------ works in both IE, FF
var msg = "Hello World";
setTimeout(function() {doAlert(msg);}, 1);
function doAlert(msg)
{
    alert(msg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:45:46.127

因为回调参数不是默认的。

要在 IE 上启用额外参数，请使用以下代码段：

```
 if (document.all && !window.setTimeout.isPolyfill)
      {
        var __nativeST__ = window.setTimeout;
        window.setTimeout = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */)
          {
            var aArgs = Array.prototype.slice.call(arguments, 2);
            return __nativeST__(vCallback instanceof Function ? function ()
                                                                  {
                                                                    vCallback.apply(null, aArgs);
                                                                  } :
                                                                vCallback, nDelay
                               );
         };
      window.setTimeout.isPolyfill = true;
    }

  if (document.all && !window.setInterval.isPolyfill)
    {
      var __nativeSI__ = window.setInterval;
      window.setInterval = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */)
        {
          var aArgs = Array.prototype.slice.call(arguments, 2);
          return __nativeSI__(vCallback instanceof Function ? function ()
                                                                {
                                                                      vCallback.apply(null, aArgs);
                                                                } :
                                                              vCallback, nDelay
                             );
        };
      window.setInterval.isPolyfill = true;
    } 
```

来源：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

# jquery - .empty() 在 jquery 中，仅从其父项中为空子项

> ID：13165777
> 
> 赞同：1
> 
> 时间：2012-10-31T18:59:11.313
> 
> 标签：jquery, css, parent, children

当我使用 $("child").remove() 或 $("child").empty() 时，它会从页面中删除所有子元素，我希望它只从一个父元素中删除子元素。这个页面上有更多的父类，所以无论如何我可以在用户单击按钮类时仅从父类中删除内容.. button_parent 类与父类处于同一级别

```
<div class ="button_parent"><div class ="button"></div></div>
    <div class = "parent">

        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div> 
    </div>
<div class ="button_parent"><div class ="button"></div></div>
    <div class = "parent">
        <div class ="button"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div> 
    </div>
<div class ="button_parent"><div class ="button"></div></div>
    <div class = "parent">
        <div class ="button"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div> 
    </div>
<div class ="button_parent"><div class ="button"></div></div>    
    <div class = "parent">
        <div class ="button"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div> 
    </div>
<div class ="button_parent"><div class ="button"></div></div>
    <div class = "parent">
        <div class ="button"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div> 
    </div>
<div class ="button_parent"><div class ="button"></div></div>    
    <div class = "parent">
        <div class ="button"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div>
        <div class= "child"></div> 
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:01:41.470

`.remove()`删除元素，但`.empty`只删除内容。无论如何..您需要使用as 上下文删除`child`div`parent`

```
$('.parent').click(function () {
   $(this).find('.child').remove();
}); 
```

**对于 HTML：**

```
<div class ="button_parent"><div class ="button"></div></div>
<div class = "parent">

    <div class= "child"></div>
    <div class= "child"></div>
    <div class= "child"></div>
    <div class= "child"></div> 
</div> 
```

你可以做

```
$('.button').click(function() {
    $(this).parent() //this will be .button_parent
           .next()   //next node is .parent
           .find('child')  //find all child in .parent 
           .remove()       //remove them
}); 
```

您可以使用`.empty()`的`.child`div 是内部唯一存在的 div`.parent`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T19:03:21.070

在这种情况下，最好使用 id 而不是 css 选择器

为要维护此操作的 div 提供明确的 id。您可以保持您的类完好无损，并且仅将 id 应用于您希望操作发生的 div

```
<div class = "parent" id="operation">
    <div class= "child"></div>
    <div class= "child"></div>
    <div class= "child"></div>
    <div class= "child"></div> 
</div> 
```

# .net - 如果 Windows 7 客户端 PC 上仅安装了 .NET Framework 4 客户端配置文件，Report Builder 3.0 可以工作吗？

> ID：13165781
> 
> 赞同：0
> 
> 时间：2012-10-31T18:59:18.053
> 
> 标签：.net, sql-server-2008, reportbuilder3.0

此[页面](http://www.microsoft.com/en-us/download/details.aspx?id=6116)提到 Report Builder 3.0 系统要求需要组件 Microsoft .NET Framework 3.5 SP1。

我们的用户没有在他们的 Windows 7 上安装 .net 3.5 框架或相应的 SP1。我的 Windows 7 上安装了 .NET Framework 4（客户端配置文件和扩展）。

我想知道（或者有人可以指出）是否只有 Framework 4 客户端配置文件就足以让我们的用户在 Report Builder 3.0 中创建报表并能够连接到我们的 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:52:58.163

就在点击报表生成器 3.0 之前，确保浏览器（IE）设置为兼容性视图，它出现在工具栏中。我在 WIN 7 和 WIN 8 上都试过了。它肯定会工作。

# php - 计算两个日期之间的小时数

> ID：13165785
> 
> 赞同：0
> 
> 时间：2012-10-31T18:59:30.893
> 
> 标签：php, mysql, sql

我正在尝试对“工作”时间进行概述

但是我无法让它计算我的 sql 数据库中两个日期之间的小时数，但它不会返回结果。

我试图只显示两个有效的 SQL 条目，但似乎计算不会使用 SQL 条目

我在页面顶部收到此错误：

```
Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct() [<a href='datetime.--construct'>datetime.--construct</a>]: Failed to parse time string (31/10-2012 19:14) at position 0 (3): Unexpected character' in D:\xampp\htdocs\admin.php:46 Stack trace: #0 D:\xampp\htdocs\admin.php(46): DateTime->__construct('31/10-2012 19:1...') #1 {main} thrown in D:\xampp\htdocs\admin.php on line 46 
```

我在这里做错了什么？

我需要帮助的是第 43-52 行这是我的代码：

```
<?php
$host="localhost";
$username="xxxx";
$password="xxxx";
$db_name="xxxxx";
$tbl_name="log";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name ORDER BY id ASC";
$result=mysql_query($sql);

?>
<title>VT Log - Oversigt</title>
<table width="90%" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td width="30%" align="center" bgcolor="#E6E6E6"><strong>Navn</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6"><strong>Start</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6"><strong>Slut</strong></td>
<td width="30%" align="center" bgcolor="#E6E6E6"><strong>Kommentar</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6"><strong>Tid</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['user']; ?><BR></td>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['start']; ?></td>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['end']; ?></td>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['comment']; ?></td>
<?php
$stamp1 = $rows['start'];
$stamp2 = $rows['end'];
$date1 = new DateTime($stamp2);
$date2 = new DateTime($stamp2);
$diff = $date2->diff($date1);
$hours = $diff->h;
$hours = $hours + ($diff->d*24);
?>
<td align="center" bgcolor="#FFFFFF"><? echo $hours;?></td>
</tr>

<?php
}
mysql_close();
?>
<tr>
<td colspan="5" align="center" bgcolor="#E6E6E6"><?php echo "Total arbejdstid: " . array_sum($numbers) . "\n Timer";?></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:09:04.657

将两个日期都转换为 unix 时间戳，然后以小时为单位返回差值。

```
SELECT (UNIX_TIMESTAMP(end) - UNIX_TIMESTAMP(start)) / 60.0 / 60.0 as hours_difference 
```

之后不需要任何 PHP 计算...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:03:12.490

改变

```
$date1 = new DateTime($stamp2); 
```

对此

```
 $date1 = new DateTime($stamp1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T20:00:08.350

问题解决了！非常感谢瑞恩格里格斯

将 SQL 查询更改为`$sql="SELECT *, (UNIX_TIMESTAMP(end) - UNIX_TIMESTAMP(start)) / 60.0 / 60.0 as hours_difference FROM $tbl_name ORDER BY id ASC";`

代替

```
<?php
$stamp1 = $rows['start'];
$stamp2 = $rows['end'];
$date1 = new DateTime($stamp2);
$date2 = new DateTime($stamp2);
$diff = $date2->diff($date1);
$hours = $diff->h;
$hours = $hours + ($diff->d*24);
?>
<td align="center" bgcolor="#FFFFFF"><? echo $hours;?></td> 
```

和

```
<td align="center" bgcolor="#FFFFFF"><?$var = number_format($rows['hours_difference'],2);
$var = number_format($var,1);
echo $var; ?></td> 
```

# javascript - 从 Jquery UI 对话框中的第一个文本字段设置默认选项卡

> ID：13165789
> 
> 赞同：0
> 
> 时间：2012-10-31T19:00:00.143
> 
> 标签：javascript, jquery, jquery-ui, jsf, jquery-ui-dialog

我有“添加地址”按钮，点击按钮会弹出一个 Jquery 对话框，用门牌号、街道、城市、县、州、国家和邮政编码填写地址信息。我想从门牌号开始我的标签，但焦点总是在标题栏上设置关闭按钮。

```
 <f:view>
    <body onload="sartup()">
        <h:form id="form1">
            <h:panelGroup >
                <h:outputLabel value="House Number" styleClass="label" id="hnoLbl"></h:outputLabel>
                <h:inputText id="hnoId" value="#{somebackingbean.address1}"></h:inputText>
            </h:panelGroup>
            <h:panelGroup>
                <h:outputLabel value="Street" styleClass="label" id="streetLbl"></h:outputLabel>
                    <h:inputText  id="streetID" value="#{somebackingbean.address2}" ></h:inputText>
            </h:panelGroup>         
        </h:form>
    </body>
</f:view> 
```

我尝试使用以下 JavaScript 设置焦点：

```
 Function startup(){
    document.getElementById("form1:hnoLbl").triggerHandler("focus");
    } 
```

和

```
 Function startup(){
    document.getElementById("form1:hnoLbl").focus();
    } 
```

但它不起作用。我更喜欢使用键盘希望光标直接指向第一个文本字段。我该怎么做才能从门牌号开始打卡？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:06:21.220

如果出现对话框，请尝试在对话框打开时进行设置`open`：

```
$( "#yourdialog" ).dialog({
   open: function() {
      $("#form1:hnoLbl").focus();
   }
}); 
```

**更新：**
根据您的评论，您无法从 open 事件执行代码，因此请尝试将焦点放在`setTimeout()`对话框已加载后触发的调用上，如下所示：

```
setTimeout(function() {
   document.getElementById("form1:hnoLbl").focus();
}, 400); //adjust the duration accordingly if needed 
```

# actionscript-3 - AS 3 从时间轴导入类文件，而不是文档属性

> ID：13165793
> 
> 赞同：0
> 
> 时间：2012-10-31T19:00:32.437
> 
> 标签：actionscript-3, class

我需要一些帮助。

我有一个类文件，我已经导入它，如下图所示：

![在此处输入图像描述](../Images/6415d24aeea049dca32141b354433497.png)

这个文件的代码是：

```
package 
{
    import flash.display.Sprite;
    import fl.motion.AdjustColor;
    import flash.filters.ColorMatrixFilter;
    import fl.events.SliderEvent;

    public class Main extends Sprite
    {
        private var color:AdjustColor = new AdjustColor();
        private var filter:ColorMatrixFilter;

        public function Main():void
        {
            /* Required to create initial Matrix */

            color.brightness = 0;
            color.contrast = 0;
            color.hue = 0;
            color.saturation = 0;

            /* Add Listeners function */

            addListeners();

        }

        private final function addListeners():void
        {
            colorPanel.brightSL.addEventListener(SliderEvent.CHANGE, adjustBrightness);
            colorPanel.contSL.addEventListener(SliderEvent.CHANGE, adjustContrast);
            colorPanel.hueSL.addEventListener(SliderEvent.CHANGE, adjustHue);
            colorPanel.satSL.addEventListener(SliderEvent.CHANGE, adjustSaturation);
        }

        private final function adjustBrightness(e:SliderEvent):void
        {
            color.brightness = e.target.value;
            update();
        }

        private final function adjustContrast(e:SliderEvent):void
        {
            color.contrast = e.target.value;
            update();
        }

        private final function adjustHue(e:SliderEvent):void
        {
            color.hue = e.target.value;
            update();
        }

        private final function adjustSaturation(e:SliderEvent):void
        {
            color.saturation = e.target.value;
            update();
        }

        private final function update():void
        {
            filter = new ColorMatrixFilter(color.CalculateFinalFlatArray());
            image.filters = [filter];
        }

    }
} 
```

现在我想从时间轴导入这个文件。可能吗; 我从文档属性中删除类名并从时间线（frame1）导入它，例如：import Main

什么都没发生。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:29:38.980

我相信你正在做的事情的更好方法是这样的..

这是一个例子：[http ://dopserv1.dop.com/ColorMatrixExample.swf](http://dopserv1.dop.com/ColorMatrixExample.swf)

现在解释一下；在您的 FLA 中：

```
import Main;

var main:Main = new Main();
addChild(main); 
```

您的 Main.as 课程将是：

```
package 
{
    import flash.display.Sprite;
    import fl.motion.AdjustColor;
    import flash.filters.ColorMatrixFilter;
    import fl.events.SliderEvent;
    import flash.events.Event;

    public class Main extends Sprite
    {
        private var color:AdjustColor = new AdjustColor();
        private var filter:ColorMatrixFilter;
        private var panel:ColorPanel;
        private var image:Image;

        public function Main():void
        {
            /* Required to create initial Matrix */
            color.brightness = 0;
            color.contrast = 0;
            color.hue = 0;
            color.saturation = 0;
            addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            panel = new ColorPanel();
            panel.x = 15;
            panel.y = 15;
            addChild(panel);

            image = new Image();
            image.x = 150;
            image.y = 150;
            addChild(image);

            panel.brightSL.addEventListener(SliderEvent.THUMB_DRAG, adjustBrightness);
            panel.contSL.addEventListener(SliderEvent.THUMB_DRAG, adjustContrast);
            panel.hueSL.addEventListener(SliderEvent.THUMB_DRAG, adjustHue);
            panel.satSL.addEventListener(SliderEvent.THUMB_DRAG, adjustSaturation);
        }

        private function adjustBrightness(e:SliderEvent):void
        {
            color.brightness = e.target.value;
            update();
        }

        private function adjustContrast(e:SliderEvent):void
        {
            color.contrast = e.target.value;
            update();
        }

        private function adjustHue(e:SliderEvent):void
        {
            color.hue = e.target.value;
            update();
        }

        private function adjustSaturation(e:SliderEvent):void
        {
            color.saturation = e.target.value;
            update();
        }

        private function update():void
        {
            filter = new ColorMatrixFilter(color.CalculateFinalFlatArray());
            image.filters = [filter];
        }
    }
} 
```

现在在我的 FLA 库中，我只是导入了一个图像，用它制作了一个影片剪辑，并给它一个链接名称`Image`. 创建后将其从舞台中删除。

然后对于您的`colorPanel`，我将 4 个滑块放到舞台上，根据您班级中的名称命名它们，并从中创建一个实例名称为 的影片剪辑`ColorPanel`。创建后将其从舞台中删除。

另请注意：我将您的 SliderEvent.CHANGE 更改为 SliderEvent.THUMB_DRAG，因为我希望这更多的是您正在寻找的结果。

# sphinx - Sphinx 和 sql_attr_str2ordinal 过滤

> ID：13165797
> 
> 赞同：0
> 
> 时间：2012-10-31T19:00:36.680
> 
> 标签：sphinx

我不确定这是我在 bin-release 中的问题或问题（我使用带有 MySQL 支持 2.0.6-release 的 Win64 二进制文件）。当我找到并按 sql_attr_str2ordinal 字段排序时，我的搜索结果不正确。下面我附上了带有搜索示例的转储。（例如我搜索“test”找到7个结果，然后我想按leng_id排序，键0有效，但另一个键1和2不起作用。从转储我想你可以理解问题）。倾倒：

```
c:\server\sphinx\bin>search.exe -a test
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file './sphinx.conf'...
index 'topicsIndex': query 'test ': returned 7 matches of 7 total in 0.000 sec

displaying matches:
1\. document=18, weight=2602, topic_date_add=Tue Oct 30 01:16:19 2012, topic_publ
ish=1, topic_lang=1, tag=(19)
2\. document=1, weight=2577, topic_date_add=Sun Sep 30 14:32:05 2012, topic_publi
sh=1, topic_lang=1, tag=(2)
c:\server\sphinx\bin>search.exe -a test
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file './sphinx.conf'...
index 'topicsIndex': query 'test ': returned 7 matches of 7 total in 0.000 sec

displaying matches:
1\. document=18, weight=2602, topic_date_add=Tue Oct 30 01:16:19 2012, topic_publ
ish=1, topic_lang=1, tag=(19)
2\. document=1, weight=2577, topic_date_add=Sun Sep 30 14:32:05 2012, topic_publi
sh=1, topic_lang=1, tag=(2)
3\. document=19, weight=2577, topic_date_add=Tue Oct 30 01:17:24 2012, topic_publ
ish=1, topic_lang=2, tag=(20)
4\. document=20, weight=2577, topic_date_add=Tue Oct 30 02:11:30 2012, topic_publ
ish=1, topic_lang=1, tag=(21)
5\. document=3, weight=1556, topic_date_add=Sun Sep 30 15:54:52 2012, topic_publi
sh=1, topic_lang=2, tag=(4)
6\. document=4, weight=1556, topic_date_add=Mon Oct 01 00:48:09 2012, topic_publi
sh=1, topic_lang=0, tag=(5)
7\. document=17, weight=1556, topic_date_add=Tue Oct 30 00:17:39 2012, topic_publ
ish=1, topic_lang=0, tag=(18)

words:
1\. 'test': 7 documents, 15 hits

index 'commentsIndex': query 'test ': returned 3 matches of 3 total in 0.000 sec

displaying matches:
1\. document=242, weight=1646, comment_date=Wed Oct 31 01:40:51 2012, comment_del
ete=0, comment_topic_lang=1
2\. document=1, weight=1606, comment_date=Sun Sep 30 22:55:56 2012, comment_delet
e=0, comment_topic_lang=1
3\. document=241, weight=1606, comment_date=Tue Oct 30 02:11:46 2012, comment_del
ete=0, comment_topic_lang=1

words:
1\. 'test': 3 documents, 4 hits

c:\server\sphinx\bin>search.exe -a test -f topic_lang 0
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file './sphinx.conf'...
index 'topicsIndex': query 'test ': returned 2 matches of 2 total in 0.000 sec

displaying matches:
1\. document=4, weight=1556, topic_date_add=Mon Oct 01 00:48:09 2012, topic_publi
sh=1, topic_lang=0, tag=(5)
2\. document=17, weight=1556, topic_date_add=Tue Oct 30 00:17:39 2012, topic_publ
ish=1, topic_lang=0, tag=(18)

words:
1\. 'test': 7 documents, 15 hits

index 'commentsIndex': search error: .

c:\server\sphinx\bin>search.exe -a test -f topic_lang 1
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file './sphinx.conf'...
index 'topicsIndex': query 'test ': returned 0 matches of 0 total in 0.000 sec

words:
1\. 'test': 7 documents, 15 hits

index 'commentsIndex': search error: .

c:\server\sphinx\bin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:37:48.487

sql_attr_str2ordinal 不用于过滤，仅用于排序。也使用 sql 接口或 api 而不是搜索工具（它更多用于测试）。

# java - 如何使用 Spring MVC 控制器返回一个 html 文件

> ID：13165800
> 
> 赞同：0
> 
> 时间：2012-10-31T19:00:41.657
> 
> 标签：java, spring, spring-mvc

我正在使用 WaveMaker 和 Springsource MVC 的网站上工作。

WaveMaker 生成的条目名为“index.html”。我将所有浏览器端代码导入到 MVC 项目的 /view 目录中。并尝试配置 ContextLoadListener 以将其映射到 uri。使用：

```
@RequestMapping(value = "/index", method = RequestMethod.GET)
public String testIndex() {

    return "index.html";
} 
```

然后我得到以下错误测试：

```
SEVERE: PWC6117: File "C:\glassfish3\glassfish\domains\domain1\eclipseApps\TribblesDashboard\WEB-INF\views\index.html.jsp" not found 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:57:06.010

这可能是由于两个原因。

1.  应用程序上下文中视图解析器的声明。这应该是这样的：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

这表明视图应该放在`WEB-INF/jsp`文件夹中。

2.  第二个是检查`web.xml`.

```
<servlet-mapping>
    <servlet-name>DispatcherServlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>DispatcherServlet</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

检查映射是否正常。

# java - Spring Scope 注释值

> ID：13165806
> 
> 赞同：21
> 
> 时间：2012-10-31T19:01:06.727
> 
> 标签：java, spring

Spring 框架是否提供字符串常量来替换下面示例注释中的“原型”字符串文字值？

```
@Service
@Scope("prototype")
public class CustomerService 
{
......
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-31T19:05:17.790

您可以使用 Spring 的[BeanDefinition](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/BeanDefinition.html)中的范围常量：

*   SCOPE_SINGLETON
*   SCOPE_PROTOTYPE

例如

```
@Scope(BeanDefinition.SCOPE_PROTOTYPE) 
```

# ruby-on-rails - 为各种 Rails 文件启用 ruby 模式

> ID：13165811
> 
> 赞同：0
> 
> 时间：2012-10-31T19:01:30.110
> 
> 标签：ruby-on-rails, emacs, ruby-mode

我正在学习 RoR 和 Emacs，我很高兴地期望这个过程会占用我的余生，我的基本策略是从一组简单的工具开始，然后在我去的时候填满我的工具箱沿着。

为此，我还不想安装 Rinari 或 nXhtml，但我希望在各种 Rails 文件中至少有基本的语法高亮和缩进。我也不想使用 emacs.d “入门工具包”，因为我的另一个目标是了解我的 Emacs 配置的每一行，并保持良好、干净且没有杂物。

问题是 Rails 中的许多文件，如 Gemfile 使用 ruby​​ 语法，但不使用 .rb 后缀，例如 Gemfile，所以我必须为遇到的每个文件打开 ruby​​-mode。这看起来不像 Emacs 的方式。

我在想那里一定有一个 Rails 文件的映射以及它们在那里使用的模式，我可以轻松地将其放入我的配置中，但我似乎找不到它。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:14:33.917

Ruby 模式文件关联：

```
(add-to-list 'auto-mode-alist '("\\.\\(rb\\|ru\\|builder\\|rake\\|thor\\|gemspec\\)\\'" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\(rake\\|thor\\|guard\\|gem\\|cap\\|vagrant\\)file\\'" . ruby-mode)) 
```

其他类型文件的编辑模式：

erb 模板 - [rhtml 模式](https://github.com/eschulte/rhtml)

haml 模板 - [haml 模式](https://github.com/nex3/haml-mode)

苗条模板 -[苗条模式](https://github.com/minad/emacs-slim)

# php - 这个正则表达式在做什么以及在数组中替换的方法

> ID：13165815
> 
> 赞同：0
> 
> 时间：2012-10-31T19:01:44.607
> 
> 标签：php, regex, preg-replace

我想我知道下面在做什么，但不想做出任何假设以确保..

正则表达式是：

```
$value = preg_replace(array('/[^a-z0-9_ -]/', '/[ -]+/', '/^-|-$/'), array('', '-', ''), $str); 
```

数组的第一部分很简单，除了 az、0-9、下划线、空格和连字符之外什么都没有。虽然空格后的连字符不应该被转义吗？

第二部分我不太确定......我认为它是说用一个连字符替换一个或多个空格或一个或多个连字符？我对吗？但是，再次避开连字符？

第三部分有点令人困惑......`|`正则表达式中的字符不是`OR`运算符吗？那么用什么替换连字符或连字符？如果`|`被转义了，那么我会读取它，因为整个字符串需要匹配`-|-`并将其替换为空？

最后......我的想法是否正确，它可以在获得它们的位置处理替换？所以它会首先处理数组中的第一个点，然后用字符串的剩余部分移动到第二个和第三个；因此，例如，如果第一个替换替换了某些东西，那么第二个替换将适用于字符串的修订版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:04:33.207

第一次替换后，字符串将只有字母、数字、空格、下划线和连字符。第二次替换会将所有连续的空格和/或连字符变成一个连字符，第三次替换将删除字符串开头或结尾的连字符。

其他的建议：

*   如果您将连字符放在字符类的开头或结尾，则不需要对字符类中的连字符进行转义。
*   第三个正则表达式`/^-|-$/`具有锚点`^`和`$`，分别表示字符串的开头和字符串的结尾，因此此正则表达式将匹配单个连字符，但前提是它位于字符串的开头或结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:05:10.880

如果连字符位于字符串的末尾或开头，则不需要转义。

第二部分匹配任何连续的空格或连字符（即使它们是混合的）。

第三部分匹配字符串开头的连字符 ( `^-`) 或字符串结尾的连字符 ( `-$`)。

这一切加在一起是删除所有不是字母、数字、下划线、空格或连字符的字符。然后将所有连续的空格和连字符收缩为一个连字符。最后删除前导或尾随连字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:05:00.037

1.  删除除字母数字字符、空格`_`或`-`
2.  替换连续空格或`-`仅替换一个`-`
3.  删除前导和尾随`-`

正如@nickb所说，连字符不需要转义，只要它不在由分隔的一组字符中`[]`

# clojure - 如何在 Clojure cli 中访问默认参数？

> ID：13165818
> 
> 赞同：1
> 
> 时间：2012-10-31T19:01:58.973
> 
> 标签：clojure

我想知道如何在我的 opts 中访问默认参数，在它们被 cli args 解析之后。我正在调用我的程序

`./rexfer --ifn1 --ifm1 --ofn1 --ofn3`

```
(defn parse-args
  "Using the newer cli library, parses command line args."
  [args]
  (cli args
       ["-r" "--ifn1" ".csv input file"  :default "standfiletrans_acre.csv"]
       ["-p" "--ifn2" ".csv input file"  :default "pp_report_to_change.csv"]
       ["-m" "--ifm1" ".csv input file"  :default "columns.csv"]
       ["-v" "--ofn1" ".csv output file" :default "re_values.csv"]
       ["-x" "--ofn2" ".csv output file" :default "re_pp.csv"]
       ["-u" "--ofn3" ".csv output file" :default "re_mixed_use_ratio.csv"]
       ["-t" "--rpt"  ".csv pipe delimited output file" :default "xfer.csv"]))

(defn -main 
  [& args]
  (let [[opts args banner] (parse-args args) 
```

这是 opts 解析后的输出

{:rpt xfer.csv, :ofn3 re_mixed_use_ratio.csv, :ofn2 re_pp.csv, :ofn1 --ofn3, :ifm1 --ifn1, :ifn2 pp_report_to_change.csv, :ifn1 standfiletrans_acre.csv}

(:ifn1 opts) 返回--ifn1，而不是standfiletrans_acre.csv。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T23:46:39.003

当`:default`根本没有给出参数时使用关键字。如果添加参数，不提供值，然后提供下一个参数，它将读取下一个参数作为提供给第一个参数的值：

```
arthur@a:~/args/src/args$ lein run --ifn1 --FOO --ifn2 --ifm1  
All namespaces already :aot compiled.
options are:                                                
{:rpt "xfer.csv"
 :ofn3 "re_mixed_use_ratio.csv",
 :ofn2 "re_pp.csv", 
 :ofn1 "re_values.csv",
 :ifm1 "columns.csv", 
 :ifn2 "--ifm1",   
 :ifn1 "--FOO"} 
arguments are: 
[] 
the banner text is: 
 Usage:                             

 Switches    Default                  Desc           
 --------    -------                  ----   
 -r, --ifn1  standfiletrans_acre.csv  .csv input file 
 -p, --ifn2  pp_report_to_change.csv  .csv input file 
 -m, --ifm1  columns.csv              .csv input file   
 -v, --ofn1  re_values.csv            .csv output file 
 -x, --ofn2  re_pp.csv                .csv output file 
 -u, --ofn3  re_mixed_use_ratio.csv   .csv output file                      
 -t, --rpt   xfer.csv                 .csv pipe delimited output file 
```

在此示例中， :default 值仅用于不在列表中的值。

# c++ - pthread_mutex_lock 返回访问错误

> ID：13165822
> 
> 赞同：3
> 
> 时间：2012-10-31T19:02:32.687
> 
> 标签：c++, multithreading, pthreads, mutex, access-violation

我正在编写一个读取和处理大量数据的程序。为了加快进程，我使用 C++ 的 Pthreads 库实现了多线程读取/处理。但是，当我在互斥锁上调用 pthread_mutex_lock(&lock1) 时，我的程序出错，在 lock1 的地址上给我一个“访问冲突读取位置”错误。我需要在一个类的方法上运行这些线程，这需要在 pthread 库的限制范围内进行一些操作，而我在操作的某个地方犯了错误。以下是我的代码的缩写版本，对不起 tl;dr。在不遗漏任何对多线程至关重要的部分的情况下尽可能缩短它：

```
#include "pthread.h"
#include <assert.h>
#include <stdlib.h>
#include <stdio.h>
#include <Windows.h>

/*Ideally I need to create one instance of this object that has the run_stuff method 
being executed by two different threads.  I need both threads to have access to the 
same private variables, and have ensured that those variables won't be accessed at the 
same time. That is the end goal of my multithreading*/

class test_obj {
public:
    test_obj();
    void run_stuff(int); //the method I want to run on two different threads using the same private variables
private:
    int count;
    void switch_gate1();//switches the value of gate 1
    void switch_gate2();
    bool test_gate1(int); //checks to see if gate 1 equals thread id
    bool test_gate2(int);
    bool gate1, gate2; //can only be accessed under a locked mutex
    pthread_mutex_t lock1, lock2;
};

/*This structure is what I pass to pthread_create*/
struct thread_args { //arguements passed to a thread when it is created
    thread_args() {a = new test_obj;}; //constructor: create new test_obj instance
    test_obj *a; //pointer to a test_obj instance, I think both threads receive a pointer to the same instance
    int t_id; //ID of thread being created
};

class thread_helper { //managing function to create threads and call run_stuff method
public:
    thread_helper() {args = new thread_args;};
    void my_method(); //called from main, creates threads and runs them
private:
    thread_args *args; //pointer to a thread_args obj
    static void* execute(void *ptr); //method to be run by created threads
    pthread_t m_thread1, m_thread2; //the two threads
};

int main() {
    thread_helper c; 
    c.my_method();
    return 0;
}

test_obj::test_obj() {
    count = 0; //not important right now, test variable
    gate1 = 0; //thread 0 gets first access
    gate2 = 0; //thread 0 gets first access
}

void thread_helper::my_method() {
    int error_code;
    thread_args *a, *b;
    *a = *b = *args;
    a->t_id = 0;
    b->t_id = 1;
    error_code = pthread_create(&m_thread1, NULL, &thread_helper::execute, (void*)a); //create thread 0 to run execute method
    assert(0 == error_code); //check for success
    error_code = pthread_create(&m_thread2, NULL, &thread_helper::execute, (void*)b);
    assert(0 == error_code);
    error_code = pthread_join(m_thread1, NULL);//wait for thread 0
    assert(0 == error_code);
    error_code = pthread_join(m_thread2, NULL); //wait for thread 1
    assert(0 == error_code);
}

void* thread_helper::execute(void *ptr) {
    thread_args *b = (thread_args*)ptr;//recast ptr back into thread_args type
    int t_id = b->t_id;//save thread id
    b->a->run_stuff(t_id);//access test_obj object from thread_args (should be same object for both threads) and run method
    return NULL;
}

void test_obj::run_stuff(int t_id) {
    for(int i = 0; i < 2; i++) { //run twice (give a chance for threads to flip flop)
    //-----Part 1
    while(!test_gate1(t_id)){//while not allowed to proceed
        Sleep(500);//sleep
    }
    printf("thread %d reporting in\n", t_id);//thread has gained access to part 1, print id
    switch_gate1();//allow opposite thread in
    //-----Part 2
    while(!test_gate2(t_id)){//wait for access to part 2
        Sleep(500);
    }
    //count++; //just a dummy place for now, will be used later to check access
    switch_gate2();//allow opposite thread in
    }
}

bool test_obj::test_gate1(int t_id) {//returns true if id of calling thread matches value of gate 1
//a return value of true means a thread is allowed to proceed, false otherwise
    pthread_mutex_lock(&lock1);**//secure access to gate THIS IS WHAT ERRORS OUT**
    if(t_id == gate1){//check gate
        pthread_mutex_unlock(&lock1);//release gate
        return true;//return
    }
    else {
        pthread_mutex_unlock(&lock1);
        return false;
    }
}

bool test_obj::test_gate2(int t_id) {
    pthread_mutex_lock(&lock2);
    if(t_id == gate2){
        pthread_mutex_unlock(&lock2);
        return true;
    }
    else {
        pthread_mutex_unlock(&lock2);
        return false;
    }
}

/*Switch gate functions are designed to obtain access to the boolean gate (prevent the opposing thread from checking the gate by means of mutex), then switch the value of the boolean gate and release the gate for the other thread to check.*/
void test_obj::switch_gate1() {
    pthread_mutex_lock(&lock1);//secure access to gate
    gate1 = !gate1; //flip gate
    pthread_mutex_unlock(&lock1); //release gate
}

void test_obj::switch_gate2() {
    pthread_mutex_lock(&lock2);
    gate2 = !gate2;
    pthread_mutex_unlock(&lock2);
} 
```

对不起格式。任何人都知道为什么该锁会出现访问冲突错误？我试过把它放在任何地方。私人的、公共的，甚至是全球性的作为最后的手段。他们都给出了同样的错误。提前致谢。

编辑：修复了将我的 thread_args 变量传递给 pthreads_create 的错误。之后现在可以按预期工作并进行初始化/销毁修复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T19:12:12.030

你似乎没有初始化你的互斥锁。我看不到您在哪里声明了互斥锁。

在你的声明变量`test_obj`：

```
pthread_mutex_t lock1;
pthread_mutex_t lock2; 
```

将此添加到您的`test_obj`构造函数中：

```
test_obj::test_obj() {
    ...
    lock1 = PTHREAD_MUTEX_INITIALIZER;
    lock2 = PTHREAD_MUTEX_INITIALIZER;
} 
```

将此添加到`test_obj`析构函数中：

```
test_obj::~test_obj() {
    pthread_mutex_destroy(&lock1);
    pthread_mutex_destroy(&lock2);
} 
```

# javascript - 使用 Flowplayer，自动播放错误不起作用

> ID：13165825
> 
> 赞同：1
> 
> 时间：2012-10-31T19:02:47.013
> 
> 标签：javascript, video, flv, flowplayer, flash-video

在 Wordpress 网站上，我正在尝试播放 .flv 文件。我正在使用客户端在其先前版本的站点上使用的 Flowplayer 插件。新站点在 Wordpress 中，一个更改请求是视频不会自动播放。

这是我正在使用的代码：

```
<a id="player" style="display: block; width: 475px; height: 370px;" href="[full path to file]/201110Janek.flv">
<object id="player_api" width="100%" height="100%" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowfullscreen" value="true" />
<param name="allowscriptaccess" value="always" />
<param name="quality" value="high" />
<param name="autoplay" value="false" />
<param name="cachebusting" value="false" />
<param name="flashvars" value="config={&quot;playerId&quot;:&quot;player&quot;,&quot;clip&quot;:{&quot;url&quot;:&quot;[full path to file]/201110Janek.flv&quot;},&quot;playlist&quot;:[{&quot;url&quot;:&quot;[full path to file]/201110Janek.flv&quot;}]}" />
<param name="src" value="[full path to file]/flowplayer-3.2.15.swf" />
<embed id="player_api" width="100%" height="100%" type="application/x-shockwave-flash" src="[full path to file]/flowplayer-3.2.15.swf" allowfullscreen="true" allowscriptaccess="always" quality="high" autoplay="false" cachebusting="false" flashvars="config={&quot;playerId&quot;:&quot;player&quot;,&quot;clip&quot;:{&quot;url&quot;:&quot;[full path to file]/201110Janek.flv&quot;},&quot;playlist&quot;:[{&quot;url&quot;:&quot;[full path to file]/201110Janek.flv&quot;}]}" /></object></a>

<script type="text/javascript">// <![CDATA[flowplayer("player", "[full path to file]/flowplayer-3.2.15.swf", {
clip: {
    // these two configuration variables does the trick
    autoPlay: false,
    autoBuffering: true}

    });
// ]]></script> 
```

一切正常，视频播放正常，但它会自动播放，尽管脚本中有自动播放参数和自动播放设置。

关于我做错了什么有什么建议吗？

# node.js - 用于将 get/put 逻辑抽象到存储的 node.js 基类

> ID：13165828
> 
> 赞同：1
> 
> 时间：2012-10-31T19:03:00.127
> 
> 标签：node.js, architecture, model, middleware

我想知道是否有人有任何关于将 get/put 逻辑抽象到存储的 node.js 基“类”的好例子。例如伪代码。我意识到它会原型继承，我只是在寻找一种干净的方法来做到这一点，这样我就可以为每个功能分割文件。或者推出我们自己的 ORM 的最佳方式是什么，但非常愚蠢，只有模型和这个基类？模型值得吗？

```
class base

  function get(id, cb) {
    cb(null, obj);
  }

  function put(id, obj, cb) {
    cb(null, obj);
  } 
```

然后我可以有“儿童”课程

```
class function1
  function getFunction1(id, cb) {
    // do some other stuff.
    super.get(id, cb);
  } 
```

所以作为使用它使它变得干净。

```
var function1 = require('./function1');
function1.getFunction1('id' function(err, result) {});
function1.putFunction1(''); 
```

值得还是你有一个例子让这个“功能”全部定义在一个地方，就像中间件/插件一样？

# c# - 复杂事件处理（即 Progress Apama）框架和 C# 有什么区别？

> ID：13165834
> 
> 赞同：-5
> 
> 时间：2012-10-31T19:03:35.313
> 
> 标签：c#, events, apama

我在金融部门工作，我们组织中有一个产品主要用于监控各种交易事件以生成警报。该产品是用 C# 开发的，但为了跟踪和引发有意义的事件/警报，系统的另一个模块是在 Progress 的 Apama 中开发的。由于我对产品了解不多，我怀疑为什么事件和警报处理需要另一个框架。请指导。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:32:30.223

为什么使用 C# 而不是汇编程序？因为它是更高级别的抽象，可以让您更快地完成相同的事情，并且错误更少。

出于同样的原因，您会使用像 Apama 这样的 CEP 产品。它旨在使驱动编程比使用其他技术更快、更容易。

# grails - 无限循环 BootStrap.groovy 同时保存数据 grails 2.1.1

> ID：13165837
> 
> 赞同：0
> 
> 时间：2012-10-31T19:04:03.063
> 
> 标签：grails, grails-2.0

我在 BootStrap.groovy 的 init 闭包中有以下代码

```
private def setupDefaultAdmin = {

        log.info "Adding default user to system"

        // create the super user/admin account

        if (SentryUser.findAllByUsername("test@test.org") == null) {
        def admin = new SentryUser(username: "test@test.org",password: 'password',
                enabled: true).save(failOnError: true)

        admin = new SentryUser(username: "admin@test.org",password: 'password',
                enabled: true).save(failOnError: true)
        }

    } 
```

当我将此应用程序部署到 JBOSS 容器 7.1 版时，我在部署时不断进入无限循环。我的数据库配置如下

```
production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:prodDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:23:31.793

该问题与 grails.logging.jul.usebridge = true 有关

所以请记住，如果您在 JBOSS 上看到任何异常并在 prod 中打开此设置，则可能会导致问题。

# jquery - 使用 jQuery 确定 Checkbox 是否被选中

> ID：13165840
> 
> 赞同：23
> 
> 时间：2012-10-31T19:04:14.017
> 
> 标签：jquery, dom

> **可能重复：**
> [使用 jQuery 检查复选框选中的属性](https://stackoverflow.com/questions/901712/check-checkbox-checked-property-using-jquery)

访问复选框以检查它是否被选中的正确方法是什么？是否有必要先检查该元素是否存在于 DOM 中，然后查看是否已检查？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-31T19:07:03.840

您将使用选中的选择器以及 Jquery 的 is 方法

```
if($('#chkbox').is(':checked')){

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T19:07:04.853

您可以使用以下条件查看复选框是否被选中。

```
 if( $("input:checked").length == 1 ) {
           //Checkbox is selected and Do stuff here
       } 
```

# workspace - 删除前开发人员工作区

> ID：13165843
> 
> 赞同：1
> 
> 时间：2012-10-31T19:04:20.783
> 
> 标签：workspace

我有一个新的开发人员。他使用带有映射工作区的前开发人员框

`C:\TFS10`

我尝试将新人映射到同一位置（由于 FinalBuilder 限制，**不能切换文件夹）。**我收到一条错误消息，指出 EXDEVELOPERUSERID 的工作区已经存在。如何删除此 ex-dev 的 TFS 中的工作区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T21:54:45.847

你有几个选择。首先打开一个visual studio 2010命令提示符并使用[TF Workspace命令](http://msdn.microsoft.com/en-us/library/y901w7se%28v=vs.100%29.aspx)

或者，安装[TFS sidekicks](http://www.attrice.info/cm/tfs/)并使用 UI 搜索服务器上的工作区并将其从那里删除。

对于这两种方法，您需要以有权删除其他用户工作区（项目管理员）的帐户身份运行

# android - Android 用 admob 广告替换现有视图

> ID：13165845
> 
> 赞同：0
> 
> 时间：2012-10-31T19:04:28.677
> 
> 标签：android, layout, admob, adview

我正在我的 android 应用程序中实施广告。它们工作正常，但需要几秒钟才能弹出，然后调整我的布局元素的大小。我想在广告加载之前预先调整布局元素的大小，这样它们就不会移动。

有没有办法在加载后用广告视图替换现有视图（占用广告所在的空间）？有没有其他方法可以达到同样的效果？

谢谢

（另外，我以编程方式添加广告视图，而不是通过 XML，但如果需要，我可以更改它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:24:44.343

假设您正在使用`AdSize.BANNER`，则 AdView 的高度为 50dp。您可以在 XML 中合并 AdView 并为其指定 50dp 的高度，或者您可以在 XML 中定义一个高度为 50dp 的容器布局，并以编程方式将 AdView 添加到容器布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:39:35.700

我最终做的是设置 adView 的最小高度等于 50 像素乘以密度因子（1.5 表示高，1 表示中等，0.75 表示低），因为这些值对应于横幅的广告高度。完美运行。

# android - 应用强制关闭；无法实例化活动

> ID：13165850
> 
> 赞同：1
> 
> 时间：2012-10-31T19:04:37.573
> 
> 标签：android, android-manifest, forceclose

我一直在研究和研究这个问题

*   库被标记为库
*   活动在清单中声明

到目前为止，这是我想出的，在过去的一个小时里我一直被困住。

有人请帮忙。

错误：

```
10-31 18:58:23.654: E/AndroidRuntime(398): FATAL EXCEPTION: main
10-31 18:58:23.654: E/AndroidRuntime(398): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mikenning.chemistrywizard/com.mikenning.chemistrywizard.EquationBalancer}: java.lang.NullPointerException
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.os.Looper.loop(Looper.java:123)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-31 18:58:23.654: E/AndroidRuntime(398):  at java.lang.reflect.Method.invokeNative(Native Method)
10-31 18:58:23.654: E/AndroidRuntime(398):  at java.lang.reflect.Method.invoke(Method.java:507)
10-31 18:58:23.654: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-31 18:58:23.654: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-31 18:58:23.654: E/AndroidRuntime(398):  at dalvik.system.NativeStart.main(Native Method)
10-31 18:58:23.654: E/AndroidRuntime(398): Caused by: java.lang.NullPointerException
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.Activity.findViewById(Activity.java:1647)
10-31 18:58:23.654: E/AndroidRuntime(398):  at com.mikenning.chemistrywizard.EquationBalancer.<init>(EquationBalancer.java:13)
10-31 18:58:23.654: E/AndroidRuntime(398):  at java.lang.Class.newInstanceImpl(Native Method)
10-31 18:58:23.654: E/AndroidRuntime(398):  at java.lang.Class.newInstance(Class.java:1409)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-31 18:58:23.654: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
10-31 18:58:23.654: E/AndroidRuntime(398):  ... 11 more 
```

类文件：

```
public class EquationBalancer extends Activity {

    HorizontalScrollView reactants;

    EditText editText = new EditText(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.balancelayout);

        reactants = (HorizontalScrollView) findViewById(R.id.reactants);

        EditText reactantNumberField = (EditText) findViewById(R.id.reactantsNumber);
        final int reactantNom = Integer.parseInt(reactantNumberField.getText().toString());

        Button ok = (Button) findViewById(R.id.reactantsNumberOk);
        ok.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                for (int i = 1; i < reactantNom; i++) {
                    editText.setHint("compound");
                    reactants.addView(editText);
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.balancelayout, menu);
        return true;
    }

} 
```

安卓清单：

```
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mikenning.chemistrywizard"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:screenOrientation="portrait" >
        <activity
            android:name="EquationBalancer"
            android:label="@string/title_activity_equation_balancer" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

XML 布局文件：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/reactantsHowMany"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="10dp"
        android:text="@string/reactantsHowMany"
        android:textSize="18dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

    <EditText
        android:id="@+id/reactantsNumber"
        android:paddingTop="5dp"
        android:layout_width="65dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/reactantsHowMany"
        android:layout_marginLeft="60dp"
        android:inputType="number"
        android:hint="e.g. 4" />

    <Button 
        android:id="@+id/reactantsNumberOk"
        android:paddingTop="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/reactantsHowMany"
        android:layout_alignParentRight="true"
        android:layout_marginRight="60dp"
        android:layout_alignBottom="@id/reactantsNumber"
        android:text="Set" />

    <HorizontalScrollView
        android:id="@+id/reactants"
        android:paddingTop="5dp"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_below="@id/reactantsNumber" >

    </HorizontalScrollView>

</RelativeLayout> 
```

更新的类文件（针对每个建议更新）：

```
 public class EquationBalancer extends Activity {

    HorizontalScrollView reactants;
    EditText reactantNumberField;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.balancelayout);

        reactants = (HorizontalScrollView) findViewById(R.id.reactants);

        final EditText editText = new EditText(this);
        editText.setHint("compound");

        reactantNumberField = (EditText) findViewById(R.id.reactantsNumber);

        Button ok = (Button) findViewById(R.id.reactantsNumberOk);
        ok.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int reactantNom = 0;
                try{
                    reactantNom = Integer.parseInt(reactantNumberField.getText().toString());
                } catch (NullPointerException e) {
                    //ignore error
                }
                if (reactantNom != 0) {
                    for (int i = 1; i < reactantNom; i++) {
                        try{
                            reactants.addView(editText);
                        } catch (Exception e) {
                            //ignore
                        }
                    }
                } else if (reactantNom == 1) {
                    try {
                        reactants.addView(editText);
                    } catch (Exception e) {
                        //ignore
                    }
                } else {
                    Toast toast = Toast.makeText(EquationBalancer.this, "Please input the number of reactants", 
                            Toast.LENGTH_SHORT);
                    toast.show();
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.balancelayout, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:14:32.633

您的代码无效。这一行：

```
Button ok = (Button) findViewById(R.id.reactantsNumberOk); 
```

是你的罪魁祸首。`ok`您在视图膨胀之前初始化变量，因此`ok`是`null`. 你必须转向`ok = (Button) findViewById(R.id.reactantsNumberOk);`你的`onCreate()`after`setViewContent()`方法，才能`findViewById()`真正找到任何有用的东西。

这同样适用于以下行：

```
final EditText reactantNumberField = (EditText) findViewById(R.id.reactantsNumber);
final int reactantNom = Integer.parseInt(reactantNumberField.getText().toString());
HorizontalScrollView reactants = (HorizontalScrollView) findViewById(R.id.reactants); 
```

这些都是空的，一旦你`ok`出于同样的原因修复了上述初始化，你的应用程序仍然会崩溃。

在全局范围内引用您的 UI 元素也没有任何意义。有效代码应如下所示：

```
public class EquationBalancer extends Activity {

    HorizontalScrollView reactants;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.balancelayout);

        EditText reactantNumberField = (EditText) findViewById(R.id.reactantsNumber);
        int reactantNom = Integer.parseInt(reactantNumberField.getText().toString());

        reactants = (HorizontalScrollView) findViewById(R.id.reactants);

        Button ok = (Button) findViewById(R.id.reactantsNumberOk);    
        ok.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                EditText editText;
                for (int i=1; i < reactantNom; i++) {
                    editText = new EditText(this);
                    editText.setHint("compound");
                    reactants.addView(editText);
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.balancelayout, menu);
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:15:53.793

在使用 setContentView() 扩展根布局之前，您不能在布局中设置对视图的引用。

```
 final EditText reactantNumberField; 
```

然后在onCreate，setContentView()之后

```
 reactantNumberField = (EditText) findViewById(R.id.reactantsNumber); 
```

# python - Lighttpd，fastcgi 进程的命令行参数

> ID：13165851
> 
> 赞同：2
> 
> 时间：2012-10-31T19:04:54.547
> 
> 标签：python, django, virtualenv, fastcgi, lighttpd

我正在阅读 lighttpd 中[mod_fastcgi](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModFastCGI)的文档，它说：

*“bin-path”：本地 FastCGI 二进制文件的路径，如果没有本地 FastCGI 正在运行，则应启动该二进制文件*

如果我想让 lighttpd 直接启动我的 fastcgi 进程，并且该进程是由 python 脚本创建的，该怎么办？像这样的东西：

```
# bang omitted... I need to use python from virtualenv
# File runfastcgi.py
import os
import sys

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "atc.settings")
from django.core.management import execute_from_command_line
execute_from_command_line(['manage.py', 'runfcgi', ... ]) 
```

此外，我正在使用 virtualenv，并且我有办法从环境中导出所有路径，甚至是用于 virtualenv 的 python 解释器的路径......唯一的问题是，根据 mod_fastcgi 文档，我只能通过*二进制文件*的路径，所以，我似乎做不到：

```
 bin-path => (env.ATC_VIRTUALENV + 'bin/python' + ' ' + 'runfastcgi.py') 
```

我错了吗？有没有要求 lighttpd 使用 virtualenv python 来执行自定义 runfastcgi.py？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:10:19.570

事实证明，您可以将整个命令行放入 bin-path 中。他们应该在文档中添加它。

# php - 在php中插入Javascript变量

> ID：13165857
> 
> 赞同：0
> 
> 时间：2012-10-31T19:05:20.730
> 
> 标签：php, javascript, variables, escaping, aweber

我将一些变量从一个页面表单传递到另一个来自 AWeber 的表单。他们提供 Javascript 来做到这一点，但我试图用 PHP 来做，因为我不知道 javascript。但是，变量名中有空格和 ()，这是 PHP 不喜欢的，所以我试图弄清楚如何让变量识别.....

AWeber 使用输入字段名称，例如“名称（awf_first）”和“名称（awf_last）”，所以我的 php 是：

```
<?php 
    $email=$_GET['email'];
    $awf_first=$_GET['name (awf_first)'];
    $awf_last=$_GET['name (awf_last)']; ?> 
```

但是第一个和最后一个字段不起作用-我假设是因为空间和括号。我无法更改它们，因为这就是 AWeber 使用的……有没有办法逃脱它们或让它们以某种方式工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:14:50.997

尝试：

```
$awf_first=$_GET['name_(awf_first)'];
$awf_last=$_GET['name_(awf_last)']; 
```

当 PHP 转换查询字符串中传递的变量名称中的下划线空格时。

对于这种 PHP 行为的解释，它在[https://stackoverflow.com/a/283781/352672中有很好的解释](https://stackoverflow.com/a/283781/352672)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:19:30.673

我曾经做过相反的事情（PHP 到 Javascript），但我很确定它也适用于 Javascript 到 PHP。这不是最干净的解决方案，我认为 AJAX 更好，但您仍然可以尝试一下。

首先，您有一个 PHP 文件，该文件作为 Javascript 文件传递​​，此行位于 PHP 文件的顶部。

```
<?php header('Content-type: text/javascript'); ?> 
```

我以前做的是这个（PHP到Javascript）：

```
var javascriptVariable = <?php echo("lala") ?>; 
```

但对你来说，情况正好相反（Javascript 到 PHP）：

```
<? $var = ?> javascriptVariable; 
```

让我知道它是否有效。

# c# - IDisposable 不分配给变量

> ID：13165858
> 
> 赞同：1
> 
> 时间：2012-10-31T19:05:24.340
> 
> 标签：c#, .net, idisposable

通常我会这样做：

```
using (SqlCommand cmd = new SqlCommand("XXXX", cnn))
{
    using (SqlDataReader dr = cmd.ExecuteReader())
    {
        //xxxxxx  
    }
} 
```

甚至这样：

```
using (SqlCommand cmd = new SqlCommand("XXXX", cnn))
using (SqlDataReader dr = cmd.ExecuteReader())
{
    //xxxxxx  
} 
```

但是这个呢：

```
using (SqlDataReader dr = new SqlCommand("XXXX", cnn).ExecuteReader())
{
    //xxxxxx  
} 
```

即使我没有将它分配给变量，它是否会为 SqlCommand 调用 Dispose()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T19:06:54.683

> 即使我没有将它分配给变量，它是否会为 SqlCommand 调用 IDisposable？

`Dispose()`不，它会调用`SqlDataReader`( `dr`)，因为那是表达式返回的对象。

# c# - OOPS 和抽象

> ID：13165859
> 
> 赞同：0
> 
> 时间：2012-10-31T19:05:41.483
> 
> 标签：c#, oop

我不是以英语为母语的人。所以，我问这个问题是为了知道在教授 C# 或任何其他 OOP 语言时使用“抽象”这个词意味着什么。大多数书籍都说“类允许开发人员创建抽象”。这里的抽象一词是否代表了开发人员试图解决的问题的一个方面？如果是这样，它如何符合 OOPS 中“抽象”一词的一般含义，即只向外界公开必要的内容，并使其他所有内容成为实现细节？可能是，我们可以将“抽象”一词定义为代表问题的某些方面，特别注意隐藏所有内容，但与班级交谈是必不可少的。任何意见都非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T19:09:35.883

抽象是表示更复杂的、通常是现实世界的概念的简化方式。或者，如评论中所述，它是现实世界概念的*模型*。如果你正在创建一个应用程序来管理面包的销售，你可能有一个像下面这样的对象：

```
public class Loaf
{
    public string Name { get; set; }
    public TimeSpan BakingTime { get; set; }
    public Decimal Price { get; set; }
} 
```

该类`Loaf`是真正面包的抽象，因为它将其简化（抽象）到适合在编程上下文中操作的程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:10:09.830

> 类允许开发人员创建抽象

在 OOP 的上下文中，这似乎只是指什么是类：对象的表示。从某种意义上说，它是抽象的，它只描述了对象，而没有体现它。类（对象）的实际实例然后实现抽象。

如果您可以发布实际报价可能会有所帮助，以便我们可以在上下文中评估其含义。

# java - 打印方法中的局部变量

> ID：13165863
> 
> 赞同：-7
> 
> 时间：2012-10-31T19:06:00.180
> 
> 标签：java, methods, computer-science, local-variables, bluej

我写了一个打印方法，告诉用户祝贺他们，但同时我有另一个名为下载的字段，我想在调用 thr 打印方法后更新字段下载，谢谢，我正在使用 bluej

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:10:23.643

代替

```
int num;
 this.noOdDownloads = num;
 this.noOdDownloads = num + 1; 
```

做

```
 this.noOdDownloads++; 
```

你的原始程序有两个问题：1）`num`没有实例化，这是编译器会抱怨的，2）即使你实例化了它，比如 with `int num=0;`， `num`实际上是方法中的局部变量。每次运行该方法时，都会再次实例化局部变量并重置为`0`. 然后，当您将其值分配给 时`noOdDownloads`，后者也将重置为`0`。

# c++ - 无法在 Visual Studio C++ 调试器中查看数组？

> ID：13165864
> 
> 赞同：3
> 
> 时间：2012-10-31T19:06:00.923
> 
> 标签：c++, visual-studio-2010

我有以下代码：

```
char *DecompressChunk(Node *startNode, int arraySize)
{
    char *cubeArray = new char[arraySize]; 
```

当我在那之后放一个断点时，arraySize 为 18，当我将鼠标悬停在数组上尝试查看它时，只显示第一个元素，没有其他内容，我可以打印它们，它工作正常，但我无法查看它们与 VS。您如何设置它以便您可以查看所有这些，或者可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T19:12:52.387

您可以通过在监视窗口中添加逗号后跟大小来告诉调试器数组的大小（这称为格式说明符）：

```
cubeArray,18 
```

您不能使用变量或任何东西作为数组大小。

这里有一些[其他的技巧](http://blogs.msdn.com/b/vcblog/archive/2006/08/04/689026.aspx)。

* * *

如果您只想让工具提示向您展示更多信息，这将无济于事；它只能在监视窗口中使用。

尽管微软可能会在某些特殊情况下改进数组的工具提示，但由于 C++ 中数组的性质，总的来说这将非常困难；指向数组元素的指针无法知道该数组的边界。这对调试器的影响可能是最不重要的问题之一。这造成的其他问题会影响程序的安全性和正确性。

如果您避免使用原始数组而使用更智能的类型，那么调试器可以提供更好的工具提示。例如，调试器已经知道如何显示`std::vector`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:44:13.527

您可以将变量用作动态数组的大小

例如

```
int* x = new int [size]; 
```

创建的数组必须通过以下方式手动释放：

```
delete[] x; 
```

现在回到操作，我看不出为什么它们都不会显示的原因，除非它们还没有被创建，或者 VS 可能无法识别普通指针和数组指针之间的区别，它们被计算机看到作为同一件事

# android - 如何获得实际的活动？

> ID：13165865
> 
> 赞同：0
> 
> 时间：2012-10-31T19:06:00.430
> 
> 标签：android, android-activity, findviewbyid

也许这是有史以来最愚蠢的问题，但我在获取实际`Activity`对象时遇到了一些麻烦。

我的目的：

为了从不同的s中提取错误处理，我用静态方法`Activity`做了一个类。`ErrorHandler`

例如，这样的方法如下所示：

```
public class ErrorHandler {
    ...
    public static ErrorTuple checkPlaceInput(Activity activity){
        EditText edit = (EditText) activity.findViewById(R.id.et_nbge_place);
        if(edit.getText().toString().equals("") || edit.getText()==null){
            return new ErrorTuple(false, "Please enter a place!");
        }
        return new ErrorTuple(true, "everything is fine");
    }
} 
```

为了访问该`findViewById(...)`方法，我必须传递`Activity`as 参数。正如我在这里阅读的不同问题一样，没有其他方法可以`View`从 running 外部访问 s `Activity`。但是，从它`Activity`本身，我怎样才能访问这个对象呢？the`Context`和 the`MyActivity.class`都不是`Activity`对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:09:19.717

使用[它](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)来获取当前对象。在 Activity 中，您可以直接调用 findViewByID 而无需任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:09:30.117

如果您从 Activity 调用该方法，只需执行`checkPlaceInput( this )`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:11:10.480

使用`this.`关键字 - 它是您的对象实例。在活动范围内，您可以直接`findViewById()`调用

# ios - UIWebView 不会使用 UTF8String 显示

> ID：13165872
> 
> 赞同：0
> 
> 时间：2012-10-31T19:06:47.210
> 
> 标签：ios, uitableview, utf-8, uiwebview, sqlite

我正在尝试从 sqlite 数据库中提取文章并将它们显示在表格视图中。选择表格单元格时，应该与源页面一起显示 web 视图。到目前为止，除了显示源页面外，一切正常。这是我的一些代码：

（在初始化方法中）

```
 articles = [[NSMutableArray alloc] init];
    webPages = [[NSMutableArray alloc] init];
    int arrayCount = data.count;
    int i;
    for (i = 0; i < arrayCount; i++) {
        Item *currentItem = [[Item alloc] init];
        currentItem = [data objectAtIndex:i];
        [articles insertObject:currentItem.itemTitle atIndex:i];
        [webPages insertObject:currentItem.detailURL atIndex:i];
        NSLog(@"%@", [webPages objectAtIndex:i]);
        //[webPages insertObject:@"http://onlyfans.cstv.com/schools/tul/sports/w-volley/recaps/102812aaa.html" atIndex:i];  -- >this works fine. i got this url from the nslog above.

    }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath    *)indexPath {
    WebViewController *webViewController = [[WebViewController alloc] initWithString:[webPages objectAtIndex:
    indexPath.row]];
    [self.parentViewController.navigationController pushViewController:webViewController animated:YES]; 
```

这是从数据库中获取有关每篇文章的信息的方法...

```
if(sqlite3_open([self.databasePath UTF8String], &database) == SQLITE_OK) {

    NSLog(@"DataLoader::readItemsFromDatabase : database open successful!");

    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &compiledStatement, NULL) == SQLITE_OK) {
        NSLog(@"select ok.");
        // Loop through the results and add them to the feeds array
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
            // Read the data from the result row

            int lineItemsID=sqlite3_column_int(compiledStatement, 0);

            NSLog(@"DataLoader::readItemsFromDatabase : source id [%i]", lineItemsID);

            NSString *aItemTitle = @" ";
            NSString *aPublishDate = @" ";
            NSString *aDetailURL = @" ";
            NSString *aDesc = @" ";

            if (sqlite3_column_text(compiledStatement, 2) != nil) {
                aItemTitle=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];
                NSLog(@"DataLoader::readItemsFromDatabase :row>>id %i, itemTitle %s",lineItemsID,sqlite3_column_text(compiledStatement, 2));
                // NSLog(@"DataLoader::readSourcesFromDatabase :row>>id %i, name %s",lineItemsID,aItemTitleL);
            }

            if (sqlite3_column_text(compiledStatement, 3) != nil) {
                aPublishDate=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];
                NSLog(@"DataLoader::readItemsFromDatabase :row>>id %i, publishDate %s",lineItemsID,sqlite3_column_text(compiledStatement, 3));
            }

            if (sqlite3_column_text(compiledStatement, 4) != nil) {
                aDetailURL=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 4)];
                NSLog(@"DataLoader::readItemsFromDatabase :row>>id %i, detail URL %s",lineItemsID,sqlite3_column_text(compiledStatement, 4));

            }

            if (sqlite3_column_text(compiledStatement, 5) != nil) {
                aDesc=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 5)];
                NSLog(@"DataLoader::readItemsFromDatabase :row>>id %i, desc %s",lineItemsID,sqlite3_column_text(compiledStatement, 5));
            }

            Item  *item= [[Item alloc] init];
            item.itemTitle = aItemTitle;
            item.publishDate = aPublishDate;
            item.detailURL = aDetailURL;
            item.desc = aDesc; 
```

我不明白为什么我可以从 currentItem 对象中获取 URL 字符串并将其显示在 NSLog 中，但我不能直接使用它来打开 webview。有人遇到过这种问题吗？

谢谢你的帮助！

稀树草原

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:15:56.687

尝试 nslog：

```
[webPages objectAtIndex:indexPath.row]; 
```

在你的 didSelectRowAtIndexPath 中，看看它返回什么。

此外，问题可能出在您声明网页的位置。尝试使用：

```
@property(nonatomic, strong) NSMutableArray *webPages; 
```

合成：

```
webPages = _webPages; 
```

并尝试在 viewDidLoad 中初始化您的网页：

```
self.webPages = [[NSMutableArray alloc] init]; 
```

# javascript - Javascript if 语句问题

> ID：13165876
> 
> 赞同：0
> 
> 时间：2012-10-31T19:07:00.080
> 
> 标签：javascript

我对这个基本条件语句有疑问..

当 var 等于 9 时，脚本可以工作，但一旦达到 10 及以上，它指的是“running low”，这仅适用于数字 5 及以下...请帮助..

谢谢你。

```
<script type="text/javascript">

var inventory = "9";

if( inventory == "Sold Out" ){
   document.write("<b>Sold Out</b>");

}else if( inventory >= "6" ){
   document.write("<b>more than 5</b>");

}else if( inventory <= "5" ){
   document.write("<b>running low</b>");

}else{
  document.write("<b>error</b>");
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:09:35.587

您应该比较数字而不是字符串，因此您的情况会出错，试试这个

```
<script type="text/javascript">
var inventory = 9;
  if( inventory == "Sold Out" ){
     document.write("<b>Sold Out</b>");
  }
  else if( inventory >= 6 ){
   document.write("<b>more than 5</b>");
  }
  else if( inventory <= 5 ){
   document.write("<b>running low</b>")
  }
  else{
    document.write("<b>error</b>");
 }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:19:59.237

正如其他人指出的那样，问题在于引用数字时的含义与未引用时的含义不同。

例如：

```
var a = 2;

console.log(a == "2"); //returns true
console.log(a === "2"); //returns false 
```

在大多数情况下，我建议在 JavaScript 中使用**“严格”运算符。**

文档可以在[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)找到。

* * *

此外，您可能需要考虑使用 switch 语句，因为它更易于阅读和维护。

```
var feedback,
    inventory = 9;

switch (true) {
    case inventory === 'Sold Out' : feedback = 'Sold Out'; break;
    case inventory >= 6           : feedback = 'more than 5'; break;
    case inventory <= 5           : feedback = 'running low'; break;
    default : feedback = 'error'; break;
}

document.write('<b>' + feedback + '</b>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:09:52.607

您应该在比较中使用数字而不是字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T19:10:39.480

您的问题是您正在比较字符串而不是数字，请尝试使用`inventory >= 5`

示例：http: [//jsfiddle.net/UwGGg/](http://jsfiddle.net/UwGGg/)

```
var inventory = "10";

if ( inventory == "Sold Out" ){
   document.write("<b>Sold Out</b>");

} else if ( inventory >= 6 ){
   document.write("<b>more than 5</b>");

} else if ( inventory <= 5 ){
   document.write("<b>running low</b>");

} else {
  document.write("<b>error</b>");
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T19:24:16.830

如果您想明确说明您的变量（库存）可以是字符串或数字（似乎您会接受值“Sold Out”），我建议将其强制为数字进行比较......这应该减少/消除意外结果（如果您进行单元测试）并为其他人提供一些代码文档以将它们关闭，您正在测试一个已知为字符串或数字的值。

# c++ - 如何使用 POCO 使用 HTTP 基本身份验证进行 HTTP 发布？

> ID：13165877
> 
> 赞同：4
> 
> 时间：2012-10-31T19:07:02.327
> 
> 标签：c++, http, post, basic-authentication, poco-libraries

我正在尝试使用 POCO 使用 HTTP 基本身份验证（明文用户名和密码）进行 HTTP Post。我找到了一个 Get 示例并尝试对其进行修改，但作为一个菜鸟，我认为我已经把它弄坏了，没有用处。有人知道怎么做吗？

是的，我已经看到了关于此的另一个 SO 问题：[POCO C++ - NET SSL - how to POST HTTPS request](https://stackoverflow.com/questions/1499086/poco-c-net-ssl-how-to-post-https-request)，但我无法理解它是如何尝试实现用户名和密码部分的。我也不明白“x-www-form-urlencoded”的用法。这是帖子所必需的吗？我没有表格。只想使用用户名和密码参数发布到服务器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T16:58:40.097

最后。这是你如何做到的：

```
HTTPClientSession session("yourdomain.com");
session.setKeepAlive(true);

Poco::Net::HTTPRequest req(Poco::Net::HTTPRequest::HTTP_POST, "/myapi.php/api/validate", HTTPMessage::HTTP_1_1);
req.setContentType("application/x-www-form-urlencoded");
req.setKeepAlive(true); // notice setKeepAlive is also called on session (above)

std::string reqBody("username=user1@yourdomain.com&password=mypword");
req.setContentLength( reqBody.length() );

std::ostream& myOStream = session.sendRequest(req); // sends request, returns open stream
myOStream << reqBody;  // sends the body

req.write(std::cout);

Poco::Net::HTTPResponse res;
std::istream& iStr = session.receiveResponse(res);  // get the response from server
std::cerr << iStr.rdbuf();  // dump server response so you can view it 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T19:33:17.653

当您执行 HTTP POST 时，发送到服务器的数据通常以两种形式之一发送：

*   Name,Value 对，其中名称和值由“=”分隔，不同的对由“&”分隔。例如：`var1=value1&var2=value2`。此外，发送这些名称值对时，某些特殊字符和非字母数字字符会被替换为`%HH`、百分号和两个表示字符 ASCII 代码的十六进制数字。例如，如果第一个参数的值包含“#”，它将被发送为`var1=value1%23&var2=value2`. 以这种格式发送数据时，客户端需要插入一个带有该值的 Content-Type 头，`application/x-www-form-urlencoded`以便服务器能够正确解码数据。

*   作为一个多部分 MIME 主体，其中每个部分的大小都可以很大并且包括“非转义”数据（包括二进制数据）。不同的 MIME 部分由不出现在任何 MIME“有效负载”中的字符串分隔符（边界）分隔。以这种格式发送数据时，客户端需要插入一个 Content-Type 标头，其值为`multipart/form-data`。

在您引用的上一个 StackOverflow 问题的情况下，请求正文以第一种方式发送，如上所示。希望澄清。

问候， 悉达多

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-14T16:26:10.047

从 POCO 库凭证测试，这里是代码：

```
HTTPRequest request;
assert (!request.hasCredentials());

HTTPBasicCredentials cred("user", "secret");
cred.authenticate(request);
assert (request.hasCredentials());
std::string scheme;
std::string info;
request.getCredentials(scheme, info);
assert (scheme == "Basic");
assert (info == "dXNlcjpzZWNyZXQ=");

HTTPBasicCredentials cred2(request);
assert (cred2.getUsername() == "user");
assert (cred2.getPassword() == "secret"); 
```

发送请求时，您将只使用此代码的第一部分（停在`cred.authenticate(request)`）。

# angularjs - 在 Angular 的场景运行器中等待元素加载

> ID：13165881
> 
> 赞同：4
> 
> 时间：2012-10-31T19:07:13.060
> 
> 标签：angularjs

我正在使用 Angular 的场景对我的应用程序进行端到端测试。我想根据需要一些时间加载的元素运行测试。我可以只使用一个`sleep()`命令，但我宁愿做类似的事情：

```
whenLoaded('p .foo')
    .then(function(elem) { expect(elem.text()).toBe(something); }); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-04T00:59:55.050

Jasmine.js 也可以让你这样做。查找异步规范。

[http://pivotal.github.io/jasmine/](http://pivotal.github.io/jasmine/)

```
describe("Asynchronous specs", function() {
  var value, flag;

  it("should support async execution of test preparation and exepectations", function() {
    runs(function() {
      flag = false;
      value = 0;

      setTimeout(function() {
        flag = true;
      }, 500);
    });

    waitsFor(function() {
      value++;
      return flag;
    }, "The Value should be incremented", 750);

    runs(function() {
      expect(value).toBeGreaterThan(0);
    });
  });
}); 
```

# ios - ios ExternalAccessory 蓝牙问题

> ID：13165882
> 
> 赞同：0
> 
> 时间：2012-10-31T19:07:13.387
> 
> 标签：ios, bluetooth, external-accessory, bluecove, eaaccessory

我在为我的 ipod 运行 ExternalAccessory 时遇到了一些困难......

我有一个 bluecove 蓝牙监听器在我的计算机（mac，Mountain Lion）上运行 java （代码在这里：[http://pastebin.com/j6Eu0H66](http://pastebin.com/j6Eu0H66)），我已经成功地将我的 ipod 与我的计算机配对。但是，当我列出我的 ipod 列表时：

```
[[EAAccessoryManager sharedAccessoryManager] connectedAccessories]; 
```

我只得到蟋蟀。我假设这是因为我没有在 info.plist 中设置任何有效的附件——但问题是，我不知道我应该输入什么！

有没有人知道为什么我无法通过 EAAccessoryManager 找到我的计算机，有没有人知道什么归类为有效协议？我找不到关于实际写什么作为协议的文档。

PS 作为这个项目的早期部分，我试图通过 lejos 将我的计算机与我的 NXT 配对，但是我遇到了这个问题：

[https://groups.google.com/forum/?fromgroups=#!topic/bluecove-users/7jWv1V1GC-4](https://groups.google.com/forum/?fromgroups=#!topic/bluecove-users/7jWv1V1GC-4)

结果，我使用 hack 在第一个评论之后发表了几条评论，并将我的 Mountain Lion IOBluetooth.framework 替换为 Lion IOBluetooth.framework。我不确定这是否会对 iOS 方面产生巨大影响，但我想我应该让你们知道。

PSS 我用来打印附件列表的代码：注意它还没有返回任何东西，也没有使用protocolString。

我得到了“Testing123”日志，但没有得到“设备！” 日志

```
- (EASession *)openSessionForProtocol:(NSString *)protocolString
{

    NSLog(@"Testing123");
    NSArray *accessories = [[EAAccessoryManager sharedAccessoryManager]
                            connectedAccessories];
    EAAccessory *accessory = nil;
    EASession *session = nil;

    for (EAAccessory *obj in accessories)
    {
        NSLog(@"Device!");
        /*
        if ([[obj protocolStrings] containsObject:protocolString])
        {
            accessory = obj;
            break;
        }
         */
    }

    return NULL;
} 
```

另外，这是我的 info.Plist 的屏幕截图：

![在此处输入图像描述](../Images/ac0f2a2f021bc774b6ddc48af9d08519.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T05:59:12.367

我不知道您将 iPod 连接到计算机的目标是什么，但如果您只是想在 iOS 和计算机之间更改一些信息，Bonjour 是一种简单且非常有趣的方式来完成这项工作。使用 bonjour，您可以获得一些优势，例如连接到 Windows PC 甚至 Android 设备。

如果您有/想要使用蓝牙，这将是一项艰巨的工作，因为 iOS ExternalAccessory 框架仅适用于符合 MFi 的配件，如 @Brad Larson 所说。蓝牙 LE 是一种选择，如果你的电脑支持它，你的 iPod 也支持，但 BLE 协议只支持少量数据传输，你必须将数据分成小块才能在设备之间发送和接收，配对并记住自己配对的设备等，但它是另一个问题的答案......

不幸的是，在你的情况下，我认为 bluethoot 不是一个好的选择，但另一方面，你必须看看 Bonjour，它也很容易使用。

无论如何，希望它有所帮助。

# android - 有没有类似BeautifulSoup for Android 的东西？

> ID：13165883
> 
> 赞同：7
> 
> 时间：2012-10-31T19:07:17.943
> 
> 标签：android, xml-parsing, beautifulsoup

我想找到一个非常宽容的 xml 解析器。就像 Python 的 BeautifulSoup 一样。外面有什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T20:45:30.263

好的，我找到了 Jsoup。像 BeautifulSoup 这样的许可 XML 解析器的 Java 版本。

[http://jsoup.org/](http://jsoup.org/)

我会试试看，看看效果如何。

谢谢

# javascript - 多次重用模态触发

> ID：13165890
> 
> 赞同：1
> 
> 时间：2012-10-31T19:08:08.490
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我正在使用 twitter 引导模式插件。来自模态的提交将数据提交到服务器。

出于某种原因，当我多次打开并提交模式时，提交的触发次数与之前打开模式的次数一样多。

因此，如果我连续单击“更新”。编辑并保存，它会触发一次，因为这是第一次尝试。如果我然后单击第二行的“更新”。编辑并保存，它会触发两次。第三次触发 3 次，4 次触发 4 次。以此类推。

几天来我一直在尝试解决这个问题，但一无所获。一些指导会让我永远感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T22:16:19.860

这就是我解决此问题的方法：

`delete_id=0`我在标记之后有一个全局变量`<script>`来存储我要删除的 ID（这可以是动态的以使用服务器端脚本）。我还在模态 HTML 中添加`myModalAction`了按钮的 ID。`Delete`

我这样称呼模态：

```
$('.delete_row').click(function (){
    delete_id = $(this).attr('id');
    $('#myModal').modal();
}); 
```

对于`myModalAction`：

```
$('#myModalAction').click(function(e){
    $('#'+delete_id).remove();
    $('#myModal').modal('hide');
}); 
```

完整的工作代码可以在[这里](https://jsfiddle.net/siddiquinoor/jdzpuzpy/)找到。

# asp.net-mvc - 从 Fiddler 2.0 安全发布到 ASP.NET MVC 4

> ID：13165892
> 
> 赞同：0
> 
> 时间：2012-10-31T19:08:08.920
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http

鉴于：[http](http://anyurl.com/Base/Processor/) ://anyurl.com/Base/Processor/是在处理器上执行控制器操作的基本 url，我可以使用 HTTP GET 使用 REST 路由“/value”或表单参数“将值传递给服务器” ?价值=价值”。

但是，当我尝试在 http 请求正文中发布有效负载时，我无法让服务器接受输入。我尝试了以下几种变体：

```
User-Agent: Fiddler
Host: anyurl.com
Content-Length: 11
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

value=value 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:45:17.030

以便服务器了解如何处理您需要设置`Content-Type`标头的 POSTed 内容。在您的示例中，这应该设置为`x-form-www-urlencoded`.

# iphone - iPhone键盘问题

> ID：13165894
> 
> 赞同：-1
> 
> 时间：2012-10-31T19:08:31.257
> 
> 标签：iphone, objective-c, ios, keyboard

我正在使用一个使用**Jonathan Badeen****的**JLBPartialModal类的新应用程序，这个类试图模仿国家地理公园指南中的界面。

 **我的问题是，当我尝试在第二个视图中显示键盘时，第一次发生这种情况一切看起来都很好，第二次出现问题，键盘更小但仍然可以使用其原始尺寸。

**第一次** [http://i.stack.imgur.com/kByhh.png](http://i.stack.imgur.com/kByhh.png)

**第二次** [http://i.stack.imgur.com/GNhbL.png](http://i.stack.imgur.com/GNhbL.png)

我不知道是否有任何方法可以强制第二个视图具有**becomeFirstResponder**。

希望有任何建议来解决我的问题。

### 第一个视图

使用**IBAction调用视图**

```
-(IBAction)accion:(id)sender{
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    composeViewController *vc = [sb instantiateViewControllerWithIdentifier:@"composeView"];

    JLBPartialModal *partialModal = [JLBPartialModal sharedInstance];
    partialModal.delegate = vc;

    [partialModal presentViewController:vc dismissal:^{

    }];
} 
```

### 第二种观点

该类有 3 个委托，其中一个是 didPresentPartialModalView，我使用这个委托在视图和动画结束后显示键盘：

```
#pragma mark - Partial modal delegate

- (void)didPresentPartialModalView:(JLBPartialModal *)partialModal
{
     self.texto.editable = YES;
     [self.texto becomeFirstResponder];
} 
```

然后，当用户触摸关闭按钮时 UITextView 有**resignFirstResponder**并且使用**NSNotificationCenter**我知道键盘是隐藏的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(KeyboardWillHide:) name:UIKeyboardDidHideNotification object:nil];
}

- (IBAction)close:(id)sender
{
    self.texto.editable = NO;
    [self.texto resignFirstResponder];
}

-(void)KeyboardWillHide:(NSNotification *) notification {
    [[JLBPartialModal sharedInstance] dismissViewController];
}

- (BOOL)shouldDismissPartialModalView:(JLBPartialModal *)partialModal
{
   return YES;
} 
```

谢谢你。

## 编辑

**最后！**

我已经解决了将**removeOnCompletion**添加到**JLBPartialModal.m 中的问题**

```
- (CAKeyframeAnimation *)pullBackAnimation
- (CAKeyframeAnimation *)pushForwardAnimation 
```

像这样：

```
- (CAKeyframeAnimation *)pullBackAnimation
{
    CATransform3D startTransform = [self perspectiveTransform];
    CATransform3D endTransform = CATransform3DConcat([self windowScaledTransform], startTransform);
    CATransform3D middleTransform = CATransform3DConcat([self windowRotationTransform], startTransform);

    CAKeyframeAnimation *anim = [self windowAnimation];
    anim.values = @[[NSValue valueWithCATransform3D:startTransform], [NSValue valueWithCATransform3D:middleTransform], [NSValue valueWithCATransform3D:endTransform]];

    anim.removedOnCompletion = YES; // Line added

    return anim;
}

- (CAKeyframeAnimation *)pushForwardAnimation
{
    CATransform3D endTransform = [self perspectiveTransform];
    CATransform3D startTransform = CATransform3DConcat([self windowScaledTransform], endTransform);
    CATransform3D middleTransform = CATransform3DConcat([self windowRotationTransform], startTransform);

    CAKeyframeAnimation *anim = [self windowAnimation];
    anim.values = @[[NSValue valueWithCATransform3D:startTransform], [NSValue valueWithCATransform3D:middleTransform], [NSValue valueWithCATransform3D:endTransform]];

     anim.removedOnCompletion = YES; // Line added

    return anim;
} 
```

有了这个，我确保动画被删除：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:47:25.873

我使用 JLBPartialModal 控件对此进行了一些研究。看起来作者添加了一个带有比例的动画`- (void)presentViewController:(UIViewController *)viewControllerToPresent dismissal:(void (^)(void))block`，

```
 for (UIWindow *window in [[UIApplication sharedApplication] windows]) {
        if (window != self.window) {
            [window.layer addAnimation:[self pullBackAnimation] forKey:@"pullBackAnimation"];
            [UIView animateWithDuration:JLB_PARTIAL_MODAL_ANIMATION_DURATION animations:^{
                window.center = CGPointMake(window.center.x, window.center.y - JLB_PARTIAL_MODAL_WINDOW_VERTICAL_OFFSET);
            } completion:^(BOOL finished) {
                if (!hasCalledDelegate) {
                    [self.delegate didPresentPartialModalView:self];
                    hasCalledDelegate = YES;
                }
            }];
        }
    } 
```

然后删除这个动画`- (void)dismissViewController`。

```
 for (UIWindow *window in [[UIApplication sharedApplication] windows]) {
            [window.layer removeAllAnimations];
        } 
```

他假设`windows`第一种方法中的数组是解雇方法中的同一组窗口，我可能会对此提出质疑。您的键盘似乎位于一个设置了此比例属性但尚未删除的窗口中。

因此，我建议您在修复组件问题或作为临时修复时，执行第二个循环（removeAllAnimations 循环）以响应显示的键盘。

在没有看到您的代码的情况下，我不是 100% 确信这是答案。您可能正在其他地方做一些影响窗口系统状态的事情。

编辑：现在您已经发布了代码，我想我可以看到问题所在。您注册的通知是 KeyboardDidHide... 但您将其视为“WillHide”通知。当您调用`dismissViewController`JLBPartialModal 上的 sharedInstance 时，键盘已不再位于该`[UIApplication sharedApplication].windows`属性的窗口集中。这意味着动画不会从包含键盘的窗口中删除。如果您更改`UIKeyboardDidHideNotification`为`UIKeyboardWillHideNotification`.**

# c# - 在 Using 块中调用 Environment.Exit()

> ID：13165895
> 
> 赞同：11
> 
> 时间：2012-10-31T19:08:38.310
> 
> 标签：c#, console-application, idisposable

如果我有一个控制台应用程序，其代码如下：

```
using (DisposableObject object = new DisposableObject())
{
   if (a condition)
     Environment.Exit(0);

   // Do Stuff
} 
```

我的物品会被妥善处理吗？还是在清理对象之前线程死了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T19:09:41.500

您的应用程序将终止，此时所有托管内存都将被释放。

生成的`finally`块不会执行，因此`Dispose`不会调用任何方法，因此任何非托管资源很可能不会被释放。

请参阅[不要盲目地依赖终结器](https://web.archive.org/web/20200108003823/http://blogs.microsoft.co.il/sasha/2008/04/26/dont-blindly-count-on-a-finalizer/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:12:39.600

操作系统知道的资源通常会在应用程序退出时被清理。操作系统不知道的资源一般不会被清理。

例如，一些使用数据库并且需要实现与数据库服务器直接支持的任何东西不同的锁定范例的程序可能使用一个或多个“LockedResources”表来跟踪应该锁定哪些资源。需要获取资源的代码会锁定“LockedResources”表，更新它以显示需要锁定的资源，然后释放它；对“LockedResource”表的操作通常会很快（因此“LockedResource”表只会短暂锁定），即使应用程序需要长时间持有实际资源。但是，如果应用程序`Environment.Exit`在“LockedResources”表显示它拥有资源时执行了操作，则操作系统将不知道如何更新“

通常，即使客户端应用程序意外死机，数据库应用程序之类的东西也应该被设计成健壮的。例如，可能有一个活动客户端表，每个活动客户端都持有一个标识自己的记录的锁。如果想要使用资源的客户端注意到“LockedResources”表已将其签出给其他客户端，则前一个客户端可以检查以确保后一个客户端在“活动客户端”表中的条目仍然被锁定。如果不是，它可能认为有问题的客户端已经死亡并采取适当的行动（认识到死亡的客户端可能已经将其资源置于不良状态）。另一方面，数据库*应该*如果客户意外死亡，则设计为健壮并不意味着他们总是如此。资源放弃不是一件好事，即使它*通常*是可以生存的。

# java - 在 Mac OS X Lion 中初始化 Java VM 时出错

> ID：13165899
> 
> 赞同：5
> 
> 时间：2012-10-31T19:09:00.853
> 
> 标签：java, macos, osx-lion

我在让我的 Java 在 Mac OS X Lion 上运行时遇到问题。我做了 Java 升级，它完全删除了它。然后我再次需要它，我安装了 7v9.apps，但没有用。

然后我写了一篇将它恢复到 6 的 Apple KB（知识库）文章，但这没有用。我完全卸载了它（现在很多次），并重新安装了 7v9，但我无法让我的应用程序工作，也无法打开 java 控制台。

任何人都可以帮忙吗？这是我从控制台获取的日志：

```
10/31/12 3:01:44.681 PM [0x0-0x6ea6ea].com.apple.systempreferences: /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/jcontrol: line 116: [: too many arguments

10/31/12 3:01:44.681 PM [0x0-0x6ea6ea].com.apple.systempreferences: /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/jcontrol: line 120: [: -Xdock:icon=/Library/Internet: binary operator expected

10/31/12 3:01:44.723 PM [0x0-0x6ea6ea].com.apple.systempreferences: Error occurred during initialization of VM

10/31/12 3:01:44.723 PM [0x0-0x6ea6ea].com.apple.systempreferences: java.lang.NullPointerException

10/31/12 3:01:44.723 PM [0x0-0x6ea6ea].com.apple.systempreferences:     at java.util.Hashtable.put(Hashtable.java:542)

10/31/12 3:01:44.723 PM [0x0-0x6ea6ea].com.apple.systempreferences:     at java.lang.System.initProperties(Native Method)

10/31/12 3:01:44.723 PM [0x0-0x6ea6ea].com.apple.systempreferences:     at java.lang.System.initializeSystemClass(System.java:1115) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:09:48.450

> ```
> […]/jcontrol: line 116: [: too many arguments
> […]/jcontrol: line 120: [: -Xdock:icon=/Library/Internet: binary operator expected 
> ```

看起来该`jcontrol`文件中存在语法错误，这是因为某些祖先进程设置了环境变量`_JCP_DOCK_NAME`和`_JCP_DOCK_ICON`. 的输出在`env | grep JCP`这里可能有用。可以通过在上述`jcontrol`行中为这些变量添加引号来修复脚本：

```
if [ -z "${_JCP_DOCK_NAME}" ]; then
    _JCP_DOCK_NAME=-Xdock:name="Java Control Panel"
fi

if [ -z "${_JCP_DOCK_ICON}" ]; then
    _JCP_DOCK_ICON=-Xdock:icon="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Resources/Java7VM.icns"
fi 
```

不过，我不确定这是否是导致后续错误消息的原因。

> ```
> Error occurred during initialization of VM
> java.lang.NullPointerException
>     at java.util.Hashtable.put(Hashtable.java:542)
>     at java.lang.System.initProperties(Native Method)
>     at java.lang.System.initializeSystemClass(System.java:1115) 
> ```

[`Hashtable.put`](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/0e2200a8762c/src/share/classes/java/util/Hashtable.java)`value`如果参数是，则抛出空指针异常`null`。知道这指的是什么键会很有趣，但是在调试本[机代码](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/0e2200a8762c/src/share/native/java/lang/System.c)时，Java 调试器可能没有多大用处。也许您最好的选择是使用像“gdb”这样的通用应用程序调试器来尝试找出与该调用`null`中的值关联的键。`put`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T17:45:38.930

```
/Library/Internet: binary operator expected 
```

我在 OS X 上尝试使用[Oracle JDeveloper时遇到了类似的错误。](https://www.oracle.com/technologies/developer-tools/jdeveloper/jdeveloper.html)

我认为问题是`$JAVA_HOME`环境变量中的空间。我只是做了一个指向 Oracle Java 1.7 位置的符号链接：

```
>ls -la /usr/local/oraclejava
lrwxr-xr-x  1 root  admin  64 20 Sep 13:33 /usr/local/oraclejava -> /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home 
```

`$JAVA_HOME`设置解决问题后重新启动应用程序`/usr/local/oraclejava`。

# java - 在 Ubuntu 上执行 Java 类文件时遇到问题

> ID：13165902
> 
> 赞同：1
> 
> 时间：2012-10-31T19:09:03.637
> 
> 标签：java, linux, ubuntu, ant

我正在关注本教程：[http ://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)

但是我遇到了一些问题。

这是我所做的（代码在 ~/src/ant-demo/oata/ 中）：

```
javac -d ~/src/ant-demo/build/classes ~/src/ant-demo/oata/Hello*

java -cp ~/src/ant-demo/build/classes oata.HelloWorld 
```

这是我得到的错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: oata/HelloWorld : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: oata.HelloWorld. Program will exit. 
```

我正在使用带有 openjdk-7-jdk 的 Ubuntu。

**更新**

```
#java -version

java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)

#which java
/usr/bin/java 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:12:29.033

看来您正在使用 JDK7 进行编译，但使用以前的版本运行。使用`java -version`并`which java`了解您实际使用的是哪个版本的 java。

# svg - 在两个圆圈之间画一个箭头？

> ID：13165913
> 
> 赞同：5
> 
> 时间：2012-10-31T19:09:30.580
> 
> 标签：svg, d3.js

给定，我如何在两个圆圈之间画一条箭头线：

1.  圆心的位置
2.  圆的半径

我正在使用**线条**和**标记**svg 对象。

如果我将箭头绘制到圆圈的“中心” - 那么箭头是不可见的。如果我将箭头向后移动太远 - 然后线会显示并隐藏箭头的尖端（这里为了更好的可见性而夸大了）： ![箭头向后移动](../Images/e496113d5cad0b2ade4699734a288540.png)

根据要求，这是我的代码的相关位（在 livescript 中）：

```
# Draw an arrow to use for lines
svg.append("svg:defs")
 .append("svg:marker")
  .attr("id", "arrow")
  .attr("viewBox", "0 0 10 10")
  .attr("refX", 27)
  .attr("refY", 5)
  .attr("markerUnits", "strokeWidth")
  .attr("markerWidth", 8)
  .attr("markerHeight", 6)
  .attr("orient", "auto")
  .append("svg:path")
  .attr("d", "M 0 0 L 10 5 L 0 10 z")

svg.append("line")
 .attr "x1" 5 
 .attr "x2" 50 
 .attr "y1" 5 
 .attr "y2" 50
 .style "stroke" "black"
 .attr "stroke-width" 2
 .attr "marker-end" "url(\#arrow)" 
```

或者，这里是工作示例的 JSFiddle（请注意，箭头“坐立不安”，看起来恰到好处）：http: [//jsfiddle.net/yeQS2/](http://jsfiddle.net/yeQS2/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T15:12:21.373

如果我理解正确，您需要找到需要添加到源以到达目标圆的边界的 2D 向量。

伪代码：

```
d = distance between A and B; // (sqrt((xB-xA)² + (yB-yA)²)).
d2 = d - radius;

ratio = d2 / d;

dx = (xB - xA) * ratio;
dy = (yB - yA) * ratio;

x = xA + dx;
y = yA + dy; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-19T18:27:55.517

我有同样的问题，这就是我解决它的方法。对[原始小提琴](http://jsfiddle.net/yeQS2/)所做的更改：

更改`.attr("refX", 27)`为`.attr("refX", 0)`。这会使箭头超出线的末端。

通过将以下代码添加到“tick”，使用三角法计算线的正确结束位置，考虑箭头：

```
var arrowheadLength = 8, // from markerWidth
    nodeRadius = 10;
link.each(function(d) {
  var x1 = d.source.x,
      y1 = d.source.y,
      x2 = d.target.x,
      y2 = d.target.y,
      angle = Math.atan2(y2 - y1, x2 - x1);
  d.targetX = x2 - Math.cos(angle) * (nodeRadius + arrowheadLength);
  d.targetY = y2 - Math.sin(angle) * (nodeRadius + arrowheadLength);
}); 
```

使用计算的 targetX 和 targetY 链接属性：

```
.attr("x2", function(d){
  return d.targetX;
}).attr("y2", function(d){
  return d.targetY;
}) 
```

这是[更新的小提琴](http://jsfiddle.net/yeQS2/89/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-03T17:39:44.263

好的，所以我想我会试一试，并用一些矢量数学来实现它，它更漂亮，结果是可重用的。

一些澄清：

*   “向量”只是两个数字（x 和 y）
*   “坐标”在结构上与向量相同，只是对我们有不同的含义。尽管如此，我们可以运行相同的数学运算。
*   “定位向量”是两个向量（如源和目标）
*   您可以通过从第二个向量中减去第一个向量来“释放”定位向量（您会得到一个不再锚定在坐标系中的新向量）
*   [使用毕达哥拉斯定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)（也称为范数）计算向量的“长度”
*   “[向量加法](http://en.wikipedia.org/wiki/Vector_addition#Addition_and_subtraction)”就是简单地将两个或多个向量的 xs 和 ys 相加，得到一个新向量。
*   “[标量乘法](http://en.wikipedia.org/wiki/Vector_addition#Scalar_multiplication)”和除法是通过将 x 和 y 与标量相除来完成的
*   “[单位向量](http://en.wikipedia.org/wiki/Unit_vector)”是向量除以其长度

假设我们希望它动态工作（“每滴答声”），初始链接调整看起来像这样（我使用的是 coffeescript）：

```
links.attr('x1', ({source,target}) -> source.x)
     .attr('y1', ({source,target}) -> source.y)
     .attr('x2', ({source,target}) -> target.x)
     .attr('y2', ({source,target}) -> target.y) 
```

我们要做的是将源和目标`nodeRadius`移离圆圈。为此，我们使用向量数学来

1.  释放定位向量（链接由两个坐标组成，我们想要一个未锚定的向量）
2.  计算自由向量的单位向量
3.  一旦我们有了它，我们就可以将它乘以`nodeRadius`. 这个新向量表示节点中心与其边界之间的距离，与链接的方向相同。
4.  将向量添加到源坐标，这些新坐标将位于圆的边缘。

好的，所以我们将使用以下函数来执行此操作：

```
length = ({x,y}) -> Math.sqrt(x*x + y*y)
sum = ({x:x1,y:y1}, {x:x2,y:y2}) -> {x:x1+x2, y:y1+y2}
diff = ({x:x1,y:y1}, {x:x2,y:y2}) -> {x:x1-x2, y:y1-y2}
prod = ({x,y}, scalar) -> {x:x*scalar, y:y*scalar}
div = ({x,y}, scalar) -> {x:x/scalar, y:y/scalar}
unit = (vector) -> div(vector, length(vector))
scale = (vector, scalar) -> prod(unit(vector), scalar)

free = ([coord1, coord2]) -> diff(coord2, coord1) 
```

这可能看起来有点压倒性，它非常紧凑，因为coffeescript允许我们直接在方法签名中解构东西，非常方便！如您所见，还有另一个名为`scale`. 将步骤 2\. & 3 结合起来只是一个方便的功能。

现在让我们尝试为链接源设置新的 x 坐标。请记住：坐标应移动`nodeRadius`，以便它从圆的边界开始，而不是在圆内。

```
(d) ->
    # Step 1
    freed = free(d)
    # Step 2
    unit = unit(freed)
    # Step 3
    scaled = prod(unit, nodeRadius)
    # Step 2+3 would be scale(freed, nodeRadius)
    # Step 4, coords are pretty much just vectors,
    # so we just use the sum() function to move the source coords
    coords = sum(d.source, scaled)
    return coords.x 
```

没什么！将所有这些放入`tick()`函数中，我们得到：

```
links.attr('x1', ({source,target}) -> sum(source, scale(free([source,target]), nodeRadius)).x)
     .attr('y1', ({source,target}) -> sum(source, scale(free([source,target]), nodeRadius)).y)
     .attr('x2', ({source,target}) -> diff(target, scale(free([source,target]), nodeRadius)).x)
     .attr('y2', ({source,target}) -> diff(target, scale(free([source,target]), nodeRadius)).y) 
```

哦，别忘了从目标坐标中*减去*，否则你只会让这条线再次变长（即移动它`nodeRadius`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-04T02:08:09.047

正如@andsens 所说，您正在做一个简单的矢量操作。

如果你把它包装在一个像样的库中，这可以做得更干净。例如，我使用了漂亮的[Sylvester](http://sylvester.jcoglan.com/)矩阵和向量库。

你基本上计算的是：

![V 下标边等于开括号模数 V 减去 R 闭括号乘以单位向量 V](../Images/b38414246486a0e26f73be040d214704.png)

其中**v**是到目标中心的向量，**v** [edge]是到目标边缘的向量，半径为*r*。

您可以轻松做到：

```
// Assume source and target both have x and y properties
// Assume target has radius property
function path2TargetEdge(source, target){

  // V is the vector from the source to the target's center
  var V = $V([target.x-source.x, target.y-source.y]);

  // Vt is the vector from the source to the edge of the target
  var Vt = V.toUnitVector().multiply(V.modulus() - target.radius);

  return {x: Vt.e(1), y: Vt.e(2) }; // Vectors are 1-indexed
} 
```

# android - Android mic 的灵敏度足以听手表滴答声？

> ID：13165918
> 
> 赞同：-2
> 
> 时间：2012-10-31T19:09:35.550
> 
> 标签：android, audio

我想构建一个 Android 应用程序来收听手表的滴答声，但我不确定 Android 设备的麦克风是否足够灵敏，可以通过免提麦克风记录这些低频声音？

有谁知道麦克风是否足够灵敏以检测到声音？

Android 可在多种设备上运行，我如何确保我正在开发的应用程序适用于所有设备？

我想先用三星galaxy系列看看它是否能够听到滴答声？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:03:01.130

取决于噪音水平、麦克风的质量和麦克风在设备中的位置。

如果它适用于一台设备，它应该适用于大多数设备，因为噪音水平很低。尝试使用多个低端和高端设备

# html - 如何使用 CSS 将文本放置在此框中？

> ID：13165923
> 
> 赞同：0
> 
> 时间：2012-10-31T19:09:50.540
> 
> 标签：html, css

我有一个具有如下 CSS 的 div 框：

```
.productinfo2 
{
margin-top: 20px;
display: inline-block;
vertical-align: top;
height: 60px;
border-style:solid;
border-width:1px;
width:800px;
float:right;
margin-right:5px;

} 
```

这就是它现在在 HTML 中的样子：

```
 <img src="@Html.DisplayFor(modelItem => item.Image)" alt="" />
         <div class="productinfo2">
         <h2>@Html.DisplayFor(modelItem => item.Title)</h2>
         <p id="price">@Html.DisplayFor(modelItem => item.price)</p>
         <input type="text" class="Quantity">
         <p id="total">699</p>
         </div> 
```

我想让文本和文本框完全像这个 img 但我似乎不能这样：

![在此处输入图像描述](../Images/1b48ef62f892d649d32872dcff10cdab.png)

我的问题是将所有内容都放在一行中，例如 img。

任何形式的帮助表示赞赏

[http://jsfiddle.net/TUT7G/](http://jsfiddle.net/TUT7G/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:23:45.030

你不远了。您真正需要在这里考虑的唯一事情是 h2 和 p 都继承了您需要摆脱的换行符。

h2 您可以使用 display:inline 轻松摆脱它。

对于 P，我只建议使用跨度。

更具体地说，使用您的代码作为示例，您可以这样做：

```
<html>
<style>
.productinfo2 
{
margin-top: 20px;
display: inline-block;
vertical-align: top;
height: 60px;
border-style:solid;
border-width:1px;
width:800px;
float:right;
margin-right:5px;

}

.productinfo2 h2 
{
font-family:Georgia;
font-size:18px;
color:#BED600;
display:inline;
}

#price
{
font-family: Verdana;
font-size:12px;
color:#333333;
margin-left:40%;
}

#price input
{
  width:10px;            
}    

#total
{
font-family: Verdana;
font-size:12px;
color:#333333;
margin-right:20px;
float:right;
}

</style>
<body>

         <div class="productinfo2">
         <h2>test</h2>
         <span id="price">price <input type="text" class="Quantity"></span>
         <span id="total">total: 699</span>
         </div>

         </body></html> 
```

在 JSFiddle 上查看：http: [//jsfiddle.net/muKty/](http://jsfiddle.net/muKty/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:18:14.667

这似乎是一张桌子的理想场所。表格对页面布局（非常）不利，原因有很多（其中一些最重要的原因是它们使那些使用屏幕阅读器“查看”网页的人的生活变得困难）。但是，在您的情况下，您的数据显然是表格格式 - 也就是说，将其放在表格中是合乎逻辑的。

但是，如果我弄错了，那么您可以使用内联块元素。内联块元素结合了块元素的属性（例如允许宽度）和内联元素（例如在其包含元素中不占用整行）。这是一个简单的例子：

```
<div>
    <span style="display: inline-block; width: 10em;">text</span>
    <span style="display: inline-block; width: 10em;">more text</span>
    <span>even more text!</span>
</div>
<div>
    <span style="display: inline-block; width: 10em;">another line of text</span>
    <span style="display: inline-block; width: 10em;">more text on the next line</span>
    <span>even more text on the next line!</span>
</div> 
```

如果您不相信它有效，这就是一个小提琴；）。

[http://jsfiddle.net/wLZwb/](http://jsfiddle.net/wLZwb/)

# c# - 确定处理器支持哪些指令

> ID：13165924
> 
> 赞同：3
> 
> 时间：2012-10-31T19:09:51.960
> 
> 标签：c#, .net, wmi

[CPU-Z](http://www.cpuid.com/softwares/cpu-z.html)能够确定您的处理器支持的指令。例如，以下链接显示了这些说明：

`MMX, SSE, SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, EM64T`

有没有办法使用 或其他技术来实现这`.NET`一点`WMI`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T19:21:04.670

在`kernel32.dll`你有你可以[pInvoke的功能](http://www.pinvoke.net/default.aspx/kernel32.isprocessorfeaturepresent)[IsProcessorFeaturePresent](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724482%28v=vs.85%29.aspx)。

**编辑**
关于`EM64T`扩展指令集，这仅在 x64 平台上可用，因此您可以通过 WMI 检查存在哪种类型的 CPU：

```
public static bool IsEM64TSupported()
{
  ManagementObject mo;
  mo = new ManagementObject("Win32_Processor.DeviceID='CPU0'");
  ushort i = (ushort) mo["Architecture"];

  return i == 9;
} 
```

但由于 EM64T 指令在 32 位操作系统中不可用，您也需要检查一下。

# vbscript - 如何删除此字符串的右侧？

> ID：13165929
> 
> 赞同：2
> 
> 时间：2012-10-31T19:10:13.280
> 
> 标签：vbscript

在 VBScript 我有一个字符串 `"Microsoft Windows 7 Professional |C:\Windows|\Device\Harddisk0\Partition1"`

我只想要`"Microsoft Windows 7 Professional"`生成它的时间。有没有办法可以将它`"|"`用作分隔符并从字符串中删除所有内容（包括它）？

编辑：

我尝试使用 Left，这是我的代码示例

```
For Each objOperatingSystem in colItems
   strOSName = Left(objOperatingSystem.name,InStr("|"))
Next 
```

我得到一个错误，

> 错误数量的参数或无效的属性分配：'InStr'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:32:17.807

正确的语法是：

```
strOSName = TRIM(Left(objOperatingSystem.name,InStr(objOperatingSystem.name,"|")-1)) 
```

为了安全起见，您可能想尝试

```
if InStr(objOperatingSystem.name,"|") then
    strOSName = TRIM(Left(objOperatingSystem.name,InStr(objOperatingSystem.name,"|")-1))
end if 
```

只是因为，这是另一种方法：

```
dim yourString
dim anArray
dim strOSName 
yourString = "Microsoft Windows 7 Professional |C:\Windows|\Device\Harddisk0\Partition1"
anArray = Split(yourString,"|")
strOSName = TRIM(anArray(0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:38:59.400

您也可以在 vbscript 中使用 Split 函数将字符串拆分为特殊字符。拆分函数将字符串分解为数组。使用以下内容：

Split("Microsoft Windows 7 专业版 |C:\Windows|\Device\Harddisk0\Partition1", "|", "-1", "-1")(0)

如果你觉得有点尴尬，你可以使用：

昏暗的

arr = Split("Microsoft Windows 7 Professional |C:\Windows|\Device\Harddisk0\Partition1", "|", "-1", "-1")

myStr = arr(0)

它肯定会起作用。

# javascript - 用户定义的 javascript 对象的方法（原型）可以使用 document.createElement 吗？

> ID：13165937
> 
> 赞同：1
> 
> 时间：2012-10-31T19:10:51.203
> 
> 标签：javascript, oop, dom

我正在尝试了解 JavaScript 中的用户定义对象。具体来说，我正在尝试创建一个用户定义对象的方法，该方法将使用并附加到它`document.getElementById("holder")`，并使用`document.createElement('p')`附加到它的文本节点`document.createTextNode("text")`。

目前，我的方法没有这样做。我已经测试了该方法并且它被调用了，但是`item.appendChild(otheritem)`. 我浏览了其他帖子，但没有人解释我的情况，至少我知道。我的代码如下。

```
<html>
    <head>
        <title></title>
        <script type="text/javascript">
            function Person(fn, ln) {
                this.fname = fn;
                this.lname = ln;
            }
            Person.prototype.getFullName = function () {
                var myPara = document.createElement('p');
                var strFullName = document.createTextNode("super");
                myPara.appendChild(strFullName);
                var objHolder = document.getElementById("objHolder");
                objHolder.appendChild(myPara);
            };

            function getSome() {
                var fN = document.getElementById("fname").value;
                var lN = document.getElementById("lname").value;
                var Myperson = new Person(fN, lN);
                alert(Myperson.fname);
                Myperson.getFullName();
            }
        </script>
    </head>
    <body>
        <form id="holder">First Name:
            <input id="fname" type="text" width="40" />Last Name:
            <input id="lname" type="text" width="40" />
            <button id="buildObj" value="Click" onClick="getSome()">Click</button>
        </form>
        <div id="objHolder"></div>
    </body>
</html> 
```

任何帮助或建议将不胜感激。另外，如果我错过了一个关键概念，知道这也很好。

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:18:10.237

追加有效，但同时提交了表单，因此它重定向到另一个页面。`return false`您需要在事件的事件处理程序中取消提交表单的自然浏览器行为`submit`。

```
<!DOCTYPE html>
<html>
<head>
<title>
</title>
<script type="text/javascript">
function Person(fn,ln) {
this.fname = fn;
this.lname = ln;
}

Person.prototype.getFullName = function()
{

var myPara = document.createElement('p');
var strFullName = document.createTextNode("super");myPara.appendChild(strFullName);
var objHolder = document.getElementById("objHolder");objHolder.appendChild(myPara);
};

function getSome(){
var fN = document.getElementById("fname").value;
var lN = document.getElementById("lname").value;

var Myperson = new Person(fN,lN);
alert(Myperson.fname);
Myperson.getFullName();
}
</script>
</head>
<body>
<form id="holder">
First Name: <input id="fname" type="text" width="40" />
Last Name: <input id="lname" type="text" width="40" />
<button id="buildObj" value="Click" onClick="getSome()">Click</button>
</form>
<div id="objHolder">
</div>
<script>
document.getElementById('holder').onsubmit=function(){ return false; }
</script>
</body>
</html> 
```

更优雅的方法是使用`event`对象然后调用`event.preventDefault`，但是由于浏览器的不一致，需要大量的代码才能让它正确......所以对于这个基本示例，`onsubmit`应该`return false`就足够了。

# vba - FormulaR1C1的作用是什么？

> ID：13165938
> 
> 赞同：45
> 
> 时间：2012-10-31T19:10:53.853
> 
> 标签：vba, excel

我一直在**将 FormulaR1C1**视为一个函数，它究竟是如何工作的？我了解互联网上所说的内容，即第 1 行第 1 列，但是人们实际上是如何使其工作的呢？使用**FormulaR1C1**的**最终结果**是什么？

 **也可以将其更改为从工作表中的特定点开始，还是始终为 R1C1？那么它可能是**FormulaR2C3**吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-31T19:25:18.380

FormulaR1C1 与 Formula 具有相同的行为，只是使用 R1C1 样式注释，而不是 A1 注释。在 A1 注释中，您将使用：

```
Worksheets("Sheet1").Range("A5").Formula = "=A4+A10" 
```

在 R1C1 中，您将使用：

```
Worksheets("Sheet1").Range("A5").FormulaR1C1 = "=R4C1+R10C1" 
```

它不会作用于第 1 行第 1 列，而是作用于目标单元格或范围。第 1 列与 A 列相同，因此 R4C1 与 A4 相同，R5C2 与 B5 相同，依此类推。

该命令不会更改名称，目标单元格会更改。对于您的 R2C3（也称为 C2）示例：

```
Worksheets("Sheet1").Range("C2").FormulaR1C1 = "=your formula here" 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-31T19:28:49.370

[以下是我博客](http://tduhameau.wordpress.com/2012/09/27/the-beauty-of-the-r1c1-reference-style/)中关于我如何在 vba 之外使用 formular1c1的一些信息：

您刚刚编写完一个公式，将其复制到整个电子表格，格式化所有内容，然后您意识到您忘记了绝对引用：每个公式都需要引用 Cell B2，但现在，它们都引用了不同的单元格。

考虑到一个单元格有 B5、另一个 C12、第三个 D25 等，你将如何对单元格进行查找/替换？

简单的方法是将您的参考样式更新为 R1C1。R1C1 参考适用于相对定位：R 标记行，C 标记列，R 和 C 后面的数字是相对位置（在 [ ] 之间）或绝对位置（没有 [ ]）。

例子：

*   R[2]C 引用公式所在单元格下方两行的单元格
*   RC[-1] 指左边一列的单元格
*   R1C1 引用第一行和第一个单元格中的单元格 ($A$1)

有什么关系？好吧，当您在本文开头编写第一个公式时，B2 是您编写它的单元格上方 4 行的单元格，即 R[-4]C。当您上下复制它时，当 A1 引用发生变化时，R1C1 引用不会。在整个电子表格中，它是 R[-4]C。如果您切换到 R1C1 参考样式，您可以通过简单的查找/替换将 R[-4]C 替换为 R2C2 ($B$2) 并一举完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-28T14:26:20.153

我发现 .FormulaR1C1 最有价值的特性就是速度。与例如将一些数据填充到工作表中的几个非常大的循环相比，如果您可以将您正在做的事情转换为 .FormulaR1C1 表单。然后单个操作，例如 myrange.FormulaR1C1 = "my specific formuala" 非常快（可以快一千倍）。没有循环和计数 - 只需高速填充范围。**

# vim - 如何截断 vim-powerline statusline 中的长文件路径？

> ID：13165941
> 
> 赞同：4
> 
> 时间：2012-10-31T19:11:15.343
> 
> 标签：vim, vim-plugin, statusline, vim-powerline

我想将我的文件路径截断为 ex: `a/a/j/c/popularCategories.js`。

![我的电力线状态](../Images/062d7cf7b8d9e3b0aebd5c4f09c009e2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T22:23:22.753

有两种选择。

试试这个选项：

```
 let g:Powerline_stl_path_style = 'short' 
```

来自电力线文档：

> ```
> short      Display a short path. The home directory is substituted with
>            "~", the first directory is displayed with its full name, and
>            subsequent directories are shortened to their first letter.
>            I.e. "/home/user/foo/bar/baz.vim" becomes "~/f/b/baz.vim" and
>            "long/relative/path/foo/bar/baz.vim becomes
>            "long/r/p/f/b/baz.vim". 
> ```

或者，如果您希望路径像 Vim 的默认状态行一样被截断，那么您可以创建一个[移动截断点](https://github.com/pydave/powerline-sanity/commit/f3cec318194d73241c2da33a82385182ead4da53)的主题。试试我的[理智主题](https://github.com/pydave/powerline-sanity)，看看它是否更适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:16:00.183

~~目前没有办法做到这一点。~~我以某种方式错过了这个选项。更改电力线截断路径的方式存在一个问题：[问题 215](https://github.com/Lokaltog/vim-powerline/issues/215)，而不是像我以前认为的那样添加截断。

# php - 在mysql JOIN查询后获取列行的总和

> ID：13165944
> 
> 赞同：0
> 
> 时间：2012-10-31T19:11:36.470
> 
> 标签：php, mysql, sql

```
$r1 = mysql_query("
SELECT *, SUM(bps.price) as sum FROM accounts 
FULL JOIN bps on bps.id = mid
");
echo "Total price: ".$row['price']."<br>" ;
    while($row = mysql_fetch_array($r1))
      {
      echo $row['name']." <b>:::</b>  ".$row['mid']." <b>:::</b>  ".$row['price'];
      echo "<br />";
      } 
```

这是我的查询。我需要得到列的总数（总和）：bps.price 一些行有：10.5，其他 -5.5 等等......换句话说，有些是负值，有些是正值。它将列出所有结果然后在最后显示列价格的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:12:49.643

```
select sum(bps.price) FROM accounts a
FULL JOIN bps on bps.id = a.mid 
```

那会奏效的，对吧？它将对正负值求和，没关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:14:27.630

这是否按您想要的方式工作？我不确定哪些列属于哪些表，只需根据需要编辑表名（a / b）...

```
$r1 = mysql_query("
SELECT *, sum(a.price) as sum FROM accounts as a 
FULL JOIN bps as b on a.mid = b.id
");
echo "Total price: ".$row['sum']."<br>" ;
    while($row = mysql_fetch_array($r1))
      {
      echo $row['a.name']." <b>:::</b>  ".$row['a.mid']." <b>:::</b>  ".$row['a.price'];
      echo "<br />";
      } 
```

# vim - 告诉屏幕窗口运行上一个命令

> ID：13165946
> 
> 赞同：2
> 
> 时间：2012-10-31T19:11:52.320
> 
> 标签：vim, gnu-screen

我的 vimrc 中有以下内容：

```
 nnoremap <F1> :!screen -S foo -p run -X stuff '!!^M' 
```

但是，当单击 F1 时，我收到错误：没有先前的命令。

我想要的是告诉屏幕会话中名为“foo”的“运行”窗口运行我之前运行的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:34:52.063

如果您打算`!!`由 bash 执行（因此“运行我之前*在该屏幕实例中*运行的任何内容”），那么您必须转义它：

```
nnoremap <F1> :!screen -S foo -p run -X stuff $'\!\!\n'<CR> 
```

或使用`system()`：

```
nnoremap <F1> :call system('screen -S foo -p run -X stuff $''!!\n''')<CR> 
```

. 因为在任何 bang thingie 中的意思是“将我之前*在 vim 中使用其他 bang thingie*`!`跑过的任何东西放在这里”</p>

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:22:01.470

我会尝试使用这样的技巧保存历史文件：[http ://www.cuberick.com/2008/11/update-bash-history-in-realtime.html](http://www.cuberick.com/2008/11/update-bash-history-in-realtime.html)

然后，一旦你有了历史，运行 screen 并将命令作为参数 - 注意`screen dmesg`将运行命令并终止。如果您不希望它终止，您会这样做`screen bash -c "dmesg ; bash"`（或您运行的任何外壳程序）。所以，一旦你知道了诀窍，重点是放置 `tail -n1 .bash_history` 而不是 dmesg。

**编辑：**

抱歉，我后来注意到“vim”标题。这种方式对我有用：

```
:nnoremap <F1> :!screen bash -c " '!!'" 
```*

# php - 如何在 Wordpress 中创建“下一页”链接？

> ID：13165949
> 
> 赞同：2
> 
> 时间：2012-10-31T19:12:07.027
> 
> 标签：php, wordpress

我正在尝试向我的网站添加一个链接到下一页帖子的按钮。我正在寻找一种将 HTML 链接添加到按钮的方法，以便它实际工作。

[http://codex.wordpress.org/Template_Tags/wp_link_pages](http://codex.wordpress.org/Template_Tags/wp_link_pages)

我相信这解释了我想要什么，但我没有任何运气试图让这些片段工作。

我的按钮看起来像：

```
<a href="#" class="next_page">Next Page</a> 
```

如何将按钮链接到 Wordpress 中的下一页功能？

编辑：

我的问题是我不知道如何将此代码与按钮相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:18:47.053

在 Wordpress 中有两种“内置”方法可以做到这一点：

1) 如果您需要将链接作为 PHP 变量访问，请尝试使用[get_next_posts_link](http://codex.wordpress.org/Function_Reference/get_next_posts_link)

```
<?php $nextLink = get_next_posts_link( $label , $max_pages ); ?>
<?php $previousLink = get_previous_posts_link( $label ); ?> 
```

从这里链接存储在变量中，您可以对它们做任何您想做的事情。

2）否则使用这些：

```
<?php next_posts_link( $label , $max_pages ); ?>
<?php previous_posts_link( $label ); ?> 
```

其中 $label 是链接的名称（在您的情况下为“下一页”）， $max_pages 是链接显示的最大页数（如果您想要限制）。

如果您想设置这些样式，而不必将它们包含在另一个 DIV 中，请使用[Wordpress 过滤器](http://codex.wordpress.org/Plugin_API/Filter_Reference)

```
function apply_my_next_link_style ( ){
    return 'class="button"';
}
apply_filters( 'next_posts_link_attributes', 'apply_my_next_link_style' ) 
```

3）如果你需要更多的控制，你可以试试这个，从上述函数的[源代码：](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/link-template.php#L0)

```
if ( !is_single() ) {
    echo '<a href="' . next_posts( 0, false ) . "\" $attr>" . preg_replace('/&([^#])(?![a-z]{1,8};)/i', '&#038;$1', "Next Page") . '</a>';
} 
```

另外，我建议在[wordpress.stackexchange.com上询问这些类型的问题](http://wordpress.stackexchange.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:17:26.700

是否需要[Snippets](http://wpsnipp.com/index.php/posts/next-previous-links/)，访问这个和这个解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:19:34.447

```
<?php next_posts_link('Older Posts'); ?>   
<?php previous_posts_link('Newer Posts'); ?> 
```

# mysql - MySQL：不相关子查询的依赖子查询选择类型

> ID：13165950
> 
> 赞同：-1
> 
> 时间：2012-10-31T19:12:09.677
> 
> 标签：mysql, sql, correlated-subquery

有 DDL 语句：

```
CREATE TABLE t1(
c1 INT NOT NULL
);
CREATE TABLE t2(
c2 INT NOT NULL
); 
```

我的查询：

```
SELECT c1 FROM t1 WHERE c1 NOT IN (SELECT c2 from t2) 
```

解释输出：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY t1  ALL NULL    NULL    NULL    NULL    3   Using where
2   DEPENDENT SUBQUERY  t2  ALL NULL    NULL    NULL    NULL    3   Using where 
```

子查询与外部查询无关。为什么它的类型是依赖子查询？

UPD：查询是`SELECT c1 FROM t1 WHERE c1 NOT IN (SELECT c2 from t2)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:37:50.727

您正在使用的 MySQL 版本的执行计划器/优化器在内部将查询重写为相关子查询（或者更准确地说，这两者都转换为相同的执行计划）：

```
SELECT c1 
FROM t1 
WHERE NOT EXISTS 
      (SELECT * from t2 WHERE c2 = t1.c1) ; 
```

这种类型的查询称为**[antijoin](http://en.wikipedia.org/wiki/Relational_algebra#Antijoin_.28.E2.96.B7.29)**（或 anti-semijoin），也可以用另一种方式编写，使用 a `LEFT JOIN / WHERE IS NULL`，在 MySQL（5.1 和 5.5 版本）中产生稍微不同的解释计划：

```
SELECT t1.c1 
FROM t1 
  LEFT JOIN t2 ON t2.c2 = t1.c1
WHERE t2.c2 IS NULL ; 
```

* * *

请注意，在其他版本中，如 5.6（仍在开发中）或 MariaDB（在最近的版本中有一些优化器改进），查询可能会以不同的方式重写。

即使在同一版本中，同一查询（尤其是更复杂的查询）的最终执行计划也可能因执行而异，具体取决于可用的索引、表的大小和其他几个因素。

# java - SpringUtilities 无法解决

> ID：13165954
> 
> 赞同：10
> 
> 时间：2012-10-31T19:12:21.703
> 
> 标签：java, api, springlayout

我正在尝试使用 Oracle 的 GUI 示例之一`SpringUtilities`。但是 Eclipse 给了我和错误`Cannot resolve to type`，当我尝试编译时，我得到了`SpringUtilities cannot be resolved`. 我使用的是 1.7 JDK，我想我必须在某处添加一些东西，但我在互联网上找不到关于这个问题的太多信息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T19:21:59.853

`SpringUtilities`不包含在 JDK/JRE 中。它在他们的 SpringLayout 教程中使用，

[http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)

源链接到该页面，可以在以下位置查看

[http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringGridProject/src/layout/SpringUtilities.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringGridProject/src/layout/SpringUtilities.java)

# sql - 将 where 子句集成到现有的 select 语句以进行报告时遇到问题

> ID：13165957
> 
> 赞同：0
> 
> 时间：2012-10-31T19:12:31.150
> 
> 标签：sql, tsql

因此，我有两个查询 - 一个当前创建报告，另一个查询是我编写的用于将更多数据附加到报告中。

我想合并新查询，以便当我在 ASP 中调用它时数据显示在同一数据集中。

我在放置新的 where 子句时遇到了麻烦，以便它只给我想要的东西。这些查询可以自行工作，但我似乎无法弄清楚如何在不给我大量我不想要的额外数据的情况下将它们组合在一起。

这是原始查询：

```
SELECT 
transactions.date,
transactions.Pcode,
transactions.L,
transactions.iL,  
transactions.q,
transactions.mTo
FROM
transactions, 
productlist
WHERE
transactions.Pcode=productlist.Pcode 
AND productlist.client=transactions.client 
AND (transactions.mTo='NotAccepted' OR transactions.mTo = 'TheStage') 
AND transactions.client=232 AND ( tophysical = 'Place1' OR fromphysical = 'Place1' ) 
AND transactions.Date>= '2012-10-01' 
AND transactions.Date <= '2012-10-31 11:59:59 PM ' 
ORDER BY
mTo,
transactions.date,
transactions.pCode 
```

我要集成的查询是：

```
SELECT 
transactions.date,
transactions.pcode,
transactions.L,
transactions.iL,  
transactions.qty,
transactions.mTo,
FROM
transactions, 
productlist,
productarchive,
Shipping
WHERE 
transactions.pcode=productlist.pcode 
AND productlist.client=transactions.client 
AND transactions.mFrom='NotAccepted'
AND ProductArchive.TrID=Transactions.ID
AND ProductArchive.StID = Shipping.ID
AND Shipping.SID LIKE 'BAG%'
AND transactions.Date>= '2012-10-01' 
AND transactions.Date <= '2012-10-31 11:59:59 PM ' 
```

我想出的最终查询给了我比我想要的多万条记录。

```
SELECT 
transactions.date,
transactions.pCode,
transactions.L,
transactions.iL,  
transactions.q,
transactions.mTo
FROM
transactions, 
productlist, 
shipping,
ProductArchive
WHERE 
transactions.pCode=productlist.pCode 
AND productlist.client=transactions.client 
AND (transactions.mTo='NotAccepted' OR transactions.mTo = 'TheStage' OR transactions.mFrom='NotAccepted') 
AND transactions.client=232 
AND 
( tophysical = 'Place1' OR fromphysical = 'Place1' OR 
    ( ProductArchive.TransID=Transactions.ID
        AND ProductArchive.StID = Shipping.ID
        AND Shipping.SID LIKE 'BAG%') 
)
AND transactions.Date>= '2012-10-01' 
AND transactions.Date <= '2012-10-31 11:59:59 PM ' 
ORDER BY
transactions.mTo,
transactions.date,
transactions.pCode 
```

感谢您的时间、精力和帮助！深表感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:23:33.510

```
SELECT 
transactions.date,
transactions.Pcode,
transactions.L,
transactions.iL,  
transactions.q,
transactions.mTo
FROM
transactions, 
productlist
WHERE
transactions.Pcode=productlist.Pcode 
AND productlist.client=transactions.client 
AND (transactions.mTo='NotAccepted' OR transactions.mTo = 'TheStage') 
AND transactions.client=232 AND ( tophysical = 'Place1' OR fromphysical = 'Place1' ) 
AND transactions.Date>= '2012-10-01' 
AND transactions.Date < '2012-11-01' 
ORDER BY
mTo,
transactions.date,
transactions.pCode

union all

SELECT 
transactions.date,
transactions.pcode,
transactions.L,
transactions.iL,  
transactions.qty,
transactions.mTo,
FROM
transactions, 
productlist,
productarchive,
Shipping
WHERE 
transactions.pcode=productlist.pcode 
AND productlist.client=transactions.client 
AND transactions.mFrom='NotAccepted'
AND ProductArchive.TrID=Transactions.ID
AND ProductArchive.StID = Shipping.ID
AND Shipping.SID LIKE 'BAG%'
AND transactions.Date>= '2012-10-01' 
AND transactions.Date < '2012-11-01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:25:28.570

根据我的评论，它可能更容易使用`UNION ALL`，我还更新为使用 ANSI JOIN 语法：

```
SELECT transactions.date,
    transactions.Pcode,
    transactions.L,
    transactions.iL,  
    transactions.q,
    transactions.mTo,
    'query 1' source
FROM transactions
INNER JOIN productlist
    ON transactions.Pcode=productlist.Pcode 
    AND productlist.client=transactions.client 
WHERE (transactions.mTo='NotAccepted' OR transactions.mTo = 'TheStage') 
    AND transactions.client=232 AND ( tophysical = 'Place1' OR fromphysical = 'Place1' ) 
    AND transactions.Date>= '2012-10-01' 
    AND transactions.Date <= '2012-10-31 11:59:59 PM ' 
UNION ALL
SELECT transactions.date,
    transactions.pcode,
    transactions.L,
    transactions.iL,  
    transactions.qty,
    transactions.mTo,
    'query 2' source
FROM transactions
INNER JOIN productlist
    ON transactions.pcode=productlist.pcode 
    AND productlist.client=transactions.client 
INNER JOIN productarchive
    ON ProductArchive.TrID=Transactions.ID
INNER JOIN Shipping
    ON ProductArchive.StID = Shipping.ID
WHERE transactions.mFrom='NotAccepted'
    AND Shipping.SID LIKE 'BAG%'
    AND transactions.Date>= '2012-10-01' 
    AND transactions.Date <= '2012-10-31 11:59:59 PM ' 
```

# c# - 在不使用参数化查询的情况下，在避免 SQL 注入风险的同时，在 SQL WHERE 子句中包含数据的最安全方法是什么？

> ID：13165958
> 
> 赞同：9
> 
> 时间：2012-10-31T19:12:36.940
> 
> 标签：c#, sql

使用什么函数可以使字符串安全地包含在 SQL 查询中？例如，撇号需要修正，毫无疑问还会出现其他问题。我想要一个坚如磐石的功能，并且可以在作恶者设计的任何可能输入的情况下工作。

现在，在群众告诉我使用查询参数和/或否决/关闭这个问题之前，请考虑以下几点：

*   我被困在使用设计不佳的 API 的第 3 方库。API应该被调用如下：

    ```
    dataObjectVariable.FindWhere("WHERE RecordID = '(your string here)'"); 
    ```

    现在，我 100% 同意你的观点，这不是一个好的 API，因为它 (1) 将内部数据库字段名称公开给用户，这些名称是实现细节，(2) 没有提供使用参数的机会，这首先会避免这个问题地方，（3）真的，你可以说SQL本身是一个实现细节，不应该暴露。但我坚持使用这个 API，因为它需要与行业领先的系统之一集成。我们也无法真正要求他们更改 API。

*   我在这个网站上搜索了与这个问题有关的其他问题，但发现答案往往强烈建议参数化查询。试图建议编写一个函数来清理字符串的答案通常被否决，没有经过深思熟虑等 - 我不确定我是否相信他们。

我只搜索字符串，而不是数字、日期等其他数据类型。同样，我 100% 了解使用参数化查询的好处，我希望我能使用它们，但我不能，因为我的手绑在这个上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:48:25.307

我必须在我们的一个应用程序中使用类似的 API。这是我用来手动规避 SQL 注入的验证例程：

```
 internal class SqlInjectionValidator
{

    internal static readonly List _s_keywords = new List
    {
        "alter",
        "begin",
        "commit",
        "create",
        "delete",
        "drop",
        "exec",
        "execute",
        "grant",
        "insert",
        "kill",
        "load",
        "revoke",
        "rollback",
        "shutdown",
        "truncate",
        "update",
        "use",
        "sysobjects"
    };

    private string _sql;
    private int _pos;
    private readonly Stack _literalQuotes = new Stack();
    private readonly Stack _identifierQuotes = new Stack();
    private int _statementCount;

    // Returns true if s does not contain SQL keywords.
    public SqlValidationStatus Validate(string s)
    {
        if (String.IsNullOrEmpty(s))
        {
            return SqlValidationStatus.Ok;
        }

        _pos = 0;
        _sql = s.ToLower();
        _literalQuotes.Clear();
        _identifierQuotes.Clear();
        _statementCount = 0;

        List chars = new List();

        SqlValidationStatus svs;
        while (_pos = _sql.Length)
            {
                break;
            }

            if (_statementCount != 0)
            {
                return SqlValidationStatus.SqlBatchNotAllowed;
            }

            char c = _sql[_pos];
            if (IsEmbeddedQuote(c))
            {
                _pos++;
                chars.Add(_sql[_pos]);
                _pos++;
                continue;
            }

            if (c != '\'' &&
                    IsQuotedString())
            {
                chars.Add(c);
                _pos++;
                continue;
            }

            if (c != ']' &&
                    c != '[' &&
                    c != '"' &&
                    IsQuotedIdentifier())
            {
                chars.Add(c);
                _pos++;
                continue;
            }

            switch (c)
            {
                case '[':
                    if (_identifierQuotes.Count != 0)
                    {
                        return SqlValidationStatus.MismatchedIdentifierQuote;
                    }
                    svs = DisallowWord(chars);
                    if (svs != SqlValidationStatus.Ok)
                    {
                        return svs;
                    }
                    _identifierQuotes.Push(c);
                    break;

                case ']':
                    if (_identifierQuotes.Count != 1 ||
                            _identifierQuotes.Peek() != '[')
                    {
                        return SqlValidationStatus.MismatchedIdentifierQuote;
                    }
                    svs = DisallowWord(chars);
                    if (svs != SqlValidationStatus.Ok)
                    {
                        return svs;
                    }
                    _identifierQuotes.Pop();
                    break;

                case '"':
                    if (_identifierQuotes.Count == 0)
                    {
                        svs = DisallowWord(chars);
                        if (svs != SqlValidationStatus.Ok)
                        {
                            return svs;
                        }
                        _identifierQuotes.Push(c);
                    }
                    else if (_identifierQuotes.Count == 1)
                    {
                        svs = DisallowWord(chars);
                        if (svs != SqlValidationStatus.Ok)
                        {
                            return svs;
                        }
                        _identifierQuotes.Pop();
                    }
                    else
                    {
                        return SqlValidationStatus.MismatchedIdentifierQuote;
                    }
                    break;

                case '\'':
                    if (_literalQuotes.Count == 0)
                    {
                        svs = DisallowWord(chars);
                        if (svs != SqlValidationStatus.Ok)
                        {
                            return svs;
                        }
                        _literalQuotes.Push(c);
                    }
                    else if (_literalQuotes.Count == 1 &&
                            _literalQuotes.Peek() == c)
                    {
                        _literalQuotes.Pop();
                        chars.Clear();
                    }
                    else
                    {
                        return SqlValidationStatus.MismatchedLiteralQuote;
                    }
                    break;

                default:
                    if (Char.IsLetterOrDigit(c) ||
                            c == '-')
                    {
                        chars.Add(c);
                    }
                    else if (Char.IsWhiteSpace(c) ||
                            Char.IsControl(c) ||
                            Char.IsPunctuation(c))
                    {
                        svs = DisallowWord(chars);
                        if (svs != SqlValidationStatus.Ok)
                        {
                            return svs;
                        }
                        if (c == ';')
                        {
                            _statementCount++;
                        }
                    }
                    break;
            }

            _pos++;
        }

        if (_literalQuotes.Count != 0)
        {
            return SqlValidationStatus.MismatchedLiteralQuote;
        }

        if (_identifierQuotes.Count != 0)
        {
            return SqlValidationStatus.MismatchedIdentifierQuote;
        }

        if (chars.Count > 0)
        {
            svs = DisallowWord(chars);
            if (svs != SqlValidationStatus.Ok)
            {
                return svs;
            }
        }

        return SqlValidationStatus.Ok;
    }

    // Returns true if the string representation of the sequence of characters in
    // chars is a SQL keyword.
    private SqlValidationStatus DisallowWord(List chars)
    {
        if (chars.Count == 0)
        {
            return SqlValidationStatus.Ok;
        }

        string s = new String(chars.ToArray()).Trim();
        chars.Clear();

        return DisallowWord(s);
    }

    private SqlValidationStatus DisallowWord(string word)
    {
        if (word.Contains("--"))
        {
            return SqlValidationStatus.CommentNotAllowed;
        }
        if (_s_keywords.Contains(word))
        {
            return SqlValidationStatus.KeywordNotAllowed;
        }
        if (_statementCount > 0)
        {
            return SqlValidationStatus.SqlBatchNotAllowed;
        }
        if (word.Equals("go"))
        {
            _statementCount++;
        }

        return SqlValidationStatus.Ok;
    }

    private bool IsEmbeddedQuote(char curChar)
    {
        if (curChar != '\'' ||
                !IsQuotedString() ||
                IsQuotedIdentifier())
        {
            return false;
        }

        if (_literalQuotes.Peek() == curChar &&
                Peek() == curChar)
        {
            return true;
        }

        return false;
    }

    private bool IsQuotedString()
    {
        return _literalQuotes.Count > 0;
    }

    private bool IsQuotedIdentifier()
    {
        return _identifierQuotes.Count > 0;
    }

    private char Peek()
    {
        if (_pos + 1 < _sql.Length)
        {
            return _sql[_pos + 1];
        }

        return '\0';
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:51:50.457

我最终挖掘了一些，发现这个“蛮力”解决方案似乎有效。 [如何使用 PHP 在 SQL Server 中转义字符串？](https://stackoverflow.com/questions/574805/how-to-escape-strings-in-mssql-using-php)

基本上，只需将字符串作为十六进制而不是字符串发送。例如，而不是发送：

```
WHERE RecordID = 'DEMO' 
```

发送这个：

```
WHERE RecordID = 0x44454D4F 
```

如果字符串为空，那么作为一种特殊情况，我只是发送`''`

这似乎是合理的安全；我想不出一种有效的攻击方式。

通常，请注意此解决方案，因为它可能不适用于非 ANSI 字符。但是，我发现我要比较的列是“varchar”而不是“nvarchar”，所以显然 Unicode 在他们设计数据库时并没有真正提上日程。我猜如果它是“nvarchar”，我需要发送一个 UTF-16 字符串（或任何与 nvarchar 一起使用的 Unicode 编码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:17:26.323

假设您只期望纯文本（以获得良好的记录），并且如果您可以假设您只会收到普通字符（即键盘字符），您可以接受输入，转换为 ASCII，然后将其限制为您想要的字符（通过提供允许的字符列表并从中过滤），并确保字符串长度合适。

然后只用可接受的字符构建一个新字符串，并将该字符串传入。一旦你在那里，单引号绝对是你唯一关心的问题。

如果您可以提出这些要求，那么这应该适合您。没有办法注入时髦的 Unicode 字符，或者溢出 SQL 缓冲区，或者做任何其他人们为引起问题而做的疯狂事情——您将 100% 控制进入查询的字符。

# ios - iOS 右导航按钮不显示在 UINavigationBar

> ID：13165959
> 
> 赞同：4
> 
> 时间：2012-10-31T19:12:39.610
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uinavigationitem

我有以下视图控制器层次结构：

*   视图控制器 VC1
*   选项卡栏控制器 TBC1 - 在情节提要中配置为通向表视图控制器 TVC1 和地图视图控制器 MVC1
*   表视图控制器 TVC1
*   表视图控制器 TVC2

在 VC1 中，我这样做：

```
[self.navigationController pushViewController:TBC1 animated:YES]; 
```

这正确地调出了标签栏控制器，并以 TVC1 为焦点。

TVC1 在其导航栏中显示后退按钮（以编程方式从 VC1 代码创建），这将使我进入 VC1，这是预期的。

但是，从 TVC1 开始，我需要再导航一次到 TVC2。我正在尝试为此向 TVC1 导航栏添加右键，但它没有显示出来。

这是我在 TVC1 中使用的代码（rightButton 是 TVC1 的 UIButton 类型属性）：

```
 self.rightButton = [[UIBarButtonItem alloc]
                            initWithBarButtonSystemItem: UIBarButtonSystemItemAdd
                            target: self
                            action: @selector(MySelector:)];
   self.rightButton.style = UIBarButtonItemStyleBordered;
   self.rightButton.title = @"";
   self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:   self.rightButton, nil]; 
```

（指定空白标题和样式只是为了确保这是否是导致此问题的问题，我实际上并不需要这些值）

MySelector 在 TVC1.h 中声明为：

```
- (void) MySelector:(id)sender; 
```

它也得到了适当的实施。

但是上面的 rightButton 并没有显示在 TVC1 的导航栏中。

我错过了什么？我怀疑它带有 VC1 和 TVC1 之间的 TBC1（标签栏），并且它以某种方式重置了导航属性。

但后来我争辩说我在 TVC1 上看到了导航栏，以及一个通向 VC1 的左按钮。我检查了在 TBC1 中，self.navigationItem.rightBarButtonItems 里面有 1 个对象，这绝对是我要添加的 rightButton。

我哪里错了？

注意：以上适用于所有 iOS 5.0、5.1 和 6.0 模拟器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T20:21:53.323

在我看来，您在故事板中的 TVC1 和 TVC2 之间缺少 UINavigationController 。如果您使用的是故事板，那么您可以在导航控制器本身上创建导航项添加按钮类型，并对 TVC2 进行 PUSH segue。如果有意义，请参阅[此图。](http://cdn1.raywenderlich.com/wp-content/uploads/2012/11/Full-storyboard.png)如果这不能解决您的问题，请上传示例代码，我会看看。

[编辑]

我通过在情节提要中创建视图控制器结构来重现您的问题。

![故事板](../Images/0bfecdadeeecc498ee2f4c70f7083931.png)

如果您注意到这里 TVC1 没有它的 UINavigationController 但它是从 VC1 继承的。解决您的问题的方法是将其添加到 self.parentViewController 而不是将 rightButton 添加到 self.parentViewController ，您将在 TVC1 中看到 rightButton。但请注意，它也会出现在 MVC1 中，因为它属于 TBC1 的父级。如果您不希望它出现在 MVC1 的 viewWillAppear 中，您可以隐藏右栏按钮。以下是代码。

```
self.rightButton = [[UIBarButtonItem alloc]
                    initWithBarButtonSystemItem: UIBarButtonSystemItemAdd
                    target: self
                    action: @selector(MySelector:)];
self.rightButton.style = UIBarButtonItemStyleBordered;
self.parentViewController.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects: self.rightButton,nil]; 
```

如果您想在 TVC1 的导航控制器中添加右键，则需要将 TVC1 嵌入 UINavigationController。为此，请在情节提要 -> 编辑器 -> 嵌入 -> 导航控制器中选择 TVC1 屏幕。当您这样做时，您的代码也将起作用并显示右键，但由于您的故事板结构，您将在其中有两个导航控制器（见下图）。您将需要将 Parent 的导航控制器隐藏到 TVC1 的视图中并加载并左键弹出到 Parentview 控制器。你在 MVC1 中做同样的事情。

希望这可以帮助！快乐编码:)

![输出](../Images/77b2728dabacd2abaa9846f3837f6e21.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T09:02:03.547

最近在 Swift 中遇到了同样的问题，发现**在 navigationController 中嵌入子视图**仍然是能够访问 rightBarButtonItems 的正确方法。

# ios - iOS Container View Controller - 在 transitionFromViewController 之后使用 PerformSelector

> ID：13165960
> 
> 赞同：0
> 
> 时间：2012-10-31T19:12:42.967
> 
> 标签：ios, uiviewcontroller, performselector

我们有一个容器视图控制器，并希望能够在该容器中的“子”视图控制器之一上调用“PerformSelector”，即在开始转换之后，即

```
[self navigateSubViewControllerTo:newSubViewController]; 
```

...一段时间后，在堆栈的其他地方，将在顶部可见 VC 上执行选择器

```
[subViewController performSelector:@selector(foo)]; 
```

对 transitionFromViewController 的调用发生在 navigateSubViewController 中。不幸的是，由于 transitionFromViewController 是异步发生的，我们发现 performSelector 调用被应用于“之前”子视图控制器，而不是 newSubViewController。即它发生在过渡发生之前。

在子视图控制器转换发生之前，关于如何让 performSelect 发生的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:21:41.620

`UIViewController``beginAppearanceTransition:animated:`提供了一个正是为此目的的回调。只需在您的子视图控制器中实现它就可以了；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:17:23.207

您可以在 transitionFromViewController:toViewController:duration:options:animations:completion 的完成块中调用 performSelector：

# javascript - 从 javascript 回调中引用“this”

> ID：13165963
> 
> 赞同：6
> 
> 时间：2012-10-31T19:12:57.127
> 
> 标签：javascript, node.js

我在 Javascript 中进行面向对象编码的方式一直困扰着我。当有回调时，我经常想引用最初调用函数的对象，这导致我做这样的事情：

```
MyClass.prototype.doSomething = function(obj, callback) {
    var me = this; // ugh
    obj.loadSomething(function(err, result) {
        me.data = result; // ugh
        callback(null, me);
    });
} 
```

首先，创建附加变量似乎总是……对我来说太过分了。此外，我不得不怀疑它是否会通过将“me”变量传回回调来最终导致问题（循环引用？un-GCd 对象？）。

有没有更好的方法来解决这个问题？这种方法是邪恶的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T19:15:30.887

这[`Function.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)是为了：

```
MyClass.prototype.doSomething = function(obj, callback) {
    obj.loadSomething((function(err, result) {
        this.data = result;
        callback(null, this);
    }).bind(this));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T19:15:05.787

AFAIK，你正在做的是这种事情的公认模式，不会引起任何问题。很多人使用“self”或“that”作为存储引用——如果你来自 python 背景，“self”会更直观。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T19:15:16.410

这是 JavaScript 的正常行为。对象的上下文`this`已经改变，`loadSomething`回调的原因是为了捕获闭包引用，比如你的`me`变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T19:16:09.387

您可以将 this 绑定到内部函数的范围

```
MyClass.prototype.doSomething = function(obj, callback) {
    obj.loadSomething(function(err, result) {
        this.data = result;
        callback(null, this);
    }.bind( this ));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T19:17:08.387

这是我见过的最常见的处理方式，我通常使用 var self = this;，但它只是一个名称。即使它是一个额外的变量，考虑到 javascript 开销以及它不复制对象的事实，它确实不会影响性能。

# asp.net - 在 ASP.NET 中通过 AJAX 使用后台工作程序

> ID：13165965
> 
> 赞同：9
> 
> 时间：2012-10-31T19:13:08.560
> 
> 标签：asp.net, ajax, asynchronous, backgroundworker

我需要执行一个后台任务，该任务有一个显示完成百分比的进度条和一个取消按钮。撇开任务细节不谈，现在我只想让一个示例正常工作，所以我只有三个主要事件处理程序（DoWork、ProgressChanged 和 RunWorkerCompleted）和一个循环，它只增加一个计数器并在 DoWork 中休眠 50 毫秒。但是，除了最后一次之外，它不会更新。

在 Windows 窗体中，我使用后台工作程序，它可以正常运行，没有任何问题。我想只使用相同的代码。但是，我一直看到说 ASP.NET 必须使用 AJAX 才能获得相同的功能。所以我的问题是：

1) 我真的需要 AJAX 来使用后台工作者吗？

2)**如果是的话**，我确实需要 AJAX，对于一个不了解 AJAX 的人来说，让后台工作人员启动并在 ASP.NET 网页上运行的最简单、最简单的方法是什么？

3）**如果没有**，我不需要 AJAX，谁能指出我不使用它的工作示例？即使它使用后台工作人员以外的其他线程方法，我也很感兴趣。

对不起，多部分的问题！如果您能回答其中之一，将不胜感激。我真的不介意我最终使用哪种方法，只要它有效。

来自 .cs 页面的参考代码：

```
 protected void bwProcess_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
 { 
     lblProgress.Text = "Task Complete: " + e.Result;
 }

 protected void bwProcess_ProgressChanged(object sender, ProgressChangedEventArgs e)
 {
     lblProgress.Text = e.ProgressPercentage.ToString();
 }

 protected void bwProcess_DoWork(object sender, DoWorkEventArgs e)
 {
     for (int i = 0; i <= 100; i++)
     {
         if (bwProcess.CancellationPending)
         {
             lblProgress.Text = "Task Cancelled.";
             e.Cancel = true;
             return;
         }
         bwProcess.ReportProgress(i);
         Thread.Sleep(50);
     }
     e.Result = "100%";
}

protected void BWClick(object sender, EventArgs e)
{
    lblProgress.Text = "Firing Process...";
    bwProcess = new BackgroundWorker();
    bwProcess.WorkerReportsProgress = true;
    bwProcess.WorkerSupportsCancellation = true;
    bwProcess.DoWork += new DoWorkEventHandler(bwProcess_DoWork);
    bwProcess.ProgressChanged += new ProgressChangedEventHandler(bwProcess_ProgressChanged);
    bwProcess.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bwProcess_RunWorkerCompleted);

    if (bwProcess != null)
    {
        bwProcess.RunWorkerAsync("StartAsynchronousProcess");
    }
} 
```

其他注意事项：我在@Page 中输入了 Async="True" 和 EnableSessionState="ReadOnly"。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T03:12:49.023

Web 编程提供了许多挑战，这些挑战在桌面编程时很容易被认为是理所当然的。从一个移动到另一个可能需要进行大量更改。产生长时间运行的线程是需要更加小心以避免陷阱的事情之一。应用程序池不知道您生成的线程，因此当它回收时，它会杀死那些导致应用程序出现意外行为的线程。有关更多信息，请参阅这篇文章，[我可以使用线程在 IIS 上执行长时间运行的作业吗？](https://stackoverflow.com/questions/536681/can-i-use-threads-to-carry-out-long-running-jobs-on-iis)

这意味着您需要使用更持久的方式来跟踪进度。数据库可能是最好的，但即使是文件也会在池回收后保留。

* * *

AJAX 将是完美的，因为它允许您在后台异步地从数据库中提取进度并更新网页。这是您如何实现此目标的简要示例。所有百分比计算都是在服务器端完成的。

```
function getProgress() {
    $.ajax({
        url: '/progress',           // send HTTP-GET to /progress page
        dataType: 'json',           // return format will be JSON
        success: function(result) { // function to run once the result is pulled
            $("#p1").html('Percentage: %' + result);
            if (result == "100")
                clearInterval(window.progressID);
        }
    });
}

function startGetProgress() {
    window.progressID = setInterval(getProgress, 10000); // update progress every 10 seconds
} 
```

上面的例子使用了 JQuery ajax 方法，[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)所以你需要引用 JQuery 库。

无论您使用的是 webforms 还是 mvc，您都可以添加一个 web api 控制器来处理 ajax 请求。如果您需要我澄清任何事情，请告诉我。

# .htaccess - 在“公共”文件夹中使用索引重写 URL

> ID：13165966
> 
> 赞同：1
> 
> 时间：2012-10-31T19:13:13.243
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我是开发领域的新手。我拼命尝试获得好的 URL。我检查了该站点是否存在类似问题，但找不到我需要的确切内容。或者我做得不好。

情况如下：我为一个站点设置了一个项目，该站点的 index.php 文件位于名为 Public 的文件夹中。

为了更清楚，这里是我现在必须访问已构建站点主页的 URL： **http://Domain Name.com/ 文件夹/站点名称/公共**

我担心的是公共文件夹：我不希望它出现在 URL 中。这是我想获取的 URL： **http://Domain Name.com/ 文件夹/站点名称**

事实上，我希望这个 URL 允许获取放置在“Public”文件夹中的索引文件。

我无法访问 Apache 配置（共享主机），因此我在项目中放置了一个 .htaccess（即：**www/ 文件夹 / 站点名称 /.htaccess**）。这是它的内容：

```
Options -Indexes +FollowSymLinks +Multiviews
RewriteEngine On
RewriteBase /public/
RewriteRule ^(.*)$ index.html [NC,L] 
```

我现在做了一些非常简单的事情，因为我尝试了很多没有有效结果的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:17:13.653

不太确定您要做什么，但是如果要删除`/public/`URL中出现的路径，则需要将其从所有链接中删除，其次，关闭多视图，这不是您想要的，第三，您需要请求时外部重定向浏览器的规则`/public/`，那么您需要在内部重写请求以指向 public.

```
Options -Indexes +FollowSymLinks -Multiviews
RewriteEngine On

# externally redirect, must match against %{THE_REQUEST}
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /public/
RewriteRule ^/?public/(.*)$ /$1 [L,R=301]

# internally rewrite it back, but we must first check that it's pointing to a valid resource:
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -d [OR]
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -s
RewriteRule ^(.*)$ /public/$1 [L] 
```

# emacs - 安装 YASnippet

> ID：13165967
> 
> 赞同：5
> 
> 时间：2012-10-31T19:13:17.960
> 
> 标签：emacs, debian, yasnippet

我已经安装了 YASnippet 并使用它进行了配置：

```
(add-to-list 'load-path "~/.emacs.d/plugins/yasnippet-0.6.1c")
(require 'yasnippet) ;; not yasnippet-bundle

(yas--initialize)
(yas/load-directory "~/.emacs.d/packages/yasnippet-0.6.1c/snippets") 
```

但是，当我启动 Emacs 时，它给了我一个错误：

```
Warning (initialization): An error occurred while loading `/home/alexander/.emacs':

Symbol's function definition is void: yas--initialize

To ensure normal operation, you should investigate and remove the
cause of the error in your initialization file.  Start Emacs with
the `--debug-init' option to view a complete error backtrace.
(add-to-list 'load-path "~/.emacs.d/plugins/yasnippet-0.6.1c")
(require 'yasnippet) ;; not yasnippet-bundle

(yas--initialize)
(yas/load-directory "~/.emacs.d/packages/yasnippet-0.6.1c/snippets") 
```

我究竟做错了什么？我试图找到答案，但没有成功。（我也尝试过另一个版本的 yasnippet yasnippet-0.6.1b 但它是一样的。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T19:53:31.783

乍一看，那

```
(yas--initialise) 
```

应该

```
(yas/initialize) 
```

我正在运行`0.6.1`，并且没有像`yas--initialize`包中那样的功能。

我的初始化代码看起来像

```
(require 'yasnippet)
(yas/initialize)
(yas/load-directory
 (dot-emacs "elpa/yasnippet-0.6.1/snippets")) 
```

我想你只是在某个地方得到了一些乱码的初始化代码。

**编辑**

我应该`load-directory`在我的示例中省略调用，因为它离题了。但就其价值而言，`dot-emacs`它只是一个与配置无关的函数，我用来引用与我的 init 相关的文件：

```
(defun dot-emacs (relative-path)
  "Return the full path of a file in the user's emacs directory."
  (expand-file-name (concat user-emacs-directory relative-path))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T20:28:51.217

FYI in case you ever upgrade: the information you got is correct for version `0.8`, but for `0.7` and below `yas/initialize` is correct. See [this commit](https://github.com/joaotavora/yasnippet/commit/90cd855c14f92088067425381ea5225d8af8e6f0)

# r - 让 R 将负位置搜索视为超出范围

> ID：13165973
> 
> 赞同：1
> 
> 时间：2012-10-31T19:14:06.893
> 
> 标签：r, subscript

`vec<-c("a", "b", "c", "d")` 我的任务是从键字符串的右侧和左侧提取第二个元素。

如果我们的密钥字符串是“d”，如果我们这样做

```
i<-c("d")
vec.1 <- append(vec.1, vec[which(vec == i) + 2]) 
```

我们得到 NA。但如果我们这样做

```
i<-c("a")    
vec.1 <- append(vec.1, vec[which(vec == i) - 2]) 
```

我们得到“b”、“c”、“d”。是否可以将下标中的负值视为超出向量的位置，例如超出向量长度的正下标？这样，结果将是 NA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:32:16.917

```
library(Hmisc)

Lag(vec,2)[vec=="d"]
#[1] "b"

Lag(vec,2)[vec=="a"]
#[1] ""

Lag(vec,-2)[vec=="a"]
#[1] "c"

Lag(vec,-2)[vec=="c"]
#[1] "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T19:42:02.390

我确信我可以做得更好，但现在已经很晚了。为什么不写一个小函数来做你想做的事。

```
myVec <- function(input, match, change) {
  temp = which(input == match)
  if ((temp + change) <= 0) {
    append(NA, input)
  } else {
    append(input, input[temp + change])
  }
}

vec <- c("a", "b", "c", "d")

myVec(vec, "a", -1)
# [1] NA  "a" "b" "c" "d"
myVec(vec, "c", -1)
# [1] "a" "b" "c" "d" "b"
myVec(vec, "c", -3)
# [1] NA  "a" "b" "c" "d"
myVec(vec, "d", 1)
# [1] "a" "b" "c" "d" NA 
```

# ruby-on-rails - Capybara 找不到表单域

> ID：13165975
> 
> 赞同：1
> 
> 时间：2012-10-31T19:14:14.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, integration-testing, capybara

我第一次尝试 Capybara，但无法找到我的表格。我正在使用 Rspec、Capybara、Rails 3.2.8 和 Twitter Bootstrap。

在我的测试中，我有：

```
before do
  choose  "Residential"
  choose  "Storage"
  fill_in "Customer Location",  with: 30082
  fill_in "datepicker",         with: 2012-12-02
  fill_in "Email",              with: "jesse@test.com"
  fill_in "Phone",              with: "555-555-5555"
 end 
```

并收到错误：

```
Failure/Error: choose  "Residential"
   Capybara::ElementNotFound:
     cannot choose field, no radio button with id, name, or label 'Residential' found 
```

在我的表格中，我有（摘录）：

```
 <%= quote.radio_button :customer_type, "Residential"%>
    <%= quote.label "Residential", class:"radio inline" %> 
```

当我启动服务器时，我可以看到表单，Firebug 显示我有一个名为“Residential”的标签与表单元素相关联。

在搜索了问题并找到了这篇文章：[Capybara not find form elements](https://stackoverflow.com/questions/11356161/capybara-not-finding-form-elements/13165829#13165829)（以及其他）之后，我无法弄清楚为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:14:14.150

我最终回到 Capybara 的 Rubydocs ( [http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions) ) 并找到了关于“选择”方法的部分。

我没有深入研究文档，但我看到它正在 :radio_button 中寻找“定位器”，因此尝试直接关联一个。

因此，我将表单更改为（注意我在表单元素中添加了“id”）：

```
 <%= quote.radio_button :customer_type, "Residential", id:"Residential"%>
    <%= quote.label "Residential", class:"radio inline" %> 
```

并且那部分测试通过了！我重复了我的每个表单元素，并且一切都按预期执行。

希望这对其他人有用。

# javascript - jQuery 验证方法 (RegEx)

> ID：13165984
> 
> 赞同：0
> 
> 时间：2012-10-31T19:14:33.060
> 
> 标签：javascript, jquery, regex, validation

```
$.validator.addMethod('username', function (value) {
    return [A-Za-z0-9\-\_]+.test(value);
}, 'Username can only contain letters, numbers, underscores and dashes.'); 
```

我不擅长正则表达式或 jQuery/JavaScript，这对我来说几乎是不可能的。

我只是想添加一种方法来验证用户名，以确保它只有数字、字母、下划线和破折号（没有空格、句点等），但我似乎无法正确处理。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:17:46.357

这里有两个问题。一，正则表达式需要分隔符。二，正则表达式不检查**整个**字符串是否由这些字母组成：

```
var regex = /^[\w-]+$/;
return regex.test(value); 
```

我还稍微缩短了正则表达式（字符类是相同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:17:33.070

您想将代码更改为：

```
return (value.match(/^[A-Za-z0-9-_]+$/)); 
```

# r - R 参考类作为参考类的一个字段

> ID：13165988
> 
> 赞同：1
> 
> 时间：2012-10-31T19:14:39.157
> 
> 标签：r, oop, reference-class

我想将引用类传递给引用类构造函数，并将传递的引用类分配为字段。但是，当我运行下面的代码时，我不明白为什么会出现错误。我的问题是：

1）请有人可以解释为什么会发生此错误：

```
> a <- ClassA&new()
Error in .getClassFromCache(Class, where) : 
  argument "Class" is missing, with no default
> b <- ClassB$new(a)
Error in .Object$initialize(...) : object 'a' not found 
```

2) 我已将**class.a.container**声明为类“列表”，但是我希望这是一个参考类。我需要在这里放什么而不是“列表”？

```
ClassA <- setRefClass(
  "ClassA",

  fields = list(myVar = "numeric"),

  methods = list(
    someMethod = function(){
      print("hi")
    }
  )
)

ClassB <- setRefClass(
  "ClassB",

  fields = list(class.a.container = "list"),

  methods = list(
    initialize = function(class.a){
      class.a.container <<- class.a
  })
)

a <- ClassA&new()
b <- ClassB$new(a) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T21:47:16.190

你会觉得有点傻，至少当我注意到这个问题时我做到了。在从 environment-class-item 中提取时，您有一个美元符号的 & 符号。

```
a <- ClassA$new(myVar=1)
a$someMethod(2)
#[1] "hi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-01T14:53:42.920

42- 已经在你的代码中指出了一个错误（& 而不是 $）。

为了完全回答您的原始问题，我只想明确指出，在纠正该错误后，您需要将 ClassB 中的字段声明从

```
class.a.container = "list" 
```

到

```
class.a.container = "ClassA" 
```

这是对我有用的完整代码：

```
ClassA = setRefClass(
    Class = "ClassA",

    fields = list(myVar = "numeric"),

    methods = list(
        someMethod = function() {
            print("hi")
        }
    )
)

ClassB = setRefClass(
    Class = "ClassB",

    fields = list(class.a.container = "ClassA"),

    methods = list(
        initialize = function(class.a) {
            class.a.container <<- class.a
        }
    )
)

a = ClassA$new(myVar = 1)
a

b = ClassB$new(a)
b 
```

它打印：

```
...
> a
Reference class object of class "ClassA"
Field "myVar":
[1] 1
> 
> b = ClassB$new(a)
> b
Reference class object of class "ClassB"
Field "class.a.container":
Reference class object of class "ClassA"
Field "myVar":
[1] 1 
```

# ruby - 如何使用 Ruby 持续获取用户的 Google 日历？

> ID：13165989
> 
> 赞同：0
> 
> 时间：2012-10-31T19:14:39.653
> 
> 标签：ruby, ruby-on-rails-3, google-api, oauth-2.0, google-calendar-api

我的应用程序已经获取了 Google 日历，但用户每次都必须登录才能获取新日历。该问题是由于令牌在一段时间后过期而引起的。

我已经尝试过以下包含 user.profile 范围的方法：

```
Rails.application.config.middleware.use OmniAuth::Builder do
    provider :google_oauth2, GOOGLE_APP_KEY, GOOGLE_APP_SECRET, {
    scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/userinfo.profile',
redirect_uri: GOOGLE_APP_CALLBACK_URL 
```

} 结尾

因此，现在令牌仍然存在，因此用户不必每次都登录应用程序，但如果 Google 日历有新条目，我的网络应用程序将无法获取新事件，因为令牌已过期。

解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:47:20.580

我不能给你一个完整的答案，但我正在研究类似的功能，并找到了一些关于使用[刷新令牌的文档](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

我还在这里找到了使用该令牌获取新访问令牌的[示例](https://github.com/gimite/google-drive-ruby/issues/12)

相关代码是：

```
client = OAuth2::Client.new(
        "code", "secret",
        :site => "https://accounts.google.com",
        :token_url => "/o/oauth2/token",
        :authorize_url => "/o/oauth2/auth")
    access_token = OAuth2::AccessToken.from_hash(client,
        {:refresh_token => current_user.refreshtoken})
    access_token = access_token.refresh! 
```

我相信您需要`approval_prompt`为`offline`刷新令牌请求一个

# java - 在我的 maven 项目中使用 syntethica (Netbeans IDE 7.2.1)

> ID：13165990
> 
> 赞同：0
> 
> 时间：2012-10-31T19:14:47.627
> 
> 标签：java, maven, netbeans, look-and-feel

我是 Java 编程新手，在将 syntethica LaF 添加到我的 Maven 项目时遇到了一些问题。我正在使用 Netbeans IDE 7.2.1。我认为 syntethica.jar 应该出现在依赖项列表中，对吧？我尝试手动将 JAR 文件添加到本地存储库中，并且似乎添加成功，但它没有出现在依赖项列表中。如何将 syntethica.jar 添加到我的项目中以便我可以使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:28:20.340

您应该在`pom.xml`. 就像是：

```
<dependency>
    <groupId>something...synthetica</groupId>
    <artifactId>somethingother...synthetica</artifactId>
    <version>1.2.3.4.5.6</version>
</dependency> 
```

我在中央找不到 synthena，从你提到 localrepository 来看，你应该

*   将 groupId、artifactId 和 version 匹配到您的 localrepository 结构和
*   将您的本地存储库添加为`<repository>...`您的 POM

干杯，

# winrt-xaml - 为什么我的 XAML 页面位于编辑器的 SE 角，如何将其移回 NW 角？

> ID：13165996
> 
> 赞同：0
> 
> 时间：2012-10-31T19:15:06.347
> 
> 标签：winrt-xaml, windows-store-apps

在我的 Windows 应用商店 XAML/C# 应用程序中，其中一个页面显示在右下角，而不是左上角。好奇心让我想知道为什么。实用性（“完成”）让我想知道如何解决它。

注意：在运行时，这很好 - 它显示在左上角/西北角。

# ruby-on-rails-3 - 从 Rails 3 获取数据到 Kendo UI 的最佳方式

> ID：13165999
> 
> 赞同：1
> 
> 时间：2012-10-31T19:15:22.947
> 
> 标签：ruby-on-rails-3, json, backbone.js, kendo-ui

将数据从 Rails 3 获取到 Kendo UI 的一些数据密集型小部件（主要是网格和图表）的最佳方式是什么？

假设我有一个 Rails 模型，其中包含我想在 Kendo 的网格中显示的数据。我想我将通过 json 传递该数据。但是似乎有很多方法可以传递 json 数据（gon、backbone.js 等）。还有 rails api 方法（但我需要其他页面的完整 rails）。

我正要坐下来学习backbone.js。这是一个好方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:50:42.517

您只需要创建一个将您的数据作为[JSON](http://guides.rubyonrails.org/action_controller_overview.html#rendering-xml-and-json-data)提供的操作。您不需要使用其他 JavaScript 库。看看这个[项目](https://github.com/telerik/kendo-examples-rails)，我想你可能会发现它很有用。