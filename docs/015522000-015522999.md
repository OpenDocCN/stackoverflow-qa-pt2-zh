# StackOverflow 问答 15522000-15522999

# javascript - 隐藏框模糊的算法

> ID：15522002
> 
> 赞同：1
> 
> 时间：2013-03-20T11:16:38.307
> 
> 标签：javascript, jquery, jquery-ui, dom

我有代码可以将浮动控件附加到表单中的所有文本框。我已经编写[了一个小提琴](http://jsfiddle.net/g96nr/)来展示它，但代码基本上是这样的：

```
#box{
    position: absolute;
    padding: 20px;
} 
```

```
var $box = $('<div id="box"><input type="button" value="Click Me"></div>').hide().appendTo("#main-form");
$("#main-form").on("focus", ":text, textarea", function(){
    $text = $(this);
    $box.show().position({
        my: "right top",
        at: "left top",
        of: $text
    });
}); 
```

当用户输入文本区域（使用鼠标或键盘）时，控制框会在文本区域旁边弹出。到现在为止还挺好。

我的问题是，当不再需要时（即用户已离开文本区域），我无法找到一个好的算法来*隐藏该框。*显而易见的方法是不够的：

```
$("#main-form").on("blur", ":text, textarea", function(){
    $box.hide();
}); 
```

...因为它不允许*使用*控制框——一旦用户尝试单击按钮，它就会隐藏。

我目前正在这条线上尝试一些东西：

```
$("#main-form").on("blur", ":text, textarea", function(){
    if( $box.is(":focus") ){ // :-?
        $box.hide();
    }
}); 
```

...但我无法检测焦点是否已移至控制框。任何的想法？

**编辑：** jQuery [API 文档](http://api.jquery.com/focus-selector/)是这样说的：

> 如果您正在寻找当前聚焦的元素，`$( document.activeElement )`将检索它而无需搜索整个 DOM 树。

...但[在我的测试中](http://jsfiddle.net/YpEdD/)，它**始终**是`<body>`节点：-？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:31:32.063

您可以通过像您正在做的那样听模糊 + 单击文档上的事件来实现此行为：

```
// Hide the $box if clicked anywhere outside of it
$(document).on('click', function(e) {
    if (!$box.data('over')) {
        $box.hide();
    } 
});

// Set a flag if $box is currently hovered
$box.on({
    mouseenter: function() {
        $(this).data('over', true);
    },
    mouseleave: function() {
        $(this).data('over', false);
    }
}); 
```

[http://jsfiddle.net/g96nr/1/](http://jsfiddle.net/g96nr/1/)

# doxygen - 协作图与doxygen 1.8.3.1中的类图相同

> ID：15522004
> 
> 赞同：3
> 
> 时间：2013-03-20T11:16:41.087
> 
> 标签：doxygen

升级到 doxygen 1.8.3.1 后，我的协作图看起来和类图一样。它们根本不显示任何协作，只有派生类等。如果我取消选中“UML_LOOK”，则没有协作图。在 doxygenwizard 中，我检查了所有 Dot 设置。

这是一个错误还是我配置错误？

使用 Windows 7 64 位，Doxygen 1.8.3.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:18:36.287

我有完全相同的问题。解决方案是设置以下定义：默认情况下，它们自 1.7.5.1 以来未设置

部分构建：

**EXTRACT_PRIVATE**

**EXTRACT_PACKAGE**

**EXTRACT_STATIC**

**EXTRACT_LOCALMETHODS**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T11:49:50.750

问题仍在 1.8.11 中，报告为 [https://bugzilla.gnome.org/show_bug.cgi?id=765369](https://bugzilla.gnome.org/show_bug.cgi?id=765369)

# jquery - jQuery .html() 添加的 HTML 对 javascript 函数不可见

> ID：15522007
> 
> 赞同：0
> 
> 时间：2013-03-20T11:16:45.810
> 
> 标签：jquery

在服务器上每隔几秒钟我会生成一个 html 块，我使用 jQuery 方法 .html() 在 UI 中显示它。

```
 $('#contentContainer').html(JSON.parse(htmlString)); 
```

注入的 html 正确显示。

但是，也有一些 javascript 函数可以操作此 html 代码。例如，一个连接到 div 元素：

```
$("#startStop").click(function () { ..}); 
```

另一个引导工具提示：

```
 $(function () {
        $("[rel='tooltip']").tooltip();
        $(".errorTip").tooltip();
    }); 
```

问题是当我使用来自服务器的 html 填充 div 元素时，它们不再起作用。

我可以看到元素是使用正确的 id 创建的：

```
 <div id="startStop" data-toggle="button" class="sbClickable btn active">
    ....
    </div> 
```

唯一的区别是，当我在 chrome 中打开源代码时，那里缺少生成的 html。

以下是我如何将代码加载到页面的步骤：

1.  page.chtml 文件已加载
2.  在 page.chtml 中有一个空的 div

    ```
    <div id="contentContainer">
    </div> 
    ```

3.  然后在 page.chtml 我调用一个方法来填充容器。该方法位于外部 .js 文件中

    ```
    <script type="text/javascript">
        einzelaktion.populateHtml();
    </script> 
    ```

4.  在 populateHtml 我向服务器发出 ajax 请求。检索数据时，我清空 div 并用新数据填充它：

    ```
    $('#contentContainer div').empty();
    $('#contentContainer').html(JSON.parse(htmlString)); 
    ```

5.  方法，我在同一个外部 .js 文件中遇到问题。

我尝试将填充容器的方法移动到 page.chtml，但它没有帮助。

我还尝试在以直接方式加载页面时创建容器元素，因此它们与 page.chtml 的其他元素一起创建，并且它们在页面源中可见。在这种情况下，一切正常，直到我第一次调用服务器并替换 div 的 html。

我用谷歌搜索了类似的问题，但没有找到任何与我的问题相近的东西..

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:18:16.943

改变

```
$("#startStop").click(function () { ..}); 
```

至

```
$("#contentContainer").on('click', '#startStop', function () { ..}); 
```

这样，在`startStop`调用绑定函数后创建的具有 id 的元素将接收到 click 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:19:16.740

每当您在加载 HTML 后将其添加到 DOM 时，您必须使用 jQuery 的 on() 函数来创建绑定...

例如， `$(".newDiv").on('click', function() { alert('clicked dynamic HTML!')});`

# ruby-on-rails - win7下安装Ansicon，带nVidia卡，以及如何设置环境变量

> ID：15522014
> 
> 赞同：2
> 
> 时间：2013-03-20T11:17:03.387
> 
> 标签：ruby-on-rails, command-line

安装 Ansicon 后，我得到**Ruby Interpreter (CUI) 1.9.3p1392 [i386-mingw32] has stop working**

我按照这里的说明（[https://github.com/adoxa/ansicon/issues/35](https://github.com/adoxa/ansicon/issues/35)）禁用了Computer\HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun。

这使我的命令行恢复生机（感谢上帝！）

在上面的链接中，它说

> 你用的是英伟达吗？尝试将 ANSICON_EXC=nvd3d9wrap.dll 添加到您的环境中。不知道为什么卸载不起作用，抱歉（在 XP 和 VIsta 中对我来说都很好，都是 32 位）。

但是我在win7，对设置环境变量不太熟悉。您能否告诉我如何解决停止工作问题（可能还有如何设置环境变量？）

或者，还有其他解决方案（除了 ANSICON）来着色 Win 7 中的命令行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T21:26:12.103

收到该错误后我所做的是将 ansicon 文件夹复制到桌面 [或您可能喜欢的任何文件夹] 并直接从那里启动 ansicon。

这样我就没有 ansicon 干预我的路径或任何其他环境变量，我可以获得相同的彩色输出。它只是一个快捷方式或“将此项目固定到任务栏”和 BAM！准备测试。

# javascript - Angular.js 只关注特定的对象属性

> ID：15522015
> 
> 赞同：16
> 
> 时间：2013-03-20T11:17:12.707
> 
> 标签：javascript, object, angularjs, watch, angularjs-scope

基本上我想要这个[http://plnkr.co/edit/3yfXbo1c0llO40HZ8WNP?p=preview](http://plnkr.co/edit/3yfXbo1c0llO40HZ8WNP?p=preview)但是当我改变一些东西时手表不会触发..

我知道这会奏效

```
$scope.$watch('stuff', function (newVal, oldVal) {
    console.log(oldVal, newVal);

}, true); 
```

但是因为我想在手表内部做一些总结，我不想不必要地循环或重新总结没有改变的值..

*//edit - 请注意，plnkr 示例只是从实际应用程序中提取的，您可以在其中添加和删除行等等，例如从 ng-repeat 之外的另一个输入中修改总数（某事和某事的总和）。 .*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T12:57:08.767

我不会做手表，因为这取决于您的阵列有多大，可能会非常费力。相反，我只会创建一个过滤器：

HTML：

```
Sum of something is: {{ stuff | sum:'something' }}<br/>
Sum of somethingelse is: {{ stuff | sum:'somethingelse' }} 
```

Javascript：

```
.filter("sum", function(){
    return function(input, params){
        var totalSum = 0;
        for(var x = 0; x < input.length; x++){
            totalSum += input[x][params];
        }
        return totalSum;
    }
}) 
```

plnkr：[http ://plnkr.co/edit/p6kM3ampSuMXnwqcteYd?p=preview](http://plnkr.co/edit/p6kM3ampSuMXnwqcteYd?p=preview)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T12:16:07.517

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-12T22:40:18.587

由于`$watch()`采用角度表达式，您可以使用自定义观察器函数。在您的情况下，观察更改的最简单方法是将所有您感兴趣的字段相加，然后返回一个对角度来说很好且有效的数字，并且您的总和将准备好呈现。

```
var sumThings = function(obj, field) {
  var val = 0;
  obj.forEach(function(o) {
    val += parseInt(o[field]);
  });
  return val;
};

$scope.$watch(function() { return sumThings($scope.stuff, "something")}, function (newVal, oldVal) {    //console.log("watchExpression('something') fired!", oldVal, newVal);
  $scope.somethingSum = newVal;
});

$scope.$watch(function() { return sumThings($scope.stuff, "somethingelse")}, function (newVal, oldVal) {
  $scope.somethingelseSum = newVal;
}); 
```

基本上，通过进行求和，您就是在进行自己的脏检查。`$watch(STUFF, true)`如果您的对象比您在此处显示的更复杂，它会更有效。

### 您更新的 plnkr：[http ://plnkr.co/edit/d7CvERu3XGkub4l6f1yw?p=preview](http://plnkr.co/edit/d7CvERu3XGkub4l6f1yw?p=preview)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T12:10:28.320

好吧，如果我明白了，您只想在内部对象发生变化时对其进行`something`求和`somethingelse`。如果更改发生在其中一个对象中，您不想遍历所有其他内部对象。

好吧，你`$watch`不是因为没有`stuff.property`，也没有像`stuff.*.something`.

如果您知道对象从阵列中推入或拉出的那一刻，则可以`$scope.$watch(object, function(){}, true)`在将每个对象插入阵列之前/之后分别应用。如果您不知道这一刻，那么您将需要`$watch`整个阵列，并且当发生更改时，请`$watch`一个接一个地运行所有注销函数并再次运行它们。

无论如何，现在浏览器中的循环非常快，除非您进行大量计算并且您拥有数百万个对象（这已经是内存问题），否则您可能会很好用它。因此，`$watch`只有在您进行大量计算时才需要对它们进行单独处理，这可能会影响系统性能。

# bash - 预期 Bash 一元运算符

> ID：15522018
> 
> 赞同：8
> 
> 时间：2013-03-20T11:17:29.150
> 
> 标签：bash

好的，所以在我的脚本中（这是我第一次使用 Bash）我遇到了两个一元运算符预期的错误。代码本身实际上运行良好，但它在运行时向我展示了这些错误：

> [: !=: 应为一元运算符

对于线路：

```
if [ ${netmask[1]} != "" ]; do 
```

所以对于第一个错误，它在`${netmask[1]}`is `""`( `null`) 时被抛出。我已经尝试了多种想法，但仍然无法在不返回该错误的情况下使其工作。

* * *

我通过添加引号解决了它（grrr）

```
if [ "${netmask[1]}" != "" ]; do 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T11:19:11.793

如果要检查`null`变量的值，请使用`-z`运算符：

```
if [ -z "${netmask[1]}" ]; then 
```

例如：

```
VAR=""

if [ -z "$VAR" ]; then
  echo This will get printed
fi 
```

请注意变量周围的括号：`"$VAR"`.

# sql - 在 Oracle SQL 查询中使用嵌套大小写条件的问题

> ID：15522022
> 
> 赞同：0
> 
> 时间：2013-03-20T11:17:34.143
> 
> 标签：sql, oracle, nested, case

我有一个场景，我需要使用一个包计算雇员工资，如果有一些预付款，它会给我永久雇员的剩余工资，然后使用另一个包将计算值转换为员工指定的货币。

我一直在这样做是：

```
CASE
  WHEN ( ai.employee_type = 'PERMANENT' and ai.payment_status_flag='Y')
  THEN EMP_UTILS_PKG.get_pay_amount_remaining( ai.employee_id )
  ELSE ail.amount_remaining
END amount_remaining,
CASE
  WHEN ( ai.salary_currency_code = NVL(find_currency('EMP_COMMON_CURRENCY'),ai.EMP_CURRENCY_CODE))
  THEN CASE
             WHEN ( ai.employee_type = 'PERMANENT' and ai.payment_status_flag='Y')
                THEN EMP_UTILS_PKG.get_pay_amount_remaining( ai.employee_id )
             ELSE ail.amount_remaining
  END
  ELSE EMP_API.convert_closest_amount_sql( x_from_currency => ai.EMP_CURRENCY_CODE ,x_to_currency => find_currency('EMP_COMMON_CURRENCY') ,x_amount =>( CASE
             WHEN ( ai.employee_type = 'PERMANENT' and ai.payment_status_flag='Y')
                THEN EMP_UTILS_PKG.get_pay_amount_remaining( ai.employee_id )
             ELSE ail.amount_remaining
END) ,x_max_roll_days => -1)
END EMP_CONVERTED_AMOUNT_REMAINING, 
```

我在查询中重复了以下条件 3 次：

```
WHEN ( ai.employee_type = 'PERMANENT' and ai.payment_status_flag='Y')
   THEN EMP_UTILS_PKG.get_pay_amount_remaining( ai.employee_id )
   ELSE ail.amount_remaining 
```

有没有更简单的方法，我们可以避免重复这样的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:22:58.767

`FROM`您可以在子句中使用内联视图来简化这一点。在您的实时代码中正确使用连接。

```
SELECT amount_remaining
     , CASE
          WHEN ai.salary_currency_code = NVL(find_currency('EMP_COMMON_CURRENCY')
                                            ,ai.EMP_CURRENCY_CODE)
               THEN amount_remaining

          ELSE EMP_API.convert_closest_amount_sql(
                   x_from_currency => ai.EMP_CURRENCY_CODE
                  ,x_to_currency => find_currency('EMP_COMMON_CURRENCY')
                  ,x_amount => amount_remaining
                  ,x_max_roll_days => -1)
        END EMP_CONVERTED_AMOUNT_REMAINING,
FROM (SELECT CASE
               WHEN ai.employee_type = 'PERMANENT'
                AND ai.payment_status_flag='Y'
                    THEN EMP_UTILS_PKG.get_pay_amount_remaining( ai.employee_id )
               ELSE ail.amount_remaining
             END amount_remaining
        FROM table_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:36:24.097

You already use the function `EMP_UTILS_PKG.get_pay_amount_remaining` so why not create a PL/SQL function that encapsulates the logic and just call that in your multiple places.

# node.js - 如何将 node.js 用于队列处理应用程序

> ID：15522023
> 
> 赞同：1
> 
> 时间：2013-03-20T11:17:37.323
> 
> 标签：node.js

将 node.js 用于队列处理应用程序时的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:37:02.080

我主要担心 Node 进程可以同时处理数千个项目，但是其中任何一个未处理的流氓错误都可能导致整个进程中断。

我正在寻找允许两阶段提交的队列/驱动程序组合（我认为是错误的术语？），即：

1.  从队列中获取下一个适当的项目（然后阻止该项目在其他地方使用）
2.  将每个项目移交给下游服务/数据库/文件系统后，您就可以告诉队列该项目已被处理

我还想要可重复的唯一标识符，以便您可以可靠地检测项目是否从管道中落下两次。在理论系统中它可能不会发生，但在实际环境中处理它的能力将使您的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:50:26.657

查看[http://learnboost.github.com/kue/](http://learnboost.github.com/kue/)我已经将它用于几个宠物项目并且效果很好，您可以查看他们的源代码并检查他们采取了哪些做法

# c# - DropDownList 中的 System.Data.DataRowView

> ID：15522025
> 
> 赞同：3
> 
> 时间：2013-03-20T11:17:41.347
> 
> 标签：c#, asp.net, html-select

我正在尝试使用列中的值填充下拉列表。现在的问题是：我没有在下拉列表中获得实际值（国家代码，如印度（+61））。相反，我在下拉列表中得到“System.Data.DataRowView”（多次）。

```
 public void bind()
 {
    DataSet ds1 = new DataSet();
    SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
    con.Open();
    string strQuery = "select CountryCode from AUser";
    SqlCommand cmd = new SqlCommand(strQuery, con);
    using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds1, "AUser");
    ddlMobile.DataSource = ds1.Tables["AUser"];
    ddlMobile.DataBind();
    con.Close();
} 
```

我正在调用绑定方法`page_load`。`CountryCode`is `varchar(50)`& 值的数据类型类似于`India(+91)`，`Australia(+61)`等等...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T11:33:02.723

您应该设置下拉菜单的`DataValueField`和属性。`DataTextField`

```
ddlMobile.DataSource = ds1.Tables["AUser"];
ddlMobile.DataValueField = "CountryCode";
ddlMobile.DataTextField = "CountryName";
ddlMobile.DataBind(); 
```

这里 CountryCode 和 CountryName 必须是与 DataRow 中的那些值对应的列名

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:34:02.087

您将看到 DataRowView.ToString() 的默认实现是做什么的。要从 DataRow 中选择要显示的特定字段，请执行以下操作。

```
ddlMobile.DataSource = ds1.Tables["AllUser"];
ddlMobile.DataTextField = "CountryCode"; // This is text displayed
ddlMobile.DataValueField = "CountryCode"; // This is the value returned
ddlMobile.DataBind(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:35:51.333

你没有`DataTextField`在`DropDownList`. 建议还设置`DataValueField` 在您的 aspx 中添加`DataTextField`属性：

```
<asp:DropDownList ID="ddlMobile" runat="server" 
                  DataTextField="CountryCode"
                  DataValueField="CountryCode" /> 
```

您也可以在后面的代码中设置它，就像其他答案所示。

否则，您看到的行为是因为 DataBound 正在调用`ToString()`来显示信息，因为您没有提供要查找的数据字段。

# date - 显示记录时出现 CSV 日期格式问题

> ID：15522027
> 
> 赞同：0
> 
> 时间：2013-03-20T11:17:53.907
> 
> 标签：date, csv, date-format

在我的应用程序中，用户选择他们想要报告的格式。他们输入一个格式如 2000-1-4 的数字，然后他们选择 CSV 格式，并且根据该数字的数据将填充到该 CSV 中。
现在的问题是，当他们输入这个数字时，它可以是 2012-1-4 之类的日期，然后在 CSV 中，这个数字被转换为 2012 年 1 月 4 日，这是错误的，但是当他们给出 883-17-8 之类的数字时，它就来了因为它很好。
有什么办法可以解决这个问题吗？有人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:23:46.463

该值的显示方式取决于操作系统的区域设置。（例如，对于 Windows 7，请参阅区域和语言）。在其他设置中，还有指定的 CSV 分隔符（列表分隔符）等。

# javascript - 没有 toString 方法

> ID：15522029
> 
> 赞同：1
> 
> 时间：2013-03-20T11:17:54.817
> 
> 标签：javascript

我正在学习 JavaScript，我在代码库中发现了一个 if 语句，它的哪一部分是多余的。

```
if(undefined === value || null === value || !value.toString) 
```

js 中有没有`toString`定义的东西（除了`undefined`and `null`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:32:17.887

如果该代码的目标是检查 value 变量是否定义了 toString 方法，那么这很奇怪，因为唯一会评估为 false 的情况是 value 未定义。

我冒昧地为您创建了一个小提琴（[http://jsfiddle.net/gnrcc/2/](http://jsfiddle.net/gnrcc/2/)），代码如下：

```
var obj = new String("Hi, im an object"); // String object
var str = "Hello, im a primitive" // string primitive
var und; // undefined

// will output native method, string and object details
console.log(obj.toString, obj.toString(), obj); 
// will output native method, string and string
console.log(str.toString, str.toString(), str);  
// will get property undefined error
console.log(und.toString, und.toString(), und); 
```

*   所有对象都有 toString 方法（来自对象原型）
*   当在它们上调用方法时，所有基元将被相应的对象自动包装，导致与对象相同的行为（编辑：异常显然是未定义的基元）

# blackberry-10 - 是否有在 BB10 上使用 Cascades 显示 BBM 联系人列表的示例？

> ID：15522030
> 
> 赞同：1
> 
> 时间：2013-03-20T11:17:56.023
> 
> 标签：blackberry-10, blackberry-cascades, blackberry-qnx

我一直在努力从 BBM 连接的应用程序中获取联系人列表，以便我可以选择要使用的联系人。

我正在使用 bb::platform::bbm::ContactService 类，但是每当我调用contacts() 时，即使注册过程完成，它也会返回为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:56:39.070

该方法返回安装了您的应用程序的联系人列表。应用程序无法读取所有用户的 BBM 联系人。

如果您希望发起聊天，您可以使用调用框架来执行此操作，而无需指定 PIN。这将打开 BBM 联系人选择器 - 列出所有 BBM 联系人 - 供用户选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:18:04.483

您是否检查以确保您的应用具有正确的权限？它应该有 access_pimdomain_contacts。

# d3.js - 旋转投影以跟随鼠标拖动

> ID：15522035
> 
> 赞同：0
> 
> 时间：2013-03-20T11:18:22.897
> 
> 标签：d3.js

我正在做一个项目来生成世界地图投影并操纵它们。您可以在此处查看测试版：http: [//ansichtssache-n.ch/en/personas/daVinci](http://ansichtssache-n.ch/en/personas/daVinci)

我试图正确解释拖动事件，例如，当您向上拖动澳大利亚时，它实际上将澳大利亚移动而不是投影的中心（导致澳大利亚在米勒投影中向下移动）。

我一直在尝试找到适用于 3 轴的正确旋转角度，如此处所示[http://bl.ocks.org/mbostock/4282586](http://bl.ocks.org/mbostock/4282586)。

我可以从鼠标拖动的开始和结束获取画布上的 x/y 位置，也可以获取这些点的地理坐标，并且可以获取当前中心的 x/y 及其地理位置- 坐标，但老实说我现在卡住了......

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:40:59.590

我在这里遇到了类似的问题[Compose two rotations in D3 geo projection?](https://stackoverflow.com/questions/16964993/compose-two-rotations-in-d3-geo-projection)

我想出了一种将轨迹球旋转与现有投影旋转组合在一起的方法，这样无论原始地球方向如何，您都可以获得直观的控制。

# javascript - 如何在javascript中将mysql时间戳格式化为mm/dd/yyyy H:i:s

> ID：15522036
> 
> 赞同：2
> 
> 时间：2013-03-20T11:18:22.897
> 
> 标签：javascript, jquery, date

我从数据库中获取值，这是一个时间戳。我需要使用 javascript 将其转换为 mm/dd/yyyy H:i:s。我尝试了以下代码。但它不能在firefox / ie中工作。但它在chrome中工作..如何解决它。

```
function formatDate(value){
if(value){
    Number.prototype.padLeft = function(base,chr){
        var  len = (String(base || 10).length - String(this).length)+1;
        return len > 0? new Array(len).join(chr || '0')+this : this;
    }
var d = new Date(value),
dformat = [ (d.getMonth()+1).padLeft(),
            d.getDate().padLeft(),
            d.getFullYear()].join('/')+
           ' ' +
          [ d.getHours().padLeft(),
            d.getMinutes().padLeft(),
            d.getSeconds().padLeft()].join(':');
 return dformat;
} 
```

我在 Firefox 中得到 NaN/NaN/NaN/NaN/NaN/NaN，即。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:29:22.663

您的代码缺少尾随`}`. 如果你格式化得更好，你会看到：

```
function formatDate(value){
  if(value){
    Number.prototype.padLeft = function(base,chr){
      var len = (String(base || 10).length - String(this).length)+1;
      return len > 0? new Array(len).join(chr || '0')+this : this;
    }
    var d = new Date(value),
    dformat = [ (d.getMonth()+1).padLeft(),
                 d.getDate().padLeft(),
                 d.getFullYear()].join('/')+
              ' ' +
              [ d.getHours().padLeft(),
                d.getMinutes().padLeft(),
                d.getSeconds().padLeft()].join(':');
    return dformat;
  }
} 
```

它现在在 Firefox 中运行良好。

请注意，您`Number.prototype.padLeft`每次调用此函数时都在定义。最好把它移出函数体。

* * *

**编辑**根据我的评论，这对您来说失败的原因是该`Date`对象仅接受某些格式的字符串。此外，在我看来，您的函数只是在更改字符串的格式：您实际上不需要费心处理日期，而是只需对输入进行字符串操作：

```
var formatDate = function(dateString) {
  // Convert 'yyyy-mm-dd hh:mm:ss' to 'mm/dd/yyyy hh:mm:ss'
  return dateString.replace(/^(\d{4})-(\d{2})-(\d{2})/, '$2/$3/$1');
}; 
```

容易多了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:26:29.247

```
function formatDate(d) 
{
    d = new Date(d * 1000);
    return d.getMonth() + 1 + '/' + d.getDate() + '/' + d.getFullYear() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:24:01.860

Javascript 已经知道如何使用时间戳。

```
var d = new Date(timestamp * 1000); //will create a date object 
```

然后，您可以使用所有 Javascript Date 方法对其进行格式化。( [http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp) )

编辑：将时间戳转换为毫秒（* 1000）

# jquery - 流沙插件和惰性加载器

> ID：15522037
> 
> 赞同：0
> 
> 时间：2013-03-20T11:18:24.040
> 
> 标签：jquery, lazy-loading, quicksand

我正在使用流沙插件（[http://razorjack.net/quicksand/](http://razorjack.net/quicksand/)）来显示图像。因为我计划有很多，所以我想添加惰性加载器插件（[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）来稍微提高性能。

当我将这两者结合在一起时，我遇到了一个奇怪的问题：

1.  如果我把流沙放在惰性加载器前面，流沙会工作，但惰性加载器不会。
2.  反之亦然，如果我将惰性负载放在流沙前面，则惰性工作和沙子不会。
3.  如果我将它们放在单独的文件中（例如，sand.js 和lazy.js）并排序它们，使sand.js 排在第一位，lazy.js 排在第二位，都在jqeury.js 之后，它们将在某个点上协同工作。流沙过滤器有效，但它显示空图像。

我已经阅读了关于 stackoverflow 的所有答案（我认为），用谷歌搜索了 2 个小时，我看到所有这些都归结为回调。我阅读了流沙文档，但更加困惑。

我会得到一些帮助，因为我不知道如何使用回调 - 我是 jquery noob。

我已经设置了一个 jsfiddle，如果有帮助的话：http: `[//jsfiddle.net/zUAVA/](http://jsfiddle.net/zUAVA/)`

 `（这个设置懒惰的作品，但流沙没有）

谢谢你的帮助。

编辑：如果我使用选项 3。（上图），图像会在页面加载时显示，但是一旦我开始使用过滤器，它们就会全部变为空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T21:03:19.767

将lazyload 和 $(window).trigger("scroll") 添加到流沙回调似乎对我有用。`

# asp.net - 如何在 VB.NET 中添加单引号正则表达式模式

> ID：15522061
> 
> 赞同：0
> 
> 时间：2013-03-20T11:19:25.390
> 
> 标签：asp.net, regex

谁能告诉我如何在正则表达式语言中允许**单引号、AZ、一个空格和一个 .dot 。**我使用的是VB.NET。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:22:17.390

您可以在正则表达式中使用转义字符“\”。例如`\.`将匹配点本身而不是任何字符。

单引号可以参考[如何在正则表达式中指定单引号](https://stackoverflow.com/questions/7392388/how-to-specify-single-quote-in-regular-expression)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:23:09.037

如果它只是您要检查的一个字符，请使用正则表达式`[A-Z\. ']`：

```
Dim myRegex As New Regex("[A-Z\. ']") 
```

如果要检查不能包含其他字符的字符串，请使用

```
Dim myRegex As New Regex("^[A-Z\. ']*$") 
```

# node.js - In nodejs & express, what's the difference between settings & locals

> ID：15522066
> 
> 赞同：3
> 
> 时间：2013-03-20T11:19:38.510
> 
> 标签：node.js, express

Starting my way in node + express, what's the difference between:

```
app.set(key, value) 
```

and

```
app.locals({key: value}); 
```

I've read the express docs and it states that app.locals are passed to all the rendered views, but I was also able to access the settings from a jade view as well (using #{settings.someKey}). As both are available in jade templates I can't seem to figure out what the difference or different usage for the 2.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:19:15.417

The difference is that by manipulating `app.locals` directly, you can create 'top level' variables for your templates, instead of having to use the `settings.` prefix.

`app.set(key, value)` is the same as `app.locals.settings[key] = value`; the former is the preferred way of configuring certain parts of Express (like setting `view engine`).

**EDIT:** small demo to show how they do the same:

```
var app = require('express')();

app.set('foo', 'bar');
console.log('app.get("foo"):', app.get('foo')); // 'bar'
console.log('app.locals.settings.foo:', app.locals.settings.foo); // 'bar'
app.locals.settings['foo'] = 'another bar';
console.log('2nd app.get("foo"):', app.get('foo')); // 'another bar' 
```

# ios - 无法使用 xcode phonegap 在 ios 中隐藏状态栏

> ID：15522069
> 
> 赞同：5
> 
> 时间：2013-03-20T11:19:50.390
> 
> 标签：ios, xcode, cordova, hide, statusbar

我试图删除我的 xcode iOS 项目中的状态栏。phonegap 2.5 版。我试过以下。

1）通过将以下行添加到 config.xml 从 phonegap 特定项目中删除状态栏

```
<preference name="fullscreen" value="true" /> 
```

这是我的 xml 文件。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <widget>
    <preference name="KeyboardDisplayRequiresUserAction" value="true" />
    <preference name="SuppressesIncrementalRendering" value="false" />
    <preference name="UIWebViewBounce" value="false" />
    <preference name="TopActivityIndicator" value="gray" />
    <preference name="EnableLocation" value="false" />
    <preference name="EnableViewportScale" value="true" />
    <preference name="AutoHideSplashScreen" value="true" />
    <preference name="ShowSplashScreenSpinner" value="false" />
    <preference name="FadeSplashScreen" value="true" />
    <preference name="FadeSplashScreenDuration" value=".25" />
    <preference name="MediaPlaybackRequiresUserAction" value="false" />
    <preference name="AllowInlineMediaPlayback" value="false" />
    <preference name="BackupWebStorage" value="cloud" />
    <preference name="fullscreen" value="true" />

    <content src="index.html" />

    <plugins>
        <plugin name="Device" value="CDVDevice" />
        <plugin name="Logger" value="CDVLogger" />
        <plugin name="Compass" value="CDVLocation" />
        <plugin name="Accelerometer" value="CDVAccelerometer" />
        <plugin name="Camera" value="CDVCamera" />
        <plugin name="NetworkStatus" value="CDVConnection" />
        <plugin name="Contacts" value="CDVContacts" />
        <plugin name="Debug Console" value="CDVDebugConsole" />
        <plugin name="Echo" value="CDVEcho" />
        <plugin name="File" value="CDVFile" />
        <plugin name="FileTransfer" value="CDVFileTransfer" />
        <plugin name="Geolocation" value="CDVLocation" />
        <plugin name="Notification" value="CDVNotification" />
        <plugin name="Media" value="CDVSound" />
        <plugin name="Capture" value="CDVCapture" />
        <plugin name="SplashScreen" value="CDVSplashScreen" />
        <plugin name="Battery" value="CDVBattery" />
        <plugin name="Globalization" value="CDVGlobalization" />
        <plugin name="InAppBrowser" value="CDVInAppBrowser" />
    </plugins>

    <access origin="*" />
</widget> 
```

测试

我也将此添加到我的 plist 文件中。这应该删除特定 ios 应用程序的状态栏。

```
<key>[UIApplication sharedApplication].statusBarHidden = YES;</key> 
```

代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleIcons</key>
    <dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>icon.png</string>
                <string>icon@2x.png</string>
                <string>icon-72.png</string>
                <string>icon-72@2x.png</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
    </dict>
    <key>UISupportedInterfaceOrientations~ipad</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationPortraitUpsideDown</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
    <key>CFBundleDevelopmentRegion</key>
    <string>English</string>
    <key>CFBundleDisplayName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleIconFile</key>
    <string>icon.png</string>
    <key>CFBundleIdentifier</key>
    <string>org.apache.cordova.HelloWorld</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>NSMainNibFile</key>
    <string></string>
    <key>[UIApplication sharedApplication].statusBarHidden = YES;</key>
    <string>YES</string>
    <key>NSMainNibFile~ipad</key>
    <string></string>
</dict>
</plist> 
```

为什么这些都不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T17:32:37.627

OP 99% 正确，但您只需要勾选“在应用程序启动期间隐藏”框

这是你找到它的地方：

选择 Project Navigator（边栏中的文件夹图标）

选择根项目（带有您的项目名称的项目）

然后在主菜单中，突出显示摘要选项卡，向下滚动到“状态栏”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:00:26.813

我终于解决了这个问题..！我通过单击项目进入项目属性。在 target / yourProject 下有一个状态栏菜单。我选择了状态栏：黑色半透明修复了它。

# json - 将 json 对象数组从 php 传递到 android

> ID：15522070
> 
> 赞同：0
> 
> 时间：2013-03-20T11:19:52.610
> 
> 标签：json, arrays

我正在尝试通过 json 对象将一组数据从 php 传递到 android。但我得到“解析错误：语法错误”。请帮帮我。thanx

'

//数据库详情

```
$dbhost="localhost";
$dbuser="root";
$dbpass="";
$dbdb="opac"; 
```

//连接数据库

```
$con=mysql_connect($dbhost, $dbuser, $dbpass) or die("connection error"); 
```

//选择数据库

```
mysql_select_db($dbdb) or die("db selecction error");
$stk=$_POST[‘stock’];

$query=mysql_query("SELECT Title FROM books WHERE Stock>’$stk’”);

    if(!$query)
    {
           die('Could not get data: ' . mysql_error());
    }
    $index=0;
    while($row = mysql_fetch_array($query, MYSQL_ASSOC)) 
    {
           $output[$index]=$row;
           $index++;
    }

    echo json_encode($output);
     mysql_close();
    ?> 
```

相应的android文件是....执行android文件时出现解析错误，它显示“不幸的是，已停止”

```
 public class BooksActivity extends ListActivity {

HttpClient httpclient;
HttpPost httppost;
ArrayList<NameValuePair> namevaluepairs;
HttpResponse httpresponse;
HttpEntity httpentity;
ArrayList<NameValuePair> nameValuePairs;
InputStream is;
String result = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
    setContentView(R.layout.activity_books);
    nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("stock","5"));

    //httppost
    try{
        httpclient = new DefaultHttpClient();
        httppost = new HttpPost("http://10.0.2.2:80/books.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        httpresponse = httpclient.execute(httppost);
        httpentity = httpresponse.getEntity();
        is = httpentity.getContent();
    }
    catch(Exception e){
           // Log.e("log_tag", "Error in http connection "+e.toString());
        Toast.makeText(getBaseContext(), "http post error"+e, Toast.LENGTH_SHORT ).show();
    }

    //result conversion
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }
    catch(Exception e){
        //Log.e("log_tag", "Error in converting result "+e.toString());
        Toast.makeText(getBaseContext(), "result conversion error"+e, Toast.LENGTH_SHORT ).show();
    }

    //parsing json data

    try{
        String[] returnString = new String[100];
        JSONArray jArray = new JSONArray(result);           
        ListView listView = (ListView) findViewById(R.id.list);
        for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                returnString[i] = json_data.getString("Title");              
        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                  android.R.layout.simple_list_item_1, android.R.id.list, returnString);
        listView.setAdapter(adapter);
    }catch(JSONException e){
        //Log.e("log_tag", "Error parsing data "+e.toString());
        Toast.makeText(getBaseContext(), "parsing error"+e, Toast.LENGTH_SHORT ).show();
    }

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_books, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:05:36.790

你在这里使用反引号吗？

```
$stk=$_POST[‘stock’]; 
```

它们需要是引号

```
$stk=$_POST['stock']; 
```

此行也有一个 utf-8 花式引用

```
$query=mysql_query("SELECT Title FROM books WHERE Stock>`$stk”); 
```

这应该是一个ASCII报价

```
$query=mysql_query("SELECT Title FROM books WHERE Stock>$stk"); 
```

当您从博客复制代码时，这些是常见错误；）

# ios - 另一种进行“初始同步”的方法

> ID：15522075
> 
> 赞同：0
> 
> 时间：2013-03-20T11:20:11.880
> 
> 标签：ios, objective-c, synchronization

我正在开发一个必须完全离线工作然后同步到服务器的应用程序。

服务器可以（并且可能会）根据当前正在进行的项目进行更改。

我已经写了同步的东西，而且效果很好。一切都会以两种方式更新。

但是，设备的初始同步基本上是数千条记录的大信息转储，并且需要很长时间。我已经对此进行了分析和优化，但现在时间只是从同步的数据量以及这些数据之间的关系来看。

正常的同步（即发送和获取更新）从开始到结束只需要大约 5 秒，包括读取、上传、下载和写入。

有没有办法可以“插入”计算机并将数据库文件导入应用程序？

除了通过同步过程并在设备上下载和安装所有这些东西之外，还有其他方法吗？

我不能在构建时这样做，因为应用程序独立于它所在的项目，并且每个项目都有不同的数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:37:56.623

将 sqlite db 导入您的应用程序，并将其链接到应用程序委托的核心数据堆栈中。应用程序应随附大量数据，然后同步将对初始数据集进行更改。

这就是将 sqlite 链接到核心数据堆栈的方式

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"MyAppName.sqlite"];

    //Connects to sqlite---------------------------------------
    NSFileManager *fileManager = [NSFileManager defaultManager];

    // If the expected store doesn't exist, copy the default store.
    if (![fileManager fileExistsAtPath:[storeURL path]]) {
        NSURL *defaultStoreURL = [[NSBundle mainBundle] URLForResource:@"MyAppName" withExtension:@"sqlite"];
        if (defaultStoreURL) {
            [fileManager copyItemAtURL:defaultStoreURL toURL:storeURL error:NULL];
        }
    }
    //end sqlite connection ---------------------------------------

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
} 
```

# ios - 解析 Facebook Feed Json 数据

> ID：15522077
> 
> 赞同：1
> 
> 时间：2013-03-20T11:20:12.167
> 
> 标签：ios, objective-c, xcode, facebook, facebook-graph-api

我想解析一个 facebook 提要。

这是我的 json 网址：[http ://www.facebook.com/feeds/page.php?id=199009743552420&format=json](http://www.facebook.com/feeds/page.php?id=199009743552420&format=json)

所以我得到了这种类型的数据作为回应：

```
 "content": "\u003Ca href=\"\/l.php?u=http\u00253A\u00252F\u00252Fwww.youtube.com\u00252Fwatch\u00253Fv\u00253D9_PaHtaKAug\u002526list\u00253DPLc4q0uG_h6x5tA_L3kHK6TE9TV6skf14n\u002526index\u00253D1\u002526feature\u00253Dplpp_video&amp;h=0AQEQfrMH&amp;s=1\" id=\"\" title=\"\" target=\"\" onclick=\"LinkshimAsyncLink.swap(this, &quot;\\\/l.php?u=http\\u00253A\\u00252F\\u00252Fwww.youtube.com\\u00252Fwatch\\u00253Fv\\u00253D9_PaHtaKAug\\u002526list\\u00253DPLc4q0uG_h6x5tA_L3kHK6TE9TV6skf14n\\u002526index\\u00253D1\\u002526feature\\u00253Dplpp_video&amp;h=0AQEQfrMH&amp;s=1&quot;);\" style=\"\" rel=\"nofollow\" onmouseover=\"LinkshimAsyncLink.swap(this, &quot;http:\\\/\\\/www.youtube.com\\\/watch?v=9_PaHtaKAug&amp;list=PLc4q0uG_h6x5tA_L3kHK6TE9TV6skf14n&amp;index=1&amp;feature=plpp_video&quot;);\">\u003Cimg class=\"img\" src=\"http:\/\/external.ak.fbcdn.net\/safe_image.php?d=AQDshpKwwDhCYH9k&amp;w=130&amp;h=130&amp;url=http\u00253A\u00252F\u00252Fi2.ytimg.com\u00252Fvi\u00252F9_PaHtaKAug\u00252Fmqdefault.jpg\" alt=\"\" style=\"height:90px;\" \/>\u003C\/a>\u003Cbr\/>\u003Ca href=\"\/l.php?u=http\u00253A\u00252F\u00252Fwww.youtube.com\u00252Fwatch\u00253Fv\u00253D9_PaHtaKAug\u002526list\u00253DPLc4q0uG_h6x5tA_L3kHK6TE9TV6skf14n\u002526index\u00253D1\u002526feature\u00253Dplpp_video&amp;h=PAQEzb06t&amp;s=1\" id=\"\" target=\"_blank\" onclick=\"LinkshimAsyncLink.swap(this, &quot;\\\/l.php?u=http\\u00253A\\u00252F\\u00252Fwww.youtube.com\\u00252Fwatch\\u00253Fv\\u00253D9_PaHtaKAug\\u002526list\\u00253DPLc4q0uG_h6x5tA_L3kHK6TE9TV6skf14n\\u002526index\\u00253D1\\u002526feature\\u00253Dplpp_video&amp;h=PAQEzb06t&amp;s=1&quot;);\" style=\"\" rel=\"nofollow\" onmouseover=\"LinkshimAsyncLink.swap(this, &quot;http:\\\/\\\/www.youtube.com\\\/watch?v=9_PaHtaKAug&amp;list=PLc4q0uG_h6x5tA_L3kHK6TE9TV6skf14n&amp;index=1&amp;feature=plpp_video&quot;);\">The Dissident Files - Ausama Monajed at THiNK 2012\u003C\/a>\u003Cbr\/>www.youtube.com\u003Cbr\/>Ausama Monajed in conversation with NDTV&#039;s Vishnu Som in Tehelka&#039;s THiNK 2012 session on &quot;The Troubled Looking Glass: Why You Should Care About Syria&quot; For mo... " 
```

它包含图像徽标 url、视频 url、....那么我该如何解析这种类型的数据呢？

请帮我。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:53:05.987

从 json 解析内容字段后，您需要再次解析它，记住现在您正在处理 html 代码。如果你想做一些复杂的查询，你必须使用 XPath 和 libxml2 库。

请参阅：[iOS：解析 html 标签的最佳方式？](https://stackoverflow.com/questions/11704563/ios-best-way-to-parse-html-tags)

如果你只想做一个简单的查询，你可以遍历字符串并选择你想要的

# c# - 如何看到真正的菜单条的工具条菜单及其子菜单？

> ID：15522078
> 
> 赞同：0
> 
> 时间：2013-03-20T11:20:12.997
> 
> 标签：c#

我有一个菜单条，其中我插入了一些工具条菜单和三个子菜单。在登录时，我想为`visible=true`菜单条中的所有项目制作。但我无法这样做。这是我的代码。

**代码**：

```
private void SetToolStripItems(ToolStripItemCollection dropDownItems)
        {
            try
            {
                foreach (object obj in dropDownItems)
                {
                    if (obj.GetType().Equals(typeof(ToolStripMenuItem)))
                    {
                        ToolStripMenuItem subMenu = (ToolStripMenuItem)obj;
                        if (subMenu.HasDropDownItems)
                        {
                            subMenu.Visible = true;
                        }
                        else // Do the desired operations here.
                        {
                            subMenu.Visible = true;
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                //
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T05:11:21.287

而不是：隐藏复制代码

```
subitem.Visible = true; 
```

尝试：隐藏复制代码

```
subitem.Available = true; 
```

请参阅此 MSDN 页面上的备注，描述 .Visible 和 .Available 之间的区别：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.available.aspx[^]](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.available.aspx[%5E])

# android - Android CalendarView - 如何在不同的日期有不同的颜色？

> ID：15522080
> 
> 赞同：0
> 
> 时间：2013-03-20T11:20:21.013
> 
> 标签：android, calendarview

我想使用 CalendarView 日历来镜像另一个中央日历。所以我基本上只需要自己拥有/存储数据，然后至少在视觉上标记有约会/事件的日期的 Android CalendarView。

但是，如何更改我有约会/活动的日期的颜色？（或者我如何告诉 CalendarView 我有哪些约会/活动，所以它会突出显示这些日期）

# jquery - Jquery Fadein切换保持闪烁（使用wordpress）

> ID：15522085
> 
> 赞同：0
> 
> 时间：2013-03-20T11:20:34.663
> 
> 标签：jquery, css, hover, wordpress

我正在创建一个 wordpress 博客并使用了“非常简单的 facebook twitter 分享按钮”（[http://wordpress.org/extend/plugins/really-simple-facebook-twitter-share-buttons/](http://wordpress.org/extend/plugins/really-simple-facebook-twitter-share-buttons/)）

在设置中，我选择查看帖子下方的共享图标，并且我有一个入口页脚。该插件实际上将图标放在入口页脚上方，因此我必须绝对定位它们并将它们向下移动。

我想要隐藏图标的效果，然后当用户将鼠标悬停在共享文本（或条目页脚本身）上时，图标显示为淡入/淡出效果。我已经对所有这些进行了排序，但是当用户将鼠标悬停在图标本身上时，图标绝对定位，共享文本上的颜色会变淡并且图标会闪烁。我在共享和条目页脚周围添加了一个填充，因此如果用户在此处附近的任何位置输入鼠标，图标就会出现，但是当用户浏览图标时，显然 jQuery 认为他们已经离开了这个区域并且正在淡出。如果有人可以帮助我解决这个问题，我将不胜感激。

这是支持的代码：

jQuery：

```
$(document).ready(function () {   
   $('.entry-footer').mouseover(function() {
     $('.really_simple_share').fadeToggle(400);
   });
 }); 
```

CSS：

```
.entry-footer a{
  height:88px;
}

h1.share a{
  padding:30px 560px 40px 30px;
  float:left;
}

.entry-footer a:hover {
  color:#79b74c;
}

.really_simple_share {
    position:absolute;
    margin:44px 0px 0px 140px;
    display:none;
} 
```

我还在这里发布了一个关于图标位于帖子顶部和底部且无法在页脚内移动的问题：[http ://wordpress.org/support/topic/social-icons-showing -twice-in-posts?replies=1#post-3994811](http://wordpress.org/support/topic/social-icons-showing-twice-in-posts?replies=1#post-3994811)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:28:22.563

当您将鼠标悬停在对象上时，您会触发 fadeToggle。这意味着如果您的鼠标停留在它上面，它将继续褪色。

尝试

```
$(document).ready(function () {   
   $('.entry-footer').hover(function() {
     $('.really_simple_share').fadeIn(400);
   },
   function(){
     $('.really_simple_share').fadeOut(400);
   });
}); 
```

# python - Python：用高斯上升和指数衰减拟合数据

> ID：15522089
> 
> 赞同：1
> 
> 时间：2013-03-20T11:20:40.263
> 
> 标签：python, numpy, matplotlib, scipy

我试图拟合一些在上升的高斯曲线之后分布的数据，然后呈指数衰减。我[在网上找到了这个例子](http://machc.blogspot.de/2009/01/fitting-arbitrary-function.html)，这与我的情况非常相似，但我刚刚开始适应 python，这个例子对我来说似乎很混乱。尽管如此，我已经尝试使示例适应我的脚本和数据，以下是我的进展：

```
#!/usr/bin/env python

import pyfits, os, re, glob, sys
from scipy.optimize import leastsq
from numpy import *
from pylab import *
from scipy import *
from scipy import optimize
import numpy as N
import pylab as P

data=pyfits.open('http://heasarc.gsfc.nasa.gov/docs/swift/results/transients/weak/GX304-1.orbit.lc.fits')
time  = data[1].data.field(0)/86400\. + data[1].header['MJDREFF'] + data[1].header['MJDREFI']
rate  = data[1].data.field(1)
error = data[1].data.field(2)
data.close()

cond = ((time > 56200) & (time < 56220))
time=time[cond]
rate=rate[cond]
error=error[cond]

def expGauss(x, pos, wid, tConst, expMod = 0.5, amp = 1):
    expMod *= 1.0
    gNorm = amp * N.exp(-0.5*((x-pos)/(wid))**2)
    g = expBroaden(gNorm, tConst, expMod)
    return g, gNorm

def expBroaden(y, t, expMod):
    fy = F.fft(y)
    a = N.exp(-1*expMod*time/t)
    fa = F.fft(a)
    fy1 = fy*fa
    yb = (F.ifft(fy1).real)/N.sum(a)
    return yb

if __name__ == '__main__':

# Fit the first set
#p[0] -- amplitude, p[1] -- position, p[2] -- width
    fitfuncG = lambda p, x: p[0]*N.exp(-0.5*(x-p[1])**2/p[2]**2) # Target function
    errfuncG = lambda p, x, y: fitfuncG(p, x) - y # Distance to the target function
    p0 = [0.20, 56210, 2.0] # Initial guess for the parameters
    p1, success = optimize.leastsq(errfuncG, p0[:], args=(time, rate))
    p1G = fitfuncG(p1, time)
   # P.plot(rate,  'ro', alpha = 0.4, label = "Gaussian")
   # P.plot(p1G, label = 'G-Fit')

def expGauss(x, pos, wid, tConst, expMod = 0.5, amp = 1):
  #p[0] -- amplitude, p[1] -- position, p[2] -- width, p[3]--tConst, p[4] -- expMod  
    fitfuncExpG = lambda p, x: expGauss(x, p[1], p[2], p[3], p[4], p[0])[0]
    errfuncExpG = lambda p, x, y: fitfuncExpG(p, x) - y # Distance to the target function  
    p0a = [0.20, 56210, 2.0] # Initial guess for the parameters
    p1a, success = optimize.leastsq(errfuncExpG, p0a[:], args=(time, rate))
    p1aG = fitfuncExpG(p1a, time)
    print type(rate), type(time), len(rate), len(time)  
    P.plot(rate, 'go', alpha = 0.4, label = "ExpGaussian")  
    P.plot(p1aG, label = 'ExpG-Fit')

    P.legend()  
    P.show() 
```

我肯定把整个事情弄糊涂了，所以提前抱歉，但在这一点上我不知道如何走得更远......代码从网络上获取数据，所以它是直接可执行的。目前代码运行没有任何错误，但它不会产生任何情节。同样，我的目标是用这两个函数拟合数据，我该如何改进我的代码来做到这一点？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T23:21:50.420

[与您的其他问题](https://stackoverflow.com/questions/15551956/python-fine-tuning-several-fits-functions)类似，在这里我也将使用三角函数来拟合这个峰值：

![在此处输入图像描述](../Images/1b2ab518192543d8a1756507215cfe8c.png)

如果粘贴在您的代码之后，则以下代码有效：

```
import numpy as np
from scipy.optimize import curve_fit
x = time
den = x.max() - x.min()
x -= x.min()
y_points = rate
def func(x, a1, a2, a3):
    return  a1*sin(1*pi*x/den)+\
            a2*sin(2*pi*x/den)+\
            a3*sin(3*pi*x/den)
popt, pcov = curve_fit(func, x, y_points)
y = func(x, *popt)
plot(time,rate)
plot(x,y, color='r', linewidth=2.)
show() 
```

# javascript - 在 javascript 代码中使用 innerHTML 指定 img src 并关联一个类

> ID：15522095
> 
> 赞同：0
> 
> 时间：2013-03-20T11:20:51.987
> 
> 标签：javascript, css

我正在使用下面的代码创建带有 css 类的图像并将其放入 div( `imagepath1`) 中。

```
this.imagePath1.innerHTML = "<img src='" + "../path/imagename" + "' class='classname'>"; 
```

它无法找到图像路径，正如我在 DOM 元素中看到的那样，当通过“检查元素”查看时，资源也不可用。

任何线索如何做到这一点？

谢谢，kk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:40:54.873

1）确保您编码的路径是相对于您的 html 文档（而不是您的 javascript 文档）

2) img 标记很好，无需为 html 关闭斜线（没有关闭标记对于 HTML 是可以的，但某些浏览器可能使用 XHTML 语法，其中标记必须正确关闭。

**笔记**

*这两种可能的解决方案都是在考虑到您的**javascript 语句**在正确的上下文中使用**this**关键字的情况下做出的。*如您所知，这与调用者和上下文有关，与函数无关。

# javascript - JavaScript 初始化 + html5 标签

> ID：15522097
> 
> 赞同：1
> 
> 时间：2013-03-20T11:20:56.500
> 
> 标签：javascript, menu, slider, init

我有带有 JS 滑块的菜单代码：

在 HTML 中：

```
window.onload = function() { 
    menuSlider.init('nav', 'slide');
}

<nav>
    <ul>
        <li value="1"><a href="">Link</a></li>
        <li><a href="">Link</a></li>
        <li><a href="">Link</a></li>
    </ul>
    <div id="slide"></div>
</nav> 
```

JS：

```
var menuSlider=function(){
    var m,e,g,s,q,i; e=[]; q=8; i=8;
return{
    init:function(j,k){
        m=document.getElementById(j); e=m.getElementsByTagName('li');
        var i,l,w,p; i=0; l=e.length;
        for(i;i<l;i++){
            var c,v; c=e[i]; v=c.value; if(v==1){s=c; w=c.offsetWidth; p=c.offsetLeft}
            c.onmouseover=function(){menuSlider.mo(this)}; c.onmouseout=function(){menuSlider.mo(s)};
        }
        g=document.getElementById(k); g.style.width=w+'px'; g.style.left=p+'px';
    },
    mo:function(d){
        clearInterval(m.tm);
        var el,ew; el=parseInt(d.offsetLeft); ew=parseInt(d.offsetWidth);
        m.tm=setInterval(function(){menuSlider.mv(el,ew)},i);
    },
    mv:function(el,ew){
        var l,w; l=parseInt(g.offsetLeft); w=parseInt(g.offsetWidth);
        if(l!=el||w!=ew){
            if(l!=el){var ld,lr,li; ld=(l>el)?-1:1; lr=Math.abs(el-l); li=(lr<q)?ld*lr:ld*q; g.style.left=(l+li)+'px'}
            if(w!=ew){var wd,wr,wi; wd=(w>ew)?-1:1; wr=Math.abs(ew-w); wi=(wr<q)?wd*wr:wd*q; g.style.width=(w+wi)+'px'}
        }else{clearInterval(m.tm)}
}};}(); 
```

在原始代码中有一个`<ul class="menu">`，`menuSlider.init('menu', 'slide');`我的问题是如何用`'nav'`标签初始化这个脚本？我不想在我的`ul`标签中有这个菜单类。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:28:59.397

如果您更改第 5 行，它可能会起作用：

```
m=document.getElementById(j); e=m.getElementsByTagName('li');

//                          your preferred element here  |
//                                                       V
m=document.getElementById(j); e=m.getElementsByTagName('div'); 
```

然后相应地更新您的 HTML 和 CSS...

```
<div id="nav">
  <div>Item One</div>
  <div>Item Two</div>
  <div>etc.    </div>
</div> 
```

* * *

更新：怎么样...

```
m=document.getElementsByTagName(j)[0]; e=m.getElementsByTagName('li'); 
```

# java - Java 和 XMLDSig：没有 URI 的参考

> ID：15522098
> 
> 赞同：0
> 
> 时间：2013-03-20T11:20:58.363
> 
> 标签：java, xml-signature, xml-dsig

我正在尝试使用带有 javax.xml.crypto.dsig.* 包的 XMLDSig 签署一些文本。我需要参考一些正在签名的内容。并且根据项目要求，这个引用不应该有任何URI，它的意思不是<Reference URI="">...</Reference>，而是<Reference>...</Reference>。

我还没有找到任何信息是否可能和正确，但要求说 XMLDSig 允许这样的引用，每个签名最多一个。

有人遇到过同样的问题吗？可以做些什么来使用 javax.xml.crypto.dsig.* 包生成具有此类引用的签名并且没有魔法？

据我了解，上面提到的包只允许使用 URI（或空 URI）引用一些数据，但根本不能没有任何 URI。可能是我在使用过程中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T06:12:28.417

事实上，XML 签名可以包含一个`Reference`没有 URI 的签名，但是您需要告诉签名上下文如何找到以这种方式引用的对象。这可以通过使用自定义实现来完成`URIDereferencer`。

因此，要在没有任何 URI 的情况下引用签名中的某些内容，您可以执行以下操作：

```
Reference dataReference = xmlSigFactory.newReference(null, <your digest method>, <your transformations list>, <needed type>, <id>); 
```

其中第一个`null`参数表示`null`URI，即没有 URI。

要使此引用有效，您需要在对象中指定您的自定义`URIDereferencer`实现，该`DOMSignContext`对象包含对正在签名的内容的所有引用。此自定义`URIDereferencer`应包含查找正在签名的内容的逻辑，它是您自己的实现，因此您应该知道如何查找所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-07T02:25:48.407

创建 NoUriDereferencer 实现 URIDereferencer 并将其设置为您的 XmlSignContect

```
public class NoUriDereferencer implements URIDereferencer {

private Node data = null;

public NoUriDereferencer(Node node) {
    data = node;
}

public Data dereference(URIReference ref, XMLCryptoContext ctxt) {
    return new NodeSetData() {
        public Iterator iterator() {
            return Collections.singletonList(data).iterator();
        }
    };
}
} 
```

# java - 内部静态枚举作为泛型类型？

> ID：15522100
> 
> 赞同：4
> 
> 时间：2013-03-20T11:21:06.417
> 
> 标签：java, generics, static, enums, static-members

我正在学习和试验 Java 泛型，并想出了以下一段无法按预期编译的代码。**`Result`无法解决**。 `I`代表输入，`O`代表输出。

```
public interface Stats<I, O> {
    O addItem (int index, I item);
}

public class AStats implements Stats<Item, Result> {
    public static enum Result {
        SUCCESS1,
        SUCCESS2,
        ERROR;
    }

    @Override
    public Result addItem (int index, Item item) {
        //valid code
    }
} 
```

*   `Result`有没有比在单独的文件中声明更优雅的解决方案？

*   一般来说，拥有一个返回泛型类型实例的方法是不是很糟糕？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T11:25:33.673

1.  您的班级名称是`AStats.Result`，而不是`Result`：

    ```
    public class AStats implements Stats<Item, AStats.Result> {
       ...
    } 
    ```

2.  我不认为返回通用内部类型的实例是一个坏主意。

# coldfusion - 在 ColdFusion WEB-INF 库中更改 JAR 文件

> ID：15522101
> 
> 赞同：2
> 
> 时间：2013-03-20T11:21:11.663
> 
> 标签：coldfusion, apache-commons, coldfusion-10

**语境**

我正在做一个使用[JUNG 库](http://jung.sourceforge.net)的项目。我的自定义 java 代码和 Jung 库都放在 wwwroot/WEB-INF/lib 下。

请注意，JUNG 的某些类依赖于 Apache commons-collections.jar，它也存在于同一文件夹中（由 CF 默认提供）。

**问题**

我们计划从 CF7 迁移到 CF10，因此，我正在对项目中的所有代码进行试点测试，发现某些代码（使用 JUNG）因“找不到类”异常而失败。

在调试和检查 CF 10 中给出的*commons-collections-2.1.jar*中的方法时，我发现它与 CF 7 中的方法不同。如果我将 JAR 更新到最新的 commons-collections-3.2.1 版本，该代码工作正常，因为它找到了所有需要的类。

我可以更改我的代码库以适应默认的*commons-collections-2.1.jar*，但这将导致至少 2-3 个月的开发测试周期。我想把它作为最后的选择，如果可能的话最好避免它。

现在，我的问题是——

1.  如果我用 3.2.1 更改（更新）2.1 会有什么问题？
2.  使用此 JAR 的核心 CF 的哪些部分可能是？
3.  为什么 CF 使用这个过时的 2.1（我觉得是）JAR 版本？

**我做过的家庭作业**

*   **测试**：为了不影响其他应用程序，我创建了一个单独的实例，将 JAR 更改为最新的 3.2.1，在其上托管我的应用程序并进行了一些测试。一切似乎都很好，因为我没有遇到任何问题。但是，我担心 CF 中可能存在依赖于这个 JAR 并且可能会中断的区域。

*   **cfusion\lib**：我发现 commons-collections-3.2.1 已经存在于主 lib (cfusion\lib) 文件夹中。因此，更改 WEB-INF/lib 中的 JAR 可能没有任何区别。

*   **cfusion\wwwroot\WEB-INF\lib**：我已经读过，放置在此文件夹中的任何 JAR 文件仅用于应用程序，而不是 CF 本身。我可能错了，或者完全误解了意思。纠正我！

这个Q的答案将有助于我更多地理解CF并解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:22:41.187

我想我已经找到了答案。

我的一个误解是，Adobe 在制作 CF10 时更改了其 WEB-INF/lib 中的 commons-collections.jar。它没有，即使它确实（假设），它也与我的问题无关。

在阅读了[@Miguel-F](https://stackoverflow.com/users/1636917/miguel-f)和[@Leigh](https://stackoverflow.com/users/104223/leigh)的评论后，我检查了以前的安装并比较了 lib 的更改。在此期间，我发现以前的一位开发人员故意将commons-collections 从CF 提供的原始内容更改为使用JUNG 的自定义集合可以正常工作。我从 JAR 编译签名和其中与更改相对应的小注释中确认了这一点。

现在，我已将相同的文件复制到新的 CF 10 中，并且我的报告运行良好。

**带走**：

1.  仅当您处理自定义代码并且重要的是您知道自己在做什么时，/WEB-INF/lib/ 中对 JAR 的更改才不会影响整个 CF 安装。
2.  如果可能的话，请将这些更改记录为应用程序开发日志的一部分，以便在您离开时，下一个开发人员可以轻松了解这些定制。
3.  与社区讨论您的问题，在让他们了解问题的过程中，您可能会找到答案。:)

**谢谢**

I want to thank [@Miguel-F](https://stackoverflow.com/users/1636917/miguel-f) and [@Brian](https://stackoverflow.com/users/99500/brian) for their inputs on system configuration. And more thanks to [@Leigh](https://stackoverflow.com/users/104223/leigh) for his *Different how?*. It made me think again and find my answer.

# qt - 如何在 Qt 中对 QLabel 文本应用发光效果？

> ID：15522105
> 
> 赞同：2
> 
> 时间：2013-03-20T11:21:25.127
> 
> 标签：qt, qlabel

我需要将发光效果应用于`QLabel`. 黑色文本和白色发光效果（描边效果）。我在谷歌试过但没有运气。

如果有人知道如何应用发光效果，`QLabel`请告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T20:04:25.103

是的，您可以将其设置在`QLabel`：

[http://qt-project.org/doc/qt-5/qwidget.html#setGraphicsEffect](http://qt-project.org/doc/qt-5/qwidget.html#setGraphicsEffect)

您可以在小部件上设置 QGraphicsEffect ，~~只要您不介意它在 Mac 上不起作用~~。

```
label = new QLabel("hello text"));
QGraphicsDropShadowEffect * dse = new QGraphicsDropShadowEffect();
dse->setBlurRadius(10);
label->setGraphicsEffect(dse); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:35:13.600

I think you're going to be slightly disappointed. To apply an effect, you'll need to use a QGraphicsItem. QLabel isn't. You'll need to use a QGraphicsTextItem inside a QGraphicsScene instead. That probably means you'll need to rebuild your UI if it's already implemented using QWidgets.

# mysql - mysql SET 或链接表

> ID：15522107
> 
> 赞同：0
> 
> 时间：2013-03-20T11:21:26.630
> 
> 标签：mysql, database, join, set

我有一点discusus，想听听你的意见。如果我们有 2 个表：

```
 NEWS:
     -id
     -content
     -...
     -...

   website:
     -id
     -name
     -... 
```

这些表格适用于多个国家 (5-6) 的 1 个网站。在网站表中，我们保留网站的信息..如 url、前缀、联系信息......现在的问题是如何更好地连接这 2 个表。使用 1 个链接表，如下所示：

```
 news_website:
            news_id
            website_id 
```

我们在其中检查网站所在的新闻或在 NEWS 表中再创建一个字段类型“SET”。我的观点是，如果我们创建一个额外的字段会更好，因为我们正在减少查询。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:39:25.333

如果一个新闻属于多个网站，则首选映射表news_website，否则添加新的colum新闻表，该表引用网站。在多个网站的新闻表中添加设置列不可维护

# java - Java中的布尔到字符串

> ID：15522110
> 
> 赞同：-5
> 
> 时间：2013-03-20T11:21:31.147
> 
> 标签：java

如何使该程序停止并返回以打开和关闭电视？

如果选择关闭，我希望它显示电视的当前状态。

```
import java.util.Scanner;

public class TvTest
{
    public static void main (String[] args)
    {
        String x;
        String y;
        boolean tvStatus = false;
        int chan;
        int volu;

        Scanner input = new Scanner(System.in);
        TV tv2 = new TV(false,2,10);

        // Print out the current status of our TV
        System.out.print(tv2);
        System.out.println();

             System.out.print("Turn TV On or Off ?");
             x = input.nextLine();

             if(x.equalsIgnoreCase("on"))
               {
                   tvStatus = true;

               }else if(x.equalsIgnoreCase("off"))
               {
                   tvStatus =false;
               }

            System.out.print("Change the Channel to : ");
            chan = input.nextInt();

            System.out.print("Increase the volume by 1 or Decrease by -1 : ");
            volu = input.nextInt();

            TV tv1 = new TV(tvStatus,chan,volu);

            if(volu == 1)
            {
                tv1.incrementVolume();

            }else if (volu == -1)
            {
                tv1.decrementVolume();
            }

            System.out.println(tv1);

    }
}// ENd of TvTest 
```

这是我的电视课，我认为应该有办法改进 toString 方法甚至我的 setter

```
public class TV
{
    private boolean flag = false;
    private int ch;
    private int vol = 10;

    public TV(boolean onOffSwitch, int channel, int volume)
    {
        this.setFlag(onOffSwitch);
        this.setCh(channel);
        this.setVol(volume);
    }

    public void setFlag(boolean onOffSwitch)
    {
        if(onOffSwitch == true)
        {
            flag = true;
        }else
        {
            flag = false;
        }

    }// End of setFlag

    public boolean getFlag()
    {
        return flag;
    }// End of getFlag

    public void setCh (int newChannel)
    {
        if (newChannel >= 99)
        {
            ch = 99;
        }else
        {
            ch = newChannel;
        }

        if(newChannel < 0)
        {
            ch = 1;
        }
    }//end of setCh

    public int getCh ()
    {
        return ch;
    }// End of getCh

    public void setVol(int newVolume)
    {
        if(newVolume >= 20)
        {
            vol = 20;
        }

    }// End of SetVolume

    public void incrementVolume()
    {
        vol++;
    }

    public void decrementVolume()
    {
        vol--;
    }

    public int getVol()
    {
        return vol;
    }// ENd of getVolume

    public String toString()
    {
        if(flag == false)
        {
            return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched","OFF","TV channel",ch,"TV volume",vol);
        }else
        {
            return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched","ON","TV channel",ch,"TV volume",vol);
        }

    }

}// End of TV class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:23:25.337

首先，这个：

```
public void setFlag(boolean onOffSwitch)
    {
        if(onOffSwitch == true)
        {
            flag = true;
        }else
        {
            flag = false;
        }

    } 
```

应该 ：

```
public void setFlag(boolean onOffSwitch)
    {
        flag = onOffSwitch;
    } 
```

然后 ：

```
public void setCh (int newChannel)
    {
        if (newChannel >= 99)
        {
            ch = 99;
        }else
        {
            ch = newChannel;
        }

        if(newChannel < 0)
        {
            ch = 1;
        }
    }//end of setCh 
```

应该 ：

```
ch = (newChannel>=99) ? 99 : ((newChannel<0) ? 1 : newChannel); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:25:38.213

```
 public void setFlag(boolean onOffSwitch)
    {
        if(onOffSwitch == true)
        {
            flag = true;
        }else
        {
            flag = false;
        }

    }// End of setFlag 
```

可能...

```
 public void setFlag(final boolean onOffSwitch)
        {
          flag = onOffSwitch;

        }// End of setFlag 
```

其次，你有同样的问题......

```
if(x.equalsIgnoreCase("on"))
               {
                   tvStatus = true;

               }else if(x.equalsIgnoreCase("off"))
               {
                   tvStatus =false;
               } 
```

可能...

```
tvStatus = x.equalsIgnoreCase("on"); 
```

将您的方法参数`final`作为 Bob Martin 在干净代码中引用的一般实践。

```
if (newChannel >= 99)
        {
            ch = 99;
        }else
        {
            ch = newChannel;
        } 
```

可能...

```
ch = (newChannel>=99) ? 99 : newChannel; 
```

最后...

```
if(flag == false) 
```

这样做会更干净...

```
if(!flag) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:52:43.217

toString() 方法的小修改。请找到以下代码片段：

```
 if(flag == false)
    {
        return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched","OFF","TV channel",ch,"TV volume",vol);
    }else
    {
        return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched","ON","TV channel",ch,"TV volume",vol);
    } 
```

您可以直接检查标志而不是`flag==false`.

```
 if(!flag)
    {
        return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched","OFF","TV channel",ch,"TV volume",vol);
    }else if(flag)
    {
        return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched","ON","TV channel",ch,"TV volume",vol);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T18:24:55.330

首先，您应该消除重复返回：

```
public String toString()
{
    String onOrOff = flag ? "ON" : "OFF";
    return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched",onOrOff,"TV channel",ch,"TV volume",vol);
} 
```

其次，我不喜欢 C 风格的字符串形式：

```
public String toString()
{
    String onOrOff = flag ? "ON" : "OFF";
    String result = "TV is switched :" + onOrOff + '\n'
        + "TV channel:" + ch + '\n'
        + "TV volume :" + vol;
    return result;
} 
```

第三，您可以定义一个枚举：

```
enum Power { ON, OFF };
Power onOrOff = Power.ON;

public String toString()
{
    String result = "TV is switched :" + onOrOff + '\n'
        + "TV channel:" + ch + '\n'
        + "TV volume :" + vol;
    return result;
} 
```

# c - 宏连接，函数名生成

> ID：15522115
> 
> 赞同：4
> 
> 时间：2013-03-20T11:21:40.940
> 
> 标签：c, macros, concatenation, c-preprocessor

```
#define Map(From, To, val)          \
        Map__##From__##To(val)

Map(TYPEA, TYPEB, 22); 
```

在上面的代码中，我想知道为什么`Map(TYPEA, TYPEB, 22);`要扩展到 `Map__From__TYPEB(22);`而不是`Map__TYPEA__TYPEB(22);`

我使用 gcc -E 进行扩展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:29:02.097

因为`From__`不是令牌`Map`，因此预处理器不会查找它。修复是：

```
#define Map(From, To, val) \
        Map__##From##__##To(val) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:33:40.260

```
"#define ZERO 0" != "#define ZERO 0_" 
```

同样，在您的代码段中，`From != From_`因此不会被替换。@Aniket 已经提供了有效的解决方案。

# sql - Cognos SUBSTRING 与 LIKE 中的过滤器性能

> ID：15522119
> 
> 赞同：2
> 
> 时间：2013-03-20T11:21:49.227
> 
> 标签：sql, performance, oracle, cognos, cognos-bi

我现在在 cognos 10.1 中工作。

我想找到以“AB”、“CE”、“JA”开头的名字。我担心查询的性能，因为查询主题（表）包含大约 1,000,000 多条记录。我应该使用哪种过滤器？

```
substring ([Participant],1,2) in ('AB', 'CE', 'JA') 
```

或者

```
[Participant] like 'AB%' or [Participant] like 'CE%' or [Participant] like 'JA%' 
```

哪个执行得更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:31:06.037

您在该列上没有索引。所以优化器的唯一选择是全表扫描。坦率地说，过滤器的精确语法不会对成本产生任何影响。

正如 David 所建议的那样，在 上构建基于函数的索引`substr(participant,1,2)`可能会给您带来一些好处。但只有当你经常运行这种查询时，它才值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:49:12.297

我过去的经验表明，如果您对以特定字符集开头的字符串感兴趣，那么 LIKE 将产生比 SUBSTR 方法更好的结果，但好处通常只出现在长度足够让优化器相信的字符串索引扫描是有益的。我记得这通常有两个以上的字符，因此您可能看不到您的情况的好处。

使用 substr() 谓词，在没有基于函数的索引的情况下（见下文），您希望的最佳索引访问类型是快速全索引扫描，这通常不如常规索引访问方法Like 可能允许。

但是，可以在 Substr(participant,1,2) 上定义一个可供 substr() 函数使用的基于函数的索引。仅当 substr 上的 start 和 length 参数（在您的情况下为 1 和 2 ）是固定的时才值得。如果表修改模式使其通常适合它们，位图索引可能是一个不错的选择

# mysql - sql多列顺序

> ID：15522120
> 
> 赞同：0
> 
> 时间：2013-03-20T11:21:53.057
> 
> 标签：mysql, sql

不太清楚如何在标题上解释这一点，所以它可能是错误的。
SQL 不是我的主要优势，如果这是一个愚蠢的问题，请提前抱歉:)
顺便说一下使用 MySql。

我有这个查询：

```
SELECT
ru.user_id AS "User Id",
ru.first_name AS "First Name"
FROM member_referral_users AS ru
ORDER BY ru.user_id DESC, ru.first_name ASC 
```

结果集如下所示：

[![结果集](../Images/6f76c4bce25cd7efa43dcf7b98d04b51.png)](https://i.stack.imgur.com/AHjXM.jpg)

我希望订单是 Admin,angelo,emma,emma,carlos,chris,emma

我想订单应该是名字第一，但我希望那些用户（真的是客人）在底部，因为他们有 0 作为 user_id

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:23:39.007

```
SELECT
  ru.user_id AS "User Id",
  ru.first_name AS "First Name"
FROM member_referral_users AS ru
ORDER BY 
  ru.user_id = 0,
  ru.first_name ASC 
```

`ru.user_id = 0`将被评估为 TRUE (=1) 或 FALSE (=0)，并且 ordering by`ru.user_id = 0`会将 user_id=0 的记录放在底部。

请[在此处](http://sqlfiddle.com/#!2/8fc4d/1)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:24:11.053

```
SELECT
  ru.user_id    AS "User Id",
  ru.first_name AS "First Name"
FROM member_referral_users AS ru
ORDER BY ru.first_name ASC , ru.user_id ASC 
```

# java - 在 eclipse 中导入整个 AOSP

> ID：15522121
> 
> 赞同：1
> 
> 时间：2013-03-20T11:21:54.943
> 
> 标签：java, android, eclipse, android-source

我已经为我的设备下载了完整的 AOSP 源代码，并试图将其导入到 eclipse 中以对框架进行一些更改（基本上它包括一个 alertDialog 显示何时按下系统栏中的按钮并且我想编辑它）。

我遵循了[AOSP 文档](http://source.android.com/source/using-eclipse.html)中的指南，并且还在我的构建路径中导入了`android-common_intermediates/javalib.jar`但我仍然遇到一些错误，具体来说，我遇到了一些应该在一个`R.java`文件中定义的字段的错误，我不知道如何要找到正确的 R 文件，我什至怀疑它是否存在，也许它是在第二个时刻生成的还是在另一个路径中，然后我的编译器脚本将它移动到正确的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:25:42.270

假设您注意到上面评论中的警告并且仍然想回答这个问题，我也许可以提供帮助。当我使用eclipse查看Android源代码时，我经常看到类似的问题。显然，有几个项目不是为了响应“make”而构建的，但它们仍然包含在 .classpath 文件中。我的解决方案是手工制作。

一旦你找到了build/envsetup.sh，命令“mm”将在你所在的目录中构建项目。我启动eclipse，找到缺少资源定义的项目，一个一个cd进去，然后使用“ mm”来建造它们。

相信你会发现，它们都是“packages”目录下的项目。

到目前为止，这对我来说一直有效。

# c# - 如何仅在分析时定义编译符号？

> ID：15522124
> 
> 赞同：1
> 
> 时间：2013-03-20T11:22:05.450
> 
> 标签：c#, profiling, c-preprocessor, symbols, conditional-compilation

仅当我在 Visual Studio 中分析 C# 项目时，我想定义像*PROFILE这样的编译符号。*在正常的调试或发布版本中，不应定义它。

因此，#if 和 #endif 之间的代码仅在分析时才被编译。

```
#if PROFILE
  DataCollection.StartProfile(ProfileLevel.Process, DataCollection.CurrentId); 
#endif 
```

它应该是编译时检查，而不是运行时检查。原因是我们的一些团队在他们的 PC 上没有分析器（不包括在 VS 2012 标准中），我们希望代码能够在任何系统上编译而无需更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:39:37.167

创建一个新**配置**：

*   单击**构建**，然后选择**配置管理器**。
*   单击**活动解决方案配置**并选择**新建**。
*   输入**名称**`Profile`_**并选择将用作模板的配置（我猜是用于分析`Release`。**
***   用**OK 确认**它将`Profile`为您的解决方案中的每个项目创建命名的新配置。*   打开每个项目的属性，并在 Build 选项卡`PROFILE`中的**Conditional compilation symbols中添加符号**然后保存属性。**

 **现在，当您构建`Profile`配置时，`PROFILE`将定义符号。我建议你也看看[这篇文章](https://stackoverflow.com/questions/479979/msbuild-defining-conditional-compilation-symbols)，如果你自动化你的构建，你可能会保留你的`PROFILE`通过命令行使用属性将你的符号排除在解决方案之外`MSBuild`（我想你不经常为分析而构建）。

**编辑** 通过*配置*，您可以做到这一点，但它不会使您免于对`Microsoft.VisualStudio.Profiler.dll`) 的损坏引用。我的建议是将所有这些代码移动到**另一个库**中，您将编译后发送给它们。在那里你将只公开一个方法：

```
public static class ProfilingHelpers
{
    [Conditional("PROFILE")]
    public static void StartProfiling()
    {
        DataCollection.StartProfile(ProfileLevel.Process, DataCollection.CurrentId);
    }
} 
```

在您的代码中，您将始终调用它，但它只会在`PROFILE`定义时执行（因此您不需要向每个项目添加新配置，而只需添加到一个 DLL）。**

# iphone - 如何在 IOS 中生成 20 个 BASE-36 唯一 ID？示例唯一 ID 在这里“KI21AJDIWJS239323112”

> ID：15522128
> 
> 赞同：0
> 
> 时间：2013-03-20T11:22:10.647
> 
> 标签：iphone, ios

我需要在发出服务器请求时附加一个唯一的 ID 以避免重复请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:48:17.947

只需使用此代码创建唯一 ID，在点击服务时使用每个项目。

```
CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);
NSString *uuidString = (__bridge NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuid);

NSLog(@"Uni ID %@",uuidString); 
```

# sql - SQL 数据库中的层次树 - 不同的数据库服务器类型

> ID：15522129
> 
> 赞同：2
> 
> 时间：2013-03-20T11:22:11.200
> 
> 标签：sql, hierarchical-data

我必须将分层树存储到 SQL 数据库中。在网站上搜索后，我找到了几个解决方案，但我仍然需要一些帮助。

简而言之，我的“输入”必须根据输入信号的类型、树中的位置和时间路由到输出。

为了让它更复杂一点，我要求它应该与 MSSQL server 2005、MySQL 和 SQL lite 一起使用。也许我可以在某个时候放弃 SQL lite 要求，但现在我必须处理它。

在树上采取的最常见的操作是我必须从下到上搜索根节点以查找附加了一些信息的节点。

在我看来，实现这一点的最简单方法是创建一个引用父节点的表并首先选择底部节点，检查信息是否附加到它；如果没有选择父母并重复。

虽然简单且不需要任何特殊的数据库功能，但它需要许多查询。最多 6 级节点嵌套将是常见的，预计最多 14 级。

附加到节点的信息包含一些时间（一天/一周的时间段），取决于我必须找到的输入类型和输出之间的链接。下面是一个例子；当“节点 4”上的输入 1 被激活时，我想发现输出应该是“4”，如果在同一节点上激活输入 8，则输出应该是“0”。![**图片链接**](../Images/df60c0b22a6521ee93f9af686fbd336d.png)

我必须在哪里寻找有关这种结构的更多背景信息，或者有没有人知道如何为这个问题设计数据库结构？

* * *

编辑：

为了回应年轻鲍勃的回答，我将做一个测试。但是，如果有人有一个想法让我做一个选择（...）如果不存在重复父级，等等在一个查询中我很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:57:48.870

我建议您阅读 Joe Celko 关于嵌套集的著作。请参阅[SQL - 如何存储和导航层次结构？](https://stackoverflow.com/questions/38801/sql-how-to-store-and-navigate-hierarchies)讨论和有用的链接

# c# - 如何让文字从左边开始

> ID：15522133
> 
> 赞同：4
> 
> 时间：2013-03-20T11:22:21.887
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个可编辑的组合框，当添加的文本太长时，它看起来像这样：

![在此处输入图像描述](../Images/186aa841171ebb49d814d5097c589752.png)

如何使文本框从字符串的开头开始？

```
TextBox txt = sender as TextBox;
txt.Text = "[Children]";

    <Style TargetType="TextBox">
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="BorderBrush" Value="Silver"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="AllowDrop" Value="true"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBoxBase}">
                    <Border Name="Border" Padding="1" Background="#FFFFFF" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" >
                        <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Border" Property="Background" Value="#EEEEEE"/>
                            <Setter TargetName="Border" Property="BorderBrush" Value="#EEEEEE"/>
                            <Setter Property="Foreground" Value="#888888"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

**组合框：**

```
ComboBox cmbValue1 = new ComboBox();
cmbValue1.IsTextSearchEnabled = false;
cmbValue1.IsEditable = true;
cmbValue1.Width = 70;
TextBox txtEdit = (TextBox)((sender as ComboBox).Template.FindName("PART_EditableTextBox", (sender as ComboBox)));
txtEdit.Tag = selection; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:03:33.377

您需要将选择开始设置回 0，以便在用户输入内容后使其“左对齐”。

通过`TextBoxBase.PreviewLostKeyboardFocus`事件执行此操作 - 这是一些 XAML：

```
 <ComboBox Name="ComboBox1"
           IsEditable="True" 
           TextBoxBase.PreviewLostKeyboardFocus="TextBox_PreviewLostKeyboardFocus_1"> 
```

而事件本身：

```
private void TextBox_PreviewLostKeyboardFocus_1(object sender, KeyboardFocusChangedEventArgs e)
{
    TextBox txtEdit = (TextBox)((sender as ComboBox).Template.FindName("PART_EditableTextBox", (sender as ComboBox)));
    txtEdit.SelectionStart = 0;
} 
```

我认为这应该足以让您适应您的应用程序。我在一个空的 WPF 应用程序中进行了测试，无论您是按 TAB 还是用鼠标单击 UI 的另一部分，它都可以正常工作。

**编辑：**

以下是在代码中添加事件的方法：

不确定您的应用程序的结构如何，但同样，这对我有用：

```
private void Window_Initialized_1(object sender, EventArgs e)
{
    ComboBox cmbValue1 = new ComboBox();
    cmbValue1.IsTextSearchEnabled = false;
    cmbValue1.IsEditable = true;
    cmbValue1.Width = 70;
    cmbValue1.PreviewLostKeyboardFocus += TextBox_PreviewLostKeyboardFocus_1;

    this.MyCanvas.Children.Add(cmbValue1);
} 
```

（使用我在这个答案上面发布的相同事件处理程序）

**编辑：**

这是工作项目的链接： 注意——如果在您失去焦点时（即，在您键入内容或取消选择之后）未选择可编辑 ComboBox 中的文本，它会起作用。我会尝试解决这个问题。

```
http://23.23.250.9/wpfresource.zip 
```

# python - os.walk() 的并行化

> ID：15522134
> 
> 赞同：2
> 
> 时间：2013-03-20T11:22:26.317
> 
> 标签：python

我有一个托管在网络存储设备上的大型目录结构，我想使用`os.walk`. 系统相当慢，但我认为如果我可以同时查询多个目录（都具有相同的公共根目录），这个过程可以更快地完成。我不在乎输出的顺序是什么，只要到最后我已经解析了所有内容。

我正在考虑重新实现`os.walk`以将新目录传递到线程工作人员池中。如果它已经存在，我宁愿使用别人的代码（为什么要重新发明轮子？），但没有遇到任何。

当然这是一个常见的任务？有没有人遇到过这样的事情？也许我错过了一些东西，它不会导致加速。

如果我在一周左右没有得到答案，毫无疑问我会在这里发布我的尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:31:27.037

看来您需要一个分布式作业执行系统。我使用[Gearman](http://gearman.org/)已经有一段时间了，发现它是一个很棒的框架，如果你不想从基本的 Thread 模块开始，我会推荐它。它支持用 Python 编写的客户端和工作人员，因此可能适合您的需求。但是你可能仍然需要做除法工作。

# java - 为 java 创建 WebSphere 管理客户端程序

> ID：15522137
> 
> 赞同：1
> 
> 时间：2013-03-20T11:22:35.287
> 
> 标签：java, api, client, websphere

我正在使用 IBM WebSphere 服务器。我需要使用 WebSphere 管理 API 为 java 创建 WebSphere 管理客户端程序。我正在使用[此代码](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tjmx_develop.html)创建管理客户端

```
...
adminClient = AdminClientFactory.createAdminClient(connectProps);
... 
```

但它给出了例外。

`The system cannot create a SOAP connector to connect to host localhost at port 8881.`

创建客户端后，我想通过此 API 配置 WASADMIN。我在正确的轨道上吗？

我需要通过这个 API 获取共享库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:58:12.457

检查您是否将此服务器 SOAP 连接器端口设置为 8881。

在 Dmgr 中单击服务器名称而不是端口以检查它。如果不使用 8881，请将其更改为您尝试连接的服务器正在使用的正确端口。

更新：

我在我的环境（Linux）中进行了测试，并且以下代码有效（我必须将 WebSphere_ND8.5/AppServer/runtimes/com.ibm.ws.admin.client_8.5.0.jar 添加到类路径才能运行它而不会出现 ClassNotFoundException） ：

```
import java.util.Properties;
import java.util.logging.Logger;

import com.ibm.websphere.management.AdminClient;
import com.ibm.websphere.management.AdminClientFactory;
import com.ibm.websphere.management.exception.ConnectorException;

public class AdminConnect {

private static Logger logger = Logger.getLogger(AdminConnect.class.getName());
/**
 * @param args
 */
public static void main(String[] args) {
    Properties connectProps = new Properties();
    connectProps.setProperty(
    AdminClient.CONNECTOR_TYPE, AdminClient.CONNECTOR_TYPE_SOAP);

    connectProps.setProperty(AdminClient.CONNECTOR_HOST, "localhost");
    connectProps.setProperty(AdminClient.CONNECTOR_PORT, "8880");
//      connectProps.setProperty(AdminClient.USERNAME, "test2");
//      connectProps.setProperty(AdminClient.PASSWORD, "user24test");
    AdminClient adminClient = null;
    try
    {
           adminClient = AdminClientFactory.createAdminClient(connectProps);
           logger.info("Connected successfuly with WebSphere :) ");
    }
    catch (ConnectorException e)
    {
           logger.severe("Exception creating admin client: " + e);
           e.printStackTrace();
    }

    }

} 
```

# xcode - 收到内存警告情节提要

> ID：15522139
> 
> 赞同：0
> 
> 时间：2013-03-20T11:22:38.437
> 
> 标签：xcode, uiviewcontroller, storyboard, didreceivememorywarning

我创建了一个视图控制器，其中包含以下代码`viewDidLoad`：

```
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View1"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View2"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View3"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View4"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View5"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View6"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View7"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View8"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View9"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View10"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View11"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View12"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View13"]];
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View14"]]; 
```

当我打开一个新的 ViewController 并使用以下代码返回到初始 ViewController 时：

```
UIViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Home"];
vc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:vc animated:YES completion:NULL]; 
```

我收到内存警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:30:10.203

您不会返回那里的主视图控制器，而是创建主控制器的新实例并呈现它。这样做的次数足够多，你最终会遇到大量控制器和内存不足的情况。

尝试解散您的控制器，尽管从您的问题中并不清楚您是如何到达包含所有子控制器的 VC 的。

# android - 带分页的表格布局

> ID：15522141
> 
> 赞同：1
> 
> 时间：2013-03-20T11:22:52.023
> 
> 标签：android, android-layout, pagination, android-tablelayout

我想实现`TableLayout`分页，在第 1 页显示 10 条记录，然后在第 2 页显示下 10 条记录，依此类推……我正在使用[表格布局](http://paulononaka.wordpress.com/2011/03/19/how-to-implement-a-paging-feature-in-android/)，但没有得到所需的结果。使用本教程，表格只是水平而不是垂直增长。如何更改它以使其也垂直增长，然后当记录大小大于 10 时转移到下一页？

编码：

```
public class Sample extends Activity {
 String companies[] = {"Google","Windows","iPhone","Nokia","Samsung",
         "Google","Windows","iPhone","Nokia","Samsung",
         "Google","Windows","iPhone","Nokia","Samsung","Google","Windows","iPhone","Nokia","Samsung",
         "Google","Windows","iPhone","Nokia","Samsung",
         "Google","Windows","iPhone","Nokia","Samsung"};
 String os[]       =  {"Android","Mango","iOS","Symbian","Bada",
         "Android","Mango","iOS","Symbian","Bada",
         "Android","Mango","iOS","Symbian","Bada","Android","Mango","iOS","Symbian","Bada",
         "Android","Mango","iOS","Symbian","Bada",
         "Android","Mango","iOS","Symbian","Bada"};
 TextView companyTV,valueTV,deviceTv,actionTv,dateTv,timeTv,creditTv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // creates the Pagination Layout
    PaginationLayout paginationLayout = new PaginationLayout(this);
    paginationLayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    // creates content only for sample
    TableLayout table = new TableLayout(this);
    //table.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    TableRow row = new TableRow(this);
    row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    table.addView(row);

    TableRow row2 = new TableRow(this);
    row2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    table.addView(row2);
    for (int i=0;i<companies.length;i++)
    {
        deviceTv = new TextView(this);
        deviceTv.setText(companies[i]);
        deviceTv.setTextColor(Color.RED);
        deviceTv.setTypeface(Typeface.DEFAULT, Typeface.BOLD);

        deviceTv.setPadding(5, 5, 5, 5);
        row2.addView(deviceTv);
        actionTv = new TextView(this);
        actionTv.setText(os[i]);
        actionTv.setTextColor(Color.GREEN);

        actionTv.setPadding(5, 5, 5, 5);
        actionTv.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
        row2.addView(actionTv); // Adding textView to tablerow.
    }

   /* for(int i = 0; i< 50;i++){
        Button button = new Button(this);
        button.setText("Button " + i);
        if (i%2==0) {
            row.addView(button);
        } else {
            row2.addView(button);
        }
    }*/

    // add the content in pagination
    paginationLayout.addView(table);
    // set pagination layout
    setContentView(paginationLayout);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:17:08.530

> 我已经使用了表格布局，但没有使用本教程获得所需的结果，它只是水平增长而不是垂直增长

`addView`对于 github 上的代码，使用on似乎`PaginationLayout`将该视图添加到`HorizontalScrollView`. 在您的代码中，您正在创建一个**向** `Tablelayout`其中添加行的单行，您的内容垂直增长是正常的。

您很可能需要自己插入页面，如下所示：

```
// creates the Pagination Layout
PaginationLayout paginationLayout = new PaginationLayout(this);
LinearLayout wrapper = new Linearlayout(this);
paginationLayout.addView(wrapper);
// now create a TableLayout, if the content is bigger then your intended number of rows
// then insert another Tablelayout and so on
TableLayout table = new TableLayout(this);
    //table.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
TableRow row = new TableRow(this);
row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
table.addView(row);
TableRow row2 = new TableRow(this);
row2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
table.addView(row2);
wrapper.addView(table); // it will probably don't look good if you don't 
// also setup the proper width with LayoutParams 
```

如果您继续添加`TableRows`并看到您已向*table*添加了 10 行，则创建一个新行`TableLayout`并将其添加到*wrapper* `LinearLayout`。

我建议您放弃该库并实现自己的分页。如果您没有与用户进行直接交互（通过触摸），那么设置一个`ViewFlipper`（有两个视图，两个页面，您将继续翻阅）在底部有两个按钮来控制分页非常简单。如果您还想要触摸交互，请使用 a `ViewPager`（还有更多工作要做）。

# php - 使用 php 将图像发布到 Twitter 不起作用

> ID：15522146
> 
> 赞同：1
> 
> 时间：2013-03-20T11:22:59.070
> 
> 标签：php, twitter

使用 php 将图像发布到 Twitter 不起作用。请检查我的代码。

```
<?
define( 'YOUR_CONSUMER_KEY' , '######################');
define( 'YOUR_CONSUMER_SECRET' , '######################');

require ('../../twitt/tmhOAuth.php');
require ('../../twitt/tmhUtilities.php');

$tmhOAuth = new tmhOAuth(array(
         'consumer_key'    => "######################",
         'consumer_secret' => "######################",
         'user_token'      => "######################",
         'user_secret'     => "######################",
));

$image = 'Tulips.jpg';

$code = $tmhOAuth->request( 'POST','https://upload.twitter.com/1/statuses/update_with_media.json',
   array(
        'media[]'  => "@{$image};",
        'status'   => 'message text written here',
   ),
    true, // use auth
    true  // multipart
);

if ($code == 200){
   tmhUtilities::pr(json_decode($tmhOAuth->response['response']));
}else{
   tmhUtilities::pr($tmhOAuth->response['response']);
}
print_r($code); 
```

?>

它不工作。我总是返回 0。这段代码有什么问题？任何人请帮助我....

# java - JSTL - 遍历随机整数数组 - 不在网页中显示

> ID：15522149
> 
> 赞同：0
> 
> 时间：2013-03-20T11:23:06.820
> 
> 标签：java, jsp, servlets, jstl

我正在尝试使用 JSP/JSTL 遍历随机生成的整数的 myList （数组）。我的生成和存储整数的代码片段位于我的 servlet 中。

另一方面，遍历字符串的arrayList（参见下面的代码）可以完美地工作，但是当我尝试使用基于相同逻辑的数组时，我的网页只是没有显示我的随机整数的任何无序列表。

谢谢你帮我

我的小服务程序

```
package be.intec.servlets;

    import java.io.IOException;
    import java.math.BigDecimal;
    import java.util.ArrayList;
    import java.util.Arrays;
    import java.util.LinkedHashMap;
    import java.util.List;
    import java.util.Map;

    import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletException;
    import javax.servlet.annotation.WebServlet;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import be.intecbrussel.entities.Auto;

    @WebServlet("/JSTLServlet")
    public class JSTLServlet extends HttpServlet {

        private static final long serialVersionUID = 1L;

        private static final String VIEW = "WEB-INF/JSP/JSTL.jsp";

        protected void doGet(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {

            RequestDispatcher dispatcher = request.getRequestDispatcher(VIEW);

            //=======below is the code using Array=====================================
            int[] myList = new int[42];
            for (int i = 0; i < myList.length; i++) {
                myList[i] = (int) (Math.random() * 100);
            }
            request.setAttribute("mylist", myList);

            //=======below is the code using ArrayList=====================================

            List<String> names = Arrays.asList("John", "Georges", "Kevin");

            request.setAttribute("names", names);

            dispatcher.forward(request, response);      
        }

    } 
```

我的 jstl.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" session="false"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="styles/default.css">

<title>JSTL Expample</title>
</head>

<body>

    <h2>Iterate through my array</h2>

    <ul>
        <c:forEach var="arrayVar" items="${myList}">

            <li>${arrayVar}</li>

        </c:forEach>

    </ul>
<!-- ================================================================================ -->

    <h2>Iterate through my arrayList</h2>

    <ul>
        <c:forEach var="name" items="${names}">

            <li>${name}</li>

        </c:forEach>
    </ul>

</body>

</html> 
```

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>ServletsAndJSPExampleProject</display-name>
  <welcome-file-list>
    <welcome-file>IndexServlet</welcome-file>
  </welcome-file-list>

</web-app> 
```

我的索引 Servlet

```
package be.intec.servlets;

import java.io.IOException;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/IndexServlet")
public class IndexServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    private static final String VIEW = "/WEB-INF/JSP/index.jsp";

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        RequestDispatcher dispatcher = request.getRequestDispatcher(VIEW);

        dispatcher.forward(request, response);

    }

} 
```

浏览器中的输出是：

遍历我的数组：//这里应该显示我的随机数

遍历我的arrayList：//工作得很好

*   约翰

*   乔治斯

*   凯文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:32:55.470

您`mylist`在 Servlet 中使用“”作为名称，并希望使用`${myList}`. **名称区分大小写！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:39:32.557

如下所示更改您的每个：

```
<c:forEach var="arrayVar" items="${mylist}">
<li>${arrayVar}</li>
</c:forEach> 
```

# jquery - jQuery突出显示表格行，刷新后保留

> ID：15522156
> 
> 赞同：0
> 
> 时间：2013-03-20T11:23:21.740
> 
> 标签：jquery, html-table, onclick, refresh, highlight

我有一个 jQuery 函数：

```
function highlightrow(obj) {
    if ($(obj).attr("style")=='background-color: rgb(255, 255, 102);' || $(obj).attr("style")=='background-color: #ffff66;') {
        $(obj).removeAttr("style");
    } else {
        $(obj).attr("style","background-color: #ffff66;");
    }
} 
```

它通过点击事件突出显示并删除突出显示

```
<tr onclick="highlightrow(this);" > 
```

如何在页面刷新后保持突出显示的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:27:43.860

正如 cbroe 在他的评论中所建议的那样，您需要将这些行的单击状态保存在某处，是本地存储还是 cookie。此外，我还会使用类而不是样式属性，这样如果您需要更改颜色，则不必更改 JS。

# python - 在单例中使用 super

> ID：15522162
> 
> 赞同：2
> 
> 时间：2013-03-20T11:23:29.280
> 
> 标签：python, singleton

```
class Singleton(object):
  def __new__(cls, *args, **kw):
      if not hasattr(cls, '_instance'):
        orig = super(Singleton, cls)
        cls._instance = orig.__new__(cls, *args, **kw)
      return cls._instance 
```

有人可以详细解释这里发生的事情>> super(Singleton, cls) 传递了什么 cls 参数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:53:48.577

`cls`传递给`__new__`方法的属性是对`Singleton`类 ( `cls == Singleton`) 的引用，但如果您对子类进行子类`Singleton`化和实例化，`cls`则将是对子类的引用。

`super`需要知道当前类 ( `Singleton`) 和它正在遍历其类层次结构的子类 ( `cls`) 以计算类层次结构中的下一个类，但在您的情况下，它们总是相同的，因为`Singleton`没有任何子类。

为了详细说明为什么需要 pass `cls`，我们假设这些类都有简单的 pass-through`__new__`方法，它们简单地调用它们的 super 方法并返回结果。

```
class A(object): pass
class B(object): pass
class C(A, B): pass 
```

然后`C.__new__`调用`super(C, cls).__new__`，相当于`A.__new__`. 现在在这里你想`super(A, cls).__new__`等价于`B.__new__`，而不是`object.__new__`。但唯一`super`能找出答案的方法是被告知开始是在`C`，而不是在`A`。

因为在您的情况下，唯一的超类是`object`,`orig.__new__`等价于`object.__new__`，并且它已通过`cls`，以便它知道应该实例化哪个类。

# ruby-on-rails-3 - 即使资源是复数，Rails 3 路由也会将 _index 附加到路由名称

> ID：15522163
> 
> 赞同：0
> 
> 时间：2013-03-20T11:23:31.603
> 
> 标签：ruby-on-rails-3, routing

我有以下路线：

**路线.rb：**

```
 namespace :admin do
    #...
    resources :carousel_images
  end 
```

**控制器：**

```
def new
    @admin_carousel_image = CarouselImages.new
    #... 
```

鉴于，我`render 'form'`：

```
<%= form_for [:admin, @admin_carousel_image] do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

**该模型：**

```
class Admin::CarouselImage < ActiveRecord::Base
  attr_accessible :image
  mount_uploader :image, CarouselUploader
end 
```

当我访问时`/admin/carousel_images/new`，我得到

> ## Admin/carousel_images#new 中的 NoMethodError
> 
> 显示 /home/pinouchon/code/sharewizz/webapp/app/views/admin/carousel_images/_form.html.erb 其中第 1 行提出：
> 
> #<#:0xdfe45a4> 的未定义方法 `admin_carousel_images_index_path'

[我坚持认为当资源是复数时，](https://stackoverflow.com/questions/6476763/rails-3-route-appends-index-to-route-name)路径中的“_index”没有被附加。为什么它附加在我的案例中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-08T12:30:41.740

Rails 有时无法弄清楚如何复数或检测复数。你试过变形器吗？我有一个类似的案例并为我工作。

```
ActiveSupport::Inflector.inflections(:en) do |inflect|
   inflect.irregular 'carousel_image', 'carousel_images'
end 
```

顺便说一句，我使用的是 Rails 5.1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T12:36:27.003

更改以下内容并尝试：

```
def new
  @admin_carousel_image = Admin::CarouselImage.new #CarouselImage is your model name here. It should be singular.
  #...
end 
```

在视图中，如果您`form`从`index.html.erb`

你应该有以下内容：

```
<%= render 'form' %> 
```

文件的`index`顺序应该是`app/view/admin/carousel_images/index`

在这里，路由文件在 carousel_images 文件夹中找到 index.html.erb 并呈现表单。

# javascript - 图例和轴标题未显示在 Highcharts 图表中

> ID：15522164
> 
> 赞同：3
> 
> 时间：2013-03-20T11:23:33.367
> 
> 标签：javascript, jquery, graph, highcharts, highstock

我有一个显示三种不同能源成本的 Highcharts 图表。我似乎无法显示我的图例，也无法显示轴标题。

传奇应该有标题；天然气、电力、石油，它们也应该在轴上。

JSFiddle 的链接是：

[http://jsfiddle.net/petenaylor/HHEfW/3/](http://jsfiddle.net/petenaylor/HHEfW/3/)

```
(function ($) { // encapsulate jQuery
    $(function () {
        var seriesOptions = [],
            yAxisOptions = [],
            seriesCounter = 0,
            names = ['Electric', 'Oil', 'Gas'],
            colors = Highcharts.getOptions().colors;

        $.each(names, function (i, name) {
            $(function () {
                $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function (data) {
                    // Create the chart
                    window.chart = new Highcharts.StockChart({
                        chart: {
                            renderTo: 'container',
                            zoomType: 'x'
                        },
                        legend: {
                            layout: 'vertical',
                            align: 'right',
                            verticalAlign: 'top',
                            x: 10,
                            y: 100,
                            borderWidth: 0
                        },
                        rangeSelector: {
                            selected: 12
                        },
                        title: {
                            text: 'Energy Prices'
                        },
                        yAxis:[{opposite:false},{opposite:true},{opposite:true,offset:50}],
                        series: [
                            {
                                name: 'Electric',
                                yAxis:0,
                                data: [
                                    [1072915200000, 5.73],
                                    [1073001600000, 5.81],
                                    [1073088000000, 5.23],
                                    [1073174400000, 5.32]
                                ],
                                tooltip: {
                                    valueDecimals: 2
                                }
                            }, {
                                name: 'Oil',
                                yAxis:1,
                                data: [
                                    [1072915200000, 29.73],
                                    [1073001600000, 29.73],
                                    [1073088000000, 29.73],
                                    [1073174400000, 29.73]
                                ],
                                tooltip: {
                                    valueDecimals: 2
                                }
                            }, {
                                name: 'Gas',
                                yAxis:2,
                                data: [
                                    [1072915200000, 0.823],
                                    [1073001600000, 0.82],
                                    [1073088000000, 0.82],
                                    [1073174400000, 0.82]
                                ],
                                tooltip: {
                                    valueDecimals: 2
                                }
                            }
                        ]
                    });
                });
            });
        });

        // create the chart when all data is loaded
        function createChart() {
            chart = new Highcharts.StockChart({
                chart: {
                    renderTo: 'container'
                },
                rangeSelector: {
                    selected: 4
                },
                yAxis: [{ // Primary yAxis
                    labels: {
                        formatter: function () {
                            return (this.value > 0 ? '+' : '') + this.value + '%';
                        },
                        style: {
                            color: '#89A54E'
                        }
                    },
                    title: {
                        text: 'Electric',
                        style: {
                            color: '#89A54E'
                        }
                    },
                    opposite: true
                }, { // Secondary yAxis
                    gridLineWidth: 0,
                    title: {
                        text: 'Oil',
                        style: {
                            color: '#4572A7'
                        }
                    },
                    labels: {
                        formatter: function () {
                            return this.value;
                        },
                        style: {
                            color: '#4572A7'
                        }
                    }

                }, { // Tertiary yAxis
                    gridLineWidth: 0,
                    title: {
                        text: 'Gas',
                        style: {
                            color: '#AA4643'
                        }
                    },
                    labels: {
                        formatter: function () {
                            return this.value;
                        },
                        style: {
                            color: '#AA4643'
                        }
                    },
                    opposite: true
                }],
                plotOptions: {
                    series: {
                        compare: 'percent'
                    }
                },
                tooltip: {
                    pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
                    valueDecimals: 2
                },
                series: seriesOptions
            });
        }
    });
})(jQuery); 
```

谁能帮我显示图例和轴标题？

图例还需要可点击，以便每行在点击时消失并重新出现。

非常感谢您的帮助

皮特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:01:06.033

对于图例，您应该添加具有真值的启用参数。 [http://jsfiddle.net/HHEfW/5/](http://jsfiddle.net/HHEfW/5/)

```
legend: {
    enabled: true
} 
```

yAxis 标题不起作用，因为没有定义，所以你应该添加带有文本值的标题参数。[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/title-text/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/title-text/)

# ruby - Ruby 改进在 CI 服务器中不起作用

> ID：15522177
> 
> 赞同：5
> 
> 时间：2013-03-20T11:23:55.083
> 
> 标签：ruby, linux, ruby-2.0

我在 Jenkins 服务器中遇到错误：

```
$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-linux] 
```

运行 rspec 时，出现以下错误：

```
 undefined method `using' for #<Class:0x000000026f9c88> (NoMethodError) 
```

完全相同的代码可以在我的本地计算机上运行，​​使用 ruby​​2。这是我的版本：`ruby 2.0.0dev (2012-12-01 trunk 38126) [x86_64-linux]` 此外，它适用于 irb。`using`运行脚本时，ruby 似乎无法识别该语句。

这是代码：

```
describe "blah" do
    include TestHelper
    using TestHelper::BrowserRefinement
    ...
end 
```

* * *

澄清：**细化在不同的文件中定义。**我在网上搜索，看看修订版`r39474`和`r38126`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T17:46:39.357

在当前版本的 Ruby 2.0 (2.0.0p0) 中，`using`是顶级对象的实例方法`main`，而不是`Module`. 这是一种私有方法。如果您在类/模块定义或方法定义中调用它，则会引发 RuntimeError。

“被激活的细化的范围`main.using`是从被调用之后的点`main.using`到被调用的文件的末尾`main.using`。但是，当在作为、或`main.using`的第一个参数给出的字符串中调用时，范围的结尾是字符串的结尾。”`Kernel#eval``Kernel#instance_eval``Module#module_eval`

[您可以在Refinements Specification](https://bugs.ruby-lang.org/projects/ruby-trunk/wiki/RefinementsSpec)中阅读更多相关信息。

对于您的测试用例，您可以使用`eval`顶级绑定编写它们并传递它们，例如 ruby​​ 源代码中的[测试用例](http://bugs.ruby-lang.org/projects/ruby-200/repository/entry/test/ruby/test_refinement.rb)。

**改进仍然是一个实验性功能，将来可能会改变:-)**

# azure - 将 AzureCloudServce 添加到现有 MVC4 应用程序后出现 Nuget 错误

> ID：15522180
> 
> 赞同：0
> 
> 时间：2013-03-20T11:24:00.870
> 
> 标签：azure, asp.net-mvc-4, nuget, asp.net-mvc-scaffolding

我有一个想要转换为 Azure 云服务的 MVC 4 应用程序。这些是我采取的步骤：

*   更新包以获取最新的所有内容
*   我按照[这个博客的步骤](http://thinkfirstcodelater.com/blog/?p=1922)
*   构建解决方案（成功）
*   F5 -> 得到 VS2012 需要运行提升的错误
*   重新启动提升的 VS2012 -> 在包管理器控制台中出现此错误：

    在 C:\Users\jlearmouth\Documents\Visual Studio 2012\Projects\MeetingMinutes\packages\MvcScaffolding.1。0.9\tools\init.ps1:35 字符:45

    *   | %{ [System.IO.Directory]::EnumerateFiles <<<< ($_, "*." + $extension, [System.IO.SearchOption]::AllDirectories) }
        *   CategoryInfo : NotSpecified: (:) [], MethodInvocationException
        *   fullyQualifiedErrorId：DotNetMethodException

解决方案似乎可以运行，但我不喜欢这个错误。我不知道这意味着什么，也不知道该怎么办。谷歌有类似的东西，但不同的 MethodInvocationException ......尝试了他们的解决方案 - 没有（主要是卸载/重新安装 MvcScaffolding）

这是什么错误，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:42:26.580

这看起来像是来自 MvcScaffolding 包的错误。你试过联系这个包的作者吗？转到此页面并单击左侧栏上的 Contact Owners 链接[https://nuget.org/packages/MvcScaffolding/](https://nuget.org/packages/MvcScaffolding/)

# git - Git 使用子模块部署钩子 ec2

> ID：15522186
> 
> 赞同：1
> 
> 时间：2013-03-20T11:24:24.043
> 
> 标签：git, node.js, amazon-ec2, git-submodules, supervisord

我在运行节点应用程序的 aws 上创建了实例。我安装了 supervisord 以保持节点应用程序正常运行。部署通过带有部署挂钩的 git 进行。\

结构是这样的：

```
 --- root
      |
      |--repo |-- hooks
      |       |-- branches
      |       |-- etc.
      |
      |--app 
```

post-receive 钩子看起来像这样。

```
 #!/bin/sh
    GIT_WORK_TREE=/home/ubuntu/app
    GIT_DIR=/home/ubuntu/repo
    export GIT_WORK_TREE
    export GIT_DIR

    git checkout -f

    echo 'Update sub modules.'
    git submodule init && git submodule sync && git submodule update

    echo 'Install dependencies.'
    cd $GIT_WORK_TREE && sudo rm -rf node_modules && sudo npm install

    echo 'Restart app'
    sudo supervisorctl restart node 
```

每件事都很好，但是我开始在我的仓库中使用子模块，我无法拉出模块并收到此消息。并收到此消息：

*您需要从工作树的顶层运行此命令。*

我的安装基于[http://cuppster.com/2011/05/12/diy-node-js-server-on-amazon-ec2/](http://cuppster.com/2011/05/12/diy-node-js-server-on-amazon-ec2/)

我的配置设置

```
 core.repositoryformatversion=0
    core.filemode=true
    core.bare=false
    core.worktree=/home/ubuntu/app
    receive.denycurrentbranch=ignore 
```

我该如何解决这个问题？

提前致谢！！

# javascript - Jquery 无法通过 .html() 插入 HTML

> ID：15522190
> 
> 赞同：0
> 
> 时间：2013-03-20T11:24:37.953
> 
> 标签：javascript, jquery, html

我正在通过 Ajax 从一个 Div 添加动态代码，我还想添加一些 javascript，但它无法显示在代码上，我的代码如下所示。

```
$.ajax({
              url: "ajax_add_logo_parts.php",
              data: 'act=getPartImage&part_id='+part_id+'&list_id='+n[1],
              success: function(msg){

                    alert($("#mainPartId"+n[1]).html());
                    $("#mainPartId"+n[1]).append(msg)
                    alert(msg);
                    alert($("#mainPartId"+n[1]).html()); 
                    $("#"+n[0]).val(color)                  
                }
            }); 
```

变量 msg 包含一些 html 和 javascript，如下所示，但无法以 html 显示

```
<script type="text/javascript">

    var capPartId1 = document.getElementById("capPartId1");

    var originalPixelsPart1 = null;

    var currentPixelsPart1 = null;

    function changeColorPart1(color)

    {

        $('.bill').val(color);

        if(!originalPixelsPart1) return;

        var newColorLogo = HexToRGB(color);

        for(var I = 0, L = originalPixelsPart1.data.length; I < L; I += 4)

        {

            if(currentPixelsPart1.data[I + 3] > 0)

            {

                currentPixelsPart1.data[I] = originalPixelsPart1.data[I] / 255 * newColorLogo.R;

                currentPixelsPart1.data[I + 1] = originalPixelsPart1.data[I + 1] / 255 * newColorLogo.G;

                currentPixelsPart1.data[I + 2] = originalPixelsPart1.data[I + 2] / 255 * newColorLogo.B;

            }

        }

        ctx.putImageData(currentPixelsPart1, 0, 0);

        capPartId1.src = canvas.toDataURL("image/png");

    }

    function getPixelsPart1(img)

    {

        canvas.width = img.width;

        canvas.height = img.height;

        ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, img.width, img.height);

        originalPixelsPart1 = ctx.getImageData(0, 0, img.width, img.height);

        currentPixelsPart1 = ctx.getImageData(0, 0, img.width, img.height);

        img.onload = null;

    }

</script>

<div class='capPart1 bill_1' id='1' style='position: absolute;z-index: 600;display: block;'><img src='http://localhost/CustCap/Code/customcap/images/capparts/0630112013030101.png' id='capPartId1' onload='getPixelsPart1(this);'></div>

<input type='hidden' name='bill' id='bill' class='bill' value='' /> 
```

我可以看到下面的代码

```
<div class='capPart1 bill_1' id='1' style='position: absolute;z-index: 600;display: block;'><img src='http://localhost/CustCap/Code/customcap/images/capparts/0630112013030101.png' id='capPartId1' onload='getPixelsPart1(this);'></div>

<input type='hidden' name='bill' id='bill' class='bill' value='' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:31:46.657

尝试这个

```
 $.ajax({
          url: "ajax_add_logo_parts.php",
          data: 'act=getPartImage&part_id='+part_id+'&list_id='+n[1],
          success: function(msg){

                alert($("#mainPartId"+n[1]+"").html());
                $("#mainPartId"+n[1]+"").append(msg)
                alert(msg);
                alert($("#mainPartId"+n[1]+"").html()); 
                $("#"+n[0]+"").val(color)                  
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:32:19.457

你`type:post/get`错过了尝试添加这个：

```
$.ajax({
   type:"GET",
   url: "ajax_add_logo_parts.php",
   data: 'act=getPartImage&part_id=' + part_id + '&list_id=' + n[1], 
```

# ruby-on-rails - 添加一些带有嵌入式 ruby 的 HTML 后没有方法错误

> ID：15522195
> 
> 赞同：0
> 
> 时间：2013-03-20T11:24:41.700
> 
> 标签：ruby-on-rails, ruby

下面的代码可以正常工作，但是在添加带有一些嵌入式 ruby​​ 的下拉导航后，我得到一个 no method 错误。

> Static_pages#home 中的 NoMethodError 显示 D:/Ruby/sample_app/app/views/layouts/_header.html.erb 其中第 9 行引发：#Class:0x467a948 的未定义方法“find_by_token”

我的 _header.html.erb 没有错误

```
<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
     <div class="container">
      <%= link_to "Energy Battle", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home",    root_path %></li>
          <li><%= link_to "Help",    help_path %></li>
          <li><%= link_to "Log in", signin_path %></li>
        </ul>
      </nav>
     </div>
  </div>
</header> 
```

这是带有我添加的代码的 _header.html.erb。这给了我错误。

```
<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "Energy Battle", root_path, id: "logo" %>
       <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", root_path %></li>
          <li><%= link_to "Help", help_path %></li>
          <% if signed_in? %>
            <li><%= link_to "Users", '#' %></li>
            <li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Account <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", '#' %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
            </li>
          <% else %>
            <li><%= link_to "Sign in", signin_path %></li>
         <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:28:57.170

它告诉你你的方法有问题`signed_in?`。

这就是您需要开始检查的地方。

希望这可以帮助

# ruby-on-rails - Rails - 多个文件上传表单，每个文件都有额外的输入

> ID：15522196
> 
> 赞同：0
> 
> 时间：2013-03-20T11:24:51.090
> 
> 标签：ruby-on-rails, file-upload

我正在开发一个用户可以将文件上传到项目的应用程序。现在我正在使用回形针，并且所有文件信息（名称、文件类型等）都已正确记录。

我遇到的问题是用户需要为每个文件分配一个类别。

实现这样的事情的最佳方法是什么？我现在正在打电话，但如果有必要，我会在上班时附上任何相关代码。

提前致谢！

**编辑** 这里有更多关于设置的信息。
我需要分配文件类型（这更像是一个类别而不是文件类型。我没有命名字段！）所以所有信息都在一个表中。虽然`accepts_nested_attributes`肯定会在路上派上用场！

这是表结构。所有`document_`字段均由回形针设置。唯一需要用户输入的是`file_type`字段。

```
+-----------------------+--------------+------+-----+---------+----------------+
| Field                 | Type         | Null | Key | Default | Extra          |
+-----------------------+--------------+------+-----+---------+----------------+
| id                    | int(11)      | NO   | PRI | NULL    | auto_increment |
| document_file_name    | varchar(255) | YES  |     | NULL    |                |
| document_content_type | varchar(255) | YES  |     | NULL    |                |
| document_file_size    | int(11)      | YES  |     | NULL    |                |
| document_updated_at   | datetime     | YES  |     | NULL    |                |
| project_id            | int(11)      | YES  | MUL | NULL    |                |
| user_id               | int(11)      | YES  | MUL | NULL    |                |
| file_type             | varchar(255) | YES  |     | NULL    |                |
| created_at            | datetime     | NO   |     | NULL    |                |
| updated_at            | datetime     | NO   |     | NULL    |                |
+-----------------------+--------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:44:19.683

根据 Zippie，您可以检查[Nested Model form](http://railscasts.com/episodes/196-nested-model-form-part-1)。我也不确定它是否适用于文件。您可以从本教程中获得想法。

# java - junit 测试以检查文件的创建

> ID：15522197
> 
> 赞同：3
> 
> 时间：2013-03-20T11:24:53.180
> 
> 标签：java, junit4, mule

如果你有一个循环，它每 5 秒创建一次文本文件，并在创建时间戳之后命名，你可以创建一个 junit 测试，看看它是否被创建？你会怎么检查？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:27:12.490

我会使用[Mockito](http://code.google.com/p/mockito/)来模拟创作。并检查是否调用了create方法以及使用了哪个文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:39:28.913

您始终可以检查文件是否存在，但这比单元测试更多的是集成测试。

推荐的方法是像这样创建某种`FileCreator`接口

```
public interface FileCreator {
    void createFile(Date date);
} 
```

创建格式化时间的实现，然后进行单元测试 - 验证您调用`createFile`文件时是否确实创建了文件。这应该很简单。

现在，在创建文件的类中使用它 - 假设它看起来像这样

```
public class FileCreationManager {

    private final FileCreator fileCreator;
    private final ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();
    private Future<?> taskHandle;

    public FileCreationManager(final FileCreator fileCreator) {
        this.fileCreator = fileCreator;
    }

    public void startFileCreation() {
        taskHandle = executorService.scheduleAtFixedRate(new Runnable() {
            @Override
            public void run() {
                fileCreator.createFile(new Date());
            }
        }, 0, 5, TimeUnit.SECONDS);
    }

    public void stopFileCreation() {
        taskHandle.cancel(false);
        executorService.shutdown();
        try {
            executorService.awaitTermination(1, TimeUnit.MINUTES);
        } catch (InterruptedException ex) {
            Thread.currentThread().interrupt();
        }
    }
} 
```

您的单元测试可以传入 的虚拟实现，`FileCreator`您只需要检查`createFile`是否使用 right 调用`Date`。

您可以运行创建线程几秒钟并将`Date`传入的 s 收集到 a `Collection`- 您的单元现在需要检查`Date`s 是否相隔 5 秒并且它们的数量是否正确。

# objective-c - presentViewController 未显示邮件编曲表

> ID：15522200
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:25:06.417
> 
> 标签：objective-c, mfmailcomposeviewcontroller

presentViewController 未显示邮件模态视图控制器。我已从 presentmodalviewcontroller 更改为 presentViewController，但它没有给出任何错误，也没有显示 modalview。如何解决这个问题？

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc]init];
    picker.mailComposeDelegate = self; 
    picker.navigationBar.tintColor = [UIColor colorWithHue:0.6 saturation:0.33 brightness:0.69 alpha:0];
    NSString *lObjstringPtr = (NSString *)nil;

    if(OPPORTUNITY_ENTITY_OBJECT_TYPE_CODE==m_cobjOwningGroup.m_cObjSelectedEntity.m_cObjectTypeCode) {
        lObjstringPtr = [lObjstringPtr stringByAppendingFormat:@" To Follow Up"];
        [picker setSubject:lObjstringPtr];
        lObjstringPtr = (NSString *)nil;
    } else 
        [picker setSubject:@""];

        [picker setMessageBody:m_cObjemailBodyStrPtr isHTML:NO];
        NSArray *toRecipients = [NSArray arrayWithObject:pEmailID];
        [picker setToRecipients:toRecipients];
        [self presentViewController:picker animated:YES completion:nil]; 
        [picker release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:53:10.470

两件事，一件是针对这个案例的，一件是一般性的。

1.  您似乎没有检查您的设备上是否设置了邮件。在您尝试显示邮件视图之前，您应该检查的返回值，[`[MFMailComposeViewController canSendMail]`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)并且只显示控制器，如果它是`YES`
2.  视图未显示的常见情况是控制器是`nil`. 在`presentViewController:`您可能想要检查（使用`NSLog`或使用调试器）`picker`不为零之前。

# asp.net-mvc - 扩展基于角色的安全性以允许特定实体的角色

> ID：15522202
> 
> 赞同：0
> 
> 时间：2013-03-20T11:25:07.657
> 
> 标签：asp.net-mvc, fluent-security

我在另一个 MVC 应用程序中使用了 FluentSecurity，它很棒，提供了一个巧妙的实现。

我现在需要提供应用程序范围的角色，另外还提供对单个实体的额外权限控制。

我的应用程序管理特定位置，用户可能有权在一个或多个位置执行操作，每个位置都有一个唯一的 ID。我需要检查用户是否具有位置 ID 的特定角色（有效地为角色添加另一个维度）。我已经绘制了我的架构以及我的回购/服务层。

我想知道以前是否有人解决过此类问题，是否值得我尝试使用 FluentSecurity 解决，或者我是否应该验证用户是否具有每个 GET/POST 请求（控制器或服务层）上的位置所需的角色。

我将在 FluentSecurity 中实现这一点，我将不得不推出自己的策略并从 RequestContext.RouteData 中捕获位置 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:55:48.457

我还没有完全完成您需要做的事情，但是在 FluentSecurity 中创建一个处理您的场景的自定义策略应该一点也不难。如果你觉得是，请告诉我，我将不得不解决这个问题。

您可以在此处找到有关如何创建自定义策略的更多信息：

[https://github.com/kristofferahl/FluentSecurity/wiki/Custom-policies](https://github.com/kristofferahl/FluentSecurity/wiki/Custom-policies)

在我看来，您可能想将其拆分为两个自定义策略。然后，您可以像这样应用您的自定义策略：

```
configuration.For<SomeController>()
    .AddPolicy<CustomPolicy1>()
    .AddPolicy<CustomPolicy2>(); 
```

# iphone - MBProgressHUD 视图未隐藏

> ID：15522207
> 
> 赞同：0
> 
> 时间：2013-03-20T11:25:21.057
> 
> 标签：iphone, ios, mbprogresshud, hud

在一个堆栈中，当我想从视图中删除一些计算时，我正在显示`MBProgressHUD`如果使用另一个堆栈，`MBProgressHUD`但它没有从 hud 中删除..检查我在做什么错误..

第一个堆栈称为**LoginViewController.m**

```
- (void)viewWillAppear:(BOOL)animated {
     [super viewWillAppear:animated];

     [MBProgressHUD showHUDAddedTo:self.view animated:YES]; 
}

-(void)myTask {
    // Do something usefull in here instead of sleeping ...

    [MBProgressHUD hideHUDForView:self.view animated:YES];

    [self.hud hide:YES];
    self.hud=nil;
    [self.hud removeFromSuperview];

    //[self.hud showWhileExecuting:@selector(myTask1) onTarget:self withObject:nil animated:YES];
 } 
```

现在`ViewController`get 调用，但视图将是相同的 Previous 和

经过一些计算，我希望 通过调用..check 代码中的方法从视图`ViewController`中删除`HUD``LoginViewController`

```
 - (void)didReceiveResponseFromServer:(NSString *)responseData
 {
     login=[[LoginViewController alloc]init];

     [self.login myTask];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:53:33.357

设置`MBProgressHUD`

```
- (void) setupHUD
{
    //setup progress hud
    self.HUD = [[MBProgressHUD alloc] initWithFrame:self.window.bounds];
    [self.SpurView addSubview:self.HUD]; // add it as here.
    self.HUD.dimBackground = YES;
    self.HUD.minSize = CGSizeMake(150.f, 150.f);
    self.HUD.delegate = self;
    self.HUD.labelText = @"Loading...";
} 
```

`[self.HUD hide:YES];` 然后按照代码中的描述使用隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T08:14:11.193

像我一样，我很累`[MBProgressHUD hideHUDForView:bAnimatedView animated:YES]` ，但是当我快速推入和退出时，它有时会不起作用。所以我添加了一些东西来检查 MBProgressHUD 的视图。

```
 MBProgressHUD *HUD = [MBProgressHUD HUDForView:bAnimatedView];
 if (HUD!= nil) {
     [HUD removeFromSuperview];
     HUD=nil;
 } 
```

# android - 相机预览始终返回 320x240 位图

> ID：15522213
> 
> 赞同：1
> 
> 时间：2013-03-20T11:25:48.103
> 
> 标签：android, bitmap, android-camera

我正在创建图像预览，我希望获得非常高的图片分辨率。但是，我不知道为什么，尽管 Galaxy Nexus 支持多种分辨率（我认为最大的分辨率是 1920x1080，但我不记得这些是否是确切值），当我保存图片时，它说来自预览的信息是 320x240。

```
pixels.mCamera = getCameraInstance();
Camera.Parameters params = mCamera.getParameters();
List<Size> sizes = params.getSupportedPreviewSizes();
Size biggestSize = sizes.get(0);
double biggestPixels = biggestSize.width + biggestSize.height;
for (Size size : sizes) {
    double pixels = size.width * size.height;
    if (pixels > biggestPixels) {
        biggestSize = size;
        biggestPixels = pixels;
    }
}
// At this point, biggestSize is 1920x1080
float ratio = ((float) biggestSize.width)
                    / ((float) biggestSize.height);
params.setPreviewSize(biggestSize.width, biggestSize.height);
mCamera.setParameters(params);
setCameraDisplayOrientation(this, 0, mCamera);
mPreview = new CameraPreview(this, mCamera);
FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
LinearLayout innerWrapper = (LinearLayout) findViewById(R.id.innerWrapper);
LayoutParams layoutParams = (LayoutParams) innerWrapper
                    .getLayoutParams();
layoutParams.height = (int) (layoutParams.height * ratio);
innerWrapper.setLayoutParams(layoutParams);
preview.addView(mPreview); 
```

那`innerWrapper`东西是显示一个正方形的图片。`setCameraOrientation`使图像与比例对齐。拍照时，我使用自动对焦，然后...

```
mCamera.autoFocus(new AutoFocusCallback() {

    @Override
    public void onAutoFocus(boolean success, Camera camera) {
        mCamera.takePicture(null, null, new PictureCallback() {
            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = 1;
                Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0,
                                            data.length, options);
                Bitmap finalBitmap;
                float ow = bitmap.getWidth();
                float oh = bitmap.getHeight();
                // At this point, ow and oh are 320 and 240
                float ratio = ow / oh;
                int fw, fh, x, y, angle;
                //It continues, but irrelevant
                ... 
```

这与`FrameLayout`我用来保存预览的布局尺寸有关吗？因为我将它定义为 350x350 dp，所以预览应该更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:55:50.440

傻我。问题是 my`PictureCallback`被实现为`jpeg`参数，而不是参数`raw`。在哪里，引用[文档](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)：

> 当原始图像数据可用时会发生原始回调（注意：如果没有可用的原始图像回调缓冲区或原始图像回调缓冲区不足以容纳原始图像，则数据将为空）。当缩放的、完全处理的 postview 图像可用时，会发生 postview 回调（注意：并非所有硬件都支持这一点）。jpeg 回调在压缩图像可用时发生。

将整体移动`PictureCallback`到第二个参数`mCamera.takePicture`而不是第三个参数将是解决问题的途径。但是，您需`CallbackBuffer`要这样做并更改代码以适应缓冲区的使用。所以对于第一个版本，我会坚持低质量的图片。

# ruby-on-rails - FactoryGirl 错误“define_method”：试图创建没有块的 Proc 对象（ArgumentError）”

> ID：15522214
> 
> 赞同：0
> 
> 时间：2013-03-20T11:25:48.697
> 
> 标签：ruby-on-rails, factory-bot

这是我的课程工厂，即 course.rb

```
FactoryGirl.define do
  factory :lesson do |lesson|
   lesson.sequence(:title) { |n| "title#{n}" }
   lesson.sequence(:description) { |n| "description#{n}" }
   lesson.sequence(:transcript) { |n| "transcript#{n}" }
   association :course, strategy: :build
  end
end 
```

这是我的 course_spec.rb 文件

```
require 'spec_helper'

describe Lesson do
  before { let(:lesson) { FactoryGirl.create(:lesson) } }
  subject (:lesson)
  it { should validate_presence_of :title    }
end 
```

有什么帮助吗？提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:31:16.053

您不需要 before 块中的 before 语句。

```
before { let(:lesson) { FactoryGirl.create(:lesson) } } 
```

改成这个

```
let(:lesson) { FactoryGirl.create(:lesson) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:34:46.763

很简单，您之前不需要 let in，无论您会使用`before`还是`let`我更喜欢使用 let，看看[这个](https://stackoverflow.com/questions/14116613/when-is-using-instance-variables-more-advantageous-than-using-let/14118197#14118197)答案，解释何时使用 let 以及何时使用之前。

```
require 'spec_helper'

describe Lesson do
  let(:lesson) { FactoryGirl.create(:lesson) }
  subject (lesson)
  it { should validate_presence_of :title    }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:42:30.560

我这样做了，它有效

```
require 'spec_helper'

describe Lesson do
  subject { FactoryGirl.create(:lesson) }
  it { should validate_presence_of :title    } 
```

# javascript - 从 ASP.NET 代码隐藏调用 JS 函数

> ID：15522216
> 
> 赞同：0
> 
> 时间：2013-03-20T11:26:05.127
> 
> 标签：javascript, asp.net

我的 aspx 页面中有两个 javascript 函数。他们使用一些 fabric.js 函数。

```
function saveCanvas() {
    js = JSON.stringify(canvas.toDatalessJSON());
    $get('<%= txtJSON.ClientID%>').value = js;

}
function loadCanvas() {
    js = $get('<%= txtJSON.ClientID%>').value;
    canvas.clear();
    canvas.loadFromDatalessJSON(js);
    canvas.renderAll();
} 
```

在代码隐藏中：

```
 Protected Sub SaveJSON()
    Dim scriptKey As String = "123"
    Dim javaScript As String = "<script type='text/javascript'>saveCanvas();</script>"
    ClientScript.RegisterStartupScript(Me.GetType(), scriptKey, javaScript)
 End Sub

Protected Sub LoadJSON()
    Dim scriptKey As String = "456"
    Dim javaScript As String = "<script type='text/javascript'>loadCanvas();</script>"
    ClientScript.RegisterStartupScript(Me.GetType(), scriptKey, javaScript)
End Sub 
```

现在我的问题是：为什么 loadCanvas 有效而 saveCanvas 无效？txtJSON 未填充 JSON 字符串。从 aspx 页面调用 saveCanvas 函数可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:41:55.247

问题是您`saveCanvas`在回发完成后调用，此时画布数据早已不复存在。

如果您有一个“保存”按钮，那么您需要在`saveCanvas`单击它时调用，以便在浏览器将页面发送回服务器之前保存数据：

```
<asp:Button runat="server" Text="Save" OnClickClick="saveCanvas()" /> 
```

# perl - 使用 Spreadsheet::ParseExcel 时防止丢失图表

> ID：15522217
> 
> 赞同：1
> 
> 时间：2013-03-20T11:26:09.867
> 
> 标签：perl, spreadsheet, cpan, activeperl, parseexcel

我需要编辑一个excel文件的数据和图表。我可以编辑数据，但图表会丢失。

[电子表格::ParseExcel](http://search.cpan.org/~jmcnamara/Spreadsheet-ParseExcel-0.59/lib/Spreadsheet/ParseExcel.pm)说：

> 您只能重写 Spreadsheet::WriteExcel 支持的功能，因此原始 Excel 文件中的宏、图形和其他一些功能将丢失。此外，不会重写公式，只写入公式的结果。

有什么解决方法吗？

# forms - Spring MVC在编辑对象时如何处理绑定

> ID：15522218
> 
> 赞同：1
> 
> 时间：2013-03-20T11:26:21.403
> 
> 标签：forms, spring, spring-mvc, binding, modelattribute

我是 Spring MVC 的新手——到目前为止，我已经看过很多教程，但刚刚开始开发。我刚刚遇到这个问题：

**摘要：我有一个表格，其中包含从数据库加载并支持弹簧模型的大量用户。我想为每个用户设置一个编辑按钮，并且我想调出另一个表单来编辑该用户，并且仍然让该用户在模型中得到支持，这样我就不必透露 id 或将用户映射到随机键.**

我有一个`List<User>`对象，我通过 @Service bean 从数据库中检索，然后将此列表传递给我的`UserController`bean。然后，在我的控制器中：

```
@RequestMapping(value="/users", method = RequestMethod.GET)
public ModelAndView showUsers() {       
    List<User> users = userService.getUserList(); //Get from DB. Returns some users.
    UserSet uset = new UserSet(); //Custom object backing the list.
    uset.setUserList(users);

    return new ModelAndView("users", "userset", uset);
} 
```

这将返回视图`users.jsp`并使用表单在表中显示用户列表：

```
<form:form action="#" method="post" modelAttribute="userset">
    <table>
        <tr>
            <th>N.</th>
            <th>Name</th>
            <th>Email</th>
        </tr>
        <c:forEach var="user" items="${userset.userList}"
            varStatus="status">
            <tr>
                <td align="center">${status.count}</td>
                <td><input name="userList[${status.index}].name"
                    value="${user.name}" id="name_${status.index}" /></td>
                <td><input name="userList[${status.index}].email"
                    value="${user.email}" id="email_${status.index}" /></td>
                <td><input type="button" value="Ed." id="edbtn${status.index}"
                    class="edbtn" /></td>
            </tr>
        </c:forEach>
    </table>
    <input type="submit" value="Save" />
</form:form> 
```

现在，您可以看到`<input type="button" value="Ed." id="edbtn${status.index}" class="edbtn" />`每个用户都有一个编辑按钮。我想要做的是在单击该按钮时出现一个新的单用户表单，并将我的用户对象绑定到它，这样如果我更改名称和电子邮件，我仍然可以在服务器端，以便在数据库中更新它。上面的多用户表单应该禁用所有字段或显示为标签 - 我不想在那里更改内容；我只想在那里显示它们，并使用按钮打开一个弹出窗口或浮动 div，其中包含实际的单用户表单。

顺便说一句，我正在尝试使用以下控制器捕获已编辑的用户：

```
@RequestMapping(value="users/edit", method = RequestMethod.POST)
public String edit(@ModelAttribute(value="user") User user, BindingResult bresult) {
    /* Do something here with the user */
    /* Currently the ID returned from user.getId() is null, but the original user shown in the form has an ID != null */
    return "redirect:/users";
} 
```

我正在通过 jQuery 发送编辑请求：

```
jq("#edituserbtn").click(function() {
        jq.post("users/edit", {
            name : jq("#edfrm_n").val(),
            email : jq("#edfrm_e").val(),
        }, function(data, status) {
            //jq("#changing").text(data + "; " + status);
        });
    }); 
```

请注意，`#edfrm_n`and`#edfrm_e`将是我想在这里使用的那个单用户表单的 id，而不是发回整个表单。使用 jQuery，我还会弹出这个单用户表单并将其放在屏幕中间的所有内容的前面。

如何实现？

PS：这可能不是编辑功能的最佳方法。在这种情况下，我非常感谢您为我提供了一些提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:53:39.910

我认为您应该对现有代码进行一些更改。您应该将用户ID设置为用户编辑按钮值，您可以编写一个js函数，其参数是用户ID，用户名和状态。将其绑定到按钮。当您单击编辑按钮时，它将运行 js 函数并在此对话框中弹出一个新对话框，您可以获取三个参数并显示它们。我推荐你使用 jQuery 对话框，因为你已经添加了 jQuery 库。您应该在此对话框中添加保存按钮，编辑用户数据后，只需单击保存按钮并调用 ajax 将数据发送到服务器，因为它有 id，所以您知道哪个将被更新。并且服务器会返回更新操作的状态，在ajax回调函数中，你用状态做另一件事。如果成功，关闭对话框并刷新主窗口，如果失败，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T23:23:37.827

Well, I thought Spring was doing some magic I now think it is not doing. As zeroflagl said, Spring needs to know what you are trying to update, so some sort of ID, or the actual DB ID, must be provided.

# facebook - facebook 应用程序的使用受到限制？

> ID：15522222
> 
> 赞同：1
> 
> 时间：2013-03-20T11:26:30.543
> 
> 标签：facebook, facebook-login

在没有登录 Facebook 的情况下，当我们打开[https://apps.facebook.com/gaanaworld/](https://apps.facebook.com/gaanaworld/)网址时，它会显示错误消息（应用程序“Gaanaworld”的使用受到限制）（从 Gaanaworld 加载页面时出错）

但登录后，它工作正常。请尽快帮助为什么它在登录前显示错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T07:59:43.517

转到高级，并确保未选中“让没有位置的用户查看我的应用程序”。这发生在我身上。我没有选择任何国家，并勾选了此复选框。尽管它似乎应该接受所有用户，但似乎 FB 需要用户登录才能知道（s）他没有位置。即似乎“无位置”与“任何位置”不同。

# branching-and-merging - 在 TFS 2012 中重命名分支的后果是什么？

> ID：15522223
> 
> 赞同：31
> 
> 时间：2013-03-20T11:26:30.887
> 
> 标签：branching-and-merging

我在很多地方读到重命名分支在 TFS 2010 中相当成问题：您可能会丢失刚刚重命名的分支的历史记录（[如本文](https://connect.microsoft.com/VisualStudio/feedback/details/793056/why-is-this-closed)或此[SO 问题](https://stackoverflow.com/questions/12144909/a-mess-after-renaming-tfs-2010-branch-and-making-a-new-one-in-the-same-name)中所示）

我在 TFS 2012 中找不到任何提及这些问题的内容。在重命名 TFS 2012 中的分支之前我应该​​注意什么后果？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-07-23T19:55:21.420

重命名分支的最大问题是，下次合并到重命名的分支或从重命名的分支合并时，您将有效地执行无根据的合并。这会导致很多痛苦。

我目前正试图解开这样的混乱局面，这并不令人愉快。（分支在 4 个月前更名。分支的第一次合并是部分合并）这是我不希望我最大的敌人的噩梦（巧合的是，他们是重命名分支并进行部分合并的开发人员）

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/15621451/568475)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-23T19:39:19.287

不要这样做！您也许可以在服务器上重命名它，但根据我的经验，TFS 想要检查每个文件......基本上把它当作一个副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T18:03:02.253

你可以这样做，但取决于你所处的情况。对于我的情况，我有以下结构：

```
Development
   ProjectX
      ProjectY
Main
Release 
```

`ProjectX`比一周前更早发布`ProjectY`，它被合并到`Development-->Main`一周前。现在，名称`ProjectX`不再相关，而且还有一个以名称开头的新项目，`ProjectZ`所以我将重命名`ProjectY`为.`ProjectZ``ProjectX``ProjectY`

一旦 X、Y 和 Z 移动到标准发布周期，它们都将完全合并，因此我不必担心逐个合并。

# javascript - 循环遍历javascript对象IE8

> ID：15522237
> 
> 赞同：2
> 
> 时间：2013-03-20T11:27:09.057
> 
> 标签：javascript, arrays, internet-explorer, object, for-loop

`data`是一个Json数据数组，每个对象的结构是：

```
var data = [
{
    id: 0, 
    img: "image_src", 
    width: 107, 
    height: 80, 
    shadowBoxLink: "....",
    th: {
        width: 107,
        height: 70, 
        img: "src"
    }
},
{
    id: 1, 
    img: "image_src", 
    width: 107, 
    height: 80, 
    shadowBoxLink: "....",
    th: {
        width: 107,
        height: 80, 
        img: "src"
    }
}
]; 
```

当我尝试在循环中访问数组（仅在 IE8、IE7 中发生）时：

```
for(var i in data) {
    var imgHeight = data[i].th.height;
} 
```

我收到一条错误消息：“无法获得“高度”的属性，引用为空或未定义”

（我从法语翻译了消息：Impossible d'obtenir la propriété « height » d'une référence null ou non définie）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T11:28:57.217

访问数组元素可以更语义化地完成，如下所示：

```
for(var i = 0, n = data.length; i < n; i ++) {
    var imgHeight = data[i].th.height;
    ...
} 
```

[`for..in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环旨在与基于键的对象一起使用。

**注意：**您的对象中还缺少一个结束引号：

```
th: Object {
   width: 107,
   height: 80, 
   img: "src /* NEED A CLOSING " HERE */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:32:41.767

看来您正在寻找不存在的物业

做一个简单的测试：

```
for(var i in data) {
  if(data[i] && data[i].th && data[i].th.height){
    console.log('the property exists');
  }else{
    console.log("no, it doesn't")
  }      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:35:40.630

有一个对象数组。

因此，使用 for 并获取所需对象的属性。

给定代码中存在语法错误。用引号关闭字符串。

示例代码在这里。

```
var data = [
    {
        id: 0, 
        img: "image_src1", 
        width: 107, 
        height: 80, 
        shadowBoxLink: "....",
        th: {
            width: 107,
            height: 70, 
            img: "src"
        }
    },
    {
        id: 1, 
        img: "image_src2", 
        width: 107, 
        height: 80, 
        shadowBoxLink: "....",
        th: {
            width: 107,
            height: 40, 
            img: "src"
        }
    }
];

for(var i=0; i<data.length; i++) {
    var imgHeight = data[i].th.height;
    alert(imgHeight);
} 
```

# c# - C#中的属性名和方法名可以相同吗？

> ID：15522242
> 
> 赞同：20
> 
> 时间：2013-03-20T11:27:16.597
> 
> 标签：c#, .net, class, methods, properties

我有一个包含属性的类：

```
public bool IsMandatory {get;set;} 
```

现在我正在添加一个方法`IsMandatory(string str)`。

```
public bool IsMandatory(string str)
{
  //return false;
  //return true;
} 
```

我收到一个编译时错误

> *该类型已包含“IsMandatory”的定义*

C# 中的方法名称和属性名称不能相同吗？我们以不同的方式使用方法和属性，为什么会出现编译错误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-20T11:30:26.740

这是一个编译器错误，因为如果名称可能相同，则会引起混淆。在某些情况下可能会导致歧义 - 例如，在使用 Action 委托等时，方法不需要有括号，以及在使用`var`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:32:12.767

简而言之：这是不允许的。成员名称（字段、属性和方法）必须是唯一的。

# vb.net - VB.NET DataGridViewCheckBoxCell 检查值

> ID：15522243
> 
> 赞同：1
> 
> 时间：2013-03-20T11:27:20.123
> 
> 标签：vb.net, datagridview, datagridviewcheckboxcell, nothing

我想从 DataGridViewCheckBoxCell 中获取值，
我尝试了各种代码

```
DataGridView1.Item(1, i).Value = False Then 
```

还

```
DataGridView1.rows(i).cells(1).Value = False Then 
```

还使用ctype和cbool和convert.boolean ...当我进入调试时，当我将鼠标光标移到.value上时，它返回“Nothing”

有必要获得它不会返回的正确布尔值......我是否必须在设计时更改复选框单元格的任何设置？

# android - Android - 在没有 Eclipse 的情况下构建应用程序

> ID：15522249
> 
> 赞同：4
> 
> 时间：2013-03-20T11:27:33.227
> 
> 标签：android, eclipse, ant, build, aapt

我有一个主应用程序和一个它使用的 Android 库项目

我可以在 Eclipse 中很好地编译和运行应用程序

当我尝试使用 ant 构建相同的应用程序时，我遇到了问题

我无法使用 eclipse 的 aapt 获得相同的结果（在后台）

eclipse 插件似乎将主应用程序和库项目的资源（布局、图标、字符串等）合并在一起。任何人都知道如何在 aapt 的命令行中执行此操作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:30:00.637

检查文档：http: [//developer.android.com/tools/building/building-cmdline.html](http://developer.android.com/tools/building/building-cmdline.html)

它拥有关于在没有 Eclipse 的情况下构建的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:40:11.160

[您可以使用这种](https://stackoverflow.com/a/2988300/1405983)方式在不使用 Eclipse 的情况下编译您的应用程序。这是一个完美的主意。另请参阅[此博客](http://blog.standalonecode.com/?p=269)。

# ssis - SSIS包开发过程中如何使用DontSaveSensitive和xml配置文件

> ID：15522250
> 
> 赞同：5
> 
> 时间：2013-03-20T11:27:34.320
> 
> 标签：ssis, configuration-files

在 Visual Studio 的包开发过程中，是否可以将**SSIS 包的 ProtectionLevel 设置为 DontSaveSensitive**并**使用配置文件中的密码连接字符串**？

我有包例如**Package1 与 ProtectionLevel = DontSaveSensitive**。这个包使用来自连接管理器的连接，例如**Connection1**。

**Package1使用配置文件**file1.dtsConfig****启用了**配置，并指定了连接字符串。**此连接字符串中包含密码：****

 **```
<DTSConfiguration>
    <DTSConfigurationHeading>
        <DTSConfigurationFileInfo GeneratedBy="..." GeneratedFromPackageName="..." GeneratedFromPackageID="..." GeneratedDate="20.3.2013 12:08:27"/>
    </DTSConfigurationHeading>
    <Configuration ConfiguredType="Property" Path="\Package.Connections[Destination].Properties[ConnectionString]" ValueType="String">
        <ConfiguredValue>Data Source=.;Password=Password123;User ID=MyUser;Initial Catalog=Catalog;Provider=SQLNCLI10.1;Persist Security Info=True;Auto Translate=False;</ConfiguredValue>
    </Configuration>
</DTSConfiguration> 
```

现在从 Visual Studio 中的连接管理器打开连接时，**密码的文本字段留空**，并且包不执行。**为什么没有使用配置文件 file1.dtsConfig 中连接字符串中指定的密码？**

![在此处输入图像描述](../Images/90af4dbc7b7f810ccff7a76b19ab37a6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:11:49.227

最后我们找到了一种方法：

*   将 ProtectionLevel 更改为**DontSaveSensitive**
*   使用连接字符串创建配置文件
*   手动编辑此配置文件：将密码添加到连接字符串中，以防您使用 SQL Server 身份验证进行连接

然后，即使在 Visual Studio 中，SSIS 包也会从配置文件中加载包含连接字符串的密码。在连接管理器连接对话框中，密码不会显示，但包使用配置中的连接字符串运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:37:54.383

SSIS将`Config File`只在. 因此，下次使用打开包时，您需要再次输入凭据，否则包不会，但如果您指定了包，包将始终正确执行。`runtime``Save my Password``BIDS session``BIDS``Visual Studio``compile``run time``connection string``config file`

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms141747.aspx)，它明确指出

> 不保存敏感：防止标记为敏感的属性与包一起保存，从而使敏感数据对其他用户不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T09:58:05.973

当包首先设置为使用 EncryptSensitiveWithUserKey，然后更改为 DontSaveSensitive 保护级别时也是如此。您必须手动编辑 .conmgr-file 并删除 DTS:Password 元素并将密码放入连接字符串中，正如用户**dee**在上面明智地写的那样。**

# java - 与 Google Cloud Endpoints 的“会话”

> ID：15522255
> 
> 赞同：9
> 
> 时间：2013-03-20T11:27:49.153
> 
> 标签：java, google-app-engine, rest, session, google-cloud-endpoints

这个问题只是为了确认我对这个概念很清楚。

据我了解，**Google Cloud Endpoints**是 Google 对**REST**服务的一种实现，因此它们无法在内存中保留任何“会话”数据，因此：

*   用户必须在每个请求中发送**身份验证数据。**
*   我以后要使用的所有数据都**必须持久化**，也就是说，对于我收到的每个 API 请求，我都必须访问 Datastore，做一些事情并再次存储数据。

它是否正确？如果是这样，这在性能方面真的好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:23:35.023

是的，您可以使用会话，只需使用 HttpServlet 在您的 API 方法中添加另一个参数：

```
@ApiMethod
public MyResponse getResponse( HttpServletRequest req, @Named("infoId") String infoId ) {
    // Use 'req' as you would in a servlet, e.g.
    String ipAddress = req.getRemoteAddr();
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:03:44.593

数据存储非常快，特别是如果您进行键查找（与查询相反）。如果您使用 NDB，那么您将受益于自动 memache 您的查找。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T17:07:28.017

是的，您的 Cloud Endpoints API 后端代码（Java 或 Python）仍在 App Engine 上运行，因此您对 App Engine 上的所有资源拥有相同的访问权限。

尽管您无法为会话设置客户端 cookie，但您仍然可以获取用户的请求并将用户特定的数据存储在数据存储中。正如@Shay Erlichmen 提到的，如果您将数据存储与[memcache](https://developers.google.com/appengine/docs/java/memcache/)和上下文缓存（如[ndb](https://developers.google.com/appengine/docs/python/ndb/)一样）结合起来，您可以非常快速地进行这些查找。

要在 Python 或 Java 中执行此操作，需要在 API 和/或方法上的注释/装饰器中指定`allowed_client_ids`或`audiences`将需要指定。有关更多信息，请参阅[文档](https://developers.google.com/appengine/docs/python/endpoints/create_api#allowed-clients-and-audiences)。

# Python：

如果您想在 Python 中获取用户，请调用

```
endpoints.get_current_user() 
```

从使用`allowed_client_ids`或注释的请求中`audiences`。如果返回`None`，则表示没有有效用户（您应该返回 401）。

# 爪哇：

要获取用户，在带注释的方法（或包含在带注释的 API 中的方法）上，只需在请求中指定用户对象：

```
import com.google.appengine.api.users.User;

...

  public Model insert(Model model, User user) throws
      OAuthRequestException, IOException { 
```

和在 Python 中一样，检查是否`user`是`null`确定是否随请求一起发送了有效的 OAuth 2.0 令牌。

# http - Http 1.1 流水线支持

> ID：15522258
> 
> 赞同：1
> 
> 时间：2013-03-20T11:27:59.427
> 
> 标签：http, web, pipelining

我在 google chrome 中启用了 http 流水线支持，并观察到即使在使用 amazon.com 等大型网站时如何接收数据的一些问题。当前对主要服务器流水线的支持是什么？我想知道是否也会因为我们的透明代理（microsoft TMG）而引起问题，尽管[http://technet.microsoft.com/en-us/library/cc302548.aspx](http://technet.microsoft.com/en-us/library/cc302548.aspx)提到

“ *ISA Server 没有实现流水线。支持客户端请求流水线，允许客户端发出多个请求而无需等待每个响应。但是，不支持向 Web 服务器发送请求时的流水线。* ” 我认为这应该不会导致数据从管道感知 Web 服务器错误地接收。

# c++ - 将 double 转换为 float 时精度损失 1

> ID：15522261
> 
> 赞同：0
> 
> 时间：2013-03-20T11:28:02.207
> 
> 标签：c++, floating-point

对于以下程序，我无法理解的精度损失为 1。需要帮忙。

```
void main()
{
    typedef std::numeric_limits< double > dbl;
    cout.precision(dbl::digits10);

    double x = -53686781.0;
    float xFloat = (float) x;

    cout << "x :: " << x << "\n";
    cout << "xFloat :: " << xFloat << "\n";
}

Outpput:
x :: -53686781
xFloat :: -53686780 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:40:22.733

53686781 在二进制中看起来像这样：11001100110011000111111101。这是 26 位。

您的浮点数最多只能在其尾数部分存储 24 位，因此，您最终将 110011001100110001111111 存储在其中。最后两个二进制数字 01 被截断。

11001100110011000111111100 是 53686780。

就如此容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:40:43.933

对于普通的浮点数，我相信 p=23，它给出了 2^23 的数字精度（大约 7 位，如前所述。Double 有 p=52，它给出了 2^52 的数字精度（大约 15 位）。

维基[页面](http://en.wikipedia.org/wiki/Floating_point)实际上非常好。

# r - R：根据其他数据框中的规则替换列表中的所有值

> ID：15522266
> 
> 赞同：0
> 
> 时间：2013-03-20T11:28:13.330
> 
> 标签：r

我想用另一个数据框中的各自值替换列表（An）中的所有值。

```
String<-c("a","b","c")
Strn<-1:length(String)                            
LK<-data.frame(String,Strn)
An<-as.vector(permn(length(Strn))) 
```

我在上面创建了一个只有 3 个元素的简单示例，但我的数据中有一个更大、更多样化的列表（因此简单的 ifelse 重新编码会太长）。所以在这里我希望在整个列表中将“a”替换为 1，将 b 替换为 2，将 c 替换为 3，因为这些是 LK 中的“规则”。

有没有办法告诉 R：查看 An 中的每个元素，在 LK$Strn 中找到匹配项并将 An 替换为 LK$String ？

所以结果列表的开头将是

```
[[1]]
[1] "a" "b" "c"

[[2]]
[1] "a" "c" "b" 
```

显然，完整的结果列表将与 An 大小相同。

我试过`match()`了，但我一定做错了什么......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:42:35.723

你可以像这样快速地完成它......

```
res <- lapply( An , function(x){ x <- as.character( LK[ match( x , LK$Strn ) , "String" ] ) } )

    res
#   [[1]]
#   [1] "a" "b" "c"

#   [[2]]
#   [1] "a" "c" "b"

#   [[3]]
#   [1] "c" "a" "b"

#   [[4]]
#   [1] "c" "b" "a"

#   [[5]]
#   [1] "b" "c" "a"

#   [[6]]
#   [1] "b" "a" "c" 
```

# dll - 将 Embarcadero C++ Builder XE3 DLL 导入 Embarcadero C++ Builder XE3

> ID：15522269
> 
> 赞同：0
> 
> 时间：2013-03-20T11:28:18.463
> 
> 标签：dll, c++builder, stdcall, c++builder-xe, getprocaddress

我尝试在 Embarcadero C++ Builder XE3 中创建一个 DLL，并在同一环境中的测试项目中使用它。

我以一个教程为例，该教程的代码对我来说效果不佳（！）：[http ://docwiki.embarcadero.com/RADStudio/XE3/en/Tutorial:_Using_Dynamic_Linked_Libraries_in_C%2B%2BBuilder_Applications](http://docwiki.embarcadero.com/RADStudio/XE3/en/Tutorial:_Using_Dynamic_Linked_Libraries_in_C%2B%2BBuilder_Applications)

这是我的 DLL 的内容：

BaseAuth.h 文件：

```
#ifndef   BaseAuthH
#define   BaseAuthH

#include <System.hpp>
class TBaseAuth
{
public:
    virtual void TestMessage() = 0;
};
#endif // BaseAuthH 
```

Auth.h 文件：

```
//---------------------------------------------------------------------------
#ifndef AuthH
#define AuthH
//---------------------------------------------------------------------------
#include "BaseAuth.h"
class TAuth : public TBaseAuth
{
public:
    TAuth();
    ~TAuth();   
    void TestMessage();
};
#endif 
```

Auth.cpp 文件：

```
//---------------------------------------------------------------------------
#pragma hdrstop
#include "Auth.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
TAuth::TAuth()
{
}
TAuth::~TAuth()
{
}
void TAuth::TestMessage()
{
    MessageBox(0, "Test message", "Test", MB_OK);
} 
```

和 File1.cpp ：

```
#pragma hdrstop
#pragma argsused

#include "Auth.h"
extern "C" __declspec(dllexport) void* __stdcall GetClassInstance()
{
    return static_cast<void*>(new TAuth());
}
extern "C" int _libmain(unsigned long reason)
{
    return 1;
} 
```

现在在测试应用程序中我有：

*   相同的 BaseAuth.h 文件

*   带有 Button 的表单：

Test_DLLAuthOrga.h：

```
#ifndef Test_DLLAuthOrgaH
#define Test_DLLAuthOrgaH
//---------------------------------------------------------------------------
#include <System.Classes.hpp>
#include <Vcl.Controls.hpp>
#include <Vcl.StdCtrls.hpp>
#include <Vcl.Forms.hpp>
//---------------------------------------------------------------------------
#include "BaseAuth.h"
//---------------------------------------------------------------------------
class TForm1 : public TForm
{
__published:    // Composants gérés par l'EDI
    TButton *Button2;
    void __fastcall Button2Click(TObject *Sender);
private:    // Déclarations utilisateur
    TBaseAuth *mpAuth;
public:     // Déclarations utilisateur
    __fastcall TForm1(TComponent* Owner);
};
//---------------------------------------------------------------------------
extern PACKAGE TForm1 *Form1;
//---------------------------------------------------------------------------
#endif 
```

Test_DLLAuthOrga.cpp：

```
//---------------------------------------------------------------------------
#include <vcl.h>
#pragma hdrstop
#include "Test_DLLAuthOrga.h"
#include "BaseAuth.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//---------------------------------------------------------------------------
const wchar_t* library = L"DLLAuthOrga.dll";
extern "C" __declspec(dllimport) void* __stdcall GetClassInstance();
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner) : TForm(Owner)
{
    HINSTANCE load;
    try
    { load = LoadLibrary(library); }
    catch(Exception &e)
    { ShowMessage(e.Message); }
    if (load)
    {
        ShowMessage("Library Loaded!");
        void *myFunc;
        myFunc = (void *)GetProcAddress(load, "GetClassInstance");
        mpAuth = (AuthParent*)myFunc;
    }
    else { ShowMessage("Library not loaded!"); }
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    if (mpAuth == NULL) return;
    try { pRes = mpAuth->TestMessage(); }
    catch(Exception &e) { ShowMessage(e.Message); return; }
} 
```

结果是：

指针 mpAuth 有一个地址。

但是它的方法没有地址，当我调用诸如“void TestMessage()”之类的简单方法时，它会引发访问冲突。

=> 首先似乎是字符串兼容性的问题（但在“C++ Builder XE3”和“C++ Builder XE3”之间，我希望使用相同的字符串格式？！）：[使用 Unicode Delphi 调用 DLL 时出错](https://stackoverflow.com/questions/15442062/error-calling-dll-with-unicode-delphi)

=> 我发现了一个类似的问题，但是 C++ DLL 进入 Delphi，而不是 C++ DLL 进入 C++ ...：[在 Delphi 应用程序中调用 C++ DLL](https://stackoverflow.com/questions/7847466/call-c-dll-in-delphi-app?rq=1)

=> 我尝试使用“HMODULE”而不是“HINSTANCE load;” : 同样的结果。

=>我尝试使用没有成功

```
mpAuth = static_cast<AuthParent*>(myFunc); 
```

代替 ：

```
mpAuth = (AuthParent*)myFunc; 
```

=>我还尝试用“__cdecl”或“”（删除）替换“__stdcall”：库加载但GetProcAdress返回NULL。

=> 在尝试调用 DLL 的方法“TestMessage()”时我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T08:57:11.710

要正确绑定 dll 中的函数，您应该给它完整的定义，包括调用约定、参数、返回类型和`__dllexport/__dllimport`修饰符。最简单的方法 - 使用`typedef`so 而不是键入（在 Test_DLLAuthOrga.cpp 中）

```
void *myFunc;
myFunc = (void *)GetProcAddress(load, "GetClassInstance"); 
```

利用

```
typedef __declspec(dllimport) void (__stdcall *MyFuncPointerType)(void);
MyFuncPointerType myFunc;
myFunc = (MyFuncPointerType)GetProcAddress(load, "GetClassInstance"); 
```

如果您使用`__cdecl`约定，您还应该在目标函数名称中添加下划线

```
typedef __declspec(dllimport) void (__cdecl *MyFuncPointerType)(void);
MyFuncPointerType myFunc;
myFunc = (MyFuncPointerType)GetProcAddress(load, "_GetClassInstance"); 
```

您还可`AuthParent*`以为您的工厂函数显式定义为返回类型，以摆脱不必要的强制转换（在 File1.cpp`void*`和`AuthParent*`Test_DLLAuthOrga.cpp 中），因此，最终代码片段如下所示：

```
typedef __declspec(dllimport) AuthParent* (__cdecl *MyFuncPointerType)(void);
MyFuncPointerType myFunc;
myFunc = (MyFuncPointerType)GetProcAddress(load, "_GetClassInstance");
mpAuth = myFunc(); 
```

# asp.net-mvc-3 - 通过mvc4中的Json调用控制器中的函数时，获取上传的文件计数为零

> ID：15522271
> 
> 赞同：0
> 
> 时间：2013-03-20T11:28:20.567
> 
> 标签：asp.net-mvc-3

我在 div FileUploadContainer 中使用 javascript 动态创建了多个文件上传器。当我将 btnSubmit 放在表单标签之外时，我得到 Request.Files.Count 为零。我需要通过 Json 调用 PopUp()。如果我将 btnSubmit 放在表单标签内它不会在 javascript 上调用 Save()，而是在表单提交时调用 PopUp() 方法。我需要通过 Json 调用 PopUp() 并需要获取 Request.Files.Count .Pls 帮助。

```
@using (Html.BeginForm("PopUp", "EnergyCatagory", FormMethod.Post, new { enctype = "multipart/form-data" }))
{ 
    <div id="FixedHeightContainer">
        <div id="FileUploadContainer">
        </div>           
        <input type="button" id="btnAddAttachment" name="btnAddAttachment" class="ZWidgetTitle"
            value="Add More Attachments" onclick="AddFileUpload()" />
    </div>
    <div id="NewAttachment">
        <div style="background-color: #DADADA;">
            <center>
                <label style="font-family: Verdana; font-size: 13px; font-weight: bold; color: black;
                    height: 30px; width: 100%; padding-top: 20px;" id="lblMessage">
                </label>
            </center>
        </div>
    </div>
    <div class="horizSep">
    </div>
      <div id="buttons">
       </div>          
}   <button id="btnSubmit" class="buttons" onclick="Save()">
        Attach</button>
 function Save()
{$.ajax({
            url: '/EnergyCatagory/PopUp',
            type: 'POST',
            contentType: 'application/json;',
            dataType: 'json',
            success: function (result) {
            alert("success");
            }
        }); 
```

}控制器 - - -

```
 public ActionResult PopUp()
    {
        for (int i = 0; i < Request.Files.Count; i++)
        {
            HttpPostedFileBase PostedFile = Request.Files[i];
            if (PostedFile.ContentLength > 0)
            {
                string FileName = System.IO.Path.GetFileName(PostedFile.FileName);
                var path1 = Path.Combine(Server.MapPath("~/Files/"), FileName);
                //PostedFile.SaveAs(Server.MapPath("Files\\") + FileName);
                PostedFile.SaveAs(path1);
       return Json(
           new
           {
               CustomMessage = "My message",

           });
          }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:33:38.543

如果表单正在提交并且不调用函数 onclick 是因为输入类型是按钮，您可以将其更改为 html 链接标记。

也调用内联 javascript (onclick) 不是一个好习惯，我注意到你使用 jquery 那么为什么不使用 jquery 呢？

```
function Save(){
 $.ajax({
        url: '/EnergyCatagory/PopUp',
        type: 'POST',
        contentType: 'application/json;',
        dataType: 'json',
        success: function (result) {
        alert("success");
        }
  });

  $("#btnSubmit").click(function(){
   Save();
});

@using (Html.BeginForm("PopUp", "EnergyCatagory", FormMethod.Post, new { enctype = "multipart/form-data" }))
{ 
<div id="FixedHeightContainer">
    <div id="FileUploadContainer">
    </div>           
    <input type="button" id="btnAddAttachment" name="btnAddAttachment" class="ZWidgetTitle"
        value="Add More Attachments" onclick="AddFileUpload()" />
</div>
<div id="NewAttachment">
    <div style="background-color: #DADADA;">
        <center>
            <label style="font-family: Verdana; font-size: 13px; font-weight: bold; color: black;
                height: 30px; width: 100%; padding-top: 20px;" id="lblMessage">
            </label>
        </center>
    </div>
</div>
<div class="horizSep">
</div>
  <div id="buttons">
   </div>

 <a id="btnSubmit" class="buttons">Attach</a>       
} 
```

我认为你得到`Request.Files.Count`等于零是因为你没有任何输入类型文件？你？

# objective-c - 如何改进创建受保护属性的尝试

> ID：15522275
> 
> 赞同：0
> 
> 时间：2013-03-20T11:28:33.020
> 
> 标签：objective-c, xcode4.5

```
#import "BGReviewController.h"

@interface BGReviewController (protected)
@property (weak, nonatomic) IBOutlet UIImageView *backgroundImage;
@property (weak, nonatomic) IBOutlet UIButton *dislikeButton;
@property (weak, nonatomic) IBOutlet UIButton *likeButton;
@property (weak, nonatomic) IBOutlet UIButton *post;
@property (weak, nonatomic) IBOutlet UIButton *cancel;
@property (weak, nonatomic) IBOutlet UITextView *textView;
@end 
```

然后我补充说：

```
@synthesize backgroundImage = _backgroundImage;
@synthesize dislikeButton = _dislikeButton;
@synthesize likeButton = _likeButton;
@synthesize post = _post;
@synthesize cancel = _cancel;
@synthesize textView = _textView; 
```

我得到了错误：/business/Dropbox/badgers/BadgerNew/BGReviewController.m:32:13：在“受保护”类别中声明的属性无法在类实现中实现

我应该在类别的实现文件中声明合成然后显式放置 ivars 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:39:37.010

代替

`@interface BGReviewController (protected)`

和

`@interface BGReviewController ()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:34:37.027

你不能在一个类别中@synthesize，你必须手动做 getter 和 setter

[看看这个答案](https://stackoverflow.com/a/879936/1219956)

# linux - 如何计算目录文件中的选项卡？

> ID：15522277
> 
> 赞同：1
> 
> 时间：2013-03-20T11:28:36.160
> 
> 标签：linux, bash, shell

我编写了一个代码来读取文本文件并打印文件中的总选项卡。但我想读取目录中的所有文件并计算每个文件中的选项卡并将结果打印到单个输出文件。我该怎么做？

```
#!/bin/sh

FILE='unit-1-slide.txt'
TABCOUNT=$(tr -cd '\t' < $FILE  | wc -c)
echo $TABCOUNT "tabs in file" $FILE >> output.txt
echo "Done!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:40:57.483

您只需要遍历所有文件，例如：

```
#!/bin/bash    

for file in *; do
    if [ -f "$file" ]; then
        tabs=$(tr -cd '\t' < "$file"  | wc -c);
        echo "$tabs tabs in file $file" >> output
    fi
done 
```

运行后文件输出如下：

```
8 tabs in file file1
4 tabs in file file2
0 tabs in file file3
3 tabs in file file4
... 
```

笔记：

您应该始终引用您的变量来处理带有特殊字符（如空格）的文件名，并且最好检查它是否是文件而不是目录。

# asp.net-mvc - 访问 elmah 时部署在 Azure 上的 MVC 站点返回错误

> ID：15522279
> 
> 赞同：4
> 
> 时间：2013-03-20T11:28:41.227
> 
> 标签：asp.net-mvc, azure, elmah

我有一个安装了最新的 ELMAH.MVC NuGet 包的 MVC WebAPI 站点。在 Visual Studio 下，我可以访问

```
http://localhost:1234/elmah 
```

并获取错误日志，就像我应该能够做到的那样。

当我将它部署到 Azure 时，它​​会引发错误。幸运的是，Elmah 正在将错误记录到 App_Data 中的 XmlError 日志中，我发现了这一点：

```
<error errorId="92ad3ee1-3fd5-449a-8cb4-0474aa771aab" 
application="/LM/W3SVC/417796901/ROOT" 
host="RD00155D430783" type="System.Web.HttpException"
message="Server cannot set status after HTTP headers have been sent."
source="System.Web" 
detail="System.Web.HttpException (0x80004005): Server cannot set status after HTTP headers have been sent.&#xD;&#xA; 
```

然后继续进行多行堆栈跟踪，其中没有任何靠近我的代码。

这是怎么回事？我刚刚添加了 Elmah.MVC nuget 包，并对 Web.Config 进行了以下更改

```
 <elmah>
  <security allowRemoteAccess="yes"/>
      <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data" />
  </elmah>
  <location path="elmah.axd">
    <system.web>
    <allow roles="*" />
    </system.web>
   </location> 
```

它不会靠近我的任何控制器，因此我无法控制何时设置或发送 Http 状态标头。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T13:44:08.377

通过[https://stackoverflow.com/a/11680786/1037948](https://stackoverflow.com/a/11680786/1037948)：

允许远程访问：

```
<elmah>
      <security allowRemoteAccess="true"/>
</elmah> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T16:36:31.297

itanex 是对的！在 App_Data 文件夹中放置一个空文本文件（即 placeholder.txt）并将其标记为“内容”和“始终复制” - 这将确保 App_Data 文件夹正在创建。此外，正如西蒙指出的那样，正确的路径（基于您的配置）是 /elmah.axd

# unit-testing - 如何在为 grails 控制器编写单元测试时模拟 g.message

> ID：15522281
> 
> 赞同：3
> 
> 时间：2013-03-20T11:28:48.023
> 
> 标签：unit-testing, grails

我正在使用 grails 1.3.7 版。在我的控制器应用程序中，我使用`messages.properties`并获取属性的值

```
g.message(code:messageKey, args:msgParamsArr) 
```

但是当我开始为控制器中的动作编写单元测试时，它给了我错误。

请您帮我了解如何`g.message`准确模拟，以便现有代码`messages.properties`仅从中获取消息属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:07:17.783

你可以模拟它：

```
controller.metaClass.message = { message ->
    message.code
} 
```

`message.args`如果您只想使用 验证参数，您也可以包括在内`.contains()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-29T15:10:36.967

这就像 Grails 2.4.5 中的冠军：

```
controller.metaClass.message = { Map attrs -> attrs.toString() } 
```

# javascript - 命名空间层次结构、缩小和跨浏览器兼容性

> ID：15522287
> 
> 赞同：0
> 
> 时间：2013-03-20T11:29:01.770
> 
> 标签：javascript, compression, minify

我一直在使用以下模型来命名我最新的脚本。到目前为止，它有一些明显的优势，虽然我确信可以以其他方式复制，但确实有助于我的编码过程。不幸的是，我遇到了一个明显的缺点......当使用一些 JS 压缩实用程序时，它们严重破坏了代码，以至于我必须避免许多有利的选择。***幸运的是，我使用此模型保存的代码有助于减轻“损害”。***

我仍然很想知道是否有更可行的解决方案，因为 min.js 只会在 Chrome/IE 中始终失败。我知道下面的内容对某些人来说有点太抽象了。有没有专家可以指出我正确的方向。我用过 YUI、Packer 和 JSMin。JSMin 工作可靠，但效率不高……

```
/* Global Namspace */
(function (T) {"use strict";
    /* Top.Sub1 */
    (function(S1) {

        // ... Some methods (public/private)

        /* Top.Sub1.Mini */
        (function(M) {

            // ... Some methods (public/private)

        }(S1.Mini = S1.Mini || function(o){}));
    }
    (T.Sub1 = T.Sub1 || function(o){}));

    /* Top.Sub2 */
    (function(S2) { 

        // ... Some methods (public/private)

        /* Top.Sub2.Mini1 */
        (function(M1) {

            // ... Some methods (public/private)

        }(S2.Mini1 = S2.Mini1 || function(o) {}));

        /* Top.Sub2.Mini2 */
        (function(M2) {

            // ... Some methods (public/private)

        }(S2.Mini2 = S2.Mini2 || function(o) {}));
    } (T.Sub2 = T.Sub2 || function(o) {}));

} (window.Namespace = window.Namespace || function(o){})); 
```

**更新：**我面临的最常见错误是各种“意外令牌”。有时是')'，有时是'}'。每隔一段时间，它就是一个 '('。我还没有解决 gzip 问题，因为我想要这个。

**更新 2：**已使用 Tiidied-jsHint 传递文件检查/删除了 ns，但仍无法正确缩小。它肯定与这个模型有关......有人对为什么有明确的答案吗？如果没有，欢迎进一步的建议。*PS Github 已使用 Tiidied-jsHint 传递代码进行了更新。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:37:39.787

我想说阅读这篇文章，了解需要做什么以及需要避免什么以实现良好的缩小 - <a href="http://alistapart.com/article/javascript-minification-part-II" rel="nofollow ">http://alistapart.com/article/javascript-minification-part-II

然后选择合适的模块框架，如[AMD](http://addyosmani.com/writing-modular-js/)或[commonjs](http://dailyjs.com/2010/10/18/modules/)。

**升级版**。我的主要建议是在您的代码上使用 linter，例如[http://jshint.com](http://jshint.com)，并遵循类似[http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)的编码风格。解释为什么某事会在某些情况下中断。它还将使您的代码更容易被开源贡献者所接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:50:49.537

在我可以使用的每个缩小器上测试了几乎所有选项之后，代码缩小得非常好。（无论有没有整洁等......）当任何缩小器尝试替换或混淆符号时，问题就出现了。特别是，它不能很好地处理这个 for 循环：

```
for (i = 0; i < l; i++) { 
    _.points[i] = new S.Point(_, pts[i]);
} 
```

去除循环允许优化正确发生。

# c# - 使用更新面板刷新时防止重复回发处理

> ID：15522289
> 
> 赞同：1
> 
> 时间：2013-03-20T11:29:02.817
> 
> 标签：c#, jquery, asp.net

基本上我想要实现的是（asp.net 4）：

*   如果用户对 ImageButton 或类似控件进行回发，它应该会导致页面发布，并经历整个 asp 生命周期。
*   如果刚刚发生这种情况，并且用户按 F5 或类似键进行刷新，则它应该忽略上一篇文章中的所有事件并执行常规 Get。
*   如果用户多次单击“保存”，它应该只注册 1 个帖子，并且不会导致创建重复等。
*   如果页面上有更新面板，则 Post 应该只更新面板数据，而 Get(refresh) 应该重新加载整个页面。

我环顾四周，目前正在使用 Response.Redirect 方法（一旦在帖子中完成处理，它就会响应重定向到同一页面以用 Get 替换帖子）。由于多种原因，这并不令人满意

*   每次保存都会导致不必要的开销
*   我想在更新面板中有页面的区域，目前如果您更改某些内容并将其保存在一个区域中，它会重新加载整个页面。

[我在这里](https://stackoverflow.com/questions/481564/how-to-prevent-repeated-postbacks-from-confusing-my-business-layer)发现了这个类似的 SO question ，它强调了一些方法，但它们看起来都不能解决我的需求。我还发现[这](http://dotnetslackers.com/community/blogs/simoneb/archive/2007/01/07/Using-an-HttpModule-to-detect-page-refresh.aspx)是一个有趣的方法，但我想知道是否有人可以在我尝试实施之前告诉我它是否能解决我的所有上述需求？此外，onsubmit 事件是否触发 Post 或刷新模仿 Post 之间的唯一区别？

关于上面的第 3 条，我已经阅读了有关 jQuery [.one()](http://api.jquery.com/one/)函数的信息，但我正在寻找一个应用程序范围的解决方案，因为大多数应用程序的开发都没有考虑到这一点。

提前致谢！

# triggers - 如何捕捉点击 QMenuBar

> ID：15522291
> 
> 赞同：0
> 
> 时间：2013-03-20T11:29:08.353
> 
> 标签：triggers, qt4, qmenu, qmenubar

我想捕捉在 QMainWindow 中的 QMenuBar 上的点击，所以我将 QMenuBar 子类化并且我已经覆盖了 mousePressEvent 函数，但是现在当我点击菜单时，子菜单不会显示它们。

一个想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:42:46.043

在`mousePressEvent`函数结束时，您应该将事件传递给基类，基类将在鼠标单击时执行自己的操作：

```
void MyMenu::mousePressEvent(QMouseEvent *event)
{
    // do your stuff
    QMenu::mousePressEvent(event);
} 
```

[在这里](http://doc-snapshot.qt-project.org/5.0/qtcore/eventsandfilters.html)您可以阅读有关 Qt 事件系统的信息。

# javascript - 菜单代码不起作用

> ID：15522308
> 
> 赞同：2
> 
> 时间：2013-03-20T11:30:14.743
> 
> 标签：javascript, jquery, html

**HTML 代码**：

```
<div id="shop-slide">
    <div id="shop-content">
        <form action="/" method="post">
            <h1>You have selected services</h1>
            <input type="text" class="field" name="login" value="Return code SMS..." onfocus="if (this.value == 'Return code SMS....') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Return code SMS....';}" />
            <input type="text" class="field" name="codesms" value="Nick ..." onfocus="if (this.value == 'Nick ...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Nick ...';}" />
            <input type="submit" class="submit" name="submit" value="Confirm" />
        </form>
    </div>
</div>
<div id="shop-toggle">
    <p>Buy</p>
    <p style="display: none;"><img class="close" src="images/close.png" alt="" />Close</p>
</div> 
```

**jQuery代码**

```
$(document).ready(function() {
    $('#shop-toggle').click(function() {
        $('#shop-content').slideToggle(300, function() {
            $("#shop-toggle p").toggle();
        });
    });
}); 
```

**CSS 代码**

```
#sklep {
    width: 50%;
    top: 0;
    position: absolute;
    z-index: 999;
    margin-right:30%;
    margin-left: 25%;
    padding: 0;
}
#sklep a {
    color: #ffffff;
}
#sklep a:hover {
    color: #616161;
}
#shop-slide {
    width: 100%;
    margin: 0 auto;
    padding: 0px;
    background: #3b3b3b;
    border-bottom: 1px solid #ffffff;
}
#shop-content {
    width: 290px;
    height: auto;
    margin: auto;
    padding: 13px;
    display: none;
}
#shop-content p {
    margin: 0;
    padding: 0;
}
#shop-toggle {
    width: 174px;
    height: 41px;
    background: url(images/btn.png) no-repeat;
    margin: 0 auto;
    padding: 0;
    z-index: 999;
    text-align: center;
    color: #ffffff;
    text-shadow: 1px 1px 1px #a20b1b;
    line-height: 37px;
    font-weight: bold;
    cursor: pointer;
    display: block;
    text-decoration: none;
}
.sklep-toggle:hover {
    color: #41070d;
    text-shadow: 1px 1px 0px #ee4557;
}
.sklep-toggle p {
    margin: 0;
    padding: 0;
}
.field {
    width: 200px;
    border: solid 1px #303030;
    margin-right: 30px;
    margin-left: 30px;
    padding: 9px 13px;
    background: #ffffff;
    color: #343434;
    background: -webkit-gradient(linear, left top, left 25, from(#ffffff), color-stop(4%, #eeeeee), to(#ffffff));
    background: -moz-linear-gradient(top, #ffffff, #eeeeee 1px, #ffffff 25px);
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
}
.submit {
    width: 120px;
    margin-left: 80px;
    padding: 8px 13px;
    font-weight: bold;
    text-shadow: 1px 1px 1px #484848;
    color: #ffffff;
    cursor: pointer;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    background: #6f6f6f;
    border: solid 1px #303030;
}
.submit:hover {
    background: #636363;
}
.close {
    vertical-align: middle;
    margin: 0px 3px 0px -16px;
    padding: 0;
} 
```

我正在使用此代码弹出菜单，html代码链接到mysql，显示几个查询。但是我有一个问题，当我单击按钮时，由于有几个查询，当我单击按钮时菜单全部突出显示。

那行不通:(

[演示网站](http://jsfiddle.net/9X9fL/1/) 看看它的外观

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:37:06.030

看到这个：http: [//jsfiddle.net/9X9fL/5/](http://jsfiddle.net/9X9fL/5/)

```
$(document).ready(function(){
   $('.shop-toggle').click(function() {
      $this = $(this);
       $this.prev().find('.shop-content').slideToggle(300,function(){
         $this.find("p").toggle();
      });
   });
}); 
```

html:

```
<div  class="shop-toggle">
    <p style="display: none;">Buy</p>
    <p <img class="close" src="images/close.png" alt="" />Close</p>
</div> 
```

# python - 从 MultiIndex 的 DataFrame 中提取数据

> ID：15522310
> 
> 赞同：1
> 
> 时间：2013-03-20T11:30:16.103
> 
> 标签：python, dataframe, pandas

我是 pandas 的新手，我正在尝试从 MultiIndex 的 DataFrame 中提取数据

是否可以在 pandas 中从 MultiIndex 对象中选择一系列值，例如下面的示例 DataFrame 我想从第一级（bar、baz、foo 和 qux）和“one”和“中选择所有值”两个' 从所有列的第二级开始。那可能吗？

```
arrays = [np.array(['bar', 'bar', 'bar', 'baz', 'baz', 'baz', 'foo', 'foo', 'foo', 'qux', 'qux','qux']),
np.array(['one', 'two','three','one', 'two', 'three','one', 'two','three', 'one', 'two','three'])]

df = pd.DataFrame(randn(12, 6), index=arrays)
                  0         1         2         3         4         5
bar one   -0.031447  0.084358 -0.045284 -0.073702 -0.566905 -0.541734
    two   -0.381897  0.422047 -0.527828  0.419984 -0.920186  0.643190
    three  0.082314  2.584901  1.149755 -0.741753  0.696301 -0.132365
baz one    0.637182 -0.210955 -0.329989  0.021509 -0.483201 -1.194727
    two    3.602497 -0.010458  1.734119 -0.332384  0.135082  0.194316
    three -0.293277 -0.144820  0.155034 -0.490092 -0.800939 -0.286902
foo one    1.244119  0.024739  0.500957  0.774194 -3.344261  1.098748
    two   -2.328298 -0.473493  0.881086  0.548408  0.882422 -0.151467
    three  0.512852  1.687702  0.154186 -0.079843  0.116599 -1.330802 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:12:45.767

```
df.reindex(index=["one", "two"], level=1) 
```

输出：

```
 0         1         2         3         4         5
bar one  0.494206  1.411835  0.047737 -1.750270  0.649225 -0.226546
    two -0.413393  1.686736  0.110594  1.231486  0.135066  2.025476
baz one -1.146431 -0.584855 -1.718917 -0.288630  0.070884 -0.674778
    two  0.957835  1.463544 -0.374227  0.364186  0.259866 -0.019867
foo one  0.300630 -2.648215  0.217727 -1.986657  1.354950 -0.290845
    two  0.046996  1.490452  0.173022 -0.666131 -0.155762 -2.229876
qux one  0.177816 -0.097909  1.360481 -0.619087 -0.026084 -0.512052
    two  0.589484  1.190523  0.759126 -0.380245  1.416895  0.373932 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:48:36.417

我认为目前还没有一种简单的方法可以做到这一点。我认为 0.11 版可能会解决这个问题。与此同时，我发现最简单的方法是交换索引级别并使用`.ix`：

```
In [30]: df.swaplevel(1,0).ix[['one','two']]
Out[30]:
                0         1         2         3         4         5
one bar -0.388720 -0.265593 -0.625708 -0.372266  0.425832  1.180458
two bar -2.000612 -0.308223  0.236815  0.327834 -0.837164 -0.525281
one baz  0.039961  1.821628 -0.681662 -0.300518  0.495441  1.204195
two baz -0.243946  0.757397 -1.157399  0.044435  0.325952 -1.613384
one foo -0.322431  0.539729 -0.081879  1.129230 -0.324549 -1.252578
two foo  1.127411 -1.957569 -0.284485  0.604807 -0.326727 -1.025945
one qux -0.217390 -3.194743  0.939121 -0.741615 -1.640926 -0.157857
two qux  0.513316  1.568216 -1.702408  0.955211 -0.017799 -0.718302 
```

# c# - 如何仅在默认浏览器中显示网站

> ID：15522311
> 
> 赞同：1
> 
> 时间：2013-03-20T11:30:20.817
> 
> 标签：c#, wpf

在单击 wpf 页面中的超链接后，我目前遇到问题。在我的`RequestNavigate`或`Click`（在这种情况下都有相同的行为）事件中，我执行通常的操作`Process.Start(hyperlink.NavigateURI)`。问题是此事件在默认情况下都打开了网页浏览器（我正在寻找的行为）和我的 wpf Page 对象以及我不想要的。我想知道这个问题是否有任何解决方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:42:44.417

您需要设置`e.Handled = true`说您已经处理了超链接

请参阅[在 WPF 中使用超链接的示例](https://stackoverflow.com/questions/10238694/example-using-hyperlink-in-wpf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:57:51.203

您当前页面也使用 Url 加载的原因是因为您使用的是`Hyperlink`. 尝试使用`Hyperlink`没有 URL、按钮或样式的`Label`

# https - 如何让 JavaFx WebEngine 详细报错？

> ID：15522315
> 
> 赞同：11
> 
> 时间：2013-03-20T11:30:35.047
> 
> 标签：https, http-headers, javafx, rtc

在 JavaFx 中，我可以将监听器附加到 webEngine 的负载工作者，如下所示：

```
 webEngine.getLoadWorker().stateProperty().addListener(
      new ChangeListener<Worker.State>() {
      public void changed(ObservableValue ov, Worker.State oldState, Worker.State newState) {                               
             System.out.println("webEngine result "+ newState.toString());
      }
  }); 
```

但是，如果我尝试在**https**地址加载文档，例如：

[https://SomeLocalMachine.com:9443/jts/admin#action=com.ibm.team.repository.manageUsers](https://SomeLocalMachine.com:9443/jts/admin#action=com.ibm.team.repository.manageUsers)

我在控制台上打印出来的只是：

```
webEngine result READY
webEngine result SCHEDULED
webEngine result RUNNING
webEngine result FAILED 
```

（Firefox 或 Chrome 中的相同 https 地址为我提供登录页面）

有谁知道我如何从 JavaFx WebEngine 获得更详细的报告。我不想只知道它失败了——我需要知道***为什么***。我*猜*我的错误与 SSL/证书/HTTPS 相关，但目前我对 SSL 的哪一部分导致它“失败”一无所知

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-06-10T17:01:03.483

您可以使用`com.sun.javafx.webkit.WebConsoleListener`. 缺点是它是 JRE 内部 API。

```
WebConsoleListener.setDefaultListener(new WebConsoleListener(){
    @Override
    public void messageAdded(WebView webView, String message, int lineNumber, String sourceId) {
        System.out.println("Console: [" + sourceId + ":" + lineNumber + "] " + message);
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-11T08:15:51.970

我们得到的最好的是：

```
if (webEngine.getLoadWorker().getException() != null && newState == State.FAILED) {
    exceptionMessage = ", " + webEngine.getLoadWorker().getException().toString();
} 
```

但这没有帮助。

（我们的错误是由缺少 CookieStore 引起的，看来您没有免费获得一个 - 并且必须设置一个默认值：http: [//docs.oracle.com/javase/7/docs/api/java/net /CookieHandler.html](http://docs.oracle.com/javase/7/docs/api/java/net/CookieHandler.html) )

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-10T14:04:27.467

您是否尝试过以下方法：

```
engine.getLoadWorker().exceptionProperty().addListener(new ChangeListener<Throwable>() {
    @Override
    public void changed(ObservableValue<? extends Throwable> ov, Throwable t, Throwable t1) {
        System.out.println("Received exception: "+t1.getMessage());
    }
}); 
```

# java - 查找文本文件中的唯一词

> ID：15522321
> 
> 赞同：3
> 
> 时间：2013-03-20T11:30:53.310
> 
> 标签：java, string

我正在用 Java 编写这个程序来查找文本文件中的唯一单词。我想知道这段代码是否正确，因为它甚至将空格显示为单词。

```
String[] words;
List<String> uniqueWords = new ArrayList<String>();
words = str1.split("[!-~]* ");
for (int i = 0; i < words.length; i++)
{
    if (!(uniqueWords.contains (words[i])))
    {
        uniqueWords.add(words[i]);
    }
} 
```

例如，如果我的输入是“Hello world！世界怎么样？” 我的输出数组/集合/列表应该有 hello, world, how, is, the

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:32:26.277

您可以使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)找到唯一的单词。Set 是一个不包含重复元素的集合。

```
String[] words;
Set<String> uniqueWords = new HashSet<String>();
words = str1.split("[\\W]+");
for (int i = 0; i < words.length; i++)
{
    uniqueWords.add(words[i]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T11:40:28.850

其他答案的略微修改版本（我喜欢它简短而简单）：

```
String[] words = str1.split("[!-~]* ");
Set<String> uniqueWords = new HashSet<String>();

for (String word : words) {
    uniqueWords.add(word);
} 
```

注意：如果你想在`!`或`-`或`~`或空间上分割，你应该使用这个：

```
String[] words = str1.split("[-!~\\s]+"); 
```

（破折号必须是第一个或最后一个）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T11:50:06.677

如果我们真的要紧凑：

```
Set<String> unique = new HashSet<String>(Arrays.asList(str.toLowerCase().split("[-.,:;?!~\\s]+"))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:33:54.823

Set 不允许重复，而 List 允许重复。

```
String[] words;
Set<String> uniqueWords = new HashSet<String>();
words = str1.split("[!-~]* ");
for (int i = 0; i < words.length; i++)
    uniqueWords.add(words[i]); //Here you need not to check with set because it wont allow duplicates 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:40:57.063

我建议您使用模式和匹配器并将结果放入 Set 中。

```
public void getWords()
{
    Set<String> words = new HashSet<String>();
    String pattern = "[a-zA-Z]+\\s";
    String match = "hello world how* are. you! world hello";
    Pattern compile = Pattern.compile(pattern);
    Matcher matcher = compile.matcher(match);
    while(matcher.find())
    {
        String group = matcher.group();
        boolean add = words.add(group);
        if(add)
        {
            System.out.println(group);
        }
    }
} 
```

输出：

```
hello 
world 
```

通过改变模式来改变你对“词”的定义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-25T03:42:49.343

如果您想获取句子/任何文本中未重复的单词，您可以尝试以下操作：

```
 public static Map<String,Integer> getUniqueWords(String sentence){
   String[] word = sentence.split("[\\W]+");
        Map<String,Integer> uniqueWord = new HashMap<>();
        for (String e:word){
            if(!uniqueWord.containsKey(e)){
                uniqueWord.put(e,1);
            }else{
                uniqueWord.remove(e);
            }
        }
        return uniqueWord;
    } 
```

# java - 刷新 jFrame 时旧的 jPanel 消失

> ID：15522323
> 
> 赞同：0
> 
> 时间：2013-03-20T11:31:02.647
> 
> 标签：java, swing, jframe, jpanel

我正在编写一个激烈的游戏并且有一个重要的问题。在这个游戏中，多亏了搜索和找到`revalidate()`方法以及`repaint()`方法，我成功地删除了一个`JPanel`并将另一个放置`JPanel`在它的位置。

然而......这是问题开始的地方。我能够做到这一点，但是有多个（范围可以从 9 到 729）这样的 JPanel 需要更改。我可以在 JFrame 中做到这一点没问题......但是我目前面临的问题是，虽然一个 JPanel 已正确替换，但当我执行下一个 JPanel 时，它也已正确替换。但是，经过多次测试后，我发现当通过将 JFrame 拖放到屏幕上或任何其他此类更改来刷新 JFrame 时，旧更改的 JPanel 就会消失。

有什么办法可以让新添加的 JPanel 永久存在而不是当且仅当 JFrame 被刷新时消失？

这是代码：

```
int a = f%27;
int b = g%27;
int c = a%9;
int d = b%9;
winningletter.setFont(new Font("Times New Roman", Font.BOLD, 17));
miniwin.add(winningletter);
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).removeAll();
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).setLayout(new GridLayout(1,1));
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).add(miniwin);
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).repaint();
metametametaminiminiwincheck[f/3][g/3]=winningletter.getText();
boardChanger(f, g, 4);
WinChecker(s, f,g,3,4,metametametaminiminiwincheck,x); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:01:28.847

您应该使用**CardLayout**：`The CardLayout class manages two or more components (usually JPanel instances) that share the same display space.`

它使您能够以专业的方式在面板之间翻转。每个 JPanel 都有一个 ID，您可以使用它来显示它。

**链接：** [http ://docs.oracle.com/javase/tutorial/uiswing/layout/card.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

**代码：**

```
//Where instance variables are declared:
JPanel cards;
final static String BUTTONPANEL = "BUTTONPANEL";
final static String TEXTPANEL = "TEXTPANEL";

//Where the components controlled by the CardLayout are initialized:
//Create the "cards".
JPanel card1 = new JPanel();
JPanel card2 = new JPanel();

//Create the panel that contains the "cards".
cards = new JPanel(new CardLayout());
cards.add(card1, BUTTONPANEL);
cards.add(card2, TEXTPANEL); 
```

**调用 JPanel 显示：**

```
 CardLayout cl = (CardLayout)(cards.getLayout());
 cl.show(cards, BUTTONPANEL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:09:52.687

> 我发现，当通过将 JFrame 拖放到屏幕上或任何其他此类更改来刷新 JFrame 时，旧更改的 JPanel 消失了

嗯...在您重新调整 JFrame 等大小后，自动调用 UI repaint() 方法似乎很自然：)

> 感谢搜索并找到 revalidate() 方法和 repaint() 方法，我成功地删除了 JPanel

很奇怪，你只为 graphics2d 指出你的代码策略：S 如果你不需要每次都绘制一个新的 UI，而是**保留**它们，正如我所知道的那样，在堆中初始化而**不是重新初始化**设置为你的JPanel *（？充当画布）* ......

实际上，如果您希望同时启动所有 JPanel，并且只是通过某个事件一个一个地获取它们，您可以简单地使用某种存储作为 Map 或 List 等，将它们全部（不可见）添加到您的 '画布'最好是 FlowLayout 管理器，并通过事件使所需的一个可见/不可见，例如......

您尝试实现的主要任务仍然不是很清楚，因为您使用 Graphics2D 重音所以也许您尝试实现其他效果？:S

PS无论如何，最好显示问题代码片段，因为您当前的问题包含的信息太少了......

**编辑**

```
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).removeAll();
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).setLayout(new GridLayout(1,1));
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).add(miniwin);
((JPanel)((JPanel)newDossier.Board.metametametaboard[f/27][g/27].getComponent((a/9)*3+b/9)).getComponent((c/3)*3+d/3)).repaint(); 
```

好的...这就是您向画布添加组件的方式...如我所见，**Board**中的数组是***静态***对象...我可能会建议，您有**多个**画布对象？如果是，那自然是***miniwin(s)***消失了，因为静态数组不能同时被两个调用者共享访问；所以我可能建议您**不要在您的情况下使用**静态字段...请阅读[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.3.1.1)以获取更多详细信息

* * *

如果您有其他问题详细信息，请发表评论

* * *

报告是否有帮助

# php - 使用 php curl 上传 asp.net 文件

> ID：15522334
> 
> 赞同：2
> 
> 时间：2013-03-20T11:31:28.847
> 
> 标签：php, .net, file-upload, curl

我正在尝试使用表单上传`php curl`文件`asp.net`。我正在使用`@`文件名之前的一个数组发送一个数组，但它无法将我的文件识别到 asp.net 服务器。有什么具体的方法来编写 curl 代码吗？

这是代码：

```
$postArr = array(
    'uplTheFile' => '@'. dirname(__FILE__) .'/abc.xls';
    'imgUploadFile_x' => '78',
    'imgUploadFile_y' => '19',
);

$param = array(
    'url'=> SITEURL,
    'method'=>"FILE",
    'parameter'=>$postArr
);

echo $result = curlOperation($param);

function curlOperation($param) {
    $headers=array();
    $headerVar=0;
    $headers[0]='Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
    $headerVar++;
    $headers[$headerVar]='Accept-Language: en-us,en;q=0.5';
    $headerVar++;
    $headers[$headerVar]='Accept-Encoding: gzip, deflate';
    $headerVar++;
    $headers[$headerVar]='Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7';
    $headerVar++;
    $curl_connection =curl_init($param['url']);
    if($param['method']=="POST") {
        $headers[$headerVar]='Content-Type: application/x-www-form-urlencoded; charset=utf-8';
    } elseif($param['method']=="FILE") {
    $headers[$headerVar]='Content-Type:  multipart/form-data;';
    }
    curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 60);
    curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0;  Windows NT 5.1)");
    curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl_connection, CURLOPT_HTTPHEADER, $headers); 
    curl_setopt($curl_connection, CURLINFO_HEADER_OUT, true);
    curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);
    if($param['method']=="POST" || $param['method']=="FILE" ) {
        curl_setopt($curl_connection, CURLOPT_POST, 1);
    curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $param['parameter']);
    }
    $result = curl_exec($curl_connection);
    curl_close($curl_connection);
    return $result ;
} 
```

# python - Tkinter 中的文本输入

> ID：15522336
> 
> 赞同：1
> 
> 时间：2013-03-20T11:31:32.587
> 
> 标签：python, tkinter

**目标**

我正在尝试编写一个基本文件，我可以将其导入所有其他程序中，这些程序将具有一个简单的功能，可以从用户那里获取输入然后返回它。

**代码**

为此，我有以下代码：

```
class takeInput(object):

    def __init__(self,requestMessage,parent):

        self.string = ''
        self.frame = Frame(parent)
        self.frame.pack()        
        self.acceptInput(requestMessage)

    def acceptInput(self,requestMessage):

        r = self.frame

        k = Label(r,text=requestMessage)
        k.pack(side='left')
        self.e = Entry(r,text='Name')
        self.e.pack(side='left')
        self.e.focus_set()
        b = Button(r,text='okay',command=self.gettext)
        b.pack(side='right')

    def gettext(self):
        self.string = self.e.get()
        self.frame.destroy()
        print self.string

    def getString(self):
        return self.string

def getText(requestMessage,parent):
    global a
    a = takeInput(requestMessage,parent)
    return a.getString() 
```

我还添加了一些脚本级别的代码来测试这个：

```
root = Tk()

getText('enter your name',root)

var = a.getString()

print var

root.mainloop() 
```

真正让我困惑的是：

1.  `var`没有我输入的值 它有空字符串`''`
2.  `a.string`变量具有我输入的值，我从 shell 中检查了它。

**此外**，当我尝试在 shell中分配从`a.getString()`to返回的字符串时，它就起作用了。`var`

**注意**我是 Tkinter 编程的新手，并不完全理解它是如何`mainloop()`工作的。所以也许这就是问题所在。但我不确定。

**眼镜**

操作系统：Linux Mint 14

Python空闲2.7

**请**帮我解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T13:34:43.243

正如其他答案所说，您`var`在进入主循环之前打印，也就是说，在您的窗口实际运行之前，您的程序正在等待用户输入。

您可以依靠`tkSimpleDialog`家人来获得您的意见：

```
import Tkinter
import tkSimpleDialog

root = Tkinter.Tk()
var = tkSimpleDialog.askstring("Name prompt", "enter your name")
print var 
```

`gettext`如果您想按照自己的方式行事，可以从“确定”按钮回调（在您的情况下）执行打印。您还可以在按下“ok”时生成一个虚拟事件并在主程序中绑定到该事件（[http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/virtual-events.html](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/virtual-events.html)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T12:23:00.803

你的代码流程是这样的：

*   主要作用域调用`getText`.
*   `getText`创建一个`takeInput`对象`a`。
*   `takeInput`对象初始化自身，创建标签和按钮等。
*   `getText``a.getString()`return ，它返回，`self.string`它仍然具有其默认值，即空字符串。
*   主范围打印`var`，它是空的。

到目前为止，所有这些都发生在几纳秒的时间内。用户甚至还没有看到窗口。

然后 main 作用域调用`root.mainloop()`，最终使用户有机会与窗口进行交互。但为时已晚。`var`已经打印出来了。

如果你想`getText`在用户提交他的文本之前不返回，那么`mainloop`必须发生在里面`getText`，而不是在它之后。

```
from Tkinter import *

class takeInput(object):

    def __init__(self,requestMessage):
        self.root = Tk()
        self.string = ''
        self.frame = Frame(self.root)
        self.frame.pack()        
        self.acceptInput(requestMessage)

    def acceptInput(self,requestMessage):
        r = self.frame

        k = Label(r,text=requestMessage)
        k.pack(side='left')
        self.e = Entry(r,text='Name')
        self.e.pack(side='left')
        self.e.focus_set()
        b = Button(r,text='okay',command=self.gettext)
        b.pack(side='right')

    def gettext(self):
        self.string = self.e.get()
        self.root.destroy()

    def getString(self):
        return self.string

    def waitForInput(self):
        self.root.mainloop()

def getText(requestMessage):
    msgBox = takeInput(requestMessage)
    #loop until the user makes a decision and the window is destroyed
    msgBox.waitForInput()
    return msgBox.getString()

var = getText('enter your name')
print "Var:", var 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:27:29.673

问题是您的测试例程`var`在显示对话框之前已经打印出值，更不用说输入的文本了。（您可以通过在测试代码中添加一些语句来轻松验证这一点`print`。）这是因为对的调用`mainloop()`位于最后。相反，您应该在创建框架`mainloop` *之后调用，但**在*读取和返回输入之前调用，例如它可能会转到您的`getText`方法：

```
def getText(requestMessage,parent):
    a = takeInput(requestMessage,parent)
    parent.mainloop()
    return a.getString() 
```

这仍然不能很好地工作，因为`[x]`即使在单击“确定”之后您也必须关闭对话框（单击 - 按钮），我不知道如何解决这个问题。

但是，请注意，已经*有*一个用于此的模块`tkSimpleDialog`，提供诸如`askstring(title, prompt)`仅显示此类输入对话框之类的方法。因此，您可以使用它们，或者查看源代码（在`/usr/lib/python2.7/lib-tk`等中找到）以了解它是如何完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-06T18:44:15.170

这是一个快速的片段：

```
import tkinter
from tkinter import simpledialog

root = tkinter.Tk()
# withdraw() will make the parent window disappear.
root.withdraw()
# shows a dialogue with a string input field
youtube_url = simpledialog.askstring('YouTube URL', 'Enter the youtube URL of the video', parent=root)

if str(youtube_url).startswith('http'):
    pass
else:
    pass 
```

# php - 仅重定向文件一次

> ID：15522337
> 
> 赞同：0
> 
> 时间：2013-03-20T11:31:39.140
> 
> 标签：php, javascript, session, cookies

是否可以重定向到文件 2 次然后第三次重定向到其他地方

EX:/index.php 重定向到 /index2.php 然后 /index2.php 重定向到 /index.php .....,,, 然后我们第二次访问 /index.php 它会将我们重定向到其他文件?

我们可以用 javascript 或 PHP 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:35:02.750

**index.php**重定向到**index2.php**

**index2.php**重定向到**index.php**`?r=1`

在 index.php 检查：

```
if($_GET['r']==1){
    //redirect to other page
} 
```

**更新**

据我了解，您有以下重定向：

```
1\. Somewhere => index.php
2\. index.php => site.com
3\. site.com  => index.php // and in this step you need to redirect to other place 
```

所以只需添加检查：

```
<script type="text/javascript">
if(document.referrer == 'site.com'){
    location.href = 'OTHER PAGE ADDRESS';
}
else{
    location.href = 'site.com';
}
</script> 
```

因此，如果用户来自其他站点，如果他从 site.com 到其他地方，他将重定向到 site.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:35:49.917

是的，您可以在会话变量中添加一个计数器来跟踪重定向。每次重定向后，递增计数器。

当计数器达到其极限时，执行您想要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:39:21.480

是的你可以。问题是你想要它有多永久。

JAVASCRIPT：

如果您想使用 javascript 进行操作，请查看 `window.location` 并记住用户是否在第一页上，只需使用 JavaScript cookie。简单教程[http://www.tutorialspoint.com/javascript/javascript_cookies.htm](http://www.tutorialspoint.com/javascript/javascript_cookies.htm) 还可以设置过期时间。

PHP：

如果您想让它“不那么永久”，例如仅针对一个打开的浏览器窗口或类似的东西，请查看 PHP 会话管理 [http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:47:23.320

我已经编写了 index.php?re_id = 的代码

在每个页面上提及 re_id。n 你可以给出更多条件

```
 if($_GET['re_id']){

     $re_id = $_GET['re_id'];   
      if($re_id=="1")
      {
      header("location:index3.php");
      }
      else
      {
         header("location:index2.php");
     }
} 
```

# c# - Windows Phone 8 地理定位不返回任何内容

> ID：15522343
> 
> 赞同：0
> 
> 时间：2013-03-20T11:31:56.667
> 
> 标签：c#, geolocation, windows-phone-8, async-await

我正在创建一个具有“我附近有什么”类型功能的应用程序，并且我有一些代码可以找到用户的位置。

我发现虽然调用已完成，但异步似乎永远不会返回。

我正在使用的代码是：

```
GeoCoordinate coord;
private async void GetNearMe()
{
    try
    {
        Geolocator geolocator = new Geolocator();
        Geoposition geoposition = await geolocator.GetGeopositionAsync();

        coord = geoposition.Coordinate.ToGeoCoordinate();
    }
    catch (Exception ex)
    {
        <snip>
    }
} 
```

但是代码有时只到达“coord =”行（并返回正确的数据）。如果是这样，由于某种原因，它可能不会再次出现。如果它不起作用，它也永远不会到达 catch 块。它似乎只是挂起。

有没有人知道我可能做错了什么/更好的方法？

*   我正在使用 Caliburn Micro，它位于称为 OnActivate 的 ViewModel 中。
*   我在模拟器和我的 Lumia 920 上都试过了，两者都发生了。
*   我尝试关闭并再次打开定位服务，没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:49:37.333

`async void`除非您正在编写异步事件处理程序，否则您不应该使用带有签名的方法。不能等待此类方法，并且在其中抛出的任何异常都不会返回给调用者。此类异常不会被异常处理程序捕获。它们被传播到运行它们的线程的未处理异常处理程序。

事实上，最新版 MSDN 杂志封面中的“[异步最佳实践](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)”文章正是提到了这种情况：

> ...从异步 Task 方法抛出的任何异常都将直接在异步 void 方法启动时处于活动状态的 SynchronizationContext 上引发。图 2 说明了从异步 void 方法抛出的异常不能自然地被捕获......

而不是`async void`你应该返回`async Task`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T18:33:24.367

改为使用 GeoCoordinateWatcher，

```
GeoCoordinate coord;    
GeoCoordinateWatcher watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
    watcher.PositionChanged += (s,ea) =>
    {
    coord = new Geocoordinate(ea.Position.Location.Latitude, ea.Position.Location.Longitude);

    } 
```

# c# - 使用默认值参数将字符串转换为 int 的 C# 函数

> ID：15522347
> 
> 赞同：0
> 
> 时间：2013-03-20T11:32:04.263
> 
> 标签：c#, type-conversion

所以我期待在 StackOverflow 上找到 Delphi 的 StrToIntDef 函数的明确等价物，但我做不到。

实现以下...

```
public static int StrToIntDef(string s, int def)
{

} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-20T11:34:01.757

## 常规号码

```
public static int StrToIntDef(string s, int @default)
{
    int number;
    if (int.TryParse(s, out number))
        return number;
    return @default;
} 
```

此方法使用了一些初学者不太可能知道的更高级的 C# 功能，它们是：

*   `@`在 default 前面添加，这是为了防止编译错误，因为它是 C# 关键字。
*   `number`将参数作为传递`out`，这意味着数字将在函数内更新并返回，尽管它是值类型。

## 不同的号码样式

还有一个[额外的重载](http://msdn.microsoft.com/en-us/library/zf50za27.aspx)可用于解析不同样式的数字：

```
public static bool TryParse(
    string s,
    NumberStyles style,
    IFormatProvider provider,
    out int result
) 
```

这是`NumberStyles`可以与此重载结合使用以解析异常形成的数字（如货币或十六进制）的列表。

*   `None`
*   `AllowLeadingWhite`
*   `AllowTrailingWhite`
*   `AllowLeadingSign`
*   `AllowTrailingSign`
*   `AllowParentheses`
*   `AllowDecimalPoint`
*   `AllowThousands`
*   `AllowExponent`
*   `AllowCurrencySymbol`
*   `AllowHexSpecifier`
*   `Integer`
*   `HexNumber`
*   `Number`
*   `Float`
*   `Currency`
*   `Any`

例如，传递一个十六进制数：

```
string hex = "AB";
int hexInt = int.Parse(hex, NumberStyles.HexNumber); 
```

或删除括号和空格：

```
string number = "  (2)  ";
int castedNumber = int.Parse(num, NumberStyles.AllowParentheses |                        
    NumberStyles.AllowLeadingWhite | NumberStyles.AllowTrailingWhite); 
```

[在MSDN](http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles.aspx)上阅读有关它们的更多信息。

## 参考

*   [MSDN - Int32.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)
*   [MSDN - 数字样式](http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T11:33:47.490

```
public static int StrToIntDef(string s, int def)
{
    int temp;
    if (!Int32.TryParse(s, out temp))
        return def;

    return temp;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T11:34:04.550

您可以发出`TryParse`：

```
int val;
var success = Int.TryParse("1", out val); 
```

或者您可以进行直接转换：

```
int val = Convert.ToInt32("1"); 
```

但简而言之，您不需要自己的功能。当然，除非您需要指定默认值，而不是`0`当它不转换时。如果是这样，那么您将利用`TryParse`您的方法，如果它不起作用，则返回传入的默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:35:54.403

试试这个。

```
int outputInteger;
int.TryParse(inputString, out outputInteger); 
```

# vba - 在 Outlook 中删除前后空格

> ID：15522349
> 
> 赞同：5
> 
> 时间：2013-03-20T11:32:10.940
> 
> 标签：vba, outlook, outlook-2010

我正在尝试为 Outlook 编写一个宏（从未编写过宏或 VBA），它将删除我选择的文本前后的空格。

这是我从我发现的例子中拼凑出来的：

```
Sub FixParagraphSpacing()
    Dim objOL As Application
    Dim objDoc As Object
    Dim objSel As Object

    Set objOL = Application
    Set objDoc = objOL.ActiveInspector.WordEditor
    Set objSel = objDoc.Windows(1).Selection

    objSel.ParagraphFormat.SpaceBefore = 0
    objSel.ParagraphFormat.SpaceAfter = 0

    Set objOL = Nothing
    Set objDoc = Nothing
    Set objSel = Nothing
End Sub 
```

问题是代码执行并且**几乎**没有任何反应。电子邮件的正文不受影响，但我无法再手动删除前后的间距，因为 Outlook 认为它已经完成。

我在这里想念什么？

**更新**

这是我根据@KevinPope 的回答更新的代码：

```
Sub FixParagraphSpacing()
    Dim objOL As Application
    Dim sel As Object

    Set objOL = Application
    Set sel = objOL.ActiveInspector().WordEditor.Application.Selection

    For Each para In sel.Paragraphs
        para.SpaceBefore = 0
        para.SpaceAfter = 0
    Next para
End Sub 
```

在我运行代码之前，这是我在行和段落间距下看到的：

![删除间距](../Images/19ccb9fb303a9e9f2290cebd3d9d9648.png)

这是我运行宏后看到的内容：

![添加间距](../Images/045b7f7a9df1349186af11a1e682a4c5.png)

不幸的是，除此之外，**电子邮件正文没有明显变化。**

* * *

每个请求的文本屏幕截图：

![在此处输入图像描述](../Images/82cd92b325518af7ce7140976f8073b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-27T18:32:52.303

在设置段落格式之前尝试使用“Selection.WholeStory”。它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-19T04:36:02.740

我也面临同样的问题。运行宏时，它似乎确实更新了值（之前/之后的空格为 0），但不会将设置应用于所选文本。

但随后添加 SpaceBeforeAuto = False 工作......

```
Sub FixParagraphSpacing()
    Dim objOL As Application
    Dim objDoc As Object
    Dim objSel As Object

    Set objOL = Application
    Set objDoc = objOL.ActiveInspector.WordEditor
    Set objSel = objDoc.Windows(1).Selection

    objSel.ParagraphFormat.SpaceBefore = 0
    objSel.ParagraphFormat.SpaceBeforeAuto = False
    objSel.ParagraphFormat.SpaceAfter = 0
    objSel.ParagraphFormat.SpaceAfterAuto = False

    Set objOL = Nothing
    Set objDoc = Nothing
    Set objSel = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T20:26:11.817

像这样的东西应该整理出所选段落前后的行距：

```
Sub Test()
    Dim objOL As Application
    Dim sel As Object

    Set objOL = Application
    Set sel = objOL.ActiveInspector().WordEditor.Application.Selection

    sel.Paragraphs(1).SpaceBefore = 0
    sel.Paragraphs(1).SpaceAfter = 0
End Sub 
```

如果这不起作用，请告诉我，我们可以对其进行迭代。

# extjs - 如何显示具有水平值的煎茶触摸滑块

> ID：15522353
> 
> 赞同：2
> 
> 时间：2013-03-20T11:32:19.703
> 
> 标签：extjs, slider

请看下面的图片。

![在此处输入图像描述](../Images/89713cf15c21ba110e13ac9a0038b61c.png)

如何沿滑块显示值（如上图所示），如带有值（极不可能、中性和极有可能）的条形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:11:36.250

我相当肯定这不是内置功能。确保始终查看[Sencha Market](https://market.sencha.com/)，以防有人制作了自定义组件/扩展/插件，但以防万一。

我的建议是创建您自己的自定义组件，它应该只是一个具有 vbox 布局的容器。第一项应该是您的滑块，第二项可能是另一个具有 hbox 布局的容器。使用一些自定义 CSS 将您的滑块值作为项目放在 hbox 容器下。如果您愿意，可以更进一步，也许在您的构造函数/初始化函数中向滑块添加一个侦听器，当它发生变化时，您可以使用标签执行某些操作以指示所选值。

# html - 如何处理深度嵌套的导航菜单？

> ID：15522360
> 
> 赞同：4
> 
> 时间：2013-03-14T18:07:47.793
> 
> 标签：html, css, jquery, navigation

我有一个为客户创建的应用程序，该应用程序在某些时候有 6 个导航级别。基本上我们的用户想要从导航中选择一个项目。这将导致另一组导航，这将导致另一组导航，依此类推，直到您深入了解导航属性的 6 级。

有些菜单项没有那么远，有些实际上没有子菜单。

为了使事情变得更加复杂，一些链接需要描述链接导致的报告。这里需要注意的是，一些描述长达 15 行，基本上是巨大的文本段落。

我已经尝试过悬停打开子菜单，但是当你下降到第六级时，如果你将鼠标移动得太多，你就会重新进入并再次将它们树出。

我尝试了 twitter bootstrap 中的手风琴方法，但这不起作用，因为在 6 级菜单上，大部分导航都被推离了页面。

我尝试使用 XML 填充下拉列表，基本上用户将单击链接，并且“子链接”将出现在带有下拉列表的部分视图中。这种情况一直持续到你处于最低水平。问题是我用完 6 个下拉列表和描述的屏幕空间。

有人对我可以用这样的应用程序做什么有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T18:30:54.737

**向下钻取菜单 - iPod 风格**

一个简单的解决方案是永远不要使用 CSS 样式一次显示一个或多个嵌套，您可以使用许多菜单来实现这一点，而我之前在涉及大量嵌套菜单的设计中使用的一个示例是使用 iPod菜单样式。看看[你自己](http://www.filamentgroup.com/examples/menus/ipod.php)，显示尽可能多的巢，同时保持一切易于使用，看起来也很酷。

您可以在此处在线查看源代码和其他演示：[jQuery iPod 样式和弹出菜单](http://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/)，如果您使用 WordPress，那么这已经被移植到[此处](http://www.designchemical.com/blog/index.php/wordpress-plugins/wordpress-plugin-jquery-drill-down-ipod-menu-widget/)。另外值得注意的是，您可以在页面上使用相同的许多菜单，因此当您查看演示时，是的，您会看到一个有效的下拉菜单，但是您可以在“菜单栏”中同时使用许多菜单，这非常适合这个情况。

下钻菜单的更多示例

*   [EireMedia - 深入研究](http://effinroot.eiremedia.netdna-cdn.com/repo/plugins/menu-nav/drill.down/index.html)
*   [动态驱动 - 向下钻取菜单 1.6](http://www.dynamicdrive.com/dynamicindex1/drilldownmenu.htm)
*   [Createit-PL 深入研究](http://drilldown.createit.pl/demo/index.html) *高级版*

# ios - ios中的内存泄漏，但我不知道这意味着什么？

> ID：15522364
> 
> 赞同：-3
> 
> 时间：2013-03-20T11:32:58.760
> 
> 标签：ios, memory-leaks

![在此处输入图像描述](../Images/d630d32391b878c05f87c15d9eb09300.png)

我无法从泄漏工具显示的图像中得到点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:07:38.410

仪器将在图表下方显示泄漏的下拉选项，例如调用树和泄漏。选择您喜欢的那个，然后在左侧窗格中选择泄漏，它通常会显示泄漏以及分配的东西。希望它会有所帮助，如果通过此答案左侧的复选标记帮助选择正确答案。

# r - 通过预测包模拟多个 ARIMA

> ID：15522365
> 
> 赞同：0
> 
> 时间：2013-03-20T11:32:59.517
> 
> 标签：r

我为我的 ARIMA(1,1,1) 模型做了一个 10 天的点预测，我还发现可以使用预测包模拟未来的路径。

因此，我使用以下代码来模拟 10 天的未来路径。

```
yseries <- Arima(y,order=c(1,1,1))
simyseries <- simulate(yseries,nsim=10) 
```

有没有办法用这个`simulate()`函数模拟 10 000 条未来的路径？

我的最终目标是将我的点预测与模拟路径一起绘制。

如果无法使用预测包，是否有其他包可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:53:47.653

该`replicate()`函数对于重复命令*n*次很有用（您需要*n* = 10000）。它方便地存储输出。

```
yseriesSims<-replicate(10000,simulate(yseries,nsim=10)) 
```

在这种情况下，结果是一个 10 X 10000 的模拟矩阵（即，列包含单个模拟）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:55:14.910

使用`replicate()`, 然后`matplot()`用于多图。

```
y <- ts(arima.sim(model=list(order = c(1,1,1), ar=.8,ma=.7), 100)) # Simulate data
yseries <- Arima(y,order=c(1,1,1))
simyseries <- ts(replicate(10, simulate(yseries, nsim=10)),start=end(y)+1) # Change the first parameter of replicate() to change the number os simulated paths
matplot(cbind(y,simyseries), type='l') 
```

# google-chrome - Google Chrome v27 扩展 - 重大更改？

> ID：15522367
> 
> 赞同：0
> 
> 时间：2013-03-20T11:33:02.780
> 
> 标签：google-chrome, google-chrome-extension

有谁知道 Chrome 是否在版本 27 中对扩展处理进行了重大更改？我不是指禁用的清单版本 1。

我的问题是 unsafeWindow 的模拟（访问真实网站 DOM）不再起作用，在 v27 之前这没有问题，但由于 v27 我只得到“安全”DOM，就像在沙盒窗口中一样目的。

我很久以前启用了清单版本 2，这似乎不是问题。

我的简单示例 Minifest（仅必要部分）：

```
{
    "manifest_version": 2,
    ...
    "content_scripts": [
        {
            "matches": ["xxx*", "xxx*", "xxx*"],
            "js": [
                "init.js"
            ],
            "run_at" : "document_start"
        }
    ],
    ...
} 
```

示例 init.js：自 v27 以来，脚本无法到达案例 console.log("work") 因为 unsafeWindow 中没有 jQuery 实例（来自网站的真实 dom 有它），在 v27 之前这总是有效的。

```
// emulate unsafe window as in firefox
window.unsafeWindow || (
    unsafeWindow = (function() {
        var el = document.createElement('p');
        el.setAttribute('onclick', 'return window;');
        return el.onclick();
    }())
);
var ivb = setInterval(function(){
    if(typeof unsafeWindow.$ == "undefined" || !unsafeWindow.$("body").size()) return false;
    clearInterval(ivb);
    console.log("work");
}, 20); 
```

有任何想法吗？

# ios - 未能创建本机类型“NSObject”的实例

> ID：15522371
> 
> 赞同：3
> 
> 时间：2013-03-20T11:33:14.177
> 
> 标签：ios, xamarin.ios, ios-simulator

我在执行下面的代码时收到此错误

未能创建本机类型“ **NSObject** ”的实例，可以通过将 Class.ThrowOnInitFailure 设置为 false 来忽略此条件

```
 var alert=new UIAlertView("Error","Something missing !"
                              ,new UIAlertViewDelegate(),"OK",null); 
```

我仅在最新的 iOS 6 模拟器中收到此错误。对于我的 iOS 5 设备，它按预期工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:28:36.213

This is because of a recent modification to Xamarin.iOS.

Traditionally MonoTouch has allowed managed objects to be created without a native peer. The behavior has however been inconsistent between types, and in the case of types from third-party libraries it would result in instances which would, if used, most likely crash the process with a stack overflow. So the default behavior has been changed: an exception will be thrown if a native peer cannot be created for a managed object. As the exception message also mentions this behavior is controlled by the value MonoTouch.ObjCRuntime.Class.ThrowOnInitFailure - set it to false to return to the old behavior.

In your case you get the exception because you're trying to create a UIAlertViewDelegate instance when there is no corresponding Objective-C class (since `UIAlertViewDelegate` is an Objective-C protocol, not an Objective-C class).

The solution is simple, as user1010710 already mentioned, just use `null` instead of `new UIAlertViewDelegate()`. The result is identical: in previous versions of Xamarin.iOS you would end up with a managed UIAlertViewDelegate instance whose Handle is IntPtr.Zero - and that IntPtr.Zero value would be passed to the native constructor. This is exactly what happens when you pass `null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:49:02.683

尝试这个：

```
var alert = new UIAlertView ("Error", "Something missing !", null, "OK"); 
```

# android - phonegap-facebook-plugin：仅在未安装本机 FB 应用程序时有效（Android）

> ID：15522372
> 
> 赞同：4
> 
> 时间：2013-03-20T11:33:24.153
> 
> 标签：android, facebook, cordova, phonegap-plugins

我正在使用这个插件在我的 Phonegap 应用程序中有一个 facebook-login 选项： [https](https://github.com/phonegap/phonegap-facebook-plugin) ://github.com/phonegap/phonegap-facebook-plugin 。

我已按照 Android“入门”中的所有步骤进行操作，当我在未安装官方 Facebook 应用程序的设备（模拟器和真实设备）上运行该应用程序时，一切正常。当我在安装了官方 Facebook 应用程序的设备上运行它并单击登录按钮时，会出现 Facebook 对话框并请求许可。我选择 OK，对话消失，什么也没有发生。没有出现错误或其他警报，我也没有登录。

我怎样才能解决这个问题？

的JavaScript：

```
function logout() {
    FB.logout(function(response) {
              alert('logged out');
              });
}

function logIn() {

     try {
          FB.init({ appId: "*****************", nativeInterface: CDV.FB, useCachedDialogs: false });

          } catch (e) 
          {
          alert("error");
          }

    FB.login(
             function(response) {
             if (response.authResponse) { 

              // not invoked
              alert('logged in');      

             } else {
              // not invoked
             alert('error');
             }
             },
             { scope: "email" }
             );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:55:26.840

感谢您给我提示它与 FB 应用程序设置有关：在我的情况下，此问题的原因（phonegap-facebook-plugin：仅在未安装本机 FB 应用程序（Android）时有效）是，即我没有对使用 phonegap-facebook-plugin 的 Android 应用程序进行发布签名。

在我以发布模式（使用用于生成密钥哈希的密钥库）签署我的 Android 应用程序后，即使安装了 FB 应用程序，该应用程序也能正常工作。

附注：感谢stackoverflow的所有贡献者！如果没有像这样的提示、技巧和提示，我将永远无法完成我的工作。

# c# - 如何为表创建更新触发器

> ID：15522373
> 
> 赞同：0
> 
> 时间：2013-03-20T11:33:25.163
> 
> 标签：c#, asp.net, sql, triggers

我用 C# 创建了 PC 审计应用程序。在 SQL Server Management Studio 中，我创建了数据库 Audit。在审计数据库中，我们有 4 个表名称，分别是计算机、磁盘驱动器、内存、软件、用户。我想为所有 4 个表创建更新触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:10:59.923

触发器不能延迟。它们同步运行，因为如果失败，它们必须中止整个事务。

您必须使用[SQL Server 代理](http://msdn.microsoft.com/en-us/library/ms189237.aspx)来安排 SQL 任务。

# mysql - SAS/PROC-SQL 从具有唯一键的表转换为具有相同键的多行表

> ID：15522374
> 
> 赞同：1
> 
> 时间：2013-03-20T11:33:25.230
> 
> 标签：mysql, database-design, sas, proc-sql, dimensional-modeling

目前我有一个如下表：

```
U_ID SPOUSEDOB   FCHILDDOB   SCHILDDOB   ChangeDate
1    20/01/1980  01/01/1900  01/01/1900  01/01/2000
2    20/01/1950  20/01/1970  01/01/1900  01/01/2000
3    20/01/1960  20/01/1990  20/01/1995  01/01/2000
1    20/01/1980  20/01/1995  01/01/1900  01/01/2005
1    20/01/1980  20/01/1995  20/01/2006  01/01/2010 
```

日期 01/01/1900，这意味着没有配偶/孩子。我想像下面这样转换这个表：

```
Member_ID  U_ID  Relation DOB         ChangeDate
1          1     Spouse   20/01/1980  01/01/2000
2          2     Spouse   20/01/1950  01/01/2000
3          2     Child    20/01/1970  01/01/2000
4          3     Spouse   20/01/1960  01/01/2000
5          3     Child    20/01/1990  01/01/2000
6          3     Child    20/01/1995  01/01/2000
7          1     Child    20/01/1995  01/01/2005
8          1     Child    20/01/2006  01/01/2010 
```

但是这个表仍然不能提供在特定时间 (01/01/2006) 和 (01/01/2011) 回答这个问题的最佳方法，用户 1 有几个孩子？答案是 1 和 2。而且我还发现很难从表 1 转换为表 2，我被困在如何为相同的 user_id 创建新行。关于如何改善这种情况或解决转换表问题的任何想法？非常感谢您的帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:19:14.700

这是一个简单的 SAS 数据步。您可以调整它以使用 VNAME() 来定义关系（取决于您的其他变量的命名方式）；例如，

```
relation = vname(DOBs[_t]); 
```

然后使用 SUBSTR 或其他任何东西将其缩短为正确的文本。除此之外，它应该足够灵活以处理初始 HAVE 数据集中的任意数量的关系。

```
data want;
set have;
array DOBs SPOUSEDOB   FCHILDDOB   SCHILDDOB;
do _t = 1 to dim(DOBs);
  if DOBs[_t] ne '01JAN1900'd then do;
    relation=ifc(_t=1,'Spouse','Child'); *this could also be done using VNAME() to be more flexible;
    DOB=DOBs[_t];
    output;
  end;
end;
keep relation DOB ChangeDate U_ID;
format DOB Changedate Date9.;
run;

proc sort data=want;
by u_id descending relation dob changedate;
run;

data final;
set want;
by u_id descending relation dob changedate;
if first.dob;
run; 
```

然后处理它以仅选择在某个日期出生的人，如果您更喜欢使用 SQL，您可以使用 fthiella 发布的查询，或者您可以在 SAS proc 中进行过滤，例如：

```
proc means data=final;
where dob le '01JAN2006'd;
class relation;
var (whatever);
run; 
```

或者，如果您想要过滤的不是实际的 DOB，请使用 ChangeDate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:10:10.140

这不起作用，因为我不了解您起始表中的关系。但它可能会帮助您使用普通的旧 SAS 数据步骤代码找到另一种解决方案：

```
data have;
   input U_ID SPOUSEDOB :ddmmyy10\. FCHILDDOB :ddmmyy10\.  
         SCHILDDOB :ddmmyy10\. ChangeDate :ddmmyy10.;
datalines;
1    20/01/1980  01/01/1900  01/01/1900  01/01/2000
2    20/01/1950  20/01/1970  01/01/1900  01/01/2000
3    20/01/1960  20/01/1990  20/01/1995  01/01/2000
1    20/01/1980  20/01/1995  01/01/1900  01/01/2005
1    20/01/1980  20/01/1995  20/01/2006  01/01/2010
run;
data want(keep=Member_ID U_ID Relation DOB ChangeDate);
   attrib Member_ID  length=8;
   attrib U_ID       length=8;
   attrib Relation   length=$6;
   attrib DOB        length=8 format=ddmmyy10.;
   attrib ChangeDate length=8 format=ddmmyy10.;
   retain Member_ID 0;

   set have;

   if _n_ = 1 or U_ID ne 1 then do;
      Member_ID + 1;
      Relation = 'Spouse';
      DOB = SPOUSEDOB;
      output;
      end;

   if FCHILDDOB ne mdy(1,1,1900) then do;
      Member_ID + 1;
      Relation = 'Child';
      DOB = FCHILDDOB;
      output;
      end;
   if SCHILDDOB ne mdy(1,1,1900) then do;
      Member_ID + 1;
      Relation = 'Child';
      DOB = SCHILDDOB;
      output;
      end;
  run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:49:53.170

这会将您的表格从第一种格式转换为第二种格式：

```
SELECT
  U_ID,
  'Spouse' Relation,
  Spousedob DOB,
  MIN(STR_TO_DATE(ChangeDate, '%d/%m/%Y')) ChangeDate
FROM
  yourtable
WHERE
  Spousedob != '01/01/1900'
GROUP BY U_ID
UNION ALL
SELECT
  U_ID,
  'Child' Relation,
  FCHILDDOB DOB,
  MIN(STR_TO_DATE(ChangeDate, '%d/%m/%Y')) ChangeDate
FROM
  yourtable
WHERE FCHILDDOB != '01/01/1900'
GROUP BY U_ID
UNION ALL
SELECT
  U_ID,
  'Child' Relation,
  SCHILDDOB DOB,
  MIN(STR_TO_DATE(ChangeDate, '%d/%m/%Y')) ChangeDate
FROM yourtable
WHERE SCHILDDOB != '01/01/1900'
GROUP BY U_ID
ORDER BY ChangeDate, U_ID 
```

但要回答您的问题，您可以使用以下查询：

```
SELECT (FCHILDDOB!='01/01/1900')+(SCHILDDOB!='01/01/1900')
FROM yourtable
WHERE
  (U_ID, ChangeDate) IN (
    SELECT U_ID, MAX(ChangeDate)
    FROM yourtable
    WHERE
      U_ID=1 AND MIN(STR_TO_DATE(ChangeDate, '%d/%m/%Y'))<'2011-01-01') 
```

（我正在考虑您的日期存储为 varchar，并且我正在使用 STR_TO_DATE 转换为日期）

**编辑**

您可以创建一个`yourtable2`包含列（Member_ID auto_increment、U_ID、Relation、DOB、ChangeDate）的表，然后使用以下命令插入所有`yourtable`数据`yourtable2`：

```
INSERT INTO yourtable2 (U_ID, Relation, DOB, ChangeDate)
SELECT ... --- the select query above
ORDER BY ChangeDate, DOB, U_ID 
```

然后计算您可以使用的孩子的名字：

```
SELECT COUNT(*)
FROM   yourtable2
WHERE  Relation='Child'
       AND U_ID=1
       AND ChangeDate <= '2011-01-01' 
```

请[在此处](http://sqlfiddle.com/#!2/1a83a/3)查看小提琴。

# gwt - SmartGWT 3.0 测试数据到 3.x？

> ID：15522375
> 
> 赞同：0
> 
> 时间：2013-03-20T11:33:28.230
> 
> 标签：gwt, smartgwt

在 SmartGWT **3.0**中，设置 testdata 有一个`DataClass[]`参数。一个例子是这样的：

```
public void loadUsers(List<User> params) {
    this.users = new HashMap<String, User>();

    UserDC[] items = new UserDC[params.size()];

    int i = 0;
    for(User item : params) {
        users.put(item.getUsername(), item);
        items[i] = new UserDC(item);
        i++;
    }
    setTestData(items);
} 
```

如何在 SmartGWT **3.1**中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:33:28.230

在**SmartGWT 3.1**中，DataClass[] 参数被 Record… 参数替换。我解决此问题的方法是将每个 DataClass 对象转换为 Javascript 对象并将它们收集到一个记录数组中。像这样：

```
public void loadUsers(List<User> params) {
        this.users = new HashMap<String, User>();

        Record[] items = new Record[params.size()];

        int i = 0;
        for(User item : params) {
            users.put(item.getUsername(), item);
            items[i] = new Record(new UserDC(item).getJsObj());
            i++;
        }

        setTestData(items);

    } 
```

# ajax - 无法从 Ajax 日历控件访问 Javascript

> ID：15522378
> 
> 赞同：0
> 
> 时间：2013-03-20T11:33:34.173
> 
> 标签：ajax, asp.net-ajax, ajaxcontroltoolkit

我正在使用文本框并将 Ajax 日历控件绑定到它。我需要在日历客户端点击控件上执行javascript功能，怎么可能？

```
<asp:TextBox ID="txtdate" runat="server"   Width="150px"></asp:TextBox>
<ajax:CalendarExtender ID="CalendarExtender1" TargetControlID="txtdate" runat="server" OnClientDateSelectionChanged=”function” /> 
```

我可以在不使用 OnClientDateSelectionChanged 的​​情况下查看日历，但如果放置 OnClientDateSelectionChanged，我将无法在文本框上看到日历控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:16:52.267

`function`是 JavaScript 中的保留关键字，不能用作函数的名称。用这个：

```
function calendarExtender1_DateSelectionChanged(sender, args){
    //....
}

<ajax:CalendarExtender ID="CalendarExtender1" TargetControlID="txtdate" runat="server" OnClientDateSelectionChanged=”calendarExtender1_DateSelectionChanged” /> 
```

# asp.net - 根据asp.net中其他表的选定字段从表中选择字段

> ID：15522392
> 
> 赞同：0
> 
> 时间：2013-03-20T11:34:14.840
> 
> 标签：asp.net, gridview

简而言之，我正在编写一个实现用户和组的网络应用程序。多个用户有多个组。这给我留下了三个表：用户、组、用户组。

现在我有一个网络表单，我想在其中管理组及其成员。为此，我在所述表格上有两个网格视图。一个用于显示组，另一个用于显示所选组的成员。

group-gridview 有两列：描述和另一列，其中有一个按钮字段，上面写着“显示成员”。当用户单击此按钮时，他将根据在另一个 gridview 中选择的组获得用户列表。

但是，我真的不知道该怎么做？你能指出我正确的方向吗？

这是我的代码：

```
<asp:Content ID="content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<h1>Gruppenverwaltung</h1>    
<asp:Panel ID="pnlGruppe" ScrollBars="Both" runat="server">
    <asp:Button ID="btnNeueGruppe" Text="Neue Gruppe" runat="server" OnClick="btnNeueGruppe_Click" />
    <asp:GridView DataKeyNames="GruppenID" OnRowCommand="grdGruppe_RowCommand" ID="grdGruppe" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:BoundField DataField="Bezeichnung" HeaderText="Bezeichnung" SortExpression="Bezeichnung" />
            <asp:ButtonField ButtonType="Button" CommandName="MitgliederAnzeigen" Text="Mitglieder anzeigen" />
            <asp:CommandField HeaderText="Archivieren" ButtonType="Button" ShowDeleteButton="true" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        SelectCommand="SELECT [Bezeichnung], [GruppenID] FROM [Gruppe] WHERE [Archiviert] != 1"
        DeleteCommand="UPDATE Gruppe SET [Archiviert] = 1 WHERE [GruppenID] = @GruppenID"></asp:SqlDataSource>
    <asp:Button ID="btnZurueck" Text="Zurück" runat="server" OnClick="btnZurueck_Click" />
</asp:Panel>  
<asp:Panel Visible="false"  ID="pnlMitglieder" ScrollBars="Both" runat="server">
    <asp:GridView ID="grdBenutzer" runat="server" AutoGenerateColumns="false">

    </asp:GridView>
    <asp:Button ID="Button1" Text="Zurück" runat="server" OnClick="Button1_Click" />
</asp:Panel> 
```

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["UserAuthentication"] == null)
        {
            Response.Redirect("Login.aspx");
        }
    }

    protected void btnZurueck_Click(object sender, EventArgs e)
    {
        Response.Redirect("Datenverwaltung.aspx");
    }

    protected void btnNeueGruppe_Click(object sender, EventArgs e)
    {
        Response.Redirect("NeueGruppe.aspx");
    }

    protected void grdGruppe_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "MitgliederAnzeigen")
        {
            pnlMitglieder.Visible = true;
            pnlGruppe.Visible = false;
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        pnlMitglieder.Visible = false;
        pnlGruppe.Visible = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:05:23.270

protected void grdGruppe_RowCommand（对象发送者，GridViewCommandEventArgs e）

```
 {
        if (e.CommandName == "MitgliederAnzeigen")
        {
        string rowindex = e.CommandArgument as string;//Get Row Index
         string  str = GridView1.Rows[Convert.ToInt32(rowindex)].Cells[0].Text;

           pnlMitglieder.Visible = true;
            pnlGruppe.Visible = false;
        } 
```

在 str 中获取 GroupName 后，您可以根据该绑定您的第二个网格视图，希望对您有所帮助

# php - POST/PUT 多维数组到 REST 请求中

> ID：15522393
> 
> 赞同：0
> 
> 时间：2013-03-20T11:34:26.153
> 
> 标签：php, rest, zend-framework2

我需要发送一些用户数据以通过 ZF2 REST 进行保存。我正在以 application/x-www-form-urlencoded 形式发送数据

```
username=test&first_name=test1&last_name=test2 
```

现在我需要添加一些数组数据，例如

```
array ( 0 => array('id' => 123, name => 'test' ), 1 => array('id' => 124, name => 'test1' )); 
```

现在我只对所有其他请求使用 application/x-www-form-urlencoded 所以我不喜欢除此之外的任何方法，因为这也会导致所有代码的更改。所以唯一的解决方案我正在考虑以标准 POST Array 格式发送数据，例如

```
username=test&first_name=test1&last_name=test2&fields[0][id]=123&fields[0][name]=test&fields[1][id]=124&fields[1][name]=test1 
```

我正在考虑在字段参数中发送序列化或 json 编码的字符串的其他解决方案。但正在寻找更好的解决方案。

# ios - iOS 获取 UIWebView 标题并检查它是否包含字符串，但 if 只出现一次

> ID：15522396
> 
> 赞同：1
> 
> 时间：2013-03-20T11:34:39.723
> 
> 标签：ios, objective-c, xcode, uiwebview, uiwebviewdelegate

好的，下面的代码获取加载到 UIWebView 中的页面的标题，然后检查标题是否包含单词“table”。如果是，则它会取消隐藏工具栏。如果没有，则隐藏工具栏。这首先在标题中没有“表格”的页面加载时工作正常，当您浏览到标题中确实有“表格”的页面时，它会显示工具栏。当您返回标题中没有“表格”的页面时会出现问题，新标题出现在 NSLog 中，但工具栏没有消失。

```
NSString * webtitle = [viewWeb stringByEvaluatingJavaScriptFromString:@"document.title"];
NSLog(@"Title is: %@", webtitle);
if ([webtitle rangeOfString:@"Table"].location == NSNotFound) {
    [toolbar setHidden:YES];
} else {
    [toolbar setHidden:NO];
} 
```

任何帮助表示赞赏。

谢谢！

编辑：我应该说我正在执行这个

```
 - (void)webViewDidFinishLoad:(UIWebView *)wv
  {
  } 
```

编辑 2：我现在添加了 NSLogs 以在 if 运行时触发：

```
if ([webtitle rangeOfString:@"Table"].location == NSNotFound) {
    NSLog(@"Hidden");
    [toolbar setHidden:YES];
} else {
    NSLog(@"Not Hidden");
    [toolbar setHidden:NO];
} 
```

当您浏览到没有“表格”的页面时返回“隐藏”，但工具栏仍然显示，因此看起来像 [toolbar setHidden:YES]; 由于某种原因无法正常工作。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:57:52.440

与许多人的预期相反，`webViewDidFinishLoad:`在页面实际完成加载之前可能会被调用多次。实际上，每次 webview 完成加载帧时都会调用它。从[文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html)中：

> ```
> webViewDidFinishLoad:
> Sent after a web view finishes loading a frame. 
> ```

话虽如此，请尝试使用断点进行调试。将一个断点添加到该`[toolbar setHidden:YES];`行并添加另一个断点，`[toolbar setHidden:NO];`然后找出最后调用的断点。我猜这可能是第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:09:30.083

我不确定您是在 webview 中还是在视图控制器中导航。

如果您在视图控制器中导航，那么您还可以在

```
 -(void)viewWillAppear {
 } 
```

或者

```
 -(void)viewDidAppear {
 } 
```

当您返回页面时

如果您在 Web 视图中导航 - 单击链接等，您可能需要子类化 UIWebView 并覆盖以下方法并检查其中的标题：

```
 -(void)goBack {
     [super goBack];
      //perform check here
 }

 -(void)goForward {
 } 
```

希望有帮助

# c - 如何在文件中写入完整的结构？

> ID：15522401
> 
> 赞同：-2
> 
> 时间：2013-03-20T11:34:58.213
> 
> 标签：c

在我的程序中，我从键盘接收输入。我将该输入放在`struct`包含两个`char`字段和 1 个`int`字段的 a 中。如何`struct`仅使用一个函数写入整个内容？

我**不想**单独写给每个成员`struct`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:38:55.357

C没有“指令”。

您应该能够使用单个函数调用，例如：

```
fwrite(&mystructure, sizeof mystructure, 1, myfile); 
```

但这并非没有缺点：

1.  这使得文件格式取决于您当前的 CPU 和编译器，这通常是个坏主意；这将使保持互操作性变得非常困难。
2.  写入可能部分成功；对于这种情况，您需要将其包装在一个循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:23:24.550

这取决于您`struct`的定义方式，您是否希望您的输出是人类可读的，以及输出文件是否打算在不同的体系结构上读取。

`fwrite`其他人给出的解决方案是将结构的*二进制表示*写入输出文件。例如，给定以下代码：

```
#include <stdio.h>

int main(void)
{
  struct foo {
    int x;
    char name1[10];
    char name2[10];
  } items[] = {{1,"one","ONE"}, {2,"two","TWO"}};

  FILE *output = fopen("binio.dat", "w");

  fwrite( items, sizeof items, 1, output );

  fclose( output );
  return 0;
} 
```

如果我将内容显示`binio.dat`到控制台，我会得到以下信息：

```
john@marvin:~/Development/Prototypes/C/binio$ cat binio.dat
oneONEtwoTWOjohn@marvin:~/Development/Prototypes/C/binio$

john@marvin:~/Development/Prototypes/C/binio$ od -c binio.dat
0000000 001 \0 \0 \0 一 \0 \0 \0 \0 \0 \0 \0 开
0000020 E \0 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0
0000040 \0 \0 \0 \0 002 \0 \0 \0 二\0 \0 \0 \0 \0
0000060 \0 \0 二 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0 \0
0000100 \0 \0 \0 \0 \0 \0 \0 \0
0000110

```

整数值显示为垃圾（上面未复制），因为它们已存储为字节序列 01, 00, 00, 00 和 02, 00, 00, 00（x86 是 little-endian），它们不是可打印字符. 另请注意，所有 10 个字符`name1`和所有 20 个字符`name2`都写入文件，这可能是您想要的，也可能不是。

如果您的结构包含指针，情况会变得更加复杂，因为存储到文件中的是指针值，而不是指向的内容：

```
#include <stdio.h>

int main(void)
{
  struct foo {
    int x;
    char *name1;
    char *name2;
  } items[] = {{1,"one","ONE"}, {2,"two","TWO"}};

  FILE *output = fopen("binio.dat", "w");

  fwrite( items, sizeof items, 1, output );

  fclose( output );
  return 0;
} 
```

这次我得到

```
john@marvin:~/Development/Prototypes/C/binio$ cat binio.dat
��������john@marvin:~/Development/Prototypes/C/binio$

john@marvin:~/Development/Prototypes/C/binio$ od -c binio.dat
0000000 001 \0 \0 \0 260 205 004 \b 264 205 004 \b 002 \0 \0 \0
0000020 270 205 004 \b 274 205 004 \b
0000030

```

请注意，文件中根本没有出现任何字符串；如果你用不同的程序读入这个文件，它所看到的只是（很可能）无效地址。

如果您希望您的输出是人类可读的*并且*您希望能够在不同的架构上读取这些值，您几乎必须使用格式化输出，这意味着您必须分别编写每个成员：

```
#include <stdio.h>

int main(void)
{
  struct foo {
    int x;
    char *name1;
    char *name2;
  } items[] = {{1,"one","ONE"}, {2,"two","TWO"}};

  FILE *output = fopen("binio.dat", "w");
  int i;
  for (i = 0; i < sizeof items / sizeof items[0]; i++)
  {
    fprintf(output, "%d %s %s\n", items[i].x, items[i].name1, items[i].name2);
  }
  fclose( output );
  return 0;
} 
```

```
john@marvin:~/Development/Prototypes/C/binio$ cat binio.dat
一一一
2 二 二

```

您当然可以将该操作包装在您自己的函数中，例如

```
int printFoo( FILE *output, const struct foo item )
{
  return fprintf( output, "%d %s %s\n", item.x, item.name1, item.name2);
} 
```

但最后，这很简单。

如果您不关心可读性和可移植性，该`fwrite`解决方案效果很好，但如果结构中有任何指针成员，您仍然必须小心。

# servicestack - 使用现有的 Poco 作为 ServiceStack DTO

> ID：15522407
> 
> 赞同：2
> 
> 时间：2013-03-20T11:35:06.057
> 
> 标签：servicestack

我喜欢使用新的 api i ServiceStack，并且在我喜欢保持不变的遗留项目中有一些 Pocos。但是，在我的 ServiceStack 项目中将它们复制到 Dto 感觉有点不妥。我可以偷懒并以某种方式将属性“传递”给我的遗留 pocos 吗？

这适用于 JsonServiceClient，但为 json 添加了一个额外的级别，我不喜欢：

```
[Route("/legacytype", "POST,OPTIONS")]
public class RequestLegacyTypePost : IReturn<int>
{
    public LegacyTypeLegacyType{ get; set; }
}

public class LegacyTypeService : Service
{
    public object Post(RequestLegacyTypePost request)
    {
        return db.Insert(request.LegacyType);
    }
} 
```

将属性复制粘贴到 DTO 方式自然可以正常工作：

```
[Route("/legacytype", "POST,OPTIONS")]
public class RequestLegacyTypePost : IReturn<int>
{
    public int Id { get; set; }
    public string SomeProp { get; set; }
    public string OtherProp { get; set; }
} 
```

也许这就是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:33:01.080

ServiceStack 允许您重新使用任何现有的 Poco 作为请求 DTO，如果您不想修改现有的遗留 dll，那么您可以在 AppHost.Configure() 中使用 Fluent API 以非侵入方式添加路由：

```
Routes
    .Add<LegacyTypeLegacyType>("/legacytype", "POST,OPTIONS"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:23:58.817

您还可以将模型继承到自定义 DTO 中，例如：

```
[Route("/legacytype", "POST,OPTIONS")]
RequestLegacyTypeDTO : LegacyType, IReturn<int> { } 
```

这将使您可以访问原始`LegacyType`模型的所有属性而无需更改它。

# c# - 重定向输出的编码无效

> ID：15522408
> 
> 赞同：0
> 
> 时间：2013-03-20T11:35:07.170
> 
> 标签：c#, .net, encoding

操作系统 Windows，C#。我的输出编码有问题。

```
App.Document doc = cad.DocumentManager.MdiActiveDocument;
if (doc != null)
    doc.Editor.WriteMessage("\nProcess started. Please, wait...\n");
String exeName = Path.Combine(curDir, "recovery");
Process proc = new Process();            
ProcessStartInfo info = new ProcessStartInfo();
info.CreateNoWindow = true;
info.RedirectStandardOutput = true;
info.UseShellExecute = false;
// info.StandardOutputEncoding = Encoding.GetEncoding(1251);
info.StandardOutputEncoding = Console.OutputEncoding;
info.FileName = exeName;
info.Arguments = String.Format("{0} -clear", @"%zipDir%\acad_R17.2.zip");
proc.StartInfo = info;
proc.Start();
String outputText = proc.StandardOutput.ReadToEnd();
proc.WaitForExit();
if (doc != null) {
    doc.Editor.WriteMessage(outputText);
    doc.Editor.WriteMessage(Environment.NewLine);                
    doc.Editor.WriteMessage("Operation is complete.");
    doc.Editor.WriteMessage(Environment.NewLine);
} 
```

输出结果：

> 恢复; (c) 安德烈·布什曼，2013
> 
> ЋЎа Ў®вЄ Є в «®Ј "%acad_R17.2%"。ќ«Ґ¬Ґв: AutoCAD 2009/; –Ґ«Ґў®© Є в «®Ј: C:\Program Files\Autodesk; ЋиЁЎЄ :​​ ЋвЄ § ® ў ¤®бвгЇҐ Ї® ЇгвЁ "acad.CUI"。ЋЎа Ў®вЄ Є в «®Ј "%rmb_acad_R17.2%"。ЋЎа Ў®вЄ Є в «®Ј "%local_acad_R17.2%"。ЋЎа Ў®вЄ Є в «®Ј "%allUsers_acad_R17.2%"。ЋЎа Ў®вЄ Є в «®Ј "%shared_acad_R17.2%"。ќ«Ґ¬Ґв：欧特克共享/；–Ґ«Ґў®© Є в «®Ј: C:\Program Files\Common Files; ЋиЁЎЄ :​​ ЋвЄ § ® ў ¤®бвгЇҐ Ї® ЇгвЁ "C:\Program Files\Common Files\Autodesk Shared\"。ЋЎа Ў®вЄ Є в «®Ј "%ext_acad_R17.2%"。

但是如果我通过 cmd.exe 启动 recovery.exe，在控制台中我会看到正确的文本。如何通过我的代码获取有效文本？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:13:27.917

我找到了答案。两种变体：

1.  [获取OEMCP](http://www.pinvoke.net/default.aspx/kernel32.getoemcp)
2.  [CultureInfo.CurrentCulture.TextInfo.OEMCodePage](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.oemcodepage.aspx)

两者都工作正常。

# json - Using Gson deserilization with arbitrary class type

> ID：15522411
> 
> 赞同：0
> 
> 时间：2013-03-20T11:35:17.180
> 
> 标签：json, list, casting, gson

I use a REST service that responds in json with messages like this:

```
{
   "statusMessage":{
      "message":"my message",
      "error":false
   },
   "data":null
} 
```

Field `data` is an array, sometimes null, sometimes fill with instances of one class (like Partner, Department, Building,... only one type of them).

In my Java app, I have a `ServerResponse` class and it looks like:

```
public class ServerResponse {

    private StatusMessage statusMessage;
    private List<Object> data;

    public ServerResponse(StatusMessage statusMessage, List<Object> data) {
        this.statusMessage = statusMessage;
        this.data = data;
    }
    ...
} 
```

When `data` is null, there is no problem, but when it fills with some objects, I don't know how to deserialize it. If I use:

`response = gson.fromJson(result, ServerResponse.class);`

I can't cast or use the list of objects in `data`. Furthermore, if I declare the field data in Java like this:

```
private List<Department> data; 
```

It works fine with `Department` type, but, as might be expected, throws error with others types. I'm stuck...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T22:36:10.350

如果您不指定类型`data`，即您`List<Object>`现在使用，您将至少获得一个地图列表（并且地图可以再次包含列表或地图，具体取决于内容）。

如果您可以通过内容来区分对象的类型，您可以编写一个简单的自定义反序列化器，就像[在这里](https://stackoverflow.com/questions/19588020/gson-serialize-a-list-of-polymorphic-objects/19600090#19600090)询问的那样（检查`isA`字段）

# c# - 为什么 "K".Length 给我错误的结果？

> ID：15522413
> 
> 赞同：10
> 
> 时间：2013-03-20T11:35:23.263
> 
> 标签：c#, string, string-length

我看到了这个奇怪的问题，并且在网络上的任何地方都找不到类似的东西：

```
int l = "K".Length;    //This actually returns 2 !!! The 'Autos' window in
                       //the debugger also shows "K".Length as 2.

string s = "K";
l = s.Length;          //Whereas this returns 1 as expected 
```

我在各种 C# 项目中尝试过这个，甚至要求另一个开发人员确认在不同机器上的不同项目中的行为是相同的。

我在 VB.NET 中尝试了同样的方法：

```
Dim l As Integer = "K".Length    'This returns 1 correctly 
```

我会失去它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T11:40:04.040

这是因为“K”与“K”不同，其中有一个不可见的字符，即 ascii 值 30（记录分隔符）。

您可以通过这样做来验证这一点

```
byte[] bytes = Encoding.ASCII.GetBytes("K"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T11:41:01.657

您的“K”实际上包含两个字符。一个“K”和另一个 unicode 不可见符号。当我输入清楚`"-K-"`时它显示1，当我复制粘贴你的代码时，它是2。粘贴两次它会是4。

# javascript - IE8 Call javascript function from variable

> ID：15522414
> 
> 赞同：1
> 
> 时间：2013-03-20T11:35:26.577
> 
> 标签：javascript, jquery

I am using below code to call function.

```
 window['GetTeenovationvideo'](); 
```

This function is executing in all browser but not in IE8.

In IE8 i am getting below error.

> Object doesn't support property or method 'GetTeenovationvideo'

Am i doing something wrong? Or is there any alternative way to do this.

# android - Android API 演示 - ICS - RotatingButton

> ID：15522415
> 
> 赞同：8
> 
> 时间：2013-03-20T11:35:27.857
> 
> 标签：android, animation

我是 android 开发的新手，目前我正在通过`RotatingButton`ApiDemos 项目 API 级别 14 中的文件来研究 3D 动画。在这个演示中，一个按钮由不同的动画制作动画，这是 ICS 级别的按钮控件中的默认设置。

[链接在这里。](http://www.edumobile.org/android/android-development/rotating-button-example-in-android/)

我可以在 ICS 级别以下进行平移、缩放和 2D 旋转等动画，但我不知道如何提供以下链接演示中给出的 3D 旋转动画。

我什至尝试了[3D ActivitySwitcher](http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher/)演示，但没有得到如何将此动画分配给控制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T05:19:13.100

我认为android 中的[Rotatory wheel](https://stackoverflow.com/questions/10222730/how-to-create-a-rotating-wheel-control)为您提供了创建此类小部件的完美想法。它对我也有帮助。还要检查[这个例子](https://github.com/VadimDev/android-seekbar-like-ipod-clickwheel)。

还要检查[这个](http://code.google.com/p/radial-menu-widget/)。

# c# - Find the methods setup on mock using MOQ

> ID：15522416
> 
> 赞同：6
> 
> 时间：2013-03-20T11:35:28.450
> 
> 标签：c#, moq

Is there any way to list all the mocked methods (Setups) on a Mock?

Lets say, I create mock as following:

```
Mock<IAnInterface> aMock = new Mock<IAnInterface>();
aMock.Setup(am => am.Execute()).Returns(true); 
```

Now, i need to find if `Execute` has been setup on `aMock`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-12-15T17:52:09.690

Mock<> 类型将有一个名为“Setups”的私有 Moq.SetupCollection。而 Moq.SetupCollection 有一个名为“setups”的私有 List<Moq.Setup>。

[调试时易于检查](https://i.stack.imgur.com/G7Gdm.png)

或者你可以通过反射来做到这一点：

```
var bindings = BindingFlags.Instance | BindingFlags.NonPublic;
var setupCollectionProperty = Mapper.GetType().GetProperty("Setups", bindings);
var setupCollection = setupCollectionProperty.GetValue(Mapper);
var setupList = setupCollection.GetType().GetField("setups", bindings);
var setups = setupList.GetValue(setupCollection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:21:45.790

我不知道询问 MOQ（以编程方式）关于配置了哪些设置的方式，但是，运行 MOQ 4.0，它确实在测试失败的详细信息中列出了哪些设置已配置。
![最小起订量报告配置设置](../Images/fe7efbc1bf0f0e2a04c46f258e23d377.png)

# utf-8 - Uploading UTF-8 strings into Vertica

> ID：15522418
> 
> 赞同：0
> 
> 时间：2013-03-20T11:35:34.810
> 
> 标签：utf-8, vertica, data-import

I am trying to upload some UTF-8 strings into Vertica database using it's COPY command triggered by Vertica client (VSQL tool). Unfortunatelly, from Vertica docs:

> The drivers do not transform data loaded by executing a COPY or COPY LOCAL statement.

Data I am importing looks like this

```
\u00DCser entered \\t and \\n and \\r and \u0161 \u0111 \u017E \u010D \u0107 \u0160 \u0110 \u017D \u010C \u0106 \u00FC \u00F6 \u00E4 \u00DC \u00D6 \u00C4 
```

This is just a set of some characters and represents one string being imported. Does anyone has any idea how to do this? Of course, there is an option of some sed-awk magic before triggering COPY command, if needed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:30:27.340

看起来您的数据不是 utf-8 格式，而是某种 unicode 点可打印格式。检查您的提取过程并确保您的数据采用 utf-8 格式并且可以正常加载（字符数据在 vertica 中*必须*采用 utf-8 格式）。

# django - passing values between views django

> ID：15522419
> 
> 赞同：1
> 
> 时间：2013-03-20T11:35:35.327
> 
> 标签：django, django-forms, django-views

I want to pass value from one form to another but i am not using form wizard. my views:

```
def main_page(request):
    #if request.method == 'POST':
    #form = jobpostForm_first()
   # if request.method == 'POST':
    if request.method == 'POST':
       #if '_Submit'in request.POST:
            #if (form.data['post_type']=='Job'):
            form = jobpostForm_first(request.POST)
            if (form.data['post_type']=='Job'):

               #if form.is_valid():
                    #form.save()
                    return render_to_response('portal/job_post.html',{'form':form},context_instance=RequestContext(request))
            #else:
             #   return HttpResponseRedirect('/accounts/login/')

    else:
            form = jobpostForm_first()

    c = {}
    c.update(csrf(request))

    return render_to_response('portal/job_post.html',{'form':form},context_instance=RequestContext(request))

def next(request):
    #post_type= request.GET.get('post_type')

    if request.POST['post_type']=='Job': # here it is giving me exception "Key 'post_type' not found in <QueryDict: {}>"
       if request.method == 'POST':
            form = jobpostForm(request.POST)
            if form.is_valid():
                    form.save()

                    return HttpResponseRedirect('/thanks/')
       else:
            form = jobpostForm()
    else:
       return HttpResponseRedirect('/accounts/login/')

    c = {}
    c.update(csrf(request))

    return render_to_response('portal/job_post.html',{'form':form},context_instance=RequestContext(request)) 
```

I want pass the post_type to 2nd form.and on its basis i want to show other form. Can anyone tell me how can i do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:55:00.087

```
def main_page(request):
    form = jobpostForm_first()

    if request.method == 'POST':
        form = jobpostForm_first(request.POST)
        if form.is_valid():
            post_type = form.cleaned_data['post_type']
            if post_type == 'Job':
                request.session['post_type'] = post_type
                return HttpResponseRedirect('/next/') //---> Is this the correct url for next?

    c = {}
    c.update(csrf(request))

    return render_to_response('portal/job_post.html',{
        'form':form
    },context_instance=RequestContext(request))

def next(request):
    if request.session.get('post_type') == 'Job': 
       if request.method == 'POST':
            form = jobpostForm(request.POST)
            if form.is_valid():
                form.save()
                return HttpResponseRedirect('/thanks/')
       else:
            form = jobpostForm()
    else:
       return HttpResponseRedirect('/accounts/login/')

    c = {}
    c.update(csrf(request))

    return render_to_response('portal/job_post.html',{
        'form':form
    },context_instance=RequestContext(request)) 
```

# java - Java冒泡排序不起作用

> ID：15522420
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:35:38.467
> 
> 标签：java, arrays, sorting, menu

有人可以帮我让这个冒泡排序工作吗？我是一名 Java 初学者，之前从未使用过排序或数组。我还需要使用菜单中的 if 语句对其进行初始化。

冒泡排序法：

```
private void sort(int grade, Student[] students) {

    int temp = 0; // temporary holding area for swap
    int i, j;

    if (students.length < 2) {return;}
    // Loop through length of the array
    for (Student student : students) {
    for (i = 0; i < students.length; i++ ) {
    // Check to see if there is anything smaller and replace
        for ( j = i+1; j < students.length - 1; j++) {
            if (student[i] > student[j])
            {
                temp = student[i];
                student[i] = student[j];
                student[j] = temp; 
```

到目前为止的菜单：（需要添加选项 7 才能使冒泡排序起作用？？）

```
public static void UserSelection(Scanner input, int numStudents,
            Student[] students) {
        // Repeatedly process menu selections by the user.
        int choice;
        do {
            System.out.println();
            System.out.println("*** Student Exam Results Menu ***");
            System.out.println("(1) Display the results");
            System.out.println("(2) Display the average result");
            System.out.println("(3) Display the highest grade");
            System.out.println("(4) Display the lowest grade");
            System.out.println("(5) Search for specific result");
            System.out.println("(6) Search for student grade by name");
            System.out.println("(7) Sort the results in ascending order");
            System.out.println("(8) quit");
            choice = input.nextInt();

            if (choice == 1)
            {
                System.out.println(Arrays.toString(students));
            } else if (choice == 2)

            {
                double average = getAverage(students);
                System.out.println("average grade = " + average);
            } else if (choice == 3)

            {
                int high = getHighest(students);
                System.out.println("high grade = " + high);
            } else if (choice == 4)

            {
                int low = getLowest(students);
                System.out.println("low grade = " + low);

            } else if (choice == 5)

            {
                System.out.print("Result to look for: ");
                int grade = input.nextInt();
                 if (result(grade, students)) {
                 System.out.println(grade +
                 " is in the collection of grades.");
                 } else

                 {
                 System.out.println(grade +
                 " is not in the collection of grades.");
                 }

            } else if (choice == 6)

            {
                System.out.print("Student to search for: ");
                String name = input.nextLine();
                if (search(name, students) ==null)
                {
                    System.out.println(name +
                    " is in the list of Students.");
                } else
                {
                System.out.println(name +
                " is not in the list of Students");
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:42:50.930

该类`Strudent`应实现`Comparable`. 该`compareTo`方法的实现只比较`name`属性，如果您需要比较其他属性，您应该将它们类似地包含在该方法中。

```
public class Student implements Comparable<Student> {
  private String name;
  private int grade;
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
  public int getGrade() {
    return grade;
  }
  public void setGrade(int grade) {
    this.grade = grade;
  }
  public int compareTo(Student o) {
    return this.getName().compareTo(o.getName());
  }
} 
```

实现排序使用

```
 //Sort
  public static void sort(Student[] students)
  {
    int j;
    boolean flag = true; // set flag to true to begin first pass
    Student temp;  //holding variable

    while (flag)
    {
      flag = false; //set flag to false awaiting a possible swap
      for (j = 0; j < students.length -1; j++)
      {
        if (students[j].compareTo(students[j+1]) < 0) // change to > for ascending sort
        {
          temp = students[j];  //swap elements
          students[j] = students[j+1];
          students[j+1] = temp;
          flag = true;  //shows a swap occurred 
        }
      }
    }
  } 
```

# extjs - Reader root in ExtJS with nested JSON array

> ID：15522423
> 
> 赞同：1
> 
> 时间：2013-03-20T11:35:47.997
> 
> 标签：extjs, grid

I'm trying to fill the grid with part of data i'm taking from JSON. For example (shortnen version), JSON looks like this:

```
 {
  "data": [
    {
      "name": "machine1",
      "devices": {
        "disk": [
          {
            "type": "file",
            "device": "disk",
          },
          {
            "type": "block",
            "device": "cdrom",
          }
        ],
      },
    },
    {
      "name": "machine2",
      "devices": {
        "disk": [
          {
            "type": "file",
            "device": "disk",
          },
          {
            "type": "block",
            "device": "cdrom",
          }
        ],
    },
  ]
} 
```

To get info about `machine1`'s disks i need to get to `data[0].devices.disk`, so i thought about changing `store.proxy.reader.root` property like `root = 'data[0].devices.disk'` or `root = 'data.0.devices.disk'` but both didn't work. I know the easiest way is to change the JSON response, but i'm interested if i am able to fill the grid without changing the JSON.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:41:51.720

使用 'data[0].devices.disk' 对我有用。尽管有一些尾随逗号，但您的示例 JSON 有点混乱。

[jsFiddle](http://jsfiddle.net/gWzBd/)

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: ['type', 'device']
});

Ext.onReady(function() {
    var myData = '{"data":[{"name":"machine1","devices":{"disk":[{"type":"file","device":"disk"},{"type":"block","device":"cdrom"}]}},{"name":"machine2","devices":{"disk":[{"type":"file","device":"disk"},{"type":"block","device":"cdrom"}]}}]}';

    var store = Ext.create('Ext.data.Store', {
        model: 'User',
        data: Ext.decode(myData),
        proxy: {
            type:'memory',
            reader: {
                type:'json',
                root: 'data[0].devices.disk'
            }
        }
    });

    Ext.create('Ext.grid.Panel', {
        store: store,
        stateful: true,
        collapsible: true,
        multiSelect: true,
        stateId: 'stateGrid',
        columns: [
            {
                text     : 'type',
                dataIndex: 'type'
            },
            {
                text     : 'device',
                dataIndex: 'device'
            }
        ],
        height: 350,
        width: 600,
        title: 'Array Grid',
        renderTo: 'grid',
        viewConfig: {
            stripeRows: true,
            enableTextSelection: true
        }
    });
}); 
```

# c++ - 在 UI 线程上运行代码

> ID：15522430
> 
> 赞同：0
> 
> 时间：2013-03-20T11:36:04.843
> 
> 标签：c++, winapi, asynchronous

我需要提交代码以在执行消息泵送的线程中运行，**而无需**定义多个自定义消息。
像 Java 之类的东西`SwingUtilities.invokeLater()`（注意：我已经有一个允许 lambda 可回调的实用程序）

我已经尝试过`::SendMessageCallback & SendAsyncProc`，但是回调是由同一个发送者线程在调用时调用`::GetMessage`的（这是该 api 的要求......）

ATM 我的替代方法是定义一个自定义消息（即 WM_USER_EXECUTE），将回调传递给它，但这需要所有目标都准备好接收该消息！我更喜欢更通用的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:15:31.350

将 GetMessage 调用替换为对 MsgWaitForMultipleObjectsEx() API 的调用。这是很多打字，但它应该工作......

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms684245%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684245%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:01:50.310

最后我找到了一种方法来获得我需要的东西，所以我把我的解决方案留给了别人。

1.  获取一个安全的消息 ID `RegisterWindowMessage()`（可能是偏执狂，但该机制对于目标来说是完全透明的..）
2.  从其 HWND 获取目标窗口的线程 id`GetWindowThreadProcessId`
3.  安装一个带有`::SetWindowsHookEx`参数化的钩子`WH_CALLWNDPROC`
4.  在钩子例程中忽略除我们的特殊消息之外的所有消息。
    找到该 MSG 后，运行 wParam 携带的回调
5.  `SendMessage`通过传递特殊的 MSG id 和包含要执行的代码的例程的指针来触发整个事情

一切都可以封装在一个函数中并用作 invokeOnWndProc(HWND, lambda_Callback)

优点：代码在 UI 线程中运行，完全透明，同步行为！
缺点：相当重量级..

# cron - 如果 cron 计划是 1 分钟而 cron 运行时间是 10 分钟，会发生什么？

> ID：15522433
> 
> 赞同：2
> 
> 时间：2013-03-20T11:36:12.313
> 
> 标签：cron

如果 cron 计划是每 1 分钟一次，但 cron 时间的长度是 10 分钟，会发生什么？

```
cron:
- description: test for cron length of 10 min
  url: /test
  schedule: every 1 minutes 
```

第一次测试在 00:00:00 调用，它将在 00:10:00 结束

第二次测试在 00:01:00 调用，它将在 00:11:00 结束

……

那会发生吗？还是只有在第一个测试工作完成后才调用第二个测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:51:02.357

是的，这就是将要发生的事情，无论该进程的执行时间如何，您的 cron 都会每分钟运行一次该进程。如果您想避免并发，请在您的进程中使用信号量系统 ( [http://en.wikipedia.org/wiki/Semaphore_%28programming%29](http://en.wikipedia.org/wiki/Semaphore_%28programming%29) )。一个简单的实现将包括进程检查信号量文件、检查该文件的最后修改时间或检查该文件中包含的 PID 是否仍在运行，从而决定您的进程是应该运行还是直接退出。更好的实现（如果您不关心与操作系统无关）将使用[flock(1)](http://linux.die.net/man/1/flock)获取文件锁定并在每次执行脚本时检查该锁定：

```
 #!/bin/bash
    # Exit on unchecked errors (can't acquire exclusive lock)
    set -e

    (
    # Wait for lock on /var/lock/.script.xlock (file descriptor 200)
    flock -x 200

    # Your code

    ) 200>/var/lock/.script.xlock #Associate file descriptor 200 with file 
```

# r - 在 R 中重命名音乐文件

> ID：15522434
> 
> 赞同：2
> 
> 时间：2013-03-20T11:36:14.690
> 
> 标签：r, file-rename

我正在尝试重命名一些（179）个名称遵循模式的文件：

```
"104-jacques_brel-le_diable_(ca_va)-just.mp3 TEST"
...
"1517-jacques_brel-la_cathedrale-just.mp3 TEST" 
```

针对如下输出：

```
"Le diable (ca va).mp3"
...
"La cathedrale.mp3" 
```

问题是我只知道 paste() 命令......所以我可以成功（并且愚蠢地）使用以下方法将 TEST 添加到名称中：

```
filenames <- list.files()
   filenames[180:181] 
   filenames <- filenames[-c(180:181)]

   files_4dgts<-filenames[c(1:14,21:30,35:80)]
   files_3dgts<-filenames[-c(1:14,21:30,35:80)]

   for (i in 1:length(files_3dgts))
   file.rename(files_3dgts[i],paste(files_3dgts[i],"TEST",sep=""))

   for (i in 1:length(files_4dgts))
   file.rename(files_4dgts[i],paste(files_4dgts[i],"TEST",sep="")) 
```

这显然不是我的问题的任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:49:56.973

```
music <- c("104-jacques_brel-le_diable_(ca_va)-just.mp3 TEST", 
           "1517-jacques_brel-la_cathedrale-just.mp3 TEST")

# Remove all the digits and irrelevant words
musicwipe <- gsub("[[:digit:]]*-jacques_brel-|-just| TEST", "", music)
# Replace all underscores with spaces
musicspace <- gsub("_", " ", musicwipe)
# Replace first letter with uppercase letter
musicupper <- sub("^([[:alpha:]])", "\\U\\1", musicspace, perl=TRUE)

#Result
musicupper
[1] "Le diable (ca va).mp3" "La cathedrale.mp3" 
```

# jquery - jQuery syntax to animate translateZ

> ID：15522438
> 
> 赞同：1
> 
> 时间：2013-03-20T11:36:28.813
> 
> 标签：jquery, jquery-animate

I've got a div set up with a CSS `.scroller` class:

```
.scroller {
    position: relative;
    perspective: 150;
    -webkit-perspective: 150;
} 
```

It contains divs that have their `translateZ` properties set by jQuery, simulating depth. That all works fine.

What I'd like to do now is animate the Z property from one value to another, but I can't seem to find the right syntax. I keep getting a 'Unexpected Identifier' error in the console. Amongst various combinations of speech marks and apostrophes, here is what I've tried:

```
$('#artist' + scrollerCounter).animate({-webkit-transform: translateZ(-40px), transform: translateZ(-40px)}, 1000); 
```

Is it even possible to `.animate` the `translateZ` property?

# java - how to identify corresponding html object using label using java

> ID：15522439
> 
> 赞同：0
> 
> 时间：2013-03-20T11:36:31.600
> 
> 标签：java, jsoup

I have html file and I have the label name now I need to identify the html object. Can you please help me to identify the object. I am using jsoup to parase, I could not attaching the screen shot,

The page has top row with label below are html object

program, study, study status, study manager (all are labels and below html obj)

text box dropdown, drop down, text box (html objec)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:45:44.337

使用 HTML 时，需要注意 HTML 元素的结构，而不是它们在屏幕上的呈现方式。在您的情况下，您需要找到一种方法来识别您*在 HTML 代码中*寻找的元素，然后使用其中一种`Document#getElement(s|)By(.+)`方法找到它。

# php - 为使用它们的函数验证 $_POST 变量

> ID：15522440
> 
> 赞同：0
> 
> 时间：2013-03-20T11:36:32.830
> 
> 标签：php, post

我的许多获取用户数据的函数都是通过 post 而不是 GET 接收它们，即在 url 中传递它们，例如“class/method/param1/param2”。

我想知道创建一个在处理 POST 数据的函数中首先调用的静态函数是否是个好主意？IE：

```
public function myMethod()
{
    Util::validatePost();
}

...

public static function validatePost()
{
    foreach($_POST as $param => $value){
      // Do some validation stuff...
    }
}
... 
```

一个示例规则是，任何具有包含“id”的键名的 POST 变量必须是数字，如果是其他任何内容，则失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:38:53.077

许多 PHP 框架都是这样做的（Symfony2 只是一个例子）。

他们使用一些验证规则和输入转义工具来验证用户输入，所以，是的，不要相信用户发送给你的所有内容，而是尽你所能来验证输入。

此外，一个静态函数（或多个静态函数）将与单个（或多个）表单相结合。我建议您为需要验证的每个表单（或一般数据）实现特定功能

# 请注意

不要相信 HTML5 或 JavaScript 约束，因为它们很容易被绕过。正如我在评论中建议的那样，在“最后一步”控制用户输入（即，将数据与模型或表单绑定，或其他）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:40:36.777

我认为这不是一个好主意，原因有很多，例如：

*   它在代码和错误空间和调试痛苦之间产生了强烈的依赖关系。
*   特别是 php 在类型转换方面很棘手。请记住，每个 post 变量最初都是作为字符串到达​​的。还
*   所需的验证类型始终取决于使用情况。如果你突然在某个地方有字符串 ID 怎么办？

当然，可以进行一些验证。例如 PHP 模块 suhosin (AKA hardened php) 是为了防止攻击。

但是，根据我的经验，在处理用户数据时清理用户数据是一种很好的做法。

例如，我总是将引用应用于我在数据库查询中使用的数据。Alawys，就在查询构建之前。

首先，我从不依赖数据来保证安全。

在任何情况下，您也不应该相信外部来源提供的任何数据。

当你这样做时，总是验证它是否适合你所做的事情，你会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:43:21.457

我认为这是一个坏主意。虽然一开始这可能工作得很好，但它要求您始终对此非常严格，并且从经验中我了解到，您最终总是会得到必须是数字的变量，而不是 ID 字段命名。

此外，您可能需要更多验证（例如有效的电话号码、电子邮件地址、邮政编码或有效的 guid）。

最后，您仍然需要验证每个参数，然后才能使用它，所以这似乎没用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:47:18.210

这是个好主意。更一般地说，您不能信任来自客户端的任何内容，因此检查/验证它总是一个好主意。

我建议您使用一些 PHP 库以一种简单的方式处理 HTTP 请求。试试这个 Symfony 组件，例如： [https ://github.com/symfony/HttpKernel](https://github.com/symfony/HttpKernel)

# java - JavaFX build for Java6 on Mac

> ID：15522441
> 
> 赞同：1
> 
> 时间：2013-03-20T11:36:41.643
> 
> 标签：java, macos, javafx-2

Our application is Javafx based. Due to some reasons we have to port our application with java6 on Mac.

But according to the download section on [Oracle](http://www.oracle.com/technetwork/java/javase/downloads/javafxjdk6-1728173.html), there is no build available for JavaFx on Java6 on Mac.

Is there any Javafx build available which can be used with Java6 on Mac?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:56:38.353

> Is there any Javafx build available which can be used with Java6 on Mac?

No JavaFX 2.x+ build is available for Java6 on Mac.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:50:41.883

这是有问题的，因为 JavaFX 与 JRE 7 捆绑在一起，但在 Mac OS X 10.6 上不可用

我的建议是使用 JavaFX2.2 的[Native Bundle](https://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_for_javafx)功能，它允许您将整个 JRE 与您的应用程序打包在一起，并提供一个本机可执行文件来启动您的应用程序。您可以使用[E(fx)clipse](http://efxclipse.org/)自动化整个事情，只需选中一个复选框。互联网上有很多关于如何使用或不使用 e(fx)clipse 插件的指南。

# javascript - HTML5 full-screen doesn't work when set inside a timer

> ID：15522444
> 
> 赞同：0
> 
> 时间：2013-03-20T11:36:45.347
> 
> 标签：javascript, jquery, html

I am trying this code. It is supposed to generate an image and set its container `div` to full-screen when the `p` is clicked.

```
<html>
<head>
<style>
img { height: 643px; width: 860px; }
img:-moz-full-screen { height: 643px; width: 860px; }
div:-moz-full-screen { background: white; }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function() {
 $("p").click(function() {    
  setTimeout(function() {
    $("body").prepend("<div><img src = 'http://i.stack.imgur.com/lBZKC.jpg?s=128&g=1' /></div>");
    $("div").get(0).mozRequestFullScreen();
  },5000);
 });
});
</script>
</head>
<body>
<p>Foo</p>
</body> 
```

What it does is wiat for 5 seconds and prepend the image all right, but it is not set to full-screen. However, if you remove the timer and do it normally:

```
$("p").click(function() {
  $("body").prepend("<div><img src = 'http://i.stack.imgur.com/lBZKC.jpg?s=128&g=1' /></div>");
  $("div").get(0).mozRequestFullScreen();
}); 
```

it works fine, it prepends the image and immediately sets it to full-screen.

Is this intentional, or a bug? Either way, is there any way to make it work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:44:12.053

必须调用该方法以响应用户输入事件（即按键、鼠标事件）。

# sqlite - Maintain a List of Daily Maxima Using a Trigger

> ID：15522445
> 
> 赞同：0
> 
> 时间：2013-03-20T11:36:47.070
> 
> 标签：sqlite, triggers

I'm developing an application retrieving data from a small number of sensors in an interval of 10 seconds. Those values are stored in a single-table sqlite database.

One use case of this application is to print the daily maxima of each sensor which is read.

I don't like the idea of issueing a `MAX...GROUP BY day` like query every time I want to retrieve those values, so I thought of maintaining a second table containing thos daily maxima.

1.  Is this the appropriate way of performing such a task?
2.  I tried writing such a trigger, but it didn't work. I'm somehow missing the ability to do the comparison among new value, and value for the current hour already in the db (which might be no value, if a new hour just started)

    ```
    CREATE TRIGGER update_maxima AFTER  INSERT ON tick
    BEGIN
        INSERT OR REPLACE INTO maxima (time, device_id, lW) 
        VALUES (
            strftime('%Y-%m-%d 00:00:00', 'now') , 
            new.device_id,
            (select case when new.lW > (select lW from maxima where device_id = new.device_id AND time = strftime('%Y-%m-%d 00:00:00', 'now'))
                then 
                    new.lW
                else 
                    (select lW from maxima where device_id = new.device_id AND time = strftime('%Y-%m-%d 00:00:00', 'now'))
                end
            )
        );
    END 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:05:29.623

1.  你说你更喜欢扳机；很难反驳这一点。;-)

    如果您想要一个技术原因：如果您执行最大每天查询的频率比插入一些新值的频率更高，那么触发器会更有效。

2.  如果表中没有匹配的值，则子`select lW...`查询返回一个值。`NULL`任何与 的比较`NULL`都会导致`NULL`，这使得`CASE`返回`ELSE`值是`NULL`。您必须将子查询包装到[IFNULL](http://www.sqlite.org/lang_corefunc.html#ifnull)调用中。

3.  您可以使用两个参数简化您`CASE`的 a ：`MAX`

    ```
    ... VALUES (
            strftime('%Y-%m-%d 00:00:00', 'now'),
            new.device_id,
            max(new.lW,
                ifnull((SELECT lW
                        FROM maxima
                        WHERE device_id = new.device_id
                          AND time = strftime('%Y-%m-%d 00:00:00', 'now')
                       ),
                       0)
               )
        ) 
    ```

# javascript - Displaying a hidden div is slow in phonegap after a tap event

> ID：15522447
> 
> 赞同：2
> 
> 时间：2013-03-20T11:36:50.787
> 
> 标签：javascript, jquery, performance, cordova, jquery-mobile

I am developing a webapp using phonegap for android .I m using jquery mobile tap event and for each tap event i want to show a loading div before displaying the content.I am seeing a delay between the tap event and display of loading div. Below is snippet of the code I have written

```
 $('#events').bind('tap',function () {           
        document.getElementById("loadingDiv").style.display = "block";  
       }); 
```

and this my loadingDiv

```
<div id="loadingDiv"></div>

#loadingDiv {position: fixed; background:black url('images/ajax-loader.gif') no-repeat center 20%; height:100%; width:100%; z-index:100000;} 
```

And also for speeding up the Jquery mobile I have turned off the transitions as well.

Please guide me on How to display the loadingDiv immediately for a nice user experience.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:49:14.287

假设 jQuery 移动点击事件被正确调用。这听起来像是浏览器需要一段时间才能实际显示到元素的问题。

由于 'display: none'[未包含在渲染树](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#Render_tree_construction)中，当您将其更改为阻止浏览器时，可能需要一段时间才能执行此操作。

一些解决方案是将元素设置为“不透明度：0”并将其设置为“不透明度：1”（或者是可见性属性）。这样做意味着元素会影响布局，但由于您使用的是固定位置，这应该不是问题。

# scheme - SICP中的图片语言是如何使用帧的？

> ID：15522448
> 
> 赞同：3
> 
> 时间：2013-03-20T11:36:53.473
> 
> 标签：scheme, image, sicp

我似乎无法理解 SICP 中框架的实现。

书中指出

> 我们将使用单位正方形中的坐标 (0< x,y< 1) 来指定图像

图像如何表示为坐标？我能想到的唯一解释是，所有图像，作为线条，只能映射到边界不能超过单位正方形的框架。但我对此表示怀疑，因为书中的下一行解释了“框架坐标图”，说

> 该映射通过将向量 v = (x,y) 映射到向量和 Origin(Frame) + x*Edge1(Frame) + y*Edge2(Frame) 将单位正方形转换为框架

向量 (0,0) 映射到框架的原点， (1,1) 映射到与原点对角的顶点，这只会增加我的困惑。这些向量是什么？图像的来源还是什么？

我无法理解这一点，它阻止了我进一步深入正文，因为之后讨论的所有内容都建立在这个概念之上。如果我能详细解释任何读过这本书的人如何理解这个想法，我会发现它非常有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:09:58.063

您对图像的解释是正确的。图像由单位正方形中的线段组成，其中原点 (0, 0) 是左下角， (1, 1) 是右上角。

![爱因斯坦在默认框架中绘制](../Images/cfedfded434aa5202da5fabd8b325c05.png)

画家使用问题中给出的转换将图像映射到框架中。上面的`einsten`图像是在默认框架（单位正方形）中绘制的，因此看起来很正常。

您可以通过三个步骤使用[SICP 图片语言](http://planet.plt-scheme.org/package-source/soegaard/sicp.plt/2/1/planet-docs/sicp-manual/index.html)创建和显示图像：

*   定义线段列表
*   从这些线段创建一个线段画家
*   用新的段画师调用画图

我在博客文章[SICP 2.49：定义原始画家](http://www.billthelizard.com/2011/10/sicp-249-defining-primitive-painters.html)中使用了几张简单的图像来做到这一点。这是一个仅使用两条线段的简单示例：

```
; The painter that draws an 'X' by connecting opposite corners of the frame.
(define x-segments
 (list
  (make-segment
   (make-vect 0.0 0.0)
   (make-vect 0.99 0.99))
  (make-segment
   (make-vect 0.0 0.99)
   (make-vect 0.99 0.0))))

(define x-painter (segments->painter x-segments))

(paint x-painter) 
```

这是我在 DrRacket 中运行最后一个命令时的结果：

![简单的画家](../Images/b8b5c6ba30b365c02eefbc3805fcbbbd.png)

您可以通过创建要绘制的新框架来翻转和旋转图像。

一帧由三个向量定义：

*   起源
*   底边 (edge1)
*   左边缘（edge2）

![在此处输入图像描述](../Images/083644aac517ebb027ef193e0bf8aede.png)

您可以使用[文本中给出](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-15.html)`transform-painter`的函数（在标题为*变换和组合画家*的部分中）使用新的原点和边缘变换现有的分段画家。

 *```
(define (transform-painter painter origin corner1 corner2)
  (lambda (frame)
    (let ((m (frame-coord-map frame)))
      (let ((new-origin (m origin)))
        (painter
         (make-frame new-origin
                     (sub-vect (m corner1) new-origin)
                     (sub-vect (m corner2) new-origin))))))) 
```

例如，如果我想绘制向左旋转 45 度的原始爱因斯坦图像，我只需将`einstein`分段绘制器连同新的原点、底部边缘和左侧边缘一起传递给`transform-painter`它，它将返回一个新的分段绘制器。换句话说，我需要告诉`transform-painter`在哪里绘制图像的左下角、右下角和左上角，它将完成在原始线段绘制器中转换所有线段的工作。

```
; rotate an image 45 degrees to the left
(define (rotate-45 painter)
  ((transform-painter (make-vect 0.5 0.0)
                      (make-vect 1.0 0.5)
                      (make-vect 0.0 0.5))
   painter)) 
```

您可以执行命令`(paint (rotate-45 einstein))`以查看旋转后的图像。

![爱因斯坦旋转了 45 度](../Images/04c0e64e3f7f34b9975659189800c655.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:55:28.377

据我记得，帧是用相对于单位正方形的坐标定义的矢量图像，并且可以从那里缩放、映射并通常*转换*为具有给定原点和大小的坐标系。这一切都在[书中](https://mitpress.mit.edu/sicp/full-text/book/book-Z-H-15.html#%_sec_2.2.4)的“*框架*”部分下。

您可以正确地假设所有图像都包含在单位正方形中，就是这样。然而，这根本不是一个限制——单位正方形中有无数个坐标点，你可以想象的任何图像都适合在那里。定义坐标在 [0, 1] 范围内，这只是一个约定问题；如果它们在 [1, 1000] 范围内，则相同，您可以通过移动小数点从一个坐标系映射到另一个坐标系。*

# jaxb - 使用活页夹解组具有命名空间的 xml 时出现 jaxb moxy 问题

> ID：15522451
> 
> 赞同：4
> 
> 时间：2013-03-20T11:37:07.357
> 
> 标签：jaxb, xml-namespaces, moxy, unmarshalling

我正在使用 jaxb moxy 从活页夹中解组 xml，但它给出了异常：在项目中找不到具有默认根元素 bean 的描述符。我还使用 package-info.java 来指定命名空间。

要解组的 XML 文件-

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.example.org/package">
</beans> 
```

Beans.java-

```
@XmlRootElement(namespace="http://www.example.org/package")
public class Beans {

String name = "ss";

@XmlElement
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
} 
```

}

包信息.java

```
@XmlSchema(
    namespace="http://www.example.org/package",
    elementFormDefault=XmlNsForm.QUALIFIED)
package com.jaxb.test;

import javax.xml.bind.annotation.*; 
```

主班——

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        File xml = new File(
                "D:\\eclipse-jee-indigo-SR2\beans.xml");
        Document document = db.parse(xml);

        JAXBContext jc = JAXBContext.newInstance(Beans.class);

        Binder<Node> binder = jc.createBinder();

        Beans customer = (Beans)   jc.createBinder().unmarshal(document);//throws exception

     //Beans customer = (Beans) jc.createUnmarshaller().unmarshal(xml);This works
    //Beans customer = (Beans) jc.createUnmarshaller().unmarshal(document);Throws same exception 
```

例外-

```
javax.xml.bind.UnmarshalException
- with linked exception:
[Exception [EclipseLink-25008] (Eclipse Persistence Services - 2.4.1.v20121003-   ad44345): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: A descriptor with default root element beans was not found in the project]
at  org.eclipse.persistence.jaxb.JAXBUnmarshaller.handleXMLMarshalException(JAXBUnmarshaller.java:1014)
at  org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:199)
at com.jaxb.test.JaxbTest.main(JaxbTest.java:43) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:07:26.913

默认情况下 a`DocumentBuilderFactory`不支持命名空间。这意味着您传递给 MOXy 的文档不会像预期的那样被命名空间限定。您可以通过在代码中添加以下内容来解决此问题：

```
dbf.setNamespaceAware(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:09:06.917

解决了。​​我没有使用 package-info.java，而是使用了 bindins.xml 。

bean-bindings.xml-

```
<?xml version="1.0" encoding="UTF-8"?>
<xml-schema element-form-default="QUALIFIED" namespace="http://www.example.org/package">
    <xml-ns prefix="" namespace-uri="http://www.example.org/package" />
</xml-schema>

<java-types>
    <java-type name="Beans">
    <xml-root-element name="beans"/>
        <java-attributes>

        </java-attributes>
    </java-type>
</java-types> 
```

# sql-server-2008-r2 - sql语句中的逗号分隔值与变量

> ID：15522456
> 
> 赞同：2
> 
> 时间：2013-03-20T11:37:27.387
> 
> 标签：sql-server-2008-r2

我在一个变量中得到这样的逗号分隔值（比如说变量名@listobj）

```
'abc' , 'xyz' 
```

但是当我使用下面的语句时，它并没有给我正确的结果

```
SELECT * FROM someTable
Where column1 IN (@listobj) 
```

但 abc 出现在表中。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:42:05.120

创建一个将字符串拆分为的函数

```
 CREATE FUNCTION dbo.Split(@String varchar(8000), @Delimiter char(1))     
returns @temptable TABLE (items varchar(8000))     
as     
begin     
declare @idx int     
declare @slice varchar(8000)     

select @idx = 1     
    if len(@String)<1 or @String is null  return     

while @idx!= 0     
begin     
    set @idx = charindex(@Delimiter,@String)     
    if @idx!=0     
        set @slice = left(@String,@idx - 1)     
    else     
        set @slice = @String     

    if(len(@slice)>0)
        insert into @temptable(Items) values(@slice)     

    set @String = right(@String,len(@String) - @idx)     
    if len(@String) = 0 break     
end 
return     
end

then make call to the function SELECT * FROM someTable
Where column1 IN (dbo.Split(@listobj)) 
```

[在此处输入链接描述](https://stackoverflow.com/questions/12999631/split-string-by-comma-in-sql-server-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:46:50.817

[SQLFiddle 演示](http://sqlfiddle.com/#!3/883d3/1)

```
select * from someTable
where ','+LTRIM(RTRIM(@listobj))+',' LIKE '%,'+LTRIM(RTRIM(column1))+',%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:41:19.840

一个经典的问题，答案是否定的，您不能以这种方式使用参数。虽然有几种解决方法

其中之一是解析存储过程内部的值，并在过程内部动态生成 sql 以供稍后执行。但是，这不是一个好的做法。

参考这个问题

[如何将逗号分隔的列表传递给存储过程？](https://stackoverflow.com/questions/6369/how-to-pass-a-comma-separated-list-to-a-stored-procedure)

还有一些很好的讨论here

[http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/1ccdd39e-8d58-45b2-9c21-5c4dbd857f95/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/1ccdd39e-8d58-45b2-9c21-5c4dbd857f95/)

# c# - 我们可以使用c#在windows 8应用程序中根据不同的分辨率比例设置各种控件的边距吗

> ID：15522460
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:37:33.350
> 
> 标签：c#, windows-8, microsoft-metro, scale, resolution

我们可以使用 C# 在 Windows 8 应用程序中根据不同的分辨率比例设置各种控件的边距吗？

我试过字典对象`ResolutionScale`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:36:18.947

您可能想要查看[ViewBox 控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)。[我的队友 Jeff 在这里](http://www.jeffblankenburg.com/2013/03/16/lessons-learned-in-windows-8-scaling/)写了一篇很棒的文章。基本上，您可以将项目放在 ViewBox 中，然后 ViewBox 将在该空间量内适当地缩放它们。

# ios - 在 iOS 中保存照片时显示等待对话框或指示器，值得吗？

> ID：15522474
> 
> 赞同：0
> 
> 时间：2013-03-20T11:38:07.243
> 
> 标签：ios, save, wait, nsthread, uiactivityindicatorview

我不知道在保存用相机拍摄的照片时显示等待对话框/指示器是否正确。在 iPad 4 中，保存过程非常快，但在其他设备上，此过程可能需要更多时间。

启动一个新线程来保存图像并显示对话框/指示器，值得吗？

我认为这不值得，但我想知道更多专家的意见。

一些示例代码来说明我的问题：

```
[indicator startAnimating];
[NSThread detachNewThreadSelector:@selector(saveImage) toTarget:self withObject:nil]; 
```

和...

```
- (void)saveImage {
    library = [[ALAssetsLibrary alloc] init];
    [library saveImage:myPhoto toAlbum:@"MyAlbum" withCompletionBlock:^(NSError *error) {
        if (error==nil) {
           [indicator stopAnimating];
        }
    }
} 
```

我正在使用此类别将图像保存到自定义相册中：[https ://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum](https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:42:33.663

一般的 iOS 范例是用户不应该知道正在进行的任何“保存”操作 - 因此更倾向于在后台线程上执行此类操作。

因此，考虑到这一点，您当前的方法似乎完全可以接受并且符合 iOS UI 指南。

# html - 使用内联块显示，内容不向左浮动

> ID：15522475
> 
> 赞同：0
> 
> 时间：2013-03-20T11:38:08.607
> 
> 标签：html, css

我希望 div 元素的宽度等于其中内容的宽度，并且（更重要的是）此 div 之后的任何内容都不会从 div 的右侧开始（好像 div 是`float:left;`），但显示在当前 div 下方。我知道一种方法是，在这个 div 之后，我创建另一个空 div 和 set `clear:both;`，但在我的情况下，这不是很可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:15:44.773

我认为以下内容可能接近您的需要：

HTML 演示代码为：

```
<div>
Some text may be before the element.
<div id="info">This is my bible!</div>And some text may follow. the element.
</div> 
```

CSS样式是：

```
#info {
    display:inline;
    background-color:#CFFF9F;
    color:black;
    font-weight:normal;
    border:black solid 1px;
}
#info:after {
    content:"\A"; 
    white-space: pre; 
} 
```

小提琴参考：http: [//jsfiddle.net/audetwebdesign/6FNQc/](http://jsfiddle.net/audetwebdesign/6FNQc/)

**解释这是如何工作的**

用于`:after`生成一些内容（在 CSS 中称为伪元素）。"\A" 被解释为换行符（换行符），前提是保留了空格，因此您需要设置`white-space: pre`. 最后，元素必须是内联的，因此`display: inline`.

相关参考：
[CSS 到特定 `inline-block` 项目之前/之后的换行符](https://stackoverflow.com/questions/4609279/css-to-line-break-before-after-a-particular-inline-block-item)

要了解有关“\A”（换行符）的更多信息，请参阅：
[http ://www.w3.org/TR/CSS21/syndata.html#strings](http://www.w3.org/TR/CSS21/syndata.html#strings)

# web-applications - 为什么我不能提交“应用详情页面”？

> ID：15522476
> 
> 赞同：9
> 
> 时间：2013-03-20T11:38:17.150
> 
> 标签：web-applications, facebook-apps

据我所知，我已经为我的 Facebook 应用程序详细信息页面输入了每条需要提交的信息（并被 FB 接受）。我认为我遵守了 App Center 指南并满足了所有要求。

我仍然得到：

```
Invalid Submission
Before you can submit your app detail page you must first comply with
App Center Guidelines. Please make sure you have specified how your app
integrates with Facebook and have met all the requirements.
Click here to update your integration. 
```

**我怎样才能弄清楚 FB 认为丢失/错误的内容是什么？**

我很想提交它！提前致谢！

BTW：我在哪里可以正式提出这个问题？是否有对开发人员的“官方支持”，或者社区努力是 FB 在这方面所做的最大努力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T22:16:16.467

您应该只需要转到应用详细信息并打开一些应用中心权限。 [https://developers.facebook.com/docs/games/appcenter/tutorial](https://developers.facebook.com/docs/games/appcenter/tutorial) 不幸的是 FB 文档不是很好，支持仍然不存在。

# forms - 在 symfony2 中显示多对多关系字段标签

> ID：15522480
> 
> 赞同：1
> 
> 时间：2013-03-20T11:38:44.443
> 
> 标签：forms, symfony, many-to-many, entity, label

我有一个实体新闻绑定到具有多对多关系的实体公司。这种关系通过实体字段设置在表单中，我可以在其中选择与我的新闻相关的公司。一切正常，除了公司 ID 显示为标签。

有没有办法强制将另一个更有意义的表字段显示为标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:53:49.443

看看`entity`表单字段类型参考。具体`property`选项。 [http://symfony.com/doc/current/reference/forms/types/entity.html#property](http://symfony.com/doc/current/reference/forms/types/entity.html#property)

# javascript - 脚本在 IE 中不起作用

> ID：15522485
> 
> 赞同：0
> 
> 时间：2013-03-20T11:39:04.640
> 
> 标签：javascript, jquery

我在购物车中添加项目的代码在 Chrome、Firefox 中运行良好但在 IE8 中无法运行，我将这些项目带到已经检查过的购物车中，为此我已经按照以下方式完成了

```
jQuery(document).ready(function(){
    var product_arr=new Array();
    jQuery('.ProceedToCheckout').click(function(){
        var p1 = document.getElementById('product1').checked;
        var p2 = document.getElementById('product2').checked;
        var p3 = document.getElementById('product3').checked;
        var p4 = document.getElementById('product4').checked;

        if(p1){
        var pid1 = jQuery('#product1').val();
        product_arr.push(pid1);
    }
        if(p2){
        var pid2 = jQuery('#product2').val();
        product_arr.push(pid2);
        }
        if(p3){
        var pid3 = jQuery('#product3').val();
        product_arr.push(pid3);
        }
        if(p4){
        var pid4 = jQuery('#product4').val();
        product_arr.push(pid4);
        } 
        var i=0;
        jQuery('.cart_iframe_1').attr('src','http://www.merimobiles.com/cart.php?action=add&product_id='+product_arr[0]);
        console.log('http://www.merimobiles.com/cart.php?action=add&product_id='+product_arr[i]);
        i++;
    var t=setInterval(function(){
            if(i<product_arr.length ){ 
                jQuery('.cart_iframe_1').attr('src','http://www.merimobiles.com/cart.php?action=add&product_id='+product_arr[i]);
                console.log('http://www.merimobiles.com/cart.php?action=add&product_id='+product_arr[i]);
                i++;
            }
        else{
        clearInterval(t); 
        document.location.href="http://www.merimobiles.com/checkout.php";   
        }   
           },5000);
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:40:17.450

console.log() 可能是个问题。删除它或检查是否已定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:42:51.547

你也可以试试

```
jQuery(document).ready(function(){
   alert('somevalue');
}); 
```

如果它不警告意味着定义 jquery 有问题。

还可以尝试`console bar`在哪里可以检查`jquery`该页面是否已加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:46:39.520

我也认为你应该为整个脚本全局声明“t”变量。如果“t”是本地的，有时 ClearInterval 可能不起作用

# java - 下拉对话框

> ID：15522487
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:39:06.033
> 
> 标签：java, swing, dialog

我从 oracle 网站得到了这个下拉框的例子：

```
Object[] possibilities = {"ham", "spam", "yam"};
String s = (String)JOptionPane.showInputDialog(
                frame,
                "Complete the sentence:\n"
                + "\"Green eggs and...\"",
                "Customized Dialog",
                JOptionPane.PLAIN_MESSAGE,
                icon,
                possibilities,
                "ham");

//If a string was returned, say so.
if ((s != null) && (s.length() > 0)) {
setLabel("Green eggs and... " + s + "!");
return;
}

//If you're here, the return value was null/empty.
setLabel("Come on, finish the sentence!"); 
```

我只是想知道你如何改变每个选择的作用？例如，我是否需要更改语句中的某些内容`if ((s != null) && (s.length() > 0)) {`以便可以编辑第一个字符串项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:49:38.233

好吧，检查用户选择了哪个项目并做某事非常简单

```
if ((s != null) && (s.length() > 0)) {

     if(s.equals(possibilities[0]);
         //HAM is chosen do something
     else if(s.equals(possibilities[1]);
         //spam and so on..........
     return;
} 
```

# asp.net-mvc - 尝试在 Fiddler 中检查传入请求时遇到问题

> ID：15522501
> 
> 赞同：1
> 
> 时间：2013-03-20T11:39:45.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, fiddler

我正在尝试检查对我的服务器的传入请求。另一个托管 MVC 应用程序的服务器。一种操作方法是将一些数据发送到我的服务器。我正在使用提琴手。但不知何故，它没有显示传入的请求。

下面提到的是我在 Fiddler 自定义规则中的设置..

```
static function OnBeforeRequest(oSession: Session) {
        if (oSession.host.toLowerCase() == "IP Address:8888") 
            oSession.host = "IP Address:82";
} 
```

下面提到的是我的提琴手选项。

![在此处输入图像描述](../Images/5025f2f0c697909121ba611ad990bce9.png)

![在此处输入图像描述](../Images/4ce8409f6d53b079676e52af529bbc93.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:56:31.333

如果是 ssl 连接，则需要从“https”选项卡中启用“捕获 https 连接”选项。您是否尝试从其他浏览器（如 chrome ）调用请求？提琴手会捕获任何东西吗？

对于这种情况，您不需要自定义规则。如果您启用这些设置，它应该可以工作。我在 FF 等其他浏览器中只遇到过一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:34:25.950

我不确定在不知道一些其他信息的情况下是否可以完全回答您的问题。

如果发出的请求不是 HTTP 请求，Fiddler 将无法处理它。此外，如果您使用的是环回地址*localhost*，则 Fiddler 可能无法找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:41:20.310

听起来您正在尝试将 Fiddler 用作反向代理。您应该阅读[http://www.fiddler2.com/r/?reverseproxy](http://www.fiddler2.com/r/?reverseproxy)上的步骤。要理解的最重要的事情是，当作为反向代理运行时，如果客户端的 URL 更改为指向 Fiddler，您只能在 Fiddler 中看到流量。

# typo3 - TYPO3 tt_news 中的 Disqus 评论计数

> ID：15522502
> 
> 赞同：0
> 
> 时间：2013-03-20T11:39:46.103
> 
> 标签：typo3, disqus, tt-news

是否有可能在 TYPO3 tt_news 列表/最新视图链接中创建链接`#disqus_thread`末尾的文章链接，即：

`<a href="http://example.com/article/article_title.html#disqus_thread">Number of commments</a>`?

有人曾尝试查看 tt_news 扩展中的评论数吗？

谢谢你的帮助！

问候， 阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:21:28.917

查看**扩展 tt_news**`tt_news'`部分的手册，很可能您可以使用fpr 创建自定义标签，文件夹中有一些示例。**`itemMarkerArrayFunc``typo3conf/ext/tt_news/res/`**

 **使用它，您可以处理一些新的标记，例如：`###LINK_TO_DISQUS###`

注意，我不知道 Disqus 的 API，反正 id 很可能不需要太多努力。**

# git - 防止在 git stash pop 发生冲突时暂存所有更改

> ID：15522503
> 
> 赞同：1
> 
> 时间：2013-03-20T11:39:54.653
> 
> 标签：git

我注意到 git 的以下行为。当我 stash pop 一个先前隐藏的变更集时，它将被恢复，而不会添加到暂存区域。但是，如果我在存储弹出时遇到冲突，则所有更改都将暂存以进行提交。它是一个错误，还是一个可以禁用的功能？如果是后者，我对如何做到这一点很感兴趣。

git 版本是 1.7.9.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:54:06.000

我不认为它可以，我同意这有点烦人。AFAIK 这是合并驱动程序的副作用。但是，您可以使用`git reset HEAD .`.

# three.js - ThreeJS 纹理问题

> ID：15522505
> 
> 赞同：1
> 
> 时间：2013-03-20T11:40:00.387
> 
> 标签：three.js, textures

我的 Three.js 3D 应用程序有问题 - 至少根据我认识的一些人的说法。

我的应用程序位于`[http://176.9.149.205/planungstool/]`. 一些据说拥有最新版本的 Chrome 和 Firefox 的人看不到纹理区域。例如，他们看不到 3D 房屋的屋顶或正面。然而，他们确实看到了像树或地板这样的无纹理的东西。

奇怪的是我没有这个问题，而我问的其他大多数人也没有这个问题。这是它应该是什么样子，对我来说确实是这样的：`[http://176.9.149.205/planungstool/house.jpg]`

有谁知道可能导致这种情况的原因？会不会是一些客户端设置？或者可能是一些访问控制策略？

我正在加载这样的纹理：

```
var myTexture = new THREE.ImageUtils.loadTexture('gfx/textures/texture.jpg'); 
```

然后我只创建具有这种纹理作为其贴图的朗伯材质的网格。

如果您阅读了这篇文章并且不知道是什么导致了这个错误，那么如果您至少可以告诉我您是否看到纹理区域，那将是很好的，因为您拥有的是最新版本的 Chrome 或 Firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:07:42.400

我可以在 mac 上看到当前 chrome 上的纹理。我在画布渲染器上遇到了类似的问题（任何有纹理的东西都是不可见的）。对我来说，我从使用 ImageUtils.loadTexture 更改为纹理和纹理加载器，它可以工作。

```
var texture = new THREE.Texture();
var texLoader = new THREE.ImageLoader();
texLoader.addEventListener( 'load', function(event){
    texture.image = event.content;
    texture.needsUpdate = true;
} );
texLoader.load('texture.png'); 
```

然而，我在 safari 中的画布渲染器仍然存在问题，但您似乎只使用 webgl 渲染器。希望这可以帮助。

# perl - perl CPU 性能分析

> ID：15522508
> 
> 赞同：0
> 
> 时间：2013-03-20T11:40:12.657
> 
> 标签：perl, profile

我想为 cpu 时间分析我的 perl 脚本。我发现了 Devel::Nytprof 和 Devel::SmallProf 但第一个不能显示 cpu 时间，第二个工作不好。至少我找不到我需要的东西。

你能为我的目的提供任何工具吗？

UPD：我需要每行分析/因为我的脚本需要很多 cpu 时间，我想改进它的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:30:53.693

您可以尝试系统的（不是 shell 的内部！）[时间](http://linux.die.net/man/1/time)实用程序（前导`\`不是**错字**）：

```
$ \time -v perl collatz.pl
13 40 20 10 5 16 8 4 2 1
23 70 35 106 53 160 80 40
837799 525
    Command being timed: "perl collatz.pl"
    User time (seconds): 3.79
    System time (seconds): 0.06
    Percent of CPU this job got: 97%
    Elapsed (wall clock) time (h:mm:ss or m:ss): 0:03.94
    Average shared text size (kbytes): 0
    Average unshared data size (kbytes): 0
    Average stack size (kbytes): 0
    Average total size (kbytes): 0
    Maximum resident set size (kbytes): 171808
    Average resident set size (kbytes): 0
    Major (requiring I/O) page faults: 9
    Minor (reclaiming a frame) page faults: 14851
    Voluntary context switches: 16
    Involuntary context switches: 935
    Swaps: 0
    File system inputs: 1120
    File system outputs: 0
    Socket messages sent: 0
    Socket messages received: 0
    Signals delivered: 0
    Page size (bytes): 4096
    Exit status: 0 
```

# windows - 使用 LR_SHARED 的 LoadImage 函数（Windows），图像的标准尺寸是多少？

> ID：15522509
> 
> 赞同：1
> 
> 时间：2013-03-20T11:40:12.650
> 
> 标签：windows, winapi

在有关 LoadImage 函数的文档（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045(v=vs.85).aspx)）中警告使用 LR_SHARED 标志：“不要将 LR_SHARED 用于具有非标准尺寸、加载后可能会更改或从文件加载的图像。”

那么图像的标准尺寸究竟是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:26:30.540

我猜想“非标准尺寸”仅适用于图标和光标，但不适用于位图。

[CreateCursor](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648385(v=vs.85).aspx)的文档说

> nWidth 和 nHeight 参数必须指定当前显示驱动程序支持的宽度和高度，因为系统无法创建其他大小的光标。要确定显示驱动程序支持的宽度和高度，请使用 GetSystemMetrics 函数，指定 SM_CXCURSOR 或 SM_CYCURSOR 值。

这同样适用于[CreateIcon](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648059(v=vs.85).aspx)：

> nWidth 和 nHeight 参数必须指定当前显示驱动支持的宽度和高度，因为系统无法创建其他尺寸的图标。要确定显示驱动程序支持的宽度和高度，请使用 GetSystemMetrics 函数，指定 SM_CXICON 或 SM_CYICON 值。

我相信 CreateCursor 和 CreateIcon 的限制也适用于带有 LR_SHARED 的 LoadImage。

顺便说一句，如果您对 MSDN 文档不满意，请使用 MSDN 网页末尾的反馈选项 - 我只是这样做并抱怨限制不明确。

# iphone - iPhone 应用程序存储量不断增长

> ID：15522510
> 
> 赞同：1
> 
> 时间：2013-03-20T11:40:14.247
> 
> 标签：iphone, ios, facebook, amazon-web-services, flurry

我对此进行了快速搜索，但不幸的是找不到任何答案。

我的 iPhone 应用程序仍处于开发阶段。我刚刚从我的 iPhone 的设置->常规->使用中注意到，这个应用程序占用了超过 900MB 的空间。我很震惊，不明白为什么。

我没有保存任何下载的图像、字符串或任何类型的大型数据库。原始应用程序大小 < 10MB。它仅包含添加到项目文件夹中的几张图像。

我正在起诉`NSUserDafaults`保存一些参数。（用于简单的应用程序/用户设置）

我使用的其他外部/第 3 方库是：

*   SBJson
*   亚马逊网络服务（用于上传图像）
*   乱舞
*   KTPhotoBrowser
*   ASIHTTPRequest（我知道这已经被弃用了。到目前为止它对我来说很好，在第一个版本之后，我打算用任何最好的替代品替换它）
*   Facebook
*   Twitter（尚未集成）

任何想法可能是什么原因？我错过了什么或做错了吗？

提前致谢。

**更新：**我删除了该应用程序并重新安装了它。现在首次启动后，它需要 13.2MB，其中 7.4MB 是应用程序大小，5.8MB 是由文档和数据占用的。似乎正在使用的存储随着时间的推移而增加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:27:58.820

好的！我对这个问题进行了彻底的查找，发现它的 XCode 导致应用程序占用了如此多的存储空间。

我不确定幕后发生了什么，但是当应用程序连接到 XCode 并运行时，存储大小会增加。但是，如果它没有连接到 XCode 并运行应用程序，它将正常运行并且不会占用任何不需要的存储空间。

我猜是因为 XCode 可能正在保存应用程序的日志/快照。我不知道。

所以，看来我的应用是安全的（感谢上帝！），希望苹果在提交发布时不会有任何异议。

@Yangfan Zhang：Flurry 似乎是安全的，不对这个问题负责，因为没有删除任何提到的库并进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:45:19.583

如果您的应用支持**iOS5**以上，那么您应该删除**Twitter**和**SBJson**框架。

**ASIHTTPRequest**还提供图像上传功能，因此您还可以删除**Amazon Web Services**。

**ASIHTTPRequest**有很多文件，因此请确定您的应用程序中未使用的类，您也可以删除这些文件。例如 zZip 文件，如果您不使用它。

希望这会帮助你。

祝一切顺利 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:09:11.467

听起来您对不断增长的日志文件或其他东西有问题。您的应用在安装时不能达到 900MB，否则大约需要半小时才能传输到手机上。

您说您已经尝试在模拟器中运行该应用程序，但您实际上是否在文档目录中查看了罪魁祸首文件？

如果不：

1.  在模拟器中运行该应用程序并执行正常行为。

2.  导航到`~/Library/Application Support/iPhone Simulator/6.1*/Applications/`您正在运行的 *iOS 版本

3.  在那里找到你的应用程序（它会是奇怪的字符）并检查`Documents`目录。此文件夹包含您在应用程序中存储的任何内容。

根据您运行的 OSX 版本（Lion 或更高版本），您的个人库目录可能会被隐藏。`/usr/bin/chflags nohidden ~/Library`您可以通过在命令行中键入来取消隐藏它。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T18:04:47.727

Flurry 可能会在 Document 目录下留下一些文件。这些文件会随着时间的推移而积累。请看这篇文章[如何处理Flurries的积累？](https://stackoverflow.com/questions/7731335/how-do-i-deal-with-an-accumulation-of-flurries)

# wpf - WPF 中 ThemeInfo 的难点？

> ID：15522513
> 
> 赞同：2
> 
> 时间：2013-03-20T11:40:21.623
> 
> 标签：wpf, xaml, wpf-controls

我被文件中的`ThemeInfo`属性困住了`AssemblyInfo.cs`。我正在尝试编写自定义控件。自定义控件位于名为“MyCustomControls.dll”的 dll 中。此外，控件本身源自另一个自定义控件，该控件位于另一个名为“MyAnotherCustomControls.dll”的 dll 中。

我在 MSDN 上读到必须使用 2 个参数声明 ThemeInfo，这些参数负责控制主题特定位置和通用特定位置，尽管我不知道什么是“主题”和什么是“通用”。我怎样才能更好地理解这两个？

如果有人可以从头开始向我解释一个例子，什么是“通用”，什么是“主题”。此外，何时使用“通用”或“主题”。WPF系统如何使用这两个？我真的需要用简单的英语进行解释，所以如果您要向我发布 MSDN 链接，请节省您的时间。我阅读了有关 ThemeInfo 的 msdn 文档，但我不明白。

也有人可以告诉我如何通过`ThemeInfo`告诉我的“MyCustomControls.dll”来使用“MyAnotherCustomControls.dll”中定义的字典资源吗？这是否可以仅通过 ThemeInfo 完成，还是我必须处理“MyCustomControls.dll”中的 MergedDirectories？我希望 WPF 系统负责定位资源，以便我可以使用“MyAnotherCustomControls.dll”中的样式键，而无需在“MyCustomControls.dll”中添加合并目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:25:31.100

> 我在 MSDN 上读到必须使用 2 个参数声明 ThemeInfo，这些参数负责控制主题特定位置和通用特定位置，尽管我不知道什么是“主题”和什么是“通用”。我怎样才能更好地理解这两个？

基本上，WPF 框架将查找名称与 OS 主题名称匹配的 xaml 资源。因此，如果您在 XP 上运行蓝色主题为“luna.normal.xaml”。如果找不到具有该确切名称的名称，它将查找“generic.xaml”。实际上，我认为如果他们找不到与特定于操作系统的匹配项，他们首先会查找“classic.xaml”，然后他们会查找generic.xaml。您可以将 generic.xaml 视为默认资源。

ThemeInfo 属性只是告诉 WPF这些资源是*在哪里定义的。*有 3 个选项：

*   **无**- 您没有提供“主题”或“通用”资源。这确实是一种优化，因此 WPF 框架不会费心寻找它们。您通常不会将其用于**GenericDictionaryLocation**，但您可以将其用于**ThemeDictionaryLocation**，以防您不打算定义操作系统主题特定的资源（即您不希望您的控件在不同的操作系统主题下看起来不同）。通常，控件供应商将为每个可能的操作系统主题定义一个资源字典，以便控件看起来与该操作系统中运行的其他控件和窗口一致。
*   **ExternalAssembly** - 这意味着您正在为资源定义一个单独的程序集。因此，如果您查看 WPF 框架，您会发现他们将其用于**ThemeDictionaryLocation的****PresentationFramework**程序集。然后他们为他们想要支持的每个操作系统主题定义了一个单独的程序集（例如 PresentationFramework.Aero.dll、PresentationFramework.Luna.dll 等）。它将搜索的程序集的名称是定义程序集的名称加上主题的名称。
***   **SourceAssembly** - 这意味着资源是在程序集本身内定义的。因此，在该程序集中，您将拥有一个包含资源字典的“主题”文件夹。**

 **[MSDN 上关于控件创作的这篇文章](http://msdn.microsoft.com/en-us/library/ms745025.aspx)对于提供有关此信息的信息确实还不错。

> 也有人可以告诉我如何通过使用 ThemeInfo 告诉我的“MyCustomControls.dll”使用“MyAnotherCustomControls.dll”中定义的字典资源吗？这是否可以仅通过 ThemeInfo 完成，还是我必须处理“MyCustomControls.dll”中的 MergedDirectories？我希望 WPF 系统负责定位资源，以便我可以使用“MyAnotherCustomControls.dll”中的样式键，而无需在“MyCustomControls.dll”中添加合并目录。

您不能使用 ThemeInfo 告诉 WPF 它应该在某个任意程序集中查找您的资源。话虽如此，如果您不设置或覆盖**DefaultStyleKey**，就像在定义自定义控件时通常所做的那样，那么它应该继续使用为默认资源设置/覆盖了 DefaultStyleKey 的基类的资源。

然而，应该注意的是*本地*样式解析（即，当您的控件的样式属性未设置并且 WPF 从元素所在的位置查找并沿着视觉/逻辑树查找可能隐式影响的样式时元素）将**永远**查找 Key 与类的确切类型匹配的 Style。因此，如果有一个 Style，其 TargetType（因此放置在 ResourceDictionary 中时的默认键）是在窗口的资源中定义的 TextBox，它将影响该窗口中的所有 TextBox 实例（除非它们在视觉中具有更接近的样式树 - 即在其自身之间的某个元素的资源中定义了某个祖先 - 或者它的 Style 属性已设置）。但是，如果您有一个派生自 TextBox 的类（例如 MyTextBox 类：TextBox），那么它将不会选择/使用该样式。相反，它将寻找 TargetType/Key 为 typeof(MyTextBox) 的 Style。解决这个问题的一种方法是将 Style 属性设置为 DynamicResource 为基本类型。例如

```
public MyTextBox()
{
  this.SetResourceReference(StyleProperty, typeof(TextBox));
} 
```

基本上，这会在控件的 Style 属性上设置一个本地值，该属性正在为一个 Style 进行动态资源查找，该 Style 的 Key（以及未设置 x:Key 的 Styles 的 TargetType）是指定的类型（在本例中为 TextBox）。

正如您所指出的，替代方法是在您的程序集中本地为基类程序集定义的每个主题定义 xaml 文件，然后将 ResourceDictionary 添加到其 MergedDictionaries 中，使用[pack uri 表示法](http://msdn.microsoft.com/en-us/library/aa970069.aspx)来引用基类程序集中的资源。如果您要设置 DefaultStyleKey，那么您可能需要在每个 ResourceDictionaries 中定义 TargetType 是您的类类型的 Style，然后将 BasedOn 设置为 StaticResource，其中资源键是基类的类型。听起来您不需要这样做。**

# forms - 按钮 Onclick 在表单内不起作用

> ID：15522521
> 
> 赞同：2
> 
> 时间：2013-03-20T11:40:38.973
> 
> 标签：forms, button, onclick

再会

我正在使用一个 ASP.NET 网络表单，我在表单标签中包含了以下按钮：

```
<form runat="server">

  <button class="btn btn-primary" onclick="window.location='http://google.co.za';">Login</button>

</form> 
```

ISSUE: 问题是当点击按钮时，它只是指向当前页面...不重定向。但是，当我删除表单标签时，按钮会起作用。如果我留下表单标签并使用锚标签重新定位，它也可以工作......这只是给我带来问题的按钮。

这是为什么？

我也在使用 Twitter 引导程序（额外信息..）

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T11:43:19.480

将`type="button"`属性添加到您的`button`标签。没有它按钮作为`submit`.

# .net - 使用 DLL .NET 内部方法

> ID：15522526
> 
> 赞同：1
> 
> 时间：2013-03-20T11:40:52.183
> 
> 标签：.net, windows, reverse-engineering

是否可以使用一个 DLL 的内部方法？
我已经使用 Reflector 和 dotPeek 反编译了 .net dll，并找到了我需要的方法、名称和参数。
我已经制作了一个简单的程序来调用公共程序，所以我很好。
CFF Explorer（[此处](http://www.ntcore.com/exsuite.php)）允许将某些内容更改为 public/private/static/etc...
有没有人成功地尝试过这个？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:46:12.830

是的，您可以使用`Reflection`. 考虑以下类：

```
public class A
{
    internal void Method(string val) { }
} 
```

要使用该方法，您需要执行以下操作：

```
var a = new A();
var methodInfo = a.GetType().GetMethod("Method", BindingFlags.Instance | BindingFlags.NonPublic);
if (methodInfo == null) { return; }  // the method wasn't found on the type

methodInfo.Invoke(a, new object[] { "parameter value" }); 
```

如果该方法返回一个值：

```
var result = methodInfo.Invoke(a, new object[] { "parameter value" }); 
```

# android - 如何以编程方式获取自己的 Android 应用统计信息？

> ID：15522531
> 
> 赞同：1
> 
> 时间：2013-03-20T11:41:04.243
> 
> 标签：android, google-play, google-play-services

是否可以从 Google Play Developer Console 以编程方式为我自己的应用获取应用安装计数？

当然，可以尝试以编程方式登录并发出一些 Web 请求，这将返回带有统计信息的 json，该统计信息在网站本身上用于显示统计信息，但这对我来说似乎并不可靠。

我找到了一个[https://code.google.com/p/androidappstats/](https://code.google.com/p/androidappstats/)，但它似乎有点过时了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:02:06.873

看看 GitHub 上的[Andlytics](https://github.com/AndlyticsProject/andlytics)项目。它是一个开源应用程序，也可在 Google Play 上找到。您将在链接的 GitHub 页面上找到指向该链接的链接。

但是，它（*目前*）不适用于 Google Play 商店中的某个特定应用程序。而是连接到您的开发者帐户并获取有关使用相同发布的每个应用程序的信息。

话虽如此，由于它是开源的，我相信它可以进行调整以适合您的确切目的。

这里还有一个非官方的 API：[https](https://code.google.com/p/android-market-api/) ://code.google.com/p/android-market-api/ 。但是快速浏览一下来源表明这不再/定期更新。

另一方面，Andlytics 会定期更新（以适应对 Google Play 商店所做的任何更改）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:57:58.787

有一个非官方的库，可以在[https://code.google.com/p/android-market-api/找到](https://code.google.com/p/android-market-api/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:29:05.743

好吧，我选择了以下解决方案。由于我是一名 .NET 程序员，所以使用 Java 库对我来说并不容易，而且我没有足够的时间和意愿将它们重写为 C#。

在 Steven Sanderson 的博客中，我发现了一篇关于无头浏览器自动化的文章（[http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/](http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/)）

这是我写的代码：

```
WebClient _webClient = new WebClient( BrowserVersion.FIREFOX_17 );
_webClient.getOptions().setUseInsecureSSL( true );
_webClient.getOptions().setThrowExceptionOnScriptError( false );
_webClient.getOptions().setRedirectEnabled( true );

var page = (HtmlPage)_webClient.getPage( "https://play.google.com/apps/publish/v2/" );

HtmlInput emailElement = (HtmlTextInput)page.getElementById( "Email" );
emailElement.type( Settings.Default.Login );

HtmlInput passwordElement = (HtmlInput)page.getElementById( "Passwd" );
passwordElement.type( Settings.Default.Password );

HtmlSubmitInput signInLink = (HtmlSubmitInput)page.getElementById( "signIn" );
HtmlPage page2 = (HtmlPage)signInLink.click();

_webClient.waitForBackgroundJavaScript( 2000 );

var installsNode = ( from p in page2.getElementsByTagName( "p" ).toArray().Cast<HtmlParagraph>()
                     let data_column = p.getAttribute( "data-column" )
             where data_column != null && "INSTALLS".Equals( data_column, StringComparison.OrdinalIgnoreCase )
             select p ).FirstOrDefault(); 
```

# java - java - 三元运算符的使用

> ID：15522533
> 
> 赞同：3
> 
> 时间：2013-03-20T11:41:08.360
> 
> 标签：java, ternary-operator

我得到了一个包含 4 个不同条件的相当大的代码，我尝试使用这里描述的条件三元运算符来缩短这些[代码](http://alvinalexander.com/java/edu/pj/pj010018)。但是，我无法管理正确的语法，因为我有两个以上的条件。有人可以解释在这种情况下如何使用三元运算符吗？我的代码在下面

不，我不是要为我编写代码，我正在寻找有关在多个条件下使用三元运算符的解释

```
 if (mp.getCurrentPosition() / 1000 / 60 < 10
            && mp.getCurrentPosition() / 1000 % 60 < 10) {
        tvTimeElapsed.setText("0"
                + Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                + ":" + "0"
                + Integer.toString(mp.getCurrentPosition() / 1000 % 60));

    } else if (mp.getCurrentPosition() / 1000 / 60 < 10
            && mp.getCurrentPosition() / 1000 % 60 >= 10) {

        tvTimeElapsed.setText("0"
                + Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                + ":"
                + Integer.toString(mp.getCurrentPosition() / 1000 % 60));

    } else if (mp.getCurrentPosition() / 1000 / 60 >= 10
            && mp.getCurrentPosition() / 1000 % 60 < 10) {

        tvTimeElapsed
                .setText(Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                        + ":"
                        + "0"
                        + Integer.toString(mp.getCurrentPosition() / 1000 % 60));

    } else {

        tvTimeElapsed
                .setText(Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                        + ":"
                        + Integer.toString(mp.getCurrentPosition() / 1000 % 60));

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:48:34.713

这个怎么样，根本没有任何三元组：

```
int seconds = mp.getCurrentPosition() / 1000;
tvTimeElapsed.setText(
    String.format("%02d:%02d", seconds / 60, seconds % 60);
); 
```

您不需要在所有这些条件下重新发明轮子：对于所有这些艰难的选择和东西，有一个内部 Java 字符串格式化程序。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:45:16.107

我必须同意所有评论：它很丑。

```
String textToSet = (mp.getCurrentPosition() / 1000 / 60 < 10 ? 
( mp.getCurrentPosition() / 1000 % 60 < 10 ? "0"
                + Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                + ":" + "0"
                + Integer.toString(mp.getCurrentPosition() / 1000 % 60) : "0"
                + Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                + ":"
                + Integer.toString(mp.getCurrentPosition() / 1000 % 60)) : 
( mp.getCurrentPosition() / 1000 % 60 < 10 ? "0"
                + Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                + ":"
                + Integer.toString(mp.getCurrentPosition() / 1000 % 60) : Integer.toString(mp.getCurrentPosition() / 1000 / 60)
                        + ":"
                        + "0"
                        + Integer.toString(mp.getCurrentPosition() / 1000 % 60)) ) 
```

替换 Integer ：

```
Integer int1 = mp.getCurrentPosition() / 1000 / 60;
Integer int2 = mp.getCurrentPosition() / 1000 % 60;

tvTimeElapsedText = (int1< 10 ? 
                        (int2 < 10 ? 
                            "0" + Integer.toString(int1) + ":" + "0" + Integer.toString(int2) :
                            "0" + Integer.toString(int1) + ":" + Integer.toString(int2)
                        ) :
                        (int2 < 10 ? 
                            Integer.toString(int1) + ":" + "0" + Integer.toString(int2) :
                            Integer.toString(int1) + ":" + Integer.toString(int2)
                        )
                    ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:46:40.597

删除了第一部分

**编辑：**

```
int var1 = mp.getCurrentPosition() / 1000 / 60;
int var2 = mp.getCurrentPosition() / 1000 % 60;

String hour = var1 < 10 ? "0" + var1 : var1;
String minute = var1 < 10 ? "0" + var2 : var2;

String complete = hour + ":" + minute; 
```

# python - 简单的django聊天功能

> ID：15522534
> 
> 赞同：0
> 
> 时间：2013-03-20T11:41:17.107
> 
> 标签：python, django, django-models

我正在尝试使用 django 创建一个非常基本的聊天应用程序。我正在尝试为某人创建一个简单的函数来发布可能更新数组的消息？我不确定该怎么做。非常感谢您的帮助

```
from django.db import models
from django.contrib.auth.models import User

# Create your models here.

class Message(models.Model):
    text = models.CharField(max_length=250)
    date = models.DateTimeField(auto_now=True, blank=True)
    user = models.ForeignKey(User, related_name='chatuser', blank=True)

    class Meta:
        verbose_name_plural = "Messages"
        ordering = ['-date']

    def __unicode__(self):
        return self.text 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T12:01:05.720

可以在[https://github.com/sivaa/django-sample-chat](https://github.com/sivaa/django-sample-chat)中找到使用 django 和 ajax 构建的基本聊天应用程序。克隆应用程序并检查其中给出的代码。

# eclipse - Egit vs Git 显示多个分支的变化？

> ID：15522537
> 
> 赞同：0
> 
> 时间：2013-03-20T11:41:19.903
> 
> 标签：eclipse, git, egit

我们最近迁移到 Git 并在 Eclipse Juno 中使用 Egit，并注意到分支切换存在问题。顺序是：

1.  在 BranchA 中进行更改
2.  不要暂存或提交更改
3.  切换到分支 B
    *   问题：
        *   推荐 stash/abandon/commit 更改没有错误
        *   BranchA 更改出现在 BranchB 中
4.  在 BranchB 中进行更改
5.  不要暂存或提交更改
6.  切换到分支 A
    *   问题：
        *   推荐 stash/abandon/commit 更改没有错误
        *   BranchB 更改显示在 BranchA 中

这似乎非常违反直觉，因为 Egit 似乎在分支之间混合了未提交的更改？我必须做错事，因为这不可能。

当我在 Git 命令行上完成相同的步骤时，我得到了我期望的行为，即放弃/存储/提交警报会停止切换到新分支，并且必须完成其中一个步骤，并且它们不会在分支之间流血。

命令行行为是我所期望的并且是有意义的。有人可以告诉我我的 Egit 经验是否正确，还是应该像命令行一样？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:50:42.267

我不认为你的测试是准确的。命令行也将在没有错误的情况下切换 - 这是这里的重点 - 切换不会覆盖工作目录中任何未提交的更改。

此外，您的术语已关闭：
您不会在分支中进行更改。您在工作目录中进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:45:46.963

未提交的更改不属于*任何*分支。你的心智模型是错误的，工具没有问题。

# vba - 将公式设置为一系列单元格

> ID：15522538
> 
> 赞同：24
> 
> 时间：2013-03-20T11:41:20.753
> 
> 标签：vba, excel, excel-formula

这是我想做的简单演示。我想为一系列单元格设置一个公式（例如 C1 到 C10）。

```
Range("C1").Formula = "=A1+B1" 
```

但是如何使公式使用这样的动态单元格：

```
Range("C1:C10").Formula = "=Ax+Bx" 
```

所以实际上它就像，

```
C1 = A1 + B1
C2 = A2 + B2
C3 = A3 + B3
C4 = A4 + B4
C5 = A5 + B5
...
C10 = A10 + B10 
```

如何更改此公式的 RHS 以使上述工作：`Range("C1:C10").Formula = "=Ax+Bx"`

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-01-07T17:26:07.310

```
Range("C1:C10").Formula = "=A1+B1" 
```

就那么简单。

它使用公式自动填充（FillDown）范围。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-01T18:54:19.210

我认为这是最简单的答案：2 行，非常容易理解。它模拟将单元格中写入的公式拖动到一系列单元格中的功能。

```
Range("C1").Formula = "=A1+B1"
Range("C1:C10").FillDown 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-20T11:44:46.567

我会更新 C1 中的公式。然后从C1复制公式并将其粘贴到C10 ...

不确定更优雅的解决方案

```
Range("C1").Formula = "=A1+B1"
Range("C1").Copy
Range("C1:C10").Pastespecial(XlPasteall) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-12-08T21:45:23.793

使用公式 R1C1：

```
Cells((1,3),(10,3)).FormulaR1C1 = "=RC[-2]+RC[-1]" 
```

与公式不同，FormulaR1C1 具有相对引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-25T04:11:47.713

用这个

```
 Sub calc()

            Range("C1:C10").FormulaR1C1 = "=(R10C1+R10C2)"

            End Sub 
```

# javascript - 使用 css 或 javascript 在用户操作时更改 html 页面上的图标

> ID：15522539
> 
> 赞同：1
> 
> 时间：2013-03-20T11:41:24.300
> 
> 标签：javascript, jquery, css, html

我是一个相当新手的 web 开发，具有`HTML CSS`和`JavaScript`. 我有一个小博客页面，它允许用户对博客文章的标题进行投票——类似于 SoF 对其问题的看法。

所以，我面临的问题是，一旦用户点击它，我不确定如何更改图标（我在精灵中有）。所以，简而言之

```
(Page1) icon1.png --> User Clicks --> (Page1) icon2.png 
```

其中 icon1.png 和 icon2.png 在我的`sprites.png`

我认为 JS 是解决这个问题的方法 - 但我想知道它是否是（正在做某种`AJAX`方式来做到这一点？） - 任何方向都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:03:53.280

```
 $(function(){
    $('#SELECTOR').click(function(){
    $('#icon1').css('background-position','0px, 120px') //whtever bg position
     });
     }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:46:03.230

您可以使用 javascript，如下所示。

单击设置`background`图像位置。

```
document.getElementById('SELECTOR').style.backgroundPosition='0px 150px'; 
```

您要更改图像位置`SELECTOR`的位置在哪里`element's ID`

正如你所说**，你有精灵图像**，所以你只需要相应地设置图像位置。

# javascript - 使用 kanso 从 javascript 将 JSON 文档保存到 couchdb

> ID：15522540
> 
> 赞同：1
> 
> 时间：2013-03-20T11:41:35.257
> 
> 标签：javascript, json, couchdb, kanso

如何通过您的javascript代码使用kanso中的“db”包将JSON文档保存在couchdb上？这是我尝试过的，但它不起作用：

```
var db=require('db').use('it');
db.saveDoc(doc, function(err,response) {
    if(err) {
        alert('Error');
    } else {
        alert('Data Added successfully');
    }
}); 
```

# c# - 通过代码注册一个自定义的PageHandlerFactory

> ID：15522541
> 
> 赞同：2
> 
> 时间：2013-03-20T11:41:43.767
> 
> 标签：c#, asp.net, .net, configuration, webforms

使用 Microsoft.Web.Infrastructure 程序集，我们可以在预应用程序启动阶段注册模块，如下所示：

```
DynamicModuleUtility.RegisterModule(typeof(MyHttpModule)); 
```

是否可以`PageHandlerFactory`在代码中注册 ASP.NET Web 表单中的自定义，而不是像上面使用模块的示例一样？

我目前通过这样的代码连接它，但我发现它太冗长（而且它使得创建快速启动 NuGet 包变得更加困难，因为我必须更改 web.config）：

```
<?xml version="1.0"?>
<configuration>
  <system.webServer>
    <handlers>
      <add name="CustomFactory" verb="*" path="*.aspx"
        type="Shared.CustomPageHandlerFactory, Shared"/>
    </handlers>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:28:34.300

据我所知，没有办法在代码中做到这一点。然而，在我的特殊情况下，解决方案实际上是注册一个 HTTP 模块。

HTTP 模块可以在初始化时挂钩到[HttpApplication.PreRequestHandlerExecute](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.prerequesthandlerexecute.aspx)事件，该事件在页面处理程序工厂创建页面之后但在 ASP.NET 开始执行该页面（和其他处理程序）之前执行。

这是这样一个 HTTP 模块的示例：

```
public class MyHttpModule : IHttpModule
{
    void IHttpModule.Dispose() {
    }

    void IHttpModule.Init(HttpApplication context) {
        context.PreRequestHandlerExecute += 
            this.PreRequestHandlerExecute;
    }

    private void PreRequestHandlerExecute(object s, EventArgs e) {
        IHttpHandler handler = 
            this.application.Context.CurrentHandler;

        // CurrentHandler can be null
        if (handler != null) {
            // TODO: Initialization here.
        }            
    }
} 
```

# jquery - jQuery slideToggle 使用 .on 切换到特定高度

> ID：15522542
> 
> 赞同：1
> 
> 时间：2013-03-20T11:41:43.723
> 
> 标签：jquery, slidetoggle

单击元素时，我需要进行简单的滑动切换，但是该事件需要使用 .on 事件，并且我还只需要将元素折叠到特定高度，同时在展开时允许任何高度。

换句话说，我无法弄清楚如何实现这一点： [https ://stackoverflow.com/a/4965021/162642](https://stackoverflow.com/a/4965021/162642)

进入这个：

```
$(document).on("click",'.SomeElement',function(e)
{
    e.preventDefault();
    // toggle here
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:58:07.040

试试这个：

```
$(document).on("click", ".SomeElement", function() {
  if($(this).hasClass("toggled")) {
    $(this).animate({"height": "100px"}).removeClass("toggled");
  } else {
    $(this).animate({"height": "50px"}).addClass("toggled");
} 
```

# magento - Magento - 管理后端的订单视图页面上没有显示任何项目

> ID：15522544
> 
> 赞同：1
> 
> 时间：2013-03-20T11:41:46.697
> 
> 标签：magento, magento-1.7

由于某种原因，订购的商品不再呈现在后端的“订单视图”页面上。

![在此处输入图像描述](../Images/6a51b4557b96c9bc893a5c88844f4e02.png)

但它们是在运输详细信息页面上呈现的：

![在此处输入图像描述](../Images/d60c927f6fb5b29006f75d49a9a773c9.png)

我已经完全清除了缓存。

查看源代码，灰色标题栏“订购的物品”下方没有呈现任何内容。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T15:05:41.290

尝试再次上传文件夹 /app/design/adminhtml/。对我来说它的工作！

# java - 为什么 HashMap 值不在 List 中转换？

> ID：15522546
> 
> 赞同：85
> 
> 时间：2013-03-20T11:41:51.060
> 
> 标签：java, arraylist, collections, hashmap

我将值放入形式为的哈希图中，

```
Map<Long, Double> highLowValueMap=new HashMap<Long, Double>();
highLowValueMap.put(1l, 10.0);
highLowValueMap.put(2l, 20.0); 
```

我想通过使用`values()`地图的方法创建一个列表。

```
List<Double> valuesToMatch=new ArrayList<>();
valuesToMatch=(List<Double>) highLowValueMap.values(); 
```

或者

```
List<Double> valuesToMatch=(List<Double>) highLowValueMap.values(); 
```

但是，它会引发异常：

> 线程“主”java.lang.ClassCastException 中的异常：
> java.util.HashMap$Values 无法转换为 java.util.List

但它允许我将其传递给创建列表：

```
List<Double> valuesToMatch  = new ArrayList<Double>( highLowValueMap.values()); 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-20T11:45:05.157

# TL;博士

```
List<V> al = new ArrayList<V>(hashMapVar.values()); 
```

# 解释

因为`HashMap#values()`返回 a`java.util.Collection<V>`并且您不能将 a`Collection`转换为 a `ArrayList`，因此您得到`ClassCastException`.

我建议使用`ArrayList(Collection<? extends V>)`构造函数。`Collection<? extends V>`此构造函数接受一个作为参数实现的对象。`ClassCastException`当你通过这样的结果时你不会得到`HashMap.values()`：

```
List<V> al = new ArrayList<V>(hashMapVar.values()); 
```

# 深入了解 Java API 源代码

**HashMap#values()：**检查源代码中的返回类型，并问自己，可以将 a`java.util.Collection`转换为`java.util.ArrayList`吗？不

```
public Collection<V> values() {
    Collection<V> vs = values;
    return (vs != null ? vs : (values = new Values()));
} 
```

**ArrayList(Collection)：**检查源中的参数类型。参数是超类型的方法可以接受子类型吗？是的

```
public ArrayList(Collection<? extends E> c) {
    elementData = c.toArray();
    size = elementData.length;
    // c.toArray might (incorrectly) not return Object[] (see 6260652)
    if (elementData.getClass() != Object[].class)
        elementData = Arrays.copyOf(elementData, size, Object[].class);
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-20T11:45:31.627

阅读JavaDoc可以找到答案

该`values()`方法返回一个`Collection`

所以

```
List<Double> valuesToMatch=(List<Double>) highLowValueMap.values(); 
```

应该

```
Collection<Double> valuesToMatch= highLowValueMap.values(); 
```

您仍然可以像遍历列表一样遍历此集合。

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#values%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#values%28%29)

* * *

这有效：

```
List<Double> valuesToMatch  = new ArrayList<Double>( highLowValueMap.values() ); 
```

因为`ArrayList`有一个接受集合的构造函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T11:45:40.997

这是因为根据源代码`values()`返回的是类型，因此不能强制转换为.`Collection``HashMap``AbstractCollection``List`

您可以实例化`ArrayList`传递它的`values()`结果，因为`ArrayList`构造函数可以`Collection`作为它的参数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-20T11:45:27.447

如果您已经创建了 List 子类型的实例（例如，ArrayList、LinkedList），您可以使用 addAll 方法。

例如，

```
valuesToMatch.addAll(myCollection) 
```

许多列表子类型也可以在其构造函数中获取源集合。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T11:46:04.550

你检查过API，[`values()`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#values%28%29)方法返回什么？ArrayList[构造函数](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28java.util.Collection%29)接受什么？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-15T11:57:38.893

我遇到了同样的问题，但后来我意识到 values() 返回 Collection，而不是 List。但是我们可以像这样实例化一个新的 ArrayList：

列出 valuesToMatch = new ArrayList(highLowValueMap.values());

因为 ArrayList 有一个可以将 Collection 作为其参数的构造函数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T11:45:08.077

嗯，这是因为你的值真的是一个 HashSet。您可以编写这样的代码来迭代集合：

```
List<Double> valuesToMatch=new ArrayList<>();
for(Double d : highLowValueMap.values(){
  valuesToMatch.put(d);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-20T11:57:07.733

`Values`是类中的一个内部类`HashMap`（见 $ 符号`java.util.HashMap$Values`）。
HashMap.values() 方法将返回 `Values`未实现`List`接口的类对象。也是如此`ClassCastException`。
这是`Values`HashMap 中的内部私有类，它没有实现`List`接口。甚至 AbstractCollection 也没有实现`List`接口。
`AbstractCollection`实现`Collection`接口。所以无法投射到`List`.

```
private final class Values extends AbstractCollection<V> {
        public Iterator<V> iterator() {
            return newValueIterator();
        }
        public int size() {
            return size;
        }
        public boolean contains(Object o) {
            return containsValue(o);
        }
        public void clear() {
            HashMap.this.clear();
        }
    } 
```

**更新**

以下是 ArrayList 中的构造函数之一。

```
public ArrayList(Collection<? extends E> c) {
        elementData = c.toArray();
        size = elementData.length;
        // c.toArray might (incorrectly) not return Object[] (see 6260652)
        if (elementData.getClass() != Object[].class)
            elementData = Arrays.copyOf(elementData, size, Object[].class);
    } 
```

所以`hashmapObj.values()`方法返回类型是`Collection`. 现在哪个类正在实现这个 Collection 接口？答案是`Values`HashMap 类（内部类）中的类。from 的返回值`hashmapObj.values()`可以传递给上面有效的 ArrayList 构造函数。

即使以下是有效的陈述。

```
HashMap<String, String> map  = new HashMap<String, String>();
Collection c = map.values(); 
```

但以下说法不正确

```
HashMap<String, String> map  = new HashMap<String, String>();
List c = map.values(); //compilation error.. return type is not List 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-04T15:52:34.357

我怀疑选择的最佳答案，它说：“因为 HashMap#values() 返回一个 java.util.Collection 并且你不能将 Collection 转换为 ArrayList，因此你会得到 ClassCastException。”

不是因为Collection不能强制转换为ArrayList，真正的原因是HashMap.values()返回的Collection是被内部类HashMap.Values备份的。而且 HashMap.Values 不是 ArrayList 的超类。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-05-13T15:21:37.673

要将 Map 实例中的值转换为列表，您可以使用`Iterable<T>.map`

```
val yourList: List<Any> = #Map.values.map { it } 
```

# git - Git（SourceTree）：报告文件更改，日期间隔不重复

> ID：15522547
> 
> 赞同：1
> 
> 时间：2013-03-20T11:41:52.583
> 
> 标签：git, publishing

我正在寻找一个可以让我开心的非常有用的功能，我搜索但一无所获。我正在 GIT ( [SourceTree](http://www.atlassian.com/software/sourcetree/overview) ) 下从事一个非常大的项目，我对放置在不同位置的不同源文件进行了很多更改。现在我想发布我所有的作品，但只是我的，不是所有的文件。

由于我不信任自动脚本，我想要一份自上次发布以来已更改的所有文件的列表，因此我可以手动上传它们。

从 SourceTree 的 GUI 中，我可以搜索迄今为止的所有提交，并查看每个提交的所有文件更改，但这并不是很有用，因为同一个文件已经更改了不止一次，因此我应该注意我已经上传了哪个文件。

有没有办法对时间间隔内更改的所有文件名+路径进行单一完整报告？通过这种方式，从最后一次提交（以原点/主控）开始，我将能够完成我的任务。

谢谢，

Linuxatico

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T11:03:59.847

好吧，我发现在我的实际版本的 SourceTree (1.6.4.1) 中，如果您使用鼠标选择并移动开始提交和最终提交，它会准确显示我正在寻找的内容：只出现一次修改过的文件

# authentication - ASP .NET MVC 4 将连接查询结果放入视图模型并将其传递给视图

> ID：15522550
> 
> 赞同：0
> 
> 时间：2013-03-20T11:41:58.893
> 
> 标签：authentication, asp.net-mvc-4, viewmodel, identity

我是 MVC 的新手，我需要对 ASP .NET MVC 的一些概念有所了解。

在业余时间，我正在尝试了解有关 MVC 构建 Web 应用程序以管理一些用户内容的更多信息。[有关更多详细信息，您可以在此处](https://stackoverflow.com/questions/12458683/asp-net-mvc-how-to-manage-user-content-using-asp-net-membership-provider)查看我之前关于同一应用程序的问题。

现在我被困在应该将视图模型传递给视图的控制器操作上，我需要知道一些事情。**所以我想知道我是否以及在哪里做错了**。

1）在**PortafoglioIndexViewModel**我添加了一个用户属性来获取视图内的用户名。在视图中，我调用`Model.Username` **以在页面上显示用户名**。它有效，但由于我`IEnumerable<>`从`@model`指令中删除了，我无法再遍历该对象。我的代码和循环内部的**智能感知标记为红色。** `@Html.DisplayNameFor(model => model...)``@Html.DisplayFor(modelItem => item...)``foreach`

如果我更改`@model`为`IEnumerable<FundMonitor.Web.ViewModels.PortafoglioIndexViewModel>`，那么我可以遍历对象，但如果我调用，`Model.Username`我将不再获得对象属性，因为它是一个 IEnumerable。**因此，在这种情况下，我发现获取 Username 属性**的唯一方法是`@using FundMonitor.Web.ViewModels`在视图顶部添加，然后进行强制转换，`((PortafoglioIndexViewModel)Model).Username`但我认为这不是最佳实践......

那么我怎样才能得到山羊和卷心菜呢？

2）我在动作中**填充和生成视图模型**`Index`的方式对吗？

3）什么是获取用户名/用户ID的更好方法，因为我需要它们在几乎每个控制器中检查用户身份并**只获取用户在数据库上的正确记录**？

**控制器动作：**

```
[Authorize]
public class PortafoglioController : Controller
{
    private readonly FundMonitorDb _db = new FundMonitorDb();

    //
    // GET: /Portafoglio/

    public ActionResult Index()
    {
        string userName = null;

        if (HttpContext.User.Identity.IsAuthenticated)
        {
            userName = HttpContext.User.Identity.Name;
        }

        var result = from p in _db.Portafogli
                     join u in _db.UserProfiles on p.UserId equals u.UserId
                     where u.UserName.Equals(userName)
                     select new PortafoglioIndexViewModel
                         {
                             Id = p.Id,
                             DataCreazione = p.DataCreazione,
                             Etichetta = p.Etichetta,
                             NumeroFondi = p.Fondi.Count(),
                             Username = userName
                         };

        return View(result);
    }
} 
```

**视图模型：**

```
public class PortafoglioIndexViewModel
{
    public int Id { get; set; }

    [Display(Name = "Etichetta")]
    public string Etichetta { get; set; }

    [Display(Name = "Creato il"), DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    public DateTime DataCreazione { get; set; }

    [Display(Name = "N. fondi")]
    public int NumeroFondi { get; set; }

    public string Username { get; set; }
} 
```

**风景：**

```
@model FundMonitor.Web.ViewModels.PortafoglioIndexViewModel

@{
    ViewBag.Title = "Portafogli di " + Model.Username;
}

<h2>I miei portafogli</h2>

<p>
    @Html.ActionLink("Crea nuovo", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Etichetta)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DataCreazione)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NumeroFondi)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Etichetta)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DataCreazione)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NumeroFondi)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:00:27.277

一种方法是创建一个包含用户详细信息和`IEnumerable`of`PortafoglioIndexViewModel`的 ViewModel，如下所示：

**第 1 步：**创建新的包装器，`WrapperViewModel`（作为示例名称）：

```
public class WrapperViewModel
{
    public string Username { get; set; }
    public IEnumerable<PortafoglioIndexViewModel> Children { get; set; }

    public WrapperViewModel()
    {

    }

    public WrapperViewModel(string userName, IEnumerable<PortafoglioIndexViewModel> children)
    {
        Username = userName;
        Children = children;
    }

} 
```

**第 2 步：**在控制器中，`WrapperViewModel`使用您的结果填充并传递给视图。所以替换`return View(result);`为：

```
return View(new WrapperViewModel(userName, result)); 
```

**第 3 步：**需要更改视图以适应新的`WrapperViewModel`：

```
@model FundMonitor.Web.ViewModels.WrapperViewModel

@{
    ViewBag.Title = "Portafogli di " + Model.Username;
}

<h2>I miei portafogli</h2>

<p>
    @Html.ActionLink("Crea nuovo", "Create")
</p>

@if (Model.Children != null)
{
    <table>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Children.First().Etichetta)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Children.First().DataCreazione)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Children.First().NumeroFondi)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Children)
        {
            <tr>
                <td>
                    @Html.DisplayFor(x => item.Etichetta)
                </td>
                <td>
                    @Html.DisplayFor(x => item.DataCreazione)
                </td>
                <td>
                    @Html.DisplayFor(x => item.NumeroFondi)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                </td>
            </tr>
        }

    </table>
} 
```

希望这能给你一些方向......

# c# - 多个字段上的 ASP.Net JQuery customvalidator

> ID：15522551
> 
> 赞同：1
> 
> 时间：2013-03-20T11:42:00.683
> 
> 标签：c#, jquery, asp.net, validation, customvalidator

我正在尝试使用 JQuery 在 ASP.net 中使用自定义验证器对多个字段进行验证，但我无法让它工作。

有一个包含两个值的下拉框，基于这些值出现其他项目。

因此，如果用户选择选项 1，则会出现一个文本框，如果他们选择选项 2，则文本框会消失并出现两个下拉框。

根据他们选择的选项，我想验证他们的输入。

到目前为止我没有工作的是

.ASPX

```
<asp:DropDownList ID="drpHeight" runat="server">
                            <asp:ListItem Value="CMs">CMs</asp:ListItem>
                            <asp:ListItem Value="Feet">Feet</asp:ListItem>
                        </asp:DropDownList>

<asp:TextBox ID="txtCm" runat="server" Width="100px"></asp:TextBox>
                         <asp:CustomValidator ID="CustomValidator9" runat="server" ErrorMessage="Please select you height" 
                    ClientValidationFunction = "ValidateHeight" Display="Dynamic" ControlToValidate="txtCm" ValidateEmptyText="true"></asp:CustomValidator> 
<asp:RegularExpressionValidator ID="revCm" runat="server" 
                    ControlToValidate="txtCm" Display="Dynamic" 
                    ErrorMessage="Please enter a valid number" 
                    ValidationExpression="^([0-9]*|\d*\.\d{1}?\d*)$" SetFocusOnError="True"></asp:RegularExpressionValidator>

<br />
<br />

<asp:DropDownList ID="drpFeet" runat="server">
                            <asp:ListItem Value="-1">Select...</asp:ListItem>
                            <asp:ListItem Value="1"></asp:ListItem>
                            <asp:ListItem Value="2"></asp:ListItem>
                            <asp:ListItem Value="3"></asp:ListItem>
                            <asp:ListItem Value="4"></asp:ListItem>
                            <asp:ListItem Value="5"></asp:ListItem>
                            <asp:ListItem Value="6"></asp:ListItem>
                            <asp:ListItem Value="7"></asp:ListItem>
                            <asp:ListItem Value="8"></asp:ListItem>
                        </asp:DropDownList>
                            <asp:Label ID="lblFeet" runat="server" Text="Ft"></asp:Label>
                        &nbsp;<asp:DropDownList ID="drpInches" runat="server">
                            <asp:ListItem Value="-1">Select...</asp:ListItem>
                            <asp:ListItem Value="0"></asp:ListItem>
                            <asp:ListItem Value="1"></asp:ListItem>
                            <asp:ListItem Value="2"></asp:ListItem>
                            <asp:ListItem Value="3"></asp:ListItem>
                            <asp:ListItem Value="4"></asp:ListItem>
                            <asp:ListItem Value="5"></asp:ListItem>
                            <asp:ListItem Value="6"></asp:ListItem>
                            <asp:ListItem Value="7"></asp:ListItem>
                            <asp:ListItem Value="8"></asp:ListItem>
                            <asp:ListItem Value="9"></asp:ListItem>
                            <asp:ListItem Value="10"></asp:ListItem>
                            <asp:ListItem Value="11"></asp:ListItem>
                        </asp:DropDownList>
                        &nbsp;<asp:Label ID="lblInches" runat="server" Text="Inches"></asp:Label> 
<br />
<br /> 
```

jQuery

```
 function ValidateHeight(sender, args) {

        if ($('#<%=drpHeight.ClientID%>').val = "CMs") {

            if ($('#<%=txtCm.ClientID%>').val().length > 0) {
                args.IsValid = true;

            }

            else {
                args.IsValid = false;
                return;
            }

        }

        else if ($('#<%=drpHeight.ClientID%>').val = "Feet") {
            args.IsValid = true;
        }
    }
        </script> 
```

目前它不起作用，我确实让它验证了 CM b，但后来它停止了工作，现在我不知道为什么。

解决这个问题的最佳方法是什么？我还有另一个重量要做，一个有 3 种输入可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:32:42.200

我终于找到了答案，我将为任何想知道如何做到这一点的人提供答案。

将我的客户验证器更改为：

```
 <asp:CustomValidator ID="CustomValidator9" runat="server" ErrorMessage="Please select you height" 
                    ClientValidationFunction = "ValidateHeight" Display="Dynamic" ValidateEmptyText="true"></asp:CustomValidator> 
```

然后我的 JQuery 变成了

```
<script type="text/javascript">

    function ValidateHeight(sender, args) {

        var drpHeight = $('#<%=drpHeight.ClientID%>').val();

        if (drpHeight == "CMs") {

            if ($('#<%=txtCm.ClientID%>').val().length > 0) {
                args.IsValid = true;
                return;

            }

            else {
                args.IsValid = false;
                return;
            }

        }

        else if (drpHeight == "Feet") {

            var drpFeet = $('#<%=drpFeet.ClientID%>').val();
            var drpInches = $('#<%=drpInches.ClientID%>').val();

            if (drpFeet == -1 || drpInches == -1) {
                args.IsValid = false;
                return;                    
            }
            else {
                args.IsValid = true;
                return;
            }
        }            

        }
</script> 
```

# java - 重构和混淆java中的所有变量名

> ID：15522552
> 
> 赞同：0
> 
> 时间：2013-03-20T11:42:03.273
> 
> 标签：java, obfuscation, proguard

我尝试使用 ProGuard 和 NetBeans 来混淆该类。反编译后，我看到它只是重命名局部变量名称。

谁能帮我解释一下如何重构包括公共成员在内的所有变量名称。我可以自己在 NetBeans 中做到这一点，但这需要很长时间。此外，ProGuard 混淆了所有内容，甚至是库；我只想混淆我的课程。库是否被混淆并不重要。

例如，我的全局类包含如下变量：

```
public class D {
    public static boolean doneSplash = false;
    public static boolean bossActive = false;
..... 
```

有没有办法让它像...

```
public class D {
    public static boolean asdsa6d = false;
    public static boolean xgrrret7 = false;
..... 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:23:04.103

使用 proguard gui 并取消选中以下选项

```
skip non public library class 
skip non public library class members 
```

# iphone - 为什么-[UISectionRowData refreshWithSection:tableView:tableViewRowData:] 中的断言失败？

> ID：15522554
> 
> 赞同：5
> 
> 时间：2013-03-20T11:42:05.543
> 
> 标签：iphone, uitableview

```
 Assertion failure in -[UISectionRowData refreshWithSection:tableView:tableViewRowData:], /SourceCache/UIKit/UIKit-2380.17/UITableViewRowData.m:400

 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException',     reason:'Failed to allocate data stores for 997008923 rows in section 0\. Consider using fewer rows' 
```

我的代码

```
 -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {

   return 1;

  }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

   return [appDelegate.purchaseArray count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath
   {
    static NSString *CellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault         reuseIdentifier:CellIdentifier];
    }
    return cell;
}    

-(void)viewWillAppear:(BOOL)animated
{

    [cartTbl reloadData];

} 
```

我没明白这有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-20T09:56:28.840

检查您的`tableView:heightForRowAtIndexPath:`. 也许你正在返回类似`NaN`//而不是高度的东西`+inf`。`-inf`那是我的错误。

请记住，这不是除以零的类型`double`和类型的崩溃：`float`

```
double d = 5.0;
double r = d/0.0; 
```

所以这可以帮助你：

```
if (isnan(r) || isinf(r)) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-27T11:19:32.947

我也失败了`-[UISectionRowData refreshWithSection:tableView:tableViewRowData:]`。在我的情况下，这是由于使用时设置太小造成的`estimatedRowHeight`：

```
func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    return UITableViewAutomaticDimension
} 
```

用于自动调整 tableView 的单元格。设置`estimatedRowHeight`改为`2.0`解决`1.0`问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-26T12:53:38.190

由于不同的原因，我遇到了这样的错误。当我决定更改视图模型中的某些内容（我将表绑定到的对象）时，我的应用程序运行良好。我删除了一个属性，然后重新编译。突然，应用程序抛出了这个错误。

事实证明，代码中仍然存在对编译器没有捕获到的已删除属性的引用。我已经清理和重建了几次，编译器从未发现我错过的那个错误。

重新启动 xcode 导致构建失败，违规行现在突出显示为错误。一旦我解决了这个问题，一切就又好了。

如果您遇到这样的错误访问错误，并在调试器中看到奇怪的东西，例如属性的值应该分配给其他属性，那么您可能会遇到一个错误，该错误应该使您的构建无法编译该 xcode 只是没有捕获不知何故。重新启动可能会解决它 - 值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T18:41:51.763

`return [appDelegate.purchaseArray count];`看起来像一个垃圾值。确保它已初始化。

# php - PHP MySQL：为什么我的表单加载的是纯文本页面？

> ID：15522565
> 
> 赞同：0
> 
> 时间：2013-03-20T11:42:54.740
> 
> 标签：php, mysql, database, passwords

我试图实现一个在数据库中更改密码的表单，但是，当我在表单上提交详细信息时，它只是将我定向到目标页面......但显示出来并且浏览器上的纯文本代码...... .为什么要这样做！

表格：

```
 <h1 align="center">Change Password</h1>

            <form method="POST" action="reset_pwd.php">
                <table class='altrowstable' id='alternatecolor' >
                    <tr>
                        <td align="right">Username: </td>
                        <td><input type="TEXT" name="username" value=""/></td>
                    </tr>
                    <tr>
                        <td align="right">Current Password: </td>
                        <td><input type="password" name="password" value=""/></td>
                    </tr>
                    <tr>
                        <td align="right">New Password: </td>
                        <td><input type="password" name="npassword" value=""/></td>
                    </tr>
                    <tr>
                        <td align="right">Repeat New Password: </td>
                        <td><input type="password" name="rpassword" value=""/></td>
                    </tr>
                    <tr><td align="center">
                        <a href="forgot_password.php">Forgot password</a>
                        </td>
                   <td>
                        <input type="submit" name="submit" value="Change Password"/>
                        </td>
                    </tr>
                </table>

            </form>
        <br>
 <?php echo $msg; ?> 
```

和目标php页面：

```
<?php
include('dbconfig.php');

$msg = "";

if (mysql_real_escape_string($_POST['submit'])):

    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string(md5($_POST['password']));
    $npassword = mysql_real_escape_string(md5($_POST['npassword']));
    $rpassword = mysql_real_escape_string(md5($_POST['rpassword']));

    $sql = "SELECT * FROM user_info WHERE user_id = '$username' ";
    $query = mysql_query($sql);
    $numrows = mysql_num_rows($query);

    while ($rows = mysql_fetch_array($query)):

        $dbusername = $rows['username'];
        $dbpassword = $rows['password'];
        $dbfirstname = $rows ['firstname'];
        $dblastname = $rows ['lastname'];

    endwhile;

    if (empty($username) || empty($password) || empty($npassword) || 
    empty($rpassword)):

        $msg = "All fields are required";

    elseif ($numrows == 0):

        $msg = "This username does not exist";

    elseif ($password != $dbpassword):

        $msg = "The CURRENT password you entered is incorrect.";

    elseif ($npassword != $rpassword):

        $msg = "Your new passwords do not match";

    elseif ($npassword == $password):

        $msg = "Your new password cannot match your old password";

    else:

        mysql_query("UPDATE user_info SET password = '$npassword' WHERE user_id = 
         '$username'");

        $to = $email;

        $subject = "YOUR PASSWORD HAS BEEN CHANGED";

        $message = "<p>Hello $dbfirstname $dblastname. You've received this E-Mail
        because you have requested a PASSWORD CHANGE. ";

        $from = "myemail@.com";

        $headers = "From: $from";

        mail($to,$subject,$message,$headers);

        endif;
  endif;

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:51:24.307

目标 php 中的第一个 $msg 仅用于目标 php，不会将值返回到表单

其次，您可能会寻找 if (isset($_POST['submit'])): 而不是 if (mysql_real_escape_string($_POST['submit'])):

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:49:28.030

请检查...“user_info”表中“user_id”的类型是什么...以及您在表单中的用户名字段中获得了什么。

我在问这个查询......

```
$sql = "SELECT * FROM user_info WHERE user_id = '$username' "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:45:13.693

没有来自目标页面的 html 响应将显示在浏览器中。为了显示内容，您需要形成正确的 html 以便它可以在浏览器中显示。

在目标页面的末尾添加以下 html 代码，以便显示消息（验证或成功）。

```
<html><body>put your message here</body></htm> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:53:58.020

您可能忘记了包含文件“dbconfig.php”末尾的额外？>，从而将目标 php 页面视为 html。

# database - Grails 2.1.4 - 数据库迁移 - dbm-gorm-diff 上的错误

> ID：15522566
> 
> 赞同：2
> 
> 时间：2013-03-20T11:43:07.337
> 
> 标签：database, grails, database-migration

我需要更改我的数据库。为此，我安装了数据库迁移插件。

```
plugins {
   …
   runtime ':database-migration:1.3.2'
} 
```

我找到了一个关于[这个插件使用的教程。](http://wpgreenway.com/posts/grails-db-migration-tutorial/)

我的步骤是：

```
 grails dbm-generate-changelog changelog.groovy
  grails dbm-changelog-sync 
```

在这两个步骤之后，我更改了一个域类：

```
class Event {
     ...
     Date lastAccessed
} 
```

至：

```
class Event {
     ...
     Date dateCreated
     Date lastUpdated
} 
```

根据我现在需要运行的教程和文档：

```
grails dbm-gorm-diff 
```

我做了这个

```
grails dbm-gorm-diff add-timestamps-to-event.groovy --add 
```

在这部分我得到了错误。

堆栈跟踪：

```
| Starting dbm-gorm-diff
12:38:20,561 - ERROR - org.codehaus.groovy.grails.plugins.DefaultGrailsPlugin  - Error     configuration scaffolding: Error creating bean with name 'instanceControllersApi': Singleton   bean creation not allowed while the singletons of this factory are in destruction (Do not   request a bean from a BeanFactory in a destroy method implementation!)
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'instanceControllersApi': Singleton bean creation not allowed while the singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
at java.lang.Thread.run(Thread.java:722) 
```

我不知道这是从哪里来的。

非常感谢您的任何建议。

# qt - webRTC：qtwebkit2.3 中的 getusermedia 不起作用

> ID：15522573
> 
> 赞同：1
> 
> 时间：2013-03-20T11:43:24.847
> 
> 标签：qt, qtwebkit, webrtc, getusermedia

我正在 qt 中做一个项目，我正在尝试在花式浏览器中启用 webRTC。我想为此使用 QT4.8，所以我下载了 qtWebKit2.3，并且通过启用媒体流成功构建。但问题是，当我运行使用 getusermedia 的网页时，它无法访问我的网络摄像头。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T06:34:40.623

webrtc 目前在 qt4.8 或 5 的 qtwebkit 中没有启用，但是您可以使用 google 的**libjingle**库在 QT5 中启用相同的功能。我几乎成功地使用了getusermedia api ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:35:47.137

问题是 qtwebkit 目前不支持 WebRTC。

# java - java.util.Date.parse() 在解析 Wed Apr 03 00:00:00 BST 2013 时抛出异常

> ID：15522575
> 
> 赞同：0
> 
> 时间：2013-03-20T11:43:25.553
> 
> 标签：java

为什么会抛出异常，那个日期很简单，不是吗？

```
long date  = Date.parse(request.getParameter("date")); //Wed Apr 03 00:00:00 BST 2013
String formattedDate = new SimpleDateFormat("dd/MM/yyyy").format(date);
reportParams.put("p_date", formattedDate); 
```

> 引起：java.util.Date.parse(Date.java:595) 处的 java.lang.IllegalArgumentException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:47:47.947

不要`Date.parse()`用来解析日期。正如您在[API 文档](http://docs.oracle.com/javase/7/docs/api/)中看到的那样，该方法已被弃用，这意味着它已被另一种方法替换。API 文档甚至提到了您应该改用什么：`DateFormat.parse()`.

使用与您的输入字符串匹配的格式创建一个`SimpleDateFormat`对象，并使用它将其解析为一个`Date`对象。

```
String text = "Wed Apr 03 00:00:00 BST 2013";
DateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy", Locale.ENGLISH);
Date date = df.parse(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:48:10.623

主要问题是字符串末尾有日期。它应该在月份之后出现，例如：

> 2013 年 4 月 3 日星期三 00:00:00 BST

请[阅读文档](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#parse%28java.lang.String%29)以获取完整说明。另请注意，`Date.parse`不赞成使用`DateFormat.parse`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:49:37.410

1) Date.parse 已弃用

2) Date.parse API 说它*接受很多语法；特别是，它识别 IETF 标准日期语法：“Sat, 12 Aug 1995 13:30:00 GMT”。它还可以理解美国大陆时区缩写，但对于一般用途，应使用时区偏移量：“Sat, 12 Aug 1995 13:30:00 GMT+0430”（格林威治以西 4 小时 30 分钟）子午线）。如果未指定时区，则假定为本地时区。GMT 和 UTC 被认为是等效的。*但是您的语法没有描述。

3) 改用 SimleDateFormat

# html - 3 div 的中间 div 占用剩余宽度

> ID：15522578
> 
> 赞同：14
> 
> 时间：2013-03-20T11:43:52.227
> 
> 标签：html, css

好吧，伙计们，我一直在为这个而烦恼。

我有三个 div；左，中，右。全部 100% 高度。左右 div 的宽度固定为 150px。现在我希望中间 div 占据剩余空间。

示例：[这里](http://postimage.org/image/z6fp30ztd/)

CSS：

```
#left {
    height:100%;
    width:150px;
    float:left;
    background:red;
    z-index:999;
}
#middle {
    height:100%;
    width:100%;
    background:yellow;
    margin-left:-150px;
    margin-right:-150px;
}
#right {
    float:right;
    height:100%;
    width:150px;
    background:red;
    z-index:998;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T11:45:56.290

使用`display: table`：

```
#container {
    display: table;
    width: 100%;
}

#left, #middle, #right {
    display: table-cell;
}

#left, #right {
    width: 150px;
} 
```

`#container`你的父元素在哪里

```
<div id="container">
    <div id="left"></div>
    <div id="middle"></div>
    <div id="right"></div>
</div> 
```

这是一个[小提琴](http://jsfiddle.net/AjgNM/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:47:29.597

检查这个**[类似的答案](https://stackoverflow.com/a/12621751/1033200)**

**HTML**

```
<div class = "container">
    <div class = "fixed">
        I'm 150px wide! Glee is awesome!
    </div>
    <div class = "fluid">
        I'm fluid! Glee is awesome!
    </div>
    <div class = "fixed">        
        I'm 150px wide! Glee is awesome!
    </div>
</div> 
```

**CSS**

```
html, body {
    height: 100%;
    font-family: 'Arial', 'Helvetica', Sans-Serif;
}
.container {
    display: table;
    width: 100%;
    height: 100%;
}
.container > div {
    display: table-cell;
    text-align: center;
}
.fixed {
    width: 150px;
    background: rgb(34, 177, 77);
    color: white;
}
.fluid {
    background: rgb(0, 162, 232);
} 
```

**[演示](http://jsfiddle.net/glee/SHnc9/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-13T14:03:04.150

好的，使用[flex](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)并基于[这个答案](https://stackoverflow.com/a/40660209/2648297)

```
#parent {
  display: flex;
}
#left {
  width:150px;
  background-color:#ff0000;
}
#middle {
  flex: 1 1 auto;
  background-color:#00ff00;
}
#right {
  width: 150px;
  background-color:#0000ff;
}
```

```
<div id="parent">
  <div id="left">left</div>
  <div id="middle">middle</div>
  <div id="right">right</div>
</div>
```

如果左右 div 也具有可变宽度，这实际上是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T10:13:10.623

如果你不想使用表格单元格并且不想给你的外框一个固定的宽度（而是让它们的宽度由它们的内容决定，你可以使用溢出隐藏和浮动方法）

这种方法的坏处是你必须坚持在你的 div 上隐藏溢出，而且你必须以向后的方式排列你的 div（见下文）

[演示](https://jsfiddle.net/146e1e3z/)

**HTML**

```
<div class='container'>

    <div class='third-box'>Third</div>

    <div class='first-second'>
        <div class='first-box'>First</div>
        <div class='second-box'>Second</div>
    </div>

</div> 
```

**CSS**

```
.container {
     width: 400px;
}

.first-second {
    overflow: hidden;
}

.first-box {
    float: left;
    background-color: coral;
}

.second-box {
    overflow: hidden;
    background-color: aquamarine;
}

.third-box {
    float: right;
    background-color: salmon;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T12:28:22.767

我用它来为侧面的项目设置一个灵活的宽度。在列出的项目中使用它以获得侧面带有 2 个按钮的进度条。

```
ul {
    display: table;
    width: 100%;
}

ul > li {
    display: table-cell;
}

ul > li:nth-child(2) {
    min-width: 100%;
} 
```

# html - 如何使移动网站中的边距和边框不可见 html/css

> ID：15522579
> 
> 赞同：0
> 
> 时间：2013-03-20T11:43:59.357
> 
> 标签：html, css, border

```
 *{
    margin:0;
    padding:0;
    border:0;
    font-family: Helvetica, sans-serif;
    -webkit-text-size-adjust:none;
}

#menubar * { padding: 0; margin: 2; }
    body { padding: 5px; font-family: Helvetica, Arial, sans-serif; width:95%; font-size:12px}
    #menubar ul{
 text-align:center;
}
    #menubar ul li { display:inline-block; padding: 2px;  position: relative; margin-left:-10px; margin-right:-20px; margin:invisible; }
    #menubar ul a { display: table-cell; vertical-align: middle; width: 80px; height: 30px; text-align:center; background: #FFF; color:#000; border-style: solid; border-width:2px; border-color:#1570a6; text-decoration: none; }
#menubar li:after{
 border-left:50px solid black;
border-right:60px solid black;
content:"";
position:relative;
left:-12px;
top:-18px;  
z-index:-1;
display:block;
height:1px;
} 
```

我在标题上得到了这段代码，我将边距和边框设置为 0，但是当我预览网页时，我仍然在两侧得到一个空白区域。有什么建议么？

这是我为手机制作的网页，所以如果你想获得适当的用户体验，你可以用手机浏览它[http://obdkey.comyr.com/Home.html](http://obdkey.comyr.com/Home.html)

这是网站的临时域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:50:34.383

你的身体仍然有 5px 的填充，将其设置为：

```
body {
    padding:0px;
} 
```

你有一个

```
<br /> 
```

这导致了页面底部的空白。

此外，您的宽度设置为 95%，这导致右侧的空间。不确定这是否是故意的，但认为值得一提，以防你也试图摆脱那个空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:51:11.597

```
body { padding: 5px; 
```

这可能是您的问题，请尝试删除此属性。

# ssis - 从 ssis 中的日期查找日期示例星期六

> ID：15522580
> 
> 赞同：0
> 
> 时间：2013-03-20T11:43:59.850
> 
> 标签：ssis

我想从 ssis 中的日期找出一周中的哪一天。

实际上我想将数据从一台服务器移动到另一台服务器，

在源服务器中有一个具有前一个日期的 cloumn 报告日期，所以虽然我想复制到目标服务器 wan 以插入今天的日期，但是有一种情况，比如源服务器中的星期天没有数据进来情况下我将拥有星期六的数据，所以在这种情况下，我想将目标服务器中的日期更新为 2 天以上，请告诉我如何使用 ssis 解决这个问题。我正在使用派生列来操作日期列`DATEADD("day",2,reportdate) : DATEADD("day",1,reportdate)`,

所以第一部分会将日期加上 2 的 sourcedate 更新到目标表日期，但是我将如何找到星期几意味着星期六到来...请让我知道如何使用 ssis 重新喜欢这个。

谢谢提前..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:52:34.713

尝试这个 ：

```
DATENAME(weekday, GETDATE())== "Sunday" ? DATEADD("day",2,reportdate):
                                           DATEADD("day",1,reportdate) 
```

在上面的表达式中使用`GETDATE()`else 使用`DATEADD(day,-1,reportdate)`

`Update`：

`DATEPART`在 SSIS 中使用

```
DATEPART( "Weekday", getdate()) 
```

表达式是

```
DATEPART("weekday", GETDATE()) == 1 ? DATEADD("day",2,getdate()):DATEADD("day",1,getdate()) 
```

上面的表达式在我的具有 SSIS 2008 的系统中有效

# html - 对象 仅 IE 的必需错误消息

> ID：15522584
> 
> 赞同：1
> 
> 时间：2013-03-20T11:44:06.517
> 
> 标签：html, css, internet-explorer, object, loading

所以在 IE 中，我的页面底部出现错误，在某行显示“需要对象”。页面加载正常，但我不希望出现此错误。它仅在 IE 中，但我不知道如何修复它。

有问题的行只是一个“？>”

PHP标签中的代码只是：

```
<?php
include('http://cdn.lektronix.net/new_site/home_slides/' . $content_location . '/content.html')
?> 
```

并且其中的代码是：

```
<?php
//CONTENT OF THE HOME PAGE ROTATING BANNER FOR THE UK 

//To display more or less slides just add or remove them. There is no need to update the jqbanner.js script.

//The css for each file is contained in style.css in this directory
?>

    <div class="jqb_slide" id = "power" title="">
        <div id = "slide_1_content">
            <h1>Lektronix</h1>
            <p><?=get_content(3232)?></p>
            <div class = "quote_btn">
                <a href = "general_enquiry"><?=get_content(3233)?></a>
            </div>
        </div>
    </div>

    <div class="jqb_slide" id = "web" title="" >
        <div id = "slide_3_content">
            <h1><?=get_content(2045)?></h1>
            <p><?=get_content(2046)?></p>
        </div>
    </div>

    <div class="jqb_slide" id = "pcb" title="">
        <div id = "slide_4_content">
            <h1><?=get_content(3740)?></h1>
            <p><?=get_content(3741)?></p>
            <div class = "quote_btn">
                <a href = "repair_enquiry"><?=get_content(3233)?></a>
            </div>
        </div>
    </div>

    <div class="jqb_slide" id = "stock" title="">
        <div id = "slide_5_content">
            <h1><?=get_content(3349)?></h1>
            <div id = "repair_quote">
                <a href = "<?=$myroot?>obsolete_and_refurbished"><?=ucwords(get_content(3338))?></a>
            </div>
        </div>
    </div>

    <div class="jqb_slide" id = "robot" title="">
        <div id = "header_block">
            <div id = "header_block_body">
                <h1><?=get_content(3779)?></h1>
            </div>
            <div id = "header_block_bottom"></div>
            <div id = "repair_quote">
            <a href = "<?=$myroot?>robots"><?=ucwords(get_content(3338))?></a>
        </div>
        </div>

        <div id = "slide_6_content">
            <p><?=get_content(3789)?></p>
        </div>

    </div> 
```

检查了许多浏览器，它只是 IE，我看不出代码有问题

这是渲染的页面源

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Electrical Engineering | Electronic Repairs | Lektronix India</title>
<meta name = "description" content = "Electrical engineering, electronic repairs, automation spares, refurbishment and obsolete equipment from Lektronix, the world&rsquo;s leading provider to the automation industry." />
<meta http-equiv="content-type" content="text/html;charset=UTF-8">
<link rel = "stylesheet" type = "text/css" href = "http://cdn.lektronix.net/new_site/style/main.css?1363776103" />
<link rel = "stylesheet" type = "text/css" href = "http://cdn.lektronix.net/new_site/style/jqbanner.css?1356002329" />
<link rel = "stylesheet" type = "text/css" href = "http://cdn.lektronix.net/new_site/home_slides/uk/style.css?1360065818" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="http://cdn.lektronix.net/new_site/script/jqbanner.js" type="text/javascript"></script>
<script type="text/javascript"><!--
window.onload = function(){
  if(!document.getElementById) return;
  document.getElementById('language_submit_header').style.display='none';
  document.getElementById('language_submit_footer').style.display='none';
  document.getElementById('contact_branch_select_submit').style.display='none';
}
// -->
</script>
</head>
<body>

<div id = "main_wrapper">

    <div id = "header">
        <div id = "header_top">
                        <div id = "blue_bar">
                <div id = "blue_bar_left"></div>
                <div id = "blue_bar_content">
                    <div class = "blue_bar_item">
                        <img src = "http://cdn.lektronix.net/new_site/images/job-track.png" alt = "Online Job Tracking" /><span class = "top_v_align"><a href = "account">Online Job Tracking</a></span>
                    </div>
                    <div class = "blue_bar_item">
                        <img src = "http://cdn.lektronix.net/new_site/images/phone.png" alt = "Telephone Number" /> <span class = "top_v_align">+91 213 5677800</span>
                    </div>
                    <div class = "blue_bar_item">
                        <img src = "http://cdn.lektronix.net/new_site/images/email.png" alt = "Email Address" /> <span class = "top_v_align"><a href = "mailto:sales.india@lektronix.in">sales.india@lektronix.in</a></span>
                    </div>
                    <div class = "blue_bar_item">
                                            <form id = "language_form" action = "language_set" method="post" >
<select name = "lang" id = "language_select" onchange = "this.form.submit()">
<option value = "15">中文 (Chinese)</option>
<option value = "11">Český (Czech)</option>
<option selected = "selected" value = "1">English (UK)</option>
<option value = "16">English (US)</option>
<option value = "3">Français (French)</option>
<option value = "2">Deutsch (German)</option>
<option value = "4">Italiano (Italian)</option>
<option value = "6">Polski (Polish)</option>
<option value = "12">Português (Portuguese)</option>
<option value = "8">Русский (Russian)</option>
<option value = "14">Slovenský (Slovakian)</option>
<option value = "5">Español (Spanish)</option>
</select>
<!--[if IE]>
<input type = "submit" value = "Update" id = "language_submit_header"/>
<![endif]-->
</form>
                    </div>  
                </div>
                <div id = "blue_bar_right"></div>
            </div>          
        </div>
        <div id = "header_bottom">
            <div id = "header_right">

                <div id = "search">

                    <form action = "query" method = "POST" id = "search_form">
                        <button type = "submit" name = "search_button" id = "search_button"></button>
                        <input name = "search_box" id = "search_box" type = "text" value = "Enter Part Number or Manufacturer" onClick = "this.value=''" />

                    </form>

                </div>
                <div id = "navigation">
    <ul>
        <li><a href = "index">Home</a></li>
        <li><a href = "about">About</a></li>
        <li><a href = "products">Products</a></li>
        <li><a href = "media">Media</a></li>
        <li><a href = "contact">Contact</a></li>
        <li><a href = "help">Help</a></li>
    </ul>
</div>          </div>
            <div id = "header_left">
                <a href = "index"><img src = "http://cdn.lektronix.net/new_site/images/header_logo.png" alt = "Lektronix, A Rockwell Automation Business" id = "logo" /></a>
            </div>
        </div>
    </div>
    <div id = "thin_blue_bar"></div>

    <div id = "content">
    <div id = "breadcrumbs">
<ul>
<li class = "home_crumb"><b>Home</b></li>
</ul>
</div>
<div id = "rotating_banner">
<div id="jqb_object">

    <div class="jqb_slides">

        <div class="jqb_slide" id = "power" title="">
            <div id = "slide_1_content">
                <h1>Lektronix</h1>
                <p>Lektronix can help with your Industrial Automation needs no matter what industry you're in. Contact us today for a free quote on new and refurbished spares, repairs and service exchange</p>
                <div class = "quote_btn">
                    <a href = "general_enquiry">Get a Free Quote</a>
                </div>
            </div>
        </div>

        <div class="jqb_slide" id = "web" title="" >
            <div id = "slide_3_content">
                <h1>We've Updated Our Website!</h1>
                <p>Please look around the new and improved website and be sure to update your bookmarks.</p>
            </div>
        </div>

        <div class="jqb_slide" id = "pcb" title="">
            <div id = "slide_4_content">
                <h1>Industrial Automation Repairs</h1>
                <p>Save money with Lektronix. We offer repairs on the full range of industrial automation products from all leading manufacturers. </p>
                <div class = "quote_btn">
                    <a href = "repair_enquiry">Get a Free Quote</a>
                </div>
            </div>
        </div>

        <div class="jqb_slide" id = "stock" title="">
            <div id = "slide_5_content">
                <h1>Over 17,000 Obsolete and Refurbished Parts in Stock</h1>
                <div id = "repair_quote">
                    <a href = "obsolete_and_refurbished">More Information</a>
                </div>
            </div>
        </div>

        <div class="jqb_slide" id = "robot" title="">
            <div id = "header_block">
                <div id = "header_block_body">
                    <h1>Robotic Repairs and Spares at LeKtroniX</h1>
                </div>
                <div id = "header_block_bottom"></div>
                <div id = "repair_quote">
                <a href = "robots">More Information</a>
            </div>
            </div>

            <div id = "slide_6_content">
                <p>Trust LeKtroniX to get your robot up and running quickly and efficiently, whatever the problem.
<br></p>
            </div>

        </div>  

    </div>

    <div class="jqb_bar">
        <div class="jqb_info"></div>
        <div id="btn_next" class="jqb_btn jqb_btn_next"></div>
        <div id="btn_pauseplay" class="jqb_btn jqb_btn_pause"></div>
        <div id="btn_prev" class="jqb_btn jqb_btn_prev"></div>
    </div>

</div>
</div>
<div id = "home_boxes">

        <div id="newsletter_box">
            <div class = "box_content">
                <h2>Newsletter</h2>
                <p>Sign up to our FREE newsletter to ensure you never miss out on our fantastic offers!</p>
                <form action = "newsletter_process.php" method = "post">
                    <input type = "text" name = "email" class = "news_signup_input" value = Email Address onClick = "this.value=''" />
                    <input type = "submit" name = "newsletter_submit" value = "" class = "news_signup_submit" />
                </form>
            </div>
        </div>

    <div id = "contact_box">
        <div class = "box_content">
            <a href = "contact"><h2>Contact Us</h2></a>
            <p>Lektronix are an international company with branches worldwide. Click here to get in touch with your local branch</p>
        </div>
    </div>

    <div id = "about_box">
        <div class = "box_content">
            <a href = "about"><h2>About Us</h2></a>
            <p>Find out why you should use Lektronix to supply or repair your automation equipment</p>
        </div>
    </div>

    <div class = "float_break"></div>

</div><div class = "float_break"></div>
<div id = "two_boxes">
    <div id = "repair_box">
        <h2>Need A Repair?</h2>
        <p><b>Get a free repair quotation!</b></p>
        <p class = "repair_first">We have built test rigs to ensure that your part is fully repaired</p>
        <p class = "repair_second">All repairs come with a 12 month free warranty</p>
        <a href = "repair_enquiry"><h3>Contact us today for a free repair quote</h3></a>
    </div>
    <div id = "siemens_box">
        <h2>Siemens</h2>
        <p class = "siemens_first"><b>Lektronix have a wide range of Siemens spares in stock.</b></p>
        <p class = "siemens_second">Lektronix Repair and Support the whole range of Siemens S5 and S7 equipment including OP HMI Screens and PG Programmers. </p>
        <a href = "products/siemens/2512/null/0/1"><h3>View our full Siemens range</h3></a>
    </div>
</div>
<!--Free Repair Collection -->
<!--<style type = "text/css" media = "screen">
    #uk_repair_collect { width: 1000px; height: 198px; padding: 6px; background: URL('images/hp-repair-collection.jpg'); margin: 20px auto 20px auto; overflow: hidden; }
    #uk_repair_collect h2 { font-size:12pt; margin: 0 0 5px 5px; padding: 0;}
    #uk_repair_collect h3 { font-size:10pt; margin: 0 0 5px 5px; padding: 0;}
    #uk_repair_collect p { color: #333333;}
    #uk_repair_collect .steps { width: 130px; float: left; text-align: center; margin: 13px 20px 0 170px; padding: 0; _margin: 13px 30px 0 90px; }
    #uk_repair_collect .firststep { width: 140px; float: left; text-align: center; margin: 25px 10px 0 100px; padding: 0; _margin: 30px 30px 0 45px; }
    #uk_repair_collect .link { margin: 105px 0 0 600px; clear: both; width:430px; *margin: 25px 0 0 430px; padding: 0; }
    #uk_repair_collect .title { margin: 15px 0 10px 5px; padding: 0;}
</style>

    <div id = "uk_repair_collect">
        <h2>Free Repair Collection and Evaluation Service</h2>
        <h3>Do you have a faulty part that needs repairing? Lektronix will pick up your part and repair it.</h3>
        <p class = "title"><b>Get your faulty part repaired in 3 simple steps:</b></p>
        <p class = "firststep"><a href = "general_enquiry"><b>1\. Send an enquiry</b></a></p>
        <p class = "steps"><b>2\. We'll arrange to collect your part for free </b></p>
        <p class = "steps"><b>3\. Lektronix will fix and return your part to you</b></p>
        <p class = "link">Learn more about our <a href = "repair-collection"><b>FREE Repair Collection Service</b></a></p>
    </div>-->
<!-- end of repair -->
    </div>
</div>
<div class = "float_break"></div>
<div id = "footer">
    <div id = "robot_wrapper">
        <div id = "footer_wrapper">
            <div id = "footer_columns">
                <div class = "footer_column">
                    <h4>Lektronix</h4>
                    <ul>
                        <li><a href = "about/lektronix_group/1">Group Overview</a></li>
                        <li><a href = "about/new_equipment/3">New Equipment</a></li>
                        <li><a href = "about/refurbished_equipment/4">Refurbished Equipment</a></li>
                        <li><a href = "about/index.php?helpid=6">Repairs</a></li>
                        <li><a href = "about/awards/5">Awards</a></li>
                        <li><a href = "site_map">Site Map</a></li>
                    </ul>
                </div>
                <div class = "footer_column">
                    <h4>Buy Stock</h4>
                    <ul>
                        <li><a href = "products/siemens/2512/null/0/1">Siemens</a></li>
                        <li><a href = "products/control_techniques/523/null/0/1">Control Techniques</a></li>
                        <li><a href = "products/bosch/313/null/0/1">Bosch</a></li>
                        <li><a href = "products/fanuc/948/null/0/1">Fanuc</a></li>
                        <li><a href = "products/indramat/1303/null/0/1">Indramat</a></li>
                        <li><a href = "products/telemecanique/2768/null/0/1">Telemecanique</a></li>
                        <li><b><a href = "products/manufacturers">Manufacturers A-Z</a></b></li>
                    </ul>
                </div>
                <div class = "footer_column">
                    <h4>Customer Services</h4>
                    <ul>
                        <li><a href = "contact">Contact Us</a></li>
                        <li><a href = "feedback">Feedback</a></li>
                        <li><a href = "help/policies/4#cookie_policy">Cookie Policy</a></li>
                        <li><a href = "help/policies/4#privacy_policy">Privacy Policy</a></li>
                        <li><a href = "help/policies/4#terms_and_conditions">Promotional Terms & Conditions</a></li>
                        <li><a href = "account"><b>Online Job Tracking</b></a></li>
                    </ul>
                </div>
                <div class = "footer_column" id = "four">
                    <h4>Other Branches</h4>
                    <ul>
                        <li><a href = "http://www.lektronix.sa.com" target = "_blank">Saudi Arabia</a></li>
                        <li><a href = "http://www.lektronix.co.za" target = "_blank">South Africa</a></li>
                        <li><a href = "http://www.lektronix.pt" target = "_blank">Portugal</a></li>
                        <li><a href = "http://www.lektronix.es" target = "_blank">Spain</a></li>
                        <li><a href = "http://www.lektronix.us" target = "_blank">USA</a></li>
                        <li><a href = "http://www.lektronix.mx" target = "_blank">Mexico</a></li>
                    </ul>
                </div>
                <div class = "footer_column_last">
                    <h4>Contact</h4>
                    <p class = "center">+91 213 5677800<br /><a href = "mailto:sales.india@lektronix.in">sales.india@lektronix.in</a></p>
                                        <form id = "language_form" action = "language_set" method="post" >
<select name = "lang" id = "language_select" onchange = "this.form.submit()">
<option value = "15">中文 (Chinese)</option>
<option value = "11">Český (Czech)</option>
<option selected = "selected" value = "1">English (UK)</option>
<option value = "16">English (US)</option>
<option value = "3">Français (French)</option>
<option value = "2">Deutsch (German)</option>
<option value = "4">Italiano (Italian)</option>
<option value = "6">Polski (Polish)</option>
<option value = "12">Português (Portuguese)</option>
<option value = "8">Русский (Russian)</option>
<option value = "14">Slovenský (Slovakian)</option>
<option value = "5">Español (Spanish)</option>
</select>
<!--[if IE]>
<input type = "submit" value = "Update" id = "language_submit_footer"/>
<![endif]-->
</form>
                </div>
            </div>
            <div class = "float_break"></div>
            <div id = "footer_address">
                <p class = "center">131, Functional Industrial Estate, Patparganj, Delhi, India 110092<br />
                VAT No. TIN: 2757032 | Company No. U31200DL1991PTC045425
 | Registered in India<br />
                &copy; 2002 - 2013 Rockwell Automation Limited</p>
            </div>
        </div>

    </div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:02:12.267

问题是一段javascript调用了不存在的东西，看不到问题的原因是因为我找错了地方。我正在查看文件中的代码，而不是页面的源代码。这将我带到了错误的地方，但是当我查看源代码时，我发现了狡猾的 javascript。感谢 SDC 向我指出这一点

# paypal - 无法使用贝宝沙箱中的默认业务测试帐户登录

> ID：15522586
> 
> 赞同：3
> 
> 时间：2013-03-20T11:44:12.437
> 
> 标签：paypal, paypal-sandbox

在 paypal API 的测试指南[https://www.x.com/developers/paypal/documentation-tools/ug_sandbox](https://www.x.com/developers/paypal/documentation-tools/ug_sandbox)中提到了 2 个位置

> 当您注册为 PayPal 开发人员时，沙盒会自动为您创建一个业务测试帐户及其关联的测试凭据

和

> 当您在 developer.paypal.com 上注册开发者帐户时，沙盒会自动创建您的第一个业务测试帐户。这为您提供了一组默认的商家凭据，您可以立即使用这些凭据来测试信用卡交易。

当我使用实时贝宝帐户登录新的开发人员网站时，我发现了一个创建为 xxxx-facilitator@xxxx.com 的商业测试帐户。现在我需要使用此帐户登录沙盒，但在帐户配置文件中找不到任何有关帐户密码的信息，因此我单击“配置文件”链接并单击“更改密码”并输入新密码，然后单击“保存”它说“密码已更新”，然后当我尝试登录 sandbox.paypal.com 时，它说“请确保您正确输入您的电子邮件地址和密码”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:07:27.353

我们目前正在努力解决沙盒中的这个问题。如果您尝试从 developer.paypal.com 中的应用程序页面重置密码，它实际上不会更改该沙盒帐户的密码。作为一种解决方法，您可以通过单击页面顶部的“创建帐户”按钮来创建一个新的企业帐户。今晚计划进行修复以解决此问题。解决此问题后，我将立即更新我的答案。带来不便敬请谅解。

**更新：**此问题现已解决。

谢谢，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:51:07.160

我通过新的开发者网站导入的一些测试帐户也遇到了同样的问题。处理不同的会话似乎存在问题：使用开发者帐户登录时的开发者会话和用于登录沙盒区域的测试商家帐户。从许多类似的问题中可以看出，这影响了许多用户...

# svn - 如何提取 .dump 文件？

> ID：15522588
> 
> 赞同：2
> 
> 时间：2013-03-20T11:44:22.680
> 
> 标签：svn

我从我的主管那里得到了一个扩展名为 .dump 的文件，他说我必须提取它才能使用它。他说它与SVN（Subversion）相关。我必须提取它以获得一些源代码，然后继续工作。谁能帮我。我尝试使用一些 SVN(subversion) 软件，但无法解压。通过互联网搜索后，我认为这个 .dump 文件甚至与 SVN 无关。帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:52:05.850

[Subversion 转储文件](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.dump.html)用于创建 Subversion 存储库的备份。您需要将其[“加载”](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.load.html)到存储库中才能使用它。

如果您需要对存储在存储库中的某些代码进行一些更改，那么签出存储库、进行更改然后以 Subversion 工作流的标准方式提交它们会容易得多。更多信息在[这里](http://svnbook.red-bean.com/en/1.7/svn.basic.in-action.html)。

# c# - .NET Web 服务无法生成临时类

> ID：15522589
> 
> 赞同：5
> 
> 时间：2013-03-20T11:44:24.887
> 
> 标签：c#, .net, web-services, wsdl

我正在尝试在我的 .NET Web 应用程序中实例化 Web 服务。但是一旦它到达这条线：

```
registerService register = new registerService(); 
```

然后我收到以下错误：

> 无法生成临时类（结果=1）。错误 CS0030：无法将类型“Test.Website.ProxyTest.registerType[]”转换为“Test.Website.ProxyTest.registerType”

我没有编写网络服务。但这是否意味着 Web 服务在某处（在 XSD 或其他地方）有错误？

这是否意味着第 3 方开发人员需要修复此 Web 服务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T06:25:26.653

这似乎是一个已知问题，详细信息可以在[这里找到](http://support.microsoft.com/kb/2486643)

> **原因：**如果复杂类型的数组包含一个元素，该元素也是仅存在一个元素的复杂类型的数组，则 .NET Framework 中包含的 WSDL.EXE 的一个已知问题可能会导致错误生成代理类

.

> 目前没有可用的解决方案，但是有三种可用的解决方法：
> 
> 使用 WSDL.EXE 手动生成代理类，然后修改数据类型被不当创建为二维数组（例如'CustomType[][]'）的代理类，并将其更正为一维数组（例如'自定义类型 []'）。修改所需 WSDL 中的数据类型，以便在定义中包含第二个可选元素。这可以通过添加诸如''之类的元素来完成。修改所需 WSDL 中的复杂类型，使边界属性成为复杂类型而不是元素的一部分（即将“minOccurs”和“maxOccurs”属性移动到复杂类型并从元素中删除它们）。

一个类似的[stackoverflow问题](https://stackoverflow.com/questions/6678934/unable-to-generate-a-temporary-class-result-1-error-cs0030-cannot-convert-ty)

# c# - 如何将二维浮点数组转换为字节数组，反之亦然

> ID：15522590
> 
> 赞同：3
> 
> 时间：2013-03-20T11:44:27.063
> 
> 标签：c#

我有以下形式的数据

`float [1000,2]`数据。

我想以字节 []b 的形式转换该数据。

我想再次转换`byte []b`为二维`float [1000,2]`数据数组

我想这样做是因为我可以轻松地将数据以字节的形式保存到服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:09:04.027

你可以使用这些方法。他们使用简单的编程结构，我认为理解它们并不难。第一种方法将 float 2Dimansional 数组转换为一个字节数组。它首先声明字节数组，然后每个浮点值转换为 4 个字节并将它们存储到大字节数组中。

```
 public byte[] ToByteArray(float[,] nmbs)
    {
        byte[] nmbsBytes = new byte[nmbs.GetLength(0) * nmbs.GetLength(1)*4];
        int k = 0;
        for (int i = 0; i < nmbs.GetLength(0); i++)
        {
            for (int j = 0; j < nmbs.GetLength(1); j++)
            {
                byte[] array = BitConverter.GetBytes(nmbs[i, j]);
                for (int m = 0; m < array.Length; m++)
                {
                    nmbsBytes[k++] = array[m];
                }
            }
        }
        return nmbsBytes;
    } 
```

第二种方法将字节数组转换为二维浮点数组。它首先声明数组，然后每四个字节转换为浮点数，然后将其存储到二维浮点数组中的指定位置。

```
 public float[,] ToFloatArray(byte [] nmbsBytes)
    {
        float[,] nmbs = new float[nmbsBytes.Length /4 / 2, 2];
        int k = 0;
        for (int i = 0; i < nmbs.GetLength(0); i++)
        {
            for (int j = 0; j < nmbs.GetLength(1); j++)
            {
                nmbs[i, j] = BitConverter.ToSingle(nmbsBytes,k);
                k += 4;
            }
        }
        return nmbs;
    } 
```

# java - 在 Eclipse 中导入 Java 项目

> ID：15522595
> 
> 赞同：0
> 
> 时间：2013-03-20T11:44:52.033
> 
> 标签：java, eclipse, import

我知道这会很简单，但即使在做了很多谷歌搜索之后我也做不到。我正在从[Planet-source-code](http://www.planet-source-code.com/)下载项目 ，然后为了学习目的而修改它们。问题是当我下载文件并解压缩它们时文件夹包含 `.java .jar images and other resources` 但当我 `import complete folder` 这是结果

![在此处输入图像描述](../Images/659ca1bc7102ee63371ec71cd15ccf70.png)

请指导我如何使用所有资源导入完整的项目，我在这里找到了官方链接 [Importing existing projects](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm) 但不起作用，请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:52:19.987

此[zip 文件](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=3606&lngWId=2)不包含 java 项目。解压缩 zip 文件。在 Eclipse 中创建一个新的 Java 项目（一个空白项目）。然后`DieRoll.java`从 Eclipse 项目的解压缩文件夹中复制该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:55:00.830

当您将现有项目导入工作空间时，意味着您必须将项目提取到工作空间文件夹之外然后选择它，如果您将项目提取到相同的工作空间意味着您将遇到冲突，这就是您的错误的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:52:44.060

此 zip 文件不包含 java 项目。解压缩 zip 文件。然后执行以下操作。

![在此处输入图像描述](../Images/70fe8e8b7659f3077ab37639308423f8.png)

看到这里你可以从这里导入。点击导入后你可以选择文件类型。

# iphone - 克服锁屏+静音模式播放音频

> ID：15522596
> 
> 赞同：1
> 
> 时间：2013-03-20T11:44:55.260
> 
> 标签：iphone, ios, audio, notifications

[此视频](https://www.dropbox.com/s/dqbgtmrhpa4jwgr/VIDEO%20DEMONSTRATION.MOV)是一个应用程序的记录，它可以

*   超越静音模式
*   覆盖锁定屏幕
*   播放闹钟音乐/旋律

我们的团队正在开发一个类似的定制 iphone 闹钟

如果有人可以提供帮助，我将不胜感激。我一直试图打破这个两周。

当设备被锁定时，我们下面的方法不会被调用。这就是为什么没有播放警报声的原因

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{

    if ([GlobalData gSettings].vibration) {
        timer = [NSTimer scheduledTimerWithTimeInterval:(1.0) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
        isVibration = YES;
    } else {
        isVibration = NO;
    }

    self.uinfo = notification.userInfo;

    NSString *soundname = [uinfo objectForKey:@"sound"];
    NSURL *clip = [[NSBundle mainBundle] URLForResource:soundname withExtension:@"caf"];
    if (clip) {

        self.avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:clip error:NULL];
        self.avPlayer.delegate = self;
        AudioSessionInitialize (NULL, NULL, NULL, NULL);
        AudioSessionSetActive(true);

        // Allow playback even if Ring/Silent switch is on mute
        UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
        AudioSessionSetProperty (kAudioSessionProperty_AudioCategory,
                                 sizeof(sessionCategory),&sessionCategory);
    }
    else
    {

        NSURL *clip = [[NSUserDefaults standardUserDefaults]URLForKey:[uinfo objectForKey:@"sound"]];
        self.avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:clip error:NULL];
        self.avPlayer.delegate = self;
        AudioSessionInitialize (NULL, NULL, NULL, NULL);
        AudioSessionSetActive(true);

        // Allow playback even if Ring/Silent switch is on mute
        UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
        AudioSessionSetProperty (kAudioSessionProperty_AudioCategory,
                                 sizeof(sessionCategory),&sessionCategory);
    }

    [self.avPlayer play]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:18:46.333

我深入研究了 LivingEarth 应用程序。似乎他们正在使用基于[MMDeepSleepPreventer](https://github.com/marcop/MMPDeepSleepPreventer)的组件。他们使用某种内部警报系统（正在播放的音乐不是由本地通知触发的，但可能是由 触发的`NSTimer`）。

但是，我发现它在较新的 iOS 版本中不可靠，因此我对其进行了一些调整。`NSTimers`启动时，它会继续播放静音音频文件，即使用户按下锁定按钮，应用程序也可以运行。

[你可以在这里](https://github.com/mzygar/MMPDeepSleepPreventer)找到我的叉子。

# java - 是否可以结合 SAX 使用 SimpleXML 在 Java 中生成 XML？

> ID：15522600
> 
> 赞同：1
> 
> 时间：2013-03-20T11:45:10.213
> 
> 标签：java, xml, xml-parsing, sax, simple-framework

我有一些使用 SAX 生成格式良好的 XML 的遗留代码。

我想知道是否可以使用 SimpleXML 来生成该文档的一个分支。

如果我尝试将使用 SimpleXML 生成的 XML 作为普通文本附加到 SAX 解析器，则像“<”这样的字符将转换为它们的数字引用。

有谁知道是否还有一种方法可以附加编码良好的 XML？

# ios - 如何使用 NSArray 类？

> ID：15522605
> 
> 赞同：-4
> 
> 时间：2013-03-20T11:45:19.637
> 
> 标签：ios, objective-c, cocoa-touch, nsarray

我想创建一个`Objective-C Class`类型`NSArray`，但我不知道如何初始化它或如何添加数据。

我做了以下事情：

1-创建一个新文件

![在此处输入图像描述](../Images/75d50fbac3bf01beb2831dd1d7bfb259.png)

2-我选择了`Objective-C Class`![在此处输入图像描述](../Images/585ad66e8045295e092bf16311a385d5.png)

3-我选择了一个`Subclass of`类型`NSArray` ![在此处输入图像描述](../Images/8e457bf98a31b61da580a7a6f3726335.png)

出现两个文件：

。H：

```
#import <Foundation/Foundation.h>

@interface ArrayClass : NSArray

@end 
```

.m

```
#import "ArrayClass.h"

@implementation ArrayClass

@end 
```

我的问题是：下一步是什么。

1-在这个类中调用什么方法。

2-如何初始化数组。

3-`-(id)init`足够了

**编辑：** 我有一个解析器，我`ViewController`需要用不同的 XML 链接初始化另一个解析器，所以这就是为什么我需要一个具有`NSArray`类型的新类

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:55:24.173

我将仅发布此内容，以便有人声明。

NSArray 是一个类簇，是一个内部实现的包装器。它的内部细节会根据数组的内容和大小而变化，因此可以针对性能进行优化。因此，继承 NSArray（或 NSDictionary）并不是一个好主意。

我想您可以通过在其上添加类别来扩展该类，这是一种更好且更“可可”的添加功能的方式。Apple 开发人员文档中有一些关于设计模式的指南，可以对此提供帮助。

也许重述这个问题，所以我们都很清楚，因为我们很困惑你是否真的想继承它或只是创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:49:35.633

如果您只是尝试使用`NSArray`just ，请执行以下操作：

```
NSArray  *myArray = [NSArray arrayWithObjects:@"foo",@"bar",@"baz",nil]; 
```

除非您想更改实际结构和扩展，否则无需做您正在做的事情`NSArray`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:50:25.633

如果您真的想扩展，请查看[此答案](https://stackoverflow.com/a/8964624/1219956)`NSArray`

如果您不打算扩展 NSArray 的功能，您可能正在寻找创建 NSArray 的实例，这就像进入`NSArray *arrayName = [[NSArray alloc] init]`某个需要数组的区域一样简单，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:02:55.230

或者，如果您想要一个数组，您可以动态添加您想要的数据

```
NSMutableArray *arr = [[NSMutableArray alloc] init]; 
```

这一切都取决于你想要什么。

# c# - 将详细信息从 from 打印到 word 文档，然后打印到打印机 c#

> ID：15522606
> 
> 赞同：0
> 
> 时间：2013-03-20T11:45:26.577
> 
> 标签：c#, printing

我正在将假期预订计划作为我的第二个计划。我有一个表格，客户可以进行预订等。我的想法是，我可以像收据一样打印出在 Photoshop 中设计的收据上的所有详细信息，并将其放入 Word 文档中。所以当我点击打印时，我可以通过 word 打印出收据。我面临的问题是如何将所有信息转换成文字以便打印。我浏览了谷歌，但打印我 git 的唯一方法是它会打印出表格和信息。也许还有其他方法。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:51:03.700

如果您必须做这件事，请使用 COM 自动化。不，它不会很漂亮:~(

[http://www.c-sharpcorner.com/UploadFile/amrish_deep/WordAutomation05102007223934PM/WordAutomation.aspx](http://www.c-sharpcorner.com/UploadFile/amrish_deep/WordAutomation05102007223934PM/WordAutomation.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:53:22.620

我知道您可以研究的唯一方法是务实地使用 Word。

例如，您可以在 word 文档中使用 BOOKMARKS 在 word 中创建一个模板文档，然后您可以编写一些代码来打开一个新的 word 实例，使用您的模板文档并选择每个书签并填写它。

将此链接视为起点：http: [//support.microsoft.com/kb/316383](http://support.microsoft.com/kb/316383)

# php - 我正在尝试验证表单上的电子邮件字段

> ID：15522608
> 
> 赞同：0
> 
> 时间：2013-03-20T11:45:29.733
> 
> 标签：php, jquery, ajax

大家好，请帮我解决我的问题。实际上，我正在尝试使用 javascript 在表单上验证我的电子邮件字段并发布 ajax 请求以检查该电子邮件是否存在，但我的 javascript 函数不会等到 ajax 响应并且每次它返回 false 时。当电子邮件不存在时，我想返回 true ......

```
 $(document).ready(function(){
    //global vars
    var form = $("#signupForm");
    var email = $("#email");
    var email_error = $("#invalid");

    //On blur
   // userEmail.blur(validateEmail);

    //On Submitting
    form.submit(function(){

        if(validateEmail()){
            alert("submit true");
            return true;
        }else{
        alert("submit false");
            return false;
            }
    });

    function validateEmail(){
        //if it's NOT valid
        alert("In email");
        var a = $("#email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

        if(email.val() == ""){
            email_error.html("Please enter your email ");
            return false;
        }
        //if it's valid email
        else if(filter.test(a)==false){
            email_error.html("Please enter Valid email address");
            return false;
        }
        else if(filter.test(a)==true){alert("elseif");
        var baseUrl = '<?= base_url() ?>';

                $.ajax({
                    type: "POST",
                    url: baseUrl+"index.php/index/validateUserEmail",
                    data: "useremail="+$("#email").val(),
                    success: function(msg){
                    alert(msg);
                    if(msg == "1")
                        {
                            $("#tick_cross").fadeIn("slow").html('<img src="'+baseUrl+'images/cross.png" />');
                            $("#emailValidate").val("1");  
                            email_error.html("This email-Id already exists!");
                            return false;
                        }
                        else
                        {

                            $("#tick_cross").fadeIn("slow").html('<img src="'+baseUrl+'images/tick.png" />');
                            $("#emailValidate").val("0");
                            email_error.html(" ");
                            alert("alok");
                            return true;
                        }

                    }
                });

        }

        else{
        email_error.html(" ");
        return true;
        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:51:58.097

尝试类似的东西

```
$(document).ready(function() {
    // global vars
    var form = $("#signupForm");
    var email = $("#email");
    var email_error = $("#invalid");

    // On blur
    // userEmail.blur(validateEmail);

    // On Submitting
    form.submit(function() {

                validateEmail(function(flag) {
                            if (flag) {
                                alert("submit true");
                                form[0].submit();
                            } else {
                                alert("submit false");
                            }

                        });
                return false;
            });

    function validateEmail(callback) {
        // if it's NOT valid
        alert("In email");
        var a = $("#email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

        if (email.val() == "") {
            email_error.html("Please enter your email ");
            callback(false);
        }
        // if it's valid email
        else if (filter.test(a) == false) {
            email_error.html("Please enter Valid email address");
            callback(false);
        } else if (filter.test(a) == true) {
            alert("elseif");
            var baseUrl = '<?= base_url() ?>';

            $.ajax({
                        type : "POST",
                        url : baseUrl + "index.php/index/validateUserEmail",
                        data : "useremail=" + $("#email").val(),
                        success : function(msg) {
                            alert(msg);
                            if (msg == "1") {
                                $("#tick_cross").fadeIn("slow")
                                        .html('<img src="' + baseUrl
                                                + 'images/cross.png" />');
                                $("#emailValidate").val("1");
                                email_error
                                        .html("This email-Id already exists!");
                                callback(false);
                            } else {

                                $("#tick_cross").fadeIn("slow")
                                        .html('<img src="' + baseUrl
                                                + 'images/tick.png" />');
                                $("#emailValidate").val("0");
                                email_error.html(" ");
                                alert("alok");
                                callback(true);
                            }

                        }
                    });

        }

        else {
            email_error.html(" ");
            callback(true);
        }

    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/MvPr3/)

或者使用[jQuery.deferred更好的解决方案](http://api.jquery.com/category/deferred-object/)

```
$(document).ready(function() {
    // global vars
    var form = $("#signupForm");
    var email = $("#email");
    var email_error = $("#invalid");

    // On blur
    // userEmail.blur(validateEmail);

    // On Submitting
    form.submit(function() {
                validateEmail().done(function() {
                            console.log("submit true");
                            form[0].submit();
                        }).fail(function() {
                            console.log("submit false");
                        });
                return false;
            });

    function validateEmail() {
        var deferred = jQuery.Deferred()

        // if it's NOT valid
        console.log("In email");
        var a = $("#email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

        if (email.val() == "") {
            email_error.html("Please enter your email ");
            deferred.reject();
        }
        // if it's valid email
        else if (filter.test(a) == false) {
            email_error.html("Please enter Valid email address");
            deferred.reject();
        } else if (filter.test(a) == true) {
            console.log("elseif");
            var baseUrl = '<?= base_url() ?>';

            $.ajax({
                        type : "POST",
                        url : baseUrl + "index.php/index/validateUserEmail",
                        data : "useremail=" + $("#email").val(),
                        success : function(msg) {
                            alert(msg);
                            if (msg == "1") {
                                $("#tick_cross").fadeIn("slow")
                                        .html('<img src="' + baseUrl
                                                + 'images/cross.png" />');
                                $("#emailValidate").val("1");
                                email_error
                                        .html("This email-Id already exists!");
                                deferred.reject();
                            } else {

                                $("#tick_cross").fadeIn("slow")
                                        .html('<img src="' + baseUrl
                                                + 'images/tick.png" />');
                                $("#emailValidate").val("0");
                                email_error.html(" ");
                                console.log("alok");
                                deferred.resolve();
                            }

                        }
                    });

        }

        else {
            email_error.html(" ");
            deferred.resolve();
        }

        return deferred.promise();
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/MvPr3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:00:21.983

您需要设置选项 async : false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:23:01.190

我认为您必须等到响应完成。就绪状态==4

```
$.ajax({
                    type: "POST",
                    url: baseUrl+"index.php/index/validateUserEmail",
                    data: "useremail="+$("#email").val(),
                    success: function(){

                }).done(function (msg) {

alert(msg);
                    if(msg == "1")
                        {
                            $("#tick_cross").fadeIn("slow").html('<img src="'+baseUrl+'images/cross.png" />');
                            $("#emailValidate").val("1");  
                            email_error.html("This email-Id already exists!");
                            return false;
                        }
                        else
                        {

                            $("#tick_cross").fadeIn("slow").html('<img src="'+baseUrl+'images/tick.png" />');
                            $("#emailValidate").val("0");
                            email_error.html(" ");
                            alert("alok");
                            return true;
                        }

                    }
})
.fail(function() { alert("error";
 return true;
); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:56:53.810

问题是 AJAX 调用需要时间，但你的 if 语句需要立即返回。我也不确定返回 false 是否足够，我相信您需要捕获事件并对其调用 preventDefault() 方法...

最好的办法是将您的 <input type="submit" /> 按钮更改为 <input type="button" id="submitButton" />，然后`form.submit()`完全删除您现在拥有的处理程序。添加这个：

```
$(function(){
    $('#submitButton').click(validateEmail)

}) 
```

然后添加`$("#signupForm").submit()`到您的`validateEmail()`功能：

```
function validateEmail(){
    //if it's NOT valid
    alert("In email");
    var a = $("#email").val();
    var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

    if(email.val() == ""){
        email_error.html("Please enter your email ");
        return false;
    }
    //if it's valid email
    else if(filter.test(a)==false){
        email_error.html("Please enter Valid email address");
        return false;
    }
    else if(filter.test(a)==true){alert("elseif");
    var baseUrl = '<?= base_url() ?>';

            $.ajax({
                type: "POST",
                url: baseUrl+"index.php/index/validateUserEmail",
                data: "useremail="+$("#email").val(),
                success: function(msg){
                alert(msg);
                if(msg == "1")
                    {
                        $("#tick_cross").fadeIn("slow").html('<img src="'+baseUrl+'images/cross.png" />');
                        $("#emailValidate").val("1");  
                        email_error.html("This email-Id already exists!");
                        return false;
                    }
                    else
                    {

                        $("#tick_cross").fadeIn("slow").html('<img src="'+baseUrl+'images/tick.png" />');
                        $("#emailValidate").val("0");
                        email_error.html(" ");
                        alert("alok");
                        $("#signupForm").submit() // <--- HERE
                        return true;
                    }

                }
            });

    }

    else{
    email_error.html(" ");
    return true;
    }

} 
```

你现在可能也可以清理一下......

# c# - 从远程 pc 在 C# 中生成 SSRS 2008 R2 报告比从本地 pc 慢

> ID：15522612
> 
> 赞同：1
> 
> 时间：2013-03-20T11:45:43.340
> 
> 标签：c#, ssrs-2008

**（请注意，这不是第一次运行的唯一问题，每次都会发生这种情况）**

我想知道是否有人遇到过以下情况。

我们创建了从 SSRS 实例生成报告的 ac# 应用程序。

当我在 SSRS 实例所在的服务器上运行此应用程序时，报告会在 +- 6 秒内生成。

当我从远程机器（相同的网络，只是与 SSRS 实例不同的电脑）运行完全相同的应用程序时，相同的报告需要 +- 18 秒。

使用的代码类似于

```
ServerReport report = new ServerReport();
report.ReportServerUrl = new System.Uri(reportSetup.ConnectionString);
report.ReportServerCredentials.NetworkCredentials = System.Net.CredentialCache.DefaultCredentials;
report.ReportPath = reportName;
report.SetParameters(reportParams);
byte[] bytes = report.Render("PDF", null, out mimeType, out encoding, out extension, out streamids, out warnings); 
```

`ServerReport`来自哪里 `Microsoft.Reporting.WinForms`（`C:\Program Files (x86)\Microsoft Visual Studio 10.0\ReportViewer\Microsoft.ReportViewer.WinForms.dll`但也尝试了网络版本），其余的被声明为

```
Warning[] warnings;
string[] streamids;
string mimeType;
string encoding;
string extension;
List<ReportParameter> reportParams 
```

并且 reportSetup.ConnectionString 的形式是`http://<server name>/ReportServer`（这里的服务器名称是实际名称，但我也尝试过使用 IP）。

我对上述每个步骤进行了计时，anf 发现罪魁祸首在它设置参数的那一行。所以我将参数值存储在实际报告中的默认值中，并删除了该步骤。然后渲染只需要比以前更长的时间。

除此之外，我还尝试将 Reporting Service Configuration Manager 服务帐户从网络更改为本地帐户，并使用在配置文件 (rsreportserver.config) 中找到的身份验证设置`C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer`

最初的身份验证设置是

```
<Authentication>
    <AuthenticationTypes>
        <RSWindowsNegotiate/>
        <RSWindowsNTLM/>
    </AuthenticationTypes>
    <RSWindowsExtendedProtectionLevel>Off</RSWindowsExtendedProtectionLevel>
    <RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>
    <EnableAuthPersistence>true</EnableAuthPersistence>
</Authentication> 
```

[我从Reporting Services 中的身份验证类型中](http://msdn.microsoft.com/en-us/library/cc281310%28v=sql.105%29.aspx)`<RSWindowsNegotiate/>`读取时删除了该行

> **RSWindows协商**
> 
> RSWindowsNegotiate 指示报表服务器处理指定 Negotiate 的身份验证请求。协商首先尝试 Kerberos 身份验证，但如果 Active Directory 无法将客户端请求的票证授予报表服务器，则回退到 NTLM。仅当票证不可用时，协商才会退回到 NTLM。如果第一次尝试导致错误而不是丢失票证，则报表服务器不会进行第二次尝试。

但这没有帮助。

有人对如何更正代码或 SSRS 安装有任何想法吗？我希望应用程序位于与 SSRS 实例不同的服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:04:07.593

您可能不幸地将应用程序从睡眠中唤醒。出于某种原因，在空闲时间到期后将 ssrs 重新联机会在启动和加载环境的过程中对您造成不利影响。一旦应用程序重新上线，它就会以预期的方式处理请求。

如果您既可以唤醒问题，又可以通过创建每小时任务来轮询资源来使系统更具响应性。

1.  在脚本文件夹中创建一个包含以下内容的 PowerShell 文件：

    > $wc = New-Object system.net.webClient $username = 'ReportAdmin' $password = 'ReportAdmin' $cred = New-Object System.Management.Automation.PSCredential -ArgumentList @($username,(ConvertTo-SecureString -String $密码 -AsPlainText -Force))
    > 
    > ```
    > $wc.Credentials = $cred
    > $src = $wc.DownloadString(“http://<SSRSSERVERNAME>/SSRS/Pages/Folder.aspx”) 
    > ```

2.  使用以下内容在脚本文件夹中创建一个批处理文件：

> powershell -command "&'C:\\SRSWakeup.ps1'"

1.  创建一个每小时运行一次并保持 ssrs 活动的作业。您可以通过保存并将此内容导入 Windows 任务管理器来执行此操作：（它将调用 .cmd 来调用 power shell 命令以保持 ssrs 活动。

    ```
     <?xml version="1.0" encoding="UTF-16"?> <Task version="1.2"
      xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">  
     <RegistrationInfo>
          <Date>2012-10-29T17:57:58.8640417</Date>
          <Author>SERVER\AdminAccount</Author>
         <Description>Wakes up Reporting services when the service shuts down</Description>   </RegistrationInfo>   <Triggers>
          <CalendarTrigger>
           <Repetition>
              <Interval>PT1H</Interval>
              <StopAtDurationEnd>false</StopAtDurationEnd>
            </Repetition>
            <StartBoundary>2012-11-01T21:06:52.4488088</StartBoundary>
            <Enabled>true</Enabled>
            <ScheduleByDay>
              <DaysInterval>1</DaysInterval>
            </ScheduleByDay>
        </CalendarTrigger>   </Triggers>   <Principals>
          <Principal id="Author">
            <UserId>SERVER\AdminUser</UserId>
            <LogonType>Password</LogonType>
            <RunLevel>LeastPrivilege</RunLevel>
          </Principal>   </Principals>   <Settings>
          <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy>
          <DisallowStartIfOnBatteries>false</DisallowStartIfOnBatteries>
          <StopIfGoingOnBatteries>false</StopIfGoingOnBatteries>
          <AllowHardTerminate>true</AllowHardTerminate>
          <StartWhenAvailable>true</StartWhenAvailable>
          <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable>
          <IdleSettings>
            <StopOnIdleEnd>true</StopOnIdleEnd>
            <RestartOnIdle>false</RestartOnIdle>
          </IdleSettings>
         <AllowStartOnDemand>true</AllowStartOnDemand>
          <Enabled>true</Enabled>
          <Hidden>false</Hidden>
          <RunOnlyIfIdle>false</RunOnlyIfIdle>
          <WakeToRun>false</WakeToRun>
          <ExecutionTimeLimit>P3D</ExecutionTimeLimit>
          <Priority>7</Priority>   </Settings>   <Actions Context="Author">
          <Exec>
            <Command>C:\<ScriptFolder\wakeup.cmd</Command>
          </Exec>   </Actions> </Task> 
    ```

# adapter - 如何将域、端口号、用户名和密码从用户输入传递到 Worklight http 适配器

> ID：15522613
> 
> 赞同：0
> 
> 时间：2013-03-20T11:45:45.283
> 
> 标签：adapter, ibm-mobilefirst

从用户输入中读取值

```
XML:
  `<protocol>http</protocol>
  <domain>192.168.1.10</domain>  
  <port>9080</port>
  <username>user</username>
   <password>pwd</password>` 
```

好的......我将简要解释......

1.  我正在尝试从运行在不同 pc 中的进程服务器访问.....
2.  如果我指定像上面这样的详细信息，它将只特定于一个系统......

所以我想从我想连接的应用程序中传递详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:11:33.383

根据对问题的补充，答案仍然是 - 这是不可能的。您不能在运行时从应用程序（或服务器）动态设置适配器的连接设置。

您没有解释连接到这些不同数据源的需求，因此我将给出两种不同场景的选项：

1.  使用具有不同过程的两个适配器，并在客户端添加一些逻辑，以便在需要时调用正确的过程。

2.  也许这个培训模块会对您有所帮助：[高级适配器使用和混搭](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/04_07_Advanced_adapter_usage_and_mashup.pdf)，如果这是您的场景。通读一遍。

# sql - 在数据库表中查找连接的子集

> ID：15522615
> 
> 赞同：0
> 
> 时间：2013-03-20T11:45:54.600
> 
> 标签：sql, duplicate-removal

在我的表中，我有一些与另一个匹配的记录：

```
644432 738987
738987 644432
..
854313 871860
854313 874411
871860 854313
871860 874411
874411 854313
874411 871860 
```

例如`644432`匹配`738987`和`738987`匹配`644432`（显然）。对我来说，它们必须是相同的，我必须得到一个且只有一个（644432 或 738987 等等）。

另一个例子`854313`与`871860`which 匹配`874411`（这就是我有 6 条记录的原因）。

我必须在决赛中只获得两条记录，我该怎么做？

对不起我的英语，如果我的问题不清楚，请告诉我。

例如，有一个代码来填充表格，例如：

```
DECLARE @DataTable TABLE (ColA  INT, ColB  INT)
insert into @DataTable  values 
(644432,    738987),
(738987,    644432),
(854313,    871860),
(854313,    874411),
(871860,    854313),
(871860,    874411),
(874411,    854313),
(874411,    871860)
select * from @DataTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:57:00.443

假设这是一个名为 DataTable 的表，它有两列 ColA 和 ColB，那么你可以这样做：

```
select distinct Smallest,Largest from
(
  select case when ColA > ColB then ColB else ColA end as Smallest,
  case when ColA > ColB then ColA else colB end as Largest
  from DataTable
) minmax 
```

这使用内部选择重新排列值，以便最小值始终位于第一列，最大值位于第二列。然后外部选择只是拉出不同的值集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:14:16.290

试试这个

select col1,col2 from (Select col1+col2 as indicator, col1, col2 from table1) 按指标分组

[在此处参考 sqlfiddle](http://www.sqlfiddle.com/#!2/9b04e/10)

注意：如果两个不同行的总和相同，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:40:26.537

```
select n1,n2 from(select a.col1 col1,a.col2 col2,rownum rn from tbl a, tbl b 
where a.col1||a.col2=(b.col2||b.col1)) where mod(rn,2)<>0
union
select a.col1 col1,a.col2 col2 from tbl a left outer join tbl b on 
a.col1||a.col2=(b.col2||b.col1) where b.col1 is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:05:12.373

用于查找连接集的递归查询。对于每个链，编号最小的项目被报告为“组长”。

该查询首先对对的成员进行排序，然后找到连接组件的链。如果集群有多个起点，此方法将*不起作用。*（但它确实避免了循环）

此语法适用于 Postgresql，对于 microsoft，您应该省略`RECURSIVE`关键字，对于 Oracle，您应该使用`CONNECT BY, PRIOR`. YMMV。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE pairs (ONE INTEGER NOT NULL, two INTEGER NOT NULL
        , PRIMARY KEY (one, two)
        );
INSERT INTO pairs(one, two) values
(644432,738987) ,(738987,644432)
,(854313,871860) ,(854313,874411) ,(871860,854313) ,(871860,874411) ,(874411,854313) ,(874411,871860)
        ;

WITH RECURSIVE rope AS (
        WITH opair AS (
                SELECT LEAST(one, two) AS one
                , GREATEST(one, two) AS two
                FROM pairs
                )
        SELECT o.one AS top
        , o.one AS one
        , o.two AS two
        FROM opair o
        WHERE NOT EXISTS ( SELECT * FROM opair x WHERE x.two=o.one)
        UNION ALL
        SELECT k.one AS top
        , p.one AS one
        , p.two AS two
        FROM opair p
        JOIN rope k ON k.two = p.one
        )
SELECT DISTINCT top
        , COUNT(*) AS N_members
FROM rope
GROUP BY top
ORDER BY top
        ; 
```

结果：

```
CREATE TABLE
INSERT 0 8
  top   | n_members 
--------+-----------
 644432 |         2
 854313 |         8
(2 rows) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:48:28.947

好的，下面的示例将跟随一级深度的链接。这可以通过存储过程或从代码创建查询来大量清理，这将更容易添加额外级别的链接跟踪。

```
-- Set up an example table
create table DataTable
(
    A int,
    B int
)
GO

insert into DataTable values(644432,738987)
insert into DataTable values(738987,644432)
insert into DataTable values(854313,871860)
insert into DataTable values(854313,874411)
insert into DataTable values(871860,854313)
insert into DataTable values(871860,874411)
insert into DataTable values(874411,854313)
insert into DataTable values(874411,871860)
GO

-- Strip out initial duplicates
select distinct A,B into Pass1
from
(
  select case when A > B then B else A end as A,
  case when A > B then A else B end as B
  from DataTable
) minmax

-- Create a copy that we will update with links between values
select * into Pass2 from Pass1 order by A

update Pass2 set B=x.NewB from
(
  select L.A as OldA,L.B as OldB, R.B as NewB
  from Pass1 L
  inner join Pass1 R on L.B = R.A
) x
where Pass2.A=x.OldA and Pass2.B=x.OldB

update Pass2 set A=x.NewA from
(
  select L.B as OldA, R.B as OldB, L.A as NewA
  from Pass1 L
  inner join Pass1 R on L.B = R.A
) x
where Pass2.A=x.OldA and Pass2.B=x.OldB

-- Dedupe any newly created duplicates
select distinct A,B
from
(
  select case when A > B then B else A end as A,
  case when A > B then A else B end as B
  from Pass2
) minmax 
```

# php - 多次使用相同的 foreach

> ID：15522616
> 
> 赞同：0
> 
> 时间：2013-03-20T11:45:55.813
> 
> 标签：php, foreach

我正在使用 foreach 加载某个产品的名称和内容。在我的导航中，它必须加载名称，再往下我们需要加载内容，但在滑块中..但这不起作用？

```
<ul class="nav nav-tabs">
<li class="active"><a href="#content1" data-toggle="tab">Overzicht</a></li>
<?php foreach($projects as $project) : ?>
    <li><a href="tab<?= $project['id'] ?>" data-toggle="tab"><?= $project['name'] ?></a></li>
<?php endforeach ?>
</ul>

<div id="tabContent" class="tab-content">
<div class="tab-pane fade in active" id="content1">
    Content 1 tab
</div>
<?php foreach($projects as $project) : ?>
<div class="tab-pane fade" id="tab<?= $project['id'] ?>">
    test
</div>
<?php endforeach ?>
</div> 
```

# c# - 引用另一个数据表 C# 的联合的数据表

> ID：15522619
> 
> 赞同：1
> 
> 时间：2013-03-20T11:45:58.407
> 
> 标签：c#, linq, datatable

我的 C# 应用程序需要 2 个`Datatables`。第一个表是从数据库中填充的。第二个表需要动态构建，因此它将第一个表中的每一行复制 3 次，并显示具有不同列名的列的子集。

到目前为止，我已经通过构建 3 个`linq`查询然后连接结果来实现这一点。例如

```
var query1 = from result in MainDataTable.AsEnumerable()
                         select new
                         {
                             MyRowID = result.Field<string>("MyRowID"),
                             Type = "ABC",
                             ScheduleDate = result.Field<DateTime>("Date1")
                         };

var query2 = from result in MainDataTable.AsEnumerable()
                         select new
                         {
                             MyRowID = result.Field<string>("MyRowID"),
                             Type = "DEF",
                             ScheduleDate = result.Field<DateTime>("Date2")
                         };

var query3 = from result in MainDataTable.AsEnumerable()
                         select new
                         {
                             MyRowID = result.Field<string>("MyRowID"),
                             Type = "GHI",
                             ScheduleDate = result.Field<DateTime>("Date3")
                         };

var queryFinal = query1.Concat(query2).Concat(query3); 
```

然后我将 queryFinal 设置为我的日历组件的数据源。

但是，在我再次运行上述代码之前，日历组件`MainDataTable`中不存在对内容的任何更改。`datasource`是否可以构建一个对象或查询，而不是复制，而是引用`MainDataTable`数据并因此自动刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:56:38.637

因此，我目前能想到的唯一解决方案是将其包装`DataRow`在一个对象中。考虑这个类：

```
public class ViewModel
{
    private DataRow _model;
    private string _dateField;

    public ViewModel(DataRow row, string dateField)
    {
        _model = row;
        _dateField = dateField;
    }

    public string MyRowID
    {
        get { return _model.Field<string>("MyRowID"); }
        set { _model["MyRowID"] = value; }
    }

    public string Type { get; set; }

    public DateTime ScheduleDate
    {
        get { return _model.Field<DateTime>(_dateField); }
        set { _model[_dateField] = value; }
    }
} 
```

现在在您的 LINQ 语句中，构建一个`ViewModel`而不是您现在的匿名类型：

```
var query1 = from result in MainDataTable.AsEnumerable()
             select new ViewModel (result, "Date1"); 
```

现在最终查询中的模型将利用该行的实例。如果它更改，您将获得新值，但如果您更改它，它也会更新该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:02:21.507

您不能只复制行、删除不需要的列并重命名现有列吗？

```
 DataTable tbl2 = MainDataTable.Clone();

        tbl2.Merge(MainDataTable.Copy());
        tbl2.Merge(MainDataTable.Copy());
        tbl2.Merge(MainDataTable.Copy());

        tbl2.Columns.RemoveAt(0);
        tbl2.Columns.RemoveAt(1);

        tbl2.Columns[0].ColumnName = "SomeName";
        tbl2.Columns[1].ColumnName = "SomeName"; 
```

# actionscript-3 - 错误 #2044：未处理的 IOErrorEvent：。闪存 AS3

> ID：15522626
> 
> 赞同：2
> 
> 时间：2013-03-20T11:46:13.357
> 
> 标签：actionscript-3, flash

试图了解为什么每次我在 Flash 中运行这段小代码时都会收到此错误！

错误：错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2035：未找到 URL。

编码：

```
import flash.display.Loader;
import flash.events.Event;
import flash.net.URLRequest;

var xmlLoader:URLLoader;
var xml:XML;

var uRequest = new URLRequest("http://xxxxxxx/app.php");
xmlLoader = new URLLoader(uRequest);
xmlLoader.addEventListener(Event.COMPLETE, onXMLLoad);
var imgLoader:Loader;

function onXMLLoad(e:Event) {
    xml = new XML(e.target.data);
    imgLoader = new Loader();
    imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded);
    imgLoader.load(new URLRequest(xml.Data.Image.text()[0]));
}

function onImgLoaded(e:Event) {
    addChild(imgLoader);
} 
```

顺便说一句，XXXXXXX 是我网站的网址。

当我检查了几次 URL 并且它是正确的 URL 时，我只能找到这个错误被吐出的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:35:31.827

您也应该始终倾听错误。

前任：

```
imgLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onImgLoadError); 
```

大多数情况下，您使用的路径/url 不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:07:36.867

我需要做的就是更改设置以及 URL 在我的 XML 文件中的显示方式。

我不得不将 /images/image1.jpg 更改为完整路径，如下所示：http: [//mysite.com//images/image1.jpg](http://mysite.com//images/image1.jpg)，这工作正常。

# jquery - 显示部分的弹出 JSON

> ID：15522627
> 
> 赞同：1
> 
> 时间：2013-03-20T11:46:16.410
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我想使用 Ajax 准备弹出窗口，但我不知道如何添加 Partial（我有错误）

问题

```
window.location = '@Url.RenderPartial("DodajTemat", Model)'; 
```

所有示例：

```
$("#dodajTemat_U").click(function () {
        $.ajax({
            url: '@Url.Action("DodajTemat", "StronaGlowna")', 
            dataType: "json",
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    window.location = '@Url.RenderPartial("DodajTemat", Model)';
                }
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:37:12.513

如果您想显示弹出窗口/灯箱/叠加层，那么我建议正确的方法是使用 HTML 和 CSS 来创建它。

就部分视图而言，我将通过 action 方法返回它。创建一个返回这个的 AjaxResult 类。

```
public class AjaxResult
{
    public string Html { get; set; }
    public bool Success { get; set; }
} 
```

然后你的 ajax 结果看起来像这样

```
$("#dodajTemat_U").click(function () {
    $.ajax({
        url: '@Url.Action("DodajTemat", "StronaGlowna")', 
        dataType: "json",
        type: "POST",
        async: false,
        error: function () {
        },
        success: function (data) {
            if (data.Success) {
                $('body').append(data.Html);
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:49:31.797

**HTML**

单击按钮时，您可以在 HTML 中声明 Action 及其对应的 Controller 信息。您也可以将其设置为隐藏。

```
<div id="MyDiv" Control-Url = "@Url.Action("ActionName", "ControllerName")"
                Action-Url = "@Url.Action("ActionName", "ControllerName")">
</div> 
```

**jQuery**

在下面的代码中。

1.  首先加载控件/弹出窗口。
2.  获取您的控件/弹出窗口的信息

* * *

```
$('#dodajTemat_U').click(function () {
    var MyDiv = $('#MyDiv');
    var url = MyDiv.attr('Control-Url');
    MyDiv.load(url, function () {
        url = MyDiv.attr('Action-Url');
        $.ajax({
            url: url,
            async: true,
            type: 'POST',
            beforeSend: function (xhr, opts) {
            },
            contentType: 'application/json; charset=utf-8',
            complete: function () { },
            success: function (data) {
            }
        });
    });
}); 
```

如果您注意，对于上面的代码，我正在获取两个 Url。

1.  用于加载的弹出/部分视图
2.  对于模型并将模型信息传递给 PopUp。

您应该从 Action Method 而不是从 javaScript 将模型信息发送到控件。

**部分视图加载的控制器操作**

```
//For loading the Pop-Up or for the Partial View
[HttpGet]
public PartialViewResult YourActionName()
{
    return PartialView("PartialViewName");
}

//For fetching the Model information and pass it to View.
public JsonResult ActionForGetInformation()
{
    return Json(Your Model Information goes here, JsonRequestBehavior.AllowGet);
} 
```

# templates - SharePoint 2013 另存为模板错误

> ID：15522630
> 
> 赞同：1
> 
> 时间：2013-03-20T11:46:33.893
> 
> 标签：templates, sharepoint, sharepoint-2013

我正在尝试将网站另存为模板（以从中创建新的网站集），但是当我按“保存”时，最终出现以下错误。我也尝试过重新启动服务器，并且确实重新安装了 SharePoint（无济于事）。有任何想法吗？

```
Microsoft.SharePoint.SPException: Feature definition with Id b8455e32-8a67-4c15-9387-b3dd7e01cb4c failed validation, file 'T135PropertyBags\Elements.xml', line 2, character 62: The 'AlwaysCreateFolder' attribute is not declared.    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.FeatureXmlValidationCallback.XmlValidationCallBack(Object sender, ValidationEventArgs evtargs)    
 at System.Xml.Schema.XmlSchemaValidator.SendValidationEvent(String code, String arg)    
 at System.Xml.Schema.XmlSchemaValidator.ValidateAttribute(String lName, String ns, XmlValueGetter attributeValueGetter, String attributeStringValue, XmlSchemaInfo schemaInfo)    
 at System.Xml.XsdValidatingReader.ValidateAttributes()    
 at System.Xml.XsdValidatingReader.ProcessElementEvent()    
 at System.Xml.XsdValidatingReader.Read()    
 at System.Xml.XmlReader.MoveToContent()    
 at System.Xml.XmlReader.IsStartElement()    
 at Microsoft.SharePoint.Utilities.SPUtility.XsdValidateXml(XmlTextReader xmlStreamReader, String friendlyName, String pathXsdFile, String tagExpectedRootNode, Int32 desiredPathVersion, ValidationEventHandler xsdValEventHandler)    
 at Microsoft.SharePoint.Utilities.SPUtility.XsdValidateXml(XmlTextReader xmlStreamReader, String friendlyName, String pathXsdFile, String tagExpectedRootNode, ValidationEventHandler xsdValEventHandler)    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.SolutionFile.ValidateFeatureXmlFile(String rootTagElement)    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.AddFeatureElementsCore(XmlNodeList nodeList, String strFeatureDirRelativeToCabFile, Guid featureId, Dictionary`2 filesAdded)    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.AddFeatureElements(XmlNode root, String strFeatureDirRelativeToCabFile, String strFeatureXmlFilename, Guid featureId)    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.WspSolutionFeature.ProcessFeatureXml()    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.InitSolutionFeatures(XmlNode root)    
 at Microsoft.SharePoint.Administration.SPSolutionPackage.ProcessSolutionManifest()    
 at Microsoft.SharePoint.Administration.SPSolutionLanguagePack.CreateSolutionPackage(SPRequest request, String name, String signature, Byte[] fileBytes)    
 at Microsoft.SharePoint.SPUserSolutionCollection.<>c__DisplayClass4.<AddOrUpgrade>b__0()    
 at Microsoft.SharePoint.Utilities.SecurityContext.RunAsProcess(CodeToRunElevated secureCode)    
 at Microsoft.SharePoint.SPUserSolutionCollection.AddOrUpgrade(SPListItem item, SPUserSolution existingSolution)    
 at Microsoft.SharePoint.SPUserSolutionCollection.Add(Int32 solutionGalleryItemId)    
 at Microsoft.SharePoint.SPSolutionExporter.ExportWebToGallery(SPWeb web, String solutionFileName, String title, String description, ExportMode exportMode, Boolean includeContent, String workflowTemplateName, String destinationListUrl, Action`1 solutionPostProcessor, Boolean activateSolution) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:49:55.547

确保您的 15 hive\TEMPLATE\XML\wss.xsd 文件包含`<xs:complexType name="PropertyBagDefinition">`以下属性：

```
<xs:attribute name="AlwaysCreateFolder" type="TRUEFALSE" use="optional" /> 
```

# php - AJAX PHP 条件逻辑未正确评估

> ID：15522643
> 
> 赞同：0
> 
> 时间：2013-03-20T11:47:11.100
> 
> 标签：php, javascript, ajax, conditional

由于某种原因，来自我的 PHP 的 ajax.responseTest 将无法在下面的 javascript 条件代码中正确评估。ajax.responseTest 以“signup_success”的形式返回（我用警告框检查了它，它肯定会正确返回），但我的 JS 代码中的条件不会正确评估。

这是javascript：

```
else {
    _("signupbtn").style.display = "none";
    status.innerHTML = 'please wait ...';
    var ajax = ajaxObj("POST", "signup.php");
    ajax.onreadystatechange = function() {
        if(ajaxReturn(ajax) == true) {
            if(ajax.responseText != "signup_success"){
                status.innerHTML = ajax.responseText;
                _("signupbtn").style.display = "block";
            } else {
                _("sign").innerHTML = ajax.responseText;
                window.scrollTo(0,0);
                _("signupform").innerHTML = "OK "+u+", check your email inbox and junk mail box at <strong>"+e+"</strong> in a moment to complete the sign up process by activating your account. You will not be able to do anything on the site until you successfully activate your account.";
            }
        }
    }
ajax.send("u="+u+"&e="+e+"&p="+p1+"&g="+g);
} 
```

如果我将 "ajax.responseText != "signup_success" " 中的逻辑运算符更改为 "==" ，则 else 块将运行，因此在条件逻辑之前没有其他问题，并且我已经对其和 PHP 进行了测试（如下) 肯定会返回“signup_success”。你认为那个“if”语句中的问题可能是什么？

这是供参考的PHP：

```
 <?php
// Ajax calls this REGISTRATION code to execute
if(isset($_POST["u"])){
    // CONNECT TO THE DATABASE
    include_once("php_includes/db_conx.php");
    // GATHER THE POSTED DATA INTO LOCAL VARIABLES
    $u = preg_replace('#[^a-z0-9]#i', '', $_POST['u']);
    $e = mysqli_real_escape_string($db_conx, $_POST['e']);
    $p = $_POST['p'];
    $g = preg_replace('#[^a-z]#', '', $_POST['g']);
    // GET USER IP ADDRESS
    $ip = preg_replace('#[^0-9.]#', '', getenv('REMOTE_ADDR'));
    // DUPLICATE DATA CHECKS FOR USERNAME AND EMAIL
    $sql = "SELECT id FROM users WHERE username='$u' LIMIT 1";
    $query = mysqli_query($db_conx, $sql); 
    $u_check = mysqli_num_rows($query);
    // -------------------------------------------
    $sql = "SELECT id FROM users WHERE email='$e' LIMIT 1";
    $query = mysqli_query($db_conx, $sql); 
    $e_check = mysqli_num_rows($query);
    // FORM DATA ERROR HANDLING
    if($u == "" || $e == "" || $p == "" || $g == ""){
        echo "The form submission is missing values.";
        exit();
    } else if ($u_check > 0){ 
        echo "The username you entered is alreay taken";
        exit();
    } else if ($e_check > 0){ 
        echo "That email address is already in use in the system";
        exit();
    } else if (strlen($u) < 3 || strlen($u) > 16) {
        echo "Username must be between 3 and 16 characters";
        exit(); 
    } else if (is_numeric($u[0])) {
        echo 'Username cannot begin with a number';
        exit();
    } else {
    // END FORM DATA ERROR HANDLING
    // Begin Insertion of data into the database
    // Hash the password and apply your own mysterious unique salt
    $p_hash = md5($p);
    // Add user info into the database table for the main site table
    $sql = "INSERT INTO users (username, email, password, gender, ip, signup, lastlogin, notescheck) VALUES('$u','$e','$p_hash','$g','$ip',now(),now(),now())";
    $query = mysqli_query($db_conx, $sql); 
    $uid = mysqli_insert_id($db_conx);
    // Establish their row in the useroptions table
    $sql = "INSERT INTO useroptions (id, username, background) VALUES ('$uid','$u','original')";
    $query = mysqli_query($db_conx, $sql);
    // Create directory(folder) to hold each user's files(pics, MP3s, etc.)
    if (!file_exists("user/$u")) {
        mkdir("user/$u", 0755);
    }
    //Email the user their activation link
    //$to = "$e";    
//  $from = "auto_responder@dilingle.com";
//  $subject = 'yoursitename Account Activation';
//  $message = '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Dilingle Message</title></head><body style="margin:0px; font-family:Tahoma, Geneva, sans-serif;"><div style="padding:10px; background:#333; font-size:24px; color:#CCC;"><a href="http://www.dilingle.com"><img src="http://www.yoursitename.com/images/logo.png" width="36" height="30" alt="yoursitename" style="border:none; float:left;"></a>yoursitename Account Activation</div><div style="padding:24px; font-size:17px;">Hello '.$u.',<br /><br />Click the link below to activate your account when ready:<br /><br /><a href="http://www.yoursitename.com/activation.php?id='.$uid.'&u='.$u.'&e='.$e.'&p='.$p_hash.'">Click here to activate your account now</a><br /><br />Login after successful activation using your:<br />* E-mail Address: <b>'.$e.'</b></div></body></html>';
//  $headers = "From: $from\n";
//        $headers .= "MIME-Version: 1.0\n";
//        $headers .= "Content-type: text/html; charset=iso-8859-1\n";
//  mail($to, $subject, $message, $headers);
    echo "signup_success";
    exit();
    }
exit();
}
?> 
```

就像我说的，PHP 脚本末尾的“signup_success”肯定会触发，但上面的 JS 不会正确评估它。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:54:06.827

假设正确发布了参考 PHP 代码，您的脚本中有前导空格：

```
 <?php
^^^^ 
```

输出将是：

```
 signup_success 
```

尝试从脚本中删除不必要的空格或修剪 responseText：

```
if(ajax.responseText.replace(/^\s+|\s+$/g, "") == "signup_success") ... 
```

# java - 从 jar 文件运行 ant 脚本

> ID：15522647
> 
> 赞同：0
> 
> 时间：2013-03-20T11:47:25.217
> 
> 标签：java, ant

是否可以从 jar 文件中运行 ant 脚本？

目前，我有一个 build.xml，它调用了一个 jar 文件中的一些 java 代码。然后它会做一些进一步的蚂蚁处理。

当我从 Eclipse 导出 jar 文件时，我可以选择将 build.xml 文件添加到 jar 中，所以我想知道是否可以以某种方式直接从 jar 中运行 ant 脚本，这样我只需要给人们 jar文件，而不是 ant 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:56:17.283

答案是循环的。您是否尝试将 build.xml 添加到 A.jar 本身中执行 A.jar？如果是这样，您希望使用 build.xml 中提到的参数执行 jar。如果是这种情况，您不妨编写一个使用这些特定参数集运行的 main 方法。

在任何情况下，总有一种方法可以使用一些参数来运行您的 jar，这些参数可以在没有 build.xml 的情况下完成。

如果你真的需要通过 ant 来做这个，使用这个 [在 Java 中启动一个进程？](https://stackoverflow.com/questions/3774432/starting-a-process-in-java)

**更新：**

请参阅 stackoverflow 中的此链接。->[从 Java 运行 ant](https://stackoverflow.com/questions/6733684/run-ant-from-java)

我没有亲自尝试过，但这是一种方法，前提是您要注意问题的循环性质

# python - Windows 上的 subprocess.call 没有启动第二个文件

> ID：15522648
> 
> 赞同：2
> 
> 时间：2013-03-20T11:47:25.590
> 
> 标签：python, windows, subprocess

我正在调整我在 Linux 上为 Win 7 编写的代码。

在 Linux 上是：

```
subprocess.call(['./myscript.py', arg1, arg2, arg3]) 
```

它是从 Shell 启动的，一切正常。对于 Windows（我使用 Idle 中的 Python），我做到了：

```
subprocess.call(['myscript.py', arg1, arg2, arg3],  shell=True) 
```

它似乎没有启动任何东西，但没有给我任何错误。我尝试使用 pdb.set_trace() 调试该函数，而 myscript.py 中的检查点没有显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:31:16.180

As in the comments and the linked question, in Windows you cannot simply execute the python script, you also need to provide the path to the python executable. As you're already using python, you can find the location of the executable simply with `sys.executable`

```
import sys

p = subprocess.Popen([sys.executable, 'myscript.py', arg1, arg2, arg3]) 
```

The output is being piped to `stderr` and `stdout` - to see it you'll also need `communicate`

```
(stdoutdata, stderrdata) = p.communicate()

print stdoutdata, 
print stderrdata 
```

# asp.net-web-api - 是否可以 xcopy 部署自托管的 ASP.NET Web API 控制台应用程序？

> ID：15522649
> 
> 赞同：3
> 
> 时间：2013-03-20T11:47:27.897
> 
> 标签：asp.net-web-api

根据[本教程](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)，必须以管理员身份运行自托管 ASP.NET Web API 应用程序，或者必须有人`netsh http add urlacl`在将运行该应用程序的机器上运行命令。

我有一个控制台 ASP.NET Web API 应用程序，我希望部署过程尽可能简单。有没有办法设置应用程序以便可以 xcopy 部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:19:30.090

这是 Windows UAC 限制。如果您的应用程序需要侦听特定端口，则需要一些特权。除非您以管理员身份运行该应用程序，否则您必须运行 netsh 以授予运行该应用程序的 Windows 帐户以打开端口的权限。您可以将清单添加到控制台应用程序以强制它始终以管理员身份运行。

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="requireAdministrator"></requestedExecutionLevel>     
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

问候
巴勃罗。

# javascript - D3.js exit() 似乎没有得到更新的信息

> ID：15522661
> 
> 赞同：1
> 
> 时间：2013-03-20T11:47:58.160
> 
> 标签：javascript, d3.js

我有一个 Django View 将 tablib CSV 提供给 D3.js。但是，我发现无论我如何或在何处使用 exit()，它都不会返回任何内容——因此，我无法删除旧的、不需要的元素，并且所有内容都只是相互叠加。

有任何想法吗？我的代码非常依赖[于基本的堆积条形图示例](http://bl.ocks.org/mbostock/3886208)。

```
<div id="id_d3_canvas" class="d3_canvas_space">
</div>
<div>
<form id="id_date_form">
    <input id="id_date_small" name="date1" type="text" value="03-01-2012">
    <input id="id_date_large" name="date2" type="text" value="{% now 'n-j-Y' %}">
    <select name="our_people" multiple>
        {% for person in object_list %}
        <option value="{{ person.name }}" selected>{{ person.name }}</option>
        {% endfor %}
    </select>
</form>
<button id="id_test_data_gather" class="btn btn-primary update_d3_csv">Update</button>
</div>

<script src="{{ STATIC_URL }}cms/js/d3.min.js"></script>
<script>
    var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 900 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var x = d3.scale.ordinal()
        .rangeRoundBands([0, width], .1);

    var y = d3.scale.linear()
        .rangeRound([height, 0]);

    var color = d3.scale.ordinal()
        .range(["#98abc5", "#ff8c00"]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .tickFormat(d3.format(".2s"));

    var svg = d3.select(".d3_canvas_space").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var date_info = $("#id_date_form").serialize(),
        initial_csv_url = "{% url blahblah %}?" + date_info;

    function updateMultiData(multi_csv_url) { 
        d3.csv(multi_csv_url, function(error, data) {
            color.domain(d3.keys(data[0]).filter(function(key) { return key !== "Name"; }));

            data.forEach(function(d) {
                var y0 = 0;
                d.tasks = color.domain().map(function(category) { return {category: category, y0: y0, y1: y0 += +d[category]};});
                d.total_tasks = d.tasks[d.tasks.length - 1].y1;
            });

            data.sort(function(a, b) { return b.total - a.total; });

            x.domain(data.map(function(d) { return d.Name; }));
            y.domain([0, d3.max(data, function(d) { return d.total_tasks; })]);

            svg.selectAll(".name").data(data).exit().remove()

            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("Tasks");

            var person_name = svg.selectAll(".name")
                .data(data)
                .enter().append("g")
                .attr("transform", function(d) { return "translate(" + x(d.Name) + ",0)"; });

            person_name.selectAll("rect")
                .data(function(d) { return d.tasks; })
                .enter().append("rect")
                .attr("width", x.rangeBand())
                .attr("y", function(d) { return y(d.y1); })
                .attr("height", function(d) { return y(d.y0) - y(d.y1); })
                .style("fill", function(d) { return color(d.category); });

            console.log(svg.selectAll(".name").data(data).exit());

            var legend = svg.selectAll(".legend")
                .data(color.domain().slice().reverse())
                .enter().append("g")
                .attr("class", "legend")
                .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

            legend.append("rect")
                .attr("x", width - 18)
                .attr("width", 18)
                .attr("height", 18)
                .style("fill", color);

            legend.append("text")
                .attr("x", width - 24)
                .attr("y", 9)
                .attr("dy", ".35m")
                .style("text-anchor", "end")
                .text(function(d) { return d; });

        });
    };

    updateMultiData(initial_csv_url);

    $(document).on("click", "button.update_d3_csv", function(e){
        e.preventDefault();
        var new_info = $("#id_date_form").serialize(),
            new_multi_csv_url = "{% url blahblah %}?" + new_info;
        updateMultiData(new_multi_csv_url);
        console.log(new_multi_csv_url);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T21:25:05.517

在上面的示例中，输入的节点似乎没有定义的类。任何后续`d3.selectAll(".name")`都将返回一个空选择，并且所有数据元素都将显示在`.enter()`方法下。

每次附加输入节点时，您可能想尝试分配相应的类名：

```
.enter().append("g").classed("name",true) 
```

您可能还需要考虑使用 的第二个参数`.data()`为每个数据点定义一个唯一标识符（键），以确保在每次更新时退出正确的元素（如果顺序不同）。 [https://github.com/mbostock/d3/wiki/Selections#wiki-data](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

在您的代码中，“名称”属性可能用作键：

```
var person_name = svg.selectAll(".name")
            .data(data,function(d) { return d.name; }) 
```

最后我注意到您在更新函数中附加了轴。这意味着在之前的更新之上，每次更新都会附加一组新的轴。您可能希望将它们移到顶层。

# sqlite - Sqlite：将日期转换为月份中的天数

> ID：15522662
> 
> 赞同：1
> 
> 时间：2013-03-20T11:48:07.893
> 
> 标签：sqlite, date

这是我的问题：我的 sqlite 数据库中有一些日期。我想要做的是以下内容：

```
SELECT dates FROM Table1 WHERE dates > date('now','-1 month'); 
```

结果是：

```
2013-02-21 12:04:22
2013-02-28 12:04:22
2013-02-01 12:04:22 
```

如何将这些日期转换为以下内容：

```
2013-02-21 12:04:22 become 2 (day 2 of the month)
2013-02-28 12:04:22 become 9 (day 9 of the month)
2013-03-01 12:04:22 become 10(day 10 of the month) 
```

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:04:42.653

尝试

```
select julianday(dates) - julianday(date('now','-1 month')) + 1
from table1
where dates > date('now','-1 month') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:08:15.943

```
select cast((julianday(dates) - julianday(date('now','-1 month')) + 1)as int)
from table1
where dates > date('now','-1 month') 
```

只保留整数部分:) 非常感谢 AnatolyS

# ios - 在 Objective-c 中需要有关 REST 服务身份验证的帮助

> ID：15522670
> 
> 赞同：0
> 
> 时间：2013-03-20T11:48:24.560
> 
> 标签：ios, objective-c, rest

我第一次尝试使用基于休息的网络服务，所以我搜索了教程和示例，我发现了这些[链接](http://blog.hardikr.com/tech/rest-objc/)1和[链接2](http://blog.mugunthkumar.com/articles/iphone-tutorial-authenticating-with-a-restful-service-using-nsurlcredential/)

我的同事创建了一个简单的休息服务，首先没有身份验证我成功地获取了 json 格式的数据，但是基于表单的身份验证的相同服务我无法调用它，其中包括在 http 标头中添加 id、密码`[request addValue:@"id:password" forHTTPHeaderField:@"Authorization"];`，使用`willSendRequestForAuthenticationChallenge`但没有成功。

我还发现了大量的[RestKit](http://restkit.org)文章，但它的问题是它太重了，我对项目的要求并不那么复杂。

请任何人都可以提供好的和完整的教程或任何方式来导入 Restkit 所需的功能而不是整个 16mb 框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:40:31.547

我推荐AFNetworking，它易于集成且非常可靠。

您可以使用 AFURLConnection -setAuthenticationChallengeBlock: 来响应身份验证质询。

# xcode - XCode，表格视图 cellForRowAtIndexPath

> ID：15522672
> 
> 赞同：1
> 
> 时间：2013-03-20T11:48:26.070
> 
> 标签：xcode, uitableview

我知道有一个简单的解决方案，但我似乎无法分辨：/

```
cell.textLabel.text = [BooksBorrowed objectAtIndex:0]; 
```

我在 cellForRowAtIndexPath 方法中有它， bookName 是一个字符串。它崩溃并且在日志中没有留下任何错误。我不知道我做错了什么。

bookName 是我从 JSON Parsing 获得的一个字符串，它有内容。

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath
 {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier] autorelease];
    }

    NSLog(@"Book Name is %@", BooksBorrowed[0]);
    cell.textLabel.text = [BooksBorrowed objectAtIndex:0];

    return cell;
  } 
```

这就是我获得 BooksBorrowed 数组的方式：

```
 - (void)updateMyBooks
  {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Fetch data on a background thread:
        NSString *authFormatString =
        @"http://localhost:8888/Jineel_lib/bookBorrowed.php?uid=%d";

        NSString *urlString = [NSString stringWithFormat:authFormatString, 1];

        NSURL *url = [NSURL URLWithString:urlString];

        NSString *contents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

        response1 = [contents JSONValue];

        if (contents) {
          NSMutableArray *newBooksBorrowed = [NSMutableArray array];

          // ... Parse JSON response and add objects to newBooksBorrowed ...
          BookName = [[NSString alloc]init];
          DateBorrowed = [[NSString alloc]init];
          BookID = [[NSString alloc]init];
          BookExtended = [[NSString alloc]init];
          BookReturned = [[NSString alloc]init];

          BookName = [response1 valueForKey:@"BookName"];
          BookID = [response1 valueForKey:@"BookID"];
          DateBorrowed = [response1 valueForKey:@"DateBorrowed"];
          BookExtended = [response1 valueForKey:@"Extended"];
          BookReturned = [response1 valueForKey:@"Returned"];
          NSLog(@"Book Name is %@", BookName);

          [newBooksBorrowed addObject:BookName];

          dispatch_sync(dispatch_get_main_queue(), ^{
          // Update data source array and reload table view.
          BooksBorrowed = newBooksBorrowed;
          [self.tableView reloadData];
        });
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:57:12.017

你确定 bookName 是一个有效的 NSString 吗？我会打破那行代码并输入

```
po bookName 
```

在调试器中查看您分配的内容`bookName`是否实际上是有效的 NSString。

哦，请确保在该方法结束时返回有效的 UITableViewCell，否则保证您的代码会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:14:54.547

替换此代码**BooksBorrowed = newBooksBorrowed;** 在你的函数中使用这个

```
BooksBorrowed = [[NSString alloc] initWithArray:newBooksBorrowed]; 
```

希望能帮助到你。快乐编码..谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:21:06.610

我的问题的解决方案是：

我不得不将我将数据添加到表中的部分更改为：

```
 NSString *string = [[NSString alloc] initWithFormat:@"%@",[BooksBorrowed objectAtIndex:indexPath.row]]; 
```

这是因为表格视图往往不会获取元素 0 的内容。我还取出了 newBooksBorrowed，它仅适用于 BooksBorrowed 数组。:) 谢谢大家帮我解决它。

# r - 在 R 编程中做 T.test

> ID：15522674
> 
> 赞同：-2
> 
> 时间：2013-03-20T11:48:31.517
> 
> 标签：r, statistics

我需要一些帮助来进行 t 检验。我知道如何为单个数据集执行此操作，但我需要帮助进行 2 个样本 t 检验。我有一个名为 data1 的数据集：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:14:14.710

数据：

```
data1 <- data.frame(n = 15, mean = 14, sd = 8)
data2 <- data.frame(n = c(17, 5, 8), mean = c(19, 17, 11), sd = c(7, 6, 9)) 
```

t 检验函数（基于观察次数、平均值和标准差）：

```
T.test <- function(n, mean, sd) {
  s <- sum((n - 1) * sd^2) / (sum(n) - 2) # weighted variance
  t <- sqrt(prod(n) / sum(n)) * (diff(mean) / sqrt(s)) # t statistic
  df <- sum(n) - 2  # degrees of freedom
  p <- (1 - pt(abs(t), df)) * 2 # p value
  c(t = t, p = p)
} 
```

将函数应用于 的所有行`data2`：

```
apply(data2, 1, function(x) T.test(c(x[1], data1$n),
                                   c(x[2], data1$mean), 
                                   c(x[3], data1$sd))) 
```

输出显示 中所有行的 t 值和 p 值`data2`：

```
 [,1]       [,2]      [,3]
t -1.98618371 -0.8215838 0.8730255
p  0.05621594  0.4220631 0.3925227 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:52:38.050

R中还有一个内置函数

```
?t.test 
```

*描述 对数据向量执行一个和两个样本 t 检验。*

```
#just an easy example
a = c(12.9, 13.5, 12.8, 15.6, 17.2, 19.2, 12.6, 15.3, 14.4, 11.3)
b = c(12.7, 13.6, 12.0, 15.2, 16.8, 20.0, 12.0, 15.9, 16.0, 11.1)

t.test(a,b, paired=TRUE)

Paired t-test

data: a and b
t = -0.2133, df = 9, p-value = 0.8358
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
-0.5802549 0.4802549
sample estimates:
mean of the differences
-0.05 
```

# c - Windows下编译Mongoose的hello.c

> ID：15522679
> 
> 赞同：1
> 
> 时间：2013-03-20T11:48:43.027
> 
> 标签：c, windows, mongoose-web-server

我正在尝试在 Windows 下从[Mongoose编译包含的](https://code.google.com/p/mongoose/)[hello.c](https://github.com/valenok/mongoose/blob/master/examples/hello.c)示例。我正在使用 Microsoft Visual 命令提示符，并且已将 mongoose.c 和 mongoose.h 复制到与 hello.c 示例相同的目录中。

当我写“cl hello.c”时，我得到以下输出/错误：

```
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

hello.c
Microsoft (R) Incremental Linker Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

/out:hello.exe
hello.obj
hello.obj : error LNK2019: unresolved external symbol _mg_stop referenced in function _main
hello.obj : error LNK2019: unresolved external symbol _mg_start referenced in function _main
hello.obj : error LNK2019: unresolved external symbol _mg_printf referenced in function _begin_request_handler
hello.obj : error LNK2019: unresolved external symbol _snprintf referenced in function _begin_request_handler
hello.obj : error LNK2019: unresolved external symbol _mg_get_request_info referenced in function _begin_request_handler

hello.exe : fatal error LNK1120: 5 unresolved externals 
```

示例中包含一个[Makefile](https://github.com/valenok/mongoose/blob/master/examples/Makefile)，我尝试使用 Makefile 进行构建，但不明白如何执行此操作。如果我尝试“nmake hello.exe”。我得到以下输出/错误：

```
Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        cl -W -Wall -I.. -pthread -g hello.c
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

cl : Command line error D8004 : '/W' requires an argument
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\cl.EXE"' : return code '0x2'
Stop. 
```

**编辑** 我还尝试按照[用户手册](https://github.com/valenok/mongoose/blob/master/UserManual.md#embedding)中的说明进行编译，在 Windows 上应转换为“cl hello.c mongoose.c -o hello.exe”，但随后出现以下错误消息：

```
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

cl : Command line warning D9035 : option 'o' has been deprecated and will be removed in a future release
hello.c
mongoose.c
Generating Code...
Microsoft (R) Incremental Linker Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

/out:hello.exe
/out:hello.exe
hello.obj
mongoose.obj
hello.obj : error LNK2019: unresolved external symbol _snprintf referenced in function _begin_request_handler
hello.exe : fatal error LNK1120: 1 unresolved externals 
```

有没有人建议需要采取哪些步骤才能在 Windows 下为 Mongoose 编译 hello.c 示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:03:15.703

我发现我上面第三次尝试的问题是在 Visual Studio 10 使用的 C 版本中，“_snprintf”已被弃用并被“_snprintf_s”取代。因此，我用 _snprintf_s 替换了“_snprintf”的一次出现，它起作用了.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T12:33:58.777

看起来您没有为 mongoose 指定与库（DLL，无论它实际上是什么）的链接。这就是为什么你有未解决的外部因素。它需要知道在哪里可以找到它们，以便可执行文件可以在运行时找到它们（如果它是动态链接的）或将代码包含在 .exe 中（如果是静态完成的）。

# php - 在 html 列表中显示 json api 数据

> ID：15522682
> 
> 赞同：0
> 
> 时间：2013-03-20T11:48:57.077
> 
> 标签：php, jquery, json, api, jsonp

我有一个 json API 密钥，我正在尝试将 json 数据转换为以 HTML 或 php 的无序列表显示。

这是我拥有的 API 密钥：http: //kippamp.uservoice.com/api/v1/forums/1/suggestions.json?client= [qikbghkQYRolFTMvEXg](http://kippamp.uservoice.com/api/v1/forums/1/suggestions.json?client=qikbghkQYRolFTMvEXg)

我可以使用以下代码解析原始 json 数据：

```
<script>
$.ajax({
    type: 'GET',
    url: 'http://kippamp.uservoice.com/api/v1/forums/1/suggestions.json?client=qikbghkQYRolFTMvEXg',
    async: false,
    jsonpCallback: 'jsonCallback',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(data)
    {
        $('#jsonp-results').html(JSON.stringify(data));
        console.log(json);
    },
    error: function(e)
    {
       alert(e.message);
    }
});
</script> 
```

但无法解析数据以格式化方式列出。

有人可以帮我吗？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:57:51.793

只需在循环中呈现您的结果。例如将它们附加到`ul`容器中：

```
success: function (data) {
    var $ul = $('#results');
    $.each(data.suggestions, function(i, el) {
       $ul.append('<li>' + el.formatted_text + '</li>');
    });
}, 
```

[http://jsfiddle.net/zvBE3/](http://jsfiddle.net/zvBE3/)

你只需要决定你需要呈现什么数据以及你应该使用什么模板：

```
var row =
    '<li>' + 
        '<h2>' + el.title + '</h2>' +
        '<div>' + el.formatted_text + '</div>'+
    '</li>';
$ul.append(row); 
```

[http://jsfiddle.net/zvBE3/3/](http://jsfiddle.net/zvBE3/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:58:13.457

Ajax 请求返回一个对象，您必须循环`data.suggestions`创建列表。就像是：

```
$.each(data.suggestions, function(id, suggestion) {
    $('ul.mylist').append($('<li>'+suggestion.title+'</li>'));
}); 
```

# c - 在 C 中 - 函数获取 char 指针并向其添加字符

> ID：15522683
> 
> 赞同：0
> 
> 时间：2013-03-20T11:48:57.697
> 
> 标签：c, char

我试图考虑如何编写一个函数来获取 char* 并返回指向同一个 char 的指针，但在添加到他的末尾几个常量字符之后。

```
char* addExtension(char* FileName)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:50:56.587

我认为这正是标准库函数[`strcat()`](http://linux.die.net/man/3/strcat)（用于“字符串连接”）所做的。你应该考虑使用它。

还要注意缓冲区溢出的危险，这样的函数（和`strcat()`，就此而言）本质上是不安全的，因为它不包含有关可用空间的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:56:30.943

你真的不能这样做，无论如何都不能使用任意字符串。字符串可以是：

*   常量（如文字“hello world”）。那些不能修改
*   Char 数组（如 char thingie[10]）。他们有固定的空间 - 如果你用完了它，你会变得非常友好`Segmentation fault`或更糟。
*   `malloc`'d 指针 - 它们也有固定的空间量，需要`free`d.

您可以复制该字符串并返回一个新字符串，但如果您不处理旧字符串，可能会导致内存泄漏。例子

```
char *copycat(char *first, char *second) {
    char *result = malloc(strlen(first)+strlen(second)+1);
    strcpy(result, first);
    strcpy(result+strlen(first), second);
    return result;
} 
```

# android-emulator - Android相机正面在模拟器中不起作用

> ID：15522686
> 
> 赞同：1
> 
> 时间：2013-03-20T11:49:04.797
> 
> 标签：android-emulator, camera

我正在开发安卓应用程序。为了运行我的应用程序，我使用以下配置设置创建了模拟器（我想将网络摄像头设置为前置摄像头）。

**配置前置摄像头：webcam0，设备内存大小：512，......**

但是当我检查前置摄像头是否可用时，

```
PackageManager pm = getPackageManager();
frontCam = pm.hasSystemFeature("android.hardware.camera.front");
rearCam = pm.hasSystemFeature(PackageManager.FEATURE_CAMERA); 
```

我将**frontCam**值设为**false**，**将 backCam**值设为**true**。

AVD 截图如下。如何将网络摄像头用作前置摄像头？

![AVD 配置](../Images/6f71baae39d96b8c679474902b33a18d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:04:52.067

你有没有配置你的 AVD 来**配置相机正面**

如果不是，则编辑您的 AVD 或创建新的

![编辑您的 AVD](../Images/6ca87c5cfb546356c4e76f874622dfed.png)

添加配置相机正面

![单击硬件部分中的新建](../Images/fe020e8182922c6039eff695e18ffce1.png)

设置您想要的选项

![设置您想要的选项](../Images/7212294fda260556bf7748a2a730de56.png)

并运行您的项目。

希望这可以帮助。

快乐编码。谢谢。

# java - 多字节字符

> ID：15522688
> 
> 赞同：0
> 
> 时间：2013-03-20T11:49:08.737
> 
> 标签：java, windows, eclipse, oracle

我已将多字节字符（中文字符）加载到 oracle 中，并且从 Java 中我正在从 oracle 获取数据。在 Eclipse 控制台中，它`?`代替中文字符显示。
这仅在windows环境中发生，在linux中不会发生。

oracle表中插入的数据：

```
 NAME         
 ------------ 
 국            
 subhan       
 汉 
```

用于获取数据的代码：

```
Class.forName("oracle.jdbc.driver.OracleDriver");
        String url="dbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl)))";
        Connection conn= DriverManager.getConnection(url, "OE_schema", "OE_schema");

    Statement stmt=conn.createStatement();

    ResultSet rs= stmt.executeQuery("select NAME from MULTIBYTEINFA332115");
    while(rs.next()){
        System.out.println(" "+rs.getString(1));
    } 
```

运行代码后，它在 Eclipse 控制台中显示如下结果：

```
 ?  
 subhan
 ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:55:53.967

Windows 中的控制台默认显示拉丁字符集，因此 UTF-8 和 UTF-16 字符经常会遇到问题。

对于您的运行配置，您需要在公共选项卡上为您计划以非默认要求运行的每个应用程序设置编码。

像这样：

![在此处输入图像描述](../Images/2c601616954d117895728dc4f21d2b8a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:54:52.873

尝试将 -Dfile.encoding=UTF-8 添加到 eclispe.ini

# database - 如何为更改数据库角色的对象设计表

> ID：15522689
> 
> 赞同：1
> 
> 时间：2013-03-20T11:49:11.717
> 
> 标签：database, oop, database-design

我正在重写一个允许人们将钱从一个人转移到另一个人的应用程序。所以基本上有发送者和接收者。最初在表中，我在发件人和收件人之间创建了一对多关系。

现在，有一个新的要求，即同一个 Sender 也可以是 Transaction 中的 Recipient 并且 Recipient 也可以成为 Sender（即 Recipient 可以将钱退回给 Sender）。在我看来，现在有单独的 Sender 和 Recipient 表是没有意义的。

另一层困难是，如果我沿着单表这条路线走，我如何满足发送者必须注册接收者的要求。对于发件人来说，我必须能够显示他/她的收件人是谁，即使该发件人尚未向他们汇款但只注册了他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:37:42.993

这应该让你开始。

*   **人**存在。
*   **发件人**是一个**人**。
*   **收件人**是一个**人**。
*   **发件人**注册了**收件人**
*   **发件人**于转移`Amount`到**收件人**`TransactionTime`。

* * *

![在此处输入图像描述](../Images/9a0435e813646966cd7e474be6561422.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:57:07.647

发件人不是发件人。发件人是一个人（或更一般地说是法律方），可以*扮演*发件人或收件人，或两者兼而有之的角色。

```
create table Party (
  id serial primary key,
  name text not null
);

create table Payment (
  from_party_id int not null references party(id),
  to_party_id int not null references party(id),
  paid_at timestamp not null default current_timestamp,
  check (from_party_id <> to_party_id)
);

create table Registered_Recipients (
  sender_id int not null references party(id),
  recipient_id int not null references party(id),
  check (sender_id <> recipient_id)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:25:29.370

您的单表前提是荒谬的；首先，您至少需要这些实体：

*   帐户所有者
*   帐户
*   注册发件人
*   注册收件人
*   交易

稍微玩一下这个设置，并在遇到任何特定困难时进行回调。

# c++ - 尝试读取二进制文件 C++ 时出现问题

> ID：15522697
> 
> 赞同：0
> 
> 时间：2013-03-20T11:49:30.703
> 
> 标签：c++, file, binary, ifstream, cer

我正在用 Visual Studio C++ 编写一个简单的控制台应用程序。我想读取一个`.cer`扩展为字节数组的二进制文件。

```
ifstream inFile;
size_t size = 0; 
char* oData = 0;
inFile.open(path, ios::in|ios::binary);

if (inFile.is_open())
{
    size = inFile.tellg();     // get the length of the file
    oData = new char[size+1];  //  for the '\0'
    inFile.read( oData, size );
    oData[size] = '\0' ;       // set '\0'

    inFile.close();
    buff.CryptoContext = (byte*)oData;
    delete[] oData;
} 
```

但是当我启动它时，我会在所有`oData`字符中收到相同的字符，每次都是另一个字符，例如：

```
oData = "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@...". 
```

然后我尝试了另一种方法：

```
std::ifstream in(path, std::ios::in | std::ios::binary);

if (in)
{
    std::string contents;

    in.seekg(0, std::ios::end);
    contents.resize(in.tellg());

    in.seekg(0, std::ios::beg);
    in.read(&contents[0], contents.size());

    in.close();
} 
```

现在内容有很奇怪的值：一部分值是正确的，一部分是负值和奇怪的值（可能与`signed char`和有关`unsigned char`？）。

有人有什么主意吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:00:01.243

您将 CryptoContext 设置为通过`byte`指针指向您的数据，然后删除该数据！

```
buff.CryptoContext = (byte*)oData;
delete[] oData; 
```

在这行之后 CryptoContext 指向已释放和无效的数据。只需在内存中保留`oData`更长的数组并在完成解码或使用它进行任何操作后将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:00:10.720

看第一个版本：

是什么让您认为`tellg`获得了流的大小？它没有，它[返回当前读取位置](http://www.cplusplus.com/reference/istream/istream/tellg/)。然后，您继续指向您的数据指向`buff.CryptoContents`并立即删除指向的数据！这是非常危险的做法；您需要复制数据、使用智能指针或以其他方式确保数据具有正确的生命周期。如果您在调试模式下运行，则删除可能会用标记来显示您的数据已被删除，这就是您获得相同字符流的原因。

我怀疑你关于签名和未签名的建议可能是正确的，但我不能在没有看到你的文件和数据的情况下说。

# ios - 当 iOS 上的状态栏高度发生变化时，基于约束的布局没有动画

> ID：15522698
> 
> 赞同：11
> 
> 时间：2013-03-20T11:49:32.423
> 
> 标签：ios, animation, autolayout

我有这个曾经的看法`autoresizingMask = UIViewAutoresizingFlexibleHeight`

当状态栏会为其高度设置动画时（例如挂断电话时），视图的高度会设置动画并增加。

但是通过自动布局，我用约束替换了这个 autoresizingMask：

```
UIView *orangeView = [[UIView alloc] initWithFrame:CGRectZero];
orangeView.translatesAutoresizingMaskIntoConstraints = NO;
orangeView.backgroundColor = [UIColor orangeColor];

[self.view addSubview:orangeView];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[orangeView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(orangeView)]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-(40)-[orangeView]-(190)-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(orangeView)]]; 
```

但是现在，我的布局变化并没有使用状态栏进行动画处理，它只是在没有任何动画的情况下进行了更改。

现在我知道在使用基于约束的布局时应该在动画块中调用 -layoutIfNeeded。但在这里我不是创建动画块的人！那么有没有办法让变化动起来呢？

这是否意味着我必须在我的代码中找到一个在我没有启动的动画块期间执行的位置？触发时，我尝试在控制器中设置 [self.view layoutIfNeeded] `UIApplicationWillChangeStatusBarFrameNotification`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:59:16.123

确保在`updateConstraints`方法中添加约束。

这是[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)所说的：

> 自己设置约束的自定义视图应该通过覆盖此方法来实现。当您的自定义视图注意到对视图进行的更改使其其中一个约束无效时，它应该立即删除该约束，然后调用 setNeedsUpdateConstraints 以注意需要更新约束。

# ruby-on-rails-3 - 关系 one_to_one：获取未链接的“belongs_to”实体列表

> ID：15522699
> 
> 赞同：0
> 
> 时间：2013-03-20T11:49:33.170
> 
> 标签：ruby-on-rails-3, activerecord, orm, one-to-many, one-to-one

我有一个优化问题。我搜索如何使用 ActiveRecord 请求获取 one_to_one 或 one_to_many 中没有任何链接的所有实体。

我有：

```
class Model1 < ActiveRecord::Base
  has_one :model2
  ... 
```

和

```
class Model2 < ActiveRecord::Base
  belongs_to :model1
  ... 
```

如果我想要所有model2s非链接的列表，我只需要这样做：

```
unlinked_model2s = Model2.where(:model1_id => nil) 
```

但是我如何为model1s做同样的事情呢？我将拥有未链接到模型 2 的所有模型 1 的列表。

我尝试了很多东西，但使它起作用的唯一方法是对所有请求一一处理，这太可怕了：

```
unlinked_model1s = Array.new
Model1.all.each do |model1|
  unless model1.model2
    unlinked_model1s << model1
  end
end 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:00:13.863

这将需要编写一些 SQL。默认情况下，AR 仅支持`inner join`，因此您不能使用`Model1.joins(:model2).where(...)`.

看来你可以试试`Model1.joins("left join model2s on (model2s.model1_id = model1s.id) ").where(:model2s => {:id => nil})`

或者

`Model1.joins("left join model2s on (model2s.model1_id = model1s.id) ").where("model2s.id is NULL")`

不确定这在语法上是否正确（无法尝试代码:)）正确，但希望这能让您了解如何完成任务。

# mercurial - 允许 .hgignore 中的子文件夹

> ID：15522702
> 
> 赞同：0
> 
> 时间：2013-03-20T11:49:36.927
> 
> 标签：mercurial, hgignore

有谁知道是否可以忽略 Mercurial 中的父文件夹并允许子文件夹提交。
我有这样的文件夹结构

```
www.Project.com
01 – Consultancy
02 – Information Architecture
03 – Content
04 – Branding
    Fonts
    Guidelines
    Logo
05 – Design
    Graphics
    Stock Photography
06 – Code
    Static site
    Wordpress
07 – Marketing
    Email
    SEO
    Social Media 
```

我喜欢忽略 Wordpress 文件夹，除了；

```
06 - Code\Worpdress\wp-content\plugins  
06 - Code\Worpdress\wp-content\themes 
```

我也在使用代码来忽略全局文件夹

```
syntax: glob  
01 - Ignore/** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:12:11.217

您也许可以对插件和主题目录使用[mercurial 子存​​储库](https://www.mercurial-scm.org/repo/hg/help/subrepos)，以便对跟踪的内容和不跟踪的内容进行细粒度控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:08:55.027

最初我打算建议你使用正则表达式（它们在 hg 忽略文件中受支持）。但不幸的是，官方文档建议反对它，并且通常声称不支持此功能： [https ://www.mercurial-scm.org/wiki/.hgignore](https://www.mercurial-scm.org/wiki/.hgignore)

> 限制
> 
> 除了一组文件之外，没有直接的方法可以忽略所有文件。与其他模式结合使用时，尝试使用反向正则表达式匹配将失败。这是一个有意的限制，因为所有替代格式都被认为太可能使用户感到困惑，因此值得额外的灵活性。

我个人的意见是，最好将生成/忽略的文件夹和“真实”/跟踪的文件夹分开。然后您的部署脚本可以将插件/主题从跟踪文件夹上传/复制到部署文件夹。

或者，如果可行，只需一个一个地包含文件/文件夹。

# c - 相同的代码在 C 中给出不同的输出

> ID：15522708
> 
> 赞同：0
> 
> 时间：2013-03-20T11:50:01.657
> 
> 标签：c, arrays, memory, printf, exc-bad-access

我被这件事难住了。我正在粘贴下面的程序。

```
void printGrid(int n,char grid[n][n]){
    for(int i = 0; i<n ; i ++) {
        printf("\n%s",grid[i]);
    }
}

int main() {    
    char grid[6][6]= {"-----","-----","-----","-----","-----"};

    printGrid(5, grid);

    for(int i = 0; i<5 ; i ++) {
        printf("\n%s",grid[i]);
    }
    return 0;
} 
```

输出：

```
-----
-
--
---
-----
-----
-----
-----
----- 
```

为什么同一个`for`循环在函数内外产生不同的输出`printGrid`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:08:05.093

您正在使用 VLA，但大小与您传入的数组的尺寸不匹配。当您有一个数组时：

```
char a[m][n]; 
```

at 的字符`a[x][y]`基本上是由 找到的`a + x*m + y`。此外，您在内存中创建的数组布局如下所示：

```
-----\0-----\0-----\0-----\0-----\0-----\0 
```

但是由于您的第一个维度是 5 而不是 6，所以当您索引每一行时，您会像这样点击它：

```
-----\0-----\0-----\0-----\0-----\0-----\0
^     |    |     |     |     |     |
      ^    |     |     |     |     |
           ^     |     |     |     |
                 ^     |     |     |
                       ^     |     |
                             ^     |
                                   ^ 
```

（您的循环实际上并没有打印最后两个）。如果你改为这样称呼它：

```
printGrid(6, grid); 
```

您会看到输出更符合您的预期，因为步幅对齐。另一个循环可能也应该使用`6`。

# java - Java包导入取决于配置

> ID：15522710
> 
> 赞同：3
> 
> 时间：2013-03-20T11:50:04.750
> 
> 标签：java, web-applications, configuration-files, layer

我有一个设计为三层架构的 Java Web 应用程序。目前我有两个不同的数据库层。我所有的数据访问层代码都集中在一个包中。所需的数据层在配置文件中定义。所以应该根据配置文件导入另一个包。两个数据层都通过 DBfacade 对象与业务层通信。是否可以决定应该导入哪个包，或者我应该重命名我的 DBfacades，以便我有 2 个不同的名称并导入两个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:18:39.863

如果您在不同的包中创建 2 个具有相同名称和相同方法签名的类，并且您正在通过更改导入在此实现之间切换，那么您使用的设计非常糟糕。非常糟糕的设计。

请注意，导入部分仅在编译之前存在。然后你在字节码中有完全限定的引用。

使用接口和实现，使用 IoC 或反射在实现之间切换。或者导入两个实现并通过 if 决定调用哪一个，但 IoC 为您提供了更大的灵活性（例如，无需更改代码即可添加新实现的能力）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:36:06.073

`import`语句本身是在编译时处理的，因此您不能“根据配置文件导入不同的包”。

但是，您可以根据您的配置使用不同的库。例如，如果您有 2 个不同的 interface 实现`Foo`：`FooOne`并且`FooTwo`位于不同的`jar`文件中，您可以实现工厂`FooFactory`，该工厂加载从文件中获取配置的实现之一，例如：

```
public class FooFactory {
    public Foo createFoo() throws Exception{
        Properties props = new Properties();
        props.load("/var/config.properties");
        return Class.forName(props.getProperty("foo.class")).newInstance();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:54:01.727

数据层是否依赖于环境？如果是这样，请考虑使用 JNDI 公开数据源。这将允许环境封装低级细节。

请参阅[为什么将 JNDI 用于数据源](https://stackoverflow.com/questions/7760712/why-use-jndi-for-data-sources)。

# javascript - 显示/隐藏子元素 用 javascript

> ID：15522712
> 
> 赞同：0
> 
> 时间：2013-03-20T11:50:13.013
> 
> 标签：javascript, asp.net, razor, asp.net-mvc-4, foreach

我的 mvc 4 项目中的 .cshtml 页面上有一个 razor 循环，我需要在这个 razor 循环中显示隐藏列表的子项。该代码适用于第一个元素，但不适用于其余元素。

.cshtml 代码

```
<ol>
    @foreach (var Name in (List<string>)ViewData["Names"])
    {
        <li onclick="makevisible();" ondblclick="makeinvisible();">
            @Name
            <ul id="list" class="list">
                <li>childWichNeedsToBeHidden</li>
            </ul>
        </li>
    }
</ol> 
```

我的 javascript: `function makevisible() {$('#list').show();}` 和： `function makeinvisible() {$('#list').hide();}`

我的CSS：`.list {display:none;}`

# 编辑

我的新 .cshtml 代码

```
 @{
      int i = 0;
      foreach (var Name in (List<string>)ViewData["Names"])
      {
          i++;
          <li onclick="makevisible();" ondblclick="makeinvisible();">
            @Name
             <ul class="list" id="@i">
                <li>childWichNeedsToBeHidden</li>
             </ul>
          </li>
      }
    } 
```

所以现在每个 ul 都有一个唯一的 id。但我不知道我的 javascript 应该是什么。我可以显示隐藏一个特定的孩子 ul 就像第三个孩子一样：

```
 function makevisible() {
            $('#3').show();
        }
        function makeinvisible() {
            $('#3').hide();
        } 
```

如何使#3 成为变量，以便我可以显示隐藏我想要的任何孩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:52:59.293

你应该尝试

```
function makevisible() {
    $(this).find('.list').show();
}

function makeinvisible() {
    $(this).find('.list').hide();
} 
```

您不应该在 foreach 中为 ul 使用相同的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:53:42.133

```
<ol>
    @foreach (var Name in (List<string>)ViewData["Names"])
    {
        <li class="parentLI" onclick="makevisible();" ondblclick="makeinvisible();">
            @Name
            <ul class="list">
                <li>childWichNeedsToBeHidden</li>
            </ul>
        </li>
    }
</ol> 
```

你的脚本应该是

```
<script type="text/javascript">
 $(function(){

  $(".parentLI").click(function(){
    $(this).closest("ul.list").hide();
});

});
</script> 
```

`dblclick`以同样的方式绑定事件

# visual-c++ - GestureRecognizer 在 Windows Phone Direct3D 应用程序中引发异常（仅限本机）

> ID：15522717
> 
> 赞同：0
> 
> 时间：2013-03-20T11:50:18.410
> 
> 标签：visual-c++, directx, windows-phone-8, gesture

我想在我的 Windows Phone 游戏 (C++) 中使用 GestureRecognizer。当我尝试创建新的 GestureRecognizer 实例时，构造函数抛出异常：

“TestGesture.exe 中 0x76FF277C 处的第一次机会异常：Microsoft C++ 异常：Platform::ClassNotRegisteredException ^ 在内存位置 0x00B5E674。HRESULT:0x80040154”。

我刚刚创建了一个新的 C++ Windows Phone 8 Direct3D (Native Only) 项目并添加了

Windows::UI::Input::GestureRecognizer^gestureRecognizer = ref new Windows::UI::Input::GestureRecognizer();

在 SetWindow(CoreWindow^ 窗口) 函数中。

我按照这篇文章[http://msdn.microsoft.com/en-us/library/windows/apps/hh994931.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh994931.aspx)的说明进行操作，但这对我没有帮助。

我花了几个小时试图找出问题所在。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:54:19.913

当您使用 Windows Phone 8 标记此问题时，我认为这就是您的目标。

在这种情况下，[这篇 MSDN 文章底部附近有一条注释](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturerecognizer.aspx)说：

> **Windows Phone 8** 此 API 未实现，如果调用将引发异常。

我想这就是你所看到的。

# asp.net - Umbraco Razor 寻呼

> ID：15522722
> 
> 赞同：2
> 
> 时间：2013-03-20T11:50:27.737
> 
> 标签：asp.net, razor, umbraco, data-paging

我在使用 AJAX 找出 Umbracos Razor 视图引擎中的分页机制时遇到了一些麻烦。

事情是，分页需要是这样的：

```
1 | 2 | 3 | 4 ... 16    Next >> 
```

当用户点击任何大于`4`它需要的东西时，应该是这样的：

```
<< Previous  1 ... 6 | 7 | 8 | 9 | 10 ... 16  Next >> 
```

所以它显示前两页和下一页。

现在，当用户一直点击到最后 4 个页面时，分页需要是这样的：

```
<< Previous  1 ... 13 | 14 | 15 | 16 
```

我已经让它工作了，但是代码……至少可以说不是很漂亮。它很笨拙，我有一种感觉，它可以做得比现在简单得多——只是不确定如何准确:-)

代码（确保你有一杯温暖的咖啡;-)）

```
 @* Paging *@
        var resultCount = result.Count();

        if(resultCount > take)
        {
           <div class="paging">
             @{
                 int previous = pageNumber - 1;

               if(previous >= 0)
               {
                  <a class="previous" id="prev" href="#" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @previous, '@action', '@ingredientIds', '@ingredientId');"><img src="/img/buttons/pink-hand-left.png" />@umbraco.library.GetDictionaryItem("Previous")</a>
               }

               double numOfPagingLinks = Convert.ToDouble(resultCount) / take;
               int roundedNumOfPagingLinks = Convert.ToInt32(Math.Floor(numOfPagingLinks));
               int lastPage = roundedNumOfPagingLinks + 1;

               if(lastPage > 4)
               {
                   // Always show first page number
                 <a href="#" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', '0', '@action', '@ingredientIds', '@ingredientId');">1</a>

                  if(pageNumber + 1 == lastPage)
                 {
                    <span> ... </span>
                    for(int i = lastPage - 4; i < lastPage - 1; i++)
                    {
                       int pagingNumber = i;
                         int numberToDisplay = i + 1;

                         string className = i == pageNumber ? "active" : "inactive";                                            
                         <a href="#" class="@className" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @pagingNumber, '@action', '@ingredientIds', '@ingredientId');">@numberToDisplay</a>
                         <span> | </span>
                    }
                 }
                 else
                 {
                   if(pageNumber < 3)
                   {
                      for(int i = 1; i < 5; i++)
                      {
                         int pagingNumber = i;
                         int numberToDisplay = i + 1;

                         string className = i == pageNumber ? "active" : "inactive";

                         if(i == 1)
                         {
                            <span> | </span>
                         }                      
                         <a href="#" class="@className" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @pagingNumber, '@action', '@ingredientIds', '@ingredientId');">@numberToDisplay</a>
                         if(i < 4)
                         {
                           <span> | </span>
                         }
                         else
                         {
                           <span> ... </span>
                         }
                      }
                   }
                   else
                   {
                      if(pageNumber == 3)
                      {
                         for(int i = 1; i < 6; i++)
                         {
                            int pagingNumber = i;
                             int numberToDisplay = i + 1;

                             string className = i == pageNumber ? "active" : "inactive";

                            <a href="#" class="@className" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @pagingNumber, '@action', '@ingredientIds', '@ingredientId');">@numberToDisplay</a>
                            if(i < 5)
                             {
                               <span> | </span>
                             }
                             else
                             {
                               <span> ... </span>
                             }
                         }
                      }
                      else if(pageNumber > 3)
                      {
                         <span> ... </span>                       
                         if(pageNumber >= lastPage - 4)
                         {
                            for(int i = pageNumber - 2; i < lastPage - 1; i++)
                            {
                               int pagingNumber = i;
                               int numberToDisplay = i + 1;

                              string className = i == pageNumber ? "active" : "inactive";

                              <a href="#" class="@className" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @pagingNumber, '@action', '@ingredientIds', '@ingredientId');">@numberToDisplay</a>
                              <span> | </span>                              
                            }
                         }                         
                         else
                         {                          
                           var firstPrevious = pageNumber - 1;
                           var secondPrevious = pageNumber - 2;
                           var firstPreviousToDisplay = firstPrevious + 1;
                           var secondPreviousToDisplay = secondPrevious + 1;

                           <a href="#" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @secondPrevious, '@action', '@ingredientIds', '@ingredientId');">@secondPreviousToDisplay</a>                         
                           <span> | </span>

                           <a href="#" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @firstPrevious , '@action', '@ingredientIds', '@ingredientId');">@firstPreviousToDisplay </a>                         
                           <span> | </span>

                           for(int i = pageNumber; i < pageNumber + 3; i++)
                           {
                              int pagingNumber = i;
                               int numberToDisplay = i + 1;

                               string className = i == pageNumber ? "active" : "inactive";

                              <a href="#" class="@className" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @pagingNumber, '@action', '@ingredientIds', '@ingredientId');">@numberToDisplay</a>
                              if(i < pageNumber + 2)
                              {
                                <span> | </span>
                              }
                           }

                           <span> ... </span>
                         }
                      }                            
                   }
                 }
                  // Always show last pagenumber                    
                  <a href="#" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @roundedNumOfPagingLinks, '@action', '@ingredientIds', '@ingredientId');">@lastPage</a>
               }
               else
               {
                  for (int i = 0; i < roundedNumOfPagingLinks + 1; i++)
               {
                  int pagingNumber = i;
                  int numberToDisplay = i + 1;

                   string className = i == pageNumber ? "active" : "inactive";

                   <a href="#" class="@className" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @pagingNumber, '@action', '@ingredientIds', '@ingredientId');">@numberToDisplay</a><span> | </span>
               }
               }

               int next = pageNumber + 1;
               if (next <= roundedNumOfPagingLinks)
                {
                    <a class="next" id="next" href="#" onclick="ajaxFilterSearch('@themeIds', '@video', '@brochure', @next, '@action', '@ingredientIds', '@ingredientId');">@umbraco.library.GetDictionaryItem("Next")<img src="/img/buttons/pink-hand-right.png" /></a>           
                }

             }
           </div>
        } 
```

该`result`变量是在过滤器/搜索中找到的集合。变量是用户点击的`pageNumber`页码。

我知道上面的代码很复杂而且不漂亮，但是非常感谢任何帮助/提示！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:27:21.217

这种方法怎么样：您可以认为您的分页具有三种可能的状态和 7 个组件。状态 #1 是我所说的`left`（或者`left_extended`如果总共有超过 4 页），那是用户仍在前 4 页上的时候。状态 #2 是`middle`，即用户正在导航并且尚未到达最后 4 页的时间。状态 #3 是我所说`right`的，这意味着用户已到达最后 4 页。

七个组件的配置如下：

`<< Previous` `1` `...` `6 | 7 | 8 | 9 | 10` `...` `16` `Next >>`

中间的组件`6 | 7 | 8 | 9 | 10`就是我所说的`middle block`。鉴于三个状态和 7 个组件，以下代码可能足以满足所有状态：

```
// Middle block limits
var middleBlockStart = 0;
var middleBlockFinish = 0;
var middleBlockCount = 4;

int resultCount = result.Count();
int pageNumber = // Get information from query string
int numberOfPages = // Get the total number of pages

// There are three possible paging states: left, middle and right
// First we determine what state the paging is at and 
// set the middle block limits
var pagingState = string.Empty;

if (pageNumber >= 4) {
    if (numberOfPages > middleBlockCount)
        pagingState = "left_extended";
    else
        pagingState = "left";

    middleBlockStart = 1;
}
else if (pageNumber >= resultCount - middleBlockCount + 1) {
    pagingState = "right";
    middleBlockStart = resultCount - middleBlockCount + 1;
}
else {
    pagingState = "middle";
    middleBlockStart = pageNumber - 2;
    middleBlockCount = 5;
}

middleBlockFinish = middleBlockStart + middleBlockCount;

// Now we print each one of the seven components 
// based on the state of the paging

@if (pagingState == "middle" || pagingState == "right") {
    <a class="previous" id="prev" href="#" onclick="ajaxFilterSearch(...);">
        <img src="/img/buttons/pink-hand-left.png" />@umbraco.library.GetDictionaryItem("Previous")
    </a>
    <a href="#" onclick="ajaxFilterSearch(...);">1</a>
    <span> ... </span>
}

@for (int i = middleBlockStart; i < middleBlockFinish; i++) {
    <a href="#" class="@className" onclick="ajaxFilterSearch(...);">@i</a>

    if (i != middleBlockFinish - 1)
        <span> | </span>
}

@if (pagingState == "left_extended" || pagingState == "middle") {
    <span> ... </span>
    <a href="#" onclick="ajaxFilterSearch(...);">@lastPage</a>
}

@if (pagingState.StartsWith("left") || pagingState == "middle") {
    <a class="next" id="next" href="#" onclick="ajaxFilterSearch(...);">
        @umbraco.library.GetDictionaryItem("Next")<img src="/img/buttons/pink-hand-right.png" />
    </a>
} 
```

我缩短了`ajaxFilterSearch()`要求以提高可读性。我希望这有帮助 ：）

# javascript - 使用 jQuery 延迟 - when() 和 getJSON() 回调

> ID：15522726
> 
> 赞同：7
> 
> 时间：2013-03-20T11:50:39.273
> 
> 标签：javascript, jquery, jquery-deferred, deferred

我试图理解`when`jQuery 中的函数和延迟对象。

```
$.when($.getJSON('/echo/json', function () {
    console.log('sucess');
}, function () {
    console.log('error');
})).then(console.log('get JSON ready!')); 
```

此示例返回：

```
get JSON ready!
sucess 
```

...但我想实现成功回调首先触发：

```
sucess
get JSON ready! 
```

我怎样才能做到这一点？

[http://jsfiddle.net/lukaszr/rBFmL/](http://jsfiddle.net/lukaszr/rBFmL/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T11:52:35.363

您忘记了函数包装器 - 您的代码`console.log`立即调用而不是传递回调函数：

```
.then(console.log('get JSON ready!')); 
```

应该：

```
.then(function() {
    console.log('get JSON ready!');
}); 
```

[**小提琴**](http://jsfiddle.net/rBFmL/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:56:37.147

尝试使用 .done(...) 而不是 .then(...)。jQuery 文档中有一些示例。

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

# asp.net - 想要在不使用 IIS 的情况下在我的本地计算机上发布和部署 Web 服务

> ID：15522729
> 
> 赞同：0
> 
> 时间：2013-03-20T11:50:47.893
> 
> 标签：asp.net, web-services, iis, web

我的网络服务链接：

```
http://localhost:55004/WCFService2/WebService.asmx 
```

请如何在没有 IIS 的情况下执行此操作。我正在使用 Visual Studio 2012 Express Edition，并且在构建中没有“发布网站”选项。

我是 .net 和 webservices 的新手...请告诉我有没有可能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:24:28.387

如果不使用 IIS 等托管应用程序，就无法部署 Web 服务。

但是，如果您使用的是 WCF，则可以通过以下方式托管它。

1.  自托管
2.  IIS 托管
3.  视窗服务
4.  曾是

您可以根据自己的要求选择任何合适的托管方式。

网上有许多可用的教程，它们为您提供了与此相关的图形示例的分步过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:00:11.523

在这里试试这个它可能会有所帮助

“ [http://ransandeep.blogspot.in/2011/03/publish-webservice-locally-without-iis.html](http://ransandeep.blogspot.in/2011/03/publish-webservice-locally-without-iis.html) ”

# c# - 查找枚举成员

> ID：15522740
> 
> 赞同：3
> 
> 时间：2013-03-20T11:51:39.110
> 
> 标签：c#, .net, reflection

我想做一些事情

```
var membersOfTypeEnum =  typeof(myType).GetMembers().Where(i => i.IsEnum); 
```

但是，在上面的模型`i`中是 type`MemberInfo`并且没有实现`IsEnum`.

`GetType(i).Name`说`RuntimeType`哪个是包含真实类型的反射类型（我认为），但我似乎无法找到一种方法来获取成员本身的类型。

那么，我如何找到给定类型的成员（即枚举）？

编辑，假设我想反映这种类型：

```
public static class MyType
{
    public enum EnumMember
    {
        One = 1,
        Two = 2,
    }

   public static string NotEnumMember = "this is a string";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T12:07:00.797

用于`GetNestedTypes`获取所有嵌套类型并检查它是否为枚举

```
typeof(MyType)
    .GetNestedTypes()
    .Where(type => type.IsEnum) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T12:07:21.737

这应该可以满足您的要求 - 使用[`GetNestedTypes`](http://msdn.microsoft.com/en-us/library/system.type.getnestedtypes.aspx)：

```
var membersOfTypeEnum =  typeof(MyType).GetNestedTypes()
                           .Where(i => i.IsEnum); 
```

现场示例：[http ://rextester.com/CGK11010](http://rextester.com/CGK11010)

# css - 使用 CSS3 缩放背景图像

> ID：15522741
> 
> 赞同：0
> 
> 时间：2013-03-20T11:51:47.457
> 
> 标签：css, background, background-image

我试图在这个网站[http://iworks.ozythemes.com](http://iworks.ozythemes.com)上制作柔和的缩放背景，但使用 css3。我试过用身体上的比例进行变换，但后来一切都变了，这是我不想要的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:53:41.077

`background-size`CSS3 属性怎么样？

您可以使用 javascript 更改它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:58:55.620

不幸的是，目前没有使用 css 缩放背景图像的方法，也许你可以尝试 background-size:cover; 以适合背景图像。

# mysql - 错误 1064 - 可选地由 '"' 括起来

> ID：15522745
> 
> 赞同：0
> 
> 时间：2013-03-20T11:51:55.570
> 
> 标签：mysql

[在将我的问题发布到错误 1406 上后，我在从文件（ mysql 错误 1406](https://stackoverflow.com/questions/15505699/mysql-error-1406) ）将数据加载到我的 MySQL 数据库时遇到了错误，我看到我将原始数据电子表格保存为逗号分隔文件而不是制表符分隔文件。我现在已经纠正了这一点。

汤姆在对上一个问题的答复中指出，由于数据中的某些条目中有回车符，因此我需要用引号将它们括起来，“”。在电子表格中，我创建了一个新列并使用公式 =CHAR(34)&A1&CHAR(34) 用“”包围单元格文本，对其进行格式化以保留其文本并删除原始列。用文本编辑器检查过，一切看起来都很好。

当我使用命令时：

```
mysql> load data infile 'docs.txt'into table list fields terminated by '\t' lines
terminated by '\n' optionally enclosed by '"' (vendor, title, id, part, project, 
description, machine, shelf, compartment, name, checkout); 
```

我收到以下错误消息：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near
'optionally       enclosed by '"' (vendor, title, id, part, project, description,
machi' at line 1 
```

任何人都可以帮忙吗？**只是为了感谢迄今为止在其他问题上获得的帮助。我对这个论坛上回复的速度和乐于助人印象深刻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:00:21.573

你的语法错误

检查这个例如我从以下链接复制的：

```
LOAD DATA INFILE 'data.txt' INTO TABLE tbl_name (column1,column2)
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

[语法见这里](http://www.softwareprojects.com/resources/programming/t-how-to-use-mysql-fast-load-data-for-updates-1753.html)

# sql - SQL order by 子句是否保证稳定（按标准）

> ID：15522746
> 
> 赞同：10
> 
> 时间：2013-03-20T11:51:56.193
> 
> 标签：sql, database, sql-order-by

我正在使用以下查询来查询在两列上有 order by 的 DB。

> SELECT a,b,c from Table1 Order By a asc, b asc;

我的问题是，排序是否保证稳定（按标准）。虽然它没有任何意义，不稳定，但我问这个是因为我在网上读到

> 该标准不阻止使用稳定排序，但它也不需要它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T13:12:11.523

不能保证排序是稳定的。我认为 SQL Server[文档](http://msdn.microsoft.com/en-us/library/ms188385.aspx)对如何实现稳定排序有很好的解释：

> 要在使用 OFFSET 和 FETCH 的查询请求之间获得稳定的结果，必须满足以下条件： 查询使用的基础数据不得更改。也就是说，查询所涉及的行没有更新，或者查询中的所有页面请求都使用快照或可序列化事务隔离在单个事务中执行。有关这些事务隔离级别的详细信息，请参阅 SET TRANSACTION ISOLATION LEVEL (Transact-SQL)。ORDER BY 子句包含保证唯一的列或列组合。

理解排序不稳定的最简单方法是*回到*表的定义。SQL 中的表本质上是无序的。因此，没有命令可以依靠“稳定性”。

作为第二个考虑，排序可以并行实现。在大多数并行排序中，公共键被放在一起，没有关于它们的原始顺序的信息（除非在排序键中显式或隐式地实现）。

# php - ap_pass_brigade 在 handle_request_ipc 函数中失败

> ID：15522753
> 
> 赞同：9
> 
> 时间：2013-03-20T11:52:15.043
> 
> 标签：php, mysql, apache, ubuntu, mod-fcgid

页面导致 500 错误，日志显示：

```
[Wed Mar 20 11:19:23 2013] [warn] [client 127.0.0.1] (104)Connection reset by peer: mod_fcgid: ap_pass_brigade failed in handle_request_ipc function 
```

当您尝试在类别页面上查看 90 种产品时，它会发生在柠檬摊网站上。从每页 60 到 90 的步骤似乎太多，并导致 500 错误。

该页面在错误前加载不超过 4 秒左右，并且服务器上运行的许多其他网站都没有遇到此问题。

到目前为止，我一直认为这是由于环境设置造成的，而不是由 Lemonstand 引起的。我已经用谷歌搜索了这个并尝试了各种配置设置以使其正常运行，到目前为止还没有修复它。下面是当前的 fcgid 配置，我已经注释掉了我尝试更改的一些变量。

Fcgid.conf：

```
<IfModule mod_fcgid.c>
AddHandler php-fcgi .php
Action php-fcgi /fcgi-bin/php-fcgi-wrapper
AddType application/x-httpd-php .php
Alias /fcgi-bin/ /var/apache/fcgi-bin/

FcgidConnectTimeout 180
FcgidIOTimeout 600
FcgidBusyTimeout 3600
FcgidMaxRequestLen 226777216
FcgidFixPathinfo 1
#FcgidOutputBufferSize 65536
#FcgidProcessLifeTime 30
#FcgidMaxRequestsPerProcess 500
FcgidIdleTimeout 60
#FcgidIdleScanInterval 1
#FcgidBusyTimeout 60
#FcgidBusyScanInterval 1
#FcgidInitialEnv PHP_FCGI_MAX_REQUESTS 100000

<Location /fcgi-bin/>
SetHandler fcgid-script
Options +ExecCGI
Order allow,deny
Allow from all
</Location>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-31T09:49:52.033

这是`PHP-FCGI`您收到的限制错误。您需要调整`PHP_FCGI_MAX_REQUESTS`域的“fcgi-bin/php5.fcgi”文件中的“ `FcgidMaxRequestsPerProcess`”变量或 Apache 配置文件中的“”变量。

[http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#examples](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#examples)

# php - 带有消息“cache_dir 必须是目录”的未捕获异常“Zend_Cache_Exception”

> ID：15522759
> 
> 赞同：0
> 
> 时间：2013-03-20T11:52:22.603
> 
> 标签：php, zend-framework, memcached, wamp

我是 Zend 的新手，我必须在以前完成的项目上工作以添加一些功能。以下是 application.ini 文件中的缓存规范。

```
cache.frontend.type = Core
cache.frontend.options.lifetime = 7200
cache.frontend.options.automatic_serialization = true
cache.frontend.options.cache_id_prefix = proj_name
cache.frontend.options.cache = true

cache.backend.type = Memcached
cache.backend.options.servers.1.host = 127.0.0.1
cache.backend.options.servers.1.port = 11211
cache.backend.options.servers.1.persistent = true
cache.backend.options.servers.1.weight = 1
cache.backend.options.servers.1.timeout = 5
cache.backend.options.servers.1.retry_interval = 15
logsdb.params.dbname = dataLink 
```

我已经安装了 memcache，它工作正常。但是当我想启动项目时会出现以下错误。

带有消息“cache_dir 必须是目录”的未捕获异常“Zend_Cache_Exception”

我试图在谷歌中找到一些答案，但没有一个解决方案有效。请帮我解决一下这个。我在 WAMP 2.1 上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:54:34.047

不确定，但如果您使用 Zend Framework（1.8+？）的“新”版本，则必须在 application.ini 中使用 CacheManager 来设置缓存。

对于 memcache，它应该如下所示：

```
resources.cachemanager.myache.frontend.name = Core
resources.cachemanager.mycache.frontend.options.automatic_serialization = On
resources.cachemanager.mycache.backend.name = Memcached

resources.cachemanager.mycache.backend.options.servers.1.host = 
resources.cachemanager.mycache.backend.options.servers.1.port = 1
resources.cachemanager.mycache.backend.options.servers.2.host = 
resources.cachemanager.mycache.backend.options.servers.2.port = 
```

在**控制器**中的某个地方获取缓存：

```
 $cacheManager = $this->getInvokeArg('bootstrap')->getResource('cachemanager');
      $myCache = $cacheManager->getCache('mycache'); 
```

或**代码**中的任何地方（我不喜欢这种方式）

```
$cacheManager = Zend_Controller_Front::getInstance()
                       ->getParam('bootstrap')
                       ->getResource('cachemanager');

$myCache = $cacheManager->getCache('mycache'); 
```

# php - select语句总是返回php mysql中最后插入的行

> ID：15522761
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:52:31.650
> 
> 标签：php, mysql, select

当我编写 select 语句时，它总是返回数据库中最后插入的行。有什么问题，我该如何解决？

*重要提示：我的一个朋友使用了相同的代码，并且对她很有效！*

```
 if (isset($_GET["name"])) {
    $pid = $_GET['name'];

    // get a product from products table
    //)or die(mysql_error()
    $result = mysql_query("SELECT * FROM food WHERE name = $pid");
    //mysql_query($result,$con);
    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $product = array();
            $product["name"] = $result["name"];
            $product["unit"] = $result["unit"];
            $product["calory"] = $result["calory"];
            $product["carbohydrate"] = $result["carbohydrate"];
            $product["category"] = $result["category"];

            // success
            $response["success"] = 1;

            // user node
            $response["product"] = array();

            array_push($response["product"], $product);

            // echoing JSON response
            echo json_encode($response);
        } else {
            // no product found
            $response["success"] = 0;
            $response["message"] = "No item found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No product found";

        // echo no users JSON
        echo json_encode($response);
    } */
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:55:03.723

这是因为`mysql_fetch_array`不在循环中，将其放入while循环并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:57:33.980

```
 if (mysql_num_rows($result) > 0) {
        $result = mysql_fetch_array($result);

        $product = array();
        $product["name"] = $result["name"];
        $product["unit"] = $result["unit"];
        $product["calory"] = $result["calory"];
        $product["carbohydrate"] = $result["carbohydrate"];
        $product["category"] = $result["category"];

        // success
        $response["success"] = 1;

        // user node
        $response["product"] = array();

        array_push($response["product"], $product);

        // echoing JSON response
        echo json_encode($response);
    } 
```

将其替换为

```
while(mysql_num_rows($result) > 0 && ($result = mysql_fetch_array($result))) {

        $product = array();
        $product["name"] = $result["name"];
        $product["unit"] = $result["unit"];
        $product["calory"] = $result["calory"];
        $product["carbohydrate"] = $result["carbohydrate"];
        $product["category"] = $result["category"];

        // success
        $response["success"] = 1;

        // user node
        $response["product"] = array();

        array_push($response["product"], $product);

        // echoing JSON response
        echo json_encode($response);
    } 
```

结果是数组，你没有循环遍历它，所以它只给出数组中的一个元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:05:21.927

简单地把所有东西都放在一个循环中并不能解决这个问题。您提供的代码将给出相同的结果..最后一个。

$product 需要在循环之前声明，否则它将始终被重置。此外，为了在不覆盖的情况下填充 $product 数组，您需要将其设为多维

`$product[]['name'] = $result["name"];`

The ideal way of storing the products would be like this.. in my opinion.

```
$product = array();
while($result = mysql_fetch_array($result)) {    
        $product[$result['id']] = $result; 
```

# javascript - 提交到也提交的其他提交页面并加载

> ID：15522763
> 
> 赞同：1
> 
> 时间：2013-03-20T11:52:34.340
> 
> 标签：javascript, html, forms, iframe, form-submit

是否可以使用javascript从页面#1提交到另一个页面#2，该页面提交到其中的iframe，然后加载页面#2并提交结果？

第 1 页搜索表单：

```
<form id="SearchForm" action="http://mysite.com/search-results-jobs/" target="" method="post">
    <input type="hidden" name="action" value="search" />
    <input type="hidden" name="listing_type[equal]" value="Job" />
    <label>
        <strong>What?</strong> 
        <em><input type="text" value="job title, keywords or company name" onblur="if(this.value=='') this.value='job title, keywords or company name'" onFocus="if(this.value =='job title, keywords or company name' ) this.value=''" name="keywords [all_words]" /></em>
    </label>
    <label>
        <strong class="color">Where?</strong>
        <b><input type="text" value="city, state or zip code"  onblur="if(this.value=='') this.value='city, state or zip code'" onFocus="if(this.value =='city, state or zip code' ) this.value=''" name="City[all_words]" /></b>
    </label>
    <a href="#" class="SearchForm-link" onclick="document.getElementById('SearchForm').submit()"/>Search</a>
</form> 
```

第2页

```
<form id="SearchForm" action="http://mysite.com/search-results-jobs/" target="my-iframe" method="post">
    <input type="hidden" name="action" value="search" />
    <input type="hidden" name="listing_type[equal]" value="Job" />
    <label>
        <strong>What?</strong>
        <em><input type="text" value="job title, keywords or company name" onblur="if(this.value=='') this.value='job title, keywords or company name'" onFocus="if(this.value =='job title, keywords or company name' ) this.value=''" name="keywords[all_words]" /></em></label>
    <label>
        <strong class="color">Where?</strong>
        <b><input type="text" value="city, state or zip code" onblur="if(this.value=='') this.value='city, state or zip code'" onFocus="if(this.value =='city, state or zip code' ) this.value=''" name="City[all_words]" /></b>
    </label>
    <a href="#" class="SearchForm-link" onclick="one(); two(); three(); four();">Search</a>
    <input type="submit" id="btn-search" class="button" value="Cauta"/>
</form>
<iframe id="my-iframe" name="my-iframe" align="right" src="http://mysite.com" frameborder="0" height="100%" scrolling="no" width="100%"></iframe> 
```

# java - 在集合上执行模式搜索和范围搜索时使用 GWT 的 google guava

> ID：15522765
> 
> 赞同：1
> 
> 时间：2013-03-20T11:52:34.700
> 
> 标签：java, gwt, collections, guava

我想在 GWT 应用程序中对 Google Gauva 集合执行搜索操作。这些在独立应用程序中正常工作。但在 GWT 中，它们会产生运行时问题。我正在展示我的 EntryPoint 类的 onModuleLoad() 示例代码。设置 guava-gwt-14.0.1.jar 和 guava-10.0.jar 的构建路径

```
public void onModuleLoad() {

    List<String> sList=new ArrayList<String>();
    sList.add("arun kumar");
    sList.add("ashok kumar");
    sList.add("ravi kumar");
    sList.add("kiran kumar");
    sList.add("rama");
    sList.add("ram");
    sList.add("rama krishna");
    sList.add("phani");
    sList.add("vikram");
    sList.add("veeru");
    sList.add("arjun");
    sList.add("naresh");

    //pattern matching
    Collection<String> filterdNamesKumar=Collections2.filter(sList, Predicates.containsPattern("kumar"));
    //starts with
    Collection<String> filterdNamesRam=Collections2.filter(sList, Predicates.containsPattern("^ram"));
    Collection<String> filterdNamesAr=Collections2.filter(sList, Predicates.containsPattern("^ar"));

    System.out.println(filterdNamesAr.toString());
    System.out.println(filterdNamesKumar.toString());
    System.out.println(filterdNamesRam.toString());

    Map<String,String> emps=new HashMap<String,String>();
    emps.put("emp1","01/02/2013");
    emps.put("emp2", "10/12/2013");
    emps.put("emp3","20/11/2013");
    emps.put("emp4", "25/09/2013");
    emps.put("emp5", "15/12/2013");
    emps.put("emp6", "20/08/2013");
    emps.put("emp7", "02/02/2012");

    for(String s:emps.keySet()){
        String strDate=emps.get(s);
        DateTimeFormat dateFormat=DateTimeFormat.getFormat("dd/MM/yyyy");
        Date empDate=dateFormat.parse(strDate);

            Date startDate=dateFormat.parse("01/11/2013");
            Date endDate=dateFormat.parse("31/12/2013");
            Range<Date> range=Ranges.closed(startDate, endDate);
            boolean b=range.apply(empDate);
            if(b){
                Window.alert("date found between boundaries");
            }

    }   

} 
```

错误：

```
[DEBUG] [googlegauva] - Validating newly compiled units
[TRACE] [googlegauva] - Finding entry point classes
    [ERROR] [googlegauva] - Errors in 'file:/D:/arun/eclipse_Myna/GoogleGauva/src/com/arun/gauva/client/GoogleGauva.java'
        [ERROR] [googlegauva] - Line 57: The method containsPattern(String) is undefined for the type Predicates
        [ERROR] [googlegauva] - Line 59: The method containsPattern(String) is undefined for the type Predicates
        [ERROR] [googlegauva] - Line 60: The method containsPattern(String) is undefined for the type Predicates
    [ERROR] [googlegauva] - Unable to find type 'com.arun.gauva.client.GoogleGauva'
        [ERROR] [googlegauva] - Hint: Previous compiler errors may have made this type unavailable
        [ERROR] [googlegauva] - Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly
[ERROR] [googlegauva] - Failed to load module 'googlegauva' from user agent 'Mozilla/5.0 (Windows NT 6.1; rv:5.0.1) Gecko/20100101 Firefox/5.0.1' at 127.0.0.1:52248
[DEBUG] [googlegauva] - Validating newly compiled units
[TRACE] [googlegauva] - Finding entry point classes
    [ERROR] [googlegauva] - Errors in 'file:/D:/arun/eclipse_Myna/GoogleGauva/src/com/arun/gauva/client/GoogleGauva.java'
        [ERROR] [googlegauva] - Line 57: The method containsPattern(String) is undefined for the type Predicates
        [ERROR] [googlegauva] - Line 59: The method containsPattern(String) is undefined for the type Predicates
        [ERROR] [googlegauva] - Line 60: The method containsPattern(String) is undefined for the type Predicates
    [ERROR] [googlegauva] - Unable to find type 'com.arun.gauva.client.GoogleGauva'
        [ERROR] [googlegauva] - Hint: Previous compiler errors may have made this type unavailable
        [ERROR] [googlegauva] - Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly
[ERROR] [googlegauva] - Failed to load module 'googlegauva' from user agent 'Mozilla/5.0 (Windows NT 6.1; rv:5.0.1) Gecko/20100101 Firefox/5.0.1' at 127.0.0.1:52251 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:39:59.213

[`Patterns.containsPattern`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Predicates.html#containsPattern%28java.lang.String%29)带有注释，`@GwtIncompatible`这意味着它不在 guava-gwt 中。

顺便说一句，你应该为 guava-gwt 和 guava 使用相同的版本。

# visual-studio-2012 - Visual Studio 2012 测试结果字体

> ID：15522767
> 
> 赞同：4
> 
> 时间：2013-03-20T11:52:36.307
> 
> 标签：visual-studio-2012

如何更改 VS2012 的测试结果窗口中的字体？我猜它在`Environment`->下的某个地方，`Fonts and Colors`但那里的选择太多了。这是一张图片以供澄清：![在此处输入图像描述](../Images/3c8b061269fbd9af437e3b3b34fe9c2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T23:11:49.197

是的，这是一个可怕的错误，它使已经无法使用的测试资源管理器更加无法使用。有一个解决方法，那就是`Environment -> Fonts and Colors -> Environment Font`在测试资源管理器窗口中设置更改字体。但这也改变了一切。

# c# - 为什么我的 C# 类告诉我没有零参数的构造函数？

> ID：15522775
> 
> 赞同：0
> 
> 时间：2013-03-20T11:53:01.720
> 
> 标签：c#

我有以下内容：

```
public class TestService : BaseService, IDisposable
{
    public TestService(IRepositoryProvider repositoryProvider)
    {
    }
    public IRepository<Exam> Exams { get { return GetStandardRepo<Exam>(); } }

} 
```

和

```
public class BaseService : IDisposable
{
    public BaseService(IRepositoryProvider repositoryProvider)
    {
        CreateDbContext();

        repositoryProvider.DbContext = DbContext;
        RepositoryProvider = repositoryProvider;
    }
} 
```

有人能告诉我为什么第一堂课有错误说“基础服务不采用零参数的构造函数”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T11:54:37.547

您需要调用基本构造函数：

```
public TestService(IRepositoryProvider repositoryProvider) : base(repositoryProvider)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:55:14.703

您需要通过链接将其传递`IRepositoryProvider`给`BaseService`构造函数：

```
public class TestService : BaseService, IDisposable
{
    public TestService(IRepositoryProvider repositoryProvider) : 
           base(repositoryProvider)
    {
    }
    public IRepository<Exam> Exams { get { return GetStandardRepo<Exam>(); } }
} 
```

由于您尚未这样做，因此将其解释为尝试`BaseService`使用不存在的无参数构造函数进行初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:55:47.680

您需要调用 BaseService 的基本构造函数。像这样更改您的实现：

```
public class TestService : BaseService, IDisposable
{
    public TestService(IRepositoryProvider repositoryProvider)
    : base(repositoryProvider)
    {
    }
    public IRepository<Exam> Exams { get { return GetStandardRepo<Exam>(); } }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:57:46.560

原因是基类不包含无参数构造函数，即采用 0 个参数的构造函数。

当调用此派生类的构造函数时，它将调用基类的无参数构造函数，因为没有显式调用基类的构造函数，并且由于基类中没有无参数构造函数，因此会发生上述错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:56:58.383

因为构造函数`TestService`会尝试`BaseService`不带参数调用。

使固定：

```
public TestService(IRepositoryProvider repositoryProvider): base(repositoryProvider){ } 
```

# java - 来自 Spring @ Tomcat 的 JMX 使用基于 Java 的配置

> ID：15522778
> 
> 赞同：0
> 
> 时间：2013-03-20T11:53:10.217
> 
> 标签：java, mbeans, spring-jmx

我喜欢查看休眠统计信息，但找不到它们。

我必须在哪里搜索？

```
@Bean
@Lazy
public MBeanExporter getExporter() {
    MBeanExporter exporter = new MBeanExporter();
    exporter.setServer(mBeanFactory());
    exporter.setRegistrationBehavior(MBeanExporter.REGISTRATION_REPLACE_EXISTING);
    HashMap beans = new HashMap();
    beans.put("hibernate:name=statistics", hibernateStatistics());
    exporter.setBeans(beans);
    return exporter;
} 
```

![在此处输入图像描述](../Images/92451c4ba833b0484322c87d23fbe2de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:05:11.733

好的，jmxbean 应该在 root 上。

我确实将 hibernateStatistics()-Bean 标记为 @DependsOn("hibernate")。

![在此处输入图像描述](../Images/57804ea0c3b4fda934f873b44a9f862b.png)

# javascript - 获取url中最后两个字符实例之间的子字符串

> ID：15522789
> 
> 赞同：2
> 
> 时间：2013-03-20T11:53:53.717
> 
> 标签：javascript

我有看起来像这样的网址：`http://i1.ytimg.com/vi/BR0Y3MZ21bo/0.jpg`。有人可以帮我提取`BR0Y3MZ21bo`网址中最后两个斜杠之间的“ID”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:55:22.853

您可以使用[split()](http://www.w3schools.com/jsref/jsref_split.asp)， split 将为您提供被分隔的字符串数组，`/`并且您所需的字符串位于数组的倒数第二个索引处。

**[现场演示](http://jsfiddle.net/SVjDn/)**

```
arr = url.split('/');
arr[arr.length-2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:05:44.773

试试这个：

```
 var url = 'http://i1.ytimg.com/vi/BR0Y3MZ21bo/0.jpg'; // window.location.href;
 var page = url.substr(0, url.lastIndexOf('/')); // output -> http://i1.ytimg.com/vi/BR0Y3MZ21bo
 var str = page.substr(page.lastIndexOf('/')+1); // output -> BR0Y3MZ21bo
 alert(str); // BR0Y3MZ21bo 
```

### [小提琴](http://jsfiddle.net/tMeaW/1/)

# c# - 如何从 mvc 4 razor 中的共享视图访问控制器操作？

> ID：15522798
> 
> 赞同：2
> 
> 时间：2013-03-20T11:54:25.080
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我创建了一个视图索引并在该视图上我在该视图上放置了一个共享视图，但现在我必须从该共享视图调用控制器操作（_TraningList）

这是索引视图

为此，我做了以下事情

```
 @Html.Partial("~/Views/Shared/_TrainingList.cshtml", Model.First().Categories)
 @Html.Partial("_ConsultingList")
 @Html.Partial("_UpcomingWebinarList") 
```

这是共享视图

```
@model IEnumerable<QPS_MVC.BusinessLogic.CourseCategories>
<!--Training Box-->
<div class="bodyContentWrp">
@*@Html.Action("Index", "Trainings")*@
<h1>
    Training Programs</h1>
@*  <ul class="arw1">
            <li>Aerospace</li>
            <li>Agile</li>
            <li>APICS/SME Certifications</li>
            <li>ASQ Certifications</li>
            <li>FDA Related</li>
            <li>HR Related</li>
            <li>ISO Related</li>
            <li>IT Certifications</li>
            <li>Lean Six Sigma</li>
            <li>PMI Certifications</li>
        </ul>
*@
@foreach (QPS_MVC.BusinessLogic.CourseCategories item in Model)
{
    <ul>
        <li>@Html.ActionLink(item.Name, "", "Trainings", new { SelectedId = item.CategoryID },   null)</li>
        <li></li>
    </ul>
}
<div class="clear">
</div>
<div class="readMore">
    <a href="#">Read More</a></div>
<div class="clear">
</div> 
```

这是控制器

```
 public ActionResult Index()
    {
        List<Courses> obj = new List<Courses>();

        if (Request.QueryString.Count > 0 && Request.QueryString["SelectedId"] != null && !string.IsNullOrEmpty(Request.QueryString["SelectedId"].ToString()))
        {

            obj = new CoursesApp().getAllCoursesById(int.Parse(Request.QueryString["SelectedId"].ToString()));

        }
        else
        {
            obj = new CoursesApp().getAllCourses();
            obj = new CoursesApp().getAllCoursesById(obj.First().Categories.First().CategoryID);
        }
        //if (ViewData["CategoryId"] == null || string.IsNullOrEmpty(ViewData["CategoryId"].ToString()))
        //{
        //    obj = new CoursesApp().getAllCourses();
        //    obj = new CoursesApp().getAllCoursesById(obj.First().Categories.First().CategoryID);
        //}
        //else
        //{
        //    obj = new CoursesApp().getAllCoursesById(int.Parse(ViewData["CategoryId"].ToString()));
        //}
        return View(obj);
    } 
```

所以基本上我想从 Shared View _trainingList 调用这个索引操作，我已经完成了上述操作，但我无法成功，所以请任何人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:59:10.753

您可以使用[`RenderAction`](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions.renderaction(v=vs.118).aspx)

> 调用子操作方法并将结果内联呈现在父视图中。

```
@{ Html.RenderAction("Action", "Controller"); } 
```

# jquery - 在数据表中插入新行时如何保持滚动位置

> ID：15522800
> 
> 赞同：1
> 
> 时间：2013-03-20T11:54:35.257
> 
> 标签：jquery, jquery-datatables

我正在使用 DataTables 插件来处理我的表格。我想将 JSON 对象设置为我的表的数据源，并在每次更改此对象时更新内容。

要初始化我的表，我使用以下代码：

```
 var obj = [];

     // if I make start initialization of the object - the row in a table appears.
     //var obj = [{"Name": "name1", "Id": "id1", "Value":"value1"}];

     var table;

        $(document).ready(function () {

            table = $('#example').dataTable({
                "sPaginationType": "full_numbers",
            "sScrollY": "250px",
            "aaSorting": [],
            "aaData": obj,
            "aoColumns": [
            { "mDataProp": "Name" },
            { "mDataProp": "Id" },
            { "mDataProp": "Value" }
        ]
        });
    }
    ); 
```

要更新我的 JSON 对象：

```
function updateObject() {
    var response = $.ajax({
        type: "GET",
        datatype: "json",
        url: myURL,
        success: function (result) {
            obj = jQuery.parseJSON(result);
            //table.fnDraw(); - tried this but it doesn't work
        }
    });
} 
```

我从服务器获得的 JSON 数据：

```
 [{"Name": "name1", "Id": "id1", "Value":"value1"}, 
     {"Name": "name2", "Id": "id2", "Value":"value2"},...] 
```

从服务器获取新数据后是否可以刷新表格内容？

**更新：**

```
table.fnClearTable();
table.fnAddData(obj, false);
table.fnStandingRedraw(); 
```

插入新行后，当前页面会丢失，当前滚动位置也会丢失。**fnStandingRedraw**方法有助于保持页面位置。但滚动跳转到第一行。有没有办法计算当前滚动位置以在更新（[http://datatables.net/docs/Scroller/1.0.1/](http://datatables.net/docs/Scroller/1.0.1/)）或其他解决方案后跳转回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:04:39.477

我认为这可以帮助你。您应该首先删除所有数据并再次添加新数据，文档在[这里](http://datatables.net/api)

```
table.fnClearTable().fnAddData(obj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:11:29.320

我有类似的情况。所以最终我以这种方式解决了：

```
function UpdateDatatable(data, $table) {
    $.ajax({
        type: "GET",
        dataType: "JSON",
        url: "../biz/datahandler.ashx",
        data: ({data: data}),
        async: true,
        error: function (xhr, ajaxOptions, thrownError) {
            /* manage the error */
        },
        success: function (dataget) {
            /* maange the success */
            $table.dataTable({
                ...
            })
    });
} 
```

# installscript - 需要 Installscript Project Setup.exe 的 /installfromweb 命令行开关示例

> ID：15522802
> 
> 赞同：0
> 
> 时间：2013-03-20T11:54:37.733
> 
> 标签：installscript, installshield-2011

谁能给我一个传递给 setup.exe 的 Installshield 中 /installfromweb 开关的示例？

我正在尝试将此开关与“Installscript 项目”而不是“Installscript MSI”一起用于基于 Web 的安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T10:54:01.903

我使用命中和试验方法找到了答案。基本上命令应该是：setup.exe /installfromweb：

# android - 自定义序列化器 - 使用 GSON 获取 BasicNameValuePairs 列表的反序列化器

> ID：15522803
> 
> 赞同：8
> 
> 时间：2013-03-20T11:54:38.910
> 
> 标签：android, json, serialization, gson, key-value

我正在尝试为一些 BasicNameValuePair 对象列表实现自定义 gson 序列化器/反序列化器。

我在这里看到了部分解决方案代码（用于序列化）： [How do I get Gson to serialize a list of basic name value pairs?](https://stackoverflow.com/questions/12521816/how-do-i-get-gson-to-serialize-a-list-of-basic-name-value-pairs)

但是我也想实现**反序列**化，我尝试了我的机会，代码在这里：

```
package dto;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.message.BasicNameValuePair;

import com.google.gson.TypeAdapter;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;

    public class KeyValuePairSerializer extends TypeAdapter<List<BasicNameValuePair>> {
        @Override
        public void write(JsonWriter out, List<BasicNameValuePair> data) throws IOException {
            out.beginObject();
            for(int i=0; i<data.size();i++){
                out.name(data.get(i).getName());
                out.value(data.get(i).getValue());
            }
            out.endObject();
        }

        @Override
        public List<BasicNameValuePair> read(JsonReader in) throws IOException {
            ArrayList<BasicNameValuePair> list=new ArrayList<BasicNameValuePair>();
             in.beginObject();
             while (in.hasNext()) {
               String key = in.nextName();
               String value = in.nextString();
               list.add(new BasicNameValuePair(key,value));
             }  
             in.endObject();   
             return list;
        }

} 
```

初始化和填充列表的代码

```
ArrayList<BasicNameValuePair> postParameters=new ArrayList<BasicNameValuePair>();
postParameters.add(new BasicNameValuePair("some_key","some_value")); 
```

这是使用新 KeyValuePairSerializer 类的代码：

```
 GsonBuilder gsonBuilder= new GsonBuilder();
        gsonBuilder.registerTypeAdapter(KeyValuePairSerializer.class, new KeyValuePairSerializer());
        Gson gson1=gsonBuilder.create();

        //serialization works just fine in the next line
        String jsonUpdate=gson1.toJson(postParameters, KeyValuePairSerializer.class);

        ArrayList<BasicNameValuePair> postParameters2 = new ArrayList<BasicNameValuePair>();
        //postParameters2 = gson1.fromJson(jsonUpdate, KeyValuePairSerializer.class); //? how to cast properly
        //deserialization throws an error, it can't cast from ArrayList<BasicNameValuePair> to KeyValuePairSerializer
        gson1.fromJson(jsonUpdate, KeyValuePairSerializer.class); 
```

问题是它最后抛出了一个异常，我不知道问题到底出在哪里，并且仍然不确定如何编写最后一行以将结果返回到新的 postParameters2 ArrayList 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:31:53.500

改编自[GSON 集合示例](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Limitations)：

```
GsonBuilder gsonBuilder= new GsonBuilder();
gsonBuilder.registerTypeAdapter(KeyValuePairSerializer.class, new KeyValuePairSerializer());
Gson gson1=gsonBuilder.create();

Type collectionType = new TypeToken<ArrayList<BasicNameValuePair>>(){}.getType();
ArrayList<BasicNameValuePair> postParameters2 = gson1.fromJson(jsonUpdate, collectionType); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:49:44.803

registerTypeAdapter 似乎仅适用于序列化程序而不适用于反序列化程序。

**调用KeyValuePairSerializer的重写****读取**函数的唯一方法是调用： 而不将结果值保存在变量中。虽然它可以很好地处理函数，但它会在 gson 类中抛出错误，因为它无法从 ArrayList 转换为 KeyValuePairSerializer。而且我有点理解为什么（我猜是擦除），只是不知道如何正确地做到这一点。**`gson1.fromJson(jsonUpdate, KeyValuePairSerializer.class);`**

 **无论如何，我找到了解决此问题的解决方法。似乎不是注册 gson 对象并调用 registerTypeAdapter 然后使用`gson1.toJson(Object src, Type typeOfSrc)`and`gson1.fromJson(String json,Class <T> classOfT)`我可以使用更简单的方法进行反序列化，例如：

```
KeyValuePairSerializer k= new KeyValuePairSerializer();
parametersList = (ArrayList<BasicNameValuePair>)k.fromJson(jsonUpdate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:19:14.320

JsonObject 和 NameValuePair 的行为方式与字典类似，如果用例相似，我认为您不需要将一个转换为另一个。此外，JsonObject 允许您更轻松地处理您的值（而不是循环通过值对数组来查找获取其值所需的键，JsonObject 的行为类似于 Map，您可以直接调用键的名称它将返回所需的属性）：

```
jsonObject.get("your key").getAsString(); (getAsBoolean(), getAsInt(), etc). 
```

对于您的情况，我将从您的字符串、响应或流中创建一个 JsonObject，然后将其作为地图访问（如上所示）：

```
JsonParser parser = new JsonParser();
JsonObject o = (JsonObject)parser.parse("your json string"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T11:10:39.717

我关注了这个博客以获取[GSON 集合示例](http://www.gitshah.com/2011/04/how-to-work-with-json-on-android-part-2.html)。链接很容易理解和实现。

```
public class TimeSerializer implements JsonSerializer<time> {

    /**
     * Implementing the interface JsonSerializer.  
     * Notice that the the interface has a generic
     * type associated with it.  
     * Because of this we do not have ugly casts in our code.
     * {@inheritDoc}
     */
    public JsonElement serialize(
                   final Time time, 
                   final Type type,
                   final JsonSerializationContext jsonSerializationContext) {

        /** 
         * Returning the reference of JsonPremitive 
         * which is nothing but a JSONString.
         * with value in the format "HH:MM"
         */
        return new JsonPrimitive(String.format("%1$02d:%2$02d", 
                              time.getHour(), time.getMinute()));
    } 
```**

# javascript - 解析 XML 文件不起作用

> ID：15522804
> 
> 赞同：1
> 
> 时间：2013-03-20T11:54:42.793
> 
> 标签：javascript, html, xml, xml-parsing

我正在开发一个应用程序，单击一个按钮，程序调用存储在 XML 文件中的信息以`<span>`使用 JavaScript 显示在标签中；

```
 function viewXMLFiles() {

        console.log("viewXMLFiles() is running");

        var xmlhttp = new HttpRequest();
            xmlhttp.open("GET", "TestInfo.xml", false);
            xmlhttp.send;

        console.log("still running");

        var xmlDoc = xmlhttp.responseXML;

        console.log("getting tired");

        document.getElementById("documentList").innerHTML = xmlDoc.getElementByTagName("documentList")[0].childNodes[0].nodeValue;
        document.getElementById("documentList").innerHTML = xmlDoc.getElementByTagName("documentList")[1].childNodes[1].nodeValue;

        console.log("done");
    } 
```

然后是调用它的 HTML（以及显示 XML 文件的位置）；

```
<button onclick = "viewXMLFiles();">View Document Info</button><br>

<span id = "documentList">
    <!--This is where the XML will be loaded into-->
</span> 
```

XML文件是；

```
<document_list>

<document>

    <document_name>Holidays.pdf</document_name>

    <file_type>.pdf</file_type>

    <file_location></file_location>

</document>

<document>

    <document_name>iPhone.jsNotes.docx</document_name>

    <file_type>.docx</file_type>

    <file_location></file_location>

</document>

</document_list> 
```

在控制台中，出现第一条消息，但没有任何反应，仅此而已。但我真的（就像，*真的很*新）对 XML 和解析并且不明白出了什么问题。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:03:09.590

使用它是因为您只有一个用于 documentlist 的子节点

```
document.getElementById("documentList").innerHTML = xmlDoc.getElementByTagName("documentList")[0].childNodes[0].nodeValue;
document.getElementById("documentList").innerHTML = xmlDoc.getElementByTagName("documentList")[1].childNodes[0].nodeValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:20:18.577

笔记：

1.  使用 getElementsByTagName
2.  您的 xml 中没有 documentList 标记
3.  标记文档是您的 xml 中唯一的数组，而不是 document_list

    ```
    function viewXMLFiles() {

      console.log("viewXMLFiles() is running");

      xmlhttp = new XMLHttpRequest();
      xmlhttp.open("GET","TestInfo.xml",false);
      xmlhttp.send();
      xmlDoc = xmlhttp.responseXML; 

      console.log("still running");

      var getData = xmlDoc.getElementsByTagName("document");
      console.log("getting tired");

      document.getElementById("documentList").innerHTML = getData[0].getElementsByTagName("document_name")[0].childNodes[0].nodeValue;
      document.getElementById("documentList1").innerHTML = getData[1].getElementsByTagName("document_name")[0].childNodes[0].nodeValue;

        console.log("done");
    } 
    ```

再添加一个id为documentList1的span来执行上面的代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:59:35.490

我认为问题出在：

```
var xmlhttp = new HttpRequest(); 
```

它应该是：

```
var xmlhttp = new XMLHttpRequest(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:12:19.777

如果你想显示每个文档的信息，你会想要这样的：

```
<html>
<head>

<script type="text/javascript">
function getMyXML() {

  console.log("viewXMLFiles() is running");

  xmlhttp = new XMLHttpRequest();
  xmlhttp.open("GET","TestInfo.xml",false);
  xmlhttp.send();
  xmlDoc = xmlhttp.responseXML; 

  console.log("still running");

  console.log("getting tired");

  document.getElementById("docname").innerHTML = xmlDoc.getElementsByTagName("document_name")[0].childNodes[0].nodeValue;
  document.getElementById("filetype").innerHTML = xmlDoc.getElementsByTagName("file_type")[0].childNodes[0].nodeValue;

  document.getElementById("docname2").innerHTML = xmlDoc.getElementsByTagName("document_name")[1].childNodes[0].nodeValue;
  document.getElementById("filetype2").innerHTML = xmlDoc.getElementsByTagName("file_type")[1].childNodes[0].nodeValue;

    console.log("done");
}
</script>
</head>
<body>

<input type="button" onclick="getMyXML();" value="Get XML" />

<div id="doclist">
<h2>Document 1</h2>
<label>Docname: </label><span id="docname"></span><br/>
<label>Filetype: </label><span id="filetype"></span><br/>

</div>

<div id="doclist">
<h2>Document 2</h2>
<label>Docname: </label><span id="docname2"></span><br/>
<label>Filetype: </label><span id="filetype2"></span><br/>
</div>

</body> 
```

# java - 向 JList 添加滚动条？

> ID：15522807
> 
> 赞同：16
> 
> 时间：2013-03-20T11:54:44.257
> 
> 标签：java, swing

如何将 JList 添加到 JScrollPane ？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-20T11:55:59.643

把你`JList`的`JScrollPane`

```
JScrollPane scrollPane = new JScrollPane();
JList list = new JList();
scrollPane.setViewportView(list); 
```

# mysql - 优化运行大约需要 30 秒的 MySQL 查询

> ID：15522810
> 
> 赞同：0
> 
> 时间：2013-03-20T11:54:57.330
> 
> 标签：mysql, sql

我正在运行查询以获取每个用户在日期范围内输入的总注释。这是我正在运行的查询：

```
SELECT SQL_NO_CACHE 
    COUNT(notes.user_id) AS "Number of Notes"

FROM csu_users

JOIN notes      ON notes.user_id    = csu_users.user_id

WHERE notes.timestamp BETWEEN "2013-01-01" AND "2013-01-31"
AND notes.system = 0

GROUP BY csu_users.user_id 
```

关于我的设置的一些注意事项：

*   查询需要 30 到 35 秒才能运行，这对我们的系统来说太长了
*   这是一个 InnoDB 表
*   该`notes`表大约 1GB，约 3,000,000 行
*   我故意使用`SQL_NO_CACHE`以确保准确的基准

的输出`EXPLAIN SELECT`如下（我已尽力格式化）：

```
id  select_type table       type    possible_keys             key       key_len ref                           rows  Extra
1   SIMPLE      csu_users   index   user_id                   user_id   5       NULL                          1     Using index
1   SIMPLE      notes       ref     user_id,timestamp,system  user_id   4       REFSYS_DEV.csu_users.user_id  152   Using where 
```

我应用了以下索引：

**`notes`**

*   首要的关键 -`id`
*   `item_id`
*   `user_id`
*   `timestamp` *（注意：这实际上是一个`DATETIME`. 这个名字只是误导，对不起！）*
*   `system`

**`csu_users`**

*   首要的关键 -`id`
*   `user_id`

**有什么想法可以加快速度吗？谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:04:38.067

`csu_users`桌子有必要吗？如果关系是 1-1 并且用户 ID 始终存在，那么您可以运行此查询：

```
SELECT COUNT(notes.user_id) AS "Number of Notes"
FROM notes 
WHERE notes.timestamp BETWEEN "2013-01-01" AND "2013-01-31" AND notes.system = 0
GROUP BY notes.user_id 
```

即使不是这样，您也可以在聚合和过滤*之后*进行连接，因为所有条件都 on `notes`：

```
select "Number of Notes"
from (SELECT notes.user_id, COUNT(notes.user_id) AS "Number of Notes"
      FROM notes 
      WHERE notes.timestamp BETWEEN "2013-01-01" AND "2013-01-31" AND notes.system = 0
      GROUP BY notes.user_id
     ) n join
     csu_users cu
     on n.user_id = cu.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:57:55.403

如果我没记错的话，通过将时间戳转换为字符串表示，您将失去该列索引的所有优势。尝试在比较中使用时间戳值

# php - MYSQL 喜欢 + 组

> ID：15522816
> 
> 赞同：2
> 
> 时间：2013-03-20T11:55:18.070
> 
> 标签：php, mysql

好吧，我遇到的问题主要是由于数据库结构不良引起的。我正在为一家代码非常混乱且表格非常大的公司编写此代码，因此我认为这不是修复结构的选择。

无论如何，我的问题是我试图以某种方式对字符串中不会单独存在的值进行分组......他们正在存储用逗号分隔的值......所以它就像

```
field: "category" value: 'var1, var2, var3' 
```

我将使用以下查询进行搜索：

```
SELECT name, category 
FROM companies 
WHERE (MATCH(name, category) AGAINST ('$search' IN BOOLEAN MODE) 
       OR category LIKE '$search%') 
```

它将与例如 var2 匹配（但它不限于 3 个变量，可以是单独的或更多），我会在 PHP 中手动拆分它，没问题。虽然我不会得到足够的匹配，但我希望通过不同的搜索获得例如 10 个匹配。更具体地说，我正在制作一个自动建议功能，这意味着例如我想将“moto%”与摩托车、单独的电机或其他任何东西相匹配，但我一直得到相同的值，就像会有几个 100结果包含“摩托车”，我不知道如何过滤它们，因为由于数据库结构不好，我无法使用 GROUP BY...

我发现了这个：[T-SQL - GROUP BY with LIKE - 这可能吗？](https://stackoverflow.com/questions/1647736/t-sql-group-by-with-like-is-this-possible) 它似乎是一个解决方案，但据我尝试，我无法让它与我想要的一起工作。

所以我想知道有哪些解决方案......如果绝对没有办法解决这个问题，我可能不得不修复数据库结构（但这真的必须是最后一个选择）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:00:05.973

开始采取措施使数据库结构正确。制作一个额外的表格并用拆分值填充它。

然后您可以使用适当的查询来选择您需要的数据。您和下一个开发人员将来在这个项目上的麻烦都会减少，更不用说查询速度的提高了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:07:21.533

我不知道为什么我不能写评论，但也许你可以试试这个：

```
SELECT name, category FROM companies WHERE category LIKE '$search%' or LOCATE('search', category)>0; 
```

如果在类别中出现您的任何“搜索”值，那将看起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:08:30.937

我不得不同意您应该使数据库正确。它会为您节省很多麻烦和时间。但是，使用`SELECT DISTINCT`可能会解决您的直接问题。

# c - C中的文件管理？

> ID：15522822
> 
> 赞同：1
> 
> 时间：2013-03-20T11:55:40.013
> 
> 标签：c, file

我正在用 C 语言进行文件管理培训，我看到有很多方法可以使用 fopen 使用 a、r 等字词打开文件。一切都好，但我还读到，如果在那个词中添加 b 那变成二进制文件。这是什么意思？与普通文件有哪些区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:03:16.737

以文本模式打开文件会导致 C 库执行一些特定于文本的处理。例如，Windows 和 Unix/linux 之间的新行不同，但您可以简单地写 '\n' 因为 C 正在为您处理这种差异。

以二进制模式打开文件不会进行任何这种特殊处理，它只是将其视为原始字节。[在C FAQ](http://c-faq.com/stdio/textvsbinary.html)上有一个更长的解释

请注意，这只在 Windows 上很重要；Unix/linux 系统不需要（需要）区分文本和二进制模式，尽管您可以包含 'b' 标志而不会抱怨。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:05:13.933

如果您以二进制模式打开一个常规文件，您将按原样获取其所有数据，并且您写入其中的任何内容都会出现在其中。

OTOH，如果您以文本模式打开常规文件，则行尾之类的内容会得到特殊处理。例如，值为 13 ( `CR`or `'\r'`) 和 10 ( `LF`or `'\n'`) 的字节序列在读取时可以被截断为一个字节，10，或者在写入时 10 可以扩展为 13，然后是 10。这种处理是特定于平台的（读取、编译器/操作系统特定）。

对于文本文件，这通常并不重要。但是，如果您将文本模式应用于非文本文件，则会面临数据损坏的风险。

此外，由于这种特殊处理，不支持在以文本模式打开的文件中以任意偏移量读取和写入字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T12:03:34.347

区别[在这里解释](http://answers.yahoo.com/question/index?qid=20091128001729AAZaDhK)

> 二进制文件是一系列 1 和 0。这被称为机器语言，因为微处理器可以通过发送 1 的信号或不发送 0 的信号来解释这一点。这更紧凑，但人类无法阅读。
> 
> 出于这个原因，文本文件是一串二进制信号，被指定为显示为对人更友好的字符，它们比二进制更适合语言。ASCII 就是这样一种名称的一个例子。这揭示了事情的真相：所有文件都是最低级别的二进制文件。
> 
> 但是，二进制适用于任何对我们卑贱的人来说文本可读的应用程序 =] 首选二进制文件的示例应用程序是声音文件、图像和编译程序。二进制比文本更受欢迎的原因是，用机器语言描述图像比用文本描述图像更有效（无论如何都必须翻译成机器语言）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T12:04:04.460

有两种类型的文件：文本文件和二进制文件。

二进制文件有两个区别于文本文件的特性： 您可以立即跳转到文件中的任何记录，这提供了像数组一样的随机访问；您可以随时更改文件中任何位置的记录内容。二进制文件通常也比文本文件具有更快的读写时间，因为记录的二进制图像直接从内存存储到磁盘（反之亦然）。在文本文件中，所有内容都必须来回转换为文本，这需要时间。

更多信息[在这里](http://euklid.mi.uni-koeln.de/c/mirror/mickey.lcsc.edu/%257Esteve/c16.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T12:06:51.780

`b`用于处理二进制文件。但是，这对 POSIX 兼容的操作系统没有影响。

来自 fopen 的联机帮助页：

```
 The mode string can also include the letter 'b' either as a last  char‐
   acter  or as a character between the characters in any of the two-char‐
   acter strings described above.  This is strictly for compatibility with
   C89  and has no effect; the 'b' is ignored on all POSIX conforming sys‐
   tems, including Linux.  (Other systems may treat text files and  binary
   files  differently, and adding the 'b' may be a good idea if you do I/O
   to a binary file and expect that your program may be ported to non-UNIX
   environments.) 
```

# for-loop - 批处理文件：在（.fileext）中使用 FOR /R {directory} 遍历目录时如何保存/使用子目录名称

> ID：15522824
> 
> 赞同：0
> 
> 时间：2013-03-20T11:55:48.813
> 
> 标签：for-loop, batch-file, cmd

我正在尝试使用批处理脚本解压缩文件。我想遍历一个文件夹及其子文件夹，每当有 .rar 文件时，我希望它将其内容 rar 到与 .rar 文件所在的文件夹相同的文件夹中。我正在使用 unrar.exe 来执行此操作，它需要我在 raring 时指定输出文件夹。如果我没有指定任何文件夹，它会将其保存到“当前文件夹”，即 batfile 的文件夹。

这是我的代码：

```
FOR /R %dir_of_file% %%X in (*.rar) do (

"%unrarexe_path%\unrar.exe" x -y -r %%X {set unrarfolder path}

) 
```

是否有某种方法可以在 for 循环中的每次迭代中，将路径保存到我正在查找的当前子目录？

就像是：

```
set unrar_to_here={haxcommand that will give me current subdirectory in for-loop} 
```

希望我的问题可以理解:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:59:43.100

这是做你想做的吗？只需将当前工作目录设置为包含 rar 文件的目录并解压到当前文件夹即可。不过，我不确定 unrar 命令的语法。我把它留给你。:)

```
FOR /R %dir_of_file% %%X in (*.rar) do (

    pushd "%%~dpX"
    "%unrarexe_path%\unrar.exe" x -y -r %%X
    popd

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:55:54.287

试试这个。它将文件放在与存档相同的文件夹中：

```
@echo off &setlocal
FOR /R %dir_of_file% %%X in (*.rar) do (
    "%unrarexe_path%\unrar.exe" x -y -r "%%~X" "%%~dpX"
)
endlocal 
```

# javascript - Javascript事件不冒泡

> ID：15522825
> 
> 赞同：1
> 
> 时间：2013-03-20T11:55:50.083
> 
> 标签：javascript, jquery

我有以下标记：![在此处输入图像描述](../Images/d036431c202138b154c67e841fabdc02.png)

我有一些刚刚添加的 jQuery 来切换行颜色： ![在此处输入图像描述](../Images/1e4fdf39d2b1bda969beb60cff28f319.png)

单击行中的任意位置会切换视图，如下所示：

![在此处输入图像描述](../Images/64ef6eeb4288d10a0481af300e9b7d3d.png)

问题是，由于我添加了切换功能，链接不起作用。切换处理程序似乎捕获了事件。我希望链接首先获取事件然后获取行，因此链接应该可以正常工作。

有没有人看到问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:17:23.683

这里的主要问题是 toggle() 不是您使用它的目的。

检查：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

它使匹配的元素根据其当前状态隐藏和显示。

您可能想要使用的是[toggleClass()](http://api.jquery.com/toggleClass/)根据您的示例。

您的问题也不清楚您的javascript的目的是什么。什么时候（在什么事件上）你想改变一个项目的颜色？点击它？

您显然在滥用 toggle() 函数，但我不确定您何时以及想要发生什么。

编辑：我看到您的目标是已弃用的[切换事件。](http://api.jquery.com/toggle-event/)

EDIT2：我为您制作了一个 jsfiddle，我认为它可以满足您的需求。

[http://jsfiddle.net/kytJ3/1/](http://jsfiddle.net/kytJ3/1/)

的HTML：

```
<div id="test" class="test-class">DURP<br />HURP<br />
    <a href="http://google.com" target="_blank">A LINK</a>
</div> 
```

js：

```
$('#test').click(function () {
    $(this).toggleClass('test-class');
}); 
```

的CSS：

```
div {
    color: red;
}
.test-class {
    color: blue;
} 
```

这也导致更干净（无样式）的 javascript。并且链接工作正常。

# javascript - 如何从表中删除特定行？

> ID：15522835
> 
> 赞同：0
> 
> 时间：2013-03-20T11:56:17.053
> 
> 标签：javascript

我有一个`n`行数的表。`n`每分钟更改/更新的值。`<td>`每行的第一行要么包含一些文本，要么为空白。我想删除/删除除第一行和第一个单元格包含文本的行之外的所有行`'xyz'`。那么，我将如何做到这一点？该`table`元素存储在变量 中`parentTable`。

我对javascript和编程有点陌生。任何帮助，将不胜感激。谢谢。

我只用第二行测试了它，但即使文本不在`xyz`单元格中，也没有发生任何事情。

```
if(parentNode.childNodes[1].innerText !== "xyz")
parentTable.deleteRow[1]; 
```

我如何循环每一行并做到这一点？

编辑：每行中第一个单元格的 HTML。

```
<td class=wbwhite align=center width=40 style="border-top: none; border-left:none; border-right:none;">
&nbsp;
<a href="www.kasdjfkasd.sadsdk.comi" class=pi>xyz</a>
&nbsp;
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:07:50.200

试试这个：

```
 var table = parentTable;
    var rowCount = table.rows.length;

    for ( var i = 1; i < rowCount; i++ )
    {
        var row = table.rows[i];
        var val=  row.cells[0].childNodes[0].innerHTML.toString();

        if ( 'xyz' != val )
        {
            table.deleteRow( i );

            rowCount--;
            i--;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:07:11.270

使用此代码（纯 JavaScript）：

（假设表有 id = `tableId`）。

```
var all = document.querySelectorAll('#tableId > tbody > tr');

// i = 1 not i = 0 to keep the first row.
for (var i = 1; i < all.length; i++) {
    var td = all[i].querySelectorAll('td')[0];
    if ( td.textContent != "xyz" ) {
        all[i].parentNode.removeChild(all[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:13:53.187

你可以试试这个

```
var allRows = parentTable.getElementsByTagName('TR');

for(var i=1; i<allRows.length;)
{
    var tr = allRows[i];
    var firstTd = tr.getElementsByTagName('TD')[0];
    if(firstTd.innerHTML !== 'xyz')
    {
        tr.parentNode.removeChild(tr);
    }else{
        i++;
    }
} 
```

# java - PermGen 高，但堆使用率低

> ID：15522837
> 
> 赞同：2
> 
> 时间：2013-03-20T11:56:17.740
> 
> 标签：java, performance, memory, heap-memory, permgen

我经常在我的 java(web) 应用程序中看到 High Perm Gen。

jmap 命令，经常显示它被使用了 90%。但这似乎不会对我的应用程序造成任何问题。我的整体堆使用率非常低（大约 400 MB，其中最大内存设置为 2048 MB）。

管理生产中的应用程序的团队担心 PermGen 很高。而且往往各种问题都归咎于它。

问题：
（1）我需要担心只是因为 PermGen 很高，当垃圾收集发生时 PermGen 不会下降吗？
(2) 我是否应该将最大 PermGen 大小加倍（当前为 200 MB），会有副作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:07:53.617

您需要担心三件事：堆、永久代和总驻留内存。

在用完之前，您无需担心 perm gen。尝试增加值。

副作用是消耗更多的 RAM。您的统计数据表明您可以使用更多的 perm gen 和更小的最大堆。

您真正关心的不应该是时间点值。由于这是一个 Web 应用程序，因此您需要观察堆、永久生成和总驻留内存，并了解它们如何随着时间的推移而演变。

如果 GC 可以控制一切并且服务器可以处理典型负载和峰值负载，那么您就有了一个不错的应用程序。如果它随着时间的推移而增长，您可能需要担心内存泄漏。

您部署在哪个应用服务器上？这很重要。与成熟的 Java EE 应用服务器相比，Tomcat 应用程序的总驻留内存要轻得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:08:29.733

> （1）我需要担心只是因为 PermGen 很高，当垃圾收集发生时 PermGen 不会下降吗？

没有。PermGen 是为加载类信息保留的空间。除非说 Web 容器取消部署 WAR 文件并且不再需要这些类，否则它不能被垃圾收集。

> (2) 我是否应该将最大 PermGen 大小加倍（当前为 200 MB），会有副作用吗？

第一个明显的副作用是 JVM 会使用更多的 RAM。确保分配给机器的物理 RAM 足够。 [BIRT 是一个应用程序示例，](http://www.birt-exchange.org/org/devshare/designing-birt-reports/121-solving-birt-outofmemoryerror-permgen-space-errors/)尽管没有泄漏，但由于 permgen 空间而很快失败。其次，我还将调查您的 permgen 是否存在泄漏。增加 permgen 作为预防措施很好，但如果存在内存泄漏，从长远来看，它可能对应用程序没有帮助。

例如，[泄漏的驱动程序](http://plumbr.eu/blog/what-is-a-permgen-leak)可能会导致更多的 permgen 使用。一个好的试金石是反复热部署您的应用程序并检查对 permgen 的更改。它会一直增加直到内存不足吗？然后你有泄漏。

# extjs4 - 如何在 ext Js 4 数字字段中输入美分？

> ID：15522841
> 
> 赞同：1
> 
> 时间：2013-03-20T11:56:32.650
> 
> 标签：extjs4

当试图在我的号码字段中输入 12.80 时，最后一个 0 消失了。我怎样才能显示数字字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:19:53.013

这是预期的行为。如果您想要自定义实现，则必须在`parseFloat`. 因为该（本机）函数将去除尾随十进制零（和前导零）。

```
e.g. parseFloat("00100.00100") results in 100.001 
```

唯一的方法是至少覆盖这两个函数：

```
parseValue : function(value) {
   //provide own implementation
   console.log('parseValue', value);
   return value;
},
valueToRaw: function(value) {
   //provide own implementation
   console.log('valueToRaw', value);
   return value;
} 
```

这里是[源](http://docs.sencha.com/ext-js/4-2/source/Number3.html#Ext-form-field-Number-method-rawToValue)

# jquery - 在用户点击其他链接之前要求确认，然后再提交数据

> ID：15522850
> 
> 赞同：1
> 
> 时间：2013-03-20T11:56:41.867
> 
> 标签：jquery, forms, redirect

我的 html 页面上有一个用于更新一些自定义数据的表单。在提交表单之前，我想向用户询问确认消息，如果他更新了表单中的数据并单击同一 html 页面上的其他链接。

**我是如何实现的：**

我已经制作了布尔变量来保持用户是否更新了任何字段的状态。而且我使用 .html 页面中的所有标签绑定`click`事件。这样当用户单击页面上的任何锚标记时，我将检查状态变量是否为真（值已更改）。如果是真的，我想停止重定向并要求确认。`anchor``jquery`

我已经做到了这一点。但问题是即使用户点击`cancel`确认框，我也无法停止重定向。

**这是代码**

```
$(document).ready(function(){
  GLOBAL_NAMESPACE.value_changed = false;
  $("[id^='id_']").live('change', function (){
      GLOBAL_NAMESPACE.value_changed = true;
  });
});

$('a').bind('click',function (e) {
    e.preventDefault();
    if (GLOBAL_NAMESPACE.customize_option_changed){
        var res = confirm('you have unsaved changes. Do you want to continue?');
        if(res){
            GLOBAL_NAMESPACE.customize_option_changed = false;
            $(this).click();
        }else{
            console.log('stay on same page...');
            // Problem: user redirects to the clicked link even if he reaches here
        }
    }
}); 
```

我的实现思路有问题吗？这段代码有什么问题？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:18:37.610

这个[小提琴](http://jsfiddle.net/qsX7s/2/)有效。

```
var GLOBAL_NAMESPACE = {};

$(document).ready(function(){
  GLOBAL_NAMESPACE.value_changed = true;
});

$('a').bind('click',function (e) {
    e.preventDefault();
    if (GLOBAL_NAMESPACE.value_changed){
        var res = confirm('you have unsaved changes. Do you want to continue?');
        if(res){
            window.location.href = $(this).attr('href');
        }else{
            console.log('stay on same page...');
        }
    }
}); 
```

我改变了几件事：

1.  在`$(document).ready()`您正在设置`GLOBAL_NAMESPACE.value_changed`和`bind()`正在阅读的功能中`GLOBAL_NAMESPACE.customize_option_changed`
2.  根据您的 jQuery 版本，该`live()`方法将替换为`on()`. 我完全删除了这段代码，因为为了举例，我想`GLOBAL_NAMESPACE.value_changed`成为真实的。
3.  `GLOBAL_NAMESPACE.value_changed`如果用户在离开页面后确认离开页面，则无需设置为 false :)
4.  就像我在评论中说的那样：我替换`$(this).click();`为`window.location.href = $(this).attr('href');`

# linux-kernel - 为 skb struct 手动分配数据缓冲区

> ID：15522855
> 
> 赞同：1
> 
> 时间：2013-03-20T11:56:52.650
> 
> 标签：linux-kernel, linux-device-driver

我有两块通过 PCIE 总线连接的板。他们可以通过预先分配的消息缓冲区交换数据。现在我尝试基于这个连接来实现一个虚拟网络接口。参考一些网络驱动程序源表明他们实现接收路径有两种方法：

*   用于`dev_alloc_skb()`分配`skb`内部接收函数并将数据复制到为此分配的缓冲区`skb`。
*   用于`dev_alloc_skb()`分配`skb`并将它们的缓冲区放入 RX 环。

在这两种情况下，缓冲区是由`dev_alloc_skb()`. 我只想分配`skb`控制标头并将`data`指针指向我的消息缓冲区。我们还必须修改`skb_free()`以将消息缓冲区放回消息池。

任何人都可以告诉我是否有任何参考代码也使用类似的方法，或者请提出一种更好的方法来最小化代码更改。任何建议表示赞赏。先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-08T20:22:35.040

您可以使用[build_skb](https://patchwork.ozlabs.org/patch/104156/)：

> 因此，交易将只为 NIC 分配数据缓冲区以填充其 RX 环形缓冲区。并`build_skb()`在 RX 完成时使用将数据缓冲区（现在填充有以太网帧）附加到新的 skb，初始化该`skb_shared_info`部分，并将热 skb 提供给网络堆栈。
> 
> `build_skb()`是分配一个 skb 的函数，调用者提供应该附加到它的数据缓冲区。驱动程序应该 在让指向以太网帧`skb_reserve()`之后立即调用（通常跳过和）`build_skb()``skb->data``NET_SKB_PAD``NET_IP_ALIGN`

# facebook-graph-api - 在 Facebook 上分享视频失败

> ID：15522857
> 
> 赞同：5
> 
> 时间：2013-03-20T11:56:53.987
> 
> 标签：facebook-graph-api, ios6

我正在使用 Facebook SDK 3.1.1 在 Facebook 上分享视频。我在这里提到了代码。

```
FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];

    // for each fbid in the array, we create a request object to fetch
    // the profile, along with a handler to respond to the results of the request
    NSString *fbid = @"me";
    // create a handler block to handle the results of the request for fbid's profile
    FBRequestHandler handler =
    ^(FBRequestConnection *connection, id result, NSError *error) {
        // output the results of the request
        [self requestCompleted:connection forFbID:fbid result:result error:error];
    };

    // create the request object, using the fbid as the graph path
    // as an alternative the request* static methods of the FBRequest class could
    // be used to fetch common requests, such as /me and /me/friends

    NSData *videoData = [NSData dataWithContentsOfFile:path];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, @"video.mov",
                                   @"video/quicktime", @"contentType",
                                   @"Video", @"title",
                                   @"Video Test Description", @"description",
                                   @"hello",@"subdescription",
                                   nil];
    FBRequest *request = [[FBRequest alloc] initWithSession:theDelegate.session graphPath:@"me/videos" parameters:params HTTPMethod:@"POST"];
    //:FBSession.activeSession graphPath:@"me/?fields=location"];

    // add the request to the connection object, if more than one request is added
    // the connection object will compose the requests as a batch request; whether or
    // not the request is a batch or a singleton, the handler behavior is the same,
    // allowing the application to be dynamic in regards to whether a single or multiple
    // requests are occuring
    [newConnection addRequest:request completionHandler:handler];

    // if there's an outstanding connection, just cancel
    [self.requestConnection cancel];

    // keep track of our connection, and start it
    self.requestConnection = newConnection;
    [newConnection start]; 
```

它早些时候工作正常。每次我发起上传视频请求时，我都会收到共享的视频 ID。但是，当我在通知中查看我在 FB 上的个人资料时，我不断收到以下消息。

> 无法处理您的视频。访问视频帮助页面以了解常见问题

我已经尝试过使用不同的 AppIds。当我使用 Facebook 网站上传视频时，上传视频正在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:51:44.737

它现在可以工作了:) 你可以在 [https://developers.facebook.com/bugs/543903808965945查看](https://developers.facebook.com/bugs/543903808965945)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T21:47:16.507

这似乎是一个新的已知 Facebook 错误（今天的第一份报告）。

您可以在这里支持错误报告：http: [//developers.facebook.com/bugs/543903808965945](http://developers.facebook.com/bugs/543903808965945)

# c# - 如何使用 openxmlsdk 2.0 将 html 字符串转换为 OOXML (Word 2007) 格式的字符串？

> ID：15522864
> 
> 赞同：1
> 
> 时间：2013-03-20T11:57:05.837
> 
> 标签：c#, html, c#-4.0, openxml, openxml-sdk

我有一个 HTML 格式的字符串（它可能包含 HTML 表格）。现在我想将此 html 字符串转换为基于 Word 2007 的字符串的 OOXML 表示形式并将其存储到我的数据库表中。将来，一旦我收集了所有的 html 字符串，我就必须从存储在数据库中的 OOXML 字符串构建 Word 文档。

所以，现在我的问题是我必须将我的 html 字符串转换为 Word 2007 的等效 OOXML 格式字符串。

我已经尝试过使用. 中的`AlternativeFormatImportPart`类。`openxmlsdk2.0`但它直接为给定的 html 字符串构建 Word 文档。我不想这样做。我只想将 HTML 字符串转换为 Word 2007 的 OOXML 格式字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:30:37.283

如果您的意思是要将 HTML 代码转换为 OpenXML 代码（元素），则不能直接进行。要么编写您自己的转换器，要么使用其中一个可用的转换器（虽然受到积极支持，但并不是很多令人惊叹的转换器）。这是一个。[http://html2openxml.codeplex.com/](http://html2openxml.codeplex.com/)

# spring-mvc - Spring MVC portlet 未正确部署到 glassfish-webspace 环境中：java.lang.IllegalArgumentException

> ID：15522867
> 
> 赞同：3
> 
> 时间：2013-03-20T11:57:18.813
> 
> 标签：spring-mvc, binding, spring-portlet-mvc, glassfish-webspace

我在尝试部署我的 portlet 时遇到了一个非常奇怪的问题。

日志中显示的错误是：

```
Context initialization failed
java.lang.IllegalArgumentException: class myPackage.SqlTimestampPropertyEditor is not assignable to interface java.beans.PropertyEditor
at org.springframework.util.Assert.isAssignable(Assert.java:368)
    at org.springframework.util.Assert.isAssignable(Assert.java:351)
    at org.springframework.beans.factory.config.CustomEditorConfigurer.postProcessBeanFactory(CustomEditorConfigurer.java:199)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:664)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) 
```

这是我的属性编辑器：

```
 package myPackage;

 import myPackage.util.Util;
 import java.beans.PropertyEditorSupport;
 import java.sql.Timestamp;
 import java.text.ParseException;
 import java.text.SimpleDateFormat;

public class SqlTimestampPropertyEditor extends PropertyEditorSupport {

public static final String TIMESTAMP_BATCH_PATTERN = "yyyy-MM-dd HH:mm:ss.SSS";
private final SimpleDateFormat sdf;

/**
 * uses default pattern yyyy-MM-dd for date parsing.
 */
public SqlTimestampPropertyEditor() {
    this.sdf = new SimpleDateFormat(SqlTimestampPropertyEditor.TIMESTAMP_BATCH_PATTERN);
}

/**
 * Uses the given pattern for dateparsing, see {@link SimpleDateFormat} for
 * allowed patterns.
 *
 * @param pattern the pattern describing the date and time format
 * @see SimpleDateFormat#SimpleDateFormat(String)
 */
public SqlTimestampPropertyEditor(SimpleDateFormat dateFormat) {
    this.sdf = dateFormat;
}

/**
 * @see java.beans.PropertyEditorSupport#setAsText(java.lang.String)
 */
@Override
public final void setAsText(String text) throws IllegalArgumentException {

    try {
        if (!Util.emptyString(text)) {
            setValue(new Timestamp(this.sdf.parse(text).getTime()));
        }
    } catch (ParseException ex) {
        throw new IllegalArgumentException("Non se pudo parsear o timestamp: " + ex.getMessage(), ex);
    }
}

/**
 * Format the Timestamp as String, using the specified DateFormat.
 */
@Override
public final String getAsText() {
    Timestamp value = (Timestamp) getValue();
    return (value != null ? this.sdf.format(value) : "");
}
} 
```

最奇怪的是，这种情况有时会发生，它会自行解决，并且日志显示“PortalPack 消息：已成功部署”。但是我无法将 portlet 添加到 webspace，即使我可以看到它已部署到 glassfish 控制台中。

这对我来说没有任何意义，我真的很感谢在这个问题上提供任何帮助......在此先感谢！

# html-email - 在 HTML 电子邮件中创建简单分隔符的最可靠方法是什么？

> ID：15522868
> 
> 赞同：2
> 
> 时间：2013-03-20T11:57:19.857
> 
> 标签：html-email

我尝试使用具有单列的表格行，该列仅包含空锚元素并具有背景颜色。这适用于某些客户，但我不会说大多数。我也尝试过设置列和行的边框底部，但这也有非常复杂的结果。另一种选择是使用图像...

有什么可靠的技术可以做到这一点吗？我对电子邮件设计相当陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:46:27.283

有几种方法，如果你想要一个段落下的水平“规则”，整个段落宽度你可以：

```
<td bgcolor="#ffffff" style="border:none; border-bottom: 1px solid #cccccc;">My text plus at least two break tags for padding <br /><br /></td> 
```

或者

```
<tr>
<td bgcolor="#FFFFFF" style="Verdana;">Some content text here with no break tag after it.</td>
</tr>
<tr>
<td height="1" bgcolor="#ffffff" style="border:none; border-bottom: 1px solid #cccccc; font-size:1px; line-height:1px;">&nbsp;</td></tr> 
```

第二种方法可能会在布局中添加两个像素，具体取决于使用的电子邮件客户端和渲染方法。但是更可靠，因为您可以将高度设置为在文本下形象地添加“填充”。（填充在所有电子邮件客户端中单方面的工作方式不同）。

对于更复杂的“填充”选项，我建议将其添加`border-bottom`到封闭`<td>`然后嵌套一个带有额外“填充”列的表格*使用 Outlook hack 的`font-size:1px; line-height:1px;"`加号`&nbsp;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:45:11.310

具有所需颜色的 1px 边框的表格单元格是我发现的最可靠的渲染方式。

```
<table width="100%" align="left" border="0" cellpadding="0" cellspacing="0" style="margin:0;padding:0;">
<tr>
<td style="border-bottom:1px solid #ffffff;">
Content Here
</td>
</tr>
</table> 
```

相关，我发现边框不适用于所有电子邮件客户端中的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:03:18.890

好吧，如果我想在电子邮件中使用分隔符，我将简单地使用`</hr>`标签并使用水平规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:57:02.990

假设您的分隔线只有几个像素粗，我通常使用 10 像素 x 40 像素的图像，分隔线垂直居中（尽管从技术上讲 1 像素 x 40 像素可以）。然后我将图像拉伸到表格单元格的整个宽度。

它这么高的原因是我也使用图像进行填充。额外的“不必要”像素并不是什么大问题，因为图像的宽度小于 10 像素。

优点是这种技术可以让您精确控制前后的垂直填充，还可以避免 Outlook 中的最小单元格高度问题，我认为它是 19px 高...

# javascript - div 元素不使用 javascript 更新

> ID：15522874
> 
> 赞同：5
> 
> 时间：2013-03-20T11:57:42.837
> 
> 标签：javascript, jquery, html, ajax

你们中的任何人都可以看到为什么 div (#welcome) 没有在下面的代码中更新吗？

```
function show_logged_in(success)
{

    var is_logged_in = success;

    var dataString = {"reg":invalid, "login":invalid,"is_logged_in":is_logged_in};

    $.ajax({
        type:"POST",
        url:"PHP/class.ajax.php",
        data:dataString,
        dataType:'JSON',
        success: function(username) {
            alert("User is shown");
            user = username;
            change_div();
        },
        error: function() {
            alert("ERROR in show_logged_in")
        }
    });

function change_div(){
    $('#welcome').style.display = 'block';
    $('#welcome').innerHTML = "Welcome" + user + "to SIK";
    }

} 
```

来自被调用的 ajax 的响应只是从会话变量中获取用户名。它正在正确返回。

当它返回时，我希望 div 出现并表示欢迎。但由于某种原因，div 没有被更新。

这是html：

`<div id="welcome" style="display:none; postion:absolute; top:0; float:right;">...</div>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:59:36.657

你不能做

```
$('#welcome').style.display = 'block';
$('#welcome').innerHTML = "Welcome" + user + "to SIK"; 
```

用jQuery。这是因为`$('#welcome')`你抓取的是 jQuery 对象，而不是 DOM 元素。

要使用 jQuery 执行此操作：

```
$('#welcome').html('Welcome' + user + 'to SIK').show(); // Brought up in comments

$('#welcome').show(); // Old
$('#welcome').html('Welcome' + user + 'to SIK'); // Old 
```

或者如果你真的想获取 DOM 元素：

```
$('#welcome')[0].style.display = 'block';
$('#welcome')[0].innerHTML = "Welcome" + user + "to SIK"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:01:10.697

**@Jeff Shaver**是对的，但`user`作为参数传递`change_div(user);`

然后

```
function change_div(user){
       $('#welcome').show();
       $('#welcome').html('Welcome' + user + 'to SIK');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:28:15.080

试试这个朋友。。

```
$.ajax({
        type:"POST",
        url:"PHP/class.ajax.php",
        data:dataString,
        dataType:'JSON',
        success: function(username) {
            alert("User is shown");
            user = username;
            change_div(user);
        },
        error: function() {
            alert("ERROR in show_logged_in")
        }
    });

function change_div(user){
    $('#welcome').css("display","inline");
    $('#welcome').append("Welcome" + user + "to SIK");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:03:16.763

显示属性不存在。

```
$('#welcome').style.display = 'block'; 
```

改用这个：

```
$('#welcome').css({"display":"block"}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:05:06.353

我会用这段代码坚持纯 JS。

```
var welcome = document.getElementById('welcome');

function change_div(){
    welcome.innerHTML = "Welcome" + user + "to SIK";
    welcome.style.display = 'block';
} 
```

# regex - sed 正则表达式匹配非空格或制表符

> ID：15522875
> 
> 赞同：0
> 
> 时间：2013-03-20T11:57:44.470
> 
> 标签：regex, sed, grep

我正在尝试解析如下所示的输入：

```
i171_chr1_C_MSTA_K0.184_full    i266_chr1_+_MSTA_K0.195_full    92.06   2255    125 21  1   2221    2235    1   0.0 3123
i172_chr1_+_MLT1D_K0.575_full   i172_chr1_+_MLT1D_K0.575_full   100.00  2290    0   0   1   2290    1   2290    0.0 4229
i172_chr1_+_MLT1D_K0.575_full   i172_chr1_+_MLT1D_K0.575_full   100.00  2290    0   0   1   2290    1   2290    0.0 4229 
```

期望的输出是：

```
i171 1 i266 1 92
i172 1 i172 1 100
i172 1 i172 1 100 
```

换句话说，我将第一个“_”之前的名称提取到第一列，并将 chr 之后的部分提取到第二列（类似于第三列和第四列）。

我编写了适用于前四列的命令：

```
grep -v "#" blastGE90_lengthGE1000 | cut -f 1,2 | sed -r 's/(.+)_chr([0-9XY]+)_.+\t(.+)_chr([0-9XY]+).+/\1 \2 \3 \4/' 
```

但是，当我尝试匹配输入中的第三列时，我没有成功。我总是匹配最后一场比赛，而不是我想要的一场：

```
grep -v "#" blastGE90_lengthGE1000 | cut -f 1,2 | sed -r 's/(.+)_chr([0-9XY]+)_.+\t(.+)_chr([0-9XY]+).+([0-9]+\.).+/\1 \2 \3 \4 \5/' 
```

因此，我想使用正则表达式来匹配非空格或制表符，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:21:55.593

我已经修复了你的命令：

```
grep -v "#" blastGE90_lengthGE1000 | cut -f 1-3 | sed -r 's/(.+)_chr([0-9XY]+)_.+\t(.+)_chr([0-9XY]+)_.+\t([0-9]+).+/\1 \2 \3 \4 \5/' 
```

您需要使用`cut -f 1-3`not`cut -f 1,2`因为您需要前三列。`sed`我还修复了表达式中的最后一个捕获组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:04:06.377

我会`awk`在这里使用：

```
$ awk -F'_| +' '{gsub(/chr/,"");print $1,$2,$7,$8,int($13)}' file
i171 1 i266 1 92
i172 1 i172 1 100
i172 1 i172 1 100 
```

# ios - UITabelView 中的自定义空单元格

> ID：15522879
> 
> 赞同：0
> 
> 时间：2013-03-20T11:57:48.930
> 
> 标签：ios, uitableview

我得到了ios应用程序`UITableView`

我在这个表中自定义了单元格，但是当对象数量低于屏幕上可见单元格时，所有其他单元格看起来就像简单的 UITableViewCells。

![在此处输入图像描述](../Images/e4af27b3b06dad35c1429bbf8aa53b5e.png)

它应该看起来像这样

![在此处输入图像描述](../Images/d85af76afa032acb6e91731981f1ae83.png)

我应该如何自定义所有单元格？

**数据源的UPD**代码：

```
pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    return [dataBase.showMaps count];

}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    return 70;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    ShowMapCell *cell = (ShowMapCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[ShowMapCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    ShowMap *sM = [dataBase.showMaps objectAtIndex:indexPath.row];

    //cell.textLabel.text = sM.name;

    [cell initShowMapCell:sM index:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:15:11.153

如果您希望 UITableView 没有“空单元格”，则需要隐藏单元格分隔符并更改 tableview 的背景颜色以匹配您的配色方案。

正如 katzenhut 在评论中所说，它们不是单元格，它们是内容的占位符。因此，如果您隐藏分隔符并将它们添加到 UITableViewCell ShowCell 的 xib 文件中，那么当表格中没有要放置的单元格时，它们将不再可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:18:02.267

您可以只设置表格视图的背景颜色。但是，该解决方案不起作用，因为您为每个单元格使用不同的背景。

所以根据我的说法，要实现你想要的，你需要向表中添加一些额外的（空白）行，为此你需要返回你的记录 + 额外的单元格`(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`方法。除此之外，您需要将表格视图的背景颜色设置为单元格背景之一，因为如果您在表格视图中使用弹跳效果，则在向上/向下滚动表格视图时会发现白色。

# c# - 单元测试 - 代码示例来说明在类/方法级别应该/不应该测试什么。

> ID：15522881
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:57:51.480
> 
> 标签：c#, unit-testing

我一直在阅读包括本网站在内的网络上的相关主题。但我找不到有大量代码来解释相关主题的代码。

我一直在练习 TDD 和单元测试。我想找出在类级别、方法级别方面应该和不应该进行单元测试的内容。例如，我应该测试所有内容（集成测试是为了什么）？在目标方法中，我应该对哪些代码行进行单元测试？在这方面是否有任何好的原则和实践，或者有大量代码示例的好的阅读材料来说明。

这里的主题与服务器端语言有关，例如 C#、Java。

**更新**

请注意，以下书籍并未涵盖我正在寻找的内容（如果我是正确的）

[实用的单元测试](https://rads.stackoverflow.com/amzn/click/com/0977616673)

[单元测试的艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:05:04.107

从广义上讲，单元测试应该是白盒测试，集成测试应该是黑盒测试。

也就是说，一个单元测试应该依赖于一个代码单元的内部工作，通常是一个方法。作为开发人员，您将通过该方法检查可能的执行路径并为每个路径创建一个测试用例。单元测试也应该单独测试方法。应该模拟任何协作者或输入和输出，以便单元测试仅执行被测方法。

要找到执行路径，您需要考虑方法可能有哪些输入，以及有哪些分支（例如`if`语句和异常）。例如

```
public boolean isYes() {
    return someValue.equals("yes");
} 
```

这个方法里面没有`if`语句，但是它有三个执行路径。

*   如果`someValue`是`"yes"`则该方法返回`true`
*   如果`someValue`是其他字符串，如`"Yes"`, `"no"`, `"bananas"`, 或`""`返回`false`
*   如果`someValue`是`null`它会抛出一个`NullPointerException`

在这种情况下，考虑这些执行路径并编写单元测试来涵盖这些情况有助于您考虑该方法可能存在哪些问题。

执行路径访问多个代码单元的测试将是集成测试。您将根据整体输入和输出运行测试。你不在乎它是*如何*工作的，只是*它*在工作。

就我个人而言，我会根据自己对代码库的了解创建单元测试，并分别为每个方法创建单元测试。我将根据规范和需求中的个别验收标准创建集成测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:09:02.927

[Pragmatic Unit Testing](https://rads.stackoverflow.com/amzn/click/com/0977616673)并不是 Pragamatic 系列中最好的，而且当我几年前阅读它时，nunit 的技术相当轻巧且过时。但它足够便宜，涵盖了原则和实践。

[单元测试的艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)也值得一读。

干杯，
贝里尔

# php - AsynchDNS 在 php 中做了什么？

> ID：15522885
> 
> 赞同：1
> 
> 时间：2013-03-20T11:57:59.193
> 
> 标签：php, curl

我正在比较两个 PHP 配置，我发现`AsynchDNS`在 curl 下启用了一个，而另一个没有启用。具体是`AsynchDNS`做什么的？我试过谷歌，但有很多关于如何启用或禁用它的链接，但不是它到底做了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:07:34.063

AsynchDNS（顾名思义）允许 curl 异步运行 DNS 查询（而不是阻塞调用）。理论上，这允许您快速请求/加载多个页面，因为您无需等待每个响应串行运行。

# jquery - 简单的 jQuery 手风琴菜单跳跃

> ID：15522889
> 
> 赞同：2
> 
> 时间：2013-03-20T11:58:11.690
> 
> 标签：jquery, css, accordion

我正在尝试实现一个 jquery 手风琴菜单，但是我遇到了一个小问题，我自己无法弄清楚。

我使用本教程[http://www.stemkoski.com/stupid-simple-jquery-accordion-menu/](http://www.stemkoski.com/stupid-simple-jquery-accordion-menu/)来构建它并且一切正常，除了每次我选择一个新项目时，整个菜单都会稍微跳起来。

我猜这与css有关，但是找不到。另外，你能告诉我如何在打开时突出显示菜单栏，这是脚本。

```
$(document).ready(function() { 
//ACCORDION BUTTON ACTION   
$('div.accordionButton').click(function() {
    $('div.accordionContent').slideUp('slow');
    $(this).next().slideDown('slow');
}); 
//HIDE THE DIVS ON PAGE LOAD    
$("div.accordionContent").hide();
}); 
```

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:30:38.677

如果你去他的演示页面的源代码并打开他的javascript，那么你会发现一个不同的代码。链接中的代码有问题。如果再次单击某个项目，它将向上滑动和向下滑动。

```
$(document).ready(function() {

    //ACCORDION BUTTON ACTION (ON CLICK DO THE FOLLOWING)
    $('.accordionButton').click(function() {

        //REMOVE THE ON CLASS FROM ALL BUTTONS
        $('.accordionButton').removeClass('on');

        //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
        $('.accordionContent').slideUp('normal');

        //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
        if($(this).next().is(':hidden') == true) {

            //ADD THE ON CLASS TO THE BUTTON
            $(this).addClass('on');

            //OPEN THE SLIDE
            $(this).next().slideDown('normal');
         } 

     });

    /*** REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

    //ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
    $('.accordionButton').mouseover(function() {
        $(this).addClass('over');

    //ON MOUSEOUT REMOVE THE OVER CLASS
    }).mouseout(function() {
        $(this).removeClass('over');                                        
    });

    /*** END REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

    /********************************************************************************************************************
    CLOSES ALL S ON PAGE LOAD
    ********************************************************************************************************************/   
    $('.accordionContent').hide();

}); 
```

为了避免混蛋尝试使用[jqueryui 手风琴](http://jqueryui.com/accordion/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:40:02.400

我对此不太确定，但过去我遇到过某种相同的问题。当动画高度（或宽度）`px`不能有十进制值时，它们将通过`round`. 因此，如果您同时为两个元素设置动画，其中一个在某个点设置为高度 9.5，另一个设置为 10.5，它们将相应地转换为 10 和 11，因此它们的高度总和为 21px，而不是 20px。这就是为什么它们的总高度在动画期间会增长和缩小并产生这种闪烁。

# c# - 如何比较（行和列）两个数据表并获取唯一记录

> ID：15522892
> 
> 赞同：1
> 
> 时间：2013-03-20T11:58:15.170
> 
> 标签：c#, datatable, compare

我有 2 个数据表

```
string query = "Select * from " + ServerTableName;
DataTable oDtSeverData = GetDataTable(query);

string dbQuery = "SELECT * from " + LocalSystemTableName;
DataTable oDtLocalSystemData = dataService.GetDataTable(dbQuery); 
```

我想比较（行和列）两个数据表，以获得相同的列（存在于两个数据表中）和唯一记录（唯一行）。

让我详细解释一下：

oDtServerData 的列（Column1、Column2、Column3、Column4）只有几行。oDtLocalSystemData 的列（Column1、Column2、Column3）只有几行。

oDtServerData 可能有更少的列和 oDtLocalSystemData。但在任何情况下，我都想要在具有唯一行的数据表中匹配的列（Column1，Column2，Column3）（数据应该是唯一的）。

有人请帮助我，并通过几个例子给我一些想法来解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:08:52.083

您可以使用下面的代码来比较两个 DataTable，

```
public static DataTable CompareTwoDataTable(DataTable dt1, DataTable dt2)
{ 
  dt1.Merge(dt2);
  DataTable d3 = dt2.GetChanges();
  return d3;
} 
```

有关 DataTable.Merge() 的更多信息，请参阅[MSDN 上的 DataTable.Merge 方法（DataTable）](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:55:52.067

```
ArrayList commonColumns = new ArrayList();

for (int iServerColumnCount = 0; iServerColumnCount < oDtSeverData .Columns.Count; iServerColumnCount ++)
{
  for (int iLocalColumnCount = 0;
                             iLocalColumnCount < oDtLocalSystemData .Columns.Count;
                             iLocalColumnCount ++)
    {
      if (oDtSeverData .Columns[iServerColumnCount ].ColumnName.ToString()
             .Equals(oDtLocalSystemData .Columns[iLocalColumnCount].ColumnName.ToString()))
      {
         commonColumns.Add(oDtLocalSystemData .Columns[iLocalColumnCount].ColumnName.ToString());
      }
    }
}

DataTable oDtData = CompareTwoDataTable(oDtLocalSystemData, oDtSeverData,commonColumns);

public DataTable CompareTwoDataTable(DataTable dtOriginalTable, DataTable dtNewTable, ArrayList columnNames)
    {
        DataTable filterTable = new DataTable();
        try
        {
            filterTable = dtNewTable.Copy();
            string filterCriterial;
            if (columnNames.Count > 0)
            {
                for (int iNewTableRowCount = 0; iNewTableRowCount < dtNewTable.Rows.Count; iNewTableRowCount++)
                {
                    filterCriterial = string.Empty;
                    foreach (string colName in columnNames.ToArray())
                    {

                        filterCriterial += "ISNULL("+colName.ToString() + ",'')='" + dtNewTable.Rows[iNewTableRowCount][colName].ToString() + "' AND ";
                    }
                    filterCriterial = filterCriterial.TrimEnd((" AND ").ToCharArray());
                    DataRow[] dr = dtOriginalTable.Select(filterCriterial);
                    if (dr.Length > 0)
                    {
                        filterTable.Rows[filterTable.Rows.IndexOf(filterTable.Select(filterCriterial)[0])].Delete();
                        filterTable.AcceptChanges();
                    }
                }
            }

        }
        catch (Exception ex)
        {
        }

        return filterTable;
    } 
```

我试图将数据插入到表中，我使用了批量插入，因为我使用了相同的公共列

```
 public bool BulkInsertDataTable(string tableName, DataTable dataTable, string[] commonColumns)
    {
        bool isSuccuss;
        try
        {

            SqlConnection SqlConnectionObj = GetSQLConnection();
            SqlBulkCopy bulkCopy = new SqlBulkCopy(SqlConnectionObj, SqlBulkCopyOptions.TableLock | SqlBulkCopyOptions.FireTriggers | SqlBulkCopyOptions.UseInternalTransaction, null);
            bulkCopy.DestinationTableName = tableName;
            bulkCopy.ColumnMappings.Clear();
            for (int iDtColumnCount = 0; iDtColumnCount < dataTable.Columns.Count; iDtColumnCount++)
            {
                for (int iArrCount = 0; iArrCount < commonColumns.Length; iArrCount++)
                {
                    if (dataTable.Columns[iDtColumnCount].ColumnName.ToString().Equals(commonColumns[iArrCount].ToString()))
                    {
                        bulkCopy.ColumnMappings.Add(dataTable.Columns[iDtColumnCount].ColumnName.ToString(),
                                                    commonColumns[iArrCount].ToString());
                    }
                }
            }

            bulkCopy.WriteToServer(dataTable);
            isSuccuss = true;
        }
        catch (Exception ex)
        {
            isSuccuss = false;
        }
        return isSuccuss;
    } 
```

# java - 如何在 Gwt 中获取 @ 的密钥代码

> ID：15522894
> 
> 赞同：3
> 
> 时间：2013-03-20T11:58:28.500
> 
> 标签：java, gwt

我无法在我的代码中匹配 @ 的关键代码。我想在keydownhandler中匹配@。我采取了 shift + 2 = @ = 64

```
itemBox.addKeyDownHandler(new KeyDownHandler() {
        @Override
        public void onKeyDown(KeyDownEvent event) {
            // TODO Auto-generated method stub
            if ((int)event.getNativeKeyCode() == 64 )
            {
                System.out.println("eggheads");
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:14:39.653

我明白了，thanx 2 all

```
inputBox.addKeyPressHandler(new KeyPressHandler() {
                public void onKeyPress(KeyPressEvent event) {
            // TODO Auto-generated method stub
            System.out.println(event.getUnicodeCharCode());

            if(event.getUnicodeCharCode() == 64){
            item.add(box);
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:30:32.683

您可以使用`keyPressed`事件

```
itemBox.addKeyListener(new KeyAdapter() {
            @Override
            public void keyPressed(KeyEvent event) {
                if (event.getKeyChar() == '@' )
                            {}
            }
        }); 
```

# c# - 我可以检查数据触发器中动态资源的值吗

> ID：15522896
> 
> 赞同：1
> 
> 时间：2013-03-20T11:58:35.667
> 
> 标签：c#, wpf, datatrigger

我想根据动态资源的值切换控件样式。

```
<Image x:Name="leftImg" Stretch="Fill" Style="{StaticResource BookendImageStyle}" >
    <Image.Triggers>
        <DataTrigger Binding="{DynamicResource BlackAndWhite}" Value="True">
            <Setter TargetName="leftImg" Property="Style" Value="{StaticResource BookendImageStyleBW}" />
        </DataTrigger>
    </Image.Triggers>
</Image> 
```

这编译得很好，但在运行时我得到以下异常：

```
A 'DynamicResourceExtension' cannot be set on the 'Binding' property of type 'DataTrigger'. A 'DynamicResourceExtension' can only be set on a DependencyProperty of a DependencyObject. 
```

我试图做的事情可能吗？我只是有错误的语法吗？我应该以不同的方式来做吗？

*编辑* 我已将代码更改为：

```
<DataTemplate x:Key="ViasTemplate">
                    <StackPanel Orientation="Horizontal">
                        <Border Padding="{Binding ElementName=templateTest, Path=DataContext.GridRow.LeftBondIndent}" Width="50">
                            <Image x:Name="leftImg" Stretch="Fill" Style="{StaticResource BookendImageStyle}" >
                                <Image.Triggers>
                                    <DataTrigger Binding="{Binding Source={StaticResource BlackAndWhite}}" Value="True">
                                        <Setter TargetName="leftImg" Property="Style" Value="{StaticResource BookendImageStyleBW}" />
                                    </DataTrigger>
                                </Image.Triggers>
                            </Image> 
```

但现在得到这个例外：

```
Triggers collection members must be of type EventTrigger 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:31:55.233

```
 <Image x:Name="leftImg" Stretch="Fill" Style="{StaticResource BookendImageStyle}" >
        <Image.Triggers>
            <DataTrigger Binding="{Binding Source={DynamicResource BlackAndWhite}}" Value="True">
                <Setter TargetName="leftImg" Property="Style" Value="{StaticResource BookendImageStyleBW}" />
            </DataTrigger>
        </Image.Triggers>
    </Image> 
```

当然，您应该将此触发器移至图像样式。DataTrigger 只能在样式或模板中定义

# clojure - 如何引用动态生成的符号？

> ID：15522898
> 
> 赞同：0
> 
> 时间：2013-03-20T11:58:50.470
> 
> 标签：clojure

我正在尝试基于`static` `public`Java 类的某些字段动态创建函数。所以在一个文件中我有类似的东西：

```
(intern *ns* (symbol (get-fieldname-from-class class)) some-func) 
```

问题是我想在尚未定义的情况下调用该特定函数。

例如，Java 类有一个静态 int`PARENTHESIZED_EXPRESSION`字段。由此我生成一个`parenthesized-expression?`函数。这很好用，但是当我在`REPL`使用这个函数的中加载一个 Clojure 文件时，我得到一个

> 无法解析括号表达式？

错误。所以我必须确保符号的首先被实习。我怎样才能做到这一点？

我意识到这不是一个非常实用的方法，但我有点犹豫要为这个类的所有领域输入近 80 个类似的函数。此外，这门课可能会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:00:23.027

我想知道你是否可以通过使用这样的宏来获得：

```
user=> (defmacro f [sym] `(defn ~(symbol (str sym "?")) [x#] (= x# ~(symbol (str "java.util.Calendar/" (str sym))))))
#'user/f
user=> (f DAY_OF_MONTH)
#'user/DAY_OF_MONTH?
user=> (DAY_OF_MONTH? java.util.Calendar/DAY_OF_WEEK)
false
user=> (DAY_OF_MONTH? java.util.Calendar/DAY_OF_MONTH)
true
user=> 
```

# c# - 如何在不等待的情况下在 C# 中安全地调用异步方法

> ID：15522900
> 
> 赞同：426
> 
> 时间：2013-03-20T11:59:06.850
> 
> 标签：c#, exception, async-await, task, task-parallel-library

我有一个`async`不返回数据的方法：

```
public async Task MyAsyncMethod()
{
    // do some stuff async, don't return any data
} 
```

我从另一个返回一些数据的方法调用它：

```
public string GetStringData()
{
    MyAsyncMethod(); // this generates a warning and swallows exceptions
    return "hello world";
} 
```

在不等待的情况下调用`MyAsyncMethod()`会导致“[因为不等待此调用，当前方法在调用完成之前继续运行](http://msdn.microsoft.com/en-gb/library/hh965065.aspx)”警告在 Visual Studio 中。在该警告的页面上，它指出：

> 仅当您确定不想等待异步调用完成并且**被调用的方法不会引发任何异常时**，才应考虑取消警告。

我确定我不想等待通话完成；我不需要也没有时间。**但是调用*可能会*引发异常。**

我偶然发现了这个问题几次，我确信这是一个常见的问题，必须有一个共同的解决方案。

**如何在不等待结果的情况下安全地调用异步方法？**

# 更新：

对于建议我等待结果的人来说，这是响应我们 Web 服务 (ASP.NET Web API) 上的 Web 请求的代码。在 UI 上下文中等待使 UI 线程保持空闲，但在 Web 请求调用中等待将等待任务完成后再响应请求，从而无缘无故地增加响应时间。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2013-03-20T12:59:55.417

如果你想“异步”获取异常，你可以这样做：

```
 MyAsyncMethod().
    ContinueWith(t => Console.WriteLine(t.Exception),
        TaskContinuationOptions.OnlyOnFaulted); 
```

这将允许您处理“主”线程以外的线程上的异常。这意味着您不必“等待” `MyAsyncMethod()`来自调用 ; 的线程的调用`MyAsyncMethod`。但是，仍然允许您对异常执行某些操作——但前提是发生异常。

# 更新：

从技术上讲，你可以做类似的事情`await`：

```
try
{
    await MyAsyncMethod().ConfigureAwait(false);
}
catch (Exception ex)
{
    Trace.WriteLine(ex);
} 
```

`try`...如果您需要专门使用/ `catch`（或） ，这将很有用，`using`但我发现`ContinueWith`更明确一点，因为您必须知道什么[`ConfigureAwait(false)`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task.configureawait(v=vs.110).aspx)意思。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-03-20T12:39:02.357

您应该首先考虑创建`GetStringData`一个`async`方法并让它`await`从`MyAsyncMethod`.

如果您绝对确定不需要处理异常`MyAsyncMethod` *或*知道它何时完成，那么您可以这样做：

```
public string GetStringData()
{
  var _ = MyAsyncMethod();
  return "hello world";
} 
```

顺便说一句，这不是“常见问题”。很少有人想要执行一些代码而不关心它是否完成*而不*关心它是否成功完成。

**更新：**

由于您使用 ASP.NET 并希望早点返回，您可能会发现我[关于该主题的博客文章很有用](http://blog.stephencleary.com/2012/12/returning-early-from-aspnet-requests.html)。但是，ASP.NET 并不是为此而设计的，并且无法*保证*您的代码在响应返回后会运行。ASP.NET 会尽最大努力让它运行，但不能保证。

所以，对于简单的事情来说，这是一个很好的解决方案，比如将一个事件扔到一个日志中，如果你在这里和那里丢失一些事件并不重要*。*对于任何类型的关键业务操作来说，这都不是一个好的解决方案。在这些情况下，您*必须*采用更复杂的体系结构，以持久的方式保存操作（例如，Azure 队列、MSMQ）和单独的后台进程（例如，Azure Worker Role、Win32 服务）来处理它们。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2013-03-20T15:49:46.090

Peter Ritchie 的回答正是我想要的，[Stephen Cleary](http://blog.stephencleary.com/2012/12/returning-early-from-aspnet-requests.html)关于尽早返回 ASP.NET 的文章非常有帮助。

然而，作为一个更普遍的问题（不是特定于 ASP.NET 上下文），以下控制台应用程序演示了 Peter 的答案的用法和行为，使用`Task.ContinueWith(...)`

```
static void Main(string[] args)
{
  try
  {
    // output "hello world" as method returns early
    Console.WriteLine(GetStringData());
  }
  catch
  {
    // Exception is NOT caught here
  }
  Console.ReadLine();
}

public static string GetStringData()
{
  MyAsyncMethod().ContinueWith(OnMyAsyncMethodFailed, TaskContinuationOptions.OnlyOnFaulted);
  return "hello world";
}

public static async Task MyAsyncMethod()
{
  await Task.Run(() => { throw new Exception("thrown on background thread"); });
}

public static void OnMyAsyncMethodFailed(Task task)
{
  Exception ex = task.Exception;
  // Deal with exceptions here however you want
} 
```

`GetStringData()`提前返回而不等待`MyAsyncMethod()`，并且抛出的异常在`MyAsyncMethod()`in`OnMyAsyncMethodFailed(Task task)`而**不是**在`try`/ `catch`around中处理`GetStringData()`

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-03-15T18:22:36.897

我最终得到了这个解决方案：

```
public async Task MyAsyncMethod()
{
    // do some stuff async, don't return any data
}

public string GetStringData()
{
    // Run async, no warning, exception are catched
    RunAsync(MyAsyncMethod()); 
    return "hello world";
}

private void RunAsync(Task task)
{
    task.ContinueWith(t =>
    {
        ILog log = ServiceLocator.Current.GetInstance<ILog>();
        log.Error("Unexpected Error", t.Exception);

    }, TaskContinuationOptions.OnlyOnFaulted);
} 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-01-21T09:51:12.287

这被称为“一劳永逸”，并且有一个[扩展](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualstudio.threading.tplextensions.forget?view=visualstudiosdk-2017)。

> 消耗一个任务并且不做任何事情。对于异步方法中对异步方法的即发即弃调用很有用。

安装[nuget 包](https://www.nuget.org/packages/Microsoft.VisualStudio.Threading/)。

采用：

```
MyAsyncMethod().Forget(); 
```

编辑：我最近一直在使用[另一种方法：](https://stackoverflow.com/questions/59048102/c-sharp-fire-and-forget-task-and-discard)

```
_ = MyAsyncMethod(); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-11-01T05:18:14.250

不是最佳实践，您应该尝试避免这种情况。

但是，为了解决“在 C# 中调用异步方法而不使用等待”，您可以在`Task.Run`. 这种方法将等到`MyAsyncMethod`完成。

```
public string GetStringData()
{
    Task.Run(()=> MyAsyncMethod()).Result;
    return "hello world";
} 
```

`await`异步解开`Result`您的任务，而仅使用**Result**会阻塞，直到任务完成。

如果你想把它包装在一个辅助类中：

```
public static class AsyncHelper
{
    public static void Sync(Func<Task> func) => Task.Run(func).ConfigureAwait(false);

    public static T Sync<T>(Func<Task<T>> func) => Task.Run(func).Result;

} 
```

并打电话给

```
public string GetStringData()
{
    AsyncHelper.Sync(() => MyAsyncMethod());
    return "hello world";
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-12-01T08:24:00.183

我在这里聚会迟到了，但是我一直在使用一个很棒的库，我在其他答案中没有看到它

[https://github.com/brminnick/AsyncAwaitBestPractices](https://github.com/brminnick/AsyncAwaitBestPractices)

如果你需要“Fire And Forget”，你可以调用任务的扩展方法。

将操作 onException 传递给调用可确保您获得两全其美 - 无需等待执行并减慢用户速度，同时保留以优雅方式处理异常的能力。

在您的示例中，您将像这样使用它：

```
 public string GetStringData()
    {
        MyAsyncMethod().SafeFireAndForget(onException: (exception) =>
                    {
                      //DO STUFF WITH THE EXCEPTION                    
                    }); 
        return "hello world";
    } 
```

它还提供了可等待的 AsyncCommands 实现 ICommand 开箱即用，这对我的 MVVM Xamarin 解决方案非常有用

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-20T12:02:29.673

我想问题出现了，你为什么需要这样做？在 C# 5.0 中的原因`async`是您可以等待结果。这个方法实际上并不是异步的，只是简单的一次调用，以免过多干扰当前线程。

也许启动一个线程并让它自己完成可能会更好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-16T06:34:43.730

在具有消息循环的技术上（不确定 ASP 是否是其中之一），您可以阻塞循环并处理消息，直到任务结束，并使用 ContinueWith 解除对代码的阻塞：

```
public void WaitForTask(Task task)
{
    DispatcherFrame frame = new DispatcherFrame();
    task.ContinueWith(t => frame.Continue = false));
    Dispatcher.PushFrame(frame);
} 
```

这种方法类似于阻止 ShowDialog 并仍然保持 UI 响应。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-07-31T19:29:58.090

解决方案是将 HttpClient 启动到另一个没有 sincronization 上下文的执行任务中：

```
var submit = httpClient.PostAsync(uri, new StringContent(body, Encoding.UTF8,"application/json"));
var t = Task.Run(() => submit.ConfigureAwait(false));
await t.ConfigureAwait(false); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-11-27T20:29:06.367

通常异步方法返回 Task 类。如果您使用`Wait()`方法或`Result`属性并且代码抛出异常 - 异常类型被包裹到`AggregateException`- 那么您需要查询`Exception.InnerException`以找到正确的异常。

但也可以使用`.GetAwaiter().GetResult()`它——它也会等待异步任务，但不会包装异常。

所以这里是一个简短的例子：

```
public async Task MyMethodAsync()
{
}

public string GetStringData()
{
    MyMethodAsync().GetAwaiter().GetResult();
    return "test";
} 
```

您可能还希望能够从异步函数返回一些参数 - 这可以通过`Action<return type>`在异步函数中提供额外的来实现，例如：

```
public string GetStringData()
{
    return MyMethodWithReturnParameterAsync().GetAwaiter().GetResult();
}

public async Task<String> MyMethodWithReturnParameterAsync()
{
    return "test";
} 
```

请注意，异步方法通常具有`ASync`后缀命名，只是为了能够避免同名同步函数之间发生冲突。（例如`FileStream.ReadAsync`） - 我已更新函数名称以遵循此建议。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-11-19T10:35:39.453

也许我太天真了，但是，您不能创建一个在调用 GetStringData() 时引发的事件并附加一个调用并等待异步方法的 EventHandler 吗？

就像是：

```
public event EventHandler FireAsync;

public string GetStringData()
{
   FireAsync?.Invoke(this, EventArgs.Empty);
   return "hello world";
}

public async void HandleFireAsync(object sender, EventArgs e)
{
   await MyAsyncMethod();
} 
```

在代码中的某处附加和分离事件：

```
FireAsync += HandleFireAsync;

(...)

FireAsync -= HandleFireAsync; 
```

不确定这是否可能是反模式（如果是，请告诉我），但它会捕获异常并从 GetStringData() 快速返回。

# mysql - mysql联合优化

> ID：15522907
> 
> 赞同：0
> 
> 时间：2013-03-20T11:59:19.723
> 
> 标签：mysql, performance, union

**查询 1**

```
(
SELECT 
    a.image_name, a.member_id, b.username, c.image_alt , c.img_id, 
a.total_views, c.island_id, c.personal, c.date_upload, COUNT(d.img_id) AS numComm  
FROM 
    members_stats_images a, members b, members_images c, members_images_comments d  
WHERE 
    c.island_id='$island_id'  AND 
    c.personal='N' AND 
    c.approved='Y' AND
    c.is_other<>'Y' AND   
    c.member_id=b.member_id AND 
    a.member_id=b.member_id AND 
    a.image_name=c.image_name AND 
    d.img_id=c.img_id 
GROUP BY 
    d.img_id 
)
UNION 
(
SELECT 
    a.image_name, a.member_id, b.username, c.image_alt , c.img_id, 
a.total_views, c.island_id, c.personal, c.date_upload, 0 AS numComm  
FROM 
    members_stats_images a, members b, members_images c 
WHERE 
    c.island_id='$island_id' AND 
    c.personal='N' AND 
    c.approved='Y' AND 
    c.is_other<>'Y' AND 
    c.member_id=b.member_id AND 
    a.member_id=b.member_id AND 
    a.image_name=c.image_name AND 
    c.img_id NOT IN (SELECT img_id FROM members_images_comments GROUP BY img_id) 
)           

ORDER BY 
    numComm DESC, date_upload DESC 
LIMIT 
    $set_limit, $li 
```

**查询 2**

```
(
SELECT 
    a.image_name, a.member_id, b.username, c.image_alt , c.img_id, 
a.total_views, c.island_id, c.personal, c.date_upload, COUNT(e.img_id) AS numComm  
FROM 
    members_stats_images a, members b, members_images c, members_photo_see_do d,
 members_images_comments e  
WHERE 
    c.island_id='$island_id' AND 
    c.personal='N' AND 
    c.approved='Y' AND 
    c.is_other<>'Y' AND 
    c.member_id=b.member_id AND 
    a.member_id=b.member_id AND 
    a.image_name=c.image_name AND 
    c.img_id=d.img_id AND 
    d.village_id='$village_id' AND 
    e.img_id=c.img_id 
GROUP BY 
    e.img_id 
)
UNION 
(
SELECT 
    a.image_name, a.member_id, b.username, c.image_alt , c.img_id, 
a.total_views, c.island_id, c.personal, c.date_upload, 0 AS numComm  
FROM 
    members_stats_images a, members b, members_images c, members_photo_see_do d 
WHERE 
    c.island_id='$island_id' AND 
    c.personal='N' AND 
    c.approved='Y' AND 
    c.is_other<>'Y' AND 
    c.member_id=b.member_id AND 
    a.member_id=b.member_id AND 
    a.image_name=c.image_name AND 
    c.img_id=d.img_id AND 
    d.village_id='$village_id' AND 
    c.img_id NOT IN (SELECT img_id FROM members_images_comments GROUP BY img_id)
)           

ORDER BY 
    numComm DESC, date_upload DESC 
LIMIT 
    $set_limit, $limit 
```

如您所见，这两个查询非常相似。

第二个查询在几秒钟内执行，而第一个查询在 2 分钟以上执行。

任何人都可以提出任何改进第一个查询的建议吗？

**注意：**所有涉及的表在所有 id 字段中都有索引。

**编辑** 根据@G-Nugget 的建议，我使用 JOIN 编写了上述查询，例如：

```
 SELECT  
        c.img_id, c.image_name, c.member_id, c.image_alt, c.island_id, c.personal, c.date_upload, b.username,  c.island_id, c.personal, c.date_upload, 
        a.total_views,  
        COUNT(e.img_id) AS numComm 
    FROM members_images AS c 
    LEFT JOIN members_stats_images AS a ON c.image_name=a.image_name AND c.member_id=a.member_id
    LEFT JOIN members AS b ON c.member_id=b.member_id 
    LEFT JOIN members_photo_see_do AS d ON c.img_id=d.img_id 
    LEFT JOIN members_images_comments AS e ON c.img_id=e.img_id 
    WHERE 
    c.island_id='$island_id' AND 
    c.personal='N' AND 
    c.approved='Y' AND 
    c.is_other<>'Y' AND 
    d.see_id='$see_id' 
    GROUP BY c.img_id 
```

它现在完美地执行，没有延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:33:03.553

由于这两个查询之间的唯一区别是添加了`members_photo_see_do`表，显然缺少一个索引来支持从它到`members_images`.

如果没有关于查询和表定义的更多信息，就不可能说得更多。

此外，您会发现使用现代 JOIN 语法大大简化了查询的阅读和思考。如果您采用它，您还会发现这里的成员更乐于帮助您。请在回电时使用它写下您的查询。

# asp.net-mvc - 使用旧参数调用的控制器操作

> ID：15522909
> 
> 赞同：3
> 
> 时间：2013-03-20T11:59:33.543
> 
> 标签：asp.net-mvc, asp.net-mvc-4

在我公司，我们无法为每个新请求实例化控制器。我们必须将它存储在会话中并每次都重新使用它，我知道这是错误的，但我们必须在请求之间保持控制器的状态。所以这就是我们所做的：

我们创建了这个控制器工厂：

```
public class SGVControllerFactory : IControllerFactory
    {

        public IController CreateController(RequestContext requestContext, string controllerName)
        {
            string _SessionId = controllerName + "Controller";
            foreach (var _Object in HttpContext.Current.Session)
            {
                if (_Object.ToString() == _SessionId)
                {
                    IController _Controller = (IController)HttpContext.Current.Session[_Object.ToString()];

                    return _Controller;
                }
            }
            return null;
        }

        public SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, string controllerName)
        {
            return SessionStateBehavior.Default;
        }

        public void ReleaseController(IController controller)
        {
            //We never release our controllers!!!
        }
    } 
```

我们有这个基本控制器：

```
public class SGVController : Controller
    {
        protected override void Execute(RequestContext requestContext)
        {
            if (requestContext == null)
            {
                throw new ArgumentNullException("requestContext");
            }
            if (requestContext.HttpContext == null)
            {
                throw new ArgumentException("Http context is null", "requestContext");
            }

            Initialize(requestContext);

            using (ScopeStorage.CreateTransientScope())
            {                
                ExecuteCore();
                Dispose();
            }
        }

    } 
```

这个控制器类与默认的 MVC 控制器唯一不同的是它不限制自己只被调用一次。

现在，我的问题是.. 如果我有这个动作：

```
public JsonResult Foo(string Bar) {
 return Json(new List<string> { Bar, Bar });
} 
```

'Bar' 参数将具有第一次调用操作的值。我找不到任何可以解释的东西。请求参数字典具有正确的值，但操作仍获取旧值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:01:06.170

您可以尝试通过重写 Initialize 方法来重新初始化 ValueProvider 和 TempData 以处理新值。

```
public class SGVController : Controller
{

  protected override void Initialize(RequestContext requestContext)
   {
    this.TempData = null;
    this.ValueProvider = null;

    base.Initialize(requestContext);
   }        

    protected override void Execute(RequestContext requestContext)
    {
        if (requestContext == null)
        {
            throw new ArgumentNullException("requestContext");
        }
        if (requestContext.HttpContext == null)
        {
            throw new ArgumentException("Http context is null", "requestContext");
        }

        Initialize(requestContext);

        using (ScopeStorage.CreateTransientScope())
        {                
            ExecuteCore();
            Dispose();
        }
    }
} 
```

希望这会有所帮助，

# mysql - Zend 框架 - 和 where 子句

> ID：15522910
> 
> 赞同：1
> 
> 时间：2013-03-20T11:59:33.497
> 
> 标签：mysql, zend-framework, where-clause

我正在研究 Zend 框架，在查询中遇到 1 个问题，我想从 tbl_user 获取用户 ID 并想在 where 子句中使用 And 检查记录

```
here is my query
$sql=$this->select()->from(users)->where('email = ? ', trim($email) , 'password = ?', md5(trim($password)) ); 
```

当我打印查询时，它会打印

```
select * from users where email = 'test@gmail.com'; 
```

我想打印查询

```
select * from users where email = 'test@gmail.com' AND password='123456'; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:03:23.947

你很亲密。您只需要调用该`where()`方法两次：

```
$this->select()->from(users)->where('email = ?', trim($email))
                            ->where('password = ?', md5(trim($password))); 
```

# nhibernate - 调试时关闭 NHib 验证器日志记录

> ID：15522913
> 
> 赞同：0
> 
> 时间：2013-03-20T11:59:40.957
> 
> 标签：nhibernate, nhibernate-validator

当我在具有 NHibValidator 依赖项的项目中将 log4net 设置为 DEBUG 时，我收到了*很多*来自 NHibValidator 的反馈。然而，当验证器不是调试运行的焦点时，这只是噪音。

有谁知道如何过滤掉这个？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:49.100

您应该能够使用常规 log4net 配置来指定验证器使用的记录器名称的记录级别。请参阅[http://logging.apache.org/log4net/release/manual/configuration.html#loggers](http://logging.apache.org/log4net/release/manual/configuration.html#loggers)。

# android - 如何将动态视图恢复到 android 应用程序？

> ID：15522915
> 
> 赞同：1
> 
> 时间：2013-03-20T11:59:47.820
> 
> 标签：android

我正在创建动态视图，将它们添加到布局中，这些视图添加得很好。但是一旦我关闭应用程序并打开它，动态视图就不可见，我想在第二次打开应用程序后显示这些视图。你能给我任何想法吗，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:08:01.020

您必须手动将视图的状态添加到已保存的实例状态包中，然后从那里重新创建它。

这是通过覆盖`onSaveInstanceState()`您的`Activity`和/或`View`. 该状态稍后将在创建`Bundle`( `onCreate(bundle)`) 中可用。您可以使用该数据重新实例化您的视图。

正确的 OOP 方式是为实现自定义`onSaveInstanceState()`方法的动态创建的视图创建一个类，然后将其打包并解压缩到 Activity 的包中。

此[博客文章](http://www.charlesharley.com/2012/programming/views-saving-instance-state-in-android/)包含有关如何解决该问题的详细信息和示例。[这个其他SO问题中的一些更多相关信息](https://stackoverflow.com/questions/3542333/how-to-prevent-custom-views-from-losing-state-across-screen-orientation-changes/3542895#3542895)

# css - CSS3 过渡和边框

> ID：15522921
> 
> 赞同：4
> 
> 时间：2013-03-20T12:00:06.050
> 
> 标签：css, css-transitions

我正在尝试对该网页上的菜单进行逆向工程（这只是一个个人项目，而不是试图窃取他们的工作）。

[http://clapat.ro/themes/11/color/](http://clapat.ro/themes/eleven/color/)

但是，我似乎无法让过渡效果发挥作用。当我添加边框顶部时，它会推动向下的内容，而不是像示例中那样保持良好的内联。

此外，边界似乎向上“盲目”，但当我这样做时，它会向下盲目。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:24:01.540

这导致了问题：

```
.nav > li > a {
    display: block;
} 
```

这是来自 bootstrap.css 如果你删除那一点 CSS 它可以正常工作。

您可以通过添加以下内容来覆盖 index2.php 中的该样式`display: inline;`：

```
.navbar a, .navbar a:active, .navbar a:visited {
    color: #7f7f7f;
    padding-top: 35px;
    height: 90px;
    text-transform: uppercase;
    font-weight: bold;
    font-size: 14px;
    padding-bottom: 45px;
    display: inline;         /* added this line */
} 
```

# asp.net-mvc - 以下代码仅适用于 Fx 3.6、IE 8、IE 7 和 Chrome .html 但不适用于 .cshtml？

> ID：15522938
> 
> 赞同：0
> 
> 时间：2013-03-20T12:01:11.717
> 
> 标签：asp.net-mvc, razor

示例 JS 代码如下：

```
<style >
    #preview_ie {
    FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)
  }  
    </style>
     <script type="text/javascript">
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new window.FileReader();

            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            };
            reader.readAsDataURL(input.files[0]);
        }
             var newPreview = document.getElementById("preview_ie");
             newPreview.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src =input.value;
             newPreview.style.width = "160px";
             newPreview.style.height = "120px";
         }  
        </script> 
```

以及相关的 HTML：

```
<body>
    <form id="form1" runat="server">
        <input type='file' onchange="readURL(this);" />
        <img id="blah" src="#" alt="your image" />
    </form>
</body> 
```

. 适用于 IE7、IE8、FF 和 Chrome 所有浏览器。但问题是我使用 mvc 3.0 razor 应用程序以 .cshtml 形式集成在 IE8 中的时间问题。简单的文件扩展名是 .html 工作很好。那我该怎么办？

# android - How to refresh list View in android?

> ID：15522944
> 
> 赞同：0
> 
> 时间：2013-03-20T12:01:18.257
> 
> 标签：android, android-listview, refresh

I am using .net web services. I am trying to get list in `ListView`. Right now it is showing me the first list, but when I am trying to get it again using the same method it is giving me a response in log but not displaying in list.

I have used `mAdapter.notifyDataSetChanged();` in my `Adapter` but it's not working. Please help. thanks

My code:

```
Intent mIntent = getIntent();
    mIntent.getStringExtra("folder_name");
    Id = mIntent.getStringExtra("folder_ID");
    mIntent.getStringExtra("item_parent");
    User_ID = mIntent.getStringExtra("User_ID");

    subfolderTreedata();   
}
    public void subfolderTreedata() {
    try {
  --------
  --------
  --------  //some code here...

 SoapObject SubfolderResponse = (SoapObject)envelope.getResponse();

        Log.i("SubFolders", SubfolderResponse.toString());

        String File_Ext=" ";

        subfoldersitem = new String[SubfolderResponse.getPropertyCount()];

        System.out.println(subfoldersitem.length);

        for(int i=0; i < SubfolderResponse.getPropertyCount(); i++) {
            SoapObject SingleSubFolder = (SoapObject)SubfolderResponse.getProperty(i);

            subfoldersitem[0] = SingleSubFolder.getProperty(1).toString();
            subfoldersitem[1] = SingleSubFolder.getProperty(0).toString();
            subfoldersitem[2] = SingleSubFolder.getProperty(3).toString();

            if(KEY_SUBJECTTYPE.equalsIgnoreCase("Folder")) {

            item = new FolderList(Folderimages[0], subfoldersitem[0], subfoldersitem[1], subfoldersitem[2]);
            Subfolderdata.add(item);

            } else{

                StringTokenizer tokens = new StringTokenizer(Name, ".");
                @SuppressWarnings("unused")
                String first_string = tokens.nextToken();
                File_Ext = tokens.nextToken();

                    if(File_Ext.equalsIgnoreCase("TIF")) {
                        item = new FolderList(TIFimages[0], subfoldersitem[0], subfoldersitem[1], subfoldersitem[2]);
                        Subfolderdata.add(item);

                    } else {
                        item = new FolderList(noImage[0], subfoldersitem[0], subfoldersitem[1], subfoldersitem[2]);
                        Subfolderdata.add(item);  }
        }
    }
            subfolderslistview = (ListView)findViewById(R.id.subfolderslistview);

            mAdapter = new LazyAdapter(this, R.layout.jpg_row, Subfolderdata);
            subfolderslistview.setAdapter(mAdapter);
            mAdapter.notifyDataSetChanged();

            subfolderslistview.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

                    LazyAdapter ca = (LazyAdapter)parent.getAdapter();
                    FolderList item_name = (FolderList)ca.getItem(position);
                    FolderList DocumentID = (FolderList)ca.getItem(position);
                    FolderList type = (FolderList)ca.getItem(position);

                    Intent mIntent = new Intent();  
                    mIntent.putExtra("item_name", item_name.folder_name);
                    mIntent.putExtra("item_id", DocumentID.ID);
                    mIntent.putExtra("item_type", type.type);

                    mIntent.getStringExtra("item_name");

                    String Type = mIntent.getStringExtra("item_type");

                    Log.i("Type", Type);

                    if(Type.equalsIgnoreCase("Folder")){

                        Id = mIntent.getStringExtra("item_id");
                        mAdapter.notifyDataSetChanged();
                        subfolderTreedata();

                    } else {

                        Intent i = new Intent(getApplicationContext(), Display_image.class);
                        i.putExtra("item_name", item_name.folder_name);
                        i.putExtra("ID", DocumentID.ID);
                        i.putExtra("item_type", type.type);
                        i.putExtra("User_ID",User_ID);

                        i.getStringExtra("item_name");
                        Id = i.getStringExtra("ID");
                        i.getStringExtra("item_type");
                        Log.i("id", Id);
                        startActivity(i);
                        }
                     }
                 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:29:41.743

```
public void list() {
    mAdapter = new LazyAdapter(this, R.layout.jpg_row, Subfolderdata);
    subfolderslistview.setAdapter(mAdapter);
} 
```

Use like this `list();`.

Call this method from Where do you want.

# linux - 如何从驱动程序代码中提取接口的 MAC 地址

> ID：15522948
> 
> 赞同：1
> 
> 时间：2013-03-20T12:01:36.383
> 
> 标签：linux, linux-kernel, linux-device-driver

我是 Linux 内核编程和驱动程序编程的新手。我正在使用内核版本 2.6.32-37 的 Linux 上的 madwifi 驱动程序，并希望在驱动程序代码中提取接口的 MAC 地址。我知道这些信息应该在*netdevice*结构字段中找到，但不太确定其中哪一个是正确的。

我的问题是：

1.  *dev 和 *real 有什么区别？
2.  我应该使用其中哪一个？（它们都在代码的不同部分使用，我不明白什么时候应该使用前者，什么时候使用后者）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:04:49.933

引用[http://www.makelinux.net/ldd3/chp-17-sect-3](http://www.makelinux.net/ldd3/chp-17-sect-3)：

> 无符号字符 dev_addr[MAX_ADDR_LEN];
> 
> 硬件 (MAC) 地址长度和设备硬件地址。以太网地址长度为六个八位字节（我们指的是接口板的硬件ID），广播地址由六个0xff八位字节组成；ether_setup 安排这些值是正确的。另一方面，设备地址必须以设备特定的方式从接口板上读取，驱动程序应将其复制到 dev_addr。在将数据包移交给驱动程序进行传输之前，硬件地址用于生成正确的以太网标头。snull 设备不使用物理接口，它发明了自己的硬件地址。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-03T11:57:25.943

网络驱动程序中有访问/设置 MAC 地址的代码。

甚至定义了一个回调`net_device_ops`

```
.ndo_set_mac_address = netdev_set_mac_address 
```

根据硬件寄存器架构，它在每个网络设备上的处理方式不同。例如，Xilinx AXI MAC 地址被写入`net_device`网络控制器的结构和特定硬件寄存器：

```
static void axienet_set_mac_address(struct net_device *ndev, void *address)
{
struct axienet_local *lp = netdev_priv(ndev);

if (address)
    memcpy(ndev->dev_addr, address, ETH_ALEN);
if (!is_valid_ether_addr(ndev->dev_addr))
    eth_random_addr(ndev->dev_addr);

/* Set up unicast MAC address filter set its mac address */
axienet_iow(lp, XAE_UAW0_OFFSET,
        (ndev->dev_addr[0]) |
        (ndev->dev_addr[1] << 8) |
        (ndev->dev_addr[2] << 16) |
        (ndev->dev_addr[3] << 24));
axienet_iow(lp, XAE_UAW1_OFFSET,
        (((axienet_ior(lp, XAE_UAW1_OFFSET)) &
          ~XAE_UAW1_UNICASTADDR_MASK) |
         (ndev->dev_addr[4] |
         (ndev->dev_addr[5] << 8))));
} 
```

因此，一旦设置了 MAC 地址，像**ifconfig**这样的命令就不会从访问硬件寄存器的设备驱动程序中获取它，而是从`net_device`结构中获取它。

# iphone - 一些来自 NSSearchPathDirectory 枚举的目的

> ID：15522949
> 
> 赞同：0
> 
> 时间：2013-03-20T12:01:36.540
> 
> 标签：iphone, ios, cocoa-touch

我如何使用枚举 NSMoviesDirectory 或 NSMusicDirectory。文档说我们可以从 ios 4 开始使用他们的，但在我的应用程序中我找不到任何方法如何在那里复制文件？如果我们不能使用它们，为什么苹果会添加这些枚举？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:43:03.710

默认情况下，“电影”、“音乐”和“图片”不会在目录中。您必须创建路径并放置数据文件。

例如：`NSMoviesDirectory`

```
NSArray * paths = NSSearchPathForDirectoriesInDomains (NSMoviesDirectory,NSUserDomainMask, YES);
NSString * documentsDirectory = [paths objectAtIndex:0];
NSError * error;
if (![[NSFileManager defaultManager] fileExistsAtPath: documentsDirectory])
{
   [[NSFileManager defaultManager] createDirectoryAtPath:documentsDirectory withIntermediateDirectories:NO attributes:nil error:&error];
   NSString * resourceDBFolderPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"sleep.mp4"];
   [[NSFileManager defaultManager] copyItemAtPath:resourceDBFolderPath toPath:[documentsDirectory stringByAppendingPathComponent:@"sleep.mp4"] error:&error];

}
else
{
   NSString * resourceDBFolderPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"sleep.mp4"];
  [[NSFileManager defaultManager] copyItemAtPath:resourceDBFolderPath toPath:[documentsDirectory stringByAppendingPathComponent:@"sleep.mp4"] error:&error];

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T12:34:00.103

只需编写一个示例，默认情况下不存在音乐目录（或其他内容），您应该以编码方式创建它。样本：

```
- (void)testDir
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSMusicDirectory, NSUserDomainMask, YES);
    NSString *musicDirectory = [paths objectAtIndex:0];
    NSFileManager *defaultFileManager = [NSFileManager defaultManager];
    if (![defaultFileManager fileExistsAtPath:musicDirectory]) {
        [defaultFileManager createDirectoryAtPath:musicDirectory withIntermediateDirectories:NO attributes:nil error:NULL];
    }
    NSString *testDataFilePath = [musicDirectory stringByAppendingPathComponent:@"test.mp3"];
    unsigned int bufferLength = 1024;
    void *buffer = malloc(1024 * sizeof(char));
    NSData *testData = [[NSData alloc] initWithBytes:buffer length:bufferLength];
    free(buffer); buffer = NULL;
    if (![testData writeToFile:testDataFilePath atomically:NO]) {
        NSLog(@"fail to save data");
    }
    [testData release]; testData = nil;
} 
```

# machine-learning - 使用贝叶斯网络对新实例进行分类

> ID：15522950
> 
> 赞同：1
> 
> 时间：2013-03-20T12:01:37.140
> 
> 标签：machine-learning, classification, bayesian-networks

假设我有以下贝叶斯网络：

![在此处输入图像描述](../Images/2bca4f1ff8bdd9f50701a6f5d80efefa.png)

而且我想在 H=true 或 H=false 上对新实例进行分类，新实例看起来像这样：`Fl=true, A=false, S=true, and Ti=false`。

如何根据 H 对实例进行分类？

我可以通过将表中的概率相乘来计算概率：

`0.4 * 0.7 * 0.5 * 0.2 = 0.028`

这说明了新实例是否是正实例 H？

**编辑** 我将尝试根据 Bernhard Kausler 的建议计算概率：

所以这是贝叶斯规则： `P(H|S,Ti,Fi,A) = P(H,S,Ti,Fi,A) / P(S,Ti,Fi,A)`

计算分母： `P(S,Ti,Fi,A) = P(H=T,S,Ti,Fi,A)+P(H=F,S,Ti,Fi,A) = (0.7 * 0.5 * 0.8 * 0.4 * 0.3) + (0.3 * 0.5 * 0.8 * 0.4 * 0.3) =0.048`

`P(H,S,Ti,Fi,A) = 0.336`

所以`P(H|S,Ti,Fi,A) = 0.0336 / 0.048 = 0.7`

现在我计算`P(H=false|S,Ti,Fi,A) = P(H=false,S,Ti,Fi,A) / P(S,Ti,Fi,A)` 我们已经有了`P(S,Ti,Fi,A´. I's ´0.048`.

`P(H=false,S,Ti,Fi,A) =0.0144`

所以`P(H=false|S,Ti,Fi,A) = 0.0144 / 0.048 = 0.3`

的概率`P(H=true,S,Ti,Fi,A)`是最高的。所以新实例将被分类为**H=True**

这个对吗？

**加法：**我们不需要计算`P(H=false|S,Ti,Fi,A)`，因为它是 1 - `P(H=true|S,Ti,Fi,A)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:14:57.740

所以，你想计算条件概率`P(H|S,Ti,Fi,A)`。为此，您必须使用贝叶斯规则：

```
P(H|S,Ti,Fi,A) = P(H,S,Ti,Fi,A) / P(S,Ti,Fi,A) 
```

在哪里

```
P(S,Ti,Fi,A) = P(H=T,S,Ti,Fi,A)+P(H=F,S,Ti,Fi,A) 
```

然后计算两个条件概率 P(H=T|S,Ti,Fi,A) 和 P(H=F|S,Ti,Fi,A) 并根据哪个概率更高进行预测。

只是像你一样将数字相乘并没有帮助，甚至不会给你一个适当的概率，因为产品没有标准化。

# php - WordPress中的自定义分页

> ID：15522953
> 
> 赞同：0
> 
> 时间：2013-03-20T12:01:52.280
> 
> 标签：php, wordpress, pagination

我正在为主页、搜索页面、档案和作者页面上的帖子开发[这种类型的分页。](http://i.imgur.com/eSlHsIH.jpg)我正在请求服务器显示提交的值（当前页码），如果页面表单值为空，则使用 1。我正在取值并将它们显示在同一页面上。

但是，我无法弄清楚为什么它不起作用。这是我的代码片段：

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'GET')
{
    global $paged;
    if(empty($paged))
        $paged = 1;
    else
    {
        $paged = $_GET['paged'];
    }
    if(isset($paged) && is_numeric($paged) && ($paged <= $pages) && ($paged >= 1))    //validation
    {
        if($pages == '')
        {
            global $wp_query;
            $pages = $wp_query->max_num_pages;
            if(!$pages)
                $pages = 1;
        }

        if(1 != $pages)
        {
            ?>

            <form action="#" method="get" >Page
                <input type="text" name="paged" value="<?php echo $paged; ?>">
                of <?php echo $pages; ?>
                <input type="submit">
            </form>

            <?php
            if($paged > 1)
                echo "<a href='" . get_pagenum_link($paged - 1) . "'>&lsaquo; Prev Page</a>";
            if($paged < $pages)
                echo "<a href=\"" . get_pagenum_link($paged + 1) . "\">Next Page &rsaquo;</a>";
        }
    }
}
?> 
```

# php - 标头（jquery mobile 中的位置不起作用

> ID：15522954
> 
> 赞同：0
> 
> 时间：2013-03-20T12:01:53.430
> 
> 标签：php, jquery-mobile

如果我使用jquery mobile，我的标题（“位置：index.php”）有问题，那么页面不会进入index.php 有解决方案吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-27T09:16:58.573

放入`data-ajax="false"`FORM 的属性中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:05:02.393

我不认为你的*标题*电话是问题。

看这里，看看这是否可以帮助您找到问题。

[PHP header() 和 jquery mobile](https://stackoverflow.com/questions/8403242/php-header-and-jquery-mobile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:05:21.843

如果在调用函数之前有任何输出，则标头函数不起作用。它应该在页面的顶部，如果你不能把它放在页面中的 doctype 声明之前，你可能会破坏 php 代码并输入 html 并像这样重定向：

```
//php code
?>
<meta http-equiv="refresh" content="0;URL='//URLAddrEss'">
<?php
// continue php code 
```

或者，如果您使用 javascript，您也可以使用 javascript 进行重定向。

# api - Google Plus Login API 在生产服务器上不起作用

> ID：15522958
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:02:05.087
> 
> 标签：api, login, google-plus

我已经在开发服务器上实现了 google plus api，它工作正常。我在生产服务器上使用了相同的代码。但是在请求许可后，需要很长时间才能返回我的站点并登录。

谁能告诉我可能是什么原因。我用过oauth2。

下面是我正在使用的代码

```
<?php
session_start();
require_once 'googleplus/src/Google_Client.php';
require_once 'googleplus/src/contrib/Google_Oauth2Service.php';

class Webpage_UserGPlusLogin extends Webpage
{
    public function __construct()
    {
        $temp_redirect = $_SESSION['RETURN_URL_AFTERLOGIN'];
        $this->title = 'User Account';

        $client = new Google_Client();
        $client->setApplicationName(WEBSITE_NAME); 
        $client->setClientId(GOOGLE_PLUS_CLIENT_ID); // Client Id
        $client->setClientSecret(GOOGLE_PLUS_CLIENT_SECRET); // Client Secret
        $client->setRedirectUri(GOOGLE_PLUS_REDIRECT_URI); // Redirect Uri set while creating API account
        $client->setDeveloperKey(GOOGLE_PLUS_DEVELOPER_KEY); // Developer Key
        $oauth2 = new Google_Oauth2Service($client);

        if (isset($_GET['code'])) {
            $client->authenticate($_GET['code']);
            $_SESSION['token'] = $client->getAccessToken();
            $redirect = GOOGLE_PLUS_REDIRECT_URI;
            header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL)); // Redirects to same page
            return;
        }

        if (isset($_SESSION['token'])) {
            $client->setAccessToken($_SESSION['token']);
        }

        if (isset($_REQUEST['logout'])) {
            unset($_SESSION['token']);
            $client->revokeToken();
        }

        if(!isset($_SESSION['email_address_user_account'])) // Check if user is already logged in or not
        {
            if ($client->getAccessToken()) {
                $user = $oauth2->userinfo->get();  // Google API call to get current user information

                $email = filter_var($user['email'], FILTER_SANITIZE_EMAIL);
                $img = filter_var($user['picture'], FILTER_VALIDATE_URL);
                $googleuserid = $user['id'];
                $given_name = $user['given_name'];
                $family_name = $user['family_name'];
                // The access token may have been updated lazily.
                $_SESSION['token'] = $client->getAccessToken();

                // If email address is present in DB return user data else insert user info in DB
                $this->result = UserAccount::gplus_sign_up($email, $googleuserid, $given_name, $family_name); 

                // Create new user object.
                $this->user_account = new UserAccount($this->result['id'],$this->result['email_address'],$this->result['password'],$this->result['confirmation_code'],$this->result['is_confirmed'], $this->result['first_name'], $this->result['last_name']); 

                $_SESSION['gplus_email_address'] = $email;
                $_SESSION['gplus_first_name'] = $given_name;
                $_SESSION['gplus_last_name'] = $family_name;
                $_SESSION['gplus_id'] = $googleuserid;
                $_SESSION['gplus_profile_pic'] = $img;
                $_SESSION['email_address_user_account'] = $email;

            } else {
                $authUrl = $client->createAuthUrl();
            }
        }

        if(isset($temp_redirect))
            header("Location:".$temp_redirect);
        else
            header("Location:/");
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:44:40.137

尝试这个

使用以下代码

```
$temp = json_decode($_SESSION['token']);
$request = "https://www.googleapis.com/oauth2/v1/userinfo?alt=json";                
$curl = curl_init();
curl_setopt($curl,CURLOPT_URL,$request);
curl_setopt($curl,CURLOPT_RETURNTRANSFER,1);
curl_setopt($curl,CURLOPT_TIMEOUT,30);
curl_setopt($curl,CURLOPT_SSL_VERIFYPEER,false);
curl_setopt($curl, CURLINFO_HEADER_OUT, true);
curl_setopt($curl,CURLOPT_HTTPHEADER,array('Authorization: OAuth '.$temp->access_token));
$response = trim(curl_exec($curl));
$info =  curl_getinfo($curl);
$request_header_info = curl_getinfo($curl, CURLINFO_HEADER_OUT);

//var_dump($info);
//var_dump($request_header_info);           
curl_close($curl);
echo "<pre>";
print_r(json_decode($response)); 
```

取而代之

```
$user = $oauth2->userinfo->get();  // Google API call to get current user information`enter code here` 
```

希望对你有帮助 .. ：）

# google-cloud-storage - 谷歌云存储安装

> ID：15522960
> 
> 赞同：2
> 
> 时间：2013-03-20T12:02:16.993
> 
> 标签：google-cloud-storage, java

我需要为 Google Apps 帐户配置 Google Cloud Storage，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:15:22.587

是的，以您的 employee@company.com 帐户登录，导航到[API 控制台](http://code.google.com/apis/console)并创建一个项目。该项目将成为您的应用帐户的一部分。

将适当的 other_employee@company.com 电子邮件添加到团队，在服​​务选项卡中启用云存储，您应该一切就绪！

# php - 从 ajax 加载数据时，jquery 线索提示不起作用

> ID：15522963
> 
> 赞同：0
> 
> 时间：2013-03-20T12:02:21.650
> 
> 标签：php, jquery, ajax, cluetip

我正在使用 jquery 线索提示插件，它工作正常。问题是，当从 ajax 加载页面并且我想在此页面的任何元素上使用提示提示时，它无法正常工作。

我已经在 ajax 加载页面上调用了 .cluetip() 函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:05:15.967

当您通过 AJAX 加载页面时，您必须初始化插件。将您的初始化代码放入 AJAX 成功回调中。

# ruby-on-rails - 如何在rails3中渲染图像选择

> ID：15522965
> 
> 赞同：3
> 
> 时间：2013-03-20T12:02:26.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview, actionviewhelper

我想以图像作为选项的形式呈现下拉列表。如何在rails3中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:19:38.613

我喜欢[msdropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)。`title`您可以在标签中添加图像的路径：

```
<select>
  <option value="1" title="#path for the image">first</option>
  <option value="2" title="#path for the image">second</option>
   ...
</select> 
```

在 Rails 中，您可以添加标题，如下所示：

```
<%= f.select(:yourcolumn, Model.all.map{|p| [p.name, p.id, :title => p.image_url(:thumb)]} 
```

前段时间我遇到过类似的问题：[在每个 <option> 中生成带有标题的 HTML <select> 以应用 msDropDown 插件](https://stackoverflow.com/questions/11050128/generate-html-select-with-title-inside-each-option-to-apply-the-msdropdown-p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:16:09.183

查看这个插件[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)没有直接在 Rails 中执行此操作的选项。

# linux - 禁用 linux tcp 接收器窗口自动调整

> ID：15522970
> 
> 赞同：8
> 
> 时间：2013-03-20T12:02:36.297
> 
> 标签：linux, tcp, performance

我正在努力`linux (2.6.43.8-1.fc15.i686.PAE)`并面临一些问题来禁用 TCP 接收器窗口的自动调整。

我试图找到一个给定的设置，它会迫使我的客户宣传一个固定的接收器窗口。我尝试为`net.core.rmem_max`(/proc/sys/net/core/rmem_max) 和`net.core.rmem_default`(/proc/sys/net/core/rmem_default) 以及`ipv4.tcp_rmem`(net.ipv4.tcp_rmem) 提供相同的给定值，但是在检查广告窗口时（使用wireshark）它绝对不会改变任何东西......

这是为了研究 TCP 行为，如果有人能回答我，我会非常感激

提前致谢

PS：我利用[这个帖子](http://www.cyberciti.biz/faq/linux-tcp-tuning/)来调整参数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:48:36.657

关闭 TCP 接收缓冲区大小的自动调整。在接收器上：

```
$ sudo sysctl net.ipv4.tcp_moderate_rcvbuf=0 
```

或者

```
$ sudo echo 0 > /proc/sys/net/ipv4/tcp_moderate_rcvbuf 
```

# windows-8 - 使用 Inno Setup 创建 Windows 8 开始屏幕组和磁贴（不仅适用于 exe）

> ID：15522972
> 
> 赞同：2
> 
> 时间：2013-03-20T12:02:47.233
> 
> 标签：windows-8, installation, inno-setup, tile, startmenu

我们正在使用 Inno Setup 为我们的[ActiveX 网格控件](http://www.10tec.com/)构建安装程序。随着 Win8 的发布，出现了两个新问题：

1.  是否可以在“开始”屏幕上创建我们自己的新图块组（具有指定名称）以使用 InnoSetup 将我们的快捷方式/图块放置到其中？

2.  现在，在开始屏幕上只创建了我们安装的 exe 的磁贴。是否可以将其他文件类型的图块（例如 CHM 帮助文件或 PDF 文档）添加到此屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:44:27.260

“All appa”下的命名分组是从文件夹 heirachy 创建的，与自 95 年以来的所有 Windows 版本一样。这意味着您将对所有版本的 Windows 使用类似这样的代码：

```
[Setup]
DefaultGroupName=Your app shortcuts

[Icons]
Name: "{group}\Your app help"; ...
Name: "{group}\Your app registration"; ... 
```

您对主 Windows 8 开始屏幕的唯一控制是是否使用[`excludefromshowinnewinstall`](http://www.jrsoftware.org/ishelp/topic_iconssection.htm#excludefromshowinnewinstall)标志自动添加创建的可执行文件快捷方式。您无法控制分组，因为它们被添加到末尾。

# android - 解析soap web服务并制作列表视图

> ID：15522973
> 
> 赞同：-3
> 
> 时间：2013-03-20T12:02:47.263
> 
> 标签：android, soap

我是安卓新手。

我一直在谷歌搜索，但我找不到首选的示例或教程。

基本上，我只想解析一个 Web 服务，`Soap .net`并从 Web 服务数据中创建一个列表视图。

请让我参考您可能知道的任何示例。我只想要一个在 Android 中解析soap web 服务和制作列表视图的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:59:52.570

**第 1 步：**使用库调用 Web 服务`KSOAP2`并将数据解析为对象数组。

*（`MyObject`是我在这里使用的自定义用户定义的非原始对象，`myObjectArray`是存储数据的对象数组）*

```
public void getData()
    {
        try {

            SoapObject request = new SoapObject(NAMESPACE, METHOD);

            //request.addProperty("", ""); // incase you need to pass parameters to the web-service

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject result = (SoapObject) envelope.getResponse();
            int childCount = result.getPropertyCount();
            SoapObject tempArray[] = new SoapObject[childCount];
            for (i = 0; i < childCount; i++) {
            tempArray[i] = (SoapObject) result.getProperty(i);

            myObjectArray[i] = new MyObject(
                    Integer.parseInt(tempArray[i].getProperty(0).toString()),
                     ....... // get individual data members of each object using getProperty(index)
                    Integer.parseInt(tempArray[i].getProperty(n).toString()));

        }

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

**第 2 步：**在 ListView 中显示对象数组。

```
ArrayAdapter<MyObject> adapter = new ArrayAdapter<MyObject>(this,
                    android.R.layout.simple_list_item_1, myObjectArray);

mListView.setAdapter(adapter); 
```

# c# - 将 datetimepicker 值设置为从 sqldatareader.getdatetime 检索到的值

> ID：15522977
> 
> 赞同：0
> 
> 时间：2013-03-20T12:03:05.453
> 
> 标签：c#

我的表中有一个日期时间列，当我通过`sqldatareader.getdatetime`函数检索该值时，该值未设置为日期时间选择器。

这是我的代码

```
dateTimePicker2.Value = read.GetDateTime(0); 
```

# c# - 如何获取浏览文件的路径并在c#中写入其文本框中？

> ID：15522981
> 
> 赞同：0
> 
> 时间：2013-03-20T12:03:12.903
> 
> 标签：c#

我的代码是——

```
 protected void BrowseButtonClick(object sender, EventArgs e)
    { 
        Thread newThread = new Thread(new ThreadStart(ThreadMethod));
        newThread.SetApartmentState(ApartmentState.STA);
        newThread.Start();
    }

    void ThreadMethod()
    {
            OpenFileDialog dlg = new OpenFileDialog();
            dlg.ShowDialog();
            BrowseTextBox.Text = string.Format("{0}/{1}", Path.GetDirectoryName(dlg.FileName), dlg.FileName);
    } 
```

请帮忙......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:11:27.120

目前还不是很清楚你真正需要什么。我假设您在从另一个线程更新 UI 控件时遇到问题。

```
void ThreadMethod()
{
    OpenFileDialog dlg = new OpenFileDialog();
    dlg.ShowDialog();
    MethodInvoker invoker = delegate 
    {
        BrowseTextBox.Text = .... 
    };

    if(InvokeRequired)
    {
        Invoke(invoker);
    }
    else
    {
        invoker();
    }
} 
```

**更新**

对于 WPF 应用程序，您应该更改上面的代码。这是示例：

```
Action invoker = delegate 
    {
        BrowseTextBox.Text = .... 
    };
Dispatcher.Invoke(invoker); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T12:04:16.837

BrowseTextBox.Text = dlg.FileName

# sql-server - SQL Server Analysis Services 第三方算法

> ID：15522992
> 
> 赞同：0
> 
> 时间：2013-03-20T12:03:38.007
> 
> 标签：sql-server, ssas

我最近一直在尝试用于 SQL Server 2005 的 SQL Server Analysis Services。我已经构建了几个项目并进行了一些分析，但我想知道是否有人知道可以插入 SQL Server 的第三方数据挖掘库。我想将 Microsoft 算法的性能与其他库的性能进行比较。

# java - 如何用各自的属性替换节点 ID？

> ID：15522999
> 
> 赞同：0
> 
> 时间：2013-03-20T12:03:56.890
> 
> 标签：java, neo4j, graph-traversal

我正在使用`Neo4j`图形数据库，并使用 Java 从中提取路径。我有如下路径：

```
[(3)--[KNOWS,5]-->(4)--[KNOWS,6]-->(5)--[KNOWS,9]-->(6)--[KNOWS,10]-->(7)--[KNOWS,12]-->(9)] 
```

我想用它们的属性替换路径中的节点 ID。前任。对于具有属性的节点 id 3 `"name=ABC"`，输出应该像`"[(ABC)--[KNOWS,5]....]"` How it can be done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:55:55.277

我假设我们显示的输出是[Path.toString()](http://api.neo4j.org/1.9.M05/org/neo4j/graphdb/Path.html)。没有直接的方法来配置不同的输出方式。但是，您可以轻松地遍历路径并创建自己的路径字符串表示：

```
String myCustomPathToString(Path path) {
    StringBuilder sb = new StringBuilder();
    Node lastNode = null;
    for (PropertyContainer propertyContainer: path) {
       if (propertyContainer instanceof Node) {
          lastNode = (Node)propertyContainer
          Object default = lastNode.getId(); // as fallback
          sb.append("(").append(propertyContainer.getProperty("name", default).append(")");
       }
       if (propertyContainer instanceof Relationship) {
          Relationship rel = (Relationship)propertyContainer ;
          Object id = rel.getId();
          if (rel.getEndNode().equals(lastNode)) sb.append("<");
          sb.append("--[").append(rel.getType().name()).append(",").append(id).append("]--");
          if (rel.getStartNode().equals(lastNode)) sb.append(">");              
       }
    }
    return sb.toString();
} 
```

*免责声明*：我没有测试上面的代码段，所以它更像是一个指导而不是一个工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:11:03.320

对于 Cypher，您可以使用提取：

```
 START n=node:index(key="value")
  MATCH path=n-[:KNOWS*..5]-m
  RETURN extract(x in nodes(path) : x.name) 
```

如果你想保持关系，你可以这样做：

```
 RETURN extract(x in path : coalesce(x.name?,ID(x)+":"+type(x))) 
```

见：[http ://console.neo4j.org/r/zvmyz](http://console.neo4j.org/r/zvmyz)