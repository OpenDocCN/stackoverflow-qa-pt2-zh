# StackOverflow 问答 12911000-12911999

# android - 当我们单击保存按钮时，如何在我的活动中选择两个图像视图并保存图像状态

> ID：12911001
> 
> 赞同：1
> 
> 时间：2012-10-16T08:58:04.320
> 
> 标签：android, android-imageview

我的应用特点：

*   从相机或图片库拍照；//完毕
*   收集有趣的贴纸；//完毕
*   通过电子邮件、彩信等分享创作的滑稽照片。//完成
*   将“贴纸”照片保存在图片库中；//完毕
*   移动、缩放和旋转贴纸图像；
*   在这个问题中..我面临困难...我可以添加，但粘贴两个或更多后无法选择贴纸...当我在图像中添加两个或三个贴纸时，我不能单独选择贴纸。或者通过选择贴纸自动改变。

从上周开始面对这个问题......

谁能建议我任何示例程序或支持的 lib 文件？

我试过*Aviary*，但它不适合这个应用程序。

以下是我的代码列表：

```
 public class MyMain extends Activity implements OnClickListener {
            private static final int FROM_GALLERY = 200, CAMERA_PIC_REQUEST = 201,
                    SELECT_STICK_IMAGE = 10, FROM_SAVE_LIB = 11;
            private ImageView mainImage, imgNew, imgSave, cat, stickyImage, done, flip,back,trash;
            private RelativeLayout catWangMainImgLayout, rl_mainImageBottamBar1,
            rl_mainImageBottamBar2;
            public static int width, height, imWidth;
            public OnTouchListener onTouchListenerStickImage = null;
            private Bitmap camera_thumbnail;
            static int l=0,m=0;
            Pinch pig;
            String image_id;
            ArrayList stickyItemId = new ArrayList();
            static Bitmap join;
            private LinearLayout carHead, editImage;
            private OnClickListener stickyImageListner, doneListener;
            ArrayList sticky_list = new ArrayList();
            public static int drag_x, drag_y;  
            int index = -1;
            boolean stk_in_rect = false;
            ImageView imageView_stky, imageView3;

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                        WindowManager.LayoutParams.FLAG_FULLSCREEN);
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
                setContentView(R.layout.cat_wang_main);      

                Info.sticky_param = new ArrayList();

                String type = getIntent().getExtras().getString("action_type");

                DisplayMetrics metrics = new DisplayMetrics();
                getWindowManager().getDefaultDisplay().getMetrics(metrics);
                Info.widthAfterZoom = Info.screenWidth = width = metrics.widthPixels;
                imWidth = width - width / 15;
                Info.screenHight = height = metrics.heightPixels;

                                stickyImage.setImageDrawable(getResources().getDrawable(Integer.parseInt(stickyItemId.get(index).toString())));

                                stickyImage.setBackgroundResource(R.drawable.image_border);
                                stickyImage.setPadding(20, 20, 20, 20);
                                Bitmap bmap3 = loadBitmapFromView(stickyImage);

                                imageView3.setOnTouchListener(null);
                                Pinch.matrix = Info.getMat(index);

                                imageView3.setOnTouchListener(Info.onTch);
                                imageView3.setImageBitmap(bmap3);

                                imageView3.bringToFront();

                                setMainBottanEditBar();
                            }      
                        }
                        return true;
                    }
                };  

                     doneListener = new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        try {
                            l=0;
                            m=0;
                            imageView_stky = (ImageView) catWangMainImgLayout.getChildAt(Info.current_matrix_id+1);

                            imageView_stky.setImageBitmap(null);
                            imageView_stky.setAlpha(255);

                            stickyImage = new ImageView(CatWangMain.this);              
                            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(Info.screenWidth, Info.screenWidth);
                            params.addRule(RelativeLayout.CENTER_IN_PARENT);
                            stickyImage.setLayoutParams(params);

                            stickyImage.setPadding(20, 20, 20, 20);

                            sticky_list.add(stickyImage);

                            Bitmap bmap2 = loadBitmapFromView(stickyImage);
                            imageView_stky.setOnTouchListener(null);
                            imageView_stky.setOnTouchListener(onTouchListenerStickImage);

                            imageView_stky.setImageBitmap(bmap2);

                            setSelectStickyMode();
                            Info.addMat(Pinch.matrix,index);              

                            Pinch.editMood = false;
                            //int i =0;
                            Info.sticky_param.set(Info.current_matrix_id,new SavedStickyImageParam(Info.ceterOfX, Info.ceterOfY, Info.widthAfterZoom, Info.rotation));

                        } catch (NumberFormatException e) {

                            e.printStackTrace();
                        } catch (NotFoundException e) {

                            e.printStackTrace();

                        }

                    }
                };

            }

            void camera() {
                Context context = this;
                PackageManager packageManager = context.getPackageManager();
                if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
                    // yes
                    Log.i("camera", "This device has camera!");
                    Intent cameraIntent = new Intent(
                            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
                } else {
                    // no
                    Log.i("camera", "This device has no camera!");
                    pickImage();
                }
            }

            void pickImage() {

                Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
                photoPickerIntent.setType("image/*");

                startActivityForResult(photoPickerIntent, FROM_GALLERY);
            }

            void createStickyImage(Bitmap bitmap, int id) {

                pig = new Pinch(this, catWangMainImgLayout);
                pig.addImage(bitmap, id);

            }
                super.onActivityResult(requestCode, resultCode, data);

                int req = requestCode;
                switch (req) {
                case FROM_GALLERY:
                    setMainImageBg(resultCode, data);

                    break;
                case SELECT_STICK_IMAGE:
                    addStickyImage(resultCode, data); 

                    break;
                case CAMERA_PIC_REQUEST:
                    if (requestCode == CAMERA_PIC_REQUEST) {
                        if (resultCode == RESULT_OK) {
                            // data.getExtras()
                            camera_thumbnail = (Bitmap) data.getExtras().get("data");
                            mainImage = (ImageView) findViewById(R.id.img_mainImg);
                            mainImage.setImageBitmap(camera_thumbnail);

                        } else {
                            finish();
                        }
                    } else {
                    }
                    break;
                case FROM_SAVE_LIB:
                    Bundle b = getIntent().getExtras();
                    String sd = (String) b.getString("fromSaveImag");
                    if (resultCode == 13) {
                        callDialog_SaveToLib();
                    }
                    break;
                default:
                    break;
                }
            }
            void addStickyImage(int resultCode, Intent data){
                if (resultCode == RESULT_OK) {
                    //sticky_param_added = false;
                    index = index +1;
                    Pinch.drag_x_value = Info.screenWidth/2;
                    Info.ceterOfX = Info.screenWidth/2;
                    Info.ceterOfY = Info.screenWidth/2;
                    Info.widthAfterZoom = Info.screenWidth;
                    Info.rotation = 0;

                    image_id = data.getStringExtra("img");
                    stickyItemId.add(image_id);
                    Toast.makeText(getApplicationContext(),"" + Integer.parseInt(image_id), Toast.LENGTH_SHORT).show();

                    stickyImage = new ImageView(this);
                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(Info.screenWidth, Info.screenWidth);
                    params.addRule(RelativeLayout.CENTER_IN_PARENT);

                    stickyImage.setLayoutParams(params);

                    stickyImage.setImageDrawable(getResources().getDrawable(
                            Integer.parseInt(stickyItemId.get(stickyItemId.size() - 1).toString())));
                    stickyImage.setBackgroundResource(R.drawable.image_border);
                    stickyImage.setPadding(20, 20, 20, 20);

                    Bitmap bmap = loadBitmapFromView(stickyImage);

                    createStickyImage(bmap, 1);
                    setMainBottanEditBar();
                }
            }
            public static Bitmap loadBitmapFromView(View v) {
                Bitmap b = Bitmap.createBitmap(v.getLayoutParams().width,v.getLayoutParams().height, Bitmap.Config.ARGB_8888);

                Canvas c = new Canvas(b);
                v.layout(0, 0, v.getLayoutParams().width, v.getLayoutParams().height);
                v.draw(c);
                return b;
            }
                      void callDialogToGoHome() {

                AlertDialog alert;
                AlertDialog.Builder alertBuilder = new AlertDialog.Builder(CatWangMain.this);          
                alertBuilder.setMessage("Are you sure you want to start over?");

                alertBuilder.setPositiveButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                    }
                });          

                alertBuilder.setNegativeButton("Yes",
                        new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        finish();
                    }
                });

                alert = alertBuilder.create();
                alert.show();
            }

            void callDialog_SaveToLib() {
                AlertDialog alertSaveLIb;
                AlertDialog.Builder alertBuilderSaveLib = new AlertDialog.Builder(
                        CatWangMain.this);
                alertBuilderSaveLib.setTitle("OMG !");
                alertBuilderSaveLib.setMessage("yo! we totally saved that graphic !");
                alertBuilderSaveLib.setPositiveButton("Thanks",
                        new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                    }
                });
                alertSaveLIb = alertBuilderSaveLib.create();
                alertSaveLIb.show();
            }

            @Override
            public void onClick(View v) {
                int id = v.getId();
                switch (id) {      
                case R.id.img_new:          
                    callDialogToGoHome();
                    break;
                case R.id.img_save:
                    try {
                        mainImage.buildDrawingCache();
                        Bitmap viewBitmap1 = mainImage.getDrawingCache();

                        if (catWangMainImgLayout.getChildCount() > 1) {

                            join = madeJoinBitmap(viewBitmap1);
                        } else {
                            join = viewBitmap1;
                        }
                    } catch (Exception e) {

                        e.printStackTrace();

                    }
           Intent intentFlip = new Intent(CatWangMain.this, SaveImage.class);
                    ByteArrayOutputStream blob = new ByteArrayOutputStream();
                    join.compress(CompressFormat.PNG, 80 , blob);

                    byte[] bitmapdata = blob.toByteArray();
                    intentFlip.putExtra("bitmap", bitmapdata);

                    startActivityForResult(intentFlip, FROM_SAVE_LIB);

                    break;
                case R.id.img_cat:
                    Intent catWongItems = new Intent(this, CatWongStickyItems.class);
                    startActivityForResult(catWongItems, 10);

                    break;
                default:
                    break;
                }
            }

            private Bitmap madeJoinBitmap(Bitmap main) {
                ImageView imageView = null;
                Bitmap _bmp2 = null;
                Bitmap bmOverlay = Bitmap.createBitmap(main.getWidth(), main.getHeight(), main.getConfig());
                Canvas canvas = new Canvas(bmOverlay);
                canvas.drawBitmap(main, new Matrix(), null);
                if (catWangMainImgLayout.getChildCount() > 1) {
                    for (int y = 0; y < sticky_list.size(); y++) {

                        imageView = (ImageView) sticky_list.get(y);
                        imageView.buildDrawingCache();
                        _bmp2 = imageView.getDrawingCache();

                        if((Matrix)Info.matrixList.get(y) != null)
                        {
                            canvas.drawBitmap(_bmp2, (Matrix)Info.matrixList.get(y),null);
                        }else {
                            canvas.drawBitmap(_bmp2, new Matrix(), null);
                        }                
                    }
                }

                return bmOverlay;
            }

            void setMainBottanEditBar() {
                editImage = (LinearLayout) findViewById(R.id.ll_edit);
                editImage.setVisibility(View.VISIBLE);

                rl_mainImageBottamBar1 = (RelativeLayout) findViewById(R.id.rl_bottam_bar);
                rl_mainImageBottamBar1.setVisibility(View.INVISIBLE);

                rl_mainImageBottamBar2 = (RelativeLayout) findViewById(R.id.rl_bottam_bar2);
                rl_mainImageBottamBar2.setVisibility(View.VISIBLE);

                carHead = (LinearLayout) findViewById(R.id.ll_catHead);
                carHead.setVisibility(View.INVISIBLE);

                done = (ImageView) findViewById(R.id.img_done);
                done.setOnClickListener(doneListener);

                back = (ImageView) findViewById(R.id.img_back);
                back.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {

                        try {
                            imageView_stky = (ImageView) catWangMainImgLayout.getChildAt(Info.current_matrix_id+1);
                            if(l==0)
                            {
                                imageView_stky.setAlpha(50);

                                l=1;
                            }
                            else
                            {
                                l=0;
                                imageView_stky.setAlpha(255);
                            }

                            setMainBottanEditBar();
                        } catch (Exception e) {

                            e.printStackTrace();

                        }   
                    }

                });          

                flip = (ImageView) findViewById(R.id.img_flip);
                flip.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {          
                        Toast.makeText(getApplicationContext(), "flip.. in progress",Toast.LENGTH_SHORT).show();

                    }

                });
                trash = (ImageView) findViewById(R.id.img_trash);
                trash.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        try {

                            imageView_stky = (ImageView) catWangMainImgLayout.getChildAt(Info.current_matrix_id+1);
                            imageView_stky.setImageBitmap(null);
                            imageView_stky.setAlpha(255);

                            stickyImage = new ImageView(CatWangMain.this);              
                            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                                    Info.screenWidth, Info.screenWidth);
                            params.addRule(RelativeLayout.CENTER_IN_PARENT);
                            stickyImage.setLayoutParams(params);

                            stickyImage.setImageDrawable(getResources().getDrawable(Integer.parseInt((String)stickyItemId.get(index))));
                            stickyImage.setPadding(20, 20, 20, 20);

                            sticky_list.add(stickyImage);

                            Bitmap bmap2 = loadBitmapFromView(stickyImage);
                            imageView_stky.setOnTouchListener(null);
                            imageView_stky.setOnTouchListener(onTouchListenerStickImage);
                            imageView_stky.setImageBitmap(bmap2);
                            setSelectStickyMode();
                            Info.addMat(Pinch.matrix, Info.current_matrix_id);              
                            Pinch.editMood = false;

                            Info.sticky_param.set(Info.current_matrix_id,new SavedStickyImageParam(Info.ceterOfX, Info.ceterOfY, Info.widthAfterZoom, Info.rotation));

                            catWangMainImgLayout.removeViewAt(catWangMainImgLayout.getChildCount() - 1);
                            catWangMainImgLayout.invalidate();
                            stickyItemId.remove(index);
                            setSelectStickyMode();

                            sticky_list.remove(index);              
                            Info.sticky_param.remove(index);
                            Info.deleteMat(index);          
                           Info.current_matrix_id = Info.current_matrix_id - 1;  

                            index=index-1;;
                        } catch (Exception e) {

                            e.printStackTrace();
                        }
                    }
                });
            }

            void setSelectStickyMode() {
                editImage = (LinearLayout) findViewById(R.id.ll_edit);
                editImage.setVisibility(View.INVISIBLE);

                rl_mainImageBottamBar1 = (RelativeLayout) findViewById(R.id.rl_bottam_bar);
                rl_mainImageBottamBar1.setVisibility(View.VISIBLE);

                rl_mainImageBottamBar2 = (RelativeLayout) findViewById(R.id.rl_bottam_bar2);
                rl_mainImageBottamBar2.setVisibility(View.INVISIBLE);
                          carHead = (LinearLayout) findViewById(R.id.ll_catHead);
                carHead.setVisibility(View.VISIBLE);
            }

            private Bitmap decodeFile(File f) {
                try {

                    BitmapFactory.Options o = new BitmapFactory.Options();
                    o.inJustDecodeBounds = true;
                    BitmapFactory.decodeStream(new FileInputStream(f), null, o);

                    final int REQUIRED_SIZE = 70;
                    int scale = 1;
                    while (o.outWidth / scale / 2 >= REQUIRED_SIZE
                            && o.outHeight / scale / 2 >= REQUIRED_SIZE) scale *= 2;
                 BitmapFactory.Options o2 = new BitmapFactory.Options();
                    o2.inSampleSize = scale;
                    return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
                } catch (FileNotFoundException e) {
                }
                return null;
            }
        }

        ///////////////////////////////////////

        public class Info {
            static int screenWidth = CatWangMain.width, screenHight, stickyImageID = 90;
            static OnTouchListener onTch;       

            public static ArrayList matrixList;
            public static Point p1;
            public static Point p2;
            public static int ceterOfX, ceterOfY, widthAfterZoom = screenWidth, rotation;
            public static ArrayList sticky_param;//  = new ArrayList();;
            public static int current_matrix_id = -1;

            public static boolean checkPointInRect(float rx, float ry, int rw, int rh, int rot, float px, float py, boolean x){

                double rotRad = (Math.PI * rot) / 180;
                double dx = px - rx;
                double dy = py - ry;

                double h1 = Math.sqrt(dx * dx + dy * dy);
                double currA = Math.atan2(dy,dx);

                double newA = currA - rotRad;
                double x2 = Math.cos(newA) * h1;
                double y2 = Math.sin(newA) * h1;

                if (x2 > - 0.5 * rw && x2 < 0.5 * rw && y2 > - 0.5 * rh && y2 < 0.5 * rh)
                    return true;
                    return false;      
            }

            public static void addMat(Matrix m){

                if(matrixList == null){
                    matrixList = new ArrayList();
                }
            }
            public static void addMat(Matrix m, int position){

                    matrixList.set(position, m);

            }
            public static void deleteMat(int pos){        
                matrixList.remove(pos);
            }

            public static Matrix getMat(int pos){

                return (Matrix)matrixList.get(pos);
            }
            public static int getMatrixSize(){
                       return matrixList.size();

            }
        }

        ////////////////////////////////////

        public class Pinch //implements OnTouchListener
        {          
            public static Matrix matrix = new Matrix();
            public static Matrix savedMatrix = new Matrix();
            RelativeLayout parent;
            Activity context;         

            static final int NONE = 0;
            static final int DRAG = 1;
            static final int ZOOM = 2;
            int mode = NONE, preRotate, rotate;
            public  int x,y;        

            PointF start = new PointF();
            PointF mid = new PointF();
            float oldDist = 1f;
            private boolean singleTouch;
            public static float scale = 1;
            public static int drag_x_value = Info.screenWidth/2, drag_y_value = Info.screenWidth/2;
            public static boolean editMood;              
            OnTouchListener touchLis = new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {

                    ImageView view = (ImageView) v;        
                    dumpEvent(event);
                        }else {
                            Info.ceterOfX = (int)mid.x;
                            Info.ceterOfY = (int)mid.y;
                        }              

                    case MotionEvent.ACTION_POINTER_UP:

                    return true; // indicate event was handled
                }
            };

            public Pinch(Activity context, RelativeLayout parent) {
                this.context = context;
                this.parent = parent;                  
            }

            public ImageView addImage(Bitmap image, int id) {                   
                matrix = new Matrix();
                ImageView tempImage = new ImageView(context);
                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);      
                params.addRule(RelativeLayout.CENTER_IN_PARENT);
                tempImage.setId(Info.stickyImageID);
                Info.stickyImageID = Info.stickyImageID + 1;        
                tempImage.setImageBitmap(image);        
                tempImage.setLayoutParams(params);               
                Info.onTch = touchLis;
                tempImage.setOnTouchListener(Info.onTch);
                matrix.postScale(01.00f, 01.00f);
                tempImage.setScaleType(ScaleType.MATRIX);
                tempImage.setImageMatrix(matrix);                  
                Info.ceterOfY = Info.ceterOfX;        
                Info.addMat(Pinch.matrix);
                Info.current_matrix_id = Info.getMatrixSize()-1;
                Info.sticky_param.add(new SavedStickyImageParam(Info.ceterOfX, Info.ceterOfY, Info.widthAfterZoom, Info.rotation));
                parent.addView(tempImage);
                return tempImage;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:10:38.293

通过 setTag() 为每个图像视图设置标签然后，在 On Click Event 中，您可以通过 getTag() 选择图像。

# php - 如何仅为移动用户展示横幅广告？

> ID：12911004
> 
> 赞同：1
> 
> 时间：2012-10-16T08:58:11.040
> 
> 标签：php, mobile, ads, banner, feature-detection

我有一些带有桌面和移动访问者的静态页面。是否可以只为移动访问者显示横幅？PHP解决方案也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:06:20.157

使用以下方法之一：

*   [PHP移动检测](http://mobiforge.com/developing/story/lightweight-device-detection-php)

*   触摸事件检测：

`

```
var mobile = !!('createTouch' in document) && (document['createTouch']); 
```

**参考**

*   [PHP中的轻量级设备检测](http://mobiforge.com/developing/story/lightweight-device-detection-php)

*   [触摸事件](https://www.w3.org/TR/touch-events/)

# asp.net-mvc-4 - 单独项目中的 ASP.NET MVC 4 区域不起作用（未找到视图）

> ID：12911006
> 
> 赞同：18
> 
> 时间：2012-10-16T08:58:12.500
> 
> 标签：asp.net-mvc-4, asp.net-mvc-areas, asp.net-4.5

我尝试使用单独项目中的区域创建简单的概念验证 ASP.NET MVC 4 网站。

我尝试遵循教程：[http](http://bob.archer.net/content/aspnet-mvc3-areas-separate-projects) ://bob.archer.net/content/aspnet-mvc3-areas-separate-projects （应用程序在虚拟目录中不起作用......我使用 IIS）。我希望有比虚拟目录更好的方法。

然后我尝试了本教程：[http](http://forums.asp.net/t/1483660.aspx/1) : //forums.asp.net/t/1483660.aspx/1 但是区域项目的 *.csproj 中没有“AreasManifestDir”元素（并且出现错误“视图'索引'或其找不到主人或没有视图引擎支持搜索的位置”）

ASP.NET 中是否仍然支持 MVC 4？因为我发现这个答案可以在将来删除： [What are the pros and cons of Areas implementation as single projects vs multiple projects in asp.net mvc](https://stackoverflow.com/questions/1526631/what-are-the-pros-and-cons-of-areas-implemented-as-single-projects-vs-multiple-p)

我还没有找到 MVC4 的任何方法。

解决方案的结构很简单：

```
Solution 'MvcAreasMultiProject'
    Areas [Directory]
        Admin [Project]
        Models
        Views
        Controllers
        Routes.cs [Examples]
    MvcAreasMultiProject [MainProject]
        - References Admin project
        M.V.C 
```

Admin 项目的 Routes.cs：

```
namespace Admin
{
public class Routes : AreaRegistration
{
    public override string AreaName { get { return "Admin"; } }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin_Default",
            "Admin/{action}/{id}",
            new { controller = "Admin", action = "Index", id = "" },
            new[] { "Admin.Controllers" }
        );
    }
}
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-16T10:03:22.323

您可以使用[RazorGenerator](http://razorgenerator.codeplex.com/)包将 Razor 视图嵌入到单独的程序集中。以下是完成这项工作的步骤：

1.  安装`Razor Generator`Visual Studio 扩展（工具 -> 扩展和更新...）
2.  使用空模板创建一个新的 ASP.NET MVC 4 应用程序。
3.  将一个新的类库项目添加到名为的解决方案中`AreasLibrary`（您也可以使用 ASP.NET MVC 项目模板以在 Razor 视图中获取 Intellisense）
4.  将`RazorGenerator.Mvc`NuGet 安装到`AreasLibrary`项目中。
5.  在`AreasLibrary`项目 ( `~/Areas/Admin/Controllers/HomeController.cs`) 中添加控制器：

    ```
    public class HomeController: Controller
    {
        public ActionResult Index()
        {
            return View();
        }
    } 
    ```

6.  添加对应的视图（`~/Areas/Admin/Views/Home/Index.cshtml`）：

    ```
    @* Generator: MvcView *@

    @{
        Layout = null;
    }

    <!DOCTYPE html>

    <html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>View1</title>
    </head>
    <body>
        <div>
            Index view        
        </div>
    </body>
    </html> 
    ```

7.  在视图的属性中设置`Custom Tool`为`RazorGenerator`.

8.  在类库中添加`~/Areas/AdminAreaRegistration.cs`：

    ```
    public class AdminAreaRegistration : AreaRegistration
    {
        public override string AreaName { get { return "Admin"; } }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Admin_Default",
                "Admin/{action}/{id}",
                new { controller = "Home", action = "Index", id = "" }
            );
        }
    } 
    ```

9.  剩下的就是在主 MVC 应用程序中引用类库。

参考：[http ://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html](http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T22:18:57.150

就我而言，除了上面 Darin 的建议的第 9 步之外，我已经完成了所有工作：

> 剩下的就是在主 MVC 应用程序中引用类库。

该解决方案不需要参考即可编译，因此我忽略了它。但在运行时，系统未能正确路由请求。只是提醒一下，以防其他人忽略了这个小问题。

# python - 套接字队列（推特流作为参考）

> ID：12911008
> 
> 赞同：1
> 
> 时间：2012-10-16T08:58:18.797
> 
> 标签：python, sockets, twitter, streaming, low-level

我刚刚发现 Twitter 流媒体端点以某种方式支持检测慢速连接。

参考：[https](https://dev.twitter.com/docs/streaming-apis/parameters#stall_warnings) ://dev.twitter.com/docs/streaming-apis/parameters#stall_warnings （和页面底部）

想法是套接字发送可能会一一处理数据。它知道客户端何时收到一个数据包，因此它可以维护队列并始终知道它的大小。

当客户端为每个人发送一些确认数据包时，这很容易。但 Twitter Streaming API 并非如此——它是一种单向传输。

我的问题是：他们是如何做到这一点的？如果没有一些非常低级别的原始套接字支持，我看不到一种方法 - 但我可能在这里忘记了一些东西。通过一些低级别的支持，我们可能会为每个数据包获得 ACK。这甚至可能吗？可以以某种方式追踪 ACK 吗？

还有其他想法是如何做到的吗？有什么方法可以做到这一点，例如在 Python 中？或任何其他语言示例将不胜感激。

或者也许我在这里不知所措，它只是用来跟踪有多少字节尚未通过 socket.send 处理？但这不是客户端连接的不良指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:14:43.297

我一开始的想法和你一样，但我认为实现实际上比我们预期的要容易得多。

Twitter 的 API 文档状态：-

*“客户端读取数据太慢。每个流连接都由要发送到客户端的消息队列支持。如果这个队列随着时间的推移变得太大，连接将被关闭。”* - [https://dev.twitter.com/docs/streaming-apis/connecting#Disconnections](https://dev.twitter.com/docs/streaming-apis/connecting#Disconnections)

基于上述，我想 Twitter 将有一个线程将推文推送到队列和与客户端的长期 http 连接（通过 while 循环保持打开），该连接将消息从队列中弹出并将数据写入 http 响应在每次循环迭代期间。

现在，如果您想象一下 while 循环内部发生了什么，并且您考虑缓冲区，Twitter 将从队列中弹出一个项目，然后将推文数据写入某种输出缓冲区，该缓冲区将被刷新，然后填满 TCP 缓冲区用于运输给客户。

如果客户端从其 TCP 缓冲区缓慢读取数据，则**服务器的**TCP 发送缓冲区将填满，这意味着当服务器的输出缓冲区被刷新时，它将**阻塞**，因为数据无法写入 TCP 缓冲区，因此意味着 while 循环是不经常从队列中弹出推文（因为在刷新数据时它被阻塞）导致推文队列填满。

现在，您只需要在每次循环迭代开始时进行检查，以检查 Tweet 队列是否已达到某个预定义的阈值。

# c++ - 为什么不能将继承自（非模板）类 B 的实例化类模板 A 的引用转换为对 B 的引用？

> ID：12911009
> 
> 赞同：0
> 
> 时间：2012-10-16T08:58:22.193
> 
> 标签：c++, templates, inheritance, gcc, c++11

我有一个像这样的类层次结构（这是实际的类，但我清理了它）：

```
class Notifiable 
{
public:
   void notify();
}

template <class Exp>
class Batch : public Notifiable
{
public:
    void run();
}

void Batch<Exp>::run()
{
   done.clear();
   generator->resetGeneration();

   while(generator->hasMoreParameters())
   {
       // Lock for accessing active
       std::unique_lock<std::mutex> lock(q_mutex, std::adopt_lock);

       // If we've less experiments than threads
       if (active.size() < threads)
       {
          Configuration conf = generator->generateParameters();
        Exp e(executable, conf);
           //std::weak_ptr<Batch<Exp>> bp;
           //bp.reset(this);

           std::thread t(&Exp::run, e, *this);
           std::thread::id id = t.get_id();
           active.insert(id);
           t.detach();
       }
       q_control.wait(lock, [this] { return active.size() < threads; } );
   }
}

class Experiment
{
public:
   void run(Notifiable& caller)
   {
      do_stuff();
      caller.notify();
   }

   virtual void do_stuff() = 0;
}

class MyExperiment : public Experiment 
{
public:
   void do_stuff() 
   {
       // do my stuff
   }
} 
```

然后，我使用以下代码实例化一个`Batch<MyExperiment>`对象并调用`run()`：

```
Batch<ELExperiment> b(pex, options["name"].as<string>(), options["executable"].as<string>());
    b.run(); 
```

但我在编译时得到这个：

```
In file included from /opt/local/include/gcc47/c++/bits/move.h:57:0,
                 from /opt/local/include/gcc47/c++/bits/stl_pair.h:61,
                 from /opt/local/include/gcc47/c++/bits/stl_algobase.h:65,
                 from /opt/local/include/gcc47/c++/bits/char_traits.h:41,
                 from /opt/local/include/gcc47/c++/ios:41,
                 from /opt/local/include/gcc47/c++/ostream:40,
                 from /opt/local/include/gcc47/c++/iostream:40,
                 from json2cli/main.cpp:9:
/opt/local/include/gcc47/c++/type_traits: In instantiation of 'struct std::_Result_of_impl<false, false, std::_Mem_fn<void (Experiment::*)(Notifiable&)>, MyExperiment, Batch<MyExperiment> >':
/opt/local/include/gcc47/c++/type_traits:1857:12:   required from 'class std::result_of<std::_Mem_fn<void (Experiment::*)(Notifiable&)>(MyExperiment, Batch<MyExperiment>)>'
/opt/local/include/gcc47/c++/functional:1563:61:   required from 'struct std::_Bind_simple<std::_Mem_fn<void (Experiment::*)(Notifiable&)>(MyExperiment, Batch<MyExperiment>)>'
/opt/local/include/gcc47/c++/thread:133:9:   required from 'std::thread::thread(_Callable&&, _Args&& ...) [with _Callable = void (Experiment::*)(Notifiable&); _Args = {MyExperiment&, Batch<MyExperiment>&}]'
json2cli/batch.hh:86:46:   required from 'void Batch<Exp>::run() [with Exp = MyExperiment]'
json2cli/main.cpp:113:15:   required from here
/opt/local/include/gcc47/c++/type_traits:1834:9: error: no match for call to '(std::_Mem_fn<void (Experiment::*)(Notifiable&)>) (MyExperiment, Batch<MyExperiment>)'
In file included from /opt/local/include/gcc47/c++/memory:81:0,
                 from json2cli/parameterexpression.hh:19,
                 from json2cli/main.cpp:13:
/opt/local/include/gcc47/c++/functional:525:11: note: candidates are:
/opt/local/include/gcc47/c++/functional:548:7: note: _Res std::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Class&, _ArgTypes ...) const [with _Res = void; _Class = Experiment; _ArgTypes = {Notifiable&}]
/opt/local/include/gcc47/c++/functional:548:7: note:   no known conversion for argument 1 from 'MyExperiment' to 'Experiment&'
/opt/local/include/gcc47/c++/functional:553:7: note: _Res std::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Class*, _ArgTypes ...) const [with _Res = void; _Class = Experiment; _ArgTypes = {Notifiable&}]
/opt/local/include/gcc47/c++/functional:553:7: note:   no known conversion for argument 1 from 'MyExperiment' to 'Experiment*'
/opt/local/include/gcc47/c++/functional:559:2: note: template<class _Tp> _Res std::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Tp&, _ArgTypes ...) const [with _Tp = _Tp; _Res = void; _Class = Experiment; _ArgTypes = {Notifiable&}]
/opt/local/include/gcc47/c++/functional:559:2: note:   template argument deduction/substitution failed:
In file included from /opt/local/include/gcc47/c++/bits/move.h:57:0,
                 from /opt/local/include/gcc47/c++/bits/stl_pair.h:61,
                 from /opt/local/include/gcc47/c++/bits/stl_algobase.h:65,
                 from /opt/local/include/gcc47/c++/bits/char_traits.h:41,
                 from /opt/local/include/gcc47/c++/ios:41,
                 from /opt/local/include/gcc47/c++/ostream:40,
                 from /opt/local/include/gcc47/c++/iostream:40,
                 from json2cli/main.cpp:9:
/opt/local/include/gcc47/c++/type_traits:1834:9: note:   cannot convert 'std::declval<Batch<MyExperiment> >()' (type 'Batch<MyExperiment>') to type 'Notifiable&' 
```

看起来我不能期望将任何概括`Batch<Exp>`为一个`Notifiable`for 函数调用。你能证实吗？

**更新**对不起，我以为我可以避免将我的所有代码倾倒在问题中，但实际上我为`Batch<Exp>::run()`. 仍然缺少一些细节，但我并不认为它们是相关的（例如，我如何为实验生成参数）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:21:41.740

您的错误不在您向我们展示的代码中，在代码中的某些地方您尝试绑定您`run`并使用创建线程`std::thread`，这就是问题所在，因为它无法为您的绑定函数创建正确的结构，最简单的解决方法是编写自己的包装器：

```
template< class Expr >
struct my_bind {
    my_bind( Expr& e, Notifiable& n ) : e_( e ), n_(n) {}
    void operator()() {e_.run(n_);}
    Expr& e_;
    Notifiable& n_;
}; 
```

然后使用你自己的包装器来启动函数，我不能肯定地说，但我认为这是编译器中的一个错误（所有编译器都有这个错误：GCC，MSVC，......）当你的表达式变得复杂时，它们会失败使用它`std::bind`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:50:40.880

改变

```
 std::thread t(&Exp::run, e, *this); 
```

到

```
std::thread t([](Exp&& e, Batch& b) { e.run(b); }, std::move(e), std::ref(*this)); 
```

或者，如果您真的打算让线程从以下位置继承副本`*this`：

```
std::thread t([](Exp&& e, Batch&& b) { e.run(b); }, std::move(e), *this); 
```

错误的根源（至少是消息引用的那个）是那个特定`std::thread`构造函数的语义（我不打算在这里公开，它有点血腥）。如果您已经熟悉语义`std::bind`（确实有自己的怪癖），您可以遵从它：

```
std::thread t(std::bind(&Exp::run, std::move(e), std::ref(*this)); 
```

（再一次`std::ref(*this)`可以`*this`根据你想要的来代替。）

# vector - std::vector 在 C++/CLI 中不被接受为委托返回类型？C2065 C2061

> ID：12911011
> 
> 赞同：1
> 
> 时间：2012-10-16T08:58:26.507
> 
> 标签：vector, delegates, c++-cli, return

我有以下 C++/CLI 片段：

```
.h
#pragma unmanaged
#include <vector>

public delegate std::vector<std::wstring> XYZ(const std::wstring& filter);

.cpp

XYZ^ xyz = gcnew XYZ(&myClass::xyzFunc); // <-error C2065 + C2061 
```

在这种情况下，我在这一行遇到两个错误：

错误 C2065：“xyz”：未声明的标识符

错误 C2061：语法错误：标识符 'XYZ'

但是，如果我将委托返回类型从 vector -> wstring 更改（例如），它就可以工作！

```
public delegate std::wstring XYZ(const std::wstring& filter); // <-- w/o vector<> , works! 
```

有谁知道是什么问题？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:15:44.287

显然这是一个编译器缺陷，它至少应该发出诊断信息，为什么它没有将委托类型添加到符号表中。您可以将其提交到 connect.microsoft.com，但他们不会修复它。

一种解决方法是使用 typedef 来声明返回值类型：

```
typedef std::vector<std::wstring> returntype;
delegate returntype XYZ(const std::wstring& filter); 
```

我会敦促您将 C++/CLI 视为一种互操作语言，这是它存在的主要原因。此委托不能由任何其他托管代码使用。请支持 String 和`List<String^>`这里。

# git - 如何合并两个 git 存储库

> ID：12911023
> 
> 赞同：0
> 
> 时间：2012-10-16T08:59:01.940
> 
> 标签：git, merge, git-merge

我们有一个项目，它被克隆到三个独立的存储库[*生产*、*开发人员*1 、*开发人员*2 ]。

开发人员存储库的工作方式类似于（bare+live）。

每个开发人员都使用自己的 repo，一段时间后，我们决定合并开发人员 repos，将合并后的版本拉入生产。在此之后，所有的树存储库应该是相同的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:18:14.970

您要做的是为每个开发人员的存储库设置一个遥控器。如果您无法通过网络访问它们，请索取其副本`.git`文件夹的副本，然后远程访问您硬盘上的某个位置。您应该拥有与开发人员一样多的遥控器。在您的回购中，`git fetch`每个回购。如果你用他们的名字命名每个遥控器，比如“johnsmith”，你现在可以从他们的 repos 中看到每个 master 分支。当您发出命令列出所有远程跟踪分支时，它们将如下所示：`johnsmith/master`、`janedoe/master`等。`git branch -r`

现在您可以使用类似的命令将它们一一合并

```
git merge orange/johnsmith 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:06:04.560

是的，这是主要的工作流程。

您需要将所有希望合并的分支转移到一台机器上，然后使用该`git merge`命令。之后，您最终会得到一个分支，它是其他开发人员分支的严格继承者，因此他们可以*快进*到合并的版本。

# python - 从 twitter api 获取无限的推文

> ID：12911031
> 
> 赞同：1
> 
> 时间：2012-10-16T08:59:29.747
> 
> 标签：python, api, twitter, tweets

有没有一种方法可以让我从 Twitter 获得无限或 500 条推文？

我正在使用python。

我可以通过使用获得 100 条推文，`twitter_search = Twitter(domain="search.twitter.com")`但它对 100 条推文有限制。

编辑：

我正在使用 pypi.python.org/pypi/twitter/1.9.0 库。

它应该是公开的推文，而不是来自我的帐户和我的关注者的推文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:45:34.000

我一直有同样的问题。据我所知，确实没有绕过 twitter API 的限制，而且似乎没有任何其他 API 可以访问推文存档。

一种选择，尽管具有挑战性，是从 archive.org 批量下载所有推文：

[http://archive.org/details/twitterstream](http://archive.org/details/twitterstream)

但是，每个月的数据都大于 30GB，经过压缩，因此处理起来并不容易。但是，如果您下定决心，这将使您可以不受限制地完全控制原始数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:09:12.450

twitter API 将结果限制为每个请求最多 200 个。如何将示例中的计数设置为该最大值取决于您使用的库（您没有说明，因此我无法为您提供任何信息）。

因此，无论您使用哪个库，一个请求都无法实现无限制。

在此处查看“计数”参数：[https ://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-01T08:41:13.520

如果您可以从这里转移到 Orange，则每个请求可以获得 9999 条推文。希望有人会发现它有帮助。 [https://medium.com/analytics-vidhya/twitter-sentiment-analysis-with-orange-vader-powerbi-part-1-184b693b9d70](https://medium.com/analytics-vidhya/twitter-sentiment-analysis-with-orange-vader-powerbi-part-1-184b693b9d70)

[![在此处输入图像描述](../Images/4b87f2b13c7cb6b54d55be266477d035.png)](https://i.stack.imgur.com/ln7R2.png)

# ios - PhoneGap中的插件iOS增强现实

> ID：12911033
> 
> 赞同：1
> 
> 时间：2012-10-16T08:59:36.180
> 
> 标签：ios, cordova, plugins

我在 PhoneGap 中的插件 iOS 有问题。我红色本教程（[http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html)）。之后，我基于这个项目创建了我的插件（ https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser ）用于插件和这个（[https://github.com/zac/iphonearkit/](https://github.com/zac/iphonearkit/)）用于增强现实本机代码。

该代码有效，但我没有显示增强现实的结果。我怎样才能得到运行代码的结果？

# jquery - jQuery 数组与 == 的比较？

> ID：12911034
> 
> 赞同：5
> 
> 时间：2012-10-16T08:59:45.767
> 
> 标签：jquery, arrays

我有两个 jQuery 数组`initialList`和`newList`.

我首先像这样比较它们：

```
initialList == newList 
```

这返回`false`。

然后我逐个元素比较：

```
$.each(initialList, function(idx, element){ console.log(element == newList[idx] )}); 
```

每个比较都是`true`。

那么，如果所有元素都相同，为什么在第一次比较中返回 false 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:04:31.217

您是在询问它们是否*相等*（所有项目都相同），而`==`操作员正在检查它们是否*是同一事物*（对同一对象的引用）。他们不是，所以`==`返回 false。

如果您从*哲学*上问为什么`==`不评估操作数并告诉您它们是否出于所有意图和目的“相同”，您可以[在 Wikipedia 上](http://en.wikipedia.org/wiki/%3D%3D#Equality)阅读更多关于等价与平等的信息（对象身份与内容平等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:10:16.983

看这个演示：http: [//jsfiddle.net/pEzAW/](http://jsfiddle.net/pEzAW/)

现在，当您使用`==`运算符时，您试图将一个对象与另一个对象而不是其状态进行比较，而在循环版本中，您正在比较元素。

您可以像这样做一个更简单的版本：检查长度以及看到这个：http: [//jsfiddle.net/ASnYu/1/](http://jsfiddle.net/ASnYu/1/)

```
arr1 = [1,2,3]
arr2 = [1,2,3]

alert(arr1 == arr2)

if ($(arr1).not(arr2).length == 0 && $(arr2).not(arr1).length == 0 && arr1.length == arr2.length)
    alert("Two arrays are Identical");​ 
```

**如果顺序对*身份*很重要，请**使用[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/ValueOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/ValueOf)

[http://jsfiddle.net/Putjc/](http://jsfiddle.net/Putjc/)

**代码**

```
arr1 = [1, 2, 3]
arr2 = [2, 1, 3]

if ($(arr1).not(arr2).length == 0 && $(arr2).not(arr1).length == 0 && arr1.length == arr2.length && arr1.valueOf().toString() == arr2.valueOf().toString()) 
         alert("Two arrays are Identical"); 
else alert("two arrays are **not** identical");​ 
```

随机有趣的阅读：[jQuery 是一个数组吗？](https://stackoverflow.com/questions/5827191/is-jquery-an-array)

休息希望它适合事业！

# mysql - 将 HBase 表导出到 mysql

> ID：12911042
> 
> 赞同：0
> 
> 时间：2012-10-16T09:00:09.853
> 
> 标签：mysql, hbase, sqoop

我正在使用 hbase-0.90.6。我想将数据从 HBase 导出到 mysql。我知道两步过程，首先通过运行 mapreduce 作业将 Hbase 数据拉入平面文件，然后将平面文件数据导出到 mysql。

他们是我可以用来将这两个步骤减少到一个的任何其他工具吗？或者我们可以使用 sqoop 一步完成。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:03:19.283

是的 Sqoop 是可用于从/到 mysql 和 HBase 导入和导出数据的工具

您可以了解更多关于 Sqoop @ [http://sqoop.apache.org](http://sqoop.apache.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:04:01.523

恐怕 Sqoop 目前不支持直接从 HBase 导出。Sqoop 可以在第二步的两步过程中为您提供帮助——例如，Sqoop 可以从 HDFS 获取数据并将它们导出到 MySQL。

# css - Symfony2 - 用于在表单中选择的自定义 css

> ID：12911051
> 
> 赞同：2
> 
> 时间：2012-10-16T09:00:39.860
> 
> 标签：css, select, symfony, width

我的表单呈现有点问题。我希望我的不同选择框有不同的大小。

```
<div >
 {{ form_label(form.date_of_birth, 'date de naissance') }}
 {{ form_widget(form.date_of_birth )}}
</div>

<div >
 {{ form_label(form.Alimentation, 'Alimentation') }}
 {{ form_widget(form.Alimentation)}}
</div> 
```

这两个小部件呈现选择框。我希望这两个有不同的尺寸，一个大的，一个细的。但是，我不能直接设置 div 的样式，设置 div 的宽度什么都不做。我也试过这个：

> ->add('date_of_birth', 'date', array('required' => false, 'attr' => array('style' => 'width:330px'), 'widget' => 'choice', '格式' => 'dd-MM-yyyy', 'years' => range(1970,2012)))

这无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:04:07.903

在**Twig 模板表单函数参考** [http://symfony.com/doc/current/reference/forms/twig_reference.html中解释](http://symfony.com/doc/current/reference/forms/twig_reference.html)

```
{{  form_widget(form.name, { 'attr' : { 'class' : 'yourClass' } })  }} 
```

现在，您已将 class 属性添加到您的表单字段，其中 yourClass 作为 css 类。因此，您可以使用 css 为您的字段设置样式。

# string - elisp中的转义字符串

> ID：12911053
> 
> 赞同：4
> 
> 时间：2012-10-16T09:01:00.900
> 
> 标签：string, emacs, lisp, elisp

我对 Lisp 非常陌生——尤其是 Elisp——我在字符串处理方面遇到了问题：

我想将 Windows 样式路径转换为 ​​Unix 样式路径 - 特别是我需要将从 Visual Studio 获得的路径转换为 ​​Cygwin 路径，因为我希望能够在 Emacs 中从 Visual Studio 打开文件（我希望为此使用 emacsclient --eval ）：

Visual Studio 路径具有以下格式：

```
C:\Users\name\documents\visual studio 2010\projects\test 
```

我想将其更改为适当的 Cygwin 路径，即：

```
/cygdrive/c/Users/name/documents/visual studio 2010/projects/test 
```

但是在暂存缓冲区中尝试以下操作已经失败：

```
(replace-regexp-in-string "\\" "\/" "C:\users\someone")
(subst-char-in-string ?\ ?/ "C:\users\someone")

>> Debugger entered--Lisp error: (error "Non-hex digit used for Unicode escape") 
```

有什么方法可以让 Elisp*不*逃避每个字符串中的反斜杠吗？

**编辑**：

以下是我通过外部工具从 Visual Studio 调用 emacs 的方法：

```
emacsclient -d 127.0.0.1:0.0 --eval '(convert-win-to-cygwin-path $(ItemPath))' 
```

*$(ItemPath)*将被替换为`C:\Users\asf`我无法影响的 - 因此它将带有单个反斜杠的字符串传递给我需要在 emacs 中修改的 emacs。

我可以让emacs知道它需要从单个反斜杠中制作双反斜杠吗？

**编辑2：解决方案**

我通过实际调用将启动 emacs 的 shell 脚本更改了尝试启动 emacs 的方式 - 这样我可以确保 emacs 获得正确的路径：

```
#!/bin/bash

export PATH="/usr/bin/:/bin/:$PATH"

filename=$1
line=$2
column=$3

cyged_path=$(cygpath "$filename")

echo "Cyged path: $cyged_path"

emacsclient -d 127.0.0.1:0.0 -n +$line:$column "$cyged_path" 
```

我从 Visual Studio 调用它，并在外部工具窗口中使用以下参数：

```
Path: <path_to_cygwin>\bin\bash.exe
Arguments: <path_to_script> $(ItemPath) $(CurLine) $(CurCol) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:45:38.850

你不需要做任何这些。

Cygwin 提供了一个专门用于将 Windows 路径转换为 ​​Cygwin 路径的命令，这样您就不必为这类事情操心了。

```
cmd> C:\cygwin\bin\cygpath.exe "C:\Users\name\documents\visual studio 2010\projects\test"

/cygdrive/c/Users/name/documents/visual studio 2010/projects/test 
```

**编辑：**我很好奇 Windows shell 等效于反引号，并发现[Batch 等效于 Bash backticks](https://stackoverflow.com/questions/2768608/batch-equivalent-of-bash-backticks)，这表明您可以用这个单行符完成所有操作？

```
cmd> for /f "usebackq tokens=*" %a in (`C:\cygwin\bin\cygpath.exe "$(ItemPath)"`) do emacsclient -d 127.0.0.1:0.0 "%a" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:28:48.820

查看问题的另一种方法是`emacsclient -d 127.0.0.1:0.0 --eval '(convert-win-to-cygwin-path $(ItemPath))'`在 Elisp 字符串中传递文件名，这就是反斜杠被视为转义的原因。所以解决方案是将其作为数据传递，如`emacsclient -d 127.0.0.1:0.0 $(ItemPath)`. 下一个问题是让您的 Emacs 理解这些文件名。如果您使用 Emacs 的正常 Windows 构建，无需做任何特殊操作即可工作，但如果您使用 Cygwin 构建，则需要执行与 cygwin-mout.el 等效（但相反）的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:23:19.400

这是 emacs lisp 中的答案，尽管我喜欢 Phils 的回答。此函数将预期为完整 Windows 文件路径（包括驱动器）的区域转换为 cygwin 路径。

例如：

```
C:\Users\name\documents\visual studio 2010\projects\test 
```

变成……

```
/cygdrive/C/Users/name/documents/visual studio 2010/projects/test 
```

这是代码：

```
(defun win32-to-cygwin-path()
  "Converts a win32 path into a cygwin happy one"
  (interactive)
  (save-excursion
    (save-restriction
      (narrow-to-region (point) (mark))
      (goto-char (point-min))
      (insert "/cygdrive/")
      (goto-char (point-min))
      (while (search-forward ":" nil t)
    (replace-match "" nil t))
      (while (search-forward "\\" nil t)
    (replace-match "/" nil t))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:06:14.767

需要转义反斜杠。这会起作用：

```
ELISP> (subst-char-in-string ?\\ ?/ "C:\\users\\someone")
"C:/users/someone" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T10:34:23.373

您确定 Windows 没有发送预先转义的反斜杠吗？如果它不这样做会很奇怪。

有关其他人如何解决此问题，请参阅此[wiki 页面](http://www.emacswiki.org/MSVisualStudio)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T09:16:20.823

这些解决方案都不适合我（emacs 24.3.1），无论如何，一个简单的 .bat 脚本就可以了：

```
@ECHO OFF

c:\cygwin64\bin\cygpath.exe %1 > tmp.txt
set /p FILE_TO_EDIT= < tmp.txt
del tmp.txt
C:\cygwin64\bin\cygstart.exe -- /bin/emacs-w32.exe %FILE_TO_EDIT% 
```

将其保存在 file.bat 中并将您要编辑的文件作为参数发送，对于 WinSCP，将如下所示：C:\Users\xxxxx\Desktop\open.bat !!

# android - 使用来自 android 应用程序的意图发送推文

> ID：12911054
> 
> 赞同：3
> 
> 时间：2012-10-16T09:01:07.480
> 
> 标签：android, android-intent

我正在使用以下代码从另一个应用程序中发布推文：

```
try{
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.putExtra(Intent.EXTRA_TEXT, "It's a Tweet!" + "#MyApp");
        intent.setType("text/plain");
        final PackageManager pm = getPackageManager();
        final List<?> activityList = pm.queryIntentActivities(intent, 0);
        int len =  activityList.size();
        for (int i = 0; i < len; i++) {
            final ResolveInfo app = (ResolveInfo) activityList.get(i);
            if ("com.twitter.android.PostActivity".equals(app.activityInfo.name)) {
                final ActivityInfo activity=app.activityInfo;
                final ComponentName x=new ComponentName(activity.applicationInfo.packageName, activity.name);
                intent=new Intent(Intent.ACTION_SEND);
                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                intent.setComponent(x);
                intent.putExtra(Intent.EXTRA_TEXT, "blah blah" );
                startActivity(intent);
                break;
            }
        }
    } catch(final ActivityNotFoundException e) {
        Log.i("Twitter intent", "no twitter native", e );
    } 
```

如果 twitter 应用程序已安装在手机上但未打开，则上述代码可以完美运行。但是，如果我在使用上述活动之前使用 twitter，那么我只是简单地转移到我上次离开 twitter 的同一点，并且我想发推文的文本不会发布。我应该怎么做才能纠正这个？

另外，如果我的手机上没有安装 twitter，那么什么也不会发生。在按下启动上述意图的按钮时，没有任何反应，但我实际上不应该收到消息 - 没有 Twitter 原生。应该怎么做才能收到消息？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:14:09.060

我认为您应该使用 setClassName 而不是 setComponent。

```
 intent.setClassName("com.twitter.android", "com.twitter.android.PostActivity"); 
```

但作为一个有用的旁注，您可以通过多种方式与 twitter 集成：

1）使用他们的 API（可能使用[twitter4j](http://twitter4j.org/en/index.jsp)等库），或

2) 找到一种与 Twitter 应用程序集成的方法，就像你现在正在做的那样。这不是一个好主意，因为许多人使用其他应用程序，例如 Plume、TweetDeck 等，如果他们没有安装 twitter，您的应用程序将无法运行。

3）您可以使用简单的意图打开[http://twitter.com/?status= 。](http://twitter.com/?status=)这可以像这样完成：

```
 Intent i = new Intent(Intent.ACTION_VIEW);
  i.setData(Uri.parse("http://twitter.com/?status=" + Uri.encode(message)));
  startActivity(i); 
```

您也可以将 2 和 3 结合使用。您可以尝试一些已知的 twitter 应用程序，如果它们不存在，请调用浏览器。

另请注意，如果应用程序处理正确的意图，方法 3 可能会实际启动应用程序而不是浏览器（或至少让用户在两者之间进行选择）。

在我看来，方法 1 是最好的，因为它只取决于您的应用程序（当然，库除外），并且您不必与用户可能拥有或不拥有的第三方应用程序集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:03:33.547

为 Intent.FLAG_ACTIVITY_CLEAR_TASK 简单地删除 Intent.FLAG_ACTIVITY_NEW_TASK，这样 twitter 正在运行的任务就会重新启动。

您的标志现在应该如下所示：

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK
        | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED); 
```

希望这会有所帮助，如果正确，请记住接受答案:)

# resharper - ReSharper 可以忽略导航中的项目/测试吗

> ID：12911055
> 
> 赞同：10
> 
> 时间：2012-10-16T09:01:08.550
> 
> 标签：resharper, resharper-6.0

在使用 ReSharper 的各种导航和使用功能时，有没有办法让它隐藏解决方案中的一些项目（带有测试）？

通常当我浏览代码时，我对测试并不真正感兴趣，而只对生产代码感兴趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T11:19:46.090

我从 Resharper 支持团队收到了这个答案。

> 我更深入地研究了“查找用法”，并发现过滤器下拉列表中有以下项目——“显示单元测试用法”（附件）。因此，如果您取消选中此项 - 来自测试项目的用法将不会出现在搜索结果中。

![在此处输入图像描述](../Images/af9b6a030d953224da48f67efc5bba3e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:04:18.050

好吧，我不确定这是否适用于导航和使用功能，但为了分析它，请尝试使用跳过文件和文件夹菜单来添加应排除的文件夹。

在选项菜单下，使用代码检查部分下的设置，然后选择“编辑要跳过的项目”并选择您的文件夹。

也看看这篇[文章](http://blogs.jetbrains.com/dotnet/2011/06/preventing-items-from-being-analyzed-in-resharper/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:23:55.377

首先，ReSharper 中没有设置“忘记”解决方案中的某个项目。

但是，在某些情况下，导航组合可能会帮助您。

例如，当您使用 ReSharper 搜索类型、文件或符号时，您可以使用导航组合来限制搜索范围。比如说，在 NHibernate 中，`dm spec`在 Go to Type 中输入“”会将搜索范围限制为`Projects\Core\NHibernate.DomainModel\NHSpecific`

# dynamics-crm-2011 - 编辑已关闭的案例

> ID：12911057
> 
> 赞同：0
> 
> 时间：2012-10-16T09:01:11.053
> 
> 标签：dynamics-crm-2011

我在案例实体上有一个功能区按钮，它通过 javascript 更新表单上的单个两个选项字段。当它用于已解决/关闭的案例时，它会返回错误，因为表单现在是只读的。

javascript中有没有一种方法可以让它重新激活表单，更改字段，然后将其恢复为以前的状态？我试图强制更改表单，但即使我设法让它看起来您可以保存它，它也会返回错误，因为表单记录仍被视为已停用，即使您可以更改字段

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:37:55.047

您应该能够为此使用 SOAP 调用，这有点涉及，我建议从[这里](http://msdn.microsoft.com/en-us/library/hh771584.aspx#BKMK_DataAccessUsingJavaScript)开始。您必须生成表示请求的 XML，该链接提供了一些工具来执行此操作。

我相信您需要发出 JavaScript 版本的[SetStateRequest](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.setstaterequest.aspx)（打开）和[CloseIncidentRequest](http://msdn.microsoft.com/en-us/library/hh547422.aspx)（关闭）。

另一方面，完全不同的方法是在记录被停用时禁用按钮，然后用户必须手动重新启用记录进行更改并再次关闭。这更接近于我在[这里](https://stackoverflow.com/questions/12038381/how-to-save-a-record-and-immediately-use-its-guid/12042053#12042053)提到的“与系统一起工作”，这是一种不同的情况，但原则仍然适用。

# php - wordpress 将服务器更改为 localhost

> ID：12911058
> 
> 赞同：0
> 
> 时间：2012-10-16T09:01:13.350
> 
> 标签：php, wordpress

问题：

当我输入时，`<a href="http://localhost/myblog">localhost/myblog</a>`我被重定向到生产服务器上的实时站点。（我已经在 wordpress 中进行了更改）

当我输入`<a href="http://localhost/myblog/wp-admin">localhost/myblog/wp-admin</a>`时，它会正确进入本地站点的管理界面。

再次从管理界面，我无法导航到本地站点，因为它会将我带到生产站点。

奇怪的行为。

我所做的更改：

```
UPDATE wp_options SET option_value = 'http://localhost/myblog' WHERE option_value = 'http://www.example.com'; 
```

永久链接设置如下（有关系吗？）

```
<a href="http://localhost/myblog/?p=123">localhost/myblog/?p=123</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:04:43.200

在管理部分的常规设置下，您是否在那里更新了 URL？

有问题的两个将是

*   WordPress 地址 (URL)
*   网站地址 (URL)

# python - 如何在 Python 中从十六进制系列转换 CRC 16

> ID：12911059
> 
> 赞同：1
> 
> 时间：2012-10-16T09:01:21.530
> 
> 标签：python, hex, crc16

我有一系列十六进制字节：

```
0x81 0x12 0xC0 0x00 0x01 0x05 
```

我需要计算它的 CRC 16。[在线计算器给了](http://www.lammertbies.nl/comm/info/crc-calculation.html)我：

```
0x81 0x53 //correct 
```

我使用 crcmod python 模块如下：

```
crc16 = crcmod.predefined.mkCrcFun('crc-16')

print crc16('123456789') # works well

print hex(crc16('\x81\x12\xC0\x00\x01\x05')) #EDIT : works aswell! 
```

我如何将此十六进制系列表示为 ascii 字符串（该函数需要该字符串）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:03:24.320

采用`'\x81\x12\xC0\x00\x01\x05'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:06:02.097

如果你可以自由编辑你的东西，[Marcus 是对的](https://stackoverflow.com/a/12911089/296974)，否则（例如，如果你的字节已经在你的程序的某个地方），做

```
values = [0x81, 0x12, 0xC0, 0x00, 0x01, 0x05]
string = "".join(chr(i) for i in values)
print crc16(string) 
```

# ruby-on-rails - Memcache 的 Fragment_exist 找不到缓存的信息

> ID：12911060
> 
> 赞同：1
> 
> 时间：2012-10-16T09:01:23.190
> 
> 标签：ruby-on-rails, memcached

我在 Heroku 上使用 Rails、Dalli gem、friendly_id 和 Memcachier。

我的问题类似于[我之前遇到的问题，](https://stackoverflow.com/questions/12724876/cache-only-the-main-content-in-rails)但在我开始使用 Memcache 而不是默认的 Rails 缓存后停止工作。应该注意的是，我对 Rails 缓存不是很熟悉，很可能我做错了很多事情（或者没有考虑简单的事情）。

**生产.rb**

```
 config.action_controller.perform_caching = true
  config.cache_store = :dalli_store, 'mc2.ec2.memcachier.com:11211', { :namespace => 'my_app_name', :expires_in => 40.days, :compress => true, :username => 'asdf', :password => 'asdf' } 
```

**礼物#show - 控制器**

```
unless fragment_exist?("gift-show--" + @gift.slug)
  # Perform slow database fetches etc
end 
```

**礼物#show - 查看**

```
<% cache('gift-show--' + @gift.slug) do %>
 # Create HTML with lots of images and such
<% end %> 
```

在我开始在 Heroku 上使用 Memcachier 之前，这很好用。我的猜测是，`fragment_exist?`它不会检查 Memcachier，而是检查“默认 Rails 缓存”（如果有区别的话）。我尝试使用`Rails.cache.exist?("gift-show--" + @gift.slug)`而不是，`fragment_exist?`但它不起作用。

我已经加载了几次特定的礼物#show-view 以确保它被缓存。在日志中，我还可以看到`Read fragment views/gift-show--cash-stash (1.3ms)`（在控制器之后），我认为这是片段实际存在的证据。只是在不需要时它正在通过缓慢（4秒）的礼物#show-controller。

如果我在 Heroku 上进入控制台并输入“ `Rails.cache.read('gift-show--cash-stash')`”，我会得到一个 nil 响应。

另一个奇怪的事情是，如果在控制台中执行以下操作：

```
irb(main):014:0> Rails.cache.write("foo", "bar")
=> true
irb(main):015:0> Rails.cache.read("foo")
=> nil 
```

这很奇怪，不是吗？

那么，我应该使用什么来代替 fragment_exist？为了使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:22:01.373

我不是 100% 确定这是解决方案，但我**添加了“memcachier”gem**（我没有）并将我的 production.rb 更改为：

```
 config.cache_store = :dalli_store 
```

This actually also solved another, [completely different issue](https://stackoverflow.com/questions/12910158/css-returns-internal-server-error-on-heroku), to my great surprise!

# python - 以 django 形式获取对象不可迭代错误

> ID：12911063
> 
> 赞同：0
> 
> 时间：2012-10-16T09:01:35.360
> 
> 标签：python, django

在我的表格中我有这个

```
 mychoices = User.objects.filter(category__name='city') 
```

我收到这个错误

`User Object is not iterable`. 我是 Django 新手

这是下一行

```
relevance = forms.MultipleChoiceField(choices=mychoices, widget=forms.CheckboxSelectMultiple()) 
```

如果我评论这一行，那么我看不到任何错误

编辑：

我发现错误，我不得不使用这个

```
(choices=[ (o.id, str(o)) for o in User.objects.all()])  Then it works. 
```

有谁知道以前的方法有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:26:59.907

您只需要指定小部件类，而不是调用构造函数：

```
relevance = forms.MultipleChoiceField(choices=mychoices, widget=forms.CheckboxSelectMultiple) 
```

**UPDATE** 选择必须是 2 元组的可迭代。首先是 POST 请求参数中返回的值，其次是 UI 上显示的字符串表示形式。可能是，做这样的事情是有意义的：

```
choices = User.objects.filter(category__name='city').values_list('id', 'first_name') 
```

你会得到：

```
(1, 'Mark')
(2, 'Jack')
... 
```

当用户选择选项并发布表单时，您将在参数中收到用户 ID，因此您将能够通过它检索用户对象。

# jquery - cherrypy+jquery ajax 文件上传

> ID：12911066
> 
> 赞同：0
> 
> 时间：2012-10-16T09:01:41.943
> 
> 标签：jquery, cherrypy

现在我使用此代码在没有 ajax 的情况下上传

```
@cherrypy.expose
def upload(self, file):
    uload_path = pm.get_package_download_dir()
    file_name = 'some.file'

    if not isdir(uload_path):
        try:
            makedirs(uload_path)
        except ValueError:
            raise cherrypy.HTTPError(400, 'SOME_ERROR')        

    uload_path = uload_path + os.path.sep + file_name                

    size = 0
    all_data = ''
    while True:
        data = file.file.read(8192)
        all_data += data
        if not data:
            break
        size += len(data)

    try:
        saved_file=open(uload_path, 'wb') 
        saved_file.write(all_data) 
        saved_file.close()
    except ValueError:
        raise cherrypy.HTTPError(400, 'SOME ERROR')

    print 'OK' 
```

但我找不到任何使用 Cherrypy 和 Jquery 上传 ajax 文件的示例。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:29:41.433

最后，我通过 iframe 解决了这个问题

```
<iframe id="iframe" name="iframe" style="display:none;"></iframe>
<form id="upload" action="./upload" enctype="multipart/form-data" method="post" target="iframe">
  <input type="file" id="file" name="file">
  <input type="submit">
</form>      

$('#iframe').load(function(){
    console.log($(this).contents().find('#uploaded').val());
}); 
```

但我仍然无法获得上传进度条。有什么建议么？

# json - Spring @ResponseBody 为原始类型生成无效的 JSON

> ID：12911069
> 
> 赞同：7
> 
> 时间：2012-10-16T09:01:50.523
> 
> 标签：json, spring, rest, jackson

我有一个来自 REST API 的代码，用于`@ResponseBody`返回结果，并`MappingJacksonHttpMessageConverter`以 JSON 格式返回结果。

这一切都适用于复杂的对象。对于像`int`,这样的原语`boolean`，`string`我得到一个不以 { 或 [ 开头的 JSON。这不是有效的 JSON。

我想知道返回这样一个简单类型的正确方法是什么？我应该将它封装在一个对象中`{ Result : true }`吗？

谢谢

代码示例：

```
@RequestMapping(
        value = "/login",
        method = RequestMethod.POST)
@ResponseBody
public boolean Login(String username, String password) {
    return authenticationService.authenticate(username, password);
} 
```

这将返回 just `true`or `false`which 是无效的 JSON。它应该被封装在一个对象或一个数组中（如果我理解正确的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T09:25:07.687

它只返回真或假。你是对的，这不是 json。

它不能是 json，因为它不是一个对象，它只是一个原语，所以它很好 - 它将被分配给你的成功处理程序中的一个 javascript 变量。

如果你返回一个布尔值列表，你会得到一个数组：

```
[true,false,true] 
```

如果您必须具有完全形成的 json，请不要返回原始使用 hashmap 或自定义包装器对象。

```
public
@ResponseBody
Map<String, Boolean> getTrue() {
  Map<String, Boolean> map = new HashMap<String, Boolean>(1){{put("result", Boolean.TRUE);}};
  return map;
} 
```

返回 hashmap 可能是获取所需 json 的最简单和最好的方法：

```
{"result":true} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T19:45:41.607

我发现使用起来很方便

```
public class ObjWrapper<T> implements Serializable {

  private T obj;

  public ObjWrapper(T obj) {
    this.obj = obj;
  }

  public T getObj() {
    return obj;
  }

} 
```

然后在控制器中：

```
@RequestMapping("/getString") @ResponseBody
public ObjWrapper<String> getString() { ... 
```

并在客户端（jquery）

```
$.getJson("getString", {}, function (data) {
            alert(data.obj);
          }) 
```

与列表相同：

```
public class ListWrapper<T> implements Serializable {

  private List<T> content;

  public ListWrapper(T... objects) {
    content = Arrays.asList(objects);
  }

  public ListWrapper(List<T> content) {
    this.content = content;
  }

  public List<T> getContent() {
    return content;
  }

} 
```

# jquery - Anchor 和 Jquery：不想在顶部滚动

> ID：12911071
> 
> 赞同：0
> 
> 时间：2012-10-16T09:01:58.043
> 
> 标签：jquery, hash, anchor

我对与锚点和 Jquery 的链接有一个简单的问题。

```
<a href="#" id="link">A Link</a>

<script>
    $("#link").click(function() {
        //some actions
    }
</script> 
```

如何，当我点击链接时，不要点击链接。我的意思是页面每次都备份..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:04:22.243

使用`preventDefault`方法：

```
$("#link").click(function(e) {
  e.preventDefault();
  //some actions
} 
```

您可以`preventDefault`在操作之前或之后进行调用，具体取决于您想要的后备行为。如果你把它放在第一位，链接将永远不会被关注。如果你把它放在最后，如果脚本崩溃，链接将被跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:04:44.813

改用这个：

```
<script>
    $("#link").click(function(e) {
         e.preventDefault();
        //some actions
    }
</script> 
```

# wpf - 如何使用 Caliburn Micro 从用户控件中获取对窗口的引用

> ID：12911074
> 
> 赞同：2
> 
> 时间：2012-10-16T09:02:07.060
> 
> 标签：wpf, mvvm, caliburn.micro

我想从用户控件视图模型中获取对包含用户控件的窗口的引用。我怎样才能做到这一点？

如果我可以从视图模型中获得对视图的引用，那么我可以使用：

```
Window parentWindow = Window.GetWindow(userControlReference); 
```

所以我的问题是：

1.  从用户控件视图模型获取引用到包含用户控件的窗口的最佳方法是什么？
2.  如果我想使用上面的代码，从 Caliburn Micro 的视图模型中获取对视图的引用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:06:25.860

视图模型通常会继承自`IViewAware`假设它是一个`IScreen`实现

您可以将 Screen 投射到`IViewAware`并使用该`GetView()`方法来获取对视图的引用。我认为您可以`IViewAware`在自己的视图模型上实现，Caliburn 会自动引发`ViewAttached`事件，因此您可以保留对视图的引用，但我可能会查看文档

底线：查看 IViewAware 界面

编辑：

从文档...

`IViewAware – Implemented by classes which need to be made aware of the view that they are bound to. It has an AttachView method which is called by the framework when it binds the view to the instance. It has a GetView method which the framework calls before creating a view for the instance. This enables caching of complex views or even complex view resolution logic. Finally, it has an event which should be raised when a view is attached to the instance called ViewAttached.`

# linux - Linux PCI 驱动程序，mmap 预取

> ID：12911075
> 
> 赞同：2
> 
> 时间：2012-10-16T09:02:14.387
> 
> 标签：linux, driver, mmap, pci

我有一个 PCI 设备、它的 Linux 驱动程序和一个用户空间应用程序。应用程序 mmap 通过驱动程序获取 PCI 设备的第一个 BAR。所有访问都是通过 32 位整数完成的，这很重要，因为读/写寄存器可能会产生副作用（启动操作等）。

在 x86 平台上，这非常有效。但是，我刚搬到一个 ARM 平台，我有一个奇怪的行为：

*   来自驱动程序的读取/写入行为正确
*   从用户空间读取会触发 64 字节 PCI 读取请求，我的设备无法完成该请求，因为它只接受 32 位访问（+ 由于副作用，我不希望这样做）。

我认为问题在于 mmap 想要预取一些数据并发出读取的 64 字节。我是否缺少标志或可能禁用某种 mmap 预取的东西？

我目前在驾驶员方面的 mmap 实现很简单

```
vma->vm_flags |= VM_RESERVED;
remap_pfn_range(vma,vma->vm_start,  pfn, Size_UL, vma->vm_page_prot) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:21:46.113

我找到了解决方案！

正如一位同事所建议的那样，64 字节是一个缓存行，这可能是一种缓存机制，忽略了我的“不可预取”信息，因为它在 mmap() 期间丢失了（尽管在 x86 上被保留......），所以我必须将这些标志添加到 vma 以防止缓存：

```
vma->vm_page_prot = pgprot_noncached(vma->vm_page_prot) | L_PTE_PRESENT |
                         L_PTE_YOUNG | L_PTE_WRITE | L_PTE_DIRTY; 
```

实际上不确定是否需要所有标志，但是，嘿，它有效！

# c++ - C++ 默认构造函数：字符串参数 vs 字符串参数（）

> ID：12911078
> 
> 赞同：2
> 
> 时间：2012-10-16T09:02:17.087
> 
> 标签：c++, default-constructor

> **可能重复：**
> [没有参数的构造函数上没有括号是语言标准吗？](https://stackoverflow.com/questions/2318650/is-no-parentheses-on-a-constructor-with-no-arguments-a-language-standard)

谁能解释为什么这些行没有给我错误：

```
string params;
params+="d"; 
```

但这些行：

```
string params();
params+="d"; 
```

给我这个错误：错误 C2659: '+=' : 作为左操作数的函数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T09:03:42.457

这不是对象：

```
 string params(); 
```

这是函数返回字符串：

```
 string params(); 
```

像这样：

```
 string params(void); 
```

所以现在的错误很明显：**函数**作为左操作数

这个问题有自己的名字：[http ://en.wikipedia.org/wiki/Most_vexing_parse](http://en.wikipedia.org/wiki/Most_vexing_parse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:08:49.600

在第一种情况下

```
string params; 
```

使用默认构造函数创建一个字符串实例。

在第二种情况下

```
string params(); 
```

创建一个指向*返回字符串的函数*的指针。在该类型上，*operator+=(const string&)*显然没有定义。

是的，这是该语言的一个有点令人困惑的特性，因为当您使用非默认构造函数时，您真的可以编写例如

```
string params("d"); 
```

# vim - yankstack 较新的 yank 不骑自行车

> ID：12911094
> 
> 赞同：0
> 
> 时间：2012-10-16T09:03:31.457
> 
> 标签：vim, vim-plugin

我在 Windows 上的 gvim7.3 上使用 yankstack（最后来自[github](https://github.com/maxbrunsfeld/vim-yankstack)），我有这些映射

```
let g:yankstack_map_keys = 0
nmap <A-p> <Plug>yankstack_substitute_older_paste
nmap <A-[> <Plug>yankstack_substitute_newer_paste 
```

工作正常，迭代较旧的 yanks，但总是插入前一个，如果再次插入，则再次插入前一个，而不覆盖前者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:40:59.260

确保`yankstack#setup()`在定义映射之前调用 .vimrc。

在没有`let g:yankstack_map_keys = 0`的情况下使用默认键`alt-p` 和进行测试`alt-shift-p`，这样您就可以判断问题是否与您的映射有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T02:53:45.577

我有一个类似的问题，但我的问题是我使用`nnoremap`的是`nmap`.

# sql-server - 全文关键字 unicode

> ID：12911101
> 
> 赞同：2
> 
> 时间：2012-10-16T09:03:53.530
> 
> 标签：sql-server, sql-server-2008, full-text-search

我有一个非常大的数据库，有数十亿字。我需要在这些词中进行搜索，我知道的最快方法是使用 SQL SERVER 2008 附带的 iFTS。

数据是土耳其语。我的意思是数据的语言是土耳其语。SQL SERVER 2008 可以毫无问题地处理全文搜索，即使在土耳其语中也是如此。

但是，当我尝试按此处所述列出全文单词时，就会出现问题：[http ://technet.microsoft.com/en-us/library/cc280900.aspx](http://technet.microsoft.com/en-us/library/cc280900.aspx)

从**sys.dm_fts_index_keywords**返回的单词列是**keyword**和**display_term**。但是这些列的字符集不正确。例如，土耳其字符集中同时存在 ı 和 i。类似地 o 和 ö、g 和 ğ。但是返回的单词是 ascii 编码的。像**kör**以**kor**形式返回，而 için 以icin**形式****返回**。

但是当我进行 CONTAINS 搜索时，SQL Server 匹配搜索词正确返回真实结果。我的意思是用**kör**和**kor**搜索会返回不同的结果，这是真正的行为。

所以我需要获取存储在 SQL 中的单词，而不是它们的 ascii 表示形式。

我希望我能解释我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:54:28.457

似乎这已在 SQL 2012 中修复...在 SQL 2012 中，查询 sys.dm_fts_index_keywords 返回的列、关键字和显示项；现在正在返回正确的土耳其语单词...

# android - Android GPS 精度甚至不接近内置地图应用程序

> ID：12911105
> 
> 赞同：2
> 
> 时间：2012-10-16T09:03:58.207
> 
> 标签：android, gps, location, device

几周以来，我一直在试验 Android SDK，试图从后台服务中获得准确的位置。

在尝试了一些配置之后，我目前有这个循环：

```
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(true);
criteria.setCostAllowed(true);
criteria.setPowerRequirement(Criteria.POWER_HIGH);
bestProvider = locationManager.getBestProvider(criteria, true);
lastKnownLocation = locationManager.getLastKnownLocation(bestProvider); 
```

然后我不时检查`lastKnownLocation`位置更新。我知道您可以收听更新，但目前我并不太担心。我担心的是，（我认为）我要求手机尽可能使用 GPS - 而不是其他确定位置的方法 - 但它仍然从很远的距离返回纬度/经度，但是当我打开地图应用程序，它让我在几米之内。

谁能建议我在这里出错的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:16:45.110

设置标准只是根据它们确定最好使用哪个提供商，因此对位置的准确性或有效性没有真正的发言权。我只是立即将提供程序设置为 GPS（如果 GPS 可用！）。

此外，您似乎没有根据时间和距离对您希望等待多长时间进行更新提出任何要求。这是我使用意图和广播接收器所做的示例。它可能会帮助你。

```
public void beginMonitoringLocation(int minDistance) {
            IntentFilter filter = new IntentFilter();
            filter.addAction(MainActivity.LOCATION_UPDATE_ACTION);
            this.mContext.registerReceiver(this.locationReceiver, filter);

            LocationManager mLocationManager = (LocationManager) this.mContext.getSystemService(Context.LOCATION_SERVICE);
            mLocationManager.addGpsStatusListener(this);
            boolean enabled =  mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

            if (!enabled) {
                Log.e("LocationManager", "GPS not enabled!!!!");
            } 

            LocationProvider provider = mLocationManager.getProvider(LocationManager.GPS_PROVIDER); // GET THE BEST PROVIDER FOR OUR LOCATION
            Log.d("LocationManager:","Location Provider:"+provider);
            if ( provider == null ) {
                Log.e( "LocationManager", "No location provider found!" );
                return;
            }

            final int locationUpdateRC=0;

            int flags = 0;

            Intent intent = new Intent(MainActivity.LOCATION_UPDATE_ACTION); 
            PendingIntent pendingIntent = PendingIntent.getBroadcast(this.mContext, locationUpdateRC, intent, flags); 
            // PENDING INTENT TO BE FIRED WHEN THE LOCATIONMANAGER RECEIVES LOCATION UPDATE.
            // THIS PENDING INTENT IS CAUGHT BY OUR BROADCAST RECEIVER
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,minDistance,pendingIntent);
            this._monitoringLocation = true;
    } 
```

然后在同一个班级我把我的`broadcast receiver`

```
public BroadcastReceiver locationReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            Location location = (Location) intent.getExtras().get(LocationManager.KEY_LOCATION_CHANGED);
        if (location != null) {
            //Do something with it  
        }
        }
    }; 
```

我的意图过滤器的操作只是对我的活动中的一个常量集的静态引用。

```
public static final String LOCATION_UPDATE_ACTION = "com.corecoders.sqlmaptrack.LOCATION_UPDATE_RECEIVED"; 
```

这在我的情况下为我提供了准确的位置。如果需要，您可以将距离设置为 0，然后您会发现，如果您有 4 颗或更多卫星的良好定位，您将获得每秒 5 次精度的定位。

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:51:20.457

我已经使用下面的代码来获得准确的位置。使用下面的代码，您可以以编程方式处理启用/禁用 GPS。

```
private void enableGPSTracking() {

            new Thread() {
            @Override
            public void run() {
                super.run();
                try {
                    toggleGPS(true, getApplicationContext());

                    provider = LocationManager.GPS_PROVIDER;
                    Criteria locationCritera = new Criteria();
                    locationCritera.setAccuracy(Criteria.ACCURACY_FINE);
                    locationCritera.setAltitudeRequired(false);
                    locationCritera.setBearingRequired(false);
                    locationCritera.setCostAllowed(true);                   locationCritera.setPowerRequirement(Criteria.NO_REQUIREMENT);
                    provider = locationManager.getBestProvider(locationCritera,
                            true);

                    Intent intent = new Intent(
                            "com.example.gps.LOCATION_READY");
                    pendingIntent = PendingIntent.getBroadcast(
                            getApplicationContext(), 0, intent,
                            PendingIntent.FLAG_CANCEL_CURRENT);
                    // Register for broadcast intents
                    locationManager.requestLocationUpdates(provider, 0, 0,
                            pendingIntent);
                } catch (Exception e) {

                }

            }
        }.start();

    }

public static void toggleGPS(boolean flag, Context context) {

        try {
            Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
            intent.putExtra("enabled", flag);
            context.sendBroadcast(intent);
        } catch (Exception e) {

        }
    } 
```

要禁用 GPS，只需将 false 传递给 ToggleGPS() 方法的标志值。希望这对您有所帮助。

# html - Html 并排列出 - 正确的方法是什么？

> ID：12911114
> 
> 赞同：0
> 
> 时间：2012-10-16T09:04:19.827
> 
> 标签：html, css, html-lists, nested-lists

我有 3 个并排放置的无序列表，如下所示：

```
<ul><li>list 1</li></ul> <ul><li>list 2</li></ul> <ul><li>list 3</li></ul> 
```

它们是否被视为列表列表，因此位于另一个 ul/li 标记中，或者它们包含的 Div 是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:06:36.630

由您决定它们是列表列表，还是恰好并排排列的三个不同列表（这就是 CSS 的用武之地）。

如果它们不是列表列表，那么包含`div`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:12:57.347

您将此样式代码用于 ul 和 li

```
ul{
  float:right;
  margin:0;
  padding:0;
  width:500px;
  clear:both;
} 
```

并用于 li

```
ul li{
  float:right;
  width:100%;
} 
```

# iphone - 将 NSMutableArray 从模态视图控制器传递到父视图

> ID：12911115
> 
> 赞同：0
> 
> 时间：2012-10-16T09:04:20.683
> 
> 标签：iphone, ios, xcode, nsmutablearray, modalviewcontroller

我正在努力将 NSMutable 数组从模态视图控制器传递回我来自的视图控制器。

这是我目前的方法：

```
FirstViewController.h
#import "SecondViewController.h"

@property (strong, nonatomic) IBOutlet NSMutableArray *passedRecipientsArray;

FirstViewController.m
@synthesize passedRecipientsArray = _passedRecipientsArray;

- (void)viewDidAppear:(BOOL)animated {
    NSLog(@"passedRecipientsArray: %@", self.passedRecipientsArray);
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"addContact"]){
        UINavigationController *nav = [segue destinationViewController];
        SecondViewController *secondViewController = (SecondViewController *)nav.topViewController;
        secondViewController.emailContact = @"TRUE";
    }
} 
```

* * *

```
SecondViewController.h
@property (strong, nonatomic) IBOutlet NSMutableArray *selectedContactsArray;

SecondViewController.m
@synthesize passedRecipientsArray = _passedRecipientsArray;

- (void)closeWindow
{
    if([self.selectedContactsArray count] != 0){
        NSLog(@"PASS ME: %@", self.selectedContactsArray);

        FirstViewController *firstViewController = [[FirstViewController alloc] init];

        if(firstViewController.passedRecipientsArray == nil) firstViewController.passedRecipientsArray = [[NSMutableArray alloc] init];
        firstViewController.passedRecipientsArray = self.selectedContactsArray;

        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

有没有更好的方法来做到这一点？我试过用这个：[How to pass object on modal view's dismissal](https://stackoverflow.com/questions/7962519/how-to-pass-object-on-modal-views-dismissal)但很困惑。

有没有人有一个很好的教程/清晰的简单方法来做我所追求的？谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:18:01.747

不要在 SecondViewController 中分配**FirstViewController**。因为FirstViewController是你的父类。旧的FirstViewController对象会在重新分配后为**null**

传递 FirstViewController 实例而不是编写

```
FirstViewController *firstViewController = [[FirstViewController alloc] init]; 
```

**示例**：

**SecondViewController.h**

```
#import "FirstViewController.h"

FirstViewController *firstViewController;

@property (strong, nonatomic) IBOutlet NSMutableArray *selectedContactsArray;
@property (strong, nonatomic)  FirstViewController *firstViewController;

SecondViewController.m
@synthesize passedRecipientsArray = _passedRecipientsArray;
@synthesize firstViewController;

- (void)closeWindow
{
    if([self.selectedContactsArray count] != 0){          

                if(self.firstViewController.passedRecipientsArray == nil)
                       self.firstViewController.passedRecipientsArray = self.selectedContactsArray;         

        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

**然后将您的 FirstViewController 修改为**

```
SecondViewController *secondViewController;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"addContact"]){
        UINavigationController *nav = [segue destinationViewController];
        secondViewController = (SecondViewController *)nav.topViewController;
        secondViewController.emailContact = @"TRUE";
       secondViewController.firstViewController = self;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:27:23.513

首先不要在 secondViewController 中创建和分配 firstViewController 的另一个实例。而是在 secondViewController 中创建一个属性`FirstViewController *firstViewController`，然后在 secondViewController .m 文件中进一步合成它...

按照更正后的代码

```
FirstViewController.h
#import "SecondViewController.h"

@property (strong, nonatomic) IBOutlet NSMutableArray *passedRecipientsArray;

FirstViewController.m
@synthesize passedRecipientsArray = _passedRecipientsArray;

- (void)viewDidAppear:(BOOL)animated {
    NSLog(@"passedRecipientsArray: %@", self.passedRecipientsArray);
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"addContact"]){
        UINavigationController *nav = [segue destinationViewController];
        SecondViewController *secondViewController = (SecondViewController *)nav.topViewController;
        secondViewController.firstViewController = self;  // u should create firstViewController first in secondViewController class making it a property

        secondViewController.emailContact = @"TRUE";
    }
} 
```

然后在 secondViewController

```
 SecondViewController.h
@interface FirstViewController : UIViewController{
FirstViewController *firstViewController;
}
        @property (strong, nonatomic) IBOutlet NSMutableArray *selectedContactsArray;
        @property(nonatomic,strong) FirstViewController *firstViewController; 
```

> ```
>  SecondViewController.m 
> ```

```
 @synthesize passedRecipientsArray = _passedRecipientsArray;
        @synthesize firstViewController
     - (void)closeWindow
            {
                if([self.selectedContactsArray count] != 0){
                    NSLog(@"PASS ME: %@", self.selectedContactsArray);

                if(firstViewController.passedRecipientsArray == nil)  {

                firstViewController.passedRecipientsArray = [[NSMutableArray alloc] init];
                firstViewController.passedRecipientsArray = self.selectedContactsArray;

                [self dismissModalViewControllerAnimated:YES];
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:02:48.663

我只是想知道为什么不将协议添加到模型视图中？您可以在模型视图中设置 NSMutableArray，然后从父视图中获取它。

# view - 用于检查字段是否为初始值的维护视图事件

> ID：12911117
> 
> 赞同：3
> 
> 时间：2012-10-16T09:04:21.950
> 
> 标签：view, abap, sap-data-dictionary

我正在尝试使用我制作的表格检查一个字段是否在 sm30 中保持初始状态。我已经转到表维护生成器，然后是 Environment->Modifications->Events 并使用以下代码创建了一个名为 check_class 的入口，类型为 01（在将数据保存在数据库中之前）：

```
FORM CHECK_CLASS.

IF z10ficlassfica-z_class IS INITIAL.
  MESSAGE text-001 TYPE 'E'.
ENDIF.

ENDFORM. 
```

它工作得很好，除了当 z10ficlassfica 是初始时它不会停留在表的维护中并进入 sm30 的第一个屏幕。我怎样才能让它留在sm30的维护屏幕上？希望我已经说清楚了。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:46:20.947

请看这个[链接](http://musicodez.wordpress.com/2010/09/13/custom-validation-on-table-maintenance-generator-sm30/)：

*   您可以使用事件，并且应该使用它们，不要修改生成的屏幕，这就是 SAP 提供事件的原因。
*   您只需要两件事即可停止保存并留在屏幕上
    *   `MESSAGE 'Currency must be USD or IDR' TYPE 'S' DISPLAY LIKE 'E'.`
    *   `vim_abort_saving = 'X'.`
*   阅读那个链接，里面有很多你需要的信息。
*   作为一个好的做法，在错误消息中使用出错记录的键，这样用户在输入数千条新记录时可以找到该记录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:29:00.703

请编辑[您的原始问题](https://stackoverflow.com/questions/12898732/automatic-filling-of-name-1-when-entered-a-valid-kunnr-sm30)，而不是添加另一个问题。我已经回答了那里的问题：不要使用事件，而是修改生成的屏幕。事件在这里不合适，因为您必须`MESSAGE`在屏幕`LOOP`声明中提出。

# silverlight - 如何突出显示列表框windows phone中的选定项目？

> ID：12911120
> 
> 赞同：2
> 
> 时间：2012-10-16T09:04:36.807
> 
> 标签：silverlight, windows-phone-7, xaml, listbox, windows-phone

我正在开发一个 Windows Phone 应用程序。我在我的应用程序中放置了列表框控件并显示了一个列表。我需要用蓝色突出显示选定的行。我怎样才能做到这一点 ？。我尝试了一个代码。但它不起作用。我在下面添加了我使用的代码。请帮忙。

```
<ListBox Margin="0,0,0,0" Name="MyList" ScrollViewer.VerticalScrollBarVisibility="Disabled" ItemContainerStyle="{StaticResource ListBoxItemStyle1}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Background="Transparent" Margin="10,0,0,0">

                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Height="55" Margin="20,10,0,0">
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Option}" FontWeight="Bold" HorizontalAlignment="Left" Foreground="Black" FontSize="23" Margin="0,0,0,0" Width="250" ></TextBlock>
                                                </StackPanel>
                                                <StackPanel Margin="100,0,0,0">
                                                    <Image Margin="0,10,0,0" Source="/Images/arrow.png"></Image>
                                                </StackPanel>
                                            </StackPanel>

                                        <Rectangle Fill="Gray" Height="1" HorizontalAlignment="Stretch" Width="440" />
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox> 
```

**风格：**

```
<Style x:Key="ListBoxItemStyle1" TargetType="ListBoxItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>

                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Control.Background).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" />
                                        <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Selected">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="Blue" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="SelectedUnfocused">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="Blue" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" />
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="#FF1BA1E2" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Background="Black" BorderBrush="Black"/>
                    </Border>
                </ControlTemplate>

            </Setter.Value>
        </Setter>
    </Style> 
```

我的列表如下图所示

![在此处输入图像描述](../Images/d98da9ab71a72814cc151e078319f6e5.png)

当我点击选项 2 。我想更改如下图所示的列表框，当删除单击时，我导航到另一个页面。

![在此处输入图像描述](../Images/d10e9b719066a3ed0bc54e58c4254fdd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:31:11.377

您可以在后面的 datacontext 结构中添加一个道具“isselected”。

和 += 列表的事件“SelectionChanged”

您可以从句柄 args 获取上下文数据：

```
 public IList AddedItems { get; }

    public IList RemovedItems { get; } 
```

改变他们的 isselected 道具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:16:53.087

方法一

将 移动`DataTemplate`到用户控件。在其中创建一个`Boolean`依赖属性`IsSelected`。并将您的控件放入`stackpanel`一个`border`控件中，您必须`toggle`根据其布尔值对其背景进行设置。我希望它有所帮助。

方法二

在数据对象中创建一个布尔属性。将其绑定到放置在数据模板内的边框元素。

```
 <Grid>
   <Border Background="Blue" Visibility="{Binding IsSelcted}" Canvas.ZIndex="-1"/>
   <StackPanel Background="Transparent" Margin="10,0,0,0">
       <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Height="55" Margin="20,10,0,0">
         <StackPanel>
             <TextBlock Text="{Binding Option}" FontWeight="Bold" HorizontalAlignment="Left" Foreground="Black" FontSize="23" Margin="0,0,0,0" Width="250" >        
             </TextBlock>
          </StackPanel>
          <StackPanel Margin="100,0,0,0">
             <Image Margin="0,10,0,0" Source="/Images/arrow.png"></Image>
          </StackPanel>
      </StackPanel>
   </Grid> 
```

您可以在 selectionchanged 事件中切换 listBox.SelectedItem 的布尔属性 (IsSeleced)

注意：您需要保留对旧选定项目的引用，并将其选定的布尔值设为假，然后再将新项目设为真。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T13:19:39.187

使用此代码为列表框创建样式，在这里我使背景透明，根据您的要求修改代码.. 粘贴此 mainpage.xaml 顶部，但在所有引用完成后

```
 <Style x:Key="CustomListBoxItemStyle" TargetType="ListBoxItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" 
                            Background="{TemplateBinding Background}" 
                            HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">                                        
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TransparentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentContainer"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected"/>
                                <VisualState x:Name="Selected">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames
                                Storyboard.TargetName="ContentContainer"
                                Storyboard.TargetProperty="Foreground"
                                Duration="0">
                                            <DiscreteObjectKeyFrame  KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <SolidColorBrush Color="{StaticResource PhoneAccentColor}"/>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames
                                Storyboard.TargetName="border"
                                Storyboard.TargetProperty="Background"
                                Duration="0">
                                            <DiscreteObjectKeyFrame  KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <SolidColorBrush Color="Transparent"/>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <StackPanel x:Name="border" Orientation="Horizontal">                                
                            <ContentControl x:Name="ContentContainer" 
                                            ContentTemplate="{TemplateBinding ContentTemplate}"
                                            Content="{TemplateBinding Content}" 
                                            Foreground="{TemplateBinding Foreground}" 
                                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            Margin="{TemplateBinding Padding}" 
                                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

并将其指向您的列表框中

```
 <ListBox  ItemContainerStyle="{StaticResource CustomListBoxItemStyle}"> 
```

# delphi - Delphi XE2 改变了 DFM，即使没有任何改变

> ID：12911124
> 
> 赞同：4
> 
> 时间：2012-10-16T09:04:47.257
> 
> 标签：delphi, svn, dfm

> **可能重复：**
> [是否有一个 Delphi 选项可以“锁定”表单的设计（布局）以防止意外更改？](https://stackoverflow.com/questions/5486957/is-there-a-delphi-option-to-lock-the-design-layout-of-a-form-against-acciden)

我们最近从 StarTeam 更改为 SVN，但我们的 DFM 文件出现问题。看起来 Delphi 更改了 DFM 文件，即使我们实际上并没有更改表单。

例如：我打开一个现有文件，更改活动标签页，保存文件，将标签页更改回其原始状态，然后再次保存。当我比较这两个文件时，PixelsPerInch、TextHeight、Top 和许多其他值发生了变化？我的代码的一个小示例：

```
 PixelsPerInch = 96
      TextHeight = 13
      inherited PageControl1: TPageControl
        Top = 105
        Height = 629
        Margins.Left = 5
        Margins.Top = 5
        Margins.Right = 5
        Margins.Bottom = 5
        HotTrack = True
        inherited TabSheet1: TTabSheet
          Margins.Left = 5
          Margins.Top = 5
          Margins.Right = 5
          Margins.Bottom = 5 
```

我的问题是：有没有办法让 Delphi 仅在表单发生更改时才更改 DFM？现在，我们总是在 SVN 中更新时发生冲突。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T09:18:44.397

这只是 Delphi 的表单流机制如何工作的结果。

当您在 Delphi 设计器中打开表单时，.dfm 文件用于创建表单上每个组件的实例。在您的情况下，表单设计器将实例化 .dfm 文件中的每个对象。将读入 .dfm 文件中的每个属性。

然后，如果您在设计器中将表单标记为已修改，例如更改活动选项卡，则设计器将在您保存时重新创建 .dfm 文件。它通过要求内存中的组件保存自己来重新创建 .dfm 文件。此保存过程不考虑磁盘上 .dfm 文件的外观。每个组件只是保存其当时的属性。

所以，总而言之，你真的无法改变 Delphi 的行为。您能做的最好的事情就是解决它以最大程度地减少影响。

如果您的表单有，`Scaled=True`那么您应该确保所有开发人员机器都使用相同的字体缩放。否则，当开发人员 A 以一种字体缩放保存时，该 .dfm 文件将与开发人员 B 以不同字体缩放保存的文件完全不同。所有的位置都会改变。听起来好像有些开发人员使用 120dpi 字体缩放。这会让你没有尽头的悲伤。

如果对表单文件的良性编辑导致较大的更改，请提交这些更改。一旦您以相同的方式配置了每台开发人员机器，您就会发现一切都安定下来了。这些良性编辑不应再导致 .dfm 文件更改。

这只是 Delphi 视觉设计的职业危害之一。每次提交时，您都需要非常小心和注意您的 .dfm 文件。我经常发现自己从 Tortoise 提交对话框恢复对 .dfm 文件的更改。我还经常选择在文本编辑器中修改 .dfm 文件，而不是使用表单设计器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:52:04.260

如果您在上次保存该表单后更新了 delphi 版本，您还将看到 dfm 更改。因此，如果您有一个旧表格并检查它以进行微小更改，您将看到许多其他更改。有时这些是新的 delphi 版本中引入的新属性，有时会更改值。这些还表明对尚未签出的表单进行的未决更改。升级 delphi 后，您可以签出每个表单，并立即将其重新签入以记录所有这些更改。

通过视觉设计，我们喜欢“按照我们喜欢的方式”创建表单，然后让 delphi 保存所有这些更改。它悄悄地设置了很多属性，但是随着不同的开发人员在表单上工作，这些属性可能会发生变化。如果设置很重要 - 可能是高度和宽度 - 在代码中设置它。您仍然会看到属性更改，但您会知道这并不重要。

# windows - 在子文件夹中自动创建 txt 文件

> ID：12911125
> 
> 赞同：0
> 
> 时间：2012-10-16T09:04:49.340
> 
> 标签：windows, batch-file

我有一个目录，其中包含数千个子文件夹。我想在每个包含文件夹名称的文件夹中创建一个文本文件。

这是到目前为止的代码：

```
@ECHO OFF
for /F "delims=" %%a in ('dir /ad /b /s') do (
   @echo %%~nxa > %%a\test.nfo
) 
```

唯一的问题是它无法读取中文/特殊字符。我怎样才能解决这个问题？这是在窗户上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:14:16.533

我对此功能没有任何个人经验，但我相信我记得读过简单的 FOR 以及 FOR /R 保留 unicode 字符。

```
@echo off
for /d /r %%F in (*) do echo %%~nxF >"%%F\test.nfo" 
```

您可能还必须使用 CMD /U 启用 unicode 输出：

```
@echo off
for /d /r %%F in (*) do (cmd /u /c echo %%~nxF)>"%%F\test.nfo" 
```

但不幸的是 CMD.EXE 没有将 unicode 标头字节放在文件的顶部。

# macos - 在 OS X 10.7.5 上安装 git-credential-helper 时出错

> ID：12911126
> 
> 赞同：3
> 
> 时间：2012-10-16T09:04:50.290
> 
> 标签：macos, git, credentials

我正在尝试让 git & github 使用 github 提供的本教程。 [https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

我有 os x 10.7.5 的 imac。

一切都很好，直到我让凭证助手开始工作：

```
$ git config --global credential.helper osxkeychain
/usr/local/git/bin/git: line 1: syntax error near unexpected token `newline'
/usr/local/git/bin/git: line 1: `<?xml version="1.0" encoding="UTF-8"?>' 
```

我不知道如何处理这个语法错误。我已经尝试卸载 git 并再次安装它。我也搜索了答案，但没有从任何人那里发现同样的错误。

有人可以帮忙吗？

# php - 仅在 id 对应的复选框/div id 上显示值成功。(jquery,php,mysql)

> ID：12911128
> 
> 赞同：0
> 
> 时间：2012-10-16T09:04:52.560
> 
> 标签：php, jquery, mysql, checkbox

我有一个带有复选框的多个更新数组（php-mysql-jquery）的列表，文本输入新类别名称和类别，一切正常。

每个项目的类别都显示在`<div>`id 等于复选框的范围内。如何获取更新（发布后`on success: function`），只有`<div>`id 等于单击的复选框加载更新的值？

`<input text="nova categoria" value="cars" />``cars`只为检查的 ckecboxes发送值mysql 更新。

```
<td> checkbox checked id = 111 </ td> 
<td> Porshe </ td> 
<td> category id = 111 </ td> 
<td><div id=111>here show "cars"</div></td>
<td> checkbox id = 555 </ td> 
Jobs <td> </ td> 
<td> category id = 555 </ td>
<div id=111>here not show</div>
<td> checkbox checked id = 777 </ td> 
<td> Jaguar </ td> 
<td> category id = 777 </ td>  
<div id=111>here show "cars"</div>
<td> checkbox id = 888 </ td> 
<td> Café </ td> 
<td> category id = 888 </ td>
<div id=111>here not show</div>
<td> checkbox checked id = 222 </ td> 
<td> Mustang </ td> 
<td> category id = 222 </ td>
<div id=111>here show "cars"</div>
<td> checkbox checked id = 123 </ td> 
<td> Ferrari </ td> 
<td> category id = 123 </ td>
<div id=111>here show "cars"</div> 
```

请任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:23:52.940

通过给你的 div 不同的 id。例如，在选中复选框 111 时，提供您要显示的所有汽车，id 为“111”。应该用jquery显示。

这样就可以了`$('#111').show`……然后您对 222、333、444 或您想使用的任何代码执行相同的操作。如果没有检查你使用`.hide`

# iphone - 如何验证文本字段中只允许单个小数点的文本字段？

> ID：12911132
> 
> 赞同：4
> 
> 时间：2012-10-16T09:05:07.963
> 
> 标签：iphone, ios, validation, uitextfield

我需要限制用户只能输入小数点后两位数。我通过在文本字段委托 shouldChangeCharactersInRange 中的代码实现了这一点。但它允许输入多个点。如何限制这个？提前致谢。

```
 NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
            NSArray *sep = [newString componentsSeparatedByString:@"."];
            if([sep count]>=2)
            {
                NSString *sepStr=[NSString stringWithFormat:@"%@",[sep objectAtIndex:1]];
                NSLog(@"sepStr:%@",sepStr);

                return !([sepStr length]>2);
            }
            return YES; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-06T12:43:24.570

最好的方法是`Regular Expression`在这样的`shouldChangeCharactersInRange:`委托方法中使用

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    NSString *newStr = [textField.text stringByReplacingCharactersInRange:range withString:string];

    NSString *expression = @"^([0-9]*)(\\.([0-9]+)?)?$";

    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:nil];
    NSUInteger noOfMatches = [regex numberOfMatchesInString:newStr
                                                        options:0
                                                          range:NSMakeRange(0, [newStr length])];
    if (noOfMatches==0){
        return NO;
    }
    return YES;
} 
```

实施此有效字符串后为：
12.004546
4546.5456465
.5464
0.454

很快....

您还可以使用此限制小数点后的整数个数`Regular Expression`

`@"^([0-9]*)(\\.([0-9]{0,2})?)?$"`

实施此有效字符串后为：
12.00
4546.54
.54
0.45

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:23:51.247

```
 -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

NSString *sepStr;

NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

NSArray *sep = [newString componentsSeparatedByString:@"."];
if([sep count]>=2)
   {
        sepStr=[NSString stringWithFormat:@"%@",[sep objectAtIndex:1]];
        NSLog(@"sepStr:%@",sepStr);
        if([sepStr length] >2)
       {
        return NO;
       }
    else 
       {
        return YES;
       }

   }
   return YES;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T09:16:57.110

当输入一个点时，你应该检查一个点是否已经存在，如果存在则返回 NO。

```
 NSString * newString = [textField.text stringByReplacingCharactersInRange: range withString: string];
 NSArray * sep = [newString componentsSeparatedByString: @"."];
 if([string isEqualToString:@"."] && [sep count] > 1){
    //already a . is  there.. so don't allow new one
    return NO;
 }
 if ([sep count] >= 2) {
     NSString * sepStr = [NSString stringWithFormat: @"%@", [sep objectAtIndex: 1]];
     NSLog(@"sepStr:%@", sepStr);

     return !([sepStr length] > 2);
 }
 return YES; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T15:42:35.753

使用 reg ex 更新了 Swift 3 的答案`"^([0-9]*)(\\.([0-9]+)?)?$"`：

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    let newText = ((textField.text ?? "") as NSString).replacingCharacters(in: range, with: string)

    let expression = "^([0-9]*)(\\.([0-9]+)?)?$"

    guard let regex = try? NSRegularExpression(pattern: expression, options: .caseInsensitive) else {
        return false
    }
    let noOfMatches = regex.numberOfMatches(in: newText, options: [], range: NSMakeRange(0, newText.characters.count))

    return noOfMatches > 0
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:09:11.057

您可以使用此方法：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
     NSRange temprange = [textField.text rangeOfString:@"."];
        if ((temprange.location != NSNotFound) && [string isEqualToString:@"."])
        {
            return NO;
        }
    return YES;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-25T11:20:53.043

```
NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    NSArray *sep = [newString componentsSeparatedByString:@"."];
    if([string isEqualToString:@"."]){
        if([textField.text containsString:@"."]){
            return NO;
        }
    }
    if([sep count] >= 2)
    {
        NSString *sepStr=[NSString stringWithFormat:@"%@",[sep objectAtIndex:1]];
        return !([sepStr length]>2);
    }
    return YES;
} 
```

# android - 如何将 ActionBarSherlock 放在底部？

> ID：12911133
> 
> 赞同：2
> 
> 时间：2012-10-16T09:05:10.710
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，我需要将它放在底部。

有没有办法做到这一点？

我可以`android:gravity="bottom"`在 style.xml 中设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:14:27.680

首先，你不能改变`ActionBarSherlock`. 它将始终显示在顶部。但是，您可以轻松地将您添加的选项卡和其他内容放在`ActionBar`底部显示。

我也有类似的问题。我通过放入标签来解决`android:uiOptions="splitActionBarWhenNarrow"`它`<activity>`。

例如，这有效：

```
<activity android:name=".my.Activity" 
          android:uiOptions="splitActionBarWhenNarrow"/> 
```

但是，只有在纵向模式下，它才会实际显示在屏幕底部。因此，您必须将清单中的应用程序方向定义为纵向，否则它将再次转到顶部。

# python - python UI冻结

> ID：12911136
> 
> 赞同：3
> 
> 时间：2012-10-16T09:05:21.777
> 
> 标签：python, multithreading, user-interface

我正在尝试在按下“开始”按钮开始计数器后，在按下停止按钮停止计数器后创建基本功能，但是在我开始进程后，看起来只有计数线程在工作并且无法按下停止按钮

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
from PyQt4 import QtGui, QtCore
from test.test_sax import start
import time
from threading import Thread
import threading
class Example(QtGui.QWidget):
    x = 1
    bol = True
    def __init__(self):
        super(Example, self).__init__()

        self.qbtn = QtGui.QPushButton('Quit', self)

        self.qbtn.resize(self.qbtn.sizeHint())
        self.qbtn.move(50, 50)
        self.qbtn2 = QtGui.QPushButton('Start', self)

        self.qbtn2.resize(self.qbtn2.sizeHint())
        self.qbtn2.move(150, 50)

        self.qbtn.clicked.connect(self.stopCounter)
        self.qbtn2.clicked.connect(self.startUI)

        self.setGeometry(300, 300, 250, 150)
        self.setWindowTitle('Quit button')
        self.show()
    def stopCounter(self):
        Example.bol = False

    def startUI(self):
        Example.bol = True
        thread = Thread(self.counterr())

    def counterr(self):
        x = 0
        while Example.bol:
            print x
            x += 1

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    a = Example()
    sys.exit(app.exec_()) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:11:38.860

现在，您甚至在创建线程之前就调用了慢速函数。试试这个：

```
thread = Thread(target=self.counterr)
thread.start() 
```

在 Qt 应用程序中，您可能还会考虑[`QThread`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qthread.html)可以运行自己的事件循环并使用信号和插槽与主线程通信的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:11:58.120

`Thread`恐怕您完全错误地使用了该课程。您将方法的结果传递给它，该结果*永远*`counterr`不会返回。

`counterr`将（*不*调用它）作为传递给`Thread`类*`target`*，然后显式启动它：

```
def startUI(self):
    self.bol = True
    thread = Thread(target=self.counterr)
    thread.start() 
```

此外，仅`bol`作为实例变量访问，而不是类变量。

# uitableview - 询问自定义 TableViewCell

> ID：12911142
> 
> 赞同：0
> 
> 时间：2012-10-16T09:05:49.620
> 
> 标签：uitableview

我想让每个单元格动态显示不同的图片，我如何管理每个单元格来识别图片？我希望单元格有不同的图片，单元格的高度由图片的高度定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:02:04.620

cell.imageView.image = [UIImage imageNamed:@"image.png"];

尝试使用上面的代码将图像添加到您的 tableview 单元格。

本教程也可能有所帮助： http: [//www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/) 希望这有助于阿德里安

# c# - 在 C# 中使用主机名 smtp.gmail.com 发送电子邮件的问题

> ID：12911149
> 
> 赞同：-4
> 
> 时间：2012-10-16T09:06:19.003
> 
> 标签：c#

> **可能重复：**
> [通过 Gmail 在 .NET 中发送电子邮件](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)

我在使用 C# 程序发送电子邮件时遇到网络超时问题

我的代码是

```
protected void sendEmail(String m_RecipentTo)
{
    MailMessage mailMessage = new MailMessage();
    SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
    mailMessage.To.Add(m_RecipentTo);
    mailMessage.Subject = m_Subject;
    mailMessage.Body = m_Body;
    mailMessage.From =  new MailAddress(m_SenderEmail);
    SmtpServer.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
    SmtpServer.Port = 465;
    SmtpServer.EnableSsl = true;
    SmtpServer.Credentials = new System.Net.NetworkCredential(username, password);
    SmtpServer.Send(mailMessage);
} 
```

## 我尝试使用它提供的端口号 587

尝试以访问权限 74.125.25.108:587 禁止的方式访问套接字。

我在文件墙设置 -> 入站规则 -> 端口下添加了端口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:11:06.317

这是最简单的方法。。

```
using System.Net.Mail;

SmtpClient smtpClient = new SmtpClient("smtp.gmail.com",587);
smtpClient.EnableSsl = true;
System.Net.NetworkCredential credentials = new System.Net.NetworkCredential("USER_NAME", "PASSWORD");
smtpClient.Credentials = credentials;

string[] tos;
this.to=this.to.Replace(',',' ');
//this.Bcc = this.bcc;
tos=this.to.Split();
for (int i = 0; i < tos.Length; i++)
{
    MailMessage ml = new MailMessage(this.from, tos[i].ToString(), this.sub, 
                     this.msg);
    ml.IsBodyHtml = true;
    smtpClient.Send(ml);
} 
```

# magento-1.7 - 显示最新的 Magento 产品而不设置日期

> ID：12911152
> 
> 赞同：0
> 
> 时间：2012-10-16T09:06:26.290
> 
> 标签：magento-1.7

我使用 Magento 1.7.0.2。

我想在我的主页上显示 8 个最新添加的产品，但没有设置日期“从”和“到”。我需要它是自动的。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:57:03.453

产品 ID 是递增的。通过对它们进行降序排序并将集合限制为 8 个，您将拥有 8 个最后的产品。

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->getSelect()->order('entity_id desc')->limit(8);

/* just for testing
Mage::log($collection->getSelect()->assemble());

foreach ($collection as $product) {
    Mage::log($product->getSku());
} */ 
```

使用该集合，您可以做任何您需要的事情，添加可见性和状态过滤器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T08:15:49.737

为此，您需要使用创建订单的日期。显示所有产品信息如价格、名称等的关键是给我们 `->addAttributeToSelect('*')`的脚本：

```
$store_id = Mage::app()->getStore()->getId();
$_products = Mage::getResourceModel('reports/product_collection')
  ->addStoreFilter($store_id)
  ->addAttributeToFilter('visibility', 4)
  ->addAttributeToFilter('status', 1)  
  ->addAttributeToSelect('*')
  ->setVisibility(array(2,3,4))                          
  ->setOrder('created_at', 'desc')
  ->setPage(1, 9); 
```

# c# - 如何为这种情况构建 Linq 查询

> ID：12911155
> 
> 赞同：0
> 
> 时间：2012-10-16T09:06:29.873
> 
> 标签：c#, asp.net, linq, c#-4.0, linq-to-sql

我的表文件和值：

**IdFavorite** : 1,2,3,4,5

**FavoriteName** : Fav1, Fav2, Fav3, Fav4, Fav5

**用户 ID** : 1, 3, 3, 4, 3

**公共收藏**：0, 1, 0, 1, 0

截至目前，我使用以下 Linq 查询来获取基于**用户 ID的****收藏名称列表**

 **```
public IList<ReportFavorite> GetReportFavorites(int userId)
{
    return _reportFavoriteRepository.GetMany(x => x.UserId == userId).ToList();
} 
```

现在，条件如上**加号**，我需要获取所有PublicFavorite为1的Favorite **Names** **。**我需要根据这个条件进行Linq查询。谢谢。

 **例如：如果我的**用户 ID**为 3，那么我应该将**收藏夹名称**设为**Fav2**、**Fav3**、**Fav5**和**Fav4**（因为**PublicFavorite**为 1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:09:47.567

```
var res =
    from item in _reportFavoriteRepository
    where item.UserId == userId || item.PublicFavorite == publicFavorite
    select item.FavoriteName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:12:10.343

根据 Jon 的评论，我使用了以下代码。它按预期工作正常。

```
GetMany(x => x.UserId == userId || x.PublicFavorite == 1) 
```****

# forms - 在未启用 SMTP 的情况下从服务器发送电子邮件

> ID：12911157
> 
> 赞同：0
> 
> 时间：2012-10-16T09:06:32.963
> 
> 标签：forms, email, c#-4.0, smtp, sendmail

我写了几个包含“联系我们”表格的网站。

但是，我们的主机最近关闭了 SMTP。他们的借口是“安全问题”。

他们提供的解决方案是他们实施了规则，即从平台生成的所有邮件必须使用 sendmail/phpmail 功能发送，并通过邮件中继检查邮件及其内容并确保恶意内容和活动被完全阻止，他们建议我使用“虚拟或专用解决方案”。

我不知道他们想让我做什么才能让电子邮件再次正常工作，这非常紧迫，因为许多客户没有收到他们的电子邮件。有没有一种简单的方法可以解决这个问题，以便让电子邮件再次正常工作？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:10:46.197

这通常意味着您必须在代码中指定他们提供的新邮件服务器，而不是 localhost。此外，之前，您可以在不进行身份验证的情况下发送邮件，但现在，您必须拥有一个帐户，并且您必须在发送邮件之前进行身份验证。（不过我不确定，可能他们允许中继到他们自己的服务器，而您可能不需要身份验证）。

转到您的主机帐户的控制面板并检查邮件面板。在那里查看新的 smtp 服务器名称，并对您的站点进行编码以使用此 smtp 服务器和凭据。这将让您再次发送邮件。

# php - 如何在php中重命名上传的图像文件

> ID：12911158
> 
> 赞同：1
> 
> 时间：2012-10-16T09:06:34.807
> 
> 标签：php, image, upload

我想重命名我上传的每个图像文件。我正在为一个电子商务网站工作，我想从数据库上传每张图片及其产品名称和 ID。

产品名称应以（4124-01.jpg）结尾，并将其名称上传到数据库。其中 4124 是产品名称，01 是 ID。

我是 PHP 和 stackoverflow 的新手。

先感谢您。

这是一个小代码:::::::::

```
if(is_uploaded_file($_FILES['image']['tmp_name'])){
    $allowed=array('image/jpg','image/jpeg','image/gif','image/x-png','image/png');
    if(in_array($_FILES['image']['type'],$allowed)){
        echo 'Allowed format. Wait a little for completion of this task.';
    }else{
        $errors[]='Invalid format of image file. Please select a jpg, jpeg or png file.';
    }  // End of if(in_array($_FILES['image']['type'],$allwed)){

    $temp='../products/'.($_FILES['image']['name']);
    if(move_uploaded_file($_FILES['image']['tmp_name'],$temp)){
        $product_name=$_FILES['image']['name'];
        echo '<p>'.$product_name .'has been uploaded';
        echo '<img src="../products/'.$product_name.'" width="300" height="300">';
    }else{
        $errors[]='The image could not be moved. Check your directories.';
    } // End of if(move_uploaded_file($_FILES['image']['tmp_name'],$temp)){

}else{
    $errors[]='You did not select a product image.';
}  // End of if(is_uploaded_file($_FILES['image']['tmp_name'])){ 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:11:23.673

如果您已经有了产品的 id 和名称，那应该是您的`$temp`变量的值。

您可以使用以下代码获取扩展：

```
$extension = strtolower(substr(strrchr($_FILES['image']['name'], '.'), 1)); 
```

并与您想要的名称连接。

希望能帮助到你。

# java - 当我尝试使用 java 包 jdde 时，MATLAB 挂起，但仅在系统重新启动后第一次出现

> ID：12911160
> 
> 赞同：18
> 
> 时间：2012-10-16T09:06:37.287
> 
> 标签：java, matlab, dll, jar, dde

我在 MATLAB 中使用外部 java 包[jdde](http://jdde.pretty-tools.com/)。请注意，对于以下示例，软件包随附的 DLL 文件需要位于 MATLAB 库路径中。执行此操作的方法因您的 MATLAB 版本而异。

在 MATLAB 中使用 jdde 工作正常，除了我第一次重新启动计算机或我在 Windows 中注销/登录之后。当我在计算机重新启动后第一次运行以下代码时，MATLAB 将永远保持忙碌模式（CPU 为 0%）。发生这种情况时，我会在任务管理器中终止 MATLAB 进程并重新启动 MATLAB。当我再次运行相同的代码时，它会立即执行（不会永远保持忙碌）。

```
javaaddpath('C:\pretty-tools-JDDE-1.0.2.jar')
a =  com.pretty_tools.dde.client.DDEClientConversation;
a.connect('',''); 
```

总而言之，上面的代码将导致 MATLAB 在系统重新启动或用户注销/登录后第一次运行时永远保持忙碌状态。当我在杀死 ​​MATLAB 进程后再次运行它时，它会工作得很好（不会挂断 MATLAB）。

我在不同的计算机和不同版本的 MATLAB（2010 和 2012）中看到了这种行为。我正在使用 Windows 7 x64。

在代码示例中，a.connect 命令是导致 MATLAB 永远保持忙碌的命令。将此命令放在 try/catch 块中没有帮助，因为 a.connect 不会导致错误，它只是永远不会继续。

我不确定这个问题是由 MATLAB 还是由 java 包引起的。任何如何摆脱这种行为的想法将不胜感激。

注意：a.connect 的输入参数无关紧要，它总是会挂起，所以在这个例子中我只是给出了 '' 作为输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T02:57:14.323

尝试单独运行 add path 命令，以便在尝试执行依赖于 jar 的代码之前有一两秒的时间。我发现这通常是与 Matlab 中的 jar 相关的间歇性问题的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T13:06:16.967

代码在 DdeInitialize() 方法中无任何已知原因挂起。新版本 JDDE-2.0.3 包含此问题的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:28:27.977

最初切换到经典模式，这样你就可以摆脱它。

# java - 如何在java中生成增量标识符

> ID：12911163
> 
> 赞同：1
> 
> 时间：2012-10-16T09:06:44.790
> 
> 标签：java

我有要求我不断收到需要写入文件的消息。每次收到新消息时，都需要将其写入单独的文件中。我想要的是生成一个唯一标识符以用作文件名。我也想保留消息的顺序。我的意思是，作为文件名生成的标识符应该始终是增量的。

我使用**UUID.randomUUID()**来生成文件名，但这种方法的问题是 UUID 只保证标识符的随机性，而不是增量。结果，我失去了文件的顺序（我希望首先生成的文件应该出现在列表的首位）。

已知方法

1.  可以使用 System.currentTimeMillis() 但我可以同时接收多条消息。

2.另一种方法是实现静态长值并在要创建文件时将其递增，并将长值用作文件名。但我不确定这种方法。此外，这似乎不是解决我的问题的正确方法。我认为可能有比这个更好的解决方案。

如果有人可以建议我更好地解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:10:47.157

如果您希望您的 id 值即使在服务器重新启动之间均匀上升，那么您必须将其基于系统时间，或者有一些精心设计的健壮逻辑来保留最后使用的 ID。请注意，单独实现鲁棒性并不难，但以高性能和可扩展的方式实现它却是。

如果您还需要 id 在冗余服务器集群中的多个节点之间是唯一的，那么您需要更复杂的逻辑，这肯定涉及所有盒子同步访问的持久存储。当然，要让它表现得更好更难。

我能看到的最佳选择是拥有一个相当长的 ID，以便为这些部分留出空间：

1.  `System.currentTimeMillis`长期唯一性（跨重启）；
2.  `System.nanotime`粒度更细；
3.  每个服务器节点的唯一 ID（以特定于平台的方式确定）。

该方法仍然必须记住最后生成的值，并在重复时重试。不过，它不必重试太多次，直到下一个`nanoTime`时钟滴答声——它甚至可以忙着等待它。

没有第3点的代码草图（单节点实现）：

```
private static long lastNanos;
public static synchronized String uniqueId() {
  for (;/*ever*/;) {
    final long n = System.nanoTime();
    if (n == lastNanos) continue;
    lastNanos = n;
    return "" + System.currentTimeMillis() + n;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:19:05.423

好的，我举手。我的最后一个答案相当不稳定，我已将其删除。

与网站的精神保持一致，我想我会尝试不同的战术。

如果您说您将这些消息保存在单个文件中，那么您可以尝试使用文件大小创建唯一 ID 之类的方法？

在将消息写入文件之前，它的 id 可能是文件的当前大小。

如果这些消息需要在多个文件中是唯一的，您可以添加文件名 + 大小作为 id。

我会把同步的**烫手山芋留到另一天。**但是您可以将所有这些都包装在一个同步对象中，以跟踪事物。

另外，我假设将来不会删除写入文件的任何消息。

附加说明：您可以创建一个消息处理对象，该对象在构造时（或通过创建方法）打开文件。该对象将获取文件的初始大小，并将其用作唯一 ID。随着每条消息的添加（以同步方式），id 会随着消息的大小而增加。这将解决性能问题。如果多个 JVM/Node 访问同一个文件，将无法正常工作。

骨架理念：

```
public class MessageSink {
    private long id = 0;

    public MessageSink(String filename) {
       id = ... get file size ..
    }

    public synchronized addMessage(Message msg) {
       msg.setId(id);
       .. write to file + flush ..
       .. or add to stack of messages that need to be written to file
       .. at a later stage.
       id = id + msg.getSize();
    }

    public void flushMessages() {
       .. open file
       .. for each message in stack write ...
       .. flush and close file
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:49:26.653

我有相同的要求并找到了合适的解决方案。Twitter Snowflake 使用一种简单的算法来生成**可排序的 64 位（长）ID**。Snowflake 是在 Scala 上编写的，但方法很简单，可以很容易地在 Java 代码中使用。

id 由以下部分组成： *时间戳*- 41 位（毫秒精度，自定义纪元给我们 69 年）； *机器 ID* - 10 位（MAC 地址可用作硬件 ID）； *序列号*- 12 位 - 每台机器每 4096 次翻转一次（具有保护以避免在同一毫秒内翻转）

公式如下：`((timestamp - customEpoch) << timestampShift) | (machineId << machineIdShift) | sequenceNumber;`

每个组件的移位取决于它在 ID 中的位位置。

详细描述和源码可以在github上找到：

[推特雪花](https://github.com/twitter/snowflake "推特雪花")

[雪花算法的基本 Java 实现](https://github.com/Predictor/javasnowflake/ "java雪花")

# javascript - 在 ie8 中添加选项时动态选择冻结

> ID：12911164
> 
> 赞同：1
> 
> 时间：2012-10-16T09:06:49.613
> 
> 标签：javascript, jquery, ajax, json

我有一个`<select>`我用 JQ 添加的，它加载了类（值+数据）列表中的所有选项，通过`$.ajax`调用返回，并将其加载到 div。

我的代码：

```
varTempDiv+= '<select class="selectFromList" width="200">';
$.each(data.d, function (index) {                                          
    varTempDiv+= '<option value="' + this.value >+ '">' + this.txtName + '</option>';
});
varTempDiv+= '</select>';
$("#loadedDiv").html(varTempDiv); 
```

它在 chrome 中运行良好，但在 ie8 中它冻结到第二个附加到列表长度。长度从 100 到 1000+ 个项目开始。

我该如何解决这些问题？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:17:17.477

尝试使用本机`for`循环而不是`jQuery.each`. 它应该会给您带来显着的性能改进，尤其是当您的数组中有这么多项目时。看看这个比较[http://jsperf.com/jquery-each-vs-for-loop/69](http://jsperf.com/jquery-each-vs-for-loop/69)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:12:54.273

如果你改变会发生什么

```
varTempDiv+= '<option value="' + this.value >+ '">' + this.txtName + '</option>'; 
```

到

```
varTempDiv+= '<option value="' + this.value + '">' + this.txtName + '</option>'; 
```

选择中的数千个项目似乎也无法使用，也许您应该考虑不同的设计。

# java - xml映射错误

> ID：12911166
> 
> 赞同：-1
> 
> 时间：2012-10-16T09:06:52.060
> 
> 标签：java, xml, hibernate, xml-parsing

我正在处理项目，因为有一个 xml 文件（IDE Eclipse Indigo）。我正面临单线问题

```
<?xml version="1.0" encoding="UTF-8"?>
<BookingConfirmRQ xmlns="http://www.expediaconnect.com/EQC/BC/2007/09"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Authentication username="yyyyyyyy" password="xxxxxxxx" />
<Hotel id="<hotelId/>" />
<BookingConfirmNumbers>
    <BookingConfirmNumber bookingID="<bookindId/>"
        bookingType="<bookingType/>" confirmNumber="<confirmNumber/>"
        confirmTime="<confirmTime/>" />
</BookingConfirmNumbers>
</BookingConfirmRQ> 
```

在*<Hotel id="<hotelId/>"/>*附近出现错误，例如_

*与元素类型“Hotel”关联的属性“id”的值不得包含“<”字符。*

我搜索它，检查罐子，重新格式化仍然出错，有人可以帮助我吗？感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:54:15.450

You can ignore validation of XML from eclipse windows-preference-validation menu and this way if you don't want to change you can avoid this error

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:34:53.197

您需要像这样转义属性值中的尖括号：

```
 <Hotel id="&lt;hotelId/&gt;" /> 
```

与所有其他属性相同。尖括号位于必须在 XML 中转义的保留字符列表中。

除非您这样做，否则 XML 格式不正确，并且不会处理它。关闭验证 - 即针对 DTD 或模式的验证 - 在这里无济于事。XML 必须格式正确才能被解析。

也就是说，XML 看起来很奇怪，好像您将整个 XML 元素作为属性值包含在内，这是错误的。因此，即使您解决了转义问题，此 XML 也可能不会说出您的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:13:25.427

属性值应该只包含文字文本：

```
<Hotel id="134" /> 
```

# c# - 用 Smo 执行 DBCC CHECKCONSTRAINTS？

> ID：12911168
> 
> 赞同：1
> 
> 时间：2012-10-16T09:06:53.753
> 
> 标签：c#, .net, tsql, smo, dbcc

是否有一个 Smo 方法可以`DBCC CHECKCONSTRAINTS`在数据库上执行 TSQL 并将出现的消息返回为`IEnumerable<String>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:59:21.973

看起来不像，如果您查看数据库类的 SMO 编程指南，没有列出任何检查约束：

[MSDN - SMO 参考指南](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.database.aspx)

# oauth-2.0 - WSO2-IS v4.0.0m9 和 OAuth 2.0 操场上的 NullPointerException

> ID：12911169
> 
> 赞同：0
> 
> 时间：2012-10-16T09:06:54.793
> 
> 标签：oauth-2.0, wso2, wso2is, oauth2-playground

OAuth 2.0 playground（playground）是一个用于 WSO2 Identity Server（WSO2-IS）的 OAuth 客户端示例应用程序。我可以使用 WSO2-IS v4.0.0m3 执行 Playground，但是使用 WSO2-IS v4.0.0m9 会崩溃（异常消息如下）。游乐场是否已针对 IS v4.0.0m9 进行了更新？如何更新/修复游乐场样本？

--- HTTP500 ---

```
java.lang.NullPointerException
org.wso2.carbon.identity.oauth.ui.client.OAuth2ServiceClient._validateClient(OAuth2ServiceClient.java:113)
org.wso2.carbon.identity.oauth.ui.client.OAuth2ServiceClient.validateClient(OAuth2ServiceClient.java:107)
org.wso2.carbon.identity.oauth.ui.endpoints.authz.OAuth2AuthzEndpoint.validateClient(OAuth2AuthzEndpoint.java:171)
org.wso2.carbon.identity.oauth.ui.endpoints.authz.OAuth2AuthzEndpoint.handleOAuthAuthorizationRequest(OAuth2AuthzEndpoint.java:106)
org.wso2.carbon.identity.oauth.ui.endpoints.authz.OAuth2AuthzEndpoint.service(OAuth2AuthzEndpoint.java:70) 
```

# ios - 当我在 iOS 中收到内存警告时，内存使用阈值是多少

> ID：12911170
> 
> 赞同：0
> 
> 时间：2012-10-16T09:06:56.080
> 
> 标签：ios, memory, didreceivememorywarning

我确实在我的 iOS 应用程序中收到了这些警告

```
Received memory warning. Level=1
Received memory warning. Level=2 
```

问题是，在 Level=2 警告之后，我的应用程序将被杀死......在收到此类警告之前，我的应用程序可以使用多少 MB 内存？在我的应用程序因 2 级内存警告而被杀死之前，我在 XCode Instruments 中获得了 < 30Mb 的“实时字节”。这是我的阅读错误，还是我不打算在我的应用程序中使用超过 30Mb 的内存？

我正在使用 iPod Touch 4th Gen 和 iPhone 4 进行测试，并将这些设备作为最低目标。

任何建议表示赞赏，并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:47:52.090

首先，我会问自己，您将什么加载到占用这么多空间的内存中。其次，如果您以正确的方式释放所有内容。ARC 简化了我们的生活，但它不是垃圾收集器，可能存在废弃内存和其他导致内存增长的问题。在 iphone 3gs 中，内存的限制约为 25MB，当您达到它时，您会收到内存警告，如果您的应用程序无法刷新一些内存，它将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:18:03.283

如果您想支持 iPhone 3GS 等旧设备，我建议不要超过 12-15MB。

# monitoring - MQ 统计队列 - PCF 请求如何影响它？

> ID：12911171
> 
> 赞同：2
> 
> 时间：2012-10-16T09:07:06.007
> 
> 标签：monitoring, ibm-mq

大家好，

我想知道，如果我要在队列管理器上将 STATQ 设置为 ON 并开始跟踪队列管理器的统计信息及其关联队列...

那么如果我要执行 PCF CMQC.MQIA_MSG_DEQ_COUNT 请求，这会影响我通过统计队列获取的信息吗？

我会认为“是的”，但我想在我自己实际安装并尝试之前先在这里问一下。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:54:20.953

**更新：**

是的，确实有影响。因为要查询统计信息，所以会在`SYSTEM.ADMIN.COMMAND.QUEUE`. 您可以通过保持 MQ Explorer 打开并在命令窗口中运行 amqsmon 来测试这一点。您会注意到 Put 和 Get 计数都在增加。

# php - wp_query 不工作

> ID：12911173
> 
> 赞同：0
> 
> 时间：2012-10-16T09:07:20.853
> 
> 标签：php, wordpress

我决定在我的主页上开始使用`wp_query`而不是, 我想从 div 中的特定页面调用内容。`query_posts`只是想知道我在这里遗漏了什么，因为什么都没有出现，而且我确实有一个 ID 为 140 的页面。我对此还是很陌生，谢谢！

```
<div class="home-info" > 
<?php 
if (have_posts() ) :

$the_query = new WP_Query( 'paged=140' );
while ($the_query->have_posts() ) : $the_query->the_post();
echo the_content();
endwhile;
wp_reset_postdata();

endif; 
?> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:16:10.633

您在 WP_Query 中使用了错误的参数，它应该是`page_id`而不是`paged`. 这是 Codex 的参考资料；

[http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)

# jms - Web 控制台异常：在 1 个配置的 url 中的任何一个都找不到代理

> ID：12911191
> 
> 赞同：1
> 
> 时间：2012-10-16T09:08:10.500
> 
> 标签：jms, activemq, spring-jms

我正在尝试在 tomee+ 1.5.0 中启动 Web 控制台，如下所示：http://activemq.apache.org/web-console.html [（](http://activemq.apache.org/web-console.html)使用 Tomcat 的示例配置）

我在启动服务器时使用以下参数：

*-Dcatalina.base="D:\Kit\apache-tomee-plus-1.5.0" -Dcatalina.home="D:\Kit\apache-tomee-plus-1.5.0" -Dwtp.deploy="D: \Kit\apache-tomee-plus-1.5.0\wtpwebapps" -Djava.endorsed.dirs="D:\Kit\apache-tomee-plus-1.5.0\endorsed" -Dwebconsole.type=properties -Dwebconsole.jms .url=tcp://localhost:61616 -Dwebconsole.jmx.url=service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi -Dwebconsole.jmx.user=tomee -Dwebconsole.jmx。密码=tomee -Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.port=1099*

我可以与 jconsole 连接，`service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi`但在 MBeans 中看不到“org.apache.activemq”。当我尝试访问网络控制台时

> `http://localhost:8080/activemq-web-console-5.7.0/`

我不断收到以下异常：

```
Caused by: java.lang.IllegalStateException: No broker is found at any of the 1 configured urls
at org.apache.activemq.web.RemoteJMXBrokerFacade.createConnection(RemoteJMXBrokerFacade.java:168) 
```

这是 web 控制台战争的 activemq.xml 文件中的代理：

```
<broker brokerName="web-console" useJmx="true" xmlns="http://activemq.apache.org/schema/core">

<persistenceAdapter>
  <kahaDB directory="${activemq.data}/kahadb"/>
</persistenceAdapter>

<transportConnectors>
  <transportConnector name="openwire" uri="tcp://localhost:61616"/>
  <transportConnector name="stomp" uri="stomp://localhost:61613"/>
</transportConnectors> </broker> 
```

有人可以给我一个关于这个问题的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:22:31.630

该问题与 ActiveMQResourceAdapter 中的“Datasource”参数有关。此版本有效：

```
 <Resource id="JMSAdapter" type="ActiveMQResourceAdapter">
            BrokerXmlConfig = broker:(tcp://localhost:61616)?persistent=false&useJmx=true
            ServerUrl = tcp://localhost:61616
            Datasource =
    </Resource> 
```

这与以下内容有关：[https ://issues.apache.org/jira/browse/TOMEE-474](https://issues.apache.org/jira/browse/TOMEE-474)

# jquery - Jquery UI DatePicker 显示在可滚动页面的顶部

> ID：12911194
> 
> 赞同：0
> 
> 时间：2012-10-16T09:08:21.700
> 
> 标签：jquery, jquery-ui

我有一个页面，其中包含两个文本框，其中添加了 jquery datepicker 通过

```
function setDatepickers() {
$('.datepicker').datepicker();
$('.datepicker').attr('date', 'date');
} 
```

页面底部有文本框，我们需要稍微向下滚动才能看到文本框。当我点击文本框时，它会打开日期选择器，但它位于不同的垂直位置，比如有时在输入文本框上方一点，有时我需要向上滚动才能看到日期选择器。这仅在 IE8 中发生，而不在 Firefox 中发生。Firefox 3.6.3 显示它完美，几乎附加到输入文本框。

使用的jquery版本有：jquery v1.4.1 jquery UI 1.8.5

我试图从其中的 checkoffset 方法中获取值，并发现以下结果：

```
 _checkOffset: function (a, c, d) {
        var f = a.dpDiv.outerWidth(),
        j = a.dpDiv.outerHeight(),
        k = a.input ? a.input.outerWidth() : 0,
        l = a.input ? a.input.outerHeight() : 0,
        m = document.documentElement.clientWidth + b(document).scrollLeft(),
        o = document.documentElement.clientHeight + b(document).scrollTop();
        alert(j); alert(k); alert(l); alert(m); alert(o);
        c.left -= this._get(a, "isRTL") ? f - k : 0;
        c.left -= d && c.left == a.input.offset().left ? b(document).scrollLeft() : 0;
        c.top -= d && c.top == a.input.offset().top + l ? b(document).scrollTop() : 0;
        c.left -= Math.min(c.left, c.left + f > m && m > f ? Math.abs(c.left + f - m) : 0);
        c.top -= Math.min(c.top, c.top + j > o && o > j ? Math.abs(j + l) : 0);
        return c
    }, 
```

警报的结果是：

IE8：159 135 25 1132 359

火狐：159 136 25 1136 843

Final Div 出现在：Firefox：前 582 左 98

IE：前98，左96

我认为 IE8 中的 Top 属性设置不正确，但不确定需要更改什么来解决这个问题？任何帮助是极大的赞赏。

谢谢，阿什什耆那教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:21:12.927

此错误已在 1.7.2 中修复。它相对于 IE8 中的边框模型。

有关详细信息，请参见此处：[Ticket #5520](http://bugs.jquery.com/ticket/5520)

# actionscript-3 - as3 我可以在一行上做到这一点吗

> ID：12911196
> 
> 赞同：-1
> 
> 时间：2012-10-16T09:08:34.830
> 
> 标签：actionscript-3, casting, movieclip, get-childitem

嗨，我可以去这个

```
var firstname = firstname_mc;
var fname = firstname.getChildAt(0).text; 
```

但

```
var firstname = MovieClip(firstname_mc).getChildAt(0).text; 
```

不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:31:47.900

如果 firstname_mc 是影片剪辑或精灵：

```
var firstname = TextField(firstname_mc.getChildAt(0)).text; 
```

但是，如果您在 firstname_mc 中​​添加另一个影片剪辑，就在文本字段的正下方，您就搞砸了。那么你不确定它是 0 的孩子。那么为什么不给它的文本字段一个名字（比如“label_txt”）呢？然后你可以做更短的语法：

```
var firstname = firstname_mc.label_txt.text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:04:09.140

试试这个：

```
var firstname = TextField(MovieClip(firstname_mc).getChildAt(0)).text; 
```

假设**firstname_mc**是一个包含您尝试访问的文本字段的影片剪辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:08:22.203

我假设`firstname_mc`不是一个`MovieClip`实例。也许它是一个实例`DisplayObjectContainer`？因此铸造失败。

# c# - 用于连接/断开互联网的 C# 代码

> ID：12911203
> 
> 赞同：-8
> 
> 时间：2012-10-16T09:08:49.713
> 
> 标签：c#, visual-studio-2010

> **可能重复：**
> [C# - 以编程方式断开网络连接](https://stackoverflow.com/questions/8244496/c-sharp-programmatically-disconnect-network-connectivity)

我需要制作一个每十分钟连接/断开互联网的应用程序..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:10:42.550

shell命令怎么样：

`rasdial.exe <connName> <userName> <password>`

# javascript - 带有地理位置的谷歌地图距离计算器

> ID：12911204
> 
> 赞同：6
> 
> 时间：2012-10-16T09:08:50.920
> 
> 标签：javascript, geolocation, maps

我有一个小型网络应用程序，可以计算谷歌地图上两点之间的距离。

我希望它在加载应用程序时将用户放置在当前位置。我尝试了不同的地理定位方法，但没有任何运气。

最好的办法是让它计算与用户位置的距离。然而，仅仅让用户在网络应用程序中的位置对我来说就足够了。

```
<html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

    var directionDisplay;
    var map;

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var copenhagen = new google.maps.LatLng(55.6771, 12.5704);
    var myOptions = {
        zoom:12,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: copenhagen
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
    }

    var directionsService = new google.maps.DirectionsService();

    function calcRoute() {
    var start = document.getElementById("start").value;
    var end = document.getElementById("end").value;
    var distanceInput = document.getElementById("distance");

    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            distanceInput.value = response.routes[0].legs[0].distance.value / 1000;
        }
    });
    }
    </script>

    <title>Distance Calculator</title>

    <style type="text/css">

            body {
                font-family:Helvetica, Arial;
            }
            #map_canvas {
                height: 50%;
            }
    </style>
    </head>
    <body>

    <body onload="initialize()">
    <p>Enter your current location and desired destination to get the distance</p>
        <div>
            <p>
                <label for="start">Start: </label>
                <input type="text" name="start" id="start" />

                <label for="end">End: </label>
                <input type="text" name="end" id="end" />

                <input type="submit" value="Calculate Route" onclick="calcRoute()" />
            </p>
            <p>
                <label for="distance">Distance (km): </label>
                <input type="text" name="distance" id="distance" readonly="true" />
            </p>
        </div>
        <div id="map_canvas"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:33:42.460

使用 javascript 获取用户的位置：

```
var showPosition = function (position) {
    var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    // Do whatever you want with userLatLng.
}
navigator.geolocation.getCurrentPosition(showPosition); // Attach showPosition Callback which will be executed as soon as position is available. Remember it needs user confirmation. 
```

例如，参见[http://jsfiddle.net/Stouffi/FCFSW/ 。](http://jsfiddle.net/Stouffi/FCFSW/)

**更新：**

您需要更改 calcRoute 按钮的 onclick 回调。新的将请求用户的位置。获取位置后，调用 calcRoute。

```
function findCurrentLocation() {
    navigator.geolocation.getCurrentPosition(calcRoute);
} 
```

在 calcRoute 中，位置对象将作为参数提供，您需要将其转换为 LatLng 对象以处理 google 路线服务。

```
function calcRoute(currentLocation) {
    // create a LatLng object from the position object.
    var start = new google.maps.LatLng(currentLocation.coords.latitude, currentLocation.coords.longitude);
    // Continue with your original code.
    var end = document.getElementById("end").value;
    // etc. 
```

见[http://jsfiddle.net/Stouffi/mCYTf/](http://jsfiddle.net/Stouffi/mCYTf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:23:20.200

你需要试试这个[链接](http://studiowhiz.com/2010/10/02/google-maps-v3-distancefrom/)

```
google.maps.LatLng.prototype.distanceFrom = function(newLatLng) {
// setup our variables
var lat1 = this.lat();
var radianLat1 = lat1 * ( Math.PI  / 180 );
var lng1 = this.lng();
var radianLng1 = lng1 * ( Math.PI  / 180 );
var lat2 = newLatLng.lat();
var radianLat2 = lat2 * ( Math.PI  / 180 );
var lng2 = newLatLng.lng();
var radianLng2 = lng2 * ( Math.PI  / 180 );
// sort out the radius, MILES or KM?
var earth_radius = 3959; // (km = 6378.1) OR (miles = 3959) - radius of the earth

// sort our the differences
var diffLat =  ( radianLat1 - radianLat2 );
var diffLng =  ( radianLng1 - radianLng2 );
// put on a wave (hey the earth is round after all)
var sinLat = Math.sin( diffLat / 2  );
var sinLng = Math.sin( diffLng / 2  ); 

var a = Math.pow(sinLat, 2.0) + Math.cos(radianLat1) * Math.cos(radianLat2) * Math.pow(sinLng, 2.0);

// work out the distance
var distance = earth_radius * 2 * Math.asin(Math.min(1, Math.sqrt(a)));

// return the distance
return distance;
} 
```

[测距仪-google-maps-api](http://www.1stwebdesigner.com/tutorials/distance-finder-google-maps-api/)

# android - 使用 Maven 时没有可用的主题

> ID：12911213
> 
> 赞同：7
> 
> 时间：2012-10-16T09:09:26.770
> 
> 标签：android, maven, actionbarsherlock

我在 Maven 中使用 ABS 时遇到问题。我通过以下方式在我的 POM 中添加了 ABS 支持：

```
 <dependencies>
   <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.0.1.2</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
        <version>r10</version>
    </dependency>       

    <dependency>
      <groupId>com.actionbarsherlock</groupId>
      <artifactId>library</artifactId>
      <version>4.2.0</version>
      <type>apklib</type>
      <exclusions>
          <exclusion>
            <groupId>com.google.android</groupId>
            <artifactId>support-v4</artifactId>
          </exclusion>
        </exclusions>
    </dependency>

    <dependency>
      <groupId>com.actionbarsherlock</groupId>
      <artifactId>library</artifactId>
      <version>4.2.0</version>
      <type>jar</type>
      <exclusions>
          <exclusion>
            <groupId>com.google.android</groupId>
            <artifactId>support-v4</artifactId>
          </exclusion>
        </exclusions>
    </dependency>
</dependencies> 
```

我的源代码编译得很好，但我无法添加 ABS 主题，因为没有可用的 ABS 主题。我尝试通过以下方式添加主题：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
            android:theme="@android:style/Theme.Sherlock" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这会产生错误“找不到与给定名称匹配的资源”。

我应该怎么做才能添加 ABS 主题？

提前致谢， 米尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T19:24:38.547

使用`@style/Theme.Sherlock`而不是`@android:style/Theme.Sherlock`.

[http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme](http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme)

这篇文章也可能会有所帮助：

[为 Android 应用设置 ActionBarSherlock 主题](https://stackoverflow.com/questions/9757400/setting-actionbarsherlock-theme-for-android-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T14:06:13.167

我可以假设您使用的是 Android Studio 吗？如果是这样，这个网站帮助了我，现在我所有的应用程序都基于这种方法：[ABS 和 Android Studio](http://showlabor.blogspot.co.uk/2013/05/actionbarsherlock-in-android-studio-01.html) 它每次都对我有用，只需稍作修改：

当您修改文件时，Android Studio 会不断地向您抛出错误，并且它会尝试在您进行时继续编译它们.. 一直到最后。

# c# - 如何知道 Windows 更新是否正在等待安装

> ID：12911218
> 
> 赞同：1
> 
> 时间：2012-10-16T09:09:46.707
> 
> 标签：c#, windows-update

> **可能重复：**
> [检测 Windows 是否已准备好下载/安装 Windows 更新的最佳方法？](https://stackoverflow.com/questions/121585/best-way-of-detecting-if-windows-has-windows-updates-ready-to-download-install)

我正在使用 C# .net 3.5。

我如何知道 Windows 更新中是否有准备安装的更新？

在 Windows 8 上，当 Windows 更新等待安装更新时，睡眠选项被禁用。

而不是常规的 3 个选项：**1.**睡眠**2.**重新启动**3.**关机，只有 2 个选项：**1.**重新启动和更新**2.**关机和更新。我需要识别此状态并通知用户机器无法进入睡眠模式，因为正在等待安装更新。

我可以使用 WUAPILib 吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:37:12.420

您可以为此使用 WUApiLib (Com lib)：

```
var updateSession = new UpdateSession();
var updateSearcher = updateSession.CreateUpdateSearcher();
updateSearcher.Online = false; //set to true if you want to search online
try
{
    var searchResult = updateSearcher.Search("IsInstalled=0 And IsHidden=0");
    if (searchResult.Updates.Count > 0)
    {
        MessageBox.Show("There are updates available for installation");
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message,"Error");
} 
```

如果您想了解更多信息，请单击[此处。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386515%28v=vs.85%29.aspx)

# .net - 用于编译和部署 .net 项目的服务/调度程序

> ID：12911222
> 
> 赞同：1
> 
> 时间：2012-10-16T09:09:53.087
> 
> 标签：.net, compilation

我需要创建服务/调度程序来编译和部署不同的 .net 项目。我一直在研究各种工具，如 Cruisecontrol、Octopus、Puppet 等。有人可以建议哪一个是最好的和易于用户使用的多个可能不同版本的 .net 项目，而项目本身的变化很小。谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:03:03.477

经过大量研究，CruiseControl 已成为最佳选择。因为我需要对代码进行最小的更改。我编写了 Nant 脚本并通过 CruiseControl 安排时间运行相同的脚本。

# hadoop - Hadoop：哪个配置好

> ID：12911223
> 
> 赞同：0
> 
> 时间：2012-10-16T09:09:53.510
> 
> 标签：hadoop, mapreduce

hadoop配置有什么好处..

大量小型机器，每台 512 MB 内存或少量大型机器（类似于 2Gb 或 4GB 内存）

我可以选择两者中的任何一个，因为我的节点是虚拟机..

请分享你的想法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:49:17.983

瓶颈在很大程度上取决于您使用的应用程序类型。但总的来说，恕我直言，您对记忆的假设是错误的。你应该得到更少和更快的主流机器。每台机器的配置方式取决于其角色，但大量 512 MB 的 VM 无法匹配少数 12-24 GB 具有良好网络/CPU 和磁盘的主流服务器。

标准的大容量设备是要走的路，但实际转化为：

在“横盘整理”之前，首先获得*每台机器每美元的高效性能。*只有在动力不足的机器上“侧身”才会变得更加昂贵。

廉价机器集群并不真正意味着“任何机器”（与某些流行的看法相反）。每个节点的开销确实很大，所以添加内存、磁盘空间和磁盘吞吐量和 CPU 一般比添加下一个节点效率更高。当然，这仅在您仍处于“大容量硬件”类别（主流***快速***服务器）的情况下才是正确的。应避免时钟频率、内存和磁盘的最后一英里。

因此，要回答您的问题，请购买几台具有 12 GB RAM、快速 CPU 和大型快速磁盘的千兆以太网机器。确保所有机器都在千兆交换机上运行。

顺便说一句，许多人推荐双插槽机器、Xeon CPU、RAID 磁盘和 24 GB RAM，并认为这为 Hadoop 提供了最佳性能/美元。

# python - swig生成python文件加C#

> ID：12911224
> 
> 赞同：1
> 
> 时间：2012-10-16T09:09:57.067
> 
> 标签：python, .net, c#-4.0, swig

我有一个由 swig 生成的 python 文件（没有这方面的经验）。它包含在顶部：

```
# This file was automatically generated by SWIG (http://www.swig.org).
# Version 2.0.4
#
# Do not make changes to this file unless you know what you are doing--modify
# the SWIG interface file instead. 
```

并包含类定义。是否可以从中生成 C# 类来表示必须从某些专有数据库中补充的“数据结构”？

归根结底，我必须从 C# 与 Python 交谈。我目前正在通过编写 python 文件然后从 C# 调用 Python 来做到这一点。

任何反馈将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:17:41.973

SWIG 用于包装 C 或 C++，以便它可以与其他语言交互？例如，您可以使用 swig 包装一些 C，以便您可以从 python 或 C# 调用它 - 但不要包装一些 C#，以便您可以从 python 调用它（反之亦然）。

在这种情况下，可能 Ironpython 有用吗？

在我看来，你所做的已经是正确的解决方案，即从 C# 调用 python。SWIG 无关紧要，因为您没有任何要包装的 C 代码。

一些可能有用的链接是：

*   [从 .NET 调用 Python](https://stackoverflow.com/questions/6624503/call-python-from-net)

*   [从 C# 构建 Python 脚本和调用方法](https://stackoverflow.com/questions/2139202/build-python-scripts-and-call-methods-from-c-sharp?rq=1)

*   [从 C# 调用 python 代码（.py 文件）](https://stackoverflow.com/questions/5591557/calling-python-code-py-files-from-c-sharp?rq=1)

# php - 如何将日期添加到文件上传ios sdk

> ID：12911233
> 
> 赞同：1
> 
> 时间：2012-10-16T09:10:29.310
> 
> 标签：php, ios, image, sdk, upload

我的应用程序有这段代码，我想知道如何在文件名的末尾添加一些独特的东西，比如日期，这样 test.png 就变成了 test16102012.png。

```
 [body appendData:[[NSString stringWithFormat:@"Content-Disposition: 
form-data; name=\"uploadedfile\"; filename=\"test.png\"\r\n"]     
dataUsingEncoding:NSUTF8StringEncoding]]; 
```

谢谢

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:14:50.137

通过使用`stringWithFormat:`方法，您可以在字符串本身中添加任何内容。

例子：

```
[NSString stringWithFormat:@"filename=\"test%@.png\", @"Some_random_string"]; 
```

您还可以使用随机生成器（`arc4random`）或类的`timeIntervalSince1970`方法`NSDate`。

希望能帮助到你

# r - 使用 R 对大型数据矩阵进行聚类

> ID：12911234
> 
> 赞同：1
> 
> 时间：2012-10-16T09:10:32.147
> 
> 标签：r

我有一个大数据矩阵（33183x1681），每一行对应一个观察值，每一列对应于变量。

我在 R 中使用 PAM 函数应用了 K-medoids 聚类，并尝试使用 PAM 函数提供的内置图来可视化聚类结果。我收到了这个错误：

```
Error in princomp.default(x, scores = TRUE, cor = ncol(x) != 2) :
cannot use cor=TRUE with a constant variable 
```

我认为这个问题是因为我试图聚类的数据矩阵的高维性。

任何想法/想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:41:30.867

查看所有 R 版本附带`clara()`的包**cluster中的函数。**

```
library("cluster")
## generate 500 objects, divided into 2 clusters.
x <- rbind(cbind(rnorm(200,0,8), rnorm(200,0,8)),
           cbind(rnorm(300,50,8), rnorm(300,50,8)))
clarax <- clara(x, 2, samples=50)
clarax

> clarax
Call:    clara(x = x, k = 2, samples = 50) 
Medoids:
         [,1]       [,2]
[1,] -1.15913  0.5760027
[2,] 50.11584 50.3360426
Objective function:  10.23341
Clustering vector:   int [1:500] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
Cluster sizes:           200 300 
Best sample:
 [1]  10  17  45  46  68  90  99 150 151 160 184 192 232 238 243 250 266 275 277
[20] 298 303 304 313 316 327 333 339 353 358 398 405 410 411 421 426 429 444 447
[39] 456 477 481 494 499 500

Available components:
 [1] "sample"     "medoids"    "i.med"      "clustering" "objective" 
 [6] "clusinfo"   "diss"       "call"       "silinfo"    "data" 
```

请注意，您应该详细研究`clara()`( `?clara`) 的帮助以及引用的参考资料，以使由 执行的聚类`clara()`与 接近或相同`pam()`。

# javascript - 将焦点设置到文本区域的末尾

> ID：12911236
> 
> 赞同：4
> 
> 时间：2012-10-16T09:10:36.657
> 
> 标签：javascript, jquery, cross-browser, textarea

```
editor.focus(); 
```

在 Chrome 中设置焦点。但是在 Firefox 中，重点是设置在开头就行了。我希望将其设置在行尾。我试过这个：

```
moveCaretToEnd(ed);

function moveCaretToEnd(el) {
    if (typeof el.selectionStart == "number") {
      el.selectionStart = el.selectionEnd = el.value.length;
    } else if (typeof el.createTextRange != "undefined") {
      el.focus();
      var range = el.createTextRange();
      range.collapse(false);
      range.select();
    }
} 
```

愚蠢的FF不再起作用。焦点没了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T09:21:19.120

我对 Firefox 使用了以下 hack：

```
var value = editor.val();
editor.val("");
editor.focus();
editor.val(value); 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/p37ax/](http://jsfiddle.net/vyshniakov/p37ax/)

# selenium - 测试偶尔会出错

> ID：12911244
> 
> 赞同：0
> 
> 时间：2012-10-16T09:10:59.763
> 
> 标签：selenium, webdriver, selenium-webdriver

运行 Selenium Webdriver 测试时，我遇到了非常奇怪的问题。

我的代码

```
driver.findElement(By.id("id")).click();
driver.manage().timeouts().implicitlyWait(180, TimeUnit.SECONDS);
driver.findElement(By.xpath("//a[starts-with(@href,'/problematic_url')]")).click();
driver.manage().timeouts().implicitlyWait(180, TimeUnit.SECONDS);
driver.findElement(By.className("green_true")).click(); 
```

这些元素实际上是存在的。我什至可以看到有问题的 url 被 webdriver 点击了，但是没有任何反应。浏览器不会进入该页面，也不会找到 green_true 元素。导致错误。但只是偶尔。有时测试运行正常。

谁能告诉这怎么可能？

我不能使用确切的网址，因为它们因所选语言而异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:35:23.137

单击动态元素时尝试使用显式等待。等到元素出现在 Web 浏览器上或对它们应用操作。您可以使用此模式：

```
final FluentWait<WebDriver> wait =
            new FluentWait<WebDriver>(getDriver())
                    .withTimeout(MASK_PRESENCE_TIMEOUT, TimeUnit.SECONDS)
                    .pollingEvery(100, TimeUnit.MILLISECONDS)
                    .ignoring(NoSuchElementException.class)
                    .ignoring(StaleElementReferenceException.class)
                    .withMessage("Time out while waiting the element is loaded");

    wait.until(new Predicate<WebDriver>() {

        @Override
        public boolean apply(final WebDriver driver) {
            return ! driver.findElements(By.id("id")).isEmpty(); 
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:32:02.227

出色地。建议按以下方式修改：而不是

```
driver.findElement(By.id("id")).click();
driver.manage().timeouts().implicitlyWait(180, TimeUnit.SECONDS);
driver.findElement(By.xpath("//a[starts-with(@href,'/problematic_url')]")).click();
driver.manage().timeouts().implicitlyWait(180, TimeUnit.SECONDS);
driver.findElement(By.className("green_true")).click(); 
```

尝试使用以下：

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ;

fluentWait(By.id("id")).click();
fluentWait(By.xpath("//a[starts-with(@href,'/problematic_url')]")).click();
fluentWait(By.className("green_true")).click(); 
```

问题可能是您在与元素交互（单击等）后在页面上获得了一些 AJAX。恕我直言，我们需要使用更强大的等待机制。

一条建议：当您获得 webelement 或 css 选择器的 xpath 时，不要忘记验证在 fireBug、ffox 扩展中找到的定位器。 ![定位器验证](../Images/68bdab53e1376220c3695d5fce6ba0a3.png) 问候。

# spring - 如何为本地主机（码头）和弹簧安全获取安全=无？

> ID：12911247
> 
> 赞同：2
> 
> 时间：2012-10-16T09:11:01.183
> 
> 标签：spring, spring-security

我对 Spring 很陌生，对 java 也有点陌生，所以我可能会遗漏一些明显的东西。我们为 UAT 和 prod 部署到 WAS，但由于我们的应用程序非常轻量级，因此开始转向嵌入式码头。

Soooo ...我们一直在破解我们的 web.xml 以注释掉`<filter>`标签并在应用程序上下文中注释掉 for spring security.xml。不理想，因为我们使用 maven。因此，作为一项学习练习，我试图让这个工作井井有条，并且在这里阅读了很多博客和问题，坦率地说，我感到困惑。

我的第一次尝试是离开`<filter>`web.xml 并`profile="jettyLocal"`使用`http auto-config="true" security="none"`. 然后我从 RTC 开始使用`-Dspring.profiles.active="JettyLocal"`. 这似乎没有任何效果。即不管有没有，我仍然得到一连串的异常-“没有身份验证管理器”和创建spring filterChains bean的错误。

是在处理之前加载 web.xml 的问题`-Dspring..`吗？我问错问题了吗？如果你能给我指点，我很高兴 RTFM。我有 Spring in Action 3.0 但看不到任何相关内容，可能是因为我缺乏经验。

eta：澄清，因为我不清楚。我让应用程序在具有 AD 安全性的外部 WAS 上与 Spring-security 很好地配合使用，这是一个带有用户服务标签的本地主机 WAS，它提供了一个由命名配置文件 bean 管理的硬编码用户名。我正在努力的是保留这 2 个，但没有安全性来使用 jetty:run 运行快速测试。感谢您迄今为止的建议。一切都很好。

eta 2：我能找到的所有示例都假设我将使用登录页面等测试整个 Web 应用程序。但我想使用 jetty:run 快速测试可以使用简单测试工具响应 Web 调用的类或包.

eta 3：通过添加到 spring-security.xml 中，我已经成功地接近了我想要的东西

```
<beans:beans profile="dev">
    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="xxx" password="xxx" authorities="xxx" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

并使用 -Dspring.profiles.active="dev" 启动码头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:34:46.543

要使您的应用程序的某些部分不安全，只需对 http 模式不应用安全性，我的应用程序上下文的一部分如下所示：

```
 <security:http pattern="/css/**" security="none" /> 
```

# redis - Redis SET 命令不能失败，但是可以吗？

> ID：12911248
> 
> 赞同：5
> 
> 时间：2012-10-16T09:11:04.680
> 
> 标签：redis

我正在尝试调试我遇到的一些 Redis 问题，并且来自一些关于 SET 命令的不确定文档。

在我的 Redis 配置中；我有以下几行（片段）：

```
# Note: with all the kind of policies, Redis will return an error on write
#       operations, when there are not suitable keys for eviction.
#
#       At the date of writing this commands are: set setnx setex append 
```

在我发现[的 SET 命令的文档页面上：](http://redis.io/commands/set)

```
Status code reply: always OK since SET can't fail. 
```

关于最终行为的任何见解？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T11:49:29.190

**tl;dr**：如果 redis 实例内存不足，SET 将返回错误响应。

据我从[redis.c](https://github.com/antirez/redis/blob/unstable/src/redis.c#L1552)的源代码中可以看出，基本上当要处理命令时，流程是这样的（伪代码）：

```
IF memory is needed
    IF we can free keys
        Free keys
        Process the command
            SET -> process and return OK response
    ELSE return error response
ELSE
    Process command
        SET -> process and return OK response 
```

不完全是这样写的，但基本思想归结为：在处理命令之前检查内存，所以即使命令不会失败，如果没有内存，无论实际响应如何，都会返回错误响应命令。

# java - 在 IDEA 中构建 Jar 冻结

> ID：12911251
> 
> 赞同：0
> 
> 时间：2012-10-16T09:11:14.057
> 
> 标签：java, jar, intellij-idea, artifact

我正在尝试在*IntelliJ Idea中构建一个**jar*。（项目结构-Artifacts-Add artifact-Choose module-Create jar）。然后我按下 Build-Build artifacts-Choose my Jar-Build。然后 Idea 只是在后台*读取 pom.xml*而对我来说没有 jar。有什么办法可以解决这个问题？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:37:17.187

我[按照本说明进行操作](http://blogs.jetbrains.com/idea/2010/08/quickly-create-jar-artifact)。但在我这样做之前`File | Invalidate Caches`，它有帮助。**

# ruby-on-rails - gem 邪恶的路由

> ID：12911252
> 
> 赞同：1
> 
> 时间：2012-10-16T09:11:14.303
> 
> 标签：ruby-on-rails

再会！。我正在实现一个邪恶的宝石......并得到一个路由错误。

```
no route matches [POST] "/user_signup/address" 
```

虽然我的路线

```
 resources :users
  resources :user_signup 
```

控制器

```
 class UserSignupController < ApplicationController
  include Wicked::Wizard
  steps  :address, :company_info, :sum_up 
```

当我尝试提交地址表格时：

```
p address
= form_for @user, url: wizard_path do |f|
  p
    = f.label :address
    = f.text_field :address
  p
   = f.submit 'Continue'
= link_to 'Skip', next_wizard_path 
```

我得到这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:21:53.707

傻我。变成

```
= form_for @user, url: wizard_path, :method => :put do |f| 
```

`method: :put`没用，没关系！

# xcode - 旋转 UIView 以提供视角

> ID：12911255
> 
> 赞同：3
> 
> 时间：2012-10-16T09:11:29.377
> 
> 标签：xcode, uiview, rotation, layer, perspective

我想改变`UIView`我的`Viewcontroller`. 我认为我必须转换这个 UIView 层，但我不知道如何。

我已经尝试了以下代码，但它不工作

```
UIView *myView = [[self subviews] objectAtIndex:0];
CALayer *layer = myView.layer;
CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
rotationAndPerspectiveTransform.m34 = 1.0 / -500;
rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 45.0f * M_PI / 180.0f, 0.0f, 1.0f, 0.0f);
layer.transform = rotationAndPerspectiveTransform; 
```

我也尝试过以下代码：

```
-(void)drawRect:(CGRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGAffineTransform transform = CGAffineTransformIdentity;
    transform.b = -0.1;
    transform.a = 0.9;
    CGContextConcatCTM(ctx,transform);
    // do drawing on the context
} 
```

这也是：

```
CALayer *layerA = [[self.view.layer sublayers] objectAtIndex:0];

    layerA.transform = CATransform3DConcat(layerA.transform, CATransform3DMakeRotation(DEGREES_TO_RADIANS(45),1.0,0.0,0.0) 
```

他们都没有工作。如何改变 a 的视角`UIView`？

换句话说，我将举一个例子。图片这个示例代码，一个旋转饼[RotationPie 示例](http://github.com/wczekalski/CDPieMenu)。我想改变它的视角，在 x 或 z 轴上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:25:44.240

你的第一个解决方案对我有用。它看起来像这样：

![在此处输入图像描述](../Images/9c5073b9ddfddb384cc6b6464d8e2862.png)

你能展示你的整个班级代码吗，如果你的结果不一样吗？

**编辑**

好的，我已经重新配置了提供的代码示例，以展示它是如何实现的：

（在此处下载更新的代码示例：[http](http://www.speedyshare.com/dz469/download/Wheel-demo.zip) ://www.speedyshare.com/dz469/download/Wheel-demo.zip ）

它看起来像这样：

![在此处输入图像描述](../Images/7bf0e70253473a40c3dd44cac09844b0.png)

我只是将转换应用于基本子视图。作为该视图的子视图的所有视图也将被转换。如果您希望相应的子视图具有不同的转换 - 这会更难，因为，那么您必须考虑父视图转换，才能计算新的 - 它会变得非常困难。

但是我做了一些简单的——多视图级别的转换。例如 - 为了达到效果，视图缩放、移动和旋转：

*   我已将运动转换应用于 parentView
*   我已将旋转变换应用于 parentViews 的第一个子视图；
*   我已将缩放转换应用于 parentViews 的第一个子视图子视图。

**编辑**

好的，我已经重新配置了提供的代码示例，以展示它是如何实现的，以便将轮子留在变换位置：

（在此处下载更新的代码示例： [http](http://www.speedyshare.com/5d8Xq/download/Wheel-demo2.zip) ://www.speedyshare.com/5d8Xq/download/Wheel-demo2.zip ）

问题是——在这种情况下，我正在向轮子本身添加转换——而且看来，轮子也是基于转换的。因此 - 当你触摸它时 - 它取代了现有的转换并应用了它自己的（当用户滑动滚轮时旋转箭头）。

所以 - 在我们与它交互时让它保持透视 - 我们需要另一个视图层。

我创建了一个新视图（我们称之为父视图），并将轮子作为子视图添加到该视图中。

然后我将转换应用于父视图而不是轮子。它有效！

我希望它有所帮助，您现在了解更多关于转换的信息:)

# java - 如何在 Java 中找到许多 Maps 的共同部分？

> ID：12911257
> 
> 赞同：0
> 
> 时间：2012-10-16T09:11:31.963
> 
> 标签：java, collections, maps, intersection

我有很多地图，例如`Map(String, Object)`.

```
map1
map2
....
mapN 
```

我需要接收仅包含这些键值对的映射，其中第一个参数在所有映射中都相等。可以通过使用`retainAll`方法来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:21:21.053

是的。您获得其中一个集合并`retainAll`与所有其他集合一起使用，其余元素对所有集合都是通用的。

缺少的步骤是将地图的所有键作为 a `Set`，这是由`Map.keySet()`

请注意，`retainAll`被标记为可选，因此`Set`返回的实现可能`Map.keySet`没有实现它。在这种情况下，创建一个新的 Set 实例，它支持将原始集合作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:21:30.247

是的，您可以使用`retainAll`

```
map1.keySet().retainAll(map2.keySet());
map1.keySet().retainAll(map3.keySet()); //etc 
```

最后`map1`将是所有地图中所有键的交集，因此这些键现在很常见，您可以轻松检索值

# c# - 使用 HttpWebRequest 从 404 错误中检索内容

> ID：12911258
> 
> 赞同：2
> 
> 时间：2012-10-16T09:11:33.507
> 
> 标签：c#, .net, api, httpwebrequest, linkedin

这类似于此处提出的问题：[httpWebRequest - 获取错误内容](https://stackoverflow.com/questions/10311582/httpwebrequest-get-error-content) ，但我希望提供更多信息以期获得答案。

我正在使用 C# 与 LinkedIn API 集成。当我对 API 进行**无效**调用时，它可以返回如下 HTTP 响应（来自 Fiddler）：

```
HTTP/1.1 404 Not Found
Server: Apache-Coyote/1.1
x-li-request-id: VL2EER2ROJ
Date: Tue, 16 Oct 2012 08:52:59 GMT
Vary: *
x-li-format: xml
Content-Type: text/xml;charset=UTF-8
Content-Length: 266

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
  <status>404</status>
  <timestamp>1350377580000</timestamp>
  <request-id>VL2EER2ROJ</request-id>
  <error-code>0</error-code>
  <message>Could not find member {/people/XXXXXX}</message>
</error> 
```

我特别想了解错误 xml，但是 HttpWebRequest 似乎只是抛出异常，然后与内容无关。在我的调试器中，我可以看到内容长度为 266，但任何尝试调用都会`(System.Net.WebException).Response.GetResponseStream()`导致`stream was not readable`异常。

这种在非 200 HTTP 状态响应中返回错误消息的方法在 Web API 中似乎很流行——我希望有一种方法可以得到这些响应......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-21T17:36:58.740

您可能需要直接点击套接字连接以获取响应 xml。

看到这个答案：[https ://stackoverflow.com/a/6755142](https://stackoverflow.com/a/6755142)

我在尝试实现亚马逊的 Off Amazon Payments API 时遇到了同样的事情。如果我传递了无效的事务 ID，它们会返回 404 错误……这不是我所期望的。

另请注意：我在发送 http 帖子时使用异步，并且此 404 在 BeginGetResponse 方法上引发 WebException；不是在尝试读取回调中的响应时。相反，在回调中读取响应流时会引发 400 Bad Request WebException。

# sql - SQL UNION 语句

> ID：12911260
> 
> 赞同：0
> 
> 时间：2012-10-16T09:11:39.563
> 
> 标签：sql, sql-server, union

我收到以下查询：

```
SELECT
        ep_101.cd_hfdmapnr AS Dossiernummer,
        SUM(ep_102.id_fhmbdlv) AS Kosten

    FROM ep_101

    INNER JOIN et_101 ON ep_101.cd_hfdmapnr = et_101.cd_hfdmapnr
    INNER JOIN ep_102 ON ep_101.cd_hfdmapnr = ep_102.cd_hfdmapnr

    WHERE ep_101.cd_mapkverw = 0 
    AND ep_102.cd_bkcode = '000010' 
    AND et_101.opdrachtgever1 = '05354605'

    GROUP BY ep_101.cd_hfdmapnr

    UNION

    SELECT
        ep_101.cd_hfdmapnr AS Dossiernummer,
        SUM(ep_102.id_fhmbdlv) AS GriffieKosten

    FROM ep_101

    INNER JOIN et_101 ON ep_101.cd_hfdmapnr = et_101.cd_hfdmapnr
    INNER JOIN ep_102 ON ep_101.cd_hfdmapnr = ep_102.cd_hfdmapnr

    WHERE ep_101.cd_mapkverw = 0 
    AND ep_102.cd_bkcode = '000020' 
    AND et_101.opdrachtgever1 = '05354605'

    GROUP BY ep_101.cd_hfdmapnr 
```

虽然结果只返回 Dossiernummer & Kosten 我怎样才能重新创建它以便也显示“Griffiekosten”？因为我没有想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:13:25.973

如果您确实需要在两列中显示它：

```
SELECT
    ep_101.cd_hfdmapnr AS Dossiernummer,
    SUM(case when ep_102.cd_bkcode = '000010' then ep_102.id_fhmbdlv else 0 end) AS Kosten,
    SUM(case when ep_102.cd_bkcode = '000020' then ep_102.id_fhmbdlv else 0 end) AS GriffieKosten
FROM ep_101
    INNER JOIN et_101 ON ep_101.cd_hfdmapnr = et_101.cd_hfdmapnr
    INNER JOIN ep_102 ON ep_101.cd_hfdmapnr = ep_102.cd_hfdmapnr
WHERE ep_101.cd_mapkverw = 0 
    AND ep_102.cd_bkcode in ('000010', '000020')
    AND et_101.opdrachtgever1 = '05354605'
GROUP BY ep_101.cd_hfdmapnr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:14:33.880

他们被展示了！
当您使用 UNION 时，列名根据 UNION 中的名字，在这种情况下：Dossiernummer & Kosten。

只是一个小问题，你确定要使用UNION吗？Kosten 和 Griffiekosten 是一样的吗？如果不是，那么 UNION 是错误的方法。

假设它们是不同类型的值，但您希望结果显示每个 Dossiernummer，那么您正在查看 JOIN（在 Dossiernummer 上）。

类似于以下内容：

```
SELECT Isnull(T1.DOSSIERNUMMER, T2.DOSSIERNUMMER) AS Dossiernummer, 
       T1.KOSTEN, 
       T2.GRIFFIEKOSTEN 
FROM   (SELECT EP_101.CD_HFDMAPNR     AS Dossiernummer, 
               Sum(EP_102.ID_FHMBDLV) AS Kosten 
        FROM   EP_101 
               INNER JOIN ET_101 
                       ON EP_101.CD_HFDMAPNR = ET_101.CD_HFDMAPNR 
               INNER JOIN EP_102 
                       ON EP_101.CD_HFDMAPNR = EP_102.CD_HFDMAPNR 
        WHERE  EP_101.CD_MAPKVERW = 0 
               AND EP_102.CD_BKCODE = '000010' 
               AND ET_101.OPDRACHTGEVER1 = '05354605' 
        GROUP  BY EP_101.CD_HFDMAPNR)T1 
       FULL OUTER JOIN (SELECT EP_101.CD_HFDMAPNR     AS Dossiernummer, 
                               Sum(EP_102.ID_FHMBDLV) AS GriffieKosten 
                        FROM   EP_101 
                               INNER JOIN ET_101 
                                       ON EP_101.CD_HFDMAPNR = 
                                          ET_101.CD_HFDMAPNR 
                               INNER JOIN EP_102 
                                       ON EP_101.CD_HFDMAPNR = 
                                          EP_102.CD_HFDMAPNR 
                        WHERE  EP_101.CD_MAPKVERW = 0 
                               AND EP_102.CD_BKCODE = '000020' 
                               AND ET_101.OPDRACHTGEVER1 = '05354605' 
                        GROUP  BY EP_101.CD_HFDMAPNR)T2 
                    ON T1.DOSSIERNUMMER = T2.DOSSIERNUMMER 
```

# wpf - 替换在 WPF 中最小化导航窗格（Stemasoft）时出现的文本

> ID：12911268
> 
> 赞同：-2
> 
> 时间：2012-10-16T09:12:22.927
> 
> 标签：wpf, navigation, pane

如何根据选定的导航窗格项替换 WPF 中导航窗格最小化时出现的文本。此处使用的 Navigationpane 是来自 stemasoft.com 及其 dll 的导航窗格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:19:44.277

我猜你正在寻找 BarTitle 属性

```
<stema:NavigationPane BarTitle="My title">
   <stema:NavigationPaneItem Header="Item 1">
      <local:MyControl/>
   </stema:NavigationPaneItem>
</stema:NavigationPane> 
```

您还可以为每个项目指定一个图像。

# python - Django模板系统和几个月的_list

> ID：12911269
> 
> 赞同：0
> 
> 时间：2012-10-16T09:12:25.843
> 
> 标签：python, django, templates, dictionary

在模板页面上呈现每月统计数据的最佳方式是什么？

我最初是为了简化模板而从列表开始的，但是在切换到字典之后，我已经能够更顺利地做同样的事情了。麻烦的是，根据定义，字典没有排序。然后，如果我 iteritems() 字典我不会得到一个干净的结果，但更像

```
('Feb', 'Dec', 'Oct' ...) 
```

我应该在处理模板之前将我的字典更改为元组列表，还是有办法使用模板 django 模板系统的高级知识来呈现这些数据？

我的字典是这样构造的：

```
{'mnth_subscription': {'cummu_sbcr_mthl': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': 2221, 'Dec': 2221, 'Oct': 2221}, 'monthly_perc': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': -100, 'Dec': 0, 'Oct': 100}, 'cummu_sbcr_perc': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': 100, 'Dec': 100, 'Oct': 100}, 'monthly_subscription': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': 0, 'Dec': 0, 'Oct': 2221}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:07:15.860

为什么不使用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)？行为与 dict 几乎相同，只是对构造函数要小心一点：不要将 dict 传递给它（因为 dict 在传递给 OrderedDict 构造函数之前将是无序的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:22:41.397

您可以将每个信息作为字典的有序列表。所以信息`Jan`是第 0 个元素，依此类推。例子

```
{ 'cummu_sbcr_mthl': [ {'Mar', 0}, {'Feb': 0} ..., {'Dec': 0} ],
   'monthly_perc': [ .... ],
} 
```

或另一种方法：

创建字典列表。例如，创建如下列表。

```
month_subscription =  [ 
        { 'month': 'Mar', 'mindex': 3, 'cummu_sbcr_mnthl': 0, 'monthly_per': 0, 
          'cummu_sbcr_perc': 0, 'monthly_subscription': 0
        },
        ...
        { 'month': 'Oct', 'mindex': 10, 'cummu_sbcr_mnthl': 2221, 'monthly_per': 100, 
          'cummu_sbcr_perc': 100, 'monthly_subscription': 2221
        },
     ] 
```

如果不需要，您可能需要删除`'mindex'`。

# java - Web服务响应超时？

> ID：12911272
> 
> 赞同：2
> 
> 时间：2012-10-16T09:12:38.423
> 
> 标签：java, web-services, soap, jax-ws, cxf

我有一个调用网络服务的客户端。部分调用的方法可能需要很长时间才能在服务器上完成（甚至长达 1 小时）。我希望客户端等待那个时间的响应，从而保持连接活跃！

我尝试在客户端中设置以下属性，但没有成功：

```
((BindingProvider)port).getRequestContext().put("com.sun.xml.internal.ws.request.timeout", 0); //0 for disabling any timeouts 
```

一段时间后我仍然收到超时异常。必须设置哪个属性以防止出现以下错误？

```
org.apache.cxf.interceptor.Fault: Transaction was rolled back, presumably because setRollbackOnly was called during a synchronization while invoking public abstract boolean my.method
    at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:166)
    at org.apache.cxf.jaxws.AbstractJAXWSMethodInvoker.createFault(AbstractJAXWSMethodInvoker.java:213)
    at org.apache.openejb.server.cxf.ejb.EjbMethodInvoker.preEjbInvoke(EjbMethodInvoker.java:146)
    at org.apache.openejb.server.cxf.ejb.EjbMethodInvoker.invoke(EjbMethodInvoker.java:72)
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:107)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211)
    at org.apache.openejb.server.cxf.CxfWsContainer.onMessage(CxfWsContainer.java:73)
    at org.apache.openejb.server.webservices.WsServlet.service(WsServlet.java:98)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.tomee.catalina.OpenEJBValve.invoke(OpenEJBValve.java:45)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.openejb.core.transaction.TransactionRolledbackException: Transaction was rolled back, presumably because setRollbackOnly was called during a synchronization
    at org.apache.openejb.core.transaction.JtaTransactionPolicy.completeTransaction(JtaTransactionPolicy.java:335)
    at org.apache.openejb.core.transaction.TxRequired.commit(TxRequired.java:75)
    at org.apache.openejb.core.transaction.EjbTransactionUtil.afterInvoke(EjbTransactionUtil.java:73)
    at org.apache.openejb.core.stateless.StatelessContainer._invoke(StatelessContainer.java:258)
    at org.apache.openejb.core.stateless.StatelessContainer.invoke(StatelessContainer.java:190)
    at org.apache.openejb.server.cxf.ejb.EjbMethodInvoker.preEjbInvoke(EjbMethodInvoker.java:119)
    ... 30 more
Caused by: javax.transaction.RollbackException: Unable to commit: transaction marked for rollback
    at org.apache.geronimo.transaction.manager.TransactionImpl.commit(TransactionImpl.java:272)
    at org.apache.geronimo.transaction.manager.TransactionManagerImpl.commit(TransactionManagerImpl.java:252)
    at org.apache.openejb.core.transaction.JtaTransactionPolicy.completeTransaction(JtaTransactionPolicy.java:328)
    ... 35 more
Caused by: java.lang.Exception: Transaction has timed out
    at org.apache.geronimo.transaction.manager.TransactionImpl.commit(TransactionImpl.java:266)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T09:33:54.760

您确定这是客户端超时吗？您是否正确配置了服务器事务超时？

对于客户端超时，您需要在 cxf 配置中：

```
<http-conf:conduit name="*.http-conduit">
    <http-conf:client ConnectionTimeout="your connection timeout" ReceiveTimeout="your receive timeout"/>
</http-conf:conduit> 
```

超时以毫秒为单位。

在 Java 代码中，您需要获取 HTTPConduit，然后设置 HTTPClientPolicy：

见[http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html)

```
 import org.apache.cxf.endpoint.Client;
  import org.apache.cxf.frontend.ClientProxy;
  import org.apache.cxf.transport.http.HTTPConduit;
  import org.apache.cxf.transports.http.configuration.HTTPClientPolicy;
  ...

  URL wsdl = getClass().getResource("wsdl/greeting.wsdl");
  SOAPService service = new SOAPService(wsdl, serviceName);
  Greeter greeter = service.getPort(portName, Greeter.class);

  // Okay, are you sick of configuration files ?
  // This will show you how to configure the http conduit dynamically
  Client client = ClientProxy.getClient(greeter);
  HTTPConduit http = (HTTPConduit) client.getConduit();

  HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();

  httpClientPolicy.setConnectionTimeout(your connection timeout); 
  httpClientPolicy.setAllowChunking(false);
  httpClientPolicy.setReceiveTimeout(your receive timeout);

  http.setClient(httpClientPolicy);

  ...
  greeter.sayHi("Hello"); 
```

**更新**

为了`java.lang.ClassCastException`确保它`com.sun.xml.ws.client.sei.SEIStub`不在类路径中或确保 cxf jar 在类路径中 Sun 的 jaxws RI jar 之前。例如，尝试从类路径中删除 jaxws-rt*.jar。

# android - 计算密集关键点的描述符

> ID：12911276
> 
> 赞同：2
> 
> 时间：2012-10-16T09:12:48.490
> 
> 标签：android, opencv, feature-extraction

在 OpenCV4Android 中，我使用了 DENSE 特征检测器，它在图像上放置了一个点网格。接下来，我想计算这些关键点的描述符。为此，我尝试使用 ORB 描述符提取器。

```
 mDetector = FeatureDetector.create(FeatureDetector.DENSE);
    mExtractor = DescriptorExtractor.create(DescriptorExtractor.ORB);

    MatOfKeyPoint pointsmat0 = new MatOfKeyPoint();
    Mat descriptors0 = new Mat();

    mDetector.detect(image0, pointsmat0);
    mExtractor.compute(image0, pointsmat0, descriptors0); 
```

现在，当输出时`pointsmat0.total`，`descriptors0.rows()`这些数量应该相等，因为描述符提取器应该删除无法计算描述符的关键点。然而，这种情况并非如此。

我得到：

```
pointsmat0.total() around 10000
descrpitors0.rows() around 8000 
```

我试过使用简要描述符提取器，但这有同样的问题。所以，DENSE+ORB / DENSE+BRIEF 就有这个问题。

当我使用 ORB+ORB 运行此示例时，关键点的数量等于描述符的数量（两者均为 500）。所以，问题是：哪个描述符提取器可以与 DENSE 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T07:57:39.200

无需为此停止使用 ORB。描述符数量的减少是因为 ORB 在输入关键点太靠近图像的边界时会对其进行过滤。

来自 ORB 的代码（C++ 实现）：

```
void ORB::operator()( InputArray _image, InputArray _mask, vector<KeyPoint>& _keypoints,
                      OutputArray _descriptors, bool useProvidedKeypoints) const
{
    [...]
    if( do_keypoints )
    {
        // Get keypoints, those will be far enough from the border that
        // no check will be required for the descriptor
        computeKeyPoints(imagePyramid, maskPyramid, allKeypoints,
                         nfeatures, firstLevel, scaleFactor,
                         edgeThreshold, patchSize, scoreType);
    }
    else
    {
        // Remove keypoints very close to the border
        KeyPointsFilter::runByImageBorder(_keypoints, image.size(), edgeThreshold);

        [...]
    } 
```

**但是，请记住，点的角度**会有问题。

# c++ - 如何从后缀表达式制作表达式树？

> ID：12911277
> 
> 赞同：0
> 
> 时间：2012-10-16T09:12:52.847
> 
> 标签：c++

我想用 C++ 创建树。我可以在没有错误或警告的情况下编译代码，但我没有得到输出。

我认为错误是 inorder fn，但不知道如何删除它。

```
#include<iostream.h>
#include<conio.h>
#include<stdlib.h>

struct tree
{
    int data;
    struct tree * left;
    struct tree * right;
};
typedef struct tree * TREE;

TREE maketree(int x)
{
    TREE tree = (TREE)malloc(sizeof(tree));
    if(tree == NULL)
    {
        return NULL;
    }
    tree->left = tree->right = NULL;
    tree->data = x;
return tree;
}

void setleft(TREE tree,int x)
{
    if(tree == NULL || tree->left != NULL)
    {
        cout<<"\t Error !! Inserting New Node At Left Side  !\n";
    }
    else
    {
        tree->left = maketree(x);
    }
}

void setright(TREE tree,int x)
{
    if(tree == NULL || tree->right != NULL)
    {
        cout<<"\t Error !! Inserting New Node At Right Side !\n";
    }
    else
    {
        tree->right = maketree(x);
    }
}

void inorder(TREE root)
{
    if(root != NULL)
    {
        TREE left=root->left;
        TREE right=root->right;
        inorder(left);
        cout<<root->data;
        inorder(right);
    }
}

void main()
{
clrscr();
    TREE root = NULL,child,parent;
    int i,j = 1;
    cout<<"Root Of Binary Search Tree :- ";
    cin>>i;
    root = maketree(i);
    cout<<"\n\n";
    while(i)
    {
        cout<<j<<" Node Value:- ";
        cin>>i;
        if(i < 0)
        {
            break;
        }
        parent = child = root;
        while((i != parent->data) && (child != NULL))
        {
            parent = child;
            if(i < parent->data)
            {
                child = parent->left;
            }
            else
            {
                child = parent->right;
            }
        }
        if(i == parent->data)
        {
            cout<<"\t Value "<<i<<" Already Present In BST !!\n";
        }
        else if(i < parent->data)
        {
            setleft(parent,i);
        }
        else
        {
            setright(parent,i);
        }
        j++;
    }
    inorder(root);
getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:31:28.367

如果你想用 C++ 编写，那就用 C++ 编写。使用构造函数和析构函数以及类方法。可能将您的数据成员设为私有。而使用`new`而不是`malloc`你的析构函数可能会想要删除（树的子节点）。

您所写的内容是用 C 语言编写的，而不是您合并了 C++ 最糟糕的特性 iostream 以及旧的已弃用的非标准版本。

这看起来像一些学校练习。

我也无法在任何地方看到`free`您分配的数据`malloc`。

您的排序逻辑应该在基于树的函数中，而不是 main。

您的“错误”可能是输出中缺少空格，但我不知道。

`tree`将数据类型（它是一个结构，在 C++ 中不需要使用结构限定）和变量（经常使用它）用作数据类型是合法的，但不是好的做法。

好的，现在有一些代码，主要是基于你的。

```
class tree
{
    tree * left;
    tree * right;
    int value;

public:
    explicit tree( int v );
    ~tree();

    bool insert( int v );
    void print( std::ostream& ) const;

private:
    tree( const tree& );
    tree& operator=( const tree& );

};

tree::tree( int v ) : 
   left( NULL ), 
   right( NULL ),
   value( v )
{
}

tree::~tree()
{
    delete right;
    delete left;
}

bool tree::insert( int v )
{
   // inserts v in the correct place in the tree, returns true
   // if it inserted or false if it already exists

   // I want you to fill in the detail for this function
}

void tree::print( std::ostream& os ) const
{
   // prints the tree
    if( left )
    {
       left->print( os );
    }
    os << value << '\n';
    if( right )
    {
       right->print( os );
    }
} 
```

在那里，我留下了一个功能供您实现。您不需要实现私有复制构造函数或赋值运算符。

同时实施`main()`。请注意，不需要在堆上的 main 中实现树（使用 new ）。在堆栈上实现它。

`main()`将读入数字，将它们插入到调用其`insert()`方法的树中，然后在最后打印树，`std::cout`作为参数传递。

您需要`#include <iostream>`（不是 iostream.h），它会起作用。

# silverlight - 将xap转换为exe

> ID：12911284
> 
> 赞同：1
> 
> 时间：2012-10-16T09:13:12.397
> 
> 标签：silverlight, exe, xap

任何人都可以建议将 Silverlight xap 文件转换为 Windows 可执行文件的工具吗？我用谷歌搜索并得到了[这个链接](http://www.google.mu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://www.csscript.net/help/wpf.html&ei=sSR9UNmnDI2rrAex8ICwAg&usg=AFQjCNHaEz5s2ciDAics9JIKVQveQ7neBw)，但它不起作用。

编辑： Silverlight 应用程序已在没有浏览器外开关的情况下编译，我想知道是否有不需要我打开项目并在浏览器外模式打开的情况下重新编译的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:44:51.537

XAP 文件只是具有不同扩展名的 Zip 文件。您可以轻松地使用 SharpLib 或 DotNetZip 等库来提取它的内容。您还可以手动将 .xap 文件的扩展名更改为 .zip，然后将其解压缩到文件夹中。提取后，您将获得捆绑为 .xap 文件一部分的所有程序集。

一切都在以下链接中清楚地解释，

[从 XAP 文件中提取程序集](http://aspadvice.com/blogs/joydip/archive/2012/03/14/Extracting-Assemblies-from-a-XAP-File.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:50:33.843

这个链接可能很有趣：

[http://www.amazedsaint.com/2010/05/how-to-create-offline-installer-no.html](http://www.amazedsaint.com/2010/05/how-to-create-offline-installer-no.html)

它描述了创建一个安装程序，将 silverlight 安装在不存在的机器上，以及浏览器外的 silverlight 应用程序和开始菜单链接。您可以在没有 Internet 连接且未安装 .net 运行时的机器上使用此安装程序。因此，它提供了将其转换为 exe 的大部分实际好处。我之前遵循了这个程序，发现它很好。

# wpf - 如何检测 WPFDataGrid 行数据已更改？

> ID：12911290
> 
> 赞同：2
> 
> 时间：2012-10-16T09:13:36.003
> 
> 标签：wpf, mvvm, wpfdatagrid

我有一个`DataGrid`，并且需要检测用户何时对一行进行了更改。我不想使用`CellEditEnding`，因为每当一行获得焦点并在没有任何输入的情况下丢失它时，这个事件就会引发，以另一种方式我需要将 bool 属性绑定到在该行获得 chgangd 时设置为 true 的每一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:50:26.573

以下面的代码为例，这样您就知道如何跟踪您的项目`ItemSource`是否已更改（此处仅与初始值进行比较）的基本思想。

```
List<myItem> Items=new List<myItem>(); //your ItemSource

    class myItem:ObservableObject //an class implement INotifyPropertyChanged interface
    {
        string _inititemName;
        string _itemName;
        bool itemChanged; //here is your indicator

        myItem(string name)
        {
            _inititemName=itemName=name;
        }

        public string itemName
        {   
            get{return _itemName;}
            set
            {  
                _itemName=vlaue; 
                if (_itemName!=_inititemName) 
                   itemChanged=true; 
                else 
                   itemChanged=false;
                RaisePropertyChanged("itemName"); //or whatever the name of the method is that invoke OnPropertyChanged
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:49:45.333

使您的项目类的属性在修改时设置一个布尔更新标志

例如

```
public class MyGridItem
{
    public MyGridItem(string Name)
    { 
        this.Name = Name;
        Updated = false;
    }

    public bool Updated {get; private set;}

    private string _Name = null;
    public string Name
    {
        get { return _Name; }
        set { 
                if (!_Name.Equals( value ))
                {
                    _Name = value;
                    Updated = true
                 }
            }
    }
} 
```

# c# - 无法让用户服务在 vs 2010 中工作

> ID：12911291
> 
> 赞同：0
> 
> 时间：2012-10-16T09:13:40.543
> 
> 标签：c#, visual-studio-2010, windows-services

我正在尝试创建一个 Windows 用户服务，几周以来我一直在跳过这个问题，因为我可以让它作为本地服务运行。我用的是`vs2010`终极版。

当我去安装它时，无论是在提供的框中还是通过代码提供凭据，我都会收到以下错误

```
Error 1001: no mapping between account names and security ids was done 
```

我做了很多搜索，老实说，我只是不明白发生了什么，错误似乎很常见。我的理解是，我在这里创建了一个用户（而不是作为现有用户运行）但可以更正？

```
this.serviceProcessInstaller1.Account = ServiceAccount.User;
this.serviceProcessInstaller1.Username = "MyPC\\UserName"; // or "UserName";
this.serviceProcessInstaller1.Password = "password123"; 
```

我希望这是一件简单的事情，我做错了，但找不到解决方案......

有谁知道如何让这个工作..？

# python - 解析 IntId

> ID：12911293
> 
> 赞同：3
> 
> 时间：2012-10-16T09:13:46.053
> 
> 标签：python, plone, dexterity

我通过表单将敏捷内容的 IntId 传递到浏览器视图中。如何将 IntId 解析回 Plone 中的原始对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:21:42.027

使用`IIntIds`实用程序：

```
from zope.component import getUtility
from zope.intid.interfaces import IIntIds

intidutil = getUtility(IIntIds)
object = intidutil.getObject(id) 
```

或者，您可以使用该`.queryObject()`方法，它需要一个`default`关键字参数（默认为`None`），如果找不到 id 则返回。

# iphone - 如何获取 UILabel 中特定字符串的位置？

> ID：12911294
> 
> 赞同：0
> 
> 时间：2012-10-16T09:13:51.677
> 
> 标签：iphone, position, uilabel, uitextview, substring

> **可能重复：**
> [在 iPhone 上的 UILabel 中查找特定字符的位置](https://stackoverflow.com/questions/3191049/finding-location-of-specific-characters-in-uilabel-on-iphone)

How can i get the position of a specific string/substring in UILabel ? The UILabel is a multiline label and also has /n characters. Ultimately I should be able to draw another view in place of the position retrieved.

If not UILabel, could a UITextView be used to achieve results as expected above?

Thanks in advance.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T09:56:09.540

此代码可以帮助您构建相同的逻辑..

```
@interface NSString ( containsCategory )
- (BOOL) containsString: (NSString*) substring;
@end

// - - - - 

@implementation NSString ( containsCategory )

- (BOOL) containsString: (NSString*) substring
{    
    NSRange range = [self rangeOfString : substring];
    BOOL found = ( range.location != NSNotFound );
    return found;
}

@end 
```

# c - 在 C 中读取 .csv 文件

> ID：12911299
> 
> 赞同：48
> 
> 时间：2012-10-16T09:14:09.260
> 
> 标签：c, parsing, csv

我有一个 .csv 文件：

```
lp;imie;nazwisko;ulica;numer;kod;miejscowosc;telefon;email;data_ur
1;Jan;Kowalski;ul. Nowa;1a;11-234;Budry;123-123-456;jan@go.xxx;1980.05.13
2;Jerzy;Nowak;ul. Konopnicka;13a/3;00-900;Lichowice;(55)333-44-55;jer@wu.to;1990.03.23 
```

我需要用 C 语言阅读。我有一些代码，但仅用于连接。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-16T09:23:31.323

希望这会让你开始

**[在http://ideone.com/l23He](http://ideone.com/l23He)**上现场观看（使用标准输入）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char* getfield(char* line, int num)
{
    const char* tok;
    for (tok = strtok(line, ";");
            tok && *tok;
            tok = strtok(NULL, ";\n"))
    {
        if (!--num)
            return tok;
    }
    return NULL;
}

int main()
{
    FILE* stream = fopen("input", "r");

    char line[1024];
    while (fgets(line, 1024, stream))
    {
        char* tmp = strdup(line);
        printf("Field 3 would be %s\n", getfield(tmp, 3));
        // NOTE strtok clobbers tmp
        free(tmp);
    }
} 
```

输出：

```
Field 3 would be nazwisko
Field 3 would be Kowalski
Field 3 would be Nowak 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-30T19:36:15.660

以下代码是纯 c 语言并处理空格。它只分配一次内存，因此对于每个处理的行都需要一个 free() 。

[http://ideone.com/mSCgPM](http://ideone.com/mSCgPM)

```
/* Tiny CSV Reader */
/* Copyright (C) 2015, Deligiannidis Konstantinos

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://w...content-available-to-author-only...u.org/licenses/>.  */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>

/* For more that 100 columns or lines (when delimiter = \n), minor modifications are needed. */
int getcols( const char * const line, const char * const delim, char ***out_storage )

{
const char *start_ptr, *end_ptr, *iter;
char **out;
int i;                                          //For "for" loops in the old c style.
int tokens_found = 1, delim_size, line_size;    //Calculate "line_size" indirectly, without strlen() call.
int start_idx[100], end_idx[100];   //Store the indexes of tokens. Example "Power;": loc('P')=1, loc(';')=6
//Change 100 with MAX_TOKENS or use malloc() for more than 100 tokens. Example: "b1;b2;b3;...;b200"

if ( *out_storage != NULL )                 return -4;  //This SHOULD be NULL: Not Already Allocated
if ( !line || !delim )                      return -1;  //NULL pointers Rejected Here
if ( (delim_size = strlen( delim )) == 0 )  return -2;  //Delimiter not provided

start_ptr = line;   //Start visiting input. We will distinguish tokens in a single pass, for good performance.
                    //Then we are allocating one unified memory region & doing one memory copy.
while ( ( end_ptr = strstr( start_ptr, delim ) ) ) {

    start_idx[ tokens_found -1 ] = start_ptr - line;    //Store the Index of current token
    end_idx[ tokens_found - 1 ] = end_ptr - line;       //Store Index of first character that will be replaced with
                                                        //'\0'. Example: "arg1||arg2||end" -> "arg1\0|arg2\0|end"
    tokens_found++;                                     //Accumulate the count of tokens.
    start_ptr = end_ptr + delim_size;                   //Set pointer to the next c-string within the line
}

for ( iter = start_ptr; (*iter!='\0') ; iter++ );

start_idx[ tokens_found -1 ] = start_ptr - line;    //Store the Index of current token: of last token here.
end_idx[ tokens_found -1 ] = iter - line;           //and the last element that will be replaced with \0

line_size = iter - line;    //Saving CPU cycles: Indirectly Count the size of *line without using strlen();

int size_ptr_region = (1 + tokens_found)*sizeof( char* );   //The size to store pointers to c-strings + 1 (*NULL).
out = (char**) malloc( size_ptr_region + ( line_size + 1 ) + 5 );   //Fit everything there...it is all memory.
//It reserves a contiguous space for both (char**) pointers AND string region. 5 Bytes for "Out of Range" tests.
*out_storage = out;     //Update the char** pointer of the caller function.

//"Out of Range" TEST. Verify that the extra reserved characters will not be changed. Assign Some Values.
//char *extra_chars = (char*) out + size_ptr_region + ( line_size + 1 );
//extra_chars[0] = 1; extra_chars[1] = 2; extra_chars[2] = 3; extra_chars[3] = 4; extra_chars[4] = 5;

for ( i = 0; i < tokens_found; i++ )    //Assign adresses first part of the allocated memory pointers that point to
    out[ i ] = (char*) out + size_ptr_region + start_idx[ i ];  //the second part of the memory, reserved for Data.
out[ tokens_found ] = (char*) NULL; //[ ptr1, ptr2, ... , ptrN, (char*) NULL, ... ]: We just added the (char*) NULL.
                                                    //Now assign the Data: c-strings. (\0 terminated strings):
char *str_region = (char*) out + size_ptr_region;   //Region inside allocated memory which contains the String Data.
memcpy( str_region, line, line_size );   //Copy input with delimiter characters: They will be replaced with \0.

//Now we should replace: "arg1||arg2||arg3" with "arg1\0|arg2\0|arg3". Don't worry for characters after '\0'
//They are not used in standard c lbraries.
for( i = 0; i < tokens_found; i++) str_region[ end_idx[ i ] ] = '\0';

//"Out of Range" TEST. Wait until Assigned Values are Printed back.
//for ( int i=0; i < 5; i++ ) printf("c=%x ", extra_chars[i] ); printf("\n");

// *out memory should now contain (example data):
//[ ptr1, ptr2,...,ptrN, (char*) NULL, "token1\0", "token2\0",...,"tokenN\0", 5 bytes for tests ]
//   |__________________________________^           ^              ^             ^
//          |_______________________________________|              |             |
//                   |_____________________________________________|      These 5 Bytes should be intact.

return tokens_found;
}

int main()

{

char in_line[] = "Arg1;;Th;s is not Del;m;ter;;Arg3;;;;Final";
char delim[] = ";;";
char **columns;
int i;

printf("Example1:\n");
columns = NULL; //Should be NULL to indicate that it is not assigned to allocated memory. Otherwise return -4;

int cols_found = getcols( in_line, delim, &columns);
for ( i = 0; i < cols_found; i++ ) printf("Column[ %d ] = %s\n", i, columns[ i ] );  //<- (1st way).
// (2nd way) // for ( i = 0; columns[ i ]; i++) printf("start_idx[ %d ] = %s\n", i, columns[ i ] );

free( columns );    //Release the Single Contiguous Memory Space.
columns = NULL;     //Pointer = NULL to indicate it does not reserve space and that is ready for the next malloc().

printf("\n\nExample2, Nested:\n\n");

char example_file[] = "ID;Day;Month;Year;Telephone;email;Date of registration\n"
        "1;Sunday;january;2009;123-124-456;jitter@go.xyz;2015-05-13\n"
        "2;Monday;March;2011;(+30)333-22-55;buffer@wl.it;2009-05-23";

char **rows;
int j;

rows = NULL; //getcols() requires it to be NULL. (Avoid dangling pointers, leaks e.t.c).

getcols( example_file, "\n", &rows);
for ( i = 0; rows[ i ]; i++) {
    {
        printf("Line[ %d ] = %s\n", i, rows[ i ] );
        char **columnX = NULL;
        getcols( rows[ i ], ";", &columnX);
        for ( j = 0; columnX[ j ]; j++) printf("  Col[ %d ] = %s\n", j, columnX[ j ] );
        free( columnX );
    }
}

free( rows );
rows = NULL;

return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-04T12:38:30.133

一个完整的示例，它将字段作为以 NULL 结尾的字符串保留在原始输入缓冲区中，并通过 char 指针数组提供对它们的访问。已确认 CSV 处理器可以处理包含在“双引号”中的字段，而忽略其中的任何分隔符字符。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// adjust BUFFER_SIZE to suit longest line 
#define BUFFER_SIZE 1024 * 1024
#define NUM_FIELDS 10
#define MAXERRS 5
#define RET_OK 0
#define RET_FAIL 1
#define FALSE 0
#define TRUE 1

// char* array will point to fields
char *pFields[NUM_FIELDS];
// field offsets into pFields array:
#define LP          0
#define IMIE        1
#define NAZWISKo    2
#define ULICA       3
#define NUMER       4
#define KOD         5
#define MIEJSCOw    6
#define TELEFON     7
#define EMAIL       8
#define DATA_UR     9

long loadFile(FILE *pFile, long *errcount);
static int  loadValues(char *line, long lineno);
static char delim;

long loadFile(FILE *pFile, long *errcount){

    char sInputBuf [BUFFER_SIZE];
    long lineno = 0L;

    if(pFile == NULL)
        return RET_FAIL;

    while (!feof(pFile)) {

        // load line into static buffer
        if(fgets(sInputBuf, BUFFER_SIZE-1, pFile)==NULL)
            break;

        // skip first line (headers)
        if(++lineno==1)
            continue;

        // jump over empty lines
        if(strlen(sInputBuf)==0)
            continue;
        // set pFields array pointers to null-terminated string fields in sInputBuf
        if(loadValues(sInputBuf,lineno)==RET_FAIL){
           (*errcount)++;
            if(*errcount > MAXERRS)
                break;
        } else {    
            // On return pFields array pointers point to loaded fields ready for load into DB or whatever
            // Fields can be accessed via pFields, e.g.
            printf("lp=%s, imie=%s, data_ur=%s\n", pFields[LP], pFields[IMIE], pFields[DATA_UR]);
        }
    }
    return lineno;
}

static int  loadValues(char *line, long lineno){
    if(line == NULL)
        return RET_FAIL;

    // chop of last char of input if it is a CR or LF (e.g.Windows file loading in Unix env.)
    // can be removed if sure fgets has removed both CR and LF from end of line
    if(*(line + strlen(line)-1) == '\r' || *(line + strlen(line)-1) == '\n')
        *(line + strlen(line)-1) = '\0';
    if(*(line + strlen(line)-1) == '\r' || *(line + strlen(line)-1 )== '\n')
        *(line + strlen(line)-1) = '\0';

    char *cptr = line;
    int fld = 0;
    int inquote = FALSE;
    char ch;

    pFields[fld]=cptr;
    while((ch=*cptr) != '\0' && fld < NUM_FIELDS){
        if(ch == '"') {
            if(! inquote)
                pFields[fld]=cptr+1;
            else {
                *cptr = '\0';               // zero out " and jump over it
            }
            inquote = ! inquote;
        } else if(ch == delim && ! inquote){
            *cptr = '\0';                   // end of field, null terminate it
            pFields[++fld]=cptr+1;
        }
        cptr++;
    }   
    if(fld > NUM_FIELDS-1){
        fprintf(stderr, "Expected field count (%d) exceeded on line %ld\n", NUM_FIELDS, lineno);
        return RET_FAIL;
    } else if (fld < NUM_FIELDS-1){
        fprintf(stderr, "Expected field count (%d) not reached on line %ld\n", NUM_FIELDS, lineno);
        return RET_FAIL;    
    }
    return RET_OK;
}

int main(int argc, char **argv)
{
   FILE *fp;
   long errcount = 0L;
   long lines = 0L;

   if(argc!=3){
       printf("Usage: %s csvfilepath delimiter\n", basename(argv[0]));
       return (RET_FAIL);
   }   
   if((delim=argv[2][0])=='\0'){
       fprintf(stderr,"delimiter must be specified\n");
       return (RET_FAIL);
   }
   fp = fopen(argv[1] , "r");
   if(fp == NULL) {
      fprintf(stderr,"Error opening file: %d\n",errno);
      return(RET_FAIL);
   }
   lines=loadFile(fp,&errcount);
   fclose(fp);
   printf("Processed %ld lines, encountered %ld error(s)\n", lines, errcount);
   if(errcount>0)
        return(RET_FAIL);
    return(RET_OK); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-24T10:23:33.883

使用`fscanf`读取文件直到遇到`';'`或`\n`，然后您可以使用 跳过它`fscang(f, "%*c")`。

```
int main()
{
    char str[128];
    int result;
    FILE* f = fopen("test.txt", "r");
    ...

    do {
        result = fscanf(f, "%127[^;\n]", str);

        if(result == 0)
        {
            result = fscanf(f, "%*c");
        }
        else
        {
            //whatever you want to do with your value
            printf("%s\n", str);
        }

    } while(result != EOF);

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T15:57:29.570

以为我会分享这段代码。这相当简单，但很有效。它用括号解析逗号分隔的文件。您可以轻松修改它以满足您的需求。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{
  //argv[1] path to csv file
  //argv[2] number of lines to skip
  //argv[3] length of longest value (in characters)

  FILE *pfinput;
  unsigned int nSkipLines, currentLine, lenLongestValue;
  char *pTempValHolder;
  int c;
  unsigned int vcpm; //value character marker
  int QuotationOnOff; //0 - off, 1 - on

  nSkipLines = atoi(argv[2]);
  lenLongestValue = atoi(argv[3]);

  pTempValHolder = (char*)malloc(lenLongestValue);  

  if( pfinput = fopen(argv[1],"r") ) {

    rewind(pfinput);

    currentLine = 1;
    vcpm = 0;
    QuotationOnOff = 0;

    //currentLine > nSkipLines condition skips ignores first argv[2] lines
    while( (c = fgetc(pfinput)) != EOF)
    {
       switch(c)
       {
          case ',':
            if(!QuotationOnOff && currentLine > nSkipLines) 
            {
              pTempValHolder[vcpm] = '\0';
              printf("%s,",pTempValHolder);
              vcpm = 0;
            }
            break;
          case '\n':
            if(currentLine > nSkipLines)
            {
              pTempValHolder[vcpm] = '\0';
              printf("%s\n",pTempValHolder);
              vcpm = 0;
            }
            currentLine++;
            break;
          case '\"':
            if(currentLine > nSkipLines)
            {
              if(!QuotationOnOff) {
                QuotationOnOff = 1;
                pTempValHolder[vcpm] = c;
                vcpm++;
              } else {
                QuotationOnOff = 0;
                pTempValHolder[vcpm] = c;
                vcpm++;
              }
            }
            break;
          default:
            if(currentLine > nSkipLines)
            {
              pTempValHolder[vcpm] = c;
              vcpm++;
            }
            break;
       }
    }

    fclose(pfinput); 
    free(pTempValHolder);

  }

  return 0;
} 
```

# python - 线程使用 FTP LIST 和 Python 挂起

> ID：12911305
> 
> 赞同：0
> 
> 时间：2012-10-16T09:14:42.633
> 
> 标签：python, ftp

我正在使用 ftplib 连接并从 FTP 服务器获取文件列表。我遇到的问题是连接不时挂起，我不知道为什么。我正在使用线程将 python 脚本作为守护进程运行。明白了吗：

```
def main():
signal.signal(signal.SIGINT, signal_handler)

    app.db = MySQLWrapper()
    try:
        app.opener = FTP_Opener()
        mainloop = MainLoop()

        while not app.terminate:
            # suspend main thread until the queue terminates
            # this lets to restart the queue automatically in case of unexpected shutdown
            mainloop.join(10)
            while (not app.terminate) and (not mainloop.isAlive()):
                time.sleep(script_timeout)
                print time.ctime(), "main: trying to restart the queue"
                try:
                    mainloop = MainLoop()
                except Exception:
                    time.sleep(60)

    finally:
        app.db.close()
        app.db = None
        app.opener = None
        mainloop = None
        try:
            os.unlink(PIDFILE)
        except:
            pass
        # give other threads time to terminate
        time.sleep(1)
        print time.ctime(), "main: main thread terminated" 
```

MainLoop() 有一些函数用于 FTP 连接、下载特定文件和断开与服务器的连接。

这是我获取文件列表的方式：

```
file_list = app.opener.load_list() 
```

以及 FTP_Opener.load_list() 函数的样子：

```
def load_list(self):
    attempts = 0
    while attempts<=ftp_config.load_max_attempts:
        attempts += 1
        filelist = []
        try:
            self._connect()
            self._chdir()
            # retrieve file list to 'filelist' var
            self.FTP.retrlines('LIST', lambda s: filelist.append(s))

            filelist = self._filter_filelist(self._parse_filelist(filelist))

            return filelist
        except Exception:
            print sys.exc_info()
            self._disconnect()
            sleep(0.1)

    print time.ctime(), "FTP Opener: can't load file list"
    return [] 
```

为什么有时 FTP 连接会挂起，我该如何监控？因此，如果发生这种情况，我想以某种方式终止线程并启动一个新线程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:52:03.707

如果您正在构建健壮性，我强烈建议您考虑使用事件驱动的方法。[Twisted](http://twistedmatrix.com) ( [API](http://twistedmatrix.com/documents/current/api/twisted.protocols.ftp.html) )是支持 FTP 的一种。

优点是您在等待 i/O 时不会阻塞线程，并且您可以创建简单的计时器函数来监控您的连接，如果您愿意的话。它的扩展性也更好。使用事件驱动模式编写代码稍微复杂一些，所以如果这只是一个简单的脚本，它可能值得也可能不值得付出额外的努力，但既然你写的是你正在编写一个守护进程，那么它可能值得研究。

下面是一个 FTP 客户端的例子：[ftpclient.py](http://twistedmatrix.com/documents/current/core/examples/ftpclient.py)

# php - 使用 Java 脚本输出保存 Html

> ID：12911308
> 
> 赞同：1
> 
> 时间：2012-10-16T09:14:53.430
> 
> 标签：php, javascript, html, linux

这个页面[http://videocamaras.com.es/index.html](http://videocamaras.com.es/index.html) 正在执行JS

如何将此 JS 的输出保存到 Linux 服务器上的 Html/Php 中？

结果将是：保存的页面将显示与上面的链接相同的内容

有一个脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:25:22.227

正如我在评论中所说，您需要一个无头浏览器。我无法告诉您如何使用纯 PHP 来完成此操作，但我可以为您提供一些带有 Qt4 的 Python 代码。

```
# -*- coding: utf-8 -*-
import sys, codecs
from PyQt4.QtGui import *  
from PyQt4.QtCore import *  
from PyQt4.QtWebKit import *  

class Render(QWebPage):  
  def __init__(self, url):  
    self.app = QApplication(sys.argv)  
    QWebPage.__init__(self)  
    self.loadFinished.connect(self._loadFinished)  
    self.mainFrame().load(QUrl(url))  
    self.app.exec_()  

  def _loadFinished(self, result):  
    self.frame = self.mainFrame()  
    self.app.quit()  

url = 'http://videocamaras.com.es/index.html'

r = Render(url)  
html = unicode(r.frame.toHtml())

sys.stdout = codecs.getwriter('utf-8')(sys.stdout)
print html 
```

那会得到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:21:07.340

获取 index.html 文件的内容：

```
$url = 'http://videocamaras.com.es/index.html';
$file = '/some/path/on/your/server/index.html';
$contents = file_get_contents($url);
if (!is_dir(dirname($file)) {
    mkdir(dirname($file), 2775, true);
}
file_put_contents($contents); 
```

在这里，您只是获取位于 的文档的内容`$url`，确保目标路径存在，然后将内容放入`$file`.

为此，您应该在 .htaccess 文件中包含 php_flag allow_url_fopen 1 。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:20:36.980

您可以使用**file_get_contents**

```
$output = file_get_contents("http://videocamaras.com.es/index.html") 
```

[http://videocamaras.com.es/index.html](http://videocamaras.com.es/index.html)的完整输出存储在 $output 中，您可以将其保存在数据库中。

# windows-phone-7 - 测试移动页面 Windows Phone 7 浏览器

> ID：12911310
> 
> 赞同：2
> 
> 时间：2012-10-16T09:15:04.053
> 
> 标签：windows-phone-7, mobile, mobile-website, windows-phone-7-emulator

我正在为 windows phone 7 开发一个移动网页。

请建议我使用任何模拟器/模拟器来测试占用较少内存的页面，我尝试使用 windows phone SDK 安装 windows 官方模拟器，因为它需要更多系统空间，我放弃了该计划。

还有其他替代方法可以在 windows phone-7 浏览器中测试网页吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:19:55.007

在 IE 上测试一下。如果它适用于 IE，它将适用于移动设备。对于移动相关的规格，您需要在 SDK 中获取模拟器或获取手机设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:38:44.650

我希望这个页面对你有用 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402563%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402563%28v=vs.92%29.aspx)

# android - Phonegap/Cordova 如何为 android 打开原生文件打开对话框？

> ID：12911313
> 
> 赞同：2
> 
> 时间：2012-10-16T09:15:07.953
> 
> 标签：android, cordova

我编写了一个基于 Cordova 和 JQuery Mobile 的 android 应用程序。我必须从设备的 SD 卡打开一张图片。用户必须选择它。

有没有办法在基于 HTML 的应用程序中使用 android 中的文件打开对话框？该应用程序是来自黑莓 (WebWorks) 的一个端口。在这个系统上，我必须编写自己的扩展。我不认为 Cordova 给我们带来了这个 fileopendialog。但也许有一种解决方案可以像在 webworks 中一样创建插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:21:00.967

您可以从图像库中选择图像：

[http://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#camera.getPicture)

这直接适用于android。如果它是来自文件系统的文件：

[http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File) 但这不会创建文件选择对话框。这必须在 javascript 中实现。

# jquery - 如何从外部页面加载的 jQuery UI 对话框中检索值

> ID：12911315
> 
> 赞同：1
> 
> 时间：2012-10-16T09:15:13.803
> 
> 标签：jquery, jquery-ui-dialog

如下，假设我在 A.html 中有一个点击按钮来打开一个 ui 对话框，该对话框会将 B.html 作为内容加载。

那么，如果我想在用户单击对话框上的“确定”按钮后获取 B.html 中 id=inputName 的值，我该怎么办？我总是得到“未定义”。

抱歉，这可能是一个愚蠢的问题，因为我是 jQuery 新手。如果你能帮助我，我会非常感激。

一个.html

* * *

```
$(function(){
    $('#name').click(function(){
        var aaa = window.parent.$.dialog({
            buttons: {
                'ok': function(){
                    //get the value from B.html(ex.the value which id=inputName)
                    $aaa.dialog('close');
                }
            }
        });

        var link = 'B.html';
        aaa.load(link);
        aaa.dialog('open')
    });
}); //jquery code

<div>
    <input type="button" value="input your name" id='name'>
</div>  //html code 
```

* * *

B.html

* * *

```
<input type="text" name="inputName" id="inputName"/> 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:26:21.480

这里的问题是 .load() 是异步的。

一个可能的解决方案如下。关键是您只能在加载完成时弹出一个对话框，即在回调中。请注意，在下面的示例中，创建了一个不可见元素作为您加载的 HTML 的持有者。加载完成后，你可以遍历它的子元素或者从文档中获取你的元素：

```
<h1 id="dialogtest">Click me for a dialog!</h1>
<script type="text/javascript">
var myElementValue = null;
$(function(){
    $('#dialogtest').click(function(){
    var dialogElement = document.createElement("div");
    var link = 'B.html';
    $(dialogElement).load(
        link,
        function(responseText, textStatus, XMLHttpRequest) {
            alert('Load complete: ' + responseText + "; " + textStatus + ";\n " + dialogElement.outerHTML);
            var myDialog = $(dialogElement).dialog({
                autoOpen: false,
                buttons: {
                    'ok': function(){
                        // You can traverse the childNodes of dialogElement, or do just thie following.
                        // For example, this is the value of a text node:
                        myElementValue = document.getElementById("myElement").childNodes[0].data;
                        alert(myElementValue);
                        myDialog.dialog('close');
                    }
                }
            });
            $(myDialog).dialog('open'); // Can autoOpen it above instead
        }
    );
    });
}); //jquery code
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:22:51.947

实际上，我想通过 ajax 请求获取 B.html 中的值以用于 CGI。以另一种方式，我完成了这项工作，将以下代码添加到 **B.html**：

```
<script type="text/javascript">
var okBtn = $('.ui-dialog-buttonpane').children("button:last");
okBtn.click(function(){ ajaxRequest(); });

function ajaxRequest() {
        var data
        data.name = $('#inputName').val();
        var url="(cgi link)";
        $.get(url,data);
        return;
}
</script> 
```

# java - AppContext 中同名同类的两个 bean（一个被模拟）

> ID：12911317
> 
> 赞同：0
> 
> 时间：2012-10-16T09:15:30.453
> 
> 标签：java, spring, mocking

我有两个同名同类的豆子。我想模拟（模拟不是通过`@Mock`注释完成，而是由于某种原因在 Spring 文件中完成）其中一个，而另一个保持正常（用于集成测试）。

我能想到的一种方法是更改`resource file`​​并`@ContextConfiguration's location attribute`加载单独的配置以进行单元测试和集成测试。

有没有其他方法可以完成这项任务？

我知道有一些问题，例如`Why not to use @Mock?`，`Why to have two beans of same class and same bean?`但我无法更改，因为某些部分已经存在并且我不想更改。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:17:32.830

出于不同目的，我有单独的配置文件。一种方案是一种用于测试，另一种用于生产。我同意你的第一个想法。

# php - oauth 错误：（无法连接到服务器）在 oauth getRequestToken 方法中

> ID：12911318
> 
> 赞同：0
> 
> 时间：2012-10-16T09:15:35.570
> 
> 标签：php, oauth

我曾在[https://stackoverflow.com/questions/12814603/](https://stackoverflow.com/questions/12814603/)中问过这个问题，但我不知道为什么我的问题结束了！

我找到了答案，现在我想分享它。

**问题**

我有一个脚本可以将邀请电子邮件发送到网络邮件服务。

但是现在，我得到了错误而没有对代码进行任何更改。当我运行脚本时，浏览器状态栏显示“ `Waiting for domain.com`”

几秒钟后，我给出以下错误`oauth->getRequestToken`：

> 使请求失败（无法连接到服务器）

我想知道为什么会发生此错误或发生此错误的原因是什么？是否与防火墙 (csf) 设置（例如阻塞端口等）有关？

注意：我的代码在工作时或现在都没有任何更改。

PHP 5.2.17 CentOS 6.2 oauth 最后发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:15:35.570

在我的问题中，我说我正在使用**csf**防火墙并问`Dose it related to firewall (csf) settings (e.g. Blocked port and etc.)?`

我的 csf 防火墙被阻止了 Google 和 Yahoo IP。

`Allow IPs`在我在 csf 防火墙设置中添加 Yahoo 和 Google IP 后问题解决了。

只需输入以下IP：

```
173.194.0.0/16 # Google
77.0.0.0/8 # Yahoo 
```

# c# - PerfView GC 触发原因

> ID：12911323
> 
> 赞同：4
> 
> 时间：2012-10-16T09:15:51.310
> 
> 标签：c#, garbage-collection

我一直在调查 ac# 服务器应用程序中的一些垃圾收集问题。我目前正在使用 PerfView 来执行此操作。在收集了一些数据并获得了大量 GC Stats 之后，我对“触发原因”列之一有点困惑。我得到两个值“AllocLarge”和“AllocSmall”。我搜索了帮助和谷歌，找不到这两个术语的确切含义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T18:30:51.527

.NET GC 处理大于 85K 的对象（大对象）与其他对象（小对象）非常不同。特别是大型对象仅在“第 2 代”（最昂贵的 GC 类型）中收集。'AllocLarge' 表示在分配大对象时触发了 GC（因此必须引发 Gen 2 GC）。'AllocSmall' 表示 GC 是为了响应分配一个“普通”对象而发生的。

请注意，一般来说，拥有短暂的大对象是不好的（因为这些会强制执行昂贵的 GC）。通过查看“GC Alloc Stats”视图并查找伪框架“LargeObject”，您可以在任何地方看到分配了大对象的信息。双击它（这会带你进入'调用者'视图，你会看到你在哪里分配大对象。

# ios - 如果过期会生成新的 Facebook 访问令牌？

> ID：12911324
> 
> 赞同：0
> 
> 时间：2012-10-16T09:15:59.680
> 
> 标签：ios, iphone, facebook-access-token

我正在使用以下 API 列出我的 Facebook 好友。

[https://graph.facebook.com/me/friends?access_token=](https://graph.facebook.com/me/friends?access_token=) ???

我想知道访问令牌过期时会发生什么。

1) 如果我已退出 Facebook，并尝试通过 Facebook-connect 重新登录我的应用，则会在我的应用中生成新的访问令牌。

2) 但是如果我已经是 Facebook 登录用户，并且我使用的是 iOS5.0 或更高版本，并尝试通过 Facebook-connect 登录我的应用程序，**它会显示过期错误吗？还是生成了新的访问令牌？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:46:35.803

默认访问令牌将在 2 小时后过期，如果您再次登录，则会生成一个新的访问令牌。

这里有更多：[https ://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

# sql - 添加只有一列的表（自动递增标识）是个好主意吗？

> ID：12911325
> 
> 赞同：2
> 
> 时间：2012-10-16T09:16:00.530
> 
> 标签：sql, sql-server-2008, database-design, localization

我正在开发一个多语言 Web 应用程序，但在确定处理数据库中特定场景的最佳方法时遇到了一些困难（SQL Server 2008）。

假设用户可以添加帖子。帖子具有默认数据和本地化数据。帖子也与一个类别相关联。用户还可以管理这些本地化类别。

关于帖子的部分对我来说很清楚。那将是这样的：

```
Posts
-----
PostId (auto incremented identity)
CategoryId
CreationDate
SortOrder

PostLocalizations
-----------------
PostId
LanguageId
Title
Content 
```

我遇到的问题是一个类别没有默认数据。这只是一个文字描述，我不确定存储本地化的最佳方式是什么。

我可以想到一个可能的解决方案，但我真的不喜欢它。

```
Categories
----------
CategoryId (auto incremented identity)

CategoryLocalizations
---------------------
CategoryId
LanguageId
Name 
```

我不喜欢只有一列的表：自动递增的标识。当然，我可以添加我并不真正需要的虚拟字段，例如 CreationDate 或 SortOrder，但这看起来很愚蠢。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:26:12.257

Paul 对 SEQUENCES 的建议是正确的。

当您要将新类别插入表中时，一种愚蠢的方法是使用事务（+ 存储过程）并获取 MAX(CategoryId)+1 作为新 ID。

当您添加现有类别的新语言时，您将调用现有的 CategoryId 以重新使用。UNIQUE KEY (CategoryId, LangaugeId) 也建议避免粗心的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:20:44.150

在纯关系设计中，这里的类别是属性而不是实体。表是实体，列是属性。您真正要说的是 CategoryLocalizations 实体实例具有相似的“类别”，就像一组书籍在封面上具有相似的“颜色”一样。除了颜色是有限的并且类别是不断组成的（因此是同一性的）。

长期以来，这一差距已被识别并最终插入 SQL Server 2012。然而，在 SQL Server 2008 中，IDENTITY 通常是大容量事务表的强大工具。 **但是**，因为您的表看起来体积非常小，我会简单地将其添加为我的配置或通用设置表中的一个字段，并在我*不经常*需要一个值时更新，例如

```
declare @CategoryID int;
update config set @CategoryID = CategoryID = CategoryID + 1; 
```

# python - 带有 Python cmd 模块的命令的别名

> ID：12911327
> 
> 赞同：10
> 
> 时间：2012-10-16T09:16:06.997
> 
> 标签：python, python-3.x

如何在使用该`cmd`模块实现的面向行的命令解释器中为命令创建别名？

要创建命令，我必须实现该`do_cmd`方法。但是我有长名称的命令（如`constraint`），我想为这些命令（如）提供别名（实际上是快捷方式`co`）。我怎样才能做到这一点？

我想到的一种可能性是实现`do_alias`(like ) 方法并在此方法中`do_co`调用`do_cmd`( )。`do_constraint`但这在 CLI 的帮助下为我带来了新的命令。

有没有其他方法可以实现这一目标？或者有没有办法从`help`输出中隐藏命令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T09:55:17.743

您可以覆盖该[`default`](http://docs.python.org/library/cmd.html#cmd.Cmd.default)方法并搜索合适的命令处理程序（正如[Brian](https://stackoverflow.com/a/12911826/142637)已经建议的那样）：

```
import cmd

class WithAliasCmd(cmd.Cmd):

    def default(self, line):
        cmd, arg, line = self.parseline(line)
        func = [getattr(self, n) for n in self.get_names() if n.startswith('do_' + cmd)]
        if func: # maybe check if exactly one or more elements, and tell the user
            func[0](arg) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-09-15T21:17:30.763

以下解决方案使别名命令共享单个帮助消息。它使您可以将所有别名保存在一个易于编辑的位置，同时使文档变得更加容易。[它根据具有函数值](https://softwareengineering.stackexchange.com/questions/182093/why-store-a-function-inside-a-python-dictionary)的别名字典检查用户输入，并覆盖`default()`（*参见[树懒](https://stackoverflow.com/questions/12911327/aliases-for-commands-with-python-cmd-module/12912000#12912000)和[布莱恩](https://stackoverflow.com/questions/12911327/aliases-for-commands-with-python-cmd-module/12911826#12911826)*）和`do_help()`方法。

在这里，我创建了别名`'c'`并`'con'`执行`do_constraint()`、`'q'`调用`do_quit()`和`'h'`调用`do_help()`。`'h q'`此解决方案的好处是`'help quit'`打印相同的消息。可以在单个文档字符串中维护多个别名命令的文档。

```
import cmd

class prompt(cmd.Cmd):

    def __init__(self):
        cmd.Cmd.__init__(self)
        self.aliases = { 'c'   : self.do_constraint ,
                         'con' : self.do_constraint ,
                         'q'   : self.do_quit       ,
                         'h'   : self.do_help       }

    def do_constraint(self, arg):
        '''Constrain things.'''
        print('Constraint complete.')

    def do_quit(self, arg):
        '''Exit the program.'''
        return True

    def do_help(self, arg):
        '''List available commands.'''
        if arg in self.aliases:
            arg = self.aliases[arg].__name__[3:]
        cmd.Cmd.do_help(self, arg)

    def default(self, line):
        cmd, arg, line = self.parseline(line)
        if cmd in self.aliases:
            self.aliases[cmd](arg)
        else:
            print("*** Unknown syntax: %s" % line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:45:50.530

文档提到了一个默认方法，您可以覆盖它来处理任何未知命令。将其编码为前缀扫描命令列表并按照您对 do_alias 的建议调用它们。

# jquery - 如何找到链接到 jQuery 选择器的点击事件？

> ID：12911333
> 
> 赞同：1
> 
> 时间：2012-10-16T09:16:27.150
> 
> 标签：jquery, console, click, jquery-events

如果我有以下 HTML 标记：

```
<div class="foo">bar</div> 
```

如何找到链接到此元素/jQuery 选择器的点击事件？

有没有办法可以使用 Google Chrome 控制台获取文件位置列表或其他内容？

* * *

假设我有以下 jQuery：

```
$(".foo").click(function(){
  //do something
});

$("div").click(function(){
  //do something else
});

$("table").click(function(){
  //do something else
}); 
```

我想要类似的东西：

> foob​​ar.js（第 1 行）
> 
> foob​​ar.js（第 4 行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:21:04.110

这段代码应该会有所帮助。它基于此[链接](http://james.padolsey.com/javascript/things-you-may-not-know-about-jquery/)。**这是你想要的吗？**

```
// List bound events:
console.dir( jQuery('#elem').data('events') );

// Log ALL handlers for ALL events:
jQuery.each($('#elem').data('events'), function(i, event){
    jQuery.each(event, function(i, handler){
        console.log( handler.toString() );
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:23:27.237

有一种叫做[Visual Event](http://www.sprymedia.co.uk/article/Visual+Event)的东西。您可以知道附加到 DOM 元素的所有事件处理程序。

# python - 在 3d numpy 数组中定义循环

> ID：12911334
> 
> 赞同：1
> 
> 时间：2012-10-16T09:16:29.183
> 
> 标签：python, arrays, numpy, multidimensional-array

我构造了一个 3d numpy 零矩阵，然后对行进行归一化。现在我想循环遍历矩阵并在嵌套列表中每次一个项目跟随另一个项目时添加+1：

```
nested list = [(0,0),(1,1),(2,2)][(0,5),(1,6),(2,7)] 
```

我想循环遍历嵌套列表，以便每个的最后一个索引在从另一个元组跟随时`tupleindex [1]`获取，例如，如果in ，从in跟随，矩阵列获取矩阵 - 矩阵 3*3 的零，然后归一化`+1``index [1]``index [1]``tuple (2,2),2``index[1]``(1,1), 1``+1``row/=row.sum()`

我尝试了以下方法：

```
 try:
        for i in data:
            for j in i:
               for k in range(len(j)):
                    matrice [ i[j[k]][1], i[j[k]+1][1] ] += 1

  except(IndexError):
            pass
  return matrice 
```

这给出了以下结果：

```
[ 0    2    0] [ 0   0    2] [ 0   2    0] 
```

虽然结果应该是

```
[ 0    2    0][ 0   0    2] [ 2   0   0]] 
```

最后一行的 2 应该在这个索引上，而不是在中间

这让我觉得循环有问题`a [ i[j[k]][1], i[j[k]+1][1] ] += 1`。我试过`[ i[j[k]][1]**+=1**, i[j[k]+1][1] ] += 1`添加+1，但这不起作用。非常感谢任何帮助

# javascript - 在特定位置插入新标签？

> ID：12911338
> 
> 赞同：1
> 
> 时间：2012-10-16T09:16:37.210
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-tabs

我正在动态创建标签。一切正常。但默认情况下它最后插入标签。在某些情况下，我想在特定位置添加选项卡。例如：- 我添加了两个选项卡，即 Tab1,Tab2 。现在，如果我添加第三个选项卡，它应该添加到索引 1，它位于 Tab1 和 Tab2 之间

准备好初始化选项卡，如下所示

```
 var $tabs = $( "#tabs_selector").tabs
        ({
            tabTemplate: '<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'></span></li>',
         add: function( event, ui )
         {
            $tabs.tabs('select',ui.panel.id);
            return false;
         }
    }); 
```

// 现在点击一些链接，我调用下面的函数动态插入选项卡。**我的问题是我可以在某处提及索引位置，以便将选项卡插入该位置而不是最后插入吗？**

```
function inserTab()
 {
     var tabs = $('#tabs_selector').tabs();
     tabs.tabs( "add", url, title);// is there any idex paramter too here?
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:37:03.073

添加一个时有一个可选的第四个参数：

```
.tabs( "add" , url , label , [index] ) 
```

因此，您应该能够选择要添加它的位置！

尽管您可能不应该使用“添加”方法，因为它现在已被弃用：http: [//jqueryui.com/upgrade-guide/1.9/#deprecated-add-and-remove-methods-and-events-使用刷新方法](http://jqueryui.com/upgrade-guide/1.9/#deprecated-add-and-remove-methods-and-events-use-refresh-method)

也许这样的事情会起作用：

```
// Find the first tab (change the eq(1) to get a different one)
var firstTab = $( "#tabs" ).find( ".ui-tabs-nav li:eq(1)" );
// create the new tab HTML
var newTab = $( "<li><a href='/remote/tab.html'>New Tab</a></li>" );
// add the new tab after the 1st one we found
firstTab.after(newTab);
// Refresh the tabs widget
$( "tabs" ).tabs( "refresh" ); 
```

未经测试，但根据文档应该大致正确！

# camera - 用kinect计算物体相对于相机的z坐标

> ID：12911339
> 
> 赞同：1
> 
> 时间：2012-10-16T09:16:41.517
> 
> 标签：camera, coordinates, kinect

我想计算一个物体相对于相机（kinect）的z坐标，知道来自kinect的深度信息。我也知道内在参数。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:03:12.340

如果您想要真实世界的测量值（包括深度），您想要检索点云图，例如：

```
Mat world;
if( capture.retrieve(world, CV_CAP_OPENNI_POINT_CLOUD_MAP)){
Vec3f pt3D = world.at<Vec3f>(yourY, yourX);
cout << "pt3D" << pt3D << endl;
} 
```

请注意，您首先传递 y，然后传递 x。我最近[才知道这](https://stackoverflow.com/questions/11962203/measuring-distance-between-2-points-with-opencv-and-openni)一点:)

# java - android中没有DataTypeConverter Method选项

> ID：12911342
> 
> 赞同：9
> 
> 时间：2012-10-16T09:16:47.797
> 
> 标签：java, android

我想在我的项目中使用**DataTypeConverter.printBase64Binary(.........) 。**但是没有选择通过智能感知。我错过了一些罐子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-23T20:50:47.333

你可以使用这个方法。编译'commons-codec:commons-codec:1.3'

我使用 android.util.Base64 for Android

不兼容/更换

```
DatatypeConverter.parseHexBinary 
org.apache.commons.codec.binary.Hex.decodeHex(key.toCharArray());

DatatypeConverter.printBase64Binary(finalData);
android.util.Base64.encodeToString(finalData, 16) 

DatatypeConverter.parseBase64Binary(encodedInitialData);
org.apache.commons.codec.binary.Hex.decodeHex(key.toCharArray()); 
```

[问题](https://stackoverflow.com/questions/34342136/alternatives-a-datatypeconverter-in-androidsolved)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T11:15:35.050

Android API 提供 Base64 来进行您正在寻找的转换。但是，我使用 Apache Codec 作为客户端库之间不同平台之间的兼容性库来解决这个问题。

# sql - 在 plsql 中转义

> ID：12911345
> 
> 赞同：0
> 
> 时间：2012-10-16T09:16:53.880
> 
> 标签：sql, oracle, plsql, escaping

嗨，我想触发这个查询

```
update txnblackout
  set enddate= ''TO_DATE('25/02/2012','dd/mm/yyyy')''
  where idsequence='1' 
```

但它不工作给出错误

```
ORA-00933: SQL command not properly ended 
```

你能证明它的合理性吗？为什么会这样？

这是我用来创建查询的 java 代码：-

```
Map<String, String> l_script_columns = new HashMap<String, String>();
        l_script_columns.put("startdate", "'TO_DATE('"
            + txtStartDate.getText().trim() + "','"
            + FieldMapperHelper.DATE_Format + "')'"); 
```

如果您需要更多说明，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:31:01.013

你为什么要逃避？

```
with txnblackout as 
       (select trunc(sysdate + level) enddate /* trunc drops time component */ , level idsequence
          from dual
       connect by level <= 10 /* this will generate 10 rows with an incrementing 'level' value */ )
select enddate
     , idsequence
  from txnblackout
 where enddate = to_date('20/10/2012','dd/mm/yyyy')
; 
```

因此，您应该安全地删除额外的引号，它们不是必需的。

```
update txnblackout
  set enddate= TO_DATE('25/02/2012','dd/mm/yyyy')
  where idsequence=1; 
```

（注意这假设 idsequence 是一个数字）

* * *

归根结底，如果您将一个非参数化的动态 sql 查询传递给 Oracle，您需要它看起来像这样：

```
"update txnblackout   
    set enddate= TO_DATE(''25/02/2012'',''dd/mm/yyyy'')  
  where idsequence=1;" 
```

*（请注意，我仍然假设 idsequence 是 NUMBER 类型而不是 varchar）*

不过看看这个，尽量安全！

如果您对其进行参数化，您也不必担心转义！

[在 Java 中防止 SQL 注入](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:50:06.977

您上面的查询要保留日期或文本，所以在第一种情况下

```
 update txnblackout 
        set enddate= TO_DATE('25/02/2012','dd/mm/yyyy')
      where idsequence='1' 
```

id 序列是文本还是数字无关紧要，在第二种情况下，您要保留文本：

```
 update txnblackout 
        set enddate= 'TO_DATE(''25/02/2012'',''dd/mm/yyyy'')'
      where idsequence='1' 
```

我想你想要第一个案例，请检查。最好的祝福

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:34:30.920

在这种情况下，你必须尝试这个：

```
Map<String, String> l_script_columns = new HashMap<String, String>();
        l_script_columns.put("startdate", "'||TO_DATE('"
            + txtStartDate.getText().trim() + "','"
            + FieldMapperHelper.DATE_Format + "')||'"); 
```

那么最终结果将是：

```
update txnblackout 
    set enddate= ''||TO_DATE('25/02/2012','dd/mm/yyyy')||''
  where idsequence='1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:21:31.597

试着把';' 在你的命令结束时......

您的命令应如下所示： `update txnblackout set enddate= ''TO_DATE('25/02/2012','dd/mm/yyyy')'' where idsequence='1';`

# jquery - jQuery Datetimepicker - 允许多种时间格式

> ID：12911349
> 
> 赞同：0
> 
> 时间：2012-10-16T09:17:17.337
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在构建一个带有一些日期时间字段的表单。我正在使用 jQuery DateTimePicker 插件使表单更加友好 - [http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

我需要允许用户以多种格式输入时间。该插件限制用户在文本框中输入格式不正确的任何内容。我需要允许时间为 15:10 或 15.10。我不介意选择器是否总是吐出 15:10，但我需要允许用户输入小数点。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:38:49.723

在`jquery-ui-timepicker-addon.js`中`_doKeyPress`进行以下小更改：

```
 if ($.datepicker._get(inst, 'constrainInput')) {
            var ampm = tp_inst._defaults.ampm,
                dateChars = $.datepicker._possibleChars($.datepicker._get(inst, 'dateFormat')),
                datetimeChars = tp_inst._defaults.timeFormat.toString()
                                        .replace(/[hms]/g, '')
                                        .replace(/TT/g, ampm ? 'APM' : '')
                                        .replace(/Tt/g, ampm ? 'AaPpMm' : '')
                                        .replace(/tT/g, ampm ? 'AaPpMm' : '')
                                        .replace(/T/g, ampm ? 'AP' : '')
                                        .replace(/tt/g, ampm ? 'apm' : '')
                                        .replace(/t/g, ampm ? 'ap' : '') + 
                                        " " + tp_inst._defaults.separator +
                                        tp_inst._defaults.timeSuffix +
                                        (tp_inst._defaults.showTimezone ? tp_inst._defaults.timezoneList.join('') : '') +
                                        (tp_inst._defaults.amNames.join('')) + (tp_inst._defaults.pmNames.join('')) +
                                        ':*' +
                                        dateChars,
                chr = String.fromCharCode(event.charCode === undefined ? event.keyCode : event.charCode);
            return event.ctrlKey || (chr < ' ' || !dateChars || datetimeChars.indexOf(chr) > -1);
        } 
```

我添加`':*' +`了支持输入`:`和`*`时间分隔符。

在 timepicker 初始化时使用：

$('#rest_example_1').timepicker({ ... timeFormat: 'hh.mm tt' });

b/w hh和`dot`mm 非常重要... tt - 可选... 但默认设置是 'hh:mm tt' 所以最好使用有点相似的 'hh.mm tt'。

这或多或少是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:47:55.373

您可以更改**“。”** 对于按键事件中的**“：” ，请参见**[**示例**](http://jsfiddle.net/gnel/CwPV8/)

# database - SaaS - 共享数据库中特定于租户的查找数据

> ID：12911357
> 
> 赞同：0
> 
> 时间：2012-10-16T09:17:46.407
> 
> 标签：database, database-design, saas, multi-tenant

我正在开发基于多租户 SaaS 的应用程序，并使用共享数据库在 TenantId 列的帮助下存储所有租户记录。

现在的问题是我有一些需要为所有租户共享的查找记录列表。例如游戏列表。

**游戏桌**

```
Id
GameName 
```

还有另一个表用于仅存储租户特定的记录

**租户游戏**

```
Id
TenantId
GameName 
```

基本需求是我想在加入另一个事务表（如 UserGames）时同时使用表数据并获取必要的详细信息（Game_Name）。我怎样才能通过这种设计实现这一目标？**此处 Game_Name 可以从 Games Shared 表或 TenantSpecificGames 表中引用**

是否有任何其他数据库设计允许我将公共主数据和租户主数据与 JOIN 混合在一起？

基本要求是保留公共数据并允许租户在他们想要添加任何新项目时进行自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:24:15.823

我们有一个基于 saas 的数据库，我们将通用数据和租户数据保存在同一个表中。

# 概念

```
GamesTable

    Id NOT NULL
    TenantId NULL
    GameName NOT NULL
    Add a unique key for TenantId and GameName 
```

*   如果 TenantId 为 NULL，您就知道这是公共数据
*   如果 TenantId 不为 NULL，则您知道它属于特定租户以及确切的租户。

> “是否有任何其他数据库设计允许我将公共主数据和租户主数据与 JOIN 混合在一起？”

是的

```
SELECT *
  FROM GamesTable where TenantId = 'your tenant id'
  UNION
SELECT *
  FROM GamesTable where TenantId IS NULL  -- common 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:09:40.460

这是我将使用的设计。

**游戏**

```
Id
GameName
IsTenantSpecific
SomeGameSpecificColumn 
```

**租户游戏**

```
GameId
TenantId
SomeTenantSpecificColumn
AnotherTenantSpecificColumn 
```

然后，您可以在 Join 中查询该表：

```
...
FROM
    Games
    INNER JOIN UserGames ON
        UserGames.GameId = Games.Id
    LEFT JOIN TenantGames ON
        TenantGames.GameId = Games.Id
WHERE
    TenantGames.TenantId = @tenantId OR
    (
        TenantGames.TenantId IS NULL AND
        IsTenantSpecific = 0
    ) 
```

游戏特定字段可以放在游戏表中。租户特定字段可以添加到 TenantGames 表中，如果不是特定于租户的自定义，这些字段将为 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:24:49.907

这是“多对多”的经典例子。

```
Table: Games
------------
GameID
GameName
IsMasterGame

TennantGames
------------------
GameID
TennantID

Tennants
------------
TennantID
... 
```

要获取给定租户的游戏，您可以运行如下查询：

```
select *
from   Games
where isMasterGame = true
union
select * 
from Games g, 
TennantGames tg
where g.GameID = tg.GameID
and   isMasterGame = false
and   tg.TennantID = $currentTennant 
```

（为过时的连接语法道歉）

工会允许您提出两个问题：哪些游戏适用于所有人 ( `isMasterGame = true`)，其次哪些游戏适用于当前租户 ( `tg.TennantID = $currentTennant`)。从逻辑上讲，租户游戏也不可能是大师游戏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:35:22.690

对于您不希望特定于租户的记录，您可以合并表，将 TenantId 保留为 NULL。

**游戏**

```
Id
TenantId
GameName 
```

您可以在 Join 中查询该表：

```
...
FROM
    Games
    INNER JOIN UserGames ON
        UserGames.GameId = Games.Id

WHERE
    Games.TenantId = @tenantId OR
    Games.TenantId IS NULL 
```

这将为您省去确保 Id 在表之间唯一的麻烦，除非您对 Id 使用 UNIQUEIDENTIFIER。

# c# - 未在 C# 应用程序中加载 en-GB 语言环境的资源文件

> ID：12911360
> 
> 赞同：0
> 
> 时间：2012-10-16T09:17:57.107
> 
> 标签：c#, locale, culture

我正在使用设置我的应用程序的语言环境

```
Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-GB");
Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en-GB"); 
```

但我的“Resource.en-GB.resx”没有加载。它适用于 en-US，但对于 en-GB 完全忽略它并返回到默认的“Resource.resx”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:02:19.027

删除配置，应该可以工作。

[程序集：NeutralResourcesLanguage("en-GB")]

请参阅链接[http://msdn.microsoft.com/en-us/library/system.resources.neutralresourceslanguageattribute.aspx](http://msdn.microsoft.com/en-us/library/system.resources.neutralresourceslanguageattribute.aspx)

# perl - perl 中 // 运算符的含义

> ID：12911365
> 
> 赞同：0
> 
> 时间：2012-10-16T09:18:19.147
> 
> 标签：perl, operators

我是 perl 的新手。谁能解释一下`//`perl中运算符的含义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T09:20:12.980

它是定义运算符。表达方式：

```
A // B 
```

`A`如果已定义，将返回，否则`B`.

如果未定义信息源，则获取默认值非常有用，例如：

```
$actualBalance = $balanceFromBank // 0; 
```

或者：

```
$confirmation = $userInput // "N"; 
```

有关更多详细信息，请参阅[perlop 页面的相关部分，](http://perldoc.perl.org/perlop.html#Logical-Defined-Or)并制作一个[perlop](http://perldoc.perl.org/perlop.html)链接以供将来参考，因为 Google 搜索和标点 Perl 代码不能很好地混合 :-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T09:21:42.427

`//`运算符是逻辑*定义或*。[佩洛普](http://perldoc.perl.org/perlop.html#Logical-Defined-Or)说：

> 尽管它在 C 中没有直接的等价物，但 Perl 的 // 运算符与其 C 风格的 or 相关。实际上，它与 || 完全相同，只是它测试的是左侧的定义性而不是其真实性。因此，EXPR1 // 如果 EXPR2 已定义，则返回 EXPR1 的值，否则返回 EXPR2 的值。（EXPR1 在标量上下文中求值，EXPR2 在 // 自身的上下文中求值）。通常，这与 defined(EXPR1) 的结果相同？EXPR1 : EXPR2 （除了三元运算符形式可以用作左值，而 EXPR1 // EXPR2 不能）。这对于为变量提供默认值非常有用。如果您真的想测试是否至少定义了 $a 和 $b 之一，请使用 defined($a // $b) 。

简而言之：如果定义了该表达式（如 not `undef`），则返回左侧，或者返回右侧。

```
my $foo = undef;
say $foo // 42;
# 42

my $bar = 'bar';
say $bar // 42;
# bar 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T09:23:07.573

这就是所谓的`defined-or`运算符，它已在[Perl 5.10](http://perldoc.perl.org/perl5100delta.html#Defined-or-operator)中实现。文档中的示例：

> 以下表达式：
> 
> ```
> $a // $b 
> ```
> 
> ...仅相当于
> 
> ```
> defined $a ? $a : $b 
> ```
> 
> 和声明：
> 
> ```
> $c //= $d; 
> ```
> 
> ...现在可以用来代替
> 
> ```
> $c = $d unless defined $c; 
> ```

以下是不同`||`之处：`//`

```
use 5.010;
my $rabbits = 0;
say $rabbits || 1; # 1, as 0 || 1 evaluates to 1
say $rabbits // 1; # 0, as 0 is not `undef` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T09:21:09.323

那是“定义或”。`$abc // "default"`相当于`defined($abc) ? $abc : "default"`。这意味着如果左侧`//`有一个定义的值，则使用该值，否则使用它的右侧。

请参阅[perlop 手册页中的“逻辑定义或”](http://perldoc.perl.org/perlop.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T09:20:50.180

是`defined or`

像，

```
my $a //= 3; 
```

将分配 3 到`$a`

它与 的不同之处`||`在于`or`：

```
my $a = ""; 
$a //= 3; 
print "|$a|\n"; 

$a = "";
$a ||=5; 
print "|$a|\n"; 
```

将仅打印`|5|`，因为在第一种情况下`$a`已定义（使用错误值），而在第二种情况下，是否`$a`计算结果很重要`true`。

# php - Magento - 更改新帐户电子邮件主题行的 css

> ID：12911367
> 
> 赞同：0
> 
> 时间：2012-10-16T09:18:28.043
> 
> 标签：php, html, css, magento

我需要问一个非常简单的问题。可能你们中的许多人可能已经知道这一点。如何更改新帐户交易电子邮件中主题行的 css。

所以主题行是，

`Welcome {{var customer.firstname}}`

无论客户如何实际输入他/她的姓名，我如何确保 {{var customer.firstname}} 始终是首字母大写。

因此，即使它`john smith`，主体留置权也应该是`Welcome John`。第一个字母总是大写。

我如何申请`text-transform:capitalize;`{{var customer.firstname}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:01:11.177

我不认为你可以用 CSS 做到这一点。到目前为止，我认为你能做到这一点的唯一方法是在代码级别应用转换，在

`Mage_Core_Model_Email_Template::getProcessedTemplateSubject()`

通过重载这个方法并应用转换在这里说：
`$processedResult = $processor->filter($this->getTemplateSubject());`
你可能会`$this->getTemplateSubject()`用你自己的方法替换。

编辑：不过，这将适用于所有电子邮件模板，因此如果您希望它仅适用于特定模板，请使用`$this->getTemplateId()`来制作过滤器。您可以使用`ucwords()`PHP 中的首字母大写：

`$subject = "This is a subject line";
$capitalized = ucwords($subject); // produces "This Is A Subject Line"`

# android - 如何在android中获取耳机（耳机）的UUID？

> ID：12911369
> 
> 赞同：0
> 
> 时间：2012-10-16T09:18:35.873
> 
> 标签：android, hardware, uuid, headphones

我正在做一个项目，我想知道是否有可能获得连接到 android 设备的耳机的 UUID？如果是，那么该怎么做？任何有关这方面的帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:56:55.390

这`UUID`是描述蓝牙手机提供的服务的唯一 ID。[如果您知道耳机提供哪些服务，这里](http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/UUID.html)有该服务的概述`UUID`。否则，您可以下载[蓝牙网络扫描仪](http://www.medieval.it/bluescan-pc/menu-id-72.html)以扫描耳机提供的所有服务。

在蓝牙网络扫描仪应用程序中，只需按下设备，然后转到设备服务，并将鼠标悬停在服务上，UUID 就会出现。像这个：

```
{00001105-0000-1000-8000-00805F9B34FB} 
```

这是OBEX的UUID

# python - 如何在 PyCrypto 中使用 X509 证书？

> ID：12911373
> 
> 赞同：23
> 
> 时间：2012-10-16T09:18:48.333
> 
> 标签：python, openssl, rsa, pycrypto

我想用 PyCrypto 在 python 中加密一些数据。

但是使用时出现错误`key = RSA.importKey(pubkey)`：

```
RSA key format is not supported 
```

密钥是通过以下方式生成的：

```
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout mycert.key -out mycert.pem 
```

代码是：

```
def encrypt(data):
    pubkey = open('mycert.pem').read()
    key = RSA.importKey(pubkey)
    cipher = PKCS1_OAEP.new(key)
    return cipher.encrypt(data) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-16T19:14:27.330

PyCrypto 不支持 X.509 证书。您必须首先使用以下命令提取公钥：

```
openssl x509 -inform pem -in mycert.pem -pubkey -noout > publickey.pem 
```

然后，您可以使用`RSA.importKey`on `publickey.pem`。

* * *

如果您不想或不能使用 openssl，您可以获取 PEM X.509 证书并在纯 Python 中执行，如下所示：

```
from Crypto.Util.asn1 import DerSequence
from Crypto.PublicKey import RSA
from binascii import a2b_base64

# Convert from PEM to DER
pem = open("mycert.pem").read()
lines = pem.replace(" ",'').split()
der = a2b_base64(''.join(lines[1:-1]))

# Extract subjectPublicKeyInfo field from X.509 certificate (see RFC3280)
cert = DerSequence()
cert.decode(der)
tbsCertificate = DerSequence()
tbsCertificate.decode(cert[0])
subjectPublicKeyInfo = tbsCertificate[6]

# Initialize RSA key
rsa_key = RSA.importKey(subjectPublicKeyInfo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-09T19:36:58.523

这是一个很好的例子：[https ://www.dlitz.net/software/pycrypto/api/2.6/Crypto.Cipher.PKCS1_OAEP-module.html](https://www.dlitz.net/software/pycrypto/api/2.6/Crypto.Cipher.PKCS1_OAEP-module.html)

```
from Crypto.Cipher import PKCS1_OAEP
from Crypto.PublicKey import RSA

# sender side
message = 'To be encrypted'
key = RSA.importKey(open('pubkey.der').read())
cipher = PKCS1_OAEP.new(key)
ciphertext = cipher.encrypt(message)

# receiver side
key = RSA.importKey(open('privkey.der').read())
cipher = PKCS1_OAP.new(key)
message = cipher.decrypt(ciphertext) 
```

# php - 使用正则表达式计算元素

> ID：12911375
> 
> 赞同：0
> 
> 时间：2012-10-16T09:18:49.347
> 
> 标签：php, regex, web-scraping

我想抓取一个基于星级的评分，即相应的代码

```
<div class="product_detail_info_rating_stars">
    <div class="product_detail_star full"></div>
    <div class="product_detail_star full"></div>
    <div class="product_detail_star full"></div>
    <div class="product_detail_star full"></div>
    <div class="product_detail_star"></div>
</div> 
```

每个评级都有这个代码片段。我正在寻找一种将这些片段转换为数字的方法，例如这个数字是 4（5 颗星中的 4 颗）。

我想到的方法是匹配每个评级的整个块，然后匹配整个班级并计算它，但也许有更好的方法我没有看到。

有没有更好的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:39:35.307

下面是一个快速示例，说明如何使用 SimpleXML 解析器和 XPath。

```
// Get your page HTML string
$html = file_get_contents('1page.htm');

// To suppress invalid markup warnings
libxml_use_internal_errors(true);

// Create SimpleXML object
$doc = new DOMDocument();
$doc->strictErrorChecking = false;
$doc->loadHTML($html);
$xml = simplexml_import_dom($doc);

// Find a nodes
$blocks = $xml->xpath('//div[contains(@class, "product_detail_info_rating_stars")]');

foreach ($blocks as $block)
{
    $count = 0;
    foreach ($block->children() as $child) {
        if ($child['class'] == 'product_detail_star full') {
            $count++;
        }
    }
    echo '<pre>'; print_r('Rating: ' . $count . ' of ' . $block->count()); echo '</pre>';
}

// Clear invalid markup error buffer
libxml_clear_errors(); 
```

对于这样的测试html页面：

```
<!doctype html>
<html>
<head></head>
<body>

<table>
    <tr>
        <td>
            <div class="product_detail_info_rating_stars">
                <div class="product_detail_star full"></div>
                <div class="product_detail_star"></div>
                <div class="product_detail_star"></div>
                <div class="product_detail_star"></div>
                <div class="product_detail_star"></div>
            </div>
        </td>
    </tr>
    <tr>
        <td>
            <div class="product_detail_info_rating_stars">
                <div class="product_detail_star full"></div>
                <div class="product_detail_star full"></div>
                <div class="product_detail_star"></div>
                <div class="product_detail_star"></div>
                <div class="product_detail_star"></div>
            </div>
        </td>
    </tr>
    <tr>
        <td>
            <div class="product_detail_info_rating_stars">
                <div class="product_detail_star full"></div>
                <div class="product_detail_star full"></div>
                <div class="product_detail_star full"></div>
                <div class="product_detail_star full"></div>
                <div class="product_detail_star"></div>
            </div>
        </td>
    </tr>
</table>

</body>
</html> 
```

它将输出如下内容：

```
Rating: 1 of 5
Rating: 2 of 5
Rating: 4 of 5 
```

玩这个以适应您的需求。

# android - Cocos2dx - android apk 在启动时崩溃

> ID：12911377
> 
> 赞同：3
> 
> 时间：2012-10-16T09:18:51.000
> 
> 标签：android, eclipse, cocos2d-x

我正在尝试在 Android 设备或模拟器上运行 cocos2dx 示例项目（使用 create-android-project 脚本创建的项目）。

但是，应用程序在启动时崩溃并出现以下错误：

> 10-16 10:50:02.249: E/AndroidRuntime(379): 致命异常: main 10-16 10:50:02.249: E/AndroidRuntime(379): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. geckolab/com.geckolab.mahjong}: java.lang.ClassNotFoundException: com.geckolab.mahjong 在加载器 dalvik.system.PathClassLoader[/data/app/com.geckolab-1.apk] 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java :2679) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) 10-16 10:50:02.249: E/AndroidRuntime(379) ：在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 10-16 10:50:02。249: E/AndroidRuntime(379): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.os.Looper.loop(Looper .java:123) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 10-16 10:50:02.249: E/AndroidRuntime(379 ): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.reflect.Method.invoke(Method.java:521) 10 -16 10:50:02.249: E/AndroidRuntime(379): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 10-16 10:50:02.249: E/AndroidRuntime(379 ): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 dalvik.system.NativeStart.main(Native Method) 10 -16 10：50：02.249：E/AndroidRuntime(379): 引起: java.lang.ClassNotFoundException: com.geckolab.mahjong in loader dalvik.system.PathClassLoader[/data/app/com.geckolab-1.apk] 10-16 10:50:02.249 : E/AndroidRuntime(379): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader. java:573) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10:50:02.249: E/AndroidRuntime(379) : 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 10-16 10:50:02.249: E/AndroidRuntime(379): ... 11 更多ClassNotFoundException: com.geckolab.mahjong 在加载程序 dalvik.system.PathClassLoader[/data/app/com.geckolab-1.apk] 10-16 10:50:02.249: E/AndroidRuntime(379): at dalvik.system.PathClassLoader .findClass(PathClassLoader.java:243) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:573) 10-16 10:50:02.249: E /AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.Instrumentation.newActivity(Instrumentation.java: 1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 10-16 10:50:02.249: E/AndroidRuntime(379): 。 .. 还有 11 个ClassNotFoundException: com.geckolab.mahjong 在加载程序 dalvik.system.PathClassLoader[/data/app/com.geckolab-1.apk] 10-16 10:50:02.249: E/AndroidRuntime(379): at dalvik.system.PathClassLoader .findClass(PathClassLoader.java:243) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:573) 10-16 10:50:02.249: E /AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.Instrumentation.newActivity(Instrumentation.java: 1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 10-16 10:50:02.249: E/AndroidRuntime(379): 。 .. 还有 11 个apk] 10-16 10:50:02.249: E/AndroidRuntime(379): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243) 10-16 10:50:02.249: E/AndroidRuntime(379): 在java.lang.ClassLoader.loadClass(ClassLoader.java:573) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10: 50:02.249: E/AndroidRuntime(379): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2577) 10-16 10:50:02.249: E/AndroidRuntime(379): ... 11 更多apk] 10-16 10:50:02.249: E/AndroidRuntime(379): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243) 10-16 10:50:02.249: E/AndroidRuntime(379): 在java.lang.ClassLoader.loadClass(ClassLoader.java:573) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10: 50:02.249: E/AndroidRuntime(379): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2577) 10-16 10:50:02.249: E/AndroidRuntime(379): ... 11 更多573) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10:50:02.249: E/AndroidRuntime(379): 在android.app.Instrumentation.newActivity(Instrumentation.java:1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 10-16 10: 50:02.249: E/AndroidRuntime(379): ... 11 更多573) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 10-16 10:50:02.249: E/AndroidRuntime(379): 在android.app.Instrumentation.newActivity(Instrumentation.java:1021) 10-16 10:50:02.249: E/AndroidRuntime(379): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 10-16 10: 50:02.249: E/AndroidRuntime(379): ... 11 更多

知道出了什么问题吗？build_native.sh 脚本似乎工作正常，我通过将编译器兼容级别更改为 1.6 并将 libcocos2dx.jar 添加到项目的构建路径中解决了一些 Eclipse 错误。

干杯，马尔辛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:20:12.350

您必须记住在`AndroidManifest.xml`

编辑：检查您的项目属性并确保检查所有 jars 或 crocos2d 库的顺序和导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:01:55.160

我有同样的问题。我已经配置好了一切。在我的情况下，没有将 jar 文件添加到构建路径，因为我在包含 libscocos2dx.jar 的项目中添加了一个 cocos2dx 库

虽然我有一个通常不需要添加到构建路径中的 so 文件，但我也添加了它只是为了检查它是否有效，不幸的是它没有

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T13:07:41.453

解决方案：重新启动您的 IDE！然后删除项目错误（可能与找不到的libcocos2dx有关）。

# java - 在 MATLAB 中遇到 Java 错误“java.awt.IllegalComponentStateException”

> ID：12911380
> 
> 赞同：4
> 
> 时间：2012-10-16T09:18:57.600
> 
> 标签：java, matlab

我是这里的新人。

我在使用 MATLAB 时经常遇到 java 错误。我用的是intel Mac，MATLAB版本是R2012a。

错误在 MATLAB 命令行窗口中显示如下：

```
java.awt.IllegalComponentStateException: component must be showing on the screen to determine its location
at java.awt.Component.getLocationOnScreen_NoTreeLock(Component.java:1971)
at java.awt.Component.getLocationOnScreen(Component.java:1945)
at apple.awt.CAccessibility$22.call(CAccessibility.java:370)
at apple.awt.CAccessibility$22.call(CAccessibility.java:368)
at apple.awt.CToolkit$CallableWrapper.run(CToolkit.java:1121)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:199)
at apple.awt.CToolkit$CPeerEvent.dispatch(CToolkit.java:1211)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:702)
at java.awt.EventQueue.access$400(EventQueue.java:82)
at java.awt.EventQueue$2.run(EventQueue.java:663)
at java.awt.EventQueue$2.run(EventQueue.java:661)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:672)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

据我所知，这个错误只有在我用鼠标做某事时才会发生。

例如

> 当我右键单击当前文件夹中的 MATLAB 函数时，然后单击打开。我将有 80% 的机会得到这个错误。但是如果只是在命令行窗口中输入edit xxx.m。那么我永远不会得到这个错误。
> 
> 当我将变量从工作区拖到变量编辑器时，我有 80% 的机会出现此错误。而且我不知道如何使用命令在变量编辑器中查看变量。

而且，如果发生此错误，它将一直发生，直到您关闭 MATLAB 并重新打开，如果您使用鼠标执行某些操作。例如，通过鼠标添加路径到 MATLAB 搜索路径，使用鼠标更改目录。如果你重新打开它，当你使用鼠标时，你将有 80% 的机会再次遇到这个问题。

有没有其他人见过这类问题？我对java一无所知，谁能给我一些建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:39:53.053

我无法谈论这个特定的错误，但这样的错误在 Matlab 中很常见。这是由于 Matlab GUI（用 Java 编写）中的一个错误。在这种情况下，它似乎试图打开特定于 Mac 的“打开文件”对话框，但失败了，然后它试图获取该对话框的位置，由于它从未正确打开而引发错误. 一旦 Java 抛出错误，GUI 就会变得混乱并在你所做的一切事情上抛出错误。

你似乎知道如何处理自己，但这里是我给遇到此类错误的实验室同事的一般建议：这些错误消息在你的屏幕上看起来很吓人，尤其是当你触发第一次点击后它们不断弹出时，但不要惊慌，它们通常是无害的。从通常有效的 GUI 或`save temp.mat`几乎总是有效的命令中冷静地保存您的工作区。保存工作区后关闭 Matlab，然后重新打开 Matlab 并从 GUI 或使用命令重新加载工作区`load temp.mat`。现在您的 Matlab 会话又回来了，您没有丢失任何数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:28:03.710

使用的人也早先报告了此问题`MATLAB version R2012a on MAC`

尝试使用其他版本。否则在 TMW 提交错误报告。

# php - 致命错误：未捕获的 OAuthException - 未经授权的源 IP 地址

> ID：12911381
> 
> 赞同：0
> 
> 时间：2012-10-16T09:18:58.433
> 
> 标签：php, facebook

我正在使用 Go Daddy 托管...

> IP 地址 118.139.174.1 专用 IP 地址 118.139.174.142

从上个月开始，我从 Facebook 收到此错误，我尝试在应用程序设置中填写 IP 地址，但仍然无法正常工作...

> 致命错误：未捕获的 OAuthException：(#5) 在第 1106 行的 /home/content/88/9201788/html/stone-game/classes/facebook/base_facebook.php 中抛出未经授权的源 IP 地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:03:49.027

您的传出 IP 地址与您的主机地址不同。大约一个月前，我遇到了完全相同的情况。我联系了 GoDaddy，并被告知除非我开始使用 [虚拟] 专用服务器，否则无法修复传出 IP 地址。只需从列表中删除列入白名单的 IP 即可。

在这里，看看这个：[OAuth Error: This IP can't make requests for that application](https://stackoverflow.com/questions/12072720/oauth-error-this-ip-cant-make-requests-for-that-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:58:37.967

我猜 Facebook 将您的主机列入黑名单。似乎 Go Daddy 经常发生这种情况。

这里有更多：

[使用 Facebook 登录：未捕获的 OAuthException：（#5）抛出未经授权的源 IP 地址](https://stackoverflow.com/questions/12507718/login-with-facebook-uncaught-oauthexception-5-unauthorized-source-ip-addre)

[http://support.godaddy.com/groups/web-hosting/forum/topic/fatal-error-uncaught-oauthexception/](http://support.godaddy.com/groups/web-hosting/forum/topic/fatal-error-uncaught-oauthexception/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-03T15:04:27.413

您可能还从 Localhost 运行 API。尝试实时运行您的应用程序。

# php - 发布到 Facebook 墙离线访问

> ID：12911382
> 
> 赞同：1
> 
> 时间：2012-10-16T09:18:59.203
> 
> 标签：php, facebook

我想建立一个系统来在用户在线或不在 Facebook 上时将通知推送到用户墙上。

我将在offline_access 和publish_actions 中使用某种“登录按钮”。

但是当人离线时，我如何知道用户并推送到人墙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:24:16.497

请参阅此文档，我认为它会有所帮助：[https ://developers.facebook.com/docs/app_notifications/](https://developers.facebook.com/docs/app_notifications/)

并查看这篇文章：[从 Facebook 获取长期访问令牌](https://stackoverflow.com/questions/10467272/get-long-live-access-token-from-facebook)

# visual-studio-2012 - Visual Studio 2012 - 没有 MVC 项目模板，没有 4.5

> ID：12911387
> 
> 赞同：9
> 
> 时间：2012-10-16T09:19:35.713
> 
> 标签：visual-studio-2012

我刚刚安装了 Visual Studio 2012 Ultimate。在新项目对话框中，我有

*   没有 .net 框架 4.5 选项
*   没有 MVC 项目模板

我已经修复了安装。（现在两次）。

我试过用

```
devenv /installvstemplates 
```

我也试过

```
devenv /resetsettings 
```

都无济于事！！

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T17:04:47.070

尝试[为 Visual Studio 2012 安装 ASP.NET 和 Web 工具 2012.2 更新](http://download.microsoft.com/download/6/5/6/6562AFBE-9503-4E64-970C-1427133FCD73/AspNetWebTools2012Setup.exe)

这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:22:33.317

我第一次拥有 2012 的时候也是这么想的，我不得不手动下载文件

[MVC](http://www.asp.net/downloads) [.Net 4.5](http://www.microsoft.com/en-us/download/details.aspx?id=30653)

希望这可以帮助你:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:33:11.750

我卸载然后重新安装，现在 mvc 项目模板和 .net 框架就在那里。

我认为问题在于我是从已安装的 .iso 文件安装的。

对于重新安装，我将我的 ISO 软件设置为在启动时重新安装。

维修没有解决这个问题仍然很糟糕！

# python - 使用python的Mysql LIMIT OFFSET错误

> ID：12911389
> 
> 赞同：1
> 
> 时间：2012-10-16T09:19:47.810
> 
> 标签：python, mysql, pagination, limit

我正在研究 python 并试图从 Mysql 数据库中获取一些数据，以下是查询

```
import MySQLdb as mdb
page  = 1
perpage = 3
offset = (int(page) - 1) * perpage
conn = mdb.connect(user='root', passwd='redhat', db='Python_Web', host='localhost')
cursor_posts = conn.cursor()
posts = "select * from projects LIMIT = %s OFFSET = %s " %(offset,perpage)
cursor_posts.execute(posts) 
```

错误：

```
ERROR: Internal Python error in the inspect module.
Below is the traceback from this internal error.

Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/IPython/ultraTB.py", line 667, in text
    locals,formatvalue=var_repr))
  File "/usr/lib64/python2.7/inspect.py", line 885, in formatargvalues
    specs.append(strseq(args[i], convert, join))
  File "/usr/lib64/python2.7/inspect.py", line 840, in strseq
    return convert(object)
  File "/usr/lib64/python2.7/inspect.py", line 882, in convert
    return formatarg(name) + formatvalue(locals[name])
KeyError: 'connection'

IPython's exception reporting continues...

---------------------------------------------------------------------------
ProgrammingError                          Traceback (most recent call last)

/home/local/user/python_webcode/<ipython console> in <module>()

/usr/lib64/python2.7/site-packages/MySQLdb/cursors.pyc in execute(self, query, args)
    172             del tb
    173             self.messages.append((exc, value))
--> 174             self.errorhandler(self, exc, value)
    175         self._executed = query
    176         if not self._defer_warnings: self._warning_check()

/usr/lib64/python2.7/site-packages/MySQLdb/connections.pyc in defaulterrorhandler(***failed resolving arguments***)
     34     del cursor
     35     del connection
---> 36     raise errorclass, errorvalue
     37 
     38 re_numeric_part = re.compile(r"^(\d+)")

ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 0 OFFSET = 3' at line 1") 
```

谁能告诉我上面的查询有什么问题，实际上我正在尝试使用 web.py 框架在 python 中实现分页

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T09:33:17.517

我相信这应该是公正`LIMIT %s OFFSET %s`的。没有等号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:35:54.400

LIMIT 和 OFFSET 都没有使用`=`等号，所以你的 SQL 确实不正确。

您确实应该使用 SQL 参数，其中数据库库引用您的值并防止 SQL 注入攻击：

```
posts = "select * from projects LIMIT %s OFFSET %s"
cursor_posts.execute(posts, (perpage, offset)) 
```

还要注意参数的顺序；`LIMIT`先来，所以先传入你的`perpage`参数。

您可以使用：

```
LIMIT %s, %s
posts = "select * from projects LIMIT %s, %s"
cursor_posts.execute(posts, (offset, perpage)) 
```

同样，用`OFFSET`逗号替换，并*交换参数*。

# ssl - 为 System.DirectoryServices.DirectoryEntry 设置回调以处理自签名 SSL 证书？

> ID：12911391
> 
> 赞同：5
> 
> 时间：2012-10-16T09:19:55.233
> 
> 标签：ssl, active-directory, ldap, directoryservices, edirectory

我有一个应用程序使用典型的 System.DirectoryServices.DirectoryEntry 代码从目录服务复制数据。我现在需要使用带有自签名证书的 SSL 从 Novell eDirectory 进行复制。我怀疑现有代码可以使用可以验证的有效证书，或者如果将自签名证书添加到本地计算机密钥库中。然而，为了确保它与自签名证书一起工作，我能找到的唯一解决方案是使用 System.DirectoryServices.Protocols 命名空间和 LdapConnection 类，从而我可以连接一个 VerifyServerCertificate 回调。我找不到任何方法将相同的概念应用于 DirectoryEntry 实例，或者与 LdapConnection 实例连接并以某种方式将其“转换”为 DirectoryEntry 实例。也许它不是 不可能，我只是想确认一下。欢迎任何其他想法。

我发现的唯一相关链接是：http: [//www.codeproject.com/Articles/19097/eDirectory-Authentication-using-LdapConnection-and](http://www.codeproject.com/Articles/19097/eDirectory-Authentication-using-LdapConnection-and)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T16:47:07.753

This is a phenomenal question.

I've been battling this same issue for a few days now, and I've finally got some definitive proof on why the DirectoryEntry object will not work in this scenario.

This particular Ldap server (running on LDAPS 636) also issues it's own self signed certificate. Using LdapConnection (and monitoring the traffic via Wireshark), I noticed a handshake taking place that does not occur when using DirectoryEntry :

![enter image description here](../Images/a49bf3a899177e8315510f7dcf806c9c.png)

The first sequence is the from the secured ldap server, the second sequence is from my machine. The code that prompts the second sequence is :

```
ldapConnection.SessionOptions.VerifyServerCertificate += delegate { return true; }; 
```

There are others way to "fake out" the callback, but this what I've been using.

Unfortunately, DirectoryEntry does not have an option or method to verify a self signed cert, thus the acceptance of the certificate never happens (second sequence), and the connection fails to initialize.

The only feasible way to accomplish this is by using LdapConnection, in conjunction with a SearchRequest and SearchResponse. This is what I've got so far :

```
LdapConnection ldapConnection = new LdapConnection("xxx.xxx.xxx:636");

var networkCredential = new NetworkCredential("Hey", "There", "Guy");
ldapConnection.SessionOptions.SecureSocketLayer = true;
ldapConnection.SessionOptions.VerifyServerCertificate += delegate { return true; };
ldapConnection.AuthType = AuthType.Negotiate;
ldapConnection.Bind(networkCredential);

SearchRequest request = new SearchRequest("DC=xxx,DC=xxx,DC=xxx", "(sAMAccountName=3074861)", SearchScope.Subtree);
SearchResponse response = (SearchResponse)ldapConnection.SendRequest(request);

if(response.Entries.Count == 1)
{SearchResultEntry entry = response.Entries[0];
 string DN = entry.DistinguishedName;} 
```

From there you can gather AD Properties from the SearchResponse, and process accordingly. This is a total bummer though, because the SearchRequest seems to be much slower then using the DirectoryEntry.

Hope this helps!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T16:58:03.090

我保证，这将是我关于这个特定问题的最后一篇文章。:)

经过一周的研究和开发，我有一个很好的解决方案，到目前为止它对我来说非常有效。

该方法与我的第一个答案有些不同，但总的来说，它是相同的概念；使用 LdapConnection 强制验证证书。

```
//I set my Domain, Filter, and Root-AutoDiscovery variables from the config file
string Domain = config.LdapAuth.LdapDomain;
string Filter = config.LdapAuth.LdapFilter;
bool AutoRootDiscovery = Convert.ToBoolean(config.LdapAuth.LdapAutoRootDiscovery);

//I start off by defining a string array for the attributes I want 
//to retrieve for the user, this is also defined in a config file.
string[] AttributeList = config.LdapAuth.LdapPropertyList.Split('|');

//Delcare your Network Credential with Username, Password, and the Domain
var credentials = new NetworkCredential(Username, Password, Domain);

//Here I create my directory identifier and connection, since I'm working 
//with a host address, I set the 3rd parameter (IsFQDNS) to false
var ldapidentifier = new LdapDirectoryIdentifier(ServerName, Port, false, false);
var ldapconn = new LdapConnection(ldapidentifier, credentials);

//This is still very important if the server has a self signed cert, a certificate 
//that has an invalid cert path, or hasn't been issued by a root certificate authority. 
ldapconn.SessionOptions.VerifyServerCertificate += delegate { return true; };

//I use a boolean to toggle weather or not I want to automatically find and query the absolute root. 
//If not, I'll just use the Domain value we already have from the config.
if (AutoRootDiscovery)
{
    var getRootRequest = new SearchRequest(string.Empty, "objectClass=*", SearchScope.Base, "rootDomainNamingContext");
    var rootResponse = (SearchResponse)ldapconn.SendRequest(getRootRequest);
    Domain = rootResponse.Entries[0].Attributes["rootDomainNamingContext"][0].ToString();
}

//This is the filter I've been using : (&(objectCategory=person)(objectClass=user)(&(sAMAccountName={{UserName}})))
string ldapFilter = Filter.Replace("{{UserName}}", UserName);

//Now we can start building our search request
var getUserRequest = new SearchRequest(Domain, ldapFilter, SearchScope.Subtree, AttributeList);

//I only want one entry, so I set the size limit to one
getUserRequest.SizeLimit = 1;

//This is absolutely crucial in getting the request speed we need (milliseconds), as
//setting the DomainScope will suppress any refferal creation from happening during the search
SearchOptionsControl SearchControl = new SearchOptionsControl(SearchOption.DomainScope);
getUserRequest.Controls.Add(SearchControl);

//This happens incredibly fast, even with massive Active Directory structures
var userResponse = (SearchResponse)ldapconn.SendRequest(getUserRequest);

//Now, I have an object that operates very similarly to DirectoryEntry, mission accomplished  
SearchResultEntry ResultEntry = userResponse.Entries[0]; 
```

我在这里要注意的另一件事是 SearchResultEntry 将返回用户“属性”而不是“属性”。

属性以字节数组的形式返回，因此您必须对它们进行编码才能获得字符串表示形式。值得庆幸的是，System.Text.Encoding 包含一个本机 ASCIIEncoding 类，可以很容易地处理这个问题。

```
string PropValue = ASCIIEncoding.ASCII.GetString(PropertyValueByteArray); 
```

就是这样！很高兴终于解决了这个问题。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T11:36:31.937

我使用下面的代码使用 DirectoryEntry 与 ldaps 连接。

**我在我的场景中理解的是，当在服务器路径中指定ldaps**或身份验证类型被称为“AuthenticationTypes.SecureSocketsLayer”时，directoryEntry 不起作用，但如果在服务器名称末尾只提到 ldaps 端口，它就可以工作。在查看了wireshark日志后，我可以看到上面提到的握手发生了。

握手： [![在此处输入图像描述](../Images/694c4997b33b3c8396a9a3671c917014.png)](https://i.stack.imgur.com/2rFX1.png)

代码：

```
public static SearchResultCollection GetADUsers()
    {
        try
        {
            List<Users> lstADUsers = new List<Users>();
            DirectoryEntry searchRoot = new DirectoryEntry("LDAP://adserver.local:636", "username", "password");
            DirectorySearcher search = new DirectorySearcher(searchRoot);
            search.PropertiesToLoad.Add("samaccountname");
            SearchResult result;
            SearchResultCollection resultCol = search.FindAll();
            Console.WriteLine("Record count " + resultCol.Count);
            return resultCol;
        }
        catch (Exception ex)
        {
            Console.WriteLine("exception" + ex.Message);
            return null;
        }
    } 
```

# java - 带有源代码的简单示例 lucene 4.0 错误（不是 jar lib）

> ID：12911393
> 
> 赞同：5
> 
> 时间：2012-10-16T09:20:04.707
> 
> 标签：java, lucene

编辑：我找到了解决办法：编辑core.jar，删除除codec包之外的所有包并添加到构建路径，codec包必须在jar中，不能是源码看不懂，这个很Lucene 的简单代码，它与 Lucene 核心库一起运行，但是当我使用 Lucene 核心源时会导致错误。

```
public static void main(String[] args) throws IOException, ParseException {
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);

    // Store the index in memory:
    Directory directory = new RAMDirectory();
    // To store an index on disk, use this instead:
    // Directory directory = FSDirectory.open("/tmp/testindex");
    IndexWriterConfig config = new IndexWriterConfig(
            Version.LUCENE_CURRENT, analyzer);
    IndexWriter iwriter = new IndexWriter(directory, config);
    Document doc = new Document();
    String text = "This is the text to be indexed.";
    doc.add(new Field("fieldname", text, TextField.TYPE_STORED));
    iwriter.addDocument(doc);
    iwriter.close();

    // Now search the index:
    DirectoryReader ireader = DirectoryReader.open(directory);
    IndexSearcher isearcher = new IndexSearcher(ireader);
    // Parse a simple query that searches for "text":
    QueryParser parser = new QueryParser(Version.LUCENE_CURRENT,
            "fieldname", analyzer);
    Query query = parser.parse("text");
    ScoreDoc[] hits = isearcher.search(query, null, 1000).scoreDocs;
    // Iterate through the results:
    for (int i = 0; i < hits.length; i++) {
        Document hitDoc = isearcher.doc(hits[i].doc);
                System.out.println(hitDoc.get("fieldname"));
    }
    ireader.close();
    directory.close();
} 
```

错误是：

```
 Exception in thread "main" java.lang.ExceptionInInitializerError
        at org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig.java:118)
        at org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:145)
        at Test.main(Test.java:34)
    Caused by: java.lang.IllegalArgumentException: A SPI class of type org.apache.lucene.codecs.Codec with name 'Lucene40' does not exist. You need to add the corresponding JAR file supporting this SPI to your classpath.The current classpath supports the following names: []
        at org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104)
        at org.apache.lucene.codecs.Codec.forName(Codec.java:95)
        at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:122)
        ... 3 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:13:22.863

您必须将 Lucene jar 添加到类路径中。

如果这不起作用，请将 jar 复制到您的索引目录中，例如

```
java -cp app/luke/lukeall-4.0-dev.jar org.apache.lucene.index.CheckIndex data/solr/cores/collection1_0/data/index/ 
```

> 解压后的 web 应用中的一些 jar 是为战争定制的，没有自己的 MANIFEST 目录。Luke jar 有代码，是一个独立的 jar。

也可以看看：

[如何在 LWE2.1 中执行 CheckIndex](https://support.lucidworks.com/entries/21864753-How-Do-I-Execute-CheckIndex-In-LWE2-1-)

# python - 在 Python 中使用装饰器进行类型检查

> ID：12911395
> 
> 赞同：2
> 
> 时间：2012-10-16T09:20:06.343
> 
> 标签：python, function, decorator

这更像是一个语法错误问题，我正在尝试在 Python Decorators 上完成本教程

[http://www.learnpython.org/page/Decorators](http://www.learnpython.org/page/Decorators)

我尝试的代码

```
def Type_Check(correct_type):
    def new_function(old_function):
        def another_newfunction(arg):
            if(isintance(arg, correct_type)):
                return old_function(arg)
            else:
                print "Bad Type"

    #put code here

@Type_Check(int)
def Times2(num):
    return num*2

print Times2(2)
Times2('Not A Number')

@Type_Check(str)
def First_Letter(word):
    return word[0]

print First_Letter('Hello World')
First_Letter(['Not', 'A', 'String']) 
```

我想知道怎么回事，请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:26:33.027

看起来您忘记在装饰器末尾返回新定义的函数：

```
def Type_Check(correct_type):
    def new_function(old_function):
        def another_newfunction(arg):
            if(isinstance(arg, correct_type)):
                return old_function(arg)
            else:
                print "Bad Type"
        return another_newfunction
    return new_function 
```

编辑：还有一些类型，由 andrean 修复

# java - 将 RequestAttributes 传递给新线程后，会话丢失

> ID：12911401
> 
> 赞同：1
> 
> 时间：2012-10-16T09:20:21.227
> 
> 标签：java, multithreading, spring, session, web-applications

我有一个 Web 应用程序（使用 spring 和 vaadin）我需要创建一个辅助线程来做一些工作（我不能这样做，因为现有的代码我无法更改）。在这个线程中，我需要访问会话。我找到了这个有用的答案：
[在 Threads of Everything 中访问作用域代理 bean](https://stackoverflow.com/questions/1528444/accessing-scoped-proxy-beans-within-threads-of)
是可以的， 但是在线程启动后，当我尝试获取会话时，我得到了 null。我仍然得到会话ID...

```
public RequestAwareRunnable() {
    this.requestAttributes = RequestContextHolder.getRequestAttributes();
    this.thread = Thread.currentThread();
    String sessionID = requestAttributes.getSessionId();
    HttpSession session = ((ServletRequestAttributes) requestAttributes).getRequest().getSession(false);//the session is OK
}

public void run() {
    try {
        String sessionID = requestAttributes.getSessionId();
        HttpSession session = ((ServletRequestAttributes) requestAttributes).getRequest().getSession(false); // i get null
        RequestContextHolder.setRequestAttributes(requestAttributes);
        onRun();
    } finally {
        if (Thread.currentThread() != thread) {
            RequestContextHolder.resetRequestAttributes();
        }
        thread = null;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:42:20.170

在构造函数中获取会话并将其保存在实例变量中，Session 和 Request 对象是线程绑定的，如果您在与处理原始请求的线程不同的线程中执行 runnable，您将无法访问它们。

# html - 如何使用分类 ID 将 WP_Query 用于自定义帖子类型的分类？

> ID：12911402
> 
> 赞同：0
> 
> 时间：2012-10-16T09:20:24.360
> 
> 标签：html, wordpress, slider, taxonomy, custom-post-type

这是我的困境，我的主题选项将自定义分类变量作为 ID 号传递，而不是 slug 名称。所以不是传递“新闻”，而是传递“4”。

我有这个有效的硬代码：

```
$wp_query = new WP_Query(array('slidecat' => 'extra', 'showposts'=>$slides)); 
```

但是这段代码只适用于蛞蝓。因此，如果我用 $slider_category 替换“额外”，这是我在主题选项中的选择字段传递的变量，代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:42:45.947

如果您有分类 ID，那么直接查询数据库以获取 slug 会更容易：

```
function get_term_by_taxonomy_id($term_taxonomy_id) {
    global $wpdb;
    $taxonomy = $wpdb->get_row( $wpdb->prepare( 
        "SELECT * FROM $wpdb->term_taxonomy wta
            INNER JOIN $wpdb->terms wt ON (wta.term_id = wt.term_id)
            WHERE wta.term_taxonomy_id = %d", $term_taxonomy_id 
    ) );

    return $taxonomy;
}

$cat = get_term_by_taxonomy_id($slider_category);
// at this point you should check if $cat is null (in case of an error)
$wp_query = new WP_Query(array('slidecat' => $cat->slug, 'showposts'=>$slides)); 
```

当然，slug 可以应用于不同的分类法，例如可以由 a`category`和 a`post_tag`与名为 slug 的 slug应用`"hello"`。所以这取决于如何`slidecat`实施以及支持哪些分类法。

# ios - 在启动时可靠地选择 MKMapView 中的注释（在 ios 6 和 ios 5.1 中）？

> ID：12911405
> 
> 赞同：0
> 
> 时间：2012-10-16T09:20:43.177
> 
> 标签：ios, ios5, mkmapview, ios6

从事件的详细视图中，我想转到 MapViewController，放大注释，然后打开它的标注。以下是一些相关代码：

```
@interface MapViewController : UIViewController<MKMapViewDelegate>
...
- (void) viewWillAppear:(BOOL)animated
{
  [self displayAnnotations];
}

- (void) viewDidAppear:(BOOL)animated
{
    ...
    // Zoom in to event
    [map setRegion:region animated:YES];        
}

- (void) mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
   ...
   regionAnimationEnded = YES;
   [self selectAnnotation:a];
   ...
}

- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
   ...
   // check to see if the right view is in the array
   ...
   annotationViewDidAppear = YES;
   [self selectAnnotation:a];
   ...   
}

- (void) selectAnnotation:(id<MKAnnotation>)annotation
{
   if(annotationViewDidAppear && regionAnimationEnded)
   {
     if(!openedAnnotationFirstTime)
     {
        [map selectAnnotation:annotation animated:YES];
        openedAnnotationFirstTime = YES;
     }
   }
} 
```

这适用于 ios 6 模拟器，但在 ios 5.1 模拟器（和设备上）上，注释视图不可见，如文档中所述：

> (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views 调用此方法时，指定的视图已经添加到地图中。

所以这取决于哪个先完成：如果区域更改动画最后完成并且注释视图已经出现，它可以工作，否则它不会。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:46:18.763

我最终在实际 [map selectAnnotation:annotation animated:YES]; 上使用了延迟执行选择器。这是一种解决方法，但似乎效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:47:27.353

您的`selectAnnotation:`方法被调用了两次。`mapView:regionDidChangeAnimated:`尝试在委托方法中只调用一次。

# c++ - 使用外部库构建 Xcode 项目时出现链接器错误

> ID：12911408
> 
> 赞同：6
> 
> 时间：2012-10-16T09:20:52.243
> 
> 标签：c++, xcode, linker

我正在尝试在 Xcode 中构建一个非常简单的命令行应用程序，它将打印出有关 MXF 视频文件的基本信息。为此，我需要使用可在此处下载的 libmxf、libbmx 和 libbmx 库：

[http://sourceforge.net/p/bmxlib/home/Home/](http://sourceforge.net/p/bmxlib/home/Home/)

在这一点上，我的 C++ 代码非常简单：

```
#include <iostream>
#include <cstdio>
#include <cstring>
#include <cerrno>
#include <vector>

#include <bmx/mxf_reader/MXFFileReader.h>
#include <bmx/mxf_reader/MXFGroupReader.h>
#include <bmx/mxf_reader/MXFSequenceReader.h>
#include <bmx/mxf_reader/MXFFrameMetadata.h>
#include <bmx/MXFUtils.h>
#include <bmx/Utils.h>

using namespace std;
using namespace bmx;

#define MXF_OPEN_READ(fn, pf)   mxf_disk_file_open_read(fn, pf)

int main(int argc, const char * argv[])
{
    std::vector<const char *> filenames;
    std::cout << "mxfheader: execution beginning...\n";
    for (int cmdln_index = 0; cmdln_index < argc; cmdln_index++) {
        if (!check_file_exists(argv[cmdln_index])) {
            if (argv[cmdln_index][0] == '-') {
                fprintf(stderr, "Unknown argument '%s'\n", argv[cmdln_index]);
            } else {
                fprintf(stderr, "Failed to open input filename '%s'\n", argv[cmdln_index]);
            }
            return 1;
        }
        filenames.push_back(argv[cmdln_index]);
    }

    std::cout << filenames[0] << "\n";
    return 0;
} 
```

当我编译 BMX 库时，我肯定会使用 64 位支持运行配置，如下所示：

```
./configure --build=x86_64-apple-darwin11.4.2 --host=x86_64-apple-darwin11.4.2 CFLAGS="-arch x86_64" CXXFLAGS="-arch x86_64" LDFLAGS="-arch x86_64" CC=clang CXX=clang++ 
```

在构建设置下的 XCode 项目中，我已将 /usr/local/lib 添加到我的搜索路径中。在 Build Phases 下，我已将“libbmx-0.1.3.dylib”、“libMXF-1.0.4.dylib”和“libMXF++-1.0.4.dylib”添加到“Link Binary With Libraries”部分。

我已经验证这些库确实是 64 位的（文件 libbmx-0.1.3.dylib 返回 libbmx-0.1.3.dylib: Mach-O 64-bit 动态链接共享库 x86_64 ）。

每次我尝试构建应用程序时，都会收到以下链接器错误：

```
Ld /Users/ned/Library/Developer/Xcode/DerivedData/mxfheader-bkwawmplsoqpdadfxartceqkbolo/Build/Products/Debug/mxfheader normal x86_64
    cd /Users/ned/Documents/src/mxfheader
    setenv MACOSX_DEPLOYMENT_TARGET 10.7
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/ned/Library/Developer/Xcode/DerivedData/mxfheader-bkwawmplsoqpdadfxartceqkbolo/Build/Products/Debug -L/usr/local/lib -F/Users/ned/Library/Developer/Xcode/DerivedData/mxfheader-bkwawmplsoqpdadfxartceqkbolo/Build/Products/Debug -filelist /Users/ned/Library/Developer/Xcode/DerivedData/mxfheader-bkwawmplsoqpdadfxartceqkbolo/Build/Intermediates/mxfheader.build/Debug/mxfheader.build/Objects-normal/x86_64/mxfheader.LinkFileList -mmacosx-version-min=10.7 -stdlib=libc++ -lbmx-0.1.3 -lMXF-1.0.4 -lMXF++-1.0.4 -o /Users/ned/Library/Developer/Xcode/DerivedData/mxfheader-bkwawmplsoqpdadfxartceqkbolo/Build/Products/Debug/mxfheader

Undefined symbols for architecture x86_64:
  "bmx::check_file_exists(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T18:03:29.433

您的问题是选项：`-stdlib=libc++`在命令行中。它导致指向错误的 libc++ 的链接，您需要 make 它，因为这是编译`-stdlib=libstdc++`该库的标准库。`libbmx`

在`Apple LLVM compiler`C++ 标准库的选项下，选择：`libstdc++`或选择`compiler default`（也应该选择 libstdc++）

# mysql - mysql程序

> ID：12911409
> 
> 赞同：0
> 
> 时间：2012-10-16T09:20:55.007
> 
> 标签：mysql

```
DELIMITER $$

DROP PROCEDURE IF EXISTS
`ufdc_sales`.`depot_stack_register3_7_2` $$
CREATE DEFINER=`root`@`%` PROCEDURE `enter code here`
`depot_stack_register3_7_2`( IN stackId BIGINT,IN speciesId 
BIGINT,IN fromdate DATE,IN todate DATE)
BEGIN
set @mysql='select  sdt.depot_lot_no

from stack st , stock_detail_trans  sdt 

where sdt.stack_id=st.id 
      SET @mysql = @mysql+' AND st.SPECIES_ID='+1;
END $$
DELIMITER ; 
```

附加错误。我想知道如何添加此查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:26:08.417

尝试，

```
SET @mysql='select  sdt.depot_lot_no
            from stack st , stock_detail_trans  sdt 
            where sdt.stack_id=st.id';
SET @mysql = CONCAT(@mysql, ' AND st.SPECIES_ID = 1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:38:09.363

报价成对出现。代替：

```
set @mysql='select  sdt.depot_lot_no
from stack st , stock_detail_trans  sdt 
where sdt.stack_id=st.id 
      SET @mysql = @mysql+' AND st.SPECIES_ID='+1; 
```

... 尝试：

```
set @mysql='select  sdt.depot_lot_no
    from stack st , stock_detail_trans  sdt 
    where sdt.stack_id=st.id ';
SET @mysql = @mysql+' AND st.SPECIES_ID='+1; 
```

并且请不要忽略错误消息。他们是来帮助你的！

# c# - 每个选择具有多个值的 LINQ 构建数组

> ID：12911410
> 
> 赞同：3
> 
> 时间：2012-10-16T09:20:56.610
> 
> 标签：c#, linq, yaml

我一直在尝试使用 yamlserializer 库构建 YAML 节点。但是我在构建 LINQ 语句时遇到了困难。

我有一个“Category”对象列表，我们称之为“Cats”，Category 类有一个 Id 和一个 Name，需要用以下方式表示为 Yaml 映射。Cats[0].Id : Cats[0]Name Cats[1].Id : Cats[1].Name ...

对于那些没有与图书馆合作过的人。YamlMapping 类有一个构造函数，它接受一个 YamlNode 对象数组。YamlNode 是一个抽象类，包括 YamlMapping 在内的所有类型的节点都从该类继承。

```
new YamlMapping
(
    "Categories", new YamlMapping (
    (from cat in blacklist.Categories.List select
    (YamlNode)cat.Id AND (YamlNode)cat.Name).ToArray());
) 
```

以上显然不起作用，我想知道是否有任何方法可以达到预期的结果。可以事先构造数组，但想知道是否有更多 LINQish (?) 方式来实现相同的效果。

换句话说，数组构建必须是这样的。

```
YamlNode[] arr;
arr[0] = Cats[0].Id
arr[1] = Cats[0].Name;
arr[2] = Cats[1].Id;
arr[3] = Cats[1].Name;
...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:26:07.067

就像是 ：

```
(from cat in blacklist.Categories.List select
new YamlNode[] { (YamlNode)cat.Id, (YamlNode)cat.Name }).SelectMany(x => x).ToArray()); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:36:29.850

如果您想为每个项目选择一个序列（在本例中为一对​​）项目到单个平面序列中，请使用`SelectMany`：

```
YamlNode[] arr = blacklist.Categories.List
    .SelectMany(cat => new[] { (YamlNode)cat.Id, (YamlNode)cat.Name })
    .ToArray(); 
```

# c# - 如何确定 SearchResultEntry 是用户还是组？

> ID：12911417
> 
> 赞同：1
> 
> 时间：2012-10-16T09:21:17.963
> 
> 标签：c#, asp.net, active-directory, ldap, ldap-query

我正在使用 LDAP 搜索在活动目录中查找用户和组。

这是我的搜索过滤器：

```
string Filter = "(|(&(objectCategory=user)(objectClass=person)(SAMAccountName=*))(&(objectCategory=group)(sAMAccountName=*)))"; 
```

我得到一个 SearchResponse，我想为每个 SearchResultEntry 确定它是用户还是组。

我可以检查一个属性以确定它是用户还是组？

谢谢， 因巴尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:48:41.063

我使用“objectClass”属性表示“用户”或“组”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:04:52.760

AD 中有几种类型的“用户”和组。

但是这样的事情应该很接近： if ((objectCategory=user)&&(objectClass=person)) { this is a user } else if ((objectClass=group)) { this is a group } else { this is not a user或一组}

您可能会发现[http://ldapwiki.willeke.com/wiki/LDAP%20Query%20Examples%20for%20AD](http://ldapwiki.willeke.com/wiki/LDAP%20Query%20Examples%20for%20AD)很有用。

-吉姆

# ember.js - 从嵌入对象访问父记录

> ID：12911419
> 
> 赞同：2
> 
> 时间：2012-10-16T09:21:19.640
> 
> 标签：ember.js, ember-data

有没有办法访问嵌入式模型对象的父对象？例如 ：

```
App.Person = DS.Model.extend({
    name : DS.attr('string'),
    emails : DS.hasMany('App.Email', { embedded: true })
});

App.Email = DS.Model.extend({
    label : DS.attr('string'),
    email : DS.attr('string'),

    setParentUpdated: function() {
         if(this.get('isDirty') == true) 
            // this.get('parent').get('stateManager').goToState('updated');
            // I would like to do something like this.get('parent')
            // to access 'App.Person' instance object
    }.observes('isDirty')
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:23:31.260

为什么不简单地建立`belongsTo`关系？

```
App.Email = DS.Model.extend({
  person: DS.belongsTo('App.Person')

  //...
}); 
```

然后您将能够使用`person`电子邮件的属性。

# ios - 具有流式和非流式内容的单个 AVPlayer

> ID：12911423
> 
> 赞同：4
> 
> 时间：2012-10-16T09:21:25.133
> 
> 标签：ios, avfoundation, avplayer

我正在构建一个可以同时处理流媒体和非流媒体内容的视频播放器，我希望它可以通过 AirPlay 播放。

我目前正在使用多个`AVPlayer`实例（每个剪辑一个），它工作正常，但问题是它在使用 AirPlay 时并没有提供非常流畅的体验。切换时界面在每个剪辑之间来回跳转`AVPlayer`，所以想迁移到使用单片机`AVPlayer`。这似乎是一项微不足道的任务，但我还没有找到一种方法来做到这一点。

这是我迄今为止尝试过的：

1.  使用单个`AVPlayer`和多个`AVPlayerItems`并在使用`replaceCurrentItemWithPlayerItem`. *在流式传输- >流式传输*剪辑*或非流式传输->非流式*传输之间切换时效果很好，但`AVPlayer`似乎不接受*流式传输->非流式传输*之间的替换，反之亦然。基本上，当我尝试切换时没有任何反应。

2.  由于与上述相同的原因，使用`AVQueuePlayer`with multiple失败。`AVPlayerItems`

3.  `AVPlayer`基于`AVMutableComposition`资产的单个 AVPlayerItem使用单个。这是行不通的，因为流式传输内容是不允许的`AVMutableComposition`（并且`AVURLAssets`从流式传输 url 创建的没有任何内容`AVAssetTracks`，并且它们是必需的）。

那么我有什么遗漏吗？关于如何实现这一点的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:58:09.487

我向 Apple 的技术支持提出了这个问题，得到的答案是目前无法避免短跳转回菜单界面，并且 AVPlayer 的任何版本都不支持混合流媒体和非流媒体内容。

完整回复：

> 这是为了回答您关于如何在通过 AirPlay 播放时为不同的媒体项目切换 AVPlayer 或 AVPlayerItems 时如何避免短跳转回主界面的问题。
> 
> 这里的问题与 AVPlayer 和 AVQueuePlayer 相同：当前没有 AVPlayer 实例（无论哪个特定类）可以同时播放流媒体和非流媒体内容；也就是说，您不能将 HTTP 实时流媒体（例如 .m3u8）与非流媒体（基于文件的资源，例如 .mp4 文件）混合。
> 
> 而关于 AVMutableComposition，它不允许流式传输内容。
> 
> 目前，不支持跨多个项目的“无缝”视频播放。[我鼓励您使用 Apple Bug Reporter ( http://developer.apple.com/bugreporter/](http://developer.apple.com/bugreporter/) )提交此功能的增强请求。
> 
> AVComposition 可能是目前“无缝”播放的最佳选择。但是，它具有刚刚描述的不允许流式传输内容的限制。

# jekyll - Jekyll Loop 在第二次迭代中中断

> ID：12911425
> 
> 赞同：3
> 
> 时间：2012-10-16T09:21:28.887
> 
> 标签：jekyll, liquid

我正在循环浏览两个产品——在帖子视图页面上，我拉入了第二个帖子（在示例中，一个相关的食谱），它在第一个产品页面上解析得很好——在第二个产品页面上就`{{ post.content }}`不会解析。我可以破解它`{{ post.content | markdownify }}`- 但我想知道它为什么会坏。以下是相关代码：

```
{% for post in site.categories.recipe %}
    {% if post.products contains page.title and post.featured %}
        <div class="row">
            <div class="four columns">
            <h4>{{ post.title }}</h4>
            <ul>
                <li>Serves {{ post.serves }}</li>
               <li>Prep: {{ post.time }}</li>
                <li><a href=" ">Share</a></li>
            </ul>

            {{ post.content }}

            ...

            <!-- All tags are closed, the rest just isn't relevant -->

    {% endif %}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T00:22:44.257

**请用计数器找到我的解决方案**

```
<pre>

{% assign counter=0 %}

{% for post in site.posts%}

 {% if post.category == 'blog' and counter < 2 %}
 {% assign counter=counter | plus:1 %}   

     {{post.content}}

 {% endif %}

{% endfor %}

</pre> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:52:17.050

markdownify 过滤器可能使其工作，因为可能有特殊字符未编码在您从中提取的内容中。我总是忘记把自己`&`变成`&amp;`.

如果您使用默认的 Markdown 解释器 Maruku，这里列出了可能给您带来问题的实体及其编码等效项。[http://maruku.rubyforge.org/entity_test.html](http://maruku.rubyforge.org/entity_test.html)和更多关于 Maruku 的信息。[http://maruku.rubyforge.org/maruku.html](http://maruku.rubyforge.org/maruku.html)

# css - z-index 在 iframe 中带有 pdf 的 Internet Explorer 中不起作用

> ID：12911428
> 
> 赞同：59
> 
> 时间：2012-10-16T09:21:35.453
> 
> 标签：css, internet-explorer, pdf, iframe, z-index

我无法使用 IE8`z-index`处理`iframe`包含 pdf 文件的文件。它适用于谷歌浏览器。

示例（[JSFiddle](http://jsfiddle.net/5J6zL/9/)）：

**HTML**

```
<div id="div-text">
      <div id="shouldBeOnTop">my text that should be on top</div>
</div>
<div id="div-frame">
    <iframe src="http://legallo1.free.fr/french/CV_JLG.pdf" width="200" height="200"/>
</div> 
```

**CSS**

```
#div-text{
    position:relative;
    left:210px;
    top:20px
}

#shouldBeOnTop{
    position:relative;
    right:60px;
    background-color:red;
    width:100px;
    z-index:2;
}

#div-frame{
    position:relative;
     z-index:1;
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-19T15:07:56.087

***更新：** [Matthew Wise 有一个非常聪明的替代解决方案](https://stackoverflow.com/a/38975118/230390)，您应该考虑它——尤其是如果您对我的方法有疑问或不喜欢丑陋的黑客攻击！*

* * *

有一种方法可以用其他元素覆盖 IE 中的窗口元素，但您不会喜欢它。

## 背景：有窗口和无窗口元素

旧版 IE 将元素分为两种类型：有窗口的和无窗口的。

常规元素喜欢`div`和`input`是**无窗**的。它们由浏览器本身在单个 MSHTML 平面中呈现，并尊重彼此的 z 顺序。

在 MSHTML 之外呈现的元素是**窗口化**的；例如，`select`（由操作系统呈现）和 ActiveX 控件。它们尊重彼此的 z 顺序，但占用一个单独的 MSHTML 平面，该平面绘制在所有无窗口元素的顶部。

唯一的例外是`iframe`。在 IE 5 中，`iframe`是一个窗口元素。这[在 IE 5.5 中有所改变](http://support.microsoft.com/kb/177378)；它现在是一个无窗口元素，但出于向后兼容性的原因，它仍会在具有较低 z-index 的窗口元素上绘制

换句话说：**`iframe`尊重有窗和无窗元素的 z-index**。如果您将 a`iframe`放置在窗口元素上，则任何放置在 上的无窗口元素`iframe`都将可见！

## 这意味着什么

PDF 将始终绘制在常规页面内容之上—<a href="http://blogs.msdn.com/b/ie/archive/2006/01/17/for-the-select-few.aspx " rel="noreferrer">类似`select`元素直到 IE 7。修复方法是`iframe`在您的内容和 PDF 之间放置另一个元素。

## 演示

jsFiddle：http: [//jsfiddle.net/Jordan/gDuCE/](http://jsfiddle.net/Jordan/gDuCE/)

## 代码

**HTML：**

```
<div id="outer">
    <div id="inner">my text that should be on top</div>
    <iframe class="cover" src="about:blank"></iframe>
</div>

<iframe id="pdf" src="http://legallo1.free.fr/french/CV_JLG.pdf" width="200" height="200"></iframe> 
```

​CSS **：**

```
#outer {
    position: relative;
    left: 150px;
    top: 20px;
    width: 100px;
    z-index: 2;
}

    #inner {
        background: red;
    }

    .cover {
        border: none;
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        z-index: -1;
    }

#pdf {
    position: relative;
    z-index: 1;
} 
```

## 支持

这已经过测试，应该可以在 IE 7-9 中使用。如果您对它在其他浏览器的 DOM 中显示感到挑剔，您可以使用 JavaScript 添加它或将其包装在仅限 IE 的条件注释中：

```
<!--[if IE]><iframe class="cover" src="about:blank"></iframe><![endif]--> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-16T12:36:04.503

附加 IFRAME 的解决方法在简单的情况下确实有效，但我花了一个上午的时间试图让叠加层尊重透明度。基本上，我们的应用程序具有模态弹出窗口，其中弹出窗口后面的全窗口覆盖呈现为“灰色”（背景颜色为黑色，不透明度 0.25），以向用户指示弹出窗口是模态的。使用该解决方法，嵌入的 PDF 视图永远不会与窗口的其余部分一起变灰，因此看起来仍然是“活动的”，实际上您仍然可以与 PDF 查看器进行交互。

我们的解决方案是使用 Mozilla 的 pdf.js 库：[https](https://github.com/mozilla/pdf.js/) ://github.com/mozilla/pdf.js/ - 嵌入一个指向测试 URL [http://mozilla.github.com/pdf.js/web/的 IFRAME viewer.html?file=compressed.tracemonkey-pldi-09.pdf](http://mozilla.github.com/pdf.js/web/viewer.html?file=compressed.tracemonkey-pldi-09.pdf)直接开箱即用，尊重z-index，透明度，很多，不需要黑客！似乎他们使用自己的渲染引擎生成代表 PDF 内容的标准 HTML。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-30T13:56:14.660

我一直在尝试解决同样的问题，我的情况也很相似。我试图在我的页面上呈现一个 youtube 视频，并在视频的顶部放置`div`一些信息。

但是包含在一个中的 youtube 视频`iframe`并没有让我这样做。不管
`z-index`我给元素的是什么。

然后这篇文章有所帮助 - [https://stackoverflow.com/a/9074366/1484384](https://stackoverflow.com/a/9074366/1484384)

基本上它关于`wmode`. 检查上面的帖子以了解如何使用它。

这是该帖子中的一些代码：

```
<iframe title="YouTube video player" width="480" height="390 src="http://www.youtube.com/embed/lzQgAR_J1PI?wmode=transparent"> 
```

或者

//修复z-index youtube视频嵌入

```
$(document).ready(function (){
  $('iframe').each(function(){
    var url = $(this).attr("src");
    $(this).attr("src",url+"?wmode=transparent");
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T16:31:21.597

对于那些使用 jQueryUI 的人，我想出了以下解决方案。

添加以下函数并从对话框的打开事件中调用它。如果您的浏览器是 IE，它会将 iFrame 插入到 Modal 叠加层中，或者将其添加到对话框背景中。

```
// Simple IE Detection.
var isIE = Object.hasOwnProperty.call(window, "ActiveXObject");

// Fix IE bug where an iFrame from below will cover a dialogs contents.
function dialogIFrameFix(event /* object */) {
    setTimeout(function () {
        if (event && event.target && isIE) {
            var $dialog = $(event.target.parentElement);
            // Get the modal overlay if found.
            var $fixTarget = $dialog.next('.ui-widget-overlay');
            // Use the dialog body if there is no overlay.
            if (!$fixTarget || !$fixTarget.length)
                $fixTarget = $dialog;
            // Add as first child so it is covered by all of the other elements
            $fixTarget.prepend('<iframe class="iFrameFix" src="about:blank" style="position:absolute;top:0;left:0;width:100%;height:100%"></iframe>');
        }
    }, 10);
} 
```

然后你会这样称呼它..

```
.dialog({
    open: function (event, ui) {
        dialogIFrameFix(event);
    }
}); 
```

# php - Drupal：在块 tpl 中渲染表单

> ID：12911431
> 
> 赞同：1
> 
> 时间：2012-10-16T09:21:41.667
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

如何渲染作为可渲染数组的一部分的表单？

在 .module

```
/**
 * Implements hook_block_view();
 */
function bibdk_vejviser_block_view($delta = '') {

  switch ($delta) {
    case 'bibdk_vejviser':
      $block['title'] = t('Find Library');
      $block['content'] = array(
        'link' => array(
          '#type' => 'link',
          '#title' => t("Find library"),
          '#href' => 'http://example.org',
        ),
        'form' => drupal_get_form('bibdk_vejviser_form'),
      );
      break;
  }
  return $block;
} 
```

在自定义块 .tpl

```
// This will work (renders both elements)
print $content;

// This will also work (renders link)
print render($elements['link']);

// This will NOT work (renders nothing)
print render($elements['form']); 
```

我究竟做错了什么？

更新：如果我将 drupal_get_form() 包装在一个数组中，它会起作用。这是为什么？？

```
...
'form' => array(drupal_get_form('bibdk_vejviser_form')),
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:43:01.050

`drupal_get_form`包装时它应该可以工作`drupal_render`

像这样的东西：

```
...
'form' => array(
'#markup' => drupal_render(drupal_get_form('bibdk_vejviser_form'))),
... 
```

希望这行得通……穆罕默德。

# python - 在非 BSD 系统上用 Python 打开 Berkeley DB 1.85 版

> ID：12911436
> 
> 赞同：1
> 
> 时间：2012-10-16T09:21:55.803
> 
> 标签：python, bsddb

如何在非 BSD 系统（Ubuntu、RHEL）上用 Python 打开 Berkeley DB 1.85 文件？

```
$ file 1.db 
1.db: Berkeley DB 1.85 (Hash, version 2, native byte-order) 
```

我试图运行的代码：

```
 import bsddb

    cur_dir = os.path.dirname(__file__)
    db_file_path = os.path.join(cur_dir, '1.db')
    db = bsddb.hashopen(db_file_path, 'r')
    for k, v in db.iteritems():
        print k, v 
```

这是一个例外：

```
 File "....py", line 22, in handle
    db = bsddb.hashopen(db_file_path, 'r')
  File "/usr/lib/python2.7/bsddb/__init__.py", line 364, in hashopen
    d.open(file, db.DB_HASH, flags, mode)
bsddb.db.DBInvalidArgError: (22, 'Invalid argument -- __db_meta_setup: /.../1.db: unexpected file type or format')
enter code here 
```

`pip`不想安装`bsddb185`模块：

```
$ pip install bsddb185
Downloading/unpacking bsddb185
  Running setup.py egg_info for package bsddb185
    Didn't find db.h with HASHVERSION == 2
No files/directores in /.../build/bsddb185/pip-egg-info (from dependency_links.txt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:46:41.017

好的，我的一位同事帮助我从源代码构建模块。

在此处下载源代码：http: [//pypi.python.org/pypi/bsddb185](http://pypi.python.org/pypi/bsddb185)

然后：

```
cd bsddb185/db.1.85/PORT/linux/
make
cd ../../..
python setup.py install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:13:07.207

文档建议弃用此模块以支持 bsddb.db。如果您坚持使用 bsddb，他们也有评论，“bsddb 模块需要从 4.0 到 4.7 的 Berkeley DB 库版本。”

文档：[http ://docs.python.org/library/bsddb.html](http://docs.python.org/library/bsddb.html)

希望其中一些指向正确的方向，对不起，我不能提供更多帮助。

# .htaccess - 目录身份验证不起作用

> ID：12911437
> 
> 赞同：0
> 
> 时间：2012-10-16T09:21:56.030
> 
> 标签：.htaccess, .htpasswd

这是我在目录中的 htaccess 文件`/home/domain.nl/public_html/helpdesk`

```
Require user agent8 agent9 agent10 
AuthType     Basic
AuthName     this_protected_area
AuthUserFile /home/domain.nl/public_html/.htpasswd 
```

但是当我转到 domain.nl/helpdesk 时，我收到了 324 错误 (ERR_EMPTY_RESPONSE)。那么怎么了？我确定 htpasswd 文件位于正确的位置。

在错误日志中，我看到此错误：

```
(13)Permission denied: Couldn't read /home/domain.nl/public_html/errors/.htaccess, closing connection. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:31:34.353

尝试使用以下方法更改您的 .htaccess：

```
Require valid-user
AuthType     Basic
AuthName     this_protected_area
AuthUserFile /home/domain.nl/public_html/.htpasswd 
```

确保 .htaccess 已启用，如果这不起作用，请在您的问题中复制/粘贴您的 error.log 文件的相关部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:52:45.500

我将 public_html/errors/ 目录重命名为 errors2 并且它现在可以工作了。感谢您的帮助！

# macos - NSFileWrapper 有时返回 nil

> ID：12911438
> 
> 赞同：9
> 
> 时间：2012-10-16T09:21:56.910
> 
> 标签：macos, cocoa, nsdocument, nsfilewrapper

我正在使用`NSFileWrapper`我的包裹文件。有时，当我请求包内文件的数据时，我得到`nil`.

这就是我查询包内文件数据的方式：

```
- (NSData*) dataOfFile(NSString*)filename {
    NSFileWrapper *fileWrapper = [self.documentFileWrapper.fileWrappers objectForKey:filename];
    return fileWrapper.regularFileContents; // This returns nil sometimes. Why?
} 
```

此方法最终开始为某些文件（不是全部）返回 nil。可悲的是，我没有设法始终如一地重现该问题。

如果有帮助，这就是我打开包裹的方式：

```
- (BOOL) readFromFileWrapper:(NSFileWrapper *)fileWrapper ofType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    self.documentFileWrapper = fileWrapper;
    return YES;
} 
```

这就是我更新包内文件数据的方式：

```
- (void) updateFile:(NSString*)filename withData:(NSData*)data {
    SBFileWrapper *fileWrapper = [self.documentFileWrapper.fileWrappers objectForKey:filename];
    if (fileWrapper) {
        [self.documentFileWrapper removeFileWrapper:fileWrapper];
    }
    NSFileWrapper *fileWrapper = [[SBFileWrapper alloc] initRegularFileWithContents:data ];
    fileWrapper.preferredFilename = filename;
    [self.documentFileWrapper addFileWrapper:fileWrapper];
} 
```

这就是我保存包的方式：

```
- (NSFileWrapper*) fileWrapperOfType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    return self.documentFileWrapper;
} 
```

为什么会发生这种情况？有没有办法防止它？

的文档[`regularFileContents`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSFileWrapper_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileWrapper/regularFileContents)似乎谈到了这个问题：

> 如果用户在调用 readFromURL:options:error: 或 initWithURL:options:error: 之后但在 NSFileWrapper 读取文件内容之前修改了文件，则此方法可能返回 nil。使用 NSFileWrapperReadingImmediate 读取选项来降低出现该问题的可能性。

但我不明白在上面的代码中必须改变什么来防止这种情况。

# 失败的实验

如果返回 nil，我尝试保存文档，`regularFileContents`但之后仍然返回 nil。像这样：

```
- (NSData*) dataOfFile(NSString*)filename {
    NSFileWrapper *fileWrapper = [self.documentFileWrapper.fileWrappers objectForKey:filename];
    NSData *data = fileWrapper.regularFileContents;
    if (!data) {
            [self saveDocument:nil];
            fileWrapper = [self.documentFileWrapper.fileWrappers objectForKey:filename];
            data = fileWrapper.regularFileContents;
    }
    return data;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:24:38.157

没有足够的代码来查看真正发生了什么。然而，根本原因`NSFileWrapper`正是它的名字所暗示的：一个*代表*文件或目录的对象。因此，实际的文件或目录很容易与内存中的对象“不同步”。每当`NSFileWrapper`确定发生这种情况时，它都会为某些操作返回 nil。解决方案是使`NSFileWrapper`对象寿命短。仅在需要时创建和打开，然后尽快保存并关闭。

特别是，看起来您的代码长时间保留了指向包目录包装器的指针，并假设它始终有效。如果目录因任何原因发生更改，则情况并非如此。重新编码，以便每次需要时都获得一个新的包目录包装器，并且问题应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:31:11.600

如果磁盘上的文件发生更改，那么您将得到 nil （正如@Gene 所说）。但是，您可以使用以下`matchesContentsOfURL:`方法进行检查：

> 根据上次读取或写入文件时存储的文件属性确定磁盘表示是否可能已更改。如果文件包装器的修改时间或访问权限与磁盘上的文件不同，则此方法返回 YES。然后你可以使用`readFromURL:options:error:`

这来自[使用文件包装器](https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileWrappers/FileWrappers.html#//apple_ref/doc/uid/TP40010672-CH13-SW2)Apple 文档。

请注意该部分的介绍：

> 因为文件包装器的目的是表示内存中的文件，所以它与任何磁盘表示非常松散耦合。文件包装器不记录其内容的磁盘表示的路径。这允许您使用不同的 URL 保存相同的文件包装器，但如果您想稍后从磁盘更新文件包装器，它还需要您记录这些 URL。

因此，如果您想/需要重新阅读它，您必须将 url 保存到原始文件中。

`matchesContentsofURL:`当您看到 nil 结果时，听到返回的内容很有趣。

# c# - 如何创建加密的zip文件可以通过winzip/7zip解压

> ID：12911443
> 
> 赞同：-2
> 
> 时间：2012-10-16T09:22:22.683
> 
> 标签：c#, encryption, zip, aes

我使用 AESManaged Class 来加密一个 zip 文件，但它不能被 winzip/7zip 解压缩。我只能在我的代码中解密后解压缩它。

下面是我用来加密和解密的代码。任何人都可以帮忙吗？

```
private static void EncryptFile(string input, string output, string pwd)
    {
        using (AesManaged aes = new AesManaged())
        {
            FileStream fsCrypt=null;
            try
            {
                byte[] key = Encoding.UTF8.GetBytes(pwd);

                fsCrypt = new FileStream(output, FileMode.Create);

                    using (CryptoStream cs = new CryptoStream(fsCrypt, aes.CreateEncryptor(key, key), CryptoStreamMode.Write))
                    {
                        using (FileStream fsIn = new FileStream(input, FileMode.Open))
                        {
                            int data;

                            while ((data = fsIn.ReadByte()) != -1)
                            {
                                cs.WriteByte((byte)data);
                            }
                            aes.Clear();
                        }
                    }

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                aes.Clear();
            }
            finally
            {
                if(fsCrypt!=null)
                {
                    fsCrypt.Dispose();
                }
            }
        }
    }

    private static void DecryptFile(string input, string output, string pwd)
    {
        using (AesManaged aes = new AesManaged())
        {
            FileStream fsCrypt = null;
            try
            {
                byte[] key = Encoding.UTF8.GetBytes(pwd);

                fsCrypt = new FileStream(input, FileMode.Open);
                {

                    using (FileStream fsOut = new FileStream(output, FileMode.Create))
                    {
                        using (CryptoStream cs = new CryptoStream(fsCrypt, aes.CreateDecryptor(key, key), CryptoStreamMode.Read))
                        {
                            int data;

                            while ((data = cs.ReadByte()) != -1)
                            {
                                fsOut.WriteByte((byte)data);
                            }
                            aes.Clear();
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                aes.Clear();
            }
            finally
            {
                if (fsCrypt != null)
                {
                    fsCrypt.Dispose();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:29:41.613

您正在使用加密算法覆盖 zip 文件的内部结构。
您怎么能期望外部 zip 管理器将您的加密文件识别为有效的 zip 文件？
如果您真的想使用受密码保护的 zip 文件，请使用可以为您执行此操作的库，而不会破坏 zip 文件结构。

我推荐这个库[DotNetZip](http://dotnetzip.codeplex.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T09:40:13.713

如果格式不是 zip，则无法解压缩文件。加密文件后，格式不再是 zip。
但是可以在 C# 中同时执行加密和压缩。为了获得更好的压缩率，您需要先压缩文件然后加密。
您可以使用[GZipstream](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)进行压缩，并使用您描述的代码进行加密。

# node.js - JSDoc3 和 NodeJS 链接到模块中的类型

> ID：12911450
> 
> 赞同：5
> 
> 时间：2012-10-16T09:22:48.330
> 
> 标签：node.js, jsdoc

我试图找到如何让 JSDoc3 自动生成来自其他模块的类的链接。我觉得很难用语言来解释，所以让我举几个例子。以下脚本生成预期的输出：

```
/**
 * @constructor
 */
var SomeClass = function(){}

/**
 * @param {SomeClass} someParam description
 */
var someFunc = function(someParam){} 
```

也就是说，JSDoc3 正确地生成了从 someFunc 的参数列表到 SomeClass 的类描述的链接。但是，当我将 SomeClass 放在外部模块中时，我似乎无法让 JSDoc3 生成链接：

```
/**
 * @file SomeClass.js
 * @module SomeClass
 */

/**
 * @constructor
 */
exports.SomeClass(){}

/**
 * @file main.js
 */
var SomeClass = require('./SomeClass');

/**
 * @param {SomeClass} someParam description
 */
function someFunc(someParam){} 
```

现在 JSDoc3 正确生成了这两个文件的文档，但它没有将 someFunc 的参数类型链接到 SomeClass 的页面。我尝试替换`@param {SomeClass}`为：

*   `@param {SomeClass.SomeClass}`
*   `@param {SomeClass/SomeClass}`
*   `@param {@link SomeClass}`
*   `@param {@link SomeClass.SomeClass}`
*   `@param {@link SomeClass/SomeClass}`

但是这些都不起作用：在所有情况下，文档都只是在大括号内显示文本（即使我使用了@link）。

如何让 JSDoc3 正确生成指向外部模块的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:55:21.213

`module:`引用模块时使用前缀。如果模块的返回值是类本身，则使用`module:SomeClass`. 如果它是模块的属性，请使用`module:SomeClass.SomeClass`. 如果 jsdoc 可以找到对现有类文档的引用，则不需要 @link 标记。

# php - 在zend框架2中实现登录功能

> ID：12911451
> 
> 赞同：3
> 
> 时间：2012-10-16T09:22:48.327
> 
> 标签：php, zend-framework2

我将使用 zend 框架 2 实现登录功能。

我的代码如下。

```
$dbAdapter = new DbAdapter(array(
                    'driver' => 'Mysqli',
                    'database' => 'db',
                    'username' => 'root',
                    'password' => 'password'
            ));

$authAdapter = new AuthAdapter($dbAdapter);

            $authAdapter
            ->setTableName('admin_users')
            ->setIdentityColumn('user_name')
            ->setCredentialColumn('password')
            ;
$authAdapter
            ->setIdentity($username)
            ->setCredential($password)
            ;
$result = $authAdapter->authenticate(); 
```

它给出如下错误消息。

```
The supplied parameters to DbTable failed to produce a valid sql statement, please check table and column names for validity. 
```

我检查了数据库配置和列名。但他们是正确的。谁能给我一个线索来检查一下。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:22:25.300

没有必要重新发明轮子并自己为此苦苦挣扎。ZF2 的创建考虑了模块化，因此可以编写用于此类事物的插件模块。

[ZF-Commons](https://github.com/ZF-Commons)网站上已经提供了一些此类模块。您正在寻找的是[ZfcUser](https://github.com/ZF-Commons/ZfcUser)。只需按照说明安装和使用它。甚至还有一个由模块作者编写的优秀教程，将带您逐步完成整个过程。[http://blog.evan.pro/getting-started-with-the-zf2-skeleton-and-zfcuser](http://blog.evan.pro/getting-started-with-the-zf2-skeleton-and-zfcuser)

还有一个很好[的操作指南](https://github.com/ZF-Commons/ZfcUser/wiki)页面，告诉您如何修改它以供自己使用。

# sql - Select in PL-SQL Errors: INTO After Select

> ID：12911452
> 
> 赞同：0
> 
> 时间：2012-10-16T09:22:57.823
> 
> 标签：sql, database, oracle, select, plsql

我在**测试脚本窗口中有以下查询**

```
declare
  -- Local variables here
  p_StartDate date := to_date('10/15/2012');
  p_EndDate   date := to_date('10/16/2012');
  p_ClientID  integer := 000192;
begin
  -- Test statements here
  select d.r                          "R",
         e.amount                     "Amount",
         e.inv_da                     "InvoiceData",
         e.product                    "ProductId",
         d.system_time                "Date",
         d.action_code                "Status",
         e.term_rrn                   "IRRN",
         d.commiount                  "Commission",
         0                            "CardStatus"
    from docs d
   inner join ext_inv e on d.id = e.or_document
   inner join term t on t.id = d.term_id
   where d.system_time >= p_StartDate
     and d.system_time <= p_EndDate
     and e.need_r = 1
     and t.term_gr_id = p_ClientID;
end 
```

这是**错误**：

> ORA-06550：第 9 行，第 3 列：PLS-00428：此 SELECT 语句中需要一个 INTO 子句

我已经使用 T-SQL 很长时间了，而且我是 PL/SQL 的新手。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:46:55.573

你可以试试这个解决方案：

```
set serveroutput on
declare
  -- Local variables here
  p_StartDate date := to_date('10/15/2012');
  p_EndDate   date := to_date('10/16/2012');
  p_ClientID  integer := 000192;
begin
  for cur in ( select d.r                          "R",
                      e.amount                     "Amount",
                      e.inv_da                     "InvoiceData",
                      e.product                    "ProductId",
                      d.system_time                "Date",
                      d.action_code                "Status",
                      e.term_rrn                   "IRRN",
                      d.commiount                  "Commission",
                      0                            "CardStatus"
                 from docs d
                 inner join ext_inv e on d.id = e.or_document
                 inner join term t on t.id = d.term_id
                 where d.system_time >= p_StartDate
                   and d.system_time <= p_EndDate
                   and e.need_r = 1
                   and t.term_gr_id = p_ClientID)
   LOOP
       dbms_output.put_line('R: '||cur.R||'Amount:  '||cur.Amount/*...*/);
   END LOOP;

end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:58:27.613

这些列需要以某种类型结构存储。就像这个例子中给出的

```
DECLARE
  deptid        employees.department_id%TYPE;
  jobid         employees.job_id%TYPE;
  emp_rec       employees%ROWTYPE;
**Create type structure**
  TYPE emp_tab IS TABLE OF employees%ROWTYPE INDEX BY PLS_INTEGER;
  all_emps      emp_tab;
BEGIN
  SELECT department_id, job_id INTO deptid, jobid 
     FROM employees WHERE employee_id = 140;
  IF SQL%FOUND THEN 
    DBMS_OUTPUT.PUT_LINE('Dept Id: ' || deptid || ', Job Id: ' || jobid);
  END IF;
  SELECT * INTO emp_rec FROM employees WHERE employee_id = 105;
  SELECT * INTO all_emps FROM employees;  **//storing into all_emp type structure**
  DBMS_OUTPUT.PUT_LINE('Number of rows: ' || SQL%ROWCOUNT);
END;
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:00:28.533

假设您真正想要的是使用一些参数查询数据库，那么您有一些选择：
1- 使用 sqlplus 或 plsql 开发人员“命令窗口”或“sql 窗口”进行如下查询：

```
 select d.r                          "R",
         e.amount                     "Amount",
         e.inv_da                     "InvoiceData",
         e.product                    "ProductId",
         d.system_time                "Date",
         d.action_code                "Status",
         e.term_rrn                   "IRRN",
         d.commiount                  "Commission",
         0                            "CardStatus"
    from docs d
   inner join ext_inv e on d.id = e.or_document
   inner join term t on t.id = d.term_id
   where d.system_time >= &p_StartDate
     and d.system_time <= &p_EndDate
     and e.need_r = 1
     and t.term_gr_id = &p_ClientID; 
```

系统将提示您为参数赋值。

2-您可以使用 plsql （尽管我不明白为什么），但是您需要一个显式游标
例如，如果您使用的是“测试窗口”：

```
declare
  -- Local variables here
  p_StartDate date := to_date('10/15/2012');
  p_EndDate   date := to_date('10/16/2012');
  p_ClientID  integer := 000192;
begin
  -- Test statements here
  OPEN :src FOR select d.r                          "R",
         e.amount                     "Amount",
         e.inv_da                     "InvoiceData",
         e.product                    "ProductId",
         d.system_time                "Date",
         d.action_code                "Status",
         e.term_rrn                   "IRRN",
         d.commiount                  "Commission",
         0                            "CardStatus"
    from docs d
   inner join ext_inv e on d.id = e.or_document
   inner join term t on t.id = d.term_id
   where d.system_time >= p_StartDate
     and d.system_time <= p_EndDate
     and e.need_r = 1
     and t.term_gr_id = p_ClientID;
end 
```

请注意，您需要在下表中添加一个名为“src”的变量并输入“cursor”，运行 plsql 块后它将保存结果集

# android - Android：在列表视图项目上显示实时时间戳

> ID：12911461
> 
> 赞同：2
> 
> 时间：2012-10-16T09:23:20.980
> 
> 标签：android, listview

在我的应用程序中，我有一个带有自定义适配器的 ListView，其中包含图像等数据，3-5 个 TextView。

这些数据是从网络服务器获取的，直到现在我正在展示一些东西

**此项目发布于 2012 年 10 月 10 日**

但我想把它改成类似

**此项目于 6 天前发布**

因此，它类似于每 1 分钟刷新一次 ListView，我不想使用`adapter.NotifyDataSetChanged()`或类似的东西，它使用新数据重新创建整个 ListView。

我只希望 TextView 单独更改背景并显示在 UI 上。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:31:18.937

一种选择是通过扩展 android TextView 类来创建自定义文本视图，并在其中放置一个时间任务，每分钟更新一次文本视图消息。

你也可以使用

[http://developer.android.com/reference/android/widget/TextView.html#onVisibilityChanged(android.view.View](http://developer.android.com/reference/android/widget/TextView.html#onVisibilityChanged(android.view.View) , int) 来启动和停止定时器任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:31:38.197

我不认为开箱即用。

由于您手头似乎已经有一个日期/日历，只需使用如下函数将其转换为相对时间字符串：[http ://www.zachstronaut.com/posts/2009/01/20/php-relative-date-time -string.html](http://www.zachstronaut.com/posts/2009/01/20/php-relative-date-time-string.html)

如果您想要实时更新，我认为您最好的选择是启动一个后台线程，为其提供 ListView 并定期更新可见项目，但是您可能希望更新所有项目以防止不一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:32:58.493

作为参考，我建议您使用以下内容来更改 ListView。

1.您需要获取要更改 Textview 的特定项目的行视图。

2.现在从第 1 步开始，我相信你有你的行视图，所以在它的孩子中应用更改。

# javascript - 删除 iframe 会导致内存泄漏吗？

> ID：12911462
> 
> 赞同：1
> 
> 时间：2012-10-16T09:23:22.370
> 
> 标签：javascript, jquery, html

我有一个单页应用程序，它根据用户输入创建和删除许多 iframe。每个 iframe 都可以包含一个 jqgrid、一个带有 jquery.validate 插件的输入提交表单等......

主页面可以访问所有 iframe 以检索当前操作状态和一些数据以重建主菜单。

仅删除 iframe 是否安全，或者`.empty()`在删除它们之前我需要将它们移到身体上？

编辑：

当我说“检索当前操作状态和一些数据”时，我实际上使用类似这样的东西访问 iframe 属性

```
jqueryFrameObject[0].contextWindow.myCoolProperty 
```

但从不缓存主页面中的对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:25:51.053

否：jQuery 负责删除可能导致内存泄漏的元素：

> 除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

如果您不保留其他指针（包括基于闭包的隐藏指针），您将是安全的。`addEventListener`如果您不想保留指向已删除元素的隐藏链接，请注意不要使用本机。

# android - xml 或 sqlite 文件？

> ID：12911469
> 
> 赞同：0
> 
> 时间：2012-10-16T09:23:46.380
> 
> 标签：android, sqlite

我需要 SQLite 的提示；我以 SOAP 或 REST 格式接收到我解析到本地 SQLite 数据库的大型 XML（200 到 5000 个条目，具体取决于用户，大约 30 列）。此操作对用户来说需要太多时间（从 10 秒到 2 分钟），所以我想知道：

是否可以在窗口服务器（Delphi XE2 自制服务器）下创建 SQLite 数据库文件并将整个文件发送到手机；然后在移动端，用新的数据库文件替换数据库文件（数据在客户端没有修改，我可以毫无遗憾地替换文件^^）？

在有根的手机上，我找不到 SQLite 数据库文件（用 esFileExplorer、/data、/dbdata、/sdcard/data ... 无处搜索）所以我只是不知道我必须放在哪里最后那个文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:49:27.327

是的，有可能。

您可以下载具有最新数据的数据库并将其替换为当前数据库。在此处找到“[如何使用现有数据库](https://stackoverflow.com/questions/9109438/how-to-use-existing-database-with-android-app/9109728#9109728)”的示例，示例项目的链接也在[那里](http://sdrv.ms/N857Wn)。

**编辑**：

您需要根据需要对其进行修改。

您可以使用删除现有数据库`context.deleteDatabase(DATABASE_NAME);`

# asp.net - ASP.NET Report server conditional (if available) use

> ID：12911479
> 
> 赞同：0
> 
> 时间：2012-10-16T09:24:29.247
> 
> 标签：asp.net, .net, reporting-services

We develop an ASP.NET application that displays tabular data to users. The data comes from stored procedure in a database. We developed a custom control to display this data in HTML table. However lately, we discovered the beauty of using Report Server and migrated all of our reports there.

The situation is that we offer this application to both users with Report Server and without Report Server installed. We would like to offer old-reports style to users without RS and embed RS controls to those who have RS installed --- but both solutions integrated into one application.

How should we handle assembly references? Is namespace Microsoft.Reporting.WebForms always available? If not can we use .NET library file as part of our application and distribute it with it? Are there any problems that might arise?

The fact that RS is or is not installed (and its address) would be handled via configuration file.

Could you please help me? Thanks all in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:42:07.560

You can deploy/distribute the appropriate ReportViewer DLL's with your own application/code, for websites I don't think you specifically need to install the ReportViewer on the server. The web.config *will* need to be adjusted, there's [this MSDN article](http://msdn.microsoft.com/en-us/library/ms251661.aspx) which describes all the different aspects.

As far as I can tell from your question, you'll allow users of your code to switch between a control that does or doesn't use a ReportViewer, based on an AppSetting (or something akin). This should be perfectly possible with the above setup.

# unit-testing - 有没有获得 Apex 代码的代码覆盖率报告的好方法？

> ID：12911480
> 
> 赞同：2
> 
> 时间：2012-10-16T09:24:32.923
> 
> 标签：unit-testing, salesforce, apex-code, force.com

我们正在使用 Visualforce 和 Apex 作为更大系统的一部分对 salesforce 进行大量增强，作为我们质量指标的一部分，我们必须向管理层提供关于代码覆盖率的报告。

我想获得一份类似于在 Force.com IDE 中运行所有测试生成的报告，但使用 HTML，以便我可以通过 Web 界面轻松显示它。

对于我们系统的其余部分，我们使用 Sonar [http://www.sonarsource.org/](http://www.sonarsource.org/)来生成报告。

有人知道最好的方法吗？

我已经浏览了 API 文档，但无法确定覆盖百分比是否针对类存储，因此查询不是一个选项。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:05:50.003

如果您[通过 API 自己运行 Apex 测试](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_unit_tests_running.htm#APISectionTitle)，则会返回一些对象，指示该运行中的测试未涵盖哪些行。您可以通过同步或异步方法运行测试。

然后，您可以使用这些数据以您需要的格式创建报告。例如，我使用它在[FuseIT SFDC Explorer](http://www.fuseit.com/Solutions/SFDC-Explorer/Help-Apex-Tests.aspx)（基于 Windows 且免费）中创建了一个基本报告。我只是在丢弃未涵盖的行范围。

![FuseIT SFDC Explorer 代码覆盖率结果](../Images/e368ff70865fbf35b2c5ad0a40ddfa0d.png)

您可能希望一次运行所有测试以获得所有测试的完整代码覆盖率。例如，在上面的屏幕截图中，我只运行了更多测试类中的一个。结果，看起来代码覆盖率比累积测试给出的要低得多。但是，它确实显示了单个测试类达到了哪些行。

我还听说过有关[Sublime Text Editor 的 MavensMate 的](https://github.com/joeferraro/MavensMate-SublimeText)好消息。作为开源，您应该能够找到它如何与测试 API 集成，然后生成报告。

# javascript - 如何在 ruby on rails 中使用复选框来选择行？

> ID：12911482
> 
> 赞同：1
> 
> 时间：2012-10-16T09:24:38.780
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

## 这是`Units`表格：

```
<div id="table_header">Units</div>
<table class="gridView location">
  <tr class="gridViewHeader">
  <th><%= check_box("select", "all", {class: 'location'}) %></th>
  <th>Location Code</th>
  <th>Location Reference</th>
  <th>Address</th>
  </tr>

  <tr class="<%= cycle('gridViewclickableRowDialog', 'gridViewAltclickableRowDialog') %> current_location">
    <td><%= check_box("select", "all", {class: 'current_location'}) %></td>
    <td><%= current_location_id %></td>
    <td><%= current_location.Lo_Reference %></td>
    <td><%= current_location %></td>
  </tr>
</table> 
```

## 这是`Selected Units`表格：

```
<div id="table_header">Selected Units</div>
<table class="gridView location">
  <tr class="gridViewHeader">
  <th><%= check_box("select", "all", {class: 'location'}) %></th>
  <th>Location Code</th>
  <th>Location Reference</th>
  <th>Address</th>
  </tr>

  <tr class="<%= cycle('gridViewclickableRowDialog', 'gridViewAltclickableRowDialog') %> current_location">
    <td><%= check_box("select", "all", {class: 'current_location'}) %></td>
    <td><%= current_location_id %></td>
    <td><%= current_location.Lo_Reference %></td>
    <td><%= current_location %></td>
  </tr>
</table> 
```

## `button`要推送的图像

```
<%= image_tag("blue_right_arrow.png", id: 'blue_right_arrow', :alt => "arro", title: 'Move to Selected Units') %> 
```

通过单击此按钮，表格`button`中的选定行`Units`应传输到`Selected Units`表格中。

提前致谢！。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:28:37.367

**修改后的标记**

```
<div class="table_header">Units</div>
<table class="gridView location" id="units">
  <thead>
    <tr class="gridViewHeader">
      <th><%= check_box("select", "all", {:class => "location"}) %></th>
      <th>Location Code</th>
      <th>Location Reference</th>
      <th>Address</th>
    </tr>
  </thead>

  <tbody>
    <tr class="current_location">
      <td><%= check_box("select", "all", {:class => "current_location"}) %></td>
      <td><%= current_location_id %></td>
      <td><%= current_location.Lo_Reference %></td>
      <td><%= current_location %></td>
    </tr>
  </tbody>
</table>

<div class="table_header">Selected Units</div>
<table class="gridView" id="selected_units">
  <thead>
    <tr class="gridViewHeader">
      <th><%= check_box("select", "all") %></th>
      <th>Location Code</th>
      <th>Location Reference</th>
      <th>Address</th>
    </tr>
  </thead>

  <tbody> 
    <tr class="<%= cycle('gridViewclickableRowDialog', 'gridViewAltclickableRowDialog') %>">
      <td><%= check_box("select", "all") %></td>
      <td><%= current_location_id %></td>
      <td><%= current_location.Lo_Reference %></td>
      <td><%= current_location %></td>
    </tr>
  </tbody>
</table>

<%= image_tag("blue_right_arrow.png", id: 'blue_right_arrow', :alt => "arro", title: 'Move to Selected Units') %> 
```

记下添加的新类。

**jQuery代码**

```
$(document).ready(function() {
  #copying the tr
  $("#blue_right_arrow").click(function() {
    $("input.current_location").each(function(i, el) {
      if($(el).is(":checked")) {
        $("table#selected_units tbody").append($(el).parent().parent().html());
        $(el).remove()
      }
    });
  });
}); 
```

# php - 通过php创建htaccess

> ID：12911486
> 
> 赞同：0
> 
> 时间：2012-10-16T09:25:12.113
> 
> 标签：php, .htaccess

在任何事情之前，我除了回答“这是一个 BIGGGGG 安全问题”之外，没有问题，但是我想详细回答风险。

这是我的问题：我正在使用 php 来自动保护一些文件夹，而无需编辑里面的文件。然后它通过.htaccess。问题是创建了 .htaccess 和 .htpasswd 文件，具有良好的访问权限（文件夹等等），但是它总是返回 500 内部错误，当我检查错误日志时，没有任何关于该错误的具体说明. 如果我手动创建文件，它可以工作。

这是php代码：

```
$htpath = '../../.htpasswds/'.$ref;
mkdir($htpath, 0750);               
$htpass = $htpath.'/.htpasswd';
$ourFileHandle = fopen($htpass, 'wb') or die("Can't create .htpasswd file.");
$chars = "qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM0123456789";
$special_chars = '-_@#)([]|-=';
$pass = $chars[rand(0,strlen($chars)-1)].$special_chars[rand(0,strlen($special_chars)-1)].$chars[rand(0,strlen($chars)-1)].rand(0, 9999).$chars[rand(0,strlen($chars)-1)].$special_chars[rand(0,strlen($special_chars)-1)];
$content = 'client_access'.$id.':'.crypt($pass, base64_encode($pass));
fwrite($ourFileHandle, $content) or die("Can't create .htaccess file.");                
fclose($ourFileHandle);

$htpass = $path.'/.htaccess';
$handle = fopen($htpass, 'wb') or die("Can't create .htpasswd file.");
$content = 'AuthType "Basic" ';
$content .= "\n";
fwrite($handle, $content);              
$content = 'AuthUserFile "/home/thedigi1/.htpasswds/'.$ref.'/.htpasswd" ';
$content .= "\n";               
fwrite($handle, $content);
$content = 'Require valid-user ';
$content .= "\n";               
fwrite($handle, $content);
$content = 'RewriteOptions inherit';
$content .= "\n";               
fwrite($handle, $content) or die("Can't create .htaccess file.");
fclose($handle); 
```

您对可能导致问题的原因有任何想法吗？或者也许有更好的解决方案？

非常感谢！

编辑：这是创建的 htaccess 的代码：

```
AuthType "Basic" 
AuthUserFile "/home/thedigi1/.htpasswds/A-161012-47/.htpasswd" 
Require valid-user 
RewriteOptions inherit 
```

但是我已经通过 htaccess 进行了身份验证，可以访问创建 htaccess 的 php 文件，你认为这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:33:36.300

问题解决了：

htaccess 文件缺少 AuthName 参数

```
AuthName "text" 
```

我不得不将 .htpasswd 文件夹改成 755 而不是 750。

感谢您的回答！

# ios - 如何从 iOS 中的 EKCalendar 获取所有事件

> ID：12911487
> 
> 赞同：5
> 
> 时间：2012-10-16T09:25:30.867
> 
> 标签：ios, xcode, ios5, calendar, ios6

我创建了一个包含一些事件的日历，现在我想从该日历中获取所有事件，而不知道它们的开始或结束日期是什么。

我试过的代码，从所有日历中获取所有事件，所以我可以稍后按日历 ID 划分它们..：

```
NSPredicate *fetchCalendarEvents = [eventStore predicateForEventsWithStartDate:[NSDate distantPast] endDate:[NSDate distantFuture] calendars:eventStore.calendars];

NSArray *allEvents = [eventStore eventsMatchingPredicate:fetchCalendarEvents]; 
```

这会在数据库清楚地显示日历中的事件时`allEvents`返回。`nil`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:45:31.103

我现在可以工作了。

这是我正在使用的代码：

```
NSDate* endDate =  [NSDate dateWithTimeIntervalSinceNow:[[NSDate distantFuture] timeIntervalSinceReferenceDate]];
NSArray *calendarArray = [NSArray arrayWithObject:cal];
NSPredicate *fetchCalendarEvents = [eventStore predicateForEventsWithStartDate:[NSDate date] endDate:endDate calendars:calendarArray];
NSArray *eventList = [eventStore eventsMatchingPredicate:fetchCalendarEvents];

for(int i=0; i < eventList.count; i++){

    NSLog(@"Event Title:%@", [[eventList objectAtIndex:i] title]);

} 
```

从您调用该方法的正确日期开始，为我提供我用于我的应用程序的日历中的所有事件。

我认为给予`[NSDate distantPast]`是行不通的，因为它是过去的事情……将你的 startDate 设置为`[NSDate date]`可行。

希望这可以帮助有同样问题的人..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-27T19:56:25.747

如果您想查找超过 4 年的年份，系统会将返回的事件修剪为前 4 年的事件。（请参阅[Apple 的文档](https://developer.apple.com/documentation/eventkit/ekeventstore/1507479-predicateforevents)）。可能的解决方案是批量运行谓词匹配。

这是 Xamarin.iOS 的 C# 扩展

```
public static class EKEventStoreExtensions
{        
    private const int MaxPredicateYearSpan = 4;

    public static EKEvent[] GetAllEvents(this EKEventStore eventStore, DateTimeOffset startAt, DateTimeOffset endAt, params EKCalendar[] calendars)
    {
        var isBatched = endAt.Year - startAt.Year >= MaxPredicateYearSpan;
        var result = new List<EKEvent>();
        var batchStartAt = startAt;
        var batchEndAt = endAt;

        while (batchStartAt < endAt)
        {
            if (isBatched)
            {
                batchEndAt = batchStartAt.AddYears(1);
                if (batchEndAt > endAt)
                {
                    batchEndAt = endAt;
                }
            }

            var events = GetEventsMatching(eventStore, batchStartAt, batchEndAt, calendars);
            result.AddRange(events);

            batchStartAt = batchEndAt;
        }

        return result.ToArray();
    }

    private static EKEvent[] GetEventsMatching(EKEventStore eventStore, DateTimeOffset startAt, DateTimeOffset endAt, EKCalendar[] calendars)
    {
        var startDate = (NSDate)startAt.LocalDateTime;
        var endDate = (NSDate)endAt.LocalDateTime;
        var fetchCalendarEvents = eventStore.PredicateForEvents(startDate, endDate, calendars);

        return eventStore.EventsMatching(fetchCalendarEvents);
    }
} 
```

# ios - 使用 NIB 加载视图的 UIView.addSubview 只会添加根 UIView

> ID：12911488
> 
> 赞同：3
> 
> 时间：2012-10-16T09:25:33.377
> 
> 标签：ios, uiview, addsubview, loadnibnamed

我在 XIB 文件中外部化了一个组件，因此我可以在几个不同的视图中重用它。现在在我的视图控制器中，我加载了基于 XIB 的 UIView 并将其添加到当前视图中：

```
NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"ThumbsPreviewView" owner:self options:nil];
_likePreview = [views objectAtIndex:0];
[self.view addSubview:_likePreview]; 
```

起初，我认为它不起作用……但实际上它起作用了，只是将根视图（即我的所有图形组件的容器，它是透明的）放到我的视图中。

所以我需要把这种代码（对于每个子组件）让它工作：

```
[self.view addSubview:_likePreview];
NSArray *subviews = _likePreview.subviews;
for(UIView * subview in subviews) {
    [self.view addSubview:subview];
} 
```

这是非常违反直觉的，而且我认为它不会创建我想要的视图层次结构。

我确信有一个解决方案，因为我在 UITableViewController 中做了同样的事情来从 XIB 加载自定义表头。在这种情况下使用完全相同的 XIB 文件可以正确加载所有内容。这是代码：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    switch(section) {
        case 0: {
            NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"ThumbsPreviewView" owner:self options:nil];
            _likePreview = [views objectAtIndex:0];
            return _likePreview;
        }
    }
    return [super tableView:tableView viewForHeaderInSection:section];
} 
```

使用上面的代码，一切都很好，我得到了整个视图（= 包含所有内容的根视图容器）作为我的表格部分的标题。

所以问题是：在我的第一个例子中我做错了什么？如何将所有内容（容器 + 所有内容）添加到我的父 UIView 作为适当的 UIView 层次结构？

编辑：我需要准确地将所有内容都组织在我的 XIB 文件中的单个根 UIView 中，如下所示（我无法发布图像）：

```
* Thumbs preview view
|_ Button
|_ Image View
|_ Image View
|_ Image View
|_ Image View
|_ Button
|_ Button
|_ Button
|_ Label 
```

非常感谢您的帮助 ！

克里斯托夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:52:03.877

加载组件的一种方法是将组件存储到顶部`UIView`对象中（附上的屏幕截图）。

[![](../Images/eb37d2bfcdd6901f452a80a2e01903ad.png)](https://i.stack.imgur.com/5RPw5.jpg)
[（来源：[mobypicture.com](http://a1.img.mobypicture.com/fd182b5ba5c55fa1fba9162f395ddb98_full.jpg)）]

然后，您可以像往常一样加载您的 nib`-addSubview:`并将您的组件添加到视图层次结构中。

编辑：

加载笔尖

```
UIView *view = [[[NSBundle mainBundle] loadNibNamed:@"testView" owner:self options:nil] objectAtIndex:0]; 
```

并将视图添加到视图层次结构中

```
[self.view addSubview:view]; 
```

导致以下视图层次结构：

```
(lldb) po [[self view] recursiveDescription]
(id) $1 = 0x088487b0 <UIView: 0x89595b0; frame = (0 0; 320 548); autoresize = W+H; layer = <CALayer: 0x8958b30>>
   | <UIView: 0x89755c0; frame = (0 0; 320 200); autoresize = RM+BM; layer = <CALayer: 0x8975080>>
   |    | <UIView: 0x8975620; frame = (200 20; 100 30); autoresize = W+H; layer = <CALayer: 0x8975680>>
   |    | <UIView: 0x8975700; frame = (20 20; 100 30); autoresize = W+H; layer = <CALayer: 0x8974ea0>>
   |    | <UIRoundedRectButton: 0x8975790; frame = (20 58; 73 44); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x8975890>>
   |    |    | <UIGroupTableViewCellBackground: 0x8976030; frame = (0 0; 73 44); userInteractionEnabled = NO; layer = <CALayer: 0x8976100>>
   |    |    | <UIImageView: 0x89768d0; frame = (1 1; 71 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x89770f0>>
   |    |    | <UIButtonLabel: 0x8977af0; frame = (36 22; 0 0); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8977be0>>
   |    | <UIRoundedRectButton: 0x8978990; frame = (227 58; 73 44); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x8978a60>>
   |    |    | <UIGroupTableViewCellBackground: 0x8978a90; frame = (0 0; 73 44); userInteractionEnabled = NO; layer = <CALayer: 0x8978b10>>
   |    |    | <UIImageView: 0x8978b80; frame = (1 1; 71 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8979230>>
   |    |    | <UIButtonLabel: 0x8978be0; frame = (36 22; 0 0); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8978cd0>> 
```

# eclipse - 使用 Eclipse 建模框架开发应用程序

> ID：12911489
> 
> 赞同：2
> 
> 时间：2012-10-16T09:25:34.353
> 
> 标签：eclipse, mda, emf

我正在寻找可用的 MDA（模型驱动架构）工具。我从 EMF（Eclipse 建模框架）开始。

生成核心类看起来不错。

生成端到端应用程序有什么帮助？

```
To generate UI elements (JSP/JSF/so on...)
To generate Entities and ORM's
To generate EJB's/Web Services 
```

EMF 中是否提供了广泛的建模来实现这些要求？

或任何其他工具可用于捕获建模中的端到端应用程序并将其驱动到开发中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:53:02.527

Eclipse 建模框架为您提供了名为 ECORE 的 MOF 语言 (http://www.omg.org/spec/MOF) 的实现。通过充当元元模型的ECORE，定义了建模语言的元模型（即UML 元模型等）。您可以通过基于 EMF 的 Papyrus 或 TopCased 编辑 UML 图。当您定义此类图表时，您还创建了一个模型文件，其 XMI 内容符合相关的 ECORE 元模型。现在，您可以通过名为 ACCELEO 的 Eclipse 插件将模型应用于文本转换，该插件是 OMG 标准 MOFM2T 转换语言 (http://www.omg.org/spec/MOFM2T) 的实现。

因此您可以定义自己的领域特定建模语言（通过 ECORE），将 UIElement（Jsp、Jsf 等）DBEntity 等概念作为第一类实体，创建符合该概念的模型并创建模型到文本的转换(ACCELEO) 将它们转换为可执行代码

或者

您可以定义（或重用已经存在的）UML 配置文件，通过该配置文件您可以标记 UML 模型的元素以表示 UI 元素 DB 实体等，并创建模型到文本的转换，将它们转换为可执行代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:56:07.730

最好的技术是 M2T-JET。这是一个非常轻量级的模板框架，不会强迫您使用任何一种模型。使用 JET，您可以生成整个多项目应用程序。

这是我对另一个 JET 问题的回答的链接，其中我给出了一个[JET 示例](https://stackoverflow.com/questions/11904803/generating-java-code-from-xml-in-eclipse)

# javascript - 带有条款和条件复选框的 Joomla 注册表单

> ID：12911491
> 
> 赞同：0
> 
> 时间：2012-10-16T09:25:41.950
> 
> 标签：javascript, html, joomla

我正在使用 joomla 1.5，需要添加一个具有条款和条件名称的复选框。我已经使用了下面的代码，但它没有完全工作。即使我勾选了复选框，它也会发出警报。

```
<script type="text/javascript"><!--

 function checkAgree() {
     var agree = document.getElementById('formAgree');         
     if (!agree.checked) {
        alert('To become a member you must agree to our terms of service!');
        return false;
     } 
     return true;
 }

--></script>
<form action="<?php echo JRoute::_( 'index.php?option=com_user' ); ?>" method="post" id="josForm" name="josForm" class="form-validate" onsubmit="return checkAgree();">

<?php

 // Terms of Service

 $tokenHTML = str_replace('type="hidden"','id="formAgree" type="checkbox"',JHTML::_( 'form.token' ));

 $tosURL = "tos.html"; // REPLACE THIS!

?>
<tr>
   <td height="40" style="vertical-align: top;">
      <label>
         Terms of service:         
      </label>
   </td>
   <td>
      <iframe src="<?php echo htmlentities($tosURL); ?>" width="307" height="150"></iframe>
   </td>
</tr>
<tr>
  <td colspan="2">
    <p><?php echo $tokenHTML; ?> <b>Agree to terms of service.</b> *</p>
  </td>
</tr>
<tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:07:32.127

```
if ($("#formAgree").not(":checked")) {
  alert('To become a member you must agree to our terms of service!');
    return false;
} 
 return true; 
```

# javascript - Javascript - 在同一页面上显示和隐藏具有两个独立 UL 项目的大量列表项目的最快方法

> ID：12911492
> 
> 赞同：1
> 
> 时间：2012-10-16T09:25:41.320
> 
> 标签：javascript, jquery, html

我在同一页面上有两个投标 UL 元素，我希望每个元素最多显示 5 个列表项。然后，如果用户想要通过单击由 Javascript 动态创建的“查看更多”li 元素，他们将隐藏其他可以看到的内容。

假设下面这些是我的“ul”元素集。

```
 <ul class="setOne">
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
    </ul>

    <ul class="setTwo">
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
       <li>List item 1</li>
    </ul> 
```

这是我一直在使用的 JS 代码；

```
 $('.setOne').each(function(){ 
    var max = 2;
    if ($(this).find('li').length > max) {
        $(this).find('li:gt('+max+')').hide().end().append('<li class="viewmore"><span class="showMore">View more</span><span class="showLess less">Hide</span></li>');

        $('.viewmore').click( function(){
            $(this).siblings(':gt('+max+')').toggle().end().find('span').toggle();
        });

    }else if ($(this).find('li').length === max) {
        $(this).find('li:gt('+max+')').hide().end().append('<li class="nomore"><span class="End">End</span></li>');
    }else if ($(this).find('li').length < max) {
        $(this).find('li:gt('+max+')').hide().end().append('<li class="nomore"><span class="End">No Likes</span></li>');
    }

}); 
```

我想使用 选择所有两个`ul`元素`$('ul')`，但它只适用于最后一个`ul`元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:36:35.663

你可以用jquery试试这个

现场演示

[http://jsfiddle.net/LhVcc/](http://jsfiddle.net/LhVcc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:32:29.113

然后只需使用`$('ul')`选择器，并确保您不会`$('.viewmore')`通过添加上下文来绑定两次：

```
$('ul').each(function(){ 
    var max = 2;
    if ($(this).children('li').length > max) {
        $(this).find('li:gt('+max+')').hide().end().append('<li class="viewmore"><span class="showMore">View more</span><span class="showLess less">Hide</span></li>');

        $('.viewmore', this).on('click',  function(){
            $(this).siblings(':gt('+max+')').toggle().end().find('span').toggle();
        });

    }else if ($(this).find('li').length == max) {
        $(this).find('li:gt('+max+')').hide().end().append('<li class="nomore"><span class="End">End</span></li>');
    }else if ($(this).find('li').length < max) {
        $(this).find('li:gt('+max+')').hide().end().append('<li class="nomore"><span class="End">No Likes</span></li>');
    }
}); ​ 
```

[**小提琴**](http://jsfiddle.net/dyzyU/)

# c# - 多页 tiff 程序 空白页

> ID：12911495
> 
> 赞同：3
> 
> 时间：2012-10-16T09:25:46.750
> 
> 标签：c#

我编写了一个代码来将单个 tiff 文件组合到多页 tiff。但输出最后带有空白页。如果输入文件是黑白的但不是彩色的 .tiff 文件，代码可以正常工作。例如，如果我给 100 个文件，作为输入输出单个 tiff 文件拿出 47 页，其余为空白。

我使用标准代码来实现此功能，以下是我的代码。有人知道为什么吗？

```
 using (FileStream fs = new FileStream(fileNameTemp, FileMode.Append, FileAccess.Write))
        {
            System.Windows.Media.Imaging.TiffBitmapEncoder tifEnc = new System.Windows.Media.Imaging.TiffBitmapEncoder();
            tifEnc.Compression = System.Windows.Media.Imaging.TiffCompressOption.Default;

            foreach (string fileName1 in filePaths)
            {
                Console.WriteLine("FileName:::" + fileName1);

                System.Windows.Media.Imaging.BitmapImage bmpImg = new System.Windows.Media.Imaging.BitmapImage();
                bmpImg.BeginInit();
                bmpImg.CacheOption = System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;
                bmpImg.UriSource = new Uri(fileName1);
                bmpImg.EndInit();

                System.Windows.Media.Imaging.FormatConvertedBitmap fcb = new System.Windows.Media.Imaging.FormatConvertedBitmap(bmpImg,
                                                  System.Windows.Media.PixelFormats.Rgb24,
                                                  System.Windows.Media.Imaging.BitmapPalettes.Halftone27,
                                                  1.0);
                tifEnc.Frames.Add(System.Windows.Media.Imaging.BitmapFrame.Create(fcb));

            }

            tifEnc.Save(fs);
            fs.Dispose();

        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T08:08:09.587

在下面的示例中，当您执行 bitmapImage.EndInit() 时未加载 BitmapImage，因为它似乎在执行延迟加载。如果内存流被释放，那么我得到的页面也是白色的，因为没有加载图像。第二种方法采用目标文件路径和源列表。

```
 public static BitmapImage LoadImage(byte[] bytes)
        {
            var memoryStream = new MemoryStream(bytes);

            var bitmapImage = new BitmapImage();
            bitmapImage.BeginInit();
            bitmapImage.StreamSource = memoryStream;
            bitmapImage.EndInit();
            return bitmapImage;              
        }

        public static void CreateTiff(string destPath, params string[] filePaths)
        {
            using (FileStream fs = new FileStream(destPath, FileMode.Append, 
                                                            FileAccess.Write))
            {
                var tifEnc = new TiffBitmapEncoder();
                tifEnc.Compression = TiffCompressOption.Default;

                foreach (string fileName in filePaths)
                {
                    var image = LoadImage(File.ReadAllBytes(fileName));

                    tifEnc.Frames.Add(BitmapFrame.Create(image));
                }

                tifEnc.Save(fs);
            }

        } 
```

# c# - 运行 INSERT 命令时的奇怪行为（C# 和 XLSX）

> ID：12911497
> 
> 赞同：0
> 
> 时间：2012-10-16T09:25:52.150
> 
> 标签：c#, sql, excel, insert

不知何故，我无法理解我正在使用的命令发生了什么。基本上我想将数据插入到 EXCEL 文件中，如下所示：

```
string ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=scriptsdb.xlsx;Extended Properties=\"Excel 12.0;ReadOnly=False;HDR=Yes;\"";
OleDbConnection objConn = new OleDbConnection(ConnectionString);
string sSQLQuery = "INSERT INTO [Plan1$] ([ID], [NAME], [DESCRIPTION], [SQL_CODE]) VALUES ('" + NextID + "','" + txtbxName.Text + "','" + txtbxDescription.Text + "','" + txtboxSQL.Text + "')";
OleDbCommand cmd = new OleDbCommand(sSQLQuery, objConn);
objConn.Open();
cmd.ExecuteNonQuery(); 
```

现在检查一下。有时它有效（添加了记录），有时我收到一条错误消息（操作必须使用可更新查询）。

听起来很奇怪，当文本字段只有一个单词时，我只会收到错误消息。例如：“测试”。一旦我将其更改为“TEST ONE”，它就可以正常工作。如果我尝试从一开始就用两个词保存它，它就可以工作。

知道我可能做错了什么吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:36:45.970

**注意：**将 INSERT INTO [Plan1$] 更改为 INSERT INTO[Sheet1$]。

工作代码。

```
class Program
        {
            static void Main(string[] args)
            {
            string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+"C:\\Users\\123\\Desktop\\plan1.xlsx;"+"Extended Properties=\"Excel 12.0;ReadOnly=False;HDR=Yes\";";
            // here you can use your text box or from
            // where ever you access the data to be inserted
            // into the that Excel file sheet

            string selectString = "INSERT INTO [Sheet1$] ([ID], [NAME], [DESCRIPTION], [SQL_CODE]) VALUES ('1','maziz','Not working','selectfrom you')";

            OleDbConnection con = new OleDbConnection(connectionString);
            OleDbCommand cmd = new OleDbCommand(selectString, con);

            try
            {
                con.Open();
                cmd.ExecuteNonQuery();
                Console.WriteLine("Successfully inserted the records");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            finally
            {
               con.Close();
               con.Dispose();
            }
            Console.ReadLine();
            }
        } 
```

# delphi - 如何使用对象提供快速报告

> ID：12911501
> 
> 赞同：1
> 
> 时间：2012-10-16T09:26:08.087
> 
> 标签：delphi, object

我正在使用 Embarcadero Delphi XE2，

我正在使用填充了字符串列表中的值的快速报告。

我的问题是：我可以跳过字符串列表并以某种方式将我的类型列表的某些对象绑定到 fastreport 的数据吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:04:23.103

查看 TfrxUserDataSet 和相关事件。使用此组件，您可以将任何类型的数据填充到报告中。

# iphone - iPhone中UIActivityIndi catorView的问题？

> ID：12911503
> 
> 赞同：0
> 
> 时间：2012-10-16T09:26:13.690
> 
> 标签：iphone, ios, webview, uiactivityindicatorview, presentmodalviewcontroller

目前我正在使用 iphone 应用程序，使用 UIWebView（presentModelViewController 中显示的网页）在屏幕上显示网页，然后我添加 UIActivityIndi​​catorView 以显示在加载 url 请求中，但 UIActivityIndi​​catorView 没有显示在屏幕上，我尽力了， 请帮我。

提前致谢

我试过这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    activity.frame=CGRectMake(140, 240, 40, 40);
    [self.view addSubview:activity]; 

    web = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
    web.delegate=self;
    web.backgroundColor=[UIColor clearColor];
    NSURL *url = [NSURL URLWithString:@"http://wrwr.rww.com/erqrrq"];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];
    [web loadRequest:req];
    [self.view addSubview:web];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
    [activity stopAnimating];  
}

- (void)webViewDidStartLoad:(UIWebView *)webView
{     
    [activity startAnimating];   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:31:31.527

像这样将您的活动指示器视图添加到您的 webView 中：-

```
 - (void)viewDidLoad
 {
[super viewDidLoad];

activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
activity.frame=CGRectMake(140, 240, 40, 40);

web = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
web.delegate=self;
web.backgroundColor=[UIColor clearColor];
NSURL *url = [NSURL URLWithString:@"http://wrwr.rww.com/erqrrq"];
NSURLRequest *req = [NSURLRequest requestWithURL:url];
[web loadRequest:req];
[web addSubview:activity];
[self.view addSubview:web];
}

 - (void)webViewDidFinishLoad:(UIWebView *)webView 
{
[activity stopAnimating];  
}

- (void)webViewDidStartLoad:(UIWebView *)webView
{     
[activity startAnimating];   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:30:49.210

试试这个，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    web = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
    web.delegate=self;
    web.backgroundColor=[UIColor clearColor];
    NSURL *url = [NSURL URLWithString:@"http://wrwr.rww.com/erqrrq"];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];
    [web loadRequest:req];
    [self.view addSubview:web];

    activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    activity.frame=CGRectMake(140, 240, 40, 40);
    [self.view addSubview:activity];
    [self.view bringSubviewToFront:activity];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:31:00.963

定义 UIWebView 后定义 UIActivityIndi​​catorView。

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        web = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
        web.delegate=self;
        web.backgroundColor=[UIColor clearColor];
        NSURL *url = [NSURL URLWithString:@"http://wrwr.rww.com/erqrrq"];
        NSURLRequest *req = [NSURLRequest requestWithURL:url];
        [web loadRequest:req];
        [self.view addSubview:web];

     activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        activity.frame=CGRectMake(140, 240, 40, 40);
        [self.view addSubview:activity]; 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:40:17.057

将子视图添加到超级视图的顺序很重要。被`UIActivityIndicatorView`添加，然后`UIWebView`覆盖它。如果先添加 UIWebView，即

```
[self.view addSubview:web];
[self.view addSubview:activity]; 
```

将`UIActivityIndicatorView`覆盖`UIWebView`.

# java - 当没有调用“匹配”方法时，Matcher 抛出 IllegalStateException 的理由

> ID：12911504
> 
> 赞同：31
> 
> 时间：2012-10-16T09:26:15.060
> 
> 标签：java, regex, illegalstateexception

**TL;博士**

[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)的 API背后的设计决策是什么？

**背景**

[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)有一种我没有预料到的行为，而且我找不到很好的理由。API 文档说：

> 创建后，匹配器可用于执行三种不同类型的匹配操作： [...] 这些方法中的每一个都返回一个布尔值，指示成功或失败。更多关于匹配成功的信息可以通过查询匹配器的状态来获得。

API 文档进一步说的是：

> 匹配器的显式状态最初是未定义的；在成功匹配之前尝试查询它的任何部分将导致抛出 IllegalStateException。

**例子**

```
String s = "foo=23,bar=42";
Pattern p = Pattern.compile("foo=(?<foo>[0-9]*),bar=(?<bar>[0-9]*)");
Matcher matcher = p.matcher(s);
System.out.println(matcher.group("foo")); // (1)
System.out.println(matcher.group("bar")); 
```

此代码抛出一个

```
java.lang.IllegalStateException: No match found 
```

在`(1)`. 为了解决这个问题，有必要调用`matches()`或其他方法`Matcher`使`group()`. 以下作品：

```
String s = "foo=23,bar=42";
Pattern p = Pattern.compile("foo=(?<foo>[0-9]*),bar=(?<bar>[0-9]*)");
Matcher matcher = p.matcher(s);
matcher.matches(); // (2)
System.out.println(matcher.group("foo"));
System.out.println(matcher.group("bar")); 
```

将调用添加到[`matches()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)at`(2)`会将调用设置`Matcher`为正确的状态`group()`。

**问题，可能没有建设性**

*为什么*这个 API 是这样设计的？为什么在构建时不*自动*匹配？`Matcher``Patter.matcher(String)`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-16T09:33:28.380

实际上，您误解了文档。第二次看你引用的声明： -

> 在成功匹配之前尝试查询它的任何部分将导致抛出 IllegalStateException。

如果未找到匹配项，则匹配器可能会`IllegalStateException`在访问时抛出。`matcher.group()`

因此，您需要使用以下测试来实际启动匹配过程：-

```
 - matcher.matches() //Or
 - matcher.find() 
```

下面的代码： -

```
Matcher matcher = pattern.matcher(); 
```

只需创建一个`matcher`实例。这实际上不会匹配字符串。哪怕是一场成功的比赛。因此，您需要检查以下条件，以检查成功匹配：-

```
if (matcher.matches()) {
    // Then use `matcher.group()`
} 
```

如果`if`返回条件中的条件，则`false`表示没有匹配。所以，如果你在`matcher.group()`没有检查这个条件`IllegalStateException`的情况下使用，你会得到如果没有找到匹配项。

* * *

假设，如果`Matcher`按照您所说的方式设计，那么您必须`null`检查是否找到匹配项，然后调用`matcher.group()`，如下所示：-

**你认为应该做的方式：-**

```
// Suppose this returned the matched string
Matcher matcher = pattern.matcher(s);  

// Need to check whether there was actually a match
if (matcher != null) {  // Prints only the first match

    System.out.println(matcher.group());
} 
```

但是，如果你想打印任何进一步的匹配，因为一个模式可以在一个字符串中多次匹配，为此，应该有一种方法告诉匹配器找到下一个匹配。但`null`支票将无法做到这一点。为此，您必须将匹配器向前移动以匹配下一个字符串。因此，在`Matcher`类中定义了各种方法来达到目的。该`matcher.find()`方法匹配字符串，直到找到所有匹配项。

还有其他方法，即`match`字符串以不同的方式，这取决于您要如何匹配。因此，它最终会在`Matcher`课堂上`matching`对字符串进行处理。`Pattern`类只是创建一个`pattern`匹配。如果`Pattern.matcher()`是`match`模式，那么必须有某种方式来定义各种方式`match`，就像`matching`可以以不同的方式一样。于是，就需要`Matcher`上课了。

**所以，它实际上是这样的： -**

```
Matcher matcher = pattern.matcher(s);

   // Finds all the matches until found by moving the `matcher` forward
while(matcher.find()) {
    System.out.println(matcher.group());
} 
```

因此，如果在字符串中找到 4 个匹配项，您的第一种方式将仅打印第一个，而第二种方式将通过`matcher`向前移动以匹配下一个模式来打印所有匹配项。

我希望这能说清楚。

类的文档[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)描述了它提供的三种方法的使用，其中说： -

> 通过调用模式的 matcher 方法从模式创建匹配器。创建后，匹配器可用于执行三种不同类型的匹配操作：
> 
> *   matches 方法尝试将整个输入序列与模式进行匹配。
>     
>     
> *   lookingAt 方法尝试将输入序列从开头开始与模式进行匹配。
>     
>     
> *   find 方法扫描输入序列，寻找与模式匹配的下一个子序列。

**不幸的是，**我无法找到任何其他官方消息来源，明确说明此问题的*原因*和*方式*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T01:39:19.530

我的回答与 Rohit Jain 的回答非常相似，但包含了一些*为什么*需要“额外”步骤的原因。

**java.util.regex 实现**

该行：

```
Pattern p = Pattern.compile("foo=(?<foo>[0-9]*),bar=(?<bar>[0-9]*)"); 
```

导致分配一个新的 Pattern 对象，它在内部存储一个表示 RE 的结构 - 诸如字符选择、组、序列、贪婪与非贪婪、重复等信息。

这种模式是无状态和不可变的，因此它可以被重用，是多头的并且优化得很好。

这些行：

```
String s = "foo=23,bar=42";
Matcher matcher = p.matcher(s); 
```

返回一个新`Matcher`对象`Pattern`和`String`- 一个尚未读取字符串的对象。`Matcher`实际上只是一个状态机的状态，其中状态机是`Pattern`.

可以使用以下 API 通过匹配过程步进状态机来运行匹配：

*   `lookingAt()`: 尝试匹配输入序列，从头开始，与模式匹配
*   `find()`：扫描输入序列，寻找与模式匹配的下一个子序列。

在这两种情况下，都可以使用 、 和 方法读取`start()`中间`end()`状态`group()`。

**这种方法的好处**

为什么有人想要逐步完成解析？

1.  从量化大于 1 的组中获取值（即重复并最终匹配不止一次的组）。例如，在下面解析变量赋值的琐碎 RE 中：

    ```
    Pattern p = new Pattern("([a-z]=([0-9]+);)+");
    Matcher m = p.matcher("a=1;b=2;x=3;");
    m.matches();
    System.out.println(m.group(2)); // Only matches value for x ('3') - not the other values 
    ```

    请参阅“组和捕获”JavaDoc on [Pattern中的“组名称”部分](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

2.  开发人员可以将 RE 用作[词法分析器](http://en.wikipedia.org/wiki/Lexical_analysis)，开发人员可以将词法标记绑定到[解析器](http://en.wikipedia.org/wiki/Parser)。实际上，这适用于简单的域语言，但正则表达式可能不是成熟的计算机语言的方式。**编辑**这部分与前面的原因有关，但是创建处理文本的分析树通常比首先对所有输入进行词法分析更容易和更有效。
3.  （对于勇敢的人）您可以调试 RE 并找出*哪个*子序列无法匹配（或不正确匹配）。

但是，在大多数情况下，您不需要通过匹配来步进状态机，因此有一个方便的方法 ( `matches`) 可以运行模式匹配直到完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-20T08:17:08.900

如果匹配器会自动**匹配**输入字符串，那么如果您希望**找到**模式，那将是**浪费精力。**

 **匹配器可用于检查输入字符串中的模式是否`matches()`为输入字符串，并且可用于`find()`输入字符串中的模式（甚至重复查找所有匹配的子字符串）。在您调用这两种方法之一之前，匹配器不知道您要执行什么测试，因此它无法为您提供任何匹配的组。即使您确实调用了其中一种方法，调用也可能会失败——找不到模式——在这种情况下，调用也`group`必须失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T09:30:47.637

这是预期的并记录在案。

原因是`.matches()`返回一个布尔值，指示是否存在匹配项。如果有匹配，那么您可以`.group(...)`有意义地调用。否则，如果没有匹配，调用 to`.group(...)`是没有意义的。因此，您不应该在调用`.group(...)`之前被允许调用`matches()`。

使用匹配器的正确方法如下：

```
Matcher m = p.matcher(s);
if (m.matches()) {
  ...println(matcher.group("foo"));
  ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T18:43:54.017

我的猜测是设计决策是基于查询具有清晰、定义明确的语义，不会将存在与匹配属性混为一谈。

考虑一下：如果匹配器没有成功匹配某些东西，你期望匹配器查询返回什么？

我们先考虑一下`group()`。如果我们没有成功匹配某些东西，Matcher 不应该返回空字符串，因为它没有匹配空字符串。我们可以`null`在这一点上返回。

好的，现在让我们考虑`start()`和`end()`。每次返回`int`。在这种情况下什么`int`值是有效的？当然没有正数。什么负数是合适的？-1？

考虑到这一切，用户仍然必须检查每个查询的返回值，以验证是否发生匹配。或者，您可以检查它是否完全匹配成功，如果成功，则查询语义都具有明确定义的含义。如果不是，无论查询哪个角度，用户都会得到一致的行为。

我承认重用`IllegalStateException`可能不会导致错误情况的最佳描述。但是，如果我们要重命名/子类`IllegalStateException`为`NoSuccessfulMatchException`，则应该能够理解当前设计如何强制查询一致性并鼓励用户使用具有在询问时已定义的语义的查询。

**TL;DR**：询问生物体死亡的具体原因有什么价值？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T09:31:06.153

您需要检查`matcher.matches()`. `true`找到匹配时它将返回，`false`否则。

```
if (matcher.matches()) {
    System.out.println(matcher.group("foo"));
    System.out.println(matcher.group("bar"));
} 
```

如果`matcher.matches()`没有找到匹配项并且您调用`matcher.group(...)`，您仍然会得到一个`IllegalStateException`. 这正是文档所说的：

> 匹配器的显式状态最初是未定义的；**在成功匹配之前**尝试查询它的任何部分将导致抛出 IllegalStateException。

`matcher.match()`返回时，`false`没有找到成功的匹配项，并且通过调用 example 来获取有关匹配项的信息没有多大意义`group()`。**

# swing - 为什么 JScrollPane 不对鼠标滚轮事件做出反应？

> ID：12911506
> 
> 赞同：15
> 
> 时间：2012-10-16T09:26:18.010
> 
> 标签：swing, events, mouseevent, jscrollpane

我有一个`JScrollPane`包含一个`BoxLayout`（页轴）的面板。

我的问题是 JScrollPane 对鼠标滚轮事件没有反应。要使其使用鼠标滚轮滚动，我需要在`JScrollBar`.

我找到了这个[线程](https://stackoverflow.com/questions/7202028/jscrollpane-mouse-wheel-area)，我没有`MouseMotionListener`or `MouseWheelListener`，只有`MouseListener`. 我认为我的问题来自这样一个事实，即我`JScrollPane`对`JPanel`包含其他面板本身的操作。因此，当鼠标位于其中的面板上时`JScrollPane`，似乎该面板消耗了该事件，而滚动面板从未见过该事件。

是否有*正确*的方法使滚动窗格的子级捕获的事件对此滚动窗格可见？

SSCCE：

![在此处输入图像描述](../Images/03a1614d5c65f19e013c5914b3a9c8c7.png)

这是一个简单的测试用例，试图显示我何时尝试在我的 Swing 应用程序中进行操作。

框架：

```
public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
        for (int i = 0; i < 50; i++) {
            jPanel1.add(new TestPanel());
        }
    }

private void initComponents() {
        jScrollPane1 = new javax.swing.JScrollPane();
        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setLayout(new javax.swing.BoxLayout(jPanel1,    javax.swing.BoxLayout.PAGE_AXIS));
        jScrollPane1.setViewportView(jPanel1);

        getContentPane().add(jScrollPane1, java.awt.BorderLayout.CENTER);

        pack();
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
           @Override
            public void run() {
                new NewJFrame().setVisible(true);
           }
        });
    }
} 
```

以及`TestPanel`定义：

```
public class TestPanel extends javax.swing.JPanel {

    public TestPanel() {
        initComponents();
    }

    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();

        jLabel1.setText("jLabel1");

        setBackground(new java.awt.Color(255, 51, 51));
        setLayout(new java.awt.BorderLayout());

        jLabel2.setText("TEST LABEL");
        jLabel2.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        add(jLabel2, java.awt.BorderLayout.PAGE_START);

        jTextArea1.setEditable(false);
        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jTextArea1.setFocusable(false);
        jScrollPane1.setViewportView(jTextArea1);

        add(jScrollPane1, java.awt.BorderLayout.CENTER);
   }
} 
```

似乎消耗了该`JTextArea`事件，因为当鼠标光标在其中时，使用滚轮的滚动不起作用。我必须将鼠标光标放在文本区域之外才能使其再次工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T11:57:56.540

沃尔特打败了我来分析这个问题:-)

添加一点细节：

JScrollPane 支持 mouseWheelHandling 是正确的。根据 mouseEvent 调度规则，最顶层（按 z 顺序）的组件获取事件，即 textArea 周围的 scrollPane。因此，如果不需要滚动 textarea，一个简单的解决方案可能是在其 scrollPane 中禁用滚轮支持。JScrollPane 甚至有 api 来做这件事：

```
scrollPane.setWheelScrollingEnabled(false); 
```

不幸的是，这不起作用。它不起作用的原因是此属性在最终调用 eventTypeEnabled 的事件调度链中没有影响：

```
case MouseEvent.MOUSE_WHEEL:
      if ((eventMask & AWTEvent.MOUSE_WHEEL_EVENT_MASK) != 0 ||
          mouseWheelListener != null) {
          return true;
      } 
```

如果安装了 mouseWheelListener，则返回 true - 这是由 BasicScrollPaneUI 无条件完成的，并且在 wheelEnabled 属性更改时*不会*被删除（ui 甚至不监听该属性......）另外，如果该属性是，侦听器什么也不做错误的。这些事实中至少有一个是错误，用户界面应该

*   根据 wheelEnabled 删除/添加侦听器
*   或：实现侦听器，以便它在链上发送事件（如 Walter 在他的示例中所做的那样）

第一个选项可以由应用程序代码处理：

```
scrollPane = new JScrollPane();
scrollPane.removeMouseWheelListener(scrollPane.getMouseWheelListeners()[0]); 
```

这有点像 hack（因为 bug 变通方法总是 :-)，生产代码必须听 wheelEnable 以在需要时重新安装，并听 LAF 更改以更新/重新删除由 ui 安装的侦听器。

通过对 JScrollPane 进行子类化并在 wheelEnabled 为 false 时将事件分派给父级，在轻微修改中实现第二个选项（关于 Walter 的调度）：

```
scrollPane = new JScrollPane() {

    @Override
    protected void processMouseWheelEvent(MouseWheelEvent e) {
        if (!isWheelScrollingEnabled()) {
            if (getParent() != null) 
                getParent().dispatchEvent(
                        SwingUtilities.convertMouseEvent(this, e, getParent()));
            return;
        }
        super.processMouseWheelEvent(e);
    }

};
scrollPane.setWheelScrollingEnabled(false); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T11:00:56.240

鼠标滚轮事件被文本区域周围的滚动窗格占用。您可以尝试手动将事件传递给父滚动窗格，如下所示：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TestScrollPane2 {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                // might want to use a http://tips4java.wordpress.com/2009/12/20/scrollable-panel/
                JPanel panel = new JPanel(new GridLayout(0, 1));
                for (int i = 0; i < 10; i++) {
                    panel.add(new JScrollPane(new JTextArea(3, 40)) {
                         @Override
                        protected void processMouseWheelEvent(MouseWheelEvent e) {
                            Point oldPosition = getViewport().getViewPosition();
                            super.processMouseWheelEvent(e);

                            if(getViewport().getViewPosition().y == oldPosition.y) {
                                delegateToParent(e);
                            }
                        }

                        private void delegateToParent(MouseWheelEvent e) {
                            // even with scroll bar set to never the event doesn't reach the parent scroll frame
                            JScrollPane ancestor = (JScrollPane) SwingUtilities.getAncestorOfClass(
                                    JScrollPane.class, this);
                            if (ancestor != null) {
                                MouseWheelEvent converted = null;
                                for (MouseWheelListener listener : ancestor
                                        .getMouseWheelListeners()) {
                                    listener.mouseWheelMoved(converted != null ? converted
                                            : (converted = (MouseWheelEvent) SwingUtilities
                                                    .convertMouseEvent(this, e, ancestor)));
                                }
                            }
                        }
                    });
                }
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(new JScrollPane(panel));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# html - Favicon 在 Internet Explorer 中不起作用（任何版本）

> ID：12911510
> 
> 赞同：1
> 
> 时间：2012-10-16T09:26:27.860
> 
> 标签：html, internet-explorer, favicon

[我的网站](http://www.sfmgroupsales.com/)。

我在 Stack Overflow 和各种论坛上尝试了很多东西，但似乎无法正常工作。它适用于所有其他浏览器，但不适用于 IE（任何版本）:( 帮助！我正在为这个而烦恼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:33:17.943

是的，正如 Michal 所说，您可以轻松找到它：

```
<link rel="shortcut icon" type="image/x-icon" href="http://www.yoursite.com/images/favicon.png"> 
```

# html - 画布缩小图像质量损失

> ID：12911514
> 
> 赞同：1
> 
> 时间：2012-10-16T09:26:38.753
> 
> 标签：html, canvas, html5-canvas

我编写了一个用于缩放画布图像的代码，但如果尝试多次缩放图像，图像质量就会发生变化。这是我使用 canvas2image 插件的代码，我正在将画布转换为普通图像。

任何人都可以建议我做错什么吗？

```
function imgZoom(operation) {
    var zoomImageObj = document.getElementById("originalImage");
    var zoomedCanvas = $("#zoomCanvasPreview")[0];
    var zoomedContext = zoomedCanvas.getContext("2d");

    var selectedImgWidth = $('#originalImage').width();
    var selectedImgHeight = $('#originalImage').height();

    $("#zoomCanvasPreview").attr("height", selectedImgHeight);
    $("#zoomCanvasPreview").attr("width", selectedImgWidth);

    var previewHeight = $("#zoomCanvasPreview").height();
    var previewWidth = $("#zoomCanvasPreview").width();

    var zoomFactor = $("#zoomFactor option:selected").val();

    // Making the zoomfactor string as float point then parsing for addition

    // zoomFactor values if user selected 5%(0.05), 10%(0.1), 15(0.15) &etc
    var zoomPercent = 1 + parseFloat(zoomFactor);

    if(operation == 'zoomIn') {
        newZoomWidth = Math.round(previewWidth *  zoomPercent) ;
        newZoomHeight = Math.round(previewHeight *  zoomPercent) ;
    } else if(operation == 'zoomOut'){
        newZoomWidth = Math.round( previewWidth / zoomPercent );
        newZoomHeight = Math.round( previewHeight / zoomPercent );
    }

    if( (newZoomWidth >= 0) && (newZoomHeight >= 0) )
    {
        $("#zoomCanvasPreview").attr("width", newZoomWidth);    
        $("#zoomCanvasPreview").attr("height", newZoomHeight);

        // Drawing the image to canvas
        zoomedContext.drawImage(zoomImageObj, 0, 0, imgWidth, imgHeight, 0, 0, newZoomWidth, newZoomHeight );

        //return canvas.toDataURL("image/png");
        var zoomedCanvas = $("#zoomCanvasPreview")[0];

        oImgConvertExt = Canvas2Image.saveAsPNG(zoomedCanvas, true);
        $("#originalImage").attr("src", oImgConvertExt.src);
        $("#originalImage").attr("style", "display: none; visibility: hidden; width: "+newZoomWidth+"px; height: "+newZoomHeight+"px;");
    } else {
        alert("Reached maximum zoom out limit");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T09:17:18.977

图像质量不会改变如果您使用 .SVG 格式的图像，即使您放大或缩小这些图像也不会失真

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T12:06:12.910

如果您使用`canvas.drawImage()`.

只需通过更改 CSS`width`和`height`值进行缩放。这样就不会有任何质量损失。

编码也简单多了...

# windows-phone-7 - 诺基亚 Lumia 800 上的 WP7 XNA 音乐和声音问题

> ID：12911517
> 
> 赞同：1
> 
> 时间：2012-10-16T09:26:51.063
> 
> 标签：windows-phone-7, xna-4.0, soundeffect

我几乎完成了为 Windows Phone 7 操作系统开发我的第一个游戏。不幸的是，我遇到了一个相当讨厌的问题。同时播放背景音乐和音效的简单任务会在音效播放中造成严重失真，整体效果很糟糕。这是声音从手机扬声器中传出的时候。

但是，如果我使用耳机，所有问题都会消失（即，没有任何失真）。我也在 HTC HD7 上使用相同的代码，但在扬声器或耳机上都没有看到问题。

音效是 MP3 @ 48kbps，音乐也是 MP3 @ 96 kbps。

我所做的就是：

在加载内容中：

```
backgroundMusic = Content.Load<Song>("Music");
soundEffect = Content.Load<SoundEffect>("SoundEffect");
soundInst = soundEffect.CreateInstance(); / I am using a SoundEffectInstance to play the sound effect

MediaPlayer.Play(backgroundMusic);
MediaPlayer.IsRepeating = true; 
```

最后，我只是发出一个 soundInst.Play()。

但是，如果我不播放任何音乐，则音效播放得很好。

同样，这似乎只发生在我的诺基亚 Lumia 800 上，因为在 HTC HD7 上似乎没问题。然而，有趣的是，在我在 Lumia 800 上玩的大多数游戏中，我都没有注意到这个音乐/音效问题（我只在另一个游戏中注意到了它）。

我也尝试过用音量播放，但没有帮助。即使音乐的音量为 0，也无法正确播放音效。

总之，当且仅当我完全停止播放音乐时，无论音量如何，音效都会正确播放。

有任何想法吗？

提前致谢！

# android - 如何处理 TabActivity 子活动的后按？

> ID：12911524
> 
> 赞同：0
> 
> 时间：2012-10-16T09:27:07.357
> 
> 标签：android, tabs, tabactivity

我正在实现 Tab 环境如下：

有一类`TabScreenABCActivity extends TabActivity`，我已经处理了tabchange功能。

我已经实施了`MyTabGroupActivity extends TabGroupActivity`。在这堂课上，我这样称呼 MyActivity ：

```
startChildActivity(getResources().getString(R.string.MyActivity), new Intent(this,MyActivity.class)); 
```

现在，`MyActivity extends TabGroupActivity`从这个类中，我使用意图调用了另外两个类，如下所示：

```
Intent intent=new Intent();
intent.setClass(MyActivity.this,XYZActivity.class);
TabGroupActivity tab = (TabGroupActivity) MyActivity.this.getParent();
tab.startChildActivity("Tab", intent); 
```

`onBackPressed()`我还重写了在每个活动中返回 Activity方法的方法。但它不能正常工作。谁能指导我如何处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:07:47.790

这是您设备的硬后退按钮的代码。在这里把你的意图。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

             Intent i = new Intent(Activity1.this,Activity2.class);
                 startActivity(i);  

            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:33:08.810

您可以参考以下链接以获得完美的 TabGroupActivity [在单个选项卡下处理多个活动](http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html)

# php - 有什么方法可以从字段以特定字符/数字结尾的 MySQL 表中进行选择？

> ID：12911526
> 
> 赞同：2
> 
> 时间：2012-10-16T09:27:09.253
> 
> 标签：php, mysql

我希望运行一个mysql_query，如果某个字段以数字结尾，我可以在其中选择一行。例如：

```
<?php
$query = mysql_query("SELECT id FROM table WHERE [ID ENDS IN 0]");
$query = mysql_query("SELECT id FROM table WHERE [ID ENDS IN 1]");
$query = mysql_query("SELECT id FROM table WHERE [ID ENDS IN 2]");
$query = mysql_query("SELECT id FROM table WHERE [ID ENDS IN 3]");
//and so on...
?> 
```

有没有办法做到这一点？任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:29:18.760

```
SELECT ...
  WHERE somefield LIKE '%1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:30:04.087

SELECT id FROM table WHERE mod(id, 10) = 1

搏一搏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:29:45.187

```
SELECT id
  FROM table
 WHERE id LIKE '%0' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T09:43:51.773

如果您需要查找字段是否以数字结尾，您可以使用正则表达式，如下所示

```
SELECT id FROM table WHERE id REGEXP '[0-9]$' 
```

希望能帮助到你...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T09:32:49.890

您可以使用强制转换和 LIKE 来做到这一点，但是对于任何不重要的数据量，性能可能会很糟糕（我没有在您的特定情况下进行测试，但根据我的经验，转换为字符串以便您可以使用字符串操作确实会减慢查询速度）。

更好的方法是使用模数。

例如，要获取数字字段以 4 结尾的所有行：

```
SELECT *
FROM table
WHERE MOD(column_of_interest, 10) = 4 
```

同样，我没有对此进行基准测试，但它可能会比铸造表现更好。

当然，如果列类型已经是字符串，那么 LIKE 是可行的方法，因为在字符串上使用 MOD 也需要强制转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T09:34:29.060

您可以使用 LIKE 和通配符表达式，它应该类似于

```
SELECT id FROM table WHERE id REGEX '%0$'
SELECT id FROM table WHERE id REGEX '%1$' 
```

等等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-20T08:42:17.170

```
SELECT id FROM table WHERE id REGEXP '1[[:>:]]' 
```

# android - cpp中的类变量初始化

> ID：12911527
> 
> 赞同：2
> 
> 时间：2012-10-16T09:27:12.247
> 
> 标签：android, c++

我有这样的课，

```
class CLv
{
public:
    BOOL operator == (const CLv& lv) const
    {
        return _value == lv._value && _fStart == lv._fStart;
    }
    BOOL operator != (const CLv& lv) const
    {
        return _value != lv._value || _fStart != lv._fStart;
    }
    BYTE    _value;             
    BYTE    _fStart :1;         
}; 
```

那么，下面的代码段是什么意思呢？

```
CLv        lvEnd = {0,0}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:28:26.710

这意味着`lvEnd`type的变量使用和的值对其成员和进行`CLv`初始化。`0``0``_value``_fStart`

您的课程是一个聚合：

### 8.5.1 聚合 [dcl.init.aggr]

> 1) 聚合是一个数组或类（第 9 条），没有用户提供的构造函数（12.1），没有用于非静态数据成员的大括号或均衡器（9.2），没有私有或受保护的非静态数据成员（第 11 条），没有基类（第 10 条），也没有虚函数（10.3）。

并且可以列表初始化：

### 8.5.4 列表初始化[dcl.init.list]

> 1) 列表初始化是从花括号初始化列表初始化对象或引用。这样的初始化器称为初始化器列表，列表中以逗号分隔的初始化器子句称为初始化器列表的元素。[...]

# iphone - 如何使用 ASIHttpRequest 创建请求，如下所示？

> ID：12911529
> 
> 赞同：1
> 
> 时间：2012-10-16T09:27:17.863
> 
> 标签：iphone, ios, networking, youtube, asihttprequest

我正在使用 YouTube 可恢复上传： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads#Sending_a_Resumable_Upload_API_Request](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads#Sending_a_Resumable_Upload_API_Request)

我无法使用 ASIHttpRequest 创建请求，如下所示。如何让它发挥作用？谢谢！任何帮助将不胜感激！

(1)

```
POST /resumable/feeds/api/users/default/uploads HTTP/1.1
Host: uploads.gdata.youtube.com
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=adf15ee97731bca89da876c...a8dc
Content-Length: 0
Slug: my_file.mp4 
```

(2)

```
POST /resumable/feeds/api/users/default/uploads HTTP/1.1

Host: uploads.gdata.youtube.com

Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=adf15ee97731bca89da876c...a8dc
Content-Length: 1941255
Slug: my_file.mp4
Content-Type: application/atom+xml; charset=UTF-8

<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:media="http://search.yahoo.com/mrss/"
  xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <media:group>
    <media:title type="plain">Bad Wedding Toast</media:title>
    <media:description type="plain">
      I gave a bad toast at my friend's wedding.
    </media:description>
    <media:category
      scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People
    </media:category>
    <media:keywords>toast, wedding</media:keywords>
  </media:group>
</entry> 
```

这是我的 (2) 代码，请求完成且没有错误，但 responseData 为空。我不知道为什么！

```
 NSURL *uploadUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads"]];
    ASIFormDataRequest *theRequest = [ASIFormDataRequest requestWithURL:uploadUrl];

    NSString *xmlStr = [NSString stringWithFormat:@"<?xml version=\"1.0\"?>\n"
                        @"<entry xmlns=\"http://www.w3.org/2005/Atom\"\n"
                        @"xmlns:media=\"http://search.yahoo.com/mrss/\"\n"
                        @"xmlns:yt=\"http://gdata.youtube.com/schemas/2007\">\n"
                        @"<media:group>\n"

                        //Title
                        @"<media:title type=\"plain\">%@</media:title>\n"
                        //Description
                        @"<media:description type=\"plain\">\n"
                        @"%@\n"
                        @"</media:description>\n"
                        //Category
                        @"<media:category\n"
                        @"scheme=\"http://gdata.youtube.com/schemas/2007/categories.cat\">Entertainment\n"
                        @"</media:category>\n"
                        //Keywords
                        @"<media:keywords>Camera,PowerCam</media:keywords>\n"

                        @"</media:group>\n"
                        @"</entry>\n",        @"PowerCam.mov",@"description" ];

    [theRequest setTimeOutSeconds:60];
    [theRequest addRequestHeader:@"Authorization"   value:[NSString stringWithFormat:@"Bearer %@",_oauth.accessToken]];
    [theRequest addRequestHeader:@"GData-Version"   value:@"2"];
    [theRequest addRequestHeader:@"X-GData-Key"     value:[NSString stringWithFormat:@"key=%@", YouTuDevkey]];
    [theRequest addRequestHeader:@"Content-Length"  value:[NSString stringWithFormat:@"%d",xmlStr.length]];
    [theRequest addRequestHeader:@"Slug"            value:@"PowerCam.mov"];  
    [theRequest addRequestHeader:@"Content-Type"    value:@"application/atom+xml; charset=UTF-8"];

    [theRequest appendPostData:[xmlStr dataUsingEncoding:NSUTF8StringEncoding]];
    [theRequest setUploadProgressDelegate:self];
    theRequest.delegate = self;
    theRequest.tag = eWSKYouTubeSharerUploadingVideoMetadata;
    self.requestTag = eWSKYouTubeSharerUploadingVideoMetadata;
    self.request = theRequest;
    [[ASIManager manager] addRequest:theRequest];
    [[ASIManager manager] startQueue]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:48:04.667

有关如何使用它的信息，请参阅[ASIHTTPRequest how-to](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。粗略地说，你会有这样的东西：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request addRequestHeader:@"X-GData-Key" value:@"adf15ee97731bca89da876c...a8dc9"];
// add the other special headers as well
NSString *xmlBody = // create the XML data in the body
[request appendPostData:[xmlBody dataUsingEncoding:NSUTF8StringEncoding]];
[request startSynchronous]; 
```

假设您想从后台线程执行同步请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:46:27.010

以下示例显示了对上传视频元数据以进行可恢复上传的请求的示例 API 响应：

```
HTTP/1.1 200 OK
Location: http://uploads.gdata.youtube.com/resumableupload/AF8GKF...0Glpk0Aw
Date: Fri, 04 Dec 2009 16:14:30 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html 
```

代码工作正常。“位置” url 在标题中，而不是在正文中，因此 responseData 为空:)

# .net - 在 DataBind() 之后，Gridview 中不会触发 Text Changed 事件

> ID：12911535
> 
> 赞同：1
> 
> 时间：2012-10-16T09:27:47.953
> 
> 标签：.net, events

我们在页面上有一个带有选择文本框的 gidview，每个文本框都有一个 TextChanged 事件，用于更新它在数据库中的相应值。

该页面包含一个按钮，按下该按钮会导致回发，并且会触发文本更改事件，一切正常。

当下拉列表中的选定索引发生更改时，网格会反弹，但不会触发文本更改事件。

网格也在按钮单击事件中反弹，但似乎文本更改事件在按钮单击之前触发，但所选索引事件在文本更改事件之前触发，我认为重新绑定网格导致文本更改事件被忽略或从控件中删除。

任何人都可以阐明这个问题。当用户四处导航时，网格需要自动保存。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:36:21.560

重新绑定网格会丢失嵌入在网格中的控件的所有事件。因此，当您在网格中绘制文本框时，您必须在该点添加事件处理程序。您必须在数据绑定上重新创建事件处理程序才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T17:03:39.997

您在页面生命周期中受到时间安排的影响，其中一件事发生在另一件事之前，当您期望\希望它们以不同的顺序发生时。我的解决方法是在 SelectedIndexChanged 事件中翻转一个布尔标志，然后在页面完全加载并且所有事件都已触发后，在 OnLoadCompleted 中处理该事件。我想有一个更好的答案，但这为我解决了。

```
#region Fields
private bool switchFirstDataRow_ = false;
#endregion Fields

#region Events
protected void ddlFirstRowOfData_SelectedIndexChanged(object sender, EventArgs e)
{
    // NOTE: Moved the handling of these changes to OnLoadComplete because the grid view load\events were not firing
    // ......until after these events had alreadyc completed, resulting in grid view changes not saving
    switchFirstDataRow_ = true;
}

protected override void OnLoadComplete(EventArgs e)
{
    base.OnLoadComplete(e);

    // NOTE: Moved the handling of these changes here because the grid view load\events were not firing
    // ......until after these events had already completed, resulting in grid view changes not saving

    // Apply pending first data row changes
    if (switchFirstDataRow_)
    {
        // Do something here to respond to event...
        Controller.SetFirstRowOfData(ddlFirstRowOfData.SelectedIndex + 1);

        // Re-bind the grid
        gvImportConfiguration.DataBind();
    }
}
#endregion Events 
```

# php - 带有特殊字符的 Json_decode

> ID：12911536
> 
> 赞同：16
> 
> 时间：2012-10-16T09:27:58.493
> 
> 标签：php, jquery, json, codeigniter

我通过 jQuery Ajax 将数据作为 JSON 发布到我的服务器时遇到了一个大问题。JSLint 表示数据正常，请求的 Content-Type 设置为`application/x-www-form-urlencoded; charset=UTF-8`. 服务器在 PHP 5.2.11 上运行，所以我不能使用`json_last_error()`.

我尝试了 url_decode、utf8_decode 和 html_entities_decode，但似乎没有任何效果。

`var_dump(json_decode($jdata));`返回null，但如果我执行`var_dump($jdata)`一切看起来都不错。`$jdata`是帖子数据：`$jdata = $this->input->post('requestdata');`。

这里有一些来自 Firebug 的示例帖子数据抓取：

```
{
    "projectnumber": "345",
    "projecdescription": "345",
    "articles": [
        {
            "position": 1,
            "article_id": 677,
            "online_text": "3 Behälter; Band I-III nach indiv. Stückliste, Sprache: DE - Sprache: de"
        },
        {
            "position": 2,
            "article_id": 678,
            "online_text": "2 Behälter; Band I-III nach indiv. Stückliste, Sprache: ### - Sprache: en"
        }
    ]
} 
```

编辑：

我现在试过了：

```
$string = $this->input->post('requestdata');
var_dump($string);
$json = preg_replace('/,\s*([\]}])/m', '$1', utf8_encode($string));
$json = json_decode($json);
var_dump($json); 
```

结果是：

> string(338) "{"projectnumber": "4444", "projecdescription": "4444", "articles": [{"position":1, "article_id": 676, "online_text": "### Behälter; Band I-III nach indiv. Stückliste, Sprache: DE - Sprache: de"}, {"position":2, "article_id": 681, "online_text": "### Behälter; Band I-III nach indiv. Stückliste, Sprache: ### - Sprache: en"}]}" NULL

通过将 JSON 字符串直接粘贴到 PHP 源代码中，它可以工作，但不能从帖子中获取！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T10:29:53.963

由于字符串中的新行，您遇到错误

```
$string = '{"projectnumber" : "4444","projecdescription" : "4444", "articles" : [{"position":1, "article_id" : 676, "online_text" : "### Behälter; Band I-III nach indiv. Stückliste, Sprache: DE 
 - Sprache: de"},{"position":2, "article_id" : 681, "online_text" : "### Behälter; Band I-III nach indiv. Stückliste, Sprache: ### 
 - Sprache: en"}]}';

$string = preg_replace("/[\r\n]+/", " ", $string);
$json = utf8_encode($string);
$json = json_decode($json);
var_dump($json); 
```

输出

```
object(stdClass)[1]
  public 'projectnumber' => string '4444' (length=4)
  public 'projecdescription' => string '4444' (length=4)
  public 'articles' => 
    array
      0 => 
        object(stdClass)[2]
          public 'position' => int 1
          public 'article_id' => int 676
          public 'online_text' => string '### BehÃ¤lter; Band I-III nach indiv. StÃ¼ckliste, Sprache: DE   - Sprache: de' (length=78)
      1 => 
        object(stdClass)[3]
          public 'position' => int 2
          public 'article_id' => int 681
          public 'online_text' => string '### BehÃ¤lter; Band I-III nach indiv. StÃ¼ckliste, Sprache: ###   - Sprache: en' (length=79) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-30T23:22:03.713

也为换行投票

json_decode_nice + 保留换行符：

```
function json_decode_nice($json, $assoc = TRUE){
    $json = str_replace("\n","\\n",$json);
    $json = str_replace("\r","",$json);
    $json = preg_replace('/([{,]+)(\s*)([^"]+?)\s*:/','$1"$3":',$json);
    $json = preg_replace('/(,)\s*}$/','}',$json);
    return json_decode($json,$assoc);
} 
```

如果您想保留换行符，只需转义斜线即可。

如果所有内容都设置为 utf-8（标头、数据库连接等），则不需要 utf-8 编码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-21T17:46:32.377

```
$string = preg_replace("/[\r\n]+/", " ", $string);
$json = utf8_encode($string);
$json = json_decode($json);
var_dump($json); 
```

# iphone - 带有回调的 NSRegularExpression

> ID：12911538
> 
> 赞同：0
> 
> 时间：2012-10-16T09:28:05.180
> 
> 标签：iphone, ios, nsregularexpression

我必须对 iOS App 上的 HTML 文件进行动态替换。

这是关于本地化的。

在 HTML 文件中，我有如下内容： LANG(183) 必须转换为“本地化字符串”

我正在查看 stringByreplacingMatchesInString 但找不到任何接受回调函数的版本？我想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:56:19.300

您可以使用基于块的匹配方法`NSRegularExpression`：

```
NSMutableString *newString = [htmlString mutableCopy];
[regex enumerateMatchesInString:htmlString
                        options:0
                          range:NSMakeRange(0, [htmlString length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         // [result range] is the matching range.
                         // Do something with newString.
                     }
]; 
```

（据我所知）你不能`htmlString`在块内修改。因此，您必须首先创建一个可变副本，您可以在块中对其进行修改。

当然，您必须跟踪 的长度的变化`newString`，因为匹配范围将始终引用 `htmlString`。

# java - 为什么用 eCobertura 和 EclEmma 衡量代码覆盖率不同？

> ID：12911539
> 
> 赞同：0
> 
> 时间：2012-10-16T09:28:04.053
> 
> 标签：java, code-coverage, cobertura, eclemma

当使用 eCobertura 和 EclEmma 时。*我发现对于同一个*项目，每种情况下的代码覆盖率都不同。有兴趣知道为什么？

艾玛统计 ![EclEmma 统计](../Images/894581fa196ca4bc06b0625fd841c51e.png)

![eCobertura 统计](../Images/cbacf9019a44b27597a057bf668c58a6.png)

eCobertura 统计

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:18:19.777

一个因素可能是 EclEmma[没有正确测量异常处理代码的覆盖率](http://www.eclemma.org/faq.html#trouble02)——即它可能会告诉你代码没有被覆盖，而实际上它被执行了（例如，如果你使用调试器单步执行，代码确实被执行了）。这是底层 JaCoCo 库的限制。不知道 eCobertura 是否有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:26:07.247

在您附加的屏幕截图中，您将 EclEmma 配置为向您显示“指令计数器”，但 eCobertura 向您显示行和分支计数器。您[可以配置 EclEmma](http://www.eclemma.org/userdoc/coverageview.html)以显示“分支计数器”和“行计数器”。

# javascript - 是否可以让手风琴标题导航到新页面？

> ID：12911542
> 
> 赞同：0
> 
> 时间：2012-10-16T09:28:25.833
> 
> 标签：javascript, css, html, cordova

我想知道我是否可以在没有按钮感觉的情况下将手风琴的标题也设为按钮？这是手风琴标题的图片和里面的一些数据？我想单击标题中的文本以导航到页面...使用phonegap/cordova v1.9。Visual Studio 2010 express for windows phone/html,CSS,javascript (c#) 任何帮助都将不胜感激:) 无论如何我都对解决方案持开放态度，包括 jquery

![在此处输入图像描述](../Images/0bf41b38c2ab37176435de5407db5eb0.png)

标题是 *inboxentry1 POS556445*
我在一堆 div 中制作了手风琴，这些 div 堆叠在一起......告诉我是否必须添加其他任何东西来帮助解决问题！
这是手风琴的一些html！

```
 <div id="AccordionContainer" class="AccordionContainer"></div>
    <div onclick="runAccordion(1)">
      <div class="Accordiontitle" onselectstart="return false;">
        <input type="button" href="ItemPages.html">inbox entry1</input>
        <br/>
        <a>POS556446x</a>      
      </div>
    </div>
    <div id="Accordion1Content" class="AccordionContent" style="background-color:white; color:grey;">
      <form>
        <p>
          <label for="create" >Created by :</label>
          <input type="text" style="margin-left:60px;" size="22" id="create"/>
        </p>
        <p>
          <label for="createdate" >Created Date :</label>
          <input type="text" style="margin-left:43px;" size="22" id="createdate"/>
        </p>
        <p>
          <label for="process" >Process name :</label>
          <input type="text" style="margin-left:36px;" size="22" id="process"/>
        </p>
        <p>
          <label for="transtype">Transaction type :</label>
          <input type="text" style="margin-left:20px;" size="22" id="transtype"/>
        </p>
        <p>
          <label for="lastact">Last action :</label>
          <input type="text" style="margin-left:61px;" size="22" id="lastact"/>
        </p>
        <p>
          <label for="lastuser">Last user :</label>
          <input type="text" style="margin-left:73px;" size="22" id="lastuser"/> 
        </p>
        <p>
          <label for="lastupd">Last update :</label>
          <input type="text" style="margin-left:55px;" size="22" id="lastupd"/> 
        </p>
        <p>
          <label for="duration">Duration :</label>
          <input type="text" style="margin-left:78px;" size="22" id="duration"/> 
        </p>
        <p>
          <label for="saved">Saved :</label>
          <input type="text" style="margin-left:93px;" size="22" id="saved"/>
        </p>
        <p>
          <label for="adhoc">Ad hoc user :</label>
          <input type="text" style="margin-left:53px;" size="22" id="adhoc"/> 
        </p>
      </form>
    </div> 
```

这是我的 .js 文件

```
 var ContentHeight = 200;
  var TimeToSlide = 250.0;

  var openAccordion = '';

  function runAccordion(index) {
  var nID = "Accordion" + index + "Content";
  if (openAccordion == nID)
  nID = '';

  setTimeout("animate(" + new Date().getTime() + "," + TimeToSlide + ",'" + openAccordion + "','" + nID + "')", 33);

  openAccordion = nID;
  }

  function animate(lastTick, timeLeft, closingId, openingId) {
  var curTick = new Date().getTime();
  var elapsedTicks = curTick - lastTick;

  var opening = (openingId == '') ? null : document.getElementById(openingId);
  var closing = (closingId == '') ? null : document.getElementById(closingId);

  if (timeLeft <= elapsedTicks) {
  if (opening != null)
  opening.style.height = ContentHeight + 'px';

  if (closing != null) {
  closing.style.display = 'none';
  closing.style.height = '0px';
  }
  return;
  }

  timeLeft -= elapsedTicks;
  var newClosedHeight = Math.round((timeLeft / TimeToSlide) * ContentHeight);

  if (opening != null) {
  if (opening.style.display != 'block')
  opening.style.display = 'block';
  opening.style.height = (ContentHeight - newClosedHeight) + 'px';
  }

  if (closing != null)
  closing.style.height = newClosedHeight + 'px';

  setTimeout("animate(" + curTick + "," + timeLeft + ",'" + closingId + "','" + openingId + "')", 33);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:42:37.677

如果您想在单击输入字段时导航到其他页面，这里有一个简单的解决方法。只需将它绑定到这样的 mouseup-event （**需要 jQuery 实现**）：

**更新代码**

**HTML：**

```
 <input class="followThisRel" type="button" rel="http://yoursite.com/"> 
```

**JS：**

```
$(function() {
    $('input.followThisRel').on('click', function() {
        var url = $(this).attr('rel');
        window.location = url;
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:53:39.680

您可能想在此处进行一些更改。添加了一些类，并且由于不正确而更改了按钮标记。您想删除手风琴的内联事件并将其粘贴在下面的评论中。

```
<div class="AccordionRun">
  <div class="Accordiontitle" onselectstart="return false;">
    <input class="AccordionLink" type="button" href="ItemPages.html" value="inbox entry1">
    <br/>
    <a>POS556446x</a>      
  </div>
</div> 
```

然后你可以得到它并向它添加一个点击事件......

```
var goToPage = function(elem) {
    elem.onclick = function() {
        alert('Go to page...');
        window.location = elem.href;
    };
};

var runAccordion = function(elem) {
    elem.onclick = function() {
        alert('Run Accordion...');
        // Your accordion code goes here...
    }; 
};

var buttons = document.getElementsByTagName('input');
for(var i=0; i < buttons.length; i++) {
    if (buttons[i].className == 'AccordionLink') {
       goToPage(buttons[i]);             
    }
}

var divs = document.getElementsByTagName('div');
for(var i=0; i < divs.length; i++) {
    if (divs[i].className == 'AccordionRun') {
       runAccordion(divs[i]);             
    }
} 
```

jsfiddle.net/FKt4K/2

# jquery - 如果原始元素不存在于带有 jQ uery 的 DOM 中，那么选择后备元素的最有效方法是什么？

> ID：12911543
> 
> 赞同：0
> 
> 时间：2012-10-16T09:28:33.013
> 
> 标签：jquery, performance

在我正在编写的 jQuery 插件中，我想检查调用插件的 DOM 对象中的特定元素。代码看起来像这样：

```
//the object that you call the plugin on, stored in the variable "o"
o = this;

//Store children of a child element inside "o" in the variable "elInsideO"
elInsideO = o.find('selector').children('childrenSelector');

/* check if elInsideO is empty in case 'selector' is not present and then look for 
alternative element 'selector2' */
if (elInsideO.length == 0) {
    elInsideO = o.find('selector2').children('childrenSelector');
} 
```

有没有更有效的方法来进行这种选择？我能想到的另一种可能性是：

```
if (o.find('selector').length != 0) {
    elInsideO = o.find('selector').children('childrenSelector');
} else {
    elInsideO = o.find('selector2').children('childrenSelector');
} 
```

这些解决方案中哪一个更有效（意味着性能更好）？还有其他更好的方法吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:46:00.540

这两个代码片段做了不同的事情......如果`o.find('selector')`有元素但这些元素没有子元素，第一个方法将转到第二个选择器。然而，第二位代码将返回一组不存在的空子集。所以在这种情况下，问题不是哪个表现更好，而是哪个是正确的。:)

在您保证孩子的情况下，我会认为他们将与您将结果缓存`o.find('selector')`在变量中而不是在条件检查中并再次在结果中运行它几乎相同。在这两种情况下，你都是先做的`o.find('selector')`。在这两种情况下，如果它存在，那么你会得到孩子，所以时间会大致相同。

如果它不存在，那么第一个方法也会调用 children，但是在一个空的 jquery 对象上调用这个方法是很简单的。然后他们都继续做同样的事情。

第二组代码避免了一些多余的调用，否则你会注意到可以忽略不计的差异。

与往常一样，如果您认为这种性能真的很关键，那么请执行一些基准测试来测试您自己在使用它的情况下表现最好的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:02:06.433

好的，我终于第一次做了一些基准测试。我使用了 jsPerf。根据测试，效率最低的方法是：

```
elInsideO = o.find('selector').children('childrenSelector');
if (elInsideO.length == 0) {
    elInsideO = o.find('selector2').children('childrenSelector');
} 
```

我测试了另外三个给我相同结果的变体：

2：

```
if (o.find('selector').length != 0) {
    elInsideO = o.find('selector').children('childrenSelector');
} else {
    elInsideO = o.find('selector2').children('childrenSelector');
} 
```

3：

```
 if (o.find('selector').length != 0) {
    elParent = o.find('selector');
 } else {
    elParent = o.find('selector2');
 }
 elInsideO = stopsParent.children('childrenSelector'); 
```

4：

```
elParent = o.find('selector');
if (elParent.length == 0) {
    elParent = o.find('selector2');
}
elInsideO = elParent.children('childrenSelector'); 
```

2、3 和 4 都比第一个变体表现更好。尽管测试总是将这三个中的另一个声明为最好的，因此您无法确定其中哪个最好，但第一个总是表现最差。我更喜欢第四个变体，因为它将父元素存储在一个额外的变量中，所以我也可以将它用于其他目的，并且与变体 3 相比，我的代码行更少。

你可以在这里自己测试：

[http://jsperf.com/fallback-selection](http://jsperf.com/fallback-selection)

# jquery - jquery easy ui datagrid搜索不起作用

> ID：12911546
> 
> 赞同：0
> 
> 时间：2012-10-16T09:28:38.210
> 
> 标签：jquery, jquery-ui, search, datagrid

我这里有个小问题...

我有一个像这样的jquery easyui ...

```
function doSearch(){
            $('#dg').datagrid('load',{
                idCustomer: $('#idCustomer').val(),
                namaCustomer: $('#namaCustomer').val()
            });
        } 
```

然后像这样的html...

```
<table id="dg" title="Data Customer" class="easyui-datagrid" style="width:auto;height:500px;"  
        url="<?php echo $url;?>"  
        toolbar="#toolbar" 
        pageSize="20"
        rownumbers="true" fitColumns="true" singleSelect="true"
        pagination="true">  
    <thead>  
        <tr>  
            <th field="NoIDCust" width="50" sortable="true">ID Customer</th> 
            <th field="namaCustomer" width="50" sortable="true">Nama Customer</th>
            <th field="alamatCustomer" width="50" sortable="true">Alamat</th>
             <th field="telpCustomer" width="50" sortable="true">No Telepon</th>
             <th field="email" width="50" sortable="true">Email</th>
              <th field="area" width="50" sortable="true">Area</th>

        </tr>  
    </thead>  
</table>  
<div id="toolbar">  
    Nama : <input id="namaCustomer" style="line-height:16px;border:1px solid #ccc">  
    ID Customer :<input id="NoIDCust" style="line-height:16px;border:1px solid #ccc">  
    <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">Cari</a>  
    <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newCustomer()">Tambah Modul</a>  
    <a href="#" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editCustomer()">Edit Modul</a>  
    <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="removeCustomer()">Hapus Modul</a>  
</div> 
```

和一个 php 文件来处理这样的搜索功能......

```
$page = isset($_POST['page']) ? intval($_POST['page']) : 1;
    $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
    $sort = isset($_POST['sort']) ? strval($_POST['sort']) : 'idCustomer';  
    $order = isset($_POST['order']) ? strval($_POST['order']) : 'asc'; 

    $idCustomer = isset($_POST['idCustomer']) ? mysql_real_escape_string($_POST['idCustomer']) : '';
    $namaCustomer = isset($_POST['namaCustomer']) ? mysql_real_escape_string($_POST['namaCustomer']) : '';

    $offset = ($page-1)*$rows;

    $result = array();

    $where = "namaCustomer like '$namaCustomer%' and idCustomer like '$idCustomer%'";

    $rs = $db->query("select count(*) from customer where ". $where);
    $row = $rs->fetch(PDO::FETCH_NUM);
    $result["total"] = $row[0];

    $rs = $db->query("select * from customer where " . $where ." order by $sort $order limit $offset,$rows");

    $rows = array();
    while($row = $rs->fetch(PDO::FETCH_OBJ)){
    array_push($rows, $row);
    }
    $result["rows"] = $rows;

    echo json_encode($result); 
```

问题是……我的搜索功能不起作用……它返回的数据没有被搜索框功能过滤……所以这意味着就像第一次加载一样加载……

任何机构都可以帮助我？？

非常感谢之前..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:02:33.717

您只需要重新加载网格。doSearch 函数应该是这样的：

```
 function doSearch(){
        $('#dg').datagrid('load',{
            idCustomer: $('#idCustomer').val(),
            namaCustomer: $('#namaCustomer').val()
        });
        $('#dg').datagrid('reload');
    } 
```

# php - 如何从 php/mysql 为 DojoX 日历加载事件？

> ID：12911547
> 
> 赞同：0
> 
> 时间：2012-10-16T09:28:54.970
> 
> 标签：php, javascript, calendar, dojo

我想自定义 DojoX 日历小部件 ( [http://dojotoolkit.org/reference-guide/1.8/dojox/calendar.html](http://dojotoolkit.org/reference-guide/1.8/dojox/calendar.html) ) 以便从 php/mysql 动态加载事件。

我有一个存储事件的数据库表，并且在第一次初始化之后，应该再次检索事件（ajax 调用？）仅当我更改日历视图时，例如当我单击转到上/下个月时。所以我的问题是：我在哪里可以更改引用 Dojox 日历示例/文档页面的 JS 代码？为了在月份更改时调用（http post 或 get）PHP 文件并获取新的 JSON 数据集，我需要在 JS 代码中进行哪些更改？

我也读过这个帖子： [dojox.calendar 和 JsonRest - 如何更新？](https://stackoverflow.com/questions/12585051/dojox-calendar-and-jsonrest-how-to-update)

但：

1.  我需要一个包含 HTML、JS 和 PHP 代码的完整工作示例（即使是最小的）
2.  关于stackoverflow发布规则和网络礼仪，我无法在该线程上发布

我想有人已经开发了这种解决方案......

我希望有人可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:03:27.910

根据您有多少事件，您最初可以将每个事件加载到日历中，无论您滚动哪个月份/视图，这些事件都会出现。

到目前为止，如何从数据库后端加载事件的示例：

当然。干得好：

假设您的`php`文件（我们称它为`calendar-events.php`）从您的 mysql 表中返回以下事件数据，`JSON`格式如下：

```
{
    "items": [
        {
            "id":"0",
            "summary":"An event in the calendar",
            "calendar":"calendar1",
            "startTime":"1351756800",
            "endTime":"1351771200"
        }
    ]
} 
```

现在，创建检索数据的商店：

```
var calendarStore = new ItemFileWriteStore({
    url: "calendar-events.php",
    clearOnClose: true,
    urlPreventCache: true 
}); 
```

最后，将 store 设置为`calendar`并渲染`calendar`：

```
calendar = new Calendar({
            store: calendarStore,
            dateInterval: "month",
            region: "center",
            roundToDay: false,
            editable: false,
            decodeDate: function(s){
                    return new Date(s * 1000);
            },
            style: "position:absolute;left:10px;top:10px;bottom:10px;right:10px;",
            columnViewProps: {
                    minHours: 0,
                    maxHours: 24
            }
    }); 
```

# tabs - 使用带有“newInstance”的 ActionBarSherlock 启动 Fragment 时出现 ClassNotFoundException

> ID：12911549
> 
> 赞同：0
> 
> 时间：2012-10-16T09:29:08.430
> 
> 标签：tabs, android-fragments, actionbarsherlock

我正在转换 Android 4.x 代码以使用 ActionBarSherlock，以便我们的应用程序可以与 Gingerbread 兼容。

到目前为止一切顺利，但它无法启动片段的新实例。

我的 MainActivity 扩展了`SherlockFragmentActivity`implements `ActionBar.TabListener`。

代码在 case 为 0 时失败：

```
@Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            mFragmentProjects = ProjectsFragment.newInstance(position);
            return mFragmentProjects;                                                      
        case 1:
            mFragmentContacts = FragmentPeople.newInstance(position, 0);
            return mFragmentContacts;               
        }
        return ArrayListFragment.newInstance(position);
    } 
```

如果 case 为 0，它应该初始化片段，但我得到了这个异常： `ClassNotFoundException`. 我唯一的其他线索是：`PathClassLoader`它在“名称”中和“名称”中显示“这个”`android.app.ActionBar$TabListener`

我想这与 TabListener 或未正确包含/加载的库有关？**我已经清理了项目**。

片段 ProjectsFragment 扩展`SherlockListFragment`。

newInstance 非常严格：

```
static ProjectsFragment newInstance(int num) {
    ProjectsFragment f = new ProjectsFragment();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putInt("num", num);
    f.setArguments(args);

    return f;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:25:37.210

事实证明，虽然 MainActivity 没有引用 ActivityY，但 ActivityY 没有 SherlockFragment 代码这一事实使其失败。用不同的方式描述这一点：

MainActivity 使用 ProjectsFragment 这是一个列表当您单击 ProjectsFragment 中的列表时，它会调用 ListsActivity ListsActivity 引用 ItemsFragment

在 MainActivity 工作之前，我必须将 ItemsFragment 更改为 Sherlock 代码。当您使用分页器、选项卡和片段时，Java 似乎以某种方式“向前看”。

# wpf - 如何获得（lcd）显示器对角线的实际尺寸，即如果它是 17 英寸或 19 英寸或其他？

> ID：12911553
> 
> 赞同：4
> 
> 时间：2012-10-16T09:29:22.167
> 
> 标签：wpf, dpi, lcd, diagonal

这对我很有用，因为我必须在屏幕上映射具有正确尺寸的对象；如果我使用具有 1280x1024 分辨率和正常 96dpi 设置的 19 英寸液晶显示器，那么为了映射正确的 1 英寸正方形，我必须像这样编写一个 xaml

```
<Rectangle Name="one_inch_side_on_19_inch_diag_display" Height="86" Width="86" Fill="Blue"/> 
```

其中 Width 和 Height 设置为 86，因为

86 ~= 96（每英寸点数）* 17（英寸）/19（英寸）

因为 Windows 假定 17" 显示器上的 96dpi 作为计算尺寸的基础......谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:00:02.563

我在[www.c-sharpcorner.com上发现](http://www.c-sharpcorner.com)[了一个类似的问题](http://www.c-sharpcorner.com/forums/thread/127398/get-the-monitor-size.aspx)。它提供了以下代码

```
using System;
using System.Management;

class Test
{
    static void Main()
    {
       var searcher = new ManagementObjectSearcher("\\root\\wmi","SELECT * FROM WmiMonitorBasicDisplayParams");

       foreach(ManagementObject mo in searcher.Get())
       {
           double width = (byte)mo["MaxHorizontalImageSize"] / 2.54; 
           double height = (byte)mo["MaxVerticalImageSize"] / 2.54; 
           double diagonal = Math.Sqrt(width * width + height * height);
           Console.WriteLine("Width {0:F2}, Height {1:F2} and Diagonal {2:F2} inches", width, height, diagonal);            
       }

       Console.ReadKey();
    }
} 
```

我在有 2 个显示器的本地机器上对其进行了测试，它返回了几乎准确的结果。（我的 13 英寸屏幕为 12.70，24 英寸屏幕为 23.98。）

# java - 流式传输远程日志文件的有效方法

> ID：12911554
> 
> 赞同：2
> 
> 时间：2012-10-16T09:29:24.093
> 
> 标签：java, logging, remoting

我正在寻找一种方法来读取远程 unix 主机上快速增长的日志文件。
日志文件偶尔会得到一个日志开关（例如再次从 0 字节开始）。我不能直接在远程主机上处理日志文件的原因是处理器给主机施加了太多负载，这是绝对不能发生的。所以我需要在两个不同的主机上进行处理和读取。

由于我不熟悉 Java 世界，我想请教如何最好地实现这一点。

到目前为止我的想法：
让本地日志文件处理器（localhost）将日志文件读取器（java 二进制文件）scp 到远程主机并启动它（通过本地日志文件处理器启动的 ssh 连接）。然后日志文件读取器开始读取/跟踪日志文件并将其作为 TCP 流提供（然后可以由本地日志文件处理器读取）。

我很确定还有更优雅的 javastyle 方法。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T09:52:22.320

如果您可以在远程主机上运行 ssh，那么您可以使用

```
ssh <remote host> "tail -f <remote log file name>" > <local log file name> 
```

这会将写入远程日志文件名的任何内容重定向到本地文件名。如果远程文件被删除，您会收到一条消息，指出远程文件已被截断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:44:11.473

如果您需要在线阅读日志文件（即消息进入时），我建议检查通过 TCP 提供消息的方法，而不是（或另外）将它们写入文件。

如果远程应用程序使用日志框架，那么这通常只是配置中的几行。

这也将减少远程主机上的负载，因为它不再需要将任何数据写入磁盘。但这通常只有在远程进程大量访问磁盘以完成工作时才会出现问题。如果远程进程与数据库进行大量对话，这*可能*会适得其反，因为日志消息将与数据库查询竞争网络资源。

从积极的方面来说，这样可以更轻松地确保您最多处理每条日志消息（如果重新启动本地侦听器，您可能会丢失一些消息）。

如果那不可能，请`tail -f <logfile>`通过`ssh`（如 Vicent 在另一个答案中建议的那样）运行。[如果您](https://stackoverflow.com/questions/995944/ssh-library-for-java)不想使用`ProcessBuilder`.

当您阅读这些文件时，最艰巨的任务是确保您只处理每条日志消息一次（即您不会遗漏任何消息并且您不会两次处理它们）。根据日志轮换的工作方式以及远程进程如何创建日志文件，您可能会在切换它们时丢失几条消息。

如果您不需要在线处理（即查看昨天的消息就足够了），请尝试`rsync`复制远程文件夹。`rsync`非常擅长避免重复传输，并且可以正常工作`ssh`。这将为您提供您可以处理的所有日志文件的本地副本。当然，`rsync`处理活动日志文件的成本太高，所以这是您无法检查的文件（因此限制，只有在您不需要在线处理时才有可能*）*。

最后一个提示：尽量避免传输无用的日志消息。通常可以通过在传输之前使用非常简单的脚本过滤日志文件来多次减少负载。

# activerecord - 当 finder_sql 定义关系时急切加载关系 - 忽略 finder_sql 并构建默认的 has_many 查询

> ID：12911564
> 
> 赞同：4
> 
> 时间：2012-10-16T09:29:57.690
> 
> 标签：activerecord, ruby-on-rails-3.2, has-many, eager-loading

有一类叫`Location`. 我想在单个查询中预加载所有直接子级。

在`Location`类关系中定义如下：

```
has_many :children,
  class_name: self,
  finder_sql: ->(query) {
      self.class.where(%Q{"locations"."ancestry" like '%#{id}'}).to_sql
  },
  counter_sql: ->(query) {
    self.class.where(%Q{"locations"."ancestry" like '%#{id}'}).count.to_sql
  }

Location.first.children
  Location Load (0.4ms)  SELECT "locations".* FROM "locations" LIMIT 1
  Location Load (0.3ms)  SELECT "locations".* FROM "locations" WHERE ("locations"."ancestry" like '%1')
  => [#<Location id: 2, code: nil, name: "Niger 1349875728.873964", alternative_name: nil, ancestry: "1", coordinates: nil, ancestry_depth: 1>, (...)] 
```

但是当我想优化它并分两批加载所有内容时：

```
Location.includes(:children).where(id: [5, 100]).all
  Location Load (0.4ms)  SELECT "locations".* FROM "locations" WHERE "locations"."id" IN (5, 100)
  Location Load (0.2ms)  SELECT "locations".* FROM "locations" WHERE "locations"."location_id" IN ('5')
  ActiveRecord::StatementInvalid: PG::Error: ERROR:  column locations.location_id does not exist
  LINE 1: SELECT "locations".* FROM "locations"  WHERE "locations"."lo...
                                                 ^
  : SELECT "locations".* FROM "locations"  WHERE "locations"."location_id" IN ('5')
  from /xxx/.rvm/gems/ruby-1.9.3-p194@gsp/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1158:in `async_exec' 
```

这是 Rails 中的错误，还是我应该以不同的方式定义它？

我也试图在关系上覆盖 find_in_collection 但它没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T23:48:03.580

是的，你在那里与 Rails 的战斗有点过火了。在 has_many 上使用条件参数：

```
has_many :children, class_name: self, conditions: [%Q{"locations"."ancestry" like '%#{id}'}] 
```

也只是想知道 like 的使用吗？为什么不测试=？

```
has_many :children, class_name: self, foreign_key: :ancestry 
```

此外，如果你走那条路，那在风格上应该有一个 _id ：

```
has_many :children, class_name: self, foreign_key: :ancester_id 
```

# asynchronous - 在 OpenCL 中异步执行来自两个命令队列的命令

> ID：12911565
> 
> 赞同：1
> 
> 时间：2012-10-16T09:30:01.157
> 
> 标签：asynchronous, opencl

我正在尝试通过 OpenCL 开发一个可以同时利用 CPU 和 GPU 的应用程序。具体来说，我有两个内核，一个用于 CPU 执行，一个用于 GPU。CPU内核会改变一个缓冲区的内容，当GPU检测到缓冲区被CPU改变时，GPU会做其他事情。

```
__kernel void cpuKernel(__global uint * dst1,const uint size)
{
    uint tid  = get_global_id(0);
    uint size = get_global_size(0);

    while(tid < size)
    {
        atomic_xchg(&dst1[tid],10);

        tid += size;
    }
}

__kernel void gpuKernel(__global uint * dst1, __global uint * dst2, const uint size)
{
    uint tid = get_global_id(0);
    uint size = get_global_size(0);

    while(tid < vectorSize)
    {
        while(dst1[vectorOffset + tid] != 10)
            ;

        dst2[vectorOffset + tid] = dst1[vectorOffset+tid];
        tid += size;
    }
} 
```

如上所示，cpuKernel 会将 dst1 缓冲区的每个元素更改为 10，相应地，GPU 检测到此类更改后，会将元素值 (10) 分配到另一个缓冲区 dst2 的相同位置。cpuKernel 在与 CPU 设备关联的 command1 中排队，而 gpuKernel 在与 GPU 设备关联的 command2 中排队，两个命令队列已设置 CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE 标志。然后我做了两个案例：案例1：

```
clEnqueueNDRangeKernel(command2,gpuKernel);
clEnqueueNDRangeKernel(command1,cpuKernel);
clfinish(command1);
clfinish(command2); 
```

案例2：

```
clEnqueueNDRangeKernel(command1,cpuKernel);
clfinish(command1);
clEnqueueNDRangeKernel(command2,gpuKernel);
clfinish(command2); 
```

但结果表明，两种情况消耗的时间几乎相同，但我预计情况1会有一些重叠，但没有。谁能帮我？谢谢！

或者，谁能帮助解释如何在 OpenCL 中实现在两个设备上异步运行的两个内核？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:09:03.280

你问得太多了。您可能已经注意到，缓冲区对象与上下文相关，而命令队列与设备相关。如果内核对缓冲区对象进行操作，则相应的数据必须在此设备上。如果您不使用 clEnqueueWriteBuffer() 显式传输它，OpenCL 会为您执行此操作。

因此，如果您在一个设备（例如 CPU）上使用内核修改缓冲区对象，然后在另一个设备（例如 GPU）上修改，OpenCL 驱动程序将等待第一个内核完成，传输数据，然后运行第二个内核。

# mongodb - MongoDB C 驱动程序 - 构造一个 $ 或查询 BSON？

> ID：12911568
> 
> 赞同：1
> 
> 时间：2012-10-16T09:30:06.010
> 
> 标签：mongodb

我正在尝试在子例程中使用以下代码创建 $ 或 BSON 查询：

```
bson * outBson = bson_create();
bson_init(outBson);

    bson_append_start_object(outBson, "$query");
        bson_append_start_array(outBson, "$or");
            bson_append_int(outBson, "cpu", 2000);
            bson_append_int(outBson, "ram", 4096);
        bson_append_finish_array(outBson);
    bson_append_finish_object(outBson);

bson_finish(outBson);

bson_print(outBson); 
```

但我从 mongo_find() 返回的光标为 NULL。我试图转储连接 mongo->errstr 和 mongo->err 代码，它们都是空的和 0。

如果我取出 bson_append_start/finish_array()，基本上将其更改为 $and 查询，它就可以工作。（不幸的是 $and 不是我想要做的......）

如果有人能告诉我应该如何通过 C 驱动程序构建适当的复合查询 BSON，我将不胜感激。

在 Mongo shell 中，我的数据如下：

```
> db.test.find()
{ "_id" : ObjectId("507d20a72dfd5c5c2534d068"), "cpu" : 1600 }
{ "_id" : ObjectId("507d23602dfd5c5c2534d069"), "cpu" : 2000 }
{ "_id" : ObjectId("507d236c2dfd5c5c2534d06a"), "cpu" : 1666 }
{ "_id" : ObjectId("507d23712dfd5c5c2534d06b"), "cpu" : 2333 }
{ "_id" : ObjectId("507d254eef456cca26234013"), "cpu" : 2000, "ram" : 4096 }
> db.test.find( { $or : [ {"cpu" : 1666}, {"cpu" : 2000} ] } )
{ "_id" : ObjectId("507d23602dfd5c5c2534d069"), "cpu" : 2000 }
{ "_id" : ObjectId("507d236c2dfd5c5c2534d06a"), "cpu" : 1666 }
{ "_id" : ObjectId("507d254eef456cca26234013"), "cpu" : 2000, "ram" : 4096 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:51:20.627

好的，经过大量试验和查看源代码，我发现 bson_append_int( bson *b, const char *name, const int i ) 实际上并没有附加 int 类型的对象。

我用上述构造的 bson_print() 得到的是：

```
$or : 4      
    cpu : 16     2000
    ram : 16     4096 
```

图 4 和 16 分别显示它是一个 'array' 类型和 'int' 类型......即使 int 被命名（“cpu”和“ram”），它们也不是对象。

真正起作用的是提供一个不那么匿名的对象包装器，例如：

```
bson_init(outBson);

bson_append_start_array(outBson, "$or");

    bson_append_start_object(outBson, "0");
        bson_append_int(outBson, "cpu", 2000);
    bson_append_finish_object(outBson);

    bson_append_start_object(outBson, "1");
        bson_append_int(outBson, "ram", 4096);
    bson_append_finish_object(outBson);

bson_append_finish_object(outBson);

bson_finish(outBson); 
```

# java - 在 Android 原生应用中使用 3D HTML5 模型

> ID：12911570
> 
> 赞同：1
> 
> 时间：2012-10-16T09:30:19.273
> 
> 标签：java, android, html, 3d, native

我问自己是否有办法将一些 3D HTML5 模型集成到一些原生 Android 应用程序中？

这个想法是能够在应用程序内轻松地从 Java 切换到 HTML5 以及从 HTML5 切换到 Java。

在技​​术上可以做这样的事情吗？

# jodatime - 1893 年发生了什么？

> ID：12911576
> 
> 赞同：0
> 
> 时间：2012-10-16T09:30:47.887
> 
> 标签：jodatime

> **可能重复：**
> [01.04.1893 的 Joda DateTime 中的奇数结果](https://stackoverflow.com/questions/2420527/odd-results-in-joda-datetime-for-01-04-1893)

我对此有点困惑。这个日期和更早的日期的偏移量 53:28 是什么意思？

```
 DateTime epoch = new DateTime(0L);
 System.out.println(epoch.minusYears(76).minusMonths(9));
 System.out.println(epoch.minusYears(76).minusMonths(10));

 1893-04-01T01:00:00.000+01:00
 1893-03-01T01:00:00.000+00:53:28 
```

# android - 文件流上的资源泄漏警告

> ID：12911584
> 
> 赞同：0
> 
> 时间：2012-10-16T09:31:17.990
> 
> 标签：android, file-io, resource-leak

```
private void SaveLog(boolean externalStorage)
{
    String s = tv_log.getText().toString();
    File file;
    FileOutputStream fos;

    if ( externalStorage )
    {
        try
        {
            file = new File(getExternalFilesDir(null), FILE_LOG);
            fos = new FileOutputStream(file);  // Warning: Resource leak: 'fos' is never closed
        }
        catch(FileNotFoundException e)
        {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
            return;
        }
    }
    else
    {
        try
        {
            fos = openFileOutput(FILE_LOG, Context.MODE_PRIVATE);
        }
        catch(FileNotFoundException e)
        {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
            return;
        }
    }

    try
    {
        fos.write(s.getBytes());
        fos.close();
    }
    catch(IOException e)
    {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
        return;
    }
} 
```

为什么警告显示在行中`fos = new FileOutputStream(file)`？有趣的是，如果我删除`if ( externalStorage )`并只留下第一个分支，则不会显示警告：

```
private void SaveLog(boolean externalStorage)
{
    String s = tv_log.getText().toString();
    File file;
    FileOutputStream fos;

    try
    {
        file = new File(getExternalFilesDir(null), FILE_LOG);
        fos = new FileOutputStream(file);  // OK!
    }
    catch(FileNotFoundException e)
    {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
        return;
    }

    try
    {
        fos.write(s.getBytes());
        fos.close();
    }
    catch(IOException e)
    {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:58:50.937

我相信在您的特定情况下，没有任何资源泄漏的可能性，因为该行`fos = new FileOutputStream(file);`是组结束之前的最后一行`try`，如果您在这里有异常，则`fos`不会创建资源。

但是，如果您在该行之后有一个语句，该语句可能会产生异常，执行将移至以`catch`返回终止的组，而不会释放该`try`组中分配的资源。

避免警告的最简单方法是在 中添加以下内容`catch`：

```
catch(FileNotFoundException e) 
{ 
    try { if(fos != null) fos.close();} catch (Exception e2) {} //Add this line
    Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show(); 
    return; 
} 
```

这将确保在引发异常时释放资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:06:37.647

在每个 catch 块中，使用 . 关闭流`fos.close()`。

否则，程序可能会遇到 try 块，生成异常并转到 catch 块，而不会关闭流。这可能会导致错误。

# mysql - 学说级联删除查询？

> ID：12911586
> 
> 赞同：1
> 
> 时间：2012-10-16T09:31:22.810
> 
> 标签：mysql, zend-framework, orm, doctrine, doctrine-orm

我正在使用以下查询来删除我的数据库中的国家，但它给出了外键错误，因为国家与城市具有一对多的关系。

我正在使用以下查询：

```
$cd = 1;
Doctrine_Core::getTable('country')->find($cd)->delete(); 
```

如果国家/地区没有任何孩子，则此查询软删除，但如果国家/地区有任何城市，则会出错。

我还在国家模式中做了以下设置：

```
$this->hasMany('city', array(
'local' => 'id',
'foreign' => 'country_id',
'cascade' => 'delete'
)); 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:07:48.007

在 BaseCity.php 中，您应该与 Country 有关系。在：

```
$this->hasOne('Country', array(
... 
```

添加这一行：

```
"onDelete"=>"CASCADE" 
```

当您删除国家/地区时，城市也将被删除。如果你想保留它们，把

```
"onDelete"=>"SET NULL" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:54:27.020

我认为上述方法也是正确的，但我通过以下方式解决了它。

我像这样建立国家与城市的关系：

```
$this->hasMany('city', array(
     'local' => 'id',
     'foreign' => 'country_id',
    'cascade' => array(
     0 => 'delete',
     ))); 
```

在 YAML 文件中，我添加如下： cascade: [delete]

它奏效了。

# amazon-web-services - 根据列表扫描 dynamodb

> ID：12911597
> 
> 赞同：1
> 
> 时间：2012-10-16T09:32:03.510
> 
> 标签：amazon-web-services, amazon-dynamodb

我在 dynamodb 表中有一个字符串集属性，即 SS。我需要扫描数据库以检查任何一个项目列表中存在的值。

我应该使用哪个比较运算符进行此扫描？

例如数据库有这样的项目：

*   姓名
*   [电子邮件 1，电子邮件 2]
*   电话

我需要搜索包含特定电子邮件的项目，`email1`单独说不给出整个元组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:54:44.513

看来您正在寻找`CONTAINS`运营商`Scan`。它基本上相当于`in`Python 中的。

这就是说，如果您需要经常执行此操作，您可能应该对数据进行反规范化以使其更快。

例如，您可以像这样构建第二个表：

*   `hash_key`： 姓名
*   `range_key`： 电子邮件

当然，您必须自己维护此索引并手动查询。

# javascript - 构建从小到大的有序列表

> ID：12911599
> 
> 赞同：0
> 
> 时间：2012-10-16T09:32:16.543
> 
> 标签：javascript, jquery, cordova

我有以下硬编码的 JSON：

```
 var myData = [
                  {"Identifier":1,"Naam":"Van Der Valk","Adres":"Europaweg 218","Postcode":"1238AC","Plaats":"Zoetermeer","Longitude":"4.48822","Latitude":"52.06258", "Status":"Laadpunten Beschikbaar", "lunch":"true", "diner":"true", "meet":"true", "wifi":"true"},
                  {"Identifier":2,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000", "lunch":"false"},
                  {"Identifier":3,"Naam":"NOT Given","Adres":"NOT Given 6","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000", "lunch":"false"},
                  {"Identifier":4,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Den Haag","Longitude":"0.00000","Latitude":"0.00000", "lunch":"false"},
                  {"Identifier":5,"Naam":"plek b met lunch en diner","Adres":"NOT Given 218","Postcode":"0000LL","Plaats":"Zoetermeer","Longitude":"0.00000","Latitude":"0.00000", "lunch":"true", "diner":"true", "wifi":"true"}
                  ]; 
```

我在我的 ios phonegap 应用程序中使用的这个 json .. Json 中的每一行代码都是荷兰的一个点.. 我正在尝试构建一个函数来计算手机所在位置与 json 的纬度和经度之间的距离..最终这些json代码需要进入一个有序列表，其中距离也是从小到大..

对于距离测量，我使用了这个：

```
 function haversine() {
            $.each(myData, function(index, element) {
                   var R = 6371; // earth's mean radius in km

                   var dLat  = rad(element.Latitude - lat1);

                   var dLong = rad(element.Longitude - long1);

                   var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                   Math.cos(rad(lat1)) * Math.cos(rad(element.Latitude)) * Math.sin(dLong/2) * Math.sin(dLong/2);
                   var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                   var d = R * c;

                   //var element = document.getElementById('afstand');
                   //element.innerHTML = 'afstand: ' + d.toFixed(3);

                   $('.greenfluxlist').append('<li id="' + element.Identifier + '"><a href="Details.html?id=' + element.Identifier + '" rel="external">' + element.Naam + ' ' + element.Plaats +  '<p> <br/>' + element.Adres + ',<br/> ' + element.Postcode + ' ' + element.Plaats + '<br/> Status: ' + element.Status +  '</p> <span class="ui-li-count">' + d.toFixed(3) + '</span></a></li>');
                   });

            $('.greenfluxlist').trigger('create'); 
            $('.greenfluxlist').listview('refresh');

            //return d.toFixed(3);

        } 
```

我现在的问题是，如何构建有序列表，是否可以将所有内容放入数组中，然后循环遍历它或其他东西，我认为必须有一个简单的解决方案，但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:51:05.080

要对数组进行排序，请使用*sort*方法。

您应该先计算距离，然后对数组进行排序，然后生成列表。像这样的东西：

```
function calculateDistance(element)
{
    var R = 6371; // earth's mean radius in km

    var dLat  = rad(element.Latitude - lat1);
    var dLong = rad(element.Longitude - long1);

    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(rad(lat1)) * Math.cos(rad(element.Latitude)) * Math.sin(dLong/2) * Math.sin(dLong/2);
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
}

function generateList(data)
{
    for(var i=0; i<data.lenght; i++)
    {
        var element = data[i];
        //var element = document.getElementById('afstand');
        //element.innerHTML = 'afstand: ' + element.Distance.toFixed(3);

        $('.greenfluxlist').append('<li id="' + element.Identifier + '"><a href="Details.html?id=' + element.Identifier + '" rel="external">' + element.Naam + ' ' + element.Plaats +  '<p> <br/>' + element.Adres + ',<br/> ' + element.Postcode + ' ' + element.Plaats + '<br/> Status: ' + element.Status +  '</p> <span class="ui-li-count">' + element.Distance.toFixed(3) + '</span></a></li>');
    }
}

for(var i=0; i<myData.length; i++)
{
    myData[i].Distance = calculateDistance(myData[i]);
}

myData.sort(function(a,b) {
    return a.Distance > b.Distance;
});

generateList(myData); 
```

# ruby - ruby 中加号的 NoMethodError

> ID：12911602
> 
> 赞同：1
> 
> 时间：2012-10-16T09:32:26.067
> 
> 标签：ruby, ruby-1.8.7

我真的很陌生`ruby`。我创建了一个函数来计算字符串中单词的出现次数。但是，我一直在`NoMethodError`努力`+`。我搜索，尝试了不同的变体，但无法解决问题。这是代码：

```
def count_words(str)
    str_down = str.downcase
    arr = str_down.scan(/([\w]+)/).flatten
    hash = Hash[]
    arr.each {|x| hash[x] += 1 }
    (hash.sort_by {|key, value| value}.reverse)
end 
```

这是错误：

```
NoMethodError: undefined method `+' for nil:NilClass
    from ./***.rb:14:in `count_words'
    from ./***.rb:14:in `each'
    from ./***.rb:14:in `count_words'
    from (irb):137 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:34:51.680

改变

```
hash = Hash[]
arr.each {|x| hash[x] += 1 } 
```

到

```
hash = {}
arr.each {|x| hash[x] =0 unless hash[x]; hash[x] += 1 } 
```

或者

```
hash = Hash.new(0)
arr.each {|x| hash[x] += 1 } 
```

解释

```
hash = {}
hash[1] = "example1" #ASSIGNMENT gives hash = {1: "example1"}
p hash[2] #This gives `nil` by default, as key is not present in hash 
```

要为哈希中不存在的键提供默认值，我们必须执行以下操作：

```
 hash = Hash.new("new value")
   p hash #Gives {}
   p hash[4] #gives "new value" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:50:09.127

在第一次迭代中，h[x] 为 nil。尝试将 1 添加到 nil 会引发错误。将 h[x] 的初始值设置为 0 即可解决此问题。

```
arr.each {|x| hash[x]||=0; hash[x] += 1 } 
```

代替

```
arr.each {|x| hash[x] += 1 } 
```

# cuda - OpenACC：复杂循环对“*(*(b))”的依赖阻止了并行化

> ID：12911619
> 
> 赞同：1
> 
> 时间：2012-10-16T09:33:26.463
> 
> 标签：cuda, openacc, pgi-accelerator

我正在使用具有动态数组分配的 OpenACC。以下是我的分配方式：

```
float **a;
float **b;
float **c;
float **seq;
a=(float**)malloc(SIZE*sizeof(float*));
b=(float**)malloc(SIZE*sizeof(float*));
c=(float**)malloc(SIZE*sizeof(float*));
seq=(float**)malloc(SIZE*sizeof(float*));
for(i=0; i<SIZE; i++){
        a[i]=(float*)malloc(SIZE*sizeof(float));
        b[i]=(float*)malloc(SIZE*sizeof(float));
        c[i]=(float*)malloc(SIZE*sizeof(float));
        seq[i]=(float*)malloc(SIZE*sizeof(float));
} 
```

这是我如何并行矩阵添加：

```
#pragma acc kernels copyin(a[0:SIZE][0:SIZE],b[0:SIZE][0:SIZE]) copy(c[0:SIZE][0:SIZE])
        for (i = 0; i < SIZE; ++i) {
                for (j = 0; j < SIZE; ++j) {
                        c[i][j] = a[i][j] + b[i][j];
                }
        } 
```

当我用它编译这段代码时，`pgcc`它会检测循环迭代上对指针的依赖`float**`并生成所有标量内核（每块 1 个块 1 个线程），其性能不如预期：

```
 40, Complex loop carried dependence of '*(*(b))' prevents parallelization
     Complex loop carried dependence of '*(*(a))' prevents parallelization
     Complex loop carried dependence of '*(*(c))' prevents parallelization
     Accelerator scalar kernel generated
     CC 1.0 : 11 registers; 40 shared, 4 constant, 0 local memory bytes
     CC 2.0 : 22 registers; 0 shared, 56 constant, 0 local memory bytes 
```

循环显然是并行的，我认为编译器也可以检测到这一点。我很好奇如何解释它`pgcc`？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:53:16.703

我想我找到了答案。关键是使用`independent`子句：

```
 #pragma acc data copyin(a[0:SIZE][0:SIZE],b[0:SIZE][0:SIZE]) copy(c[0:SIZE][0:SIZE])
    {
             # pragma acc region 
             {
                    #pragma acc loop independent vector(16)
                    for (i = 0; i < SIZE; ++i) {
                            #pragma acc loop independent vector(16)
                            for (j = 0; j < SIZE; ++j) {
                                   c[i][j] = a[i][j] + b[i][j];
                            }
                    }
             }
    } 
```

# android - 相对布局和高度百分比。无法使用 layout_below 和 layout_weight

> ID：12911621
> 
> 赞同：5
> 
> 时间：2012-10-16T09:33:29.523
> 
> 标签：android, android-layout

我对 relativelayout 有一个问题，它的子级可以使用 layout_below 和 layout_weight 来设置其百分比高度。

例如，我们有一个相对布局，在其中我们有三个带有文本视图的线性布局。现在，我想为其中三个（线性布局）设置相对布局总高度的 25、50、25 %。我怎么能做到呢？

我找到了[weight_sum 和 relativelayout (CLICK)](https://stackoverflow.com/questions/6428747/android-can-i-use-layout-weight-to-position-relativelayout)的解决方案，但它不使用 layout_below。

我怎样才能解决这个问题？

我试图在所有线性布局中添加额外的线性布局，但后来我无法使用 layout_below。

这是概念图的想法：

![在此处输入图像描述](../Images/ba981cc242129dfbaef5869df0d0d0d2.png)

这是我的代码：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/linlay_leftcol_notification_header" >

    <LinearLayout
        android:id="@+id/linlay_leftcol_clock_theday"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/tv_theday"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/theday"
        android:textColor="#FFFFFF" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linlay_leftcol_clock_thetime"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linlay_leftcol_clock_theday" >

        <TextView
            android:id="@+id/tv_thetime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/thetime"
            android:textColor="#FFFFFF" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linlay_leftcol_clock_thenumber_themonth_theyear"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linlay_leftcol_clock_thetime" >

        <TextView
            android:id="@+id/tv_thenumberofday_themonth_theyear"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/thenumberofday_themonth_theyear"
            android:textColor="#FFFFFF" />
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T11:27:09.920

试试这个...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="#ff00ff"
    android:orientation="vertical">

    <RelativeLayout
        android:layout_weight="1"
        android:background="#ffff00"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/textView0"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Hello 1"
            android:textColor="#000000"
            android:textSize="15dp" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_weight="2"
        android:background="#00ffff"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Hello 2"
            android:textColor="#000000"
            android:textSize="15dp" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_weight="1"
        android:background="#ffff00"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Hello 3"
            android:textColor="#000000"
            android:textSize="15dp" />
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:59:08.087

看看这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight=".15"
        android:background="@android:color/background_dark"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/rel_1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#A52A2A" >

            <TextView
                android:id="@+id/tv_theday"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="1st layout"
                android:textColor="#FFFFFF" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/rel_2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#8B008B" >

            <TextView
                android:id="@+id/tv_theday"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="2ndlayout"
                android:textColor="#FFFFFF" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/rel_3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#00008B" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="3rd layout"
                android:textColor="#FFFFFF" />
        </RelativeLayout>
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/rel_side"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight=".75"
        android:background="#ff0000" >

        <TextView
            android:id="@+id/tv_theday"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="side layout"
            android:textColor="#FFFFFF" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:36:24.443

您可以使用权重或相对布局属性。您可以像这样制作 25,50,25 ...您将父级左对齐第一个 textview，对齐父级右对齐，其他 textview，其余的 textview 对齐第一个左侧和最后一个右侧.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:41:27.487

使用表格布局并在其中放置文本视图。表格布局有一个属性“拉伸列”。在那里你可以像这样将大小称为“0,2,1”......

# java - Log4j 以编程方式设置 SMTP 设置不完全工作

> ID：12911622
> 
> 赞同：0
> 
> 时间：2012-10-16T09:33:34.620
> 
> 标签：java, smtp, log4j

我正在使用 Log4j 发送有关错误的电子邮件日志，并希望在 java 中的 log4j 中设置 SMTP 设置，而不是在属性文件中。设置密码有效，我可以成功发送电子邮件

```
private static final Logger logger = Logger.getLogger("emailer");

(...)

Enumeration<?> enm = logger.getAllAppenders();
while (enm.hasMoreElements()) {
    Object element = enm.nextElement();
    if (element instanceof SMTPAppender) {
        ((SMTPAppender) element).setSMTPPassword(password);
    }
} 
```

但是，在 SMTPAppender 中使用其他设置器不会执行任何操作（设置主机、用户名等），并且 log4j 将继续使用属性文件的设置。

```
(...)

log4j.logger.emailer=stdout, email
log4j.additivity.emailer=false

log4j.appender.email=org.apache.log4j.net.SMTPAppender
log4j.appender.email.SMTPHost=smtp.gmail.com
log4j.appender.email.SMTPPort=465
log4j.appender.email.SMTPUsername=username@gmail.com
log4j.appender.email.SMTPPassword=-
log4j.appender.email.From=username@gmail.com
log4j.appender.email.to=username@gmail.com
log4j.appender.email.Subject=Error Alert
log4j.appender.email.layout=org.apache.log4j.PatternLayout
log4j.appender.email.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n
log4j.appender.email.BufferSize=10
log4j.appender.email.Threshold=ERROR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:45:10.437

更改名称或密码后，您似乎需要调用 activateOptions() 。

# android - 在 Android 4 中单击带有选项卡的 ActionBar 中的项目

> ID：12911624
> 
> 赞同：1
> 
> 时间：2012-10-16T09:33:46.967
> 
> 标签：android, tabs, android-actionbar

我正在使用带有三个选项卡的 ActionBar。我在 ActionBar 中也有一个项目。我想对单击这些项目做出反应，具体取决于所选选项卡。我怎样才能做到这一点？

我活动中的代码：

```
public class CreateProjectManually extends FragmentActivity implements ActionBar.TabListener {

    private static ArrayList<String> buildingList;
    private static ArrayList<String> roomList;
    private static ArrayList<String> deviceList;

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_project_manually);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        // set the app icon as an action to go home
        actionBar.setDisplayHomeAsUpEnabled(true); 
        //enable tabs in actionbar
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }
    }

    /**
     * Actionbar
     * */ 
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
        case R.id.menu_save:
            //TODO Speichern implementieren
            Toast.makeText(getBaseContext(), "Speichern",Toast.LENGTH_LONG).show(); 
            break;
        case R.id.menu_add:
            //TODO Eintrag hinzufügen implementieren
            if(getItem()==0){

            }
            break;
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, CreateProject.class);
            intent.putExtra("Uniqid","From_CreateProjectManually_Activity");
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
            return true;    
        default:
            break;
        }
      return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_create_project_manually, menu);
        return true;
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment building_fragment = new BuildingFragment();
            Fragment room_fragment = new RoomFragment();
            Fragment device_fragment = new DeviceFragment();
            Bundle args = new Bundle();
            switch(i){
            case 0:
                args.putInt(BuildingFragment.ARG_SECTION_NUMBER, i);
                building_fragment.setArguments(args);
                return building_fragment;
            case 1:
                args.putInt(RoomFragment.ARG_SECTION_NUMBER, i);
                room_fragment.setArguments(args);
                return room_fragment;
            case 2:
                args.putInt(DeviceFragment.ARG_SECTION_NUMBER, i);
                device_fragment.setArguments(args);
                return device_fragment;
            default: return null;
            }
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.building).toUpperCase();
                case 1: return getString(R.string.room).toUpperCase();
                case 2: return getString(R.string.devices).toUpperCase();
            }
            return null;
        }
    }

    /**
     * A fragment representing building structure
     */
    public static class BuildingFragment extends Fragment {
        public BuildingFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View view = inflater.inflate(R.layout.listviews, container, false);
            ListView listView = (ListView) view.findViewById(R.id.listviewfragment);

            buildingList = new ArrayList<String>();

            ListAdapter listenAdapter = new ArrayAdapter(getActivity(),
                    android.R.layout.simple_list_item_1, buildingList);

            // Assign adapter to ListView
            listView.setAdapter(listenAdapter); 

            return view;
        }
    }

    /**
     * A fragment representing room structure
     */
    public static class RoomFragment extends Fragment {
        public RoomFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View view = inflater.inflate(R.layout.listviews, container, false);
            ListView listView = (ListView) view.findViewById(R.id.listviewfragment);

            roomList = new ArrayList<String>();

            ListAdapter listenAdapter = new ArrayAdapter(getActivity(),
                    android.R.layout.simple_list_item_1, roomList);

            // Assign adapter to ListView
            listView.setAdapter(listenAdapter); 

            return view;
        }
    }

    /**
     * A fragment representing device structure
     */
    public static class DeviceFragment extends Fragment {
        public DeviceFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View view = inflater.inflate(R.layout.listviews, container, false);
            ListView listView = (ListView) view.findViewById(R.id.listviewfragment);

            deviceList = new ArrayList<String>();

            ListAdapter listenAdapter = new ArrayAdapter(getActivity(),
                    android.R.layout.simple_list_item_1, deviceList);

            // Assign adapter to ListView
            listView.setAdapter(listenAdapter); 

            return view;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:35:49.837

我想你一直都有答案：

```
@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
} 
```

# php - 将一个数组移动到 mysql 表中，其中一个字段具有不同的值而不进行规范化

> ID：12911626
> 
> 赞同：0
> 
> 时间：2012-10-16T09:34:00.547
> 
> 标签：php, mysql, arrays, implode

我有一个像

```
 [cat2] => Array
                (
                    [0] => 34
                    [1] => 48
                    [2] => 49
                    [3] => 46
                ) 
```

我想将此移动到特定字段到“类别”列中名为商店的表中

这意味着列类别的第一个字段应该有 34,48,49,46

因此，对于每个 id，我希望所有数组都移到类别列中。请帮助我，因为我被击中了。谢谢。

cat2 包含数组

```
$result= implode(",", $cat2);
    $rowids = mysql_query("SELECT id FROM shops ORDER BY id");
    if  ($rowids) {
    foreach ($result as $cat) {
    $row = mysql_fetch_assoc($rowids);
    $id = $row['id'];
    $upd = mysql_query("UPDATE shops SET categories = $cat WHERE id = $id");
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:56:27.737

使用序列化并存储在类别字段示例 $array = array( "Lorem", "Ipsum", "Dolor" ); $serialized = 序列化($array);

# ibm-mq - 出现错误：WebSphere MQ 原因代码 2538？

> ID：12911628
> 
> 赞同：7
> 
> 时间：2012-10-16T09:34:11.407
> 
> 标签：ibm-mq, messagebroker

我在 Linux 上安装了 WebSphere MQ 和 WebSphere Message Broker，当我执行时`mqsicreateexecutiongroup`我收到一条错误消息：

> BIP1046E: 无法连接到队列管理器（无法连接到队列管理器“NSPZPAI1”（MQ 原因码 2538））。

当我搜索此原因代码时，我知道这是*主机不可用错误*。
有人可以告诉我如何解决这个错误吗？

当我运行`runmqlsr`命令时，我总是陷入困境。有人可以告诉我如何开始一个听众吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T13:19:55.227

不要手动或脚本启动监听器。如果您有一个现代队列管理器，请定义一个侦听器对象，如下所示：

```
DEF LISTENER(LISTENER.1414)  TRPTYPE(TCP) +
    CONTROL(QMGR)            PORT(1414) +
    REPLACE

START LISTENER(LISTENER.1414) 
```

该属性`CONTROL(QMGR)`告诉 QMgr 在 QMgr 启动时自动启动侦听器，并在 QMgr 关闭时终止侦听器。这可确保在 QMgr 启动时始终启动侦听器，即使 QMgr 是手动启动而不是从通常的引导脚本启动的。因为侦听器是 QMgr 的子进程，所以它*总是*与 QMgr 一起关闭，因此您无需担心孤立的侦听器会在 QMgr 重新启动后阻止连接。

一旦定义了侦听器，您还可以使用MQSC 命令`START LISTENER`或`STOP LISTENER`独立于 QMgr 手动启动和停止它。在上面的示例中，我手动启动了侦听器，而不是重新启动 QMgr。两者都可以，但`START`命令的侵入性较小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:26:23.303

侦听器运行使用

```
runmqlsr -t tcp -p <port> -m <queue manager name>. 
```

它启动等待连接的侦听器。有关该命令的更多详细信息，请参见[此处](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa15940_.htm)

# mysql - SQL查询以复制具有指定列的表

> ID：12911631
> 
> 赞同：0
> 
> 时间：2012-10-16T09:34:17.130
> 
> 标签：mysql, sql, ms-access

我有一个表，它将在运行时动态填充列，如 col1、col2、col3...，我将此表复制到另一个表中，其列 col1、col2、col3、col4、col5 比这多，即最大数量它支持的列。但是目前，当我将动态生成的表复制到具有最大列的当前表中时，它给了我类似的错误

**动态表列：** DateInterval、DataType、Seqno、Channel1_data、Channel1_status、Channel2_data、Channel2_status

**用于复制动态表的表列：** DateInterval、DataType、Seqno、Channel1_data、Channel1_status、Channel2_data、Channel2_status、Channel3_data、Channel3_status、Channel4_data、Channel4_status

**询问：**

```
 SELECT        DateInterval, DataType, Seqno, Channel1_data, Channel1_status, Channel2_data, Channel2_status, Channel3_data, Channel3_status, Channel4_data, Channel4_status
FROM          @TableName 
```

'没有为一个或多个必需参数提供值'

告诉我如何克服这个问题。

谢谢，@nag

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:03:06.033

唠叨评论这个帖子：[违反第一范式可以吗](https://stackoverflow.com/questions/12679652/is-it-ever-okay-to-violate-first-normal-form/12679963#12679963)

在这篇文章中，您将找到一种解决问题的方法，即我需要可变数量的字段，这些字段会随着时间的推移在表格中增长和缩小。它具有最少的内部存储空间，同时在满足标准的情况下仍为我的需要提供足够的增长空间。

# jquery - 哪个代码用于表单验证？

> ID：12911633
> 
> 赞同：0
> 
> 时间：2012-10-16T09:34:29.200
> 
> 标签：jquery, ajax

任何 jquery 插件路径，易于用于表单的每个文本字段的表单验证。

```
enter code here <form id="form1" name="form1" method="post" action=""><table width="500" align="center">
<tr>
  <td colspan="2" align="center"><strong>Please Add Bill Record</strong></td>
</tr>
<tr>
  <td width="133">Number</td>
  <td width="355"><input type="text" name="number" id="number"  /></td>
</tr>
<tr>
  <td>Amount</td>
  <td><input type="text" name="amount" id="amount" /></td>
</tr>
<tr>
  <td>type</td>
  <td><label for="elc"></label>
    <select name="elc" id="elc" tabindex="3">
      <option>elecricity</option>
      <option>gas</option>
      <option>telephone</option>
  </select></td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td><input type="submit" name="submit" id="submit" value="Save" />
  <input type="reset" name="clear" id="clear" value="Clear" /></td>
</tr> 
```

我想在 blur.how 上验证表单的每个文本字段，jquery 是多么容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:38:52.410

[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)是 jQuery 的事实上的验证器。易于设置，高度可配置。说真的，这是最好的:)

它也是现存最古老的 jQuery 插件之一，由一位 jQuery UI 开发人员编写...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:39:50.453

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

它可以满足您的一切需求。

# php - php OOP找出方法参数是否是子类中的方法

> ID：12911638
> 
> 赞同：0
> 
> 时间：2012-10-16T09:35:18.670
> 
> 标签：php, class, methods

代码示例是我正在处理的一个简单示例。我在 php 中有 2 个类。

```
class Wrap {

    public function wrapA($arg){
        return 'A'.$arg.'A';
    }

    public function wrapB($arg){
        return 'B'.$arg.'B';
    }

}

class Child extends Wrap {

    public $OUT;

    public function wrapA($arg){
        $this->OUT .= parent::wrapA($arg);
    }

    public function wrapB($arg){
        $this->OUT .= parent::wrapB($arg);
    }

    public function __destruct(){
        echo $this->OUT;
    }

}

$X = new Child();

$X->wrapA(
    $X->wrapB('CC')
); 
```

这里的输出是“ **BCCBAA** ”。但我试图实现的是“ **ABCCBA** ”。“Wrap”类必须是这种形式。

…如果我有以下方法调用：

> $X->wrapB( $X->wrapA('1') );
> 
> $X->wrapA( $X->wrapB('aa') .$X->wrapA('bbb') .$X->wrapB( $X->wrapA('cccc') ) );

…我想要以下输出：**BA1ABABaaBAbbbABAcccABA**

还有其他方法吗？

我还希望 Wrap-Class 单独工作（没有 Child）……这就是方法具有返回值的原因。

但是在 Child-Class 中，我想将返回值写在一个变量中。

提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:43:03.380

那是因为`$X->wrapB('CC')`不返回任何东西，并且在`$X->wrapA()`被调用时被强制转换为空字符串，因此`A`什么都没有。

但是，因为您附加`BCCB`到`$X->OUT`，所以当您调用 时`$X->wrapA()`，它会附加`AA`到那个，导致`BCCBAA`.

又看了一遍问题，觉得应该换个方式解决；这是需要考虑的事情：

```
class Wrap
{
    // The wrapping itself can be declared as a static method
    protected static function wrapWithChar($arg, $ch)
    {
        return $ch . $arg . $ch;
    }
}

class Child extends Wrap
{
    protected $OUT;

    // we allow the internal state to be set upon construction
    public function __construct($s = '')
    {
        $this->OUT = $s;
    }

    // no arguments required here, this gets applied on the internal state
    public function wrapA()
    {
        $this->OUT = self::wrapWithChar($this->OUT, 'A');
        // return instance to allow chaining
        return $this;
    }

    public function wrapB()
    {
        $this->OUT = self::wrapWithChar($this->OUT, 'B');
        return $this;
    }

    public function __toString()
    {
        return $this->OUT;
    }

    public function __destruct(){
        echo $this->OUT;
    }

}

// initialize with 'CC'    
$X = new Child('CC');

// wrap B around it; becomes 'BCCB'
$X->wrapB();
// wrap A around that; becomes 'ABCCBA'
$X->wrapA();

// example of chaining
$Y = new Child('ZZ');
// wrap B then A around it; becomes 'ABZZBA'
$Y->wrapB()->wrapA(); 
```

**旧答案**

为了使`Child`看起来`Wrap`可以执行，您可以使用`__toString()`魔术方法（使用`instanceof`会更明确，但也需要更多工作）：

```
class Child extends Wrap
{
    public $OUT;

    public function wrapA($arg)
    {
        $this->OUT = parent::wrapA($arg);
        return $this;
    }

    public function wrapB($arg)
    {
        $this->OUT = parent::wrapB($arg);
        return $this;
    }

    public function __toString()
    {
        return $this->OUT;
    }

    public function __destruct(){
        echo $this->OUT;
    }
} 
```

每个`wrapX()`方法现在都返回实例本身，并`__toString()`在需要包装时被调用。

以上将产生正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:18:49.703

我将此添加到我的收藏夹中，作为一个有趣的谜题来解决。

然后醒了再看问题发现没那么复杂。老实说，我认为此时您不应该使用子类化，因为从技术上讲，它`Child`在逻辑上不是该类的子`Wrap`类，它本质上似乎是一个想要存储 wrap 结果输出的人。

所以.. 这是我的修改，适用于您的原始界面。希望它对你有好处；）。

它使用了一些非常神奇的魔法方法。

```
<?php
class Wrap {
    public function wrapA($arg){
        return 'A'.$arg.'A';
    }

    public function wrapB($arg){
        return 'B'.$arg.'B';
    }
}

class WrapReader{
    protected $wrapper;
    protected $currentResult;

    public function __construct(Wrap $wrapper)
    {
        $this->wrapper = $wrapper;
    }

    public function __call($method,$argument)
    {
        $argument = $argument[0];
        if(!method_exists($this->wrapper,$method))
            throw new MethodNotFoundException('Method: '.$method.'() does not exist in class: '.get_class($this->wrapper));
        $this->currentResult = $this->wrapper->$method($argument);
        return $this->currentResult;
    }

    public function __destruct(){
        echo $this;
    }

    public function __toString()
    {
        return $this->currentResult;
    }
}
class MethodNotFoundException extends Exception{} 
```

用法：

```
$reader = new WrapReader(new Wrap());

echo $reader->wrapB( $reader->wrapA('1') ); 
echo $reader->wrapA( $reader->wrapB('aa') .$reader->wrapA('bbb') .$reader->wrapB( $reader->wrapA('cccc') ) );
echo '<br>';

Outputs BA1ABABaaBAbbbABAccccABA 
```

这是您在原始问题中发布的内容。

# ruby-on-rails - “will_paginate”的翻译不起作用。我究竟做错了什么？

> ID：12911641
> 
> 赞同：1
> 
> 时间：2012-10-16T09:35:32.903
> 
> 标签：ruby-on-rails, ruby, internationalization, locale, will-paginate

基本方案：

```
= will_paginate @products, :previous_label => t("previous_label"), :next_label => t("next_label") 
```

**de.yml**

```
 will_paginate:
    page_gap: "&hellip;"
    previous_label: "word for back"
    next_label: "word for next" 
```

**en.yml** en: will_paginate: page_gap: "..." previous_label: "previous" next_label: "next"

但在输出中仍然是名为`Previous Label`and的标签`Next Label`。还有什么问题？另外，我以为我没有重新启动服务器...但是重新启动后仍然是相同的标签，而不是我的翻译

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:53:55.227

你可以在这里为 will_paginate 获取翻译成各种语言的 YAML 文件：[https](https://github.com/tigrish/will-paginate-i18n) ://github.com/tigrish/will-paginate-i18n 。

在您的示例中，您将覆盖：previous_label 和：next_label，但您没有将其范围限定为“will_paginate”。

完全删除覆盖并自定义翻译文件中的标签：

```
will_paginate @products 
```

或`.t`正确确定调用范围：

```
will_paginate @products,
  :previous_label => t("will_paginate.previous_label"),
  :next_label     => t("will_paginate.next_label") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T09:59:27.700

然后，您可以通过添加以下内容来更改分页链接的文本`config/locales/will_paginate.en.yml:`

```
en:
  will_paginate:
    page_gap: "&hellip;"
    previous_label: "previous"
    next_label: "next" 
```

并添加以下内容`application.rb`

```
config.i18n.default_locale = :en 
```

# asp.net - ASP.net 中德语、法语和西班牙语的正则表达式问题

> ID：12911650
> 
> 赞同：0
> 
> 时间：2012-10-16T09:36:12.597
> 
> 标签：asp.net, regex

我想在我网站的特定领域支持德语、法语和西班牙语字符。我需要一个正则表达式。目前我正在使用 -

```
^[\w\s-\+\$\*\.\?\:\;\!\,&quot;'\%\&\/\(\)\@\#«»£°¿¡_ÀÂÆÇÈÉÊËÎÏÔŒÙÛÜàâæçèéêëîïôœùûüÄÖäößÁÍÑÓÚáíñóú\u201E\u201C\u201D\u20AC]{1,255}$ 
```

这个正则表达式基本上使用了我提到的 3 种语言中的所有字符集。

有没有一种巧妙的方法可以避免这种冗长的正则表达式？我试过`/p{L}/p{Z}`正则表达式。然而这并没有奏效。

我的网站在 ASP.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:18:16.520

1.  `/p{L}/p{Z}`错了，应该是`\p{L}\{Z}`。

2.  不需要所有字母，例如“ÀÂÆÇÈ”，它们都包含在 .net 中的 \w 中！

3.  您不需要角色类中的大部分转义

4.  您不能`&quot;`在字符类中编写类似的东西，唯一发生的事情是每个字符都被添加到类中。

这应该与您使用的非常相似：

```
^[-\p{L}\p{N}\p{P}\p{Z}_+$*%&/@#«»£°\u201E\u201C\u201D\u20AC]{1,255}$ 
```

我没有在课程结束时检查那些 Unicode 代码点，我现在不需要它们。

有关所有`\p{...}`项目的说明，请参阅[regular-expressions.info 上的 Unicode 正则表达式](http://www.regular-expressions.info/unicode.html#prop)

# node.js - dotCloud 上的依赖问题

> ID：12911651
> 
> 赞同：0
> 
> 时间：2012-10-16T09:36:14.520
> 
> 标签：node.js, canvas, dotcloud

我在 dotCloud 上部署我的 nodejs 应用程序时遇到了关于依赖项的问题。这个应用程序使用 node-canvas (https://github.com/LearnBoost/node-canvas) 来生成乐谱的缩略图（与 jellynote.com 上可用的乐谱相关）。

在推送我的应用程序和安装依赖项期间，我没有任何错误。这是我的 package.json 文件：

```
{
  "name": "jellyscore",
  "version": "1.0.0",
  "dependencies": {
    "canvas": "",
    "mongodb": ""
  }
} 
```

这是 dotCloud 返回的日志（编辑日志）：

```
node.js:134
        throw e; // process.nextTick error, or 'error' event on first tick
        ^
Error: Cannot find module '../build/default/canvas'
    at Function._resolveFilename (module.js:326:11)
    at Function._load (module.js:271:25)
    at require (module.js:355:19)
    at Object.<anonymous> (/home/dotcloud/node_modules/canvas/lib/bindings.js:7:20)
    at Module._compile (module.js:411:26)
    at Object..js (module.js:417:10)
    at Module.load (module.js:343:31)
    at Function._load (module.js:302:12)
    at require (module.js:355:19)
    at Object.<anonymous> (/home/dotcloud/node_modules/canvas/lib/canvas.js:12:14) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:25:59.440

您是否将 CAIRO 添加为系统依赖项？

在你的 dotCloud yml 中：

```
systempackages:
    - libcairo2 
```

因此，如果您有一个仅限 Node.js 的应用程序，它应该如下所示：

```
www:
    type: nodejs
    systempackages:
       - libcairo2 
```

# sql - 对多列进行计数和区分

> ID：12911653
> 
> 赞同：0
> 
> 时间：2012-10-16T09:36:19.300
> 
> 标签：sql, oracle, select, count

我有一个包含两个成本的数据库表。我想找到这两列的不同成本。我也想找出这些成本出现的次数。该表可能看起来像

```
|id|cost1|cost2|
|1 |50   |60   |
|2 |20   |50   |
|3 |50   |70   |
|4 |20   |30   |
|5 |50   |60   | 
```

在这种情况下，我想要一个在两列上都不同的结果并计算出现的次数。所以我想要的结果是

```
|distinctCost|count|
|20          |2    |
|30          |1    |
|50          |4    |
|60          |2    |
|70          |1    | 
```

并且理想地订购

```
|disctinCost1|count|
|50          |4    |
|60          |2    |
|20          |2    |
|70          |1    |
|30          |1    | 
```

我可以通过执行类似的操作来获得两列的不同

```
select DISTINCT c FROM (SELECT cost1 AS c FROM my_costs UNION SELECT cost2 AS c FROM my_costs); 
```

我可以通过做得到每一列的计数

```
select cost1, count(*)
from my_costs 
group by cost1
order by count(*) desc; 
```

我的问题是如何获得两列的计数？我被困在如何对每一列进行计数然后将其相加。

任何指针将不胜感激。

我正在使用 Oracle 数据库。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:37:57.287

通过结合你的两个查询..

```
select cost, count(*)
from
(
    SELECT id, cost1 AS cost FROM my_costs 
    UNION ALL
    SELECT id, cost2 AS c FROM my_costs
) v
group by cost
order by count(*) desc; 
```

（如果一行 cost1 和 cost2 相等，你想计算一次而不是两次，将`union all`a 改为 a `union`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:30:33.733

您可以使用 unpivot 语句：

```
select * 
from 
(
  SELECT cost , count(*) as num_of_costs
  FROM   my_costs 
  UNPIVOT 
  (
     cost                          
     FOR cost_num IN  (cost1,cost2) 
  )
 group by cost
) 
order by num_of_costs desc; 
```

# jquery - 在 keyup ESC 上关闭 jQuery 颜色框

> ID：12911658
> 
> 赞同：0
> 
> 时间：2012-10-16T09:36:39.207
> 
> 标签：jquery, colorbox

我正在使用 [Jquery colorbbox](http://www.jacklmoore.com/colorbox)

我正在尝试关闭颜色框，同时从键盘按下 ESC 按钮

我正在使用以下代码

```
<script>
$(document).keydown(function(e) {
    // ESCAPE key pressed
    if (e.keyCode == 27) {
        $.colorbox.close()
      //  window.close();

    }
});

</script> 
```

不幸的是，在加载 colorbox Js 和 css 文件后，它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:41:37.713

基于[视觉](https://stackoverflow.com/users/1249581/vision)评论。我猜这是你需要做的

```
$("a.gallery").colorbox({escKey:true}); 
```

# ruby-on-rails - 大虾：带有页码的目录

> ID：12911663
> 
> 赞同：7
> 
> 时间：2012-10-16T09:36:52.140
> 
> 标签：ruby-on-rails, ruby, pdf-generation, prawn

我需要用 Prawn 创建一个目录。我的代码中有`add_dest`函数调用，目录中有正确的链接：

```
add_dest('Komplett', dest_fit(page_count - 1)) 
```

和

```
text "* <link anchor='Komplett'> Vollstaendiges Mitgliederverzeichnis </link>", :inline_format = true 
```

这很有效，我得到了可点击的链接，这些链接将我转发到正确的页面。但是，我需要在目录中有页码。如何打印出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-30T21:47:24.827

我会建议一个更简单的解决方案。

1.  用于`pdf.page_number`在填充页面时将所有部分的页码存储在哈希中

2.  在代码中，在填充其余页面后输出目录。通过在 PDF 中导航，将 TOC 插入到正确位置的文档中`pdf.go_to_page(page_num)`。

例如：

```
render "pdf/frontpage", p: p
toc.merge!(p.page_number => "Section_Title")

p.start_new_page
toc.merge!(p.page_number => "Section_Title")
render "pdf/calendar"

p.start_new_page
toc.merge!(p.page_number => "Section_Title")
render "pdf/another_section"

p.go_to_page(1)
p.start_new_page
toc.merge!(p.page_number => "Table of Contents")
render "pdf/table_of_contents", table_of_contents: toc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:00:53.317

您应该阅读本文档[http://prawn.majesticseaacreature.com/manual.pdf](http://prawn.majesticseacreature.com/manual.pdf)中的大纲章节，第96 页。它通过示例说明了如何创建 TOC。

### 更新

```
destinations, page_references = {}, {}

page_count.downto(1).each {|num| page_references[num] = state.store.object_id_for_page(num)}

dests.data.to_hash.each_value do |values|
    values.each do |value|
        value_array             = value.to_s.split(":")
        dest_name               = value_array[0]
        dest_id                 = value_array[1].split[0]
        destinations[dest_name] = Integer(dest_id)
    end 
end 

state.store.each do |reference| 
    if !(dest_name = destinations.key(reference.identifier)).nil?
        puts "Destination - #{dest_name} is on Page #{page_references.key(Integer(reference.data[0].to_s.split[0]))}"
    end 
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T00:19:39.160

我还需要创建一个动态目录。我整理了一个需要清理的快速尖峰，但几乎可以满足我的需求。我没有包含可点击的链接，但可以轻松添加它们。该示例还假设 TOC 位于文档的第二页。

我使用的基本策略是将 TOC 存储在哈希中。每次我向要出现在 TOC 中的文档添加新部分时，我都会将其添加到哈希中，即

```
@toc[pdf.page_count] = "the toc text for this section" 
```

然后在将页码添加到文档之前，我遍历哈希：

```
number_of_toc_entries_per_page = 10
offset = (@toc.count.to_f / number_of_toc_entries_per_page).ceil
@toc.each_with_index do |(key, value), index| 
  pdf.start_new_page if index % number_of_toc_entries_per_page == 0
  pdf.text "#{value}.... page #{key + offset}", size: 38
end 
```

无论如何，完整的示例如下，希望对您有所帮助。

```
require 'prawn'

class TocTest
  def self.create
    @toc = Hash.new
    @current_section_header_number = 0 # used to fake up section header's
    pdf = Prawn::Document.new

    add_title_page(pdf)
    21.times { add_a_content_page(pdf) }

    fill_in_toc(pdf)

    add_page_numbers(pdf)

    pdf.render_file './output/test.pdf'
  end

  def self.add_title_page(pdf)
    pdf.move_down 200
    pdf.text "This is my title page", size: 38, style: :bold, align: :center
  end

  def self.fill_in_toc(pdf)
    pdf.go_to_page(1)

    number_of_toc_entries_per_page = 10
    offset = (@toc.count.to_f / number_of_toc_entries_per_page).ceil
    @toc.each_with_index do |(key, value), index| 
      pdf.start_new_page if index % number_of_toc_entries_per_page == 0
      pdf.text "#{value}.... page #{key + offset}", size: 38
    end
  end

  def self.add_a_content_page(pdf)
    pdf.start_new_page
    toc_heading = grab_some_section_header_text

    @toc[pdf.page_count] = toc_heading

    pdf.text toc_heading, size: 38, style: :bold
    pdf.text "Here is the content for this section"
    # randomly span a section over 2 pages
    if [true, false].sample
      pdf.start_new_page
      pdf.text "The content for this section spans 2 pages"
    end
  end

  def self.add_page_numbers(pdf)
    page_number_string = 'page <page> of <total>'
    options = {
      at: [pdf.bounds.right - 175, 9], 
      width: 150, 
      align: :right, 
      size: 10,
      page_filter: lambda { |pg| pg > 1 }, 
      start_count_at: 2,
    }
    pdf.number_pages(page_number_string, options)
  end

  def self.grab_some_section_header_text
    "Section #{@current_section_header_number += 1}"
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T14:37:02.023

我使用从本次讨论中收集的代码和想法构建了一个报告生成器，其中包含可点击的目录。这是代码的相关部分，以防其他人需要这样做。

它能做什么：

*   包括[Prawn::View](http://prawnpdf.org/api-docs/1.3/Prawn/View.html)以使用 Prawn 的方法，而不必在它们前面加上前缀`pdf`
*   插入将显示目录的空白页
*   添加文档内容，使用 h1 和 h2 助手作为标题
*   h1 和 h2 助手存储文档中标题的位置
*   倒带并生成实际的目录
*   在目录中缩进小节
*   右对齐 toc 条目和页码之间的点以保持视觉一致性
*   如果表格不适合一页，它会添加新页面并增加相关页码
*   添加带有分节和小节标题的 PDF 大纲以获得奖励积分。

享受！

## PDF 生成器

```
class ReportPdf
  include Prawn::View
  COLOR_GRAY = 'BBBBBB' # Color used for the dots in the table of contents

  def initialize(report)
    @toc = []
    @report = report
    generate_report
  end

  private

  def generate_report
    add_table_of_contents
    add_contents
    update_table_of_contents
    add_outline
  end

  def add_table_of_contents
    # Insert a blank page, which will be filled in later using update_table_of_contents
    start_new_page
  end

  def add_contents
    @report.sections.each do |section|
      h1(section.title, section.anchor)
      section.subsections.each do |subsection|
        h2(subsection.title, subsection.anchor)
        # subsection contents
      end
    end
  end

  def update_table_of_contents
    go_to_page(1) # Rewind to where the table needs to be displayed
    text 'Table of contents', styles_for(:toc_title)
    move_down 20

    added_pages = 0
    @toc.each do |entry|
      unless fits_on_current_page?(entry[:name])
        added_pages += 1
        start_new_page
      end
      entry[:page] += added_pages
      add_toc_line(entry)
      entry[:subsections].each do |subsection_entry|
        unless fits_on_current_page?(subsection_entry[:name])
          added_pages += 1
          start_new_page
        end
        subsection_entry[:page] += added_pages
        add_toc_line(subsection_entry, true)
      end
    end
  end

  def add_outline
    outline.section 'Table of contents', destination: 2
    @toc.each do |entry|
      outline.section entry[:name], destination: entry[:page] do
        entry[:subsections].each do |subsection|
          outline.page title: subsection[:name], destination: subsection[:page]
        end
      end
    end
  end

  def h1(name, anchor)
    add_anchor(anchor, name)
    text name, styles_for(:h1)
  end

  def h2(name, anchor)
    add_anchor(anchor, name, true)
    text name, styles_for(:h2)
  end

  def styles_for(element = :p)
    case element
    when :toc_title then { size: 24, align: :center }
    when :h1 then { size: 20, align: :left }
    when :h2 then { size: 16, align: :left }
    when :p  then { size: 12, align: :justify }
    end
  end

  def add_anchor(name, anchor, is_subsection = false)
    add_dest anchor, dest_xyz(bounds.absolute_left, y + 20)
    if is_subsection
      @toc.last[:subsections] << { anchor: anchor, name: name, page: page_count }
    else
      @toc << { anchor: anchor, name: name, page: page_count, subsections: [] }
    end
  end

  def add_toc_line(entry, is_subsection = false)
    anchor = entry[:anchor]
    name = entry[:name]
    name = "#{Prawn::Text::NBSP * 5}#{name}" if is_subsection
    page_number = entry[:page].to_s
    dots_info = dots_for(name + ' ' + page_number)

    float do
      text "<link anchor='#{anchor}'>#{name}</link>", inline_format: true
    end
    float do
      indent(dots_info[:dots_start], dots_info[:right_margin]) do
        text "<color rgb='#{COLOR_GRAY}'>#{dots_info[:dots]}</color>", inline_format: true, align: :right
      end
    end
    indent(dots_info[:dots_end]) do
      text "<link anchor='#{anchor}'>#{page_number}</link>", inline_format: true, align: :right
    end
  end

  def dots_for(text)
    dot_width  = text_width('.')
    dots_start = text_width(text)
    right_margin = text_width(' ') * 6

    space_for_dots = bounds.width - dots_start - right_margin
    dots = space_for_dots.negative? ? '' : '.' * (space_for_dots / dot_width)
    dots_end = space_for_dots - right_margin
    {
      dots: dots,
      dots_start: dots_start,
      dots_end: dots_end,
      right_margin: right_margin
    }
  end

  def fits_on_current_page?(str)
    remaining_height = bounds.top - bounds.absolute_top + y
    height_of(str) < remaining_height
  end

  def text_width(str, size = 12)
    font(current_font).compute_width_of(str, size: size)
  end

  def current_font
    @current_font ||= font.inspect.split('<')[1].split(':')[0].strip
  end
end 
```

## 使用生成器

使用 Rails，我使用以下代码从报告中生成 PDF：

```
# app/models/report.rb
class Report < ApplicationRecord
  # Additional methods
  def pdf
    @pdf ||= ReportPdf.new(self)
  end
end

# app/controllers/reports_controller.rb
class ReportsController < ApplicationController
  def show
    respond_to do |format|
      format.html
      format.pdf do
        doc = @report.pdf
        send_data doc.render, filename: doc.filename, disposition: :inline, type: Mime::Type.lookup_by_extension(:pdf)
      end
    end
end 
```

# javascript - clientX 和 clientY 没有给出正确的鼠标指针位置

> ID：12911664
> 
> 赞同：3
> 
> 时间：2012-10-16T09:37:00.050
> 
> 标签：javascript

我编写了这个简单的代码，在我用鼠标指针单击的位置打印一个小点：-

```
$(document).ready(function(){
    $('#pane').click(function(e){
        var pixel = $('<div />')
                  .addClass('pixel')
                  .css({
                      top: e.clientY,
                      left: e.clientX
                  });

        $('#pane').append(pixel)
    });
}); 
```

看看我创建的这个[小提琴。](http://jsfiddle.net/DsPLG/1/)当我单击矩形内的任意位置时，会在该位置打印一个小点。但问题是鼠标指针所在的位置没有打印点`tip`。请参阅下图以了解我的意思：-

![显示在不同位置打印的点的屏幕截图](../Images/61cab63202243e258698f3447ccd3271.png)

我在 Firefox 和 Chrome 中都试过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:20:55.457

您的代码工作正常，

缩放页面并检查，

我已将像素高度和宽度从 2px 更改为 3px，以便更好地理解。并从 e.clientX -1 和 e.clientY -1 位置绘制，因此它看起来完全居中。

你可以找到[小提琴](http://jsfiddle.net/DsPLG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T08:35:38.563

如果有滚动页面，我发现的大多数示例都不起作用......我使用这个算法来获得位置：

```
var getOffsets = function($event){
    var p = {};
    var body = "search the document for the body element";
    p.x = body.offsetLeft;
    p.y = body.offsetTop;
    while (body.offsetParent) {
        p.x = p.x + body.offsetParent.offsetLeft;
        p.y = p.y + body.offsetParent.offsetTop;
        if (body == document.getElementsByTagName("body")[0]) {
            break;
        }
        else {
            body = body.offsetParent;
        }
    }
    return p;
} 
```

但是，在那之后你还必须考虑其他元素，我的情况是：

```
var GetExactClickPosition = function($event){

    var tr = $($event.target);
    if ($event.target.localName != 'tr'){
        tr = $($event.target).closest('tr');
    }

    var listDiv = $($event.target).closest('div');
    var p = getOffsets($event);
    var container = $('#mailingListExcludeMenuContainer');

    container.css({
        top: p.y - listDiv.scrollTop() - tr.height() - container.height() + $event.offsetY + "px",
        left: p.x + $event.offsetX + "px"
    });
    container.show();
}; 
```

我在页面的主滚动条中有一个带有滚动条的列表......我使用它是为了在鼠标点击的位置显示一个小菜单。

# php - PHP/MYSQL utf8 文件打开语法错误，但通过 phpmyadmin 可以正常工作

> ID：12911671
> 
> 赞同：1
> 
> 时间：2012-10-16T09:37:38.307
> 
> 标签：php, mysql, utf-8, phpmyadmin, syntax-error

环境规格：

```
os:windows 7 64 bit
webserver:wamp(apache) with:
                    php 5.3.8
                    mysql 5.5.16
text editor in use:notepad++ 
```

问题：
尝试加载包含 utf8（希伯来语）数据的 .sql 文件，**根据 phpmyadmin**
的语法是正确的，但是当尝试通过 php 脚本上传文件时，它会输出错误。

 **```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DROP DATABASE IF EXISTS squazza; CREATE DATABASE IF NOT EXISTS squazza; ' at line 1 
```

sql 文件（db/default.sql）是：

```
DROP DATABASE IF EXISTS squazza;
CREATE DATABASE IF NOT EXISTS squazza;

use squazza;
CREATE TABLE IF NOT EXISTS `mainframe` (
  `storedbottles` smallint(255) DEFAULT NULL,
  `bottlescompressed` smallint(255) DEFAULT NULL,
  `users` smallint(255) DEFAULT NULL,
  `status` varchar(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
CREATE TABLE IF NOT EXISTS `pages` (
  `id` mediumint(9) NOT NULL AUTO_INCREMENT,
  `accessname` varchar(50) DEFAULT NULL,
  `pagename` varchar(50) DEFAULT NULL,
  `title` varchar(100) DEFAULT NULL,
  `metadesc` varchar(500) DEFAULT NULL,
  `metakey` varchar(180) DEFAULT NULL,
  `lang` varchar(20) DEFAULT NULL,
  `leftcontent` longtext,
  `rightcontent` mediumtext,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `users` (
  `id` mediumint(9) NOT NULL AUTO_INCREMENT,
  `identification` varchar(20) DEFAULT NULL,
  `LastName` varchar(30) DEFAULT NULL,
  `FirstName` varchar(30) DEFAULT NULL,
  `born` date DEFAULT NULL,
  `joined` date DEFAULT NULL,
  `phone` varchar(20) DEFAULT NULL,
  `email` varchar(20) DEFAULT NULL,
  `paypal` varchar(20) DEFAULT NULL,
  `Address` varchar(50) DEFAULT NULL,
  `City` varchar(50) DEFAULT NULL,
  `username` varchar(20) DEFAULT NULL,
  `pass` varchar(20) DEFAULT NULL,
  `card` varchar(20) DEFAULT NULL,
  `balance` float(6,4) DEFAULT NULL,
  `bottles` smallint(255) DEFAULT NULL,
  `administrator` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci AUTO_INCREMENT=1 ;
INSERT INTO `pages` (`accessname`,`pagename`, `title`, `metadesc`, `metakey`, `lang`, `leftcontent`, `rightcontent`) VALUES
('register','הרשמה', 'הסבר מפורט אלינו', 'הסבר אל יוצריומפתחי הדחסן הבקבוקים', 'בקבוקים,דחסן,בקבוק,איכות הסביבה', 'he','<h2>הרשמה</h2><br\><h4>דף הרשמה למשטמשים חדשים</h4><br\>','<h3>דף זה הוא הינו דף הרשמה למשטמשים חדשים המעוניינים להיצתרף לשרות דחיסת הבקבוקים.');
INSERT INTO `pages` (`accessname`,`pagename`, `title`, `metadesc`, `metakey`, `lang`, `leftcontent`, `rightcontent`) VALUES
('login','כניסה', 'הסבר מפורט אלינו', 'הסבר אל יוצריומפתחי הדחסן הבקבוקים', 'בקבוקים,דחסן,בקבוק,איכות הסביבה', 'he','<h2>משחזר הבקבוקים</h2><br\><h4>רק שחזור מוביל לשיפור</h4><br\>','<h3>פרויקט דחסן</h3>פרויקט דחסן הוא הינו פרויקט שנועד לשפר את איכות הסביבה');
INSERT INTO `pages` (`accessname`,`pagename`, `title`, `metadesc`, `metakey`, `lang`, `leftcontent`, `rightcontent`) VALUES
('aboutproject','אל הפרויקט', 'הסבר מפורט אלינו', 'הסבר אל יוצריומפתחי הדחסן הבקבוקים', 'בקבוקים,דחסן,בקבוק,איכות הסביבה', 'he','<h2>משחזר הבקבוקים</h2><br\><h4>רק שחזור מוביל לשיפור</h4><br\>','<h3>פרויקט דחסן</h3>פרויקט דחסן הוא הינו פרויקט שנועד לשפר את איכות הסביבה');
INSERT INTO `pages` (`accessname`,`pagename`, `title`, `metadesc`, `metakey`, `lang`, `leftcontent`, `rightcontent`) VALUES
('aboutus','אלינו', 'הסבר מפורט אלינו', 'הסבר אל יוצריומפתחי הדחסן הבקבוקים', 'בקבוקים,דחסן,בקבוק,איכות הסביבה', 'he','<h2>משחזר הבקבוקים</h2><br\><h4>רק שחזור מוביל לשיפור</h4><br\>','<h3>פרויקט דחסן</h3>פרויקט דחסן הוא הינו פרויקט שנועד לשפר את איכות הסביבה');
INSERT INTO `pages` (`accessname`,`pagename`, `title`, `metadesc`, `metakey`, `lang`, `leftcontent`, `rightcontent`) VALUES
('home','בית', 'דף בית של הדחסן', 'הדחסן שדוחס בקבוקים וסם כסף ברטיס אוטומתי', 'בקבוקים,דחסן,בקבוק,איכות הסביבה', 'he','<h2>משחזר הבקבוקים</h2><br\><h4>רק שחזור מוביל לשיפור</h4><br\>','<h3>פרויקט דחסן</h3>פרויקט דחסן הוא הינו פרויקט שנועד לשפר את איכות הסביבה'); 
```

并且尝试提交文件的 PHP 代码是：

```
$link=new mysqli(MYSQL_HOST, MYSQL_USER, MYSQL_PASS) or die('Could not connect to database');

        mysqli_multi_query($link,file_get_contents('db/default.sql')) or die(mysqli_error($link)); 
```

现在有几件事解决了 sql 错误但产生了新的问题，例如将文件的编码（在 notepade++ 中）设置为 UTF-没有 BOM
，例如乱码希伯来文本，因此我必须将文件保留为 utf8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:44:30.760

[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)是一个 Unicode 字符，用于表示文本文件或流的字节顺序（字节顺序）。在 UTF-8 文件中是一个三字节序列（`0xEF`, `0xBB`, `0xBF`），它并没有真正达到这个目的，因为 UTF-8 编码不支持不同的字节顺序。文本编辑器和其他工具可以使用它来检测文件是否被编码为 UTF-8，但大多数时候它只会被注入到实际文件内容之上，这是您面临的问题。

该`file_get_contents()`函数将按原样读取文件（即，它不会删除 BOM 或以任何特殊方式处理文件），并且该`mysqli_multi_query()`函数需要一个简单的 SQL 代码流，并且也无法检测和删除 BOM。

最简单的解决方案是从文件中删除 BOM。严重地。

> 将文件的编码（在notepade ++中）设置为UTF- WITHOUT BOM [...] garble [s] hebrew text 因此我必须将文件保留为utf8。

仅仅删除 BOM 根本不会改变文件编码。但是，依赖于查找 BOM 的文本编辑器可能无法检测到 UTF-8，并且可能会使用其他一些（错误的）编码来解释文件，从而使文件看起来是乱码。这是一个可视化问题，如果您不重新保存乱码文件，则不应影响您的代码。**

# sql - 如何在 SQL Server 中按订单号填充“[订单]”列？

> ID：12911673
> 
> 赞同：0
> 
> 时间：2012-10-16T09:37:43.747
> 
> 标签：sql, sql-server, sql-server-2000, sql-order-by

`[Order]`SQL Server 2000中如何按订单号填列？

例如，我有一个 SQL：

```
select Id, Tilte 
from Tbl 
order by Date 
```

我需要将此查询中的订单号写入表`[Order]`的列`Tbl`。

这该怎么做？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T09:40:35.863

您可以使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
WITH CTE AS
(
   SELECT Id, Title, [Order] 
   , OrderNumber = ROW_NUMBER() OVER (ORDER BY Date)
   FROM Tbl 
)
UPDATE CTE SET [Order] = CTE.OrderNumber; 
```

这是一个小提琴：[http ://sqlfiddle.com/#!3/8831d/2/0](http://sqlfiddle.com/#!3/8831d/2/0)

# perl - Perl while 循环正在重复自己

> ID：12911674
> 
> 赞同：3
> 
> 时间：2012-10-16T09:37:55.743
> 
> 标签：perl, loops, while-loop

我是 Perl 的 100% 新手，但确实有一些 PHP 知识。我正在尝试创建一个快速脚本，该脚本将采用 @url 变量并将其保存到 .txt 文件中。我遇到的问题是每次遍历循环时都会再次保存 url，这非常烦人。所以当循环运行时，它看起来像这样。

```
url1.com
url1.com url2.com
url1.com url2.com url3.com 
```

我希望它看起来很简单：

```
url1.com
url2.com
url3.com 
```

这是我的代码。如果有人可以提供帮助，我将非常感激！

```
#!/usr/bin/perl
use strict;
use warnings;

my $file = "data.rdf.u8";
my @urls;

open(my $fh, "<", $file) or die "Unable to open $file\n";

while (my $line = <$fh>) {

    if ($line =~ m/<(?:ExternalPage about|link r:resource)="([^\"]+)"\/?>/) {
        push @urls, $1;
    }

    open (FH, ">>my_urls.txt") or die "$!";
    print FH "@urls ";
    close(FH);
}

close $fh; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T09:43:29.393

您的打印在您的 while 循环内。听起来您想将打印移出循环。

或者，如果您想在遍历每一行时打印每个 url，请将“my @urls”的声明向下移动到循环中，然后它将重置每一行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T09:44:27.570

这部分不应该：

```
open (FH, ">>my_urls.txt") or die "$!";
print FH "@urls ";
close(FH); 
```

...被放置在`while`循环之外？在 内没有任何意义`while`，因为`@urls`那里显然是不完整的。

还有两个与正则表达式相关的旁注：首先，使用`m`运算符，您可以选择另一组分隔符，这样您就不必转义`/`符号；其次，没有必要`"`在字符类定义中转义符号。实际上，根本不需要在正则表达式中对其进行转义 - 除非您选择此字符作为分隔符。)

因此，您的正则表达式可能如下所示：

```
$line =~ m#<(?:ExternalPage about|link r:resource)="([^"]+)"/?># 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T09:44:44.360

你需要`@urls`其他地方的阵列吗？因为否则，您可以简单地：

```
#!/usr/bin/perl
use strict;
use warnings;

my $file = "data.rdf.u8";
my @urls;

open(my $fh, "<", $file) or die "Unable to open $file\n";
open (FH, ">>my_urls.txt") or die "$!";
while (my $line = <$fh>) {
    if ($line =~ m/<(?:ExternalPage about|link r:resource)="([^\"]+)"\/?>/) {

      print FH $1;

    }

}
close(FH);
close $fh; 
```

# php - 使用 simplexml 和 xpath 解析 xml

> ID：12911676
> 
> 赞同：0
> 
> 时间：2012-10-16T09:37:59.377
> 
> 标签：php, xml, xpath, simplexml

我使用 Simplexml 和 xpath 来解析我的 XML。

这是我的 xml 输出：

```
<?xml version="1.0"?>
<api>
 <query>
<categorymembers>
  <cm pageid="30908" ns="0" title="Thomas Acda" />
  <cm pageid="46896" ns="0" title="Elvan Akyildiz" />
  <cm pageid="21162" ns="0" title="Jenny Arean" />
  <cm pageid="30913" ns="0" title="Tijl Beckand" />
  <cm pageid="829" ns="0" title="Yoka Berretty" />
  <cm pageid="45" ns="0" title="Wim de Bie" />
  <cm pageid="31894" ns="0" title="Jan Blaaser" />
  <cm pageid="832" ns="0" title="Karin Bloemen" />
  <cm pageid="833" ns="0" title="Hetty Blok" />
  <cm pageid="12473" ns="0" title="Ron Boszhard" />
  <cm pageid="34605" ns="0" title="Ansje van Brandenberg" />
  <cm pageid="8451" ns="0" title="Claudia de Breij" />
  <cm pageid="678" ns="0" title="Jos Brink" />
  <cm pageid="29595" ns="0" title="Joke Bruys" />
  <cm pageid="30909" ns="0" title="Horace Cohen" />
  <cm pageid="689" ns="0" title="Gerard Cox" />
  <cm pageid="32008" ns="0" title="Pieke Dassen" />
  <cm pageid="31047" ns="0" title="Wieteke van Dort" />
  </categorymembers>
 </query>
</api> 
```

这是我显示标题的代码。

```
<?php
 $xml = new SimpleXMLElement('http://www.beeldengeluidwiki.nl/api.php?action=query&list=categorymembers&cmtitle=Category:Cabaretier&cmlimit=400', null, true);
$data = $xml->xpath("/api/query/categorymembers/cm");

foreach ($data as $item) {
echo $item['title'];
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:41:55.997

它们是属性

```
$xml = new SimpleXMLElement($xml);
echo "<pre>";
foreach($xml->query->categorymembers->children() as $cm)
{
    list($pageid, $ns, $title) = $cm->attributes();
    echo $pageid , " " , $ns  , " " , $title , PHP_EOL ;
} 
```

输出

```
30908 0 Thomas Acda
46896 0 Elvan Akyildiz
21162 0 Jenny Arean
30913 0 Tijl Beckand
829 0 Yoka Berretty
45 0 Wim de Bie
31894 0 Jan Blaaser
832 0 Karin Bloemen
833 0 Hetty Blok
12473 0 Ron Boszhard
34605 0 Ansje van Brandenberg
8451 0 Claudia de Breij
678 0 Jos Brink
29595 0 Joke Bruys
30909 0 Horace Cohen
689 0 Gerard Cox
32008 0 Pieke Dassen
31047 0 Wieteke van Dort 
```

[观看现场演示](http://codepad.org/lSCHUjnf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:47:10.780

您可以像这样使用 DOM 解析器：

```
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($xml);
$xpath = new DOMXPath($doc);
$nlist = $xpath->query("//api/query/categorymembers/cm");
$numnodes = $nlist->length;
for($i=0; $i < $numnodes; $i++) {
   $node = $nlist->item($i);
   echo ($i+1) . ':'. $node->getAttribute('title') . "\n";
} 
```

**输出：**

```
1:Thomas Acda
2:Elvan Akyildiz
3:Jenny Arean
4:Tijl Beckand
5:Yoka Berretty
6:Wim de Bie
7:Jan Blaaser
8:Karin Bloemen
9:Hetty Blok
10:Ron Boszhard
11:Ansje van Brandenberg
12:Claudia de Breij
13:Jos Brink
14:Joke Bruys
15:Horace Cohen
16:Gerard Cox
17:Pieke Dassen
18:Wieteke van Dort 
```

# java - JTreeNode中有两个图像？

> ID：12911677
> 
> 赞同：0
> 
> 时间：2012-10-16T09:38:00.157
> 
> 标签：java, image, swing, jtree, renderer

我有一些自定义的 JTree。该树具有带有自定义图标的节点。我还有一个类，它`DefaultTreeCellRenderer`的方法`getTreeCellRendererComponent`很简单，如下所示：

```
super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
MyTreeNode node = ((MyTreeNode) value);
Icon icon = node.getIcon();
setIcon(icon);
return this; 
```

有用。我的树节点将使用`ICON TEXT`格式的自定义图标呈现。但！有没有办法在我的节点中放置两个图标！我想要一个看起来像这样的节点：`ICON TEXT ANOTHER_JLABEL_WITH_IMAGE`.

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:44:29.283

您应该创建自己的`TreeCellRenderer`扩展自`JPanel`.

这样，您可以定义自己的布局要求并添加自己的组件来支持您的要求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:50:37.907

您还可以创建一个组合两个（或更多）其他图标的图标。参见例如[http://tips4java.wordpress.com/2009/03/29/compound-icon/](http://tips4java.wordpress.com/2009/03/29/compound-icon/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:51:01.650

用于呈现树节点的默认组件是 JLabel。因此，您可以访问该`setIcon`方法。

但是如果你想为一个节点设置两个图标，你需要创建一个 JPanel，里面有两个标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T09:59:14.233

*   `(J)Component`/ `JLabel`（由返回`Renderer`）没有`LayoutManager`在 API 中实现

*   right`JLabel`有`Text`and的构造函数`Icon`，没有其他的地方`Icon`

*   基本上每个`JComponents`都是容器，部分`Containers`已经`LayoutManager`在 API ( `JFrame`, `JPanel`) 中实现，你可以把任何一个放到`JComponent`另一个

*   [例如](https://stackoverflow.com/q/8575641/714968)

*   camickr[的出色解决方法，尤其是](http://tips4java.wordpress.com/?s=icon)`Compound Icon`

# c# - 如何使用“本地服务”而不是“本地系统”？

> ID：12911679
> 
> 赞同：3
> 
> 时间：2012-10-16T09:38:03.123
> 
> 标签：c#, windows-services

我使用 ServiceProcessInstaller 安装了我的 C# 服务（目前在 Windows 7 上；我读过它仅*在*XP 和 2003 之后才存在，但它应该是我需要处理的全部内容）。我的服务可以在“本地系统”下运行，但不能在“本地服务”或“网络服务”下运行。即使我的服务基本上是空的（见下面的代码），我仍然得到

> Windows 无法在本地计算机上启动 [服务名称] 服务。错误 5：访问被拒绝。

这是我的大部分空服务： 编辑我更新了代码以赋予“本地服务”必要的访问权限。

```
// Needs System.Configuration.Install.dll and System.ServiceProcess.dll
using System;
using System.Collections;
using System.ComponentModel;
using System.Configuration.Install;
using System.Linq;
using System.Reflection;
using System.ServiceProcess;

namespace ServiceTest
{
    static class Constants
    {
    public const string LocalServiceAcctName = @"NT AUTHORITY\LOCAL SERVICE";
        public const string ServiceName = "MySvc";
    }

    class Program
    {
        /// <summary>
        /// Main entry point.
        /// </summary>
        /// <param name="args">
        ///     If the 1st argument is "i", it will simply install the service.
        ///     If it's something else, it will run as a Console application.
        ///     If it's empty, it will run as a service.
        /// </param>
        static void Main(string[] args)
        {
            if (args != null && args.Length != 0 && args[0] == "i")
            {
                bool result = InstallService(Assembly.GetExecutingAssembly().Location, Constants.ServiceName);
                Console.WriteLine(result ? "INSTALLED" : "ERROR INSTALLING");
                Console.ReadLine();
            }
            else
            {
                var host = new Host();
                bool runAsSvc = args == null || args.Length == 0;
                host.Launch(runAsSvc);
            }
        }

        static bool InstallService(string exeFullPath, string serviceName)
        {
            AssemblyInstaller installer = new AssemblyInstaller(exeFullPath, null);

            if (ServiceController.GetServices().Any(svcCtlr => svcCtlr.ServiceName == serviceName))
                installer.Uninstall(null);

            Hashtable dico = new Hashtable();
            installer.Install(dico);
            installer.Commit(dico);

        // Gives "Local Service" the necessary rights on the folder and subfolders and files.
        DirectoryInfo dirInfo = new DirectoryInfo(Path.GetDirectoryName(exeFullPath));
        DirectorySecurity dirSec = dirInfo.GetAccessControl(AccessControlSections.Access);

        FileSystemRights rights = FileSystemRights.Modify;
        AccessControlType accessType = AccessControlType.Allow;
        dirSec.AddAccessRule(new FileSystemAccessRule(Constants.LocalServiceAcctName, rights, InheritanceFlags.ObjectInherit, PropagationFlags.InheritOnly, accessType));
        dirSec.AddAccessRule(new FileSystemAccessRule(Constants.LocalServiceAcctName, rights, InheritanceFlags.ContainerInherit, PropagationFlags.InheritOnly, accessType));
        dirSec.AddAccessRule(new FileSystemAccessRule(Constants.LocalServiceAcctName, rights, accessType));
        dirInfo.SetAccessControl(dirSec);

            return true;
        }
    }

    class Host
    {
        internal void Launch(bool runAsSvc)
        {
            if (runAsSvc)
                RuntimeService.CreateAndRun(this);
            else
            {
                OnStart();
                Console.WriteLine("Component started as a Console app.");
                Console.WriteLine("We work a lot...and then we're done.");
                OnStop();

                Console.WriteLine("Press enter to stop.");
                Console.ReadLine();
            }
        }

        internal void OnStart() { Console.WriteLine("We're starting!"); }

        internal void OnStop() { Console.WriteLine("We're stopping..."); }
    }

    class RuntimeService : ServiceBase
    {
        Host _host;

        public RuntimeService(Host host) { _host = host; }

        protected override void OnStart(string[] args) { _host.OnStart(); }

        protected override void OnStop() { _host.OnStop(); }

        internal static void CreateAndRun(Host host) { ServiceBase.Run(new RuntimeService(host)); }
    }

    /// <summary>
    /// Class used to install the service.
    /// </summary>
    [RunInstaller(true)]
    public class RuntimeInstaller : Installer
    {
        public RuntimeInstaller()
        {
            var processInstaller = new ServiceProcessInstaller();
            processInstaller.Account = ServiceAccount.LocalService; // ServiceAccount.LocalSystem;

            var serviceInstaller = new ServiceInstaller();
            serviceInstaller.StartType = ServiceStartMode.Automatic;
            serviceInstaller.ServiceName = Constants.ServiceName;

            Installers.Add(serviceInstaller);
            Installers.Add(processInstaller);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:58:07.777

您在哪里安装了该服务？该错误似乎表明本地服务帐户无权访问服务位置。因此，服务管理器甚至无法加载可执行文件并使其运行，更不用说启动服务了。

我经常看到开发人员在开发/调试服务时这样做。他们从其中一个开发文件夹安装服务，但将其设置为在另一个帐户下运行。但默认情况下，只有用户、系统和管理员组有权访问用户的文件夹 - 因此服务失败并出现访问被拒绝错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:10:00.357

您使用什么操作系统？

根据[微软](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount%28v=vs.110%29.aspx)

> LocalService 和 NetworkService 值仅适用于 Windows XP 和 Windows Server 2003 家族。

当我第一次[在这里](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount%28v=vs.71%29.aspx)阅读此评论时，我认为它是在这些操作系统是最新版本时编写的，并且用于排除早期的操作系统，但此评论仍然存在于最新文档中。

# c++ - 内联函数中的断点未命中

> ID：12911683
> 
> 赞同：9
> 
> 时间：2012-10-16T09:38:10.630
> 
> 标签：c++, visual-studio, inline, breakpoints

我有一个以下列方式声明的类：

```
#ifndef MYCLASS_H
#define MYCLASS_H

class MyClass : public MyOtherClass
{

public:
    MyClass();

    int a() const{ return _a; };
    int b() const{ return _b; };

private:
    int _a;
    int _b;
};

inline bool operator==( const MyClass& lhs, const MyClass& rhs )
{
    return (lhs.a() == rhs.a()) && (lhs.b() == rhs.b());
}

#endif 
```

我的问题是重载中设置的任何断点都`operator==`不会被命中，Visual Studio 甚至告诉我执行永远不会到达这个函数。我遵循[这个](https://stackoverflow.com/questions/4421706/operator-overloading/4421719#4421719)经验法则来重载比较运算符，但除了使它们成为非成员之外，它没有提到任何其他内容，所以我不确定我是否错过了运算符重载或内联函数的某些内容。

谁能告诉我为什么我的断点永远不会被击中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T09:40:22.550

您的断点永远不会被命中，因为编译器正在内联代码。在该内联函数中设置断点可能意味着设置数百或数千个“虚拟”断点。跟踪哪些代码被内联在哪里对于 IDE 来说工作量太大了，因此它没有这样做。

为了解决这个问题，要么在调试中运行（我认为内联不会发生），要么不内联函数。

您还可以使用 /Od 标志进行编译以禁用内联以及所有其他优化（这是它在调试中所做的）。

设置 /Ob0 标志应该禁止内联发生。但是，出于性能原因，建议不要经常这样做，因此最好在调试中运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T10:16:57.750

由于 OP 提到他在 VS 中使用调试模式，因此我尝试复制它并且可以复制它。

```
1>Remove /ZI flag  (no debug infomration) but set it /Zi instead.
2>Disable /Od flag (so no inline) & set it to /Od2. 
```

通过这种方式，您可以添加普通断点，因为它确实被内联，所以无法进入内联函数断点。

所以克里斯威尔逊，你能去你的项目财产并确保你有

```
1>/ZI flag is set.
2>/Od flag is disabled. 
```

如果您不知道如何操作，请查看下面的两个 MSDN 链接以获取这两个标志。

[http://msdn.microsoft.com/en-us/library/47238hez(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/47238hez(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/958x11bc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/958x11bc(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:51:19.200

`inline`并不意味着函数体将在每个调用站点中内联。实际上，即使没有明确定义，编译器也可以内联函数`inline`。一个函数可以在一个调用点内联，在另一个调用点正常调用。该指令只是对编译器的提示。Visual Studio 调试器适用于内联函数。

我认为这个问题不是由`inline`指令引起的。尝试删除此指令并在调试器下运行您的代码。为这样的情况编写单元测试非常方便。

# android - JNI 将字符串从 c++ 导出到 java

> ID：12911684
> 
> 赞同：1
> 
> 时间：2012-10-16T09:38:16.670
> 
> 标签：android, java-native-interface, native

我有一个用 C++ 编写的课程。我想编写一个方法来返回一个字符串，这样我就可以从我的 java 类中读取它。我试图做类似的事情：

读取字符串.cpp：

```
#include "common.h"
#include <string.h>

#ifdef __cplusplus
extern "C" {
#endif  /* __cplusplus */

/************
 * ReadString *
 ************/

 jstring Java_com_googlecode_leptonica_android_ReadFile__getString(JNIEnv *env, jclass clazz)
{
  jstring result = env->NewStringUTF("My String");
 return result;
}

#ifdef __cplusplus
}
#endif  /* __cplusplus */ 
```

读取字符串.java：

```
package com.testjni;

    public class ReadString {

        static {
            System.loadLibrary("lept");
        }

        public String getText(){
            return getString();
        }
        private static native String getString();
    } 
```

从活动中读取字符串：

```
public class TestJNI extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ReadString readString = new ReadString();
        Toast.makeText(this, readString.getText(), Toast.LENGTH_SHORT).show();
    }
} 
```

堆栈跟踪是：

10-16 12:35:09.974: 错误/AndroidRuntime(12303): 致命异常: main java.lang.UnsatisfiedLinkError: getString at com.testjni.ReadString.getString(Native Method) at com.testjni.ReadString.getText(ReadString. java:10) 在 com.testjni.TestJNI.onCreate(TestJNI.java:13) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780) 在android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837) 在 android.app.ActivityThread.access$1500(ActivityThread.java:132) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033) 在 android。 os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:143) 在 android.app。ActivityThread.main(ActivityThread.java:4196) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal.os。 ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 在 dalvik.system.NativeStart.main(Native Method)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:57:04.937

“Java_com_googlecode_leptonica_android_ReadFile__getString”

这里你的包是“com.googlecode.leptonica.android”，类是“ReadFile”，函数是“getString”。

实际上你没有在你的代码中提到这个函数。请检查一下。

像这样使用

"Java_com_testjni_ReadString__getString()" 在你的 c 代码中，而不是

“Java_com_googlecode_leptonica_android_ReadFile__getString”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:02:49.677

本教程可能会对您有所帮助

[http://marakana.com/bookshelf/java_fundamentals_tutorial/_java_native_interface_jni.html](http://marakana.com/bookshelf/java_fundamentals_tutorial/_java_native_interface_jni.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:40:41.223

您没有在 .c 文件中包含生成的 .h 文件，或者根本没有生成 .c 文件，或者您已经从生成的内容中破坏了函数声明。

# symfony - Symfony 使用映射的虚假表单字段验证表单

> ID：12911686
> 
> 赞同：32
> 
> 时间：2012-10-16T09:38:26.997
> 
> 标签：symfony, validation, symfony-forms

我有一个带有额外字段的表单，其中添加`mapped`了`false`. 但是当我尝试验证我的表单时，它不会在这些特定表单字段上方指示“此值无效”。这个选项不应该绕过验证吗？

这些表单字段仅对填充其他字段有用，我不需要保存甚至检查它们。

我找到的唯一解决方案是在单击提交按钮时使用 js 删除所有额外字段。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-26T12:10:24.447

# 这篇文章不是最新的 Symfony 2.3

# 阅读下面的评论

# 新版本来了！

# 验证表单中的非映射字段（Symfony 2.1.2）

这是对有关当前验证表单中无界或非映射字段的方法的一些 stackoverflow 问题的全球响应。

*   [对未绑定的表单字段进行验证](https://stackoverflow.com/questions/11397195/validation-on-unbound-form-field)
*   [如何在 symfony2 中向未绑定的表单字段添加验证](https://stackoverflow.com/questions/11995440/how-to-add-validation-to-unbound-form-field-in-symfony2)
*   一个更……

丰富的 Symfony 2 生态系统使我们选择的框架成为快速发展的工具。
Symfony 2.1 版本带来了很多弃用。这意味着在 Symfony 2.0 到 2.1.2 中工作的内容将不再在 Symfony 2.3 中工作。有关这方面的更多信息，请阅读[从 Symfony 2.0 升级到 2.1](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)并阅读 Symfony 代码中的@deprecated 注释。

## 未绑定字段

在构建表单时，您通常会使用 Entities，而您的验证可以在 Entity 本身的容器中进行 Validation 注解。

```
namespace Dj\TestBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**    
 * Dj\TestBundle\Entity\Post
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Dj\TestBundle\Entity\PostRepository")
 */
class Post
{
    // ... some code

    /**
    * @var string $title
    * @ORM\Column(name="title", type="string", length=200, nullable=false)
    * @Assert\NotBlank()
    */
    private $title;

    // .. getters and setters
} 
```

但有时（通常）您需要在表单中插入一些未映射到模型的字段。

我们的模型示例是这样的：

```
namespace Dj\TestBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Dj\TestBundle\Entity\Post
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Dj\TestBundle\Entity\PostRepository")
 */
class Post
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**ghjkl
     * @var string $title
     * @ORM\Column(name="title", type="string", length=200, nullable=false)
     * @Assert\NotBlank()
     */
    private $title;

    // ... getters and setters
} 
```

如果我们想在我们的表单中添加一个名为**myExtraField**的额外字段，我们这样做：

```
class PostType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('title')
                ->add('myExtraField', 'choice', array(
                        'label' => 'myExtraField option :',
                        'choices' => array(
                            1 => 'Option One',
                            2 => 'Option Wat !'
                        ),
                        'expanded' => true,
                        'mapped' => false
                   ));
    }
    // other methods
} 
```

笔记 ：

*   **mapped**替换了将在 Symfony 2.3 中弃用的**property_path**
*   您可以通过在选项数组中添加**'data' => 1**条目来向 myExtraField 添加默认选定值。

示例代码：

```
$builder->add('title')
    ->add('myExtraField', 'choice', array(
        'label' => 'myExtraField option :',
        'choices' => array(
            1 => 'Option One',
            2 => 'Option Wat !'
        ),
        'data' => 1, // default selected option
        'expanded' => true,
        'mapped' => false
)); 
```

如果要验证**myExtraField**字段，则不能在 Post Entity 注释中进行，必须在表单中进行。

## 验证非映射字段 - Symfony 2.0 方式

2.0 的方法是在表单构建器中添加一个验证器（$builder->addValidator(..)），但是这个方法已经被弃用了！

```
namespace Dj\TestBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

// needed namespaces for 2.0 validation
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormError;

class PostType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // ... $builder->add()

        // VALIDATING NON MAPPED FIELD Symfony 2.0 way
        /** @var Symfony\Component\Form\CallbackValidator $myExtraFieldValidator **/
        $myExtraFieldValidator = new CallbackValidator(function(FormInterface $form){
          $myExtraField = $form->get('myExtraField')->getData();
            if (empty($myExtraField)) {
              $form['myExtraField']->addError(new FormError("myExtraField must not be empty"));
            }
        });
        // adding the validator to the FormBuilderInterface
        $builder->addValidator($myExtraFieldValidator);
    }
    // ... other methods
} 
```

这目前正在验证 myExtraField 字段，但*$builder->addValidator*将在 Symfony 2.3 中消失！

## 前向兼容代码

正如[从 Symfony 2.0 升级到 2.1](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)中所述，由于*FormValidatorInterface*已被弃用，我们现在必须将验证闭包函数传递给绑定到 FormEvents::POST_BIND 事件的事件侦听器。

这是代码。

```
namespace Dj\TestBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

// needed namespaces for 2.1 validation
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\FormError;

class PostType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // ... $builder->add()

        // VALIDATING NON MAPPED FIELD Symfony 2.1.2 way (and forward)
        /** @var \closure $myExtraFieldValidator **/
        $myExtraFieldValidator = function(FormEvent $event){
            $form = $event->getForm();
            $myExtraField = $form->get('myExtraField')->getData();
            if (empty($myExtraField)) {
              $form['myExtraField']->addError(new FormError("myExtraField must not be empty"));
            }
        };

        // adding the validator to the FormBuilderInterface
        $builder->addEventListener(FormEvents::POST_BIND, $myExtraFieldValidator);
    }
    // ... other methods
} 
```

这当然可以通过一些 Sf 专家的帮助来改进，但现在它以向前兼容的方式验证未绑定的表单字段。

希望这有助于我们中的一些人摆脱困境。

大卫

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-07-31T06:05:54.060

[正如我在一个关于类似主题的问题中提到的那样](https://stackoverflow.com/questions/17962398/add-validation-constraints-on-mapped-false-fields-for-a-specific-validation-gr/17962688#17962688)，[从 Symfony 2.1 开始，您应该使用“约束”选项来为您的未映射字段添加验证：](http://symfony.com/blog/form-goodness-in-symfony-2-1)

```
use Symfony\Component\Validator\Constraints\MinLength;
use Symfony\Component\Validator\Constraints\NotBlank;

$builder
    ->add('firstName', 'text', array(
        'constraints' => new MinLength(3),
    ))
    ->add('lastName', 'text', array(
        'constraints' => array(
            new NotBlank(),
            new MinLength(3),
        ),
    ))
; 
```

希望它能帮助像我这样在这方面浪费时间的人......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-18T03:39:27.823

如果您*已经在*使用约束，那么您可以这样做：

```
$builder
    ->add('new', 'repeated', array(
            'type' => 'password',
            'required'          => true,                    
            'invalid_message' => 'crmpicco.status.password_mismatch',
            'constraints'       => array(
                new NotBlank(),
                new Assert\Length([
                    'min'        => 2,
                    'max'        => 50,
                    'minMessage' => 'Your first name must be at least 2  characters long',
                    'maxMessage' => 'Your first name cannot be longer than 2 characters',
                ])
            )
        ))
    ->add('save', 'submit', array(
            'label' => 'password.form.fields.save',
        ))
    ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T03:50:46.960

其作品。检查 symfony 2.1。代码应该是这样的：

```
$builder->add('password', 'password', ['required' => false, 'mapped' => false]); 
```

当然，属性“必需”不是必需的。[文档中的示例。](http://symfony.com/doc/2.1/book/forms.html#building-the-form)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-19T09:21:29.450

Symfony 3.4 基于非映射字段的表达式约束：

```
$resolver->setDefaults([
        'data_class' => MyClass::class,
        'constraints' => [
            new Expression([
                'expression' => 'this["endTime"].getData() >= this["startTime"].getData()',
                'message' => 'L\'heure de fin doit être plus grande ou égale à l\'heure de début'
            ])
        ]
    ]); 
```

# ruby-on-rails - 具有许多属性（> 50 个文本字段）的 Rails 模型会影响性能吗？

> ID：12911687
> 
> 赞同：1
> 
> 时间：2012-10-16T09:38:31.357
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

我有一个模型`Account`，并且`Account`为应用程序的每个请求加载了一个对象。

数据库调用很便宜，因为它缓存了它——所以这纯粹是一个 Rails 问题。

如果这个模型有 50 或 100 个文本字段。无论如何这会影响性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:50:48.570

`Yes`，当然会影响性能。我会建议您是否不需要所有 50 或 100 个字段`select`来`ActiveModel`选择实际需要的列

```
ModelName.select('field1, field2').where(<SOME CONDITION>) 
```

注意：- 如果您需要较少的字段（例如 50 个中的 10 个）存在于表中，这将很有用。

# android - 无法获取正确位置

> ID：12911689
> 
> 赞同：0
> 
> 时间：2012-10-16T09:38:41.070
> 
> 标签：android, geolocation, gps

我的位置为：

```
 LocationManager locationManager;
                GeoPoint p; 
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

                boolean gps_enabled = locationManager
                        .isProviderEnabled(LocationManager.GPS_PROVIDER);
                if (gps_enabled) {
                    Location location = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                } 
```

但是，`gps_enabled=true`位置=null。为什么无法获取我的位置？你能帮助我吗？如果我通过 NETWORK_PROVIDER 就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:56:30.913

有很多事情。GPS 可能来自所谓的“冷启动”，它不知道它在哪里。在这些情况下，最后一个已知位置为空。您也可能处于没有信号的位置以获取位置修复。它也可能是一个糟糕的 GPS 或一个糟糕的 GPS 驱动程序（*咳嗽*三星*咳嗽*）。这些东西都不准确。

首先，我将从这个文档开始。[位置获取策略](http://developer.android.com/guide/topics/location/strategies.html)

接下来，让我们评估一下这里的逻辑。是的，GPS 已启用。但是，在这种情况下，启用意味着它已启用以供具有精细位置权限的应用程序使用。启用并不意味着它当前处于活动状态并正在获取位置。但有一个好消息！您可以创建监听器或订阅位置更新。

因此，正如其他人所提到的，请确保您在清单中设置了权限。我假设您这样做，否则您的应用程序可能会因`getLastKnownLocation()`通话权限问题而崩溃并烧毁。

然后要接收位置更新，请查看[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)类。通过实现此接口，您可以使用`locationManager.requestLocationUpdates()`从 GPS 注册位置更新。

使用您的代码（我假设一些事情，比如它在一个活动中，并且正在描述的方法在 UI 线程上调用）：

```
public class MyActivity extends Activity implements LocationListener {
  // The rest of the interface is not really relevant for the example
  public void onProviderDisabled(String provider) { }
  public void onProviderEnabled(String provider) { }
  public void onStatusChanged(String provider, int status, Bundle extras) { }

  // When a new location is available from the Location Provider,
  // this method will be called.
  public void onLocationChanged(Location location) {
        // You should do whatever it was that required the location
        doStuffWithLocation(location);
        // AND for the sake of your users' battery stop listening for updates
        (LocationManager) getSystemService(LOCATION_SERVICE).removeUpdates(this);
        // and cleanup any UI views that were informing of the delay
        dismissLoadingSpinner();
  }

  // Then in whatever code you have
  public void methodA() {
    LocationManager locationManager;
    GeoPoint p; 
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    boolean gps_enabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    if (gps_enabled) {
      Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
      if (location == null) {
            // When it is null, register for update notifications.
            // run this on the UI Thread if need be
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
            // Since this might take some time you should give the user a sense
            // that progress is being made, i.e. an indeterminate ProgressBar 
            showLoadingSpinner();
      } else {
            // Otherwise just use the location as you were about to
            doStuffWithLocation(location);
      }
    }
    ... 
```

这应该像您期望的那样运行您的代码，然后在 GPS 没有位置的情况下，您启动它并等待直到您获得位置。一旦发生这种情况，您将其关闭并按照您的计划使用它。这是一种幼稚的方法，但您应该能够将其用作简单的基础。真正的解决方案应该考虑没有机会获得位置的情况，处理位置提供程序不可用或在您等待位置时变得不可用的情况，并验证位置的健全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:44:19.317

您是否在清单中添加了这些权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

编辑：

通过[这个链接](http://developer.android.com/guide/topics/location/strategies.html)。它提供了不同的策略来查找位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:45:28.617

在清单中，您是否授予了权限..

```
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T09:46:06.270

该方法`getLastKnownLocation()`仅返回 GPS 获取的最后一个位置，而无需打开它。例如，如果你重新启动你的手机，缓存将被清理，GPS 将不会返回任何缓存的位置，直到你启动它并让它至少获取一个位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T09:48:07.500

使用代码：

```
 // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
    System.out.println("Provider " + provider + " has been selected.");
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());

    Log.i(TAG, "Lattitude:" +lat);
    Log.i(TAG, "Longitude:" +lng);

    } else {
      System.out.println("Location not avilable");
    }
  } 
```

# c# - 开关：一种情况下有多个值？

> ID：12911691
> 
> 赞同：31
> 
> 时间：2012-10-16T09:38:44.770
> 
> 标签：c#, switch-statement, case

我有以下一段代码，但是当我输入“12”时，我仍然得到“你是个老人”。9 - 15 不是 9 到 15 的数字吗？我如何在一种情况下处理多个值？

```
 int age = Convert.ToInt32(txtBoxAge.Text);

  switch (age) 

  {
    case 1 - 8:
  MessageBox.Show("You are only " + age + " years old\n You must be kidding right.\nPlease fill in your *real* age.");
    break;
    case 9 - 15:
  MessageBox.Show("You are only " + age + " years old\n That's too young!");
    break;
    case 16-100:
  MessageBox.Show("You are " + age + " years old\n Perfect.");
    break;
    default:
  MessageBox.Show("You an old person.");
    break;
  } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-16T09:40:52.517

1 - 8 = -7

9 - 15 = -6

16 - 100 = -84

你有：

```
case -7:
    ...
    break;
case -6:
    ...
    break;
case -84:
    ...
    break; 
```

*要么*使用：

```
case 1:
case 2: 
case 3: 
```

等，*或者*（也许更易读）使用：

```
if(age >= 1 && age <= 8) {
     ...
} else if (age >= 9 && age <= 15) {
     ...
} else if (age >= 16 && age <= 100) {
     ...
} else {
     ...
} 
```

ETC

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-16T09:40:38.993

您必须执行以下操作：

```
case 1:
case 2:
case 3:
//do stuff
break; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-16T09:49:30.257

您不能在 case 语句中指定范围，可以执行以下操作。

```
case 1:
case 2:
case 3:
case 4:
case 5:
case 6:
case 7:
case 8:
   MessageBox.Show("You are only " + age + " years old\n You must be kidding right.\nPlease fill in your *real* age.");
break;

case 9:
case 10:
case 11:
case 12:
case 13:
case 14:
case 15:
   MessageBox.Show("You are only " + age + " years old\n That's too young!");
   break; 
```

...........ETC。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-10T15:36:36.787

在 C# 7 中，可以[在 case 语句中使用 when 子句](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/switch#the-case-statement-and-the-when-clause)。

```
int age = 12;
switch (age) 
{
  case int i when i >=1 && i <= 8:
    System.Console.WriteLine("You are only " + age + " years old. You must be kidding right. Please fill in your *real* age.");
    break;
  case int i when i >=9 && i <= 15:
    System.Console.WriteLine("You are only " + age + " years old. That's too young!");
    break;
  case int i when i >=16 && i <= 100:
    System.Console.WriteLine("You are " + age + " years old. Perfect.");
    break;
  default:
    System.Console.WriteLine("You an old person.");
    break;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-31T07:39:26.860

您可以使用 ifelse 代替。但是如果您想知道在这种情况下如何使用 switch。这里是一个示例。

```
int age = Convert.ToInt32(txtBoxAge.Text);`
int flag;
if(age >= 1 && age <= 8) {
flag = 1;
} else if (age >= 9 && age <= 15) {
 flag = 2;
} else if (age >= 16 && age <= 100) {
 flag = 3;
} else {
 flag = 4;   
}
switch (flag) 

{
 case 1:
  MessageBox.Show("You are only " + age + " years old\n You must be kidding right.\nPlease fill in your *real* age.");
break;
case 2:
  MessageBox.Show("You are only " + age + " years old\n That's too young!");
break;
case 3:
  MessageBox.Show("You are " + age + " years old\n Perfect.");
break;
default:
  MessageBox.Show("You an old person.");
break;
} 
```

希望有帮助！:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-16T18:35:56.883

`C# 8.0`您可以使用适合您情况的switch[表达式语法。](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8#switch-expressions)

```
int age = Convert.ToInt32(txtBoxAge.Text);

string message = age switch
{
    >= 1 and <= 8 => $"You are only {age} years old\n You must be kidding right.\nPlease fill in your *real* age.",
    >= 9 and <= 15 => $"You are only {age} years old\n That's too young!",
    >= 16 and <= 100 => $"You are {age} years old\n Perfect.",
    _ => "You an old person.",
};

MessageBox.Show(message); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-03T16:41:23.453

你可以试试这个。

```
开关（勇气）
            {
                案例（Valor1 和 Valor2）：

                    休息;               
            }

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-16T21:27:40.233

没有办法在一个“案例”中评估多个值。您可以使用 if 语句（如其他人所建议的那样）或调用一个方法来评估整数所属的范围并返回一个表示该范围的值（例如“minor”、“adult”等），然后在 switch 语句中评估这个返回值。当然，您可能仍在自定义方法中使用 if 语句。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-05T00:57:13.573

将年龄的业务规则与操作分开，例如（NB 只是输入，未检查）

```
enum eAgerange { eChild, eYouth, eAdult, eAncient};
eAgeRange ar;
if(age <= 8) ar = eChild;
else if(age <= 15) ar = eYouth;
else if(age <= 100) ar = eAdult;
else ar = eAncient;
switch(ar)
{
 case eChild: 
     // action
 case eYouth:
     // action
 case eAdult:
     // action
 case eAncient:
     // action
 default: throw new NotImplementedException($"Oops {ar.ToString()} not handled");
} 
```

`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-13T12:29:51.397

那这个呢？

```
switch (true) 
{
    case (age >= 1 && age <= 8):
        MessageBox.Show("You are only " + age + " years old\n You must be kidding right.\nPlease fill in your *real* age.");
    break;
    case (age >= 9 && age <= 15):
        MessageBox.Show("You are only " + age + " years old\n That's too young!");
    break;
    case (age >= 16 && age <= 100):
        MessageBox.Show("You are " + age + " years old\n Perfect.");
    break;
    default:
        MessageBox.Show("You an old person.");
    break;
} 
```

干杯

# vb.net - 并行循环和 Nlog

> ID：12911693
> 
> 赞同：2
> 
> 时间：2012-10-16T09:38:45.943
> 
> 标签：vb.net, parallel-processing, nlog

我对为其创建日志的 parallel.for 循环中的文件执行一些操作。但我需要知道哪个操作创建了一个特定的日志条目。我尝试在我的 nlog-config 中使用 {ThreadID}，但 threadID 被 parallel.for 循环重用，因此似乎没有唯一标识符。任何建议如何给每个文件一个唯一的日志标识符？

基本代码：

```
Private Sub DoParallel
 Private Logger As NLog.Logger = NLog.LogManager.GetCurrentClassLogger 
 Dim ListOfFolder as New List(of String)
 ListOfFolder.add("C:\Test.txt")

 Parallel.ForEach(listOfFolders, Sub(elem As String)
     logger.warn("Doing stuff, need to know on which elem it is done")
  End Sub)
End Sub 
```

日志配置：

```
 layout="${threadid} | ${time} | ${level:uppercase=true} | ${logger} | ${message} | ${exception}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:15:33.503

您可以尝试使用[Trace.CorrelationManager.ActivityId](http://msdn.microsoft.com/en-us/library/system.diagnostics.correlationmanager.aspx)。您可以设置一个值，然后使用自定义 NLog LayoutRenderer 将该值呈现到输出日志。[您可以在 SO 上找到执行此](https://stackoverflow.com/questions/4091606/most-useful-nlog-configurations)操作的 LayoutRenderer 示例。在最佳答案的中间查看。

这是该帖子中 LayoutRender 的代码（请注意，它是针对 NLog 1.0 而不是 NLog 2.0 编写的。应该不难更新）。

```
[LayoutRenderer("ActivityId")]
class ActivityIdLayoutRenderer : LayoutRenderer
{
  int estimatedSize = Guid.Empty.ToString().Length;

  protected override void Append(StringBuilder builder, LogEventInfo logEvent)
  {
    builder.Append(Trace.CorrelationManager.ActivityId);
  }

  protected override int GetEstimatedBufferSize(LogEventInfo logEvent)
  {
    return estimatedSize;
  }
} 
```

你的 NLog.config 看起来像这样：

告诉 NLog 你的 NLog 扩展在哪里：

```
<extensions>
    <add assembly="MyNLogExtensions"/>
</extensions>

layout="${threadid} | ${ActivityId} | ${time} | ${level:uppercase=true} | ${logger} | ${message} | ${exception}" 
```

使用您的原始示例代码，您可以记录如下内容：

```
Private Sub DoParallel
 Private Logger As NLog.Logger = NLog.LogManager.GetCurrentClassLogger 
 Dim ListOfFolder as New List(of String)
 ListOfFolder.add("C:\Test.txt")

 Trace.CorrelationManager.ActivityId = Guid.Empty;
 Parallel.ForEach(listOfFolders, Sub(elem As String)
     Trace.CorrelationManager.ActivityId = Guid.NewGuid();
     logger.warn("Doing stuff, need to know on which elem it is done")
     Trace.CorrelationManager.ActivityId = Guid.Empty;
  End Sub)
End Sub 
```

这应该唯一标识每个日志记录语句，并且如果您的操作中有更多代码行，那么来自给定操作执行的所有日志记录语句都将使用相同的 guid 进行标记。

如果这种方法适合您，您可以轻松地将 ActivityId 设置/取消设置包装在 IDisposable 类中，并使用 using 语句来自动化该过程。

请原谅 C#：

```
public class ActivityIdContext : IDisposable
{
  Guid oldActivityId;

  public ActivityIdContext(Guid id)
  {
    oldActivityId = Trace.CorrelationManager.ActivityId;
    Trace.CorrelationManager.ActivityId = Guid.NewGuid();
  }

  public ActivityIdContext() : this(Guid.NewGuid()) { }

  public Dispose()
  {
    Trace.CorrelationManager.ActivityId = oldActivityId;
  }
} 
```

然后，您可以包含 Parallel.ForEach 动作的主体来执行类似的操作（同样，在 C# 中）

```
Parallel.ForEach(listOfFolders, () =>
{
  using(new ActivityIdContext())
  {
    logger.Warn("Hello!  I hope the ActivityId helps!");
  }
}); 
```

# php - 如何用php创建一个多维数组

> ID：12911694
> 
> 赞同：0
> 
> 时间：2012-10-16T09:38:46.653
> 
> 标签：php, multidimensional-array

我想创建这个数组

```
Array (
    [1] => Array (
        [qual] => 1
        [race] => 3
        [finish] => 1
    )
    [2] => Array (
        [qual] => 2
        [race] => 1
        [finish] => 1
) 
```

数字 [1] 和 [2] 是驱动程序 ID。这就是我从数据库中获取数据的方式

```
$raceUitslagArray = array();
$sqlRaceUitslag = mysql_query("SELECT uitslag.rijderId AS rijderId, combinatie.Chassis     AS chassis, combinatie.Motor AS motor, uitslag.qual AS qual, uitslag.race AS race, uitslag.finish AS finish
                FROM uitslag, combinatie
                    WHERE combinatie.Rijder = uitslag.rijderId && uitslag.raceId = '".$_POST['raceId']."'");
while($inhoudRaceUitslag = mysql_fetch_array($sqlRaceUitslag)) { 
```

我需要在数组中的数据是

```
$inhoudRaceUitslag['qual'] 
$inhoudRaceUitslag['race'] 
$inhoudRaceUitslag['finish'] 
$inhoudRaceUitslag['rijderId'] 
```

我想我应该使用**array_push($raceUitslagArray,$inhoudRaceUitslag['rijderId']);** 但我不知道如何获取数组中的所有信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:43:36.783

这比你想象的要容易得多。`$inhoudRaceUitslag`是一个（关联）数组，由 mysql_fetch_array 返回。您可以简单地将其关联地添加到 中`$raceUitslagArray`，如下所示：

```
while($inhoudRaceUitslag = mysql_fetch_array($sqlRaceUitslag)) {
    $raceUitslagArray[$inhoudRaceUitslag['rijderId']] = $inhoudRaceUitslag;
} 
```

这样，您将`$inhoudRaceUitslag['rijderId']`用作*key*，并将整个返回的行（存储在 中`$inhoudRaceUitslag`）用作*value*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:48:52.787

尝试这个：

```
$raceUitslagArray = array();
$sqlRaceUitslag = mysql_query("SELECT uitslag.rijderId AS rijderId, combinatie.Chassis AS chassis, combinatie.Motor AS motor,  uitslag.qual AS qual, uitslag.race AS race, uitslag.finish AS finish FROM uitslag, combinatie WHERE combinatie.Rijder = itslag.rijderId && uitslag.raceId = '".$_POST['raceId']."'");
$result = array();
$i = 1;
while($inhoudRaceUitslag = mysql_fetch_array($sqlRaceUitslag, MYSQL_ASSOC)) {
$result[$i++] = $inhoudRaceUitslag; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T09:45:05.080

以下行

```
while( $results[@$i++] = mysql_fetch_array( $result ) ) {} 
```

…会将您的整个数据库结果存储为一个名为`$results`.

来源： http: [//php.net/manual/en/function.mysql-fetch-array.php#110315](http://php.net/manual/en/function.mysql-fetch-array.php#110315)

# asp.net - SEO Frinedly URL 的 URL 路由

> ID：12911697
> 
> 赞同：0
> 
> 时间：2012-10-16T09:39:00.287
> 
> 标签：asp.net, asp.net-mvc-2, asp.net-mvc-routing

我想创建一些 SEO 友好的 URL。

以下是我的 Global.ascx 条目：

```
 路线.MapRoute(
     “产品”，
     "{action}/{param1}/{id}",
     新的{控制器=“家”，动作=“索引”}）；

 路线.MapRoute(
     “默认”，
     "{controller}/{action}/{id}",
     新的{控制器=“家”，动作=“索引”，id=UrlParameter.Optional}）；

```

第一个映射是因为我不想在 url 中显示我的控制器名称。下一个映射用于 URL 的其余部分。

问题是有一些 URL 给了我一个错误，比如：

```
http://localhost:1234/index/my-product-information/12 ：通过
http://localhost:1234/contentcontrol/index ：通过
http://localhost:1234/contentcontrol/index/12：失败

```

在这里，索引：动作名称内容控制：控制器名称

我应该如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:18:00.917

您遇到的问题是，当涉及到对具有 3 个段的 URL 的请求时，没有什么可以区分您的第一个路由和第二个路由，因此第一个路由捕获所有这些请求并“隐藏”第二个请求。要绕过它，您必须区分两条路线，例如通过制作第一个路线模式：

```
"/Go/{action}/{param1}/{id}" 
```

# android - 同一应用程序中 2 个 Android 手机实例之间的消息传递

> ID：12911706
> 
> 赞同：0
> 
> 时间：2012-10-16T09:39:35.223
> 
> 标签：android, ipc, distributed-computing

> **可能重复：**
> [2 部 Android 手机之间的通信](https://stackoverflow.com/questions/12860177/communication-between-2-android-phones)

我的应用程序有 2 个实例。我想将消息（文件）从电话 1 传递到电话 2（使用 HTTP 协议）。电话 2 确认电话 1 并开始处理文件。它将更新的文件作为消息发送到电话 1。这应该永远持续下去。请让我知道如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:03:41.877

如果您想通过 HTTP 发送消息，则必须在服务器上运行一个应用程序来控制消息流。您将无法（AFAIK）使用 HTTP 直接从电话 A 向电话 B 发送消息。您将需要：

> 让电话 A 在服务器上留言 ->
> 服务器联系电话 B（使用 google GCM）->
> 电话 B 从服务器检索消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:52:30.303

例子：

```
Button btnSend;
EditText edtNo, estMsg;

if(v==btnSend)
{
   SmsManager sm = Smsmanager.getDefault();

   PendingIntent sendIntent = PendingIntent.getActivity(this, 0, new Intent(this, sendsms.class), 0);

   sm.sendTextMessage(edtNo.getText().toString(), null, edtMsg.getText.toString(), sendIntent, null);
} 
```

你想在哪里设置你的类名而不是我的**sendms.class** 并且还需要在 AndroidMenifest.xml 中设置权限（PERMISSION:SENT_SMS）。

# android - AndEngine 播放器、背景和相机

> ID：12911710
> 
> 赞同：1
> 
> 时间：2012-10-16T09:39:44.890
> 
> 标签：android, andengine

我正在使用 AndEngine 开发一个 2D 射击游戏。目前我正试图让相机跟随玩家。据我了解，常见的方法是使用`SmoothCamera`缩放并设置追逐的实体。问题是相机跟随玩家，背景也在移动（`RepeatingSpriteBackground`），所以看起来玩家根本没有移动，尽管实际位置发生了变化。所以我真的不知道如何让相机跟随玩家并使背景不移动。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:25:34.780

已经通过使用 attachSprite Scene 的方法设置背景、缩放并使用 BoundCamera 解决了这个问题。上帝保佑你。

# jquery - 如何检测浏览器版本并显示不支持的消息

> ID：12911712
> 
> 赞同：0
> 
> 时间：2012-10-16T09:39:59.393
> 
> 标签：jquery, css

如何检测浏览器版本并显示不支持的消息我只想支持 IE9 及以上版本和 Chrome

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T19:11:00.540

使用这个网站：

[http://www.browser-update.org](http://www.browser-update.org)

可以根据需要自定义css

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:41:23.677

我建议你检查[`$.support`](http://api.jquery.com/jQuery.support/)哪个代表：

> 代表不同浏览器功能或错误存在的属性集合。主要供 jQuery 内部使用；当内部不再需要特定属性以提高页面启动性能时，可能会删除它们。

以前有[`$.browser`](http://api.jquery.com/jQuery.browser/)用于检查浏览器版本的属性。但是，现在由于不一致，它已被弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:53:07.223

您可以在 HEAD 标记中放置条件注释，以创建指示您是否有 IE 浏览器的变量。

```
<script type="text/javascript">
    var supportedBrowser = 1;
</script>
<!--[if lte IE 8]><script>var supportedBrowser=0;</script><![endif]--> 
```

现在如果你没有 IE 浏览器或者你有 IE8 或更低版本，supportedBrowser == 0，所以你可以使用一个简单的 if 语句：

```
if(supportedBrowser != 1){   
    // do whatever you want here... 
} 
```

# c - fopen中'b'的意义

> ID：12911713
> 
> 赞同：3
> 
> 时间：2012-10-16T09:40:01.430
> 
> 标签：c, file, file-io

> **可能重复：**
> [fopen 中的 r 和 rb 有什么区别](https://stackoverflow.com/questions/2174889/whats-the-differences-between-r-and-rb-in-fopen)

我正在用**C设计一个****zip-unzip**实用程序。**如果输入文件是.c**或**.txt**文件，则压缩和解压缩效果很好。但是，如果我提供任何其他文件作为输入，它不会解压缩。我在读写文件时添加了**b标志。**从那时起，它一直运行良好。**b**的意义是什么？我知道它是用于二进制读/写的。有人可以分享系统级别发生的事情的详细信息吗？我在 Linux 上工作。

# jsf - ui:repeat 的方法参数在 JSF 回发请求中是否有效？

> ID：12911716
> 
> 赞同：0
> 
> 时间：2012-10-16T09:40:09.633
> 
> 标签：jsf, el

`ui:repeat`JSF回发请求中的方法参数是否有效？

例子 ：

```
<ui:repeat value="#{mybean.method(param, data.param)}"/> 
```

当我测试它时，它在回发请求中不起作用。

# python - 错误：安装 psycopg2 时命令“gcc”以退出状态失败

> ID：12911717
> 
> 赞同：34
> 
> 时间：2012-10-16T09:40:09.313
> 
> 标签：python, gcc, centos, odoo, centos5

我需要`psycopg2`为`openerp`安装过程安装，但我总是遇到这个错误。我已经用过`pip`，`easy_install`而且我`gcc`的是最新版本。我真的需要你的帮助来解决我的问题。

这是我使用easy_install的完整错误：

```
[root@server01 ~]# easy_install psycopg2    
Searching for psycopg2    
Reading http://pypi.python.org/simple/psycopg2/    
Reading http://initd.org/psycopg/    
Reading http://initd.org/projects/psycopg2    
Best match: psycopg2 2.4.5    
Downloading http://initd.org/psycopg/tarballs/PSYCOPG-2-4/psycopg2-2.4.5.tar.gz    
Processing psycopg2-2.4.5.tar.gz    
Running psycopg2-2.4.5/setup.py -q bdist_egg --dist-dir /tmp/easy_install-anWVvJ/psycopg2-2.4.5/egg-dist-tmp-cZbdtn

no previously-included directories found matching 'doc/src/_build' In file included from psycopg/psycopgmodule.c:27:
./psycopg/psycopg.h:31:22: error: libpq-fe.h: No such file or directory In file included from psycopg/psycopgmodule.c:29:

...

error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-16T10:00:19.170

您需要安装 PostgreSQL 的开发包，例如在 Ubuntu 下是一个`sudo apt-get install libpq-dev`... 而对于 CentOS 它是`yum install postgresql-devel`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-08T22:27:41.670

对于 CentOS，我遇到了同样的问题，我解决了安装这些软件包的问题：

```
sudo yum install postgresql-libs
sudo yum install postgresql-devel
sudo yum install python-devel 
```

只有这样，我才能成功执行：

```
sudo easy_install psycopg2 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-01T11:10:28.310

可能您的系统缺少 Python 标头。要解决此问题，请运行：

```
sudo apt-get install python-dev 
```

或者

```
sudo apt-get install python3-dev 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-11-10T09:20:23.710

在 EC2 实例上的全新 ubuntu 14.04.2 LTS 上，我能够在安装以下软件包后安装 psycopg2：

```
sudo apt-get install gcc
sudo apt-get install postgres-xc-server-dev
sudo apt-get install libpq-dev
sudo apt-get install postgresql-client-common
sudo apt-get install postgresql-common 
```

在新的 AMI linux (CentOS) 实例上：

```
sudo yum install postgresql-devel
sudo yum install gcc* 
```

希望能帮助到你，

埃雷兹

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-04-19T15:14:48.557

我遇到了这个问题，但通过运行解决了：

```
pip install -Iv psycopg2==2.7.7 
```

安装最新版本+python3.7出现问题

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-03-01T00:11:01.400

我一直在尝试在普通的 Amazon Linux EC2 实例上安装 pgsql，并且一直收到此错误。根据 Nicolás 的回答，我安装了他建议的软件包列表，但我继续收到错误消息。更仔细地查看错误，我注意到该`gcc`命令包含 pgsql93 文件：

`gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.6.1 (dt dec pq3 ext lo64)" -DPG_VERSION_HEX=0x09030A -DHAVE_LO64=1 -I/usr/include/python2.7 -I. -I/usr/include/pgsql93 -I/usr/include/pgsql93/server -c psycopg/psycopgmodule.c -o build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o -Wdeclaration-after-statement`

往里看，`/usr/include/`我看到了`pgsql92/`，但没有`pgsql93/`。所以我看了一下安装了哪些 pgsql 相关的 yum 包，我注意到了这些：

`postgresql92.x86_64 postgresql92-devel.x86_64 postgresql92-libs.x86_64 postgresql93.x86_64 postgresql93-libs.x86_64`

在我看来应该有一个`postgresql93-devel`，所以我尝试了：

`sudo yum install postgresql93-devel`

这为我解决了问题！所以我猜主题是：**查看 gcc 调用，看看它拉入了什么目录**。从那里跟随面包屑。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-08T21:18:06.897

对于`Ubuntu 14.04`，从 Docker 图像中，`python:3.4.3-slim`这种组合对我有用：

```
sudo apt-get update
sudo apt-get install -y build-essential
sudo apt-get install -y python3.4-dev
sudo apt-get install -y libpq-dev

pip3 install psycopg2 
```

注意`build-essential`包。这对我来说至关重要。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-03-06T08:11:55.640

在centos 7中。我会`sudo yum install postgresql96-devel.x86_64`用来解决我的问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-22T23:04:07.200

这在 Ubuntu Server 14.10 64 位上对我有用：

```
sudo apt-get install libpqxx-dev 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-16T09:43:59.757

gcc 调用失败，gcc 无法编译源码。大概原因是

```
./psycopg/psycopg.h:31:22: error: libpq-fe.h: No such file or directory In file included from psycopg/psycopgmodule.c:29: 
```

如果您有标题，则标题`libpq-fe.h`不在搜索路径中。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-18T16:13:08.280

对我来说，丢失的包裹是

```
libpqxx-devel.x86_64 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-10T12:07:12.743

psycopg2 也可以在 PyPI 上以 Wheel 包的形式用于最常见的平台（Linux、OSX、Windows）：这应该使您能够安装模块的二进制版本，而不需要上述构建或运行时先决条件。

**您可以使用此命令： pip install psycopg2-binary**

注意 psycopg2-binary 包旨在让初学者开始使用 Python 和 PostgreSQL，而无需满足构建要求。如果您是依赖于 psycopg2 的发布包的维护者，则不应使用“psycopg2-binary”作为模块依赖项。对于生产用途，建议您使用源代码分发。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-21T10:49:45.520

我正在为 CICD 运行 3.9-alpine，并且必须安装这些软件包才能使其正常工作；

```
apk add postgresql-dev
apk add gcc
apk add musl-dev 
```

然后我就可以`pip install psycopg2`正常运行了。

# .net - 如何使用 3D 中的一组新点平移/重绘三角形几何图形

> ID：12911718
> 
> 赞同：0
> 
> 时间：2012-10-16T09:40:11.110
> 
> 标签：.net, wpf

我正在创建一个三角形，如下所示：

```
meshBuilder.AddTriangle(new Point3D(x, y, z));
var mesh = meshBuilder.ToMesh(true);

myTrianglegeometry = new GeometryModel3D();
myTrianglegeometry.Material = greenMaterial;
myTrianglegeometry.BackMaterial = yellowMaterial;
myTrianglegeometry.Geometry = mesh;
modelGroup.Children.Add(myTrianglegeometry);

myModelVisual3D = new ModelVisual3D();
myModelVisual3D.Content = modelGroup; 
```

现在我的程序正在更新 x、y 和 z 的值。因此，我为 x、y、z 的每次更新调用上述代码，每当有一组新的 x、y、z 可用时，它都会创建一个新三角形。这可行，但计算量非常大，并导致 UI 响应非常慢。

为避免这种情况，我应该如何将“myTrianglegeometry”重新绘制/重新定位到 x、y、z 的新值，而不是创建新的三角形？是否可以更改“myTrianglegeometry”的顶点？

请在这方面指导我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:47:58.637

通常您使用视图矩阵来平移/旋转/缩放。为什么不这样做？

# iphone - 当当前时间等于日出时间时触发警报，即使应用程序在后台

> ID：12911719
> 
> 赞同：0
> 
> 时间：2012-10-16T09:40:12.970
> 
> 标签：iphone, ios, xcode

在我的应用程序中，我使用 CLLocation 管理器来查找当前位置。根据当前位置，我想获得我所在位置的日出和日落时间。

例如：如果当前位置是旧金山，那么日出时间和日落时间就是旧金山的时间。至此，我成功了。但是，如果当前时间等于日出时间，即使我的应用程序在后台，我也想每天触发警报。

我搜索了很多方法，但没有一个让我满意。我是 iOS 开发的新手。

applicationDidEnterBackground 方法在终止应用程序之前运行了一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:17:39.317

您可能希望在 plist 中设置后台位置模式，以使其即使在后台也能响应位置更新。然后在位置更新回调中获取日落时间并在该时间安排本地通知。

此外，最好管理通知并禁用不适当的通知（更改位置 = > 新通知）。

**更新：** 在您的特定情况下，不需要连续的位置数据流，重要的位置变化跟踪就可以了。这种方法不需要 plist 中请求的后台定位模式，并且不会以光速耗尽电池。您可以在这里找到信息：[- (void)startMonitoringSignificantLocationChanges](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringSignificantLocationChanges)。请注意，即使使用后台位置模式应用程序不会在后台连续运行，它也只会被调用以执行位置更新回调。

所以一开始你：

```
[locationManager startMonitoringSignificantLocationChanges]; 
```

然后在位置更新回调中：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    // check location
    // get time of sunset

    // schedule UILocalNotification
} 
```

刚刚为您找到一篇文章：[在 iOS 4.Objective-C 中使用 UILocalNotification 设置提醒。](http://reecon.wordpress.com/2010/11/12/setting-a-reminder-using-uilocalnotification-in-ios-4-objective-c/)还要检查这个：[在后台执行代码+在日期安排警报](http://disanji.net/iOS_Doc/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T02:33:31.823

[Android Awareness API](https://developers.google.com/awareness/)最近[发布](https://android-developers.googleblog.com/2017/06/semantic-time-support-now-available-on.html)了新功能，可为您的用例提供简单的解决方案。实现您想要做的事情的方法是创建和注册一个相对于日出/日落指定的 TimeFence。

例如：

```
// Create TimeFence
AwarenessFence sunriseFence =
    TimeFence.aroundTimeInstant(TimeFence.TIME_INSTANT_SUNRISE,
        0, 5 * ONE_MINUTE_MILLIS);

// Register fence with Awareness.
Awareness.FenceApi.updateFences(
    mGoogleApiClient,
    new FenceUpdateRequest.Builder()
        .addFence("fenceKey", sunriseFence, myPendingIntent)
        .build())
    .setResultCallback(new ResultCallback<Status>() {
        @Override
        public void onResult(@NonNull Status status) {
            if (status.isSuccess()) {
                Log.i(TAG, "Fence was successfully registered.");
            } else {
                Log.e(TAG, "Fence could not be registered: " + status);
            }
        }
    }); 
```

当栅栏在日出时评估为 TRUE 时，以及在日出后 5 分钟评估回 FALSE 时，您将收到回调。

请查看[Fence API 代码片段](https://developers.google.com/awareness/android-api/fence-api-overview)文档以了解如何添加您的自定义应用程序逻辑。

# playframework - 如何通过 Play 路由器解析模块中文件的路径

> ID：12911721
> 
> 赞同：0
> 
> 时间：2012-10-16T09:40:12.783
> 
> 标签：playframework, playframework-1.x

我有一组 SVG 图像文件，它们是 Play 模块的一部分，由多个 Play 应用程序共享。对于不支持 SVG (*cough* IE6) 的旧浏览器，我编写了一个控制器，可以根据浏览器的用户代理字符串将它们转换为 PNG 格式。

为此，我需要访问原始 SVG 文件。但是，该文件可能位于模块的`/public/images`目录或应用程序的目录中。Play 路由器能够无缝地解决这两种情况（即，无论文件是在应用程序的目录中还是在应用程序的目录中，GET 请求`/public/images/foo.svg`始终有效）。所以我想利用 Play 的路由器逻辑来查找文件，获取其绝对路径，并将其输入转换库。`foo.svg``/public/images``/public/images`

这可能吗？我在 Play 的`Router`课堂上尝试了一些方法，但他们找不到该文件。也许有一种方法可以通过正常的路由逻辑在服务器内发出某种内部 GET 请求，并以字节流的形式接收结果？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:08:24.233

使用 play VirtualFile 来执行此操作

```
Play.getVirtualFile("public/images/foo.svg") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:57:38.203

在文件系统中为此类文件创建单独的文件夹并将它们上传到应用程序之外不是更容易吗？

如果发生更改，您无需重新部署整个应用程序，并且您将拥有文件系统中文件的真实路径。顺便说一句，这对于其他静态（不需要编译）来说是个好主意，这样你就需要在前端使用单独的 HTTP 服务器或编写一个操作来将文件提供给浏览器（恕我直言，第一个选项更快）

# php - 被零除

> ID：12911722
> 
> 赞同：3
> 
> 时间：2012-10-16T09:40:13.710
> 
> 标签：php, divide-by-zero

我正在使用一种方法来计算一些分数。这是以下方法：

```
public function getIntScore($name, $int){
    switch ($name) {
        case "bedrooms":
            $maxscore = 15;
            break;
        case "living_size":
            $maxscore = 10;
            break;
        case "property_size":
            $maxscore = 10;
            break;
        case "date_of_construction":
            $maxscore = 3;
            break;
    }
    $houseattribute = (int) $this->$name;
    $difference = abs($houseattribute - $int);
    if ($difference == 0) {
        return $maxscore;
    }
    $score = ($difference / $houseattribute) * $maxscore;
    return round($score);
} 
```

但是，这给了我一个“除以零”错误。我在计算之前检查了变量的值，它们都不是零。

```
var_dump($difference, $houseattribute, $maxscore) 
```

输出：

```
int(2) int(3) int(15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:34:32.643

确保测试空值：

```
$houseattribute = (int) $this->$name;
if (empty($houseattribute)) {
   throw new Exception('House attribute is zero.');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:20:34.257

解决了。我傻到忘记了我正在遍历一个数组，第一个`$houseattribute`是`3`. 我的数组中有一个项目 where `$houseattribute`is `0`，但因为我`exit;`在转储变量后使用了我不知道它是。我将其更改为正整数，但它不起作用。

# qt - Qt QString::toDouble() 产生不精确的结果

> ID：12911723
> 
> 赞同：1
> 
> 时间：2012-10-16T09:40:14.920
> 
> 标签：qt, parsing, double, qstring

我的应用程序中有以下代码，我需要解析一个字符串并将其转换为双精度

```
int i = ((QString)"294.4").toDouble() * 100; 
```

我应该将值 29440 视为 i 的值。但是，每次这样做，我都会得到 29439 的值。我不确定它为什么会发生，因为它并不总是发生。例如 294.1,294.2,294.3 工作正常。294.5 也可以正常工作。

我知道解释浮点数应该是一个问题，并且可以预料到不确定的行为，但这似乎是一个非常简单的案例。

有人可以指导我如何可靠地解析这些值，以便它总是给我它的字符串等价物表示的确切值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:27:50.607

这不是 Qt 的问题，而是浮点数的内部表示问题（基于 2，而不是基于 10）。请参阅[为什么不使用 Double 或 Float 来表示货币？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)一些好的背景信息。

如果您依赖精确值，请不要使用浮点数，而是将整数和数字的小数部分存储在单独的整数中，例如

```
int integ = 294;
int fraction = 4;   /* assumption: one fractional digit */ 
```

然后仅将整数算术用于您的计算。

请参阅[是否有库类来表示浮点数？](https://stackoverflow.com/questions/1268072/is-there-a-library-class-to-represent-floating-point-numbers)用于此类计算的各种现有库的链接。

* * *

根据评论的反馈，我建议将字符串解析为整数和小数部分，例如：

```
struct Money {
    int integ;
    int fract;
};

Money parseMoney(const QString& input) {
    QString cleanInput = input;
    Money result = {0,0};

    // remove group separators
    QLocale locale = QLocale::system();
    cleanInput.remove(locale.groupSeparator());

    // convert to money
    QStringList parts = cleanInput.split(locale.decimalPoint());
    if (parts.count() == 1) {
       result.integ = parts[0].toInt();
    } else if (parts.count() == 2) {
       result.integ = parts[0].toInt();
       result.fract = parts[1].toInt() * 10;
    } else {
         // error, not a number
    }

    return result;
} 
```

假设输入是一个根据当前语言环境格式化的字符串，例如，如果组分隔符是'，'小数点是'。并且输入字符串是“3,294.4”，Money 中的结果将是 {3294, 40}。

# jquery - 显示/隐藏不起作用

> ID：12911724
> 
> 赞同：1
> 
> 时间：2012-10-16T09:40:15.423
> 
> 标签：jquery, silverstripe

我不确定这是 SilverStripe 还是 JavaScript 问题，因为我是 JS 新手，但这里有。

我正在尝试一些应该很简单但遇到麻烦的事情。我想根据下拉菜单显示/隐藏字段。这是 50% 的工作，因为该字段在切换时被隐藏/显示，但只有在文档加载时选择了拒绝。任何人都可以发现我的错误，所以我不会在这上面花费数周时间吗？我使用了萤火虫，发现如果该字段处于挂起或接受状态，则永远不会添加该字段。

```
jQuery = jQuery.noConflict();
(function($) {
$(document).ready(function(){
    var dropDown = $('#DataObjectManager_Popup_DetailForm_Status');
    var reason = $('#Reason');

    if(dropDown.val() == 'rejected' || dropDown.val() == 'Rejected'){
        reason.show();
    }

    dropDown.change(function (e) {
        if(dropDown.val() == 'rejected'){   
            reason.show();
        }
        else{
            reason.hide();
        }
   }).change();
});
})(jQuery); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:04:56.420

这与您的 Silverstripe 代码无关。我为你整理了一个小提琴：

[http://jsfiddle.net/tq2Qy/1/](http://jsfiddle.net/tq2Qy/1/)

如果您有任何问题，请告诉我

# spring - 如何创建Spring MVC项目的war文件并在JBOSS 5中部署？

> ID：12911731
> 
> 赞同：2
> 
> 时间：2012-10-16T09:40:38.860
> 
> 标签：spring, model-view-controller, deployment, jboss5.x

如何创建Spring MVC项目的war文件并在JBOSS 5中部署？

# java - 缩小数字的好方法

> ID：12911733
> 
> 赞同：3
> 
> 时间：2012-10-16T09:40:41.057
> 
> 标签：java, c++, c, algorithm

> **可能重复：**
> [将 21 个字母数字字符压缩为 16 个字节](https://stackoverflow.com/questions/3419606/compress-21-alphanumeric-characters-in-to-16-bytes)

我有8个号码

有没有办法将其转换为长度为 4 的字符串？

例如：

输入`12345678`

输出`AB2D`

转换应该能够完全转换回来。

我试图将它转换为 32 Hex，但它仍然有 5 个数字，我不能`0` `1` `O` `I`在最终字符串中使用。有什么好的建议吗？顺便说一句，只能使用大写字母。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T09:44:30.333

它归结为数学。如果您需要能够表示 10^8 个可能的数字并且需要使用 4 个符号，则每个符号必须允许 100 个不同的值。`10^8^(1/4)`您可以使用 8 位字节执行此操作，但您的要求`only upper case letters could be used.`表明您的选择非常有限。您必须确定可以使用的 100 个字母，或者您必须对可以使用的数字范围做出假设。

顺便说一句：如果您可以使用非 ASCII 大写字符，则没有问题。;)

有 26 个大写 ASCII 字符，30 个介于 128 和 255 之间的大写字符以及 10 个数字，因此您也必须使用 34 个符号。如果可以使用 Unicode，则有 1898 个大写和数字 Unicode 字符。

`(char) 32`和之间有 163 个非小写字符`(char) 255`，如果你能使用其中的大部分，你就可以做到。

* * *

手工挑选的可能字符列表将是更好的选择，但这是一个示例。

```
static final char[] ENCODE = new char[100];

static {
    int x = 0;
    for (char i = ' ' + 1; i < 256 && x < 100; i++)
        if (!Character.isLowerCase(i) && !Character.isWhitespace(i))
            ENCODE[x++] = i;
    assert x == ENCODE.length;
}

public static char[] encode(int n) {
    assert n >= 0 && n < 100000000;
    char[] ret = new char[4];
    for (int i = ret.length - 1; i >= 0; i--) {
        ret[i] = ENCODE[n % 100];
        n /= 100;
    }
    return ret;
}

public static int decode(char[] chars) {
    int n = 0;
    for (char ch : chars) {
        int x = Arrays.binarySearch(ENCODE, ch);
        assert x >= 0;
        n = n * 100 + x;
    }
    return n;
}

public static void main(String... args) {
    char[] chars = encode(12345678);
    System.out.println("Encoded: " + new String(chars));
    int n = decode(chars);
    System.out.println("Dencoded: " + n);
} 
```

使用此字体不可打印的字符打印:(

```
Encoded: -CY
Dencoded: 12345678 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:44:42.170

不，八位数字代表太多的组合。每个十进制数字都必须用单个符号表示，才能使整数成为长度为 4 的字符串。这意味着您需要使用 100 个符号。正如您所说，十六进制没有足够的字符，尽管它比十进制多。如果您不能使用小写字母，我假设也不允许使用标点符号。在这种情况下，您将没有足够的符号。

# javascript - 我们如何从 jquerymobile 页面获取值并使用提示框显示它？

> ID：12911734
> 
> 赞同：0
> 
> 时间：2012-10-16T09:40:40.663
> 
> 标签：javascript, jquery, html

我需要从 jquerymobile 页面的文本框中获取值并单击提交按钮，输入的数据应显示在提示框中。

需要借助 Jquery 或 javasript 来做。

以下是我为最佳示例准备的登录页面示例，我需要在提示符中显示他输入的名称和信息，以便显示

```
<!DOCTYPE html>
<html>
<head>
<title>Registration Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script
src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"> </script>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://docs/_assets/js/jqm-docs.js"></script>
    <script src="http://js/jquery.mobile-1.2.0.js"></script>

<script Language="JavaScript">
function Data(){
win2 = window.open("", "", "width=320, height=200,resizable=0,scrollbars=1,status=0,toolbar=0,top=50,left=50");
win2.document.write("User ID: " + document.forms[0].username.value);
win2.document.close();
}
</script>
</head>

<body>

    <div data-role="page" class="type-interior">

        <div data-role="header" data-position="inline">
        <h1>Registration Page</h1>

    </div>

<div class="ui-body ui-body-a">
<table>
<tr><td>Enter username</td><td><div data-role="fieldcontain" class="ui-hide-label">
        <label for="username"></label>
        <input type="text" style="height: 25px; width: 150px" name="username" id="username" value="" placeholder="Username" />
    </div></td></tr>

<tr><td>Enter password</td><td><div data-role="fieldcontain" class="ui-hide-label">
        <label for="password1">Password:</label>
        <input type="password" style="height: 25px; width: 150px" name="password1" id="password1" value="" placeholder="Enter Password" />
    </div></td></tr>

<tr><td>Re-type Password</td><td><div data-role="fieldcontain" class="ui-hide-label">
        <label for="password2">Password:</label>
        <input type="password" style="height: 25px; width: 150px" name="password2" id="password2" value="" placeholder="Retype Password" />
    </div></td></tr>
</table>
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <legend>Gender:</legend>
            <input type="radio" data-theme="b" name="gender" id="radio-female" value="f" />
            <label for="radio-female">Female</label>

            <input type="radio" data-theme="b" name="gender" id="radio-male" value="m"   />
            <label for="radio-male">Male</label>
    </fieldset>
    </div>

<div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
            <legend>Date of Birth:</legend>

            <label for="select-choice-month">Month</label>
            <select name="select-choice-month" id="select-choice-month">
                <option>Month</option>
                <option value="jan">January</option>
                <option value="feb">February</option>
                <option value="mar">March</option>
                <option value="apr">April</option>
                <option value="may">May</option>
                <option value="jun">June</option>
                <option value="jul">July</option>
                <option value="aug">August</option>
                <option value="sep">September</option>
                <option value="oct">October</option>
                <option value="nov">November</option>
                <option value="dec">December</option>
            </select>

            <label for="select-choice-day">Day</label>
            <select name="select-choice-day" id="select-choice-day">
                <option>Day</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
<option value="8>8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
            </select>

            <label for="select-choice-year">Year</label>
            <select name="select-choice-year" id="select-choice-year">
                <option>Year</option>
                <option value="2011">2011</option>
                <option value="2010">2010</option>
                <option value="2009">2009</option>
                <option value="2008">2008</option>
                <option value="2007">2007</option>
                <option value="2006">2006</option>
                <option value="2005">2005</option>
                <option value="2004">2004</option>
            </select>
        </fieldset>
    </div>

<div data-role="fieldcontain">
    <label for="flip-s">Get Updates:</label>
    <select name="flip-s" id="flip-s" data-role="slider" >
        <option value="off">Off</option>
        <option value="on">On</option>
    </select>
    </div>

<div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
                <legend>Get Updates on:</legend>
                <input type="checkbox" name="checkbox-1a" id="checkbox-1a" class="custom" />
                <label for="checkbox-1a">Sports</label>

                <input type="checkbox" name="checkbox-2a" id="checkbox-2a" class="custom" />
                <label for="checkbox-2a">Movies</label>

                <input type="checkbox" name="checkbox-3a" id="checkbox-3a" class="custom" />
                <label for="checkbox-3a">Songs</label>

                <input type="checkbox" name="checkbox-4a" id="checkbox-4a" class="custom" />
                <label for="checkbox-4a">World</label>
            </fieldset>
            </div>

<div data-role="fieldcontain">
                <label for="select-choice-a" class="select">Choose shipping method:</label>
                <select name="select-choice-a" id="select-choice-a" data-native-menu="false">
                    <option>Shipping Methods</option>
                    <option value="standard">Standard: 7 day</option>
                    <option value="rush">Rush: 3 days</option>
                    <option value="express">Express: next day</option>
                    <option value="overnight">Overnight</option>
                </select>
            </div>

<div data-role="fieldcontain">
                <label for="select-choice-3" class="select">Your state:</label>
                <select name="select-choice-3" id="select-choice-3">
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>

<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
       <legend>Agree to the terms:</legend>
       <input type="checkbox" data-theme="a" name="checkbox-2" id="checkbox-2" class="custom" />
       <label for="checkbox-2">I agree</label>
    </fieldset>
</div>
<center>
<button type="button" style="height: 25px; width: 50px" data-theme="b" name="submit" onClick="Data()">Submit</button>
<button type="reset" style="height: 25px; width: 50px" data-theme="b" name="submit" >Reset</button>

</center>
</div><!-- /content -->

<div data-role="footer" data-id="foo1" data-position="fixed">
<h1>Copyright @Ishmeet</h1>
</div><!-- /footer -->

</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:50:53.537

```
<input type='text' id="t">
<input type='button' id='b' value='click me' >
<div id='d' title='dialog'></d>​​​​​​​​​​​​​​​
<script>
$("#b").click(function()
{
     $("#d").html($("#t").val());
     $("#d").dialog();
});
</script> 
```

# php - 计算具有特定值的子数组的总数，其中 value 是一个变量

> ID：12911741
> 
> 赞同：1
> 
> 时间：2012-10-16T09:41:03.220
> 
> 标签：php, arrays, count

我正在尝试使用此问题的答案中的代码：[Count values in subarray](https://stackoverflow.com/questions/12232960/count-total-of-subarrays-with-certain-values-in-php)

但它不想使用变量？

因此，例如，这有效：

```
echo count(array_filter($tasks, function($element){
    return $element['parent'] == 15;
})); 
```

> 回声：4

但这失败了：

```
$number = 15;

//Kolla ifall denna har subtasks?
echo count(array_filter($tasks, function($element) {
    return $element['parent'] == $number;
})); 
```

> 回声 0

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:45:24.300

因为`$number`在 lambda 函数中不可用，所以添加`use ($number)`：

```
$number = 15;
//Kolla ifall denna har subtasks?
echo count(array_filter($tasks, function($element) use ($number) {
return $element['parent'] == $number;
})); 
```

# php - WordPress 菜单已分配但未显示

> ID：12911742
> 
> 赞同：2
> 
> 时间：2012-10-16T09:41:04.467
> 
> 标签：php, wordpress

所以我对整个 WordPress 很陌生，但我对 HTML/CSS 还是有经验的。我在 WordPress 的管理区域内创建了一个新菜单，但是当分配给主题时，它仍然无法正确显示。如果我在这里完全失明，请提前道歉，但 PHP 也不是我的强项。

所以下面是有问题的代码，与菜单在标题部分的位置有关：

```
<div id="nav-primary" class="nav"><nav>
    <?php if ( is_user_logged_in() ) {
        wp_nav_menu( array( 'theme_location' => 'logged-in-menu' ) ); /* if the visitor is logged in, this primary navigation will be displayed */
    } else {
        wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); /* if the visitor is NOT logged in, this primary navigation will be displayed. if a single menu should be displayed for both conditions, set the same menues to be displayed under both conditions through the Wordpress backend */
    } ?>
</nav></div><!--#nav-primary--> 
```

我知道“标题菜单”指向我设置的新菜单，但它没有显示正确的菜单。相反，它显示了很多菜单项，而我设置的菜单项只有 4 个。

任何人都可以对此有所了解吗？我真的很感激一些帮助。

谢谢！

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:13:06.627

检查这一步。

1.  您是否在 function.php 文件中添加了此功能。如果没有添加这个。

    /* 添加两个自定义菜单 */

    ```
     function register_my_menus() {
                  register_nav_menus(
                    array(
                      'logged-in-menu' => __( 'Logged in Menu' ),
                      'header-menu' => __( 'Header Menu' )
                    )
                  );
                }
                add_action( 'init', 'register_my_menus' ); 
    ```

2.  您是否从外观 > 菜单中为您的两个菜单选择了菜单？如果没有，则创建菜单并选择它。

让我知道你仍然需要任何帮助。

**编辑** 登录和未登录使用菜单的新代码。

```
/* Add two custom menu */ 
function register_my_menus() { 
    register_nav_menus( 
        array( 'top-menu' => _( 'Top Menu' ), 
            'header-top-menu' => _( 'Header Top Menu' ) ) ); 
    } 
    add_action( 'init', 'register_my_menus' ); 

    <?php if ( is_user_logged_in() ) 
        { wp_nav_menu( array( 'theme_location' => 'top-menu' ) ); } 
        else { wp_nav_menu( array( 'theme_location' => 'header-top-menu' ) ); } 
        ?> 
```

# perl - 使用反引号 Perl 捕获 SSL 输出

> ID：12911750
> 
> 赞同：0
> 
> 时间：2012-10-16T09:41:32.330
> 
> 标签：perl, opensl

我可能只是简单地看待这个问题，我不确定我想做的事情是否可行，但希望这可以节省大量时间，不必读入和读出不同的文件。

我想做的是使用反引号来接收 OpenSLL exe 的输出，它将加密字符串的某个部分。然后使用输出将其添加到另一个文件中。OpenSLL 会自动输出到一个文本文件。

例如：

```
Sample text: 1234, test text
ID- 1234, 
Encrypted text- test text 
```

届时将

```
ID- 1234, 
Returned encrypted text- **&&**&&
And then be output to a file
1234, **&&**&& 
```

我知道这可以通过读入和解析加密文本然后将输出附加到一个新文件来完成，但是当我希望对 100 或 1000 行执行此操作时，我希望避免这种情况，因为这将是很多额外的加工。

希望您能看到我的想法，如果有人可以提供帮助，将不胜感激。

```
#!/usr/bin/perl -w
use strict;

my $OpenSLLFile = "\\openssl.exe";

my $publickey = "public.pem";
my $privatekey = "private.pem";
my $inputtext = "output.txt";
my $outputtext = "abcd.txt";
my $compID = "1232";

my $encryptiontext = "openssl rsautl -encrypt -pubin -inkey $publickey -in $inputtext -out $outputtext";
my $decryptiontext = "openssl rsautl -decrypt -inkey $privatekey -in encrypted.txt -out plaintext.txt";

#Idea 1
#my $test = `$encryptiontext`;

#Idea 2    
#my $test = system ("$encryptiontext");

#Idea 3
`$encryptiontext`
my $test =  $?;

open (outputtest, '>>outputtest.txt') or die "$!";

my $a = "$compID, $test";

print outputtest "$a\n";

close(outputtest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:50:08.570

您拼凑在一起的 openssl 命令正在写入某些输出文件（`-out`参数后面的文件）。因此，如果您想获得输出，您有两种选择：

1.  从 openssl 写入的文件中读取输出
2.  让 openssl 写入标准输出并使用反引号运算符直接在 Perl 中捕获它。

第二个版本避免了临时文件和与之相关的所有麻烦（例如，必须删除它们，无论是否失败；确保没有解密的内容留在文件系统中其他用户可以读取的位置等）。

`-out ...`通过从命令中删除参数，这应该是微不足道的。然后你可以像你的想法一样捕捉文本：

```
my $encrypt_commnad = "openssl rsautl -encrypt -pubin -inkey $publickey -in $inputtext";
my $encrypted_text  = `$encrypt_command`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:00:01.967

There are a [number of modules on CPAN](http://search.cpan.org/search?query=crypt%3a%3aopenssl&mode=all) that do OpenSSL encryption and decryption. It would probably be easier to use one of those modules than trying to roll your own with system commands.

# .net - TextBlock 样式覆盖模板化父样式

> ID：12911751
> 
> 赞同：0
> 
> 时间：2012-10-16T09:41:36.680
> 
> 标签：.net, wpf, xaml

首先，我有一种风格作为应用程序资源中的资源，如下所示：

```
<Style x:Key="ContentTextBlock" TargetType="FrameworkElement">
   <Setter Property="TextBlock.HorizontalAlignment" Value="Center"/>
   <Setter Property="TextBlock.VerticalAlignment" Value="Center"/>
   <Setter Property="TextBlock.FontFamily" Value="Verdana"/>
   <Setter Property="TextBlock.FontSize" Value="12"/>
   <Setter Property="TextBlock.FontWeight" Value="Normal"/>
   <Setter Property="TextBlock.Foreground" Value="Orange"/>
</Style> 
```

我创建了一个自定义控件，其中包含标题和内容。这是自定义控件模板中内容部分的外观：

```
<ContentPresenter Content="{TemplateBinding Content}"
                  Style="{DynamicResource ContentTextBlock}">
</ContentPresenter> 
```

我的问题是，如果我像这样使用创建的控件：

```
<local:CutPage.Content>
            <TextBlock>Header</TextBlock>
</local:CutPage.Content> 
```

Fontsize、FontWeight 和 FontFamily 被 TextBlock 的显式或默认样式覆盖（我认为是这种情况，但我不确定）。我已经阅读了有关依赖值顺序 od 优先级的文章，但是我怎么能猜出是什么覆盖了我的模板样式？我希望进入自定义控件的所有标题元素都使用这些值。我该怎么做？

PS 有趣的是，一些样式设置器可以工作（比如将文本垂直和水平居中），但其他的则不行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:51:12.973

如果要保留 CustomControl，则必须定义与文本块属性匹配的依赖属性，并在 ControlTemplate 中进行绑定。

我要做的是创建一个从 TextBox 派生的 CustomControl，然后更改它的 ControlTemplate 以添加您需要的内容并将您需要的所有内容绑定到 ControlTemplate 中。

或者，您可以只使用似乎完全符合您需要的**HeaderedContentControl 。**

```
<HeaderedContentControl FontFamily="Arial" Foreground="Red" Header="Hello World">
    <Rectangle Width="10" Height="10" Fill="Blue" />
</HeaderedContentControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:53:04.890

你可以把你的基本样式放在一个单独的文件中，然后在你的文本块中使用它继承它，就像这样：

```
<TextBlock>
<Style TargetType="..." BasedOn="{StaticResource MyGeneralStyle}">                       <Setter Property="Foreground" Value="..."/>
</Style>
</TextBlock> 
```

# objective-c - 循环遍历 NSFetchRequest 结果

> ID：12911757
> 
> 赞同：0
> 
> 时间：2012-10-16T09:42:00.157
> 
> 标签：objective-c, core-data

我对 Core Data 很陌生，实际上是整个 Objective-C，所以我希望我的措辞正确，我已经能够使用 Core Data 存储和检索数据，但我正在努力循环遍历结果集，

```
// read the data
NSFetchRequest *req = [[NSFetchRequest alloc]init];
[req setEntity:[NSEntityDescription entityForName:@"Card" inManagedObjectContext:app.managedObjectContext]];
//[req setPredicate:[NSPredicate predicateWithFormat:@"cardID == %@", @"1"]];
NSArray *crd = [[app.managedObjectContext executeFetchRequest:req error:nil] lastObject];

for(Card *card in crd){
    NSLog(@"%@",card.backImageURL);
} 
```

当我尝试运行该应用程序时，我不断收到此错误，

```
2012-10-16 11:37:29.407 Core test[925:17903] -[Card countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x962f5c0
2012-10-16 11:37:29.408 Core test[925:17903] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Card countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x962f5c0' 
```

我确信这是非常简单的事情，但由于某种原因，我似乎无法确定问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:55:27.553

代替

```
NSArray *crd = [[app.managedObjectContext executeFetchRequest:req error:nil] lastObject]; 
```

它应该是

```
NSArray *crd = [app.managedObjectContext executeFetchRequest:req error:nil]; 
```

如果您遇到错误，那么您应该使用该错误参数 -

```
NSError *error = nil;
NSArray *crd = [app.managedObjectContext executeFetchRequest:req error:&error];
if(error){
    NSLog(@"ERROR: %@", [error localizedDescription]);
} 
```

# iphone - UITableView 自定义单元格搜索结果

> ID：12911759
> 
> 赞同：1
> 
> 时间：2012-10-16T09:42:05.460
> 
> 标签：iphone, ios, ios6

如何设置搜索结果以使用我的自定义单元格？我的自定义在表格视图中工作，当我进行搜索时它会搜索（我可以看到日志）但是单元格是空的，我可以点击空单元格将继续下一个视图控制器。

如果我使用普通的 Cell，它可以正常工作。

我的 cellForRowAtIndexPath 代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"SRMUserCell";

    UserViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UserViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UserDetails *userDetails = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView) {

        userDetails = [self.searchResults objectAtIndex:indexPath.row];

    } else {

        userDetails = [self.fetchedResultsController objectAtIndexPath:indexPath];

    }

    cell.username.text = userDetails.userName;
    cell.userMphone.text = userDetails.userMobile;
    cell.userML.text = userDetails.userML;

    return cell;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString scope:@"All"];
    return YES;
} 
```

谢谢

# mysql - percona prm debian lenny

> ID：12911762
> 
> 赞同：1
> 
> 时间：2012-10-16T09:42:23.423
> 
> 标签：mysql, debian, percona, lenny

我尝试在 Debian Lenny 上使用 Corosync 和 Pacemaker 设置 Percona PRM。

我按照这个如何：[PRM Percona Replication Manager](https://github.com/jayjanssen/Percona-Pacemaker-Resource-Agents/blob/master/doc/PRM-setup-guide.rst#to-view-andor-edit-the-configuration)

但是pacemaker 无法正常启动MySQL。我的意思是它尝试启动它并在几秒钟后停止它。

看起来问题来自 MySQL 脚本中的 check_slave 但错误并不是很明确......

快速查看日志中出现错误的部分：

```
Oct 16 11:29:26 mysqltest01 mysql[12107]: ERROR: check_slave invoked on an instance that is not a replication slave.
Oct 16 11:29:26 mysqltest01 mysql[12107]: ERROR: /usr/lib/ocf/resource.d/heartbeat/.ocf-shellfuncs: line 330: -q: command not found
Oct 16 11:29:26 mysqltest01 mysql[12107]: ERROR: Failed to select from 
Oct 16 11:29:26 mysqltest01 mysql[12107]: ERROR: Failed initial monitor action 
```

无法理解为什么 ocf-shellfuncs 不能正常工作。

# facebook-graph-api - 如何使用 Facebook Graph API 找出谁将用户添加到群组中？

> ID：12911763
> 
> 赞同：2
> 
> 时间：2012-10-16T09:42:31.253
> 
> 标签：facebook-graph-api

我正在使用[Graph API Explorer](https://developers.facebook.com/tools/explorer/)来获取组中的成员列表。我可以得到一个成员列表，上面有他们的名字、链接等。

如何获取将用户添加到该组的用户的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:53:33.450

阿法克这是不可能的。甚至 FQL 表也没有显示与邀请者的任何联系： [https ://developers.facebook.com/docs/reference/fql/group_member/](https://developers.facebook.com/docs/reference/fql/group_member/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:49:46.843

据我所知，这是做不到的。

[组的 API 参考](https://developers.facebook.com/docs/reference/api/group/)仅列出了成员的以下属性：`id`、`name`、`admin`。如果有这样的信息，我希望它会作为一些额外的属性出现在这里`added_by`，遗憾的是，它不存在。

请注意，还有一个额外的限制：您只能列出任何给定组的前 500 个成员。因此，即使存在这样的属性，您也无法为大型组中的所有成员访问它。

我对此信息的唯一线索是，当用户被添加到组中时，他们会收到有关此事件的通知。此通知应包含有关谁将您添加到组的信息。但是，您无法访问用户的私人通知，这意味着您无法获取此信息。

由于您似乎无法访问此信息，我建议您跳出框框思考：通过找出谁添加了谁，您试图解决的问题是什么？例如：如果你真的需要这些信息，我可以以某种方式直接从用户那里收集这些信息吗？或者，例如，如果您正在进行一些数据分析，是否可以假设为简单起见，除非另有证明，否则用户已由管理员添加？

# android - 限制 TextView 中的行数

> ID：12911765
> 
> 赞同：43
> 
> 时间：2012-10-16T09:42:38.600
> 
> 标签：android, scroll, textview, lines

我有一个可滚动的 textView，我想限制显示的行数，但是 xml 属性不起作用：

```
<TextView
   android:id="@+id/tv_addesc"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:scrollbars="vertical"
   android:maxLines="12"
   android:textColor="#FFFFFFFF"
   android:textSize="15sp" /> 
```

显示的行数为 50，文本中有 900 个字符。

如何限制显示的行数并使其可滚动？

编辑：我测试了 846 行和 15824 个字符，无论设置了不同的属性，都会显示整个文本。

编辑：除了textView还有第二个组件，当我删除它时它起作用了，所以我会找到一个解决方法。谢谢 ！

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-16T09:49:51.337

您只需要`TextView`像这样设置多行：

```
android:maxLines = "10" 
```

您还必须添加：

```
android:minLines="1" 
```

**如果您不使用滚动，其余的就不需要了**

和一个属性说这个 TextView 应该可以垂直滚动：

```
android:scrollbars = "vertical" 
```

在您的 Java 代码中：

```
yourTextView.setMovementMethod(new ScrollingMovementMethod()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-23T10:50:47.260

通过 id 查找您的文本视图：

```
TextView myTextBox=(TextView)findViewById(R.id.textBox); 
```

现在使用 setMaxLines 函数并在其中分配您需要的行数，例如 20。

```
myTextBox.setMaxLines(20); 
```

这将您的文本框限制为仅显示 20 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T10:06:06.387

将您的文本视图放在滚动视图中并设置滚动视图的固定高度。

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="120dip" >

    <TextView
        android:id="@+id/tv_addesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:maxLines="12"
        android:scrollbars="vertical"
        android:textColor="#FFFFFFFF"
        android:textSize="15sp" />
</ScrollView> 
```

根据您的需要设置属性

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T11:53:08.907

```
<ScrollView
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="120dip" >

<TextView
    android:id="@+id/tv_addesc"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:maxLines="12"
    android:scrollbars="vertical"
    android:textColor="#FFFFFFFF"
    android:textSize="15sp" />
 </ScrollView> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T09:59:27.907

嘿尝试将单行属性设置为 false。只是看看它是否有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-08T18:52:46.540

尝试使用这个。

```
android:maxLines="12"
android:ellipsize="end" 
```

最后它添加**......**如果有额外的文字可用。

你也可以使用

```
android:ellipsize="marquee" 
```

它会从末尾减少额外的文本，而不是一个单词。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-27T09:29:59.647

我按照接受的答案和其他人的说法进行了尝试，但对我没有用，但在添加后`android:ellipsize="marquee"`它现在可以工作了..

# xcode - 在存档中错误地找到 OSX 服务

> ID：12911769
> 
> 赞同：2
> 
> 时间：2012-10-16T09:42:55.013
> 
> 标签：xcode, macos, service

我正在开发一个宣传服务的 OSX 应用程序，以对在 Finder 中选择的文件进行操作。如果应用程序正在运行，它会正常运行。但是，当应用程序未运行并且从 Finder 调用服务时，它不会启动 /Applications 中的已安装版本，而是使用 XCode 存档的旧版本（例如 at `/Users/sgvd/Library/Developer/Xcode/Archives/2012-08-18/MyApp 18-08-2012 13.25.xcarchive/Products/Applications/MyApp.app/Contents/MacOS/MyApp`）。这使我无法正确测试我的应用程序，并且我认为当应用程序的多个副本存在时，它也会为用户破坏它。

当我运行`/System/Library/CoreServices/pbs -dump_pboard`服务的 NSBundlePath 条目时，它确实指向 /Applications 中的正确位置。

有没有办法编辑 Info.plist 以确保启动安装的版本？或者有没有办法至少确保执行某个版本，也许是通过 NSPortName 条目？最后，是否有任何预定义的搜索顺序来查找应用程序，或者我可以在 Info.plist 或我的应用程序的构建设置中定义它，例如，如果 /Applications 和 ~ /应用程序？

# oracle - Weblogic 部署异常：PaddingException：无法执行取消填充：无效填充字节

> ID：12911771
> 
> 赞同：12
> 
> 时间：2012-10-16T09:43:01.170
> 
> 标签：oracle, weblogic, weblogic-10.x, jdeveloper

提出（并回答）这个问题只是为了与 SO 社区[分享一些知识。](https://meta.stackexchange.com/questions/17463/can-i-answer-my-own-questions-even-those-where-i-knew-the-answer-before-asking)

我最近想出了我的 Web 应用程序的部署异常（在收到来自 SVN 存储库的一些更改后），它说：

> <错误> <部署者> 任务“1”的 ID 为“1350377960779”。错误是：“com.rsa.jsafe.JSAFE_PaddingException：无法执行取消填充：无效填充字节。” com.rsa.jsafe.JSAFE_PaddingException：无法执行取消填充：无效填充字节。在 com.rsa.jsafe.ca（未知来源） 在 com.rsa.jsafe.JSAFE_SymmetricCipher.decryptFinal（未知来源） 在 weblogic.security.internal.encryption.JSafeEncryptionServiceImpl.decryptBytes(JSafeEncryptionServiceImpl.java:124) 在 weblogic.security。 weblogic.security.internal.encryption.ClearOrEncryptedService.decrypt(ClearOrEncryptedService.java:96) 处的 internal.encryption.JSafeEncryptionServiceImpl.decryptString(JSafeEncryptionServiceImpl.java:184) 被截断。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T09:43:30.263

谷歌搜索找到答案不是很有帮助。检查从我的 SVN 存储库收到的文件后，我注意到 jdbc 应用程序资源已更改。

更仔细地检查 jdbc 资源，我发现它正在`password-encrypted`使用仅用于生产环境的属性

```
<password-encrypted>{AES}some+very+long+encrypted+string</password-encrypted> 
```

所以我把这个属性注释掉了，使用了开发环境使用的属性：

```
 <properties>
     <property>
        <name>user</name>
        <value>MY_USER</value>
     </property>
     <property>
        <name>password</name>
        <value>MY_PASS_IN_PLAIN_TEXT</value>
     </property>
  </properties> 
```

这工作得很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-29T18:06:34.990

我只是遇到了这个问题，我所要做的就是在密码为空时将页面保存在连接池页面上。那当然会失败。然后输入密码并再次保存。这次没有填充字节错误，并且连接成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-04T18:29:06.693

我单击了 MaVRoSCy 自己的响应，因为它有用。但缺点是您的密码变得可见（在开发环境中可能不是问题）。

这个密码加密问题可以通过在 weblogic 实例中重新加密密码来解决。

为此，请转到您的 weblogic 域，例如：**ORACLE_HOME\user_projects\domains\YOUR_DOMAIN**

并执行此命令： **java weblogic.security.Encrypt YOUR_PASSWORD**

这将输出如下内容： **{AES}0gcupcB95gtlr6VYnT3TZK5PxiATDuIUe3kRKd3b/Ag=**

这是您的 weblogic 实例的加密密码。

然后只需在数据源 xml 配置中的*密码加密*属性中替换它。

```
<password-encrypted>{AES}0gcupcB95gtlr6VYnT3TZK5PxiATDuIUe3kRKd3b/Ag=</password-encrypted> 
```

# java - 如何清除 Eclipse 内部 Web 浏览器历史记录或浏览器首选项？

> ID：12911774
> 
> 赞同：4
> 
> 时间：2012-10-16T09:43:06.430
> 
> 标签：java, eclipse, ide, metadata, browser-history

我正在使用 Eclipse Helios（服务版本 2）。我想清除 Eclipse 内部 Web 浏览器历史记录。

我尝试按照路径

```
metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.ui.browser.prefs 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:33:29.920

这是 eclipse 存储 URL prefrence 的路径，所以去那里清理这个文件并重新启动 eclipse。

```
WORKSPACE\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.ui.browser.prefs 
```

**注意：- 在此路径中，“WORKSPACE”是您当前的工作空间**

更多信息[请点击这里](http://nuin.blogspot.in/2008/04/trimming-history-list-in-eclipses.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T21:47:12.683

我正在复制粘贴[所选答案中链接中](http://nuin.blogspot.in/2008/04/trimming-history-list-in-eclipses.html)的内容，这样即使那个不起眼的博客消失了，它也会保留下来。

> **在 Eclipse 的内部 Web 浏览器中修剪历史列表**
> 
> 我在开发时经常使用内部 Web 浏览器 - 如果没有别的，它是一个方便的地方来测试 RESTful Web 服务的 GET 请求。我还使用 Eclipse 编写 HTML，内部浏览器再次成为“这看起来对吗？”的有用的第一个测试。这意味着我建立了一个相当长的历史列表，而最近的条目——我最有可能寻找的——需要滚动才能找到并重新使用它们。迄今为止，我还没有在 Eclipse 中找到一个设置（在撰写本文时我使用的是 3.3.2）来编辑内部浏览器历史记录。我很高兴被证明是错误的。
> 
> 同时，解决方法是关闭 Eclipse，然后编辑 Eclipse 工作区根目录`$WORKSPACE/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.ui.browser.prefs` 所在的文件。`$WORKSPACE`这是一个纯文本文件：我在 Linux 和 Windows 上首选的文本编辑器是 SciTE，但实际上哪个并不重要。该文件有一个偏好键 internalWebBrowserHistory，格式为：
> 
> `internalWebBrowserHistory=url|*|url|*| ...`
> 
> 删除过时的条目很简单；修改或添加新条目是完全可行的，注意冒号字符 (:) 使用前面的反斜杠 (\:) 进行转义。保存更改，重新启动 Eclipse，完成。希望将来会有一个内部首选项编辑器在 Eclipse 中使这更容易（或者，有人会向我指出我一直不注意并且它已经存在）。
> 
> [由](http://nuin.blogspot.in/2008/04/trimming-history-list-in-eclipses.html) [Ian](http://www.blogger.com/profile/04691119751088749284)撰写，2008 年 4 月 25 日上午 10:47:00

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:59:01.247

Eclipse 正在使用一些浏览器包装器来访问系统浏览器功能。请尝试清除 Windows 系统上的 Internet Explorer 历史记录。

# imagemagick - 按百分比绘制饼图

> ID：12911777
> 
> 赞同：1
> 
> 时间：2012-10-16T09:43:15.533
> 
> 标签：imagemagick

如何使用 ImageMagick 按百分比绘制饼图？

例如：如果有一个像 45 这样的值作为百分比给出——我如何使用 Ruby 或 bash 命令绘制一个只有 45% 的饼图？

如果我使用 ImageMagick 的`draw`运算符，弧值需要如何设置？或者如何从整数值计算 acr 值？

例如：

```
convert -size 100x100 xc:none -fill white -stroke black/
-draw "path 'M 30,40   A 1,1  0  0,0 70,20 ....  ?? 
```

我试图阅读和理解这些例子，但弧计算对我来说是个谜。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T12:31:57.000

ImageMagick 的操作实现了[此 W3C 文档](http://www.w3.org/TR/SVG/paths.html)`draw`中定义的 SVG“路径” 。

不支持通过给出简单的“度”角度参数进行绘制。您需要使用三角函数计算每个路径和涉及弧的子路径的端点坐标。（您必须使用与当前点相关的绝对值或相对值，具体取决于所使用的确切弧运算符；另请参见下面的示例。）

## 一般的

在 SVG（以及 ImageMagick）中，“路径”表示对象的轮廓。还支持绘制复合路径：复合路径是具有子路径的路径，其中每个子路径由单个`moveto`后跟一个或多个`line`or`curve`操作组成。

对象的轮廓可以通过以下操作来定义：

*   **`moveto :`** *设置一个新的当前点。*
    用于**`M`**绝对运动和**`m`**相对运动。

*   **`lineto :`** *画一条直线。*
    用于**`L`**绝对运动和**`l`**相对运动。

*   **`curveto :`** *绘制贝塞尔曲线。*
    使用**`C`**、**`c`**和**`S`**绘制**`s`**三次[*贝塞尔曲线*](http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands)。（我们不需要这些饼图）。
    使用**`Q`**、**`q`**和**`T`**绘制[*quadratic Bezier](http://www.w3.org/TR/SVG/paths.html#PathDataQuadraticBezierCommands)曲线**`t`**。（我们不需要这些饼图）。

*   **`arc :`** *画椭圆或圆弧。*
    使用**`A`**和**`a`**绘制[*椭圆弧*](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)。*对于ellipse == circle*的特殊情况，我们需要这些饼图。

*   **`closepath :`** *通过在最后一个 moveto 上画一条线来关闭当前形状。* 使用**`Z`**或**`z`**；两者具有相同的效果：它们结束当前子路径并导致从当前点到当前子路径的初始点绘制一条自动直线。

    *   如果“closepath”之后紧跟“moveto”，则“moveto”标识下一个子路径的起点。
    *   如果任何其他命令紧跟在“closepath”之后，则下一个子路径从与当前子路径相同的初始点开始。

## 单个饼图楔形示例

这意味着，您可以使用以下命令使用黄色背景在 280x280 画布内绘制一个带有黑色边框的红色饼图楔形：

```
convert         \
  -size 280x280 xc:yellow \
  -stroke black \
  -fill blue    \
  -draw "path 'M 120,140  L 120,40  A 100,100 0 0,1 137.36,41.52  Z'" \
   red-pie-wedge.jpg 
```

**结果：**
![红色饼状楔形](../Images/c0811ea1b95d1b06055615e01002ab1c.png "红色饼图楔形")

1.  以下坐标系的原点是左上角。
2.  路径的起点 ( `M`) 位于像素坐标*(120/140)*处。
3.  第一行 ( `L`) 从那里垂直向上绘制到坐标*(120/40)*。
4.  从坐标*(120/40)*`A`开始，半径为*100*的圆弧 ( )到达坐标*(137.36/41.52)*。
    我将把它留给读者来计算导致坐标*（137.36/41.52）*作为弧的终点的三角计算。提示：
    *   楔形的角度是 10°，并且*100*sin(10°)=17.36*因为这个例子中的*半径*是*100*，因此*120+17.36=137.36*；
    *   *cos(10°)=0.9848*和*100*(1-cos(10°))=1.52*，因此*40+1.52=41.52*。
5.  从弧的终点开始，路径是闭合的 ( `Z`)，直线返回路径的起点。

## 完整的饼图示例

**您总是需要做一些三角数学来计算绘制所有饼楔所需**的任何圆弧的端点。****

 **这是一个完整的饼图示例，其中包括上面的蓝色饼楔：

```
convert                  \
 -size 280x280 xc:yellow \
 -stroke black           \
 -fill blue   -draw "path 'M 120,140  L 120.00,40.00  A 100,100  0 0,1  137.36,41.52  Z'" \
 -fill silver -draw "path 'M 120,140  L 137.36,41.52  A 100,100  0 0,1  154.20,46.00  Z'" \
 -fill red    -draw "path 'M 136,130  L 170.20,36.00  A 100,100  0 0,1  236.00,130.00 Z'" \
 -fill green  -draw "path 'M 120,140  L 220.00,140.00 A 100,100  0 1,1  120.00,40.00  Z'" \
 -fill black  -stroke none  -pointsize 10 \
 -draw "text 119,37 '10' text 142,41 '10' text 182,36 '70' text 226,156 '270'" \
  piechart.jpg 
```

**结果：**
![完整的饼图](../Images/78a750522de2e8e0f7cfc6c2a25792eb.png "完整的饼图")**

# asp.net - 在ASP.NET MVC中，文件是默认创建的，如果我只指定文件名，没有路径？

> ID：12911782
> 
> 赞同：0
> 
> 时间：2012-10-16T09:43:31.997
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

在 ASP.NET MVC 中，如果我只指定文件名而没有路径，默认情况下会在哪里创建文件？

我将文件创建为：

```
System.IO.File.WriteAllText("MYSTERIOUS_log.txt", DateTime.Now.Precise() + msgString, Encoding.Unicode); 
```

我查看了 ASP.NET 临时文件夹，以及当前 mvc Web 应用程序的应用程序路径的 bin 文件夹。这听起来可能很有趣，但我什至扫描了我的整个计算机（所有驱动器）以查找指定的文件名，但仍然找不到它。

PS：

1.  我可以向您保证，没有例外，并且文件正在正确创建。
2.  我在 VS2010、MVC 3 框架、XP 机器上运行我的应用程序。
3.  该应用程序还托管在 IIS（5.1 版）中。

那么，我的文件去哪儿了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:13:09.110

该文件将保存在当前目录中，您可以通过调用来检查它是哪一个：

```
string currentDirectoryPath = Directory.GetCurrentDirectory(); 
```

在 ASP.NET 中，这通常是`C:\WINDOWS\system32`- 但除非您更改了安全设置中的某些内容，否则您不应该在那里访问，这应该以异常结束。

# java - android中的微调器项目

> ID：12911785
> 
> 赞同：0
> 
> 时间：2012-10-16T09:43:38.320
> 
> 标签：java, android, android-spinner

嗨，我必须在 android.here 中开发一个微调器示例，我必须使用以下代码：

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";

private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;
private int i;
static final String KEY_NAME = "orderid";
static final String KEY_STATUS = "status";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.change_status);
    Intent in = getIntent();
    String status = in.getStringExtra(KEY_STATUS);
    String[] DayOfWeek = {status, "Q", "P", "F", "I", "C"};
    for(i=1;i<DayOfWeek.length();i++){
        if(DayOfWeek.get(i).equals(status)) {
            DayOfWeek.remove(DayOfWeek.get(i));
        }
    }

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent in = getIntent();
             String orderid = in.getStringExtra(KEY_NAME);
             String status = in.getStringExtra(KEY_STATUS);
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
             PropertyInfo unameProp =new PropertyInfo();
             unameProp.setName("Status");//Define the variable name in the web service method
             unameProp.setValue(selectedItem);//Define value for fname variable
             unameProp.setType(String.class);//Define the type of the variable

             request.addProperty(unameProp);
             PropertyInfo idProp =new PropertyInfo();
             idProp.setName("Orderid");//Define the variable name in the web service method
             idProp.setValue(orderid);//Define value for fname variable
             idProp.setType(String.class);//Define the type of the variable
             request.addProperty(idProp);

             SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             envelope.setOutputSoapObject(request);
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

             try{
                 androidHttpTransport.call(SOAP_ACTION, envelope);
                 SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                 result.setText(response.toString());
             }
             catch(Exception e){

             }
         }
    });

    //create an ArrayAdaptar from the String Array
     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
           R.layout.row, R.id.country, DayOfWeek);
     //set the view for the Drop down list

     spinner.setAdapter(adapter);
     spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) { 
         selectedItem = parent.getItemAtPosition(pos).toString(); 
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

}

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

这是我的 for 循环：

```
 for(i=1;i<DayOfWeek.length();i++){
        if(DayOfWeek.get(i).equals(status)) {
            DayOfWeek.remove(DayOfWeek.get(i));
        }
  } 
```

在这里，我在 for 循环中遇到以下错误： **无法在数组类型上调用 length()**
**无法在数组类型 String[] 上调用 get(int)**

我怎样才能删除上面的错误。请帮助我。细绳[]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:46:36.487

采用：

```
DayOfWeek.length // no function! 
```

和

```
DayOfWeek[i] // operator [] 
```

并阅读这些文档： [Java 教程](http://docs.oracle.com/javase/tutorial/index.html)

顺便说一句：您不能从 Java 中的数组中删除项目。正如@Gabriel 所说，也许 ArrayList 更适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:47:30.623

String[] DayOfWeek 是一个表格。如果您想获得它的长度，只需使用 DayOfWeek.lenght 。没有 （）。而且您不会通过 DayOfWeek.get(i) 获得位置 i 上的项目，而是 DayOfWeek[i]。是Java。不是 C#。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:49:39.220

是`DayOfWeek.length`，不是`DayOfWeek.length()`。它是数组的（最终）变量，而不是方法调用。

在您的情况下， an`ArrayList<String>`将为您提供更好的服务，因为您想从阵列中删除（您不能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:53:49.917

您不能从数组中删除元素。你最好使用一个arraylist，它有一个选项来改变你在arraylist中的数据。

# php - 无法拆分日期和来自日期时间

> ID：12911786
> 
> 赞同：0
> 
> 时间：2012-10-16T09:43:42.967
> 
> 标签：php, codeigniter

致命错误：在非对象上调用成员函数 format()

看法

```
 <?php

        $date = $listProject->enddate;
   $data['enddate'] = $date->format('Y-m-d');
   $time['time'] = $date->format('H:i:s');

                                              ?>

 <?php echo get_datetime($listProject->enddate);?>(<?php echo '<b style="color:red;">'.days_left($listProject->enddate,$listProject->id).'</b>';?>) 
```

控制器

```
$this->outputData['listProjects']   = $this->skills_model->getProjects($urgent_conditions,NULL,NULL,array(15),$order);
$this->load->view('listProjects',$this->outputData); 
```

模型

```
$this->db->select('projects.created,projects.enddate'); 
```

谢谢！:D 我尝试在 VIew 和控制器上执行此操作，但仍然出现错误，上面的错误是由 View 引起的

添加在 MY_date_helper 中找到这个

```
if ( ! function_exists('get_datetime')) 
```

{ 函数 get_datetime($timestamp)

```
{
    $CI =& get_instance();
    $CI->lang->load('enduser/common');
    if(date('d/M/Y') == date('d/M/Y',$timestamp))
    $date = $CI->lang->line('Today at')." ".date('H:i',$timestamp)." UTC";
    else
    $date = date('d-M-Y H:i',$timestamp)." UTC";        
    return $date;
} 
```

PHP版本：5.2.17

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:13:33.443

使用`strtotime`...

```
 <?php

$date = $listProject->enddate;
$data['enddate']=date('Y-m-d',strtotime($date));
$time['time'] = date('H:i:s',strtotime($date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:55:42.500

尝试

```
$date = new DateTime($listProject->enddate); 
```

代替

```
$date = $listProject->enddate; 
```

编辑：使：

```
$date = new DateTime();
$date->setTimestamp($listProject->enddate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T10:34:55.117

我最近在我的 CI 项目中遇到了同样的问题。我用这种方法解决了它，它有效：

甚至下面的这个字符串也给出了同样的错误：

```
$date = new DateTime($listProject->enddate); 
```

我用这个解决了它：

```
$date = new DateTime(strtotime($listProject->enddate)); 
```

然后在它下面，随意格式化时间：

```
$date->format('d/m/Y'); 
```

这里的主要原因是，您的日期字符串如何包含一些 DateTime 方法不知道的字符！strtotime() 方法正确地将您的字符串转换为日期格式。

# html - HTML：复选框默认值

> ID：12911787
> 
> 赞同：27
> 
> 时间：2012-10-16T09:43:46.510
> 
> 标签：html, cross-browser

当我提交带有未明确定义的选中复选框的 HTML 表单时`value`，Chrome 将`on`作为该字段的值发送。

这是标准行为吗？或者我可以从其他浏览器中得到什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-16T12:52:56.820

HTML 4.01 规范没有指定选中复选框的值。它只是说它是“打开”的，但这只是散文，并没有说明默认值是什么。但它也说（在[element的](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.4)[描述下`input`](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.4)）`value`在这种情况下需要该属性。

因此`<input type=checkbox name=foo>`，对于所使用的值，具有未定义的行为，尽管实际上浏览器将`value=on`其用作默认值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-30T12:40:48.903

*HTML 生活标准*`on`反映了这一点：该值处于“默认/开启”模式，这意味着如果没有提供 value 属性，它的值为“ ”。从[***4.10.7.1.16 复选框状态（类型=复选框）-HTML 生活标准（2013 年 9 月）***](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#checkbox-state-(type=checkbox))：

> *   值 IDL 属性处于模式[default/on](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#dom-input-value-default-on)。
> 
> [...]
> 
> **default/on**
> 获取时，如果元素具有`value`属性，则必须返回该属性的值；否则，它必须返回字符串“ `on`”。在设置时，它必须将元素的`value`属性设置为新值。

这同样也是另一个 HTML 规范的一部分，***W3C HTML 5 Aug 2013 Recommendation Specification***也有这个：

*   [http://www.w3.org/TR/html5/forms.html#checkbox-state-(type=checkbox)](http://www.w3.org/TR/html5/forms.html#checkbox-state-(type=checkbox))
*   [http://www.w3.org/TR/html5/forms.html#dom-input-value-default-on](http://www.w3.org/TR/html5/forms.html#dom-input-value-default-on)

* * *

*供参考我之前的评论：*

> Firefox（2013 年 9 月）、Chrome（2013 年 9 月）、Internet Explorer（6）：“开启”。我怀疑这可以追溯到很久以前。[http://lxr.mozilla.org/classic/source/lib/layout/layform.c#86](http://lxr.mozilla.org/classic/source/lib/layout/layform.c#86) - 因为大多数浏览器需要为自己的代码对象设置一些默认值，我猜这个“on”很常见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T09:45:18.150

浏览器只有在选中时，才会发送复选框（在后数据中）的值。您只需要检查 POST 数据中是否存在特定复选框的值（*任何值）。*

IE

```
// no need to check against 'on', 'true', '1' etc..
if(post data contains a value for checkbox1) {
    // checkbox 1 is checked
}
else {
    // not checked
} 
```

# nhibernate - NHibernate SQLite 编码

> ID：12911792
> 
> 赞同：1
> 
> 时间：2012-10-16T09:44:02.133
> 
> 标签：nhibernate, sqlite, nhibernate-mapping

我已经将我的 NHibernate 应用程序设置为使用 SQLite 作为小型项目的后端数据库。我正在使用代码映射将我的实体连接到数据库。一切正常，但有一件事：从数据库返回的数据没有克罗地亚特殊字符。使用 SQLite 管理员打开数据库时，字符显示正确，但通过 NHibernate Linq 查询获取时，特殊字符显示为带有问号的黑框。我正在使用以下连接字符串：

```
"Data Source=D:\DATA\TEST.DB;version=3"; 
```

是否需要任何设置（在数据库、连接字符串或其他地方）以使字符正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:42:59.353

尝试使用具有预定义编码设置的连接字符串：

```
"Data Source=D:\DATA\TEST.DB;version=3;UseUTF8Encoding=True;" 
```

# javascript - createRange 在 Chrome 中不起作用

> ID：12911793
> 
> 赞同：1
> 
> 时间：2012-10-16T09:44:04.180
> 
> 标签：javascript, google-chrome, compatibility

这适用于 IE9，但不适用于 Chrome。我想在 Chrome 中运行它。这是在我将单词放入文本框中时找到我正在寻找的单词。谁能帮我解决这个问题？？

```
var n = 0;
var str = '';

function chk() {
  str = form1.kts.value;
  if (str == '') alert('none!');
  else ok();
}

function ok() {
  var found;
  var text = document.body.createTextRange();

  for (i = 0; i <= n && (found = text.findText(str)) != false; i++) {
    text.moveStart("character", 1);
    text.moveEnd("textedit");
  }
  if (found) {
    text.moveStart("character", - 1);
    text.findText(str);
    text.scrollIntoView();
    text.select();
    n++;
  } else {
    if (n > 0) {
      n = 0;
      ok();
    } else {
      alert("nothing.");
      form1.kts.value = '';
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:48:24.697

`createTextRange`仅在 IE（和某些版本的 Opera）中受支持，要解决您的问题，您可能应该将`createRange`其用于其他浏览器。

```
var n = 0,
    str = ''; 

function chk(){ 
    str = form1.kts.value; 
    if(str == '') {
        alert('none!');
    }else{
        ok();
    }
} 

function ok(){ 
    var found, text;
    if (document.createRange) {
        text = document.body.createTextRange();
        // do stuff for IE here
    }else{
        if( document.selectionStart ) {
            text = document.setSelectionRange(start, end);
            // do stuff for other browsers here
        }
    }

 .........​ 
```

# iphone - UIPageViewController - 翻转到随机页面需要很多时间

> ID：12911797
> 
> 赞同：0
> 
> 时间：2012-10-16T09:44:11.633
> 
> 标签：iphone, ios, cocoa-touch

我正在开发一个基于页面的 iPhone 应用程序。现在，点击一个按钮，我就翻到了一个随机页面。在翻转时，首先调用新页面的 viewDidAppear，然后调用当前页面的 viewDidDisappear（这是预期行为）。新页面出现很快（我在 viewDidAppear 中打印了 [NSDate date]），但平均在新页面的 viewDidAppear 后 30 到 40 秒后调用当前页面的“viewDidDisappear”（&中间没有调用其他方法；我将 NSLog 放在每个方法中，看看是否调用了其他方法）！所以它是这样的： 1\. 新页面的 viewDidAppear 被调用并结束（我通过打印 viewDidAppear 的开始和结束时间检查了这一点） 2\. 几乎 30 到 40 秒没有发生任何事情（“之后” 新页面的viewDidAppear 'ends') 3\. 然后，调用当前页面的viewDidDisappear ！（&我在 viewDidDisappear / viewWillDisappear 中没有处理；我只是打印当前时间）

为什么中间会有这么长时间的停顿？

这是我的相关代码片段：（环境：XCode 4.3，iOS 5.0，使用 iPad 进行测试）

变成随机页面的代码：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
ViewController_EachPage *page = [self getPageAtIndex:randomPageNum];
if ((page != nil) && (page != NULL)) {
    [array insertObject:page atIndex:0];
}
[self.viewCtrlrPages 
     setViewControllers:[NSArray arrayWithArray:array]  
    direction:UIPageViewControllerNavigationDirectionForward 
     animated:YES completion:nil]; 
```

viewDidAppear 方法

```
....
self.timer = [NSTimer scheduledTimerWithTimeInterval:10.0f
                target:self selector:@selector(hideThem)
                userInfo:nil repeats:NO];   

[((com_AppDelegate *) [[UIApplication sharedApplication] delegate]).viewCtrlrCoverPage.viewCtrlrPages initializePage];

NSLog(@"EachPage.viewDidAppear at %@", [NSDate date]);
.... 
```

viewDidDisappear 方法

```
-(void) viewWillDisappear:(BOOL)animated {
    NSLog(@"EachPage.viewWillDisappear");
    [self.timer invalidate];
}

-(void) viewDidDisappear:(BOOL)animated {
    NSLog(@"EachPage.viewDidDisappear at %@", [NSDate date]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:35:24.517

您未能在`viewWillAppear`/`viewWillDisappear`等中调用 super 。坏主意。

# java - Hadoop：如何将 reducer 输出合并到单个文件中？

> ID：12911798
> 
> 赞同：16
> 
> 时间：2012-10-16T09:44:14.820
> 
> 标签：java, hadoop, merge, mapreduce, hdfs

我知道 shell 中的“getmerge”命令可以完成这项工作。

但是如果我想在作业后通过 HDFS API for java 合并这些输出，我该怎么办？

我真正想要的是 HDFS 上的单个合并文件。

我唯一能想到的就是在那之后开始一份额外的工作。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T19:40:56.697

> 但是，如果我想在 HDFS API for java 的作业之后合并这些输出，我该怎么办？

猜测，因为我自己没有尝试过，但我认为您正在寻找的方法是[FileUtil.copyMerge](http://hadoop.apache.org/docs/r0.22.0/api/org/apache/hadoop/fs/FileUtil.html#copyMerge%28org.apache.hadoop.fs.FileSystem,%20org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.FileSystem,%20org.apache.hadoop.fs.Path,%20boolean,%20org.apache.hadoop.conf.Configuration,%20java.lang.String%29)，这是您运行`-getmerge`命令时 FsShell 调用的方法。 `FileUtil.copyMerge`将两个 FileSystem 对象作为参数 - FsShell 使用 FileSystem.getLocal 来检索目标 FileSystem，但我看不出有任何理由不能在目标上使用 Path.getFileSystem 来获取 OutputStream

话虽如此，我认为它不会让你受益匪浅——合并仍在本地 JVM 中进行；所以你并没有真正节省太多，`-getmerge`其次是`-put`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T09:53:39.353

***您可以通过在代码中设置单个 Reducer 来获得单个输出文件。***

```
Job.setNumberOfReducer(1); 
```

将满足您的要求，但*成本高*

* * *

**或者**

* * *

```
Static method to execute a shell command. 
Covers most of the simple cases without requiring the user to implement the Shell interface.

Parameters:
env the map of environment key=value
cmd shell command to execute.
Returns:
the output of the executed command. 
```

* * *

```
org.apache.hadoop.util.Shell.execCommand(String[]) 
```

# jquery - 用css悬停时显示图像

> ID：12911805
> 
> 赞同：3
> 
> 时间：2012-10-16T09:44:37.500
> 
> 标签：jquery, html, css

我的图像很少，它们是动态来自数据库的。

当用户将鼠标悬停在图像上时，名称应显示在图像下方。

如何使用 CSS 或 jquery 做到这一点？

检查下图，这就是它应该的样子。

![在此处输入图像描述](../Images/68f995f1f04bac981e8e86b38b35640b.png)

我的代码是

```
<div class="blue_strip_icon" style="padding-right: 15px;">
    <a href="<%= pag.page.id %>" class="icon_link">
    <img src="<%= @icon %>" title="<%= pag.page.page_title %>" />
    </a>
</div> 
```

CSS是

```
.blue_strip_icon{
    float: right;
    height: 50px;
    padding-top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:58:18.383

```
<div class="blue_strip_icon" style="padding-right: 15px;">
  <a href="<%= pag.page.id %>" class="icon_link">
  <img src="<%= @icon %>" title="<%= pag.page.page_title %>"/>
  </a>
  <div class="title"><%= pag.page.page_title %></div>
</div>

.blue_strip_icon{
    float: right;
    height: 50px;
    width:70px;
    padding-top: 10px;
}

.title{
    width:70px;
    border-radius:20px;
    background:white;
    color:blue;
    border:3px blue solid;
    display:none;

}

​$('.icon_link').hover(function(){
    $(this).next().slideDown(200);
},function(){ 
    $(this).next().slideUp(200);
});​ 
```

[演示](http://jsfiddle.net/xBEQc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:50:30.040

如果你想通过纯 CSS 做到这一点，我建议你将图像作为背景图像加载到一个分区 (div) 中，该分区具有`position: relative`并包含一个名为 image 的 span。该跨度应该被隐藏和定位，`position: absolute` 所以你应该做的就是：

```
div.CLASS:hover > span.child {
 // show the span or blah blah...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:46:11.957

通常，标题属性由浏览器解释，并在您将鼠标悬停在元素上时显示为工具提示。因此，您实际上并不需要 jQuery。

这种行为的问题在于，您并不能真正控制此工具提示的格式。但是，如果您想在某些自定义部分中显示和格式化此值，您可以订阅这些图像的 .hover() 事件：

```
$(function() {
    $('img').hover(function() {
        var title = $(this).attr('title');
        // TODO: do something with the title
    }, function() {
        // this will be triggered when the mouse pointer leaves the element
    });
}); 
```

# redis - 查找 redis 中存在的设置数据类型键

> ID：12911806
> 
> 赞同：1
> 
> 时间：2012-10-16T09:44:41.453
> 
> 标签：redis

我需要检查是否存在数据类型集的键。如何找到它？Redis中有任何财产吗？检查了redis命令，但没有找到。请帮忙。

示例：sadd("Uid132423","Apple");

需要检查“Uid132423”是否存在。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:53:32.317

可能你必须使用 SCARD。如果 key 不存在，则返回 0。

# php - 检查密码的有效方法是在数据库中

> ID：12911810
> 
> 赞同：0
> 
> 时间：2012-10-16T09:44:44.043
> 
> 标签：php, mysql

我有一个系统可以一次生成一批随机代码，最多 100 个。然后将它们插入数据库。我正在使用代码生成器，并且不太可能再次创建类似的代码，但要确保我想检查数据库是否有重复。我的理论..

```
 $amount_of_codes

  while ($x != $amount_of_codes)
    {
    $code = gencode();
    $mysql_check = "SELECT code FROM data WHERE code = '$code'";
    $mysql_check_result = mysql_query($mysql_check);
    $check = mysql_num_rows($mysql_check_result);
     if (!$check)
      {
      mysql_query("INSERT INTO data(code) values('$code')")
      $x++
      } 
    } 
```

看起来很乱，有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:46:04.400

给`Code`Column 一个 UNIQUE 约束：

```
CREATE TABLE Code
(
  Code ..
..
  CONSTRAINT Code_Unique UNIQUE (Code),
..
); 
```

插入时只需要捕获数据库异常/错误，不用担心代码是否已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:47:06.817

*很乱*。_ 更重要的是，它还受制于竞争条件，即另一个进程可以在您的检查和插入之间插入该代码。

如果您想避免这种情况，请将代码列设置为唯一键，然后尝试插入它。如果它已经存在，则该原子操作将返回错误或引发异常，您可以检查/捕获。

通过进行尝试后检查，您不会失去任何东西，因为无论如何您都必须进行检查（以防前面提到的竞争条件咬住了您）。但是您获得的是原子性和更简洁的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:51:11.990

非常简单的解决方案，确保您的函数女巫放入代码不会放入已经退出的代码。

基本上：

生成代码

检查代码是否存在

是 -> 生成新代码

否 -> 将代码放入数据库

没时间写剧本对不起

# database - Zend init 按需连接数据库

> ID：12911827
> 
> 赞同：0
> 
> 时间：2012-10-16T09:45:52.133
> 
> 标签：database, zend-framework, lazy-evaluation

在我当前的项目中，使用 Zf 1.13（或类似的东西）编写，我的页面获得了非常高的点击量（超过 5k 的同时连接）。

我已经设置 Memecached 来限制这些页面发出的查询数量，但我现在遇到了另一个问题：即使没有发出查询，它们仍在生成与 mysql 的连接，从而达到 mysql 的 max_clients。

所以在我更轻的 Bootstrap 中，我有这段代码

```
$db = Zend_Db::factory($cfgT['resources']['db']['adapter'], $cfgT['resources']['db']['params']);
$db->getConnection();
Zend_Db_Table::setDefaultAdapter($db); 
```

我想知道我是否可以将这段脚本从 Bootsrap 类中移出到脚本中，以便仅在我遇到缓存未命中时初始化数据库连接？

谢谢你的帮助！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:23:59.970

`Zend_Db`默认情况下执行此操作。但是，`$db->getConnection()`您的呼叫将触发数据库连接 - 如果您删除它，它应该可以按照您的意愿工作并在执行第一个查询时连接。

# c# - 如何使用try和catch捕获c#中的所有异常？

> ID：12911833
> 
> 赞同：60
> 
> 时间：2012-10-16T09:46:20.983
> 
> 标签：c#, exception

我想写一些 try and catch 来捕获任何类型或异常，这段代码是否足够（这就是 Java 中的方法）？

```
try {
code....
}
catch (Exception ex){} 
```

或者应该是

```
try {
code....
}
catch {} 
```

?

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-16T09:48:07.190

两种方法都会捕获所有异常。您的两个代码示例之间没有显着差异，除了第一个将生成编译器警告，因为`ex`已声明但未使用。

但请注意，有些异常是特殊的，会自动重新抛出。

> `ThreadAbortException`是一个可以被捕获的特殊异常，但它会在 catch 块结束时自动再次引发。

[http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)

* * *

正如评论中提到的，捕获并忽略所有异常通常是一个*非常糟糕的主意。*通常，您希望执行以下操作之一：

*   捕获并忽略您知道不是致命的特定异常。

    ```
    catch (SomeSpecificException)
    {
        // Ignore this exception.
    } 
    ```

*   捕获并记录所有异常。

    ```
    catch (Exception e)
    {
        // Something unexpected went wrong.
        Log(e);
        // Maybe it is also necessary to terminate / restart the application.
    } 
    ```

*   捕获所有异常，进行一些清理，然后重新抛出异常。

    ```
    catch
    {
        SomeCleanUp();
        throw;
    } 
    ```

`throw;`请注意，在最后一种情况下，使用and not重新抛出异常`throw ex;`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-24T08:11:11.867

请注意，除了所有其他注释之外，还有一个小的差异，为了完整起见，应该在这里提及！

当程序集标记为“RuntimeCompatibility(WrapNonExceptionThrows = false)”（自 CLR2 以来默认为 true）时，使用空的 catch 子句可以捕获非 CLSCompliant 异常。[1][2][3]

[1] [http://msdn.microsoft.com/en-us/library/bb264489.aspx](http://msdn.microsoft.com/en-us/library/bb264489.aspx)

[2] [https://web.archive.org/web/20140816175210/http://blogs.msdn.com/b/pedram/archive/2007/01/07/non-cls-exceptions.aspx](https://web.archive.org/web/20140816175210/http://blogs.msdn.com/b/pedram/archive/2007/01/07/non-cls-exceptions.aspx)

[3] [CLR 会同时处理符合 CLS 和不符合 CLS 的异常吗？](https://stackoverflow.com/questions/1531077/will-clr-handle-both-cls-complaint-and-non-cls-complaint-exceptions)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-27T08:15:18.303

```
 static void Main(string[] args)
    {
        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
    }

    static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-21T11:36:27.297

我捕获所有异常并将其存储在数据库中，因此可以轻松纠正错误 - 存储的页面、地点、日期等

```
try
{     
   Cart = DB.BuyOnlineCartMasters.Where(c => c.CmpyID == LoginID && c.Active == true).FirstOrDefault();
}
catch (Exception e)
{
    ErrorReport.StoreError("CartMinifiedPartial-Company", e);  
    -- storing the error for reference
} 
```

存储

```
public static void StoreError(string ErrorPage, Exception e)
    {
        try
        {
            eDurar.Models.db_edurarEntities1 DB = new Models.db_edurarEntities1();
            eDurar.Models.ErrorTable Err = new eDurar.Models.ErrorTable();
            Err.ErrorPage = ErrorPage;
            if (e.Message != null)
            {
                Err.ErrorDetails = e.Message;
            }
            if (e.InnerException != null)
            {
                Err.InnerException = e.InnerException.Message.ToString();
            }

            Err.Date = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, TimeZoneInfo.FindSystemTimeZoneById("India Standard Time"));
            DB.ErrorTables.AddObject(Err);
            DB.SaveChanges();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-16T09:48:45.067

两者都很好，但只有第一个允许您检查异常本身。

两者都吞下异常，你应该只捕获异常来做一些有意义的事情。隐瞒问题**没有**意义！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T09:49:13.047

两种方式都是正确的。

如果你需要对 catch 块中的 Exception 对象做一些事情，那么你应该使用

```
try {
    // code....
}
catch (Exception ex){} 
```

然后`ex`在 catch 块中使用。

无论如何，捕捉 Exception 类并不总是一个好习惯，捕捉一个更具体的异常是一个更好的做法——一个你期望的异常。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-18T00:14:54.507

```
try
{

..
..
..

}

catch(Exception ex)
{

..
..
..

} 
```

Exception ex 表示所有异常。

# linux - 内核栈和用户空间栈

> ID：12911841
> 
> 赞同：127
> 
> 时间：2012-10-16T09:46:48.660
> 
> 标签：linux, linux-kernel, linux-device-driver

内核栈和用户栈有什么区别？为什么使用内核堆栈？如果在 ISR 中声明了局部变量，它将存储在哪里？每个进程都有自己的内核栈吗？那么进程如何在这两个堆栈之间进行协调呢？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-10-16T10:23:27.787

> 1.  *内核栈和用户栈有什么区别？*

简而言之，除了使用内存中的不同位置（因此堆栈指针寄存器的值不同）以及通常不同的内存访问保护之外，什么都没有。即在用户模式下执行时，即使映射了内核内存（其中一部分是内核堆栈）也将无法访问。反之亦然，如果内核代码没有明确请求（在 Linux 中，通过类似的函数`copy_from_user()`），用户内存（包括用户堆栈）通常不能直接访问。

> 2.  *为什么使用[一个单独的]内核堆栈？*

特权与安全分离。一方面，用户空间程序可以使他们的堆栈（指针）成为他们想要的任何东西，而且通常没有架构要求，甚至有一个有效的。因此，内核不能*相信*用户空间堆栈指针是有效的或可用的，因此需要一组在它自己的控制之下。不同的 CPU 架构以不同的方式实现这一点；当特权模式切换发生时，x86 CPU 会自动切换堆栈指针，并且用于不同特权级别的值是可配置的——通过特权代码（即仅内核）。

> 3.  *如果在 ISR 中声明了局部变量，它将存储在哪里？*

在内核堆栈上。内核（即 Linux 内核）不会*将*ISR 直接挂接到 x86 架构的*中断门*，而是将中断调度委托给通用内核中断进入/退出机制，该机制在调用已注册的处理程序之前保存中断前寄存器状态. CPU 本身在调度中断时可能会执行特权和/或堆栈切换，这是由内核使用/设置的，因此公共中断入口代码已经可以依赖于存在的内核堆栈。
也就是说，在执行内核代码时发生的中断将简单地（继续）使用此时的内核堆栈。如果中断处理程序具有深度嵌套的调用路径，这可能会导致堆栈溢出（如果深度内核调用路径被中断并且处理程序导致另一个深度路径；在 Linux 中，文件系统/软件 RAID 代码被 iptables 处于活动状态的网络代码中断是已知会在未调整的旧内核中触发这种情况......解决方案是增加此类工作负载的内核堆栈大小）。

> 4.  *每个进程都有自己的内核堆栈吗？*

不只是每个进程——每个*线程*都有自己的内核栈（事实上，还有自己的用户栈）。请记住，进程和线程（对于 Linux）之间的唯一区别是多个线程可以共享一个地址空间（形成一个进程）。

> 5.  *这两个堆栈之间的进程如何协调？*

一点也不 - 它不需要。调度（如何/何时运行不同的线程，如何保存和恢复它们的状态）是操作系统的任务，进程不需要关心这一点。当线程被创建（并且每个进程必须至少有一个线程）时，内核为它们创建内核堆栈，而用户空间堆栈要么由用于创建线程的任何机制显式创建/提供（类似于`makecontext()`或`pthread_create()`允许调用者的函数）指定要用于“子”线程堆栈的内存区域）或继承（通过访问内存克隆，通常称为“写入时复制”/COW，在创建新进程时）。
也就是说，**（状态，其中是线程的堆栈指针）。有多种方法可以做到这一点：UNIX 信号、`setcontext()`、`pthread_yield()`/ `pthread_cancel()`、 ... - 但这与原始问题有点离题。**

 *** * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-16T10:27:25.630

我的答案是从我的东西的其他 SO 问题中收集的。

```
What's the difference between kernel stack and user stack? 
```

作为一个内核程序员，你知道内核应该被错误的用户程序限制。假设您为内核和用户空间保留相同的堆栈，然后用户应用程序中的简单段错误会使内核崩溃并需要重新启动。

每个 CPU 有一个“内核堆栈”，例如 ISR 堆栈，每个进程有一个“内核堆栈”。每个进程都有一个“用户堆栈”，尽管每个线程都有自己的堆栈，包括用户线程和内核线程。

[http://linux.derkeiler.com/Mailing-Lists/Kernel/2004-10/3194.html](http://linux.derkeiler.com/Mailing-Lists/Kernel/2004-10/3194.html)

```
Why kernel stack is used? 
```

因此，当我们处于内核模式时，堆栈类型的机制对于处理函数调用是必要的，类似于用户空间的局部变量。

[http://www.kernel.org/doc/Documentation/x86/kernel-stacks](http://www.kernel.org/doc/Documentation/x86/kernel-stacks)

```
If a local variable is declared in an ISR, where it will be stored? 
```

它将存储在 ISR 堆栈（IRQSTACKSIZE）中。仅当硬件支持时，ISR 才会在单独的中断堆栈上运行。否则，ISR 堆栈帧将被推入中断线程的堆栈。

用户空间不知道并且坦率地说不关心中断是在当前进程的内核堆栈还是单独的 ISR 堆栈中服务的。由于中断来自每个 cpu，因此 ISR 堆栈必须是每个 cpu。

```
 Does each process has its own kernel stack ? 
```

是的。每个进程都有自己的内核堆栈。

```
 Then how the process coordinates between both these stacks? 
```

@FrankH 的回答对我来说看起来很棒。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-06T06:50:25.340

> 1.  内核栈和用户栈有什么区别

参考 Robert Love 的 Linux Kernel Development，主要区别在于大小：

> 用户空间可以在堆栈上静态分配许多变量，包括巨大的结构和千元素数组。
> 这种行为是合法的，因为用户空间有一个可以动态增长的大堆栈。
> 内核栈既不是大的也不是动态的；它很小且大小固定。
> 内核堆栈的确切大小因架构而异。
> 在 x86 上，堆栈大小可在编译时配置，可以是 4KB 或 8KB。
> 从历史上看，内核堆栈是两页，这通常意味着它在 32 位架构上是 8KB，在 64 位架构上是 16KB——这个大小是固定的和绝对的。
> 每个进程都有自己的堆栈。

内核堆栈还包含一个指向 thread_info 结构的指针，该结构保存有关线程的信息。**

# linux - 将 sugarcrm 从 5.2 升级到最新版本

> ID：12911844
> 
> 赞同：0
> 
> 时间：2012-10-16T09:47:13.633
> 
> 标签：linux, sugarcrm

我需要从 sugarcrm 5.2 升级到最新版本。

它不断打破这个过程，我从来没有通过 5.5，也许 6 一次。

我是否可以只**安装**最新版本的 sugarcrm，并仅在数据库上应用升级 SQL **，**然后将全新安装与升级的数据库一起使用？

谢谢

[编辑] 我尝试了静默升级和所有其他方式来升级代码，我检查了 php 设置等，我想知道我是否可以按照上面的建议进行操作。我还有 16GB 数据的缓存/上传和更多 GB 的缓存/图像。如果我可以重新安装和升级数据库，我应该如何处理这些文件夹？[/编辑]

不知道这是否重要，但我的服务器运行 Linux。（我不认为版本对我想做的事情起主要作用，因为我只会安装最新的然后我需要最新的 mysql、php、apache 等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:56:09.963

您也可以尝试使用静默升级程序，有时会更成功...

[http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.5/Sugar_Community_Edition_Installation_Guide_6.5.0#Using_the_Sugar_Silent_Upgrader](http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.5/Sugar_Community_Edition_Installation_Guide_6.5.0#Using_the_Sugar_Silent_Upgrader)

从那时起，迁移可能是更好的选择。您可以简单地安装新版本，然后将旧数据转储到新数据结构中。

# jquery - 在鼠标悬停事件 jquery 上返回到以前的状态

> ID：12911845
> 
> 赞同：0
> 
> 时间：2012-10-16T09:47:14.163
> 
> 标签：jquery, html-lists, mouseover, mouseout

我有这个小提琴：http: [//jsfiddle.net/27bvG/](http://jsfiddle.net/27bvG/)

这个在鼠标悬停时显示“隐藏” li 并保持可见 我对 Jquery 不太熟练，所以我需要一些帮助。如何在鼠标移出时返回先前的状态并再次显示“2 more”？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:59:30.520

你可以做这样的事情

```
 $("#tricky_list li.more").hover(
        function () {
           // hover function       
        }

     },
        function () {
         // unhover function
       }
    ); 
```

在悬停功能中，您可以显示不同的 li，在取消悬停时，您可以再次隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:14:09.753

您可以通过处理悬停在“另外两个”LI 上时显示的 LI的`mouseover`和事件来做到这一点。`mouseout`请参阅下面的代码。

**检查这个演示：http:** [//jsfiddle.net/27bvG/8/](http://jsfiddle.net/27bvG/8/)

**HTML**

```
<ul id="tricky_list">
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li class="onmore">Item 4</li>
<li class="onmore">Item 5</li>
</ul> 
```

**JS**

```
var hideTimer = -1;
$("#tricky_list li.more").on("mouseover", function(){
    $("#tricky_list li.onmore").show();
    $("#tricky_list li.more").hide()
});
$("#tricky_list li.onmore").on("mouseover", function(){
    clearTimeout(hideTimer);
    hideTimer = -1;
});
$("#tricky_list li.onmore").on("mouseout", function(){
    hideTimer = setTimeout(function() {
        $("#tricky_list li.more").show();
        $("#tricky_list li.onmore").hide();
        hideTimer = -1;
    }, 1000);
}); 
```

# android - 如何隐藏状态栏而不在启动器中提升图标？

> ID：12911847
> 
> 赞同：0
> 
> 时间：2012-10-16T09:47:17.593
> 
> 标签：android, statusbar, android-launcher

我想在 Launcher 界面中隐藏状态栏。我使用了代码“window.addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);” 去实现它。但问题是当我长按桌面项目时，状态栏是隐藏的，但其他应用程序图标会升起。季节是状态栏的地方没了，所以下面的东西会上去。有谁知道如何以简单的方式解决问题？提前TKS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:52:48.783

自己回答问题。设置工作区边距动态。

# javascript - jQuery - 将 html 添加到表单字段中

> ID：12911848
> 
> 赞同：0
> 
> 时间：2012-10-16T09:47:21.800
> 
> 标签：javascript, jquery, ruby-on-rails, forms

我在 Rails 中使用时间线，如果您在媒体字段中写的内容周围放置块引用标签，它将在时间线上创建引用样式。我想要实现的是有一个复选框，如果它被选中，它会为你添加块引用标签，这样用户就不必编写html了。

如何在提交之前在他们写的任何内容周围添加块引用标签，但前提是选中复选框？我正在尝试让 jQuery 将标签预先/附加到输入字段，以便用户可以看到它们，但我也无法正常工作。不过，我希望它让用户永远不会看到 html（以防他们不小心编辑它！），并且在将其发送到数据库之前简单地添加他们的输入。

这是我到目前为止所拥有的：

```
$(document).ready(function(){
    $("#blockCheck").bind('click', function(){
        var input = $('#event_media input');
        if ($(this).prop('checked')){
            input.prepend('<blockquote>').append('</blockquote>');
        }
    });
}); 
```

复选框的 id 为“blockCheck”，输入字段的 id 为“event_media”。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:53:12.283

只需将反引号添加到输入值。

代码（更新以删除引号，如果存在）[链接](http://jsfiddle.net/WjRex/3/)

```
$("a#sub").click(function() {
    var text = $("input").val();    
    $("div").html($("<blockquotes>").html(text));
});

$("a#rem").click(function() {
    var blockquotes = $("div blockquotes");
    var text = $(blockquotes).text(); //you have the text inside the blockquotes

    blockquotes.replaceWith(text); //this to replace or $(blockquotes).remove(); to remove it.

    //alert(html);
}); 
```

​</p>

HTML

```
<input name="test">
<a id="sub">Submit</a>
<a id="rem">Remove</a>

<br/><br/>
<div></div> 
```

​ ​</p>

# url-rewriting - 应用程序请求路由作为反向代理 - 绝对 URI 的错误 500.19

> ID：12911849
> 
> 赞同：1
> 
> 时间：2012-10-16T09:47:27.687
> 
> 标签：url-rewriting, iis-7.5, reverse-proxy

我在 IIS 7.5 上安装了“IIS 应用程序请求路由 (ARR) 2.5”和“IIS URL Rewrite 2.0”，以便为在 localhost 上侦听的程序创建反向代理/缓存。

问题：URL 重写不适用于绝对 URI，它仅适用于相对 URL。根据文档 [1]，这是预期的行为，但示例 [2] 表明，如果启用了代理，重写也应该适用于绝对 URI。不幸的是，即使启用了代理，错误 (500.19 / 0x80070002) 也是相同的。我必须修改一些 IIS 设置吗？我使用 hosteurope.de 提供的默认安装。

这是 web.config 片段：

```
<rewrite>
<rules>
<rule name="test_FAIL" stopProcessing="true">
<match url="^test1/(.*)" />
<action type="Rewrite" url="http://google.com/{R:1}" />
</rule>
<rule name="test_OK" stopProcessing="true">
<match url="^test2/(.*)" />
<action type="Rewrite" url="/{R:1}" />
</rule>
</rules>
</rewrite> 
```

[1] - [http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Rewrite_action](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Rewrite_action)

[2] - [http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:59:16.793

错误 500.19 / 0x80070002 是由不存在的缓存目录引起的。还必须创建缓存目录，仅指定路径是不够的！

# jquery - 通过 URL 哈希链接到 JQuery 选项卡式内容中的锚点

> ID：12911850
> 
> 赞同：1
> 
> 时间：2012-10-16T09:47:28.717
> 
> 标签：jquery, anchor, jquery-ui-tabs, jquery-tabs, hashtag

我已经看到一些关于类似主题的好主题，但没有一个可以帮助我直接处理我必须使用的代码块，我将在下面分享。这是一个选项卡区域，现在允许从 URL 哈希标记转到选项卡。但是，我在选项卡中添加跳转链接，并且需要能够将 URL 共享到选项卡中的特定锚点。有问题的JS是这样的：

```
if(window.location.hash && document.getElementById(window.location.hash.split('#')[1]) && $('#'+window.location.hash.split('#')[1]).closest('div.outer').length > 0){
        var pane = $('#'+window.location.hash.split('#')[1]);
        pane.closest('div.outer').find('ul.outertabs li.selected').removeClass('selected');
        $(pane.closest('div.outer').find('ul.outertabs li')[pane.index()]).addClass('selected');
        pane.closest('div.outer').find('div.pane').hide();
        pane.show();
    } 
```

提前致谢。如果这还不够信息，请告诉我。

# iphone - UIClass 和 UIClassController 有什么区别？

> ID：12911852
> 
> 赞同：0
> 
> 时间：2012-10-16T09:47:31.167
> 
> 标签：iphone, ios, uitableview, uiview, uiviewcontroller

我开始在 Xcode 上开发 iPhone，但我不明白 View 和 View Controller 之间或 Table View 和 Table View Controller 之间的区别。有人有简单的解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:53:01.903

**让我们先到 the`UIView`和`UIViewController`class**

`UIViewController`是为管理 UIViews 而构建的 Cocoa Touch 类。它期望有一个视图层次结构，但您不会“自动”获得一个视图（这有点不准确；请参阅下面的编辑）。通常你会通过调用`initWithNibName`你的视图控制器来获得视图。

Interface Builder 中有一些内置的魔法，它知道如果 File's Owner 是一个`UIViewController`（或子类），则有一个名为 view 的属性。就是这样。

一旦你链接了一个视图控制器和一个视图，视图控制器会为你做很多工作：它注册为视图触摸事件的响应者，注册设备旋转通知（如果你愿意，它会自动处理它们），帮助您负责动画的一些细节，并半自动处理低内存条件。

如果您不`initWithNibName`手动调用或设置视图属性，则视图属性获取器将在视图为零时调用 loadView。loadView 的默认实现将查看您是否设置了 nibBundle 和 nibName 并尝试从那里加载视图（这就是为什么大多数时候您不必调用 initWithNibName），但如果这些属性没有设置，它将使用默认值实例化一个 UIView 对象。所以从技术上讲，是的，它确实会自动附带它自己的`UIView`，但大多数时候这没什么价值。

**现在来到 TableView 和 UITableViewController 类**

A`TableViewController`是`ViewController`内置 TableView 的。这将具有已声明和设置所需的委托方法。这个 VC 已经是一个 TableView 委托和数据源。它无法调整大小。优点是易于使用，缺点是灵活性非常有限。

A`TableView`就是一个 TableView（的子类`UIView`）。它可以添加到 ViewController 并调整大小，与另一个基于视图的对象一起使用等。优点是灵活性，缺点是您必须自己设置委托和数据源方法（在我看来，非常值得花时间去获得灵活性）。

另一个注意事项是，当使用新的静态 TableView 单元格（iOS5 的一部分）时，您必须使用 TableViewController。

另请查看以下链接以获取有关方法的详细说明。

[视图和视图控制器](https://stackoverflow.com/questions/5788963/view-and-viewcontroller)

[什么是控制器类？](https://stackoverflow.com/questions/5280319/what-are-controller-classes)

[UIView 和 UIViewController 有什么区别？](https://stackoverflow.com/questions/4669783/what-is-the-difference-between-view-and-viewcontroller-in-iphone)

[我可以创建的 RootViewController、AppDelegate 和 View Controller 类之间有什么区别？](https://stackoverflow.com/questions/3626737/whats-the-difference-between-the-rootviewcontroller-appdelegate-and-the-view-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:56:03.207

[视图和它的控制器之间的区别可以在模型-视图-控制器模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的上下文中正确地描述（也可以看看[这篇文章](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)）：

> 视图是其模型的（视觉）表示。它通常会突出模型的某些属性并抑制其他属性。因此，它充当演示过滤器。
> 
> 视图附加到其模型（或模型部分），并通过提问从模型中获取演示所需的数据。它还可以通过发送适当的消息来更新模型。所有这些问题和消息都必须在模型的术语中，因此视图必须知道它所代表的模型属性的语义。
> 
> 控制器是用户和系统之间的纽带。它通过安排相关视图在屏幕上的适当位置呈现自己，为用户提供输入。它通过向用户提供菜单或其他提供命令和数据的方式来提供用户输出方式。控制器接收此类用户输出，将其转换为适当的消息并将这些消息传递给一个或多个视图。

这个想法是视图负责模型中包含的数据的可视化表示；控制器大致负责视图和模型之间的用户交互和通信。

这适用于 and 之间的关系，`UIView`以及 and之间`UIViewController`的关系等。还要注意的是，虽然/没有提供模型类（因为它们是非常广泛的类，所以模型可以是任何东西），/确实以表数据源的形式定义模型和它。`UITableView``UITableViewController``UIView``UIViewController``UITableView``UITableViewController``UITableViewDataSource`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:53:45.480

顾名思义，视图控制器是一个控制它管理的“视图”的实体。所以你不会将视图控制器渲染到屏幕上。您只需渲染视图。可以将视图呈现到屏幕上。它可以接受触摸事件、手势等。它可以包含许多其他子视图，也可以是另一个视图的子视图。但是拍下这整张照片。是什么用它们的机制管理所有这些视图（和子视图）？那是视图控制器。视图控制器是一个包含视图组合的对象，它管理这些视图的工作方式。

# javascript - JavaScript 中的 HashMap 对象

> ID：12911853
> 
> 赞同：13
> 
> 时间：2012-10-16T09:47:42.300
> 
> 标签：javascript

> **可能重复：**
> [循环遍历 JavaScript 对象](https://stackoverflow.com/questions/684672/loop-through-javascript-object)
> [获取对象键的数组](https://stackoverflow.com/questions/8763125/get-array-of-objects-keys)

有没有办法在 javascript 中使用 hashmaps。我发现[这个](https://stackoverflow.com/questions/4246980/how-to-create-a-simple-map-using-javascript-jquery)页面显示了在 javascript 中使用哈希图的一种方式。基于此，我将数据存储如下：

```
var map = new Object();
map[myKey1] = myObj1;
map[myKey2] = myObj2;

function get(k) {
   return map[k];
} 
```

但我想要`map`对象的 keySet（所有键），就像在 Java ( `map.keySet();`) 中所做的那样。

谁能告诉我如何获取该对象中存在的所有键？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T09:48:57.437

```
for (var key in map) {
  if (map.hasOwnProperty(key)) {
    alert(key + " -> " + map[key]);
  }
} 
```

[https://stackoverflow.com/a/684692/106261](https://stackoverflow.com/a/684692/106261)

实际上[这种方式](https://stackoverflow.com/a/8763227/106261)要好得多：

```
var keys = Object.keys(map); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-16T09:49:31.680

您可以使用`for..in`声明：

```
for (var key  in map) {
    return map[key];
} 
```

# sql - SQL 选择字符串的一部分

> ID：12911859
> 
> 赞同：0
> 
> 时间：2012-10-16T09:47:52.230
> 
> 标签：sql, sql-server, select

我有一个看起来有点像下面的字符串：

> 189 A 190 优点 191 68.6

现在我想要介于`190`和之间的值`191`- `Merit`。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:54:52.783

天真 - 你说你有一个字符串（即不是一列）。

```
declare @astring nvarchar(max);
set @astring = '189 A 190 Merit 191 68.6'; 
```

接下来的 2 个语句去掉了 190 和 191 之间的部分。

```
set @astring = stuff(@astring,1,patindex('%190%',@astring)+2,'');
set @astring = stuff(@astring,patindex('%191%',@astring+'191'),len(@astring),'');
set @astring = LTRIM(RTRIM(@astring));

select @astring;  -- 'Merit' 
```

* * *

如果您的意思是表格列，那么

```
declare @t table (astring nvarchar(max));
insert @t select
'189 A 190 Merit 191 68.6' union all select
'189 A 19 Merit 191 68.6 oops bad string' union all select
'' union all select -- make sure it doesn't crash on empty string
null union all select -- ditto null
'189 C 190 Pass 191 50.1';

select astring, s2=stuff(s1,patindex('%191%',s1+'191'),len(s1),'')
from
(
select astring, s1=stuff(astring,1,patindex('%190%',astring+'190')+2,'')
from @t
) x

-- result
ASTRING                                      S2
189 A 190 Merit 191 68.6                     Merit
189 A 19 Merit 191 68.6 oops bad string      (null)
                                             (null)
(null)                                       (null)
189 C 190 Pass 191 50.1                      Pass 
```

# wcf - 升级到 .NET 4.5 后获取 AddressAlreadyInUseException

> ID：12911860
> 
> 赞同：6
> 
> 时间：2012-10-16T09:47:53.137
> 
> 标签：wcf, .net-4.0, configuration, .net-4.5

我最近在我的服务器上安装了新的 .NET Framework 4.5（以前安装了 4.0），`System.ServiceModel.AddressAlreadyInUseException`当我启动暴露 WCF 端点的 Windows 服务时，我得到了一个。

> System.ServiceModel.AddressAlreadyInUseException：IP 端点 0.0.0.0:56543 上已经有一个侦听器。如果有另一个应用程序已经在侦听此端点，或者您的服务主机中有多个服务端点具有相同的 IP 端点但具有不兼容的绑定配置，则可能会发生这种情况。---> System.Net.Sockets.SocketException：在 System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress) 中，每个套接字地址（协议/网络地址/端口）通常只允许使用一次。 System.ServiceModel.Channels.SocketConnectionListener.Listen() 处的 Net.Sockets.Socket.Bind(EndPoint localEP) --- 内部异常堆栈跟踪的结束 --- System.ServiceModel.Channels.SocketConnectionListener.Listen() 处。 ServiceModel.Channels。
> 在 System.ServiceModel.Channels.TransportManager.Open(TransportChannelListener channelListener) 在 System.ServiceModel.Channels.TransportManagerContainer.Open(SelectTransportManagersCallback selectTransportManagerCallback) 在 System.ServiceModel.Channels.TransportChannelListener.OnOpen(TimeSpan timeout) 在 System.ServiceModel.Channels.ConnectionOrientedTransportChannelListener .OnOpen（TimeSpan 超时）在 System.ServiceModel.Channels.TcpChannelListener`2.OnOpen（TimeSpan 超时）在 System.ServiceModel.Channels.CommunicationObject.Open（TimeSpan 超时）在 System.ServiceModel.Dispatcher.ChannelDispatcher.OnOpen（TimeSpan 超时）在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout) 在 System.Qosit.Infrastructure.UnisServer.OnStart(String[] args) 处的 ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)

我的 WCF 端点的配置如下所示：

```
<system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBindingConfiguration" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10" maxReceivedMessageSize="65536">
          <readerQuotas maxDepth="32" maxStringContentLength="5242880" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
        </binding>
      </netTcpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="MEX">
          <serviceMetadata/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="MEX" name="MyAssembly.MyNamespace.MyService">      
        <endpoint address="net.tcp://localhost:56543/MyService"
          binding="netTcpBinding" bindingConfiguration="NetTcpBindingConfiguration" contract="MyAssembly.MyNamespace.MyServiceInterface" />
        <endpoint address="net.tcp://localhost:56543/MEX" binding="mexTcpBinding"
          contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel> 
```

我认为这与使用相同端口的 MEX 端点有关，但我不确定在升级到 .NET Framework 4.5 后如何正确配置它。

WCF 是否发生了变化，以便这些配置引发异常？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T19:50:18.410

[这是因为在此处](http://msdn.microsoft.com/en-us/library/aa702636.aspx)记录的 netTcp 端点和 mex 端点使用相同端口时存在一些限制，请参阅“使用 NetTcpBinding 在服务端点和 mex 端点之间共享端口”部分。在 4.0 中，`listenBackLog`和的默认值为`MaxConnections`10。在 4.5 中，这些默认值被修改为 12 * ProcessorCount。当您尝试在 netTcpBinding 和 mex 端点之间共享端口时会发生此异常，前提是您对这两个属性具有不同的值。在 4.0 中，这工作得很好，因为您已将这些设置为默认值 (10)，因此这些设置在两个端点上没有区别。但在 4.5 中，对于 netTcp 端点，这些保留为 10，但计算为 12* ProcessorCount。所以例外。

要解决这个问题，有两种方法：

1.  从配置中删除这些设置（`listenBackLog`和`MaxConnections`）。这样，您将自动获得默认值 12 * 处理器计数，该值大于 4.0 默认值。
2.  按照[文档中的描述，按照在不同端口上配置 mex 端点的解决方法](http://msdn.microsoft.com/en-us/library/aa702636.aspx)

请查看[此博客](http://blogs.msdn.com/b/praburaj/archive/2012/10/16/nettcpbinding-amp-mextcpbinding-sharing-same-port-throws-addressalreadyinuseexception-on-upgrade-to-net-4-5.aspx)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T11:18:04.493

当您在控制台应用程序中托管 WCF 服务时，您需要将 App.config 文件从 WCF 项目复制到控制台应用程序，然后从 WCF 项目中删除 App.config 文件，如果不这样做，您还可以获得以上错误。

# python - 将文件转换为字符串，然后重建该字符串并再次使其成为文件

> ID：12911862
> 
> 赞同：2
> 
> 时间：2012-10-16T09:48:05.493
> 
> 标签：python, string, file, rebuild

我想通过网络发送文件，但是向我提出的所有工具和命令都不允许我自动化该过程。

现在我记得java中有一个函数可以让你将文件转换为json base64字符串，然后这个字符串将通过网络发送，然后接收它的机器会将它重建为文件。

我想知道我是否可以在 python 中做那种事情？

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:52:20.800

好吧，读取文件和写入文件很容易：

```
#read from a file
with open("path/to/file", "rb") as read_file:
    contents = read_file.read()
#write to a file
with open("path/to/file", "wb") as write_file:
    write_file.write(contents) 
```

对于 base64 编码，请查看[python 文档](http://docs.python.org/library/base64.html)

通过连接发送数据很简单，您可以通过多种方法来完成 - 我不会在这里解决它，但我会给您一个可以使用的方法列表：

*   python套接字模块，[文档](http://docs.python.org/library/socket.html)
*   关于数据的另一篇文章：[（Python）通过网络发送结构化数据包](https://stackoverflow.com/questions/6933207/python-send-structured-packet-over-network)

这是一个使用来自[http://wiki.python.org/moin/TcpCommunication的套接字的示例](http://wiki.python.org/moin/TcpCommunication)

```
import socket

TCP_IP = '127.0.0.1'
TCP_PORT = 5005
BUFFER_SIZE = 1024
MESSAGE = "Hello, World!"

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((TCP_IP, TCP_PORT))
s.send(MESSAGE)
data = s.recv(BUFFER_SIZE)
s.close()

print "received data:", data 
```

# f# - 为什么闭包在成员函数上不能正常工作？

> ID：12911866
> 
> 赞同：1
> 
> 时间：2012-10-16T09:48:08.103
> 
> 标签：f#, closures

如果我正常操作，它会按预期工作（缓存结果）：

```
 let help = let tmp = printfn "oh no"
                           1+1
                 fun () -> tmp
      help ()
      help ()

      >oh no 
```

但是，如果我将其作为成员函数，它将不再起作用：

```
 type test =
        { a: float }
        member x.help = 
                  let tmp = printfn "oh no"
                            x.a * 2.
                  fun () -> tmp
        member x.b = x.help ()

    let t = { a = 1\. }
    t.b
    t.b

    >oh no
    >oh no 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:08:12.980

正如@John 所说，根据[F# 规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997176)，您的`help`属性相当于

```
type test =
     { a: float }
     member x.help with get () = 
              let tmp = printfn "oh no"
                        x.a * 2.
              fun () -> tmp 
```

这是一个变相的函数，因此`tmp`每次调用属性时都会评估一个新值。

为确保该属性被调用一次，您可以创建一个私有助手并在类型扩充中使用它：

```
type test = { a: float }

/// Create a private helper to make sure 'help' is evaluate once
let private help = 
    printfn "oh no"              
    fun x -> x.a * 2.

/// Create a property using the private helper
type test with
     member x.b = help x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:55:28.597

这才是真正的区别——

```
 let help = let tmp = printfn "oh no"
                       1+1
             fun () -> tmp
  printfn "here"
  help ()
  help () 
```

这打印

```
here
oh no 
```

所以帮助实际上在它被调用之前就已经形成了。

在第二种情况下，我们可以从规范（8.13.1）中读取

> 此外，以下两个成员是等价的：
> 
> staticopt 成员 ident.opt ident = expr
> 
> staticopt 成员 ident.opt ident with get() = expr

即你的 xb 实际上是一个每次调用 help 的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:54:06.717

方法总是有一个隐含的`this`参数，所以它们总是函数。在您的情况下`x`，原始代码中不存在 OO 代码中的一个参数。

# c++ - C/C++ 文件读取错误

> ID：12911867
> 
> 赞同：0
> 
> 时间：2012-10-16T09:48:10.203
> 
> 标签：c++

我收到一条错误消息，我假设问题出在文件名上的 c/c++ 字符串上。start 是我创建的 C++ 字符串变量，我不能按原样使用它，在 inp.open 之后的括号中。start.c_str() 是我在讲座中被告知要做的事情，但这似乎不起作用。有任何想法吗？

```
 else if (start != "") {
        ifstream inp;
        inp.open(start.c_str());
        if (inp.fail()) { error("Could not open file"); }
        string row;
        while (getline(inp, row)) {
            filereadout.push_back(row);
        }
    }
} 
```

# ruby - 有没有更快的方法在 ruby 中生成随机字符串？

> ID：12911869
> 
> 赞同：1
> 
> 时间：2012-10-16T09:48:21.337
> 
> 标签：ruby

```
 start_time = Time.now
  1000000.times do
        rand(36**1024).to_s(36)
  end
  end_time = Time.now
  puts end_time - start_time 
```

235 秒。

有没有更快的方法在 ruby​​ 中生成随机字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:19:16.020

如果您的目标系统有**/dev/urandom**，您可以从中读取随机字节。它应该更快。这是带有基准的代码。一些 Ruby 库使用这种方法来生成随机的东西。

```
Benchmark.bm do|b|

    b.report("Ruby #rand  ") do
      100000.times do
        big_key = rand(36**1024).to_s(36)
      end
    end

    b.report("/dev/urandom") do
      File.open("/dev/urandom",File::RDONLY || File::NONBLOCK || File::NOCTTY) do |f|
        100000.times do
          big_key = f.readpartial(512).unpack("H*")[0]
        end
      end
    end
end 
```

在这里，您可以看到 100000、1024 字符长随机字符串的基准测试结果...

```
 user     system      total        real
Ruby #rand   31.750000   0.080000  31.830000 ( 32.909136)
/dev/urandom  0.810000   5.870000   6.680000 (  6.974276) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:28:40.523

不需要做`36**1024` `1000000 times`

```
val=36**1024
1000000.times do
  rand(val).to_s(36)
end 
```

这肯定会节省一些时间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:28:48.480

您可以随机播放字符串以获取随机字符串

```
array = rand(36**1024).to_s(36).split(//)

start_time = Time.now
1000000.times do
  array.shuffle.join
end
end_time = Time.now
puts end_time - start_time 
```

#=> 126 秒

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:29:42.290

那么使用安全随机呢？

```
require 'securerandom'

start_time = Time.now
1000000 .times do
  SecureRandom.base64(1024)
end
end_time = Time.now
puts end_time - start_time 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T14:23:14.547

```
1.9.3p194 :113 >   
1.9.3p194 :114 >     start_time = Time.now
 => 2012-10-16 19:51:45 +0530 
1.9.3p194 :115 >   1000000.times do
1.9.3p194 :116 >            (Object.new.hash.to_s << Object.new.hash.to_s)[0..35]
1.9.3p194 :117?>     end
 => 1000000 
1.9.3p194 :118 >   end_time = Time.now
 => 2012-10-16 19:51:46 +0530 
1.9.3p194 :119 >   puts end_time - start_time
1.8252512
 => nil 
1.9.3p194 :120 > 
```

=> 1.8 秒

所以简而言之`Object.new.hash.to_s`

# c# - 将字符串测试添加到 URL？

> ID：12911870
> 
> 赞同：0
> 
> 时间：2012-10-16T09:48:22.503
> 
> 标签：c#, asp.net, url-rewriting

我有一个生产环境和一个测试环境。客户设置了不同的 URL`http://intranet.company.com`和的测试环境`http://intranettest.company.com`，这很有意义。测试数据库中的内容与生产数据库中的内容相同，我们在其中存储了网页上使用的链接。我无权访问数据库，需要将链接从生产环境更改为测试环境

*   `http://intranet.company.com`应该解析为`http://intranettest.company.com`

可能有其他结尾，例如`/sites/marketing`但没有文件名 ( `default.aspx`)。该链接还可以指定一个端口（在我的开发环境中，这对于整个问题并不重要。开发链接`http://devenv:1337/sites/marketing`可能会解释我奇怪的代码。

我做了一个片段，但感觉不对，以后我可以看到几个问题 - 使用它。有没有比以下更好的方法来编辑我的 URL？

```
string SiteCollectionURL = SPContext.Current.Web.Site.Url.ToString();

char[] delimiterChar = {'/', '.'};
string[] splitSiteCollectionURL = SiteCollectionURL.Split(delimiterChar);
string[] splitDepartmentLinkURL = departmentLink.Split(delimiterChar);
string fixedUrl = departmentLink;

if (splitSiteCollectionURL[2].Contains("test"))
{
    fixedUrl = "";
    for (int i = 0; i < splitDepartmentLinkURL.Length; i++)
    {
        if (i == 0)
        {
            fixedUrl += splitDepartmentLinkURL[i] + "//";
        }
        else if (i == 2)
        {
            if (splitDepartmentLinkURL[i].Contains(":"))
            {
                string[] splitUrlColon = splitDepartmentLinkURL[2].Split(':');
                fixedUrl += splitUrlColon[0] + "test:" + splitUrlColon[1] + "/";
            }
            else
            {
                fixedUrl += splitDepartmentLinkURL[i] + "test" + ".";
            }
        }
        else if (i > 2 && i < 4)
        {
            fixedUrl += splitDepartmentLinkURL[i] + ".";
        }
        else if (i >= 4 && i != splitDepartmentLinkURL.Length - 1)
        {
            fixedUrl += splitDepartmentLinkURL[i] + "/";
        }
        else
        {
            fixedUrl += splitDepartmentLinkURL[i];
        }
    }
    departmentLink = fixedUrl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:05:53.510

您预见到的问题是什么？如果您在问题中解释它们会有所帮助。但是看看[UriBuilder 类](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)：

```
var uris = new List<String>
{
    @"http://intranet.company.com",
    @"http://myhost.company.com:1337",
    @"http://intranet.company.com/deep/path?wat",
    @"http://myhost.company.com:1337/some/other?path",
};

foreach (var u in uris)
{
    var ub = new UriBuilder(u);
    ub.Host = "intranettest.company.com";
    ub.Port = 80;

    Console.WriteLine(ub.Uri);
} 
```

为我工作：

```
http://intranettest.company.com/
http://intranettest.company.com/
http://intranettest.company.com/deep/path?wat
http://intranettest.company.com/some/other?path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:00:16.357

也许我没有完全遵循，但为了让这个论点开始：
为什么不这样做

```
var newUrl = oldUrl.Replace(@"http://intranet.company.com", @"http://intranettest.company.com"); 
```

# charts - 在图表中创建两个 Y

> ID：12911872
> 
> 赞同：0
> 
> 时间：2012-10-16T09:48:43.797
> 
> 标签：charts, data-visualization, mschart

我正在使用 Microsoft Charting 并尝试创建图表： 1 - X 包含日期 2 - Y 包含 Y1 和 Y2 值 Y1 可以是折线图，Y2 可以是面积图。

我尝试了以下方法：

```
Chart chart = new Chart();
Series series = new Series();

series.Points.DataBindXY(
  new List<DateTime> { DateTime.Now, DateTime.Now.AddDays(1) }, // X
  new List<Int32> { 1, 2 }, // Y1
  new List<Int32> { 4, 8 } // Y2
);
chart.Series.Add(series); 
```

但我总是得到一个错误：

数据点绑定错误。此数据系列只能设置 1 个 Y 值。

我该如何解决这个问题？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:25:31.397

请加

```
series.YValuesPerPoint = 2; 
```

之前`series.Points.DataBindXY(`。这是指定每个点具有两个 Y 值的方法。

# wpf - 更改窗口标题对齐方式

> ID：12911876
> 
> 赞同：0
> 
> 时间：2012-10-16T09:48:53.237
> 
> 标签：wpf, alignment, title

如何将 .NET WPF 应用程序窗口标题更改为在整个应用程序中居中对齐？

# sql - 执行更新总是 SET Found to FALSE

> ID：12911878
> 
> 赞同：0
> 
> 时间：2012-10-16T09:48:57.727
> 
> 标签：sql, postgresql, triggers, plpgsql, insert-update

我写了以下触发器。

```
CREATE OR REPLACE FUNCTION tbl_scdr_insert_trigger() RETURNS TRIGGER AS $$
<< fk >>
DECLARE
    rowcount int;
    myrec RECORD;
BEGIN
    EXECUTE 'UPDATE sc_'|| to_char(NEW.start_datetime, 'YYYY_MM') ||' SET a = a + ($1).a, b = b + ($1).b WHERE (e_id = ($1).e_id AND start_datetime = ($1).start_datetime AND c_id = ($1).c_id'
    USING NEW;
    GET DIAGNOSTICS rowcount = ROW_COUNT;
    RAISE NOTICE 'found %', rowcount;
    IF not found THEN
        RAISE NOTICE 'not found';
    ELSIF found THEN
        RAISE NOTICE 'found';
        RETURN NULL;
    END IF;
END;
$$
LANGUAGE plpgsql; 
```

当 Ever Called 时，这始终返回零作为 Rowcount，因为尚未提交语句，并且即使存在 where 子句列的值相同的记录，Found 也始终为 False。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:59:14.900

正如[PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/plpgsql-statements.html)所述：

> EXECUTE 更改 GET DIAGNOSTICS 的输出，但不更改 FOUND

这意味着 FOUND 在您的情况下将始终为 FALSE，因为您使用的是 EXECUTE 而不是静态 UPDATE 语句。

# java - 如何检查 JAI 和 Java3D 是否安装在 PC 或笔记本电脑中？

> ID：12911882
> 
> 赞同：1
> 
> 时间：2012-10-16T09:49:17.407
> 
> 标签：java, java-3d, jai

我在java中使用netbeans平台制作​​了桌面应用程序。在我的应用程序中，我使用了JAI和Java3d。我为牙医制作的这个应用程序。所以每次安装的时候doctore都不想安装jai、java3D，这让牙医很头疼。所以我必须在我的应用程序启动时检查是否安装了 JAI 和 Java3D？如果没有，那么从我的应用程序中以编程方式安装 JAI 和 Java3D。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:31:29.460

```
public class ClassUtils {
  public static boolean isAvailable(String className) {
    boolean isFound = false;
    try {
       Class.forName(className, false, null);
       isFound = true;
    }
    catch (ClassNotFoundException e) {
       isFound = false;
    }
    return isFound;
  }

  public static boolean isJava3dAvailable() {
   return isAvailable("javax.media.j3d.View");
  }

  public static void  main(String args[]) {
    System.out.println ("JAI " +
       (ClassUtils.isAvailable("javax.media.jai.ImageJAI")?"present":"missing"));
    System.out.println ("Java3d " +
       (ClassUtils.isJava3dAvailable()?"present":"missing"));
  }

} 
```

# wpf - 如何使用 calburn micro 实现接口

> ID：12911899
> 
> 赞同：0
> 
> 时间：2012-10-16T09:50:15.477
> 
> 标签：wpf, mvvm, caliburn.micro

如何使用 Caliburn Micro 获取接口的实现？像这样的东西：

```
 IMyClass myClass=App.BootStrapper.GetInstance(IMyClass) 
```

哪个会返回 IMyClass 的实现实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:09:24.543

我找到了：

```
IMyClass myClass= Caliburn.Micro.IoC.Get<IMyClass >(); 
```

但如您所知，您不应该这样做，而是使用构造函数注入或属性注入。但是最好测试一下 IoC 是否可以检测和解析实例。

# html - 隐藏状态栏上的锚点显示

> ID：12911902
> 
> 赞同：2
> 
> 时间：2012-10-16T09:50:23.203
> 
> 标签：html, url, hide, anchor

我正在创建一个 jQuery UI webapp，在其中我使用窗口底部的固定“状态栏”在需要时显示相关信息的小片段。该信息显示在状态栏的左下角。到目前为止一切顺利。我遇到的问题是 - 我的 web 应用程序中有大量锚点。例如，在应用程序的左侧，我展示了一个 jstree 树视图，它有很多

```
<a href='#'>... 
```

锚元素。当前发生的情况是，当用户将鼠标悬停在这样的树视图项目（或就此而言，另一个锚点）上时，浏览器（谷歌浏览器）非常有帮助地在左下角弹出链接 URL。我想其他浏览器也会做类似的事情，但现在我只用 Chrome 进行测试，即使从长远来看，这两个 webkit 浏览器才是真正重要的。

嗯...有用的链接 URL 弹出窗口在“普通”网页中很方便且有用，但在我的 web 应用程序中完全不合适。有什么办法可以抑制它吗？从我所做的所有阅读中，我收集到大多数浏览器都阻止了这种抑制，因为这将是一个潜在的安全漏洞。

当然，我可以让我自己的“提示文本”出现在其他地方，但这会相当不协调。有什么我可以在这里做的还是我被弹出窗口卡住了？我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:42:52.980

如果您使用`<a>`元素，浏览器将始终在悬停时显示地址，正如您所说，主要是出于安全原因。

但是，您可以使用`<span>`用作链接的元素，因此浏览器不会在悬停时显示它们，请参阅我的工作[**演示**](http://jsfiddle.net/gnel/NKJXM/)。

# javascript - 轨道滑块有效，但如何添加项目符号导航？

> ID：12911903
> 
> 赞同：0
> 
> 时间：2012-10-16T09:50:22.803
> 
> 标签：javascript, jquery, orbit

我已经搜索过这个，但找不到我需要的一件事。我想在轨道滑块中使用我自己的子弹。

现在我的问题： - 我怎样才能添加我的子弹（滑块正在工作，但我不知道如何添加子弹）
- 我怎样才能让子弹改变？因为我为它被选中时制作了一张图片，在它未被选中时制作了一张图片。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:57:39.983

您可以在 orbit.css 文件中看到这些代码

```
.orbit-bullets li {
    float: left;
    margin-left: 5px;
    cursor: pointer;
    color: #999;
    text-indent: -9999px;
    background: url(/playground/playground/jquery-image-slider-plugin/orbit/bullets.jpg) no-repeat 4px 0;
    width: 13px;
    height: 12px;
    overflow: hidden; }

.orbit-bullets li.active {
    color: #222;
    background-position: -8px 0; } 
```

但它使用[图像精灵](http://css-tricks.com/css-sprites/)。

如果每个都有单独的图像，请使用每个的背景属性来指定图像。

# android - 如何在Android中设置ISO15693数据编码模式？

> ID：12911904
> 
> 赞同：1
> 
> 时间：2012-10-16T09:50:22.553
> 
> 标签：android, nfc, rfid, iso-15693

ISO 15693-2 在第 7.2 节中规定，VCD（阅读器）应通过对帧开始（SOF）进行适当编码来确定数据编码模式。

如何确定使用两种模式中的哪一种（“256 中的 1”和“4 中的 1”）以及如何更改？

PS：非常感谢您提供指向 Android 源代码的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:50:06.500

Google Nexus 设备中的 NFC 硬件不支持这两种模式，因此您无法进行配置。它实际上一次只能检测一张卡。

# php - 字段的php进度条

> ID：12911908
> 
> 赞同：0
> 
> 时间：2012-10-16T09:50:32.367
> 
> 标签：php, progress-bar

我有一个网站包含 5 个字段，用户填写它以更新他的信息我在用户页面中有一个进度条我需要进度条编号显示取决于用户字段如果他填写 4 个字段进度 = 80 如果他只填写 3 个进度= 60 等等什么是正确的方法，因为我尝试了一种方法但它失败了

我使用的方式是，当用户填写字段时，我为每个字段创建了一个数字，查询用该数字更新进度表，但我面临的问题是每次他更新字段时，数字都会增加，现在超过 100%

我希望我知道如何用正确的方式做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:23:15.620

嗨，您可以尝试使用此代码，`array_keys`并且`count`可以执行此操作。

```
 foreach ($_POST as $key => $value) {
      if ($value != ''){
          $actual= count(array_keys($_POST, ""));
      }
    }

    $count = count($_POST)-$actual;
  //$count = (count($_POST)-$actual)-2; 
```

根据计数值，您可以`insert/update`使用 db 表

```
if($count == 1){
    $progress = '20%';
}else if($count == 2){
    $progress = '40%';
}else if($count == 3){
    $progress = '60%';
}else if($count == 4){
    $progress = '80%';
}else if($count == 5){
    $progress = '100%';
}else{
    $progress = '0%';
} 
```

# django - Django 只渲染一个变量

> ID：12911909
> 
> 赞同：0
> 
> 时间：2012-10-16T09:50:35.647
> 
> 标签：django, django-models, django-templates

我请求一个调用以下视图的页面：

视图.py：

```
from django.http import HttpResponse
from django.template import Context, loader
from mainsite.models import Courses

def individualCourse(request, course_short):

    c = Courses.objects.get(short=course_short)
    t = loader.get_template('course.html')
    cont = Context({
        'course_short': c.short,
        'course_title': c.title,
        'course_start': c.startDate,
        'course_end': c.endDate,
        'course_fees': c.fees,
        'course_description': c.description,
        'course_content': c.content
    })
    return HttpResponse(t.render(cont)) 
```

模型.py：

```
from django.db import models

class Courses(models.Model):
    title = models.CharField(max_length=200)
    short = models.CharField(max_length=5)
    startDate = models.DateField(auto_now=False, auto_now_add=False)
    endDate = models.DateField(auto_now=False, auto_now_add=False)
    fees = models.IntegerField()
    description = models.TextField()
    content = models.TextField()

    def __unicode__(self):
        return  self.title, self.short, self.startDate, self.endDate, self.fees, self.description, self.content 
```

课程.html：

```
<html>
<head><title>Course</title></head>

<body>

<p>{{ course_title }}</p>
<p>{{ course_short }}</p>
<p>{{ course_start }}</p>
<p>{{ course_end }}</p>
<p>{{ course_fees }}</p>
<p>{{ course_description }}</p>
<p>{{ course_content }}</p>

</body>
</html> 
```

我希望它显示该特定课程的所有详细信息，但是当它呈现在页面上时，它只显示所请求课程的标题。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:20:51.140

试试这个我不知道日期字段的返回类型说明符，它需要一些更正，但应该看起来像这样

```
def __unicode__(self):
    return u'%s (%s %s %s %d %s %s %s)' % (self.title, self.short, self.startDate, self.endDate, self.fees, self.description, self.content) 
```

# android - 键入完整单词后按空格时，AutoCompleteTextView 不显示下拉菜单

> ID：12911915
> 
> 赞同：14
> 
> 时间：2012-10-16T09:50:48.090
> 
> 标签：android, autocompletetextview

我的主要活动代码：

```
// here you put all your data.
String[] dataArray = { "Amit sharma Kumar", "Hisham Kumar Munner",
        "Vineet John Chaturvedi", "Lucky Kumar Verma" };

ArrayList<String> alAutoCompleteList;
AutoCompleteTextView acTV;
ArrayAdapter<String> adapter1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // etAuto = (EditText) findViewById(R.id.etAuto);
    acTV = (AutoCompleteTextView) findViewById(R.id.acTV);
    // Arraylist
    alAutoCompleteList = new ArrayList<String>();
    adapter1 = new ArrayAdapter<String>(MainActivity.this,
            android.R.layout.simple_dropdown_item_1line,     alAutoCompleteList);

    acTV.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub
            if (acTV.enoughToFilter()) {
                acTV.showDropDown();
                acTV.bringToFront();
            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub
            alAutoCompleteList.clear();
        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

            String acText = acTV.getText().toString().trim();

            for (String item : dataArray) {

                if     (item.toLowerCase().contains(acText.toLowerCase())) {
                    alAutoCompleteList.add(item);
                }
            }

            acTV.setThreshold(4);
            acTV.setAdapter(adapter1);
            acTV.showDropDown();

        }
    }); 
```

* * *

当我搜索“sharma”并按下空格后，建议就会消失。我希望这些建议留在那里。我什么都试过了，但没有成功。有人可以帮忙吗？

编辑：有人可以在他们的模拟器上试试这个代码吗？只需`AutoCompleteTextView`在 xml 中添加一个并运行它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T10:12:51.370

首先，您有什么理由将`TextWatcher`侦听器设置在`AutoCompleteTextView`? 如果您这样做是为了自己过滤数据，则不应该这样做（因为小部件默认情况下会这样做并且您的代码不正确）。

> 当我搜索“sharma”并在此之后按一个空格。建议消失。我希望这些建议留在那里。

发生这种情况是因为适配器和`Filter`它附带的默认实现，这些元素`AutoCompleteTextView`在后台使用以提供您在下拉列表中看到的值。an 的默认行为`ArrayAdapter`是您看到的行为，您可以在[此答案](https://stackoverflow.com/questions/13026898/autocompletetextview-results-empty-on-space/13030579#13030579)中找到解释。解决方案是使用过滤器实现您自己的适配器，该过滤器将在整个适配器的行数据中搜索过滤器字符串。我`ArrayAdapter`从 SDK 中获取了该类的代码并进行了轻微调整，以便在单词后插入空格时过滤不会中断。您可以在[此处](https://github.com/luksprog/DroidPlayground/blob/95d127a0fdd1c7c2520650081fadedb4d54ffe32/src/com/luksprog/dp/adapter/FilterWithSpaceAdapter.java)找到该课程，因为代码太大而无法发布。只需复制项目中的类并将其用作普通类`ArrayAdapter`：

```
FilterWithSpaceAdapter<String> adapter1;
//... 
adapter1 = new FilterWithSpaceAdapter<String>(MainActivity.this,
            android.R.layout.simple_dropdown_item_1line, dataArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:28:58.053

您不需要 Textwatcher，AutoCompleteTextView 使用您设置的 Adapter 的 Filter。默认适配器通过调用 toString() 过滤条目。自然，如果用户输入空格，则值不再匹配。要实现此自定义行为，您不应添加 textwatcher，而应构建自定义适配器。您仍然可以扩展 ArrayAdapter 或 SimpleAdapter。您通过覆盖 getFilter() 和 publishResults() 来实现自定义过滤行为（在您的情况下为 trim() 调用）。[您可以在此处](http://www.sacoskun.com/2008/08/autocompletetextview-with-simpleadapter.html)或[此处](http://android.foxykeep.com/dev/how-to-add-autocompletion-to-an-edittext)找到有关如何执行此操作的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:00:56.777

首先，你不需要`TextWatcher`with ，`AutoCompleteTextView`因为`AutoCompleteTextView`它有自己的观看文本的方法 ie `MyWatcher`。您需要使用：

```
setThreshold(3);
final String[] AndroidDesk= getResources().getStringArray(R.array.clothname_arrays);
ArrayAdapter<String> My_arr_adapter= new ArrayAdapter<String>(getApplicationContext(),
            android.R.layout.simple_dropdown_item_1line,AndroidDesk);      
   cloths.setThreshold(1);
   cloths.setAdapter(My_arr_adapter);
   cloths.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {                               
   }
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:27:03.453

我认为文本观察器存在问题，因为自动完成文本视图不需要文本观察器，因为该自动侦听器事件。您必须简单地将数组传递给适配器而不是列表。alAutoCompleteList 列表中没有任何值。您从未在列表中添加价值。

*   要么你必须这样做： alAutoCompleteList.add("data one"); alAutoCompleteList.add("数据二");

*   或将 dataArray 传递给适配器。adapter1 = new ArrayAdapter(MainActivity.this, android.R.layout.simple_dropdown_item_1line,dataArray);

*   无需使用 text watcher 。

# jquery - Jquery 或 css 在锚点跳转/滚动上突出显示 div

> ID：12911917
> 
> 赞同：4
> 
> 时间：2012-10-16T09:50:54.520
> 
> 标签：jquery, anchor

我试图通过单击锚链接来突出显示 div。我的意思是如果我点击`<a href="$id1" class="scroll">My link</a>`

比它滚动到`<div id="id1">here</div>`在这个页面上，我有很多锚链接和 div，所以很难确定哪个 div 然后滚动，以便更好地突出单击锚 div 上的边框。我尝试了下面的代码，但它不起作用。

```
<script type="text/javascript"> 
        // anchor click jump scroll
        jQuery(document).ready(function(jQuery) {

            jQuery(".scroll").click(function(event){        
                event.preventDefault();
                jQuery('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
            });
        });

        jQuery(".scroll").click(function() {
           jQuery("#post-<?php echo get_the_ID(); ?>").css("border", "1px solid #ff0000").delay(1000).css("border", "none");
        };
    </script> 
```

我不确定它是否需要 jquery ui 或者只是 jquery 就足够了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T09:59:42.127

考虑使用`:target`CSS 伪元素 -

[**演示**](http://blogs.sitepointstatic.com/examples/tech/css3-target/document.html)

[**带有 img:target 的演示**](http://jsfiddle.net/H8qFw/)

[**检查浏览器兼容性**](http://caniuse.com/#search=:target)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:02:57.927

哦，好吧，我想我得到了您想要做的事情：您想滚动到链接中的引用元素并将样式应用于该元素（顺便说一句，它`#`在 中`<a href="#id1">`）。

那么代码应该是：

```
jQuery(document).ready(function() {
    jQuery(".scroll").click(function(event){
        var $target = jQuery(this.hash);

        event.preventDefault();
        jQuery('html,body').animate({scrollTop:$target.offset().top}, 500);
        $target.css("border", "1px solid #ff0000").delay(1000).css("border", "none");
    });
}); 
```

*编辑以便使用`jQuery`而不是`$`.*

# eclipse - 如何在 Eclipse 插件中嵌入速度“vm”文件

> ID：12911918
> 
> 赞同：1
> 
> 时间：2012-10-16T09:50:55.403
> 
> 标签：eclipse, plugins, swt, velocity

我必须使用velocity 来开发eclipse 插件。我使用的是Velocity 1.5。我创建了一些需要用 eclipse swt 插件打包的 vm 文件。

如果我通过 Eclipse 运行应用程序，则找不到显示错误“xxx.vm”的插件。

请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:54:58.663

请检查插件 build.properties。确保 .vm 文件包含在构建中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:24:58.130

我会检查以下项目：

*   检查您是否在类路径的插件部分中有文件，我认为 Eclipse 插件总是如此，只需检查“。” 是 MANIFEST.MF Bundle-ClassPath 中类路径的一部分：lib/local-lib.jar, .,
*   如前所述，确保文件实际上与插件捆绑在一起，例如检查生成的 jar 文件并查看文件是否在其中。如果没有，请调整您的构建以包含它们。
*   在 Velocity 配置中使用 ClasspathResourceLoader，例如

    ```
    ve.setProperty(RuntimeConstants.RESOURCE_LOADER, "class");
    ve.setProperty("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader"); 
    ```

然后，您应该能够通过简单地说明相对于插件基本目录的全名来获得速度模板。

有关详细信息，请参阅[http://velocity.apache.org/engine/devel/developer-guide.html#Configuring_Resource_Loaders](http://velocity.apache.org/engine/devel/developer-guide.html#Configuring_Resource_Loaders)。

# .net - Visual Studio .Net 中的 Nunit 编译错误

> ID：12911927
> 
> 赞同：0
> 
> 时间：2012-10-16T09:51:15.263
> 
> 标签：.net, nunit

使用 Visual Studio .Net (2003) 我试图编译一个最初用 Visual Studio .Net (2003) 编写的遗留解决方案，它有一个使用 nunit (2.4.8) 的测试项目，我在构建时遇到错误：

无法打开元数据文件“c:\Program Files\NUnit 2.4.8\bin\nunit.framework.dll”——“2.0 版不是兼容版本。”

我在显示的路径下载了 Nunit 2.4.8，并且在 nunit.exe.config 文件中我没有注释启动部分以包括supportedRunTime 版本等。我还检查了我在机器上安装了.Net 1.3075。

鉴于该项目是在同一平台上构建和测试的（即使是同一型号的计算机，尽管是不同的物理机器），谁能解释我还需要做什么才能编译它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:36:31.023

[Visual Studio .NET 2003](http://en.wikipedia.org/wiki/Visual_studio#Visual_Studio_.NET_2003)支持 .NET Framework 1.1，您将无法使用为更高的 .NET 版本（即 2.0 和更高版本）构建的库。

[NUnit](http://nunit.com/)有两种风格，一种面向 .NET 2.0 及更高版本，另一种面向 .NET 1.0 和 .NET 1.1。

要将*NUnit*与 Visual Studio 2003 一起使用，请从合适的下载位置下载 .NET 1.1 版本（名为*NUnit-xxx-net-1.1.msi*或*.zip ），例如*[此处](http://sourceforge.net/projects/nunit/files/NUnit%20Version%202/V2.6.1/)。将 .NET 1.1 版本解压缩/安装到合适的位置。然后，在您的单元测试项目中，确保您引用的是*NUUnit*的 1.1 版本，而不是其他任何东西。

# c# - 从列表中查找特定项目的计数

> ID：12911931
> 
> 赞同：6
> 
> 时间：2012-10-16T09:51:20.390
> 
> 标签：c#

我有`List<String>`1000 个名字。我想找出以字母“S”开头的名字的数量。

最好的选择是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T09:56:18.120

如果 Linq 可用

```
using System.Linq;
list.Where(s=>s!=null && s.StartsWith("S")).Count(); 
```

如果 Linq 不可用。

```
int count=0;
foreach (string s in list) {
  if (s!=null && s.StartsWith("S")) count++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:54:18.403

使用 linq 让这一切变得简单

```
var count = list.Where(x => x != null && x.StartsWith("S")).Count(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:54:59.037

如果您可以访问 LINQ，例如

```
int count = myList.Count(name => name.StartsWith("S")); 
```

否则，类似

```
int count = myList.FindAll(name => name.StartsWith("S")).Count; 
```

（编辑：正如 Bob Vale 在他的回答中指出的那样，如果您的任何列表条目可能为空，您需要添加一个空检查，例如`name => name != null && name.StartsWith("S")`。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T09:57:21.223

```
int k = 0;
foreach (string aName in yourStringList)
{
  if (aName.StartsWith("S"))
    {
    k++
    }
} 
```

并将`k`具有以“S”开头的名称数量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T09:56:39.703

```
List<string> list = new List<string>();
...
int count = list.Count(c =>  c!= null && c.StartsWith("S")); 
```

# android - Android 中的通知构建检查

> ID：12911932
> 
> 赞同：1
> 
> 时间：2012-10-16T09:51:21.070
> 
> 标签：android, api, notifications

我正在开发一个适用于 Android 的应用程序，我想为此使用通知。现在，我注意到 Notification 和 setLatestEventInfo 都已弃用，并且从 API 级别 16 开始将不再受支持（对吗？）。

我希望从 API 级别 11 (Android 3.0) 开始支持我的应用程序。然后我是否只实现新方法 NotificationCompat.Builder？这会在 16 级之前的 API 中工作吗？或者我是否必须使用 if 语句，检查用户设备的 API 级别，然后使用 Notification 和 setLatestEventInfo 处理 API 级别 11 和 16 之间的任何内容，以及 API 级别 16 以上的 NotificationCompat.Builder？

**编辑：**

还有一件事。我将 developer.android.com 中的代码用于 NotificationCompat.Builder，它在 TaskStackBuilder 中出现以下错误：

类需要 API 级别 16（当前最低为 11）：android.app.TaskStackBuilder

如果我使用 if 语句检查 API 级别，则无法解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:08:47.367

如果您希望它与`Notification.Builder`早期的 API 一起使用，您应该使用 SDK 中包含的支持库。

在为 API 11 之前的版本编写代码时，您应该包含支持库，而不是调用`Notification.Builder`您需要调用的`NotificationCompact`。

尝试阅读[Android 支持库页面](https://developer.android.com/tools/extras/support-library.html)并查看这些内容的示例项目。

# mobile - 如何使用 sencha touch 加载 GeoJson 文件

> ID：12911937
> 
> 赞同：1
> 
> 时间：2012-10-16T09:51:43.167
> 
> 标签：mobile, sencha-touch, jsonp, geojson

我为一个带有 sencha touch 的移动应用程序项目工作，我的模型在检索信息时遇到了问题。我将向您展示我的模型和我的 json 文件内容

**json文件：（**我只是为了测试而变得非常简单，我删除了几何线）

```
{
        "type": "FeatureCollection",
        "features": [
            {
            "properties": {"graphic": "img/restaurant.png","Name": "Igor Tihonov", "Country":"Sweden", "City":"Gothenburg"}
            }

        ]
} 
```

我的模型：

```
 Ext.regModel('Features', {
        hasMany: {model: 'Properties', name: 'properties'}

    });

    Ext.regModel('Properties', {
        fields: ['graphic', 'Name', 'Country', 'City'],
        associations: [
            {type: 'belongsTo', model: 'Features'}
        ]
    }); 
```

店铺 ：

```
 Ext.data.Store({
        model: 'Features',
        proxy: {
            type: 'ajax',
            url : 'poi2.json',
            reader: {
                type: 'json',
                rootProperty: 'features'
            }
        },
        autoLoad:true
    }); 
```

我被封锁已经一个多星期了，我希望你能帮助我！谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:08:48.517

如果您不使用“类型”属性，我建议：

*   失去第一个模型和所有关联
*   将商店中的模型设置为“属性”（这可行，因为您的 rootProperty 设置为“功能”）
*   更改您的 JSON，以便属性不是 JSON 更深层次的另一个层次：

    ```
    {  
        "type": "FeatureCollection",  
        "features": [  
            {  
                "graphic": "img/restaurant.png",  
                    "Name": "Igor Tihonov",   
                "Country":"Sweden",  
                "City":"Gothenburg"}  
            },  
            {  
                "graphic": "img/restaurant2.png",  
                "Name": "Igor Tihonov2",   
                "Country":"Sweden",  
                "City":"Gothenburg"}    
            }  
        ]  
    } 
    ```

[编辑]
要保持 json 格式，请使用以下方法：

*   将根属性设置为“功能”
*   将仅包含“hasMany”关联的“功能”模型添加到您的属性模型（包含实际字段）
*   将商店的模型设置为您的特征模型

[/编辑]

# context-free-grammar - 空集的上下文无关语法？

> ID：12911939
> 
> 赞同：2
> 
> 时间：2012-10-16T09:51:52.803
> 
> 标签：context-free-grammar

我有一个作业问题，要求生成一个空集的 CFG。我认为它应该是两者之一，但不是 100% 确定。

S->S 但似乎这将是一个无限循环

和

S-> {} 虽然它是“空集”符号，但它不是变量或终端......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:09:15.360

**为任何有限语言** 编写语法的一种方法`L`是将每个包含`w`在语法中，即写出所有单词。`L``S -> w`

例如，语言`L = ['aa', 'ab', 'ba', 'bb']`是由上下文无关文法生成的：

```
S -> 'aa'
S -> 'ab'
S -> 'ba'
S -> 'bb' 
```

*当然，通常还有更简洁的语法！*

.

在你的例子`L = [ {} ]`中。明确回答您的问题：空集*是*一个终端，但是您使用哪个*值*来描述它在很大程度上取决于您的编程语言*（在 Python 中，您可能会选择`set()`）*。

# asp.net - 视图状态 MAC 验证失败 - 负载平衡环境

> ID：12911943
> 
> 赞同：0
> 
> 时间：2012-10-16T09:52:00.437
> 
> 标签：asp.net

我的网站托管在负载平衡（总共 4 个服务器）环境中的网络场上，但我的一些客户端遇到以下错误：

```
Server Error in '/' Application.
Validation of viewstate MAC failed. If this application is hosted by
a Web Farm or cluster, ensure that <machineKey> configuration
specifies the same validationKey and validation algorithm.
AutoGenerate cannot be used in a cluster.

**Description**: An unhandled exception occurred during the execution of the current web
request. Please review the stack trace for more information about the error and where it
originated in the code.

**Exception Details**: System.Web.HttpException: Validation of viewstate MAC failed. If this
application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration
specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a
cluster. 
```

但是，我的四个站点中的每一个都在 web.config 文件中具有以下机器密钥，但仍然遇到问题。

```
<machineKey
    validationKey="3B1107F98F6E4ECD868C929C0826C3845058F39B5113CD7E676170F4DBE4D65D83C65BCB166FFFB7F2749214C0CA503D04A956C1681F56C63A2B5D9F5F4B04FC"
    decryptionKey="3565248537BB78D03CCA78A2E8C757451EDCFD3D7AAE6199420FEE692158B37F"
    validation="SHA1" decryption="AES"
    /> 
```

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T10:17:53.727

我从这里获取它[Validation of viewstate MAC failed- Server Error in '/' Application](https://stackoverflow.com/questions/8181590/validation-of-viewstate-mac-failed-server-error-in-application)。

```
<pages enableEventValidation="false" viewStateEncryptionMode="Never"> 
```

> 上述解决方案的问题在于您牺牲了一些安全性。下一个“快速修复”是将以下内容添加到 web.config，但这也有缺点：

```
<pages enableViewStateMac="false"> 
```

以上代码都可以解决您的问题。

# database - SQLite3 数据库表中的只读字段？

> ID：12911947
> 
> 赞同：2
> 
> 时间：2012-10-16T09:52:09.620
> 
> 标签：database, sqlite, constraints

我是数据库方面的初学者，并且一直在阅读 SQLite3 文档。但是，我找不到以下问题的答案：

是否可以创建具有一些只读字段的 SQLite3 数据库表（即不是整个表都是只读的）？我知道我可以通过一些额外的代码阻止人们写入字段，但我想知道是否可以定义约束或类似的东西。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T10:07:46.113

您可以创建[触发器](http://www.sqlite.org/lang_createtrigger.html)以防止更新特定列：

```
CREATE TRIGGER ro_columns
BEFORE UPDATE OF col1, col2 ON mytable
BEGIN
    SELECT raise(abort, 'don''t do this!');
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:58:55.833

遗憾的是，[在 SQLite 中创建表后无法添加](http://www.sqlite.org/lang_altertable.html)约束；

> 无法重命名列、删除列或在表中添加或删除约束。

换句话说，不，您不能使用约束将列设置为只读，因为使用 ( `CHECK`) 约束创建表将首先无法将只读值添加到表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:17:17.417

另一种方法是重命名表并在其位置创建一个视图。然后，您可以`INSTEAD OF`改为使用触发器来更新表。

见[http://www.sqlite.org/lang_createtrigger.html](http://www.sqlite.org/lang_createtrigger.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-11T23:00:32.280

这是一个带有`readonly`字段的示例表，当设置为非零时，该行变为只读。

```
CREATE TABLE test (data TEXT, readonly INTEGER); 
```

这是禁止 UPDATE`data`何时`readonly`为非零的触发器：

```
CREATE TRIGGER test_ro BEFORE UPDATE OF data ON test WHEN OLD.readonly != 0
BEGIN
    SELECT raise(fail, "Read-only data");
END; 
```

# java - 如何用 jaxb 包装子列表

> ID：12911953
> 
> 赞同：14
> 
> 时间：2012-10-16T09:52:32.567
> 
> 标签：java, xml, jaxb

当试图映射客户-> 订单 1:n 与 jaxb 2.2.6 的关系时，我想获取包装在单独节点“订单”中的订单列表。

目前的结果是：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
    <Customer>
       <id>100</id>
       <name>John Doe</name>
       <orders>
         <address>100 main street, smalltown, pa</address>
         <orderid>1100</orderid>
       </orders>
      <orders>
         <address>5 broadway, ny, ny</address>
         <orderid>1200</orderid>
       </orders> 
    </Customer> 
```

但我想得到：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
    <Customer>
       <id>100</id>
       <name>John Doe</name>
       <orders>
         <order>
           <address>100 main street, smalltown, pa</address>
           <orderid>1100</orderid>
         </order>
         <order>
            <address>5 broadway, ny, ny</address>
            <orderid>1200</orderid>
         </order>
       </orders> 
    </Customer> 
```

**需要改变什么才能得到这个结果？**

相关源码有：

*   客户界面
*   客户JaxbDao 实施
*   订单界面
*   OrderJaxbDao 实现
*   TestCustomerWrite Junit4 测试用例

并使用这个 jaxb 实现：

```
 <!-- JAXB -->
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2.6</version>
    </dependency> 
```

**客户界面：**

```
/**
 * Copyright (C) 2011-2012 BITPlan GmbH
 * 
 * http://www.bitplan.com
 *
 * generated: 2012-10-15 15:12 with smartGENERATOR
 */
package com.bitplan.testentity;
import java.util.List;
import com.bitplan.testentity.Order;

/**
 * interface for Customer
 */
public interface Customer {
    // >>>{interface}{Customer}{Customer}
    // no implementation yet !!!
    // <<<{interface}{Customer}{Customer}
  /**
   * getter for name
   * @return name
   */
  public String getName();

  /**
   * setter for name
   * @param pname - new value for name
   */
  public void setName(String pname);

  /**
   * getter for id
   * @return id
   */
  public long getId();

  /**
   * setter for id
   * @param pid - new value for id
   */
  public void setId(long pid);

  /**
   * getter for orders
   * @return orders
   */
  public List<Order> getOrders();

  /**
   * setter for orders
   * @param porders - new value for orders
   */
  public void setOrders(List<Order> porders);

} // Customer 
```

**订单界面：**

```
/**
 * Copyright (C) 2011-2012 BITPlan GmbH
 * 
 * http://www.bitplan.com
 *
 * generated: 2012-10-15 at 23:59 with smartGENERATOR
 */
package com.bitplan.testentity;

/**
 * interface for Order
 */
public interface Order {
    // >>>{interface}{Order}{Order}
    // no implementation yet !!!
    // <<<{interface}{Order}{Order}
  /**
   * getter for orderid
   * @return orderid
   */
  public long getOrderid();

  /**
   * setter for orderid
   * @param porderid - new value for orderid
   */
  public void setOrderid(long porderid);

  /**
   * getter for shipping address
   * @return address
   */
  public String getAddress();

  /**
   * setter for shipping address
   * @param paddress - new value for shipping address
   */
  public void setAddress(String paddress);

} // Order 
```

**客户JaxbDao 实施**

```
/**
 * Copyright (C) 2011-2012 BITPlan GmbH
 * 
 * http://www.bitplan.com
 *
 * generated: 2012-10-15 at 23:51 with smartGENERATOR
 */
package com.bitplan.testentity.jaxb;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlElement;

import com.bitplan.testentity.Order;
import com.bitplan.testentity.Customer;

import java.util.List;
import java.util.ArrayList;

/**
 * JaxB Data access object for Customer
 * Entity: Customer for container testentity
 * Table: Customer
 */
@XmlRootElement(name="Customer")
public class CustomerJaxbDao implements Customer {
  /**
   * name
   */
  private String name;

  /**
   * id
   */
  private long id;

  /**
   * orders
   */
  private List<Order> orders=new ArrayList<Order>();

  /**
   * getter for name
   * @return name
   */
  @XmlElement(name="name")
  public String getName() { return name; };

  /**
   * setter for name
   * @param pname - new value for name
   */
  public void setName(String pname) { name=pname; };

  /**
   * getter for id
   * @return id
   */
  @XmlElement(name="id")
  public long getId() { return id; };

  /**
   * setter for id
   * @param pid - new value for id
   */
  public void setId(long pid) { id=pid; };

  /**
   * getter for orders
   * @return orders
   */
  @XmlElement(name="orders", type=OrderJaxbDao.class)
  public List<Order> getOrders() { return orders; };

  /**
   * setter for orders
   * @param porders - new value for orders
   */
  public void setOrders(List<Order> porders) { orders=porders; };

} // CustomerJaxbDao 
```

**OrderJaxbDao 实现**

```
/**
 * Copyright (C) 2011-2012 BITPlan GmbH
 * 
 * http://www.bitplan.com
 *
 * generated: 2012-10-15 with smartGENERATOR
 */
package com.bitplan.testentity.jaxb;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlElement;
import com.bitplan.testentity.Order;

/**
 * JaxB Data access object for Order
 * Entity: Order for container testentity
 * Table: Order
 */
@XmlRootElement(name="Order")
public class OrderJaxbDao implements Order {
  /**
   * orderid
   */
  private long orderid;

  /**
   * shipping address
   */
  private String address;

  /**
   * getter for orderid
   * @return orderid
   */
  @XmlElement(name="orderid")
  public long getOrderid() { return orderid; };

  /**
   * setter for orderid
   * @param porderid - new value for orderid
   */
  public void setOrderid(long porderid) { orderid=porderid; };

  /**
   * getter for shipping address
   * @return address
   */
  @XmlElement(name="address")
  public String getAddress() { return address; };

  /**
   * setter for shipping address
   * @param paddress - new value for shipping address
   */
  public void setAddress(String paddress) { address=paddress; };

} // OrderJaxbDao 
```

**TestCustomerWrite Junit4 测试用例**

```
package com.bitplan.storage.jaxb;

import static org.junit.Assert.*;

import java.io.StringWriter;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;

import org.junit.Test;

import com.bitplan.testentity.Customer;
import com.bitplan.testentity.Order;
import com.bitplan.testentity.jaxb.CustomerJaxbDao;
import com.bitplan.testentity.jaxb.OrderJaxbDao;

/**
 * 
 * @author wf
 *
 */
public class TestCustomerWrite {

    @Test
    public void test() throws JAXBException {
        Customer customer=new CustomerJaxbDao();
        customer.setId(100);
        customer.setName("John Doe");
        long orderid=1000;
        String[] addresses={"100 main street, smalltown, pa","5 broadway, ny, ny"};
        for (String address:addresses) {
            Order order=new OrderJaxbDao();
            order.setAddress(address);
            order.setOrderid(orderid+=100);
            customer.getOrders().add(order);
        }
        JAXBContext jaxbContext = JAXBContext.newInstance(CustomerJaxbDao.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

        // output pretty printed
        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        StringWriter sw=new StringWriter();
        jaxbMarshaller.marshal(customer, sw);
        System.out.println(sw);

    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T09:58:15.060

代替

```
/**
 * getter for orders
 * @return orders
 */
@XmlElement(name="orders", type=OrderJaxbDao.class)
public List<Order> getOrders() { return orders; }; 
```

你需要

```
/**
 * getter for orders
 * @return orders
 */
@XmlElement(name="order", type=OrderJaxbDao.class)
@XmlElementWrapper(name="orders")
public List<Order> getOrders() { return orders; }; 
```

`@XmlElementWrapper`名称是包装元素的名称（订单），名称`@XmlElement`是包装内的每个条目元素的名称（订单）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T09:58:06.013

这似乎可以解决问题：

```
 @XmlElementWrapper(name="orders")
  @XmlElement(name="order", type=OrderJaxbDao.class)
  public List<Order> getOrders() { return orders; }; 
```

**改进的 CustomerJaxbDao**

```
/**
 * Copyright (C) 2011-2012 BITPlan GmbH
 * 
 * http://www.bitplan.com
 * 
 * generated: 2012-10-16 12:20 with smartGENERATOR
 */
package com.bitplan.testentity.jaxb;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlElement;
import com.bitplan.testentity.Customer;

import java.util.List;
import com.bitplan.testentity.Order;
import javax.xml.bind.annotation.XmlElementWrapper;
import java.util.ArrayList;

/**
 * JaxB Data access object for Customer
 * Entity: Customer for container testentity
 * Table: Customer
 */
@XmlRootElement(name="Customer")
public class CustomerJaxbDao implements Customer {
  /**
   * name
   */
  private String name;

  /**
   * id
   */
  private long id;

  /**
   * orders
   */
  private List<Order> orders=new ArrayList<Order>();

  /**
   * getter for name
   * @return name
   */
  @XmlElement(name="name")  
  public String getName() { return name; };

  /**
   * setter for name
   * @param pname - new value for name
   */
  public void setName(String pname) { name=pname; };

  /**
   * getter for id
   * @return id
   */
  @XmlElement(name="id")  
  public long getId() { return id; };

  /**
   * setter for id
   * @param pid - new value for id
   */
  public void setId(long pid) { id=pid; };

  /**
   * getter for orders
   * @return orders
   */
  @XmlElementWrapper(name="orders")
  @XmlElement(name="order", type=OrderJaxbDao.class)
  public List<Order> getOrders() { return orders; };

  /**
   * setter for orders
   * @param porders - new value for orders
   */
  public void setOrders(List<Order> porders) { orders=porders; };

} // CustomerJaxbDao 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T09:59:33.263

听起来您想将 Order 包装在您的`CustomerJaxbDao`班级中。

```
@XmlElementWrapper( name="orders" )
@XmlElement(name="order", type=OrderJaxbDao.class)
public List<Order> getOrders() { return orders; }; 
```

可能会做你想做的事。

# c# - 从 SQL 命令“SHOW TABLE STATUS”返回 DataTable

> ID：12911954
> 
> 赞同：0
> 
> 时间：2012-10-16T09:52:35.950
> 
> 标签：c#, .net, mysql, sql

在 mySQL 工作台中运行该命令时，“SHOW TABLE STATUS LIKE 'tableName'”命令会返回包含 23 列的单行。我想要“Auto_increment”列，为了推理，我们应该说我已经知道我可以找到这样的结果，假设我已经连接、发送查询并填充了一个 DataTable；

```
dataTable = mDBConnector.Select("SHOW TABLE STATUS LIKE 'x'");
MessageBox.Show(dataTable.Rows[0][15].ToString());
//alternatively
//MessageBox.Show(dataTable.Rows[0]["Auto_increment"].ToString()); 
```

但是，当从我的应用程序中运行查询时，它基本上没有返回任何内容......从 MySQL 工作台中运行时返回预期结果的相同查询。

我确定这与权限无关，因为我正在测试甚至是 root 访问权限以进行测试，而且我知道这不是我从应用程序或连接中检索数据的方式，因为我在整个过程中都使用它并且从来没有遇到过问题。

有没有人遇到过这个问题并知道答案？

编辑：我正在使用的查询如下（我现在正在使用真实的表/列详细信息，所以我会在之后删除这些。在这里撕掉我的头发！）

```
SELECT * FROM information_schema.tables
WHERE table_schema = 'bf-2300' AND table_name = 'devices'; 
```

在 MySQL 工作台中，我得到以下信息：

![测试](../Images/25f3230cd1424b10fd8512fd79bb64b7.png)

如您所见，它正确返回值。但是，当我在我的程序中运行查询并返回数据表时，它不包含此信息，我不知道为什么。就好像它不像普通的 DataTable 一样。

如上所述，我正在尝试获取“自动增量”列。通常我可以选择 dataTable.Rows[0]["colname"] 但这些不包含任何值 - 在工作台中工作的查询上，它绝对不是我填充 DataTable 的方法，因为这些东西在我的程序中完美地工作。奇怪的是它返回的是查询结果列名，而不是该行的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:44:48.170

另一种可能更好的方法是使用[information_schema.table](http://dev.mysql.com/doc/refman/5.5/en/tables-table.html)来获取有关表的信息。

```
SELECT * FROM information_schema.table
WHERE table_schema = 'db_name' AND table_name = 'table_name'; 
```

# php - (PHP) 在由 TCPDF 或 domPDF 生成的 PDF 中是否可能存在重叠图像？

> ID：12911955
> 
> 赞同：0
> 
> 时间：2012-10-16T09:52:37.433
> 
> 标签：php, image, tcpdf, overlap, dompdf

我们需要两个图像重叠。一个图像是插头，另一个是电缆。将它们并排放置不够好，因为插头具有弯曲边缘，因此由于插头弯曲边缘和电缆边缘之间的空白区域，电缆似乎没有连接到插头。

现在在浏览器上用 HTML 渲染这个效果时，我们使用重叠的 div，使用固定位置/负边距等很容易实现。因此，为了使两个图像看起来相连，我们给插件图像一个透明背景，并将其放置在底层电缆的图像上。

但是，我们需要在 PDF 报告中实现相同的效果，并且我们还没有找到一种方法来重叠在由 TCPDF 生成的 PDF 中呈现的 HTML 中的两个图像。我们也尝试过没有运气的 domPDF。

也许你们中的一个 TCPDF / domPDF 大师有一个解决方案？我们也对达到预期效果的开箱即用解决方案持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:35:08.783

这可以通过绝对定位来实现，但使用 dompdf 0.6 beta 3 会更好。

您需要将两个绝对定位的图像与一个相对定位的容器包装起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:37:21.497

我们决定使用命令行工具 wkhtmltopdf（带有 PHP 包装器）来解决问题。

事实上，如果您和我们一样想从 HTML 字符串生成 PDF，我强烈建议您查看 wkhtmltopdf。它的速度快如闪电，并且比 TCPDF 和 domPDF 具有更好的 HTML / CSS 支持。

# c# - 在c#中使用php函数

> ID：12911960
> 
> 赞同：2
> 
> 时间：2012-10-16T09:52:54.923
> 
> 标签：c#, php

我正在使用[mediawiki 开发的工具](https://code.google.com/p/mediawiki-zhconverter/)将繁体中文转换为简体中文。它是用 php 编写的。我必须使用php来调用其中的函数。

函数调用如下：

```
echo MediaWikiZhConverter::convert("打印机", "zh-tw"); 
```

我想在我的 C# 程序中调用转换函数。

我该怎么做？[Phalanger](http://phalanger.codeplex.com/)是一种合适的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:56:43.887

只需向运行此扩展的网络服务器发出网络请求。在 webrequest 中传递两个参数，通过函数获取它们，并在 webresponse 中返回结果 :)

# php - preg_replace 将用户名和电子邮件作为一个字段

> ID：12911970
> 
> 赞同：1
> 
> 时间：2012-10-16T09:53:25.033
> 
> 标签：php, mysql, preg-replace, login-script

我想使用 preg_replace 作为我的用户名/电子邮件登录。
我将它存储在 SESSION 中，并想检查该数据是否在
数据库中。因为我想让用户有机会
使用用户名或电子邮件登录，所以这个表达式有点怪异，
我不知道如何管理它。任何人都可以帮忙吗？

所以“$loginusername”是用户名（A-Za-z0-9）和电子邮件！所以它不应该
替换那些特殊字符......我发现这是
电子邮件的表达：

```
([A-Za-z0-9._-]+)@([A-Za-z0-9-]+)([A-Za-z0-9.-]*[A-Za-z0-9-]+)*\.([A-Za-z){1,4} 
```

并希望将其作为 preg_replace 添加到已经存在的：

```
preg_replace('#[^A-Za-z0-9]#i','', $_SESSION["username"]); 
```

我无法让它工作，总是出现语法错误。

我现在的代码是：

```
if  ( !isset ($_SESSION['X5636gYGWEHidwWLOGIN'] )   )
    {
        header("Location: login.php");
        exit();
    }

include("includes/connectdatabase.php");

$loginusername = preg_replace('#[^A-Za-z0-9]#i','', $_SESSION["username"]);
$loginpassword = sha1(preg_replace('#[^A-Za-z0-9]#i', '', $_SESSION["password"])); 

$sessionvalidation= mysql_query("
                SELECT * 
                FROM gebruikers 
                WHERE username = '$loginusername' AND password = '$loginpassword' 
                OR email = '$loginusername' AND password = '$loginpassword' ");
$existCount = mysql_num_rows($sessionvalidation);
if ($existCount == 0)
{
    header("Location: login.php");
    exit();
} 
```

# special-characters - 跳过 h2 数据库查询中的简单引号

> ID：12911978
> 
> 赞同：1
> 
> 时间：2012-10-16T09:53:43.683
> 
> 标签：special-characters, velocity, h2

我正在尝试创建一个 SQL 文件以在 h2 数据库中执行。该文件是从基于 apache 速度语法的建模工具 (magicdraw) 生成的。

问题是我生成的一些文本字段包含简单的引号，这不能在 h2 中执行。

速度脚本示例：

```
#foreach($cl in $Class) INSERT into myclass(id, description) VALUES ('$cl.id','$cl.description') #end 
```

此脚本为类集的每个元素创建一个插入项。描述字段可能包含一个简单的引用...：/

请问有什么帮助吗？

# objective-c - 错误仅发生在下载的 iOS 应用商店二进制文件中

> ID：12911980
> 
> 赞同：2
> 
> 时间：2012-10-16T09:53:48.263
> 
> 标签：objective-c, ios

我的应用程序的 1.2 版在 4、4S、5 和模拟器 [在 IOS5 和 6 上] 测试良好，但已通过审核并今天发布到应用商店的 1.2 版引发异常并在两个屏幕之间死机. 我期望的 v1.2 的所有功能都存在

我不得不在 iTunesConnect 中设置一个未来的日期，以防止用户更新，我希望用户还没有更新。

归档显示为在 Organizer 中提交，其创建日期与 iTunesConnect 中的相匹配。

首先，我 99.9% 确定存档正确上传并且是商店中的存档。我怎样才能测试到 100%？

其次，我接下来要做什么？联系苹果？

提前感谢您对此提供的任何帮助-我现在严重怀疑我的理智。史蒂夫

这是应用商店下载的例外情况：

异常类型：EXC_CRASH (SIGABRT) 异常代码：0x0000000000000000, 0x0000000000000000 线程崩溃：0

```
Last Exception Backtrace:
0   CoreFoundation                  0x34ccf29e <redacted> + 158
1   libobjc.A.dylib                 0x344a197a objc_exception_throw + 26
2   CoreData                        0x339bf8d8 <redacted> + 100
3   CircuitMatePro                  0x000f7d24 - [CircuitPlayerViewControllerfetchSpecificCircuitSetForEditing:] (CircuitPlayerViewController.m:869) 
```

2012 年 10 月 18 日更新 - 我简化了 CircuitPlayerViewC...etForEditing 方法中的代码，并重新提交了申请加急审核，并获得了批准。提交后，应用审核团队在 24 小时内将其转过来。它现在可以在下载中正常工作。感谢大家的帮助。史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:05:22.247

您应该做的第一件事是找到崩溃的原因。由于 Apple 批准了它用于 AppStore，这意味着他们在测试它时没有发生此异常。你应该最清楚如何找到问题。崩溃日志将为您提供帮助（XCode->Organizer->Devices）

解决问题后，请求加急审核，以便尽早将更新推送给用户： [https ://developer.apple.com/appstore/contact/appreviewteam/index.html](https://developer.apple.com/appstore/contact/appreviewteam/index.html)

在“请求类型”字段中，选择“关键错误修复”。

祝你好运！

更新：

`[CircuitPlayerViewControllerfetchSpecificCircuitSetForEditing:] (CircuitPlayerViewController.m:869)`您的崩溃日志显示了下一个函数在 Core Data 中某处发生的事情。你调查过那个地区吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:09:13.430

不确定您是否可以进行检查，因为苹果使用自己的代码签名重新签名应用程序，因此您甚至无法进行 md5 类型的签入。如果组织者和 ituneConnect 之间的日期匹配，您应该假设它是相同的。顺便说一句，IOS5和IOS6完全不同。并且很多错误出现在 IOS6 而不是 IOS5 中。您提到您使用不同的设备进行测试，但是您是否也检查了 IOS？

# html - divs 上的老式表

> ID：12911982
> 
> 赞同：4
> 
> 时间：2012-10-16T09:53:53.730
> 
> 标签：html, css, html-table, w3c

我是一个老派网页设计师，仍然倾向于选择表格而不是 div。我发现以这种方式创建公共网站更容易，尤其是在我们现有的浏览器平台数量众多的情况下。

我可以完美地完成 div，但在跨浏览器中工作时更容易找到表格

如果我做专业网站，我会被认为做错了，不专业或不受欢迎吗？它会被归类为非标准还是老式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:03:53.567

您正在使用语义表来实现类似网格的布局。这是错误的（并且不赞成）的原因主要是因为布局信息在错误的位置。Html 应该用于语义（没有外观的内容），样式应该在 css 中完成（没有内容的外观）。因此，只有当*信息*是表格时，您才应该使用 table 标记。

然而，这个问题是一个很好的问题，因为真正好的替代方案仍然指日可待（请参阅下面即将推出的 CSS 布局引擎）。

### 如果你应该使用语义表，你现在怎么办？

1.  每行应该代表与其他行或与对等主题相关的主题具有相同性质的主题。
2.  每一行的每一列都应该与主题的某个方面相关。
3.  在单元格中放置一些信息的决定应该合理地基于 1) 和 2) 而不是美学。

# 现代 CSS 替代品

W3C 有几个即将推出的解决方案。[Chrome、Firefox 和 Internet Explorer ( http://dev.w3.org/csswg/css3-grid-layout](http://dev.w3.org/csswg/css3-grid-layout) )目前正在实现最符合您需求的一个。这个 CSS 就是你要找的。它将在今年冬天在所有炙手可热的新浏览器中可用。所以在接下来的几年里，你应该使用旧的（也更麻烦的）CSS（见下文）。

![CSS 网格布局](../Images/e9e7cb60c94a55b1d9e68c87ef8e4b20.png)

另一个是 CSS Flexbox ( [http://www.w3.org/TR/css3-flexbox](http://www.w3.org/TR/css3-flexbox) )。

虽然这些规范对于一般用途来说是新的，但这是正确执行此类布局的方式。

# 当前 CSS 替代类似网格的布局

今天我会使用 CSS 网格来避免使用表格。您可以使用此代码作为起点。

[http://simplegrid.info](http://simplegrid.info)

如上例所示，使用适用于所有浏览器的 CSS 需要做更多工作，但这适用于今天的所有浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:02:06.057

表格*只能用于显示表格数据*周期。对它们的任何其他使用都是非语义的、错误的和老派的。唯一可接受的布局表格是 HTML 电子邮件...

规则是针对情况使用最语义化的元素，这就是昆汀所暗示的，所以绝对不要这样做：

```
<table class="header"> 
```

并尽量避免：

```
<div class="header"> 
```

改为（在可能的情况下）选择：

```
<header> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:52:58.433

我不会推荐，但当前的 HTML 5 草案规范允许使用表格进行布局。

如何区分布局表与数据表

> **可能是一个布局表**
> 
> *   角色属性与值表示的使用
> *   使用不符合值 0 的边框属性
> *   使用值为 0 的不合格单元格间距和单元格填充属性
> 
> **可能是非布局表**
> 
> *   使用 caption、thead 或 th 元素
> *   标题和范围属性的使用
> *   使用非 0 值的边框属性
> *   使用 CSS 设置显式可见边框
> 
> **不是一个好的指标**
> 
> *（历史上布局和非布局表都被赋予了这个属性）*
> 
> *   摘要属性的使用

参考：[http ://dev.w3.org/html5/spec/the-table-element.html#the-table-element](http://dev.w3.org/html5/spec/the-table-element.html#the-table-element)

关于做跨浏览器网站，即使您使用表格或 div 来布局网页，也应该很容易访问。

但是，如何通过瞄准**WCAG 2.0 AA 级一致性**来使它们易于访问。[WCAG 2.0](http://www.w3.org/TR/WCAG/)拥有一套完整的[HTML 技术，](http://www.w3.org/TR/WCAG20-TECHS/)可用作最佳 HTML 编码实践并创建可访问的网站。

[指南和技术快速参考：如何满足 WCAG 2.0](http://www.w3.org/WAI/WCAG20/quickref/)

:-)

# jquery - 从概念上理解图像的预加载

> ID：12911983
> 
> 赞同：0
> 
> 时间：2012-10-16T09:54:02.700
> 
> 标签：jquery

我有两个代码片段

```
// Code Snippet One
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
    });
}

preload([
    'img/One.jpg',
    'img/Two.jpg',
    'img/Three.jpg'
]);​

// Code Snippet Two
function preload(arrayOfImages) {
    $(arrayOfImages).each(function () {
        $('<img />').attr('src',this).appendTo('body').hide();
}); 
```

1.  如何使用代码确保图像在使用前已预加载？
2.  如何触发通知说所有图像已预加载。我可以在这里使用任何新的 jQuery 1.8 功能吗？
3.  代码片段一和二之间有什么区别。什么时候用？

一个小提琴的例子是最受赞赏的

这是我尝试在 div 中加载预加载图像的方式（图像库）

```
setTimeout(function() {
        $('.image-gallery').each(function(){
            // what to put here?
        });
}, 2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:58:25.107

第一个示例将在内存中创建一个图像元素并将其 src 更改为指向要预加载的图像。问题是某些浏览器（版本）不会开始加载图像，除非它们已被添加到 DOM。这就是片段二正在做的事情。

在这两种情况下，您都可以`.load()`向 jQuery 图像对象添加事件处理程序，以指定加载相应图像时的回调。

尝试使用计数器。您增加每个 .load() 处理程序中的计数器，如果它达到您的图像计数，则所有图像都已完成加载。

编辑：像这样更改片段二

```
function preload(arrayOfImages, callback) {
    var counter = 0;    
    $(arrayOfImages).each(function () {
        $('<img />').load(function() {
            counter++;
            if(counter==arrayOfImages.length) callback();
        }).attr('src',this).appendTo('body').hide();
    });
} 
```

像这样称呼它

```
preload([
'img/One.jpg',
'img/Two.jpg',
'img/Three.jpg'
], function() {
    // what should happen when all of the images have been loaded
    $('<img />').attr('src', 'img/Two.jpg').appendTo('.image-gallery');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:57:40.813

您是否考虑过 Jquery [Load 事件](http://api.jquery.com/load-event/)。它已被弃用，但没有人想出更好的替代品。它基本上会做你想做的事。

> 一旦图像被加载，处理程序就会被调用。

# actionscript - 测验评分系统 - 更快你是正确的，更多的分数

> ID：12911984
> 
> 赞同：0
> 
> 时间：2012-10-16T09:54:11.317
> 
> 标签：actionscript, scoring, timed

我正在创建一个利用 PHP 数据的 Flash (as3) 测验，目前正在创建一个评分系统。这个想法是你越快答对一个问题，你的分数就越高。每个问题都有一个倒计时 5 秒。因此，例如，如果您在 5 秒内回答问题并且正确，您将获得 500 分，4 秒 = 400 分，依此类推。这是一个多项选择测验，答案显示在按钮的动态文本字段中。

目前我有一个嵌入式测验，其中问题和答案存储在一个数组中，因此我可以在完全集成我的 PHP 之前测试所有内容。

有谁知道从哪里开始？任何朝着正确方向的反馈或轻推将不胜感激！如果您需要更多信息（或脚本），请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:22:49.860

听起来像[Timer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)会完全符合您的要求。

设置一个全局计时器变量，其间隔取决于您希望评分系统有多精确，并在每个新问题时启动它。当用户回答时，检查该`repeatCount`计时器的时间，看看他们需要多长时间才能正确回答。

```
public class Quiz{
    private var mTimer:Timer;

    ...

    public function Quiz():void{
         // This creates a timer that will fire every 100 ms for 50 times.
         // If you want a more precise scoring system, reduce the delay, and increase the count
         mTimer = new Timer(100, 50);
    }

    private function newQuestion():void{
         // Don't forget to reset the timer for every new question
         mTimer.reset();
         mTimer.start();
    }

    private function onRightAnswer():void{
         // Check how many times the timer fired already
         var count:int = mTimer.currentCount;

         // Deduce points for every count
         var score:int = 500 - (count * 10);
    }

    ...

} 
```

# python - 如何在 python 中使用 matplolib 更改日期格式

> ID：12911987
> 
> 赞同：6
> 
> 时间：2012-10-16T09:54:20.457
> 
> 标签：python, matplotlib

> **可能重复：**
> [使用 matplotlib 在轴标签中创建带有日期和时间的图形](https://stackoverflow.com/questions/5498510/creating-graph-with-date-and-time-in-axis-labels-with-matplotlib)

当我的数据在我的字典中有完整日期时，我不知道如何在使用 matplotilib 绘图时更改日期格式，我只绘制小时、分钟、秒

```
from datetime import datetime
import matplotlib.pyplot as plt

dico =  {'A01': [(u'11/10/12-08:00:01', 2.0), (u'11/10/12-08:10:00', 10.0), \
                 (u'11/10/12-08:20:01', 5.0), (u'11/10/12-08:30:01', 15.0), \
                 (u'11/10/12-08:40:00', 7.0), (u'11/10/12-08:50:01', 45.0)],
         'A02': [(u'11/10/12-08:00:01', 10.0), (u'11/10/12-08:10:00', 12.0), \
                 (u'11/10/12-08:20:01', 15.0), (u'11/10/12-08:30:01', 10.0), \
                 (u'11/10/12-08:40:00', 17.0), (u'11/10/12-08:50:01', 14.0)]}

x = []
y = []
for key in sorted(dico.iterkeys()):
#in Python3
#for key in sorted(dico.keys()):
   points = [(datetime.strptime(i[0], "%d/%m/%y-%H:%M:%S"), \
               i[1]) for i in dico[key]]
   points.sort()
x, y = zip(*points)
plt.plot(x, y, label=key)  
# plotting
plt.gcf().autofmt_xdate()
plt.legend(loc='upper right')
plt.xlabel('Dates')
plt.ylabel("titre")
plt.title("Modbus")
plt.show() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-16T10:16:44.063

解决方案：

```
from matplotlib.dates import DateFormatter
formatter = DateFormatter('%Y-%m-%d %H:%M:%S')
plt.gcf().axes[0].xaxis.set_major_formatter(formatter) 
```

# glassfish - 如何在 Glassfish 中跟踪/监控打开/关闭的 JMS 连接？

> ID：12911992
> 
> 赞同：5
> 
> 时间：2012-10-16T09:54:39.163
> 
> 标签：glassfish, profiling, jms, monitoring

我有一个当前部署在 Glassfish 上的 JavaEE 应用程序，我为此编写了一个负载测试，它可以在不到一小时的时间内（目前 - 崩溃的速度改进即将到来）耗尽 JMS 连接池并用非常糟糕的消息破坏 Glassfish

> 使用中的连接等于 max-pool-size 和过期的 max-wait-time。无法分配更多连接。

我想看看我的哪些 JavaEE 组件泄漏了 JMS 连接。对于内存，我想我可以使用分析器，也可以将它用于 JDBC 连接。但是，跟踪打开/关闭的 JMS 连接以及创建它们但不释放它们的组件的最佳工具是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:31:30.293

尝试使用**imqcmd**工具来监控您的 JMS 目标。它提供基本但有用的命令（列表、清除、创建...）

它位于`$GLASSFISH_HOME/mq/bin`

尝试以下命令：

*   列出所有 JMS 目的地

```
./imqcmd 列表 dst
```

*   打印经纪人信息

```
./imqcmd 查询 brk
```

*   显示统计信息（我想这就是您要查找的内容）。统计信息默认每 5 秒刷新一次

```
./imqcmd 指标 dst -tq -n jms/myQueue -m rts
```

`-m rts`代表“消息费率”。有关其他指标信息，请参阅[文档(./imqcmd -h ;-))](http://docs.oracle.com/cd/E18930_01/html/821-2438/gcrli.html#scrolltoc)

注意：每个命令都会提示一个用户名和密码。admin/admin 是默认的用户名/密码（！= asadmin 凭据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:12:06.923

在 Glassfish 3.1 控制台中，您可以检查 JMS 物理目标统计信息。这是在 Server -> JMS Physical Destinations Tab -> Click on View Statistics （您可以复制链接并刷新此页面以获取最新结果，例如当时队列中的消息数和内存）

此外，我认为监控 JMS 队列的最佳方法是在您的类中插入一些日志信息，以控制谁在生产或使用消息（并知道谁在打开/关闭连接）。

# android - android sdk/ndk 活动管理器无法执行 hello-jni 示例

> ID：12911993
> 
> 赞同：0
> 
> 时间：2012-10-16T09:54:41.747
> 
> 标签：android, android-ndk

我尝试使用 am 命令从 adb shell 执行编译的 hello-jni 示例。hello-jni 编译成功。这是我在 hello-jni 目录下所做的：

```
foo@foo_win7 /cygdrive/d/dev/NDK/android-ndk-r8b-windows/android-ndk-r8b/samples/hello-jni
$ adb shell
shell@android:/ $ am start -a android.intent.action.MAIN -n com.example.hellojni  com.example.hellojni.HelloJni 
```

这是我得到的错误：

```
shell@android:/ $ am start -a android.intent.action.MAIN -n com.example.hellojni  com.example.hellojni.HelloJni
ion.MAIN -n com.example.hellojni  com.example.hellojni.HelloJni               <
usage: am [subcommand] [options]
usage: am start [-D] [-W] [-P <FILE>] [--start-profiler <FILE>]
               [--R COUNT] [-S] <INTENT>
       am startservice <INTENT>
       am force-stop <PACKAGE>
       am kill <PACKAGE>
       am kill-all
       am broadcast <INTENT>
       am instrument [-r] [-e <NAME> <VALUE>] [-p <FILE>] [-w]
               [--no-window-animation] <COMPONENT>
       am profile [looper] start <PROCESS> <FILE>
       am profile [looper] stop [<PROCESS>]
       am dumpheap [flags] <PROCESS> <FILE>
       am set-debug-app [-w] [--persistent] <PACKAGE>
       am clear-debug-app
       am monitor [--gdb <port>]
       am screen-compat [on|off] <PACKAGE>
       am display-size [reset|MxN]
       am to-uri [INTENT]
       am to-intent-uri [INTENT]

am start: start an Activity.  Options are:
    -D: enable debugging
    -W: wait for launch to complete
    --start-profiler <FILE>: start profiler and send results to <FILE>
    -P <FILE>: like above, but profiling stops when app goes idle
    -R: repeat the activity launch <COUNT> times.  Prior to each repeat,
        the top activity will be finished.
    -S: force stop the target app before starting the activity

am startservice: start a Service.

am force-stop: force stop everything associated with <PACKAGE>.

am kill: Kill all processes associated with <PACKAGE>.  Only kills.
  processes that are safe to kill -- that is, will not impact the user
  experience.

am kill-all: Kill all background processes.

am broadcast: send a broadcast Intent.

am instrument: start an Instrumentation.  Typically this target <COMPONENT>
  is the form <TEST_PACKAGE>/<RUNNER_CLASS>.  Options are:
    -r: print raw results (otherwise decode REPORT_KEY_STREAMRESULT).  Use with
        [-e perf true] to generate raw output for performance measurements.
    -e <NAME> <VALUE>: set argument <NAME> to <VALUE>.  For test runners a
        common form is [-e <testrunner_flag> <value>[,<value>...]].
    -p <FILE>: write profiling data to <FILE>
    -w: wait for instrumentation to finish before returning.  Required for
        test runners.
    --no-window-animation: turn off window animations will running.

am profile: start and stop profiler on a process.

am dumpheap: dump the heap of a process.  Options are:
    -n: dump native heap instead of managed heap

am set-debug-app: set application <PACKAGE> to debug.  Options are:
    -w: wait for debugger when application starts
    --persistent: retain this value

am clear-debug-app: clear the previously set-debug-app.

am monitor: start monitoring for crashes or ANRs.
    --gdb: start gdbserv on the given port at crash/ANR

am screen-compat: control screen compatibility mode of <PACKAGE>.

am display-size: override display size.

am to-uri: print the given Intent specification as a URI.

am to-intent-uri: print the given Intent specification as an intent: URI.

<INTENT> specifications include these flags and arguments:
    [-a <ACTION>] [-d <DATA_URI>] [-t <MIME_TYPE>]
    [-c <CATEGORY> [-c <CATEGORY>] ...]
    [-e|--es <EXTRA_KEY> <EXTRA_STRING_VALUE> ...]
    [--esn <EXTRA_KEY> ...]
    [--ez <EXTRA_KEY> <EXTRA_BOOLEAN_VALUE> ...]
    [--ei <EXTRA_KEY> <EXTRA_INT_VALUE> ...]
    [--el <EXTRA_KEY> <EXTRA_LONG_VALUE> ...]
    [--eu <EXTRA_KEY> <EXTRA_URI_VALUE> ...]
    [--eia <EXTRA_KEY> <EXTRA_INT_VALUE>[,<EXTRA_INT_VALUE...]]
    [--ela <EXTRA_KEY> <EXTRA_LONG_VALUE>[,<EXTRA_LONG_VALUE...]]
    [-n <COMPONENT>] [-f <FLAGS>]
    [--grant-read-uri-permission] [--grant-write-uri-permission]
    [--debug-log-resolution] [--exclude-stopped-packages]
    [--include-stopped-packages]
    [--activity-brought-to-front] [--activity-clear-top]
    [--activity-clear-when-task-reset] [--activity-exclude-from-recents]
    [--activity-launched-from-history] [--activity-multiple-task]
    [--activity-no-animation] [--activity-no-history]
    [--activity-no-user-action] [--activity-previous-is-top]
    [--activity-reorder-to-front] [--activity-reset-task-if-needed]
    [--activity-single-top] [--activity-clear-task]
    [--activity-task-on-home]
    [--receiver-registered-only] [--receiver-replace-pending]
    [--selector]
    [<URI> | <PACKAGE> | <COMPONENT>]

Error: Bad component name: com.example.hellojni 
```

我不明白为什么？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:09:12.003

尝试使用 -n ApplicationPackage/MainActivityClass ，ApplicationPackage 应该是清单文件中的一个

```
 adb shell am start -n com.toto.tests/com.toto.tests.MainActivity 
```

# c++ - 如何忽略 getopt_long 中的无效选项

> ID：12911999
> 
> 赞同：1
> 
> 时间：2012-10-16T09:55:11.420
> 
> 标签：c++, c, linux, getopt

我正在使用函数`getopt_long`来获取命令行选项。当给出无效选项时，我想忽略错误。目前它向标准错误打印错误，例如：

```
 invalid option -- 's' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:03:09.183

getopt.h 中有一个变量， 如果您将其设置为 0 `opterr`，它将避免打印错误。`stderr`

只需将其设置为 0：

```
extern int opterr;

opterr = 0; 
```