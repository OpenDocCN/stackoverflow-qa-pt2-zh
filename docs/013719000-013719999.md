# StackOverflow 问答 13719000-13719999

# javascript - 我可以动态分配图像 src 吗？

> ID：13719000
> 
> 赞同：0
> 
> 时间：2012-12-05T08:26:48.883
> 
> 标签：javascript, jquery, html

目前我有一个 Json 对象。

```
{"prev":["","demo\/medium\/Web081112_P001_medium.jpg"],"curr":["demo\/medium\/Web081112_P002_medium.jpg","demo\/medium\/Web081112_P003_medium.jpg"],"next":["demo\/medium\/Web081112_P004_medium.jpg","demo\/medium\/Web081112_P005_medium.jpg"]} 
```

可以看到Json对象结构如下：

```
prev img1, img2
curr img1, img2
next img1, img2 
```

img 是图像路径或 "" 。

我想要实现的是，有六个图片链接

```
 <img src ="....."> and I would like define each of it to  <img id= "prevIMG2" src =""> 
And assign the prev img2 to that <img id= "prevIMG2" src ="demo/medium/Web081112_P001_medium.jpg"> 
```

对于那些没有价值的人，它不分配任何`<img src="">`

如何使用 jquery 实现这一点？谢谢

我用来改变图像路径的东西

```
 $(document).ready(function(){
       $.ajax({
        type: "GET",
        url: "scandir.php",
        data: "page=5",
        dataType: 'json',
        success: function (data) { 
        $.each(data, function(index, element) {
        if($.trim(this[0]) !== '')
        $('#prevL').attr('src',data);
        });
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:31:42.793

好吧，我希望使用 Jquery 没有问题，对吗？？，那么你可以使用

```
$('#IDofTheImage').attr('src','string path value extracted from json response'); 
```

# regex - 正则表达式查找 %%{ANYTHING}%% 的多个实例

> ID：13719002
> 
> 赞同：3
> 
> 时间：2012-12-05T08:27:02.030
> 
> 标签：regex

```
SomeRandomText=%EXAMPLE1%,MoreRandomText=%%ONE%%!!%%TWO%%,YetMoreRandomText=%%THREE%%%FOUR%!!%FIVE%\%%SIX%% 
```

我需要一个正则表达式，它可以提取包含在 '%%' 中的任何内容——所以这个正则表达式只匹配以下内容：

*   ％％一％％
*   ％％二％％
*   ％％三％％
*   ％％六％％

我尝试了很多不同的方法，并且确信有办法实现这一点——但我目前还在苦苦挣扎。我主要最终得到它，它将匹配字符串中从第一个 %% 到最后一个 %% 的所有内容——这不是我想要的。我想我需要像前向查找这样的东西，但很难实施

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:27:48.620

您需要使用修饰符进行[非贪婪](http://www.regular-expressions.info/repeat.html#lazy)匹配 ：`?`

```
%%.*?%% 
```

在线查看它：[rubular](http://rubular.com/r/oIjSAWOflD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:54:11.353

这也可以通过限制`%`s 之间允许的内容来完成。

```
%%[^%]*%% 
```

这比非贪婪匹配得到更广泛的支持，但请注意，这不会匹配 %%A%B%%。虽然，如有必要，这可以通过一些修改来完成：

```
%%([^%]|%[^%])*%% 
```

或等效地

```
%%(%?[^%])*%% 
```

# javascript - 脚本中的 Ruby 代码不起作用

> ID：13719004
> 
> 赞同：0
> 
> 时间：2012-12-05T08:27:16.527
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

我的谷歌饼图代码是

```
var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ["Work",     50],
          ["Eat",      20],
          ["Commute",  20],
          ["Watch TV", 5],
          ["Sleep",    5]
        ]); 
```

我的代码`(<%= @datas.map { |d| [d.name, d.value] }.inspect %>)` 给出了结果

```
([["apple", "10"], ["orange", 20], ["banana", 30], ["grapes", 80], ["papaya", 44]]) 
```

当我把这个结果直接放在我的谷歌饼图代码中时

```
 var data = google.visualization.arrayToDataTable([["apple", "10"], ["orange", 20], ["banana", 30], ["grapes", 80], ["papaya", 44]]) 
```

然后它完美地工作。但是直接保持

```
var data = google.visualization.arrayToDataTable(<%= @datas.map { |d| [d.name, d.value] }.inspect %>) 
```

不起作用。这背后的原因可能是什么。红宝石代码是否有一些甲酸盐要保留在里面或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:44:30.003

关于什么

```
(<%= @datas.map { |d| [d.name, d.value] }.to_json.html_safe -%>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:28:09.807

这有帮助吗：

```
@datas = {:apple => 10, :orange => 20, :banana => 30}
@datas.map { |name, value| [name.to_s, value] }
# => [["apple", 10], ["orange", 20], ["banana", 30]] 
```

所以只需写出： <%= @datas.map { |name, value| [name.to_s, 值] } %>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T08:34:41.883

你试试这个..你根据这个改变你的代码

```
 var data = google.visualization.arrayToDataTable(<%= make_a_chart %>); 
```

并将其放置在相应的助手中：

```
 def make_a_chart
  result = []
  result.push make_labels, 
          make_data( 0, "zerohour" ), 
          make_data( 3, "threehours" ),
          make_data( 6, "sixhours" ),
          make_data( 9, "ninehours" ),
          make_data( 12, "twelvehours" )
          return result
          end

  def make_labels
     y = ["Time"]
     for task in Task.all do
     y.append task.name
     end
     return y
  end

 def make_data( time, completeness )
    y = Task.first.created_at + time
      for task in Task.all do
      y.append task[completeness]
   end
 return y
 end 
```

# javascript - 用于导航自定义空间图形的 API？

> ID：13719010
> 
> 赞同：0
> 
> 时间：2012-12-05T08:27:39.690
> 
> 标签：javascript, html, api, webgl, google-earth

假设我有具有匹配 X/Y/Z 坐标的基于位置的 3D 图形（3D 地图）。是否有允许我在这些图形之上构建导航（旋转、缩放等）应用程序的 Web API 或库？

我查看了 Google Earth API，它们确实为我提供了我需要的确切功能。唯一的缺点是我不能用我的替换他们的图形。我不想拥有一个地球，而是想要一个相对较小但细节丰富的 3D 区域。

我更喜欢使用 WebGL 等开放 Web 技术的解决方案，并且不需要插件。但我很想听听您可能知道的任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:07:08.040

并不真地。“Google Earth but not Earth”没有普遍的应用需求——更多的是与特定游戏相关的特定需求。

我推荐 Three.js 作为解决这个问题的好方法......不过你需要滚动你自己的 UI

# php - 在 PHP 中匹配字符串中的多个模式

> ID：13719017
> 
> 赞同：1
> 
> 时间：2012-12-05T08:28:03.010
> 
> 标签：php, string, strpos

我有多个模式（“=”，“<”，">"，！="，">="，<="），我需要检查用户提供的随机字符串。我还需要找到这种模式的出现位置。用户提供的字符串格式将是这样的

```
"Name =" 
"Age >"
"date<=" 
```

基本上，我需要将字段名称和这些模式分开，所以它输出就像。

```
"Name" and "=" 
"Age" and ">" 
"date" and "<=" 
```

请注意，字段名称和年龄之间可以有任意数量的空格。

现在，我正在做这些，首先删除空间，然后使用 strpos 逐个匹配每个模式，如果匹配，然后我使用 strpos 中的位置将其分开以获得 2 个 substr。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:43:17.583

如果您的字段名称不能包含用于模式的特殊字符，那并不是很难。像这样的东西应该可以解决问题（使用前可能需要进行一些测试）：

```
preg_match("#([^=<>!]+)\s*([=<>!]+)#", trim($string), $matches);
echo $matches[1] . ' and ' . $matches[2]; 
```

但是，这将仅提取字段名称和模式，这不会告诉您模式的“位置”。

PS要获得一个职位，如果你非常需要它，你可以使用`$position = strpos($string, $matches[2]);`

如果你想确保用户只能提供允许的模式，你可以手动指定它们，表达式看起来像这样：`#([^=<>!]+)\s*(=|<|>|(!=)|(>=)|(<=))#`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:31:57.307

```
preg_split("/\s+/",  $string); 
```

如果您知道您将只有这两个字段。`preg_match`if not的更量身定制的正则表达式。

# c# - 开发 Fluent 风格的 API 及其优势

> ID：13719018
> 
> 赞同：1
> 
> 时间：2012-12-05T08:28:06.250
> 
> 标签：c#, fluent

我看到了很多 Fluent 风格 api 开发的例子，但有些时候我看到人们用接口实现 fluent，有些时候人们不使用接口，只使用直接的类。我认为人们使用流利风格的 api 只是因为使用链......意味着易于访问。所以我想知道流畅的api或性能实习生是否有其他好处。

这是小代码。

```
public class Coffee
{
    private bool _cream;

    public Coffee Make { get new Coffee(); }

    public Coffee WithCream()
    {
        _cream = true;
        return this;
    }

    public Coffee WithOuncesToServe(int ounces)
    {
        _ounces = ounces;
        return this;
    }
}

var myMorningCoffee = Coffee.Make.WithCream().WithOuncesToServe(16); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:33:22.610

在您的示例中，我认为语法（即“易用性”）是唯一的优势。但是例如 LINQ 方法的工作方式不同 - 方法不返回`this`，它们返回一个新实例。这显然会影响性能，但它使类成为不可变的，这在您推理代码时有很大帮助，它*可以*促进使用此类类的并行计算。

编辑（示例）：在这种情况下，您`Coffee`将看起来像这样（尽管它可能不是一个很好的示例，因为无论如何在这里使用流利的语法对我来说没有多大意义，更不用说使用新实例了）

```
public class Coffee
{
    private bool _cream;
    private int _ounces;

    // I really don't like this kind of instantiation,
    // but I kept it there and made static to make it work.
    public static Coffee Make { get new Coffee(); }

    public Coffee WithCream()
    {
        return new Coffee
        {
            _cream = true,
            _ounces = this._ounces
        }
    }

    public Coffee WithOuncesToServe(int ounces)
    {
        return new Coffee
        {
            _cream = this._cream,
            _ounces = ounces
        };
    } 
```

但是当然，对于这样一个简单的类，最好使用带参数的构造函数，例如

```
public Coffee(int ounces, bool cream) 
```

作为一个相反的例子，我记得一组方便的`Dictionary`扩展，可以流畅地添加项目，但无需创建新实例。就像是：

```
public static IDictionary<K, V> AddConditionally(
    this IDictionary<K, V> source,
    K key, V value)
{
    // Real-life implementation would contain more checks etc.
    if(!source.ContainsKey(key))
        source.Add(key, value);

    return source;
} 
```

例如，您可以使用它来用一些初始数据填充字典

```
var dict = new Dictionary<int, int>()
    .AddConditionally(0,1)
    .AddConditionally(1,1)
    .AddConditionally(2,1)
    .AddConditionally(3,1); 
```

# android - 区分是字符串 android 设备 id 或 ios

> ID：13719020
> 
> 赞同：2
> 
> 时间：2012-12-05T08:28:14.110
> 
> 标签：android, ios, push-notification

我正在编写一个用于推送通知的库，该库适用于 Android 和 ios。用户只会调用 push 方法并给出 deviceId。有没有办法以某种方式知道 ID 是 Android 还是 iOS，所以我可以调用 Android 或 iOS 的特定代码。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:36:13.690

我所做的是以下内容，当手机在 Apple/Google 中注册时，它会获得一个 ID，然后我向 php 发送一个请求，该 php 将该 ID 和手机平台插入 MySQL 数据库。当我需要发送推送通知时，我可以在该表中进行选择以仅获取 iOS 设备、Android 设备或两者。

像这样的东西：

```
insert into devices_table (device_id, device_platform) values ("whateveryourIdIs", "android"); 
```

然后，从数据库中获取它

```
select * from devices_table where device_platform = "android" 
```

因此，您可以获得所有的 android 设备并可以向它们推送通知。

希望对您有所帮助，或者至少给您更多的想法。

# android - 从 wifi 切换到移动网络时应用程序崩溃

> ID：13719021
> 
> 赞同：2
> 
> 时间：2012-12-05T08:28:16.607
> 
> 标签：android, ftp, android-wifi

我有一个 android 应用程序试图连接到 AsyncTask 中的网站并执行一些任务。当网络连接发生变化时，我的应用程序似乎总是崩溃，即应用程序最初连接到 wifi 网络，但失去连接并切换到移动网络。发生这种情况时，我的 Android 应用程序崩溃。我的代码被包围在一个 try catch 块中，所以我不确定为什么应用程序会崩溃？我该如何解决我的问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:54:40.937

在继续您的网站连接之前，您必须确保等待网络连接可用。

另外，请注意，如果您尝试在未事先禁用 WiFi 的情况下启用移动连接，Android 系统会自动关闭新启用的移动连接（优先考虑 WiFi 进行总结）。因此，您需要确保以正确的顺序进行操作：

1.  （启用 WiFi）
2.  （无线网络就绪）
3.  网站连接已开始
4.  网站连接已停止
5.  （无线网络禁用）
6.  （无线网络不可用）
7.  （启用移动）
8.  （手机就绪）
9.  网站连接已恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:30:35.003

```
WifiInfo info = WifiManager.getConnectionInfo();
if (info.getSSID() != null) {
    String ssid = info.getSSID();
    ...
} 
```

我不知道这样写会不会有点矫枉过正：

```
if (info != null && info.getSSID() != null) 
```

此外，建立连接时我需要监控的 BroadcastReceiver 是 WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION。事实证明，我的 onResume() 中有一个复制和粘贴错误，而且我并没有真正注册 WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION。

或者你可以使用以下链接

[Android：如何以编程方式启用/禁用 Wifi 或 Internet 连接](https://stackoverflow.com/questions/3930990/android-how-to-enable-disable-wifi-or-internet-connection-programmatically)

# actionscript-3 - AS3 HitTest gotoAndPlay 而不是 removeChild

> ID：13719024
> 
> 赞同：0
> 
> 时间：2012-12-05T08:28:29.160
> 
> 标签：actionscript-3, flash, hittest

我有一个 HitTestObject 会在被子弹击中时删除movieClip(enemy)。

这是代码：

```
if (hitTestObject(bulletTarget)) {
    //remove this from the stage if it touches a bullet
    removeEventListener(Event.ENTER_FRAME, eFrame);
    _root.removeChild(this);
    //also remove the bullet and its listeners
    _root.bulletContainer.removeChild(bulletTarget);
    bulletTarget.removeListeners();
    //up the score
    _root.score += 5;
} 
```

但不是立即删除它，我希望 Movieclip(enemy) 播放下一帧，这是它爆炸的动画，一旦发生爆炸，它应该被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:09:20.207

傻我！

我变了

```
_root.removeChild(this); 
```

到

```
this.gotoAndPlay(2); 
```

然后在我的爆炸剪辑结束时我添加了

```
this.parent.removeChild(this); 
```

# jquery - each() 和多个事件触发同一个函数

> ID：13719030
> 
> 赞同：1
> 
> 时间：2012-12-05T08:28:53.607
> 
> 标签：jquery

我想在每个页面加载时运行一些代码，`select`并通过每个事件分别重新运行它`select`。目前已完成以下工作：

```
jquery(function(){
  $('#myID select').each(function(){
    alert('SE');
  });

  $('#myID select').bind('keyup keypress blur change',function(){
    alert('SE');
  });
}); 
```

我可以将它们合并为一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:30:29.043

您可以触发 DOM 就绪事件之一：

```
$(function() {
    $("#myID select").bind("keyup keypress blur change", function() {
        alert("SE");
    }).keyup();  // or .trigger("keyup");
}); 
```

# input - 如何提供使用来自 java 代码的 s3 数据的输入 Mapreduce 作业

> ID：13719032
> 
> 赞同：2
> 
> 时间：2012-12-05T08:29:04.077
> 
> 标签：input, amazon-s3, amazon-web-services, mapreduce

我知道我们通常可以在 EC2 实例中运行 jar 文件时给出参数

但是我们如何通过代码给出输入呢？
我正在尝试这个，因为我试图从 jsp 调用我的 java 代码，所以在 java 代码中，我想直接从 s3 获取数据并继续，我尝试这样但徒劳无功：

```
DataExtractor.getRelevantData("s3n://syamk/revanthinput/", "999999", "94645", "20120606",
             "s3n://revanthufl/gen/testoutput" + "interm"); 
```

在这里，`s3n://syamk/revanthinput/`我使用的是 input 而不是`s3n://revanthufl/gen/testoutput`.
我正在使用输出，并且在参数中我使用相同的字符串（`s3n://syamk/revanthinput/`和`s3n://revanthufl/gen/testoutput`）来运行 jar。但是从代码中这样做是抛出和异常，

> [java.lang.IllegalArgumentException：AWS 访问密钥 ID 和秘密访问密钥必须分别指定为 s3n URL 的用户名或密码，或者通过设置 fs.s3n.awsAccessKeyId 或 fs.s3n.awsSecretAccessKey 属性（分别） .] 有根本原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T08:17:17.670

根据我对水槽的使用，您似乎需要格式化您的 URL，就像`s3n://AWS_ACCESS_KEY:AWS_SECRET_KEY@syamk/revanthinput/`从代码中调用 s3 时一样。

# javascript - 更改 Gmail 中的字体系列

> ID：13719034
> 
> 赞同：0
> 
> 时间：2012-12-05T08:29:19.023
> 
> 标签：javascript, html, css, email, gmail

有什么好方法可以更改 Gmail 中的字体系列，还是我需要包含一些 Javascipt 才能这样做？

我目前正在通过网络请求从我的电子邮件服务器向 Gmail 帐户发送一封 html 电子邮件。该页面在浏览器中使用正确的字体系列看起来很好。但是当我在 Gmail 中打开它时，字体是 Arial 而不是下面的。

我正在使用它，但它不起作用：

```
<tbody style="font-family: MyriadPro-Regular,cafetaRegular,georgia,serif !important; font-size: 22px;"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:37:09.750

您不能在 gmail 电子邮件中使用 javascript。如果使用编辑器本身提供的字体还不够，您可以在 gmail 中编写 HTML 电子邮件（[尽管您需要先安装一些东西](http://www.labnol.org/internet/send-html-email/19672/)）。或者，您可以使用基于浏览器的 Web 应用程序，例如[这个](http://ctrlq.org/html-mail/)。

完成此操作后，您可以使用 css 样式，但这必须通过内联样式完成，即

```
<div style="font-family: times, serif;"> 
```

因为您无法链接到外部样式表。

**编辑**：电子邮件将忽略`tbody`标签，因此请尝试使用`div`or`p`代替

# c++ - “表达式必须具有类类型”错误

> ID：13719037
> 
> 赞同：1
> 
> 时间：2012-12-05T08:29:31.457
> 
> 标签：c++, class, microcontroller

我正在为嵌入式微控制器编写我的小触摸屏代码。我让我的代码使用函数工作。但现在我想把它变成一堂课。我收到一个错误：

> 表达式必须具有类类型。

而且我不知道问题是什么。我用谷歌搜索了我的问题，但没有找到明确的解决方案。这是我的代码：

主文件

```
#include "screen.h"
#include "mbed.h"
#include "stdio.h"

screen test();

    int main(void)
    {

        while (1)
        {
        test.button(50,70,100,50,"button1"); // line where the compiler sees an error
        }  
    } 
```

屏幕.h

```
class screen{

public:

        screen();

        void init();
        void button(int, int, int, int, string);

private:
        int runningstatus; // 0 = stopped // 1 = failure // 2 = running
        point p;

}; 
```

屏幕.cpp

```
#include "screen.h"

touch_tft TFT(p20,p18,p17,p16,p5, p6, p7, p8, p15,"TFT"); // x+,x-,y+,y-,mosi, miso, sclk, cs, reset

screen::screen(){

}

void screen::init()
{
        TFT.claim(stdout);          // send stdout to the TFT display 
    TFT.background(Black);    // set background to black
    TFT.foreground(White);    // set chars to white
    TFT.cls();                // clear the screen
    TFT.set_orientation(3);
    TFT.set_font((unsigned char*) Arial24x23);
        TFT.locate(60, 100);
}

void screen::button(int x0, int y0, int length, int height, string caption)
{
        TFT.rect(x0     ,y0     ,x0+length      ,y0+height,     LightGrey);
        TFT.rect(x0-1   ,y0-1   ,x0+length+1    ,y0+height+1, LightGrey);
        TFT.fillrect(x0-2,y0-2 ,x0+length-1 ,y0+height-1, Navy);

        TFT.locate(x0+10, y0+10);

        TFT.background(Navy);   
        TFT.printf("%s", caption);
} 
```

谁能告诉我这段代码有什么问题。它让我彻底疯了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:18:06.100

您需要将：更改`screen test();`为`screen test;`. 就像现在一样，您正在声明一个名为`test`返回 a的函数`screen`，而不是定义一个名为`test`type的对象`screen`。

这被称为 C++ 的“最令人头疼的解析”（如果您想了解更多信息，可以搜索一个很好的术语）。

# android - 迁移到最新的 ADT 和 android sdk 后，Android 应用程序无法运行

> ID：13719039
> 
> 赞同：0
> 
> 时间：2012-12-05T08:29:35.230
> 
> 标签：android, android-intent, adt, android-maven-plugin

我在 Eclipse Indigo 中有一个带有 ADT 版本 15 的 Android 应用程序。将 ADT 升级到版本 21 程序崩溃并且无法在模拟器和移动设备上执行。

LogCat 显示此错误消息：

```
 12-05 10:07:35.960: E/AndroidRuntime(31462): FATAL EXCEPTION: main
    12-05 10:07:35.960: E/AndroidRuntime(31462): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{test.hello/test.StartActivityZZ}: java.lang.ClassNotFoundException: test.start.StartActivityZZ
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.os.Handler.dispatchMessage(Handler.java:99)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.os.Looper.loop(Looper.java:137)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.ActivityThread.main(ActivityThread.java:4898)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at java.lang.reflect.Method.invokeNative(Native Method)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at java.lang.reflect.Method.invoke(Method.java:511)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at dalvik.system.NativeStart.main(Native Method)
    12-05 10:07:35.960: E/AndroidRuntime(31462): Caused by: java.lang.ClassNotFoundException: test.start.StartActivityZZ
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
    12-05 10:07:35.960: E/AndroidRuntime(31462):    ... 11 more 
```

Android 项目使用 maven，但在没有 maven 的情况下创建一个新项目，问题仍然存在并显示相同的消息。

有什么建议可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:16:28.023

在某些时候（可能在版本 15 之后），您使用的库必须放在“libs”文件夹中。尝试将您的库的副本放在那里并重试

# php - 区域 api 请求为空

> ID：13719041
> 
> 赞同：1
> 
> 时间：2012-12-05T08:29:40.297
> 
> 标签：php, cdn, netdna-api

我使用netdna api。api是登录过程。

```
$api = new NetDNA("xxx","yyyy","zzzz"); // success 
```

但。

```
$ret = $api->delete('/zones/pull.json/99999/cache?file=/'.$fileurl);
print_r($ret); // is empty and dont change this file in cdn 
```

我的 ip 添加白名单，我检查了关键信息。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:51:53.967

我是 NetDNA 的开发人员，正在处理您的代码：

我们的模块将自动处理在 OAuth 请求中创建 query_strings 以及将参数添加到请求正文中，因此您应该重组请求以将文件名作为第二个参数传递给 delete 方法。

这是对您的代码进行的更新：

```
$ret = $api->delete("/zones/pull.json/99999/cache", array('file' => '/'.$fileurl); 
```

抱歉，我们的示例代码中没有很好的示例，现在更新。

# jquery - jquery固定对话框的位置，一旦调整大小就会损坏

> ID：13719043
> 
> 赞同：0
> 
> 时间：2012-12-05T08:29:51.907
> 
> 标签：jquery, jquery-ui-dialog

我有设置固定在屏幕上的位置的对话框。一切都很好，但是一旦我调整它的大小（并且我需要调整它的大小），固定位置就会中断，当我滚动浏览器滚动条时，它会随之移动。这是代码：

```
var layerNode= document.createElement('div');
    layerNode.setAttribute('id','dialog');
    layerNode.setAttribute('title','Basic dialog');
var pNode= document.createElement('p');

    console.log("msg var: "+massage); 
    pNode.innerHTML  = massage;

layerNode.appendChild(pNode);
document.body.appendChild(layerNode);

jQuery("#dialog").dialog({
    autoOpen: true, 
    draggable: true,
    resizable: true,
    height: 'auto',
    width: 500,
    modal: false,
    open: function(event, ui) {
        $(event.target).parent().css('position', 'fixed');
        $(event.target).parent().css('top', '5px');
        $(event.target).parent().css('left', '10px');
    }

});

jq162 = jQuery.noConflict(true);
  (function($) {
    $(document).ready(function() {
      $("#dialog").dialog();
    });
  })(jq162); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:36:14.270

而不是`position: fixed`使用`position: absolute`，对话框将不再*随*页面滚动（根据我的经验，大多数网站都使用对话框进行此操作）。

大部分是不相关的，但你可以重写这个：

```
$(event.target).parent().css({'position': 'absolute', 'top': '5px', 'left', '10px'}); 
```

# highcharts - 设置标志时间

> ID：13719044
> 
> 赞同：0
> 
> 时间：2012-12-05T08:29:56.987
> 
> 标签：highcharts

嗨！我为我的图表创建了标志：

```
type : 'flags',
    showInLegend: false,
    data : [{
        x : Date.UTC(2012, 11, 02),
        title : '!',
        text : 'bla-bla-bla'
    }] 
```

如何为 x 设置日期和时间？现在我只设置日期`Date.UTC(2012, 11, 02)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:39:54.057

您可以通过添加时间值来设置时间。有关该方法，请参阅[此](http://www.w3schools.com/jsref/jsref_utc.asp)文档。`Date.UTC()`

# c++ - 指向另一个列表中节点的指针的链接列表

> ID：13719053
> 
> 赞同：2
> 
> 时间：2012-12-05T08:30:33.320
> 
> 标签：c++, list, pointers, linked-list

我正在阅读一个文本文件并将其组织起来以便在 C++ 中进行搜索。我们必须在文本文件中创建一个关键字数组和一个网页链接列表。然后我们需要通过每个关键字都有一个指向节点本身的指针链接列表来将关键字链接到网页。关键字数组需要按字母顺序排列，网页列表的顺序无关紧要。似乎每个关键字的列表都无法正常工作。

这是关键字类：

```
class KeywordList
{
private:
    friend std::ostream& operator<<(std::ostream&, const KeywordList&);
public:
    struct Keyword
{
    std::string word;
    std::list<WebPageList::WebPage*> list;
};
Keyword keywords [1000];
std::size_t size;

KeywordList()
{
    size = 0;
}
~KeywordList() {}

void add(std::string value, WebPageList::WebPage* page)
{
    bool keepGoing = true;
    int i = 0;
    while (keepGoing)
    {
        if (value == keywords[i].word)
        {
            keywords[i].list.push_front(page);
            keepGoing = false;
        } else if (i == size) 
        {
            keywords[i].word = value;
            keywords[i].list.push_front(page);
            keepGoing = false;
            ++size;
        } else if (value < keywords[i].word) 
        {
            for (int j = size; j > i; --j)
            {
                keywords[j].word = keywords[j - 1].word;
                keywords[j].list = keywords[j - 1].list;
            }
            keywords[i].word = value;
            keywords[i].list.push_front(page);
            keepGoing = false;
            ++size;
        } else {
            ++i;
        }

    }
}

void search(std::string);

void printAllData()
{
    for (int i = 0; i < size; ++i)
    {
        std::cout << keywords[i].word << " : " << keywords[i].list.size() << " : ";
        WebPageList::WebPage * pagesList = keywords[i].list.front();
        while (pagesList)
        {
            std::cout << pagesList->url << " ";
            pagesList = pagesList->next;
        }
        std::cout << std::endl;
    }
    std::cout << std::endl;
} 
```

这是网页链表：

```
 class WebPageList
{

public:

struct WebPage
{
    std::string url;
    WebPage * next;
};

WebPage * head;

WebPageList()
{
    head = NULL;
}

void add(std::string value)
{
    WebPage * newPage;
    newPage = new WebPage;
    newPage->url = value;

    if (!head)
    {
        head = newPage;
        newPage->next = NULL;
    }
    else 
    {
        newPage->next = head;
        head = newPage;
    }
}

void printAllPages()
{
    WebPage * page = head;
    while (page)
    {
        std::cout << page->url << std::endl;
        page = page->next;
    }
} 
```

这是主要的：

```
ifstream dataFile;
    dataFile.open(argv[1], std::ios::in);

    KeywordList keywordList;
    WebPageList mainPages;

    int i = 0;
    std::string line;
    while (getline(dataFile, line))
    {
        std::string keyword, url;
        std::istringstream lineStream(line);
        lineStream >> url;
        mainPages.add(url);
        WebPageList::WebPage * passingPage = mainPages.head;

        while (lineStream >> keyword)
        {
            keywordList.add(keyword, passingPage);
            cout << endl;
            keywordList.printAllData();
        }
    }

    mainPages.printAllPages();

    dataFile.close(); 
```

这是我得到的输出：

```
structures : 1 : http://test1 

structures : 1 : http://test1  
zzz : 1 : http://something http://test1

structures : 1 : http://test1  
zalgorithms : 2 : http://www.algorithms.com/ http://something http://test1  
zzz : 1 : http://something http://test1 

structures : 1 : http://test1  
zalgorithms : 2 : http://www.algorithms.com/ http://something http://test1  
zzz : 2 : http://somethingelse http://www.algorithms.com/ http://something http://test1 

http://somethingelse 
http://www.algorithms.com/ 
http://something 
http://test1 
```

它基于这个输入文件：

```
http://test1 structures 
http://something zzz 
http://www.algorithms.com/ zalgorithms  
http://somethingelse zzz 
```

我损失惨重，所以任何帮助都将不胜感激！

# nhibernate - 休眠。符合。在联结表中设置复合主键

> ID：13719062
> 
> 赞同：0
> 
> 时间：2012-12-05T08:31:09.397
> 
> 标签：nhibernate, many-to-many, nhibernate-mapping, junction-table, conform

我有两个表，我想创建一个联结表。我有这个映射。

```
public UsertMap()
    {
        Table("Users");
        Id(x => x.Id, map => map.Generator(Generators.Assigned));
        Property(x => x.FirstName, map => map.NotNullable(true));
        Property(x => x.LastName, map => map.NotNullable(true));
        Property(x => x.Role, map => map.NotNullable(true));
        Bag(x => x.Projects, map =>
        {
            map.Table("UsersInProject");
            map.Cascade(Cascade.None);
            map.Access(Accessor.Field);
            map.Key(u => u.Column("UserId")); 
            }, a => a.ManyToMany(x => x.Column("ProjectId")));
    } 
```

和

```
public ProjectMap()
    {
        Table("Projects");
        Id(x => x.Id, map => map.Generator(Generators.Assigned));
        Property(x => x.SubmissionDate, map =>map.NotNullable(true));
        Property(x => x.QuotesubmissionDate, map => map.NotNullable(true));
        Bag(x => x.ProjectUsers, map =>
        {
            map.Table("UsersInProject");
            map.Cascade(Cascade.None);
            map.Access(Accessor.Field);
            map.Key(u => u.Column("ProjectId"));
        }, a => a.ManyToMany(x => x.Column("UserId")));
    } 
```

它创建了联结表，但没有设置为主键*，复合键 {ProjectId , UserId}

我究竟做错了什么？

提前谢谢。

*当我被告知有关我的代码时，我也很奇怪地理解它。创建的表是由这个 sql 代码创建的：

```
CREATE TABLE "UsersInProject"
(
  "ProjectId" uuid NOT NULL,
  "UserId" uuid NOT NULL,
  CONSTRAINT fk28998796db607aa2 FOREIGN KEY ("UserId")
      REFERENCES "Users" ("Id") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fk28998796f9a8d344 FOREIGN KEY ("ProjectId")
      REFERENCES "Projects" ("Id") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE "UsersInProject"
  OWNER TO test; 
```

我也希望像下面这样一行：

```
CONSTRAINT pk PRIMARY KEY ("ProjectId" , "UserId" ), 
```

编辑2：（为了更好的视图）

```
drop table if exists "UsersInProject" cascade;
create table "UsersInProject" (
        "ProjectId" uuid not null,
       "UserId" uuid not null
    );
    alter table "UsersInProject" 
        add constraint FK28998796DB607AA2 
        foreign key ("UserId") 
        references "Users";

    alter table "UsersInProject" 
        add constraint FK28998796F9A8D344 
        foreign key ("ProjectId") 
        references "Projects"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:00:57.190

我得出的结论是，为了在 nHibernate 中拥有复合主键，您必须使用另一列用于 nHibernate 更新数据库中的行。

更多内容在这里： [http ://devlicio.us/blogs/anne_epstein/archive/2009/11/20/nhibernate-and-composite-keys.aspx](http://devlicio.us/blogs/anne_epstein/archive/2009/11/20/nhibernate-and-composite-keys.aspx)

我相信正因为如此，您必须在联结表中添加更多列（精确的 1 列）才能实现我想要的。

享受！

# razor - 在使用对数轴的 cshtml 中制作图表

> ID：13719065
> 
> 赞同：1
> 
> 时间：2012-12-05T08:31:39.697
> 
> 标签：razor, charts, logarithm, trendline

我正在尝试创建一个图表，该图表将采用 X 和 Y 值并将它们绘制在对数刻度的图表上。

到目前为止，我有：

```
@{
var db = Database.Open("myDB");
var data = db.Query("SELECT yvals, xvals FROM mydata ORDER BY xvals");
var myChart = new Chart(width: 333, height: 222)
    .AddTitle("myChart")
    .AddSeries("Default",
        chartType: "Line",
        xValue: data, xField: "xvals",
        yValues: data, yFields: "yvals")
    .Write();
} 
```

那么可以添加对数轴吗？

另外，我可以添加趋势线并显示趋势线的渐变吗？

非常感谢任何帮助。

# android - Android Imageview 被 TextView “挤压”

> ID：13719068
> 
> 赞同：0
> 
> 时间：2012-12-05T08:31:48.137
> 
> 标签：android, textview, imageview, width

我已经定义了一个 XML 来显示一个小弹出窗口：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/scroller"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dip"
    android:background="@drawable/marker_popup_border"
    android:clickable="true"
    android:fadingEdgeLength="5dip"
    android:scrollbars="none" >

    <LinearLayout
        android:id="@+id/tracks"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal|center_vertical"
        android:orientation="horizontal"
        android:padding="10dip" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingRight="10dp" >

            <TextView
                android:id="@+id/popUpName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center" >

                <TextView
                    android:id="@+id/popUpState"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:drawablePadding="5dp" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:background="@color/graylightmore" >
        </LinearLayout>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:contentDescription="@string/info"
            android:paddingLeft="5dp"
            android:src="@drawable/info" />

    </LinearLayout>
</ScrollView>

<ImageView
    android:id="@+id/arrow_down"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="-4dip"
    android:contentDescription="@string/empty"
    android:src="@drawable/arrow_down_black" /> 
```

当两个 Textview 之一需要大量空间时，信息图像会被压缩……您可以在[此](http://www.emaborsa.com/jpg/screen2.png)链接上看到结果。我需要一个提示，以便始终显示 i 并且如果需要，将 textviews 分为 2 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:36:07.553

尝试给 layout_weight 属性如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/scroller"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dip"
    android:background="@drawable/marker_popup_border"
    android:clickable="true"
    android:fadingEdgeLength="5dip"
    android:scrollbars="none" >

    <LinearLayout
        android:id="@+id/tracks"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal|center_vertical"
        android:orientation="horizontal"
        android:padding="10dip" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingRight="10dp" 
            android:layout_weight="2">

            <TextView
                android:id="@+id/popUpName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center" >

                <TextView
                    android:id="@+id/popUpState"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:drawablePadding="5dp" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:background="@color/graylightmore" 
            >
        </LinearLayout>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:contentDescription="@string/info"
            android:paddingLeft="5dp"
            android:src="@drawable/info" 
            android:layout_weight="1"/>

    </LinearLayout>
</ScrollView>

<ImageView
    android:id="@+id/arrow_down"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="-4dip"
    android:contentDescription="@string/empty"
    android:src="@drawable/arrow_down_black" /> 
```

# c# - PhotoCapture 设备不显示任何内容

> ID：13719073
> 
> 赞同：1
> 
> 时间：2012-12-05T08:32:15.157
> 
> 标签：c#, xaml, camera, windows-phone-8

我使用以下代码使用 Windows Phone 8 中的 PhotoCaptureDevice 选项拍摄快照。

```
if (PhotoCaptureDevice.AvailableSensorLocations.Contains(CameraSensorLocation.Back) ||
                PhotoCaptureDevice.AvailableSensorLocations.Contains(CameraSensorLocation.Front))
            {
                // Initialize the camera, when available.
                if (PhotoCaptureDevice.AvailableSensorLocations.Contains(CameraSensorLocation.Back))
                {
                    // Use the back camera.
                    System.Collections.Generic.IReadOnlyList<Windows.Foundation.Size> SupportedResolutions =
                        PhotoCaptureDevice.GetAvailableCaptureResolutions(CameraSensorLocation.Back);
                    Windows.Foundation.Size res = SupportedResolutions[0];
                    d = await PhotoCaptureDevice.OpenAsync(CameraSensorLocation.Back, res);
                }
                else
                {
                    // Otherwise, use the front camera.
                    System.Collections.Generic.IReadOnlyList<Windows.Foundation.Size> SupportedResolutions =
                        PhotoCaptureDevice.GetAvailableCaptureResolutions(CameraSensorLocation.Front);
                    Windows.Foundation.Size res = SupportedResolutions[0];
                    d = await PhotoCaptureDevice.OpenAsync(CameraSensorLocation.Front, res);
                }

                await d.SetPreviewResolutionAsync(new Windows.Foundation.Size(640, 480));
                await d.SetCaptureResolutionAsync(new Windows.Foundation.Size(640, 480));

                d.SetProperty(KnownCameraGeneralProperties.EncodeWithOrientation,
                              d.SensorLocation == CameraSensorLocation.Back ?
                              d.SensorRotationInDegrees : -d.SensorRotationInDegrees);

                _device = d;
            } 
```

最后，我将此设备设置为视频画笔的来源。但是当应用程序通过按住返回键进入此状态时，我来自休眠状态，它显示空白页面并且不显示任何相机。你能请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:59:45.433

诺基亚有一个很棒的示例应用程序，其中包含 WP8 的 PhotoCaptureDevice 中启用的许多功能。看看[@http ://projects.developer.nokia.com/cameraexplorer](http://projects.developer.nokia.com/cameraexplorer)

甚至在第一页上还有一个使用 PhotoCaptureDevice 作为 VideoBrush.SetSource() 的端到端示例。从 MainPage.xaml.cs 上的 OnNavigatedTo 方法开始，了解如何使用 PhotoCaptureDevice @ [http://projects.developer.nokia.com/cameraexplorer/browser/CameraExplorer/MainPage.xaml.cs初始化相机取景器](http://projects.developer.nokia.com/cameraexplorer/browser/CameraExplorer/MainPage.xaml.cs)

以下是相关部分：

```
 /// <summary>
    /// If camera has not been initialized when navigating to this page, initialization
    /// will be started asynchronously in this method. Once initialization has been
    /// completed the camera will be set as a source to the VideoBrush element
    /// declared in XAML. On-screen controls are enabled when camera has been initialized.
    /// </summary>
    protected async override void OnNavigatedTo(NavigationEventArgs e)
    {
        if (_dataContext.Device == null)
        {
            ShowProgress("Initializing camera...");

            await InitializeCamera(CameraSensorLocation.Back);

            HideProgress();
        }

        videoBrush.RelativeTransform = new CompositeTransform()
        {
            CenterX = 0.5,
            CenterY = 0.5,
            Rotation = _dataContext.Device.SensorLocation == CameraSensorLocation.Back ?
                       _dataContext.Device.SensorRotationInDegrees :
                     - _dataContext.Device.SensorRotationInDegrees
        };

        videoBrush.SetSource(_dataContext.Device);

        overlayComboBox.Opacity = 1;

        SetScreenButtonsEnabled(true);
        SetCameraButtonsEnabled(true);

        base.OnNavigatedTo(e);
    }

    /// <summary>
    /// Initializes camera. Once initialized the instance is set to the DataContext.Device property
    /// for further usage from this or other pages.
    /// </summary>
    /// <param name="sensorLocation">Camera sensor to initialize</param>
    private async Task InitializeCamera(CameraSensorLocation sensorLocation)
    {
        Windows.Foundation.Size initialResolution = new Windows.Foundation.Size(640, 480);
        Windows.Foundation.Size previewResolution = new Windows.Foundation.Size(640, 480);
        Windows.Foundation.Size captureResolution = new Windows.Foundation.Size(640, 480);

        PhotoCaptureDevice d = await PhotoCaptureDevice.OpenAsync(sensorLocation, initialResolution);

        await d.SetPreviewResolutionAsync(previewResolution);
        await d.SetCaptureResolutionAsync(captureResolution);

        d.SetProperty(KnownCameraGeneralProperties.EncodeWithOrientation,
                      d.SensorLocation == CameraSensorLocation.Back ?
                      d.SensorRotationInDegrees : - d.SensorRotationInDegrees);

        _dataContext.Device = d;
    } 
```

以及相关的 XAML：

```
 <Canvas x:Name="VideoCanvas">
            <Canvas.Background>
                <VideoBrush x:Name="videoBrush"/>
            </Canvas.Background>
            <Rectangle x:Name="FocusIndicator" Stroke='Red' Opacity="0.7" Width="80" Height="80" StrokeThickness="5" Visibility="Collapsed"/>
        </Canvas> 
```

# iphone - 将数据从 json 加载到 webview

> ID：13719074
> 
> 赞同：0
> 
> 时间：2012-12-05T08:32:18.257
> 
> 标签：iphone, database, xcode, json, webview

在我的项目中，我有一个 tableView，其中包含我的 json 数据库中的大量数据。当我单击一个单元格时，我进入另一个 ViewController，我将在其中打开一个 webView，其中还包含来自我的 json 数据库的数据。一切正常，但我的 webView 没有从我的数据库中打开链接。

这是我的 webView 代码。

有人可以发现任何错误或可以帮助我吗？

```
NSString* jsonString = @"http://heurigenapp.cache.gugler.at/json.php";
NSData* jsonData = [NSData dataWithContentsOfURL:options:error:jsonString];
NSDictionary* jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL];
NSString* link = [jsonDict objectForKey:@"Link"];
NSURLRequest* linkUrl = [NSURL URLWithString:link];
[webView loadRequest:linkUrl]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:45:16.650

你在这里得到一个数组，而不是在 NSDictionary 上，因为有多个对象作为响应。

```
 NSArray* jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL]; 
```

所以你需要选择对象然后获取链接，例如

```
NSDictionary *dict = [jsonArray lastObject]; // im getting the last object from array
NSString* link = [dict objectForKey:@"Link"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:41:22.340

像这样使用它

```
NSString* jsonString = @"http://heurigenapp.cache.gugler.at/json.php";
NSData* jsonData = [NSData dataWithContentsOfURL: [NSURL URLWithString:jsonString] ];
NSMutableArray* jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL];

NSDictionary *jsonDictionary = [jsonArray objectAtIndex:0];

NSString* link = [jsonDictionary objectForKey:@"Link"];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:link]]]; 
```

# objective-c - -[UIView setRegion:animated:]: 无法识别的选择器发送到实例

> ID：13719078
> 
> 赞同：1
> 
> 时间：2012-12-05T08:32:28.537
> 
> 标签：objective-c, ios, ios6, mapkit, core-location

我是 Objective C 的初学者。在导航控制器中选择 TableRow 后，我正在设置 Mapview。我收到此错误，它终止了应用程序。

```
-[UIView setRegion:animated:]: unrecognized selector sent to instance 0x806b2c0 
```

这是我对 Mapview 的 viewWillAppeer

```
- (void)viewWillAppear:(BOOL)animated {

    CLLocationCoordinate2D zoomLocation;
    zoomLocation.latitude = 39.281516;
    zoomLocation.longitude= -76.580806;

    if (CLLocationCoordinate2DIsValid(location)) {
        MKCoordinateRegion mapRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);

        [_mapView setRegion:mapRegion animated:YES];
    } else {
        NSLog(@"Invalid coordinates");
    }
} 
```

用于此导入 mapkit 和 corelocation 的头文件并具有此属性。

```
@property (weak, nonatomic) IBOutlet MKMapView *mapView; 
```

头文件包括 mapkit 和 coreelocation 并且使这个属性变得强大也没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:51:30.910

发生这种情况是因为我之前在我的 LocateItemViewController（具有地图视图的控制器）上连接了一个名为“mapView”的插座，并且从未从“Connections Inspector”中删除它。

![查看名为的灰色出口](../Images/adbff1f52033f39b873d893a2f1a2f4d.png)

查看 Outlets 部分下名为“view”的灰色出口，我有一个类似的名为 mapView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:39:32.060

变量`_mapView`被修改为`UIView`. 该函数属于`MKMapView`而不是`UIView`。

参考：http: [//developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

# debugging - Valgrind 显示指向 Qt 源文件的错误，而不是指向我的源文件的错误 - 对此有何意义？

> ID：13719080
> 
> 赞同：3
> 
> 时间：2012-12-05T08:32:38.113
> 
> 标签：debugging, error-handling, valgrind

`valgrind --leak-check=full -v offline`

结果是：

```
--6491-- Reading syms from /home/.../offline/offline (0x400000)
--6491-- Reading syms from /lib64/ld-2.11.3.so (0x4000000)
--6491-- Reading syms from /usr/lib64/valgrind/memcheck-amd64-linux (0x38000000)
--6491--    object doesn't have a symbol table
--6491--    object doesn't have a dynamic symbol table
--6491-- Reading suppressions file: /usr/lib64/valgrind/default.supp
--6491-- REDIR: 0x4015fc0 (strlen) redirected to 0x38042017 (???)
--6491-- Reading syms from /usr/lib64/valgrind/vgpreload_core-amd64-linux.so (0x4a20000)
--6491--    object doesn't have a symbol table
--6491-- Reading syms from /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so (0x4c22000)
--6491--    object doesn't have a symbol table
==6491== WARNING: new redirection conflicts with existing -- ignoring it
--6491--     new: 0x04015fc0 (strlen              ) R-> 0x04c26ee0 strlen
--6491-- REDIR: 0x4015f10 (index) redirected to 0x4c26b40 (index)
--6491-- REDIR: 0x4015f90 (strcmp) redirected to 0x4c274e0 (strcmp)
--6491-- Reading syms from /usr/lib64/R/lib/libR.so (0x4e2c000)
--6491-- Reading syms from /usr/lib64/R/lib/libRblas.so (0x543b000)
--6491-- Reading syms from /usr/lib64/R/lib/libRlapack.so (0x5667000)
--6491-- Reading syms from /usr/lib64/R/library/Rcpp/lib/libRcpp.so (0x59e1000)
--6491-- Reading syms from /usr/lib64/R/library/RInside/lib/libRInside.so (0x5c2e000)
--6491-- Reading syms from /home/anisha/qtsdk-2010.05/qt/lib/libQtGui.so.4.7.0 (0x5e43000)
--6491-- Reading syms from /home/anisha/qtsdk-2010.05/qt/lib/libQtCore.so.4.7.0 (0x6bc0000)
--6491-- Reading syms from /lib64/libpthread-2.11.3.so (0x70a3000)
--6491-- Reading syms from /usr/lib64/libstdc++.so.6.0.14 (0x72c0000)
--6491--    object doesn't have a symbol table
--6491-- Reading syms from /lib64/libm-2.11.3.so (0x75c9000)
--6491-- Reading syms from /lib64/libgcc_s.so.1 (0x7820000)
--6491--   Considering /usr/lib/debug/.build-id/e6/eb8011838a065946e5808e036550844548379f.debug ..
--6491--   .. build-id is valid
--6491-- Reading syms from /lib64/libc-2.11.3.so (0x7a36000)
--6491-- Reading syms from /lib64/libreadline.so.6.1 (0x7da3000)
--6491--    object doesn't have a symbol table
--6491-- Reading syms from /lib64/librt-2.11.3.so (0x7fea000)
--6491-- Reading syms from /lib64/libdl-2.11.3.so (0x81f3000)
--6491-- Reading syms from /usr/lib64/libgomp.so.1.0.0 (0x83f7000)

==6491== 5 errors in context 13 of 34:
==6491== Conditional jump or move depends on uninitialised value(s)
==6491==    at 0x611629E: QHash<unsigned int, int>::findNode(unsigned int const&, unsigned int*) const (../include/QtCore/../../src/corelib/tools/qhash.h:884)
==6491==    by 0x62E9AC6: QTextFormatCollection::indexForFormat(QTextFormat const&) (../include/QtCore/../../src/corelib/tools/qhash.h:865)
==6491==    by 0x62E9E51: QTextFormatCollection::createObjectIndex(QTextFormat const&) (/var/tmp/qt-src/src/gui/text/qtextformat.cpp:3142)
==6491==    by 0x62FF56E: QTextDocumentPrivate::createObject(QTextFormat const&, int) (/var/tmp/qt-src/src/gui/text/qtextdocument_p.cpp:1588)
==6491==    by 0x62FFD57: QTextDocumentPrivate::rootFrame() const (/var/tmp/qt-src/src/gui/text/qtextdocument_p.cpp:1407)
==6491==    by 0x63203B0: QTextDocumentLayout::doLayout(int, int, int) (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:2908)
==6491==    by 0x632051C: QTextDocumentLayoutPrivate::ensureLayoutedByPosition(int) const (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:3076)
==6491==    by 0x6320978: QTextDocumentLayoutPrivate::layoutStep() const (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:3082)
==6491==    by 0x632123C: QTextDocumentLayout::documentChanged(int, int, int) (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:2874)
==6491==    by 0x62EF7D3: QTextDocument::documentLayout() const (/var/tmp/qt-src/src/gui/text/qtextdocument.cpp:1070)
==6491==    by 0x62C0D36: QTextControlPrivate::_q_documentLayoutChanged() (/var/tmp/qt-src/src/gui/text/qtextcontrol.cpp:624)
==6491==    by 0x62C104E: QTextControlPrivate::setContent(Qt::TextFormat, QString const&, QTextDocument*) (/var/tmp/qt-src/src/gui/text/qtextcontrol.cpp:434)

==6491== 3 errors in context 10 of 34:
==6491== Use of uninitialised value of size 8
==6491==    at 0x6116276: QHash<unsigned int, int>::findNode(unsigned int const&, unsigned int*) const (../include/QtCore/../../src/corelib/tools/qhash.h:884)
==6491==    by 0x62E9AC6: QTextFormatCollection::indexForFormat(QTextFormat const&) (../include/QtCore/../../src/corelib/tools/qhash.h:865)
==6491==    by 0x62E9E51: QTextFormatCollection::createObjectIndex(QTextFormat const&) (/var/tmp/qt-src/src/gui/text/qtextformat.cpp:3142)
==6491==    by 0x62FF56E: QTextDocumentPrivate::createObject(QTextFormat const&, int) (/var/tmp/qt-src/src/gui/text/qtextdocument_p.cpp:1588)
==6491==    by 0x62FFD57: QTextDocumentPrivate::rootFrame() const (/var/tmp/qt-src/src/gui/text/qtextdocument_p.cpp:1407)
==6491==    by 0x63203B0: QTextDocumentLayout::doLayout(int, int, int) (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:2908)
==6491==    by 0x632051C: QTextDocumentLayoutPrivate::ensureLayoutedByPosition(int) const (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:3076)
==6491==    by 0x6320978: QTextDocumentLayoutPrivate::layoutStep() const (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:3082)
==6491==    by 0x632123C: QTextDocumentLayout::documentChanged(int, int, int) (/var/tmp/qt-src/src/gui/text/qtextdocumentlayout.cpp:2874)
==6491==    by 0x62EF7D3: QTextDocument::documentLayout() const (/var/tmp/qt-src/src/gui/text/qtextdocument.cpp:1070)
==6491==    by 0x62C0D36: QTextControlPrivate::_q_documentLayoutChanged() (/var/tmp/qt-src/src/gui/text/qtextcontrol.cpp:624)
==6491==    by 0x62C104E: QTextControlPrivate::setContent(Qt::TextFormat, QString const&, QTextDocument*) (/var/tmp/qt-src/src/gui/text/qtextcontrol.cpp:434) 
```

`==6491== ERROR SUMMARY: 52 errors from 34 contexts (suppressed: 18 from 8)`

这些错误都没有指向**我的**源文件。
**我需要担心吗？**

Makefile 由 qmake 自动生成。
**它确实包含 -Wall。**

```
CC = gcc
CXX = g++
DEFINES = -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED
CFLAGS = -m64 -pipe -O2 -Wall -g -pedantic -W -D_REENTRANT $(DEFINES) 
```

**Make 不会向我显示任何警告。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:02:54.990

以下选项帮助我获得了一些提示（来自 Valgrind 手册页的文本）：

*   `--num-callers`

> 指定堆栈跟踪中显示的标识程序位置的最大条目数。请注意，仅使用前四个函数位置（当前函数中的位置，以及它的三个直接调用者的位置）来共同处理错误。所以这不会影响报告的错误总数。
> 
> 最大值为 50。请注意，较高的设置将使 Valgrind 运行得更慢并占用更多内存，但在处理具有深度嵌套调用链的程序时可能很有用。

*   `--fullpath-after`

> 默认情况下，Valgrind 仅显示堆栈跟踪中的文件名，而不显示源文件的完整路径。在源位于多个不同目录的大型项目中使用 Valgrind 时，这可能会很不方便。--fullpath-after 为这个问题提供了一个灵活的解决方案。存在此选项时，将显示每个源文件的路径，

*   `--track-origins=yes`

> 控制 Memcheck 是否跟踪未初始化值的来源。默认情况下，它不会，这意味着尽管它可以告诉您未初始化的值正在以危险的方式使用，但它无法告诉您未初始化的值来自何处。这通常使追查根本问题变得困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:44:36.390

> 我需要担心吗？

是的。您可能错误地使用了 Qt 的函数，向它们传递了不尊重文档中为它们描述的合同的参数。

假设您`memcpy()`像这样使用标准库：

```
char t[10];
memcpy(t, ..., 12); 
```

Valgrind 会在 中标记缓冲区溢出`memcpy()`，但`memcpy()`在这种情况下不负责：相反，调用者`memcpy()`使用错误。

在这里，您可能会将指向未初始化内存的指针传递给希望能够从中读取的 Qt 函数。如果 Qt 函数被记录为从指定的内存中读取，则意味着您的程序有问题。

编辑：

同样，错误函数的直接调用者可能不是真正的罪魁祸首：它本身可能因接收到错误的参数而被绊倒。实际上，当 Valgrind 检测到问题时，编程错误位于当前调用堆栈中的某个位置。在“契约式设计”中，鼓励考虑功能需求和保证的编程方法，这被称为“分配责任”。

# c++ - 两个素数等于偶数

> ID：13719081
> 
> 赞同：-3
> 
> 时间：2012-12-05T08:32:38.770
> 
> 标签：c++, primes

给定一个偶数 n>2，求和为 n 的素数。必须使用找到素数的函数。

也许可以开始这样的事情？：

```
for (int i = 2; i < n; i++)
{
    if (IsPrime(i) && IsPrime(n - i))
        break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-08T10:25:48.657

这对我有用..

```
public ArrayList<Integer> primesum(int A) {

    ArrayList<Integer> result = new ArrayList<Integer>();
    if(A < 2)
        return result;

    int first = 2;
    int second = A - first; 
    while(first <= second){
        second = A - first;

        if(isPrime(second) == true && isPrime(first)){
            result.add(first);
            result.add(second);
            return result;
        }
        first++;
    }

    return result;

}

public boolean isPrime(int n)
{
    if(n==1)
        return false;
    for(int i=2;i<=Math.sqrt(n);i++) {
        if(n%i==0)
            return false;
        }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:59:23.360

我只是给你一个提示，而不是整个解决方案，这将是起点！

这是可能的解决方案之一，而不是解决方案：

首先，定义一个检查数字是否为素数的函数：

```
bool isPrime(const unsigned& number) {
  for (unsigned i = 2; i < number; i++) {
     if (number % i == 0) {
       return false;
     }
   }
  return true;
 } 
```

还定义：

```
struct PrimeSum {
  unsigned first;
  unsigned second; 
 };

PrimeSum searchPrimeAddend(const unsigned& number, const vector<unsigned>& v) {
   // your code to find two number iterating the vector 
} 
```

在你的主要：

```
int main(const int argc, const char* argv[]) {
  const unsigned N = 13;
  std::vector<unsigned> primeList;
  for (unsigned i = 3; i < N; i += 2) {
    if (isPrime(i)) {
       primeList.push_back(i);
    }
  }
 PrimeSum primes = searchPrimeAddend(N, primeList);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:56:47.677

我认为这是一个家庭作业，所以我会给你一些开始的提示：

1) 要检查一个数 N 是否为素数，您可以迭代到 N/2 并在找到它的倍数时中断。如果您不太关心空间和时间的复杂性，那么嵌套的 for 循环将是最简单的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T23:03:33.627

这有效，它是 C++

```
bool isPrime(int number){
    if (number == 1)
        return false;

    if (number == 2)
        return true;

    for (int i = 2; i <= number / 2; ++i)
        if (number % i == 0)
            return false;

    return true;
}

vector<int> Solution::primesum(int A) {    
    std::vector<int> vect;
    int pivot = A / 2; // the prime numbers cannot cross each other in the middle

    // keep j less than the i. i will be the lower bound of the number and
    // j will be the higher bound
    int j = A-2;
    for (int i = 2; i <= pivot && j >= pivot; i++, j--){
        if (isPrime(i) && isPrime(j)){
            vect.push_back(i);
            vect.push_back(j);
            return vect;
        }
    }

    return vect;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-05T12:08:30.797

伪代码

*   找到直到 n 的所有素数并填充一个容器（按插入或容器排序）
*   对于容器获取正向迭代器“向上”和反向迭代器“向下”
*   while (up!=end && down!=rend && *up<=*down)
    *   总和 = *上 + *下
    *   如果总和 == n
        *   保存对 // 找到
        *   ++向上
    *   否则，如果总和 > n
        *   ++下
    *   否则，如果总和 < n
        *   ++向上

这给你留下了一些 C++ 作业

不同的解决方案（单次运行可能更有效）

*   找到 n/2 以内的所有素数并填充一个容器（按插入或容器排序）
*   对于容器前进迭代器“向上”
*   而（向上！=结束）
    *   其他 = n - *向上
    *   if is_prime(其他)
        *   保存对 *up，其他
    *   ++向上

# sharepoint - sharepoint 使用 C# 将 webpart 添加到页面

> ID：13719084
> 
> 赞同：1
> 
> 时间：2012-12-05T08:32:59.813
> 
> 标签：sharepoint, listview, web-parts

我在将 sharepoint listviewwebparts 添加到 Web 部件页面时遇到问题。我想用 C# 以编程方式完成它。我已经制作了页面，但添加 listviewwebpart 不起作用。代码如下。

```
 private void addListViewWebPart(SPFeatureReceiverProperties properties, String _listName)
        {
            using (SPWeb _web = properties.Feature.Parent as SPWeb)
            {
                SPList _list = _web.Lists.TryGetList(_listName);

                if (_list != null)
                {
                    ListViewWebPart _webPart = new ListViewWebPart();

                    _webPart.ZoneID = "Left";
                    _webPart.ListName = _list.ID.ToString("B").ToUpper();
                    _webPart.ViewGuid = _list.Views[0].ID.ToString("B").ToUpper();

                    SPWebPartCollection _webPartColl = _web.GetWebPartCollection("Default.aspx", Storage.Shared);
                    System.Guid _guid = _webPartColl.Add(_webPart);
                }
            }
        } 
```

任何人都知道为什么它不工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:43:33.580

您将需要使用[`SPLimitedWebPartManager`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webpartpages.splimitedwebpartmanager.aspx)及其`AddWebPart`方法。

此博客中有一个示例：[使用 SPLimitedWebPartManager 以编程方式添加 Web 部件](http://avinash-moss-expert.blogspot.de/2010/08/add-web-part-programmatically-using.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T05:15:57.077

以下网站对演示如何将 Web 部件添加到页面非常有帮助。它包括有关如何添加开箱即用 Web 部件和自定义 Web 部件的示例。来源：[https ://www.sharepointdiary.com/2012/08/how-to-add-web-parts-to-the-page-programmatically.html](https://www.sharepointdiary.com/2012/08/how-to-add-web-parts-to-the-page-programmatically.html)

如何将 ListViewWebpart 添加到页面的示例：

```
using Microsoft.SharePoint;
using Microsoft.SharePoint.WebPartPages;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web.UI.WebControls.WebParts;

namespace YourProjectName.Helpers
{
    public class WebPartHelper
    {

        //Add ListView Web Part to Page
        //Source Ref: https://www.sharepointdiary.com/2012/08/how-to-add-web-parts-to-the-page-programmatically.html

        public static string AddListViewWebPartToPage(SPWeb web, 
                                                     string pageUrl, //full or relative
                                                     string ListName,
                                                     string WPTitle, 
                                                     string wpZone, // eg.  "Left", "Middle", "Right"
                                                     PartChromeType chromeType=PartChromeType.TitleAndBorder)
        {

            try
            {
                //Create the SPLimitedWebPart Manager to Add web parts
                SPLimitedWebPartManager WebPartMgr = web.GetLimitedWebPartManager(pageUrl, PersonalizationScope.Shared);

                //Check for existing web part with same title first
                //Added this to ensure that I don't add the same web part multiple times, especially if this is used in a feature activate function.
                foreach (Microsoft.SharePoint.WebPartPages.WebPart wp in WebPartMgr.WebParts)
                {
                    if (wp.Title == WPTitle)
                    {
                        return "WebPart with title of [" + WPTitle + "] already exists.";
                    }
                }

                //Get the object of the list of which we are creatin the list viewer webpart
                SPList list = web.Lists[ListName];
                ListViewWebPart oListViewWP = new ListViewWebPart();
                //Set the properties of the webpart
                oListViewWP.ChromeType = chromeType;
                oListViewWP.Title = WPTitle;
                oListViewWP.ListName = list.ID.ToString("B").ToUpper();
                oListViewWP.ViewGuid = list.DefaultView.ID.ToString("B").ToUpper();

                //Define the zone in which webparts need to be added
                WebPartMgr.AddWebPart(oListViewWP, wpZone, 3);

            }
            catch (Exception ex)
            {

                return ex.ToString();

            }
            return "";

        }

    }
} 
```

# android - 如何在打算进行下一个活动时将 n 活动设置为暂停？

> ID：13719086
> 
> 赞同：0
> 
> 时间：2012-12-05T08:33:15.743
> 
> 标签：android, resume

我正在开发一个应用程序，我想在其中将一个活动设置为暂停并打算进行下一个活动。当我将返回此活动时，我想恢复主要活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:45:40.163

当开始一个新的活动时，它会显示在当前活动的上方。当一个活动不再处于顶部时，它将被暂停。当按下返回按钮时，它将再次恢复。

[这里](http://developer.android.com/reference/android/app/Activity.html)是关于活动类的文档，包括它的生命周期。

这个方案可能会说清楚：

![在此处输入图像描述](../Images/ec0608c5f8f4717bc2ceb2d7e70fd223.png)

onPause() 和 onResume() 方法可用于暂停/恢复或保存/恢复活动中某些任务的状态。

如果您正在启动一个必须向当前活动返回值的活动，则可以使用 startActivityForResult()。Android SDK 解释在[这里](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)，所以问题答案+例子[在这里](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)。

# configuration - 在服务器启动时更改 jboss-log4j.xml 的名称/位置

> ID：13719089
> 
> 赞同：0
> 
> 时间：2012-12-05T08:33:34.533
> 
> 标签：configuration, jboss, log4j

就我而言，我有一个 jboss-5.1，它应该`jboss-log4j.xml`根据他们的启动调用来拉取不同的。不幸的是，我无法找到类似`-Dlogging.properties=`for xml-files 的东西来提供不同的 xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:51:09.040

如果我理解了您的问题，您希望 JBoss 不使用默认的 conf/jboss-log4j.xml 文件，而是使用另一个在启动脚本中定义为属性的文件。在这种情况下，您应该：

*1) 修改文件conf/jboss-service.xml*中定义的 Log4jService 的 ConfigurationURL 属性。原来的样子：

```
 <attribute name="ConfigurationURL">resource:jboss-log4j.xml</attribute> 
```

相反，您应该告诉 JBoss 从属性中获取文件（例如，让我们将此属性命名为*log4j.conf.file*），因此它将是：

```
 <attribute name="ConfigurationURL">${log4j.conf.file}</attribute> 
```

2) 然后，启动定义此属性的 JBoss 实例，并将其值设置为您要用于此实例的 log4j xml 配置文件的确切路径。例如，如果该文件的路由是“ */app/jboss/logconf/log4j.xml* ”：

```
 ./run.sh -Dlog4j.conf.file=/app/jboss/logconf/log4j.xml 
```

# actionscript-3 - AIR StageText 隐式强制错误

> ID：13719091
> 
> 赞同：1
> 
> 时间：2012-12-05T08:33:39.943
> 
> 标签：actionscript-3, air, starling-framework

我正在尝试在和 AIR/AS3 应用程序中实现 StageText，当我使用类似的东西时：

```
private var txtField:StageText = new StageText();
txtField.stage = stage;
txtField.viewPort = new Rectangle(200, 150, 400, 35); 
```

例如我得到错误：

1067：将starling.display:Stage 类型的值隐式强制转换为不相关的flash.display:Stage 类型。

我不知道为什么会发生这种情况，因为我遵循了文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T03:29:05.887

Starling 有自己的舞台，要访问 Flash 舞台，请使用“Starling.current.nativeStage”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:08:05.600

注意 starling.display:Stage 和 flash.display:Stage 之间的区别——它们是不同的类型。Starling 使用自己的显示列表实现，这似乎经常在开发人员中引起一些误解。所以，你真正想要分配给 txtField.stage 的是你的 Starling Stage，而不是 Flash 原生的。

# java - 使用 JFrame 在 JPanel 之间切换

> ID：13719094
> 
> 赞同：1
> 
> 时间：2012-12-05T08:33:58.320
> 
> 标签：java, swing, jframe, jpanel, cardlayout

我有两个观点：test1 和 test2

从 test1 切换到 test 2 工作正常，但是当我从 test2 切换回来时， contentPanel 是空的。这是我的代码。有人可以指出我做错了什么吗？

**测试1**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;

public class test1 extends JFrame {

JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                test1 frame = new test1();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public test1() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);

    JButton btnView = new JButton("View2");
    contentPane.add(btnView, BorderLayout.CENTER);
    btnView.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            contentPane.removeAll();
            contentPane.invalidate();
            test2 obj=new test2();
            obj.contentPane.setVisible(true);
            contentPane.add(obj.contentPane);
            ((JPanel)contentPane).revalidate();
            contentPane.repaint();          }
    });
}

} 
```

**测试2**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;

public class test2 extends JFrame {

JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                test2 frame = new test2();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public test2() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JLabel lblThisIsView = new JLabel("this is view 2!");
    lblThisIsView.setBounds(178, 107, 110, 14);
    contentPane.add(lblThisIsView);

    JButton btnView = new JButton("View 1!");
    btnView.setBounds(168, 161, 89, 23);
    contentPane.add(btnView);

    btnView.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            contentPane.removeAll();
            contentPane.invalidate();
            test1 obj=new test1();
            obj.contentPane.setVisible(true);
            contentPane.add(obj.contentPane);
            ((JPanel)contentPane).revalidate();
            contentPane.repaint();
        }
    });
}
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:57:43.533

这是布局的基本问题。在`test1.java`您添加了带有`BorderLayout`. 但不在`test2.java`.

test2 的布局应该是`BorderLayout`. 之后，应使用以下语法添加所有组件 -

```
contentPane.add(lblThisIsView,BorderLayout.CENTER); 
```

完成的代码`test2.java`-

```
public test2() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(new BorderLayout(0, 0));

        JLabel lblThisIsView = new JLabel("this is view 2!");
        lblThisIsView.setBounds(178, 107, 110, 14);
        contentPane.add(lblThisIsView,BorderLayout.CENTER);

        JButton btnView = new JButton("View 1!");
        btnView.setBounds(168, 161, 89, 23);
        contentPane.add(btnView,BorderLayout.SOUTH);

        btnView.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                contentPane.removeAll();
                contentPane.invalidate();
                test1 obj = new test1();
                obj.contentPane.setVisible(true);
                contentPane.add(obj.contentPane);
                ((JPanel) contentPane).revalidate();
                contentPane.repaint();
            }
        });
    } 
```

总代码在[这里](https://gist.github.com/4213984)。

* * *

从评论中可以看出，最好的方法是使用`CardLayout`- 添加面板 -

```
public CardLayoutHelper(JPanel panel, JPanel... panels) {
        this(panel);
        for (int i = 0; i < panels.length; i++) {
            JPanel jPanel = panels[i];
            panel.add(jPanel.getName(), jPanel);
        }
    } 
```

切换面板 -

```
 public void switchPanel(String name) {
            layout.show(panel, name);
            panel.revalidate();
            panel.repaint();
        } 
```

您可以`CardLayoutHelper`从[github](https://gist.github.com/4214039)获取。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T00:54:45.827

到我刚刚设置的当前帧：

```
"classname.this.setVisible(false);" 
```

帧切换现在工作正常。这不是正确的方法，但我的项目提交是今天，解决方案很简单，可以在任何地方实施。

# spring - Lucene Cypher 查询策略

> ID：13719095
> 
> 赞同：1
> 
> 时间：2012-12-05T08:34:03.953
> 
> 标签：spring, lucene, neo4j, cypher, spring-data-neo4j

首先，我们使用的技术是 Neo4j、Spring 和 Spring Data Neo4j（都是最新的稳定版本）。

我们要求用户应该能够单独搜索我们所有的实体，并为所有实体提供所有全局搜索。我希望收集有关如何实施全局搜索的建议。下面是一些（简化的！）代码，显示了我如何查询我的实体。每个实体都使用自己的 Lucene 索引。

实体结构：

```
@NodeEntity
public abstract class BaseEntity {

    @GraphId
    private Long id;

}

@NodeEntity
public class A extends BaseEntity {

    private static final String INDEX = "A_Index";

    public static final String SEARCH_QUERY = "START a=node:" + INDEX + "({name}) RETURN a";

    @Indexed(indexType = IndexType.FULLTEXT, indexName = INDEX)
    @NotBlank
    private String name;

}

@NodeEntity
public class B extends BaseEntity {

    private static final String INDEX = "B_Index";

    public static final String SEARCH_QUERY = "START b=node:" + INDEX + "({name}) RETURN b";

    @Indexed(indexType = IndexType.FULLTEXT, indexName = INDEX)
    @NotBlank
    private String name;

} 
```

存储库类：

```
@Repository
public interface ARepository extends GraphRepository<A> {

    @Query(A.SEARCH_QUERY)
    List<A> find(@Param("name") String name, Pageable pageable);

}

@Repository
public interface BRepository extends GraphRepository<B> {

    @Query(B.SEARCH_QUERY)
    List<B> find(@Param("name") String name, Pageable pageable);

} 
```

我如何访问存储库类（再次，非常简化）：

```
@Service
public class Service {

    @Autowired
    private ARepository repository;

    public List<A> search(final String name) {
        return repository.find("name:*" + name + "*", null);
    }

} 
```

因此，当您搜索单个实体类型时，这一切都很好。有人可以建议最好的方法是实现搜索每种实体类型的全局搜索吗？

我一直在思考的想法：

*   使用单个 Lucene 索引，而不是每个实体的索引。在 @Indexed 中提供 fieldName，如“a.name”或“b.name”。然后在单个查询中使用每个字段名称，例如“globalIndex:(a.name: *foo* OR b.name: *foo* )。（实际上不确定这是否可能）

*   为每种实体类型启动单独的搜索调用并组合结果。但是，很难根据索引分数来实现分页和排序。

我不担心性能，因为我们将使用相对较小的数据集。

最后一个问题：从 Cypher Lucene 查询返回的结果是否总是按其索引分数排序？如果没有，我应该如何在 SDN 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:51:24.217

我认为您的第一个选择最有意义。

通常，您还可以使用`indexLevel=Level.CLASS`获取所有实体的全局索引（或对所有实体使用相同的索引名称）。然后在查询期间，如果您想按类型过滤，还添加一个 where 过滤器：`where a.__type__ = {fqn}`fqn 是完全限定名称（或者如果您使用`@TypeAlias`该值）

目前不支持按分数排序，通常 cypher 仅按您可以在图表中直接访问的内容进行排序。

PS虽然有一个注释会很酷，它在单个字段上接受多个@Indexed注释然后尊重所有这些注释（尽管如果你想从一个字段推断索引会引入问题）。[随时在SDN JIRA](http://spring.neo4j.org/issues)上提出问题

# javascript - 右键单击 PHP 中的禁用

> ID：13719096
> 
> 赞同：-4
> 
> 时间：2012-12-05T08:34:11.377
> 
> 标签：javascript, html, browser

我正在使用一个使用 ppt 幻灯片和视频的应用程序。我想在所有浏览器中禁用右键单击，可以这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T08:35:17.543

不，PHP 在服务器端，右键单击是客户端。

你可以通过使用 jQuery 来实现它：

```
$(document).ready(function()
{ 
       $(document).bind("contextmenu",function(e){
              return false;
       }); 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T07:06:22.787

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    $(this).bind("contextmenu", function(e) {
        e.preventDefault();
    });
}); 
</script>
<script type="text/JavaScript"> 
    function killCopy(e){ return false } 
    function reEnable(){ return true } 
    document.onselectstart=new Function ("return false"); 
    if (window.sidebar)
    { 
        document.onmousedown=killCopy; 
        document.onclick=reEnable; 
    } 
</script> 
```

//通过使用上面的代码，您的右键将被禁用，并且没有人可以复制您的页面内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:35:52.983

右键单击是浏览器的一项功能。你不能通过 PHP 禁用它（PHP 生成 HTML）。

在 Javascript 中是可能的：

```
<body oncontextmenu="return false;"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T08:50:10.247

**不要那样做**

无论您做什么，都无法阻止用户完全访问您网站上的每一点数据。只需关闭浏览器上的 Javascript（或使用 NoScript 之类的插件），您编写的任何 Javascript 都可以变得毫无意义。此外，没有办法禁止任何用户简单地为您的站点“查看源代码”或“查看页面信息”（或使用 wget）。

这不值得努力。它实际上不会起作用。它将使您的网站对用户充满敌意。他们会注意到这一点并停止访问。这样做没有任何好处，只会浪费精力和流量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T05:29:24.047

试试这个：
使用javascript禁用所有浏览器的右键单击。

```
<script language="javascript">
           var message="This function is not allowed here.";
           function clickIE4(){
                 if (event.button==2){
                     alert(message);
                     return false;
                 }
           }
           function clickNS4(e){
                if (document.layers||document.getElementById&&!document.all){
                        if (e.which==2||e.which==3){
                                  alert(message);
                                  return false;
                        }
                }
           }
           if (document.layers){
                 document.captureEvents(Event.MOUSEDOWN);
                 document.onmousedown=clickNS4;
           }
           else if (document.all&&!document.getElementById){
                 document.onmousedown=clickIE4;
           }
           document.oncontextmenu=new Function("alert(message);return false;")
</script> 
```

# actionscript-3 - 导出大于原生屏幕分辨率的屏幕截图？

> ID：13719098
> 
> 赞同：0
> 
> 时间：2012-12-05T08:34:23.730
> 
> 标签：actionscript-3, flash, image-processing, openframeworks

我已经在 Flash 和 openFrameworks 中尝试过这个，但两者都有同样的问题......

我正在构建一个由 1000 张图像组成的画布，然后我将最终图像导出为 jpg

我想将它导出为 6 兆像素 jpg 或类似的东西，但是我的屏幕分辨率远低于此，并且导出只会以我的屏幕尺寸出现。

有没有办法解决这个问题？

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:52:30.950

这很容易。您创建一个所需大小的 BitmapData 对象，然后以您需要的方式在该位图数据上绘制您需要的所有内容，然后使用 JPEGEncoder 和 pwn 对该位图数据进行编码。一个例子：

```
public function saveAsPNG():void {
        if (frameset[0] == null) return;
        var fr:FileReference = new FileReference();
        var totalHeight:int = Math.ceil(Math.sqrt(totalFrames));
        var iter:int = totalHeight;
        if (iter * (iter - 1) >= totalFrames) totalHeight--;
        var totalWidth:int = iter * baseRect.width;
        totalHeight *= baseRect.height;
        var dp:Point = new Point();
        var bigBitmap:BitmapData = new BitmapData(totalWidth, totalHeight, true, 0);
        for (var i:int = 0; i < totalFrames; i++) {
            var j:int = Math.floor(i / iter);
            var k:int = i - j * iter;
            dp.x = k * baseRect.width;
            dp.y = j * baseRect.height;
            bigBitmap.copyPixels(frameset[i], baseRect, dp); // semi-square bitmap as a result
        }
        fr.save(PNGEncoder.encode(bigBitmap));
    } 
```

这需要一个名为“frameset”的 BitmapData 序列，并将其覆盖在一个名为“bigBitmap”的 BitmapData 上，然后将其导出为 PNG - 我使用这种格式，因为我需要详细的透明度。由于源对象是 BitmapData 类型，因此不`BitmapData.draw()`涉及，`BitmapData.copyPixels()`而是。

# javascript - 知道您是通过应用程序还是通过网站运行

> ID：13719099
> 
> 赞同：1
> 
> 时间：2012-12-05T08:34:27.853
> 
> 标签：javascript, android, html, cordova

我有一个用 Html5 和 PhoneGap 构建的应用程序。

如果您运行应用程序或运行 Html5(web)，我怎么知道（在 JS 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:39:49.793

[userAgent 属性的定义和使用](http://www.w3schools.com/jsref/prop_nav_useragent.asp)。

导航对象还有一个平台属性（[更多信息](http://www.w3schools.com/jsref/obj_navigator.asp)）。

我希望它有帮助！

# android - 如何以编程方式从 styles.xml 检索样式属性

> ID：13719103
> 
> 赞同：90
> 
> 时间：2012-12-05T08:34:40.897
> 
> 标签：android, xml, styles

目前，我正在使用 WebView 或 TextView 来显示来自我的一个应用程序中的 web 服务的一些动态数据。如果数据包含纯文本，它将使用 TextView 并应用来自 styles.xml 的样式。如果数据包含 HTML（主要是文本和图像），它会使用 WebView。

但是，此 WebView 没有样式。因此它看起来与通常的 TextView 有很大不同。我已经读过，只需将一些 HTML 直接插入数据中，就可以在 WebView 中设置文本样式。这听起来很简单，但我想使用我的 Styles.xml 中的数据作为此 HTML 中所需的值，因此如果我更改我的样式，我不需要在两个位置更改颜色等。

那么，我怎么能做到这一点呢？我已经进行了一些广泛的搜索，但我没有发现实际上从您的styles.xml 中检索不同的样式属性的方法。我在这里遗漏了什么还是真的无法检索这些值？

我试图从中获取数据的样式如下：

```
<style name="font4">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textSize">14sp</item>
    <item name="android:textColor">#E3691B</item>
    <item name="android:paddingLeft">5dp</item>
    <item name="android:paddingRight">10dp</item>
    <item name="android:layout_marginTop">10dp</item>
    <item name="android:textStyle">bold</item>
</style> 
```

我主要对 textSize 和 textColor 感兴趣。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-12-19T12:55:19.903

可以以`styles.xml`编程方式检索自定义样式。

在 中定义一些任意样式`styles.xml`：

```
<style name="MyCustomStyle">
    <item name="android:textColor">#efefef</item>
    <item name="android:background">#ffffff</item>
    <item name="android:text">This is my text</item>
</style> 
```

现在，像这样检索样式

```
// The attributes you want retrieved
int[] attrs = {android.R.attr.textColor, android.R.attr.background, android.R.attr.text};

// Parse MyCustomStyle, using Context.obtainStyledAttributes()
TypedArray ta = obtainStyledAttributes(R.style.MyCustomStyle, attrs);

// Fetch the text from your style like this.     
String text = ta.getString(2);

// Fetching the colors defined in your style
int textColor = ta.getColor(0, Color.BLACK);
int backgroundColor = ta.getColor(1, Color.BLACK);

// Do some logging to see if we have retrieved correct values
Log.i("Retrieved text:", text);
Log.i("Retrieved textColor as hex:", Integer.toHexString(textColor));
Log.i("Retrieved background as hex:", Integer.toHexString(backgroundColor));

// OH, and don't forget to recycle the TypedArray
ta.recycle() 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-08-22T23:49:06.013

@Ole 给出的答案似乎在使用某些属性时会中断，例如 shadowColor、shadowDx、shadowDy、shadowRadius（这些只是我找到的几个，可能还有更多）

我不知道**为什么**会出现这个问题，我在[这里](https://stackoverflow.com/q/25402452/3922891)询问，但[@AntoineMarques](https://stackoverflow.com/a/25406443/3922891)编码风格似乎解决了这个问题。

为了使它适用于任何属性，它会是这样的

* * *

首先，定义一个样式以包含资源ID，如下所示

attrs.xml

```
<resources>     
    <declare-styleable name="MyStyle" >
        <attr name="android:textColor" />
        <attr name="android:background" />
        <attr name="android:text" />
    </declare-styleable>
</resources> 
```

然后在代码中你会这样做来获取文本。

```
TypedArray ta = obtainStyledAttributes(R.style.MyCustomStyle, R.styleable.MyStyle);  
String text = ta.getString(R.styleable.MyStyle_android_text); 
```

使用此方法的优点是，您按名称而不是索引检索值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-04T18:08:58.590

Ole 和 PrivatMamtora 的答案对我来说效果不佳，但确实如此。

假设我想以编程方式阅读这种风格：

```
<style name="Footnote">
    <item name="android:fontFamily">@font/some_font</item>
    <item name="android:textSize">14sp</item>
    <item name="android:textColor">@color/black</item>
</style> 
```

我可以这样做：

```
fun getTextColorSizeAndFontFromStyle(
    context: Context, 
    textAppearanceResource: Int // Can be any style in styles.xml like R.style.Footnote
) {
    val typedArray = context.obtainStyledAttributes(
        textAppearanceResource,
        R.styleable.TextAppearance // These are added to your project automatically.
    )
    val textColor = typedArray.getColorStateList(
        R.styleable.TextAppearance_android_textColor
    )
    val textSize = typedArray.getDimensionPixelSize(
        R.styleable.TextAppearance_android_textSize
    )

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        val typeface = typedArray.getFont(R.styleable.TextAppearance_android_fontFamily)

        // Do something with the typeface...

    } else {
        val fontFamily = typedArray.getString(R.styleable.TextAppearance_fontFamily)
            ?: when (typedArray.getInt(R.styleable.TextAppearance_android_typeface, 0)) {
                1 -> "sans"
                2 -> "serif"
                3 -> "monospace"
                else -> null
            }

        // Do something with the fontFamily...
    }
    typedArray.recycle()
} 
```

我从 Android 的 TextAppearanceSpan 类中获得了一些灵感，你可以在这里找到它：[https ://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/text/style/TextAppearanceSpan.java](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/text/style/TextAppearanceSpan.java)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-03T17:01:29.677

我无法让早期的解决方案发挥作用。

我的风格是：

```
<style name="Widget.TextView.NumPadKey.Klondike" parent="Widget.TextView.NumPadKey">
    <item name="android:textSize">12sp</item>
    <item name="android:fontFamily">sans-serif</item>
    <item name="android:textColor">?attr/wallpaperTextColorSecondary</item>
    <item name="android:paddingBottom">0dp</item>
</style> 
```

android.R.attr.textSize 的obtainStyledAttributes() 给出了“12sp”的字符串结果，然后我必须对其进行解析。对于 android.R.attr.textColor，它提供了一个资源文件 XML 名称。这太麻烦了。

相反，我找到了一种使用 ContextThemeWrapper 的简单方法。

```
TextView sample = new TextView(new ContextThemeWrapper(getContext(), R.style.Widget_TextView_NumPadKey_Klondike), null, 0); 
```

这给了我一个完全样式的 TextView 来查询我想要的任何东西。例如：

```
float textSize = sample.getTextSize(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-16T12:43:32.340

使用 Kotlin，如果您在应用程序/库中包含*androidx.core:core-ktx*库...

```
implementation("androidx.core:core-ktx:1.6.0") // Note the -ktx 
```

...您可以拥有以下任何一项（**无需**回收*TypedArray*）：

```
// Your desired attribute IDs
val attributes = intArrayOf(R.attr.myAttr1, R.attr.myAttr2, android.R.attr.text)

context.withStyledAttributes(R.style.MyStyle, attributes) {
    val intExample = getInt(R.styleable.MyIntAttrName, 0)
    val floatExample = getFloat(R.styleable.MyFloatAttrName, 0f)
    val enumExample = R.styleable.MyEnumAttrName, MyEnum.ENUM_1 // See Note 1 below
    // Similarly, getColor(), getBoolean(), etc.
} 
```

```
context.withStyledAttributes(R.style.MyStyle, R.styleable.MyStyleable) {
    // Like above
} 
```

```
// attributeSet is provided to you like in the constructor of a custom view
context.withStyledAttributes(attributeSet, R.styleable.MyStyleable) {
    // Like above
} 
```

### 注1（感谢[这个答案](https://stackoverflow.com/a/58815613/8583692)）

要获取枚举值，您可以定义此扩展函数：

```
internal inline fun <reified T : Enum<T>> TypedArray.getEnum(index: Int, default: T) =
    getInt(index, -1).let { if (it >= 0) enumValues<T>()[it] else default } 
```

### 笔记2

***-ktx***依赖项（如*androidx.core:core*和*androidx.core:core-ktx* ）之间的区别在于-ktx***变***体包含对 Kotlin 有用的扩展函数。否则，它们是相同的。

[另外，感谢[Ole 的回答](https://stackoverflow.com/a/13952929/8583692)。]

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2016-03-10T12:21:55.443

如果接受的解决方案不起作用，请尝试将 attr.xml 重命名为 attrs.xml（为我工作）

# java - 如何在android的osm地图中添加更多标记

> ID：13719105
> 
> 赞同：2
> 
> 时间：2012-12-05T08:34:57.197
> 
> 标签：java, android, openstreetmap

我找到了一个解决方案，如何在 openstreet 地图中映射气球我根据需要自定义 osmbonuspack 工作正常，但只显示一张地图。

如何在下面粘贴的这段代码中添加多个标记？

我的输出 URL 工作正常，只需告诉我如何在图像气泡中添加文本以及如何在地图中添加多个标记？

```
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import com.osmbonuspackdemo.R;

public class NavigationActivity extends Activity 
{
    protected MapView map;
    protected ItemizedOverlayWithBubble<ExtendedOverlayItem> markerOverlays;
    protected ExtendedOverlayItem markerStart;

    @Override public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        map = (MapView) findViewById(R.id.map);
        map.setBuiltInZoomControls(true);
        map.setMultiTouchControls(true);
        MapController mapController = map.getController();

        GeoPoint myPoint1 = new GeoPoint(24.893379000000000000, 67.028060900000010000);
        mapController.setZoom(9);
        mapController.setCenter(myPoint1);

        final ArrayList<ExtendedOverlayItem> waypointsItems = new ArrayList<ExtendedOverlayItem>();
        markerOverlays = new ItemizedOverlayWithBubble<ExtendedOverlayItem>(this, waypointsItems, map);
        map.getOverlays().add(markerOverlays);
        markerStart = putMarkerItem(null, myPoint1, "Start", R.drawable.marker_a, R.drawable.rogger_rabbit);
    }

    public ExtendedOverlayItem putMarkerItem(ExtendedOverlayItem item, GeoPoint p, String title, int markerResId, int iconResId) {
            Drawable marker = getResources().getDrawable(markerResId);
            ExtendedOverlayItem overlayItem = new ExtendedOverlayItem(title, "", p);

            overlayItem.setMarker(marker);
            overlayItem.setImage(getResources().getDrawable(iconResId));
            markerOverlays.addItem(overlayItem);
            map.invalidate();

            return overlayItem;
   }  

}

import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.overlay.OverlayItem;
import android.graphics.drawable.Drawable;

public class ExtendedOverlayItem extends OverlayItem {

    private String mTitle, mDescription; // now, they are modifiable
    private String mSubDescription; //a third field that can be displayed in the infowindow, on a third line
    private Drawable mImage; //that will be shown in the infowindow.
    //private GeoPoint mGeoPoint //unfortunately, this is not so simple...

    public ExtendedOverlayItem(String aTitle, String aDescription, GeoPoint aGeoPoint) {
        super(aTitle, aDescription, aGeoPoint);
        mTitle = aTitle;
        mDescription = aDescription;
        mSubDescription = null;
        mImage = null;
    }

    public void setTitle(String aTitle){
        mTitle = aTitle;
    }

    public void setDescription(String aDescription){
        mDescription = aDescription;
    }

    public void setSubDescription(String aSubDescription){
        mSubDescription = aSubDescription;
    }

    public void setImage(Drawable anImage){
        mImage = anImage;
    }

    public String getTitle() {
        return mTitle;
    }

    public String getDescription() {
        return mDescription;
    }

    public String getSubDescription() {
        return mSubDescription;
    }

    public Drawable getImage() {
        return mImage;
    }
}

public class InfoWindow {

    protected View mView;
    protected boolean mIsVisible = false;
    protected MapView mMapView;

    public InfoWindow(int layoutResId, MapView mapView) {
        mMapView = mapView;
        mIsVisible = false;
        ViewGroup parent=(ViewGroup)mapView.getParent();
        Context ctx = mapView.getContext();
        LayoutInflater inflater = (LayoutInflater)ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        /*
        if (layoutResId == 0)
            layoutResId = R.layout.bonuspack_bubble;
        */
        mView = inflater.inflate(layoutResId, parent, false);
        mView.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                close();
            }
        });
    }

    public View getView() {
        return(mView);
    }

    public void open(GeoPoint position, int offsetX, int offsetY) {
        MapView.LayoutParams lp=new MapView.LayoutParams(
            MapView.LayoutParams.WRAP_CONTENT,
            MapView.LayoutParams.WRAP_CONTENT,
            position, MapView.LayoutParams.BOTTOM_CENTER,
            offsetX, offsetY);
        close();
        mMapView.addView(mView, lp);
        mIsVisible = true;
    }

    public void close() {
        if (mIsVisible) {
            mIsVisible = false;
            ((ViewGroup)mView.getParent()).removeView(mView);
        }
    }

    public void setPosition(GeoPoint p, int offsetX, int offsetY){
        if (mIsVisible){
            open(p, offsetX, offsetY);
        }
    }
}

import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapView;
import org.osmdroid.views.overlay.ItemizedIconOverlay;
import org.osmdroid.views.overlay.OverlayItem;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

public class ItemizedOverlayWithBubble<Item extends OverlayItem> extends  
ItemizedIconOverlay<Item> {
    protected InfoWindow mBubble; //only one for all items of this overlay => one at  
 a  time
 private Context context;
    protected OverlayItem mItemWithBubble; //the item currently showing the bubble.  
   Null if none.
    final int mTitleId, mDescriptionId, mSubDescriptionId, mImageId;

    public ItemizedOverlayWithBubble(final Context context, final List<Item> aList,  
  final MapView mapView) {
        super(context, aList, new OnItemGestureListener<Item>() {
            @Override public boolean onItemSingleTapUp(final int index, final  
  OverlayItem item) {
                return false;
            }
            @Override public boolean onItemLongPress(final int index, final  
  OverlayItem item) {
                return false;
            }
        });

        String packageName = context.getClass().getPackage().getName();
        int layoutId =  
 context.getResources().getIdentifier("layout/bonuspack_bubble" , null, packageName);
        mTitleId = context.getResources().getIdentifier("id/bubble_title", null, 
 packageName);
        mDescriptionId = 
 context.getResources().getIdentifier("id/bubble_description", null, packageName);
        mSubDescriptionId = 
 context.getResources().getIdentifier("id/bubble_subdescription", null, packageName);
        mImageId = context.getResources().getIdentifier( "id/bubble_image", null,  
 packageName);
        mBubble = new InfoWindow(layoutId, mapView);
        mItemWithBubble = null;
    }

    public void showBubbleOnItem(int index, MapView mapView) {
        ExtendedOverlayItem eItem = (ExtendedOverlayItem)(getItem(index));
        mItemWithBubble = eItem;
        GeoPoint position = eItem.getPoint();
        //update the content of the bubble, based on the item tapped:
        View view = mBubble.getView();
        ((TextView)view.findViewById(mTitleId /*R.id.title*  
/)).setText(eItem.getTitle());
        ((TextView)view.findViewById(mDescriptionId /*R.id.description* 
  /)).setText(eItem.getDescription());

        //handle mSubDescription, hidding or showing the text view:
        TextView subDescText = (TextView)view.findViewById(mSubDescriptionId);
        String subDesc = eItem.getSubDescription();
        if (subDesc != null && !("".equals(subDesc))){
            subDescText.setText(subDesc);
            subDescText.setVisibility(View.VISIBLE);
        } else {
            subDescText.setVisibility(View.GONE);
        }

        ImageView imageView = (ImageView)view.findViewById(mImageId   
   /*R.id.image*/);
        Drawable image = eItem.getImage();
        if (image != null){
            imageView.setBackgroundDrawable(image);
            imageView.setVisibility(View.VISIBLE);
        } else
            imageView.setVisibility(View.GONE);

        int offsetY = -20;
        Drawable marker = eItem.getMarker(OverlayItem.ITEM_STATE_FOCUSED_MASK);
        if (marker != null)
            offsetY = -marker.getIntrinsicHeight()*3/4;
        mBubble.open(position, 0, offsetY);
        mapView.getController().animateTo(position);
    }

    @Override protected boolean onSingleTapUpHelper(final int index, final Item item,  
    final MapView mapView) {
        showBubbleOnItem(index, mapView);
        return true;
    }

    /** @return the item currenty showing the bubble, or null if none.  */
    public OverlayItem getBubbledItem(){
        //TODO: if user taps the bubble to close it, mItemWithBubble is not set 
 to  null...
        return mItemWithBubble;
    }

    @Override public boolean removeItem(Item item){
        boolean result = super.removeItem(item);
        if (mItemWithBubble == item){
                mBubble.close();
                mItemWithBubble = null;
        }
        return result;
    }

    @Override public void removeAllItems(){
        super.removeAllItems();
        mBubble.close();
        mItemWithBubble = null;
    }

  @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) 
    {   

        if (event.getAction() == 0) {                
            GeoPoint geopoint = (GeoPoint) mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());
            // latitude
            double lat = geopoint.getLatitudeE6() / 1E6;
            // longitude
            double lon = geopoint.getLongitudeE6() / 1E6;
            Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon,   
  Toast.LENGTH_SHORT).show();
        }                            
        return false;
    } 
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:05:24.283

像这样使用Itemized Overlay（填充方法最重要）

```
public class CustomOverLay extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> overlayItems = new ArrayList<OverlayItem>();
private MapView mapView;

public CustomOverLay(Drawable drawable, MapView mapView) {
    super(boundCenterBottom(drawable));
    this.mapView = mapView;
}

public void addOverlayItem(OverlayItem item) {
    overlayItems.add(item);
    populate();
}

@Override
protected OverlayItem createItem(int index) {
    return overlayItems.get(index);
}

@Override
public int size() {
    return overlayItems.size();
}

@Override
protected boolean onTap(int index) {
    return true;
} 
```

}

一旦你按照下面的代码执行此操作，为要放置在地图中的数字标记添加 OverlayItem

```
List<Overlays> mapOverlays = mapView.getOverlays();
CustomOverLay overlays = new CustomOverLay(drawable, mapView);

GeoPoint p = new GeoPoint(getLat(util.getLatitude()), getLong(util.getLongitude()));
OverlayItem overlayItem = new OverlayItem(p, "", "");
overlays.addOverlayItem(overlayItem);

GeoPoint p = new GeoPoint(getLat(util.getLatitude()), getLong(util.getLongitude()));
OverlayItem overlayItem = new OverlayItem(p, "", "");
overlays.addOverlayItem(overlayItem);

..... so on

mapOverlays.add(overlays); 
```

干杯

# postgresql - 如何验证 pg_dump 归档生成的归档是否正常且有效？

> ID：13719108
> 
> 赞同：6
> 
> 时间：2012-12-05T08:35:23.840
> 
> 标签：postgresql

我正在从 postgresql 备份/恢复我使用的数据`pg_dump.exe`和`pg_restore.exe`.

为了恢复备份文件，如果转储文件不正常，我必须删除数据库中的实际表，这可能是“自杀性工作”。

我可以用（比如）'7z t mydump.gz'检查转储文件的完整性，我喜欢第一次测试。

但我想知道，因为这个存档是原始的 PG 存档，PostgreSQL 是否包含任何技术来检查这个“.gz”存档，我可以在删除实际表之前采取这些技术？

如果这样做，如何进行适当的检查？

编辑：这是我的实际倾销命令：

> "C:\Program Files (x86)\PostgreSQL\9.1\bin\pg_dump.exe" --host localhost --port 5432 --username "postgres" --no-password --verbose -F t --file "C :\Users\User 1\Desktop\mydatabase.gz" "mydatabase"

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:02:59.230

您似乎正在尝试验证您刚刚制作的 PostgreSQL 转储的有效性和正确性。

您的主要误解是**您不必将转储恢复到您从中创建它的同一数据库中**。您可以恢复到同一个集群上的另一个数据库，或者为了额外的偏执，恢复到另一个集群（服务器）上的数据库。验证转储是否已正确还原，并且数据与您预期的一样。

对于额外的妄想症，请停止 PostgreSQL 服务器并复制数据目录中的文件。这样你也有一个文件级备份。请注意，PostgreSQL 数据目录的文件级副本*只能*由在同一平台上使用相同选项构建的 PostgreSQL 的相同主要 (8.1/8.2/...) 版本读取 - 因此，如果 datadir 来自 9.2.x在 Windows x64 上，它只能被另一个安装了 9.2.x 的 Windows x64 主机读取。

如果您担心原始数据库，那么您可能没有备份。这是一个*关键*问题。您需要立即阅读[有关备份和恢复的文档章节，](http://www.postgresql.org/docs/current/static/backup.html)并获得一个良好的*自动*备份方案。看看[酒保](http://www.pgbarman.org/)。

**问题编辑后更新**：

`-F t`是一个奇怪的选择；普通的 SQL 转储或`-F c`通常更有意义。

您生成的文件不是`.gz`（gzip 压缩的）文件，无论如何，它是一个`.tar`存档文件，而不是压缩文件。可以将其提取到一个充满 SQL 文件的目录中。

要对其进行测试，请使用将其还原到使用或命令`pg_restore`创建的新空数据库。`createdb``CREATE DATABASE`

# ruby - 找出使用 Ruby 的服务器支持哪些密码

> ID：13719109
> 
> 赞同：1
> 
> 时间：2012-12-05T08:35:24.370
> 
> 标签：ruby, encryption, server-side, metasploit

我正在尝试编写/修改 metasploit 模块以找出服务器支持哪些密码（用于扫描目的）。我是否必须通过全部尝试来枚举密码，还是有办法从服务器请求它支持的密码？

到目前为止，我只能[找出](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Cipher.html)我的本地 openssl 版本支持哪些模块。

当我想阅读有关[证书](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/X509/Certificate.html)的信息时，可以使用：

```
cert = OpenSSL::X509::Certificate.new(sock.peer_cert)
print_status("#{ip}:#{rport} Public Key: #{cert.public_key}") 
```

密码有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:51:49.380

因此，除非有这个我仍然不知道的请求 - 我想这是对如何枚举服务器支持的密码的一个很好的描述：

[http://gursevkalra.blogspot.ch/2009/09/ruby-and-openssl-based-ssl-cipher.html](http://gursevkalra.blogspot.ch/2009/09/ruby-and-openssl-based-ssl-cipher.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T09:16:50.680

您首先使用 加载所有密码，[`openssl_add_all_ciphers`](http://linux.die.net/man/3/openssl_add_all_ciphers)然后您可以使用[`EVP_get_cipherbyname`](http://linux.die.net/man/3/evp_get_cipherbyname). 有一些方法可以枚举密码，例如。[使用`OBJ_NAME_do_all_sorted`](http://marc.info/?l=openssl-users&m=107873956817083&w=2).

Ruby 的 OpenSSL 模块有一个[硬编码列表](http://svn.ruby-lang.org/cgi-bin/viewvc.cgi/trunk/ext/openssl/lib/openssl/cipher.rb?view=markup)：

```
 class Cipher
    %w(AES CAST5 BF DES IDEA RC2 RC4 RC5).each{|name|
      klass = Class.new(Cipher){
        define_method(:initialize){|*args|
          cipher_name = args.inject(name){|n, arg| "#{n}-#{arg}" }
          super(cipher_name)
        }
      } 
```

PS。显然有[`ciphers`](http://linux.die.net/man/1/ciphers)命令，但这并不好玩。

# redirect - 如何阻止 Joomla 2.5 重定向插件捕获 404 URL

> ID：13719110
> 
> 赞同：0
> 
> 时间：2012-12-05T08:35:32.483
> 
> 标签：redirect, joomla2.5

我在 Joomla 2.5 中使用重定向管理器，效果很好。唯一的问题是，在某些时候我想阻止重定向管理器捕获 404 url​​ 并将它们添加到后端。

这是怎么做到的？后端是否有配置选项，或者我是否需要修改重定向插件代码？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:39:15.583

我已经制定了代码方式来做到这一点，但我更喜欢后端配置方式。

代码修复 - 在 plugins/system/redirect/redirect.php 中注释掉以下行：

```
// If not, add the new url to the database.
                 $query = $db->getQuery(true);
                 $query->insert($db->quoteName('#__redirect_links'), false);
                 $columns = array( $db->quoteName('old_url'),
                                $db->quoteName('new_url'),
                                $db->quoteName('referer'),
                                $db->quoteName('comment'),
                                $db->quoteName('hits'),
                                $db->quoteName('published'),
                                $db->quoteName('created_date')
                            );
                $query->columns($columns);
                $query->values($db->Quote($current). ', '. $db->Quote('').
                            ' ,'.$db->Quote($referer).', '.$db->Quote('').',1,0, '.
                              $db->Quote(JFactory::getDate()->toSql())
                            );

                $db->setQuery($query);
                $db->query(); 
```

# java - Java中的N对N索引关系

> ID：13719111
> 
> 赞同：1
> 
> 时间：2012-12-05T08:35:33.583
> 
> 标签：java, collections

> **可能重复：**
> [Java 中的双向多值映射](https://stackoverflow.com/questions/8066109/bidirectional-multi-valued-map-in-java)

我需要一个实现 N 对 N 关系的数据结构。类似于`Map<Foo,Bar>`with 调用的东西：

```
getValues(Foo foo): Collection<Bar>
getValues(Bar bar): Collection<Foo> 
```

以及常规管理的方法，例如：

```
removeKey(Foo)   [remove all the <Foo,X> entries]
removeValue(Bar) [remove all the <X,Bar> entries] 
```

是否有一些我可以使用的库或者我应该实现它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:52:33.137

为什么不创建 2 个映射，每个映射从键到值集合：

`Map<Foo, Collection<Bar>>`和`Map<Bar, Collection<Foo>>`

如果您希望可以创建一个类来包装（也许对类型使用一些泛型，以便您可以轻松地重用它）它们内部并提供您需要的方法

# r - 通过R中的get获取列表的对象

> ID：13719113
> 
> 赞同：1
> 
> 时间：2012-12-05T08:35:41.860
> 
> 标签：r

我有一个包含一些对象的列表，我想循环获取对象。我现在使用这段代码，但我不知道为什么它没有回答！

```
test1 <- list(a=c(1,2,3,4),b=rnorm(100))
test1$a
[1] 1 2 3 4 
```

但是当我想通过循环加载它时，我不能。例如

```
get("test1$a")
Error in get("test1$a") : object 'test1$a' not found 
```

那么，如何通过这样的命令加载列表的这些对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:38:10.730

你必须使用

```
get("test1")$a 
```

因为对象的名字是`test1`, not `test1$a`。

# php - 在 PHP/Mysql 中处理时间

> ID：13719116
> 
> 赞同：6
> 
> 时间：2012-12-05T08:36:06.890
> 
> 标签：php, mysql

我很困惑。例如，我要添加一条记录，该记录也应该填写，然后我用下午 6:30 这样的格式填写时间文本框。

`So how could I store this data into mysql database? What data type should I use?Because there are time,datetime and timestamp datatypes. What PHP functions should I use.`

我真正想要实现的是以 H:MM am/pm 格式（例如 6:30 pm）获取用户输入的时间，以正确的方式将其存储在数据库中，并以完全相同的方式显示或检索这些数据被输入。

谁能帮助我了解如何使用 PHP 在 mysql 中存储和检索时间。请给我例子。

我知道网络上有很多资源，但我想为像我这样的编程新手提供直接而清晰的答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-05T08:48:01.810

如果您将时间作为`6:30 PM`用户输入，那么您可以[`strtotime()`](http://php.net/manual/en/function.strtotime.php)将其转换为时间戳，然后您可以将其格式化以存储在数据库中。

使用 MySQL`TIME`数据类型，它要求时间格式为 HH:MM:SS（24 小时）。

例子：

```
$dbFormat = date('H:i:s', strtotime('6:30 PM')); 
```

产生：

> 18:30:00

这已准备好插入数据库。[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)当您从数据库中检索它时，您可以使用该函数让 MySQL 将其格式化回原始格式。

```
SELECT DATE_FORMAT(mytime, '%l:%i %p') FROM mytable 
```

产生：

> 下午6点30分

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T08:46:56.090

您可以使用时间戳将您的时间存储在 MySQL 数据库中。

时间戳时间：

```
<?php
    $time = strtotime($yourTime); //yourTime is the time from your input box.
?> 
```

时间戳到时间：

```
<?php
    $time = date('g:i a', $yourTime); //yourTime is the time from the database.
?> 
```

有关更多信息，请参阅： http: [//nl1.php.net/manual/en/function.date.php](http://nl1.php.net/manual/en/function.date.php)和[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

**编辑：** 您可以在 MySQL 数据库中将时间戳值保存为 INT(11)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T08:52:40.507

您应该在 mysql [http://dev.mysql.com/doc/refman/5.0/en/time.html](http://dev.mysql.com/doc/refman/5.0/en/time.html)中使用类型**时间**

时间以这种格式存储：***HH:MM:SS***

而对于 php 转换，

插入：

```
$time=strtotime('6:30 pm');
$data_bd=date("H:i:s",$time);
//And then insert into mysql field 
```

提炼：

```
//Extract the data from mysql
$time=strtotime('18:30:00');
$data_print=date("g:i a",$time); 
```

如果你想看这个过程：[http ://codepad.org/gNdm4YIy](http://codepad.org/gNdm4YIy)

* * *

了解更多信息：

[http://es2.php.net/manual/en/function.strtotime.php](http://es2.php.net/manual/en/function.strtotime.php)

[http://es2.php.net/manual/en/function.date.php](http://es2.php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T09:01:39.590

你可以尝试这样的事情：

```
$time = '6:30pm';
$newTime = strftime('%H:%M:%S',strtotime($time)); 
```

现在你应该得到一个有效的 mysql 时间。

大多数情况下，以正确的格式将数据存储到 mysql 数据库中是最好的主意。如果您在这里只有时间数据，我推荐该列的时间格式。日期时间和时间戳只有在你有完整的日期时才应该使用，比如 2012-12-05 09:54:32（或时间戳 1354697672）。

要加载时间数据并将其格式化回 00:00am/pm 格式，您可以尝试：

```
$time = '18:30:00';
$newTime = strftime('%I:%M %p',strtotime($time)); 
```

我希望这能帮到您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T08:45:49.060

这完全取决于您的应用程序（您想要一天中的时间，还是绝对时间？，您想要做算术吗？等等）。

一个简单的解决方案可能是这样的：

使用[`strftime`](http://php.net/manual/en/function.strftime.php)和[`strtotime`](http://php.net/manual/en/function.strtotime.php)函数：

```
$timestamp = strtotime("6:30 pm");
$timestring = strftime("%I:%M %P", $timestamp); 
```

自纪元以来的`$timestamp`秒数，您可以将其作为 INT 存储在数据库中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T09:11:29.610

使用格式为 (YYYY-MM-DD HH:MM:SS) 的 MySQL 时间戳。您需要以 24 小时格式保存时间。如果您只是将其保存为 0000-00-00 18:30:00。

然后，当您检索时间时，只需使用 date('h:i A', $mysql_timestamp) 将其格式化为下午 6:30。

希望有帮助。

# git - 如何使用 opendiff 作为默认的合并工具

> ID：13719122
> 
> 赞同：22
> 
> 时间：2012-12-05T08:36:19.770
> 
> 标签：git, mergetool, opendiff

嗨，我正在尝试使用 opendiff 作为 git mergetool，但是当我运行 mergetool 时，我收到以下错误消息：

> 合并工具 opendiff 不能作为“opendiff”使用

我究竟做错了什么？它以前工作得很好，但是自从我安装了一个新的硬盘驱动器后它就不再工作了:(

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-09-02T14:18:18.253

您需要将 opendiff 配置为您的全局 merge.tool：

```
# locate xcode utilities
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer

# set "opendiff" as the default mergetool globally
git config --global merge.tool opendiff 
```

如果你得到`Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo`，打开 XCode 并接受许可证可以解决问题

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T00:39:43.880

确保您已安装 XCode。（如果您使用的是 git，那么您可能使用的是 brew，在这种情况下，您可能已经安装了 XCode。）

一次性解决方案是告诉 git 你想使用什么工具：

```
$ git mergetool -t opendiff 
```

至于将 opendiff 设置为默认工具，您需要在 git 配置文件中设置“merge.tool”变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T13:08:54.980

git 支持 --dir-diff (-d) 执行目录 diff，在 FileMerge 中看起来不错。但是，使用带有 --dir-diff 的 opendiff 存在一些小问题。opendiff 没有 --merge 目标预设，git 会过早删除临时文件以保存更改。我的解决方法是使用一个小的 bash 脚本来调用 FileMerge。我叫它`gdiff`。

```
#!/bin/bash
# find top level of git project
dir=$PWD
until [ -e "$dir/.git" ]; do
  if [ "$dir" == "/" ]; then
    echo "Not a git repository" >&2
    exit 1;
  fi
  dir=`dirname "$dir"`
done
# open fresh FileMerge and wait for termination
open -a FileMerge -n -W --args -left "$1" -right "$2" -merge "$dir" 
```

[https://gist.github.com/miner/e73fc98a83a8fe05d9ef000d46d68a9f](https://gist.github.com/miner/e73fc98a83a8fe05d9ef000d46d68a9f)

像这样称呼它：

`git difftool -d -x gdiff`

# javascript - 浮动元素溢出容器

> ID：13719126
> 
> 赞同：0
> 
> 时间：2012-12-05T08:36:56.280
> 
> 标签：javascript, jquery, html, css

我正在开发一个流畅的布局。我以百分比给出了 div 的宽度值。但以 px 为单位指定高度。因此，当我折叠浏览器时，内容会折叠，但浮动的 div 会溢出容器。所以我试图以 % 更改所有 div 的高度，但它不起作用。请建议我如何做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:39:29.377

带百分比的高度仅在父级具有固定高度时才有效。看到这个：[CSS - 为什么百分比高度不起作用？](https://stackoverflow.com/questions/5657964/css-percentage-height)

# c - 将西里尔文转换为拉丁文 C

> ID：13719127
> 
> 赞同：0
> 
> 时间：2012-12-05T08:37:07.587
> 
> 标签：c, linux, string, utf-8

如何制作从 UTF8 Cyrillic 转换为 UTF8 Latin 字符的函数？我知道我应该制作字符表，但我的主要问题是如何表示字符串（在 C ，Linux OS 中）？作为 char* 或 int* （由于 UTF8 的大小）？

```
void convert(unsigned char* str) {
    if(str[0] == 'A' ) str[0] = 0xd090; // Cyrillic A
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:41:35.130

您不能将 a 替换`char`为`int`(or `short`)，因为它不适合 a `char`。要么将拉丁字符读入`wchar_t`数组，要么为西里尔字符使用单独的输出数组。

# matlab - 在 Matlab 中，将图像写入 AVI 而不使用 VideoWriter 显示

> ID：13719138
> 
> 赞同：2
> 
> 时间：2012-12-05T08:38:27.080
> 
> 标签：matlab, image-processing, video-capture

我正在尝试将循环中的图像写入 AVI 文件。现在，我正在使用 VideoWriter 和 getframe 来实现这一目标。代码通常是这样的：

```
FoodVideo = VideoWriter('tempp.avi');
FoodVideo.FrameRate = 25;
open(FoodVideo);
hh=figure('Visible','off');
for i=1:20
  imshow(example_image{i});
  hold on;
  text(100,100,sprintf('Frame Number: %d',i));
  hold off;
  currFrame = getframe(hh);
  writeVideo(FoodVideo,currFrame);
end
close(FoodVideo); 
```

问题是 getframe 在写入之前显示图像。我想不出一种将文本合并到图像数据中的方法，所以我消除了这种处理方式（使用 im2frame ...）。我知道我可以使用 avifile 和 addframe，但我想使用 VideoWriter，因为 matlab 说 avifile 将被删除......有没有办法使用 VideoWriter 编写图像而不先显示？

另一个相关问题：当​​我运行我的代码时，似乎我捕获的是我的屏幕而不是图形；我最近换了一台电脑，这种情况只发生在新电脑上。有没有人知道为什么会这样？

谢谢，阿维拉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:30:56.057

经过一番搜索，我设法找到了解决方案。我正在使用硬拷贝功能将文本合并到图像数据中，然后使用 im2frame 我可以将其更改为适合与 VideoWriter 一起使用的格式。这似乎完美地工作：

```
 orig_mode = get(hfig, 'PaperPositionMode');
      set(hfig, 'PaperPositionMode', 'auto');
      cdata = hardcopy(hfig, '-Dzbuffer', '-r0');
      set(hfig, 'PaperPositionMode', orig_mode);
      currFrame = im2frame(cdata); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:40:52.900

即使这不能回答您关于 VideoWriter 的问题，也可能会有所帮助。

使用 matlab 创建视频时，我通常会导出一系列 jpeg 或 png。我什至不接触 matlab 中的视频功能。然后，我使用[MEncoder](http://en.wikipedia.org/wiki/MEncoder)（它是 MPlayer 项目的一部分）将图像系列转换为视频。通过这样做，您可以规避许多与 matlab 相关的问题并获得更好的视频文件。

# iphone - 使用 UIBezierPath 绘制图形曲线

> ID：13719143
> 
> 赞同：19
> 
> 时间：2012-12-05T08:38:59.670
> 
> 标签：iphone, objective-c, ios, core-graphics, uibezierpath

我正在我的应用程序中绘制图表。我的问题是我想将连接顶点的线绘制为曲线。目前我正在用`UIBezierPath`'s function绘制它们`addLineToPoint:`。我想把它们画成曲线。我很清楚它`UIBezierPath`具有以下两个功能来支持此功能。

三次曲线：`addCurveToPoint:controlPoint1:controlPoint2:` 二次曲线：`addQuadCurveToPoint:controlPoint:`

但问题是我没有控制点。我只有两个端点。我都没有找到确定控制点的方法/公式。有人能帮我一下吗？如果有人可以提出一些替代方案，我将不胜感激......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-08-13T15:07:45.120

**扩展 Abid Hussain 在 12 年 12 月 5 日的回答。**

我实现了代码，它工作但结果看起来像这样： ![在此处输入图像描述](../Images/77488c4e749a62bd6ec90cb45a1b568f.png)

稍加调整，我就能得到我想要的： ![在此处输入图像描述](../Images/24ddecef7d610b3a801e74a6da7a12ff.png)

我所做的是将QuadCurveToPoint 也添加到中点，使用中点作为控制点。以下是基于 Abid 示例的代码；希望它可以帮助某人。

```
+ (UIBezierPath *)quadCurvedPathWithPoints:(NSArray *)points
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    NSValue *value = points[0];
    CGPoint p1 = [value CGPointValue];
    [path moveToPoint:p1];

    if (points.count == 2) {
        value = points[1];
        CGPoint p2 = [value CGPointValue];
        [path addLineToPoint:p2];
        return path;
    }

    for (NSUInteger i = 1; i < points.count; i++) {
        value = points[i];
        CGPoint p2 = [value CGPointValue];

        CGPoint midPoint = midPointForPoints(p1, p2);
        [path addQuadCurveToPoint:midPoint controlPoint:controlPointForPoints(midPoint, p1)];
        [path addQuadCurveToPoint:p2 controlPoint:controlPointForPoints(midPoint, p2)];

        p1 = p2;
    }
    return path;
}

static CGPoint midPointForPoints(CGPoint p1, CGPoint p2) {
    return CGPointMake((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);
}

static CGPoint controlPointForPoints(CGPoint p1, CGPoint p2) {
    CGPoint controlPoint = midPointForPoints(p1, p2);
    CGFloat diffY = abs(p2.y - controlPoint.y);

    if (p1.y < p2.y)
        controlPoint.y += diffY;
    else if (p1.y > p2.y)
        controlPoint.y -= diffY;

    return controlPoint;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-10-23T13:42:18.673

使用@user1244109 的答案，我在 Swift 5 中实现了更好的算法。 ![图表与我的实现](../Images/731b70e2e4111bfe1498c19d515a9ea3.png)

```
class GraphView: UIView {

    var data: [CGFloat] = [2, 6, 12, 4, 5, 7, 5, 6, 6, 3] {
        didSet {
            setNeedsDisplay()
        }
    }

    func coordYFor(index: Int) -> CGFloat {
        return bounds.height - bounds.height * data[index] / (data.max() ?? 0)
    }

    override func draw(_ rect: CGRect) {

        let path = quadCurvedPath()

        UIColor.black.setStroke()
        path.lineWidth = 1
        path.stroke()
    }

    func quadCurvedPath() -> UIBezierPath {
        let path = UIBezierPath()
        let step = bounds.width / CGFloat(data.count - 1)

        var p1 = CGPoint(x: 0, y: coordYFor(index: 0))
        path.move(to: p1)

        drawPoint(point: p1, color: UIColor.red, radius: 3)

        if (data.count == 2) {
            path.addLine(to: CGPoint(x: step, y: coordYFor(index: 1)))
            return path
        }

        var oldControlP: CGPoint?

        for i in 1..<data.count {
            let p2 = CGPoint(x: step * CGFloat(i), y: coordYFor(index: i))
            drawPoint(point: p2, color: UIColor.red, radius: 3)
            var p3: CGPoint?
            if i < data.count - 1 {
                p3 = CGPoint(x: step * CGFloat(i + 1), y: coordYFor(index: i + 1))
            }

            let newControlP = controlPointForPoints(p1: p1, p2: p2, next: p3)

            path.addCurve(to: p2, controlPoint1: oldControlP ?? p1, controlPoint2: newControlP ?? p2)

            p1 = p2
            oldControlP = antipodalFor(point: newControlP, center: p2)
        }
        return path;
    }

    /// located on the opposite side from the center point
    func antipodalFor(point: CGPoint?, center: CGPoint?) -> CGPoint? {
        guard let p1 = point, let center = center else {
            return nil
        }
        let newX = 2 * center.x - p1.x
        let diffY = abs(p1.y - center.y)
        let newY = center.y + diffY * (p1.y < center.y ? 1 : -1)

        return CGPoint(x: newX, y: newY)
    }

    /// halfway of two points
    func midPointForPoints(p1: CGPoint, p2: CGPoint) -> CGPoint {
        return CGPoint(x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2);
    }

    /// Find controlPoint2 for addCurve
    /// - Parameters:
    ///   - p1: first point of curve
    ///   - p2: second point of curve whose control point we are looking for
    ///   - next: predicted next point which will use antipodal control point for finded
    func controlPointForPoints(p1: CGPoint, p2: CGPoint, next p3: CGPoint?) -> CGPoint? {
        guard let p3 = p3 else {
            return nil
        }

        let leftMidPoint  = midPointForPoints(p1: p1, p2: p2)
        let rightMidPoint = midPointForPoints(p1: p2, p2: p3)

        var controlPoint = midPointForPoints(p1: leftMidPoint, p2: antipodalFor(point: rightMidPoint, center: p2)!)

        if p1.y.between(a: p2.y, b: controlPoint.y) {
            controlPoint.y = p1.y
        } else if p2.y.between(a: p1.y, b: controlPoint.y) {
            controlPoint.y = p2.y
        }

        let imaginContol = antipodalFor(point: controlPoint, center: p2)!
        if p2.y.between(a: p3.y, b: imaginContol.y) {
            controlPoint.y = p2.y
        }
        if p3.y.between(a: p2.y, b: imaginContol.y) {
            let diffY = abs(p2.y - p3.y)
            controlPoint.y = p2.y + diffY * (p3.y < p2.y ? 1 : -1)
        }

        // make lines easier
        controlPoint.x += (p2.x - p1.x) * 0.1

        return controlPoint
    }

    func drawPoint(point: CGPoint, color: UIColor, radius: CGFloat) {
        let ovalPath = UIBezierPath(ovalIn: CGRect(x: point.x - radius, y: point.y - radius, width: radius * 2, height: radius * 2))
        color.setFill()
        ovalPath.fill()
    }

}

extension CGFloat {
    func between(a: CGFloat, b: CGFloat) -> Bool {
        return self >= Swift.min(a, b) && self <= Swift.max(a, b)
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-05T08:46:33.743

如果您只有两个点，那么您无法真正将它们外推到曲线中。

如果你有两个以上的点（即沿着曲线的几个点），那么你可以粗略地画一条曲线来跟随它们。

如果您执行以下操作...

好的，假设你有 5 分。p1、p2、p3、p4 和 p5。您需要计算出每对点之间的中点。m1 = p1 和 p2 的中点（以此类推）...

所以你有 m1、m2、m3 和 m4。

现在您可以使用中点作为曲线部分的终点，并将这些点作为四边形曲线的控制点...

所以...

移动到点 m1。将四边形曲线添加到点 m2，以 p2 作为控制点。

将四边形曲线添加到点 m3，以 p3 作为控制点。

将四边形曲线添加到点 m4，以 p4 作为控制点。

等等...

这将使您远离曲线的末端（目前不记得如何获得它们，抱歉）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-05T12:58:48.633

所以我根据@Fogmeister 的回答找到了解决方法。

```
 UIBezierPath *path = [UIBezierPath bezierPath];
    [path setLineWidth:3.0];
    [path setLineCapStyle:kCGLineCapRound];
    [path setLineJoinStyle:kCGLineJoinRound];

    // actualPoints are my points array stored as NSValue

    NSValue *value = [actualPoints objectAtIndex:0];
    CGPoint p1 = [value CGPointValue];
    [path moveToPoint:p1];

    for (int k=1; k<[actualPoints count];k++) {

        NSValue *value = [actualPoints objectAtIndex:k];
        CGPoint p2 = [value CGPointValue];

        CGPoint centerPoint = CGPointMake((p1.x+p2.x)/2, (p1.y+p2.y)/2);

        // See if your curve is decreasing or increasing
        // You can optimize it further by finding point on normal of line passing through midpoint 

        if (p1.y<p2.y) {
             centerPoint = CGPointMake(centerPoint.x, centerPoint.y+(abs(p2.y-centerPoint.y)));
        }else if(p1.y>p2.y){
             centerPoint = CGPointMake(centerPoint.x, centerPoint.y-(abs(p2.y-centerPoint.y)));
        }

        [path addQuadCurveToPoint:p2 controlPoint:centerPoint];
        p1 = p2;
    }

    [path stroke]; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-07T09:08:21.113

我在这方面做了一些工作，并从 Catmull-Rom 样条曲线中得到了很好的结果。这是一个采用 CGPoints 数组（存储为 NSValues）并将线添加到给定视图的方法。

```
- (void)addBezierPathBetweenPoints:(NSArray *)points
                        toView:(UIView *)view
                     withColor:(UIColor *)color
                andStrokeWidth:(NSUInteger)strokeWidth
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    float granularity = 100;

    [path moveToPoint:[[points firstObject] CGPointValue]];

    for (int index = 1; index < points.count - 2 ; index++) {

        CGPoint point0 = [[points objectAtIndex:index - 1] CGPointValue];
        CGPoint point1 = [[points objectAtIndex:index] CGPointValue];
        CGPoint point2 = [[points objectAtIndex:index + 1] CGPointValue];
        CGPoint point3 = [[points objectAtIndex:index + 2] CGPointValue];

        for (int i = 1; i < granularity ; i++) {
            float t = (float) i * (1.0f / (float) granularity);
            float tt = t * t;
            float ttt = tt * t;

            CGPoint pi;
            pi.x = 0.5 * (2*point1.x+(point2.x-point0.x)*t + (2*point0.x-5*point1.x+4*point2.x-point3.x)*tt + (3*point1.x-point0.x-3*point2.x+point3.x)*ttt);
            pi.y = 0.5 * (2*point1.y+(point2.y-point0.y)*t + (2*point0.y-5*point1.y+4*point2.y-point3.y)*tt + (3*point1.y-point0.y-3*point2.y+point3.y)*ttt);

            if (pi.y > view.frame.size.height) {
                pi.y = view.frame.size.height;
            }
            else if (pi.y < 0){
                pi.y = 0;
            }

            if (pi.x > point0.x) {
                [path addLineToPoint:pi];
            }
        }

        [path addLineToPoint:point2];
    }

    [path addLineToPoint:[[points objectAtIndex:[points count] - 1] CGPointValue]];

    CAShapeLayer *shapeView = [[CAShapeLayer alloc] init];

    shapeView.path = [path CGPath];

    shapeView.strokeColor = color.CGColor;
    shapeView.fillColor = [UIColor clearColor].CGColor;
    shapeView.lineWidth = strokeWidth;
    [shapeView setLineCap:kCALineCapRound];

    [view.layer addSublayer:shapeView];
 } 
```

我在这里使用它[https://github.com/johnyorke/JYGraphViewController](https://github.com/johnyorke/JYGraphViewController)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-05T08:51:13.943

一个好的解决方案是通过您的点创建一条直线`UIBezierPath`，然后使用样条曲线来弯曲该线。查看另一个答案，它为 UIBezierPath 提供了一个执行 Catmull-Rom 样条的类别。[绘制平滑曲线 - 所需方法](https://stackoverflow.com/questions/8702696/drawing-smooth-curves-methods-needed)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-01T03:36:53.967

在分析来自@roman-filippov 的代码时，我对代码进行了一些简化。这是一个完整的 Swift Playground 版本，下面是一个 ObjC 版本。

我发现如果 x 增量不规则，那么当点在 x 轴上靠得很近时，原始算法会创建一些不幸的逆行线。简单地将控制点限制为不超过以下 x 值似乎可以解决问题，尽管我对此没有数学依据，只是实验。有两个部分标记为 //** added` 实现了此更改。

```
import UIKit
import PlaygroundSupport

infix operator °
func °(x: CGFloat, y: CGFloat) -> CGPoint {
    return CGPoint(x: x, y: y)
}

extension UIBezierPath {
    func drawPoint(point: CGPoint, color: UIColor, radius: CGFloat) {
        let ovalPath = UIBezierPath(ovalIn: CGRect(x: point.x - radius, y: point.y - radius, width: radius * 2, height: radius * 2))
        color.setFill()
        ovalPath.fill()
    }

    func drawWithLine (point: CGPoint, color: UIColor) {
        let startP = self.currentPoint
        self.addLine(to: point)
        drawPoint(point: point, color: color, radius: 3)
        self.move(to: startP)
    }

}

class TestView : UIView {
    var step: CGFloat = 1.0;
    var yMaximum: CGFloat = 1.0
    var xMaximum: CGFloat = 1.0
    var data: [CGPoint] = [] {
        didSet {
            xMaximum = data.reduce(-CGFloat.greatestFiniteMagnitude, { max($0, $1.x) })
            yMaximum = data.reduce(-CGFloat.greatestFiniteMagnitude, { max($0, $1.y) })
            setNeedsDisplay()
        }
    }

    func scale(point: CGPoint) -> CGPoint {
        return  CGPoint(x: bounds.width * point.x / xMaximum ,
                        y: (bounds.height - bounds.height * point.y / yMaximum))
    }

    override func draw(_ rect: CGRect) {
        if data.count <= 1 {
            return
        }
        let path = cubicCurvedPath()

        UIColor.black.setStroke()
        path.lineWidth = 1
        path.stroke()
    }

    func cubicCurvedPath() -> UIBezierPath {
        let path = UIBezierPath()

        var p1 = scale(point: data[0])
        path.drawPoint(point: p1, color: UIColor.red, radius: 3)
        path.move(to: p1)
        var oldControlP = p1

        for i in 0..<data.count {
            let p2 = scale(point:data[i])
            path.drawPoint(point: p2, color: UIColor.red, radius: 3)
            var p3: CGPoint? = nil
            if i < data.count - 1 {
                p3 = scale(point:data [i+1])
            }

            let newControlP = controlPointForPoints(p1: p1, p2: p2, p3: p3)
            //uncomment the following four lines to graph control points
            //if let controlP = newControlP {
            //    path.drawWithLine(point:controlP, color: UIColor.blue)
            //}
            //path.drawWithLine(point:oldControlP, color: UIColor.gray)

            path.addCurve(to: p2, controlPoint1: oldControlP , controlPoint2: newControlP ?? p2)
            oldControlP = imaginFor(point1: newControlP, center: p2) ?? p1
            //***added to algorithm
            if let p3 = p3 {
                if oldControlP.x > p3.x { oldControlP.x = p3.x }
            }
            //***
            p1 = p2
        }
        return path;
    }

    func imaginFor(point1: CGPoint?, center: CGPoint?) -> CGPoint? {
        //returns "mirror image" of point: the point that is symmetrical through center.
        //aka opposite of midpoint; returns the point whose midpoint with point1 is center)
        guard let p1 = point1, let center = center else {
            return nil
        }
        let newX = center.x + center.x - p1.x
        let newY = center.y + center.y - p1.y

        return CGPoint(x: newX, y: newY)
    }

    func midPointForPoints(p1: CGPoint, p2: CGPoint) -> CGPoint {
        return CGPoint(x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2);
    }

    func clamp(num: CGFloat, bounds1: CGFloat, bounds2: CGFloat) -> CGFloat {
        //ensure num is between bounds.
        if (bounds1 < bounds2) {
            return min(max(bounds1,num),bounds2);
        } else {
            return min(max(bounds2,num),bounds1);
        }
    }

    func controlPointForPoints(p1: CGPoint, p2: CGPoint, p3: CGPoint?) -> CGPoint? {
        guard let p3 = p3 else {
            return nil
        }

        let leftMidPoint  = midPointForPoints(p1: p1, p2: p2)
        let rightMidPoint = midPointForPoints(p1: p2, p2: p3)
        let imaginPoint = imaginFor(point1: rightMidPoint, center: p2)

        var controlPoint = midPointForPoints(p1: leftMidPoint, p2: imaginPoint!)

        controlPoint.y = clamp(num: controlPoint.y, bounds1: p1.y, bounds2: p2.y)

        let flippedP3 = p2.y + (p2.y-p3.y)

        controlPoint.y = clamp(num: controlPoint.y, bounds1: p2.y, bounds2: flippedP3);
        //***added:
        controlPoint.x = clamp (num:controlPoint.x, bounds1: p1.x, bounds2: p2.x)
        //***
        // print ("p1: \(p1), p2: \(p2), p3: \(p3), LM:\(leftMidPoint), RM:\(rightMidPoint), IP:\(imaginPoint), fP3:\(flippedP3), CP:\(controlPoint)")
        return controlPoint
    }

}

let u = TestView(frame: CGRect(x: 0, y: 0, width: 700, height: 600));
u.backgroundColor = UIColor.white

PlaygroundPage.current.liveView = u
u.data = [0.5 ° 1, 1 ° 3, 2 ° 5, 4 ° 9, 8 ° 15, 9.4 ° 8, 9.5 ° 10, 12 ° 4, 13 ° 10, 15 ° 3, 16 ° 1] 
```

和 ObjC 中的相同代码（或多或少。这不包括绘图例程本身，它确实允许点数组包含丢失的数据

```
+ (UIBezierPath *)pathWithPoints:(NSArray <NSValue *> *)points open:(BOOL) open {
    //based on Roman Filippov code: http://stackoverflow.com/a/40203583/580850
    //open means allow gaps in path.
    UIBezierPath *path = [UIBezierPath bezierPath];
    CGPoint p1 = [points[0] CGPointValue];
    [path moveToPoint:p1];
    CGPoint oldControlPoint = p1;
    for (NSUInteger pointIndex = 1; pointIndex< points.count; pointIndex++) {
        CGPoint p2 = [points[pointIndex]  CGPointValue];  //note: mark missing data with CGFloatMax

        if (p1.y >= CGFloatMax || p2.y >= CGFloatMax) {
            if (open) {
                [path moveToPoint:p2];
            } else {
                [path addLineToPoint:p2];
            }
            oldControlPoint = p2;
        } else {
            CGPoint p3 = CGPointZero;
            if (pointIndex +1 < points.count) p3 = [points[pointIndex+1] CGPointValue] ;
            if (p3.y >= CGFloatMax) p3 = CGPointZero;
            CGPoint newControlPoint = controlPointForPoints2(p1, p2, p3);
            if (!CGPointEqualToPoint( newControlPoint, CGPointZero)) {
                [path addCurveToPoint: p2 controlPoint1:oldControlPoint controlPoint2: newControlPoint];
                oldControlPoint = imaginForPoints( newControlPoint,  p2);
                //**added to algorithm
                if (! CGPointEqualToPoint(p3,CGPointZero)) {
                   if (oldControlPoint.x > p3.x ) {
                       oldControlPoint.x = p3.x;
                   }
                //***
            } else {
                [path addCurveToPoint: p2 controlPoint1:oldControlPoint controlPoint2: p2];
                oldControlPoint = p2;
            }
        }
        p1 = p2;
    }
    return path;
}

static CGPoint imaginForPoints(CGPoint point, CGPoint center) {
    //returns "mirror image" of point: the point that is symmetrical through center.
    if (CGPointEqualToPoint(point, CGPointZero) || CGPointEqualToPoint(center, CGPointZero)) {
        return CGPointZero;
    }
    CGFloat newX = center.x + (center.x-point.x);
    CGFloat newY = center.y + (center.y-point.y);
    if (isinf(newY)) {
        newY = BEMNullGraphValue;
    }
    return CGPointMake(newX,newY);
}

static CGFloat clamp(CGFloat num, CGFloat bounds1, CGFloat bounds2) {
    //ensure num is between bounds.
    if (bounds1 < bounds2) {
        return MIN(MAX(bounds1,num),bounds2);
    } else {
        return MIN(MAX(bounds2,num),bounds1);
    }
}

static CGPoint controlPointForPoints2(CGPoint p1, CGPoint p2, CGPoint p3) {
    if (CGPointEqualToPoint(p3, CGPointZero)) return CGPointZero;
    CGPoint leftMidPoint = midPointForPoints(p1, p2);
    CGPoint rightMidPoint = midPointForPoints(p2, p3);
    CGPoint imaginPoint = imaginForPoints(rightMidPoint, p2);
    CGPoint controlPoint = midPointForPoints(leftMidPoint, imaginPoint);

    controlPoint.y = clamp(controlPoint.y, p1.y, p2.y);

    CGFloat flippedP3 = p2.y + (p2.y-p3.y);

    controlPoint.y = clamp(controlPoint.y, p2.y, flippedP3);
   //**added to algorithm
    controlPoint.x = clamp(controlPoint.x, p1.x, p2.x);
   //**
    return controlPoint;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-05T20:41:43.600

这是 @user1244109 的答案转换为 Swift 3

```
private func quadCurvedPath(with points:[CGPoint]) -> UIBezierPath {
   let path = UIBezierPath()
   var p1 = points[0]

   path.move(to: p1)

   if points.count == 2 {
     path.addLine(to: points[1])
     return path
   }

   for i in 1..<points.count {
    let mid = midPoint(for: (p1, points[i]))
     path.addQuadCurve(to: mid,
                     controlPoint: controlPoint(for: (mid, p1)))
     path.addQuadCurve(to: points[i],
                    controlPoint: controlPoint(for: (mid, points[i])))
     p1 = points[i]
   }
  return path
}

private func midPoint(for points: (CGPoint, CGPoint)) -> CGPoint {
   return CGPoint(x: (points.0.x + points.1.x) / 2 , y: (points.0.y + points.1.y) / 2)
}

private func controlPoint(for points: (CGPoint, CGPoint)) -> CGPoint {
   var controlPoint = midPoint(for: points)
   let diffY = abs(points.1.y - controlPoint.y)

   if points.0.y < points.1.y {
     controlPoint.y += diffY
   } else if points.0.y > points.1.y {
     controlPoint.y -= diffY
   }
   return controlPoint
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-04-27T18:31:16.857

如果您需要每个点附近的“水平”曲线：

```
let path = createCurve(from: points, withSmoothness: 0.5) // 0.5 smoothness 
```

[![在此处输入图像描述](../Images/571470f09dd3dea807e97fc05f39a8e5.png)](https://i.stack.imgur.com/AOY4Z.png)

```
let path = createCurve(from: points, withSmoothness: 0) // 0 smoothness 
```

[![在此处输入图像描述](../Images/20929da9973de7160e9a888ddeeee9cc.png)](https://i.stack.imgur.com/yJ1kk.png)

```
 /// Create UIBezierPath
    ///
    /// - Parameters:
    ///   - points: the points
    ///   - smoothness: the smoothness: 0 - no smooth at all, 1 - maximum smoothness
    private func createCurve(from points: [CGPoint], withSmoothness smoothness: CGFloat, addZeros: Bool = false) -> UIBezierPath {

        let path = UIBezierPath()
        guard points.count > 0 else { return path }
        var prevPoint: CGPoint = points.first!
        let interval = getXLineInterval()
        if addZeros {
            path.move(to: CGPoint(x: interval.origin.x, y: interval.origin.y))
            path.addLine(to: points[0])
        }
        else {
            path.move(to: points[0])
        }
        for i in 1..<points.count {
            let cp = controlPoints(p1: prevPoint, p2: points[i], smoothness: smoothness)
            path.addCurve(to: points[i], controlPoint1: cp.0, controlPoint2: cp.1)
            prevPoint = points[i]
        }
        if addZeros {
            path.addLine(to: CGPoint(x: prevPoint.x, y: interval.origin.y))
        }
        return path
    }

    /// Create control points with given smoothness
    ///
    /// - Parameters:
    ///   - p1: the first point
    ///   - p2: the second point
    ///   - smoothness: the smoothness: 0 - no smooth at all, 1 - maximum smoothness
    /// - Returns: two control points
    private func controlPoints(p1: CGPoint, p2: CGPoint, smoothness: CGFloat) -> (CGPoint, CGPoint) {
        let cp1: CGPoint!
        let cp2: CGPoint!
        let percent = min(1, max(0, smoothness))
        do {
            var cp = p2
            // Apply smoothness
            let x0 = max(p1.x, p2.x)
            let x1 = min(p1.x, p2.x)
            let x = x0 + (x1 - x0) * percent
            cp.x = x
            cp2 = cp
        }
        do {
            var cp = p1
            // Apply smoothness
            let x0 = min(p1.x, p2.x)
            let x1 = max(p1.x, p2.x)
            let x = x0 + (x1 - x0) * percent
            cp.x = x
            cp1 = cp
        }
        return (cp1, cp2)
    }

    /// Defines interval width, height (not used in this example) and coordinate of the first interval.
    /// - Returns: (x0, y0, step, height)
    internal func getXLineInterval() -> CGRect {
        return CGRect.zero
    } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-01-07T01:04:35.227

此答案是 Roman Filippov 答案的修改版本，以使其在 SwiftUI 上运行。Roman's 是我测试过的最好的版本，并且能够开始工作。

```
extension Path {

    /// This draws a curved path from a path of points given.
    /// Modified from https://stackoverflow.com/q/13719143/515455
    mutating func quadCurvedPath(from data: [CGPoint]) {
        var prevousPoint: CGPoint = data.first!

        self.move(to: prevousPoint)

        if (data.count == 2) {
            self.addLine(to: data[1])
            return
        }

        var oldControlPoint: CGPoint?

        for i in 1..<data.count {
            let currentPoint = data[i]
            var nextPoint: CGPoint?
            if i < data.count - 1 {
                nextPoint = data[i + 1]
            }

            let newControlPoint = controlPointForPoints(p1: prevousPoint, p2: currentPoint, next: nextPoint)

            self.addCurve(to: currentPoint, control1: oldControlPoint ?? prevousPoint, control2: newControlPoint ?? currentPoint)

            prevousPoint = currentPoint
            oldControlPoint = antipodalFor(point: newControlPoint, center: currentPoint)
        }
    }

    /// Located on the opposite side from the center point
    func antipodalFor(point: CGPoint?, center: CGPoint?) -> CGPoint? {
        guard let p1 = point, let center = center else {
            return nil
        }
        let newX = 2.0 * center.x - p1.x
        let newY = 2.0 * center.y - p1.y

        return CGPoint(x: newX, y: newY)
    }

    /// Find the mid point of two points
    func midPointForPoints(p1: CGPoint, p2: CGPoint) -> CGPoint {
        return CGPoint(x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2);
    }

    /// Find control point
    /// - Parameters:
    ///   - p1: first point of curve
    ///   - p2: second point of curve whose control point we are looking for
    ///   - next: predicted next point which will use antipodal control point for finded
    func controlPointForPoints(p1: CGPoint, p2: CGPoint, next p3: CGPoint?) -> CGPoint? {
        guard let p3 = p3 else {
            return nil
        }

        let leftMidPoint  = midPointForPoints(p1: p1, p2: p2)
        let rightMidPoint = midPointForPoints(p1: p2, p2: p3)

        var controlPoint = midPointForPoints(p1: leftMidPoint, p2: antipodalFor(point: rightMidPoint, center: p2)!)

        if p1.y.between(a: p2.y, b: controlPoint.y) {
            controlPoint.y = p1.y
        } else if p2.y.between(a: p1.y, b: controlPoint.y) {
            controlPoint.y = p2.y
        }

        let imaginContol = antipodalFor(point: controlPoint, center: p2)!
        if p2.y.between(a: p3.y, b: imaginContol.y) {
            controlPoint.y = p2.y
        }
        if p3.y.between(a: p2.y, b: imaginContol.y) {
            let diffY = abs(p2.y - p3.y)
            controlPoint.y = p2.y + diffY * (p3.y < p2.y ? 1 : -1)
        }

        // make lines easier
        controlPoint.x += (p2.x - p1.x) * 0.1

        return controlPoint
    }
}

extension CGFloat {
    func between(a: CGFloat, b: CGFloat) -> Bool {
        return self >= Swift.min(a, b) && self <= Swift.max(a, b)
    }
} 
```

然后你可以像这样在 SwiftUI 代码中使用它：

```
 ZStack(alignment: .topLeading) {
        // Draw the line.
        Path { path in
            path.quadCurvedPath(from: linePoints)
        }.stroke(graphData.colour, style: StrokeStyle(lineWidth: 4, lineCap: .round, lineJoin: .round))
    } 
```

# java - 使用日期时出现 JSP JasperException

> ID：13719144
> 
> 赞同：0
> 
> 时间：2012-12-05T08:38:59.010
> 
> 标签：java, jsp

我正在尝试提交一个数字作为输入，但我收到了这个错误。我不知道出了什么问题！请给出你的见解

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /SubmitMovie.jsp at line 14

11: int id=Integer.parseInt(request.getParameter("rowId").trim());
12: int membid=0;
13: String[] values=request.getParameterValues("memb");
14: int len=values.length;
15: for(int i=0;i<len;i++)
16: {
17:     if(!values[i].equalsIgnoreCase(""))

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:521)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:430)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause 

java.lang.NullPointerException
    org.apache.jsp.SubmitMovie_jsp._jspService(SubmitMovie_jsp.java:67)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:20:05.110

从给定的堆栈跟踪中，您得到`NullPointerException`

```
11: int id=Integer.parseInt(request.getParameter("rowId").trim());
12: int membid=0;
13: String[] values=request.getParameterValues("memb");
14: int len=values.length;
15: for(int i=0;i<len;i++)
16: {
17:     if(!values[i].equalsIgnoreCase("")) 
```

检查几件事

1.  `values`当您尝试访问时，字符串数组不为空`values.length`
2.  `rowId`始终不为空，非空并且在您解析它以转换为时出现在参数中`Integer`

# javascript - IE8 错误概述

> ID：13719145
> 
> 赞同：1
> 
> 时间：2012-12-05T08:39:00.730
> 
> 标签：javascript, internet-explorer, internet-explorer-8

IE8-Javascript错误和解决方法是否有任何有用的概述/列表？如：

```
e.preventDefault() --> e.returnValue = true 
```

或者

```
node.style.width = 500 --> node.style.width = "500px"; 
```

或者

```
e.stopPropagation() --> e.cancelBubble = true; 
```

我在网上找到了类似[this](http://haslayout.net/css/)和[this](http://jhop.me/ie8-bugs)的东西。但这些只是 css 错误和一个 javascript 错误。

我需要这个来修复我的应用程序中的错误。

# php - 从 iPhone 发布到服务器时图像已损坏

> ID：13719150
> 
> 赞同：1
> 
> 时间：2012-12-05T08:39:11.117
> 
> 标签：php, iphone, web-services

这是我将图像上传到 php 服务器的代码，但图像在服务器上作为损坏的图像上传。下面是我的代码，请告诉我问题..我已经尝试使用可可休息客户端，图像正在从中正确上传。

```
 NSString *filename = @"connect-blue.png";
    UIImage *image = [UIImage imageNamed:filename];
    NSMutableURLRequest * request= [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data;    boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
    NSMutableData *postbody = [NSMutableData data];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"profile_image\"; filename=\"%@\"\r\n",filename] dataUsingEncoding:NSUTF8StringEncoding]];
   [postbody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [postbody appendData:[postString dataUsingEncoding:NSUTF8StringEncoding]];
    NSData *imagedata = UIImageJPEGRepresentation(image,1.0f);

    [postbody appendData:[NSData dataWithData:imagedata]];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary]  dataUsingEncoding:NSUTF8StringEncoding]]; 
```

php代码在这里

```
if(!empty($_FILES)){
//
  $imgname=$_FILES['image']['name'];
         $a=pathinfo($imgname);

  if(!empty($a['extension'])){  
   $img_name=$a['filename'];
   $img_ext=$a['extension'];
 }

  else

  {

    $img_name='';

   $img_ext='';

   }

   $img_pre=mktime();

   $image1=$img_pre."_".$imgname;
  move_uploaded_file($_FILES['image']['tmp_name'],  "uploads/images/" .  $image1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:13:01.260

我找到了解决方案[图片上传](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:50:42.640

您可以管理这两种技术的图像框架我的意思是当您从 iphone 发送图像时，图像的大小在 php 中仍然相同我认为您管理 Async Image 类

# java - 禁用 HTML 输入时的 NullPointer

> ID：13719152
> 
> 赞同：0
> 
> 时间：2012-12-05T08:39:24.160
> 
> 标签：java, javascript, html, servlets, nullreferenceexception

> **可能重复：**
> [<h:selectOneListbox disabled=true 导致 NullPointerException](https://stackoverflow.com/questions/10672614/hselectonelistbox-disabled-true-causing-nullpointerexception)

我真的不知道要搜索什么，这对我来说确实有点奇怪。

如果我禁用输入`type=textfield`项

```
$('#kundennr').attr("disabled","disabled"); 
```

我的表单正在调用一个 Servlet，我想在其中读取`kundennr` 它给我的字段的值`Nullpointerexeption`。但是如果我让该字段启用，它会给我该字段的值

```
request.getParameter("kundennummer"); 
```

那么如何`nullpointer`在没有 Java Servlet 的情况下禁用输入字段呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:44:14.043

提交时忽略 DOM 中的禁用元素，您需要设置*readonly*属性。

请记住，从客户端提交的任何内容都可能受到操纵（例如，我可以更改该号码并将其发送给您，而不管您是否将其设置为只读），因此请确保在采取行动之前验证服务器端的任何关键信息至此！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T08:49:26.007

不发送禁用的输入字段。您可能想使用隐藏字段。你想要完成什么？尝试 readonly="readonly" - 应该发布但仍与标题一起发送 - 如果信息需要在表单中可见 - 如果不是，那么隐藏字段是最好的。

# matlab - Matlab：如何使用 struct fun “就地”更新结构字段？

> ID：13719153
> 
> 赞同：6
> 
> 时间：2012-12-05T08:39:28.000
> 
> 标签：matlab

我有一个结构

```
s.a = [1 2 3];
s.b = [2 3 4 5];
s.c = [9, 6 ,3];
s.d = ... % etc. - you got the gist of it 
```

现在我想对存储在每个字段中的数据应用一个函数/操作并**修改**该字段的内容，即我要应用

```
s.a = myFun( s.a );
s.b = myFun( s.b );
s.c = myFun( s.c ); % etc. ... 
```

如果不明确写出上述所有字段，我该怎么做？我在想`structfun`- 但我不太确定如何完成这种“就地”修改......

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T08:48:04.430

对于不耐烦的读者，`structfun`解决方案在我的答案的底部:-) 但我首先要问自己......

使用循环有什么问题？以下示例显示了它是如何完成的：

```
%# An example structure
S.a = 2;
S.b = 3;

%# An example function
MyFunc = @(x) (x^2);

%# Retrieve the structure field names
Names = fieldnames(S);

%# Loop over the field-names and apply the function to each field
for n = 1:length(Names)
    S.(Names{n}) = MyFunc(S.(Names{n}));
end 
```

Matlab 函数，例如`arrayfun`并且`cellfun`通常[比显式循环慢](https://stackoverflow.com/questions/12522888/arrayfun-can-be-significantly-slower-than-an-explicit-loop-in-matlab-why)。我猜`structfun`可能会遇到同样的问题，那为什么还要麻烦呢？

但是，如果您坚持使用`structfun`它，可以这样做（为了强调通用性，我将示例稍微复杂一点）：

```
%# structfun solution
S.a = [2 4];
S.b = 3;
MyFunc = @(x) (x.^2);
S = structfun(MyFunc, S, 'UniformOutput', 0); 
```

# android - 如何在android中检索新拍摄的图片的图像路径？

> ID：13719155
> 
> 赞同：1
> 
> 时间：2012-12-05T08:39:27.770
> 
> 标签：android

我启动了一个 cam 意图，并想在我的应用程序中检索新拍摄的图片的图片路径。我怎样才能做到这一点？我需要这张图片的路径，以便我的后台服务可以使用它。

```
else if (requestCode == TAKE_PICTURE && resultCode == ActionActivity.RESULT_OK){
    Log.i(ACTION_ACTIVITY_TAG, "picture intent gives result ok");
    Bundle b = new Bundle();

    b.putSerializable("picUri", ??????);

    Intent i = new Intent();
    i.putExtras(b);
    i.setClass(this,CommentActivity.class);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:50:09.467

无需`putSerializable`用于从相机发送拍摄图像的 URI，只需从意图中检索 uri`onActivityResult`并将其作为字符串发送到另一个 Activity ：

```
else if (requestCode == TAKE_PICTURE && resultCode == ActionActivity.RESULT_OK){
    Log.i(ACTION_ACTIVITY_TAG, "picture intent gives result ok");
    Bundle b = new Bundle();
    Uri picuri = intent.getData();
    b.putString("picUri", picuri.toString());

    Intent i = new Intent();
    i.putExtras(b);
    i.setClass(this,CommentActivity.class); 
```

在`CommentActivity`活动中，您可以将图片 URI 检索为：

```
Intent i = getIntent();
Bundle extras = i.getExtras();

imguri = extras.getString("picUri");
Uri myUri = Uri.parse(imguri); 
```

# cvs - 找出 CVS 中的合并点

> ID：13719158
> 
> 赞同：1
> 
> 时间：2012-12-05T08:39:32.383
> 
> 标签：cvs

**主要问题：**有什么方法可以确定哪个分支在哪里/何时（我会记录日期、标签、提交，基本上是任何东西）哪个分支与另一个分支合并？

**不是那么简短的解释：**因为我在几个项目中都坚持使用 CVS，所以分支和合并是一场持续的艰苦战斗。在具有持续集成的更大的程序员团队中，跟踪分支（它们的用途，涉及的人员，可能更改的文件，...）和合并点（已集成的内容以及此后更改的内容) 是一个比任何人预期的更大的问题。虽然需要额外的信息，但要合并这些分支，首先要知道的是它最后一次合并的位置（或者如果过去没有合并，那么分支的起源点）。

**可能的解决方案**

*   *cvs rlog/log*会给我任何分支中任何文件的版本号，但不是分支起源的时间和版本，或者它是否合并到任何其他分支。
*   *`git log --graph --full-history --all`*会给我我想要和需要的东西，但由于 git 不是一种选择，这种嫉妒只会让我夜不能寐；）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T22:30:38.077

看一下这个！您可能正在寻找

```
cvs history -x [type]
cvs history -T 
```

-T 应该让您按标签搜索，-x G 应该让您获得有关成功合并的信息

这是给你的文档：

[http://cvsgui.sourceforge.net/howto/cvsdoc/cvs_16.html#SEC135](http://cvsgui.sourceforge.net/howto/cvsdoc/cvs_16.html#SEC135)

希望这可以帮助。

# qt - 获取进程的名称和用户

> ID：13719163
> 
> 赞同：1
> 
> 时间：2012-12-05T08:39:51.297
> 
> 标签：qt, process

如何通过 QT 获取进程名称及其用户名。

例如，在 windows 上，rundll32.exe 是一个名为“rundll32.exe”的进程，其用户名是用户的 windows 帐户名。但 svchost.exe 是一个进程，其用户名是“SYSTEM”

我需要在我的运行进程中获取我的进程的名称和它的 ID，以及用户名。我可以在 qt-forums 中找到答案：/

谢谢 ！

# android - 制作一个无法结束的应用程序

> ID：13719167
> 
> 赞同：0
> 
> 时间：2012-12-05T08:40:14.490
> 
> 标签：android, tablet, android-homebutton, kiosk-mode

对于我的社会，我将在公共场所的平板电脑上创建一个应用程序。除了我们的应用程序，我们不希望平板电脑用于其他任何用途。那么，如何“避开”主页按钮、任务列表等呢？我只想在平板电脑上看到我的应用程序（没有任务栏、系统按钮等）。

那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T08:42:00.660

是的，它确实。你需要的是把平板电脑放进去`kiosk mode`。[SureLock](http://www.42gears.com/surelock/surelockandroid.html)是实现这一目标的一种方式。如果你不想通过第三方软件，你应该编译你自己的 android 版本，自定义一些东西，比如启动器/设置。

# windows - 如何在一行中执行多个命令

> ID：13719174
> 
> 赞同：92
> 
> 时间：2012-12-05T08:40:49.153
> 
> 标签：windows, cmd

我知道 Unix 有以下命令可以在一行中执行多个命令，我该如何在 DOS 中执行此操作？

```
command1 ; command2 ; command3 ... 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-12-05T08:44:29.190

谷歌搜索给了我这个：

* * *

**`Command A & Command B`**

执行*Command A*，然后执行*Command B*（不评估任何内容）

* * *

**`Command A | Command B`**

执行*Command A*，并将其所有输出重定向到*Command B的输入*

* * *

**`Command A && Command B`**

执行*命令 A*，运行后评估错误级别，如果退出代码（错误级别）为 0，则才执行*命令 B*

* * *

**`Command A || Command B`**

执行*命令 A*，评估此命令的退出代码，如果它不是 0，则仅执行*命令 B*

* * *

# java - 在java中的菜单之间跳转

> ID：13719178
> 
> 赞同：0
> 
> 时间：2012-12-05T08:41:13.277
> 
> 标签：java, swing, user-interface, frames

我一直在用 Java 开发命令行程序一段时间，并且正在研究实现 GUI 解决方案的方法。我是新手，所以任何帮助都会非常有帮助。提前致谢。我最近问了另一个关于按钮的问题，但我现在有另一个问题。

我一直在从一本书中学习如何使用动作监听器来执行基于按钮的动作。然而，在书中，按钮只是简单地调用了一个产生文本输出的方法。

我需要一种方法来允许用户按下一个按钮，该按钮将他/她带到一个具有不同按钮/选项的新窗口，如果用户希望他们可以按下另一个按钮返回到前一个窗口。如果有人可以向我展示一个骨架解决方案，并在下面解释我的示例：

用户会看到两个按钮，“图书馆菜单”和“帐户菜单”，如果用户按下“图书馆菜单”，他们将被带到一个窗口，其中包含添加书籍、删除书籍等选项，最后一个按钮返回主页屏幕。如果用户按下“帐户菜单”，他们会看到一个新窗口/菜单，其中包含添加、删除、重命名等按钮，以及返回主屏幕/主菜单的最终按钮。

使用命令行这很简单，因为选择库会调用库类中的方法。该方法将有一个 switch case，它根据用户输入调用不同的方法，并且当用户输入“e”时，例如 switch case 有一个选项可以从方法中返回，即 return 语句将用户带回该方法最初调用它（在主屏幕中）。

我非常感谢有关此的任何帮助/建议/信息！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:50:35.353

通常不建议向用户呈现多个窗口或框架，它会很快变得混乱和烦人。

通常，如果您想切换视图，您应该使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，这将允许您更改用户主显示屏上的内容。

您还可以使用[JTabbedPane](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)，它允许用户根据需要在不同的视图之间移动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:55:46.407

您可以为每个“窗口”制作一个 JPanel，然后在 JFrame 中切换它。要拥有相同的设计，将来可以更改，您需要某种建模：添加按钮的生成步骤等。

使用 Action-s (AbstractAction) 有助于解耦，在 Model-View-Controller 中分离所有内容。

真正的应用程序可能是一个主要的 JFrame，可能会调用一些 JFrame，当然是@MadProgrammer 提出的想法。您的 JPanel 可以插入，无论是在 JTabbedPane、JInternalFrame 还是其他任何地方。

使 MVC-Classes 提供 JPanel，管理 Actions。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:50:03.517

由于您知道 actionListener，您可能知道如何创建 JFrame，并且您的逻辑似乎没问题。如果我错了，请纠正我，你只需要一个 ActionListener 的骨架？
对于按钮的 mouseListener，这应该可以正常工作：

 `````
JButton btnExit = new JButton("Exit"); // Creating the button

btnExit.addMouseListener( new MouseAdapter() { // Adding a mouseListener to your component
    // Mouse is pressed in this component
    @Override
    public void mousePressed( MouseEvent e ){
        yourFrame.dispose() // Closes your JFrame
    }
}); 
````  `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:07:35.683

您可能希望首先创建所有窗口（新窗口），并且仅在单击按钮时显示它们，这样您就不会拥有同一窗口的多个实例。

```
public MainWindow extends JFrame
{
    private LibraryWindow libWin;
    private AccountsWindow accWin;

    public MainWindow()
    {
        libWin = new LibraryWindow();
        libWin.setParent(this);
        accWin = new AccountsWindow();
        accWin.setParent(this);

        ...

        this.show();
    }

    btnLib.addMouseListener( new MouseAdapter() { // Adding a mouseListener to your component
    // Mouse is pressed in this component
    @Override
    public void mousePressed( MouseEvent e ){
        libWin.show(); //shows your window on top of the main window

        //if you want to switch windows you can hide the parent
        this.hide();
    }
});

public LibraryWindow extends JFrame
{

    public LibraryWindow()
    {
        //create/design the window

        ...

        //don't show the window, the main window will do that
    }

    btnExit.addMouseListener( new MouseAdapter() { // Adding a mouseListener to your component
    // Mouse is pressed in this component
    @Override
    public void mousePressed( MouseEvent e ){

        //if you want to switch windows you can show the parent
        this.parent.show();

        this.hide(); //only hide the window in order to reuse it
        //restore the window to its initial state
    }
}); 
`````

# email - 用于电子邮件通信的日语编码（ISO2022JP 变体）

> ID：13719183
> 
> 赞同：2
> 
> 时间：2012-12-05T08:41:25.173
> 
> 标签：email, encoding

我想了解一些有关日本常用的日语电子邮件编码的信息。

我知道*ISO-2022-JP*和*ISO-2022-JP-2*用于在日本对电子邮件进行编码。但是，我不知道其他 ISO-2022-JP 变体字符集（例如**ISO-2022-JP-1**、**ISO-2022-JP-3**等）在日本用于电子邮件编码的范围或很少。我曾尝试在互联网上查找信息，但未能找到有关在电子邮件通信中使用 ISO-2022-JP-3、ISO-2022-JP-1 的很多信息。

当今在日本最广泛用于电子邮件通信（包括移动电子邮件通信）的 ISO-2022-JP 变体中最常见和最重要的字符编码是什么？如果有日语编码知识的人可以提供这方面的信息，那将会很有帮助。

[http://en.wikipedia.org/wiki/ISO/IEC_2022](http://en.wikipedia.org/wiki/ISO/IEC_2022)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:42:04.403

这些变体很少使用。大多数人使用 ISO-2022-JP 中的字符。

有些人可能希望使用仅在 ISO-2022-JP-1 中可用的稀有字符（例如，可以在 Windows 7 上呈现，但不能在 Windows Vista 上以默认字体呈现），但没有多少 MUA 能正确处理它。ISO-2022-JP-2 比较少见，因为它是针对扩展 ISO-2022-JP 的，具有编码中文/韩文/等的能力，而现在当日本人需要用非日文/非英文写邮件时，更多人们知道将编码转换为 UTF-8（无论如何，普通日本人没有太多机会通过电子邮件做到这一点）。忘记 ISO-2022-JP-3。

# facebook-graph-api - 是否可以查看评论是否已“发布到 Facebook”？

> ID：13719186
> 
> 赞同：1
> 
> 时间：2012-12-05T08:41:42.370
> 
> 标签：facebook-graph-api, comments

我正在使用[facebook 评论插件](http://developers.facebook.com/docs/reference/plugins/comments/)来允许用户在我的页面上发表评论。该插件为评论者提供了一个复选框：“发布到 Facebook”。我有什么办法可以查看通过插件在我的页面上发布的评论是否选中了此复选框？[根据graph api](https://developers.facebook.com/docs/reference/api/Comment/)似乎不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:13:23.907

您可以使用 FQL 访问评论。

fb:comments 有一个字段，其中还包含对评论的回复。

如果用户在 Facebook 上发帖并收到他朋友的回复，您可以使用上述查询语言跟踪回复和回复数量。

这是你能做的最好的。您无法检查他是否已转发到 Facebook，但这将允许您查看有多少人评论了他的帖子以及他有多少喜欢，并希望从中确定优先级

[http://developers.facebook.com/docs/reference/fql/comment/](http://developers.facebook.com/docs/reference/fql/comment/)

# c# - 使用 Jquery 将空字典发布到 ASP.NET MVC4 操作

> ID：13719187
> 
> 赞同：2
> 
> 时间：2012-12-05T08:41:59.893
> 
> 标签：c#, jquery, .net, asp.net-mvc

我正在使用 jquery 将字典发布到我的控制器操作：

客户端代码：

```
var dict = {};
// var dict = {"type": "type-1"}; // this works fine
$.post('/MyController/MyAction?id=' + jsId + '&data=' + jsData, { additionalFields : dict }, function () { //some callback }); 
```

服务器端代码：

```
 public ActionResult MyAction([FromUri]Guid id, [FromUri]string data, [FromBody]Dictionary<string, string> additionalFields)
    {
        //some code
        return RedirectToAction("Index");
    } 
```

如果没有其他数据并且 dict 变量为空，我会在服务器端收到奇怪的数据：additionalFields 字典将包含两个条目：

**控制器**：我的控制器

**行动**：我的行动

我该如何解决？

这是我发布空字典时显示服务器端数据的图片： ![奇怪的](../Images/3fea41a7788212103cf6c3159312878e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:45:24.647

当字典不包含值时，在发布到服务器之前尝试将 dict 设置为 null

```
dict = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:52:27.910

看起来 ModelBinder 在“发布”请求的正文中选择了一些数据。为什么需要 [FromBody] 属性？

尝试删除它，这应该可以解决您的问题。

# wpf - 将一组 WPF 用户控件创建到单个 dll 中

> ID：13719189
> 
> 赞同：0
> 
> 时间：2012-12-05T08:42:03.950
> 
> 标签：wpf, user-controls

只是一个简单而快速的问题。是否有可能在 WPF 中将我创建的一些用户控件（它们是 dll）聚合到单个 DLL 中，以便我们的客户将一个 dll 添加到工具箱中，他们可以访问我们所有的用户组件？？？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:49:22.483

您可以尝试[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17630)，它将多个 .NET 程序集合并为一个 .NET 程序集

# android - IDEA 社区版和终极版有什么区别？

> ID：13719193
> 
> 赞同：19
> 
> 时间：2012-12-05T08:42:20.163
> 
> 标签：android, intellij-idea

我非常喜欢这个 IDE，我现在正在使用 Community Edition。我只是想知道 Ultimate 是否对 Android 开发有任何额外的好处。如果是这样，这些好处是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T08:53:59.097

不，对于 Android Dev*只有*UE（终极版）它可能不值钱。CE（社区版）为您提供了开发实际 Android 项目所需的大部分（如果不是全部）。

如果您必须将 IntelliJ IDEA Ultimate Edition 用于更广泛的语言/框架/项目，那么IntelliJ IDEA Ultimate Edition*非常*物有所值。

看看这里的比较表：

[http://www.jetbrains.com/idea/features/editions_comparison_matrix.html?IC](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html?IC)

如您所见，如果您必须将其用于 Web 开发，或者在企业级环境中，您将不得不购买 UE。仅对于 Java/Android，UE 是相当大的杀伤力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-12-16T12:55:29.210

**社区版：**开源且免费提供。Community Edition 包含 Apache 2.0 许可证，并与围绕 jetbrains.org 的开放社区一起构建。

**Ultimate Edition：** JetBrains 提供的专业且功能齐全的商业 IDE。Ultimate Edition 建立在 Community Edition 之上，具有许多用于 Web 和企业开发的额外功能。[您可以从http://www.jetbrains.com/idea](http://www.jetbrains.com/idea)下载 IntelliJ IDEA Ultimate 。如果您是已建立的开源项目的贡献者，您可以免费评估它 30 天、购买许可证或获得免费许可证。

# ms-access - 部署使用 MS Access 的程序而不在该 PC 上安装 MS Access

> ID：13719202
> 
> 赞同：0
> 
> 时间：2012-12-05T08:43:26.350
> 
> 标签：ms-access, interop

正如标题所说，我可以部署使用 MS Access 的编译程序，而无需安装 MS Office，更不用说在该终端中安装 MSAccess 了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:53:31.820

如果您的程序只能访问 microsoft access 文件，您可以这样做。例如，如果您在 c# 中开发应用程序，您可以通过 ODBC、OLEDB 访问文件。

其他语言始终可以通过 ODBC 或特定库访问文件，例如 Java。

如果您的程序需要仅驻留在 MSAcces 中的函数（例如调用可通过 VB 或 VBScript 访问的函数），您将被迫将它们一起分发

如果你能更清楚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:47:46.207

如果您的程序是在 Access 中构建的，则它需要 Access。如果它是内置的，比如 .NET（或使用适当的驱动程序），则访问它所需的只是 MDB 文件本身。

# java - 如何从java调用webservice

> ID：13719211
> 
> 赞同：-1
> 
> 时间：2012-12-05T08:43:47.160
> 
> 标签：java, web-services, call

我必须编写一个简单的应用程序，从 android 调用 web 服务。所以请给我一个示例代码来调用它。如果代码不使用我必须下载并包含在项目中的任何特殊库，那就更好了。此外，该代码不应使用“Soap”一词，因为我在网上进行了很多搜索，并且每个地方都有“如何调用 Soap Web 服务”的示例。我不必调用 Soap 或其他任何东西，只需一个简单的 Web 服务。所以请提供参考代码或至少一些有用的链接。现在我尝试了一个代码，

```
public class TriongleJava {

    public static void main(String args[]) {

        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://vogellac2dm.appspot.com/register");
        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("registrationid", "123456789"));
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = client.execute(post);
            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            String line = "";
            while ((line = rd.readLine()) != null) {
                System.out.println(line);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

但它的错误，

> HttpClient 、 DefaultHttpClient 、 HttpPost 、 NameValuePair 等无法解析。

如何消除这些错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:48:55.283

要调用 Web 服务，您需要就通信协议达成一致，可能是 SOAP、POST、XML 等。

如果您想使用 POST 协议进行调用，则可以使用以下链接： [POST 示例](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:49:32.563

使用任何可以进行 http 调用的 java 库。可以参考这个链接[http://www.vogella.com/articles/ApacheHttpClient/article.html](http://www.vogella.com/articles/ApacheHttpClient/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:49:46.993

代码看起来大部分是可行的。

您遇到的错误是因为您使用的是外部类。这些类在库中定义。一些，例如`BufferedReader`包含在标准 java 库中，可以简单地使用

```
import java.io.BufferedReader; 
```

我假设您尝试使用的其他人来自 Apache HTTP 客户端库。[您可以在此处](http://hc.apache.org/downloads.cgi)下载文件并将它们包含在您的类路径中，然后再导入相关的类。

# php - 编写不包含协议的链接

> ID：13719212
> 
> 赞同：4
> 
> 时间：2012-12-05T08:43:54.763
> 
> 标签：php, html, hyperlink, protocols

我有一个可以在`http`和`https`协议中查看的网站，这里的问题是链接和资产必须反映正在查看网站的协议。

一种解决方案是使用相对链接，但是由于特殊原因，我不能使用相对链接，因此，我不得不找到替代方案......

我最近了解到，您可以编写这样的链接以使用当前协议：

```
<a href="//www.example.net/test/">Test</a> 
```

到目前为止，我一直在使用以下内容：

```
<?php

    // Get the current protocol
    $_PROTOCOL = $_SERVER['HTTPS']=='on' ? 'https://' : 'http://';

?>

<a href="<?php echo $_PROTOCOL; ?>www.example.net/test/">Test</a> 
```

虽然第一个解决方案有效，但我最近才发现它不熟悉它的工作原理以及它是否可靠。我知道旧的浏览器可能不喜欢它，但这并不困扰我，因为它只是非常旧的浏览器（显然）。

当我尝试为我的一个网站生成站点地图时，网址写得很奇怪，如下所示：

```
http://beta.example.net///venue/ 
```

代替

```
http://beta.example.net/venue/ 
```

为什么是这样？这是因为我使用的链接吗？

我的原始（PHP）解决方案是否更好，尽管需要大量代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:50:02.620

您可以在任何想要使用常规 URL 的地方使用“//example.net”，它是符合标准 §4.2 的格式。RFC 3986。

* * *

但是，如果您仍想以干净的方式更改 URL 的方案，您可以使用`http_build_url`：

[http://php.net/manual/en/function.http-build-url.php](http://php.net/manual/en/function.http-build-url.php)

像这样：

```
http_build_url("http://yoururl.org", array('scheme'=>'https')); // changes to https:// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:52:44.160

站点地图中的错误链接是因为生成器错误。最好的解决方案是更新站点地图生成器以使其正常工作。简单的解决方案是使用 $protocol。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:04:25.267

您没有提供可以重现您描述的问题的代码，链接显示额外的斜杠。我的猜测是您正在使用的代码试图组装整个 URI，并且在您连接的部分中有尾随/前导斜杠。

$_SERVER['HTTPS'] 变量不能保证设置为“on”，只是为了让您知道定义的行为。[它只是根据手册](http://php.net/manual/en/reserved.variables.server.php)设置为非假值，但这不应该是您在此处提供的代码的问题。

使用协议相对 URL 绝对比让 PHP 做额外的工作来为每个请求重建你的 URI 更可取，而且也容易出错。我建议在您认为需要它们的地方使用协议相关 URL，但一般来说，建议您从头开始构建您的站点，以使用 HTTPS 或不使用 HTTPS。协议相对 URL 可能仍会导致某些浏览器（例如 IE）发出警告或通知用户该页面的 SSL 已损坏。

当您需要安全传输时，您希望始终检查这些内容并彻底测试它们。很容易意外进入[http://foobar.com/img.jpg](http://foobar.com/img.jpg)或无意中通过 HTTP 而不是 HTTPS 发送 AJAX 请求，然后突然间，该页面的 SLL 图标现在在用户的浏览器中损坏。

# powershell - 使用 PowerShell 注册计划作业

> ID：13719214
> 
> 赞同：1
> 
> 时间：2012-12-05T08:44:09.847
> 
> 标签：powershell, powershell-3.0

我创建了一个 PowerScript 文件，它将在我的服务器上进行一些文件清理。我希望它每天晚上 11:30 运行，所以根据 Microsoft 的技术说明，我使用以下语法来注册作业：

```
PS C:\> Register-ScheduledJob -Name "MyName" -FilePath "D:\Sites\Site\Tasks\DeleteUnusedGalleryImages.ps1" -Trigger @{Frequency="Daily"; At="11:30PM"} 
```

没有错误消息，所以我可以假设它已成功注册。但是，我不知道如何列出已设置的作业。我已经使用过`Get-Job`，但它什么也没返回，这会让我相信它还没有注册，但是如果我运行相同的语法来重新注册计划的作业，我会收到错误消息“已经注册”。

所以，我的问题是：

*   如何获取服务器上的计划任务列表？
*   如何更新作业的日程安排？
*   我如何立即执行现有作业，而不是等待？我想检查它是否作为计划作业（我已经手动运行脚本来检查它是否有效）

谢谢大家 - PowerShell 的新手，但它看起来很棒。

提前感谢艾尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:51:03.303

您必须使用 Get-ScheduledJob 而不是 get-job
Normaly 您可以在 Task Scheduler Library\Microsoft\Windows\PowerShell\Scheduled Jobs 中找到工作。

在这里查看更多信息：http: [//blogs.technet.com/b/heyscriptingguy/archive/2012/09/18/create-a-powershell-scheduled-job.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2012/09/18/create-a-powershell-scheduled-job.aspx)

在这里：[http](http://www.youtube.com/watch?v=RhRoofMOoI0) ://www.youtube.com/watch?v= RhRoofMOoI0 观看 PowerShell MVP Jeffery Hicks 的演示文稿

# google-app-engine - 应用引擎返回错误

> ID：13719218
> 
> 赞同：0
> 
> 时间：2012-12-05T08:44:23.717
> 
> 标签：google-app-engine

我刚刚按照指南做了 appengine 的示例留言簿，它完全遵循了指南。该应用程序在本地运行良好。然后我通过Eclipse成功地将它部署到appengine。我可以通过管理门户查看我的应用程序。但我可以通过 http://.appspot.com 访问我的应用程序，浏览器显示错误：

```
Network Error (tcp_error)

A communication error occurred: "Operation timed out"
The Web Server may be down, too busy, or experiencing other problems    preventing it from responding to requests. You may wish to try again at a later time.

For assistance, contact your network support team. 
```

在浏览器中看到错误后，我检查了管理日志，看到这个：

```
2012-12-05 04:26:32.792 / 200 67ms 0kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
116.246.26.29 - - [05/Dec/2012:04:26:32 -0800] "GET / HTTP/1.1" 200 867 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" "evanguestbook.appspot.com" ms=68 cpu_ms=64 cpm_usd=0.000097 instance=00c61b117c85ed8047fbc561bc883e1ac1c50c 
```

在日志中看起来没有错误。

从管理日志中，我看到：

```
API serving not allowed for this application 
```

我有时做错了吗？还是我错过了一些事情要做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:32:07.433

你可以检查几件事：

*   确保您的本地计算机和外部网络之间没有网络问题，导致您无法访问 .appspot.com 域上的应用程序。您的网络中有代理服务器吗？
*   这可能看起来微不足道，但我想根据您的问题确认您是否确实正在访问您的应用程序的 URL，如下所示：[http://APP_ID.appspot.com](http://APP_ID.appspot.com)，其中 APP_ID 是您的应用程序 ID。
*   如果以上几点看起来不错，我建议灭霸所说的。登录到 AppEngine 控制台，访问“日志”部分，看看是否可以在那里找到任何内容。

# rest - 具有多个前端的 Java EE

> ID：13719220
> 
> 赞同：2
> 
> 时间：2012-12-05T08:44:27.910
> 
> 标签：rest, mobile, angularjs, java-ee-6

目前我正在开发一个简单的 JSF+Java EE 6+EJB+JPA2 应用程序。整个堆栈确实可以很好地协同工作，并且开发速度很高。

现在我想在我的应用程序/架构中添加更多“移动”功能。这意味着我将创建几个与我的 Java EE 6 后端通信的本机移动应用程序。对于创建原生应用程序，我认为 Phonegap 是一个不错的选择。但我不确定与后端和客户端的 JS 框架的通信。

目前我认为服务器端的 REST-Facade 将是一个好主意，它将在客户端的 AngularJS 中使用。

有人试过这种方法吗？有更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:54:13.277

这是一个合理的架构理念，就像所有好的理念一样，它已经完成了:)。

请参阅[AngularJS + PhoneGap](https://stackoverflow.com/questions/13498432/angularjs-phonegap)进行确认。

github 上还有一个“Hello World”实现：[phonegap-angularjs-bootstrap](https://github.com/kronosh/phonegap-angularjs-bootstrap)

# spring - 使用 QUnit 和条件包含测试 javascript

> ID：13719221
> 
> 赞同：0
> 
> 时间：2012-12-05T08:44:28.303
> 
> 标签：spring, maven, spring-mvc, qunit, thymeleaf

我需要有关使用 QUnit 测试 javascript 的提示。

例如，在测试时需要包含 QUnit 库以及测试文件，但**这些文件不得包含在生产中**。

如何处理这个问题并**有条件地包含那些**可能使用 Spring 配置文件的文件？

供您参考，我使用 Spring + Thymeleaf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T15:02:59.157

用于`spring.profiles.active`在以下位置之一切换 QUnit 配置文件：

*   系统环境变量
*   JVM 系统属性
*   web.xml 中的 servlet 上下文参数
*   JNDI

例如，可以将 web.xml 设置为生产配置文件：

```
<servlet>
      <servlet-name>dispatcher</servlet-name>
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <init-param>
          <param-name>spring.profiles.active</param-name>
          <param-value>production</param-value>
      </init-param>
  </servlet> 
```

但是命令行可以覆盖它：

```
-Dspring.profiles.active="QUnit" 
```

**参考**

*   [Spring 3.1 环境配置文件](http://java.dzone.com/articles/spring-31-environment-profiles)

# iphone - 在 iPhone 中录制视频时是否可以更改相机视图

> ID：13719229
> 
> 赞同：2
> 
> 时间：2012-12-05T08:44:44.827
> 
> 标签：iphone, ios, video-recording

基本上我的应用程序用于通过用户选择来播放和录制视频。在录制视频时，我需要将相机视图更改为前视图或后视图。我知道这是不可能的`UIImagePickerController`。

任何人都可以建议我为这个问题提供任何最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:11:47.407

这是不可能的。

举个例子 - 以原生 iphone 相机应用程序为例。一旦开始录制，您将无法更改相机...

虽然您是使用**AVCaptureSession**从应用程序内录制，并且您正在通过**AVAssetWriter**编写视频，但这看起来可行，但您必须自己处理整个录制，但是，视频流将破解并恢复（停止来自一台摄像机的流并开始来自其他人的流）何时切换相机，因此您将无法获得无缝的视频录制体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:14:14.663

有一个应用程序（不记得名字）可以同时记录两个摄像头。

使用它，您应该能够（至少）设置两个录制，但只显示一个视图。然后只需按一下按钮即可换出视图。

还是只显示两个视图并允许用户在最后进行编辑？

# image - 有没有办法让 Open Graph 不显示特定图像？

> ID：13719232
> 
> 赞同：1
> 
> 时间：2012-12-05T08:44:57.837
> 
> 标签：image, facebook-like, facebook-opengraph

我最近开始在我的博客上使用广告，从那时起，每当有人按下页面上嵌入的“喜欢”按钮时，在 Facebook 上共享的缩略图就是一个 11 像素宽 x 6 像素高的“您的广告”按钮 -不理想。

我知道这张图片的 URL，那么有没有办法将它分配为不可共享的元属性？

希望这是有道理的。

谢谢，朵拉

# image - Matlab：在二值图像中搜索对象的中心

> ID：13719233
> 
> 赞同：1
> 
> 时间：2012-12-05T08:45:01.017
> 
> 标签：image, matlab, object, image-processing, binary

我有如下图像：

![二进制图像](../Images/2ed91f407faad67de2c36b58fa763d86.png)

它是通过绘制的`imshow(I)`，`I`是一个逻辑矩阵，你可以从这里得到这个：http: [//pastebin.com/qsxA0GXy](http://pastebin.com/qsxA0GXy)

这些物体大多类似于一个粗糙的圆圈，但它们也可以是某种尺寸大约三倍的椭圆形。

我想找到这些物体中心的坐标，但只是估计的。我不想使用循环霍夫变换，因为我只需要一个估计值并且我需要一个快速算法。

我的想法是：循环每个像素，如果它是一个`true`值，则搜索所有相邻像素，`true`然后通过计算获得对象的中心

> x = x_max - xmin;
> 
> y = y_max - ymin；

但我不喜欢这种方法，因为使用 2 个嵌套的 for 循环对我来说似乎很慢。你能想到什么更好的吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:28:38.740

这似乎相当快。不太确定它会如何扩展：

```
L = bwlabel(I);
stats = regionprops(L,I,'Centroid'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:23:25.980

试试这个答案中使用的概念：[https ://stackoverflow.com/a/2242565/845528](https://stackoverflow.com/a/2242565/845528)

我试过了（通过保存您在上面提供的图像。我没有转到您提供的链接）。它似乎工作：

```
 Image = imread('im.jpg');
    dImage = im2double(Image);
    logicalImage = im2bw(dImage, 0.5);

    dilatedImage = bwmorph(logicalImage, 'shrink',Inf);
    [x,y] = find(dilatedImage); 
```

# performance - 向量化一个 for 循环，其中输入取决于输出

> ID：13719234
> 
> 赞同：2
> 
> 时间：2012-12-05T08:45:11.877
> 
> 标签：performance, matlab, for-loop, vectorization

我有一个关于循环依赖向量化的复杂问题，我想从你那里得到一些帮助。

让我们`X1`成为一个长度为 的向量`n1`，`X2`成为一个长度为 的向量`n2`，`F1`成为一个`N1`x`n1`矩阵，`F2`成为一个`N2`x`n2`矩阵，`Q`成为一个`N1`x`N2`矩阵，并且符号`p...`是索引向量。ntrapz 是梯形数值积分的函数。我想计算矩阵`Q`如下：

```
for i1=1:N1
    F1_13tmp=F1(i1, p1_13)';                       % ' 
    F1_13=F1_13tmp(:,ones(n2,1));
    for i2=1:N2
        F2_13 = F2(i2, p2_13);
        Q_13_13 = Q(p1_13, p2_13);
        Q(i1,i2) = Q(i1,i2) + 
              ntrapz(X2(p2_13), ntrapz(X1(p1_13)', Q_13_13.*F1_13).*F2_13);
    end
end 
```

问题是更新`Q(i1,i2)`会改变`Q_13_13 = Q(p1_13, p2_13)`下一次迭代的值。我想知道我们是否可以矢量化这样的 for 循环。如果没有，有什么想法可以加快代码速度吗？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:31:57.017

矢量化通常是并行操作的方式。但是，在您的情况下，您似乎有顺序操作，并且这些操作通常不适合矢量化。

我不熟悉您使用的函数，但我能想到的唯一可能加快计算速度的方法是以非依赖形式编写它。请注意，这更像是数学练习而不是编程练习，这是一个简单的示例：

假设公式等于：

```
Y(1)=0.5;
Y(t)=0.3*Y(t-1)+epsilon(t);
% Let as assume epsilon is also known
epsilon = rand(9,1) 
```

计算 Y(10) 的简单方法是执行 10 个计算步骤。

```
for t=2:10
    Y(t)=0.3*Y(t-1)+epsilon(t);
end 
```

计算 Y(10) 的最快方法是做这样的事情（不确定它是否正确，但应该接近）

```
Y(10)=Y(1)*0.3^9 + sum(epsilon.^(1:9)) 
```

因此得出结论：“矢量化”循环的唯一方法是，如果您可以显着帮助计算机并基本上让它进行不同的计算。如果这是不可能的，您当然可以通过将其设为 mex 文件来尝试挤出一点额外的速度。

# c++ - 将 gz 文件流式传输到 char 数组

> ID：13719246
> 
> 赞同：1
> 
> 时间：2012-12-05T08:45:55.090
> 
> 标签：c++, mfc, stream, gzip

语言：C++ (MFC) 与 VS2010

我正在尝试流式传输 .gz 文件，以便可以将其转换为数组。然后我会将这个数组发送到服务器。我想要整个 .gz 文件，而不仅仅是内容，因为服务器需要一个 .gz 文件。

关于我如何解决这个问题的任何建议？我试过 fopen()，但它不起作用。

这是我的其他尝试：

```
// common variables
ifstream fGZStream;
char * strData; 
```

1）使用ifstream：

```
fGZStream.open(gz_filename, ifstream::binary);
strData = new char[nFileSize];                 //assume nFileSize if already ok
fGZStream.read(strData, nFileSize);
fGZStream.close(); 
```

2) 使用 CFile:

```
CFile fGZFile;
file.Open(gz_filename, CFile::modeRead);
strData = new char[nFileSize];                 //assume nFileSize if already ok
file.Read(strData, nFileSize);                 
file.Close(); 
```

3) 使用 fstream 和 filebuf：

```
filebuf* fGZBuffer;
fGZStream.open(gz_filename, ifstream::binary);
strData = new char[nFileSize];                 //assume nFileSize if already ok
fGZBuffer->sgetn(strData, nFileSize);            
fGZStream.close(); 
```

在所有这些尝试中，strData 总是最终等于“.”。

预先感谢您的帮助。

# java - 未找到 WebApplicationContext：未注册 ContextLoaderListener？然后是404错误

> ID：13719247
> 
> 赞同：2
> 
> 时间：2012-12-05T08:45:56.310
> 
> 标签：java, forms, spring, spring-mvc

我发现错误是由于在我的jsp中添加了以下几行

```
<form:form></form:form> 
```

我检查了这两个与我的错误相关的帖子。

[未找到 WebApplicationContext：未注册 ContextLoaderListener？](https://stackoverflow.com/questions/8924761/no-webapplicationcontext-found-no-contextloaderlistener-registered)

[spring security 没有找到 WebApplicationContext](https://stackoverflow.com/questions/5046403/spring-security-no-webapplicationcontext-found)

在他们提到的两个帖子中添加此代码

```
<listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

像这样在我的 web.xml 中添加此代码后

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>SpringSort</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>

  </welcome-file-list>

  <servlet>
        <servlet-name>sort</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>sort</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
</web-app> 
```

我收到 HTTP 状态 404 - 错误并且我的项目不可用（这就是服务器所说的）。

我的构建路径中的相关 jar 是：1.springwebmvc3.0.3.jar、2.spring2.5.6.jar，我也有 spring-form.tld 文件。

如何解决这个错误？
我应该添加更多的jar文件吗？
我正在使用 STS 2.9.2 版本进行开发。下面是控制台的启动日志。

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:349)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4350)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml]
    at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:117)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
    ... 27 more 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:18:42.767

```
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml] 
```

有你的问题......你没有正确命名和定位**applicationContext.xml**。你在哪里保存 applicationContext.xml，你有没有正确命名它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:28:25.420

404 错误是由于我缺少 context-param 标记。
所以我将此代码添加到我的 web.xml

```
<context-param> 
<param-name>contextConfigLocation</param-name> 
<param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value> 
</context-param> 
```

添加后出现以下错误：

```
javax.servlet.ServletException: Servlet.init() for servlet sort threw exception
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)...

java.lang.NoSuchFieldError: APPLICATION_CONTEXT_ID_PREFIX
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:430)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)... 
```

收到此错误我发现我在我的 lib 文件夹中混合了一个 jar 文件。从一些输入中，我发现罪魁祸首是 spring2.5.6.jar。
所以，我删除了spring2.5.6.jar。

上述步骤成功了……感谢所有输入。

# java - Sonar 在组件视图中包含测试文件。这是正确的吗？

> ID：13719257
> 
> 赞同：0
> 
> 时间：2012-12-05T08:46:41.873
> 
> 标签：java, sonarqube

我在 Java 和 Ant 上使用声纳。我使用静态代码分析并从我们的 CI 服务器导入测试结果。

查看 Sonar 中的“组件”视图时，该视图包含源代码和测试代码。源代码的规则和测试覆盖率正确显示，但测试不显示任何内容。我想知道这个视图中的测试文件是否会影响代码覆盖率的整体统计数据。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:40:24.793

通常，默认情况下组件视图不应包含测试文件。检查我们的演示声纳实例，例如：

*   Sonar Code Colorizer 模块的类：http: [//nemo.sonarsource.org/components/index/182946](http://nemo.sonarsource.org/components/index/182946)（不显示测试类）

*   这个模块的测试类可以在这里找到： http: [//nemo.sonarsource.org/drilldown/measures/182945 ?metric=tests](http://nemo.sonarsource.org/drilldown/measures/182945?metric=tests)

这可能意味着您将测试类和源类混合在一起，或者您的 Ant 脚本中的 Sonar 配置不正确。

# xtext - xtext 注入解析器

> ID：13719260
> 
> 赞同：0
> 
> 时间：2012-12-05T08:46:53.933
> 
> 标签：xtext

```
@Inject
protected void setInjectedParser(IParser parser) {
    this.parser = parser;
} 
```

我想手动运行 xtext 引擎，但不确定何时何地调用 setInjectedParser。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:01:51.407

Guice 将调用 #setInjectedParser(IParser) 来构造 XtextResource 的实例以将其注入其他地方。这是由 Guice 完成的，因为 setter 使用 @Inject 进行了注释。

> 手动运行 xtext 引擎

你这是什么意思？

# android - 无法实例化 android.gms.maps.MapFragment

> ID：13719263
> 
> 赞同：83
> 
> 时间：2012-12-05T08:46:58.920
> 
> 标签：android, noclassdeffounderror, runtimeexception

我尝试使用非常简单的活动使用 google maps android v2 进行演示，只需从 google 页面复制代码： [https ://developers.google.com/maps/documentation/android/start#adding_the_api_key_to_your_application](https://developers.google.com/maps/documentation/android/start#adding_the_api_key_to_your_application)

活动：

```
package com.example.mapdemo;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

对于布局：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

我已经根据页面申请了一个api密钥并修改了我的androidmanifest.xml文件，就像这样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wenhai.driverschool"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <!-- add for map2 -->
    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <!-- External storage for caching. -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <!-- Maps API needs OpenGL ES 2.0\. -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyDVAF4WaVSVRDKJx87It8OSFP5txQcPabc" />

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我还在 Eclipse 中将我的应用程序引用到 google-play-services_lib。

但每次，logcat 中的错误报告如下：

```
2-05 16:22:53.609: E/AndroidRuntime(21623): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.wenhai.driverschool/com.wenhai.driverschool.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.os.Looper.loop(Looper.java:137)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.ActivityThread.main(ActivityThread.java:4441)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at java.lang.reflect.Method.invokeNative(Native Method)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at java.lang.reflect.Method.invoke(Method.java:511)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at dalvik.system.NativeStart.main(Native Method)
12-05 16:22:53.609: E/AndroidRuntime(21623): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Activity.setContentView(Activity.java:1835)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at com.wenhai.driverschool.MainActivity.onCreate(MainActivity.java:11)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Activity.performCreate(Activity.java:4465)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
12-05 16:22:53.609: E/AndroidRuntime(21623):    ... 11 more
12-05 16:22:53.609: E/AndroidRuntime(21623): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Fragment.instantiate(Fragment.java:581)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Fragment.instantiate(Fragment.java:549)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Activity.onCreateView(Activity.java:4235)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
12-05 16:22:53.609: E/AndroidRuntime(21623):    ... 20 more
12-05 16:22:53.609: E/AndroidRuntime(21623): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
12-05 16:22:53.609: E/AndroidRuntime(21623):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-05 16:22:53.609: E/AndroidRuntime(21623):    at android.app.Fragment.instantiate(Fragment.java:571)
12-05 16:22:53.609: E/AndroidRuntime(21623):    ... 23 more 
```

我不知道这是什么原因。

如果我将 google-play-services.jar 添加到我的项目中，它会报告另一个错误：

```
12-05 16:34:23.269: E/AndroidRuntime(22638): FATAL EXCEPTION: main
12-05 16:34:23.269: E/AndroidRuntime(22638): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
12-05 16:34:23.269: E/AndroidRuntime(22638):    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.Activity.onCreateView(Activity.java:4242)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.Activity.setContentView(Activity.java:1835)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at com.wenhai.driverschool.MainActivity.onCreate(MainActivity.java:11)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.Activity.performCreate(Activity.java:4465)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.os.Looper.loop(Looper.java:137)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at android.app.ActivityThread.main(ActivityThread.java:4441)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at java.lang.reflect.Method.invokeNative(Native Method)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at java.lang.reflect.Method.invoke(Method.java:511)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
12-05 16:34:23.269: E/AndroidRuntime(22638):    at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-06T13:35:49.287

在 IntelliJ IDEA 中（针对 IntelliJ 12 更新）：

1.  创建一个`~/android-sdk/extras/google/google_play_services/libproject/google-play-services_lib/src/dummy.java`包含`class dummy {}`.
2.  文件->导入模块->`~/android-sdk/extras/google/google_play_services/libproject/google-play-services_lib`
3.  从现有源创建模块
4.  下一步->下一步->下一步->下一步->完成
5.  文件->项目结构->模块->YourApp
6.  `+`->Module Dependency->Google-play-services_lib（`+`按钮在对话框的右上角。）
7.  `+`->罐子或目录->`~/android-sdk/extras/google/google_play_services/libproject/google-play-services_lib/libs/google-play-services.jar`
8.  使用`up`/`down`箭头移动`<Module source>`到列表底部。

`dummy.java`如果你喜欢，你可以删除。

**编辑：**使用了一段时间后，我发现有一个小缺陷/错误。IDEA 有时会抱怨无法打开目录`.iml`中的项目文件`google-play-services_lib`，尽管您从未告诉它那里有项目。如果发生这种情况，重建项目可以解决问题，至少在它恢复之前是这样。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-05T11:08:15.637

**更新**

> 请遵循 Commonsware MapV2 代码片段以获得更好的理解。
> 
> （它出现在综合版中）
> 
> [https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2)

以下代码段在我的最后工作正常。我选择使用`SupportMapFragment`.

**不要忘记添加** `google-play-services.jar` **到您的项目中。**

**MainActivity.java**

```
package com.example.newmapview;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();
    }
} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.newmapview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.newmapview.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.newmapview.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.newmapview.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="XXXXX" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

这是结果

![在此处输入图像描述](../Images/9e69e8dfa3b10a559073c0c2baeabea1.png) 希望这会有所帮助。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-05T10:42:44.013

只需尝试将您的布局替换为：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
       android:name="com.google.android.gms.maps.SupportMapFragment"
       android:layout_width="wrap_content"
       android:layout_height="match_parent" /> 
```

您需要在 11 岁以下使用 SupportMapFragment for API！

奥雷尔

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-02T21:03:31.060

我遇到了同样的问题，我花了两天时间才找到对我有用的解决方案：

1.  删除项目`google-play-services_lib`（右键项目删除）
2.  删除包含谷歌地图演示的项目（`MainActivity`在我的例子中）如果你有一个
3.  将项目 google-play-services_lib( extras\google\google_play_services\libproject\google-play-services_lib) 复制到您的工作区，然后将其作为常规项目导入（文件->导入->现有项目到工作区）
4.  右键单击您的项目（您要在其中加载地图）-> Android -> 添加（在库下）google-play-services_lib

你应该看到这样的东西：

![注意](../Images/7f8d190bf53eee51c6ceab0c95728c7a.png)

注意：你不应该有这样的东西（项目应该从你的工作区引用）：

![在此处输入图像描述](../Images/f6bda40cc2d5bf4afafc2dc9b6e18393.png)

我认为问题在于两个项目引用了同一个库

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-05T19:14:51.843

尝试这个

[http://developer.android.com/tools/projects/projects-eclipse.html#ReferenceLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)

我刚刚添加了google services的项目，并在我的项目属性->Android中添加了引用

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-12-07T07:49:40.373

1.  现在，demo 可以通过[这个链接](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)工作了：
2.  例如演示，它也可以工作：

在项目的 libs 目录中添加两个 jar。按照以下信息。特别是，我认为您需要：

*   导入“google-play-services_lib”项目的实际源代码并将其链接为 Android 库。
    *   通过 Project -> Properties -> Android -> Library, Add -> google-play-services_lib 执行此操作（您可以右键单击您的项目并选择 Properties，然后选择 Android）。
    *   不要通过您的项目的“Java 构建路径”将其添加为依赖项目，这对我不起作用。
*   将 google-play-services.jar 和 android-support-v4.jar 添加到示例项目的“libs”文件夹中，并在“构建路径 -> 配置构建路径 -> 库”中将它们添加为“外部外部 JAR” .

我发现第二步是必要的，因为我在尝试使用示例代码时遇到了与您完全相同的错误。第一步是在我的真实项目中避免 com.google.android.gms.R$styleable 中的 NoClassDefFoundError 是必要的。

在示例代码工作之前，我还需要执行干净的构建并从设备上卸载应用程序（来自早期的测试尝试）。

非常感谢您的帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-17T08:55:09.530

Maybe You must highlight this :

> Note: Google Play services is not supported on the Android emulator — to develop using the APIs, you need to provide a development device such as an Android phone or tablet.

[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

You must provide a physical development device on which you can run and debug your app. Do not use emulator. Will not working.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-28T09:21:15.497

在您的`MainActivity`（或您想要放置 v2 地图的每个活动中）中，您必须扩展`FragmentActivity`或者`Activity`您想要使用`SupportMapFragment`或只是`MapFragment`. `MapFragment`仅当您面向 API 12 及更高版本时才使用类。否则，使用`SupportMapFragment`. 这是一个微妙的区别，但它会产生错误。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-05-04T08:26:01.283

由于 Google 地图现在包含在 Fragments 下，因此从**FragmetActivity**扩展您的活动，而不仅仅是 Activity，并确保如果您使用“ **supportMapFragment ”，那么您只是从****支持**包中导入 Fragment 。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-12-06T12:06:09.720

在我的 Intellij Idea 项目中，我必须将 google-play-services_lib 和 google-play-services.jar 添加到项目中。并在 google-play-services_lib 项目中添加 google-play-services.jar 。[在那之后，如果你做了这里](https://developers.google.com/maps/documentation/android/start)描述的所有事情，对，你的应用程序应该可以工作了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-07-09T15:16:15.127

除了前面提到的许多事情之外，对我来说，在 Order 和 Export 中标记 .jar 也很重要。据我所知，通常不被提及，对我来说这是至关重要的。

![在 Order 和 Export 中标记 lib](../Images/9467a5867827721dbe9dc5987b249981.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-06T18:22:44.287

与此建议有关：[https ://stackoverflow.com/a/20215481/3080835](https://stackoverflow.com/a/20215481/3080835)

我还必须将此添加到`Application`清单中的元素：

```
<meta-data 
           android:name="com.google.android.gms.version" 
           android:value="@integer/google_play_services_version" /> 
```

它工作得很好。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-12-18T16:36:37.680

这有点困难，因为它在以前的 API 中有所不同，但我找到了解决方案。[谷歌说在这里](http://developer.android.com/google/play-services/setup.html)做什么；根据我们需要`com.google.android.gms`类的问题，因此有必要设置`google play services`，这只是一个库，我们必须像这个[链接](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)一样添加到我们的项目中。导入项目库的副本而`google-play-services_lib`不是 sdk 文件夹中的副本非常重要。一旦完成，谷歌的教程就完美了。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-08-19T19:23:42.777

在 build.gradle 中添加这个依赖

`compile 'com.google.android.gms:play-services:6.5.87`'

现在这有效

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.MapFragment"
        android:layout_width="match_parent"
        android:layout_height="388dp"
        android:layout_weight="0.40" />
</LinearLayout> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-26T11:49:20.003

我在 Windows 7 64 位机器上使用 Android SDK for x86 时遇到了这个问题。我下载了 Android SDK 64 位版本，让 Eclipse 在 Window > Preferences > Android > SDK location 中看到它，并且问题停止发生。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-09-04T14:34:23.937

我遇到了这个问题，我只是更新了 Google Play 服务，并确保您将 google-play-service-lib 项目添加为依赖项，它现在可以正常工作而无需任何代码更改，但我仍然收到“找不到 Google Play 服务资源” . 检查您的项目配置以确保包含资源。” 但这仅在您设置了 setMyLocationEnabled(true) 时才会发生，有人知道为什么吗？

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-01-27T17:17:04.047

我在活动中写道
`import com.google.android.gms.maps.SupportMapFragment;`

和 Eclipse 给了我红色图标 > 单击 > 修复项目设置.. > 添加存档 google-play-services.jar

最后它奏效了！！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-04-17T12:02:22.170

在 Eclipse 中，有必要为 google play 服务创建一个单独的项目，并将其作为一个 lib 从您的 Android 项目中引用，而不是简单地将 jar 添加到其中。在我的电脑中，我直接从 D:\adt-bundle-windows-x86-20130219\sdk\extras\google\google_play_services\libproject\google-play-services_lib 导入了 google play services Eclipse 项目并将其设置为 Lib 项目，所以我可以从我的 Android 项目中引用它。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-05-02T23:26:00.973

第一步 [http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject) 第二步 [http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html) 在那个页面上有一个注意，但我们没有注意

注意：您应该引用复制到源代码树的库的副本——您不应该引用 Android SDK 目录中的库。

但我认为这不是一个好的文档方式:)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-01-17T06:07:42.343

我没有得到真正的解决方案，但我在做这些事情后解决了它：
- 导入 google-play-services_lib 时勾选“将项目复制到工作区”
- 不要将 minSdkVersion 设置为低于 13
- 如果您遇到主题错误，请尝试将您的布​​局主题更改为任何系统主题
- 从头开始​​重新创建您的项目，或者如果您从某个地方获得它，则恢复所有内容

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-09-03T16:06:46.157

我拥有上面每个人所说的一切，并通过简单地调用 `super.onCreate(savedInstanceState);`oncreate 方法中的 as first 指令解决了错误；在它是方法的最后一行之前。:| 浪费了一整天。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-04-25T00:32:24.217

我认为值得一提的是（在我花了一个多小时拔掉头发之后），如果您使用 MapFragment，则不能使用 FragmentActivity（SupportMapFragment 在这种环境下可以正常工作）。我正准备放弃它。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2012-12-06T13:43:58.143

要处理与 Drive 相关的导入，您需要从`Google Drive SDK`. 有一些大的，因此您可能需要单独添加它们以适合您的应用程序。

如果这不能解决`com.google.android.gms.* imports`，**`the Google Play Services add-on needs to be installed (from Extras -> Google Play Services in the SDK Manager) and google-play-services.jar needs to be added to your build path.`**

编辑：

在这种情况下，需要以下罐子：

**`google-api-services-drive-v2-rev1-1.7.2-beta.jar`**

**`google-http-client-1.10.3-beta.jar`**

**`google-http-client-android2-1.10.3-beta.jar`**

**`google-oauth-client-1.10.1-beta.jar`**

**`google-api-client-android2-1.10.3-beta.jar`**

**`google-api-client-1.10.3-beta.jar`**

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2012-12-09T16:25:33.537

我在装有 2.3.4 Android 的 LG-E730 上遇到了同样的问题。在我更新手机上的[Google Play 服务](https://play.google.com/store/apps/details?id=com.google.android.gms&hl=en)之前出现此错误。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-06-13T16:49:33.990

我遇到了同样的问题，只是从 SDK 安装了播放服务，所有问题都消失了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-03-28T01:07:12.630

不要忘记实际构建 google-play-services_lib！这就是为什么它显示“找不到 google-play....apk”。对我来说，在 Eclipse 上，不需要其他技巧，而是从 Android 子菜单引用项目，而不是从 Java 构建路径或项目引用或其他任何东西。没有手动放置的罐子，我实际上不需要任何东西。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-04-18T10:53:32.930

在同一个教程中指出

> 请注意，下面的代码仅对在面向 Android API 12 或更高版本的应用程序中测试您的设置有用

只需将您的最低 SDK 版本更改为 12 即可

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

Haven 已经为旧版本的 API 尝试了 Aurel 的解决方法。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2013-06-04T14:31:08.953

这可能对某些人有帮助。我有两个项目，一个是谷歌演示的副本，效果很好。另一个我复制到现有项目中，我根本无法运行它。在第二次失败中，我收到了上述错误消息。

我的问题是由于未启用库，即使我重新构建、导入多次等。右键单击项目 -> 属性 -> Java 构建路径 -> 订单和导出选项卡。在失败的项目中，未选中“Android Private Libraries”选项卡。

一旦我启用它，该项目就可以正常工作。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-03-10T00:50:27.477

**将 Google Play 服务添加到您的项目**

要使您的应用可以使用 Google Play 服务 API：

按照此链接中的步骤操作：http: [//developer.android.com/google/play-services/setup.html#Setup](http://developer.android.com/google/play-services/setup.html#Setup)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-01-10T06:41:16.387

**请仔细阅读**

> 如果一切都与谷歌代码相同，那么请检查清单文件，在我的情况下，我添加了地理键和地图键，这就是发生异常的原因，

**注意 - 不要在清单文件中添加两个键删除映射键**

```
meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="@string/google_maps_key"/> 
```

添加此代码。

```
 <meta-data
        android:name="com.google.android.geo.API_KEY"
        android:value="@string/auto_location"/>

 <meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version"/> 
```

# shell - 根据列匹配从两个文件创建输出文件

> ID：13719266
> 
> 赞同：0
> 
> 时间：2012-12-05T08:47:15.767
> 
> 标签：shell, sed, awk

我有两个文件 input1.vcf.gz 和 input2.vcf.gz 输出将是 output.vcf.gz

输入1.vcf.gz

```
X   60060   2   572 G:1 C:0
X   60070   2   572 G:0.996503  T:0.0034965 
```

输入2.vcf.gz

```
X   60060   .   G   C   .   .    ;AA=0.131148;AFE=0.154639;EUN=0;AFW=0.181818;MED=0.00446429;LAT=0.0165746;VT=SNP;AF=0.04
X   60070   .   G   T   .   .    ;AA=0;AFE=0;EUN=0;AFW=0;MED=0;LAT=0;AF=0.0009;VT=SNP 
```

输出.vcf.gz

```
X   60060   .   G   C   .   .    ;AA=0.131148;AFE=0.154639;EUN=0;AFW=0.181818;MED=0.00446429;LAT=0.0165746;VT=SNP;AF=0.04;ASNE=0

    60070   .   G   T   .   .    ;AA=0;AFE=0;EUN=0;AFW=0;MED=0;LAT=0;AF=0.0009;VT=SNP;ASNE=0.0034965 
```

这里 ASNE=0 和 ASNE=0.0034965 基于列匹配附加到第二个文件

所有文件均为 .gz 格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:33:33.603

这就是我认为你正在尝试做的事情，使用第一列和第二列作为键：

```
awk 'FNR==NR { split($NF,a,":"); b[$1,$2]=a[2]; next } ($1,$2) in b { print $0 ";ASNE=" b[$1,$2] }' input1.vcf input2.vcf 
```

结果：

```
X   60060   .   G   C   .   .    ;AA=0.131148;AFE=0.154639;EUN=0;AFW=0.181818;MED=0.00446429;LAT=0.0165746;VT=SNP;AF=0.04;ASNE=0
X   60070   .   G   T   .   .    ;AA=0;AFE=0;EUN=0;AFW=0;MED=0;LAT=0;AF=0.0009;VT=SNP;ASNE=0.0034965 
```

因此，对于压缩文件，请尝试：

```
awk 'FNR==NR { split($NF,a,":"); b[$1,$2]=a[2]; next } ($1,$2) in b { print $0 ";ASNE=" b[$1,$2] }' <(gzip -dc input1.vcf.gz) <(gzip -dc input2.vcf.gz) | gzip > output.vcf.gz 
```

请让我知道情况如何。HTH。

# java - 从 Java 调用 Objective-C 方法

> ID：13719269
> 
> 赞同：3
> 
> 时间：2012-12-05T08:47:24.133
> 
> 标签：java, objective-c, java-native-interface, jna

谁能告诉我如何从 Java 调用 Objectice-C 方法。

我听说了 JNI 和 JNA 的两种技术。

有一个用 Objective-C 编写的用于 IOS 应用程序的代码，我想在 Java 项目中使用该代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:38:40.490

[Rococoa](http://code.google.com/p/rococoa/)有助于使用 Java 中的 ObjectiveC 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-07T09:08:32.160

# JNA（Java 原生访问）

[*JNA*](https://github.com/java-native-access/jna)是一个可用于访问本机方法的库。如果您的应用程序的其余部分是用 Java 编写的，这是非常实用的，因为您可以避免编写任何本机代码。

要与 Objective-C 交互，您需要与 Objective-C 的[运行时库](https://developer.apple.com/documentation/objectivec/objective-c_runtime?language=objc)进行交互。这是一个非常基本的例子。

```
// This method sets NSWindow.allowsAutomaticWindowTabbing to false.
// Note that it will terminate your application on macOS 10.11 and earlier as described below.
// https://developer.apple.com/documentation/appkit/nswindow/1646657-allowsautomaticwindowtabbing
void disableAutomaticWindowTabbing() {
  Pointer classId = FoundationLibrary.INSTANCE.objc_getClass("NSWindow");
  Pointer selector = FoundationLibrary.INSTANCE.sel_registerName("setAllowsAutomaticWindowTabbing:");
  FoundationLibrary.INSTANCE.objc_msgSend(classId, selector, false);
}

// The interface of the runtime library of Objective-C.
interface FoundationLibrary extends Library {
  FoundationLibrary INSTANCE = Native.load(
      "Foundation",
      FoundationLibrary.class,
      Map.of(Library.OPTION_STRING_ENCODING, StandardCharsets.UTF_8.name()));

  // https://developer.apple.com/documentation/objectivec/1418952-objc_getclass?language=objc
  Pointer objc_getClass(String className);

  // https://developer.apple.com/documentation/objectivec/1418557-sel_registername?language=objc
  Pointer sel_registerName(String selectorName);

  // https://developer.apple.com/documentation/objectivec/1456712-objc_msgsend?language=objc
  // The return type is actually "generic". You might need to declare this function
  // multiple times with different return types if you need them.
  void objc_msgSend(Pointer receiver, Pointer selector, Object... args);
} 
```

但是请注意，JNA 无法处理本机异常。如果`objc_msgSend`抛出异常，您的应用程序会立即崩溃。上面的示例将引发异常并因此在 macOS 10.11 及更早版本上使应用程序崩溃，因为`setAllowsAutomaticWindowTabbing`在 macOS 10.12 之前不可用。

# JNI（Java 本地接口）

使用[*JNI*](https://docs.oracle.com/en/java/javase/11/docs/specs/jni/index.html)，您需要编写自己的本地代码（即使用*Objecttive-C++*）。因此，您的项目设置变得更加复杂。但是，如果您希望在 Objective-C 中编写逻辑的主要部分，这可能是一个不错的选择。另请注意，Objective-C 编译器可能会发现 API 的一些误用，这会使应用程序更加健壮。我与 JNA 相比，您还能够处理本机异常。

# 其他

还有[JEP 389: Foreign Linker API (Incubator)](https://openjdk.java.net/jeps/389)。我认为它是 JNA 的替代方案，但有 JVM 的本机支持。除此之外，还有其他库和工具在 JNA 或 JNI 之上工作，专门与 Objective-C 进行交互。

*   [洛可可](https://github.com/iterate-ch/rococoa)
*   [JNAerator](https://github.com/nativelibs4java/JNAerator)
*   [Java-Objective-C-Bridge](https://github.com/shannah/Java-Objective-C-Bridge)

**Java-Objective-C-Bridge**的作者的博客文章[从 Java 讲 Cocoa](https://sjhannah.com/blog/2012/10/29/speaking-cocoa-from-java/)也可能是一本有趣的读物。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:17:00.023

我认为这是不可能的。

您可以做的是使用您想要共享的代码编写 ac/c++-library，并在 Objective-c 和 java（通过 JNI）中使用它。无论如何，您必须重写您的代码以将其移植到 java（您将有多余的源代码），或者从您的 Objective-C 项目中删除您的代码并创建您可以在您的 Objective-C 中使用的 ac 库和你的java项目。**

# objective-c - CTFramesetterSuggestFrameSizeWithConstraints 返回超出约束的宽度？

> ID：13719272
> 
> 赞同：2
> 
> 时间：2012-12-05T08:47:35.403
> 
> 标签：objective-c, multithreading, core-text, sizewithfont

在我的应用程序中，我需要根据其文本内容动态更改某些视图的大小。起初我`-sizeWithFont`用来做字符串测量。在我的应用程序中有很多测量要做，所以我把它`-sizeWithFont`放到了后台，因为苹果的文档说“在 iOS 10.4 及更高版本中，你可以从应用程序的辅助线程中使用此类扩展中描述的方法，而不仅仅是来自主线程。”。然而，事实是这个方法会调用一些不是线程安全的 WebCore 函数，所以应用程序会崩溃。此错误已提交，但仍未修复。（有关此的一些问题，例如[MultiThread Crash 中的 sizeWithFont！](https://stackoverflow.com/questions/3527877/sizewithfont-in-multithread-crash)）

由于性能问题，我无法将测量结果放入主线程，因此我正在尝试 CoreText 框架。我首先为我的字符串创建一个对应项`NSAttributedString`，然后使用一些 CT 函数进行测量。我知道在 iOS 6 中，有非常简单的 API，比如`-size`可以完成这项工作，但由于兼容性，我无法使用它们。`CTFramesetterSuggestFrameSizeWithConstraints()`所以我不得不调用一些像or这样的低级函数`CTFramesetterCreateFrame()`，但我发现这些**CT 方法有时不尊重我的约束**。**例如，如果我`CGSize(200, CGFLOAT_MAX)`为设置 a `CTFramesetterSuggestFrameSizeWithConstraints()`，这应该意味着宽度有一个约束，但实际上它会返回一些具有更大宽度的尺寸，例如 205。**同样的事情发生在`CTFramesetterCreateFrame()`. 如果我调用它然后调用`CTFrameGetLines()`，我有时会得到一个少于应有的行数，因为某些行的宽度超过 200 像素并且包含的​​单词比应有的多。

很抱歉描述太长，这是我的问题：

1.  也许使用 CT 框架来测量一个简单的字符串是一种浪费，那么有没有办法让 -sizeWithFont 可以安全地在后台使用？
2.  如果 的行为`CTFramesetterSuggestFrameSizeWithConstraints()`是设计使然，有没有办法让 CT 功能严格遵守我的约束？如果没有，我如何测量具有固定宽度的字符串并且换行模式是自动换行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:30:26.200

使用 CTFramesetterSuggestFrameSizeWithConstraints()，并在返回结果大小之前尝试将 result.width 参数设置为约束大小的宽度。

# c# - 从后面的代码将集合绑定到 jquery 变量

> ID：13719273
> 
> 赞同：2
> 
> 时间：2012-12-05T08:47:40.167
> 
> 标签：c#, jquery, asp.net

我[在 jquery 中找到了一个很好的幻灯片](http://www.willmcgugan.com/2011/2/26/ken-burns-effect-with-javascript-and-canvas/)示例，但图像路径如下所示：

```
 <script type="text/javascript">
        $(function () {
            $('#kenburns').kenburns({
                images: ['http://farm5.static.flickr.com/4088/4967743590_8e1cbba701_b.jpg',  
                         'http://farm5.static.flickr.com/4130/4967739638_edfdb0a52b_b.jpg',  
                         'http://farm5.static.flickr.com/4126/4967708868_5625c200bd_b.jpg'
                        ],
                        frames_per_second: 30,
                        display_time: 7000  
                            ........
                                    });
                      });

    </script> 
```

在 js 文件中，它看起来像这样：

```
 (function($){

    $.fn.kenburns = function(options) {
        ..................

        var images = [];
        ...................
     }}); 
```

所以我想要的是从后面的代码中提供图像源，`List<string>`或者`string[]`类似的东西。图像将保存在磁盘上，我将从数据库中获取它们的路径。

有没有办法做到这一点？还是有更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:02:15.420

您可以将 C# 字符串数组转换为 JavaScript 数组声明，如下所示：

```
string[] myImageUrls = new string[] { "image1.jpg, image2.jpg" };
var serializer = new JavaScriptSerializer();
string myJavaScriptArray = serializer.Serialize(myImageUrls); 
```

这个例子给你字符串`["image1.jpg","image2.jpg"]`

现在，如果您的第一个 JavaScript 块内联在 ASPX 页面中，您可以将此字符串放入代码隐藏中的属性中，例如

```
protected string ImageUrlArray {
    get {
        return new JavaScriptSerializer()
            .Serialize(getImageUrlArrayFromDatabase());
    }
} 
```

然后将其“包含”在您的脚本块中，如下所示：

```
<script type="text/javascript">
    $(function () {
        $('#kenburns').kenburns({
            images: <%= ImageUrlArray %>,
            frames_per_second: 30,
            display_time: 7000  
            ........
        });
    });
</script> 
```

`<%= ImageUrlArray %>`被你的属性值替换，你最终得到了数组。

# javascript - if/else语句怎么写？

> ID：13719274
> 
> 赞同：1
> 
> 时间：2012-12-05T08:47:40.983
> 
> 标签：javascript, if-statement

```
x = 1;    
if(x = 10) {x = 1;} 
else {x = x + 1;}
alert (x); 
```

结果总是`1`, 而不是`1,2,3...`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T08:48:51.870

代替

```
if(x = 10) {x = 1;} 
```

和

```
if(x == 10) {x = 1;} 
```

因为`x=10`return `10`，在测试中评估为 true，因此代码`{x = 1;}`被执行。

来自[MDN 关于 if...else](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)：

> 任何非未定义、null、0、NaN 或空字符串 ("") 的值，以及任何对象，包括值为 false 的布尔对象，在传递给条件语句时计算结果为 true

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T08:49:00.920

```
x = 1;    
if(x 
```

> ==

```
10) {x = 1;} 
    else {x = x + 1;}
    alert (x); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T08:49:20.983

如果条件应该检查​​如下

```
x=1;
if(x == 10)
{x = 1;}
else
{x = x+ 1;}
 alert(x) 
```

谢谢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T08:53:29.543

```
var x = 1;
x = (x == 10)? 1:x+=1;
alert(x); 
```

# javascript - JS - 制作自定义 AJAX 函数的问题

> ID：13719277
> 
> 赞同：0
> 
> 时间：2012-12-05T08:47:47.333
> 
> 标签：javascript, ajax

我正在尝试创建一个函数来处理我的 AJAX 帖子。我能够让它发送数据，但在从请求中接收数据时遇到问题。

本质上，我有一个`ajaxPost(paramArray, target)`名为`target`.

我认为问题来自`ajaxReq.onreadystatechange`，我认为它正在跳过它并结束脚本。

我不知道我是否正确解释了我的意思，这是脚本：

```
function ajaxPost(paramArray, target){
    var param = '';
    var key;
    for (key in paramArray){
        param = param + key + '=' + paramArray[key] + '&';
    }
    param = param.substring(0, param.length - 1);

    var ajaxReq = new XMLHttpRequest();
    ajaxReq.onreadystatechange = function(){
        if(ajaxReq.readyState == 4 && ajaxReq.status == 200){
            return ajaxReq.responseText;
            document.write('Test?');
        }
    }
    ajaxReq.open('POST', target, true);
    ajaxReq.setRequestHeader('Content-type', "application/x-www-form-urlencoded");
    ajaxReq.send(param);
} 
```

这是“完成工作”的函数，下面是调用上述函数的函数示例：

```
function submitPost(form){
    var title = form.title.value;
    var text = form.textBody.value;
    var name = form.nameOfPoster.value;
    var paramArray = new Array();
    paramArray['title'] = title;
    paramArray['text'] = text;
    paramArray['name'] = name;
    if (ajaxPost(paramArray, 'post.php')){
        location.reload(true);
    }
} 
```

这实际上将参数发送到`ajaxPost()`，如果它返回某些内容，它会重新加载页面。

正如我所说，我认为它忽略了本文开头提到的一部分。我只是想知道是否可以在收到该数据之前暂停该功能。

请不要告诉我使用 jQuery，我正在尝试使用 javascript :)

谢谢。如果您有其他提示，请务必包含它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:53:45.687

AJAX 是异步的。您尝试使用它的方式将不起作用，因为`ajaxReq.onreadystatechange`请求完成后将执行功能。同时，脚本执行也不会停止。所以这：

```
if (ajaxPost(paramArray, 'post.php')){
        location.reload(true);
} 
```

将在之前执行`ajaxReq.onreadystatechange`

您应该做的是将回调传递给您的函数：

```
function ajaxPost(paramArray, target, callback){
    var param = '';
    var key;
    for (key in paramArray){
        param = param + key + '=' + paramArray[key] + '&';
    }
    param = param.substring(0, param.length - 1);

    var ajaxReq = new XMLHttpRequest();
    ajaxReq.onreadystatechange = function(){
        if(ajaxReq.readyState == 4 && ajaxReq.status == 200){
            callback(ajaxReq.responseText);
            document.write('Test?');
        }
    }
    ajaxReq.open('POST', target, true);
    ajaxReq.setRequestHeader('Content-type', "application/x-www-form-urlencoded");
    ajaxReq.send(param);
} 
```

然后：

```
function submitPost(form){
    var title = form.title.value;
    var text = form.textBody.value;
    var name = form.nameOfPoster.value;
    var paramArray = new Array();
    paramArray['title'] = title;
    paramArray['text'] = text;
    paramArray['name'] = name;
    ajaxPost(paramArray, 'post.php', function(res) { if(res)  location.reload(true); });
} 
```

# javascript - jQuery - 上键转到下一个输入字段

> ID：13719282
> 
> 赞同：1
> 
> 时间：2012-12-05T08:48:05.193
> 
> 标签：javascript, jquery

我目前正忙于将结果合并到一个变量中的 13 个输入字段，我必须将其拆分为 13 个，因为我需要添加一个块效果，就像你会在现实世界中的许多表单上找到的那样。每个块的限制是一个，我需要找到，这样当你插入一个数字时，它会转到下一个字段，直到所有字段都被填充，然后验证功能将启动。

继承人的html：

```
<div id="error"></div>

<form id="idCheck">
<input class="id" id="idnumber1" maxlength="1" />
<input class="id" id="idnumber2" maxlength="1"  />
<input class="id" id="idnumber3" maxlength="1"  />
<input class="id" id="idnumber4" maxlength="1"  />
<input class="id" id="idnumber5" maxlength="1"  />
<input class="id" id="idnumber6" maxlength="1"  />
<input class="id" id="idnumber7" maxlength="1"  />
<input class="id" id="idnumber8" maxlength="1"  />
<input class="id" id="idnumber9" maxlength="1"  />
<input class="id" id="idnumber10" maxlength="1"  />
<input class="id" id="idnumber11" maxlength="1"  />
<input class="id" id="idnumber12"  maxlength="1" />
<input class="id" id="idnumber13" maxlength="1"  /><span id="status"></span>
<p> <input type="submit" id="check" value="Check" /> </p>
 </form>

<div id="result"> </div> 
```

继承人的javascript：

```
function Validate() {
   jQuery('#error p').remove();
   var error = jQuery('#error');
  var p1 = jQuery('#idnumber1').val();
  var p2 = jQuery('#idnumber2').val();
  var p3 = jQuery('#idnumber3').val();
  var p4 = jQuery('#idnumber4').val();
  var p5 = jQuery('#idnumber5').val();
  var p6 = jQuery('#idnumber6').val();
  var p7 = jQuery('#idnumber7').val();
  var p8 = jQuery('#idnumber8').val();
  var p9 = jQuery('#idnumber9').val();
  var p10 = jQuery('#idnumber10').val();
  var p11 = jQuery('#idnumber11').val();
  var p12 = jQuery('#idnumber12').val();
  var p13 = jQuery('#idnumber13').val();

  var idNumber = p1 + p2 + p3 + p4 + p5 + p6 +p7 + p8 + p9 + p10 + p11 + p12 + p13;
  }; 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:55:31.183

您可以使用`keyup`和`next`方法：

```
$('input.id').on('keyup', function(){
    if (this.value.match(/\d+/)) {
        var $this = $(this);
        if ($this.next('input').length) {
          $this.next().focus();
        } else {
          Validate()
        }  
    }
})

function Validate() {
   jQuery('#error p').remove();
   var error = jQuery('#error');
   var idNumber = $('input.id').map(function(){
                      return this.value
                  }).get().join(''); 
} 
```

[http://jsfiddle.net/7838f/](http://jsfiddle.net/7838f/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:54:19.697

你可以试试这个：

```
$('#myInput').focus(function(){
    $(this).next('input').focus();
}) 
```

或者

```
$("input").change(function() {
  var inputs = $(this).closest('form').find(':input');
  inputs.eq( inputs.index(this)+ 1 ).focus();
}); 
```

两者都取自[这里](https://stackoverflow.com/questions/2455225/how-do-i-move-focus-to-next-input-with-jquery)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:04:20.607

试试下面的方法

```
jQuery('.id').bind({keyup:function(){$(this).next().focus()}}); 
```

**更新：** [jsFiddle 示例](http://jsfiddle.net/zdLKt/)

# javascript - 如何使用javascript触发表单验证的本机验证气泡/工具提示？

> ID：13719283
> 
> 赞同：4
> 
> 时间：2012-12-05T08:48:12.203
> 
> 标签：javascript, html

我有一个带有 html5 验证（“必需”等）属性的表单。

有没有办法在不模拟表单提交按钮的“点击”的情况下触发本机验证气泡/工具提示的出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-09-19T13:33:50.243

正如评论中所说，您可以使用该`.reportValidity()`方法。像往常一样，除了 IE 之外，它得到了[广泛的支持。](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/reportValidity#Browser_compatibility)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T20:45:14.180

您只是无法触发本机浏览器表单验证。

# string - VBA certain Part of a String

> ID：13719285
> 
> 赞同：3
> 
> 时间：2012-12-05T08:48:21.707
> 
> 标签：string, excel, vba

I have an excel column with strings like this one: ABC-1234-GLK-1234-10TH8E10-21 71-D I need to give to a variable the value GL-1234 (the substring between the 2nd dash and the 4th). I tried

`x=Mid(string, 10, 8)`

but the problem is that not all the strings have the same length, however the only constant is that the substring that i want is between the 2nd and the 4th dash.

Any ideas?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T09:40:03.827

Split the string and extract what you want:

```
Dim dataSplit() As String
Dim dataString As String

dataSplit = Split(Sheet1.Range("C14").Value2, "-")

dataString = dataSplit(2) & "-" & dataSplit(3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:27:25.263

You can try the following, although I don't think it is the most elegant or the easiest solution:

```
x = ""
p1 = InStr(1, string, "-")
If p1 <> 0 Then
    p2 = InStr(1 + p1, string, "-")
    If p2 <> 0 Then
        p3 = InStr(1 + p2, string, "-")
        If p3 <> 0 Then
            p4 = InStr(1 + p3, string, "-")
            If p4 <> 0 Then
                x = Mid(string, p2 + 1, p4 - p2 - 1)
            End If
        End If
    End If
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:38:59.807

this will return 2nd dash and 4th dash, B1 is string : ABC-1234-GLK-1234

```
=MID(B1,FIND("-",B1,FIND("-",B1)+1),FIND("-",B1,FIND("-",B1,FIND("-",B1,FIND("-",B1)+1)+1)+1) - FIND("-",B1,FIND("-",B1)+1)) 
```

# c# - C# 中的新 AutoResetEvent (true) 用法？

> ID：13719286
> 
> 赞同：15
> 
> 时间：2012-12-05T08:48:22.773
> 
> 标签：c#, .net, multithreading, autoresetevent

我在想 ，

*为什么*我想`true`在 ctor 中传递 a `AutoResetEvent` ？

我创建了一个`waitHandle`，以便任何会打电话`WaitOne()`的人都会**等待**。

如果我用 a 实例化它`true`，就好像它被立即发出信号一样——这就像一个没有等待的正常流程。

```
 EventWaitHandle _waitHandle = new AutoResetEvent (false);

void Main()
{
  new Thread (Waiter).Start();
    Thread.Sleep (1000);                   
    _waitHandle.Set();                    

Console.ReadLine();
}
  void Waiter()
  {
    Console.WriteLine ("AAA");
    _waitHandle.WaitOne();                 
    Console.WriteLine ("BBBB");
  } 
```

输出 ：

```
AAA...(delay)...BBB 
```

更改为 : `EventWaitHandle _waitHandle = new AutoResetEvent (true);`输出将是 :

```
AAABBB 
```

**问题**：

*   我为什么要这样做？（通过`true`）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T08:56:29.483

这种情况是调用的*第一个*`WaitOne`线程应该立即通过，而不会阻塞。

检查[AutoResetEvent 的 Silverlight 文档](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.autoresetevent%28v=vs.95%29.aspx)（奇怪的是，.Net 版本上的文档不一样）：

> 指定`true`for`initialState`创建一个`AutoResetEvent`处于信号状态。如果您希望第一个等待`AutoResetEvent`立即释放而不阻塞的线程，这将很有用。”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T09:07:34.200

这里有一个很好的解释：[Signaling with Event Wait Handles](http://www.albahari.com/threading/part2.aspx#_Signaling_with_Event_Wait_Handles)。

套用句，等待句柄就像一个旋转门，来电者`WaitOne`就像一排人在旋转门前排队。每次`Set`被调用时，旋转门都允许一个人通过（通常按照他们排队的顺序，但有时由于操作系统的怪癖而不是）。

如果它是用'true'构造的，那么闸机已经打开了，但只对一个人开放，这样第一个呼叫者`WaitOne`将立即“让通过”，但任何后续呼叫者仍然需要排队。

显然，如果您只有一个 的调用者，则这些都不适用`WaitOne`，因此“真实”选项将没有实际意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:46:03.163

当然。

一项要求 - 线程 X 必须在应用程序启动时运行，此后每 10 秒运行一次。定时的 WaitForSingleObject(myARE,10000) 可以完成这项工作。将 ARE 初始化为“true”将确保线程在启动时运行。

编辑：

```
myARE.WaitOne(10000); 
```

抱歉 - 我从 C# 模式退出到 WINAPI，简单地说:(

# c++ - 防撞正则表达式？

> ID：13719291
> 
> 赞同：1
> 
> 时间：2012-12-05T08:48:55.287
> 
> 标签：c++, c, regex, crash

我一直在几个服务器中使用标准的 UNIX 版本的正则表达式，这些服务器必须对错误具有很强的弹性。多年来，我发现了一些案例，其中要么是用户输入了格式错误的正则表达式，要么是目标字符串中的一些奇怪字符导致了分段违规等，从而导致服务器崩溃。对于我们的系统，这是不可接受的。

在这些格式错误的模式或匹配字符串中是否有一个版本的正则表达式只会导致错误而不会使服务器崩溃？

由于在检查这些模式时此代码主要是多线程的，因此我不想使用 setjmp longjmp 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:00:36.353

[`RE2`](http://code.google.com/p/re2/)Google 最初为 Go 语言开发了C++ 正则表达式库，但现在已经为大多数脚本语言（如 Perl、Python）提供了包装器，它声称：

> RE2 使用自动机理论来保证正则表达式搜索在与输入大小成线性关系的时间内运行。RE2 实现了内存限制，因此可以将搜索限制为固定的内存量。RE2 被设计为使用较小的固定 C++ 堆栈占用空间，无论它必须处理什么输入或正则表达式；因此 RE2 在线程堆栈不能任意增长的多线程环境中很有用。

因此，似乎可以选择任何三个：快速、可靠、小型。

# .net - Microsoft Unity - DerivedTypeConstructorSelectorPolicy 内存泄漏

> ID：13719295
> 
> 赞同：0
> 
> 时间：2012-12-05T08:49:06.730
> 
> 标签：.net, memory-leaks, unity-container

因此，我们遇到了一个问题，即容器在应用程序期间持有 DerivedTypeConstructorSelectorPolicy 的实例。如果不是因为 TypeInterceptionStrategy 中的以下两行代码将旧策略包装到一个新策略中，那么这不会那么糟糕，然后它现在保存两个实例（或更多，每次调用 Resolve 以获取拦截的类会使问题复杂化）。您可以在运行 .NET Memory Profiler 时看到这一点。

```
IConstructorSelectorPolicy originalConstructorSelectorPolicy = PolicyListExtensions.Get<IConstructorSelectorPolicy>(context.Policies, (object) context.BuildKey, out containingPolicyList);
PolicyListExtensions.Set<IConstructorSelectorPolicy>(containingPolicyList, (IConstructorSelectorPolicy) new TypeInterceptionStrategy.DerivedTypeConstructorSelectorPolicy(proxyType, originalConstructorSelectorPolicy), (object) context.BuildKey); 
```

当你有很多类被拦截时，这会导致 Gen 2 集合崩溃，然后你会在内存中出现 GC 无法回收的漏洞，尤其是在复制策略以确保线程安全时。一旦您在策略列表中有足够数量的项目，它将被移至 LOH，这使得颠簸更加严重。

我应该警告这一点，因为我们的应用程序在 IIS Classic 中运行，而不是在集成管道和 32 位模式下运行，我知道这是双重打击。在 64 位模式下有更多的可寻址空间，这不会那么糟糕。但是，我们仍然被 IIS 提供给我们的虚拟内存卡住了，这很快就发生了，因为 GC 无法在 VM 映射中找到足够的空间来分配额外的内存并且请求开始死亡。

该文件只有 3 个修订版，原始修订版看起来没有这个问题。有没有其他人遇到过这个问题，或者我错过了一些可能解释这种行为的东西？

pastebin 上发布了一个非常简单的程序的链接来说明这一点：http: [//pastebin.com/DYG3GXNm](http://pastebin.com/DYG3GXNm)

使用 .NET 内存探查器（或您选择的探查器）并观察 DerivedTypeConstructorSelectorPolicy，您可以观察它在每次迭代中的增长，并且随着它的增长，您可以检查并看到 originalConstructorSelectorPolicy 一直引用长链中的旧实例。

作为我们拦截多少类的一个例子，它大约有 1300 个左右的注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:16:55.603

在此期间，我找到了解决方案。这是一个简单的修复，但它要求您覆盖 Interception 和 TypeInterceptionStrategy。修复是一个单行程序，仅涉及检查策略列表中出现的类型。

这是来自 TypeInterceptionStrategy 的代码：

```
if (originalConstructorSelectorPolicy is DefaultUnityConstructorSelectorPolicy)
{
    containingPolicyList.Set<IConstructorSelectorPolicy>(new CustomDerivedTypeConstructorSelectorPolicy(proxyType, originalConstructorSelectorPolicy), context.BuildKey);
} 
```

当然，为了改变它，你必须复制 TypeInterceptionStrategy 并做与修复相同的事情，它不能简单地通过覆盖 PreBuildUp 方法来修复。

我将整个修复粘贴在这里，以防其他人遇到问题。

```
public class CustomTypeInterceptionStrategy : BuilderStrategy
{
    public override void PreBuildUp(IBuilderContext context)
    {
        Guard.ArgumentNotNull(context, "context");

        if (context.Existing != null)
        {
            return;
        }

        Type type = context.BuildKey.Type;
        ITypeInterceptionPolicy typePolicy = FindInterceptionPolicy<ITypeInterceptionPolicy>(context);

        if (typePolicy == null)
        {
            return;
        }

        ITypeInterceptor interceptor = typePolicy.GetInterceptor(context);

        if (!interceptor.CanIntercept(type))
        {
            return;
        }

        IInterceptionBehaviorsPolicy behaviorPolicy = FindInterceptionPolicy<IInterceptionBehaviorsPolicy>(context);

        IEnumerable<IInterceptionBehavior> interceptionBehaviors = behaviorPolicy == null
                                                                       ? Enumerable.Empty<IInterceptionBehavior>()
                                                                       : behaviorPolicy.GetEffectiveBehaviors(context, interceptor, type, type).Where(ib => ib.WillExecute);

        IAdditionalInterfacesPolicy interceptionPolicy3 = FindInterceptionPolicy<IAdditionalInterfacesPolicy>(context);
        IEnumerable<Type> additionalInterfaces1 = interceptionPolicy3 != null ? interceptionPolicy3.AdditionalInterfaces : Type.EmptyTypes;
        context.Policies.Set(new CustomEffectiveInterceptionBehaviorsPolicy() { Behaviors = interceptionBehaviors }, context.BuildKey);

        Type[] additionalInterfaces2 = Intercept.GetAllAdditionalInterfaces(interceptionBehaviors, additionalInterfaces1);
        Type proxyType = interceptor.CreateProxyType(type, additionalInterfaces2);

        IPolicyList containingPolicyList;
        IConstructorSelectorPolicy originalConstructorSelectorPolicy = context.Policies.Get<IConstructorSelectorPolicy>(context.BuildKey, out containingPolicyList);

        if (originalConstructorSelectorPolicy is DefaultUnityConstructorSelectorPolicy)
        {
            containingPolicyList.Set<IConstructorSelectorPolicy>(new CustomDerivedTypeConstructorSelectorPolicy(proxyType, originalConstructorSelectorPolicy), context.BuildKey);
        }
    }

    public override void PostBuildUp(IBuilderContext context)
    {
        Guard.ArgumentNotNull(context, "context");

        IInterceptingProxy interceptingProxy = context.Existing as IInterceptingProxy;

        if (interceptingProxy == null)
        {
            return;
        }

        CustomEffectiveInterceptionBehaviorsPolicy interceptionBehaviorsPolicy = context.Policies.Get<CustomEffectiveInterceptionBehaviorsPolicy>(context.BuildKey, true);

        if (interceptionBehaviorsPolicy == null)
        {
            return;
        }

        foreach (IInterceptionBehavior interceptor in interceptionBehaviorsPolicy.Behaviors)
        {
            interceptingProxy.AddInterceptionBehavior(interceptor);
        }
    }

    private static TPolicy FindInterceptionPolicy<TPolicy>(IBuilderContext context) where TPolicy : class, IBuilderPolicy
    {
        TPolicy policy = context.Policies.Get<TPolicy>(context.BuildKey, false);

        if (policy != null)
        {
            return policy;
        }

        return context.Policies.Get<TPolicy>(context.BuildKey.Type, false);
    }

    private class CustomEffectiveInterceptionBehaviorsPolicy : IBuilderPolicy
    {
        public CustomEffectiveInterceptionBehaviorsPolicy()
        {
            this.Behaviors = new List<IInterceptionBehavior>();
        }

        public IEnumerable<IInterceptionBehavior> Behaviors { get; set; }
    }

    private class CustomDerivedTypeConstructorSelectorPolicy : IConstructorSelectorPolicy
    {
        private readonly Type interceptingType;
        private readonly IConstructorSelectorPolicy originalConstructorSelectorPolicy;

        public CustomDerivedTypeConstructorSelectorPolicy(Type interceptingType, IConstructorSelectorPolicy originalConstructorSelectorPolicy)
        {
            this.interceptingType = interceptingType;
            this.originalConstructorSelectorPolicy = originalConstructorSelectorPolicy;
        }

        public SelectedConstructor SelectConstructor(IBuilderContext context, IPolicyList resolverPolicyDestination)
        {
            return FindNewConstructor(this.originalConstructorSelectorPolicy.SelectConstructor(context, resolverPolicyDestination), this.interceptingType);
        }

        private static SelectedConstructor FindNewConstructor(SelectedConstructor originalConstructor, Type interceptingType)
        {
            ParameterInfo[] parameters = originalConstructor.Constructor.GetParameters();
            SelectedConstructor selectedConstructor = new SelectedConstructor(interceptingType.GetConstructor(parameters.Select(pi => pi.ParameterType).ToArray()));

            foreach (string newKey in originalConstructor.GetParameterKeys())
            {
                selectedConstructor.AddParameterKey(newKey);
            }

            return selectedConstructor;
        }
    }
}

public class CustomInterception : Interception
{
    protected override void Initialize()
    {
        this.Context.Strategies.AddNew<InstanceInterceptionStrategy>(UnityBuildStage.Setup);
        this.Context.Strategies.AddNew<CustomTypeInterceptionStrategy>(UnityBuildStage.PreCreation);
        this.Context.Container.RegisterInstance(typeof(AttributeDrivenPolicy).AssemblyQualifiedName, (InjectionPolicy)new AttributeDrivenPolicy());
    }
} 
```

# c++ - 尝试解析为 utree 时出现编译错误

> ID：13719303
> 
> 赞同：1
> 
> 时间：2012-12-05T08:49:29.730
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我正在尝试使用以下代码将字符串解析为 utree：

```
void Parse(const std::string& testString, const MyGrammar<const char*>& parser)
{
    char const* first = testString.c_str();
    char const* last = &first[testString.size()];
    boost::spirit::utree tree;
    boost::spirit::qi::parse(first,last,parser,tree);
    std::cout << "tree: " << tree << '\n';
} 
```

我的语法在哪里

```
namespace spirit  = boost::spirit;    

class MyGrammar : public spirit::qi::grammar<Iterator, spirit::utree(), spirit::qi::space_type>
{
    ...
} 
```

但这无法使用以下消息进行编译：

> 错误 1 ​​错误 C2664: 'bool boost::function4::operator ()(T0,T1,T2,T3) const' : 无法将参数 4 从 'const boost::spirit::unused_type' 转换为 'const boost::spirit ::qi::char_class ' c:\program files\etas\etasadlib\boost\1.49.0\include\boost\spirit\home\qi\nonterminal\rule.hpp 303 MyGrammarTest

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:58:11.257

我从 sehe 中找到了以下帖子：[boost::qi::parse 似乎导致编译错误](https://stackoverflow.com/questions/11389359/boostqiparse-seems-to-cause-compilation-errors)，它回答了这个问题：我需要将短语解析与船长一起使用

```
boost::spirit::qi::phrase_parse(first,last,parser, boost::spirit::qi::space,tree); 
```

# visual-c++ - 为什么我不能在 Cocos2d-x 中包含场景标题

> ID：13719305
> 
> 赞同：0
> 
> 时间：2012-12-05T08:49:40.990
> 
> 标签：visual-c++, cocos2d-x

使用 cocos2dx。创建新场景的 .h 和 .cpp 文件。但不能将其包含在主要场景中。 `Error: Can't find source file "LevelSelect.h"`.

这是文件。水平选择.h

```
#ifndef LEVEL_SELECT_H_
#define LEVEL_SELECT_H_
#include "cocos2d.h"

/**
 * LevelSelector
 */
class LevelSelect : public cocos2d::CCScene
{
public:
    virtual bool init();  
    static cocos2d::CCScene* scene();
    void backCallback(CCObject* pSender);
    CREATE_FUNC(LevelSelect);
};
#endif 
```

水平选择.cpp

```
#include "LevelSelect.h"
#include "AppMacros.h"

USING_NS_CC;

/**
 * Level Select scene
 */

CCScene* LevelSelect::scene()
{
    // 'scene' is an autorelease object
    CCScene *scene = CCScene::create();

    // 'layer' is an autorelease object
    LevelSelect *layer = LevelSelect::create();

    // add layer as a child to scene
    scene->addChild(layer);

    // return the scene
    return scene;
}
bool LevelSelect::init(){
        CCSize visibleSize = CCDirector::sharedDirector()->getVisibleSize();
    CCPoint origin = CCDirector::sharedDirector()->getVisibleOrigin();
    CCSize winSize = CCDirector::sharedDirector()->getWinSize(); 

CCSprite* pSprite = CCSprite::create("resources/main/01_bg.png");

pSprite->setPosition(ccp(visibleSize.width/2 + origin.x, visibleSize.height/2 + origin.y));
    // add the sprite as a child to this layer
    this->addChild(pSprite, 0);
    return true;
    } 
```

尝试使用此代码切换场景

```
void MainMenu::menuNewGameCallback(CCObject* pSender){
     CCScene *pScene = LevelSelect::scene();
    CCDirector::sharedDirector()->replaceScene(pScene); 
} 
```

什么是无效的？为什么我不能使用`LevelSelect::scene();`？如何正确编写场景并从主菜单调用它？

# svn - 带有--depth选项的svn log命令

> ID：13719309
> 
> 赞同：2
> 
> 时间：2012-12-05T08:49:55.737
> 
> 标签：svn

我需要以非递归方式获取 SVN 数据库中特定目录的日志。

```
 svn.exe log HTTP://10.0.3.2:8080/svn/New/Projects --depth 'empty' 
```

表明，

```
svn: E205000: ''empty'' is not a valid depth; try 'empty', 'files', 'immediates', or 'infinity' 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:36:24.237

我无法想象，为什么你想要这个奇怪的命令，但是

`''empty'' is not a valid depth`

告诉我，你的客户端操作系统是 Windows，在这种情况下你必须写“空”

并且--depth 没有--diff 不起作用，因此您的最终命令必须是

`svn.exe log HTTP://10.0.3.2:8080/svn/New/Projects --depth "empty" --diff`

（`/New/Projects`仅记录，没有孩子，日志中*没有文件列表*，但如果发生*了 property-changes ）*

PS：对于 --depth "empty" 我无法检测到忽略孩子的预期有用效果：

`svn log URL/branches/ --depth "empty" --diff`

显示所有分支中发生的**所有修订**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T09:51:39.060

我遇到了同样的问题......我怀疑问题可能是由于客户端和服务器之间的互操作性造成的。

我的客户端版本：

```
$ svn --version
svn, version 1.7.9 (r1462340)
   compiled Apr 14 2013, 10:11:47 
```

我的服务器：

```
Subversion 1.6.2 (r37639) 
```

看起来 --depth 选项在客户端的 1.6.x 版本中不可用

1.7.9 客户端：

```
$ svn log --help | grep depth
  The --depth option is only valid in combination with the --diff option
  and limits the scope of the displayed diff to the specified depth.
  --depth ARG              : limit operation by depth ARG ('empty', 'files',
$ 
```

1.6.x 客户端：

```
$ svn log --help | grep depth
Previous exit value was: 1
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:53:37.030

尝试在关键字周围**不**加引号`empty`并带有`=`符号。

```
svn.exe log http://10.0.3.2:8080/svn/New/Projects --depth=empty 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T14:10:25.640

您需要其他工具，例如。*grep*过滤掉与你无关的日志行

```
svn log http://10.0.3.2:8080/svn/New/Projects --depth empty --diff | grep +++ -B 7 -A 6 
```

这显示了属性更改之前的 7 行和之后的 6 行。

# c# - 编辑网格视图的行

> ID：13719311
> 
> 赞同：0
> 
> 时间：2012-12-05T08:49:58.723
> 
> 标签：c#, asp.net, ms-access

我仍在学习使用gridviews，事实上，我有一个由三个表组成的访问数据库（作为练习的一部分），并使用连接语句显示所有三个表中的值字段。

```
conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\Shopping List.mdb"));
        conn.Open();

        this.Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "alert('a connection was established with the database')", true);

        DataSet ds = new DataSet();

        OleDbDataAdapter dba = new OleDbDataAdapter(@"SELECT Ingredient.IngredientId, Ingredient.IngredientName,  Area.AreaName, Recipe.RecipeName, Ingredient.Quantity 
                                                FROM (Ingredient
                                                INNER JOIN Area ON Ingredient.AreaId = Area.AreaId)
                                                INNER JOIN Recipe ON Ingredient.RecipeId = Recipe.RecipeId", conn);

        dba.Fill(ds);

        gridIngredients.DataSource = ds;
        gridIngredients.DataBind(); 
```

我现在通过将 autoGenerateEditButton 设置为 true 添加了一个编辑按钮。我将如何在行中添加文本框或下拉列表以更新数据？

```
<asp:GridView ID="gridIngredients" runat="server" AutoGenerateColumns="False" 
        BackColor="LightGoldenrodYellow" BorderColor="Tan" BorderWidth="1px" 
        CellPadding="2" ForeColor="Black" GridLines="None" 
    AutoGenerateEditButton="True" 
    onselectedindexchanged="gridIngredients_SelectedIndexChanged" 
    Width="543px" onrowediting="gridIngredients_RowEditing">
        <Columns>
            <asp:BoundField DataField="IngredientId" HeaderText="ID" />
            <asp:BoundField DataField="IngredientName" HeaderText="Ingredient" />
            <asp:BoundField DataField="AreaName" HeaderText="Area" />
            <asp:BoundField DataField="RecipeName" HeaderText="Recipe" />
            <asp:BoundField DataField="Quantity" HeaderText="Quantity" />
        </Columns>
        <FooterStyle BackColor="Tan" />
        <PagerStyle BackColor="PaleGoldenrod" ForeColor="DarkSlateBlue" 
            HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" />
        <HeaderStyle BackColor="Tan" Font-Bold="True" />
        <AlternatingRowStyle BackColor="PaleGoldenrod" />
    </asp:GridView> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:07:03.823

`Columns`您可以按如下方式修改该部分：

```
<Columns>
    <asp:BoundField DataField="IngredientId" HeaderText="ID" />
    <asp:BoundField DataField="IngredientName" HeaderText="Ingredient" />
    <asp:BoundField DataField="AreaName" HeaderText="Area" />
    <asp:BoundField DataField="RecipeName" HeaderText="Recipe" />
    <asp:BoundField DataField="Quantity" HeaderText="Quantity" />

    <asp:TemplateField>
        <HeaderTemplate>
            A custom column
        </HeaderTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="textBox" runat="server"></asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField> 

</Columns> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:21:27.323

对于只读字段，例如成分 ID，添加 ReadOnly="True" 对于由文本框编辑的字段，例如数量。对于特殊的编辑器，如下拉列表或 jQuery 插件，使用 TemplateField 自定义您的 EditItemTemplate（用于编辑）和 ItemTemplate（用于查看）

```
 <asp:BoundField DataField="IngredientId" HeaderText="ID" ReadOnly="True" /> 
    <asp:BoundField DataField="Quantity" HeaderText="Quantity"/>    
    <asp:TemplateField HeaderText="Area">
        <EditItemTemplate>
            <asp:DropDownList ID="DDLArea" runat="server" 
                Text='<%# Bind("AreaCode") %>'>
                <!--items--> 
              </asp:DropDownList>
        </EditItemTemplate>
        <ItemTemplate>
            <asp:Label ID="Label1" runat="server" 
                Text='<%# Eval("AreaName") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField> 
```

# objective-c - 无法使用 gtm-oauth2 连接到 Basecamp API

> ID：13719322
> 
> 赞同：0
> 
> 时间：2012-12-05T08:50:16.283
> 
> 标签：objective-c, xcode, oauth, oauth-2.0, basecamp

我花了最后一天（注意：新手 Objective-C 程序员，但有很多其他语言的经验）弄清楚为什么[gtm-oauth2](https://code.google.com/p/gtm-oauth2/)无法连接到[Basecamp API](https://github.com/37signals/bcx-api/)，但现在我已经放弃并在这里询问。

所以我有一个从头开始编写的应用程序，但它没有工作，所以我破解了 gtm-oauth2 提供的官方 OAuth2Sample，只是用[Basecamp Auth](https://github.com/37signals/api/blob/master/sections/authentication.md)的正确值更改了 Dailymotion 示例的值，我得到了同样的错误。

我得到登录页面，然后是授权页面，当我单击“是，我将允许访问”时发生错误。

在 API 控制台中，我得到：

```
The operation couldn’t be completed. (com.google.GTMOAuth2 error -1000.) 
```

在 Xcode 输出中我得到：

```
2012-12-05 09:35:45.569 OAuth2Sample[29512:303] *** Assertion failure in -[GTMOAuth2SignIn requestRedirectedToRequest:], /Path/To/Xcode/gtm-oauth2-read-only/Examples/OAuth2Sample/../../Source/GTMOAuth2SignIn.m:400
2012-12-05 09:35:45.570 OAuth2Sample[29512:303] *** WebKit discarded an uncaught exception in the webView:resource:willSendRequest:redirectResponse:fromDataSource: delegate: <NSInternalInconsistencyException> response lacks auth code or error 
```

如前所述，代码与 Google 提供的示例中的代码相同，我只是更改了身份验证、令牌和重定向 URL 值。

**更新**：将其缩小为：在第 394 行`NSString *responseStr = [[redirectedRequest URL] query];`，应该获取查询，但由于 URL 是

```
2012-12-05 14:02:18.591 Basecamper[32630:303] req: http://madebybandit.com/#access_token=BAhbBy…long token here…2898 
```

所以我尝试`fragment`了，而不是`query`现在它抛出了这个：

```
2012-12-05 14:07:05.955 Basecamper[32630:303] -[__NSCFString unsignedLongValue]: unrecognized selector sent to instance 0x101a74f30
2012-12-05 14:07:05.956 Basecamper[32630:303] *** WebKit discarded an uncaught exception in the webView:resource:willSendRequest:redirectResponse:fromDataSource: delegate: <NSInvalidArgumentException> -[__NSCFString unsignedLongValue]: unrecognized selector sent to instance 0x101a74f30 
```

怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:31:06.213

[通过使用完美运行的OAuth2Client](https://github.com/nxtbgthng/OAuth2Client)来“修复它” 。

# linux - CGI 无法在 ltib linux 2.6.34 上的 busybox 1.15.0 上使用 httpd 服务器（未找到 404 页面）

> ID：13719323
> 
> 赞同：1
> 
> 时间：2012-12-05T08:50:22.370
> 
> 标签：linux, cgi, http-status-code-404, apache, busybox

我有一些带有 Busybox v1.15.0 的带有 2.6.34 Linux 的工业 ARM linux 板。

https.conf**位于**/ ***etc/***并包含：

```
H:/root/www 
```

在**www**目录中，我还有一个带有***chmod 777*****的cgi-bin**文件夹，并且在该文件夹中有一个名为**testcgi**的文件。

 ***现在我在目标上使用***httpd -v***启动服务器。我可以通过在我的主机上输入目标的 IP 来访问 index.html。但是如果我想通过`IP-of-the-target/cgi-bin/cgitest`在浏览器中调用来执行我的 cgi 脚本，我会得到“404 page not found”。

我还尝试在我的**https.conf**中放置一些指令，例如`A:*`or`/root/www/cgi-bin:foo:bar`但是如果我尝试在控制台中运行服务器，我会得到：

```
): No such file or directory 
```

所以我完全被困在这里，需要你的帮助。

哦，我查看了一些关于 httpd 的文章，例如： [http ://wiki.chumby.com/index.php/Using_the_busybox_HTTP_server](http://wiki.chumby.com/index.php/Using_the_busybox_HTTP_server)

[http://wiki.openwrt.org/doc/howto/http.httpd](http://wiki.openwrt.org/doc/howto/http.httpd)

他们没有告诉任何关于打开 CGI 的信息，暗示 CGI 默认情况下应该在 httpd 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T21:58:10.350

我有同样的问题。原来是权限问题。我使用“/etc/init.d/httpd start”启动 httpd，但脚本使用 -u 开关将用户设置为 httpd。我从 init.d 脚本中删除了“-u httpd”，运行 /etc/init.d/restart，一切正常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T02:46:55.517

我有同样的问题。我发现我的设备没有安装 bash，但是我的脚本以 #!/bin/bash 开头。将其更改为 #!/bin/sh 解决了 404，并执行了我的脚本。***

# windows-phone-7 - Windows 手机中的 AdMob - 广告不可用 (NoFill)

> ID：13719325
> 
> 赞同：1
> 
> 时间：2012-12-05T08:50:27.340
> 
> 标签：windows-phone-7, admob, ads

我已经下载了最新的 SDK 4.0.4 并尝试使用示例中的代码，但总是得到

**错误：广告不可用 (NoFill)**

```
<google:BannerAd xmlns:google="clr-namespace:Google.AdMob.Ads.WindowsPhone7.WPF;assembly=Google.AdMob.Ads.WindowsPhone7"
        AdUnitID="a150bdc5e445270">
        <google:BannerAd.TestDeviceIDs>
            <sys:String>3iys+Gjads@3#%IMJvcYsZd+6UHij58=</sys:String>
        </google:BannerAd.TestDeviceIDs>
</google:BannerAd> 
```

我还检查了 WP7 应用程序是否已添加到 AdMob 帐户中并且它处于活动状态。顺便说一句，我从昨天看到了 10 个请求（这很奇怪，因为我确信我尝试启动它至少 20 次）。在文档中，我发现在 WP 应用程序中，时间滞后 < 2 分钟。我又等了 10 分钟，它也没有帮助我。

AdMob 帐户中启用了测试模式。我尝试在没有 TestDeviceID 和使用它的情况下实现。我还发现了至少 2 个关于 SO 的类似问题，但仍未解决：

[admob wp7 sdk 不起作用，替代广告网络？](https://stackoverflow.com/questions/6436458/admob-wp7-sdk-dont-work-alternative-ad-networks)

[Admob 未显示在新的 Windows Phone 7 Silverlight 项目中](https://stackoverflow.com/questions/8552464/admob-not-showing-in-new-windows-phone-7-silverlight-project)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:59:49.937

我有同样的问题，如果问题继续存在，可能会退出 admob。

现在基于他们的常见问题解答

为什么我在 Windows Phone 7 上不断收到“AdFailed - Ad not available”？

Windows Phone 7 是 AdMob 市场的新产品，因此在短期内您可能会看到一些低填充率，直到广告商将此平台添加到他们的定位中。在开发过程中使用测试模式应该消除库存作为 SDK 集成测试中的变量。请在此处查看有关此功能的讨论。

[https://developers.google.com/mobile-ads-sdk/kb/#wp7whynoads](https://developers.google.com/mobile-ads-sdk/kb/#wp7whynoads)

# c# - 单击 DataGridView 的列标题时发生 NullReferenceException 错误

> ID：13719327
> 
> 赞同：-2
> 
> 时间：2012-12-05T08:50:35.223
> 
> 标签：c#, winforms, datagridview, nullreferenceexception

我`DataGridView`在 WinForm 中使用一个控件。当我单击 ColumnHeader 时遇到异常。它指向这条线：

```
 m_iSWId = Convert.ToInt32(DataGViewDetails.CurrentRow.Cells[8].Value.ToString() 
```

我正进入（状态`NullReferenceException`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:13:38.847

似乎只`CurrentRow` [选择](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentrow.aspx)行而不是列（列标题）

假设您在`DataGridView_Click`Event 中执行此操作，请使用以下代码包装您的代码：

```
if(e.ColumnIndex >= 0)
{     
     //Your code here   
} 
```

# java - 编辑已经存在的方法

> ID：13719328
> 
> 赞同：0
> 
> 时间：2012-12-05T08:50:36.637
> 
> 标签：java, slick2d

我正在使用 Slick 库作为我的小游戏的框架。Graphics2d 对象默认不支持换行符。但是，我发现了这个小修复：

```
private void drawString(Graphics g, String text, int x, int y) {
    for (String line : text.split("\n"))
        g.drawString(line, x, y += g.getFontMetrics().getHeight());
} 
```

由于我对 Java 很陌生，我不确定实现它的最简单方法是什么，并且真的很想得到一些帮助！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:09:04.540

我的建议是：下载你正在使用的 Silk 库的源代码，你可以下载[https://bitbucket.org/kevglass/slick](https://bitbucket.org/kevglass/slick)。

您指定的编辑方法。构建它并将其包含在您的项目中。使用像 NetBeans 或 Eclipse 这样的 IDE 很简单。

您应该提交带有相关补丁的错误，以便将其集成到通用库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:14:58.163

您想要的是：

**a）**重载给定的方法（如果您可以访问该类并可能添加一个更多参数）

例子 ：

`private void drawString(Graphics g, String text, int x, int y,boolean test)`

并通过真正的测试或类似的东西，但这是一种粗鲁的做事方式

**b）**否则，您可以扩展实现您的方法的类并在扩展类中按照您的意愿重新实现该方法

**c)**或作为在这种情况下最可行的第三种选择，只是按照@user1594895 的状态编辑原始方法，但在这种情况下，您必须确保不会使用原始方法，否则考虑做**a)**或**b)**

让我知道您决定使用哪种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:16:43.813

当您只从一个类中调用此方法时，您应该应用一种简单的方法（在您自己的帖子中已经提到）：只需在您的类中插入上面的代码片段，然后像任何其他方法一样调用它......然后是一个辅助方法。（只是问如果你不明白我的意思）

* * *

另一个简单的方法是 - 如果类不是最终的 - 只是扩展类并覆盖方法：

```
public class MyGraphics extends Graphics {
      @Override
      public void drawString(String text, int x, int y) {
         for (String line : text.split("\n"))
            super.drawString(line, x, y += getFontMetrics().getHeight());
      }
} 
```

然后你只需使用你自己的类 - 这与另一个类完全相同，期望你的`drawString`方法不同，你会像这样实例化它：`Graphics g = new MyGrpahics();`

# java - 如何在中心显示游戏开始页面

> ID：13719329
> 
> 赞同：0
> 
> 时间：2012-12-05T08:50:35.963
> 
> 标签：java, android

我想我的问题很简单，所以谢谢你的帮助。我做了一个简单的游戏，终于运行了，但我不能让开始内容显示在页面的中心，谁能帮我解决这个问题？

这是当前页面：

请进入此处查看[渲染](http://img.my.csdn.net/uploads/201212/05/1354694765_6594.jpg) 代码：

资源/布局/activity.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
        android:background="@color/background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        xmlns:android="http://schemas.android.com/apk/res/android">
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="25sp"
                android:textColor="#7ba6df"
                android:text="@string/activity_main_title"/>
            <Button
                android:id="@+id/continue_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/continue_lable"/>
            <Button
                android:id="@+id/new_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/new_game_lable"/>
            <Button
                android:id="@+id/about_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/about_lable"/>
            <Button
                android:id="@+id/exit_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/exit_lable"/>
        </LinearLayout>
    </LinearLayout> 
```

res/values/string.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="activity_main_title">android sudoku</string>
    <string name="continue_lable">开始游戏&lt;/string>
    <string name="about_lable">游戏说明</string>
    <string name="new_game_lable">是否开启音乐&lt;/string>
    <string name="exit_lable">退出游戏&lt;/string>

</resources> 
```

Mainactivity.java

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:55:47.947

试试这个修改后**的 xml**

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
        android:background="@color/background"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:gravity="center_horizontal|center_vertical"
        xmlns:android="http://schemas.android.com/apk/res/android">
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="25sp"
                android:textColor="#7ba6df"
                android:text="@string/activity_main_title"/>
            <Button
                android:id="@+id/continue_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/continue_lable"/>
            <Button
                android:id="@+id/new_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/new_game_lable"/>
            <Button
                android:id="@+id/about_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/about_lable"/>
            <Button
                android:id="@+id/exit_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/exit_lable"/>
        </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:58:06.277

您可以添加到布局代码的三个选项

1.

```
android:gravity="center_vertical|center_horizontal" 
```

2.

```
android:centerInParent="true" 
```

3.

```
android:layout_centerHorizontal="true"
android:layout_centerVertical="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:59:22.220

这将为您工作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background"
    android:gravity="center" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/activity_main_title"
            android:textColor="#7ba6df"
            android:textSize="25sp" />

        <Button
            android:id="@+id/continue_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/continue_lable" />

        <Button
            android:id="@+id/new_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/new_game_lable" />

        <Button
            android:id="@+id/about_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/about_lable" />

        <Button
            android:id="@+id/exit_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/exit_lable" />
    </LinearLayout>

</LinearLayout> 
```

# java - 带有安装程序/激活程序的 NetBeans 平台模块。如何强制从对话框通知

> ID：13719330
> 
> 赞同：1
> 
> 时间：2012-12-05T08:50:40.440
> 
> 标签：java, module, installation, jdialog, netbeans-platform

我对我的简单安装程序/激活程序有疑问。在平台启动期间恢复。我正在学习教程[http://platform.netbeans.org/tutorials/60/nbm-login.html](http://platform.netbeans.org/tutorials/60/nbm-login.html)，一切都很顺利，但现在我已经准备好自己的 JPanel 表单，用于与操作按钮进行对话，因为我不想要如果用户名或密码不正确，则继续。但现在我也无法继续，如果他们是正确的......

```
public class LoginForm extends javax.swing.JPanel {

public LoginForm() {
    initComponents();
}
private void initComponents() {...}

protected javax.swing.JButton jButtonExit;
protected javax.swing.JButton jButtonLogin;
protected javax.swing.JButton jButtonRemindPass;
private javax.swing.JLabel jLabelMsg;
private javax.swing.JLabel jLabelPassword;
private javax.swing.JLabel jLabelUsername;
private javax.swing.JPasswordField jPasswordFieldPass;
private javax.swing.JTextField jTextFieldUser;

public String getUsername() {
    return this.jTextFieldUser.getText();
}

public String getPassword() {
    return new String(this.jPasswordFieldPass.getPassword());
}

public void setErrorLabel(String msg) {
    jLabelMsg.setForeground(Color.RED);
    jLabelMsg.setText(msg);
}

public void setInfoLabel(String msg) {
    jLabelMsg.setForeground(Color.BLUE);
    jLabelMsg.setText(msg);
}
} 
```

在 Installer.java 中，我创建了一个 NotifyDescriptor 并使用空数组设置选项。现在我该如何强制通知 `DialogDisplayer.getDefault().notifyLater(nd);`

继续前进，因为我的平台在加载过程中会堆叠。

```
public class Installer extends ModuleInstall {

LoginForm lf;
NotifyDescriptor nd;

@Override
public void restored() {
    createLoginDialog();
}

private void createLoginDialog() {
    lf = new LoginForm();
    lf.jButtonLogin.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) {
            authenticate();
        }
    });

    lf.jButtonExit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) {
            exit();
        }
    });

    nd = new NotifyDescriptor.Message(lf, NotifyDescriptor.PLAIN_MESSAGE);
    nd.setOptions(new Object[]{});

    nd.addPropertyChangeListener(new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            if (NotifyDescriptor.CLOSED_OPTION.equals(evt.getNewValue())) {
                exit();
            }
        }
    });
   DialogDisplayer.getDefault().notifyLater(nd);
}

private void authenticate() {
    if (lf.getUsername().equals("user")) {
        if (lf.getPassword().equals("pass") {
            System.out.println("Login and pass OK!");

        } else {
            lf.setErrorLabel("Incorrect password");
        }
    } else {
        lf.setErrorLabel("Unknown username");
    }
}

private void exit() {
    LifecycleManager.getDefault().exit();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:50:27.913

更好的方法是通过 DialogDescriptor 创建监听器：

```
 loginPanel = new LoginPanel(this, authenticationCookies);
    loginPanel.setName("loginPanel");
    loginDescriptor = new DialogDescriptor(loginPanel,
            "loginDialog",
            Boolean.TRUE,
            new Object[]{turnOff, login}, //my owna JButtons
            login,
            DialogDescriptor.DEFAULT_ALIGN,
            HelpCtx.DEFAULT_HELP,
            this, // my class implements actionListener !
            Boolean.FALSE);

      loginDescriptor.addPropertyChangeListener(new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            if (evt.getPropertyName().equals(DialogDescriptor.PROP_VALUE) && evt.getNewValue() ==        DialogDescriptor.CLOSED_OPTION) {
                LifecycleManager.getDefault().exit();
            }
        }
    });

    loginPanel.setDescriptor(loginDescriptor);
    //
    createDialog = DialogDisplayer.getDefault().createDialog(loginDescriptor); 
```

}

现在我的动作监听器

```
 @Override
   public void actionPerformed(ActionEvent e) {
    synchronized (this) {
        if (e.getSource() == DialogDescriptor.CANCEL_OPTION) {
            LifecycleManager.getDefault().exit();
        } else {
            actionCommand = e.getActionCommand();
            if (login.equals(actionCommand)) {

            } else if (turnOff.equals(actionCommand)) {
                LifecycleManager.getDefault().exit();

            } else if (button.equals(e.getSource())) {
                loginDescriptor.setClosingOptions(null);

            } else if (cancel.equals(actionCommand)) {
                task.cancel();
                inAwt(loginDescriptor, new Object[]{login, turnOff});
                loginDescriptor.setMessage(loginPanel);
                loginPanel.warning("aborted");

            }
        }
    }
} 
```

吉尔卡

# sql - SQL Server 数据库中的 ID 自动递增和更新

> ID：13719331
> 
> 赞同：0
> 
> 时间：2012-12-05T08:50:48.103
> 
> 标签：sql, sql-server, database

在我的 SQL Server 数据库中，我得到了这个作为我`ID`的例子`SSK0000001`。

我希望它在我的系统中自动递增，并且最后一个`ID`例如“1”的数字（在另一个新记录之后它将成为`SSK0000002`）在我的 SQL Server 数据库中更新。

我知道可以通过在数据库中设置自动增量来完成，但现在我`ID`的是`nchar`.

任何人都可以提供帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:20:57.837

您可以使用基于自动增量列的计算列。应该从 sql server 2005 开始工作。

```
CREATE TABLE [dbo].[TEST1](
    [AUTO_ID] [int] IDENTITY(1,1) NOT NULL,
    [ID]  AS CAST(('SSK'+replace(str([AUTO_ID],(7),(0)),' ','0')) AS NCHAR(10)) PERSISTED,
    [NAME] [nvarchar](10) NULL

) ON [PRIMARY]

GO

INSERT INTO TEST1 (NAME) VALUES ('NAME1')
INSERT INTO TEST1 (NAME) VALUES ('NAME2')
INSERT INTO TEST1 (NAME) VALUES ('NAME3')

SELECT * FROM TEST1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:54:59.573

您可以将右侧转换为 int 并递增：

```
declare @next int
select @next = convert( int, right( max( id ), 7 ) )  + 1
from your table 
```

然后插入为：

```
insert into ... (Id, ...)
values (   'SDK' + right( '0000000' + rtrim(ltrim( str( @next ) ) ), 7 ), ... ) 
```

但这是您可以采取的最**肮脏的解决方案：**

*   这会导致很多数据库锁（因为聚合函数）
*   比自动增量慢
*   很多代码要保留。

**我建议你改用自动增量数据类型**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:54:05.407

我想到的第一个解决方案是

*   分解您的 ID，以便将 SSK 与号码分开

*   增加数字

*   然后用数字回溯 SSK

# android - 日历提供程序批量插入

> ID：13719332
> 
> 赞同：3
> 
> 时间：2012-12-05T08:50:53.460
> 
> 标签：android, android-calendar

您好我正在尝试通过批量插入使用[日历提供程序插入几个日历事件。](http://developer.android.com/guide/topics/providers/calendar-provider.html)我的代码因 IllegalArgumentException 而失败

```
 private void synchronizeCalendar(long calID){
    TLApplication.getDB().getDB().beginTransaction();
    try {
        ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        TLCalendar calendar = TLApplication.getDB().loadCalendar();
        if(calendar.days!=null && calendar.days.size()> 0){
            for (TLDay day : calendar.days) {
                for (TLEvent event : day.events) {
                    List<TLComponent> comps = TLApplication.getDB().loadComponents(event.cid);
                    if(comps.size()>0){
                        TLComponent comp = comps.get(0);
                        //new batch operation
                        ops.add(ContentProviderOperation.newInsert(getCalendarUri())
                                .withValue(Events.DTSTART, getStartDate(event, comp)) //long
                                .withValue(Events.DTEND, getEndDate(event, comp)) //long
                                .withValue(Events.TITLE, getTitle(event)) //String
                                .withValue(Events.EVENT_LOCATION, getLocation(event)) //String
                                .withValue(Events.DESCRIPTION, getNotes(comp)) //String
                                .withValue(Events.CALENDAR_ID, calID) //long
                                .withValue(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID()) //String
                                .build());
                    }
                }
            }
            if(ops.size() > 0){
                ContentResolver cr = ctx.getContentResolver();
                ContentProviderResult[] results = cr.applyBatch(CalendarContract.AUTHORITY, ops);
                for (ContentProviderResult result : results) {
                    Log.v(TAG, "addBatchEvent: " + result.uri.toString());
                }
            }else{
                Log.w(TAG, "No batch operations found! Do nothing");
            }
        }

    }catch (Exception e) {
        Log.e(TAG, "synchronizeCalendar", e);

    } finally{
        TLApplication.getDB().getDB().endTransaction();
    }
} 
```

异常是：java.lang.IllegalArgumentException：列'calendar_id'无效

此代码的模式是来自 sdk 的“ContactManager”示例：*docs/resources/samples/ContactManager/src/com/example/android/contactmanager/ContactAdder.html*

有人有批量插入日历的经验吗？我需要实现一个[同步适配器吗](http://developer.android.com/guide/topics/providers/calendar-provider.html#sync-adapter)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:50:18.423

在我的实现中发现了错误。我曾经`getCalendarUri()`得到`Calendars.CONTENT_URI`，但我必须`Events.CONTENT_URI`用于事件。

# java - 使用正确编码进行内部编译？

> ID：13719338
> 
> 赞同：2
> 
> 时间：2012-12-05T08:51:19.293
> 
> 标签：java, encoding, compiler-construction, internal

我有一个程序将字符串写入 .java 文件，用于`javax.tools`将该 .java 文件编译为 .class 文件，然后我使用修改后的 ClassLoader 尝试获取`Runnable`该类的实例（通过将其转换为字节数组并`ClassLoader.defineClass`用于获取实例）。但是……我有问题。当程序试图获取该类的实例时，它注意到它没有以正确的方式编译。我得到一个`ClassFormatError`写着`Incompatible magic value 1885430635 in class file <Unknown>`. 这是我的（目前相当草率）代码：

```
import java.io.*;
import java.security.SecureClassLoader;

public class EnhancedClassLoader extends SecureClassLoader
{
    public Object createObjectFromFile(String fileName) throws 
    InstantiationException, IOException, IllegalAccessException
    {
        File file = new File(fileName);
        definePackage("compClassPack", null, null, null, null, null, null, file.toURI().toURL());
        byte[] classBytes = null;
        //ReadFileToByteArray
        {
            FileInputStream fis = new FileInputStream(file);
            int size = (int)file.length();
            classBytes = new byte[size];
            int offset = 0;
            int readed;
            while (offset < size && (readed = fis.read(classBytes, offset, size - offset)) != -1)
            {
                offset += readed;
            }
        fis.close();
        }
        Class<?> clazz = defineClass(null, classBytes, 0, classBytes.length);
            //The error is thrown here! ^^^

        return clazz.newInstance();
    }
} 
```

.

```
import java.io.*;
import javax.tools.*;

public class Main
{
    public static void main(String[] args)throws Exception
    {
        File file = new File("Sample.java");
        FileWriter fw = new FileWriter(file);
        BufferedWriter bw = new BufferedWriter(fw);

        String code =
                "package compClassPack;\n" +
                "public class Sample implements Runnable\n" +
                "{\n" +
                "    public Sample(){}\n\n" +
                "    public static void main(String[] args)\n" +
                "    {\n" +
                "        new Sample().run();\n" +
                "    }\n\n" +
                "    public void run()\n" +
                "    {\n" +
                "        System.out.println(\"It worked! :D\");\n" +
                "    }\n" +
                "}";

        for(byte ch : code.getBytes())
        {
            if((char)ch!='\n')
                bw.write((char)ch);
            else
                bw.newLine();
        }
        bw.flush();
        bw.close();

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
        StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);
        Iterable<? extends JavaFileObject> compilationUnits = fileManager.getJavaFileObjects(file);
        JavaCompiler.CompilationTask ct = compiler.getTask(null, fileManager, diagnostics, null, null, compilationUnits);
        ct.call();

        for (Diagnostic<? extends JavaFileObject> diagnostic : diagnostics.getDiagnostics())
            System.out.format("Error on line %d in %d%n",
                    diagnostic.getLineNumber(),
                    ((FileObject)diagnostic.getSource()).toUri());

        fileManager.close();

        EnhancedClassLoader loader = new EnhancedClassLoader();
        Runnable runs = (Runnable) loader.createObjectFromFile(file.getAbsolutePath());
        runs.run(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:20:19.750

您的字节数组不是有效的字节码。如果是，它将以魔术字符串 (hex) 开头`0xCAFEBABE`。相反，您的第一个字节是`1885430635`（十进制），即 hex `0x7061636b`，一次读取一个字节会给出 ASCII characters `pack`，这只是包声明的开始。

换句话说，您正试图像加载字节码一样加载文本文件，显然 Java 无法从这样的字节流构造任何类。

# android - 在 Android 上预加载 RevMob 广告

> ID：13719339
> 
> 赞同：0
> 
> 时间：2012-12-05T08:51:30.663
> 
> 标签：android, revmob

我正在寻找一种在我的 Android 应用中预加载 RevMob 横幅和插页式广告的方法？广告目前可能需要 5 到 30 秒，这对于应用程序类型来说太长了。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:02:35.527

如果您使用广告对象，您可以进行预加载（[RevMob API Docs](http://sdk.revmob.com/android-api/index.html)）并显示如下：

```
Fullscreen fullscreen = revmob.createFullscreen(this);
if (fullscreen.isAdLoaded()) {
  fullscreen.show();
} 
```

但该节目只有在广告已加载的情况下才有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T06:51:58.633

添加到 AndrodMainfest.xml 文件

```
 <uses-permission android:name="android.permission.INTERNET" />
      <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
       <uses-permission android:name="android.permission.READ_PHONE_STATE" />
      <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
          <activity
        android:name="com.revmob.ads.fullscreen.FullscreenActivity"
        android:configChanges="keyboardHidden|orientation" >
    </activity> 
```

// 私有 RevMobFullscreen 全屏；

```
 private static final String REVMOB_APP_ID = "rebmob_id";
 private RevMob revmob;
 RevMobAdsListener revmobListener;
                @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    onStart();
    // Starting RevMob session
    revmob = RevMob.start(this, REVMOB_APP_ID);
    revmob.printEnvironmentInformation(this);

    revmob.setTestingMode(RevMobTestingMode.WITH_ADS); // with this line,
                                                        // RevMob will
                                                        // always deliver a
                                                        // sample ad
    // revmob.setTestingMode(RevMobTestingMode.WITHOUT_ADS);
    // revmob.createFullscreen(this, revmobListener);
    //
    revmob.showFullscreen(this);
    revmob.setTimeoutInSeconds(5);
           } 
```

方法调用

```
 public void onStart() {
       super.onStart();
         revmobListener = new RevMobAdsListener() {
        @Override
        public void onRevMobAdDisplayed() {
            Log.i("[RevMob]", "onAdDisplayed");
        }

        @Override
        public void onRevMobAdReceived() {
            Log.i("[RevMob]", "onAdReceived");
        }

        @Override
        public void onRevMobAdNotReceived(String message) {
            Log.i("[RevMob]", "onAdNotReceived");
        }

        @Override
        public void onRevMobAdDismiss() {
            Log.i("[RevMob]", "onAdDismiss");
        }

        @Override
        public void onRevMobAdClicked() {
            Log.i("[RevMob]", "onAdClicked");
        }
    };
   }

   public void showFullscreen(View view) {
        RevMobFullscreen fs = revmob.createFullscreen(this, revmobListener);
    fs.show();
   }

    public void revMobOpenPopup(View view) {
    // revmob.showPopup(this);
    RevMobPopup popup = revmob.createPopup(this, revmobListener);
    popup.show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:24:04.897

在最新版本中，有一些重要的变化。只有在实施某些中介策略时，您才必须使用“isAdLoaded”。否则，您可以直接使用“显示”和“隐藏”方法。

```
RevMob revmob = RevMob.start(this, APPLICATION_ID);    
RevMobFullscreen fullscreen = revmob.createFullscreen(this);
// it will show the ad. If it is not loaded yet, it will show it after it is completely loaded automatically.
fullscreen.show();
// If you change your scene and you do not want to show the ad anymore, you can call this method:
fullscreen.hide(); 
```

[http://sdk.revmob.com/android-api/index.html](http://sdk.revmob.com/android-api/index.html)

# c# - .net 中的配置文件

> ID：13719341
> 
> 赞同：-1
> 
> 时间：2012-12-05T08:51:35.037
> 
> 标签：c#, configuration, default

我们在 .net 中开发了调度程序，并且运行良好。我们已将电子邮件详细信息存储在向支持组发送电子邮件所需的应用程序配置中。它工作正常。

现在我的问题是，如果我在`Application Configuratio`n 文件中添加新的详细信息，或者如果我更新应用程序文件中的任何详细信息，并且在该操作期间如果我做错了什么，我会收到错误提示

```
 Configuration System Failed to initialise. 
```

在这种情况下，从配置系统中找不到电子邮件详细信息，我们将无法获得电子邮件警报。

任何人都可以解决这个问题吗？

出于某些政策原因，我不想使用 Registry 或 Machine.config 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:57:33.393

如果配置文件的格式错误，您将始终收到该错误。基本上是框架说你在文件内容的布局上犯了错误。

如果您想发布文件的内容，我可能会提供更多帮助。

# linux - 我应该使用 git add before 还是 git commit before

> ID：13719343
> 
> 赞同：1
> 
> 时间：2012-12-05T08:51:54.957
> 
> 标签：linux, git, version-control, centos

我也阅读了文档，但一无所获。

假设我向 repo 添加了新文件。

那么我需要先执行哪个命令：

```
git add -A 
```

或者

```
git commit - m "test" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:56:13.417

您应该首先执行`git add .`以暂存新/修改的文件，然后`git commit -m "your message"`将这些更改写入存储库。

你可以在[这里](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository)看到git 中不同的文件状态，我强烈建议你阅读整本书。

编辑：

为了清楚起见，您所做`git add .`的基本上是告诉 git '嘿，我有新的/修改过的/未跟踪的文件，我想在下一次提交中包含这些文件'，以便下次执行`git commit`这些文件时写入更改到存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:55:15.087

您需要在提交之前添加。否则就没有什么新东西可以提交了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:57:34.347

如果所有更改文件都属于单个提交，您也可以一次性完成：

```
git commit -a -m "<your message>" 
```

# php - 统计与表中数据相同的单词数据

> ID：13719344
> 
> 赞同：0
> 
> 时间：2012-12-05T08:52:02.270
> 
> 标签：php, mysql

我有句子，我想分成单词，然后用停用词表中的数据检查它们。我想计算相同数据的数量（总数）。但是，total 并没有给我相同数据的总数。如何总结我需要的数据？谢谢

```
$word ='temporal. the text mining in a evolutionary a theme patterns  theme threads  clustering'; 
$symbol    = array(".", ",", "\\", "-", "\"", "(", ")", "<", ">", "?", ";", ":", "+", "%", "\r", "\t", "\0", "\x0B");
$cleanMeta = str_replace($symbol, " ", $word);
$key     = strtolower($cleanMeta);
$key = explode(" ", trim($key));

foreach($key as $word_key){
    $query = mysql_query ("SELECT COUNT(stoplist_word) AS total FROM tb_stopword  WHERE stoplist_word = '$word_key'");
    while ($row = mysql_fetch_array($query)) {
        $row1 = $row['total'];
        echo $row1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:01:45.160

考虑到您已经清理了输入字符串，您不需要对每个单词都进行新查询的 foreach。你可以这样做：

```
$word ='temporal. the text mining in a evolutionary a theme patterns  theme threads  clustering'; 
$symbol    = array(".", ",", "\\", "-", "\"", "(", ")", "<", ">", "?", ";", ":", "+", "%", "\r", "\t", "\0", "\x0B");
$cleanMeta = str_replace($symbol, " ", $word);
$key       = trim(strtolower($cleanMeta));
$key       = str_replace("'","''",$key);
$keys      = "'".str_replace(" ","', '", $key)."'";

$query  = mysql_query ("SELECT COUNT(stoplist_word) AS total FROM tb_stopword  WHERE   stoplist_word IN ($keys)");
$row    = mysql_fetch_array($query);
$total = $row['total'];

echo $total; 
```

如果你真的想要 foreach 使用：

```
$total = 0;
foreach($key as $word_key){
    $query = mysql_query ("SELECT COUNT(stoplist_word) AS total FROM tb_stopword  WHERE stoplist_word = '$word_key'");
    while ($row = mysql_fetch_array($query)) {
        $total += $row['total'];
    }
}
echo $total; 
```

# internet-explorer - 相对定位锚（IE Woes）

> ID：13719345
> 
> 赞同：5
> 
> 时间：2012-12-05T08:52:02.600
> 
> 标签：internet-explorer, css-position, anchor

我正在定位这样的锚：

```
#test-link {
    position: relative;
    bottom: 100px
} 
```

因为我需要它，以便当我访问`#test-link`页面时跳转到该特定部分，但高出 100 像素。否则页面滚动得太远，无法满足我的需要。

这在体面的浏览器中运行良好，但在 IE7、8 和 9 中，相对定位被完全忽略。

我尝试了不同的方法来修复它，例如将文本添加到锚点以及各种 CSS 属性（例如`display: block`），但是没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:54:21.353

果然，IE7 到 IE10 并没有去相对定位的元素（而是去它的自然位置）。有一个例外，IE8 就像我预期的那样工作。除了 IE 之外，我检查的几乎所有浏览器都按预期工作。

这似乎是*相对*定位的问题，因为尝试使用*绝对*定位在 IE6 到 IE10 中工作得很好。这当然对您的情况没有帮助，因为您正在尝试相对定位。

在玩了一段时间后我发现的唯一解决方案是使用边距复制相对定位：

```
#movedElement {
    display: block;
    margin: -100px 0 100px;
} 
```

这给了我们在其他浏览器中看到的*类似结果，在所有版本的 IE 中。*我理解，这并不理想，但在找到更好的信息之前可能就足够了。

我将继续研究这一点，并在我了解更多信息时返回。

### 您可以`padding`用于*填充*

同时，在目标区域之前添加一些空白的另一种常见方法是添加边距以扩展该元素上方的空间。这就是我在[http://jsfiddle.net/Px6r9/1/show/#foo](http://jsfiddle.net/Px6r9/1/show/#foo)在线查看的示例中所做的。

```
#paddedContent {
    padding-top: 50px; /* Adds whitespace above content */
} 
```

# matlab - 在 MATLAB 中选择性地指定可选函数参数

> ID：13719346
> 
> 赞同：3
> 
> 时间：2012-12-05T08:52:07.947
> 
> 标签：matlab

> **可能重复：**
> [Matlab 中的默认参数](https://stackoverflow.com/questions/795823/default-arguments-in-matlab)

我有一个要传递大约 7 个参数的函数。其中 3 个是强制性参数，其余 4 个是可选参数。我只想传递前 3 个和最后一个参数。我该怎么做呢？

假设函数是：function[...] = fun(a, b, c, d, e, f, g)

a, b, c - 所需的输入。

d、e、f、g - 可选输入。

我想调用 fun 并传递 a、b、c 和 g 的值。

在 R 中，我可以用一种非常简洁的方式指定它，例如：fun(a=1, b=4, c=5, g=0);

matlab中的等效语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:21:41.353

不幸的是，没有办法做到这一点。您必须为不想传递的参数显式传递空值，并且需要在函数中检查该条件以查看参数是否已传递，以及参数是否为空。像这样的东西：

```
function fun(a, b, c, d, e, f, g)
    if nargin<3
        error('too few parameters');
    end
    if nargin<4 || isempty(d)
        d = default_value;
    end
    % and so on...
end

% call
fun(a, b, c, [], [], g); 
```

最后，将可选参数收集到一个结构中并检查其字段可能会更容易：

```
function fun(a, b, c, opt)
    if nargin<3
        error('too few parameters');
    end
    if nargin>3
        if ~isfield(opt, 'd')
            opt.d = default_value;
        end
    end
end

% call
opt.g = g;
fun(a, b, c, opt); 
```

调用函数更容易，您不必指定空参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T11:35:32.047

在 MATLAB 中执行此操作的惯用方法是将参数值对用于可选参数，或使用指定了可选字段的结构。一种方法是使用[inputparser](http://www.mathworks.com/help/matlab/ref/inputparserclass.html)帮助器类。

# php - 在 PHP 中使用一些 ASCII 代码转换字符串

> ID：13719350
> 
> 赞同：0
> 
> 时间：2012-12-05T08:52:29.803
> 
> 标签：php, ascii, conventions

我不知道这个问题是否已经被问到了！真的好像很新啊！[我在这里](https://stackoverflow.com/questions/4526192/convert-a-string-containing-ascii-to-unicode)找到了类似的东西，但它适用于*Java*，而不是*PHP*。

下面是我的问题。在客户端，我使用 TinyMCE 来获取长文本。在服务器端，我从该字符串中提取前 n 个单词以用于列出目的。

特别是，返回的字符串包含我使用 PHP`strip_tags()`函数删除的 HTML 代码，**它还包含 ASCII 字符**（例如`&nbsp;`空格）。

是否有任何 PHP 函数可以自动转换字符串中包含的所有 ASCII 或能够检测字符串中的所有 ASCII 代码？

在第一种情况下，一切都很容易；在后者中，我应该找到 ASCII，然后用`chr()`函数替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:55:06.440

检查函数[html_entity_decode()](http://php.net/manual/en/function.html-entity-decode.php)

从文档中：

> html_entity_decode() 与 htmlentities() 的相反之处在于它将字符串中的所有 HTML 实体转换为其适用的字符。

# c# - Windows Embedded CE 5.0 移动应用程序 gridview C#

> ID：13719357
> 
> 赞同：0
> 
> 时间：2012-12-05T08:52:47.683
> 
> 标签：c#, visual-studio, windows-ce, windows-mobile-5.0

我正忙于一个 Windows Embedded CE 5.0 移动应用程序。我现在有点卡住了。我正在使用带有数据的数据网格。我想在网格中添加一个额外的列（已经这样做了。我从 dual 添加了 null）。现在在应用程序中，我希望用户能够更改字段的值（一包中有多少单位）。

这是我的数据网格代码：

```
private void gridView()
    {
        conn.Open();
        string query = "select distinct s.sku_id_no SKU_id, (pt.product_type_desc|| ' ' ||ps.prod_size_desc|| ' ' ||c.colour_desc) Product_Desc, null Pack_Units from sku s , product_type pt , prod_size ps , colour c , purch_order_carton_sku pocs, purch_order_carton_sku poc, dual where pocs.order_no ='" + this.orderCode + "' and pocs.carton_code ='" + this.cartonCode + "' and pocs.sku_id_no = s.sku_id_no and s.prod_size_id_no = ps.prod_size_id_no(+) and s.colour_id_no = c.colour_id_no(+)";
        OracleDataAdapter da = new OracleDataAdapter(query, conn);
        OracleDataSet ds = new OracleDataSet();
        da.Fill(ds);
        dgSku.DataSource = ds.Tables[0]; 
    { 
```

然后当屏幕像这样加载时我调用网格：

```
private void frmCartonContentVerification_Load(object sender, EventArgs e)
    {
        gridView();
    } 
```

![在此处输入图像描述](../Images/74eaa9030f4e28bcc13be44a997af2b2.png)

以上就是它目前的样子。因此，当用户例如单击 Pack_Units 的第一个字段时，我希望他们能够编辑该字段。

目标是当他们单击 NEXT 按钮时，必须运行验证程序并检查是否正确。因此，如果有些人也可以向我展示如何从选择字段中获取值，那就太好了？

我在 VS 2005 c# 中使用 Oracle 数据库。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:18:02.630

要获取当前选定单元格的值（假设`dgSku`是您的 DataGrid）：

```
var value = dgSku[dgSku.CurrentCell.RowNumber, dgSku.CurrentCell.ColumnNumber]; 
```

能够编辑字段....恐怕解决方案相当痛苦。您根本需要的是一个由 TextBoxes 组成的列，并且由于 .NETCF 仅提供桌面等效功能的一个子集，您必须自己制作一个。看看[这里](http://www.ehartwell.com/InfoDabble/DataGrid_extensions_for_the_Compact_Framework)和[这里](http://blogs.msdn.com/b/netcfteam/archive/2006/04/25/583542.aspx)，这应该给你一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:48:55.507

StaWho 是对的，CF 不支持内联编辑。Paul Yao 在他的“Programming the .Net Compact Framework”一书中有一个很好的解决方案。

另一种解决方法是将一个文本字段添加到表单并使用网格单击事件来显示和更改 Pack_Units 列的值以进行编辑。

# ruby-on-rails - 运行 rake db:migrate 时出现 Ruby On Rails 错误

> ID：13719359
> 
> 赞同：1
> 
> 时间：2012-12-05T08:52:54.237
> 
> 标签：ruby-on-rails, ruby, database

当我运行 rake db:migrate 我得到这个错误：

耙中止！无法连接到服务器：权限被拒绝服务器是否在本地运行并接受 Unix 域套接字“/var/pgsql_socket/.s.PGSQL.5432”上的连接？

有什么建议么？

这是我的 database.yml 文件：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:00:49.873

问题是您的 rails 应用程序正在尝试使用您在 config/database.yml 上的配置连接到数据库

似乎您已经配置了与 PostgreSQL 的连接，但 rails 应用程序无法连接，因此会引发该错误。

检查您在 config/database.yml 上是否拥有正确的凭据，并确保 postgresql 正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:15:18.457

每当您收到这样的错误时，请检查是否出现问题：

可能没有添加主机。

将**主机**添加到 database.yml 文件 -

```
development:
  adapter: postgresql
  encoding: utf8
  database: myapp_development
  username: myuser
  host: localhost

test:
  adapter: postgresql
  encoding: utf8
  database: myapp_test
  username: myuser
  host: localhost

production:
  adapter: postgresql
  encoding: utf8
  database: myapp_production 
```

# regex - 电话号码的最佳正则表达式是什么？

> ID：13719367
> 
> 赞同：7
> 
> 时间：2012-12-05T08:53:17.537
> 
> 标签：regex, phone-number

> **可能重复：**
> [电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)
> [什么正则表达式将匹配有效的国际电话号码？](https://stackoverflow.com/questions/2113908/what-regular-expression-will-match-valid-international-phone-numbers)

我在 StackOverflow 上看到了一些关于匹配电话号码的正则表达式的帖子。但许多似乎没有考虑到可能的空格或数字之间的破折号以增加可读性。

我来自荷兰，但我想使用匹配任何电话号码的正则表达式，包括国外的电话号码。

我想将它用于插件，例如用于浏览器的 Skype 查找和替换插件。

目前，我正在使用以下正则表达式：

```
^((\+)?)([\s-.\(\)]*\d{1}){8,13}$ 
```

有没有人对那个有任何改进？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T14:39:45.573

我会去

```
# countryCode
(?:\+\d{1,3}|0\d{1,3}|00\d{1,2})

# actual number
(?:[-\/\s.]|\d)+

# combined with optional country code and parantheses in between
 ^(?:\+\d{1,3}|0\d{1,3}|00\d{1,2})?(?:\s?\(\d+\))?(?:[-\/\s.]|\d)+$ 
```

这应该足以匹配大多数欧洲和美国的电话号码表示形式

```
+49 123 999
0001 123.456
+31 (0) 8123 
```

但一般来说，电话号码的重叠文本表示太多，无法为不同国家使用单个正则表达式。如果你能匹配所有的表示，你会得到很多误报。因为瑞士的数字可能是俄罗斯、德国或加纳的其他数字。这一切都是为了平衡精确度和召回率，并将正则表达式优化到您真正需要的国家。

# iphone - MKMapView setRegion 到 Annotation

> ID：13719368
> 
> 赞同：1
> 
> 时间：2012-12-05T08:53:22.320
> 
> 标签：iphone, objective-c, ios, xcode

嗨，伙计们。如果你可以的话，我需要一些帮助。当我按下地图按钮时，我通过 CLLocation 属性加载了一个具有经度和纬度的对象。问题是，我不希望地图将区域/中心坐标设置为用户位置，我希望它在地图加载后进入注释区域，所以我这样做：

```
- (void)loadActiveEstateAnnotation
{
    RE_Annotation *re_annotation = [[RE_Annotation alloc] init];

     if(self.mapView.showsUserLocation == YES)
         NSLog(@"Santa Clause is comming to town");

    re_annotation.longitude = viewingEstate.estateLocation.coordinate.longitude;
    re_annotation.latitude = viewingEstate.estateLocation.coordinate.latitude;
    re_annotation.poiID = [[RE_Shared sharedInstance] selectedEstate];
    re_annotation.title = [NSString stringWithFormat:@"Estate %d",re_annotation.poiID];

    [self.mapView addAnnotation:re_annotation];

    CLLocationCoordinate2D activeAnnotationCoordonate;

    activeAnnotationCoordonate.longitude = re_annotation.longitude;
    activeAnnotationCoordonate.latitude = re_annotation.latitude;

    MKCoordinateSpan activeEstateSpan;

    activeEstateSpan.longitudeDelta = 0.05;
    activeEstateSpan.latitudeDelta = 0.05;

    MKCoordinateRegion activeEstateRegion;

    activeEstateRegion.center = activeAnnotationCoordonate;
    activeEstateRegion.span = activeEstateSpan;

    NSLog(@"----These are the coordinates%f,%f", activeAnnotationCoordonate.longitude, activeAnnotationCoordonate.latitude);   // coordinates are good and valid ive checked them

    [self.mapView setRegion:activeEstateRegion];
    [self.mapView regionThatFits:activeEstateRegion];
    [re_annotation autorelease];

} 
```

所以底线地图视图出口不是设置区域，即使坐标也很好。但是，它确实接受了我给它的不同跨度，但它仍然始终锁定在用户区域；问题是……为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:57:15.917

发生这种情况是因为您的`CLLocationManager`班级每次都更新位置，`MKMapView`所以在这里您更新的当前位置被设置为 MapView 的区域

为了停止这个，只需调用这个方法..

```
[yourLocationManager stopUpdatingLocation]; 
```

在你的`loadActiveEstateAnnotation`方法开始。

# java - getencoded 后，密钥仍然与密码相同

> ID：13719376
> 
> 赞同：2
> 
> 时间：2012-12-05T08:53:43.647
> 
> 标签：java, secret-key

我有一个使用 PBE 生成密钥的功能，我在互联网上搜索并找到了以下代码。

```
class PBE{
    public PBE(String pw) {
        this.password = pw;
    }
    public SecretKey generateKey() throws NoSuchAlgorithmException, InvalidKeySpecException {
        // make password
        PBEKeySpec keySpec = new PBEKeySpec(this.password.toCharArray(),this.salt,20);
        // create key instance
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        // generate key
        SecretKey key = keyFactory.generateSecret(keySpec);
        return key;
    }
} 
```

我使用这个功能作为

```
PBE myPBE = new PBE("102a102s");
SecretKey myKey = myPBE.generateKey();
System.out.println(myKey.getEncoded()); 
```

但是，输出与我输入的密码相同。我不知道为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:18:08.903

根据[文件](http://docs.oracle.com/javase/6/docs/api/java/security/Key.html)，`getEncoded()`退货

> 当在 Java 虚拟机之外需要密钥的标准表示时使用的密钥的外部编码形式，例如将密钥传输给其他方时

由于您使用基于密码的加密，密码的外部形式就是密码本身，因此这种行为是正确的。

# android - 当我通过 android 访问 Web 服务而不是提供预期结果时，Web 服务提供输出“错误”

> ID：13719386
> 
> 赞同：1
> 
> 时间：2012-12-05T08:54:22.020
> 
> 标签：android, web-services, ksoap2, android-ksoap2

抱歉，我是 android 开发新手，我正在尝试通过 kSoup2 访问 Web 服务...

代码如下

```
 package com.example.mytestws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;

import android.os.Bundle;
import android.widget.TextView;
import android.app.Activity;

public class MainActivity extends Activity {

    private static final String SOAP_ACTION="http://tempuri.org/CelsiusToFahrenheit";
    private static final String METHOD_NAME="CelsiusToFahrenheit";
    private static final String NAMESPACE="http://tempuri.org/";
    private static final String URL="http://www.w3schools.com/webservices/tempconvert.asmx";
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tv=(TextView) findViewById(R.id.textView1);
        SoapObject Request=new SoapObject(NAMESPACE, METHOD_NAME);
        Request.addProperty("Celcius", "32");
        SoapSerializationEnvelope soapEnvelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet=true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht=new AndroidHttpTransport(URL);

        try{
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString=(SoapPrimitive) soapEnvelope.getResponse();
            tv.setText(resultString.toString());
        }
        catch(Exception e){

            //e.printStackTrace();
        }

    }

} 
```

清单如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mytestws"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="1"
        android:targetSdkVersion="7" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.mytestws.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我收到的输出是“错误”，而不是通过 Web 服务返回的实际字符串。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:53:19.163

谢谢想通了。简单的拼写错误：

```
Request.addProperty("Celcius", "32"); 
```

相反，它应该是：

```
Request.addProperty("Celsius", "32"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:03:29.480

定义了以下代码：

```
SoapPrimitive resultString=(SoapPrimitive) soapEnvelope.getResponse(); 
```

如下：

```
SoapObject resultString = (SoapObject)envelope.bodyIn; 
```

并在此之后执行以下操作：

```
if(resultString != null)
                {
                      tv.setText(resultString.toString());
                } 
```

并且不要在主线程中进行任何网络操作，而是可以在 AsyncTask 中进行。

# forms - FLASH - 检查文本输入是否为空

> ID：13719390
> 
> 赞同：0
> 
> 时间：2012-12-05T08:54:34.940
> 
> 标签：forms, flash, validation

这是我第一次做 FLASH 表单验证，我是 FLASH 新手。我有以下操作：（AS 2.0）

```
bSubmit.onRelease = function() 
{
      valiForm();
}
function valiForm()
{
     var sMessage = "Name: " + tName.text + "\nE-mail: " + tEmail.text + "\nPhone: " + tPhone.text;
     lvSend = new LoadVars();
     lvReply = new LoadVars();
     var thanks = "Thanks " + tName.text + "your message has been sent";
     lvSend.msg = sMessage;
     lvSend.address = "myemail@ex.ex";
     tName.text = "";
     tEmail.text = "";
     tPhone.text = "";
     lvReply.onLoad()
     {
        tDone.text = thanks;
     }
     lvSend.sendAndLoad('/templates/t3976/mail.php', lvReply, 'POST');
} 
```

现在在我发送表单之前，我想检查该`tName`字段是否为空，如果它有某种警报，如果它很好，然后提交表单。我也想为该`nPhone`领域做同样的事情。

感谢您的帮助，并为我的基础英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:02:38.280

最简单的方法是在 IF 中比较 String

```
if(tName.text != ""){
    // proceed form code here
} 
```

在你的情况下，那将是

```
bSubmit.onRelease = function() 
{
      valiForm();
}
function valiForm()
{
   if(tName.text != "" && tPhone.text != ""){
     var sMessage = "Name: " + tName.text + "\nE-mail: " + tEmail.text + "\nPhone: " + tPhone.text;
     lvSend = new LoadVars();
     lvReply = new LoadVars();
     var thanks = "Thanks " + tName.text + "your message has been sent";
     lvSend.msg = sMessage;
     lvSend.address = "myemail@ex.ex";
     tName.text = "";
     tEmail.text = "";
     tPhone.text = "";
     lvReply.onLoad()
     {
        tDone.text = thanks;
     }
     lvSend.sendAndLoad('/templates/t3976/mail.php', lvReply, 'POST');
   }
} 
```

# jquery - 如何在辅助窗口上发生事件时在主窗口触发 jQuery Ajax

> ID：13719391
> 
> 赞同：0
> 
> 时间：2012-12-05T08:54:35.950
> 
> 标签：jquery, html, ajax

我正在构建一个 Web 应用程序，它有一个显示汽车记录（品牌、价格、年份等）的主页。所有这些都组织在一个 HTML 表格中，该表格在每次页面重新加载时从数据库中动态构建。

在页面顶部（不在表格中）有一个*新建*按钮，它打开一个新窗口，该窗口提供一个表格供用户输入新车详细信息。

```
<caption>Cars<button onclick="fn_new();">N</button></caption>

function fn_new(event)
{
    var new_window = window.open('/new', "_blank", 
        "toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes, width=350, height=350,top=200,left=400");
} 
```

当用户完成输入新车详细信息时，会在数据库中添加一条新记录。发生这种情况时，我想使用 ajax jQuery 加载再次使用新记录刷新表部分。就像是：

`$("#carsTable").load("/getCarsRecordsFromDb");`

我不知道在哪里放置这个 ajax jQuery 调用（在哪个事件函数中）。

我的问题是在主窗口检测从新车窗口按下提交的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:04:00.243

在父窗口js中。

```
 function addRow()
{
   // ajax call goes here 
} 
```

在子窗口js中。

```
function SendInfo(name,id,num,pass){
    window.opener.addRow(name,id,num,pass);
} 
```

# java - 将 settings.xml 嵌入到 ivy.xml

> ID：13719392
> 
> 赞同：0
> 
> 时间：2012-12-05T08:54:50.027
> 
> 标签：java, ant, ivy

我知道这是完全错误的，不是一个好的做法，但我需要知道是否有可能以某种方式将 ivysettings.xml 的片段嵌入到 ivy.xml 或 Apache Ant build.xml 并使用它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:08:28.517

```
<target name="resolve-init" description="Configure ivy settings">
    <mkdir dir="build"/>

    <echoxml file="build/ivysettings.xml">
        <ivysettings>
            <settings defaultResolver="central" />
            <resolvers>
                <ibiblio name="central" m2compatible="true"/>
            </resolvers>
        </ivysettings>
    </echoxml>

    <ivy:settings file="build/ivysettings.xml"/>
</target>

<target name="resolve" depends="resolve-init" description="Use ivy to resolve dependencies">
    <ivy:resolve/>
</target> 
```

另一个选项是使用 ivy 设置任务的 URL 属性将 ivy 配置保存在众所周知的位置，例如公司 Web 服务器。

# inotify - 从 incrond 发送邮件

> ID：13719394
> 
> 赞同：3
> 
> 时间：2012-12-05T08:55:00.653
> 
> 标签：inotify

我想使用 incrond 监视我的 /etc 文件夹（ubuntu 12.04 lts）的更改，我想使用以下命令通过电子邮件发送结果：

```
/etc IN_ATTRIB,IN_CREATE,IN_DELETE,IN_MODIFY,IN_MOVED_FROM,IN_MOVED_TO /usr/bin/mail -s "ALERT:in etc: $@/$#" user@domain.com < /dev/null 
```

但是邮件没有来...

有什么事？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T16:50:43.513

当我第一次尝试使用 incron 时，我遇到了类似的麻烦。诀窍是，当文档说使用命令“abc $@/$#”时，它的意思正是如此。您将需要创建一个小的 shell 脚本，该脚本从 incrond 获取返回值并发送适当的邮件消息。

因此 incrontab 条目应如下所示：

```
/etc IN_ATTRIB,IN_CREATE,IN_DELETE,IN_MODIFY,IN_MOVED_FROM,IN_MOVED_TO /usr/local/bin/mail_command.sh $@/$# 
```

使用 mail_command.sh 接受给定的参数并进行适当的处​​理。

马修

# javascript - 提交表单后防止重新加载页面。（没有阿贾克斯）

> ID：13719399
> 
> 赞同：2
> 
> 时间：2012-12-05T08:55:15.630
> 
> 标签：javascript, forms, jsp, reload

我是 JavaScript 和 jsp 的新手。我需要提交一个表单，该表单从输入字段中计算一些值，并`div`在提交后隐藏包含输入字段的表单。提交后另一个`div`应该变得可见并向我显示结果和一个重新加载 jsp 页面的新提交按钮，以便我可以计算其他值。

一切正常，但仍然存在一个问题。提交表单并完成计算后，`div`会显示带有我的结果的新结果，但页面会立即重新加载，因此我没有机会看到我的结果或按下新按钮重新加载页面。

现在我正在寻找一种解决方案，除了使用 ajax 和 cookie 来显示结果而不重新加载 jsp 直到我按下重新加载按钮。

这是我的 js 代码：

```
<script type="text/javascript">
counter = 3;

var myHash = {};

function addInput(e) {
    //checking if current input field has already created a new input field.
    if (!myHash.hasOwnProperty(e.name)) {

        var element = document.createElement("input");

        element.setAttribute("name", "number" + counter);
        element.setAttribute("onkeyup", "addInput(this)");
        element.setAttribute("onchange", "check(this)");
        document.getElementById('inputs').appendChild(
                document.createTextNode("Zahl " + counter + ": "));
        document.getElementById('inputs').appendChild(element);
        document.getElementById('inputs').appendChild(
                document.createElement("br"));
        counter++;
        myHash[e.name] = "true";
    }

}

function check(e) {
    //alert(e.value);
    var str = e.value;

    //alert(str.match(/\d*/));
    if (!(/^\d*.?\d*$|^\d*.?\d*$/.test(str))) {
        e.value = "";
        alert("Bitte nur Zahlen eingeben.\n(Nachkommastellen mit . oder , trennen)");
        //alert("ok");
    } else {
        //
    }
}

function visible() {

    document.getElementById("form").setAttribute("style", "display:none");
    document.getElementById("result")
            .setAttribute("style", "display:block");
    return false;       
} 
```

这里是我的 jsp 文件的重要部分：

```
<div id="form" style="width: 350px;">
    <fieldset>
        <legend style="color: blue; font-weight: bold;">Der summende
            Summanden Summer!</legend>
        <form method="post">

            Zahl 1: <input type="text" name="number1" onchange="check(this)" /><br />

            Zahl 2: <input type="text" name="number2" onkeyup="addInput(this)"
                onchange="check(this)" /><br />
            <div id="inputs"></div>
            <br /> <input type="submit" onclick="visible()" value="Summieren">
            <input type="reset" onclick="window.location.reload()"
                value="Loeschen">

        </form>
    </fieldset>
</div>
<%
    Map<String, String[]> params = request.getParameterMap();

    double sum = 0;
    String value = "";

    for (String param : params.keySet()) {

        value = request.getParameter(param);
        value = value.replace(",", ".");

        if (value != "") {
            sum = Double.parseDouble(value) + sum;
        }
        //out.println(sum);
        System.out.println(sum);

    }
%>

<div id="result" style="display: none">
    <h2>Ergebnis</h2>
    <%=sum%>
    <input type="submit" onclick="return false;" value="Ergebnis">

</div> 
```

我的问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:02:30.707

只需查看代码，最简单的方法就是在`onsubmit="return false"`表单标签中添加一个属性：

```
<form onsubmit="return false"> 
```

这将阻止表单提交与服务器通信的 AKA。您也可以在 javascript 中使用 DOM 选择器获得相同的结果，这可能更简洁。

顺便说一句，您的表单中有一些无效标记，可能会在遍历 DOM 时导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:51:34.050

Ok... solved the problem by handling everthing with jsp...

An easy if-else condition was enough to hide the first div and show the other by defining a boolean variable which is set to true, when the calculation is done...

thx anyway:D

# c# - 如何在 C# 中正确设计通用的“请求调度程序”

> ID：13719401
> 
> 赞同：2
> 
> 时间：2012-12-05T08:55:22.053
> 
> 标签：c#, generics, requestdispatcher

我有一个对象“Receiver”，它正在接收/反序列化许多不同类型的请求。

然后，我希望此接收器使用“调度程序”对象，该对象将根据传入请求的类型将请求对象调度到正确的请求处理程序对象（先前在调度程序上注册）。当然，请求的类型只在运行时知道，而不是在编译时知道（太容易了；））

这里有一些代码来澄清事情......

我有一个请求类型的标记接口：

```
public interface IRequest {} 
```

然后是一个虚拟请求类型：

```
public class DummyRequest : IRequest {} 
```

这是请求处理程序对请求类型 T 使用的通用接口。

```
public interface IRequestHandler<in T> where T : IRequest
{
   void HandleRequest(T request);
} 
```

一个具体的实现是 DummyRequest 请求的请求处理程序：

```
public class DummyRequestHandler : IRequestHandler<DummyRequest>
{
   public void HandleRequest(DummyRequest request) { }
} 
```

这是我使用动态的调度程序的非常基本的实现，但仅当请求类型在编译时已知时才有效，但如果请求类型仅在运行时已知则无法工作（这不是很感兴趣在我的上下文中，但以某种方式显示了意图）：

```
public class Dispatcher
{
    private Dictionary<Type, dynamic> _handlers = new Dictionary<Type, dynamic>();

    public void Dispatch<T>(T requestObject) where T : IRequest
    {
       _handlers[requestObject.GetType()].HandleRequest(requestObject);
    }

    public void RegisterHandler<T>(IRequestHandler<T> handler) where T : IRequest
    {
       _handlers[typeof(T)] = handler;
    }
} 
```

和用法，考虑到调度程序变量是一个 Dispatcher 对象：

一些代码会以这种方式在调度程序上注册处理程序

```
dispatcher.RegisterHandler<DummyRequest>(new DummyRequestHandler()); 
```

并且接收器对象将使用调度程序以这种方式调度传入请求：

```
dispatcher.Dispatch(new DummyRequest()); 
```

当然，这里只有在编译时知道请求类型时才有效，但在我的上下文中，接收方将请求作为对象类型接收，例如：

```
// Here ReceiveMessage is not generic and therefore returns object type 
// (even if type is DummyRequest, it's just being returned as an object,
// i.e : "request is DummyRequest" returns true) 
// signature of ReceiveMessage is "object ReceiveMessage()"
var request = ReceiveMessage(); 
```

我不能像这样打电话给调度员

```
dispatcher.Dispatch(request); 
```

我找不到一种方法来解决这个问题而不会失去类型安全性（例如，不将 HandleRequest 签名更改为非泛型的获取对象的签名），我宁愿不要丢失。

我希望我的问题很清楚并且有意义......也许没有真正的方法，我不知道。

通过谷歌搜索“request dispatcher C#”没有发现任何有趣的东西。也许这种“模式”以另一个名字而闻名，但我称它为请求调度程序才有意义。

**这背后的最终目的是能够通过为特定请求类型创建一个新的请求处理程序并将其注册到调度程序上来处理新的请求类型，而无需更改接收器的代码，也不需要更改调度程序。**

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:01:57.743

您无法摆脱直到运行时才知道对象类型的事实，因此您需要一个能够应对这种情况的设计。你应该看看工厂模式。如果你谷歌它，你会发现大量的例子。但本质上，您必须在运行时确定代码中对象的类型，并确定要实例化的对象类型。这可以采取使用反射的形式，也可以只是工厂方法中的 switch 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:10:49.860

您可以做的是实现抽象工厂模式（包含泛型），非常简单的概述可能类似于以下内容

```
public interface IRequest
{
   void Dispatch();
} 
```

您将在哪里使用以下类来获得在运行时使用的正确“策略”

```
public static class DispatchStrategyfactory
{
    public static void Dispatch<T>(T instance) where T : IRequest 
    {
        instance.Dispatch();
    } 
} 
```

但是，要使此模式起作用，您必须将相关的具体类创建为

```
public static TestDispatcher : IRequest
{
    public void Dispatch()
    {
        // Do stuff.
    }
} 
```

这应该使您能够执行所需的操作。有关 Strategy/[Abstract]Factory 模式的更多信息，请参见[此处](http://www.dofactory.com/Patterns/Patterns.aspx)。我希望我没有错过这里的重点。

我希望这有帮助。

# vb.net - Windows 媒体播放器播放列表

> ID：13719402
> 
> 赞同：0
> 
> 时间：2012-12-05T08:55:26.597
> 
> 标签：vb.net, visual-studio-2012, next, playlist, windows-media-player

我正在使用 VS2012 VB.net。

我正在通过代码使用 Windows Media Player 控件。我有一个 currentPlaylist，其中有多个与之关联的媒体项目。

我的问题是：如何播放播放列表中的下一个项目？我在互联网上查看了文档，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:53:00.340

非常简单的答案：

```
MediaPlayerObject.controls.next() 
```

# requirejs - RequireJs - 将来自一个依赖项的值作为另一个依赖项的参数提供

> ID：13719404
> 
> 赞同：4
> 
> 时间：2012-12-05T08:55:32.913
> 
> 标签：requirejs, js-amd

我们已将 Google Maps API 包装为 RequireJs 中的异步模块。

```
define(['async!http://maps.googleapis.com/maps/api/js?libraries=places&key=APIKEY&sensor=true'],

function(){
    var maps = window.google.maps;

    return maps;
}); 
```

现在我们希望将 API 密钥提取到 config.js 文件中，以存储不同环境的配置设置。但这不可能起作用（因为尚未定义变量名）

```
define([config,
'async!http://maps.googleapis.com/maps/api/js?libraries=places&key' + config.APIKEY + '&sensor=true'], 
```

我尝试了 define() 和 require() 的一些双重嵌套，但无济于事。如何编写依赖链来达到预期的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T10:13:47.657

我现在能想到的唯一方法是回调。就像是：

```
define([], function() {
    var exports = {};

    exports.Maps = function (maps) {
        this.hello = function () {
            console.log(maps);
        };
    };

    exports.Factory = function (apiKey) {
        this.manufacture = function (loadedCallback) {
            require(['http://maps.googleapis.com/maps/api/js?libraries=places&key=' + apiKey + '&sensor=true'], function () {
                loadedCallback(new exports.Maps(window.google.maps));
            });
        };
    };

    return exports;
}); 
```

然后使用它你会做：

```
require(["foo"], function (Foo) {

    var apiKey = "blablabla",
        factory = new Foo.Factory(apiKey);
    factory.manufacture(function (Maps) {
        Maps.hello();
    });

}); 
```

# java - 无法让简单的枚举示例工作

> ID：13719407
> 
> 赞同：-2
> 
> 时间：2012-12-05T08:55:45.480
> 
> 标签：java, enums

我创建了一个简单的枚举

```
public interface Params
{
  public enum Locale 
  {
      UK("UK"), US("US");
      private String value;

      private Locale(String value) {
              this.value = value;
      }
  }; 

.... 
```

这是我要修改以采用 Params.Locale 属性的方法。

```
 public void doErrorQuery(Locale locale, String p_listStr)
    {
        if (p_spellingList == null)
        {
        result.setError(true);
        result.setErrorMessage("Null spelling list");
        return;
    } 
```

我使用导入我的语言环境枚举

```
import com.Params.Locale; 
```

问题是我无法编译它，它告诉我它无法解析语言环境。即使我使用 Params.Locale 它也不起作用，无法解析名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:03:59.120

您应该为枚举使用自己的枚举类。在我看来，这样做会是一个更干净的设计：

```
public enum Locale {
   UK("UK"), US("US");
   private String value;

   private Locale(String value) {
       this.value = value;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:09:14.727

暂时忽略设计问题，您的原始代码没有任何问题。也许您的包声明有误？对我来说，以下代码编译得很好：

**参数.java**

```
package com;

public interface Params {

  public enum Locale {
    UK("UK"), US("US");
    private String value;

    private Locale(String value) {
      this.value = value;
    }
  }
} 
```

**测试类.java**

```
package com;

import com.Params.Locale;

public class TestClass {

  public void test(Locale locale) {
    System.out.println("Hello, World!");
  }
} 
```

# bash - 如何在没有顶级文件夹的情况下压缩文件但保留子文件夹

> ID：13719408
> 
> 赞同：21
> 
> 时间：2012-12-05T08:55:45.607
> 
> 标签：bash, shell, unix, zip

假设我有一个名为 abc 的文件夹，它有几个递归子文件夹，我想压缩 abc 下的所有内容，当我使用以下命令时

```
zip -r abc.zip abc/* 
```

我得到 abc.zip，但它包含顶级文件夹 abc，所有内容都在 abc 下，如 abc/xxx、abc/yyy 等，如何删除顶级文件夹 abc？我想把所有东西都直接放在 abc.zip 中。

笔记：

1.  我只能从文件夹外部压缩，所以导航到文件夹 abc，而 zip * 不适合我
2.  我需要在一行中运行这个命令，我可以用 ; 分隔多个命令
3.  选项 -j 也不起作用，因为它删除了子文件夹，我想将它们保留在那里。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-05T08:58:56.057

```
cd abc
zip -r ../abc.zip *
```

虽然我会说在大多数情况下保留它 abc 使管理更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-12T14:14:12.023

`[7z](http://p7zip.sf.net/) a -tzip abc.zip -w abc/.`

321

# android - 如何动态设置弹出窗口的线性布局背景？

> ID：13719411
> 
> 赞同：1
> 
> 时间：2012-12-05T08:55:49.400
> 
> 标签：android, android-linearlayout, xml-drawable

我有一个弹出窗口。我想将`LinearLayout`弹出窗口的背景动态更改`android:background="@drawable/popup_bg"`为`android:background="@drawable/popup_bg2"`

这是我的代码：

```
 private void showPopup(final Activity context, int x, int y, String id, String n, String a, String l) {
   int popupWidth = 200;
   int popupHeight = 150;

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.popup);

   LayoutInflater layoutInflater = (LayoutInflater) context
     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View layout = layoutInflater.inflate(R.layout.popup_layout, viewGroup);

  TextView id1 = (TextView) layout.findViewById(R.id.id);
  TextView name = (TextView) layout.findViewById(R.id.name);
  TextView absent = (TextView) layout.findViewById(R.id.absence);
  TextView late = (TextView) layout.findViewById(R.id.lateness);

  id1.setText(id);
  name.setText(n);
  absent.setText(a);
  late.setText(l);

   // Creating the PopupWindow
   final PopupWindow popup = new PopupWindow(context);
   popup.setContentView(layout);
   popup.setWidth(popupWidth);
   popup.setHeight(popupHeight);
   popup.setFocusable(true);

   // Some offset to align the popup a bit to the right, and a bit down, relative to button's position.
   int OFFSET_X = 30;
   int OFFSET_Y = 300;

     // Clear the default translucent background
   popup.setBackgroundDrawable(new BitmapDrawable());

   // Displaying the popup at the specified location, + offsets.
   popup.showAtLocation(layout, Gravity.NO_GRAVITY, x + OFFSET_X, y +OFFSET_Y);

   // Getting a reference to Close button, and close the popup when clicked.
   Button close = (Button) layout.findViewById(R.id.close);
   close.setOnClickListener(new OnClickListener() {

     public void onClick(View v) {
       popup.dismiss();
     }
   });
} 
```

popup_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="wrap_content"
     android:id="@+id/popup"
     android:layout_height="wrap_content"
     android:background="@drawable/popup_bg" 
     android:orientation="vertical" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:57:58.630

试试这个，

```
 LinearLayout ll=popup.getContentView().findViewById(R.id.popup);
     ll.setBackgroundResource(R.drawable.yourImage); 
```

提供，您`popup.setContentView(layout);`在执行上述操作之前执行此操作。

# iphone - Core Data 获取具有相同属性值的实体

> ID：13719412
> 
> 赞同：0
> 
> 时间：2012-12-05T08:55:51.947
> 
> 标签：iphone, ios, core-data

我有一个核心数据模型，它有 3 个属性，“singerName”、“albumName”、“songName”。并且有一个表格视图来显示歌手字符串和专辑字符串。

例如，我使用 Michael Jackson 来获取核心数据。我得到了 100 个结果。但可能只有 10 张专辑，每张专辑有 10 首歌曲。

我的问题是如何编写 NSPredicate 在不知道实际专辑名称的情况下丢弃同一张专辑，只获取迈克尔杰克逊的 10 张不同专辑。

`request.predicate = [NSPredicate predicateWithFormat:@"singerName != %@ && ???", @""];` 我想改变 ？？？以某种格式丢弃重复的专辑名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:44:49.310

尝试以下操作：

```
NSArray *uniqueAlbums = [results valueForKeyPath:@"@distinctUnionOfObjects.albumName"]; 
```

其中 results 是当前 fetchedObjects 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:02:14.313

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Countries" inManagedObjectContext:appDelegate.managedObjectContext];
[fetchRequest setEntity:entity];

NSPredicate *objPredicate = [NSPredicate predicateWithFormat:@"cname == %@",objCountries];

[fetchRequest setPredicate:objPredicate]; 
```

# c# - 在 C# 中创建一个批处理文件

> ID：13719415
> 
> 赞同：3
> 
> 时间：2012-12-05T08:56:04.350
> 
> 标签：c#, batch-file, com0com

这是我第一次创建批处理。基本上我想在命令 Promt 中写命令。所以我需要批处理文件，以便我可以在 c# 中使用它并完成任务。

命令如下所示：

```
install PortName=COM50-
bcdedit.exe -set TESTSIGNING OFF 
```

我如何创建批处理文件并使用 c# 代码运行它。

谢谢

详细信息：我正在使用 com0com 创建虚拟端口，因此主要思想是自动化该过程，因此我可以创建端口而无需前往命令端口并编写命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:58:17.570

将命令写入文件并使用文件路径调用[System.Diagnostics.Process.Start()](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T09:01:43.830

您可能不需要批处理文件：-

```
 Process myprocess = new Process();
 myprocess.StartInfo.FileName = @"C:\WHERE_EVER\bcdedit.exe";
 // I dont know the exact switch, but im sure you would be able to work this out.
 myprocess.StartInfo.Arguments = @"Install PortName=COM50 -set TESTSIGNING OFF";
 myprocess.Start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T09:02:16.750

[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/ccf1tfx0.aspx)是您的最佳选择。

> 提供对本地和远程进程的访问，并使您能够启动和停止本地系统进程。

例如;

```
System.Diagnostics.Process.Start("c:\\yourfilename.bat"); 
```

# java - 在排序的链表上搜索

> ID：13719424
> 
> 赞同：0
> 
> 时间：2012-12-05T08:56:52.673
> 
> 标签：java, linked-list

我在链接列表上使用搜索方法这是我的代码

```
Node item=head;
 String help=item.getKonten();
 System.out.printf("data to search");
    search=input.nextLine();

    while (help.compareTo(search)>0){
        if (help.equals(search)){
            System.out.println ("index " + index);
            ktemu=1;
        } else {
            item=item.getLink();
            bantu1=item.getKonten();        
        }
        index++;
    }

    if (ktemu == 0){
         System.out.println("data not found");
    } 
```

输出数据：要搜索的 1,2,3,4,5 数据 2 未找到数据任何人都可以指出我的代码哪里出错了所以索引没有显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:03:20.927

`compareTo`方法返回负整数、零或正整数，因为此对象小于、等于或大于指定对象。

因此，当您将 1 与 2 进行比较时，它们会返回负值并`-1>0`变为 false。所以它脱离了循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:05:09.973

只要与`bantu1`不同，您就在迭代`cari`，但您使用比较接口进行迭代。为什么不直接使用equals？无论如何，如果您确实想使用比较方法，正如@Quoi 所说，您需要考虑它可能 < 0，因此`!=0`可能更合适。

这个怎么样：

```
private boolean find(Object input);
    while (true){
        if(item.equals(input)){
            return true;
        } else {
            if(item.getLink() == null) {
                 return false;
            } else {
                item=item.getLink();
            }
        }
    }
} 
```

# java - 将 vaadin 应用程序嵌入到 div 元素中

> ID：13719425
> 
> 赞同：0
> 
> 时间：2012-12-05T08:57:03.027
> 
> 标签：java, html, vaadin, embedding

我正在尝试将 vaadin 应用程序嵌入到 div 元素中。我遵循本指南（12.3.1）：

[https://vaadin.com/book/-/page/application.embedding.html](https://vaadin.com/book/-/page/application.embedding.html)

我使用教程中的 SimpleAddressBook 示例进行实验：

[https://vaadin.com/tutorial](https://vaadin.com/tutorial)

我的jsp：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>HC</title>

    <script type="text/javascript">
        var vaadin = {
            vaadinConfigurations: {
                trololo: {
                    appUri:'/trololo',
                    pathInfo: '/',
                    themeUri: '/VAADIN/themes/reindeer',
                    versionInfo : {
                        vaadinVersion: "6.8.6",
                        applicationVersion: "NONVERSIONED"
                    }
                }
            }};
    </script>

    <script language="javascript" src="/VAADIN/widgetsets/com.vaadin.terminal.gwt.DefaultWidgetSet/com.vaadin.terminal.gwt.DefaultWidgetSet.nocache.js?1354630345025"></script>
</head>
<body>
<iframe tabindex="-1" id="__gwt_historyFrame" style="position:absolute;width:0;height:0;border:0;overflow:hidden;" src="javascript:false"></iframe>

<div style="background-color: red; height: 150px"></div>

<div id="trololo"></div>
</body>
</html> 
```

我的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5">
    <servlet>
        <servlet-name>SimpleAddressBook</servlet-name>
        <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
        <init-param>
            <param-name>application</param-name>
            <param-value>novikov.vaadin.SimpleAddressBook</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>SimpleAddressBook</servlet-name>
        <url-pattern>/trololo/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>SimpleAddressBook</servlet-name>
        <url-pattern>/VAADIN/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

当我在浏览器中加载我的应用程序时，没有对 vaadin 样式的请求，因此网页上没有任何效果。

我尝试将 themeUri 设置为 /VAADIN/themes/reindeer; /VAADIN/主题；试图将其留空。我只是猫让它工作。帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:26:23.567

对不起这是我的错。忘记添加

```
<link rel="stylesheet" href="/VAADIN/themes/reindeer/styles.css"> 
```

认为这是由 themeUri 参数设置的。

# php - PHP 表单选择和单选错误

> ID：13719429
> 
> 赞同：0
> 
> 时间：2012-12-05T08:57:16.663
> 
> 标签：php

PHP 表单选择和单选错误我有一个表单，但是在选择按钮和单选按钮上出现 php 错误我得到的错误是 $age 和 $gender

如何在同一页打印错误信息？

这是php代码

```
$firstname="";  $lastname="";   $email="";  $re_email="";

if(isset($_POST['register'])){
    $firstname=strip_tags($_POST['firstname']);
    $lastname=strip_tags($_POST['lastname']);
    $email=strip_tags(strtolower($_POST['email']));
    $re_email=strip_tags(strtolower($_POST['re_email']));
    $password=strip_tags($_POST['password']);
    $re_password=strip_tags($_POST['re_password']);
    $age=$_POST['age'];
    $gender=$_POST['gender'];
    $date=date("Y-m-d");

    if($firstname && $lastname && $email && $re_email && $password && $re_password && $age && $gender){}
    else{die("Please fill in all fields");}

    //USERNAME CHECKING//////////////////////////////////////////////////////////////////
    $connect=mysql_connect("localhost", "root", "");
    $database=mysql_select_db("phplogin", $connect);
    $namecheck=mysql_query("SELECT email FROM users WHERE email='$email'");
    $count=mysql_num_rows($namecheck);
    if($count!=0)
    {die("Username already taken");} 
```

这是HTML代码

```
<html>
<H1>Register</H1>
    <form action="register.php" method="POST">
    <table>
        <tr>
            <td>First Name:</td>
            <td><input type="text" name="firstname" value="<?PHP echo $firstname;?>" maxlength="25"/></td>
            <td>Maxium 25 characters</td>
        </tr>

        <tr>
            <td>Last Name:</td>
            <td><input type="text" name="lastname" value="<?PHP echo $lastname;?>"maxlength="25"/></td>
            <td>Maxium 25 characters</td>
        </tr>

        <tr>
            <td>email:</td>
            <td><input type="text" name="email" value="<?PHP echo $email;?>"maxlength="40"/></td>
            <td>Maxium 40 characters</td>
        </tr>

        <tr>
            <td>Re-enter email:</td>
            <td><input type="text" name="re_email" value="<?PHP echo $re_email;?>"maxlength="40"/></td>
        </tr>

        <tr>
            <td>Password:</td>
            <td><input type="password" name="password" maxlength="25"/></td>
            <td>Password must be between 6 and 25 characters</td>
        </tr>

        <tr>
            <td>Re-eneter Password:</td>
            <td><input type="password" name="re_password" maxlength="50"/></td>
        </tr>
    </table>
    <select>
            <option value="">Age</option>
            <option name="age" value="18-29">18-29</option>
            <option name="age" value="30-39">30-39</option>
            <option name="age" value="40-49">40-49</option>
            <option name="age" value="50-59">50-59</option>
            <option name="age" value="60-69">60-69</option>
            <option name="age" value="70">70 Plus</option>
        </select>
        <input type="radio" name="gender" value="male" />Male
        <input type="radio" name="gender" value="female" />Female
    <input type="submit" name="register" value="Register" />
    </form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:01:18.650

将 register.php 中的代码放在表单下方并将表单操作放在同一页面上，然后您将能够在同一页面上显示错误

```
 <form action="<?php echo $_SERVER['PHP_SELF'] ?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:01:41.850

要启用错误报告，请添加到您的页面：

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

要允许向所有页面报告错误，请添加到 php.ini：

```
error_reporting  =  E_ALL
display_errors = On 
```

并重新启动 Apache 服务。

将玩具选择更改为：

```
<select name="age">
     <option value="18-29">18-29</option>
     <option value="30-39">30-39</option>
     <option value="40-49">40-49</option>
     <option value="50-59">50-59</option>
     <option value="60-69">60-69</option>
     <option value="70">70 Plus</option>
 </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:04:05.983

首先在您的 HTML 中，对于您的 SELECT，您需要在 SELECT 上设置“名称”，而不是在 OPTIONS 上。

# issuu - 如何使用Issuu

> ID：13719430
> 
> 赞同：1
> 
> 时间：2012-12-05T08:57:27.490
> 
> 标签：issuu

我想使用 Issuu 生成一个文档，即使使用 issuu 指南，我也不明白它是如何工作的。

我不知道如何使用 Flash，所以我决定使用此链接中提到的图像：http: [//issuu.com/services/customize/guide-howitworks.html](http://issuu.com/services/customize/guide-howitworks.html) （图形文件可以是 Adob​​e Flash SWF文件或基本上是网络上的任何图像。）

我按照此链接中的说明进行操作：http: [//issuu.com/services/customize/guide-configuration.html](http://issuu.com/services/customize/guide-configuration.html)

首先，我暂时没有网站，所以我使用了 wampserver 和 joomla。

我已将文件放在 wamp/www/Joomla 下

然后我通过键入 URL 来跟踪文档，它可以工作：

```
http://issuu.com/jesper/docs/gan_issuu?mode=embed&documentId=080311154822-183d3d833
4a544518a0d5e324f2543d4&layout= http://localhost/Joomla/issuu / basicBlueCanvas-theme /layout.xml 
```

然后我不知道该怎么办，因为流动的链接使用flash：

```
http://issuu.com/services/customize/guide-modifyingthegraphics.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-17T08:06:22.793

您可以尝试使用 Issuu API：[https ://developer.issuu.com/](https://developer.issuu.com/)

如果要添加文档，这是您需要实施的请求：[https ://developer.issuu.com/managing-your-publications/documents/upload/](https://developer.issuu.com/managing-your-publications/documents/upload/)

# android - 仅当尚未创建时，如何从通知意图创建活动？

> ID：13719431
> 
> 赞同：0
> 
> 时间：2012-12-05T08:57:30.610
> 
> 标签：android

我的应用程序`Notification`从`IntentService`. 轻按时，`Notification`类型`MainActivity`为`Activity`. `MainActivity's` `onCreate()`每次`Notification`点击 new 时都会调用方法，无论是否`MainActivity`已经创建了实例。点击`Notification`总是会创建一个替换旧实例的新实例。

有没有办法`onCreate()` *只在活动不存在*时调用并调用，例如`onNewIntent()`如果`MainActivity`已经存在（或其他适当的方法）？

目前`Notification`是这样创建的：

```
 NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(com.exampleapp.myclient.R.drawable.dummy_notification_icon, "Notification!", System.currentTimeMillis());
    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(getBaseContext(), 0, notificationIntent, Intent.FLAG_ACTIVITY_NEW_TASK);
    notification.setLatestEventInfo(context, notificationTitle, "test", pendingIntent);
    notificationManager.notify(1, notification); 
```

`MainActivity`在清单中：

```
<activity android:name="com.exampleapp.myclient.MainActivity"  
    singleTop="true">
 </activity> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:02:44.283

您可以将活动设置为应用程序`singleInstance`中`manifest`的活动，当活动再次启动时，`onCreate()`将不会调用该方法而不是调用该方法`onNewIntent()`。您可以在哪里决定下一步该做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:11:27.533

您只需在清单中查找[android:launchmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)属性。对于您的情况，它应该设置为`singleTask`. 然后您将能够处理`onNewIntent();`并且您将只有 1 个实例。

# eclipse - Eclipse Java 代码格式化程序

> ID：13719435
> 
> 赞同：0
> 
> 时间：2012-12-05T08:57:37.727
> 
> 标签：eclipse, coding-style, formatting, code-formatting, eclipse-formatter

我希望 Eclipse 格式化程序以特定方式格式化 Java 方法声明，这可能吗？如果没有，有没有办法定义我自己的自定义格式？

短方法的代码应如下所示（即比线宽短）：

```
 private ClassNumberTwo methodNumberTwo(ClassNumberTwo parameterOne) throws ExceptionNumberOne
  {
    return parameterOne;
  } 
```

对于长方法（即比线宽长），就像这样：

```
 private ClassNumberOne methodNumberOne(
    ClassNumberTwo parameterOne,
    ClassNumberOne parameterTwo,
    ClassNumberThree parameterThree,
    ClassNumberFour parameterFour,
    ClassNumberFive parameterFive)
      throws ExceptionNumberOne,
      ExceptionNumberTwo,
      ExceptionNumberThree
  {
    return parameterTwo;
  } 
```

我知道在 Eclipse 中在哪里可以找到代码格式化程序设置，但是我找不到任何可以像示例一样格式化代码的设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:06:10.520

1.  窗户
2.  喜好
3.  爪哇
4.  代码风格
5.  格式化程序
6.  单击编辑按钮。
7.  换行
8.  构造函数声明
9.  参数
10.  设置换行策略：换行所有元素，每个元素都换行

格式化程序中有各种选项，您可能需要调整不同的设置才能得到您想要的。

![在此处输入图像描述](../Images/59b872e0cde0f04793d43a88801490d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:58:51.540

看看下面的图像改变**最大线宽**

![在此处输入图像描述](../Images/7e314006838aa7ecd9d99a9e8b61946f.png)

# iphone - 关于 NinevehGL 框架中导入 3d 模型的触摸事件

> ID：13719447
> 
> 赞同：-1
> 
> 时间：2012-12-05T08:58:32.233
> 
> 标签：iphone, ios, opengl-es, 3d-rendering

我正在使用以下代码旋转 3d 模型：

```
_mesh = [[NGLMesh alloc] initWithFile:@"01.obj" settings:settings delegate:self];

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    [super touchesMoved:touches withEvent:event];

    UITouch *touch;
    CGPoint pointA,pointB;

    if ([touches count]== 1) {

        touch = [[touches allObjects]objectAtIndex:0];
        pointA = [touch locationInView:self.view];
        pointB = [touch previousLocationInView:self.view];
        //      _mesh.rotateY -= (pointA.x - pointB.x) * 0.5f;
        //      _mesh.rotateX -= (pointA.y - pointB.y) * 0.5f;

        _mesh.rotateY += (pointA.x - pointB.x) * 0.5f;
    _mesh.rotateX += (pointA.y - pointB.y) * 0.5f;
    }
} 
```

代码按预期旋转，但无论我点击视图中的哪个位置，它都会旋转。我希望它只在接触导入的模型时旋转。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T09:29:57.757

以下代码可能会在一定程度上帮助您，

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{  
[super touchesMoved:touches withEvent:event];

UITouch *touch;
CGPoint pointA,pointB;
if ([touches count]== 1)
{
    touch = [[touches allObjects]objectAtIndex:0];
    pointA = [touch locationInView:self.view];
    pointB = [touch previousLocationInView:self.view];

    NGLTouching touchingStruct = [_camera touchingUnderPoint: pointA];

    if (touchingStruct.mesh)   
    {
        _mesh.rotateY += (pointA.x - pointB.x) * 0.5f;
        _mesh.rotateX += (pointA.y - pointB.y) * 0.5f;
    }
} 
```

但它仍然不会改变网格的边界框。你可以参考[这篇](http://nineveh.gl/community/forum/touching_collada_meshes)博文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:18:14.690

为此，您必须使用委托手动获取 3d 模型对象框架（对应于屏幕）并与当前触摸位置**`CGRectContainsPoint`**进行比较。**`touchesMoved`**

**`_mesh.rotate`**仅当结果`CGRectContainsPoint`返回 YES时才编写代码。

**注意：** NinevehGL 有自己[**的论坛**](http://nineveh.gl/community/forum/)来讨论与框架相关的事情。请在那里发布查询以获得良好和快速的响应。

# c# - 在数据透视表 Excel 2007 的所有行上重复行标签

> ID：13719449
> 
> 赞同：0
> 
> 时间：2012-12-05T08:58:41.937
> 
> 标签：c#, excel, vba

在 Excel 2010 中有一个重复行标签的选项 我如何在 Excel 2007 中使用宏、Vba 或 C# 执行此操作？

PS：我不能手动执行此操作（复制粘贴），因为它必须是自动化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:17:34.243

昨天在将 VBA 程序转换为在 Excel 2007 上运行时遇到了同样的问题。

这是我的文字解决方案：选择要填充的行或标题标签，然后使用 SpecialCells 仅选择空白单元格。放入 R1C1 公式以复制先前的单元格，然后仅复制值。如果没有空白单元格，则接下来会出现错误恢复。

这是我在代码中的答案：

```
 On Error Resume Next
    With .Range(.Cells(2, 1), .Cells(MaxRow, 1))
        .SpecialCells(xlCellTypeBlanks).Select
        Selection.FormulaR1C1 = "=R[-1]C"
        .Value = .Value
    End With
    On Error GoTo 0 
```

希望这可以帮助！

# matlab - 打破列向量并将其转换为矩阵

> ID：13719452
> 
> 赞同：0
> 
> 时间：2012-12-05T08:58:50.517
> 
> 标签：matlab

我有一个 3861 x 1 的列向量，其中包含一些数值。我想在 matlab 中将此向量转换为维度为 40 x 100 的矩阵。代码必须在一列中填充前 40 个值，然后移动到下一列。谁能帮我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:06:16.927

您可以使用 matlab 中的 reshape 函数重新排列矩阵中的元素。但是只有在元素数量不变的情况下才能这样做。因此，如果您有一个 4000x1 的矩阵，您可以使用 reshape 将其更改为 40x100。所以，我想理想的方法是将你的 3861x1 矩阵用零（或任何你想用它填充的东西）填充到一个 4000x1 矩阵，然后重塑它。

看到这个：

```
 a = rand(3861, 1);
    b = cat(1, a, zeros(139, 1));
    c = reshape(b, 40, 100); 
```

# ios - 为什么 UITableViewCell 的子视图添加不正确？

> ID：13719455
> 
> 赞同：0
> 
> 时间：2012-12-05T08:58:55.887
> 
> 标签：ios, xcode, cocoa-touch, uitableview

我有个问题。我实现了一个表格视图。在`didSelectRowAtIndexPath`方法中，我增加了单元格的高度并向该单元格的`contentView`. 但是，如果我向下滚动表格视图（例如 10 个单元格），我将再次看到相同的文本视图。你能帮我么？

这里有一些代码可以更好地理解问题：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if(selectedIndex == indexPath.row) 
    {
        return CELL_HEIGHT * 5;
    }
    return CELL_HEIGHT;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:TRUE];
    UITableViewCell *cell = [aTableView cellForRowAtIndexPath:indexPath];
    if (selectedIndex == indexPath.row) 
    {
        selectedIndex = -1;
        [[cell.contentView viewWithTag:COOL_TAG] removeFromSuperview];
    }
    else
    {
        UITableViewCell *previousCell = [aTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:selectedIndex inSection:0]];

        if ([previousCell.contentView viewWithTag:COOL_TAG]) 
        {
            [[previousCell.contentView viewWithTag:COOL_TAG] removeFromSuperview];
        }
        selectedIndex = indexPath.row;
        UITextView *text = [[UITextView alloc] initWithFrame:CGRectMake(10, 45, 255, 180)];
        [text.layer setBackgroundColor:[[UIColor whiteColor] CGColor]];
        [text.layer setBorderColor:[[UIColor grayColor] CGColor]];
        [text.layer setBorderWidth:1.0f];
        [text.layer setCornerRadius: 8.0f];
        [text.layer setMasksToBounds:YES];
        [text setEditable:NO];
        text.text = [questionArray objectAtIndex:indexPath.row];
        text.tag = COOL_TAG;
        [cell.contentView addSubview:text];
    }

    [tableView beginUpdates];
    [tableView endUpdates];
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:39:40.410

问题是细胞正在被重复使用。因此，当您向下滚动添加 textview 的单元格时，将在另一行中重用。

我认为解决此问题的最佳方法是将 textview 添加到 cellForRowAtIndexPath 方法中的单元格。

然后，您需要创建一个数组，在其中定义该行是否应显示 textview。然后在 didselect 方法中，更改数组值并更新表。

请注意，检查应该在 cellForRowAtIndexPath 中的 if(cell == nil) 检查之外进行，否则不会为重用的单元格调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:04:14.593

在 viewdidload 中创建 textview 并将其添加到 CellForRow 方法中的 tableview 单元格中。这可能会解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:10:47.550

尝试此代码，因为在您的情况下，单元格被重新使用

静态 NSString *CellIdentifier = @"YourCell";

```
YourCell *cell = (YourCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"YourCell" owner:self options:nil];

    for (id currentObject in topLevelObjects){
        if ([currentObject isKindOfClass:[UITableViewCell class]]){
            cell =  (YourCell *) currentObject;
            break;
        }
    }
} 
```

# haskell - SDL_image 不会安装

> ID：13719458
> 
> 赞同：5
> 
> 时间：2012-12-05T08:59:06.367
> 
> 标签：haskell, compiler-errors, sdl-image

我正在尝试为 Haskell 安装[SDL-image 库](http://hackage.haskell.org/package/SDL-image-0.4.0)，这是一组用于同名的原始 C 库的绑定。我已经构建并安装了 SDL 库及其相应的 Haskell 包，并将文件从 SDL-image 库拖放到安装 SDL 的目录中。现在，当我尝试安装 SDL-image 绑定时，出现以下错误：

```
$ runghc Setup.lhs configure
Configuring SDL-image-0.6.1...
configure: WARNING: unrecognized options: --with-compiler, --with-gcc
checking for sdl-config... /usr/bin/sdl-config
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... .o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for IMG_Load in -lSDL_image... no
configure: error: *** SDL_image lib not found! Get SDL_image from http://www.libdsl.org/projects/SDL_image/index.html 
```

一些粗略的谷歌搜索告诉我，我应该告诉 configure 究竟在哪里可以找到 lib 文件，但我不确定如何去做。我试过使用 gcc 标志 -l[directory]，但得到了相同的结果。

我在 Win7x64 上使用 MinGW。提前感谢您的帮助，如果我没有提供足够的信息，我深表歉意，我不确定什么是重要的，因为我不太了解这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:24:52.097

我不确定 SDL_image，但我已经为 Haskell 成功构建了 SDL。没有必要去编辑 cabal 文件。

假设您安装了 Haskell 平台、MINGW 和 MSYS，并且在某处安装了 SDL 的 MINGW 版本，您只需将环境变量`C_INCLUDE_PATH`和`LIBRARY_PATH`环境变量设置为指向 SDL 的头文件和库。

完成后，您可以使用 MINGW shell 运行`cabal install SDL`.

# c++ - 奇怪的 C4512 警告。为什么？

> ID：13719461
> 
> 赞同：8
> 
> 时间：2012-12-05T08:59:17.270
> 
> 标签：c++, boost, warnings, boost-asio

采用以下使用 boost::asio 的代码。

```
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

class SocketTest
{

private:            

    boost::asio::io_service& mIOService;
    tcp::acceptor mAcceptor; // Comment this line

public:

    SocketTest(boost::asio::io_service& io_service)
        : mIOService(io_service)
        , mAcceptor(io_service, tcp::endpoint(tcp::v4(), 8080)) // Comment this line
    {      
    }
}; 
```

如果您注释两条标记的行，编译器 (Visual Studio 2010) 在 /W4 上编译时会发出以下警告。

```
warning C4512: 'SocketTest' : assignment operator could not be generated 
```

是什么让这两行如此特别？为什么它们的存在允许生成赋值运算符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:23:33.470

这种行为的原因`tcp::acceptor`是不可复制（它继承自`basic_io_object`，其复制赋值运算符是私有的，因此它自己的复制赋值运算符没有被隐式声明）。拥有不可复制的成员可以避免生成隐式声明的复制赋值运算符，但不会引发警告，因为这被认为是预期的行为。

另一方面，如果你注释掉这两行，你的类就只剩下一个引用成员；这也使您的类不可复制，但根据 Visual Studio 文档确实会发出警告。我同意这也是意料之中的，但编译器实现者决定给你一个警告以防万一。原因可能是使一个类显式不可复制（例如 的情况`basic_io_object`）是一个明确的设计决策，但我只是在这里猜测。

# php - PHP-MySQL 查询优先显示一张表的行

> ID：13719463
> 
> 赞同：0
> 
> 时间：2012-12-05T08:59:18.800
> 
> 标签：php, mysql, sql, select

我想知道是否有查询（PHP + MySQL 代码），在我的表中有以下行：

```
 id name    featured
    ----------------
    1 Robert   0
    2 John     1
    3 Pax      1
    4 Max      0
    5 Emily    0
    6 Sara     0
    7 Estella  0 
```

在我的页面中显示以下内容（具有特色列值的优先级并按 ASC 排序以容纳其余部分）：

```
 id name    featured
    ----------------
    2 John     1
    3 Pax      1
    1 Robert   0
    4 Max      0
    5 Emily    0
    6 Sara     0
    7 Estella  0 
```

这是我的实际代码：

```
$sql = "SELECT * FROM employees ORDER BY id desc'; 
```

我希望有人帮助我，我在谷歌中找不到类似的东西：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:03:41.387

您需要先按`featured`列排序，然后按`id`

```
SELECT * FROM employees ORDER BY featured DESC, id ASC 
```

输出：

```
| id |    name | featured |
|----|---------|----------|
|  2 |    John |        1 |
|  3 |     Pax |        1 |
|  1 |  Robert |        0 |
|  4 |     Max |        0 |
|  5 |   Emily |        0 |
|  6 |    Sara |        0 |
|  7 | Estella |        0 | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!9/38c87b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:01:11.770

```
$sql = "SELECT * FROM employees ORDER BY featured desc'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:05:21.007

尝试这个

```
 SELECT * FROM employees ORDER BY featured desc, id asc 
```

# javascript - 如何在钛/android appcelerator 中将图像显示为由 jsPDF 库生成的 pdf

> ID：13719468
> 
> 赞同：1
> 
> 时间：2012-12-05T08:59:34.107
> 
> 标签：javascript, android, titanium, appcelerator, jspdf

我们可以将图像添加到由钛/android 中的 jsPDF 库生成的 pdf 中吗？简单的文本打印得很好，但想知道是否有任何方法可以在生成的 pdf 中添加和显示图像。这是我正在使用的小例子：

```
var doc = new jsPDF();
doc.text(20, 20, 'Hello world!');
doc.text(20, 30, 'This is client-side Javascript, pumping out a PDF.');
doc.addPage();
doc.text(20, 20, 'Do you not like that test2?');

var res = doc.output();

var file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'auther.pdf');
file.write(res);
var pdfview = Ti.UI.createWebView({width:'100%',height:'100%',data:file});
var win = Ti.UI.createWindow();
win.add(pdfview); 
```

# android - 为什么当 setData() 和 setType() 不起作用时，android 意图的 setDataAndType() 可以正常工作？

> ID：13719471
> 
> 赞同：5
> 
> 时间：2012-12-05T08:59:54.733
> 
> 标签：android

我在使用隐式意图在 android 中编辑文件时遇到了一个问题，它得到了解决，它花了很多时间和排列组合来解决它，但最后我还是有疑问，问题得到了解决，但我想知道为什么解决的问题没有解决。

如果您对此有任何线索，请告诉我。

来到我的问题。

1.  我有一个活动。我在活动中有一个按钮。我想打开存储在“/mnt/sdcard/xxx/log.txt”位置的预先存在的日志文件（这是一个文本文件示例 log.txt）

2.  以下是我编写的隐式意图代码，我最终得到了一个异常“未找到活动”

**code1：我尝试过并遇到异常**

```
Uri uri = Uri.parse("file:///sdcard/xxx/log.txt");
Intent viewTestLogFileIntent = new Intent(Intent.ACTION_EDIT,uri);
viewTestLogFileIntent.setType("text/plain"); 
```

**code2：我尝试过并遇到异常**

```
Uri uri = Uri.parse("file:///sdcard/xxx/log.txt");
Intent viewTestLogFileIntent = new Intent(Intent.ACTION_EDIT);
viewTestLogFileIntent.setData(uri);
viewTestLogFileIntent.setType("text/plain"); 
```

**code3：我尝试过并且工作正常**

```
Uri uri = Uri.parse("file:///sdcard/xxx/log.txt");
Intent viewTestLogFileIntent = new Intent(Intent.ACTION_EDIT);
viewTestLogFileIntent.setDataAndType(uri,"text/plain"); 
```

我有两个疑问是

1.  首先，我的文件位于 /mnt/sdcard/xxx/log.txt 这我可以在 Eclipse 的 DDMS 视图中的文件系统中清楚地看到，但是当我将 uri 中的文件链接作为“文件： ///sdcard/xxx/log.txt" 我从路径中跳过 /mnt

2.  code1 和 code2 有什么问题？我在 code3 中设置的数据和类型是什么，我设置相同的数据和类型，但分别使用不同的方法，如 setData() 和 setType()。为什么它们（代码 2 和代码 1）不起作用？为什么code3工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T10:10:08.873

请参阅`setType(String type)`类中方法的 Javadoc `Intent`：

...
**此方法会自动清除以前设置的任何数据（例如通过 setData(Uri)）。**
...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T20:43:02.803

如果要同时设置 URI 和 MIME 类型，请不要调用 setData() 和 setType()，因为它们都会使对方的值无效。始终使用 setDataAndType() 来设置 URI 和 MIME 类型。

# android - GoogleDrive File.getDescription() 为空

> ID：13719472
> 
> 赞同：1
> 
> 时间：2012-12-05T08:59:56.567
> 
> 标签：android, google-drive-api

GoogleDrive android sdk 正在使用中。插入我们的 App GoogleDrive 服务文件。文件插入说明插入一个空白字符。但是在服务器上获取文件列表时，返回的解密值null。为什么一个非空白字符 null 会返回？谢谢你。

# c# - 如何在异步方法中以同步方式更新 UI 线程上的元素？

> ID：13719473
> 
> 赞同：3
> 
> 时间：2012-12-05T08:59:56.793
> 
> 标签：c#, async-await, windows-phone-8, portable-class-library

我正在开发一个应用程序并尝试将所有事情都做得很好和最佳实践；这是*不*符合我要求的代码：

```
async public Task DoStuff()
{
    DispatcherAdapter.Current.BeginInvoke(() => { myObject.SomeProperty = "new value"; });
    await DatabaseAdapter.Current.SaveItem(TableName, myObject);
} 
```

上面的代码没有使用更新的属性值将项目保存到数据库中，我想这是因为 BeginInvoke() 不一定在我等待的异步方法开始工作之前完成。DispatcherAdapter 只是在后台使用 Deployment.Current.Dispatcher，如下所示：

```
 public override void BeginInvoke(Action a)
    {
        Deployment.Current.Dispatcher.BeginInvoke(a);
    } 
```

这是我研究过的，但不起作用：

*   等待 BeginInvoke() 调用 - 因为它不返回任务，所以无法工作，并且它仍然深入到无法判断 Dispatcher.BeginInvoke 何时实际完成
*   [尝试使用从 BeginInvoke() 返回的 DispatcherOperation 对象](https://stackoverflow.com/a/7354414/167018)- 在普通 .NET 中可用的 Completed 事件不适用于 Windows Phone 8
*   [使用 SynchronizationContext.Send()](https://stackoverflow.com/a/11258370/167018) - DispatcherSynchronizationContext.Current 始终为空，因此不起作用...请参阅下面的不相关代码：

    ```
    public async override Task Invoke(Action a)
    {
        await Task.Factory.StartNew(() => { DispatcherSynchronizationContext.Current.Send(new SendOrPostCallback(delegate { a.Invoke(); }), null); });
    } 
    ```

基本上，如何避免无效的跨线程访问并确保代码在 Windows Phone 8 的异步方法中以特定顺序运行？我想我可以将 .SaveItem 移动到 BeginInvoke 中......但它感觉像是一种作弊方式，我仍然无法等待 BeginInvoke 调用（这使得将它放在异步方法中非常没有意义）它会是很高兴知道我应该做什么/其他人在这种情况下做了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:07:52.913

`async`最简单的方法是从 UI 线程调用您的方法。然后你可以这样做：

```
public async Task DoStuffAsync()
{
  myObject.SomeProperty = "new value";
  await DatabaseAdapter.Current.SaveItem(TableName, myObject);
} 
```

如果您的`async`方法需要在后台线程上执行一些操作，请将其包装在`Task.Run`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:27:22.087

我最终创建了自己的 DispatcherSynchronizationContext，一切似乎都正常：

```
 public async override Task Invoke(Action a)
    {
        DispatcherSynchronizationContext dsc = new DispatcherSynchronizationContext(Deployment.Current.Dispatcher);
        await Task.Factory.StartNew(() => { dsc.Send(new SendOrPostCallback(delegate { a.Invoke(); }), null); });
    } 
```

我仍然不确定这是否是推荐的方法，或者以这种方式使用 DispatcherSynchronizationContext 是否有任何问题......但我可以等待这个影响 UI 线程的辅助方法，所以这是一个开始...... .

# php - 使用将在函数中定义的变量调用 php 函数

> ID：13719474
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:00:07.107
> 
> 标签：php

也许是一个奇怪的标题，但我有一种情况，我希望输出字符串（查询，可以是任何长度）包含将在函数内部定义的变量。基本上是这样的，只有我不能（据我所知）将其称为另一个参数，因为它是查询的一部分

```
 function foo($var){
     $name = 'Name';
     echo($var);
}

[..]

foo('Hi my name is '.$name); 
```

在我的情况下，需要`id`在表中添加最后插入的行，例如

```
 public function query($sql){
    foreach($sql AS $sqlString){
        if(!$db->exec($sqlString)){
            echo(self::throwError('MySql error',$sqlString,implode(":",$db->errorInfo())));
        }else{
            self::writeLog($table,$db->lastInsertId(),'update');
        }
        // Add this place i need some code to replace the $id from the call with the $db->lastInsertId() from the previous query
    }
}
[..]
$defaults->query(Array("
    INSERT INTO ".$table[1]." (m_id, m_title, m_link) VALUES ('','','".$val."')
","
    INSERT INTO ".$table[3]." (nmp_id, nmp_project_id, nmp_media_id) VALUES ('','".$_POST['p_id']."','".$id."')
"));
```

我现在别无选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:04:36.997

我不太确定你要做什么，我会给你一个快速的解决方案，尽管它是一个肮脏的解决方案。

```
 function foo($var) {
      global $name;
      $name = 'Name';
      echo($var);
    } 
```

[..]

```
 foo('Hi my name is '.$name); 
```

所以请注意，在函数中，$name 被声明为全局变量（而不是像 $var 这样的方法的局部变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:05:37.467

您当然可以在函数将替换的查询中使用占位符：

```
'INSERT INTO ... %d' 
```

然后：

```
$sql = sprintf($sql, $id); 
```

但在我看来，总体而言，您的`query`功能做得太多和/或对其工作内容感到困惑。这太复杂了。只需让`query`函数执行一个带有适当错误处理的查询并返回插入 id，然后调用它两次：

```
$id = $defaults->query('INSERT ...');
$defaults->query("INSERT ... $id"); 
```

# c# - 计算一些数学，错误“。” 代替 ”，”

> ID：13719481
> 
> 赞同：0
> 
> 时间：2012-12-05T09:00:39.897
> 
> 标签：c#, string, math

我想用 C# 计算一些数学，但我有一个问题。我的数字都是用`.`而不是写的`,`。例如 0.1 而不是 0,1。

```
(2^8 - 1)* 0.1 - 99.9 
```

因为它们都是字符串，所以我将它们转换为 int。

我的代码：

```
 String factor = "0.1";
 String offset = "99.9";

 Int64 result = (Convert.ToInt64(Math.Pow(2, 8) - 1) * Convert.ToInt64(factor.ToString().Replace(".", ","))) + Convert.ToInt64(offset.ToString().Replace(".", ",")); 
```

我收到一个错误：“字符串格式不正确。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:02:53.770

[CultureInfo.InvariantCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)

```
var d = double.Parse("0.1",CultureInfo.InvariantCulture); 
```

# html - HTML5 IFRAME 沙盒与 IFRAME 内容中的链接

> ID：13719482
> 
> 赞同：0
> 
> 时间：2012-12-05T09:00:43.487
> 
> 标签：html, iframe, sandbox

对我来说，在沙盒属性中使用时，允许顶部导航不起作用。该链接适用于不同的域。Allow-Forms 对我有用。连连连都没有反应。它不做任何事情。所以，我也想知道链接是否比表单提交更安全？

sandbox="allow-forms 允许顶部导航"

有没有办法在使用沙盒时使链接正常工作并在顶部导航中打开？我尝试了无缝属性但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:30:59.843

设置`allow-top-navigation`标志将允许您使用`<a ... target="_top">`链接或`window.top.location`沙盒内部`iframe`。

您是否有可能尝试通过 JavaScript 调整顶部窗口的位置？如果是这样，您还需要通过`allow-scripts`沙箱标志允许沙箱内的脚本：`<iframe ... sandbox="allow-forms allow-scripts allow-top-navigation"></iframe>`适用于我。

# wpf - 在 CustomControl 中传递对象

> ID：13719492
> 
> 赞同：0
> 
> 时间：2012-12-05T09:01:29.710
> 
> 标签：wpf, user-controls, wpf-controls, itemscontrol

我正在开发一个自定义控件，我想知道将一些自定义属性从 my 传递`ItemsControl`到 my `ItemsContainer`s 的最佳方法是什么。这些属性是一些`ItemsContainer`应该能够使用的自定义值。

有人在创建自定义控件时遇到同样的问题吗？在代码中解决这个问题的最常见方法是什么？

我认为使用 DataTriggers 或从 ItemsContainer 的 ControlTemplate 绑定到 RelativeSource 并不是最好的方法。

有没有面向对象的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:39:29.457

我认为[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)是你需要的。例如，在您的使用控件中定义一些，并在 xaml 中设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:36:57.793

如果您不想使用`DataTrigger`s 或相对绑定，您可以创建自己的`ItemsControl`和`ItemsControl`容器（例如通过继承`ListBox`和`ListBoxItem`），然后通过覆盖[ItemsControl.GetContainerForItemOverride 方法](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.getcontainerforitemoverride.aspx)来实例化具有特定属性的容器，最后将您的自定义控件属性绑定到容器上定义的属性。

`DataTriggers`话虽如此，在 ViewModel 上使用和管理这些属性并没有错。

# php - 选择更新时 MySQL 锁定整个表而不是行

> ID：13719500
> 
> 赞同：1
> 
> 时间：2012-12-05T09:02:00.510
> 
> 标签：php, mysql, concurrency, transactions, innodb

我有一个键的表名。该表中有许多键。而且我有一个同时处理 php 的多个守护进程。

我希望当一个进程选择一个键时，另一个进程不能为此选择相同的键。

我用这段代码尝试这个场景：

```
<?php
$db = new PDO('mysql:host=localhost;dbname=test;charset=UTF-8', 'root', '123456');

try {
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->exec("SET autocommit=0;");

    $db->beginTransaction();

    $stmt = $db->query("SELECT * FROM keys WHERE resetTime IS NULL OR resetTime > ' . time() . ' LIMIT 0,1 FOR UPDATE");
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

    echo("rows: " . print_r($rows,true));
    //sleep(20);

    /*
    update command will be here for selected row
    */

    $db->commit();
} catch(PDOException $ex) {
        //Something went wrong rollback!
        $db->rollBack();
        echo $ex->getMessage();
}
?> 
```

在这种情况下，我使用 2 个终端窗口和 php 命令。在第一个命令中，我取消注释睡眠行，因为等待事务。

在第二个窗口中，注释 sleep 行并执行相同的代码。但是，它等待第一个进程选择另一行。（keys 表中有很多行 resetTime 为空）

我怎样才能实现这个操作，每个进程选择一个键（并在为自己更新选择的键之后）

# python - 转换列表

> ID：13719501
> 
> 赞同：2
> 
> 时间：2012-12-05T09:02:03.533
> 
> 标签：python, list

我有一个这样的清单：

```
[['0', '10'], ['0', '11'], ['0', '12'], ['1', '10'], ['1', '11']] 
```

我如何对列表中的元素进行分组，例如上面的？

```
['0': ['10','11','12']],['1': ['10','11']] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:08:17.457

迭代 - 放入字典。

```
d = {}
l = [['0', '10'], ['0', '11'], ['0', '12'], ['1', '10'], ['1', '11']]
for p in l:
    if p[0] in d:
        d[p[0]].append(p[1])
    else:
        d[p[0]] = [p[1]]

>>> d
{'1': ['10', '11'], '0': ['10', '11', '12']} 
```

使用[defaultdict](http://docs.python.org/2/library/collections.html#defaultdict-objects)：

```
from collections import defaultdict

d = defaultdict(list)
l = [['0', '10'], ['0', '11'], ['0', '12'], ['1', '10'], ['1', '11']]
for p in l:
    d[p[0]].append(p[1]) 
```

one-liner：使用[dict 理解](http://www.python.org/dev/peps/pep-0274/)（有点浪费，但没有导入，需要 2.7+）

```
>>> dd = {key: [i[1] for i in l if i[0] == key] for (key, value) in l}
>>> dd
{'1': ['10', '11'], '0': ['10', '11', '12']} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T09:09:37.177

你可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
import collections

l = [['0', '10'], ['0', '11'], ['0', '12'], ['1', '10'], ['1', '11']]

d = collections.defaultdict(list)
for k, v in l:
    d[k].append(v)
print(d) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T09:11:43.323

你可以使用`dict.setdefault()`：

```
In [16]: lis=[['0', '10'], ['0', '11'], ['0', '12'], ['1', '10'], ['1', '11']]

In [17]: dic={}

In [18]: for x,y in lis:
   ....:     dic.setdefault(x,[]).append(y)
   ....:     

In [19]: dic
Out[19]: {'0': ['10', '11', '12'], '1': ['10', '11']} 
```

对于您的列表，甚至[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)也可以正常工作：

```
In [39]: from operator import itemgetter

In [40]: from itertools import groupby

In [34]: lis=[['0', '10'], ['0', '11'], ['0', '12'], ['1', '10'], ['1', '11']]

In [35]: {k:[x[1] for x in g] for k,g in groupby(lis,key=itemgetter(0))}
Out[35]: {'0': ['10', '11', '12'], '1': ['10', '11']} 
```

# objective-c - (Obj-)C 中的 BEDMAS 优先级？

> ID：13719502
> 
> 赞同：0
> 
> 时间：2012-12-05T09:02:05.343
> 
> 标签：objective-c, c, math, floating-point

我刚刚解决了我在 iOS 应用程序中遇到的一个相当奇怪的问题。我需要将比例因子（我计算为`64/38 ~= 1.684`）应用于传递给方法的值。

我的问题的症结是这样的：

```
- (void)applyScaleTo:(int)value {

    // value := 64
    int first = value * (64/38)
    NSLog(@"First: %d", first);
    int second = (64 * value)/38;
    NSLog(@"Second: %d", second);

} 
```

所需的值为`107`，但日志如下所示：

```
First: 64
Second: 107 
```

我的解决方案是使用第二种方法，这很好，但我的问题是，为什么会出现这种差异？（顺便说一句，如果`first`更改为 a `float`，它仍会记录为`64.00000...`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:15:21.083

在第一种情况下，您将两个整数（64 和 38）相除，得到一个整数值（1）。要纠正这一点，您不必将结果值更改为浮点数（这只会将您的 64 整数结果转换为浮点数），但至少需要一个除法运算。

```
int first = value * ( (float) 64 / 38) 
```

这应该给你 107 结果

# android - java.lang.RuntimeException：无法恢复活动

> ID：13719509
> 
> 赞同：4
> 
> 时间：2012-12-05T09:02:34.050
> 
> 标签：android, radio

完整代码：

```
public class RadioApp extends Activity implements OnClickListener,
        OnSeekBarChangeListener, OnDrawerOpenListener, OnDrawerCloseListener {

    public static final String MHYH_RADIO_LOG_TAG = "GrupoGPR";

    private static int maxVolume = 0;
    private static int currentVolume = 0;

    private final String as = Context.AUDIO_SERVICE;
    private final String ps = Context.TELEPHONY_SERVICE;
    private final String ws = Context.WINDOW_SERVICE;

    private AudioManager audioManager;
    private TelephonyManager telephonyManager;
    private WindowManager windowManager;

    private Display display;

    private ImageButton playButton;
    private static TextView outputView;

    private SeekBar volumeSeekBar;
    private ImageView imageView, radioImage;
    private TextView title;
    private Bitmap defaultBitmap;
    private CacheImageDownloader downloader;
    // private ImageView volumeImageView;

    private String nowPlaying = "";
    private String previousPlaying = "";
    private boolean inCall = false;
    public static boolean wasPlaying = false;
    private static boolean inBackground = false;

    private final Handler handler = new Handler();
    private final Handler inithandler = new Handler();

    @SuppressWarnings("unused")
    private SharedPreferences preferences;

    private static RadioApp instance = null;

    /**
     * @return the instance
     */
    public static RadioApp getInstance() {
        return RadioApp.instance;
    }

    /*********************************************************************************************
     *** APP ***
     *********************************************************************************************/

    private static Context con;

    // private WebView web;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try{
        windowManager = (WindowManager) getSystemService(ws);

        audioManager = (AudioManager) getSystemService(as);
        telephonyManager = (TelephonyManager) getSystemService(ps);
        telephonyManager.listen(new RadioPhoneStateListener(),
                PhoneStateListener.LISTEN_CALL_STATE);
        // UI
        display = windowManager.getDefaultDisplay();
        display.getOrientation();

        RadioApp.con = this;
        RadioApp.instance = this;
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.fradioapp);

//      title = (TextView) findViewById(R.id.radioTitle);
//      title.setText(AllConstant.stationName + "");
//      radioImage = (ImageView) findViewById(R.id.radioImagePlaying);
//      if (AllConstant.imageUrl.length() == 0) {
//          radioImage.setImageBitmap(defaultBitmap);
//      } else {
//          downloader.download(AllConstant.imageUrl.replaceAll(" ", "%20"),
//                  radioImage);
//      }
//      playSongNow();

        downloader = new CacheImageDownloader();

        defaultBitmap = BitmapFactory.decodeResource(getResources(),
                R.drawable.midbanner);

        playButton = (ImageButton) findViewById(R.id.playButton);
        playButton.setBackgroundColor(Color.TRANSPARENT);

        RadioApp.outputView = (TextView) findViewById(R.id.outputViewrr);

        volumeSeekBar = (SeekBar) findViewById(R.id.VolumeSeekBar);
        // volumeImageView = (ImageView) findViewById(R.id.VolumeImageView);

        playButton.setOnClickListener(this);
        playButton.setImageResource(R.drawable.playbutton);
        RadioApp.maxVolume = audioManager
                .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        RadioApp.currentVolume = audioManager
                .getStreamVolume(AudioManager.STREAM_MUSIC);

        // try {
        // if (RadioApp.currentVolume == 0) {
        // volumeImageView
        // .setImageResource(android.R.drawable.ic_lock_silent_mode);
        // } else {
        // volumeImageView
        // .setImageResource(android.R.drawable.ic_lock_silent_mode_off);
        // }8
        // } catch (Exception e) {
        // // TODO: handle exception
        // }

        volumeSeekBar.setMax(RadioApp.maxVolume);
        volumeSeekBar.setProgress(RadioApp.currentVolume);
        volumeSeekBar.setOnSeekBarChangeListener(this);
        // Retrieve preferences
        preferences = PreferenceManager.getDefaultSharedPreferences(this);
        // Setup the Nagare service

        if (MyService.getService() == null) {

            MyService.startService(RadioApp.con);

            runRefresh.run();
        } else {
            Log.w("Nagare service is not null at oncreate", "yes");
            runRefresh.run();
        }

        final Intent intent = getIntent();
        if (intent.getAction() != null
                && intent.getAction().equals(Intent.ACTION_VIEW)) {
            final PlayListFile playListFile = PlayListFactory.create(
                    intent.getType(), intent.getData());
            if (playListFile == null) {
                RadioApp.outputView.setText("Not sure what to do with: "
                        + intent.getAction() + ":" + intent.getDataString()
                        + ":" + intent.getType());
            } else {
                playListFile.parse();
                if (playListFile.errors() != "") {
                    RadioApp.outputView.setText(playListFile.errors());
                } else {
                    RadioApp.outputView
                            .setText(playListFile.play_list().m_entries
                                    .getFirst().m_url_string);
                }
            }
        }
        }catch (Exception e) {
            // TODO: handle exception
        }

        inithandler.postDelayed(mPendingLauncherRunnable, 500);

        /*
         * 
         * admob portion
         */

        // AdManager.setTestDevices(new String[] { AdManager.TEST_EMULATOR,
        // "D81E0EFAB674357C2895265D9C5C13D5" });

        //
        // final AdRequest adRequest = new AdRequest();
        // adRequest.addTestDevice("35C88DD1A9110D5D3BA2A9602A5421E3");

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub

        super.onResume();

        title = (TextView) findViewById(R.id.radioTitle);
        title.setText(AllConstant.stationName + "");
        radioImage = (ImageView) findViewById(R.id.radioImagePlaying);
        if (AllConstant.imageUrl.length() == 0) {
            radioImage.setImageBitmap(defaultBitmap);
        } else {
            downloader.download(AllConstant.imageUrl.replaceAll(" ", "%20"),
                    radioImage);
        }

        playSongNow();

    }

    public void goBackToInfoPopup(View v) {
        chooseSharingOption();

    }

    protected void chooseSharingOption() {
        // TODO Auto-generated method stub

        final Dialog d = new Dialog(RadioApp.this);
        d.setTitle("Info:");
        d.setContentView(R.layout.infopopup);
        final Button cancel = (Button) d
                .findViewById(R.id.infodialoguebtncancle);
        cancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                d.cancel();
            }

        });
        d.show();

    }

    private final Runnable mPendingLauncherRunnable = new Runnable() {
        @Override

        public void run() {

            /*
             * 
             * play radio now
             */

            playSongNow();

        }

    };

    @Override
    protected void onDestroy() {
        // This informs other applications that access media on the SD card that
        // our audio file no longer exists.

        super.onDestroy();
    }

    @Override
    protected void onRestart() {
        RadioApp.inBackground = false;
        MyService.stopNotification();

        super.onRestart();

    }

    @Override
    protected void onStop() {
        if (!isFinishing()) {
            RadioApp.inBackground = true;

            MyService.startNotification();

        }

        super.onStop();
    }

    // @Override
    // protected void onResume() {
    // // TODO Auto-generated method stub
    //
    // /*
    // *
    // * refresh add
    // */
    //
    // // loadWebView();
    //
    // super.onResume();
    //
    // }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.playButton:
            playSongNow();

            break;

        }

    }

    private void playSongNow() {
        // TODO Auto-generated method stub

        if (MyService.getService() == null) {
            RadioApp.outputView.setText("No service available!");
            Log.w(RadioApp.MHYH_RADIO_LOG_TAG, "Nagare service is NULL");
            return;
        }
        try {

            final int state = MyService.getService().state();
            if (state == NagareService.STOPPED && !inCall) {

                MyService.getService().download(AllConstant.radioURL.trim());
                Log.e("current url is ", AllConstant.radioURL);
                Log.e("Search Image : ",
                        AllConstant.imageUrl);

            } else if (state == NagareService.STOPPED && inCall) {
                handleNagareErrors("inCall");

            } else {
                MyService.getService().stop();
            }
        } catch (final RemoteException e) {
            RadioApp.outputView.setText("Error connecting to Nagare service: "
                    + e.toString() + "\n");
            Log.e(RadioApp.MHYH_RADIO_LOG_TAG,
                    "Caught RemoteException: " + e.getMessage());
        }

    }

    /*********************************************************************************************
     *** TELEPHONY ***
     *********************************************************************************************/

    private class RadioPhoneStateListener extends PhoneStateListener {

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            super.onCallStateChanged(state, incomingNumber);
            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                inCall = false;
                try {
                    if (MyService.getService() != null && RadioApp.wasPlaying) {
                        Log.e("current url is ", ALLURL.selectedUrl);

                        MyService.getService().download(
                                ALLURL.selectedUrl.trim());
                    }
                } catch (final RemoteException e) {
                    Log.e(RadioApp.MHYH_RADIO_LOG_TAG,
                            "Caught RemoteException: " + e.getMessage());
                } catch (final Exception e) {
                    Log.e(RadioApp.MHYH_RADIO_LOG_TAG,
                            "Caught RemoteException: " + e.getMessage());
                }

                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
            case TelephonyManager.CALL_STATE_RINGING:
                try {
                    if (!inCall) {
                        if (MyService.getService() != null) {
                            if (MyService.getService().state() != NagareService.STOPPED) {
                                RadioApp.wasPlaying = true;
                            } else {
                                RadioApp.wasPlaying = false;
                            }
                        }
                    }
                    inCall = true;
                } catch (final RemoteException e1) {
                    Log.e(RadioApp.MHYH_RADIO_LOG_TAG,
                            "Caught RemoteException: " + e1.getMessage());
                }
                try {
                    if (MyService.getService() != null) {
                        MyService.getService().stop();
                    }
                } catch (final RemoteException e2) {
                    Log.e(RadioApp.MHYH_RADIO_LOG_TAG,
                            "Caught RemoteException: " + e2.getMessage());
                }
                break;
            default:
                Log.w(RadioApp.MHYH_RADIO_LOG_TAG,
                        "Found un-handled call state: " + state);
            }
        }

    }

    /*********************************************************************************************
     *** AUDIO ***
     *********************************************************************************************/

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, progress,
                AudioManager.FLAG_SHOW_UI);
        // if (progress == 0) {
        // volumeImageView
        // .setImageResource(android.R.drawable.ic_lock_silent_mode);
        // } else {
        // volumeImageView
        // .setImageResource(android.R.drawable.ic_lock_silent_mode_off);
        // }
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
    }

    @Override
    public void onDrawerOpened() {
        imageView
                .setImageBitmap(rotateImage(android.R.drawable.ic_menu_more, 0));
    }

    @Override
    public void onDrawerClosed() {
        imageView.setImageBitmap(rotateImage(android.R.drawable.ic_menu_more,
                180));
    }

    /*********************************************************************************************
     *** MENUS ***
     *********************************************************************************************/

    // @Override
    // public boolean onCreateOptionsMenu(Menu menu) {
    // MenuInflater inflater = getMenuInflater();
    // inflater.inflate(R.menu.main_menu, menu);
    // return true;
    // }
    //
    // @Override
    // public boolean onOptionsItemSelected(MenuItem item) {
    // switch (item.getItemId()) {
    // case R.id.ExitMenuItem:
    // onDestroy();
    // System.exit(0);
    // return true;
    // /*
    // * case R.id.SettingsMenuItem: Intent i = new Intent(RadioApp.this,
    // * Preferences.class); startActivity(i); return true;
    // */
    // default:
    // return super.onOptionsItemSelected(item);
    // }
    // }

    /*********************************************************************************************
     *** UTILITIES ***
     *********************************************************************************************/

    private Bitmap rotateImage(int id, float degrees) {
        final Bitmap bitmap = BitmapFactory.decodeResource(getResources(), id);
        final Matrix mat = new Matrix();
        mat.postRotate(degrees);
        return Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                bitmap.getHeight(), mat, true);
    }

    /*
     * back button (non-Javadoc)
     * 
     * @see android.app.Activity#onKeyDown(int, android.view.KeyEvent)
     */

    public void goBack(View v) {

        RadioApp.this.finish();
        //
        // final Intent aaa = new Intent(RadioApp.this, GPRActivity.class);
        // aaa.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        // startActivity(aaa);

    }

    //
    // /*
    // * open Facebook
    // */
    //
    // public void openFB(View v) {
    // openURL(ALLURL.URLfacebook.trim());
    //
    // }
    //
    // /*
    // * open twitter
    // */
    //
    // public void openTwitter(View v) {
    // openURL(ALLURL.URLtwitter.trim());
    //
    // }

    @Override
    public boolean onKeyDown(final int keyCode, final KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
            final int index = volumeSeekBar.getProgress();
            volumeSeekBar.setProgress(index + 1);
            return true;
        } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
            final int index = volumeSeekBar.getProgress();
            volumeSeekBar.setProgress(index - 1);
            return true;
        }

        else if (keyCode == KeyEvent.KEYCODE_BACK) {

            // final Intent aaa = new Intent(con, SecondScreenActivity.class);

            onStopRecording();

            return true;
        }

        return super.onKeyDown(keyCode, event);

        // return false;
    }

    public void onStopRecording() {
        final CharSequence[] items = { "Stay in app.", "Exit." };
        final AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Exit app?");
        builder.setItems(items, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int item) {
                switch (item) {
                case 0:

                    return;

                case 1:

                    RadioApp.this.finish();
                    break;

                default:

                    return;
                }

                // Toast.makeText(getApplicationContext(), items[item],
                // Toast.LENGTH_SHORT).show();
            }
        });
        builder.show();
        builder.create();

    }

    public void openURL(String url) {
        final Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
    }

    /*********************************************************************************************
     *** Nagare Serivce ***
     *********************************************************************************************/

    private final Runnable runRefresh = new Runnable() {

        @Override
        public void run() {
            refresh();
            handler.postDelayed(this, 1000);
        }
    };

    public void refresh() {
        if (MyService.getService() == null) {
            return;
        }
        try {
            final int state = MyService.getService().state();
            if (state == NagareService.STOPPED) {
                playButton.setImageResource(R.drawable.playbutton);
                previousPlaying = nowPlaying;
                nowPlaying = "No show information available";
                RadioApp.outputView.setText(nowPlaying);
                if (!MyService.getService().errors().equals("")) {
                    final String errors = MyService.getService().errors();
                    handleNagareErrors(errors);
                }
            } else {
                playButton.setImageResource(R.drawable.stopbutton);
                if (MyService.getService().errors().equals("")) {
                    previousPlaying = nowPlaying;
                    nowPlaying = "Now playing: "
                            + MyService.getService().show_name();
                    RadioApp.outputView.setText(nowPlaying);
                } else {
                    previousPlaying = nowPlaying;
                    nowPlaying = "No information available";
                    RadioApp.outputView.setText(nowPlaying);
                    final String errors = MyService.getService().errors();
                    handleNagareErrors(errors);
                    MyService.getService().stop();

                }
            }
            if (MyService.notification != null
                    && !nowPlaying.equals(previousPlaying)
                    && RadioApp.inBackground) {
                MyService.startNotification();
            }
        } catch (final RemoteException e) {
            Log.e(RadioApp.MHYH_RADIO_LOG_TAG,
                    "Caught RemoteException: " + e.getMessage());
        }
    }

    private void handleNagareErrors(String errors) {

        /*
         * cancel timer
         */

        try {
            handler.removeCallbacks(runRefresh);
        } catch (final Exception e) {
            // TODO: handle exception
        }

    } 
```

它在 2.1 或 2.3+ 版本中安静地工作。但是当我想用 2.2+ htc android 设备进行测试时，它会显示以下错误。

```
W/dalvikvm(9704): threadid=1: thread exiting with uncaught exception (group=0x40028a00)
 E/AndroidRuntime(9704): java.lang.RuntimeException: Unable to resume activity {com.droidbd.newradio/com.newradio.android.RadioApp}: java.lang.NullPointerException
 E/AndroidRuntime(9704):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3325)  Caused by Java null pointer exception. 
```

然后，当我在 logcat 中单击错误选项时，它会以这种方法带走我。

```
 @Override
    protected void onResume() {
        // TODO Auto-generated method stub

        super.onResume();

        title = (TextView) findViewById(R.id.radioTitle);
        title.setText(AllConstant.stationName + "");
        radioImage = (ImageView) findViewById(R.id.radioImagePlaying);
        if (AllConstant.imageUrl.length() == 0) {
            radioImage.setImageBitmap(defaultBitmap);
        } else {
            downloader.download(AllConstant.imageUrl.replaceAll(" ", "%20"),
                        radioImage);
        }

        playSongNow();

    } 
```

# iphone - 如何将 iOs 5 App 迁移到新的 4" Retina 显示器？

> ID：13719512
> 
> 赞同：0
> 
> 时间：2012-12-05T09:02:43.797
> 
> 标签：iphone, xcode, retina-display

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我们有一个 iOS 5 应用程序，它使用 3,5" 视网膜显示屏。我读到在 iPhone 5 4" 视网膜显示屏中，应用程序显示在屏幕中央，通过添加两个黑条，一个在顶部，另一个在屏幕底部. 在我的情况下，使用 Xcode 模拟器这些条不显示。该应用程序使用整个屏幕显示，如下所示：

![巨大的屏幕截图](../Images/0b7c2968db34127a37d649091e894caf.png)

问题是什么？如何解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:16:59.287

布局将遵循为每个视图设置调整大小和固定支柱的方式。标签栏固定在屏幕底部，这就是它存在的原因。我不确定你在做什么，就是让背景像这样复制自己的一部分。

但在 Interface Builder 中，您可以单击右下角的按钮在较旧的 iPhone 3.5" 和 iPhone 5 4" 屏幕尺寸之间切换，并查看您的视图如何调整每个屏幕上的布局。理想情况下，您将希望重新设计您的应用程序，以便背景资源可以填满整个 4 英寸屏幕，并简单地裁剪掉旧屏幕的底部。

同样，控件和子视图应该在尺寸检查器中设置其自动调整大小和固定支柱，以便它们在两个屏幕上正确拉伸或重新定位。`UITableView`像这样的视图`UIScrollView`很容易被拉伸以填充额外的屏幕。其他视图（例如按钮和文本字段）的大小和相对于顶部或底部的位置通常保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:21:38.890

我有同样的问题。只需将**初始屏幕**图像添加到项目中即可。您应该将其命名为`Default-568h@2x.png`. 当您添加 Default-568h@2x.png 图像时，程序可以理解该应用程序也支持 iPhone5。

# python - 在 Linux 上打包（归档）Python 项目

> ID：13719513
> 
> 赞同：0
> 
> 时间：2012-12-05T09:02:46.157
> 
> 标签：python, linux, python-module

我有一个包含各种 Python 模块的 Python 项目。现在，当我需要将项目设置到另一台服务器（Linux OS）时，我也设置了每个模块，这些模块对项目很重要。

我的问题是：如何打包（或归档）模块依赖项和项目设置到另一台服务器，只需解包（或解压缩）等？

**更新：**最后我使用了 cx_Freeze，它适用于我的项目。但是伙计们给出了非常有用的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:48:38.550

您可以结合使用虚拟环境（如果您不想要，则不需要）和 pip。您可以给 pip 一个包含所有依赖项的文件，如下所示：

```
pip install -r requirements.txt 
```

有关如何创建此 requirements.txt 的更多信息，请参阅[http://www.pip-installer.org/en/latest/requirements.html](http://www.pip-installer.org/en/latest/requirements.html) 有关 virtualenv 的更多信息在这里[http://www.virtualenv.org/en /最新的/](http://www.virtualenv.org/en/latest/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:15:04.790

Python 有一种处理项目和依赖关系的好方法：[虚拟环境](http://pypi.python.org/pypi/virtualenv)。

一篇有趣的文章：

*   [http://www.logilab.org/blogentry/22498](http://www.logilab.org/blogentry/22498)

# c# - 返回两个字典的方法

> ID：13719519
> 
> 赞同：0
> 
> 时间：2012-12-05T09:03:16.453
> 
> 标签：c#, dictionary

我试图返回两本词典并成功，但我对它不满意，因为它很慢。以下是我迄今为止对 Tupla 所做的：[从另一个类中的一个方法返回两个带有 Tuple 的字典](https://stackoverflow.com/questions/13705852/returning-two-dictionaries-with-tuple-from-one-method-within-another-class)

这也是支持我关于 Tupla 很慢的声明的基准：http: [//www.dotnetperls.com/multiple-return-values](http://www.dotnetperls.com/multiple-return-values)

[考虑到从另一个类中的一个方法返回两个具有元组的字典的](https://stackoverflow.com/questions/13705852/returning-two-dictionaries-with-tuple-from-one-method-within-another-class)相同情况，我尝试使用 KeyValuePair 声明而不是 Tupla，但我收到此错误：

> 无法将类型“System.Tuple,System.Collections.Generic.Dictionary>”隐式转换为“System.Collections.Generic.KeyValuePair,System.Collections.Generic.Dictionary>”

这是代码：

```
class AClass
{
    Dictionary<string, string> dictOne = new Dictionary<string, string>();
    Dictionary<string, string> dictTwo = new Dictionary<string, string>();

    public KeyValuePair<Dictionary<string, string>, Dictionary<string, string>> MyMethodOne()
    {
        //Adding items dictOne and dictTwo

        return new KeyValuePair<Dictionary<string, string>, Dictionary<string, string>>(dictOne, dictTwo);
    }
} 
```

和

```
class BClass 
{
        AClass _ac = new AClass();

        Dictionary<string, string> dictThree = new Dictionary<string, string>();
        Dictionary<string, string> dictFour = new Dictionary<string, string>();

        public void MyMethodTwo()
        {
         //Here I get mentioned error
         KeyValuePair<Dictionary<string, string>, Dictionary<string, string>> calledKVP = _ac.MyMethodOne();

         Dictionary<string, string> dictThree = calledKVP.Key;
         Dictionary<string, string> dictFour = calledKVP.Value;
         //After this I loop through dictThree and dictFour and do what I need
        }
    } 
```

恐怕这意味着它不能以“图普拉方式”的其他方式完成。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:16:18.897

首先你可以使用`Tuple`类

```
public Tuple<Dictionary<T1, T2>, Dictionary<T1, T2>> GetDictionaries<T1, T2>()
{
    var dict1 = new Dictionary<T1, T2>();
    var dict2 = new Dictionary<T1, T2>();
    return Tuple.Create(dict1, dict2);
}

public void Method()
{
    var result = GetDictionaries(int, string);
    var dict1 = result.Item1;
    var dict2 = result.Item2;
} 
```

具有多个输出参数的另一种解决方案是使用`out`参数

```
public void SetDictionaries(
    out Dictionary<int, string> dict1, out dictionary<int, double> dict2)
{

    dict1 = new Dictionary<int, string);
    dict2 = new Dictionary<int, double);

}

public void Method()
{
    Dictionary<int, string) dict1;
    Dictionary<int, double) dict2;

    SetDictionaries(out dict1, out dict2);
} 
```

使用键值对

```
public KeyValuePair<Dictionary<int, int>, Dictionary<string, string>> GetDictionaries()
{
    var dict1 = new Dictionary<int, int>();
    var dict2 = new Dictionary<string, string>();

    return new KeyValuePair<Dictionary<int, int>, Dictionary<string, string>>(dict1, dict2);
}

public void Method()
{
    var result = GetDictionaries();
    var dict1 = result.Key;
    var dict2 = result.Value;
} 
```

# php - 用 MySQL 或 PHP 计算以分钟为单位的时差量？

> ID：13719523
> 
> 赞同：1
> 
> 时间：2012-12-05T09:03:36.860
> 
> 标签：php, mysql, time

我使用以下字段保存用户登录信息：

> 用户 ID、登录日期、登录时间、状态

每次尝试登录后，一条记录将使用真假状态插入数据库。如果他/她在过去 3 分钟内有 3 次登录失败，我想锁定用户。所以我需要使用当前时间并以分钟格式计算它与表的最后 3 条记录的差异。

我的问题是：
1- 这次计算哪个更好？PHP 还是 MySQL？
2-取决于您的建议，哪个功能更适合它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:17:34.297

以下查询根据您的条件返回所有 User_Id：

```
select user_id from t 
where login_date= CURDATE() 
      and login_time>TIMESTAMPADD(MINUTE,-3,CURTIME())
      and status = 'f'
group by user_id 
having count(*)>3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:09:37.890

不同的用法。如果我是你，我会在数据库中记录上次失败的登录日期和时间，这样你就可以从数据库中获取上次失败的登录时间以及数据库中的用户数据。

在 PHP 或 MySQL 中进行比较是可以的。

但是，您应该记住 MySQL 服务器和 Web 服务器应该具有相同的时区并且时间应该同步，否则您的结果将不准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:10:04.757

考虑到你还需要做很多其他的事情，我说使用 php。当他尝试使用登录时，您可以检索用户的最后 3 条记录

```
SELECT login_date, login_time, status FROM table WHERE user_id=$id ORDER BY login_DATE DESC LIMIT 3 
```

然后在 PHP 中您可以进行检查。如果失败，您仍然需要通知用户他被锁定，锁定用户（其他表？）并返回 false 进行登录。

在php中你可以做一些检查，比如

*   是否返回了树尝试（少即无锁）
*   最后检索到的记录是否少于 3 分钟？（否则不锁）
*   让所有树返回值错误尝试（否则不锁定）
*   等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:10:47.790

1.  我认为 MySQL 总是一个更好的计算解决方案，因为它比 PHP 快得多。
2.  如果您使用时间戳，您可以简单地执行 time_x - time_y 以获得以秒为单位的差异，您的总计算将是： (time_x - time_y) / 60 并且您的查询将**如下**所示：

    SELECT user_id, login_date, login_time, status, ((login_time-NOW()) / 60) as differenceColomn FROM usertable

# android - 使用 Android 直接读取/写入 SD 卡

> ID：13719525
> 
> 赞同：1
> 
> 时间：2012-12-05T09:03:47.310
> 
> 标签：android, c++, sd-card, android-sdcard

在我的纯 C++ 本机进程（我使用 adb 从终端运行）中，我试图直接从 Android 2.3 SGS2 中的 SD 卡读取一个块。我的代码以 root 权限运行，所以没关系。

我知道 SD 卡内存映射到`/sys/block/mmcblk1`所以我打开它：

```
int fd = open("/sys/block/mmcblk1", O_RDONLY); 
```

成功了。现在，当我试图从中读取时：

```
bytes_read = read(fd, buffer, 4096); 
```

我收到一个错误：“是一个目录”

好吧，我知道这是一个目录，但它仍然应该可以工作，也许还有其他一些标志处于打开状态？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:39:00.470

哈哈！我的错误确实是我试图从目录中读取`/sys/block/mmcblk1`。但我应该尝试阅读`/dev/block/mmcblk1`！

效果很好。

# ruby-on-rails - 使用 Ruby on Rails 进行字符编码 - 操作系统依赖性

> ID：13719544
> 
> 赞同：0
> 
> 时间：2012-12-05T09:05:01.613
> 
> 标签：ruby-on-rails, ruby, character-encoding, jruby

我正在查看运行相同代码的两台开发人员机器。该代码调用 Web 服务，使用 nokogiri（两台机器上的 v1.5.5）对其进行解析，并在视图中显示结果。

一台运行 Ubuntu 12.04 和 jruby 1.7 的机器显示了预期的结果。

另一个，运行 Windows 7 和 jruby 1.7，字符编码乱码（导致一堆`???`而不是预期的输出）。

我已经检查过两者都使用相同的 jruby 版本和完全相同的应用程序代码，所以我怀疑这可能与底层 JVM 实现有关。

我应该如何去追踪这个问题？将其称为 jruby 错误是否合适？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:29:23.503

如果两台机器上的代码相同，那么您的任何捆绑 gem 在 Windows 上都可能与该代码不兼容。在从 Ubuntu 移动代码后，我之前也遇到过许多与 windows 上的 gem 相关的问题。

在 Ubuntu 上，用于 gems 的 sudo install 命令自行安装 gems 和依赖项，无需下载任何其他内容，但在 Windows 上，具有依赖项的 gem 安装需要手动安装才能正常工作。

请检查 Windows 上任何 gem 的任何兼容性问题。此外，我怀疑 jruby 会导致错误，因为我在 windows 上的应用程序中也使用了 nokogiri，之前没有任何问题。

此外，`Nokogiri`具有处理不同编码的一些功能（可能通过 Iconv），但我对此有点不习惯。

在`Nokogiri`中，字符串始终在内部存储为 UTF-8。返回文本值的方法将始终返回 UTF-8 编码的字符串。返回 XML 的方法（如 to_xml、to_html 和 inner_html）将返回一个像源文档一样编码的字符串。

如果您希望 Nokogiri 正确处理文档编码，最好的办法是显式设置编码。

还要检查在 Windows 上，如果您只解析普通文本或 html 文档，它是否表现出相同的行为？像：

> irb(main):017:0> Nokogiri::HTML.fragment(' ', 'utf-8').text
> 
> irb(main):017:0> Nokogiri.HTML('').at_css('body').content

这也可能对您有所帮助 - [http://nokogiri.org/](http://nokogiri.org/)。还可以查看标题**Developing on JRuby**。

# c++ - 受保护的构造函数与纯虚拟析构函数

> ID：13719545
> 
> 赞同：6
> 
> 时间：2012-12-05T09:05:06.480
> 
> 标签：c++, inheritance

我需要设置一个类继承结构，其中抽象基类只包含成员变量（但没有成员方法）。成员方法将由派生类定义。因此，我需要的是这篇文章：[Making a class abstract without any pure virtual methods](https://stackoverflow.com/questions/4640985/making-a-class-abstract-without-any-pure-virtual-methods)

从那里的前 2 个答案中，我意识到有两种方法可以实现它：

*   使析构函数成为纯虚拟的。
*   使构造函数受到保护。

我很想知道这两种方法之间的区别。是否存在一种应该优先于另一种的情况（或者可能是一些特殊情况，一种可以工作但另一种不行）？我想了想，什么也想不出来。

我在这里搜索了一些帖子的答案（[Is there a use for making a protected destructor virtual？](https://stackoverflow.com/questions/8970466/is-there-a-use-for-making-a-protected-destructor-virtual)，[C++: Protected Class Constructor](https://stackoverflow.com/questions/4524325/c-protected-class-constructor)，[Should an abstract class' destructor be pure virtual？](https://stackoverflow.com/questions/3503072/should-an-abstract-class-destructor-be-pure-virtual)）试图把一些东西放在一起，但我做不到得出结论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:23:57.043

两种方式都通过使用完全不同的机制来达到预期的效果。我认为 a`protected constructor`更具表现力，因为它完全符合您的问题描述。`Pure virtual destructor`不是一个自然的解决方案，可能需要额外的文档来解释其目的。即使可以跳过它，它也会强制子类实现析构函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:26:06.517

主要区别在于

```
Base * ptr = new Derived;
delete ptr; 
```

使用虚拟析构函数是合法的，没有它就会有 UB。还`dynamic_cast`需要至少一个虚函数。
因此，如果您想要多态行为，请使用（纯）虚拟析构函数。如果您不想要它，请使用受保护的构造函数并且不要为多态性（vtables）支付开销。但随后声明析构函数也受保护，以防止通过基指针删除。

# c# - Page_Load 不会在 ASP.NET WebForms 中触发

> ID：13719550
> 
> 赞同：1
> 
> 时间：2012-12-05T09:05:21.603
> 
> 标签：c#, asp.net

我有 3 个 .ASPX 页面。他们是

```
`Login.aspx`
`Agent.aspx` and 
`Scheduler.aspx` 
```

用户输入凭据后，他会根据自己的角色从登录页面定向到 Agent.aspx 或 Scheduler.aspx。在`Page_Load()`每个页面中，我再次检查用户的角色。如果条件不匹配，他将被重定向回 Login.aspx。

当`Page_Load()`我这样导航时调用：

登录-> 代理，如果我从代理页面注销，我会被重定向到登录页面，但现在如果我进入代理页面的`Page_Load()`URl，则不会加载 Agent.aspx 内部。错误是什么？

登录页面 aspx ------

```
public partial class LOGIN : System.Web.UI.Page
{  
  protected void Page_Load(object sender, EventArgs e)
    { 
        txtUserName.Focus();
    }

    protected void btnLogin_Click(object sender, EventArgs e) 

    {
        bool validLogin = false;

   LoginHandler loginhandler = new LoginHandler();

    validLogin = loginhandler.IsValidUser(txtUserName.Text.Trim(),                        txtPassword.Text.Trim());
    int RoleId = loginhandler.FindRoleId(txtUserName.Text.Trim(), txtPassword.Text.Trim());
    if (validLogin)
    {               
        FormsAuthentication.RedirectFromLoginPage(txtUserName.Text.Trim(), false);
        if (RoleId == 1)
           Response.Redirect(Constant.GoToAgentView);
        if (RoleId == 2)
           Response.Redirect(Constant.GoToSchedulerView);
    }
     else
        Server.Transfer(Constant.GoLoginPage);

    }
 } 
```

* * *

代理aspx---

```
 public partial class Agent : System.Web.UI.Page
    {
        CSBuss.Agent.AgentHandler agent = new CSBuss.Agent.AgentHandler();
        LoginHandler login = new LoginHandler();

        protected void Page_Load(object sender, EventArgs e)

        {

            string rolename = login.FindRoleName(User.Identity.Name);
            if (string.Compare(rolename, "Agent", false) == 0)
            {
                SuccessPanel.Visible = false;
                DisplayPanel.Visible = true;
                txtName.Focus();
                if (!IsPostBack)
                {
                    DropDownList1.DataSource = agent.GetCabType();
                    DropDownList1.DataTextField = Constant.DisplayCabType; // CabType to be displayed in the list items
                    DropDownList1.DataValueField = Constant.DisplayCabID; // CabId of the items displayed
                    DropDownList1.DataBind();

                }
            }
            else
                Server.Transfer(Constant.GoLoginPage);

        }
  } 
```

PS：我在 Web.config 文件中将 Enableoutputcaching 设置为 false 并将 Identity Impersonate 设置为 false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:30:44.600

您是否对 Agent.aspx 进行了额外的安全配置？似乎 asp.net 管道不执行 Page_Load 因为您的用户没有经过身份验证才能访问此页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:50:21.243

在我清除后面代码中的缓存后，它进入 Page_Load() ..我使用了 Response.Cache.SetCacheability(HttpCacheability.NoCache); 在 Page_Load().. 这解决了 Page_Load() 的问题......但我无法弄清楚如何清除 User.identity 中存在的值。在我从 Agent.aspx 注销并且我被重定向到登录之后。现在，如果我输入 Agent.aspx 的 url，我之前输入的值仍然存在于 user.identity...我如何清除 User.Identity 中的值..

谢谢

# c# - 使用免费软件库使用 C# 编程压缩现有 PDF

> ID：13719553
> 
> 赞同：24
> 
> 时间：2012-12-05T09:05:35.250
> 
> 标签：c#, pdf, pdf-generation

我在 Google 上搜索了很多关于如何压缩现有`pdf`（大小）的信息。我的问题是

1.  我不能使用任何应用程序，因为它需要由 C# 程序完成。

2.  我不能使用任何付费图书馆，因为我的客户不想超出预算。所以付费图书馆肯定是不行**的**

我在过去 2 天完成了我的家庭作业，并使用 iTextSharp、BitMiracle 找到了一个解决方案，但无济于事，因为前者仅减少了 1% 的文件，而后者是付费的。

我还遇到了 PDFcompressNET 和 pdftk，但我找不到它们的 .dll。

实际上，pdf 是包含 2-3 张图像（黑白）和大约 70 页的保险单，大小为 5 MB。

我只需要 pdf 格式的输出（不能是任何其他格式）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T16:21:27.027

这是一种执行此操作的方法（无论您使用的工具包，这都应该有效）：

如果您有 24 位 rgb 或 32 位 cmyk 图像，请执行以下操作：

*   确定图像是否真的如此。如果是 cmyk，则转换为 rgb。如果它是 rgb 并且真的是灰色的，则转换为灰色。如果它是灰色或调色板并且只有 2 种真实颜色，则转换为 1 位。如果它是灰色的并且灰度变化的方式相对较少，请考虑使用合适的二值化技术转换为 1 位。
*   测量与放置在页面上的方式相关的图像尺寸 - 如果它是 300 dpi 或更大，请考虑根据图像的位深度将图像重新采样为更小的尺寸 - 例如，您*可能*可以从 300 dpi灰色或 rgb 到 200 dpi，不会丢失太多细节。
*   如果您有一个真正彩色的 rgb 图像，请考虑将其调色。
*   检查图像的内容，看看您是否可以帮助使其更可压缩。例如，如果您浏览一个彩色/灰色图像并细化很多聚集的颜色，请考虑对它们进行平滑处理。如果它是灰色或黑白并包含许多斑点，请考虑去除斑点。
*   明智地选择最终压缩。JPEG2000 可以比 JPEG 做得更好。JBIG2 比 G4 做得好得多。Flate 可能是灰色的最佳非破坏性压缩。JPEG2000 和 JBIG2 的大多数实现*都不*是免费的。
*   如果您是摇滚明星，您想尝试分割图像并将其分成真正黑白和真正彩色的区域。

也就是说，如果您确实可以在无人监督的情况下完成所有这些工作，那么您就拥有了自己的商业产品。

我会说您可以使用[Atalasoft dotImage](http://www.atalasoft.com)完成大部分操作（免责声明：它不是免费的；我在那里工作；我编写了几乎所有的 PDF 工具；我曾经在 Acrobat 上工作）。

使用 dotImage 的一种特殊方法是提取所有仅是图像的页面，重新压缩它们并将它们保存到新的 PDF 中，然后通过从原始文档中获取所有页面并将它们替换为重新压缩的页面来构建新的 PDF，然后再次保存。这并不难。

```
List<int> pagesToReplace = new List<int>();
PdfImageCollection pagesToEncode = new PdfImageCollection();

using (Document doc = new Document(sourceStream, password)) {

    for (int i=0; i < doc.Pages.Count; i++) {
        Page page = doc.Pages[i];
        if (page.SingleImageOnly) {
            pagesToReplace.Add(i);
            // a PDF image encapsulates an image an compression parameters
            PdfImage image = ProcessImage(sourceStream, doc, page, i);
            pagesToEncode.Add(i);
        }
    }

    PdfEncoder encoder = new PdfEncoder();
    encoder.Save(tempOutStream, pagesToEncode, null); // re-encoded pages
    tempOutStream.Seek(0, SeekOrigin.Begin);

    sourceStream.Seek(0, SeekOrigin.Begin);
    PdfDocument finalDoc = new PdfDocument(sourceStream, password);
    PdfDocument replacementPages = new PdfDocument(tempOutStream);

    for (int i=0; i < pagesToReplace.Count; i++) {
         finalDoc.Pages[pagesToReplace[i]] = replacementPages.Pages[i];
    }

    finalDoc.Save(finalOutputStream); 
```

这里缺少的是 ProcessImage()。ProcessImage 将对页面进行光栅化（您无需了解图像可能已被缩放到 PDF 上）或提取图像（并跟踪图像上的转换矩阵），然后执行上面列出的步骤。这不是微不足道的，但它是可行的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T05:30:41.750

我认为您可能想让您的客户意识到您提到的任何库都不是完全免费的：

*   iTextSharp 已获得 AGPL 许可，因此您*必须*发布解决方案的源代码或购买商业许可。
*   PDFcompressNET 是一个商业图书馆。
*   pdftk 是 GPL 许可的，因此您*必须*发布解决方案的源代码或购买商业许可证。
*   Docotic.Pdf 是一个商业图书馆。

鉴于以上所有情况，我认为我可以放弃*免费软件*要求。

Docotic.Pdf 可以在不引入任何破坏性更改的情况下不同程度地[减小压缩和未压缩 PDF的大小。](https://bitmiracle.com/pdf-library/compress-pdf.aspx)

收益取决于 PDF 的大小和结构：对于小文件或主要是扫描图像的文件，减少可能不是那么好，因此您应该尝试使用文件库并亲自查看。

如果您最关心文件的大小*并且*文件中有很多图像，*并且*您可以丢失这些图像的某些质量，那么您可以使用 Docotic.Pdf 轻松重新压缩现有图像。

这是使所有图像双层并使用传真压缩进行压缩的代码：

```
static void RecompressExistingImages(string fileName, string outputName)
{
    using (PdfDocument doc = new PdfDocument(fileName))
    {
        foreach (PdfImage image in doc.Images)
            image.RecompressWithGroup4Fax();

        doc.Save(outputName);
    }
} 
```

还有`RecompressWithFlate`,`RecompressWithGroup3Fax`和`RecompressWithJpeg`方法。

如果需要，该库会将彩色图像转换为双层图像。您可以指定放气压缩级别、JPEG 质量等。

Docotic.Pdf 还可以在 PDF 中调整大图像的大小（并同时重新压缩它们）。如果文档中的图像实际上比需要的大，或者图像质量不那么重要，这可能很有用。

下面是缩放所有宽度或高度大于或等于 256 的图像的代码。然后使用 JPEG 压缩对缩放的图像进行编码。

```
public static void RecompressToJpeg(string path, string outputPath)
{
    using (PdfDocument doc = new PdfDocument(path))
    {
        foreach (PdfImage image in doc.Images)
        {
            // image that is used as mask or image with attached mask are
            // not good candidates for recompression
            if (!image.IsMask && image.Mask == null && (image.Width >= 256 || image.Height >= 256))
                image.Scale(0.5, PdfImageCompression.Jpeg, 65);
        }

        doc.Save(outputPath);
    }
} 
```

可以使用其中一种`ResizeTo`方法将图像大小调整为指定的宽度和高度。请注意，该`ResizeTo`方法不会尝试保留图像的纵横比。您应该自己计算适当的宽度和高度。

免责声明：我为 Bit Miracle 工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-12T02:55:45.853

[GhostScript](http://www.ghostscript.com/)是 AGPL 许可的软件，可以压缩 PDF。在 github 上还有一个 AGPL 许可的 C# 包装[器](https://github.com/jhabjan/Ghostscript.NET)。

您可以使用该`GhostscriptProcessor`包装器中的类将自定义命令传递给 GhostScript，就像在描述 PDF 压缩的[AskUbuntu 答案中找到的命令一样。](https://askubuntu.com/a/256449/244582)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-07T02:58:07.803

使用[PdfSharp](http://www.pdfsharp.net/)

```
public static void CompressPdf(string targetPath)
{
    using (var stream = new MemoryStream(File.ReadAllBytes(targetPath)) {Position = 0})
    using (var source = PdfReader.Open(stream, PdfDocumentOpenMode.Import))
    using (var document = new PdfDocument())
    {
        var options = document.Options;
        options.FlateEncodeMode = PdfFlateEncodeMode.BestCompression;
        options.UseFlateDecoderForJpegImages = PdfUseFlateDecoderForJpegImages.Automatic;
        options.CompressContentStreams = true;
        options.NoCompression = false;
        foreach (var page in source.Pages)
        {
            document.AddPage(page);
        }

        document.Save(targetPath);
    }
} 
```

# css - 无法导入的字体在 IE9 中不显示

> ID：13719556
> 
> 赞同：1
> 
> 时间：2012-12-05T09:05:38.410
> 
> 标签：css, internet-explorer, internet-explorer-9

这是我的代码：

```
@font-face {
    font-family: 'font-icon';
    src: url('richstyle-webfont.eot');
    src: url('richstyle-webfont.eot?#iefix') format('embedded-opentype'),
         url('richstyle-webfont.woff') format('woff'),
         url('richstyle-webfont.ttf') format('truetype'),
         url('richstyle-webfont.svg#richstylemedium') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

我无法显示字体图标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:34:00.743

我自己以前遇到过很多麻烦。检查与 HTML/CSS 文件相关的根文件夹相比，您下载字体文件的位置。

例如，如果所有字体都位于根文件夹中的同一位置，则上面的代码是正确的。

可能会出现另外两种情况。第一个是如果您将它们下载到一个新创建的名为*fonts*的文件夹中，该文件夹位于根目录下的文件夹中，代码如下：

```
@font-face {
    font-family: 'font-icon';
    src: url('fonts/richstyle-webfont.eot') format('eot');
    src: url('fonts/richstyle-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/richstyle-webfont.woff') format('woff'),
         url('fonts/richstyle-webfont.ttf') format('truetype'),
         url('fonts/richstyle-webfont.svg#richstylemedium') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

另一种情况可能是该文件位于您网站根目录中的另一个文件夹中，但字体文件位于完全独立文件夹中的*字体中。*访问它的方法是创建一个不同的相对链接，如下所示：

```
@font-face {
    font-family: 'font-icon';
    src: url('../fonts/richstyle-webfont.eot') format('eot');
    src: url('../fonts/richstyle-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/richstyle-webfont.woff') format('woff'),
         url('../fonts/richstyle-webfont.ttf') format('truetype'),
         url('../fonts/richstyle-webfont.svg#richstylemedium') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

这取决于您如何在代码中指向 URL 源。就像我说的，我以前遇到过很多次这个问题。先试试这个，看看是否有帮助。

您可以做的另一件事是与此人在他的回答中发布的相同：[@font-face 在 IE8 中有效，但在 IE9 中无效](https://stackoverflow.com/questions/4607560/font-face-works-in-ie8-but-not-ie9)

他还将这个笑脸本地：添加`src: local("☺"),`到代码中，因此您的代码将如下所示：

 ~~~~```
@font-face {
    font-family: 'font-icon';
    src: url('fonts/richstyle-webfont.eot');
    src: local("☺"); <-- should've been a semi-colon
    src: url('fonts/richstyle-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/richstyle-webfont.woff') format('woff'),
         url('fonts/richstyle-webfont.ttf') format('truetype'),
         url('fonts/richstyle-webfont.svg#richstylemedium') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```~~ 

~~下面是写出代码的更好方法。试试这个，看看它是如何为你工作的：~~

 ~~```
@font-face {
    font-family: 'font-icon';
    src: local("☺"), 
         url('fonts/richstyle-webfont.eot') format('eot'),
         url('fonts/richstyle-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/richstyle-webfont.woff') format('woff'),
         url('fonts/richstyle-webfont.ttf') format('truetype'),
         url('fonts/richstyle-webfont.svg#richstylemedium') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:51:56.860

Try this:

```
@font-face {
  font-family: 'font-icon';
  src: url('fonts/richstyle-webfont.eot');
  src: local('?'),
         url('fonts/richstyle-webfont.otf') format('opentype');
} 
```

or this

```
@font-face {
  font-family: 'font-icon';
  src: url('fonts/richstyle-webfont.eot?') format('eot'), 
  url('fonts/richstyle-webfont.woff') format('woff'), 
  url('fonts/richstyle-webfontb.ttf') format('truetype');
} 
```

This comes from Paul Irish's [Bulletproof font post](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:36:35.440

您是否尝试过：http: [//jsfiddle.net/xGLaz/](http://jsfiddle.net/xGLaz/)？

或者也许你必须`font-family: 'font-icon';`改变`font-family:'RichStyle';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T20:50:40.250

以下是如何使用 RichStyle 字体： [http ://richstyle.org/richstyle-theme/theme.css](http://richstyle.org/richstyle-theme/theme.css)

我的意思是这样的：

```
@font-face {
font-family: 'RichStyle';
src: url('{url}/RichStyle.eot');
src: url('{url}/RichStyle.eot?#iefix') format('embedded-opentype'),
     url('{url}/RichStyle.woff') format('woff'),
     url('{url}/RichStyle.ttf') format('truetype'),
     url('{url}/RichStyle.svg#richstyle') format('svg');
font-weight: normal;
font-style: normal; 
```

}

其中 {url} 是字体的**相对**位置。~~~~

# php - PHP：$_ENV 和 $GLOBALS 的区别

> ID：13719560
> 
> 赞同：1
> 
> 时间：2012-12-05T09:05:52.667
> 
> 标签：php

`$_ENV`使用和有什么区别`$GLOBALS`？

我希望有一个全局变量可以随时随地获取和设置（需要在 OO 类和普通程序 PHP 脚本中访问）。我应该使用以上哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:10:06.197

您应该使用[`$GLOBALS`](http://php.net/manual/en/reserved.variables.globals.php)它的目的，提供一个设置全局变量的地方，这些变量可以在您的 PHP 代码的任何上下文（在函数、类、任何地方）中访问。

但是作为一种良好的编程习惯，不要滥用全局变量，相反，请尝试让您的函数和对象方法在上下文中拥有它们工作所需的所有数据，这样您的代码就更加灵活，请参阅[globals are evil](http://www.mediawiki.org/wiki/Manual%3aGlobals_are_evil)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:10:38.427

您根本不应该使用全局变量，而是使用依赖注入（即将所有必要的数据作为函数参数传递），但如果必须，请使用`$GLOBALS`. `$_ENV`保存系统传递的 PHP 脚本之外的数据。虽然它可能作为超全球服务的目的，但这不是它的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:17:09.390

对于全局变量的替代方法，看看 Zend 是如何做到的。Zend 注册表： http: [//framework.zend.com/manual/1.12/en/zend.registry.html](http://framework.zend.com/manual/1.12/en/zend.registry.html)

基本上，它是一个具有一些用于获取和设置变量的静态方法的类。

我个人更喜欢这种使用全局变量的方法。

# c# - WPF Listview 项目突出显示

> ID：13719562
> 
> 赞同：1
> 
> 时间：2012-12-05T09:05:54.493
> 
> 标签：c#, wpf, listview, textbox

我有一个包含客户信息的列表视图。该列表视图上方有一个搜索文本框。当您在文本框中键入任何内容时，它会突出显示列表视图中的匹配项。但是，问题在于它只在列表视图的可视侧进行搜索。它不会在列表视图的未滚动侧（列表视图的按钮）中搜索。我的代码如下。请看一看。

```
private void FindListViewItem(DependencyObject obj)
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        ListViewItem lv = obj as ListViewItem;
        if (lv != null)
        {
            HighlightText(lv);
        }
        FindListViewItem(VisualTreeHelper.GetChild(obj as DependencyObject, i));
    }
}

private void HighlightText(Object itx)
{
    if (itx != null)
    {
        if (itx is TextBlock)
        {
            Regex regex = new Regex("(" +TxtSearch.Text + ")", RegexOptions.IgnoreCase);
            TextBlock tb = itx as TextBlock;
            if (TxtSearch.Text.Length == 0)
            {
                string str = tb.Text;
                tb.Inlines.Clear();
                tb.Inlines.Add(str);
                return;
            }
            string[] substrings = regex.Split(tb.Text);
            tb.Inlines.Clear();
            foreach (var item in substrings)
            {
                if (regex.Match(item).Success)
                {
                    Run runx = new Run(item);
                    runx.Background = Brushes.Lime;
                    tb.Inlines.Add(runx);

                    if (tb.IsMouseOver)
                    {
                        tb.IsEnabled = false;
                    }
                }
                else
                {
                    tb.Inlines.Add(item);
                    tb.IsEnabled = false;
                }
            }

            return;
        }
        else
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(itx as DependencyObject); i++)
            {
                HighlightText(VisualTreeHelper.GetChild(itx as DependencyObject, i));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:06:57.500

发生这种情况是因为 ListView 默认情况下对其内容使用虚拟化。这意味着 ListViewItem 在需要时创建。如果您没有滚动 ListView，将不会创建一些 ListViewItems，并且 VisualTreeHelper.GetChildrenCount 将无法返回这些 ListViewItems。

为了实现你想要的，你可以：

*   通过设置禁用 ListView 虚拟化：`VirtualizingStackPanel.IsVirtualizing="False"`在您的 ListView 上（如果您的列表中有很多项目，则不推荐）。
*   `IItemContainerGenerator.GenerateNext`您可以通过调用and强制创建不可见的 ListViewItem `IItemContainerGenerator.PrepareItemContainer`（根本不推荐）。（也看看[这个](https://stackoverflow.com/questions/630124/forcing-wpf-to-create-the-items-in-an-itemscontrol)）
*   找到更好的逻辑来突出显示您的 ListViewItems :)（推荐）。（例如，在您的集合中搜索您想要突出显示的项目，而不是搜索仅显示您的项目的 UI 元素。然后将找到的项目标记为突出显示并基于此，相应地显示 ListViewItems（使用不同的模板或风格））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:59:24.747

In Addition to my Comment:

Use a Property and a Observable Collection and directly filter on that Collection.

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public ObservableCollection<Entry> MyCollection {get;set;}

    public MainWindow()
    {
        InitializeComponent();

        MyCollection = new ObservableCollection<Entry>();
        MyCollection.Add(new Entry() { Name = "Test" });
        MyCollection.Add(new Entry() { Name = "ABCD" });
        MyCollection.Add(new Entry() { Name = "TESTABC" });
        MyCollection.Add(new Entry() { Name = "BCDtest" });

        this.MyListView.DataContext = this;
    }

    private void searchTerm_KeyUp(object sender, KeyEventArgs e)
    {
        String term = ((TextBox)sender).Text;

        foreach (Entry entry in this.MyCollection)
        {
            if (entry.Name.Contains(term))
                entry.Highlight();
            else
                entry.UnHighlight();
        }

    }
}

public class Entry : INotifyPropertyChanged
{
    public String Name { get; set; }
    public Color BGColor { get; set; }
    public SolidColorBrush BGBrush
    {
        get
        {
            return new SolidColorBrush(this.BGColor);
        }
    }

    public Entry()
    {
        this.UnHighlight();
    }

    public void Highlight()
    {
        this.BGColor = Colors.Yellow;
        this.NotifyPropertyChanged("BGBrush");
    }

    public void UnHighlight()
    {
        this.BGColor = Colors.White;
        this.NotifyPropertyChanged("BGBrush");
    }
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

} 
```

along with

```
<Grid>
    <DockPanel>
        <TextBox DockPanel.Dock="Top" Name="searchTerm" KeyUp="searchTerm_KeyUp"></TextBox>
        <ListView Name="MyListView" ItemsSource="{Binding MyCollection}" >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Background="{Binding BGBrush}" Text="{Binding Name}"></TextBlock>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </DockPanel>
</Grid> 
```

And you are done. No need to manually touch the listview at any time. (To Increase Performance: For the Raising of the PropertyChanged Event you may want to add a check, if its really changing, or if it has been set to white from white etc.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:26:54.067

您可以通过多种方式做到这一点。这是我认为可以在您的场景中使用的一种方式，并且部分使用您的代码并且仍然使用虚拟化。

为列表视图项使用数据模板，并为加载的事件创建事件处理程序，例如：

```
<ListView.ItemTemplate>
      <DataTemplate>
          <TextBlock Text="{Binding}" Loaded="FrameworkElement_OnLoaded"/>
      </DataTemplate>
 </ListView.ItemTemplate> 
```

在 OnLoaded 事件处理程序中，调用发送方的 HighlightText 方法：

```
HighlightText(sender) 
```

为了触发加载的事件，您需要在每次搜索字符串更改时刷新列表视图。应该这样`ListView.Items.Refresh()`做。

您可以通过在更改的搜索文本上添加一个小计时器来改进这一点，以便用户在搜索某些内容时能够完成输入。

还有其他更优雅的方法来处理这个问题，但对于你的情况，我认为这应该可行。

# c++ - 如何查找变量是在堆栈还是堆中分配？

> ID：13719563
> 
> 赞同：21
> 
> 时间：2012-12-05T09:05:54.140
> 
> 标签：c++, c, heap-memory, stack-memory

在某处偶然发现了这个面试问题，

在 C 语言中，给定一个变量`x`，如何确定该变量的空间是在堆栈还是堆上分配的？

（有没有办法以编程方式找到它而不必通过符号表等？查找空间是在堆栈还是堆中分配是否有任何实际意义？）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T09:43:41.340

**不，一般不会。**

你知道 gcc[`-fsplit-stack`](http://gcc.gnu.org/wiki/SplitStacks)吗？

由实现决定是分配连续堆栈还是分配块与内存中的堆块交错的堆栈。祝你好运，当后者被拆分时，弄清楚是为堆还是堆栈分配了块。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T09:17:05.810

如果您正在研究将堆栈存储在比堆更大的地址上的体系结构，则可以将变量地址与堆栈底部进行比较。使用`pthread`线程 API，这个比较看起来像这样：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <inttypes.h>

int is_stack(void *ptr)
{
  pthread_t self = pthread_self();
  pthread_attr_t attr;
  void *stack;
  size_t stacksize;
  pthread_getattr_np(self, &attr);
  pthread_attr_getstack(&attr, &stack, &stacksize);
  return ((uintptr_t) ptr >= (uintptr_t) stack
          && (uintptr_t) ptr < (uintptr_t) stack + stacksize);
} 
```

考试：

```
int main()
{
  int x;
  int *p1 = malloc(sizeof(int));
  int *p2 = &x;

  printf("%d %d\n", is_stack(p1), is_stack(p2));
  return 0;
} 
```

`0 1`...按预期打印。

上面的代码不会从*其他*线程的堆栈中检测存储。为此，代码需要跟踪所有创建的线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T12:30:35.020

任何标准都不能保证这一点，但

在大多数平台上，堆栈从可用的最高地址向下增长，如果地址的最高有效字节位于平台可用内存空间的上半部分，并且您没有分配千兆字节的内存，则堆从底部增长，这是一个很好的赌注，它在堆栈上。

```
#include <iostream>
#include <stdlib.h>
int main()
{
int x = 0;
int* y = new int;

unsigned int a1 = (int) &x;
unsigned int a2 = (int) y;

std::cout<<std::hex<<a1<<"  "<<a2<<std::endl;
} 
```

给出`ffbff474 21600`我正在输入的机器上的输出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T09:59:46.023

这可能是一个技巧问题。变量具有自动或静态存储持续时间[*]。您可以相当安全地说自动分配是“在堆栈上”，至少假设它们没有优化到寄存器中。存在“堆栈”不是标准的要求，但符合标准的 C 实现必须维护调用堆栈并将自动变量与调用堆栈的级别相关联。所以无论它实际做什么的细节，你几乎可以称之为“堆栈”。

具有静态存储持续时间的变量通常位于一个或多个数据段中。从操作系统的 POV 来看，数据部分可能在程序启动之前从堆中分配，但从程序的 POV 来看，它们与“免费存储”无关。

您可以通过检查源中的定义来判断变量的存储持续时间——如果它在函数范围内，那么它是自动的，除非被标记`static`。如果它不在函数范围内，那么无论它是否被标记，它都具有静态持续时间`static`（因为`static`关键字在那里表示不同的东西）。

没有可移植的方法可以根据变量的地址来判断变量的存储持续时间，但特定的实现可能会提供执行此操作的方法，或者您可以使用或多或少可靠性的工具来进行猜测。

对象也可以具有动态存储持续时间（这通常是“在堆上分配”的意思），但这样的对象*不是变量*，所以如果有的话，这就是诀窍。

[*] 或 C11 和 C++11 中的线程本地。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T09:13:52.437

我认为它没有解决方案。代码可以通过堆栈（堆）地址范围调整 var 的地址，但这不是一个确切的方式。代码最多只能在某些特定平台上运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T20:58:46.973

不，不可能通过内存位置确定编译器必须使用 isstack() 支持它才能移植。

# vb.net - SCOPE_IDENTITY() after TableAdapter Update

> ID：13719567
> 
> 赞同：0
> 
> 时间：2012-12-05T09:06:11.327
> 
> 标签：vb.net, vb.net-2010, tableadapter, scope-identity

I've updated my TableAdapter's advanced options, so it would Refresh the data table.

I'm looking to retrieve the SCOPE_IDENTITY of the new added row, right after I use TableAdapter.Update.

How can this be achieved?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:10:16.300

The `TableAdapter` will insert the `SCOPE_IDENTITY` automatically at the end of the insert statement. The `DataRow` contains the newly created identity value after the insert. Just don't set the PK column before you add the row to the table and update it via the `TableAdapter`.

```
Dim daLocation As New LocationTableAdapter() ' the TableAdapter
Dim newLocation = Location.NewLocationRow() ' the new DataRow

newLocation.Name = "Berlin"
Location.AddLocationRow(newLocation)
' now update the DataTable or the DataRow with the TableAdapter 
Dim numRowsUpdated As Int32 = daLocation.Update(newLocation) 
Dim id As Int32 = newLocation.idLocation ' now the new ID is available 
```

# javascript - 在 Javascript 中安排任务在每个用户执行特定操作后 1 小时运行

> ID：13719569
> 
> 赞同：0
> 
> 时间：2012-12-05T09:06:21.013
> 
> 标签：javascript, scheduled-tasks

我正在用 Javascript 创建一个应用程序。应用程序应在用户完成特定操作一小时后运行功能。我可以使用什么来创建这些计划任务来运行该功能？

用例说明：用户点击状态为“活动”，一小时后状态应自动变为“非活动”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:07:11.753

您可以[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)为此使用：

```
var timer = setTimeout(function() {
    // Task
}, 60 * 60 * 1000); 
```

并[`clearTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)在额外情况下停止超时：

```
clearTimeout(timer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:25:53.893

当状态设置为活动时，向服务器发送消息并记录时间。然后有一个像下面这样经常运行的重复功能，以检查时间是否过期。

```
function checkStatus( ) {

    function check( ) {
        //Check with server. Should I set status to inactive

        var timer = setTimeout(check, 60 * 1000);
    }
    check();
} 
```

如果用户关闭浏览器并重新打开它，那么如果服务器上的时间尚未到期，您可以将状态设置为活动并继续运行该功能。

# sql - 使用 Powershell 在多台服务器上运行 sqlquery

> ID：13719571
> 
> 赞同：0
> 
> 时间：2012-12-05T09:06:22.577
> 
> 标签：sql, sql-server, powershell

我正在尝试运行此查询

从 sys.database_mirroring 中选择 mirroring_role_desc，其中 database_id > 4 且 mirroring_state 不为空

所以查询基本上会输出数据库的数量，并像这样显示主体/镜像 ![在此处输入图像描述](../Images/e5a66d53f3f9b3d8eef4eaf090100c57.png)

我希望这个查询输出到 excel 文件另一个有趣的事情，如果实例中的任何一个数据库是主体/镜像，那么我们可以假设整个实例作为主体/镜像。因此，在 excel 文件中，我想要一个带有 servername\hostname 的列，然后下一列显示它是镜像还是主体或没有（如果没有，则留空）如何做到这一点？

我试过这个，

```
$ServerInstance = "server1\instance1a "
$Database = " "
$ConnectionTimeout = 30
$Query = "select mirroring_role_desc from sys.database_mirroring where database_id > 4 and mirroring_state is NOT NULL"
$QueryTimeout = 120

$conn=new-object System.Data.SqlClient.SQLConnection
$ConnectionString = "Server={0};Database={1};Integrated Security=True;Connect Timeout={2}" -f $ServerInstance,$Database,$ConnectionTimeout
$conn.ConnectionString=$ConnectionString
$conn.Open()
$cmd=new-object system.Data.SqlClient.SqlCommand($Query,$conn)
$cmd.CommandTimeout=$QueryTimeout
$ds=New-Object system.Data.DataSet
$da=New-Object system.Data.SqlClient.SqlDataAdapter($cmd)
[void]$da.fill($ds)
$conn.Close()
$ds.Tables 
```

坦率地说，上面的代码工作正常，但问题是获取实例名称和只有一个带有主体/镜像的单列进入一个 excel 文件，这就是我遇到的问题。

为了更好地了解这就是我想要实现的目标： ![在此处输入图像描述](../Images/33a195a16a34445aacc7290f6730d4ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:35:25.437

不久前我写了一篇博文，在中央管理服务器中的所有服务器上运行脚本。你应该能够相当容易地适应它。[在这里](http://www.spartansql.com/2012/10/changing-job-ownership-across-all.html)查看。

# objective-c - 如何使用此 JSON 数据填充 Objective C 表格视图

> ID：13719572
> 
> 赞同：-2
> 
> 时间：2012-12-05T09:06:26.723
> 
> 标签：objective-c, ios, json, tableview

我对使用 Objective C 编程非常陌生（几天后），不幸的是，几天后就有一个 iPhone 应用程序作为课程项目到期（回想起来我可能应该选择不同的东西）。我的应用程序需要的主要功能之一是能够从菜单中选择菜肴，方法是先在一个页面上选择餐点，然后在下一页选择类别，然后在最后一页选择菜肴。我已经让我的应用程序从 Internet API 下载 JSON 文件并将其存储为 NSArray 变量，但现在我需要使用该数组来填充我的表格视图。下面是从我的应用程序调试窗口下载的数组的示例。我已经有了应用程序的基本框架（即几个不同的视图）。这来自一个使用 plist 文件中的数据填充 tableview 行的示例应用程序，但我想使用这个 JSON 数据。我将如何使用这个数组来填充存储在这个 NSArray 变量中的 JSON 数据的行？谢谢！

```
2012-12-05 03:29:48.973 MLBMobile[3858:c07] {
    category = "BREAKFAST MEATS";
    date = "2012-12-05";
    meal = BREAKFAST;
    name = "Low-Sodium Ham";
    portion = 1;
    recipe = 319044;
    unit = oz;
}
2012-12-05 03:29:48.975 MLBMobile[3858:c07] {
    category = "BREAKFAST MEATS";
    date = "2012-12-05";
    meal = BREAKFAST;
    name = "Roasted Low-Sodium Turkey";
    portion = 4;
    recipe = 113503;
    unit = oz;
}
2012-12-05 03:29:48.976 MLBMobile[3858:c07] {
    category = "BREAKFAST ENTREES";
    date = "2012-12-05";
    meal = BREAKFAST;
    name = "Cheddar Cheese";
    portion = 1;
    recipe = 130029;
    unit = oz;
}
2012-12-05 03:29:48.976 MLBMobile[3858:c07] {
    category = "BREAKFAST ENTREES";
    date = "2012-12-05";
    meal = BREAKFAST;
    name = "Hard Cooked Eggs - Cage Free";
    portion = 1;
    recipe = 061009;
    unit = each;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:15:54.873

使用数组变量，您可以遍历每个元素。使用快速枚举：

```
for(NSDictionary *dict in yourArrayVariable){
    NSString *category = [dict objectForKey:@"name"];
    //...you get the point
} 
```

现在您可以通过设置行的属性来填充您的行。例如，如果您使用默认的[UITableViewCell](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)：

```
cell.textLabel.text = name; 
```

为了更好地分离数据/模型/视图，您可以做更多的事情，但我只是包含了一些示例，就好像它们都是在一个文件中本地完成的一样。

# c# - C#中CreateObject的等效代码

> ID：13719579
> 
> 赞同：20
> 
> 时间：2012-12-05T09:06:59.630
> 
> 标签：c#, com

我在 VB6 中有一个代码。谁能告诉我怎么写`C#`。这段代码如下：

```
Set Amibroker = CreateObject("Broker.Application")
Set STOCK = Amibroker.Stocks.Add(ticker)
Set quote = STOCK.Quotations.Add(stInDate)

quote.Open = stInOpen
quote.High = stInHigh
quote.Low = stInlow
quote.Close = stInYcp
quote.Volume = stInVolume

Set STOCK = Nothing
Set quote = Nothing 
```

`CreateObject`C#中的等价物是什么？我尝试添加对 com 对象的引用，但我找不到任何 com 对象作为 Broker.Application 或 amibroker

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-05T09:28:46.227

如果您使用的是 .net 4 或更高版本，因此可以使用 . `dynamic`，您可以非常简单地做到这一点。这是一个使用 Excel 自动化界面的示例。

```
Type ExcelType = Type.GetTypeFromProgID("Excel.Application");
dynamic ExcelInst = Activator.CreateInstance(ExcelType);
ExcelInst.Visible = true; 
```

如果你不能使用动态，那么它会更加混乱。

```
Type ExcelType = Type.GetTypeFromProgID("Excel.Application");
object ExcelInst = Activator.CreateInstance(ExcelType);
ExcelType.InvokeMember("Visible", BindingFlags.SetProperty, null, 
    ExcelInst, new object[1] {true}); 
```

试图做很多这样的事情会耗尽你的生命线。

如果您可以使用早期绑定调度而不是如上所示的后期绑定，那么 COM 会容易得多。您确定找不到 COM 对象的正确引用吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-20T16:22:01.550

这是我用来自动化 Amibroker 的 C# 代码的一个片段（从我走这条路的时候开始）。您需要参考 System.Runtime.Interopservices

```
 System.Type objType = System.Type.GetTypeFromProgID("Broker.Application");

    dynamic comObject = System.Activator.CreateInstance(objType);

    comObject.Import(0, fileName, "default.format");

    comObject.RefreshAll(); 
```

但是，键入一个点不会调出 comObject 内部方法。

关于这种方法，我只能说 - 它有效，就像一个魅力，但远离它，就像大卫说的那样。我从以下方面获得了这种方法的灵感：

[http://www.codeproject.com/Articles/148959/How-the-new-C-dynamic-type-can-simplify-access-to](http://www.codeproject.com/Articles/148959/How-the-new-C-dynamic-type-can-simplify-access-to)

对于另一种攻击角度，您可能需要查看（我认为这是早期绑定）：

[http://adamprescott.net/2012/04/05/net-vb6-interop-tutorial/](http://adamprescott.net/2012/04/05/net-vb6-interop-tutorial/)

希望至少其中一些对您有所帮助。我已经在 Amibroker 和 C# 中使用了这两种方法，但我最终将它们抛在了后面。COM 和 Amibroker 不能很好地混合。连TJ都这么说。

总之祝你好运。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-12T07:53:49.010

如果您使用 .NET Framework 4.0 及更高版本，则可以使用此模式：

```
public sealed class Application: MarshalByRefObject {

    private readonly dynamic _application;

    // Methods
    public Application() {
        const string progId = "Broker.Application";
        _application = Activator.CreateInstance(Type.GetTypeFromProgID(progId));
    }

    public Application(dynamic application) {
        _application = application;
    }

    public int Import(ImportType type, string path) {
        return _application.Import((short) type, path);
    }

    public int Import(ImportType type, string path, string defFileName) {
        return _application.Import((short) type, path, defFileName);
    }

    public bool LoadDatabase(string path) {
        return _application.LoadDatabase(path);
    }

    public bool LoadLayout(string path) {
        return _application.LoadLayout(path);
    }

    public int Log(ImportLog action) {
        return _application.Log((short) action);
    }

    public void Quit() {
        _application.Quit();
    }

    public void RefreshAll() {
        _application.RefreshAll();
    }

    public void SaveDatabase() {
        _application.SaveDatabase();
    }

    public bool SaveLayout(string path) {
        return _application.SaveLayout(path);
    }

    // Properties
    public Document ActiveDocument {
        get {
            var document = _application.ActiveDocument;
            return document != null ? new Document(document) : null;
        }
    }

    public Window ActiveWindow {
        get {
            var window = _application.ActiveWindow;
            return window != null ? new Window(window) : null;
        }
    }

    public AnalysisDocs AnalysisDocs {
        get {
            var analysisDocs = _application.AnalysisDocs;
            return analysisDocs != null ? new AnalysisDocs(analysisDocs) : null;
        }
    }

    public Commentary Commentary {
        get {
            var commentary = _application.Commentary;
            return commentary != null ? new Commentary(commentary) : null;
        }
    }

    public Documents Documents {
        get {
            var documents = _application.Documents;
            return documents != null ? new Documents(documents) : null;
        }
    }

    public string DatabasePath {
        get { return _application.DatabasePath; }
    }

    public bool Visible {
        get { return _application.Visible != 0; }
        set { _application.Visible = value ? 1 : 0; }
    }

    public string Version {
        get { return _application.Version; }
    }
} 
```

}

接下来，您必须包装所有 AmiBroker OLE 自动化类。例如包装评论类：

```
public sealed class Commentary : MarshalByRefObject {

    // Fields
    private readonly dynamic _commentary;

    // Methods
    internal Commentary(dynamic commentary) {
        _commentary = commentary;
    }

    public void Apply() {
        _commentary.Apply();
    }

    public void Close() {
        _commentary.Close();
    }

    public bool LoadFormula(string path) {
        return _commentary.LoadFormula(path);
    }

    public bool Save(string path) {
        return _commentary.Save(path);
    }

    public bool SaveFormula(string path) {
        return _commentary.SaveFormula(path);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-04T03:24:53.130

ami2py 会将 AmiBroker 数据读入 python。当前版本是 .0.8.1 警告：它仅提供数据的日分辨率。

以下几行代码会将 AmiBroker 中的符号读入 pandas df

```
import pandas
import ami2py

folder='C:/Program Files/AmiBroker/Databases/StockCharts'
symbol='indu'
df = pandas.DataFrame()
symbolData = ami2py.AmiDataBase(folder).get_dict_for_symbol(symbol)
for z in ['Year', 'Month', 'Day', 'Open', 'High', 'Low', 'Close', 'Volume'] :
    df[symbol+':'+z] = symbolData[z]
print(df.describe()) 
```

# mysql - 水壶：如何建立人与学生的关系？

> ID：13719583
> 
> 赞同：0
> 
> 时间：2012-12-05T09:07:18.703
> 
> 标签：mysql, auto-increment, etl, kettle

我想对 MySQL 进行 ETL 操作。
我有一张桌子'人'：

```
Person
{ PersonId : Integer, (PK, auto_increment)
  FName : String, 
  LName : String } 
```

和一个表“学生”：

```
Student
{ PersonId : Integer, (FK)
  RegistrationNumber : Integer } 
```

我应该如何对上述结构进行 ETL 转换？

编辑 2012-12-12 ![结构](../Images/1d337de2bc068a4295d5328358a3fa46.png)
我想从 Student 结构转变为 Person-Student 结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:02:17.853

我建议与这两个表一起有一个事实表。

> Person { PersonId：整数，（PK，auto_increment）FName：字符串，LName：字符串}
> 
> 学生 { PersonId : 整数，(FK) RegistrationNumber : 整数 }

有一张桌子，比如 Fa_Individual，结构如下

> Fa_Individual { PersonId：整数，（来自 Person 表）FName：String，LName：String，RegistrationNumber：整数（来自 Student 表）}

您可以在 SQL 中使用“左外连接”来获取聚合级别的数据。这将是一个好主意。

# java - 增量运算符 ++

> ID：13719591
> 
> 赞同：2
> 
> 时间：2012-12-05T09:07:54.573
> 
> 标签：java, increment, assignment-operator

> **可能重复：**
> [后自增运算符 java](https://stackoverflow.com/questions/2750216/post-increment-operator-java)
> [“x = x++”之后的 x 是什么？](https://stackoverflow.com/questions/7911776/what-is-x-after-x-x)

有人可以向我解释以下每个小程序的结果吗？：

```
public static void main(String[] args) {
    int a = 10;
    a = a++;
    System.out.println(a);
} 
```

结果是：10

为什么不是 11，因为 a 应该在分配后增加？这是因为它涉及到操作符的左右不同的变量 = 吗？

下一个：

```
public static void main(String[] args) {
    int a = 10;
    a = ++a;
    System.out.println(a);
} 
```

结果是：11

可以理解，但编译器会显示警告：“对变量 a 的赋值无效”。结果不同意。

**更新：**

我没有修改我原来的问题，但我添加了这个评论来澄清现在我明白了警告的含义。也就是说，即使没有赋值（通过简单的语句 ++a），结果也是相同的（11）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T09:12:05.400

的`a++`值为`a`。`++`的优先级高于`=`。所以：

1.  取值`a`。
2.  `a`递增。
3.  (1) 处的值存储到`a`中。

所以 的值`a`不会改变。

您可以自己弄清楚在第二种情况下会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:12:09.410

在第一种情况下，分配首先发生，然后递增。所以你得到了增量之前的价值。但在第二种情况下，它首先增加然后被分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:52:52.103

让我们分析每种方式产生的字节码——

```
int a = 10;
a = a++;
System.out.println(a); //Output - 10 
```

产生的字节码 -

```
0 bipush
2 istore_1
3 iload_1 
4 iinc      
7 istore_1
8 getstatic
11 iload_1
12 invokevirtual
15 return 
```

和

```
int a = 10;
a = ++a;
System.out.println(a); //Output -11 
```

此处编译器发出警告 -*对变量 a 的赋值无效*

产生的字节码 -

```
0 bipush
2 istore_1
3 iinc
6 iload_1
7 istore_1
8 getstatic
11 iload_1
12 invokevirtual
15 return 
```

在这里，我们可以在第一种情况下看到变量负载首先然后递增，因此它不会对`variable a`.

在第二种情况下，它首先递增然后加载变量，因此它得到了递增的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:12:17.850

发生这种情况是因为 a++ 更像是一个方法而不是一个实际的数字。

您可以将它们分成两条单独的线。

第一个是

```
a = a;
return a + 1; 
```

第二个是

```
a = a+1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T09:14:52.453

`a++`意味着增加 variable 的值`a`，但是`a++`具有 a! 的原始值！

`a = ??`表示将值设置`a`为`??`

因此，您正在做的是将 a 的值加一，然后将其设置为旧值。

`++a`意味着增加 variable 的值`a`，但是`++a`具有 a! 的新值！

所以在第二个例子中，你要增加 a 的值，然后将 a 的值设置为那个值（它刚刚得到），所以你做了两次同样的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T09:16:37.613

`a++` 等价于`a = a + 1`但在表达式中使用值后递增（此处为赋值）`++a`相同但在表达式中使用之前递增。`a = ++a;`没有明确的分配影响，因为它等于`a = a = a + 1`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-05T09:13:09.550

当您编写`a++`时，这意味着在处理“=”运算符之后将递增。所以

```
b = a++;
System.out.println(a);
System.out.println(b); 
```

应该在你的屏幕上产生：11, 10。因为`a`在 b 取 'a' 的值之后变成 11。如果您将其更改`a++`为`++a`您强制在处理“=”之前发生增量，那么您将给出 b = a + 1 并且在您的屏幕上您应该有 11,11。

# javascript - 如何在 JavaScript 中给定其字符串名称设置对象属性（对象属性的..）？

> ID：13719593
> 
> 赞同：56
> 
> 时间：2012-12-05T09:08:00.517
> 
> 标签：javascript, string, properties, nested

假设我们只得到

```
var obj = {};
var propName = "foo.bar.foobar"; 
```

我们如何将属性设置`obj.foo.bar.foobar`为某个值（比如“hello world”）？所以我想实现这一点，而我们只有字符串中的属性名称：

```
obj.foo.bar.foobar = "hello world"; 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-05T09:21:36.877

```
function assign(obj, prop, value) {
    if (typeof prop === "string")
        prop = prop.split(".");

    if (prop.length > 1) {
        var e = prop.shift();
        assign(obj[e] =
                 Object.prototype.toString.call(obj[e]) === "[object Object]"
                 ? obj[e]
                 : {},
               prop,
               value);
    } else
        obj[prop[0]] = value;
}

var obj = {},
    propName = "foo.bar.foobar";

assign(obj, propName, "Value"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-05T09:21:15.793

由于这个问题似乎是由不正确的答案来回答的，所以我只会参考[类似问题的正确答案](https://stackoverflow.com/questions/6842795/dynamic-deep-setting-for-a-javascript-object)

```
function setDeepValue(obj, value, path) {
    if (typeof path === "string") {
        var path = path.split('.');
    }

    if(path.length > 1){
        var p=path.shift();
        if(obj[p]==null || typeof obj[p]!== 'object'){
             obj[p] = {};
        }
        setDeepValue(obj[p], value, path);
    }else{
        obj[path[0]] = value;
    }
} 
```

采用：

```
var obj = {};
setDeepValue(obj, 'Hello World', 'foo.bar.foobar'); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-11-24T11:32:53.863

我知道这是一个旧的，但我在答案中只看到自定义函数。
如果您不介意使用库，请查看**lodash** [`_.set`](https://lodash.com/docs/4.17.2#set)和[`_.get`](https://lodash.com/docs/4.17.2#get)函数。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-05T09:30:18.573

编辑：我创建了一个[jsPerf.com 测试用例](http://jsperf.com/nested-object-assignment)来将接受的答案与我的版本进行比较。事实证明，我的版本更快，尤其是当您深入时。

[http://jsfiddle.net/9YMm8/](http://jsfiddle.net/gcFgf/)

```
var nestedObjectAssignmentFor = function(obj, propString, value) {
    var propNames = propString.split('.'),
        propLength = propNames.length-1,
        tmpObj = obj;

    for (var i = 0; i <= propLength ; i++) {
        tmpObj = tmpObj[propNames[i]] = i !== propLength ?  {} : value;  
    }
    return obj;
}

var obj = nestedObjectAssignment({},"foo.bar.foobar","hello world"); 
```

​</p>

​</p>

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-13T15:27:48.503

所有解决方案在设置时都会覆盖任何原始数据，因此我对以下内容进行了调整，也将其变成了一个对象：

```
 var obj = {}
 nestObject.set(obj, "a.b", "foo"); 
 nestObject.get(obj, "a.b"); // returns foo     

 var nestedObject = {
     set: function(obj, propString, value) {
         var propNames = propString.split('.'),
             propLength = propNames.length-1,
             tmpObj = obj;
         for (var i = 0; i <= propLength ; i++) {
             if (i === propLength){
                 if(tmpObj[propNames[i]]){
                     tmpObj[propNames[i]] = value;
                 }else{
                     tmpObj[propNames[i]] = value;
                 }
             }else{
                 if(tmpObj[propNames[i]]){
                     tmpObj = tmpObj[propNames[i]];
                 }else{
                     tmpObj = tmpObj[propNames[i]] = {};
                 }
             }
         }
         return obj;
     },
     get: function(obj, propString){
         var propNames = propString.split('.'),
             propLength = propNames.length-1,
             tmpObj = obj;
         for (var i = 0; i <= propLength ; i++) {
             if(tmpObj[propNames[i]]){
                 tmpObj = tmpObj[propNames[i]];
             }else{
                 break;
             }
         }
         return tmpObj;
     }
 }; 
```

还可以将函数更改为 Oject.prototype 方法，将 obj 参数更改为：

```
Object.prototype = { setNested = function(){ ... }, getNested = function(){ ... } } 

{}.setNested('a.c','foo') 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-27T10:50:37.967

这是我刚刚从几个线程+一些自定义代码编译的获取和设置函数。

它还将创建现场不存在的键。

```
function setValue(object, path, value) {
    var a = path.split('.');
    var o = object;
    for (var i = 0; i < a.length - 1; i++) {
        var n = a[i];
        if (n in o) {
            o = o[n];
        } else {
            o[n] = {};
            o = o[n];
        }
    }
    o[a[a.length - 1]] = value;
}

function getValue(object, path) {
    var o = object;
    path = path.replace(/\[(\w+)\]/g, '.$1');
    path = path.replace(/^\./, '');
    var a = path.split('.');
    while (a.length) {
        var n = a.shift();
        if (n in o) {
            o = o[n];
        } else {
            return;
        }
    }
    return o;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-22T15:28:55.977

这是一个返回更新后的对象

```
function deepUpdate(value, path, tree, branch = tree) {
  const last = path.length === 1;
  branch[path[0]] = last ? value : branch[path[0]];
  return last ? tree : deepUpdate(value, path.slice(1), tree, branch[path[0]]);
}

const path = 'cat.dog';
const updated = deepUpdate('a', path.split('.'), {cat: {dog: null}})
// => { cat: {dog: 'a'} } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-10-19T15:32:29.077

这是一个使用参考的简单函数。

```
 function setValueByPath (obj, path, value) {
        var ref = obj;

        path.split('.').forEach(function (key, index, arr) {
            ref = ref[key] = index === arr.length - 1 ? value : {};
        });

        return obj;
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-30T12:14:50.270

您可以拆分路径并检查以下元素是否存在。如果没有将对象分配给新属性。

然后返回属性的值。

最后赋值。

```
function setValue(object, path, value) {
    var fullPath = path.split('.'),
        way = fullPath.slice(),
        last = way.pop();

    way.reduce(function (r, a) {
        return r[a] = r[a] || {};
    }, object)[last] = value;
}

var object = {},
    propName = 'foo.bar.foobar',
    value = 'hello world';

setValue(object, propName, value);
console.log(object);
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-05T18:07:44.597

# 很直接的一个。

这个实现应该非常高效。它避免了递归和函数调用，同时保持了简单性。

```
/**
 * Set the value of a deep property, creating new objects as necessary.
 * @param {Object} obj The object to set the value on.
 * @param {String|String[]} path The property to set.
 * @param {*} value The value to set.
 * @return {Object} The object at the end of the path.
 * @author github.com/victornpb
 * @see https://stackoverflow.com/a/46060952/938822
 * @example
 * setDeep(obj, 'foo.bar.baz', 'quux');
 */
function setDeep(obj, path, value) {
    const props = typeof path === 'string' ? path.split('.') : path;
    for (var i = 0, n = props.length - 1; i < n; ++i) {
        obj = obj[props[i]] = obj[props[i]] || {};
    }
    obj[props[i]] = value;
    return obj;
}

/*********************** EXAMPLE ***********************/

const obj = {
    hello : 'world',
};

setDeep(obj, 'root', true);
setDeep(obj, 'foo.bar.baz', 1);
setDeep(obj, ['foo','quux'], '');

console.log(obj);
// ⬇︎ Click "Run" below to see output
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-19T08:29:02.683

我正在寻找一个**不会覆盖现有值**并且易于阅读并且能够提出这个答案的答案。把这个留在这里，以防它帮助其他有同样需求的人

```
function setValueAtObjectPath(obj, pathString, newValue) {
  // create an array (pathComponents) of the period-separated path components from pathString
  var pathComponents = pathString.split('.');
  // create a object (tmpObj) that references the memory of obj
  var tmpObj = obj;

  for (var i = 0; i < pathComponents.length; i++) {
    // if not on the last path component, then set the tmpObj as the value at this pathComponent
    if (i !== pathComponents.length-1) {
      // set tmpObj[pathComponents[i]] equal to an object of it's own value
      tmpObj[pathComponents[i]] = {...tmpObj[pathComponents[i]]}
      // set tmpObj to reference tmpObj[pathComponents[i]]
      tmpObj = tmpObj[pathComponents[i]]
    // else (IS the last path component), then set the value at this pathComponent equal to newValue 
    } else {
      // set tmpObj[pathComponents[i]] equal to newValue
      tmpObj[pathComponents[i]] = newValue
    }
  }
  // return your object
  return obj
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-05T07:12:52.547

与 Rbar 的答案相同，在使用**redux reducers**时非常有用。我也使用 lodash clone 而不是扩展运算符来支持数组：

```
export function cloneAndPatch(obj, path, newValue, separator='.') {
    let stack = Array.isArray(path) ? path : path.split(separator);
    let newObj = _.clone(obj);

    obj = newObj;

    while (stack.length > 1) {
        let property = stack.shift();
        let sub = _.clone(obj[property]);

        obj[property] = sub;
        obj = sub;
    }

    obj[stack.shift()] = newValue;

    return newObj;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-17T10:39:44.113

```
Object.getPath = function(o, s) {
    s = s.replace(/\[(\w+)\]/g, '.$1'); // convert indexes to properties
    s = s.replace(/^\./, '');           // strip a leading dot
    var a = s.split('.');
    for (var i = 0, n = a.length; i < n; ++i) {
        var k = a[i];
        if (k in o) {
            o = o[k];
        } else {
            return;
        }
    }
    return o;
};

Object.setPath = function(o, p, v) {
    var a = p.split('.');
    var o = o;
    for (var i = 0; i < a.length - 1; i++) {
        if (a[i].indexOf('[') === -1) {
            var n = a[i];
            if (n in o) {
                o = o[n];
            } else {
                o[n] = {};
                o = o[n];
            }
        } else {
            // Not totaly optimised
            var ix = a[i].match(/\[.*?\]/g)[0];
            var n = a[i].replace(ix, '');
            o = o[n][ix.substr(1,ix.length-2)]
        }
    }

    if (a[a.length - 1].indexOf('[') === -1) {
        o[a[a.length - 1]] = v;
    } else {
        var ix = a[a.length - 1].match(/\[.*?\]/g)[0];
        var n = a[a.length - 1].replace(ix, '');
        o[n][ix.substr(1,ix.length-2)] = v;
    }
}; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-03-13T12:03:12.780

这是一个简单的方法，它使用一个范围`Object`递归地设置路径的正确道具。

```
function setObjectValueByPath(pathScope, value, obj) {
  const pathStrings = pathScope.split('/');
  obj[pathStrings[0]] = pathStrings.length > 1 ?
    setObjectValueByPath(
      pathStrings.splice(1, pathStrings.length).join('/'),
      value,
      obj[pathStrings[0]]
    ) :
    value;
  return obj;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-18T17:12:58.520

一个简单而简短的怎么样？

`Object.assign(this.origin, { [propName]: value })`

# xcode - 核心数据如何使用第二个实体

> ID：13719604
> 
> 赞同：1
> 
> 时间：2012-12-05T09:09:10.360
> 
> 标签：xcode, uitableview, core-data, entity

我有 2 个实体，第一个是 PERSON，第二个是 EVENT，它们具有一对多的关系。我的第一个 tableView 有 PERSON 的名字（工作得很好）。现在我想用所选人员的事件制作另一个 tableView（从第一个 tableView 中按名称选择）。

我只想要名称为“Billy,Amanda”的 tableView。比利有 2 个活动（生日和购物），阿曼达有 3 个活动（生日、学习、电影）。当用户在第一个 tableView 中按 Billy 时，他会得到另一个 tableView：生日和购物..

我怎样才能做到？如果有人编写代码示例或将我链接到教程，那就太好了。

# wpf - 如果事件触发，如何让控件设置自己的属性

> ID：13719608
> 
> 赞同：1
> 
> 时间：2012-12-05T09:09:25.790
> 
> 标签：wpf, events, xaml, controls

如果触发同一控件的事件，如何将控件的属性设置为特定值？

假设我有一个*扩展器*

```
 <Expander Header="Click to expand" GotFocus="IsExpanded=True" /> 
```

如果它有焦点，我想将 IsExpanded 属性设置为 true。我怎样才能在*Xaml*中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:16:36.120

您可以尝试使用[binding](http://msdn.microsoft.com/en-us/library/ms750612.aspx)，可能是这样的：

```
 <Expander IsExpanded="{Binding IsFocused, RelativeSource={RelativeSource Self}, Mode=OneWay}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:22:37.767

Adrian 的方法是实现目标的最干净的方法。但是，如果您想在事件触发时更改属性，可以尝试以下操作：

```
<Expander Header="Click to expand">
  <Expander.Style>
    <Style TargetType="Expander">
      <Style.Triggers>
        <EventTrigger RoutedEvent="GotFocus">
          <BeginStoryboard>
            <Storyboard>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Expander.IsExpanded)">
                  <DiscreteObjectKeyFrame KeyTime="0" Value="True"/>
              </ObjectAnimationUsingKeyFrames>
            </Storyboard>
          </BeginStoryboard>
        </EventTrigger>
      </Style.Triggers>
    </Style>
  </Expander.Style>
</Expander> 
```

注意：这纯粹来自记忆，可能无法按原样工作。但它应该让您很好地了解如何实现这一点。

# ios - 带有三个按钮的 UIAlertView 登录和密码输入

> ID：13719609
> 
> 赞同：2
> 
> 时间：2012-12-05T09:09:31.890
> 
> 标签：ios, uialertview

我刚刚发现了一个奇怪的问题，当我尝试在 UIAlertView 中使用三个按钮时，视图显示得很奇怪，如您在此屏幕截图中所见：

![UIAlertView](../Images/844aaefc4b12e477214c45fefbce871e.png)

这是代码：

```
UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Login" message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Login",@"Forget Password", nil];

[alert setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
UITextField *place=[alert textFieldAtIndex:0];
place.placeholder=@"Email";
[alert show];
[alert release]; 
```

请建议我如何纠正这个问题。谢谢。

# asp.net-mvc-3 - 查询数据库合格后生成pdf文件并发送

> ID：13719614
> 
> 赞同：1
> 
> 时间：2012-12-05T09:09:38.363
> 
> 标签：asp.net-mvc-3, c#-4.0, rdlc

我的项目快完成了，感谢stackoverflow。既然我已经设法捕获了用户的详细信息和他们的证书，我正在寻找一种生成 pdf 的方法，我将把它发送给那些通过的人。

我现在不是在寻找代码。我有一个 asp.net mvc 3 应用程序，它显示了我的学生的证书详细信息。现在我希望生成证书，然后通过电子邮件发送，所有这些都是自动化的。

首先，我想了解如何从数据库值生成 pdf 并发送生成的 pdf 不会有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:26:04.080

使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)，此代码将创建并提供 PDF：

```
public FileStreamResult DownloadPDF()
{
        MemoryStream workStream = new MemoryStream();

        using(Document document = new Document())
        {
            PdfWriter.GetInstance(document, workStream).CloseStream = false;

            document.Open();

            document.SetPageSize(PageSize.LETTER);
            document.SetMargins(12, 12, 8, 7);
            document.NewPage();

            // Create a new Paragraph object with the text, "Hello, World!"
            var welcomeParagraph = new Paragraph("Hello, World!");

            // Add the Paragraph object to the document
            document.Add(welcomeParagraph);

            // This is where your data would go

            document.Close();
        }
        workStream.Position = 0;

        FileStreamResult fileResult = new FileStreamResult(workStream, "application/pdf");
        fileResult.FileDownloadName = "test.pdf";

        return fileResult;
    } 
```

有关更多信息，请参阅[使用 ASP.NET 和 iTextSharp 创建 PDF 文档](http://www.4guysfromrolla.com/articles/030911-1.aspx)

网上有很多教程，但这应该可以帮助您入门。

# visual-studio-2012 - 无法在 VS2012 更新 1 上添加 Microsoft.Practices.EnterpriseLibrary.Logging 的 Fakes 程序集

> ID：13719617
> 
> 赞同：2
> 
> 时间：2012-12-05T09:09:50.517
> 
> 标签：visual-studio-2012, enterprise-library, microsoft-fakes

安装 VS2012 Update 1 后，我无法创建假程序集以供`Microsoft.Practices.EnterpriseLibrary.Logging.dll`参考。但是伪造程序集`Microsoft.Practices.EnterpriseLibrary.Commom.dll`，`System.dll`而其他人则正常创建。我发现这个问题的唯一解决方案是卸载 VS2012 的更新 1，然后一切恢复正常。该问题发生在本地计算机和 tfs 构建服务器上。

这是 VS2012 在其错误列表中显示的错误：

```
'Microsoft.Practices.EnterpriseLibrary.Logging.Fakes.StubLogWriter' does not implement inherited abstract member 'Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter.GetFilter(string)' [c:\users\administrator\documents\visual studio 2012\Projects\DeleteMe\DeleteMe\obj\Debug\Fakes\mpell\f.csproj]    c:\users\administrator\documents\visual studio 2012\Projects\DeleteMe\DeleteMe\f.cs 68219   DeleteMe    26 
```

我想这是 VS2012 Update 1 的错误，但也许我缺少一些要检查的属性或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:35:56.353

在 Visual Studio 2012 Update 1 中，我们删除了几个导致 Fakes 静默跳过生成存根和填充程序的内部限制。LogWriter 恰好是 VS2012 RTM 默默跳过的类之一。不幸的是，Update 1 的改进暴露了 Fakes 的其他一些限制，在这种情况下，它无法区分 LogWriter 类的 GetFilter 方法的泛型和非泛型重载。

作为一种解决方法，请从 Fakes 配置中删除此类型。这是一个 .Fakes 文件，可以实现这一点。

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
  <Assembly Name="Microsoft.Practices.EnterpriseLibrary.Logging" Version="5.0.505.0"/>
  <StubGeneration>
    <Remove FullName="Microsoft.Practices.EnterpriseLibrary.Logging.LogWriter!"/>
  </StubGeneration>
</Fakes> 
```

作为一般做法，最好修改默认的 .Fakes 文件并仅指定项目中需要的存根和填充程序类型。这显着缩短了构建时间，并有助于避免不适用于您的测试需求的 Fakes 限制。

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/" Diagnostic="true">
  <Assembly Name="Microsoft.Practices.EnterpriseLibrary.Logging" Version="5.0.505.0"/>
  <StubGeneration>
    <Clear/>
    <Add FullName="Namespace.TypeName!"/>
  </StubGeneration>
  <ShimGeneration>
    <Clear/>
    <Add FullName="Namespace.TypeName!"/>
  </ShimGeneration>
</Fakes> 
```

# perl - 针对一组值测试变量

> ID：13719620
> 
> 赞同：0
> 
> 时间：2012-12-05T09:09:58.363
> 
> 标签：perl

在 perl 中，针对多个值测试变量的最佳方法是什么？

像这样的东西（在伪代码中）：

```
if x is in {'q','w','e','r','t'}
  # do something 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:27:05.863

这就是[“新”](http://p3rl.org/perl5100delta) [智能匹配运算符](http://p3rl.org/perlop#Smartmatch-Operator)可用于：

```
#!/usr/bin/env perl

use strict;
use warnings;
use 5.10.0;

my $thing   = 'bar';
my @set     = qw(foo bar baz);

say 'ok!' if $thing ~~ @set; 
```

输出：

```
ok! 
```

**注意**：这在 perl 的古老版本中不可用。在 5.10 之前，您想在[另一个答案](https://stackoverflow.com/a/13719709/1184510)[`grep`](http://p3rl.org/grep)中使用as ，或者，如果您的集合非常大，[则使用 List::Util](http://p3rl.org/List::Util)，因为它不会在第一次匹配后遍历整个列表。[`first`](http://p3rl.org/List::Util)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:15:47.190

怎么样：

```
if (grep /^x$/, ('q', 'w','e','r','t')) {
  # Do something
} 
```

如果您要比较的值是标量（字符串或数字），则此方法有效。

对于字符串，有一个很好的速记：

```
if (grep /^x$/, qw(q w e r t y)) {
  # Do something
} 
```

如果您不喜欢正则表达式 ( `/^x$/`)，则有：

grep {$_ eq 'x'} qw(qwerty)

你可以`$_`用来测试任何东西，而不仅仅是平等。

如果您想做的事情很简单（可以用一行来表示），那么就可以了：

```
do_something if grep /^x$/, qw(q w e r t y) 
```

# php - 在单个保存按钮上插入具有不同 ID 的不同数据

> ID：13719626
> 
> 赞同：0
> 
> 时间：2012-12-05T09:10:12.000
> 
> 标签：php, mysql

我确实有三个字段，它们是数字类型的文本输入。这三个数据以不同的 id 保存但在同一个保存按钮上。即我将数据插入所有字段，然后单击保存按钮，但我的第一个数据由不同的 id 保存，其余两个数据相同。例如，如果我在第一个输入中输入 1，在第二个输入中输入 2，在下一个输入中输入 3，因为这些是数字类型。但是 1 是由say by 保存的id:11,2 被 id:12,3say 保存，被 id:13 保存。我的观点如下：

```
<form class="form">
        <div class="control-group">
            <label class="control-label">High Priority</label>
            <div class="controls">
            <input type="number"name="sval"id="sval"/>Days
            </div>
        </div>
        <div class="control-group">
            <label class="control-label ">Low Priority</label>
            <div class="controls">
            <input type="number"name="sval" id="sval"/>Days</div>
        </div>
         <div class="control-group">
            <label class="control-label ">Normal</label>
            <div class="controls">
            <input type="number" name="sval" id="sval"/>Days </div>
        </div>
        <button id="btn" class="btn btn-primary insert">Save</button>
</form> 
```

查询是：

```
var sqld:String;
 sqld = "Delete from app_settings where kunnr = '"+kunnr+"' and ( skey = 'hp_days' or skey = 'np_days' or skey = 'lp_days' )";
 wcisql.query(sqld,'clearRDays');
}
public function saveRDays():void{
 var sqlu:String;
 sqlu = "Insert into app_settings(kunnr,skey,sval) Values ('"+kunnr+"','hp_days','"+hp_days.value+"')";
 wcisql.query(sqlu,'saveRDays');
 sqlu = "Insert into app_settings(kunnr,skey,sval) Values ('"+kunnr+"','np_days','"+np_days.value+"')";
 wcisql.query(sqlu,'saveRDays');
 sqlu = "Insert into app_settings(kunnr,skey,sval) Values ('"+kunnr+"','lp_days','"+lp_days.value+"')";
 wcisql.query(sqlu,'saveRDays');
 $sql = "Select * from app_settings where kunnr = '$kunnr'";
   } 
```

我也在添加图像，以便您可以更好地了解： ![在此处输入图像描述](../Images/73002fd45c8c5d23c15a8efddf23f02a.png) 如何做到这一点请建议..

在我看来： ![在此处输入图像描述](../Images/2a26f86c0c5bb0b23867428bb20e547e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:55:43.053

使用多重插入语句

检查这个引用的链接：

[多个 INSERT 语句与具有多个 VALUES](https://stackoverflow.com/questions/8635818/multiple-insert-statements-vs-single-insert-with-multiple-values) 和 [http://www.techonthenet.com/sql/insert.php的单个 INSERT](http://www.techonthenet.com/sql/insert.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:35:53.927

问题是每个 HTML 元素只能使用一个 ID。所以有两种方法可以实现，一种是动态的，一种是静态的。

静态解决方案：

```
 <div class="control-group">
        <label class="control-label">High Priority</label>
        <div class="controls">
        <input type="number"name="sval1"id="sval1"/>Days
        </div>
    </div>
    <div class="control-group">
        <label class="control-label ">Low Priority</label>
        <div class="controls">
        <input type="number"name="sval2" id="sval2"/>Days</div>
    </div>
     <div class="control-group">
        <label class="control-label ">Normal</label>
        <div class="controls">
        <input type="number" name="sval3" id="sval3"/>Days </div>
    </div>
    <button id="btn" class="btn btn-primary insert">Save</button> 
```

动态解决方案

```
 <div class="control-group">
        <label class="control-label">High Priority</label>
        <div class="controls">
        <input type="number" name="sval[]"/>Days
        </div>
    </div>
    <div class="control-group">
        <label class="control-label ">Low Priority</label>
        <div class="controls">
        <input type="number" name="sval[]"/>Days</div>
    </div>
     <div class="control-group">
        <label class="control-label ">Normal</label>
        <div class="controls">
        <input type="number" name="sval[]"/>Days </div>
    </div>
    <button id="btn" class="btn btn-primary insert">Save</button> 
```

现在，当您发布表单时，项目将进入数组，因此您有一个数组 $_GET['sval'] 或 $_POST['sval'] 包含数组（1,2,3）

# c# - 当长度以千兆字节为单位时，FileStream.SetLength(long length) 太慢

> ID：13719628
> 
> 赞同：1
> 
> 时间：2012-12-05T09:10:15.883
> 
> 标签：c#, performance, file-io

我需要编写一个小工具来消耗磁盘的可用空间（只留下几个 Kilo 字节）来测试一些“低磁盘空间”用例。编码：

```
new FileStream(filename).SetLength(remaining free bytes - 1024); //leaving 1KB's free space 
```

但是`FileStream.SetLength(long length)`如果长度以千兆字节为单位就太慢了，就像将大高清电影复制到磁盘一样慢。（**编辑：对不起，我只是意识到我只有在写入可移动闪存时才会遇到这种情况，如果写入其他本地驱动器，速度就足够快了。**）

所以我想知道，有没有更快的方法来写空白文件（即用零填充）？也欢迎使用 C/C++ 编写代码。还是有其他技巧可以测试“低磁盘空间”情况而无需编写空白文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:20:49.350

[您可以通过 Windows API 调用SetFileValidData](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365544%28v=vs.85%29.aspx)创建大文件而无需写入它们。

但是，请注意，它不会用零填充文件（这就是它更快的原因）。此外，请仔细阅读该功能的文档，因为存在安全隐患。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:30:01.467

在谷歌搜索后，我被引导到这个 SO 问题： [在 Windows 上创建大文件](https://stackoverflow.com/questions/455297/creating-big-file-on-windows)

这回答了我的问题。

# javascript - D3 线被渲染为多边形

> ID：13719629
> 
> 赞同：3
> 
> 时间：2012-12-05T09:10:17.097
> 
> 标签：javascript, d3.js, data-visualization

我正在尝试使用 D3 来渲染线条，但是当我尝试这样做时，线条会被渲染为多边形。我不确定为什么。我附上了一个屏幕截图，向您展示它的外观。这是代码：

```
 // Creates a time scale using the x_extent
  // defined above
  var x_scale = d3.time.scale()
    .range([margin, width - margin])
    .domain(x_extent);

  // Creates a similarity scale using the y_extent.
  // defined above.
  var y_scale = d3.scale.linear()
    .range([height - margin, margin])
    .domain(y_extent);

  // Construct a line.
  var line = d3.svg.line()
    .x(function(d) {
      return x_scale(d.date);
    })
    .y(function(d) {
      return y_scale(d.similarity);
    });

  // Render a line.
  d3.select("svg")
    .append("path")
    .attr("d", line(data)); 
```

![在此处输入图像描述](../Images/3a849ba34ef85ecfb74f692080a6e1fa.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T09:16:26.583

在附加路径时尝试设置`fill`和`stroke`明确，即

```
d3.select("svg")
  .append("path")
  .attr("fill", "none")
  .attr("stroke", "black")
  .attr("d", line(data)); 
```

# .net - 将 TLB 转换为 IDL

> ID：13719631
> 
> 赞同：4
> 
> 时间：2012-12-05T09:10:20.050
> 
> 标签：.net, com, interop, idl, oleview

有谁知道从类型库（.tlb）生成 idl 文件的命令行工具？这样做的原因是为了摆脱 regasm 生成的枚举值中的下划线。此博客中讨论了枚举中的下划线问题

[http://blogs.artinsoft.net/mrojas/archive/2010/05/17/interop-remove-prefix-from-c-enums-for-com.aspx](http://blogs.artinsoft.net/mrojas/archive/2010/05/17/interop-remove-prefix-from-c-enums-for-com.aspx)

我知道 OLEView 可以生成 IDL 文件，但我正在寻找一种适合自动构建的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:19:47.197

我怀疑这是一个完全可以满足您需求的工具。但是，滚动您自己的转换器应该不会太难。使用类型库有点麻烦。我编写了一个工具，它可以从 .idl 文件或 .tlb 文件为 COM 接口生成 C++ 包装类。读取接口相关信息的代码大约有250行代码，所以如果你添加一些代码来生成一个.idl文件你应该会得到大约1000行代码。

以下代码是我的 C++ 代码的精简版，它应该可以为您提供总体思路。但是，由于我目前无法访问编译器，因此我无法检查它是编译（不太可能）还是工作（肯定不是）。

```
 #include <afxwin.h>
    #include <comdef.h>
    #include <atlconv.h>
    #include <atlbase.h>

    char* paTypeNames[] =
    {
        "VT_EMPTY",          // = 0,
        "VT_NULL",           // = 1,
        "short", //"VT_I2", //             = 2,
        "long", //"VT_I4", //             = 3,
        "real", // "VT_R4", //             = 4,
        "double", // "VT_R8", //             = 5,
        "VT_CY", //              = 6,
        "VT_DATE", //            = 7,
        "BSTR", //"VT_BSTR", //            = 8,
        "IDispatch*", // "VT_DISPATCH", //        = 9,
        "VT_ERROR", //           = 10,
        "VARIANT_BOOL", //"VT_BOOL", //            = 11,
        "VARIANT", //"VT_VARIANT", //         = 12,
        "IUnknown*", // VT_UNKNOWN        = 13,
        "VT_DECIMAL", //         = 14,
        "VBA reserves 15 for future use",
        "VT_I1", //              = 16,
        "VT_UI1", //             = 17,
        "VT_UI2", //             = 18,
        "VT_UI4", //             = 19,
        "VT_I8", //              = 20,
        "VT_UI8", //             = 21,
        "int", //"VT_INT", //             = 22,
        "UINT", //            = 23,
        "VOID", //            = 24,
        "HRESULT", //         = 25,
        "VT_PTR", //             = 26,
        "VT_SAFEARRAY", //       = 27,
        "VT_CARRAY", //          = 28,
        "VT_USERDEFINED", //     = 29,
        "VT_LPSTR", //           = 30,
        "VT_LPWSTR", //          = 31,
        "VBA reserves 32 for future use",
        "VBA reserves 33 for future use",
        "VBA reserves 34 for future use",
        "VBA reserves 35 for future use",
        "VT_RECORD", //          = 36,
        "VT_INT_PTR", //         = 37,
        "VT_UINT_PTR", //        = 38,
        "Unknown Type number above 39"
    };

    CString GetType (const TYPEDESC& p_TYPEDESC, ITypeInfo* p_pTypeInfo)
    {
        // Look up user defined types in the type library.
        if (p_TYPEDESC.vt == VT_USERDEFINED)
        {
            ITypeInfoPtr spInnerType;
            VERIFY (SUCCEEDED (p_pTypeInfo->GetRefTypeInfo (p_TYPEDESC.hreftype, &spInnerType)));
            BSTR CurrTypeName;
            VERIFY (SUCCEEDED (spInnerType->GetDocumentation (MEMBERID_NIL, &CurrTypeName, NULL, NULL, NULL)));
            return CString (CurrTypeName);
        }
        else if (p_TYPEDESC.vt == VT_PTR)
            return GetType (*p_TYPEDESC.lptdesc, p_pTypeInfo) + CString (_T("*"));
        else
        {
            return CString (paTypeNames[min (p_TYPEDESC.vt & VT_TYPEMASK, 39)]);
        }
    }

    bool ParseTypeLib (char* p_strTypeLibName)
    {
        USES_CONVERSION;

        // Load the type library.
        ITypeLibPtr spTypeLib;
        HRESULT hr = LoadTypeLibEx (A2OLE (p_strTypeLibName), REGKIND_DEFAULT, &spTypeLib);
        if (!(bool)spTypeLib)
            return false;

        UINT uiNumberOfTypes = spTypeLib->GetTypeInfoCount ();
        for (int i = 0; i < uiNumberOfTypes; i++)
        {
            ITypeInfoPtr spCurrTypeInfo;
            spTypeLib->GetTypeInfo (i, &spCurrTypeInfo);
            if (!(bool) spCurrTypeInfo)
                return false;

            // We only want to process interface definitions, so if we encounter anything
            // else (for example enums), we skip the rest of the loop.
            TYPEATTR* pCurrentTypeAttr;
            VERIFY (SUCCEEDED (spCurrTypeInfo->GetTypeAttr (&pCurrentTypeAttr)));
            if (pCurrentTypeAttr->typekind != TKIND_DISPATCH &&
                pCurrentTypeAttr->typekind != TKIND_INTERFACE)
                continue;

            // Retrieve the current interface name.
            CComBSTR CurrInterfaceName;
            hr = spTypeLib->GetDocumentation (i, &CurrInterfaceName, NULL, NULL, NULL);

            std::cout << "interface " << CurrInterfaceName;

            // Retrieve the name of the base class. According to MSDN
            // (http://msdn.microsoft.com/en-us/library/aa909031.aspx), we must first retrieve
            // the TKIND_INTERFACE type description for our class, and then we can retrieve
            // the base class information. We also need the TKIND_INTERFACE type description
            // because TKIND_DISPATCH type descriptions contain both the methods of the current
            // interface as well as the methods of all base interfaces.
            ITypeInfoPtr spBaseType;
            if (pCurrentTypeAttr->typekind == TKIND_DISPATCH)
            {
                HREFTYPE TempHREF;
                VERIFY (SUCCEEDED (spCurrTypeInfo->GetRefTypeOfImplType (-1, &TempHREF)));
                ITypeInfoPtr spTempInfo;
                VERIFY (SUCCEEDED (spCurrTypeInfo->GetRefTypeInfo (TempHREF, &spTempInfo)));
                spCurrTypeInfo = spTempInfo;
            }
            HREFTYPE BaseClassHREF;
            VERIFY (SUCCEEDED (spCurrTypeInfo->GetRefTypeOfImplType (0, &BaseClassHREF)));
            VERIFY (SUCCEEDED (spCurrTypeInfo->GetRefTypeInfo (BaseClassHREF, &spBaseType)));
            CComBSTR CurrBaseTypeName;
            VERIFY (SUCCEEDED (spBaseType->GetDocumentation (MEMBERID_NIL, &CurrBaseTypeName, NULL, NULL, NULL)));

            std::cout << " : " << CurrBaseTypeName << "{\n";

            // Process the methods of the current interface.
            FUNCDESC* pCurrFUNCDESC;
            int j = 0;
            while (SUCCEEDED (spCurrTypeInfo->GetFuncDesc (j++, &pCurrFUNCDESC)))
            {
                // Retrieve the return type of the COM method (this does not necessarily have to be
                // an HRESULT).
                std::cout << paTypeNames[pCurrFUNCDESC->elemdescFunc.tdesc.vt] << " ";

                // Ask for the function descriptor for the current function.
                unsigned int cNames;
                BSTR* CurrNames = DEBUG_NEW BSTR[pCurrFUNCDESC->cParams + 1];
                hr = spCurrTypeInfo->GetNames (pCurrFUNCDESC->memid, CurrNames, pCurrFUNCDESC->cParams + 1, &cNames);

                // The first element contains the name of the function.
                std::cout << CurrNames[0] << " (";

                // Process the parameters of the current function.
                for (int k = 0; k < pCurrFUNCDESC->cParams; k++)
                {
                    std::cout << "[";

                    // Determine the type of the parameter (in, out, retval).
                    bool needComma = false;
                    if (pCurrFUNCDESC->lprgelemdescParam[k].paramdesc.wParamFlags & PARAMFLAG_FIN)
                    {
                        std::cout << "in";
                        needComma = true;
                    }
                    if (pCurrFUNCDESC->lprgelemdescParam[k].paramdesc.wParamFlags & PARAMFLAG_FOUT)
                    {
                        if (needComma)
                            std::cout << ", ";
                        std::cout << "out";
                        needComma = true;
                    }
                    if (pCurrFUNCDESC->lprgelemdescParam[k].paramdesc.wParamFlags & PARAMFLAG_FRETVAL)
                    {
                        if (needComma)
                            std::cout << ", ";
                        std::cout << "retval";
                    }

                    std::cout << "] ";
                    std::cout << GetType (pCurrFUNCDESC->lprgelemdescParam[k].tdesc, spCurrTypeInfo);

                    // If we didn't get a name for the parameter, it must be the parameter of a property put
                    // method. In this case we call the parameter simply "RHS"
                    if (k + 1 >= cNames)
                        std::cout << "RHS";
                    else
                        std::cout << CurrNames[k + 1];
                }
                delete[] CurrNames;
            }
        }

        // If we have reached this line, all of the above operations must have succeeded.
        return true;
    } 
```

问候，斯图尔特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T00:50:02.297

如果这是在源代码控制中存储（第 3 方？）TLB 文件而不是 IDL 文件的副作用，则一种可能性可能是检查 IDL 并从中自动生成 TLB 作为构建过程的一部分。

使用 IDL 而不是 TLB 的另一个好处是可以使用 diff 工具轻松比较 COM 接口的版本更改。

# scala - 单例对象的Scala序列化/反序列化

> ID：13719638
> 
> 赞同：1
> 
> 时间：2012-12-05T09:10:48.707
> 
> 标签：scala, serialization, singleton, deserialization

我对 scala 编程语言很陌生，我目前需要做以下事情。我有一个 signleton 对象，如下所示：

```
object MyObject extends Serializable {
    val map: HashMap[String, Int] = null
    val x: int = -1;
    val foo: String = ""
} 
```

现在我想避免必须分别序列化这个对象的每个字段，因此我正在考虑将整个对象写入一个文件，然后，在程序的下一次执行中，读取文件并从那里初始化单例对象。有没有办法做到这一点？

基本上我想要的是当序列化文件不存在时，将这些变量初始化为新结构，而当它存在时，从文件中的字段初始化字段。但我想避免手动序列化/反序列化每个字段......

更新：

我必须使用此处介绍的自定义反序列化器：[https](https://issues.scala-lang.org/browse/SI-2403) ://issues.scala-lang.org/browse/SI-2403 ，因为我在 HashMap 中作为值使用的自定义类存在问题。

更新2：

这是我用来序列化的代码：

```
val store = new ObjectOutputStream(new FileOutputStream(new File("foo"))) 
store.writeObject(MyData) 
store.close 
```

以及反序列化的代码（在不同的文件中）：

```
@transient private lazy val loadedData: MyTrait = {
    if(new File("foo").exists()) {
        val in = new ObjectInputStream(new FileInputStream("foo")) {
            override def resolveClass(desc: java.io.ObjectStreamClass): Class[_] = {
                try { Class.forName(desc.getName, false, getClass.getClassLoader) }
                catch { case ex: ClassNotFoundException => super.resolveClass(desc) }
            }
        }
        val obj = in.readObject().asInstanceOf[MyTrait] 
        in.close
        obj
    }
    else null
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:11:17.693

无需序列化仅具有不可变字段的对象（因为编译器会为您完成...）我将假设该对象提供默认值。这是一种方法：

首先编写一个包含所有必填字段的特征：

```
trait MyTrait {
  def map: HashMap[String, Int]
  def x: Int
  def foo: String
} 
```

然后用默认值编写一个对象：

```
object MyDefaults extends MyTrait {
  val map = Map()
  val x = -1
  val foo = 
} 
```

最后编写一个实现反序列化数据（如果存在）：

```
object MyData extends MyTrait {

  private lazy val loadedData: Option[MyTrait] = {
     if( /* filename exists */ ) Some( /*unserialize filename as MyTrait*/)
    else None
  }
  lazy val map = loadedData.getOrElse( MyDefault ).map
  lazy val x = loadedData.getOrElse( MyDefault ).x
  lazy val foo = loadedData.getOrElse( MyDefault ).foo

} 
```

# nuget - NuGet“无法为我的项目生成绑定重定向”，并出现错误“对象引用未设置为对象的实例”。

> ID：13719641
> 
> 赞同：8
> 
> 时间：2012-12-05T09:10:50.457
> 
> 标签：nuget, nuget-package

在 SquishIt 和 DotNetOpenAuth 等几个不同的软件包上，我收到一条错误消息：

> 无法为“MyProject”生成绑定重定向。你调用的对象是空的。

我看过很多关于其他人在“绑定重定向”方面遇到问题的帖子，但没有找到对该问题的单个引用以及“对象引用未设置为对象的实例。”。

NuGet 在这个阶段到底想做什么？它是否尝试更新 Web.Config 中的绑定重定向？我的 Web.Config 有问题吗？我该如何调试呢？

我会说这不会发生在“干净”的项目中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T03:18:33.357

我在一个项目中处理 MVC 版本时遇到了同样的问题。我认为任何尝试将绑定重定向添加到配置文件的 NuGet 包都可能发生这种情况。

我最终将“Web.config”重命名为“Web.Temp.Config”，然后安装了包。

然后我手动将包放入我的配置文件的更改合并到临时文件中，然后将其删除并将我的原始文件重命名为 web.config。

这为我解决了这个问题 - 希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-09T10:58:47.110

就我而言，更新 NuGet 包管理器可以解决问题。

# solr - 在 solr 3.6.1 中的 500 null 错误之前提交

> ID：13719645
> 
> 赞同：4
> 
> 时间：2012-12-05T09:11:29.653
> 
> 标签：solr, jetty

在 solr 3.6.1 中，当对 solr 服务器执行并发请求（并发负载测试）时，有时会出现以下错误。

```
org.apache.solr.common.SolrException log
SEVERE: org.mortbay.jetty.EofException
Caused by: java.net.SocketException: Broken pipe 
```

和

> 在 500 之前提交 null||org.mortbay.jetty.EofException|?at org.mortbay.jetty.HttpGenerator.flush(HttpGenerator.java:791)|?at org.mortbay.jetty.AbstractGenerator$Output.flush(AbstractGenerator.java :569)|?at org.mortbay.jetty.HttpConnection$Output.flush(HttpConnection.java:1012)|?at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:278)|?at sun.nio。 cs.StreamEncoder.flush(StreamEncoder.java:122)|?at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:212)|?at org.apache.solr.common.util.FastWriter.flush(FastWriter.java: 115)|?at org.apache.solr.servlet.SolrDispatchFilter.writeResponse(SolrDispatchFilter.java:353)|?at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:273)|?at org.mortbay .jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)|?at org.mortbay.jetty.servlet。ServletHandler.handle(ServletHandler.java:399)|?at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)|?at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java: 182)|?at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)|?at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)|?at org.mortbay .jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)|?at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)|?at org.mortbay.jetty.handler.HandlerWrapper.handle (HandlerWrapper.java:152)|?at org.mortbay.jetty.Server.handle(Server.java:326)|?at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)|?at org. mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:第928章|？在org.mortbay.jetty.HttpParser.parseNext（HttpParser.java：549）|？在org.mortbay.jetty.HttpParser.parseAvailable（HttpParser.java：212）|？ .handle(HttpConnection.java:404)|?at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)|?at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java :582)|原因：java.net.SocketException: Broken pipe|?at java.net.SocketOutputStream.socketWrite0(Native Method)|?at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)|?at java .net.SocketOutputStream.write(SocketOutputStream.java:136)|?at org.mortbay.io.ByteArrayBuffer.writeTo(ByteArrayBuffer.java:368)|?at org.mortbay.io.bio.StreamEndPoint.flush(StreamEndPoint.java :129)|?at org.mortbay.io.bio.StreamEndPoint.flush(StreamEndPoint.java:161)|?at org.mortbay.jetty.HttpGenerator.flush(HttpGenerator.java:714)|?... 25 更多

请提出任何解决 solr 错误的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:25:32.630

我不认为这是您的解决方案，由于客户端的超时问题，发生了损坏的管道（至少发生在我身上）。

检查您的 curl 超时值并尝试显式设置保持活动状态的 Tomcat，这样您就可以再次避免这种情况。

快速更新（仅供参考，配置可能会有所不同）

在您的 jetty 文件夹中，您应该查找一个名为 WEB-INF 的文件夹，该文件夹应包含一个名为 jetty-web.xml（或 web-jetty.xml）的文件

添加这些行：

```
<session-config>
    <session-timeout>720</session-timeout>
</session-config> 
```

应该对你有帮助（把720改成你更喜欢的）

还有选择

```
<Set name="maxIdleTime">300000</Set> 
```

这可能会奏效。您必须深入研究jetty的文档才能为您的情况弄清楚这一点

更多关于这个：[这里](http://docs.codehaus.org/display/JETTY/jetty-web.xml)和[这里](http://docs.codehaus.org/display/JETTY/Walkthrough+jetty.xml)

# actionscript-3 - as3 touch - 分析长触摸手势

> ID：13719647
> 
> 赞同：0
> 
> 时间：2012-12-05T09:11:30.153
> 
> 标签：actionscript-3, air, touch

我正在制作一种乐器（移动设备），其中有一个矩形可以听用户触摸手势。我想分析手指运动的角度并播放一个简短的 mp3 文件作为响应。我正在研究并发现了一些选项可以在我收听 touch_end 事件并计算角度时使用，但是我想要完成的是收听一次长滑动（向上、向下、向侧面等）并相应地播放声音。

用例 - 用户触摸矩形的中心，向上、向右、向下滑动（不移开手指）：输出 - 播放 upSound.mp3 ，播放 rightSound.mp3 ，播放 downSound.mp3 。

把它放在一起（应该是快速的手势）：

向上滑动：播放 upSound.mp3 ，

向右：播放 rightSound.mp3

向下（不移开手指）：播放 downSound.mp3

用户通过移除手指来结束手势。

我的问题 - 是否有任何图书馆或教程可以帮助我完成这项任务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:05:58.180

这可以帮助您[找到手势角度](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/TransformGestureEvent.html#rotation)

# for-loop - 批处理脚本：Forloop 并输出每次迭代

> ID：13719651
> 
> 赞同：0
> 
> 时间：2012-12-05T09:11:48.063
> 
> 标签：for-loop, batch-file, cmd

我想做的是对同一个目标运行 10 次 tracert 并提取结果。

通常的命令是我输入

```
tracert www.google.se > output.txt 
```

但是当我尝试下面的脚本时，我只是找不到目标...

```
@echo off
for /l %%x in (1, 1, 10) do (
    echo %%x
     tracert.exe %1% > trc_%1%_%%x.txt 
) 
```

有这方面专业知识的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:14:53.720

解决了！

```
@echo off

for /l %%x in (1, 1, 10) do (
    echo trc_%1_%%x.txt
    echo %1
    tracert.exe %1 > trc_%1_%%x.txt

) 
```

# java - 在mysql中配置utf8

> ID：13719654
> 
> 赞同：0
> 
> 时间：2012-12-05T09:12:01.080
> 
> 标签：java, mysql, utf-8

我确实将数据从一个数据库复制到另一个数据库。第一个 DB 有 cp1251 代码页。

第一步

我确实使用简单的 java 程序将数据从第一个 db 复制到简单的 csv 文件。在从数据库中提取数据期间，控制台输出是可读的。

csv文件utf-8的代码页（我在几个文本编辑器中检查了它，所有数据都是可读的，文本编辑器将文件的字符集定义为utf-8）

java 机器默认字符集是 utf-8 csv 文件在 utf8 字符集中新的 mysql db 在 utf8 文件中

这在 mysql cmd 中的命令状态

```
Server characterset:    utf8
Db     characterset:    utf8
Client characterset:    cp866
Conn.  characterset:    cp866
TCP port:               3306
Uptime:                 25 min 29 sec 
```

mysql db 中的所有表和字符集都在 utf-8 中

我使用另一个简单的java程序将数据插入mysql

mysql中的数据不可读

mysql服务器的配置

```
[server]

## UTF 8 Settings
#init-connect=\'SET NAMES utf8\'
collation_server=utf8_unicode_ci
character_set_server=utf8
#skip-character-set-client-handshake
character_sets-dir="C:/Programm/xampp/mysql/share/charsets"

[client]
default-character-set=utf8 
```

在服务器端发现 jvm 使用 utf16 而不是 utf8，这可能是 jdbc 中的preparedstatement 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:26:00.667

用于 JDBC 通信的 java 连接字符串：

```
jdbc:mysql://localhost/MYDB?useUnicode=true&characterEncoding=UTF-8 
```

设置中存在重叠/冗余/过多（服务器 + 客户端 + JDBC 通信），但这应该适用于 JDBC 部分。

如果问题仍然存在，请重试默认设置，并在 CREATE DATABASE/TABLE/列上指定 UTF-8。

# jquery - 放置在区域上时交换jquery中的元素？

> ID：13719657
> 
> 赞同：3
> 
> 时间：2012-12-05T09:12:06.517
> 
> 标签：jquery, jquery-ui

我有一个 IMG 标记，当放置在某个区域上时，该标记需要替换为文本框之类的输入元素。我能够克隆、拖放，通过添加我能够添加一个输入框，但我克隆的图像也将出现在那里。如何隐藏/删除图像？

这是我的代码：

```
$(document).ready(function() {
    $( "#txtInpt" ).draggable({  
    appendTo: "body",  
            helper: "clone"
    });     
$( "#phone" ).droppable({
    drop: function(event, ui) {
      $( this ).find( ".placeholder" ).remove();
              ui.draggable.clone().add('<input type="text">').appendTo(this);
           }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:07:19.090

看看这个[jqfaq.com](http://jqfaq.com/how-to-drag-and-drop-replace-the-position/)链接，其中讨论了相同的问题并通过示例解决了。显然，更多带有答案的常见问题解答有助于了解更多信息。

# c - 获取指针错误引用的 strcpy 和 strcat 的实现

> ID：13719663
> 
> 赞同：3
> 
> 时间：2012-12-05T09:12:16.773
> 
> 标签：c, string, strcpy, strcat

> **可能重复：**
> [对此 c 函数 copyString,concatString 的任何更好的建议](https://stackoverflow.com/questions/13431425/any-better-suggestions-for-this-c-functions-copystring-concatstring)

这是一个工作面试的问题，我需要使用特定的签名来实现它这是我需要工作的代码：

```
int main(int argc, char *argv[])
{

    char *str = NULL;
    new_strcpy(&str , "string one");
    new_strcpy(&str , str +7);
    new_strcat(&str , " two");
    new_printf(&str , "%str !", s);
    puts(str ); 
    new_free(&str);
    return 0;
} 
```

这是我对 new_strcpy 的实现：

```
char* new_strcpy(char **dst,const char *source)
{

  char *ans=*dst;

  while(**dst++=*source++);

  return ans;

} 
```

但是这个解决方案崩溃了，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:15:22.410

您的解决方案的问题是您无法为`*dst`.

考虑需要工作的前三行代码：

```
char *str = NULL;
new_strcpy(&str , "string one");
new_strcpy(&str , str +7);         // *** 
```

由此可见：

1.  `new_strcpy()`需要为结果分配内存。
2.  `str`重新分配时，`new_strcpy()`需要解除之前的分配`str`以避免内存泄漏。
3.  为了使`***`上面的行工作，释放必须在分配*之后*发生。

这是一个框架实现给你的想法。我根据`strcpy()`et al 实现了这些函数，但是如果不允许调用库函数，您可以编写自己的循环（您已经知道如何做到这一点）。

```
#include <stdlib.h>
#include <string.h>

void new_strcpy(char** dst, const char* src) {
    char* orig_dst = *dst;
    *dst = malloc(strlen(src) + 1);
    strcpy(*dst, src); /* replace with a loop if calling strcpy() is not permissible */
    free(orig_dst);
}

void new_strcat(char** dst, const char* src) {
    char* orig_dst = *dst;
    *dst = malloc(strlen(*dst) + strlen(src) + 1);
    strcpy(*dst, orig_dst); /* replace with a loop if calling strcpy() is not permissible */
    strcat(*dst, src);      /* ditto for strcat() */
    free(orig_dst);
}

void new_free(char** dst) {
    free(*dst);
    *dst = NULL;
}

int main(int argc, char *argv[])
{
    char *str = NULL;
    new_strcpy(&str , "string one");
    new_strcpy(&str , str +7);
    new_strcat(&str , " two");
/*    new_printf(&str , "%str !", s); */
    puts(str );
    new_free(&str);
    return 0;
} 
```

我将实施`new_printf()`作为练习留给读者。:-)

# java - java.net.ConnectException

> ID：13719666
> 
> 赞同：2
> 
> 时间：2012-12-05T09:12:50.440
> 
> 标签：java, mysql

我已经看到关于这个主题的几个线程，但我仍然无法弄清楚出了什么问题。以下是代码：

```
import java.sql.*;

public class SQL
{
    public static void main(String[] args) 
    {
        Connection conn = null;
        String url = "jdbc:mysql://mysql1.oyo.co.il:3306/";
        String dbName = "sdarot2_winner";
        String driver = "com.mysql.jdbc.Driver";
        String userName = ""; 
        String password = "";
        String table = "LEADER_CAM_PRODUCTS";

        try {
            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url+dbName,userName,password);
            System.out.println("Connected to the database");
            conn.close();
            System.out.println("Disconnected from database");

        }catch (Exception e) {
            System.out.println(e);
        }
  }
} 
```

这是我得到的错误：

> com.mysql.jdbc.CommunicationsException: 由于底层 > > 异常导致通信链接失败：
> 
> ** 开始嵌套异常 **
> 
> java.net.ConnectException MESSAGE：连接超时：连接
> 
> 堆栈跟踪：
> 
> java.net.ConnectException：连接超时：在 java.net.PlainSocketImpl.doConnect(Unknown Source) 在 java.net.PlainSocketImpl.connectToAddress(Unknown Source) 在 java.net.PlainSocketImpl.socketConnect(Native Method) 处连接。 net.PlainSocketImpl.connect(Unknown Source) at java.net.SocksSocketImpl.connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at java.net。 Socket.(Unknown Source) at java.net.Socket.(Unknown Source) at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256) at com.mysql.jdbc.MysqlIO.(MysqlIO.java:271)在 com.mysql.jdbc.Connection.createNewIO(Connection.java:2744) 在 com.mysql.jdbc.Connection.(Connection.java:1553) 在 com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285) 在 java.sql.DriverManager.getConnection(Unknown Source) 在 java.sql.DriverManager.getConnection(Unknown Source) 在 SQL.main(SQL.java:17)
> 
> ** 结束嵌套异常 **
> 
> 发送到服务器的最后一个数据包是 1 毫秒前。

这是我发现的几件事：

1.  IP/域或端口不正确
2.  IP/域或端口（即服务）已关闭
3.  IP/域的响应时间超过您的默认超时时间
4.  您有防火墙阻止您使用的任何端口上的请求或响应
5.  您有一个防火墙阻止对该特定主机的请求
6.  您的互联网访问已关闭

a) 它是正确的。b）它没有关闭，因为我有一个正在使用该数据库的网站。c) 我该如何检查？我认为这不是问题，因为正如我所说，我在这个数据库上有一个正在运行的网站。d）现在的方式是因为我上面提到的同样的原因。e) 与 d 相同

那么我做错了什么？为什么 php 代码可以与 sql 一起使用，但 java 给了我错误？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:52:14.493

作为实验，尝试`mysql1.oyo.co.il`使用系统的 telnet 命令连接到端口 3306。或其他一些打开原始 TCP/IP 连接的 实用程序（例如`nc`或）。*根据您的操作系统/发行版，您可能需要找到并安装合适的命令来帮助您进行故障排除。* 观察会发生什么。`netcat`

 ** * *

重新诊断：

> a) 它是正确的。

如果你这么说...

> b）它没有关闭，因为我有一个正在使用该数据库的网站。

充其量你已经证明主机正在工作。80 端口上的 Web 服务和 3306 端口上的 MySQL 服务是不同的服务。（事实上​​，它可能`mysql1.oyo.co.il`正在使用巧妙的数据包路由技巧，以便将不同端口上的流量透明地路由到不同的主机或虚拟主机。）

> c) 我该如何检查？

尝试更改/增加超时。

> 我认为这不是问题，因为正如我所说，我在这个数据库上有一个正在运行的网站。

我猜这不是超时问题......但正如我上面所说，你有一个网站的事实并没有说明 MySQL 服务是否正在运行。

> d）现在的方式是因为我上面提到的同样的原因。

您只证明了您可以访问端口 80 ...见上文

> e) 与 d 相同

您只证明了您可以访问端口 80 ...见上文

* * *

综上所述，合理的是：

*   您有本地防火墙问题，
*   该端口上的 MySQL 服务当前未运行，
*   服务端的网络路由因该端口上的流量而中断，
*   MySQL 服务已永久关闭，或
*   该服务的防火墙已配置为不接受来自随机（或特定）位置的网络连接，包括您的位置。

您看到的是超时而不是“连接被拒绝”这一事实表明，这更有可能是网络或防火墙问题，而不是 MySQL 服务端点本身的问题。

我的猜测是“他们”已经撤回了服务……而且你不应该再使用它了。（提供公共 MySQL 数据库服务让我觉得很奇怪……而且从安全和管理的角度来看也是有问题的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:33:53.343

“连接超时”表示：

*   故意忽略您的连接请求的服务器端防火墙
*   网络拓扑问题，导致 IP 数据包无法通过
*   服务器主机本身已关闭。

很可能是第一个。

请注意，与此处的其他答案相反，它*并不*表示服务器程序已关闭，或者客户端的本地防火墙问题。前者会导致“连接被拒绝”，而后者会给你一些类似于“权限被拒绝”的东西，具体取决于你的平台。*

# dom - 附加文本 WebEngine - JavaFX

> ID：13719669
> 
> 赞同：4
> 
> 时间：2012-12-05T09:13:16.510
> 
> 标签：dom, text, append, javafx, document-body

如何将文本附加到网络引擎？我试过这个：

```
public TabMessage(String title) {
    super(title);
    view = new WebView();
    engine = view.getEngine();
    engine.loadContent("<body></body>");
    view.setPrefHeight(240);
}

private void append(String msg){
    Document doc = engine.getDocument();
    Element el = doc.getElementById("body");
    String s = el.getTextContent();
    el.setTextContent(s+msg);
} 
```

但文件是`null`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:06:08.047

首先，如果 webengine 无法加载内容或您`engine.getDocument()`在内容完全完成加载之前调用，Document 返回 null。

其次，`doc.getElementById("body")`搜索 id 为“body”的 DOM 元素。但是，您加载的内容根本没有这样的 id 或任何 id。

为了更好地理解这些，这里有一个完整的可运行示例，请单击按钮：

```
package demo;

import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class Demo extends Application {

    private WebView view;
    private WebEngine engine;

    @Override
    public void start(Stage primaryStage) {

        view = new WebView();
        engine = view.getEngine();
        engine.loadContent("<body><div id='content'>Hello </div></body>");
        view.setPrefHeight(240);

        Button btn = new Button("Append the \"World!\"");
        btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                append(" \"World!\"");
            }
        });

        StackPane root = new StackPane();
        root.getChildren().addAll(view, btn);
        Scene scene = new Scene(root, 300, 250);

        primaryStage.setScene(scene);
        primaryStage.show();
    }

    private void append(String msg) {
        Document doc = engine.getDocument();
        Element el = doc.getElementById("content");
        String s = el.getTextContent();
        el.setTextContent(s + msg);
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

请注意，我在 th 正文中放置了一个 id=content 的 div，因此`doc.getElementById("content")`返回该 div。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:54:31.613

您还可以使用 JavaScript 进行追加。

```
final WebEngine appendEngine = view.getEngine();
btn.setOnAction(new EventHandler<ActionEvent>() {
 @Override public void handle(ActionEvent event) {
   appendEngine.executeScript(
     "document.getElementById('content').appendChild(document.createTextNode('World!'));"
   );
 }
}); 
```

有时我发现使用 jQuery 操作 DOM 比使用 Java Document 或原生 JavaScript DOM 接口更简单。

```
final WebEngine appendEngine = view.getEngine();
btn.setOnAction(new EventHandler<ActionEvent>() {
 @Override public void handle(ActionEvent event) {
   executejQuery(appendEngine, "$('#content').append('World!');");
 }
});

...

private static Object executejQuery(final WebEngine engine, String script) {
  return engine.executeScript(
    "(function(window, document, version, callback) { "
    + "var j, d;"
    + "var loaded = false;"
    + "if (!(j = window.jQuery) || version > j.fn.jquery || callback(j, loaded)) {"
    + " var script = document.createElement(\"script\");"
    + " script.type = \"text/javascript\";"
    + " script.src = \"http://code.jquery.com/jquery-1.7.2.min.js\";"
    + " script.onload = script.onreadystatechange = function() {"
    + " if (!loaded && (!(d = this.readyState) || d == \"loaded\" || d == \"complete\")) {"
    + " callback((j = window.jQuery).noConflict(1), loaded = true);"
    + " j(script).remove();"
    + " }"
    + " };"
    + " document.documentElement.childNodes[0].appendChild(script) "
    + "} "
    + "})(window, document, \"1.7.2\", function($, jquery_loaded) {" + script + "});"
  );
} 
```

无论您使用 Uluk 所使用的 Java Document API，还是 JavaScript 或 JQuery API，Uluk 出色答案中的所有其他观点仍然适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T07:12:26.560

虽然答案很老并且已经被接受，但我把我的发现放在这里。

诀窍是在控制器的 init 方法中调用 engine.loadContent，然后尝试将内容附加到示例 btn.setOnAction() 中提到的某些操作上。这样，当您触发操作时，页面已经加载。如果我将加载代码放入 setOnAction() 本身，我会得到文档为空。

# windows-phone - 在 windows phone 8 上创建构建

> ID：13719671
> 
> 赞同：2
> 
> 时间：2012-12-05T09:13:26.290
> 
> 标签：windows-phone, windows-phone-8

我想为我的 windows phone 8 应用程序构建（如 APK）以进行测试。我该怎么做。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:28:50.903

在 VS 2012 中运行 Windows Phone 8 应用程序时，会在应用程序的 Bin 文件夹中创建一个 XAP 文件。它类似于 Android 应用程序的 apk 文件。但是您不能直接将其安装在手机中。

您需要一个开发者帐户来开发者解锁设备以进行测试。您可以以任何方式在模拟器中测试应用程序。您还可以使用 Windows Phone 市场的 Beta 测试功能，但同样您还需要一个开发人员帐户。

更新：

您可以从[Windows Phone 开发者网站](http://dev.windowsphone.com/en-us/dashboard)获得一个开发者帐户，价格为 99 美元。

获得开发者帐户后，按照该工具中提到的步骤，从开始菜单中打开“Windows Phone 开发者注册”工具并解锁您的设备

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:48:03.337

您实际上可以将 XAP 文件部署到手机，只要它是开发人员解锁的。执行此操作的工具作为 SDK 的一部分提供。只需转到 Windows Phone 开发人员工具 -> 应用程序部署。然后您可以浏览并选择要安装的 XAP 文件。如上所述，您的 XAP 文件可能位于 bin 文件夹中，但也可能位于 Debug 文件夹中，具体取决于您的配置。在 Visual Studio 中，在调试图标（绿色箭头）的左侧，您将看到部署选项的下拉列表。您可以在此处选择是否要部署到手机或模拟器。您还可以选择是否要在调试或生产模式下部署。

# python - 使用psycopg2动态更改python中的数据库（postgresql）

> ID：13719674
> 
> 赞同：9
> 
> 时间：2012-12-05T09:13:35.453
> 
> 标签：python, postgresql, psycopg2

谁能告诉我如何动态更改我刚刚创建的数据库..使用以下代码...我认为在执行此代码期间，我将在默认的 postgres 数据库（即模板数据库）和新数据库之后创建我想在运行时更改我的数据库以进行进一步处理...

```
 from psycopg2 import connect
    from psycopg2.extensions import ISOLATION_LEVEL_AUTOCOMMIT

    dbname = 'db_name'
    con = connect(user ='postgres', host = 'localhost', password = '*****')
    con.set_isolation_level(ISOLATION_LEVEL_AUTOCOMMIT)
    cur = con.cursor()
    cur.execute('CREATE DATABASE ' + dbname)
    cur.close()
    con.close() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T12:06:03.623

您可以简单地再次使用`database=dbname`参数连接。`SELECT current_database()`注意用于显示我们在哪个数据库上工作以及`SELECT * FROM pg_database`显示可用数据库的用法：

```
from psycopg2 import connect
from psycopg2.extensions import ISOLATION_LEVEL_AUTOCOMMIT

def show_query(title, qry):
    print('%s' % (title))
    cur.execute(qry)
    for row in cur.fetchall():
        print(row)
    print('')

dbname = 'db_name'
print('connecting to default database ...')
con = connect(user ='postgres', host = 'localhost', password = '*****', port=5492)
con.set_isolation_level(ISOLATION_LEVEL_AUTOCOMMIT)
cur = con.cursor()
show_query('current database', 'SELECT current_database()')
cur.execute('CREATE DATABASE ' + dbname)
show_query('available databases', 'SELECT * FROM pg_database')
cur.close()
con.close()

print('connecting to %s ...' % (dbname))
con = connect(user ='postgres', database=dbname, host = 'localhost', password = '*****', port=5492)
cur = con.cursor()
show_query('current database', 'SELECT current_database()')
cur.close()
con.close() 
```

# git - Gradle：如何在任务中克隆 git repo？

> ID：13719676
> 
> 赞同：23
> 
> 时间：2012-12-05T09:13:38.600
> 
> 标签：git, gradle

假设我有一个 gradle 构建脚本，并且想要编写一个任务来克隆一个远程 git 存储库。我怎么做？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T10:12:58.193

可以使用[Gradle-git 插件](https://github.com/ajoberstar/gradle-git)来完成克隆。要使用该插件，您应该先下载它：

```
buildscript {
  repositories { mavenCentral() }
  dependencies { classpath 'org.ajoberstar:gradle-git:0.2.3' }
} 
```

然后写一个这样的任务：

```
import org.ajoberstar.gradle.git.tasks.*

task cloneGitRepo(type: GitClone) {
        def destination = file("destination_folder")
        uri = "your_git_repo_uri"
        destinationPath = destination
        bare = false
        enabled = !destination.exists() //to clone only once
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-13T00:19:44.997

使用较新版本的[gradle-git](https://github.com/ajoberstar/gradle-git)（0.7.0 及更高版本），您将创建如下任务：

```
import org.ajoberstar.grgit.*

task clone << {
  Grgit.clone(dir: file('build/repo'), uri: 'git@github.com:user/repo.git')
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-05T16:37:50.743

前面提到的 Gradle-git 插件似乎已经从提供简单的“将这个 repo 克隆到那个目录”功能转移了，所以我写了一个简单的任务来做到这一点：

[https://github.com/palominolabs/gradle-git-clone-task](https://github.com/palominolabs/gradle-git-clone-task)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-05T09:25:34.160

这里有一个 Git 插件 - 文档：[Gradle-git](https://github.com/ajoberstar/gradle-git#readme)。该插件有一个克隆方法：[GitClone](http://ajoberstar.org/gradle-git/docs/javadoc/)

大概是这样的：

```
GitClone clone = new GitClone();
clone.setUri("http://remote.repository/");
clone.setDestinationPath("//local/path");
clone.setBare(false);
clone.cloneRepo(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-05T09:20:19.700

[Gradle-git](https://github.com/ajoberstar/gradle-git/)插件有一个GitClone[任务](http://ajoberstar.org/gradle-git/docs/javadoc/index.html?org/ajoberstar/gradle/git/tasks/GitClone.html)应该会有所帮助。由于我不了解 Gradle，因此我无法帮助您了解如何使用它。

# jquery - 在 Symfony2 中使用 GenemuFormBundle

> ID：13719679
> 
> 赞同：2
> 
> 时间：2012-12-05T09:13:58.543
> 
> 标签：jquery, jquery-ui, symfony, jquery-select2

我正在尝试在我的 Symfony2 应用程序中使用 que GenemuFormBundle。我按照以下链接中的步骤操作：

[http://symfohub.com/repo/GenemuFormBundle/documentation](http://symfohub.com/repo/GenemuFormBundle/documentation)

之后，它似乎已正确安装。在该网站的底部，它说：

> 您使用了 GenemuFormBundle，但您发现它不起作用！也许你忘记了 form_javascript 或 form_stylesheet。
> 
> 原理是将javascript、样式表和html分开。这允许更好地集成网页。
> 
> 查看模板示例表单视图：
> 
> [https://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/template.md](https://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/template.md)

我将该代码复制到呈现我的表单的模板中。然后我下载了 jquery、jquery-ui 和 jquery-tokeninput，js 和 css 文件，因为看起来它们是实现 Select2 功能所需的文件，我将它们放入各自的文件夹中，并正确加载它们（在至少 Symfony2 没有抱怨找不到它们）。

我还将以下代码放入我的实体中，使用genemu_jqueryselect2_choice 而不是默认代码：

```
->add('listofitems', 'genemu_jqueryselect2_choice',
    array('choices' => array('item1' => 'item1',
                             'item2' => 'item2',
                             'item3' => 'item3'),
          'required'  => false )) 
```

表单加载并正常工作，但我没有得到这样的选择框。

但相反，我得到了老式的选择框。如果我使用genemu_jqueryautocompleter_entity 选项，自动完成功能也不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T15:43:59.707

在树枝模板中添加[以下内容也很重要：](https://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/template.md)

```
{% block stylesheets %}
    {{ form_stylesheet(form) }}
{% endblock %}

{% block javascripts %}
    {{ form_javascript(form) }}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:53:06.310

有过同样的问题。

通过这些步骤，它可以工作：

确保包括 select2 资产。或者将 select2.css 和 select2.js 放在您的 web 文件夹中。

```
<script src="{{ asset('js/select2.js') }}" type="text/javascript"></script> 
```

此外，您应该在表单树枝文件中添加您的 Select2 示例代码，例如：

```
<script>
$(document).ready(function() { 
    $("#el4").val(["AL","AZ"]).select2();
    $("#el4").click(function() { $("#el4").select2(); });
    $("#wait_tags_destroy").click(function() { $("#wait_").select2("destroy"); });
});

</script> 
```

至少更改部分 ID 名称中的 #el4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T08:06:37.000

最好安装[fanforfun/select2-bundle](https://github.com/fanforfun/select2-bundle)，然后在模板中使用 Assetic 功能：

```
{% block stylesheets %}

    {{ parent() }}

    {% stylesheets filter='cssrewrite' output='resources/css/*.css' 'bundles/fanforfunselect2/select2.css' %}
        <link href="{{ asset_url }}" rel="stylesheet" type="text/css" />
    {% endstylesheets %}

    {% if form is defined %}
        {{ form_stylesheet(form) }}
    {% endif %}

{% endblock %}

{% block javascripts %}

    {{ parent() }}

    {% javascripts output='resources/js/*.js' '@FanforfunSelect2Bundle/Resources/public/select2.js' %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

    {% if form is defined %}
        {{ form_javascript(form) }}
    {% endif %}

{% endblock %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:02:32.730

我发现只需加载 css 和 js 脚本，正如前面的答案所说，并将样式应用于所有选择框，它就可以工作：

```
<link href="{{ asset('select2/select2.css') }}" rel="stylesheet">
<script src="{{ asset('js/select2.js') }}"></script>
<script>
$(document).ready(function() {
    $("select").select2();
});
</script> 
```

# facebook - 使用 azure 单点登录

> ID：13719680
> 
> 赞同：0
> 
> 时间：2012-12-05T09:14:01.827
> 
> 标签：facebook, azure, acs

使用 Azure ACS 通过 facebook 登录需要开发人员应用。

应用程序的创建并将其添加到 acs 身份提供程序不是问题。应用程序 ID=390425354365693 应用程序秘密=7e9e9977160451dcadc9627abcf4f116

我的网站重定向到登录选项屏幕，登录屏幕重定向到[https://www.facebook.com/dialog/oauth?client_id=390425354365693&redirect_uri=https%3a%2f%2facsnils.accesscontrol.windows.net%2fv2%2ffacebook %3fcx%3dcHI9d3NmZWRlcmF0aW9uJnJtPWh0dHAlM2ElMmYlMmYxMjcuMC4wLjElM2E4MSUyZiZjeD1ybSUzZDAlMjZpZCUzZHBhc3NpdmUlMjZydSUzZCUyNTJmJmlwPUZhY2Vib29rLTM5MDQyNTM1NDM2NTY5Mw2&scope=email](https://www.facebook.com/dialog/oauth?client_id=390425354365693&redirect_uri=https%3a%2f%2facsnils.accesscontrol.windows.net%2fv2%2ffacebook%3fcx%3dcHI9d3NmZWRlcmF0aW9uJnJtPWh0dHAlM2ElMmYlMmYxMjcuMC4wLjElM2E4MSUyZiZjeD1ybSUzZDAlMjZpZCUzZHBhc3NpdmUlMjZydSUzZCUyNTJmJmlwPUZhY2Vib29rLTM5MDQyNTM1NDM2NTY5Mw2&scope=email) when opting for "sign in with facebook".

现在我的 Facebook 应用程序必须接受我的网站 127.0.0.1:81/ 和/或？单点登录页面[https://acsnils.accesscontrol.windows.net/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2f127.0.0.1%3a81%2f&wctx=rm%3d0%26id%3dpassive% 26ru%3d%252f&wct=2012-12-05T09%3a02%3a36Z](https://acsnils.accesscontrol.windows.net/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2f127.0.0.1%3a81%2f&wctx=rm%3d0%26id%3dpassive%26ru%3d%252f&wct=2012-12-05T09%3a02%3a36Z)

这意味着我必须添加这些站点，但我似乎不知道如何添加。我需要采取哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:58:37.453

如果您进入旧门户[https://windows.azure.com](https://windows.azure.com)

*   点击“服务总线、访问控制和缓存”
*   选择“访问控制”和您的 ACS 服务
*   单击顶部功能区上的“访问控制服务”按钮
*   在左侧，您可以看到“依赖方应用程序”

在那里，您可以添加新的用于开发、测试、生产等的具有不同 URL 的 URL：127.0.0.1:81/、localhost:6700、test.mydomain.com 等。

# javascript - Treepanel 节点行索引

> ID：13719681
> 
> 赞同：0
> 
> 时间：2012-12-05T09:14:06.787
> 
> 标签：javascript, extjs, extjs4

我有一个带有一组节点的树形面板。我正在使用自己的标准搜索节点。当找到节点时，我想选择包含节点的行上的单元格。

我可以使用选择单元格

`cellSelectionModel.setCurrentPosition({row: row, column: column});`

但我不明白如何获取节点的行索引。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:16:45.530

如果您有模型记录，来自商店：

```
var rowNumber = store.indexOf(record); 
```

# android - 在创建数据库时进行进度对话框

> ID：13719682
> 
> 赞同：0
> 
> 时间：2012-12-05T09:14:07.570
> 
> 标签：android, progressdialog

您能否帮我更改一段代码以在数据库创建期间显示 progresDialog 或一些信息。我试图用 Thread 做到这一点，但没有成功。当我将大部分代码放到线程中时，我得到错误，在创建数据库之前只设置了 db.createDataBase() "text"。

```
public void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  myCalendar = new MyCalendar();
  menu = (TextView) findViewById(R.id.poleMenu);
  text = (TextView) findViewById(R.id.glownePoleTekstowe);
  menu.setText(kalendarz.setCurrentDateOnView());
  value = menu.getText().toString();

  db = new DatabaseHandler(this);

  try {
    // separate class to load database
    // MOST IMPORTANT
    db.createDataBase();

  } catch (IOException ioe) {
    throw new Error("nie można utworzyć bazy danych");
  }

  dane = db.getDataFromDate(value);
  db.close();
  try {
    log = dane.getTekst();
  }catch(Exception e) {System.out.println(e);}
  text.setText(log);
} 
```

使用线程和处理程序更新：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  kalendarz = new Kalendarz();
  menu = (TextView) findViewById(R.id.poleMenu);
  text = (TextView) findViewById(R.id.glownePoleTekstowe);

  menu.setText(kalendarz.setCurrentDateOnView());
  value = menu.getText().toString();

  db = new DatabaseHandler(this);

  // thread
  ladujDane();

  dane = db.getDaneFromDate(value);
  db.close();
  try {
    log = dane.getTekst();
  }catch(Exception e) {System.out.println(e);}
  text.setText(log);
} 
```

//------------------------------------------------------

```
public void ladujDane() {

  mLoadDBHandler = new Handler()
  {
    @Override
    public void handleMessage(Message msg)
    {
      progressDialog.dismiss();
    }
  };

  progressDialog = ProgressDialog.show(
  this,
  "Ładowanie danych", "Proszę chwilkę poczekać", 
  true,
  false);

  Thread t = new Thread(new LoadDBThread());
  t.start();

} 
```

//----------------------------------------

```
private class LoadDBThread implements Runnable
{
  public void run()
  {

    try {

    db.createDataBase();

    } catch (IOException ioe) {
    throw new Error("nie można utworzyć bazy danych");
    }

    mLoadDBHandler.sendEmptyMessage(0);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:12:45.227

您的问题是您试图在主线程之外的另一个线程上执行 UI 操作。

您可以为此使用处理程序。首先声明一个处理程序：

```
 Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            // do UI stuff
        }
    }; 
```

然后从创建数据库的线程中调用：`handler.sendEmptyMessage(0);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:12:31.767

只需使用 AsyncTask，您就可以从它的 onProgress 安全地管理进度条。您不能从 UI 线程以外的线程更改 UI 元素，另一方面，您不能在 UI 线程中执行持久操作。AsyncTask 是您的答案。

# unit-testing - angularjs triggerHandler 未在单元测试中触发绑定事件

> ID：13719683
> 
> 赞同：1
> 
> 时间：2012-12-05T09:14:11.473
> 
> 标签：unit-testing, angularjs, angular-scenario

使用 angularJs 1.0.2 我创建了绑定到元素上的单击事件的简单指令。

我试图用 testacular 对其进行单元测试

```
var linked;
beforeEach(inject(function($rootScope, $compile) {
    scope = $rootScope.$new();
    var widget_definition = '<a href="path" my-directive="">click here</a>';
    linked = $compile(widget_definition);
}));

it('chceck logic on click', function() {
    var button = linked(scope);
    // this doesnt work so I give up :/
    button.triggerHandler('click');
}); 
```

但它告诉我按钮元素上没有定义这样的功能。但这已经是 jQ(lite) 对象，在其他测试中我可以使用为 jQlite 定义的方法。

这是角度的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:26:12.307

`triggerHandler`在**1.0.3中添加**

这是一个不会抛出异常的 JSFiddle [http://jsfiddle.net/jaimem/c5Tfw/1/](http://jsfiddle.net/jaimem/c5Tfw/1/)

顺便说一句，如果您正在处理 UI 更改，您可能需要进行 e2e 测试。

# sql - 从多个对象 ID 过滤

> ID：13719686
> 
> 赞同：0
> 
> 时间：2012-12-05T09:14:24.827
> 
> 标签：sql, performance, query-optimization, ezpublish

我正在尝试过滤 eZPublish 提取。

我有一个具有对象关系属性的类。我的过滤器允许获取由对象关系属性过滤的此类的对象。

我已经开始使用增强的对象关系过滤扩展（[http://projects.ez.no/index.php/enhanced_object_relation_filter](http://projects.ez.no/index.php/enhanced_object_relation_filter)），但这个只适用于“AND”条件，我想要“OR”。

我能够编辑文件以添加“或”逻辑，这就是我得到的：

```
<?php
class EORExtendedFilter
{

    function CreateSqlParts( $params )
    {
        $db =& eZDB::instance();

        $tables = array();
        $joins  = array();

        // foreach filtered attribute, we add a join the relation table and filter
        // on the attribute ID + object ID
        foreach( $params as $param )
        {
            if ( !is_array( $param ) )
                continue;

            if ( !is_numeric( $param[0] ) )
            {
                $classAttributeId = eZContentObjectTreeNode::classAttributeIDByIdentifier( $param[0] );
            }
            else
            {
                $classAttributeId = $param[0];
            }

            // multiple objects ids
            if ( is_array($param[1]) )
            {
                foreach( $param[1] as $objectId )
                {
                    $join = array(); // 'OR' logic

                    if ( is_numeric( $objectId ) )
                    {
                        $tableName = 'eor_link_' . $objectId;
                        $tables[] = 'ezcontentobject_link ' . $tableName;

                        $join[]  = $tableName . '.from_contentobject_id = ezcontentobject.id';
                        $join[]  = $tableName . '.from_contentobject_version = ezcontentobject.current_version';
                        $join[]  = $tableName . '.contentclassattribute_id = ' . $classAttributeId;
                        $join[]  = $tableName . '.to_contentobject_id = ' . $objectId;
                    }

                    // 'OR' logic
                    $joins[] = $join;

                }
            }
            // single object id
            else
            {
                $objectId = $param[1];

                $tableName = 'eor_link_' . $objectId;
                $tables[] = 'ezcontentobject_link ' . $tableName;

                $joins[]  = $tableName . '.from_contentobject_id = ezcontentobject.id';
                $joins[]  = $tableName . '.from_contentobject_version = ezcontentobject.current_version';
                $joins[]  = $tableName . '.contentclassattribute_id = ' . $classAttributeId;
                $joins[]  = $tableName . '.to_contentobject_id = ' . $objectId;
            }
        }

        if ( !count( $tables ) or !count( $joins ) )
        {
            $tables = $joins = '';
        }
        else
        {
            $tables = "\n, "    . implode( "\n, ", $tables );

            // 'OR' logic
            if ( is_array($param[1]) )
            {
                $andClauses = array();
                foreach ($joins as $attr)
                {
                    $andClauses[] = implode( " AND\n ", $attr );
                }

                $joins =  implode( " OR\n ", $andClauses ) . " AND\n ";               
            }
            else
            {
                $joins =  implode( " AND\n ", $joins ) . " AND\n ";
            }

        }

        return array( 'tables' => $tables, 'joins' => $joins );
    }
} 
```

这个扩展的属性过滤器产生这个字符串：

eor_link_126.from_contentobject_id = ezcontentobject.id AND eor_link_126.from_contentobject_version = ezcontentobject.current_version AND eor_link_126.contentclassattribute_id = 537和eor_link_126.to_contentobject_id = 126 OR（eor_link_127.from_contentobject_id = ezcontentobject.id AND eor_link_127.from_contentobject_version = ezcontentobject.current_version AND eor_link_127.contentclassattribute_id = 537 AND eor_link_127.to_contentobject_id = 127 AND

我知道它遗漏了一些括号，所以我编辑了字符串以直接在 phpMyAdmin 中对其进行测试。这是查询：

```
SELECT DISTINCT
                       ezcontentobject.*,
                       ezcontentobject_tree.*,
                       ezcontentclass.serialized_name_list as class_serialized_name_list,
                       ezcontentclass.identifier as class_identifier,
                       ezcontentclass.is_container as is_container

                       , ezcontentobject_name.name as name,  ezcontentobject_name.real_translation 
                       , a0.sort_key_int

                   FROM
                      ezcontentobject_tree,
                      ezcontentobject,ezcontentclass
                      , ezcontentobject_name 
                      , ezcontentobject_attribute a0

, ezcontentobject_link eor_link_126
, ezcontentobject_link eor_link_127

                   WHERE
                      ezcontentobject_tree.parent_node_id = 1443 and
                      ((eor_link_126.from_contentobject_id = ezcontentobject.id AND
 eor_link_126.from_contentobject_version = ezcontentobject.current_version AND
 eor_link_126.contentclassattribute_id = 537 AND
 eor_link_126.to_contentobject_id = 126) OR
 (eor_link_127.from_contentobject_id = ezcontentobject.id AND
 eor_link_127.from_contentobject_version = ezcontentobject.current_version AND
 eor_link_127.contentclassattribute_id = 537 AND
 eor_link_127.to_contentobject_id = 127)) AND

                                   a0.contentobject_id = ezcontentobject.id AND
                                   a0.contentclassattribute_id = 191 AND
                                   a0.version = ezcontentobject_name.content_version AND
 ( a0.language_id & ezcontentobject.language_mask > 0 AND
     ( (   ezcontentobject.language_mask - ( ezcontentobject.language_mask & a0.language_id ) ) & 1 )
   + ( ( ( ezcontentobject.language_mask - ( ezcontentobject.language_mask & a0.language_id ) ) & 2 ) )
   <
     ( a0.language_id & 1 )
   + ( ( a0.language_id & 2 ) )
 ) 
 AND 

                      ezcontentclass.version=0 AND

                      ezcontentobject_tree.contentobject_id = ezcontentobject.id  AND
                      ezcontentclass.id = ezcontentobject.contentclass_id AND

                         ezcontentobject.contentclass_id  IN  ( 17 ) AND
                       ezcontentobject_tree.contentobject_id = ezcontentobject_name.contentobject_id and
                                   ezcontentobject_tree.contentobject_version = ezcontentobject_name.content_version and 
 ( ezcontentobject_name.language_id & ezcontentobject.language_mask > 0 AND
     ( (   ezcontentobject.language_mask - ( ezcontentobject.language_mask & ezcontentobject_name.language_id ) ) & 1 )
   + ( ( ( ezcontentobject.language_mask - ( ezcontentobject.language_mask & ezcontentobject_name.language_id ) ) & 2 ) )
   <
     ( ezcontentobject_name.language_id & 1 )
   + ( ( ezcontentobject_name.language_id & 2 ) )
 ) 

                      AND ezcontentobject_tree.is_invisible = 0

                       AND 
 ezcontentobject.language_mask & 3 > 0 

                 ORDER BY a0.sort_key_int DESC
LIMIT 0, 10 
```

问题是，当我执行上面的查询时，没有返回任何内容，因为查询永远不会停止。CPU 达到 100%，我必须重新启动 mysql，这意味着它不是语法问题。

这是查询的解释：

![MySQL解释](../Images/9f4ee34f980516a6c3a58c05c647bffc.png)

如果有人对此有任何线索，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:26:23.737

我已经通过使用重写所有内容来解决它`eZPersistentObject::fetchObjectList()`。

# excel - UCase在VBE中没有被识别，需要什么参考？

> ID：13719687
> 
> 赞同：4
> 
> 时间：2012-12-05T09:14:26.170
> 
> 标签：excel, vba

我正在浏览一些 vba 代码，但在 UCase() 上出现编译错误。它说编译错误：找不到项目或库。我以前从未遇到过这个，我需要通过引用添加什么库来识别这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T22:25:51.610

检查“参考”对话框，您应该找到至少一个标记为“MISSING：”的参考，删除该缺失的参考，一切都会好起来的。

缺少引用会导致 VBA 行为异常，包括无法识别内置关键字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T19:27:07.320

我也遇到过同样的问题。但是一种技巧解决了这个错误：

只需将 or 分别替换`lcase`为`ucase`or`vba.lcase`即可`vba.ucase`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-27T09:59:57.870

如果尚未包含，则应添加

```
Tools -> References - > "OLE Automation" 
```

那是 UCase 可用的库。

# java - 无法在 Selenium 中截屏

> ID：13719689
> 
> 赞同：7
> 
> 时间：2012-12-05T09:14:33.750
> 
> 标签：java, selenium, webdriver, testng

我正在尝试为每个失败事件捕获屏幕截图并编写以下代码，但这不起作用。

```
public class TestFile {

    WebDriver driver = new FirefoxDriver();

    @Test   
    public void Testone(){
        driver.get("http://www.google.com/");           
    }

    @AfterMethod(alwaysRun=true)
    public void catchExceptions(ITestResult result){
        System.out.println("result"+result);
        String methodName = result.getName();
        System.out.println(methodName);

        if(!result.isSuccess()){         
            try { 
                File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
                FileUtils.copyFile(scrFile,new File("C:\\screenshot2.png" ));
            } catch (IOException e1) {
                e1.printStackTrace();
            }       
        }
    }
} 
```

* * *

这是失败的

> 文件 scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);

* * *

**堆栈跟踪：**

```
[TestNG] Running:
C:\Documents and Settings\537310\Local Settings\Temp\testng-eclipse-1576306112\testng-customsuite.xml

result[TestResult name=Testone status=FAILURE method=TestFile.Testone()[pri:0, instance:com.example.tests.TestFile@1b34126] output={null}]
FAILED CONFIGURATION: @AfterMethod catchExceptions([TestResult name=Testone status=FAILURE method=TestFile.Testone()[pri:0, instance:com.example.tests.TestFile@1b34126] output={null}])
net.sf.cglib.core.CodeGenerationException: java.lang.IllegalAccessException-->Class org.openqa.selenium.remote.Augmenter$CompoundHandler can not access a member of class org.openqa.selenium.firefox.FirefoxDriver with modifiers "protected"
at net.sf.cglib.core.ReflectUtils.newInstance(ReflectUtils.java:235) 
```

**进口清单：**

```
package com.example.tests;
import org.testng.annotations.Test;
import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import org.apache.commons.io.FileUtils;
import org.junit.Before;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.remote.Augmenter;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.testng.ITestResult;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:24:42.403

您共享的堆栈跟踪不是堆栈跟踪，但我认为是 testng 日志。
您提供的示例确实有效。我刚刚使测试失败，因为在@AfterMethod 中，仅当测试失败时才会截取屏幕截图： if(!result.isSuccess())
然后当我再次运行示例时，我得到：
java.io.FileNotFoundException: C: \screenshot2.png （访问被拒绝）
然后我将图片的位置更改为 D: 权限正确的地方，它端到端工作，我可以看到截图。

干杯

```
import java.io.File;
import java.io.IOException;

import org.apache.commons.io.FileUtils;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.testng.ITestResult;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.Test;

public class TestFile {

    WebDriver driver = new FirefoxDriver();

    @Test
    public void Testone() {

        driver.get("http://www.google.com/");
        assert false;

    }

    @AfterMethod(alwaysRun = true)
    public void catchExceptions(ITestResult result) {
        System.out.println("result" + result);
        String methodName = result.getName();
        System.out.println(methodName);

        if (!result.isSuccess()) {

            try {

                File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
                FileUtils.copyFile(scrFile, new File("C:\\screenshot2.png"));
            } catch (IOException e1) {
                e1.printStackTrace();
            }

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:36:52.547

嗨 sinisa229 mihajlovski，

您的脚本工作正常。但是您的脚本略有变化。如果我不评论“assert false”这一行，那就是错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:25:46.187

尝试这个 ：

```
 WebDriver augmentedDriver = new Augmenter().augment(driver);
    File screenshot = ((TakesScreenshot)augmentedDriver).
                        getScreenshotAs(OutputType.FILE); 
```

代替

`File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);`

# asp.net-mvc-3 - 从表中仅选择一个数据

> ID：13719696
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:15:00.857
> 
> 标签：asp.net-mvc-3

大家好，我的表中有这些数据 ![在此处输入图像描述](../Images/10f180e2455ecc4a72a6738df1165519.png)

详情_ID | 作者 | 详细标题 | 详细说明 | 创建日期 | 更新日期

* * *

12 |管理员 | 测试 | 只是一个测试| 2012 年 12 月 5 日 | 2012
年 12 月 5 日 13 |管理员 | 测试2 | 狗对猫 | 2012 年 12 月 5 日 | 2012
年 12 月 5 日 14 |管理员 | 测试3 | 呸呸呸| 2012 年 12 月 5 日 | 2012

年 12 月 5 日我将它们称为列表

```
public ViewResult Index()

        {
            return View(db.ProjectDetails.ToList());
        } 
```

和我的看法

```
@model IEnumerable<ProjectXYZ.Models.ProjectDetail>`

@{
    ViewBag.Title = "Index";
 }

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table>
     <tr>      
       <th>Author</th>

       <th>DetailTitle</th>

       <th>DetailDescription</th>

       <th>DateCreated</th>

       <th>DateUpdated</th>
       <th></th>
    </tr>

    @foreach (var item in Model) {
    <tr>
        <td>@Html.DisplayFor(modelItem => item.Author)</td>
        <td>@Html.DisplayFor(modelItem => item.DetailTitle)</td>
        <td>@Html.Raw(item.DetailDescription)</td>
        <td>@Html.DisplayFor(modelItem => item.DateCreated)</td>
        <td>@Html.DisplayFor(modelItem => item.DateUpdated)</td>

        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.details_ID }) |           
            @Html.ActionLink("Delete", "Delete", new { id=item.details_ID })
        </td>
    </tr>
  } 
</table> 
```

**问题**：我只想在视图中查看 details_ID = 12 的单个项目

我知道我必须在我的控制器上进行一些查询，但不知道如何..

我很感激任何帮助.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:23:54.187

你有

```
 @Html.ActionLink("Delete", "Delete", new { id=item.details_ID }) </td> </tr> } 
```

超出foreach的范围，所以item是未定义的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:24:09.977

为了立竿见影的效果，你可以试试这个：

```
return View(db.ProjectDetails.Where(p => p.details_ID == 12).ToList()); 
```

但是您应该在从数据库中获取数据时对其进行过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:29:43.880

得到它的工作，伙计们。我在我的控制器上添加了这个查询：

```
{
var pd = 
       (from ProjectDetail in db.ProjectDetails
       where ProjectDetail.details_ID == 12
       select ProjectDetail
       )
       .ToList();
return View(pd);
} 
```

-仍然感谢那些试图帮助我的人.. :)

# iphone - startMonitoringSignificantLocationChanges 如果可以终止我的应用程序

> ID：13719697
> 
> 赞同：2
> 
> 时间：2012-12-05T09:15:03.843
> 
> 标签：iphone, ios

我想在我的应用程序中使用 startMonitoringSignificantLocationChanges，但我有一些问题，希望得到一些帮助：

1.  对于一个普通的应用，如果应用进入后台，10分钟后，系统可以杀死应用。如果我使用startMonitoringSignificantLocationChanges，当我进入后台两个小时，我的应用没有终止，因为我点击图标，应用会进入最后一个退出页面。如果应用程序被杀死，当您单击图标时，您将首先看到默认页面。所以我的问题是使用 startMonitoringSignificantLocationChanges 我的应用程序在进入后台 10 分钟后没有被系统杀死？

2.  如果我关闭手机，然后重新启动手机，当位置发生重大变化时，我的应用程序是否可以激活，我查看苹果开发文档它回答是。所以我测试：

    ```
    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    if([CLLocationManager significantLocationChangeMonitoringAvailable]){
    [self log:@"sigAvailable=YES"];
     }
    // Override point for customizatio-n after application launch.

    id locationValue = [launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey];

    if (locationValue)
    {
    // create a new manager and start checking for sig changes
    [self log:@"didFinishLaunchingWithOptions location key"];
    m_locManager = [[CLLocationManager alloc] init];
    [self log:@"didFinishLaunchingWithOptions created manager"];
    m_locManager.delegate = self;
    [self log:@"didFinishLaunchingWithOptions set delegate"];
    [m_locManager startMonitoringSignificantLocationChanges];
    [self log:@"didFinishLaunchingWithOptions monitoring sig changes"];
            // do send local notification
    return YES;
      }

     [self log:@"didFinishLaunchingWithOptions"];   
     return YES;
       } 
    ```

    我的问题：当重新启动移动和本地通知时，运行上面的代码并记录“didFinishLaunchingWithOptions 位置键”等等，如果我在上面的代码中发送本地通知，用户是否会收到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:50:25.170

1.  在 ios 6 中有一个新的地图功能，它可以停止位置更新它有助于唤醒应用程序以接收位置更新。[关联](https://stackoverflow.com/questions/8155456/cllocationmanager-dont-stop)

    locationManager.pausesLocationUpdatesAutomatically

另请参阅[所有其他人](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)。

2.  [如果它的VOIP](https://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW1)，您的应用程序可以在设备启动时启动。看到这个[苹果文档](https://stackoverflow.com/questions/9300815/can-iphone-apps-start-on-start-up)

对于本地通知添加到

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

// creating local notification
    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls)
    {
        UILocalNotification *notification = [launchOptions objectForKey:
                                             UIApplicationLaunchOptionsLocalNotificationKey];

        if (notification)
        {
            NSString *reminderText = [notification.userInfo
                                      objectForKey:kRemindMeNotificationDataKey];
            NSLog(@"notification text:%@",reminderText);
            //    [viewController._msgTextView setText:reminderText];
        }
    }

    application.applicationIconBadgeNumber = 0; 
```

你可以处理它们

```
- (void)application:(UIApplication *)application
didReceiveLocalNotification:(UILocalNotification *)notification
{
    NSLog(@"application:didReceiveLocalNotification:");
} 
```

您可以安排您的本地通知

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{

Class cls = NSClassFromString(@"UILocalNotification");
            if (cls != nil)
            {
                UILocalNotification *notif = [[cls alloc] init];
                notif.fireDate = notifyDate;
                notif.timeZone = [NSTimeZone defaultTimeZone];
                notif.alertBody = AlertMsg;
                notif.soundName = UILocalNotificationDefaultSoundName;
                notif.applicationIconBadgeNumber = [[UIApplication sharedApplication]applicationIconBadgeNumber]+1;
                notif.alertAction = @"Show me";
                [[UIApplication sharedApplication] scheduleLocalNotification:notif];
}
} 
```

# c# - ajax工具包的密码强度控制是否有任何属性返回强度值

> ID：13719700
> 
> 赞同：1
> 
> 时间：2012-12-05T09:15:13.760
> 
> 标签：c#, asp.net, ajax

我正在使用密码强度控制来显示用户输入的密码强度。现在在保存用户新密码之前，我想验证密码是否满足复杂性要求或强度控制显示良好。是否有任何密码强度控制属性可以提供密码强度的当前值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:13:29.707

```
You can try something like that:
<form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:TextBox ID="TextBox2" Width="150" TextMode="Password" runat="server" autocomplete="off" onkeypress="getPasswordStrengthState()" /><br />
        <asp:Label ID="TextBox2_HelpLabel" runat="server"/><br />
        <br />
        <ajaxToolkit:PasswordStrength ID="PasswordStrength2" BehaviorID="myPSBID" runat="server" TargetControlID="TextBox2"
            DisplayPosition="RightSide" StrengthIndicatorType="BarIndicator" PreferredPasswordLength="15"
            HelpStatusLabelID="TextBox2_HelpLabel" StrengthStyles="BarIndicator_TextBox2_weak;BarIndicator_TextBox2_average;BarIndicator_TextBox2_good"
            BarBorderCssClass="BarBorder_TextBox2" MinimumNumericCharacters="1" MinimumSymbolCharacters="1"
            TextStrengthDescriptions="Very Poor;Weak;Average;Strong;Excellent" RequiresUpperAndLowerCaseCharacters="true" />
        <asp:Button ID="Button1" runat="server" Text="Button" style="display:none"/>
        <script type="text/javascript" language="javascript">
            function getPasswordStrengthState(){
               if( $find("myPSBID")._getPasswordStrength()>50){
                    $get("<%=Button1.ClientID%>").style.display = '';
               }
            }
        </script>
    </form> 
```

[PasswordStrength 在服务器端也有 CalculationWeightings 属性。](http://forums.asp.net/t/1242625.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:17:59.370

```
[CSS Exemple][1]
    <ajaxToolkit:PasswordStrength ID="PS" runat="server"  
        TargetControlID="TextBox1"  
        DisplayPosition="RightSide"  
        StrengthIndicatorType="Text"  
        PreferredPasswordLength="10"  
        PrefixText="Strength:"  
        TextCssClass="TextIndicator_TextBox1"  
        MinimumNumericCharacters="0"  
        MinimumSymbolCharacters="0"  
        RequiresUpperAndLowerCaseCharacters="false"  
        TextStrengthDescriptions="Very Poor;Weak;Average;Strong;Excellent"  
        TextStrengthDescriptionStyles="cssClass1;cssClass2;cssClass3;cssClass4;cssClass5  
        CalculationWeightings="50;15;15;20" /> 

  [1]: http://csharpdotnetfreak.blogspot.com/2012/01/passwordstrength-ajax-aspnet.html 
```

# visual-studio-2012 - Windows Phone 8 我无法将 c++ 模板添加到项目中

> ID：13719707
> 
> 赞同：0
> 
> 时间：2012-12-05T09:15:33.580
> 
> 标签：visual-studio-2012, c++-cli, windows-phone-8

让我们描述一下我的问题：

我已经创建了一个 Windows 8 应用程序，它是用 c++/cli 和 xaml 编写的。现在我想让这个应用程序到 Windows Phone 8。所以我的第一步是创建一个新项目：

![在此处输入图像描述](../Images/d3db47603f49622ca399fa71d2900e6b.png)

然后我想添加一个基于 c++ 模板的新元素，但 VS 只显示了 c# 模板：

![在此处输入图像描述](../Images/52b76ec4b5004ca1f6eba272c390ce05.png)

你记得？我创建了一个基于 C++ 的项目！ **如何像在普通 Windows 8 SDK 中一样基于 c++ 模板添加新元素？：** ![在此处输入图像描述](../Images/47d870c647a9dfd980c0c9bdb931c6ef.png)

我必须在某处下载这些模板吗？有没有其他方法可以让我的基于 c++ 的 Xaml 页面从 windows 8 项目到 windows phone 8 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:12:32.013

Windows Phone 8 不支持编写 C++/XAML 应用程序，仅支持 C++/D3D 应用程序。这就是为什么没有 C++/XAML 模板的原因。您可以混合使用 XAML 和 D3D，但需要用 C# 或 VB 编写 XAML UI 层。

有关更多详细信息，请参阅[MSDN 上的 Windows Phone 8 主题上的本机代码。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681687%28v=vs.105%29.aspx)去引用：

> Windows Phone 8 不支持具有 C++ 代码隐藏应用模型的 XAML UI，而 Windows 应用商店应用支持该模型。

# ios - 没有警报的电话提示

> ID：13719716
> 
> 赞同：4
> 
> 时间：2012-12-05T09:16:11.880
> 
> 标签：ios, cocoa-touch

我的应用需要拨打一个号码，我知道`telprompt`拨号后会返回应用。但是每次想要拨打号码时都会提醒用户，有没有办法直接拨打电话而不显示提醒视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:19:19.933

您可以使用以下代码拨打电话：-

```
NSString *value =@"9999999999";//your telnumber
NSURL *url = [[ NSURL alloc ] initWithString:[NSString stringWithFormat:@"tel://%@",value]];

NSLog(@"currunt number%@",url);
[[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T13:15:02.207

希望这会有所帮助

`tel` 直接拨打给定号码而不确认，通话结束后没有返回应用程序，因此您可以使用`telprompt`.

```
 PhoneNumber=@"999999999";
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"telprompt://%@", PhoneNumber]]]; 
```

# iphone - 隐藏游戏场景后，以前的视图不可见

> ID：13719722
> 
> 赞同：1
> 
> 时间：2012-12-05T09:16:19.193
> 
> 标签：iphone, cocos2d-iphone, ios6

我正在用 ios 开发一个 cocos2d 游戏。这是应用程序委托的代码：

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.homeViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.homeViewController;
    [self.window makeKeyAndVisible]; 
```

在这方面，我正在使`ViewController`课程成为`rootViewController`. 我正在`GameOptionsViewController`上课`HomeViewController`上课。从`GameOptionsViewController`我调用应用程序委托中的方法来添加游戏场景。

```
-(void)addGameScene

    {

    CCDirector *director = [CCDirector sharedDirector];
    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeMainLoop];
    else {
        [CCDirector setDirectorType:kCCDirectorTypeDisplayLink];
    }

    // Init the View Controller
    viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    viewController.wantsFullScreenLayout = YES;
    if(!glView)
        glView = [[EAGLView alloc] initWithFrame:[window bounds]];
    [director setOpenGLView:glView];

    [director setOpenGLView:glView];
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
    [viewController setView:glView];
    [window setRootViewController:viewController];
    [window addSubview: viewController.view];
    [window makeKeyAndVisible];
    [[CCDirector sharedDirector] runWithScene: [HelloWorldLayer scene]];
} 
```

现在当我想隐藏游戏场景时，我使用代码：

```
 [[CCDirector sharedDirector] stopAnimation];
   [[CCDirector sharedDirector].openGLView setHidden:YES]; 
```

游戏场景被隐藏了，但是之前的视图，ie`GameOptionsViewController`没有显示出来。我做错了什么？？？..请指教..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:23:32.913

在这里，您像这样使用 viewController 设置 RootViewController..

```
[window setRootViewController:viewController]; 
```

因为它只是将您的`GameOptionsViewController`类对象设置为 rootViewController..

对于前。

```
 ViewController *homeViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
   window.rootViewController = homeViewController; 
```

我希望这可以帮助你...

# c# - registerstartupscript 阻止 javascript 字符计数器

> ID：13719729
> 
> 赞同：0
> 
> 时间：2012-12-05T09:16:54.747
> 
> 标签：c#, javascript, asp.net

我遇到了过去可以工作但现在无法运行的代码的问题。我在文本框上有一个字符计数器，在 .aspx 文件中有以下代码：

```
<script>
    var bName = navigator.appName;
    function taLimit(taObj, maxL) {
        if (taObj.value.length == maxL) return false;
        return true;
    }

    function taCount(taObj, Cnt, maxL) {
        objCnt = createObject(Cnt);
        objVal = taObj.value;
        if (objVal.length > maxL) objVal = objVal.substring(0, maxL);
        if (objCnt) {
            if (bName == "Netscape") {
                objCnt.textContent = maxL - objVal.length;
            }
            else { objCnt.innerText = maxL - objVal.length; }
        }
        return true;
    }
    function createObject(objId) {
        if (document.getElementById) return document.getElementById(objId);
        else if (document.layers) return eval("document." + objId);
        else if (document.all) return eval("document.all." + objId);
        else return eval("document." + objId);
    }
                    </script> 
```

aspx：

```
<asp:TextBox ID="txtDescription" runat="server" Font-Names="Courier New" 
TextMode="MultiLine" Width="398px" onKeyPress="return taLimit(this, 50)" onKeyUp="return taCount(this,'myCounter1', 50)"></asp:TextBox>
<br /><B><SPAN id='myCounter1'>50</SPAN></B> 
```

这以前没有问题，但现在我想要一种方法来更新 myCounter1 在页面加载时，以显示正确的剩余字符，我正在将文本从数据库加载到文本框中。

现在我正在使用这个：

```
 ScriptManager.RegisterStartupScript(this, this.GetType(), "myscript", "document.getElementById('myCounter1').textContent = 50 - " + txtDescription.Text.Length.ToString() + ";", true); 
```

这有效，它将字符计数器设置为正确的剩余字符。然而，现在的问题是，当在文本框中输入文本时，字符计数器将不再动态更新。有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:27:57.817

使用 js。把它放在你的脚本中：

```
<script type="text/javascript">
window.onload = function(){
    taCount(document.getElementById('<%=txtDescription.ClientID%>'),'myCounter1', 50);
}
</script> 
```

删除服务器端脚本管理器代码。

# ruby - 符号化字符串中的任何非数字（Ruby）

> ID：13719734
> 
> 赞同：1
> 
> 时间：2012-12-05T09:17:05.810
> 
> 标签：ruby, string, symbols, digits

我有以下字符串输出：

```
"[1, 2, 3, *, +, 4, 5, -, /]" 
```

如何符号化非数字字符（即 *、+、-、/）并返回以下结果：

```
[1, 2, 3, :*, :+, 4, 5, :-, :/] 
```

目前，我正在使用这种方法来转换字符串：

```
def tokens(str)
    new_str = str.split(/\s+/)
    clean_str = new_str.to_s.gsub(/"/, '')
            #Symbolise clean_str to desired output
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:24:59.943

```
str = "[1, 2, 3, *, +, 4, 5, -, /]"

str.scan(/[^\[\]\s,]+/)
# => ["1", "2", "3", "*", "+", "4", "5", "-", "/"]

str.scan(/[^\[\]\s,]+/).map {|t| Integer(t) rescue t.to_sym }
# => [1, 2, 3, :*, :+, 4, 5, :-, :/] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:52:32.930

```
eval(str.gsub(/(?<=\[| )(?=\D)/, ":")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:30:22.973

`true`如果当前字符串是数字，您可以创建一个布尔方法返回，或者`false otherwise`。所以基本上，你可以这样做：

```
class String
  def numeric?
    Float(self) != nil rescue false
  end
end

"3".numeric?
#=> true
"+".numeric?
#=> false
"a".numeric?
#=> false
"-3".numeric?
#=> true 
```

然后，您可以遍历您的列表（通过`each()`例如）并将当前字符串（例如）替换`a`为`:a`if`numeric?`返回`false`。为此，您必须使用该`to_sym()`方法。

可能有更快的方法可以做到这一点，但我认为`numeric?()`布尔函数非常漂亮。

# regex - 我想匹配不包括 '#' 但包括 '\#' 在内的任何内容

> ID：13719735
> 
> 赞同：2
> 
> 时间：2012-12-05T09:17:06.733
> 
> 标签：regex, perl

我正在寻找可能包含正则表达式和注释的 perl 代码行，我需要捕获所有内容，直到出现注释。所以我想要所有字符直到 # 但我有兴趣捕获 # 例如，如果该行是：

```
if ($line=/\#/) {  #captures lines with '#' 
```

我想捕捉：

```
if ($line=/\#/) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:38:55.390

试试这个：

```
use PPI;
my $ppi = PPI::Document->new('source.pl');
my $source = '';
for my $token ( @{ $ppi->find("PPI::Token") } ) {
    last if $token->isa("PPI::Token::Comment");
    $source .= $token;
}
print $source; 
```

这应该可以处理除 here-docs 之外的几乎所有内容。如果你需要处理这些，首先复制 PPI::Document::serialize 并修改它以停止第一个评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:36:49.773

尝试这个

```
^(?:[^#]|(?<=\\)#)+ 
```

[在 Regexr 上](http://regexr.com?331tv)查看

这将匹配字符串 ( `^`) 开头的任何内容，不是 # ( `[^#]`)**或** 前面有反斜杠 ( `(?<=\\)#`)的 #

# iphone - 屏幕解锁时Apple Push Notifications不会到达

> ID：13719739
> 
> 赞同：3
> 
> 时间：2012-12-05T09:17:25.750
> 
> 标签：iphone, objective-c, ios, apple-push-notifications

几天来，我一直在尝试找到有关此问题的信息，但没有任何有用的结果。我正在使用 Objective-c 中的 iOS VoIP 应用程序（使用运行 iOS 6.0 的 iPhone 4），当客户端在后台时，它使用远程通知来通知用户有关呼叫的信息。我的问题很奇怪：当应用程序处于后台并且屏幕被锁定时，通知会到达并完美运行 - 它们会响起，并在打开应用程序时打开应用程序。但是当应用程序在后台并且屏幕被解锁时——例如，我们在主屏幕上——通知根本不会出现，没有任何迹象表明发生了什么事。

有人知道在哪里环顾四周吗？应用程序代码在推送通知出现时正确处理它们，因此这应该不是问题。通知来自我们的服务器，所以我开始认为设备的设置有些问题。该应用程序设置为“横幅”警报样式，并启用其通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:28:03.050

当应用程序在后台运行时，不会出现通知。您需要在 App Delegate 中捕获它`application:didReceiveRemoteNotification:`。
实现此方法并放置一个 UIAlert 以查看通知何时到达。

# android - 如何在Android中更改整个程序的皮肤样式？

> ID：13719744
> 
> 赞同：0
> 
> 时间：2012-12-05T09:17:38.443
> 
> 标签：android

如何改变整个程序的Skin style？

它可以使用专门的apk来实现共享。但是我不知道如何在当前程序中直接使用apk元素。

能给我一些建议吗？谢谢！</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:25:24.227

您可以定义一个具有 Android 主题样式之一的样式作为父样式：

```
<style name="main_style" parent="android:Theme.Black.NoTitleBar">
    <item name="android:windowBackground">@drawable/background</item>
    <item name="android:cacheColorHint">#00000000</item>
    <!-- any other customizations -->
</style> 
```

然后，在您的`AndroidManifest.xml`中，按以下方式应用它

到活动：

```
<activity
    android:name=".Activity1"
    android:theme="@style/main_style"/>

<activity
    android:name=".Activity2"
    android:theme="@style/main_style"/> 
```

或您的整个应用程序：

```
<application
    android:theme="@style/main_style"> 
```

无需定义您自己的主题，您也可以使用其中一种库存 Android 主题：

```
<application
    android:theme="@android:style/Theme.Black.NoTitleBar"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:27:11.547

您可以为您的应用定义样式。 [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# css - 包装不同浏览器的文本溢出？

> ID：13719745
> 
> 赞同：0
> 
> 时间：2012-12-05T09:17:44.150
> 
> 标签：css, internet-explorer, firefox, google-chrome, overflow

```
HTML

<div class="text-wrapper">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</div>

CSS

.text-wrapper{
width:100px;
height:45px;
overflow:hidden;
float:left;
border:1px solid #CCC;
} 
```

它在 Firefox 上看起来很流畅，有两行，但是如果我用 chrome 或 ie9 打开页面似乎是两行，第三行的上半部分。我该如何解决这个问题？屏幕截图 Firefox - Chrome - IE9

![火狐截图](../Images/d612af7adc13f7306fb60c1bdc5fb832.png) ![铬截图](../Images/3804c42018d091cb8d3c91d453556e22.png) ![ie9截图](../Images/41188ac099e38dbe91f06da153e00a57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:10:16.087

我解决了添加 line-height:1 和 font-size

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:18:15.317

您可以添加行高，大于您的字体大小。您可以根据您的要求进行相同的调整

检查此代码。

```
.text-wrapper{
width:100px;
height:45px;
overflow:hidden;     
float:left;
line-height:15px;         /*Added line height */
border:1px solid #CCC;
}​ 
```

[工作演示](http://jsfiddle.net/jVf95/ "工作演示")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:24:02.743

如果您想灵活使用高度，如下所示：

```
.text-wrapper{
width:100px;
height:auto;
overflow:hidden;
float:left;
border:1px solid #CCC;
} 
```

[例子](http://jsfiddle.net/Z8xXs/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:24:35.960

添加`font-size`到您的CSS。不同的浏览器有不同的默认值。还可以考虑使用 a`CSS reseter`来消除大部分浏览器差异。[这是一个不错的](http://meyerweb.com/eric/tools/css/reset/)。

# android - 如何从串行到 USB 读取出租车计价器数据

> ID：13719747
> 
> 赞同：1
> 
> 时间：2012-12-05T09:17:53.263
> 
> 标签：android, serial-port, usb, meter

嘿，我需要使用 Android 从串口读取**出租车计价器数据。**告诉我一些可能的实现方法......

我需要从仪表中获取金额、开始时间、结束时间、等待时间等，并将其显示在 Android 文本视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:45:44.660

这实际上取决于出租车计价器设备。Android 可以为您提供 USB 支持（主机或附件模式）。您可以在此处找到相关文档：

[http://developer.android.com/guide/topics/connectivity/usb/index.html](http://developer.android.com/guide/topics/connectivity/usb/index.html)

一旦获得工作通信通道，由出租车计价器设备来定义哪些数据可用以及如何读取/使用它们。为此，您将需要出租车计价器文档（或者您将不得不进行大量逆向工程......）。

在视图中显示数据本身就是一项任务。您必须阅读文档，设计所需的视图并用您的数据填充它。尝试从这里开始：

[http://developer.android.com/guide/topics/ui/index.html](http://developer.android.com/guide/topics/ui/index.html)

# html - 适当的 css 和 div 布局

> ID：13719749
> 
> 赞同：-2
> 
> 时间：2012-12-05T09:17:58.837
> 
> 标签：html, css

我想实现一个外部 div 为 100% 宽度和高度的布局。在这个 div 中，我将动态添加更多的 div。我想编写一个分割外部 div 的 css 结构，以便每个 div 获得相同的空间。实际上我想用 div 元素创建一个动态网格。以下示例： ![在此处输入图像描述](../Images/718b308522c7ac370632a1a1188ab5bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:21:49.867

只有css是不可能的，但你可以用jquery做到这一点，只需计算div并根据div的数量设置它们的宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:33:48.553

“Sowmia”的答案非常好，但有一件事：
你想细分 div 有 AUTO SIZE 并且解决方案你不能这样做。
我的解决方案正是 Sowmia 的答案，但有一些变化：

```
<style type="text/css" >
.main{width:100%;  height:100%;  background:#F5D0A9; overflow:auto}
.sub{width:auto;  
    height:auto;
    float:left;
    background:#8181F7;
    margin:4px;  
   border:solid 1px #2ECCFA}
</style> 
```

和html：

```
<div class="main">
<div class="sub"></div>
    <div class="sub">this is div number 1</div>
    <div class="sub">this is div number 2</div>
    <div class="sub">if you have a big text this div is bigger than the other
    <br />
    even you can have a text with some height
        </div>
</div> 
```

这是：
[演示](http://jsfiddle.net/talebihamid/4ACU5/)

# xml - ASP.Net MVC 返回类似于 37Signals 的 Highrise API 的 xml 结果

> ID：13719753
> 
> 赞同：0
> 
> 时间：2012-12-05T09:18:13.360
> 
> 标签：xml, asp.net-mvc, highrise

我想知道当用户输入以下网址时，如何使用 ASP.Net MVC 返回 XML：

[http://www.mysite.com/people.xml](http://www.mysite.com/people.xml)

如果用户输入[http://www.mysite.com/people](http://www.mysite.com/people)正常的 html 视图应该呈现显示数据库中的所有人员，而如果他们添加 .xml 他们将获得包含数据库中所有人员的 xml。

37Signals 的 Highrise API 就是这样工作的。我知道我可以使用 XmlResult 但是，如果用户未在 url 末尾指定 .xml，我将如何配置操作以返回正常视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:55:10.483

如果我理解你的问题是正确的，我认为你可以这样解决你的问题：

```
public class HomeController : Controller{

    public ActionResult Index(string filename){

        if(filename != null){
            string ext = // parse the filename and get the extension
            /*
                can't test, but I think 
                System.IO.Path.GetExtension(filename);
                should work
            */

            if(ext == "xml"){
                //  do stuff

                return new XmlResult(/* filepath or something */);
            }

        }

        //  do stuff

        //  return the view you want if no filename or not a xml extension
        return View();
    }

} 
```

# php - Phppowerpoint 保存位置？

> ID：13719755
> 
> 赞同：-3
> 
> 时间：2012-12-05T09:18:25.087
> 
> 标签：php, phppowerpoint

我使用 phpPowerpoint 成功创建了一个 ppt 文件。

如何更改保存位置？我想将文件保存到其他文件夹

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:23:50.837

当您在调用中指定文件名以保存时

```
$objPPTXWriter->save('filename.pptx'); 
```

只需指定目录路径

```
$objPPTXWriter->save('/path/to/my/directory/filename.pptx'); 
```

# sql - 选择中的 DB/2 乘法

> ID：13719756
> 
> 赞同：1
> 
> 时间：2012-12-05T09:18:26.603
> 
> 标签：sql, db2

我正在 as/400 上的 DB/2 上编写查询以选择仓库中货物的总重量。我有列重量和计数 - 现在我需要的是：

```
select weight, count, (weight * count) as total from warehouse 
```

但是这个查询不起作用，我收到错误消息：

```
* use not valid. 
```

谁能给我一个想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:59:41.943

确保重量和计数具有数字类型。如果不是，请更改您的表格设计或将数据转换为数字类型。

# c# - 如何查看网站以将其视为在不同国家/地区

> ID：13719759
> 
> 赞同：0
> 
> 时间：2012-12-05T09:18:49.653
> 
> 标签：c#, asp.net, .net, localization, globalization

我正在开发多语言网站。通常我使用 microsoft.com 模式，但问题是当 CultureInfo 不支持某些打开时，我无法找到 microsoft.com 的外观。IE。有人在肯尼亚打开 microsoft.com 时的 url 和外观。

我是印度人。这样我就无法打开 microsoft.com 的肯尼亚网站。

是否有可用的模拟器显示基于国家/地区打开网站时的外观

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:24:20.740

尝试根据您的要求设置浏览器语言。

对于 IE - 工具-> Internet 选项-> 语言首选项

![在此处输入图像描述](../Images/b6e38ee865956624146a0d300a2be00d.png)

# c++ - 多个列表的高效置换算法

> ID：13719760
> 
> 赞同：0
> 
> 时间：2012-12-05T09:18:56.657
> 
> 标签：c++, algorithm, combinations

我有可变数量的列表。每个都包含不同数量的元素。

例如有四个列表，

```
array1 = {1, 2, 3, 4};
array2 = {a, b, c};
array3 = {X};
array4 = {2.10, 3.5, 1.2, 6.2, 0.3}; 
```

我需要找到所有可能的元组，其第 i 个元素来自第 i 个列表，例如 {1,a,X,2.10}, {1,a,X,3.5}, ...

目前我正在使用具有性能问题的递归实现。因此，我想找到一种可以更快执行的非迭代方式。

有什么建议吗？是否有任何有效的算法（或一些伪代码）。谢谢！

到目前为止我实现的一些伪代码：

递归版本：

```
vector<size_t> indices; // store current indices of each list except for the last one)

permuation (index, numOfLists) { // always called with permutation(0, numOfLists)
  if (index == numOfLists - 1) {
    for (i = first_elem_of_last_list; i <= last_elem_of_last_list; ++i) {
      foreach(indices.begin(), indices.end(), printElemAtIndex());
      printElemAtIndex(last_list, i);
    }
  }
  else {
    for (i = first_elem_of_ith_list; i <= last_elem_of_ith_list; ++i) {
      update_indices(index, i);
      permutation(index + 1, numOfLists); // recursive call
    }
  }
} 
```

非递归版本：

```
vector<size_t> indices; // store current indices of each list except for the last one)
permutation-iterative(index, numOfLists) {
  bool forward = true;
  int curr = 0;

  while (curr >= 0) {
    if (curr < numOfLists - 1){
      if (forward) 
        curr++;
      else {
        if (permutation_of_last_list_is_done) {
          curr--;
        }
        else {
          curr++;
          forward = true;
        }
        if (curr > 0) 
          update_indices();
      }
    }
    else {
      // last list
      for (i = first_elem_of_last_list; i <= last_elem_of_last_list; ++i) {
        foreach(indices.begin(), indices.end(), printElemAtIndex());
        printElemAtIndex(last_list, i);
      }
      curr--;
      forward = false;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:21:14.020

有`O(l^n)`^(1 个)不同的这样的元组，其中`l`是列表的大小，是列表`n`的数量。

因此，不能以多项式方式~~有效地生成所有这些。~~

可能可以进行一些局部优化 - 但我怀疑在迭代和（高效）递归之间切换会产生很大的不同，特别是如果迭代版本试图使用堆栈 + 循环来模拟递归解决方案，这为此目的，可能不如硬件堆栈优化。

* * *

一种可能的递归方法是：

```
printAll(list<list<E>> listOfLists, list<E> sol):
  if (listOfLists.isEmpty()):
      print sol
      return
  list<E> currentList <- listOfLists.removeAndGetFirst()
  for each element e in currentList:
      sol.append(e)
      printAll(listOfLists, sol) //recursively invoking with a "smaller" problem
      sol.removeLast()
  listOfLists.addFirst(currentList) 
```

* * *

(1) 确切地说，有`l1 * l2 * ... * ln`元组，其中 li 是第 i 个列表的大小。对于长度相等的列表，它衰减到`l^n`。

# java - 在调用第二个未执行的两个不同模式存储过程的存储过程时

> ID：13719761
> 
> 赞同：0
> 
> 时间：2012-12-05T09:18:59.543
> 
> 标签：java, jdbc, plsqldeveloper, database-permissions, java-stored-procedures

```
 Connection connection = DriverManager.getConnection(DB_URL,userName,passWord);
         ArrayDescriptor des = ArrayDescriptor.createDescriptor("ARRAY_TABLE", connection);
         ARRAY array_to_pass = new ARRAY(des,connection,ssoIDs);
         CallableStatement cs = connection.prepareCall("{ call TEST1 (?,?,?,?,?) }");
         cs.setArray(1, array_to_pass);
        // cs.registerOutParameter(2,sdate);
         cs.setString(2, sdate);
         cs.setString(3, edate);
         //st.registerOutParameter(3,OracleTypes.ARRAY,"SchemaName.ARRAY_INT");
         cs.registerOutParameter(4, OracleTypes.ARRAY, "ARRAY_TABLE");
         cs.registerOutParameter(5, OracleTypes.ARRAY, "ARRAY_TABLE");
         cs.execute(); // works fine . 
```

然而

```
 String[] aIdtobePassed = actorid.toArray(new String[actorid.size()]);
            String[] pIdtobePassed=processid.toArray(new String[processid.size()]);

            ArrayDescriptor desforActorId = ArrayDescriptor.createDescriptor("ARRAY_TABLE", connection);
            ARRAY actorArray_to_pass = new ARRAY(desforActorId,connection,aIdtobePassed);
            ArrayDescriptor desforProcessId = ArrayDescriptor.createDescriptor("ARRAY_TABLE", connection);
            ARRAY processArray_to_pass = new ARRAY(desforProcessId,connection,pIdtobePassed);

            CallableStatement csforST= connection.prepareCall("{ call TEST2 (?,?,?,?,?,?,?,?) }");
            csforST.setArray(1, actorArray_to_pass);
         //   csforST.setString(1, "as");
            csforST.setArray(2, processArray_to_pass);
            csforST.registerOutParameter(3, OracleTypes.ARRAY, "ARRAY_TABLE");
            csforST.registerOutParameter(4, OracleTypes.ARRAY, "ARRAY_TABLE");
            csforST.registerOutParameter(5, OracleTypes.ARRAY, "ARRAY_TABLE");
            csforST.registerOutParameter(6, OracleTypes.ARRAY, "ARRAY_TABLE");
            csforST.registerOutParameter(7, OracleTypes.ARRAY, "ARRAY_TABLE");
            csforST.registerOutParameter(8, OracleTypes.ARRAY, "ARRAY_TABLE");
            csforST.execute(); // do not works 
```

Test1 属于一个模式，Test2 属于另一个模式。

错误信息是

状态：65000 消息：ORA-06550：第 1 行，第 7 列：PLS-00201：必须声明标识符“TEST2” ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

我正在使用架构连接到数据库的 SQL 开发人员，因为我可以在架构上看到类似于它已连接的插头符号。但我不确定为什么它对任何人都不起作用，请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:56:56.080

终于找到了为什么我会收到这样的错误。我试图与之建立连接的用户名和密码没有访问第二个模式的权限。

因为我只用它们的名字“{call a(?,?)}”来调用不同模式的过程。它单独引用第一个模式，因此抛出另一个 proc 不存在的错误。

与用户名和密码建立新连接以调用第二个模式。它工作正常。

# c#-4.0 - 如何从 Windows Store 应用程序打印 pdf 文件

> ID：13719762
> 
> 赞同：3
> 
> 时间：2012-12-05T09:19:01.527
> 
> 标签：c#-4.0, windows-8, microsoft-metro, winrt-xaml

我正在用 c# 和 xaml 创建一个 Windows 8 应用程序。如何在不启动 Windows 的 pdf 阅读器的情况下从这个应用程序在我的系统上打印 pdf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-20T19:18:43.740

如果您想用设备打印它，可以在没有任何第三方库的情况下实现这一点。

这不适用于创建或编写“.pdf”[Pdf 文件）。为了在没有其他库的情况下实现这一点，您可以尝试将图像直接写入 pdf，但我只能在此处参考 Pdf 文档。

首先你必须渲染你的pdf。您可以使用[`Windows.Data.Pdf`](http://msdn.microsoft.com/library/windows/apps/windows.data.pdf.aspx). [您可以在这里](http://www.silverlightshow.net/items/Windows-8.1-Create-a-PDF-Viewer-with-new-PDF-API.aspx)查看一个示例。该库将处理 Pdf，您会得到一些`BitmapImages`渲染。这个库可以读，但不能写“.pdf”

现在你必须打印你的图像（渲染的 pdf 页面）。为此，您采用[`Windows.Graphics.Printing.PrintManager`](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/10/25/windows-store-apps-and-xaml-based-printing-rough-notes.aspx). 在这种情况下，我不推荐使用 msdn 示例。因此，请先了解一下[Windows 应用商店应用程序和基于 XAML 的打印](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/10/25/windows-store-apps-and-xaml-based-printing-rough-notes.aspx)。

您将在此处找到另一个使用 MVVM 的打印示例：[从 MVVM XAML Windows 8 Store 应用程序打印](http://blogs.u2u.be/diederik/post/2013/01/20/Printing-from-MVVM-XAML-Windows-8-Store-apps.aspx)。

如果您只是按照示例进行操作，那么在纸上打印 pdf 会有些麻烦。

如何为您的打印机添加自定义设置在[如何将自定义设置添加到打印预览 UI (XAML) 中进行了](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh973533.aspx)说明！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:24:31.947

如果可以选择商业图书馆，您可以尝试[Amyuni PDF Creator for WinRT](http://www.amyuni.com/en/resources/trialdownloads/)。

[从文档](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_WinRT/Printing_Documents/Printing_a_PDF_from_a_Windows_Store_Application.htm)中，使用此库在 C# 中打印 PDF 文件的代码如下所示：

```
// Printing on a XAML Windows Store Application
// The field AmyuniPDFCreator.PDFCreator m_pdfCreator; contains an instance of the PDFCreator control
TypedEventHandler<PrintManager, PrintTaskRequestedEventArgs> m_printTaskRequestedEventToken;
// Registering the Application View for printing
void RegisterForPrinting()
{
    // Request a PrintManager instance
    PrintManager printMan = PrintManager.GetForCurrentView();
    // Add a handler for printing events.
    m_printTaskRequestedEventToken = printMan.PrintTaskRequested += m_pdfCreator.Document.PrintTaskRequestedEventHandler;
}
// Unregistering the Application View for printing
void UnregisterForPrinting()
{
    // Remove the handler for printing events.
    PrintManager printMan = PrintManager.GetForCurrentView();
    printMan.PrintTaskRequested -= m_printTaskRequestedEventToken;
} 
```

可以在[此处](http://www.w8pdf.com)找到有关该库的更多详细信息。

*免责声明：我目前是该库的开发人员*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T17:48:34.377

Windows 8 没有执行此操作的 API，因此您必须在其他地方获得一个 - 能够为您正确呈现 PDF 的东西，这将意味着一个完整的 PDF API 与所有的花里胡哨（对于仅支持打印的 Windows 8，我不知道其中的任何一个）。

如果只有[PDF Sharp](http://www.pdfsharp.net/%28S%28lojvb5z42qrlrw4yywbfrw3f%29%29/default.aspx)有 WinRT 版本，我会立即推荐它......不幸的是它没有（还）。我知道只有[Foxit](http://www.foxitsoftware.com/mswin8metro/)和[Siberix Report Writer](http://www.siberix.com/)有 WinRT 的 API 。

# delphi - 使用 VCL 样式对 TOpenDialog 和 TOpenPictureDialog 进行蒙皮

> ID：13719764
> 
> 赞同：3
> 
> 时间：2012-12-05T09:19:12.963
> 
> 标签：delphi, vcl-styles

是否可以使用 VCL 样式对 TOpenDialog 和 TOpenPictureDialog 进行蒙皮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:21:16.740

简短的回答是不，目前无法使用 Delphi XE2 或 XE3 直接将 Vcl 样式应用于非 VCL 表单（或在 VCL 应用程序之外创建的表单）。

现在长答案，在技术上可以将 Vcl 样式应用于此类对话框，但这需要大量工作（相信我需要大量工作）。

关键是使用[WH_CBT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#wh_cbthook) Hook，检测`HCBT_CREATEWND`代码，然后检查窗口[`#32770`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633574%28v=vs.85%29.aspx)的类是否是（对话框的类）。从这里您可以使用带有索引的函数替换*窗口过程。*[`SetWindowLong`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx)`GWL_WNDPROC`

这是简单的部分，现在您可以控制窗口对话框发送的消息，您必须遍历子控件并 使用 GWL_WNDPROC 索引再次替换*窗口过程。*这可以通过为 Windows 对话框（按钮、syslistview32、Combobox 等）中使用的每个控件创建 Wrapper 类（这是一项艰巨的工作）来完成

这是`syslistview32`windows 类的 Wrapper 类的定义示例。

```
 TListViewWnd = class(TCustomListView)
  private
    FNewWndProc  : Pointer;
    FOrgWndProc  : Pointer;
    Fhwnd: THandle;
    procedure CreateParams(var Params: TCreateParams); override;
    procedure CreateWnd; override;
    procedure DestroyWnd; override;
    procedure WndProc(var Message: TMessage); override;
  public
    constructor Create(hwnd: THandle);
    destructor  Destroy;override;
  end; 
```

最后，您可以通过这种方式使用为 Vcl 控件（如 TListView）定义的现有 VCL 样式挂钩

```
TStyleManager.Engine.RegisterStyleHook(TListViewWnd, TListViewStyleHook); 
```

我已经完成了上面描述的部分任务，但还没有完成，因此这种项目需要很多时间。

![在此处输入图像描述](../Images/af5a095318ba45d21c779e8a574bde6f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-11T16:38:07.317

对于任何感兴趣的人，[`VCL Styles Utils Project`](http://code.google.com/p/vcl-styles-utils/)现在支持对话框

![在此处输入图像描述](../Images/ce04498ebb29fce2eff5d6bfb7823163.png)

[您可以在此博客文章](http://theroadtodelphi.wordpress.com/2013/11/11/the-vcl-styles-utils-project-now-supports-dialogs-and-popup-menus/)中找到有关此功能的更多信息。

# java - Glassfish 线程池问题

> ID：13719765
> 
> 赞同：10
> 
> 时间：2012-12-05T09:19:13.890
> 
> 标签：java, glassfish, threadpool

我们使用的是 Glassfish 3.0.1，响应时间很长；对于 25% 的 POST/PUT 请求，大约需要 5 分钟，当响应返回时，前端负载均衡器已超时。

我的理论是请求正在排队等待可用线程。

我认为这是因为访问日志显示请求需要几秒钟才能完成，但是执行请求的时间比我预期的晚了五分钟。

有人对调试线程池的情况有什么建议吗？或者他们的最佳设置应该是什么？

是否需要定期进行线程转储或一次性转储就足够了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T17:12:55.467

乍一看，这似乎与线程池本身没什么关系。在不了解网络设置的其余部分的情况下，我会检查以下几点：

*   负载均衡器池中是否存在死节点/无响应节点？这可能会导致针对该节点尝试所有请求，直到它们由于超时而失败，然后才被重定向到另一个节点。
*   负载平衡器和 Glassfish 服务器之间的初始连接是否存在问题？这可能是缓慢或不正确的 DNS 查找（尽管服务器应该缓存结果）、缺少代理或其他一些与网络相关的问题。
*   您是否检查过机器之间的时钟是否同步？这可能会导致日志不同步。5 分钟是一个非常奇怪的超时时间。

如果所有这些都为空，您可能只是负载平衡器和 Web 服务器之间的阻抗不匹配，您可能需要添加 Web 服务器来处理负载。负载均衡器应该能够为您提供大量有关传入流量及其堆积方式的统计信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T20:59:36.423

如果您在服务器中配置的工作线程不足，通常会​​出现此行为。普通网络服务器中的默认值范围为 15 到 100 个线程。但是，如果您的应用程序阻塞了服务器的工作线程（例如通过等待查询），那么默认值太低了。您可以毫无问题地将工作人员的数量增加到 1000（确保 64 位）。还要检查任何中间服务器（例如代理或通过 mod_proxy 转发的 apache）的工作线程数（有时称为“最大并发/打开请求”）。

另一个常见的陷阱是您的软件在阻止传入请求的同时向自身发送请求（例如，尝试重新路由或转发请求）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T18:42:16.233

使用 threaddump 是调试线程池的最佳方式。请一个接一个地进行 3-4 个线程转储，每个线程转储之间有 1-2 秒的间隙。

从 threaddump 中，您可以通过名称找到工作线程的数量。从多个线程转储中找出长时间运行的线程。

您可以使用 TDA 工具 ( [http://java.net/projects/tda/downloads/download/tda-bin-2.2.zip](http://java.net/projects/tda/downloads/download/tda-bin-2.2.zip) ) 来分析线程转储。

# java - Project Euler #5（可被 1 到 20 的所有数字整除的最小正数）：优化方法？~爪哇

> ID：13719768
> 
> 赞同：1
> 
> 时间：2012-12-05T09:19:21.087
> 
> 标签：java, optimization, lcm

**问题 5：** 2520 是可以除以 1 到 10 的每个数字而没有任何余数的最小数字。能被 1 到 20 的所有数整除的最小正数是多少？

我已经解决了[Project Euler的问题 5](http://projecteuler.net/)

这是Java代码：

```
 static long FindLcm(long a,long b)
 {
     long lcm,hcf = 0;
     long i=1;
     long ger=a>b?a:b;
     while(i<ger)
     {
         if((a%i==0) && (b%i==0))
             hcf=i;
         i++;
     }
     lcm=(a*b)/hcf;
     return lcm;
 }
 static void FindMultiple()
 {
     long lcm=1;
     for(long i=2;i<=20;i++)
     {
         lcm=FindLcm(lcm,i);
     }   
     System.out.println("Lcm="+lcm);
 } 
```

如何优化这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T15:23:28.660

你的`FindMultiple()`方法还不错，

```
static void FindMultiple()
{
    long lcm=1;
    for(long i=2;i<=20;i++)
    {
        lcm=FindLcm(lcm,i);
    }
    System.out.println("Lcm="+lcm);
} 
```

它实现了一个相当不错的算法。您的问题是您`FindLcm()`包含一个令人讨厌的性能错误。

```
static long FindLcm(long a,long b)
{
    long lcm,hcf = 0;
    long i=1;
    // This sets ger to max(a,b) - why?
    long ger=a>b?a:b;
    // This would return a wrong result if a == b
    // that never happens here, though
    while(i<ger)
    {
        if((a%i==0) && (b%i==0))
            hcf=i;
        i++;
    }
    lcm=(a*b)/hcf;
    return lcm;
} 
```

您正在循环，直到达到两个参数中*较大的一个。*由于累积的 LCM 增长相当快，这需要很多时间。但是两个（正）数的 GCD（或 HCF，如果您愿意的话）不能大于两者中较小的一个。因此，仅循环直到达到两个参数中的较小者，使得这里的迭代次数最多为 20，执行 19 次（for `i = 2, ..., 20`），这是一个微不足道的计算量。

更改为

```
long ger = a < b ? a : b;
while(i <= ger) { 
```

给我（添加计时码，不测量打印）：

```
17705 nanoseconds
Lcm=232792560 
```

因此计算时间不到 20**微秒**。如果我们使用欧几里得算法找到最大公约数，我们可以轻松地将其推到 6 微秒以下，

```
static long gcd(long a, long b) {
    while(b > 0) {
        a %= b;
        if (a == 0) return b;
        b %= a;
    }
    return a;
} 
```

如果我们直接使用 GCD 作为，则低于 5

```
lcm *= i/gcd(lcm,i); 
```

在`FindMultiple()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T04:55:44.240

你的解决方案或多或少是蛮力，这就是为什么它需要这么长时间。我们知道 2520 是 (1,2,...,9,10) 的 lcm，这意味着两个有用的东西：1.）我们可以从 11 和 2 开始检查因数。）答案是 2520 的倍数。

您正在搜索答案的最大公约数 (gcd) 和序列中的下一个数字（类似于冒泡排序）。您可以检查您当前的答案是否可以被下一个因子整除，如果不是，则将您当前的答案添加到自身，直到答案可以被下一个因子整除。例如：

```
 static long findLCM(long a, long b) {
        long lcm = (a>b) ? a : b;
        while (lcm % b != 0) {
            lcm += a;
        }
        return lcm;
    } 
```

由于我们从 lcm = a 开始，我们知道只要我们将 a 加到 lcm 上，那么 lcm 就总是能被 a 整除。现在，我们只需要使 a 可以被 b 整除。这个过程应该省去许多首先找到 gcd 以及从 2 到 10 迭代的步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T10:13:32.783

我是这样做的，这是我能想到的最简单的方法。它也比你的快一点。

```
 for(int i = 190; ; i += 190) {
        if(i % 3 == 0 
                && i % 4 == 0
                && i % 6 == 0 
                && i % 7 == 0
                && i % 8 == 0 
                && i % 9 == 0
                && i % 11 == 0
                && i % 12 == 0 
                && i % 13 == 0 
                && i % 14 == 0 
                && i % 15 == 0
                && i % 16 == 0
                && i % 17 == 0
                && i % 18 == 0
                && i % 20 == 0) {
            System.out.println(i);
            break;
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-10T22:08:25.740

这里有**4种不同的方法**来获得结果（4种不同的方法来获得GCD）+**总时间**。所有这些都基于以下观察：

> ```
>  a*b
> lcm(a,b) = ---------- 
>             gcd(a,b) 
> ```

在哪里：

LCM = 最小公倍数
GCD = 最大公约数

```
import java.lang.reflect.Method;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;

public class A {

    final static int N = 20;

    static Map<Integer, String> messages = new HashMap<>();

    static {
        messages.put(0, "Euler - difference");
        messages.put(1, "modulo - recursive");
        messages.put(2, "modulo - iterative");
        messages.put(3, "BigInteger implementation");
    }

    private static long GCD0(long x, long y) {
        while (x != y) {
            if (x > y) {
                x -= y;
            } else {
                y -= x;
            }
        }
        return x;
    }

    private static long GCD1(long x, long y) {
        if (x % y == 0) {
            return y;
        }
        return GCD1(y, x % y);
    }

    private static long GCD2(long x, long y) {
        long aux;
        while (x % y != 0) {
            aux = y;
            y = x % y;
            x = aux;
        }
        return y;
    }

    private static long GCD3(long x, long y) {
        BigInteger xx = BigInteger.valueOf(x);
        BigInteger yy = BigInteger.valueOf(y);
        return xx.gcd(yy).longValue();
    }

    private static void doIt(int pos) throws Exception {

        System.out.print("\n" + messages.get(pos));
        printSpaces(25, messages.get(pos).length());

        Class cls = Class.forName("A");
        Object obj = cls.newInstance();
        Method method = cls.getDeclaredMethod("GCD" + pos, long.class,
                long.class);

        long start = System.nanoTime();

        long p = 1;
        for (int i = 2; i <= N; i++) {
            p = (p * i) / (long) method.invoke(obj, p, i);
        }
        long stop = System.nanoTime();
        System.out.println("\tTime: " + (stop - start) / 1000 + " microseconds");
        System.out.println(p);
    }

    private static void printSpaces(int total, int actualLength) {
        for (int i = 0; i < total - actualLength; i++) {
            System.out.print(" ");
        }
    }

    public static void main(String[] args) throws Exception {
        doIt(0);
        doIt(1);
        doIt(2);
        doIt(3);
    }
} 
```

**输出**：

```
Euler - difference          Time: 137205 microseconds
232792560

modulo - recursive          Time: 1240 microseconds
232792560

modulo - iterative          Time: 1228 microseconds
232792560

BigInteger implementation   Time: 2984 microseconds
232792560 
```

PS：我使用**反射**来调用这些方法更容易，但是您可以直接调用该方法以获得更好的性能+更好的可读性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-23T05:41:45.603

```
int i = 20;
        while (true)
        {
        if (    
                    (i % 1 == 0) &&
                    (i % 2 == 0) &&
                    (i % 3 == 0) &&
                    (i % 5 == 0) &&
                    (i % 7 == 0) &&
                    (i % 9 == 0) &&
                    (i % 11 == 0) &&
                    (i % 13 == 0) &&
                    (i % 16 == 0) &&
                    (i % 17 == 0) &&
                    (i % 19 == 0) )
            {
                break;
            }
            i += 20;
        }
S.O.P(i); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-01T16:16:09.500

具有最少迭代的 C++ 程序...非常类似于 Daniel Fischer

```
#include<iostream>

using namespace std;

int main()
{
    int num = 20;
    long lcm = 1L;
    for (int i = 2; i <= num; i++)
    {
        int hcf = 1;
        for (int j = 2; j <= i; j++)
        {
            if (i % j == 0 && lcm % j == 0)
            {
                hcf = j;
            }
        }
        lcm = (lcm * i) / hcf;
    }
    cout << lcm << "\n";
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-19T06:07:36.223

此方法使用蛮力，但一旦数字失败就跳过而不是继续比较余数。哎呀，除非已经通过了 19，否则它永远不会检查 20，这实际上使它非常有效。

```
#include<stdio.h>
int a = 1, b = 1, rem;
int main() {
    while (b < 20){
        rem = a % b;
        if (rem != 0){
            a++;
            b = 1;
        }
        b++;
        }
    printf("%d is the smallest positive number divisible by all of the numbers from 1 to 20.", a);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-01T13:11:03.157

**一种非蛮力方法**

这个是瞬间的！甚至不需要一秒钟。运行代码以了解逻辑。它是用 C 写的

```
#include <stdio.h>

int main()  {

int primes[8]={2,3,5,7,11,13,17,19};
int primes_count[8]={0,0,0,0,0,0,0,0};
int i,j,num,prime_point;
int largest_num=1;

printf("\nNUM");
for(j=0;j<8;j++)
    printf("\t%d",primes[j]);

for(i=2;i<=20;i++)  {
    num=i;
    int primes_count_temp[8]={0,0,0,0,0,0,0,0};
    for(j=0;j<8;j++)    {
        while(num%primes[j]==0) {
            num=num/primes[j];
            primes_count_temp[j]++;
        }
    }
    for(j=0;j<8;j++)
        if(primes_count_temp[j]>primes_count[j])
            primes_count[j]=primes_count_temp[j];

        printf("\n %d",i);
        for(j=0;j<8;j++)
            printf("\t %d",primes_count_temp[j]);
    }
    printf("\nNET");
    for(j=0;j<8;j++)
        printf("\t%d",primes_count[j]);
    printf("\n");
    for(i=0;i<8;i++)
        while(primes_count[i])  {
            largest_num*=primes[i];
            primes_count[i]--;
        }

        printf("The answer is %d \n",largest_num);
        return 0;
    } 
```

现在，如果一个数能被 X 整除，那么它也能被它的素因数整除。因此，如果一个数能被 20 整除，那么它就能被它的质因数整除。并且有 8 个 20 以下的素数。我取每个 20 以下的数并找到它的素因数，同时查看素数的幂并计算最高幂。

一旦你完成了。将所有素因数乘以最高幂。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-16T15:59:35.400

我在 python 中的解决方案。这很简单，使用纯数学规则

得到最小公倍数

```
def getLCM (x, y):
  return x*y/getGCD(x,y) 
```

得到最大公约数

```
def getGCD(a,b):
   while(True):
      if(a%b != 0):
          temp = b
          b = a%b
          a = temp
      else:
          return b
          break 
```

查找列表中前两个数字和下一个数字的 LCM 的最小公倍数。

LCM（前两个数字的LCM，列表中的下一个数字）

```
num_list = list(range(1,21))
finalLCM = 1
for i in num_list:
  finalLCM = getLCM(finalLCM,i)
print(finalLCM) 
```

完整的 Python 代码

```
def getLCM (x, y):
return x*y/getGCD(x,y)

def getGCD(a,b):
  while(True):
      if(a%b != 0):
         temp = b
         b = a%b
         a = temp
      else:
         return b
         break

num_list = list(range(1,21))
finalLCM = 1

for i in num_list:
  finalLCM = getLCM(finalLCM,i)
print(finalLCM) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-02T10:32:23.403

我们已经创建了一个可以被 20 整除的数组，例如：如果任何数字都可以被 20 整除，那么就不需要被 2,4,5,10 整除

```
<?php
$chk=20;

$div=array(11,12,13,14,15,16,17,18,19,20);
for($number=1;1;$number++){
    $chk=$number;
    foreach($div as $value){        
        if($number%$value!=0){
            $chk=0;
            $number+=$value;
            break;
        }
    }
    if($chk!=0){break;}
}
echo $chk;
?> 
```

# android - 访问 JSON 响应中的值 - 生成错误 - json.JSON.typeMismatch(JSON.java:100)

> ID：13719771
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:19:39.250
> 
> 标签：android, json, response

我有以下回应：

```
{
   "data": [
      {
         "name": "This is a test 123",
         "start_time": "2013-12-02T18:00:00+0530",
         "end_time": "2013-12-02T20:00:00+0530",
         "location": "Mount Lavinia",
         "id": "525447507473743",
         "rsvp_status": "attending"
      },
      {
         "name": "This is a test event",
         "start_time": "2013-12-02T18:00:00+0530",
         "end_time": "2013-12-02T20:00:00+0530",
         "location": "Mount Lavinia",
         "id": "560383743988530",
         "rsvp_status": "attending"
      },
} 
```

],

我有以下代码来访问响应：

```
 JSONObject jsonObj = new JSONObject(result);
                JSONArray jsonArr = jsonObj.getJSONArray("data");
                for(int i = 0; i < jsonArr .length(); i++)
                {
                   JSONObject jsonArrObj = jsonArr.getJSONObject(i);
                   String id = jsonArrObj.getString("id");
                   String username = jsonArrObj.getString("name");
                   Log.w("event names are", username.toString());

                } 
```

我收到以下错误：

```
json.JSON.typeMismatch(JSON.java:100) 
```

我搜索了一个解决方案，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:28:36.587

这是您从 graph.facebook.com API 获得的 JSON 字符串的完整解析：

```
ArrayList<HashMap<String,String>> arrahaspmap=new 
                              ArrayList<HashMap<String,String>>();
HashMap<String,String> hashmaptemp;
JSONObject jsonObj;
 try {
    jsonObj = new JSONObject(sdskd);
    JSONArray jsonArr = jsonObj.getJSONArray("data");
    System.out.println("jsonArr jsonArr jsonArr jsonArr :: "+jsonArr.length());

    for(int i = 0; i < jsonArr .length(); i++)
         {
           JSONObject jsonArrObj = jsonArr.getJSONObject(i);
           hashmaptemp=new HashMap<String, String>();
           hashmaptemp.put("id", jsonArrObj.getString("id"));
           hashmaptemp.put("end_time", jsonArrObj.getString("end_time"));
           hashmaptemp.put("location", jsonArrObj.getString("location"));
           hashmaptemp.put("name", jsonArrObj.getString("name"));
           hashmaptemp.put("rsvp_status", jsonArrObj.getString("rsvp_status"));
           arrahaspmap.add(hashmaptemp);
        } 
  JSONObject jsonobjpaging= jsonObj.getJSONObject("paging");
  String strprevious=jsonobjpaging.getString("previous");
  String strnext=jsonobjpaging.getString("next");
  System.out.println("jsonobjpaging previous :: "+strprevious);

  System.out.println("strnext next :: "+strnext);
} catch (JSONException e) {
   // TODO Auto-generated catch block
     e.printStackTrace();
} 
```

# java - 正则表达式在java中删除=之前和之后的空格

> ID：13719776
> 
> 赞同：1
> 
> 时间：2012-12-05T09:20:03.007
> 
> 标签：java, regex

`=`我想要一个可以在java中删除前后空格的正则表达式。

例如考虑一个字符串

```
String str="Name   =  Aniket"; 
```

我希望结果包含一个在 之前或之后不包含空格的字符串`=`。那就是结果应该包含`"Name=Aniket"`. 如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T09:22:32.633

> 我想要一个正则表达式，它可以在java中删除=之前**或之后的空格。**

以下解决方案将删除 a 之前**和**之后的所有空格`=`，就像在您提供的示例中一样。

```
str = str.replaceAll("\\s*=\\s*", "="); 
```

将在 every 之前和之后去掉空格`=`，并保留`=`原来的位置。

# objective-c - GWT 和 MVP 以提供原生 (Android+ObjC) 和 HTML5 移动应用程序？

> ID：13719777
> 
> 赞同：2
> 
> 时间：2012-12-05T09:20:07.643
> 
> 标签：objective-c, gwt, mobile, mvp, playn

因此，GWT 最佳实践鼓励人们使用某种形式的 MVP，理论上这应该允许人们在共享演示者业务逻辑的同时编写不同的本机视图。

这似乎是 GWT 衍生出的 Google 项目[http://code.google.com/p/j2objc/](http://code.google.com/p/j2objc/)的核心，它将代码的非 UI 部分转换为 Objective-C，允许您以本机方式编写其余部分在 Objective-C 中。

所以我的问题是：**如果这个难题的这个真正困难的部分得到解决，那么将 HTML5 移动库（如 MGWT 或 Touch4j [Sencha]）包含到这个 MVP 管道中以拥有最好的世界有多难？**

涉足[http://code.google.com/p/playn/](http://code.google.com/p/playn/)之后，这显然是拥有跨平台构建系统（原生 android & html5 & java &...）的蓝图，但是该项目适用于游戏动态的单屏绘图和事件循环，并且不允许键盘输入和其他典型的移动设备。

很遗憾，如果解决了这么多问题，就不可能加倍努力。这个问题的答案将是实施解决方案的最佳计划，包括选择哪种 MVP 结构以简化各种小部件库（GWTP 与 MVP 2.1）的适应，以及最好的方法是否从PlayN 代码库，并开始破解它.. 有什么陷阱？或者，如果选择了另一条路径，为什么选择那条？为什么它会是最好的？

非常感谢。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:17:31.367

目前尚不清楚您的问题是 - 多平台应用程序开发或 mvp 的评估选项。

您可以评估与 Sencha 和 GWT 一起使用的其他技术

1) mgwt 2) 钛 3) phonegap

也可以参考[——Creating a mobile app using Google App Engine and GWT?](https://stackoverflow.com/questions/13575744/creating-a-mobile-app-using-google-app-engine-and-gwt/13576518#13576518)

注意：您提到的PlayN更多是游戏平台，不适合商业应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:23:54.873

MVP 绝对是可行的……有时您可能会觉得它需要做很多工作，但最终还是有回报的。查看使用 MVP 编写的 Touch4j Kitchen Sink。如果你愿意，你可以用 Cordova 把它带到设备上。代码在 GitHub 上：

[https://github.com/emitrom/touch4jks](https://github.com/emitrom/touch4jks)

该 repo 正在积极开发中（我们正在将自己更新到 Touch4j 4.0），因此它不会用完大门，但至少您可以看到并遵循该模型 :-)

Titanium4j 之于 Appcelerator 的 Titanium 就像 Touch4j 之于 Sencha Touch。您可能也想检查一下。Titanium4j 和 Touch4j 依赖于 GWT。

干杯。

# c# - 如何通过使用多态来避免“如果级联”和类型转换？

> ID：13719780
> 
> 赞同：4
> 
> 时间：2012-12-05T09:20:17.937
> 
> 标签：c#, design-patterns, polymorphism

让我们假设以下类结构具有基类 BC 和 2 个派生类 DC_A 和 DC_B；此外，还有一个类 XY，其方法是 goo()，其参数类型为 BC 和其他方法

```
// base class
public class BC
{
    public virtual void foo();
}

// derived class A
public class DC_A : BC
{
    public override void  foo() {}
}

// derived class B
public class DC_B : BC
{
    public override void  foo() {}
}

public class XY
{
    public void goo(BC o)
    {
        // perfectly fine using polymorphism; no Ifs' no casting, OOP at its best ;-)
        o.foo();

        // but what to do here?
        if ( (o as DC_A) != null )
        {
            doX(o as DC_A);
        }
        else if ((o as DC_B) != null)
        {
            doY(o as DC_B);
        }
    }

    private void doX(DC_A o) {}
    private void doY(DC_B o) {}
} 
```

In '[使用多态传递值对象是一种不好的做法吗？](https://stackoverflow.com/questions/12202561/is-passing-around-value-objects-using-polymorphism-a-bad-practice)' 提出了访问者模式；

If 级联和强制转换的问题被移动（而不是消除）到抽象基类中。

有更好的解决方案来完全避免 if 吗？

我（在此示例中）无法将功能从 doX/doY 移动到类 DC_A/DC_B

非常感谢您的建议。

编辑：这个问题的背景是一个 C# / WinForms 应用程序，它有一个表单来管理一个“测试规则”，该规则由不同的子实体组成，如 TestSpec 以及一组测量类型、测试限制等（我的 DC_A、DC_B 类）所有派生自EntityBase (=BC from above) 表单向控制器发送子实体已更改的事件；简化的 PropertiesChanged(EntityBase o) 控制器调用模型类中的相应方法（上面的类 XY 中的方法 goo），它现在负责执行业务逻辑，不仅保持更改的子实体测试限制，而且例如创建一个新的测试限制修订对象，增加测试规范修订等。

但是这种特殊情况让我想到了关于多态性的更通用或“哲学”的问题；-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:20:05.800

如果您使用的是 .NET 4，则可能存在重载和动态类型，也许这对您来说是一个替代方案。

```
class Program
{
    static void Main(string[] args)
    {
        DC_A dca = new DC_A();
        DC_B dcb = new DC_B();
        XY xy = new XY();
        xy.goo(dca);
        xy.goo(dcb);
    }
}

// base class
public abstract class BC
{
    public abstract void foo();
}

// derived class A
public class DC_A : BC
{
    public override void foo() { }
}

// derived class B
public class DC_B : BC
{
    public override void foo() { }
}

public class XY
{
    //public void goo<T>(T o) where T : BC
    //{
    //    //dynamic dyn = Convert.ChangeType(o, o.GetType());
    //    //dynamic dyn = o;
    //    //gooi(dyn);
    //    gooi((dynamic)o);
    //}

    // http://smellegantcode.wordpress.com/2008/11/04/dynamic-typing-in-c-4-and-duck-generics/
    public void goo<T>(T o) where T : BC
    {
        gooi((dynamic)o);
    }

    private void gooi(DC_A o)
    {
        o.foo();
        doX(o);
    }

    private void gooi(DC_B o)
    {
        o.foo();
        doY(o);
    }

    private void gooi(BC o)
    {
        o.foo();
    }

    private void doX(DC_A o) { }
    private void doY(DC_B o) { }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:28:11.197

我的建议：

1.  公开您的 doX() 和 doY() 方法，以便可以从 DC_A 和 DC_B 的实现中调用它们。
2.  向 BC 添加一个抽象的 Do() 方法。
3.  在 DC_A 中实现 Do() 以调用暴露的 doX() 方法。
4.  在 DC_B 中实现 Do() 以调用公开的 doY() 方法。
5.  在 goo() 中，只需调用 o.Do()。

您可以通过将委托传递给他们将调用的 DC_A 和 DC_B 来进一步解耦，而不是公开 doX() 和 doY()。这在很大程度上取决于使用模式。

但是，如果您可以为派生类中的 Do() 实现添加一些价值，这只会非常有用。如果 Do() 所做的只是调用 doX() 或 doY()，那么这样做并没有真正获得任何好处。

所以我会同意这里的另一张海报说只是做演员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T09:33:59.510

一旦我们解决了几件事，我认为不必担心太多：

*   目前你的投射量超出了你的需要
*   只有一个`if`s 可以是真的，所以你不需要`else`

之后，我们有：

```
 // perfectly fine using polymorphism; no Ifs' no casting, OOP at its best ;-)
    o.foo();

    var dca = o as DC_A;
    if (dca != null)
    {
        doX(dca);
    }

    var dcb = o as DC_B;
    if (dcb != null)
    {
        doY(dcb);
    } 
```

我会说看起来不错。

如果您想更进一步，您可以更改 and 的实现，`doX`以便`doY`它们在通过时立即返回`null`；那么你可以说

```
doX(o as DC_A);
doY(o as DC_B); 
```

# php - 哪些 php/server 设置可能会阻止 simplexml_load_file() 工作？

> ID：13719782
> 
> 赞同：1
> 
> 时间：2012-12-05T09:20:21.613
> 
> 标签：php, simplexml

我`simplexml_load_file()`用来抓取 RSS 提要的内容：

```
$rss = simplexml_load_file('http://www.iolproperty.co.za/roller/news/feed/entries/rss'); 
```

这在我的本地服务器上按预期工作，但在部署到我客户的生产服务器时静默失败，返回空结果。

该`phpinfo()`函数表示启用了 SimpleXML 支持，并且似乎允许我访问远程文件（cURL 函数工作得很好）。我也尝试过加载不同的 RSS 提要。同样，它们在本地工作，但在部署时返回空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:25:22.850

`simplexml_load_file`如果要加载外部文件，需要启用该`allow_url_fopen`指令。`php.ini`Curl 函数不需要这个指令，所以它适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:25:28.900

生产服务器可能会阻止传出 Internet 请求以防止滥用。另一个原因可能是它的 PHP 版本不同或配置中未包含某些模块。使用错误报告查看错误消息

```
error_reporting(E_ALL); 
```

//更新

您还可以检查是否从服务器返回值，例如

```
$c = implode('', file('http://www.iolproperty.co.za/roller/news/feed/entries/rss'));
print $c;
$rss = simplexml_load_string($c); 
```

并检查其他人在说什么，检查是否`allow_url_fopen`启用了选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:27:09.240

您必须启用[allow_url_fopen 选项](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)才能工作。

# java - java swing中的epub文件阅读器

> ID：13719784
> 
> 赞同：2
> 
> 时间：2012-12-05T09:20:26.813
> 
> 标签：java, epub

我正在使用 paul siegmann epub 文件阅读器在 java swing 应用程序中显示 epub 文件。但它有很多问题，比如

1.  CSS 不适用，
2.  第 3 版中的 TOC 问题，
3.  没有内部和外部链接监听器等。

您能否指导我使用其他库或如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T17:16:22.347

为什么不直接解压缩 EPUB（是一个 zip 文件），用浏览器控件显示 XHTML 文件，然后使用 content.opf/toc.ncx 自己创建一个 TOC 树？

# solr - Solr4 的 OutOfMemory

> ID：13719786
> 
> 赞同：5
> 
> 时间：2012-12-05T09:20:44.743
> 
> 标签：solr, lucene

我正在索引我拥有的内容，在将我的 Solr 实例升级到 solr 4 后，我面临一些 OutOfMemories。抛出的异常是：

```
INFO  org.apache.solr.update.UpdateHandler - start commit{flags=0,_version_=0,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false}
ERROR o.a.solr.servlet.SolrDispatchFilter - null:java.lang.RuntimeException: java.lang.OutOfMemoryError: Java heap space
        at org.apache.solr.servlet.SolrDispatchFilter.sendError(SolrDispatchFilter.java:469)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:297)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.OutOfMemoryError: Java heap space 
```

是否有一些已知的错误或我可以测试以摆脱它的东西？

在这次升级中，有两件事发生了变化：

*   solr 版本（从`3.4`到`4.0`）；
*   lucene 匹配版本（从`LUCENE_34`到`LUCENE_40`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:50:12.780

访问日志时似乎内存不足，一目了然。这可能不是特别有意义，当然会出现“内存不足”错误，但值得一试，尤其是在看到有关 SOLR 4.0 日志记录的[投诉之后。](http://grokbase.com/t/lucene/solr-user/12aeerjee2/testing-solr4-first-impressions-and-problems)尤其是在某种形式的索引重建或大量更新负载期间发生这种情况时。

所以尝试禁用更新日志，我相信这可以通过注释掉来完成：

```
<updateLog> 
  <str name="dir">${solr.data.dir:}</str> 
</updateLog> 
```

在 solrconfig.xml 中。

编辑：

另一种（可能更好）的方法，再看一眼，可能是更频繁地提交。更新日志的增长似乎与有大量排队更新等待提交直接相关。

如果您没有启用自动提交，您可能想尝试在配置中添加它，例如：

```
 <autoCommit> 
   <maxTime>15000</maxTime> 
   <openSearcher>false</openSearcher> 
 </autoCommit> 
```

[在这个线程](http://lucene.472066.n3.nabble.com/SOLR-4-Alpha-Out-Of-Mem-Err-td3995033.html)上有很多相关的讨论和建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:41:13.820

我今天遇到了同样的问题，在阅读了@femtoRgon 的建议线程后，我在 solrconfig.xml 中更改了以下内容

```
<autoCommit> 
  <maxTime>15000</maxTime> 
  <openSearcher>false</openSearcher> 
</autoCommit> 
```

到

```
<autoCommit> 
  <maxDocs>15000</maxDocs> 
  <openSearcher>false</openSearcher> 
</autoCommit> 
```

它不再给我那个错误。所以它每 15,000 个文档提交一次。在我的情况下，这种情况足够频繁，不会遇到内存问题。在我的 MacBook Pro 中，索引大约 400 万个包含产品信息的文档（如此短的文档）需要几分钟时间。

# java - 将 Log4J INFO 发送到数据库并将 DEBUG 发送到控制台？

> ID：13719787
> 
> 赞同：0
> 
> 时间：2012-12-05T09:20:43.533
> 
> 标签：java, log4j

我有*com.mycompany.library。**

我希望 DEBUG 进入控制台，INFO 进入 DB。我怎样才能实现它？这是我的 log4j.xml 的一部分

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration debug="false"
    xmlns:log4j="http://jakarta.apache.org/log4j/">
    <!-- APPENDERS LIST -->
    <!-- show log entries on console -->

    <appender name="ConsoleApp" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} [%-5p][%-16.16t][%32.32c] - %m%n" />
        </layout>
    </appender>

    <appender name="DBAppender" class="org.apache.log4j.jdbc.JDBCAppender">
        <param name="URL" value="jdbc:postgresql://localhost:5432/myDB" />
        <param name="driver" value="org.postgresql.Driver" />
        <param name="user" value="postgres" />
        <param name="password" value="password" />
        <param name="sql"
            value="INSERT INTO logs(user_id, dated,logger,lev,message) VALUES('%t', '%d{yyyy-MM-dd HH:mm:ss}','%-50c{3}','%p','%m')" />
    </appender>

    <logger name="com.mycompany">
        <level value="INFO" />
        <appender-ref ref="DBAppender" />
    </logger>

    <logger name="com.mycompany.library">
        <level value="DEBUG" />
        <appender-ref ref="ConsoleApp" />
    </logger>

    <root>
        <priority value="ERROR" />
        <appender-ref ref="DBAppender" />
    </root>

</log4j:configuration> 
```

使用此配置： INFO 和 DEBUG 进入控制台。但是带有双重条目的 INFO 和 DUBUG 也进入 DB。

我希望 DB 事件具有 INFO 级别（和更高级别），而不是 DEBUG。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:38:26.887

您可以在附加程序（而不是记录器）上设置阈值。例如：

```
<appender name="std-out" class="org.apache.log4j.ConsoleAppender"> 
    <layout class="org.apache.log4j.PatternLayout">...</layout>
    <param name="Threshold" value="info"/>
</appender> 
```

见[http://wiki.apache.org/logging-log4j/LogByLevel](http://wiki.apache.org/logging-log4j/LogByLevel)

编辑：您也不必在`com.mycompany`记录器和根记录器上都设置附加程序。这就是为什么您有重复条目的原因，因为它们被视为附加项（因此在级别上`com.mycompany`，您基本上有 2 个 DB 附加程序）。

只需在 root 上设置 DBAppender 并将其从`com.mycompany`记录器中删除。

# java - 如何使用互联网而不是设备或系统获取当前日期和时间？

> ID：13719789
> 
> 赞同：1
> 
> 时间：2012-12-05T09:20:48.700
> 
> 标签：java, android

我想从谷歌或 YouTube 或互联网上的任何地方获取当前日期和时间。我不想获得设备或系统的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T12:31:46.173

我就是这样做的（注意你需要下载和导入[apache 库](http://commons.apache.org/proper/commons-net/download_net.cgi)）：

```
package timeinternet;
import java.net.InetAddress;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;
import org.apache.commons.net.ntp.NTPUDPClient; 
import org.apache.commons.net.ntp.TimeInfo;

/**
 *
 * @author Windows 8 Java
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("jLabel1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(206, Short.MAX_VALUE)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 154, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(40, 40, 40))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(141, 141, 141)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(58, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) throws Exception {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        String str;
        String TIME_SERVER = "time-a.nist.gov";   
NTPUDPClient timeClient = new NTPUDPClient();
InetAddress inetAddress = InetAddress.getByName(TIME_SERVER);
TimeInfo timeInfo = timeClient.getTime(inetAddress);
long returnTime = timeInfo.getMessage().getTransmitTimeStamp().getTime();
//long returnTime = timeInfo.getMessage().getReceiveTimeStamp().getTime();
Date time = new Date(returnTime);
System.out.println("" + time);

 Calendar calendar = Calendar.getInstance();
        TimeZone fromTimeZone = calendar.getTimeZone();
        TimeZone toTimeZone = TimeZone.getTimeZone("CST");

        calendar.setTimeZone(fromTimeZone);
        calendar.add(Calendar.MILLISECOND, fromTimeZone.getRawOffset() * -1);
        if (fromTimeZone.inDaylightTime(calendar.getTime())) {
            calendar.add(Calendar.MILLISECOND, calendar.getTimeZone().getDSTSavings() * -1);
        }

        calendar.add(Calendar.MILLISECOND, toTimeZone.getRawOffset());
        if (toTimeZone.inDaylightTime(calendar.getTime())) {
            calendar.add(Calendar.MILLISECOND, toTimeZone.getDSTSavings());
        }

        System.out.println(calendar.getTime());

str = (time.toString());
//jLabel1.setText("a");
        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JLabel jLabel1;
    // End of variables declaration                   
} 
```

# android - 在 AsyncTask 中显示进度条时，应用程序在方向更改时崩溃

> ID：13719792
> 
> 赞同：1
> 
> 时间：2012-12-05T09:20:59.517
> 
> 标签：android, crash, android-asynctask, screen-orientation

我有一个应用程序，它使用 AsyncTask 从服务器获取 json 文件，因此显示进度条。但是在显示进度条和更改方向时，应用程序**崩溃并显示 VIEW NOT ATTACHED 错误或 HAS LEAKED WINDOW 错误**。

如何摆脱这些错误？否则，应用程序在 AsyncTask 上运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:55:44.450

那么在 AsyncTask 运行时“锁定”屏幕方向怎么样？！

例如：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR); 
```

就在您从服务器获取 JSON 文件之前

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

在你的 AsynTask 执行之后。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T09:28:45.083

从目前可用的有限信息中，我的最佳猜测是：

当您旋转屏幕时，它会根据需要通过 onPause()、onStop() 和 onDestroy() 的正常活动生命周期过程，因此您必须在其中一种方法中关闭 progressDialog

我是怎么做到的：

```
@Override
protected void onPause()
{
    super.onPause();
    if (mProgressDialog != null)
        mProgressDialog.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T10:06:17.343

试试这个为你的活动。虽然不是很干净。它可以帮助

```
<activity android:configChanges="orientation|screenSize" android:name=".activity.MyActivity" ></activity> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T20:24:49.583

试试我整理的这个小技巧...运行它并在尝试各种屏幕更改组合并按下硬件返回键时观察 logcat 信息。然后尝试下面评论中提到的调整并进行更多修改。这可以让您避免 android:configChanges="orientation|screenSize" 这不是可取的。

这应该使用最小的清单和 layout.xml 文件按原样构建。如果我以某种方式搞砸了，请发表评论。

```
// ********************************************************************
// *** AsynchHack - allows for multiple screen orientation changes, ***
// ***    multiple asynch tasks are started / stopped,progress      ***
// ***    dialogs handled gracefully (no memory leaks / etc).       ***
// ***                                                              ***
// ***    Remove the wrapping comments in the onCreate() function   ***
// ***    to restrict processing to a single asynch instantiation   ***
// ***    screen rotation will dismiss the progress meter, but not  ***
// ***    the task                                                  ***
// ***                                                              ***
// ***    View the logcat to understand the timing of events and    ***
// ***    their interactions                                        ***
// ***                                                              ***
// ********************************************************************

package com.example.AsynchHack;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import java.util.List;

// *** Main activity

public class AsynchHack extends Activity {

    final static String debugClass = "AsynchHack";
    ProgressDialog mProgressDialog;

    // *** standard onCreate()

    public void onCreate(Bundle aSavedInstanceState) {

        super.onCreate(aSavedInstanceState);
        Log.d(debugClass, "onCreate(" + this + ")");
        setContentView(R.layout.layout);

        // As-is, this allows for multiple starts of asynch tasks
        //if (aSavedInstanceState == null) {
        mProgressDialog = new ProgressDialog(this);
        (new AsynchStartup()).execute();
        //}

    }

    // *** demo Asynch task

    private class AsynchStartup extends AsyncTask<Void, Void, Void> {

        protected void onPreExecute() {
            Log.d(debugClass,
                  "--- AsynchStartup() onPreExecute  (" + this + ")");
            mProgressDialog.setMessage("Loading please wait..");
            mProgressDialog.show();
        }

        protected Void doInBackground(Void... aInput) {
            Log.d(debugClass,
                  "--- AsynchStartup() doInBackground(" +
                  this + ") *starts*");

            // simulate lengthy processing
            try {
                Thread.sleep(5000);
            }
            catch (InterruptedException aException) { }

            Log.d(debugClass,
                  "--- AsynchStartup() doInBackground(" +
                  this + ") *finishes*");
            return null;
        }

        protected void onProgressUpdate(Void aProgress){
        }

        protected void onPostExecute(Void aOutput) {
            Log.d(debugClass,
                  "--- AsynchStartup() onPostExecute (" + this + ")");

            if (mProgressDialog != null) {
                Log.d(debugClass,
                      "--- AsynchStartup() onPostExecute " +
                      "(Dismissing progress meter)");
                mProgressDialog.dismiss();
                mProgressDialog = null;
            }
            else {
                Log.d(debugClass,
                      "--- AsynchStartup() onPostExecute " +
                      "(Not required to dismiss progress meter)");
            }
        }

    }

    // *** standard onDestroy()

    public void onDestroy() {

        super.onDestroy();
        Log.d(debugClass, "onDestroy(" + this + ")");

        if (mProgressDialog != null) {
            Log.d(debugClass,
                 "onDestroy(Dismissing progress meter)");
            mProgressDialog.dismiss();
            mProgressDialog = null;
        }
        else {
            Log.d(debugClass,
                  "onDestroy(Not required to dismiss progress meter)");
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T09:27:32.110

尝试使用这个

```
 dialog.setCancelable(false); 
```

# c# - 如何使用 C# 在 ASP.NET 中发送 html 邮件？

> ID：13719805
> 
> 赞同：0
> 
> 时间：2012-12-05T09:21:53.710
> 
> 标签：c#, asp.net, html, email, smtp

我有一个 ASP.NET 应用程序，可以将数据添加到数据库并从该数据库中获取数据。此应用程序用于创建与我们网络的访客连接。如果将用户添加到数据库并且 Radius 服务器允许用户收到包含其登录数据的电子邮件。用户名和密码。我想做一个html邮件。但我不知道如何在 ASP.NET 中做到这一点，所以我阅读了一些关于它的教程，我发现了这段代码：

[http://www.codeproject.com/Articles/12182/ASP-NET-Sending-mail-using-SMTP-in-HTML-format-us](http://www.codeproject.com/Articles/12182/ASP-NET-Sending-mail-using-SMTP-in-HTML-format-us)

这是我的代码：

```
 MailMessage mail = new MailMessage();
                mail.To = "<here is my company email>";
                mail.From = "test@domain.de";
                mail.BodyFormat = MailFormat.Html;
                mail.Subject = "testheader";
                mail.Body =
                    "<html><body><Table><tr><td>Hi,</td></tr><tr><td>Details of the Statistics :</td></tr></Table></body></html><html><body>" +
                    "sometext" +
                    "</body></html><html><body><Table><tr><td> </td></tr><tr><td>NOTE: This is an automated mail. Please, do not reply.</td></tr>" +
                    "<tr><td>*Green coloured rows indicates temporary demos</td></tr>" +
                    "<tr><td>**All statistics are based on the page naming conventions Eg., 22_10_2005_</td></tr>" +
                    "<tr><td> </td></tr><tr><td>Regards,</td></tr><tr><td>some text,</td></tr><tr><td>some text,</td></tr>" +
                    "<tr><td> Some text </td></tr></table></body></html>";

                SmtpMail.SmtpServer = "<smtp ip>";
                SmtpMail.Send(mail); 
```

我尝试这个并得到错误：

```
The server rejected the sender address. The server response was: 530 5.7.1 Client not authenticated 
```

Ip 是正确的，但我必须为经过身份验证的用户做些什么……我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:24:27.297

您必须在文件中配置[SMTP 服务器 mailSettings](http://msdn.microsoft.com/en-us/library/ms164240.aspx)`Web.config`：

```
 <system.net >
    <mailSettings>
      <smtp deliveryMethod="Network" from="someaddress@classifiedspak.com">
        <network
        host="mail.classifiedspak.com"
        userName="someaddress@classifiedspak.com "
        password="*************"
        port="25" />
      </smtp>
    </mailSettings>
  </system.net> 
```

# python - 从 python 打开交互式 ssh shell 时出错

> ID：13719808
> 
> 赞同：1
> 
> 时间：2012-12-05T09:22:01.203
> 
> 标签：python, ssh, subprocess, popen, fabric

我正在尝试通过结构打开一个交互式 ssh shell。

要求：

*   使用连接字符串中的结构主机远程
*   在当前终端中打开完全交互式的 shell
*   适用于 osx 和 ubuntu
*   无需在 fabric/python 和远程之间进行数据传输。所以织物任务可以在后台结束。

至今：

fabfile.py：

```
def test_ssh():
    from subprocess import Popen
    Popen('ssh user@1.2.3.4 -i "bla.pem"', shell=True) 
```

在终端：

```
localprompt$ fab test_ssh
localprompt$ tcsetattr: Input/output error

[remote ubuntu welcome here]

remoteprompt$ | 
```

然后，如果我尝试在远程提示符上输入命令，它将在本地执行并返回到本地提示符。有谁知道解决方案？

注意：我知道 fabric `open_shell`，但这对我不起作用，因为 stdout 落后，导致它无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:58:18.263

稍微修改一下就可以了：

```
def test_ssh():
    from subprocess import call
    call('ssh user@1.2.3.4 -i "bla.pem"', shell=True) 
```

正如这个[问题](https://stackoverflow.com/questions/5997387/perls-backticks-system-giving-tcsetattr-input-output-error)的答案所暗示的，错误表明错误来自 ssh 无法连接到后台进程的标准输入/输出。

织物任务不会在`call`后台结束，但只要它不干扰我的标准输入/输出，我就可以了。

# ios5 - 如何使用配置 MIME 类型设置 cocoahttpserver

> ID：13719810
> 
> 赞同：4
> 
> 时间：2012-12-05T09:22:08.780
> 
> 标签：ios5, ios6, mime-types, profile, cocoahttpserver

这个问题需要很多关于苹果空中播放配置文件的背景知识。

首先，我使用 cocoahttpserver 在 iOS 应用程序中设置 Web 服务器，并希望提供对 .mobileconfig 的访问权限，但这需要将 MIME 类型设置为 application/x-apple-aspen-config。对于 PHP 设置，这是[答案](https://stackoverflow.com/questions/9426408/open-a-configuration-profile-through-app)

但是我在 iOS 应用程序中使用 cocoahttpserver 设置 web 服务器，我不熟悉这样的配置。所以在这里提问以寻求专业建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:20:18.763

最好的方法是继承 HTTPResponse 类之一并覆盖 httpHeaders 方法。

看看这个问题，看看它是如何完成的： [Change Download File Name in Cocoahttpserver](https://stackoverflow.com/questions/1780368/change-download-file-name-in-cocoahttpserver)

该问题的唯一不同之处在于您必须设置“Content-Type”标头而不是“Content-Disposition”

# c++ - Visual Studio 2010 中的 Qt 项目

> ID：13719817
> 
> 赞同：0
> 
> 时间：2012-12-05T09:23:02.587
> 
> 标签：c++, visual-studio-2010, qt

谁能告诉我应该在哪里声明我的 GUI 元素，例如`QPushbutton`，在 VS 2010 上的 Qt 项目中：
假设项目名称是：Qtapp。所以我会得到：

```
 Qtapp.h
  Qtapp.cpp
  main.cpp
  ui_qtapp 
```

我应该在哪里声明我的变量和 SLOT，我应该在哪里将它们相互连接。提前致谢

# java - Java 整数运算

> ID：13719818
> 
> 赞同：1
> 
> 时间：2012-12-05T09:23:02.547
> 
> 标签：java, int, concatenation

我的`int`价值观：

```
 int a= 0x02; int b= 1; int c= 2; int d = 0; int e = 0; int f = 0; int g= 1; 
```

如何连接这些整数并获得单个`int`值？并且结果`int`值应该有前 8 位“a”，其余 4 位？

就像是 ：`2120001`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:26:03.597

```
String yourString = "" + a + b + c + d + e + f + g;
int finalInt = Integer.parseInt(yourString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:36:20.240

```
int a= 0x02; int b= 1; int c= 2; int d = 0; int e = 0; int f = 0; int g= 1;
int res=((a&0xff)<<24)|((b&0xf)<<20)|((c&0xf)<<16)
       |((d&0xf)<<12)|((e&0xf)<<8)|((f&0xf)<<4)|((g&0xf));
System.out.println(Integer.toHexString(res)); 
```

产量： `2120001`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:32:25.077

***忘记***

感谢@MichaelArdan

```
String yourString = "" + b + c + d + e + f + g;
int finalInt = Integer.parseInt(yourString, 4) | (a << (6*2)); 
```

它将 bcdefg 解释为以 4 为底的数字，并将 a 移到末尾。

* * *

***（误读问题）***

```
int n = a;
int[] v = new int[] { b, c, d, e, f, g };
int p = 8;
for (int k : v) {
     n |= (k & 0xF) << p;
     p += 4;
}
System.out.println(n); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:24:14.003

怎么样

```
String s = "" + a + b + c + d + e + f + g;
int concat = Integer.parseInt(s); 
```

并阅读[Java 类型转换和促销](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T09:31:08.877

您可以通过以下方式实现此目的

```
public static void main(String[] args) throws UnsupportedEncodingException {
        int a = 5;
        int b = 3;
        int bLength = Integer.toBinaryString(b).length();
        System.out.println("a = "  + Integer.toBinaryString(a));
        System.out.println("b = "  + Integer.toBinaryString(b));
        int c = (a << bLength) | b;

        //System.out.println(c);
        System.out.println("c = "  + Integer.toBinaryString(c));

    } 
```

**输出**

```
a = 101
b = 11
c = 10111 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T09:33:44.717

我认为你想要的是这样的：

```
public static void main(String[] args)
    {
        int a=2;
        int b=1;
        int c=2;
        int d=0;
        int e=0;
        int f=0;
        int g=1;

        System.out.println(g+(f << 4)+(e << 8)+(d << 12)+(c << 16)+(b << 20)+(a << 28));
    } 
```

结果是 538050561，即十六进制的 20120001。

另请参阅[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)了解按位移位运算符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T23:19:48.900

要产生 212001 你需要

```
((((((a*10)+b)*10+c)*10+d)*10+e)*10+f)*10+g 
```

它向您展示了正在发生的事情，或者更简单地说

```
a*1000000+b*100000+c*10000+d*1000+e*100+f*10+g 
```

然而，这与您关于位宽的说法相矛盾。

我得出的结论是，您真正想要的是 0x212001，它由

```
(((((((((((a << 4)+b) << 4)+c) << 4)+d) << 4)+e) << 4)+f) << 4)+g 
```

或更简单地说

> (a << 24)|(b << 20)|(c << 16)|(d << 12)|(e << 8)|(f << 8)|g

# php - 在 PHP 中使用正则表达式进行电子邮件验证

> ID：13719821
> 
> 赞同：33
> 
> 时间：2012-12-05T09:23:20.320
> 
> 标签：php, regex, email

我对正则表达式非常陌生。我正在用 PHP 开发一个项目，我需要验证电子邮件地址。在这个网站和谷歌搜索后，我发现下面的正则表达式说它应该工作得最好。

```
if (preg_match("/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/iD", strtolower($mail_address))) {
    echo "valid email";
} 
```

但是当我使用它时，我得到错误说，

```
"Warning: preg_match(): No ending delimiter '/' found" 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-05T09:25:42.130

使用它而不是正则表达式：

```
if(filter_var($email, FILTER_VALIDATE_EMAIL)) {
     //Valid email!
} 
```

[不建议](https://stackoverflow.com/a/201378/491494)使用正则表达式来验证电子邮件地址，因为它肯定[不漂亮](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)，特别是如果您不想排除拥有根据 RFC 822 语法正确的有效电子邮件地址的人。

[http://www.php.net/filter_var](http://www.php.net/filter_var)是您最好的选择。

一个尝试根据 RFC 822 语法验证电子邮件地址的正则表达式的疯狂示例：

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T09:31:59.467

看起来你真的不需要更大的代码来验证电子邮件。

```
<?php
$email = "abc123@sdsd.com"; 
$regex = '/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/'; 
if (preg_match($regex, $email)) {
 echo $email . " is a valid email. We can accept it.";
} else { 
 echo $email . " is an invalid email. Please try again.";
}           
?> 
```

试试这个，让我知道

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-05T09:26:26.720

您应该使用该函数`filter_vars()`来验证您的输入，而不是您自己的正则表达式。

例子：

```
filter_var('bob@example.com', FILTER_VALIDATE_EMAIL) 
```

文档中的更多信息：http: [//php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-05T09:25:07.760

试试这个正则表达式它会正常工作

```
/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/ 
```

或 php 过滤器[`filter_var`](http://in1.php.net/filter_var)

```
 filter_var($email, FILTER_VALIDATE_EMAIL) 
```

喜欢

```
if(filter_var($email, FILTER_VALIDATE_EMAIL)) {
     //yup its valid email
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T09:30:01.300

奇怪的是我刚刚尝试了你的代码对我很有效？！尝试使用字符“....”而不是“....”来关闭任何链

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-05T09:25:58.497

删除`iD`正则表达式末尾的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-12T14:05:29.553

我来这里是为了寻找解决方案，Wayne Whitty 提出的答案确实可以完成这项工作。

顺便说一句，我认为值得一提的是该`filter_var`功能不符合 RFC5321。尽管文档没有说是，但某些 RFC5321 有效的电子邮件地址将被此功能标记为无效，例如：

*   localpart.ending.with.dot.@example.com
*   （评论）localpart@example.com
*   “这是 v@lid！”@example.com
*   “非常不寻常”@example.com
*   邮箱@com
*   管理员@mailserver1
*   "()<>[]:,;@\"\!#$%&'*+-/=?^_`{}| ~.a"@example.org
*   " "@example.org

正如此评论所提出的[http://php.net/manual/pt_BR/function.filter-var.php#112492](http://php.net/manual/pt_BR/function.filter-var.php#112492)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-12T07:14:54.347

使用这些正则表达式来执行更彻底的验证。例如，它可以防止电子邮件地址中的相邻句点（如 aaa..bbb@example..com）根据 RFC 822 是无效的。

```
function isValidEmail($email)
{
    return preg_match('/\A[a-z0-9]+([-._][a-z0-9]+)*@([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,4}\z/', $email)
        && preg_match('/^(?=.{1,64}@.{4,64}$)(?=.{6,100}$).*/', $email);
} 
```

请参阅[在 PHP 中使用正则表达式验证电子邮件地址](http://seaf-email.blogspot.com/p/code.html#php)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-12T10:06:26.823

There more than one ways to check if an e-mail is valid.

One simple way is to use this function:

```
function validate($email) {
    return preg_match("/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/", $email);    
} 
```

It is from a code snippet found here: [Basic Email Validation in PHP](http://www.codeslices.net/snippets/basic-email-validation-in-php)

Although this implementation would work most of the time it may allow some wrong emails. The following implementation ahould be 100% accurate but is also quite complex:

```
function validate($email) {

    $isValid = true;
    $atIndex = strrpos($email, "@");

    if (is_bool($atIndex) && !$atIndex) {
        $isValid = false;
    } else {
        $domain = substr($email, $atIndex + 1);
        $local = substr($email, 0, $atIndex);
        $localLen = strlen($local);
        $domainLen = strlen($domain);

        if ($localLen < 1 || $localLen > 64) {
            $isValid = false;
        } else if ($domainLen < 1 || $domainLen > 255) {
            $isValid = false;
        } else if ($local[0] == '.' || $local[$localLen - 1] == '.') {
            $isValid = false;
        } else if (preg_match('/\\.\\./', $local)) {
            $isValid = false;
        } else if (!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain)) {
            $isValid = false;
        } else if (preg_match('/\\.\\./', $domain)) {
            $isValid = false;
        } else if (!preg_match('/^(\\\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/', str_replace("\\\\", "", $local))) {
            if (!preg_match('/^"(\\\\"|[^"])+"$/', str_replace("\\\\", "", $local))) {
                $isValid = false;
            }
        }

        if ($isValid && !(checkdnsrr($domain, "MX") || checkdnsrr($domain ,"A"))) {
            $isValid = false;
        }
    }

    return $isValid;
} 
```

This code is from snippet found here: [Strict Email Validation in PHP](http://www.codeslices.net/snippets/strict-email-validation-in-php)

Hope this helps!

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-25T11:10:15.003

```
/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-09-16T17:48:21.973

电子邮件验证正则表达式（带有子域的域）

```
^((([a-z0-9]+[\-]{0,1})+[a-z0-9]+?\.)+[a-z0-9][a-z0-9|\-]+[a-z0-9])@([a-z0-9]+[\-|\.]{0,1}[a-z0-9]+)+(.[a-z0-9]{2,})+$ 
```

示例测试[https://regex101.com/r/w5VBdf/20](https://regex101.com/r/w5VBdf/20)

带有子域的域

```
^([a-z0-9]+[\.|\-]{0,1}[a-z0-9](.[a-z0-9]{2,})+)$ 
```

[https://regex101.com/r/4Un8Tz/2](https://regex101.com/r/4Un8Tz/2)

电子邮件用户名

```
^([a-z0-9]+[\.|\-]{0,1}[a-z0-9]{1,})+@$ 
```

[https://regex101.com/r/4Un8Tz/6](https://regex101.com/r/4Un8Tz/6)

# c# - 在类中使用数组

> ID：13719825
> 
> 赞同：-3
> 
> 时间：2012-12-05T09:23:39.803
> 
> 标签：c#, arrays, class, initialization

我正在尝试初始化一个类内的数组。我收到“对象引用未设置为对象的实例”错误。

这是我的NPC类：

```
namespace EngineTest
{
    public class npcs
    {
      public int tileX, tileY, layerZ;
      public int textureX, textureY;
      public string ID;
      public string state;
      public int direction; //0 = south, 1= west, 2 = north, 3= east
      public int moveLimitTimer;
      public int animationCurrentFrame;
      public int animationResetTimer;

      public pathPotentials[, ,] pathPotential; (this is the array)
    }
} 
```

这是 pathPotentials 类

```
namespace EngineTest
{

public class npcs
{
    public int tileX, tileY, layerZ;
    public int textureX, textureY;
    public string ID;
    public string state;
    public int direction; //0 = south, 1= west, 2 = north, 3= east
    public int moveLimitTimer;
    public int animationCurrentFrame;
    public int animationResetTimer;

    public pathPotentials[, ,] pathPotential = new pathPotentials[Program.newMapWidth, Program.newMapHeight, Program.newMapLayers];
}
} 
```

我试图用这段代码初始化它：

```
 for (z = 0; z < Program.newMapLayers; z++)
        {
            for (x = 0; x < Program.newMapWidth; x++)
            {
                for (y = 0; y < Program.newMapHeight; y++)
                {
                    if(Program.tileNpcs[x, y, z].npcs.Count > 0)
                    {
                        Program.tileNpcs[x, y, z].npcs[0].pathPotential[Program.newMapWidth, Program.newMapHeight, Program.newMapLayers] = new pathPotentials();
                    }
                }
            }
        } 
```

但它不起作用。我该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:30:26.280

代码一定会给你错误，因为在初始化之前你引用了一个特定的数组项。而不是你的陈述：

```
Program.tileNpcs[x, y, z].npcs[i].pathPotential[Program.newMapWidth, Program.newMapHeight, Program.newMapLayers] = new pathPotentials(); 
```

你应该这样：

```
Program.tileNpcs[x, y, z].npcs[i].pathPotential = new pathPotentials[Program.newMapWidth, Program.newMapHeight, Program.newMapLayers]; 
```

希望有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:58:06.073

在 C#（以及许多此类编程语言）中，数组具有固定长度。在 C# 中，数组存储为具有一组值的对象。分配给数组中的元素就像更改对象的字段 - 您需要首先明确定义数组。如果不显式定义，C# 不知道要为数组分配多少内存，这会导致在构造内存时出现很多问题。

您声明了一个 3 维数组，但没有定义它：

```
public pathPotentials[, ,] pathPotential; 
```

你需要的是这样的：

```
public pathPotentials[, ,] pathPotential = new pathPotentials[Program.newMapWidth, Program.newMapHeight, Program.newMapLayers]; 
```

这会准确地告诉 C# 使您的数组有多大。

但是，这不允许您在声明数组后更改其大小（至少无需通过重新定义来清除它）。如果您需要在运行时更改大小，则 C# 提供了一个类 List，它接受一个通用参数（在这种情况下，对于 3D 网格来说，它相当复杂）。你可以用这样的列表声明这样的东西：

```
public List<List<List<pathPotentials>>> pathPotential = new List<List<List<pathPotentials>>>(); 
```

这为您提供了列表列表的嵌套列表。最里面的列表可能是 z，最外面的 x。要从中获取数据，您可以指定一个 inex，但您不能再使用 [x,y,z] 作为符号，而必须使用 [x][y][z]，因为您正在访问列表以获取另一个列表项，然后访问该列表以获取第二个列表项，然后访问该列表项以获取您的对象。

希望这可以帮助您了解哪里出了问题、为什么您的代码不起作用以及如何修复它。

# symfony - 用零而不是 null 保存不存在的学说 2 关系

> ID：13719829
> 
> 赞同：0
> 
> 时间：2012-12-05T09:23:57.080
> 
> 标签：symfony, doctrine-orm, legacy

在遗留系统中，我们有一个数据库，它使用 0 而不是 null 保存不存在的关系。如何获得教义以在相关列中使用 0 而不是 null 来保存父行？

## 例子：

**评论表**

```
------------------------------------
| id | user_id | comment           |
------------------------------------
| 1    null      this is a comment |
| 2    1         another comment   |
------------------------------------ 
```

如果我有该评论表的实体，如果没有此评论的用户，我希望它在第 1 行中保存 user_id = 0。我怎样才能做到这一点？

请考虑，我需要将它用于遗留系统并更改数据库模式，以便该列中的 null 是可能的，这是没有选择的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:36:43.243

你最好打赌，所以在你的控制器中持久化之前手动将 0 插入到 user_id 中。

```
$comment->setUserId(0);
$em->persist($comment); 
```

# asp.net - 为什么在 asp .net 中使用符号 <% %>？

> ID：13719831
> 
> 赞同：-7
> 
> 时间：2012-12-05T09:23:59.883
> 
> 标签：asp.net, asp-classic

我有一条线：

```
<asp:HyperLink ID="lblID" runat="server" CssClass="tt" 
               Text='<%# Eval("theatername") %>'></asp:HyperLink> 
```

谁能解释一下，这是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:28:05.433

这是**`Data Binding Expression Syntax`**

它用于`.aspx`页面中的数据绑定。

`<%# %>`标签指示来自特定数据源的信息在`.aspx`页面中的放置位置。

您可以将其用于：

1.  表达式 `<%# ( customer.First Name %>`

2.  收藏 `<%# myArray %>`

3.  方法调用 `<%# GetBalance(custID) %>`

参考这里：[数据绑定要领](http://support.microsoft.com/kb/307860#1a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:28:11.533

Asp.net 用于`<%%>`在要处理的 html 页面中输入一些东西，

例子 ：

`<%DateTime.Now%>` 当您运行 aspx 页面时，它将像 5/12/2012 12:00:00 pm 一样处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:28:45.213

这些用于 HTML 编码。检查下面的链接

[参考链接](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)/点击查看

# cruisecontrol.net - Cruisecontrol.net 与 UCM Clearcase - 如何？

> ID：13719837
> 
> 赞同：1
> 
> 时间：2012-12-05T09:24:15.590
> 
> 标签：cruisecontrol.net, clearcase-ucm

我第一次尝试为 UCM Clearcase 配置 Cruisecontrol.net。以下是 ccnet.config 文件中的 sourceControl 标签：

```
<sourcecontrol type="clearCase">
            <branch>123_India_Release</branch>  
            <autoGetSource>true</autoGetSource>
            <viewName>admin_123_CRUISE</viewName>
            <viewPath>$(ViewDirectory)</viewPath>
            <useLabel>false</useLabel>
            <useBaseline>false</useBaseline>
            <executable>cleartool.exe</executable>
        </sourcecontrol> 
```

我经常收到以下错误：

> ThoughtWorks.CruiseControl.Core.CruiseControlException：源代码控制操作失败：cleartool：错误：不是vob中的对象：“视图路径”

当我使用以下参数从任意目录运行 cleartool 时：

> cleartool.exe lshist -r -nco -branch "123_India_Release" -since 05-Dec-2012.14:38:18 -fmt

我犯了同样的错误。但是，如果我在运行 cleartool 之前将工作目录更改为 $(ViewDirectory)，它运行良好。

我应该如何让 Cruisecontrol.net 从 $(ViewDirectory) 运行 cleartool.exe？我之前已经尝试过添加`<workingDirectory>$(ViewDirectory)</workingDirectory>`标签，`<executable>cleartool.exe</executable>`但没有奏效。

任何帮助，将不胜感激。

**编辑1：**

作为一种解决方法，我做了以下事情：

```
 <exec>
                <executable>cleartool.exe</executable>
                <baseDirectory>d:\Workspace\123_India_Release\VOB</baseDirectory>
                <buildArgs>update -force</buildArgs>
                <buildTimeoutSeconds>6000</buildTimeoutSeconds>
            </exec> 
```

我已将此添加到**任务**标签中。我已经配置了一个每小时触发器，它执行以下操作：

> 1) 更新快照视图
> 
> 2）构建任务标签中提到的VS 2010解决方案。

限制是：

> 1) 触发器是每小时一次。我希望它是一个基于提交的触发器。
> 
> 2）这是一种解决方法

**编辑2：**

进一步的实验表明**ccnet.exe**工作正常。它做了所有需要的事情。该问题是由服务**ccservice**引起的。

我暂时停止了**ccservice**并启动了 ccnet.exe。我打算让它继续运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:38:35.820

View 目录是不够的：您必须指定一个 vob。

参见例如：

*   " [clearfsimport: Error: Not an object in a vob: "\".](http://www-01.ibm.com/support/docview.wss?uid=swg21214748) " （作为该错误消息的说明）
*   [此线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=196843)（或[此](http://markmail.org/message/3tvibsq7ep5th2zk#query%3a+page:1+mid%3awkemk356vddegexf+state%3aresults)线程）：“您必须明确指定 VOB 以检查修改集”

路径应如下所示：

```
<viewPath>Drive:\path\to\view\vobname</viewPath> 
```

如果您`$(ViewDirectory)`已经引用`Drive:\path\to\view`，那么您可以使用：

```
<viewPath>$(ViewDirectory)\vobname</viewPath> 
```

# virtuemart - 为什么 DIBS 会说“No paytype(s)！缺少测试参数？”

> ID：13719841
> 
> 赞同：3
> 
> 时间：2012-12-05T09:24:32.303
> 
> 标签：virtuemart, dibs

我不确定这是否最近开始发生，但是当使用来自 Joomla 1.5 和 VirtueMart 1.1.9 的[DIBS 支付服务](http://www.dibspayment.com/)时，DIBS 总是说“没有支付类型！缺少测试参数？” *不*处于测试模式时。我们是否指定支付类型并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:53:38.943

[DIBS 自己的常见问题解答](http://tech.dibs.dk/faq/)说：

> 此错误消息通常是由两个不同的问题引起的：
> 
> 1.  您的商家在 DIBS 处于测试模式，但交易正在发送到 DIBS，但没有测试参数[http://tech.dibs.dk/10_step_guide/your_own_test/](http://tech.dibs.dk/10_step_guide/your_own_test/)
> 2.  您的商家在 DIBS 未处于测试模式，但正在使用测试参数将交易发送到 DIBS。

# php - Zend 框架中的自定义路由

> ID：13719846
> 
> 赞同：2
> 
> 时间：2012-12-05T09:24:42.290
> 
> 标签：php, zend-framework, routing

我是 Zend 框架的新手并使用框架 2.0。我需要对 PHP Zend 框架中的路由进行某些澄清。1）Bootstrap.php在路由中的作用是什么。2) 我们如何使用 index.php 进行路由。3）实现自定义路由需要写什么代码。

另外，我编写了某些代码，但没有得到想要的输出。

引导程序.php：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{   
    protected function _initRouter()
    {
    $frontController = Zend_Controller_Front::getInstance();
        $router = $frontController->getRouter();
        $route = new Zend_Controller_Router_Route(':userid',
                                            array('controller' => 'user',              'action'=>     'index', 'userid'=>null));
        $router->addRoute('default', $route);   
    }   
} 
```

索引.php

```
 error_reporting(E_ALL);
 ini_set('display_errors', 1);

 ini_set('display_errors', true);

 //Define Base Url
 define("BASEURL","http://".$_SERVER['SERVER_NAME']."/sampleapp/public/");

 // directory setup and class loading
 set_include_path('.' . PATH_SEPARATOR . 'library/'
     . PATH_SEPARATOR . 'application/models'
     . PATH_SEPARATOR . 'application/config'
     . PATH_SEPARATOR . get_include_path()
 );

 include ('Zend/Loader/Autoloader.php');
 $loader = Zend_Loader_Autoloader::getInstance();

 // setup controller
 $frontController = Zend_Controller_Front::getInstance();
 $frontController->throwExceptions(true);
 $frontController->setControllerDirectory('application/controllers');

 // run!
 $frontController->dispatch(); 
```

我正在尝试获取路线值，例如我的网址是：

```
localhost:8080/sampleapp/user/index/1. 
```

我应该如何从路线中获得 1。这里 1 是用户 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:23:43.033

我建议执行以下操作：

*   在 index.php 上你不应该碰任何东西。创建项目时保留 Zend 默认值

*   在*projectHomeDirectory* /application/Bootstrap.php 上包括：

    ```
    protected function _initRoutes()
    {
            $router = Zend_Controller_Front::getInstance()->getRouter();
            include APPLICATION_PATH . "/configs/routes.php";
    } 
    ```

*   *在projectHomeDirectory* /application/configs/下创建一个 routes.php 文件，并在其中添加您想要的所有路由，例如：

    ```
    $router->addRoute('sample-module/user', new Zend_Controller_Router_Route(
            'user/:action/:id/',
            array('module' => 'sample', 'controller' => 'user', 'id'=>'\w+')
    )); 
    ```

当然，您随后需要创建 UserController、User 模型、示例模块和视图。

这些是一些有用的链接：

[Zend 路由，抛出资源未找到](https://stackoverflow.com/questions/2466822/zend-routing-throws-resource-not-found)

[http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.standard](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.standard)

# .net - 为什么我在 Powershell 中看不到作为导入模块的导入模块一部分的函数？

> ID：13719848
> 
> 赞同：0
> 
> 时间：2012-12-05T09:24:51.537
> 
> 标签：.net, powershell, scope, import-module

让我用一个简单的例子来解释：

```
# TestModule.psm1 content 
# which is D:\Projects\(...)\MyProject\\bin\Debug\Modules directory :
function TestMe
{
 Write-Output "TestMe is called!"
}

# SetUpTools.psm1 content 
# which is D:\Projects\(...)\MyProject\\bin\Debug directory :
function Import-AllModulesInside ([string]$path = $(throw "You must specify a path where to import the contents"))
{

    if ( $(Test-Path $path)-eq $false){
        throw "The path to use for importing modules is not valid: $path"}

        # Import all modules in the specified path
        dir ($path | where {!$_.PsIsContainer} )| %{
        $moduleName = $($path + "\" + $_.name)

        import-module "$moduleName"
        Write-Output "importing $moduleName"

        }
}

#MainScript.ps1 content which is D:\Projects\(...)\MyProject\\bin\Debug directory :

# Config values are loaded in the begining
# (......)

# Import SetUpTools.psm1:

 Import-Module SetUpTools.psm1 

# Gets the modules directory's full path which I have loaded before..
$modulesPath = $(Get-ScriptDirectory) + $appSettings["ModulesFullPath"]

Write-Output ($modulesPath) # which writes : D:\Projects\(...)\MyProject\\bin\Debug\Modules

Import-AllModulesInside $modulesPath #Calls the method in SetUpTools.psm1

# I expect TestModule function to be available now:

TestMe  # But PowerShell does not recognize this function as I have not imported it in the main script. 
```

但是当我将 Import-AllModulesInside 函数删除到主脚本时，TestMe 是可调用的。

我希望函数 Import-AllModulesInside 成为我的设置工具的一部分。

**问题：** 如何使导入模块导入的导入模块可评估到主脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:37:30.643

import-module -scope global 应该可以解决问题:)

对于 PS V2 il 将是 import-module -global ( [http://msdn.microsoft.com/en-us/library/windows/desktop/dd819454.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd819454.aspx) )

# java - JavaFX应用黑屏

> ID：13719849
> 
> 赞同：4
> 
> 时间：2012-12-05T09:24:51.633
> 
> 标签：java, javafx-2, java-7

我的系统上的 JavaFX 应用程序有问题。当我运行此类应用程序时，我看到的只是带有深色背景的应用程序窗口。我尝试运行我自己的应用程序、Netbeans 示例和 Scene Builder。也许原因是我的操作系统 - 它是 Windows 7 Starter。JavaFX 2.2 版，Oracle JDK 1.7.09 版。有人可以解释这种行为并建议如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:46:50.300

1.  尝试更新您的视频驱动程序。

2.  尝试在软件模式下运行 JavaFX `java -Dprism.order=j2d -jar Ensemble.jar`：.

如果它有效，那么驱动程序或视频卡的兼容性是一个问题。在这种情况下，请使用您的操作系统、显卡型号和驱动程序版本向[http://javafx-jira.kenai.com提交问题。](http://javafx-jira.kenai.com)

# java - 存储库上的交易

> ID：13719860
> 
> 赞同：1
> 
> 时间：2012-12-05T09:25:24.633
> 
> 标签：java, spring-mvc, architecture, domain-driven-design

我的控制器看起来像这样：

```
@RequestMapping(value = "/User", method = RequestMethod.GET)
public @ResponseBody String getUser(@RequestParam long id) {
User user = userService.get(id);
return user.name;
} 
```

服务看起来像这样

```
@Transactional(readOnly = true)
public User getUser(long id) {
  return userRepository.get(id);
} 
```

我听到了服务层上的口头禅*交易，服务层*上的*交易*；但是将存储库直接注入控制器会很糟糕吗？在首先使存储库具有事务性 - 需要传播之后，如果不存在，它将创建一个事务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:29:00.460

这取决于项目的规模和其中的复杂性。当多个存储库需要交互时，我觉得服务工作得很好。

例如，BankAccountService 需要使用 AccountRepository 来借记/贷记帐户，同时还需要使用 LedgerRepository 来记录交易。

如果您只是执行 crud 操作，我会毫不犹豫地将存储库放在控制器中。如果您的操作更先进，我会采用服务方法。解决您最简单的用例，然后在引入更多复杂性时进行重构。预先做一个大的设计经常违反“你不需要它”的原则。

当不同的控制器需要执行相同的操作时，服务也很方便。因此，如果您正在创建的逻辑是特定于控制器的，并且您不需要重用代码，那么将存储库放在控制器中是有意义的。如果您需要在其他控制器中复制逻辑，则服务可能是更好的选择，因为它是可重用的。

# ruby - 在 Capybara 中验证元素文本长度的正确方法是什么？

> ID：13719861
> 
> 赞同：0
> 
> 时间：2012-12-05T09:25:24.190
> 
> 标签：ruby, cucumber, capybara

我正在使用 Capybara 和黄瓜和红宝石

```
env.rb
Capybara.current_driver = :selenium 
```

我有一个使用多种语言的网站，我想验证以下元素应该包含最小长度为 100 个字符的文本，否则，显示一条消息

```
<p id="user_text">sometext</p> 
```

“user_text”中的文本可以是任何语言，所以

```
(("#user_text").text.length > 99) == true

Element.should have_content?("text") won't work because I don't know the text in "user_text" 
```

上面的方法是行不通的，总是通过。

我将如何验证文本的长度并在失败时打印一条消息？

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:03:37.523

*只是一个澄清：*

当您打电话时`Element.should`，您实际上是在使用[RSpec predicate matchers](http://rubydoc.info/gems/rspec-expectations/file/README.md#Predicate_matchers)，所以：

`Element.should have_content?("text")`

真的只是调用：

`Element.has_content?("text")`

所以它做同样的事情，但第二个例子使用[Capybara 节点匹配器](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)。

*回到你的问题*

您还可以在测试中使用其他[RSpec 匹配器。](http://rubydoc.info/gems/rspec-expectations/file/README.md#Built-in_matchers)由于 Capybara 使用 Nokogiri，因此您的 Element 在这里实际上是一个[Nokogiri::XML::Node](http://nokogiri.org/Nokogiri/CSS/Node.html)。因此，您可以使用该`text`方法获取内容并对其进行验证，如下所示：

`Element.text.should match(/^.{99,}$/)`

这应该做你需要的。您可以[根据要检查的内容](https://stackoverflow.com/questions/7697662/how-do-i-get-innerhtml-using-nokogiri-gem)`text`使用或`inner_html`方法。

# twitter - 收集带有标准的随机 Twitter 对话

> ID：13719864
> 
> 赞同：3
> 
> 时间：2012-12-05T09:25:32.123
> 
> 标签：twitter, tweets

我需要为我的研究收集推文的“集合”，即推特对话；

集合还需要满足以下条件

*   其中的推文数量，以及
*   参与人数。

我查看了 Twitter Streaming API、twitter-stream gem，但我发现它们都不适合我的目的。

有没有什么简单的方法可以实现这个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:16:01.830

你的出发点是什么？你将如何判断一条推文是否符合你的标准？

一旦你这样做了，它就相当简单了。

*   获取作为对话起点的推文。
*   搜索对该推文的回复。
    *   Twitter 不会让你搜索“in_reply_to”，但你可以搜索提到“@user”的每个人并按“in_reply_to”过滤
*   递归地重复。

您最终会得到一棵以起始推文作为根节点的树。您应该能够遍历树以查看有多少唯一用户以及有多少推文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T10:17:26.957

看起来你和我有同样的目的，我已经为它制作了一些 python 代码。 [https://github.com/song9446/twitter-corpus-crawler-python](https://github.com/song9446/twitter-corpus-crawler-python)

用法：

```
from tccp import search_conversation
# fetch 10 conversations in english
for conversation in search_conversation({"l": "en"}, 10): 
    for tweet in conversation:
        print(tweet["author"] + ": " + tweet["contents"]) 
```

虽然这是一个旧线程，但我希望这对某人有所帮助。

# java - 如何在 android 中使用 UnboundID LDAP？

> ID：13719872
> 
> 赞同：3
> 
> 时间：2012-12-05T09:25:48.033
> 
> 标签：java, android, ldap, unboundid-ldap-sdk

我想在android中使用LDAP（轻量级目录访问协议）。但我不知道LDAP。我看过以下链接：

[Neil 的 LDAP SDK 帖子](http://www.dirmgr.com/blog/2009/3/24/using-ldap-on-android.html)

`He told like`android 开发人员无需担心缺少对 Android 的 LDAP 支持，因为`UnboundID LDAP SDK`for Java 在 Android 平台上运行良好。我已经做了很多测试，并确保一切正常。除了几个例外（主要是 CRAM-MD5、DIGEST-MD5 和 GSSAPI，它们需要 Android 上不可用的 Java SASL API），我们在 LDAP SDK 中提供的几乎所有功能都可以在 Android 上使用

请注意，LDAP SDK 没有特殊的“Android”版本——可用于编写桌面客户端或服务器端应用程序的相同 SDK 在 Android 平台上无需任何更改即可工作。

如何在android中使用UnboundID LDAP SDK。请任何人提供教程或一些示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:54:52.923

LDAP SDK 还包括一个示例 Android 应用程序，位于 android-ldap-client 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:26:22.147

DanielWeisser 已经这样做了。该项目在 GIT 上，如果您允许凭据，则可以修改源代码。[https://github.com/weissrd/LDAP-Sync](https://github.com/weisserd/LDAP-Sync)

他使用 UnboundID LDAP 库来实现这一点。

祝你好运。

# c++ - 具有成员函数指针的部分模板类特化

> ID：13719873
> 
> 赞同：4
> 
> 时间：2012-12-05T09:25:50.913
> 
> 标签：c++, templates, c++11, typetraits

我有以下工作代码：

```
class person
{
private:
    int age_;
public:
    person() : age_(56) {}
    void age(int a) { age_ = i; }
}

template < class T, void (T::* ...FUNC)(int) > class holder;

template < class T, void (T::*FUNC)(int)>
class holder<T, FUNC>
{
public:
    typedef typename T::value_type value_type;
public:
    explicit holder() : setter(FUNC) { std::cout << "func\n"; } 
private:
    std::function<void (value_type&, int)> setter;
};

template < class T>
class holder<T>
{
public:
    explicit holder() { std::cout << "plain\n"; }
};

int main()
{
    holder<person> h1;
    holder<person, &person::age> h2;

    // this does not work:
    holder<int> h3;
} 
```

我知道在 int （或任何其他非类、结构或联合类型）的情况下，由于第二个模板参数中的期望成员函数，代码不起作用。

我的问题是如何更改代码以使其工作。我需要它以这种方式工作，以使我的持有者类的使用变得简单。

我已经尝试过使用类型特征并将成员函数指针移动到类的构造函数。没有成功。

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:39:35.173

更新：我得到了它的工作`std::conditional`：

```
template < class T, void (std::conditional<std::is_class<T>::value, T, struct dummy>::type::* ...FUNC)(int) > class holder; 
```

另一种可能的解决方案是使用子类：

```
template < class T, void (T::*FUNC)(int) >
class class_holder
{
public:
    typedef typename T::value_type value_type;
public:
    explicit class_holder() : setter(FUNC) { std::cout << "func\n"; } 
protected:
    std::function<void (value_type&, int)> setter;
}

template <class T, bool IsClass = std::is_class<T>::value>
class holder;

template <class T>
class holder<T, true> : public class_holder<T>
{
public:
    template <void (T::*FUNC)(int) >
    class with_member : public class_holder<T, FUNC>
    {
    };
};

template <class T>
class holder<T, false>
{
public:
    explicit holder() { std::cout << "plain\n"; }
};

int main()
{
    holder<person> h1;
    holder<person>::with_member<&person::age> h2;
    holder<int> h3;
} 
```

我还没有编译这个，所以告诉我是否有什么不起作用。

# objective-c - 如何在 IOS 5 中使用核心文本在 UILabel 上实现混合字体大小文本？

> ID：13719878
> 
> 赞同：1
> 
> 时间：2012-12-05T09:25:58.310
> 
> 标签：objective-c, ios, core-text

如何为 iOS 5.0实现带有“ **this** - *kind* -of - ***text ”（也混合字体大小）的 UILabel？***我尝试了 NSAttributedString 但它的属性常量的大多数[属性](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html)似乎仅适用于 iOS 6.0。在 iOS 5 中，此类任务可能会使用 webview 来实现。我还尝试[了一个使用核心文本的示例](http://iphonedevelopment.blogspot.com/2011/03/attributed-strings-in-ios.html)，但是如果我尝试使用部分范围，程序会因访问错误而崩溃。任何工作代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:19:19.390

试试[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)，这可能对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:05:30.500

你不能在 iOS 5 上使用 UILabel 来做到这一点——正如你所发现的，UILabel 只支持 iOS 6 上的富文本。

[查看这个问题](https://stackoverflow.com/questions/8322020/display-nsattributedstring-using-coretext)的答案，了解如何轻松使用 Core Text 来绘制字符串。（lnafziger 的回答比我的简单。）

# c++ - 如何使用 QSortFilterProxyModel 在 QTreeView 中对系统驱动器进行排序

> ID：13719879
> 
> 赞同：3
> 
> 时间：2012-12-05T09:25:58.700
> 
> 标签：c++, qt, qt4, qfilesystemmodel, qsortfilterproxymodel

我有一个**QTreeview**，我在其中使用**QFileSystemModel**显示所有系统驱动器。我正在寻找更好的方法，其中**QTreeview**可以在一个部分显示本地驱动器，在另一个部分显示可移动驱动器，依此类推。基本上对驱动器进行分类。

这是代码：

```
pSystemPrimaryModel = new QFileSystemModel(this);    
pSystemPrimaryModel->setRootPath(QDir::currentPath());
pSystemPrimaryModel->setFilter( QDir::AllDirs | QDir::NoDotAndDotDot );

// Sets the model for the view to present.
ui->PrimTreeView->setModel(pSystemPrimaryModel);

// Just Display NAME and hide other Columns
for(int nCount = 1; nCount < pSystemPrimaryModel->columnCount(); nCount++)
ui->PrimTreeView->hideColumn(nCount); 
```

这基本上为我提供了所有驱动器，如下所示：

```
Name:
+ C:
+ New Volume(D:)
+ New Volume(E:)
+ SD_Card(F:)
+ Transcend Drive(G:) 
```

使用**hideColumn()**我隐藏了使用 QTreeView 时显示的所有标题（名称除外），即**名称、类型、大小**等。

***我的要求：***

1.  我基本上想要实现的是：

    *   本地文件夹
        *   C：
        *   新卷(D:)
        *   新卷(E:)
    *   可移动驱动器
        *   SD_卡(F:)
        *   超越驱动(G:)

基本上将本地驱动器和外部驱动器分开。我遇到了**QSortFilterProxyModel**，它看起来像是对驱动器顺序进行排序。但我不知道如何使用它。

1.  我想删除 QTreeView 中的标题。由于**名称**在我的输出中可见，我想隐藏它。如果你能指导我会很有帮助:)

# android - Android 应用程序在不同版本的 Android 之间的兼容性

> ID：13719884
> 
> 赞同：2
> 
> 时间：2012-12-05T09:26:06.953
> 
> 标签：android, compatibility, android-version

大约 1 年前，我在 Android 2.1 版本上创建了一个应用程序，并可供所有其他版本的 Android 使用。那时，2.1、2.2 和 2.3 版本的 Android 手机非常普遍。

所以我在所有可用版本上测试了我的应用程序，没有问题。

现在，带有版本 4 的 Android 已成为市场上最热门的手机。当我在 4 版本上测试我的应用程序时，它开始崩溃。

我的问题是如何确保我们现在开发的应用程序应该与现在不可用的更高版本兼容？

如何编写应用程序 [或] 我需要考虑哪些事情，以便通过最少的代码更改它应该适用于所有版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:31:27.940

通过在新版本上测试您的应用程序。对不起，这真的是唯一的半傻瓜解决方案。这些版本有足够的时间在模拟器上进行测试，所以真的没有任何借口。

我的猜测是，您已经完成了一些类似在主线程上下载数据的操作。这已经不允许了。然后，您的应用程序不会获取数据，并且您会得到一堆空指针异常（如果数据访问丢失，您也会得到这些异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:33:18.277

没有完美的答案。Android 将永远发展和变化。希望它会像以前一样继续这样做，变得更好。谷歌预见到了这个问题，这是他们让更新应用程序变得如此容易的一小部分原因。您只需要更新即可。它的最大优势在于它总是可以改变、成长和变得更好。

# animation - 关键帧插值 catmull rom

> ID：13719885
> 
> 赞同：2
> 
> 时间：2012-12-05T09:26:12.177
> 
> 标签：animation, keyframe, catmull-rom-curve

我知道有很多方法可以做到这一点。我对用于动画目的的 catmull rom 特别感兴趣。但是，我很难理解它。我访问过的所有网站都将关键姿势确定为点。然而，关键姿势也可以包含关节角度。这些在插值时是否与点相同？有没有学习catmull rom的好网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T23:25:18.440

Catmull-Rom 样条计算是一种数学工具，用于从一组点制作平滑曲线。它通常用于规划相机的路径，以便相机平滑过渡，不会急剧改变视角，同时仍然允许锚点相当稀疏。它绝对也可以用来映射动画骨架的过渡，或姿势，包括关节和其他值。样条可以应用于任何标量值。因此，您可以将样条曲线应用于动画序列中关节位置的位置。您将分别计算 X、Y 和 Z 值。但您也可以将其应用于关节角度或其他随时间变化的标量值。样条曲线只会沿平滑曲线插入一个值。

我发现的最好的 Catmull-Rom 实现是向心实现，我在这里给出了完整实现的详细解决方案。

[没有尖点和自相交的 Catmull-rom 曲线](https://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/19283471#19283471)

对我帮助最大的原则文章在这里：[http ://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf](http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf)

您需要了解的主要内容是，这是一个样条曲线工具，它采用一组点并将它们用作曲线的“锚点”，试图创建一条穿过这些点的平滑路径。该路径将始终通过您的所有点。您必须在两端添加两个控制点。如果要创建第一个点和最后一个点相同的闭合曲线，则添加到开头的点是最后一个点，添加到末尾的点是第二个点。如果线是开放的，您可以重复第一个和结束点，或者实际上，我建议将第一个和最后一个线段沿同一方向延伸，以便您的线以沿线方向移动的动量开始。以下是来自各种参数化的一些工件。请记住，“

![均匀弦向心](../Images/deaa73fd0e42a14c2c2cbfab488c3160.png)

# php - 更改文件编码会影响我的 css 显示 html 页面的方式吗？

> ID：13719889
> 
> 赞同：1
> 
> 时间：2012-12-05T09:26:28.010
> 
> 标签：php, html, internet-explorer, character-encoding, smarty

当我使用 PHP Smarty 时发生了一件奇怪的事情。似乎php文件的编码会影响css。

PHP 文件 (ANSI)--test2.php

```
<?php
include_once("inc/smarty_inc.php");
$smarty->display('test.tpl.htm'); 
```

Smarty 文件(ANSI)--test.tpl.htm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>JPR</title>
</head>
<body>
    <div style="width:500px;height:200px; background-color:Red;margin:auto;">
        test
    </div>
</body>
</html> 
```

当这两个文件是 ANSI 时。div 显示在页面的中心。（IE 和 firefox）

当其中一个转换为 utf-8 时。div 显示在页面的左侧。（仅在 IE 中，在 Firefox 中可以）

它有什么问题？如何使用 uff-8 在 IE 中使其正常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:07:42.293

您正在*使用*BOM 将文件保存为 UTF-8，这会导致响应中的第一个字节是字节顺序标记的字节，而不是 doctype。当 IE 没有首先看到 doctype 时，它​​会进入 quirks 模式，其中框模型是不同的。

您需要将其转换为**没有**BOM 的 UTF-8。这取决于您使用的文本编辑器或转换器。

# android - 如何在模拟时钟上制作安卓扫秒针？

> ID：13719890
> 
> 赞同：5
> 
> 时间：2012-12-05T09:26:28.123
> 
> 标签：android

我是android编程的新手。有没有办法让这个带有秒针的模拟时钟代替石英进行扫掠（计时）运动？

有样品可以下载吗？

我正在使用此代码作为时钟：

```
public class SecondHand extends Activity {
// private Handler mHandler = new Handler();
protected static final String TAG = SecondHand.class.getName();
private ImageView img;
Handler mHandler;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Thread myThread = null;
    Runnable runnable = new CountDownRunner();
    myThread = new Thread(runnable);
    myThread.start();

}

private void doPlay(){
    new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            Log.v("log_tag", "this is seocond thread");

        }
    }).start();
}
public void doRotate() {

    runOnUiThread(new Runnable() {
        public void run() {
            try {
                Date dt = new Date();
                int hours = dt.getHours();
                int minutes = dt.getMinutes();
                int seconds = dt.getSeconds();
                img = (ImageView) findViewById(R.id.imgsecond);
                RotateAnimation rotateAnimation = new RotateAnimation((seconds - 1) * 6, seconds * 6,
                        Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);

                rotateAnimation.setInterpolator(new LinearInterpolator());
                rotateAnimation.setFillAfter(true);

                img.startAnimation(rotateAnimation);
            } catch (Exception e) {
                Log.e("log_tag", "Error msg is " + e.toString());

            }
        }
    });
}

class CountDownRunner implements Runnable {
    // @Override
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            try {
                // Log.v("log_tag", "Roate is going");
                doRotate();
                Thread.sleep(1000);
                doPlay();
                } catch (InterruptedException e) 
                {
                // Thread.currentThread().interrupt();
            } catch (Exception e) {
                Log.e("log_tag", "Error is " + e.toString());
            }
        }
    }
}
@Override
protected void onDestroy() {
    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T09:37:37.730

```
 protected static final String TAG = SecondHand.class.getName();
       private ImageView img;
       Handler mHandler;

       protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       Thread myThread = null;

        Runnable runnable = new CountDownRunner();
        myThread = new Thread(runnable);
        myThread.start();

 }

public void doRotate() {

 runOnUiThread(new Runnable() {
 public void run() {
 try {

 Date dt = new Date();
 int hours = dt.getHours();
 int minutes = dt.getMinutes();
 int seconds = dt.getSeconds();
 String curTime = hours + ":" + minutes + "::" + seconds;
 Log.v("log_tag", "Log is here Time is now" + curTime);
 img = (ImageView) findViewById(R.id.imgsecond);
 RotateAnimation rotateAnimation = new RotateAnimation(
   (seconds - 1) * 6, seconds * 6,
   Animation.RELATIVE_TO_SELF, 0.5f,
   Animation.RELATIVE_TO_SELF, 0.5f);

 rotateAnimation.setInterpolator(new LinearInterpolator());
 rotateAnimation.setDuration(1000);
 rotateAnimation.setFillAfter(true);

 img.startAnimation(rotateAnimation);
} catch (Exception e) {

  }
 }
});
}

class CountDownRunner implements Runnable {
// @Override
public void run() {
 while (!Thread.currentThread().isInterrupted()) {
 try {

  doRotate();
  Thread.sleep(1000);
 } catch (InterruptedException e) {
  Thread.currentThread().interrupt();
 } catch (Exception e) {
  Log.e("log_tag", "Error is " + e.toString());
  }
 }
}
} 
```

**xml文件：**

```
 <?xml version="1.0" encoding="utf-8"?>
      <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:layout_width="wrap_content" android:layout_height="wrap_content"
           android:gravity="center" android:layout_gravity="center">

        <AnalogClock android:layout_width="wrap_content"
                     android:hand_minute="@drawable/widgetminute"                                   
                     android:id="@+id/AnalogClock" 
                      android:dial="@drawable/widgetdial"
                     android:hand_hour="@drawable/widgethour"  
                     android:layout_height="wrap_content"              
                    android:layout_centerInParent="true">
       </AnalogClock>
    <ImageView android:src="@drawable/widgetseocond1" android:id="@+id/imgsecond"
    android:layout_width="wrap_content" 
     android:layout_height="wrap_content"
   android:layout_centerInParent="true" />
  </RelativeLayout> 
```

# java - 了解 writeDataToPipe

> ID：13719896
> 
> 赞同：2
> 
> 时间：2012-12-05T09:26:58.520
> 
> 标签：java, android, design-patterns

我在使用 contentprovider 并实现 PipeDataWriter的最新 Android 记事本教程[链接](http://developer.android.com/training/notepad/index.html)中找到了此代码片段。

该接口有其方法 writeDataToPipe，他们实现如下：

```
@Override
public void writeDataToPipe(ParcelFileDescriptor output, Uri uri, String mimeType, Bundle opts, Cursor c) {
    // We currently only support conversion-to-text from a single note entry,
    // so no need for cursor data type checking here.
    FileOutputStream fout = new FileOutputStream(output.getFileDescriptor());
    PrintWriter pw = null;
    try {
        pw = new PrintWriter(new OutputStreamWriter(fout, "UTF-8"));
        pw.println(c.getString(READ_NOTE_TITLE_INDEX));
        pw.println("");
        pw.println(c.getString(READ_NOTE_NOTE_INDEX));
    } catch (UnsupportedEncodingException e) {
        Log.w(TAG, "Ooops", e);
    } finally {
        c.close();
        if (pw != null) {
            pw.flush();
        }
        try {
            fout.close();
        } catch (IOException e) {
        }
    }
} 
```

我怀疑他们为什么专门使用 PipeDataWriter？

这是某种设计模式吗？

我没有找到其他使用过它的来源。为什么这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:22:28.063

> 为什么他们特别使用 PipeDataWriter？

他们`openPipeHelper()`在他们的实现中使用`openTypedAssetFile()`. `openPipeHelper()`将 a`PipeDataWriter`作为参数。在他们的情况下，他们`PipeDataWriter`在`NotePadProvider`自身上实现，因此需要实现`openPipeHelper()`以履行接口所需的合同`PipeDataWriter`。

`PipeDataWriter`并且`openPipeHelper()`是 API 级别 11 的新手。以前，您必须推出自己的解决方案来分叉线程以返回文件的内容。

# mysql - where 子句中的几何函数

> ID：13719902
> 
> 赞同：1
> 
> 时间：2012-12-05T09:27:09.207
> 
> 标签：mysql

我`Objects`在 MySQL 中有一个表：

`id int(11), objekt_x decimal(9,15), objekt_y decimal(9,15)`

其中 objekt_x 和 objekt_y 是对象的经度和纬度。在我的应用程序中，我使用谷歌地图创建了一个边界多边形，所以我得到了多边形坐标。

现在我必须从选定多边形内的 SQL 表中选择对象。

`SELECT * FROM Objects`

`WHERE Intersects(`

`GeomFromText("POINT(object_x object_x)"),`

`GeomFromText("POLYGON((52.82058030980633 20.01708984375,52.734185230629436 22.115478515625,52.82058030980633 20.01708984375))")`

`) = 1`

我的问题是如何构建我的代码的“POINT”片段，这样它就可以在我的 SQL 表中工作。任何帮助表示赞赏:)

# android - Android：是否可以跳转到文本视图中的某个部分？

> ID：13719903
> 
> 赞同：1
> 
> 时间：2012-12-05T09:27:09.573
> 
> 标签：android, textview

我在滚动视图中有一个文本视图，其中有几个文本段落..

我想要做的是：基于用户单击的按钮，将textview的焦点跳转到某个文本段落..

是否可以在 Android 的文本视图中跳转到特定部分？如果是的话，你能把任何链接解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:18:00.430

使用`textView.scrollBy(int x, int y)`或`textView.scrollTo(int x, int y)`。

# google-chrome - Chrome ThreeJS 纹理

> ID：13719905
> 
> 赞同：1
> 
> 时间：2012-12-05T09:27:16.687
> 
> 标签：google-chrome, three.js

我是 TreeJS 的新手，当我使用 Chrome 浏览器版本 23.0.1271.95 m 时出现纹理问题，实际上它没有正确加载，我收到此错误：

**资源解释为图像，但使用 MIME 类型 text/html 传输：“https://localhost:8181/images/texture1.jpg”。** **三.js 458**

```
 var terrainGeometry = new THREE.PlaneGeometry(3, 3);
 var terrainTexture = new THREE.ImageUtils.loadTexture("images/texture1.jpg");
 var terrainMaterial = new THREE.MeshBasicMaterial({map: terrainTexture}); 
 var terrain = new THREE.Mesh(terrainGeometry, terrainMaterial);
 scene.add(terrain); 
```

如果您使用 Firefox 代替正确加载纹理的位置，则不会出现同样的问题。

谢谢您的帮助。

# c++ - 这行代码在C++中的含义

> ID：13719907
> 
> 赞同：1
> 
> 时间：2012-12-05T09:27:20.463
> 
> 标签：c++, rsa

我刚刚开始学习 C，我正在努力在我的代码中使用 RSA 密码。但是，这行代码让我感到困惑。学分从这个站点转到作者[这里](http://www.rajorshi.net/old/code_rsa.htm)。

```
char* intmsg = new char[strlen(msg)*3 + 1]; 
```

这是可以找到线的方法。

```
inline void encrypt(char* msg,FILE* fout)
{
    /* This function actually does the encrypting of each message */

    unsigned int i;
    int tmp;
    char tmps[4];
    char* intmsg = new char[strlen(msg)*3 + 1];

    /* Here, (mpz_t) M is the messsage in gmp integer 
    *  and (mpz_t) c is the cipher in gmp integer */

    char ciphertext[1000];

    strcpy(intmsg,"");

    for(i=0;i<strlen(msg);i++)
    {
        tmp = (int)msg[i];

        /* print it in a 3 character wide format */
        sprintf(tmps,"%03d",tmp);

        strcat(intmsg,tmps);
    }

    mpz_set_str(M,intmsg,10);

    /* free memory claimed by intmsg */
    delete [] intmsg;

    /* c = M^e(mod n) */
    mpz_powm(c,M,e,n);

    /* get the string representation of the cipher */
    mpz_get_str(ciphertext,10,c);

    /* write the ciphertext to the output file */
    fprintf(fout,"%s\n",ciphertext);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:30:33.913

该代码行实际上不是 C，而是 C++。

```
 char* intmsg = new char[strlen(msg)*3 + 1]; 
```

意味着为给定数量的字符动态分配一块内存，比`msg`字符串的原始长度大 3 倍 + 1。

C等价物将是

```
 char* intmsg = malloc(strlen(msg)*3 + 1); 
```

要释放该内存块，`delete []intmsg`在 C++ 中使用，而如果你`malloc`在 C 中使用，你会这样做`free(intmsg);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:30:12.810

它创建一个字符数组，该数组比存储的字符列表大 3 倍，`msg`加上一个字符来存储字符串结尾字符 '\0'。

有关 C++ 运算符的更多信息，请`new[]` [点击此处](http://www.cplusplus.com/reference/new/operator%20new%5B%5D/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:30:36.920

它是一行 C++，它动态分配一个字符数组 3 倍于字符串“msg”的长度 + 1 倍（对于空终止符）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T09:31:03.800

这是 C++，代码分配了一个 char 数组，其大小是消息长度的 3 倍加一。结果指针被分配给`intmsg`。

为什么这样做？因为消息在循环中逐个字符转换为每个字符的三位十进制数，带有`sprintf(tmps,"%03d",tmp);`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T09:31:08.830

这是 C++ 代码：

```
char* intmsg = new char[strlen(msg)*3 + 1]; 
```

这告诉编译器为内存块的长度创建内存，`intmsg`即`heap`等于“长度的 3 倍以上`msg`”。

表示在执行此行后`intmsg`开始指向内存块`heap`。

# css - 如何在 Orchard 模块中包含 CSS 样式表？

> ID：13719909
> 
> 赞同：5
> 
> 时间：2012-12-05T09:27:20.657
> 
> 标签：css, orchardcms

我正在为 Orchard 开发一个模块，我只想知道如何包含一个 css 文件。

我做了以下没有结果：

在我的模块的根目录中添加了一个文件夹“Styles”，并包含了一个样式表和一个 Web.config 文件，就像[这个](http://orchard.codeplex.com/discussions/260443)问题一样。

我已经看到[了，但这](https://stackoverflow.com/questions/6807939/how-to-include-custom-css-or-javascript-on-a-content-item-in-orchard)不是我想要的。

编辑：

好的，解决方案：

当我开始在 Orchard 上工作时，我只是通过在`Orchard.Web/Modules`文件夹中创建一个新项目来创建一个新模块，但是正如我[在这里](http://orchard.codeplex.com/discussions/240340)阅读的那样，我的`Views/Web.config`文件必须包含一些我没有的果园基础内容，因为我没有使用 codegen 创建模块。我现在通过将我`Web.config`的文件替换为`Web.config`来自另一个 Orchard 模块的文件来修复它，现在它可以工作了。

下次我将使用 codegen 创建一个新模块。

感谢内啡肽对我的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T10:15:36.050

如果你想在视图中包含你的样式表，你需要在视图顶部指定它。其中样式表的名称是 Styles 文件夹中 .css 文件的文件名。

因此，在您的 .cshtml 文件中供您查看..

```
@{
  Style.Include("your-stylesheet.css").AtHead();
} 
```

我过去使用`AtHead()`过，但是还有其他方法可以将您的样式表包含在不同的位置（例如`AtFoot()`）

如果您的样式表依赖于其他样式表，您可以通过创建资源清单来做一些更有趣的事情，此处详细介绍[https://stackoverflow.com/a/6500121/580101](https://stackoverflow.com/a/6500121/580101)

# android - Android 无法在模拟器中启动我的网络摄像头

> ID：13719912
> 
> 赞同：0
> 
> 时间：2012-12-05T09:27:27.180
> 
> 标签：android

我的机器上有一个网络摄像头，想在 android 模拟器中使用它作为摄像头替换。我在模拟器的设置中对其进行了配置，以使用 webcam0 作为摄像头设备。但是当我在模拟器上启动相机时它不会启动。有人知道如何正确启用网络摄像头吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:50:30.527

[本教程](http://www.ecole.ensicaen.fr/~reynaud/android/webcam_in_android_emulator.html)将有助于做到这一点。请检查它。

# php - php未定义变量或重命名变量？

> ID：13719914
> 
> 赞同：1
> 
> 时间：2012-12-05T09:27:34.097
> 
> 标签：php, forms, undefined, session-variables

我从各种来源的大杂烩和几周的我称之为“整体沉浸式学习”的过程中构建了这段代码。换句话说，我不知道关于**php**的深蹲，只是认为我可以伪造它，但显然我不能。

任何人，我知道我在下面所做的事情会让几个看到它的人对我对你心爱的 php 所做的事情感到极度恐惧，但只有 2 周的自我教育是无济于事的，至少它只是现在抛出三个通知，而不是它过去所做的所有警告、尖叫警告和致命错误。

我得到的最后一个错误是......

> ( ! ) 注意：未定义变量：第 65 行 E:\wamp\www\complete-x013_php2\iframe1\contact.php 中的 error_name
> 
> ( ! ) 注意：未定义变量：第 77 行 E:\wamp\www\complete-x013_php2\iframe1\contact.php 中的 error_email
> 
> ( ! ) 注意：未定义变量：第 89 行 E:\wamp\www\complete-x013_php2\iframe1\contact.php 中的 error_code

```
<?php session_start(); ?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>

<meta http-equiv="Content-type" content="text/html; charset=utf-8">

<title></title>

<link rel="stylesheet" type="text/css" href="style.css" />

</head>

<body>

<span style="color: #000000; font-size: 85%; font-family: Verdana, Geneva, sans-serif;">

<?php

    if (isset($_POST['submit'])) {
    $error = "
    error_name,
    error_email,
    error_code
    ";

$name =     check_input($_POST['name']);
$email =    check_input($_POST['email']);
$how =      check_input($_POST['how']);
$ifother =  check_input($_POST['ifother']);
$code =     check_input($_POST['code']);
$submit =   check_input($_POST['submit']);

$_POST['name'] = trim($_POST['name']);
$_POST['name'] = stripslashes($_POST['name']);
$_POST['name'] = htmlspecialchars($_POST['name']);

$_POST['email'] = trim($_POST['email']);
$_POST['email'] = stripslashes($_POST['email']);
$_POST['email'] = htmlspecialchars($_POST['email']);

$_POST['how'] = trim($_POST['how']);
$_POST['how'] = stripslashes($_POST['how']);
$_POST['how'] = htmlspecialchars($_POST['how']);

$_POST['ifother'] = trim($_POST['ifother']);
$_POST['ifother'] = stripslashes($_POST['ifother']);
$_POST['ifother'] = htmlspecialchars($_POST['ifother']);

$_POST['code'] = trim($_POST['code']);
$_POST['code'] = stripslashes($_POST['code']);
$_POST['code'] = htmlspecialchars($_POST['code']);

$_POST['submit'] = trim($_POST['submit']);
$_POST['submit'] = stripslashes($_POST['submit']);
$_POST['submit'] = htmlspecialchars($_POST['submit']);

    if (!empty($_POST['name'])) {
    $name = check_input($_POST['name']);
    } else {
        $error .= "error_name";
        $error_name .= "Name is required.";
    }

    if (!empty($_POST['email'])) {
    $email = check_input($_POST['email']);

        if (!preg_match("/^[a-z0-9]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){ 
        $error .= "error_email";
        $error_email .= "E-mail address not valid.";
        }
    } else {
    $error .= "error_email";
    $error_email .= "E-mail address is required.";
    }

    if (!empty($_POST['code'])) {
    $code = check_input($_POST['code']);

        if (strtolower($_POST['code']) != 'black'){ 
        $error .= "error_code";
        $error_code .= "Code is BLACK.";
        }
    } else {
    $error .= "error_code";
    $error_code .= "Enter Code.";
    }

    if (empty($error)) {
    $from = 'From: ' . $name . ' <' . $email . '>';
    $to = "yourmail@host.com";
    $subject = "New Subscription Contact";
    $content = "

Newsletter Subsciption submitted by $name,

E-mail: $email

They were referred to us by: $how, $ifother

-END NOTIFICATION-

";
    $success = 
    mail($to,$subject,$content,$from);
    header('Location: thanks.php');
    exit;
    }

    }

function check_input($data, $problem='')
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
        if ($problem && strlen($data) == 0)
{
    show_error($problem);
}
    return $data;
}
?>

<div>

<form action="contact.php" method="post">

<center>

<table style="border: 0px solid black; border-collapse: collapse;">

<tr>
<td style="border: 0px solid black; height: 16px;" colspan="2">[<span style="color: #ff0000;">*</span>] Denotes a required field.</td>
</tr>

<tr>
<td style="border: 0px solid black; text-align: left; text-indent: 92px; height: 12px;" colspan="2" id="error">
<?php if (!empty($error_name)) { echo '<div  class="error">' . $error_name . '</div >'; } ?>
</td>
</tr>

<tr>
<td style="border: 0px solid black; vertical-align: top; text-align: left;">
<div style="margin-top: 2px;"><span style="color: #ff0000;">*</span><label>Name:</label></div></td>
<td style="border: 0px solid black;">
<input type="text" placeholder="John or Jane Doe" style="width: 269px;" name="name" value="<?php if ($_POST['name']) { echo $_POST['name']; } ?>" /></td>
</tr>

<tr>
<td style="border: 0px solid black; text-align: left; text-indent: 92px; height: 12px;" colspan="2" id="error">
<?php if (!empty($error_email)) { echo '<div  class="error">' . $error_email . '</div >'; } ?>
</td>
</tr>

<tr>
<td style="border: 0px solid black; vertical-align: top; text-align: left;">
<div style="margin-top: 2px;"><span style="color: #ff0000;">*</span><label>E-mail:</label></div></td>
<td style="border: 0px solid black;">
<input type="text" placeholder="yourmail@host.com" style="width: 269px;" name="email" value="<?php if ($_POST['email']) { echo $_POST['email']; } ?>" /></td>
</tr>

<tr>
<td style="border: 0px solid black; height: 12px;" colspan="2"></td>
</tr>

<tr>
<td style="border: 0px solid black; height: 12px;" colspan="2">

<div style="border: 0px solid black; float: left; margin-top: 1px;">How did you find us?</div>

<div style="border: 0px solid black; float: right;">        <select width="180" height="20" style="width: 180px;" name="how">
                            <option value=""> -- Please Select -- </option>
                            <option>Google</option>
                            <option>Yahoo</option>
                            <option>Link from a website</option>
                            <option>Word of mouth</option>
                            <option>Other</option>
                            </select></div>

</td>
</tr>

<tr>
<td style="border: 0px solid black; height: 12px;" colspan="2"></td>
</tr>

<tr>
<td style="border: 0px solid black; vertical-align: top; text-align: left; width: 80px;">
<div style="margin-top: 1px;"><label>If <i>Other</i>:</label></div></td>
<td style="border: 0px solid black;">
<textarea name="ifother" placeholder="If you chose 'link' or 'other'." style="width: 269px; height: 35px;"><?php if ($_POST['ifother']) { echo $_POST['ifother']; } ?></textarea></td>
</tr>

<tr>
<td style="border: 0px solid black; text-align: left; text-indent: 265px; height: 12px;" colspan="2" id="error">
<?php if (!empty($error_code)) { echo '<div class="error">' . $error_code . '</div>'; } ?>
</td>
</tr>

<tr>
<td style="border: 0px solid black;" colspan="2" >
  <div style="border: 0px solid black; float: left; height: 18px; margin-top: 2px;">
   <span style="color: #ff0000;">*</span>What color is this '<b>black</b>' text?    </div>
   <div style="border: 0px solid black; float: right;"><input type="text" placeholder="code" style="width: 90px;" name="code" value="<?php if ($_POST['code']) { echo $_POST['code']; } ?>" /></div>
   </td>
</tr>

<tr>
   <td style="border: 0px solid black;" colspan="2"><div style="border: 0px solid black; height: 10px;"></div>
   </td>
</tr>
<tr>
   <td style="border: 0px solid black; text-align: right;" colspan="2"><input type="submit" style="width: 95px;" name="submit" value="Subscribe!" />
       </td>
</tr>
</table>
</center>
 </form>
    </div>
    </span>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:30:24.047

```
$error_email .= "E-mail address not valid."; 
```

=>

```
$error_email = "E-mail address not valid."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:33:26.493

你需要添加这个：

```
$error_code = $error_email = $error_name = ""; 
```

刚过 ：

```
$error = "
    error_name,
    error_email,
    error_code
    "; 
```

像这样 ：

```
$error = "
    error_name,
    error_email,
    error_code
    ";
$error_code = $error_email = $error_name = ""; 
```

触发通知是因为您在未定义的 var 上使用 .=。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:36:11.003

您还必须定义 error_name 和 error_email 和 error_code

尝试这个

```
 if (isset($_POST['submit'])) {
   $error_name ="";
   $error_email ="" ;
   $error_code= "";
    $error = "";
   $name =     check_input($_POST['name']);
 .....
 .... 
```

# git - git删除缓存

> ID：13719915
> 
> 赞同：1
> 
> 时间：2012-12-05T09:27:49.790
> 
> 标签：git, github, git-svn

我有 2 个 git 存储库，例如文件夹 1。当我执行 git rm --cached folder1 然后推送更改然后从另一个存储库中提取它们时，它会从另一个存储库中删除它们。我之前已经添加了它，但是我不再跟踪此文件夹中的文件。有没有一种简单的方法可以在不实际删除它们的情况下从两侧的 git inex 中删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:36:45.157

如果您想停止跟踪本地副本中子文件夹中的更改，请执行以下操作：

```
git update-index --assume-unchanged <files/to/stop.tracking> 
```

要扭转这一点：

```
git update-index --no-assume-unchanged <files/to/stop.tracking> 
```

[在这里](http://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)阅读更多。

# javascript - 如何在javascript中检查有多少div在包装器中作为行解决？

> ID：13719926
> 
> 赞同：0
> 
> 时间：2012-12-05T09:28:18.997
> 
> 标签：javascript, jquery, html, css

来源在这里[http://jsfiddle.net/4fV3k/](http://jsfiddle.net/4fV3k/)

我有一个函数`SetGridBorder`，它采用类似边框的样式和类似`1px solid red`包装器的选择器`box-wrapper`。

由于我的示例代码 4 行是连续的，所以它们是 4 列和 4 行。我如何在 JavaScript 中确定它。我想在这个规则中设置边界。

1.  第一行的 2 和 3 缺少左右边框（所以这不是重复的边框）。

2.  第二列和第三列（中间行）缺少顶部和底部边框，因此这里也没有重复的边框。

我如何在 JavaScript 中做到这一点？有人对如何做得更好有建议吗？

```
$(document).ready(function () {   
    var box_wrapper = $(".box-box-wrapper", ".box");   
    SetGridBorder(4,4)
});

function SetGridBorder(style,selector) {

}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:53:18.437

您可以通过将包装器宽度和高度除以框的宽度和高度来获得多少行和列。在您的示例包装器高度为零，所以我添加`overflow:auto;`到`body .box-wrapper`类。[在http://jsfiddle.net/4fV3k/7/](http://jsfiddle.net/4fV3k/7/)更新小提琴

```
function getRows() {
    var wrapperWidth = $(".box-wrapper").width();
    var boxWidth = $(".box-wrapper > div").width();
    return Math.floor(wrapperWidth / boxWidth);
}

function getColumns() {
    var wrapperHeight = $(".box-wrapper").height();
    var boxHeight = $(".box-wrapper > div").height();
    return Math.floor(wrapperHeight / boxHeight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:54:57.723

供参考。

```
 body .box {
  width: 128px;
  height: 128px;
  float: left;
  text-align: center;
    border:solid 1px #555;
}
$(document).ready(function () {
    $.each($(".box"),function(i,n){
        if((i+1)%4!=0){
            $(n).css({'border-right':'none'})        
        }
        if((i+1)>4){
           $(n).css({'border-top':'none'})        
        }
    });
}); 
```

# android - 如何在android gps中获取可用卫星的数量

> ID：13719938
> 
> 赞同：1
> 
> 时间：2012-12-05T09:29:08.573
> 
> 标签：android, gps, satellite, gps-time

我正在使用 android 中的 GPS，我想显示当前位置可用的卫星数量，我的应用程序中一直有 3 个，而在其他应用程序中，它们在同一位置显示 6 到 9 个。我不知道是什么问题。我能够获得经纬度当前位置。我没有。`locationManager.getAllProviders().size()`来自in的卫星`LocationListener`

我也试过

```
int satellite = 0;

GpsStatus status = locationManager.getGpsStatus(null);
            Iterable<GpsSatellite> sat = status.getSatellites();
            int i=0;
            while (sat.iterator().hasNext())
            {
                GpsSatellite gpsSatellite=(GpsSatellite)sats.iterator().next();

                if(gpsSatellite.usedInFix())
                {
                    satellite++;
                }

            } 
```

但它显示我为 0；

请帮我。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:41:50.960

您可以查看[GpsStatus](http://developer.android.com/reference/android/location/GpsStatus.html)类方法。

您可以使用[getSatellies()](http://developer.android.com/reference/android/location/GpsStatus.html#getSatellites())方法获取卫星列表。它是一个[可迭代](http://blog.dreasgrech.com/2010/03/javas-iterators-and-iterables.html)的，因此您可以遍历它并获取卫星的数量。

# iphone - CLGeocodeCompletionHandler 只有一个地标条目

> ID：13719940
> 
> 赞同：9
> 
> 时间：2012-12-05T09:29:15.867
> 
> 标签：iphone, objective-c, geocoding, clgeocoder

的文档

```
- (void)geocodeAddressString:(NSString *)addressString completionHandler:(CLGeocodeCompletionHandler)completionHandler; 
```

该文件明确指出：

> 在前向地理编码请求的情况下，如果提供的信息产生多个可能的位置，则可能会返回多个地标对象。

声明它返回一个地标数组。然而，即使我搜索我知道肯定有多个条目的对象（好莱坞、华盛顿、丹麦、主要街道等），我总是只能得到一个条目。

有些人只是耸耸肩说改用 google API，但我担心请求限制。

是否有一些设置或破解来解决这个问题，或者`CLGeocoder`只是坏了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:10:15.367

我肯定会建议使用谷歌地理编码 API - 它简直是优越的。我还认为，您不应该担心 Google Geocoding API 请求的使用限制。

如果您正在开发移动应用程序，我建议实施客户端地理编码 - 这意味着每个设备都直接查询 Google API。正如[谷歌自己的文档中直接说明的那样](https://developers.google.com/maps/articles/geocodestrat?hl=sk#client)

> 地理编码限制是每个用户会话的，随着用户群的增长，您的应用程序不会达到全局限制。

[地理编码策略文档](https://developers.google.com/maps/articles/geocodestrat?hl=sk#client)和[地理编码文档](https://developers.google.com/maps/documentation/geocoding/)中的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-29T14:54:25.760

MKLocalSearch 是这里的答案：

```
let request = MKLocalSearch.Request()
request.naturalLanguageQuery = "addressToBeSearched"
request.region = MKCoordinateRegion(center: span: )
let localSearch = MKLocalSearch(request: request)

localSearch.start { response, error in
    // returns (MKLocalSearch.Response?, Error?) -> Void
    // which ultimately has an array of MKMapItem from which you can extract a placemark.
} 
```

这不仅返回附近的兴趣点、地点等。我能想到的唯一缺点是您必须在初始化程序中为 MKCoordinateRegion 和跨度提供当前位置。

# c++ - 它是干净的代码吗？

> ID：13719942
> 
> 赞同：1
> 
> 时间：2012-12-05T09:29:26.380
> 
> 标签：c++, error-handling, coding-style

```
#include <fstream>
#include <iostream>
#include <stdexcept>
using namespace std;

class FileNotFound: public logic_error
{
public:
    explicit FileNotFound(const string& _Message):logic_error(_Message){}
};
int main()
{
    try
    {
        ifstream file;
        file.open("NoExistingFile");
        if (file.fail())
            throw FileNotFound("");
    }
    catch(const FileNotFound &e)
    {
        cout << "FileNotFound" << e.what();
    }
    catch(const exception &e)
    {
        cout << e.what();
    }

    return 0;
} 
```

输出：FileNotFound

是干净的代码吗（罗伯特·马丁）？std::exception 不提供“错误位置”。Clean Code A Handbook of Agile Software Craftsmanship (Robert Martin) -> 第 7 章：错误处理 -> 提供异常上下文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:41:49.777

考虑到引用的段落，它肯定是不干净的，因为你只是得到了发生的事情的信息，但你没有从抛出异常的地方得到信息，因此你无法追溯它进行调试。

我建议不要使用标准异常，而是使用[boost exceptions](http://www.boost.org/doc/libs/1_52_0/libs/exception/doc/boost-exception.html)，因为它们可以提供引发异常的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T12:57:27.820

更基本的问题是：为什么首先使用异常？如果它是非异常行为（如果可以预期文件可能不存在），则根本不应该抛出异常。相反，控制应该沿着“官方路径”流动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T12:32:33.683

*附加组件：*在引用的书籍部分的意义上它并不干净（因为没有提供定位问题所需的上下文 - 正如其他人提到的那样），而且还因为：

1.  自定义异常用于操作控制流。

所以而不是：

> ```
>  throw FileNotFound("");
>  }
>  catch(const FileNotFound &e)
>  { 
> ```

只做：

```
 cout << "FileNotFound" << e.what(); 
```

2.  变量名“e”并不是真正的自我解释，也不应该重复。

3.  异常类应该有自己的文件。

4.  您不应该互换使用错误和异常（在您的问题中）。这是一个额外的小费恕我直言。

# c# - LinkBut ton 没有触发 GridView_RowCommand

> ID：13719943
> 
> 赞同：1
> 
> 时间：2012-12-05T09:29:27.633
> 
> 标签：c#, asp.net, gridview, rowcommand

我在传递 CommandArgument 并尝试触发 RowCommand 的 GridView 中有一个 LinkBut​​ton

GridView 声明：

```
<asp:GridView PageIndex="0" OnRowCommand="GridView1_RowCommand" PageSize="10" AllowPaging="true" OnPageIndexChanging="GridView1_PageIndexChanging"
ID="GridView1" runat="server" BackColor="White" BorderColor="#CCCCCC" BorderStyle="None"
BorderWidth="1px" CellPadding="4" ForeColor="Black" GridLines="Horizontal" Width="700px"
AutoGenerateColumns="False" OnPageIndexChanged="GridView1_PageIndexChanged"> 
```

GridView 内的 LinkBut​​ton：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:LinkButton ID="LinkButton1" OnClientClick="return confirm('Are you sure you want to delete this checklist?');" runat="server" CausesValidation="false" CommandName="DeleteChecklist" CommandArgument='<%# Eval("refID") %>' Text="Delete"></asp:LinkButton>
    </ItemTemplate>
    <ItemStyle ForeColor="Black" />
    <ControlStyle BorderStyle="None" ForeColor="Black" />
</asp:TemplateField> 
```

后面的代码：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "DeleteChecklist")
    {
        string refID = e.CommandArgument.ToString();
        DAL.DeleteChecklist(refID);
     }
} 
```

我在 RowCommand 放置了一个断点，但它根本没有被触发，知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:33:09.790

我假设您正在`GridView`对回发进行数据绑定。所以总是把它嵌入到`if(!IsPostBack)`支票中：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
         GridView1.DataSource = getSource();
         GridView1.DataBind();
    }
} 
```

否则将不会触发事件并且编辑的值将被覆盖。

另一个可能的原因：你禁用了`ViewState`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T19:36:36.897

**EDIT2：**好的，它变得更好了。您可以使用它，`AllowCustomPaging="true"`但该属性`VirtualItemCount`必须大于`PageSize`您的网格视图的值。看这个：

```
<asp:GridView runat="server" ID="gvPresupuestos" AutoGenerateColumns="False" 
    OnRowCommand="gvPresupuestos_RowCommand" 
    OnPageIndexChanging="gvPresupuestos_PageIndexChanging" 
    OnPreRender="gvPresupuestos_PreRender" ItemType="Core.NominaEntities.TipoPresupuesto" 
    AllowPaging="true" PageSize="1" AllowCustomPaging="true"
    UseAccessibleHeader="true" GridLines="None" CssClass="table table-hover" 
    ShowHeaderWhenEmpty="True">
    <Columns>
        <asp:BoundField HeaderText="Nombre del presupuesto" DataField="Nombre" />
        <asp:TemplateField HeaderText="Opciones">
            <ItemTemplate>
                <a href='<%# "Detalle?p=" + Item.IdTipoPresupuesto.ToString() %>' 
                    target="_self"><%# Item.Editable ? "Editar" : "Ver" %></a>
                <asp:LinkButton runat="server" 
                    CommandArgument='<%# Item.IdTipoPresupuesto.ToString() %>' 
                    CommandName="Deshabilitar" 
                    Text="Deshabilitar" Visible='<%# !Item.Editable ? true : false %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

FillView() 方法：

```
private void FillView(int desiredPage)
{
    var cliente = ClientFactory.CreateAuthServiceClient();
    using (cliente as IDisposable)
    {
        // this list only has 1 item.
        List<TipoPresupuesto> resultado = cliente.ObtenerTiposDePresupuesto();
        gvPresupuestos.DataSource = resultado;
        // For testing pursposes, force the virtual item count to 1000.
        gvPresupuestos.VirtualItemCount = 1000;
        gvPresupuestos.DataBind();
    }
} 
```

**`gvPresupuestos_RowCommand`因此，除非虚拟项目计数大于`VirtualItemCount`属性，否则LinkBut​​ton 不会触发事件。**

**我希望这有帮助。**

**EDIT1：**我找到了。`"AllowCustomPaging"`您可以通过将 的值更改为**false**来使其工作。我不知道为什么，但希望这可以帮助。

**原始“答案”：**

我也有同样的问题。你可以在这里看到我的代码：

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
<div class="jumbotron jumbotron-small">
    <h2>Presupuestos</h2>
</div>

<asp:GridView runat="server" ID="gvPresupuestos" 
AutoGenerateColumns="False" AllowPaging="true" AllowCustomPaging="true" PageSize="20"
OnRowCommand="gvPresupuestos_RowCommand" 
OnPageIndexChanging="gvPresupuestos_PageIndexChanging" 
DataKeyNames="IdTipoPresupuesto" OnPreRender="gvPresupuestos_PreRender"
ItemType="Core.NominaEntities.TipoPresupuesto"  ShowHeaderWhenEmpty="True" 
UseAccessibleHeader="true" GridLines="None" CssClass="table table-hover">
<Columns>
    <asp:BoundField HeaderText="Nombre del presupuesto" DataField="Nombre"/>
    <asp:TemplateField HeaderText="Opciones">
        <ItemTemplate>
        <asp:LinkButton runat="server" Text="Deshabilitar" 
            Font-Underline="true" CommandName="Deshabilitar" 
            Visible='<%# Item.Editable ? true : false %>'
            CommandArgument='<%# Item.IdTipoPresupuesto %>' />
        <a href='<%# "Detalle?p=" + Item.IdTipoPresupuesto.ToString() %>' 
            target="_self"><%# Item.Editable ? "Editar" : "Ver" %></a>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:ButtonField ButtonType="Link" CommandName="Deshabilitar" 
    Text="Deshabilitar (this fires event)" />
</Columns>
</asp:GridView>

<table class="large-table">
    <tr>
        <td class="text-right">
            <a runat="server" class="btn btn-primary" href="Detalle">Nuevo presupuesto</a>
        </td>
    </tr>
</table>
</asp:Content> 
```

背后的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        InitializeControls();
        SetPermissions();
        FillView(1);
    }
}

protected void gvPresupuestos_PreRender(object sender, EventArgs e)
{
    // Habilita bootstrap
    gvPresupuestos.HeaderRow.TableSection = TableRowSection.TableHeader;
}

protected void gvPresupuestos_RowCommand(object sender, GridViewCommandEventArgs e)
{
    // This is never fired by the LinkButton in the ItemTemplate
    // But the ButtonField actually fires it.
    if (e.CommandName.Equals("Deshabilitar"))
    {
        // This is how I've been doing it in the whole project but thanks to this 
        // shit I can't use the CommandArgument of the LinkButton in the ItemTemplate
        // Guid idPresupuesto = new Guid(e.CommandArgument.ToString());

        // I don't know what I'm supposed to do now. 
        // ¿Why this only happens in this page?, ¿WTF?
        Guid idPresupuesto = gvPresupuestos.GetTheIdFromDataKeysWithFuckingMagic();
        var cliente = ClientFactory.CreateServiceClient();
        using (cliente as IDisposable)
        {
            cliente.DeshabilitarPresupuesto(idPresupuesto);
        }
    }
    FillView(1);
}

protected void gvPresupuestos_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    gvPresupuestos.PageIndex = e.NewPageIndex;
    FillView(e.NewPageIndex + 1);
}

#region helper methods
private void InitializeControls()
{
    // Not required yet
}

private void FillView(int desiredPage)
{
    var cliente = ClientFactory.CreateAuthServiceClient();
    using (cliente as IDisposable)
    {
        var resultado = cliente.ObtenerTiposDePresupuesto();
        gvPresupuestos.DataSource = resultado;
        gvPresupuestos.DataBind();
    }
}

private void SetPermissions()
{
    // not required yet
}
#endregion 
```

我尝试在 gridview 中启用和禁用视图状态，但没有得到不同的结果。

以下是断点发生的情况：

1.  您输入 url 并首次加载页面。
2.  然后访问 if(!IsPostBack) 块中的代码。
3.  现在您可以单击 ItemTemplate 中的 LinkBut​​ton 和 ButtonField（[看截图](https://scontent-lax1-1.xx.fbcdn.net/hphotos-xft1/v/t1.0-9/11811358_1587771768155236_1261118747084971940_n.jpg?oh=11b6a5b79092a3f7d67fcdf201768225&oe=5658740C)）
    *   如果单击 ItemTemplate 中的 LinkBut​​ton，它不会触发 gvPresupuestos_RowCommand。当然，它会进行回发。但是 gvPresupuestos_RowCommand**根本**不会被解雇。我的代码不能处理那种奇怪的回发，而页面会做与常规回发一样的事情。之后，你会得到一个空的gridview，因为在这个回发的流程中，FillView() 永远不会被调用。（[看截图](https://scontent-lax1-1.xx.fbcdn.net/hphotos-xpt1/v/t1.0-9/11703385_1587771771488569_2791814431967077683_n.jpg?oh=94683a851a813b6dd63d055d798fc927&oe=5648CA39)）
    *   如果单击 ButtonField，则会触发事件 gvPresupuestos_RowCommand，一切正常。但我需要点击行的 IdPresupuesto，我现在不知道如何获取它。

这很奇怪。我已经在系统的所有信息页面中实现了这个模型（大约有 15 个这样的模块），直到现在才出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T13:27:37.433

我对 ListView 中的 LinkBut​​ton 有同样的问题。原来我应该在 ListView 中使用 OnItemCommand，而不是 OnRowCommand。

改变这个解决了这个问题。

此外，您必须在 LinkBut​​ton 上设置 CommandName（但没有 OnCommand）。

# google-chrome-extension - 我可以开发与 chromes pdf 查看器一起使用的 chrome 扩展吗

> ID：13719944
> 
> 赞同：4
> 
> 时间：2012-12-05T09:29:31.677
> 
> 标签：google-chrome-extension, pdf-viewer

是否可以开发一个也适用于 chrome 的 PDF-Viewer 的 chrome 扩展。

特别是我想让[谷歌词典扩展](https://chrome.google.com/webstore/detail/google-dictionary-by-goog/mgijmajocgfcbeboacabfgobmjgjcoja)与 PDF 一起工作，这样我就可以双击 PDF 中的单词并获得即时翻译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-22T17:20:26.820

您可以在 pdf 查看器中运行 chrome 扩展，但方式有限：您可以插入菜单项（上下文菜单）。这个[英语词典扩展](https://chrome.google.com/webstore/detail/english-dictionary-transl/neomigpibafpboiknmijddgnncengfnm)和你想要的一样：通过双击任何页面来工作，但在 pdf 查看器中它只能通过右键单击来工作。

# python - 尾随分隔符使熊猫 read_csv 感到困惑

> ID：13719946
> 
> 赞同：16
> 
> 时间：2012-12-05T09:29:44.010
> 
> 标签：python, pandas, numpy, csv, delimiter

csv（逗号分隔）文件，其中行有一个额外的尾随分隔符，似乎混淆了`pandas.read_csv`. （数据文件为[1]）

它将额外的分隔符视为有额外的列。所以比标题要求的多一列。然后`pandas.read_csv`将第一列作为行标签。总体效果是列和标题不再对齐 - 第一列成为行标签，第二列由第一个标题命名，等等。

这很烦人。知道如何告诉`pandas.read_csv`做正确的事吗？我找不到一个。

好书，顺便说一句。

* * *

[1]：2012 FEC Election Database 来自*Python for Data Analysis一书的第 9 章*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-08-05T17:52:44.790

对于所有仍在寻找它的人。韦斯为此写了一篇[博文](http://wesmckinney.com/blog/update-on-upcoming-pandas-v0-10-new-file-parser-other-performance-wins/)。如果行中的一个值过多，则将其视为行名称。

`index_col=False`可以通过将选项设置为来更改此行为`read_csv`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T22:17:05.597

我创建了一个 GitHub 问题来看看自动处理这个问题：

[https://github.com/pydata/pandas/issues/2442](https://github.com/pydata/pandas/issues/2442)

我认为 FEC 文件格式略有改变，导致了这个烦人的问题——如果你使用这里发布的[http://github.com/pydata/pydata-book](http://github.com/pydata/pydata-book)，你希望不会有这个问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T13:07:17.760

嗯，有一个非常简单的解决方法。在读取 csv 文件时在标题中添加一个虚拟列：

```
cols = ...
cols.append('')
records = pandas.read_csv('filename.txt', skiprows=1, names=cols) 
```

然后列和标题再次对齐。

# c - OpenMP 中的 Mandelbrot 集

> ID：13719965
> 
> 赞同：4
> 
> 时间：2012-12-05T09:30:42.750
> 
> 标签：c, parallel-processing, openmp, mandelbrot

有人可以帮我改进这段代码并给我一些提示。我试图自己创建一个 OpenMP 版本的 Mandelbrot 集。我是 OpenMP 初学者，在这里我没有加快速度，这可能是因为`#pragma omp critical`但我现在想不出更好的主意。

```
int main()
{
    // picture resolution 
    int iX,iY;
    const int ImageWidth = 1000; 
    const int ImageHeight = 1000;

    double Cx,Cy;
    const double CxMin=-2.5;
    const double CxMax=1.5;
    const double CyMin=-2.0;
    const double CyMax=2.0;

    double PixelWidth=(CxMax-CxMin)/ImageWidth;  /* scaled x coordinate of pixel (must be scaled to lie somewhere in the Mandelbrot
                                                    X scale (-2.5, 1.5) */
    double PixelHeight=(CyMax-CyMin)/ImageHeight;/* scaled y coordinate of pixel (must be scaled to lie somewhere in the Mandelbrot
                                                    Y scale (-2.0, 2.0) */

    const int MaxColorComponentValue=255;
    FILE * fp;
    char *filename="MandelbrotSet.ppm";
    char *comment="# ";// comment in ppm picture should start with # 

    unsigned char color[3]; // colors [R, G ,B]

    // Z=Zx+Zy*i  ;   Z0 = 0 
    double Zx, Zy;
    double Zx2, Zy2; // Zx2=Zx*Zx;  Zy2=Zy*Zy 

    int Iteration;
    const int IterationMax=150;

    const double Bailout=2; // bail-out value
    double Circle_Radius=Bailout*Bailout; // circle radius

    fp= fopen(filename,"wb"); 

    //write the header to the picture file
    fprintf(fp,"P6\n %s\n %d\n %d\n %d\n",
            comment,ImageWidth,ImageHeight,MaxColorComponentValue);

    // For each pixel on the screen do:
    // initialize_timer ( );
    // start_timer ( );
    omp_set_dynamic(1);
    omp_set_num_threads(4);

    #pragma omp parallel /*reduced(>:Circle_Radius)*/ 
    {
        #pragma omp for private(iY,iX,Iteration,Zx,Zy,Zx2,Zy2,color) \
                        schedule(dynamic) //or runtime 

        for(iY=0;iY<ImageHeight;iY++)
        {
            Cy=CyMin + iY*PixelHeight;

            if (fabs(Cy)< PixelHeight/2) Cy=0.0; // Main antenna 

            #pragma omp critical
            for(iX=0;iX<ImageWidth;iX++)
            {         
                Cx=CxMin + iX*PixelWidth;

                Zx=0.0;
                Zy=0.0;
                Zx2=Zx*Zx;
                Zy2=Zy*Zy;
                /* */

                for (Iteration=0;Iteration<IterationMax && ((Zx2+Zy2)<Circle_Radius);Iteration++)
                {
                    Zy=2*Zx*Zy + Cy;
                    Zx=Zx2-Zy2 +Cx;
                    Zx2=Zx*Zx;
                    Zy2=Zy*Zy;
                };

                if (Iteration==IterationMax)
                { //  interior of Mandelbrot set = black 
                    color[0]=0;
                    color[1]=0;
                    color[2]=0;    
                }
                //
                else{
                    color[0]=180;
                    color[1]=0;
                    color[2]=0; 

                    // Gradient((double)(Iteration-log2(log2(sqrt(Zx2+Zy2))))/IterationMax,color);
                }

                fwrite(color,1,3,fp);
            }
        }
    }

    fclose(fp);
    // stop_timer ( );
    //
    // printf("Elapsed time: %lf\n",elapsed_time ( ));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:41:58.430

根据[评论](https://stackoverflow.com/questions/13719965/mandelbrot-set-in-openmp#comment18846347_13719965)修复方法会导致这些时间¹：

没有 openMP：

```
$ gcc -std=c99 -O3 -march=native mandel.c && time ./a.exe

real    0m12.324s
user    0m0.000s
sys     0m0.000s 
```

并启用 openMP：

```
User@IXL /cygdrive/e/mingw64
$ gcc -std=c99 -O3 -march=native -fopenmp mandel.c && time ./a.exe

real    0m3.619s
user    0m0.000s
sys     0m0.015s 
```

输出印象：

```
 ...:..........     ....                ..............                                                ....;.=:./
                                            .............:............            ........::::......        ....                                .......... .++^
                                                .........^.:.....:;.........................:_::.:.........:::::.                               .....: ..:.^
                                                  ........:::=;:=:.....::....................::=|;:........:.......                           .....::|:_.,=
                                                   ..........:::==:;:.:::..............:::.)=;-`|`:-.......:::=,. ......                    .....:==.:^   _
                                                    ..........:<, ^./;;==:......::.......:_.,    -<;.........:`_;:............         . ..........-=:_,
                                                    ...... ...:='      _,;;:.....:=v+`::::==,    _,:::=|,.:;=+</+;... ::.:........................._.....'
                                                   ......._,+;=^         "=:.:=<.:-  _.  ^ -^    ` "-`. =);)(   "= ....:_,......................../=:.;-
                                                   ...`:::::=-=           =;. -                                _.(:.:..==-:......................+o(.
                                                  ...........=<_                                                   -^==   :.==;...................= :_
                                                 .............:^:...,                                                    -:::.=<,............... .'-.
                                       .... ............:.._.:.=,-                                                            .;:;:.............:v-_
                                        ..........:_,....:=`._/                                                               --_.)(.:.........:/".
                                        .......:,:;,;:=:::=`                                                                      r`;,:........ =|`
                                        ........-=|=/.--.n`                                                                       -"-+=........_/ ,
              .. .                      ........^`:_,                                                                                 =::......._
              .._..                    ...........::-.                                                                                 ..,:....,.
              ......               ............._,::<                                                                                   -_,:..:./
                ..:......  ...................:.^`                                                                                      -'=::::=`
                 .... .........._..............:`_                                                                                         i:::`
                 ......:.........::.........:::v                                                                                            (::,
                 .....:_:...:..._;=:..::......:.>=                                                                                          ==;
               .......:::::|=-:_,=-_.;=.:,:..::<,                                                                                             =`
             ...........::=o  -`        ^/):::_^                                                                                              +
....      .....:......:_===^                _=;^                                                                                              i
.................=:.:.::;`                   _=
..................-=+=;;                      -
..:;:...::....:::;%,
..:;:...::....:::;(`
.................:;;^=;;:                     _
.................::...::;,                  _/+
...       ............:-=;=_,             _.=`;.                                                                                              i
             ............::| _:_,.._..  .^":::-                                                                                               +
                ....... ;:;+``:-`;.=+;-^:`:.._.X`                                                                                             =,
                 ......-:...:...-==:..::......:.>`                                                                                          -=;
                 ......:.........::...........:"_                                                                                           /::`
                 .... ..........-..............:,/                                                                                         i:::,
                ..:......  ...................:^.,                                                                                      _,=::::=`
              ......               .............-`::)                                                                                   _-`:..:+'
              .....                    ...........:;_.                                                                                 !`:......-
             ..                         .......:.,:=`                                                                                -+".......-=
                                        ........_,<(=='=;<=                                                                       _._>,;.......-\
                                        ...: . ...:=;. ..:=`                                                                      >,|;:........ _=,
                                        .:::......:......:{(+=<                                                               _==;=/............]v.
                                            ...........-.....`.:^_                                                         -`  ':;;.............:. /
                                                 .............:..-^`-`                                                  -=|;:^;=`...............:^}\.
                                                  ...........=>-                                                   _.==   :.==;...................= :!
                                                   ...,:::::=_=           =;. _                                -.(:.:"^==_:......................+o(^
                                                    ......-`|;=.,       _.=:.:-".:`  -    ._      _., | =+;-<   .=:..:::-`........................\=:^<,
                                                    ...... ..::;,  ....-^;::.....;|:=,::::=-`    -<=::=^`.::-;<=::...  :...........................-.., |,
                                                    ..........:"=,.+^:;++:......;:.....  :={(   ..=::."......:;=::.........               .......:::-:/`
                                                   ..........::;;::;:..::..............:.:-^`;__+::........::;-`. ....                       ....:;=+..__,=
                                                  ........:_:; :;::........................:::;=;:........::......                             .....;<,-.`-
                                                .......:::.:.....:;.......      ............:=:.^ .........;:.:..                               .....: ..:"._,
                                            .............:...........              .......:::......          ...                                 ........._..-
                                            ..........   .      ...                 ..:........                                                  .....:=:)(
                                       ...........                                  ..:.......                                                   ..-.:s%=+'._,_/'_
                                         ........                                   ...:.....                                                    .. :.-<=::"_/_`-+., 
```

### 代码示例

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>
#include <unistd.h>
#include <stdint.h>
#include <omp.h>

// picture resolution
static const int ImageWidth  = 1000;
static const int ImageHeight = 1000;
static const double CxMin    = -2.5;
static const double CxMax    = 1.5;
static const double CyMin    = -2.0;
static const double CyMax    = 2.0;

int main()
{
    double PixelWidth=(CxMax-CxMin)/ImageWidth; /* scaled x coordinate of pixel (must be scaled to lie somewhere in the Mandelbrot X scale (-2.5, 1.5) */
    double PixelHeight=(CyMax-CyMin)/ImageHeight;/* scaled y coordinate of pixel (must be scaled to lie somewhere in the Mandelbrot Y scale (-2.0, 2.0) */

    const int MaxColorComponentValue=1<<8;
    typedef unsigned char pixel_t[3]; // colors [R, G ,B]
    pixel_t *pixels = malloc(sizeof(pixel_t)*ImageHeight*ImageWidth);

    //write the header to the picture file
    FILE* fp;
    #pragma omp parallel shared(pixels)
    {
        int iY;
        #pragma omp for
        for(iY=0; iY<ImageHeight; iY++) {
            double Cy=CyMin + iY*PixelHeight;
            if (fabs(Cy)< PixelHeight/2) {
                Cy=0.0; // Main antenna
            }
            int iX;
            for(iX=0; iX<ImageWidth; iX++) {
                double Cx=CxMin + iX*PixelWidth;
                double Zx=0.0;
                double Zy=0.0;
                double Zx2=Zx*Zx;
                double Zy2=Zy*Zy;
                /* */
                int Iteration;
                const int IterationMax=150;
                const double Bailout=2; // bail-out value
                const double Circle_Radius=Bailout*Bailout; // circle radius

                for (Iteration=0; Iteration<IterationMax && ((Zx2+Zy2)<Circle_Radius); Iteration++) { // 
                    Zy=2*Zx*Zy + Cy;
                    Zx=Zx2-Zy2 + Cx;
                    Zx2=Zx*Zx;
                    Zy2=Zy*Zy;
                };

                if (Iteration==IterationMax) {
                    //  interior of Mandelbrot set = black
                    pixels[iY*ImageWidth + iX][0] = 0;
                    pixels[iY*ImageWidth + iX][1] = 0;
                    pixels[iY*ImageWidth + iX][2] = 0;
                }
                //
                else {
                    pixels[iY*ImageWidth + iX][0] = ((double)(Iteration-log2(log2(sqrt(Zx2+Zy2))))/IterationMax) * MaxColorComponentValue;
                    pixels[iY*ImageWidth + iX][1] = 0;
                    pixels[iY*ImageWidth + iX][2] = 0;
                }
            }
        }
    }
    //return 0; // TO BENCHMARK without free()/file IO
    //write the header to the picture file
    fp= fopen("MandelbrotSet.ppm","wb");
    fprintf(fp,"P6\n %s\n %d\n %d\n %d\n","# no comment",ImageWidth,ImageHeight,MaxColorComponentValue);
    for(int iY=0; iY<ImageHeight; iY++)
        for(int iX=0; iX<ImageWidth; iX++)
            fwrite(pixels[iY*ImageWidth + iX],1,sizeof(pixel_t),fp);
    fclose(fp);
    free(pixels);
    //  stop_timer ( );
    //
    //  printf("Elapsed time: %lf\n",elapsed_time ( ));
    return 0;
} 
```

* * *

¹没有文件 IO 的时序（参见`return`代码中的注释）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:13:38.707

这是完整的代码。谢谢你帮助我。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>
#include <omp.h>
// #include "timer.h"

void Gradient();

// picture resolution
static const int ImageWidth  = 1000;
static const int ImageHeight = 1000;
static const double CxMin    = -2.5;
static const double CxMax    = 1.5;
static const double CyMin    = -2.0;
static const double CyMax    = 2.0;

int main()
{
    double PixelWidth=(CxMax-CxMin)/ImageWidth; /* scaled x coordinate of pixel (must be scaled to lie somewhere in the Mandelbrot X scale (-2.5, 1.5) */
    double PixelHeight=(CyMax-CyMin)/ImageHeight;/* scaled y coordinate of pixel (must be scaled to lie somewhere in the Mandelbrot Y scale (-2.0, 2.0) */

    const int MaxColorComponentValue=255;
    typedef unsigned char pixel_t[3]; // colors [R, G ,B]
    pixel_t *pixels = malloc(sizeof(pixel_t)*ImageHeight*ImageWidth);

    FILE* fp;

//     initialize_timer ( );
//     start_timer ( );
    #pragma omp parallel shared(pixels)
    {
        int iY;
        #pragma omp for schedule(dynamic)
        for(iY=0; iY<ImageHeight; iY++) {
            double Cy=CyMin + iY*PixelHeight;
            if (fabs(Cy)< PixelHeight/2) {
                Cy=0.0; // Main antenna
            }
            int iX;
            for(iX=0; iX<ImageWidth; iX++) {
                double Cx=CxMin + iX*PixelWidth;
                double Zx=0.0;
                double Zy=0.0;
                double Zx2=Zx*Zx;
                double Zy2=Zy*Zy;
                /* */
                int Iteration;
                const int IterationMax=50;
                const double Bailout=2; // bail-out value
                const double Circle_Radius=Bailout*Bailout; // circle radius

                for (Iteration=0; Iteration<IterationMax && ((Zx2+Zy2)<Circle_Radius); Iteration++) { // 
                    Zy=2*Zx*Zy + Cy;
                    Zx=Zx2-Zy2 + Cx;
                    Zx2=Zx*Zx;
                    Zy2=Zy*Zy;
                };

                if (Iteration==IterationMax) {
                    //  interior of Mandelbrot set = black
                    pixels[iY*ImageWidth + iX][0] = 0;
                    pixels[iY*ImageWidth + iX][1] = 0;
                    pixels[iY*ImageWidth + iX][2] = 0;
                }
                //
                else {
            Gradient((double)((Iteration-log2(log2(sqrt(Zx2+Zy2)))))/IterationMax,pixels[iY*ImageWidth + iX]);
                }
            }
        }
    }

    fp= fopen("MandelbrotSetNEW.ppm","wb");
    fprintf(fp,"P6\n %s\n %d\n %d\n %d\n","# no comment",ImageWidth,ImageHeight,MaxColorComponentValue);   
    fwrite(pixels,sizeof(pixel_t),ImageWidth*ImageWidth,fp);
    fclose(fp);
    free(pixels);

//     stop_timer ( );
//     
//     printf("Elapsed time: %lf \n",elapsed_time ( ));

    return 0;
}

void Gradient(double position,unsigned char c[3])
{

  if (position>1.0){
    if (position-(int)position==0.0) position=1.0;

    else position=position-(int)position;    
  }

  unsigned char nmax=7; // number of color bars 
  double m=nmax*position;

  int n=(int)m; 

  double f=m-n; 
  unsigned char t=(int)(f*255);

switch( n){
   case 0: {
      c[0] =0;
      c[1] = t;
      c[2] = 255;
       break;
    };
   case 1: {
      c[0] = 0;
      c[1] = 255-t;
      c[2] = 255;
       break;
    };
   case 2: {
      c[0] = t;
      c[1] = 255;
      c[2] = 0;
       break;
    };
   case 3: {
      c[0] = 255;
      c[1] = 255 - t;
      c[2] = 0;
       break;
    };
   case 4: {
      c[0] = t;
      c[1] = 0;
      c[2] = 255;
       break;
    };
   case 5: {
      c[0] = 255;
      c[1] = 0;
      c[2] = 255 - t;
       break;
    };
    default: {
      c[0] = 255;
      c[1] = 0;
      c[2] = 0;
       break;
    };

};

}; 
```

# algorithm - 检查最大堆中第 k 个最小元素是否大于给定数字的算法

> ID：13719966
> 
> 赞同：2
> 
> 时间：2012-12-05T09:30:48.427
> 
> 标签：algorithm, heap, max-heap

> **可能重复：**
> [我们如何在 O(k) 时间内从最大堆中找到第 k 个最大元素？](https://stackoverflow.com/questions/4922648/how-we-can-find-kth-largest-element-from-a-max-heap-in-ok-time)

有一个给定的最大堆，我们想找到一个时间复杂度为 o(k) 的算法来检查第 k 个最小元素是否大于任意给定数字。

# php - 从多语言字符串中删除所有非字母字符

> ID：13719969
> 
> 赞同：0
> 
> 时间：2012-12-05T09:30:56.493
> 
> 标签：php, preg-replace, multilingual

我有一个适用于多种语言的网站，我正在寻找一个 php 函数来从多种语言的字符串中去除所有垃圾。

示例：我将以下内容插入到我的数据库中，它是印地语，但其他语言也是如此。

कमबख़्त को गाली भी सलीक़े से नहीं दी जाती...\'

所以你可以看到我得到了不想要的 ...\' 字符。

这不适合多种语言

```
$newString = preg_replace('/[^a-z0-9]/i', ' ', $text); 
```

我也试过了，我不太明白这里发生了什么，这也不起作用。

```
$newString = preg_replace(''/^[\p{L}\p{M}\p{Nd}]{2,}$/u'', ' ', $text); 
```

我真的只需要去掉键盘上所有不是字母或数字的东西，即

```
!@£$%^&*()_+=.<>/, etc etc 
```

我不确定字符串中的 ...\' 是否真的不是它看起来是否有意义，因为如果我运行的话。

```
$newString = str_replace("...\'", "", $text); 
```

这是我第一次真正深入了解多语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:44:53.003

我设法用这个把它们弄出来：

```
$test = 'कमबख़्त को गाली भी सलीक़े से नहीं दी जाती...\\';
$test = preg_replace('@[^\x{0900}-\x{097F}]@u', '', $test); 
```

**输出**

```
कमबख़्तकोगालीभीसलीक़ेसेनहींदीजाती 
```

我使用的正则表达式替换了所有不在该 unicode 范围内的字符。

# php - 使用 PHP 上传 PDF 文件失败

> ID：13719975
> 
> 赞同：0
> 
> 时间：2012-12-05T09:31:12.103
> 
> 标签：php, file-upload

我无法上传我的 PDF 文件，即使我尝试了谷歌的一些提示。但是，我的 php 上传仍然无法正常工作。我已将文件夹权限更改为`777`.

```
<form enctype="multipart/form-data" action="uploader.php" method="POST"> 
<input type="hidden" name="MAX_FILE_SIZE" value="3500000" />
Upload File: <input name="uploadedfile" type="file" />
<input type="submit" value="Upload File" />
</form>

$target_path = "/home/jeinqa/www/apps/upload/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
        echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
                }
        else{
                echo "There was an error uploading the file, please try again!";
                } 
```

显示 ： `There was an error uploading the file, please try again!`

* * *

尝试使用`print_r($_FILES);`：

```
Array ( [uploadedfile] => Array ( [name] => SOP-31 KW-HDR81BTJD.pdf [type] => [tmp_name] => [error] => 2 [size] => 0 ) ) There was an error uploading the file, please try again! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:41:19.400

1.  您的文件夹是否有 777 权限（以及所有子文件夹）？
2.  你在 PHP.ini 中启用了 safe_mode 吗？
3.  您的 MAX_FILE_SIZE 为 10 KB，但我怀疑您的文件是否如此之小，请检查您的文件大小。
4.  target_path 是否存在？
5.  尝试将您的 target_path 从绝对更改为相对，它可能会变成：上传。

**更新**

你的文件太大了！只需更改最大尺寸！有关详细信息，请参阅[http://php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)。

您的错误：值：2；上传的文件超出了 HTML 表单中指定的 MAX_FILE_SIZE 指令。

# jsf-2 - Portlet 首选项

> ID：13719977
> 
> 赞同：0
> 
> 时间：2012-12-05T09:31:20.070
> 
> 标签：jsf-2, liferay, portlet

我正在尝试将 portlet 首选项存储在本[教程中提到的支持 bean (JSF) 中](http://www.portletfaces.org/doc/portletfaces-bridge/2.0.0/docbook/en-US/html/portletpreferences-and-jsf.html)

但是，我不明白他们是如何在这里导入 Preference 类的

`Map<String, Preference> mutablePreferenceMap = (Map<String, Preference>) elResolver.getValue( facesContext.getELContext(), null, elExpression);`

包裹`javax.portlet.*`不包含`faces.preference.Preference`

任何人都对此有所了解，特别是如何保存 portlet 首选项

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:33:19.473

You have to add the Liferay Faces Bridge JAR to your project.

Add the following dependencies:

```
<dependencies>
  <dependency>
    <groupId>com.liferay.faces</groupId>
    <artifactId>liferay-faces-alloy</artifactId>
    <version>3.1.0-ga1</version>
  </dependency>
  <dependency>
    <groupId>com.liferay.faces</groupId>
    <artifactId>liferay-faces-bridge-impl</artifactId>
    <version>3.1.0-ga1</version>
  </dependency>
  <dependency>
    <groupId>com.liferay.faces</groupId>
    <artifactId>liferay-faces-portal</artifactId>
    <version>3.1.0-ga1</version>
  </dependency>
</dependencies> 
```

and the liferay-faces-bridge-api jar which is a dependency for liferay-faces-bridge-impl has this Preference interface.

More info:

[http://www.liferay.com/community/liferay-projects/liferay-faces/download](http://www.liferay.com/community/liferay-projects/liferay-faces/download)

# ios - 缩放后在 UIScrollView 中启用分页

> ID：13719980
> 
> 赞同：7
> 
> 时间：2012-12-05T09:31:38.597
> 
> 标签：ios, uiscrollview, xcode4.3, paging, zooming

我有一个`UIScrollView`加载三个不同页面的页面。
当我放大页面并缩小到原始大小时，应用程序停止让我在页面之间滚动，就好像禁用了分页一样。当缩小到原始大小（Scale == 1）时，我该怎么做才能重新启用分页？

**这是我的代码**

```
- (void)viewDidLoad
{
    [ScView setMaximumZoomScale : 2.0f];
    [ScView setMinimumZoomScale : 1.0f];

    ScView.contentSize = CGSizeMake(1024*3, 1.0);
    ScView.pagingEnabled = YES;

    ScView.clipsToBounds = YES;
    ScView.delegate = self;

    ScView.showsHorizontalScrollIndicator = NO;
    ScView.showsVerticalScrollIndicator = NO;

    [super viewDidLoad]; 

    [self returnImages];
}

-(void)returnImages{
    for (pageNumber = 1; pageNumber <= 3; pageNumber++) {
        imagen = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",pageNumber]]];
        imagen.frame = CGRectMake((pageNumber-1)*1024, 0, 1024, 768);

        [ScView addSubview:imagen];
    }
}

//
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
        return ScView;
   //   return [imagen initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",pageNumber]]];
}

- (void)scrollViewWillBeginZooming:(UIScrollView *)myScrollView withView:(UIView *)view
{ 
    NSLog(@"Scroll Will Begin");
    ScView.scrollEnabled = YES;
}

- (void)scrollViewDidEndZooming:(UIScrollView *)myScrollView withView:(UIView *)view atScale:(float)scale 
{ 
    if(scale == 1)
    {
        ScView.scrollEnabled = YES;
        ScView.pagingEnabled = YES;
        [self returnImages];
        NSLog(@"Scrolol will end");
        //ScView.maximumZoomScale = 2.0f;
       // [super viewDidLoad];

        [self returnImages];
    }
} 
```

任何想法将不胜感激..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T20:21:11.940

要获得正确的分页和缩放，您必须将每个页面的 UIScrollView 嵌入到您的父 UIScrollView 中。这种组合将允许您同时使用分页和内部滚动。

这是带有父滚动视图和三个嵌入式可缩放页面的 UIViewController 示例。

```
#define VIEW_FOR_ZOOM_TAG (1)

@implementation SVViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UIScrollView *mainScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    mainScrollView.pagingEnabled = YES;
    mainScrollView.showsHorizontalScrollIndicator = NO;
    mainScrollView.showsVerticalScrollIndicator = NO;

    CGRect innerScrollFrame = mainScrollView.bounds;

    for (NSInteger i = 0; i < 3; i++) {
        UIImageView *imageForZooming = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"page%d", i + 1]]];
        imageForZooming.tag = VIEW_FOR_ZOOM_TAG;

        UIScrollView *pageScrollView = [[UIScrollView alloc] initWithFrame:innerScrollFrame];
        pageScrollView.minimumZoomScale = 1.0f;
        pageScrollView.maximumZoomScale = 2.0f;
        pageScrollView.zoomScale = 1.0f;
        pageScrollView.contentSize = imageForZooming.bounds.size;
        pageScrollView.delegate = self;
        pageScrollView.showsHorizontalScrollIndicator = NO;
        pageScrollView.showsVerticalScrollIndicator = NO;
        [pageScrollView addSubview:imageForZooming];

        [mainScrollView addSubview:pageScrollView];

        if (i < 2) {
            innerScrollFrame.origin.x += innerScrollFrame.size.width;
        }
    }

    mainScrollView.contentSize = CGSizeMake(innerScrollFrame.origin.x + innerScrollFrame.size.width, mainScrollView.bounds.size.height);

    [self.view addSubview:mainScrollView];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [scrollView viewWithTag:VIEW_FOR_ZOOM_TAG];
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate {
    return NO;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-27T05:46:04.387

我遵循@NikNarmo 的解决方案，编写了一个小的 swift xcode 项目来演示缩放和分页功能。

希望能帮助任何想做同样任务的人。

一些代码来自 UIScrollView 教程：入门[http://www.raywenderlich.com/76436/use-uiscrollview-scroll-zoom-content-swift](http://www.raywenderlich.com/76436/use-uiscrollview-scroll-zoom-content-swift)，

还有一些来自 A Beginner's Guide to UIScrollView [http://www.appcoda.com/uiscrollview-introduction/](http://www.appcoda.com/uiscrollview-introduction/)。

使用 Xcode 7.0 和 Swift 2.0

```
 override func viewDidLoad() {

    super.viewDidLoad()

    mainScrollView = UIScrollView(frame: self.view.bounds)
    mainScrollView.pagingEnabled = true
    mainScrollView.showsHorizontalScrollIndicator = false
    mainScrollView.showsVerticalScrollIndicator = false

    pageScrollViews = [UIScrollView?](count: photos.count, repeatedValue: nil)

    let innerScrollFrame = mainScrollView.bounds

    mainScrollView.contentSize =
        CGSizeMake(innerScrollFrame.origin.x + innerScrollFrame.size.width,
            mainScrollView.bounds.size.height)

    mainScrollView.backgroundColor = UIColor.redColor()
    mainScrollView.delegate = self
    self.view.addSubview(mainScrollView)

    configScrollView()
    addPageControlOnScrollView()
} 
```

神奇的是在 func scrollViewWillEndDragging 中，当 contentSize 是否等于 mainScrollViewContentSize 时，如果是 mainScrollViewController，则进行分页，否则什么也不做。

```
 func scrollViewWillEndDragging(scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {

    let targetOffset = targetContentOffset.memory.x
    let zoomRatio = scrollView.contentSize.height / mainScrollViewContentSize.height

    if zoomRatio == 1 {
        // mainScrollViewController
        let mainScrollViewWidthPerPage = mainScrollViewContentSize.width / CGFloat(pageControl.numberOfPages)

        let currentPage = targetOffset / (mainScrollViewWidthPerPage * zoomRatio)
        pageControl.currentPage = Int(currentPage)
        loadVisiblePages()

    }
    else {
        // pageScorllViewController
    }
} 
```

这是项目代码[https://github.com/Charles-Hsu/ScrollViewDemo](https://github.com/Charles-Hsu/ScrollViewDemo)

# jquery - jqGrid没有出现在IE7中

> ID：13719996
> 
> 赞同：0
> 
> 时间：2012-12-05T09:32:12.830
> 
> 标签：jquery, jqgrid, internet-explorer-7

我试图让 jqGrid 出现在 IE7 中。在 IE8 中可以，但在 IE7 中，它根本不出现。它使用的是本地数据，尽管我还添加了对 JSON2.js 的引用以防万一。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:04:38.597

问题是 postData 部分包含 2 个项目，在第 2 个项目之后有一个流氓逗号，所以看起来像：-

```
postData: {
    var1: 1,
    var2: 2,
    } 
```

这通过了 IE9，但在 IE7 兼容模式下，它抛出了一个错误。