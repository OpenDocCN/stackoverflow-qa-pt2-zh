# StackOverflow 问答 14505000-14505999

# java - 使用 LDAP 和 Servlet 进行透明身份验证

> ID：14505000
> 
> 赞同：1
> 
> 时间：2013-01-24T15:34:26.400
> 
> 标签：java, authentication, tomcat, servlets, ldap

我们有 Windows Active Directory，所有用户都在其中注册并用于登录 Windows。

我们有一个 Apache 服务器配置为使用 LDAP 来验证该 Active Directory 中的用户。它的设置是这样的，在 PHP 中，我们所要做的就是调用`$_SERVER['REMOTE_USER']`. 浏览器验证 Windows 中的用户登录并将此数据发送到 Apache，Apache 与 LDAP 对话以验证身份验证。当 LDAP 进行身份验证时，该代码返回用户的登录名，否则返回 null。

通过这种方式，我们可以安全轻松地在 PHP 中验证用户身份，并使用他们的 AD 登录来控制对我们软件的访问。另一个优点是我们不需要登录页面，甚至不需要处理变量中的密码：身份验证对用户透明地处理，他们一直自动登录到我们的软件，他们的密码永远不会进入我们的代码。

我想用 Servlet 做同样的事情。如果它与 PHP 一起使用，我认为没有理由不会发生这种情况。但我找不到该怎么做。我用谷歌搜索但找不到任何东西。有没有人做过类似的事情并且可以指出我的方法？

使用登录名和密码的标准身份验证在 Java 中运行。如果我有域、登录名和密码（在 Servlet 中来自登录页面），我可以验证任何用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:41:21.760

您要做的是将 SSO 提供程序插入您的 Web 应用程序。有几种选择，您必须自己研究什么最适合您的环境。您可能想要调查以下所有启用 SSO 的安全框架：

*   [阿帕奇希罗](http://shiro.apache.org/)
*   [春季安全](http://static.springsource.org/spring-security/site/)
*   [JCIFS](http://jcifs.samba.org/)

也有像 CA SiteMinder 这样的商业产品做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:44:38.723

您在 servlet 的 doGet 和 doPost 方法中拥有的 HttpServletRequest 对象具有 PHP 的等价物`$_SERVER['REMOTE_USER']`，它被称为[getRemoteUser()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:28:03.557

您的帖子被标记为 Tomcat。您可以在 tomcat 中添加一个“领域”来进行身份验证。

我不知道你怎么不能提示输入密码，除非你使用某种 SASL 插件来验证用户对 LDAP。

$_SERVER['REMOTE_USER'] 暗示您正在使用“HTTP Authentication”标头，这将（AFIK）需要弹出的凭据。如果仅对 Windows 服务器使用 IE，这可能是透明的。

有[一个如何配置tomcat的例子](http://ldapwiki.willeke.com/wiki/Tomcat%20And%20LDAP)

# visual-studio - 调用执行程序“executor://mstestadapter/v1”时发生异常：对象引用未设置为对象的实例

> ID：14505003
> 
> 赞同：22
> 
> 时间：2013-01-24T15:34:50.007
> 
> 标签：visual-studio, tfs

我们在项目中使用 Visual Studio 2012 和 Team Foundation Server 2010。由于我们使用的是 Microsoft Fakes，因此我们可能没有使用 Team Build 2010 的启动测试功能，因此我创建了一个构建活动，它调用 VSTest.Console.exe 并传递测试程序集。这种方法对我们来说效果很好。但是，在最近签入后，我们在执行 Vstest.console.exe 时收到以下错误

错误：调用执行程序“executor://mstestadapter/v1”时发生异常：对象引用未设置为对象的实例。

我将二进制文件复制到我的本地机器，并且能够再次得到错误。有趣的是，我们在签入前运行了一个开发版本，它运行相同的 vstest.console.exe 并具有相同的参数并且可以正常工作。我的机器上有两个文件夹，一个可以正常工作，另一个不能。编译后的程序集看起来大小相同，并且没有太大的差异。

我尝试使用进程监视器，但除了进程返回退出代码 1 之外找不到任何明显的东西。有人知道这个错误吗？有什么方法可以从我的测试运行中找到更多信息？

问候，

哈米德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:56:43.943

我们找到了问题的根源。我们正在使用 Entity Framework 5.0，并且我们还遇到了一些测试程序集以 .Net 4.0 为目标而一些以 .Net 4.5 为目标的情况。

当我们尝试运行测试以使针对不同版本的 .Net 框架和使用 Entity Framework 5.0 的程序集在同一个测试 (vstest.console.exe) 进程中运行时，我们会收到此错误。

我认为这与 Entity Framework 5.0 附带两个版本（net40 和 net45）的方式有关。一旦在该过程中加载了一个版本的库，就无法加载另一个版本，这会导致错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-29T12:30:43.403

这对我有用：在 Visual Studio 中，测试 -> 测试设置 -> 默认处理器架构 -> X64。

虽然它可能无法解决每个人的问题，但希望它对你们中的一些人有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-15T12:22:56.727

我刚才在**Visual Studio 2017**中使用新的**MSTest.Framework**和**MSTest.TestAdapter**（以便能够使用*Live Unit Testing*）收到了相同的错误消息。原来我在我的解决方案中使用了这些包的多个版本。将它们合并到最新版本解决了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T08:24:36.193

`AssemblyInfo`当在项目中指定以下内容时，我在主题中指定了相同的错误`AssemblyAttribute`：

```
[assembly: AssemblyCulture("en")] 
```

如果`attribute`存在，则单元测试的运行将失败。如果我删除这行代码或删除`en`语言，则单元测试的运行会成功。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-28T04:48:28.330

> 调用执行程序“executor://mstestadapter/v2”时发生异常

我的 BuildAgents 文件夹中有多个 TestAdapter 和 TestFramework，删除 v1.1.11 版本解决了这个问题：

[![在此处输入图像描述](../Images/3b1485d69638b02513493c5f6d4f4335.png)](https://i.stack.imgur.com/r7Epx.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-05T15:59:56.770

这发生在我最近在 VS 2019 中。使用 NuGet 更新到最新版本的 MSTest.TestAdapter 和 MSTest.TestFramework 为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-28T18:40:29.223

我尝试了网上的一切来解决这个异常。最后，我通过安装 Visual Studio 2013 的 Update v4（我目前正在使用）解决了这个问题。希望能帮助到你！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-29T05:31:59.550

删除 app.config 和 packages.config（如果存在）并通过 nuGet 包重新安装实体框架对我有用。

# mysql - 如何在不更改基础表的情况下提高 MySQL 查询的性能？

> ID：14505008
> 
> 赞同：0
> 
> 时间：2013-01-24T15:34:58.593
> 
> 标签：mysql, performance

我有一个从 3rd 方产品查询数据的应用程序。因此，我不想改变表结构。

有没有办法可以纯粹在查询方面提高效率？

我的查询是：

```
CallsClosed.Query = @"SELECT COALESCE(ti.FIRST_NAME,'Not Assigned') AS 'Technician', COUNT(*) 'Calls_Closed'
FROM WorkOrder_Threaded wot
INNER JOIN WorkOrder wo ON wot.WORKORDERID=wo.WORKORDERID
LEFT JOIN SDUser sdu ON wo.REQUESTERID=sdu.USERID
LEFT JOIN AaaUser aau ON sdu.USERID=aau.USER_ID
LEFT JOIN WorkOrderStates wos ON wo.WORKORDERID=wos.WORKORDERID
LEFT JOIN SDUser td ON wos.OWNERID=td.USERID
LEFT JOIN AaaUser ti ON td.USERID=ti.USER_ID
WHERE (wo.COMPLETEDTIME != 0) AND (wo.COMPLETEDTIME != -1) AND (wo.COMPLETEDTIME IS NOT NULL)
AND wo.COMPLETEDTIME >= (UNIX_TIMESTAMP(TIMESTAMP('" + sdChartRange.From + @"')) * 1000)
AND wot.THD_WOID=wot.WORKORDERID
GROUP BY Technician ORDER BY 'Calls_Closed' DESC"; 
```

我已经在上面运行了 JetProfiler，看起来主要的罪魁祸首是 wot 表的大小。（约 19k 行）

关于我应该从哪里开始加快查询速度的任何建议？（目前运行大约需要 4s）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:40:59.613

1.  尽量减少您必须执行的连接次数。
2.  回应评论，添加索引。
3.  查看`EXPLAIN QUERY`该查询的结果。
4.  如果解决得满意，请在[小提琴](http://sqlfiddle.com)中发布示例数据，我会看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:44:51.853

*   确保您在用于选择和连接的字段上有索引。
*   检查不再有效的外键（“悬空”）。

# c# - 返回受 SQL UPDATE 语句影响的行

> ID：14505011
> 
> 赞同：1
> 
> 时间：2013-01-24T15:35:01.257
> 
> 标签：c#, asp.net, sql-server-2008

> **可能重复：**
> [SQL：使用 1 个查询更新行并返回列值](https://stackoverflow.com/questions/700786/sql-update-a-row-and-returning-a-column-value-with-1-query)
> [在 ExecuteNonQuery 上获取受影响的行](https://stackoverflow.com/questions/10059158/get-affected-rows-on-executenonquery)

我有一个文本框，用户可以在其中输入他们的 SQL 查询。

示例查询可能是：

```
UPDATE customer SET isnew = 1; 
```

运行上述查询更新 4 行，我如何获得 SQL Server 返回的*“4 行受影响”*消息。

我尝试过使用`InfoMessage`，但这只会返回诸如*“将数据库上下文更改为“数据库名称此处”之类的*消息，而不是实际受影响的行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T15:37:38.483

[SqlCommand.ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)返回影响的记录数`int`：

```
var command = new SqlCommand("UPDATE customer SET isnew = 1;", conn);
int recordsAffected = command.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T15:37:34.457

它不会收到您想要的消息，但这将获得相同的计数：

```
 declare @RC int
(your statement here)
SELECT @RC = @@ROWCOUNT 
```

这将为您提供语句的行数。

# arrays - 如何使用 JAXB2（取消）编组列表或数组作为根元素？

> ID：14505017
> 
> 赞同：1
> 
> 时间：2013-01-24T15:35:16.007
> 
> 标签：arrays, list, jaxb, jaxb2

我想用结构如下的 JAXB2 注释来编组和解组文档：

```
<mylist>
  <element />
  <element />
  <element />
</mylist> 
```

它是一个格式良好的 XML 文档，它表示一系列元素。

显而易见的事情会导致某种包含列表的根元素：

```
@XmlRootElement(name="container")
public class Container {
    @XmlElement
    @XmlElementWrapper(name="mylist")
    public List<Element> getElements() {...}
} 
```

但后来我得到一个关于 marshall 的文档，其中包含一个多余的根元素：

```
<container>
  <mylist>
    <element />
    <element />
    <element />
  </mylist>
</container> 
```

我正在努力研究如何使用 JAXB2 执行此操作 - 我如何（取消）编组另一个对象不包含的列表或数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:45:29.853

您可以创建一个通用列表包装类，该类可以包含任何带有注释的类的集合`@XmlRootElement`。编组时，您可以将其包装在 的实例中`JAXBElement`以获取所需的根元素。

```
import java.util.*;
import javax.xml.bind.annotation.XmlAnyElement;

public class Wrapper<T> {

    private List<T> items = new ArrayList<T>();

    @XmlAnyElement(lax=true)
    public List<T> getItems() {
        return items;
    }

} 
```

**完整示例**

*   [是否可以以编程方式配置 JAXB？](https://stackoverflow.com/questions/13272288/is-it-possible-to-programmatically-configure-jaxb/13273022#13273022)
*   [http://blog.bdoughan.com/2012/11/creating-generic-list-wrapper-in-jaxb.html](http://blog.bdoughan.com/2012/11/creating-generic-list-wrapper-in-jaxb.html)

# matlab - 在 MATLAB 中访问数组的元素

> ID：14505019
> 
> 赞同：1
> 
> 时间：2013-01-24T15:35:26.117
> 
> 标签：matlab

我正在尝试访问 matlab 中数组的某些元素。考虑以下场景：

```
a = [1 2 3;4 5 6;7 8 9]

b = [1 2;2 1] 
```

我想从 a 访问具有索引 (1,2) 和 (2,1) 的元素。我尝试使用 a(b) 等。但我尝试的方法都没有奏效。

如何在不使用循环的情况下在 matlab 中完成？

如果您可以为matlab中的此类基础知识推荐一些好书，那也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:46:53.497

首先，使用 将您的下标转换为索引[`sub2ind`](http://www.mathworks.com/help/matlab/ref/sub2ind.html)：

```
dim1sub = b(:,1);
dim2sub = b(:,2);

ind = sub2ind(size(a), dim1sub, dim2sub) 
```

获得索引后

```
a(ind) 
```

会给你：

```
ans =

     2
     4 
```

有关矩阵索引的更多信息，请参见[此处](http://www.mathworks.com/help/matlab/math/matrix-indexing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:42:22.097

Matlab 允许您访问具有线性索引的矩阵，该索引扫描矩阵的所有列。因此，在您的情况下（使用 3x3）`a(2,1)=a(2)`和`a(1,2)=a(4)`. @HebeleHododo 提供的答案采用您的行和列索引并将它们转换为矩阵的线性索引`a`。请记住，如果要索引不同大小的矩阵，则需要为其设置不同的线性索引。

[此外，在http://www.mathworks.com/help/matlab/index.html#language-fundamentals](http://www.mathworks.com/help/matlab/index.html#language-fundamentals)有很多在线信息可帮助您学习 matlab，或者您可以`doc help`在命令窗口中输入

# ruby-on-rails - 查找对象集合对于给定属性是否具有相同的值

> ID：14505022
> 
> 赞同：2
> 
> 时间：2013-01-24T15:35:38.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个相关的模型：`Invoice`和`Currency`。

`Invoice belongs_to Currency`和`Currency has_many Invoices`

我有一个表格，显示每张发票的列表，我可以按货币过滤它们。发票也有一个`price`字段，我有一个计算我显示的发票总价的方法。

我的问题是，当且仅当每张发票都具有相同的货币时，我才想显示总价。

我很确定有一种简单的方法可以实现这一点，但我找不到。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:41:24.447

事实上，有很多方法可以实现这一点，例如，您可以通过这种方式检查它们是否都具有相同的货币：

```
invoices.reject {|inv| inv.currency_id == invoices[0].currency_id}.empty? 
```

或者

```
invoices.map {|inv| inv.currency_id}.uniq.length == 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:37:16.353

询问集合中的所有内容是否相同的最直接方法是询问所有元素是否等于第一个元素：

```
invoices.all?{ |inv| inv.currency_id == invoices.first.currency_id } 
```

如果你经常做这件事，可能会考虑用一种方便的方法扩展 Enumerable：

```
module Enumerable
  def all_same?
    v = first
    all? {|e| e == v}
  end
end

invoices.map(&:currency_id).all_same? 
```

# bash - 从 awk 在当前 shell 中设置变量

> ID：14505026
> 
> 赞同：23
> 
> 时间：2013-01-24T15:35:51.300
> 
> 标签：bash, variables, awk

有没有办法在我当前的 shell 中设置一个变量`awk`？

我想对文件进行一些处理并打印出一些数据；因为我将通读整个文件，所以我想保存行数——在这种情况下，`FNR`.

尽管我似乎无法找到一种方法来设置带有`FNR`值的 shell 变量，但还是会发生；如果不是这样，我将不得不`FNR`从我的输出文件中读取，以设置，比如说`num_lines`，具有`FNR`值。

我尝试了一些使用 的组合`awk 'END{system(...)}'`，但无法使其正常工作。有什么办法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-12-17T09:17:32.590

这是另一种方式。

当您将变量的**值**放在一个**变量**中并且想要将它们拆分时，这尤其有用。例如，您有一个来自数据库中单行的值列表，您希望从中创建变量。

```
val="hello|beautiful|world" # assume this string comes from a database query
read a b c <<< $( echo ${val} | awk -F"|" '{print $1" "$2" "$3}' )

echo $a #hello
echo $b #beautiful
echo $c #world 
```

我们需要“这里的字符串”，即 <<< 在这种情况下，因为读取命令不是从管道读取，而是从标准输入读取

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-24T16:09:59.900

```
$ echo "$var"

$ declare $( awk 'BEGIN{print "var=17"}' )
$ echo "$var"
17 
```

这就是为什么你应该使用 declare 而不是 eval 的原因：

```
$ eval $( awk 'BEGIN{print "echo \"removing all of your files, ha ha ha....\""}' )
removing all of your files, ha ha ha....

$ declare $( awk 'BEGIN{print "echo \"removing all of your files\""}' )
bash: declare: `"removing': not a valid identifier
bash: declare: `files"': not a valid identifier 
```

请注意，在第一种情况下，eval 会执行 awk 打印的任何字符串，这可能会意外地成为一件非常糟糕的事情！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-24T15:41:42.863

您不能将变量从子 shell 导出到其父 shell。不过，您还有其他一些选择，包括：

1.  使用 AWK 对文件进行另一次传递以计算记录，并使用命令替换来捕获结果。例如：

    ```
    FNR=$(awk 'END {print FNR}' filename) 
    ```

2.  在 subshel​​l 中打印*FNR*，并在其他进程中解析输出。
3.  如果*FNR*与行数相同，您可以致电`wc -l < filename`获取您的计数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-17T11:50:22.620

对尝试使用声明的任何人的警告，如几个答案所建议的那样。

eval 没有这个问题。

如果提供用于声明的 awk（或其他表达式）导致空字符串，则 declare 将转储当前环境。这几乎肯定不是您想要的。

例如：如果您的 awk 模式在输入中不存在，您将永远不会打印输出，因此您最终会出现意外行为。

这方面的一个例子......

```
 unset var
 var=99
 declare $( echo "foobar" | awk '/fail/ {print "var=17"}' )
 echo "var=$var"
var=99
The current environment as seen by declare is printed
and $var is not changed 
```

将要设置的值存储在 awk 变量中并在最后打印它的小改动解决了这个问题....

```
 unset var
 var=99
 declare $( echo "foobar" | awk '/fail/ {tmp="17"} END {print "var="tmp}' )
 echo "var=$var"
var=
This time $var is unset ie: set to the null string var=''
and there is no unwanted output. 
```

使用匹配的模式来展示这一点

```
 unset var
 var=99
 declare $( echo "foobar" | awk '/foo/ {tmp="17"} END {print "var="tmp}' )
 echo "var=$var"
var=
This time $var is unset ie: set to the null string var=''
and there is no unwanted output. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T15:38:23.097

`awk`打印出赋值语句：

```
MYVAR=NewValue 
```

然后在你的 shell 脚本中，`eval`你的脚本的输出`awk`：

```
eval $(awk ....)
# then use $MYVAR 
```

编辑：如果内部脚本打印了除分配以外的其他内容，人们建议使用`declare`而不是`eval`, 以减少出错的可能性。它是 bash-only，但是当 shell*是*bash 并且脚本有时`#!/bin/bash`，它可以正确地说明这种依赖关系。

该`eval $(...)`变体被广泛使用，现有程序生成的输出适合`eval`但不适合`declare`（`lesspipe`例如）；这就是理解它很重要的原因，而仅 bash 的变体“过于本地化”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-25T00:43:58.983

为了综合到目前为止的所有内容，我将分享我发现从使用 awk 读取单行文件的脚本中设置 shell 环境变量有用的内容。显然`/pattern/`可以使用 a 而不是`NR==1`找到所需的变量。

```
# export a variable from a script (such as in a .dotfile)
declare $( awk 'NR==1 {tmp=$1} END {print "SHELL_VAR=" tmp}' /path/to/file )
export SHELL_VAR 
```

如果在没有参数的情况下发出命令，这将避免大量的变量输出`declare`，以及盲目的安全风险`eval`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-10-30T11:30:56.390

echo "First arg: $1" for ((i=0 ; i < $1 ; i++)); do echo "inside" echo "Welcome $i times." 猫人.xml | awk '{ x[NR] = $0 } END { for ( i=2 ; i<=NR ; i++ ) { if (x[i] ~ // ) {x[i+1]=" '$i'" }print x[i] }} ' > $i.xml 完成回显“完成”

# c++ - 如何使用 DirectShow 编写 avi 文件

> ID：14505029
> 
> 赞同：3
> 
> 时间：2013-01-24T15:35:53.973
> 
> 标签：c++, winapi, video, directshow

我正在尝试根据我的 Decklink SDI 卡的流媒体编写一个 avi 视频文件，在查看互联网之后，我在这里编写了这段代码，我的问题是程序没有写入文件，这里是代码：

```
#include <Windows.h>
#include <DShow.h>
#include <iostream>

 int main(void)
{
IGraphBuilder* pGraph = NULL;
ICaptureGraphBuilder2* pBuild = NULL;
IMediaControl* pControl = NULL;

ICreateDevEnum* pDevEnum = NULL;
IEnumMoniker* pEnum = NULL;
IMoniker *pMoniker = NULL;
IMoniker* goodMoniker = NULL;
IBaseFilter* pCap;
HRESULT hr;

//Initialize pGraph
hr = CoInitialize(NULL);
   hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void **) &pGraph);
if(FAILED(hr))
{
    printf("ERROR - Could not initialize COM library");
    return 1;
}

//Initialize pBuild

 hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER, IID_ICaptureGraphBuilder2, (void**) &pBuild);
if(FAILED(hr))
{
    printf("ERROR - Could not create the Filter Graph Manager.");
    return 2;
}
pBuild->SetFiltergraph(pGraph);

hr = CoCreateInstance(CLSID_SystemDeviceEnum, NULL, CLSCTX_INPROC_SERVER, IID_ICreateDevEnum, reinterpret_cast<void**>(&pDevEnum));
if(SUCCEEDED(hr))
{
    hr = pDevEnum->CreateClassEnumerator(CLSID_VideoInputDeviceCategory, &pEnum, 0);
}

HWND hList;

while(pEnum->Next(1, &pMoniker, NULL) == S_OK)
{
    IPropertyBag* pPropBag;
    hr = pMoniker->BindToStorage(0, 0, IID_IPropertyBag, (void**)(&pPropBag));
    if(FAILED(hr))
    {
        pMoniker->Release();
        continue;
    }

    VARIANT varName;
    VariantInit(&varName);
    hr = pPropBag->Read(L"Description", &varName, 0);
    if(FAILED(hr))
    {
        hr = pPropBag->Read(L"FriendlyName", &varName, 0);
    }
    if(SUCCEEDED(hr))
    {
        for(int i=0;i<20;i++)
        {
           std::cout<<(char)*(varName.bstrVal + i);
        }

        char yn;
        std::cin>>yn;

        if(yn=='Y')
        {
            std::cout<<"SUCCESSFUL"<<std::endl;
            goodMoniker = pMoniker;
            VariantClear(&varName);
        }
    }
    pPropBag->Release();
    if(pMoniker != goodMoniker)
    {
        pMoniker->Release();
    }
}

hr = goodMoniker->BindToObject(0, 0, IID_IBaseFilter, (void**)(&pCap));

if(SUCCEEDED(hr))
{
    hr = pGraph->AddFilter(pCap, L"Capture Filter");

}

IBaseFilter *pMux = NULL;

//  hr = pBuild->RenderStream(&PIN_CATEGORY_PREVIEW, &MEDIATYPE_Video, pCap, NULL, NULL);

hr = pBuild->SetOutputFileName(
&MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.
L"C:\\stuff.avi", // File name.
&pCap,              // Receives a pointer to the mux.
NULL);              // (Optional) Receives a pointer to the file sink.

hr =pBuild->RenderStream(
&PIN_CATEGORY_CAPTURE, // Pin category.
&MEDIATYPE_Video,      // Media type.
pCap,                  // Capture filter.
NULL,                  // Intermediate filter (optional).
pMux);                 // Mux or file sink filter.  

hr = pCap->QueryInterface(IID_IMediaControl,(void**) pControl);

printf("START ");
hr = pControl->Run();

Sleep(100000);
hr = pControl->Stop();
CoUninitialize();

pGraph->Release();
pBuild->Release();
pCap->Release(); 
```

}

这是我尝试调试它时收到的错误消息：

```
 Unhandled exception at 0x776015de in STREAMMMMM.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

程序在这一行崩溃：

```
 r = pCap->QueryInterface(IID_IMediaControl,(void**) pControl); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:43:47.940

Internet 上有数十个（如果不是数百个）关于如何使用 DirectShow 写入 AVI 的示例。

这个特定的代码片段甚至还没有开始编写。它只准备管道，你甚至没有做`IMediaControl::Run`你应该做的事情。更进一步，你应该等到你写够了，然后停止录制，然后才释放接口指针。

看看这个问题：[使用 DirectShow 过滤器而不注册它，通过一个私有的 CoCreateInstance](https://stackoverflow.com/questions/11191996/using-a-directshow-filter-without-registering-it-via-a-private-cocreateinstance)来开始实际捕获和写入（`IMediaControl::Run`特别`Sleep`是）。

# asp.net - VS2010 ASP.NET Split View Designer 实时更新

> ID：14505036
> 
> 赞同：1
> 
> 时间：2013-01-24T15:36:10.000
> 
> 标签：asp.net, visual-studio-2010

当我在（例如）default.aspx 的源端输入时，我没有立即在设计器端看到我的更改。相反，我看到一条消息告诉我“设计视图与源视图不同步。单击此处同步视图”。

对我来说，缺乏实时更新完全违背了拆分视图的目的。有没有办法让设计视图自动同步，并保持实时更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:11:15.827

检查以下网址，看看它是否对您有帮助。

[http://weblogs.asp.net/scottgu/archive/2007/07/30/enabling-vertical-split-view-in-vs-2008.aspx](http://weblogs.asp.net/scottgu/archive/2007/07/30/enabling-vertical-split-view-in-vs-2008.aspx)

# jquery - 单击以打开另一个时关闭打开的下拉菜单

> ID：14505037
> 
> 赞同：1
> 
> 时间：2013-01-24T15:36:11.850
> 
> 标签：jquery, drop-down-menu

我有以下 javascript，通过在单击导航中的链接时添加“dropped”类来打开下拉菜单。

```
$("li.dropdown-control > a").click( function () {
          var nextSibling = $(this).next();
              nextSibling.toggleClass("dropped");  
 }); 
```

我的问题是，当一个下拉菜单打开时，当您单击打开另一个下拉菜单时它不会关闭。如何找到打开的下拉菜单并在打开另一个下拉菜单时将其关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:40:39.330

在切换要打开的类之前，您不能删除所有已删除的类：

例如：

```
$("li.dropdown-control > a").click( function () {
          $('.dropped').removeClass('dropped');
          var nextSibling = $(this).next();
              nextSibling.addClass("dropped");  
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:41:35.787

如果您只想在任何时候打开一个下拉菜单，您可能希望从之前标记为“已删除”的所有内容中删除已删除的类。这就是我要做的...

```
$("li.dropdown-control > a").click( function () {
      $('.dropped').removeClass('dropped');
      var nextSibling = $(this).next();
          nextSibling.toggleClass("dropped");  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:46:50.937

试试这个

***JS代码***

```
$("li.dropdown-control > a").click( function () {
          $(this).removeClass("dropped");
          var nextSibling = $(this).next('ul');
              nextSibling.addClass("dropped");  
 }); 
```

***[现场演示](http://jsfiddle.net/GP68Q/)***

# java - 可嵌入到 ElementCollection

> ID：14505041
> 
> 赞同：0
> 
> 时间：2013-01-24T15:36:28.950
> 
> 标签：java, hibernate, clob, embeddable

我有看起来像这样的可嵌入类：

```
public class ClobEmbeddableValue {

    ...fields...

    @Lob
    @Type(type = "org.hibernate.type.MaterializedClobType")
    @Column(name = "clobValue")
    @Override
    public String getValue() { return value; }

    public String getChecksum() { return checksum; }

    ...other getters/setters...
} 
```

这在实体中用作

```
@ElementCollection
@ForeignKey(name = "fk_clob")
@CollectionTable(name = "m_clob", joinColumns = {
        @JoinColumn(name = "owner_id"), 
        @JoinColumn(name = "owner_oid"),
        @JoinColumn(name = "ownerType")})
@Cascade({org.hibernate.annotations.CascadeType.ALL})
public Set<ClobEmbeddableValue> getClobs() { return clobs; } 
```

当我更新实体和/或它的 clob 时，休眠会生成更新/删除 SQL 查询，其中所有来自 Embeddable 的字段都存在。我理解它为什么这样做，但在这种情况下不是很好，因为 Hibernate 尝试将 CLOB 值与 operator = 进行比较我可以以某种方式告诉 hibernate 忽略字段值 (CLOB) 并且只使用校验和（为此目的创建它是从clob计算的md5哈希，所以它足以比较）查询中的where子句？或者你们有其他想法如何解决这个问题？

# android - SessionStatusCallback 无法解析为类型

> ID：14505045
> 
> 赞同：1
> 
> 时间：2013-01-24T15:36:32.527
> 
> 标签：android, session, facebook-android-sdk

我正在尝试将 facebook 登录添加到我的本机应用程序。我正在关注本教程[https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/)

但我无法添加 SessionStatusCallback() 函数。

我导入所有这些包，

```
 import com.facebook.Request;
 import com.facebook.Response;
 import com.facebook.Session;
 import com.facebook.SessionState; 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:41:37.237

你是否创建了一个像下面这样的内部类，你应该有实现 Session.StatusCallback 的内部类。

```
private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
            // Respond to session state changes, ex: updating the view
    }
} 
```

您也可以更改内部类的名称，但它必须实现 Session.StatusCallback

# java - 必须选择好的接口名称

> ID：14505046
> 
> 赞同：0
> 
> 时间：2013-01-24T15:36:34.177
> 
> 标签：java, android, refactoring

**接口颜色**取什么名字？在 Android 库中有一个同名的类（并且该类在应用程序中使用）。如果应用程序的类和接口名称仅不同包，那就不好了。*ColorInterface* - 坏名声，罗伯特马丁在他的书“清洁代码”中写道。

**更新：**

```
interface MyColor {
    Integer toInteger();
    String toString();
} 
```

如果类实现了这个接口，表示颜色格式为*RGB*，*toInteger()*方法返回*Color.rgb(red, green, blue)*，*toString()*方法返回，例如“(10, 20, 30)”，其中*红色 = 10，绿色 = 20，蓝色 = 30*。如果 class 以*ARGB*格式表示颜色，则*toInteger()*返回*Color.argb(alpha, red, green, blue)*，而*toString()*返回例如“(200, 50, 70, 20)”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:50:48.690

幸运的是，字典中有两个颜色条目。另一个拼写为“颜色”。

但这样做可能会让这场伟大的拼写大战变得更糟。

[http://www.colourlovers.com/blog/2007/09/05/color-vs-colour-the-great-spelling-battle](http://www.colourlovers.com/blog/2007/09/05/color-vs-colour-the-great-spelling-battle)

[http://grammarist.com/spelling/color-color/](http://grammarist.com/spelling/color-colour/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:39:12.607

所以你可以使用同名的“颜色”，在不同的包中可以有许多同名的类，导入你想要使用的一个。

# bash - 循环遍历具有特定扩展名的所有文件

> ID：14505047
> 
> 赞同：154
> 
> 时间：2013-01-24T15:36:39.390
> 
> 标签：bash, file, glob

```
for i in $(ls);do
    if [ $i = '*.java' ];then
        echo "I do something with the file $i"
    fi
done 
```

我想遍历当前文件夹中的每个文件并检查它是否与特定扩展名匹配。上面的代码不起作用，你知道为什么吗？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2013-01-24T16:05:16.633

不需要花哨的技巧：

```
for i in *.java; do
    [ -f "$i" ] || break
    ...
done 
```

守卫确保如果没有匹配的文件，循环将退出而不尝试处理不存在的文件名`*.java`。在`bash`（或支持类似内容的 shell）中，您可以使用该`nullglob`选项来简单地忽略失败的匹配并且不进入循环体。

```
shopt -s nullglob
for i in *.java; do
    ...
done 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-10-09T09:14:47.427

递归添加子文件夹，

```
for i in `find . -name "*.java" -type f`; do
    echo "$i"
done 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-07-02T14:23:27.610

遍历所有以: `.img`, `.bin`, `.txt`suffix 结尾的文件，并打印文件名：

```
for i in *.img *.bin *.txt;
do
  echo "$i"
done 
```

Or in a recursive manner (find also in all subdirectories):

```
for i in `find . -type f -name "*.img" -o -name "*.bin" -o -name "*.txt"`;
do
  echo "$i"
done 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-01-24T16:45:06.927

正确答案是@chepner's

```
EXT=java
for i in *.${EXT}; do
    ...
done 
```

但是，这里有一个小技巧可以检查文件名是否具有给定的扩展名：

```
EXT=java
for i in *; do
    if [ "${i}" != "${i%.${EXT}}" ];then
        echo "I do something with the file $i"
    fi
done 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-24T16:42:42.220

正如@chepner 在他的评论中所说，您正在将 $i 与固定字符串进行比较。

要扩展和纠正这种情况，您应该将 [[ ]] 与正则表达式运算符一起使用 =~

例如：

```
for i in $(ls);do
    if [[ $i =~ .*\.java$ ]];then
        echo "I want to do something with the file $i"
    fi
done 
```

=~ 右侧的正则表达式针对左侧运算符的值进行测试，不应被引用，（引用不会出错，但会与固定字符串进行比较，因此很可能会失败”

但是@chepner 上面使用 glob 的答案是一种更有效的机制。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-24T23:54:05.457

我同意其他关于循环文件的正确方法的答案。然而，OP问：

> 上面的代码不起作用，你知道为什么吗？

是的！

一篇优秀的文章[What is the difference between test, [ 和 [[ ?]](http://mywiki.wooledge.org/BashFAQ/031)详细解释了在其他差异中，您不能在命令中使用`expression matching`or （这是 的简写）`pattern matching``test``[`

```
功能新测试[[旧测试[示例

模式匹配 =（或 ==）（不可用）[[ $name = a* ]] || echo "名称不以 'a' 开头：$name"

正则表达式 =~（不可用）[[ $(date) =~ ^Fri\ ...\ 13 ]] && echo "今天是 13 号星期五！"
匹配

```

所以这就是你的脚本失败的原因。如果 OP 对`[[`语法的答案感兴趣（其缺点是在与命令一样多的平台上不受支持`[`），我很乐意编辑我的答案以包含它。

编辑：有关如何将答案中的数据格式化为表格的任何提示都会有所帮助！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-25T13:46:29.863

I found this solution to be quite handy. It uses the `-or` option in `find`:

```
find . -name \*.tex -or -name "*.png" -or -name "*.pdf" 
```

It will find the files with extension `tex`, `png`, and `pdf`.

# c# - C# System.DirectoryServices.AccountManagement - UserPrincipal.FindByIdentity 为某些用户返回 NULL

> ID：14505049
> 
> 赞同：1
> 
> 时间：2013-01-24T15:36:45.427
> 
> 标签：c#, asp.net, asp.net-mvc, active-directory

我目前正在使用一种方法从 AD 获取当前登录用户的 GivenName 和 Surname。访问此站点的所有用户都将是 AD 中的内部用户。

对于某些用户来说这是有效的，而对于其他用户来说，在尝试 FindByIdentity 时似乎 UserPrincipal 正在返回 NULL。这是OU的事情吗？我没有指定要查看的 OU，我只是希望它通过他们的登录名查找当前登录的用户并提取他们的名字/姓氏，无论他们在 AD 结构中的哪个位置......

下面是我的方法的代码......它接受一个包含当前用户的“User.Identity.Name”的参数......

```
public static string GetFullName(string userIdentityName)
{            
    using (var context = new PrincipalContext(ContextType.Domain))
    {
        using (UserPrincipal principal = UserPrincipal.FindByIdentity(context, userIdentityName))
        {
            return principal != null ? principal.GivenName + " " + principal.Surname : "User Not Found";
        }
    }
} 
```

我还在页面上输出 User.Identity.Name 并且适用于每个人，所以我知道传递给方法的参数已填充。

奇怪的是，我可以硬编码用户身份名称（通常返回 null），并且即使通过参数传递完全相同的东西，代码也可以工作。就像是：

```
public static string GetFullName(string userIdentityName)
{
    var username = "DOMAIN\\username";

    using (var context = new PrincipalContext(ContextType.Domain))
    {
        using (UserPrincipal principal = UserPrincipal.FindByIdentity(context, username))
        {
            return principal != null ? principal.GivenName + " " + principal.Surname : "User Not Found";
        }
    }
} 
```

我不明白...任何帮助将不胜感激！谢谢！！

# ios - 核心数据获取会返回什么样的错误？

> ID：14505050
> 
> 赞同：2
> 
> 时间：2013-01-24T15:36:58.063
> 
> 标签：ios, objective-c, cocoa, core-data

什么样的错误可以返回给用户`-[NSManagedObjectContext executeFetchRequest:error:]`，`-[NSFetchedResultsController performFetch:]`应该如何处理？我在文档中找不到有关这些方法可能出现的错误的任何信息。中定义的错误代码`CoreData/CoreDataErrors.h`似乎都不适用于获取。

现在我对核心数据提取的错误处理`NSAssert`就像这样：

```
 NSError *fetchError = nil;
 NSArray *fetchedResults = [context executeFetchRequest: request error: &fetchError];
 NSAssert( fetchedResults, @"Error fetching: %@", fetchError ); 
```

虽然测试我从来没有这个断言失败，但这并不意味着这不会失败。优雅地处理这些错误的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:42:22.433

When executing a fetch request, I populate the expected array with an empty array instead of leaving it nil.

```
NSError *error;
NSArray *array = [context executeFetchRequest:request error:&error];
if (array == nil)
{
    NSLog(@"Error retrieving array of values %@", error);
    array = [NSArray array];
} 
```

If you ever want to test your error handling, this answer details how to implement an NSPeristentStore that will give you an error every time.

[Core Data Unit Testing - Unsure how to trigger error case in executeFetchRequest:error:](https://stackoverflow.com/questions/9382151/core-data-unit-testing-unsure-how-to-trigger-error-case-in-executefetchrequest/14206680#14206680)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:45:40.707

您已经找到`CoreDataErrors.h`，另请参阅[核心数据常量参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Miscellaneous/CoreData_Constants/Reference/reference.html)

例如，可能发生的错误是`SQLite`查询错误。我隐约记得看到过这样的事情，当我在谓词中使用一个操作，该操作被翻译成`SQLite`支持核心数据的版本不支持的东西。

如果在开发过程中被捕获，您将使用`NSError`纯粹的调试。如果这发生在已发布的应用程序的运行时，一个选项将是优雅地失败，并且如果可能的话，要求用户指定不同的搜索格式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T15:50:36.367

首先是捕获错误，但这完全取决于代码的上下文，即何时要优雅地处理它，或者如果出现问题，何时要断言并停止发生其他任何事情。

还要记住，fetchedResults 不能返回 nil，没有结果（count == 0），这不是错误，但您显然可能想要针对它编写代码。

```
NSError *fetchError = nil;
NSArray *fetchedResults = [context executeFetchRequest: request error: &fetchError];
if (fetchError) {
  NSLog(@"Error with fetch: %@",error);
  // Assert or do whatever is required ..
}

// Continue as normal .. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T17:19:42.863

我总是将这些错误传递给 NSResponder 链，因此：

```
NSManagedDocument _document;
NSManagedObjectContext _moc;

NSError *error = nil;
NSArray *result = [_managedObjectContext executeFetchRequest:fr error:&error];
if (fetchedResults == nil && error) {
    [_document presentError:error];
    // or, if this isn't a document-based app, you can do
    // [NSApp presentError:error];
    // or, if this method is in an IBAction you can just do
    // [sender presentError:error];
    // and it'll just do the right thing
} 
```

中的默认实现`NSManagedDocument`可以很好地呈现这些错误，除非您保存文档并获得多个验证错误，在这种情况下您需要编写一些特殊的东西。

如有疑问，`NSError`请尽快提出，并且如果您发现自己为 NSError 硬编码了很多 retval 检查，那么您的问题可能更多在于您首先发送的错误返回函数。

`NSErrors`，一般来说，都是由用户自己解决的；`NSExceptions`是框架用来让开发人员知道他们需要处理什么的。

# c++ - 有关为 Autodesk Maya 编写插件的咨询

> ID：14505054
> 
> 赞同：2
> 
> 时间：2013-01-24T15:36:59.253
> 
> 标签：c++, plugins, sdk, maya, autodesk

我对CG很感兴趣。但是，编写基于 OpenSceneGraph 的程序可能很耗时。所以，我想为 Maya 编写一个插件并使用 Maya 的强渲染来应用我的算法。

我已经下载了 Maya 的学生版。但是，仍然不确定：

1.  如果仅用于学术目的，是否可以免费开发基于 Maya SDK 的插件？
2.  我可以更改软件多“深”？（我可以通过更改网格划分算法来更改网格划分结果吗？我可以在图形场景中添加新的停靠小部件吗？）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:50:37.310

1.  是的，如果您想共享插件，您需要一个 id 范围。它并不容易艰难。Maya 有一个非常深刻的核心哲学，如果你试图以错误的方式使用 Maya，它会完全吓到你。在那之后，你所做的一切都将是一场艰苦的战斗。

2.  啮合。取决于您在谈论 Maya 中的哪个网格化阶段？视口使用的那个？当然，不是在公园里散步。mentalray 使用的那个，也许，不确定，强硬你总是可以发出结果。

    对接小部件，确定没问题。

# r - 具有二元运算符的非线性最小二乘拟合 nls 非数字参数的问题

> ID：14505055
> 
> 赞同：3
> 
> 时间：2013-01-24T15:37:03.377
> 
> 标签：r, nls

我刚开始使用 R 并希望得到一个非线性最小二乘拟合 nls(...) 到公式 y=A(1-exp(-bL))+R。我通过以下方式定义我的函数 g

```
> g<-function(x,y,A,b,R) {
    y~A(1-exp(-bx))+R
    } 
```

并希望通过

```
>nls((y~g(x,y,A,b,R)),data=Data, start=list(A=-2,b=0,R=-5)) 
```

我以以下错误消息结束。

```
>Error in lhs - rhs : non-numeric argument to binary operator 
```

我想这只是另一个初学者犯的一个愚蠢的基本错误，但如果有人能帮助我，我会非常高兴。

下一个问题是，我是否可以将拟合曲线实现到我的图表中

```
>plot(x,y,main="VI.20.29") 
```

感谢大家花时间阅读并希望回答我的问题！

详细信息：我有一个包含 x 值（Light.intensity）和 y 值（例如 VI.20.29）的表

```
> photo.data<-read.csv("C:/X/Y/Z.csv", header=T)
    > names(photo.data)
     [1] "Light.intensity" "SR.8.6"          "SR.8.7"         
     [4] "SR.8.18"         "SR.8.20"         "VI.20.1"        
     [7] "VI.20.5"         "VI.20.20"        "VI.20.29"       
    [10] "DP.19.1"         "DP.19.15"        "DP.19.33"       
    [13] "DP.19.99"       
    > x<-photo.data$Light.intensity
    > x
    [1]    0   50  100  200  400  700 1000 1500 2000
    > y<-photo.data$VI.20.29
    > y
    [1] -2.76 -2.26 -1.72 -1.09  0.18  0.66  1.47  1.48  1.63
    > plot(x,y,main="VI.20.29")
    > Data<-data.frame(x,y)
    > Data
         x     y
    1    0 -2.76
    2   50 -2.26
    3  100 -1.72
    4  200 -1.09
    5  400  0.18
    6  700  0.66
    7 1000  1.47
    8 1500  1.48
    9 2000  1.63
    > g<-function(x,y,A,b,R) {
    +   y~A(1-exp(-bx))+R
    +   }
    > nls((y~g(x,y,A,b,R)),data=Data, start=list(A=-2,b=0,R=-5))
    Error in lhs - rhs : non-numeric argument to binary operator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:32:37.783

你最初对参数的猜测是错误的。我将您的数据保存在“data.csv”中，用于此示例，该示例收敛然后绘制...为了得到这个，我调整了参数以接近，然后 nls 适合...

```
df <- read.csv('data.csv')
x <- df$x
y <- df$y
plot(x,y)

fit <- nls(y~A*(1-exp(-b*x))+R, data=df, start=list(A=3,b=0.005,R=-2))
s <- summary(fit)

A <- s[["parameters"]][1]
b <- s[["parameters"]][2]
R <- s[["parameters"]][3]

f <- function(z){
  v <- A*(1-exp(-b*z))+R
  v
}

x.t <- 0:max(x)
y.c <- sapply(x.t, f)
lines(x.t, y.c, col='red')
print(s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:16:07.847

问题是您在函数中调用函数。你是说`y~g(...)`，当**函数`g(...)`本身调用`y~(other variables)`**. 在某种程度上，这是一种“双重计算”。

做就是了：

```
nls(y~A*(1-exp(-b*x))+R, data=Data, start=list(A=-2,b=0,R=-5)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:43:23.060

计算机会按照你告诉他们的去做：

```
y~A(1-exp(-bx))+R 
```

这里 R 解释`A(...)`为一个函数和`bx`一个变量。

你想要`y~A*(1-exp(-b*x))+R`。

# java - 从 ActionMessage 中删除 msg

> ID：14505058
> 
> 赞同：1
> 
> 时间：2013-01-24T15:37:06.157
> 
> 标签：java, struts

如何从 ActionMessage 中删除特定的错误消息。例如，下面`msgKey`是`"ABC"`和`msg.getKey()`是`"ABC"`。现在，当两者相同时，我想从 ActionMessage 中删除密钥。我该怎么做？

```
Iterator it = warningMessages.get(ActionMessages.GLOBAL_MESSAGE);       
while (it.hasNext()) {
    ActionMessage msg = (ActionMessage) it.next();
    if (msgKey.equalsIgnoreCase(msg.getKey())) {
                // remove msgKey from warningMessages
    }
} 
```

# audio - 无法播放带声音的 AVMutableComposition

> ID：14505059
> 
> 赞同：2
> 
> 时间：2013-01-24T15:37:06.073
> 
> 标签：audio, video, avplayer, avmutablecomposition

我目前正在开发一个 iPhone 应用程序，它只播放 .mp4 的音轨。播放器开始播放，但我听不到任何声音。

这是代码：

```
 NSURL *videoUrl = [NSURL URLWithString:@"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"];

    AVMutableComposition* composition = [AVMutableComposition composition];

    AVMutableCompositionTrack *track = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    AVURLAsset* videoAsset = [AVURLAsset URLAssetWithURL:videoUrl options:nil];
    AVAssetTrack *audioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio]objectAtIndex:0];

    NSError *error = nil;
    BOOL success = [track insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:audioTrack atTime:kCMTimeZero error:&error];

    if (!success)
    {
        NSLog(@"error: %@", error);
    }

    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:composition];

    self.player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

    [self.player play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:30:33.863

我有一个类似的问题，只是发现 AVFoundation 在你如何格式化你的作品时非常无情。我最终回答了我自己的问题——这和你的问题一样。

查看我的帖子： [iOS AVFoundation Export Session is missing audio](https://stackoverflow.com/q/14026584/1483066)

# git - 我应该如何使用预览/登台站点以及生产/实时站点设置 git（+ gitolite？）？

> ID：14505060
> 
> 赞同：4
> 
> 时间：2013-01-24T15:37:06.893
> 
> 标签：git

有点笼统的“您认为最好的解决方案是什么”的问题，但是我已经阅读并且已经阅读，但我似乎并没有找到所有问题的所有答案。

我在一家有 3 名开发人员（2 名现场 1 名非现场）的小型网络机构工作，我们仍在使用 FTP（style-1.css，style-2.css）在预览 url 上在线托管的网站上工作，然后我们下载完成工作并将其重新上传到它的实时网址。这是相当老派的，按照我所知道的今天的标准来看是完全错误的，所以我开始研究 Git。我也希望能够使用它来管理部署。

**我想做的是：**

*   开发人员在本地工作
*   开发者推送到服务器上的预览/登台（可公开访问）
*   客户批准
*   开发人员将预览推送到直播/开发人员告诉直播从预览中提取

**我想知道的是：**

*   我可以在服务器上设置远程存储库来保存我们正在处理的所有文件，这样我们就可以将 URL 指向这些文件以用作预览/登台站点吗？（即为什么我读到这应该是一个裸回购？）
*   在这种情况下设置“实时”站点的最佳方式是什么？有人可以解释一下，当我们认为它稳定时，我如何设置一个命令（*钩子？*）从预览站点拉到实时站点？

我已经尝试阅读工作流程，但我还没有找到如何在实时公开（客户端）可访问的工作流程中使用它

提前致谢！

**编辑**

我收到了使用 GitHub 的建议，但我不想使用它，因为我们有自己的专用服务器，我不介意花时间学习和正确设置它。（*我将使用 GitHub 进行个人工作，所以我不会将其视为服务*）

标题包括 Gitolite，因为我原本打算问如何使用 gitolite 进行设置，但在编写它的过程中，我想我会正确掌握基础知识，因此将其编辑掉，一定是忘记将其从标题中删除。如果有人对此有任何建议，包括 gitolite，我愿意试一试。

感谢到目前为止的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:40:54.180

注意：

*   您根本不必使用 gitolite：[Simon在评论中](https://stackoverflow.com/users/1024223/simon-boudrias)[提到](https://stackoverflow.com/questions/14505060/how-should-i-set-up-git-gitolite-with-a-preview-staging-site-as-well-as-pro#comment20218628_14505060)[的文章](http://www.exsyshost.com/clients/knowledgebase/142/Using-Gitolite-to-securely-deploy-a-website-with-version-control-based-on-the-GitHub-Flow.html) 中描述的 post-receive 钩子可以应用于您要推送到的任何裸仓库。 如果你想通过授权保护那些推送，你只需要 gitolite（因为 Gitolite 是一个授权层）

*   你可以有一个更简单的钩子来做不同的事情，具体取决于你推动的分支。参见例如“[编写一个 git post-receive 钩子来处理特定分支](https://stackoverflow.com/questions/7351551/writing-a-git-post-receive-hook-to-deal-with-a-specific-branch)”
*   您可以从在裸仓库中完成的提交中提取任何仓库：请参阅“[为裸仓库设置 post-receive 挂钩](https://stackoverflow.com/a/14453711/6309)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:15:48.350

**回答我自己的问题**

只是想为与我有同样问题的其他人提供我所使用的更新。

最后，为了使用 git 和管理部署，我选择了[BeanStalk](http://www.beanstalkapp.com)，但我也考虑过使用[Capistrano](https://github.com/capistrano/capistrano)，甚至可能[同时使用它们](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html)。

*感谢[Simon](https://stackoverflow.com/users/1024223/simon-boudrias)撰写这篇文章，感谢[Makis](https://stackoverflow.com/users/94895/makis)解释了我将使用 hooks 做什么，感谢[VonC](https://stackoverflow.com/users/6309/vonc)让我避免弄乱我的服务器并使事情变得更加困难。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:40:19.390

如果你能节省几美元并希望这个无忧无虑，我会在[GitHub](https://github.com/)中建立一个 repo 。这样可以省去很多麻烦。私人仓库的 GitHub 成本似乎从 7 美元/月开始。这样做有很多好处，但在您的情况下，最大的好处是无需任何设置即可从任何地方轻松获得存储库。

您要求的脚本只会 a) 将站点设置为在持续时间内指向某个“正在进行的维护”页面，b) 从 GitHub 存储库中提取更改，以及 c) 可能重新启动服务（MySql 等）。我不会完全自动化这个，但也不会太难。

我会使用分支来管理什么是预览和什么是交付级别。所以脚本会从发布分支中拉出头部。

同样，开发人员会使用最适合您的任何分支策略推送到 GitHub。

# css - 像素在 gimp 和 chrome 之间关闭？

> ID：14505064
> 
> 赞同：0
> 
> 时间：2013-01-24T15:37:12.763
> 
> 标签：css, dimensions, gimp

我正在使用 gimp 设计来设置我的网页样式。由于某种原因，尺寸总是在铬和 gimp 之间关闭。

例如，在 gimp 中选择的 div 产生`200x450`。

如果我输入：

```
.some_div {
    width: 200px;
    height: 450px;
} 
```

在 chrome 中显示的 div 总是更小。

我可以在 gimp 中启用某些功能以使其准确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:42:42.123

GIMP 中图像的像素数**是精确的**。我根本无法“减 1”——例如，如果文件保存插件被告知错误的图像大小，它就会崩溃。

现在......为 CSS 定义的像素并不那么精确 - 因此，浏览器可能由于某些设置或偏好（如 ZOOM）而关闭 - 无论如何，将屏幕截图与您的问题一起发布 - 也许有人可以获得更好的线索那里发生了什么。

您是否尝试过简单地使用其他浏览器来检查此问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:43:22.550

在 chrome 中制作 div 的屏幕截图并将其粘贴到 gimp 中，这样您就可以获得它的确切大小。

# c# - 无法使用带有 VS2012 的 Monogame 加载内容

> ID：14505066
> 
> 赞同：7
> 
> 时间：2013-01-24T15:37:15.313
> 
> 标签：c#, monogame

我的代码是

`new GameFont(Content.Load<SpriteFont>("LoadingFont"), "LoadingFont")`

根据我阅读的内容，您必须使用VS2010将您的资产编译为.xnb格式，我已经这样做了，并将它们放入您的bin目录中的Content子文件夹中，我也这样做了。但是，我收到一条错误消息，提示“无法加载 LoadingFont 资产！”。

我不确定还能做什么。我读过一篇很老的帖子，说使用 XNA 4 制作的资产不起作用，但我不知道这是否仍然正确，或者如何将我的 XNA 版本更改为 3.1。

有任何想法吗？也许根本不使用VS2010有更好的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T01:07:15.127

您是否已将内容添加到项目的 Content 文件夹并将 Build Action 设置为 Content（在属性窗口中）。

我不确定使用 .xnb 格式的资产的流程是什么。我知道可以这样做，但我通常只是将原始图像和声音文件直接添加到我的 Content 文件夹中。不过，字体可能会有点棘手。

编辑：2015

自从写了这个问题以来，很多事情都发生了变化。如今，MonoGame 拥有自己的[管道工具](http://www.monogame.net/documentation/?page=Pipeline)，用于将内容处理成 XNB 文件。首先要尝试的是`SpriteFont`使用新的管道来处理您的问题。这样您就可以避免完全依赖 XNA。

[或者，解决 MonoGame 中字体问题的另一种方法是使用BMFont](http://www.angelcode.com/products/bmfont/)工具将它们预渲染为纹理，然后使用[MonoGame.Extended](https://github.com/craftworkgames/MonoGame.Extended)在游戏中渲染它们。

[安装 MonoGame.Extended 后](http://www.dylanwilson.net/how-to-install-monogame-extended)，您可以像使用 BMFont 一样加载使用 BMFont 创建的字体，`SpriteFont`但使用`BitmapFont`类代替。

```
_bitmapFont = Content.Load<BitmapFont>("my-font"); 
```

然后像这样渲染一些文本：

```
 _spriteBatch.Begin();
 _spriteBatch.DrawString(_bitmapFont, "Hello World", new Vector2(100, 200), Color.Red);
 _spriteBatch.End(); 
```

[我的博客上](http://www.dylanwilson.net/bmfont-rendering-with-monogame-extended)有完整的教程

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T09:56:10.977

我一直在 VS2012 中使用 MonoGame 没有问题；`Content.Load<T>("myContent")`仍然对我有用。最近引起我注意的一件事（提示：睡眠不足时不要编码）是您必须检查您的资产是否在解决方案资源管理器中设置为“复制到输出目录”，否则当游戏构建时，资产不会随之而来，这就是您收到该错误的原因 - 它无法加载不存在的内容！右键单击您的资产并在“属性”下查看。如果它们设置为“请勿复制”，那么您需要更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T22:46:38.713

就像@craftworkgames 我不能给你一个完整的答案。但是 XNA 3.1 附带的传统内容管道已经进入 4。所以任何资产都需要以稍微不同的方式加载。例如，要加载 .png 资产以显示精灵，我执行以下操作：

```
rock = Texture2D.FromStream(GraphicsDevice, TitleContainer.OpenStream(@"Rock-Large-Stones-PT.png")); 
```

并像往常一样将 .png 文件添加到解决方案中。我很确定字体会是类似的东西，但我还没有完全弄清楚；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-05T11:23:04.973

我遇到了同样的问题，不确定您是否解决了问题，但这就是我所做的。

单击“内容”文件夹下的 Monogame 内容管道。

添加你的 spritefont 或纹理。

确保在 Monogame 内容管道中将操作从“构建”更改为“复制”

然后当你想简单地加载内容时；纹理 = content.Load("texture.png");

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T07:56:38.057

我遇到了类似的问题，但使用“Windows 8 Store”作为目标平台......而 Windows Open GL 版本一切正常。在 Windows 8 上，当我尝试 content.Load("Fonts/TestFont") 时收到“无法作为非内容文件加载”。

我将解决方案中的 MonoGame DLL 替换为 MonoGame.Windows8 项目（我从 CodePlex 下载了源代码）并进行了一些调试...并发现 MonoGame 在 bin...\Debug\AppX 文件夹中查找 Content 文件夹...在构建过程中，内容文件夹被复制到不同的位置。因此，当我手动将 Content 文件夹复制到 AppX 文件夹时，错误消失了，我的游戏原型现在可以正常工作了。

我想我要么错过了与 AppX 相关的项目首选项中的一些设置（大概 Windows 8 设备模拟器需要这个文件夹？）或者...... MonoGame 应该在不同的地方寻找 Content 文件夹......无论如何我会更新暂时手动保存 Content 文件夹，因为它在编译过程中被复制到错误的位置。

我的项目中有 Content 文件夹并且构建操作设置正确（Content）......并且选择了“始终复制”，但在构建（编译）期间，Content 文件夹被复制到 Debug 文件夹，而它应该被复制到 Debug\AppX文件夹，否则 MonoGame 找不到它。（我可能对确切的路径有误，因为我目前正在工作，问题出在我的家用电脑上）

也许这只是我的 Visual Studio 2012 中的一些配置问题。

希望这些信息有所帮助。

# rest - WSO2 API Manager 将 SOAP 转换为 REST

> ID：14505070
> 
> 赞同：3
> 
> 时间：2013-01-24T15:37:25.297
> 
> 标签：rest, soap, wso2, wso2-am

是否可以直接在 API 管理器中将 SOAP 服务作为 REST API 发布？是否可以在调用 SOAP 时转换调用并将 REST 公开给最终用户？

如果可能，怎么做？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-31T07:16:38.997

这可能是您正在寻找的。这可以如下所述完成。

如果您想以 RESTful 方式使用相同的 API 公开多个操作，您可以使用以下指南修改[帖子中的顺序。](https://medium.com/@shenavi21/exposing-a-soap-service-as-a-managed-rest-api-288676e06418)

1) 在 API Manager 中设计 REST API 时，创建一个请求 URI 以映射到后端 SOAP 服务中的每个操作。

2) 使用过滤器中介器（在编程中充当条件语句），您可以从请求 URI（操作）中过滤掉并相应地构造所需的有效负载。

将根据映射后端 Web 服务的各种操作重复以下块。

这里的逻辑是如果 API 的请求 URI 是 X 路由到 SOAP 服务的操作 Y。

```
<!-- this filters out the operations of your API -->

<property expression="json-eval($.operation)" name="operation" />
<filter regex="menu" source="$ctx:operation">

   <header description="SOAPAction" name="SOAPAction" scope="transport" value="http://ws.cdyne.com/PhoneVerify/query/CheckPhoneNumber"/>

<!-- We are storing the input values which the end users input for these values into properties -->

<property name="uri.var.phoneNumber" expression="$url:PhoneNumber"/>
<property name="uri.var.licenseKey" expression="$url:LicenseKey"/>

<!-- Since we do not want the URL pattern we mentioned to be sent to the backend we need to add the below property to remove it -->

<property name="REST_URL_POSTFIX" scope="axis2" action="remove"/>

<!-- Now we need to create the actual payload which the backend requires. For that we use the payload factory mediator -->

<payloadFactory description="transform" media-type="xml">
  <format>
  <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:quer="http://ws.cdyne.com/PhoneVerify/query">
  <soapenv:Header/>
  <soapenv:Body>
  <quer:CheckPhoneNumber>
    <quer:PhoneNumber>$1</quer:PhoneNumber>
    <quer:LicenseKey>$2</quer:LicenseKey>
  </quer:CheckPhoneNumber></soapenv:Body>
  </soapenv:Envelope>
  </format>
  <args>
    <arg expression="get-property(‘uri.var.phoneNumber’)"/>
    <arg expression="get-property(‘uri.var.licenseKey’)"/>
  </args>
</payloadFactory> 
```

有关上述用例的更多信息，您可以参考这篇[文章](https://medium.com/@shenavi21/exposing-a-soap-service-as-a-managed-rest-api-288676e06418)作为参考，了解如何使用这种自定义扩展序列来映射后端 SOAP Web 服务操作。有了这个，您将能够直接将其公开为 REST API

或者，您可以简单地在 WSO2 API Cloud 或 WSO2 API Manager 中创建一个基于 SOAP 的 API，然后将请求负载与 SOAP Action 标头中发送的 SOAP 操作一起传递，以便您可以调用后端 Web 服务的不同操作。您可以在下图中看到它是如何使用的。

[使用单个 API 管理 WSDL 操作](https://i.stack.imgur.com/t0SCl.png)

希望这可以帮助。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:46:34.730

是的。您可以参考这篇[博文](http://charithaka.blogspot.com/2012/07/consuming-soap-service-using-wso2-api.html)作为参考。请注意，由于这是为 API manager Alpha 版本编写的，因此可能存在一些差异。然而，这是一个很好的切入点。

# matlab - 如何使用 Matlab（或 Excel）在 3D 中插入一组点

> ID：14505073
> 
> 赞同：2
> 
> 时间：2013-01-24T15:37:41.040
> 
> 标签：matlab, interpolation, curve-fitting, smoothing, cubic

我有 19 个点（x、y、z 值），它们可以连接起来产生一条曲线（非常有角度）。

有没有办法在平滑数据后输出 100 个点（x、y、z 值），其中包括原始的 17 个点？

我的目标是简单地制作线条，看起来不那么有棱角。我不想偏离原始数据点。我不只是想拟合曲线，我还想要一组 x、y、z 值，它们构成尽可能多的点。

如果获取我的数据有帮助，那就是……

```
---X--- ---Y--- ---Z---

-0.068  80.022  38.332
19.096  170.231 36.322
79.634  240.105 37.22
99.516  248.922 38.474
129.064 254.685 38.027
169.675 234.899 37.043
199.516 219.014 37.425
249.516 186.386 38.009
299.339 174.74  39.54
329.215 190.977 39.46
379.057 266.463 37.359
399.664 313.317 37.647
449.917 389.269 38.097
499.452 390.591 39.341
549.449 410.569 37.419
599.015 430.785 39.443
619.293 435.193 38.714 
```

[更新]：这是我的所有数据（东向、北向和地面高程）。我已经对其进行了操作，以便可以使用它来绘制图表并将数据收集到一长串 X、Y、Z 点的列表中。

```
clear

XYZ=[-0.981 228.186 41.706  19.558  318.061 41.859  39.295  354.756 40.47   58.865  376.792 39.303  79.826  388.557 41.881  99.07   396.376 40.793  128.889 402.102 40.302  168.454 383.616 41.969  199.438 367.254 42.87   248.22  334.199 42.459  299.662 322.407 42.887  329.13  338.72  41.936  379.011 414.38  42.538  398.925 461.024 40.579  448.964 536.678 41.016  498.674 538.02  42.433  549.046 558.505 42.987  599.089 578.825 41.388  619.513 583.596 41.116
     -0.459 168.609 39.534  18.72   258.139 37.039  39.19   294.992 36.651  59.44   316.886 38.745  78.96   328.97  37.646  98.491  336.517 37.363  128.616 342.212 39.449  169.277 323.234 38.724  199.75  307.82  39.494  248.486 273.63  37.803  298.848 262.947 38.076  328.525 279.219 38.518  379.188 354.13  37.9    399.106 401.214 39.985  449.016 476.406 37.01   498.736 478.979 38.417  548.892 498.121 38.377  598.835 518.866 39.27   619.431 522.964 38.652
     -0.315 148.334 39.125  19.282  238.135 38.831  38.929  275.114 38.766  59.107  296.971 36.86   79.658  308.222 37.573  98.877  317.103 39.28   129.343 322.55  39.346  168.458 302.85  37.183  199.447 287.361 39.494  248.515 254.097 37.082  299.258 242.268 38.203  328.867 258.877 38.243  378.966 334.294 37.886  398.553 380.9   39.661  449.357 457.216 37.151  499.188 458.425 39.993  548.447 478.633 39.044  599.289 498.829 38.229  619.362 502.861 38.28
     -0.77  128.802 40.307  18.84   218.299 37.872  39.619  255.281 38.875  59.158  277.506 38.86   79.475  289.08  38.727  98.903  297.194 39.254  128.637 303.058 40.618  169.416 283.797 39.046  199.218 268.002 39.514  248.851 234.409 38.522  299.708 222.995 38.598  328.737 239.682 39.346  379.221 315.113 39.674  398.469 361.458 40.085  449.262 437.299 38.544  499.091 438.992 39.367  548.492 458.732 40.047  599.105 479.647 39.072  619.42  483.704 40.14
     -0.582 126.998 42.05   19.007  217.113 42.128  39.658  252.392 42.117  58.79   275.466 42.097  78.995  286.233 42.1    98.972  295.658 42.09   129.273 301.556 42.12   169.316 281.063 42.049  199.634 265.439 42.085  248.752 232.621 42.08   299.1   220.782 42.143  328.877 237.643 42.145  379.427 312.91  42.095  398.721 360 42.106      449.135 435.791 42.183  499.252 437.276 42.118  548.493 457.293 42.113  599.462 477.004 42.119  619.612 482.107 42.129
     -0.346 123.16  41.94   19.179  213.589 41.992  39.444  250.331 41.987  59.072  271.995 42.065  79.307  283.649 42.022  99.006  292.466 42.056  128.633 297.74  41.918  169.34  278.56  42.011  199.026 262.206 41.932  248.941 229.711 42.027  299.509 217.911 42.066  328.821 234.132 41.946  379.845 310.058 42.021  398.534 356.907 42.014  448.593 432.35  42.003  499.106 433.69  41.987  548.428 454.372 41.974  599.328 474.769 42.067  618.992 478.889 41.937
     0.732  122.04  40.776  19.669  212.233 39.128  40.645  248.583 39.894  60.286  271.062 39.729  80.595  282.456 40.269  99.954  291.342 40.844  130.501 297.006 40.859  169.595 277.813 40.096  200.624 261.129 40.458  250.007 229.335 40.355  299.901 217.206 40.553  329.726 233.434 40.522  380.156 308.505 40.544  399.69  355.738 40.892  449.73  432.099 40.119  500.35  433.178 40.041  549.542 452.726 40.361  599.9   472.971 40.571  620.914 478.13  40.873
     -1.344 121.36  38.071  17.996  211.825 37.099  39.218  248.06  37.203  58.015  269.734 36.847  78.048  281.708 37.956  98.076  290.618 38.462  128.584 296.649 38.488  169.011 276.388 37.434  199.064 260.174 38.327  247.515 227.828 38.149  298.297 216.494 38      328.879 232.531 38.172  378.679 307.684 37.624  398.234 355.057 38.044  448.11  430.336 37.532  498.174 432.199 37.789  547.705 451.963 37.549  599.229 472.621 38.385  618.971 476.745 38.149
     -0.025 120.11  34.797  20.25   211.177 34.062  39.791  247.155 34.197  60.031  268.877 34.045  79.895  281.005 34.402  98.319  289.127 35.76   128.885 295.177 35.434  169.826 275.718 34.468  199.41  259.111 34.855  249.34  227.082 34.555  299.862 215.112 35.461  329.614 231.681 35.356  380.185 307.267 35.34   399.585 353.472 35.311  449.785 430.221 34.802  499.27  431.338 34.628  548.82  450.964 35.164  599.091 471.717 35.328  620.312 475.724 35.55
     -0.22  119.594 33.729  19.409  209.329 32.717  38.952  245.437 33.72   59.524  268.074 33.425  79.777  279.98  33.954  98.221  288.432 34.334  129.045 294.204 34.573  169.076 274.494 33.237  198.901 258.488 33.931  248.337 225.817 33.355  298.963 214.171 34.017  329.011 230.691 34.245  379.806 305.861 34.482  399.2   353.067 34.781  448.965 429.152 33.325  498.859 429.646 34.004  549.241 449.899 33.331  599.566 469.81  33.805  619.033 475.192 34.044
     -0.225 118.011 32.993  18.767  208.144 32.997  38.816  244.302 32.999  59.56   266.523 33      79.533  278.085 32.99   98.422  286.837 32.993  129.264 292.591 32.991  168.522 272.813 33      198.936 256.937 32.993  248.787 224.365 33      299.14  212.644 32.992  328.757 228.921 32.993  379.797 304.381 32.998  399.188 351.229 32.994  449.075 427.265 32.999  498.928 428.532 32.998  548.59  448.554 32.993  599.185 468.737 32.995  619.838 473.133 32.994
     0.621  116.948 29.909  19.99   207.148 30.037  39.828  243.381 30.798  60.108  265.55  30.687  80.123  277.034 30.203  99.647  285.902 30.446  129.735 291.642 30.013  169.481 271.894 30.259  200.112 255.971 30.639  250.02  223.322 29.845  299.877 211.67  30.08   329.708 227.976 30.485  380.238 303.376 30.104  399.691 350.269 30.584  450.269 426.249 30.768  499.599 427.533 30.542  549.958 447.544 30.502  599.951 467.709 30.06   620.941 472.167 30.208
     -0.764 116.091 29.656  19.114  206.308 29.417  39.503  242.409 29.762  58.815  264.591 29.656  79.524  276.201 29.433  98.229  284.95  30.045  128.936 290.766 29.586  169.234 270.961 29.458  199.626 255.101 29.597  248.778 222.44  30.026  299.703 210.767 29.356  328.629 227.031 29.329  379.544 302.545 29.563  398.596 349.349 30.033  448.827 425.363 29.419  499.04  426.678 29.556  548.678 446.571 29.945  599.294 466.821 29.69   619.696 471.208 29.793
     -1.067 114.032 29.719  19.44   204.246 29.119  39.558  240.395 29.361  58.93   262.605 29.134  79.298  274.13  29.365  99.142  283.016 29.311  128.92  288.727 30.017  168.483 268.939 29.621  199.399 253.114 29.763  248.163 220.412 29.536  299.041 208.813 30.081  328.428 224.993 29.988  379.119 300.524 29.264  398.432 347.396 29.329  449.335 423.34  29.239  498.819 424.664 29.507  548.946 444.58  29.779  599.548 464.871 29.66   619.106 469.274 29.565
     -0.442 112.052 29.67   19.416  202.325 30.321  39.044  238.412 30.206  58.7    260.631 29.445  79.109  272.111 29.516  98.874  280.979 29.808  129.073 286.749 30.109  168.462 266.997 30.066  199.294 251.089 29.504  248.892 218.387 29.935  299.385 206.805 29.805  328.344 222.983 30.333  379.741 298.521 29.6    399.272 345.318 29.406  449.344 421.312 29.856  498.616 422.67  29.603  548.988 442.654 29.853  599.455 462.863 29.855  619.505 467.26  30.163
     0.279  111.075 31.219  19.664  201.272 31.227  40.033  237.484 31.24   60.51   259.593 31.227  80.873  271.165 31.24   99.424  279.93  31.246  129.935 285.73  31.221  169.713 265.97  31.209  199.969 250.021 31.234  250.08  217.416 31.244  300.368 205.831 31.233  329.826 222.066 31.207  380.292 297.464 31.249  399.692 344.335 31.208  450.288 420.325 31.235  500.029 421.615 31.25   549.758 441.59  31.244  599.982 461.843 31.223  620.805 466.263 31.248
     -0.196 110.635 32.995  19.493  200.514 32.992  38.713  237.169 32.999  59.287  259.517 32.999  79.892  271.021 32.993  98.751  279.466 32.996  128.785 285.668 32.999  169.139 265.219 32.996  199.347 249.546 32.998  248.81  216.85  32.995  298.841 205.432 32.999  328.21  221.91  32.995  379.636 297.352 32.999  398.784 343.398 32.991  449.428 419.375 32.997  499.043 421.018 32.991  548.969 441.046 32.994  599.524 460.831 32.994  619.193 466.092 32.995
     -0.132 109.594 34.42   20.125  199.858 32.732  39.776  236.054 33.054  60.129  257.645 33.431  80.851  269.508 34.218  99.269  278.227 33.904  130     283.99  34.048  169.914 264.152 33.073  200.719 248.544 34.04   249.707 215.652 33.406  300.225 203.878 34.126  329.592 220.167 33.769  380.754 296.156 34.421  399.397 342.405 33.861  450.468 418.693 33.948  499.96  420.455 33.265  549.437 440.39  33.953  599.864 460.69  34.351  620.874 465.104 34.09
     -0.343 108.513 34.78   19.3    198.316 33.888  38.786  234.577 34.484  59.053  257.223 33.853  79.285  268.324 35.043  98.398  277.644 34.937  128.83  283.213 35.301  169.088 263.069 35.014  198.878 247.767 35.609  248.615 214.391 35.807  299.485 202.82  35.357  328.648 219.254 35.022  379.743 294.584 34.429  398.637 342.162 35.193  449.496 418.209 35.108  499.324 419.115 34.295  548.907 439.475 34.687  598.883 458.884 34.303  619.369 463.964 34.851
     0.423  107.454 36.297  19.785  197.317 35.425  40.375  233.902 35.959  60.09   255.777 35.783  80.63   268.02  36.853  99.567  276.422 36.795  130.287 282.576 36.835  170.145 262.756 36.119  200.352 246.912 36.895  249.614 213.916 36.907  299.812 202.349 36.713  329.403 218.774 36.711  380.395 294.154 36.327  399.866 341.226 36.943  449.724 416.448 36.271  500.452 418.301 36.213  549.877 437.585 36.038  600.532 458.707 36.157  620.02  462.977 36.445
     -0.088 106.391 40.184  19.793  197.12  39.075  40.586  232.691 39.109  59.812  255.447 39.332  79.952  266.173 39.494  99.221  275.594 40.444  129.757 281.51  40.035  170.036 261.36  39.122  199.869 245.174 40.197  250.045 212.441 39.611  300.362 201.267 39.588  329.451 217.04  40.17   380.741 292.932 40.168  399.997 339.678 40.689  450.209 415.475 39.322  499.581 417.128 39.793  549.785 437.368 39.621  599.735 457.43  40.383  620.764 461.816 40.233
     -0.578 103.781 42.003  18.861  194.176 42.045  39.371  229.481 42.045  58.832  252.026 42.095  79.04   263.57  42.06   98.512  271.997 42.08   129.028 278.247 42.052  169.367 258.679 42.04   199.296 242.657 42.005  248.473 210.079 42.02   299.209 198.553 42.079  328.911 214.091 42.047  378.934 290.029 42.014  398.408 337.125 42.037  448.973 412.977 42.099  499.168 413.779 42.082  548.53  433.779 42.039  599.266 454.462 42.098  619.302 458.232 42.098
     0.108  101.868 41.937  20.502  191.246 41.969  39.879  228.172 41.928  60.084  250.124 41.99   80.344  261.778 41.968  99.165  270.769 41.961  129.622 276.502 41.91   170.288 256.048 41.977  200.321 240.195 41.922  249.569 208.29  41.938  300.539 195.873 41.995  329.966 212.825 41.937  380.491 288.359 41.984  399.837 334.911 41.998  450.207 410.929 41.96   500.101 411.893 41.925  549.602 431.696 41.936  599.93  452.41  41.976  620.817 456.93  41.909
     -0.156 100.022 40.698  19.591  190.231 39.108  39.68   226.389 39.847  59.626  248.557 39.725  79.928  260.105 40.23   99.158  268.922 40.825  129.536 274.685 40.797  169.45  254.899 40.03   199.86  239.014 40.391  249.085 206.386 40.338  299.722 194.74  40.504  329.176 210.977 40.424  379.918 286.463 40.51   399.298 333.317 40.82   449.58  409.269 40.059  499.539 410.591 40.02   549.289 430.569 40.294  599.64  450.785 40.472  619.954 455.193 40.809
     -0.068 80.022  38.332  19.096  170.231 36.322  NaN     NaN     NaN     NaN     NaN     NaN     79.634  240.105 37.22   99.516  248.922 38.474  129.064 254.685 38.027  169.675 234.899 37.043  199.516 219.014 37.425  249.516 186.386 38.009  299.339 174.74  39.54   329.215 190.977 39.46   379.057 266.463 37.359  399.664 313.317 37.647  449.917 389.269 38.097  499.452 390.591 39.341  549.449 410.569 37.419  599.015 430.785 39.443  619.293 435.193 38.714
     -0.879 60.235  38.12   19.794  150.69  37.633  NaN     NaN     NaN     NaN     NaN     NaN     79.676  220.614 38.967  99.268  229.482 38.436  129.881 235.374 38.61   169.79  215.494 39.999  199.482 199.431 39.078  249.724 166.529 38.679  299.764 155.498 39.377  329.036 171.037 38.953  379.673 247.306 38.455  399.205 293.707 38.795  449.438 369.592 39.867  499.811 371.176 38.781  549.221 390.944 39.002  599.331 411.525 39.837  619.223 415.971 38.836
     -0.056 10.391  42.313  19.883  100.806 39.381  NaN     NaN     NaN     NaN     NaN     NaN     79.393  170.931 40.647  99.816  179.896 40.183  129.278 185.549 40.86   169.362 165.621 40.561  199.201 149.789 40.356  249.526 117.283 40.668  299.544 104.913 41.298  329.4   121.509 41.644  379.295 197.056 40.755  399.8   244.073 41.207  449.299 319.634 40.484  499.926 320.765 41.034  549.511 341.235 40.568  599.448 361.452 40.63   619.025 366.018 40.615];

clf
hold all
%Y-DIRECTION
for k=1:19
    X_vert=[XYZ(:,3*k-2)];
    Y_vert=[XYZ(:,3*k-1)];
    Z_vert=[XYZ(:,3*k)];
    plot3(X_vert, Y_vert, Z_vert);
    pause(0.01)
end
%X-DIRECTION
for k=1:27
    X_horz=[XYZ(k,1:3:57)];
    Y_horz=[XYZ(k,2:3:57)];
    Z_horz=[XYZ(k,3:3:57)];
    plot3(X_horz, Y_horz, Z_horz);
    pause(0.01)
end
axis equal
%REARRANGED INTO 3-COLUMN LIST
X=[];
Y=[];
Z=[];
for k=1:19
    X=[X;XYZ(:,3*k-2)];
    Y=[Y;XYZ(:,3*k-1)];
    Z=[Z;XYZ(:,3*k)];
end
XYZ=[X Y Z]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:51:24.423

因此，如果我对您的理解正确，您只想在 3D 中进行插值。文件交换的一个很好的解决方案是[interparc](http://www.mathworks.us/matlabcentral/fileexchange/34874-interparc)。它允许您对 n 维的一般曲线进行线性或样条插值。

# spring - 在 Spring 中使用 @PropertyResource 访问多个属性文件

> ID：14505078
> 
> 赞同：21
> 
> 时间：2013-01-24T15:37:49.180
> 
> 标签：spring, spring-mvc

使用 Spring 3.1 中的新`@PropertySource`注解，如何使用 Environment 访问多个属性文件？

目前我有：

```
@Controller
@Configuration 
@PropertySource(
    name = "props",
    value = { "classpath:File1.properties", "classpath:File2.properties" })
public class TestDetailsController {

@Autowired
private Environment env;
/**
 * Simply selects the home view to render by returning its name.
 */
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {

    String file1Name = env.getProperty("file1.name","file1.name not found");
            String file2Name = env.getProperty("file2.name","file2.name not found");

            System.out.println("file 1: " + file1Name);
            System.out.println("file 2: " + file2Name);

    return "home";
} 
```

结果是来自*File1.properties*的正确文件名，但未找到*file2.name*。如何访问*File2.properties*？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-12-21T00:10:14.203

如果您可以迁移到**Spring 4.x**，则问题已通过新的[@PropertySources](http://docs.spring.io/spring/docs/4.0.0.RELEASE/javadoc-api/org/springframework/context/annotation/PropertySources.html)注释解决：

```
@PropertySources({
        @PropertySource("/file1.properties"),
        @PropertySource("/file2.properties")
}) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-18T14:35:25.577

`Properties`在 Spring 中可以通过以下任一方式访问多个，

*   @PropertySource( {"name1", "name2"} )
*   @PropertySorces( { @PropertySource("name1"), @PropertySource("name2") } )

@PropertySource 的示例，

```
@PropertySource({
        "classpath:hibernateCustom.properties",
        "classpath:hikari.properties"
}) 
```

@PropertySources 的示例，

```
@PropertySources({
        @PropertySource("classpath:hibernateCustom.properties"),
        @PropertySource("classpath:hikari.properties")
}) 
```

指定`properties`路径后，您可以`Environment`像往常一样通过实例访问它们

## 注意：只有这些对我不起作用

`error`当我使用属性值来配置我的应用程序上下文时，我正在编译。我尝试了通过网络找到的所有内容，但它们对我不起作用！

**直到我如下配置 Spring 上下文，**

```
applicationContext.setServletContext(servletContext);
applicationContext.refresh(); 
```

例子

```
public class SpringWebAppInitializer implements WebApplicationInitializer{

    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        // Create the 'root' Spring application context
        AnnotationConfigWebApplicationContext applicationContext = new AnnotationConfigWebApplicationContext();
        // register config class i.e. where i used @PropertySource
        applicationContext.register(AppContextConfig.class);
        // below 2 are added to make @PropertySources/ multi properties file to work
        applicationContext.setServletContext(servletContext);
        applicationContext.refresh();

        // other config
    }
} 
```

供您参考，我使用的是**Spring 4.3**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T15:57:02.560

有两种不同的方法：第一种是在 applicationContext.xml 中使用 PropertyPlaceHolder： [beans-factory-placeholderconfigurer](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer)

```
<context:property-placeholder location="classpath*:META-INF/spring/properties/*.properties"/> 
```

要添加的命名空间是`xmlns:context="http://www.springframework.org/schema/context"`

如果您想直接访问控制器中字符串变量的键，请使用：

```
@Value("${some.key}")
private String valueOfThatKey; 
```

第二种方法是`util:properties`在你的 applicationContext.xml 中使用：

```
<util:properties id="fileA" location="classpath:META-INF/properties/a.properties"/>
<util:properties id="fileB" location="classpath:META-INF/properties/b.properties"/> 
```

使用命名空间模式`xmlns:util="http://www.springframework.org/schema/util"`位置：`http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd`

然后在你的控制器中：

```
@Resource(name="fileA")
private Properties propertyA;

@Resource(name="fileB")
private Properties propertyB; 
```

如果您想要文件中的值，只需使用该方法`getProperty(String key)`

# c - 将标准输出和标准错误重定向到系统日志

> ID：14505079
> 
> 赞同：3
> 
> 时间：2013-01-24T15:37:49.180
> 
> 标签：c, linux

在一个程序中，我希望将所有 printfs 写入 syslog。我将所有 printf 替换为 syslog，所以我想将 stdout 和 stderr 重定向到 syslog。为此，我尝试了以下代码

```
int main()
{
    FILE *fl;
    fl = popen("logger","w");
    if(fl == NULL)
        return 1;
    fprintf(fl,"logger test new");//this goes to /var/log/messages
    int nf;
    nf = fileno(fl);
    dup2(nf,STDOUT_FILENO);
    dup2(nf,STDERR_FILENO);
    fprintf(stdout,"Wriiten in stdout\n");
    fprintf(stderr,"Wriiten in stderr\n");
    pclose(fl);
} 
```

问题是 stderr 进入 syslog 并且屏幕上没有打印任何内容并且程序被挂起。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:12:24.590

```
dup2(nf,STDOUT_FILENO);
dup2(nf,STDERR_FILENO);
fprintf(stdout,"Wriiten in stdout\n");
fprintf(stderr,"Wriiten in stderr\n");
fflush(stdout); 
```

这应该解决它。

`fflush()`将强制从标准输出写入缓冲数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-17T13:41:01.010

另一种方法`fflush(stdout)`是使用以下命令禁用标准输出缓冲：

```
setbuf (stdout,NULL); 
```

# java - 当内存助推器杀死我的应用程序时，它会强制关闭

> ID：14505083
> 
> 赞同：0
> 
> 时间：2013-01-24T15:38:04.113
> 
> 标签：java, android

我编写了一个具有主要活动、服务和广播接收器的应用程序。该应用程序一直有效，直到我尝试使用称为内存增强器的应用程序将其杀死。然后它强制关闭，我的 logcat 抛出 2 NULLPOINTEREXCEPTIONS。在我的 textview（在 mainactivity 中声明并传递给广播接收器）和 ConnectiviyManager（也在 main Activity 中声明，但在广播接收器中使用）。

```
01-24 16:25:06.790: E/AndroidRuntime(4820): java.lang.RuntimeException: Error receiving broadcast Intent { act=ACTION_PERFORMED (has extras) } in app.wifito3g.Broadcast@40628910
01-24 16:25:06.790: E/AndroidRuntime(4820): Caused by: java.lang.NullPointerException 
```

01-24 16:25:06.790: E/AndroidRuntime(4820): 在 app.wifito3g.Broadcast.onReceive(Broadcast.java:122)

谁能解释我为什么？谢谢！

编辑：详细的堆栈跟踪

![在此处输入图像描述](../Images/106d5682a4cacb4f9746b1c4d3d8eddf.png)

第 122 行是：

```
wifi_state = conMan.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState(); 
```

如果我注释掉第 121 行，我会在 NEXT LINE 上得到 NULLPOINTEREXCEPTION，即：

```
wifi_check.setTextColor(Color.BLACK); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:42:46.897

您可以做什么：覆盖您的主要活动的 onDestroy，然后正确关闭所有内容（您的服务、广播等）。在这种情况下，您将不会再关闭力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:59:58.293

`conMan`是`null`因为，在您运行的任何代码路径中，您都没有对其进行初始化。确定一个更好的位置来初始化涵盖这种情况的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:26:57.320

好的，我知道出了什么问题。这是解决方案。

1.  当任务管理器或任何应用程序杀死我的应用程序时，它会强制关闭。那是因为从 2.2 Android 版本开始，您不能为此目的完全杀死其他应用程序。Android只是不允许这样做。

2.  当任务管理器或任何应用程序“杀死”我的应用程序时，并且该应用程序有一个正在运行的服务，一个安卓操作系统，希望它们再次运行，所以它再次开始运行服务。

3.  因为活动是死的，我在那里实例化了我的对象，它们不能再次用于服务。有些对象必须在我创建的服务类中实例化。（所以它们不为空）

4.  所以我在我的自定义服务类中创建了一个 WifiManager 和其他重要对象的实例。当操作系统再次启动服务时，它们被实例化并准备好使用（它们不为空）

对不起我的英语不好..希望你明白我想说什么:)

# javascript - FabricJS - 对象后画布不会重新渲染：悬停事件

> ID：14505084
> 
> 赞同：1
> 
> 时间：2013-01-24T15:38:15.820
> 
> 标签：javascript, html, canvas, fabricjs

我使用“piggyback”来捕捉对象：此处提到的悬停事件：[https ://github.com/kangax/fabric.js/wiki/Working-with-events](https://github.com/kangax/fabric.js/wiki/Working-with-events)

假设标准设置和这些事件：

```
canvas.on('object:over', function(e) {
    // some manipulation with e.target here, will execute on hover as expected
    canvas.renderAll.bind(canvas);
});
canvas.on('after:render', function() {
    // code here wont execute on hover but only after other action which evokes render, such as click and drag of object
}) 
```

是否有其他方法可以在对象的鼠标悬停时强制重新渲染画布？

如果您想知道我的目标是什么，我想在鼠标悬停时突出显示对象，类似于以下内容：http: [//www.html5canvastutorials.com/demos/labs/html5-canvas-world-map-svg-path- with-kineticjs/index.php](http://www.html5canvastutorials.com/demos/labs/html5-canvas-world-map-svg-path-with-kineticjs/index.php)

非常感谢您的帮助！

# unity3d - 在着色器中定义可在代码中使用的变量

> ID：14505085
> 
> 赞同：0
> 
> 时间：2013-01-24T15:38:16.313
> 
> 标签：unity3d

我在自定义着色器中定义了一些变量：

```
 _Emiss("emission", Float) = .5
 _Albed("albedo", Float) = .9 
```

到这里为止一切都很好，但是当我尝试在代码中使用变量时：

```
void surf (Input IN, inout SurfaceOutput o) {
          o.Albedo = tex2D (_MainTex, IN.uv_MainTex).rgb * _Albed;
          o.Emission = texCUBE (_Cube, IN.worldRefl).rgb * _Emiss;
      } 
```

我收到一些错误，告诉我没有声明 _Albed 和 _Emiss。

我究竟做错了什么？

这是完整的着色器：

```
Shader "Custom/cubemapReflShader" {

        Properties {
      _MainTex ("Texture", 2D) = "red" {}
      _Cube ("Cubemap", CUBE) = "" {}
      _Emiss("emission", Float) = .5
      _Albed("albedo", Float) = .9
      // _RefrColor ("Refraction color", Color)  = (.34, .85, .92, 1) // color
    }

    SubShader {
      Tags { "RenderType" = "Opaque" }
      CGPROGRAM
      #pragma surface surf Lambert
      struct Input {
          float2 uv_MainTex;
          float3 worldRefl;
      };
      sampler2D _MainTex;
      samplerCUBE _Cube;
      void surf (Input IN, inout SurfaceOutput o) {
          o.Albedo = tex2D (_MainTex, IN.uv_MainTex).rgb * .9;
          o.Emission = texCUBE (_Cube, IN.worldRefl).rgb * .5;
      }
      ENDCG
    } 
    Fallback "Diffuse"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:11:21.603

您是否将[它们声明给](http://docs.unity3d.com/Documentation/Components/SL-PropertiesInPrograms.html)属性之外的着色器？

```
Properties 
{
    _Emiss("emission", Float) = .5
    _Albed("albedo", Float) = .9
}

float _Emiss;
float _Albed;

void surf (Input IN, inout SurfaceOutput o) {
    o.Albedo = tex2D (_MainTex, IN.uv_MainTex).rgb * _Albed;
    o.Emission = texCUBE (_Cube, IN.worldRefl).rgb * _Emiss;
} 
```

**更新**

修改 OP 的完整脚本：

```
Shader "Custom/cubemapReflShader" {
    Properties {
  _MainTex ("Texture", 2D) = "red" {}
  _Cube ("Cubemap", CUBE) = "" {}
  _Emiss("emission", Float) = .5
  _Albed("albedo", Float) = .9
}
SubShader {
  Tags { "RenderType" = "Opaque" }
  CGPROGRAM
  #pragma surface surf Lambert
  struct Input {
      float2 uv_MainTex;
      float3 worldRefl;
  };
  sampler2D _MainTex;
  samplerCUBE _Cube;

  // PUT THESE HERE <----------
  float _Albed;
  float _Emiss;

  void surf (Input IN, inout SurfaceOutput o) {
      o.Albedo = tex2D (_MainTex, IN.uv_MainTex).rgb * _Albed;
      o.Emission = texCUBE (_Cube, IN.worldRefl).rgb * _Emiss;
  }
  ENDCG
} 
Fallback "Diffuse"
} 
```

# python - python单线程服务器如何处理多客户端

> ID：14505086
> 
> 赞同：1
> 
> 时间：2013-01-24T15:38:18.627
> 
> 标签：python, client-server, django-views

我有一个提供页面的python服务器。使用 IdP（身份提供者）登录这些页面。因此，当用户尝试打开我的服务器页面时，他会被重定向到 IdP 页面。与此同时，我的服务器开始监听 IdP 响应。当用户登录 IdP 页面时，IdP 将数据发送到我的服务器，由服务器处理它们并向用户显示我的页面。

问题是，如果多个客户端尝试登录，当服务器收到来自一个 IdP 的第一个响应时，所有用户都会显示我的页面使用第一个用户的凭据登录。

我的意思是，当服务器开始监听时，它正在等待每个人。当只有第一个用户登录时，所有等待登录的用户都使用相同的凭据。

我该如何解决这个非常大的问题？多线程可能有帮助？

这里是一些重要的代码。假设我想将 idp 回答的一些数据加载到我的页面登录表单的字段“名称”中。

```
class Login(django.forms.SelfHandlingForm):
    def __init__(self, *args, **kwargs):
        super(Login, self).__init__(*args, **kwargs)
        response = self.getIdPResponse()
        self.fields['name'].widget=forms.TextInput(attrs={'value': response['name']})

    def getIdPResponse(self):
        global response
        response = None
        timeout = 300
        class RequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
            def do_POST(self):
                global response
                self.send_response(200)
                self.send_header("Content-type", "text/html")
                self.end_headers()
                varLen = int(self.headers["Content-Length"])
                #response = urlparse.parse_qs(self.rfile.read(varLen))
                response = self.rfile.read(varLen)

                self.wfile.write("Log-in ok! now you can close this page.")
        httpd = BaseHTTPServer.HTTPServer(('0.0.0.0', 8080), RequestHandler)
        try:
            httpd.socket.settimeout(1)
        except BaseException as e:
            print e
        count = 0
        '''at this point, the IdP page is already showed to the user '''
        while response is None and count < timeout:
           try:
               httpd.handle_request()
               count = count + 1
               print 'waiting for the Idp answer...'
           except Exception as e:
               print e
        return response 
```

这样，当用户成功登录时，所有等待登录的用户都会在“名称”字段中显示第一次登录的用户的名称。显然我不希望这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:33:43.137

一种方法是使用事件驱动的系统，如[twisted](http://twistedmatrix.com/trac/)，将您的`getIdPResponse`方法分成两部分：

1.  发送请求
2.  处理响应

那么你的单线程不会阻塞，同时可以为其他客户端分派事件。

如果你想简化你的应用程序逻辑，你*可以*在上面包裹一层阻塞调用，但这不是我推荐的。

# php - 用 Zend 检查数字是否为浮点数

> ID：14505089
> 
> 赞同：1
> 
> 时间：2013-01-24T15:38:23.823
> 
> 标签：php, zend-framework

我正在尝试检查数字是否与 Zend 一起浮动。如果我调用此代码：

```
Zend_Locale_Format::isFloat('4.202', array('locale' => 'de')); 
```

它返回真。然而，这：

```
Zend_Locale_Format::isFloat('4.20', array('locale' => 'de')); 
```

返回假。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:49:16.563

这是因为德语语言环境使用句点`.`作为千位分隔符，而在您的第二个示例中，分隔符位于错误的位置。

例如：

```
13.001,45 
```

`true`传递给 时应该给出预期的值`isFloat()`。

顺便说一句，`4.202`被解释为`4202`（也可以被认为是没有分数的浮点数）。

另请参阅：[规范化和本地化](http://files.zend.com/help/Zend-Framework/zend.locale.parsing.html)，“29.3.6\. 浮点值测试”部分

# magento - 没有库存时隐藏可配置产品

> ID：14505095
> 
> 赞同：1
> 
> 时间：2013-01-24T15:38:33.990
> 
> 标签：magento, configurable

在我的情况下，可配置的简单产品缺货，它没有显示在可配置的产品选项列表下。它对我来说很好。但是，当所有选项都缺货时，我如何隐藏可配置产品......？在这种情况下，可配置产品不显示添加到购物车按钮和选项下拉菜单。但是，如果此选项下没有选项，我需要隐藏全部可配置产品。

谢谢， 穆拉利

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:28:02.003

这适用于我（版本 1.7.0.2），配置如下：

*   cataloginventory/options/show_out_of_stock 为 0（配置/目录/库存/在管理界面上显示缺货产品“否”）
*   可配置产品/库存/管理库存为“否”
*   简单的产品/库存/管理库存是“是”

这样，当所有选项都售罄时，主产品就被隐藏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:10:29.567

一种解决方案是编写一个观察者来捕捉`catalog_controller_product_init_after`事件。从您的观察者，您可以通过以下方式访问产品对象`Mage::registry('product');`

通过调用检查产品是否可配置`($product->getTypeId() == 'configurable')`。如果它是可配置产品，您可以通过执行访问其子库存

```
$simples = $product->getTypeInstance(true)->getUsedProducts(null, $product);
$confHasStock = false;
foreach ($simples as $simple) {
  if ($simple->getStockItem()->getData('qty') > 0) {
     $confHasStock = true;
     break;
  }
} 
```

如果变量 $confHasStock 仍然为假，则执行 404 重定向或任何您认为合适的“隐藏”产品。

# memory-leaks - Slickgrid 内存泄漏

> ID：14505098
> 
> 赞同：1
> 
> 时间：2013-01-24T15:38:54.523
> 
> 标签：memory-leaks, slickgrid

我是 javascript 的新手。我正在使用以下函数创建光滑网格，并根据日期操作 url 并获取数据。当我将此代码用于不同日期时，浏览器中的内存需求正在增加。我在这里做错了吗？

```
var createSlickGrid = function(data, key) {
    var options = ...;
    new Slick.grid($('#temp'), data, options);
}

getData = function(date) {
    url = <some function based on date>;
    $.getJSON(url, function(data) {
       createSlickGrid(data, key);
       data = null;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:55:28.997

我认为您不想每次都创建一个新的 slickgrid，而是使用 slickgrid 包中的 slick.remotemodel.js。使用这个例子作为参考来帮助你： http: [//mleibman.github.com/SlickGrid/examples/example6-ajax-loading.html](http://mleibman.github.com/SlickGrid/examples/example6-ajax-loading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:27:06.793

When you create the new Slickgrid, you are not clearing out the old, so they keep building until garbage collection eventually gets to it.

Aid your code by returning the instance of Slick.grid, so when you create a new one, if that is what you want, as @Drew was corrected, you could simply reload it, then you can dereference the original Slickgrid, or set it to NULL to allow the garbage collection to clean it up.

# jquery - 使用 Datatables jquery 插件对关于组的行进行排序

> ID：14505099
> 
> 赞同：1
> 
> 时间：2013-01-24T15:39:07.880
> 
> 标签：jquery, jquery-plugins, datatables

我一直在查看有关分组的[Datatables 文档](http://jquery-datatables-row-grouping.googlecode.com/svn/trunk/customGroupOrdering.html)，但我认为这不是我想要的。

![在此处输入图像描述](../Images/90375582aa2f727a697fadb03a9948a9.png)

我有一张有两组柱子的桌子。一半左一半右。左侧的行与右侧的行相关，因此左侧的一行可以与右侧的许多行相关。

我不会对表格的右侧半边使用任何排序选项，但我想为左侧的选项添加此选项。

问题是左侧的行数仍然与右侧的行数相同，但其中一些是空的。( `<td></td>`) 以显示左侧行与右侧行之间的关系。

现在，如果我按左侧的一列排序，则使用 Datatables 插件的默认排序，它将考虑空行并对其进行排序，而且我将失去表格左侧和右侧之间的关系.

是否有任何可能的解决方案可以使用任何 Datatables 选项来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:03:44.510

最后我解决了。

起初，我查看了 DataTables 的[Grouping Add-on](http://jquery-datatables-row-grouping.googlecode.com/svn/trunk/index.html)，但它在排序和过滤方面效果不佳，因此我决定以另一种方式进行。

每一行都会有数据。如果它是一个组，那么它将被复制，但它会被一个具体的 CSS 样式隐藏。

像这样，用户会看到“组”，过滤和排序将照常工作。

在搜索过滤的情况下，使用 jQuery，我再次显示每组的第一行（以防搜索返回隐藏的半行）

# c# - 将结构传递给非托管代码时出现 System.AccessViolationException

> ID：14505104
> 
> 赞同：3
> 
> 时间：2013-01-24T15:39:26.457
> 
> 标签：c#, pinvoke, marshalling, unmanaged

我正在尝试使用 C# 中的非托管 API，并将我的头撞到墙上。（当谈到 PInvoke 时，我是个初学者。）

头文件的相关部分如下所示：

```
#define CTAPICALL       __stdcall
#ifdef __cplusplus
    extern "C" {
#endif

extern  BOOL    CTAPICALL   ctTagReadEx(HANDLE,LPCSTR,LPSTR,DWORD,CT_TAGVALUE_ITEMS*);      /* read extended data from tag          */

#ifdef __cplusplus
}
#endif 
```

`CT_TAGVALUE_ITEMS`看起来像这样：

```
typedef struct
{
    DWORD                   dwLength;                           /* size, in bytes, of this structure    */
    unsigned __int64        nTimestamp;                         /*  timestamp                           */
    unsigned __int64        nValueTimestamp;                    /*  value timestamp                     */
    unsigned __int64        nQualityTimestamp;                  /*  quality timestamp                   */
    BYTE                    bQualityGeneral;                    /*  quality general                     */
    BYTE                    bQualitySubstatus;                  /*  quality substatus                   */
    BYTE                    bQualityLimit;                      /*  quality limit                       */
    BYTE                    bQualityExtendedSubstatus;          /*  quality extended substatus          */
    UINT                    nQualityDatasourceErrorCode;        /*  quality datasource error            */
    BOOLEAN                 bOverride;                          /*  quality override flag               */
    BOOLEAN                 bControlMode;                       /*  quality control mode flag           */
}   CT_TAGVALUE_ITEMS; 
```

我的 C# 方法声明：

```
 [DllImport("ctapi.dll", SetLastError = true)]
    public static extern bool ctTagReadEx(
        IntPtr hCTAPI,
        [MarshalAs(UnmanagedType.LPStr)] string tag,
        [MarshalAs(UnmanagedType.LPStr)] System.Text.StringBuilder value,
        int length,
        CtTagValueItems tagValueItems); 
```

C# 结构：

```
[StructLayout(LayoutKind.Sequential)]
public struct CtTagValueItems
{
    public int dwLength;
    public ulong nTimestamp;
    public ulong nValueTimestamp;
    public ulong nQualityTimestamp;
    public byte bQualityGeneral
    public byte bQualitySubstatus;
    public byte bQualityLimit;
    public byte bQualityExtendedSubstatus;
    public uint nQualityDatasourceErrorCode;
    public uint bOverride;
    public uint bControlMode;
} 
```

当我这样调用它时**（来自构建为 x86 的测试程序集）**，我得到`System.AccessViolationException : Attempted to read or write protected memory`：

```
StringBuilder valueBuilder = new StringBuilder(300);
CtTagValueItems tagValueItems = new CtTagValueItems {dwLength = Marshal.SizeOf(typeof (CtTagValueItems))};
bool ok = CTAPI.ctTagReadEx(new IntPtr(handle), "TIC_Hold_PV", valueBuilder, valueBuilder.Capacity, tagValueItems); 
```

我一直在尝试各种事情，比如使用`LayoutKind.Explicit`和/或`CallingConvention = CallingConvention.Cdecl`，但无济于事。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:41:58.877

1.  你为什么映射`UINT`为`ushort`. 它不是有4个字节吗？
2.  本机`BOOLEAN`类型映射到 4 个字节，AFAIK。
3.  您需要`CtTagValueItems`通过 ref （作为 class 或`ref`）。
4.  检查调用约定。
5.  检查评论中写的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:41:44.010

问题可能是对齐的。尝试像

```
StructLayout(LayoutKind.Sequential, Pack = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:02:54.207

C# 调用中的`handle`变量来自哪里？

我更喜欢`IntPtr`在我的`DllImport`方法定义中使用。以这种方式管理和编组似乎更容易。

我已经更改了很多`struct`定义，因为我没有与您相同的定义。我的函数中也没有太多的主体`ctTagReadEx`（我将尝试充实它以确保传入的参数与接收的参数匹配）。但这对我有用。

**更新：**看起来所有参数和结构值都已正确传递。

**C**

```
typedef struct
{
    int                     dwLength;                           /* size, in bytes, of this structure    */
    unsigned long           nTimestamp;                         /*  timestamp                           */
    unsigned long           nValueTimestamp;                    /*  value timestamp                     */
    unsigned long           nQualityTimestamp;                  /*  quality timestamp                   */
    int                     bQualityGeneral;                    /*  quality general                     */
    int                     bQualitySubstatus;                  /*  quality substatus                   */
    int                     bQualityLimit;                      /*  quality limit                       */
    int                     bQualityExtendedSubstatus;          /*  quality extended substatus          */
    unsigned int            nQualityDatasourceErrorCode;        /*  quality datasource error            */
    int                     bOverride;                          /*  quality override flag               */
    int                     bControlMode;                       /*  quality control mode flag           */
}   CT_TAGVALUE_ITEMS;

CTAPICALL int ctTagReadEx(void *, const char *, char *, int, CT_TAGVALUE_ITEMS *);

int ctTagReadEx(void * hCTAPI, const char * tag, char * value, int length, CT_TAGVALUE_ITEMS *tagValueItems) {
    return 15;
} 
```

**C＃**

```
[StructLayout(LayoutKind.Sequential)]
public struct CtTagValueItems {
    public int dwLength;
    public ulong nTimestamp;
    public ulong nValueTimestamp;
    public ulong nQualityTimestamp;
    public int bQualityGeneral;
    public int bQualitySubstatus;
    public int bQualityLimit;
    public int bQualityExtendedSubstatus;
    public uint nQualityDatasourceErrorCode;
    public int bOverride;
    public int bControlMode;
}

[DllImport("ctapi.dll")]
static extern int ctTagReadEx(IntPtr hCTAPI, IntPtr tag, IntPtr value, int length, IntPtr tagValueItems);

public void TestMe() {

    var tagValueItems = new CtTagValueItems();
    var tagValueItemsPtr = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(CtTagValueItems)));
    Marshal.StructureToPtr(tagValueItems, tagValueItemsPtr, true);

    var tag = "tag";
    var tagPtr = Marshal.StringToHGlobalAnsi(tag);

    var value = "value";
    var valuePtr = Marshal.StringToHGlobalAnsi(value);

    int length = value.Length;

    var result = ctTagReadEx(IntPtr.Zero, tagPtr, valuePtr, length, tagValueItemsPtr);
    if (result != 15) throw new Exception();

    Marshal.FreeHGlobal(tagValueItemsPtr);
    Marshal.FreeHGlobal(tagPtr);
    Marshal.FreeHGlobal(valuePtr);
} 
```

# php - 嵌套 DQL 用户定义函数

> ID：14505105
> 
> 赞同：1
> 
> 时间：2013-01-24T15:39:28.353
> 
> 标签：php, symfony, doctrine, user-defined-functions, dql

如果我在一次返回中返回自定义函数，它会起作用，但我想将它分成两个不同的用户定义函数。

按照此处的示例：

*   [http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-user-defined-functions.html](http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-user-defined-functions.html)

这是我的嵌套函数查询示例

```
SELECT *
FROM database
WHERE 
    FUNC_1(FUNC_2('field_name'),'constraint_default') = 
        FUNC_1(FUNC_2('value_entered'),'constraint_entered') 
```

示例函数

```
<?php
namespace Foo\Bundle\FooBundle\DQL\NumericFunction;

use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\Lexer;

class BarFunction extends FunctionNode
{
    public $stringExpression = null;
    public $trimValueExpression = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->stringExpression = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_COMMA);

        $this->trimValueExpression = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'FUNC_1(' .
            $this->stringExpression->dispatch($sqlWalker) . ',' .
            $this->trimValueExpression->dispatch($sqlWalker) .
            ')';
    }
} 
```

现在 FUNC_2 非常接近 FUNC_1 但永远不会被调用，因为我认为 FUNC_1 返回已解析的语法，它删除了 FUNC_2 所需的语法。

```
<?php
namespace Foo\Bundle\FooBundle\DQL\NumericFunction;

use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\Lexer;

class FooFunction extends FunctionNode
{
    public $stringExpression = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->stringExpression = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'FUNC_2(' .
            $this->stringExpression->dispatch($sqlWalker) .
        ')';
    }
} 
```

现在我创建了一个有效的组合函数：

```
<?php
namespace Foo\Bundle\FooBundle\DQL\NumericFunction;

use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\Lexer;

class CombinedFunction extends FunctionNode
{
    public $stringExpression = null;
    public $trimValueExpression = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->stringExpression = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_COMMA);

        $this->trimValueExpression = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'FUNC_1(FUNC_2(' .
            $this->stringExpression->dispatch($sqlWalker) . '),' .
            $this->trimValueExpression->dispatch($sqlWalker) .
            ')';
    }
} 
```

但我想知道是否可以使用嵌套的两个单独函数而不是创建这个组合函数？

想法？

更新：

添加 yml 配置

```
doctrine:
    dbal:
        ...

    orm:        
        entity_managers:
            foo_manager:
                dql:
                    numeric_functions:
                        FUNC_1: Foo\Bundle\FooBundle\DQL\NumericFunction\BarFunction
                        FUNC_2: Foo\Bundle\FooBundle\DQL\NumericFunction\FooFunction
                        COMB_FUNC: Foo\Bundle\FooBundle\DQL\NumericFunction\CombinedFunction 
```

更新#2

所以 FUNC_1 会匹配这个

```
FUNC_1(value_of_func_2,'constraint_default') 
```

FUNC_2 会匹配这个

```
FUNC_2('field_name') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:29:06.707

我将 FUNC_2 定义为：

```
class FooFunction extends FunctionNode
{
    public $stringExpression = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->stringExpression = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'FUNC_2(' .
            $this->stringExpression->dispatch($sqlWalker) . ')';
    }
} 
```

它为我生成了正确的 sql：FUNC_1(FUNC_2(123),123) = FUNC_1(FUNC_2(123),123)

# jenkins - 使用 Jenkins 设置 StyleCop 和 FXCop 的问题

> ID：14505108
> 
> 赞同：0
> 
> 时间：2013-01-24T15:39:40.623
> 
> 标签：jenkins, fxcop, stylecop

我已经安装了 Jenkins Violations 插件 v0.7.11，但在显示 FXCop 和 StyleCop 违规时遇到了问题。

在设置中，我输入了推荐的 XML 文件名模式：

```
**/*/FxCopViolations.xml 
**/*/StyleCopViolations.xml 
```

报告显示：

```
fxcop <span style='color:red'>No reports</span>  stylecop <span style='color:red'>No reports</span> 
```

但是在 Visual Studio 中本地构建时，我可以看到应该出现的违规行为。

XML 文件存在于 bin 文件夹中。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:39:25.890

以下是我为我的项目使用的设置：执行 Windows 批处理命令构建步骤如下：

```
fxcopcmd /file:"<files>" /out:"%WORKSPACE%\fxcop-report.xml" /rs:="C:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Static Analysis Tools\Rule Sets\MinimumRecommendedRules.ruleset" /s /searchgac 
```

然后我将 XML 文件名模式设置为

```
fxcop-report.xml 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T13:31:21.327

在命令行参数中：

```
FxCopCmd /project:"C:\Test_FxCop\Test_Assemblies.FxCop" /directory:"<trunkpath>\trunk" /out:"%WORKSPACE%\output.xml" /console /s 
```

它将生成输出 XML 文件“output.xml”

转到“构建后操作”并选择“报告违规”插件

在“XML 文件名模式”列中将名称设为“output.xml”

保存作业并再次运行..您肯定会得到违规结果...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T08:24:24.613

我对 phpci、phpcpd、phpmd 有同样的问题。解决方法：相对文件路径而不是绝对路径。 [![在此处输入图像描述](../Images/3ce2157e73772d43b9c419af4755dec7.png)](https://i.stack.imgur.com/mgYD8.png)

# javascript - 在各种设备上测试网站的行业标准方法？

> ID：14505110
> 
> 赞同：2
> 
> 时间：2013-01-24T15:39:51.647
> 
> 标签：javascript, html, css

我本质上是在寻找设备的 BrowserLab。对于大型设计机构来说，确保他们的网站在各种标准设备上看起来都一样的正常流程是什么？Nexus、iPad 1,2 和 3，等等。

编辑：我希望得到不涉及破产和购买所有设备的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:45:05.567

除了在物理设备上进行测试之外，您还可以使用它们各自的 SDK 和模拟器来测试它们，例如[Android 开发者工具](https://developer.android.com/tools/index.html)。即使您不使用它来开发本机应用程序，您仍然可以创建 Android 虚拟机 (AVD) 并在其中加载浏览器以查看它在该设备上的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:42:41.557

您可以使用[Cucumber](http://cukes.info/)通过在 Ruby 中创建测试用例来测试网站。它具有标准测试用例：

1.  用纯文本描述行为
2.  用 Ruby 编写步骤定义
3.  运行并观察它失败
4.  编写代码使步骤通过
5.  再次运行并查看步骤通过
6.  重复 2-5 直到绿色像杯一样
7.  重复1-6直到钱用完

从他们的网站：

> Cucumber 让软件开发团队能够以纯文本形式描述软件的行为方式。文本以业务可读的特定领域语言编写，用作文档、自动化测试和开发辅助——所有这些都整合为一种格式

此外，还有一些在线工具，例如：

*   [萤火虫](http://quirktools.com/screenfly/)
*   [在真正的移动设备上进行测试而不会破坏银行](http://bradfrostweb.com/blog/mobile/test-on-real-mobile-devices-without-breaking-the-bank/)

# iphone - iOS 私有 api

> ID：14505111
> 
> 赞同：0
> 
> 时间：2013-01-24T15:39:57.300
> 
> 标签：iphone, xcode, api, ios6

我们的应用程序拆分视图要求在纵向显示主视图时自动或通过自定义按钮显示主视图。我一直在使用一个选择器，toggleMasterVisible: 它工作得很好。一个朋友告诉我它可能是私人的，现在我很担心，即使我用 appscanner 扫描了它，验证了它并在博客上阅读了它（Erianna）。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:54:11.417

您的选择是（难度级别）：

1) 将它提交给商店，看看 Apple 是否会检查它 - 如果他们拒绝它，它可能会导致您可能不想要的延迟接受。

2) 将 UISplitViewController 替换为第三方替代品之一。

3）编写你自己的控制器来做你想让他们做的事情。

# c# - Color.GetSaturation() 不工作？

> ID：14505112
> 
> 赞同：0
> 
> 时间：2013-01-24T15:40:04.233
> 
> 标签：c#, colors, hsl

我使用 HSL（HSL = HSB 作为 Heu 饱和亮度）滤色器。要将颜色转换为 HSL，我会：

```
Color myColor = Color.FromArgb(pixel[blue], pixel[green], pixel[red]); 
int HSLhue = (int)myColor.GetHue();  // note normally its a float but i need an int
float HSLsat = myColor.GetSaturation() * 100;
float HSLlight = myColor.GetBrightness()*100; //mycolorGetBrightness allready is a float. 
```

这段代码的问题是 HSLheu 工作正常，HSLlight 也工作正常，但是当我使用带有一些灰色的颜色时，HSLsat 不能反映正确的值。根据我所读到的内容，灰色应该是 0，纯色应该是 1。所以在我的情况下，这是从 0 到 100，但是如果我检查它以查看饱和度是否在某个范围内，这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:54:01.253

哦，它确实有效，其中一个 { } 在使用它的过滤器中输入错误，我在代码中查看了很多我开始在这里感觉到矩阵。

# ruby-on-rails - 关于 ActiveRecord .find(id) 方法的奇怪之处

> ID：14505124
> 
> 赞同：0
> 
> 时间：2013-01-24T15:40:51.467
> 
> 标签：ruby-on-rails, rails-activerecord

如果我有 ID 1 的 Post 模型，

我可以通过以下方式访问此资源

```
 http://localhost:3000/posts/1 
```

但奇怪的是，当我使用这些 URL 时，我可以获得相同的结果。

```
 http://localhost:3000/posts/1somethingweird-blah-blah-blah-idont-like-this 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:45:59.520

这可能是因为`params[:id]`从 a 转换`String`为 an`int`并且在 Ruby 调用`"1somethingweird-blah-blah-blah-idont-like-this".to_i`中实际上会导致`1`.

您可以在路由级别解决此问题：

```
resources :posts, :constraints => {:id => /[0-9]+/} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:43:48.100

两个主要选项：

1.  [对路线施加约束](http://guides.rubyonrails.org/routing.html#segment-constraints)。
2.  验证控制器中的参数（例如，使用正则表达式）。

它起作用的原因是因为`"1abc".to_i == 1`.

# javascript - TypeScript + AMD + out 参数不起作用

> ID：14505126
> 
> 赞同：2
> 
> 时间：2013-01-24T15:40:54.323
> 
> 标签：javascript, typescript

我下载了一个使用`AMD`. 一切正常，但我想测试如何将所有编译的文件连接到一个输出`all.js`文件中。我发现了一些关于`--out`参数的东西并按照这里的步骤操作：[https ://stackoverflow.com/a/14302902/1252575](https://stackoverflow.com/a/14302902/1252575)

它对我不起作用，我收到一个错误：

> 命令 "tsc --module AMD --out all.js "C:\TypeScriptWithRequireAMD_0.8.1\app\classes\Test.ts" "C:\TypeScriptWithRequireAMD_0.8.1\modules\require.d.ts" "C:\ TypeScriptWithRequireAMD_0.8.1\app\classes\Greeter.ts" "C:\TypeScriptWithRequireAMD_0.8.1\app\AppConfig.ts" "C:\TypeScriptWithRequireAMD_0.8.1\app\AppMain.ts"" 以代码 1 退出。

这是我的文件结构的样子：

![解决方案](../Images/49c8d01e1ee7cca54751c457c8967188.png)

顺便提一句。我有第二个问题。参数是否从目录中`--out`复制内容？`lib`如果没有，如何也包括它们？

**[编辑 1.]**

哦，我忘了...这是我`.csproj`文件的一部分：

```
<PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptSourceMap>--module AMD</TypeScriptSourceMap>
</PropertyGroup>
<Target Name="BeforeBuild">
    <Message Text="Compiling TypeScript files" />
    <Message Text="Executing tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc $(TypeScriptSourceMap) --out all.js @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

**[编辑 2.]**

这是我的`AppConfig.js`：

```
require.config({
    baseUrl: '../',
    paths: {
        'jquery': 'lib/jquery-1.7.2',
        'underscore': 'lib/underscore',
        'backbone': 'lib/backbone',
        'console': 'lib/console',
        'greeter': 'app/classes/Greeter',
        'test': 'app/classes/Test'
    },
    shim: {
        jquery: {
            exports: '$'
        },
        underscore: {
            exports: '_'
        },
        backbone: {
            deps: [
                "underscore", 
                "jquery"
            ],
            exports: "Backbone"
        },
        console: {
            exports: "console"
        },
        greeter: {
            deps: [
                "test"
            ]
        },
        test: {
            deps: [
                "greeter"
            ]
        }
    }
});
require([
    'jquery', 
    'underscore', 
    'backbone', 
    'console', 
    'app/AppMain', 
    'app/classes/Greeter', 
    'app/classes/Test'
], function ($, _, Backbone, console, main, greeter, test) {
    var appMain = new main.AppMain();
    appMain.run();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:02:23.817

根据定义，AMD 脚本由 AMD 加载程序异步加载。为了将它们全部放在一个文件中，您需要对每个文件的依赖关系进行一些分析，以便以正确的顺序插入它们。这不是做的事情`--out`。您需要改为研究[RequireJS 优化器](http://requirejs.org/docs/optimization.html)之类的东西。

# android - 多个 Fragment 到 Activity 通信

> ID：14505130
> 
> 赞同：0
> 
> 时间：2013-01-24T15:41:01.720
> 
> 标签：android, android-fragments

我们重新来过吧。我正在使用片段编写应用程序。Stefan de Bruijn 建议这比使用已弃用的 TabHost 更好，他是对的，谢谢 Stefan。

由于其他成员的帮助，我终于从一个片段中获得了与我的交流活动的工作（你知道你是谁，谢谢大家）。

我现在有希望是最后一个问题。我的应用程序顶部有 TextBox，它是 Activity 的一部分，左侧是永久 ListFragment，右侧是 FrameLayout，以允许显示不同的 Fragment。

如果您喜欢在所有不同片段都可以与之交谈的活动中创建通用“侦听器”，是否有任何方法可以创建通用“侦听器”？

为了获得一个片段传递数据，我使用了以下内容。

主要活动

```
import com.example.fragger.CoreFragment.OnDataPass;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.EditText;

public class MainActivity extends Activity implements OnDataPass { 
```

和片段代码： -

```
package com.example.fragger;

import android.app.Activity;
import android.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.os.Bundle;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.view.View.OnClickListener;

public class CoreFragment extends Fragment{

int index;
Button Button1,Button2,Button3;
String Str,data;
OnDataPass dataPasser;

@Override
public void onAttach(Activity a) {
    super.onAttach(a);
        dataPasser = (OnDataPass) a;
}

public static CoreFragment newInstance(int index) {
    CoreFragment coreFragment = new CoreFragment();
    coreFragment.index = index;
    return coreFragment;
}

public interface OnDataPass {
    public void onDataPass(String data);

} 
```

这一切都很好，直到我在我的框架中显示不同的片段（例如 PlaceFragment）。由于 onDataPass 是从 CoreFragment 导入并实现的，因此我不能将它与其他任何东西一起使用。

有没有办法解决？

提前谢谢大家。加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:53:14.100

对于片段之间的通信，您可以使用 EventBus。EventBus 使您的活动和片段松散耦合。

第一步是定义一个 EventType。例如：`CarSelectedEvent`

选择汽车（或您的情况下的某些文本类型）后，必须在 EventBus 上发布 CarSelectedEvent。例子：

```
eventBus.post(new CarSelectedEvent("volvo")); 
```

所有对事件感兴趣的片段或活动都必须实现一个名为：

```
onEvent(CarSelectedEvent event){
... update your view
} 
```

假设您有 3 个显示汽车详细信息的片段，每个片段都接收 CarSelectedEvent 并可以更新视图。从屏幕上移除片段时（例如在较小的屏幕上或屏幕旋转），逻辑不会改变。唯一的区别是接收事件的片段更少。

[您可以在https://github.com/greenrobot/EventBus](https://github.com/greenrobot/EventBus)上找到有关 EventBus 的更多信息。

# jena - 使用 Jena 在 owl 文件中添加个人

> ID：14505131
> 
> 赞同：3
> 
> 时间：2013-01-24T15:41:02.390
> 
> 标签：jena, owl

我有一个名为 Modelling.owl 的 OWL 文件，它使用 Protege 4.2 创建。但是后来我必须通过注册一些新的个人来修改它，它的属性使用 Jena。例如我有班级模型，我必须为这个班级添加个人。任何人都知道如何，如果您能提供一些示例代码，那就太好了。我试图寻找教程，但不幸的是我没有找到全面的教程。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:06:10.903

JENA 教程 - [http://jena.apache.org/documentation/ontology/index.html](http://jena.apache.org/documentation/ontology/index.html)

```
// create the reasoning model using the base
OntModel inf = ModelFactory.createOntologyModel( OWL_MEM_MICRO_RULE_INF, base );

// create a dummy paper for this example
OntClass paper = base.getOntClass( NS + "Paper" );
Individual p1 = base.createIndividual( NS + "paper1", paper ); 
```

这是一个更大的解释的摘录（大约一半）。

# vb.net - 是否可以使用 POS 打印机打印到屏幕上？

> ID：14505134
> 
> 赞同：0
> 
> 时间：2013-01-24T15:41:10.690
> 
> 标签：vb.net, escaping, opos

我正在寻找一种可以使用 POS 打印机在屏幕上（例如在 RichTextBox 中）打印内容的方法。

我现在使用的方法如下：我将字符串发送到方法，然后将此字符串粘贴到 RichTextBox，但文本框无法识别 ESCAPE POS 代码。所以我必须用其他东西替换这些代码。如果我可以将字符串（带有 ESCAPE POS 代码）直接打印到屏幕或文本框中，会容易得多。

一些代码来解释我的问题：

```
Dim ESC As String = Chr(&H1B)
Dim newLine = ESC + "|1lF"

printstring = "Omzet per Locatie-groep/artikel" + newLine
printstring += gTouchSettings.CompanyName + newLine
printstring += newLine
printstring += "Periode: " + Format(fromdate, "dd/MM/yyyy") + " - " +    
                    Format(todate, "dd/MM/yyyy") + newLine
printstring += newLine
printstring += "LocatieGr  Omschrijving   Aantal Ontvangen"
printstring += newLine
printstring += newLine 
```

我可以删除换行符，我已经找到了解决方案。但现在我有这个布局问题：

```
printstring += Left(MySqlDR!description & Space(27), 27) & 
                   Right("      " &    Format(MySqlDR!quantity, "###0"), 7)
printstring += Right("      " & Format(MySqlDR!item_price, "######0.00"), 8) + 
               newLine 
```

当我在 POS 打印机上打印它时，这看起来很棒，但在 TextBox 中它是可怕的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:14:38.510

You might want to use `String.Format` , it helps with aligning your strings and setting padding etc. check out [These Examples](http://www.dotnetperls.com/string-format-vbnet)

# tridion - Tridion.AudienceManagement.API 在初始化期间抛出异常

> ID：14505135
> 
> 赞同：4
> 
> 时间：2013-01-24T15:41:12.043
> 
> 标签：tridion, tridion-2011

我创建了一个对`Tridion.AudienceManagement.API`API 执行简单操作的控制台应用程序。当我启动应用程序时，它做的第一件事是 reference `UserContext.Current`，此时我得到以下异常。

```
The type initializer for 'Tridion.AudienceManagement.DomainModel.Utilities.Configuration' threw an exception.
at Tridion.AudienceManagement.DomainModel.Utilities.Configuration.get_LogFolder()
at Tridion.AudienceManagement.DomainModel.Utilities.Logger.AssertValidLogFolder()
at Tridion.AudienceManagement.DomainModel.Utilities.Logger.WriteLine(LogLevel logLevel, String message, Object[] objects)
at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.LogBindingInfo(Exception ex)
at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.GetConfiguredCoreService()
at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.GetClient(UserContext userContext, UserData& userData)
at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.LoadCurrentUser(UserContext userContext, String userDataXml)
at Tridion.AudienceManagement.DomainModel.UserContext..ctor(String trusteeName)
at Tridion.AudienceManagement.API.UserContext..ctor()
at Tridion.AudienceManagement.API.UserContext.get_Current() 
```

我已确认 Audience Manager 已安装并在服务器上运行。

通过从以 MTS 用户身份登录的 shell 运行程序，我们可以避免这个问题。起初我们认为问题在于日志文件夹的文件系统权限，但是，即使授予完全控制权也无济于事。

当比较作为两个用户运行代码的 procmon 输出时，我们可以看到失败的用户在 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 中创建文件而被拒绝访问 - 文件名很长看起来随机的字符串。MtsUser 看不到此 ACCESS DENIED。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:49:49.537

似乎不允许运行控制台应用程序的用户读取用于加密配置的加密密钥。

你有几个选择来解决它：

1.  删除加密（不推荐）
2.  以有权使用密钥的用户身份运行您的工具（即 MTSUser）
3.  向您要运行该工具的用户授予权限。示例命令行：`aspnet_regiis -pa "TridionRsaProtectedConfigurationProvider" "domain\username"`

*（显然需要以能够*读取密钥的人的身份运行——MTSUser）

有关详细信息，请参阅以下 URL：

*   为 Audience Manager (SDL LiveContent)[加密敏感字符串](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_A9B4D08F0D1A48EF99253838F6A6E0EC)
*   演练：使用受保护的配置(MSDN)[加密配置信息](http://msdn.microsoft.com/en-us/library/dtkwfdky.aspx)

# windows - 使用ftp后windows批处理脚本执行变为交互式

> ID：14505137
> 
> 赞同：0
> 
> 时间：2013-01-24T15:41:16.393
> 
> 标签：windows, shell, batch-file, ftp

我正在编写一个要在批处理模式下运行的 .cmd Windows 脚本。此脚本使用 ftp 命令。在使用 ftp 成功连接到另一台机器后，shell 会发生变化，并且脚本的执行变为交互式。

如何以批处理模式进行操作，以免停止整个脚本的执行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:45:21.077

我认为您可以使用`bye`退出 ftp 会话以返回批处理。

或者，将 ftp 命令放在单独的批处理文件中并使用`call`来调用它。

```
rem do stuff
rem do ftp stuff
call ftpscript.bat
rem carry on doing stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:46:28.207

这段代码对我来说：

```
ftp -i -n -s:%currentFolderPath%ftp_commands.txt %IPAddress% 
```

读：

[MS-DOS ftp 命令](http://www.c3scripts.com/tutorials/msdos/ftp.html)

# linux - Linux 中的 Eclipse：运行 Junit 覆盖测试给出错误“权限被拒绝”

> ID：14505141
> 
> 赞同：0
> 
> 时间：2013-01-24T15:41:25.390
> 
> 标签：linux, eclipse, junit, code-coverage, permission-denied

`java.io.IOException: Permission Denied`当我尝试对我的 Java 项目运行 Coverage 测试时，我收到一个错误。

我可以运行单独的 JUnit 测试，它们运行良好。

一起运行测试（通过 Coverage 作为 JUnit 测试），我得到了错误。

与错误相关的插件是`org.eclipse.jdt.junit.core`。

给出的堆栈跟踪以 . 开头`org.eclipse.core.internals.jobs.Worker.run(Worker.java:54)`和结尾`java.io.UnixFileSystem.createFileExclusively(Native Method)`。

我能够在构建项目之前运行覆盖率测试，但在构建之后它将无法运行。不确定这些是否连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:00:05.187

发现问题 - `java.io.UnixFileSystem.createFileExclusively(Native Method)`。我的一项测试（最新的一项，尚未在 Coverage 测试下运行）试图写入一个以某种方式更改了权限的文件。一旦权限被重置以允许我访问，覆盖测试就会运行。仍然不确定为什么它允许我单独运行测试，但它现在都运行了。

# google-app-engine - 将图像文件从 Google Apps 脚本发布到使用 titan-files 的 Google App Engine 应用程序

> ID：14505142
> 
> 赞同：1
> 
> 时间：2013-01-24T15:41:25.727
> 
> 标签：google-app-engine, google-apps-script

我在我的 Google App Engine 应用程序中使用 titan-files 为 Data Store 和 Blob Store 存储提供类似文件系统的层。我有一个 Google Apps 脚本，它向我的 Google App Engine 应用程序发送 POST 请求以将数据存储在 blob 存储中。它在发送 JSON 数据（作为字符串）时工作正常，但在发送二进制数据（如图像）时不起作用。

我最终尝试将 base64 编码数据作为字符串发送并将其存储在 blob 存储中。我认为我可以从 blob 存储中检索数据并对其进行 base64 解码以获得原始图像。但是，它似乎不起作用。

这是我用来从 Google Apps 脚本发送数据的代码：

```
function pushFileToFilePath(file, destinationFilePath) {

 var payload = 
    {
      "content" : Utilities.base64Encode(file.getAs("image/jpeg").getBytes())
    };

  var options =
  {
      "method" : "post",
      "payload" : payload
  };

  var response = UrlFetchApp.fetch("https://myappname.appspot.com/_titan/file?path=" + destinationFilePath, options);
  if (response.getResponseCode() == 201)
  {
     return true;
  }

  return false;
} 
```

发送请求后，数据在 blob 存储中可用，其大小与我对文件进行 base64 编码的结果所期望的一致。但是，如果我使用 Google App Engine 仪表板从 blob 商店下载文件并使用 base64 解码它

```
openssl -d -in base_64_encoded_file.txt -out image.jpg 
```

我得到一个零字节的 image.jpg 文件。

我还尝试了其他方法来设置有效负载对象。例如使用：

```
var payload = 
{
  "content" : file.getAs("image/jpeg").getBytes()
}; 
```

在 blob 存储中给出一个 18 字节的文件，其中包含字符串“[Ljava.lang.Object”。使用：

```
 var payload = 
{
  "content" : file.getAs("image/jpeg")
}; 
```

我的 Google App Engine 日志中出现以下异常：

```
Bad request:
Traceback (most recent call last):
  File "/base/data/home/apps/s~myappname/live-1.364814133265166345/titan/files/handlers.py", line 103, in post
    content, blob=blob, mime_type=mime_type, meta=meta, **method_kwargs)
  File "/base/data/home/apps/s~myappname/live-1.364814133265166345/titan/files/files.py", line 408, in Write
    content, blob = self._MaybeWriteToBlobstore(content, blob)
  File "/base/data/home/apps/s~myappname/live-1.364814133265166345/titan/files/files.py",   line 341, in _MaybeWriteToBlobstore
    blob = utils.WriteToBlobstore(content, old_blobinfo=old_blobinfo)
  File "/base/data/home/apps/s~myappname/live-1.364814133265166345/titan/common/utils.py", line 277, in WriteToBlobstore
    content_file = cStringIO.StringIO(content)
TypeError: expected read buffer, instance found 
```

我尝试使用 BytesIO 流式传输内容，但我遇到了其他异常。

您知道我如何将图像（或更一般的二进制数据）发布到泰坦文件吗？

谢谢！

**更新**

我通过更改从中检索“内容”数据的方式解决了我的问题：

```
content = self.request.str_POST.get('content') 
```

对此：

```
content = self.request.get('content') 
```

并使用我的 Google Apps 脚本中的以下代码发送数据：

```
 var payload = 
{
  "content" : file.getAs("image/jpeg")
}; 
```

也就是说，只需将“内容”设置为 Blob 实例。

我不知道为什么我一开始没有尝试这个:) 无论如何，titan-file 中的更改是一种 hack 而不是永久解决方案，所以我会尝试提出一个可以处理两者的可靠补丁二进制和非二进制数据并将其提交给项目。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:11:01.317

我在 Titan-files 的问题跟踪器中创建了一个问题：[http](http://code.google.com/p/titan-files/issues/detail?id=1) ://code.google.com/p/titan-files/issues/detail?id=1 。附加到它的补丁修复了这个问题，但它不是一个干净和强大的修复。Titan Files 的维护人员可能会很快更新该问题，并提供适当的修复。

# error-handling - 无法模拟 MQ 原因码 2009

> ID：14505144
> 
> 赞同：1
> 
> 时间：2013-01-24T15:41:28.237
> 
> 标签：error-handling, jms, ibm-mq

我正在尝试模拟 WebSphere MQ 原因代码 2009 以在下面的 JMS 代码中处理但无法获得它。相反，我得到了 2059。我所做的就是在进行连接调用时断开 SVRCONN 通道。如何在我的示例代码中获得 2009。我在再次建立连接并使用事务会话之前添加了睡眠时间。还可以做些什么来正确处理原因代码 2009，最终队列管理器不会因频繁的不成功连接尝试而受到影响。请找到代码。

```
private static void connectToQmgr(MQQueueConnectionFactory cf) {
    // TODO Auto-generated method stub

    MQQueueConnection connection = null;
    MQQueueSession session = null;
    MQQueue queue = null;
    MQQueueSender sender = null;

    //While Statement to make sure multiple connection tries are made until connection establishes

    while (connection == null){

    try {
        connection = (MQQueueConnection) cf.createConnection();
        session = (MQQueueSession) connection.createQueueSession(true, Session.CLIENT_ACKNOWLEDGE);
        queue = (MQQueue) session.createQueue("queue:///LQ");
        sender = (MQQueueSender) session.createSender(queue);
        //MQQueueReceiver receiver = (MQQueueReceiver) session.createReceiver(queue);
        long uniqueNumber = System.currentTimeMillis() % 1000;
        TextMessage message = session.createTextMessage("MQJMSTest "+ uniqueNumber);
        // Start the connection
        connection.start();
        sender.send(message);
        session.commit();
        System.out.println("Sent message:\\n" + message);

       // JMSMessage receivedMessage = (JMSMessage) receiver.receive(10000);
       // System.out.println("\\nReceived message:\\n" + receivedMessage);

        session.commit();

        sender.close();
       // receiver.close();
        session.close();
        connection.stop();
        connection.close();

        System.out.println("\\nSUCCESS\\n");

    } catch (JMSException je) {
        System.err.println("Caught JMSException");

        // Check for linked exceptions in JMSException to catch MQException and Reason Codes 
        Throwable t = je;
        while (t != null) {
            // Write out the message that is applicable to all exceptions
            System.err.println("Exception Msg: " + t.getMessage());
            // Write out the exception stack trace
            t.printStackTrace(System.err);

            // Add on specific information depending on the type of exception
            if (t instanceof JMSException) {
                JMSException je1 = (JMSException) t;
                System.err.println("JMS Error code: " + je1.getErrorCode());

                if (t instanceof JmsExceptionDetail){
                    JmsExceptionDetail jed = (JmsExceptionDetail)je1;
                    System.err.println("JMS Explanation: " + jed.getExplanation());
                    System.err.println("JMS Explanation: " + jed.getUserAction());
                }
            } else if (t instanceof MQException) {
                MQException mqe = (MQException) t;
                System.err.println("WMQ Completion code: " + mqe.getCompCode());
                System.err.println("WMQ Reason code: " + mqe.getReason());

                //###################################################################################
                //MQ Reason Code Error Handle here
                //Currently Handling MQ Reason Code 2059 since unable to simulate 2009
                //If connection handle exists make sure you close everything and add a wait interval and try a new connection again
                if (mqe.getReason()== 2059){
                    System.out.println("Inside MQ Reson Code Handle");

                    if( connection != null){
                         try {
                            sender.close();
                            // receiver.close();
                            session.close();
                            connection.stop();
                            connection.close();
                        } catch (JMSException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                    // Add Wait Interval for 5 sec
                    try {
                        Thread.sleep(5000);
                        System.out.println("Inside Thread Sleep for 5 sec");
                        //Try New connecting Again
                        connectToQmgr(cf);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();

                    }   
                }
                 //##################################################################################           
            } else if (t instanceof JmqiException){
                JmqiException jmqie = (JmqiException)t;
                System.err.println("WMQ Log Message: " + jmqie.getWmqLogMessage());
                System.err.println("WMQ Explanation: " + jmqie.getWmqMsgExplanation());
                System.err.println("WMQ Msg Summary: " + jmqie.getWmqMsgSummary());
                System.err.println("WMQ Msg User Response: "
                                   + jmqie.getWmqMsgUserResponse());
                System.err.println("WMQ Msg Severity: " + jmqie.getWmqMsgSeverity());
            }

            // Get the next cause
            t = t.getCause();
       }
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:45:28.810

一个`2009`是`MQRC_CONNECTION_BROKEN`。您是否考虑过拔掉网络电缆或关闭连接所经过的网络接口？在笔记本电脑上运行代码时，这很容易。对于服务器，您可以尝试通过 SSH 代理或其他可以关闭的虚拟接口路由连接。

要回答问题的第二部分，请确保程序在重新连接尝试之间休眠几秒钟。或者，更好的是，使用现代版本的 WMQ 客户端并使用自动重新连接选项。这将进行几次快速重试，然后放慢速度以进行后续重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T18:59:57.857

您可以将通道的空闲连接超时设置为某个较小的值。创建连接，等待连接超时，然后尝试使用它。你会得到 2009\. wcn

# sql - SQL Join 包容和独占

> ID：14505146
> 
> 赞同：0
> 
> 时间：2013-01-24T15:41:30.487
> 
> 标签：sql, join, left-join

我正在尝试创建一个查询，其中包含以下条件下的表中的记录：

包括：

1.  用户在作业表中有记录。
2.  用户在作业表中有 NULL join_date 或记录

排除

1.  用户在作业表中没有记录且非空 join_date

这是我的架构：

```
user --> user_id, join_date
job  --> job_id, user_id

user rows
user_id: 1, join_date: 1/24/13
user_id: 2, join_date: 1/24/13
user_id: 3, join_date: NULL
user_id: 4, join_date: NULL

job rows
job_id: 101, user_id: 1
job_id: 102, user_id: 3 
```

我想编写一个返回用户#1、#3 和#4 的查询。我有以下不返回用户 #4 的查询：

```
SELECT DISTINCT u.[user_id], u.join_date, uj.job_id
FROM [user] u  
LEFT JOIN job uj ON (u.user_id = uj.user_id OR u.join_date is null)              
WHERE uj.user_id = u.user_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:44:48.983

我认为这最好`in`在`where`子句中表达：

```
select *
from user u
where u.join_date is null or
      u.user_id in (select user_id from job) 
```

如果您也想要工作信息，您可以将工作信息加入为：

```
select u.*, j.job_id
from user u left outer join
     job j
     on u.user_id = j.user_id
where u.join_date is null or j.user_id is not null 
```

这将为每个用户返回多行，每个作业一个。您只需要`distinct`是否可以为单个作业多次列出用户。

或者，如果您愿意：

```
select *
from user u
where not (u.join_date is not null and
           u.user_id not in (select user_id from job)
          ) 
```

这符合您的排除逻辑。

顺便说一句，`in`实际上`not in`只是外连接的特例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:48:30.723

[Sql 小提琴演示](http://sqlfiddle.com/#!3/fa069/11)

```
SELECT u.[user_id], u.join_date, uj.job_id
FROM [user] u  
LEFT JOIN job uj ON (u.user_id = uj.user_id) 
WHERE uj.job_id is null OR NOT u.join_date is null 
```

# android - Eclipse Juno android 提案/自动完成消失

> ID：14505147
> 
> 赞同：0
> 
> 时间：2013-01-24T15:41:33.137
> 
> 标签：android, eclipse, autocomplete

当我在 onClickListner(){}
之外时，我没有收到关于 ctrl+space 的任何建议，它工作正常

我尝试过：
清理并重新启动
Windows->Preferences->Java->Editor->Content Assist->Advanced（全部选中，全部取消选中并恢复默认值）

它似乎不适用于任何类型

```
new Someting()
{
    public void doSomething()
    {
        //proposals stop working...
    }
} 
```

出现错误时的快速修复仍然有效
例如：getActibity()
快速修复：更改为 getActivity()

这是一种有效的解决方法

```
onCreate(...)  
{  
    new Something()
    {
        public void doSomething()
        {
            //proposals stop working...
            otherDoSomething();
        }
    }
}  
private void otherDoSomething()
{
    //proposals start working
} 
```

我刚刚注意到的其他有趣的事情......

```
new OnClickListener()
{
    public void onClick()
    {
        //Proposals does not work
    }
}
new OnClickListener()
{
    public void onClick()
    {
        //Proposals does work if i do not add any '}' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:16:25.713

几周前我遇到了类似的问题。这就是我所做的。我试图使用 struts，我的库中有 struts.jar 文件。但是当我按下 CTRL+空格时，IDE 不会给出任何建议。

我通过将 struts.jar 文件放在构建路径中来解决它。我希望这也适用于你。

这是将 jar 放入类路径的一种方法。

右键单击您的项目--->属性---> Java构建路径---->“库”选项卡--->添加JAR ---->浏览到jar文件--->单击“确定”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:26:27.010

我过去通过重新启动我的 Eclipse 实例解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:38:17.783

关闭 eclipse 并删除工作区的 .metadata 文件夹。启动 eclipse 备份并重新配置您的工作区，.metadata 文件夹将自动重新创建。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T10:50:10.730

当我这样写时它又开始工作了：

```
new OnClickListener()
{
    public void onClick()
    {
        //Proposals works again
    };
}; 
```

没有收到关于“;”的任何错误或警告
并且以前从未需要它们
，它仍然在没有它们的情况下编译

# algorithm - 使用红/黑树实现 Dijkstra 的最短路径算法？

> ID：14505151
> 
> 赞同：3
> 
> 时间：2013-01-24T15:41:43.153
> 
> 标签：algorithm, data-structures, dijkstra, shortest-path, red-black-tree

我知道实际上 Dijkstra 的算法是使用斐波那契堆实现的。但是它是否也可以使用红黑树来实现，并且仍然具有 O(m log n) 的最坏情况运行时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:45:35.043

对于初学者来说，很少能真正看到使用斐波那契堆实现的 Dijkstra 算法。尽管斐波那契堆提供了很好的渐近性能 (O(m + n log n))，但实际上它具有如此高的常数因子，以至于其他类型的堆更有效。

至于您的问题-是的，您可以使用红黑树作为优先级队列来获得 O(m log n) 性能。这是有效的，因为您可以在 O(log n) 时间内找到红黑树中的最小元素，并在 O(log n) 时间内通过先删除再插入来模拟树上的减少键操作。然而，这可能不如使用标准二叉堆高效，因为红黑树的引用局部性更差，内存开销更大。更一般地，当您需要优先级队列时，您总是可以使用平衡二叉搜索树，尽管通常这样做是多余的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:45:01.010

我不会说 Dijkstra 的算法是使用斐波那契堆实现的。事实上，任何堆都可以，尽管 Fiboncci 对不同的操作具有最佳的摊销复杂性（请记住，尽管这只显示在**非常**大的图表中）。再次使用红黑树将实现相同的计算复杂度，但将具有更高的常数，因为使用红黑树更复杂。

该算法所需的只是能够从给定集合中获取最小元素。这就是堆的用途，因此它最适合这个问题。红黑树可以做很多其他事情，因此在这种特殊情况下更复杂并且性能更差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-22T19:13:28.000

这是个有趣的问题。是的，你可以使用红黑树来实现，下面是一个例子：

[https://rosettacode.org/wiki/Dijkstra%27s_algorithm#Java](https://rosettacode.org/wiki/Dijkstra%27s_algorithm#Java)

# android - 如何在本机/默认媒体播放器上播放 raw/assets 文件夹中的音频文件？

> ID：14505153
> 
> 赞同：2
> 
> 时间：2013-01-24T15:41:54.590
> 
> 标签：android, mp3, media-player

我知道我可以像这样在媒体播放器中播放 mp3 文件：

```
Intent intent = new Intent();  
intent.setAction(android.content.Intent.ACTION_VIEW);  
File file = new File(YOUR_SONG_URI);  
intent.setDataAndType(Uri.fromFile(file), "audio/*");  
startActivity(intent); 
```

按照[此链接](http://androidbook.blogspot.co.uk/2009/08/referring-to-android-resources-using.html)，我尝试获取如下 URI：

```
Uri audio = Uri.parse("android.resource://com.audio.test/"+R.raw.audio1);
Log.d(TAG,"uri:"+audio.toString()); 
```

和

```
Uri audio = Uri.parse("android.resource://com.audio.test/raw/audio");
Log.d(TAG,"uri:"+audio.toString()); 
```

输出预期结果：

```
01-24 15:28:23.190: D/MyClass(30234): uri:android.resource://com.audio.test/2131034112
01-24 15:29:13.: D/MyClass(30234): uri:android.resource://com.audio.test/raw/audio1 
```

但它不起作用。媒体播放器不启动。任何想法为什么？

**更新**

我包含了一个 createChooser，而不是预期的玩家列表，我收到“无法找到执行此操作的应用程序”消息。这是我的确切代码：

```
 public void playAudio(){
          Intent viewMediaIntent = new Intent();   
          viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);        
          Uri audio = Uri.parse("android.resource://com.audio.test/raw/"+R.raw.audio1);       
          Log.d(TAG,"uri:"+audio.toString());
          viewMediaIntent.setDataAndType(audio, "video/*");   
          viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
          Log.d(TAG,"Starting");
          Intent i = Intent.createChooser(viewMediaIntent, "Play Music");
            mGap.startActivity(i);
          Log.d(TAG,"Started");
      } 
```

**更新 2**

谢谢@CommonsWare 的解释。现在我明白为什么它不起作用了。但问题依然存在，我能达到我想要的吗？使用 file:// 方案获取存储在 raw/assets 文件夹中的文件的 Uri？

**更新 3**

我找到了一种方法来做到这一点，虽然它不是最好的。我只有 3 个文件，这根本不会延迟执行。我正在将文件从 res/raw 复制到手机上的本地目录并从该文件中获取 Uri。任何有关如何避免该步骤的建议表示赞赏。

```
 public void copyFileToDir(String audioFile){
          File test = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC + "/" + audioFile + ".mp3");
          if (test.exists()){
              Toast.makeText(mGap, "Exists", Toast.LENGTH_SHORT).show();
              return;
          }
          File dest = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);
          int i = mGap.getResources().getIdentifier("raw/"+audioFile, "string", mGap.getPackageName());
          InputStream in = mGap.getResources().openRawResource(i);
          // Used the File-constructor
          OutputStream out;
        try {
            out = new FileOutputStream(new File(dest, audioFile + ".mp3"));
              // Transfer bytes from in to out
              byte[] buf = new byte[1024];
              int len;
              try {
                  // A little more explicit
                  while ( (len = in.read(buf, 0, buf.length)) != -1){
                       out.write(buf, 0, len);
                  }
              } finally {
                  // Ensure the Streams are closed:
                  in.close();
                  out.close();
              }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 

      }

      public void playAudio(String audioFile){
          copyFileToDir(audioFile);
          File dest = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC + "/" + audioFile + ".mp3");
          Uri r = Uri.fromFile(dest);         
          Intent viewMediaIntent = new Intent();   
          viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);                                 
          viewMediaIntent.setDataAndType(r, "audio/*");   
          viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);          
          Intent i = Intent.createChooser(viewMediaIntent, "Play Music");
            mGap.startActivity(i);

      }

      public void playVideo(String movieurl){
          Intent intentToPlayVideo = new Intent(Intent.ACTION_VIEW);
          intentToPlayVideo.setDataAndType(Uri.parse(movieurl), "video/*");
          Log.d(TAG,"Playing:" + movieurl);
          mGap.startActivity(intentToPlayVideo);
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:55:00.983

有什么理由不直接使用 MediaPlayer？可以直接传资源id

```
int resourceId = R.raw.your_media_resource;
MediaPlayer mediaPlayer = MediaPlayer.create( context, resourceId );
mediaPlayer.setOnCompletionListener( new OnCompletionListener()
{
    @Override
    public void onCompletion( MediaPlayer mp )
    {
        mp.release();
    }
} );
mediaPlayer.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T16:07:33.580

当您打电话时`startActivity()`，您正在尝试开始一项活动。`Intent`您传递给的`startActivity()`指示您要启动的活动（或从一组可用活动中选择）。在您的情况下，您正在尝试查看`android.resource://` `Uri`. 这不是一个`http://` `Uri`，也不是一个`https://` `Uri`，也不是一个`file://` `Uri`。

将自己宣传为支持此类运营的活动在`<intent-filter>`声明中说明了`Uri`他们支持的计划。您假设用户设备上有一个支持`android.resource://`方案的应用程序。就个人而言，我不认为这是一个安全的假设。 `http://`, `https://`, and`file://`应该是安全的，并且`content://`(for a `ContentProvider`) 也很有可能。

例如，AOSP 音乐应用程序不支持该`android.resource`方案，基于[其当前清单内容](https://github.com/android/platform_packages_apps_music/blob/master/AndroidManifest.xml)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:56:56.643

~~无法在应用程序之外使用 RES 文件夹中的内容。内容在 App 内部，无法从 App 外部访问。如果要使内容可用，则必须实现自己的 ContentProvider 返回数据。~~

@CommonsWare 是对的。见[http://iserveandroid.blogspot.nl/2011/01/how-to-access-resources-from-other.html](http://iserveandroid.blogspot.nl/2011/01/how-to-access-resources-from-other.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:58:47.603

如果您只需要在[Notification.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)上设置声音 URI ，请使用

```
 Uri.parse("android.resource://com.my.great.application/"
                        + R.raw.mysound); 
```

where`R.raw.mysound`可以是`mysoud.ogg`原始资源文件夹中的内容。

但是我不确定是否完全支持 MP3。由于这些只是您应用程序的内部资源，请尝试转换为 OGG。

# windows - 将新内容加载到剑道窗口的正确方法是什么？

> ID：14505160
> 
> 赞同：13
> 
> 时间：2013-01-24T15:42:07.460
> 
> 标签：windows, modal-dialog, kendo-ui

我有一个剑道窗口，里面有一个表格。该表单具有输入元素，其中填充了记录的数据。用户可以关闭窗口并选择不同的记录来查看。当用户这样做时，我需要使用相同的表单但使用不同的记录数据再次显示剑道窗口。这是我目前正在做的事情

```
 if (!$("#winContainer").data("kendoWindow")) {
        $("#winContainer").kendoWindow({
            modal: true,
            width: "969px",
            height: "646px",
            title: "View Record",
            content: "record.jsp"
        });
    } else {
        $("#winContainer").data("kendoWindow").refresh({url: 'record.jsp'});
    }

    $("#winContainer").data("kendoWindow").center().open(); 
```

该表单包含在record.jsp 中，我使用之前从服务器接收到的JSON 数据（通过record.jsp 中引用的JavaScript）填充它。我需要确保在表单中填充新记录数据之前不会显示窗口。这是正确的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-24T15:50:40.453

我建议不要每次都创建一个新窗口或刷新其内容：

1.  创建一个窗口，
2.  每个用户选择一条新记录，将新数据绑定到窗口，然后打开它。

这样你只需要加载一次页面。

您还可以考虑将页面`record.jsp`定义为原始页面中的 Kendo UI 模板。

**例子：**

给定以下用户可选择的记录：

```
var data = [
    { text1: "text1.1", text2: "text1.2" },
    { text1: "text2.1", text2: "text2.2" },
    { text1: "text3.1", text2: "text3.2" },
    { text1: "text4.1", text2: "text4.2" }
]; 
```

以及一个定义为具有以下 HTML 的模板的表单：

```
<script id="record-jsp" type="text/x-kendo-template">
    <div>
        <p>This is your form with some sample data</p>
        <label>text1: <input type="text" data-bind="value: text1"></label>
        <label>text2: <input type="text" data-bind="value: text2"></label>
    </div>
</script> 
```

我们的 JavaScript 会是这样的：

```
// Window initialization
var kendoWindow = $("<div id='window'/>").kendoWindow({
    title    : "Record",
    resizable: false,
    modal    : true,
    viewable : false,
    content  : {
        template: $("#record-jsp").html()
    }
}).data("kendoWindow"); 
```

将数据绑定到窗口并打开它：

```
function openForm(record) {
    kendo.bind(kendoWindow.element, record);
    kendoWindow.open().center();
} 
```

最后用数据调用函数。

```
openForm(data[0]); 
```

你可以看到它在这个[JSFiddle上运行](http://jsfiddle.net/OnaBai/S7K4r/)

**注意：**如果您仍然喜欢使用外部页面，只需更改`template: $("#record-jsp").html()`：`url: "record.jsp"`

# tsql - 识别重复项

> ID：14505162
> 
> 赞同：1
> 
> 时间：2013-01-24T15:42:15.960
> 
> 标签：tsql, duplicates

如果措辞不佳，我深表歉意，但我不是 100% 清楚如何表达我脑海中正在发生的想法。开始：

我有一个包含几列的表，但这里有三个有问题：**contactID**、**primaryID**和**Address**

此表包含联系信息、姓名、地址、电话号码等。有几行在各方面都是唯一的，但它们包含相同的**Address**。*这些行本质上是其他联系人的联系人（或子联系人）。这些由称为**TypeNum**的第 4 列和包含 SecondaryID 的第二个表唯一标识。（此信息实际上并不重要，但可能有助于解释我为什么要问我要问的问题*

一些联系人目前是家长，应该有一个 SecondaryID。如果我有三个联系人，我想为其中两个分配一个primaryID，该primaryID 等于第三个的contactID。我不一定关心哪两个获得primaryID。

有没有可以想象的方法来做到这一点？

**编辑：**我在下面添加了一个示例图像。我想让第二行和第三行的**primaryID**等于第一行的**contactID**。*（实际上哪两个得到**contactID**并不重要，只要它的2/3和2得到第三个的contactID）。*

**编辑：**如果我可以使用其中一个重复项的contactID 更新所有重复项primaryID，它也会起作用。

![例子](../Images/952551fa173f19b1b2bf32c716ee5ecb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:49:44.473

此查询首先使用 查找`contacts`具有三个或更多相同条目的`address`条目`HAVING COUNT(*) >= 3`。

它还`contactID`通过使用从这组重复项中获取一个`MIN(ContactID)`. 然后将此集合中的所有重复项`contactID`分配给每个，但具有等于`PrimaryID`的重复项除外：`ContactID``MinContactID`

```
UPDATE c
SET c.PrimaryID = dups.MinContactID
FROM
    Contacts c 
    JOIN (
        SELECT MIN(ContactID) AS MinContactID, Address
        FROM Contacts
        GROUP BY Address
        HAVING COUNT(*) >= 3
    ) dups ON c.Address = dups.Address AND c.ContactID <> dups.MinContactID 
```

# c++ - 智能指针实现：什么时候为指针调用析构函数？

> ID：14505166
> 
> 赞同：0
> 
> 时间：2013-01-24T15:42:31.890
> 
> 标签：c++, c++11

我有下面的代码，并用`Temple`智能指针包装了对象。我理解了这个概念，但我不明白的是何时调用了持有对象的析构函数。

甚至想，我还没有实现~mySmartPointer，模板析构函数被调用了。

## 输出

> 寺庙建造者
> 
> 调用指针访问运算符
> 
> ——迎宾寺
> 
> 调用取消引用运算符
> 
> ——迎宾寺
> 
> **神殿破坏者**
> 
> 调用析构函数

## 代码

```
#include <iostream>
using namespace std;

template <typename T>
class mySmartPointer 
{
private:
    T *_object;    
public: 
    explicit mySmartPointer(T * newObject) {
       _object = newObject;
    };
    ~mySmartPointer() { cout <<"Destructor is Invoked "<<endl;}; 

    T operator *() {
        cout  <<" Invoking De-referencing Operator "<<endl;
        return * _object;
    };

    T * operator ->() {
        cout <<"Invoking pointer access operator "<<endl;
        return _object;
    };
};

class Temple
{
private:
    int x,y;
public:
    void printWelcome() {
        cout <<"-- Welcome Temple "<<endl;
    }
    Temple() {
        cout <<"Temple Constructor"<<endl;
    }
    ~Temple() {
        cout <<"Temple Destructor "<<endl;
    }
};

int main(int argc, char ** argv) {
    mySmartPointer<Temple> t (new Temple);
    t->printWelcome();      
    (*t).printWelcome();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T15:44:52.243

这个

```
T operator *() 
```

按值返回 - 正是那个副本被破坏了。

如果您将其更改为

```
T& operator *() 
```

你会看到它没有被调用的对象的析构函数。请注意，这应该有两个版本：

```
T const& operator *() const;
T& operator *() 
```

和类似的`operator->`。这样您就可以在对象上调用`const`方法。`const`

如果您出于教育目的这样做，那很好，否则请使用现有实现之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:48:26.380

这是导致混乱的代码。

```
 T operator *() 
  {
      cout  <<" Invoking De-referencing Operator "<<endl;
      return * _object;
  }; 
```

当您调用此代码时，会创建一个**Temple 副本**。此副本将自动销毁。

将其更改为：

```
 T& operator *() 
  {
      cout  <<" Invoking De-referencing Operator "<<endl;
      return * _object;
  }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:46:22.293

这是因为您*要从*.`operator*()`

看看这里的返回类型：

```
T operator *() 
{
     cout  <<" Invoking De-referencing Operator "<<endl;
     return * _object;
}; 
```

您需要返回`T&`。

如果你`T const & operator*() const` 也为`const`智能指针对象定义更好！

# performance - 如何从性能 (perfmon) 中保存数据

> ID：14505171
> 
> 赞同：2
> 
> 时间：2013-01-24T15:42:45.603
> 
> 标签：performance, jmeter, performance-testing, perfmon, jmeter-plugins

我必须在 JMeter 中运行寿命测试。

我需要将性能计数器数据收集到文件中，然后在 Excel 中使用所有支持信息（如比例和轴标题）构建图表。

**首先，** 我在 JMeter 中尝试过[PerfMon 插件](http://code.google.com/p/jmeter-plugins/wiki/PerfMon)，但它不适用于我的服务器，并且 JMeter 报告了 Perfmon plugin 的错误`is not supported by the SIGAR API on this Operating System`。
为什么我有这个错误？
我该如何解决这个问题才能从服务器收集性能数据并绘制漂亮的图表？

**其次，** 现在我在我的服务器上使用性​​能应用程序（使用命令`perfmon`）。
服务器的操作系统是 WindowsXP Professional SP3 x86。
我需要将来自计数器的数据写入日志文件。但是当我的测试运行时，我没有找到如何开始和结束将数据保存在日志文件中。

请你解释一下，我该怎么做

1.  将测试过程中的数据保存在文件中？
2.  然后使用这些数据在 Excel 中构建图表？

# c# - 强制服务引用生成新类而不是“重用”它

> ID：14505173
> 
> 赞同：0
> 
> 时间：2013-01-24T15:42:50.317
> 
> 标签：c#, wcf

我有一个从另一个项目引用的 WCF 项目。我的 WCF 将此定义为一种方法：

```
public MyClass getClass() {
    return new MyClass();
} 
```

MyClass 位于一个公共共享库中，因此当我为我的服务添加 Web 引用时，它只是使用共享库中的 MyClass 类。但是，由于各种原因，我需要强制它不要使用它，而是生成它自己的内部类结构来匹配（当 MyClass 不在共享库中时会发生这种情况。）

没有从共享库中删除它，有没有办法强制这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:47:55.647

在配置服务引用时，您可以选择在某些库中重用类型而不是“全部”。这样，您可以包含除您不想重复使用的库之外的所有内容：

![在此处输入图像描述](../Images/7ab3d66555552abc0e3ab932dba8fc8a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:49:53.310

是的。从解决方案资源管理器配置服务引用，然后关闭“在引用的程序集中重用类型”复选框，或将单选按钮更改为“在指定的引用程序集中重用类型”，然后选择您想要重用类型的程序集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:50:09.090

当您配置服务参考时，窗口下部会有一个选项，上面写着`"Reuse types in referenced assemblies"`。

您可以禁用所有程序集的类重用，也可以仅禁用特定的类重用。也许你应该检查一下！

![配置对话框](../Images/b5b86b8e1e6e73f44e8bf427c8bb708e.png)

# asymptotic-complexity - 计算函数的大θ

> ID：14505174
> 
> 赞同：1
> 
> 时间：2013-01-24T15:42:51.260
> 
> 标签：asymptotic-complexity, big-theta

我被要求计算家庭作业的大 theta，但是这方面的讲座材料有点稀疏。

鉴于循环

```
for (x = 1; x <= n; x *= 2){
  for(y = 1; y <= n; y += 2)
    t++; 
```

我已经制定了一个执行图表

```
x       y
1       1, 3, 5, 7 ... n-2, n
2       1, 3, 5, 7 ... n-2, n
4       1, 3, 5, 7 ... n-2, n
8       1, 3, 5, 7 ... n-2, n
log n   (n+1)/2 
```

它的内部循环增量器让我失望。它执行 (n+1)/2 次，所以大 theta 必须是 (n log n + log n)/2。

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:09:35.970

您的计算似乎正确，但您需要继续执行更多步骤。

Big theta 忽略所有小于最大项和所有常数因子[的内容（该等式](http://en.wikipedia.org/wiki/Bachmann-Landau_notation#Family_of_Bachmann.E2.80.93Landau_notations)可能有助于理解这一点）。

```
Theta((n log n + log n)/2)
= Theta(1/2 n log n + 1/2 log n)
= Theta(1/2 n log n)
= Theta(n log n) 
```

**从方程中可以**看出为什么它忽略了常数因子（你可以适当地操纵 k ）。****

 ****为什么它会忽略小于最大项的所有内容：**

```
Assume g(x) <= f(x) (from any x onward, since the Theta equation only needs to hold from any n onward)
f(x) <= f(x) + g(x) <= 2.f(x)
Thus Theta(f(x) + g(x)) = Theta(2.f(x)) = Theta(f(x)) 
```**

# python - 元类是否首先实例化类的属性？

> ID：14505175
> 
> 赞同：2
> 
> 时间：2013-01-24T15:42:54.010
> 
> 标签：python, python-2.7, metaclass

从[这个答案](https://stackoverflow.com/a/6581949/339681)到“什么是元类？” 我懂了：

> 您首先编写类 Foo(object)，但类对象 Foo 尚未在内存中创建。
> 
> Python 将在类定义中查找**元类。**如果找到它，它将使用它来创建对象类 Foo。如果没有，它将使用 type 来创建类。

经过测试，似乎类的属性是在类的构造函数运行之前实例化的。我有什么误解？

测试代码：

```
class meta(type):

    def __init__(cls, name, bases, dic):
        type.__init__(cls, name, bases, dic)

        print hasattr(cls, "a")
        cls.a = "1"

class A(object):
    a = "a"
    __metaclass__ = meta

class B(object):
    __metaclass__ = meta

class C(object):
    __metaclass__ = meta
    a = "a"

print A.a
print B.a
print C.a 
```

输出：

```
True
False
True
1
1
1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:43:39.860

类体在类构建之前运行，是的。

The body of the class provides a temporary namespace, and all local names in that namespace are given as a dictionary to construct the class object, together with the base classes and a name for the class.

You can do this with the `type()` constructor too:

```
>>> Foo = type('Foo', (), {'a': 1})
>>> Foo.a
1 
```

The class body is basically executed as a function, with the local namespace of that function being used to create the class attributes, the 3rd argument to `type()` above.

In python 3 you have a little more influence on that process with the [`__prepare__` hook](http://docs.python.org/3/reference/datamodel.html#preparing-the-class-namespace) on a metaclass. `__prepare__` should be a class method that returns a initial namespace for the class body; use it to inject extra names into the generated class body *before* the class body is executed:

```
class MyMeta(type):
   @classmethod
   def __prepare__(mcl, name, bases):
       return {'a': 1} 
```

# java - 数据库中的Java列表与excel中的列表合并

> ID：14505176
> 
> 赞同：-1
> 
> 时间：2013-01-24T15:42:56.693
> 
> 标签：java, algorithm, list, join, merge

我想在 Java 中合并两个对象列表。一个是来自数据库的对象列表，第二个列表来自 Excel。

1.  第一个对象列表包含以下数据： `[name(str),valid_from(date),valid_to(date),active(flag)]`
    如果名称、活动标志相等并且 obj1、obj2 - valid_from、valid_to 的日期是不相交的间隔，则对象相等。
    只有当活动标志不相等时，列表中才能有两个元素具有重叠的日期间隔和相同的名称。

2.  第二个对象列表包含相同的数据以及关于是否在第一个列表上更新、删除或创建新记录的信息： `[name(str),valid_from(date),valid_to(date),active(flag), action_type(c/u/d)]`

//编辑：我的代码是：

```
public class ClassA {
    private String name;
    private Date validFrom;
    private Date validTo;
    private boolean active;

    public ClassA(String name, Date validFrom, Date validTo, boolean active) {
        this.name = name;
        this.validFrom = validFrom;
        this.validTo = validTo;
        this.active = active;
    }

    public String getName() {
        return name;
    }

    public Date getValidFrom() {
        return validFrom;
    }

    public Date getValidTo() {
        return validTo;
    }

    public boolean isActive() {
        return active;
    }

public static void main(String[] args) {
    List<ClassA> objectsFromDB = getObjectsFromDB();
    List<ClassB> objectsFromFile = getObjectsFromFile();

    Map<String, ClassA> objectNameToClassA = buildObjectNameToClassAMap(objectsFromDB);

    List<ClassA> objectsToCreate = new ArrayList<ClassA>();
    List<ClassA> objectsToUpdate = new ArrayList<ClassA>();
    List<ClassA> objectsToDelete = new ArrayList<ClassA>();

    for(ClassB object: objects) {
         ActionType actionType = object.getActionType();
         if(ActionType.CREATE.equals(actionType) {
             objectsToCreate.add(object.getObjectA());
         }
         if(ActionType.UPDATE.equals(actionType) {
             objectsToUpdate.add(object.getObjectA());
         }
         if(ActionType.DELETE.equals(actionType) {
             objectsToDelete.add(object.getObjectA());
         }
    }

}

    private static Map<String, ClassA> buildObjectNameToClassAMap(List<ClassA> objects) {
        Map<String, ClassA> result = new LinkedHashMap<String, ClassA>();
        for(ClassA object: objects) {
           result.put(object.getName(), object);
        }
        return result;
    }

}

enum ActionType {
    CREATE, UPDATE, DELETE;
}

class ClassB {
    private ClassA classA;
    private ActionType actionType;
    public ClassB(ClassA classA, ActionType actionType) {
        this.classA = classA;
        this.actionType = actionType;
    }

    public ClassA getClassA() {
         return classA;
    }

    public ActionType getActionType() {
        return actionType;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:14:28.450

I would first define a class for your objects where you override the equals method in order to respect your conditions of equality. Then I would use one of the classes of java.util that implement the Set interface, HashSet for example. Then use the add method on this set with your objects. In set arithmetics, adding is a set union and so it performs a merge.

# c# - 如何将 AND/OR 表达式添加到以下动态 linq 表达式

> ID：14505179
> 
> 赞同：0
> 
> 时间：2013-01-24T15:43:05.413
> 
> 标签：c#, .net, linq, expression-trees, dynamic-linq

T 是一种可能有也可能没有特定属性的类型，比如说“City”。对于具有名为“City”的属性的类型，我想限制记录，以便仅返回 Gotham 的居民并对其进行排序。

```
public static IQueryable<T> OrderBy<T>(this IQueryable<T> source, string ordering, params object[] values) 
{

    var type = typeof(T);
    var property = type.GetProperty(ordering);
    var parameter = Expression.Parameter(type, "p");
    var propertyAccess = Expression.MakeMemberAccess(parameter, property);
    var orderByExp = Expression.Lambda(propertyAccess, parameter);
    MethodCallExpression resultExp = Expression.Call(
                typeof(Queryable), 
                "OrderBy", 
                new     Type[] { type, property.PropertyType }, 
                source.Expression, 
                Expression.Quote(orderByExp));

    string propertyToRestrictOn = "City";
    string restrictedValue = "Gotham";
    var restrictedProperty = type.GetProperty(propertyToRestrictOn);
    if(null ! = restrictedProperty )
    {
      // TODO: What to add here so than only those records are returned that have a 
      // property named City and the value is 'Gotham'???
    }

   return source.Provider.CreateQuery<T>(resultExp);
} 
```

如果可能的话，请在此处命名/链接一些有用的文献，以防我必须创建更复杂的查询，即混合和/或

[该代码是从How do I apply OrderBy on an IQueryable using a string column name in a generic extension method?](https://stackoverflow.com/questions/307512/how-do-i-apply-orderby-on-an-iqueryable-using-a-string-column-name-within-a-gene)借来的 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:10:37.817

我不太确定我是否正确理解了你，但我想几个月前我也遇到过同样的情况。[这里](http://passiondev.wordpress.com/2012/10/27/linq-expressiontrees/)发布的代码是我的解决方案。

我想你应该对第 24 行特别感兴趣。

* * *

编辑：

```
PropertyInfo p = ... // I used reflection in my examply to get properties with a certain Attribute

var expressionParameter = Expression.Parameter(typeof(SomeClass), "lambda");    
var parameter = new [] { expressionParameter };

var propertyAccess = Expression.Property(expressionParameter, p);
var nullCheck = Expression.NotEqual(propertyAccess, Expression.Constant(null, p.PropertyType));
var nullCheckLambda = Expression.Lambda<Func<SomeClass, Boolean>>(nullCheck, parameter);

var containsMethodInfo = typeof(String).GetMethod("Contains", new[] { typeof(String) });
var contains = Expression.Call(propertyAccess, containsMethodInfo, Expression.Constant("ell"));
var containsLambda = Expression.Lambda<Func<SomeClass, Boolean>>(contains, new[] { expressionParameter });

var predicate = Expression.Lambda<Func<SomeClass, Boolean>>(
// line 24 
Expression.AndAlso(nullCheckLambda.Body, containsLambda.Body), parameter);

Console.WriteLine(predicate.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:05:08.740

我认为你让这件事变得比你必须做的更难。在代码的第一部分（`OrderBy()`）中，您实际上不需要生成整个查询表达式，只需要生成其中的 lambda。在第二部分（可选`Where()`）中，您可以做几乎相同的事情，只需添加`Expression.Equal()`and `Expression.Constant()`：

```
public static IQueryable<T> OrderBy<T>(this IQueryable<T> source, string ordering)
{
    var type = typeof(T);
    var property = type.GetProperty(ordering);
    var parameter = Expression.Parameter(type, "p");
    var propertyAccess = Expression.MakeMemberAccess(parameter, property);
    // necessary for value types to work
    var cast = Expression.Convert(propertyAccess, typeof(object));
    var orderByExp = Expression.Lambda<Func<T, object>>(cast, parameter);

    IQueryable<T> result = source.OrderBy(orderByExp);

    string propertyToRestrictOn = "City";
    string restrictedValue = "Gotham";
    var restrictedProperty = type.GetProperty(propertyToRestrictOn);
    if (restrictedProperty != null)
    {
        var restrictionParameter = Expression.Parameter(type, "p");
        var restrictionPropertyAccess =
            Expression.MakeMemberAccess(restrictionParameter, restrictedProperty);
        var restrictionEquality =
            Expression.Equal(restrictionPropertyAccess,
                             Expression.Constant(restrictedValue));
        var whereExp =
            Expression.Lambda<Func<T, bool>>(restrictionEquality, restrictionParameter);

        result = result.Where(whereExp);
    }

   return result;
} 
```

另外，如果您的方法不仅仅是订购，我认为您不应该调用它`OrderBy()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:35:59.223

你已经成功了一半。您已经有了有序的表达式，所以您只需在`Queryable.OrderBy`表达式中使用表达式调用`Queryable.Where`（反之亦然，并不重要）。

```
if(null != restrictedProperty )
{
    var notEqualExp = Expression.NotEqual(parameter,
                            Expression.Constant(restrictedValue, typeof(string)));
    resultExp = Expression.Call(
            typeof(Queryable), 
            "Where", 
            new Type[] { type }, 
            resultExp, 
            Expression.Lambda(notEqualExp, parameter));
} 
```

有一段时间没有手动构建表达式了，所以这纯粹是凭记忆完成的。但是，它至少应该让您开始并为您提供一些可以使用的东西。

PS我实际上会在`OrderBy`方法调用之前执行此检查。这样你最终会得到`Queryably.Where(...).OrderBy(...)`相反的结果。但我想如果这还是由提供商翻译的，那应该没关系。但是，我会做一些事情来减少生成的查询的任何歧义。

# android - GC 与 Android 视频游戏

> ID：14505180
> 
> 赞同：-2
> 
> 时间：2013-01-24T15:43:06.373
> 
> 标签：android, opengl-es, garbage-collection

我正在使用 JAVA 和 OpenGL-ES 在 Android 中开发 2D 视频游戏。

我有一个问题，我认为是垃圾收集器。每隔几秒钟，游戏就会冻结，无论我在做什么。

我一直在阅读一些关于它的文档等等，我删除了我拥有的所有循环迭代器，现在我使用 for(i=0,...) 以及其他解决方案。情况是，它对性能没有任何影响......

我一直在查看我的代码，发现了一些我认为可能会造成问题的东西，这就是我在动画中的精灵之间进行更改的方式。

例如，我有一个可以按一些键移动的英雄。当它行走时，他的精灵在帧之间变化。为此，我移动纹理缓冲区以瞄准我想要的图像部分。每次这样做时，我都会使用此功能：

```
protected void SetTextureBuffer(float xo, float xf, float yo, float yf) {

    float textureVertexs[] = {
            xo, yf,     // top left
            xf, yf,     // bottom left
            xf, yo,     // top right
            xo, yo      // bottom right
    };

    // a float has 4 bytes so we allocate for each coordinate 4 bytes
    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(textureVertexs.length * 4);
    byteBuffer.order(ByteOrder.nativeOrder());

    // allocates the memory from the byte buffer
    textureBuffer = byteBuffer.asFloatBuffer();

    // fill the vertexBuffer with the vertices
    textureBuffer.put(textureVertexs);

    // set the cursor position to the beginning of the buffer
    textureBuffer.position(0);
} 
```

每次调用它都会分配内存来创建缓冲区，这可能是每秒很多次，因为有更多的带有动画的实体......

你认为这可能是个问题吗？还是我看错了？如果这是一个问题......我怎样才能以另一种更有效的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:39:58.450

尝试删除这些行：

```
ByteBuffer byteBuffer = ByteBuffer.allocateDirect(textureVertexs.length * 4);
byteBuffer.order(ByteOrder.nativeOrder());
textureBuffer = byteBuffer.asFloatBuffer(); 
```

`textureBuffer`在您的类构造函数/初始化程序中分配一次。由于您不需要保留以前的数据，因此无需再次重新创建缓冲区。因此，您只需覆盖同一缓冲区中的旧数据。

# sql-server - 从 CRM Dynamics 2011 插件连接到 SQL

> ID：14505181
> 
> 赞同：0
> 
> 时间：2013-01-24T15:43:07.647
> 
> 标签：sql-server, sql-server-2008-r2, dynamics-crm-2011, dynamics-crm, dynamics-crm-4

大家好，我之前发布了一个关于如何设置有效合同以起草的问题，但我的研究发现它既可以直接进入 SQL 进行更新，也可以通过复制合同然后进行更新来完成。我不得不选择选项一。我正在尝试访问我的数据库并更新表，但从插件中得到一个 SQL 通用错误。我从插件访问数据库的代码（我通常使用实体框架连接）：

```
string strConn = "Data Source=serverName;Initial Catalog=DatabaseName;IntegratedSecurity=SSPI";

SqlConnection connection = new SqlConnection();
SqlCommand command = new SqlCommand();
connection.ConnectionString = strConn;
connection.Open();
command.Connection = connection;
command.CommandText = "Update ContractBase set StateCode = 0,StatusCode = 1 "
  + "where ContractId = ACC70D43-DEBA-E111-8610-00155D041E80";
command.ExecuteNonQuery();
connection.Close(); 
```

当我从插件连接到数据库时，还有什么需要考虑的吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T14:31:20.483

I am not sure if this is too late but you can create a SSIS package that stores CRM data in to SQL table. Create a simple plugin that on create or update fires of this SSIS package.

You will have to run this plugin with none isolation mode as the sandbox isolation will not allow file access (package).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:12:05.697

SetStateRequest 消息是否不是设置状态和状态的适当方式？还是我错过了什么？

# c# - 强制框架使用枚举实体名称而不是其值

> ID：14505183
> 
> 赞同：3
> 
> 时间：2013-01-24T15:43:14.690
> 
> 标签：c#, asp.net-mvc, rest, asp.net-web-api

我创建了一个 ASP.NET MVC 4 Web 应用程序。在这个应用程序中，我实现了几个其余的 web 服务，我的问题来了：是否可以强制对象序列化使用枚举实体名称而不是它们的值？

这是我的枚举：

```
 public enum ReturnCode { OK, InvalidParameter } 
```

这就是我得到的：

```
{
   "returnCode": 0,
   "data": null
} 
```

但这就是我想要的：

```
{
   "returnCode": OK,
   "data": null
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:58:26.907

您可以使用 JsonConverter。

[`StringEnumConverter`](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Converters_StringEnumConverter.htm)在这个问题[JSON serialization of enum as string](https://stackoverflow.com/questions/2441290/json-serialization-of-c-sharp-enum-as-string)中提到了 JSON.Net 的原生版本

注释您的财产：

```
[JsonConverter(typeof(StringEnumConverter))]
public enum ReturnCode { OK, InvalidParameter } 
```

或者使用[WebApi Json.NET 自定义日期处理](https://stackoverflow.com/questions/12856853/webapi-json-net-custom-date-handling)中的配置示例在全局序列化器设置中注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:56:27.920

如果不更好地了解您的使用模式，很难提出建议……但仍然如此。

使枚举成为私有字段。

使用返回私有枚举字段的实体名称的 getter 和使用 Enum.Parse 设置私有字段值的 setter 构建公共字符串属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:58:09.760

是的，你可以这么做。您需要声明额外的字符串属性并在序列化/反序列化时使用它。

例子：

```
[DataContract]
public class MyResource
{
    [DataMember]
    public string Data { get; set; }

    public ReturnCode Code { get; set; }

    [DataMember(Name = "returnCode")]
    string ReturnCodeString
    {
        get { return this.Code.ToString(); }
        set
        {
            ReturnCode r;
            this.Code = Enum.TryParse(value, true, out r) ? r : ReturnCode.OK;
        }
    }
} 
```

因此，现在您可以将枚举的值作为字符串传递（从服务器和客户端双向），即：

```
{
   "returnCode": "OK",
   "data": null
} 
```

或者

```
{
   "returnCode": "InvalidParameter",
   "data": null
} 
```

# c# - 当 @ 已经在代码内部时（与内部标记相反），它会做什么？

> ID：14505185
> 
> 赞同：4
> 
> 时间：2013-01-24T15:43:21.310
> 
> 标签：c#, asp.net-mvc-3, razor

我正在阅读 Steven Sanderson 的关于 ASP.NET 的书，我已经到了让我非常困惑的地步。

**作品**

```
@foreach (var link in Model)
{
    @Html.RouteLink(link, new { controller = "Product", action = "List", category = link, page = 1 });
} 
```

**不工作**

```
@foreach (var link in Model)
{
    Html.RouteLink(link, new { controller = "Product", action = "List", category = link, page = 1 });
} 
```

*（区别是块内的第一个字符）*

在这两种情况下，Razor 都知道它是代码而不是标记 (HTML)，那么为什么我必须将`@`符号放在开头呢？有什么区别&我错过了什么？

编辑：

我应该澄清什么不起作用。这是一个菜单，`link`是当前类别。现在，有了`@`它可以正常工作，您可以看到类别的链接，但没有它，就好像没有类别..您什么也看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:49:37.990

当您使用分号时；（或没有@）它正在执行一行代码，但返回不会写入响应流，而没有它并且通过使用@，它会在该点将结果（MvcHtmlString）直接返回到响应流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:52:16.643

解析器内部会`foreach`自动判断它是处于代码模式还是剃刀模板模式，从而允许您输出 html、剃刀或代码。

这两个语句的区别是一个是在剃刀模板模式（工作），另一个是在代码模式（不工作）

`Html.RouteLink`返回一个`MvcHtmlString`，在您的第二个示例中（在代码模式下），您执行一个函数并且对`MvcHtmlString`返回的函数不执行任何操作，因此在您请求页面时不会呈现任何内容。

在第一个工作示例中，它处于 razor 模板模式，当您这样做时，`@Html.RouteLink`它会添加到 razor 模板中，并且 razor 会正确解释并为您呈现链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:53:17.547

此`@`实例中的 表示您要将语句的结果输​​出给用户。类似于`Response.Write()`。

当`@`符号被省略时，函数返回结果，但由于它没有被分配或发送到任何地方，它就丢失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:50:24.753

要记住的是，您也可以在该 foreach 块中包含 html：

作品：

```
@if (someConditionalExpression)
{
    <p>Only shown if the conditional was true.</p>
} 
```

由于标记在这里也是合法的，因此您需要使用`@`符号向视图引擎指示您想要再次编码，而不是标记。否则，你想要的就是模棱两可的。

# php - Wordpress - 添加外部链接以发布缩略图

> ID：14505190
> 
> 赞同：-2
> 
> 时间：2013-01-24T15:43:31.623
> 
> 标签：php, wordpress, content-management-system

我不确定我的标题是否足够准确地描述了我正在寻找的内容。基本上，我试图在每个版本下面复制此页面上所做的事情：http: [//www.deadmau5.com/releases/](http://www.deadmau5.com/releases/)

现在，我知道每次添加新版本时我都可以手动完成，但我想让客户端尽可能轻松地更新。理想情况下，我希望他们为他们的发布创建一个新页面/帖子，其中包含 Amazon 和 iTunes 链接的自定义字段。我希望特色图片出现在父页面上，下面有亚马逊和 iTunes 链接。

我研究了 WP 的高级自定义字段插件 (http://wordpress.org/extend/plugins/advanced-custom-fields/)，它似乎提供了解决方案的一部分，但并没有完全满足我的需要去做。

谁能建议我可以使用的任何插件（或插件组合）？或者甚至是任何其他方式，这将使我的客户更新过程尽可能容易？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:09:19.750

感谢那些帮助过的人。我在这里找到了我的解决方案：http: [//millionclues.com/wordpress-tips/custom-image-and-link-for-each-post-using-custom-fields/](http://millionclues.com/wordpress-tips/custom-image-and-link-for-each-post-using-custom-fields/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:48:43.187

您对自定义字段是正确的。

创建一个自定义字段，其中包含您希望它去哪里的链接。然后将图像与 href = 链接到自定义字段。像这样。

```
$link = get_post_meta($post->ID, 'custom_link', true);

echo '<a href="' . $link . '"> ' . the_post_thumbnail() . ' </a>'; 
```

请务必调用您的自定义字段`custom_link`。

# php - Aptana 中的 $_SERVER 不显示元素

> ID：14505192
> 
> 赞同：0
> 
> 时间：2013-01-24T15:43:37.373
> 
> 标签：php, global-variables, aptana, dreamweaver, superglobals

在 DreamWeaver 中我们输入 $_SERVER 时，dreamweaver 会打开一个下拉菜单来选择一个元素，但是在 Aptana 中我们没有这个选项，有没有办法在 Aptana 中添加这个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:47:38.237

[https://jira.appcelerator.org/browse/APSTUD-2898](https://jira.appcelerator.org/browse/APSTUD-2898)上存在一个与 aptana 开发相关的未解决问题，该问题涉及此特定问题。所以我猜这个功能仍然在他们的待办事项清单上。

您可以通过对本地项目执行以下操作来执行更通用的命令辅助

1.  单击“项目”选项卡（位于 Aptana 环境的左侧面板中）。
2.  创建一个新项目（右键单击，新建 -> 项目...）。
3.  （在 Aptana Projects 下的 New Project 窗口中）选择“PHP Project”。
4.  单击“下一步”按钮，输入您的项目名称，然后单击“完成”按钮。
5.  选择并右键单击新创建的项目，然后单击“属性”。
6.  选择“项目性质”。
7.  勾选“com.aptana.ide.editor.php.phpnature (PHP Nature)”。
8.  然后单击“确定”按钮。

更详细的说明在[http://ryan.rawswift.com/2009/05/17/aptana-how-to-enable-php-code-assist/](http://ryan.rawswift.com/2009/05/17/aptana-how-to-enable-php-code-assist/)

# java - 处理 FrameBuffer 错误

> ID：14505195
> 
> 赞同：0
> 
> 时间：2013-01-24T15:43:48.097
> 
> 标签：java, opengl, processing, framebuffer

我正在尝试制作一个处理程序，但如果我使用 P2D、P3D 或 OPENGL 模式，我会收到错误消息：

```
com.sun.jdi.VMDisconnectedException
    at com.sun.tools.jdi.TargetVM.waitForReply(TargetVM.java:285)
    at com.sun.tools.jdi.VirtualMachineImpl.waitForTargetReply(VirtualMachineImpl.java:1015)
    at com.sun.tools.jdi.PacketStream.waitForReply(PacketStream.java:51)
    at com.sun.tools.jdi.JDWP$ObjectReference$InvokeMethod.waitForReply(JDWP.java:4589)
    at com.sun.tools.jdi.ObjectReferenceImpl.invokeMethod(ObjectReferenceImpl.java:374)
    at processing.mode.java.runner.Runner.findException(Runner.java:701)
    at processing.mode.java.runner.Runner.reportException(Runner.java:652)
    at processing.mode.java.runner.Runner.exception(Runner.java:595)
    at processing.mode.java.runner.EventThread.exceptionEvent(EventThread.java:367)
    at processing.mode.java.runner.EventThread.handleEvent(EventThread.java:255)
    at processing.mode.java.runner.EventThread.run(EventThread.java:89) 
```

错误消息本身在 P2D 和 P3D 之间有所不同，但它们都得到 no framebuffer objects available 错误。我正在使用处理 2.0b7，如果您需要更多信息，请帮助并告诉我。注意：我不知道这是否是一个单独的问题，但我也收到了 GLSL 着色器错误。现在，这是我的代码：

```
Cell[][] Cells = new Cell[50][50];
byte Direction = 1;
byte Times = 1;
int oldwidth = 500;
int oldheight = 500;
void setup() {
  size(oldwidth, oldheight, OPENGL);
  background(255);
  colorMode(HSB,250);
  for (int x = 0; x < 50; x++) {
    for (int y = 0; y < 50; y++) {
      Cells[x][y] = new Cell(x * 5, y * 5, 255, x * (width / 50), y * (height / 50), width / 50, height / 50);
    }
  }
}
void draw() {
  for (int x = 0; x < 50; x++) {
    for (int y = 0; y < 50; y++) {
      if (width == oldwidth) Cells[x][y].Width = width / 50;
      if (height == oldheight) Cells[x][y].Height = height / 50;
      if (Direction == 1){
        Cells[x][y].Hue += 5;
        if (Cells[x][y].Hue > 250) Cells[x][y].Hue -= 250;
      }
      if (Direction == 2){
        Cells[x][y].Saturation -= 5;
        if (Cells[x][y].Saturation < 0) Cells[x][y].Saturation += 500;
      }
      if (Direction == 3){
        Cells[x][y].Hue -= 5;
        if (Cells[x][y].Hue < 0) Cells[x][y].Hue += 250;
      }
      if (Direction == 4){
        Cells[x][y].Saturation += 5;
        if (Cells[x][y].Saturation > 500) Cells[x][y].Saturation -= 500;
      }
      Cells[x][y].Draw();
    }
  }
  if (Times == 50){
    Times = 1;
    if (Direction == 4) Direction = 1; else Direction += 1;
  } else Times += 1;
  delay(10);
}
class Cell {
  int X;
  int Y;
  int Width;
  int Height;
  float Hue;
  float Saturation;
  float Brightness;
  Cell(color parC, int parX, int parY, int parWidth, int parHeight) {
    Hue = hue(parC);
    Saturation = saturation(parC);
    Brightness = brightness(parC);
    X = parX;
    Y = parY;
    Width = parWidth;
    Height = parHeight;
  }
  Cell(float parHue, float parSaturation, float parBrightness, int parX, int parY, int parWidth, int parHeight) {
    Hue = parHue;
    Saturation = parSaturation;
    Brightness = parBrightness;
    X = parX;
    Y = parY;
    Width = parWidth;
    Height = parHeight;
  }
  void Draw() {
    if (Saturation > 250) if (Saturation > 500) stroke(color(Hue,0,Brightness)); else stroke(color(Hue,Saturation - (Saturation - 250) * 2,Brightness)); else stroke(color(Hue,Saturation,Brightness));
    if (Saturation > 250) if (Saturation > 500) fill(color(Hue,0,Brightness)); else fill(color(Hue,Saturation - (Saturation - 250) * 2,Brightness)); else fill(color(Hue,Saturation,Brightness));
    rect(X, Y, Width, Height);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:30:51.823

我才发现只是我的显卡不支持 OPENGL 2.0

# powershell - 我可以在不调用的情况下解析 PowerShell 脚本块参数吗？

> ID：14505198
> 
> 赞同：1
> 
> 时间：2013-01-24T15:43:49.953
> 
> 标签：powershell, parameters

我正在考虑编写一些 PowerShell 代码，这些代码既可以立即执行，也可以生成将作为生成脚本执行的命令。

我想避免这种情况：

```
if($Generating){
  write-Output "somecommand.exe"
} 
else{
  somecommand.exe  
} 
```

我开始研究 ScriptBlocks，它起初看起来很有希望，因为我可以将 ScriptBlock 的内容写入控制台而不执行它。如：

```
$sc = { somecommand.exe }
$sc
 somecommand.exe 
```

我的具体问题是，如果我的脚本块包含参数，当我将脚本块内容写入控制台但不调用脚本块时，我可以让它们解析吗？

例如给定以下脚本块：

```
$b2 = { Param([string]$P) Write-Host "$P" } 
```

当我在控制台输入“$b2”并回车时，我看到了：

```
Param([string]$P) Write-Host "$P" 
```

我想看到的是这个（如果参数值为“Foo”）：

```
Param([string]$P) Write-Host "Foo" 
```

我意识到这可以在调用它时完成，无论是通过“&”还是使用 Invoke()，但是有没有办法让参数在不调用的情况下解析，从而使我的脚本生成更加优雅而不需要一堆条件整个代码中的语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:27:10.443

在 PowerShell v3 中，您可以通过 AST 属性获取参数信息，例如：

```
PS> $sb = {param($a,$b) "a is $a b is $b"}
PS> $sb.Ast.ParamBlock

Attributes           Parameters          Extent              Parent
----------           ----------          ------              ------
{}                   {$a, $b}            param($a,$b)        {param($a,$b) "a... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:03:35.780

适用于 PowerShell v2 的解决方案：

```
# given the script block
$b2 = { Param([string]$P) Write-Host "$P" }

# make a function of it and "install" in the current scope
Invoke-Expression "function tmp {$b2}"

# get the function and its parameters
(Get-Command tmp).Parameters 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:26:37.757

当显示带有双引号 @ **"**的 here-string 时，它会扩展变量。对于不应扩展的变量，使用反引号 ( ` ) 转义变量。

所以试试这个：

```
$P = "Foo"

$b2 = @"
{ Param([string]`$P) Write-Host "$P" }
"@ 
```

测试：

```
PS-ADMIN > $b2
{ Param([string]$P) Write-Host "Foo" } 
```

如果您想再次将其转换为 scriptblock-type：

```
#Convert it into scriptblock
$b3 = [Scriptblock]::Create($b2)

PS-ADMIN > $b3
{ Param([string]$P) Write-Host "Foo" }

PS-ADMIN > $b3.GetType().name
ScriptBlock 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T13:25:38.167

使用一些我认为我已经找到满足我需求的最佳解决方案的建议。考虑以下代码

```
function TestFunc
{
    Param(
        [Parameter(Mandatory=$true)]
        [string]$Folder,

        [Parameter(Mandatory=$true)]
        [string]$Foo
    )    

    $code = @"
Write-Host "This is a folder $Folder"
Write-Host "This is the value of Foo $Foo"
"@

    $block = [Scriptblock]::Create($code)

    Write-Host "Running the block"  -BackgroundColor Green -ForegroundColor Black
    &$block

    Write-Host "Displaying block code" -BackgroundColor Green -ForegroundColor Black
    $block

} 
```

它的输出：

```
Running the block
This is a folder c:\some\folder
This is the value of Foo FOOFOO
Displaying block code
Write-Host "This is a folder c:\some\folder"
Write-Host "This is the value of Foo FOOFOO" 
```

通过这种方式，我仍然可以获得保留现有函数及其参数、参数验证、CBH 等的所有好处。我还可以轻松地生成函数将执行或让它执行的代码。感谢所有的投入，这绝对是一次很好的学习经历。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T07:42:23.303

如果要将块表示为块而不是字符串，则可以使用以下方法：

```
$printable = invoke-expression ('"' + ($block -replace '"', '`"') + '"') 
```

本质上，您将所有内容都用引号括起来，然后将其作为表达式调用。该`-replace`调用确保块本身中的任何引号都被转义。

我在这个方便的函数中使用它，如果调用的命令失败，它也会停止执行。

```
# usage: exec { dir $myDir }
function exec($block)
{
    # expand variables in block so it's easier to see what we're doing
    $printable = invoke-expression ('"' + ($block -replace '"', '`"').Trim() + '"')
    write-host "# $printable" -foregroundcolor gray

    & $block
    if ($lastExitCode -ne 0)
    {
        throw "Command failed: $printable in $(pwd) returned $lastExitCode"
    }
} 
```

# android - CordovaWebView：超时错误

> ID：14505204
> 
> 赞同：8
> 
> 时间：2013-01-24T15:44:05.397
> 
> 标签：android, cordova

我正在我的 phonegap 应用程序中实现 jquery.min.js，但它向我显示 CordovaWebView 超时错误。我也试过

```
super.setIntegerProperty("loadUrlTimeoutValue", 10000); 
```

但它只是花时间，在那之后，同样的“CordovaWebView：超时错误！” 来了。请为我提供适当的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T14:17:25.177

我猜您的主脚本太长而无法执行：

```
//code executed after the loading of the page (if your using jquery)
$(function() {

    //if this method is too heavy and takes too long to execute, it will trigger the TIMEOUT ERROR. 
    doSomeStuff();
}); 
```

可能不想在此方法上添加超时以让应用程序启动，然后启动您的繁重脚本（您可能希望显示加载图像或类似的东西）。

**代码片段**：

```
//code executed after the loading of the page
$(function() {

    //in mobile environment, this timeout leaves time for the app to launch before we start any heavy process.
    setTimeout(function(){
        doSomeStuff();
    },100);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:02:32.633

您可以增加超时值，请参阅此[链接](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/EcZDj0mOeJY)

```
super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
```

## 更新

在示例中，我用这个代码段替换了我的旧代码，它可以工作：

我添加`import org.apache.cordova.*` 并`super.loadUrl(Config.getStartUrl())`代替了 url 方法

```
import org.apache.cordova.*;
import android.os.Bundle;    
public class MyApp extends DroidGap
{    
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {           
        super.onCreate(savedInstanceState);
        super.loadUrl(Config.getStartUrl());            
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T09:11:55.817

这是模拟器的问题，因为系统速度很慢，所以需要时间并给出 CordovaWebView 超时错误。
所以我在具有良好 RAM 的设备中运行它并且它正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T09:51:22.317

关于从 corodova Web 视图中获取超时从同一个 AVD 重新启动应用程序将解决这个问题，您不必向应用程序发出“运行方式”命令只需从手机或 AVD 中选择应用程序并再次运行它可能是因为您的设备的速度非常慢，并且无法快速响应您为识别价值而提供的变量

我-

# c# - 如何使用 BsonClassMap 配置 ObjectIds 数组的表示？

> ID：14505211
> 
> 赞同：1
> 
> 时间：2013-01-24T15:44:19.407
> 
> 标签：c#, .net, mongodb, serialization, bson

考虑以下 C# 类：

```
public class Role
{
    public string Id { get; set; }
    public IEnumerable<string> Users { get; set; }
} 
```

如何使用配置将用户映射到 MongoDB 中的 ObjectIds 数组`BsonClassMap.RegisterClassMap<Role>`？我能够配置标量属性 Id 映射到 ObjectId，但无法弄清楚如何对序列（数组）执行相同操作：

```
BsonClassMap.RegisterClassMap<Role>(m =>
    {
        m.MapIdProperty(r => r.Id).SetRepresentation(BsonType.ObjectId);
        // How do I map r.Users to an array of ObjectId??
        m.MapProperty(r => r.Users);
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:25:12.643

答案是`SetSerializationOptions`使用正确初始化的`ArraySerializationOptions`对象进行调用：

```
BsonClassMap.RegisterClassMap<Role>(m =>
    {
        m.MapIdProperty(r => r.Id).SetRepresentation(BsonType.ObjectId);
        m.MapProperty(r => r.Users).SetSerializationOptions(
                new ArraySerializationOptions(new
                        RepresentationSerializationOptions(BsonType.ObjectId)));
     }); 
```

# ember.js - 未捕获的类型错误：对象# has no method 'set' When i try set my 'content' to the customerList i'll get the error: Uncaught TypeError: Object #Object has no method 'set' Here is my code: < 问问题 问问题 2013-01-24T15:44:36.497 4143 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. When i try set my 'content' to the customerList i'll get the error: Uncaught TypeError: Object #Object has no method 'set' Here is my code: App.TableController = Em.ArrayController.extend({ init: function() { this._super(); this.getData(); }, getData: function() { $.get('data/customer.json', function(data) { var customerList = Ember.A([]); data.forEach(function(item) { var customer = App.overv.create({ incidient: item.incidient, customer: item.customer, machine: item.machine, priority: item.priority }); customerList.pushObject(customer); }); this.set('content', customerList); }); }}); I I also tried it with App.router.tableController.set('content',customerList) but ember doesn't recognize the controller anymore. With 1.0.0 pre 2 this second example worked great. Now i try to figure out what i did wrong or probably understood wrong. Keep a reference of this in a local variable _self. See code below. App.TableController = Em.ArrayController.extend({ init: function() { this._super(); this.getData(); }, getData: function() { var _self = this; $.get('data/customer.json', function(data) { var customerList = Ember.A([]); data.forEach(function(item) { var customer = App.overv.create({ incidient: item.incidient, customer: item.customer, machine: item.machine, priority: item.priority }); customerList.pushObject(customer); }); _self.set('content', customerList); }); }}); ember.js 4 2 回答 2 This answer is useful 1 probably just an issue with the context of the AJAX callback... you could try this: App.TableController = Em.ArrayController.extend({ init: function() { this._super(); this.getData(); }, getData: function() { $.ajax({ url: 'data/customer.json', dataType: 'json', context: this }).success(function(data, textStatus, jqXHR) { var customerList = Ember.A([]); data.forEach(function(item) { var customer = App.overv.create({ incidient: item.incidient, customer: item.customer, machine: item.machine, priority: item.priority }); customerList.pushObject(customer); }); this.set('content', customerList); }); } }); specifying TableController as the context to the callback. 于 2013-01-24T20:47:44.777 回答 This answer is useful 1 Keep a reference of this in a local variable _self. See code below. App.TableController = Em.ArrayController.extend({ init: function() { this._super(); this.getData(); }, getData: function() { var _self = this; $.get('data/customer.json', function(data) { var customerList = Ember.A([]); data.forEach(function(item) { var customer = App.overv.create({ incidient: item.incidient, customer: item.customer, machine: item.machine, priority: item.priority }); customerList.pushObject(customer); }); _self.set('content', customerList); }); }}); 于 2013-01-24T20:42:17.777 回答 Related 1 c# - 从 .net 应用程序访问注册表 2 css - 让表格行的最后一个单元格吃掉所有的空白 2 linux - 在linux中生成鼠标按钮单击 2 android - Android 浏览器 $(window).scroll 不工作 2 ios - 将选项卡式视图作为主视图添加到基于导航的 iphone 应用程序 4 android - 在android上使用gson解析json时出错 2 angularjs - AngularJS - 控制器之间的共享状态？ 2 mysql - 一个不可为空的 MySQL 枚举列是否保证只包含这些值？ 0 c# - 处理文本标签上的鼠标事件 (NSText) 1 vb.net - 在 vb.net 中删除 datagridview 控件的标识行 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14505216
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ember.js

When i try set my 'content' to the customerList i'll get the error:

> Uncaught TypeError: Object #Object has no method 'set'

Here is my code:

```
 App.TableController = Em.ArrayController.extend({
init: function() {
    this._super();
    this.getData();
},
getData: function() {
    $.get('data/customer.json', function(data) {
        var customerList = Ember.A([]);
        data.forEach(function(item) {
            var customer = App.overv.create({
                incidient: item.incidient,
                customer: item.customer,
                machine: item.machine,
                priority: item.priority

            });
            customerList.pushObject(customer);
        });
        this.set('content', customerList);

    });
}}); 
```

I I also tried it with **App.router.tableController.set('content',customerList)** but ember doesn't recognize the controller anymore. With 1.0.0 pre 2 this second example worked great. Now i try to figure out what i did wrong or probably understood wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:47:44.777

probably just an issue with the context of the AJAX callback... you could try this:

```
App.TableController = Em.ArrayController.extend({
  init: function() {
      this._super();
      this.getData();
  },
  getData: function() {
      $.ajax({
        url: 'data/customer.json',
        dataType: 'json',
        context: this
      }).success(function(data, textStatus, jqXHR) { 
        var customerList = Ember.A([]);
        data.forEach(function(item) {
            var customer = App.overv.create({
                incidient: item.incidient,
                customer: item.customer,
                machine: item.machine,
                priority: item.priority

            });
            customerList.pushObject(customer);
        });
        this.set('content', customerList);
      });
  }
}); 
```

specifying `TableController` as the context to the callback.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:42:17.777

Keep a reference of this in a local variable _self. See code below.

```
App.TableController = Em.ArrayController.extend({
init: function() {
    this._super();
    this.getData();
},
getData: function() {
    var _self = this;
    $.get('data/customer.json', function(data) {
        var customerList = Ember.A([]);
        data.forEach(function(item) {
            var customer = App.overv.create({
                incidient: item.incidient,
                customer: item.customer,
                machine: item.machine,
                priority: item.priority

            });
            customerList.pushObject(customer);
        });
        _self.set('content', customerList);

    });
}}); 
```

# linux - 在 Unix 上查找人类可读的文件

> ID：14505218
> 
> 赞同：10
> 
> 时间：2013-01-24T15:44:45.010
> 
> 标签：linux, find, human-readable

我想在我的 Linux 机器上找到人类可读的文件，没有文件扩展名限制。这些文件应该是人类感知文件，如文本、配置、HTML、源代码等文件。有没有办法过滤和定位？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-02-03T15:47:29.307

利用：

`find /dir/to/search -type f | xargs file | grep text`

`find`会给你一个文件列表。

`xargs file``file`将在管道输入的每一行上运行命令。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T16:06:53.120

*[find](https://en.wikipedia.org/wiki/Find_(Unix))*和*[file](https://linux.die.net/man/1/file)*是你的朋友：

```
find /dir/to/search -type f -exec sh -c 'file -b {} | grep text &>/dev/null' \; -print 
```

*这将在/dir/to/search*中找到任何文件（注意：它不会找到符号链接目录套接字等，只有常规文件）并运行 sh -c 'file -b {} | grep 文本 &>/dev/null' ; 它查看文件类型并在描述中查找文本。如果这返回 true（即，文本在行中），那么它会打印文件名。

注意：对文件使用 -b 标志意味着不打印文件名，因此不会对*grep*产生任何问题。例如，如果没有该`-b`标志，二进制文件 gettext 将被错误地检测为文本文件。

例如，

```
root@osdevel-pete# find /bin -exec sh -c 'file -b {} |  grep text &>/dev/null' \; -print
/bin/gunzip
/bin/svnshell.sh
/bin/unicode_stop
/bin/unicode_start
/bin/zcat
/bin/redhat_lsb_init
root@osdevel-pete# find /bin -type f -name *text*
/bin/gettext 
```

如果要查看压缩文件，请使用该`--uncompress`标志来归档。有关文件的更多信息和标志，请参阅[man file](http://linux.die.net/man/1/file)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-07T09:37:08.233

这也应该可以正常工作：

```
file_info=`file "$file_name"` # First reading the file info string which should have the words "ASCII" or "Unicode" if it's a readable file

if grep -q -i -e "ASCII" -e "Unicode"<<< "$file_info"; then
    echo "file is readable"
fi 
```

# backbone.js - 如何构建backbonejs应用程序-每个表行backbonejs上的单击事件

> ID：14505219
> 
> 赞同：1
> 
> 时间：2013-01-24T15:44:46.270
> 
> 标签：backbone.js, underscore.js

我正在开发一个应用程序，其中我的一个模板呈现具有 n 行数的表。现在在每一行中，我都有一个带有编辑和删除等按钮的列。

单击编辑时，编辑表单会出现在某个 div 的同一窗口中。该表单需要填充从后端获取的值。

现在没有什么了不起的。我的问题是这样的：

我有一个使用以下模板结构呈现完整表格的视图：

```
<script type="text/template" id="ledgersing"> 

 <div class="span6 widget"> 
 <div class="widget-header"> 
 <span class="title">Ledgers</span> 
<button class="btn btn-danger pull-right" id="addLedgerButton">Add Ledger</button> 
</div> 

 <div class="widget-content"> 

 <table width="100%" class="table table-striped dataTable"> 
 <thead> 
 <tr><th>Name</th><th>Email</th><th>Phone</th><th>Action</th></tr> 
 </thead> 
<tbody> 
<% _.each(ledgers,function(data){ %>
<tr>
    <td><%= data.name %></td>
    <td><%= data.email %></td>
    <td><%= data.contact_number %></td>
    <td><span onClick="alert(<%= data.id %>)">x</span></td>
</tr>
<% }) %>
</tbody>

</table> 
</div> 

 </div> 

 </div >
 </script> 
```

在这种情况下，它只是在单击 x 时提醒一个 id。现在我是否需要像这样使用 onClick 事件？我的意思是我将需要在我用于处理的任何构造中的 id。有什么更好的解决方案？我知道如果应用程序结构正确，backbonejs 可以轻松处理这种混乱。所以基本上我想从专家那里知道，在这种情况下他们会做什么。他们将如何构建应用程序？我是这个前端框架的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:54:25.777

我不会在您的模板中使用，而是`_.each`每个表行使用一个视图，因为每个视图都有一些复杂性（编辑、删除）

在这些视图中，您使用`events`散列来注册您的 DOM 事件。永远不要`onclick`在你的 HTML 中使用，这是一个非常糟糕的做法。

不要犹豫，查看[TodoMVC Backbone 示例](https://github.com/addyosmani/todomvc/tree/gh-pages/architecture-examples/backbone)，了解如何组织您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:44:21.020

我也是第一次开发一个主干应用程序并经历了完全相同的错误。

首先，我只是尝试将我的 php / asp / ruby​​ /whatever_server_side_template_technology 转换为下划线模板，并得到了与您所拥有的非常相似的东西。

现在我可以意识到这是一个错误。您应该使用子视图。事件和相关模型将连接到该子视图。很快你就会有很多视图监听事件并在数据更改时更新自己，但如果你小心的话，它会没问题的。

这是我正在开发的演示应用程序：[https](https://bb-jugar.rhcloud.com/index.html#Wine) ://bb-jugar.rhcloud.com/index.html#Wine ，这里是 github 存储库：[https ://github.com/opensas/BackboneBootstrap](https://github.com/opensas/BackboneBootstrap)

这就是我解决它的方法：[https ://github.com/opensas/BackboneBootstrap/blob/master/demoapp/js/src/views/crud/RowsView.js](https://github.com/opensas/BackboneBootstrap/blob/master/demoapp/js/src/views/crud/RowsView.js)

# javascript - JS - 使用当前窗口大小设置窗口高度

> ID：14505224
> 
> 赞同：6
> 
> 时间：2013-01-24T15:44:59.217
> 
> 标签：javascript, css, height, document-body

我有一些 CSS 需要设置主体的高度，但这需要根据用户来完成。

我编写了一些有效的代码 - 它计算窗口高度，但不会改变车身高度。我究竟做错了什么？

```
function setWindowHeight(){
    var windowHeight = window.innerHeight;
    document.getElementsByTagName('body').style.height = windowHeight + "px";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T15:52:16.957

您需要添加一个 eventListener，并且不需要使用 getElementsByTagName，因为只有 1 个 body 标签：

```
function setWindowHeight(){
    var windowHeight = window.innerHeight;
    document.body.style.height = windowHeight + "px";
    console.log(document.body.style.height);
}
window.addEventListener("resize",setWindowHeight,false); 
```

或者，如果你想使用，你可以这样做：

```
function setWindowHeight(){
    var windowHeight = window.innerHeight;
    document.getElementsByTagName('body')[0].style.height = windowHeight + "px";
    console.log(document.body.style.height);
//---------------------------------------´
//will get the first element tagged body
}
window.addEventListener("resize",setWindowHeight,false); 
```

**编辑（更改了上面的代码）：**您可以在 Firefox 控制台中检查该值。打开它（CTRL + SHIFT + K）并调整窗口大小，当你这样做时，你会看到事件*resize*被触发。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T15:53:40.567

```
try this may work 

document.getElementsByTagName('body').height  = windowHeight + "px"; 
```

# scala - Play 上的代码覆盖率！项目

> ID：14505229
> 
> 赞同：6
> 
> 时间：2013-01-24T15:45:12.577
> 
> 标签：scala, playframework-2.0, code-coverage, sbt, scct

我有戏！我想在其中添加一些代码覆盖率信息的项目。到目前为止，我已经尝试过[JaCoCo](https://bitbucket.org/jmhofer/jacoco4sbt/wiki/Home)和[scct](http://mtkopone.github.com/scct/)。前者的问题是它基于字节码，因此它似乎会警告缺少对 Scala 编译器自动生成的方法的测试，例如`copy`or `canEqual`。scct 似乎是一个更好的选择，但无论如何我在测试两者时都会遇到很多错误。

让我坚持使用 scct。对于尝试连接到数据库的每个测试，我基本上都会出错。我的许多测试将一些固定装置加载到内存中的 H2 数据库中，然后做出一些断言。我的`Global.scala`包含

```
override def onStart(app: Application) {
    SessionFactory.concreteFactory = Some(() => connection)

    def connection() = {
        Session.create(DB.getConnection()(app), new MySQLInnoDBAdapter)
    }
} 
```

而测试通常包含在一个块中

```
class MySpec extends Specification {
    def app = FakeApplication(additionalConfiguration = inMemoryDatabase())

    "The models" should {
        "be five" in running(app) {
            Fixtures.load()
            MyModels.all.size should be_==(5)
        }
    }
} 
```

该行`running(app)`允许我在连接到内存数据库的工作应用程序的上下文中运行测试，至少通常如此。但是当我运行代码覆盖任务时，例如 scct `coverage:doc`，我得到了**很多**与连接数据库相关的错误。

更奇怪的是至少有 4 个不同的错误，比如：

*   ObjectExistsException：缓存播放已存在
*   SQLException: 试图从已关闭的池中获取连接
*   配置错误[无法连接到数据库[默认]]
*   找不到适合 jdbc:h2:mem:play-test--410454547 的驱动程序

> 为什么在默认配置中启动测试能够连接到数据库，而在 scct（或 JaCoCo）的上下文中运行无法初始化缓存和数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:25:29.347

specs2 测试默认并行运行。Play 禁用标准单元测试配置的并行执行，但 scct 使用不同的配置，因此它不知道不并行运行。

尝试将此添加到您的 Build.scala 中：

```
.settings(parallelExecution in ScctPlugin.ScctTest := false) 
```

或者，您可以添加`sequential`到测试类的开头以强制所有可能的运行配置按顺序运行。我的文件中仍然存在这两个问题，因为我认为在使用 Play 的早期发布候选版本时，Build.scala 解决方案存在一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T21:04:22.220

Scala 代码覆盖的更好选择是 Scoverage，它提供语句行覆盖。 [https://github.com/scoverage/scalac-scoverage-plugin](https://github.com/scoverage/scalac-scoverage-plugin)

添加到项目/plugins.sbt：

```
addSbtPlugin("com.sksamuel.scoverage" % "sbt-scoverage" % "1.0.1") 
```

然后运行 ​​SBT

```
sbt clean coverage test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T09:55:22.740

您需要在规范的开头添加顺序。

```
class MySpec extends Specification {
  sequential

  "MyApp" should {
  //...//
  }

} 
```

# c - CvLoadImage 函数和列表

> ID：14505231
> 
> 赞同：0
> 
> 时间：2013-01-24T15:45:18.127
> 
> 标签：c, list, opencv, path

我正在使用 CvLoadImage（在 C 编程语言中）。

我可以使用包含我要打开的每个图像的每个路径的列表（动态结构），而不是传递我的路径或名称，比方说，`.jpg`文件作为函数的参数吗？`.jpg`

例如，我认为代码是这样的：

`CvLoadImage(list->name)`

有一个声明了所有名称路径的列表。

而不是这样：`CvLoadImage("name.jpg")`

在我阅读的每本手册中，它只是指定函数接收**一个**图像的名称或路径，但我想递归地打开一个图像，这些路径来自列表，我不知道该怎么做.

这是我能做的（有些东西是西班牙语，因为我们说西班牙语，而其他一些东西与文件混在一起）

```
struct fotos
{
  char nom[30];
  struct fotos *sig;
};
//....
struct fotos *lini;
//....

while(lini->sig!=0)
  {
    image=cvLoadImage(lini->nom,1);
    cvNamedWindow("ejemplo", 0);
    cvMoveWindow("ejemplo", 100, 100);
    cvShowImage("ejemplo", image);
    cvWaitKey(0);
    lini=lini->sig;
  }
  image=cvLoadImage(lini->nom,1);
  cvNamedWindow("ejemplo", 0);
  cvMoveWindow("ejemplo", 100, 100);
  cvShowImage("ejemplo", image);
  cvWaitKey(0);
  cvReleaseImage(&image); 
```

但这也行不通。它创建一个新窗口，但没有加载图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:12:30.580

我自己没有使用过 CvLoadImage() ，但是快速的谷歌搜索显示它有一个表单原型：

```
IplImage* cvLoadImage( const char* filename, int iscolor=CV_LOAD_IMAGE_COLOR ); 
```

该函数显然设计为采用一个，并且只有一个文件名。它将文件加载到内存中并返回一个指向它加载它的位置的指针，或者返回 NULL 表示错误。

如果要加载多个文件，则需要重复调​​用该函数，每个文件一个。您可能会考虑的一件事是设置一个指向 char 的指针数组：

```
void load_images(void)
{
    int i;  /* Used for looping */

    /* Array of filenames */
    char *filenames[4] = {
        "/path/to/image0.jpg",
        "/path/to/image1.jpg",
        "/path/to/image2.jpg",
        "/path/to/image3.jpg",
    };

    /* Array to store the addresses of the loaded files */
    IplImage *file_addresses[4];

    for (i = 0; i < 4; i++) {
        file_addresses[i] = cvLoadImage(filenames[i], CV_LOAD_IMAGE_COLOR);        
    }

    /* The address of image number N, where N starts at zero
       is now in file_addresses[N]. Don't forget to check that
       any given address is not NULL before you use it, in case
       there was a loading error */
} 
```

您可以轻松地将数组替换为链表或您喜欢的任何其他数据结构。您还可以修改函数以接收指向要填充的列表的指针，或返回指向它创建的新列表的指针等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:51:26.117

你基本上拥有的应该是形式

```
class list
{
    element* begin;
} MyList;

class element
{
    char name[200];
    element* next;
};

//    and you can iterate through the list like that:

    for (element* it = MyList->begin; it != NULL; it = it->next)
    {
         IplImage* img = cvLoadImage(it->name);
         doSomethingElseOn(img);
    } 
```

# c# - 如何将 csv 文件读入文本框？

> ID：14505233
> 
> 赞同：0
> 
> 时间：2013-01-24T15:45:23.460
> 
> 标签：c#

我是编程新手，我想将 csv 文件读入表单上的文本框中。现在我正在将文件读入数据表，并认为我会将其读入 texboxes，但我不确定我是否正确。有没有更简单的方法来做到这一点？这是我到目前为止所拥有的：

```
protected void getftp()
{

   //create Data table to temporary storage
   var myTable = new DataTable();

   //add columns
   myTable.Columns.Add("Start_date");
   myTable.Columns.Add("End_date");
   //...snip...
   myTable.Columns.Add("Comments");

   //The 'using' command close connection when it is done
   using (var reader = new StreamReader(File.OpenRead(@"C:\ftp\inbox\test.csv")))
   {
      while (!reader.EndOfStream)
      {
         //read in one line of the file
         string line = reader.ReadLine();

         //create an array of strings from each value in the current line
         string[] values = line.Split(',');

         //add the array as a row in the DataTable
         myTable.Rows.Add(values);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:50:58.267

请参阅以下链接。它显示了使用 CSV 格式[http://www.codeproject.com/Articles/30705/C-CSV-Import-Export的基础知识](http://www.codeproject.com/Articles/30705/C-CSV-Import-Export)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:51:37.773

这是另一个关于在 .NET 中读取 CSV 文件的 SO 问题：

[在 .NET 中读取 CSV 文件？](https://stackoverflow.com/questions/1405038/reading-csv-files-in-net)

这个[特定的答案](https://stackoverflow.com/a/1405116/463196)引用了 2 个 CSV 阅读器。您可以使用这些读取 CSV 文件，然后在您的 Windows 窗体（或 Web 窗体或 ASPX 或 Razor 页面，您没有指明您的前端）上的文本框中设置值。

我建议重用这些项目之一，而不是重新发明轮子并滚动您自己的 CSV 解析器。用 C# 编写很容易，但是读取/解析 CSV 文件是一个已经解决了很多次的问题。

# mysql - MySQL 查询似乎忽略了存储函数中 WHERE 语句的一部分

> ID：14505234
> 
> 赞同：2
> 
> 时间：2013-01-24T15:45:27.407
> 
> 标签：mysql, function, field, where

我对 MySQL 中的存储函数有一个非常令人沮丧的问题。我有一个数据库，其中包含来自连接到无线热点的用户的会话数据。我正在尝试从选定月份内选择单个用户下载统计信息。我的问题是函数中的子查询似乎忽略`mac`了 WHERE 语句中的字段。这是我的代码：

```
CREATE FUNCTION get_month_download(mo varchar(45), box int(11), mac varchar(45))   RETURNS DOUBLE
BEGIN
    DECLARE dwnld double;
    IF mo IS NULL THEN
        SET mo := CONCAT(CONCAT(YEAR(NOW()), '-', MONTH(NOW())),'-','01');
    END IF;
    SET dwnld := (
        SELECT SUM(`tx_bytes`) 
        FROM `session` 
        WHERE `assoc_time` > UNIX_TIMESTAMP(mo) 
        AND `disassoc_time` < UNIX_TIMESTAMP(DATE_ADD(mo, INTERVAL 1 MONTH))
        AND `mac` = mac
        AND `controller_id` = box
    );
    return dwnld;
END 
```

运行这个：

```
SELECT get_month_download('2012-09-01', '2', '00:21:5c:56:be:a3'); 
```

返回整个表的下载数据，尽管它使用`controller_id`过滤数据。

如果我使用相同的参数在函数外部运行子查询，它工作正常。是什么赋予了？

更清楚地说，运行这个查询：

```
SELECT SUM(`tx_bytes`) 
FROM `session` 
WHERE `assoc_time` > UNIX_TIMESTAMP('2012-09-01') 
AND `disassoc_time` < UNIX_TIMESTAMP(DATE_ADD('2012-09-01', INTERVAL 1 MONTH))
AND `mac` = '00:21:5c:56:be:a3'
AND `controller_id` = '2'; 
```

返回该用户的正确下载统计信息。该函数返回该控制器的所有用户的统计信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:51:07.467

你确定有不止一份`controller_id`礼物吗？

```
SELECT DISTINCT controller_id FROM session 
```

此查询获取了多少条记录？

如果这只获取一条记录，并且对应于 box = 2，则没有问题。

如果有多个控制器 ID，请运行此查询，

```
SELECT COUNT(1), controller_id 
FROM session 
WHERE assoc_time > '2012-01-01' 
AND disassoc_time < '2012-01-31'
AND mac = '00:21:5c:56:be:a3'
GROUP BY controller_id 
```

这会返回多少行？如果它只返回一个 controller_id 2 的记录，则没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:46:58.437

我真的应该更经常地反思我的老师在大学里教给我的东西。问题是在 select 语句的范围内，变量`mac`被视为表中的一个字段，而不是函数中的我的参数。因此，更改参数名称解​​决了这个问题：

```
CREATE FUNCTION get_month_download(mo varchar(45), box int(11), inmac varchar(60)) RETURNS DOUBLE 
BEGIN  
    DECLARE dwnld double;
    IF mo IS NULL THEN
        SET mo := CONCAT(CONCAT(YEAR(NOW()), '-', MONTH(NOW())),'-','01');
    END IF;
    SET dwnld := (
        SELECT SUM(`tx_bytes`)   
        FROM `session`    
        WHERE `assoc_time` > UNIX_TIMESTAMP(mo)    
        AND `disassoc_time` < UNIX_TIMESTAMP(DATE_ADD(mo, INTERVAL 1 MONTH))      
        AND `controller_id` = box
        AND `mac` = inmac
    );
     return dwnld; 
END 
```

这是一个“打脸”的时刻。感谢大家的帮助。

# apache - Apache 虚拟主机站点无法访问

> ID：14505247
> 
> 赞同：0
> 
> 时间：2013-01-24T15:46:06.323
> 
> 标签：apache, virtual, hosts

我正在设置具有多个虚拟主机的专用服务器。DNS 已正确注册...

```
$ ping mydomain.com
$ ping 8.8.8.8 (for example) 
```

两者都按预期返回 IP 地址并且它是正确的。

我的 httpd.conf 文件的最后一行是：

`Include /etc/httpd/sites-enabled/`

mydomain.com.conf 的内容（在上面的文件夹中）是：

```
<VirtualHost 8.8.8.8:80>
    ServerName  mydomain.com
    ServerAdmin jongosi@mydomain.com

    # Indexes + Directory Root
    VirtualDocumentRoot /var/www/html/mydomain.com
    DocumentRoot /var/www/html/mydomain.com
    <Directory "/var/www/html/mydomain.com">
        Options FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我怀疑防火墙干扰了访问，所以我禁用了它：

`$ /etc/init.d/iptables stop`

该服务器正在运行具有最新 LAMP 堆栈的 CentOS 6 64 位。

尝试访问`http://www.mydomain.com/`浏览器中的地址或 IP 地址都会导致最终超时。任何的意见都将会有帮助。谢谢！

* * *

**编辑 1**

运行`apachectl -S`返回...

```
VirtualHost configuration:
8.8.8.8:80        mydomain.com (/etc/httpd/sites-enabled/mydomain.com.conf:6)
Syntax OK 
```

* * *

**编辑 2**

在 Chrome 检查器中的请求之后返回 204 标头响应。

```
204 No Content
    The server successfully processed the request, but is not returning any content. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:31:43.760

## 解决了

我的托管服务提供商已将他们的硬件防火墙配置为仅允许通过端口 22 (SSH) 的流量。为什么我不希望我的网站上有流量。

`$_hosting_provider = "In.sane";`

# asp.net-mvc - asp.net mvc4中的弹出对话框发生了什么

> ID：14505251
> 
> 赞同：1
> 
> 时间：2013-01-24T15:46:24.133
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我对 mvc 相当陌生，我在 mvc4 仍处于测试阶段时尝试过它。我记得当我开始一个新的互联网项目时，默认情况下会弹出一个登录和注册对话框。我不再看到当我开始一个新项目时，它是否从互联网项目中消失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:54:34.097

我相信您所指的弹出对话框只是示例项目曾经使用的 jQuery UI 对话框：

![对话](../Images/9eba46ccdfa8704e4f3c2d5d8dc2f186.png)

该项目旨在支持直接请求`/Login`和通过 jQuery UI 对话框进行的请求，该对话框被精简为看起来只是一个弹出窗口。它通过使 `Login`操作返回一个不同`View`的值来实现这一点，具体取决于它是通过框架请求还是不是由查询字符串中的值检测到的。

您当然可以再次使用它，您只需要手动操作（或挖掘出其中一个旧模板），因为它不再位于默认模板中。

为了帮助您，这里有几个相关的问题，其中包含示例代码（`ContextDependentView`这是我从这个模板中记得的一件事），可能还有一些关于如何重新创建它的提示：

1.  [使用 MVC4 生成模态 jQuery 局部视图不起作用](https://stackoverflow.com/questions/9294999/generating-a-modal-jquery-partial-view-with-mvc4-does-not-work)
2.  [ASP.NET MVC 4 和 ContextDependentView](https://stackoverflow.com/questions/9594355/asp-net-mvc-4-and-contextdependentview)
3.  [MVC4 - ContextDependentView - 这是什么意思？](https://stackoverflow.com/questions/9096735/mvc4-contextdependentview-what-does-it-mean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:49:02.200

在 MVC 4 的最终版本中，它已从 Internet 项目模板中删除。弹出窗口非常漂亮，但我想他们决定通过保留用于登录和注册的视图/页面来消除问题/复杂性。在具有弹出窗口的旧版本中，由于基于表单的身份验证的工作方式，它们仍然具有用于登录的视图/页面。如果用户未对网站/页面进行身份验证/授权，则 MVC 会重定向到登录页面。这不适用于同一页面上的 JQuery 弹出对话框。仅当您单击页面的登录链接时，弹出窗口才有效。我猜他们决定是因为他们无论如何都需要视图/页面登录来简化事情并通过消除弹出对话框来保持一致。

我已经实现了一个 MVC[单页应用程序 (SPA)](http://en.wikipedia.org/wiki/Single-page_application)，它只使用一个 JQuery 对话框来弹出一个登录对话框，并且不需要登录页面。但它需要对服务器上的身份验证/授权过程进行大量定制，并在客户端使用[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)。

# git - 回滚错误的推送到 master

> ID：14505252
> 
> 赞同：0
> 
> 时间：2013-01-24T15:46:26.183
> 
> 标签：git

我是 Git 新手，想先创建一个分支并将我的更改推送到它，但不小心我只是将我的更改推送到了整个 master。现在我该如何回滚这些更改？

我可以使用下图中的这些按钮吗？

图片在这里，我是新来的所以我不能直接上传：

[http://i49.tinypic.com/1zyu250.png](http://i49.tinypic.com/1zyu250.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:49:19.293

由于您已经将提交发送到远程存储库，因此您应该使用 revert。它将创建一个新的提交来还原您所做的更改。要使用它，您需要传递要恢复更改的提交的哈希：

```
git revert commit-hash 
```

如果要从存储库中删除提交，可以使用 git reset 将存储库恢复到错误提交之前的状态。为此，您需要在错误提交之前提交的哈希：

```
git reset --hard commit-hash 
```

这也将删除在错误提交后所做的所有更改。要从远程存储库中删除提交，您需要将选项 -f 传递给，`git push`因为您正在更改存储库历史记录：

```
git push -f 
```

# google-app-engine - 如何计算 GAE 计费？

> ID：14505254
> 
> 赞同：1
> 
> 时间：2013-01-24T15:46:31.150
> 
> 标签：google-app-engine

假设我每天向我的 gae blobstore 上传 1GB（1 GB）数据。如何计算第一年年底的存储成本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:54:47.037

到年底，您将拥有 365GB，这将花费您每月每 GB 0.13 美元（[以今天的价格计算](https://developers.google.com/appengine/docs/billing)），仅对于 blob 存储，您每月需要支付 47.45 美元（每天约 1.5 美元）。

# ruby-on-rails - 引导响应损坏

> ID：14505257
> 
> 赞同：2
> 
> 时间：2013-01-24T15:46:40.770
> 
> 标签：ruby-on-rails, twitter-bootstrap

克隆我的 git repo 后，我的应用程序坏了。我将它（删除了 bootstrap_and_overrides.css.less ）修复到我现在可以实际看到页面的地步，但下拉列表和选项卡已损坏。这让我认为，由于某种原因，没有加载引导响应。以下是我认为的罪魁祸首。

**宝石文件**

```
gem 'rails', '~> 3.2.6'
gem 'bootstrap-sass', '~> 2.0.4.0'
gem 'less', '~> 2.2.0' 
```

**应用程序.js**

```
//= require bootstrap
//= require_tree .
//= require jquery_ujs
//= require jquery-ui 
```

**bootstrap_and_overrides.css.scss**

```
$iconSpritePath: image-path('/glyphicons-halflings.png'); 
$iconWhiteSpritePath: image-path('glyphicons-halflings-white.png'); 
$navbarBackground: #555; 
$navbarBackgroundHighlight: #888; 
$navbarText: #eee; 
$navbarLinkColor: #eee; 

@import "bootstrap"; 
body { padding-top: 60px; } 
@import "bootstrap-responsive"; 
```

哎呀，请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:54:29.010

卸载旧 gem`'bootstrap-sass', '~> 2.0.4.0'`并安装新版本`gem "bootstrap-sass", "~> 2.2.2.0"`

如果您的应用程序的某些内容被破坏，您必须更改您的 css 代码，`bootstrap_and_overrides.css`例如：

```
// Set the correct sprite paths
$iconSpritePath: asset-url('glyphicons-halflings.png', image);
$iconWhiteSpritePath: asset-url("glyphicons-halflings-white.png", image);

@import "bootstrap";

/* new design.................................................................................*/ 
```

如果您之前自定义了此文件，则您已从`bootstrap_and_overrides.css`文件中恢复每个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:30:06.990

我认为您看到引导 javascript 组件无法正常工作。

这是因为 bootstrap 的 js 组件依赖于 jQuery，并且这些组件是*在*bootstrap 之后包含的，而不是之前。更改包含顺序（并包括 jquery）：

**应用程序.js**

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require bootstrap
//= require_tree . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:08:23.093

如果有人遇到这个问题，我终于找到了答案，希望它会有所帮助。发生的事情是我包含了两次加载的 bootstrap-responsive.css。它已经包含在我的 bootstrap_and_overrides.css.scss 文件中。我删除了不需要的额外css文件并且blamo它可以工作。

# iphone - 自定义弹出框背景问题

> ID：14505259
> 
> 赞同：0
> 
> 时间：2013-01-24T15:46:49.257
> 
> 标签：iphone, ios, ipad, background, uipopovercontroller

我制作了一个包含带有一些背景的分段 tableView 的弹出框。我想删除那条细的垂直边界线，它存在于两个部分之间的两侧。

![在此处输入图像描述](../Images/03c11da24970c2d22fbf71818b3a5d5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:56:49.730

将`view`背景颜色或图像设置为您的自定义颜色/图像，然后将`tableview`背景设置为零。它应该工作。

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

         //background image
        self.view.backgroundColor= [UIColor clearColor];
        self.view.backgroundColor=[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"yourimage.png"]];

        //table background image, mytableview should be your tableView's name you can try self.tableView if you have not set/delegate anything to it.
        self.mytableView.backgroundView = nil;
} 
```

# eclipse - 您可以在 Eclipse 中运行 xmllint 来验证 xml 和 dtd 文件吗？

> ID：14505265
> 
> 赞同：0
> 
> 时间：2013-01-24T15:47:17.800
> 
> 标签：eclipse, xml-parsing, dtd, xmllint, motodev-studio

是否可以在 Eclipse 或 Motodev 中运行 xmllint？如果是这样，有人可以告诉我吗？我想验证我的 DTD 和 XML 文件。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T02:57:21.863

使用以下步骤在 Eclipse 中运行 xmllint：

*   点击`Run > External Tools > External Tools...`
*   选择`Program` 配置
*   点击`New` 按钮
*   输入外部工具的名称（在本例中为 xmllint）
*   点击`Browse File System` 按钮
*   找到 xmllint 可执行文件
*   在该`Arguments` 字段中，输入必要的参数（XML 文件名）
*   在`Working Directory` 字段中输入工作目录（XML 文件路径）
*   单击运行

[Ant](http://wiki.eclipse.org/FAQ_How_do_I_add_my_own_external_tools%3F)可以[配置](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-tools/)为自动运行这些步骤以供将来参考。

**参考**

*   [Workbench 用户指南 > 概念 > Ant 和外部工具](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm)

# vb.net - 在 Excel 工作表中执行宏

> ID：14505267
> 
> 赞同：0
> 
> 时间：2013-01-24T15:47:24.773
> 
> 标签：vb.net, vba, excel, openxml, openxml-sdk

我想在我从代码创建的 Excel 工作表中执行一个宏（用于格式化工作表的 VBA 代码）。我现在使用的方法是将宏放入`workbook_open` 事件中并从代码中打开 Excel 工作表。这会应用格式，我稍后会保存它。但这大大减慢了这个过程。

我想知道是否可以使用 DocumentFormat.OpenXml SDK 或其他一些 .net 类执行宏，而无需实际打开 excel 文件，从而提高性能。

我浏览了很多互联网资料，但都是徒劳的。也许我太喜欢它了，我只是忽略了一个非常简单的解决方案。好心提醒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:59:37.377

我只想指出以供参考。对于任何寻求答案的人来说，蒂姆的评论就是这个问题的答案。我无法将评论标记为答案，所以只需重新编写即可。将其标记为答案，直到我找到更好的方法。

*如果要对其进行格式化，则必须打开文件...* – Tim Williams

# knockout.js - Kendo-Knockout: Uncaught TypeError: Cannot read property 'kendo' of undefined when using knockout

> ID：14505269
> 
> 赞同：2
> 
> 时间：2013-01-24T15:47:34.353
> 
> 标签：knockout.js, kendo-ui, jsfiddle

我正在使用 kendo-2.2.1.js，kendo 版本 2012.3.1114 和 v0.5.0 版本的 kendo-knockout 库。我在 kendo-knockout 库中的小提琴中收到以下错误：

`Uncaught TypeError: Cannot read property kendo of undefined`

[http://jsfiddle.net/wBCdK/21/](http://jsfiddle.net/wBCdK/21/)

在我的项目中，一切都很好，我使用的是相同的版本。难道我做错了什么 ？如果问题出在库的版本中，也许有人会提供更新的小提琴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T15:58:43.347

看起来只是订单有问题。Knockout-Kendo 需要在 Knockout 和 Kendo 之后出现。

```
knockout
kendo
knockout-kendo 
```

淘汰赛和剑道的顺序无关紧要。

这是一个更新的示例：http: [//jsfiddle.net/rniemeyer/2Qnv7/](http://jsfiddle.net/rniemeyer/2Qnv7/)

# version-control - 我如何从多台机器上进行开发？

> ID：14505280
> 
> 赞同：-3
> 
> 时间：2013-01-24T15:48:28.320
> 
> 标签：version-control, github-for-windows

克隆是我将自己的存储库转移到另一台机器的唯一方法吗？

我已经从我的家用 PC 发布了我的存储库，并正在尝试从另一台 PC 对其进行编辑。

我正在使用适用于 Windows 的 Github，但看不到如何将已发布的存储库放到第二台机器上，以便编辑代码并重新发布更改，以便以后可以在原始 PC 上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:49:56.943

正确的方法是直接从源代码（Github）将存储库克隆到您的第二台机器上。不建议在多台机器之间共享一个克隆，除非在少数情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:51:45.707

分布式版本控制系统的一般方法是：

1.  克隆存储库（从服务器）
2.  更新您的代码（本地，在您的工作目录中）
3.  提交代码（本地，在您的工作目录中）
4.  推送提交（到服务器）
5.  将新的提交（从服务器）拉到另一台开发 PC。

典型的开发周期在第 2 步和第 3 步之间迭代。有时是 4 步（将您的更改存储在异地）和 5 步（获取其他人所做的更改）。

因为我认为“Github for Windows”使用 git(hub)，它也是一个 DVCS，并且也适用于这些步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:36:36.113

解决。我不得不删除本地存储库。然后 Github 提示我一个错误并选择“再次克隆”，这个克隆再次起作用。

谢谢。

# xml - 使用 XSD 验证 XML 数据

> ID：14505284
> 
> 赞同：0
> 
> 时间：2013-01-24T15:48:44.543
> 
> 标签：xml, validation, xsd

我有一个非常大的 XML 文件，其中包含一些错误的日期（即 1-11-1012、11-32-1525），这会导致处理失败。我刚刚收到 XML 文件的 XSD 架构副本。基本上我希望能够使用 XSD 向我显示 XML 文件中的错误日期，这是一个现实的期望吗？如果是这样，有人可以指出我正确的方向吗？我可以使用任何工具来完成此任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:12:13.007

XSD 中定义的标准 xs:date 类型需要 ISO 日期格式 YYYY-MM-DD，而您的日期似乎是 MD-YYYY 格式。使用标准 XSD 机制来验证这些日期并不容易。一种选择是在验证之前对数据应用转换；转换应将日期从 MD-YYYY 形式转换为 YYYYY-MM-DD。另一种方法可能是 Saxon 的 XSD 1.1 实现中的 saxon:preprocess 扩展 - 这有效地允许您扩展或限制数据类型的词法空间而不更改其值空间。请参阅[http://www.saxonica.com/documentation9.4-demo/index.html#!schema-processing/extensions11/preprocess](http://www.saxonica.com/documentation9.4-demo/index.html#!schema-processing/extensions11/preprocess)

# ruby-on-rails - 你如何检查你的 gemfile.lock 到版本控制？

> ID：14505286
> 
> 赞同：0
> 
> 时间：2013-01-24T15:48:47.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu-12.04, vps, linode

通过 Capistrano/Unicorn 将我的 Rails 应用程序部署到 Linode 时，运行此命令“bundle exec cap deploy:cold”时会出现错误：

```
 The --deployment flag requires a Gemfile.lock. Please make sure you have checked your       Gemfile.lock into version control before deploying.
command finished in 495ms
 *** [deploy:update_code] rolling back 
```

我四处寻找，似乎找不到解决方案。有谁知道任何解决方案？你如何检查你的 gemfile.lock 到版本控制

[https://github.com/Ruekompa/itcinema.git](https://github.com/Ruekompa/itcinema.git)

经过一段时间运行无数命令和尝试后，我现在注意到 /home/USERNAME/apps/APPNAME 中有一个名为 cached-copy 的文件夹，它包含我的应用程序。

更新：我已经修复了一切。我只是在 linode 上重建了 ubuntu 服务器并重新开始。这次我的部署奏效了。谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:03:18.507

我已经修复了一切。我只是在 linode 上重建了 ubuntu 服务器并重新开始。这次我的部署奏效了。我将 Ubuntu 12.04 更改为 10.04。也许这是我的 capistrano 食谱中的某些东西，因为我在使用 10.04 的其他人的代码中背靠背。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:06:19.390

您是否将 Gemfile.lock 添加到您的存储库？

你可以添加它

```
# in your app root dir
git add Gemfile.lock
git commit -m "Added Gemfile.lock to repository" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:30:11.567

编辑

您是否运行了以下命令？

```
bundle install --deployment 
```

# java - 无法在类路径中添加 odbc5.jar

> ID：14505287
> 
> 赞同：0
> 
> 时间：2013-01-24T15:48:47.220
> 
> 标签：java, playframework, playframework-1.x

我想使用 Play Framework 1.2.5 连接到 oracle 数据库。为此，我修改了`application.conf`文件如下：

```
 db.url=jdbc:oracle:thin:@localhost:1521/orcl
 db.driver=oracle.jdbc.OracleDriver
 db.user=system
 db.pass=tiger 
```

然后我尝试添加驱动程序 ie `classes12.jar`/`odbc5.jar`但每次尝试运行它时，我都会遇到异常：

`Cannot connect to the database, Driver not found`

为了在 Eclipse IDE 中添加 jar 文件，以下是我尝试的步骤：

1）将其添加到 lib 文件夹中（位于我的新应用程序的根目录下），然后将其添加到`java build path`

2）将其添加到framework/lib文件夹中（在下载的framework文件夹内），然后将其添加到`java build path`

在这两种情况下，我都得到了上述异常。

另外，请列出连接到 oracle db 的步骤，我无法在文档中的任何地方找到它

**编辑**

我可以在类路径中添加 jar，一切都很好，只是在连接 jar 失败后我没有重新启动服务器。

我做了这段代码来从数据库中获取一些数据：

```
Connection conn = DB.getConnection();
    PreparedStatement  stmt = null;
    System.out.println(conn);
    try {
        stmt = conn.prepareStatement("select dept_id from emp where emp_id = 11");
        ResultSet rs = stmt.executeQuery();
        while (rs.next()) {
            System.out.println("Dept Id: " + rs.getInt("dept_id"));
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这种方法有效，但我很困惑：

如果我注释整个代码块并运行应用程序，那么我可以在控制台中看到消息，说明已与数据库建立连接。因此 ：

1) 上面的代码块是从 Oracle DB 获取数据的正确方法还是比这更好的方法？

2）在整个应用程序生命周期中，与数据库的连接是否会持续存在？

我是这方面的新手，因此苦苦挣扎:(

请让我知道锄头继续这个。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:51:12.277

Oracle db 驱动程序类名是`oracle.jdbc.driver.OracleDriver`

# c++ - 将向量初始化添加到结构构造函数

> ID：14505294
> 
> 赞同：3
> 
> 时间：2013-01-24T15:49:07.130
> 
> 标签：c++, struct

我有一个结构如下：

```
struct octNode{
octNode* parent;
octNode* child[8];
std::vector<int> pointIndex;
//constructor of the struct
octNode()
{ 
      memset(parent,0,sizeof(parent));
      memset(child,0,sizeof(child));
}
}; 
```

但这会引发运行时错误：0xC0000005：访问冲突写入位置 0xcdcdcdcd。Octree_octnode_0113.exe 中 0x771115de 处的未处理异常：0xC0000005：访问冲突写入位置 0xcdcdcdcd。

访问冲突发生在空向量的创建中。有没有办法在构造函数中初始化向量，以免发生错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:50:41.123

在下面的

```
 memset(parent,0,sizeof(parent)); 
```

您将一个未初始化的指针传递给`memset()`. 你的意思是说：

```
 memset(&parent, 0, sizeof(parent)); 
```

或者，很简单

```
 parent = NULL; // or nullptr 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:53:37.733

此行导致使用未初始化的指针：

```
memset(parent,0,sizeof(parent)); 
```

您应该将其设置为`NULL`：

```
parent = NULL; 
```

（或者更好的是，在初始化列表中这样做：）

```
octNode() : parent(NULL)
{ 
      memset(child,0,sizeof(child));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:03:16.467

代码应该说：

```
struct octNode{
    octNode* parent;
    octNode* child[8];
    std::vector<int> pointIndex;
    //constructor of the struct
    octNode()
    : parent(NULL) // maybe nullptr ?
    , pointIndex()
    { 
        std::fill_n(child, 8, NULL); // nullptr?
    }
}; 
```

# c# - 什么是编程语言的反射属性？

> ID：14505297
> 
> 赞同：8
> 
> 时间：2013-01-24T15:49:18.627
> 
> 标签：c#, java, reflection, programming-languages

它说大多数高级动态类型语言都是自反的。[维基百科上的反射（计算机编程）](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)解释说，但它并没有真正清楚地说明它的含义。任何人都可以通过相关示例以更简单的方式解释它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:49:02.437

举个例子，如何以实际的方式使用反射：

假设您正在开发一个您想使用插件扩展的应用程序。这些插件是简单的程序集，只包含一个名为 Person 的类：

```
namespace MyObjects
{
    public class Person
    {
        public Person() { ... Logic setting pre and postname ... }
        private string _prename;
        private string _postname;
        public string GetName() { ... concat variabes and return ... }
    }
} 
```

好吧，插件应该在运行时扩展您的应用程序。这意味着，当您的应用程序已经运行时，应该从另一个程序集中加载内容和逻辑。这意味着这些资源不会编译到您的程序集中，即 MyApplication.exe。假设它们位于库中：MyObjects.Person.dll。

您现在面临这样一个事实，即您需要提取此信息，例如从 MyObjects.Person 访问 GetName() 函数。

```
// Create an assembly object to load our classes
Assembly testAssembly = Assembly.LoadFile(Application.StartUpPath + @"MyObjects.Person.dll");
Type objType = testAssembly.GetType("MyObjects.Person");

// Create an instace of MyObjects.Person
var instance = Activator.CreateInstance(objType);

// Call the method
string fullname = (string)calcType.InvokeMember("GetName",
BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public,
null, instance, null); 
```

如您所见，您可以使用 System.Reflection 在运行时动态加载资源。这可能有助于理解您可以使用它的方式。

查看此[页面](http://www.csharp-examples.net/reflection-examples/)以查看如何更详细地访问程序集的示例。和我写的内容基本一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T10:40:06.693

为了更好地理解反射，**请考虑评估程序的解释器**。解释器是一个评估其他程序的程序。

该程序可以（1）检查和（2）修改其（a）自己的状态/行为，或运行它的干预者的状态/行为（b）。

然后有四种组合。以下是每种操作的示例：

*   1a -- 读取对象具有的字段列表
*   2a -- 根据字段名称修改一个字段的值；方法的反射调用。
*   1b -- 检查当前堆栈以了解当前执行的方法是什么
*   2b -- 修改堆栈或语言中某些操作的执行方式（例如消息发送）。

a 型称为结构反射。b型称为行为反射。类型 a 的反射在语言中很容易实现。b 类型的反射要复杂得多，尤其是 2b——这是一个开放的研究课题。大多数人通过反思理解的是1a和2a。

*理解具体化*的概念以理解反射是很重要的。当解释程序中的语句被评估时，解释器需要表示它。解释器可能具有对要解释的程序的字段、方法等进行建模的对象。毕竟，解释器也是一个程序。通过反射，解释程序可以获得对解释器中表示其自身结构的对象的引用。这是物化。（下一步是了解*因果关系*）

反射特征有很多种，有时很难理解什么是反射，什么不是反射，以及它的含义。从程序和解释器的角度思考。我希望它能帮助您理解维基百科页面（可以改进）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T10:33:18.023

反射是查询您在运行时编写的程序的元数据的能力，例如：在程序集中找到哪些类，这些类包含哪些方法、字段和属性等等。

.net 甚至包含“属性”，这些是您可以用它们装饰的类、方法、字段等，它们的所有目的都是添加您可以在运行时查询的自定义元数据。

很多时候细节仅取决于元数据。在验证时，我们不关心 string 或 int，但我们关心它不应该为 null。因此，在这种情况下，您需要在不关心特定类的情况下检查属性或属性。图片中有反射。同样，如果您喜欢动态生成方法（在 C# 4.0 的动态对象中可用），也可以使用反射。基本上，它有助于进行行为驱动或面向方面的编程。

另一个流行的用途是测试框架。他们使用反射来寻找在代理环境中测试和运行它的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:34:19.783

这是编程语言根据运行时信息调整其行为的能力。在 .Net/C# 世界中，这经常被使用。例如，当将数据序列化为 xml 时，可以添加一个属性来指定生成的 xml 中的字段名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T10:37:34.027

对于programmers.stackexchange.com 来说，这可能是一个更好的问题。

但这基本上只是意味着您可以从代码中查看代码。

在我 VB6 的日子里，有一些 UI 对象有一个 Text 属性，而其他一些 UI 对象有一个 Description（或者除了“Text”之外的东西，我忘记了）。这很痛苦，因为我无法封装代码来以相同的方式处理这两种对象。通过反射，我至少能够查看对象是否具有 Text 或 Description 属性。

或者有时对象可能都具有 Text 属性，但它们派生自不同的基类并且没有应用任何接口。同样，如果没有反射的帮助，很难将这样的代码封装在静态类型语言中，但是通过反射，即使是静态类型语言也可以处理它。

# jquery - jQuery 最新的 $.browser

> ID：14505301
> 
> 赞同：5
> 
> 时间：2013-01-24T15:49:34.273
> 
> 标签：jquery

> **可能重复：**
> [jQuery $.browser 是否已弃用？](https://stackoverflow.com/questions/9638247/is-jquery-browser-deprecated)

最新的 jQuery 库有变化`$.browser`吗？
当我在 Firefox 中[运行此（小提琴）](http://jsfiddle.net/nalagg/taKm4/)时，我在控制台中遇到错误：`TypeError: obj is undefined`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T15:51:16.147

它被弃用了很长时间。并且自 1.9 以来已被删除。

要仍然能够使用，`$.browser`您应该添加以下 JS，或访问[github](https://github.com/jquery/jquery-migrate/)上的项目：

```
<script src="http://code.jquery.com/jquery-migrate-1.0.0.js"></script> 
```

查看版本 1.9 更改日志：
[http ://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)

[有关升级http://jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:51:30.337

您需要使用[迁移插件](https://github.com/jquery/jquery-migrate/)。[jQuery.browser](http://api.jquery.com/jQuery.browser/)在 1.3 中被弃用并在 1.9 中被删除。请阅读[升级指南](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:52:53.483

根据**[jQuery 1.8 发行说明](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)**和**[票 9835](http://bugs.jquery.com/ticket/9385)**，它已被正式弃用。

# .htaccess - 重写完整的 URL

> ID：14505302
> 
> 赞同：1
> 
> 时间：2013-01-24T15:49:36.510
> 
> 标签：.htaccess, mod-rewrite

无论如何都要重写完整的 URL，即使使用 mod-rewrite 通过 .htdocs 使用参数？

例如，如果我输入 www.example.org，它必须将我转发到 www.example.org/index.php/frontend。

有人有想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:06:17.377

您可以检查主机名，如果匹配`www.example.org`，则重定向所有内容（包括路径和任何参数，如下所示：

```
RewriteCond %{HTTP_HOST} ^www.example.org$
RewriteRule ^/(.*)$ http://example.org/index.php/frontend/$1 [L,R=301] 
```

# php - MySQL查询PHP字符串停止在最后一列写入分隔符

> ID：14505304
> 
> 赞同：2
> 
> 时间：2013-01-24T15:49:39.263
> 
> 标签：php, mysql, sql

我有点卡住了，甚至不知道从哪里开始解决这个问题。我有一个 MySQL 查询，它将记录写成这样的字符串：

```
$values = mysql_query("SELECT Pointer AS Pointer, VNum AS Vnum FROM ".$table."");
$row = 0;
while ($rowr = mysql_fetch_assoc($values)) 
{
  foreach($rowr as $name => $value)
  {
      $csv_output .= $value."|";
  }
      $csv_output .= "\n";
} 
```

这很好用，除了 Vnum 值最终`|`会像这样附加一个：

> 10467|66|

我需要在 Vnum 值之后写出`10467|66`没有分隔符的值。`|`我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:53:35.323

你为什么不把数组内爆：

```
$csv_output .= implode('|', $rowr)."\n"; 
```

这应该会给你想要的结果。

请注意，该`mysql_*`扩展已被弃用，不应用于编写新代码。查看`PDO`和/或`mysqli_*`. `i`代表*改进*。_

“*完整”*的while 循环最终看起来像这样：

```
while ($rowr = mysql_fetch_assoc($values))
{
    $csv_output .= implode('|', $rowr)."\n";
} 
```

或者，您可以直接将数据写入 csv（使用自定义分隔符）：

```
$handle = fopen('mycsv.csv','w+');
while ($rowr = mysql_fetch_assoc($values))
{
    fputcsv($handle, $rowr, '|');
}
fclose($handle); 
```

就是这样：您的文件已创建，并包含所有数据。查看文档以获取有关[fputcsv 函数](http://php.net/manual/en/function.fputcsv.php)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:54:56.943

利用[`implode()`](http://php.net/manual/en/function.implode.php)

```
$values = mysql_query("SELECT Pointer AS Pointer, VNum AS Vnum FROM ".$table."");
$row = 0;
while ($rowr = mysql_fetch_assoc($values)) {
  $csv_output .= implode('|', $rowr) . "\n";
} 
```

另外，停止使用 mysql_* 函数，等等等等 PDO 等等 MySQLi。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:52:45.160

当我做这样的事情时，我会创建一个数组，然后进行连接 - 它只将分隔符放在两者之间，而不是放在最后。

```
$arr = array();
foreach($rowr as $name => $value)
{
      $arr[] = $value;
}
$csv_output = join('|',$arr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T15:51:45.507

干得好：

```
$csvArray = array();
foreach ($rowr as $name => $value) {
    $csvArray[] = $value;
}
$csv_output = implode('|', $csvArray); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T15:54:30.863

另一种方法：

```
$values = mysql_query("SELECT Pointer AS Pointer, VNum AS Vnum FROM ".$table."");
$row = 0;
$csv_output = '';
while ($rowr = mysql_fetch_assoc($values)) 
{
  foreach($rowr as $name => $value)
  {
      $csv_output .= $value."|";
  }
  $csv_output .= substr($csv_output, 0, -1) . "\n";
  // we subtract one char at the end
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T15:55:09.230

你只需要看看你要打印的 $value 是否是最后一个，并且只有在不是最后一个时才添加字符。

```
while ($rowr = mysql_fetch_assoc($values)) 
{
  $last = rowr[count($rowr)-1];
  foreach($rowr as $name => $value)
  {
      $csv_output .= $value;
      if($last != $value){
          echo "|";
      }
  }
      $csv_output .= "\n";
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T15:58:00.230

实际上，如果您使用`foreach`，则循环将一直持续到到达最后一个或该`NULL`值，因此要处理最后一个字符或 |，您必须添加一个代码以消除最后一个字符。我修改了你的代码现在试试这个：

```
$values = mysql_query("SELECT Pointer AS Pointer, VNum AS Vnum FROM ".$table."");
$row = 0;
while ($rowr = mysql_fetch_assoc($values)) 
{
  foreach($rowr as $name => $value)
  {
      $csv_output .= $value."|";
  }
      $csv_output = substr_replace($csv_output ,"",-1); //these will remove the excess char

      $csv_output .= "\n";
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-24T15:59:20.927

为什么不直接这样做，`MySQL`这样您的 PHP 代码就不会有任何连接？
在`MySQL`使用内置函数`GROUP_CONCAT`时，

示例记录，

```
columnName
===========
1
2
3
4
5 
```

询问，

```
SELECT GROUP_CONCAT(columnName SEPARATOR '|') lists
FROM   TableName 
```

结果，

```
Lists
=========
1|2|3|4|5 
```

*   [GROUP_CONCAT() ^(MySQL 文档)](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-24T15:58:28.103

$csv_output = rtrim($csv_output, '|');

# c# - 将基类发送到接收派生类的方法 - c#

> ID：14505309
> 
> 赞同：2
> 
> 时间：2013-01-24T15:49:44.130
> 
> 标签：c#, inheritance, polymorphism

我有一个基类和 2 个派生类。我有一个基类变量，它可以包含一个派生类。我想将该变量发送到接收派生类的方法。

由于我不知道变量包含什么，我可以做些什么来解决这个问题而无需显式转换？

代码：

```
Class A{ 
    virtual public void foo1() {/.../}
}
Class B : A{
    override public void foo1() {/.../}
}
Class C : A{
    override public void foo1() {/.../}
}
Class D{
   public foo(B argB) {/.../}
   public foo(C argC) {/.../}   

// in main
D varD = new D();
A varA = new B();   

varD.foo(varA); //--->> Problem here need explicit casting
A varC = new C();
varD.foo(varC);  //--->> Problem here need explicit casting 
```

我不知道我要发送到哪个派生类，`varD.foo`并且我想要对不同派生类进行不同的处理。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:53:16.807

这不是多态性的意义所在——即使显式强制转换，您也不能将基类传递给需要专用类的地方。多态以另一种方式工作：您可以在需要基类的任何地方传递一个专门的类。

你应该做的是让`D.foo`期望`A`，你会自动好起来的。如果您在 中添加任何方法`B`或`C`没有基本实现`A`，则无论如何都需要传递`B`并且不能强制`A`转换为`B`or `D`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:53:49.520

只需创建`foo`一个抽象实例方法`A`并覆盖 and 中的`B`实现`C`。您甚至可以保留您的课程`D`并将实际工作委托给那里，但这取决于这是否是一个好主意。

这里的代码委托给`D`. 另请注意，我省略了`foo1()`所有类中的方法。

```
public abstract class A
{ 
    public abstract void foo(D d);
}

public sealed class B : A
{
    public override void foo(D d)
    {
        d.foo(this);
    }
}

public sealed class C : A
{
    public override void foo(D d)
    {
        d.foo(this);
    }
}

public sealed class D
{
   public void foo(B b) { [...] }
   public void foo(C c) { [...] }   
} 
```

现在您可以使用虚拟方法调度来调用正确的方法。

```
D d = new D();

A b = new B();   
A c = new C();

b.foo(d); // Calls B.foo(D) and in turn D.foo(B).
c.foo(d); // Calls C.foo(D) and in turn D.foo(C). 
```

# mysql - CFWheels - Order = "random" 抛出列错误

> ID：14505313
> 
> 赞同：0
> 
> 时间：2013-01-24T15:49:56.660
> 
> 标签：mysql, sql, railo, cfwheels, cfml

出于某种原因，当我在 findAll() 的 order 子句中指定“random”时，CFWHeels 会引发错误：

> **Wheels.ColumnNotFound**
> 
> Wheels 查找映射到**随机**属性的列，但在数据库表中找不到它。建议的行动
> 
> **使用模型的init**方法中的 property 方法验证**order**参数和/或您的**属性**到列的映射，以确保一切正确。

 **我以前使用过计算属性，但这不应该寻找任何关于“随机”排序的东西。

```
<cffunction name="random">

    <cfparam name="params.page" default="1" />
    <cfparam name="params.pageQuantity" default="5" />

    <cfset posts = model("post").findAll(

        select = "

            posts.postID,
            postTitle,
            postPoints,
            postAuthority,
            postCreated,

            postCommentCount,
            postUpVoteCount,
            postDownVoteCount,

            users.userID,
            userName,

            categories.categoryID,
            categoryTitle,
            categoryToken",

        include     = "user,category", 
        order       = "random",
        page        = params.page,
        perPage     = params.pageQuantity

    ) />

</cffunction> 
```

这可能与使用`select`语句有关吗？

将不胜感激任何帮助。

非常感谢，迈克尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:47:10.690

如评论中所述。

如果`order by rand()`在 mySQL 中工作，我会尝试的第一件事是`order = 'rand()'`使用轮子函数。**

# mysql - 在 MySQL 中搜索日期范围的最有效方法是什么？

> ID：14505318
> 
> 赞同：11
> 
> 时间：2013-01-24T15:50:19.573
> 
> 标签：mysql, date

我想问一下在两个日期之间搜索数据最有效（和最快）的方法是什么？

让我们考虑以下简单查询：

```
SELECT Date_,counter1,counter2,...
WHERE (date range condition) 
```

“Date_”列是 DATETIME 类型。

我尝试了不同的选项，例如：

```
WHERE Date_ >= '2012-12-01 00:00:00' AND Date_ <= '2012-12-05 00:00:00' 
```

和

```
WHERE Date_ BETWEEN '2012-12-01 00:00:00' AND '2012-12-05 00:00:00' 
```

和

```
WHERE Date_ = '2012-12-01 00:00:00' OR Date_ = '2012-12-02 00:00:00' OR
Date_ = '2012-12-03 00:00:00' OR Date_ = '2012-12-04 00:00:00' OR
Date_ = '2012-12-05 00:00:00' 
```

事实上，这个 Select 查询要复杂得多（有连接和更多条件）。这只是简化版。根据 EXPLAIN 没有区别，查询是如何执行的。我需要说 Date_ 列已编入索引。不幸的是，我无法测试真正的查询速度，因为我无法避免操作系统缓存，但至少没有使用 MySQL 缓存（SQL_NO_CACHE）。

**根据您的经验，是否有更快的方法来搜索日期间隔（没有函数）？**

**这三种方法中哪一种更快（如果有区别的话）？**

提前非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T16:02:23.487

效率的重要因素将是合适索引的可用性以及有效执行计划的生成。

我们搜索日期时间范围的规范模式是使用大于等于和小于（但不等于）比较。

要获取一天的所有日期时间，例如“2012-12-01”，我们通常这样编写代码：

```
WHERE datetimecol >= '2012-12-01'
  AND datetimecol <  '2012-12-02' 
```

-或者-

```
WHERE datetimecol >= '2012-12-01'
  AND datetimecol <  '2012-12-01' + INTERVAL 1 DAY 
```

同样，要获得示例中的五天范围：

```
WHERE datetimecol >= '2012-12-01'
  AND datetimecol <  '2012-12-06' 
```

-或者-

```
WHERE datetimecol >= '2012-12-01'
  AND datetimecol <  '2012-12-01' + INTERVAL 5 DAY 
```

* * *

要回答您的问题，“有没有更快的方法？” 不。这种形式的谓词使 MySQL 能够对索引执行范围扫描（给定一个合适的可用索引）。它没有比这更有效的了。

# visual-studio-2010 - 从 IDE 禁用 C++ PDB 生成

> ID：14505322
> 
> 赞同：11
> 
> 时间：2013-01-24T15:50:37.643
> 
> 标签：visual-studio-2010, visual-c++, pdb-files

我们需要抑制调试符号的生成。项目属性/配置属性/c/c++/通用/调试信息格式下可用的选项，相当于/Z7、/Zi和/ZI - 我找不到完全省略/Zx标志的方法。

与[这里的情况](https://stackoverflow.com/questions/11944768/supressing-pdb-generation-from-the-command-line-c)不同- 我们是从 IDE 构建的。

我正在使用visual studio 2010，手头的项目是一个静态库。

编辑：这是我安装 VS2012 的视图。这是一些安装问题吗？您的调试信息格式选项是否不同？ ![在此处输入图像描述](../Images/18ef83db8390f34e5a396b008335edd8.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-28T10:07:20.210

您可以手动删除它：

## 步骤 1\. 编译器。

*   选择“配置属性 > C/C++ > 常规 > 调试信息格式”
*   打`DEL`

![在此处输入图像描述](../Images/0bddc3c31d4d4a87147572c3ba51bedc.png)

## 步骤 2\. 链接器。

您还需要禁用为链接器生成调试信息

*   选择“配置属性>链接器>调试>生成调试信息”设置为**否**

![在此处输入图像描述](../Images/c1812468b4a64c7dbae9f816eb82aac4.png)

## 步骤 3\. 探查器。

*   还要在链接器 > 高级中将**“配置文件”**设置为**“否”**，否则您可能仍会看到生成的 PDB 文件！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:13:59.550

首先第一件事 -**不**建议禁用`.PDB`生成，即使是发布版本！

无论如何，你只需要去：

*   **Linker -> Debugging -> Generate Debug Info**，并将其设置为`No`

# xml - magento，使用 config.xml 文件添加 cron

> ID：14505329
> 
> 赞同：1
> 
> 时间：2013-01-24T15:50:53.900
> 
> 标签：xml, magento, cron

我正在尝试通过在我的 config.xml 中添加以下代码来向我的 Magento 添加一个 cron：

```
<crontab>
      <jobs>
        <kiwi_ordercanceller>
            <schedule>
                <cron_expr>*/5 * * * * </cron_expr>
            </schedule>
            <run>
                <model>ordercanceller/observer::cancelOrder</model>
            </run>
        </kiwi_ordercanceller>
  </jobs>
</crontab> 
```

调用这个观察者：

```
class Kiwi_OrderCanceller_Model_Observer {

    public function cancelOrder() { ...} 
```

还是不行！！

你能帮忙吗

谢谢

# iphone - UINavigationBar 标题标签文本

> ID：14505331
> 
> 赞同：6
> 
> 时间：2013-01-24T15:50:55.600
> 
> 标签：iphone, ios, objective-c, uinavigationbar

是否可以让标题文本缩小以适应`UINavigationBar`iOS。

（对于没有自动布局的纵向 iPhone 应用程序）。

我正在动态设置标题栏，但有时文本太长，而此刻它只是用省略号将其切断。

即“这是...”

我希望它缩小文本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-25T14:20:15.430

您可以创建自己的标题视图来制作它。

像这样的东西：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

  //Do any additional setup after loading the view, typically from a nib.
     UILabel *titleLabelView = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 40)]; //<<---- Actually will be auto-resized according to frame of navigation bar;
    [titleLabelView setBackgroundColor:[UIColor clearColor]];
    [titleLabelView setTextAlignment: NSTextAlignmentCenter];
    [titleLabelView setTextColor:[UIColor whiteColor]];
    [titleLabelView setFont:[UIFont systemFontOfSize: 27]]; //<<--- Greatest font size
    [titleLabelView setAdjustsFontSizeToFitWidth:YES]; //<<---- Allow shrink
     // [titleLabelView setAdjustsLetterSpacingToFitWidth:YES];  //<<-- Another option for iOS 6+
    titleLabelView.text = @"This is a Title";

    navigationBar.topItem.titleView = titleLabelView;

    //....
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-04T08:53:48.623

```
Xcode 7.1 - Swift 2.0

//Adding Title Label
        var navigationTitlelabel = UILabel(frame: CGRectMake(0, 0, 200, 21))
        navigationTitlelabel.center = CGPointMake(160, 284)
        navigationTitlelabel.textAlignment = NSTextAlignment.Center
        navigationTitlelabel.textColor  = UIColor.whiteColor()
        navigationTitlelabel.text = "WORK ORDER"
        self.navigationController!.navigationBar.topItem!.titleView = navigationTitlelabel 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T09:17:10.600

我将此代码用于 swift 4（注意标签 rect 并不重要..）

```
func navBar()->UINavigationBar?{
        let navBar = self.navigationController?.navigationBar
        return navBar
    }

override func viewDidLoad() {
        super.viewDidLoad()

        setTNavBarTitleAsLabel(title: "VERYYYY VERYYYY VERYYYY VERYYYY VERYYYY VERYYYY VERYYYY LONGGGGGG")
    }

    // will shrink label...

    func setTNavBarTitleAsLabel(title: String, color: UIColor ){

        // removed some code..

        let navigationTitlelabel = UILabel(frame: CGRect(x: 0, y: 0, width: 20, height: 20))
        navigationTitlelabel.numberOfLines = 1
        navigationTitlelabel.lineBreakMode = .byTruncatingTail

        navigationTitlelabel.adjustsFontSizeToFitWidth = true
        navigationTitlelabel.minimumScaleFactor = 0.1
        navigationTitlelabel.textAlignment = .center
        navigationTitlelabel.textColor  = color
        navigationTitlelabel.text = title

        if let navBar = navBar(){
            //was navBar.topItem?.title = title

            self.navBar()?.topItem?.titleView = navigationTitlelabel
            //navBar.titleTextAttributes = [.foregroundColor : color ?? .black]
        }
    } 
```

# javascript - Html5 Geolocation clearWatch() 没有响应

> ID：14505343
> 
> 赞同：2
> 
> 时间：2013-01-24T15:51:42.290
> 
> 标签：javascript, html, geolocation

我编译并调整了这个演示脚本，用于学习使用来自其他脚本部分的地理位置进行跟踪。到目前为止一切都很好......但是停止搜索或跟踪的功能 clearWatch() 没有响应，因为它之后的 alert() 没有出现。

我忘记了什么？

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            html { height: 100% }
            body { height: 100%; margin: 0px; padding: 0px }
            #map_canvas { height: 100% ; width:100%;}
            </style>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">

            var previousPosition = null;
            var startId;
            var trackId;

            function initialize() {
                document.getElementById("info").innerHTML = "Je positie aan het zoeken...";

                if (navigator.geolocation) {

                    startId = navigator.geolocation.watchPosition(function(position) {
                        var startPos = position;
                        var startAccuracy = startPos.coords.accuracy;
                        document.getElementById("info").innerHTML = "In de buurt... ca." + startAccuracy + " meter...";
                        if(startAccuracy < 3) {
                            document.getElementById("info").innerHTML = "Gevonden... binnen " + startAccuracy + " meter...";
                            map = new google.maps.Map(document.getElementById("map_canvas"), {
                                zoom: 18,
                                center: new google.maps.LatLng(startPos.coords.latitude, startPos.coords.longitude),
                                mapTypeId: google.maps.MapTypeId.ROADMAP
                                });
                            var marker = new google.maps.Marker({
                                position: new google.maps.LatLng(startPos.coords.latitude, startPos.coords.longitude),
                                map: map
                                });
                            navigator.geolocation.clearWatch(startId);
                            document.getElementById("info").innerHTML = "Tracking start over 5 seconden...";
                            setTimeout(function(){startTracking()},5000);
                        }
                        }, function(error) {
                        alert("Error code: " + error.code);
                        // error.code can be:
                        //   0: unknown error
                        //   1: permission denied
                        //   2: position unavailable (error response from locaton provider)
                        //   3: timed out
                        }, {maximumAge:1000, enableHighAccuracy: true});

                }
                else {
                    alert("GeoLocatie wordt niet ondersteund!");
                }

            }

            function startTracking() {

                document.getElementById("info").innerHTML = "Tracking is gestart...";

                trackId = navigator.geolocation.watchPosition(successCallback, null, {maximumAge:1000, timeout:60000, enableHighAccuracy:true});

                function successCallback(position){
                    map.panTo(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
                     if (previousPosition){
                        var newLineCoordinates = [
                                                  new google.maps.LatLng(previousPosition.coords.latitude, previousPosition.coords.longitude),
                                                  new google.maps.LatLng(position.coords.latitude, position.coords.longitude)];

                        var newLine = new google.maps.Polyline({
                                                               path: newLineCoordinates,
                                                               strokeColor: "#FF0000",
                                                               strokeOpacity: 1.0,
                                                               strokeWeight: 2
                                                               });
                        newLine.setMap(map);
                    }
                    previousPosition = position;
                };

            }

            function stopZoeken() {
                navigator.geolocation.clearWatch(startId);
                alert("Zoeken gestopt!");
            }

            function stopTracking() {
                navigator.geolocation.clearWatch(trackId);
                alert("Tracking gestopt!");
            }

            </script>
    </head>

    <body onload="initialize()">
        <div id="info"></div>
        <div><input type="button" onclick="stopZoeken()" value="Stop Zoeken" />&nbsp;&nbsp;&nbsp;<input type="button" onclick="stopTracking()" value="Stop Tracking" /></div>
        <div id="map_canvas"></div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:17:05.487

Grrr，愚蠢的我，我最关注地理定位调用而忘记查看 javascript 问题。所以， clearWatch() 没有响应的原因是：变量 startId 和 trackId 没有在 JS 的顶部声明。我将声明放在调用中：var startId = ....，所以我调整了脚本，现在可以了！

随意使用和/或编辑此脚本作为您项目的基础。

# php - Codeigniter 2.1 - 图片名称在上传时无法正常工作

> ID：14505345
> 
> 赞同：2
> 
> 时间：2013-01-24T15:51:45.370
> 
> 标签：php, codeigniter, codeigniter-2

我正在使用此功能上传图像，并且除了一部分之外它正在工作。如果上传的图片不止一张，所有图片都从第一张图片中获取名称（覆盖设置为关闭，因此 CI 在名称末尾添加数字）。我怎么解决这个问题？

```
function img_upload($folder) {
    $this->path = './public/img/' . $folder;
    $imgs = array();
    $count = 0;
    foreach($_FILES as $key => $value):
        $img_name = is_array($value['name']) ? $value['name'][$count] : $value['name'];
        $img_name = $this->char_replace($img_name, '_');
        $count++;
        $config = array(
            'allowed_types' => 'jpg|jpeg|png|gif',
            'upload_path' => $this->path,
            'file_name' => $img_name
        );
        $this->CI->load->library('image_lib');
        $this->CI->image_lib->clear();
        $this->CI->load->library('upload', $config);
        if($key != 'logo'):
            if (!$this->CI->upload->do_upload($key)) {
            } else {
                $image = $this->CI->upload->data();
                $imgs[] = $image['file_name'];
            }
        endif;
    endforeach;

    if(empty($imgs)):
        return FALSE;
    else:
        return implode(',', $imgs);
    endif;
} 
```

功能**char_replace**工作没有问题。

```
function char_replace($text, $rep_simbol = " ")
{
    $char = array('!', '&', '?', '/', '/\/', ':', ';', '#', '<', '>', '=', '^', '@', '~', '`', '[', ']', '{', '}');
    return $name = str_replace($char, $rep_simbol, $text);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:57:01.990

`$this->CI->upload->do_upload($key)`预计`$_FILES['key']`只包含一个文件。

你可以做的是，制作一个副本`$_FILES`，遍历它，并为每个文件设置`$_FILES['key']`.

```
function img_upload($folder) {
    $this->path = './public/img/' . $folder;
    $imgs = array();

    // Copy of $_FILES
    $thisFiles = $_FILES;

    // Loop through copy of $_FILES
    foreach($theFiles as $key => &$value){
        // Create the $_FILES array for each individual file,
        // so that do_upload can read it correctly
        if(!is_array($value['name'])){
            // If it's not an array, make it one,
            // this will make our future code easier
            foreach($value as $kv => &$val){
                $val = array($val);
            }
        }

        // Loop through each file and upload each one
        foreach($value['name'] as $count=>$img_name){
            $img_name = $this->char_replace($img_name, '_');

            foreach($_FILES[$key] as $k => &$v){
                // CodeIgniter will think this is the $_FILES array
                $v = $theFiles[$key][$k][$count];
            }

            $config = array(
                'allowed_types' => 'jpg|jpeg|png|gif',
                'upload_path' => $this->path,
                'file_name' => $img_name
            );

            $this->CI->load->library('image_lib');
            $this->CI->image_lib->clear();
            $this->CI->load->library('upload', $config);

            if($key != 'logo'){
                if (!$this->CI->upload->do_upload($key)) {
                }
                else {
                    $image = $this->CI->upload->data();
                    $imgs[] = $image['file_name'];
                }
            }
        }
    }

    return !empty($imgs) ? implode(',', $imgs) : FALSE;
} 
```

[注意：这是*未经测试*的。]

# ios - ios - simulator started opening in horizontal view. How to get it to go back to default portrait view?

> ID：14505351
> 
> 赞同：0
> 
> 时间：2013-01-24T15:51:57.797
> 
> 标签：ios, ios5

I have a strange thing that recently happened. The simulator keeps starting in horizontal view. Is there a setting to make it start in portrait view? I keep digging around for that setting but can't seem to locate it.

Thanks and sorry for such a simple question.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:52:45.067

Try rotating it with CMD + left arrow, that might do the trick.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:04:49.793

The order of the 'Supported interface orientation' items of your project-info.plist file is key.

Check if the "Portrait (bottom home button)" is on the very first position in the list. If not, just move it up.

(from this [answer](https://stackoverflow.com/questions/6531125/why-does-the-simulator-always-start-in-landscape-mode-on-xcode4))

# asynchronous - 在 JBoss 7 中，如何限制以 @Asyncronous 为特定 bean 启动的线程数

> ID：14505353
> 
> 赞同：1
> 
> 时间：2013-01-24T15:52:13.240
> 
> 标签：asynchronous, jboss7.x

我有一个我想连续运行的进程，但在不同的线程中。我怎样才能在 JBoss 7 中做到这一点？显而易见的答案是 @Asyncronous EJB 方法，其中 EJB 被配置为一次只运行一个线程（其他请求将在队列中）。

怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:42:15.643

我相信实现这一点的一个好方法是使用来自 EJB 3.1 的 Singleton + Asynchronous annotations 的组合，您还可以使用 AccessTimeout annotation 为排队的调用提供等待超时，最后您甚至可以使用 Lock annotation 来控制 READ、WRITE 锁定如果您愿意，可以在此：

```
@Singleton
public class SingletonAsyncProcessor{

@Asynchronous
@AccessTimeout(5000) //times out after 5 seconds
public Future<String> addJobToQueue(String jobName) { 
```

另请注意，您可以在类级别（所有方法将是异步的）或方法级别使用大多数这些注释。您甚至可以在 Web 容器中运行 EJB 3.1。

EJB 3.1 摇滚。

问候。

# java - 在java中找不到Web服务

> ID：14505358
> 
> 赞同：0
> 
> 时间：2013-01-24T15:52:16.957
> 
> 标签：java, web-services, wsdl

我正在尝试用 java 中的客户端编写一些 Web 服务。我有一些代码放在一起，但我有一些错误导致我出现问题的行之一如下：

```
static CustomerService_Service svc = new CustomerService_Service(); 
```

找不到 CustomerService_Service 的地方。

我正在使用带有 glassfish 服务器安装的 netbeans

我有两个 Web 服务，每个都有自己的 gui 客户端。

有谁知道为什么我的服务没有被发现？

# ios - 我可以在 Core Data 中存储解压缩的图像吗

> ID：14505359
> 
> 赞同：1
> 
> 时间：2013-01-24T15:52:17.697
> 
> 标签：ios, core-data, uiimage, cgimageref

我正在处理大量大图像的旋转木马，并且正在进行一些测试以提高加载图像的性能。现在，即使我已经在不同的队列中解压 jpg，它仍然需要一点时间，主要是与 iOS 中包含的相册应用程序相比。此外，如果我非常快地传递图像，我可以产生 memoryWarnings。

所以我想要做的是将 CGImageRef （或 UIImage 已经解压缩：原始数据）存储到核心数据中。但是我找到的所有答案和选项都在使用 UIImageJPegRepresentation，但是这样做我会再次压缩图像，不是吗？

有人知道有没有办法？我是否错误地关注问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:59:09.027

是的，您可以将图像转换为 NSData 并存储它。例子：

```
Entity *testEntity = [NSEntityDescription insertNewObjectForEntityForName:@"Entity" inManagedObjectContext:__managedObjectContext];
NSString *photoPath = [[NSBundle mainBundle] pathForResource:@"photo" ofType:@"png"];
if ([[NSFileManager defaultManager] fileExistsAtPath:photoPath]) {
    NSData *data = [NSData dataWithContentsOfFile:photoPath];
    [testEntity setPhoto:data];
} 
```

这会将图像作为 BLOB 数据存储在 sqlite 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:59:42.910

理想情况下，你永远不会在内存中保留大量 UIImage 对象的大图像。它们会给你内存警告。如果图像是本地文件，您可以做一件事，使用后台线程将大图像缩放到适合轮播的大小。保存这些缩略图并将它们映射到原始图像。为轮播加载缩略图，并使用原始图像文件进行详细图像查看。缩略图将是 png 以获得最大性能。Jpeg 解码不是 iOS 的原生，并且需要比 png 更多的 cpu 来解码它们。你没有要将缩略图数据保留在核心数据中，根据我的经验，.png 文件会做得很好。您可以使用以下代码加载图像

```
 UIImage * image = [UIImage imageWithContentsOfFile:filePath]; 
```

这是调整图像大小的代码

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
CGImageRef imageRef = image.CGImage;

UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

// Set the quality level to use when rescaling
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

CGContextConcatCTM(context, flipVertical);
// Draw into the context; this scales the image
CGContextDrawImage(context, newRect, imageRef);

// Get the resized image from the context and a UIImage
CGImageRef newImageRef = CGBitmapContextCreateImage(context);
UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

CGImageRelease(newImageRef);
UIGraphicsEndImageContext();

return newImage; 
```

}

# jquery - 为什么从 link_to :remote => true 返回后整个表单都提交了？

> ID：14505360
> 
> 赞同：1
> 
> 时间：2013-01-24T15:52:19.343
> 
> 标签：jquery, ruby-on-rails-3.2, link-to-remote

我有一个动作，其形式为 1）从列表框中选择产品 2）调用远程控制器动作，该动作返回不同仓库中该产品的可用数量

这是使用带有 :remote => true 的 link_to 完成的

```
 <div id="products"></div>
  <%= link_to 'Search product', "#", class: 'get_product', :remote => true %> 
```

然后有一个javascript

```
$('form').on('click', '.get_product', function(event) {
    var url;
    url='/recipes/get_product_list';
    url += '/' + $('#recipe_product_id').val();
    $.get(url, $(this).serialize(), null, "script");
    return event.preventDefault();
}); 
```

我有 .js.erb 模板，并且在 .html.erb 部分中返回了正确的值。

问题是在返回部分后，页面会完全重新加载，我不希望这样。

为什么会这样？我还试图弄清楚如何使用整个 url 而不是使用“#”和 jquery 来调用 link_to，但在这种情况下，我不知道如何在 link_to 帮助器的选择字段中传递值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:12:09.233

在你的表单标签中，把这个

```
<form onsubmit="return false;"> 
```

如果没有看到您的表单 HTML，很难说为什么会发生这种情况，但我认为 get_product 按钮正在提交表单并调用点击处理程序函数。

# listview - 黑莓获取ImageListField焦点索引

> ID：14505364
> 
> 赞同：0
> 
> 时间：2013-01-24T15:52:28.873
> 
> 标签：listview, blackberry, java-me, focus

我有`ImageListField`（自定义列表）。在菜单中我有删除选项我想删除列表中的任何元素。所以我设置了以下代码。我想获取具有焦点的元素的行索引...我将传递该元素 ID 以**删除**，然后进一步处理。

```
public FocusChangeListener listFocus = new FocusChangeListener(){ 
        public void focusChanged(Field field, int eventType) {
            int index = getFieldWithFocusIndex(); 

            Dialog.alert("Index: "+index);
            // But its not giving the specific row index.
        }
    };
list.setFocusListener(listFocus); 
```

它也被展示了3次。除了使用标志外，如何将其限制为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:04:10.357

问题是您正在调用`getFieldWithFocusIndex()`，这是*包含您的 ImageListField 的类*的方法，而不是 ImageListField 本身。

如果您有 a`Manager`或 a `Screen`，其中包含`ImageListField`，那么您正在向该对象询问其具有焦点的字段。这可能总是会返回您的`list`对象的索引。这就是你不想要的**整个列表。**您想要该列表*中行*的索引。所以，你需要一个不同的方法：

```
 FocusChangeListener listFocus = new FocusChangeListener() { 
     public void focusChanged(Field field, int eventType) {
        //int index = getFieldWithFocusIndex(); 
        int index = list.getSelectedIndex();
        System.out.println("Index: " + index + " event: " + eventType);
     }
  };
  list.setFocusListener(listFocus); 
```

调用`getSelectedIndex()`您的`list`对象应该可以工作。

至于为什么你看到方法被显示了三遍，那可能是因为有多种焦点*事件*。来自[FocusChangeListener 上的 API 文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/FocusChangeListener.html)：

> static int **FOCUS_CHANGED** 提示事件的字段表示焦点的变化。
> static int **FOCUS_GAINED** 提示事件获得焦点的字段。
> static int **FOCUS_LOST** 提示事件失去焦点的字段。

如果您只想收到此通知一次，则可以添加对事件类型的检查（我不知道这是否是您所说的*flags*，但这是最简单的方法）：

```
 public void focusChanged(Field field, int eventType) {
        if (eventType == FocusChangeListener.FOCUS_CHANGED) {
           int index = list.getSelectedIndex();
           System.out.println("Index: " + index + " event: " + eventType);
        }
    } 
```

Also, maybe this is just in the code you posted for this question, but of course, you will have to store the focused index in a *member variable*. If you only store it in the local `index` variable, that won't be available to your object when the **Delete** menu item is selected later.

# java - 使用公共无效决定（）？

> ID：14505365
> 
> 赞同：-6
> 
> 时间：2013-01-24T15:52:39.747
> 
> 标签：java

我制作了一个接受用户数字的程序。

我的程序示例：

```
 int strength, health, luck;

JOptionPane.showMessageDialog(null,"Welcome to Yertle's Quest");    

      String name = JOptionPane.showInputDialog("Enter the name of your character");

       Scanner in = new Scanner(System.in);
     System.out.println("Enter strength (1-10): ");
      strength = in.nextInt();

     System.out.println("Enter health (1-10): ");      
      health = in.nextInt();

     System.out.println("Enter luck (1-10): ");      
      luck = in.nextInt(); 
```

我的问题是：用户只能给 15 分。如果他给每个统计数据（力量，健康，运气）分配超过 10 分，默认值将分配给每个统计数据 - 即 5。如果每个统计数据（力量，健康，运气）的总分超过15、默认值将分配给每个统计信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:58:19.727

鉴于我正确理解了这个问题：

```
if ( luck + health + strength > 15) {
    luck = 5;
    health = 5;
    strength = 5;
}
if (luck > 10) { luck = 5; }
// same for the other attributes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:59:50.817

```
if(strength > 10)
{
 defaultToFive(strength);
}

if(health > 10)
{
 defaultToFive(health);
}

if(luck > 10)
{
 defaultToFive(luck);
}

if((strength + health + luck) > 15)
{
 defaultToFive(strength);
 defaultToFive(health);
 defaultToFive(luck);
}

private void defaultToFive(int stat)
{
 stat=5;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:03:40.613

使用简单的`if`语句：

```
 import java.util.Scanner;

 public class CheckLuck {

 public static void main(String[] args) {
 Scanner in = new Scanner(System.in);int strength,health,luck;
 System.out.println("Enter strength (1-10): ");
 strength = in.nextInt();

   if(strength>10)    /* chech for each value, should not be >10 */
   strength=5;

 System.out.println("Enter health (1-10): ");
 health = in.nextInt();
   if(health>10)
   health=5;

 System.out.println("Enter luck (1-10): ");
 luck = in.nextInt();

   if(luck>10)
      luck=5;

 if(strength+health+luck>15)   /* If sum  is >15 assign 5 to each value */
  strength=health=luck=5;

 }

} 
```

**更新：使用公共无效决定（）**

（对不起，如果这听起来很有趣）

```
 import java.util.Scanner;

 public class TestDecide {

public static void main(String[] args) {
Scanner in = new Scanner(System.in);int strength,health,luck;
System.out.println("Enter strength (1-10): ");
strength = in.nextInt();

if(strength>10)
strength=5;

 System.out.println("Enter health (1-10): ");
 health = in.nextInt();

 if(health>10)
 health=5;

 System.out.println("Enter luck (1-10): ");
 luck = in.nextInt();
  if(luck>10)
      luck=5;

if(strength+health+luck>15)
{
strength=health=luck=5;
decide();
}
else
{
    System.out.println("Congrats!!!!!!!!!!!! for your scores");

}

}
public static void decide()
{
System.out.println("You have given your character too many points! Default values have been assigned: Character, strength: 5, health: 5, luck: 5");

}

} 
```

# android - 文件夹创建为文件

> ID：14505371
> 
> 赞同：1
> 
> 时间：2013-01-24T15:52:50.137
> 
> 标签：android, android-file

困惑：那些对问题投反对票的人，你能添加一些评论吗，为什么？？？？我想说坏话，只是不想被禁止。

我确实有一个应用程序，我想在 sdCard 中有一个文件夹，以便用户可以添加一些东西，然后我可以在应用程序中使用它。我使用以下代码创建一个文件夹：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //External storage
        boolean mExternalStorageAvailable = false;
        boolean mExternalStorageWriteable = false;
        String state = Environment.getExternalStorageState();

        if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can read and write the media
            mExternalStorageAvailable = mExternalStorageWriteable = true;
            Log.v("Storage","ablo to read and write");
            //create Beatss folder
            File direct = new File(android.os.Environment.getExternalStorageDirectory().getPath() + "/Beatss");
            Log.v("Storage",android.os.Environment.getExternalStorageDirectory().getPath() + "/Beatss");
                boolean success = true;
                if (!direct.exists()) {
                    success = direct.mkdirs();

                }
                if (success) {
                    // Do something on success
                    Log.v("Storage","Folder has been created");

                } else {
                    // Do something else on failure 

                }

        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media
            mExternalStorageAvailable = true;
            mExternalStorageWriteable = false;
            Log.v("Storage","ablo to read only");
        } else {

            mExternalStorageAvailable = mExternalStorageWriteable = false;
            Log.v("Storage","no access");               
        } 
```

我可以在 DDMS 中看到该文件夹​​已创建，但是当我通过 WindowsExplorer 时，我有一个文件而不是文件夹。那么，如何创建文件夹呢？

UPD1：所以，即使我在这个文件夹中创建了一些东西，我仍然将它作为一个文件保存在 Windows 资源管理器中，但在 DDMS 中我可以看到我有一个文件夹，其中还有另一个文件夹。那么，这里有什么问题？

UPD2：因此，`direct`在 logcat 中拆分行以查看是否存在真实路径：

```
01-24 21:14:04.368: V/Storage(12116): /mnt/sdcard/Beatss/ 
```

所以有..

UPD3：我无法显示我所有的代码，到目前为止它是 264 行。所有这些文件夹的创建都发生在 mainActivity 的 onCreate 上。manifestFile 看起来像这样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="uk.test
android:versionCode="1"
android:versionName="1.0"
android:installLocation="auto" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="16" />
<supports-screens         
              android:smallScreens= "true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="false"                  
/>

    <uses-permission android:name="android.permission.INTERNET"/> 
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:screenOrientation="portrait"
    >
    <activity
        android:name=".Main"
        android:label="@string/app_name"
        android:screenOrientation="portrait" 
        android:clearTaskOnLaunch="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>        
    <activity android:name=".MainActivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait">
    </activity>
    <activity android:name=".SupportScreen"
              android:label="@string/app_name"
              android:screenOrientation="portrait">
    </activity>
        <activity android:name="com.tapjoy.TJCOffersWebView" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.tapjoy.TapjoyFullScreenAdWebView" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.tapjoy.TapjoyDailyRewardAdWebView" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.tapjoy.TapjoyVideoView" android:configChanges="keyboardHidden|orientation" />

</application>
</manifest> 
```

更新代码上部：

Logcat 说：

```
01-24 21:19:21.068: V/Storage(14088): /mnt/sdcard/Beatss/
01-24 21:19:21.138: V/Storage(14088): Folder has been created 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:47:27.063

试试看

```
String PATH = Environment.getExternalStorageDirectory()+"/Folder123/";
            File file = new File(PATH);
            file.mkdirs(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:18:54.300

尝试这个 ：

```
String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
    File folder = new File(extStorageDirectory, "DIR_NAME");
    folder.mkdir();
    File file = new File(folder, "Sample.txt");
    try {
        file.createNewFile();
    } catch (IOException e1) {
        e1.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:39:17.063

这是我在生产中的应用程序的代码片段......

```
if (spaceAvailable > spaceRequired) {
        databasePath = new File(settingsDatabasePath, GC.APP_DIRECTORY);
        databasePath.mkdirs();
        settingsDatabasePath = databasePath.getPath().toString();
    } 
```

settingsDatabasePath 是在首次安装应用程序时确定的。它可以是外部存储也可以是内部存储，具体取决于设备是否具有外部存储。此外，在此代码段之前，已确定尚未创建 GC.APP_DIRECTORY（GC 类中的字符串常量）。此外，在此代码段之后，将进行测试以确保该目录已创建，它是可写的，并且它是一个目录。数据库和文件在 app 目录中创建，以防止在根级目录中“飞溅”文件。

注意： settingsDatabasePath 被故意覆盖。如果您复制代码，您可能不想进行覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:36:10.527

您的代码没有任何问题。我在我所有的应用程序上都使用相同的代码，它们工作得很好。我复制/粘贴了您的代码，效果很好。在我的 Windows 机器上可以查看文件夹“Beatss”。您的 SD 卡一定有问题。您要么需要检查它是否有错误，要么尝试另一张 SD 卡。

在 Windows 中右键单击 sdcard，然后选择属性>工具>错误检查，然后单击“立即检查”。如果没有错误，请尝试另一张卡。如果不是这样，那么一起在另一台设备上尝试您的 apk，看看它是否在那里工作。

# maven-3 - 用junit 4创建POM

> ID：14505377
> 
> 赞同：9
> 
> 时间：2013-01-24T15:53:03.007
> 
> 标签：maven-3, junit4, pom.xml, maven-archetype

我使用 Maven 3.0.4 并希望默认使用 junit 4。

我的项目是使用以下命令创建的：
**$>mvn archetype:create -DgroupId=my.group.id -DartifactId=myArtifactId -DpackageName=my.package.name**

这在创建的 pom.xml 中依赖于 junit 版本 3.8.1 ，尽管版本 4.8.1 已经存在。
在我的全局 settings.xml 中没有对 junit 的依赖，而且我没有本地 .m2/repository/settings.xml。我不想删除旧版本 3.8.1，但希望所有新项目都使用 4.8.1 版本创建

我可以在我的 settings.xml 中执行此操作（全局或本地无关紧要）吗？如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:34:16.983

几件事：

`archetype:create`已弃用`archetype:generate`；请使用`generate`，它`create`在您的示例中可以互换。

至于解决方案，我想说最简单的方法是生成您的项目，编辑 pom 以获得正确的`junit`版本；然后从您的项目中运行：

```
mvn archetype:create-from-project 
```

它将根据您的修改创建一个原型，您只需安装它：

```
cd target/generated-sources/archetype/
mvn install 
```

现在，您可以根据需要使用此新原型创建新的 Maven 项目：

```
mvn archetype:generate -DgroupId=my.group.id -DartifactId=newArtifact -DpackageName=my.package.name -DarchetypeArtifactId=myArtifactId-archetype -DarchetypeGroupId=my.group.id 
```

希望这会有所帮助。

# iphone - 触摸只读 UITextView 时关闭 iPhone 数字键盘

> ID：14505379
> 
> 赞同：0
> 
> 时间：2013-01-24T15:53:09.850
> 
> 标签：iphone, ios, xcode, uitextview

在我的简单 iPhone 应用程序中，我有一个用于输入文本的 UITextField 和一个用于结果的 UITextView。UITextField 使用数字键盘，因为只允许使用数字。UITextView 是只读的，但启用了用户交互。这样做的原因是我希望用户能够进行复制和粘贴但不更改结果。众所周知，数字键盘没有“开始”按钮。所以我这样做`resignFirstResponder() in touchesBegan`了，只要我在文本视图区域之外触摸它就可以工作。即使触摸 UITextView 的内部，如何关闭键盘（数字键盘）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:31:06.310

您可以向 UITextView 添加手势识别器。未经测试的代码：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[self.textView addGestureRecognizer:tap];
[tap release]; // not necessary or allowed under ARC 
```

然后是处理程序：

```
- (void)handleTap:(UITapGestureRecognizer *)tap
{
    // resign first responder and whatever else you need to do
} 
```

您可能需要在不需要时禁用手势识别器，以防它干扰只读`UITextView`.

# sas - SAS (proc risk) - 工具语句 - 将变量添加到继承的定义中

> ID：14505384
> 
> 赞同：1
> 
> 时间：2013-01-24T15:53:20.497
> 
> 标签：sas

如何将仪器变量添加到现有定义中？使用代码？例如：

```
proc risk;
 environment new = work.Test ;
 declare instvars=(var1 num var, var2 num var, var3 num var);
 instrument MyInst variables = ( var1, var2 ) ;
 environment save;
run;

proc risk;
 environment open= work.Test;
 instrument MyInst variables= ( /* how do I add var3? */);
 environment save;
run; 
```

一定有一个简单的方法！如果不是 - 如何确定原始定义（以编程方式）？

为了扩展要求 - 我无法更新原始仪器定义，因为它是从生产环境继承的。另外 - 我不希望在第二个仪器语句中硬编码原始仪器变量，以防原始环境发生变化。

我认为可能没有其他方式（除了硬编码），但对想法持开放态度！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:51:54.120

到了那里 - 有一点帮助！在不使用风险维度 UI 或重写工具语句的情况下，唯一的其他方法是使用由 WRITETYPES 语句创建的数据集。

```
proc risk;
 environment new = work.Test ;
 declare instvars=(var1 num var, var2 num var, var3 num var);
 instrument MyInst variables = ( var1, var2 ) ;
 writetypes out=temp;
 environment save;
run;

proc sql; 
insert into temp set insttype='MyInst', type='VAR', content='VAR3';

proc sort data=temp; by _all_; run;

proc risk;
 environment open= work.Test;
 readtypes data=temp;
 environment save;
run; 
```

# javascript - 范围没有更新AngularJS

> ID：14505397
> 
> 赞同：0
> 
> 时间：2013-01-24T15:53:53.530
> 
> 标签：javascript, angularjs

我很难过……我煮斧头粥……如果可以的话，请帮我解决我的问题。我的 html 代码中有这个结构（ng-controller 位于 wrap 标签上）：

```
<a ng-repeat="subitem in cur_submenu" ng-href="#/{{subitem.href}}/">{{subitem.name}}</a> 
```

在 JS 中我有： 1) RouteProvider

```
$routeProvider.
      when('/:lvl1', {
          template:'<div ng-include="htmlUrl">Loading...</div>',
          controller: 'MainCtrl'
      }) 
```

2) 控制器

```
function MainCtrl($scope, $http, $routeParams){
  var lvl = window.location.hash.split('/');
  if ($scope.submenu) {
    //if data was fetch earlier, then set currentMenu
    $scope.cur_submenu = $scope.submenu[lvl[1]];
  } else {
    MainCtrl.prototype.fetchData();
  }

  MainCtrl.prototype = {
    fetchData: function(){
      /*
      * Get data about navigation
      */
      $http({method: 'GET', url: 'data/main.json'}).
      success(function(data){
        $scope.menu = data.menu;
        $scope.submenu = data.submenu;
        $scope.cur_submenu = data.submenu[lvl[1]] //current submenu for my location
      });
   }
} 
```

但是当我在网站（hash-nav）上更改我的位置时，它没有在我的页面上更新......请帮助我。我的网站的完整版：http: [//amiu.ru](http://amiu.ru)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:43:38.813

您无需通过原型设计向控制器添加功能。在您的视图中调用的函数将在 $scope 上声明，如下所示：

```
function MainCtrl($scope, $http, $routeParams){
  var lvl = window.location.hash.split('/');
  if ($scope.submenu) {
    //if data was fetch earlier, then set currentMenu
    $scope.cur_submenu = $scope.submenu[lvl[1]];
  } else {
    $scope.fetchData();
  }

  $scope.fetchData = function(){
      /*
      * Get data about navigation
      */
      $http({method: 'GET', url: 'data/main.json'}).
          success(function(data){
            $scope.menu = data.menu;
            $scope.submenu = data.submenu;
            $scope.cur_submenu = data.submenu[lvl[1]] //current submenu for my location
          });
   };
} 
```

在所有其他情况下，如果您在 $scope 函数之外对 $scope 执行更改，则需要手动调用`$scope.$apply()`以将摘要排队并更新您的视图。

# jpa - 没有命名实体管理器的持久性提供程序 - 尝试了一切

> ID：14505398
> 
> 赞同：0
> 
> 时间：2013-01-24T15:53:54.377
> 
> 标签：jpa, persistence.xml

我是 JPA 的新手，我遇到了这个臭名昭著的错误“没有命名实体管理器的持久性提供程序”。我在谷歌上进行了广泛的搜索，并尝试了每一个可用的解决方案，但我并不害怕。

**堆栈跟踪**

```
javax.persistence.PersistenceException: No Persistence provider for EntityManager named suplink
at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
at com.supinfo.suplink.util.PersistenceManager.getEntityManagerFactory(PersistenceManager.java:13) 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
<persistence-unit name="suplink" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
        <property name="javax.persistence.jdbc.user" value="root" />
        <property name="javax.persistence.jdbc.password" value="" />
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/SupLink" />
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
    </properties>
     <class>com.supinfo.suplink.entity.User</class>
</persistence-unit> 
```

**持久性管理器**

```
public class PersistenceManager {
private static EntityManagerFactory emf;

private PersistenceManager() { }

public static EntityManagerFactory getEntityManagerFactory() {
    if(emf == null) {
        emf = Persistence.createEntityManagerFactory("suplink");
    }
    return emf;
}

public static void closeEntityManagerFactory() {
    if(emf != null && emf.isOpen()) emf.close();
}
} 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T05:56:40.930

尝试删除 transaction-type="RESOURCE_LOCAL" 在没有此代码的情况下在我的机器上工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:42:48.543

祝你的分级练习好运，试试下面的代码；）

```
public class PersistenceManager {

    private static final EntityManagerFactory emf;
    private static final ThreadLocal<EntityManager> threadLocal;
    private static final Logger logger;

    static {
        emf = Persistence.createEntityManagerFactory("SupLink");
        threadLocal = new ThreadLocal<EntityManager>();
        logger = Logger.getLogger("SupLink");
        logger.setLevel(Level.ALL);
    }

    public static EntityManager getEntityManager() {
        EntityManager manager = threadLocal.get();
        if (manager == null || !manager.isOpen()) {
            manager = emf.createEntityManager();
            threadLocal.set(manager);
        }
        return manager;
    }

    public static void closeEntityManager() {
        EntityManager em = threadLocal.get();
        threadLocal.set(null);
        if (em != null)
            em.close();
    }

    public static void beginTransaction() {
        getEntityManager().getTransaction().begin();
    }

    public static void commit() {
        getEntityManager().getTransaction().commit();
    }

    public static void rollback() {
        getEntityManager().getTransaction().rollback();
    }

    public static Query createQuery(String query) {
        return getEntityManager().createQuery(query);
    }

    public static void log(String info, Level level, Throwable ex) {
        logger.log(level, info, ex);
    }

} 
```

# jakarta-ee - CMT 交易 (REDUX)

> ID：14505400
> 
> 赞同：1
> 
> 时间：2013-01-24T15:54:03.333
> 
> 标签：jakarta-ee, transactions, ejb

又得麻烦你了……（见：[CMT Transactions](https://stackoverflow.com/questions/14462342/cmt-transactions)） 假设如下：

![在此处输入图像描述](../Images/1f7e66a4100afd362802c1d0fef90c6a.png)

所有 TransactionAttributes 默认设置为 REQUIRED

问题：为什么即使先前的提交不应该发生，find 方法也能够检索 foo？确实发生了在调用 find() 时插入并选择了 Foo，但是为什么呢？此时事务尚未结束，因为 Bar 仍将被存储。

现在发生了以下情况（Bang = DuplicateKeyException）：

![在此处输入图像描述](../Images/08997e6d9fcab4f6488416c50bf664df.png)

问题：**为什么Foo得救了？**我认为 save(Foo foo) 的方法调用将成为 GlobalService 事务的一部分，注释为 REQUIRED

好的，也许 GlobalClient 感兴趣：

```
public void createFooBar(Foo foo, Bar bar) throws WrappedThingsGoneBadException
{
    try
    {
        fooService.create(foo); 
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }       

    fooService.doSomethingSilly();

    try
    {
        foo = fooService.findByName(foo.getName());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    try
    {
        barService.create(bar);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

Foo- 和 BarService 的保存方法：

```
public Foo create(Foo foo)
{
    em.persist(foo);

    return foo;
} 
```

非常欢迎澄清！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:48:35.247

我猜发生了以下情况：

1.  您成功地将 Foo 保存到数据库中而没有提交它。
2.  同一个数据库用户读取了未提交的数据。所以查找成功。
3.  Bang 回滚了数据库中保存的 Foo。

所以其他数据库用户从来没有看到保存的 Foo 记录。您的数据库用户看到它，直到发生回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:56:28.643

JBoss 7.1.1 中有一个错误：[https](https://issues.jboss.org/browse/AS7-4552) ://issues.jboss.org/browse/AS7-4552 ...

# php - Wordpress - 查看其他人将来安排的帖子需要什么能力？

> ID：14505401
> 
> 赞同：4
> 
> 时间：2013-01-24T15:54:05.220
> 
> 标签：php, wordpress

所以，我试图在我的主题中创建一些自定义角色，以满足网站的自定义要求。

第一个也是最简单的，是“外部查看者”，我希望能够查看内容团队中的其他人创建并计划在未来某个时间点发布的帖子（内置和自定义帖子类型）。

## 最初我试过这个

```
$viewer_capabilities = array(
    'read_private_pages' => true,
    'read_private_posts' => true,
    'read' => true
);

add_role('external_viewer', 'External Viewer', $viewer_capabilities ); 
```

但是在登录时，`/wp-admin`我只是收到“不允许”消息，我什么也做不了。如果我去了其中一个预定的帖子，我只是得到'找不到'。

## 所以我尝试了

```
$role_object = get_role( 'external_viewer' );
$role_object->add_cap( 'read_private_pages' );
$role_object->add_cap( 'read_private_posts' );
$role_object->add_cap( 'read' ); 
```

这让我更进一步。我可以登录并查看管理仪表板，但如果我访问预定的帖子，我仍然会收到“找不到页面”。

谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:46:15.870

我相信您想要的功能是`edit_private_pages`, `edit_private_posts`, `edit_published_posts`, `edit_published_pages`,`delete_published_pages`和的某种组合`delete_published_posts`。这些名称是不言自明的。

# html - 在包装器 CSS IE 问题中居中 2 个 Div

> ID：14505404
> 
> 赞同：0
> 
> 时间：2013-01-24T15:54:19.790
> 
> 标签：html, css, internet-explorer

我试图将两个 div 放在包装 div 内的同一行（最好是居中）。我编写的代码在 FF 和 IE10 中运行良好。几乎每个版本的 IE <10 都不喜欢它。谁能帮忙，谢谢！

html:

```
<div id="home_wrapper">
    <div id="links_location" class="shadow">content</div>
    <div id="iframe_location" class="shadow">content</div>
</div> 
```

CSS：

```
#home_wrapper {
    width: 100%;
    text-align: center;
    border: 1px solid blue;
    float:left;
}
#links_location, #iframe_location {
    display: inline-block;
    background-color:White;
    !important
}
#links_location {
    width:20%;
    height:400px;
    text-align:left;
    border: 1px solid red;
}
#iframe_location {
    height:400px;
    width:70%;
    border: 1px solid black;
} 
```

jsfiddle [_](http://jsfiddle.net/shennessy11/UZGwJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:57:49.317

怎么样：

```
#links_location, #iframe_location
{
    background-color:White;
    float: left;
 } 
```

是你想要的吗？[更新了 jsfiddle](http://jsfiddle.net/ERcAQ/5/)

****更新****

`!important`如果您放置在所有 IE 版本中，一切对我来说都很好`white`，就像这样`background-color: White !important;`。你把你的css放在分号之后搞砸了:)

# akka - 什么时候可以安全地阻止 Akka 2 演员？

> ID：14505405
> 
> 赞同：0
> 
> 时间：2013-01-24T15:54:19.787
> 
> 标签：akka

我知道不建议在`receive`一个actor的方法中阻塞，但我相信是可以做到的（只要不是一次在太多actor中做）。

[这篇文章](http://letitcrash.com/post/29773618510/an-akka-2-terminator)建议将阻塞`preStart`作为解决问题的一种方法，因此推测阻塞`preStart`是安全的。

但是，我试图阻止`preRestart`（不是`preStart`）并且一切似乎都挂起 - 没有更多的消息被记录为收到。

此外，在不安全的情况下阻止，什么是安全的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:42:16.163

在以下情况下阻止是相对安全的`receive`：

1.  被阻塞的actor的总数远小于工作线程的总数。默认情况下有 10 个工作线程，所以 1-2 个阻塞的 actor 就可以了

2.  阻塞 Actor 有自己的专用调度程序（线程池）。其他演员不受影响

当阻止不安全时，好的选择是......不阻止;-)。如果您使用的是固有阻塞的遗留 API，您可以在某个参与者内部维护一个单独的线程池（感觉不对）或使用方法 2。上面 - 将几个线程专用于需要阻塞的参与者子集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:46:15.433

永远不要阻止演员。

如果您的参与者是参与者层次结构的一部分（并且应该是），那么参与者系统无法阻止它。演员的生命周期（监督、监视等）是通过消息传递完成的。停止一个阻塞子的父actor是行不通的。

也许有办法将阻塞条件与演员的生命周期结合起来。但这会导致过度复杂化和不良作风。

所以，最好的方法是在那个演员之外做阻挡部分。例如，您可以通过执行程序服务在单独的线程中运行阻塞代码。

# javascript - 将 _top 窗口的内容替换为 iframe 的内容而不重新加载页面

> ID：14505409
> 
> 赞同：5
> 
> 时间：2013-01-24T15:54:31.010
> 
> 标签：javascript, jquery

是否可以用 iframe 中加载的文档替换浏览器窗口（_top 框架）的内容，而无需发出新的 GET 来加载该文档？

像这样的东西：

```
<html>
<head>
<script type="text/javascript" language="JavaScript">
$(document).ready(function() {
  $("#link").click(function() {
    // should present in the browser window the content of the iframe WITHOUT reload
    // even preserve javascript/head code
    $(document).html($("#frameDestination").html());
  });
});
</script>
</head>
<body>
<a id="link" href="#">full window</a>
<iframe id="frameDestination" src="http://www.some-random-site.com" width="900px" height="500px"></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:19:23.987

在 jQuery 中使用 iframe 时使用 contents()。

```
$("#YourIframe").contents().find("html").html(); 
```

这**仅**在 iframe与父级位于**同一域中时才有效。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:26:16.973

我没有测试过跨域，但是在同一个域上我有这个脚本工作：

```
$(document).ready(function() {
  $("#link").click(function() {
    var iframeBody = document.getElementById("frameDestination").contentDocument,
    head = iframeBody['head'].innerHTML, 
    body = iframeBody['body'].innerHTML;
    $('body').html( body );
    $('head').html( head );
  });
}); 
```

在最新的 Firefox 中，我什至可以在框架中的脚本标记中设置一个变量，并在单击链接后在 _top 中看到该值。

# ios - UIPanGestureRecognizer 翻译 - 保持两点之间的中心并为其添加自由变换

> ID：14505411
> 
> 赞同：0
> 
> 时间：2013-01-24T15:54:34.563
> 
> 标签：ios, transformation, uipangesturerecognizer

**我想要一个视图在其他两个视图之间保持中心，但也可以自由移动，将它自己的变换添加到“居中”变换中。**也许可以总结为：视图从零开始，然后应用使其居中的变换。然后添加它的局部变换

**解释**：我有三个视图，我称之为一、二和三。所有三个视图都可以通过平移手势识别器移动。

如果视图一移动，二和三都遵循在我的`handlePan`方法中基本上使用以下代码：

```
 if (recognizer.view == One){
        Two.center = CGPointMake(Two.center.x + translation.x, Two.center.y + translation.y);
        Three.center = CGPointMake(Three.center.x + translation.x, Three.center.y + translation.y);
     } 
```

`handlePan`视图三通过我的方法中的以下代码保持一和二之间的中心：

```
 float midX = (One.center.x + Two.center.x)/2;
    float midY = (One.center.y + Two.center.y)/2;  
    Three.center = CGPointMake(midX + translation.x, midY+ translation.y); 
```

**这一切都很好。问题是我希望视图三移动“自由”并保持该中心，但添加了它自己的转换。**看到 illo 因为它可能更容易看到我想要做什么。

![在此处输入图像描述](../Images/2d2b8be0e400430cbff5869985ff57b6.png)

我尝试了以下设置，但它并不完全存在：

```
 if (recognizer.view == One){
        Two.center = CGPointMake(Two.center.x + translation.x, Two.center.y + translation.y);
        Three.center = CGPointMake(Three.center.x + translation.x, Three.center.y + translation.y);
     } else if (recognizer.view == Two)  {
        float midX = (One.center.x + Two.center.x)/2;
        float midY = (One.center.y + Two.center.y)/2;  
        Three.center = CGPointMake(midX + translation.x, midY+ translation.y);
     } 
```

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:13:13.973

我解决了。很简单。刚刚创建了一个点（这里我使用了两个浮点数 numX 和 numY）来存储视图三和手势识别器产生的翻译。然后在移动视图二时应用它。这段代码在我的`handlePan`方法中：

```
 if (recognizer.view == One){
    Two.center = CGPointMake(Two.center.x + translation.x, Two.center.y + translation.y);
    Three.center = CGPointMake(Three.center.x + translation.x, Three.center.y + translation.y);
 } else if (recognizer.view == Two)  {
    float midX = (One.center.x + Two.center.x)/2;
    float midY = (One.center.y + Two.center.y)/2;  
    Three.center = CGPointMake(midX + numX, midY+ numY);
 } else if (recognizer.view == Three) {
    numX = numX+translation.x;
    numY = numY+translation.y;
 } 
```

# ubuntu - 将 IP 表规则从一台服务器复制到另一台服务器

> ID：14505413
> 
> 赞同：10
> 
> 时间：2013-01-24T15:54:42.367
> 
> 标签：ubuntu, terminal, iptables

我有一台带有 iptables 规则设置的服务器。我想在新服务器上使用相同的规则。我可以以某种方式复制/粘贴它们或使用终端下载/重新上传它们吗？我在 Ubuntu 上。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T15:56:48.010

是的。保存如下：

```
sudo iptables-save > iptables.conf 
```

恢复如下：

```
sudo iptables-restore < iptables.conf 
```

而且由于它都在一个文本文件中——在这种情况下`iptables.conf`——你可以根据机器特定的参数和场景进行进一步的编辑和调整。

此外，如果您计划在重新启动时保留规则，请考虑`iptables-persistent`安装规则，然后将规则复制到`iptables-persistent`加载它们的区域：

```
sudo cp iptables.conf /etc/iptables/rules.v4 
```

以上是针对 IPv4 规则的。对于 IPV6 规则，请执行以下操作：

```
sudo cp iptables.conf /etc/iptables/rules.v6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:57:00.960

采用

```
sudo iptables-save > [filename] 
```

将它们保存在文件中，然后使用

```
sudo iptables-restore < [filename] 
```

一旦你复制了文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T16:00:44.747

您可以使用`iptables-save`实用程序将规则保存到文件并将`iptables-restore`它们恢复为文件。

然后使用`scp`将保存的规则从一个服务复制到另一个服务。

# google-api - Webfont Loader & Google JSAPI 不能一起加载？

> ID：14505418
> 
> 赞同：0
> 
> 时间：2013-01-24T15:54:51.270
> 
> 标签：google-api, google-webfonts, jsapi, webfont-loader

我不确定为什么，尽管遇到了类似的问题。

尝试使用 webfontloader 从 fonts.com 加载字体，以便在加载函数后调用函数。

```
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>
<script>
   WebFont.load({
      monotype: {
        projectId: 'xxxxxxxxxxxxxxxxxxxx'
      },
      active: function() {
         mainNav();
      }
   }); 
```

但是当我将它包含在 jsapi 中时

```
<script src="https://www.google.com/jsapi"></script> 
```

我在控制台中遇到以下问题： Uncaught TypeError: Cannot call method 'hasAttribute' of null

但是，如果单独加载，它们很好...

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:05:23.827

尝试使用以下 url 加载 webfonts api：

```
<script src="//ajax.googleapis.com/ajax/libs/webfont/1.1.2/webfont.js"></script> 
```

查看以下帖子了解更多详情：[https ://groups.google.com/forum/#!msg/google-ajax-search-api/dWVzQF_YWCM/Y3-R738wh78J](https://groups.google.com/forum/#!msg/google-ajax-search-api/dWVzQF_YWCM/Y3-R738wh78J)

> 我们不再支持新版本库的部分版本别名。任何已经存在的部分版本别名将继续得到支持和更新。原因是像 [https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js这样的 URL](https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js) 这就是说“给我最新版本的 jquery 1.xx）具有非常短的缓存生命周期，因为最新版本可以随时更改。这对性能不利。这对您的网站也不利，如果库在版本之间对其 API 进行重大更改，导致您的页面突然呈现不同。库通常不会有意进行此类更改，但页面有时取决于 API 的未指定极端情况的行为，可能有意或无意地更改为图书馆已更新。
> 
> 因此，我们强烈建议您在引用托管在 Google AJAX API 上的库时指定完整的版本字符串。[您始终可以在https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)找到最新版本 。在这种情况下，最新的 1.9.x 版本当前是 1.9.1，因此我们建议使用 URL [https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js) 来获得稳定的版本和更好的缓存。

（此外，您上面的示例没有结束`</script>`标记。只是想验证这在您自己的代码中不存在）。

# php - 如何使用 PHP 提高从 Oracle 获取数据的速度

> ID：14505427
> 
> 赞同：1
> 
> 时间：2013-01-24T15:55:15.970
> 
> 标签：php, sql, oracle, pdo

我正在开发一个从另一台服务器上的 Oracle 数据库中获取数据的网站。但问题是数据库包含超过 5000 万条记录，并且每秒向数据库添加超过 10 条记录。当我使用以下代码获取记录时，加载页面大约需要 3-4 分钟：

```
<?php
    $qry="SELECT col1, col2, col3 FROM table1 where col1=parameter1";
    $stid = oci_parse($db_con, $qry);
    oci_execute($stid);
    $r = oci_fetch_all($stid, $result, 0, -1, OCI_FETCHSTATEMENT_BY_ROW); //**** PROBLEM
    oci_free_statement($stid);
?> 
```

标记的行需要大量时间来加载数据。我也尝试过使用 oci_fetch_assoc() 函数的 foreach 循环，但同样的问题。我也使用过 PDO，但速度是一样的。此查询检索近 100 条记录。

如何加快页面速度？

我可以自由地使用任何其他技术与 PHP ..

# r - 将值分配给任意数量的接收器

> ID：14505430
> 
> 赞同：3
> 
> 时间：2013-01-24T15:55:33.767
> 
> 标签：r

我有一些比赛的数据，在每场比赛中，有不同数量的球员进球。我现在想将每场比赛的进球数分配给参加那场比赛的球员。最后我想得到每个球员在所有比赛中得分的总和。

**示例**：

```
Game 1: Players A + B + C; Goals: 3; so everyone gets a score of 1
Game 2: Players A + B + D + E; Goals: 8; everyone gets a score of 2
Game 3: Players B + C; Goals: 4; everyone gets a score of 2 
```

**结果**：（这就是如果要创建的内容）

```
A: 3
B: 5
C: 3
D: 2
E: 2 
```

此**数据**以 CSV 格式提供，其中每场比赛的可变球员被放入由竖线 (|) 分隔的单个列中：

```
Players;Goals
A|B|C;3
A|B|D|E;8
B|C;4
E;3 
```

我可以将其读入data.frame：

```
data <- read.csv("demo.csv", header=TRUE, sep=";") 
```

并将玩家信息与 data.frame 中的 Players 列分开：

```
lapply(data$Players, function(x) strsplit(as.character(x), "|", fixed=TRUE)) 
```

**如何将进球栏中的分数分配给这些球员？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:13:39.713

这是使用`base`函数和的东西`*apply`：

```
#input data (from clipboard)
data <- read.table(header=TRUE,sep=";",file='clipboard')
players <- strsplit(as.character(data$Players),"|",fixed=TRUE)
#number of players in a game
data$n.player <- sapply(players,length)
#unique list of players
uni.players <- unique(unlist(players))

goals.per.player <- sapply(uni.players,function(x) {
  #identifies which games (rows of data) each player was in
  games.played <- which(sapply(players, function(y) x %in% y))
  #sums the games played
  sum((data$Goals/data$n.player)[games.played])
})
#A B C D E 
#3 5 3 2 5 
```

# jpa - OpenJPA 孤儿删除不起作用

> ID：14505433
> 
> 赞同：0
> 
> 时间：2013-01-24T15:55:40.467
> 
> 标签：jpa, one-to-many, openjpa

我正在尝试一个具有 OneToMany 单向关系的主子测试用例。我有一个场景，我想通过从子列表中删除一些条目来更新主节点。当我进行合并时，我希望自动删除这些子条目。

我徒劳地试图让这个工作。我也尝试过孤儿移除，但这也没有帮助。有一些建议可以添加 equals 和 hashcode，但也没有用。

非常感谢这方面的任何提示或帮助。谢谢你。

我将 JPA2.0 与 OpenJPA 2.1.0 一起使用

这是我的代码。

```
//Parent class
public class Account {
    private String accountId;
    private String accountNumber;
    private List<SubAccount> subAccounts;

    //followed by getters/setters 
}

//Child class
public class SubAccount {
    private String subAccountId;
    private String subAccountNumber;
    //followed by getters/setters 
} 
```

我的 orm.xml 如下。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<entity-mappings version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">

    <entity name="Account" class="test.data.Account">
        <table name="ACCOUNT" />

        <sequence-generator name="AccountSeq"
            sequence-name="ACCOUNT_TEST_SEQ" />

        <attributes>

            <id name="accountId">
                <column name="ACCOUNT_ID" />
                <generated-value strategy="SEQUENCE" generator="AccountSeq" />
            </id>

            <basic name="accountNumber">
                <column name="ACCOUNT_NO" />
            </basic>

            <one-to-many name="subAccounts" fetch="EAGER"
                target-entity="test.data.SubAccount" orphan-removal="true" >
                <join-column name="ACCOUNT_ID" referenced-column-name="ACCOUNT_ID" nullable="false" updatable="true"/>
                <cascade>
                    <cascade-all />
                </cascade>
            </one-to-many>

        </attributes>
    </entity>

    <entity name="SubAccount" class="test.data.SubAccount">
        <table name="SUBACCOUNT" />

        <sequence-generator name="SubAccountSeq"
            sequence-name="SUBACCOUNT_TEST_SEQ" />

        <attributes>
            <id name="subAccountPK">
                <column name="SUBACCOUNT_ID" />
                <generated-value strategy="SEQUENCE" generator="AccountSeq" />
            </id>
            <basic name="subAccountNumber">
                <column name="SUBACCOUNT_NO" />
            </basic>
        </attributes>
    </entity>

</entity-mappings> 
```

这就是我想要做的。

```
Account acc = (Account)entityMgr.find(Account.class, "1100")
acc.getSubAccounts().remove(0);
entityMgr.merge(acc) 
```

我希望删除子帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:29:55.367

如果级联类型设置为 cascade-all 或 cascade-remove，OpenJPA 将覆盖孤立删除行为。

我不得不使用 cascade-persist、cascade-merge、cascade-refresh 和 cascade-detach 来配置 cascade-type，而不是 cascade-all。

# tridion - 将内容从 Tridion 5.2 导入到 Tridion 2011 SP1 的最佳方式是什么

> ID：14505435
> 
> 赞同：5
> 
> 时间：2013-01-24T15:55:42.503
> 
> 标签：tridion

将内容从 Tridion 5.2 导入到 Tridion 2011 SP1 的最佳方式是什么？或卡波

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T16:43:52.937

要升级 DB，您必须遵循以下路径：5.2 => 5.2 SP1 => 5.3 SP1 => 2011 SP1。此信息可在 www.sdltridionworld.com 上的文档中找到

此外，您还需要：

1.- 重建存储程序。

2.- 重建搜索索引。

3.-优化统计。

如果您只想迁移您正在寻找使用业务连接器从 5.2 提取内容然后使用 CoreService 将其导入 2011 的零碎内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T16:08:41.057

升级数据库呢？还是您要对内容进行消毒？

我可能会尝试 Content Porter（由于成本），但要注意它可能附带的所有依赖项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T09:51:03.990

您是否已经设置了两个不同的 Tridion 环境？你的 5.2 环境中的内容是旧的吗？它已经看到很多更新了吗？代码是否保持完全相同（vbscript？）您的客户真的想要所有内容，还是只想要其中的一部分？

如果它真的只是在代码、设计或实现方面没有任何更改的升级案例，您应该使用 Asier Fernandez 的数据库升级解决方案。

任何其他将成为 Tridion 系统升级的东西，但随着许多其他站点更改，您应该考虑更手动的方法（最终更便宜） Bart Koopman 曾经写过一篇关于它的 ncie 博客：[http://www.tridiondeveloper。 com/how-to-say-goodbye-to-your-migration-tool](http://www.tridiondeveloper.com/how-to-say-goodbye-to-your-migration-tool)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:27:41.393

我想问一下为什么您认为 sdl tridion 建议方式（数据库升级）不在您的选择范围内，因为这确实是最安全的方式（如果升级是您的目标）

如果您还打算清理数据库，那么我建议首先清理不需要的项目（组件、页面、关键字、模板、模式等）。当您无法删除项目时，请在需要清理或断开依赖项时使用 WhereUsed。不要以为 CP export->import 会清理你清理过程中无法删除的项目，如果你不能手动完成，cp 也不能，它只会将项目添加到包裹。

在我看来，升级 CP 迁移的唯一原因是清除旧版本的遗留问题（数据库升级将保留它们）但请记住，损坏的关系/项目将在 CP 中失败，您需要手动创建它们目标系统，但这样您就可以摆脱不会消失的遗留问题

在我看来，仅用于升级，使用 db upgrade，省力，完全受 sdlt 支持。

我的建议是将升级与任何其他请求分开，例如新布局、新功能或清理，这样测试和错误跟踪会容易得多

# .net - 验证 .NET Framework 程序集

> ID：14505441
> 
> 赞同：7
> 
> 时间：2013-01-24T15:55:59.913
> 
> 标签：.net, security, .net-assembly, cil, ngen

我刚刚浏览了我们的[德国 VB.NET 论坛](http://www.vb-paradise.de/programmieren/hauptforum/87169-codemodifikationen-an-framework-assemblies)，有一些有趣的事情让我有些头疼。

实际上可以使用 ReflexIL 或其他一些 IL 编辑器来*编辑*.NET Framework 程序集。您唯一需要绕过的是程序集的强名称签名。更改程序集 IL 后，您必须运行`sn.exe -Vr [assemblyname]`以跳过强名称验证。之后，您必须清除缓存的本机图像。只需浏览`C:\Windows\assembly`目录并删除与您的程序集相关的每个图像。然后重新启动。登录后，运行`ngen install [assemblyname]`. 现在生成了**新**的本机图像。

这行得通。我在我的虚拟环境（Windows XP x86）中验证了这个过程。现在最让我担心的是你可以轻松绕过.NET[`VerifyHash`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.verifyhash.aspx)或. 这实际上也有效。我和我的一个朋友经过测试可以验证这个问题（[见截图](http://www.vb-paradise.de/programmieren/hauptforum/p718868-codemodifikationen-an-framework-assemblies/#post718868)）。那相当容易。[`VerifyData`](http://msdn.microsoft.com/en-us/library/55yk5665.aspx)`RSACryptoServiceProvider`

例如，如果我要创建一个基于 .NET Framework 加密类的许可系统，那么对于使用该框架的系统上的每个 .NET 应用程序，都可以在系统**范围**内**绕过它。**此外，每个人都可以通过挂钩方法来*记录*和*更改我调用的函数的输入。*

 ****现在我的问题是：既然这可能是一个大问题，我该怎么做呢？当然，恶意用户可以只编辑*我的*应用程序，但这不会像在系统范围内那样糟糕。我在考虑一些框架校验和验证，但由于 .NET 框架有很多不同的更新，这似乎是不可能的。

有什么解决方案或建议吗？微软是否以某种方式解决了这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T19:49:58.627

如果攻击者对您的计算机具有管理员访问权限（这是您描述的攻击所必需的），那么您几乎已经迷失了。您可以做的任何事情都可能被攻击者规避。

因此，我认为试图防御这种攻击是完全没有意义的。如果您必须处理不受信任的、可能受到威胁的计算机，那么您根本不能相信它们会做任何敏感的事情，而您必须在自己的服务器上或类似的东西上做。****

# javascript - ms crm 2011 使用 javascript 检索报价详情

> ID：14505442
> 
> 赞同：2
> 
> 时间：2013-01-24T15:55:59.700
> 
> 标签：javascript, dynamics-crm-2011

如何通过javascript检索报价的所有产品（=报价详细信息）？

我尝试了以下代码，但这不起作用：

```
id = quoteid
var options = "$select=ProductId&$filter=QuoteId eq (guid'"+ id + "'";
SDK.REST.retrieveMultipleRecords("QuoteDetail", options, ebcont.crm.quote._successQuoteDetailMultiRetrieve, function(error) {alert(error.message);}, ebcont.crm.quote._multiRetrieveQuoteComplete); 
```

我总是收到以下消息：

```
 Error: 400: Bad Request: operator 'eq' is no compatible with operatortyp 'Microsoft.Crm.Metadata.ComplexTypeInstance'1 ... and 'System.Guid' 
```

有人知道出了什么问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:34:15.640

尝试将 id 添加到`QuoteId`：

```
id = quoteid
var options = "$select=ProductId&$filter=QuoteId/Id eq (guid'"+ id + "'";
SDK.REST.retrieveMultipleRecords("QuoteDetail", options, ebcont.crm.quote._successQuoteDetailMultiRetrieve, function(error) {alert(error.message);}, ebcont.crm.quote._multiRetrieveQuoteComplete); 
```

它是区分大小写的，所以也要小心。我建议首先使用 XrmToolBox 的 FetchXmlBuilder 插件来测试 REST oData 调用。它有一个查看其余网址的选项。只要您的 javascript 生成准确的 url，您就应该很好。

## 更新 1

使用新的（2016 年）CRM WebAPI 端点，我还推荐 Jason Lattimer 的 CRM Rest Builder：[https ://github.com/jlattimer/CRMRESTBuilder/releases](https://github.com/jlattimer/CRMRESTBuilder/releases)

# java - request.getParameter() 说它的 null 时不是

> ID：14505450
> 
> 赞同：0
> 
> 时间：2013-01-24T15:56:34.733
> 
> 标签：java, servlets, netbeans, null, nullpointerexception

嗨，我有一个 servlet，它在提交按钮上从 jsp 中获取参数。其中一个参数是报告为空。然而，这种情况并非如此。有问题的文本输入由会话变量自动填充，并且绝对不为空，并且可以在页面上的文本框中看到。但是当在 servlet 内部时，java 控制台指示变量为空？下面是填充框并读取参数的代码。

```
 <input type="text" id="cID" value="<%= session.getAttribute("cID")%>" readonly="readonly"> 
```

读取参数：

```
String cID = request.getParameter("cID"); 
```

在netbeans中将cID打印到控制台时，据报道它是空的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T15:57:54.167

将名称属性添加到输入标签

```
<input type="text" id="cID" name="cID" value="<%= session.getAttribute("cID")%>" readonly="readonly"> 
```

定义发送到服务器的参数名称的是`name`属性，而不是属性。纯粹是客户端的事情。`id``id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:58:46.443

我认为你需要写：

```
<input type="text" id="cID" value="<%= session.getAttribute(\"cID\")%>" readonly="readonly"> 
```

# unity3d - Everyplay 中有哪些元数据键可用？

> ID：14505452
> 
> 赞同：2
> 
> 时间：2013-01-24T15:56:39.540
> 
> 标签：unity3d, everyplay

在 Everyplay Unity3D 指南页面上，这三行作为在 Everyplay 中使用元数据的示例给出。

```
Everyplay.SharedInstance.SetMetadata("level", levelNumber);
Everyplay.SharedInstance.SetMetadata("level_name", levelName);
Everyplay.SharedInstance.SetMetadata("score", score) 
```

除了这三个之外，还有其他可用的元数据键吗？您可以为您的游戏定义自己的元数据，而不仅仅是使用预定义的键吗？找不到比上述示例更多的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:01:38.193

您可以并且应该尽可能多地提供有关视频的元数据，因为有几个功能可以使用已经在工作的数据。视频提供的元数据有几个预期的（未来）用途。目前只有 score 和 level_name 与 Everyplay 上的视频一起显示（例如：[http](http://everyplay.com/videos/8106) ://everyplay.com/videos/8106 ）。

开发人员可以（在不久的将来）配置在视频中显示哪些元数据，赛车游戏可以显示时间、赛道和圈数，而 FPS 游戏可以显示杀戮和死亡。此外，我们已经在我们的 API 中开发功能，以允许开发人员使用元数据来查询现有视频，例如从过去 10 天的级别 1 中获取按“分数”排序的视频列表等。

举个简单的例子，下楼梯的元数据（上面链接中的视频）随同一个视频一起提供：

```
metadata: {
    somersaults: 1,
    level: 60,
    decapitation: false,
    bifurcation: false,
    push_force_z: -3957.182,
    push_force_y: 1773.326,
    distance: -1,
    push_pos_z: 8.371746,
    push_force_x: -1675.732,
    push_pos_y: 24.18944,
    push_body_name: "LeftForearm",
    ragdoll_custom_face: true,
    push_pos_x: -0.6025434,
    push_body_id: 2189472344,
    leaderboard_id: 1208019,
    score: 3802645,
    level_name: "Revolting Doors",
    ragdoll_breakability: false,
    distance_leaderboard_id: 0,
    ragdoll_name: "Mr. Dismount",
    ragdoll: 0
} 
```

# sql - 更新文本字段时出现转换错误 - MS Access

> ID：14505461
> 
> 赞同：0
> 
> 时间：2013-01-24T15:57:08.327
> 
> 标签：sql, ms-access

我正在尝试更新文本字段。将数据移动到另一列并截断，因为它太长了。

更新语句如下所示。（已编辑）

```
UPDATE Feuil1 SET [Occupant 2] = SWITCH
(
[Occupant 2] IS NOT NULL, [Occupant 3],
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 3), mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 4), mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 5), mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 6), mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 7), mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
     (LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 2), '',
     (LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 1), '',
     [Occupant 1] LIKE '* & *', mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
     [Occupant 1] LIKE '* ET *', mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," "),30),
     (LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 0), ''
), [Occupant 1] = SWITCH
(
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 3), mid([Occupant 1],1,InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," ")),
(LEN([Occupant 1]) - LEN(REPLACE([Occupant 1], ' ', '')) = 4), mid([Occupant 1],1,InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," ")),
[Occupant 1] LIKE '* & *', (replace([Occupant 1], ' & ' & mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," ")),InStr(InStr(2,[Occupant 1]," ")), '')),
[Occupant 1] LIKE '* ET *', (replace([Occupant 1], ' & ' & mid([Occupant 1],InStr(InStr(1,[Occupant 1]," ")+1,[Occupant 1]," ")),InStr(InStr(2,[Occupant 1]," ")), ''))
)
WHERE [Occupant 1] IS NOT NULL 
```

我总是收到转换类型错误，但我不知道为什么。我正在使用自己修改的数据更新文本字段。所有涉及的列都是文本。

我尝试使用 Val()、Cstr() 函数，结果相同。

附加信息：似乎处理了一些数据，但我找不到原因。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:03:09.317

在您的声明的开头，您有以下几行：

```
UPDATE Feuil1 SET [Occupant 2] = SWITCH
(
[Occupant 2] IS NOT NULL, [Occupant 3] = [Occupant 2], 
```

您在这里所说的是，如果 [Occupant 2] IS NOT NULL 则将 [Occupant 2] 设置为等于 [Occupant 3] = [Occupant 2] 的**布尔结果**（即，`True`或`False`）。我猜您想将其更改为：

```
UPDATE Feuil1 SET [Occupant 2] = SWITCH
(
[Occupant 2] IS NOT NULL, [Occupant 3], 
```

或者，更有可能：

```
UPDATE Feuil1 SET [Occupant 2] = SWITCH
(
[Occupant 2] IS NOT NULL, [Occupant 2], 
```

# uml - 在聚合类中实现连接

> ID：14505463
> 
> 赞同：2
> 
> 时间：2013-01-24T15:57:18.663
> 
> 标签：uml, aggregation, class-diagram

在下图中，“Copy”类和“Book”类显示了一个聚合（Book**有一个**Copy）。所有其他类都是“复制”类的子类。现在，假设有一个`Member`类，它必须访问“Copy”类的“Lending”和“Borrow”子类。' ' 类唯一`Member`应该知道的是“accessionNumber”。

如果我们从代码的角度考虑这一点，我的“ `Book`”类包含一个“”数组`Copy`。

![在此处输入图像描述](../Images/8b98c21aa7da451a60968aef2e3d3a37.png)

我如何知道某本书的入藏号？

假设我需要`copies`数组中第三本书的“accessionNumber”。但是数组在类中，从类`Book`到类没有连接。`Book``Copy`

如果我们创建一个返回连接，会不会像“Copy has a Book”，或者更有意义的是，像“Subject has Student”（以著名的聚合示例“Student **has a** Subject”为例）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:37:22.793

> 如果我们创建一个连接回来，会不会像“复制有一本书”

不，它不会。简单的[依赖](http://en.wikipedia.org/wiki/Dependency_(UML))关系（例如 C++ 中的引用或非拥有指针）不是您从聚合或组合的更强关联中获得的“拥有”或“拥有”关系。这听起来像你想要的。

# vbscript - 在 VBScript 中将十六进制字符串（图像）转换为 base64（用于浏览器渲染）

> ID：14505466
> 
> 赞同：1
> 
> 时间：2013-01-24T15:57:24.780
> 
> 标签：vbscript

我有一个输出 .bmp 验证码图像的脚本。

图像以十六进制构建，并转换为二进制并通过`response.binaryWrite chrB(CByte(myHexImage))`（作为图像 mime 类型 = bmp）发送到浏览器

我希望选择摆脱这种情况（更改 mime 类型等），而只向输出发送一些内容，如下所示：

`data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2 ...`

（除了我的图像是BMP）

有没有一种快速简便的方法可以在 vbscript 中将该十六进制或二进制转换为 base64？如上所述，这是我现在实施的一个片段。

我怎样才能改变这个，所以我输出到屏幕上，有效的十六进制格式（然后我可以很容易地转换为base64）或直接base64？

```
 Dim sBmpEndLine, sBmpInfoHeader, sBmpHeader, sTmpHex

    If (m_iBmpWidth Mod 4) <> 0 Then
        sBmpEndLine = string((4 - (m_iBmpWidth Mod 4)) * 2, "0")
    Else
        sBmpEndLine = vbNullString
    End If

    sBmpInfoHeader = array("28000000", "00000000", "00000000", "0100", "0800", "00000000", "00000000", "120B0000", "120B0000", "00000000", "00000000")
    sBmpInfoHeader(1) = formatHex(hex(m_iBmpWidth), 4, 0, True)
    sBmpInfoHeader(2) = formatHex(hex(m_iBmpHeight), 4, 0, True)
    sBmpInfoHeader(6) = formatHex(hex((m_iBmpHeight * m_iBmpWidth) + (m_iBmpHeight * (len(sBmpEndLine) / 2))), 4, 0, True)
    sBmpInfoHeader(9) = formatHex(hex(len(m_sBmpColorMap) / 8), 4, 0, True)
    sBmpInfoHeader(10) = sBmpInfoHeader(9)
    sBmpHeader = array("424D", "00000000", "0000", "0000", "00000000")
    sBmpHeader(1) = formatHex(hex((len(join(sBmpHeader, "")) / 2) + (len(join(sBmpInfoHeader, "")) / 2) + (len(m_sBmpColorMap) / 2) + (m_iBmpHeight * m_iBmpWidth) + (m_iBmpHeight * (len(sBmpEndLine) / 2))), 4, 0, True)
    sBmpHeader(4) = formatHex(hex((len(join(sBmpHeader, "")) / 2) + (len(join(sBmpInfoHeader, "")) / 2) + (len(m_sBmpColorMap) / 2)), 4, 0, True)

    sendHex(join(sBmpHeader, ""))
    sendHex(join(sBmpInfoHeader, ""))
    sendHex(m_sBmpColorMap)
    For y = m_iBmpHeight To 1 Step -1
        For x = 1 To m_iBmpWidth
            sTmpHex = m_aBitmap(y, x)
            If sTmpHex = vbNullString Then
                sendHex(m_sBgColor)
            Else
                sendHex(sTmpHex)
            End If
        Next
        sendHex(sBmpEndLine)
    Next

    Response.Flush 
```

这是`sendHex()`功能：

```
Private Sub sendHex(valHex)

    Dim iCntHex
    For iCntHex = 1 To len(valHex) Step 2
        'Response.BinaryWrite chrB(CByte("&H" & mid(valHex, iCntHex, 2)))
        response.Write "&H" & mid(valHex, iCntHex, 2)
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:49:03.503

`Microsoft.XMLDOM`内置了 和 的`bin.base64`转换器`bin.hex`。我编写了演示如何使用它的函数：

```
Function TextToBinary(text, dataType)
  Dim dom
  Set dom = CreateObject("Microsoft.XMLDOM")
  dom.loadXML("<HELLO/>")
  dom.documentElement.nodeTypedValue = text
  dom.documentElement.dataType = dataType
  TextToBinary = dom.documentElement.nodeTypedValue
End Function

Function BinaryToText(binary, dataType)
  Dim dom
  Set dom = CreateObject("Microsoft.XMLDOM")
  dom.loadXML("<HELLO/>")
  dom.documentElement.dataType = dataType
  dom.documentElement.nodeTypedValue = binary
  dom.documentElement.removeAttribute("dt:dt")
  BinaryToText = dom.documentElement.nodeTypedValue
End Function

Function HexToBase64(strHex)
  HexToBase64 = BinaryToText(TextToBinary(strHex, "bin.hex"), "bin.base64")
End Function

Function Base64ToHex(strBase64)
  Base64ToHex = BinaryToText(TextToBinary(strBase64, "bin.base64"), "bin.hex")
End Function 
```

以下是它们的用法示例：

```
MsgBox HexToBase64("41")
MsgBox Base64ToHex("QQ==") 
```

还可以将其`ADODB.Stream`视为处理二进制文件的一种方式。它将适用于这些例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:24:14.230

我能够得到这个工作。这里是如何。

在 sendHex 中，我删除了该`&H`部分，并将字符串包裹在 hex() 中：

```
Private Sub sendHex(valHex)
    Dim iCntHex
    For iCntHex = 1 To len(valHex) Step 2
    If len( mid(valHex, iCntHex, 2)) = 1 Then 
        response.write "0"
    end if 
    response.write mid(valHex, iCntHex, 2)
    Next
End Sub 
```

这会产生这样的字符串输出（以 2 个十六进制字符的字节字符串形式）：

`424d1e050000000000003e00000028000000340000001800000001000`

然后我可以将正确的十六进制字符串转储到 a`HEX`中`base64`，如下所示（不是我写的，而是 Richard Mueller 写的 - [http://www.rlmueller.net/Base64.htm](http://www.rlmueller.net/Base64.htm)）

```
Function HexToBase64(strHex)
    ' Function to convert a hex string into a base64 encoded string.
    ' Constant B64 has global scope.
    Dim lngValue, lngTemp, lngChar, intLen, k, j, strWord, str64, intTerm

    intLen = Len(strHex)

    ' Pad with zeros to multiple of 3 bytes.
    intTerm = intLen Mod 6
    If (intTerm = 4) Then
        strHex = strHex & "00"
        intLen = intLen + 2
    End If
    If (intTerm = 2) Then
        strHex = strHex & "0000"
        intLen = intLen + 4
    End If

    ' Parse into groups of 3 hex bytes.
    j = 0
    strWord = ""
    HexToBase64 = ""
    For k = 1 To intLen Step 2
        j = j + 1
        strWord = strWord & Mid(strHex, k, 2)
        If (j = 3) Then
            ' Convert 3 8-bit bytes into 4 6-bit characters.
            lngValue = CCur("&H" & strWord)

            lngTemp = Fix(lngValue / 64)
            lngChar = lngValue - (64 * lngTemp)
            str64 = Mid(B64, lngChar + 1, 1)
            lngValue = lngTemp

            lngTemp = Fix(lngValue / 64)
            lngChar = lngValue - (64 * lngTemp)
            str64 = Mid(B64, lngChar + 1, 1) & str64
            lngValue = lngTemp

            lngTemp = Fix(lngValue / 64)
            lngChar = lngValue - (64 * lngTemp)
            str64 = Mid(B64, lngChar + 1, 1) & str64

            str64 = Mid(B64, lngTemp + 1, 1) & str64

            HexToBase64 = HexToBase64 & str64
            j = 0
            strWord = ""
        End If
    Next
    ' Account for padding.
    If (intTerm = 4) Then
        HexToBase64 = Left(HexToBase64, Len(HexToBase64) - 1) & "="
    End If
    If (intTerm = 2) Then
        HexToBase64 = Left(HexToBase64, Len(HexToBase64) - 2) & "=="
    End If

End Function 
```

这会将上面的内容转换为 base64，我可以使用这样的输出（例如在浏览器 url 栏中）将其作为图像查看：

`data:image/bmp;base64,Qk0eBQAAAAAAAD4AAAAo...`

# javascript - Kendo UI Grid 自定义命令重定向

> ID：14505476
> 
> 赞同：1
> 
> 时间：2013-01-24T15:57:58.620
> 
> 标签：javascript, spring, jsp, kendo-ui

我有一个工作网格（字段是名称和 ID）：

```
<grid stuff>
    <kendo:grid-column width="80px">
        <kendo:grid-column-command>
            <kendo:grid-column-commandItem name="delete" text="Delete">
                <kendo:grid-column-commandItem-click>
                //Here I want to grab this worker id and redirect the user to the url workerDelete.html?Id
                </kendo:grid-column-commandItem-click>
            </kendo:grid-column-commandItem>
        </kendo:grid-column-command>
    </kendo:grid-column>
    <kendo:grid-column width="80px">
        <kendo:grid-column-command>
            <kendo:grid-column-commandItem name="update" text="Update">
                <kendo:grid-column-commandItem-click>
                    // here I want to grab this worker id and redirect the user to the url workerUpdate.html?Id
                </kendo:grid-column-commandItem-click>
            </kendo:grid-column-commandItem>
        </kendo:grid-column-command>
    </kendo:grid-column>
</grid stuff> 
```

我需要知道当用户按下自定义按钮并更改视图时如何从行中捕获数据，并将数据传递到查询字符串上。我正在使用jsp和spring。

我尝试使用以下代码，但没有奏效：

```
<script>
    function deleteWorker() {
        var grid = $('#grid').data('kendoGrid');
        var row = grid.dataItem(grid.select());
        var id = row.id;
        window.location.href = "/workerDelete.html?"+cpf; 
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:36:16.997

您需要定义`grid-column-command`如下：

```
<kendo:grid-column-command>
    <kendo:grid-column-commandItem name="update" text="Update" click="deleteWorker"/>
</kendo:grid-column-command> 
```

`deleteWorker`功能为：

```
 function deleteWorker(e) {
        var tr = $(e.currentTarget).closest("tr");
        var item = $("#grid").data("kendoGrid").dataItem(tr);
        // Do whatever else you need
    } 
```

在这个功能`item`是剑道网格`dataItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:25:45.707

使用模板列。模板可以是一个用**k-button** 类装饰的按钮（所以它看起来像一个剑道按钮）和自定义类，如**deleteWorker**类。

然后您可以在初始化网格时添加委托事件处理程序，例如：

```
$('#gridName').on('click','.deleteWorker',function(){
    var tr = $(this).closest('tr');
    var rowItem = grid.dataItem(tr);
    var id = rowItem.id;
    window.location.href = "/workerDelete.html?"+id;
}) 
```

# python - python中的周期性定时器，周期小

> ID：14505478
> 
> 赞同：2
> 
> 时间：2013-01-24T15:58:03.573
> 
> 标签：python, timer

使用 Timer 类并在可调用对象中重新启动计时器，是在 python 的后台运行周期性计时器的标准方法。

这有两个主要缺点：

*   它不是真正的周期性：计时器的设置，...
*   它为每个时期创建一个新线程

Timer 类有替代品吗？看过sched类，但是在MainThread中运行会阻塞，不建议在多线程环境下运行。

如何在 python 中使用高频周期性计时器（100 ms 周期），例如在收集批量数据发送到数据库时定期清空文档队列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:37:06.967

我想出了以下替代方案：

```
import threading
import time

class PeriodicThread(StoppableThread):
    '''Similar to a Timer(), but uses only one thread, stops cleanly and exits when the main thread exits'''

    def __init__ (self, period, callable, *args, **kwargs):
        super(PeriodicThread, self).__init__()
        self.period   = period
        self.args     = args
        self.callable = callable
        self.kwargs   = kwargs
        self.daemon   = True

    def run(self):
        while not self.stopped():
            self.callable(*self.args, **self.kwargs)
            time.sleep(self.period) 
```

# c# - 有没有一种简单的方法可以检测 Windows Phone 8 上的抖动？

> ID：14505482
> 
> 赞同：4
> 
> 时间：2013-01-24T15:58:15.840
> 
> 标签：c#, windows-phone-7, windows-phone-8, gesture

我需要检测 Windows Phone 8 设备上的抖动运动，以便启动特定操作。我怎样才能做到这一点 ？

我发现微软为 WinPhone7 制作的“ShakeGesture.dll”库多次提及，但唯一可用的地方（AppHub）被开发中心网站取代......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:46:06.420

这很奇怪。看起来 AppHub 到 DevCenter 的重命名破坏了下载链接。

同时，我已将库上传到我的域，直到这些链接得到修复 @ [http://JustinAngel.net/Storage/ShakeGestures.zip](http://JustinAngel.net/Storage/ShakeGestures.zip)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T16:07:44.267

以下是如何使用摇动手势库的示例：

[http://blogs.microsoft.co.il/blogs/arik/archive/2011/04/01/shake-gestures-library-a-windows-phone-recipe.aspx](http://blogs.microsoft.co.il/blogs/arik/archive/2011/04/01/shake-gestures-library-a-windows-phone-recipe.aspx)

您应该能够添加对 ShakeGestures.dll 程序集的引用以开始使用。如果您使用的是 Windows Phone 8 SDK，我相信该库已包含在内 - 您只需添加参考。

**更新：**

您应该可以通过以下链接下载它：http: [//go.microsoft.com/fwlink/ ?LinkId=219094](http://go.microsoft.com/fwlink/?LinkId=219094)

我在[这里](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx#BKMK_Sensors)找到了。如果您向下滚动到大约 2/3 处的“位置和传感器”，则会有一个下载手势库的链接以及一个示例。

**更新 2：**

唔。下载链接似乎*是*示例项目。ShakeGestures.dll 似乎也不在其中。我的电脑上没有 VS2012，但如果你有，你可以打开示例解决方案，看看它是否以某种方式引用了那个 DLL，也许看看它指向哪里？看来它*必须*使用它......我只是无法在VS2010中打开它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T20:24:23.963

1.  从 Windows Phone 开发人员示例下载 ShakeGestureLibraryCS： [http ://code.msdn.microsoft.com/wpapps/Shake-Gesture-Library-04c82d5f](http://code.msdn.microsoft.com/wpapps/Shake-Gesture-Library-04c82d5f)

2.  下载 C# 项目并构建（用于发布）以创建“ShakeGestures.dll”

3.  添加对您的 WindowsPhone 项目的引用。

# sql - 启用正确的权限以允许 SQL Server 数据库帐户通过存储过程批量插入

> ID：14505483
> 
> 赞同：0
> 
> 时间：2013-01-24T15:58:19.100
> 
> 标签：sql, vb.net, sql-server-2012, bulkinsert

我有一个存储过程，我试图从 SQL Server 2012 上运行的命令行 vb.net 程序调用它：

```
CREATE TABLE #ftpData(ftp_Email varchar(150) COLLATE DATABASE_DEFAULT, ftp_Segment varchar(1) COLLATE DATABASE_DEFAULT)
BULK INSERT #ftpData FROM 'C:\Users\Administrator\Documents\tempSegFiles\segmentation_.csv'
WITH(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
) 
```

当我从管理工作室运行它时，它会成功执行。当我从我的 vb.net 程序调用存储过程时，我得到了错误

> *无法批量加载，因为无法打开文件“xxx”。操作系统错误代码 5（拒绝访问。）*

我登录用来调用存储过程的 SQL 帐户具有更改、执行、插入和管理批量操作的权限。它还对 bulkadmin、diskadmin、public 具有服务器范围的安全权限。

还有其他需要的选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:08:15.270

“访问被拒绝”错误表明问题在于访问您尝试批量插入的 CSV 文件。确保执行命令行（和存储过程）的任何帐户也具有读取 CSV 文件的权限。

更新：我看到您正在使用 SQL 登录来运行该过程。[请参阅此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms175915.aspx)中标题为“安全注意事项”的部分。以机智：

> 如果用户使用 SQL Server 登录，则使用 SQL Server 进程帐户的安全配置文件。

# php - FLV 文件缓存。设置标题

> ID：14505485
> 
> 赞同：1
> 
> 时间：2013-01-24T15:58:22.193
> 
> 标签：php, curl, flv

我的服务器上有 flv 文件，这些文件的内容不断变化，但名称不一定会更改。

我遇到了一个问题，即 flv 文件发送将文件设置为缓存的标头。由于有时同一用户可能需要稍后具有不同内容的同一文件，这些文件需要告诉浏览器不要缓存它们。

我尝试使用类似于 PHP 的 header() 命令的东西，但是当我运行时：

```
Curl -I myfile.com/file1.flv 
```

标题仍然存在。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:59:17.187

我不确定你是如何尝试使用 PHP 的，它是 apache 正在处理和分派文件，所以最好从那里开始。

试试下面的：

**1）**在 apache 上启用 headers.load（headers 模块）。否则不会工作。

**2）**将以下添加到.htaccess。这将捕获以下所有格式的文件类型并将它们设置为不缓存。

```
<FilesMatch "\.(jpg|gif|js|css|ico|swf|zip|pdf|doc|htc|xls|rtf|odt|wav|mp3|avi|wmv|mov|txt|flv)$"> FileETag None
<IfModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate" Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</IfModule>
</FilesMatch> 
```

**3）**重启阿帕奇。

**4)**再次尝试“curl -i www.url.com/file.flv”命令。

您应该看到标题告诉文件不要缓存。

# macos - 在Mac中重命名没有突出显示扩展名的文件名

> ID：14505486
> 
> 赞同：4
> 
> 时间：2013-01-24T15:58:26.530
> 
> 标签：macos, filenames, rename, highlight, finder

当我按回车键重命名文件名时，会自动选择整个文件名（突出显示），包括扩展名。这发生在某些文件类型中，包括 .SRT。在大多数文件类型中，这不会发生。它们是最知名的文件类型，例如 JPG 和 TXT。我尝试将默认应用程序设置为此文件类型，但这不能解决问题，当按回车键（重命名文件名）时，我仍然会突出显示整个文件名（包括扩展名）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:22:37.703

您的系统无法将 .srt 识别为有效的扩展名。您需要安装一个应用程序，该应用程序将“告诉”操作系统有关此扩展程序的信息。

为我做这件事的应用程序是[VLC](http://www.videolan.org)

您还可以在此处找到更多信息：

[https://superuser.com/questions/371892/osx-assign-extension-to-content-kind](https://superuser.com/questions/371892/osx-assign-extension-to-content-kind)

# java - 获取类 不创建数组

> ID：14505488
> 
> 赞同：0
> 
> 时间：2013-01-24T15:58:27.093
> 
> 标签：java, arrays, generics

给定 a`Class<T>`有没有办法在`Class<T[]>`不首先通过创建数组的情况下获得 a `Array.newInstance`？即使这样也不能真正达到我想要的效果，因为`Array.newInstance`会返回 type 的东西`Object`，所以我仍然会做一个未经检查的演员表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:05:13.213

使用[Class.forName()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)：

```
Class<?> arrayofTsClass = Class.forName("[L" + tClass.getName() + ";"); 
```

# javascript - HTML5 音频有时无法加载

> ID：14505495
> 
> 赞同：1
> 
> 时间：2013-01-24T15:58:54.033
> 
> 标签：javascript, html, audio, html5-audio

我`AudioClass`在 javascript 中有一个类来播放音频，如下所示：（伪代码）

```
var AudioClass = function() {
     this.audioElement;
     .
     .
     .
     this.load = function(audioSource) {
         this.audioElement = //create Audio, set source etc.
         this.audioElement.addEventListener("loadedmetadata", function(){
                //some code
         });
     }

     this.play = function(from, to) {
         if(isNaN(this.audioElement.duration)) {    return; }  //line 1
         this.audioElement.currentTime = from/1000;   //line 2   //from & to in milliseconds  
         setTimeout(function() {
               //pause audio.
         }, to-from);
     }
} 
```

我正在使用`Audio`如下：

```
/* the below lines are executed on document load. (playing background music) */
var audioInstance = new AudioClass();
audioInstance.load(audioSrc);
audioInstance.play(20000);   //line 3  //20 seconds

/* the below line is used at other places whenever i need sound */
audioInstance.play(40000);   //40 seconds 
```

当我尝试在“第 3 行”播放音频时，有时音频没有加载，所以它正在抛出`INVALID_STATE_ERR. DOM EXCEPTION 11 at line 2`. 当我检查音频持续时间时，它是`NaN`. 所以我添加了“第 1 行”来检查是否持续时间，以便在加载音频之前`isNaN()`它不会尝试设置。`currentTime`

这里的问题是有时音频的持续时间总是 NaN。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:24:43.000

您必须创建回调以在加载音频时播放音频。每当您在其他地方调用 audio.play 时它都会起作用，因为那时音频已加载。我建议你这样做：

```
var Audio = function() {
     this.audioElement;
     .
     .
     .
     this.load = function(audioSource,callback) {
         this.audioElement = //create Audio, set source etc.
         this.audioElement.addEventListener("loadedmetadata", function(){
                //some code
                if(callback!=null)
                    callback();
         });
     }

     this.play = function(from, to) {
         if(isNaN(this.audioElement.duration)) {    return; }  //line 1
         this.audioElement.currentTime = from/1000;   //line 2   //from & to in milliseconds  
         setTimeout(function() {
               //pause audio.
         }, to-from);
     }
} 
```

然后像这样使用它：

```
var audio = new Audio();
audio.load(audioSrc,function()
{
audio.play(20000);  
}); 
```

对类似问题的回答显示了如何在开始使用之前预加载所有音频（如果您有其他音频）： [Proper onload for <audio>](https://stackoverflow.com/questions/9696948/proper-onload-for-audio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:26:26.520

在注册到元素事件`loadeddata`甚至更好的回调中播放声音。（请参阅[javascript audio onload](https://stackoverflow.com/questions/8256915/javascript-audio-onload)和类似问题。）`canplaythrough``audio`

# java - 使用 Apache CXF wsdl2java 生成具有完整构造函数的类

> ID：14505496
> 
> 赞同：2
> 
> 时间：2013-01-24T15:59:00.463
> 
> 标签：java, jax-ws, cxf, axis, wsdl2java

有没有办法配置 Apache CXF wsdl2java 来生成一个包含所有类字段的构造函数？现在只生成空的默认构造函数以及返回的设置器。这可能会导致非常笨拙的代码。我正在从生成完整构造函数的轴 1.4 过渡，因此导致很多代码被破坏。

我正在从命令行运行 wsdl2java。我没有使用 maven/ant，只是试图生成 java 文件，所以 maven 插件对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:16:13.073

您想要找到一个 JAXB 插件来实现这一点。我不知道一个。与其使用构造函数设置所有字段，不如使用流利的设置器。有一个 JAXB 插件可以做到这一点，称为“jaxb-fluent-api”。我希望您最终可以构建一个讨厌的 wsdl2java 命令行来执行此操作，但是您最好编写一个实际的构建脚本，希望使用 Maven。

请参阅这些[使用 "cxf-codegen-plugin" 引用 JAXB 扩展的示例](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)。

# java - Java中带有泛型参数的for循环

> ID：14505500
> 
> 赞同：1
> 
> 时间：2013-01-24T15:59:14.430
> 
> 标签：java, generics, parameters

简短的问题 - 它应该如何工作？

```
private <T> boolean hasElement(T array, T element) {
    for (T el : array) {
        if (el.equals(element)) {
            return true;
        }
    }
    return false;
} 
```

现在它在 for 循环开始的行中显示错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T16:01:09.263

```
private <T> boolean hasElement(T[] array, T element) {
                                ^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:02:52.083

尝试这个

```
private <T> boolean hasElement(T[] array, T element) {
    for (T el : array) {
        if (el.equals(element)) {
            return true;
        }
    }
    return false;
} 
```

并不是说虽然通用版本更好，但这个版本也可以编译和工作

```
private boolean hasElement(Object[] array, Object element) {
    for (Object el : array) {
        if (el.equals(element)) {
            return true;
        }
    }
    return false;
} 
```

# iphone - 如何在不破坏控件的情况下判断用户何时点击或拖动控件？

> ID：14505507
> 
> 赞同：0
> 
> 时间：2013-01-24T15:59:28.923
> 
> 标签：iphone, ios, xamarin.ios

这是我的情况：我在导航控制器中有一个 UISearchBar 和一个 UITableView。当用户在搜索栏中点击时，键盘会弹出，因此用户可以键入搜索字符串，如下所示：

![在此处输入图像描述](../Images/d9ab8e0b60912674891443ea6862d1d0.png)

但是键盘遮住了列表，所以我想这样做，如果用户点击桌子，键盘就会消失，我遇到了令人惊讶的困难。

1.  如果我使用 TapGestureRecognizer，我可以判断用户是否在任何地方点击，但是当他们点击桌子时，正常的桌子事件不起作用。
2.  我尝试了其他东西（现在不记得是什么了），如果用户点击表格，我得到了事件，但没有点击和拖动，这很常见，所以这还不够。

我想要的是表本身上的 TouchDownInside 事件，因此当表获得任何类型的用户输入时，我可以关闭键盘，但这似乎不存在。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:03:01.600

一个简单的解决方案是在 UITableView 滚动时捕获，因为 UITableView 扩展了 UIScrollView，您可以查找 scrollViewDidScroll: 并使搜索栏退出第一响应者以使键盘消失，同样可以使用 scrollViewWillBeginDragging: 方法完成

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [searchBar resignFirstResponder];
} 
```

在你 UITableViewDelegate 上实现它，因为它表现为你的 UITableView 的委托

更多信息在

[http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/](http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:05:44.777

> 如果我使用 TapGestureRecognizer，我可以判断用户是否在任何地方点击，但是当他们点击桌子时，正常的桌子事件不起作用。

您可以尝试`cancelsTouchesInView`将点击手势识别器设置为 NO：

```
tapGestureRecognizer.cancelsTouchesInView = NO; 
```

即使手势被识别，这也应该允许将触摸转发到视图。

您可能还需要为您的手势识别器和以下方法定义一个委托：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
{
    return YES;
} 
```

这是假设桌子还通过手势识别器管理其手势，从而允许两者可以同时工作。

# javascript - 解析谷歌趋势 - JS对象

> ID：14505508
> 
> 赞同：-1
> 
> 时间：2013-01-24T15:59:28.607
> 
> 标签：javascript, html, parsing, html-parsing

我试图在这里的上升表中获取搜索词及其值：

[http://www.google.com/trends/explore#cat=0-14&date=today%207-d&cmpt=q](http://www.google.com/trends/explore#cat=0-14&date=today%207-d&cmpt=q)

我无法弄清楚它们所在的 html 标记/类/路径。我该如何解决？我尝试查看源代码，但没有太大帮助。

非常感谢任何帮助 - 谢谢！安托万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:21:24.460

以下代码段将返回一个数组数组（总体数组包含页面中每个表的值）。每个数组元素都有一个数组，其中每个表格行都是一个对象，分为“术语”和“值”。

```
var tableValues = [];
var t = document.querySelectorAll(".trends-table-data");
if(t.length>0){
     var rows, row, cells, values;
     for(var i=0; i<t.length; i++){
          values = [];
          rows = t[i].getElementsByTagName("tr");
          for(var r=0; r<rows.length; r++){
               row = rows[r];
               if(row.className.indexOf('trends-table-row')===-1) continue;
               cells = row.getElementsByTagName("td");
               values.push({
                   term: cells[0].innerText.replace(/^\s+|\s+$/g, ''),
                   value: cells[1].innerText.replace(/^\s+|\s+$/g, '')
               });
          }
          tableValues[i] = values;
     }
     console.log(tableValues);
} 
```

由于页面上有两个表，因此您引用的页面的输出是：

```
tableValues = [[{"term":"friv","value":"100"},{"term":"baby","value":"55"},{"term":"hot","value":"50"},{"term":"girls","value":"45"},{"term":"games","value":"45"},{"term":"juegos","value":"30"},{"term":"العاب","value":"25"},{"term":"love","value":"25"},{"term":"bible","value":"20"},{"term":"india","value":"20"}],[{"term":"sophiya haque","value":"Breakout"},{"term":"temple run 2","value":"+3,200%"},{"term":"крещение","value":"+700%"},{"term":"dear abby","value":"+450%"},{"term":"temple run","value":"+200%"},{"term":"amber heard","value":"+130%"},{"term":"plein champ","value":"+130%"},{"term":"paranormal activity 4","value":"+90%"},{"term":"scientology","value":"+70%"},{"term":"mama","value":"+60%"}]] 
```

# php - 移动应用程序开发 - 如何创建服务器实现

> ID：14505509
> 
> 赞同：6
> 
> 时间：2013-01-24T15:59:28.607
> 
> 标签：php, authentication, mobile, joomla2.5

**编辑**最初我认为 Oauth2 是要走的路，但也许不是。我暂时将其排除在这个问题之外，因为它令人困惑。

我正在创建一个移动应用程序（Android/iOS）。我希望用户在移动设备中输入他们的凭据（用户/密码），然后将其发送到我的服务器（Joomla CMS）以验证凭据并创建/发送令牌。我不想在设备上存储用户/只传递令牌。

此外，此令牌需要有超时才能在需要时刷新。比如凭证发生了变化。

在这一点上，我试图弄清楚它的架构会是什么样子。

有没有关于如何实现这一点的教程（最好是使用 Joomla）？有人可以指点我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:24:28.550

您应该从移动应用程序中发布用户名和密码，然后您应该遵循此问题中提供的解决方案： [https ://stackoverflow.com/a/2188969/900617](https://stackoverflow.com/a/2188969/900617)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:43:42.757

最终解决方案是创建我自己的 Joomla 组件。几乎所有东西都在我的控制器中。不是最终代码，但类似这样的代码会起作用。

```
defined('_JEXEC') or die;
jimport('joomla.application.component.controller');

class FooauthController extends JController
{
function __construct() {
    // params
    $jinput = JFactory::getApplication()->input;
    $this->username = $jinput->get('user', '', 'STRING');
    $this->password = $jinput->get('password', '', 'STRING');
    $this->checkParameters();
}

private function checkParameters() {
    // datatype checks

    if ($this->username == '' || $this->password == '') {
        header('HTTP/1.1 400 Bad Request', true, 400);
    }

}

private function createToken() {
    // token generation - what Joomla does (just an example)
    jimport('joomla.user.helper');
    $salt   = JUserHelper::genRandomPassword(32);
    $crypted  = JUserHelper::getCryptedPassword($password, $salt);
    $cpassword = $crypted.':'.$salt;
    return $cpassword;
}

function execute() {
    // Get the global JAuthentication object
    jimport( 'joomla.user.authentication');
    $auth = & JAuthentication::getInstance();
    $credentials = array( 'username' => $this->username, 'password' => $this->password );
    $options = array();
    $response = $auth->authenticate($credentials, $options);

    // success
    if ($response->status === JAUTHENTICATE_STATUS_SUCCESS) {
        $response->status = true;
        echo json_encode($this->createToken());
    } else {
        // failed
        $response->status = false;
        echo json_encode($response);
    }

} 
```

}

这表示一个名为 com_fooauth 的组件。现在本机应用程序将发送如下查询：

```
http://www.myhost.com/index.php?option=com_fooauth&user=username&password=pass&format=raw 
```

将所有内容放入控制器中的捷径，但希望您能明白这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T21:00:45.707

我希望我能正确理解您的用例。

如果您想使用 oAuth，那么您的**移动应用程序**将被视为**oAuth-client**。您的“服务器”拥有“受保护的资源”，它只能与 oAuth 访问令牌一起使用，因此称为**“资源服务器”**。现在你想要一些东西来提供这个访问令牌，所以这是身份提供者，AKA 身份验证服务器，例如 Facebook，Google，（或者你自己实现一个）。

流程（通常）是：用户（移动应用程序）尝试访问受保护的资源；因为它没有令牌，所以他被重定向到身份验证服务器。后者负责用户/密码登录页面，并创建令牌。

如果是真的——你仍然可以自己实现所有东西，而不使用 Facebook/Google API，因为 oAuth 有 SPEC。但是，您可以更轻松地使用提供商的软件包。

**编辑：重新考虑 oAuth 的使用**

仅当您希望您的 web 应用程序支持 oAuth SPEC 时才使用 oAuth。有几个好处，其中之一是您可以使用第 3 方身份提供者，例如 Yahoo! 并在不管理他们的情况下使用他们的身份。因此，如果我有 Yahoo! 的用户，我无需额外注册即可使用您的应用程序（您的应用程序必须支持来自 Yahoo! 的访问令牌）。但是在您的情况下，您将要实现身份提供者的所有逻辑（忘记密码、更改密码、注册等）以及支持 oAuth - 所有这一切都完全没有享受 oAuth 的好处！所以 - 你必须重新考虑oAuth的使用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:06:51.680

您需要使用他们的 API 作为基础。他们不会让你构建自己的 API 来连接到他们的数据库，这对他们来说更像是密码破解者而不是 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T18:40:28.547

这不是 Joomla 或教程，（我对 php 很生疏）说...

首先要注意几点： * memcache 不安全，并且这个实现让你输入用户名/密码：确保它安全地位于防火墙后面，或者先加密它。如果您需要，很乐意提供一些指示。* memcache 不能保证在内存不足时不会丢弃数据。在实践中它是可靠的，但你的应用程序应该优雅地处理它。如果您不想丢失这样的数据，只需将诸如 couchbase 之类的东西替换为 memcache。* 仅仅返回一个令牌来响应登录可能不是很有用。我会将令牌连同用户名之类的内容以及任何其他信息进行 json 化，以使应用程序启动并运行，而无需进行第二次 API 调用。* 下面的代码不处理错误情况，如果这对您来说不明显，我可以更详细地调用它们。

如果是我，我会使用 memcache 来保存令牌并将该令牌映射到最初传递的用户名和密码。您可以使用 memcache 的生存时间免费获得您的到期时间。

将用户名/密码发送到服务器（最好通过 https）。创建一个随机字符串或 guid（例如： http: [//php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)或[http://www.lateralcode.com/creating-a-random-string-with-php/](http://www.lateralcode.com/creating-a-random-string-with-php/)） , 这是你的令牌 将用户名/密码存储在内存缓存中，将该令牌作为键设置超时

```
$token = createToken("user1234", "pass2324");

print "Token: $token \n\n";

$credentials = credtialsFromToken($token);

print "Credentials from the token: ";

var_dump($credentials);

print "\n\n";

function setup() {
    $memcache = new Memcache;
    $memcache->connect('localhost', 11211) or die ("Could not connect");    
}

function createToken($user, $pass) {
$TOKEN_EXPIRE_TIME=60 * 60 * 24 * 30;

$credentials = array(
      "user" => $user,
      "pass" => $pass,
);

$token = uniqid(  );
memcache_set($token, credentials, 'some variable', 0, 30);

return $token;
}

function credtialsFromToken($token) {
$credentials = memcache_get($token);
return $credentials;
} 
```

如果令牌不正确或过期，他们会返回一个空凭据并必须登录。

编辑：将其清理为似乎在 php 中工作的函数...

# mysql - mysql select查询两个表

> ID：14505519
> 
> 赞同：2
> 
> 时间：2013-01-24T16:00:01.067
> 
> 标签：mysql, select, multiple-tables

我试图从两个表中获取结果，而没有第二个查询嵌套在第一个查询循环中。

我有一张桌子*产品*：

```
product_code_1234 | product_name | otherfields... 
```

还有一个表*categories*，其中一个产品可以有多个类别：

```
category_name_1 | product_code_1234
category_name_2 | product_code_1234
category_name_3 | product_code_1234 
```

是否有查询以获得以下结果？

```
product_code_1234 | product_name | ... | category_name_1 | category_name_2 | category_name_3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:03:55.700

```
select * from a,b 
```

将为您提供表 a 中的所有数据，并结合表 b 中的所有数据。

但是，如果您不想重复数据并且表 a 和 b 之间没有任何连接，那么如果没有一些联合或类似的东西就无法完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:13:29.893

假设您有这些表：

```
+----------------------------+
| PRODUCTS                   |
+------+-------------+-------+
| code | name        | price |
+------+-------------+-------+
| 1    | Bike Helmet | 99.99 |
| 2    | Shirt       | 19.99 |
+------+-------------+-------+

+-------------------+
| CATEGORIES        |
+------+------------+
| code | category   |
+------+------------+
| 1    | Sports     |
| 1    | Cycling    |
| 1    | Protection |
| 2    | Men        |
| 2    | Clothing   |
+------+------------+ 
```

* * *

这是一个基于[另一个 SO 答案](https://stackoverflow.com/a/3289202/925580)的查询，如果我对它的解释是正确的，它将符合您想要的结果：

```
SELECT p.code, p.name, p.prize,
    (SELECT category FROM categories c WHERE c.code = p.code LIMIT 0, 1) as category1,
    (SELECT category FROM categories c WHERE c.code = p.code LIMIT 1, 1) as category2,
    (SELECT category FROM categories c WHERE c.code = p.code LIMIT 2, 1) as category3,
FROM products p 
```

这是结果：

```
+------+-------------+-------+-----------+-----------+------------+
| code |    name     | price | category1 | category2 | category3  |
+------+-------------+-------+-----------+-----------+------------+
|    1 | Bike Helmet | 99.99 | sports    | cycling   | protection |
|    2 | Shirt       | 19.99 | men       | clothing  | NULL       |
+------+-------------+-------+-----------+-----------+------------+ 
```

但是，结果中不可能有动态数量的类别。在这种情况下，我将数字限制为 3，就像您的问题一样。可能仍然有性能更好的解决方案。此外，这显然是一个嵌套查询，因此可能不适合您的需求。不过，这是我能想到的最好的。

# 加入

还有 SQL [JOIN](http://www.w3schools.com/sql/sql_join.asp)子句，这可能是您要查找的内容：

```
SELECT *
FROM products
NATURAL JOIN categories 
```

你最终会得到这个结果：

```
+------+-------------+-------+------------+
| code | name        | price | category   |
+------+-------------+-------+------------+
| 1    | Bike Helmet | 99.99 | sports     |
| 1    | Bike Helmet | 99.99 | cycling    |
| 1    | Bike Helmet | 99.99 | protection |
| 2    | Shirt       | 19.99 | men        |
| 2    | Shirt       | 19.99 | clothing   |
+------+-------------+-------+------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:36:15.010

我想你将不得不做两个单独的查询。

一种检索产品，一种检索产品类别。

然后使用任何脚本语言（如 PHP）来实现您想要的结果（显示、导出等）。

# sql-server - SQL Server 中的 TRIM

> ID：14505520
> 
> 赞同：1
> 
> 时间：2013-01-24T16:00:02.050
> 
> 标签：sql-server

我有以下代码，我收到错误无法解析，我仍在学习 TRIM 代码，所以它可能在那个

```
SELECT    
   LEFT(dbo.COL_V_Cost_GEMS_Detail.FAC_LOC_NR, 2) AS STATE, 
   (dbo.COL_V_Cost_GEMS_Detail.TNG_SYS_NR) AS EHP_Code, RTRIM(LTRIM([FCT_TYP_CD])) + ' (' + RTRIM(LTRIM([Dep_Typ_CD]) + ')' AS [Course Owner]
   dbo.COL_TBL_VCOURSE.TNG_NA AS [Course Title]
FROM         
   dbo.COL_V_Cost_GEMS_Detail 
INNER JOIN
   dbo.COL_TBL_VCOURSE ON dbo.COL_V_Cost_GEMS_Detail.TNG_SYS_NR = dbo.COL_TBL_VCOURSE.TNG_SYS_NR 
INNER JOIN
   dbo.COL_TBL_VCOURSE_TYP ON dbo.COL_TBL_VCOURSE.TNG_MDA_TYP_CD = dbo.COL_TBL_VCOURSE_TYP.TNG_TYP
GROUP BY 
   dbo.COL_V_Cost_GEMS_Detail.FAC_LOC_NR, 
   LEFT(dbo.COL_V_Cost_GEMS_Detail.FAC_LOC_NR, 2), 
   dbo.COL_V_Cost_GEMS_Detail.TNG_SYS_NR, 
   dbo.COL_TBL_VCOURSE.TNG_NA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:02:23.227

您缺少右括号：

```
RTRIM(LTRIM([FCT_TYP_CD])) 
    + ' (' 
    RTRIM(LTRIM([Dep_Typ_CD])) <-- this is missing
    + ')' AS [Course Owner] 
```

你在后面缺少一个逗号`[Course Owner]`

您的查询应该是：

```
SELECT LEFT(dbo.COL_V_Cost_GEMS_Detail.FAC_LOC_NR, 2) AS STATE, 
  (dbo.COL_V_Cost_GEMS_Detail.TNG_SYS_NR) AS EHP_Code, 
  RTRIM(LTRIM([FCT_TYP_CD])) 
    + ' (' 
    RTRIM(LTRIM([Dep_Typ_CD])) --< parentheses missing
    + ')' AS [Course Owner],  -- < comma missing
  dbo.COL_TBL_VCOURSE.TNG_NA AS [Course Title]
FROM dbo.COL_V_Cost_GEMS_Detail 
INNER JOIN dbo.COL_TBL_VCOURSE 
  ON dbo.COL_V_Cost_GEMS_Detail.TNG_SYS_NR = dbo.COL_TBL_VCOURSE.TNG_SYS_NR 
INNER JOIN dbo.COL_TBL_VCOURSE_TYP 
  ON dbo.COL_TBL_VCOURSE.TNG_MDA_TYP_CD = dbo.COL_TBL_VCOURSE_TYP.TNG_TYP
GROUP BY dbo.COL_V_Cost_GEMS_Detail.FAC_LOC_NR, 
  LEFT(dbo.COL_V_Cost_GEMS_Detail.FAC_LOC_NR, 2), 
  dbo.COL_V_Cost_GEMS_Detail.TNG_SYS_NR, 
  dbo.COL_TBL_VCOURSE.TNG_NA 
```

# sql-server-2005 - 从 SQL Server 2005 复制到 SQL Server 2012

> ID：14505522
> 
> 赞同：3
> 
> 时间：2013-01-24T16:00:15.297
> 
> 标签：sql-server-2005, replication, sql-server-2012

我想知道 SQL Server 2012 复制发布者和一些 SQL Server 2005 复制订阅者是否有任何问题？

有人有微软关于这方面的一些文件吗？

我问是因为我的一位同事一直告诉我们它不会起作用。

是不是也反过来了？（2012 = 订阅者 & 2005 = 发布者）

谢谢扎科斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:05:11.557

取决于您使用的复制类型...

[来自 MSDN](http://msdn.microsoft.com/en-us/library/ms143699.aspx)：

> *   事务发布的订阅者可以是发布者版本的两个版本中的任何版本。例如：一个运行的 SQL Server 2005 Publisher 可以有 SQL Server 2012 Subscribers；SQL Server 2012 发布者可以拥有 SQL Server 2005 订阅者。
>     
>     
> *   合并发布的订阅服务器可以是小于或等于发布服务器版本的任何版本。

# java - 在具有primefaces的父级中显示信息主要消息

> ID：14505524
> 
> 赞同：0
> 
> 时间：2013-01-24T16:00:18.870
> 
> 标签：java, forms, jsf, primefaces, messages

我只想拥有一个

```
<p:growl id="messages"/> 
```

所以我为整个项目创建了一个表单，其中包含页面元素等作为主要表单中的表单，就像这样。

```
 <h:form id="mainForm">  
        <p:growl id="messages" showDetail="true" autoUpdate="true" globalOnly="true" for="mainForm"/>   

        <div id="container">
            <div id="banner" >
                <a><img src="#{facesContext.externalContext.requestContextPath}/images/logo.png" alt="" border="0" /></a>
                <ui:insert name="head">
                    <ui:include src="/panels/header.xhtml" />
                </ui:insert>

            </div>
            <div id="content">
                <ui:insert name="content">
                    <ui:include src="/panels/main.xhtml" />
                </ui:insert>
            </div>
            <div id="right">
                <ui:insert name="right-sidebar">
                    <ui:include src="/panels/box.xhtml" />
                </ui:insert>
            </div>

            <div id="footer"><h1>Footer</h1></div>

        </div>
    </h:form> 
```

当其中一个面板..（xhtml）文件显示一条消息时，问题就出现了，它没有在主页的咆哮声中显示。我已经尝试过，全球性的，但没有运气。

总之：我如何创建一次 ap:growl 来处理我网站的所有消息？

任何建议

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:38:17.590

您不应该嵌套多个表单（正如您所说的那样）。

尝试封装

```
<p:growl .../> 
```

在一个表单中标记另一个表单，然后将 autoUpdate 属性保留为 true。删除 globalOnly 属性，因为这会影响，只有组件 id 为“null”的 FacesMessages 将被显示：

```
<h:form id="mainForm">  
    <p:growl id="messages" showDetail="true" autoUpdate="true"/> 
</h:form>  

    <div id="container">
        <div id="banner" >
            <a><img src="#{facesContext.externalContext.requestContextPath}/images/logo.png" alt="" border="0" /></a>
            <ui:insert name="head">
                <ui:include src="/panels/header.xhtml" />
            </ui:insert>

        </div>
        <div id="content">
            <ui:insert name="content">
                <ui:include src="/panels/main.xhtml" />
            </ui:insert>
        </div>
        <div id="right">
            <ui:insert name="right-sidebar">
                <ui:include src="/panels/box.xhtml" />
            </ui:insert>
        </div>

        <div id="footer"><h1>Footer</h1></div>

    </div> 
```

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:50:06.617

最后我设法让它工作，这很简单，正如我所怀疑的那样，我必须更新处理消息的咆哮。

```
 <h:form id="mainForm">  
        <p:growl id="messages" showDetail="true" autoUpdate="true"/>   
     </h:form> 
```

喜欢，检查更新方法。

```
 <p:commandButton  id="logBut" value="Login" actionListener="#{loginBean.loginUser}" update=":mainForm:message" icon="ui-icon-carat-1-e"/> 
```

它可以在有或没有嵌套形式的情况下工作。

# java - 如何在 Ant 解压缩的文件中追加一行？

> ID：14505525
> 
> 赞同：2
> 
> 时间：2013-01-24T16:00:23.000
> 
> 标签：java, ant, log4j

我有一个默认`log4j`属性文件，我想将应用程序特定的配置附加到该文件中。该文件（与其他文件）包含在 .zip 文件中。我使用 Ant 解压缩 zip 的内容（包括 log4j 属性）。我想在解压缩发生时附加该行。这可能吗？

```
<unzip dest="some.dest">
    <fileset refid="some.fileset" />
    <!-- Append a line to 'log4j.properties` file -->
</unzip> 
```

也许解决方案只是在我解压缩后回显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:04:11.893

您可以使用带有“append”标志的 Ant“echo”任务：

```
<echo file="log4j.properties" append="true">${line.separator}</echo> 
```

Echo 任务文档在这里供进一步参考：

[http://ant.apache.org/manual/Tasks/echo.html](http://ant.apache.org/manual/Tasks/echo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:17:37.087

无需解压整个 zipfile，使用

如果 log4j.properties 位于 zip 的根目录中：

```
<project>
  <!-- unzip log4j.properties only -->
  <unzip src="foo.zip" dest=".">
    <patternset>
      <include name="log4j.properties" />
    </patternset>
  </unzip>
  <!-- put new key in or overwrite if already existing -->
  <propertyfile file="log4j.properties">
    <entry key="log4j.logger.com.foobar.xyz" value="ERROR" />
  </propertyfile>
  <!-- update zip with modified log4j.properties -->
  <zip destfile="foo.zip" update="true">
    <fileset dir="." includes="log4j.properties" />
  </zip>
</project> 
```

否则，如果 log4j.properties 位于 zip 的任何子文件夹中：

```
<project>
  <!-- unzip log4j.properties only -->
  <unzip src="foo.zip" dest=".">
    <patternset>
      <include name="**/log4j.properties" />
    </patternset>
  </unzip>
  <fileset dir="." includes="**/log4j.properties" id="foo"/>
  <!-- put new key in or overwrite if already existing -->
  <propertyfile file="${toString:foo}">
    <entry key="log4j.logger.com.foobar.xyz" value="ERROR" />
  </propertyfile>
  <!-- update zip with modified log4j.properties -->
  <zip destfile="foo.zip" update="true">
    <fileset dir="." includes="${toString:foo}" />
  </zip>
</project> 
```

# java - 从 java 设置 Microsoft CRM 上类型所有者的属性

> ID：14505533
> 
> 赞同：0
> 
> 时间：2013-01-24T16:00:46.810
> 
> 标签：java, web-services, crm

有谁知道Java中的等效代码来填写类型所有者的属性？

```
Owner owner = new Owner();
owner.type = EntityName.systemuser.ToString();
owner.Value = user.UserId; 
```

我使用了对所有者的实体引用并解决了空 Guid 的问题。但现在我要打了：

```
[ERROR] Invalid ownerIdType = 7 
```

我认为这与上面C#中第二行的owneridtype属性有关，m当前代码如下：

```
OrganizationServiceStub.KeyValuePairOfstringanyType owneridtype = new OrganizationServiceStub.KeyValuePairOfstringanyType();
owneridtype.setKey("owneridtype");
OrganizationServiceStub.OptionSetValue owner2 = new OrganizationServiceStub.OptionSetValue();
owner2.setValue(Integer.parseInt("8"));
owneridtype.setValue(owner2);  
collection.addKeyValuePairOfstringanyType(owneridtype);  

OrganizationServiceStub.KeyValuePairOfstringanyType vendedor = new OrganizationServiceStub.KeyValuePairOfstringanyType();
vendedor.setKey("ownerid");
OrganizationServiceStub.Guid vendedorGuid = utils.readVendCrm(serviceStub,args[17]);
OrganizationServiceStub.EntityReference owner = new OrganizationServiceStub.EntityReference();
owner.setLogicalName("owner");
owner.setId(vendedorGuid);
vendedor.setValue(owner);
collection.addKeyValuePairOfstringanyType(vendedor); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:06:53.530

恐怕我对 Java 和 CRM 2011 了解不多，但这篇文章可能会有用。

[为 Microsoft Dynamics CRM 编写 Java 和其他非 .NET 客户端应用程序](http://msdn.microsoft.com/en-us/library/gg327838.aspx)。

还有相关问题：

*   [从 java 连接 MS Dynamics CRM 2011](https://stackoverflow.com/questions/11014275/connect-ms-dynamics-crm-2011-from-java)
*   [使用 Java 连接到 Microsoft Dynamics CRM 本地 Web 服务？](https://stackoverflow.com/questions/1115865/connecting-to-microsoft-dynamics-crm-web-service-with-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:40:49.313

应该引用它的正确实体是系统用户而不是所有者，这是我的错误。正确的代码是：

```
 OrganizationServiceStub.KeyValuePairOfstringanyType vendedor = new OrganizationServiceStub.KeyValuePairOfstringanyType();
   vendedor.setKey("ownerid");
   OrganizationServiceStub.Guid vendedorGuid = utils.readVendCrm(serviceStub,args[17]);
   OrganizationServiceStub.EntityReference owner = new OrganizationServiceStub.EntityReference();
   owner.setLogicalName("systemuser");
   owner.setId(vendedorGuid);
   vendedor.setValue(owner);
   collection.addKeyValuePairOfstringanyType(vendedor); 
```

# css - 两部分图像上的CSS渐变

> ID：14505541
> 
> 赞同：1
> 
> 时间：2013-01-24T16:01:12.610
> 
> 标签：css, gradient

我必须使用 CSS 完成以下图像：

![在此处输入图像描述](../Images/048aec96a9ea54fef01757492d2a183b.png)

这是一张包含主导航的图像。所以我写了一些 CSS 来做到这一点（不是正确的颜色代码，我知道）：

```
#menu-block {
  background: #730868;
  background: -webkit-gradient(linear, 0 0, 0 bottom, from(#730868), to(#0a9f9d));
  background: -webkit-linear-gradient(top, #730868 0%, #0e70a2 76%,#0a9f9d 100%);
  background: -moz-linear-gradient(top, #730868 0%, #0e70a2 76%,#0a9f9d 100%);
  background: -ms-linear-gradient(top, #730868 0%, #0e70a2 76%,#0a9f9d 100%);
  background: -o-linear-gradient(top, #730868 0%, #0e70a2 76%,#0a9f9d 100%);
  background: linear-gradient(top, #730868 0%, #0e70a2 76%,#0a9f9d 100%);
  -pie-background: linear-gradient(top, #730868 0%, #0e70a2 76%,#0a9f9d 100%);
  behavior: url(/pie/PIE.htc);
} 
```

这段代码效果很好！除了最后的箭头之外，它做了它必须做的事情......老实说，我不知道如何解决这个问题。
我应该创建一个箭头形状的第二个 div 并猜测最接近的颜色吗？

应该支持IE8...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:03:16.213

## 这让你接近

它实际上以纯色“点”结束（等于渐变的结束颜色）。如果绝对需要的话，实际上可以将渐变延续到三角形中（我目前没有时间弄清楚）。

[这是示例](http://jsfiddle.net/dLRun/8/)（注意：示例使用从[colorzilla](http://www.colorzilla.com/gradient-editor/)生成的代码来支持 IE9）。你需要有一个固定`width`的工作（设置伪元素的左/右边框），但`height`可以灵活。在我的示例中，IE8 失去了红色中心。也许对于您的 PIE 解决方案，它不会。

**HTML（以 IE9 条件为例）**

```
<!--[if gte IE 9]>
  <style type="text/css">
    #menu-block {
       filter: none;
    }
  </style>
<![endif]-->

<div id="menu-block" ></div> 
```

**CSS**

```
#menu-block {
  width: 100px;
  position: relative;  
    background: rgb(0,0,255);
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDBmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmMDAwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmMDAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  rgba(0,0,255,1) 0%, rgba(255,0,0,1) 50%, rgba(255,255,0,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,255,1)), color-stop(50%,rgba(255,0,0,1)), color-stop(100%,rgba(255,255,0,1)));
    background: -webkit-linear-gradient(top,  rgba(0,0,255,1) 0%,rgba(255,0,0,1) 50%,rgba(255,255,0,1) 100%);
    background: -o-linear-gradient(top,  rgba(0,0,255,1) 0%,rgba(255,0,0,1) 50%,rgba(255,255,0,1) 100%);
    background: -ms-linear-gradient(top,  rgba(0,0,255,1) 0%,rgba(255,0,0,1) 50%,rgba(255,255,0,1) 100%);
    background: linear-gradient(to bottom,  rgba(0,0,255,1) 0%,rgba(255,0,0,1) 50%,rgba(255,255,0,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0000ff', endColorstr='#ffff00',GradientType=0 );
}

#menu-block:after {
    content: '';
    width: 0;
    height: 0;
    position: absolute;
    left: 0;
    top: 100%;
    border-right: 50px transparent solid;
    border-left: 50px transparent solid;
    border-bottom: 0 transparent solid;
    border-top: 30px #ffff00 solid; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:13:55.943

为什么不创建完整的矩形，然后在底部放置和叠加与背景混合的三角形图像，以呈现向下箭头的外观？

# c# - NUnit 测试用例不是从继承的类中运行的

> ID：14505548
> 
> 赞同：10
> 
> 时间：2013-01-24T16:01:30.727
> 
> 标签：c#, nunit, resharper, resharper-6.1

我有一个包含一些测试用例和一些普通测试的基本测试类：

```
[TestFixture]
public abstract class TestBase
{
  [TestCase(1)]
  [TestCase(2)]
  [TestCase(3)]
  public void TestA(int value)
  {
    // Perform test
  }

  [Test]
  public void TestB()
  {
    // Perform test
  }
} 
```

这些测试是从以不同方式设置环境的子类运行的。子类仅包含设置方法，不包含测试。

```
[TestFixture]
public class LocalDatabaseTest : TestBase
{
  [SetUp]
  public void SetUp()
  {
    // Set up environment to use local db
  }
} 
```

我正在使用 ReSharper 6.1.1000.82 运行 LocalDatabaseTest 中的所有测试，但只运行普通测试。使用 TestCase 的测试没有得到任何结果。如果我在 TestBase 类中选择 Run All on TestA，则所有测试用例都会运行（包括其他子类）。我正在使用 NUnit 2.6.2.12296。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T21:12:03.823

你没有做错任何事。

如果您通过 NUnit 测试运行器打开您的测试 dll，您将看到所有测试都运行成功。
（我刚刚使用 NUnit 2.6.2 验证了您的代码）。

关于忽略 Resharper 上的参数化测试的原因： Resharper 测试运行器似乎存在一些问题，导致这种行为。
所以，我的建议是使用 NUnit 来运行参数化测试。

顺便说一句，Resharper 7 更好地支持 NUnit 参数化测试。并且可能这个问题不会出现在最新的 Resharper 版本中。

# java - 有没有办法使用 EasyMock 产生所有期望？

> ID：14505550
> 
> 赞同：1
> 
> 时间：2013-01-24T16:01:55.390
> 
> 标签：java, junit, easymock

我正在尝试为一些代码编写一个 EasyMock Junit 测试用例，这些代码有很多额外的代码片段，我发现 Mock 有点矫枉过正。说给定的例子[http://java.dzone.com/articles/easymock-tutorial-%E2%80%93-getting](http://java.dzone.com/articles/easymock-tutorial-%E2%80%93-getting)，

以下期望被设置为测试

```
portfolio.getTotalValue() 
```

**期待**

```
EasyMock.expect(marketMock.getPrice("EBAY")).andReturn(42.00);
EasyMock.replay(marketMock); 
```

现在在我的情况下，我需要设置大约 30-40 个这样的期望，然后才能对我的代码进行单元测试。

有没有办法生成对代码的期望或动态生成它们？这样我就不必手动执行所有这些操作来测试我的特定代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:13:23.813

Actually, it's a code smell: [Hard-to-Test Code](http://xunitpatterns.com/Hard%20to%20Test%20Code.html). Your object might not fulfill the [Single Responsibility Principle (SRP)](https://en.wikipedia.org/wiki/Single_responsibility_principle).

You can try extracting out some expectations to one or more `allowXY` or `createMockedXY` helper methods (`void allowDownloadDocument(path, name, etc)`, `Document createMockedDocument(...)` for example). [Eliminating static helper classes](http://blogs.msdn.com/b/nickmalik/archive/2005/09/07/462054.aspx) also could be helpful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:34:54.477

不。

说真的，你希望它做什么？

从长远来看，您可以通过查看多个测试中的期望模式并将它们组合成可重用的方法或“@Before”方法来节省一些劳动力。

# php - 我需要一个正则表达式来替换 html 代码中的所有 onclick 等？

> ID：14505551
> 
> 赞同：0
> 
> 时间：2013-01-24T16:02:07.413
> 
> 标签：php, regex

这是我的功能

我无法获得将删除 on* 属性的正则表达式

```
public function removeUnsafeAttributes($input, $validTags = '')
{
    $regex = "";
    return preg_replace($regex,strip_tags($input, $validTags));
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:10:10.113

这将做：

```
/on[A-Za-z]*?\=\".*?\"/ 
```

# ruby-on-rails - 将计数增加 0.5？

> ID：14505553
> 
> 赞同：0
> 
> 时间：2013-01-24T16:02:18.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我知道 ActiveRecord 的`increment_counter`......但我需要增加一些东西`0.5`而不是`1`.

就像是：`User.increment_counter(:credits_count, RECORD_ID, 0.5)`

是否有某种帮助/方法可以轻松递增`0.5`？还是我必须提取记录，获取当前计数，然后添加`0.5`到该计数并保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:09:57.340

您可以使用`.increment`

所以基本上是`User.find(RECORD_ID).increment(:credits_count, 0.5)`

[Api 文档增量](http://apidock.com/rails/ActiveRecord/Base/increment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:29:28.310

如果您不希望对象的所有加载使其更快，请使用 update_all

```
def self.increment_float(user_id,counter,value)
  User.update_all("#{counter} = #{counter} + #{value}",{:id => user_id})
end 
```

要小心，因为 update_all 会更新与 where 条件匹配的所有内容（在本例中为 id == user_id），也许你想在确定之前做一些测试

# wpf - 更改文本框验证规则上的依赖属性值

> ID：14505560
> 
> 赞同：0
> 
> 时间：2013-01-24T16:02:29.797
> 
> 标签：wpf, validation, binding, dependency-properties, datatrigger

我已经实现了继承自 ContentControl 的自定义控件，它具有名为“CanNavigate”（布尔）的依赖属性。

在 Window.xaml 中，我有一个文本框，其中包含一些 ValidationRule 检查文本框是否为空。我想根据 TextBox.Validation.HasError 将“CanNavigate”设置为 true/false，如下代码所示：

```
 <Style  TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
            Value="{Binding RelativeSource={RelativeSource Self},
        Path=(Validation.Errors)[0].ErrorContent}"/>
                <Setter Property="{Binding CanNavigate}" Value="false"></Setter>
            </Trigger>                
        </Style.Triggers>           
    </Style> 
```

拥有此代码时会出现错误“'Property' 属性不能在 Setter 上使用标记扩展或属性元素语法。只有 Value 属性可以使用标记扩展或属性元素语法。标记文件中的对象 'System.Windows.Setter' 出错”

有没有办法可以根据 TextBox.validationError 设置 CanNavigate 属性。

问候， 帕蒂尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:13:58.130

*   关于你的第一个 setter，我认为你应该用 ToolTip 属性上的 Binding 替换这个 setter，并在必要时使用 ValueConverter，触发器不能。最好这样做（注意我没有测试这段代码，我只是想指出这种方式）：

    ```
    <TextBox ... ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"  /> 
    ```

*   关于第二个设置器：在设置器中定义属性时，您不需要指定绑定，您只需提供属性名称，如下所示：

    ```
    <Setter Property="CanNavigate" Value="False" /> 
    ```

# javascript - 在 HTML 下拉列表中检测“溢出”

> ID：14505562
> 
> 赞同：0
> 
> 时间：2013-01-24T16:02:33.923
> 
> 标签：javascript, jquery, html

如何检测所选下拉（“选择”）元素中的文本是否比显示给用户的文本多？

我找到了一种方法来处理文本类型的输入（**目前只在 Chrome 中为我工作......跨浏览器解决方案会很棒），但我也试图让它在选择上工作：

```
function applyTitles(jqueryElement) {
var element = jqueryElement[0];
if (element.offsetHeight < element.scrollHeight || element.offsetWidth < element.scrollWidth) {
    // element has overflow
    jqueryElement.attr('title', jqueryElement.val());
}
else {
    //element doesn't have overflow
    jqueryElement.attr('title', '');
}} 
```

[http://jsfiddle.net/NML3f/](http://jsfiddle.net/NML3f/)

我的目标是创建一种通用方式，在无法一次看到整个内容时在输入上动态显示标题。出于某种原因，我认为某些浏览器会自动执行此操作，但我想不是。

# android - 检查互联网活动

> ID：14505563
> 
> 赞同：0
> 
> 时间：2013-01-24T16:02:37.013
> 
> 标签：android

我做了一个应用程序，它使用 webview 来收听来自互联网的音频。现在，我添加了一个方法 (isOnline) 来检查是否存在（或不存在）互联网活动。我有一个疑问：我可以使用始终在 OnCreate 中运行的这种方法吗？

```
public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:10:10.397

如果您阻止 onCreate() 的执行，也就是 UI 线程将被阻止，您的应用程序将抛出 ANR（应用程序无响应）异常。

但是您的方法并没有告诉您您已连接到实习生，它只是告诉您您的设备已连接或连接到最近的路由器。之后是什么你不知道。

要检查真实的互联网连接，您需要向服务器发出请求，例如 www.google.com，如果您得到答案，那么您就可以实时连接。

还有一件事，你不需要持续监控你的连接。以最简单的方式，您可以不时在后台线程中执行此操作，但前提是您无法从收音机播放器获取事件。

# javascript - 检测数组中作为复杂多边形顶点的一组点是否按顺时针或逆时针顺序定义？

> ID：14505565
> 
> 赞同：18
> 
> 时间：2013-01-24T16:02:47.893
> 
> 标签：javascript, arrays, math, geometry, 2d

编辑：我用答案更新了[程序](http://colekito.com/ProgrammingProjects/Science%20Fair/)，效果很好！

我正在制作一个[程序](http://colekito.com/ProgrammingProjects/Science%20Fair/)（请随意尝试），让用户绘制多边形，然后对其进行三角剖分。他们可以单击添加顶点并按 Enter 进行三角测量。无论如何，只要我告诉它这些点是以顺时针还是逆时针方式绘制的，该算法就可以正常工作（现在我将它设置为仅适用于顺时针多边形）。几天来我一直试图弄清楚这一点，但不知道如何确定这些点是顺时针还是逆时针。尝试使用前面提到的程序绘制形状以获得更好的想法，您可以更好地体验我正在谈论的内容，而不是我试图解释它。

以下是点的定义方式：

```
function Point(x, y) {
    this.x = x;
    this.y = y;
}

var vertices = [];

// Called on click
function addPoint(mouseX, mouseY) {
    vertices.push(new Point(mouseX, mouseY));
} 
```

这是一个顺时针多边形的图像：

![顺时针多边形](../Images/4c478dcd21a342af4fb67d5510bc1844.png)

这是逆时针多边形的图像：

![逆时针多边形](../Images/2c9e018caedf6888485d0a114f4995bc.png)

如果您能帮我弄清楚如何确定点的“顺时针方向”，我将不胜感激！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-24T16:52:27.100

Compute the polygon area using the [shoelace formula](http://en.wikipedia.org/wiki/Shoelace_formula), but without the absolute value sign. If the result is positive, the points are ordered counterclockwise, and if negative - clockwise.

```
function polygonArea() { 
    var area = 0;
    for (var i = 0; i < vertices.length; i++) {
        j = (i + 1) % vertices.length;
        area += vertices[i].x * vertices[j].y;
        area -= vertices[j].x * vertices[i].y;
    }
    return area / 2;
}
var clockwise = polygonArea() > 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:40:56.387

一般的想法是看一下多边形的凸包并从那里猜测方向。但是，我认为你不需要建造整个船体来找到方向，而只需要建造一个属于它的部分。

所以：

*   找到多边形的两个点，使所有其他点都在这条线的一侧。
*   如果所有点都在左侧（只需检查其中一个点），则为逆时针。如果它们在右侧，则为顺时针方向。

**示例**：

上图：4-5 让右图，5-11 让右图，... 下图：6-7 让左图，7-14 让图上左边， ...

**Warning**: While "walking" on your polygon, do not restart the numeration, otherwise it will be wrong. On the top figure, 4-(n-1) let the figure on the left!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:43:19.787

Your intuitive definition of clockwisedness is not well defined. For example, If I draw a horseshoe:

```
 /---a-b--\
  /   _d_c_  \
 /  /       \ \
 | |        | |
 | |        | |
  \ \       / /
   \ \     / /
    --     -- 
```

If `0 = a < b < b < d` and I look at `a` and `b` I would conclude from your description that the shape has been drawn clockwise, but if `0 = c < d < a < b` I would conclude that the shape has been drawn anticlockwise. Since both of these scenarios involve the same direction in which the points were drawn, just from different starting points, I can only conclude that your definition is lacking.

The horseshoe I drew isn't the best; the idea is that it is almost a circle with just a small hole at the bottom, to allow the other side to be drawn in the opposite direction.

If you are interested in defining things more strictly, then I suggest something along the following lines:

Considering any finite *simple* polygon as separating the plane into two distinct areas (one finite and one infinite), we can always consider the finite area to be the interior of the polygon. In such a scenario we define a vertex ordering to be clockwise iff the order of the points runs with the exterior along its right-hand side. This is called [curve orientation](http://en.wikipedia.org/wiki/Curve_orientation).

Once you have this more solid definition, implementation can be as simple as counting the winding number. Take the midpoint of any ordered pair, say 0 and 1, take a line segment to the right of the ordered pair (at any angle, say perpendicular), and count how many intersections it has with other line segments: The curve is clockwise iff the number is odd.

This is simple to implement, linear in time `O(n)`, and adds constant space `O(1)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-23T15:34:06.917

如果有人使用three.js，`ShapeUtils`它会附带一个内置`isClockWise`方法，该方法在内部使用该`area`方法来确定计算区域的符号。

```
isClockWise: function ( pts ) {

    return ShapeUtils.area( pts ) < 0;

} 
```

`ShapeUtils.isClockWise`方法可以在**[这里](https://github.com/mrdoob/three.js/blob/master/src/extras/ShapeUtils.js#L686-L690)**找到。

```
area: function ( contour ) {

    var n = contour.length;
    var a = 0.0;

    for ( var p = n - 1, q = 0; q < n; p = q ++ ) {

        a += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;

    }

    return a * 0.5;

}, 
```

`ShapeUtils.area`方法可以在**[这里](https://github.com/mrdoob/three.js/blob/master/src/extras/ShapeUtils.js#L9-L22)**找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-18T10:45:12.377

这是一个专门用于 OpenLayers 的函数函数。如您所见，顺时针多边形的条件是面积<0 ，[此参考](http://en.wikipedia.org/wiki/Shoelace_formula)确认它。

```
function IsClockwise(feature)
{
if(feature.geometry==null)return -1;
var vertices=feature.geometry.getVertices();
var area=0;
for (var i = 0; i < (vertices.length); i++) 
    {
    j = (i + 1) % vertices.length;
    area += vertices[i].x * vertices[j].y;
    area -= vertices[j].x * vertices[i].y;
    // console.log(area);
    }
return (area < 0);
} 
```

# node.js - 如何使 Mongoose 的 .populate() 与嵌入式模式/子文档一起使用？

> ID：14505569
> 
> 赞同：0
> 
> 时间：2013-01-24T16:03:00.490
> 
> 标签：node.js, mongoose, populate

我读到你可以让 Mongoose 自动[填充](http://mongoosejs.com/docs/populate.html)ObjectId 字段。但是，我在构建查询以填充子文档中的字段时遇到问题。

我的模型：

```
var QuestionSchema = new Schema({
    question_text: String,
    type: String,
    comment_field: Boolean,
    core_question: Boolean,
    identifier: String
});

var SurveyQuestionSchema = new Schema({
    question_number: Number,
    question: {type: Schema.Types.ObjectId, ref: 'Question', required: true} //want this popuplated
});

var SurveySchema = new Schema({
    start_date: Date,
    end_date: Date,
    title: String,
    survey_questions: [SurveyQuestionSchema]
}); 
```

现在我通过这样做来达到效果：

```
Survey.findById(req.params.id, function(err, data){
    if(err || !data) { return handleError(err, res, data); }

    var len = data.survey_questions.length;
    var counter = 0;

    var data = data.toJSON();

    _.each(data.survey_questions, function(sq){
        Question.findById(sq.question, function(err, q){
            sq.question = q;

            if(++counter == len) {
                res.send(data);
            }
        });
    });
}); 
```

这显然是一种非常容易出错的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:37:15.250

正如我在上面的评论中所指出的，这是 mongoose 团队目前正在审查的一个问题（尚未实施）。

另外，从局外人的角度来看您的问题，我的第一个想法是将架构更改为消除`SurveyQuestion`，因为它具有非常相关的数据库“加入”模型感觉。Mongoose 嵌入式集合具有静态排序顺序，无需保留位置字段，如果您可以`Survey`自行处理问题选项，它将降低模式复杂性，因此您无需进行双重填充。

话虽如此，您可以通过一次查询所有问题来将查询减少到 2 个，例如：

```
Survey.findById(req.params.id, function(err, data){
    if(err || !data) { return handleError(err, res, data); }

    var data = data.toJSON();
    var ids = _.pluck(data.survey_questions, 'question');

    Question.find({_id: { $in: ids } }, function(err, questions) {
        _.each(data.survey_questions, function(sq) {
            sq.question = _.find(questions, function(q) { 
                var id = q._id.toString();
                return id == sq.question; 
            });

        });
        res.send(data);
    });
}); 
```

# c++ - 使用 SFML 在屏幕上居中文本

> ID：14505571
> 
> 赞同：20
> 
> 时间：2013-01-24T16:03:03.550
> 
> 标签：c++, linux, 2d, sfml

我在 Ubuntu 12.10 上使用 SFML 2.0 库，使用

```
sudo apt-get install libsfml-dev 
```

得到他们。现在我试图让一个 sf::Text 居中在屏幕上。为此，我将文本的原点（用于进行诸如设置位置、旋转等变换的位置）设置为 sf::Text 的边界框的中心，然后将位置设置为屏幕中心，如下所示：

```
//declare text
sf::Font font;
sf::Text text;
font.loadFromFile("helvetica.ttf");
text.setFont(font);
text.setString("RANDOMTEXT");
text.setCharacterSize(100);
text.setColor(sf::Color::White);
text.setStyle(sf::Text::Regular);

//center text
sf::FloatRect textRect = text.getLocalBounds();
text.setOrigin(textRect.width/2,textRect.height/2);
text.setPosition(sf::Vector2f(SCRWIDTH/2.0f,SCRHEIGHT/2.0f)); 
```

这不起作用，文本偏离了一定程度，例如 x 轴上的 3 和 y 轴上的 25。奇怪的是，如果您设置 sf::RectangleShape 来表示文本的边界框，那么该矩形将居中并正确调整大小以适合文本。但随后文本被从该框中绘制出来，并带有前面提到的偏移量。

在这张图片中，我标记了屏幕的中心，在文本边界框和 sf::Text 的位置绘制了一个 sf::RectangleShape。

[http://i.imgur.com/4jzMouj.png](https://i.imgur.com/4jzMouj.png)

该图像是由以下代码生成的：

```
const int SCRWIDTH = 800; 
const int SCRHEIGHT = 600;

int main() {
sf::RenderWindow window;
window.create(sf::VideoMode(SCRWIDTH,SCRHEIGHT), "MYGAME" ,sf::Style::Default);
window.setMouseCursorVisible(false);
window.setVerticalSyncEnabled(true);

sf::Font font;
sf::Text text;
font.loadFromFile("helvetica.ttf");
text.setFont(font);
text.setString("RANDOMTEXT");
text.setCharacterSize(100);
text.setColor(sf::Color::White);
text.setStyle(sf::Text::Regular);

sf::FloatRect textRect = text.getLocalBounds();

text.setOrigin(textRect.width/2,textRect.height/2);
text.setPosition(sf::Vector2f(SCRWIDTH/2.0f,SCRHEIGHT/2.0f));

sf::RectangleShape rect(sf::Vector2f(textRect.width,textRect.height));
rect.setFillColor(sf::Color::Blue);
rect.setOrigin(rect.getSize().x/2,rect.getSize().y/2);
rect.setPosition(text.getPosition());

sf::RectangleShape RectW;
RectW.setSize(sf::Vector2f(SCRWIDTH, 0.0));
RectW.setOutlineColor(sf::Color::Red);
RectW.setOutlineThickness(1);
RectW.setPosition(0, SCRHEIGHT / 2);
sf::RectangleShape RectH;
RectH.setSize(sf::Vector2f(0.0, SCRHEIGHT));
RectH.setOutlineColor(sf::Color::Red);
RectH.setOutlineThickness(1);
RectH.setPosition(SCRWIDTH / 2, 0);

while(window.isOpen()) {
    window.clear();
    window.draw(rect);
    window.draw(text);
    window.draw(RectW);
    window.draw(RectH);
    window.display();
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Escape)) {
        window.close();
    }
}
return 1;
} 
```

我怎样才能让它居中并在它的边界框内，因为它应该是？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T17:17:37.657

`sf::Text::getLocalBounds()``top`和字段具有非零值`left`，因此在原点居中时不能忽略它们。

试试这个：

```
//center text
sf::FloatRect textRect = text.getLocalBounds();
text.setOrigin(textRect.left + textRect.width/2.0f,
               textRect.top  + textRect.height/2.0f);
text.setPosition(sf::Vector2f(SCRWIDTH/2.0f,SCRHEIGHT/2.0f)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T20:05:19.723

我认为这是 SFML 文本渲染的一个已知问题。前往他们的问题跟踪器并查看[此问题](https://github.com/LaurentGomila/SFML/issues/216)。

您也可以在他们的开发论坛上提问。他们的开发人员总是非常友好和乐于助人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-14T09:24:49.583

除了[Emile 的 answer](https://stackoverflow.com/a/15253837/1599699)`textRect.height`之外，您还应该使用`maxHeight`以下代码中的，而不是 using ：

```
for (size_t characterIndex = 0; characterIndex < text.size(); ++characterIndex)
{
  currentHeight = font->getGlyph(text[characterIndex], 12, false).bounds.height;
  if (currentHeight > maxHeight)
  {
    maxHeight = currentHeight;
  }
} 
```

[这里的](https://en.sfml-dev.org/forums/index.php?topic=5790.0)解释：

> 这是因为第一行在最高字符的高度上垂直对齐——即使它不在您的字符串中。这是为了保持字符串顶部稳定，即使您在第一行添加更高的字符。
> 
> 确切的计算不是直截了当的：您必须遍历第一行的所有字符，计算最大字符大小，从 sf::Text 的 CharacterSize 中减去它，然后从高度减去结果边界矩形。

* * *

另一个非常重要的注意事项：如果在非整数位置绘制文本，可能会破坏文本的外观。这似乎也包括原点......（所以将您的原点+位置四舍五入到最接近的整数！）

# c# - 可选参数以及参数数组

> ID：14505573
> 
> 赞同：5
> 
> 时间：2013-01-24T16:03:12.190
> 
> 标签：c#, arguments, optional-parameters, ambiguous, args

我有一个日志接口，我使用一些有用的扩展方法对其进行了扩展，以便我可以传递格式和参数列表，以避免每次调用该方法时都必须使用字符串格式。（它也帮助我遵守 FXCops 文化信息规则）

所以我可以打电话：

```
logger.Debug("Created {0} with id {1}",typeof(MyObject).Name ,myObject.Id); 
```

代替：

```
logger.Debug(string.Format("Created {0} with id {1}", typeof(MyObject).Name, myObject.Id)); 
```

我现在发现自己处于一个有点棘手的境地，因为在日志中获取一些关于日志写入位置的信息（例如文件、方法和行号）将非常有帮助。这可以通过整洁`[CallerMemberName]`的`[CallerFilePath]`、 和`[CallerLineNumber]`属性来实现。

```
logger.Debug("Created {0} with id {1}", typeof(MyObject).Name, myObject.Id); 
```

然后会给我一个日志条目，例如：

*“MyObjectProvider.cs，Provide，行：50 | 创建了 ID 为 1564 的 MyObject”*

这里的问题是方法签名看起来像这样：

```
public static void Debug(this ILogger logger, string format [CallerMemberName] string callerMemberName = "", [CallerFilePath] string callerFilePath = "", [CallerLineNumber] int callerLineNumber = 0, params object[] args) 
```

这是不可能的，因为`[Caller*]`属性使参数成为可选的，并且不适用于 args 参数。

我还尝试使用固定数量的字符串作为参数进行多种实现，如下所示：

```
public static void Debug(this ILogger logger, string format [CallerMemberName] string callerMemberName = "",string arg, string arg2 , ...etc... , [CallerFilePath] string callerFilePath = "", [CallerLineNumber] int callerLineNumber = 0) 
```

但随后我收到编译器错误，提示*“以下方法或属性之间的调用不明确”*

我现在几乎已经放弃了这个问题，但我想，“也许 SO 可以为我找到解决方案”。所以在这里......**是否可以同时使用两者`params object[] args`并`[CallerFilePath]`以任何方式使用，或者是否有另一种方式来获得预期的结果？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-27T18:38:32.620

我遇到了同样的问题，但解决的方式有点不同。这不是最优雅的解决方案，但它可以工作并且相对干净：

```
public class SrcLoc
{
    public string sourceFile { get; set; }
    public int lineNumber { get; set; }
    public SrcLoc([CallerFilePath] string sourceFile = "",
                  [CallerLineNumber] int lineNumber = 0)
    {
      this.sourceFile = sourceFile;
      this.lineNumber = lineNumber;
    }
}
public class Logger
{
   public void Log(SrcLoc location,
                int level = 1,
                string formatString = "",
                params object[] parameters)
  {
     string message = String.Format(formatString, parameters);
  }
}
public MainTest
{
    public static void Main()
    {
        string file="filename";
        logger.Log(new SrcLoc(), (int)LogLevel.Debug, "My File: {0}", file);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:12:33.350

您不能将两者结合在方法签名中。您可以做的只是其中之一，然后传递`null`到您需要可选参数的地方，这对您有用吗？

```
Foo(s, null);
public void Foo(string s, params string[] sArray)
{

}

Foo(new string[] {""});
private static void Foo(string[] sArray,  string s = "")
{
} 
```

**或者**

为什么不使用一个可以处理格式并使其成为可选的类呢？

```
public class LogArgs
{
  private string _formatString;
  private string[] _args;
  public LogArgs(string formatString, params string[] args)
  {
    _formatString = formatString;
    _args = args;
  }
  public override string ToString()
  {
    return string.Format(_formatString, _args);
  }
}

public void Foo(string mandatory, LogArgs optionalParam = null)
{
  //Do Stuff
}

Foo("", new LogArgs("{0} is formatted", "")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:16:15.087

我找到了另一种使用 StackTrace 获取所需信息的方法。它在优化代码中有点不安全，而且速度很慢，但出于调试目的，只要可以在发布版本中关闭它，它就可以很好地工作。

```
StackTrace stackTrace = new StackTrace();
var callerMember = stackTrace.GetFrame(1).GetMethod();
var callerMemberName = callerMember.Name;
var callerType = callerMember.ReflectedType.Name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-13T17:43:40.990

我发现的最优雅的方法（或最不优雅的方法）是创建一个具有所需名称的方法，该方法提取属性信息并返回一个`Action`委托。然后，您使用您实际要调用的签名设置此委托。

所以，从

```
public static void Debug(this ILogger logger, string format, [CallerMemberName] string callerMemberName = "", [CallerFilePath] string callerFilePath = "", [CallerLineNumber] int callerLineNumber = 0, params object[] args) 
```

创建委托

```
public delegate void LogDelegate(string format, params object[] args); 
```

从您的方法调用返回：

```
public static void Debug(this ILogger logger, [CallerMemberName] string callerMemberName = "", [CallerFilePath] string callerFilePath = "", [CallerLineNumber] int callerLineNumber = 0)
{
  return (format, args)
  {
    LogWithCallerSiteInfo(format, args, callerMemberName, callerFilePath, callerLineNumber, logAction);
  }
} 
```

并使用捕获的数据调用辅助方法：

```
private static void LogWithCallerSiteInfo(string format, object[] args, string callerMemberName, string callerFilePath, int callerLineNumber, Action<string, object[]> logRequest)
    {
        if (args == null)
        {
            args = new object[0];
        }
        var args2 = new object[args.Length + 3];
        args.CopyTo(args2, 0);
        args2[args.Length] = sourceFile;
        args2[args.Length + 1] = memberName;
        args2[args.Length + 2] = lineNumber;

        logRequest(format + " [{callerFilePath:l}.{callerMemberName:l}-{callerLineNumber}]", args2);
    } 
```

并拨打电话，因此：

```
logger.Debug()("Created {0} with id {1}",typeof(MyObject).Name ,myObject.Id); 
```

因此，在使用方面，您插入了一个额外的 集合`()`，它捕获呼叫站点信息，并且集合集合在委托上进行呼叫。这就像我设法做到的一样整洁。

我已经重新创建了`params`添加捕获数据的数组，否则，（至少使用`SeriLog`，结果是不可预测的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-24T16:12:25.303

将所有默认参数向右移动。

# java - 从 XML 属性中解析整数

> ID：14505575
> 
> 赞同：2
> 
> 时间：2013-01-24T16:03:18.183
> 
> 标签：java

所以我有一个节点的属性，其中包含如下内容： number="1"

我想如果我解析`=`我可以使用`Integer.parseInt(node.getAttributes().item(i).toString()));`

但这会返回以下错误：

```
java.lang.NumberFormatException: For input string: ""1"" 
```

所以现在我在做：

```
String[] value = node.getAttributes().item(i).toString().split("=\"");
String[] number = value[1].split("\"");
Integer.parseInt(number[0].toString()) // contains the right value 1 
```

有没有更好、更清洁的方法呢？感觉这个很牛逼。。

**编辑：**

节点是这样定义的： org.w3c.dom.Node node = nodeList.item(index);

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T16:07:51.713

代替

```
node.getAttributes().item(i).toString() 
```

和

```
node.getAttributes().item(i).getNodeValue() 
```

[http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getNodeValue%28%29](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getNodeValue%28%29)

# three.js - 重置被 EffectComposer 破坏的深度缓冲区

> ID：14505576
> 
> 赞同：2
> 
> 时间：2013-01-24T16:03:20.540
> 
> 标签：three.js

我正在尝试渲染两个不同的场景和相机，就像 HUD 一样。两者都在单独时正确渲染。这也可以按预期工作，因此您可以在帮助场景下看到主场景：

```
renderer.render(mainscene, maincamera);
renderer.render(helpscene, helpcamera); 
```

当我使用EffectComposer渲染主场景时，我根本看不到helpscene，我只看到composer渲染的结果：

```
renderTargetParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, stencilBuffer: false };
renderTarget = new THREE.WebGLRenderTarget( width, height, renderTargetParameters );
composer = new THREE.EffectComposer(renderer, renderTarget);
---- cut out for brevity ---

composer.render(delta);
renderer.render(helpscene, helpcamera); // has no effect whatsoever on the screen, why? 
```

这里发生了什么？同样，如果我评论任何一个渲染调用，它们都可以正常工作。但两者都启用了，我只看到作曲家场景/渲染。我希望帮助场景覆盖（或至少覆盖）在此之前呈现的任何内容。

我之前有相当复杂的代码`renderer.render(helpscene, helpcamera);`，它可能会采用各种不同的渲染路径并根据不同的设置使用 effectcomposer 或不使用。但我希望帮助场景始终采用没有效果或任何东西的简单路线，这就是为什么我使用单独的渲染调用而不是将其合并为 effectcomposer 通道的原因。

编辑：原来这是因为一些有趣的业务与深度缓冲区（？）。如果我将 material.depthTest = false 设置为辅助场景中的所有内容，它将正确显示。看起来深度被某些作曲家通道或作曲家本身设置为零或非常低，而且出乎意料的是，它会产生隐藏任何通过后续渲染调用渲染的内容的效果。

因为我现在只在辅助场景中使用 LineMaterial ，所以它现在可以使用，但我预计在 depthTest = false 解决方法中会出现一些问题（稍后可能会有一些真实的阴影对象，这需要针对其他对象进行深度测试在同一个助手场景中）。

所以我想真正的问题是：如何在 EffectComposer 之后重置深度缓冲区（或其他东西），以便进一步的渲染调用不受它的影响？我也可以将辅助场景渲染作为最后一个作曲家通过，没有太大区别。

我可能应该提一下，我的一个作曲家设置主要 RenderPass 将纹理渲染为一个扭曲的平面几何图形，靠近为此目的而创建的透视相机（如在许多后处理示例中发现的正交相机和四边形设置，但有失真）。其他设置有一个带有实际场景相机的“正常”RenderPass，我希望深度信息能够让我无论如何都应该看到辅助场景（这可能是一些严重的 f* *** ** ed up English，抱歉，非母语人士在这里，我想不出更好的词）。我对这两种选择都有同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:38:56.330

...并回答我自己。找到真正原因后，就很简单了。

`renderer.clear(false, true, false);`将清除深度缓冲区，以便覆盖渲染按预期工作:)

# iphone - iPhone应用程序启动时黑屏

> ID：14505578
> 
> 赞同：0
> 
> 时间：2013-01-24T16:03:24.830
> 
> 标签：iphone, xcode, storyboard

嘿，所以我有一个我正在制作的应用程序在我开始时运行良好，我使用的是 xCode 4.5.2 和一个故事板。有一天，当我开始开发触摸屏时，当我运行应用程序时，出现的只是一个空白的黑屏，它永远不会出现在我的故事板中。我从一个标签栏控制器开始，我确实检查了“是初始视图控制器”。这是个常见的问题吗？如果是这样，有什么解决方案？这让我很困扰，因为前几天同样的代码在工作，我没有从委托中删除任何东西。任何建议将不胜感激，在此先感谢！

# amazon-web-services - 具有维度的 Amazon Web Service CloudWatch 自定义指标

> ID：14505579
> 
> 赞同：20
> 
> 时间：2013-01-24T16:03:28.170
> 
> 标签：amazon-web-services, amazon-cloudwatch

我正在尝试将数据推送到 AWS CloudWatch 上的自定义指标中，但想了解有关维度以及如何使用这些维度的更多信息？我已经阅读了 AWS 文档，但它并没有真正解释它们的用途以及它如何影响 AWS 管理控制台中的图形 UI。

维度是进一步细分指标值的一种方式吗？

举一个虚构的例子，假设我有一个衡量房间里人数的指标。度量的名称称为“人口”。我每分钟报告一次计数。Metric Count 设置为人数。维度字段只是名称和值对的列表。假设我报告了一个值为 90 的数据点，我是否可以添加如下两个维度：1\. 姓名：男性，人数：50 2\. 姓名：女性，人数：40

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T08:06:53.603

是的，您可以将您描述的维度添加到自定义指标中。

但是，CloudWatch**无法**跨这些维度进行聚合，因为它不知道这些维度的组。基本上：

> Amazon CloudWatch 将每个独特的维度组合视为一个单独的指标。例如，下图中对 mon-put-data 的每次调用都会创建一个单独的指标，因为每次调用都使用一组不同的维度。即使所有四个调用都使用相同的指标名称 (ServerStats)，情况也是如此。

[在此处](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/cloudwatch_concepts.html#Dimension)查看有关 CloudWatch 中维度的更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-24T16:51:02.967

请注意，您可以[从 API](https://docs.aws.amazon.com/cli/latest/reference/cloudwatch/get-metric-data.html)检索聚合值，也可以使用数学表达式在 CloudWatch 中绘制图表。请参阅[使用度量数学](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html)

~~我可能还应该补充一点，您不能在警报中使用度量数学。~~

更新：正如@Brooks 所说，[Amazon CloudWatch 推出了在度量数学表达式上添加警报的功能](https://aws.amazon.com/about-aws/whats-new/2018/11/amazon-cloudwatch-launches-ability-to-add-alarms-on-metric-math-expressions/)

总而言之，与 DataDog 相比，相当受限且用户不友好。

# ruby-on-rails - .includes 方法不起作用

> ID：14505580
> 
> 赞同：0
> 
> 时间：2013-01-24T16:03:29.900
> 
> 标签：ruby-on-rails, methods, controller, rails-bullet

我已经安装了 gem bullet 来增强我的小应用程序（与 Rails 4 Edge 一起运行）的性能

但是，“.includes”方法似乎不起作用：

```
def index
  @articles = Article.includes(:category)
end 
```

这将返回“无法将符号转换为整数”

当我在 Rails 控制台中运行它时也是如此，对于任何关联我都会遇到同样的错误；.includes 已被弃用，还是我做错了？谢谢

这是完整的跟踪：

```
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:106:in `[]'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:106:in `build_scope'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:28:in `scope'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:32:in `records_for'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:80:in `block in associated_records_by_owner'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:80:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:80:in `each_slice'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:80:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:80:in `map'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:80:in `associated_records_by_owner'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/singular_association.rb:9:in `preload'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader/association.rb:19:in `run'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:129:in `block (2 levels) in preload_one'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:128:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:128:in `block in preload_one'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:127:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:127:in `preload_one'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:104:in `preload'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:93:in `block in run'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:93:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/associations/preloader.rb:93:in `run'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation.rb:570:in `block in exec_queries'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation.rb:569:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation.rb:569:in `exec_queries'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation.rb:456:in `block in load'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/explain.rb:29:in `logging_query_plan'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation.rb:456:in `load'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation.rb:197:in `to_a'
bullet (4.3.0) lib/bullet/active_record3x.rb:10:in `to_a'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/relation/delegation.rb:13:in `each'
app/views/articles/index.html.slim:44:in `_app_views_articles_index_html_slim___1140651801917805301_70356832595700'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/template.rb:144:in `block in render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications.rb:160:in `instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/template.rb:142:in `render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/abstract_renderer.rb:23:in `block in instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications.rb:158:in `block in instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications.rb:158:in `instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/abstract_renderer.rb:23:in `instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/template_renderer.rb:17:in `render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/renderer.rb:36:in `render_template'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_view/renderer/renderer.rb:17:in `render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/rendering.rb:119:in `_render_template'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/streaming.rb:219:in `_render_template'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/rendering.rb:112:in `render_to_body'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/rendering.rb:33:in `render_to_body'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/renderers.rb:26:in `render_to_body'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/rendering.rb:97:in `render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/rendering.rb:16:in `render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/instrumentation.rb:41:in `block in render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/instrumentation.rb:40:in `render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/base.rb:189:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/rendering.rb:10:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/callbacks.rb:413:in `_run__4416358697319013222__process_action__callbacks'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/callbacks.rb:78:in `run_callbacks'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/rescue.rb:29:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications.rb:158:in `block in instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/notifications.rb:158:in `instrument'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/base.rb:136:in `process'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/abstract_controller/rendering.rb:44:in `process'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal.rb:195:in `dispatch'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_controller/metal.rb:231:in `block in action'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/routing/route_set.rb:77:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/routing/route_set.rb:77:in `dispatch'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/routing/route_set.rb:45:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/journey/router.rb:69:in `block in call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/journey/router.rb:57:in `each'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/journey/router.rb:57:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/routing/route_set.rb:614:in `call'
bullet (4.3.0) lib/bullet/rack.rb:11:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.2) lib/rack/etag.rb:23:in `call'
rack (1.4.2) lib/rack/conditionalget.rb:25:in `call'
rack (1.4.2) lib/rack/head.rb:9:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/params_parser.rb:30:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/flash.rb:233:in `call'
rack (1.4.2) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.2) lib/rack/session/abstract/id.rb:205:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/cookies.rb:443:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/query_cache.rb:36:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:631:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activerecord/lib/active_record/migration.rb:348:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/callbacks.rb:373:in `_run__1420375788820113751__call__callbacks'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/callbacks.rb:78:in `run_callbacks'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/reloader.rb:64:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/railties/lib/rails/rack/logger.rb:32:in `call_app'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/railties/lib/rails/rack/logger.rb:16:in `block in call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/tagged_logging.rb:67:in `block in tagged'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/tagged_logging.rb:25:in `tagged'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/tagged_logging.rb:67:in `tagged'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/railties/lib/rails/rack/logger.rb:16:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/request_id.rb:21:in `call'
rack (1.4.2) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.2) lib/rack/runtime.rb:17:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.2) lib/rack/lock.rb:15:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/actionpack/lib/action_dispatch/middleware/static.rb:63:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/railties/lib/rails/engine.rb:508:in `call'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/bundler/gems/rails-e63e280bed3a/railties/lib/rails/application.rb:95:in `call'
rack (1.4.2) lib/rack/lock.rb:15:in `call'
rack (1.4.2) lib/rack/content_length.rb:14:in `call'
rack (1.4.2) lib/rack/handler/webrick.rb:59:in `service'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/shideneyu/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

最后但并非最不重要的一点是，错误在哪里：

```
th Actions   
  tbody
   - @articles.each do |article| <---- This line is highlited for the error
     tr
       td
         div class="span1" 
```

文章型号：

```
class Article < ActiveRecord::Base
    attr_readonly :user_id

    belongs_to :category
    belongs_to :user

    with_options(dependent: :destroy) do |opts|
      opts.has_many :events, as: :eventable
      opts.has_many :mentions, as: :mentionable
      opts.has_many :comments, as: :commentable
    end

    has_and_belongs_to_many :tags, :uniq => true

    validates_presence_of :category, :content
    validates_uniqueness_of :name, scope: :category_id

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:13:05.023

.includes 方法适用于实例，这意味着您的方法应如下所示：

def index @articles = Article.includes(:category).find(1) end

或例如收集

def index @articles = @blog.articles.includes(:category) end

# asp.net - 如何设置输入元素的样式

> ID：14505583
> 
> 赞同：0
> 
> 时间：2013-01-24T16:03:40.087
> 
> 标签：asp.net, css

我有一个按钮和复选框。

```
<table class = "submit-css">
 <tr>
     <td>                    
         <asp:Button ID="btnSubmit" runat="server" Text="Submit" />
         <asp:CheckBox ID="ckSendMail" runat="server" />
     </td>
 </tr>
</table> 
```

我想为这两个项目设置样式，但我不知道如何选择它们。

```
.submit-css input[submit]
 {
   //add rules here...
 } 
```

我已经尝试了上面的选择器，但它不起作用。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:04:32.093

假设您的按钮是 type `submit`，您可以使用[属性选择器](http://www.w3.org/TR/CSS2/selector.html)：

```
.submit-css input[type="submit"] {
    // CSS rules here...
} 
```

您也可以仅引用元素的 ID（即`#btnSubmit`和`#chckSendMail`），或者如果您想使用一些通用规则设置它们的样式，只需省略属性选择器：

```
.submit-css input {
    // CSS rules here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:05:09.050

要设置按钮样式，请执行以下操作：

```
#btnSubmit
{
   // Your rules here...
} 
```

要设置复选框的样式，请执行以下操作：

```
#ckSendMail
{
   // Your rules here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:06:15.437

```
.submit-css input
{
 // style properties..
} 
```

# boolean-logic - 如何仅使用 AND 和 NOT 来表达由 AND、OR 和 NOT 组成的布尔表达式？

> ID：14505585
> 
> 赞同：1
> 
> 时间：2013-01-24T16:03:46.893
> 
> 标签：boolean-logic, discrete-mathematics, circuit, hdl

假设我有以下布尔表达式：

```
(A^B^C) v (~A^~C) 
```

我怎么能只用 AND (^) 而不是 (~) 来表达呢？我不想要答案，只是我将如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T20:19:39.480

由于这个问题似乎没有答案，我会回应其他人并说德摩根定律`(A v B) == ~(~A ^ ~B)`会起作用。

# android - 加载新活动时在android应用程序中出现OutOfMemory异常

> ID：14505586
> 
> 赞同：0
> 
> 时间：2013-01-24T16:03:47.010
> 
> 标签：android

```
12-11 23:38:42.568: ERROR/AndroidRuntime(4261): FATAL EXCEPTION: main
12-11 23:38:42.568: ERROR/AndroidRuntime(4261): android.view.InflateException: Binary XML file line #11: Error inflating class <unknown>
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at xxx.PickLeafCell.<init>(PickLeafCell.java:38)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at xxx.CueFileListAdapter.getView(CueFileListAdapter.java:108)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.AbsListView.obtainView(AbsListView.java:1315)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.ListView.fillSpecific(ListView.java:1272)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.ListView.layoutChildren(ListView.java:1558)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.AbsListView.onLayout(AbsListView.java:1147)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.View.layout(View.java:7035)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.View.layout(View.java:7035)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.View.layout(View.java:7035)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.View.layout(View.java:7035)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.View.layout(View.java:7035)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.os.Looper.loop(Looper.java:123)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at java.lang.reflect.Method.invokeNative(Native Method)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at java.lang.reflect.Method.invoke(Method.java:521)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at dalvik.system.NativeStart.main(Native Method)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261): Caused by: java.lang.reflect.InvocationTargetException
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.ImageView.<init>(ImageView.java:108)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at java.lang.reflect.Constructor.constructNative(Native Method)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     ... 34 more
12-11 23:38:42.568: ERROR/AndroidRuntime(4261): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.Bitmap.nativeCreate(Native Method)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     at android.widget.ImageView.<init>(ImageView.java:118)
12-11 23:38:42.568: ERROR/AndroidRuntime(4261):     ... 38 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:19:19.407

你的问题在这里：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

似乎您正在加载一个大图像。为此，您有多种选择： 1\. 使用 BitmapOptions 获取大小，计算比例，然后仅使用您需要的比例进行解码

1.  直接在您的 PC 上调整图像大小以满足设备需求。

此主题的必读页面在这里： [Android 开发人员](http://developer.android.com/training/displaying-bitmaps/index.html)

PS。这里重要的是你永远不应该在 UI 线程上解码图像。这将影响您的应用程序性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:14:05.437

您正在加载尺寸过大的位图。`Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget`. 不过有一个解决方案。您需要将位图解码为较低的分辨率[[how to do so]](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

# python - 在 Python 中解析复杂的文本文件以进行数据分析

> ID：14505587
> 
> 赞同：0
> 
> 时间：2013-01-24T16:03:48.913
> 
> 标签：python, parsing, text

我是 Python 或编程的完全新手。

我有一个要解析为 CSV 的文本文件。我目前无法提供文本文件的示例。

1.  文本是几（千）行，没有回车。
2.  文件中有 4 种类型的记录（A、B、C 或 I）。
3.  每种记录类型都有基于数据元素大小的特定格式。
4.  没有分隔符。
5.  在记录类型中的最后一个数据元素之后，会立即出现下一个记录类型。
6.  我一直在尝试用另一种语言翻译 Python 中的样子。

这是我写的一个例子（格式不正确）

```
file=open('TestPython.txt'), 'r' # from current working directory
dataString=file.read()
data=()
i=0
while i < len(dataString):
i = i+2
    curChar = dataString(i)
    # Need some help on the next line var curChar = dataString[i]

    if curChar = "A"
        NPI = dataString(i+1, 16) # Need to verify that is how it is done in python inside ()
            NPI.strip()
        PCN = datastring(i+17, 40)
            PCN.strip()
        seqNo = dataString(i+41, 42)
            seqNo.strip()
        MRN = dataString(i+43, 66)
            MRN.strip()
    if curChar = "B"
        NPI = dataString(i+1, 16) # Need to verify that is how it is done in python inside ()
            NPI.strip()
        PCN = datastring(i+17, 40)
            PCN.strip()
        seqNo = dataString(i+41, 42)
            seqNo.strip()
        RC1 = (i+43, 46)
            RC1.strip()
        RC2 = (i+47, 50)
            RC2.strip() 
        RC3 = (i+51, 54)
            RC3.strip()
    if curChar = "C"
        NPI = dataString(i+1, 16) # Need to verify that is how it is done in python inside ()
            NPI.strip()
        PCN = datastring(i+17, 40)
            PCN.strip()
        seqNo = dataString(i+41, 42)
            seqNo.strip()
        DXVer = (i=43, 43)
            DXVer.strip()
        AdmitDX = (i+44, 50)
            AdmitDX.strip()
        RVisit1 = (i+51, 57)
            RVisit1.strip() 
```

这是一段文本文件的虚拟版本。

A 63489564696474677 9845687 777 67834717467764674 TUANU TINBUNIU 47 ERTYNU TDFGH UU748897764 66762589668777486U6764467467774767 7123609989 9 O
B 79466945684634677 676756787344786474634890 7746.66 7 96 4 7 7 9 7 774666 44969 494 7994 99666 77478 767766
B 098765477 64697666966667 9 99 87966 47798 797499
C 63489564696474677 6747494 7494 7497 4964 4976 N7469 4769 N9784 9677
I 79466944696474677 677769U6 8888 67764674
A 79466945684634677 6767994 777 696789989 6464467464764674 UIIUN UITTI 7747 NUU 9 ATU 4 UANU OSASDF NU67479 66567896667697487U6464467476777967 7699969978 7699969978 9 O

如您所见，文件中的每种类型都可以有多个。这个例子粘贴的方式，看起来类型是一行的第一个字符。实际文件并非如此（我在 Word 中制作了此示例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:35:47.917

你可以看看[pyparsing](http://pyparsing.wikispaces.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:35:41.097

您最好在阅读文件时对其进行处理。

首先，执行 a`file.read(1)`以确定下一个记录类型。

然后，根据类型，阅读字段，如果我理解正确，这些字段是固定宽度。所以对于类型“A”，这看起来像这样：

```
def processA (file):
    NPI = file.read(16).strip()  #assuming the NPI is 16 bytes long 
    PCN = file.read(23).strip()  #assuming the PCN is 23 bytes long
    seqNo = file.read(1).strip() #assuming seqNo is 1 byte long
    MRN = file.read(23).strip()  #assuming MRN is 23 bytes long
    return {"NPI":NPI,"PCN":PCN, "seqNo":seqNo, "MRN":MRN} 
```

如果文件不是 ASCII，则需要做更多工作才能正确编码并读取字符而不是字节。

# javascript - 将新属性附加到对象内的特定位置

> ID：14505590
> 
> 赞同：4
> 
> 时间：2013-01-24T16:03:56.343
> 
> 标签：javascript, jquery

如果我将附加属性附加到一个对象，它是否必须放在最后，或者我可以将它放在指定的位置。

```
function reassign(obj){
  delete obj.c;
  obj.c = "new three";

  var t = "<table border=\"1\">";
  for (var i in obj){
    t += "<tr><td>" + obj[i] + "</td></tr>"; 
  }
  t += "</table>";
  return t;
}

var obj = {
  a : "one",
  b : "two",
  c : "three",
  d : "four" 
};

var reassigned = reassign(obj);
document.write(reassigned); 
```

是否有可能`obj.c`在删除后以某种方式再次将新的放在第三位，而不是将其附加到末尾？当然我可以跳过删除部分。但即使没有这个，我也可以例如打算注入`alphabeta: "one point five"`第二个位置。是否可以？谢谢！

[jsbin](http://jsbin.com/otudew/2/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:09:23.663

数组元素是有序的；对象属性不是。您永远不应该假设对象属性将按特定顺序迭代。

如果顺序对您很重要，请创建一个`order:[]`包含属性名称数组的新属性，您可以遍历它：

```
var obj = {
  a : "one",
  b : "two",
  c : "three",
  d : "four",
  order : ['a','b','c','d']
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:12:31.260

*对象*是无序的。您可以创建一个*数组*并将对象分解为键值对，也可以使用数组来索引对象键。

**选项1**

```
var collection = [
  {key1: value1},
  {key2: value2},
  {key3: value3}
]; 
```

**选项 2**

```
var obj = {
  key1: value1,
  key2: value2,
  key3: value3
};

// you can index just the values
var index_to_value = [
  obj['key1'],
  obj['key2'],
  obj['key3']
];

// or you can index by key, if necessary
var index_to_key = [
  'key1', 'key2', 'key3'
]; 
```

当然，如果它不干扰，您可以将索引放在对象中：

```
var obj = {
  key1: value1,
  key2: value2,
  key3: value3,
  _index: [
    'key1', 'key2', 'key3'
  ]
}; 
```

而且，我建议使用[排序和比较功能](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)或[拼接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)来管理索引。

# eclipse - 安装颠覆性插件后 Eclipse (ADT) 主题损坏

> ID：14505598
> 
> 赞同：4
> 
> 时间：2013-01-24T16:04:14.983
> 
> 标签：eclipse, svn, adt

我下载了 ADT（android 开发者工具，基本上是一个已经安装了 android 插件的 eclipse juno）。现在我正在尝试安装 SVN 插件。但是每次我安装插件时，我的 Eclipse 的用户界面似乎都坏了。工具栏看起来很奇怪。通过查看设置，我注意到没有可用的主题了。图片：http: [//i.stack.imgur.com/8Suf3.png](http://i.stack.imgur.com/8Suf3.png)

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:39:39.683

这是一个已知问题，目前似乎无法解决： [http ://code.google.com/p/android/issues/detail?id=41126](http://code.google.com/p/android/issues/detail?id=41126)

# css - CSS 问题，左菜单下推内容

> ID：14505608
> 
> 赞同：0
> 
> 时间：2013-01-24T16:04:39.010
> 
> 标签：css

我的设计有一些问题，我的左侧菜单一直向下推内容，它们应该并排！我什么都试过了，就是不行:(

我已将其上传到临时位置 [http://cosplay.dk/New/Cosplay%20Denmark%20-%20Index.htm](http://cosplay.dk/New/Cosplay%20Denmark%20-%20Index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:06:23.377

漂浮`#left-menu`并`#content`离开。还要指定宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:06:42.650

尝试使用`float:left;`，然后当您需要换行时，使用`clear:both;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:08:42.657

```
#wrapper {overflow:hidden;}
#left-menu, #content {float: left;} 
```

# apache - 如何配置 Apache 的启用站点的配置？

> ID：14505612
> 
> 赞同：2
> 
> 时间：2013-01-24T16:04:58.157
> 
> 标签：apache, ubuntu

我有一个 UBUNTU/APACHE 框，当我尝试使用 HOST-NAME 访问 Web 服务器时，它会将我带到 DocumentRoot（即 /var/www）并向我显示那里的所有文件/文件夹（如预期的那样）。

在我的 /var/www 中，我有一些文件夹，例如 /var/www/devel 和 var/www/live，如何更新我的配置，以便当我通过其主机名 [http://servername] 访问服务器时] 它默认进入 DocumentRoot 的子文件夹。

我试图将 DocumnetRoot 更改为指向 /var/www/live，这在我点击主机名时有效，它会将我发送到正确的路径，但是我无法访问 /var/www/dev（通过转到 [http: //服务器名称/开发]）。

这很可能是因为现在 /dev 在 DocumentRoot 之外，我该如何调整配置以便在 [http://servername] 解析为 /live 时仍然可以访问 [http://servername/dev]。

这是我的配置...

```
 DocumentRoot /var/www

    <Directory />
            Options FollowSymLinks
            AllowOverride All
    </Directory>

    <Directory /var/www>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory>

    <Directory "/var/www/dev">
            AuthName "NTLM Authentication"
            NTLMAuth on
            NTLMAuthHelper "/usr/bin/ntlm_auth --helper-protocol=squid-2.5-ntlmssp"
            NTLMBasicAuthoritative on
            AuthType NTLM
            require valid-user
    </Directory>

    <Directory "/var/www/live">
            AuthName "NTLM Authentication"
            NTLMAuth on
            NTLMAuthHelper "/usr/bin/ntlm_auth --helper-protocol=squid-2.5-ntlmssp"
            NTLMBasicAuthoritative on
            AuthType NTLM
            require valid-user
    </Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:19:43.610

如果您想要描述的行为，则不要更改 DocumentRoot。您需要做的是使用诸如 mod_rewrite 之类的重定向来“重写”一个 url 以指向您需要的目录。这样，您仍然保留 DocumentRoot。它看起来像这样：

```
RewriteEngine on
RewriteRule ^/$ /live/ [R] 
```

查看此链接以获取更多想法。 [重定向](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)

# mysql - MYSQL group by 和内部连接

> ID：14505614
> 
> 赞同：6
> 
> 时间：2013-01-24T16:05:01.047
> 
> 标签：mysql, subquery, inner-join

我有一个文章表，其中包含每天的文章浏览次数。创建一个新记录来保存每篇文章的每一天的计数。

下面的查询获取所有时间前 5 个查看文章 ID 的文章 ID 和总浏览量：

```
SELECT article_id, 
SUM(article_count) as cnt
FROM article_views
GROUP BY article_id
ORDER BY cnt DESC
LIMIT 5 
```

我还有一个单独的文章表，其中包含所有文章字段。我想修改上面的查询以加入文章表并为每个文章 ID 获取两个字段。我尝试在下面执行此操作，但计数返回错误：

```
SELECT article_views.article_id, SUM( article_views.article_count ) AS cnt, articles.article_title, articles.artcile_url
FROM article_views
INNER JOIN articles ON articles.article_id = article_views.article_id
GROUP BY article_views.article_id
ORDER BY cnt DESC
LIMIT 5 
```

我不确定我到底做错了什么。我需要做一个子查询吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T16:06:34.827

`articles.article_title, articles.artcile_url`在`GROUP BY`子句中添加：

```
SELECT 
  article_views.article_id, 
  articles.article_title, 
  articles.artcile_url,
  SUM( article_views.article_count ) AS cnt
FROM article_views
INNER JOIN articles ON articles.article_id = article_views.article_id
GROUP BY article_views.article_id,   
         articles.article_title, 
         articles.artcile_url
ORDER BY cnt DESC
LIMIT 5; 
```

您没有得到正确结果集的原因是，当您选择未包含在`GROUP BY`或子句中的聚合函数中的行时， `SELECT`MySQL 会选择随机值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T16:14:05.103

您正在使用名为 Hidden Columns 的 MySQL (mis) 功能，因为文章标题不在`group by`. 但是，这可能会或可能不会导致您的问题。

如果计数错误，那么我认为您`article_id`在文章表中有重复。您可以通过以下方式检查：

```
select article_id, count(*) as cnt
from articles
group by article_id
having cnt > 1 
```

如果出现任何问题，那就是你的问题。如果它们都有不同的标题，那么按标题分组（如 Mahmoud 建议的那样）将解决问题。

如果没有，修复它的一种方法如下：

```
SELECT article_views.article_id, SUM( article_views.article_count ) AS cnt, articles.article_title, articles.artcile_url
FROM article_views INNER JOIN
     (select a.* from articles group by article_id) articles
     ON articles.article_id = article_views.article_id
GROUP BY article_views.article_id
ORDER BY cnt DESC
LIMIT 5 
```

这会为文章选择一个任意标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:15:01.140

Your query looks basically right to me...

But the value returned for `cnt` is going to be dependent upon `article_id` column being UNIQUE in the `articles` table. We'd assume that it's the primary key, and absent a schema definition, that's only an assumption.)

Also, we're likely to assume there's a foreign key between the tables, that is, there are no values of `article_id` in the `articles_view` table which don't match a value of `article_id` on a row from the `articles` table.

* * *

To check for "orphan" article_id values, run a query like:

```
SELECT v.article_id
  FROM articles_view v
  LEFT
  JOIN articles a
    ON a.article_id = v.article_id
 WHERE a.article_id IS NULL 
```

To check for "duplicate" article_id values in articles, run a query like:

```
SELECT a.article_id
  FROM articles a
 GROUP BY a.article_id
HAVING COUNT(1) > 1 
```

If either of those queries returns rows, that could be an explanation for the behavior you observe.

# javascript - Javascript - 显示微调器、同步保存数据、移除微调器

> ID：14505615
> 
> 赞同：0
> 
> 时间：2013-01-24T16:05:05.873
> 
> 标签：javascript, web-applications, user-interface, asynchronous

我正在尝试创建一个允许您连接到保存操作的 javascript 插件。我想要一些围绕逻辑的逻辑：

1.  显示微调器
2.  执行保存挂钩
3.  执行保存逻辑
4.  移除微调器

这是我的代码示例：

```
function save(){
    var settings = getSettings();

    showSpinner();

    // Hook-in call
    if(settings.onSave)
        settings.onSave();

    saveState();

    removeSpinner();
} 
```

showSpinner() 只是隐藏保存/取消按钮并在其位置显示一个微调器。

hideSpinner() 则相反。

saveState() 将输入字段中的数据保存到它们的数据属性中。

settings.onSave() 可以是插件用户传递给配置的任何代码。

当我运行该过程时，即使我定义的挂钩需要大约 1.5 秒才能返回，微调器也不会出现。如果我在调试器中暂停代码，微调器确实有机会显示，并且在操作完成后它会消失。

解决此问题的最佳方法是什么？我完全不熟悉 javascript 中的异步设计模式。我知道 javascript 可以在一个线程上运行，但我不知道为什么保存操作会妨碍显示微调器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:10:42.517

在 Javascript 将控制权交还给浏览器之前，您的浏览器不会更新界面，这意味着您需要在浏览器显示微调器之前从函数返回。用于`setTimeout`将控制权短暂地交还给浏览器。

```
function save(){

    showSpinner();

    setTimeout(function(){
        var settings = getSettings();

        // Hook-in call
        if(settings.onSave)
            settings.onSave();

        saveState();

        removeSpinner();
    }, 0 );
} 
```

# ruby - Ruby 的 printf 参数是什么意思？

> ID：14505621
> 
> 赞同：4
> 
> 时间：2013-01-24T16:05:15.980
> 
> 标签：ruby, printf

有人可以帮我理解以下表达式吗？

```
printf("%3d - %s\n", counter, name) 
```

那行打印出这样的东西`6 - Install Adobe software`

我查找了信息并阅读了参考资料，但找不到简单的答案，我有点困惑。如果您可以向我推荐一个好的参考，请这样做。

`%3d`好的，据我了解，`%3d`是字符数或空格数。请指出一个解释它的参考资料。

`%s\n`我无法弄清楚这是做什么的。我猜`\n`是换行符或类似的东西，但是通过查看输出，它似乎不像那样工作。

为什么`counter`和`name`变量用逗号分隔？

通过查看输出，似乎`%3d`有点被替换`counter`并被`%s\n`替换`name`。我不确定它是如何工作的，但我想了解它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T16:08:23.890

有关语法，请查看任何 printf 文档，但请查看[ruby​​-doc 上的 sprintf 文档](https://ruby-doc.org/core/Kernel.html#method-i-sprintf)。

它们用逗号分隔，因为它们是函数的单独参数，但这或多或少是语法糖。想想可变参数。

不知道你的意思是`%s\n`什么，它是一个字符串，然后是一个换行符：这就是它输出的内容。

如果您的问题特别是“代码如何将格式化字符串和一组参数转换为输出”，我可能会搜索源代码，例如一个[微小的嵌入式 printf](http://www.sparetimelabs.com/tinyprintf/index.html)。Nutshell 版本是在格式字符串中搜索格式选项，它们使用相关参数，输出格式适当的字符串。这是一个很小的 ​​DSL。

# android - 使用 YouTubeStandalonePlayer 纵向显示 youtube 视频

> ID：14505625
> 
> 赞同：5
> 
> 时间：2013-01-24T16:05:22.537
> 
> 标签：android, android-youtube-api

对于 android的新版本`youtube api`，当尝试使用 **[YouTubeStandalonePlayer](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeStandalonePlayer)**启动活动时， 它会以横向模式显示视频。

```
Intent youtubeIntent = YouTubeStandalonePlayer.createVideoIntent(context, Configuration.DEVELOPER_KEY, item.getVideo().getId(), 0, true,false);
context.startActivity(youtubeIntent); 
```

我希望视频仍然全屏显示，但使用纵向模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:59:08.693

您可以尝试将`lightboxMode`参数（最后一个布尔值）设置为 true。那时它不会是全屏的，但我认为它至少可以保持纵向模式（我认为，虽然没有尝试过......）。

# c# - 数据绑定到 ICollection

> ID：14505627
> 
> 赞同：1
> 
> 时间：2013-01-24T16:05:24.757
> 
> 标签：c#, asp.net, datasource

我的程序应该从遗留的平面文件中读取和处理数据。

我将数据读入`private ICollection<transaction> transactions;`

```
public class transaction
{
    public int transactionNum;
    public DateTime transactionDate;
    public int orderNum;
    public string customerName;
    public Decimal amount;
} 
```

如何创建一个`DataSource`对此`ICollection<T>`（或它的 LINQ 查询），以便我可以对其进行`DataBind`多个控制值？

注意：我的 LINQ 知识很少。过去，我可以只将一个数据库表拖到我的应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:58:35.513

从您的评论中：

> 在 ASP.NET 表单上，我有一个名为 customerCheckL 的 CheckBoxList。加载数据文件后，代码应使用不同客户名称的列表填充 customerCheckL.Items。我怎么做？customerCheckL.DataSourceID = ???

这更有意义。您可以实现一个`EqulityComparer<transactions>`按客户进行比较的类：

```
public class TransactionCustomerComparer : IEqualityComparer<transaction>
{
    public bool Equals(transaction x, transaction y)
    {
        if (x == null || y == null) return false;
        return x.customerName == y.customerName;
    }

    public int GetHashCode(transaction obj)
    {
        if (obj == null) return int.MinValue;
        return obj.customerName.GetHashCode();
    }
} 
```

（请注意，您可以在所有`Enumerable`允许传递自定义比较器的方法中使用此方法）

然后你可以使用`Distinct`来获得一个唯一的列表。 您只需要设置`DataSource`,`DataTextField`和 .`DataValueField``DataBind``CheckBoxList`

```
var customerComparer = new TransactionCustomerComparer();
customerCheckL.DataSource = transactions.Distinct(customerComparer);
customerCheckL.DataTextField = "customerName";
customerCheckL.DataValueField = "transactionNum";
customerCheckL.DataBind(); 
```

# iphone - 检查 NavigationStack 是否包含 View Controller 错误

> ID：14505628
> 
> 赞同：0
> 
> 时间：2013-01-24T16:05:28.900
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uinavigationcontroller

我正在尝试查看视图控制器是否在导航堆栈上，并且我迷失了要做什么。这是我正在尝试做的事情：

```
if ([((AppDelegate *)[UIApplication sharedApplication].delegate).frontViewController.navigationController.viewControllers containsObject:SGAddNewServerViewController]) {
    <#statements#>
} 
```

`SGAddNewServerViewController`问题是，由于我需要知道它的地址，我如何获得参考`objectAtIndex...`？XCode 给了我一个不知道它是什么的错误，他是对的。

关于如何`without`知道它在 NavigationStack 上的确切地址的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:13:20.813

您可以遍历所有控制器并检查是否存在 SGAddNewServerViewController 类型的控制器

```
NSArray *viewControllers = ((AppDelegate *)[UIApplication sharedApplication].delegate).frontViewController.navigationController.viewControllers;
for (UIViewController *controller in viewControllers) {
    if ([controller isKindOfClass:[SGAddNewServerViewController class]]) {
        //todo something
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:13:28.160

您似乎正在尝试根据其类查找视图控制器。为此，请尝试以下操作：

```
AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
UINavigationController *nav = delegate.frontViewController.navigationController;
for (UIViewController *controller in nav.viewControllers) {
    if ([controller isKindOfClass:[SGAddNewServerViewController class]]) {
        SGAddNewServerViewController *sgController = (SGAddNewServerViewController *)controller;
        // do stuff
    }
} 
```

请注意，将这么多方法/属性调用嵌套在一行中并不是一个好主意。它使阅读和调试变得非常困难。

# structuremap - 每次需要时如何注入新对象？

> ID：14505631
> 
> 赞同：0
> 
> 时间：2013-01-24T16:05:41.210
> 
> 标签：structuremap

我有这个构造函数：

```
public GroupController(IUserService userService, IGroupService groupService)
{
    _groupService = groupService;
    _userService = userService;
} 
```

userService 和 groupService 在构造函数中具有相同的对象：

```
public UserService(IDb db)
{
     _db = db;
}

public GroupService(IDb db)
{
     _db = db;
} 
```

我的容器是这样的：

```
ObjectFactory.Initialize(x =>
{
    x.Scan(scan =>
    {
        scan.TheCallingAssembly();
        scan.WithDefaultConventions();
    });

    x.For<IDb>().Use<Db>();
    x.For<IUserService>().Use<UserService>();
    x.For<IGroupService>().Use<GroupService>();
}); 
```

那么，我如何为 UserService 注入一个 IDb，为 GroupService 注入另一个 IDb，因为我不能使用同一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:38:38.070

StructureMap 对象的默认生命周期是`PerRequestLifecycle`，这意味着在同一构建会话中对同一接口的多个请求将解析为单个实例。如果您希望它将每个接口请求解析为唯一的实例，您可以使用`UniquePerRequestLifecycle`.

**TL;DR**`IDb` ：像这样配置你：

```
x.For<IDb>.AlwaysUnique().Use<Db>(); 
```

# jquery - 基于 mouseenter 方向使用 CSS3 定向翻转图块，同时还使用切换开关进行默认翻转

> ID：14505638
> 
> 赞同：1
> 
> 时间：2013-01-24T16:06:05.087
> 
> 标签：jquery, css, css-transitions

所以我有一个瓷砖网格。

[js小提琴](http://jsfiddle.net/F5SbD/1/)

我试图根据 mouseenter 方向翻转它们（例如：如果鼠标从底部进入，则瓷砖向上翻转，如果鼠标从左侧进入，瓷砖向右翻转）。出现问题是因为您需要在转换瓷砖之前将瓷砖的背面旋转到正确的方向，以便在正确的方向上进行旋转。

切换按钮应该将所有图块翻转到位置二，然后它们可以在悬停时反向旋转。

如果您查看我的脚本，我已经在 mouseenter 上添加了类，以便为我的方向提供一个钩子。我尝试使用@keyframes 尝试在它们旋转之前设置磁贴的对齐方式，但我无法让磁贴在鼠标悬停时重新旋转。我还使用了一种方法，该方法将瓷砖背面旋转到正确的方向，然后在 10 毫秒后触发动画。不过，这似乎有点麻烦。

还有其他我可能错过的建议吗？

```
<a href="#" class="toggle">Toggle</a>
<div class="grid">
    <div class="tile posone">
        <div class="front"><img src="http://placehold.it/250x175/00baff/ffffff" height="175" height="250" /></div>
        <div class="back"><img src="http://placehold.it/250x175/ffa800/ffffff" height="175" height="250" /></div>
    </div>
</div>

<script>

flip = { 
    init: function(){
        $('.toggle').on('click', flip.toggle);
        $('.tile').on('hover', flip.hover);
    },

    toggle: function(e){
        e.preventDefault();
        $('.tile').each(function(i, elm) {
                setTimeout(function(){
            flip.autoFlip($(elm));
        }, i*40);
        });
    },

    hover: function(e){
        if (e.type === 'mouseenter'){
            var dir = flip.getDir($(this), { x:e.pageX, y:e.pageY });
        }
        flip.flipOver($(this), e.type, dir);
    },

    flipOver: function($elm, type, dir){

            switch (dir) {
                case 0 :
                    $elm.addClass('top');   
                break;
                case 1 :
                    $elm.addClass('right'); 
                break;
                case 2 :
                    $elm.addClass('bottom');    
                break;
                case 3 :
                    $elm.addClass('left');  
                break;
                default :
                    $elm.removeClass('top right bottom left');
            }

            $elm.toggleClass('posone postwo');

    },

    autoFlip: function($elm){
        $elm.toggleClass('posone postwo');
    },

    getDir: function($elm, coord){
        var w = $elm.width(),
            h = $elm.height(),
            x = ( coord.x - $elm.offset().left - ( w/2 )) * ( w > h ? ( h/w ) : 1 ),
            y = ( coord.y - $elm.offset().top  - ( h/2 )) * ( h > w ? ( w/h ) : 1 ),
            direction = Math.round( ( ( ( Math.atan2(y, x) * (180 / Math.PI) ) + 180 ) / 90 ) + 3 )  % 4;
        return direction;
    }

}

$(document).ready(function() {
    flip.init();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:23:45.217

不知何故 jsFiddle 现在不会为我加载，但我会说不要旋转`.front`和`.back`，`.tile`在悬停时旋转。并且`.back`旋转了 180 度（`rotateY`从左侧`rotateX`悬停时，从右侧悬停时），没有过渡。

# java - 卡在 reader.readLine()

> ID：14505639
> 
> 赞同：4
> 
> 时间：2013-01-24T16:06:09.243
> 
> 标签：java, android

> **可能重复：**
> [执行 readLine() 时套接字卡住](https://stackoverflow.com/questions/7757544/socket-gets-stuck-when-doing-readline)

我写了 jar 库并想在我的 android 项目中使用它。这是该库中的一个重要方法：

```
private static String convertStreamToString(InputStream is) {
        /* is - it's the inputStream created from server response entity. 
        I use org.apache.http classes to communicate with server. */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) { // <-- this line
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

如果我使用我的库来构建 Java 小程序并在 PC 上运行它——这段代码可以很好地工作。

但是，如果我在 Android 应用程序中使用它并在模拟器或设备上运行它，它有时会（并非总是！）在标记线上停留很长时间。所以在这种情况下会发生 SockedTimeoutExceptions。

所以，我想知道原因。如果你能帮助我摆脱这个问题，那就太好了。

# asp.net - ASP.NET 会话状态 - 适用于 Firefox 和 IE8，不适用于 Chrome

> ID：14505645
> 
> 赞同：1
> 
> 时间：2013-01-24T16:06:26.373
> 
> 标签：asp.net, google-chrome, session, iis, internet-explorer-8

我正在尝试使用会话状态传递四个项目，如下所示：

```
 protected void createFirstNameSessionVariable(object sender, EventArgs e)
    {
        Session["FirstName"] = firstName.Value;
        Session.Timeout = 60;
        TextBox1.Text = Session["FirstName"].ToString(); 
    }

    protected void createLastNameSessionVariable(object sender, EventArgs e)
    {
        Session["LastName"] = lastName.Value;
        Session.Timeout = 60;
        TextBox2.Text += Session["LastName"].ToString();
    }
    protected void createIdSessionVariable(object sender, EventArgs e)
    {
        Session["FacebookId"] = facebookId.Value;
        Session.Timeout = 60;
        TextBox3.Text += Session["FacebookId"].ToString();
    }
    protected void createEmailSessionVariable(object sender, EventArgs e)
    {
        Session["Email"] = email.Value;
        Session.Timeout = 60;
        TextBox4.Text += Session["Email"].ToString();
    } 
```

在 Firefox 和 IE8 中，我可以使用以下命令将它们放在另一个页面上：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["FacebookId"] != null)
        {
            name = Session["FacebookId"].ToString();
            studentButton.Text = name;
        }
        else
        {
            studentButton.Text = "fail";
        }
    } 
```

然而，在 Chrome 中，按钮标签设置为失败，因为会话变量在接收端具有空值。

在 IIS 7.0 管理器上，会话状态当前设置为“进行中”模式：使用 Cookie 名称：ASP.NET_SessionId 超时：20 分钟

检查使用主机身份进行模拟。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:19:20.403

确保您已在 Chrome 中允许 cookie。

# checkbox - xpages - 复选框为空

> ID：14505646
> 
> 赞同：0
> 
> 时间：2013-01-24T16:06:27.230
> 
> 标签：checkbox, null, xpages

我在下面的问题中被指向该站点。

我从 OpenNTF.org 借用了复选框代码。该项目是 - [http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&documentId=CDD107F4006F7D5C8625775F001B8C61](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&documentId=CDD107F4006F7D5C8625775F001B8C61)

我已将它集成到 xPage 中，并且在本地、Web 浏览器和手持设备上的 notes 客户端中运行时运行良好。但是，当在 domino 服务器上的副本上运行时，列数的值为 null。多米诺服务器是 8.5.3 FP1。

不知道为什么只有在通过notes客户端在domino服务器上时才出现错误，而它在本地客户端中工作得很好。

谢谢，沃尔特

这是错误

意外的运行时错误 运行时遇到意外错误。错误源页面名称：/Company.xsp 控件 ID：rowRepeat

执行 JavaScript 计算表达式时出现异常错误脚本解释器错误，行 = 1，列 = 37：'compositeData.FieldValues' 为空

JavaScript 代码

```
Math.ceil(compositeData.FieldValues.length / compositeData.numberOfColumns); 
```

堆栈跟踪

```
com.ibm.xsp.exception.EvaluationExceptionEx: Error while executing JavaScript computed expression
com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(Unknown Source)
com.ibm.xsp.component.UIDataIterator.getValue(Unknown Source)
com.ibm.xsp.component.UIDataIterator.createDataModel(Unknown Source)
com.ibm.xsp.component.UIDataIterator.getDataModel(Unknown Source)
com.ibm.xsp.component.UIDataIterator.setRowIndex(Unknown Source)
com.ibm.xsp.renderkit.html_extended.IteratorRenderer.encodeRows(Unknown Source)
com.ibm.xsp.renderkit.html_extended.IteratorRenderer.encodeChildren (Unknown Source)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
com.ibm.xsp.component.UIDataIterator.encodeChildren(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
com.ibm.xsp.component.UIViewRootEx._renderView(Unknown Source)
com.ibm.xsp.component.UIViewRootEx.renderView(Unknown Source)
com.ibm.xsp.application.ViewHandlerExImpl.doRender(Unknown Source)
com.ibm.xsp.application.ViewHandlerExImpl._renderView(Unknown Source)
com.ibm.xsp.application.ViewHandlerExImpl.renderView(Unknown Source)
com.sun.faces.lifecycle.RenderResponsePhase.execute(Unknown Source)
com.sun.faces.lifecycle.LifecycleImpl.phase(Unknown Source)
com.sun.faces.lifecycle.LifecycleImpl.render(Unknown Source)
com.ibm.xsp.controller.FacesControllerImpl.render(Unknown Source)
com.ibm.xsp.webapp.FacesServlet.serviceView(Unknown Source)
com.ibm.xsp.webapp.FacesServletEx.serviceView(Unknown Source)
com.ibm.xsp.webapp.FacesServlet.service(Unknown Source)
com.ibm.xsp.webapp.FacesServletEx.service(Unknown Source)
com.ibm.xsp.webapp.DesignerFacesServlet.service(Unknown Source)
com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet (Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(Unknown Source)
com.ibm.designer.runtime.domino.adapter.ComponentModule $AdapterInvoker.invokeServlet(Unknown Source)
com.ibm.designer.runtime.domino.adapter.ComponentModule $ServletInvoker.doService(Unknown Source)
com.ibm.designer.runtime.domino.adapter.ComponentModule.doService (Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFService.access$0(Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFService$NsfServiceRequest.call(Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFService$NsfServiceRequest.call(Unknown Source)
java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
java.util.concurrent.FutureTask.run(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
java.lang.Thread.run(Unknown Source)
com.ibm.domino.xsp.module.nsf.NSFService$NsfServiceThread.run(Unknown Source) 
```

.

```
com.ibm.jscript.InterpretException: Script interpreter error, line=1, col=37: compositeData.FieldValues' is null
    com.ibm.jscript.ASTTree.ASTMember.interpret(Unknown Source)
    com.ibm.jscript.ASTTree.binaryop.ASTBinaryDefaultOp.interpret(Unknown Source)
    com.ibm.jscript.ASTTree.ASTArgumentList.interpretArguments(Unknown Source)
    com.ibm.jscript.types.FBSObject.call(Unknown Source)
    com.ibm.jscript.ASTTree.ASTCall.interpret(Unknown Source)
    com.ibm.jscript.ASTTree.ASTProgram.interpret(Unknown Source)
    com.ibm.jscript.ASTTree.ASTProgram.interpretEx(Unknown Source)
    com.ibm.jscript.JSExpression._interpretExpression(Unknown Source)
    com.ibm.jscript.JSExpression.access$1(Unknown Source)
    com.ibm.jscript.JSExpression$2.run(Unknown Source)
    java.security.AccessController.doPrivileged(Unknown Source)
    com.ibm.jscript.JSExpression.interpretExpression(Unknown Source)
    com.ibm.jscript.JSExpression.evaluateValue(Unknown Source)
    com.ibm.jscript.JSExpression.evaluateValue(Unknown Source)
    com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(Unknown Source)
    com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(Unknown Source)
    com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(Unknown Source)
    com.ibm.xsp.component.UIDataIterator.getValue(Unknown Source)
    com.ibm.xsp.component.UIDataIterator.createDataModel(Unknown Source)
    com.ibm.xsp.component.UIDataIterator.getDataModel(Unknown Source)
    com.ibm.xsp.component.UIDataIterator.setRowIndex(Unknown Source)
    com.ibm.xsp.renderkit.html_extended.IteratorRenderer.encodeRows(Unknown Source)
    com.ibm.xsp.renderkit.html_extended.IteratorRenderer.encodeChildren (Unknown Source)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
    javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
    com.ibm.xsp.component.UIDataIterator.encodeChildren(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
    com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
    javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
    com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
    javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
    com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
    javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderChildren(Unknown Source)
    com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren (Unknown Source)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(Unknown Source)
    javax.faces.component.UIComponentBase.encodeChildren(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.util.FacesUtil.renderComponent(Unknown Source)
    com.ibm.xsp.component.UIViewRootEx._renderView(Unknown Source)
    com.ibm.xsp.component.UIViewRootEx.renderView(Unknown Source)
    com.ibm.xsp.application.ViewHandlerExImpl.doRender(Unknown Source)
    com.ibm.xsp.application.ViewHandlerExImpl._renderView(Unknown Source)
    com.ibm.xsp.application.ViewHandlerExImpl.renderView(Unknown Source)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(Unknown Source)
    com.sun.faces.lifecycle.LifecycleImpl.phase(Unknown Source)
    com.sun.faces.lifecycle.LifecycleImpl.render(Unknown Source)
    com.ibm.xsp.controller.FacesControllerImpl.render(Unknown Source)
    com.ibm.xsp.webapp.FacesServlet.serviceView(Unknown Source)
    com.ibm.xsp.webapp.FacesServletEx.serviceView(Unknown Source)
    com.ibm.xsp.webapp.FacesServlet.service(Unknown Source)
    com.ibm.xsp.webapp.FacesServletEx.service(Unknown Source)
    com.ibm.xsp.webapp.DesignerFacesServlet.service(Unknown Source)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet (Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(Unknown Source)
    com.ibm.designer.runtime.domino.adapter.ComponentModule $AdapterInvoker.invokeServlet(Unknown Source)
    com.ibm.designer.runtime.domino.adapter.ComponentModule
$ServletInvoker.doService(Unknown Source)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.doService (Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFService.access$0(Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFService$NsfServiceRequest.call(Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFService$NsfServiceRequest.call(Unknown Source)
    java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    java.util.concurrent.FutureTask.run(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)
    com.ibm.domino.xsp.module.nsf.NSFService$NsfServiceThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:47:10.683

脚本解释器错误是“'compositeData.FieldValues' 为空”。在任何自定义控件的上下文中都是如此，`compositeData`是指传递到自定义控件的属性映射的变量。因此，如果`compositeData.FieldValues`是`null`，那么无论分配给`FieldValues`自定义控件属性的表达式，该表达式的计算结果都是`null`。

在您的情况下，表达式`compositeData.FieldValues.length`会引发错误，因为`null`没有长度（...或任何其他属性或方法，就此而言）。

您已经表明这在以下情况下可以正常工作：

*   Notes 客户端，本地副本
*   浏览器访问服务器
*   移动设备访问服务器

这三种情况的共同点是代码在本地运行。当您通过浏览器（包括移动设备）访问 XPage 时，您正在访问某个服务器，但执行的代码是其自身的本地代码……它不必对另一个 Domino 服务器进行 NRPC 调用来运行代码.

因此，它失败的一种情况是不正确的一种情况：从 Notes 客户端访问服务器副本。我猜你传递给的表达式正在`FieldValues`使用`@DbLookup()`或类似的操作，但没有正确考虑代码正在运行的服务器，导致它传递`null`给自定义控件。

# windows - 安装任何未决更新时是否有任何 API 功能可用于关闭 Windows？

> ID：14505648
> 
> 赞同：11
> 
> 时间：2013-01-24T16:06:37.167
> 
> 标签：windows, winapi, shutdown, system-shutdown

我知道`ExitWindowsEx()`简单地关闭 Windows 的 API 函数。但据我所知，你不能让 Windows 安装任何挂起的更新。

是否有任何 API 支持安装任何挂起的更新（在标准蓝屏中显示“*已安装 n 个更新 - 请不要关闭或拔下您的 PC，Windows 将自行关闭*”）然后关闭 Windows（相当于单击 Windows 用户界面的“安装更新并关闭”菜单选项）？

（操作系统版本：Windows XP 及更高版本。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T15:13:29.900

你能做的最好的就是在 Vista 和更高版本上调用`InitiateShutdown`并包含`SHUTDOWN_INSTALL_UPDATES`标志。Windows XP 不支持通过更新以编程方式关闭。

# android - Android 片段生命周期

> ID：14505655
> 
> 赞同：1
> 
> 时间：2013-01-24T16:06:53.947
> 
> 标签：android, actionbarsherlock

我正在计划一个信使应用程序，它由几个区域组成：

*   登陆注册
*   联系人列表
*   对话
*   在线状态选择（在线、离开、免打扰、...）
*   设置

在智能手机上，一次应该只有一个活动，但平板电脑应该有一个带有快捷方式的侧边栏（在显示联系人列表的对话视图中，在显示设置类别列表的设置中）。

据我了解，这些区域将是片段，它们被插入到一个或多个活动中。

所以我开始使用以下布局（res/main.xml）创建一个活动：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@id/main_fragment_focus"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

以及对应的平板布局：(layout-large-land/main.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

        <fragment
            android:id="@id/main_fragment_sidebar"
            android:layout_width="@dimen/main_sidebar_width"
            android:layout_height="match_parent" />

            <fragment
        android:id="@id/main_fragment_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

到现在为止还挺好。至少在我看来。所以我创建了一个简单的活动；我正在使用 ActionBarSherlock，因为我想提供与 API 级别 5+ 的兼容性：

```
package com.pm.messenger;

import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.util.Log;

import com.actionbarsherlock.app.SherlockFragmentActivity;

public class PMMessengerActivity extends SherlockFragmentActivity {

    // -------------------------------------------------------------------------

    FragmentManager fragmentManager = null;

    // -------------------------------------------------------------------------

    public void onCreate(Bundle savedInstanceState) {

        // ---------------------------------------------------------------------

        super.onCreate(savedInstanceState);

        // ---------------------------------------------------------------------

        fragmentManager = getSupportFragmentManager();

        // ---------------------------------------------------------------------

        if (savedInstanceState == null) {

            // -----------------------------------------------------------------

            // -----------------------------------------------------------------

        }
        else {

            // -----------------------------------------------------------------

            // -----------------------------------------------------------------

        }

        // ---------------------------------------------------------------------

        Log.d(getClass().getSimpleName(), "no problem before setContentView");

        setContentView(R.layout.main);

        Log.d(getClass().getSimpleName(), "no problem after setContentView");

        // ---------------------------------------------------------------------

    }

    // -------------------------------------------------------------------------

} 
```

执行此操作后，我的应用程序立即崩溃。首先我想，这是因为我没有提供任何 FragmentManager-FragmentTransactions，但后来我注意到（在插入 Log.d-Lines 之后）调用 SetContentView 时发生了崩溃。

LogCat 输出：

```
01-24 16:58:26.728: I/ActivityManager(667): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.pm.messenger/.pmMessengerActivity bnds=[912,542][1008,638]} from pid 877
01-24 16:58:26.748: D/dalvikvm(26431): Late-enabling CheckJNI
01-24 16:58:26.758: I/ActivityManager(667): Start proc com.pm.messenger for activity com.pm.messenger/.pmMessengerActivity: pid=26431 uid=10009 gids={3003, 1015}
01-24 16:58:26.778: E/jdwp(26431): Failed sending reply to debugger: Broken pipe
01-24 16:58:26.778: D/dalvikvm(26431): Debugger has detached; object registry had 1 entries
01-24 16:58:26.788: D/OpenGLRenderer(877): Flushing caches (mode 1)
01-24 16:58:26.828: D/pmMessengerActivity(26431): no problem before setContentView
01-24 16:58:26.858: D/AndroidRuntime(26431): Shutting down VM
01-24 16:58:26.858: W/dalvikvm(26431): threadid=1: thread exiting with uncaught exception (group=0x40a3e1f8)
01-24 16:58:26.868: D/OpenGLRenderer(877): Flushing caches (mode 0)
01-24 16:58:26.868: E/AndroidRuntime(26431): FATAL EXCEPTION: main
01-24 16:58:26.868: E/AndroidRuntime(26431): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pm.messenger/com.pm.messenger.pmMessengerActivity}: android.view.InflateException: Binary XML file line #7: Error     inflating class fragment
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.os.Looper.loop(Looper.java:137)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.ActivityThread.main(ActivityThread.java:4424)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at java.lang.reflect.Method.invokeNative(Native Method)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at java.lang.reflect.Method.invoke(Method.java:511)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at dalvik.system.NativeStart.main(Native Method)
01-24 16:58:26.868: E/AndroidRuntime(26431): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at com.pm.messenger.pmMessengerActivity.onCreate(pmMessengerActivity.java:48)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.Activity.performCreate(Activity.java:4465)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-24 16:58:26.868: E/AndroidRuntime(26431):    ... 11 more
01-24 16:58:26.868: E/AndroidRuntime(26431): Caused by: java.lang.NullPointerException: name == null
01-24 16:58:26.868: E/AndroidRuntime(26431):    at java.lang.VMClassLoader.findLoadedClass(Native Method)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at java.lang.ClassLoader.findLoadedClass(ClassLoader.java:354)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at java.lang.ClassLoader.loadClass(ClassLoader.java:491)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.support.v4.app.Fragment.instantiate(Fragment.java:381)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.support.v4.app.Fragment.instantiate(Fragment.java:359)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:262)
01-24 16:58:26.868: E/AndroidRuntime(26431):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
01-24 16:58:26.868: E/AndroidRuntime(26431):    ... 22 more
01-24 16:58:26.868: W/ActivityManager(667):   Force finishing activity com.pm.messenger/.pmMessengerActivity
01-24 16:58:27.408: W/ActivityManager(667): Activity pause timeout for ActivityRecord{410d8c98 com.pm.messenger/.pmMessengerActivity} 
```

现在我想，这个崩溃是因为我没有在 XML 中静态地提供任何片段类，*但是*我不想使用它，我想以动态的方式实现它。

当我必须在 XML 中静态提供类时，我认为我还需要多个 Activity（如 LoginActivity、SignupActivity、ContactListActivity、ConversationActivity）但是......停下来，这是不对的，因为那时我的片段失去了它们存在的权利恕我直言。

据我所知，片段是我的应用程序中一个单独的部分，实现了一个区域的功能，就像过去的活动一样；这些将被嵌入到管理后台堆栈的容器活动中。

那么我的逻辑错在哪里？我应该使用带有 FrameView 而不是片段的布局吗？不知道。

此外，我没有找到任何好的、可理解的、有据可查的动态片段管理资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:26:34.503

您的具体错误是由于您试图膨胀一个显然不存在的片段。对于动态片段，您应该在静态布局中放置一个 FrameLayout，并在运行时将片段放入这些帧中。这是一个布局示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<View
    android:id="@+id/anchor"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_centerInParent="true" />

<FrameLayout
    android:id="@+id/top_left"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_above="@+id/anchor"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/anchor">

</FrameLayout>

<FrameLayout
    android:id="@+id/top_right"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_above="@+id/anchor"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/anchor">

</FrameLayout>

<FrameLayout
    android:id="@+id/bottom_left"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/anchor"
    android:layout_toLeftOf="@+id/anchor">

</FrameLayout>

<FrameLayout
    android:id="@+id/bottom_right"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/anchor"
    android:layout_toRightOf="@+id/anchor">

</FrameLayout>

</RelativeLayout> 
```

这恰好将四个大小相等的 FrameLayouts 放在一个网格中。您可以在运行时添加一个片段：

```
 Fragment levelsF = Fragment.instantiate(this, 
LevelsFragment.class.getName());
    Fragment waveF = Fragment.instantiate(this,
WaveFragment.class.getName());
    Fragment lightF = Fragment.instantiate(this,    
LightPlayerFragment.class.getName());
    Fragment keyboardF = Fragment.instantiate(this,
KBFragment.class.getName());

    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.add(R.id.top_left, levelsF);
    ft.add(R.id.top_right, waveF);
    ft.add(R.id.bottom_left, lightF);
    ft.add(R.id.bottom_right, keyboardF);     
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
    getSupportFragmentManager().executePendingTransactions(); 
```

如果您不想要静态片段，请不要在 xml 中引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:16:34.363

Android 为其 API 提供了精彩的文档。它清楚地解释了 Fragment 类的生命周期和方法。希望这可以帮助。 [片段文档](http://developer.android.com/guide/components/fragments.html)

# ruby - 等待获取标签值

> ID：14505656
> 
> 赞同：0
> 
> 时间：2013-01-24T16:06:58.447
> 
> 标签：ruby, watir

我有这个 HTML：

```
<div id="ctl00_SampleContent_FeedbackPanel" style="margin: 10px 0 0 0; padding: 3px; font-style: italic; background-color: #FFFF90;">
<span id="ctl00_SampleContent_FeedbackSelectedIndexChangedLabel">
 You changed your selection to: 
<b>Whiskey</b>
</span> 
```

这是页面顶部的链接：[http](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx) ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx 。

我从下拉列表中选择“威士忌”并单击提交。我需要检查我是否从下拉列表中选择了“威士忌”。那么，**我怎样才能****用 watir获得****威士忌******的价值呢？****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:50:25.060

browser.b(text: "Whiskey").text 有效**

# symfony - Doctrine2 返回返回数据类型错误的字段

> ID：14505661
> 
> 赞同：0
> 
> 时间：2013-01-24T16:07:10.920
> 
> 标签：symfony, types, doctrine, doctrine-orm

我正在做一个中型 Symfony2 项目。在使用几个学说实体时，我坚持以下“错误”。

我有一个包含 3 个字段的实体：

```
<entity name="xxx\yyyBundle\Entity\ABTexte" table="ABTexte">
    <id name="Nr" type="integer" />
    <field name="OID" type="integer" />
    <field name="Text" type="string" />
    <many-to-one target-entity="xxx\yyyBundle\Entity\ABKopf" field="ABKopf" inversed-by="ABTexte">
        <join-column name="OID" referenced-column-name="OID" on-delete="CASCADE" />
    </many-to-one>
</entity> 
```

使用 $repo->findBy() 加载一个或多个实体后，我收到一个数据类型错误的实体。我的结果是：

```
$ABKopf->Nr (int)
$ABKopf->Text (string)
$ABKopf->OID (string)     <===== !!!!!!!!! 
```

对于我的应用程序来说，将此值作为整数获取非常重要。你有什么想法是什么导致了这种行为？

PS：所有值都填充了正确数据类型的数据。例如 OID = 999000

## 我验证了，当我使用整数列作为外键（多对一关系......）时，原则总是将它作为字符串返回

ABKopf 中的关系：

```
<entity name="xxx\yyyBundle\Entity\ABKopf" table="ABKopf">
    <id name="OID" column="OID" type="integer" />
    <field name="ABNr" column="ABNr" type="integer" />
    <!-- ... -->
    <one-to-many target-entity="xxx\yyyBundle\Entity\ABTexte" field="ABTexte" mapped-by="ABKopf" />
</entity> 
```

ABTexte-实体：[https ://gist.github.com/715f3881a57cdd8a7d23](https://gist.github.com/715f3881a57cdd8a7d23)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:24:08.360

根据您的评论

> PS：起初我没有为列 OID 定义数据类型，所以它是一个 varchar(255) / 字符串。后来我将数据类型更改为整数，并使用教义：生成：模式命令来更新数据库中的列...

我将向您解释生成实体的整个“教义过程”。

首先，您编写一个带有一些注解或 yml、xml、ecc 的 PHP 类，它告诉教义如何创建实体、相互链接等等。

第二步是关于以自动化方式生成 getter 和 setter`doctrine:generate:entities`

## 重要的

第三步，当你想改变你的架构时，使用下面的命令`doctrine:schema:update --force`

## 结束重要

我想这`doctrine:generate:schema`不会做你期望它做的事情。
尝试使用我在第三步中编写的命令

# .net - .NET DbGeography.Intersects 不适用于与两个相对半球相交的多边形

> ID：14505662
> 
> 赞同：1
> 
> 时间：2013-01-24T16:07:12.270
> 
> 标签：.net, sql-server-2008, ef-code-first, geospatial, entity-framework-5

比如说，我们有一个覆盖俄罗斯领土的多边形（通过谷歌地图地理编码）：

```
POLYGON ((19.64053 41.18535, -169.0465 41.18535, -169.0465 81.85812, 19.64053 81.85812, 19.64053 41.18535)) 
```

这个多边形与北半球和两个相对的半球相交：东半球和西半球。

让我们在西伯利亚的某个地方举个例子：

```
POINT (93.3252301 56.1171069) 
```

并检查西伯利亚仍然留在俄罗斯：

```
var russia = DbGeography.FromText("POLYGON ((19.64053 41.18535, -169.0465 41.18535, -169.0465 81.85812, 19.64053 81.85812, 19.64053 41.18535))", 4326);
var point = DbGeography.FromText("POINT (93.3252301 56.1171069)", 4326);
var isSiberiaInRussia = russia.Intersects(point); 
// isSiberiaInRussia equals false, and it's wrong. 
```

让我们取一个仅与北半球和东半球相交的多边形。让它成为莫斯科：

```
POLYGON ((37.31933 55.48993, 37.94566 55.48993, 37.94566 56.00966, 37.31933 56.00966, 37.31933 55.48993)) 
```

并带走一个躺在那里的人：

```
POINT (37.622504899999967 55.753602) 
```

让我们检查一下：

```
var moscow = DbGeography.FromText("POLYGON ((37.31933 55.48993, 37.94566 55.48993, 37.94566 56.00966, 37.31933 56.00966, 37.31933 55.48993))", 4326);
var lenin = DbGeography.FromText("POINT (37.622504899999967 55.753602)", 4326);
var isLeninLaysInMoscow = moscow.Intersects(lenin);
// He's still there... 
```

那么，有没有办法进行满足以下条件的地理命中测试：

1.  与 LINQ 兼容
2.  兼容 EF Code First

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T10:35:12.380

你遇到的问题是因为地球的曲率。俄罗斯的多边形是一个非常大的矩形，只有 4 个点。代表南部边缘的线向北弯曲得如此之多，以至于它从“西伯利亚”上方（向北）延伸。

您需要向“俄罗斯”多边形添加更多点才能使其工作或使用几何而不是地理。使用几何虽然您将不得不将多边形分成 2 个，这样它就不会越过 -180 子午线。

# c# - 从 dateTime 获取月份的值并转换为 int？

> ID：14505664
> 
> 赞同：0
> 
> 时间：2013-01-24T16:07:18.383
> 
> 标签：c#, asp.net, datetime, int

所以 atm，每个工作站都有一张发票清单，有些工作站会有很多发票，有些则没有。每个发票列表按升序排序，最近的发票存储在“lastInvoice”中。

下面的代码检查最后一张发票上的日期，并将其与本月 -12 进行比较。如果发票日期为 < ，则将其存储在 selectedInvoicesForRetention 列表中。

```
if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(-12))
       {
        chosenInvoicesForRetention.Add(workstation);
       } 
```

这一切都很好......但是不是 DateTime.Now.AddMonths(-12) 我想用存储在另一个表中的值替换它。

```
workstation.Number_of_Months 
```

这将返回月数，即 1 到 12 之间

我玩过它运算符不能应用于'int'或system.datetime。

是否可以从 invoiceDate 中提取月份的值，并将其转换为 int，然后进行比较。作为 int 等....我在任何地方都正确吗？请指教...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:10:50.113

我不确定我是否正确理解了这个问题，但是；

```
if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(-1*workstation.Number_of_Months)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:10:50.707

> 是否可以从 invoiceDate 中提取月份的值，并将其转换为 int，然后进行比较。

是的，你必须这样做：

```
int month_number = lastInvoice.Invoice_Date.Month 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:10:59.710

不确定我是否理解（再次），但为什么不

```
if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(0 - workstation.Number_of_Months))
       {
        chosenInvoicesForRetention.Add(workstation);
       } 
```

# jquery - 更改多个类名的jQuery动画不起作用

> ID：14505665
> 
> 赞同：0
> 
> 时间：2013-01-24T16:07:18.103
> 
> 标签：jquery

有人可以看看这个并告诉我我做错了什么。这是一个带有 move.up 类的跨度，单击该`.content-wrapper`元素将移动，并且将`.move.up`更改类名以`.move.dwn` 稍后`move.dwn.click(function()`应该开始，但我永远无法做到这一点，为什么？

```
 <style type="text/css">
    .content-wrapper {
        height:100px;
        width:100px;
        background-color:orange;
        position:relative;
    }
    span.move {
        background-color:fuchsia;
        cursor:pointer;
    }
</style>

<span class="move up">click here</span>
<div class="content-wrapper"></div>

<script type="text/javascript">
    $(document).ready(function() {

        $('.move.up').click(function() {
            alert("up");
            $('.content-wrapper').animate({'left': '+=568px'}, 'slow');
            $(this).removeClass('up');
            $(this).addClass('dwn');
        });

        $('.move.dwn').click(function() {
            alert("dwn");
            $('.content-wrapper').animate({'left': '-=568px'}, 'slow');
            $(this).removeClass('dwn');
            $(this).addClass('up');
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:19:05.320

由于您`$('.move.dwn').click(function() {`与 `$('.move.dwn')`页面加载时可能存在或不存在的元素相关联，因此您需要绑定到文档加载时可用的不同元素。我会改变这两个功能，如下所示

```
<script type="text/javascript">
$(function() {
    $(body).on('click', '.move.up', function() {
        alert("up");
        $('.content-wrapper').animate({'left': '+=568px'}, 'slow');
        $(this).removeClass('up');
        $(this).addClass('dwn');
    });

    $(body).on('click', '.move.down', function() {
        alert("dwn");
        $('.content-wrapper').animate({'left': '-=568px'}, 'slow');
        $(this).removeClass('dwn');
        $(this).addClass('up');
    });
 });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:19:09.677

你使用的是什么 jQuery 版本？

如果您使用的是 1.8 版本，这可能会对您有所帮助：

```
$('.move').on("click", function() {
    if($(this).hasClass('up')) {
         $('.content-wrapper').animate({
            'left': '+=568px'
        }, 'slow');
        $(this).removeClass('up');
        $(this).addClass('dwn');
    }
    else {
        $('.content-wrapper').animate({
            'left': '-=568px'
        }, 'slow');
        $(this).removeClass('dwn');
        $(this).addClass('up');
    }

}); 
```

示例（将距离更改为 100 像素以使其更易于查看）：http: [//jsfiddle.net/XWyZD/1/](http://jsfiddle.net/XWyZD/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:18:05.657

您在项目位于 dom 之前添加点击事件。而是将单击事件侦听器添加到父级，它们会在冒泡时执行。

```
$(document).ready(function() {
    $(document).on('click', '.move.up', function(){
        alert("up");
        $('.content-wrapper').animate({'left': '+=568px'}, 'slow');
        $(this).removeClass('up');
        $(this).addClass('dwn');
    }).on('click', '.move.dwn', function(){
        alert("dwn");
        $('.content-wrapper').animate({'left': '-=568px'}, 'slow');
        $(this).removeClass('dwn');
        $(this).addClass('up');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:19:23.953

您的问题在于 .click() 函数没有更新它们所绑定的元素。幸运的是，jQuery 在 on() 中有一个解决方案（以前是 live()）。这将动态绑定您的事件，并且在更新后它仍然会选择类。

尝试这个：

```
<script type="text/javascript">
$(document).ready(function() {

    $('.move.up').on('click', function() {
        alert("up");
        $('.content-wrapper').animate({'left': '+=568px'}, 'slow');
        $(this).removeClass('up');
        $(this).addClass('dwn');
    });

    $('.move.dwn').on('click', function() {
        alert("dwn");
        $('.content-wrapper').animate({'left': '-=568px'}, 'slow');
        $(this).removeClass('dwn');
        $(this).addClass('up');
    });
}); 
```

# algorithm - 计算相交矩形的周长和面积？

> ID：14505668
> 
> 赞同：6
> 
> 时间：2013-01-24T16:07:26.650
> 
> 标签：algorithm, tree, intervals

我进行了很多搜索，但没有找到适合这种情况的好答案。我们有一些水平或垂直的矩形。它们可以随机放置在页面上。它们可以重叠或具有共同的边缘或彼此分开。我想找到一个 O(nlogn) 的算法，可以找到这些矩形的周长和面积。这些图片可能会让问题变得清晰。

![在此处输入图像描述](../Images/c71930d232d6b0683787bc8c567dd456.png)

我认为区间树可能会有所帮助，但我不确定如何。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T17:13:36.543

它可以通过*扫描线*算法来完成。

我们将从左到右扫过一条假想线。我们会注意到线和矩形集之间的交点表示一组间隔的方式，并且当我们遇到矩形的左边缘或右边缘时它会发生变化。

假设 x 坐标**x1**和**x2**之间的交点没有变化。**然后，如果x1**之后的交点长度为**L ，则该线将从****x1**扫到**x2** ，扫过一个等于 ( **x2** - **x1** ) * **L**的区域。

 ****例如，您可以将**x1**视为左蓝线，将**x1**视为下图中的右蓝线（我从您那里偷来并稍作修改 :)）： ![在此处输入图像描述](../Images/4df6e0e5f3a2c52d074401664b64f345.png)

应该清楚的是，我们*扫描线*的交点在这些点之间没有变化。然而，蓝色的十字路口与红色的十字路口有很大的不同。

我们需要一个包含这些操作的数据结构：

```
insert_interval(y1, y2); 
get_total_length(); 
```

这些很容易用*段树*实现，所以我现在不会详细介绍。

现在，算法将如下所示：

1.  获取所有垂直线段并按它们的 x 坐标对它们进行排序。
2.  对于每个相关的 x 坐标（只有那些显示为矩形边缘的坐标很重要）：
    *   令 x1 为先前的相关 x 坐标。
    *   令 x2 为当前相关的 x 坐标。
    *   让 L 是我们的数据结构给出的长度。
    *   将 (x2 - x1) * L 添加到总面积总和。
    *   从数据结构中删除所有具有 x = x2 段的*右*边缘。
    *   将所有具有 x = x2 段的*左*边缘添加到数据结构中。

*左右**是*指矩形的边。

这个想法仅用于计算面积，但是，您可以修改它来计算周长。基本上，您会想知道交点在某个 x 坐标处变化前后的长度之间的差异。

该算法的复杂度为 O(N log N)（尽管它取决于您可能作为输入获得的值的范围，但这很容易处理）。

[您可以在TopCoder上找到有关](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lineSweep)*扫描线*算法这一广泛主题的更多信息。

您可以在[PEG 评委 wiki](http://wcipeg.com/wiki/Segment_tree)上阅读有关使用*分段树*的各种方法。

这是我的（非常老的）算法实现，作为[SPOJ 问题 NKMARS](http://www.spoj.com/problems/NKMARS/)的解决方案：[实现](http://pastebin.com/RW2fyrZk)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:15:22.437

以下是 O(N2) 解决方案。

```
int area = 0;
FOR(triange=0->N)
{
    Area = area trianlges[triangle];
    FOR(int j = triangle+1 -> N)
    {
        area-= inter(triangle , j)
    }
}
return area;

int inter(tri a,tri b)
{
    if ( ( min(a.highY ,b.highY) > max(a.lowerY, b.lowerY) ) && ( min(a.highX ,b.highX) > max(a.lowerX, b.lowerX) ) )
    return ( min(a.highY ,b.highY) - max(a.lowerY, b.lowerY) ) * ( min(a.highX ,b.highX) - max(a.lowerX, b.lowerX) )

    else return 0;
} 
```****

# html - Outlook 正在添加我不想要的右边距

> ID：14505671
> 
> 赞同：0
> 
> 时间：2013-01-24T16:07:31.887
> 
> 标签：html, email, outlook

我正在测试一个 html 电子邮件是...... Outlook，它在我的表格右侧添加了一个奇怪的不需要的边距。

这两个表应该并排排列，每个 200 像素在一个 400 像素的父表中（在移动设备上折叠到 200 像素）。

Outlook 行为的第一个线索是表格不再并排。And when the text is selected the added margin is clearly showing:

![在此处输入图像描述](../Images/f54282f225236e1ffcc5a5c77cfb4c9a.png)

有什么想法吗？这是我的代码 - 正如你所看到的，我已经尝试了几乎所有我能想到的！

```
<table width="400" border="0" cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-right: none; witdh: 200px">
  <tr style="border-collapse:collapse; margin-right: none; witdh: 400px">
    <td style="border-collapse:collapse; margin-right: none; witdh: 400px">

<table width="200" border="0" cellspacing="0" cellpadding="0" align="left" style="border-collapse:collapse; margin-right: none; witdh: 200px;">
  <tr style="border-collapse:collapse; margin-right: none; witdh: 200px">
    <td style="border-collapse:collapse; margin-right: none; witdh: 200px">Box;</td>
  </tr>
</table><table width="200" border="0" cellspacing="0" cellpadding="0" align="left" style="border-collapse:collapse; margin-right: none; witdh: 200px;">
  <tr style="border-collapse:collapse; margin-right: none; witdh: 200px">
    <td style="border-collapse:collapse; margin-right: none; witdh: 200px">Box;</td>
  </tr>
</table>

    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:20:21.283

这不是表格在 Outlook 中的工作方式，对不起！

您需要将所有数据包含在一个表中，或者在两个表周围包装一个“超级表”

```
<table id="supertable">
  <tr>
    <td width="200">
      <!-- Left-hand table goes here -->
      <table>
        <tr>
          <td>Box;</td>
        </tr>
        <tr>
          <td>Box;</td>
        </tr>
      </table>
    </td>
    <td width="200">
      <!-- Right-hand table goes here -->
      <table>
        <tr>
          <td>Unsubscribe here...</td>
        </tr>
        <tr>
          <td>Change your details here...</td>
        </tr>
      </table>
    </td>
  </tr> 
```

当涉及到 Outlook HTML（即世纪之交的基于表格的怪物）时，最好在方格纸上勾勒您的设计以制定您的“网格”。然后，您可以使用/元素的`colspan`和`rowspan`属性来合理地布局。`<td>``<tr>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:53:04.683

找到了解决方案！我遇到了同样的问题 - 我正在遵循 Campaign Monitor 的响应式布局提示，他们确实推荐并排的表格。此外，根据我的经验，我无法`<td>`在 iOS Mail 上表现得像行（在 Mobile Safari 上工作，但在通过电子邮件发送时不再工作）。

再用谷歌搜索，我找到了一个解决方案：[它涉及设置边框和包装标签`<td>`上`<p>`](http://www.emailonacid.com/blog/details/C13/removing_unwanted_spacing_or_gaps_between_tables_in_outlook_2007_2010)的内容。检查第 3 步。它有效！

# php - 使用二进制数据进行 SQL 查询（PHP 和 MySQL）

> ID：14505673
> 
> 赞同：17
> 
> 时间：2013-01-24T16:07:33.080
> 
> 标签：php, mysql, binary-data

这个网站过去帮了我很多，但现在我迷路了。提前感谢您的指导。

我有一个包含二进制值的 MySQL 表，如下例所示。我不能换桌子。

```
CREATE TABLE `test` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `nid` binary(16) NOT NULL,
   `test` varchar(45) DEFAULT NULL,
PRIMARY KEY (`id`)) 
```

这是一个 nid 的示例值：（`ÞFÈ>ZPÎ×jRZ{æ×` 不是全部显示，但所有 16 个都在那里）

现在我想创建一个 SQL 查询来查找该值为 true 的行的 id。

```
SELECT id FROM test WHERE nid = 'ÞFÈ>ZPÎ×jRZ{æ×'; 
```

...不起作用。任何想法？

**解决方案** 获得 HEX 格式的 nid 就可以了。它导致 DE46C83E5A50CED70E6A525A7BE6D709 并且当我在这样的查询中使用它时......

```
SELECT id FROM test WHERE HEX(nid) = 'DE46C83E5A50CED70E6A525A7BE6D709'; 
```

我得到了正确的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T16:12:26.457

> **注意**：这涉及二进制数据，而不是*加密*数据。请参阅[此答案](https://stackoverflow.com/a/53035061/2224584)以搜索加密数据。

尝试在用于搜索的二进制数据前面添加 或`X`：`x``0x`

```
SELECT id FROM test WHERE pid = '0xÞFÈ>ZPÎ×jRZ{æ×'; 
```

**编辑：**也试试这个：

```
SELECT id FROM test WHERE BINARY pid = 'ÞFÈ>ZPÎ×jRZ{æ×'; 
```

**或者**

```
SELECT id FROM test WHERE HEX(pid) = BIN2HEX('0xÞFÈ>ZPÎ×jRZ{æ×'); 
```

如这里所说：[如何使用二进制字段进行选择？(php,mysql)](https://stackoverflow.com/questions/9799788/how-to-select-with-a-binary-field-php-mysql)

**如果上面没有任何效果：**尝试获取格式，`pid`例如`HEX`

```
SELECT id, HEX(pid) pid, test FROM test 
```

然后在搜索时仅尝试：

```
SELECT id, test FROM test WHERE HEX(pid) = '{$my_pid}' 
```

但我不确定您如何将`pid`数据获取到 PHP，甚至不确定您是否将二进制数据传递到您的`select - where`查询中......只是由于`php`标签而猜测......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-08T10:17:24.023

尝试：

```
X''   --Hex Content

mysql> SELECT x'4D7953514C'；
    -> 'MySQL' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-24T19:23:17.243

jixiang 的最后一篇文章为我指明了搜索二进制字段的正确方向：

```
SELECT * FROM test WHERE yourBinaryColumn = x'binarystuffdata'; 
```

这对我有用...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-13T16:30:13.103

对我来说，它在二进制字段中没有引号

```
SELECT * FROM `clients_addresses` WHERE client_id = 0x4f8472e23e63404fb8f9f56 
```

# java - 什么时候在 Java 的接口中声明变量是正确的？

> ID：14505675
> 
> 赞同：1
> 
> 时间：2013-01-24T16:07:45.310
> 
> 标签：java, interface

> **可能重复：**
> [接口常量有什么用？](https://stackoverflow.com/questions/2659593/what-is-the-use-of-interface-constants)

我正在 Eclipse EE 中创建一个计算器程序，想知道在项目中编写接口是否正确，以及何时需要或适合在 Java 接口中声明变量？

另外，我想知道是否应该在我的计算器程序中创建一个抽象类。我的计算器程序遵循基本的模型-视图-控制器模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:09:56.627

接口中的所有变量都是静态常量。尽管您没有明确地编写它，但它们仍然是公共的、静态的和最终的。

这在一个界面中

```
String msg = "Please enter value : " 
```

是相同的

```
public final static String msg = "Please enter value : " 
```

通常，所有常量都保存在一个接口中，并通过 interface_name.variable 名称在整个项目中使用。

# forms - 在维护表单身份验证的同时使用 ADFS

> ID：14505676
> 
> 赞同：2
> 
> 时间：2013-01-24T16:07:46.987
> 
> 标签：forms, authentication, adfs

我有一个关于 ADFS 和表单身份验证的问题。我目前维护一个用户数据库，并围绕它构建了一个有点复杂的基于索赔的系统。我的所有客户都使用表单身份验证来访问我的网站 (ASP.NET)。最近，我的一位客户表示希望切换到单点登录模式。我想使用 ADFS 来完成此任务。我的问题是如何同时使用表单身份验证和 ADFS。我需要我的所有其他客户仍然能够使用表单身份验证访问该站点。我知道这不是一个罕见的问题，但我似乎找不到任何好的答案。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T14:23:07.920

使用 ADFS V2.0 允许两种类型的身份验证、窗口和表单，并且都依赖于活动目录，这意味着您必须将所有用户数据保存并保存在活动目录中。

请参阅[http://www.richardawilson.com/2010/10/adfs-20-login-page.html](http://www.richardawilson.com/2010/10/adfs-20-login-page.html)

如果您需要 ADFS 从 Active Directory 以外的其他来源读取用户和凭据，在这种情况下，您必须实现自定义声明提供程序并配置 ADFS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:05:49.060

不确定我是否完全理解这个问题，但 ADFS 可以使用 FBA - [AD FS 2.0: How to Change the Local Authentication Type](http://social.technet.microsoft.com/wiki/contents/articles/1600.aspx)。

您的“基于索赔的复杂系统”是 STS 吗？如果是，只需与 ADFS 联合。

如果不是，请查看[Thinktecture IdentityServer](http://thinktecture.github.com/)。

# c++ - 在 C++ 环境中使用 OpenCV 绘制边界框

> ID：14505679
> 
> 赞同：1
> 
> 时间：2013-01-24T16:07:52.673
> 
> 标签：c++, opencv, bounding-box

你好窥视我已经开发了一个绘制输入图像轮廓的软件，现在我不会把它带到一个新的水平并在感兴趣的对象周围绘制边界框，即一个人。我查看了 boundingRect() 函数，但我很难理解它。也许有不同的功能算法绘制边界框.....？

这是我的程序的代码：

```
 #include "iostream"
    #include<opencv\cv.h>
    #include<opencv\highgui.h>
    #include<opencv\ml.h>
    #include<opencv\cxcore.h>
    #include <iostream> 
    #include <string> 
    #include <opencv2/core/core.hpp> // Basic OpenCV structures (cv::Mat)
    #include <opencv2/highgui/highgui.hpp> // Video write

using namespace cv;
using namespace std;

Mat image; Mat image_gray; Mat image_gray2; Mat threshold_output;
int thresh=100, max_thresh=255;

int main(int argc, char** argv) {

    //Load Image
    image =imread("C:/Users/Tomazi/Pictures/Opencv/tomazi.bmp");

    //Convert Image to gray & blur it
    cvtColor( image, 
        image_gray, 
        CV_BGR2GRAY );

    blur( image_gray, 
        image_gray2,
        Size(3,3) );
    //Threshold Gray&Blur Image
    threshold(image_gray2, 
        threshold_output, 
        thresh, 
        max_thresh, 
        THRESH_BINARY);

    //2D Container
    vector<vector<Point>> contours;

    //Fnd Countours Points, (Imput Image, Storage, Mode1, Mode2, Offset??)
    findContours(threshold_output,
        contours, // a vector of contours
        CV_RETR_EXTERNAL,// retrieve the external contours
        CV_CHAIN_APPROX_NONE,
        Point(0, 0)); // all pixels of each contours    

    // Draw black contours on a white image
    Mat result(threshold_output.size(),CV_8U,Scalar(255));
    drawContours(result,contours,
        -1, // draw all contours
        Scalar(0), // in black
        2); // with a thickness of 2

        //Create Window
    char* DisplayWindow = "Source";
    namedWindow(DisplayWindow, CV_WINDOW_AUTOSIZE);
    imshow(DisplayWindow, result);

    waitKey(5000);
    return 1;
} 
```

任何人都可以提出解决方案...？也许指导我一些资源、教程等。阅读 OpenCV 文档并查看我仍然不理解的 boundingRect() 函数。请帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:10:37.583

但是您也可以自己轻松计算边界框，然后使用以下`rectangle`函数绘制它们：

```
int maxX = 0, minX = image.cols, maxY=0, minY = image.rows;

for(int i=0; i<contours.size(); i++)
    for(int j=0; j<contours[i].size(); j++)
    {
        Point p = contours[i][j];

        maxX = max(maxX, p.x);
        minX = min(minX, p.x);

        maxY = max(maxY, p.y);
        minY = min(minY, p.y);
    }

rectangle( result, Point(minX,minY), Point(maxX, maxY), Scalar(0) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:33:10.983

[这个](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/bounding_rects_circles/bounding_rects_circles.html)链接没有帮助？

我认为它演示了如何获取轮廓对象并使其成为多边形近似，以及如何在其周围绘制边界矩形。

它似乎是基本的 OpenCV 演示之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:19:13.890

我在这些帖子中谈到了边界框技术：

*   [如何从图像中检测文本区域？](https://stackoverflow.com/questions/10206526/how-to-detect-text-area-from-image/10232763#10232763)
*   [Contours opencv：如何消除二值图像中的小轮廓](https://stackoverflow.com/questions/10238765/contours-opencv-how-to-eliminate-small-contours-in-a-binary-image/10239600#10239600)
*   [OpenCv 2.3 C - 如何隔离图像内的对象](https://stackoverflow.com/a/10317919/176769)（简单的 C++ 演示）

我认为最后一个可能可以帮助您了解标准技术的工作原理。OpenCV 提供的是一种更简单的方法。

# python - 为 WHO 婴儿百分位数/z 分数生成图表/图形

> ID：14505687
> 
> 赞同：1
> 
> 时间：2013-01-24T16:08:16.970
> 
> 标签：python, graph, charts

我没有很多编程（网络或其他）经验。所以从这个角度来看，我正在尝试解决一个自我强加的项目，我将在其中尝试一个非常基本、最小但很有吸引力（想想引导程序或氦气）的网站，您可以在其中输入宝宝的性别，年龄、体重、身长、头围等，然后会显示一个有吸引力的百分位数/z 分数图表/图表，用于显示您宝宝的 z 分数（我知道有一些网站可以做到这一点，但它们是可怕的、丑陋的，而且通常不要给你任何好看的图表/图表等）。

所以我正在考虑使用它作为一个项目来学习 python，因为存在这个基于 WHO 数据的 python z-score 计算器：http: [//pypi.python.org/pypi/pygrowup/0.7b0](http://pypi.python.org/pypi/pygrowup/0.7b0)

所以表单数据将传递给这个python脚本中的适当变量（我认为），然后，我需要一个图表/图形python库来生成我认为的图表？

也许是 Python 图形工具？ [http://projects.skewed.de/graph-tool/](http://projects.skewed.de/graph-tool/)

或者也许只是使用 highcharts (javascript)

任何关于此的想法都会非常有帮助.. 显然不是要求有人为我做这件事，只是可能提供一些关于如何开始等的指示，以及可能关于如何生成图表/图形等的一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:37:24.890

您可以使用 javascript / JQuery 在客户端完成所有这些操作。对于图表，我也会看 intp d3，它用 Javascript 制作漂亮的图表。在客户端做这件事比处理到 python 层的帖子要容易得多。但是，如果你想用 python 学习 web 开发，你可以使用像 Flask 这样的轻量级的东西。Flask 将使用 Jinja2 提供框架和模板，所有计算都将在客户端完成。那将是我的 2 美分。. .

[http://flask.pocoo.org/](http://flask.pocoo.org/)

[http://d3js.org/](http://d3js.org/)

# android - 在 Android 中的 Nutiteq 3D 中绘制路线

> ID：14505690
> 
> 赞同：1
> 
> 时间：2013-01-24T16:08:21.627
> 
> 标签：android, map, nutiteq

嗨，我正在开发一个基于地图的应用程序，我正在使用 Nutiteq 3D 库来实现 3D 视图。但是现在无法在该 3D 地图上的两点之间绘制路线。谁能帮我在 Nutiteq 3D 库开发的 3D 地图上的两点之间绘制路线？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:42:28.973

Nutiteq SDK 本身没有内置功能，但您可以使用外部工具和服务。

首先获得两点之间的最短路线。以下是一些建议的适合OpenStreetMap 数据的**在线服务：**

*   [MapQuest 开放 API](http://open.mapquestapi.com/directions/)

他们中的任何一个都需要创建 HTTP 请求并将响应解析为 Line for SDK

您还可以使用**离线路由**工具。[GraphHopper](http://graphhopper.com/)是正在开发中的免费路由工具，但已经很有前途。

然后**在地图上画线**。可以从[Nutiteq SDK wiki Vector Object 页面找到向地图添加线、点和多边形的一般说明](https://github.com/nutiteq/hellomap3d/wiki/Vectorobjects)

更新：现在有一些路由示例应用程序：[Nutiteq Wiki 页面中的在线和离线](https://github.com/nutiteq/hellomap3d/wiki/Common%20tasks#routing)

# sql-server - SQL Server 表 PK 和 FK

> ID：14505692
> 
> 赞同：2
> 
> 时间：2013-01-24T16:08:24.967
> 
> 标签：sql-server

我正在创建 2 个表之间的关系：

我喜欢形成的关系是 Inventory 和 InventoryExtended 表之间的关系。

Inventory 表的主键是 InvID（Inventory ID）。

我创建 InventoryExtended 的原因是因为 Inventory 表中只有 1% 的库存项目需要附加或扩展字段，其余的不需要。我决定创建一个 InventoryExtended 表并将 50 个字段存储在那里，而不是在 Inventory 表中添加这些额外的字段，其中 99% 将为我需要的 50 个额外字段为空白。

Inventory 和 InventoryExtended 表之间的关系将是 1 对 1。

这意味着，对于 Inventory 表中 1% 的记录，InvId 将与 InventoryExtended 表中的 InvId 相同。

我的问题是 InventoryExtended 表中的 InvID 应该是 FK（外键）还是应该是 PK 和 FK？

我认为它应该是 PK 和 FK，因为 InvID 在 InventoryExtended 表中将是唯一的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:09:44.793

你是对的。

`InvID` 应该是 a`PRIMARY KEY`和 a`FOREIGN KEY`因为它将在`InventoryExtended`表中是唯一的。

这种类型的关系确实是 1:1 或（更准确地说）`1::0..1`，因为只有`Inventory`表中的某些行会在`InventoryExtended`.

另请注意，即使拥有它，**也不**`InventoryExtended (InvID)`应该拥有该属性。**`IDENTITY``Inventory (InvID)`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:55:06.743

InvID 将是扩展表的 PK 和 FK。

如果您事先知道（意味着当您尝试获取数据时）特定库存类型是否将具有扩展数据，那么对于此类记录，您甚至可以完全跳过原始表并简单地使用两个不相交的表 smallInventory 和 bigInventory 这样没有一个的记录存在于另一个中。**

# php - 如何检查嵌套关联数组中是否已存在 2 个“组合”值

> ID：14505693
> 
> 赞同：1
> 
> 时间：2013-01-24T16:08:28.993
> 
> 标签：php

我有一个文本文件，我正在逐行读取和处理，我希望将结果变量（后处理）放入嵌套数组中，因此对于文本文件的每一行，都会在数组中创建一个新索引2 个值被放入嵌套关联数组中 - 到目前为止一切顺利。

```
$arr = file('file.txt') or die('ERROR: Cannot find file');
$add_data = array(array('opc'=>$outward_pc,'lkey'=>$lkey));
$i=0;

foreach ($arr as $line) {

    $outward_pc = trim(substr($line,0,4));
    $lkey = trim(substr($line,15,6));

    $add_data[$i]['opc'] = $outward_pc;
    $add_data[$i]['lkey'] = $lkey;

    $i++;
} 
```

但是，当我只想将这两个变量添加到嵌套数组中时，棘手的部分来了，如果它们的组合值是唯一的 ，**例如**，从下面的变量对中，我只想将 4 个新索引添加到数组中作为组合“AB10”和“000002”、“AB10”和“000004”以及“AB21”和“000003”都出现了不止一次

```
'AB10' and '000002'
'AB10' and '000002'
'AB10' and '000004'
'AB10' and '000004'
'AB21' and '000002'
'AB21' and '000003'
'AB21' and '000003' 
```

我认为因为我正在处理嵌套（和关联）数组，所以网络上的任何形式的文献都很难获得，特别是在如何正确编写 !in_array 函数方面。到目前为止，我很难想出任何接近正确语法的东西。我的（当然很穷）四处乱窜如下所示：

```
if (!in_array(array($outward_pc, $lkey), $add_data)) {

    $add_data[$i]['opc'] = $outward_pc;
    $add_data[$i]['lkey'] = $lkey;

} 
```

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:12:27.103

为什么不创建两个值的串联并将其用作`$add_data`数组中的键。这样重复值只会相互覆盖。

```
foreach ($arr as $line) {

    $outward_pc = trim(substr($line,0,4));
    $lkey = trim(substr($line,15,6));
    $key = $outward_pc . $lkey;

    $add_data[$key]['opc'] = $outward_pc;
    $add_data[$key]['lkey'] = $lkey;
} 
```

# jquery - Firebug 捕获事件，jQuery 没有？

> ID：14505703
> 
> 赞同：0
> 
> 时间：2013-01-24T16:09:01.550
> 
> 标签：jquery, firebug, jquery-events

这很奇怪。

在 Firebug 上，我选择此`<span>`元素并检查注册事件。点击给我这个：

```
mousedown clientX=550, clientY=591 » span
mouseup clientX=550, clientY=591 » span
click clientX=550, clientY=591 » span 
```

但这不会记录任何内容：

```
$('span').click(function() {
    console.log('click');
}); 
```

这也不是：

```
$('.parent-element').on('click', 'span', function() {
    console.log('click');
}); 
```

是什么赋予了？

编辑： span 元素是从 jQuery 插件动态创建的，呈现的是这样的：

```
<div class="col-r">
    <label class="chk-label-active" for="lbl-">Selecionar</label>
    <div class="customForm-unselectable chk-area chk-checked">
        <span></span>
    </div>
    <input id="lbl-" class="customForm-hidden" type="checkbox">
</div> 
```

我也尝试将`onClick`元素附加到`.chk-area`仍然没有运气

# javascript - 在 Android 下载上使用 FileTransfer API for Phonegap 失败

> ID：14505705
> 
> 赞同：0
> 
> 时间：2013-01-24T16:09:16.400
> 
> 标签：javascript, android, phonegap-plugins, file-transfer

我正在尝试用 Javascript 为我的 Phonegap 应用程序实现 FileTransfer API。当我使用下面的代码调用它时，出现以下错误：

```
01-24 00:36:10.495: I/Web Console(14802): Error: SyntaxError: Unexpected identifier at file:///android_asset/www/js/phonegap-1.3.0.js:670 
```

代码调用下载

```
var fileTransfer1 = new FileTransfer();

fileTransfer1.download(
    "http://www.domain.com/images/file.png",
    "/sdcard/file.png",
    function(entry) {
        alert("download complete: " + entry.fullPath);
    },
    function(error) {
        alert("upload error code" + error.code);
   }
); 
```

我的清单中有这个：

我的配置中有这个：

我的 libs 文件夹中有cordova-2.2.0.jar，phonegap-1.3.0.js 是一个包含的javascript。我在 phonegap-1.3.0.js 中做了一些调试，错误在提示调用中：

var r = prompt(JSON.stringify(args), "gap:"+JSON.stringify([service, action, callbackId, true]));

它正在返回“29 F08 FileTransfer() sJSON 错误”，这将传递给一个 eval 函数，该函数当然会失败。似乎我在某个地方的设置中遗漏了一些东西。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:08:30.053

如果您使用的是cordova-2.2.0.jar，则需要有cordova-2.2.0.js。他们需要匹配。并确保你有合适的安卓系统。

# linux - 在没有 ping 的情况下从命令行测试主机名是否存在

> ID：14505708
> 
> 赞同：4
> 
> 时间：2013-01-24T16:09:27.120
> 
> 标签：linux, bash, ip, host

我们有一个脚本需要对有限的主机列表采取行动。但是每次我们在 /etc/hosts 文件中添加或删除主机时，我们最终都必须更新这个脚本。

基本上，假设我的主机文件如下所示：

```
192.168.100.1     hostip_1
192.168.100.2     hostip_2
192.168.100.10    hostip_3
192.168.100.20    hostip_5 
```

我的脚本（bash）执行以下操作：

```
callmyfunction hostip_1
callmyfunction hostip_2
callmyfunction hostip_3
callmyfunction hostip_5 
```

如果我想将 hostip_4 添加到主机列表中，我现在必须进入并编辑我的脚本并将其添加到列表中。虽然这是一个小的编辑，但它仍然是一个可以在此过程中忘记的步骤（尤其是如果系统有新人加入）。

有没有办法可以测试“hostip_1”是否是系统中的有效主机名（无需 ping 主机或 grepping /etc/hosts 文件）？我们可能会使用多个主机文件，并且不同的配置可能有不同的文件名，所以我不能依赖尝试 grep 单个文件。我需要系统为我完成这项工作。

任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:33:00.773

首先，我关于不在 hosts 文件中的东西的说法是错误的。这正是他们所在的地方。我很愚蠢。

但答案是：

```
getent hosts 
```

这将使它打印出所有内容，我可以从那里进行查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:32:28.467

当您填充 /etc/hosts 文件时，我假设您没有使用 DNS。因此，以下解决方案不适合您的用例。但它仍然会给你一些指示。

在正常工作的 DNS 环境中，您可以使用以下命令检查主机名与其​​对应的 IP

```
# host host_name 
```

这将给出主机的 IP 地址。如果主机名不存在，则会给您相应的主机未找到消息。

您可以解析上述命令的输出，并可以推断是否存在给定的主机名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-08T12:46:28.507

可能不在您的 /etc/hosts 文件中...更好地搜索名称并查看是否可以找到 ip：

```
(($(dig +noall +answer google.de |wc -c)>0)) && echo exists 
```

这是 bash，几乎可以适应一切。

```
dig +noall +answer google.de 
```

如果找到则返回 ips。如果为空，则该名称不能在运行此代码的计算机中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:31:45.460

如果所有目标都在同一子网（同一网络）上，请使用`arping`，它将使用[ARP](http://en.wikipedia.org/wiki/ARP "ARP")检查主机是否可用。

# c# - 另一个子类的子类可以从c#中的基类继承方法吗

> ID：14505709
> 
> 赞同：3
> 
> 时间：2013-01-24T16:09:30.033
> 
> 标签：c#

说 A 类是基类，然后你有 A 的 B 类子类（B 类：A）。然后你有C类：B。

问题是如果您在 A 类中有一个方法，C 类可以使用该方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:10:24.450

是的，你可以，如果它被声明`public`或`protected`. 但不是`private`。

感谢@DavidL .. 我忘了提到`internal`.

来自 Visual Studio 附带的 C# 手册（此处为 2012 版）::

*   • 继承是可传递的。如果 C 派生自 B，B 派生自 A，则 C 继承 B 中声明的成员以及 A 中声明的成员。 • 派生类扩展其直接基类。派生类可以向其继承的成员添加新成员，但不能删除继承成员的定义。• 实例构造函数、析构函数和静态构造函数不是继承的，但所有其他成员都是继承的，无论它们声明的可访问性如何（第 3.5 节）。但是，根据它们声明的可访问性，继承的成员可能无法在派生类中访问。• 派生类可以通过声明具有相同名称或签名的新成员来隐藏（第 3.7.1.2 节）继承的成员。但是请注意，隐藏继承的成员并不会删除该成员 - 它只会使该成员无法直接通过派生类访问。• 类的实例包含在类及其基类中声明的所有实例字段的集合，并且存在从派生类类型到其任何基类类型的隐式转换（第 6.1.6 节）。因此，对某个派生类的实例的引用可以被视为对其任何基类的实例的引用。• 类可以声明虚拟方法、属性和索引器，派生类可以覆盖这些函数成员的实现。这使类能够表现出多态行为，其中由函数成员调用执行的操作取决于调用该函数成员的实例的运行时类型。

如果我是对的，这也是 C# 5.0 中的一个新隐藏功能：

嵌套类型可以隐藏（第 3.7.1 节）基成员。嵌套类型声明中允许使用 new 修饰符，以便可以显式表达隐藏。这个例子

```
using System;

class Base
{
    public static void M() {
        Console.WriteLine("Base.M");
    }
}
class Derived: Base 
{
    new public class M 
    {
        public static void F() {
            Console.WriteLine("Derived.M.F");
        }
    }
}
class Test 
{
    static void Main() {
        Derived.M.F();
    }
} 
```

显示了一个嵌套类 M，它隐藏了 Base 中定义的方法 M。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:10:51.730

这取决于。

*   当 A 类中的方法是私有的时：否
*   当A类中的方法被保护时：是
*   当 A 类中的方法是 public 时：是
*   当 A 类中的方法是公共的或受保护的虚拟方法时，C 类可以覆盖该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:10:38.620

是的，当你从一个类继承时，你会得到它的所有方法，包括它从其他人那里继承的所有方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:15:36.740

```
public class A
{
    public int Id { get; set; }
    protected int protectedId { get; set; }
    private int privateId;
}

public class B : A
{
}

public class C : B
{
    public C()
    {
        int temp = Id; // works
        int temp1 = protectedId; // works
        int temp2 = privateId; // does NOT work
    }
} 
```

和其他班级；

```
public void SomeMethod()
{
    C c = new C();
    int i = c.Id; // works
    int j = c.protectedId; // does NOT work
    int k = c.privateId; // does NOT work
} 
```

# javascript - 使用 derby.js 的推荐理由是什么

> ID：14505710
> 
> 赞同：0
> 
> 时间：2013-01-24T16:09:31.003
> 
> 标签：javascript, node.js, derbyjs

我试图弄清楚如何安装和使用 derby.js。我已经安装了 node.js 版本：0.8.17 我已经从 github 克隆了 derby，并安装了，版本：0.3.13 我已经安装了 derby-examples，也是 0.3.13 版本

这些示例并没有真正起作用..页面呈现但没有动态发生。

我究竟做错了什么？与德比合作的正确原因是什么？我应该使用 npm 提供的软件包进行安装，还是需要使用 github？

我不能让它工作......快疯了

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T07:16:44.070

从 0.5 版开始，您可以只使用 npm 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:48:19.247

我希望这可以帮助别人：

找到这个 wiki 页面后，我设法解决了我的问题： [https ://github.com/codeparty/derby/wiki/Using-Derby-%22Edge%22](https://github.com/codeparty/derby/wiki/Using-Derby-%22Edge%22)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T08:29:48.077

[在遇到https://github.com/derbyparty/generator-derby](https://github.com/derbyparty/generator-derby)之前，我也遇到了麻烦

尝试在关闭所有高级选项的情况下运行它，它为新的 Derby 项目提供了一个很好的工作起点。但是没有动态行为，您需要自己添加。我发现一个很好的起点是根据此多人记事本视频[https://www.youtube.com/watch?v=V0DOGXmaT3g中解释的步骤修改应用程序](https://www.youtube.com/watch?v=V0DOGXmaT3g)

# r - 使用时间戳进行范围选择

> ID：14505713
> 
> 赞同：0
> 
> 时间：2013-01-24T16:09:38.740
> 
> 标签：r, timestamp, dataframe

您好，我有按以下示例组织的数据框。我有一个时间戳、一个分组变量和几个带有每个时间戳的数值的变量。

```
# dput of subset of data
structure(list(TIMESTAMP = structure(1:15, .Label = c("1/1/2012 11:00", 
"1/1/2012 12:00", "1/1/2012 13:00", "1/1/2012 14:00", "1/1/2012 15:00", 
"1/2/2012 11:00", "1/2/2012 12:00", "1/2/2012 13:00", "1/2/2012 14:00", 
"1/2/2012 15:00", "4/7/2012 11:00", "4/7/2012 12:00", "4/7/2012 13:00", 
"4/7/2012 14:00", "4/7/2012 15:00"), class = "factor"), P = c(992.4, 
992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 
239, 239, 239, 239, 239), WS = c(4.023, 3.576, 4.023, 6.259, 
4.47, 3.576, 3.576, 2.682, 4.023, 3.576, 2.682, 3.129, 2.682, 
2.235, 2.682), WD = c(212L, 200L, 215L, 213L, 204L, 304L, 276L, 
273L, 307L, 270L, 54L, 24L, 304L, 320L, 321L), AT = c(16.11, 
18.89, 20, 20, 19.44, 10.56, 11.11, 11.67, 12.22, 11.11, 17.22, 
18.33, 19.44, 20.56, 21.11), FT = c(17.22, 22.22, 22.78, 22.78, 
20, 11.11, 15.56, 17.22, 17.78, 15.56, 24.44, 25.56, 29.44, 30.56, 
29.44), H = c(50L, 38L, 38L, 39L, 48L, 24L, 19L, 18L, 16L, 18L, 
23L, 20L, 18L, 17L, 15L), B = c(1029L, 1027L, 1026L, 1024L, 1023L, 
1026L, 1025L, 1024L, 1023L, 1023L, 1034L, 1033L, 1032L, 1031L, 
1030L), FM = c(14.9, 14.4, 14, 13.7, 13.6, 13.1, 12.8, 12.3, 
12, 11.7, 12.8, 12, 11.4, 10.9, 10.4), GD = c(204L, 220L, 227L, 
222L, 216L, 338L, 311L, 326L, 310L, 273L, 62L, 13L, 312L, 272L, 
281L), MG = c(8.047, 9.835, 10.28, 13.41, 11.18, 9.388, 8.941, 
8.494, 9.835, 10.73, 6.706, 7.153, 8.047, 8.047, 7.6), SR = c(522L, 
603L, 604L, 526L, 248L, 569L, 653L, 671L, 616L, 487L, 972L, 1053L, 
1061L, 1002L, 865L), WS2 = c(2.235, 3.576, 4.47, 4.47, 5.364, 
4.023, 2.682, 3.576, 3.576, 4.023, 3.129, 3.129, 3.576, 2.682, 
3.129), WD2 = c(200L, 201L, 206L, 210L, 211L, 319L, 315L, 311L, 
302L, 290L, 49L, 39L, 15L, 348L, 329L)), .Names = c("TIMESTAMP", 
"P", "WS", "WD", "AT", "FT", "H", "B", "FM", "GD", "MG", "SR", 
"WS2", "WD2"), class = "data.frame", row.names = c(NA, -15L)) 
```

我正在尝试找出处理时间戳以供将来操作的最佳方法。我已经阅读过`lubridate`（例如[这里](https://stackoverflow.com/questions/12891232/exclude-specific-time-periods-in-r)）`zoo`和`POSIXt`. 但是，我觉得可能存在一些我不知道的 r/timestamp*技巧*，这会使使用时间戳更容易（即我可能不完全理解时间戳）。

最终，我想做一些事情来创建一个新的数据框，该数据框由某个日期或时间范围内所有这些值的平均值组成。例如，每天 12:00 到 16:00 之间每个变量的平均值。

这三个软件包中的一个是否比另一个更适合执行此类任务？你能给我指出一个可以做我上面写的平均的例子或解决方案吗？或者，这些更适合计算*时间*（例如，某事之间的小时数、天数等​​ [例如到达和离开]）还是可以用于处理其他数据帧任务的时间戳（例如*平均*）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:45:34.407

我正在使用提供的示例数据更新答案。在这篇文章的末尾，旧答案仍然保持不变。

首先，您需要将数据框转换为 xts 对象。

```
> data.xts <- as.xts(df[,2:14], as.POSIXct(strptime(df[,1], '%m/%d/%Y %H:%S')))
> data.xts
                        P    WS  WD    AT    FT  H    B   FM  GD     MG   SR   WS2 WD2
2012-01-01 11:00:00 992.4 4.023 212 16.11 17.22 50 1029 14.9 204  8.047  522 2.235 200
2012-01-01 12:00:00 992.4 3.576 200 18.89 22.22 38 1027 14.4 220  9.835  603 3.576 201
2012-01-01 13:00:00 992.4 4.023 215 20.00 22.78 38 1026 14.0 227 10.280  604 4.470 206
2012-01-01 14:00:00 992.4 6.259 213 20.00 22.78 39 1024 13.7 222 13.410  526 4.470 210
2012-01-01 15:00:00 992.4 4.470 204 19.44 20.00 48 1023 13.6 216 11.180  248 5.364 211
2012-01-02 11:00:00 992.4 3.576 304 10.56 11.11 24 1026 13.1 338  9.388  569 4.023 319
2012-01-02 12:00:00 992.4 3.576 276 11.11 15.56 19 1025 12.8 311  8.941  653 2.682 315
2012-01-02 13:00:00 992.4 2.682 273 11.67 17.22 18 1024 12.3 326  8.494  671 3.576 311
2012-01-02 14:00:00 992.4 4.023 307 12.22 17.78 16 1023 12.0 310  9.835  616 3.576 302
2012-01-02 15:00:00 992.4 3.576 270 11.11 15.56 18 1023 11.7 273 10.730  487 4.023 290
2012-04-07 11:00:00 239.0 2.682  54 17.22 24.44 23 1034 12.8  62  6.706  972 3.129  49
2012-04-07 12:00:00 239.0 3.129  24 18.33 25.56 20 1033 12.0  13  7.153 1053 3.129  39
2012-04-07 13:00:00 239.0 2.682 304 19.44 29.44 18 1032 11.4 312  8.047 1061 3.576  15
2012-04-07 14:00:00 239.0 2.235 320 20.56 30.56 17 1031 10.9 272  8.047 1002 2.682 348
2012-04-07 15:00:00 239.0 2.682 321 21.11 29.44 15 1030 10.4 281  7.600  865 3.129 329
> data.xts['T12:00:00/T16:00:00']
                        P    WS  WD    AT    FT  H    B   FM  GD     MG   SR   WS2 WD2
2012-01-01 12:00:00 992.4 3.576 200 18.89 22.22 38 1027 14.4 220  9.835  603 3.576 201
2012-01-01 13:00:00 992.4 4.023 215 20.00 22.78 38 1026 14.0 227 10.280  604 4.470 206
2012-01-01 14:00:00 992.4 6.259 213 20.00 22.78 39 1024 13.7 222 13.410  526 4.470 210
2012-01-01 15:00:00 992.4 4.470 204 19.44 20.00 48 1023 13.6 216 11.180  248 5.364 211
2012-01-02 12:00:00 992.4 3.576 276 11.11 15.56 19 1025 12.8 311  8.941  653 2.682 315
2012-01-02 13:00:00 992.4 2.682 273 11.67 17.22 18 1024 12.3 326  8.494  671 3.576 311
2012-01-02 14:00:00 992.4 4.023 307 12.22 17.78 16 1023 12.0 310  9.835  616 3.576 302
2012-01-02 15:00:00 992.4 3.576 270 11.11 15.56 18 1023 11.7 273 10.730  487 4.023 290
2012-04-07 12:00:00 239.0 3.129  24 18.33 25.56 20 1033 12.0  13  7.153 1053 3.129  39
2012-04-07 13:00:00 239.0 2.682 304 19.44 29.44 18 1032 11.4 312  8.047 1061 3.576  15
2012-04-07 14:00:00 239.0 2.235 320 20.56 30.56 17 1031 10.9 272  8.047 1002 2.682 348
2012-04-07 15:00:00 239.0 2.682 321 21.11 29.44 15 1030 10.4 281  7.600  865 3.129 329 
```

现在您可以`period.apply`按照下面的旧答案所示使用。

### 旧答案

为此，您可以考虑使用“xts”包。

我将按照您的要求为您提供简短的示例。

假设您有如下 xts 格式的时间序列

```
> head(EURUSD);tail(EURUSD)
                       Open    High     Low   Close
2009-05-01 00:10:00 1.32436 1.32600 1.32436 1.32587
2009-05-01 00:20:00 1.32589 1.32597 1.32430 1.32431
2009-05-01 00:30:00 1.32441 1.32543 1.32432 1.32479
2009-05-01 00:40:00 1.32484 1.32554 1.32482 1.32543
2009-05-01 00:50:00 1.32551 1.32610 1.32532 1.32538
2009-05-01 01:00:00 1.32538 1.32618 1.32462 1.32462
                       Open    High     Low   Close
2009-05-31 23:10:00 1.41175 1.41281 1.41129 1.41262
2009-05-31 23:20:00 1.41258 1.41259 1.41205 1.41215
2009-05-31 23:30:00 1.41206 1.41210 1.41128 1.41132
2009-05-31 23:40:00 1.41132 1.41147 1.41062 1.41093
2009-05-31 23:50:00 1.41102 1.41102 1.41032 1.41077
2009-06-01 00:00:00 1.41077 1.41099 1.41002 1.41052 
```

然后您可以按时间索引过滤数据，如下所示

```
> EURUSDfiltered <- EURUSD['T12:00:00/T16:00:00']

> tail(EURUSDfiltered,60)
                       Open    High     Low   Close
2009-05-27 14:30:00 1.39063 1.39121 1.38873 1.39094
2009-05-27 14:40:00 1.39098 1.39120 1.38863 1.39075
2009-05-27 14:50:00 1.39079 1.39107 1.38935 1.39020
2009-05-27 15:00:00 1.39016 1.39343 1.38986 1.39286
2009-05-27 15:10:00 1.39286 1.39293 1.38711 1.38898
2009-05-27 15:20:00 1.38898 1.38961 1.38744 1.38824
2009-05-27 15:30:00 1.38824 1.39157 1.38814 1.39148
2009-05-27 15:40:00 1.39145 1.39281 1.39064 1.39248
2009-05-27 15:50:00 1.39245 1.39276 1.39123 1.39143
2009-05-27 16:00:00 1.39145 1.39251 1.39140 1.39231
2009-05-28 12:00:00 1.38708 1.38715 1.38524 1.38565
2009-05-28 12:10:00 1.38563 1.38633 1.38540 1.38594
2009-05-28 12:20:00 1.38596 1.38750 1.38528 1.38691
2009-05-28 12:30:00 1.38691 1.38754 1.38646 1.38710
2009-05-28 12:40:00 1.38721 1.38976 1.38668 1.38910
2009-05-28 12:50:00 1.38913 1.38962 1.38761 1.38775
2009-05-28 13:00:00 1.38777 1.38811 1.38629 1.38680
....
2009-05-28 15:30:00 1.39660 1.39691 1.39584 1.39643
2009-05-28 15:40:00 1.39646 1.39802 1.39616 1.39643
2009-05-28 15:50:00 1.39643 1.39704 1.39574 1.39668
2009-05-28 16:00:00 1.39666 1.39684 1.39423 1.39467
2009-05-29 12:00:00 1.41076 1.41076 1.40890 1.40967
2009-05-29 12:10:00 1.40965 1.41010 1.40870 1.40874
2009-05-29 12:20:00 1.40874 1.41062 1.40870 1.41010
2009-05-29 12:30:00 1.41008 1.41013 1.40844 1.40940
2009-05-29 12:40:00 1.40933 1.41140 1.40886 1.40985
2009-05-29 12:50:00 1.40985 1.41075 1.40887 1.41073
.... 
```

过滤数据后，您可以使用以下方法计算某些聚合`preiod.apply`函数`endpoints`

```
> ep <- endpoints(EURUSDfiltered, on='days')
> aggValues <- period.apply(EURUSDfiltered, INDEX=ep, FUN=mean)
> aggValues
                        Open     High      Low    Close
2009-05-01 16:00:00 1.326569 1.327338 1.325839 1.326445
2009-05-04 16:00:00 1.329267 1.330415 1.328654 1.329759
2009-05-05 16:00:00 1.338648 1.339428 1.337636 1.338623
2009-05-06 16:00:00 1.331870 1.332957 1.330978 1.331909
2009-05-07 16:00:00 1.339542 1.341126 1.337957 1.339760
2009-05-08 16:00:00 1.347692 1.348982 1.346786 1.347995
2009-05-11 16:00:00 1.359852 1.360683 1.359177 1.359987
2009-05-12 16:00:00 1.365657 1.366473 1.364534 1.365473
2009-05-13 16:00:00 1.360978 1.361865 1.359939 1.360888
2009-05-14 16:00:00 1.358187 1.359207 1.357512 1.358386
2009-05-15 16:00:00 1.356786 1.357672 1.355668 1.356690
2009-05-18 16:00:00 1.349660 1.350412 1.349085 1.349679
2009-05-19 16:00:00 1.360091 1.360750 1.359121 1.360065
2009-05-20 16:00:00 1.373703 1.374888 1.373062 1.373990
2009-05-22 16:00:00 1.399224 1.400354 1.398262 1.399429
2009-05-25 16:00:00 1.399991 1.400309 1.399607 1.399976
2009-05-26 16:00:00 1.393970 1.395064 1.393425 1.394333
2009-05-27 16:00:00 1.392505 1.393589 1.391215 1.392552
2009-05-28 16:00:00 1.391658 1.392870 1.390735 1.391952
2009-05-29 16:00:00 1.411398 1.412516 1.410404 1.411468 
```

更新：回应下面的评论

进一步研究`?.subset.xts`表明，`When a raw character vector is used for the i subset argument, it is processed as if it was ISO-8601 compliant.` http [://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)提到`T`前缀用于指定时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:06:51.103

我认为可能对您最有帮助的过程是将 [TIMESTAMP] 数据变异为分组变量。然后，我建议使用众多数据汇总包之一来创建报告。我个人的偏好是对这两个任务都使用“plyr”包，我在这个例子中使用了它。

**第 1 步**：使用“as.POSIXct”函数将时间戳数据转换为 POSIX 日期时间，以便与各种日期时间函数一起使用。不使用任何参数，无需任何调整即可简单地转换数据。

```
data$TIMESTAMP <- as.POSIXct(data$TIMESTAMP) 
```

**更新**：由于时间不是明确的降序格式（即 YYYY/MM/DD HH:MM:SS），'as.POSIXct' 函数将无法快速转换数据. 仅当您使用明确的格式时才使用“as.POSIXct”。对于其他安排，使用“strptime”函数，指定当前格式，如下所示：

```
data$TIMESTAMP <- strptime(data$TIMESTAMP, "%m/%d/%Y %H:%M") 
```

这告诉 'strptime' 函数当前正在使用什么格式，并导出与 POSIX 兼容的日期时间。除非您当前的数据不是字符串，否则不需要使用“as.character”函数。

**第 2 步**：使用“plyr”函数“ddply”（获取数据帧并返回数据帧）创建一个用于分组的新变量。使用“格式”函数从 TIMESTAMP 值中提取所需的数据。查看可用格式的“格式”文档。在这种情况下，以下是创建 [MONTH] 变量的方法：

```
library(plyr)
data <- ddply(data, .(TIMESTAMP), mutate, MONTH=format(TIMESTAMP, "%m") 
```

**第 3 步**：使用“plyr”函数“ddply”按新变量汇总数据。

```
ddply(data, .(MONTH), summarize, V1_AVG=mean(V2), V2_AVG=mean(V2)) 
```

如果您还想通过第二个变量（如 [GROUP]）进行汇总，只需将其包含在第二个函数变量中，如下所示：

```
ddply(data, .(MONTH, GROUP), summarize, V1_AVG=mean(V2), V2_AVG=mean(V2)) 
```

从技术上讲，你可以在一个声明中做到这一切，但经验告诉我要谨慎。我建议自己做每一步，以确保没有任何事情搞砸。

只要您的时间戳已转换为 POSIX 日期时间，您就可以通过像这样摆弄来解析您的数据。'plyr' 包对于这样的东西非常灵活。

**更新**：根据 OP 的要求，我包括您将如何进行相同的计算，但仅使用 12p 和 4p 之间的数据。您实际上不必像这样使用任何特定的包来对您的数据进行子集化，因为它是一个直接的数据过滤器。只需更改输入到“ddply”函数中的数据集，如下所示：

```
# Use one of the following lines, which both do the same thing.
# I'm just including both as different examples of logic that can be used.
data_Subset <- data[format(data$TIMESTAMP, "%H") >= 12 & format(data$TIMESTAMP, "%H") < 16,]
data_Subset <- data[format(data$TIMESTAMP, "%H") %in% 12:15,]

# Then summarize using the new data frame as an input
ddply(data_Subset, .(MONTH, GROUP), summarize, V1_AVG=mean(V2), V2_AVG=mean(V2)) 
```

在这里，我们过滤数据框以仅显示小时 (%H) 等于 12 到 15 的行（包含所有列）。这实际上包括从 12:00 到 15:59 的所有时间。如果您开始进入非常大的数据集，您可能需要寻找其他解决方案（例如“data.table”包），但除此之外，这是您最快的选择。

同样，这仅适用，因为我们已将日期时间转换为与 POSIX 兼容的日期时间。

# jquery - 简单的 jQuery（scrollTo 和动画）在 IE 中不起作用

> ID：14505714
> 
> 赞同：5
> 
> 时间：2013-01-24T16:09:39.037
> 
> 标签：jquery, internet-explorer-9, scrollto

我刚刚注意到一些简单的 jQuery 不适用于移动版 IE9 和 IE10。我有一些版权链接和使用`animate()`. 我也将 scrollTo 插件与 jQuery 结合使用。我尝试了不同的版本，仍然没有解决方案。也许我错过了一些明显的东西。

这是一个版权链接和打开和关闭联系表的代码。

```
$('#privacy').click(function(){
    $('#copyright').hide('fast');
    $('#policy').toggle('slow');
    $.scrollTo('+=800px', 800, { axis:'y' });
        });

$('#plusSign').click(function(){
    if ($('#contactFormHolder').hasClass('active')){
        $('#contactFormHolder').animate({top:'-200px'},1000).removeClass('active');
    }else{$('#contactFormHolder').animate({top:'0px'},1000).addClass('active');}

}); 
```

您可以在[http://www.crazysunsets.com上实时查看](http://www.crazysunsets.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:34:40.257

您的标记无效，特别是脚本标记格式：

改变：

```
<script type="text/javascript "> 
```

到：

```
<script type="text/javascript"> 
```

删除“javascript”后的空格

干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-10T09:31:35.243

转到底部路径：
工具菜单=>互联网选项=>高级选项卡=>在设置列表中=>在浏览组中

取消选中“禁用脚本调试（ie）”和“禁用脚本调试（其他）”选项（复选框）。现在刷新页面。即为您发送错误行和错误名称！

# python - 在 scikit-learn 中实现 K 邻居分类器，每个对象有 3 个特征

> ID：14505716
> 
> 赞同：6
> 
> 时间：2013-01-24T16:09:45.890
> 
> 标签：python, machine-learning, scikit-learn, nearest-neighbor, classification

我想用 scikit-learn 模块（[http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html](http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html)）实现一个 KNeighborsClassifier

我从图像的稳固性、伸长率和 Humoments 特征中检索。我如何准备这些数据以进行训练和验证？我必须为我从图像中检索到的每个对象创建一个包含 3 个特征 [Hm, e, s] 的列表（从 1 个图像有更多对象）？

我读了这个例子（[http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html](http://scikit-learn.org/dev/modules/generated/sklearn.neighbors.KNeighborsClassifier.html)）：

```
X = [[0], [1], [2], [3]]
y = [0, 0, 1, 1]
from sklearn.neighbors import KNeighborsClassifier
neigh = KNeighborsClassifier(n_neighbors=3)
neigh.fit(X, y) 

print(neigh.predict([[1.1]]))
print(neigh.predict_proba([[0.9]])) 
```

X 和 y 是 2 个特征？

```
samples = [[0., 0., 0.], [0., .5, 0.], [1., 1., .5]]
from sklearn.neighbors import NearestNeighbors
neigh = NearestNeighbors(n_neighbors=1)
neigh.fit(samples) 

print(neigh.kneighbors([1., 1., 1.])) 
```

为什么在第一个示例中使用 X 和 y 现在采样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T21:41:05.457

### 您的第一段代码定义了`1d`数据分类器。

`X`表示特征向量。

```
[0] is the feature vector of the first data example
[1] is the feature vector of the second data example
....
[[0],[1],[2],[3]] is a list of all data examples, 
  each example has only 1 feature. 
```

`y`代表标签。

下图显示了这个想法：

![在此处输入图像描述](../Images/4fdd78ff6ac2fa28517f5c795663cf96.png)

*   绿色节点是标签为 0 的数据
*   红色节点是标签为 1 的数据
*   灰色节点是带有未知标签的数据。

```
    打印（neigh.predict（[[1.1]]））

```

这是要求分类器预测 的标签`x=1.1`。

```
 print(neigh.predict_proba([[0.9]])) 
```

这是要求分类器为每个标签提供成员概率估计。

由于两个灰色节点都更靠近绿色，因此下面的输出是有意义的。

```
 [0] # green label
    [[ 0.66666667  0.33333333]]  # green label has greater probability 
```

### 第二段代码实际上有很好的说明`scikit-learn`：

> 在下面的示例中，我们从表示我们的数据集的数组构造一个 NeighborsClassifier 类，并询问谁是最接近 [1,1,1] 的点

```
>>> 样本 = [[0., 0., 0.], [0., .5, 0.], [1., 1., .5]]
>>> 从 sklearn.neighbors 导入 NearestNeighbors
>>> neigh = NearestNeighbors(n_neighbors=1)
>>> neigh.fit（样本）
NearestNeighbors（算法='auto'，leaf_size=30，...）
>>> print(neigh.kneighbors([1., 1., 1.]))
（数组（[[ 0.5]]），数组（[[2]]...））

```

这里没有目标值，因为这只是一个`NearestNeighbors`类，它不是分类器，因此不需要标签。

### 对于您自己的问题：

既然你需要一个分类器，你应该求助于`KNeighborsClassifier`如果你想使用`KNN`方法。您可能希望构建特征向量`X`和标签`y`，如下所示：

```
X = [ [h1, e1, s1], 
      [h2, e2, s2],
      ...
    ]
y = [label1, label2, ..., ] 
```

# linq - LINQ：可空对象必须有一个值。

> ID：14505719
> 
> 赞同：0
> 
> 时间：2013-01-24T16:09:56.370
> 
> 标签：linq, sharepoint

让我先说我是 LINQ 的新手，这是我最初没有编写但正在尝试修复的代码。我对这个错误做了很多研究，但我还没有发现任何有用的东西。事实上，这个错误有点让我头晕目眩。反正...

我有一个 LINQ 查询，它从三个 SharePoint 列表中选择一些数据。这里是：

```
 private void loadPEGrid(int id)
    {
        dc = new SpEntityDataContext(SPContext.GetContext(this.Context).Web.Url);

        EntityList<ProductDocumentMapItem> dMaps = dc.GetList<ProductDocumentMapItem>("Product Document Map");

        object mappedItems = null;

        mappedItems = from m in dMaps
                      join p in dc.PEProducts on m.ProductID.Value equals p.Id.Value
                      join d in dc.ProductDocuments on m.DocID.Value equals d.Id.Value
                      where m.ProductID.Value == id && m.ProductType == "PE"
                      select new { 
                          p.Grade, 
                          d.Path, 
                          d.DocumentType, 
                          d.Title, 
                          d.Name, 
                          Language = d.Language.Title, 
                          m.Id, 
                          DocId = m.DocID };

        GridViewProducts.KeyFieldName = "Id";
        GridViewProducts.DataSource = mappedItems;
        GridViewProducts.DataBind();
    } 
```

以下字段可以为空：

*   m.ProductID
*   m.DocID
*   d.DocumentType
*   中

当我调试时，这些都不会引发错误，但是当页面加载时它会： System.InvalidOperationException: Nullable object must have a value

这是否意味着我选择的字段之一为空，或者连接字段之一？查了资料，我觉得不是这样的。如果您需要我提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:18:51.447

> > System.InvalidOperationException：可空对象必须有一个值

当您尝试获取可为空类型的[Value属性时，将引发此异常。](http://msdn.microsoft.com/en-us/library/ydkbatt6.aspx)因此，这意味着以下一项或多项是正确的：

*   中的至少一个对象的`dMaps`属性`ProductID`等于 null
*   中的至少一个对象的`dMaps`属性`DocID`等于 null
*   中的至少一个对象的`dc.PEProducts`属性`Id`等于 null
*   中的至少一个对象的`dc.ProductDocuments`属性`Id`等于 null
*   不是由查询引发的异常

# intellij-idea - IntelliJ IDEA 12中的汉字重叠

> ID：14505720
> 
> 赞同：1
> 
> 时间：2013-01-24T16:09:56.590
> 
> 标签：intellij-idea

我使用 IntelliJ IDEA 开发我的 Android 项目。我今天在编辑字符串 XML 资源文件时遇到了这个问题。汉字确实显示，但只是一一重叠。所以基本上你看到的只是一堆在单个字符空间填充和重叠的汉字。有趣的是，当您尝试删除这些汉字时，您只是删除了以下 XML 结束标记，而不是汉字本身……

尝试复制/粘贴，结果相同。我使用的是 Windows 32 位版本。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:44:02.890

请[检查此问题](http://youtrack.jetbrains.com/issue/IDEA-97665)和问题背景的链接问题。

现在，当 IDEA 找不到要在您设置的当前编辑器字体中显示的字形时`File`| `Settings`| `Editor`| `Colors & Fonts`, `Font`，它开始搜索具有此字形的第一个字体，并找到一些显示重叠字形的度量不正确的字体。

实现此请求后，您将能够指定回退字体的顺序，以便首先尝试一些正常工作的字体。

目前解决方案是将编辑器字体更改为具有所有必需字形和正确字体规格的字体（或查找并卸载首先尝试但显示不正确的字体，请注意，在 JDK 1.7 IDEA 下运行时会还可以尝试 .otf 字体，而不仅仅是 .ttf，这就是为什么在默认为 JDK 1.6 的 IDEA 11 和在 JDK 1.7 下运行的 IDEA 12 中行为不同的原因。

# macos - ATSFontGetFileReference 失败：错误 - Mac OS X 和 R

> ID：14505724
> 
> 赞同：1
> 
> 时间：2013-01-24T16:10:06.990
> 
> 标签：macos, r, fonts, osx-mountain-lion

我最近在运行 Mountain Lion 的新 Macbook Pro 上安装了 R。尝试绘制数据时，我收到大量 ATSFontGetFileReference 错误，并且文本不呈现（尽管图表元素可以）：

```
> plot(study$outcome, study$predictor)
Jan 21 10:55:57 tatou.local R[35029] <Error>: ATSFontGetFileReference failed: error -50.
Jan 21 10:55:57 tatou.local R[35029] <Error>: ATSFontGetFileReference failed: error -50.
Jan 21 10:55:57 tatou.local R[35029] <Error>: ATSFontGetFileReference failed: error -50.
Jan 21 10:55:57 tatou.local R[35029] <Error>: ATSFontGetFileReference failed: error -50.
... 
```

它似乎更像是一个 OS X 问题而不是 R，因为一点谷歌搜索已经为 PDF 渲染器等发现了类似的错误。但我似乎找不到解决方案......

我的所有字体以及 R 似乎都已安装以供在系统范围内使用。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T18:07:12.243

我在 OSX 10.7.5 上使用 RStudio 时遇到了同样的错误。我保存了我的工作区，然后退出了 RStudio。在打开它并加载我保存的工作区后，我运行了 plot(x,y) 命令，不再出现错误，文本按预期显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T00:28:36.077

我不完全了解您的字体情况，但我刚刚解决了我的这个问题。我有一台 mac，并且 helvetica 会自动安装为 .dfont 文件。我已经下载了一个 helvetica.ttf 文件并将其放在“mac_hd/libary/fonts”中。一旦我删除它并重新启动 RI 就没有问题了。我的错误是逐字的'ATSFontGetPostScriptName failed: error -984。'（我把它包括在内是为了帮助谷歌搜索结果）

# .net - Silverlight 开发工具是否依赖于 .NET 运行时？

> ID：14505728
> 
> 赞同：0
> 
> 时间：2013-01-24T16:10:12.550
> 
> 标签：.net, silverlight

如果我的机器上从未安装过 .NET - 我是否能够仅使用 Silverlight 开发工具来开发 Silverlight 应用程序？

换句话说，Silverlight 开发工具是否依赖于 .NET？

如果是 - 我在哪里可以找到有关每个 Silverlight 版本所依赖的 .NET 版本的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:46:30.153

`Silverlight CLR`是独立的运行时，独立于`.NET CLR`. 换句话说，您可以`Sl`在`SL CLR`没有`.NET`. 理论上，您可以在没有 .XAP 程序集的情况下开发 Silverlight .XAP 程序集`.NET`，但同样需要为它开发托管应用程序（简单`ASP.NET`项目），需要`.NET`.

# c# - 关于提高使用 Selenium Webdriver 迭代表行的方法速度的建议

> ID：14505729
> 
> 赞同：2
> 
> 时间：2013-01-24T16:10:13.273
> 
> 标签：c#, webdriver, selenium-webdriver

我正在使用 Selenium Webdriver 迭代表的行并为每一行创建类 T 的实例，根据行中的数据设置对象的属性：

```
public override void RefreshElements()
{
    base.RefreshElements();

    var browseTableRows = Driver.FindElements(By.CssSelector("table.browse>tbody>tr"));
    ItemsList = new List<T>(browseTableRows.Count);
    ItemsById = new Dictionary<int, T>(browseTableRows.Count);

    foreach (var tr in browseTableRows) {
        T item = new T() {
            ID = int.Parse(tr.FindElement(By.XPath("td[2]")).Text),
            Name = tr.FindElement(By.XPath("td[3]")).Text,
            Description = tr.FindElement(By.XPath("td[4]")).Text
        };
        ItemsList.Add(item);
        ItemsById.Add(item.ID, item);
    }
} 
```

这段代码很慢。关于如何加快此代码的任何建议？

为了清楚起见，T 类没有做任何详细说明：

```
public class T
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

如果有用，我使用的是 Selenium 的 2.29.1 版本，.NET 4.0，并且我正在运行 Internet Explorer 驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:36:34.847

我想到了两件事。首先，您正在调用`FindElement()`行中的每个单元格。您最好调用`row.FindElements(By.TagName("td"))`并索引到它返回的集合。

此外，获取元素的文本是 WebDriver 中最昂贵的操作之一，因为由于 CSS 样式，驱动程序必须遍历 DOM（向上和向下）以确定父节点和子节点的可见性。如果您确定表格单元格中没有需要注意的样式，则可以使用 JavaScript 调用来获取元素的内部文本，它不关心样式。

最后，像您在此处所做的那样遍历整个表将比仅按需从页面获取所需信息的效率低得多。我会重新检查我的方法，因此它不依赖于一次遍历整个表。

# c# - 停靠的图像不会填充

> ID：14505731
> 
> 赞同：0
> 
> 时间：2013-01-24T16:10:24.487
> 
> 标签：c#, windows, visual-studio-2010, fill, dock

我被这个问题难住了。我在表单的 SplitContainer 的 Panel1 中有一个图像。图像是包含在“旧”柯达图像控件 (axImgEdit1) 中的 TIFF 文件。打开表单时，图像会正确显示，但是当您通过单击“最大图标”（表单的左上角）最大化表单时，图像不会调整大小并填充 Panel1。除了保持原始大小的图像之外，所有内容都会调整大小！

这通常有效。我有另一个程序使用相同的代码来显示 TIFF 图像，并且图像会正确调整大小以填充最大表单。我检查了我的代码，一切都是一样的！

这是显示图像的代码：

```
axImgEdit1.Image = currentPath;
axImgEdit1.DisplayScaleAlgorithm = ImgeditLibCtl.DisplayScaleConstants.wiScaleOptimize;
//this.Dock = DockStyle.Fill;
axImgEdit1.FitTo(0);
axImgEdit1.Display(); 
```

我尝试了“this.Dock = DockStyle.Fill”，但没有帮助。我尝试删除 Kodak Image Control 并重新加载它，但没有修复。我已经三重检查了另一个程序，代码和控制设置是相同的！

任何想法将不胜感激。

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:20:27.210

我找到了解决问题的方法。我仍然不确定为什么来自两个程序的相同代码的行为不同。所以我的解决方案使用 Form_Resize 事件。对于这个问题，最大化的表单是“ViewDwg”。我只担心最大化状态而不是最小化状态。我注释掉了“if (ViewDwg.ActiveForm.WindowState == FormWindowState.Maximized)”这一行，因为它会在测试期间挂在该行上。没有它它工作正常。

```
private void ViewDwg_Resize(object sender, EventArgs e)
    {
        //if (ViewDwg.ActiveForm.WindowState == FormWindowState.Maximized)
        //---this is used to maximize the dwg when user clicks on the Form's maximize icon in the upper right corner of the form (ViewDwg) //---added 1-25-13   
        axImgEdit1.DisplayScaleAlgorithm = ImgeditLibCtl.DisplayScaleConstants.wiScaleOptimize;
        axImgEdit1.FitTo(0);
        axImgEdit1.Display();
    } 
```

# .net - 是否可以在 .NET 中创建变量别名？

> ID：14505732
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:10:24.483
> 
> 标签：.net, alias

考虑以下简单代码：

```
Dim v1 as A
Dim v2 as A

v1 = new A
v2 = v1

v1 = new A 
```

此代码导致 v1 和 v2 引用 2 个不同的对象。

我正在寻找一种方法让 v2 ​​成为 v1 的别名，以便最终 v2 将引用与 v1 相同的对象。有没有一种特殊的方法可以将 v1 分配给 v2 以达到目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:58:18.953

这是一个奇怪的请求，可能有更好的方法来解决它，但与计算机科学中的任何事情一样，您可以通过抽象层来解决这个问题：

```
Public Class AContainer
    Private a As A
    Public ReadOnly Property A() As A
        Get
            Return a
        End Get
    End Property

    Public Sub New(ByVal value As A)
        a = value
    End Sub

    Public Sub Update(ByVal value As a)
        a = value
    End Sub
End Class 
```

现在您只需将 and 设置为`v1`and`v2`的相同实例，`AContainer`然后您可以引用`v1.A`or`v2.A`并且它们将始终具有 A 的相同实例。

更有可能您需要重新评估*为什么*需要`v1`和`v2`保持相同，而是使用相同的参考。

# apache - mod_rewrite 将 index.php 的任何实例重定向到目录 index.php 的根目录

> ID：14505733
> 
> 赞同：1
> 
> 时间：2013-01-24T16:10:24.813
> 
> 标签：apache, mod-rewrite, url-rewriting

我想要达到的目标：

*   alias/index.php?"anything here" 一直有效
*   别名/“任何目录”/index.php 重定向到别名/index.php
*   “任何 file.php” 重定向到 alias/index.php
*   alias/"any directory"/"any file.php" 重定向到 alias/index.php

只希望能够从别名目录的根目录执行 index.php

试过：

```
RewriteCond %{REQUEST_FILENAME} !index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ https://<host>:<port>/<alias>/index.php [NC,R,L] 
```

这不会将任何子目录中的 index.php 重定向到 alias/index.php

# sql - NSIS ExecWait 和 OSQL 应用程序

> ID：14505734
> 
> 赞同：0
> 
> 时间：2013-01-24T16:10:25.980
> 
> 标签：sql, sql-server, nsis, osql

我正在编写一个安装程序，它应该执行一些 MSSQL 数据库操作。这些操作位于 .cmd 文件中，并通过 MSSQL Server 2000 中的 OSQL.exe 执行。

现在我的问题来了。当我双击批处理文件时，它执行确定。但是，如果我在我的安装程序中通过 ExecWait 运行它（或 Exec 或 ExecShell，尝试了所有，没有区别），Windows 会说找不到命令 osql... 通过 SetOutPath 设置的当前工作目录与我的目录完全相同.cmd 文件位于。

我还尝试尽可能简化案例：

```
sql.cmd:

osql
pause 
```

而在我的 NSIS 源中，我有：

```
Section "Perform DB operations" SEC03
  ReadEnvStr $0 SYSTEMDRIVE
  SetOutPath "$0\DBUtils"
  SetOverwrite try
  File /r "..\source_files\DBUtils\*"
  ExecWait '"$0\DBUtils\sql.cmd"'
SectionEnd 
```

我的问题也发生在这里。通过双击或从命令行调用 .cmd 可以正常执行，但 NSIS 的 Exec 出于某种神秘的原因似乎找不到 osql。有人知道为什么会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:38:06.807

osql.exe 在您的硬盘中的哪个位置？尝试修改您的 cmd 以使用绝对路径。

您可以检查安装程序看到的 PATH：

```
ReadEnvStr $0 PATH
MessageBox MB_OK "PATH: $0" 
```

我不确定，但也许如果您的安装程序以不同的用户（管理员）身份运行，那么它可能有不同的路径......

# c++ - 在特定点插入数组

> ID：14505736
> 
> 赞同：0
> 
> 时间：2013-01-24T16:10:30.987
> 
> 标签：c++, arrays, insertion

我试图在数组的前后插入元素以模拟优先级列表，其中以高优先级输入的任务被放在顶部，但低优先级的任务在底部。我的问题是代码适用于在顶部或底部插入，但不显示输入的中间值。我在某处覆盖值吗？

我仅限于我可以使用的头文件。否则我会用向量来完成这一切

感谢您提供的任何帮助。

下面是我的代码：

```
#include <iostream>
#include <string>
#include <math.h>

using namespace std;

void storeinfo() ;
void showinfo() ;
void menu() ;
void deleteinfo() ;
void inserttask() ;
void displayallinfo() ;
void selectionSort() ;
void inserttop(string) ;
void insertbottom(string) ;
int linsearch(string val) ;

class user 
{
    string firstname, lastname, currentteam, position, status ;
    int age ;
public:
    user() {};
    user(string fname, string lname, string cteam, string pos, string stat, int age) 
    {
        setFirstName(fname);
        setLastName(lname);
        setCurrentTeam(cteam);
        setPosition(pos);
        setStatus(stat);
        setAge(age);
    } ;

    void setFirstName(string fname)
        {firstname = fname;}
    void setLastName(string lname)
        {lastname = lname;}
    void setCurrentTeam(string cteam)
        {currentteam = cteam;}
    void setPosition(string pos)
        {position = pos;}
    void setStatus(string stat)
        {status = stat;}
    void setAge(int _age)
        {age = _age;}

    string getFirstName()
        {return firstname ;}
    string getLastName()
        {return lastname ;}
    string getCurrentTeam()
        {return currentteam ;}
    string getPosition()
        {return position ;}
    string getStatus()
        {return status ;}
    int getAge()
        {return age ;}
};

user player[20] ;
int arrlength = 3 ;
string list[6] ;
int listlength = 6;

int main()
{
    menu() ;

    cin.get() ;
    return 0 ;
}

void storeinfo()
{
    string firstname ;
    string lastname ;
    string currentteam ;
    string position;
    string status ;
    int age ;

    for (int i=0; i < 3; i++)
    {
        cout << "\n\n Enter First Name : " ; 
        cin >> firstname ;
        player[i].setFirstName(firstname) ;
        cout << "Enter Last Name : " ; 
        cin >> lastname ;
        player[i].setLastName(lastname) ;
        cout << "Enter Player's Age : " ; 
        cin >> age;
        player[i].setAge(age) ;
        cout << "Enter Current Team : " ; 
        cin >> currentteam ;
        player[i].setCurrentTeam(currentteam) ;
        cout << "Enter Position : " ; 
        cin >> position ;
        player[i].setPosition(position) ;
        cout << "Enter Status : " ; 
        cin >> status ;
        player[i].setStatus(status) ;

        cout << "\n\n\n" ;
    }

    /*cout << string(50, '\n');*/

    menu() ;

}

void showinfo()
{
    string search;
    int found ;

    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

    found=linsearch(search);

    if (found==-1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        cout << "\n First Name : " << player[found].getFirstName() << "\n" << "Last Name : " << player[found].getLastName() <<
            "\n" << "Age : " << player[found].getAge() << "\n" << "Current Team : " << player[found].getCurrentTeam() << 
            "\n" << "Position : " << player[found].getPosition() << "\n" << "Status :  " << player[found].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;

}

void deleteinfo()
{
    int arrlength = 3 ;
    string search ;
    int found ;

    cout << "\n Delete A Player's Information \n\n" ;
    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

        found=linsearch(search);

    if (found==-1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        for (int i=found + 1; i < arrlength; ++i)
        {
            player[i-1].setFirstName(player[i].getFirstName()) ;
            player[i-1].setLastName(player[i].getLastName()) ;
            player[i-1].setAge(player[i].getAge()) ;
            player[i-1].setCurrentTeam(player[i].getCurrentTeam()) ;
            player[i-1].setPosition(player[i].getPosition()) ;
            player[i-1].setStatus(player[i].getStatus()) ;
        }

        --arrlength ;

        cout << "\n Player has been deleted." ;

        player[arrlength].setAge(0) ;
        player[arrlength].setCurrentTeam("") ;
        player[arrlength].setFirstName("") ;
        player[arrlength].setLastName("") ;
        player[arrlength].setPosition("") ;
        player[arrlength].setStatus("");
    }

    cin.get() ;

    menu() ;
}

void displayallinfo()
{

    for (int index = 0; index < arrlength -1; index++) // sorting algorithm,
        {
            if (player[index].getAge() > player[index+1].getAge())
            {
                user temp; // create temporary user
                temp = player[index]; // position is set to temp
                player[index] =  player[index+1]; // swap takes place
                player[index+1] =  temp; // new value is what was stored in temp
            }
        }

    for (int i=0; i < 3; i++) //display all
    {
        cout << "\nFirst Name : " << player[i].getFirstName() << "\n" << "Last Name : " << player[i].getLastName() <<
            "\n" << "Age : " << player[i].getAge() << "\n" << "Current Team : " << player[i].getCurrentTeam() << 
            "\n" << "Position : " << player[i].getPosition() << "\n" << "Status :  " << player[i].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;
}

void inserttask()
{
    string task ;
    string priority ;

    for (int i = 0; i < 6; i++)
    {
        cout << "\nEnter name of task to be performed : " ;
        cin >> task ;

        cout << "\nEnter priority rating : " ;
        cout << "\nHigh or Low" ;
        cin >> priority ;
            if (priority == "High" | priority == "high")
            {
                inserttop(task) ;
            }
            else if(priority =="Low" | priority =="low")
            {
                insertbottom(task) ;
            }
    }

    for (int j = 0; j < 6; j++)
    {
        cout << list[j] ;
    }

    cin.get() ;

    menu() ;
}

void menu()
{
    cout << "\n\n MENU" << "\n" ;
    cout << "\n A. Store Player Information" ;
    cout << "\n B. Show Player Informaton" ;
    cout << "\n C. Delete Player Information" ;
    cout << "\n D. Display All Players Sorted By Age";
    cout << "\n E. Insert tasks by priority" ;
    cout << "\n Z. Exit \n\n" ;

    string x =  "";
    cin >> x ;

    if (x=="a" | x=="A")
    { 
        storeinfo() ;
    }
    else if (x=="b" | x=="B")
    {
        showinfo() ;
    }
    else if (x=="c" | x=="C")
    {
        deleteinfo() ;
    }
    else if (x=="d" | x=="D")
    {
        displayallinfo() ;
    }
    else if (x=="e" | x=="E")
    {
        inserttask() ;
    }
    else if (x=="z" | x=="Z")
    {
        exit(0) ;
    }
    else
    {
        cout << "Invalid Choice" ;
        menu() ;
    }
}

int linsearch(string val)
{
    for (int j=0; j <= 3; j++)
    {
        if  (player[j].getLastName()==val)
         return j ;         
    }
        return -1 ;
}

void inserttop(string task)
{
    int head = 0 ;
    string temp ;

    for (int i = 0; i < listlength; i++)
    {
        list[head + 1] = list[head] ;
        temp = task ;
        list[head] = temp ;
        temp = "" ;
    }
}

void insertbottom(string task)
{
    int tail = listlength ;
    string temp ;

    for (int i = 0; i < listlength; i++)
    {
        list[tail - 1] = list[tail] ;
        temp = task ;
        list[tail] = temp ;
        temp = "" ;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:26:11.730

该算法存在一些问题。我将以这个函数为起点：

```
void inserttop(string task)
{
    int head = 0 ;
    string temp ;

    for (int i = 0; i < listlength; i++)
    {
        list[head + 1] = list[head] ;
        temp = task ;
        list[head] = temp ;
        temp = "" ;
    }
} 
```

首先要注意的是，您循环了 的不同值`i`，但您在循环中根本不使用`i`。其次，您似乎添加了元素，但从不修改列表的长度（虽然不确定这些变量是如何声明的，所以我可能会在这里做出错误的假设）。第三，这个变量`temp`在这里是没有用的（尤其是你不需要在每个循环结束时将它重置为空字符串）。

您的意思可能与此更相似：

```
void inserttop(string task)
{
    // Expand the list by one... [bounds check should be done, omitted here]
    listlength++;

    // Overwrite each element with the previous one, making room
    // for the new element in the first position of the array.
    // Take care of proceeding backwards (see the indexes used
    // inside the cycle) to avoid overwriting the first value
    // all over the list.
    for (int i = 1; i <= listlength; i++)
    {
        list[listlength - i] = list[listlength - i - 1] ;
    }

    // Now you can set the first element...
    list[0] = task;
} 
```

而且我相信`insertbottom`会遇到同样的问题，因此您可能必须做一些对称的事情：

```
// Again, don't forget to do bounds checking... this piece of code is just a hint
void insertbottom(string task)
{
    for (int i = 0; i < listlength - 1; i++)
    {
        list[i] = list[i + 1] ;
    }

    list[listlength] = task;

    listlength++;
} 
```

# c - 在c中的数组中查找一个字符

> ID：14505743
> 
> 赞同：0
> 
> 时间：2013-01-24T16:10:46.043
> 
> 标签：c, arrays

我正在努力寻找如何在 char[20] 中打印字符的位置。谁能帮我？

```
int emfanisi(char a[])
{
    int i, mikos;
    char b;

    printf("Dose xaraktira\n");
    scanf("%s", b);
    mikos = strlen(a);
    for(i=0; i<mikos; i++)
    {
        if(a[i] == b)
            return i;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:16:59.697

问题是如果 char 在第一次迭代中不匹配，循环就会中断。更改如下。

附带说明一下，已经有一个函数可以在字符串中定位字符： `strchr(str,char)`。

代码：

```
int emfanisi(char a[])
{
    int i, mikos;
    char b;

    printf("Dose xaraktira\n");
    scanf("%c", &b);
    mikos = strlen(a);
    for(i=0; i<mikos; i++)
    {
        if(a[i] == b)
            return i;
    }
    return -1; //Indicate doesn't found.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:12:33.390

你可以使用 strchr 函数来做你想做的事。

> strchr() 函数应在 s 指向的字符串中定位第一次出现的 c（转换为字符）。终止的空字节被认为是字符串的一部分。

[http://pubs.opengroup.org/onlinepubs/009695399/functions/strchr.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/strchr.html)

如果返回值不为空（即找到字符），您可以使用以下方法获取索引：

```
const char* res = strchr(cstr,'A');
int index = cstr-res; //< NOTE: you should check that res != 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:24:02.353

您正在尝试搜索字符串中的字符并返回数组中的位置（如果它存在于数组中）。

你应该扫描`character`而不是`string`

像这样更改您的 scanf() 以便您的条件检查`if(a[i] == b)`有效

```
scanf("%c", &b); 
```

并在字符串中找不到字符时包含错误条件。在 for 循环之后返回不会发生在 for 循环中。

```
return -1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:14:03.253

那应该做你想要的：

```
const char * pos = strchr(your_string, character_you_search_for);
if(!pos)
  printf("not found\n");
else
  printf("position is : %d\n", pos - your_string); 
```

strchr 返回指向第一次出现的字符的指针，因此通过从中减去 your_string 得到它的偏移量。

# dart - 基于Ip访问Httphandlers

> ID：14505744
> 
> 赞同：0
> 
> 时间：2013-01-24T16:10:46.383
> 
> 标签：dart

我目前创建了一个控制台应用程序，该应用程序具有一个 Http 处理程序，供机器人发布有关其位置的信息。我想知道如何在 DART 中强制执行基于 IP 的身份验证，以便只有具有特定 IP 地址的机器人才能访问处理程序，而其他人在访问时会收到 404 错误。

```
//The handler is registered as acceptInput
server.addRequestHandler((req) => req.path =='/acceptInput',acceptInput);
//Below is the code of the function
void acceptInput(HttpRequest request,HttpResponse response){
     //Some logic
} 
```

我需要添加身份验证机制以确保只有特定的 ip 可以访问此处理程序。

我找不到任何针对此问题的有用资源。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:22:31.637

不一定是身份验证，但是您是否尝试过查看[`HttpRequest`'s`connectionInfo.remoteHost`](http://api.dartlang.org/docs/bleeding_edge/dart_io/HttpConnectionInfo.html)？

例如：

```
server.addRequestHandler(validate,acceptInput);

bool validate(req) {
  // only return true if the path + ip match
  return req.path =='/acceptInput' && req.connectionInfo.remoteHost = '1.2.3.4';
}

void acceptInput(HttpRequest request,HttpResponse response){
     //Some logic
} 
```

# .net - 2010 年的 VS express 版本中有什么？

> ID：14505752
> 
> 赞同：1
> 
> 时间：2013-01-24T16:11:01.167
> 
> 标签：.net, visual-studio-2010, visual-studio, visual-web-developer-2010

如果我没有在 Vista OS 机器上安装任何版本的 .NET（根据添加/删除程序列表），如果我下载并安装 VS2010 Visual Web Developer，我是否会获得自动安装所需的必要 .NET 组件? 如果我下载 Visual C# Express 2010 怎么样？

换句话说，我意识到使用 VS2010 创建应用程序需要 .NET 组件，但如果我没有这些组件，当 VS2010 意识到操作系统上不存在这些组件时，它是否会为我提供这种必要性？

# c# - 从 pdf 文件中获取表单元素

> ID：14505753
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:11:02.377
> 
> 标签：c#, itextsharp

我想解析一个包含复选框、单选按钮、下拉菜单和文本框的 PDF 文件。我想解析 PDF 文件以获取每个控件的位置和值。我正在使用 C# 和 itextsharp

任何建议/想法都会有所帮助。

到目前为止我所做的参考：[http ://simpledotnetsolutions.wordpress.com/2012/04/08/itextsharp-few-c-examples/](http://simpledotnetsolutions.wordpress.com/2012/04/08/itextsharp-few-c-examples/)

```
 public void ReadPDFformDataPageWise(string inputFile)
    {
        PdfReader reader = new PdfReader(inputFile);
        AcroFields form = reader.AcroFields;
        try
        {
            for (int page = 1; page <= reader.NumberOfPages; page++)
            {
                foreach (string key in form.Fields.Keys)
                {
                    switch (form.GetFieldType(key))
                    {
                        case AcroFields.FIELD_TYPE_CHECKBOX:
                            //Create Checkbox
                        case AcroFields.FIELD_TYPE_COMBO:
                        //Create Combo Box
                        case AcroFields.FIELD_TYPE_LIST:
                        //Create List
                        case AcroFields.FIELD_TYPE_RADIOBUTTON:
                        //Create Radio button
                        case AcroFields.FIELD_TYPE_NONE:
                        case AcroFields.FIELD_TYPE_PUSHBUTTON:
                        //Create Submit Button
                        case AcroFields.FIELD_TYPE_SIGNATURE:
                        //Create Signature
                        case AcroFields.FIELD_TYPE_TEXT:
                            //Create textbox/Qs header
                            int fileType = form.GetFieldType(key);
                            string fieldValue = form.GetField(key);
                            float[] a = form.GetFieldPositions(key);
                            string translatedFileName = form.GetTranslatedFieldName(key);
                           AcroFields.Item test=  form.GetFieldItem(key);

                            break;
                    }
                }
            }
        }
        catch
        {
        }
        finally
        {
            reader.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:23:39.027

你为什么指的是非官方的例子，而不是官方网站？

请参阅[http://itextpdf.com/examples/iia.php?id=121](http://itextpdf.com/examples/iia.php?id=121)了解如何列出 AcroForm 中的所有字段，获取它们的名称和类型。如果您有复选框或单选字段，则需要获取外观状态，如同一示例所示。

如果你想知道每个字段的页码和位置，你需要这个例子：http: [//itextpdf.com/examples/iia.php ?id=163](http://itextpdf.com/examples/iia.php?id=163)

寻找获取`FieldPosition`实例的方法。

如果您想了解更多关于为字段设置的标志（密码字段、多行...），请查看以下示例：http: [//itextpdf.com/examples/iia.php ?id=237](http://itextpdf.com/examples/iia.php?id=237)

如果你说：*Lowagie 先生，我会否决你的答案，因为你给我的是 Java 的例子，而我只接受 C# 的答案！*请访问：http: [//sourceforge.net/p/itext/code/HEAD/tree/book/](http://sourceforge.net/p/itext/code/HEAD/tree/book/)

我们已经投资将所有书籍示例移植到 C#。您所要做的就是沿着目录树查找相应的示例。例如：http: [//sourceforge.net/p/itext/code/HEAD/tree/book/src/part2/chapter06/FormInformation.java](http://sourceforge.net/p/itext/code/HEAD/tree/book/src/part2/chapter06/FormInformation.java)

如果您说：您的示例都不起作用，那么您的表单可能是 XFA 表单而不是 AcroForm。在那种情况下，不存在“场的位置”之类的东西；使用 XFA，PDF 文件充当 XML 模板和数据集的容器。此 XML 是动态呈现的，每个字段的位置取决于数据集。如果您的问题是关于 XFA，请重新考虑。

请注意，这个答案让我花钱，因为我正在分享您应该从阅读[我写的书中](http://itextpdf.com/book)获得的知识，而不是问一个问题，表明您自己并没有付出太多努力来寻找解决方案；-)

我没有否决这个问题，但我理解为什么其他人会这样做。

# c# - 不同步的 Ajax 查询？

> ID：14505755
> 
> 赞同：0
> 
> 时间：2013-01-24T16:11:05.057
> 
> 标签：c#, jquery, html, ajax

我正在开发一个报告应用程序，它从我制作的 aspx 中获取数据。为了显示数据，它对该页面使用 ajax 查询。根据传递的参数，任务可能需要很长时间或很短的时间。

到那时一切都还好。此 jquery 代码出现问题：

```
<script type="text/javascript">
    $(document).ready(function () {

        $('.preload').preload();
        $('.preload').each(function () {
            var obj = $(this);
            $.ajax({
                type: 'GET',
                url: 'GetCounter.aspx',
                success: function (data) {
                    obj.replaceWith(data);
                },
            });
        });

    });
</script> 
```

问题是它们是同步运行的，即使我将“async：true”设置为 ajax 调用。选择器中的第一个运行，然后是第二个，依此类推，即使它们都被同时调用，因为 Firebug 在网络选项卡中显示了所有 GET 请求。

任何想法这里可能有什么问题？

提前致谢！- 黑暗小子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:18:17.910

你不是真的在那里谈论异步 AJAX。您在谈论多线程 Javascript 执行，我相当确定 Javascript 并没有真正执行多线程。

这可能对您有用：[http ://www.sitepoint.com/multi-threading-javascript/](http://www.sitepoint.com/multi-threading-javascript/)

# javascript - 如何在 iOS UIWebView 中获取所有网页？

> ID：14505764
> 
> 赞同：6
> 
> 时间：2013-01-24T16:11:57.477
> 
> 标签：javascript, iphone, ios, objective-c, uiwebview

每个人。

我正在尝试在 UIWebView 中获取当前页面的所有图像 url。

所以，这是我的代码。

```
- (void)webViewDidFinishLoad:(UIWebView*)webView {
    NSString *firstImageUrl = [self.webView stringByEvaluatingJavaScriptFromString:@"var images = document.getElementsByTagName('img');images[0].src.toString();"];
    NSString *imageUrls = [self.webView stringByEvaluatingJavaScriptFromString:@"var images= document.getElementsByTagName('img');var imageUrls = "";for(var i = 0; i < images.length; i++){var image = images[i];imageUrls += image.src;imageUrls += \\’,\\’;}imageUrls.toString();"];
    NSLog(@"firstUrl : %@", firstImageUrl);
    NSLog(@"images : %@",imageUrls);
} 
```

第一个 NSLog 返回正确图像的 src，但第二个 NSLog 什么也不返回。

```
2013-01-25 00:51:23.253 WebDemo[3416:907] firstUrl: https://www.paypalobjects.com/en_US/i/scr/pixel.gif
2013-01-25 00:51:23.254 WebDemo[3416:907] images : 
```

我不知道为什么。请帮我...

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T18:53:18.847

Perrohunter 指出了一种`NSRegularExpression`很好的解决方案。如果您不想枚举匹配数组，也可以使用基于块的[`enumerateMatchesInString`](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW10)方法：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(<img\\s[\\s\\S]*?src\\s*?=\\s*?['\"](.*?)['\"][\\s\\S]*?>)+?"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

[regex enumerateMatchesInString:yourHTMLSourceCodeString
                        options:0
                          range:NSMakeRange(0, [yourHTMLSourceCodeString length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {

                         NSString *img = [yourHTMLSourceCodeString substringWithRange:[result rangeAtIndex:2]];
                         NSLog(@"img src %@",img);
                     }]; 
```

我还更新了正则表达式模式以处理以下问题：

*   `img`开始标签和属性之间可以有`src`属性；
*   `src`在属性之后和之前可以有属性`>`；
*   `img`标签中间可以有换行符（`.`捕获除换行符之外的所有内容）；
*   `src`属性值可以用as`'`和`"`; 和
*   `src`和 the之间`=`以及 the`=`和后续值之间可以有空格。

我自由地认识到，阅读正则表达式模式对于初学者来说是痛苦的，也许其他解决方案可能更有意义（Joris 的 JSON 建议，使用扫描仪等）。但是如果你想使用正则表达式，上面的模式可能会覆盖更多的`img`标签排列，并且`enumerateMatchesInString`可能比`matchesInString`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T16:50:36.727

我不喜欢正则表达式，所以这是我没有它们的答案。

为澄清而缩进的javascript：

```
// javascript to execute:
(function() {
    var images=document.querySelectorAll("img");
    var imageUrls=[];
    [].forEach.call(images, function(el) {
        imageUrls[imageUrls.length] = el.src;
    }); 
    return JSON.stringify(imageUrls);
})() 
```

您会注意到我在这里返回了一个 JSON 字符串。要在 Objective-C 中阅读此内容：

```
NSString *imageURLString = [self.webview stringByEvaluatingJavaScriptFromString:@"(function() {var images=document.querySelectorAll(\"img\");var imageUrls=[];[].forEach.call(images, function(el) { imageUrls[imageUrls.length] = el.src;}); return JSON.stringify(imageUrls);})()"];

// parse json back into an array
NSError *jsonError = nil;
NSArray *urls = [NSJSONSerialization JSONObjectWithData:[imageURLString dataUsingEncoding:NSUTF8StringEncoding] options:0 error:&jsonError];

if (!urls) {
    NSLog(@"JSON error: %@", jsonError);
    return;
}

NSLog(@"Images : %@", urls); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-24T16:21:37.813

您可以在加载的 webview html 源代码上运行正则表达式来实现这一点

```
NSString *yourHTMLSourceCodeString = [webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"];

    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(<img src=\"(.*?)\">)+?"
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];

    NSArray *matches = [regex matchesInString:yourHTMLSourceCodeString
                                      options:0
                                        range:NSMakeRange(0, [yourHTMLSourceCodeString length])];

    NSLog(@"total matches %d",[matches count]);

    for (NSTextCheckingResult *match in matches) {
        NSString *img = [yourHTMLSourceCodeString substringWithRange:[match rangeAtIndex:2]] ;
        NSLog(@"img src %@",img);
    } 
```

这是一个非常基本的正则表达式，可以匹配标签内的任何内容，如果您的图像具有更多属性（例如类或 id），则需要更多详细信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-05T17:28:32.937

使用给定的 html，您可以使用[SwiftSoup](https://github.com/scinfu/SwiftSoup)库。使用**斯威夫特 3**

```
do {
    let doc: Document = try SwiftSoup.parse(html)
    let srcs: Elements = try doc.select("img[src]")
    let srcsStringArray: [String?] = srcs.array().map { try? $0.attr("src").description }
    // do something with srcsStringArray
    } catch Exception.Error(_, let message) {
        print(message)
    } catch {
        print("error")
    } 
```

# c# - 为什么从我的逐字字符串中删除换行符只返回最后一行？

> ID：14505765
> 
> 赞同：3
> 
> 时间：2013-01-24T16:12:05.910
> 
> 标签：c#, string, verbatim-string

我有以下代码：

```
string test = @"1
2
3"; 
```

这一行：

```
Console.WriteLine(test.Replace("\n", "")); //3 
```

打印“3”，而不是“123”，这是我所期望的。为什么这个方法只返回我的字符串的最后一行，否则我怎样才能删除所有换行符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T16:13:54.137

`Console.WriteLine(test.Replace("\n", ""));`为我返回所有数字。在处理换行符时，您必须知道换行符可能是`\r\n`，这取决于平台。在这种情况下，你应该使用这个：

```
test.Replace("\r\n", "")
// or better:
test.Replace(Environment.NewLine, "") 
```

参考[“\n”和Environment.NewLine的区别](https://stackoverflow.com/questions/1015766/difference-between-n-and-environment-newline)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:18:52.230

如果您编写文本文件的系统和编译或运行它的系统之间的换行符可能不同，您可能想要这样做

```
string test = @"1
2
3";
Console.WriteLine(test.Replace(@"
", ""); 
```

尽力确保字符串文字中的换行符与您要替换的换行符相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T15:42:20.863

逐字字符串使用它所在的源代码文件的行尾。鉴于像 git 这样的源代码控制环境可能会将行尾转换为结束字符串的本机行

```
string test = @"1
2
3"; 
```

可以有任何一组行尾（`"\r\n"`、`"\r"`或`"\n"`）。删除任何这些可能的唯一安全方法是：

```
Console.WriteLine(test.Replace("\n", "").Replace("\r", "")); 
```

这不假设两个代码片段位于同一个源文件中（因为两个源文件不必具有相同的行结尾）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:13:36.490

逐字字符串`"\r\n"`用作换行符，因此替换的结果是`"1\r2\r3"`.

如果您改为使用`test.Replace("\r\n", "")`它将按预期工作。处理任意数量的情况`\r`或`\n`使用：`test.Replace("\r", "").Replace("\n", "")`. 这将适用于`\r`, `\n`, 或`\r\n`作为分隔符。

# jquery - jQuery窗口调整大小前置

> ID：14505767
> 
> 赞同：0
> 
> 时间：2013-01-24T16:12:11.627
> 
> 标签：jquery

窗口调整大小有问题。我要做的是检查窗口是否小于 600 像素，然后在正文中添加一个 div (.inner)。在调整大小时，我想检查窗口宽度，如果它大于 600 像素，请将 div（内部）放回原位。

HTML

```
<body>
  <div class="outer">
     <div class="inner">
     </div>
  </div> 
```

JS

```
var windowWidth = $(window).width();

checkWidth();

function checkWidth(){
    if(windowWidth > 600){
    $('.outer').append($('.inner'));
    console.log('back in place');
  } else {
    $('body').prepend($('.inner'));
        console.log('prepend');
  }
}
$(window).resize(function() {
  checkWidth();
}).trigger('resize'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:16:00.013

您需要检索函数内部的宽度。否则它将始终包含调整大小之前的值。

```
$(checkWidth);
$(window).resize(checkWidth).trigger('resize');

function checkWidth()
{
    var window_width = $(window).width();

    if(window_width > 600)
    {
        $('.outer').append($('.inner'));
        console.log('back in place');
    } 
    else 
    {
        $('body').prepend($('.inner'));
        console.log('prepend');
    }
} 
```

# php - 安装 bonfire 时出现问题，因为它将我重定向到错误的页面

> ID：14505769
> 
> 赞同：1
> 
> 时间：2013-01-24T16:12:16.067
> 
> 标签：php, codeigniter

我在 phpMyAdmin 上创建了正确的数据库，然后在我的根 Web 目录中解压缩了 Bonfire。

Index.php 带我去安装。我把细节写对了，然后一旦我点击测试它就会带我去`/install/install`我试过把`$config['index_page'] = 'index.php';`文件放在`bonfire/application/config/config.php`但我没有运气

谁能告诉我为什么要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:04:43.013

我也尝试安装 Bonefire 并且遇到了同样的问题，我通过打开我的 apache 模块来修复它`rewrite_module`

# .net - 带有 .NET 的 apache apollo mq

> ID：14505776
> 
> 赞同：2
> 
> 时间：2013-01-24T16:12:30.520
> 
> 标签：.net, asynchronous, message-queue, stomp, apollo

我需要在我的 ASP.NET MVC 应用程序中使用队列。我正在寻找最快的实现，谷歌一点，查看一些基准，发现目前 Apache Apollo MQ 是跨消息队列的最快解决方案。

是否存在一些客户端库，允许在 .NET 世界中使用 Apache ApolloMQ（发送和消费消息）？

* * *

此外，如果您可以向我提供其他解决方案（不包括 0MQ）表现出更好性能的基准，请向我提供链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:23:13.440

你看过任何[DDS](http://en.wikipedia.org/wiki/Data_distribution_service)（数据分发服务实现吗？

例如，查看RTI 的[Connext DDS](http://www.rti.com/products/dds/index.html)或PrismTech 的[Open Splice](http://www.prismtech.com/opensplice)。大多数 DDS 实现可以提供一种持久队列（如果需要的话），与 ZeroMQ 一样快（或更快，取决于用例）。它们不是传统的 MQ:s，但如果您以良好的方式设置它们的 QoS，它们可能会以类似的方式工作。

一些 DDS 实现是免费提供的（功能有限），一些提供 C# 实现。更多供应商[可以在这里找到](http://portals.omg.org/dds/category/web-links/vendors)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:54:10.690

有关如何让 .NET 与 Apollo 对话的示例，请参阅 Apollo 发行版中的“examples/stomp/csharp”目录。顺便说一句，由于 apollo 支持这么多不同协议、语言和平台的客户端，它通常不包括客户端 API 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T18:31:05.647

看起来现在.NET 中没有用于 apollomq 的官方客户端库。但是可以使用 STOMP 协议库[Apache.NMS.Stomp](http://activemq.apache.org/nms/apachenmsstomp.html)

# mysql - 从 1 个左连接中获得 2 个结果

> ID：14505782
> 
> 赞同：1
> 
> 时间：2013-01-24T16:12:59.123
> 
> 标签：mysql

我有一张订单表。每个订单都有一个发送者和一个接收者。发送者和接收者都在客户表中。每个客户有时可能是发送者或接收者，因此我无法将它们拆分为发送者和接收者表。

我现在陷入了构建（在一个查询中）的 JOIN 中，它将为我带来两个客户（一个作为发送者，一个作为接收者），我可以将它们识别为“正确”类型的客户。

我可以做一个标准的左连接，

```
SELECT o.date,c.last_name,c.first_name,c.company,c.email
FROM orders o 
LEFT JOIN customers c ON ( o.sender = c.id )
WHERE o.id = 2"; 
```

但这只会让我了解发件人的信息。我可以将 o.sender 更改为 o.receiver，但这只会让我获得接收者的信息。

我怎样才能同时获得两者并区分两者中的哪一个是发送者，哪个是接收者？

提前致谢，

吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:14:40.990

You could use an OR on the ON clause of the join:

```
SELECT o.date, c.last_name, c.first_name, c.company, c.email,
       case when o.sender=c.id then 'Sender'
            when o.receiver=c.id then 'Receiver' end as kind_of_customer
FROM orders o 
      LEFT JOIN customers c ON o.sender = c.id or o.receiver = c.id
WHERE o.id = 2; 
```

and using a CASE WHEN you can distinguish if it's a sender or if it's a receiver.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:16:26.377

你可以在`customer`桌子上加入两次。一次将返回`sender`，另一个将返回`receiver`。

```
SELECT o.date,
  c1.last_name,
  c1.first_name,
  c1.company,
  c1.email,
  c2.last_name,
  c2.first_name,
  c2.company,
  c2.email
FROM orders o 
LEFT JOIN customers c1
  ON o.sender = c1.id
LEFT JOIN customers c2
  ON o.receiver = c2.id
WHERE o.id = 2"; 
```

如果您想使用更具描述性的别名，那么您将使用：

```
SELECT o.date,
  sender.last_name,
  sender.first_name,
  sender.company,
  sender.email,
  receiver.last_name,
  receiver.first_name,
  receiver.company,
  receiver.email
FROM orders o 
LEFT JOIN customers sender
  ON o.sender = sender.id
LEFT JOIN customers receiver
  ON o.receiver = receiver.id
WHERE o.id = 2"; 
```

# facebook - 分享一个包含 3 种视频类型的播放器的 URL

> ID：14505783
> 
> 赞同：2
> 
> 时间：2013-01-24T16:13:03.200
> 
> 标签：facebook, facebook-graph-api, video, share, jwplayer

事情是这样的：

我有一个 codeigniter 的应用程序，它可以播放特定的视频。我为此使用了 3 种格式：FLV、MP4 和 WEBM，以涵盖 HTML5 和 Flash 浏览器的所有情况。

适用于 Mozilla (WEBM)、Chrome (MP4)、Safari (MP4) 和 IE9 (MP4) 的 HTML5。IE7 和 IE8 闪存 (FLV)。

然后，对于 JW Player，我使用 block LEVELS 和 MODES 来切换 HTML5 FLASH 或反之亦然，具体取决于浏览器。

我要强调的一点是：该视图具有三个不同的 facebook 元标记：

```
<meta property="og:video:type" content="application/x-shockwave-flash" />
<meta property="og:video:type" content="application/mp4" />
<meta property="og:video:type" content="application/webm" /> 
```

使用 PHP-SDK 将我的视频分享到 Facebook 时，我只在 Mozilla 中遇到问题，因为我无法在用户的墙上播放它。而且我不知道是否有必要在播放器上指定 3 种类型的视频，还是应该只放一种类型，而 facebook 会发挥它的魔力并在所有浏览器中播放？

# sql - Microsoft Access：根据分组变量（表中的字段）从一行中的多行返回结果

> ID：14505788
> 
> 赞同：0
> 
> 时间：2013-01-24T16:13:11.730
> 
> 标签：sql, ms-access

我正在研究鱼的生长速度，所以每次测量一条鱼时我都需要拉体重和日期。

现在每个捕获记录都在单独的行上。我基本上想从这个表中拉出`pitcode`, `species`, `tagdate1`, `length1`, `weight1`, `tagdate2`, `length2`, `weight2`,`tagdate3`等。我正在使用 Microsoft Access。提前感谢您的任何建议。`pitcode``tagdate`

```
pitcode         tagdate       length  weight    species
3D9.1C2D9C7FCE  7/26/2011   213 118 3
3D9.1C2D9F3AB2  7/26/2011   148 38  3
3D9.1C2D9F1627  7/26/2011   215 116 3
3D9.1C2D60CDC6  7/26/2011   165 58  3
3D9.1C2D9F0797  7/26/2011   244 204 3
3D9.1C2D9BA47F  7/26/2011   143 47  3
3D9.1C2D9FD674  7/27/2011   226 183 3
3D9.1C2DA1C597  7/27/2011   123 27.2    3
3D9.1C2D9FE09F  7/27/2011   241 182.3   3
3D9.1C2D9FE4D8  7/27/2011   286 301 3 
```

我从另一篇文章中找到了这个“自我加入”，它有效：

```
SELECT
  a.pitcode, 
  MIN(a.tagdate) AS td1, MIN(b.tagdate) AS td2, 
  MIN(a.weight) AS wt1, MIN(b.weight) AS wt2
FROM
  tagd a
  LEFT JOIN tagd b
  ON a.pitcode = b.pitcode AND b.tagdate > a.tagdate and b.weight>a.weight
GROUP BY
  a.pitcode; 
```

# c++ - c++ const 正确性问题与 getter

> ID：14505789
> 
> 赞同：1
> 
> 时间：2013-01-24T16:13:15.820
> 
> 标签：c++, class, constants

这是我的问题。

我有一个包含对象数组的类（在 std::vector 中）这些对象可以从客户端代码修改，所以我创建了一个私有 getter，它返回指向我需要修改的对象的指针。公共方法使用此 getter 来修改数组中的对象。

私有 getter 还用于将数组中对象的某些特定值返回给客户端代码的其他成员函数。我希望这些函数成为并返回 const，但我不能这样做，因为我使用了前面提到的非 const getter。

我知道我可以制作另一个 const getter，但这只会重复代码。

如何正确实施？

代码示例：

```
class Object;

class Inventory
{
    Object* GetObject(int id);
    void AddObjectProp(int id, int amount) {
        Object* x = GetObject id);
        x->prop += amount;
    }

    //using const here is not posible because GetObject is not const
    int GetObjectProp(int id) {
        Object* x = GetObject id);
        return x->prop;
    }    

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:18:28.103

我知道你说你不想这样做，但最干净的解决方案是使用两个吸气剂：

```
class Inventory
{
    Object* GetObject(int id);
    const Object* GetObject(int id) const;

    void AddObjectProp(int id, int amount) {
        Object* x = GetObject(id);
    }

    int GetObjectProp(int id) const {
        const Object* x = GetObject(id);
    }    
}; 
```

至于复制`GetObject()`实现，您可以

*   排除大部分代码；或者
*   根据另一个实现一个吸气剂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:18:03.403

我相信你可以做一个

```
const Object* GetObject(int id) const; 
```

那么你可以：

```
int GetObjectProp(int id) const {
    const Object* x = GetObject(id);
    return x->prop;
} 
```

或者：

```
int GetObjectProp(int id) const {
    return GetObject(id)->prop;
} 
```

（还修复了“id”之前缺少的括号`GetObject()`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:32:23.410

我不认为在这里有一个双重吸气剂可以被视为代码重复。两个吸气剂都有自己的用例。

一种 getter 旨在供需要 const 引用的客户使用。

另一个 getter（我将其称为访问器，以使其在我们正在寻找非 const 引用的代码中明确表示）供任何可能愿意修改对象的客户端使用。

这将是我的方法：

```
class Inventory
{
   Object& accessObject(int id);
   const Object& getObject(int id) const;

   ...
}; 
```

如果您真的不想拥有两个 getter，那么在`const_cast`需要时可以使用单个 const getter 来抛弃 constness 怎么样？

# ajax - 在 AJAX 函数中定义 $(this) 并附加在另一个 AJAX 成功函数中创建的父级

> ID：14505795
> 
> 赞同：0
> 
> 时间：2013-01-24T16:13:28.750
> 
> 标签：ajax

所以，这里有一些有趣的东西！我正在尝试在 ajax 调用中运行一个函数，并使用来自另一个函数的数据填充 AJAX 成功函数中的一个元素。那有意义吗？可能不是，所以这是我的代码。

**这是最终结果函数，它依赖于一个数据的另一个函数。**

```
function runQuery(){

var url = 'http://www.nexthometown.com/index.php?option=com_singleprop&view=raw&format=raw';

$.ajax({
    url: url,
    dataType: 'json',
    success: function(data){ 
        $.each(data, function (key, value){
            var agentuid = value[0];
            var mlsnum = value[1];
            var address = value[5] + ' ' + value[6] + ' ' + value[7];
            var city = value[9];
            var state = value[10];
            var zip = value[11];
            $('#ohs_table').append('<tr><td>' + mlsnum + '</td><td>' + address + ' ' + city + ' ' + zip + '</td><td class="date"><div>' + ohsDate(mlsnum) + '</div></td><td><div class="media_button">QRCode</div><div class="pdf_button media_button" form="oh_usda" value="' + mlsnum + '">USDA<br/>PDF</div><div class="pdf_button media_button" form="oh_usda_null" value="' + mlsnum + '">NO USDA<br/>PDF</div></td></tr>');
        });
    },
    error: function(jqXHR, error, errorThrown) {  
        alert(jqXHR.responseText); 
    }
});

}; 
```

**这是另一个 AJAX 调用的成功函数中调用的函数**

```
function ohsDate(mlsno){
var dateurl = 'http://www.nexthometown.com/index.php?option=com_singleprop&view=raw&format=raw&mlsnum='+mlsno;
$.ajax({
    url: dateurl,
    dataType: 'json',
    success: function(data){
        $.each(data, function (key, value){
            var date = value[0];
            var start = value[3];
            var end = value[4];
            $(this).parent('.date').append( date + ',' + start + ' - ' + end );
        });
    },
    error: function() {
        alert('OOPS!');
    }
});
}; 
```

`undefined`现在，问题是当**最终结果**AJAX 调用完成时，我不断得到结果。所以，由于每次调用依赖函数时我都没有收到`'OOPS!`警报，我只能假设它找到了成功，但有些东西是未定义的，我假设它是`$(this)`引用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:59:38.910

我放弃了这种方法，并将 mySQL 查询从 更改`WHERE`为`JOIN`. 我正在尝试使用创可贴修复从另一个脚本中提取某些内容。效果不好。

# ruby - Jenkins 构建失败：我希望它通过

> ID：14505797
> 
> 赞同：1
> 
> 时间：2013-01-24T16:13:38.660
> 
> 标签：ruby, bash, jenkins, cucumber

目前我们的一个 Jenkins 构建失败了。我希望它在构建失败时通过（或显示绿色）。同样，当案例通过时，我希望我们的构建失败（或显示红色）。我正在配置的构建是我们的“已知问题构建”。所以只有失败的案例才会进入那里。这个构建的目标是让它在失败时通过，因为我们知道它已经坏了。当我们的开发人员修复它时，构建应该会失败（这意味着现在有些东西正在工作），以便我们可以将它从构建中移出到我们的核心构建中。我阅读了一篇关于 --wip 开关的文章，并已成功将其配置到我们的构建中。我一直收到电子邮件说 Jenkins 构建已恢复正常，对我来说这似乎有效。但是，当您查看构建本身时，它看起来好像失败了。该构建被标记为红色，这意味着它失败了，并且测试说它们失败了。他们通过的唯一指标是我收到的电子邮件。但这不是我想要的预期行为。该构建似乎提醒我它通过了，但看起来好像失败了。有没有办法让红色按钮变成绿色，所以当我们查看我们的构建时，我们知道什么时候出了问题。

现在我添加`|| exit 1`到我的命令的末尾，它应该反转失败和通过的标志。我还创建了一个简短的 bash 脚本来反转按钮颜色，这也不起作用。我相信我错过了一些东西。有任何想法吗？下面列出的是我正在运行以启动我们的构建的命令：

```
cucumber --wip --profile wip --format json -o cucumber.json /var/lib/jenkins/workspace/Cucumber\ -\ Known\ Issues\ Build/ SITE=devel || exit 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:37:25.097

`command || exit 1`意思是“如果`command`失败，那么`exit 1`（即失败）

您刚刚说过，如果您的命令成功，您希望构建失败，因此您需要：
`command && exit 1 || exit 0`

如上，如果`command`成功，则构建失败，否则（如果`command`不成功），则构建成功

这是作业的控制台输出：

```
Started by upstream project "Cucumber - Devel Parent Build" build number 58
originally caused by: 
Started by timer
Xvfb starting$ /usr/bin/Xvfb :75 -screen 0 1024x768x24 -fbdir /var/lib/jenkins/2013-01-25_22-24-203386303931627225842xvfb
Building remotely on dev548 in workspace /var/lib/jenkins/workspace/Cucumber - Known Issues Build
Checkout:Cucumber - Known Issues Build / /var/lib/jenkins/workspace/Cucumber - Known Issues Build - hudson.remoting.Channel@322535f5:dev548
Using strategy: Default
Last Built Revision: Revision f48428cc3128a0d6369ea99bbdbdf419bc29b173 (Cucumber/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from git@testdrivesite.beanstalkapp.com:/cucumber.git
Commencing build of Revision dad2f8792ec364e79dd76840f787d5e72676b03f (Cucumber/master)
Checking out Revision dad2f8792ec364e79dd76840f787d5e72676b03f (Cucumber/master)
Deleting old artifacts from #137
[Cucumber - Known Issues Build] $ /bin/bash /tmp/hudson3196742906607332265.sh
Using the wip profile...
Xvfb stopping
Archiving artifacts
[CucumberReportPublisher] Compiling Cucumber Html Reports ...
[CucumberReportPublisher] detected this build is running on a slave 
[CucumberReportPublisher] copying json from: file:/var/lib/jenkins/workspace/Cucumber%20-%20Known%20Issues%20Build/to reports directory: file:/var/lib/jenkins/jobs/Cucumber%20-%20Known%20Issues%20Build/builds/2013-01-25_22-24-20/cucumber-html-reports/
[CucumberReportPublisher] Generating HTML reports
Build step 'Publish cucumber results as a report' marked build as failure
Notifying upstream projects of job completion
Finished: FAILURE 
```

这是我的配置中的构建步骤：

```
#!/bin/bash
source /usr/local/rvm/environments/default
/usr/local/rvm/gems/ruby-1.9.2-p320/bin/cucumber --profile wip --format json -o cucumber.json /var/lib/jenkins/workspace/Cucumber\ -\ Known\ Issues\ Build/ SITE=devel && exit 1 || exit 0 
```

# authentication - Nginx 身份验证，本地网络上的身份验证除外

> ID：14505799
> 
> 赞同：7
> 
> 时间：2013-01-24T16:13:50.150
> 
> 标签：authentication, nginx, basic-authentication

来自 apache2 的一个功能我无法实现；仅需要对外部访问进行身份验证，但对我的本地网络上的用户进行免费访问。任何想法如何轻松处理这种情况？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T16:15:04.570

*我已经删除了我之前的答案，并想建议我在下面提供的解决方案*

我做了一些搜索，找到了解决您问题的方法 -**在您使用`auth_basic`指令的代码中，进行以下更改**：

```
satisfy    any;
allow      10.0.0.1/8;   // give access for all internal request
deny       all;
auth_basic "....";        // your auth_basic code goes here
auth_basic_user_file ...; // your auth_basic_user_file goes here 
```

这个怎么运作？`satisfy`指令意味着必须通过下一个访问规则`any`或`all`从下一个访问规则来授予对资源的访问权限。您可以在此处找到更多详细信息：[满足](http://wiki.nginx.org/HttpCoreModule#satisfy)

这应该完全适合您的问题；）

# php - SoapClient PHP 返回错误

> ID：14505811
> 
> 赞同：1
> 
> 时间：2013-01-24T16:14:08.933
> 
> 标签：php, soap

我想获得一个简单的 SOAP 调用以在 php 中工作，但我不知道出了什么问题。这是我第一次使用肥皂所以请温柔:)

当我像这样手动拨打电话时，一切正常

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
<soapenv:Header>
  <tem:AuthenticationHeader>
     <!--Optional:-->
     <tem:UserName>****</tem:UserName>
     <!--Optional:-->
     <tem:Password>***</tem:Password>
  </tem:AuthenticationHeader>
</soapenv:Header>
<soapenv:Body>
 <tem:SignUp>
     <!--Optional:-->
     <tem:email>test@test.se</tem:email>
     <!--Optional:-->
     <tem:password>password</tem:password>
  </tem:SignUp>
</soapenv:Body>
</soapenv:Envelope> 
```

但是当我在 php 中执行此操作时，我得到“函数（“SignUp”）不是此服务的有效方法”

```
try {
    $soap_client = new SoapClient("http://url.com/Service.asmx?WSDL");
    $soapHeader = array('UserName' => '*****','Password' => '***');
    // Soap Header initialization
    $header = new SOAPHeader('http://tempuri.org/', 'AuthenticationHeader', $soapHeader);        
    // add the Header to the Soap Client before request
    $soap_client->__setSoapHeaders($header); 
    $args  = array('email'=>'tetsing@pp.se','password' =>'tetsing');
    $user = $soap_client->SignUp($args);
    print_r($user);

} catch (Exception $e) {
    print_r($e);
} 
```

编辑1：添加了 WSDL

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://tempuri.org/">
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
    <s:element name="AuthenticationHeader" type="tns:AuthenticationHeader"/>
    <s:complexType name="AuthenticationHeader">...</s:complexType>
    <s:element name="SignUp">
      <s:complexType>
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="1" name="email" type="s:string"/>
          <s:element minOccurs="0" maxOccurs="1" name="password" type="s:string"/>
        </s:sequence>
      </s:complexType>
     </s:element> 
```

编辑2：

编辑 3：getFunctions 提供 med

```
 array(18) {
  [0]=>
  string(80) "GetGameProgressDataResponse GetGameProgressData(GetGameProgressData $parameters)"
  [1]=>
  string(101) "GetGameParticipantPicturesResponse GetGameParticipantPictures(GetGameParticipantPictures $parameters)"
  [2]=>
  string(41) "SignUpResponse SignUp(SignUp $parameters)"
  [3]=>
  string(38) "LoginResponse Login(Login $parameters)"
  [4]=>
  string(53) "CreateGameResponse CreateGame(CreateGame $parameters)"
  [5]=>
  string(62) "GetActivitiesResponse GetActivities(GetActivities $parameters)"
  [6]=>
  string(62) "SetActivitiesResponse SetActivities(SetActivities $parameters)"
  [7]=>
  string(68) "GetParticipantsResponse GetParticipants(GetParticipants $parameters)"
  [8]=>
  string(68) "SetParticipantsResponse SetParticipants(SetParticipants $parameters)"
  [9]=>
  string(80) "GetGameProgressDataResponse GetGameProgressData(GetGameProgressData $parameters)"
  [10]=>
  string(101) "GetGameParticipantPicturesResponse GetGameParticipantPictures(GetGameParticipantPictures $parameters)"
  [11]=>
  string(41) "SignUpResponse SignUp(SignUp $parameters)"
  [12]=>
  string(38) "LoginResponse Login(Login $parameters)"
  [13]=>
  string(53) "CreateGameResponse CreateGame(CreateGame $parameters)"
  [14]=>
  string(62) "GetActivitiesResponse GetActivities(GetActivities $parameters)"
  [15]=>
  string(62) "SetActivitiesResponse SetActivities(SetActivities $parameters)"
  [16]=>
  string(68) "GetParticipantsResponse GetParticipants(GetParticipants $parameters)"
  [17]=>
  string(68) "SetParticipantsResponse SetParticipants(SetParticipants $parameters)"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:37:01.323

代码很好，这是服务器问题，他们修复了。

# url - how to get textbox value and put it in the URL?

> ID：14505814
> 
> 赞同：0
> 
> 时间：2013-01-24T16:14:19.073
> 
> 标签：url, web

![enter image description here](../Images/e006a36ebc713ee6c15520cb4b641957.png)

I'm using javascript for my codes: I have this sample screenshot of my website, my problem is I don't know how to get the value (coordinates) of the text box and put it in the URL. I tried this code ' **window. location = window.location + '?loc=' + document.getElementById("latlng").value;** " and its adding the value in the URL but it keeps on refreshing/loading my page, what seems to be the problem? please help me. than you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:19:27.020

设置`window.location`将强制页面重新加载。

要在不重新加载整页的情况下更改地图上的图钉位置，您需要使用[Google Maps API](https://developers.google.com/maps/documentation/javascript/)。

# c# - How to insert image into database and display it in gidview

> ID：14505816
> 
> 赞同：0
> 
> 时间：2013-01-24T16:14:22.087
> 
> 标签：c#, asp.net

I having problem on saving image into my database. I don't know how to insert or store image into my database and display in my gridview.

Here's my design of my table:

![enter image description here](../Images/6aca6b712fc532508a8c1110325e3278.png)

In my web method :

```
[WebMethod(EnableSession = true)]
public string sell_item(string name, Image photo, string description)
{
    SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=Bidding;Integrated Security=True");
    con.Open();
    SqlCommand cmd = new SqlCommand("UPDATE login SET name = @name, photo = @photo, description = @description WHERE username=@username", con);

    cmd.Parameters.AddWithValue("@name", name);
    cmd.Parameters.AddWithValue("@photo", photo);
    cmd.Parameters.AddWithValue("@description", description);

    cmd.ExecuteNonQuery();
    con.Close();
    return "Product has been upload successfully!";
} 
```

My code in web application which call the web service:

I using FileUpload button to choose my image file.

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = Convert.ToString(a.sell_item(Convert.ToString(TextBoxName.Text), Convert.ToString(FileUploadPhoto.FileName), Convert.ToString(TextBoxDescription.Text)));

    Label1.Visible = true;
    if (Label1.Visible == true)
    {
        MessageBox.Show("Item has been uploaded successfully!", "Success", MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1, MessageBoxOptions.DefaultDesktopOnly);
        Response.Redirect("Menu page.aspx");
    }
} 
```

In my gridview I have set the properties : ![enter image description here](../Images/6aa05c6dc9fedd692e2d98d17f4db6fd.png)

The image wouldn't display in the gridview. I'm still new to c#. Anyone can help me? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:07:34.230

如果图像未正确保存到数据库，请尝试使用字节数组保存：

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (fileUploadPhoto.HasFile)
    {
        byte[] imageBytes = new byte[fileUploadPhoto.PostedFile.InputStream.Length + 1];
        fileUploadPhoto.PostedFile.InputStream.Read(imageBytes, 0, imageBytes.Length);
    }

    Label1.Text = Convert.ToString(a.sell_item(Convert.ToString(TextBoxName.Text), imageBytes, Convert.ToString(TextBoxDescription.Text)));

    Label1.Visible = true;
    if (Label1.Visible == true)
    {
        MessageBox.Show("Item has been uploaded successfully!", "Success", MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1, MessageBoxOptions.DefaultDesktopOnly);
        Response.Redirect("Menu page.aspx");
    }
} 
```

您还需要更新您的照片参数以获取字节数组：

```
[WebMethod(EnableSession = true)]
public string sell_item(string name, byte[] photo, string description)
{
    ...
} 
```

至于显示——我使用了一个通用处理程序（.ashx）来处理图像：

```
public class ImageHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        //Retrieve the image using whatever method and identifier you used
        byte[] imageData = get_item(context.Request["ID"]);

        if (imageData.Count > 0)
        {
            context.Response.OutputStream.Write(imageData, 0, imageData.Length);
            context.Response.ContentType = "image/JPEG";
        }
    }
} 
```

如果您绑定数据源，则可以将图像放在网格视图中进行显示：

```
<ItemTemplate>
    <asp:Image ID="Image1" runat="server"
        ImageUrl='<%# "ImageHandler.ashx?ID=" + Eval("ID")%>'/>
</ItemTemplate> 
```

或者，如果您熟悉 jQuery，您可以这样设置占位符图像源：

```
<img id="Image1" />

<script type="text/javascript">
    $("#Image1").attr("src", "ImageHandler.ashx?ID=" + identifier);
</script> 
```

各种文章中还有更多信息：

[http://csharpdotnetfreak.blogspot.com/2009/07/display-images-gridview-from-database.html](http://csharpdotnetfreak.blogspot.com/2009/07/display-images-gridview-from-database.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:50:47.417

您可能想查看[这篇](https://stackoverflow.com/questions/3548401/how-to-save-image-in-database-using-c-sharp)关于如何将图像保存到数据库的文章。有关您尝试保存图像的数据库/列类型的更多信息也会有所帮助。也可能是gridview的代码。

编辑： [这篇文章有一些关于存储在图像列中的有用代码。](https://stackoverflow.com/questions/744589/how-do-you-store-a-picture-in-an-image-column/744603#744603)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:34:23.173

我不建议将图像直接存储在数据库中，而是将它们存储在文件系统中并仅保存链接。否则，在 SQLServer 2008 中使用 FILESTREAM 属性。对于小图像，使用 varbinary 类型。

# asp.net - Custom data annotations with webservice in ASP.NET 3.5

> ID：14505826
> 
> 赞同：1
> 
> 时间：2013-01-24T16:14:43.563
> 
> 标签：asp.net, web-services, data-annotations, asp.net-3.5

I can't create a custom ValidationAttribute in asp.net 3.5 webservice. Everything seems ok, it compiles and it runs, it just doesn't enter the custom attribute i created. Msdn documentation ([http://msdn.microsoft.com/en-us/library/cc668224(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cc668224(v=vs.90).aspx)) states that I have to override the IsValid method to get it validated, still it doesn't enter the IsValid. I guess there's a configuration problem and i can't see any other flaw in the code atm.

So, here's the webservice code

```
 [WebMethod]
    [Authorize("me")]
    public string test()
    {
        return "Here I am";
    } 
```

and this is the ValidationAttribute

public class AuthorizeAttribute : ValidationAttribute { public string me { get; private set; } public AuthorizeAttribute(string me) { if (string.IsNullOrEmpty(me)) { throw new ArgumentNullException("Not me!"); }

```
 this.me = me;
    }

    public override bool IsValid(object value)
    {
        bool result = false;
        return result;
    }

} 
```

I would say that before the webmethod executes it goes into the Constructor(at least that!) and then into the IsValid method, but it doesn't.

Can you say where's the error?

Thanks

/Sball

Aaaaand seems i cannot format this question properly. Sorry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:06:18.450

下面是我项目中的代码，看看它是否对你有帮助，因为它的工作和实施

```
protected override ValidationResult IsValid(object value,
                                            ValidationContext validationContext)
{
    if (value == null || string.IsNullOrWhiteSpace(value.ToString()))
    {
        var property = validationContext.ObjectInstance.GetType()
            .GetProperty(_fieldName);

        var propertyValue = property.GetValue(validationContext.ObjectInstance, null);

        if (Validate(propertyValue))
        {
            return new ValidationResult(
                string.Format(ErrorMessageString, validationContext.DisplayName));
        }
    }
    return ValidationResult.Success;
} 
```

# c# - 使用 C# 连接到手持式 RFID 阅读器时出现异常

> ID：14505827
> 
> 赞同：1
> 
> 时间：2013-01-24T16:14:46.070
> 
> 标签：c#, compact-framework, rfid, handheld, motorola-emdk

我正在使用 EMDK v2.3 在 Visual Studio 2008 中使用 C# 开发应用程序，以使用集成在带有 Windows Mobile 6.1 的 HandHeld MC9090G 中的 RFID 阅读器读取标签。我已经阅读了执行此任务的文档，但是当我运行代码时，它会引发我找不到原因的异常。我正在使用 Symbol.RFID3 组件。

当我使用

1) 抛出异常：“OperationFailureException”

```
string hostname = "localhost";//localhost because the RFID reader is included in the HandHeld
RFIDReader rfid3 = new RFIDReader(hostname, 0, 0);
rfid3.Connect(); // line that throws the Exception 
```

2) 抛出异常：“InvalidUsageException”

```
string hostname = "localhost";//localhost because the RFID reader is included in the HandHeld
RFIDReader rfid3 = new RFIDReader(hostname, 5084, 10);
rfid3.Connect(); //line that throws the Exception" 
```

关于原因的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:29:48.653

第一个是错误的，因为您没有连接到端口 0。使用第二个。我建议尝试 127.0.0.1 而不是 localhost。您还应该仔细检查 RFID 组件正在侦听的端口确实是 5084。您当前指定的超时时间太短了。尝试 10000 毫秒，而不是 10 毫秒。最后，RFID 组件需要运行。

# asp.net - 使用 ASCII 编码 (ASP.NET) 加密与使用 UTF-8 编码 (Silverlight) 加密

> ID：14505830
> 
> 赞同：0
> 
> 时间：2013-01-24T16:14:52.087
> 
> 标签：asp.net, silverlight, encryption, utf-8, ascii

我目前有一组 AES 加密/解密函数，我在 ASP.NET 中使用它们来满足我的所有加密需求。然后，我将应用程序中的这些数据来回传递给另一个我无法控制的安全应用程序。一切都以字符串的形式发送，并且字符串以 ASCII 编码与这些应用程序相互发送。

现在我正在使用一个预先存在的 Silverlight 应用程序，我需要在其中向数据添加加密/解密功能，但我仍将发送到使用 ASCII 编码的另一个安全应用程序（我无法控制）。由于 Silverlight 使用 UTF-8，这似乎是个问题。我对编码有足够的了解，知道 ASCII 和 UTF-8 是如何相似和不同的（0 到 127 都是相同的，但 UTF-8 有更多字符）。如果我要向/从使用 ASCII 的应用程序发送/接收数据，那么在我的端使用 UTF-8 加密/解密是否有任何风险？（我的应用在加密之前不会使用任何非标准字符）

另外，我应该：

1.  在 Silverlight 中使用具有我的 ASCII 加密/解密功能的服务参考？或者
2.  在 Silverlight 应用程序中以 UTF-8 加密/解密，不需要服务参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:40:19.490

虽然从 i18n 的角度来看这很糟糕，但如果可以合理地确定您的输入只会在正常的 ascii 字符范围内，那么您应该没有问题。

您可以添加[此 SO 答案](https://stackoverflow.com/a/4022893/1904979)中的代码，为您提供一些额外的保护——将非 ASCII 安全的 UTF-8 字符转换为“？”，返回一个字节数组，您可以将其输入加密方法。

# css - Chrome 不支持 box-sizing？

> ID：14505832
> 
> 赞同：6
> 
> 时间：2013-01-24T16:14:59.363
> 
> 标签：css

我在一个网站上工作，我使用 box sizing 方法来阻止 div 在添加填充时破坏大小。

我有以下...

```
-moz-box-sizing:padding-box;
box-sizing:padding-box; 
-webkit-box-sizing:padding-box; 
```

有人知道关于 chrome 支持这个的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T16:17:42.637

`Padding-box`chrome 目前不支持

来源：[https ://developer.mozilla.org/en-US/docs/CSS/box-sizing#Browser_Compatibility](https://developer.mozilla.org/en-US/docs/CSS/box-sizing#Browser_Compatibility)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:23:17.457

您可以使用 `box-sizing: border-box;`.`box-sizing:padding-box;`

`padding-box`是实验性的，在元素的高度和宽度中包括填充大小，但不包括边框或边距。

`border-box;`已经存在了一段时间，它在元素的高度和宽度中包括填充大小和边框，但不包括边距。所有主要浏览器都支持它，但在 Firefox 中确实需要前缀。例子：

```
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)。

# javascript - Dust.js 中的动态键名

> ID：14505834
> 
> 赞同：2
> 
> 时间：2013-01-24T16:14:59.587
> 
> 标签：javascript, dust.js

我正在寻找一种在我的灰尘模板文件中调用动态键的方法，例如

```
<table> 
{#array1}
<tr>
    {#array2}
    <td>{#array1}{object.#dynAttrName#}{/array1}</td>
    {/array2}

{/array1}
</table> 
```

我想访问类似“object.attribute1”的东西，其中 1 是 {array1} 中当前对象的 id。(array1[n].id)

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-17T09:30:13.873

可以通过向上下文对象添加辅助函数来完成：

**上下文对象：**

```
{
   get: function (chunk, context, bodies, params) {
       var obj = dust.helpers.tap(params.ofObj, chunk, context);
       var prop = dust.helpers.tap(params.prop, chunk, context);
       return chunk.write(obj[prop]);
   },

   a: {
       b: "bbb"
   }
} 
```

**模板**

```
{#get prop="b" ofObj=a/} 
```

[你可以在linkedin灰尘测试仪](http://linkedin.github.io/dustjs/test/test.html)中试试这个

我相信也可以定义一个全局除尘助手。

# c# - C# Create an Object and Change Value

> ID：14505838
> 
> 赞同：3
> 
> 时间：2013-01-24T16:15:17.407
> 
> 标签：c#

I am having a problem creating an object and setting/getting the values. The purpose of this is to return data from a Model to a Controller.

**Disclaimer: Im new to C#**

Can anyone show me the right way to do it?

I have tried these ways but I keep getting the error:

```
object o = new { test = "cat" };
o.test = "dog";

Object o = new { test = "cat" };
o.test = "dog";

object o = new Object();
o.test = "dog";

// I also tried
object o = new Object();
o["test"] = "dog"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:16:44.113

您需要在 C# 中实例化一个类。在 C# 中不可能突然创建对象（如在 JavaScript 中）。

例如，该类将如下所示：

```
public class MyClass {
  public string test { get; set; }
}

MyClass o = new MyClass { test = "cat" }; 
```

**更新：**从 .NET 3.5 开始，您实际上可以创建如下对象：

```
var o = new { test = "cat" };
Console.WriteLine(o.test); 
```

但是，创建它们后，您将无法添加或删除属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T16:24:04.013

JREAM，您对 C# 对象的基本前提和理解可能有点缺陷，这就是造成您困惑的原因。

“在 C# 的统一类型系统中，所有类型，预定义的和用户定义的，引用类型和值类型，都直接或间接地继承自 Object。您可以将任何类型的值赋给 object 类型的变量。” [http://msdn.microsoft.com/en-us/library/9kkx3h3c%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/9kkx3h3c%28v=vs.110%29.aspx)

话虽如此，最好尽可能使用定义的类型而不是对象。在您的情况下，您的对象应该是真正的类，然后依次生成您可以使用的引用类型。

```
public class O
{
    public string test { get; set; }
}

var newO = new O() { test = "cat" };
newO = "dog"; 
```

在这里，我们创建了一个新类“O”。我们在这个类中有一个属性。然后我们可以实例化该类并访问其中的属性。一旦它被实例化，我们就可以尽可能多地访问该属性并为其重新分配新值。希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T16:33:08.793

如果您正在寻找 a `Key,Value pair`，您可以轻松使用`Dictionary`;

```
using System.Collections.Generic;

Dictionary<string, string> kv = new Dictionary<string, string>() {
 {"Key1","Value1"}, {"Key2","Value2"}, {"Key3","Value3"}
}; 
```

并检索为；

```
string Val1 = kv["Key1"]; 
```

并将键、值添加为；

```
kv.Add("Key4","Value4"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T16:17:04.103

An`object`没有这些属性或字段。要访问这些字段，请创建变量`dynamic`.

```
dynamic o = new { test = "cat" };
Console.WriteLine(o.test ); 
```

哦，顺便说一句`o["test"]`，这行不通。`o`它不是 JavaScript 或 C# 字典中的 assoc 数组。它是一个匿名对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T16:21:20.873

看起来您要创建的是[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)。匿名类型很棒，因为它们提供了一种快速便捷的方式来创建对象，而无需定义类型。

尝试这个：

```
var o = new { test = "cat" }; 
```

此时，您将能够访问匿名类型的属性，如下所示：

```
o.test = "dog";
MessageBox.Show(o.test);  //shows "dog" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T16:20:03.760

通常，您创建一个类并初始化该类的一个实例；但无论如何以下工作。

请注意，即使`test`没有声明，它仍然会构建；但是您在运行时会遇到异常。

```
dynamic temp = ((dynamic)o).test; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T16:22:25.803

```
new { test = "cat" }; 
```

您正在尝试创建一个具有`test`属性的匿名对象，这似乎不是您想要的。如果要初始化自定义属性，请使用下一个语法

```
var customer = new Customer {Name = "Ilya"}; 
```

这将由编译器翻译成

```
var customer = new Customer();
customer.Name = "Ilya"; 
```

请注意，您应该定义您的自定义类，例如

```
public class Customer 
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-24T16:22:26.973

如果你想要一个字符串到一个值的任意映射，那么你应该使用`Dictionary`.

```
Dictionary<string, string> lookup = new Dictionary<string, string>();
lookup.Add("test", "dog");
//add other pairs.

string value = lookup["test"]; //value will be "dog" 
```

该代码`new { test = "cat" };`创建一个具有一个属性 ( `test`) 和一个设置值的新匿名类型的实例。C# 中的匿名类型是不可变的，因此一旦创建，您将无法将该属性设置为其他任何内容。

您无法正确访问它的原因是您将其存储在`object`. 由于`object`没有任何属性，编译器“丢失”了对象具有该属性的知识。您可以使用`var`来确保变量是正确的类型（这是一个匿名类型），这将允许您使用属性：

```
var obj = new { test = "cat" };
string value = obj.test; 
```

# php - Keep value in form after submitting PHP

> ID：14505840
> 
> 赞同：1
> 
> 时间：2013-01-24T16:15:23.493
> 
> 标签：php, forms

I'm calling these functions from a controller to get the form and the values from the form. My question is, how can I keep the values in the form after a submit fails? I've tried something like this:

```
 <input type="text" name="myField1" value="<?php echo isset($_POST['myField1']) ? $_POST['myField1'] : '' ?>" /> 
```

but can't get it to work.

```
private $m_username = 'username';
private $m_password = 'password';
private $m_registerButton = 'registerButton';

public function RegisterUserBox(){
    return
    '<form method="post">
            <fieldset>
                Username: <input type="text" name="'.$this->m_username.'" />
                Password: <input type="password" name="'.$this->m_password.'" />
                <input type="submit" value="Register" name="'.$this->m_registerButton.'"/>
            </fieldset>
     </form>';

}

public function GetUsername(){
    if(isset($_POST[$this->m_username])){
        return $_POST[$this->m_username];
    }
}

public function GetPassword(){
    if (isset($_POST[$this->m_password])){
        return $_POST[$this->m_password];
    }
}

public function TriedToRegister(){
    if (isset($_POST[$this->m_registerButton])){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:30:38.453

`[edit: run this on localhost]`

`autocomplete`不适用于所有浏览器；而且，这只是一个提示，所以cookies是唯一的选择。下面的解决方案可以正常工作，但是**如果其他用户为这个流行的请求提供替代方式，那就太好了：** `Keep value in form after submitting` .

```
<html>
  <head>
    <script>
        function setCookie(c_name, value, exdays) {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
            document.cookie = c_name + "=" + c_value;
        }

        function getCookie(c_name) {
            var i, x, y, ARRcookies = document.cookie.split(";");
            for (i = 0; i < ARRcookies.length; i++) {
                x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
                y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
                x = x.replace(/^\s+|\s+$/g, "");
                if (x == c_name) {
                    return unescape(y);
                }
            }
        }

        function store() {
            var inputs, index;

            inputs = document.getElementsByTagName('input');
            for (index = 0; index < inputs.length - 1; ++index) {
                setCookie(inputs[index].name,inputs[index].value,1);
            }
            return false;
        }
    </script>
  </head>

  <body>
    <form method="post" action="back.php" onsubmit="store()" >
      firstname<input type="text" name="firstname">
      lastname<input type="text" name="lastname">
      emailid<input type="text" name="emailid">
      <input type="submit" >
    </form>
    <script>
        (function load(){
            var inputs, index;

            inputs = document.getElementsByTagName('input');
            for (index = 0; index < inputs.length - 1; ++index) {
                inputs[index].value = getCookie(inputs[index].name);
            }
            return false;
        })();
    </script>
  </body>
</html> 
```

![图像-1](../Images/fdbee54f3368b24d2995e9d3ac726b3c.png) ![图像-2](../Images/e106f55d3c89736b87edcab284d2cef8.png) ![图像-3](../Images/48f6a304871b3fbbc8765b852afe5d3c.png) ![图像 4](../Images/60a30876657af815bb4472531ccd8e53.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:44:37.713

在您的表单之前，实例化将接收`$_POST`数据的对象

```
$userbox = new Userbox; 
```

然后处理`$_POST`数据，如果有的话：

```
if(isset($_POST['submit']) && $_POST['submit'] === 'userboxsubmit'){
  $userbox->process_post(); 
} 
```

然后输出表格：

```
<input type="text" name="myField1" value="<?php echo $userbox->myField1; ?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:23:39.047

```
<html>
  <body>

    <form method="post" action="back.php" autocomplete="on" >
      <input type="text" autocomplete="on" >
      <input type="submit" >
    </form>

  </body>
</html> 
```

# jquery - JQuery可在表格行的一部分上拖动

> ID：14505841
> 
> 赞同：0
> 
> 时间：2013-01-24T16:15:25.147
> 
> 标签：jquery, draggable

我有一个表，我想用 JQuery 使行可拖动（用户可以选择一行并将行拖到我的 UI 上的另一个元素，这会将行的数据放到该元素中）。我将表格的每一行（“tr”元素）设置为“draggableRow”类，并为所有这些创建了适当的功能，以适用于该类的元素（例如，为该类设置一个可拖动函数）。

但是，我不希望用户能够从第一列（即行中的第一个“td”）拖动。一种选择是使“td”元素可拖动，但由于填充问题，这感觉不那么清晰。表格行中有不可拖动的死区。

因此，一种替代方法是将可拖动的“tr”保持在“tr”上，但以某种方式确定用户单击了行中的第一个“td”（例如，通过 $(event.target).closest("td")辅助函数），然后停止拖动。但是，我不确定如何停止拖动。

任何帮助，将不胜感激。最好的办法是找到某种方法使除第一个“td”之外的整行可拖动（包括表格单元格之间的填充）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:08:42.137

“取消”选项似乎是您正在寻找的：[http ://api.jqueryui.com/draggable/#option-cancel](http://api.jqueryui.com/draggable/#option-cancel)

> 防止从指定元素开始拖动。

```
 $('tr').draggable({
        helper: 'clone',
        cancel: 'td:first-child'
    }); 
```

编辑：我给你做了一个例子 jsfiddle：http: [//jsfiddle.net/Emsxg/1/](http://jsfiddle.net/Emsxg/1/)

# css - MVC jquery mobile not taking full page width on load

> ID：14505842
> 
> 赞同：0
> 
> 时间：2013-01-24T16:15:27.127
> 
> 标签：css, html, jquery-mobile, razor, asp.net-mvc-4

I'm new to MVC 4 and jquery mobile and have been developing a mobile optimized site. The problem I am running into is when I have a mobile device horizontally, on page load the page will only take up about 3/4 of the screen.

If I rotate the screen to vertical and then back to horizontal, it then takes up the page width horizontally. This happens frequently as I navigate through my site.

I have the following meta tag on my pages:

```
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, initial-scale=1.0, user-scalable=yes"> 
```

I have searched as best I can for answers, but I'm having trouble coming up with search termsto even find this problem elsewhere. Has anyone else run into this issue? Using iPad 2 with IOS 6.0.1\. I apologize ahead of time if this is an easy fix or if it has been posted before.

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:00:03.043

在玩了一天之后，我终于弄明白了。我的元标记必须被编辑：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; target-densityDpi=device-dpi" /> 
```

我取出了用户可扩展的，因为我发现在 Android 中，如果那部分内容在其中，它会忽略元标记。

# jquery - jQuery Mobile 为 web 移动刷新一个 div

> ID：14505844
> 
> 赞同：1
> 
> 时间：2013-01-24T16:15:35.723
> 
> 标签：jquery, mobile, refresh

如何刷新jqm中的div？我的问题是我在切换显示/隐藏上有一个 div(#menu)。这很好用，但是当我浏览页面时，切换脚本被禁用。我必须刷新它所在的页面或禁用所有页面的 ajax。

我已经阅读了类似问题的帖子，并尝试了 listview('refresh') 之类的解决方案，但似乎没有任何效果。

这是我的代码。非常感谢。

```
<div data-role="page" id="page1">

<div data-role="header">
<h1>Page 1</h1>
</div>

<div data-role="content">

<!-- TOGGLE --> 
<div data-role="navbar" data-grid="a" id="menu">
<ul>
<li><a href="#">News</a></li>
<li><a href="#">Items</a></li>
</ul>
</div>
<!-- /TOGGLE --> 

<a href="#" data-role="button" id="nav">open menu</a>

</div>

<div data-role="footer">
footer content
</div>

<script>
$('#nav').click(function() {
$('#menu').toggle(); 
});
</script>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:59:54.190

只需使用`classes`而不是`ids`：

```
$('.nav').click(function() {
  $('.menu').toggle(); 
}); 
```

并把`<script>..</script>` **最后**一个`</div>` [http://jsfiddle.net/ouadie/CuGkW/1/](http://jsfiddle.net/ouadie/CuGkW/1/)

# python - 处理 Scrapy Div 类

> ID：14505847
> 
> 赞同：5
> 
> 时间：2013-01-24T16:15:36.957
> 
> 标签：python, scrapy

我是 Scrapy 的新手，也是真正的 python 新手。我正在尝试编写一个抓取工具，它将提取文章标题、链接和文章描述，几乎就像网页中的 RSS 提要一样，以帮助我完成论文。我编写了以下刮板，当我运行它并将其导出为 .txt 时，它会返回空白。我相信我需要添加一个项目加载器，但我并不积极。

项目.py

```
from scrapy.item import Item, Field

class NorthAfricaItem(Item):
    title = Field()
    link = Field()
    desc = Field()
    pass 
```

蜘蛛

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from northafricatutorial.items import NorthAfricaItem

class NorthAfricaItem(BaseSpider):
   name = "northafrica"
   allowed_domains = ["http://www.north-africa.com/"]
   start_urls = [
       "http://www.north-africa.com/naj_news/news_na/index.1.html",
   ]

 def parse(self, response):
 hxs = HtmlXPathSelector(response)
 sites = hxs.select('//ul/li')
 items = []
 for site in sites:
     item = NorthAfricaItem()
     item['title'] = site.select('a/text()').extract()
     item['link'] = site.select('a/@href').extract()
     item['desc'] = site.select('text()').extract()
     items.append(item)
 return items 
```

**更新**

感谢 Talvalin 的帮助，另外还有一些混乱，我能够解决问题。我正在使用我在网上找到的股票脚本。然而，一旦我使用了 shell，我就能够找到正确的标签来获得我需要的东西。我最终得到：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from northafrica.items import NorthAfricaItem

class NorthAfricaSpider(BaseSpider):
   name = "northafrica"
   allowed_domains = ["http://www.north-africa.com/"]
   start_urls = [
       "http://www.north-africa.com/naj_news/news_na/index.1.html",
   ]

   def parse(self, response):
       hxs = HtmlXPathSelector(response)
       sites = hxs.select('//ul/li')
       items = []
       for site in sites:
           item = NorthAfricaItem()
           item['title'] = site.select('//div[@class="short_holder"]    /h2/a/text()').extract()
       item['link'] = site.select('//div[@class="short_holder"]/h2/a/@href').extract()
       item['desc'] = site.select('//span[@class="summary"]/text()').extract()
       items.append(item)
   return items 
```

如果有人在这里看到任何我做错了的东西，请告诉我......但它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:55:36.927

关于这段代码需要注意的是它运行时出错。尝试通过命令行运行蜘蛛，你会看到类似的内容：

```
 exceptions.TypeError: 'NorthAfricaItem' object does not support item assignment

2013-01-24 16:43:35+0000 [northafrica] INFO: Closing spider (finished) 
```

发生此错误的原因是因为您为您的蜘蛛和您的项目类提供了相同的名称：NorthAfricaItem

在您的蜘蛛代码中，当您创建 NorthAfricaItem 的实例以分配事物（如标题、链接和 desc）时，蜘蛛版本优先于项目版本。由于 NorthAfricaItem 的蜘蛛版本实际上不是 Item 类型，因此项目分配失败。

要解决此问题，请将您的蜘蛛类重命名为 NorthAfricaSpider 之类的名称，问题应该会得到解决。

# php - CGridView 及相关表格

> ID：14505848
> 
> 赞同：0
> 
> 时间：2013-01-24T16:15:37.760
> 
> 标签：php, yii

我正在尝试列出`CGridView`指定用户的帖子，但出现错误。这样做的正确方法是什么？

控制器.php

```
public function actionListPosts($id)
{
    $criteria = new CDbCriteria;
    $criteria->with=array('posts');
    $criteria->condition='t.id=:user_id';
    $criteria->params=array(':user_id'=>$id);

    $dataProvider=new CActiveDataProvider('Users', array(
            'criteria' => $criteria
    ));

    $this->render('list',array(
        'dataProvider'=>$dataProvider,
    ));
} 
```

查看.php：

```
<?php $this->widget('zii.widgets.grid.CGridView',array(
    'id'=>'events-grid',
    'dataProvider'=>$dataProvider->posts,
    'columns'=>array(
        'id',
        'name',
    ),
)); ?> 
```

错误：

```
 Property "CActiveDataProvider.posts" is not defined. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:18:41.713

如果您还希望能够按此列进行搜索和排序，请尝试[http://www.mrsoundless.com/php/yii/searching-and-sorting-a-column-from-a-related-table-in -a-cgridview/](http://www.mrsoundless.com/php/yii/searching-and-sorting-a-column-from-a-related-table-in-a-cgridview/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:27:12.897

您必须将数据提供者用于`Post`模型而不是`User`模型

在控制器中

```
public function actionListPosts($id)
{
    $criteria = new CDbCriteria;
    $criteria->condition='t.user_id=:user_id';
    $criteria->params=array(':user_id'=>$id);

    $dataProvider=new CActiveDataProvider('Post', array(
            'criteria' => $criteria
    ));

    $this->render('list',array(
        'dataProvider'=>$dataProvider,
    ));
} 
```

并且在视野中

```
<?php $this->widget('zii.widgets.grid.CGridView',array(
    'id'=>'events-grid',
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        'id',
        'name',
    ),
)); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T13:45:12.197

在控制器动作中你可以写——

```
$dataProvider=new CActiveDataProvider('NameofPostTableAR',array(
    'criteria'=>array(
    'condition'=>'post_id='.$id,)));

 $this->render('list',array(
    'dataProvider'=>$dataProvider,
)); 
```

鉴于你可以写——

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'post-grid',
'dataProvider'=>$dataprovider,
'columns'=>array(
    'post_id',
    'post_name',
    array(
        'class'=>'CButtonColumn',
    ),
),
)); ?> 
```

在这里，我假设您的 Posts 表中的字段为 (post_id, post_name)

我希望它适用于你的情况..

# java - 与 CXF 2.4.10 相关的 Spring 初始化失败

> ID：14505849
> 
> 赞同：3
> 
> 时间：2013-01-24T16:15:44.490
> 
> 标签：java, web-services, spring, apache, cxf

我们有一个具有以下技术的工作系统

```
<spring-version>3.0.1.RELEASE</spring-version>
<quartz-version>1.5.2</quartz-version>
<axi2-version>1.5.4</axi2-version>
<cxf.version>2.2.12</cxf.version> 
```

但是在我尝试升级我们的依赖项后，出现了一些绑定问题，我在网上找不到任何答案，所以我正在寻求帮助。

我成功升级了spring和quartz，但是当我厌倦了升级cxf时，它变成了一场噩梦。

现在我们使用 Quartz 1.8.6 在 Spring 3.2.0.RELEASE 上运行，但我们不能高于 cxf 2.3.11，

当我第一次厌倦使用 cxf 2.7.2 时，我遇到了一些关于 XmlSchema 的冲突（方法未找到异常），我通过从 axis2 依赖项（XmlSchema 1.4.3）中排除旧版本并导入最新版本 xmlschema-core 2.0.3 和问题解决了。

但是我开始出现以下异常，这是在高于 cxf 2.3.11 之后立即发生的。

```
 Oca 24, 2013 5:36:38 PM org.apache.catalina.core.StandardContext listenerStart
    SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: java.lang.NullPointerException
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4323)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4780)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:785)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:763)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:557)
        at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1124)
        at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1047)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:542)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1390)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:355)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:313)
        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:293)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:996)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:771)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:988)
        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:275)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:427)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:649)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:585)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at com.googlecode.t7mp.RunMojo.execute(RunMojo.java:52)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    Caused by: javax.xml.ws.WebServiceException: java.lang.NullPointerException
        at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:357)
        at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:246)
        at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:525)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1612)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1553)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
        ... 65 more
    Caused by: java.lang.NullPointerException
        at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createBindingInfo(AbstractWSDLBasedEndpointFactory.java:338)
        at org.apache.cxf.jaxws.JaxWsServerFactoryBean.createBindingInfo(JaxWsServerFactoryBean.java:181)
        at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpointInfo(AbstractWSDLBasedEndpointFactory.java:258)
        at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:143)
        at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:159)
        at org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:207)
        at org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:442)
        at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:329)
        ... 74 more

    Oca 24, 2013 5:36:38 PM org.apache.catalina.core.StandardContext startInternal
    SEVERE: Error listenerStart
    Oca 24, 2013 5:36:38 PM org.apache.catalina.core.StandardContext startInternal
    SEVERE: Context [/mpp] startup failed due to previous errors
    Oca 24, 2013 5:36:38 PM org.apache.catalina.core.ApplicationContext log
    INFO: Closing Spring root WebApplicationContext
    Oca 24, 2013 5:36:38 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
    SEVERE: The web application [/mpp] registered the JBDC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
    Oca 24, 2013 5:36:38 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
    SEVERE: The web application [/mpp] appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. 
```

我已经阅读了迁移文档，但找不到任何关于我的问题的答案。

这就是我缩短的 pom.xml 的样子

```
 <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring-version>3.2.0.RELEASE</spring-version>
        <cxf.version>2.6.0</cxf.version>
        <aspectjrt-version>1.6.2</aspectjrt-version>
        <aspectjweaver-version>1.5.0</aspectjweaver-version>
        <log4j-version>1.2.17</log4j-version>
    </properties>

    <dependencies>

        <!-- CXF Dependencies -->
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-api</artifactId>
            <version>${cxf.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>${cxf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-ws-security</artifactId>
            <version>${cxf.version}</version>
        </dependency>

        <!-- Spring Dependencies -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring-version}</version>
            <type>pom</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring-version}</version>
            <type>pom</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.ws.xmlschema</groupId>
            <artifactId>xmlschema-core</artifactId>
            <version>2.0.3</version>
        </dependency>
    </dependencies> 
```

这是我的网络服务接口

```
 @WebService(name="UserWSImplService", targetNamespace = "http://user.services.ws.fourplay.com.tr/")
    public interface UserWSIF 
```

这是我的网络服务实现

```
 @WebService(endpointInterface = "tr.com.fourplay.ws.services.user.UserWSIF")
    public class UserWSImpl implements UserWSIF 
```

这是我的配置 xml

```
 <bean id="userDBImpl" class="tr.com.fourplay.db.services.user.UserDBImpl" />
    <bean id="userSrv" class="tr.com.fourplay.ws.services.user.UserWSImpl" >
        <property name="dbImpl" ref="userDBImpl" />
    </bean>

    <jaxws:endpoint id="userService" implementor="#userSrv" address="/userService" >
    </jaxws:endpoint> 
```

这是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
             http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

        <display-name>Mobile Service Platform</display-name>

        <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>

        <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                classpath:application-context.xml
            </param-value>
        </context-param>

        <servlet>
            <servlet-name>CXFServlet</servlet-name>
            <display-name>CXF Servlet</display-name>
            <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>CXFServlet</servlet-name>
            <url-pattern>/*</url-pattern>
        </servlet-mapping>

    </web-app> 
```

任何帮助都将受到高度评价。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:14:28.130

[http://cxf.547215.n5.nabble.com/Spring-context-not-loading-when-upgrading-from-2-2-9-to-2-4-1-version-td4518167.html](http://cxf.547215.n5.nabble.com/Spring-context-not-loading-when-upgrading-from-2-2-9-to-2-4-1-version-td4518167.html)

问题与配置有关。

```
Hi,

Cxf bus refactor a lot since cxf 2.4.0.
In your spring configuration
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
is unnecessary
and you need change
<bean id="cxf" class="org.apache.cxf.bus.CXFBusImpl" />
to something like
<cxf:bus/>

Freeman 
```

# c++ - 非数组类型的“one-past-the-end”指针是 C++ 中的有效概念吗？

> ID：14505851
> 
> 赞同：21
> 
> 时间：2013-01-24T16:15:47.753
> 
> 标签：c++, pointers, pointer-arithmetic

C++ 标准 [sec 5.7] 说：

> 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；否则，行为未定义。

那么，我是否正确假设未定义其他类型的指针，而不是数组？

例如：

```
int a = 0;
vector<int> v(&a, (&a)+1); 
```

上面的代码片段编译并且工作得很好（使用 g++），但它有效吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-24T16:20:08.113

不，这是合法的。5.7(4) - 引用前的一段 - 说：“就这些运算符而言，指向非数组对象的指针的行为与指向长度为 one 的数组的第一个元素的指针相同，对象的类型为它的元素类型。”

# email - 从 Excel 宏创建 Thunderbird 电子邮件

> ID：14505852
> 
> 赞同：1
> 
> 时间：2013-01-24T16:15:53.140
> 
> 标签：email, vba, excel, thunderbird

我在 Excel 中编写了一个 VB 宏，它使用 MS Outlook 创建和发送电子邮件。

所以我创建一个`Outlook.Application`，然后创建一个`Outlook.Application.CreateItem(olMailItem)`.

这一切都非常有效:) 但现在我意识到我想要部署它的机器没有 Outlook，并且获得许可的 Outlook 副本不是一种选择。那么我怎样才能让它通过 Thunderbird 发送电子邮件呢？

我可以使用这个启动应用程序：

```
Dim RetVal
RetVal = Shell("C:\Program Files (x86)\Mozilla Thunderbird\thunderbird.exe", 1) 
```

但我不确定如何为它创建一个邮件项目。它不需要专门使用 Thunderbird，我只是选择它，因为它是一个免费的邮件客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-02T01:12:09.587

CDO不是一种选择吗？[http://www.rondebruin.nl/win/s1/cdo.htm](http://www.rondebruin.nl/win/s1/cdo.htm) - 悉达多溃败

```
Sub CDO_Mail_Small_Text()
    Dim iMsg As Object
    Dim iConf As Object
    Dim strbody As String
    '    Dim Flds As Variant

    Set iMsg = CreateObject("CDO.Message")
    Set iConf = CreateObject("CDO.Configuration")

    '    iConf.Load -1    ' CDO Source Defaults
    '    Set Flds = iConf.Fields
    '    With Flds
    '        .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
    '        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") _
    '                       = "Fill in your SMTP server here"
    '        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
    '        .Update
    '    End With

    strbody = "Hi there" & vbNewLine & vbNewLine & _
              "This is line 1" & vbNewLine & _
              "This is line 2" & vbNewLine & _
              "This is line 3" & vbNewLine & _
              "This is line 4"

    With iMsg
        Set .Configuration = iConf
        .To = ""
        .CC = ""
        .BCC = ""
        .From = ""
        .Subject = "New figures"
        .TextBody = strbody
        .Send
    End With

End Sub 
```

注意：如果您收到此错误：传输无法连接到服务器，请尝试将 SMTP 端口从 25 更改为 465

# java - 加载与自定义查询的关联

> ID：14505856
> 
> 赞同：1
> 
> 时间：2013-01-24T16:16:02.403
> 
> 标签：java, hibernate, hql, hibernate-criteria

我有两个实体：

```
public class Rank{
     Short value; 

     @ManyToOne(fetch=FetchType.LAZY)
     Picture pic;
     ...
}

public class Picture{
      String url;
      Long rank;    // sum of all ranks' values
} 
```

有没有办法通过查询加载`Picture`和`rank`字段`SELECT SUM(value) from ranks where pic = ?`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:19:54.347

您需要图片实体中的排名列表和返回所有排名总和的方法

```
@Entity
public class Rank{
    Short value; 

    @ManyToOne(fetch=FetchType.LAZY)
    Picture pic;

    public void setPic(Picture p){
        pic = p;
        p.addRank(this);
    }

    ..
}

@Entity
public class Picture{
     String url;

     @OneToMany(fetch=FetchType.LAZY)
     List<Rank> ranks;

     Long rank;    // sum of all ranks' values

     public void addRank(Rank r) {
         ranks.add(r);
     }

     public Long getRank() {
         for(Rank r : this.ranks) {
             this.rank += r.getLongValue();
         }

         return this.rank;
     }

     ...
} 
```

# mysql - SQL 更新 WHERE xx AND 最近的记录

> ID：14505859
> 
> 赞同：10
> 
> 时间：2013-01-24T16:16:10.603
> 
> 标签：mysql, sql

我需要做一些看起来很简单的事情：

```
$bdd->query('UPDATE mytable SET aaa = \''.$aaa.'\', bbb = \''.$bbb.'\' WHERE name = \''.$name.'\''); 
```

我的问题：我有多个与此“WHERE”匹配的记录，我只想更新最近的一个（我有一个日期和一个 ID，可用于定义哪个记录是最新的）

如何更改我的 WHERE 以添加类似“ **AND id = the_highest_id_of_this_query** ”的内容？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-24T16:17:31.577

你只能`limit`到`update`最近的记录

```
UPDATE your_table
SET some_column = 1
order by date_time_column desc
limit 1 
```

其中`date_time_column`可以是指示记录顺序的任何列。它也可以是一个自动增量 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T16:26:42.203

```
UPDATE table
SET column = value
WHERE primary_key =
(
SELECT primary_key
FROM table 
WHERE date_time_column = (select max(date_time_column) FROM table WHERE other_conditions)
)
AND other_conditions 
```

此查询不使用 order by 或 limit 子句，因此是可移植的。请注意，内部查询和外部查询中的 other_conditions 必须相同。

（因为这是在评论中发布的）为什么内部查询需要与外部查询具有相同的条件？

*   如果内部条件获取比外部条件更广泛的结果集，您最终可能会得到一个比满足外部条件的行中包含的更早的 date_time_column。`AND`然后，它们将导致获取 0 行。

*   如果内部条件获取的结果集比外部条件更窄，您最终可能会错过任何较新的记录，而不是内部集的一部分但作为外部条件的一部分得到满足。

希望这可以澄清。

# c# - LINQ To SQL、C#、MVC 4，在模型助手中加入问题

> ID：14505866
> 
> 赞同：2
> 
> 时间：2013-01-24T16:16:34.400
> 
> 标签：c#, asp.net-mvc, linq, linq-to-sql, asp.net-mvc-4

我对 LINQ to SQL 很陌生，直到最近还没有遇到任何问题。用 C# 编写。

我有一个模型助手 .cs 文件。我正在尝试创建一个公共列表，我可以从中查看。

这是模型助手中的代码（删除了无关的、工作的、内容：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace sample_runs.Models {
    partial public class SampleRunsDataContext {
        public List<attendee> GetMyRuns(int me) {          
            var mine = (from a in attendees
                       join s in sample_runs 
                            on a.sample_run_id equals s.sample_run_id
                       where a.user_id == me
                       orderby a.sample_run_id descending
                       select new {
                           s.sample_run_id,
                           a.role.role_name,
                           s.sample_run_status.sample_run_status_name,
                           s.project_number,
                           s.run_type.run_type_name,
                           s.description
                       }).ToList();
            return mine;
        }

    }

} 
```

至于数据库，像这样考虑涉及的两个表。sample_runs 就像派对或活动的列表。因此，对于每一行，我们都获得了派对的所有信息。然后，我们有一个名为参加者的表格，其中所有聚会参加者都被单独列出。每行都有关于与会者的信息，包括他们的“角色”，我认为这就是隐喻失效的地方。每个聚会可以有任意数量的参加者。该数据库非常漂亮，带有外键和您通常的各种规范化。

对于给定的与会者，我想要的只是一份他们参加过的所有聚会的清单。我希望这是有道理的。

我在这个文件中的所有其他 linq 语句和列表都工作正常。这让我感到悲伤：

```
Cannot implicitly convert type 'System.Collections.Generic.List<AnonymousType#1>'
to 'System.C9ollections.Generic.List<sample_runs.Models.attendee> 
```

我很困惑这是否应该是一个公共列表或其他东西。

我不确定是否

```
List<attendee> 
```

真的应该

```
List<attendee> 
```

由于加入。

经过一番研究，我玩弄了“我的”变量被发送到的地方，以及这应该是 List<> 还是 IENumerable<> 等等等等。我可悲地迷路了。

仅供参考，这就是我想在控制器中对“GetMyRuns”执行的操作：

```
 public ActionResult myruns() {
        return View(db.GetMyRuns(someintvar));
    } 
```

然后我想我将构建一个强类型视图并从那里开始。

我知道这可能是一个垒球问题，但我非常感谢您能为我提供的任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:45:11.003

如错误所示，`mine`是一个匿名对象列表，而您应该返回一个`attendee`对象列表。在`select`您的查询中创建匿名对象（注意没有任何类型指示）：

```
select new /* NO TYPE */ {
    s.sample_run_id,
    ...
} 
```

您的问题的解决方案将取决于您的应用程序的结构，但解决它的一种方法是创建某种 DTO（数据传输对象）列表并将其返回：

```
public List<AttendeeDto> GetMyRuns(int me)
{
    var mine = (from a in attendees
                join s in sample_runs 
                on a.sample_run_id equals s.sample_run_id
                where a.user_id == me
                orderby a.sample_run_id descending
                select new AttendeeDto
                {
                    SampleRunId = s.sample_run_id,
                    RoleName = a.role.role_name,
                    SampleRunStatusName = s.sample_run_status.sample_run_status_name,
                    ProjectNumber = s.project_number,
                    RunTypeName = s.run_type.run_type_name,
                    Description = s.description
                }).ToList();

        return mine;
    }
} 
```

您的`AttendeeDto`课程将如下所示：

```
class AttendeeDto
{
    public int SampleRunId { get; set; }
    public string RoleName { get; set; }
    public string SampleRunStatusName { get; set; }
    public int ProjectNumber { get; set; }
    public string RunTypeName { get; set; }
    public string Description { get; set; }
} 
```

顺便说一句 - 我希望你永远不会在生产代码中真正命名整数变量`me`和列表变量？`mine`;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:48:05.990

我相信违规的路线就在这里。

```
select new {
    s.sample_run_id,
    a.role.role_name,
    s.sample_run_status.sample_run_status_name,
    s.project_number,
    s.run_type.run_type_name,
    s.description
 } 
```

您正在选择一种新的匿名类型。相反，您不应该创建一个参加者类型的新对象，然后映射属性吗？

```
select new Attendee {
    SampleRunId = s.sample_run_id,
    Description = s.description
 } 
```

请注意，这确实需要您有参加者课程。

```
public class Attendee 
{
    public int SampleRunId { get; set; }
    public string Description { get; set; }
} 
```

希望这使它更清楚一点

# vhdl - 将 hex 文件转换为 bmp

> ID：14505871
> 
> 赞同：1
> 
> 时间：2013-01-24T16:16:57.007
> 
> 标签：vhdl, bmp, image-conversion

我正在使用公开可用的库（如“开源”）测试电子芯片（软件模拟）。该芯片的测试（可通过库获得）有一个 hex 文件作为输入.....这个 hex 文件据说是一个实际 bmp 的转储。

作为一名测试人员，我遵循“信任但验证”的座右铭:) 所以我想看看这个转储是否真的是一个正确的图像，即如果这个十六进制转储是正确的，那么我必须能够将它转换回 bmp。在任何地方都有这样的工具/脚本吗？

在此先感谢并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:18:26.997

我在实现图像过滤算法时做了类似的事情。我使用[Matlab](http://www.mathworks.com/products/matlab/)将 HEX 数据作为矩阵读取。然后使用该`imshow(<matrix>)`函数将数据显示为图像。无需摆弄 BMP 标头。

如果您没有 Matlab，或者不愿意为它付费，那么您可以尝试[Scilab](http://www.scilab.org/)，这是一个免费和开源的替代方案。我还没有广泛使用它，但据说 Scilab ist（在大多数情况下）与 Matlab 语法兼容。

# javascript - 来自谷歌地图api（javascript）的node.js调用函数

> ID：14505872
> 
> 赞同：-2
> 
> 时间：2013-01-24T16:16:59.447
> 
> 标签：javascript, node.js

nodejs如何从谷歌地图api（javascript）调用函数？

我希望你能用一些例子向我解释。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:30:06.010

您可以为此使用[https://github.com/moshen/node-googlemaps](https://github.com/moshen/node-googlemaps)。您可以在 github 页面上找到示例。

# iphone - UIImagePickerController 之后的奇怪动画

> ID：14505874
> 
> 赞同：1
> 
> 时间：2013-01-24T16:17:01.570
> 
> 标签：iphone, xcode

我的 rootViewController 基于 UITabViewController 和选项卡视图之一，我初始化 UINavigationController 以推送视图。

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:addStoreViewController];

[self presentModalViewController:navController animated:YES]; 
```

然后我在 addStoreViewController 中推送另一个视图，这是代码：

```
PictureViewController *pictureViewController = [[PictureViewController alloc] init];    
[self.navigationController pushViewController:pictureViewController animated:YES]; 
```

最后，我想在 pictureViewController 中使用 UIImagePickerController 这是我相机按钮的代码：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePicker.delegate = self;

[self presentModalViewController:imagePicker animated:YES]; 
```

我的视图控制器的级别：

[UITabViewController] > [UINavigationController] -> [AddStoreViewController] -> [PictureViewController] > [UIImagePickerViewController]

一切正常，但有一点很奇怪。呈现 UIImagePickerViewController 后，其他视图将受到舞台动画的影响。视图中的整个 UI 将显示一个额外的动画，例如 UITextField、UINavigationBar、UIButtons...您在视图中看到的所有内容。即使您打字，文字也会以奇怪的动画显示！我的代码有什么问题吗？我用谷歌搜索了这个问题很长时间，但找不到。谁能帮助我？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:25:42.783

哎呀，我找到了答案，我真是个白痴……这是由我的 UIView 动画引起的。我忘了`[UIView commitAnimations]`在我的动画末尾插入这个。

# azure - 我如何知道我是否为会话状态正确配置了 Azure 缓存

> ID：14505878
> 
> 赞同：3
> 
> 时间：2013-01-24T16:17:10.377
> 
> 标签：azure, azure-caching

我可以检查显示其自定义的 Session 对象，但我看不到 Azure（管理门户）上的缓存大小增加。我怎样才能确定我的会话信息是否被存储。如果我错过拼写缓存的 url，它会给我一个错误。除此之外，还有什么方法可以明确检查是否已将某些内容添加到缓存中？

```
 <sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider" compressionEnabled="false" timeout="50" >
          <providers>
              <add name="AppFabricCacheSessionStoreProvider"
                   type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider,Microsoft.Web.DistributedCache"
                   applicationName="xxxxx"
                   cacheName="default"
                   useBlobMode="true"
                   dataCacheClientName="default"/>
          </providers>
      </sessionState> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:35:37.433

我知道没有“缓存浏览器”（但很高兴被证明是错误的，因为那会非常酷和有趣），所以我知道测试会话状态的唯一方法是确保你至少有2 您的角色的两个实例，一个页面在会话中设置一个值，另一个页面读取该值。使用设置页面一次，然后转到阅读页面并在浏览器中混合刷新按钮。如果您每次都看到正确的值，则缓存正在工作，因为至少有一个请求已发送到您未设置该值的实例。不漂亮，但你去。

# sas - 在 SAS 的宏变量中替换文本

> ID：14505880
> 
> 赞同：7
> 
> 时间：2013-01-24T16:17:30.203
> 
> 标签：sas, sas-macro

我想将宏变量中的任何句点实例更改为下划线。我究竟做错了什么？

```
%let pow=0.1;
%let x = %sysfunc(tranwrd(&pow,".","_"));
%put x=&x; 
```

输出：

> x=0.1

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T16:24:26.887

%sysfunc 中没有引号，除非您指的是引号字符。（翻译至少会隐藏问题，但 TRANWRD 正在查看 &pow 并试图找到“。”但失败了。）

```
%let pow=0.1;
%let x = %sysfunc(tranwrd(&pow,.,_));
%put x=&x; 
```

# php - 如何在不删除 IE 条件注释的情况下缩小 php html 输出？

> ID：14505881
> 
> 赞同：1
> 
> 时间：2013-01-24T16:17:30.467
> 
> 标签：php

我用这个 PHP 脚本缩小了我的 HTML 页面：

```
function compress_html($html)
{
    preg_match_all('!(<(?:code|pre|script).*>[^<]+</(?:code|pre|script)>)!', $html, $pre);
    $html = preg_replace('!<(?:code|pre).*>[^<]+</(?:code|pre)>!', '#pre#', $html);
    $html = preg_replace('#<!–[^\[].+–&gt;#', '', $html);
    $html = preg_replace('/[\r\n\t]+/', ' ', $html);
    $html = preg_replace('/>[\s]+</', '><', $html);
    $html = preg_replace('/\s+/', ' ', $html);

    if (!empty($pre[0])) {
        foreach ($pre[0] as $tag) {
        $html = preg_replace('!#pre#!', $tag, $html,1);
        }
    }
    return $html;
}

ob_start('compress_html'); 
```

有一种方法可以只删除“HTML 注释”...而不是 IE 条件注释？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:42:24.787

您的代码不处理多行 HTML 注释，只删除第一行。此外，如果您/您的服务器使用 gzip 压缩，您从中获得的节省可以忽略不计。IE：

```
Uncompressed, un-minified page: 2209 bytes
Compressed,   un-minified page:  959 bytes

Uncompressed, minified page:    1973 bytes
Compressed,   minified page:     914 bytes 
```

最后两点：

1.  缩小您的 HTML 使其几乎无法阅读，因此祝您顺利排除任何问题。
2.  较大的页面通常具有*更好*的压缩比，尤其是在数据重复的情况下。

# vba - 添加空白幻灯片

> ID：14505884
> 
> 赞同：2
> 
> 时间：2013-01-24T16:17:46.313
> 
> 标签：vba, powerpoint

如何在某个特定位置添加空白幻灯片？例如第二个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:11:31.863

```
Sub InsertSlide()
    Dim oLayout As CustomLayout
    Dim lPosition As Long
    Dim oSl As Slide

    ' What layout/master should the new slide use?
    ' Designs(1) = the first SlideMaster in the presentation
    ' CustomLayouts(1) = a Title layout
    ' To get other layout index numbers, look at the layout gallery
    ' in PPT, count left to right, top to bottom
    Set oLayout = ActivePresentation.Designs(1).SlideMaster.CustomLayouts(1)
    lPosition = 3

    Set oSl = ActivePresentation.Slides.AddSlide(lPosition, oLayout)
    With oSl
        ' do whatever you need to with the slide
    End With
End Sub 
```

# php - 动态表单未发布完整数组

> ID：14505885
> 
> 赞同：1
> 
> 时间：2013-01-24T16:17:51.367
> 
> 标签：php, javascript, arrays

如果需要，我正在尝试让我的用户能够添加多个值。我使用以下 JS 表单：

```
<script type="text/javascript"> 
var counter = 1;
var limit = 3;
function addInput(divName){
   if (counter == limit)  {
      alert("You have reached the limit of adding " + counter + " inputs");
   }
   else {
      var newdiv = document.createElement('div');
      newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]' value=''>";
      document.getElementById(divName).appendChild(newdiv);
      counter++;
   }
}
</script> 
```

以下表格：

```
<form action="add.php" method="post" ENCTYPE="multipart/form-data">
<div id="dynamicInput">Entry 1<br><input type="text" name="myInputs[]"></div>
Enter the POC's number<br>
<input type="button" value="Add another POC" onClick="addInput('dynamicInput');">
<input type="submit" name="Submit" id="Submit" value="Submit">
</form> 
```

如果我将第一个值填写为 123，将第二个值填写为 124，一旦它发布到 add.php，我只会得到第一个值。我已经确认这些值没有发布（通过 print_r($_POST);）和通过 firebug。

```
Array ( [myInputs] => Array ( [0] => 123 ) 
```

谁能找到我为什么会丢失数组的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:44:48.863

您的站点中有表单处理程序，因为数组元素 [Submit] => Submit 也丢失了。在单个 php 页面上检查它。我认为问题不在此脚本或此表单中。

# c# - 在 C# 对象中实现动态属性的最佳方法是什么？

> ID：14505886
> 
> 赞同：3
> 
> 时间：2013-01-24T16:17:52.163
> 
> 标签：c#

我有许多类对象，每个对象都需要一个 URL 字段，该字段始终通过`TypeId`类的另一个属性 parameter 以相同的方式格式化。

将其抽象为动态属性的最佳方法是什么，以便基于类中的`TypeId`和`ItemId`属性生成 URL 字段。

我可以想到很多方法来做到这一点，但想知道推荐的做法是什么。

**下面的例子：**

```
public class MyObject
{
    public int Id { get; set; }
    public string URL
    {
        get
        {
            if (TypeId == 3)
            {
                return "/do/this/" + ItemId;
            }
            if (TypeId == 5)
            {
                return "/do/that/" + ItemId;
            }
            return "#";
        }
    }
    public int ItemId { get; set; }
    public int TypeId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:25:56.607

您可以使用所有已知的 TypeId 和 a 设置一个字典`Func<int, string>`以返回 URL。你甚至可以让它在运行时添加新的 TypeIds 和 URL 格式化函数：

```
private Dictionary<int, Func<int, string>> _urlFormatters;

public string URL
{
    get { return _urlFormatters[TypeId](ItemId); }
}

// In the constructor or some other init area:
{
    _urlFormatters = new Dictionary<int, Func<int, string>>
        {
            { 3, itemId => "/do/this/" + itemId },
            { 5, itemId => "/do/that/" + itemId }
        };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T16:23:36.003

您可以更进一步并实现它的完整对象：

```
public abstract class MyObject
{
    public int ItemId { get; set; }
    public virtual string URL { get { return "#"; } }
}
public class MyObjectType3 : MyObject
{
    public override string URL { get { return "/do/this/" + ItemId; } }
}
public class MyObjectType5 : MyObject
{
    public override string URL { get { return "/do/that/" + ItemId; } }
} 
```

这取决于你是否有很多类型，这个逻辑是否有意义。
这只是另一种解决方案，但您提供的解决方案看起来也不错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T16:22:38.003

```
abstract class BaseClass {
    public int ItemId { get; set; }
    public abstract string BaseUrl { get; }
    public string Url {
        get {
            return BaseUrl + ItemId;
        }
    }
}

class Type3 : BaseClass {
    public override string BaseUrl {
        get { return "/do/this/"; }
    }
}

class Type5 : BaseClass {
    public override string BaseUrl {
        get { return "/do/that/"; }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:22:21.937

您可以在其他类继承自的基类中执行此操作...

# nhibernate - Fluent NHibernate 映射字典包装类

> ID：14505887
> 
> 赞同：0
> 
> 时间：2013-01-24T16:17:57.177
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试将现有的 HMB 映射文件迁移到 Fluent 映射，但在映射以下类（简化）时遇到了问题。

```
public interface IThing
{
    int Id { get; }
    string Name { get; }
    ISettings Settings { get; }
}

public class Thing : IThing { /* Interface implementation omitted */ }

public interface ISettings
{
    string SomeNamedSetting1 { get; }
    bool SomeNamedSetting2 { get; }
    int SomeNamedSetting3 { get; }
}

public class Settings : ISettings
{
    Dictionary<string, string> rawValues;

    public string SomeNamedSetting1 { get { return rawValues["SomeNamedSetting1"]; } }
    public bool SomeNamedSetting2 { get { return Convert.ToBoolean(rawValues["SomeNamedSetting2"]); } }
    public int SomeNamedSetting3 { get { return Convert.ToInt32(rawValues["SomeNamedSetting3"]); } }
} 
```

我们针对接口进行编码`IThing`并通过接口上定义的辅助属性访问其设置`ISettings`。这些设置存储在数据库中的一个名为 Setting 的表中，该表是一组键值对，具有 Thing 的外键。

现有映射文件如下：

```
<component name="Settings" lazy="false" class="Settings, Test">
  <map name="rawValues" lazy="false" access="field" table="Setting">
    <key column="Id" />
    <index column="SettingKey" type="String" />
    <element column="SettingValue" type="String" />
  </map>
</component> 
```

我正在努力解决的是组件定义，因为我找不到该`class`属性的 Fluent 等效项。这是我到目前为止所拥有的：

```
public class ThingMap : ClassMap<Thing>
{
    public ThingMap()
    {
        Proxy<IThing>();
        Id(t => t.Id);
        Map(t => t.Name);

        // I think this is the equivalent of the private field access
        var rawValues = Reveal.Member<Settings, IDictionary<string, string>>("rawValues");

        // This isn't valid as it can't convert ISettings to Settings
        Component<Settings>(t => t.Settings);

        // This isn't valid because rawValues uses Settings, not ISettings
        Component(t => t.Settings, m =>
        {
            m.HasMany(rawValues).
            AsMap("SettingKey").
            KeyColumn("InstanceId").
            Element("SettingValue").
            Table("Setting");
        });

        // This is no good because it complains "Custom type does not implement UserCollectionType: Isotrak.Silver.IInstanceSettings"
        HasMany<InstanceSettings>(i => i.InstanceSettings).
            AsMap("SettingKey").
            KeyColumn("InstanceId").
            Element("SettingValue").
            Table("Setting");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:34:10.873

对于同一条船上的任何人，我最终破解了它。

```
Component<Settings>(i => i.Settings, m =>
{
    m.HasMany(rawValues).
    AsMap<string>("SettingKey").
    KeyColumn("InstanceId").
    Element("SettingValue").
    Table("Setting");
}); 
```

现在看起来很明显！

# r - R中的ggplot2和strptime

> ID：14505890
> 
> 赞同：0
> 
> 时间：2013-01-24T16:18:04.027
> 
> 标签：r, ggplot2

我正在使用 ggplot 进行绘图。我想出了一个问题，代码是：

```
require(ggplot2)
require(reshape2)

df <- data.frame(HMn25_30$avg,for30$cgsbi_1,dt_hmn$dt)
names(df)[1]='WSN 25'
names(df)[2]='MetoSwiss Forecast'
df.m <- melt(df, names(df)[3], names(df)[1:2])
df.m$dt_hmn.dt <- strptime(as.character(df.m$dt_hmn.dt), format = "%m/%d/%Y %H:%M:%S")
p <- ggplot(df.m, aes(x = dt_hmn.dt, y = value, group = variable, color = variable))
size=14),axis.text.y  = element_text(angle=00, vjust=0.5, size=30))
p 
```

数据：

```
> head(df.m)
        dt_hmn.dt variable  value
1 9/29/2007 23:00   WSN 25  0.280
2  9/30/2007 0:00   WSN 25  0.208
3  9/30/2007 1:00   WSN 25 -0.264
4  9/30/2007 2:00   WSN 25 -0.480
5  9/30/2007 3:00   WSN 25 -0.708
6  9/30/2007 4:00   WSN 25 -0.714

 str(df.m)
'data.frame':   50 obs. of  3 variables:
 $ dt_hmn.dt: Factor w/ 25 levels "9/29/2007 23:00",..: 1 2 3 14 19 20 21 22 23 24 ...
 $ variable : Factor w/ 2 levels "WSN 25","MetoSwiss Forecast": 1 1 1 1 1 1 1 1 1 1 ...
 $ value    : num  0.28 0.208 -0.264 -0.48 -0.708 -0.714 -0.498 -0.216 0.126 0.574 ... 
```

当我想使用`strptime`所有 time_date 列时，将更改为“NA”。

请在这件事上指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:34:53.330

您不能使用`:%S`，因为您的数据中没有它。尝试这个：

```
strptime(dt$dt_hmn.dt, "%m/%d/%Y %H:%M")

# [1] "2007-09-29 23:00:00" "2007-09-30 00:00:00" "2007-09-30 01:00:00" 
#     "2007-09-30 02:00:00" "2007-09-30 03:00:00" "2007-09-30 04:00:00" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:35:18.200

您的时间戳中似乎没有秒数。所以也许你应该使用：

```
df.m$dt_hmn.dt <- strptime(as.character(df.m$dt_hmn.dt), format = "%m/%d/%Y %H:%M") 
```

# php - GSC_Client 和 oAuth2 访问

> ID：14505894
> 
> 赞同：5
> 
> 时间：2013-01-24T16:18:14.330
> 
> 标签：php, google-api, oauth-2.0, google-shopping-api

我开始编写一个 PHP 脚本，该脚本将作为 cron 作业运行，并通过 Google Shopping API 定期更新产品列表。

我下载了[适用于 PHP 的 GSC 客户端库，](http://code.google.com/p/gshoppingcontent-php/)并试图通过[Google Shopping API 文档](https://developers.google.com/shopping-content/)来获取令牌。但是，感觉文档中的某处缺少关于在生成 URL 后如何实际请求令牌的步骤。

到目前为止，这是我的代码：

```
require ("./lib/shoppingclient/GShoppingContent.php");

const G_MERCHANT_ID     = '**********';
const G_CLIENT_ID       = '**********';
const G_CLIENT_SECRET   = '**********';

$obj_client = new GSC_Client (G_MERCHANT_ID);

// Obtain an OAuth2 token to access the API with
$obj_token  = new GSC_OAuth2Token (G_CLIENT_ID, G_CLIENT_SECRET, USER_AGENT);

$str_url    = $obj_token -> generateAuthorizeUrl ('urn:ietf:wg:oauth:2.0:oob');
echo ($str_url . PHP_EOL);

/* @var $obj_response _GSC_Response */
$obj_response = $obj_token -> makeAuthenticatedRequest (curl_init ($str_url));
echo ($obj_response); 
```

当我从命令行运行上述内容时，我得到：

> [https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=blah-blah-blah-etc-etc-etc](https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=blah-blah-blah-etc-etc-etc) ...

```
<HTML>
<HEAD>
<TITLE>Unauthorized</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Unauthorized</H1>
<H2>Error 401</H2>
</BODY>
</HTML>

Fatal error: Uncaught exception 'GSC_TokenError' with message 'invalid_request' in /var/samba/GoogleShoppingTest/lib/shoppingclient/GShoppingContent.php on line 624

GSC_TokenError: invalid_request in /var/samba/GoogleShoppingTest/lib/shoppingclient/GShoppingContent.php on line 624

Call Stack:
    0.0002     321888   1\. {main}() /var/samba/GoogleShoppingTest/logintest.php:0
    0.0065    1446196   2\. GSC_OAuth2Token->makeAuthenticatedRequest() /var/samba/GoogleShoppingTest/logintest.php:19
    0.2797    1446684   3\. GSC_OAuth2Token->refresh() /var/samba/GoogleShoppingTest/lib/shoppingclient/GShoppingContent.php:722
    0.3992    1448152   4\. GSC_OAuth2Token::raiseFromJson() /var/samba/GoogleShoppingTest/lib/shoppingclient/GShoppingContent.php:565 
```

我相当肯定初始化一个 CURL 对象不是必需的，但我无法弄清楚我是如何从生成的 URL 到解析的实际响应的。

如果我访问由 generateAuthorizeUrl() 生成的 URL，我会得到一个带有按钮的页面，要求我授予权限。如果我这样做，我会得到一个页面，上面有一个令牌，据我所知是有效的。

但是，这是一个 cron 脚本，它显然无法要求用户单击按钮并确认他们想要授予权限，所以显然我在某个地方偏离了轨道。

有没有人设法让 GSC_Client 在完全自动的脚本中与 OAuth 一起工作？如果是这样，我在这里做错了什么？

**更新**：对于此应用程序，我已将 API 类型配置为“已安装的应用程序”，这似乎是此应用程序的正确 API 类型。这意味着我为脚本提供了共享密钥并使用`https://localhost`or`urn:ietf:wg:oauth:2.0:oob`作为 URL。

**更新 2**：我认为 GSC 客户端的支持库不支持服务器到服务器的方案。进一步的研究表明，如果我想使用私钥身份验证方法 ，我需要[Google API 客户端库。](https://code.google.com/p/google-api-php-client/wiki/OAuth2)

这是我迄今为止设法编写的代码：

```
require ("./lib/google/oauthclient/Google_Client.php");
require ("./lib/google/shoppingclient/GShoppingContent.php");

const G_MERCHANT_ID     = '********';
const G_CLIENT_ID       = '********';
const G_CLIENT_EMAIL    = '********';
const G_CLIENT_KEY_PATH = '/path/to/the/privatekey.p12';
const G_CLIENT_KEY_PW   = 'notasecret';

$obj_client_auth  = new Google_Client ();
$obj_client_auth -> setApplicationName ('test');
$obj_client_auth -> setClientId (G_CLIENT_ID);
$obj_client_auth -> setAssertionCredentials (new Google_AssertionCredentials (
        G_CLIENT_EMAIL, 
        array (OAUTH_SCOPE), 
        file_get_contents (G_CLIENT_KEY_PATH), 
        G_CLIENT_KEY_PW));

$obj_client_auth -> getAuth () -> refreshTokenWithAssertion ();

// Get a token
$obj_token  = json_decode ($obj_client_auth -> getAccessToken ());
print_r ($obj_token); 
```

当我运行上面的代码时，我得到类似于以下内容的回报：

```
stdClass Object
(
    [access_token] => ya29.AHES6ZRJohl2AfbQCKbFxNlagSqLGcjHwiylqASX1ygmwg
    [expires_in] => 3600
    [created] => 1359123809
) 
```

我猜这是一个有效的访问令牌响应。

但是，我还没有弄清楚如何将返回的令牌与 GSC_Client 库一起使用。虽然我知道这两个库都来自谷歌，但我得到的明显印象是它们是由不同的团队开发的，他们之间几乎没有什么关系，最终结果是这些库不是交叉兼容的. 如果有人知道在这里做什么，我会很感激你的任何建议。

**更新 3**

我已经设法使用 oAuth 库从 Google 实际提取数据，但它来自用于购物的搜索 API。我需要使用 Content API 来处理产品列表以进行购物。oAuth 库似乎没有提供用于执行此操作的类，即使在 contrib 目录中也是如此！

仅供参考，这是执行搜索 API 请求的代码（减去常量）：

```
$obj_client_auth  = new Google_Client ();
$obj_client_auth -> setApplicationName ('test');
$obj_client_auth -> setClientId (G_CLIENT_ID);
$obj_client_auth -> setAssertionCredentials (new Google_AssertionCredentials (
        G_CLIENT_EMAIL, 
        array (
            //'https://www.googleapis.com/auth/structuredcontent',
            'https://www.googleapis.com/auth/shoppingapi'
            ), 
        file_get_contents (G_CLIENT_KEY_PATH), 
        G_CLIENT_KEY_PW));

$obj_client_api   = new Google_ShoppingService ($obj_client_auth);

$arr_results = $obj_client_api -> products -> listProducts ('public', array (
   'country'   => 'GB',
   'q'         => '"mp3 player" | ipod', 
   'rankBy'    => 'relevancy'
));

print_r ($arr_results); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:20:41.300

看起来 GSC_client 库与它自己的 OAuth2 实现的耦合过于紧密，以至于 Google_Client 库无需大量重构工作即可轻松集成到其中。此外，GSC_Client 的 OAuth2 实现与客户端机密概念以及重定向到同意页面的耦合过于紧密，因此我编写了一个将 Google_Client 实现包装为替代品的实现。

幸运的是，我们有一个内部开发的用于与 Google 的 API 接口的代码库，并且与其身份验证系统的耦合度较低。通过一些工作，可以向其中添加一个包装 Google_Client 的新身份验证模块。

但是，似乎没有关于如何让 Google 的 GSC_Client 与 Google_Client 一起工作的答案，所以我仍在寻找更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T14:03:10.900

我知道这是一个有点老的问题，但我有类似的要求，因为谷歌刚刚取消了我们用来更新价格和可用性的旧 API。

下面的代码对我有用。它使用服务器-服务器身份验证，因此不需要用户输入。您需要登录到您的 google api 控制台并设置一个新的服务帐户（如果您有一个和 p12 文件，则使用现有的）此外，您还需要将服务代码的电子邮件地址添加到您的 Google Merchant Center 中一个标准用户 - 好吧，我不确定是否需要它，但我做到了并且它有效:-)

附带说明 - 使用旧的 API，我们使用 MPN 搜索，使用新的 AP

```
require_once realpath(dirname(__FILE__) . '/src/Google/autoload.php');
require_once realpath(dirname(__FILE__) . '/src/Google/Service/ShoppingContent.php');

$merchantId = '<<MY_MERCHANT_ID>>';
$client_id = '<<MY_GOOGLE_API_SERVICE_ACCOUNT_ID>>';
$client_email = <<MY_GOOGLE_API_SERVICE_ACCOUNT_EMAIL>>';
$scopes = array('https://www.googleapis.com/auth/content');
$private_key = file_get_contents('<<MY_GOOGLE_API_SERVICE_ACCOUNT_P12_FILE>>');
$credentials = new Google_Auth_AssertionCredentials(
    $client_email,
    $scopes,
    $private_key
);

$client = new Google_Client();
$client->setAssertionCredentials($credentials);
$client->setScopes($scopes);
$client->setAccessType("offline");

if ($client->getAuth()->isAccessTokenExpired()) $client->getAuth()->refreshTokenWithAssertion();
if (isset($_SESSION['access_token']) && $_SESSION['access_token']) {
  $client->setAccessToken($_SESSION['access_token']);
} else {
  $authUrl = $client->createAuthUrl();
}

$service = new Google_Service_ShoppingContent($client);

//Example to get sku information
$ret = getsku($client, $service, $merchantId, 'DC35DS');
echo "<pre>"; print_r($ret); echo "</pre>";

//Example to set price and availability
$ret = update_Price_Availability($client, $service, $merchantId, $itemid, $price, $availability);
echo "<pre>"; print_r($ret); echo "</pre>";

function update_Price_Availability($client, $service, $merchantId, $itemid, $newprice = null, $availability = null) {
    $inventory = new Google_Service_ShoppingContent_InventorySetRequest();
    $price = new Google_Service_ShoppingContent_Price();
    $ctrl = 0;
    if ($newprice !== null) {
        $price->setValue($newprice);
        $price->setCurrency('GBP');
        $inventory->setPrice($price);
        $ctrl = 1;
    }
    if ($availability !== null) {
        $inventory->setAvailability($availability);
        $ctrl = 1;
    } 
    if ($ctrl == 0) {
        return array('Errors'=>array('Nothing to do')); 
    }
    try {
        $return = $service->inventory->set($merchantId, 'online', 'online:en:GB:'.$itemid, $inventory);
    } catch (Google_Service_Exception  $e) {
        return array('Errors'=>$e->geterrors(),'Message'=>$e->getmessage());
    }
    return getsku($client, $service, $merchantId, $itemid);
 }

function getsku($client, $service, $merchantId, $itemid) {
    try {
        $product = $service->products->get($merchantId, 'online:en:GB:'.$itemid);
    } catch (Google_Service_Exception  $e) {
        $product = array('Errors'=>$e->geterrors(),'Message'=>$e->getmessage());
    }
    return $product;
} 
```

# python - 如何使用python从文本文件制作字典

> ID：14505898
> 
> 赞同：4
> 
> 时间：2013-01-24T16:18:32.450
> 
> 标签：python, dictionary, distinct-values

我的文件如下所示：

```
aaien 12 13 39
aan 10
aanbad 12 13 14 57 58 38
aanbaden 12 13 14 57 58 38
aanbeden 12 13 14 57 58 38
aanbid  12 13 14 57 58 39
aanbidden 12 13 14 57 58 39
aanbidt 12 13 14 57 58 39
aanblik 27 28
aanbreken 39
... 
```

我想用key =这个词（比如'aaien'）制作一个字典，值应该是它旁边的数字列表。所以它必须这样看： {'aaien': ['12, 13, 39'], 'aan': ['10']}

这段代码似乎不起作用。

```
document = open('LIWC_words.txt', 'r')
liwcwords = document.read()
dictliwc = {}
for line in liwcwords:
    k, v = line.strip().split(' ')
    answer[k.strip()] = v.strip()

liwcwords.close() 
```

python给出了这个错误：

```
ValueError: need more than 1 value to unpack 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T16:19:40.827

您正在将您的行拆分为一个单词列表，但只给它一个键和值。

这将起作用：

```
with open('LIWC_words.txt', 'r') as document:
    answer = {}
    for line in document:
        line = line.split()
        if not line:  # empty line?
            continue
        answer[line[0]] = line[1:] 
```

请注意，您不需要给出`.split()`论点；没有参数，它会在空格上拆分*并为您剥离结果*。这使您不必显式调用`.strip()`.

另一种方法是仅在第一个空格上拆分：

```
with open('LIWC_words.txt', 'r') as document:
    answer = {}
    for line in document:
        if line.strip():  # non-empty line?
            key, value = line.split(None, 1)  # None means 'all whitespace', the default
            answer[key] = value.split() 
```

第二个参数`.split()`限制了拆分的数量，保证最多返回 2 个元素，从而可以将赋值中的值解包到`key`and `value`。

任何一种方法都会导致：

```
{'aaien': ['12', '13', '39'],
 'aan': ['10'],
 'aanbad': ['12', '13', '14', '57', '58', '38'],
 'aanbaden': ['12', '13', '14', '57', '58', '38'],
 'aanbeden': ['12', '13', '14', '57', '58', '38'],
 'aanbid': ['12', '13', '14', '57', '58', '39'],
 'aanbidden': ['12', '13', '14', '57', '58', '39'],
 'aanbidt': ['12', '13', '14', '57', '58', '39'],
 'aanblik': ['27', '28'],
 'aanbreken': ['39']} 
```

如果您仍然只看到*一个*键和文件的其余部分作为（拆分）值，则您的输入文件可能使用了非标准行分隔符。通过将字符添加到模式中，打开具有[通用行尾支持的文件：](http://docs.python.org/2/glossary.html#term-universal-newlines)`U`

```
with open('LIWC_words.txt', 'rU') as document: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:32:43.307

```
>liwcwords = document.read()  
>dictliwc = {}    
>for line in liwcwords: 
```

你在这里迭代一个字符串，这不是你想要的。试试`document.readlines()`。这是另一种解决方案。

```
from pprint import pprint
with open('LIWC_words.txt') as fd:
    d = {}
    for i in fd:
        entry = i.split()
        if entry: d.update({entry[0]: entry[1:]})

pprint(d) 
```

这是输出的样子

```
{'aaien': ['12', '13', '39'],
 'aan': ['10'],
 'aanbad': ['12', '13', '14', '57', '58', '38'],
 'aanbaden': ['12', '13', '14', '57', '58', '38'],
 'aanbeden': ['12', '13', '14', '57', '58', '38'],
 'aanbid': ['12', '13', '14', '57', '58', '39'],
 'aanbidden': ['12', '13', '14', '57', '58', '39'],
 'aanbidt': ['12', '13', '14', '57', '58', '39'],
 'aanblik': ['27', '28'],
 'aanbreken': ['39']} 
```

# java - 如何确保 Google AppEngine 中的新 JDO 实体在创建之前不存在？

> ID：14505902
> 
> 赞同：0
> 
> 时间：2013-01-24T16:18:54.057
> 
> 标签：java, google-app-engine, jdo

我有一个带有外部生成密钥（从物理卡读取）的 JDO 卡实体。这链接到与 Card 实体同时创建的 User 实体。当我读取卡片并调用方法时，我希望 AppEngine 要么返回我之前创建的卡片和用户，要么创建一个新的。但是，如果我快速连续调用该方法两次，最终会覆盖 Card 实体并创建两个 User 身份。

这是我的代码（我已经删除了 getter 和 setter）：

CardEntity.java

```
@PersistenceCapable public class CardEntity {

    @PrimaryKey
    private Key Id;
    @Persistent
    @Unowned
    private UserEntity user;
} 
```

用户实体.java

```
@PersistenceCapable
public class CustomerEntity {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key; 
    @Persistent 
    private String name;
} 
```

来自 Controller.java 的方法

```
 public UserEntity getOrCreateUser(String id) {
        CardEntity cardEntity;
        UserEntity userEntity;
        Query query;

        PersistenceManager mgr = getPersistenceManager();
        Transaction tx = mgr.currentTransaction();
        boolean complete = false;
        while (!complete) {
            try {
                tx.begin();

                query = mgr.newQuery(CardEntity.class);
                query.setUnique(true);
// rootkey is a key for a CardEntity that I am using as the parent for
// all CardEntities, so they are in the same enitity group, as a hack
// to try to solve this problem.
                Key key = KeyFactory.createKey(rootKey, "CardEntity", id);
                query.setFilter("id == :id");
                cardEntity = (CardEntity) query.execute(key);
                if (CardEntity == null) {
                    cardEntity = new CardEntity();
                    cardEntity.setId(key);
                    userEntity = new UserEntity();
                    mgr.makePersistent(userEntity);
                    nfcCardEntity.setUser(UserEntity);
                    mgr.makePersistent(cardEntity);
                    CardEntity rootCardEntity = 
                                        (CardEntity) mgr.getObjectById(CardEntity.class, rootKey);
                    rootCardEntity.setUser(userEntity);
// this is another hack to ensure that something changes in this transaction
// so that if there's a conflict, it will be rolled back
                    mgr.makePersistent(rootCardEntity);
                } else {
                    userEntity = cardEntity.getUser();
                }
                tx.commit();
            } finally {
                if (tx.isActive()) {
                    tx.rollback();
                } else {
                    complete = true;
                }
            }
        }
        mgr.close();
        return userEntity;
    } 
```

我尝试了很多事情，但我经常最终创建了多个 UserEntities。上面的代码在一个实体组（由 rootkey 定义）中包含所有 CardEntities，我什至还对根实体进行了修改。这似乎没有帮助。

任何提示，指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:43:40.407

go for:`getObjectById`并捕获异常。

getObjectById 具有很强的一致性，这意味着，如果它在创建后立即存在，它应该立即返回一个对象。查询只有最终一致性，这意味着它**可能**在创建后找到，但也可能没有。

如果 not found`getObjectById`会抛出一个 Entity not found 异常，该异常可以单独捕获和处理。

# linux - 如何从运行单声道的 C# 程序中找出我的 Linux 桌面 (Ubuntu) 的屏幕分辨率？

> ID：14505903
> 
> 赞同：3
> 
> 时间：2013-01-24T13:23:54.617
> 
> 标签：linux, ubuntu, c#

如何从 Mono 中运行的 C# 程序中找出我的 Linux 桌面的屏幕分辨率？我正在使用 Ubuntu。

使用`xrandr`命令我可以查看分辨率，但是有没有一种编程方式来获取相同的信息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T16:28:13.013

与在 .NET C# 中的方式完全相同。这就是 Mono 的全部理念——让底层操作系统透明。

谷歌“屏幕分辨率 C#”。您的第一个搜索结果应该可以正常工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-24T13:31:15.783

您可以使用以下命令：

```
xdpyinfo  | grep 'dimensions:' 
```

# html - HTML链接中的空格？

> ID：14505905
> 
> 赞同：2
> 
> 时间：2013-01-24T16:19:05.193
> 
> 标签：html

我们最近为一个客户开发了一个网站，并将网站从 PHP 后端更改为 .aspx，这真是一项艰巨的工作！

在 html 代码中添加 .aspx 标记时，开发人员出于某种原因在页面链接标记中留下了空白 - 我刚刚注意到 - 只有简单的空白换行符，如下所示，该站点已在 ie8、firefox 和Mac 上的 Chrome 和 Safari，一切似乎都很好——所以这可能只是偏执狂（更改所有页面需要很长时间）——任何人都可以看到下面空白的任何主要原因——或者我应该放弃偏执！？

```
<li><a href="../../index.html">
 home</a></li>

<a href="../../special-treats.html
"><img src="../../images/treatsbutton.gif" width="260" height="40" alt="Click here to treat    yourself" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:28:57.023

没事。HTML 解析器（浏览器）会忽略双空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:41:56.213

它会起作用，但维护起来并不漂亮/有趣。为了提高可维护性，我的建议是，如果您不能一次完成所有操作，请在维护时进行操作。也就是说，如果您要维护第 x 页，请在执行此操作时清理第 x 页上的中断/空白。在每个修订/页面上多花几分钟时间会减少一些负担。

# asp.net - 我可以使用处理程序而不是 web 服务吗

> ID：14505907
> 
> 赞同：0
> 
> 时间：2013-01-24T16:19:05.630
> 
> 标签：asp.net, web-services, httphandler

我有一个情况，我必须决定应该使用什么 a`http-handler`或 a `web-service`。
我想为将要使用它的特定人公开某种方法。

senerio 是我的一位客户必须`.apk`在他的文件上安装文件`tab`才能访问我的应用程序。
在该文件中，我的 asp.net 应用程序被调用。
在访问我的应用程序之前，有一个注册过程，我需要一些方法来注册该设备。
我已经使用`http-handler`了对我来说工作正常的`testing`.

以后会不会出问题。
他们正在编写代码以从那里发送命中我的`handler`结果并返回结果。它运行良好`testing`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:43:14.930

是的，您可以使用处理程序而不是 web 服务。

> 会不会引起问题？

任何事情都可能导致新的问题。这完全取决于您需要什么以及您的技能\经验是什么。

这可能会带来更多亮点：

[asp.net web service和Ihttphandler的区别](https://stackoverflow.com/questions/495344/difference-asp-net-web-service-and-ihttphandler)

# php - 无法获取 $_FILES

> ID：14505910
> 
> 赞同：1
> 
> 时间：2013-01-24T16:19:11.713
> 
> 标签：php, file-upload, upload, slim

> **可能重复：**
> [为什么文件不使用此 HTML/PHP 上传？](https://stackoverflow.com/questions/6035922/why-files-dont-get-uploaded-with-this-html-php)

我正在使用 Slim Framework 制作一个 REST Web 服务来做一个简单的服务：

```
require 'Slim/Slim.php';

$app = new Slim();
$app->get('/update','showUpdatePage');
$app->post('/update','store');
$app->run();

function store(){
    print_r($_FILES);
}
function showUpdatePage(){
    echo <<<EOT
    <html>
        <body>
            <h2 style="text-align:center;">Load new file</h2>
            <div style="width:40%;margin:0 auto;">
                <form method="post" action="update">
                    <input type="file" name="theFile" enctype="multipart/form-data" />
                    <input type="submit" value="load"/>
                </form>
            </div>
        </body>
    </html>
EOT;
} 
```

我的问题是这条线

```
print_r($_FILES); 
```

给我空数组..我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:21:17.297

## enctype="多部分/表单数据"

这[不是输入的属性](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)-[它是表单属性](http://www.w3.org/TR/html401/interact/forms.html#adef-enctype)。因此，您的表单未设置为提交文件，输入的 enctype 属性将被忽略。

### 有效示例

```
<form method="post" enctype="multipart/form-data" action="update">
    <input type="file" name="theFile">
    <input type="submit" value="load"/>
</form> 
```

# javascript - 选择相邻元素的子元素

> ID：14505915
> 
> 赞同：0
> 
> 时间：2013-01-24T16:19:24.540
> 
> 标签：javascript, jquery, css

```
<div class="srch-sb-results"> stuff here </div>
<table>
   <tr>
      <td colspan='3'>
         <div style="border:1px solid silver"></div>
       </td>
     </tr>
<table> 
```

我需要选择呈现银色边框的 div 如何在 jquery 中选择 div 并隐藏它？以及带有 colspan 的表格单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:22:11.340

```
$('.srch-sb-results').next('table').find('td[colspan="3"]').hide(); 
```

应该这样做。包括OP的原始请求以隐藏具有 colspan=3 的 td

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:23:32.310

试试这个：

```
$('table div').each(function() {//selects all divs inside table

    var bColor = $(this).css('border-color');//checks each element's border-color
    if( bColor === 'silver') {
       $(this).hide();
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:30:01.080

如果您无法更改 html，您可以使用相邻的兄弟 CSS 选择器来选择第一个表格行的第一个表格单元格内的第一个 div，如下所示：

```
$('.srch-sb-results + table > tr:first > td:first > div:first').hide(); 
```

更简单的方法是更改​​ HTML 并在 div 上设置一个 ID 并直接选择它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:30:32.010

如果这个 div 是唯一的：

```
$('td[colspan="3"] > div').hide(); 
```

或更严格的 CSS 应该是这样的：

```
$('td[colspan="3"] div').each(function(){
  if ($(this).css('border')) $(this).hide();
}); 
```

# reporting-services - 报表管理器用户界面自定义：更改徽标

> ID：14505918
> 
> 赞同：0
> 
> 时间：2013-01-24T16:19:37.710
> 
> 标签：reporting-services

我想自定义报告经理徽标，以便显示我们公司的徽标。我已更改“ReportingServices.css”和“RSWebParts.css”。此外，我将“48folderopen.jpg”更改为我们公司的徽标，并将徽标重命名为“48folderopen.jpg”。

然而，这些都没有改变任何东西。更改徽标需要做什么（其他）？

# internet-explorer - 无法强制 IE8 使用 IE8 模式

> ID：14505921
> 
> 赞同：0
> 
> 时间：2013-01-24T16:19:41.310
> 
> 标签：internet-explorer, ie8-compatibility-mode, ie8-browser-mode

我尝试使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

并且我的网站仍然打开（我使用的是 IE8） - 当我手动检查`IE8 compat mode`以`Document Mode IE7 Standards (Page default)`正确使用 IE8 标准网站呈现时 - 我如何强制我的页面默认使用 IE8 标准？这个元标题似乎不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:28:20.933

我找到了解决方案 - 这是由 html5boilerplate 中的这段代码引起的：

```
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

它必须是公正`<html>`的。

奇怪的是html5boilerplate中的代码导致IE7标准......

# c# - ThreadPool.QueueUserWorkItem - 订单未保留？

> ID：14505929
> 
> 赞同：4
> 
> 时间：2013-01-24T16:20:05.153
> 
> 标签：c#, .net, multithreading, threadpool

我刚刚注意到，排队的回调顺序[`ThreadPool.QueueUserWorkItem`](http://msdn.microsoft.com/en-us/library/4yd16hza.aspx)不是确定性的，它肯定不是传入回调的顺序。

这可以通过以下简单程序进行验证：

```
 private static void Main()
    {
        for (var i = 0; i < 10; ++i)
            ThreadPool.QueueUserWorkItem(Console.Write, i + " ");

        Thread.Sleep(1000);
    } 
```

一次运行的输出是：

```
0 3 8 9 1 2 5 4 6 7 
```

顾名思义，订单被保留。

有没有办法确保订单被保留？
如果不是，您建议采用什么替代实施方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T16:25:36.087

没有办法保持顺序。线程池的目的是并行执行独立的任务。这些任务开始和完成的顺序本质上是高度不确定的。如果您需要子任务以特定顺序开始和完成，那么您无法将它们并行化。

```
private static void Main()
{
    for (var i = 0; i < 10; ++i)
        Console.Write(i + " ");

    Thread.Sleep(1000);
} 
```

澄清一下：线程池队列中的任务顺序被保留，但它们实际*执行*的顺序是不确定的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T16:30:12.150

如果您希望任务在与调用线程不同的线程上串行运行，那么您应该查看[Reactive Extensions](http://msdn.microsoft.com/en-us/library/hh242985%28v=vs.103%29.aspx)中的[EventLoopScheduler](http://msdn.microsoft.com/en-us/library/system.reactive.concurrency.eventloopscheduler%28v=vs.103%29.aspx)。它允许您在特定工作线程上安排工作单元。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T16:26:25.430

我不确定是否保留了*启动任务的顺序。*但是，由于所有排队的工作项都是异步运行的，因此无论如何您都无法保证*执行顺序。*

如果要保留顺序，一种选择是串行运行工作项，*而不是*从线程池中运行。*另一个是在*第一个作业中安排第二个作业，等等......还有一个是使用*等待句柄*来同步工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T04:43:59.240

> 顾名思义，订单被保留。

名称中的“队列”表示项目在线程池线程中排队等待执行。这意味着 - 如果线程池线程除一个外都忙 - 在这种情况下，您的项目将按顺序一个接一个地排队你让他们排队。但因为这不太可能项目将首先进入可用的后台线程，然后同时执行。

# c# - 范围之间的随机日期时间 - 不统一输出

> ID：14505932
> 
> 赞同：11
> 
> 时间：2013-01-24T16:20:20.250
> 
> 标签：c#, datetime, random, timespan

我实现了下面的 RandomDate，但我总是让值接近“从”日期，我可能在这里错过了一些东西....

```
public static DateTime GetRandomDate(DateTime from, DateTime to)
    {
        var range = new TimeSpan(to.Ticks - from.Ticks);

        var rnd = new Random();

        var randTimeSpan = new TimeSpan((long)(range.TotalSeconds - rnd.Next(0, (int)range.TotalSeconds))); 

        return from + randTimeSpan;
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-24T21:23:12.077

您可以更改为：

```
static readonly Random rnd = new Random();
public static DateTime GetRandomDate(DateTime from, DateTime to)
{
    var range = to - from;

    var randTimeSpan = new TimeSpan((long)(rnd.NextDouble() * range.Ticks)); 

    return from + randTimeSpan;
} 
```

说明：我使用`NextDouble()`它是因为它给出了一个介于`0.0`和之间的数字`1.0`。在我的解决方案中，您的返回值不会是整数秒。我搬到`rnd`了类/结构上的一个字段。因为最好重复使用一个`Random`实例，而不是每次只需要一个额外的随机数时都创建一个新实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T16:23:51.887

问题是：

```
var randTimeSpan = new TimeSpan((long)(range.TotalSeconds - rnd.Next(0, (int)range.TotalSeconds))); 
```

正在从 TICKS 创建 TimeSpan，而不是从 SECONDS。

你需要：

```
var randTimeSpan = TimeSpan.FromSeconds((long)(range.TotalSeconds - rnd.Next(0, (int)range.TotalSeconds))); 
```

（也请检查演员表 - 它需要双重传递给 FromSeconds）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T16:24:06.750

这是因为[`TimeSpan`' 的构造函数需要 a`long`](http://msdn.microsoft.com/en-us/library/zz841zbz.aspx)预期的滴答声，而不是秒数。

```
var randTimeSpan = new TimeSpan(range.Ticks - rnd.Next(0, range.Ticks)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T20:18:35.020

修复了 ArgumentOutOfRangeException：

```
public static DateTime GetRandomDateTime(DateTime? min = null, DateTime? max = null)
{
    min = min ?? new DateTime(1753, 01, 01);
    max = max ?? new DateTime(9999, 12, 31);

    var range = max.Value - min.Value;
    var randomUpperBound = (Int32) range.TotalSeconds;
    if (randomUpperBound <= 0)
        randomUpperBound = Rnd.Next(1, Int32.MaxValue);

    var randTimeSpan = TimeSpan.FromSeconds((Int64) (range.TotalSeconds - Rnd.Next(0, randomUpperBound)));
    return min.Value.Add(randTimeSpan);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-08T18:48:42.840

我的想法是我们只需要在开始日期时间中添加一些随机数量的刻度，就可以在开始和结束之间获得一个随机日期。所以我的解决方案不会创建任何`TimeSpan`对象。

```
private static readonly Random random = new Random ();
private static readonly object syncLock = new object ();

public static DateTime RandomDate(DateTime from, DateTime to)
{
    lock ( syncLock )
    {
         return from.AddTicks ((long) ( random.NextDouble () * ( to.Ticks - from.Ticks ) ));
    }
 } 
```

# mysql - 根据第一个表中的 2 列从 2 个表中选择

> ID：14505938
> 
> 赞同：0
> 
> 时间：2013-01-24T16:20:24.180
> 
> 标签：mysql

我很难做到这一点。

我有一个名为 1_related 的表

```
id,prod_pack,fk_prod_pack_id,fk_prod_pack_related,fk_prod_pack_related_id
'2', '0', '102', '0', '2482'
'3', '0', '102', '0', '3147'
'2294', '0', '102', '1', '10' 
```

我还有另外 2 个表，分别称为 1_products 和 1_packages

我想根据 fk_prod_pack_related 的值加入任一表的内容（0 表示 1_products 表，1 表示 1_packages 表）

此查询从 1_related 返回第 2 行和第 3 行，并连接 1_products 的内容

```
SELECT 
    r . *, p . *
FROM
    1_related AS r
        INNER JOIN
    1_products as p ON r.fk_prod_pack_related_id = p.id
        and r.fk_prod_pack_related = 0
WHERE
    r.prod_pack = 0
        and r.fk_prod_pack_id = 102 
```

但我也需要来自 1_packages 的数据，所以我尝试了这个，但它什么也没返回

```
SELECT 
    r . *, p . *, s . *
FROM
    1_related AS r
        INNER JOIN
    1_products as p ON r.fk_prod_pack_related_id = p.id
        and r.fk_prod_pack_related = 0
        INNER JOIN
    1_packages as s ON r.fk_prod_pack_related_id = s.id
        and r.fk_prod_pack_related = 1
WHERE
    r.prod_pack = 0
        and r.fk_prod_pack_id = 102 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:30:18.220

您需要左外连接，因为只有一个查询会匹配：

```
SELECT 
    r . *, p . *, s . *
FROM
    1_related AS r
        left outer JOIN
    1_products as p ON r.fk_prod_pack_related_id = p.id
        and r.fk_prod_pack_related = 0
        left outer JOIN
    1_packages as s ON r.fk_prod_pack_related_id = s.id
        and r.fk_prod_pack_related = 1
WHERE
    r.prod_pack = 0
        and r.fk_prod_pack_id = 102 
```

# amazon-web-services - 类似于 Amazon Web Services Cluster GPU 实例的私有云 GPU 虚拟化

> ID：14505941
> 
> 赞同：15
> 
> 时间：2013-01-24T16:20:40.183
> 
> 标签：amazon-web-services, cuda, cloud, gpgpu, openstack

我正在寻找启用基于云的动态 NVIDIA GPU 虚拟化的选项，类似于 AWS 为[Cluster GPU Instances](http://aws.amazon.com/ec2/instance-types/)分配 GPU 的方式。

我的项目正在建立一个内部云。一项要求是能够将 GPU 分配给虚拟机/实例以进行服务器端 CUDA 处理。

USC 似乎正在开发[OpenStack 增强功能](http://wiki.openstack.org/HeterogeneousGpuAcceleratorSupport)以​​支持这一点，但它还没有准备好。如果它在 OpenStack 中功能齐全，这正是我正在寻找的。

[NVIDIA VGX](http://www.nvidia.com/object/vdi-desktop-virtualization.html)似乎只支持将 GPU 分配给[USM](http://www.nvidia.com/object/user-selectable-machines.html)，这是严格的远程桌面 GPU 虚拟化。如果我错了，并且 VGX 确实从虚拟机/实例启用了服务器端 CUDA 计算，那么请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T00:48:06.527

> “基于云的动态 NVIDIA GPU 虚拟化类似于 AWS 为集群 GPU 实例分配 GPU 的方式。”

AWS 并没有真正动态地分配 GPU：每个 GPU 集群计算有 2 个固定的 GPU。所有其他服务器（包括常规集群计算）都没有任何 GPU。即他们没有API，你可以说“GPU or not”，它固定为使用固定硬件的盒子类型。

Xen 上的 pass-thru 模式是专门为您的用例而设计的：将硬件从 Host 传递到 Guest。默认情况下它不是“动态的”，但您可以编写一些代码来选择其中一位客人来获取主机上的每张卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T15:05:57.123

有一个名为 GPUBox 的解决方案可以虚拟化 CUDA 中的设备。它可以在亚马逊或您自己的基础设施上使用。

引自网站（[http://renegatt.com/solutions.php](http://renegatt.com/solutions.php)）：

> GPUBox 软件通过将应用程序和操作系统与底层 GPU 设备分离来简化 GPU 管理。它是一种允许许多用户动态共享同一池中的 GPU 设备的解决方案。(...)GPUBox 支持将 GPU 设备按需配置到具有 Linux 或 Windows 操作系统的物理机或虚拟机。GPU 设备池在用户之间共享，从而降低了总功耗和空闲运行的硬件。

# excel - 在 Excel 2010 数据验证中使用 MOD 与公式不同

> ID：14505942
> 
> 赞同：1
> 
> 时间：2013-01-24T16:20:46.457
> 
> 标签：excel, ms-office, excel-formula

Excel 2010

当给定任何 0.25 增量时，此公式显示 True：

```
=MOD(A1,0.25)=0 
```

但是，当我在数据验证中使用公式（没有前导“=”）时，它总是返回 False。我试过使用 Floor 和 Round，但没有成功。我还尝试过使用全新的工作表，并且仅在出现某种格式问题时才使用公式。我原以为这会奏效。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:45:17.097

它在使用前导 = 时开始工作，因为我引用的是 A1 而不是我应该查看的范围的左上角单元格。这两个错误的组合是问题所在。

# iis-6 - 403 使用主机标头从 IIS 6 禁止，记录为 200

> ID：14505943
> 
> 赞同：0
> 
> 时间：2013-01-24T16:20:56.663
> 
> 标签：iis-6, http-status-code-403, hostheader

我有一个带有 IIS6 的 Windows Server 2003 服务器。我有一个运行良好的主站点。我正在尝试为该主站点下的文件夹创建备用 URL。我现在正在尝试设置主机标头（我已经做过很多次了）并且得到了意想不到的结果：403 Forbidden。

细节：

*   浏览 www.mysite.com/folder 工作正常。
*   我有一个指向同一服务器（相同 IP）的 DNS 条目说：folder.domain.com
*   我在主站点上输入了 folder.domain.com 作为主机头。
*   我希望 folder.domain.com/folder 可以工作，就像 www.mysite.com/folder 一样。--（我认为将来我需要重写一些 url，以摆脱对 /folder 的需求。）

无论如何，在尝试使用该主机标头 URL 时，我总是会收到 403 禁止。403 只是 403...不是 .1、.2 或任何东西。

我检查并排除了一些事情：

*   缺少默认文档：它已设置且正确，如果我尝试获取 folder.domain.com/folder/index.html，我会得到同样的结果。（作为 www.mysite.com/folder/index.html 工作）

*   文件/文件夹权限：我没有得到 401，它适用于 www.mysite.com，它设置为允许匿名，并且 IUSR... 分配正确（我认为）。

*   配置文件：它是基本的 html，所以没有 web.config 可以检查/编辑。（我确实看到了一个 index.php。我不知道 php，所以不确定这是否可能涉及，但我只是想访问 index.html 文件。）

*   劫持连接：为了验证没有其他任何东西拦截了我以新名称与该服务器的连接，我使用 telnet 连接到 folder.domain.com，然后提交了对 www.mysite.com/folder 的 HTTP GET 请求。它工作得很好。所以我连接到同一台服务器。

另外两个奇怪的事情：

*   IIS 日志根本没有记录 403 错误。

*   我请求了一个我知道不存在的页面... folder.domain.com/folder/nothere.html。我仍然得到了 403 禁止，在日志中我找到了那个条目，它有一个 200 状态码！如果我对 www.mysite.com/folder/nothere.html 尝试相同的请求，我会得到预期的 404 未找到。

更复杂的是，我只能通过网络与中国的一个人访问机器，而我在美国......所以我必须收集我得到的任何想法/评论/建议并尝试所有这些如果我没有立即回复结果，请耐心等待。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:23:13.560

我最终发现，一个我不认识的名为 IBsys.dll 的 ISAPI 过滤器实际上是中国生产的服务器安全软件的一部分。

该软件正在过滤所有请求并阻止它不知道的请求。该软件必须使用新的主机标头进行配置。

因此，如果您遇到类似情况，请仔细检查您的 ISAPI 过滤器。

# vb.net - vb.net网站登录

> ID：14505944
> 
> 赞同：0
> 
> 时间：2013-01-24T16:20:56.793
> 
> 标签：vb.net, post, login, html-agility-pack

我正在尝试使用 vb.net 中的 HTML Agility Pack 解析网页。当我调用要解析的页面时，我会被重定向到登录页面。这不是问题，因为我有这个网站的帐户，但我需要知道如何从我的程序中登录到这个页面。到目前为止，我的代码如下：

```
Dim logincookie As CookieContainer
Public cookies As New CookieContainer

 Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    'Web Scrape Balance Sheet - Quarterly
    Dim wreqBalQtr As HttpWebRequest = WebRequest.Create("http://www.reuters.com/finance/stocks/incomeStatement/detail?stmtType=BAL&perType=INT&symbol=goog")
    wreqBalQtr.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5"
    wreqBalQtr.Method = "get"
    Dim proxBalQtr As IWebProxy = wreqBalQtr.Proxy
    proxBalQtr.Credentials = CredentialCache.DefaultCredentials
    Dim documentBalQtr As New HtmlAgilityPack.HtmlDocument
    Dim webBalQtr As New HtmlAgilityPack.HtmlWeb
    webBalQtr.UseCookies = True
    webBalQtr.PreRequest = New HtmlAgilityPack.HtmlWeb.PreRequestHandler(AddressOf onPreReq)
    wreqBalQtr.CookieContainer = cookies
    Dim resBalQtr As HttpWebResponse = wreqBalQtr.GetResponse()
    documentBalQtr.Load(resBalQtr.GetResponseStream, True)

    Dim str As String
    str = documentBalQtr.DocumentNode.OuterHtml
    If str.Contains("Enter your Reuters.com account info") = True Then

        'NEED TO LOG INTO THE PAGE THAT IS CURRENTLY PULLED UP

        Dim TotalCurrentAssets = documentBalQtr.DocumentNode.SelectSingleNode("//table[@class='dataTable financials']/tr[13]/td[3]")
        Dim TotalCurrentLiabilities = documentBalQtr.DocumentNode.SelectSingleNode("//table[@class='dataTable financials']//tr[29]//td[1]")
        MsgBox(TotalCurrentAssets.InnerText)
    Else
        Dim TotalCurrentAssets = documentBalQtr.DocumentNode.SelectSingleNode("//table[@class='dataTable financials']/tr[13]/td[3]")
        Dim TotalCurrentLiabilities = documentBalQtr.DocumentNode.SelectSingleNode("//table[@class='dataTable financials']//tr[29]//td[1]")
        MsgBox(TotalCurrentAssets.InnerText)
    End If

End Sub

Private Function onPreReq(ByVal req As HttpWebRequest)

    req.CookieContainer = cookies
    Return True

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:22:48.740

您可以使用基本的 .NET 库（HTTP 类）。我还会查看 WCF（Windows Communication Foundation），看看它是否有更简单的方法。

如果幸运的话，该站点正在使用 HTTP 基本身份验证，这很容易编程。我会检查 HTML 和 HTTP 标头以查看需要哪种身份验证方法。

# qt - Qt + QSortFilterProxyModel + QStandardItemModel + QTreeView + 删除行时的粉碎

> ID：14505946
> 
> 赞同：2
> 
> 时间：2013-01-24T16:20:59.937
> 
> 标签：qt, qtreeview, qsortfilterproxymodel

将 QTreeView 与 QStandardItemModel 和 QSortFilterProxyModel 一起使用时出现问题。当我尝试从源模型中删除行时，我的程序崩溃了。在这个地方

```
parent->removeRow(item->row()); 
```

[洞项目（tar.gz）](http://yadi.sk/d/uZk-Kfc025UUP)

[帕斯宾网](http://pastebin.com/1XJkawan)

堆栈看起来像这样

```
0       ??      /usr/lib/x86_64-linux-gnu/libQtGui.so.4 0
1       ??      /usr/lib/x86_64-linux-gnu/libQtGui.so.4 0
2       QMetaObject::activate(QObject*, QMetaObject const*, int, void**)         /usr/lib/x86_64-linux-gnu/libQtCore.so.4 
3       QAbstractItemModel::rowsRemoved(QModelIndex const&, int, int)   /usr/lib/x86_64-linux-gnu/libQtCore.so.4 
4       QAbstractItemModel::endRemoveRows()     /usr/lib/x86_64-linux-gnu/libQtCore.so.4
5       Widget::remove_items    widget.cpp
6       Widget::Widget          widget.cpp
7       main                    main.cpp 
```

我正在使用带有 Qt 4.8.3 的 kubuntu 12.10。

我的代码有错误还是Qt的错误？

谢谢。

* * *

我尝试使用 4.8.4 构建项目并且它有效。所以我认为，这是 Qt 的错误

# php - 网站重定向文件夹到 php 脚本

> ID：14505953
> 
> 赞同：1
> 
> 时间：2013-01-24T16:21:26.930
> 
> 标签：php, redirect, web, directory

我正在编写一个网站，我想重定向特定的 URL，例如

```
 www.example.org/p/home
    www.example.org/p/user/th3falc0n 
```

到我的剧本

```
 www.example.org/index.php?page=home
    www.example.org/index.php?page=user/th3falc0n 
```

没有用户意识到服务器正在将此页面重定向到脚本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:23:31.807

你需要 .htaccess 重写来做到这一点 - [http://www.brand3.com/blogs/htaccess-mod_rewrite-ultimate-guide/](http://www.branded3.com/blogs/htaccess-mod_rewrite-ultimate-guide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:24:58.653

使用 .htaccess 通常是解决此问题的最佳方法——它是一个告诉 Apache（或您的 Web 服务器软件）请求应该去哪里的文件。

这是有关此主题的先前问题： [有关 htaccess 中的动态重定向规则的帮助](https://stackoverflow.com/questions/2688689/help-regarding-dynamic-redirect-rule-in-htaccess)

此处引用的答案：

> [http://www.abc.com/site/var1](http://www.abc.com/site/var1) [http://www.abc.com/site/var2](http://www.abc.com/site/var2)这样，您可以确保仅在浏览伪“site/”目录而不是影响任何其他 URI。这是基于上述模式的重写规则。
> 
> RewriteRule 上的 RewriteEngine ^site/([^/.]+)/?$ index.php?u=$1 [L,NC,QSA] 除“/site/.../”之外的任何其他地址都不会受到这条规则，这意味着您不必担心设置一些要避免的地址。这使事情尽可能简单。
> 
> 您不必使用“站点”——您可以使用任何适合您目的的名称。

# perl - 在 Perl 中使用 XML::DOM 构建哈希树

> ID：14505956
> 
> 赞同：1
> 
> 时间：2013-01-24T16:21:34.527
> 
> 标签：perl, hash, xml-parsing, xmldom

我想使用该[`XML::DOM`](https://metacpan.org/module/XML%3a%3aDOM)模块解析一个简单的 XML 文档以进行散列。

```
<?xml version ="1.0"?>
<Select>
  <book>
    <prop Name = "prop1" Title = "title1" />
    <prop Name = "prop2" Title = "title2" />
  </book>
  <fruit>
    <prop Name = "prop3" Title = "title3" />
    <prop Name = "prop4" Title = "title4" />
  </fruit>
</Select> 
```

并且预期的输出是-

```
$VAR1 = {
  Select => {
    book  => {
               prop => [
                 { Name => "prop1", Title => "title1" },
                 { Name => "prop2", Title => "title2" },
               ],
             },
    fruit => {
               prop => [
                 { Name => "prop3", Title => "title3" },
                 { Name => "prop4", Title => "title4" },
               ],
             },
  },
} 
```

我写的代码是：

```
use strict;
use XML::DOM;
use Data::Dumper;

my @stack;
my %hash;
push @stack,\%hash;

my $parser = new XML::DOM::Parser;
my $doc = $parser -> parsefile('demo.xml');
my $root = $doc->getDocumentElement();
my $rootnode = $root->getTagName;

################################################################

foreach my $node ($doc->getElementsByTagName($rootnode)){
    push @stack,$stack[$#stack]->{$rootnode};
    my @childnode = $node->getChildNodes();

    foreach my $child(@childnode){
        if($child->isElementNode){
            my $childname = $child->getNodeName();
            pop(@stack);
            push @stack,$stack[$#stack]->{$rootnode} = {$childname,{}};
            my @childnodes2 = $child->getChildNodes();

            foreach my $subchild(@childnodes2){
                if($subchild->isElementNode){
                    my $subchildname = $subchild->getNodeName();

                    my $name = $subchild->getAttributes->getNamedItem('Name')->getNodeValue;
                    my $title = $subchild->getAttributes->getNamedItem('Title')->getNodeValue;
                    pop(@stack);
                    push @stack,$stack[$#stack]->{$rootnode}->{$child->getNodeName()} = {$subchildname,{}};    #{} contains $name or $title
                }
            }
        }
    }
}

print Dumper(\%hash); 
```

我认为，我无法正确推送和弹出数组。另外，我不想使用`XML::Simple`和递归。

我怎样才能在 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:04:22.000

这是一个可能的解决方案，假设整个文档遵循严格的模式，其中一个`Select`作为根，任何不同名称的子节点（不会处理冲突），以及`prop`这些子节点的任意数量的 s，其中的`Name`and`Title`字段一个人很有趣。

这是序言，我也用于`Carp`更好的错误处理。

```
#!/usr/bin/perl

use strict; use warnings; use 5.012;
use XML::DOM;
use Data::Dumper;
use Carp; 
```

这是主要代码。它启动一个解析器（假设文档位于特殊`DATA`文件句柄中），并将生成的文档传递给`make_data_structure`子例程。我经常考虑让脚本`die`尽早发现错误。

```
{
    my $xml_parser = XML::DOM::Parser->new;
    my $document_string = do{ local $/=undef; <DATA> };
    my $document = $xml_parser->parse($document_string) or die;

    my $data_structure = make_data_structure($document) or die;
    print Dumper $data_structure;
} 
```

这是完成所有工作的子程序。它需要一个文档并返回一个符合您的格式的 hashref。

```
sub make_data_structure {
    my ($document) = @_;
    my $root = $document->getDocumentElement;
    my $rootname = $root->getTagName // "undef";

    didnt_expect_anything(but=> "Select", as=> "the root tag", got=> $rootname)
        unless $rootname eq "Select";

    my $dsc = +{ $rootname => +{} };
    CHILD:
    for my $child ($root->getChildNodes) {
        next CHILD unless $child->isElementNode;

        my $childname = $child->getTagName
            // couldnt_get("the tag name", of=> "a $rootname child");

        $dsc->{$rootname}{$childname} = undef; # unneccessary iff we have props
        PROP:
        for my $prop ($child->getChildNodes) {
            next PROP unless $prop->isElementNode;

            my $propname = $prop->getTagName // "undef";

            die didnt_expect_anything(but=> "prop", got=> $propname)
                unless $propname eq "prop";

            my $attributes = $prop->getAttributes
                // couldnt_get("the attributes", of=> "a prop node");

            # for minimum code duplication, and maximum error handling,
            # use dataflow programming, and `map`. 
            my ($Name, $Title) =
                map { $_->getNodeValue // couldnt_get("the node value", of=>"the attribute") }
                map { $attributes->getNamedItem($_) // couldnt_get("the named item $_", of=> "the prop attributes") }
                    qw/Name Title/;
            my $propvalue = +{
                Name    => $Name,
                Title   => $Title,
            };

            push @{ $dsc->{$rootname}{$childname}{$propname} }, $propvalue;
        }
    }
    return $dsc;
} 
```

以下是自定义错误处理子例程，以使上述代码更具表现力。

```
sub didnt_expect_anything {
    my %args = @_;
    my $expected = $args{but} // croak qq(required named argument "but" missing);
    my $role     = $args{as}  // "a tag name";
    my $instead  = $args{got} // croak qq(required named argument "got" missing);
    croak qq(Didn't expect anything but "$expected" as $role here, got "$instead");
}
sub couldnt_get {
    my ($what, %args) = @_;
    my $of_what = $args{of} // croak qq(required named argument "of" missing);
    croak qq(Couldn't get $what of $of_what);
} 
```

当然，会产生正确的输出，但这*不是*到达那里的正确方式——CPAN 是为使用而设计的。

您的实现的部分问题是（除了缺少错误处理），您使用“堆栈”做了一些复杂的体操。

在外循环的第一次迭代之前，`@stack`是`+{}`（对空哈希的引用）。

该行`$stack[$#stack]->{$rootnode}`访问堆栈的最后一个元素（最好写为`$stack[-1]`），将值视为哈希引用，并查找名为 的条目`$rootnode`。这评估为`undef`。然后将此*值*压入堆栈。混乱随之而来。

# javascript - 图像根据鼠标的位置而变化

> ID：14505958
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:21:38.980
> 
> 标签：javascript, jquery, mouseevent, jquery-events, mousemove

如何根据鼠标位置实现图像更改：left、top-left、top、top-right、right、bottom-right、bottom、bottom-left 和点击。

这是我正在尝试做的一个例子：

[http://z6creation.net/fr/accueil](http://z6creation.net/fr/accueil)

我尝试过在 Stack Overflow 上找到一个类似的主题，但我似乎无法让左、右、上和下正常工作：

[用鼠标位置改变图像](https://stackoverflow.com/questions/9476843/changing-a-image-with-mouse-positions)

这是我一直在使用的代码

[jsfiddle](http://jsfiddle.net/hhy5N/43/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:46:46.193

你可以通过查看他的 js 文件来了解他是如何做到这一点的。他有一个名为 site.faces.js 的 js 文件

```
$.extend(Site, {
    Faces: {

        /* Attributes */

        center: {
            'left': 0,
            'top': 0
        },
        config: {
            'persons': ['eric', 'fabian', 'lievin', 'nicolas', 'pascale', 'fred'],
            'nbpositions': 8 
        },
        currentImage: null,

        /* Methods */

        angle: function (cursor) {
            var angle =  Math.atan2(0-cursor.y,0-cursor.x)*(180 / Math.PI);
            if(angle < 0) { angle += 360;}
            return angle;
        },

        distance: function(cursor) { 
            return Math.sqrt( Math.pow((0 - cursor.y),2) + Math.pow((0 - cursor.x),2) ); 
        },

        setCenterFace: function() {
            Site.Faces.center = $("#face").offset();
            if (parseInt($('#face').css('padding-top'))==0) {
                Site.Faces.center.left += 720/2;
                Site.Faces.center.top += 480/2;
            } else {
                Site.Faces.center.left += $("#face").width()/2;
                Site.Faces.center.top += parseInt($('#face').css('padding-top'))/2;
            }
        },

        init: function(config) {
            if (typeof config!='undefined') {
                $.extend(this.config, config);
            }
            if (typeof this.config.person=='undefined') {
                 this.config.person = this.config.persons[Math.floor(Math.random()*this.config.persons.length)];
            }
            /* 
                To force a face, use this...
                this.config['person'] = 'fabian';
            */
            $('#face').addClass('face-'+this.config['person']);
            if ($('html').hasClass('touch')) { 
                $('#face').css({
                    'background-image': 'url('+Shin.href(';img/site/faces/'+this.config['person']+'.jpg')+')'
                });
                $('.face-'+this.config['person']).fadeIn();
                $(window).resize(function(){
                    var bgPositionX = '0px';
                    if ($('#face').css('padding-top')!='0px') {
                        bgPositionX = "center";
                    }
                    $('#face').css('background-position', bgPositionX+' 0px');
                });
                $(window).resize();
            } else {
                $(window).resize(function(){
                    Site.Faces.setCenterFace();
                    Site.Faces.showImage(9);
                });
                Site.Faces.preloadImage(Shin.href(';img/site/faces/'+this.config['person']+'_mixed.jpg'), function() {
                    $(window).resize();
                    var offset = null;
                    var cursor = {
                        x: 0,
                        y: 0
                    };
                    $('body').mousemove(function(e) {
                        cursor.x = (e.pageX - Site.Faces.center.left);
                        cursor.y = (e.pageY - Site.Faces.center.top);
                        Site.Faces.manageImage(cursor, 'mousemove');
                    });
                    $('a, #face').bind('mousedown',function() {
                        Site.Faces.showImage(10)
                    });
                });
            }
        },

        manageImage: function(cursor, event) {
            if (event == 'mousemove') {
                var centerDistance = 100
                if ($('#face').css('padding-top')!='0px') { 
                    centerDistance = 50
                }
                if (this.distance(cursor)<centerDistance) { 
                    if(Site.Faces.currentImage != 9 && Site.Faces.currentImage != 10) {
                        Site.Faces.showImage(9);
                    }
                } else {
                    var angleByPosition = 360/this.config['nbpositions'];
                    var numImage = Math.ceil(( this.angle(cursor) + (angleByPosition/2))/angleByPosition);
                    numImage = (numImage>this.config['nbpositions'])?1:numImage;
                    if (Site.Faces.currentImage != numImage) {
                        Site.Faces.showImage(numImage);                     
                    }
                }
            }
        },

        preloadImage: function(src, callback) {
            var img = new Image();
            img.src = src;
            img.onload = function () {
                $('#face').css('background-image','url('+src+')');
                $('.face-'+Site.Faces.config['person']).fadeIn();
                if (typeof callback=="function") callback();
            };
        },

        showImage: function(num) {
            Site.Faces.currentImage = num;
            var height = (480*(10-num));
            var bgPositionX = '0px';
            if ($('#face').css('padding-top')!='0px') {
                height = (200*(10-num));
                bgPositionX = "center";
            }
            $('#face').css({
                backgroundPosition: bgPositionX+' -'+height+'px'
            });
        }

    }
}); 
```

# c# - 当 e.Cancel = true for DateTime 时无法关闭表单

> ID：14505963
> 
> 赞同：1
> 
> 时间：2013-01-24T16:22:13.383
> 
> 标签：c#, winforms

输入无效日期（必须是当前日期或过去日期）后，我有 e.Cancel = true ，但是退出按钮的关闭事件不会触发。我取出了 e.Canel = true 声明，一切似乎都运行良好，但我担心这会在未来引起另一个问题。对此进行编码的正确方法是什么？

```
private void maskedTextBoxDate_TypeValidationCompleted(object sender, TypeValidationEventArgs e)
    {
        if (!e.IsValidInput)
        {
            toolTip1.ToolTipTitle = "Invalid Date";
            toolTip1.Show("The data you supplied must be a valid date in the format mm/dd/yyyy.", maskedTextBoxDate, 40, 25, 2000);
        }
        else
        {
            //Now that the type has passed basic type validation, enforce more specific type rules.
            DateTime userDate = (DateTime)e.ReturnValue;
            if (userDate > DateTime.Today)
            {
                toolTip1.ToolTipTitle = "Invalid Date";         
                toolTip1.Show("The date can't be greater than today's date.", maskedTextBoxDate, 40, 25, 2000);
                //Cancel property: true if the event should be canceled; otherwise false
                e.Cancel = true;

            }
        }

    } 
```

退出按钮关闭事件：

```
private void cmdExit_Click(object sender, EventArgs e)
    {
        this.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:12:32.020

如果您以这种方式取消类型验证事件，则 MaskedTextBox 永远不会失去焦点。这个想法是您不能将数据提交到无效的文本框中，因此它“强制”用户在继续之前输入有效数据。您必须决定如何处理文本框中未验证的数据。

解决此问题的一种方法是将 MaskedTextBox 上的 CausesValidation 属性设置为 false。这可以防止在控件失去焦点时触发验证序列。如果您这样做，您将需要以另一种方式触发验证，例如按钮（例如，“保存”）。根据您正在寻找的用户体验，这可能不可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:22:28.603

检查日期不是在 Date 控件的 OnExit 中，而是在窗体的 Close 事件中，并将 e.cancel 设置为 true 或 false。无论如何，当用户无法从控件中逃脱时，这对用户来说是非常烦人的，通常是因为他不知道格式并且他只是想逃脱:-)

斯蒂芬·哈利米

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:43:22.723

有一个`Control`名为 的属性`CausesValidation`。这指示哪些控件在获得焦点时将导致先前获得焦点的控件生效。

放`maskedTextBoxDate.CausesValidation = true`

对于每个父控件，即窗体和它之间的每个容器`maskedTextBoxDate`，设置`CausesValidation = false`

这将允许您关闭或操作表单，而不会导致控件验证。

# c# - 确保 A 类只能由 B 类创建

> ID：14505964
> 
> 赞同：1
> 
> 时间：2013-01-24T16:22:15.757
> 
> 标签：c#, constructor, factory

我已经阅读了一些关于 SO（和其他地方）关于这个主题的讨论，但无法收集到明确的答案。

我想确保给定的类 A 只能由特定的类 B 创建。在 C++ 中，我将 A 的构造函数设为私有，并将 B 指定为友元。现在只有 B 可以创建 A。

如果确实有的话，在 C# 中这样做的惯用方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T16:23:27.733

您可以为此使用*私有*内部类。

但是，这用途有限。

```
class B
{
  private class A
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T16:28:08.000

您不能在 C# 中使用 C++ 风格的方法。

我之前也遇到过这种情况，一般都是通过制作类A `abstract`（需要继承）和构造函数`protected`（只有继承自类的类才能调用构造函数）来解决。

然后我在 B 类中创建一个`private`类（称为“_A”之类的东西）并从 A 继承。（_A 中没有其他代码。）_A 定义了一个公共的构造函数——因此对 B 可见（并且仅对 B 可见，因为 _A 是私人的）。

在 B 中，您可以创建 _A 的实例并将它们作为 A 返回（通过[polymorphism](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)）。

对于公共接口，我更喜欢这种方法，因为如果在其中实现 A 类，我的 B 类代码文件最终会很大。这只是我的偏好——其他人可能有不同的看法。

```
abstract class A
{

    protected A()
    {
    }

    /* implementation details... */

}

public class B
{

    public A GetInstance()
    {
        return new _A();
    }

    private class _A : A
    {

        public _A()
        {
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:36:09.393

这是可行的，但以令人讨厌的方式。可以说比 C++ 中的“朋友”概念更讨厌。

您可以声明私有构造函数和静态工厂方法，您将只允许特定类型调用此方法（通过检查 StackFrame）。

```
public class Foo
{
  private Foo() { }

  public static Foo Create()
  {
    if(GetCallingType() != typeof(Bar))
    {
      throw new Exception("Only Bar can create Foo");
    }
    return new Foo();
  }

  private static Type GetCallingType()
  {
    return new StackFrame(2, false).GetMethod().DeclaringType;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T16:24:10.183

我假设外部代码需要引用`A`，但不应该能够创建实例。

没有简单的方法可以实现这一点。如果你 make`A`的构造函数`internal`，那么只有在同一个程序集中的代码`A`才能构造它（不使用反射）。

您*可以*创建一个实例[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)并检查索引 1 处的框架，看看它是否来自 的方法`B`，但这可能会导致性能问题，并且是一种 hack。

# javascript - 根据一天中的时间不断改变背景颜色

> ID：14505965
> 
> 赞同：1
> 
> 时间：2013-01-24T16:22:16.630
> 
> 标签：javascript, jquery

我正在寻找编写一个脚本：

1.  每 1 秒不断改变背景颜色。
2.  当您第一次访问网页时，会根据一天中的时间设置起始颜色。因此，如果我在每天早上 7 点（或接近那个时间）访问该网站，无论我的浏览器是否打开 10 小时，它都将始终是红色的份额。

如果没有大量的 IF 语句，我怎么能做到这一点？

看这里：[https](https://stackoverflow.com/a/1455177/560287) ://stackoverflow.com/a/1455177/560287 它说有 16776960 种不同的颜色，我不需要那么多但是我怎么能把它减少到一个`setInterval`所以它每秒都会从彩虹的颜色中消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T02:21:07.273

您可以计算两种颜色之间的 rgb/a 差异，并在当前白天增加/减少它。首先，我们需要为我们完成颜色解析部分的东西。

```
var parseColor = function (start, end, now) {
    return [
        start[0] + now * (end[0] - start[0]) | 0,
        start[1] + now * (end[1] - start[1]) | 0,
        start[2] + now * (end[2] - start[2]) | 0,
        (start[3] && end[3]) ? (start[3] + now * (end[3] - start[3]) | 0) : 1
    ];
}; 
```

现在，让我们围绕日期计算和颜色解析定义一个非常简单的包装器。

```
var daytimeColor = function (start, end, date) {
    date = date || new Date();
    var hour = date.getHours();
    var minute = date.getMinutes();
    var now = hour * minute / 1440;
    var rgba = parseColor(start, end, now);

    return 'rgba(' + rgba.join() + ')';
}; 
```

最后但同样重要的是调用它并将您的颜色数组传递给：

```
 var start = [255, 0, 0];
 var end = [0, 0, 255];
 document.body.style.backgroundColor = daytimeColor(start, end); 
```

[http://jsfiddle.net/yckart/gyX3K/](http://jsfiddle.net/yckart/gyX3K/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:26:17.367

制作一个每小时的颜色数组，每小时一个。

```
var hourly = "#ff00cc,red,green,blue...".split(",") 
```

然后将背景设置为与当前小时匹配的元素：

```
var d = new Date();
var h = d.getHours();
$('body').css('background-color',hourly[h]) 
```

将此脚本放在页面顶部，并在重新加载时设置颜色。

这不是“不断”变化的，但它为您提供了一个起点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T16:40:51.337

这有效：

首先让我们创建将执行此操作的函数：

```
 "use strict";
            function changeColor() {
    //rgb
    console.log('event fired');
    var colors = [0, 0, 0];
    var hour = new Date().getHours();
    console.log(hour);

    //Will get an valid rgb color
    var color = parseInt(255/24*hour);
    console.log(color);
    for(var i = 0; i < colors.length; i++) {
        colors[i] = color;
    }
    //add the color to the element you want:
    document.body.style.backgroundColor = "rgb("+colors[0] + "," + colors[1] + "," + colors[2] + ")";
    console.log("event fired. color get:" + colors[0] + colors[1] + colors[2]);
  } 
```

之后，让我们创建一个每 30 分钟触发一次的事件（颜色每 30 分钟更改一次）：

```
setInterval(changeColor,1800000); 
```

# opengl - 在openGL中纹理立方体的最佳方法

> ID：14505969
> 
> 赞同：6
> 
> 时间：2013-01-24T16:22:26.100
> 
> 标签：opengl, textures, vertex-array

哪个是纹理立方体的最佳方式（最低内存，最快速度）？过了一会儿，我找到了这个解决方案：

数据结构：

```
GLfloat Cube::vertices[] =
 {-0.5f, 0.0f, 0.5f,   0.5f, 0.0f, 0.5f,   0.5f, 1.0f, 0.5f,  -0.5f, 1.0f, 0.5f,
  -0.5f, 1.0f, -0.5f,  0.5f, 1.0f, -0.5f,  0.5f, 0.0f, -0.5f, -0.5f, 0.0f, -0.5f,
  0.5f, 0.0f, 0.5f,   0.5f, 0.0f, -0.5f,  0.5f, 1.0f, -0.5f,  0.5f, 1.0f, 0.5f,
  -0.5f, 0.0f, -0.5f,  -0.5f, 0.0f, 0.5f,  -0.5f, 1.0f, 0.5f, -0.5f, 1.0f, -0.5f
  };

 GLfloat Cube::texcoords[] = { 0.0,0.0, 1.0,0.0, 1.0,1.0, 0.0,1.0,
                               0.0,0.0, 1.0,0.0, 1.0,1.0, 0.0,1.0,
                               0.0,0.0, 1.0,0.0, 1.0,1.0, 0.0,1.0,
                               0.0,0.0, 1.0,0.0, 1.0,1.0, 0.0,1.0
                             };

 GLubyte Cube::cubeIndices[24] = {0,1,2,3, 4,5,6,7, 3,2,5,4, 7,6,1,0,
                                  8,9,10,11, 12,13,14,15}; 
```

绘图功能：

```
 glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, texture);
        glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
        glColor3f(1.0f, 1.0f, 1.0f);

        glEnableClientState(GL_TEXTURE_COORD_ARRAY);
        glEnableClientState(GL_VERTEX_ARRAY);

        glTexCoordPointer(2, GL_FLOAT, 0, texcoords);
        glVertexPointer(3, GL_FLOAT, 0, vertices);

        glDrawElements(GL_QUADS, 24, GL_UNSIGNED_BYTE, cubeIndices);
        glDisableClientState(GL_VERTEX_ARRAY);
        //glDisableClientState(GL_COLOR_ARRAY);
        glDisable(GL_TEXTURE_2D); 
```

如您所见，结果是正确的： ![立方体](../Images/f5973e1c3129d2a603e7de66c7c2a874.png)

但要恢复这个结果，我必须重新定义一些顶点（`vertices`数组中有 16 个 3D 点），否则纹理无法在 DrawElement 函数中映射。

有人知道在顶点数组中纹理立方体的更好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:47:14.900

我在使用 opengl es 时遇到了同样的问题。我的研究表明没有其他方法可以做到这一点，因为每个顶点只能有一个与之关联的纹理坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:30:40.743

好吧，您可以使用立方体贴图纹理，您的顶点着色器将在其中处理纹理坐标。生成 tex 坐标所需要做的就是在顶点着色器中添加这一行：

```
out vec2 texcoords;
texcoords=normalize(vertex_data.xy) 
```

无需重新定义顶点，您也可以通过使用顶点缓冲区对象来提高性能。

# c++ - 文字运算符模板在 GCC 4.8 中不起作用

> ID：14505971
> 
> 赞同：2
> 
> 时间：2013-01-24T16:22:30.937
> 
> 标签：c++, arrays, templates, metaprogramming, literals

我在 GCC 4.8 中尝试了以下代码：

```
#include <iostream>
using namespace std;

template <typename T, T... vs>
struct integral_list {
    typedef T elem_type;
};
template <typename T, T... vs> 
struct gen_array {
    static const T data[sizeof...(vs)];
};
template <typename T, T... vs> 
const T gen_array<T, vs...>::data[sizeof...(vs)] = { vs... };

template <char... cs>
constexpr auto operator "" _lit() -> integral_list<char, cs...> {
    return declval<integral_list<char, cs...>>();
}

int main() {
    int (& data)[4] = gen_array<char, decltype("abcd"_lit)>::data;
    for (int i = 0; i < 4; ++i)
        cout << data[i] << endl;
} 
```

并得到

> tester.cpp:21:48: 错误: 无法使用 'const char [5]'、'unsigned int' 参数找到字符串文字运算符 'operator"" _lit'

而 C++11 标准说

> 13.5.8.5：文字运算符模板的声明应具有空的参数声明子句，并且其模板参数列表应具有单个模板参数，该模板参数是具有元素的非类型模板参数包（14.5.3）输入字符。

所以要么我没有弄清楚标准线，要么 GCC 变得很奇怪。你能帮我解决这个难题吗？如果没有，是否有任何其他方法可以实现将字符串文字转换为可变参数模板的参数列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:24:51.510

您不能将文字运算符模板与字符串文字一起使用，而只能与数字文字一起使用。

§ 2.14.8 第 5 段：

> 如果 L 是用户定义字符串文字，则令 str 为不带 ud 后缀的文字，令 len 为 str 中的代码单元数（即，其长度不包括终止空字符）。文字 L 被视为形式的调用

```
operator "" X (str , len) 
```

尽管如此，可以使用参数字符串进行一些编译时计算。简单的例子，可能作为模型有用：

```
#include <iostream>

constexpr unsigned long operator"" _mylong(const char* s, size_t l) {
  return l == 0 ? 0UL : (s[l - 1] - '0') + 10 * operator"" _mylong(s, l - 1);
}

int main() {
  std::cout << "1492888888888888"_mylong << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T14:33:00.010

在 gcc 4.9 中它是可用的（你可能需要从 SVN 编译它）

[http://gcc.gnu.org/ml/gcc-patches/2013-04/msg00998.html](http://gcc.gnu.org/ml/gcc-patches/2013-04/msg00998.html)

# jquery - jQuery.ScrollTo - 当我滚动到某个锚点时，如何向导航项添加一个类？

> ID：14505981
> 
> 赞同：0
> 
> 时间：2013-01-24T16:23:07.300
> 
> 标签：jquery, scroll

我有一个使用 jQuery.ScrollTo 的单页网站，其布局如下：

```
<ul>
<li><a href="#section1" id="item01">Menu Item 1</a></li>
<li><a href="#section2" id="item02">Menu Item 2</a></li>
<li><a href="#section3" id="item03">Menu Item 3</a></li>
<li><a href="#section4" id="item04">Menu Item 4</a></li>
</ul>

<div id="section1">
...content...
</div>
<div id="section2">
...content...
</div>
<div id="section3">
...content...
</div>
<div id="section4">
...content...
</div> 
```

我想要达到的行为是，当我滚动到某个 div 而不单击菜单中的链接时，与该 div 相关的锚的类要更改。

这可以使用 jQuery.scrollTo 脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:29:05.680

我不相信[scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)有内置的。但是另一个名为[Waypoints](http://imakewebthings.com/jquery-waypoints/)的插件会给你这个功能。

它最终看起来像这样：

```
$('.thing').waypoint(function(direction) {
  alert('Top of thing hit top of viewport.');
}); 
```

# sql-server - 在 SQL Server 表值函数中声明 XML 命名空间时出现问题

> ID：14505982
> 
> 赞同：-1
> 
> 时间：2013-01-24T16:23:07.807
> 
> 标签：sql-server, tsql, xpath

我在以下表值函数中包含 XML 命名空间时遇到问题。我需要这个命名空间来执行 xpath 连接。问题似乎是我使用**WITH**方法，但是当我在直接 SQL 中执行查询时需要这种语法。

确切的错误是：

> “‘默认’附近的语法不正确。预期的 ID 或 QUOTED_ID。”

有谁知道在这个 T-SQL 表值函数体中包含 XML 命名空间的确切语法？这是 T-SQL 代码：

使用 [上下文] 去

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[GetStuff]()
RETURNS @X TABLE(
  DisplayName NVARCHAR(250) NULL,
  StandardCode NVARCHAR(250) NULL
)
--WITH RETURNS NULL ON NULL INPUT
AS      
BEGIN

DECLARE @MyTempTable  TABLE ( 
  DisplayName NVARCHAR(250) NULL,
  StandardCode NVARCHAR(250) NULL
);

;WITH XMLNAMESPACES (default 'http://www.mynamespace.org/someSchema')

INSERT INTO @MyTempTable (DisplayName, StandardCode)
    SELECT Distinct OI.DisplayName, OI.StandardCode
    FROM db..Actor B
    JOIN db..Part DP ON B.Id = DP.Id
    JOIN db..Intent OI ON OI.StandardCode = DP.XML.value('(/US/California/Orange/LA/Pizza)[1]','nvarchar(max)')
    JOIN db..Status PS ON B.Id = PS.Id
    WHERE PS.StandardCode in ('Happy','Employed')
    AND OI.Active = 1
    ORDER BY OI.DisplayName

  RETURN;

  END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:50:55.957

我认为这不能解决语法错误，但是您正在创建第二个表变量。这：

```
ALTER FUNCTION [dbo].[GetStuff]()
RETURNS @X TABLE(
  DisplayName NVARCHAR(250) NULL,
  StandardCode NVARCHAR(250) NULL
)
--WITH RETURNS NULL ON NULL INPUT
AS      
BEGIN

DECLARE @MyTempTable  TABLE ( 
  DisplayName NVARCHAR(250) NULL,
  StandardCode NVARCHAR(250) NULL
);

;WITH ... INSERT @MyTempTable ... 
```

应该：

```
ALTER FUNCTION [dbo].[GetStuff]()
RETURNS @X TABLE(
  DisplayName NVARCHAR(250) NULL,
  StandardCode NVARCHAR(250) NULL
)
--WITH RETURNS NULL ON NULL INPUT
AS      
BEGIN

;WITH ... INSERT @X ... 
```

# php - 将 jquery datepicker 创建的日期转换为标准的 mysql 日期格式

> ID：14505984
> 
> 赞同：2
> 
> 时间：2013-01-24T16:23:16.897
> 
> 标签：php, jquery, mysql, date, datetime

我在日记页面上使用以下 jquery 日期和时间选择器。 [http://trentrichardson.com/examples/timepicker/#rest_examples](http://trentrichardson.com/examples/timepicker/#rest_examples)

它快速且易于使用，并且使日期易于阅读，但我遇到的问题是我不确定如何将其转换为标准的 mysql 日期格式以将其保存到数据库中。

在我选择日期和时间的那一刻，它会将其添加到时间日期输入框中，如下所示>>2013 年 1 月 9 日星期三 01:43 pm

如果我然后点击提交，它不会保存到数据库中。

有谁知道我如何将其转换为处理发布数据的 php 格式并像往常一样保存它，因为它驱使我绕弯试图找出一种转换它的方法？

我当前用于 jquery 部分的代码如下：

```
<script type="text/javascript">
$(function(){
$('#timedate').datetimepicker({
timeFormat: "hh:mm tt",
dateFormat: "D MM d, yy"
 });});</script> 
```

它创建了一个日期，如：

```
 Wed January 9, 2013 01:43 pm 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T16:25:07.450

使用[`DateTime::createFromFormat()`](http://php.net/manual/en/datetime.createfromformat.php)：

```
$datetime = DateTime::createFromFormat("D F d, Y H:i a", 'Wed January 9, 2013 01:43 pm');
echo $datetime->format("Y-m-d H:i:s"); 
```

[确认工作](http://codepad.viper-7.com/QKoqfG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:29:48.627

为您的日期选择器格式使用以下选项：

```
timeFormat: "HH:mm:ss",
dateFormat: "yy-mm-dd" 
```

# c - printf中的格式化字符串攻击

> ID：14505995
> 
> 赞同：3
> 
> 时间：2013-01-24T16:23:50.203
> 
> 标签：c, security, printf, exploit, format-string

```
#include <stdio.h>
int main()
{
    char s[200]
    int a=123;
    int b=&a;
    scanf("%50s",s);
    printf(s);

    if (a==31337)
        func();
} 
```

目的是执行格式字符串攻击 - 通过输入字符串来执行 func()。我尝试使用 %n 覆盖变量，但我得出的结论是，如果不首先显示 b 变量是不可能的，我不知道如何。任何提示将不胜感激。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:45:02.393

让我们尝试打印和不打印：

```
$ cat > f.c << \EOF
#include <stdio.h>
void func() {
    fprintf(stderr, "func\n");
}

int main()
{
    char s[200];
    int a=123;
    int b=&a;
    #ifdef FIXER
    fprintf(stderr, "%p\n", b); /* make "b" actually used somewhere */
    #endif
    scanf("%50s",s);
    printf(s);

    if (a==31337)
        func();
}
EOF

$ gcc --version | head -n 1; uname -m
gcc (Debian 4.7.2-5) 4.7.2
i686

$ gcc -S  f.c -o doesnt_work.s
f.c: In function 'main':
f.c:10:11: warning: initialization makes integer from pointer without a cast [enabled by default]
$ gcc -S -DFIXER  f.c -o does_work.s
f.c: In function 'main':
f.c:10:11: warning: initialization makes integer from pointer without a cast [enabled by default]

$ gcc doesnt_work.s -o doesnt_work; gcc does_work.s -o does_work

$ echo '%31337p%n' | ./does_work > /dev/null
0xbfe75970
func

$ echo '%31337p%n' | ./doesnt_work > /dev/null
Segmentation fault 
```

如问题所述，我们清楚地看到，如果不`b`先打印，它就会失败。

让我们比较一下内部发生的事情：

```
$ diff -ur does_work.s doesnt_work.s
--- does_work.s 2013-02-06 03:17:06.000000000 +0300
+++ doesnt_work.s   2013-02-06 03:16:52.000000000 +0300
@@ -29,8 +29,6 @@
    .size   func, .-func
    .section    .rodata
 .LC1:
-   .string "%p\n"
-.LC2:
    .string "%50s"
    .text
    .globl  main
@@ -48,15 +46,9 @@
    movl    $123, 16(%esp)
    leal    16(%esp), %eax
    movl    %eax, 220(%esp)
-   movl    stderr, %eax
-   movl    220(%esp), %edx    /* !!! */
-   movl    %edx, 8(%esp)      /* !!! */
-   movl    $.LC1, 4(%esp)
-   movl    %eax, (%esp)
-   call    fprintf
    leal    20(%esp), %eax
    movl    %eax, 4(%esp)
-   movl    $.LC2, (%esp)
+   movl    $.LC1, (%esp)
    call    __isoc99_scanf
    leal    20(%esp), %eax
    movl    %eax, (%esp) 
```

在标记的行上，我们看到“获取`b`%edx 的值，然后将其作为第三个参数放入堆栈。”

由于 printf 和 scanf 使用 cdecl 调用约定，堆栈在调用之间或多或少保持相同，因此第三个参数仍然可供易受攻击`printf`者设置。

当我们不打印`b`时，它不会进入堆栈以方便我们注入的格式字符串使用。

有了足够的内容，`%p%p%p%p%p%p...`我们应该能够达到我们的实际`a`或`b`无论如何，但是 50 个输入字符的限制妨碍了我们。