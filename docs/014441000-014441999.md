# StackOverflow 问答 14441000-14441999

# javascript - 如何使用 AngularJS 在 HTML 中创建条件

> ID：14441001
> 
> 赞同：0
> 
> 时间：2013-01-21T14:42:17.667
> 
> 标签：javascript, html, angularjs

我有这个对象

```
people = [{name: "John", registered: true },{name: "Micky", registered: false },{name: "Carol", registered: true }] 
```

我有这个有角度的 HTML：

```
<ul>
  <li ng-repeat="person in people">
    {{person.name}}
    <div class="already-registered-icon">&nbsp;</div>
  </li>
</ul> 
```

**我的问题是-如何设置仅在用户已注册时才显示已注册图标的条件？**

我会想到这样的事情（但我不知道怎么写）：

```
{{if person.registered}}
        <div class="already-registered-icon">&nbsp;</div>
{{end}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:51:55.160

只需使用[ngShow](http://docs.angularjs.org/api/ng.directive%3angShow)：

```
<div ng-show="person.registered" class="already-registered-icon">&nbsp;</div> 
```

演示：http: [//jsbin.com/usodaw/1/](http://jsbin.com/usodaw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:52:37.493

这是`ng-show`我缺少的属性

```
<ul>
  <li ng-repeat="person in people">
    {{person.name}}
    <div ng-show="person.registered" class="already-registered-icon">&nbsp;</div>
  </li>
</ul> 
```

# c - gcc - 参数“buf”与原型不匹配

> ID：14441002
> 
> 赞同：-2
> 
> 时间：2013-01-21T14:42:18.830
> 
> 标签：c, linux, gcc

在这个函数中

```
 char *function(buf,salt)
    char *buf;
    char *salt;
    {
        function_body
    } 
```

我收到这个错误

```
error: argument "buf" doesn't match prototype
error: prototype declaration
argument "salt" doesn't match prototype
error: prototype declaration 
```

这是实际的代码：

```
 char * function(const char *, const char *);

    char *buffer = NULL;

    buffer = function(arg1, arg2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:45:24.427

您在某处有一个原型声明，`function()`但实际的函数声明与它不匹配。在您的情况下，（类型的）参数是不同的。

通常，错误显示原型的位置。查找它并将其与您的函数声明进行比较。函数参数及其类型必须*完全相同*。

在您更新的问题中，您说原型定义为：

```
char * function(const char *, const char *); 
```

所以你还需要将你的实际功能定义为

```
char *function(const char *buf, const char *salt)
{
    // function_body
} 
```

（它必须是相同的，所以包括`const`- 语句！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:44:23.767

这意味着您在某处有函数声明，这是不同的。

此外，您不应该使用“K&R 风格”的功能，应该这样写：

```
char * function(char* buf, char *salt); 
```

很可能这两个论点也应该是`const`。

# c# - 从列表框内容 WindowsPhone8 中选择的 RadioButton

> ID：14441004
> 
> 赞同：0
> 
> 时间：2013-01-21T14:42:22.530
> 
> 标签：c#, linq, silverlight, windows-phone-7, windows-phone-8

我在列表框内容中放置了一个单选按钮，并将其与绑定列表绑定工作正常，并且如果属性传递为 true `QuizOption1` ，则显示选中的单选按钮。`IsSelected`类定义如下。

```
 class QuizOption1
    {
        public int QuizID { get; set; }
        public int QuizOptionID { get; set; }
        public string Description { get; set; }
        public bool IsSelected { get; set; }
    } 
```

在检查检查项目时，我正在使用以下代码

```
 var lstItems = (List<QuizOption1>)lst.ItemsSource;
            var selItems = lstItems.Where(op => op.IsSelected == true).FirstOrDefault(); 
```

绑定如下。

```
<ListBox  Name="lst1" Grid.Row="1" >
                        <ListBox.ItemTemplate >
                            <DataTemplate >
                                <RadioButton 
                                    Foreground="#333333"
                                    Background="#ffededed" 
                                    Tag="{Binding QuizOptionID}"
                                    Content="{Binding Description}"
                                    IsEnabled="True"
                                    GroupName="{Binding QuizID}"
                                    IsChecked="{Binding Path=IsSelected}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox> 
```

但 selItems 始终为空。谁能告诉我为什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:00:53.183

答案很简单，我需要在绑定中添加`Mode=TwoWay`属性，绑定如下所示。不管怎么说，多谢拉。

```
IsChecked="{Binding IsSelected, Mode=TwoWay}"/> 
```

# c# - 从处理程序刷新 Internet Explorer_Server

> ID：14441013
> 
> 赞同：1
> 
> 时间：2013-01-21T14:43:00.680
> 
> 标签：c#, winapi, pinvoke, ihtmldocument2

是否可以强制互联网`Explorer_Server`刷新它的内容？我所拥有的是外部应用程序中该对象的处理程序（就像在我的[类似](https://stackoverflow.com/questions/14439081/ihtmldocument2-click-button-inside-iframe)问题中一样）

[我在CodeProject](http://www.codeproject.com/Articles/8256/Invoke-Hidden-Commands-in-Your-WebBrowser)上找到了一个很好的教程，它展示了如何在 MFC 中做到这一点，但我想从 C# 中做到这一点。

我的问题是：如何刷新`Explorer_Server`托管在外部应用程序中的 Internet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:40:00.207

我现在无法对其进行测试，但我假设您已经`mshtml`在 C# 项目中引用了程序集？

我敢打赌，如果您尝试这种`IHTMLDocument2.open`方法，您可能会找到一种方法来做到这一点。我快到机场了，所以我现在不能用他的方法做实验或测试。但是这个链接有一些有用的信息（注意：虽然链接指的是 win API 代码，但该代码是通过`IHTMLDocuement2`程序集中的接口在.net 实现中建模的`mshtml`）。

[IHTMLDocument2.open 上的 msdn](http://msdn.microsoft.com/en-us/library/aa752628%28v=vs.85%29.aspx)

我很幸运在 C# 中使用 mshtml 程序集进行其他操作，尽管它需要一些工作和反复试验。特别注意 _BSTR 的参数为 _SELF，并传递当前 uri。

# excel-formula - Excel 单词公式中的金额

> ID：14441014
> 
> 赞同：0
> 
> 时间：2013-01-21T14:43:01.750
> 
> 标签：excel-formula, excel-2010

我在下面找到了这个公式，可以将金额转换为谷歌电子表格的单词，而且效果很好。但是现在我想在 excel 2010 中使用它，我得到了很多错误。我也不能使用 VBA。谢谢你的帮助。

=if(or(isBlank(A1),not(isNumber(A1)),A1>=power(10,15)),ifError(1/0,"Error"),trim(arrayFormula(concatenate(if(trunc( mod(A1,power(10,{15,12,9,6,3}))/power(10,{12,9,6,3,0}))<100,"",choose(int(trunc (mod(A1,power(10,{15,12,9,6,3}))/power(10,{12,9,6,3,0}))/100),"一","二","三","四","五","六","七","八","九") & "百") & if(mod(trunc(mod(A1,power(10, {15,12,9,6,3}))/power(10,{12,9,6,3,0})),100)<>0,if(trunc(mod(A1,power(10, {15,12,9,6,3}))/power(10,{12,9,6,3,0}))>100," And",if(A1>power(10,{15,12 ,9,6,3}),choose({1,2,3,4,5},"","","","","And"),"")),"") & if (mod(trunc(mod(A1,power(10,{15,12,9,6,3}))/power(10,{12,9,6,3,0})),100)=0,"",if(mod(trunc(mod(A1,power(10,{15,12, 9,6,3}))/power(10,{12,9,6,3,0})),100)<20,choose(mod(trunc(mod(A1,power(10,{15,12) ,9,6,3}))/power(10,{12,9,6,3,0})),100),"一","二","三","四","五" ,"六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九"),choose(int(mod(trunc(mod(A1,power(10,{15,12,9,6,3}))/power(10,{12,9,6,3) ,0})),100)/10),"","二十","三十","四十","五十","六十","七十","八十","九十") &if(mod(mod(trunc(mod(A1,power(10,{15,12,9,6,3}))/power(10,{12,9,6,3,0})),100) ,10)=0,"","-" & 选择(mod(mod(trunc(mod(A1,power(10,{15,12,9,6,3}))/power(10,{12, 9,6,3,0})),100),10),"一","二","三","四","五","六","七","八","九")))) & if(trunc(mod(A1,power(10,{15,12,9,6,3}))/power(10,{12,9,6,3,0})) =0,"",choose({1,2,3,4,5},"万亿","十亿","百万","千","")))) & if(A1>=2, "兰德",if(A1>=1,"兰德","")) & if((round(A1-trunc(A1),2)*100=0)+(A1<1),"","和") & if(round(A1-trunc(A1),2)*100=0,"",if(round(A1-trunc(A1),2)*100=1,"一美分",if(圆形（A1-截断（A1），2)*100<20,choose(round(A1-trunc(A1),2)*100,"一","二","三","四","五","六","七" 、八、九、十、十一、十二、十三、十四、十五、十六、十七、十八、十九）、选择(int(round(A1-trunc(A1),2)*100/10),"","二十","三十","四十","五十","六十","七十","八十","九十") & if(mod(round(A1-trunc(A1),2)*100,10)=0,"","-" & choose(mod(round(A1-trunc(A1), 2)*100,10),"一","二","三","四","五","六","七","八","九"))) & "美分"))))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:02:55.033

如果您的数字不需要超过〜100，则制作两列可能更容易，第一列是1、2、3等，第二列是一、二、三等。然后你可以做 VLOOKUP()在那张桌子上。

可以在此处找到示例：[https ://www.dropbox.com/s/e44dnkg3he8b8il/NumericalToAlpha.xlsx](https://www.dropbox.com/s/e44dnkg3he8b8il/NumericalToAlpha.xlsx)

# javascript - 从标签中返回文本，其中最外层的 HTML 标签适用于其中的所有文本节点 - jquery

> ID：14441016
> 
> 赞同：0
> 
> 时间：2013-01-21T14:43:05.927
> 
> 标签：javascript, jquery, html, text

我有可能是这样的文本段落：

```
<p>
   <span style='font-family:arial'>
      Some text
   </span>
</p> 
```

或者

```
<p>
   <strong>
      Some more text
   <strong>
</p> 
```

或者

```
<p>
   <strong>
      <em>
         Yet more text
      </em>
   </strong>
</p> 
```

无论有多少嵌套标签，我都可以只获取文本，只需使用`$('p').text()`. 问题是什么时候`<br>`在中间弹出。在这种情况下，文本所在的任何标签都会被分解。例如，这个：

```
<p>
  <strong>
     Some more text
  </strong>
</p> 
```

会变成这样：

```
<p>
  <strong>
     Some 
  </strong>
  <br />
  <strong>
     more text
  </strong>
</p> 
```

所以你看，标签中现在有 2 个文本节点`<strong>`，而不仅仅是一个。我想要做的是只获取带有原始父标签的文本，将其`<br>`视为另一个文本节点，但没有`<br>`-induced-tag-split-up 入侵。例如，给定上面的 2 节点 HTML，我只想要一个返回以下内容的函数：

```
<p>
  <strong>
     Some 
     <br />
     more text
  </strong>
</p> 
```

这对于一些给定的格式来说很好，但是我可能需要保留不同类型的 HTML 嵌套（例如`<p><strong><em>`or `<p><em><strong>`or`<p><strong><span>`等​​等。

## 编辑

`$('p').html()`我想最简单的方法是获取并简单地砍掉周围的所有标签，而不是迷失在循环中`<br>`？左边`<br>`是结束标签，右边是开始标签。那么会有正则表达式解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:02:37.230

1.  `<br>`在一个内找到每个`<p>`
2.  对于这些`<br>`元素中的每一个，比较紧接在前面和后面的元素的名称
3.  如果它们的名称相同，`<br>`则将后面元素的 和 内容移动到前面的元素中
4.  删除现在为空的以下元素

这：

```
$("p").clone().find("br").each(function() {
  var $this = $(this), $prev = $this.prev(), $next = $this.next();
  if ( $prev.length && $prev.prop("nodeName") === $next.prop("nodeName") ) {
    $prev.append( $this, $next.contents() );
    $next.remove();
  }
}).end().each(function () {
    console.log( $(this).html() );
}); 
```

^(*（请注意，我使用`clone()`以避免修改原件。）*)

当应用于

```
<p>
  <strong>
     Some 
  </strong>
  <br />
  <strong>
     more text
  </strong>
</p> 
```

将其写入控制台

```
<strong>
   Some 
<br>
   more text
</strong> 
```

[http://jsfiddle.net/Tomalak/y3hSp/](http://jsfiddle.net/Tomalak/y3hSp/)

* * *

`<br>`这是一种迭代方法，它以 jQuery 插件的形式折叠由 分隔的相邻节点：

```
$.fn.extend({
    collapseBreaks: function () {
        return this.each(function () {
            var done = false;

            while (!done) {
                done = true;

                $(this).find("br").each(function() {
                    var $this = $(this), 
                        $prev = $this.prev(), 
                        $next = $this.next();

                    if ( 
                        $prev.length 
                        && $prev.prop("nodeName") === $next.prop("nodeName") 
                    ) {
                        $prev.append( $this, $next.contents() );
                        $next.remove();
                        done = false;
                    }
                });       
            }
        });
    }
}); 
```

用于

```
$("p").collapseBreaks(); 
```

[http://jsfiddle.net/Tomalak/FJFgk/3/](http://jsfiddle.net/Tomalak/FJFgk/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:56:03.150

那么，怎么样：

```
var innerString = thatPFromYourQuestion.innerHTML;
innerString = innerString.replace("<.*>", ""); 
```

这应该用一个空字符串替换每个标签，返回里面的所有文本。

我想我误解了你的问题。如果您只是想从字面上看该段落中的内容，那么`.innerHTML`就可以做到。如果你想要被`<BR />`砍掉，你应该使用该调用的稍微不同的版本`replace()`：

```
innerString = innerString.replace("<br>", ""); 
```

# sharepoint - Dynamics CRM 2011 文档管理 - 禁用文件夹存在警报

> ID：14441017
> 
> 赞同：0
> 
> 时间：2013-01-21T14:43:06.037
> 
> 标签：sharepoint, dynamics-crm-2011, document-management

我已成功设置用于文档管理的 CRM 和 SharePoint。但是，当 CRM 想要创建的 sharepoint 2010 库中已经有一个文件夹时，它会询问我是否要将此实体与此文件夹挂钩。

我的问题是：是否可以禁用此问题并自动将现有文件夹与当前实体挂钩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T16:01:31.633

如果您在 SharePoint 流程之前在 CRM 中创建文档位置实体记录，则不会提出问题。创建文档位置实体记录时需要找到业务流程。

# javascript - 如何使用 Javascript 在 HTML 文本框上设置最小和最大字符长度

> ID：14441021
> 
> 赞同：0
> 
> 时间：2013-01-21T14:43:18.033
> 
> 标签：javascript, dreamweaver

我只有 GCSE 级别，我的代码中需要一个文本框，只有 4 个字符。我已将其设置为最多 4 个，但我也需要它至少有 4 个。我也让它只接受数字。我没有在我的学校使用 HTML 5。

这是我的整个代码：

```
 <head>
    <title>Exam entry</title>
    <script language="javascript" type="text/javascript">
    function validateForm() {
    var result = true;
    var msg="";

if (document.ExamEntry.name.value=="") {
msg+="You must enter your name \n";
document.ExamEntry.name.focus();
document.getElementById('name').style.color="red";
result = false;
}
if (document.ExamEntry.subject.value=="") {
msg+="You must enter the subject. \n";
document.ExamEntry.subject.focus();
document.getElementById('subject').style.color="red";
result = false;
}
if (document.ExamEntry.ExamNumber.value=="") {
msg+="You must enter your exam number. \n";
document.ExamEntry.ExamNumber.focus();
document.getElementById('ExamNumber').style.color="red";
result = false;
}

if(document.ExamEntry.ExamNoLen.value.length <4) { 
msg+="Your eaxm nuber must be 4 digits long.  \n";
document.ExamEntry.ExamNumber.focus();
document.getElementById('ExamNumber').style.color="red";
result = false;
}

checkInput(elem){
    if(elem.value.length != 4){
        alert("This value needs to be 4 characters long!");
        elem.value = ""; // Reset the textbox
    }
    else{
        alert("This value is 4 characters long.");
    }
}

if(msg==""){
return result;
}
{
alert(msg)
return result;
}
}
</script>
</head>
<body>
<h1>Exam Entry Form</h1>
<form name="ExamEntry" method="post" action="success.html">
<table width="50%" border="0">
<tr>
<td id="name">Name</td>
<td><input type="text" name="name" /></td>
</tr>
<tr>
  <td id="subject">Subject</td>
  <td><input type="text" name="subject" /></td>
</tr>
<tr>
<td id="ExamNumber">Exam Number </td>
<td>
  <input name="ExamNumber"  type="text"  
  onkeydown="return ( event.ctrlKey || event.altKey 
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) 
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9) 
                    || (event.keyCode>34 && event.keyCode<40) 
                    || (event.keyCode==46) )" 
                    maxlength="4" onblur="checkInput(this)"  />
    </td>
</tr>
<tr>
<td><input type="submit" name="Submit" value="Submit" onClick="return validateForm();" /></td>
<td><input type="reset" name="Reset" value="Reset" /></td>
</tr>
</table>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:48:14.007

好吧，您不能有 minlength，因为您的用户需要输入 1,2 和 3 个字符才能达到 4。（除非您应用某种更高级的输入掩码）。但是你可以检查它模糊时是 4 个字符长..

```
<input name="ExamNumber" type="text" onblur="checkInput(this)" onkeydown="return ( event.ctrlKey || event.altKey || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) || (95<event.keyCode && event.keyCode<106) || (event.keyCode==8) || (event.keyCode==9) || (event.keyCode>34 && event.keyCode<40) || (event.keyCode==46) )" maxlength="4" /> 
```

然后是一个简单的 JavaScript 函数..

```
function checkInput(elem){
    if(elem.value.length != 4){
        alert("This value needs to be 4 characters long!");
        elem.value = ""; // Reset the textbox
    }
    else{
        alert("This value is 4 characters long.");
    }
} 
```

# forms - 防止邮政信箱形式

> ID：14441022
> 
> 赞同：0
> 
> 时间：2013-01-21T14:43:27.253
> 
> 标签：forms, validation, bigcommerce

我正在寻找一种解决方案来防止邮政信箱被输入到 Big Commerce 商店的运输详细信息中，因此我仅限于使用 JavaScript。我已经搜索并找到了一些人们发布的解决方案，但似乎无法让任何解决方案正常工作。

有人在 BC 论坛上发布了一个教程，但是对于简单的验证来说似乎相当长，即使我让它工作了，它仍然有点问题，并不总是有效。[http://forum.bigcommerce.com/f33/how-to-protect-against-po-boxes-in-the-shipping-address-7203/](http://forum.bigcommerce.com/f33/how-to-protect-against-po-boxes-in-the-shipping-address-7203/)

有人有想法么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:24:07.967

这行得通吗？ [jQuery PO BOX 验证](https://stackoverflow.com/questions/5666599/jquery-po-box-validation)

在 BC 商店的情况下，假设 address1 字段仍被命名为默认为 FormField[2][8] 或其他东西......

或者，如果地址字段为邮政信箱，则可能将覆盖提交按钮分配给 preventDefault。

```
$('input[name=FormField[2][8]]').each(function() {
    var pattern = new RegExp('[PO.]*\\s?B(ox)?.*\\d+', 'i');
    if ($(this).val().match(pattern)) {
        //do something here
    }
}); 
```

# r - 根据不同数据框的所有协变量组合选择行

> ID：14441028
> 
> 赞同：0
> 
> 时间：2013-01-21T14:43:57.487
> 
> 标签：r, subset

我目前正在尝试弄清楚如何选择长数据帧 ( `long`) 中呈现相同的所有行`x1`以及`x2`表征另一个数据帧 ( `short`) 的组合。

简化数据为：

```
long <- read.table(text = "
  id_type   x1   x2

   1       0     0  
   1       0     1
   1       1     0
   1       1     1
   2       0     0
   2       0     1
   2       1     0
   2       1     1
   3       0     0  
   3       0     1
   3       1     0
   3       1     1
   4       0     0  
   4       0     1
   4       1     0
   4       1     1", 
header=TRUE) 
```

和

```
short <- read.table(text = "
   x1   x2    

   0     0    
   0     1", 
     header=TRUE) 
```

预期的输出将是：

```
 id_type  x1    x2

   1       0     0  
   1       0     1
   2       0     0
   2       0     1
   3       0     0  
   3       0     1
   4       0     0  
   4       0     1 
```

我曾尝试使用：

```
out <- long[unique(long[,c("x1", "x2")]) %in% unique(short[,c("x1", "x2")]), ] 
```

但是`%in%`这里用错了收养..非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:46:34.537

您正在请求内部连接：

```
> merge(long, short)
  x1 x2 id_type
1  0  0       1
2  0  0       2
3  0  0       3
4  0  0       4
5  0  1       1
6  0  1       2
7  0  1       3
8  0  1       4 
```

# python - 合并来自 django-tables2 和动态模型的表

> ID：14441029
> 
> 赞同：1
> 
> 时间：2013-01-21T14:43:57.800
> 
> 标签：python, django, django-tables2

我希望有可能合并从 [动态模型生成的两个或多个表（由](https://code.djangoproject.com/wiki/DynamicModels)[django-tables2](https://github.com/bradleyayers/django-tables2)生成） 。

先说一下我的问题：

对于动态生成的模型，我有以下字段：

```
...
fields = {
    'colA': models.IntegerField(),
    'colB': models.IntegerField(),
    'colC': models.IntegerField(),
    'colD': models.IntegerField(),
}
... 
```

动态处理使我能够存储结构化的表，而无需定义冗余模型类。

从数据库中存储的表派生的模型示例：

```
myDynamicModelA = DataModels().create_model('myDynamicModelA_tablename')
myDynamicModelB = DataModels().create_model('myDynamicModelB_tablename')
myDynamicModelC = DataModels().create_model('myDynamicModelC_tablename')
myDynamicModelD = DataModels().create_model('myDynamicModelD_tablename')
.... 
```

'_tablename' 通常由所有表共享。不同的是前缀“myDynamicModel A,B,C...”

这是模型部分。

据此，让我使用*django-tables2*描述表结构：

每个模型/表共享一些列/字段，因此我可以像这样定义一个*django-tables2*类：

```
class Table_A(tables.Table):
    colA = tables.Column()
    colB = tables.Column() 
```

可以使用继承简单地处理不同的字段：

```
class Table_B(Table_A):
    colC = tables.Column()
    colD = tables.Column()

    def __init__(self, *args, **kwargs):
        self.colname = kwargs['colname']
        kwargs.pop('colname')
        super(Table_B, self).__init__(*args, **kwargs)
        for col in self.base_columns:
            if col not in ['colA', 'colB']:
                self.base_columns[col].verbose_name = '%s_%s' % (self.colname, col) 
```

如您所见，构造函数为模型中不同的字段提供了不同的列名前缀。

现在可以从不同的模型生成表，例如：

**'myDynamicModelA_tablename' 的表：**

列：colA、colB、myDynamicModelA_tablename_colC、myDynamicModelA_tablename_colD

**'myGenericModelB_tablename' 的表：**

列：colA、colB、myDynamicModelB_tablename_colC、myDynamicModelB_tablename_colD

...

现在我的问题：是否可以合并两个表，以便我收到类似的内容：

colA，colB，myDynamicModelA_tablename_colC，myDynamicModelB_tablename_colC，myDynamicModelA_tablename_colD，myDynamicModelB_tablename_colD

将显示的值应该来自表之间的交集（这是可能的，因为 colA 中的公共值可以解释*为主键*）

结果是*django-tables2*对象是必要的，因为我想提供分页和排序选项。

我希望我的描述是可以理解的，如果没有，对不起。

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:48:20.433

也许我的这个上[一个问题和答案](https://stackoverflow.com/questions/14366098/django-list-of-dictionaries-to-tables2/14438782#14438782)会有所帮助？

我通过原始 sql 从组合的动态创建的表中访问数据，并将这些数据发送到 Django-Tables2 中呈现

如果您想指定渲染列的顺序和实际呈现的列，请定义一个元类，如下所示（其中“序列”是列的顺序；nb '...' 仅表示“和所有其他列” - 检查出Tables2的[纪录片](http://django-tables2.readthedocs.org/en/latest/)[搜索'交换列的位置']）：

```
def getTable(table_name):
    cursor = runSQL(table_name,"""
        SELECT * FROM subscription_exptinfo,%s
        WHERE %s.id = subscription_exptinfo.id
        ;""" %(table_name,table_name)) 

    exptData = dictfetchall(cursor)

    class Meta:
        attrs = {'class': 'paleblue'}
        sequence = ('id','...')              

    attrs = {}
    attrs['Meta'] = Meta
    cols=exptData[0]

    for item in cols:
        if item=='timeStart': 
            attrs[str(item)] = tables.DateTimeColumn(format='d-m-Y g:i:s',short=False)
        else:
            attrs[str(item)] = tables.Column()

    myTable = type('myTable', (TableReport,), attrs)   

    #TableOptions(table).sequence = ["Id","..."]
    #print ".........................." + str(TableOptions(table).sequence)

    return myTable(exptData) 
```

# excel - Excel VBA 代码错误

> ID：14441031
> 
> 赞同：0
> 
> 时间：2013-01-21T14:44:01.063
> 
> 标签：excel, vba

我有以下宏将 0 添加到 ID 号，直到它们长为 7 个数字。我之前已经使用过无数次，它一直都能正常工作，直到今天它开始无法正常工作，并且`For i = 1 To endrow - 1`每次都突出显示代码部分，我无法调试问题。整个代码是。

```
Sub AddZeroes()

'Declarations
Dim i As Integer, j As Integer, endrow As Long
'Converts the A column format to Text format
Application.ScreenUpdating = False
Columns("A:A").Select
Selection.NumberFormat = "@"
'finds the bottom most row
endrow = ActiveSheet.Range("A1").End(xlDown).Row
'selects the top cell in column A
ActiveSheet.Range("A1").Select

'loop to move from cell to cell
For i = 1 To endrow - 1
    'Moves the cell down 1\. Assumes there's a header row so really starts at row 2
    ActiveCell.Offset(1, 0).Select
    'The Do-While loop keeps adding zeroes to the front of the cell value until it hits a length of 7
    Do While Len(ActiveCell.Value) < 7
        ActiveCell.Value = "0" & ActiveCell.Value
    Loop
Next i
Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:28:24.127

不确定是什么导致了错误 - 但会建议另一种方法：

```
sub addZeros()
  Application.ScreenUpdating = False
  ' start at row 2 since OP said there's a header row

  Dim c as Range
  for each c in Range("A2", [A2].End(xlDown))
    c.Value = "'" & Format(c.Value, "00000000")
  next c
  Application.ScreenUpdating = True
end sub 
```

紧凑一点...

请注意，我添加了“'”撇号以使 Excel 将单元格值视为字符串。这是确保零保持不变的安全方法...

编辑：去掉最后一个 .Select 以显示它可以完成，并且通常是评论中指出的好习惯。

# javascript - 带有 showModalDialog 的 Chrome 中的 window.opener.returnValue

> ID：14441034
> 
> 赞同：5
> 
> 时间：2013-01-21T14:44:27.743
> 
> 标签：javascript, return-value, showmodaldialog

我正在尝试将 window.opener.returnValue 与 showModalDialog 一起使用。有许多关于可用于解决 window.returnValue 不起作用的技术的参考。然而，它似乎在 Chrome 的 23.0.1271.97 版本中不起作用。

如果我如下注释掉 self.close 行，并在设置返回值之前和之后放入警报，则两个警报都显示为“未定义”：

调用者 a1.html

```
<html>
<head>
    <base target="_self"/>
 <script>
  function fu()
  {
    window.returnValue = undefined;
    var result = window.showModalDialog("b1.html", window, "dialogHeight:650px; dialogWidth:900px;");
    if (result == undefined)
        result = window.returnValue;

    if (result != null && result != "undefined")
        text.value = result;
  }

 </script>
</head>
<body>
 <input type=button value="click me" onclick="return fu();">
 <input type=text id=text>
</body>
</html> 
```

被称为b1.html：

```
<html>
<head>
<base target="_self"/>
<script>

  function fu()
  {
   var text = document.getElementById("text");
  if (window.opener)
  {
    alert(window.opener.returnValue);
    window.opener.returnValue = "your return value";
    alert(window.opener.returnValue);
  }
  text.value = window.opener.returnValue;
  //self.close();
  }

 </script>
</head>
<body>
 <input type=button value="close" onclick="return fu();">
 <input type=text id=text>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T15:41:40.087

此外 window.returnValue 仅在“模态对话框窗口”和“父窗口（打开对话框）”都托管在同一服务器中时才有效。如果不是，它将仅返回未定义。

# vim - 在 Vim 中更改文本矩形

> ID：14441039
> 
> 赞同：1
> 
> 时间：2013-01-21T14:44:39.423
> 
> 标签：vim, insert, block

在[Vim](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)`I`中，可以使用命令一次在多行中插入文本，例如在[回答 Stack Overflow 问题*How do I insert text at a beginning of a multi-line selection in vi/Vim?*](https://stackoverflow.com/questions/253380/how-do-i-insert-text-at-beginning-of-a-multi-line-selection-in-vi-vim/253391#253391) . 但是，这只适用于真正的插入。如果我想同时删除一些字符，这是行不通的。

例如，我想改变

```
000 one
000 two
000 three
000 four 
```

至

```
111 one
111 two
111 three
000 four 
```

我会通过调用`^V3ggllx`从前三行中删除 000 然后`^V3ggI111^[`在相同位置插入 111 来做到这一点，这对我来说似乎很尴尬。（上面的意思是，进入视觉块模式，标记前三行中的所有零并将它们删除。然后再次进入视觉块模式，标记前三行的开始，进入多行插入模式，插入111 并退出`Esc`。）

必须有更好的方法来做到这一点。最烦人的是，我必须在删除零后再次选择区域。如果删除后仍选择该区域，那将很好。此外，如果可以在多个插入模式下删除字符，那也很好。但是如果我尝试这个，只有第一行被改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:00:13.940

重选简单快捷`gv`；然后您可以使用`I111^[`插入新文本。但是，正如@melpomene 的回答所示，这实际上没有必要。

^(（但我想我会提到它，以便您可以将这些新知识应用于其他情况。）)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:01:47.340

或者，由于您要替换为相同的字符，因此您可以`r`在选择后使用：

```
^V2jer1 
```

这具有完全避免插入模式的好处。

顺便说一句，`3G`完成与 相同的事情`3gg`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:53:10.073

一旦你选择了你的`0`s 列，用 s 替换它们`1`就像点击一样简单`r1`：

```
<C-v>2jer111 
```

（但尼基塔已经发布了这个……啊啊多任务……）

根据实际用例的复杂性，替换可能是一种可行的选择：

```
V2j:s/^000/111<CR> 
```

既然我们正在这样做，使用`:normal`并且`<C-a>`可以帮助您解决这种特定情况：

```
V2j:norm 111<C-a> 
```

# localhost - Virtualhost X 可以工作，但文件夹中的任何内容都出现 404

> ID：14441044
> 
> 赞同：1
> 
> 时间：2013-01-21T14:45:05.923
> 
> 标签：localhost, virtualhost

好的，我刚刚设置了我的虚拟主机 x 以便

site.dev 指向我 Mac 上的一个文件夹。

当 apache 去 site.dev 工作并给出“它工作！” 在浏览器中。

如果我然后转到我知道的本地文件夹中的任何内容，例如 index.php 或 robots.txt，我会得到 404。

我想我在这个设置中遗漏了一些至关重要的东西，有什么想法吗？

我还检查了网络共享是否打开，并且我的机器上也启用了 PHP。仍然没有骰子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:40:34.947

通常这是因为权限未设置为允许它工作，请尝试将文件的权限最初设置为 777，然后从那里恢复以使它们更安全；并不是说它在当地真的很重要，但总是好的做法:-)

# arrays - 将具有动态分配名称的对象推送到数组中 - AS3

> ID：14441047
> 
> 赞同：0
> 
> 时间：2013-01-21T14:45:10.673
> 
> 标签：arrays, actionscript-3, actionscript

这可能吗？例如，如果我有 100 个名为 item1.....item100 的项目，我可以使用循环将它们全部添加到数组中吗？这些方面的东西......但这显然不起作用：

```
for (var i:int = 1; i <= 100; i++)
{
     myArray.push("label" + 1);
} 
```

幸运的是我只有 10 个项目，所以我可以手动完成，但我只是好奇以备将来参考......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:18:43.103

[数组访问运算符](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#array_access)将允许您按名称引用属性和对象，所以如果您有：

```
myArray.push(label1); 
```

您可以改用它：

```
myArray.push(this["label" + 1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:43:49.270

取决于您所说的“项目”。

如果它们是当前类的属性，请使用：

```
for (var i:int = 1; i <= 100; i++)
{
    myArray.push(this["label" + i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:51:29.187

您必须获取到对象实例的链接才能将其推送到数组中，例如，如果您的文本字段的名称是`label1`,`label2`等，您可以使用以下代码：

```
for (var i:int = 1; i <= 100; i++)
{
     myArray.push(labelsContainer.getChildByName("label" + i));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:10:37.297

即使对象的名称不遵循任何特定模式，您也可以这样做，但它们必须位于“容器”内（您会将容器中的所有对象添加到数组中）：

```
for (var i:int = 0; i < containerName.numChildren; i++)
{
    myArray.push(containerName.getChildAt(i);
} 
```

# java - selenium webdriver 在 Internet Explorer 中找不到元素错误

> ID：14441048
> 
> 赞同：0
> 
> 时间：2013-01-21T14:45:14.523
> 
> 标签：java, selenium, selenium-webdriver

我遇到以下错误，`Internet explorer 8`但工作相同`Firefox`（两个名称，xpath 相同）

```
"Unable to find element with name == username (WARNING: The server did not provide any stacktrace information)" 
```

我的 HTML 看起来像

```
<class=form>User Name 

<INPUT tabIndex=0 size=22 name=username autocomplete="off"\>

class=form>Password

<INPUT tabIndex=0 onkeypress="checkCapsLock( event )" value="" size=22 type=password name=password autocomplete="off\> 
```

我的 JAVA 代码：

```
File file = new File("D:/vishwas/Selenium/IEDriverServer.exe");    
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());    
WebDriver driver = new InternetExplorerDriver();    
driver.get("http://10.26.210.74:9080/cbaUserAdmin/");    
WebElement Name = driver.findElement(By.xpath("//input[@name='username']"));    
Name.sendKeys(new String[]{"username"});    
WebElement Pass = driver.findElement(By.xpath("//input[@name='password']"));    
Pass.sendKeys(new String[]{"password"}); 
```

此页面的完整 HTML 代码：

```
<table bgcolor="#ffffd0" cellPadding="1" cellSpacing="1" border=0 >

            <tr>
                <td width="5%">&nbsp;</td>
                <td width="30%">&nbsp;</td>
                <td width="65%">&nbsp;</td>

            </tr>
            <tr>
                <td>&nbsp;</td>
                <td colspan="2">
                    <FONT SIZE="3"><B>Log on</B></FONT>
                </td>           
                <td>&nbsp;</td>                     
            </tr>
            <tr><td colspan=4>&nbsp;</td></tr>
            <tr>
                <td>&nbsp;</td>
                <td class="form">User Name</td>
                <td class="form">
                    <input type="text" tabindex="0" size="22" name="username" autocomplete="off" />
                </td>           
                <td>&nbsp;</td>                     
            </tr>   
            <tr>
                <td>&nbsp;</td>             
                <td class="form">Password</td>
                <td class="form">
                    <input type="password" tabindex="0" name="password" size="22" autocomplete="off" onKeyPress="checkCapsLock( event )"/>
                    <!--<span id="spanCaps" class="PopupBox" style="margin-left:10;vertical-align:bottom;">Caps Lock is <b>ON</b></span>-->
                </td>
                <td>&nbsp;</td>                 
            </tr>

            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td class="form" >
                    <span id="spanCaps" class="PopupBox">Caps Lock is <b>ON</b></span>
                    <input type="submit" name="submit" tabindex="0" value="Login"> 
```

请帮我解决这个问题，因为我想知道为什么我会`Internet explorer`特别加入..

谢谢，维什瓦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:21:49.513

IE 处理 xpath 表达式的方式与 FF 不同。尝试使用 CSS。

异常表示驱动程序无法识别具有名称的元素。

首先尝试识别表。

然后尝试识别行

然后尝试识别 td

然后尝试识别输入元素并对其执行操作。

如果有一张桌子，该行是第 3 行，td 是第 5 行，我会写这样的东西。

```
driver.findElement(By.cssSelector("table tr+tr+tr td+td+td+td+td input")).sendkeys("xxxx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:03:37.723

您在代码中指定了名称为“用户名”的标签，并且您希望使用 xPath“用户名”来访问它。

尝试

```
WebElement Name = driver.findElement(By.xpath("//input[@name='username']")); 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:04:06.090

您的 HTML 在问题中有点混乱，但看起来输入被命名为“用户名”并且您的 xpath 正在寻找“用户名”

[您可以使用w3c 验证器](http://validator.w3.org/)检查您的 HTML 有效性。
浏览器将通过对结构做出一些假设来尝试使用无效的 HTML，这可能正在发生并导致您的 xpath 不匹配。

也许您的 HTML 应该类似于：

```
<form>
  User Name <input tabIndex="0" size="22" name="username" autocomplete="off">

  Password  <input tabindex="0" onkeypress="checkCapsLock( event )" value="" size="22" type="password" name="password" autocomplete="off">
</form> 
```

作为替代方案，您可以使用 css 查找字段：

```
WebElement Name = driver.findElement(By.cssSelector("input[name=username]"));
Name.sendKeys(new String[]{"username"});        
WebElement Pass = driver.findElement(By.cssSelector("input[name=password]"));    
Pass.sendKeys(new String[]{"password"}); 
```

或按名称

```
WebElement Name = driver.findElement(By.name("username"));
Name.sendKeys(new String[]{"username"});        
WebElement Pass = driver.findElement(By.name("password"));    
Pass.sendKeys(new String[]{"password"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:38:14.527

嗨，我收到了这个错误，因为在 Internet Explorer 中我给了相对 Xpath...现在我给了绝对 xpath.. 它工作了非常感谢所有花时间帮助我的人..

# android - 安卓命令列表

> ID：14441053
> 
> 赞同：1
> 
> 时间：2013-01-21T14:45:24.353
> 
> 标签：android

我对 Android 命令有很多疑问。我不知道我应该从哪里开始但是，无论如何，我已经放置了所有与问题相关的 Android 命令。这里 ;

*   Linux 命令的子集是否默认出现在 Android 中？或者，我们在安装什么东西吗？
*   在 system/bin 中，有很多命令。我在哪里可以找到它们的含义？我试过了`man`，但`man`不是内置的。
*   我可以通过`start`和`stop`命令启动和停止应用程序吗？
*   为什么我不能从终端模拟器运行重启？错误`permission is denied`。

注意：如果您看到无意义的部分，请随时重新编辑问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:04:50.627

> Linux 命令的子集是否默认出现在 Android 中？或者，我们在安装什么东西吗？

系统中默认存在一个子集。存在诸如 ls、cd、mkdir、cat 等之类的东西。如 Zac 所述，您可以通过在有根设备上安装 Busy Box 来获得更广泛的访问权限。

> 在 system/bin 中，有很多命令。我在哪里可以找到它们的含义？我试过 man ，但 man 不是内置的。

[亚行页面](https://developer.android.com/tools/help/adb.html)是一个很好的起点。这涵盖了许多基本的 ADB 和 shell 命令。它在底部附近声明：

“有关命令和程序的完整列表，请启动模拟器实例并使用该`adb -help`命令。”

因此，您可以`adb -help`在模拟器或设备上使用来查看 ADB 和 shell 命令的完整列表（请注意，我认为此列表将仅是 android 特定的命令，它不包括 cd、ls 和其他基本 unix 命令之类的东西）。

> 我可以通过启动和停止命令启动和停止应用程序吗？

不，它在亚行开发页面上声明：

start ........ 启动（重新启动）一个模拟器/设备实例。

stop ........ 停止执行模拟器/设备实例。

要启动一个应用程序，您将使用`am`实用程序 iirc，它看起来像`am start com.your.packagename`它已经有一段时间了，我可能有语法错误。如果您`am`在 shell 中不带参数单独发出命令，则会听取说明。

> 为什么我不能从终端模拟器运行重启？错误权限被拒绝。

系统会阻止应用程序重新启动设备，除非它们使用与操作系统相同的密钥进行签名。当您使用终端仿真器时，您只能使用应用程序声明的任何权限。重新启动权限未授予任何第三方应用程序，因此无法从任何终端正常工作。`su`如果您的设备已植根并且您使用过，您可能会这样做

编辑：

[这是另一个很好的资源，列出了更多的 shell 命令](https://github.com/jackpal/Android-Terminal-Emulator/wiki/Android-Shell-Command-Reference)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:49:44.567

android中包含的Linux命令并不多，但是如果您是root用户，则可以轻松安装具有大量linux命令的busybox。

您需要具有 root 访问权限才能通过命令行重新启动设备（以防止任何旧应用程序能够执行此操作）

# oracle - Oracle 按查询分组

> ID：14441062
> 
> 赞同：1
> 
> 时间：2013-01-21T14:45:47.653
> 
> 标签：oracle, oracle10g, oracle11g

我正在尝试运行以下查询：

```
SELECT parent_id, id, due_date, object_subtype
  FROM amatia_logtask
 WHERE parent_id IN (SELECT id_actividad
                       FROM amatia_actividades
                      WHERE id_actividad = '12624'
                         OR id_padre = '12624')
 GROUP BY parent_id id 
```

但是，我无法理解错误消息：

```
ORA-00933: SQL command not properly ended
00933\. 00000 -  "SQL command not properly ended"
*Cause:    
*Action:
Error at Line: 9 Column: 41 
```

请问你能提供一个解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:49:04.460

您有两列，`GROUP BY`它们之间没有逗号：

```
group by parent_id, id
                  ^ --- missing this 
```

但是，如果您尝试对列进行分组，那么您可以`GROUP BY`对所有字段进行分组：

```
 group by parent_id, id, due_date, object_subtype 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:53:41.267

目前尚不清楚您要做什么-以下将为您提供不同的**行**列表：

```
SELECT DISTINCT y.parent_id, y.id, y.due_date, y.object_subtype
  FROM amatia_logtask y
 WHERE y.parent_id IN (SELECT x.id_actividad
                         FROM amatia_actividades x
                        WHERE '12624' IN (x.id_actividad, x.id_padre)) 
```

Oracle 不允许您从 GROUP BY 中省略列，因此任何需要包装在聚合函数中的列。IE：

```
SELECT y.parent_id, y.id, 
       MAX(y.due_date) AS due_date, MIN(y.object_subtype) AS object_subtype
  FROM amatia_logtask y
 WHERE y.parent_id IN (SELECT x.id_actividad
                         FROM amatia_actividades x
                        WHERE '12624' IN (x.id_actividad, x.id_padre))
GROUP BY y.parent_id, y.id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T14:53:59.917

该`GROUP BY`子句是逗号分隔的列或表达式列表，因此您缺少逗号。

您仍然会收到错误消息，因为 SELECT 子句中的所有表达式都需要按或聚合（使用[聚合函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions003.htm#i89203)）进行分组。

所以你可能想写：

```
SELECT parent_id, id, due_date, object_subtype
  FROM amatia_logtask
 WHERE parent_id IN (SELECT id_actividad
                       FROM amatia_actividades
                      WHERE id_actividad = '12624'
                         OR id_padre = '12624')
 GROUP BY parent_id, id, due_date, object_subtype 
```

没有聚合的查询`GROUP BY`本质上是一个`DISTINCT`查询，因此您也可以在此处使用 distinct 来暗示您的意图：

```
SELECT DISTINCT parent_id, id, due_date, object_subtype
  FROM amatia_logtask
 WHERE parent_id IN (SELECT id_actividad
                       FROM amatia_actividades
                      WHERE id_actividad = '12624'
                         OR id_padre = '12624') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T07:53:17.563

试试这个

```
SELECT parent_id, id, due_date, object_subtype
  FROM amatia_logtask
 WHERE parent_id IN (SELECT id_actividad
                       FROM amatia_actividades
                      WHERE id_actividad = '12624'
                         OR id_padre = '12624')
 GROUP BY parent_id,id 
```

你只是在从句中缺少逗号。`GROUP BY`祝你好运

# c# - Activator.CreateInstance 有两个接口

> ID：14441064
> 
> 赞同：2
> 
> 时间：2013-01-21T14:45:49.773
> 
> 标签：c#, interface, activator

我有一个正在处理的项目，我想利用 Activator.createInstance 来动态地从 XML 中提取类名。类必须根据其功能订阅至少两个接口之一。我的问题是，当我使用 Activator.CreateInstance 时，判断我实例化的类订阅哪个接口的最佳方法是什么？我应该将演员表包裹在 try catch 中吗？这似乎会非常缓慢。也许我应该将其转换为 obj 然后调用 GetType 并将其与我的接口名称进行比较？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T14:49:03.147

所以你已经创建了对象？然后就像使用[`is`operator](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)一样简单。

```
var obj = Activator.CreateInstance(...);
bool objIsIMyInterface = obj is IMyInterface; 
```

如果您想在创建 a 时进行测试`System.Type`，可以使用[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)：

```
Type type = ...
bool typeIsIMyInterface = typeof(IMyInterface).IsAssignableFrom(type); 
```

# python - 分析 scipy.weave 内联代码

> ID：14441065
> 
> 赞同：3
> 
> 时间：2013-01-21T14:45:51.010
> 
> 标签：python, profiling, scipy

我`scipy.weave`用于 python 脚本中的性能关键部分。如果可能，我会使用 OpenMP 并行化这些代码。在某些情况下，我会遇到瓶颈，这可能是由于错误共享造成的。我如何分析这些内联代码，即对 Linux 平台上的合适工具有什么建议？

请参阅下面的错误向量加法实现，它容易出现错误共享。

```
from scipy.weave import inline
import numpy as np
import time

N = 1000
a = np.random.rand(N)
b = np.random.rand(N)
c = np.random.rand(N)

cpus = 4
weave_options = {'headers'           : ['<omp.h>'],
                 'extra_compile_args': ['-fopenmp -O3'],
                 'extra_link_args'   : ['-lgomp'],
                 'compiler'          : 'gcc'}

code = \
r"""
omp_set_num_threads(cpus);
#pragma omp parallel
{
   #pragma omp for schedule(dynamic)
      for ( int i=0; i<N; i++ ){
         c[i] = a[i]+b[i];
      }
}
"""

now = time.time()
inline(code,['a','b','c','N','cpus'],**weave_options)
print "TOOK {0:.4f}".format(time.time()-now)
print "SUCCESS" if np.all(np.equal(a,a)) else "FAIL" 
```

编辑：

可以使用

`valgrind --tool=callgrind --simulate-cache=yes python ***.py`

并且`kcachegrind ./callgrind.out.****`至少得到一个轻微的印象。但是对于这些类型的包装代码，结果往往会变得混乱。

# android - 方向改变时被第一个片段替换

> ID：14441066
> 
> 赞同：2
> 
> 时间：2013-01-21T14:45:55.667
> 
> 标签：android, fragment

我有一个问题 - 当我改变方向时，我的第二个片段（目前处于活动状态）被第一个片段替换。我从来没有这样的行为，如果解决它怎么办？

主要活动：

```
public class MainActivity extends SherlockFragmentActivity implements onDialogClickListener, ITaskLoaderListener {

FragmentManager fm;
public ActionBar actionBar;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pager_layout);

    fm = getSupportFragmentManager();

    actionBar = getSupportActionBar();
    actionBar.setHomeButtonEnabled(false);
    actionBar.setDisplayUseLogoEnabled(true);
    actionBar.setDisplayShowTitleEnabled(false);

    FragmentTransaction ft = fm.beginTransaction();

    ft.add(android.R.id.content, new FirstActivity.FirstFragment(), "loan").commit();

    }
} 
```

第一个片段：

```
public class FirstActivity extends SherlockFragmentActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(TAG, "here");
    final ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayUseLogoEnabled(true);
    actionBar.setDisplayShowTitleEnabled(false);
    FragmentManager fm = getSupportFragmentManager();

    if (fm.findFragmentById(android.R.id.content) == null) {
        FirstFragment first = new FirstFragment();
        fm.beginTransaction().add(android.R.id.content, first).commit();
    }
}

public static class FirstFragment extends SherlockFragment implements OnClickListener, OnItemClickListener {

    private static final String TAG = "LoanFragment";

    private View rootView;
    private Button bExtend;
    private FragmentManager fm;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (session.hasLoan()) {
            rootView = inflater.inflate(R.layout.fragment_loan, container, false);
            bExtend = (Button) rootView.findViewById(R.id.b1);

            return rootView;
        }
    }

    @Override
    public void onClick(View v) {
        FragmentTransaction ft = fm.beginTransaction();
        switch (v.getId()) {
        case R.id.b1:
            ft.add(android.R.id.content, new SecondActivity.SecondFragment(), "second").addToBackStack(null).commit();
            break;
        } 
```

第二个片段：

```
public class SecondActivity extends SherlockFragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayUseLogoEnabled(true);
    actionBar.setDisplayShowTitleEnabled(false);
    FragmentManager fm = getSupportFragmentManager();

    if (fm.findFragmentById(android.R.id.content) == null) {
        SecondFragment second = new secondFragment();
        fm.beginTransaction().add(android.R.id.content, second).commit();
    }
}

public static class SecondFragment extends SherlockFragment {

    private View rootView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        rootView = inflater.inflate(R.layout.fragment_extend, container, false);
        return rootView;
    } 
```

也就是说，当我在第二个片段中并尝试改变方向时，我的第二个片段将在第一个片段上替换。为什么？如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T14:54:12.007

`onCreate`将在方向更改时调用，您在那里添加第一个片段。您可以保存要显示的片段`onSaveInstanceState`，然后使用实例状态`onCreate`添加正确的片段。

**编辑：**

您需要维护一个变量`currentFragmentIndex`并将其保存`onSaveInstanceState`如下：

```
protected void onSaveInstanceState(Bundle bundle) {
    super.onSaveInstanceState(bundle);
    bundle.putInt("currentFragment", currentFragment);
} 
```

然后检索它`onCreate`并相应地初始化片段：

```
public void onCreate(Bundle bundle) {
    if (bundle!= null){
        currentFragmentIndex= bundle.getInt("currentFragment");
    } else {
        currentFragmentIndex = 0;
    }
    switch(currentFragmentIndex) {
        case 0: 
            // TODO: Add first fragment
            break;
        case 1: 
            // TODO: Add second fragment
            break;
    }
} 
```

切换到第二个片段时不要忘记更改`currentFragmentIndex`为。`1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T21:10:02.707

我遇到了同样的问题，但作为说明，我使用的是 v4 支持库。阅读 Sapan Diwakar 的回答后，我想知道这是否有必要；相反，我尝试了这个......

```
if (null == mFragmentManager.findFragmentByTag(TAG_HERE)) {
    mFragmentManager.beginTransaction()./*blah blah blah*/.commit();
} 
```

...所以原始片段只有在它应该去的地方没有附加任何东西时才会被实例化/附加。

我已经对此进行了一些测试，它似乎很好......当然，它*有效*的事实并不意味着它是一个*好主意*，但我对此太陌生了，不知道为什么它不会。如果任何人都可以插话，那将很有用。

感谢您发布这个问题，也感谢所有有意见的人！

# css - 输入 type="radio" 和隐藏的单选按钮 - chrome 中的问题？

> ID：14441069
> 
> 赞同：0
> 
> 时间：2013-01-21T14:46:03.207
> 
> 标签：css, google-chrome

我有这个 HTML：

```
<input type="radio">
<span class="label">
    <label id="options_34537_2label" for="options_34537_2">
</label>
</span> 
```

现在我还有一些 CSS，它隐藏了单选按钮本身并在我的标签前面放置了一个图像。

```
input[type="radio"] {
    display: none;
}

label:before {
    background: url("someimage.jpg") no-repeat scroll 0 0 transparent;
} 
```

在 IE 和 FF 中，我可以单击图像以选择选项，在 Chrome 中，单击根本不起作用。知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:55:12.300

您应该将其放入`<input>` *内部*以`<label>`使其可圈：

```
<label><input type="radio"></label> 
```

*并直接*在标签上使用背景属性，而不是使用 :before 伪类。然后添加一些文本或指定宽度以显示您的背景。

# java - Java - 模式匹配奇怪的行为

> ID：14441070
> 
> 赞同：2
> 
> 时间：2013-01-21T14:46:08.900
> 
> 标签：java, regex

我必须执行部分模式匹配，所以我针对以下输入测试了模式匹配

```
Pattern p = Pattern.compile("hello");
Matcher m = p.matcher("[a-z]"); 
```

谁能解释我为什么

```
System.out.println(m.find() || m.hitEnd()); 
```

打印`true`时

```
System.out.println(m.hitEnd()); 
```

打印`false`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:49:32.980

**更新：**

因为`m.find()`它自己完全处理了模式，但没有找到匹配项（并返回`false`）。该模式在此调用后被完全使用，因此`hitEnd()`将 result `true`。

在第二次调用中，模式没有被消耗，所以`hitEnd()`返回`false`。

对于`hitEnd()`Javadoc 说：

> 如果在此匹配器执行的最后一次匹配操作中搜索引擎命中输入结尾，则返回 true。

反思@jlordo 的评论：也许您想**更改模式和文本**：

```
Pattern p = Pattern.compile("[a-z]");
Matcher m = p.matcher("hello"); 
```

因为`"[a-z]"`它看起来像一个模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:06:28.597

看看这个程序：

```
Pattern p = Pattern.compile("hello");
Matcher m = p.matcher("[a-z]");
System.out.println(m.hitEnd()); // prints false
System.out.println(m.find());  // prints false
System.out.println(m.hitEnd()); // prints true 
```

注意，第一次调用`m.hitEnd()`返回`false`。看看[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#hitEnd%28%29)，它说：

> **如果在此 matcher 执行的最后一次匹配操作中**搜索引擎命中了输入的结尾，则返回 true 。

这里它返回`false`，因为它在调用 之前被调用`m.find()`，所以匹配器还没有执行任何匹配操作。调用`m.find()`它返回后`true`（因为`find()`消耗了完整的输入字符串并到达*end* *）*。JavaDoc中也解释了其含义：

> 当此方法返回 true 时，更多输入可能会改变上次搜索的结果。

当它返回 true 时，这意味着匹配器到达了输入的末尾。在这种情况下，命中意味着到达，不匹配。（输入完全被匹配器消耗）。

**编辑**

我希望它是你想要的，那`[a-z]`是你的正则表达式的输入字符串`hello`，而不是相反。如果你有

```
Pattern p = Pattern.compile("[a-z]"); // The regex needs to be compiled.
Matcher m = p.matcher("hello");       // The input is given to the matcher
while (m.find()) {                    // In this case, returns true 5 times
    System.out.println(m.group() + ", ");
} 
```

你的输出将是

```
h, e, l, l, o, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:50:05.283

```
System.out.println(m.find() || m.hitEnd()); 
```

m.find() 返回一个布尔值 - 该布尔值是假的。我们刚刚处理了输入搜索的结尾——这使得 m.hitend() 结果为真。假 || 因此，true 等于 true。

前面的操作结束了——如果..好吧，hitend() 返回 true，这里是 javadoc：

```
Returns true if the end of input was hit by the search engine in the last 
match operation performed by this matcher. 
```

我们没有到达终点……在最后一次手术中。所以 hitend() 是假的。连续调用将导致错误。

# javascript - 相对路径列表 - 根据路径对它们进行分组

> ID：14441077
> 
> 赞同：0
> 
> 时间：2013-01-21T14:46:31.433
> 
> 标签：javascript, backbone.js

我有几条路径，路径的深度和数量可能是无限的。

我使用主干，并从服务器获取数据，每个模型都包含一个路径字段，例如：

```
"/home/harry/"
"/home/sally/"
"/home/sally/personal"
"/home/harry/files"
"/home/harry/photos"
"/home/harry/videos"
"/home/harry/files/documents"
"/home/harry/files/personal"
"/home/harry/photos/2012"
"/home/harry/photos/2011"
"/home/harry//videos/2012"
"/home/harry/videos/edited"
"/home/harry/videos/edited/other/trash_this" 
```

我想对模型进行分组，以便我可以在我的网络应用程序中表示文件结构，以便您可以单击“主页”并列出其所有相关目录等。因此，您可以进一步单击结构，直到该文件夹​​/目录中不再有文件或目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:18:24.413

一种解决方案是将这些路径解析为一组集合。就像是：

```
var home = new PathCollection({});
_(models).each(function(model) {
    if (model.get('path').indexOf('/home/') == 0) {
        model.set('relativePath', model.get('path').substr(6)) ; ditch '/home/'
        home.add(model);
    }
} 
```

然后，在 PathCollection 中，您可以重写 add 方法以执行类似的操作（即查看模型的相对路径的第一部分并将它们添加到适当的集合中），如下所示：

```
var PathCollection = Backbone.Collection.extend({
    add: function(model) {
        // NOTE: This is naive; a real add would need to accept multiple models
        if (model.get('relativePath').indexOf('harry/') == 0) {
             // create harry collection if it doesn't exist
             if (!this.harry) this.harry = new PathCollection();
             this.harry.add(model);
        } 
    }
}) 
```

当然，您可能希望使其更通用，并在“/”字符上拆分，而不是`indexOf`对特定路径进行特定检查，但希望您明白这一点。关键是，如果您编写一个集合来检查其成员模型的路径，并酌情将它们添加到其他集合中，那么最终您将得到一个很好的嵌套集合系列。

一旦有了它，检查哪些模型属于哪些路径就变得微不足道了；例如，要获取 /home/harry/ 路径下的模型，您只需执行以下操作：

```
home.harry.models; 
```

# python - 使用 python 线程锁和循环导入时的意外行为

> ID：14441080
> 
> 赞同：5
> 
> 时间：2013-01-21T14:46:47.527
> 
> 标签：python, multithreading, locking

我使用线程锁编写了一个简单的测试程序。这个程序没有按预期运行，python 解释器也没有抱怨。

测试1.py：

```
from __future__ import with_statement
from threading import Thread, RLock
import time
import test2

lock = RLock()

class Test1(object):
    def __init__(self):
        print("Start Test1")
        self.test2 = test2.Test2()
        self.__Thread = Thread(target=self.myThread, name="thread")
        self.__Thread.daemon = True
        self.__Thread.start()
        self.test1Method()

    def test1Method(self):
        print("start test1Method")
        with lock:
            print("entered test1Method")
            time.sleep(5)
            print("end test1Method")

    def myThread(self):
        self.test2.test2Method()

if __name__ == "__main__":
    client = Test1()
    raw_input() 
```

测试2.py：

```
from __future__ import with_statement
import time
import test1

lock = test1.lock

class Test2(object):
    def __init__(self):
        print("Start Test2")

    def test2Method(self):
        print("start test2Method")
        with lock:
            print("entered test2Method")
            time.sleep(5)
            print("end test2Method") 
```

两个睡眠同时执行！不是我使用锁时的预期。

当 test2Method 移动到 test1.py 一切正常。当我在 test2.py 中创建锁并将其导入 test1.py 时，一切正常。当我在单独的源文件中创建锁并将其导入 test1.py 和 test2.py 时，一切正常。

可能与循环进口有关。

但是为什么 python 不抱怨呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:17:56.723

在 Python 中，当您使用执行 python 脚本时 `$ python test1.py`，您`test1.py`将被导入为`__main__`而不是`test1`，因此，如果您想获得在启动脚本中定义的锁，您不应该，`import test1`但您应该`import __main__`这样做，因为如果您执行第一个，您将创建另一个不同于`__main__.lock`( `test1.lock != __main__.lock`) 的锁。

因此，可以解决您的问题（**远非最佳**）并**查看发生了什么，**您可以将 2 脚本更改为：

测试1.py：

```
from __future__ import with_statement
from threading import Thread, RLock
import time

lock = RLock()

class Test1(object):
    def __init__(self):
        print("Start Test1")
        import test2    # <<<<<<<<<<<<<<<<<<<<<<<< Import is done here to be able to refer to __main__.lock.
        self.test2 = test2.Test2()
        self.__Thread = Thread(target=self.myThread, name="thread")
        self.__Thread.daemon = True
        self.__Thread.start()
        self.test1Method()

    def test1Method(self):
        print("start test1Method")
        with lock:
            print("entered test1Method")
            time.sleep(5)
            print("end test1Method")

    def myThread(self):
        self.test2.test2Method()

if __name__ == "__main__":
    client = Test1()
    raw_input() 
```

测试2.py：

```
from __future__ import with_statement
import time
# <<<<<<<<<<<<<<<<<<<<<<<<<<<<< test1 is changed to __main__ to get the same lock as the one used in the launched script.
import __main__

lock = __main__.lock

class Test2(object):
    def __init__(self):
        print("Start Test2")

    def test2Method(self):
        print("start test2Method")
        with lock:
            print("entered test2Method")
            time.sleep(5)
            print("end test2Method") 
```

高温下，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:08:45.330

`print`在语句之前和之后使用语句并在创建后立即`import`打印`id(lock)`表明实际上创建了*两个*锁。似乎模块被导入了两次，mouad 在他的回答中解释说这是因为`test1.py`首先导入 as `__main__`，然后导入 as `test1`，这导致锁被实例化两次。

尽管如此，使用全局锁无论如何都不是一个好的解决方案。有几种更好的解决方案，我认为您会发现其中一种适合您的需求。

*   将锁实例化为 的类变量`Test1`，并将其作为参数传递给`Test2`

*   将锁实例化为 in 的普通变量`Test1`，`__init__`并将其作为参数传递给`Test2`。

*   实例化块中的锁`if __name__ == "__main__"`并将其传递给`Test1`，然后从`Test1`传递给`Test2`。

*   实例化`if __name__ == "__main__"`块`Test2`中的锁，先用锁实例化，然后将`Test2`实例*和*锁传递给`Test1`. （这是最解耦的方法，我建议使用这种方法。它至少可以简化单元测试。）。

这是最后一个建议的代码：

# `test1.py`：

```
class Test1(object):
    def __init__(self, lock, test2):
        print("Start Test1")
        self.lock = lock
        self.test2 = test2
        self.__Thread = Thread(target=self.myThread, name="thread")
        self.__Thread.daemon = True
        self.__Thread.start()
        self.test1Method()

    def test1Method(self):
        print("start test1Method")
        with self.lock:
            print("entered test1Method")
            time.sleep(1)
            print("end test1Method")

    def myThread(self):
        self.test2.test2Method()

if __name__ == "__main__":
    lock = RLock()
    test2 = test2.Test2(lock)
    client = Test1(lock, test2) 
```

# `test2.py`：

```
class Test2(object):
    def __init__(self, lock):
        self.lock = lock
        print("Start Test2")

    def test2Method(self):
        print("start test2Method")
        with self.lock:
            print("entered test2Method")
            time.sleep(1)
            print("end test2Method") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:35:01.533

正如其他人所说，问题不在于`threading`，而在于您的循环导入的特殊情况。

为什么特别？因为通常的工作流程（`mod1`导入`mod2`和`mod2`导入`mod1`）如下所示：

1.  你想使用模块 mod1，你导入它（`import mod1`）

2.  当 Python 找到它时，解释器将它添加到`sys.modules`并开始执行代码

3.  当它达到与 一致时`import mod2`，它停止执行`mod1`并开始执行`mod2`

4.  当解释器到达`import mod1`within`mod2`时，它**不会**加载`mod1`，因为它已经添加到`sys.modules`

5.  之后（除非某些代码从`mod2`访问一些未初始化的资源`mod1`）解释器完成了`mod2`和的执行`mod1`。

但是在您的情况下，在第 4 步。Python`test1`再执行一次，因为没有`test1`in `sys.modules`！原因是您一开始没有导入它，而是从命令行运行它。

所以，不要使用循环导入——正如你所看到的那样，这真是一团糟。

# python-sphinx - 如何从 python 文档字符串生成 Web API 文档

> ID：14441081
> 
> 赞同：0
> 
> 时间：2013-01-21T14:46:49.743
> 
> 标签：python-sphinx

我有一个 Django 网站，并创建了一个 REST api。在视图函数中，我有关于 REST url 的文档，并且我想为 REST url 生成 API 文档。视图函数如下所示：

```
def genres(request):
    """
    Url: /api/genres/
    Parameters: None
    Returns: list of genres { { "id":1, "name":"action" }, {...} }
    """
    pass 
```

但是当我在 myproject.api.views 上运行 sphinx 时，我得到了用于在 python 中调用 api 的 html 文档。有没有办法配置 sphinx 像 REST api 一样记录它？

还是我最好自己编写一个脚本来从文档字符串中生成我的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:50:02.837

检查[sphinxcontrib-httpdomain](http://packages.python.org/sphinxcontrib-httpdomain/)

您可以使用 autodoc 来使用 docstrings 和 httpdomain 扩展名来使用 .. http:get:: /users/ 样式指令。这个解决方案有一个问题，它还会显示函数的签名。为了解决这个问题，我对 Sphinx 源代码进行了一些修改，制作了一个不会将签名添加到最终文档中的原始 autodoc 扩展的副本。

这些文件可以在[https://gist.github.com/4589457上找到](https://gist.github.com/4589457)

指示：

1.  将sphinx 路径上的**application.py**替换为[gist](https://gist.github.com/4589457)上的路径（我系统上的路径是 /Library/Frameworks/Python.framework/Versions/Current/lib/python2.7/site-packages/Sphinx-1.1.3-py2 .7.egg/狮身人面像/)
2.  在 ext 文件夹中添加**simpleautodoc.py**
3.  在 conf.py 上添加**httpdomain**扩展，以便使用 .. http:get:: /users/ 样式指令
4.  使用 simpleautodoc，就像使用前缀**autosimple**而不是 auto 一样使用 autodoc（例如 autosimplemodule 而不是 automodule autosimpleclass 而不是 autoclass 等）
5.  **example.py**文件显示了我如何格式化文档字符串的示例

# apache - .htaccess：在 url 中使用两个或多个斜杠时排除特定目录

> ID：14441085
> 
> 赞同：2
> 
> 时间：2013-01-21T14:47:02.620
> 
> 标签：apache, .htaccess, mod-rewrite

简而言之：我正在一个网站上工作，消费者可以在该网站上比较多个分支机构的公司（服务提供商）。因此，我们使用最大的 SEO 友好 url。3 个“目录” `mydomain.com/1/`：`mydomain.com/1/2/`和`mydomain.com/1/2/3`。在这些 url 中是 1 用户可以搜索的分支机构，2 代表城市，3 定义公司名称。

我已经在我的 .htaccess 文件中使用以下代码完成了这项工作。

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks  
    RewriteEngine On 

    RewriteRule ^(style|media)(/.*)?$ - [L] 

    RewriteRule index\.* index.php [L,QSA]  
    RewriteRule ^([^/]*)/([^/]*)/$ branch.php?branch=$1&city=$2 [L,QSA]  
    RewriteRule ^([^/]*)/([^/]*)/([^/]*)/?$ company.php?branch=$1&city=$2&company=$3 [L,QSA]  
    RewriteRule ^([^/]*)/([^/]*)$ branch.php?branch=$1&city=$2 [L,QSA]  
    RewriteRule ^([^/][a-zA-Z0-9-]+)$ branch.php?branch=$1 [L,QSA]  
</IfModule> 
```

我的样式表位于目录样式中，如果您访问网址 mydomain.com 或 mydomain.com/1，这可以正常工作。地址 mydomain.com/1/ 并进一步重定向到正确的文件名，但继续在`mydomain.com/1/style/`（或`mydomain.com/1/2/style`等等）中搜索 stylesheet.css。我知道这个网站上有很多这样的问题，我尝试了很多，但没有一个能真正做到我想要的。

我知道这种情况是否很艰难，所以我想我会让它变得更容易（但由于这个语言让我感到困惑，我现在真的不知道该怎么做哈哈）。所以这就是我需要的：

*   每个请求都必须重定向到 index.php，并将给定的目录作为参数添加。（所以 domain.com/1/ 重写`index.php?1=1`和 domain.com/1/a/b 重写`index.php?1=1&2=a&3=b, in index.php`我将查找我必须包含的页面）。
*   此规则不包括 Dirs*样式*和*媒体。*
*   并非必须排除每个现有的目录或文件，因为用户可能无法访问*包含*的目录（例如）

我希望你能帮助我，因为我把它弄得一团糟^^

谢谢！

# python - 了解什么是围绕现有库的 API 包装器

> ID：14441086
> 
> 赞同：0
> 
> 时间：2013-01-21T14:47:03.507
> 
> 标签：python, api

如何编写一个 python 辅助 API 来包装现有的 python 库。

我从来没有写过这样的东西，或者可能写过但没有意识到。有人能告诉我它到底是什么以及怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:17:43.050

库的包装器结合了该库（和其他库）中的功能，使该库对您正在做的任何事情都更有用。

例如，下面是一组可能构成一个库的过程：

*   add(x, y) # 返回 x + y
*   subtract(x, y) # 返回 x - y

这是一个“包装”这些过程的过程：

```
def multiply(x, y):
    product = 0
    for i in xrange(x):
        product = add(product, y)
    return product 
```

...同样，也许是一个 divide() 过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:52:22.960

过程大多是这样的：

1）您编写一个新库（包装器）

2）这个库依赖于现有的库（你要包装的那个）

3) 包装器将调用底层库，提供与原始库不同的 API

通常你想这样做是因为原始库一开始就没有对开发人员友好的 API。

但是你没有说为什么你应该接受这样的任务。给你任务的人也应该能够给你工作的理由。给你任务的人可以准确地告诉你想要什么以及如何去做。因为你的问题没有细节，所以不可能给出更好的答案。

# import - Unity 正在更改 .dae 导入时的对象名称

> ID：14441089
> 
> 赞同：0
> 
> 时间：2013-01-21T14:47:17.113
> 
> 标签：import, unity3d

我正在导入一个模型的 .dae（最初是来自 CATIA V5 的 CAD），该模型包含多个共享相同名称的对象，但在层次结构中的位置不同。

在导入时，Unity 在对象名称的末尾添加一个索引。

例如，使用相同名称的 4 个对象，例如“Wheel”，将被导入为“Wheel 1”、“Wheel 2”、“Wheel 3”和“Wheel 4”

我需要保留原来的名字。

您知道我可以做些什么来确保保留原始名称吗？

谢谢

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:56:28.723

您可以使用资产后处理器来覆盖此行为。有关详细信息，请参阅[http://docs.unity3d.com/Documentation/ScriptReference/AssetPostprocessor.html 。](http://docs.unity3d.com/Documentation/ScriptReference/AssetPostprocessor.html)

# android - apk 必须使用与 prebious 版本相同的证书进行签名

> ID：14441100
> 
> 赞同：-2
> 
> 时间：2013-01-21T14:48:02.177
> 
> 标签：android, eclipse, keystore

我尝试添加一个旧应用程序的更新版本（10.0 版），但是当我尝试将 apk 添加到现有 apk 列表时，我收到了消息

```
 The apk must be signed with the same certificates as the prebious version 
```

我肯定使用了正确的密钥库，因为该文件夹中只有一个，但随后我尝试取消发布旧的密钥库并添加新的应用程序。我将版本代码更新为 11，将版本名称更新为 10.1 创建了一个新的 apk 文件，但是当我尝试添加为新文件时，我收到了消息

```
 If you have another application on Google Play with the same package name (org.MyApp). Go to that application and click upgrade 
```

我不知道接下来要尝试什么，因为我看到的每个条目都告诉我我使用了错误的密钥库，但我没有。如何解决第二个错误，如果我只是更改包名称，下载时它会崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:02:11.193

听起来好像您使用了错误的密钥库。这需要与您首次发布应用程序时使用的相同。

您不能发布具有相同包名的新应用程序，因为谷歌要求每个应用程序都具有唯一的包名。

如果您要使用新的包名称发布原始应用程序，则必须告诉现有用户移动到新应用程序。

# jquery - bxslider 在无限循环中显示空白空间

> ID：14441101
> 
> 赞同：0
> 
> 时间：2013-01-21T14:48:01.883
> 
> 标签：jquery, bxslider

我以这种方式在我的项目中添加了一个 bxslider：jquery：

```
$(document).ready(function () {
        $('.bxslider').bxSlider({
            minSlides: 2,
            maxSlides: 3,
            slideWidth: 340,
            moveSlides: 1,
            slideMargin: 0,
            infiniteLoop: true
        }); 
```

HTML部分：

```
<div style="width:100%;float: left; position: relative; bottom: 17px;">
    <ul class="bxslider" id="slider1" >
        <li style="float: left; list-style: none outside none;width:340px !important;">
<img src="/Content/images/home.png" alt="home" width="340"height="239" />
</li>
<li style="float: left; list-style: none outside none;width:340px !important;">
<img src="/Content/images/home1.png" alt="home1" width="340"height="239" />
</li>
<li style="float: left; list-style: none outside none;width:340px !important;">
<img src="/Content/images/home2.png" alt="home2" width="340"height="239" />
</li>
</ul>
</div> 
```

当我们单击下一个按钮时，我们会看到图像在滑块中 1 个 1 移动。当滑块的所有图像完成后，它会再次从第一个图像开始旋转 - 在这种情况下，我们会看到一个小的“空白区域”然后是第一张图片。我们想要一个平滑的循环循环工作，而不会看到任何空白空间。

上述问题的链接是

[http://neelamsharma.s3.amazonaws.com/simplehtml/testing/testing.html](http://neelamsharma.s3.amazonaws.com/simplehtml/testing/testing.html)

谁能告诉我这个的解决方案？这将是非常可观的

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-19T02:05:55.443

使用“代码”。像这样：

```
$( '.bxslider' ).bxSlider( {
      pager: false,
      slideMargin: 30,
      controls: false,
      speed: 50000,
      useCSS: false,
      ticker: true,
      tickerHover: true,
      slideWidth: 300,
      responsive: false,
      minSlides: 2,
      maxSlides: 100,
  } ); 
```

这将产生新闻行情或从左到右连续馈送的效果。如果这不起作用，则说明您的 CSS 有问题。为此，我没有围绕我的 HTML 编写任何样式。jQuery 中只有这些 bxslider 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T04:08:01.083

使用标签元素对我有用`backface-visibility: hidden`。`li`

# actionscript-3 - 无参数构造函数调用是否需要括号'（）'？

> ID：14441105
> 
> 赞同：1
> 
> 时间：2013-01-21T14:48:16.230
> 
> 标签：actionscript-3

以下两个代码示例之间有什么区别吗？

```
var label:Label = new Label;

var label:Label = new Label(); 
```

我问是因为网上的一些教程警告要始终使用“（）”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:52:42.320

没有区别，它完全一样，但是对于 AS3 编码风格，使用父母更常见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:56:27.683

当创建一个新对象时，即使用 a `new`，则没有区别。所以，`new MyClassWithNoArgument`和`new MyClassWithNoArgument()`是一样的。

但是，大体上`aMethod`又`aMethod()`是不一样的。`aMethod`是一个`Function`对象，并且在函数对象上使用括号调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T14:55:20.303

在**空构造函数**的情况下（如显示列表中的大多数对象，如`DisplayObject`,`Sprite`等`MovieClip`）绝对没有区别

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T17:02:17.487

与 new 运算符一起使用时可以接受零参数的构造函数没有区别。即使隐式添加了括号“（）”，您也应该使用它们来保持一致性/清晰性，以便您打算调用函数而不是传递函数的引用。

# spring - 带有 Spring 身份验证错误的 Jboss 7.1 JMS

> ID：14441107
> 
> 赞同：1
> 
> 时间：2013-01-21T14:48:21.857
> 
> 标签：spring, jms, jboss7.x, hornetq

我正在尝试使用 spring 使用 hornetq （ jboss 上的 jms ）。但我无法对用户进行身份验证。似乎我在将用户信用发送到 hornetq 身份验证界面时遇到问题。我的弹簧配置：

```
<bean id="jmsJndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">${jms.jndi.initialContextFactory}</prop>
            <prop key="java.naming.provider.url">${jms.jndi.providerUrl}</prop>
            <prop key="java.naming.security.principal">${jms.jndi.username}</prop>
            <prop key="java.naming.security.credentials">${jms.jndi.password}</prop>                
            <prop key="java.naming.factory.url.pkgs">${jms.jndi.packagePrefixes}</prop>
        </props>
    </property>
</bean>
<bean id="jmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jmsJndiTemplate"/>
    <property name="jndiName" value="${jms.connectionFactory}"/>
</bean>
<bean id="jmsIletisimRawDataSendDestination" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jmsJndiTemplate"/>
    <property name="jndiName" value="${jms.iletisim.rawdata.send}"/>
</bean>

<bean id="jmsConnectionExceptionListener" class="com.marti.jms.ConnectionExceptionListener">
</bean>

<bean id="jmsConnectionPool" class="com.marti.jms.PoolFTConnection" init-method="initConnection" destroy-method="destroyConnection">
    <property name="cf" ref="jmsConnectionFactory"/>
    <property name="exceptionListener" ref="jmsConnectionExceptionListener"/>
    <property name="poolSize" value="${jms.poolSize}"/>           
</bean>

<bean id="iletisimRawDataSender" class="com.marti.jms.MessageSender" depends-on="jmsConnectionPool" init-method="setupSender" destroy-method="destroySender">
    <property name="connections" ref="jmsConnectionPool"/>
    <property name="destination" ref="jmsIletisimRawDataSendDestination"/>
    <property name="sessionsPerConnection" value="${jms.sessionPerConnection}"/>
    <property name="messageTTL" value="${jms.ttl}"/>
</bean> 
```

我用错了吗？（显然是:)）

这是堆栈跟踪；

> 14:52:13,408 错误 [org.hornetq.core.protocol.core.impl.HornetQPacketHandler]（旧 I/O 服务器工作者（parentId：29291087，[id：0x01bef24f，/0.0.0.0:5445]））创建失败session : HornetQException[errorCode=105 message=Unable to validate user: null] at org.hornetq.core.security.impl.SecurityStoreImpl.authenticate(SecurityStoreImpl.java:147) [hornetq-core-2.2.13.Final.jar: ] 在 org.hornetq.core.server.impl.HornetQServerImpl.createSession(HornetQServerImpl.java:807) [hornetq-core-2.2.13.Final.jar:] 在 org.hornetq.core.protocol.core.impl.HornetQPacketHandler .handleCreateSession(HornetQPacketHandler.java:187) [hornetq-core-2.2.13.Final.jar:] at org.hornetq.core.protocol.core.impl.HornetQPacketHandler.handlePacket(HornetQPacketHandler.java:85) [hornetq-core -2.2.13.Final.jar:] 在 org.hornetq.core.protocol.core.impl。ChannelImpl.handlePacket(ChannelImpl.java:508) [hornetq-core-2.2.13.Final.jar:] at org.hornetq.core.protocol.core.impl.RemotingConnectionImpl.doBufferReceived(RemotingConnectionImpl.java:556) [hornetq- core-2.2.13.Final.jar:] at org.hornetq.core.protocol.core.impl.RemotingConnectionImpl.bufferReceived(RemotingConnectionImpl.java:517) [hornetq-core-2.2.13.Final.jar:] at org org.hornetq.core.remoting.impl.netty 上的 .hornetq.core.remoting.server.impl.RemotingServiceImpl$DelegatingBufferHandler.bufferReceived(RemotingServiceImpl.java:533) [hornetq-core-2.2.13.Final.jar:]。 HornetQChannelHandler.messageReceived(HornetQChannelHandler.java:73) [hornetq-core-2.2.13.Final.jar:] at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:100) [netty-3.2.6\. Final.jar:] 在 org.jboss.netty.channel。StaticChannelPipeline.sendUpstream(StaticChannelPipeline.java:372) [netty-3.2.6.Final.jar:] at org.jboss.netty.channel.StaticChannelPipeline$StaticChannelHandlerContext.sendUpstream(StaticChannelPipeline.java:534) [netty-3.2.6\. Final.jar:] 在 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:287) [netty-3.2.6.Final.jar:] 在 org.hornetq.core.remoting.impl.netty.HornetQFrameDecoder2 .decode(HornetQFrameDecoder2.java:169) [hornetq-core-2.2.13.Final.jar:] at org.hornetq.core.remoting.impl.netty.HornetQFrameDecoder2.messageReceived(HornetQFrameDecoder2.java:134) [hornetq-core -2.2.13.Final.jar:] at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:80) [netty-3.2.6.Final.jar:] at org.jboss.netty.channel。静态通道管道。sendUpstream(StaticChannelPipeline.java:372) [netty-3.2.6.Final.jar:] at org.jboss.netty.channel.StaticChannelPipeline.sendUpstream(StaticChannelPipeline.java:367) [netty-3.2.6.Final.jar: ] 在 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:274) [netty-3.2.6.Final.jar:] 在 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261 ) [netty-3.2.6.Final.jar:] at org.jboss.netty.channel.socket.oio.OioWorker.run(OioWorker.java:100) [netty-3.2.6.Final.jar:] at org .jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108) [netty-3.2.6.Final.jar:] at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44 ) [netty-3.2.6.Final.jar:] at org.jboss.netty.util.VirtualExecutorService$ChildExecutorRunnable.run(VirtualExecutorService.java:181) [netty-3.2.6.Final.jar:] 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_37] 在 java.util.concurrent.ThreadPoolExecutor $Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_37] at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:16:01.253

这是一个临时的或变通的解决方案，但谁想要解决这个问题或不想遇到同样的问题；这是解决方案：

*   在 jboss 管理界面点击屏幕右上角的 Profile。
*   单击左侧树形菜单上的消息传递 -> 消息传递提供程序。
*   在右侧窗格中，单击您尝试连接的提供商的“查看”。
*   然后编辑“JMS Provider Configurations”的设置，将 Security Enabled 设置为“false”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:22:39.913

您只是收到身份验证错误吗？

您只需使用 JBoss 附带的 addUser 脚本将用户和密码添加到用户组。

如果您遇到不同的错误，我需要更多详细信息（例如您的异常堆栈跟踪）。

# mysql - 实现接口的 Enum 的 Hibernate 映射（即是子类）

> ID：14441113
> 
> 赞同：1
> 
> 时间：2013-01-21T14:48:48.683
> 
> 标签：mysql, hibernate, enums, hibernate-mapping

我用 Hibernate 弄湿了我的脚，我遇到了一个我找不到任何解决方案的问题。

我有一个接口`MyInterface`和一个实现该接口的枚举：

```
class MyInterface {
    void someMethod();
}

enum MyEnum implements MyInterface {

    INST1, INST2;

    @Override
    public void someMethod() {
        // ...
    }
} 
```

（我还有一些其他的实现，`MyInterface`但我认为这并不重要。）

现在我正在尝试使用每个类层次结构方案一个表来映射`MyInterface`（其中`MyEnum`之一）的实现。我知道如何将普通枚举映射为属性，也知道如何映射普通子类，但我不知道如何进行组合。混合两种技术如下

```
-- DOES NOT WORK. --

<subclass name="package.MyEnum" extends="package.MyInterface">
    <type name="org.hibernate.type.EnumType">
        <param name="enumClass">package.MyEnum</param>
    </type>
</subclass> 
```

显然不支持。

任何帮助表示赞赏。

（我意识到我可以通过创建类似的东西来解决这个问题

```
class MyEnumWrapper implements MyInterface {
    MyEnum inst;

    public void someMethod() {
        inst.someMethod();
    }
} 
```

在这种情况下，可以使用普通的子类映射，但如果可能的话，我宁愿避免这种情况。不过，我实现自定义 UserTypes 没有问题。）

# nginx - 乘客 3.0.17 + Nginx 1.2.4 + “Content-Length”标头 = 502 Bad Gateway

> ID：14441118
> 
> 赞同：1
> 
> 时间：2013-01-21T14:48:58.637
> 
> 标签：nginx, http-headers, ruby-on-rails-3.2, passenger

我刚刚遇到一个问题，`response.headers['Content-Length']`在 Rails 3.2.2 应用程序中设置会导致 Nginx 抛出“502 Bad Gateway”错误。

我在控制器中有一个动作，它使用该`send_data`方法发送包含在变量中的原始 JPEG 数据。之前，我遇到了一些浏览器没有下载正在发送的整个图像的问题，并且发现没有发送 Content-Length 标头，因此我决定使用`.bytesize`包含 JPEG 数据的变量的属性作为 Content-Length。

这在开发中运行良好（使用 Unicorn），现在有一个 Content-Length 标头，以前没有，但是在我使用 Nginx 和Passenger 的生产中，我得到了前面提到的 502 Bad Gateway。此外，在 Nginx 错误日志中，我看到：

```
[error] 30574#0: *1686 upstream prematurely closed connection while reading response header from upstream 
```

Rails 生产日志中没有匹配的条目，这告诉我应用程序很好。

我已经注释掉了我设置 Content-Length 标头的行，问题就消失了。我仍在测试我是否真的需要发送 Content-Length 标头，但与此同时，我想我可能会出于好奇而发布此消息，看看是否有人有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:10:49.153

啊哈！我必须通过添加`.to_s`方法将大小转换为字符串。所以，我的最终结果是

```
response.headers['Content-Length'] = photo_data.bytesize.to_s
send_data photo_data, :type => :jpg, :filename => 'file_name.jpg', :disposition => 'attachment' 
```

因此，似乎可以`Content-Length`在 Nginx/Passenger 上发送标头，但如果不是明确的字符串，Passenger 就会窒息。

# r - 使用 R 中的绘图从数据框调用

> ID：14441124
> 
> 赞同：1
> 
> 时间：2013-01-21T14:49:09.817
> 
> 标签：r

我有一个包含 14 个变量的 407 个观察值的数据框。使用 ggplot2 或其他图形，我可以轻松地创建一个变量相对于另一个变量的散点图，以便我观察模式。

我希望能够突出显示散点图中由于它们在图中形成的模式而感兴趣的一些点，然后从数据框中调用相关信息。有没有可以做到这一点的包？

数据框中没有其他变量可以让我区分图中的一组有趣点。这将使问题变得简单得多。

我知道这可能是一个比我想象的更大的问题，我很感激任何正确方向的指示！

非常感谢！尼基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:14:10.153

这里有两个选项：`identify()`在基础 R 和`iplots`包中。

首先，您可以在单击`identify()`a 时使用它们来识别和标记点：`plot()`

```
data(cars)
plot(cars)
interesting <- identify(cars) 
```

现在，如果我们单击绘图，它将搜索最近的数据点，返回它的索引，并且默认情况下（除非我们添加 plot = FALSE 参数），用它的索引标记那个点。

![在此处输入图像描述](../Images/6d4c31a8c8422f3a68df13be0232e51b.png)

我们通过单击鼠标辅助按钮并从菜单中选择“停止”或在图形窗口中选择“停止”来停止识别过程。由于我们将输出存储在一个名为有趣的变量中，我们可以轻松地检查这些点：

```
cars[interesting,]
#    speed dist
# 19    13   46
# 23    14   80
# 44    22   66 
```

该`iplots`软件包提供了非常好的交互式链接图，提供了一个更好的解决方案：

```
library(iplots)
data(iris)
iplot(iris$Sepal.Length,iris$Petal.Length)
ihist(iris$Sepal.Width) 
```

使用 iplots，您可以突出显示一个绘图上的数据并让它们在所有绘图上更改颜色。在这里，我选择了下图中的红点，并在两个图上更改了它们的颜色。

![在此处输入图像描述](../Images/d106c2537b938b202bd3002b9b062d1e.png)

突出显示数据子集后，我们可以用 确定当前选择的点`iset.selected()`，如下所示：

```
iris[iset.selected(),]
#     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
# 85           5.4         3.0          4.5         1.5 versicolor
# 91           5.5         2.6          4.4         1.2 versicolor
# 54           5.5         2.3          4.0         1.3 versicolor
# etc 
```

由于您有 14 个变量，`iplot()`因此多个散点图可能比使用`identify()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:14:23.703

我认为您想要的是与散点图矩阵进行交互。我不知道你怎么能做到这一点，`ggplot2`但使用 lattice 你可以很容易地做到这一点`trellis.focus`..

你可以试试这个，例如：

```
super.sym <- trellis.par.get("superpose.symbol")
splom(~iris[1:4], groups = Species, data = iris,      ## splom will draw scatter plots
       panel = panel.superpose,                       ## in iris data since you don't provide 
      key = list(title = "Three Varieties of Iris",   ## reproducible example
                 columns = 3, 
                points = list(pch = super.sym$pch[1:3],
                             col = super.sym$col[1:3]),
                 text = list(c("Setosa", "Versicolor", "Virginica")))) 
```

然后，交互部分：

```
trellis.focus('panel', 1, 1)                                 ## get the focus
idx <- panel.link.splom(pch=13, cex=0.6, col='green')        ## 
```

我选择了一些比我逃避的点。我在 idx 中得到结果：

```
 idx
[1]  59  21 139  84  78  92 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:48:03.630

我认为没有办法使用 ggplot2 来做到这一点，但还有其他工具可以做到这一点（通常称为刷牙）。

Rggobi 包是 ggobi 程序的一个接口，它执行刷机（以及旋转和许多其他事情），您可以将数据从 R 发送到 ggobi，刷入 ggobi，然后访问在 R 中刷回的点。

TeachingDemos 包中的`TkBrush`函数将创建一个散点图矩阵并允许您刷点（将在每个面板中显示为刷点），并将返回有关刷点的信息。同一包中的`HTkIdentify`函数将显示当前悬停点的信息，这可以是多行信息，但不返回结果。

iplots 包是另一个选项，正如@MattBagg 所展示的那样。

可以创建一个工具来确定数据框的哪些行对应于选定的 ggplot2 图的部分，但是数据要经过这么多步骤（并且结果不容易访问/理解）回到原来的数据框就不简单了。

可能还有其他工具（可能是 R GUI），但以上内容应该可以帮助您入门。

# php - MYSQL 返回重复行

> ID：14441127
> 
> 赞同：1
> 
> 时间：2013-01-21T14:49:21.497
> 
> 标签：php, mysql, database

我在 MYSQL 中有一个数据库表，它看起来像这样：

```
Project_ID  user_ID  name
11          1        fred
11          2        rick
11          1        fred 
```

我想获取表中的名称，但是当我显示它时，我得到了两次相同的名称，因为 user_ID`1`在表中出现了两次。我试图用`GROUP BY`and显示它`SUM`，但我不想这样做。如何让它不返回重复的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:50:38.643

利用[`DISTINCT`](http://dev.mysql.com/doc/refman/5.1/en/select.html)

```
 SELECT DISTINCT user_ID
       , verschil_ma 
    FROM project_uren 
   WHERE project_ID = 11
GROUP BY user_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:53:23.893

第 1 点是应该将用户分配到项目两次吗？

第 2 点 - 使用 DISTINCT 关键字仅返回唯一记录 - [http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)

```
SELECT DISTINCT user_ID
FROM TABLE
WHERE Project_id = 11 
```

这将返回你 1 和 2（你不会得到 1 两次）

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T14:51:13.943

```
$results = // query
$results = array_unique($results); 
```

# android - Viewpager 和 Sherlock 片段。如何在 FragmentActivity 的片段内部做一些事情？

> ID：14441137
> 
> 赞同：4
> 
> 时间：2013-01-21T14:50:01.727
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, fragmentpageradapter

我有一个父**SherlockFragmentActivity**类，其中包含**ViewPager**，里面有 4 个片段。
其中之一从**SherlockListFragment**扩展，我想通过单击它的选项卡将其滚动到顶部。

**MainActivity**类：

```
public class MainActivity extends SherlockFragmentActivity  {

ViewPager viewPager;
TabAdapter tabAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(Constants.THEME);

    viewPager = new ViewPager(this);
    viewPager.setId(R.id.pager);
    viewPager.setBackgroundResource(R.color.background_color);

    tabAdapter = new TabAdapter(this,viewPager);

    super.onCreate(savedInstanceState);
    setContentView(viewPager);

    // Action bar setup
    setupTabs(savedInstanceState);
}

private void setupTabs(Bundle savedInstanceState) {
    final ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    for (int i = 1; i <= 4; i++) {
        ActionBar.Tab tab = getSupportActionBar().newTab();
        switch (i) {
            case 1:
                tab.setText(R.string.feed).setTabListener(tabAdapter);
                tabAdapter.addTab(EventListFragment.class);
                break;
            case 2:
                tab.setText(R.string.downloads).setTabListener(tabAdapter);
                tabAdapter.addTab(LocalEventListFragment.class);
                break;
            case 3:
                tab.setText(R.string.tags).setTabListener(tabAdapter);
                tabAdapter.addTab(TagsFragment.class);
                break;
            case 4:
                tab.setText(R.string.settings).setTabListener(tabAdapter);
                tabAdapter.addTab(SettingsFragment.class);
                break;
        }
        getSupportActionBar().addTab(tab);
    }
} 
```

**TabAdapter**类：

```
public static class TabAdapter extends FragmentPagerAdapter implements ViewPager.OnPageChangeListener, ActionBar.TabListener {

    private final Context mContext;
    private final ArrayList<Class<?>> classes = new ArrayList<Class<?>>();
    private final ArrayList<Fragment> mFragments = new ArrayList<Fragment>();
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;

    public TabAdapter(SherlockFragmentActivity activity, ViewPager pager){
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(Class<?> clss){
        classes.add(clss);
        mFragments.add(Fragment.instantiate(mContext, clss.getName(),
                null));
    }

    @Override
    public Fragment getItem(int i) {
        return mFragments.get(i);
    }

    public int getId(int index){
        return mFragments.get(index).getId();
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        // fixed double call onTabReselected
        if (mActionBar.getSelectedNavigationIndex() != position)
            mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int i) {
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
        final int position = tab.getPosition();
        final Fragment fragment =  mFragments.get(position);
        if (fragment != null) {
            switch (position) {
                case 0:
                    // call tab's ListFragment scroll to top item
                    ((EventListFragment) fragment).scrollToTop();
                    break;
                case 1:
                    // do something
                    break;
        }
    }
} 
```

**onTabReselected**被调用，然后用户按下当前选项卡，所以我尝试进行**EventListFragment**滚动：

**EventListFragment**类：

```
public class EventListFragment extends SherlockListFragment {

    @Override
    public void onCreate(Bundle state) {
        super.onCreate(state);
        mAdapter = new EventListAdapter(getSherlockActivity());
        setListAdapter(mAdapter);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);
    }

   @Override
   public final View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View eventListLayout = inflater.inflate(R.layout.eventlist_fragment,null);
        ListView lv = (ListView) eventListLayout.findViewById(android.R.id.list);
        ViewGroup parent = (ViewGroup) lv.getParent();
        //Remove ListView and add PullToRefreshListView in its place
        int lvIndex = parent.indexOfChild(lv);
        parent.removeViewAt(lvIndex);
        mPullToRefreshListView = onCreatePullToRefreshListView(inflater, savedInstanceState);
        parent.addView(mPullToRefreshListView, lvIndex, lv.getLayoutParams());
        return eventListLayout;
   }

   public void scrollToTop() {
      if (getSherlockActivity() != null) {  // null after screen rotation
        final ListView listView =  getListView();
        listView.post(new Runnable(){
        public void run() {
            listView.smoothScrollToPosition(0);
        }});
      }
   } 
```

它适用于应用程序启动，但屏幕旋转后**scrollToTop - getSherlockActivity()**返回**null**。
如果删除此条件检查，则会出现异常：

> java.lang.IllegalStateException：尚未在 android.support.v4.app.ListFragment.getListView(ListFragment.java:222) 的 android.support.v4.app.ListFragment.ensureList(ListFragment.java:328) 创建内容视图com.project.fragment.EventListFragment.scrollToTop(EventListFragment.java:337) 在 com.project.MainActivity$TabAdapter.onTabReselected(MainActivity.java:411) 在 com.actionbarsherlock.internal.app.ActionBarWrapper$TabWrapper.onTabReselected(ActionBarWrapper.爪哇：327）

我还没有完全了解 ViewPager 及其 FragmentPagerAdapter 的工作原理。所以找不到问题，就出现了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:03:29.000

**使用这个 FragmentPageAdapter：**

```
public class TestFragmentAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
    protected static final String[] CONTENT = new String[] { "CATEGORIAS", "PRINCIPAL", "AS MELHORES", };
    protected static final int[] ICONS = new int[] {
            R.drawable.perm_group_calendar,
            R.drawable.perm_group_camera,
            R.drawable.perm_group_device_alarms,
    };

    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {Fragment f = null;
    switch(position){
    case 0:
    {
    f = new ArrayListFragment();//YourFragment
    // set arguments here, if required
    Bundle args = new Bundle();
    f.setArguments(args);
    break;
    }
    case 1:
    {
        f = new HomeFragment();//YourFragment
        // set arguments here, if required
        Bundle args = new Bundle();
        f.setArguments(args);
        break;
    }
    case 2:
    {   
        f = new EndlessCustomView();//YourFragment
        // set arguments here, if required
        Bundle args = new Bundle();
        f.setArguments(args);
        break;
    }   
    default:
      throw new IllegalArgumentException("not this many fragments: " + position);
    }

    return f;
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
      return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }

    @Override
    public int getIconResId(int index) {
      return ICONS[index % ICONS.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }
} 
```

**本次活动：**

```
public class BaseSampleActivity extends SlidingFragmentActivity {
    private static final Random RANDOM = new Random();

    TestFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;
    protected ListFragment mFrag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.themed_titles);

                getSupportActionBar().setDisplayHomeAsUpEnabled(true);

                mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

                mPager = (ViewPager)findViewById(R.id.pager);
                mPager.setAdapter(mAdapter);
                mPager.setCurrentItem(1);
                mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
                mIndicator.setViewPager(mPager);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:44:57.187

根据[这篇文章](https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state)应用的解决方案：

**MainActivity**类：

```
//...
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    FragmentManager manager = getSupportFragmentManager();
    for (int i = 0; i < tabAdapter.getClasses().size(); i++) {
        String className = tabAdapter.getClasses().get(i).getName();
        if (manager.findFragmentByTag(className) != null) {
            manager.putFragment(outState, className, manager.findFragmentByTag(className));
        }
    }
}
//... 
```

**TabAdapter**类：

```
//...
public void addTab(Class<?> clss, FragmentManager manager, Bundle savedInstanceState) {
        classes.add(clss);
        String className = clss.getName();
        tags.add(className);
        Fragment fragment;

        if (savedInstanceState != null) {
            fragment = manager.getFragment(savedInstanceState, className);
            if (fragment == null) {
                fragment = createFragment(className);
                manager.beginTransaction().add(fragment, className);
            }
        } else {
            fragment = createFragment(className);
            manager.beginTransaction().add(fragment, className);
        }
        mFragments.add(fragment);
    }
//... 
```

其中**createFragment**是一个简单的方法，它通过传递的类名创建所需的片段。

# matlab - 通过 cuFFT 在逆 FFT 中进行缩放

> ID：14441142
> 
> 赞同：5
> 
> 时间：2013-01-21T14:50:06.547
> 
> 标签：matlab, cuda, fft, scaling, cufft

每当我使用 cuFFT 绘制程序获得的值并将结果与​​ Matlab 的结果进行比较时，我都会得到相同形状的图形，并且最大值和最小值的值在相同的点上。但是，由 cuFFT 得出的值远大于由 Matlab 得出的值。Matlab代码是

```
fs = 1000;                              % sample freq
D = [0:1:4]';                           % pulse delay times
t = 0 : 1/fs : 4000/fs;                 % signal evaluation time
w = 0.5;                                % width of each pulse
yp = pulstran(t,D,'rectpuls',w);
filt = conj(fliplr(yp));
xx = fft(yp,1024).*fft(filt,1024);
xx = (abs(ifft(xx))); 
```

具有相同输入的 CUDA 代码如下：

```
cufftExecC2C(plan, (cufftComplex *)d_signal, (cufftComplex *)d_signal, CUFFT_FORWARD);
cufftExecC2C(plan, (cufftComplex *)d_filter_signal, (cufftComplex *)d_filter_signal,     CUFFT_FORWARD);
ComplexPointwiseMul<<<blocksPerGrid, threadsPerBlock>>>(d_signal, d_filter_signal, NX);
cufftExecC2C(plan, (cufftComplex *)d_signal, (cufftComplex *)d_signal, CUFFT_INVERSE); 
```

cuFFT 还执行`1024`批量大小为 的点 FFT `2`。

使用 的比例因子时`NX=1024`，值不正确。请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-29T16:40:24.980

这是从未回答列表中删除此问题的较晚答案。

您没有提供足够的信息来诊断您的问题，因为您没有指定设置 cuFFT 计划的方式。您甚至没有指定 Matlab 和 cuFFT 信号的形状是否*完全相同*（因此您只有一个缩放比例），或者您是否具有*大致*相同的形状。但是，让我提出以下两个意见：

1.  `yp`向量有元素`4000`；与它相反，您通过将信号截断为元素`fft(yp,1024)`来执行 FFT ；`1024`
2.  逆 cuFFT 不按向量元素的数量进行缩放。

为了方便起见（它可能对其他用户有用），我在下面报告一个简单的 FFT-IFFT 方案，其中还包括使用 CUDA Thrust 库执行的缩放。

```
#include <cufft.h>
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>

/*********************/
/* SCALE BY CONSTANT */
/*********************/
class Scale_by_constant
{
    private:
        float c_;

    public:
        Scale_by_constant(float c) { c_ = c; };

        __host__ __device__ float2 operator()(float2 &a) const
        {
            float2 output;

            output.x = a.x / c_;
            output.y = a.y / c_;

            return output;
        }

};

int main(void){

    const int N=4;

    // --- Setting up input device vector    
    thrust::device_vector<float2> d_vec(N,make_cuComplex(1.f,2.f));

    cufftHandle plan;
    cufftPlan1d(&plan, N, CUFFT_C2C, 1);

    // --- Perform in-place direct Fourier transform
    cufftExecC2C(plan, thrust::raw_pointer_cast(d_vec.data()),thrust::raw_pointer_cast(d_vec.data()), CUFFT_FORWARD);

    // --- Perform in-place inverse Fourier transform
    cufftExecC2C(plan, thrust::raw_pointer_cast(d_vec.data()),thrust::raw_pointer_cast(d_vec.data()), CUFFT_INVERSE);

    thrust::transform(d_vec.begin(), d_vec.end(), d_vec.begin(), Scale_by_constant((float)(N)));

    // --- Setting up output host vector    
    thrust::host_vector<float2> h_vec(d_vec);

    for (int i=0; i<N; i++) printf("Element #%i; Real part = %f; Imaginary part: %f\n",i,h_vec[i].x,h_vec[i].y);

    getchar();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-07T21:37:09.733

`cufftExecC2C`随着 cuFFT 回调功能的引入，通过将归一化操作定义为函数，可以将 cuFFT 执行的逆 FFT 所需的归一化直接嵌入到调用中`__device__`。

除了 cuFFT 用户指南，有关 cuFFT 回调功能，请参阅

[CUDA Pro 提示：使用 cuFFT 回调进行自定义数据处理](http://devblogs.nvidia.com/parallelforall/cuda-pro-tip-use-cufft-callbacks-custom-data-processing/)

下面是通过 cuFFT 回调实现 IFFT 标准化的示例。

```
 #include <stdio.h>
    #include <assert.h>

    #include "cuda_runtime.h"
    #include "device_launch_parameters.h"

    #include <cufft.h>
    #include <cufftXt.h>

    /********************/
    /* CUDA ERROR CHECK */
    /********************/
    #define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
    inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
    {
        if (code != cudaSuccess)
        {
            fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
            if (abort) exit(code);
        }
    }

    /*********************/
    /* CUFFT ERROR CHECK */
    /*********************/
    // See http://stackoverflow.com/questions/16267149/cufft-error-handling
    #ifdef _CUFFT_H_
    static const char *_cudaGetErrorEnum(cufftResult error)
    {
        switch (error)
        {
            case CUFFT_SUCCESS:
                return "CUFFT_SUCCESS";

            case CUFFT_INVALID_PLAN:
                return "CUFFT_INVALID_PLAN";

            case CUFFT_ALLOC_FAILED:
                return "CUFFT_ALLOC_FAILED";

            case CUFFT_INVALID_TYPE:
                 return "CUFFT_INVALID_TYPE";

            case CUFFT_INVALID_VALUE:
                return "CUFFT_INVALID_VALUE";

            case CUFFT_INTERNAL_ERROR:
                return "CUFFT_INTERNAL_ERROR";

            case CUFFT_EXEC_FAILED:
                return "CUFFT_EXEC_FAILED";

            case CUFFT_SETUP_FAILED:
                return "CUFFT_SETUP_FAILED";

            case CUFFT_INVALID_SIZE:
                return "CUFFT_INVALID_SIZE";

            case CUFFT_UNALIGNED_DATA:
                return "CUFFT_UNALIGNED_DATA";
        }

        return "<unknown>";
    }
    #endif

    #define cufftSafeCall(err)      __cufftSafeCall(err, __FILE__, __LINE__)
    inline void __cufftSafeCall(cufftResult err, const char *file, const int line)
    {
        if( CUFFT_SUCCESS != err) {
        fprintf(stderr, "CUFFT error in file '%s', line %d\n %s\nerror %d: %s\nterminating!\n",__FILE__, __LINE__,err, \
                                _cudaGetErrorEnum(err)); \
        cudaDeviceReset(); assert(0); \
        }
    }

    __device__ void IFFT_Scaling(void *dataOut, size_t offset, cufftComplex element, void *callerInfo, void *sharedPtr) {

        float *scaling_factor = (float*)callerInfo;

        float2 output;
        output.x = cuCrealf(element);
        output.y = cuCimagf(element);

        output.x = output.x / scaling_factor[0];
        output.y = output.y / scaling_factor[0];

        ((float2*)dataOut)[offset] = output;
}

    __device__ cufftCallbackStoreC d_storeCallbackPtr = IFFT_Scaling;

    /********/
    /* MAIN */
    /********/
    int main() {

        const int N = 16;

        cufftHandle plan;

        float2 *h_input             = (float2*)malloc(N*sizeof(float2));
        float2 *h_output1           = (float2*)malloc(N*sizeof(float2));
        float2 *h_output2           = (float2*)malloc(N*sizeof(float2));

        float2 *d_input;            gpuErrchk(cudaMalloc((void**)&d_input, N*sizeof(float2)));
        float2 *d_output1;          gpuErrchk(cudaMalloc((void**)&d_output1, N*sizeof(float2)));
        float2 *d_output2;          gpuErrchk(cudaMalloc((void**)&d_output2, N*sizeof(float2)));

        float *h_scaling_factor     = (float*)malloc(sizeof(float));
        h_scaling_factor[0] = 16.0f;
        float *d_scaling_factor;    gpuErrchk(cudaMalloc((void**)&d_scaling_factor, sizeof(float)));
        gpuErrchk(cudaMemcpy(d_scaling_factor, h_scaling_factor, sizeof(float), cudaMemcpyHostToDevice));

        for (int i=0; i<N; i++) {
            h_input[i].x = 1.0f;
            h_input[i].y = 0.f;
        }

        gpuErrchk(cudaMemcpy(d_input, h_input, N*sizeof(float2), cudaMemcpyHostToDevice));

        cufftSafeCall(cufftPlan1d(&plan, N, CUFFT_C2C, 1));

        cufftSafeCall(cufftExecC2C(plan, d_input, d_output1, CUFFT_FORWARD));
        gpuErrchk(cudaMemcpy(h_output1, d_output1, N*sizeof(float2), cudaMemcpyDeviceToHost));
        for (int i=0; i<N; i++) printf("Direct transform - %d - (%f, %f)\n", i, h_output1[i].x, h_output1[i].y);

        cufftCallbackStoreC h_storeCallbackPtr;
        gpuErrchk(cudaMemcpyFromSymbol(&h_storeCallbackPtr, d_storeCallbackPtr, sizeof(h_storeCallbackPtr)));

        cufftSafeCall(cufftXtSetCallback(plan, (void **)&h_storeCallbackPtr, CUFFT_CB_ST_COMPLEX, (void **)&d_scaling_factor));

        cufftSafeCall(cufftExecC2C(plan, d_output1, d_output2, CUFFT_INVERSE));
        gpuErrchk(cudaMemcpy(h_output2, d_output2, N*sizeof(float2), cudaMemcpyDeviceToHost));
        for (int i=0; i<N; i++) printf("Inverse transform - %d - (%f, %f)\n", i, h_output2[i].x, h_output2[i].y);

        cufftSafeCall(cufftDestroy(plan));

        gpuErrchk(cudaFree(d_input));
        gpuErrchk(cudaFree(d_output1));
        gpuErrchk(cudaFree(d_output2));

        return 0;
    } 
```

**编辑**

执行回调操作的“时刻”`CUFFT_CB_ST_COMPLEX`在对 的调用中指定`cufftXtSetCallback`。请注意，您可以使用相同的 cuFFT 计划加载和存储回调。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-05T16:10:04.433

**表现**

对于 IFFT 缩放的这种特殊情况，我正在添加一个进一步的答案，以将回调性能与相同代码的非回调版本进行比较。我正在使用的代码是

```
#include <stdio.h>
#include <assert.h>

#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <cufft.h>
#include <cufftXt.h>

#include <thrust/device_vector.h>

#include "Utilities.cuh"
#include "TimingGPU.cuh"

//#define DISPLAY

/*******************************/
/* THRUST FUNCTOR IFFT SCALING */
/*******************************/
class Scale_by_constant
{
    private:
        float c_;

    public:
        Scale_by_constant(float c) { c_ = c; };

        __host__ __device__ float2 operator()(float2 &a) const
        {
            float2 output;

            output.x = a.x / c_;
            output.y = a.y / c_;

            return output;
        }

};

/**********************************/
/* IFFT SCALING CALLBACK FUNCTION */
/**********************************/
__device__ void IFFT_Scaling(void *dataOut, size_t offset, cufftComplex element, void *callerInfo, void *sharedPtr) {

    float *scaling_factor = (float*)callerInfo;

    float2 output;
    output.x = cuCrealf(element);
    output.y = cuCimagf(element);

    output.x = output.x / scaling_factor[0];
    output.y = output.y / scaling_factor[0];

    ((float2*)dataOut)[offset] = output;
}

__device__ cufftCallbackStoreC d_storeCallbackPtr = IFFT_Scaling;

/********/
/* MAIN */
/********/
int main() {

    const int N = 100000000;

    cufftHandle plan;           cufftSafeCall(cufftPlan1d(&plan, N, CUFFT_C2C, 1));

    TimingGPU timerGPU;

    float2 *h_input             = (float2*)malloc(N*sizeof(float2));
    float2 *h_output1           = (float2*)malloc(N*sizeof(float2));
    float2 *h_output2           = (float2*)malloc(N*sizeof(float2));

    float2 *d_input;            gpuErrchk(cudaMalloc((void**)&d_input, N*sizeof(float2)));
    float2 *d_output1;          gpuErrchk(cudaMalloc((void**)&d_output1, N*sizeof(float2)));
    float2 *d_output2;          gpuErrchk(cudaMalloc((void**)&d_output2, N*sizeof(float2)));

    // --- Callback function parameters
    float *h_scaling_factor     = (float*)malloc(sizeof(float));
    h_scaling_factor[0] = 16.0f;
    float *d_scaling_factor;    gpuErrchk(cudaMalloc((void**)&d_scaling_factor, sizeof(float)));
    gpuErrchk(cudaMemcpy(d_scaling_factor, h_scaling_factor, sizeof(float), cudaMemcpyHostToDevice));

    // --- Initializing the input on the host and moving it to the device
    for (int i = 0; i < N; i++) {
        h_input[i].x = 1.0f;
        h_input[i].y = 0.f;
    }
    gpuErrchk(cudaMemcpy(d_input, h_input, N * sizeof(float2), cudaMemcpyHostToDevice));

    // --- Execute direct FFT on the device and move the results to the host
    cufftSafeCall(cufftExecC2C(plan, d_input, d_output1, CUFFT_FORWARD));
#ifdef DISPLAY
    gpuErrchk(cudaMemcpy(h_output1, d_output1, N * sizeof(float2), cudaMemcpyDeviceToHost));
    for (int i=0; i<N; i++) printf("Direct transform - %d - (%f, %f)\n", i, h_output1[i].x, h_output1[i].y);
#endif

    // --- Execute inverse FFT with subsequent scaling on the device and move the results to the host
    timerGPU.StartCounter();
    cufftSafeCall(cufftExecC2C(plan, d_output1, d_output2, CUFFT_INVERSE));
    thrust::transform(thrust::device_pointer_cast(d_output2), thrust::device_pointer_cast(d_output2) + N, thrust::device_pointer_cast(d_output2), Scale_by_constant((float)(N)));
#ifdef DISPLAY
    gpuErrchk(cudaMemcpy(h_output2, d_output2, N * sizeof(float2), cudaMemcpyDeviceToHost));
    for (int i=0; i<N; i++) printf("Inverse transform - %d - (%f, %f)\n", i, h_output2[i].x, h_output2[i].y);
#endif
    printf("Timing NO callback %f\n", timerGPU.GetCounter());

    // --- Setup store callback
//    timerGPU.StartCounter();
    cufftCallbackStoreC h_storeCallbackPtr;
    gpuErrchk(cudaMemcpyFromSymbol(&h_storeCallbackPtr, d_storeCallbackPtr, sizeof(h_storeCallbackPtr)));
    cufftSafeCall(cufftXtSetCallback(plan, (void **)&h_storeCallbackPtr, CUFFT_CB_ST_COMPLEX, (void **)&d_scaling_factor));

    // --- Execute inverse callback FFT on the device and move the results to the host
    timerGPU.StartCounter();
    cufftSafeCall(cufftExecC2C(plan, d_output1, d_output2, CUFFT_INVERSE));
#ifdef DISPLAY
    gpuErrchk(cudaMemcpy(h_output2, d_output2, N * sizeof(float2), cudaMemcpyDeviceToHost));
    for (int i=0; i<N; i++) printf("Inverse transform - %d - (%f, %f)\n", i, h_output2[i].x, h_output2[i].y);
#endif
    printf("Timing callback %f\n", timerGPU.GetCounter());

    cufftSafeCall(cufftDestroy(plan));

    gpuErrchk(cudaFree(d_input));
    gpuErrchk(cudaFree(d_output1));
    gpuErrchk(cudaFree(d_output2));

    return 0;
} 
```

对于如此大的一维阵列和简单的处理（缩放），Kepler K20c 上的时序如下

```
Non-callback 69.029762 ms
Callback     65.868607 ms 
```

所以，并没有太大的改善。我希望看到的改进是由于在非回调情况下避免了单独的内核调用。对于较小的一维数组，要么没有改进，要么非回调情况运行得更快。

# sql - Oracle SQL - 重复行和更新表中的列

> ID：14441144
> 
> 赞同：1
> 
> 时间：2013-01-21T14:50:14.893
> 
> 标签：sql, oracle

我有一个 oracle SQL 表，我想复制它的行，同时增加每行的 id 并更改 2 列的值。所以伪代码会是这样的：

```
for each row r in TABLE t
  new n = r
  n.id = r.id+1
  n.columnA = 12
  n.columnB = 13
  insert n into t 
```

有人可以展示我将如何在 Oracle SQL 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:53:25.313

```
insert into t(id, columnA, columnB)
select id + 1, 12, 13 from t; 
```

# iphone - TTStyledText 不显示具有“<”字符的字符串

> ID：14441146
> 
> 赞同：1
> 
> 时间：2013-01-21T14:50:17.780
> 
> 标签：iphone, objective-c, three20, ttstyledtextlabel

我正在使用 TTStyledText 在我的 tableView 上显示文本。我遇到了一个问题，如果我的 TTStyledText 文本包含“<”字符，那么我的完整文本将变为空。

```
TTStyledText *text = [TTStyledText textFromXHTML:@"3<5" lineBreaks:YES URLs:YES];

[tnc setText:text];

NSLog(@"tnc - %@ & Text is - %@", tnc, tnc.text); 
```

tnc 属于`TTStyledTextLabel`.

日志将对象但文本显示为`(null)`.

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:06:03.790

使用`@"3&#x3C;5"`代替`@"3<5"`

这是一个特殊实体 ，`<`因此您应该使用此处定义的 html`<`代码[**。**](http://htmlhelp.com/reference/html40/entities/special.html)`&#x3C;``&lt;``&#60;`[](http://htmlhelp.com/reference/html40/entities/special.html)

# javascript - JqPlot 荧光笔错位在条形图上

> ID：14441147
> 
> 赞同：2
> 
> 时间：2013-01-21T14:50:18.683
> 
> 标签：javascript, jqplot, bar-chart

正如您从图片中看到的，当我将鼠标悬停在一个栏上时，突出显示的工具提示和点会显示在中间的栏上。我只是想知道是否有人有这个问题，以及是否有任何方法可以使工具提示显示在鼠标或悬停的栏上。

我在 highlighter.js 中尝试了一种解决方法，我在其中跟踪了鼠标位置。这仅适用于工具提示。彩色点仍然错位。

![条形图高亮问题](../Images/a2c85a15234e0a01fd27ab50103f3345.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:51:09.907

此问题由 Bruno Harbulot 在 jqPlot 源代码存储库的问题部分报告并解决：[https](https://bitbucket.org/cleonello/jqplot/issue/514/the-highlighter-point-is-always-on-the) ://bitbucket.org/cleonello/jqplot/issue/514/the-highlighter-point-is-always-on- . [_](https://bitbucket.org/cleonello/jqplot/issue/514/the-highlighter-point-is-always-on-the)

Bruno 的补丁尚未包含在 jqPlot 发行版中，因此您必须自己将其应用到您的 jqPlot 副本中。

# go - 即使提供了匹配的数据结构，也可以解组 json 错误

> ID：14441149
> 
> 赞同：2
> 
> 时间：2013-01-21T14:50:34.453
> 
> 标签：go, json, unmarshalling

我从 Google go 语言开始，我正在尝试编写一个简单的程序来从 Facebook 的图形 API 获取 Json 对象并解组它。

根据文档[http://golang.org/doc/articles/json_and_go.html](http://golang.org/doc/articles/json_and_go.html)，我应该提供一个匹配的数据结构，例如如果 json 对象是：

```
{
    Name: "Alice"
    Body: "Hello",
    Time: 1294706395881547000,
} 
```

数据结构将如下所示：

```
type Message struct {
    Name string
    Body string
    Time int64
} 
```

* * *

就我而言，我的 json 看起来像这样：

```
{
  "id": "350685531728",
   "name": "Facebook for Android",
   "description": "Keep up with friends, wherever you are.",
   "category": "Utilities",
   "subcategory": "Communication",
   "link": "http://www.facebook.com/apps/application.php?id=350685531728",
   "namespace": "fbandroid",
   "icon_url": "http://static.ak.fbcdn.net/rsrc.php/v2/yo/r/OKB7Z2hkREe.png",
   "logo_url": "http://photos-b.ak.fbcdn.net/photos-ak-snc7/v43/207/227200684078827/app_115_227200684078827_474764570.png",
   "company": "Facebook"
} 
```

所以我提供了一个匹配的数据结构：

```
type Graph struct {
    id string
    name string
    description string
    category string
    subcategory string
    link string
    namespace string
    icon_url string
    logo_url string
    company string
} 
```

* * *

这是代码：

```
package main

import "fmt"
import "net/http"
import "io/ioutil"
import "encoding/json"

type Graph struct {
    id string
    name string
    description string
    category string
    subcategory string
    link string
    namespace string
    icon_url string
    logo_url string
    company string
}

func main() {
    fmt.Println("Hello, playground")
    resp, err := http.Get("http://graph.facebook.com/android")

    if err != nil {
        fmt.Println("http.Get err: ",err)// handle error
    }

    defer resp.Body.Close()
    body, err := ioutil.ReadAll(resp.Body)  

    fmt.Println("resp.Body: ", resp.Body)   
    fmt.Println("body: ",string(body))
    fmt.Println("err: ",err)

    var g Graph
    err = json.Unmarshal(body, &g)
    if err == nil {
        fmt.Println("graph: ", g)
    } else {
        fmt.Println("graph error: ",err) // <---error at this line
    }
} 
```

但我仍然收到以下错误：

```
graph error:  json: cannot unmarshal object key "id" into unexported field id of type main.Graph 
```

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T15:03:48.770

所有给定的字段都是小写的，因此未导出。为了解组到结构中，您需要使用[tags](http://godoc.org/reflect#StructTag)。

例如，在您的情况下，一个有效的结构是

```
type Graph struct {
    Id          string `json:"id"`
    Name        string `json:"name"`
    Description string `json:"description"`
    Category    string `json:"category"`
    Subcategory string `json:"subcategory"`
    Link        string `json:"link"`
    Namespace   string `json:"namespace"`
    Icon_url    string `json:"icon_url"`
    Logo_url    string `json:"logo_url"`
    Company     string `json:"company"`
} 
```

但是，由于 encoding/json 的行为方式，（没有链接，抱歉，我有点着急，）你可能完全不用标签也能过得去。只需确保您的字段名称已导出。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T14:52:40.050

该字段`id` *未*导出，因为它以小写字母开头。请参阅[导出的标识符](http://golang.org/ref/spec#Exported_identifiers)。

# android - android以编程方式重新加载布局资源

> ID：14441154
> 
> 赞同：0
> 
> 时间：2013-01-21T14:50:40.257
> 
> 标签：android, layout, orientation

我有一个应用程序，我在其中覆盖，`onConfigurationChanged`因为我不希望该活动被破坏和重建。它工作正常。

现在我希望布局的某个部分在方向改变时改变。我会定期对`layout-land`文件夹执行此操作，这会起作用，但现在不行了。即使我更改为横向布局，纵向布局也会保持不变，尽管它显然是重绘的，因为其中的项目会根据新的方向限制改变它们的位置。

我认为这是因为布局只是重绘，但资源没有从 res 文件夹中重新选择。

任何想法？（我不想使用`setLayoutResource`或类似的东西，我宁愿使用更通用的解决方案）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:13:10.343

Without `onConfigurationChanged` android redraw the scene by it's own (it `setLayouResource` according to the orientation).

When you write `onConfigurationChanged` you say to OS that you will handle all thing by hands and with `onConfigurationChanged` android only rotate the corresponding view. If you want to use layout from layout-land the only way is to call `setLayouResource` (or move views (change it's layout parameters) dynamically - but this way is not very good) and restore all of your data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T20:01:30.230

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.yourlayout);
} 
```

并提供两个版本的**yourlayout.xml** :`layout/yourlayout.xml`和`layout-land/yourlayout.xml`. 您可以添加更多 - 用于不同的尺寸等。

不要忘记设置`android:configChanges="orientation|screenSize"`，否则您的活动可能会重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:17:15.523

在 AndroidManifest 中插入参数： android:configChanges="orientation" 在活动上。

# javascript - Javascript在构造函数中调用原型函数

> ID：14441156
> 
> 赞同：35
> 
> 时间：2013-01-21T14:50:45.290
> 
> 标签：javascript, class, methods, prototype

当我试图在构造函数中调用原型函数时，我不断收到一个错误消息，说我的函数没有定义，我不知道它有什么问题。

这是我的代码：

```
function Renderer()
{
    initialiseWebGL();
    initialiseShader();
    initialiseBuffer();
}

Renderer.prototype.initialiseWebGL()
{
    //Do stuff.
};

Renderer.prototype.initialiseShader()
{
        //Do Shader's stuff
};

Renderer.prototype.initialiseBuffer()
{
        //Do Buffers
}; 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-21T14:52:00.277

你的语法是错误的。用这个：

```
function Renderer() {
    this.initialiseWebGL();
    this.initialiseShader();
    this.initialiseBuffer();
}

Renderer.prototype.initialiseWebGL = function () {
    //Do stuff.
};

Renderer.prototype.initialiseShader = function () {
        //Do Shader's stuff
};

Renderer.prototype.initialiseBuffer = function () {
        //Do Buffers
}; 
```

之后，您可以创建新对象并通过以下方式使用它：

```
var rendererInstance = new Renderer(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-21T15:03:33.253

您的代码有一些问题

1.`initialiseWebGl()` 将寻找在全局范围内声明的函数 -> 没有函数

*   你应该使用`this.initialiseWebGl()`来访问Objects Method
    *注：在这种情况下`this`指的是Instance`Renderer`*

2.您没有分配函数，`Renderer.prototype.initialiseWebGL()`而是尝试调用`Renderer`s 原型方法`initialiseWebGl`，这会给您一个错误，因为它没有定义

3.因为`{`它们被向下移动了一行，所以它们被解释为一个块->此代码被执行。
*如果你在你之后拥有它们，`()`你会得到一个语法错误*-> `Renderer.prototype.initialiseWebGL() {...`会导致`Uncaught SyntaxError: Unexpected token {`

这是一个评论的例子

```
function Renderer() {
    initialiseWebGL(); // I call the global declared function
    this.initialiseShader(); //I call the Prototypes function
    this.initialiseBuffer(); //Me too
}

Renderer.prototype.initialiseWebGL = function (){ //Here a function gets assigned to propertie of `Renderer`s `prototype` Object
    //Do stuff.
};

Renderer.prototype.initialiseShader = function (){
        console.log("Do Shader Stuff");
};

Renderer.prototype.initialiseBuffer = function (){
        console.log("Do initialise stuff");
};
 Renderer.prototype.initialiseBuffer() // I invoke the method above
{
 console.log("I'm a Block statement");
}; 

function initialiseWebGL () { //I'm the global declared function
  console.log("Global");
}

var ren1 = new Renderer();

/*"Do initialise stuff"  
"I'm a Block statement"  
"Global"  
"Do Shader Stuff"  
"Do initialise stuff"*/ 
```

正如您在控制台输出中看到的

这是一个[JSBin](http://jsbin.com/ogohic/1/edit)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T15:13:38.550

由于您的实例从原型对象继承（方法）*属性*，因此您需要将它们作为属性而不是普通变量来访问：

```
function Renderer() {
    this.initialiseWebGL();
    this.initialiseShader();
    this.initialiseBuffer();
} 
```

# c - 可以宏执行复合赋值吗

> ID：14441157
> 
> 赞同：0
> 
> 时间：2013-01-21T14:50:45.740
> 
> 标签：c

我读了关于宏的小[gnu在线文档](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html#Concatenation)，对这句话有点困惑：

> 也可以通过标记粘贴形成多字符运算符，例如 +=

所以我徘徊如果宏可以执行复合赋值，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:53:33.370

```
#define PASTE(a,b) a##b
int foo;
foo PASTE(+,=) 2; 
```

我唯一一次看到这*很有用*是在字节码解释器的内部循环中，它看起来像一个巨大的 case 语句，每个分支中都有非常重复的代码：

```
case OP_add: {
    if (sp < 2) goto underflow;
    double x = stack[--sp];
    stack[sp-1] += x;
} break; 
```

对每个支持的二元算术运算符重复此操作。通过标记粘贴功能，您可以从宏中生成它们：

```
#define ARITH_BINOP(name, oper) case OP_##name: { \
    if (sp < 2) goto underflow; \
    double x = stack[--sp]; \
    stack[sp-1] oper##= x; \
} break /* deliberate absence of semicolon */ 
```

然后，在开关中，你可以写

```
ARITH_BINOP(add, +);
ARITH_BINOP(sub, -);
ARITH_BINOP(mul, *);
/* etc */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:53:58.697

我认为，文档说明了以下情况：

```
#define COMPST(x, y) x ## y

int 
foo(int x)
{
  return x COMPST(+, =) 2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:54:37.737

当然，宏可以执行任何您可以在 C 代码中实现的功能：

```
#define INCREMENT(x) ((x) += 1)

main() {
   int n=42;
   INCREMENT(n);
} 
```

你读到的那句话意味着我怀疑你不感兴趣的另一件事......

# wpf - 带有绑定到命令的子项的 MenuItem。(MVVM)

> ID：14441159
> 
> 赞同：0
> 
> 时间：2013-01-21T14:50:49.877
> 
> 标签：wpf, mvvm, binding, command, menuitem

有这样的代码：

```
<MenuItem ItemSource="SOURCE">
   ..sub MenuItems
</MenuItem> 
```

如何创建允许将每个子项绑定到保存命令的正确模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:01:32.707

这就是我在一个项目中的做法：

在窗口定义中，我“定义”了命令工作区。

```
 <Window x:Class="WorkForce.Views.MainWindow"
    ...
    xmlns:commands="clr-namespace:WorkForce.Commands"
    ...
    > 
```

之后，我将它们连接到每个菜单项。

```
 <MenuItem Header="_File">
            <MenuItem Header="_New..." Command="commands:MainWindowCommands.NewFile"/>
            <MenuItem Header="_Open..."  Command="commands:MainWindowCommands.OpenFile"/>
            <MenuItem Header="_Save..."  Command="commands:MainWindowCommands.SaveFile"/>
        </MenuItem> 
```

我希望这就足够了

我看到你想动态添加它。请看这个：[WPF：如何在运行时向菜单添加新的菜单项？](https://stackoverflow.com/questions/291522/wpf-how-can-you-add-a-new-menuitem-to-a-menu-at-runtime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:34:31.657

像这样的东西：

```
<MenuItem ItemsSource="{Binding SubItems}">
  <MenuItem.ItemContainerStyle>
    <Style TargetType="MenuItem">
      <Setter Property="Command" Value="{Binding SaveCommand}"/>
    </Style>
  </MenuItem.ItemContainerStyle>
</MenuItem> 
```

# android - 在 Jake Wharton 的 ViewPagerIndicator 中支持 android:state_first="true"？

> ID：14441160
> 
> 赞同：1
> 
> 时间：2013-01-21T14:50:50.733
> 
> 标签：android, viewpagerindicator

我将自定义主题应用于使用 Jake Wharton 的伟大 ViewPagerIndicator 库的应用程序。不幸的是，该主题要求第一个和最后一个 Tab 指示器具有圆形外端。

**它应该是这样的：**

![应该是这样的](../Images/52e5dd657c6fe15b4be781fde4a317c5.png)

我想我可以使用`selector`像下面这样的特殊可绘制对象（简化）来实现这一点，但显然不支持 state_first、state_middle、state_last - 当我使用它们时背景只是空白，而它没关系（除了最外面的选项卡）时我不。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<!-- middle buttons -->
<item android:state_middle="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/groupbutton_normal" />
<item android:state_selected="true" android:state_pressed="true"  android:drawable="@drawable/groupbutton_pressed" />

<!-- first button -->
<item android:state_first="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/groupbutton_first_normal" />
<item android:state_first="true" android:state_selected="true"  android:state_pressed="true"  android:drawable="@drawable/groupbutton_first_pressed" />

<!-- lastbutton -->
<item android:state_last="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/groupbutton_first_normal" />
<item android:state_last="true" android:state_selected="true"  android:state_pressed="true"  android:drawable="@drawable/groupbutton_first_pressed" />

</selector> 
```

它在没有`middle, first, last`状态的情况下工作，看起来像这样：

**仅适用于这种外观：**

![在此处输入图像描述](../Images/8cd2ca536c6a4d60ec88dc9e691d5b7a.png)

我已经查看了代码，但选项卡只是 a 中的一堆`TabView`s （派生自`TextView`）`HorizontalScrollView`，我猜这不支持那些状态属性。

那么有没有人解决这个问题的实现或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T09:22:10.667

我遇到了同样的问题，我通过制作三个选择器来解决它，一个用于中间按钮，另一个用于第一个按钮，另一个用于最后一个按钮。然后我必须在布局文件中为每个按钮设置正确的选择器。

我知道这只是一种解决方法，并不能解决 android:state_first="true" 问题，但至少您的布局看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T20:03:01.303

通过在 Android 源代码中搜索，它似乎只在某些动画文件的文档中提及。并在 R 类中声明为资源/属性。时期。

我在 API 21、22 和 25 中进行了搜索。

所以是的，它看起来像“根本没有使用”。

**自己实现状态**

您可以扩展一个类并实现它。如果您已经在创建自己的视图，或者它是一个合适的解决方案。

在这种情况下：

```
enum class Position(val stateIds: IntArray) {
  FIRST(intArrayOf(android.R.attr.state_first)),
  MIDDLE(intArrayOf(android.R.attr.state_middle)),
  LAST(intArrayOf(android.R.attr.state_last))
}

class YourView {

var position: Position = Position.MIDDLE
  set(value) {
    field = value
    // tell Android state changed
    refreshDrawableState()
  }

// tell Android the current state: parent class state + position state
override fun onCreateDrawableState(extraSpace: Int): IntArray {
  return super.onCreateDrawableState(extraSpace + 1).also {
      // one small issue is this method gets called in parent's initialization
      // before this class's fields got initialized. So you can
      // use a nullable field and check for null here, maybe.
      // Which would work as "NONE" value.
      View.mergeDrawableStates(it, stateIds)
    }
} 
```

# jsf - JSF 2.0 @ViewScoped 丢失数据

> ID：14441163
> 
> 赞同：0
> 
> 时间：2013-01-21T14:51:04.710
> 
> 标签：jsf, jsf-2, richfaces, myfaces

主要情况是我有一个作为@RequestScoped 工作的@ViewScoped。

Atm，我有一个视图，其中包含一个带有 @RequestScoped bean 的项目列表。当我想更新其中一项时，我会导航到后面带有 @ViewScoped 的视图。

当我从这个视图发帖时，我回到列表视图，@ViewScoped 被销毁。到目前为止，一切都很好。

问题是，当我使用 @ViewScoped bean 更新视图时，所有 bean 的属性都是空的。它看起来像@RequestScoped。我也有一个每次都调用的@PostConstruct 方法，但它不应该。

在带有@ViewScoped 的视图中，我在所有代码中使用了以下标签：h:selectOneMenu、rich:fileUpload、a4j:repeat、a4j:ajax、h:commandLink。

我没有把完整的代码放在我所拥有的大表格上。

我不知道发生了什么，因为以前没有发生过。如果需要更多信息，请询问。

问候。

编辑：

当我执行一个发布帖子的方法时（它将项目的数据保存在数据库中），bean 拥有所有数据。但是当我想从中获取数据时，就是 bean 为空的时候。

例子：

```
<h:outputLabel value="#{locale.link}:" />
                <h:inputText value="#{newsBean.newsLink}"
                    disabled="#{not newsBean.editPage}" />
                <h:link value="#{newsBean.newsLink}" target="_blank"/> 
```

当我按下链接时，bean 是空的，所以我得到指向“新闻”项的空指针。

# titanium-mobile - 适用于 Android 应用程序的钛与红宝石

> ID：14441166
> 
> 赞同：2
> 
> 时间：2013-01-21T14:51:08.997
> 
> 标签：titanium-mobile

任何人都可以分享一个使用 Titanium 和 ruby​​ 开发 android 本机应用程序的简短示例或教程吗？

在钛 Appcelerator 中，我可以看到[http://docs.appcelerator.com/titanium/latest/#!/guide/Ruby_Development](http://docs.appcelerator.com/titanium/latest/#!/guide/Ruby_Development)。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:36:37.683

我相信这与Android开发无关。

看左边的树。“Ruby Development”在“Web development”（服务器端）下。

与移动开发相关的一切都在另一个项目下——“钛开发”。

不过，如果你对使用 Ruby 为 Android 进行开发感兴趣，可以看看这个问题： [Ruby 对 Android 开发实用吗？](https://stackoverflow.com/questions/5993998/ruby-practical-for-android-development)

# plsql - ORA-04091: 表名正在变异

> ID：14441167
> 
> 赞同：2
> 
> 时间：2013-01-21T14:51:09.597
> 
> 标签：plsql, triggers

将数据插入表 A 时出现 ORA-04091 错误。表 A 记录正在引用同一个表 1:N 中的其他记录。父记录具有 fk_id = null 并且子记录具有 fk 不为空。

```
create or replace trigger TRBI_A 
BEFORE INSERT ON A
for each row
BEGIN
  IF :new.fk_id IS NOT NULL then
     UPDATE A SET actualTS = CURRENT_TIMESTAMP WHERE id = :new.fk_id;
  END IF;
END; 
```

> ORA-04091: 表名发生变化，触发器/函数可能看不到它

该问题可能是由尝试修改或查询当前正在由触发触发器的语句修改的表的触发器引起的。有谁知道如何修改触发器以使其正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:07:35.730

您知道问题出在哪里，所以只需稍微阅读一下您的代码：您更新要放置触发器的同一张表。

我想在你的情况下你只需要 put `:NEW.actualTS:=current_timestamp`，而不使用 update 语句。

# ruby-on-rails - 使用 rspec 自定义 404 错误路由

> ID：14441185
> 
> 赞同：0
> 
> 时间：2013-01-21T14:51:57.237
> 
> 标签：ruby-on-rails, rspec, routing, http-status-code-404

只是偶然发现了这一点，并在编写问题时找到了答案——因为这是一个常见的用例，我想我会分享它。直到一分钟前，我遇到了以下问题：

我使用带有以下代码的错误控制器为我的 rails 应用程序设置了一个自定义 404 页面：

```
def index
    render "errors/index", status: 404
end 
```

每当访问不存在的路由时，我已将路由设置为呈现此 404 页面：

```
devise_for :users

get "errors/index", as: :error
get "*not_found", to: "errors#index" # this is the important line

root to: "welcome#index" 
```

事实上，它确实有效。但是，出于某种原因，我对此的规范不起作用：

```
it "renders 404 on unknown route" do
    get("/thisrouteiswrong").should route_to("errors#index")
end 
```

终端中生成的输出为：

```
The recognized options <{"controller"=>"errors", "action"=>"index", "not_found"=>"thisrouteiswrong"}> did not match <{"controller"=>"errors", "action"=>"index"}>, difference: <{"not_found"=>"thisrouteiswrong"}>.
   <{"controller"=>"errors", "action"=>"index"}> expected but was
   <{"controller"=>"errors", "action"=>"index", "not_found"=>"thisrouteiswrong"}>. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:51:57.237

正如终端的错误所示，该请求还有一个`not_found`通过路由设置的调用参数。我所要做的就是将该参数传递给测试，如下所示：

```
it "renders 404 on unknown route" do
    get("/thisrouteiswrong").should route_to("errors#index", "not_found" => "thisrouteiswrong")
end 
```

# html - 尝试从 MySQL 加载问题和答案没有显示

> ID：14441188
> 
> 赞同：0
> 
> 时间：2013-01-21T14:51:59.997
> 
> 标签：html, mysql, arrays, for-loop, mysql-num-rows

在我的测验系统中，我实际上正在尝试制作问题页面，但是当我尝试在页面上显示问题行和答案行时，它什么也没显示。

```
<?php
    $q_qselect = mysql_query("SELECT * FROM `questions`");
    $q_qnumrows = mysql_num_rows($q_select);
    for($i=0;$i<$q_qnumrows;$i++){

        $q_qselect = mysql_query("SELECT * FROM `questions` WHERE `id`='$i'");
        $q_aselect = mysql_query("SELECT * FROM `answers` WHERE `question_id`='$i'");

        $q = mysql_fetch_assoc($q_qselect);
        $a = mysql_fetch_assoc($q_aselect);

        echo $q['question'] . "<br />";
        echo $a['answer'] . "<br />";
    }
?> 
```

还有一个问题——我如何才能真正检查他是否选择了正确的答案？（每个答案附近的单选按钮）当答案表中的字段是`correct`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:14:37.517

```
<?php
$question = mysql_query("SELECT questions.*, answers.* FROM questions inner join answers on questions.qid=answers.id");

   while($row = mysql_fetch_array($question)) {
   echo $row['question_column_name_in_DB'].'<br />' .$row['answer_column_name_in_DB'].'<br />';
}

?> 
```

将列名更改为适当的名称。一旦你得到这个工作，请查看 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:55:10.973

您可以尝试使用 As Like 以下......

```
<?php

  $query_result = mysql_query("SELECT questions.*, answers.* FROM questions LEFT JOIN answers on questions.id=answers.`question_id`");

  while($row = mysql_fetch_array($query_result)) {
    echo $row ['question'] . "<br />";
    echo $row ['answer'] . "<br />";
  }

?> 
```

# sql - Rails 3.2.11 中关于 has_one 关联的范围与顺序

> ID：14441190
> 
> 赞同：3
> 
> 时间：2013-01-21T14:52:08.380
> 
> 标签：sql, ruby-on-rails, postgresql

在我的 Rails 3.2.11 应用程序中，我有一个范围，我试图根据关联的属性对其进行排序。就我而言，我有一个 User 模型和一个 Profile 模型。用户 has_one 配置文件，我的范围位于配置文件表上的一个属性上。这是范围：

**在`User.rb`：**

```
def self.with_default_show
  joins(:profile).where("profiles.show_all = true")
end 
```

然而，我遇到的麻烦是试图对此声明秩序。例如，运行：

```
joins(:profile).where("profiles.show_all = true").order("profiles.first_name DESC") 
```

给我一个错误：

```
PG::Error: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list 
```

我知道我可以做到`.order("2")`，但这会调用我的用户表中的第二列，而不是我的配置文件表。如何正确将此范围的顺序设置为profiles.first_name？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:11:27.760

ORDER BY 子句只能在应用了 DISTINCT 之后应用。

此外，您必须明确选择您订购的子句。

```
User.select('profiles.*, profiles.first_name')
       .joins(:profile)
       .where("profiles.show_all = true")
       .order("profiles.first_name DESC") 
```

如上所示，为了让您的查询返回 Profile 属性，您还必须明确选择它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:29:02.953

最终起作用的是上述两个答案的组合：

```
def self.with_default_show
  joins(:profile)
  .where(profiles: {show_all: true})
  .select('users.*, profiles.first_name')
  .order('profiles.first_name')
end 
```

排序工作如我所愿。

# asp.net - 图像文件正被另一个进程使用

> ID：14441192
> 
> 赞同：4
> 
> 时间：2013-01-21T14:52:10.213
> 
> 标签：asp.net, file, c#-4.0, file-io

我想从文件夹中删除我的图像。但它会抛出“***它正在被另一个进程使用***”。

这是我的代码：

```
fuProductImage.SaveAs(fileFolderPathTemp + fuProductImage.FileName);

 Bitmap orgImage = new Bitmap(fileFolderPathTemp + fuProductImage.FileName);
 ResizeAndSaveImages(orgImage, fileFolderPathLarge, fuProductImage.FileName, 66, 66);

 File.Delete(fileFolderPathTemp + fuProductImage.FileName); 
```

我应该怎么做才能删除这个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:04:31.000

根据要求，我的建议是将第二行和第三行放入一个[`using`块](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)中，例如：

```
fuProductImage.SaveAs(fileFolderPathTemp + fuProductImage.FileName);

using ( Bitmap orgImage = 
        new Bitmap(fileFolderPathTemp + fuProductImage.FileName) )
{
    ResizeAndSaveImages(
        orgImage, 
        fileFolderPathLarge, 
        fuProductImage.FileName, 
        66, 
        66);
}

File.Delete(fileFolderPathTemp + fuProductImage.FileName); 
```

这应该有帮助的原因是`using`确保`orgImage`正确[处理](http://msdn.microsoft.com/en-us/library/8th8381z%28v=vs.100%29.aspx)，从而在调用函数之前释放内存并释放文件句柄`File.Delete()`。

# c++ - std::map 获取最低 n 个元素的时间

> ID：14441198
> 
> 赞同：0
> 
> 时间：2013-01-21T14:52:19.873
> 
> 标签：c++, map, stl, binary-tree

`std::map`正如我在文档中阅读的那样，应该使用二叉搜索树来实现，并且它也会对它们进行排序。

我需要快速插入并快速检索元素。我还需要不时获取第一个最低的 N 个元素。

我在考虑使用 a `std::map`，这是一个不错的选择吗？如果是，我需要多长时间才能检索到最低的 N 个元素？O(n*logn)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:58:34.737

您可以使用迭代器快速读取最低的 N 个元素。从`begin()`到第 N-1 个元素将花费 O(n) 时间（获取下一个元素是 a 的摊销常数时间`std::map`）。

`std::vector`但是，我要注意的是，根据您的确切要求，使用带有二分查找方法的排序来实现听起来像您正在执行的操作实际上通常更快，这可能值得研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:58:37.067

C++ 标准要求所有必需的迭代器操作（包括迭代器增量）均摊销常数时间。因此，获取容器中的前 N ​​个项目必须花费分摊`O(N)`时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T15:01:28.503

鉴于您需要检索和 n 最小，我会说`std::map`是合理的选择。但是根据确切的访问模式`std::vector`进行排序也可能是一个不错的选择。

我不确定您所说的检索是什么意思。读取*k*个元素的时间是 O( *k* ) （假设您使用迭代器按顺序执行），删除它们的时间是 O( *k* log *n* ) （*n*是元素的总数；即使您使用迭代器按顺序执行）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T14:57:52.120

我对这两个问题都说是。

# jquery - JQuery + setInterval + Ajax 调用

> ID：14441209
> 
> 赞同：2
> 
> 时间：2013-01-21T14:52:54.233
> 
> 标签：jquery, ajax, setinterval

我正在使用craftyslide jquery 插件[http://projects.craftedpixelz.co.uk/craftyslide/](http://projects.craftedpixelz.co.uk/craftyslide/)。该插件用于构建幻灯片。我的网站使用 ajax 来加载内容。在我的 /#home 中，我有两张幻灯片/图片。

我遇到的问题是这个插件使用了 setInterval() 函数。

```
// Auto mode
function auto() {
    setInterval(function () { 
    $slides.filter(":first-child").fadeOut(options.fadetime).next("li").fadeIn(options.fadetime).end().appendTo("#slideshow ul");

                $slides.each(function () {
                    if ($slides.is(":visible")) {
                        $(".caption").css("bottom", "-37px");
                        $(this).find(".caption").delay(300).animate({
                            bottom: 0
                        }, 300);
                    }
                });

            }, options.delay);
} 
```

当我在 /#home 中加载内容时，一切正常。但是，如果我通过 /#offers 之类的 ajax 调用加载另一个页面，然后我回到 /#home 页面，则转换开始失败。我得到的不是两个图像，而是它似乎检测到 4。如果我再次执行相同的过程，它将显示 6。

正如我所说，我认为这是因为 setInterval 函数。它仍在执行前一个调用的 setInterval + 新的。当我加载另一个页面时，有什么方法可以删除那个 setInterval() 吗？

提前致谢！

**附加信息：** 由于内容是使用 Ajax 加载的，因此在加载内容之前，我使用模板来加载页眉、页脚等。该模板在 HEAD 中加载这样的库：

```
<head>
<title>TITLE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="fragment" content="!"/>
<script type="text/javascript" src="/js/ext.js"></script>
<script type="text/javascript" src="/js/craftyslide.js"></script>
</head> 
```

当我执行 ajax 调用以加载#home 时，我正在使用一些 javascript 检索 HTML 文档。该 javascript 位于 HTML 代码的末尾。

```
<div id="slideshow">
    <ul>
        <li style="width:100%;">
            <img src="bg.jpg" height="400"/>
        </li >

        <li style="width:100%;">
            <img src="kk2_bg_optimized.jpg" height="400"/>
        </li>                         
    </ul>
</div>

<script type="text/javascript"> 
    $(document).ready(function(){ 
        // Load slide 
        $("#slideshow").craftyslide({
            'width': "100%", 
            'height': 400, 
            'pagination': false, 
            'fadetime': 500, 
            'delay': 3500
        });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:38:06.837

使用 clearInterval() 取消正在进行的 Interval

请参阅此链接以供参考

[在 JavaScript 中停止 setInterval 调用](https://stackoverflow.com/questions/109086/stop-setinterval-call-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:44:34.610

在我看来，您将其作为单页站点运行？如果这是真的，并且如果您的 AJAX 请求如您所展示的那样返回 HTML 和 JavaScript，那么您将在每次返回主页时继续复合您的 JavaScript。基本上，每次您返回主页时，都会启动另一个幻灯片实例。

CraftySlide 插件不会将其分配给`setInterval()`变量，因此您不能使用`clearInterval()`它来停止它。一旦通过它的 API 启动幻灯片，它也没有提供停止幻灯片的方法。因此，我会考虑使用全局变量来跟踪 CraftySlide 是否已启动。

```
<div id="slideshow">
    <ul>
        <li style="width:100%;">
            <img src="bg.jpg" height="400"/>
        </li >

        <li style="width:100%;">
            <img src="kk2_bg_optimized.jpg" height="400"/>
        </li>                         
    </ul> 
</div>

<script type="text/javascript"> 
    $(document).ready(function(){ 
        if(typeof(window.slideshowEnabled) == 'undefined' || window.slideshowEnabled == false){
            window.slideshowEnabled = true;

            // Load slideshow
            $("#slideshow").craftyslide({
                'width': "100%", 
                'height': 400, 
                'pagination': false, 
                'fadetime': 500, 
                'delay': 3500
            });
        } 
    }); 
</script> 
```

# objective-c - 如何为 NSComboBox 启用不区分大小写的自动完成功能？

> ID：14441211
> 
> 赞同：5
> 
> 时间：2013-01-21T14:53:09.023
> 
> 标签：objective-c, cocoa

我已将 NSComboBox 绑定到界面构建器中的数据源。当我在 NSComboBox 中键入内容时，我正确地获得了自动完成建议。

但是自动完成是区分大小写的，这意味着如果角色使用错误的大小写，我不会得到建议。

如何为绑定到界面生成器中的数据源的 NSComboBox 启用不区分大小写的自动完成功能？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:11:27.577

您应该`comboBox:completedString:`在您的 NSComboBox 数据源中实现，例如：

```
- (NSString *)comboBox:(NSComboBox *)comboBox completedString:(NSString *)partialString
{
    for (NSString dataString in dataSourceArray) {
        if ([[dataString commonPrefixWithString:partialString options:NSCaseInsensitiveSearch] length] == [commonPrefixWithString:partialString length]) {
            return testItem;
        }
    }
    return @"";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T06:52:18.490

你可以继承一个 NSComboBoxCell 并覆盖 [NSComboBoxCell completedString:]。

```
- (NSString *)completedString:(NSString *)string
{
    NSString *result = nil;

    if (string == nil)
        return result;

    for (NSString *item in self.objectValues) {
        NSString *truncatedString = [item substringToIndex:MIN(item.length, string.length)];
        if ([truncatedString caseInsensitiveCompare:string] == NSOrderedSame) {
            result = item;
            break;
        }
    }

    return result;
} 
```

# cakephp - CakePHP 在多个表中保存数据

> ID：14441213
> 
> 赞同：1
> 
> 时间：2013-01-21T14:53:17.403
> 
> 标签：cakephp

我有类似的商店结构

1：`Shop`有很多`Categories`

2：`Categories`有1对多`Sizes`和`Products`

3：每个都`product`属于一个`Category`

4：As`Sizes`属于，`Categories`所以每个`product`属于 a`category`将具有相同的大小。

**现在我的问题是在产品添加表单中。**

我已经形成了包含产品的输入字段和一个选择框来选择`Category`.

一旦我选择了一个类别，就会创建一个 Ajax 请求，它`sizes`作为分配给所选类别的输入框返回。输入框将用于输入产品每种尺寸的价格。（由于输入字段将在 Ajax 中生成，我如何使用表单助手？）

现在我希望点击保存按钮时，产品信息应该存储在产品表中，价格应该保存在

`Product_Prices`包含`product_id, size_id, price`列的表。

我应该如何命名我的输入框？我应该如何调用 save 方法以便正确保存信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:55:32.733

**保存一个尺寸**

```
//$this->Form->create('Product');
$this->Form->input('category_id'); 
```

**保存多尺寸**

```
//$this->Form->create('Shop');

$this->Form->input('category_id'); 
```

或使用复选框代替列表

```
$this->Form->input('category_id', array('multiple' => 'checkbox')); 
```

* * *

如果要将另一个模型的属性与主模型一起保存，请添加模型名称（别名）作为前缀并使用`saveAssociated()`or `saveAll()`。

```
echo $this->Form->input('ProductPrice.price'); 
```

见：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

# assembly - nasm 中的第 16 位和第 32 位

> ID：14441215
> 
> 赞同：3
> 
> 时间：2013-01-21T14:53:24.537
> 
> 标签：assembly, x86, nasm, disassembly

测试.asm：

```
org 0100h
[BITS 16]
mov eax, 0
[BITS 32]
mov eax, 0 
```

然后编译反汇编如下：

`nasm test.asm -o test.com`

`ndisasm -o 0x0100 test.com`

结果：

```
00000100  66B800000000      mov eax,0x0
00000106  B80000            mov ax,0x0
00000109  0000              add [bx+si],al 
```

所以从结果中，我们可以看到`[BITS 16]`use `eax`，`[BITS 32]`use `ax`，为什么？结果该不该翻？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T15:29:59.313

.com 文件基本上是代码（和数据）的二进制块。它没有关于其内部结构的任何高级信息。所以`ndisasm`无法判断它应该在 16 位还是 32 位模式下反汇编，它默认为 16 位。如您所见，这确实为“BITS 16”部分产生了正确的结果，但是以下代码已被组装为 32 位代码，但`ndisasm`仍将其反汇编为 16 位，因此是垃圾输出。如果您指定“-b 32”，您将看到*第二*部分被正确反汇编：

```
>ndisasm.exe -b 32 -o100h test.com
00000100  66B80000          mov ax,0x0
00000104  0000              add [eax],al
00000106  B800000000        mov eax,0x0 
```

简而言之，`ndisasm`做*你告诉它的事情*，而不是你*想要它做的事情*。由于 .com 格式，它无法判断给定的字节串是 16 位还是 32 位代码，甚至只是数据，因此您需要帮助它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T14:59:40.040

我的猜测是您需要关闭优化。

即使用 -o0 标志。

[自 2.0.9 版起默认开启优化](http://forum.osdev.org/viewtopic.php?f=13&t=23868)

奇怪的是，虽然我很惊讶它没有使用 XOR eax,eax 技巧将其设置为 0，因为它曾经更快。

# iphone - iOS：在循环期间等待按钮事件

> ID：14441222
> 
> 赞同：2
> 
> 时间：2013-01-21T14:53:51.523
> 
> 标签：iphone, ios, objective-c

我正在做一个小项目，我需要执行一个循环来提问，在循环期间我需要等待用户的回答，然后才能执行下一个操作。

你们中的任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:58:11.763

iPhone 的面向对象框架 Cocoa Touch 已经包含了您需要的循环。有一个名为[NSRunLoop](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html)的类可以完全满足您的要求：它等待来自用户界面的事件（除其他外），然后调用您的代码来处理这些事件。

所以不用担心自己构建这个循环。[Apple 有一个教程](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphone101/Articles/00_Introduction.html)展示了如何构建一个等待用户输入并基于该输入工作的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:59:40.027

您可以将所有按钮设置为禁用状态：

```
[myButton setUserInteractionEnabled:false]; 
```

循环完成后，只需将其设置回真实状态即可。这似乎是最简单的可能性。

# jsf - 如何提取用户名以在 JSF 的另一部分中使用

> ID：14441227
> 
> 赞同：0
> 
> 时间：2013-01-21T14:54:00.353
> 
> 标签：jsf

我有一个登录页面，用户在其中输入用户名和密码：

```
<form method="post" action="j_security_check">
                    <p>You need to log in to access protected information.</p>
                    <table>
                        <tr>
                            <td>User name:</td>
                            <td><input type="text" name="j_username" /></td>
                        </tr>
                        <tr>
                            <td>Password:</td>
                            <td><input type="password" name="j_password" /></td>
                        </tr>
                    </table>
                    <p><input type="submit" value="Login" /></p>
                </form> 
```

我现在要做的是使用已提交的用户名，我想用这个用户名自动填充一个输入文本框，但不知道该怎么做，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:56:23.183

当使用容器管理的身份验证（看起来是你的情况）时，用户名被存储在容器安全上下文中。Servlet 规范提供了一个 API，允许访问包含用户名的*用户主体*（的实例[`java.security.Principal`](http://docs.oracle.com/javase/6/docs/api/java/security/Principal.html)）。

因此，一旦用户登录，您就可以使用java 代码中的用户[`HttpServletRequest.getUserPrincipal()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal%28%29)名或用户名访问用户主体。[`HttpServletRequest.getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)或与[`FacesContext.getCurrentInstance().getExternalContext().getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRemoteUser%28%29)

要在 JSP/JSF 文件上使用它，您可以使用表达式语言以这种方式访问​​它：`#{request.remoteUser}`如：

```
<h:inputText id="username" value="#{request.remoteUser}" /> 
```

**加法**：

您的用户支持 bean：

```
public class User implements Serializable {

   private String name;

   // other user attributes here

   public String getName() {
      return name;
   }

} 
```

添加 JSF 过滤器：

```
public class SetupUserFilter implements Filter {

   public void init(FilterConfig config) { }

   public void destroy() { }

   public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
      HttpServletRequest request = (HttpServletRequest) req;
      HttpSession session = request.getSession(false);
      if (session != null) {
         User user = session.getAttribute("user");
         if (user == null && request.getUserPrincipal() != null) {
            // This means user has just logged in.            
            String username = request.getRemoteUser();
            User user = ... // load the User instance from the database using the username
            session.setAttribute("user", user);
         }
      }

      chain.doFilter(req, res);
   }

} 
```

在你的配置你的过滤器`web.xml`：

```
<filter>
  <filter-name>SetupUserFilter</filter-name>
  <filter-class>com.example.SetupUserFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>SetupUserFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后总是依赖`User`bean：

```
<h:inputText id="username" value="#{user.name}" /> 
```

**免责声明**：这只是一个示例，有点旧，因为它使用过滤器和其他方法也可能有效，但这种方法即使在非 JSF 环境中也有效。随意使用它，但要明白这不是获得所需内容的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:09:55.650

首先，您必须定义一个托管 bean 来存储用户的数据：

```
@Named
@SessionScoped
public class User implements Serializable {
   private String name;
   private String password;

   public String getName() {
      return name;
   }

   public String setName(String name) {
      this.name = name;
   }

   public String getPassword() {
      return password;
   }

   public String setPassword(String password) {
      this.password = password;
   }
} 
```

当然，您必须为您的密码实施某种加密，但这只是为了演示如何创建一个简单的 bean。

接下来，您的表单将使用 EL（表达式语言）将用户输入设置为相应 bean 的字段：

```
<h:form>
   <h3>Please enter your name and password.</h3>
   <table>
      <tr>
      <td>Name:</td>
      <td><h:inputText value="#{user.name}"/></td>
      </tr>
      <tr>
      <td>Password:</td>
      <td><h:inputSecret value="#{user.password}"/></td>
       </tr>
   </table>
   <p><h:commandButton value="Login" action="hello"/></p>
</h:form> 
```

最后，您可以在 hello.xhtml 页面上显示输入：

```
<h:head>
   <title>Welcome</title>
</h:head>
<h:body>
   <h3>Hello #{user.name}, your password is #{user.password}</h3>
</h:body> 
```

# json - 使用 jQuery 将数据发布到服务器 - 为什么使用 JSON？

> ID：14441228
> 
> 赞同：0
> 
> 时间：2013-01-21T14:54:08.520
> 
> 标签：json, jquery, urlencode

在整个网络上，我看到了使用 jQuery 将 JSON 编码数据的 AJAX POST 发送到服务器的示例。在 JSONfirst 中编码数据有什么意义？为什么不直接将其作为默认数据类型 application/x-www-url-form-encoded 发送，这样可以省去在服务器上解析 JSON 数据的麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:56:42.583

几个原因。第一，将 JavaScript 对象转换为 JSON 非常容易，但将其编码为 x-www-url-form-encoded 需要付出努力。此外，x-www-url-form-encoded 并没有真正使用那么多。除了需要表单的几种输入类型之外，现在大多数东西都使用 AJAX。此外，JSON 更容易调试，因为它清晰易读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:58:11.507

首先，您不必使用 json。如果您更喜欢使用任何其他格式，请使用它。

但请记住，这都是字符串。有时使用像 JSON 这样的格式是有意义的。如果您的表单是动态的，并且您输入了同一事物的多个实例（例如 name1、name2、name3....），会发生什么？用 JSON 迭代这些东西真的很容易。而且 JSON 解析器在所有平台上都很容易使用，所以在任何平台上使用它并不是一个障碍。另外，如果提交和响应都使用相同的格式，则请求和响应中的数据具有一致性的好处。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-21T15:06:15.063

JSON 是 JavaScript Object Notation 的缩写，是一种以有组织、易于访问的方式存储信息的方式。简而言之，它为我们提供了一个人类可读的数据集合，我们可以以一种非常合乎逻辑的方式访问这些数据。我们使用 JSON 编码来组织存储的信息。

**例子：**

```
var jason = {

"age" : "24",

"hometown" : "Missoula, MT",

"gender" : "male"

}; 
```

要访问存储在 json 中的信息，我们可以简单地引用我们需要的属性的名称。 **结果：**

```
document.write('Json is ' json.age); // Output: Jason is 24 
```

# java - 具有自定义属性的 Android 自定义视图按钮引用相同的对象

> ID：14441232
> 
> 赞同：0
> 
> 时间：2013-01-21T14:54:20.277
> 
> 标签：java, android, android-button, android-custom-view

我有一个`button`扩展的习惯`View`。在构造函数中，我设置了一个成员变量来保存 XML 定义中设置的自定义属性。目前在 XML 中定义了 5 个这样的按钮，每个按钮都附加了一个不同的 int 来表示一个阶段。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:custom="http://schemas.android.com/apk/res/com.mycompany.stagedApp"
android:layout_width="match_parent"
android:orientation="horizontal"
style="@style/stepFooter">

<com.mycompany.stagedApp.StepButtonView
    android:text="@string/step_one_icon"
    style="@style/numberedIcon"
    android:id="@+id/step_one_button"
    custom:stepNumber="1"
    android:background="@drawable/circle" />
<com.mycompany.stagedApp.StepButtonView
    android:text="@string/step_two_icon"
    style="@style/numberedIcon"
    android:id="@+id/step_two_button"
    custom:stepNumber="2"
    android:background="@drawable/circle" />
<com.mycompany.stagedApp.StepButtonView
    android:text="@string/step_three_icon"
    style="@style/numberedIcon"
    android:id="@+id/step_three_button"
    custom:stepNumber="3"
    android:background="@drawable/circle" />
<com.mycompany.stagedApp.StepButtonView
    android:text="@string/step_four_icon"
    style="@style/numberedIcon"
    android:id="@+id/step_four_button"
    custom:stepNumber="4"
    android:background="@drawable/circle" />
<com.mycompany.stagedApp.StepButtonView
    android:text="@string/step_five_icon"
    style="@style/numberedIcon"
    android:id="@+id/step_five_button"
    custom:stepNumber="5"
    android:background="@drawable/circle" />
</LinearLayout> 
```

在`StepButtonView.java`我有：

```
class StepButtonView extends View {

  private static int stepNumber;

  public StepButtonView(Context context, AttributeSet attrs) {
    super(context, attrs);

    TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.custom_values);
    stepNumber = ta.getInt(R.styleable.custom_values_stepNumber, 0);

    // This log correctly displays the numbers 1 - 5
    Log.d("StepFromCustom in constructor", String.format("%d",StepButtonView.stepNumber));

    this.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View view) {
            Log.d("Step", String.format("%d", view.getId()));
            // This log only displays the last number 5
            Log.d("StepFromCustom", String.format("%d",StepButtonView.stepNumber));
        }
    });
  }
} 
```

当`activity`开始并构建每个按钮时，将记录数字 1 -5。但是，单击时记录的数字始终是 5，最后一个`stepNumber`. 在`onClick listener`它列出了一个不同的 ID 值但相同`stepNumber`，所以我最初认为它指的是同一个对象一定是不正确的。

谁能解释发生了什么，以及为什么，因为我认为这是对我显然需要澄清的语言的误解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:07:25.950

那是因为你`stepNumber`是`static`. 这意味着它是一个类变量，因此它将保持 5，因为它是设置的最后一个值（你 last 的构造函数`Button`）。删除它将解决问题。

让我们运行应用程序：

*   第一个构造函数：`stepNumber`是 1。
*   第二个构造函数：`stepNumber`is 2。
*   第三个构造函数：`stepNumber`is 3。
*   第四个构造函数：`stepNumber`is 4。
*   第五个构造函数：`stepNumber`是5。

在此之后它不再设置，所以它将保持 5。所以：

*   之后的每一个`onClick`：`Log.d()`将输出 5

编辑：看到你的评论，你可能是指一个`final`属性，它不能被修改，只能在构造函数中设置。看到您已经在构造函数中设置了它，将它添加到您的属性中是非常好的，使其成为：

```
private final int stepNumber; 
```

Edit2：`static`成员属于类而不是特定实例。

这意味着即使您创建了一百万个该类的实例或者您不创建任何实例，也**只存在一个`static`字段的实例。**它将由所有实例共享。

# zend-framework2 - ZF2。我是否总是需要从操作中返回 ViewModel？

> ID：14441233
> 
> 赞同：2
> 
> 时间：2013-01-21T14:54:27.887
> 
> 标签：zend-framework2

就目前而言-我的每个操作都必须返回一些 ViewModel，例如：

```
$viewModel = new ViewModel();
return $viewModel; 
```

但是如果在某些情况下我只是像这样为布局的内容变量赋值怎么办：

```
$content = 'blah blah some content';
$this->layout()->setVariable('content', $content); 
```

所以 - AFAIk - 在这种情况下，我真的不需要返回 ViewModel - 对吧？- 因为布局的内容已经填充.. 但是 - 如果我不 - ZF2 自动注入一个，我收到一个关于不存在模板的错误.....关于如何避免返回 ViewModel 的任何 thiugths？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:36:45.500

你可以

```
return $this->getResponse(); 
```

这将导致不需要返回任何 file.phtml。

# c++ - 从 std::list 中删除/擦除

> ID：14441234
> 
> 赞同：1
> 
> 时间：2013-01-21T14:54:30.510
> 
> 标签：c++

> **可能重复：**
> [如何从 std::map 中过滤项目？](https://stackoverflow.com/questions/180516/how-to-filter-items-from-a-stdmap)
> [std::list::erase 不起作用](https://stackoverflow.com/questions/12666869/stdlisterase-not-working)

我对 std::list 中的删除、擦除有一些愚蠢的问题。

我有一个类定义为：

```
class CBase
{
public:
    CBase(int i): m(i)
    {};

    int m;
}; 
```

然后，我将其设置为：

```
list<CBase> ml;
CBase b1(1);
CBase b2(2);
CBase b3(3);
CBase b4(4);
ml.push_back(b1);
ml.push_back(b2);
ml.push_back(b3);
ml.push_back(b4); 
```

我可以删除具有 m==2 的项目；

```
for (list<CBase>::iterator it=ml.begin(); it!=ml.end(); ++it)
{
    if (it->m == 2)
    {
        ml.erase(it--);
    }
}
    // show what we have now:
for (list<CBase>::iterator it=ml.begin(); it!=ml.end(); it++)
{
    cout << it->m;
} 
```

但如果我这样做：

```
for (list<CBase>::iterator it=ml.begin(); it!=ml.end(); it++)
{
    if (it->m == 2)
    {
        ml.erase(it);
        it--;
    }
} 
```

会有例外。为什么是这样？

如果我想删除 b3，

ml.remove(b3);

不会编译。我在网上找到的所有例子都使用`list<int>`，调用没有问题`mylist.remove(3)`，如果`mylist is list<int>`。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:28:55.673

您正在取消引用指向已擦除元素的迭代器。使用[`erase()`](http://en.cppreference.com/w/cpp/container/list/erase)成员函数的返回值：

```
it = ml.erase(it);
// 'it' now points at first element after the last deleted element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:56:48.613

因为擦除使迭代器无效。它可能不再被使用，包括减量运算符。

编辑：至于删除，它删除值等于您指定的元素。`std::list`使用`operator==`进行比较，除非您定义了它，否则编译将失败。只需定义运算符，就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:20:47.330

之后`erase`，您传递给它的迭代器将无效。

现在，使用

```
ml.erase(it--); 
```

您正在传递迭代器`erase`的*副本，**并将**副本*向后移动，使其不再引用列表中的同一位置。
的副本准备好*之后*`--`发生，但实际上调用了*之前。* 调用之后，您的迭代器仍然有效，并且它在您删除的元素之前的一个位置。 *`erase` *`erase`** 

 **但如果你这样做

```
ml.erase(it);
it--; 
```

`it`调用后仍在尝试引用已删除的元素，当您尝试修改它时会出现异常，因为它无效。**

# c++ - 传递 map<>::iterator 作为 map<>::const_iterator &

> ID：14441238
> 
> 赞同：1
> 
> 时间：2013-01-21T14:54:48.373
> 
> 标签：c++, map, stl, iterator, const-iterator

我在 GCC 上将 map<...>::iterator 对象作为 const_iterator & 传递给函数时遇到问题：

```
class MyClass {

};

bool MyClass::_GetInstList(map<string,InstList>::const_iterator & it, const string & sMod)
{
    cout<<"Matched\n";
    it = tInstancesData.find(sMod);
    if( it == tInstancesData.end() ) {
        cout<<"\""<<sMod<<"\" is NOT a module\n";
        return false;
    }
    return true;
}

    bool SomeFunction()
    {

            map<string,InstList>::iterator  it;
            if( ! _GetInstList(it, SomeString) ) return false;
            it->second.Add(...);  //  Modifying element pointed by "it"

    } 
```

我的问题是，在 Visual Studio 2010 上，上面的代码工作得非常好，但在 GCC 4.1.2 上，我收到一个错误，指出函数调用没有匹配函数，对于 _GetInstList(it, SomeString)。问题似乎是将迭代器转换为 const_iterator &。

我必须通过引用来获取它，因为“它”在 _GetInstList() 内部发生了变化，并且调用者函数会检查它。（“it”指针被改变而不是指向元素）。

此外， SomeFunction() 中的“它”不能是 const，因为它改变了一个元素。

我该如何解决这个问题？

编辑：对于那些认为问题是从迭代器到 const_iterator 的转换的人：如果将函数原型更改为以 const_iterator NOT 作为参考，则代码编译得很好，问题是 const &。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:06:03.407

将您的参数类型更改为`const map<string,InstList>::const_iterator&`或仅更改为`map<string,InstList>::const_iterator`.

这是一个使用简单类型演示您的问题（和解决方案）的示例：

```
void func1(double& x){}
void func2(const double& x){}

int main()
{
    int x;
    func1(x); // error: 'func1' : cannot convert parameter 1 from 'int' to 'double &'
    func2(x); // succeeds
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-21T15:04:54.183

我认为也许无论如何都应该重新设计这种方法。传递迭代器对于其他人来说是混乱和混乱的。做到这一点有多难？

# sql - 如何使用一个插入语句将多行插入到 oracle 数据库中？

> ID：14441240
> 
> 赞同：15
> 
> 时间：2013-01-21T14:54:53.790
> 
> 标签：sql, oracle10g, sql-insert

> **可能重复：**
> [在 Oracle 中进行多行插入的最佳方法？](https://stackoverflow.com/questions/39576/best-way-to-do-multi-row-insert-in-oracle)

我有这个插入语句

```
INSERT INTO mytable VALUES 
('val1', 'val2'),
('aa',   'cc'),
('ww',   'dd'); 
```

我得到了这个错误 ORA-00933: SQL 命令没有正确结束

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-21T14:56:54.457

你正在使用oracle，试试这个

```
INSERT ALL 
    INTO mytable ("id", "name")
         VALUES ('val1', 'val2')
    INTO mytable ("id", "name")
         VALUES ('aa', 'cc')
    INTO mytable ("id", "name")
         VALUES  ('ww', 'dd')
SELECT * FROM dual  ; 
```

或简单

```
INSERT INTO mytable ("id", "name") VALUES ('val1', 'val2');
INSERT INTO mytable ("id", "name") VALUES ('aa', 'cc');
INSERT INTO mytable ("id", "name") VALUES ('ww', 'dd'); 
```

# php - PHP zip文件提取 - 条目大小错误

> ID：14441241
> 
> 赞同：2
> 
> 时间：2013-01-21T14:54:53.767
> 
> 标签：php, zip

我正在使用在线发票系统，他们的 API 允许我以字符串形式下载 PDF 发票，该字符串是用 base64 编码的压缩 pdf。我使用 base64_decode() 解码此字符串，然后将其保存为文件：`file_put_contents('temp/soubor.zip', $data);`

现在，如果我想在 Windows 中打开这个 zip 文件就可以了。但我想通过 php 提取它，如果我调用：

```
$zip = new ZipArchive;
if ($zip->open('temp/soubor.zip') === TRUE) {
    print_r($zip->statIndex(0));
    $zip->close();
} 
```

我明白了

```
Array ( [name] => zipEntryName [index] => 0 [crc] => 1906707552 [size] => -1 [mtime] => 1358774308 [comp_size] => -1 [comp_method] => 8 ) 
```

一切都很好，除了大小--1，这是一个大问题，因为它不会提取任何东西。

现在有趣的事情是：如果我在 winRar 中打开 zip 文件，选择修复存档，然后在我的脚本中打开修复后的 zip 文件，我会得到正确的大小并且可以正确提取文件。顺便说一句，存档文件只有 260kB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:12:20.540

看起来像格式错误的存档，可能它是从大小未知的数据流“即时”构建的，并且并非所有 ZIP 数据包都正确写入输出（或者，流未刷新，因此未写入中央目录）。您可以通过运行 zipinfo 查看详细的 zip 文件信息：http: [//www.info-zip.org/mans/zipinfo.html](http://www.info-zip.org/mans/zipinfo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:12:10.877

要么您以错误的方式保存您的 zip，因此接收到的缓冲区包含格式错误的数据。试试这个哟保存你的文件而不是 file_put_contents()：

```
<?PHP

    $handle = fopen('temp/soubor.zip', 'w');
    fwrite($handle, base64_decode($zipdatabase64));
    fclose($handle);

?> 
```

# hadoop - 计算 Hive 中的标签共现

> ID：14441244
> 
> 赞同：0
> 
> 时间：2013-01-21T14:55:00.297
> 
> 标签：hadoop, hive

我是一个 Hive 新手，希望计算*标签共现。*我在 Hive 中有一个表，其中包含每个文档中存在的所有标签：

```
(docID STRING, tag STRING) 
```

例如：

* * *

**docID，标签**

*   1、狗
*   1、猫
*   1、马
*   2、狗
*   2、猫
*   2、骨

* * *

我正在寻找一个 Hive 查询，它可以计算每对的所有标签共现。

输出应该是：

```
(tagA STRING, tagB STRING, co-occurrence INT) 
```

对于上面的例子：

* * *

**标签A，标签B，共现**

*   狗, 猫, 2
*   狗, 马, 1
*   狗, 骨头, 1
*   猫, 狗, 2
*   猫，马，1
*   猫, 骨头, 1

* * *

有没有人可以实现这一目标的 Hive 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:30:30.587

```
SELECT A.tag, B.tag, COUNT(*)
FROM tags A JOIN tags B
ON A.docId = B.docId
GROUP BY A.tag, B.tag; 
```

注意：这将不包括 0，例如 (horse, bone, 0) 不会在输出中

# rest - 使用 spring 的 webapp 和 rest 服务的安全性

> ID：14441251
> 
> 赞同：1
> 
> 时间：2013-01-21T14:55:15.317
> 
> 标签：rest, spring-security, tapestry

首先，非常感谢您在本站给予的大力帮助！

好吧，我会直奔主题：我是春天的新手，我使用 appfuse 来创建一个新的网络应用程序。最初的想法是创建一个带有前端的简单平台，然后从外部客户端调用其余服务。

关键是我无法定义一个 security.xml 文件，其中（页面和休息服务）可以使用不同的身份验证方法。

我的想法是页面的登录表单和基于服务的 url 参数的身份验证器，但我唯一得到的是一个例外：

```
通用匹配模式 ('/**') 在过滤器链中的其他模式之前定义，导致它们被忽略"
```

我已经分别尝试了它们中的每一个，但是当我将它们收集在同一个文件中时，就会出现异常。

```
 <http pattern="/images/**" security="none"/>
    <http pattern="/styles*/**" security="none"/>
    <http pattern="/scripts*/**" security="none"/>
    <http pattern="/assets*/**" security="none"/>   
    <http entry-point-ref="restAuthenticationEntryPoint">
      <intercept-url pattern="/services/**" access="ROLE_ADMIN,ROLE_ADMIN,ROLE_USER"/>
      <custom-filter ref="myFilter" position="FORM_LOGIN_FILTER"/>
      <logout />
   </http>
    <beans:bean id="myFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
      <beans:property name="authenticationManager" ref="authenticationManager"/>
      <beans:property name="authenticationSuccessHandler" ref="mySuccessHandler"/>
   </beans:bean>
    <beans:bean id="mySuccessHandler" class="org.bringer.webapp.authentication.MyAuthSuccessHandler"/>    
    <http auto-config="true" access-denied-page="/accessdenied">
        <intercept-url pattern="/login*/**" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
        <intercept-url pattern="/admin/*" access="ROLE_ADMIN"/>
        <intercept-url pattern="/passwordhint*/**" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
        <intercept-url pattern="/signup*" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
        <intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER"/>
        <form-login login-page="/login" 
                    default-target-url="/home" 
                    always-use-default-target="true"  
                    authentication-failure-url="/login/error" 
                    login-processing-url="/j_security_check"/>                    
        <remember-me user-service-ref="userDao" key="e37f4b31-0c45-11dd-bd0b-0800200c9a66"/>
    </http>
    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="userDao">
            <password-encoder ref="passwordEncoder">
                <salt-source ref="saltSource"/>
            </password-encoder>
        </authentication-provider>
    </authentication-manager>   
    <beans:bean id="saltSource" class="org.springframework.security.authentication.dao.ReflectionSaltSource"
        p:userPropertyToUse="username"/>   
    <global-method-security>
        <protect-pointcut expression="execution(* *..service.UserManager.getUsers(..))" access="ROLE_ADMIN"/>
        <protect-pointcut expression="execution(* *..service.UserManager.removeUser(..))" access="ROLE_ADMIN"/>
    </global-method-security> 
```

即使我已经删除了“/ **”模式，但除了异常我什么也没有。

请有人指出我正确的方向吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T07:16:14.870

**解决了！**

这是帮助我解决它的security.xml

```
 <http pattern="/services/**" create-session="stateless">
        <intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER" />
        <http-basic />
    </http>
    <http pattern="/login*/**" security="none"/>    
    <http auto-config="true" access-denied-page="/accessdenied">       
        <intercept-url pattern="/admin/*" access="ROLE_ADMIN"/>
        <intercept-url pattern="/passwordhint*/**" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
        <intercept-url pattern="/signup*" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
        <intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER"/>
        <form-login login-page="/login" 
                    default-target-url="/home" 
                    always-use-default-target="true"  
                    authentication-failure-url="/login/error" 
                    login-processing-url="/j_security_check"/>                    
        <remember-me user-service-ref="userDao" key="e37f4b31-0c45-11dd-bd0b-0800200c9a66"/>
    </http> 
```

# javascript - Jquery .each() - 返回值未定义

> ID：14441253
> 
> 赞同：1
> 
> 时间：2013-01-21T14:55:19.850
> 
> 标签：javascript, jquery

为什么 getColorOptionSelect() 返回未定义的值（我确定它有 debugger 的值）。

这肯定是与范围有关的问题，对不起我的 js 无知

```
jQuery(document).ready(function () {

    colorSelectID = getColorOptionSelect();
    alert(colorSelectID);

    function getColorOptionSelect() {

        // get label
        var selId;
        jQuery(".product-options dl label").each(function () {
            el = jQuery(this);
            // lower case, remove *
            var labelText = el.text().toLowerCase().replace("*", "");
            if (labelText == 'color') {
                //return element
                selId = el.parent().next().find("select").attr('id');
                return selId;
            }
        });
        //    return null;
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:57:00.820

`getColorOptionSelect`没有（未注释的）`return`声明。

您拥有的唯一 return 语句是在您传递给的匿名函数中`each()`。它将被底层代码使用`each()`（如果是，它将停止循环`false`）。

这不是范围问题，只是有多个功能。

您可能想要：

*   在调用之前定义一个变量`each()`
*   在每个循环内为其赋值
*   在结束时返回该变量`getColorOptionSelect`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:58:28.517

你应该做：

```
function getColorOptionSelect() {

        // get label
        var selId;
        jQuery(".product-options dl label").each(function () {
            el = jQuery(this);
            // lower case, remove *
            var labelText = el.text().toLowerCase().replace("*", "");
            if (labelText == 'color') {
                //return element
                selId = el.parent().next().find("select").attr('id');
                return false; // to stop further execution of each
            }
        });
        return selId;
    } 
```

在您的情况下，您正在从传递给每个的回调函数返回，它不会从`getColorOptionSelect`

从每个函数回调中返回值的唯一方法是告诉 jquery 是否应该转到下一项 ( `return true;`) 或不 ( `return false;`)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T14:58:36.007

取消注释最后一条`return`语句以重新调整值（类似于`selId`）

```
jQuery(document).ready(function () {

colorSelectID = getColorOptionSelect();
alert(colorSelectID);

function getColorOptionSelect() {

    // get label
    var selId;
    jQuery(".product-options dl label").each(function () {
        el = jQuery(this);
        // lower case, remove *
        var labelText = el.text().toLowerCase().replace("*", "");
        if (labelText == 'color') {
            //return element
            selId = el.parent().next().find("select").attr('id');
            return false;  //<---  return false to stop further propagation of each
        }
    });
      return selId; //<---  Must return something 
}

}); 
```

# testng - 使用 Apache PDFBox 比较 PDF 与页脚中不同时间戳的相等性

> ID：14441257
> 
> 赞同：0
> 
> 时间：2013-01-21T14:55:29.397
> 
> 标签：testng, pdfbox, birt

我正在使用 BIRT 生成包含数据图表和数据表的 PDF 报告。我有创建 BIRT PDF 的 TestNG 单元测试，然后我想将创建的 PDF 与基线报告进行比较。我不能使用 MD5 散列，因为每个报告在页脚中都有时间戳，并且时间戳总是在变化。我尝试使用 PDPage 和 PDResources 从 PDF 中获取所有图像，但图表似乎不是图像 b/c 从 PDResources 对象调用 getImages 返回 0 个图像。使用 PDFBox 我可以抓取 PDF 的其他哪些元素并与基线 PDF 进行比较以验证相等性？PDF 的格式如下，第 1 页将包含标题、开始日期/时间标签、结束日期/时间标签、报告说明，然后是一个或多个图表，然后是 1 个表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:14:54.737

我使用的解决方案是使用 PDFBox 解析 BIRT PDF 报告，但删除包含页脚的预定义文本字符串并比较两个 ArrayList。
`pdfDoc = PDDocument.load(docname); List pages = pdfDoc.getDocumentCatalog().getAllPages(); Iterator iter = pages.iterator(); while(iter.hasNext()) { PDPage page = (PDPage) iter.next(); String unparsedLine = page.getContents().getInputStreamAsString(); documentStreamList.add(unparsedLine.replaceAll(DATE_FOOTER_FORMAT, "")); }` 此代码将返回 PDF 包含的字符串列表，并将其与基线 BIRT 报告进行比较。所有数据都将得到同等解析，并且当它们相同时报告匹配。我从来没有找到直接比较生成的图表的方法。

# javascript - 在 DIV 的 ajax 加载内容上禁用单击事件

> ID：14441258
> 
> 赞同：0
> 
> 时间：2013-01-21T14:55:29.983
> 
> 标签：javascript, jquery

我需要在 DIV 的 ajax 加载内容上禁用单击事件。

```
<div id="left_column">
    <div class="menu">------</div>
    <div class="menu">------</div>
    <div class="small_panel1">------</div>
    <div class="small_panel1">------</div>
</div> 
```

我想禁用左列内所有 div 的点击事件。

我正在尝试下面的代码，但它不起作用：-

```
$("#left_column").children().bind('click', function(){ return false; }); 
```

请建议我在这里应该使用什么。预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:56:41.163

如果是 AJAX 加载的内容，则需要使用事件委托：

```
$("#left_column").on('click', 'div', function(){ return false; }); 
```

您可能还需要取消对左列容器本身的点击：

```
$("#left_column").on('click', function(){ return false; }); 
```

# xml - 具有相同子元素的 XML DTD 元素

> ID：14441260
> 
> 赞同：1
> 
> 时间：2013-01-21T14:55:38.573
> 
> 标签：xml, dtd

这引起了我的注意，所以我有一个 XML 文档，其中有一个名为 family 的节点

```
<family>
  <parents>
    <name>Bob</name>
    <init>R</init>
    <surname>Johnson</surename>
  </parents>
  <kids>
    <name>Lucy</name>
    <surname>Johnson</surname>
  </kids>
</family> 
```

初始是可选的，所以我为此创建了 DTD，它最终看起来像

```
<!ELEMENT parent (name, initial?, surname)>
<!ELEMENT kid (name, initial?, surname)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT initial (#PCDATA)>
<!ELEMENT surname (#PCDATA)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT initial (#PCDATA)>
<!ELEMENT surname (#PCDATA)> 
```

但我不断收到此错误有效性错误：重新定义元素名称^ /tmp/tmp.dtd:26：有效性错误：重新定义元素初始^ /tmp/tmp.dtd：27：有效性错误：重新定义元素姓氏^

即使我将 DTD 更改为这样。

```
<!ELEMENT parent (name, initial?, surname)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT initial (#PCDATA)>
<!ELEMENT surname (#PCDATA)>
<!ELEMENT kid (name, initial?, surname)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT initial (#PCDATA)>
<!ELEMENT surname (#PCDATA)> 
```

同样的错误..这实际上是我使用 xml 的第二天，从我读过的教程中，我似乎看不出我做错了什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:08:39.350

您不需要声明`name`,`initial`和`surname`两次，只需尝试

```
<!ELEMENT parent (name, initial?, surname)>
<!ELEMENT kid (name, initial?, surname)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT initial (#PCDATA)>
<!ELEMENT surname (#PCDATA)> 
```

`parent`并`kid`为其三个（或两个）子元素共享相同的定义。给定一个额外的定义

```
<!ELEMENT family (parent*, kid*)> 
```

这将验证以下内容（从您在问题中包含的文档中更正）

```
<family>
  <parent>
    <name>Bob</name>
    <initial>R</initial>
    <surname>Johnson</surname>
  </parent>
  <kid>
    <name>Lucy</name>
    <surname>Johnson</surname>
  </kid>
</family> 
```

# android - Android：在 MotionEvent.ACTION_MOVE 时长按按钮

> ID：14441261
> 
> 赞同：0
> 
> 时间：2013-01-21T14:55:42.603
> 
> 标签：android, button, ontouchlistener, motionevent

好的...在我的应用程序中，我更新了 MotionEvent.ACTION_DOWN 上的布局，然后检查运动事件坐标以找到我的按钮。当手指在不同的按钮上松开时，我可以表示敬酒。问题是我需要长按按钮来调用另一个动作而不与 MotionEvent.ACTION_UP 冲突。实现了一个长点击处理程序，但由于我不“点击”它不起作用。希望大家理解我的问题。

让我的应用按预期工作的最佳方法是什么？

我的班级实现了 OnTouchListener、OnGestureListener

```
 @Override
public boolean onTouch(View v, MotionEvent event) {

    switch(event.getAction()){

    case MotionEvent.ACTION_DOWN:

        // UPDATE LAYOUT
            break;

        case MotionEvent.ACTION_UP:

        // GET BUTTON X Y           
            if (x and y match the button location){

                // DO ACTION

            }else{   

                // DO NOTHING

            }           
            // CHANGE LAYOUT TO INITIAL STATE   
            break;

        case MotionEvent.ACTION_MOVE:
            break;

    }

        return false;

     mybutton.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
                // DO STUFF
            return true;
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:00:11.897

只需尝试以`false`您的`onTouch(...)`方法返回并`onLongClickListener(...)`照常使用

# ruby - 使用 Selenium-driver 的描述是否可以在 mechanize 中实现？

> ID：14441262
> 
> 赞同：0
> 
> 时间：2013-01-21T14:55:47.523
> 
> 标签：ruby, mechanize, ruby-1.9.3

任何人都可以通过提供一些小提示来帮助我，说明如何编写以下内容`Mechanize`？我对 Gem 完全陌生`Mechanize`。

```
require "rubygems"
require "selenium-webdriver"

driver = Selenium::WebDriver.for :firefox
driver.get "https://www.example.com/"

element = driver.find_element :name => "username"
element.send_keys "#####"
element = driver.find_element :name => "password"
element.send_keys "******"
element.submit
element = driver.find_element(:name, "btnHome")
element.click
element=driver.find_element(:link, "Empdetals")
#print element.attribute(:href)
element.click
element = driver.find_element :name => "search.empdirectory"
element.send_keys "#######"
element = driver.find_element :name => "btnSearch"
element.click
driver.current_url 
```

***错误***当我尝试@Prakash 提供的“mechanzie”版本时

```
D:\Ruby script>ruby gmail.rb
C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persist
ent/ssl_reuse.rb:70:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 rea
d server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent/ssl_reuse.rb:70:in `block in connect'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent/ssl_reuse.rb:70:in `connect'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:750:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent.rb:628:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent.rb:570:in `connection_for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent.rb:926:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize/h
ttp/agent.rb:258:in `fetch'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.r
b:407:in `get'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.r
b:306:in `click'
        from gmail.rb:6:in `block in <main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.r
b:409:in `get'
        from gmail.rb:4:in `<main>'

D:\Ruby script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:20:56.137

是的，[`mechanize`gem](http://rubygems.org/gems/mechanize)可用于自动化与网站的任何交互，包括通过提交用户 ID/密码和单击提交按钮/链接等方式登录网站。

与`selenium-webdriver`直接调用浏览器不同，`mechanize`它本身充当浏览器。

请查看 mechanize 文档上的[示例页面](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html)以了解如何`mechanize`使用。第二个示例 - 使用[RubyForge](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html#label-Rubyforge) - 展示了如何登录到站点并使用生成的页面。

有关如何使用的快速概览，`mechanize`请查看[RailsCasts 的 mechanize 剧集](http://railscasts.com/episodes/191-mechanize)

以下是从[http://www.google.com](http://www.google.com)开始、点击“Gmail”文本、登录 Gmail 并在页面中列出链接的示例代码：

```
require 'mechanize'

a = Mechanize.new
a.get('http://www.google.com') do |page|
  # Click the Gmail link
  gmail_login_page = a.click(page.link_with(:text => "Gmail"))

  # Submit the login form
  gmail_page = gmail_login_page.form_with( :action => 'https://accounts.google.com/ServiceLoginAuth' ) do |f|
    f.Email  = "<username>@gmail.com"
    f.Passwd = "**********"
  end.click_button

  # List all the links in the personal gmail page
  gmail_page.links.each do |link|
    text = link.text.strip
    next unless text.length > 0
    puts text
  end
end 
```

希望它有助于开始`Mechanize`并进一步探索它！

# python - 属性名称中带有 utf-8 字符的 web.py Form.validates() 错误

> ID：14441266
> 
> 赞同：0
> 
> 时间：2013-01-21T14:56:12.650
> 
> 标签：python, unicode, utf-8, web.py

我在 web.py 中有一个表单，由于 string.decode('utf-8') 可以很好地显示，但是当它提交时，我`'ascii' codec can't encode character u'\xf6' in position 1: ordinal not in range(128)`在 attrget 第 17 行从 web/form.py 得到一个。

该代码如下所示，第 17 行特别是在 except 块中的传递。

```
def attrget(obj, attr, value=None):
    try:
        if hasattr(obj, 'has_key') and obj.has_key(attr): 
            return obj[attr]
    except TypeError:
        # Handle the case where has_key takes different number of arguments.
        # This is the case with Model objects on appengine. See #134
        pass
    if hasattr(obj, attr):
        return getattr(obj, attr)
    return value 
```

它一定是关于编码的，因为如果我删除瑞典语 ö 字符，表格就可以工作。这是表单定义。

```
searchForm = form.Form(
    form.Textbox('Startdatum', id='datepickerStart'),
    form.Textbox('Slutdatum', id='datepickerEnd'),
    form.Textbox('IPadress', validIPaddress),
    form.Textbox('Macadress', validMacaddress),
    form.Button('Sök'.decode('utf-8'), type='submit', description='Search')
) 
```

第三行调用 Form.validates() 是触发它的地方。

```
def POST(self):
    form = self.searchForm()
    if not form.validates():
        headerMsg = 'Du skrev något fel, gör om, gör rätt.'.decode('utf-8')
        return tpl.index(headerMsg, form)

    return tpl.index(headerMsg='Inga rader hittades', form=form) 
```

完整的回溯如下。

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/web.py-0.37-py2.6.egg/web/application.py", line 239, in process
return self.handle()
  File "/usr/local/lib/python2.6/dist-packages/web.py-0.37-py2.6.egg/web/application.py", line 230, in handle
    return self._delegate(fn, self.fvars, args)
  File "/usr/local/lib/python2.6/dist-packages/web.py-0.37-py2.6.egg/web/application.py", line 420, in _delegate
    return handle_class(cls)
  File "/usr/local/lib/python2.6/dist-packages/web.py-0.37-py2.6.egg/web/application.py", line 396, in handle_class
    return tocall(*args)
  File "/home/mkbnetadm/netadmin/na.py", line 36, in POST
    if not form.validates():
  File "/usr/local/lib/python2.6/dist-packages/web.py-0.37-py2.6.egg/web/form.py", line 76, in validates
    v = attrget(source, i.name)
  File "/usr/local/lib/python2.6/dist-packages/web.py-0.37-py2.6.egg/web/form.py", line 18, in attrget
    if hasattr(obj, attr):
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf6' in position 1: ordinal not in range(128) 
```

那么在 web.py 中创建表单时我该怎么做才能避免这个错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:29:56.693

与所有标识符一样，属性名称必须是（可转换为）ASCII：

```
[Python 2.6.6]
>>> foo = object()
>>> hasattr(foo, 'o')
False
>>> hasattr(foo, u'o')
False
>>> hasattr(foo, u'\xf6')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf6' in position 0:
ordinal not in range(128)
>>> 
```

请参阅[http://docs.python.org/2/reference/lexical_analysis.html#identifiers](http://docs.python.org/2/reference/lexical_analysis.html#identifiers)

# symfony - symfony2 重新安装供应商

> ID：14441267
> 
> 赞同：0
> 
> 时间：2013-01-21T14:56:15.387
> 
> 标签：symfony, propel

执行后`./bin/vendors install --reinstall`，我有错误：

> 16384：PropelBundle 使用了新的分支模型，你应该切换到 1.0 分支

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:30:36.403

I think it would be good if you switch to composer for vendors as its much better way of updating vendors

have a look at at this here [http://getcomposer.org/doc/00-intro.md](http://getcomposer.org/doc/00-intro.md)

Initially i was also reluctant to use it but once i made the move i never looked back

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:57:58.750

尝试更改版本`deps`：

```
[PropelBundle]
    git=git://github.com/propelorm/PropelBundle.git
    target=/bundles/Propel/PropelBundle
    version=origin/1.1 
```

# seo - 3 个域指向 3 个具有不同内容和相同内容的站点

> ID：14441270
> 
> 赞同：0
> 
> 时间：2013-01-21T14:56:26.307
> 
> 标签：seo

我的客户目前有一个指向站点 A 的 .uk 域。他想出了一个购买 .com 和 .au 域的想法，该域将指向站点 B 和站点 C。站点 A、站点 B 和站点 C 将具有大学页面的不同内容。大学页面包含许多子页面（不同类型的大学），与 SITE A、SITE B 和 SITE C 不一样。但是所有 3 个站点的主页内容和设计完全相同，关于我们页面，联系我们页面。这对SEO仍然不利吗？如果是，我想为主页、关于我们页面和联系我们页面放置一个规范链接以指向站点 A。对此有什么想法吗？

提前感谢您的回复。

最好的问候，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:23:35.060

由于这是国际变体，您可能希望使用 rel hreflang 标记。这样您就可以表明它们是针对不同区域的重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:59:22.213

如果只有这三个页面有重复的内容，他们就不会遇到任何问题。它需要大量重复的内容才能成为 SEO 的问题。但是使用规范的 URL 肯定不会有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:20:20.997

最好的选择是在每个页面上都有独特的设计，因为您不能在多个域上使用规范元素。

无论如何，如果内容独特且有用，我认为您应该没有任何问题，因为您的“关于”或“联系”页面是相同的。

另一方面，如果您对此感到担忧，则不必使用相同的“关于”和“联系”页面。只需添加一点想象力并稍微改变一下，就可以了。至少，我会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T06:19:04.420

如果您将在主页、关于我们页面和站点 B 和站点 C 中指向站点 A 的联系我们页面中定义规范标签，那么您将无法从站点 B 和站点 C 获得 SEO 好处。

您必须在设计和更改内容时进行一些更改，才能从所有这三个站点获得更好的 SEO 结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T14:59:55.093

您还可以通过 robots.txt 排除站点 B 和 C 上的重复页面的索引

# c# - 如何在 Silverlight 的 ViewModel 中使用 Command 处理 Checkbox Checked/Unchecked 事件？

> ID：14441273
> 
> 赞同：5
> 
> 时间：2013-01-21T14:56:28.230
> 
> 标签：c#, silverlight

我有一个视图（*X.Xaml*），其中包含一些控件，包括`CheckBox`.

当我检查`CheckBox`它应该使会话*True*并且当我取消选中它时，它必须使会话*False*。

如果我在`X.Xaml.cs`代码隐藏中这样做，那会很容易，但我希望我的代码是干净的。

无论如何在*ViewModel*端使用 Command 并处理它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:36:04.167

回答你的问题：是的，有。

您必须创建`Command`实现类`ICommand`：

```
public class MyCommand : ICommand
{
    Action<bool> _action;
    public MyCommand(Action<bool> action)
    {
        _action = action;
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event System.EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        _action((bool)parameter);
    }
} 
```

然后在您的 ViewModel 中创建命令本身：

```
private MyCommand simpleCommand;
public MyCommand SimpleCommand
{
    get { return simpleCommand; }
    set { simpleCommand = value; }
}

public MainViewModel()
{
    SimpleCommand = new MyCommand(new Action<bool>(DoSomething));
}

public void DoSomething(bool isChecked)
{
    //something
} 
```

并将您的`Checkbox`命令绑定到它，`CommandParameter`然后`Checkbox.IsChecked`

```
<CheckBox Name="checkBox1" Command="{Binding Path=SimpleCommand}" CommandParameter="{Binding ElementName=checkBox1, Path=IsChecked}" /> 
```

但这有点夸张。您最好`bool`在 ViewModel 中创建相应的属性，绑定到它并在访问器中调用所需的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T16:02:34.410

为什么不能简单地将 IsChecked-Property 上的 TwoWay-Binding 创建到 ViewModel-Property 并对该属性更改做出反应？

在视图模型中：

```
private bool _IsSessionEnabled;
public bool IsSessionEnabled
{
    get { return _IsSessionEnabled; }
    set {
        if (_IsSessionEnabled != value) {
            _IsSessionEnabled = value;
            this.OnPropertyChanged();
            this.switchSession(value); /* this is your session code */
        }
    }
} 
```

在视图中：

```
<CheckBox IsChecked={Binding IsSessionEnabled, Mode=TwoWay}
          Content="Session active" /> 
```

在引发事件之前（或之后，如您所愿）在您自己的 OnPropertyChanged 实现中响应 Property Change 会更加清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:16:27.317

您可以使用命令，也可以将数据绑定与更改通知一起使用。
在视图中只需绑定到复选框的命令属性。我只是调用命令更改。

```
Command={Binding Changed}" 
```

视图模型

```
bool session = false;
RelayCommand Changed = new RelayCommand(()=>{this.session = !this.session}); 
```

# c# - 使用 AddNew() 调用参数化构造函数

> ID：14441274
> 
> 赞同：3
> 
> 时间：2013-01-21T14:56:28.417
> 
> 标签：c#, .net, bindinglist

我已经`DataGridView`绑定了一些对象的集合。在`DataGridView`中，有一个`ComboBox`名称列表，我正在尝试将新对象添加到每个选择的集合中。但问题是`AddNew()`总是调用孩子的默认构造函数。：/这是一个代码：

```
public class Parent:BindingList<Child>

public Child ChildProperty{get;set;}

public new object AddNew()
    {
        return ChildProperty;
    }

public new void AddingNew(object sender, AddingNewEventArgs e)
    {
        ChildProperty = new Child(this);
        e.NewObject = ChildProperty;
    } 
```

我必须使用参数化构造函数，因为我需要将父级传递给子级。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T14:57:47.607

通过使用`new`关键字，您不会覆盖基类的方法；相反，您只在派生类中创建全新的方法，这些方法永远不会被调用。

相反，您应该**重写**该`AddNewCore()`方法并返回一个新对象。

**编辑**：您还需要`Add()`将新实例添加到您的覆盖中的集合中。

# javascript - KnockoutJS fromJS 不工作 TypeError：无法调用未定义的方法“fromJS”

> ID：14441276
> 
> 赞同：7
> 
> 时间：2013-01-21T14:56:36.753
> 
> 标签：javascript, jquery, knockout.js

我使用knockoutJS，当我使用“fromJS”时出现以下错误

> TypeError：无法调用未定义的方法“fromJS”

**我的 JavaScript 代码**

```
 <script src="../../Scripts/jquery-1.8.3.js" type="text/javascript"></script>
 <script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>

 <script type="text/javascript">
     $(document).ready(function () {
         var PersonModel = function (data) {
             ko.mapping.fromJS(data, {}, this);
         };

         var data = $.getJSON("http://localhost:40913/candidate/index/1", function (data)
         {
             viewModel = new PersonModel(data);
             ko.applyBindings(viewModel);
         }
         );
     });
 </script> 
```

**JSON 输出**

> ```
> {
> PersonalInfo: {
> PTitle: null,
> PGender: {
> Id: 1,
> Name: "Male",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PMilitaryService: {
> Id: 2,
> Status: "Exempted",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PMarital: {
> Id: 2,
> Status: "Engaged",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PNationality: {
> Id: 1,
> NationalityName: "Egyptian",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> Id: 1,
> FirstName: "Jason",
> SecondName: "J",
> ThirdName: "Patrick",
> FourthName: "Jules",
> BirthDate: "2013-01-01T00:00:00",
> GenderId: 1,
> MilitaryServiceId: 2,
> MaritalId: 2,
> NationalityId: 1,
> IsDeleted: null,
> LastModified: "2013-01-21T13:32:20.437",
> ModifiedBy: null,
> FullName: "fhfghfghfghgfhg"
> },
> TraineeInfo: null,
> AdressInfo: {
> PCity: {
> Id: 6,
> Name: "Cairo",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PCountry: {
> Id: 1,
> Name: "France",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> Id: 1,
> Street: "5th Ave",
> District: "6th Area",
> CityId: 6,
> CountryId: 1,
> IsDeleted: null,
> LastModified: "2013-01-21T13:32:20.437",
> ModifiedBy: null
> },
> ContactInfo: {
> Id: 1,
> PhoneNumber: "12345678",
> MobileNumber: "2012415413",
> Email: "a@b.com",
> EmailConfirm: null,
> IsDeleted: null,
> LastModified: "2013-01-21T13:32:20.437",
> ModifiedBy: null
> },
> HighSchool: {
> PSchoolCertificate: {
> Id: 1,
> Name: "Thanwya Amma",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> Id: 1,
> Name: "El Nasr School",
> SchoolCertificateId: 1,
> GraduationYear: "2013-01-10T00:00:00",
> OverallGrade: 90,
> OtherSchoolCertificate: null,
> IsDeleted: null,
> LastModified: "2013-01-21T13:32:20.437",
> ModifiedBy: null
> },
> Type: {
> Id: 1,
> Type: "Fresh Graduate",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> Certifications: [ ],
> TrainingCourses: [ ],
> CareerHistories: [ ],
> Universities: [
> {
> PCertificate: {
> Id: 1,
> CertificateType: "BACHELOR",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PUniversityName: {
> Id: 2,
> Name: "ABBASSIA",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PFaculty: {
> Id: 1,
> Name: "ACCOUNTING",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PSpecialization: {
> Id: 2,
> Name: "ACCOUNTING ENGLISH",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PGrade: {
> Id: 3,
> OverallGrade: "Very Good",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> Id: 1,
> CertificateId: 1,
> OtherCertificate: null,
> UniversityNameId: 2,
> OtherUniversity: null,
> FacultyId: 1,
> OtherFaculty: null,
> SpecializationId: 2,
> OtherSpecialization: null,
> GraduationYear: "2013-01-04T00:00:00",
> GradeId: 3,
> IsDeleted: null,
> LastModified: "2013-01-21T13:32:20.437",
> ModifiedBy: null
> }
> ],
> Languages: [
> {
> PLangName: {
> Id: 1,
> Name: "English",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> PLangProf: {
> Id: 4,
> LanguageProf: "Native",
> IsDeleted: false,
> LastModified: "2013-01-21T00:00:00",
> ModifiedBy: "System Auto Generated"
> },
> Id: 1,
> LangNameId: 1,
> LangProfId: 4,
> IsDeleted: null,
> LastModified: null,
> ModifiedBy: null
> }
> ],
> TestInfo: null,
> InterviewInfo: null,
> TechnicalInterview: null,
> MedicalTest: null,
> SecuirtyTest: null,
> HREmployee: null,
> Id: 1,
> Ssid: "28454654654545",
> SsidConfirm: null,
> Status: null,
> StatusId: 1,
> RefCode: "8951000000",
> ApplicationTypeId: 1,
> EntryDate: "2013-01-21T13:32:20.437",
> Skills: "aaksdklasdjkl asd asd d d d g ghs fgdsfgd",
> Photo: null,
> IsDeleted: null,
> LastModified: "2013-01-21T13:32:20.437",
> ModifiedBy: null
> } 
> ```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T15:07:59.303

从中获取插件

```
https://raw.github.com/SteveSanderson/knockout.mapping/master/build/output/knockout.mapping-latest.js 
```

并通过以下方式添加：

```
<script src="../../Scripts/knockout.mapping-latest.js" type="text/javascript"></script> 
```

# mongodb - 如何在 Orbeon 中添加 MongoDB 数据源

> ID：14441279
> 
> 赞同：2
> 
> 时间：2013-01-21T14:56:40.810
> 
> 标签：mongodb, orbeon

如何将 MongoDB 数据源添加到 Orbeon CE？我一直在浏览所有 xml 配置文件，但没有任何运气，Orbeon 文档并没有太大帮助。任何帮助，将不胜感激。

它应该可以通过持久化 api 来实现。

编辑：当添加了数据源\服务时，例如，/fr/service/mongodb/* 如何从表单应用程序对其进行过程调用，即如何使用 /crud 和 /search 添加并从数据库中检索信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:38:33.497

首先请注意，目前对 MongoDB 的支持还处于试验阶段。它在 中作为 servlet 实现[`MongoDBPersistence.scala`](https://github.com/orbeon/orbeon-forms/blob/master/src/scala/org/orbeon/oxf/fr/mongdb/MongoDBPersistence.scala)，因此您需要：

1.  编辑 Orbeon`web.xml`在 a 中声明该 servlet `<servlet>`，并使用 a 映射`/fr/service/mongo/*` 到该 servlet `<servlet-mapping>`。
2.  添加一个属性告诉 Form Runner 使用 MongoDB 持久层：例如`<property as="xs:string" name="oxf.fr.persistence.provider.*.*.*" value="mongo"/>`.
3.  添加一个属性，告诉 Form Runner MongoDB 持久层的 URI 是什么，例如`<property as="xs:anyURI" name="oxf.fr.persistence.mongo.uri" value="/fr/service/mongo"/>`.

# vectorization - 在展平的 fortran 矩阵上循环

> ID：14441288
> 
> 赞同：1
> 
> 时间：2013-01-21T14:57:05.470
> 
> 标签：vectorization, fortran90, loop-unrolling

我有一些看起来像这样的代码：

```
DO I=0,500
    arg1((I*54+1):(I*54+54)) = premultz*sinphi(I+1)
ENDDO 
```

简而言之，我有一个维度为 54 的数组 premultz。我有一个维度为 501 的数组 sinphi。我想将 sinphi 的第一个值乘以 premultz 的所有条目，并将其存储在 arg1 的前 54 个条目中，然后sinphi 的第二个值乘以 premultz 的所有条目并将其存储在 arg1 的 second54 个条目中，依此类推。

这些是扁平矩阵。为了速度，我将它们展平，因为这个项目的主要目标之一是非常快的代码。

我的问题是：在 Fortran90 中编码这种计算是否有更有效的方法？我知道 Fortran 有很多漂亮的数组操作可以完成，但我并不完全了解。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:49:19.147

这个表达式，如果我做对了，应该`arg1`在一个语句中创建

```
arg1 = reshape(spread(premultz,dim=2,ncopies=501)*&
              &spread(sinphi,dim=1,ncopies=54),[1,54*501]) 
```

我在这里硬连线了尺寸，可能适合也可能不适合您的目的。内部表达式生成 和 的外部乘积，`premultz`然后`sinphi`将其重新整形为向量。你可能会发现你需要重塑外部产品的转置，我没有仔细检查过。

但是，根据我对 Fortran 数组内在函数的这种巧妙使用的经验，我怀疑这种或 Fortran 数组内在函数的大多数其他巧妙用法会胜过您已经拥有的简单循环实现。对于其中许多操作，编译器将生成数组的副本，并且复制数据相对昂贵。当然，这是您可能想要测试的断言。

我将由您来决定单行是否比循环更易于理解。有时，数组语法的表现力是以可接受的性能成本为代价的，有时则不然。

# java - java：构造函数直接存储用户提供的数组时的安全性以外的影响

> ID：14441294
> 
> 赞同：1
> 
> 时间：2013-01-21T14:57:51.367
> 
> 标签：java, arrays, security, sonarqube

我在工作中的一个项目上运行了 Sonar，发现了“用户提供的数组直接存储”的违规行为。
因此，更深入地了解这究竟意味着什么，我遇到了很多从安全角度讨论它的东西（[例如......](https://stackoverflow.com/questions/11580948/sonar-violation-security-array-is-stored-directly)）。因此，当我阅读或听到“安全”时，我会想到恶意、破解、数据泄露和其他严重后果。
但我想知道还有什么可能出错，尤其是在负载平衡环境中。这会是担心跨会话数据污染的原因吗？一位客户的订单数据被其他人的详细信息损坏，等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:15:53.880

基本上，如果您将 Java API 公开给世界其他地方，您应该认为这条规则非常重要。您提供的链接完美地解释了原因（如果您不克隆它，您的 API 的使用者将能够随时更改数组）。

如果在您的内部实现中发生违规行为（其他人永远不会接触或使用），您可以降低违规的严重性，因为第三方代码没有修改数组的风险。但是，不要忘记代码是存在和发展的，有朝一日，甚至您的内部类也可能会暴露给世界其他地方。

# sql-server - 是否可以查询两个访问表，您想知道第一个表中的值/范围是否在第二个表中的两个字段之间？

> ID：14441298
> 
> 赞同：0
> 
> 时间：2013-01-21T14:57:59.110
> 
> 标签：sql-server, multiple-tables

我正在尝试在金刚石钻孔数据库中查询两个表 ASSAYS 和 LITHO。

我被赋予了值 (SAMPLE_NO) 以在 ASSAYS 表中搜索，以返回诸如 HOLE-ID、FROM 和 TO 之类的值。所以我们采集的每个样本都有一个 HOLE-ID、SAMPLE_NO、FROM 和 TO。一个hole-id 可以有多个样本编号，但每个样本编号都是唯一的。from 和 to 在每个 hole-id 中都是唯一的。这个我找不到问题。

我的同事还想知道与每个样品相关的岩石类型。此信息位于另一个表中，因此我需要弄清楚如何查询此信息。该表包含的信息是 HOLE-ID、FROM、TO 和 ROCKTYPE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:03:46.167

您正在寻找所谓的 JOIN。这允许您基于匹配列值连接多个表的数据。这可能是您的起点：

```
SELECT a.*, l.*
FROM ASSAYS a LEFT JOIN LITHO l ON a.hole-id = l.hole-id
WHERE a.sample_no = 'XXXX' 
```

请谷歌 JOIN 和 SQL 以了解确切的语法。

# d3.js - 计数事件

> ID：14441300
> 
> 赞同：0
> 
> 时间：2013-01-21T14:58:06.763
> 
> 标签：d3.js, cubism.js

我正在使用立方体和立体主义。这是完美的，除了一件事......我需要以数字方式显示总事件。例如，我有一个指标显示每 10 秒的 API 调用，我需要知道 API 调用的总数。

有什么我缺少的内置功能吗？

我想过在评估器中添加一个（Mongo）计数，但是事件过期了，所以这不起作用。

跟踪正在运行的总客户端并将其包含在事件中可能是一种选择，但是源是分布式的并且事件不是单调的，因此最后 10 秒的简单总和将不起作用。我需要能够查询“获取每个不同来源的最后一个事件”。那可能吗？

我有很多指标，所以我真的希望将客户请求的数量保持在最低限度。如果我能在标准度量查询中获得例如`cumulative`，`value`我会很高兴。

编辑

我错过了一些东西......使用`sum`和一个大的（例如1天）步骤工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:52:45.113

我错过了一些东西......使用 sum 和一个大的（例如 1 天）步骤完美地工作。

# objective-c - 音频 mp3 文件从 url 下载

> ID：14441303
> 
> 赞同：0
> 
> 时间：2013-01-21T14:58:12.020
> 
> 标签：objective-c, ios6

如何从 ios 6.0 sdk 中大约 5mb 大小的 url 下载 mp3 文件我正在使用 jsonparser 来获取 mp3 文件的响应并保存在 photolibrary 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:17:11.320

```
NSURL *url = [NSURL URLWithString:@"http://www.pacdv.com/sounds/people_sound_effects/c-c-2.mp3"]; 
NSData *soundData = [NSData dataWithContentsOfURL:url];
NSString *documents = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]
NSString *filePath = [documents stringByAppendingPathComponent:@"sound.caf"];
[soundData writeToFile:filePath atomically:YES]; 
```

# javascript - 在还包含文件名的路径中获取 LAST FOLDER 的最快方法？

> ID：14441305
> 
> 赞同：0
> 
> 时间：2013-01-21T14:58:18.400
> 
> 标签：javascript, regex

如何使用正则表达式（在 Javascript 中）从以下路径获取最后一个文件夹名称（没有文件名）？

```
c:\folder1\folder2\last_folder\filename.ext 
```

我正在寻找最有效的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:51:35.727

```
var path = 'c:\\folder1\\folder2\\last_folder\\filename.ext';

var folder = path.replace( /.+\\(.+)\\[^\\]+$/, '$1' ); 
```

# android - 如何在android中像listview一样突出显示视图

> ID：14441306
> 
> 赞同：0
> 
> 时间：2013-01-21T14:58:27.520
> 
> 标签：android, view

我使用我的视图而不是 ListView。如何在触摸时突出显示此视图，就像在 ListView 中突出显示触摸一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:00:59.430

使用选择器作为视图的背景。例如：选择器.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/button_pressed_yellow"
      android:state_pressed="true" />
<item android:drawable="@drawable/button_focused_orange"
      android:state_focused="true" />
<item android:drawable="@drawable/button_normal_green" /> 
```

一些其他的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<yourView
    android:id="@+id/viewWithSelector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/selector.xml" /> 
```

# android - 低电量。安卓行为

> ID：14441311
> 
> 赞同：1
> 
> 时间：2013-01-21T14:58:42.257
> 
> 标签：android, battery

当电池电量不足时，Android OS 是否有任何特定行为？例如，禁用蓝牙模块，或杀死应用程序/服务？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:02:40.537

据我所知不是。然而，一些手机制造商试图通过降低屏幕亮度（三星）来节省最后一点电量。此外，有很多第三方应用程序可以根据位置、时间等管理各种设置。也许其中一些可以在电池电量过低时触发某些操作，但我还没有真正尝试过他们自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:09:53.283

大多数 android 操作系统都包含一种省电模式，当您的电池寿命达到某个阈值（即 30%）时，可以将其设置为启动。

一旦超过此阈值，您就可以自动关闭 WiFi、蓝牙、GPS、调整亮度等。

为此，需要启用省电模式并指定设置。我相信这通常在大多数安卓操作系统的设置菜单中提供，但我听说“冰淇淋三明治”操作系统将它隐藏在用户无法触及的地方。

# cakephp - 查找条件的 CakePHP 语法

> ID：14441312
> 
> 赞同：2
> 
> 时间：2013-01-21T14:58:45.163
> 
> 标签：cakephp, cakephp-2.1

我有一个名为的表`Users`，以下查找工作正常：

```
$users = $this->User->find('list', array('conditions'=>array('User.id'=>1))); 
```

但是，如果我尝试使用`"User.id != 1" or "User.id >= 5",` find 获取用户列表，则不会返回数据。

我使用的语法是

```
$users = $this->User->find('list', array('conditions'=>array('User.id'=>'<> 1'))); 
```

和

```
$users = $this->User->find('list', array('conditions'=>array('User.id'=>'>= 1'))); 
```

Cake 为该`User.id => '<> 1')`案例生成的调试查询是

```
SELECT `User`.`id`, `User`.`first_name` FROM `mesh2`.`users` AS `User` WHERE `User`.`id` = '<>1', 
```

这似乎是不正确的。

我使用了 Alvin[网站上](http://alvinalexander.com/php/cakephp-find-conditions-cakephp-find-all-list-count)的示例。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T15:06:39.100

您需要放在`>=`阵列的正确一侧：

```
$this->User->find('list', array(
    'conditions'=>array('User.id >=' => 1))); 
```

如“官方”文档中所述：

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T07:19:08.490

默认情况下可能的键，所有这些都是可选的：

```
$params = 
        array(
        'conditions' => array('Model.field' => $thisValue), //array of conditions
        'recursive' => 1, //int
        //array of field names
        'fields' => array('Model.field1', 'DISTINCT Model.field2'),
        //string or array defining order
        'order' => array('Model.created', 'Model.field3 DESC'),
        'group' => array('Model.field'), //fields to GROUP BY
        'limit' => n, //int
        'page' => n, //int
        'offset' => n, //int
        'callbacks' => true //other possible values are false, 'before', 'after'
    ); 
```

询问：

```
$resp = find('all', $params);

debug($resp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T13:56:46.743

```
$this->User->find('list', array(
    'conditions'=>array('User.id >=' => true))); 
```

# git - Git：只暂存修改过的文件，不删除或添加

> ID：14441320
> 
> 赞同：2
> 
> 时间：2013-01-21T14:59:09.373
> 
> 标签：git

如[文档](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)中所示（以及此[问题](https://stackoverflow.com/questions/572549/difference-of-git-add-a-and-git-add)的答案）：

*   `git -u`：向索引添加修改和删除
*   `git -A`: 向索引添加修改、删除和添加

是否有一个 1 行 git 命令只添加文件修改，而不是添加/删除？

我想要一种简单的方法来添加我的所有编辑，但不希望这个操作默认添加/删除文件（我会明确地这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:34:36.193

你可以这样：

```
git add $(git diff-files --diff-filter=M --name-only) 
```

* * *

**资源：**

*   [git 文档 - 差异文件](http://www.kernel.org/pub/software/scm/git/docs/git-diff-files.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:06:09.080

我建议你使用

```
git add -p 
```

它允许您选择您感兴趣的更改。

# entity-framework - 使用 Automapper 对 DTO 进行多对多

> ID：14441321
> 
> 赞同：5
> 
> 时间：2013-01-21T14:59:13.540
> 
> 标签：entity-framework, many-to-many, automapper, dto

如果我在 EF 中定义了多对多关系：

```
public class StudentImage 
{
    public int StudentId { get; set; }
    public int ImageId { get; set; }
    public int Order { get; set; }
    public virtual Student Student { get; set; }
    public virtual Image Image { get; set; }
}

public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<StudentImage> Images { get; set; }
}

public class Image
{
    public int Id { get; set; }
    public string Filename { get; set; }
    public virtual ICollection<StudentImage> Students { get; set; }
} 
```

和 DTO 的：

```
 public class ImageDTO
    {
        public int Id { get; set; }
        public string Filename { get; set; }
        public int Order { get; set; }
    }

    public class StudentIDO
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public ICollection<ImageDTO> Images { get; set; }
    } 
```

如何使用 Automapper 从 Student 映射到 StudentDTO 以及从 Image 映射到 ImageDTO？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:15:51.267

映射

```
Mapper.CreateMap<Student, StudentIDO>();

Mapper.CreateMap<StudentImage, ImageDTO>()
        .ForMember(d => d.Id, opt => opt.MapFrom(s => s.ImageId))
        .ForMember(d => d.Filename, opt => opt.MapFrom(s => s.Image.Filename));

Mapper.CreateMap<StudentIDO, Student>()
      .AfterMap((s, d) =>
      {
          foreach (var studentImage in d.Images)
              studentImage.StudentId = s.Id;
      });

Mapper.CreateMap<ImageDTO, StudentImage>()
      .ForMember(d => d.ImageId, opt => opt.MapFrom(s => s.Id)); 
```

用法

```
var studentDTO = Mapper.Map<StudentIDO>(student);
var student = Mapper.Map<Student>(studentDTO); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T03:32:10.223

所以 Image 和 ImageDTO 是 1:1 的关系。这很容易通过 AutoMappper 映射

```
Mapper.CreateMap<Image, ImageDTO>(); 
```

映射器.CreateMap(); 最后一个 Student 和 StudentDTO，他们有包含列表。

```
Mapper.CreateMap<Student,StudentDTO>
.ForMember(s => s.Images, opt=>opt.MapFrom(p=>p.Images)); 
```

有时，如果您尝试这样做对性能不利。谢谢

# encryption - 基于验证码的安全客户端 HTML5 画布是否可行？

> ID：14441340
> 
> 赞同：0
> 
> 时间：2013-01-21T15:00:22.990
> 
> 标签：encryption, canvas, obfuscation, client-side, captcha

几天前，我想创建一个基于 HTML5 Canvas 的验证码来保护某些表单字段输入免受机器人的攻击。

棘手的部分是，在某些时候你将不得不调用：`ctx.fillText(char, x, y);`

基本上`char`来自服务器的变量将对客户端可见，除非使用某种客户端加密。

即便如此，我仍然认为你能做到的最好的事情是某种形式的旋转混淆方案，这样自动化机器人就很难轻松解密。

我想要画布客户端的原因是降低服务器负载并减少应用程序的依赖项（使用节点希望不必为节点画布等安装 Cairo ......）

关于从这里去哪里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:54:04.473

仅适用于非常小的安全值。

（换句话说，没有。）

除了通过网络保存的字节之外，您没有其他理由想要这样做。无论哪种方式，服务器都必须花时间处理一组需要检查的字符。它还不如花时间制作一个base64字符串发送给客户端并用作验证码。

# sql - 多部分标识符不起作用

> ID：14441341
> 
> 赞同：-4
> 
> 时间：2013-01-21T15:00:23.143
> 
> 标签：sql, sql-server

不知道为什么以下不起作用：

```
SELECT Menus.Id, MealTimes.Id, 
  Menus.MealTime_Id, CAST(MealTimes.Name AS TEXT) as MName, 
  CONVERT(VARCHAR(10), Menus.Date, 126) as Date, 
  CAST(Dishes.Name AS TEXT) as Name 
FROM C 
JOIN Menus 
  ON Menus.MealTime_Id=MealTimes.Id 
JOIN MenuDish 
  ON MenuDish.Menus_Id=Menus.Id 
JOIN Dishes 
  ON Dishes.Id=MenuDish.Dishes_Id 
WHERE C.Id=110 AND Menus.Date BETWEEN "2013-01-21" AND "2013-01-25" 
```

它现在抛出以下错误：

无法绑定多部分标识符“MealTimes.Name”。

我的加入基本上是这样的：

```
$this->db->join('Menus', 'Menus.MealTime_Id=MealTimes.Id');
    $this->db->join('MenuDish', 'MenuDish.Menus_Id=Menus.Id');  
    $this->db->join('Dishes', 'Dishes.Id=MenuDish.Dishes_Id'); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:03:22.987

您的查询中没有`MealTimes`表/别名。

# c++ - Arduino 编译为 C++，而不是 C

> ID：14441349
> 
> 赞同：3
> 
> 时间：2013-01-21T15:00:48.577
> 
> 标签：c++, c, compilation, arduino

我正在尝试在 Arduino 上使用 Supermodified 伺服。

我的草图中还没有任何实际代码，我只是想编译库。我有很多错误。

在做了一些研究之后，我发现如果我将我的代码编译为 C 而不是 C++，我不会得到这些错误。但我不知道该怎么做！

我正在为 Linux x64 使用 Arduino 1.0。

@Omnifarious我的arduino草图中只有#include指令，此时是`sketch_jan20.cpp`

我添加了

```
#ifd __cplusplus{
extern "C"
#endif 
```

这有助于消除以下错误，除了其中一个错误：布尔值的重新定义。当我评论那条线时，我得到了一大堆新的错误。它们都是相同的，包括以下一些变化：

`C:\Users\Ventrius\Programming\Arduino1.01\libraries\ArduinoApiC\/zoCommands.h:131: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'zoCommandDoMove'`

**错误：**

```
avr-g++ -c -g -Os -Wall -fno-exceptions -ffunction-sections -fdata-sections -mmcu=atmega328p -DF_CPU=16000000L -DARDUINO=100 -I/usr/share/arduino/hardware/arduino/cores/arduino -I/usr/share/arduino/hardware/arduino/variants/standard -I/usr/share/arduino/libraries/ArduinoApiC /tmp/build3069866408398264713.tmp/sketch_jan20a.cpp -o/tmp/build3069866408398264713.tmp/sketch_jan20a.cpp.o 
In file included from /usr/share/arduino/libraries/ArduinoApiC/zoSmsMaster.h:4:0,
                 from sketch_jan20a.cpp:1:
/usr/share/arduino/libraries/ArduinoApiC/zoTypes.h:39:18: error: redeclaration of C++ built-in type ‘bool’
In file included from /usr/share/arduino/libraries/ArduinoApiC/zoSmsMaster.h:5:0,
                 from sketch_jan20a.cpp:1:
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:19:29: error: non-local function ‘void zoErrorInit(volatile ZO_ERROR*)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:20:27: error: non-local function ‘u08 zoErrorGet(volatile ZO_ERROR*)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:21:44: error: non-local function ‘void zoErrorPut(volatile ZO_ERROR*, u08)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:22:32: error: non-local function ‘bool zoErrorIsEmpty(volatile ZO_ERROR*)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:24:30: error: non-local function ‘u08 zoErrorGetIsr(volatile ZO_ERROR*)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:25:47: error: non-local function ‘void zoErrorPutIsr(volatile ZO_ERROR*, u08)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
In file included from /usr/share/arduino/libraries/ArduinoApiC/zoSmsMaster.h:6:0,
                 from sketch_jan20a.cpp:1:
/usr/share/arduino/libraries/ArduinoApiC/zoProtocol.h:93:26: error: non-local function ‘bool zoProtocolCommandResponse(ZO_PROTOCOL_HAL*, ZO_PROTOCOL_PACKET*, volatile ZO_ERROR*)’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: error: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage
In file included from sketch_jan20a.cpp:1:0:
/usr/share/arduino/libraries/ArduinoApiC/zoSmsMaster.h:55:18: warning: non-local variable ‘volatile ZO_ERROR* zoSmsMasterError’ uses anonymous type
/usr/share/arduino/libraries/ArduinoApiC/zoError.h:15:2: warning: ‘typedef volatile struct<anonymous> ZO_ERROR’ does not refer to the unqualified type, so it is not used for linkage 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:06:13.883

**这个答案不是很有用，只是我试图处理这个问题令人困惑的性质。**

将文件重命名为`.c`并用于`avr-gcc`编译它们，而不是`avr-g++`.

如果您遇到错误，这意味着您需要调整您的程序，甚至可能重新编写它以不使用任何 C++ 功能。

没有将 C++ 程序翻译成 C 的通用公式。

另一种选择是创建自己的 C 层供 C++ 代码调用。这层 C 代码将具有 C++ 友好的函数定义（即 no`bool`等），然后它将从 Arduino 库中调用非 C++ 友好的代码。

然后，您可以创建包含 C 层函数定义的头文件，这些函数定义包含在`extern "C" {`...中`}`。确保这些头文件不包含您正在使用的 Arduino 库的任何头文件。

# vba - 图片按钮图片更改

> ID：14441353
> 
> 赞同：0
> 
> 时间：2013-01-21T15:01:07.810
> 
> 标签：vba, powerpoint, imagebutton

如果用户激活图像按钮，按钮的图片应该会改变。我使用此代码。

```
Dim mainslide As Object
Set mainslide = ActivePresentation.Slides(2)

If mainslide.Shapes(11).Name = "green" Then
    mainslide.Shapes(11).Picture = LoadPicture("pathname")
    fődia.Shapes(11).Name = "red"
Else
    mainslide.Shapes(11).Picture = LoadPicture("pathname2")
    fődia.Shapes(11).Name = "green"
End If 
```

我收到运行时错误 438，但在 Excel 中此方法有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:19:29.280

fodia 在您的示例中未定义，因此很难猜测它应该是什么。但我认为这不是问题的根源。这是另一种有效的方法。有几点需要注意：

PPT 对 ActiveX 对象的处理很奇怪。要获得您习惯用于控制对象的属性，您必须使用 Shape.OLEFormat.Object.property_name

并且至少在某些版本中，ActiveX 形状不会以正常的形状顺序出现；您可以通过幻灯片上的形状依次选择每个形状，但永远不会选择 ActiveX 形状。命名形状是一种解决方法（并且在重新排序形状时不会改变，因此它更可靠一些）。

```
Sub RedOrGreen()

Dim mainslide As Slide
Dim oSh As Shape
Set mainslide = ActivePresentation.Slides(1)

Set oSh = FindShapeNamed("green", mainslide)
If Not oSh Is Nothing Then
    oSh.OLEFormat.Object.Picture = LoadPicture("c:\temp\red.jpg")
    oSh.Name = "red"
    Exit Sub
End If

Set oSh = FindShapeNamed("red", mainslide)
If Not oSh Is Nothing Then
    oSh.OLEFormat.Object.Picture = LoadPicture("c:\temp\green.jpg")
    oSh.Name = "green"
    Exit Sub
End If

End Sub

Function FindShapeNamed(sName As String, oSl As Slide) As Shape
    Dim oSh As Shape
    For Each oSh In oSl.Shapes
        If oSh.Name = sName Then
            Set FindShapeNamed = oSh
            Exit Function
        End If
    Next
End Function 
```

# c# - 将绑定放在机器的 Web.Config 中是否明智？

> ID：14441356
> 
> 赞同：1
> 
> 时间：2013-01-21T15:01:11.303
> 
> 标签：c#, asp.net, web-config, settings

我有几个共享公共服务参考的网站，我不想在每次服务的 url 更改时都更新每个网站的 web.config 文件（不是经常发生）。所以我把这些引用放在`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\Web.Config`文件中。O对这有多聪明没有信心。

我应该用另一种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:10:41.270

只要您在所有环境中的通用 Web.Config 中都有相同的引用——例如开发（开发人员的 PC）、测试、验收/暂存，然后是生产——就可以了。

像这样的共享引用的问题是，如果你把它们放在一个集中的位置，每次你需要添加/修改/删除一个时，你必须将它作为一个单独的过程（手动？），它会影响每个应用程序。

所以我个人不提倡。我喜欢让应用程序尽可能独立。

# ios - UITabBarItem selectedImageTintColor。如何找到要设置为 tintcolor 的颜色

> ID：14441357
> 
> 赞同：1
> 
> 时间：2013-01-21T15:01:23.573
> 
> 标签：ios, cocoa-touch, uitabbaritem, tintcolor

我正在使用我的`selectedImageTintColor`属性`TabBarController`来更改选定的颜色`TabBarItem`。

问题是您设置的颜色`tintcolor`不是最终应用的颜色，在它被改变之前（它得到某种渐变）

我的问题是，是否有可能找到要应用的颜色`tintcolor`以获得您知道的最终颜色？

例如，我希望我选择的项目的最终颜色为

```
[UIColor colorWithRed:(154.0/255.0) green:(213.0/255.0) blue:(0.0) alpha:(1.0) 
```

我应该为属性设置什么颜色的 RGB `selectedImageTintColor`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:16:24.057

正如 Ankit 已经说过的，你最好的选择是使用

```
- (void)setFinishedSelectedImage:(UIImage *)selectedImage withFinishedUnselectedImage:(UIImage *)unselectedImage 
```

但是，我很欣赏你需要有一个 UIImage 才能做到这一点。如果你的设计师不能为你提供这个，你可以做的是在代码中绘制你自己的 UIImage 。

```
- (UIImage *)imageWithColor:(UIColor *)color {
    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetFillColorWithColor(context, [color CGColor]);
    CGContextFillRect(context, rect);

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

显然，这段代码不会为您绘制渐变，但它向您展示了绘制 UIImage 的基础知识。我会看一下类似下面的教程，以了解如何绘制您想要的确切渐变：

[http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T15:45:47.377

iOS 不提供修改 tint 颜色渐变的 api。但是苹果文档建议使用 setFinishedSelectedImage:withFinishedUnSelectedImage: 方法。

在 UITabBarItem 参考中查看更多信息

# c++ - C++ Xerces Parser 加载 HTML 并搜索 HTML 元素

> ID：14441359
> 
> 赞同：0
> 
> 时间：2013-01-21T15:01:28.700
> 
> 标签：c++, html, domdocument, xerces

我正在尝试使用 Xerces DOMDocument C++ 解析器加载 HTML 并搜索特定的 HTML 元素。我很难找到如何实现这一点的好例子。我似乎发现的只是解析 XML。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:07:48.197

看看这个：http: [//xerces.apache.org/xerces-c/program-dom-3.html](http://xerces.apache.org/xerces-c/program-dom-3.html)

DOMDocument 也有一个示例：

// // 创建一个小文档树 //

```
{
    XMLCh tempStr[100];

    XMLString::transcode("Range", tempStr, 99);
    DOMImplementation* impl = DOMImplementationRegistry::getDOMImplementation(tempStr, 0);

    XMLString::transcode("root", tempStr, 99);
    DOMDocument*   doc = impl->createDocument(0, tempStr, 0);
    DOMElement*   root = doc->getDocumentElement();

    XMLString::transcode("FirstElement", tempStr, 99);
    DOMElement*   e1 = doc->createElement(tempStr);
    root->appendChild(e1);

    XMLString::transcode("SecondElement", tempStr, 99);
    DOMElement*   e2 = doc->createElement(tempStr);
    root->appendChild(e2);

    XMLString::transcode("aTextNode", tempStr, 99);
    DOMText*       textNode = doc->createTextNode(tempStr);
    e1->appendChild(textNode);

    // optionally, call release() to release the resource associated with the range after done
    DOMRange* range = doc->createRange();
    range->release();

    // removedElement is an orphaned node, optionally call release() to release associated resource
    DOMElement* removedElement = root->removeChild(e2);
    removedElement->release();

    // no need to release this returned object which is owned by implementation
    XMLString::transcode("*", tempStr, 99);
    DOMNodeList*    nodeList = doc->getElementsByTagName(tempStr);

    // done with the document, must call release() to release the entire document resources
    doc->release();
}; 
```

......这么久。

编辑：

> 但是如何将 HTML 加载到 DOMDocument 并搜索 html 元素？这就是我想弄清楚的。

XercesDOMParser 解析器；

parser.loadGrammar("grammar.dtd", Grammar::DTDGrammarType);

parser.setValidationScheme(XercesDOMParser::Val_Always);

处理程序处理程序；

parser.setErrorHandler( &handler );

parser.parse("xmlfile.xml");

# jquery - jQuery-To Jquery 从 javascript

> ID：14441360
> 
> 赞同：0
> 
> 时间：2013-01-21T15:01:28.963
> 
> 标签：jquery

什么等价于

```
var input = document.getElementById("images"),
input.addEventListener("change", function (evt) {}); 
```

在 jQuery 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:02:34.120

```
$('#images').on("change",function(evt){

}); 
```

[`.on()`](http://api.jquery.com/on/)应该是您的第一个选择，如果您的 jquery < v1.7 那么您可以使用[`bind()`](http://api.jquery.com/bind/)。

更多参考：查看[jQuery API 文档](http://api.jquery.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:02:02.127

```
var input = $('#images')

input.bind("change",function(evt){

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T15:06:36.667

你可以简单地使用

```
$('#images').change(function(evt) {

}); 
```

# .net - 在 F# 中编写异步计算

> ID：14441363
> 
> 赞同：2
> 
> 时间：2013-01-21T15:01:37.490
> 
> 标签：.net, asynchronous, f#, functional-programming, computation-expression

我正在编写一个异步 HTTP API 客户端模块/库。为了使一切尽可能 DRY，我试图从进行 API 调用的不同部分组合每个 HTTP API 调用，自下而上：构建请求，获取响应，将响应读取到字符串缓冲区，解析 JSON 内容将该字符串缓冲区放入一个对象中。

到目前为止，我有这个代码：

```
module ApiUtils =
    // ... request builder fns omitted ...

    let getResponse<'a> (request : Net.WebRequest) = 
        request.AsyncGetResponse()

    let readResponse (response : Net.WebResponse) =
        use reader = new StreamReader(response.GetResponseStream())
        reader.AsyncReadToEnd()

    let getString = getResponse >> (Async.flatMap readResponse)

    let parseJson<'T> responseText : 'T =
        Json.JsonConvert.DeserializeObject<'T> responseText

    let getJson<'T> = getString >> (Async.map parseJson<'T>) 
```

而且，如您所见，我用我自己的添加扩展了 Async 模块：

```
module Async =
    let map f m =
        async {
            let! v = m
            return f v
        }

    let flatMap f m =
        async {
            let! v = m
            return! f v
        } 
```

我试图实现的目标是构建一个具有我可以在`async`块中使用的功能的模块，以利用计算表达式语法的所有优势。我想知道我是否做得对，是否选择了正确的名字，等等。我几乎没有接受过正规的函数式编程教育，有时我什至不确定我是否知道自己在做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:17:04.947

在 F# 中编写异步代码时，我发现只使用内置的计算异步工作流语法比尝试构建更复杂的组合器更容易。

在您的示例中，如果您只是编写一个简单的函数，您将不会真正复制任何代码，因此我认为以下内容不会违反 DRY 原则并且它相当简单（并且扩展代码以处理异常也很容易，这否则会很困难）：

```
let getJson<'T> (request:Net.WebRequest) = async { 
  let! response = request.AsyncGetResponse()
  use reader = new StreamReader(response.GetResponseStream())
  let! data = reader.AsyncReadToEnd()
  return Json.JsonConvert.DeserializeObject<'T> data } 
```

当然，您可以将代码拆分为`downloadData`，`getJson`如果您需要在代码的其他位置下载数据以用于其他目的。

通常，在编写函数式代码时，您有两种选择如何组合计算：

*   在普通 F# 和异步工作流中使用语言语法（例如循环`let`和`try .. with`）`use`。如果您正在编写一些计算，这种方法通常效果很好，因为该语言旨在描述计算并且可以很好地做到这一点。

*   使用自定义组合符（例如`map`，`>>`和`|>`或库特定的运算符）。如果您要对不仅仅是计算的东西进行建模，例如交互式动画、股票期权、用户界面组件或解析器，则需要这样做。但是，如果语言的基本特征不足以表达问题，我只会走这条路。

此外，您可能对[F# 数据库](http://tpetricek.github.com/FSharp.Data/index.html)感兴趣，它为各种任务实现了帮助程序，包括[HTTP 请求](http://tpetricek.github.com/FSharp.Data/docs/Http.html)、[JSON 解析](http://tpetricek.github.com/FSharp.Data/docs/JsonValue.html)和[JSON 类型提供程序](http://tpetricek.github.com/FSharp.Data/docs/JsonProvider.html)，这可能会让您的生活更加轻松。

# android - 使用来自 AESCrypt.com 的工具解密 iOS 中加密的 aes 文件

> ID：14441365
> 
> 赞同：0
> 
> 时间：2013-01-21T15:01:46.957
> 
> 标签：android, iphone, aes, encryption

我正在开发一个可以播放声音文件的应用程序。我的问题是声音文件是使用命令行工具加密的，该工具可以在[aescrypt.com](https://www.aescrypt.com/download/)上找到，只需提供文件和密码。我已经使用 aescrypt.com 上的 java 代码成功解密了 android 应用程序中的文件，但我一辈子都不能让它在 iOS 中工作。

我试图解密文件的所有字节以及不包括文件头的字节。我得到了一组字节的结果，但它不会播放，并且声音的估计长度约为实际长度的四分之一。

```
NSRange range = NSMakeRange(0, self.length);
unsigned char* encrypteddata = malloc(range.length);
[self getBytes:encrypteddata range:range];
size_t outSize;
unsigned char* result = malloc(range.length + 16);
CCCryptorStatus status = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, 0x00, decryptkey, sizeof(decryptkey), nil, encrypteddata, self.length, result, self.length + 16, &outSize);
NSData *returnData = nil;
if (status == kCCSuccess) {
    returnData = [NSData dataWithBytesNoCopy:result length:outSize];
} 
```

解密密钥只是用于加密文件的密码中的字节。

我已经研究解决方案至少一周了，但没有取得任何进展。有很多事情可以做错，有很多可能（和不可能）的组合。

**更新：** 我需要的是一个足够简单的工具，我们的客户可以使用它来加密他们端的声音文件，并且对于 Android 和 iOS 上的应用程序在另一端解密也很简单。它不需要非常安全，它只需要防止Android上的普通用户打开并播放光盘中的文件。如果 aescrypt.com 工具不适合此，我很高兴欢迎其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:16:40.523

你为什么坚持使用 AESCrypt 应用程序？他们将自定义标头写入加密文件。他们分发源代码，这将为您提供有关如何解密的足够信息（并且，您可能可以重用他们的源代码）。在 AES 加密源代码中检查他们的 AESCryptWorkerThreads.cpp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:43:06.937

AESCrypt 格式带有重要的配置信息。大多数格式在他们的网站（[aes_file_format.html](http://www.aescrypt.com/aes_file_format.html)）上有详细说明。不幸的是，此页面没有解释他们的自定义 KDF。您必须在以下位置使用或对其`encrypt_stream`功能进行逆向工程`aescrypt.c`：

```
// Hash the IV and password 8192 times
memset(digest, 0, 32);
memcpy(digest, IV, 16);
for(i=0; i<8192; i++)
{
    sha256_starts(  &sha_ctx);
    sha256_update(  &sha_ctx, digest, 32);
    sha256_update(  &sha_ctx,
                    (unsigned char*)passwd,
                    (unsigned long)passlen);
    sha256_finish(  &sha_ctx,
                    digest);
} 
```

他们不使用 CommonCryptor，所以如果你想要硬件优化的代码，你必须自己在 CommonCryptor 中重新实现这种格式。

请注意，您的解密代码没有 IV、KDF 和 HMAC，因此任何以这种方式实际加密的东西都是非常不安全的。AESCrypt 确实提供了适当的 IV 和 HMAC，它的 KDF 可能是安全的，虽然不是标准的，所以它是一个合理的选择。

# jboss - 为计时器调用超时时出错 - 在 EJB 3 timerservice 的 5 分钟内无法获得锁定

> ID：14441366
> 
> 赞同：11
> 
> 时间：2013-01-21T15:01:47.083
> 
> 标签：jboss, timer, ejb, ejb-3.0, jboss6.x

我有一个在 jboss 6.1 上运行的应用程序，它根据已经保存在数据库中的信息在启动时定义了很多 dinamyc 计时器（例如每分钟 doSomething）。计时器是根据以下信息以编程方式创建的：

```
TimerConfig timerConfig = new TimerConfig();
timerConfig.setInfo(info);
timerConfig.setPersistent(false);
Timer timer = timerService.createCalendarTimer(scheduleExpression,
            timerConfig); 
```

今天我发现创建的“每分钟”计时器不再工作了。检查昨天的日志，我发现了这个奇怪的错误（下面的完整轨迹）

```
Error invoking timeout for timer: [id=32b0902e-d1ee-4090-9938-98349a20340d timedObjectId=jboss.j2ee:ear=myear.ear,jar=myjar.jar,name=AppScheduler,service=EJB3 auto-timer?:false persistent?:false 
timerService=org.jboss.ejb3.timerservice.mk2.TimerServiceImpl@4036a060 initialExpiration=Thu Jan 17 00:00:00 GMT-02:00 2013 intervalDuration(in milli sec)=0 nextExpiration=Sun Jan 20 06:06:00 GMT-02:00 2013 timerState=IN_TIMEOUT: 
javax.ejb.ConcurrentAccessTimeoutException: EJB 3.1 PFD2 4.8.5.5.1 
concurrent access timeout on [advisedMethod=public void my.app.AppScheduler.process(javax.ejb.Timer), unadvisedMethod=public void my.app.AppScheduler.process(javax.ejb.Timer), metadata=null, targetObject=my.app.AppScheduler@97672ba, arguments=[Ljava.lang.Object;@3f661630]
- could not obtain lock within 5MINUTES
    at org.jboss.ejb3.concurrency.aop.interceptor.ContainerManagedConcurrencyInterceptor.invoke(ContainerManagedConcurrencyInterceptor.java:176) [:1.0.0-alpha-4]
    at org.jboss.aop.advice.PerInstanceInterceptor.invoke(PerInstanceInterceptor.java:86) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) [:1.7.21]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.tx.StatelessBMTInterceptor.handleInvocation(StatelessBMTInterceptor.java:100) [:1.0.4]
    at org.jboss.ejb3.tx.BMTInterceptor.invoke(BMTInterceptor.java:57) [:1.0.4]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.tx2.aop.NoOpInterceptor.invoke(NoOpInterceptor.java:45) [:0.0.2]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76) [:1.0.0.GA]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:41) [:1.7.21]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67) [:1.7.21]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47) [:1.7.21]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67) [:1.0.1]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.interceptor.EJB3TCCLInterceptor.invoke(EJB3TCCLInterceptor.java:86) [:1.7.21]
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
    at org.jboss.ejb3.singleton.aop.impl.AOPBasedInterceptorRegistry.intercept(AOPBasedInterceptorRegistry.java:111) [:1.0.2]
    at org.jboss.ejb3.singleton.impl.container.SingletonContainer.invoke(SingletonContainer.java:206) [:1.0.2]
    at org.jboss.ejb3.singleton.aop.impl.AOPBasedSingletonContainer.callTimeout(AOPBasedSingletonContainer.java:888) [:1.0.2]
    at org.jboss.ejb3.singleton.aop.impl.AOPBasedSingletonContainer.callTimeout(AOPBasedSingletonContainer.java:837) [:1.0.2]
    at org.jboss.ejb3.timerservice.mk2.task.CalendarTimerTask.callTimeout(CalendarTimerTask.java:84) [:1.0.0-alpha-13]
    at org.jboss.ejb3.timerservice.mk2.task.TimerTask.run(TimerTask.java:127) [:1.0.0-alpha-13]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [:1.6.0_24]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [:1.6.0_24]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [:1.6.0_24]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98) [:1.6.0_24]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206) [:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_24]
    at java.lang.Thread.run(Thread.java:662) [:1.6.0_24] 
```

主要问题不是单次执行的错误，而是在此问题之后计时器停止工作，并且只有在重新启动 jboss 时才会再次开始运行。有人知道防止这种行为的方法吗？异常提到了 5 分钟超时，但我看不出在哪里更改。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T15:30:36.007

这是规范中关于此异常的内容

> 4.8.5.5.1 并发访问超时
> 
> 无法立即获得适当锁的并发访问尝试将被阻止，直到它可以向前推进。@AccessTimeout 用于指定在超时之前应阻止访问尝试的时间量。访问超时仅适用于有资格在具有容器管理的并发的 Singleton bean 上获得并发锁的方法。如果访问尝试超时，容器将向客户端抛出 javax.ejb.ConcurrentAccessTimeoutException。@AccessTimeout 可以在业务方法或 bean 类（或超类）上指定。在类上指定的@AccessTimeout 将访问超时应用于该类的所有业务方法。如果在类和该类的业务方法上都指定了@AccessTimeout，则方法级别的注释优先。@AccessTimeout 值为 -1 表示客户端请求将无限期地阻塞，直到可以进行转发。@AccessTimeout 值为 0 表示不允许并发访问。对超时值为 0 的方法的访问尝试会导致 javax.ejb.ConcurrentAccessException

所以，我只包括访问超时来解决我的问题（5 分钟的默认时间是特定于供应商的）。

```
@Timeout
@AccessTimeout(value = 20, unit = TimeUnit.MINUTES)
public void process(Timer timer) {
 //code here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-01T11:50:20.280

就我而言，问题与上次突然关机有关。我删除了下面的计时器`wildfly/standalone/data/timer-service-data`并再次部署。

# mkmapview - 如何在表格视图中设置与注释的距离？

> ID：14441368
> 
> 赞同：0
> 
> 时间：2013-01-21T15:01:52.830
> 
> 标签：mkmapview, distance

我有一个应用程序可以获取网络数据并将其存储在 CD-db 中。到目前为止，FirstViewController (MKMapView) 将 CD-db 提取到 NSMutableArray 中，并通过从 db 中获取自定义对象数组来使用其值来绘制位置。在创建注释（引脚）时，我通过 for 循环循环。每个引脚从我用于从 userLocation 到每个引脚的距离的计算中获取其距离属性集。

这个应用程序在 tabbarcontroller 中运行，另一个选项卡是这些位置的 tableview 列表。我通过获取 CD-db 并在 cellForRowAtIndexPath 方法中获取数组的值并将值放入 cell.textLabel 等来获取该 tableview 的值...

我的问题是，由于从 userLocation 到每个引脚的距离是在 mapview 控制器上计算的，我如何在 tableview 控制器上获得这些距离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:37:44.930

您可以将 mapview 控制器设置为 tableview 的数据源。这样只有一个视图控制器获取数据。一旦构建了 mapview 控制器的自定义对象数组，它就可以用于响应所有 tableview 数据源调用，例如 cellForRowAtIndexpath 和 numberOfRowsInSection

# android - EditText.setError() 弹出窗口位置

> ID：14441370
> 
> 赞同：2
> 
> 时间：2013-01-21T15:01:57.513
> 
> 标签：android, android-layout, android-edittext, scrollview

我正在使用 v16 API，但在显示屏幕键盘时弹出窗口的放置位置存在问题。

第一个问题是，如果 位于`EditText`屏幕底部，当我触摸该字段以将其打开以进行编辑时，弹出窗口会显示在控件下方，并且会随着键盘的出现立即被覆盖。`EditText`在按键触发我的验证代码再次触发新值之前，它不会将自身重新定位在 之上。

第二个问题是，当我关闭键盘并且`ScrollView`包含文本从其自身定位的位置向下滚动以显示`EditText`键盘上方时，弹出窗口仍然位于屏幕的上半部分而不是在`EditText`我触摸其他东西之前的位置在屏幕上（触发 ScrollView 进行重绘？？？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:53:23.893

不幸的是，弹出窗口有这样的各种问题:(

在您的情况下，也许一个简单的解决方案是在键盘显示和关闭时强制使 UI 无效？不记得如果 EditText 无效，Popup 是否会重新定位，但值得尝试，因为替代方法可能是重新实现。

在 github 上查看我的 android-formidable-validation 库，它重新实现了......虽然有它自己的问题 - 如果你走这条路，为什么不帮我做一些贡献；）

# jsf-2 - Facelet 自定义标签仅适用于一个实体

> ID：14441381
> 
> 赞同：0
> 
> 时间：2013-01-21T15:02:31.207
> 
> 标签：jsf-2, richfaces, facelets

我定义了一个自定义标签，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:composite="http://java.sun.com/jsf/composite">

        <!-- INTERFACE -->
        <composite:interface>
            <composite:attribute name="terminal" />
            <composite:attribute name="prefix" />
        </composite:interface>

        <!-- IMPLEMENTATION -->
        <composite:implementation>
            <h:panelGrid columns="3" columnClasses="titleCell">
                <h:outputLabel for="#{prefix}nodeId" value="Node Id" />
                <h:selectOneMenu id="#{prefix}nodeId"
                    value="#{cc.attrs.terminal.nodeId}"
                    converter="javax.faces.Integer">
                    <f:selectItems
                        value="#{terminalController.availableNodeIds}" />
                    <rich:validator />
                </h:selectOneMenu>
                <rich:message for="#{prefix}nodeId" id="cnodeIdMsg" />

                <h:outputLabel for="#{prefix}maxcon" value="Max Connections" />
                <h:inputText id="#{prefix}maxcon"
                    value="#{cc.attrs.terminal.maxConnections}">
                    <rich:validator />
                </h:inputText>
                <rich:message for="#{prefix}maxcon" />
            </h:panelGrid>
        </composite:implementation>
</html> 
```

当我在 Rich:popupPanel 中使用它时

```
 <my:terminalForm prefix="c" terminal="#{newTerminal}"/> 
```

一切正常。

在同一个文件的另一个地方（也丰富：popupPanel）

```
 <my:terminalForm prefix="e" terminal="#{terminalController.editTerminal}"/> 
```

我表单中的所有值都没有被初始化。我怀疑表达式`#terminalController.editTerminal}`没有正确扩展。但是当我从自定义标签显式编写标签时

```
 <h:inputText id="#{prefix}maxcon"
                value="#{terminalController.editTerminal.maxConnections}">
                <rich:validator />
 </h:inputText> 
```

一切都可以正常工作，但是仅将自定义标签用于一次扩展将毫无意义。

有什么问题？

有没有更有经验的人知道我如何调试这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:21:00.873

cc.attrs 在前缀前面缺少？！

# android - 将JSON数据插入android中的SQLite数据库

> ID：14441382
> 
> 赞同：8
> 
> 时间：2013-01-21T15:02:32.107
> 
> 标签：android, json, sqlite, android-sqlite, sqliteopenhelper

我想将 JSON 数组中的数据插入 SQLite 数据库。我创建了两个类 CategoryHelper.java 和 AndroidJSONParsingActivity.java 来获取 java 响应。当我运行代码时，`databaseHelper.saveCategoryRecord(id,name);`我的 API 中的异常工作正常并给了我数据。

我的代码如下：

CategoryHelper.java

```
package com.androidhive.jsonparsing;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class CategoryHelper {
    private static final int DATABASE_VERSION = 2;
    private static final String DATABASE_NAME = "category.db";
    private static final String TABLE_NAME = "tbcategory";
    public static final String CATEGORY_COLUMN_ID = "_id";
    public static final String CATEGORY_COLUMN_NAME = "name";
    Category openHelper;
    private SQLiteDatabase database;

    public CategoryHelper(Context context){
        openHelper = new Category(context);
        database = openHelper.getWritableDatabase();
    }
    public void saveCategoryRecord(String id, String name) {
        ContentValues contentValues = new ContentValues();
        contentValues.put(CATEGORY_COLUMN_ID, id);
        contentValues.put(CATEGORY_COLUMN_NAME, name);
        database.insert(TABLE_NAME, null, contentValues);
        }
    public Cursor getTimeRecordList() {
        return database.rawQuery("select * from " + TABLE_NAME, null);
        }
    private class Category extends SQLiteOpenHelper {

        public Category(Context context) {
            // TODO Auto-generated constructor stub
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL("CREATE TABLE " + TABLE_NAME + "( "
                    + CATEGORY_COLUMN_ID + " INTEGER PRIMARY KEY, "
                    + CATEGORY_COLUMN_NAME + " TEXT )" );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS"+ TABLE_NAME);
            onCreate(db);
        }

    }
} 
```

AndroidJSONParsingActivity.java

```
package com.androidhive.jsonparsing;
import java.util.ArrayList;
import java.util.HashMap;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidJSONParsingActivity extends ListActivity {

    // url to make request
    private static String url="API TO GET THE DATA";
    // JSON Node names
    private static final String TAG_CATEGORY = "categories";
    private static final String TAG_CATEGORY_ID = "category_id";
    private static final String TAG_NAME = "name";
    private static final String TAG_IS_ACTIVE = "is_active";
    // contacts JSONArray
    JSONArray contacts = null;
    private CategoryHelper databaseHelper;
    //private SQLiteDatabase mydatabase = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CATEGORY);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_CATEGORY_ID);
                String name = c.getString(TAG_NAME);
                String  is_active = c.getString(TAG_IS_ACTIVE);

                databaseHelper.saveCategoryRecord(id,name);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_CATEGORY_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_IS_ACTIVE, is_active);
                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME, TAG_IS_ACTIVE, TAG_CATEGORY_ID }, new int[] {
                        R.id.name, R.id.email, R.id.mobile });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_NAME, name);
                in.putExtra(TAG_IS_ACTIVE, cost);
                in.putExtra(TAG_CATEGORY_ID, description);
                startActivity(in);

            }
        });

    }

} 
```

日志猫：

```
01-21 20:13:49.226: E/AndroidRuntime(301): FATAL EXCEPTION: main
01-21 20:13:49.226: E/AndroidRuntime(301): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.AndroidJSONParsingActivity}: java.lang.NullPointerException
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.os.Looper.loop(Looper.java:123)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-21 20:13:49.226: E/AndroidRuntime(301):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 20:13:49.226: E/AndroidRuntime(301):  at java.lang.reflect.Method.invoke(Method.java:521)
01-21 20:13:49.226: E/AndroidRuntime(301):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-21 20:13:49.226: E/AndroidRuntime(301):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-21 20:13:49.226: E/AndroidRuntime(301):  at dalvik.system.NativeStart.main(Native Method)
01-21 20:13:49.226: E/AndroidRuntime(301): Caused by: java.lang.NullPointerException
01-21 20:13:49.226: E/AndroidRuntime(301):  at com.androidhive.jsonparsing.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:65)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-21 20:13:49.226: E/AndroidRuntime(301):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

请指导我如何将 JSON 数组数据插入数据库或我做错了什么。每一个反应都是可观的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T15:06:55.120

你忘记在使用它之前初始化 Activity`databaseHelper`中的对象。`oncreate`

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        databaseHelper=new CategoryHelper(AndroidJSONParsingActivity.this);
        //your code here.......... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T15:06:37.447

你永远不会实例化`databaseHelper`. 您不能在空对象上调用方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-23T17:30:57.717

这里还有一个小问题：

```
db.execSQL("DROP TABLE IF EXISTS"+ TABLE_NAME); 
```

EXISTS 后您忘记了空格字符。它应该看起来像这样：

```
db.execSQL("DROP TABLE IF EXISTS "+ TABLE_NAME); 
```

# c# - Process.Close() 不关闭程序

> ID：14441387
> 
> 赞同：3
> 
> 时间：2013-01-21T15:02:40.147
> 
> 标签：c#

这是一个简单的程序：

```
class Program {

    static void Main(string[] args) {

        Process pr = new Process();
        ProcessStartInfo prs = new ProcessStartInfo();
        prs.FileName = @"notepad.exe";
        pr.StartInfo = prs;
        pr.EnableRaisingEvents = true;
        pr.Start();

        Thread.Sleep(2000);

        pr.Close(); //how do I change this to close notepad

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }
} 
```

如何更改此设置以便记事本关闭？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:04:13.267

根据 MSDN，[`Process.Close()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)简单地说：

> 释放与此组件关联的所有资源。

看看[`Process.Kill()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)和[`Process.CloseMainWindow()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)

对于这个应用程序，我会使用：

```
pr.CloseMainWindow();
pr.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:05:49.580

尝试使用[`Process.CloseMainWindow()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)方法而不是。

> 通过向其主窗口发送关闭消息来关闭具有用户界面的进程。

试试这样；

```
Process pr = new Process();
ProcessStartInfo prs = new ProcessStartInfo();
prs.FileName = @"notepad.exe";
pr.StartInfo = prs;
pr.EnableRaisingEvents = true;
pr.Start();

Thread.Sleep(2000);

pr.CloseMainWindow();
pr.Close();

Console.WriteLine("press [enter] to exit");
Console.ReadLine(); 
```

# java - 如何使用 Java API 确定文件是 32 位还是 64 位？

> ID：14441389
> 
> 赞同：0
> 
> 时间：2013-01-21T15:02:52.377
> 
> 标签：java

我有一个正在上传的文件（一个 *.wim 文件，可以是 32 位或 64 位 - WAIK/WADK）。

wim 文件被复制到一个位置。

之前我们只支持 32 位，但现在为了 UEFI，我们需要同时支持 32 位（用于 BIOS）和 64 位（用于 UEFI）。

现在，上传完成后，目的是基于文件类型，我会将其复制到 32 位或 64 位文件夹。

如何区分它？

PS：删除了 win 标签，因为这更像是对文件类型的一般确定，而不是 WIM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:02:36.067

如果我们不考虑 WIM 问题，只考虑找到编译 exe 文件（Portable Executable）的架构，这相对简单：

*   该文件必须以两个字节 0x4d、0x5a 开头，相当于字符串“MZ”的 ASCII 编码。
*   在偏移量 0x3c 处，读取 4 字节 little-endian 编码以获得 PE 标头的偏移量。
*   在偏移“PE header”处，您应该检查四个字节 0x50、0x45、0x00、0x00，相当于字符串“PE\0\0”的 ASCII 编码。
*   紧跟在 PE 头之后，您会发现一个 20 字节长的 COFF 文件头。机器类型在 COFF 标头的前两个字节中编码（小端）。

与您的情况相关的可能是机器类型 0x014c (i386) 和 0x8664 (AMD64)。

[有关更多详细信息，您可以在此处](http://msdn.microsoft.com/library/windows/hardware/gg463125)从 Microsoft 获取 PE 规范。2.3.1 节列出了不同的机器类型。

您可能还对检查 COFF 标头的特征字段（最后两个字节）以将文件标识为可执行文件（而不是例如 DLL 文件）感兴趣。

# bash - 将 bash 函数转换为 csh 别名时出错

> ID：14441390
> 
> 赞同：0
> 
> 时间：2013-01-21T15:02:52.830
> 
> 标签：bash, unix, csh, tcsh

我正在编写一个 csh 别名，以便可以在我的 csh 中使用以下 bash 函数：

```
function up( )
{
    LIMIT=$1
    P=$PWD
    for ((i=1; i <= LIMIT; i++))
    do
        P=$P/..
    done
    cd $P
    export MPWD=$P
} 
```

[（我从这里](https://stackoverflow.com/questions/188162/what-is-the-most-useful-script-youve-written-for-everyday-life/188560#188560)偷了上面的 bash 函数）

我写了这个：

```
alias up 'set LIMIT=$1; set P=$PWD; set counter = LIMIT;  while[counter!=0] set counter = counter-1; P=$P/.. ; end cd $P; setenv MPWD=$P' 
```

但是，我收到以下错误：

```
while[counter!=0]: No match.
P=/net/devstorage/home/rghosh/..: Command not found.
end: Too many arguments. 
```

而且我的脚本没有按预期工作。我从[这里](http://faculty.plattsburgh.edu/jan.plaza/computing/help/tcsh.htm)开始阅读 csh 。

我不是 csh 专家，我上面写的是我的第一个 csh 脚本。请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:08:34.293

你也可以这样做

```
alias up 'cd `yes ".." | head -n\!* | tr "\n" "\/"`' 
```

`yes ".."``..`将无限期地重复字符串；`head`将在调用别名时将其截断为作为参数传递的数字（`!*`扩展为传递的参数；类似于`$@`）`tr`并将换行符转换为`/`.

激进7的回答似乎更简洁；但仅适用于 tcsh （正是您想要的）。无论外壳如何，这都应该有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:10:39.993

你可以使用csh的`repeat`功能

```
alias up 'cd `pwd``repeat \!^ echo -n /..`' 
```

不需要循环（这很方便，因为`while`tcsh 中的构造看起来非常挑剔）

# java - 具有行跨度和列跨度的自定义网格视图

> ID：14441394
> 
> 赞同：5
> 
> 时间：2013-01-21T15:03:15.840
> 
> 标签：java, android, gridview, scroll, html-table

我正在尝试实现一个具有如下图形视图的网格视图。我浏览了各种博客和 SO 问题，不幸的是我无法为一个特定的网格项提供行和列跨度，并且网格视图也不支持此功能。而且我不想创建动态滚动视图与其他视图之间，因为有很多数据，它会导致性能问题。所以如果有人有任何建议。请回复 。提前致谢。 ![在此处输入图像描述](../Images/cd003267be396d2e1a198a98c44e749a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-10T15:35:34.200

这是您所有问题的解决方案：[https](https://github.com/felipecsl/AsymmetricGridView) ://github.com/felipecsl/AsymmetricGridView 是的，我厌倦了 Android 没有这样的类并自己编写了它。希望它对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T11:16:05.923

您是否打算为可滚动视图重复该模式？更清楚地说，您的跨度较大的 Grid 项目是否定期重复？

一种选择是使用列表视图，并将具有两个普通视图的大跨度视图实现为列表视图的一行，带有“special_row”等标签，并将常规视图实现为另一行，带有“普通行”标签。根据要求，您可以通过访问行标签来回收行。

编辑：

我找到了一个实现 pinterest 的库，比如 android 的 UI。这有一个对称的观点。结帐[PinterestLisView](https://github.com/vladexologija/PinterestListView)。

编辑：

[这](https://gist.github.com/2834492)是另一种有趣的技术，通过为网格项指定列跨度和行跨度。我从[这个问题](https://stackoverflow.com/questions/10812552/heterogeneous-gridlayout)中得到。我想您可以通过以编程方式指定列和行跨度来取消网格项的静态 xml 声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T07:04:41.523

这是 3 列网格的特殊解决方案，其中包含跨越 2x2 网格的特色项目。

```
public class GridAdapter extends ArrayAdapter<GridAdapter.GridItem> {
    public GridAdapter(Context context, int itemViewResId, List<String> things) {
        super(context, itemViewResId, buildGridItems(things));
    }

    /**
     * Assumes 3 column layout. A list of indices that shows a large
     * item on the right of 1st row, then alternating on every 3rd row 
     * to the left and then right. The large item should occupy a 2x2 grid.
     *
     *   X O O
     *   X O O
     *   X X X
     *   X X X
     *   O O X
     *   O O X
     *   X X X
     *   X X X
     *   X O O
     *   X O O
     *   X X X
     *
     * The indices where the large featured items are in item list is 
     * 1, 9, 19, 27, 37, 45, 55, ...         
     */
    protected static List<Integer> getFeaturedIndex(int total) {
        int pos = 1;
        ArrayList<Integer> index = new ArrayList<Integer>();
        if (pos + 1 < total) {
            index.add(pos);
        }
        for (int i = 0; pos < total; i++) {
            int inc = i % 2 == 0 ? 8 : 10;
            pos += inc;
            if (pos + 1 < total) {
                index.add(pos);
            }
        }
        return index;
    }

    protected static List<GridItem> buildGridItems(List<String> things) {
        ArrayList<GridItem> items = new ArrayList<GridItem>();
        List<Integer> featuredIndex = getFeaturedIndex(things.size());
        ArrayList<GridItem> featured = new ArrayList<GridItem>();
        for (int i = 0, k = things.size(); i < k; i++) {
            GridItem item = new GridItem(things.get(i));
            if (featuredIndex.contains(i)) {
                item.feature = true;
                featured.add(item);
            }
            items.add(item);
        }
        for (GridItem feature : featured) {
            int index = items.indexOf(feature);
            GridItem shim = new GridItem(feature.getModel());
            shim.shim = true;
            items.add(index + 1, shim);
            items.add(index + 3, shim);
            items.add(index + 4, shim);
        }
        return items;
    }

    @Override
    public int getItemViewType(int position) {
        return getItem(position).shim ? 0 : 1;
    }

    @Override
    public int getViewTypeCount() {
        return 2;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = new View(getContext());
        }
        GridItem item = getItem(position);
        if (item.feature) {
            convertView.setLayoutParams(new LayoutParams(400,300));
        } else {
            convertView.setLayoutParams(new LayoutParams(200,150));
        }
        if (item.shim) {
            convertView.setVisibility(View.GONE);
        }
        return convertView;
    }

    public static class GridItem {
        private String mItem;
        private boolean shim = false;
        private boolean feature = false;

        public GridItem(String item) {
            mItem = item;
        }
    }
} 
```

这个想法是用 GridItem 包装项目列表，并使用 a`feature`和`shim`标志来确定视图的行为方式。

该方法`getFeaturedIndex()`计算原始列表中的哪些项目应具有特色。然后在`buildGridItems()`我们采取2个步骤。首先，标记所有特色项目（并保留这些项目的列表）。之后，对于这些特色项目中的每一个，相对于特色项目添加 3 个垫片（+1、+3 和 +4）。

在`getView()`特征项目中，我们将适当的尺寸设置为正常项目的 2x2。对于垫片项目，将可见性设置为`GONE`。

# php - 在 codigniter 会话中存储数组数组

> ID：14441396
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:03:21.783
> 
> 标签：php, codeigniter

我在[CodeIgniter](http://en.wikipedia.org/wiki/Codeigniter#CodeIgniter)模型中有一个查询，例如：

```
$query = $this->db->get('subscriber'); 
```

上述查询结果返回 474 行。

现在我想以表格格式在我的视图中迭代这些值，因此我将这些值存储在[PHP](http://en.wikipedia.org/wiki/PHP)本机会话中，例如：

```
 $_SESSION['list'] = $query; 
```

但是当我在视图中迭代这个循环时，我没有得到想要的结果。

```
The value of $_SESSION['conn_id'] is '0'
The value of $_SESSION['result_id'] is '0'
The value of $_SESSION['result_array'] is 'Array'
The value of $_SESSION['result_object'] is 'Array'
The value of $_SESSION['custom_result_object'] is 'Array'
The value of $_SESSION['current_row'] is '0'
The value of $_SESSION['num_rows'] is '474'
The value of $_SESSION['row_data'] is '' 
```

使用时

```
foreach($_SESSION['list'] as $key=>$value)
{
        echo 'The value of $_SESSION['."'".$key."'".'] is '."'".$value."'".' <br />';
} 
```

我知道这不是这样做的方法。如何在 CodeIgniter 视图中访问 quesryset 结果？

我们可以直接使用查询集数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:08:37.993

你通常会做的是这样的

```
//model.php
class Subsrciber_Model extends CI_Model
{ 
    public function get_subscribers() 
    {
        return $this->db->get('subscriber');
    }
}

//controller.php
class Subscribers extends CI_Controller 
{
    public function subscribers()
    {
        $this->model->load('Subscriber_Model');
        $data = $this->Subscriber_model->get_subscribers();
        $this->load->view('view', $data);
    }
}

//view.php
<div>
    <?php foreach ($data->result() as $row): ?>
       <p><?=$row->conn_id?></p>
    <? endforeach; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:20:39.067

尝试这个：

```
$query = $this->db->get('subscriber')->result_array(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:20:59.393

您确定从查询中返回了一个数组吗？从您的输出`SESSION`看来，您将对象视为数组。

尝试在您的模型中执行此操作

```
$query = $this->db->get('subscriber')->result_array(); 
```

# android - 如何让动画效果在活动之间持续存在？

> ID：14441398
> 
> 赞同：1
> 
> 时间：2013-01-21T15:03:31.800
> 
> 标签：android, android-layout, android-animation

我已经在我的项目中成功地使用了动画，带有 TranslateAnimation 对象，但是当我返回视图已被动画化的活动时，它们会在默认位置重绘。

所以，例如，

1.  我创建了一个名为 HomeActivity 的活动。内容按照 XML 中的定义绘制。视图 (myTextView) 可能出现在位置 0。

2.  我可以使用 TranslateAnimation 将 myTextView 移动到 position1。

3.  我可以单击一个按钮（或其他任何东西）来启动，比如说，MenuActivity。

4.  我退出 MenuActivity 并恢复 HomeActivity。

**（我所看到的）**
myTextView 再次出现在 position0 处。

**（我想看到的）**
myTextView 绘制在位置 1。

这是我执行动画的方式。

```
TextView myTextview = (TextView)findViewById(R.id.mytextview);

private void animate()
{
Animation anim = new TranslateAnimation(0, displacementX, 0, displacementY);
anim.setDuration(200);
anim.setAnimationListener(this); // This activity implements AnimationListener
anim.setFillEnabled(true);
anim.setFillAfter(true);
myTextview.startAnimation(anim);
}

@Override
public void onAnimationEnd( Animation animation )
{
 myTextview.clearAnimation();
} 
```

是否有任何我应该设置的标志（可能在上述过程中、onPause 或 onAnimationEnd 中）会导致视图保持其动画后状态？或者我是否需要在开始新活动之前保存他们的位置并将它们转移到 onResume 中？还是完全有另一种方式？

如果您需要任何澄清，请告诉我。

忘了说明，最低 SDK 为 2.2 (API 8)。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:08:59.300

首先，不要使用`TranslateAnimation`它，尝试使用`ObjectAnimator`它实际移动视图。当使用`TranslateAnimation`视图时永远不会改变位置，它只是看起来如此。如果这还不够，请尝试将视图的位置保存在`onSaveInstanceState`其中，`onRestoreInstanceState`您可以将视图定位到此位置。

# java - 休眠连接错误：org.hibernate.hql.ast.HqlSqlWalker.createFromJoinElement 处的 NullPointerException

> ID：14441407
> 
> 赞同：5
> 
> 时间：2013-01-21T15:04:01.440
> 
> 标签：java, hibernate

我在我的项目（小吃店）中创建了这个 hql，以搜索所有将用户选择的产品作为参数的订单：

```
select order from Order order, OrderItem item 
inner join order.cod_order_item as item 
inner join item.cod_product as cod_product 
where cod_product = id 
```

但是，当我运行 createQuery() 时，会在 org.hibernate.hql.ast.HqlSqlWalker.createFromJoinElement 处给出一个空指针。

我究竟做错了什么？

下面，这是我的代码：

OrderDAO.java

```
public class OrderDAO {

    private Session session;

    public PedidoDAO(Session session){
        this.session = session;
    }

    public List<Order> getAllOrderFromProduct(Product product{

        String hql = "select order from Order order, OrderItem item " +
                "inner join order.order_item_id as item " +
                "inner join item.product_id as product_id " +
                "where product_id = '"+ product.getId() + "'";

        Configuration cfg = new Configuration();

        SessionFactory factory = cfg.configure().buildSessionFactory();

        Session session = factory.openSession();

        Query query = session.createQuery(hql); 

        List result = query.list();

        return result;
    }

} 
```

Order.java（实体）

```
@Entity
public class Order{

    @Id
    @GeneratedValue
    private Long order_id;

    @Column(name="order_date", nullable=false, length=15)
    private Date data;

    @Column(name="order_total", nullable=false, length=8)
    private double total;

    /* Relacionamentos */

    @Column(name="employee_id", nullable=false, length=8)
    private Long employee_id;

    @Column(name="customer_id", nullable=false, length=8)
    private Long customer_id;

    @Column(name="order_item_id", nullable=false, length=8)
    private Long order_item_id;

    public Long getId() {
        return order_id;
    }

    public void setId(Long order_id) {
        this.order_id= order_id;
    }

    public Date getOrderDate() {
        return order_date;
    }

    public void setOrderDate(Date order_date) {
        this.order_date = order_date;
    }

    public double getTotal() {
        return total;
    }

    public void setTotal(double total) {
        this.total = total;
    }

    public Long getFuncionario() {
        return cod_funcionario;
    }

    public void setEmployee(Long employee_id) {
        this.employee_id= employee_id;
    }

    public Long getCustomer() {
        return customer_id;
    }

    public void setCustomer(Long customer_id) {
        this.customer_id= customer_id;
    }

    public Long getOrderItem() {
        return order_item_id;
    }

    public void setOrderItem(Long order_item_id) {
        this.order_item_id= order_item_id;
    }

} 
```

我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<hibernate-configuration>

<session-factory>

    <property name="connection.url">jdbc:mysql://localhost:3306/lanchonete_db</property>

    <property name="connection.username">root</property>
    <property name="connection.password"></property>

    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>

    <!-- Enable Hibernate's automatic session context management -->
    <property name="hibernate.current_session_context_class">thread</property>

    <!-- this will show us all sql statements -->
    <property name="hibernate.show_sql">true</property>

    <!-- mapping files -->

    <mapping class="gigabyte.bean.Customer" />
    <mapping class="gigabyte.bean.Address"/>
    <mapping class="gigabyte.bean.Employee" />
    <mapping class="gigabyte.bean.Order"/>
    <mapping class="gigabyte.bean.OrderItem" />
    <mapping class="gigabyte.bean.Product"/>
    <mapping class="gigabyte.bean.Phone" />

    </session-factory>

   </hibernate-configuration> 
```

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:51:34.423

I found my error! I forgot to reference the annotation @ManyToMany in relationship table on Order.java, then the Hibernate tried to get the relationship between the two tables and found nothing. Now, works fine with this query, based on @axtavt answer:

```
select order from Order order, OrderItem item
inner join order.order_item as item
where item.cod_product = id 
```

My Order.java corrected:

```
@Entity
   public class Order{

    @Id
    @GeneratedValue
    private Long order_id;

    @Column(name="order_date", nullable=false, length=15)
    private Date data;

    @Column(name="order_total", nullable=false, length=8)
    private double total;

    /* Relationships*/

    @Column(name="employee_id", nullable=false, length=8)
    private Long employee_id;

    @Column(name="customer_id", nullable=false, length=8)
    private Long customer_id;

    @ManyToMany(targetEntity=OrderItem.class, fetch=FetchType.LAZY)
    @Fetch(FetchMode.SUBSELECT)
    @JoinTable(name = "order_order_item", joinColumns = { @JoinColumn(name = "cod_order") }, 
    inverseJoinColumns = { @JoinColumn(name = "cod_item") })
        public Set<OrderItem> setOrderItem = new HashSet<OrderItem>();

    public Long getId() {
       return order_id;
    }

    public void setId(Long order_id) {
       this.order_id= order_id;
    }

    public Date getOrderDate() {
       return order_date;
    }

    public void setOrderDate(Date order_date) {
       this.order_date = order_date;
    }

    public double getTotal() {
       return total;
    }

    public void setTotal(double total) {
       this.total = total;
    }

    public Long getFuncionario() {
       return cod_funcionario;
    }

    public void setEmployee(Long employee_id) {
       this.employee_id= employee_id;
    }

    public Long getCustomer() {
       return customer_id;
    }

    public void setCustomer(Long customer_id) {
       this.customer_id= customer_id;
    }

    public Set<OrderItem> getOrderItem() {
       return orderItem;
    }

    public void setOrderItem(Set<OrderItem> orderItem) {
       this.orderItem= orderItem;
    }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:32:48.900

您当然不需要显式添加`OrderItem`，`from`因为它已经被添加`join`：

```
select order from Order order 
inner join order.cod_order_item as item 
inner join item.cod_product as cod_product 
where cod_product = id 
```

# asp.net-mvc-3 - 在 MVC3 中，如何通过 ActionLink 将多个值传递给查询字符串参数？

> ID：14441409
> 
> 赞同：3
> 
> 时间：2013-01-21T15:04:07.290
> 
> 标签：asp.net-mvc-3, url, parameters, query-string, actionlink

在我的 MVC3 项目中，我有一个控制器“测试”，使用这种方法进行索引操作

```
Function Index(fields() As String) As ViewResult
... 
```

然后在视图上我有一个多选下拉列表

```
@Html.ListBox("fields", New MultiSelectList(my_list, "Value", "Text")) 
```

一切正常，但是当我尝试创建一个 Actionlink 时，像这样在查询字符串中传递参数“字段”的多个值

```
@Html.ActionLink("TestLink", "Index", New With {
         .fields = "value1&fields=value2"}) 
```

我在带有查询字符串编码的 HTML 源代码中得到以下断开的链接

```
<a href="/Test/Index?fields=value1%26fields%3Dvalue2">TestLink</a> 
```

如何通过 ActionLink 将多个值传递给查询字符串参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:12:44.620

If you want to do this dynamically by fetching the values from the listbox simply put the listbox inside a form whose action is pointing the controller action you want to invoke and then use a submit button. HTML will then do the job for you.

If you want to generate an ActionLink you could use the following:

```
@Html.ActionLink(
    "TestLink", 
    "Index", 
    New RouteValueDictionary() From { 
        { "fields[0]", "value1" }, 
        { "fields[1]", "value2" } 
    }
) 
```

# c++ - 函数签名作为模板参数

> ID：14441410
> 
> 赞同：13
> 
> 时间：2013-01-21T15:04:08.977
> 
> 标签：c++, templates, c++11

是否有可能实现这样的目标：

```
template<typename Signature>
class Test
{
    public:
        //here I want operator () to respect the signature
};

Test<void(int)>          t1; //void operator()(int)
Test<void(int, float)>   t2; //void operator()(int, float) 
```

返回类型始终为`void`。

我想将函数签名作为模板参数发送。这可能吗？我不能使用可变参数模板，因为我的编译器还不支持这个功能。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T15:06:42.330

使用可变参数模板，您可以进行部分专业化以将签名分解为其部分：

```
template<typename Signature>
class Test;
// or the SFINAE-friendlier
//template<typename Signature>
//class Test {};
// or the hard-error-friendlier
//template<typename Signature>
//class Test {
//    static_assert(Bool<false, Signature>{},
//                  "template argument must be a signature returning void");
// // Bool is from http://flamingdangerzone.com/cxx11/2012/05/29/type-traits-galore.html#dependent_boolean
//};

template<typename... Args>
class Test<void(Args...)>
{
    public:
        void operator()(Args...) const;
}; 
```

如果没有可变参数模板，您必须为每个数量的参数进行一个特化。宏可能有助于生成所有这些（Boost.PP，或者可能是 Visual Studio 用来在标准库中模拟可变参数模板的那些）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-21T15:13:54.527

```
template <class Ty>
class Test; /* not defined */
template <class Ret, class Arg0>
class Test<Ret(Arg0)> { /* whatever */ }
template <class Ret, class Arg0, class Arg1>
class Test<Ret(Arg0, Arg1)> { /* whatever */ }
template <class Ret, class Arg0, class Arg1, class Arg2>
class Test<Ret(Arg0, Arg1, Arg2)> { /* whatever */ } 
```

Continue the tedious repetition until you have enough arguments for your needs. In TR1 it was recommended that the various function object templates be able to handle 10 arguments. This was typically implemented with fairly sophisticated macros to simplify coding, but it can be done by brute force.

# python - python和shell都可以读取的配置文件

> ID：14441412
> 
> 赞同：8
> 
> 时间：2013-01-21T15:04:13.687
> 
> 标签：python, bash, shell, configuration, debian

我在同一个文件夹中有 python 脚本和 shell 脚本，它们都需要配置。我目前有一个 config.py 用于我的 python 脚本，但我想知道是否可以有一个配置文件，它可以被 python 脚本和 shell 脚本轻松读取。

谁能举一个最适合python和shell读取的配置文件格式的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:06:26.120

我认为最简单的解决方案是：

```
key1="value1"
key2="value2"
key3="value3" 
```

在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中，你只需要获取这个 env 文件，在 Python 中，它很容易解析。

周围不允许有空格`=`

对于 Python，请参阅这篇文章：[Emulating Bash 'source' in Python](https://stackoverflow.com/questions/3503719/emulating-bash-source-in-python)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-16T10:20:43.620

**configobj** lib 可以帮助解决这个问题。

```
from configobj import ConfigObj
cfg = ConfigObj('/home/.aws/config')
access_key_id = cfg['aws_access_key_id']
secret_access_key = cfg['aws_secret_access_key'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:07:31.423

这在 shell 和 python 中都有效：

```
NUMBER=42
STRING="Hello there" 
```

你还需要什么？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-23T20:28:20.697

保留“config.py”而不是“config.sh”会导致一些漂亮的代码。

*配置文件*

```
CONFIG_VAR = "value"
CONFIG_VAR2 = "value2" 
```

*脚本.py*：

```
import config

CONFIG_VAR = config.CONFIG_VAR
CONFIG_VAR2 = config.CONFIG_VAR2 
```

*脚本.sh*：

```
CONFIG_VAR="$(python-c 'import config;print(config.CONFIG_VAR)')"
CONFIG_VAR2="$(python-c 'import config;print(config.CONFIG_VAR2)')" 
```

另外，这比尝试像 Gilles 回答所要求的那样“在 Python 中模拟 Bash '源'”要清晰得多。

# xcode - 如何使用 ApplescriptObjC 从 Xcode 中的滑块获得持续反馈？

> ID：14441413
> 
> 赞同：0
> 
> 时间：2013-01-21T15:04:27.907
> 
> 标签：xcode, slider, applescript-objc

我是 ApplescriptObjC 的新手，如果您继续阅读，您可能会看到。我想知道如何从滑块中获得持续的反馈，以便一旦它的值为 1，它就会运行脚本 A，而一旦它的值更改为 0，它就会运行脚本 B。

我知道您可以对按钮进行操作，例如：

在 buttonClicked_(sender) 上做动作结束 buttonClicked_

但是我怎样才能有一个不断检查滑块值的变化并采取适当行动的人呢？是否类似于使用 getStringValueFrom() 将滑块连接到文本框？

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:41:04.360

发现如何！

原来 action_(sender) 也适用于滑块。无论是否存在更改，它们每次单击并释放项目时都会发送信号。然后它是一个简单的 if 语句，根据滑块设置的值运行两个不同系列的操作。

# sbt - SBT插件如何依赖另一个插件

> ID：14441416
> 
> 赞同：22
> 
> 时间：2013-01-21T15:04:37.750
> 
> 标签：sbt

我想编写一个依赖于另一个插件（“io.spray”%%“sbt-twirl”%“0.6.0”）的插件“MyPlugin”。

简单地在 libraryDependencies 中添加 sbt-twirl 是行不通的，因为插件使用与标准库不同的路径方案发布。

我也不能将 sbt-twirl 声明为 MyPlugin 项目的插件依赖项，因为 MyPlugin 不直接使用 sbt-twirl，而是使用 MyPlugin 的项目将间接使用它。

MyPlugin 提供了一个任务，该任务旨在在 sbt-twirl 生成它的源代码（在 sourceManaged 中）和编译之后运行。

一个简单但不理想的解决方案是要求使用 MyPlugin 的项目也将 sbt-twirl 声明为插件依赖项，但它不是 DRY，因为这两个插件将共享一些设置（目录、版本等），它们将必须重复和兼容。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-22T13:36:01.170

它应该与使用插件作为插件的定义相同，除了它进入`build.sbt`或`project/Build.scala`代替`project/plugins.sbt`：

```
addSbtPlugin("io.spray" % "sbt-twirl" % "0.6.0") 
```

# php - 如何将 PHP 添加到我的 html 表中？

> ID：14441425
> 
> 赞同：-5
> 
> 时间：2013-01-21T15:05:06.510
> 
> 标签：php, html, filesystems

我需要在我的 html 文件中实现这个 PHP，这会转到一个目录检查那里的文件并创建一个带有这些选项的组合框......现在我怎样才能在我的 html 代码中的特定位置调用它。

```
<?php
$dir = 'xml/';

$exclude = array('somefile.php', 'somedir');

// Check to see if $dir is a valid directory
if (is_dir($dir)) {
  $contents = scandir($dir);

  echo '<select class="dropdown-toggle" id="combo">';

  foreach($contents as $file) {
  // This will exclude all filenames contained within the $exclude array
  // as well as hidden files that begin with '.'
  if (!in_array($file, $exclude) && substr($file, 0, 1) != '.') {
  echo '<option>'. $file .'</option>';
  }
  }

  echo '</select>';
  }
  else {
  echo "The directory <strong>". $dir ."</strong> doesn't exist.";
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:09:56.607

您可以创建一个包含在 php 中生成的选择并使用 javascript 加载数据的 div，例如 jquery：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:11:23.030

你的意思是这样的吗？

```
<html>
...
<?php include('codesnippet.php') ?>
...
</html> 
```

还是其他方式（在 HTML 文档中显示代码）？

```
<pre>
  <code>
    <!-- your snippet goes here, with escaped characters -->
  </code>
</pre> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:11:27.863

您可以将您的 php 插入到您希望此选择元素出现的任何位置的 html 页面中。假设您的服务器将为 php 标签解析一个 html 文件（这是非常标准的），那么它将像那样工作。如果没有，请尝试将您的 .html 文件重命名为 .php。

我建议将您的 php 保存在一个单独的文件中（即 generate_select.php），然后将其包含在您希望的任何位置，就像这样；

```
<table>
<tr>
<td>
<?php include('generate_select.php'); ?>
</td>
</tr>
</table> 
```

您可以随时使用 php 开始和结束标记插入和退出 php 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:11:59.147

好的，首先，您不要*将 PHP 放入 HTML*中。

PHP 在服务器端处理，HTML 在客户端处理。

这意味着浏览器将 HTML 拼凑在一起时，PHP 已经被处理过了。

从我所见，您希望将 [您所回显的内容] 放入 HTML 元素中...

```
<?php
$dir = 'xml/';
$output;

$exclude = array('somefile.php', 'somedir');

// Check to see if $dir is a valid directory
if (is_dir($dir)) {
  $contents = scandir($dir);

  $output .= '<select class="dropdown-toggle" id="combo">';

  foreach($contents as $file) {
  // This will exclude all filenames contained within the $exclude array
  // as well as hidden files that begin with '.'
  if (!in_array($file, $exclude) && substr($file, 0, 1) != '.') {
  $output .= '<option>'. $file .'</option>';
  }
  }

  $output .= '</select>';
  }
  else {
  $output .= "The directory <strong>". $dir ."</strong> doesn't exist.";
  }
?> 
```

看看我是如何用 替换回声的`$output .=`？PHP 现在将这些字符串附加到`$output`变量中。然后可以在页面上的任何位置输出该 $variable。IE：

```
<table>
<tr>
<td>
<?php echo $output ?>
</td>
</tr>
</table> 
```

你也应该知道，`include()`但我不会解释，因为人们已经做出了相应的回答。

# java - 如何将图像标准化为间隔 0 到 1

> ID：14441427
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:05:27.210
> 
> 标签：java, image-processing, jai

> **可能重复：**
> [如何标准化图像？](https://stackoverflow.com/questions/695084/how-do-i-normalize-an-image)

我正在使用梯度矢量流实现活动轮廓。我需要在 0 到 1 的区间内对输入图像进行归一化不幸的是，我不知道如何在 JAVA 或 JAI 中执行此操作。如果您可以帮助我提供一些代码或一些可以帮助我的链接，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:09:12.560

如果你想使用已经存在的库，我可以推荐[ImageJ](http://rsbweb.nih.gov/ij/)，它有一套很好的图像处理算法。您可以在[这个 SO question](https://stackoverflow.com/q/3501811/1137043)中找到更多信息。

如果您想自己实现它，那很容易。在一次运行中找到图像的最大值和最小值，然后再次运行它，重新调整每个点。

# jsf - richfaces 3.3.3 rich:calendar 如何将输入字段设置为今天的日期？

> ID：14441430
> 
> 赞同：0
> 
> 时间：2013-01-21T15:05:40.280
> 
> 标签：jsf, richfaces

我有以下代码：

```
 <rich:calendar id="DocFromDate" locale="bg" firstWeekDay="1"
                 value="#{ioPageBeanParam.editBean.data['DocFromDate']}"
                 datePattern="dd.MM.yyyy HH:mm" /> 
```

这将显示空输入字段和日历图标。我想用今天的日期预先填写输入字段。

搜索槽[文档richfaces 3.3.3](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_calendar.html)

但是没有找到获取和设置currentDate的方法。这个组件有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:22:12.637

在你的bean中初始化它。在 bean 的构造函数中将值设置为今天。

# r - 如何传递列变量来应用函数？

> ID：14441431
> 
> 赞同：3
> 
> 时间：2013-01-21T15:05:41.403
> 
> 标签：r

我有这个`data.frame`：

```
 id  |  amount1  | amount2  |  day1  |  day2
 ---------------------------------------------
  A   |    10     |    32    |   0    |   34
  B   |    54     |    44    |   8    |   43
  C   |    45     |    66    |   16   |   99    

df <- data.frame(id=c('A','B','C'), amount1=c(10,54,45), amount2=c(32,44,66),  day1=c(0,8,16), day2=c(34,43,99)) 
```

我想要`apply`一个函数

```
df$res <-  apply(df, 1, myfunc) 
```

在哪里

```
myfunc <- function(x,y) sum(x) * mean(y) 
```

只有我想将列变量作为参数传递给函数，所以它基本上应该读取

```
 apply(df, 1, myfunc, c(amount1, amount2), c(day1, day2)) 
```

对于第一行，这是

```
myfunc(c(10,32),c(0,34))
# [1] 714 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:36:08.987

`data.table`解决方案。

```
require(data.table)
dt <- data.table(df) # don't depend on `id` column as it may not be unique
# instead use 1:nrow(dt) in `by` argument
dt[, res := myfunc(c(amount1,amount2), c(day1, day2)), by=1:nrow(dt)]
> dt
#    id amount1 amount2 day1 day2    res
# 1:  A      10      32    0   34  714.0
# 2:  B      54      44    8   43 2499.0
# 3:  C      45      66   16   99 6382.5 
```

当您有很多`days`列要使用of 并与of and`mean`相乘时，我会以这种方式进行操作，而不使用. 但是如果你真的需要一个函数，它应该很容易实现。`sum``amount1``amount2``myfunc`

```
# dummy example
set.seed(45)
df <- data.frame(matrix(sample(1:100, 200, replace=T), ncol=10))
names(df) <- c(paste0("amount", 1:2), paste0("day", 1:8))
df$idx <- 1:nrow(df) # idx column for uniqueness

# create a data.table
require(data.table)
calc_res <- function(df) {
    dt <- data.table(df)
    # first get the mean
    id1 <- setdiff(names(dt), grep("day", names(dt), value=TRUE))
    dt[, res := rowMeans(.SD), by=id1]
    # now product of sum(amounts) and current res
    id2 <- setdiff(names(dt), names(dt)[1:2])
    dt[, res := sum(.SD) * res, by=id2]
}
dt.fin <- calc_res(df) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:23:47.697

像这样：

```
df$res <- apply(df, 1, function(x) myfunc(as.numeric(x[c("amount1", "amount2")]),
                                          as.numeric(x[c("day1", "day2")]))) 
```

但考虑`plyr::adply`作为替代方案：

```
library(plyr)
adply(df, 1, transform, res = myfunc(c(amount1, amount2), c(day1, day2)))
#   id amount1 amount2 day1 day2    res
# 1  A      10      32    0   34  714.0
# 2  B      54      44    8   43 2499.0
# 3  C      45      66   16   99 6382.5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:13:16.993

这适用于您的示例。也许相同的技术可以用于真正的问题：

```
> apply(df[-1], 1, function(x) myfunc(x[1:2], x[3:4]))
## [1]  714.0 2499.0 6382.5 
```

正如 florel 所指出的，最好使用其中一项子集操作的名称，以确保只有这些列用于应用。需要一个子集来防止传递的向量`apply`被转换为字符，并且明确指定列意味着数据框中的附加列不会导致此问题。

```
apply(df[c("amount1", "amount2", "day1", "day2")], 1, 
      function(x) myfunc(x[1:2], x[3:4])
     ) 
```

在实践中，我更有可能编写如下代码：

```
amount <- c("amount1", "amount2")
day    <- c("day1", "day2")

df$res <- apply(df[c(amount, day)], 1, function(x) myfunc(x[amount], x[day])) 
```

# r - 试图绘制日期范围

> ID：14441438
> 
> 赞同：0
> 
> 时间：2013-01-21T15:06:06.403
> 
> 标签：r, plot

我有 19 个标签，它们在整个夏季和秋季的不同时间部署和报告。目前我正在尝试创建一个图来显示部署和报告的时间，以便我可以可视化数据收集中的重叠位置。我尝试了几种不同的绘图函数，包括 plot()、boxplot() 和 ggplot()。我已经接近我想要的 boxplot() 但希望盒子从开始日期延伸到结束日期并完全消除胡须。有没有办法做到这一点，或者我应该使用不同的功能或包？这是我的代码，它可能不是最有效的，因为我对 R 有点陌生。

注意：tnumber 只是我使用的标签号。这些日期都取自不同的数据集。

```
dep.dates=boxplot(t62104[,8],t40636[,8],t84337[,8],t84353[,8],t62103[,8],
                  t110289[,8],t62102[,8],t62105[,8],t62101[,8],t84360[,8],
                  t117641[,8],t40643[,8],t110291[,8],t84338[,8],t110290[,8],
                  t84363[,8],t117639[,8],t117640[,8],t117638[,8],horizontal=T,
                  main='Tag deployment and pop-up dates',xlab='Month',
                  ylab='Tag number',names=c('62104','40636','84337','84353',
                  '62103','110289','62102','62105','62101','84360','117641',
                  '40643','110291','84338','110290','84363','117639','117640',
                  '117638'),las=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:31:08.640

如果你只关心范围，这样的事情会起作用。

```
require(ggplot2)

require(SpatioTemporal)

data(mesa.data.raw)

require(data.table)

out <- as.data.table(t(apply(mesa.data.raw$obs, 2, function(.v){ 
    names(.v)[range(which(!is.na(.v)))]
})),keep=TRUE)

setnames(out, "rn", "monitors")

ggplot(out, aes(x=monitors, y=V1, ymin=V1, ymax=V2,)) + geom_crossbar() + coord_flip()
ggplot(out, aes(x=monitors, ymin=V1, ymax=V2)) + geom_linerange() + coord_flip() 
```

第一个 ggplot 调用创建了水平条，但我不知道如何摆脱中心线，所以我把它放在开头。

第二个情节创建了水平线，我认为无论如何看起来更好。

# objective-c - 隐藏@synthesize

> ID：14441443
> 
> 赞同：0
> 
> 时间：2013-01-21T15:06:27.520
> 
> 标签：objective-c, xcode, code-organization

首先让我说我不确定这是属于这里还是属于超级用户。我从这里开始。

现在，我是一个很整洁的人，我喜欢折叠的方法，这样我就可以很容易地走动。然而，让我恼火的一件事是，我所有的`@synthesize`命令总是在那里。我看不出有什么办法可以折叠它们。（我有 50 多个属性要合成）有没有办法可以隐藏这些命令，同时又不会弄乱我的构建。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:12:34.167

不幸的是，从“可用功能”的角度来看，`XCode`它是一个非常古老的 IDE。因此没有可折叠的代码区域 - 请参阅详细讨论[Xcode 区域](https://stackoverflow.com/questions/288508/xcode-regions)

另请注意，对于最新的编译器 (LLVM 4.0)，声明`@synthesize`是可选的。您可以在项目设置的编译器设置中启用/禁用它。但是，如果您使用 GCC 或较旧的 LLVM 版本（无论出于何种原因），这是不可能的。

编辑：重读你的问题后......在一类中有50个属性闻起来很糟糕。考虑将您的班级分成几个较小的班级。

您也可以将`@synthesize`命令放在`@implementation`文件末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:11:55.753

从 Xcode 4.4 开始，`@synthesize`如果你不想给它取另一个名字，你就不需要属性——它使用[auto synthesise](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)。

# vim - 如何仅对中指定的模块执行某些命令 ?

> ID：14441444
> 
> 赞同：3
> 
> 时间：2013-01-21T15:06:28.080
> 
> 标签：vim

我想执行`MyCommand`需要访问`b:somevar`由`<afile>`. 现在我正在做类似的事情

```
function F()
    let l:a = bufnr(expand("%"))
    let l:b = bufnr(expand("<afile>"))
    execute "bufdo call G(" . l:b . ")"
    execute "buffer " . a
endfunction

function G(d)
    let l:a = bufnr(expand("%"))
    if l:a == a:d
        execute 'MyCommand'
    endif
endfunction

autocmd BufDelete *.hs :call F() 
```

因此，`F()`检查每个加载的缓冲区是否是`<afile>`. 它有效，但感觉相当疯狂，应该有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:06:09.627

当`MyCommand`只需要访问`b:somevar`（可能是通过 缓冲区内容`getbufline()`）时，它可以使用`getbufvar(expand('<abuf>'), 'somevar')`.

* * *

另一方面，如果它需要直接对缓冲区执行命令，则需要在窗口中临时显示缓冲区，如下所示：

```
function! ExecuteInVisibleBuffer( bufnr, command )
    let l:winnr = bufwinnr(a:bufnr)
    if l:winnr == -1
        " The buffer is hidden. Make it visible to execute the passed function.
        let l:originalWindowLayout = winrestcmd()
            execute 'noautocmd silent keepalt leftabove sbuffer' a:bufnr
        try
            execute a:command
        finally
            noautocmd silent close
            silent! execute l:originalWindowLayout
        endtry
    else
        " The buffer is visible in at least one window on this tab page.
        let l:currentWinNr = winnr()
        execute l:winnr . 'wincmd w'
        try
            execute a:command
        finally
            execute l:currentWinNr . 'wincmd w'
        endtry
    endif
endfunction 
```

# java - 为 grails webflow 控制器使用方法或闭包？

> ID：14441451
> 
> 赞同：0
> 
> 时间：2013-01-21T15:06:41.440
> 
> 标签：java, grails, groovy

显然**，因为 grails 2.0 方法被推荐用于控制器操作的闭包之上**。当我触摸它们时，我一直在将它们转换到我正在维护的应用程序中。它应该**节省一些 permgen**空间。我现在遇到了一个 webflow 控制器，当我将它们转换为方法时**（[根据文档](http://grails.org/doc/2.0.x/ref/Plug-ins/web%20flow.html)）** ，当您导航到该方法定义的 url 时，grails 会返回 404 页面。

这是不一致还是我在做一些愚蠢的事情？

```
 def uploadFlow() {
        onStart {
            // do stuff
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:53:02.803

我相信 webflow 定义必须是闭包，而不是方法。

它在这里提到：http: [//jira.grails.org/browse/GRAILS-7958](http://jira.grails.org/browse/GRAILS-7958)

该条目已有 18 个月的历史，但我相信情况仍然如此（我也遇到了这个问题，同时试图将我的所有 Controller 闭包更改为方法）。

# javascript - 如何使用 Twitter Bootstrap API 检测您正在使用的设备视图？

> ID：14441456
> 
> 赞同：61
> 
> 时间：2013-01-21T15:07:09.333
> 
> 标签：javascript, twitter-bootstrap, device-detection

我刚刚开始为我即将推出的一个项目使用 Twitter Bootstrap API。主导航包含 3 个主要元素：

*   网站导航
*   社交链接导航
*   搜索网站表格

在移动设备上查看网站时，我正在使用折叠插件折叠网站导航和搜索表单。移动视图有 2 个按钮，单击这些按钮可以打开/关闭搜索表单或主导航。

但是，如果我关闭搜索表单，然后将浏览器大小调整为桌面视图，搜索表单是否仍隐藏在此视图中？

我已经阅读了有关使用可见移动等类的信息，但这些似乎与折叠插件发生冲突。我也意识到我可能会编写自己的 CSS hack 来解决这个问题，但我想我会问是否有更简单的解决方案。

Bootstrap 有显示、显示、隐藏和隐藏的事件，所以我想也许我可以编写一些自定义 JS，在每个特定的设备视图中显示或隐藏这些项目。但是我当时不知道如何检测我正在使用的设备。

想法？

提前致谢

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2013-03-01T04:15:57.203

如果你想知道你所处的环境，请尝试使用 Bootstrap 自己的 CSS 类。创建一个元素，将其添加到页面，应用它的辅助类并检查它是否隐藏以确定这是否是当前环境。以下函数就是这样做的：

# 引导程序 4

```
function findBootstrapEnvironment() {
    let envs = ['xs', 'sm', 'md', 'lg', 'xl'];

    let el = document.createElement('div');
    document.body.appendChild(el);

    let curEnv = envs.shift();

    for (let env of envs.reverse()) {
        el.classList.add(`d-${env}-none`);

        if (window.getComputedStyle(el).display === 'none') {
            curEnv = env;
            break;
        }
    }

    document.body.removeChild(el);
    return curEnv;
} 
```

* * *

# 引导程序 3

```
function findBootstrapEnvironment() {
    var envs = ['xs', 'sm', 'md', 'lg'];

    var $el = $('<div>');
    $el.appendTo($('body'));

    for (var i = envs.length - 1; i >= 0; i--) {
        var env = envs[i];

        $el.addClass('hidden-'+env);
        if ($el.is(':hidden')) {
            $el.remove();
            return env;
        }
    }
} 
```

* * *

# 引导程序 2

```
function findBootstrapEnvironment() {
    var envs = ['phone', 'tablet', 'desktop'];

    var $el = $('<div>');
    $el.appendTo($('body'));

    for (var i = envs.length - 1; i >= 0; i--) {
        var env = envs[i];

        $el.addClass('hidden-'+env);
        if ($el.is(':hidden')) {
            $el.remove();
            return env;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-08-20T15:25:27.450

基于 @Raphael_ 和 @user568109 的答案，在 Bootstrap 3 中，现在内置了响应式。

要在 Javascript 中检测设备类型，请使用 Bootstrap 的响应类创建一个仅在所需设备上显示的对象。然后检查它的`:hidden`属性。

例子：

1.  创建一个`<div>`没有任何内容的面板，该面板将显示在任何比 eXtra Small 设备更大的设备上（感谢@Mario Awad）：

    ```
    <div id="desktopTest" class="hidden-xs"></div> 
    ```

    **或者**，排除特定设备：

    ```
    <div id="desktopTest" class="visible-sm visible-md visible-lg"></div> 
    ```

2.  检查值`#desktopTest`：

    ```
    if ($('#desktopTest').is(':hidden')) {
        // device is == eXtra Small
    } else {
        // device is >= SMaller 
    } 
    ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-30T11:17:08.410

**原始答案**：
基于@Alastair McCormack 的回答，我建议您使用此代码

```
<div class="visible-xs hidden-sm hidden-md hidden-lg">xs</div>
<div class="hidden-xs visible-sm hidden-md hidden-lg">sm</div>
<div class="hidden-xs hidden-sm visible-md hidden-lg">md</div>
<div class="hidden-xs hidden-sm hidden-md visible-lg">lg</div> 
```

只需将它添加到容器 div 的末尾，您将获得有关当前视图的简单动态信息。

**更新 (2019-03-03)**：
以前的代码与 Bootstrap 4 不兼容，因为所有`hidden-*`和`visible-*`类已被删除。在这里，您有可以使用的新代码，与 Bootstrap 3 和 Bootstrap 4 版本兼容（一些功劳归于[这个 SO 答案](https://stackoverflow.com/questions/45666656/bootstrap-4-responsive-utilities-visible-hidden-xs-sm-lg-not-working/51683904#51683904)）：

```
<div class="visible-xs hidden-sm hidden-md hidden-lg hidden-xl d-block d-sm-none">xs</div>
<div class="hidden-xs visible-sm hidden-md hidden-lg hidden-xl d-none d-sm-block d-md-none">sm</div>
<div class="hidden-xs hidden-sm visible-md hidden-lg hidden-xl d-none d-md-block d-lg-none">md</div>
<div class="hidden-xs hidden-sm hidden-md visible-lg hidden-xl d-none d-lg-block d-xl-none">lg</div>
<div class="hidden-xs hidden-sm hidden-md hidden-lg visible-xl d-none d-xl-block">xl</div> 
```

你可以用[这个 fiddle](https://jsfiddle.net/dzuwsb0m/)测试它。

请注意，我也包括在内`hidden-xl`，`visible-xl`但我相信任何 Bootstrap 版本都没有真正使用它们。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-10T14:19:25.880

我最初[在这里发布了答案，](https://stackoverflow.com/a/37141090/4354249) **Bootstrap v.4.x**的解决方案。

# Twitter Bootstrap 4.1.x 的 JS 断点检测

**Bootstrap v.4.0.0**（以及最新版本的Bootstrap **4.1.x**）引入了更新的[网格选项](https://getbootstrap.com/docs/4.0/layout/grid/#grid-options)，因此旧的检测概念可能无法直接应用（参见[迁移说明](https://getbootstrap.com/docs/4.0/migration/#grid-system)）：

*   在下方添加了一个新的`sm`网格层`768px`以进行更精细的控制。我们现在有`xs`, `sm`, `md`, `lg`, 和`xl`;
*   `xs`网格类已修改为不需要中缀。

我编写了尊重更新的网格类名称和新的网格层的小型实用程序函数：

```
/**
 * Detect the current active responsive breakpoint in Bootstrap
 * @returns {string}
 * @author farside {@link https://stackoverflow.com/users/4354249/farside}
 */
function getResponsiveBreakpoint() {
    var envs = {xs:"d-none", sm:"d-sm-none", md:"d-md-none", lg:"d-lg-none", xl:"d-xl-none"};
    var env = "";

    var $el = $("<div>");
    $el.appendTo($("body"));

    for (var i = Object.keys(envs).length - 1; i >= 0; i--) {
        env = Object.keys(envs)[i];
        $el.addClass(envs[env]);
        if ($el.is(":hidden")) {
            break; // env detected
        }
    }
    $el.remove();
    return env;
}; 
```

## Bootstrap v4-beta 的 JS 断点检测

最新的**Bootstrap v4-alpha**和**Bootstrap v4-beta**在网格断点上有不同的方法，所以这里是实现相同的传统方法：

```
/**
 * Detect and return the current active responsive breakpoint in Bootstrap
 * @returns {string}
 * @author farside {@link https://stackoverflow.com/users/4354249/farside}
 */
function getResponsiveBreakpoint() {
    var envs = ["xs", "sm", "md", "lg"];
    var env = "";

    var $el = $("<div>");
    $el.appendTo($("body"));

    for (var i = envs.length - 1; i >= 0; i--) {
        env = envs[i];
        $el.addClass("d-" + env + "-none");;
        if ($el.is(":hidden")) {
            break; // env detected
        }
    }
    $el.remove();
    return env;
} 
```

我认为它会很有用，因为它很容易集成到任何项目中。它使用 Bootstrap 本身的原生[响应式显示类](https://getbootstrap.com/docs/4.0/utilities/display/#hiding-elements)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-06T16:21:07.753

我的答案是使用类似于@Raphael_ 提出的机制，但是，您可以用它做更多的事情。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/22885503/2066118)以及最新版本的项目[github 存储库。](https://github.com/maciej-gurban/responsive-bootstrap-toolkit)

断点检测示例：

```
if ( viewport.is('xs') ) {
  // do stuff in the lowest resolution
} 
```

在窗口调整大小时执行代码（在几毫秒内不发生多次）：

```
$(window).bind('resize', function() {
    viewport.changed(function() {

      // do some other stuff!

    })
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-05T19:57:32.387

利基案例，但您可以将@Kar.ma 应用于安装了 Chameleon（引导皮肤）的 Mediawiki。将 DIV 的“结果”作为模板参数传递，然后在模板中对其进行测试。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-07T20:10:22.903

结合上面的答案，这个对我有用：

```
function findBootstrapDeviceSize() {
  var dsize = ['lg', 'md', 'sm', 'xs'];
  for (var i = dsize.length - 1; i >= 0; i--) {

    // Need to add &nbsp; for Chrome. Works fine in Firefox/Safari/Opera without it.
    // Chrome seem to have an issue with empty div's
    $el = $('<div id="sizeTest" class="hidden-'+dsize[i]+'">&nbsp;</div>');
    $el.appendTo($('body'));

    if ($el.is(':hidden')) {
      $el.remove();
      return dsize[i];
    }
  }

  return 'unknown';
} 
```

# .net - 为什么无法从 IIS 获得 SOAP 1.2 响应

> ID：14441458
> 
> 赞同：1
> 
> 时间：2013-01-21T15:07:13.657
> 
> 标签：.net, web-services, soap

我使用 C# 设置了一个 Web 服务，并在 IIS 6 中发布它，SOAP 1.2 请求和响应应该是这样的：

SOAP1.2 请求

```
POST /WebServices/EUWS.asmx HTTP/1.1
Host: 10.30.178.81
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <Add xmlns="http://www.eutesttools.com">
      <num1>double</num1>
      <num2>double</num2>
    </Add>
  </soap12:Body>
</soap12:Envelope> 
```

SOAP1.2 响应

```
HTTP/1.1 200 OK
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <AddResponse xmlns="http://www.eutesttools.com">
      <AddResult>double</AddResult>
    </AddResponse>
  </soap12:Body>
</soap12:Envelope> 
```

但实际上当我发布这个请求时：

```
Content-Type    application/soap+xml

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
    <soap12:Body>
        <Add xmlns="http://www.eutesttools.com">
        <num1>3</num1>
        <num2>5</num2>
    </Add>
</soap12:Body>
</soap12:Envelope> 
```

然后我总是得到这样的回应：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <AddResponse xmlns="http://www.eutesttools.com">
        <AddResult>8</AddResult>
    </AddResponse>
</soap:Body>
</soap:Envelope> 
```

为什么我无法得到所描述的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:11:51.237

这*是*正确的反应。前缀无关紧要。

# php - 将奇数字符编码转换回 utf-8

> ID：14441460
> 
> 赞同：0
> 
> 时间：2013-01-21T15:07:25.260
> 
> 标签：php, utf-8, character-encoding

我有一个充满字符串的数据库，其中包含奇怪的字符，例如：

```
Design Tattoo Ãœbungshaut

MehrflÃ¤chiges Biozid Reinigungs- & Desinfektionsmittel 
```

`Ãœ`据我了解， and`Ã¤`应该在哪里，`Ü`以及`Ã`何时在适当的`UTF-8`.

是否有标准功能可以将这些多个字符恢复为正确的`UTF-8`形式？

在`PHP`我遇到过`$url = iconv('utf-8', 'iso-8859-1', $url);`似乎接近但不足的情况。也许我有错误的参数，但无论如何我只是想知道这个问题有多了解以及是否有既定的修复？

原始数据取自电子商务系统`CubeCart`，将其转换回普通文本似乎没有问题，仅供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:14:30.393

作为示例显示的数据是 UTF-8 编码数据，被错误地解释为 ISO-8859-1（或 windows-1252）。问题组合实际上是“Ü”和“ä”（德语中没有“Ā”）。所以显然你需要做的是将数据读取为 UTF-8 并以这种方式显示，而不是转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:47:41.713

如果数据库和输出是 utf-8，可能是因为您没有使用 utf-8 作为客户端字符集。

如果您使用 mysqli，您可以使用[set_charset](http://php.net/manual/en/mysqli.set-charset.php)或`SET NAMES utf8`在获取数据之前作为查询运行。

# c# - 子字符串编译但代码不起作用

> ID：14441463
> 
> 赞同：-9
> 
> 时间：2013-01-21T15:07:30.330
> 
> 标签：c#, substring

当我使用下面的代码时，它会编译，但其余代码似乎不起作用。当我取出其中的 Substring 部分时，它确实如此。

-脚步

```
String theDate, theWeekDay;     
if (ToTime(Time[0]) == ToTime(0, 0, 0))         
{
   theDate=ToDay(Time[0]).ToString().Substring(0,3);
   theWeekDay=Time[0].DayOfWeek.ToString().Substring(4,8);
   DrawTextFixed("day",theWeekDay, TextPosition.BottomRight);
   DrawText("day"+Convert.ToString(ToDay(Time[0])),
   theWeekDay+" "+theDate,0, Low[0]-TickSize*20, Color.Blue);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:09:41.140

您没有提供足够的信息来解决您的问题，但如果您只是想以缩写格式获取星期几的名称，请改用：

```
theWeekDay = Time[0].ToString("ddd"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:09:32.100

除非您省略了部分代码，否则您的分配不会发生在类定义或方法中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T15:11:39.707

您将不得不提供的不仅仅是这段代码。您通过索引器访问的时间对象是什么？您是否对此进行了调试以查看是否`Time[0]`确实具有价值？我的猜测是`Time[0]`它不会返回`DayOfWeek`可以使用的值，因此`Substring(0,3)`正在针对空字符串或`null`值运行

# assembly - 装配地址：标签与绝对地址

> ID：14441464
> 
> 赞同：0
> 
> 时间：2013-01-21T15:07:31.253
> 
> 标签：assembly, mips, smips

我正在编写要在 HDL 定义的处理器上运行的简单 SMIPS 组装测试。

例如，我有以下代码应该生成溢出异常：

```
main:

        #Test Overflow Exception

        addi $2, $0, 0xffffffff
        addi $3, $2, 0x1 
```

我知道如果处理器做正确的事情，它应该重定向到放置在 address 的处理程序`0xdeadbeef`。我只知道为跳转添加标签，就像在上面添加以下代码一样：

```
overflowHandler: 
        addiu $5 $0, 1
        bne   $0, $5, pass 
```

有没有办法让 overflowHandler 代码从正确的 0xdeadbeef 地址开始？main 是否从地址 0 开始？

**编辑：（我可以控制 HDL 中描述的处理器的跳转地址）**

由于我可以从 Bluespec 中的处理器设计描述中控制处理器跳转地址，因此我可以将其更改为可被 4 整除并跳转到更近更方便的位置。所以我的问题是：地址是否从 main 开头的地址 0x0 开始计数？什么是最好的解决方案？: 改地址跳转，还是标签来对应呢？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:30:30.990

由于您的处理器是在 Bluespec 中建模的，因此似乎要执行的代码将使用 Verilog 的[$readmemh()](http://www.ee.ed.ac.uk/~gerard/Teach/Verilog/manual/Extras/memory.html)函数加载到处理器的内存中，该函数读取包含内存内容的文本文件。由 Bluespec 模型创建者决定将代码加载到哪个地址，使用`$readmemh()`函数的参数和文本文件中的地址说明符。

创建包含内存内容的文本文件的最简单方法是通过 MIPS 汇编器运行汇编源代码，并从汇编器的源代码列表中提取十六进制操作码。

问题：“地址是否从地址 0x0 开始计数？”

`0x1cf00000`MIPS 处理器在复位时开始执行代码。（一个[简单的 MIPS](http://csg.csail.mit.edu/6.884/handouts/labs/smips-spec.pdf)处理器在`0x00001000`它被复位时开始。）您通常会在复位地址处跳转到测试程序的开头。如果您加载要在地址执行的测试程序`0x0`，`JR $zero`应该可以工作。

测试程序中的分支都应该指向相对地址，因此您不需要做任何特殊的事情来指定测试代码中标签的地址。如果您需要为 PASS 和 FAIL 分支到已知位置，请执行以下操作（假设 PASS 位于 address `0x4000`）：

```
LI $t0, 0x4000
JR $t0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:54:01.317

这个问题回答的不是很清楚。通常，某些标签的地址由汇编器（和/或链接器）自动分配，并取决于许多因素。

汇编器总是有一些指令允许程序员在一定程度上控制代码和标签在地址空间中的位置。“org”指令通常用于设置汇编过程的当前地址。

在大多数汇编程序中，以下代码会将标签 overflowHandler 设置为等于 0xdeadbeef。

```
 org 0xdeadbeef ; or any other number
overflowHandler:   
                  ; some code here 
```

但同样，它取决于特定的汇编器语法（通常，它们在不同的实现中是不同的）。另一个问题是即使正确编译，代码也必须加载到正确地址的内存中。这个任务不是汇编任务，而是链接器的任务，操作系统也依赖于使用的二进制文件格式。

请注意，在大多数操作系统中，程序员不能自由选择加载某些二进制文件的地址。

此处正确的方法是仔细学习用于项目的工具 - 汇编器语法（我的意思是汇编器指令，而不是处理器指令）、链接器功能、使用的二进制格式以及将加载此代码以执行的操作系统功能。

# java - 如何在 Eclipse 中使用自动完成添加完全限定名称

> ID：14441466
> 
> 赞同：9
> 
> 时间：2013-01-21T15:07:32.233
> 
> 标签：java, eclipse, javadoc

如何在 Eclipse 中使用自动完成添加完全限定名称？

为了避免声纳/检查样式（未使用的导入）问题，我们制定了在 Javadoc 中使用完全限定名称的策略。

我正在寻找一种仍在使用自动完成的方法。使用自动完成时按 Shift 键之类的东西？

始终使用完全限定名称更改设置不是一种选择，仅在 Javadoc 注释中需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:17:49.823

作为解决问题的方法，您可以将 Eclipse 配置为在保存文件时自动删除不必要的导入（窗口 - 首选项 - Java - 编辑器 - 保存操作 - 配置，然后在“不必要的代码”选项卡中，确保选中“*删除未使用的导入*” ）。完成此操作后，您可以在 checkstyle 中删除未使用导入的检查。

我同意这不是您所要求的，但至少您仍然可以让您没有未使用的导入（假设您团队中的每个人都以相同的方式配置 Eclipse）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:42:21.847

我认为您正在寻找此处描述的答案：

[在文档中包括完全限定名称](https://stackoverflow.com/questions/9748493/including-fully-qualified-name-in-documentation)

“转到窗口 -> 首选项 -> Java -> 代码样式 -> 代码模板。选择注释 -> 类型。编辑并在此处添加以下行：${package_name}.${type_name}。”

这会将您的 Javadoc 更改为在生成时使用完全限定名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T17:13:00.550

`Java Compiler -> Javadoc`您必须在 Eclipse 的 Java 编译器（最上面的复选框）中禁用 Javadocs 处理，请参见此处：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=26792#c10](https://bugs.eclipse.org/bugs/show_bug.cgi?id=26792#c10)

如果我禁用它，当我在 Javadocs 中自动完成类名时，我会得到完全限定的名称。

# mongodb - MongoDB是否有每次插入和删除的日志

> ID：14441470
> 
> 赞同：0
> 
> 时间：2013-01-21T15:07:44.770
> 
> 标签：mongodb

我想知道 mongodb 是否有每次插入和删除的日志？IE。监控或备份功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:14:29.920

默认情况下，仅记录耗时较长的查询。但是，您可以使用分析级别 2 记录每个查询。 [请参阅此处了解更多详细信息](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/#profiling-levels)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:19:20.703

您实际上可以创建一个非常详细的写入和读取日志以及所有这些。

当您实际运行时，`mongod`您可以定义一个：[http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--diaglog](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--diaglog)参数，当设置为 1 时将记录每个写入操作，包括插入和删除.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:19:28.703

看oplog。它可能是您正在寻找的东西。

[docs.mongodb.org](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)

[www.briancarpio.com](http://www.briancarpio.com/2012/04/21/mongodb-the-oplog-explain/)

# android - 关于我的定位后台服务的问题

> ID：14441474
> 
> 赞同：0
> 
> 时间：2013-01-21T15:07:49.030
> 
> 标签：android, android-service

今天我做了我的第一个后台服务，如果我退出我的应用程序，它会继续运行。

它正在记录纬度和经度。

我想在我的代码中**添加更多功能**，我想请你帮忙，我应该以哪种方式继续编码，**我已经做好了吗？**

我使用**Activity，使用**从后台服务获取消息的处理程序：

```
public class MyActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_act);

    BackgroundLocationService.context=this;

    Intent i = new Intent(this, BackgroundLocationService.class);
    i.putExtra("handler", new Messenger(this.handler));
    startService(i);
            /*.......more code here......*/
}

    Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        // get data from msg
        String result = msg.getData().getString("result");
        Log.i("Activiti map: Locationing Service handler: ", 
                          "get data: " + result);
        super.handleMessage(msg);
    }
}; 
```

**这是我的后台服务：**

```
public class BackgroundLocationService extends IntentService {

private static final String TAG = "Activiti map: Locationing Service";

private LocationManager locManager;
private LocationListener locListener = new MyLocationListener();
public static Context context;

private boolean gps_enabled = false;
private boolean network_enabled = false;

private boolean DEBUG=false;

private String latitude="0";
private String londitude="0";

Messenger messenger;
Timer t=new Timer();

public BackgroundLocationService()
{
    super("myintentservice");

    locManager = (LocationManager) context.getSystemService
                                   (Context.LOCATION_SERVICE);
    try {
        gps_enabled = 
                    locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {
        if(DEBUG)
        Log.e(TAG, ex.toString());
    }
    try {
        network_enabled = 
                locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
        if(DEBUG)
        Log.e(TAG, ex.toString());
    }

    if (gps_enabled) {
        if(DEBUG)
        Log.i(TAG, "Gps is Enabled!");
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                     0, 0, locListener);
    } else {
        if(DEBUG)
        Log.i(TAG, "Gps is Disabled!");
    }
    if (network_enabled) {
        if(DEBUG)
        Log.i(TAG, "Network provider is enabled!");

                   locManager.requestLocationUpdates
                        (LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
    } else {
        if(DEBUG)
        Log.i(TAG, "Network provider is Disabled!");
    }
}

@Override
protected void onHandleIntent(Intent intent) {
    messenger=(Messenger) intent.getExtras().get("handler");

    t.schedule(new TimerTask() {

        @Override
        public void run() {
            // just call the handler every 3 Seconds

            Message msg=Message.obtain();
            Bundle data=new Bundle();
            data.putString("result", "latitude: " + latitude+
                           " londitude: "+londitude);
            msg.setData(data);

            try {
                messenger.send(msg);
            } catch (RemoteException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }, 100,3000);

}

class MyLocationListener implements LocationListener {

    private static final String TAG = "Activiti map: LocationListener";

    public void onLocationChanged(Location location) {

        if (location != null) {
            locManager.removeUpdates(locListener);

            londitude = Double.toString(location.getLongitude());
            latitude = Double.toString(location.getLatitude());

            if(DEBUG)
            Log.i(TAG, "Londitude: " + londitude + " Latitude: " + latitude);

        }
    }

    public void onProviderDisabled(String arg) {
        if(DEBUG)
        Log.i(TAG, "Provider just Disabled: " + arg);
    }

    public void onProviderEnabled(String arg) {
        if(DEBUG)
        Log.i(TAG, "Provider just Enabled: " + arg);
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

}

**我想解决的一些问题：**

是否可以控制处理程序服务或我的代码中的任何内容以确保服务已停止、启动等？所以我想添加控件，例如从一个小部件按钮打开和关闭服务。这怎么可能 ？

还有一件事：如果我多次快速启动和退出我的应用程序，每次处理程序初始化时我都会收到多条日志消息。我怎样才能使这个或类似的东西成为单身？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:13:18.757

Use [Application](http://developer.android.com/reference/android/app/Application.html) for those purposes.

You can implement singleton logic into Application class and manage your service.

If you close your activity, the Service asks Application if Activity alive.

On Launch Activity, Application knows about and Service can bind with above mentioned Activity by using some `Interfaces` that `Application` stores.

** The main `Activity` must initiate [Handler](http://developer.android.com/reference/android/os/Handler.html) to make to `Service` to talk with Activity

Here is some code:

```
public class MyApplication extends Application{

 private static MyApplication mSingleton;

    private static final String PACKAGE = "com.code";
    private static final String PROCESS_NAME = PACKAGE + ".ui";
    private static final String SERVICE_NAME = PROCESS_NAME + "/" + PACKAGE + ".srvce.MyService";

      @Override
   public void onCreate() {
     super.onCreate();
     mSingleton = this;
   }

       public MyApplication getApp(){
         return mSingleton;
       }

      ....

      public boolean isServiceRun() {

    ActivityManager activityManager = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
    List<RunningServiceInfo> services = activityManager.getRunningServices(Integer.MAX_VALUE);

    boolean isRunnig = false;

    for (int i = 0; i < services.size(); i++) {             
        RunningServiceInfo inf = services.get(i);
        if(PROCESS_NAME.equals(inf.process)){                   
            ComponentName cn = inf.service;                 
            String str = cn.toString();                 
            if(str.contains(SERVICE_NAME)){
                isRunnig = true;
                return isRunnig;
            }
        }               
    }  

    return isRunnig;        
}

 } 
```

# java - Spring SAML 实现无法解析对 bean 的引用

> ID：14441475
> 
> 赞同：0
> 
> 时间：2013-01-21T15:07:51.503
> 
> 标签：java, spring-security, vaadin, saml, spring-saml

在我的 Vaadin 应用程序项目中，我想集成 spring-security-SAML 扩展。我从 spring 安全扩展页面下载了源代码。根据手册，我使用 mvn package 打包了扩展，并使用 mvn deploy 命令将其部署在本地 maven 存储库中。一切顺利。已编译的扩展出现在 Maven 存储库中。所以我将它作为依赖项包含在项目 pom.xml 文件中，如下所示：

```
 <dependency>
        <groupId>org.springframework.security.extensions</groupId>
        <artifactId>spring-security-saml2-core</artifactId>
        <version>1.0.0-RC1-SNAPSHOT</version>
    </dependency> 
```

之后我更新了 maven 项目并在 maven 依赖目录中找到了 spring-security-saml2-core-1.0.0-RC1-SNAPSHOT.jar（我正在使用 Maven 的 Eclipse IDE）。我做的下一件事是编辑**appLicationContext.xml**文件。**applicationContext.xml**文件包含在 web.xml 中。所以我在**appLicationContext.xml**文件中添加了以下几行：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="org.springframework.security.saml"/>

    <security:http entry-point-ref="samlEntryPoint">
        <security:intercept-url pattern="/*" access="IS_AUTHENTICATED_FULLY"/>
        <security:custom-filter before="FIRST" ref="metadataGeneratorFilter"/>
        <security:custom-filter after="BASIC_AUTH_FILTER" ref="samlFilter"/>
    </security:http>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider ref="samlAuthenticationProvider"/>
    </security:authentication-manager>

    <bean id="samlAuthenticationProvider" class="org.springframework.security.saml.SAMLAuthenticationProvider">      

    </bean> 

    <bean id="samlEntryPoint" class="org.springframework.security.saml.SAMLEntryPoint">
        <property name="defaultProfileOptions">
            <bean class="org.springframework.security.saml.websso.WebSSOProfileOptions">
                <property name="includeScoping" value="false"/>
            </bean>
        </property>
    </bean>

    <bean id="metadataGeneratorFilter" class="org.springframework.security.saml.metadata.MetadataGeneratorFilter">
    <constructor-arg>
        <bean class="org.springframework.security.saml.metadata.MetadataGenerator"/>
    </constructor-arg>
</bean> 
```

在对文件进行此类更改后，我将我的项目编译为战争存档并尝试将其上传到 glassfish 服务器。但后来我得到一个错误：

```
Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': 
Cannot create inner bean '(inner bean)' of type [org.springframework.security.config.authentication.AuthenticationManagerFactoryBean] while setting bean property 'parent'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name '(inner bean)': 
FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'samlAuthenticationProvider' while setting bean property 'providers' with key [0]; nested exception is org.springframework.beans.factory. 
```

我发现了几个具有此类问题的主题，但库不同。没有人可以帮助我解决我的问题。看起来 org.springframework.security.saml.SAMLAuthenticationProvider 无法在战争档案中找到或解决。但是我手动查了一下，在WEB-INF/lib文件夹spring-security-saml2-core-1.0.0-RC1-SNAPSHOT.jar找到了。我还检查了 jar 存档并找到了 SAMLAuthenticationProvider.class。有谁可以帮我解决我的问题。也许有人对 Spring 安全性和 saml 扩展有经验。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-25T10:57:14.060

我发现我使用的 securityContext.xml 文件不完整

# ios - 如何从 NSDictionary 中删除作为 NSDictionary 元素的条目？

> ID：14441476
> 
> 赞同：2
> 
> 时间：2013-01-21T15:07:54.000
> 
> 标签：ios, objective-c, nsdictionary

我有一个很长时间无法解决的问题。我有一个来自服务器的 JSON 响应，它被解析为 NSDictionary lastMsgs，如下图所示： ![在此处输入图像描述](../Images/cb8654400181970f3502cd19329ead00.png)

因此，例如 1323 它是一个键，它与 NSDictionary 相关联（其中包含诸如正文、主题等和值之类的键）。因此，我需要以某种方式删除嵌套 NSDictionary 值具有条目的条目：type = 1。我不知道该怎么做。我试图这样做：

```
 NSMutableArray* _ModelVals = [[lastMsgs allValues] mutableCopy];
    for (int i =0; i<[_ModelVals count]; i++) {
        string_compare = [NSString stringWithFormat:@"%@" , [_ModelVals objectAtIndex:i]];
        if ([string_compare rangeOfString:@"type = 1"].location != NSNotFound) {
            [_ModelVals removeObjectAtIndex:i];
        }

    } 
```

但它工作不正确，并没有删除所有 type = 1 的条目。

所以问题 - 我如何实现这个并删除嵌套 NSDictionary 中的条目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:17:55.693

字典中没有值“type = 1”。那只是日志。`[dict objectForKey:@"key"]`使用or获取字典中键的值`dict[@"key"]`。

从你的日志来看，类型似乎是一个`NSNumber`，而不是一个`NSString`。只需获取`int`它的表示形式（假设类型是整数）并使用简单的 C`int`进行`int`比较。

而且你不能过滤这样的数组。您将跳过一个条目。如果删除条目，则必须`i`减少`1`.

或者使用这个更简单的解决方案：

```
NSSet *keys = [lastMsgs keysOfEntriesPassingTest:^BOOL(id key, id obj, BOOL *stop) {
    return [obj[@"type"] intValue] == 1;
}];
NSMutableDictionary *dict = [lastMsgs mutableCopy];
[dict removeObjectsForKeys:[keys allObjects]]; 
```

这将首先收集具有类型的所有对象（字典）的键，`1`然后从原始字典的可变副本中删除这些键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:14:06.190

You cannot add or remove objects from a collection while enumerating though it. I would create a another array that you can store references to the objects that you want to delete and remove them after you have looped though it.

# magento - Magento - 在 Magento 1.6.2 的订单网格中添加邮政编码/邮政编码

> ID：14441480
> 
> 赞同：2
> 
> 时间：2013-01-21T15:08:16.260
> 
> 标签：magento, select, collections, grid

我正在尝试让订单网格显示客户的邮政编码/邮政编码。

我正在尝试将 sales_flat_order_address 别名与集合一起加入，但没有成功。

```
protected function _prepareCollection() {
    $collection = Mage::getResourceModel($this->_getCollectionClass());
   $collection->getSelect()->join('sales_flat_order_address', 'main_table.entity_id = sales_flat_order_address.parent_id',array('postcode'));
  //var_dump($collection);
    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

任何人都可以帮我找出解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:36:39.353

在返回之前 parent::_prepareCollection(); 您应该创建一个联接：

```
$collection->getSelect()->joinLeft(array('billing'=>'sales_flat_order_address'),
    'main_table.entity_id = billing.parent_id AND billing.address_type="billing"',array('billing.postcode AS bp')); 
```

如果您想要运输邮政编码，请使用：

```
$collection->getSelect()->joinLeft(array('shipping'=>'sales_flat_order_address'),
    'main_table.entity_id = shipping.parent_id AND shipping.address_type="shipping"',array('shipping.postcode AS sp')); 
```

并在 _prepareColumns 方法中粘贴：

```
$this->addColumn('bp', array(
        'header' => Mage::helper('sales')->__('Billing Postcode'),
        'index' => 'bp',
        'width' => '60px',
        'filter_index'  => 'billing.postcode'
    )); 
```

这在最近的一个项目中对我有用。

# c# - 尝试将此 C# 数学移植到 PHP： int mask = 1 << (i - 1);

> ID：14441482
> 
> 赞同：1
> 
> 时间：2013-01-21T15:08:20.277
> 
> 标签：c#, php, .net, math

我正在尝试将此 C# 数学（我猜？）移植到 PHP：`int mask = 1 << (i - 1);` 这是该函数的完整 C# 代码：

```
/// <summary>
/// Converts tile XY coordinates into a QuadKey at a specified level of detail.
/// </summary>
/// <param name="tileX">Tile X coordinate.</param>
/// <param name="tileY">Tile Y coordinate.</param>
/// <param name="levelOfDetail">Level of detail, from 1 (lowest detail)
/// to 23 (highest detail).</param>
/// <returns>A string containing the QuadKey.</returns>
public static string TileXYToQuadKey(int tileX, int tileY, int levelOfDetail)
{
    StringBuilder quadKey = new StringBuilder();
    for (int i = levelOfDetail; i > 0; i--)
    {
        char digit = '0';
        int mask = 1 << (i - 1);
        if ((tileX & mask) != 0)
        {
            digit++;
        }
        if ((tileY & mask) != 0)
        {
            digit++;
            digit++;
        }
        quadKey.Append(digit);
    }
    return quadKey.ToString();
} 
```

这是我最终得到的 PHP 代码：

```
<?php
/*
* PHP class for converting Mercator X, Y and Z
* coordinates to Bing Maps Quad tree key
* Ported from C# code from MSDN
* http://msdn.microsoft.com/en-us/library/bb259689.aspx
*
* Usage:
* mercatorQuadkey(z, x, y)
* Example:
* mercatorQuadkey(15, 5240, 12661)
*/
function mercatorQuadkey($z, $x, $y){
    for ($i = $levelOfDetail; $i > 0; $i--)
    {
        $digit = '0';
        $mask = 1 << ($i - 1);
        if ($tileX !== 0 && $mask !== 0)
        {
            $digit++;
        }
        if ($tileY !== 0 && $mask !== 0)
        {
            $digit++;
            $digit++;
        }
        $quadkey = $quadkey.$digit;
    }
    return $quadkey;
}
?> 
```

任何人都可以帮忙吗？我需要这个，因为我正在尝试在 Leaflet 中使用 Bing 地图，但我发现的所有插件都没有使用示例。顺便说一句，我对 C# 一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:17:15.833

你有几个问题。首先，您似乎重命名了 PHP 函数中的变量，而没有重命名代码中的引用。放回原来的变量名：

```
function mercatorQuadkey($tileX, $tileY, $levelOfDetail){ 
```

其次，for 的逻辑`if ((tileX & mask) != 0)`可以直接转换为 PHP。这是一个二进制 AND ( `&`)，而不是一个逻辑 AND ( `&&`)，它们是完全不同的东西：

```
 if (($tileX & $mask) !== 0)
    {
        $digit++;
    }
    if (($tileY & $mask) !== 0)
    {
        $digit++;
        $digit++;
    } 
```

通过这些更改，两个代码都返回相同的结果：

*   C#：http: [//ideone.com/hHXEEj](http://ideone.com/hHXEEj)
*   PHP：http: [//ideone.com/oOydCg](http://ideone.com/oOydCg)

# java - 将前半部分的所有偶数和奇数移动到整数数组的后半部分

> ID：14441483
> 
> 赞同：1
> 
> 时间：2013-01-21T15:08:24.653
> 
> 标签：java, algorithm

我有一个我无法解决的面试问题。

用 Java 编程语言编写方法（不是程序），它将前半部分的所有偶数和奇数移动到整数数组的后半部分。

例如输入 = {3,8,12,5,9,21,6,10}; 输出 = {12,8,6,10,3,5,9,21}。

该方法应以整数数组为参数，并在同一个数组中移动项目（不要创建另一个数组）。这些数字可能与原始数组的顺序不同。这是算法测试，所以尽量给出尽可能高效的算法（可能是线性 O(n) 算法）。避免使用内置函数/API。*

还有一些关于什么是数据结构效率的基本介绍

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T15:11:17.507

保留两个索引：一个到第一个奇数，一个到最后一个偶数。交换这些数字并更新索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T15:40:08.793

（在@manu-fatto 的建议的帮助下）我相信这会做到：

```
private static int[] OddSort(int[] items)
{
    int oddPos, nextEvenPos;
    for (nextEvenPos = 0; 
         nextEvenPos < items.Length && items[nextEvenPos] % 2 == 0;
         nextEvenPos++) { }
    // nextEvenPos is now positioned at the first odd number in the array, 
    // i.e. it is the next place an even number will be placed

    // We already know that items[nextEvenPos] is odd (from the condition of the 
    // first loop), so we'll start looking for even numbers at nextEvenPos + 1
    for (oddPos = nextEvenPos + 1; oddPos < items.Length; oddPos++)
    {
        // If we find an even number
        if (items[oddPos] % 2 == 0)
        {
            // Swap the values
            int temp = items[nextEvenPos];
            items[nextEvenPos] = items[oddPos];
            items[oddPos] = temp;
            // And increment the location for the next even number
            nextEvenPos++;
        }
    }

    return items;
} 
```

该算法恰好遍历列表 1 次（每个元素只检查一次），因此效率为 O(n)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-22T10:25:11.463

// 在一个 for 循环中执行此操作

```
public static void evenodd(int[] integer) {

    int i = 0, temp = 0;
    int j = integer.length - 1;

    while (j >= i) {
        // swap if found odd even combo at i and j
        if (integer[i] % 2 != 0 && integer[j] % 2 == 0) {
            temp = integer[i];
            integer[i] = integer[j];
            integer[j] = temp;
            i++;
            j--;

        } else {
            if (integer[i] % 2 == 0) {
                i++;
            }
            if (integer[j] % 2 == 1) {
                j--;
            }

        }

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-03T07:07:10.353

@JLRishe，

您的算法不保持顺序。举个简单的例子，比如 {1,5,2}，您将数组更改为 {2,5,1}。由于我是新用户并且缺乏声誉，因此我无法在您的帖子下方发表评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-05T03:47:29.273

```
public static void sorted(int [] integer) {

int i, j , temp;

for (i = 0;  i < integer.length;  i++) {

     if (integer[i] % 2 == 0) {
         for (j = i;  j < integer.length;  j++) {
              if (integer[j] % 2 == 1) {
                  temp = y[i];
                  y[i] = y[j];
                  y[j] = temp;
              }
          }
      }
      System.out.println(integer[i]);
}

public static void main(String args[]) {

       sorted(new int[]{1, 2,7, 9, 4}); 

}

} 
```

答案是 1、7、9、2、4。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-23T04:44:48.493

您可以通过在找到奇数项时将奇数项移动到数组末尾来使用单个循环来执行此操作。

```
static void EvensToLeft(int[] items) {
    int end = items.length;
    for (int i = 0; i < end; i++) {
        if (items[i] % 2) {
            int t = items[i];
            items[i--] = items[--end];
            items[end] = t;
        }
    }
} 
```

给定一个长度为 n 的输入数组，内部循环恰好执行 n 次，并且只计算每个数组元素的奇偶校验一次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T15:14:32.273

难道是你被要求实现一个非常基本的 BubbleSort 版本，其中元素 e 的排序值，其中 e = arr[i], = e%2==1 ？1：-1？问候莱昂

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-22T11:32:00.217

```
class Demo
{
public void sortArray(int[] a)
{
int len=a.length;
int j=len-1;
for(int i=0;i<len/2+1;i++)
{
if(a[i]%2!=0)
{
while(a[j]%2!=0 && j>(len/2)-1)
j--;
if(j<=(len/2)-1)
break;
a[i]=a[i]+a[j];
a[j]=a[i]-a[j];
a[i]=a[i]-a[j];
}
}
for(int i=0;i<len;i++)
System.out.println(a[i]);
}

public static void main(String s[])
{
int a[]=new int[10];
System.out.println("Enter 10 numbers");
java.util.Scanner sc=new java.util.Scanner(System.in);
for(int i=0;i<10;i++)
{
a[i]=sc.nextInt();
}
new Demo().sortArray(a);
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-07T02:45:13.067

```
private static void rearrange(int[] a) {
    int i,j,temp;
    for(i = 0, j = a.length - 1; i < j ;i++,j--) {
        while(a[i]%2 == 0 && i != a.length - 1) {
            i++;
        }
        while(a[j]%2 == 1 && j != 0) {
            j--;
        }
        if(i>j)
            break;
        else {
            temp = a[i];
            a[i] = a[j];
            a[j] = temp;
        }
    }       
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-10T21:27:55.053

```
public void sortEvenOddIntegerArray(int[] intArray){
    boolean loopRequired = false;
    do{
        loopRequired = false;
        for(int i = 0;i<intArray.length-1;i++){

            if(intArray[i] % 2 != 0 && intArray[i+1] % 2 == 0){

                int temp = intArray[i];
                intArray[i] = intArray[i+1];
                intArray[i+1] = temp;
                loopRequired = true;
            }
        }
    }while(loopRequired);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-14T07:36:12.300

公共类 ArraysSortEvensFirst {

```
public static void main(String[] args) {
    int[] arr = generateTestData();
    System.out.println(Arrays.toString(arr));

    ArraysSortEvensFirst test = new ArraysSortEvensFirst();
    test.sortEvensFirst(arr);

}

private static int[] generateTestData() {
    int[] arr = {1,3,5,6,9,2,4,5,7};
    return arr;
}

public int[] sortEvensFirst(int[] arr) {
    int end = arr.length;

    int last = arr.length-1;
    for(int i=0; i < arr.length; i++) {
        // find odd elements, then move to even slots
        if(arr[i]%2 > 0) {
            int k = findEven(last, arr);
            if(k > i) swap(arr, i, k);
            last = k;
        }
    }

    System.out.println(Arrays.toString(arr));
    return arr;
}

public int findEven(int last, int[] arr) {
    for(int k = last; k > 0; k--) {
        if(arr[k]%2 == 0) {
            return k;
        }
    }
    return -1; // not found;
}

public void swap(int[] arr, int x, int y) {
    int temp = arr[x];
    arr[x] = arr[y];
    arr[y] = temp;
} 
```

}

输出： [1, 3, 5, 6, 9, 2, 4, 5, 7] [4, 2, 6, 5, 9, 3, 1, 5, 7]

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-15T00:13:41.123

公共类 SeperatOddAndEvenInList {

```
public static int[] seperatOddAndEvnNos(int[] listOfNumbers) {
    int oddNumPointer = 0;
    int evenNumPointer = listOfNumbers.length - 1;
    while(oddNumPointer <= evenNumPointer) {                
            if(listOfNumbers[oddNumPointer] % 2 == 0) { //even number, swap to front of last known even number
                int temp;
                temp = listOfNumbers[oddNumPointer];
                listOfNumbers[oddNumPointer] = listOfNumbers[evenNumPointer];
                listOfNumbers[evenNumPointer] = temp;
                evenNumPointer--;
            }
            else {  //odd number, go ahead... capture next element
                oddNumPointer++;
            }

    }
    return listOfNumbers;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    int []arr = {3, 8, 12, 5, 9, 21, 6, 10};
    int[] seperatedArray = seperatOddAndEvnNos(arr);
    for (int i : seperatedArray) {
        System.out.println(i);
    }

} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-18T03:52:53.583

使用两个计数器 i=0 和 j=a.length-1 并不断交换位于错误位置的偶数和奇数元素。

```
 public int[] evenOddSort(int[] a) {
        int i = 0;
        int j = a.length - 1;
        int temp;
        while (i < j) {
            if (a[i] % 2 == 0) {
                i++;
            } else if (a[j] % 2 != 0) {
                j--;
            } else {
                temp = a[i];
                a[i] = a[j];
                a[j] = temp;
                i++;
                j--;
            }
        }
        return a;
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-21T12:23:04.393

效率为 O(log n)。

```
public class TestProg {
public static void main(String[] args) {
    int[] input = { 32, 54, 35, 18, 23, 17, 2 };
    int front = 0;
    int mid = input.length - 1;
    for (int start = 0; start < input.length; start++) {
    //if current element is odd
        if (start < mid && input[start] % 2 == 1) {
    //swapping element is also odd?
            if (input[mid] % 2 == 1) {
                mid--;
                start--;
            } 
    //swapping element is not odd then swap
     else {
                int tmp = input[mid];
                input[mid] = input[start];
                input[start] = tmp;
                mid--;
            }
        }

    }
    for (int x : input)
        System.out.print(x + " ");
} 
```

}

# php - 从另一个类调用变量，范围问题

> ID：14441484
> 
> 赞同：1
> 
> 时间：2013-01-21T15:08:27.103
> 
> 标签：php

好的，我已经缩小了我的问题范围，但无法提出解决方案。

我希望第一类能够引用第二类的变量。

```
class TheFirstClass{
    public function __construct(){
        include 'SecondClass.php';
        $SecondClass = new SecondClass;
        echo($SecondClass->hour);
    }
}

//in it's own file
class TheSecondClass{
    public $second;
    public $minute = 60;
    public $hour;
    public $day;

    function __construct(){ 
        $second = 1;
        $minute = ($second * 60);
        $hour = ($minute * 60);
        $day = ($hour * 24);
    } 
} 
```

但是在这种情况下，只有“分钟”可以从其他类访问。如果我要删除“= 60”，那么分钟将与其余变量一起返回任何内容。

构造函数内的变量计算正确，但不影响作用域较高的同名变量。为什么，以及构建代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:10:59.480

引用带有`$this->`前缀的属性：

```
 $this->second = 1;
    $this->minute = ($this->second * 60);
    $this->hour = ($this->minute * 60);
    $this->day = ($this->hour * 24); 
```

通过不使用`$this->`您正在创建仅存在于本地范围内的新局部变量，您不会影响属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:11:25.933

您正在使用的变量仅在 __construct 函数内部使用。您必须使用对象变量才能在其他类中看到它们

```
function __construct(){ 
    $this->second = 1;
    $this->minute = ($this->second * 60);
    $this->hour = ($this->minute * 60);
    $this->day = ($this->hour * 24);
} 
```

**稍后编辑**：请注意，您不必`include`在第二个类的构造函数中使用函数。你可以有这样的东西：

```
<?php
  include('path/to/my_first_class.class.php');
  include('path/to/my_second_class.class.php');

  $myFirstObject = new my_first_class();
  $mySecondObject = new my_second_class();

?> 
```

# cordova - PhoneGap - 更改所需的应用程序权限

> ID：14441485
> 
> 赞同：2
> 
> 时间：2013-01-21T15:08:29.370
> 
> 标签：cordova

PhoneGap 很棒，但是一旦它为您制作了应用程序，您需要手动执行更多操作才能使用它。其中之一是必需的权限。我已将 APK 上传到 Google Play，它声明我需要相机等权限，我不会也永远不会对我的应用程序这样做。如何更改这些权限？当我制作应用程序时，我能够在 Flash 中执行此操作，但是当您在 Dreamweaver 中使用 PhoneGap 时，它不会询问您任何内容。我必须 CMD 中的所有其他内容，并编辑 XML 文件。如果你问我，这是一个缺陷。

谢谢，阿什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:18:55.370

您必须打开您的 AndroidManifest.xml 并从应用程序中删除您不需要的权限。如果您查看文档站点，每个 API 都会列出它需要的权限。

您至少应始终保留以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

如果您使用的是 PhoneGap Build，您需要修改 config.xml 以指定您的应用实际使用的功能。看着：

[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

了解更多信息。

# .net - Coherence 异步获取/放置 .Net

> ID：14441488
> 
> 赞同：0
> 
> 时间：2013-01-21T15:08:42.280
> 
> 标签：.net, oracle-coherence

我想使用一致性客户端库将项目异步放入命名缓存中。不幸的是，在我看来，Oracle 的 .Net 客户端库根本没有异步操作。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T15:29:39.680

我还需要使用它的异步版本。[我可能会在CacheSharp 库](https://github.com/paulfryer/CacheSharp)中添加一个 Coherence 实现，但它必须是同步 API 的包装器，直到 Oracle 提供真正的异步 API。但是，通过使用 CacheSharp IAsynCache 接口，您将与底层实现分离，因此未来对性能更好的 Confluence 实现的更改将是透明的。

# python - plt.figure() 与 Matplotlib 中的子图

> ID：14441493
> 
> 赞同：10
> 
> 时间：2013-01-21T15:08:51.923
> 
> 标签：python, graph, matplotlib, plot

在**Matplotlib**中，许多示例以形式出现`ax = subplot(111)`，然后应用函数`ax`，例如`ax.xaxis.set_major_formatter(FuncFormatter(myfunc))`. （在[这里](http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg05474.html)找到）

或者，当我不需要子图时，我可以做`plt.figure()`，然后用`plt.plot()`或类似的功能绘制我需要的任何东西。

现在，我正好是第二种情况，但我想`set_major_formatter`在 X 轴上调用函数。调用它`plt`当然不起作用：

```
>>> plt.xaxis.set_major_formatter(FuncFormatter(myfunc)) 
Traceback (most recent call last):
File "<stdin>", line 1, in <module> 
AttributeError: 'module' object has no attribute 'xaxis' 
```

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T15:46:28.193

如果您想要的图形被选中，只需使用`gca()`获取当前轴实例：

```
ax = gca()
ax.xaxis.set_major_formatter(FuncFormatter(myfunc)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-30T09:48:36.207

另一种选择是使用由返回的图形对象`figure()`。

```
fig = plt.figure()

# Create axes, either:
#  - Automatically with plotting code: plt.line(), plt.plot(), plt.bar(), etc
#  - Manually add axes: ax = fig.add_subplot(), ax = fig.add_axes()

fig.axes[0].get_xaxis().set_major_formatter(FuncFormatter(myfunc)) 
```

当您处理多个绘图时，此选项非常有用，因为您可以指定将更新哪个绘图。

# silverlight - 没有 Web RTC 的 Web RTC

> ID：14441500
> 
> 赞同：1
> 
> 时间：2013-01-21T15:09:07.437
> 
> 标签：silverlight, audio, rtsp, webrtc

我的问题是这个...

我有两个站点，一个充当“管理员”站点，另一个充当一般“用户”站点。我需要从“管理”站点向“用户”站点的所有客户端广播实时音频。我需要以 <1 秒的延迟执行此操作。

一些限制包括：

*   没有在“用户”机器上安装（整个想法都在网络上）
*   如果需要 3rd 方插件，则首选 Silverlight ^*

在这里非常感谢任何帮助

[*我已经尝试过使用 Flash 客户端、IIS Smooth Streaming、Internet radio 的 IceCast，所有这些都给我们带来了 >5 秒的延迟。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:31:59.667

您是否在像 Red5 这样的服务器上尝试过 Flash？您通常会获得亚秒级的延迟（尽管不会比这少很多），因为它是为实时通信而设计的。Flex 和 ActionScript 有一个学习曲线，但如果您完全熟悉 XAML，您可以很快从 Red5 附带的示例应用程序中学习它。

如果没有太多客户端，您可以使用两种实时点对点解决方案之一，即基于 RTMFP 的 Flash 或基于 JSEP/ICE/RTP 的 WebRTC。如果您可以确保所有客户端都使用 Chrome，那么 WebRTC 可能是您最好的选择。如果您可以确保他们*没有*使用 Chrome，那么 Flash 是一个不错的选择。Chrome 上当前的 Flash Pepper 客户端[与 wazoo 相比有问题](https://code.google.com/p/chromium/issues/detail?id=152314)在音频处理方面，并没有看到修复的迹象。（它不支持回声消除，并且音频的音量会非常大地上下波动。）因此，如果您使用的是 Flash，请避免在 Chrome 上录制和广播您的音频。如果您有超过六个客户端，我不会推荐任何一种方法 - 我认为音频流的数量会很快淹没您的“管理员”浏览器。最好将其推送到 Red5 服务器之类的东西上。

Silverlight 是一个糟糕的选择，原因比我想象的要多。作为一个花了几年时间尝试在 Silverlight 上实施实时通信解决方案的人，我这么说。不要这样做。

# qt - 构建用于 Symbian 3rd edition 的 Qt 项目

> ID：14441508
> 
> 赞同：0
> 
> 时间：2013-01-21T15:09:35.057
> 
> 标签：qt, symbian

我已经在 Qt Creator 中制作了这个应用程序，并且在模拟器中一切正常。问题是当我想发布我的项目以在模拟器或 Symbian 设备上对其进行测试时，我只能选择为 Symbian Anna 发布，而没有选择 symbian 3rd edition ...我将不胜感激您可以为我提供的任何帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:59:46.257

如果您为 Symbian Anna 开发应用程序作为选定设备，那么我们无法发布第 3 版的应用程序。

确保将第 3 版 SDK 添加到 Qt Creator 并在创建新项目时选择第 3 版而不是 Symbian Anna。

因为如果您为第 3 版手机开发应用程序，它们可以在 Symbian anna 或 bella 等最新手机上运行。如果您选择更高版本作为开发 SDK，那么它们将无法在更低版本中工作。

# sql - 将数据插入表中，其中只有两列中的数据不同

> ID：14441509
> 
> 赞同：-2
> 
> 时间：2013-01-21T15:09:38.317
> 
> 标签：sql, sql-server-2008-r2, jdbctemplate

我有名称列表，我需要插入一个带有自动生成的主键的表和另外三列，每个名称将具有相同的数据。有没有办法在单个查询中实现这一点？

```
| ID | Name | Age| Class|In-Charge|
|121 | Luc  | 12 | Five | 47855   |
|122 | Wayne| 12 | Five | 47855   |
|123 | Lih  | 12 | Five | 47855   | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:11:47.100

您可以在列表中使用类似的东西`SELECT`，`name`而其他值只是静态值：

```
insert into yourtable (Name, Age, Class, [In-Charge])
select Name, 12, 'Five', 47855
from yourlist 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f6029/1)

# java - 简单的 Java WebService 客户端

> ID：14441511
> 
> 赞同：0
> 
> 时间：2013-01-21T15:09:44.557
> 
> 标签：java, eclipse, web-services, axis

我刚刚开始构建我的第一个 Web 服务应用程序，遵循 Eclipse 教程：http: [//www.eclipse.org/webtools/community/education/web/t320/Implementing_a_Simple_Web_Service.pdf](http://www.eclipse.org/webtools/community/education/web/t320/Implementing_a_Simple_Web_Service.pdf)

之后，我想使用axis.jar 构建Web 服务客户端。要创建 Web 服务客户端，我必须在构建路径中添加“Web 应用程序库”以消除此错误：

```
"The type javax.xml.rpc.Call cannot be resolved. It is indirectly referenced from required .class files". 
```

现在是我的问题：是否可以在不添加此 Web 应用程序库的情况下创建 Web 服务客户端？在我的客户端代码中，我只想设置一个 WSDL 路径。先感谢您

# asp.net-mvc - 如何创建 MVC 辅助方法以从枚举中填充下拉列表

> ID：14441518
> 
> 赞同：1
> 
> 时间：2013-01-21T15:10:01.983
> 
> 标签：asp.net-mvc, razor

MVC HtmlHelper.DropDownFor 方法使用起来可能非常令人沮丧。通常情况下，您的选择不会保留，或者您的控件未正确绑定。您将如何编写自定义 HTML 帮助程序来填充枚举中的下拉列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:10:01.983

我花了最后几个小时试图弄清楚这一点，所以不妨分享我的发现。在尝试了各种排列，创建了一个测试应用程序来尝试各种选项并搜索了许多文章之后，我得到了一些适合我的东西。

第一点要提。SelectList 类有四个参数（最后三个是可选的）。如果您未指定选定值（最后一个参数），它将清除您在 SelectListItem 对象中设置的任何选定值（假设您创建了这些值的列表）。这让我沮丧了一段时间，因为我将其中一项 Selected 属性设置为 true，但是一旦我创建了 SelectList 对象，它总是设置为 false。

这是 SelectList 的 MVC 源代码供参考：

```
public class SelectList : MultiSelectList
{
    public SelectList(IEnumerable items)
        : this(items, null /* selectedValue */)
    {
    }

    public SelectList(IEnumerable items, object selectedValue)
        : this(items, null /* dataValuefield */, null /* dataTextField */, selectedValue)
    {
    }

    public SelectList(IEnumerable items, string dataValueField, string dataTextField)
        : this(items, dataValueField, dataTextField, null /* selectedValue */)
    {
    }

    public SelectList(IEnumerable items, string dataValueField, string dataTextField, object selectedValue)
        : base(items, dataValueField, dataTextField, ToEnumerable(selectedValue))
    {
        SelectedValue = selectedValue;
    }

    public object SelectedValue { get; private set; }

    private static IEnumerable ToEnumerable(object selectedValue)
    {
        return (selectedValue != null) ? new object[] { selectedValue } : null;
    }
} 
```

一旦我通过了那个小点，我就让我的助手从列表中正确选择项目并将值正确绑定回来。所以这是我创建的辅助方法（最初的方法来自另一篇文章，但这对我来说也不能正常工作）：

```
public static MvcHtmlString EnumDropDownListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes = null) where TProperty : struct, IConvertible
{
    if (!typeof(TProperty).IsEnum)
        throw new ArgumentException("TProperty must be an enumerated type");

    var selectedValue = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData).Model.ToString();
    var selectList = new SelectList(from value in EnumHelper.GetValues<TProperty>()
                                    select new SelectListItem
                                                {
                                                    Text = value.ToDescriptionString(),
                                                    Value = value.ToString()
                                                }, "Value", "Text", selectedValue);

    return htmlHelper.DropDownListFor(expression, selectList, htmlAttributes);
} 
```

*（EnumHelper.GetValues 和 ToDescriptionString 是我的帮助方法，用于返回指定类型的枚举值列表并获取枚举描述的 EnumMember 值属性）如果有人需要，我可以发布该代码。*

上面代码中的技巧是告诉 SelectList 值和文本属性是什么以及选定的值。

# python-2.7 - Sublime Text 2 EOFError

> ID：14441519
> 
> 赞同：0
> 
> 时间：2013-01-21T15:10:02.223
> 
> 标签：python-2.7, sublimetext2, eoferror

我正在使用 Sublime Text 2 学习 Python。

我只输入了以下两个语句：

```
usr = raw_input('input any letters: ')
print usr 
```

按`CMD`+后`B`，出现以下错误消息。

```
input any letters: Traceback (most recent call last):
  File "/Users/jun/Documents/workspace/studyPython/test.py", line 1, in <module>
    usr = raw_input('input any letters: ')
EOFError: EOF when reading a line
[Finished in 0.3s with exit code 1] 
```

我该如何解决？（我在 OS X 10.8.2 中使用 Python 2.7.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T19:21:31.180

问题是`raw_input`当你在 Sublime Text 2 中运行文件时没有得到任何输入，所以 Python 会抛出一个错误。

在出现的控制台中（您看到错误的地方），您没有任何地方可以输入您的参数。您需要在命令行运行脚本才能使其工作。在 shell 提示符下（在 OS X 中，可能是**Terminal**，在 中找到`/Applications/Utilities/Terminal.app`），键入以下行：

```
python /path/to/script/test.py 
```

然后出现以下行：

```
input any letters: 
```

在行尾有一个光标。这提示您输入您的`raw_input`，它允许它设置`use`变量。然后键入一些文本，例如：

```
input any letters: this is some text 
```

Python 将打印您刚刚输入的内容：

```
this is some text 
```

这在 SL2 中不起作用，因为 SL2 (afaik) 没有办法为您提供`raw_input`.

# perl - 如何在perl中将字符串截断为特定长度？

> ID：14441521
> 
> 赞同：31
> 
> 时间：2013-01-21T15:10:11.317
> 
> 标签：perl

我只是无法在 Perl 中找到“将字符串截断为特定长度”。有内置的方法吗？

**更新：**

输入： `$str = "abcd";`

输出（截断 3 个字符）： $str 是`abc`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-21T15:13:51.787

您想使用该`substr()`功能。

```
$shortened = substr( $long, 0, 50 ); # 50 characters long, starting at the beginning. 
```

更多信息，请使用`perldoc`

```
perldoc -f substr 
```

在您的情况下，它将是：

```
$str = 'abcd';
$short = substr( $str, 0, 3 ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-21T15:45:45.883

对于任意长度的字符串，其中截断长度可以长于字符串长度，我会选择替换

```
$str =~ s/.{3}\K.*//s; 
```

对于较短的字符串，替换将不匹配并且字符串将保持不变。方便的`\K`转义可以替换为后向断言或简单的捕获：

```
s/(?<=.{3}).*//s   # lookbehind
s/(.{3}).*/$1/s    # capture 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-09T18:29:37.607

还可能有用的是，您可以使用or来代替`substr()`or 正则表达式。`printf``sprintf`

见 [`perldoc -f sprintf`](http://perldoc.perl.org/functions/sprintf.html)：

> 对于字符串转换，指定精度会截断字符串以适合指定的宽度：
> 
> ```
>  printf '<%.5s>', "truncated";   # prints "<trunc>"
>   printf '<%10.5s>', "truncated"; # prints "<     trunc>" 
> ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-21T15:33:39.553

只要您的原始字符串至少有 3 个字符长，您就可以将调用`substr`用作左值。

```
my $str = "abcd";
substr($str, 3) = "";
print "$str\n";   # prints "abc" 
```

可能需要检查字符串的初始长度，如果它短于 3 个字符，`substr`则无法分配此调用的返回值（`perldoc -f substr`有关详细信息，请参阅 ）并且尝试这样做会导致错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T15:12:47.337

如果我理解正确，你需要像`php` `wordwrap()`一个字符串一样，所以：

```
use Text::Format;
print Text::Format->new({columns => 50})->format($string); 
```

如果您只需要前 N 个字符：

```
print substr $string, 0, 50; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-21T15:34:00.303

或者你可以使用正则表达式来做同样的事情。

```
#!/usr/bin/perl -w

use strict;

my $str = "abcd";

$str =~ /(\w{0,3})/;
print $1; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-21T17:46:47.410

最自然的方法是使用 substr 来提取你想要的部分：

```
$first_n = substr($string, 0, $n); 
```

如果您只想修改字符串并且您确定它至少是所需的长度：

```
substr($string, $n) = ''; 
```

如果你不确定，你可以这样做：

```
use List::Util "min";
substr($string, min($n, length($string))) = ''; 
```

或捕获异常：

```
eval { substr($string, $n) = '' }; 
```

# cognos - 在 cognos 中，我们能否避免在查询的数据项中使用参数时出现询问值的可选提示？

> ID：14441522
> 
> 赞同：1
> 
> 时间：2013-01-21T15:10:14.697
> 
> 标签：cognos, cognos-8, cognos-bi

实际上，我在 Cognos 10.1 报表工作室工作。在我的报告中，我有两个提示，一个是可选的，另一个是必需的。我已经在某些条件下使用了数据项中的提示参数。所以，可选的提示也变成了必需的。我们应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:12:19.497

我们可以为此使用#prompt()#。通常，#prompt()# 用于故意强制参数保持某个值。我们应该使用#prompt()#，而不是直接使用参数。

例如，

假设，?Parameter1? 在数据项中使用并且它包含一个整数值，将其替换为 #prompt()# 就像这样 #prompt('Parameter1','integer')#。

假设，如果条件是

```
if(?Parameter1? is not null)
{  
   statement; 
} 
```

它应该是，

```
if(#prompt('Parameter1','integer')# is not null) 
{
   statement; 
} 
```

如果我们使用#prompt()#，我们可以使用数据项内部的参数，而不影响提示的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:34:58.507

数据项计算/逻辑中使用的常规提示始终成为必需的，因为查询中的数据项必须呈现，并且不像呈现项那样是可选的，因此必须解决计算。就像在提示宏 ## 中所述的另一张海报一样，在我看来，它确实服务于 2 个现实世界的目的，并且还有一些我们不会谈论的可争论的其他目的。

1.  一个可怜的人在提交之前在查询中搜索/替换替换（在这些情况下很方便）。
2.  如果缺少一个参数，则在 8.4 中默认该参数几乎是不可能的，尤其是在数据项中。
3.  在 MDX 查询中，提示宏非常棒，因为查询中的 #1 硬搜索和替换没有本机 Cognos 提示问题，这些问题有时会妨碍您。

# java - 为什么我无法启动 jar 文件？

> ID：14441523
> 
> 赞同：7
> 
> 时间：2013-01-21T15:10:18.523
> 
> 标签：java, file, jar

我下载了一个 jar 文件，它会自动保存到我的下载文件夹中（我使用的是 mac osx 山狮）。当我点击它时，它会自动启动，一切都很好。

但是，当我将包含 jar 文件和其他一些文件的文件夹移动到另一个目录（是的，我想清理我的下载文件夹）时，我无法启动 jar 文件。我总是得到错误：

```
The Java JAR file "example.jar" could not be launched.
Check the Console for possible error messages. 
```

我能做些什么来解决这个问题？

编辑：当我尝试通过控制台启动 jar 文件时，我收到此错误：

```
Unable to access jarfile ./example.jar 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T15:13:08.817

It's probably the case that the JAR was downloaded along with other directory/files. So it's possible that some files are missing when you try to run the application.

Try opening a terminal and run:

```
$ java -jar name.jar 
```

Where `name.jar` is your JAR file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T03:51:44.513

我有同样的问题，我通过使 jar 文件可执行来修复它，例如

```
 $ chmod +x blah.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T05:10:46.047

正如@Pablo 提到的，这可能是因为您有一些其他文件/目录与 jar 一起下载，当您将 jar 移动到单独的目录时，您没有复制这些文件/目录。为了解决这个问题，您可能想尝试将 jar（以及任何其他文件/目录等）直接下载到您想要的文件夹，然后启动 jar，这样您就不会错过启动所需的任何内容。

# c# - 无论鼠标位置如何，都使 WPF 滚动查看器滚动

> ID：14441527
> 
> 赞同：2
> 
> 时间：2013-01-21T15:10:31.563
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，它有一个工具栏，然后是一个内容控件，它嵌套了一个网格，该网格包含一个 Tabcontrol 和一个包装 TabPanel 的 ScrollViewer。

滚动查看器效果很好，但前提是我的鼠标悬停在选项卡控件上。只要我的光标在窗口中，如何让滚动查看器滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:50:23.503

Try to capture the event in the Window and raise it in the TabControl, something around this (untested):

```
private void Window_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
{
    if (!e.Handled)
    {       
        e.Handled = true;
        var eventArg = new MouseWheelEventArgs(e.MouseDevice, e.Timestamp, e.Delta);
        eventArg.RoutedEvent = MouseWheelEvent;
        eventArg.Source = sender;
        MyTabControl.RaiseEvent(eventArg);
    }
} 
```

# entity-framework - “值不能为空，参数名称‘键’”，从复杂类型继承时

> ID：14441528
> 
> 赞同：1
> 
> 时间：2013-01-21T15:10:34.203
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我浪费了几个小时来调试这个错误。当我的 EF Code First 生成一个新数据库时，它就会出现。原因是我最近创建了一个继承自我的一个实体中使用的复杂类型的类。实体没有引用后代类。这（对我来说）完全出乎意料的行为是如何解释的？

编辑：根据要求提供代码和堆栈跟踪。我必须更正我的声明，即仅在生成数据库时才抛出异常。每当第一次访问 dbcontext 时都会抛出它。删除 SpecializedComplexType 会使异常消失。

```
Public Class MyEntityWithComplexType
    Public Sub New()
        TheComplexType = New ComplexType
    End Sub
    'ID'
    Public Property ID As Long

    'NATIVE PROPERTIES'

    'NAVIGATION PROPERTIES'

    'COMPLEX TYPES'
    Public Property TheComplexType As ComplexType
End Class

Public Class ComplexType
    Public Property SomeValue As Integer
End Class

Public Class SpecializedComplexType
    Inherits ComplexType

    Public Property SomeAdvancedValue As Integer
End Class 
```

> System.Windows.Markup.XamlParseException 未处理
> HResult=-2146233087 Message=De aanroep van de 构造函数在类型 BridgeItConverter.MainWindow dat overeenkomt 遇到 de opgegeven bindingsbeperkingen，heeft een uitzondering veroorzaakt。regelnummer 5 en regelpositie 5\. Source=PresentationFramework LineNumber=5
> Run(ExecutionContext executionContext, ContextCallback callback, Object state) bij System.Threading.ThreadHelper.ThreadStart() InnerException: System.ArgumentNullException HResult=-2147467261 Message=Waarde kan niet null zijn。Parameternaam：key Source=mscorlib ParamName=key StackTrace：bij System.Collections.Generic.Dictionary`2.FindEntry(TKey key) bij System.Collections.Generic.Dictionary`2.TryGetValue(TKey key, TValue& value) bij System.Data.Entity.ModelConfiguration.Configuration.Mapping.SortedEntityTypeIndex.Add(EdmEntitySet entitySet, EdmEntityType entityType) bij System.Data.Entity.ModelConfiguration.Configuration.Mapping.EntityMappingService.Analyze( ) bij System.Data.Entity.ModelConfiguration.Configuration.Mapping.EntityMappingService.Configure() bij System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.ConfigureEntityTypes(DbDatabaseMapping databaseMapping, DbProviderManifest providerManifest) bij System.Data.Entity.ModelConfiguration.Configuration .ModelConfiguration.Configure(DbDatabaseMapping databaseMapping, DbProviderManifest providerManifest) bij System.Data.Entity.DbModelBuilder。Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo) bij System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) bij System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) bij System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) bij System.Data.Entity.Internal.LazyInternalContext.InitializeContext() bij System.Data.Entity.Internal.InternalContext.Initialize() bij System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) bij System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() bij System.Data.Entity.Internal.Linq.InternalSet `1.get_InternalContext() bij System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() bij System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source) bij BridgeItConverter.MainWindow。 LoadData(BridgeItDB db) 在 C:\Users\andre_000\Documents\Visual Studio 2012\Projects\BridgeItDatabase\BridgeItConverter\MainWindow.xaml.vb:regel 233 bij BridgeItConverter.MainWindow..ctor() 在 C:\Users\andre_000\ Documents\Visual Studio 2012\Projects\BridgeItDatabase\BridgeItConverter\MainWindow.xaml.vb:regel 32 InnerException:

# ldap - 空白（空）属性的 LDAP 过滤器

> ID：14441529
> 
> 赞同：33
> 
> 时间：2013-01-21T15:10:34.983
> 
> 标签：ldap

我已经搜索过这个主题，但我发现的只是过滤器，它们返回不存在某个属性的条目，例如：

```
(!(manager=*)) 
```

但是，我想查找存在属性但具有空值（即空/空白字符串）的条目。我可以使用 LDAP 过滤器执行此操作吗？如果可以，如何操作？

编辑：

只是为了确认一下，上面的过滤器会找到没有属性的条目，但不会找到属性为空的条目（空字符串）。

这取决于 LDAP 实现还是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T11:39:56.443

在 LDAP 中，没有用于确定空字符串的查询方法。

最佳实践是清理您对 LDAP 的数据输入，因为 LDAP 中的空值或 null 值根本没有值。

要确定这一点，您需要使用值 (manager=*) 查询所有内容，然后使用代码确定“空格”或空值。

正如特里所说，在 DN 语法的属性中存储空值或空值是错误的。

某些 LDAP 服务器实现不允许输入不存在 DN 条目的 DN。

也许，如果您的 DN 一致，您可以使用以下内容：

```
(&(!(manager=cn*))(manager=*)) 
```

这应该返回经理的任何值，其中经理有一个值并且它不是以“cn”开头的。

但是，某些 LDAP 实现不允许对 DN 语法属性进行子字符串搜索。

-吉姆

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-20T19:09:56.493

使用搜索空值`\00`

例如：

```
ldapsearch -D cn=admin -w pass -s sub -b ou=users,dc=acme 'manager=\00' uid manager 
```

确保您是否在命令行上使用空值在其周围使用引号，以防止 OS shell 向 LDAP 发送空字符。例如，这不起作用：

```
 ldapsearch -D cn=admin -w pass -s sub -b ou=users,dc=acme manager=\00 uid manager 
```

有很多网站引用了这个，以及其他特殊字符。例子：

*   [http://www.ldapexplorer.com/en/manual/109010000-ldap-filter-syntax.htm](http://www.ldapexplorer.com/en/manual/109010000-ldap-filter-syntax.htm)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-12T13:29:03.730

这篇文章[http://technet.microsoft.com/en-us/library/ee198810.aspx](http://technet.microsoft.com/en-us/library/ee198810.aspx)引导我找到了解决方案。唯一的变化是感叹号的位置。

```
(!manager=*) 
```

它似乎按预期工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T22:41:09.763

从语义上讲，LDAP 中的这些情况之间没有区别。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-12T17:00:52.317

我需要进行查询以获取所有具有 managedBy 值集（非空）的组，这给出了一些不错的结果：

```
(!(!managedBy=*)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-22T11:24:18.823

属性的模式定义确定属性是否必须具有值。如果`manager`给定示例中的属性是在[RFC4524](https://www.rfc-editor.org/rfc/rfc4524#section-2.17)中使用 OID定义的属性`0.9.2342.19200300.100.1.10`，则该属性具有 DN 语法。DN 语法是相对专有名称的序列，**不能为空**。示例中给出的过滤器用于使 LDAP 目录服务器在搜索结果中仅返回不具有`manager`LDAP 客户端属性的条目。

# visual-studio-2010 - 如何导出 Visual Studio 项目中的所有文件？

> ID：14441532
> 
> 赞同：4
> 
> 时间：2013-01-21T15:10:38.980
> 
> 标签：visual-studio-2010

我在一个目录中有数百个源文件，其中一些是 VS2010 项目的一部分。我只想导出该项目的解决方案资源管理器中列出的那些文件。

最好有一个不使用插件或宏的解决方案，因为我对 VS2010 不是很熟悉。

# iphone - iOS：如何在 pdf 生成中绘制文本时设置字体？

> ID：14441534
> 
> 赞同：6
> 
> 时间：2013-01-21T15:10:46.287
> 
> 标签：iphone, ios, objective-c, pdf-generation, font-size

我正在使用drawpdf函数在ios应用程序中生成pdf，同时在nsobject类中调用drawtext函数，它会根据我指定的框架和字符串清楚地绘制文本。

我的代码是

```
+(void)drawText:(NSString*)textToDraw inFrame:(CGRect)frameRect
{

    CFStringRef stringRef = (__bridge CFStringRef)textToDraw;
// Prepare the text using a Core Text Framesetter
    CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, NULL);
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);

    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

// Get the frame that will do the rendering.
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

// Get the graphics context.
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();

// Put the text matrix into a known state. This ensures
// that no old scaling factors are left in place.
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

// Core Text draws from the bottom-left corner up, so flip
// the current transform prior to drawing.
    CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
// Draw the frame.
    CTFrameDraw(frameRef, currentContext);

    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2);

    CFRelease(frameRef);
    CFRelease(stringRef);
    CFRelease(framesetter);
} 
```

但我需要将文本字体大小设置得更大更粗。

我用了

```
CGContextSelectFont(currentContext, "Helvetica", 20, kCGEncodingMacRoman); 
```

和

```
CGContextSetFontSize ( currentContext, 20); 
```

参考上述函数中mr.texian提供的答案，但没有变化

我在 uiwebview 中显示生成的 pdf。

我从网上得到了这段代码。我不知道在哪里编辑字体设置的代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T11:33:53.977

请尝试 CoreText，一个非常有用的基础类。以下是示例代码：

```
CTFontRef font = CTFontCreateWithName((CFStringRef)@"Arial", 16.0f, nil);
CFAttributedStringSetAttribute(textString,CFRangeMake(0, strLength-1), kCTFontAttributeName, font); 
```

将此添加到`CFAttributtedStringRef`指针。

这应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:57:06.423

我想这些就是你要找的

```
void CGContextSelectFont (
    CGContextRef c,
    const char *name,
    CGFloat size,
    CGTextEncoding textEncoding
); 
```

和

```
void CGContextSetFontSize (
   CGContextRef c,
   CGFloat size
); 
```

就像是...

```
CGContextSelectFont(currentContext, "Helvetica", 20, kCGEncodingMacRoman); 
```

或者

```
CGContextSetFontSize ( currentContext, 20); 
```

希望对您有所帮助，这里有更多... [Quartz 2D Programming Guide - Text](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_text/dq_text.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:39:13.933

创建`CTFont`使用`CTFontCreateWithNameAndOptions`（检查：[CTFont 参考](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CTFontRef/Reference/reference.html)）

创建一个可变属性字符串（[CFMutableAttributedString 参考](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFMutableAttributedString/Reference/reference.html)）您可以编辑此可变字符串并进行所需的任何更改。在你的情况下，设置它的字体。

用这个字符串创建你的 CTFrameSetter，字体应该会出现。

如果您想彻底并有足够的时间，请阅读[字符串编程指南](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFStrings/introCFStrings.html#//apple_ref/doc/uid/10000131i)

如果您想要一个使用 CFMutableAttributedString 的快速代码示例，请在 stackoverflow 上搜索 CFMutableAttributedString，大多数答案都会让您了解如何使用它。例如[这个问题](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFStrings/introCFStrings.html#//apple_ref/doc/uid/10000131i)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T10:12:23.363

您可以尝试“libHaru”在 iPhone 项目中生成 pdf。

[https://github.com/akisute/iPhonePDF](https://github.com/akisute/iPhonePDF)

希望能帮助到你 ！！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T16:23:17.290

怎么样`CGContextSetFont`？

```
NSString *fontName = @"Helvetica";
CGFontRef fontRef = CGFontCreateWithFontName((__bridge CFStringRef)fontName);
CGContextSetFont(context, fontRef);
CGContextSetFontSize(context, 20); 
```

不要忘记释放它：

```
CGFontRelease(fontRef); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T09:39:15.617

经过大量搜索，发现 itsdamslife 的答案是正确的，但它不支持我的代码。

但是，我很便宜地解决了它。即，多次调用该`drawText:`函数以获取粗体。

```
for(int i=0;i<5;i++)
{
 [self drawtext];
} 
```

# javascript - 如何获取 Spotify 跟踪 uri？

> ID：14441539
> 
> 赞同：0
> 
> 时间：2013-01-21T15:11:02.293
> 
> 标签：javascript, html, tracking, spotify

我在 Spotify 中有一个音乐会列表，每个音乐会都在生成曲目列表。我正在做一些额外的工作并修改我的代码，我需要可以动态使用的歌曲（曲目）ID。谁能帮我，我怎样才能得到轨道ID？我正在使用“歌曲踢”API。请帮助任何人。

```
 playlist_Tracks[i]; 
```

这一行带来了所有热门曲目的名称，但如何带来这些歌曲的 Uri/id

或者任何人都知道如何将曲目名称转换为曲目 ID（Spotify URI）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:13:13.597

假设 playlistTracks[i] 是 API 中的标准 Track 对象，则可以使用 playlistTracks[i].data.uri 访问 URI

有关更多信息，请参阅此处的 JS 文档：[https ://developer.spotify.com/technologies/apps/docs/4f52ebf870.html](https://developer.spotify.com/technologies/apps/docs/4f52ebf870.html)

# java - 在 Java 的非分叉连接执行器服务中是否有等效的 isQuiescent？

> ID：14441540
> 
> 赞同：0
> 
> 时间：2013-01-21T15:11:02.327
> 
> 标签：java, multicore, executorservice, fork-join

我在 ForkJoin 和 FixedSizeThreadPool 中实现了我的问题的两个实现，我想比较它们的性能。在我的问题中，每个任务都会创建一些子任务，并将它们再次提交给执行器服务。在 fork-join 实现中，我使用 fork()，而在另一个实现中，我使用 execute()。

显然，我的主线程需要等到整个工作完成。在 fork-join 中，我可以优雅地检查 isQuiescent() 属性以确保一切都已完成，但在另一种情况下，我想不出比手动计算我创建了多少任务以及完成了多少任务更好的方法！该解决方案有效，但以共享变量为代价，这显然会降低我的性能。

我不能只使用shutdown()，因为这样子任务就不会被安排（它们会得到RejectedExecutionException）。

有人知道比计算任务更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:38:46.900

实际上 shutdown 会等到之前提交的所有任务都完成。对于您的用例，请查看`ExecutorCompletionService`.

# python - numpy 中向量化函数的性能行为

> ID：14441541
> 
> 赞同：2
> 
> 时间：2013-01-21T15:11:04.583
> 
> 标签：python, numpy, scipy

我想通过以下方式在 python 中执行数学积分：

[1] 在 scipy.optimize.fsolve 的帮助下求解一个隐式方程以找到被积函数的最大位置

[2] 在 scipy.integrate.quad 的帮助下，将被积函数的最大值移到零并从 -10 积分到 10

由于被积函数有一个自由参数 xi，我想在 numpy 的帮助下使用一系列 xi 值来执行此操作，因此我使用了 numpy.vectorize。

现在有两种方法可以向量化这个算法：

[A] 分别对 [1] 和 [2] 进行矢量化，并将 vec_[1] 的结果作为输入给 vec_[2]

[B] 向量化同时执行 [1] 和 [2] 的函数

我注意到 [A] 比 [B] 快得多。这是代码：

```
from scipy import optimize, integrate
import numpy as np
from math import exp, sqrt, pi
import time

def integral_with_fsolve(xi):
    xc = optimize.fsolve(lambda x: x+1./(1+exp(-x))-xi,0.)
    def integrand(x,xi):
        return exp(-(x-xi+xc)**2)/(2.*sqrt(2.*pi))/(1.+exp(x+xc))
    integral = integrate.quad(integrand,-10.,10.,args=(xi,),epsabs=0.)
    return integral[0]

def integral(xi,xc):
    def integrand(x,xi):
        return exp(-(x-xi+xc)**2)/(2.*sqrt(2.*pi))/(1.+exp(x+xc))
    integral = integrate.quad(integrand,-10.,10.,args=(xi,),epsabs=0.)
    return integral[0]

def fsolve(xi):
    return optimize.fsolve(lambda x: x+1./(1+exp(-x))-xi,0.)

vec_integral_with_fsolve = np.vectorize(integral_with_fsolve)
vec_integral = np.vectorize(integral)
vec_fsolve = np.vectorize(fsolve)

xi = np.linspace(0.,2.,1000)

t0=time.time()
something = vec_integral_with_fsolve(xi)
dur=(time.time()-t0)
speed = xi.size/dur
print('Integrate and fsolve vectorized in one: speed = {} ints/sec'.format(speed))

t0=time.time()
xc = vec_fsolve(xi)
something = vec_integral(xi,xc)
dur=(time.time()-t0)
speed = xi.size/dur
print('Integrate and fsolve vectorized seperately: speed = {} ints/sec'.format(speed)) 
```

并且输出总是像

积分和 fsolve 向量化合二为一：速度 = 298.151473998 ints/sec

单独积分和 fsolve 矢量化：速度 = 2136.75134429 ints/sec

由于这只是我实际问题的简化版本，我需要知道它为什么会这样。有人可以解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:29:20.633

总之，`xc`当您使用“一次”方法时，这是变量的问题。这是一个`ndarray`，当`math.exp()`用`x`or `xi`（两个浮点数）调用时，代码会变得更慢。如果您`xc=float(xc)`采用“一次”方法，您将获得与“单独”方法几乎相同的性能。

下面是关于如何找到它的详细描述。

使用[`cProfile`](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)它很容易看出瓶颈在哪里：

```
AT ONCE:
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
 1001    0.002    0.000    2.040    0.002 quadpack.py:135(quad)
 1001    0.001    0.000    2.038    0.002 quadpack.py:295(_quad)
 1001    0.002    0.000    2.143    0.002 tmp.py:15(integral_with_fsolve)
231231   1.776    0.000    1.925    0.000 tmp.py:17(integrand)
470780   0.118    0.000    0.118    0.000 {math.exp}
 1001    0.112    0.000    2.037    0.002 {scipy.integrate._quadpack._qagse}

SEPARATELY:
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
 1001    0.001    0.000    0.340    0.000 quadpack.py:135(quad)
 1001    0.001    0.000    0.339    0.000 quadpack.py:295(_quad)
 1001    0.001    0.000    0.341    0.000 tmp.py:9(integral)
231231   0.200    0.000    0.278    0.000 tmp.py:10(integrand)
470780   0.054    0.000    0.054    0.000 {math.exp}
 1001    0.060    0.000    0.338    0.000 {scipy.integrate._quadpack._qagse} 
```

总体时间是：

```
AT ONCE:
1 loops, best of 3: 1.91 s per loop
SEPARATELY:
1 loops, best of 3: 312 ms per loop 
```

最大的不同在于`integrand`，它需要将近 7 倍的时间来运行`integral_with_fsolve`。数值积分也是如此`quad`。Even`math.exp`在“单独”方法中的速度是原来的两倍。

这表明在每种方法中评估的类型是不同的。事实上，这就是重点。当“一次”运行时，您可以打印`type(xc)`以查看它是一个`numpy.ndarray, float64`，而在​​“单独”方法中它只是一个`float64`. 在 a 中对这些类型求和似乎不是一个好主意`math.exp()`，如下所示：

```
xa = -0.389760856858
xc = np.array([[-0.389760856858]],dtype='float64')

timeit for i in range(1000000): exp(xc+xa)
#1 loops, best of 3: 1.96 s per loop

timeit for i in range(1000000): exp(xa+xa)
#10 loops, best of 3: 173 ms per loop 
```

在这两种情况下都`math.exp()`返回一个`float`. 使用`exp`,`sqrt`和`pi`from`numpy`可以减少差异，但它会使您的代码变慢，可能是因为这些函数也可能返回 a `ndarray`：

```
AT ONCE:
1 loops, best of 3: 4.46 s per loop
SEPARATELY:
1 loops, best of 3: 2.14 s per loop 
```

`ndarray`在这种情况下，不要转换为 a 似乎是个好主意。好主意是转换为`float`then ，如下所示（在“一次”方法中是必需的）：

```
def integral_with_fsolve(xi):
    xc = optimize.fsolve(lambda x: x+1./(1+exp(-x))-xi,0.)
    xc = float(xc) # <-- SEE HERE
    def integrand(x,xi):
        return exp(-(x-xi+xc)**2)/(2.*sqrt(2.*pi))/(1.+exp(x+xc))
    integral = integrate.quad(integrand,-10.,10.,args=(xi,),epsabs=0.)
    return integral[0] 
```

新的时间：

```
AT ONCE:
1 loops, best of 3: 321 ms per loop
SEPARATELY:
1 loops, best of 3: 315 ms per loop 
```

# java - 泛型：通配符类型的编译错误

> ID：14441545
> 
> 赞同：2
> 
> 时间：2013-01-21T15:11:17.400
> 
> 标签：java, generics, guava, java-7

我已经切换到 Java 7 build 21 并开始出现奇怪的编译错误。例如，下面的代码片段无法编译（尽管 IntelliJ 没有显示任何错误）：

```
 1 Iterable<?> parts = ImmutableList.<String>of("one", "two");
    2 Function<?, String> function = new Function<Object, String>() {
    3    @Override
    4    public String apply(final Object input) {
    5        return input.toString();
    6    }
    7 };
    8 Iterable<String> result = Iterables.transform(parts, function);
    9 System.out.println(result); 
```

但如果我在第 2 行替换`?`为`Object`

```
 2 Function<Object, String> function = new Function<Object, String>() { 
```

然后编译成功。

我得到的错误有点神秘：

```
error: method transform in class Iterables cannot be applied to given types;
required: Iterable<F>,Function<? super F,? extends T> 
found: Iterable<CAP#1>,Function<CAP#2,String> 
reason: no instance(s) of type variable(s) F,T exist so that argument type Function<CAP#2,String>
conforms to formal parameter type Function<? super F,? extends T> 
where F,T are type-variables:
F extends Object declared in method <F,T>transform(Iterable<F>,Function<? super F,? extends T>) 
T extends Object declared in method <F,T>transform(Iterable<F>,Function<? super F,? extends T>) 
where CAP#1,CAP#2 are fresh type-variables: 
CAP#1 extends Object from capture of ?
CAP#2 extends Object from capture of ? extends Object 
```

将第 2 行更改为

```
 2 Function<? extends Object, String> function = new Function<Object, String>() { 
```

没有效果。

我正在使用 JDK 1.7.0_11-b21；这曾经用 build 4 编译好。

这是一个`javac`错误还是我的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:31:28.303

方法签名是：

```
<F,T> Iterable<T> transform(Iterable<F> fromIterable, Function<? super F,? extends T> function) 
```

这对于类型参数 F 意味着什么：

```
Iterable<F> :
    F can be any type here, but will influence the type parameter to Function
Function<? super F, ? extends T> :
    the first type parameter (? super F) MUST be a supertype of F 
```

当您键入：

```
Iterable<?>
Function<?, String> 
```

你说的是任何东西的 Iterable ，所以它可能是 eg `Iterable<Integer>`。您还说从任何东西到字符串的函数，所以它可能是`Function<String, String>`. 由于 String 不是 Integer 的超类，因此您不满足`(? super F)`条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:15:50.000

这是因为`Function<?,String>`可以是`Function<Object,String>`, `Function<String,String>`,中的任何一个`Function<Foo,String>`。因此，您无法将 Object 输入到 Function 中是正确的，因为它实际上可能需要 Foo 代替。

当然，既然你`Iterable<?>,`只知道Iterable吐出Objects，那你就只能用a`Function<Object,WhatEver>`来改造了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:39:53.940

我实际上能够通过改变来解决这个问题

```
2 Function<?, String> function = new Function<Object, String>() { 
```

到

```
2 Function<? super Object, String> function = new Function<Object, String>() { 
```

当您考虑它时，这是有道理的 - 功能是这里的消费者（来自臭名昭着的[PECS](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)成语）。

# android - Android 模拟器 - 非常慢

> ID：14441551
> 
> 赞同：0
> 
> 时间：2013-01-21T15:11:26.220
> 
> 标签：android, mobile, android-emulator

我想使用 Android SDK 模拟器来调试网站，但它的加载时间是不可接受的。好像是5分钟。在 Android SDK 加载期间，我可以在 Apple XCode Simulator（以及实际的 iPhone）上刷新网站 100 次。

此外，里面的所有图标都滞后。它完全不可用。 ![在此处输入图像描述](../Images/6fb8be76212b9c2383f40890f20bee86.png)

所以，我得出的结论是不应该这样，但我不知道我做错了什么？我刚刚安装了它，我安装了所有最新的组件，我在 i7、8GB RAM 的计算机上，它从一开始就滞后。我什至无法输入网站地址而无需等待 60 秒——更不用说调试任何东西了。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:17:49.640

您正在模拟 Linux 操作系统，除此之外，它还运行 Java 虚拟机，除此之外，它还运行 android 应用程序，最终运行您的应用程序。所有这些步骤都是高度内存密集型的，因此，您将体验到应用程序的运行时间很慢。正如评论中所建议的，调试应用程序的最快方法是使用 Android 设备本身。在测试时间时，在实际的 Android 设备上这样做比在单独的机器上这样做要好得多，这纯粹是因为它所做的模拟量会减慢执行速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:22:42.893

不要使用 ARM 模拟器。尝试 Intel x86 仿真器以获得更快的仿真器。它包含在 Android 4.0.3 SDK 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:49:43.960

我找到了另一种让模拟器工作得更好的方法，虽然我使用的是 Windows，所以不确定它是否会以同样的方式工作。

如果您进入 AVD 管理器（在其中管理您的 android 虚拟设备）并编辑存在缓慢问题的设备。在底部附近有一个使用主机 GPU 的选项。勾选这个选项，可以大大提高模拟器的速度。

在我尝试这个之前，我发现模拟器非常无法使用

# c# - 使用上传字段时 Azure 上的超时

> ID：14441557
> 
> 赞同：1
> 
> 时间：2013-01-21T15:11:40.987
> 
> 标签：c#, .net, azure, timeout

我有一个包含一些上传字段的表单。在大多数位置，表格执行没有问题。但是对于某些地方（到目前为止，我已经在新加坡的 2 个不同地方亲身体验过），表单在提交时几乎总是超时，甚至文件上传字段也是空的。如果我删除上传字段，表单也适用于这些位置。

我已按如下方式跟踪请求。在没有可以正常工作的字段的表单上：

> 请求 URL：http://opentraits.com/bogdan-litescu/communities/new2 请求方法：POST 状态码：302 找到请求标头查看源接受：text/html,application/xhtml+xml,application/xml;q=0.9, */*;q=0.8 Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3 Accept-Encoding:gzip,deflate,sdch Accept-Language:en-US,en;q=0.8 缓存-Control:max-age=0 Connection:keep-alive Content-Length:1180 Content-Type:multipart/form-data; 边界=----WebKitFormBoundaryijq2AW8yKt0E8wSc Cookie：ASP.NET_SessionId=...... 主机：opentraits.com 来源：http://opentraits.com 引用：http://opentraits.com/bogdan-litescu/communities/new2 User-Agent:Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17 Request Payload ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="身份证"
> 
> 0 ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称=“名称”
> 
> ewfwefwevv ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="网站"
> 
> ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="关于"
> 
> ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="迭代启用"
> 
> false ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="迭代下一个开始"
> 
> 2013-01-28 ------WebKitFormBoundaryijq2AW8yKt0E8wSc 内容配置：表单数据；名称="迭代长度"
> 
> 2 ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="迭代暂停"
> 
> 0 ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="迭代总点数"
> 
> 10 ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; 名称="迭代点比例"
> 
> 0,1,2,3 ------WebKitFormBoundaryijq2AW8yKt0E8wSc Content-Disposition: form-data; name="IncentivesEnabled"
> 
> false ------WebKitFormBoundaryijq2AW8yKt0E8wSc-- Response Headersview source Cache-Control:private, s-maxage=0 Content-Length:143 Content-Type:text/html; charset=utf-8 日期：星期一，2013 年 1 月 21 日 14:53:20 GMT 位置：/bogdan-litescu/ewfwefwevv P3P:CP: NOI ADM DEV COM NAV 我们的 STP 服务器：Microsoft-IIS/8.0 Set-Cookie:.ASPXAUTH =BE19A758026293C73831096A1D96D428C08C60C45D20CDEED0F567E563F9EB0EC82B8FFA550D062605A7369EA00E78899E02075D2EFDC7319C71AA0574C3661A4E3F9D606FB731AD1EB8CEC6A41ACDB135692B9CFFA415BBE884E307B3D6F2DEFAC53F3F7B80B5B3671503D83FE22C4A41BDA967F83AF60E158E68B601CEC53CB760E256; 过期=格林威治标准时间 2013 年 8 月 9 日星期五 14:53:18；路径=/; HttpOnly X-AspNet-Version:4.0.30319 X-AspNetMvc-Version:4.0 X-Powered-By:ASP.NET

对于上传字段超时的表单：

> 请求 URL：http://opentraits.com/bogdan-litescu/communities/new Request Headersview source Accept:text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Content-Type:多部分/表单数据；边界=----WebKitFormBoundaryUq7yyIv4EnP2hJTA 来源：http://opentraits.com 参考：http://opentraits.com/bogdan-litescu/communities/new 用户代理：Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 （KHTML，如 Gecko）Chrome/24.0.1312.52 Safari/537.17 请求负载 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="身份证"
> 
> 0 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称=“名称”
> 
> wefewfwefw ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="图标"; filename="" 内容类型：应用程序/八位字节流
> 
> ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="标志"; filename="" 内容类型：应用程序/八位字节流
> 
> ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="网站"
> 
> ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="关于"
> 
> ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="迭代启用"
> 
> false ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="迭代下一个开始"
> 
> 2013-01-28 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA 内容处置：表单数据；名称="迭代长度"
> 
> 2 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="迭代暂停"
> 
> 0 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="迭代总点数"
> 
> 10 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; 名称="迭代点比例"
> 
> 0,1,2,3 ------WebKitFormBoundaryUq7yyIv4EnP2hJTA Content-Disposition: form-data; name="IncentivesEnabled"
> 
> false ------WebKitFormBoundaryUq7yyIv4EnP2hJTA--

因此，只需将上传字段放在表单上，​​许多请求标头就不再在帖子中发送。我已经没有调试的想法了。它与 Asp.Net MVC、Azure、互联网提供商有关吗？为什么某些标头不会仅在某些位置随请求一起发送？

非常感谢任何帮助解决这个问题！

**更新**

我已经在[http://opentraits.com/test.html](http://opentraits.com/test.html) 的纯 html 文件中隔离了表单。后端只是重定向回 test.html。如果我从我的位置尝试，我会看到一些请求标头没有传递并且请求超时。如果我尝试从其他位置使用远程桌面，它工作正常 - 标题都在那里，它重定向回 test.html。

**Update2** 后端是 Asp.NET MVC 模型。

> ```
> public class CommunityModel
> {
>     public int Id { get; set; }
> 
>     [Required]
>     [StringLength(255, ErrorMessage = "The {0} must be less than {1} characters long.")]
>     public string Name { get; set; }
> 
>     [StringLength(255, ErrorMessage = "The {0} must be less than {1} characters long.")]
>     public string Website { get; set; }
> 
>     [StringLength(1000, ErrorMessage = "The {0} must be less than {1} characters long.")]
>     public string About { get; set; }
> 
>     public HttpPostedFileBase Icon { get; set; }
> 
>     public HttpPostedFileBase Logo { get; set; }
> 
>     ....................
> } 
> ```

然后通过简单的重定向在控制器中处理：

> ```
> [HttpPost]
> public ActionResult New2(string entityId, CommunityModel communityModel)
> {
>     return new RedirectResult("/test.html");
> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:01:00.853

尝试设置

```
context.Response.BufferOutput = false; 
```

也**不要设置**内容长度。

# event-handling - Starling / ActionScript 3 向 Main 发送信号事件

> ID：14441563
> 
> 赞同：0
> 
> 时间：2013-01-21T15:11:55.947
> 
> 标签：event-handling, main, starling-framework, actionscript-3

嗨，我对 Starling/ActionScript 3 有一点设计问题。

我想做的很简单

```
 dispatchEvent( new flash.events.Event("CloseApp",true)); //send closing bubble events 
```

虽然我在 Main.as 中有以下方法（主要扩展 flash.display.Sprite）

```
 public Main():void //constructor
 {
     addEventListener( "CloseApp" , onCloseApp);
     _starling = new Starling(Game, stage); //everythings work ok
     _starling.start(); //nice 3d stuff and interactive menu ok.
 }

 //closing event handling: close the APP
 public function onCloseApp( e:flash.events.Event): void
 {
     NativeApplication.nativeApplication.exit();
 } 
```

似乎没有办法将事件发送到“Main”，而所有其他类都正确捕获事件。基本上“退出”按钮是唯一在我的应用程序中不起作用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:09:48.327

您的事件只会传播到您的游戏实例。我认为应该是 _starling.root

所以根据我看到的你应该调用 _starling.root.addEventListener("CloseApp", onCloseApp);

顺便说一句，如果您的按钮是 Starling 显示对象，则它应该调度一个 Starling 事件，而不是 Flash 事件。您可以使用新创建的`dispatchEventWith('CloseApp')`

最后，我建议您将回调签名更改为 `public function onCloseApp( e:Object):void`以防止事件类冲突。

[编辑] 这是我将如何处理您的案件。如果您使用 starling >1.2，它应该可以工作：

1.  我会像这样改变 Main ：

    ```
    public static const EVT_CLOSEAPP:String = 'close app';
    public Main():void //constructor
    {
      _starling = new Starling(Game, stage); //everythings work ok
      _starling.start(); //nice 3d stuff and interactive menu ok.
      _starling.addEventListener(EVT_CLOSEAPP , onCloseApp);
    }
    //closing event handling: close the APP
    public function onCloseApp( e:Object): void
    {
      NativeApplication.nativeApplication.exit();
    } 
    ```

2.  然后，在您创建关闭按钮的任何课程中

    ```
    //... i assume your button is in a variable btn
    btn.addEventListener(Event:TRIGGER, onCloseBtn);//this is starling.event.Event
    //...
    protected function onCloseBtn(_e:Event)
    {
      Starling.current.dispatchEventWith(Main.EVT_CLOSEAPP);
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:18:14.327

这是因为 Starling[有自己的事件调度版本](http://forum.starling-framework.org/topic/why-another-eventdispatcher-and-event-classes)。

应该工作的是

1.  调度 a`starling.events.Event`而不是 a`flash.events.Event`
2.  直接在`_starling`or`_starling.stage`对象上添加侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:17:18.940

我不是八哥的经验开发人员，但我有类似的问题，我通过添加静态变量并从那里调用方法解决了这个问题。在你的情况下，你可以使用这样的东西：

在你的游戏类中添加： public static var mainDoc: MovieClip;

在您的主要方法中添加： Game.mainDoc = this;

然后在您的 Game 类中，您可以调用方法 mainDoc.onCloseApp() 而不是引发事件

你也可以尝试 _starling.addEventListener 或 _starling.stage.addEventListener 说 Antoine Lassauzay

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-08T23:52:41.850

@Boris 已经解释过了。

我已经解决了问题。

示例我从 App.as 中的 flash.filesystem.File 制作了 File（我的应用程序是由 Moonshine 创建的）和从 feathers.controls.TextInput 制作的 TextInput；在 Main.as 与 Starling 的事件一样

像那样：

```
package
{
    import Main;
    import feathers.utils.ScreenDensityScaleFactorManager;

    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageOrientation;
    import flash.display.StageScaleMode;
    import flash.display3D.Context3DProfile;
    import flash.display3D.Context3DRenderMode;
    import flash.events.Event;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import flash.system.Capabilities;
    import flash.utils.ByteArray;

    import starling.core.Starling;
    import flash.net.FileFilter;

    [SWF(width="640",height="480",frameRate="60",backgroundColor="#4a4137")]
    public class NewFeathersSDKDesktopProject extends Sprite
    {
        public function NewFeathersSDKDesktopProject()
        {
            if(this.stage)
            {
                this.stage.scaleMode = StageScaleMode.NO_SCALE;
                this.stage.align = StageAlign.TOP_LEFT;
            }
            this.mouseEnabled = this.mouseChildren = false;
            this.showLaunchImage();
            this.loaderInfo.addEventListener(Event.COMPLETE, loaderInfo_completeHandler);
        }

        private var _starling:Starling;
        private var _scaler:ScreenDensityScaleFactorManager;
        private var _launchImage:Loader;
        private var _savedAutoOrients:Boolean;

        ...

        private function loaderInfo_completeHandler(event:Event):void
        {
            Starling.multitouchEnabled = true;
            this._starling = new Starling(Main, this.stage, null, null, Context3DRenderMode.AUTO, Context3DProfile.BASELINE);
            this._starling.supportHighResolutions = true;
            this._starling.skipUnchangedFrames = true;
            this._starling.start();
            if(this._launchImage)
            {
                this._starling.addEventListener("rootCreated", starling_rootCreatedHandler);
            }

            this._scaler = new ScreenDensityScaleFactorManager(this._starling);
            this.stage.addEventListener(Event.DEACTIVATE, stage_deactivateHandler, false, 0, true);

            // dispatch from Main.as dispatchEventWith();
            this._starling.addEventListener("trigger", button_triggeredHandler)
        }

        ...

        private var fileopen:File;
        public function button_triggeredHandler(event:Object):void
        {
            fileopen = new File();
            var txtFilter:FileFilter = new FileFilter("Text", "*.as;*.css;*.html;*.txt;*.xml");
            try 
            {
                fileopen.browseForOpen("Open", [txtFilter]);
                fileopen.addEventListener(Event.SELECT, fileSelected)
            }
            catch (error:Error)
            {
                trace("Failed:", error.message);
            }
        }

        public function fileSelected(event:Event):void
        {
            Main.textinput.text = fileopen.nativePath;
        }

    }
} 
```

和 Main.as

```
package
{
    import feathers.controls.Button;
    import feathers.controls.TextCallout;
    import feathers.themes.MetalWorksDesktopTheme;

    import starling.display.Sprite;
    import starling.core.Starling;
    import starling.events.Event;
    import feathers.core.Application;
    import feathers.controls.TextInput;

    public class Main extends Application
    {
        public function Main()
        {
            new MetalWorksDesktopTheme();
            super();

            this.addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
        }

        protected var button:Button;
        public static  var textinput:TextInput;

        protected function addedToStageHandler(event:Event):void
        {
            this.removeEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);

            this.button = new Button();
            this.button.label = "Choose";

            textinput = new TextInput();

            //an event that tells us when the user has tapped the button.
            this.button.addEventListener(Event.TRIGGERED, button_triggeredHandler);

            this.addChild(this.button);
            this.addChild(textinput);

            this.button.x = this.button.y = 10;
            textinput.x = 90;
            textinput.y = 10;
            textinput.width = 400;
        }

        private function button_triggeredHandler(event:Event):void
        {
            // Call to Application's class ( App or created by Moonshine IDE )
            Starling.current.dispatchEventWith("trigger");
        }
    }
} 
```

我希望你知道如何让你的空气应用程序像魅力一样正常工作：D

PS：我真的很惊讶为什么Actionscript 3 的开发者一直持续到现在？我以为 Flash Player 已经死了。由于我与 Net 开发人员交流 - 我不希望 AS3 开发人员跳过 Harman Air。我查看了新闻——我很震惊为什么 Harman 公司继续经营并且几乎没有工作。我不明白为什么 Harman 发布带有 Commincial 版本的 Linux :(。和继任者 Moonshine IDE。我觉得还可以。但我希望 Moonshine IDE 上的暗模式。因为我的眼睛很敏感。

# birt - BIRT - 检查参数是否存在于母版页标题部分。

> ID：14441565
> 
> 赞同：0
> 
> 时间：2013-01-21T15:12:03.710
> 
> 标签：birt

我正在使用 birt 报告版本 2.5.0 我的报告使用一个名为 reportParam 的输入参数。我的报告使用全局母版页，在其标题部分中，我想添加一些文本取决于 reportParam 参数的值。当我使用代码时没有问题：

```
var addedString = "";
if( params["reportParam"].value == 1){
    addedString ="some Added string";
} 
```

我的问题是，由于我的母版页是全局的并被定义为共享资源，它可能被没有的报告使用， `params["reportParam"]`并且对于那些报告，将引发异常并且不会生成报告。我需要一种方法来检查是否`params["reportParam"]`存在。

我已经看到了这个问题的解决方案：

```
var addedString = "";
var params = reportContext.getDesignHandle().getAllParameters();
//traverse that list
for(var i=0; i<params.size(); i++) {
  var sParClass = params.get( i ).getClass().toString();
  //we need to check if it is a real parameter and not a parameter group
  if( sParClass == "class org.eclipse.birt.report.model.api.ScalarParameterHandle" ) {
    //do checks here...just a demo how to get name and value
    var parameterName = params.get( i ).getFullName();
    if( parameterName == "ResolutionPRM" ){
        if( params["reportParam"].value == 1 ){
        addedString ="some Added string";
        }
    }   
  }
} 
```

但是这个 solotion 似乎不适用于母版页标题部分，因为 reportContext 未知（母版页部分是正则表达式构建器，而不是识别 reportContext 的脚本部分）。知道如何在母版页中实现我的目标吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:35:08.353

抱歉，但答案比我想象的要简单： var addedString = "";

```
try
{
  if( params["reportParam"].value == 1){
      addedString ="some Added string";
  }
}
catch(err)
{
} 
```

会成功的。如果报告没有`params["reportParam"]`异常，将被抛出并在代码的 catch 部分中捕获，并且，... 一切都会继续，就好像什么都没发生一样。

# android - android - 使用按钮创建 EditText 字段

> ID：14441566
> 
> 赞同：2
> 
> 时间：2013-01-21T15:12:05.633
> 
> 标签：android, android-edittext, buttonclick

我想用一个 Buttonclick 创建一些 EditText 字段，它们有自己的名称（eText1，eText2 ...）例如有一个按钮 +。用户可以单击该按钮来创建一个新的 EditText 字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:00:53.847

您提供的上下文很少，但这段代码可能会让您更进一步：

```
EditText et1, et2, et3;

public void onCreate() {
    et1 = (EditText)findViewById(R.id.et1);
    et2 = (EditText)findViewById(R.id.et2);
    et3 = (EditText)findViewById(R.id.et3);
    et1.setVisibility(View.GONE);
    et2.setVisibility(View.GONE);
    et3.setVisibility(View.GONE);
}

public void clickHandlingMethod(View v) {
    et1.setVisibility(View.VISIBLE);
    et2.setVisibility(View.VISIBLE);
    et3.setVisibility(View.VISIBLE);
} 
```

您只需隐藏所有`EditTexts`，当用户按下 时`button`，使它们可见。

编辑：看到您的用户可能加起来的评论 100 `EditTexts`，您可能想要使一些东西更加动态。试试这个，它会在`Button`点击时创建并添加一个：

```
ScrollView container; // create a scrollView in which you can put all EditTexts
static int totalEditTexts = 0;

public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    container = (ScrollView) findViewById(R.id.scrollView);
}

public void clicked(View view) {
    totalEditTexts++;
    if (totalEditTexts > 100)
        return;
    EditText editText = new EditText(this);
    //if you want to identify the created editTexts, set a tag, like below
    editText.setTag("EditText" + totalEditTexts);
    container.addView(editText);
} 
```

编辑2：完整代码：

```
public class ScrollStuff extends Activity {
    LinearLayout containerLayout;
    static int totalEditTexts = 0;

    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.scroll);
        containerLayout = (LinearLayout)findViewById(R.id.mlayout);
    }

    public void onBackPressed() {
        totalEditTexts++;
        if (totalEditTexts > 100)
            return;
        EditText editText = new EditText(this);
        containerLayout.addView(editText);
        editText.setGravity(Gravity.RIGHT);
        LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams) editText.getLayoutParams();
        layoutParams.width = LinearLayout.LayoutParams.MATCH_PARENT;
        editText.setLayoutParams(layoutParams);
        //if you want to identify the created editTexts, set a tag, like below
        editText.setTag("EditText" + totalEditTexts);

    }
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/mlayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>

</ScrollView> 
```

请原谅我糟糕的命名选择以及我用于点击事件的事实，`onBackPressed()`我很着急。

# hibernate - Hibernate4.1 还支持@Formula 注解吗？

> ID：14441570
> 
> 赞同：0
> 
> 时间：2013-01-21T15:12:18.623
> 
> 标签：hibernate, formula

我试图在我的 Hibernate4.1 实体类之一中使用 @Formula 注释。从一些文章中我了解到这个注释需要放在属性定义上，所以我这样做了。但是什么也没发生。不管公式内容多么简单，Hibernate 只是不停地将属性直接放入生成的 sql 中，然后抛出“invalid identifier”异常，因为物理表中显然没有该名称对应的列。

我只能找到一些关于如何使用 @Formula 的文档，但没有一个文档谈到 Hibernate4 是否仍然支持它。那么这个问题有确定的答案吗？我是否可以以一种或另一种方式使用此注释？

添加内容：示例代码如下：

```
package sample.model;

import java.math.BigDecimal;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

import org.hibernate.annotations.Formula;

@Entity
@Table(name = "STAGE_TRACK", schema = "")
public class StageTrack implements java.io.Serializable {

    // Fields

    private BigDecimal id;
    private Date startTime;
    private Date endTime;

    @Formula("(END_TIME - START_TIME)*24*60")
    private BigDecimal duration;
    public BigDecimal getDuration() {
        return this.duration;

    }
    public void setDuration(BigDecimal duration) {
        this.duration = duration;
    }

    // Constructors
    /** default constructor */
    public StageTrack() {
    }

    /** minimal constructor */
    public StageTrack(BigDecimal id) {
        this.id = id;
    }

    /** full constructor */
    public StageTrack(BigDecimal id, Date startTime, Date endTime) {
        this.id = id;
        this.startTime = startTime;
        this.endTime = endTime;
    }

    // Property accessors
    @Id
    @Column(name = "ID", unique = true, nullable = false, precision = 22, scale = 0)
    public BigDecimal getId() {
        return this.id;
    }

    public void setId(BigDecimal id) {
        this.id = id;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "START_TIME", length = 7)
    public Date getStartTime() {
        return this.startTime;
    }

    public void setStartTime(Date startTime) {
        this.startTime = startTime;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "END_TIME", length = 7)
    public Date getEndTime() {
        return this.endTime;
    }

    public void setEndTime(Date endTime) {
        this.endTime = endTime;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:40:47.823

您的问题是您放置`@Formula`在一个字段上，而其他注释放置在 getter 上，因此`@Formula`被忽略。

您应该选择一种策略并始终如一地应用它（除非您明确地用 覆盖它`@AccessType`）。

```
@Formula("(END_TIME - START_TIME)*24*60")
public BigDecimal getDuration() {
    return this.duration;

} 
```

# android - 指向屏幕后获取EditText的值

> ID：14441572
> 
> 赞同：0
> 
> 时间：2013-01-21T15:12:26.063
> 
> 标签：android, android-edittext, touch-event

我从`EditText`. 当我按回车后获得价值时，一切正常。当我尝试通过单击虚拟键盘外部进行操作时，一切都搞砸了。`"0.00"`我什至在按下屏幕后在 EditText 窗口中看到格式化为的数字，但突然出现错误。我认为这可能有问题

```
cena2 = Float.valueOf(tvCena2.getText().toString()); 
```

因为当我设置`cena2=12`它工作正常。

```
public boolean dispatchTouchEvent(MotionEvent event) {
    View v = getCurrentFocus();
    boolean ret = super.dispatchTouchEvent(event);

    if (v instanceof EditText) {
        View w = getCurrentFocus();
        int scrcoords[] = new int[2];
        w.getLocationOnScreen(scrcoords);
        float x = event.getRawX() + w.getLeft() - scrcoords[0];
        float y = event.getRawY() + w.getTop() - scrcoords[1];

        Log.d("Activity", "Touch event "+event.getRawX()+","+event.getRawY()+" "+x+","+y+" rect "+w.getLeft()+","+w.getTop()+","+w.getRight()+","+w.getBottom()+" coords "+scrcoords[0]+","+scrcoords[1]);
        if (event.getAction() == MotionEvent.ACTION_UP && (x < w.getLeft() || x >= w.getRight() || y < w.getTop() || y > w.getBottom()) ) { 

            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getWindow().getCurrentFocus().getWindowToken(), 0);
        }
        if (checkEmpty(tvCena2)) {
            DecimalFormat df = new DecimalFormat("0.00");
            cena2 = Float.valueOf(tvCena2.getText().toString());
        //  cena2=12;
            tvCena2.setText(String.valueOf(df.format(cena2)));
        } else {
            cena2=0;
        }
    } 
```

日志：

```
01-21 16:16:25.797: E/AndroidRuntime(13140): FATAL EXCEPTION: main
01-21 16:16:25.797: E/AndroidRuntime(13140): java.lang.NumberFormatException
01-21 16:16:25.797: E/AndroidRuntime(13140):    at org.apache.harmony.luni.util.FloatingPointParser.parseFltImpl(Native Method)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:321)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at java.lang.Float.parseFloat(Float.java:323)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at java.lang.Float.valueOf(Float.java:362)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at com.imprezowa.pizza.lukis.GlowneOkno.dispatchTouchEvent(GlowneOkno.java:264)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1695)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2217)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1901)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at android.os.Looper.loop(Looper.java:130)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at android.app.ActivityThread.main(ActivityThread.java:3701)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at java.lang.reflect.Method.invokeNative(Native Method)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at java.lang.reflect.Method.invoke(Method.java:507)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
01-21 16:16:25.797: E/AndroidRuntime(13140):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:09:48.737

我认为你得到 valueOf 而不是解析，

改变

```
cena2 = Float.valueOf(tvCena2.getText().toString()); 
```

至

```
cena2 = Float.parseFloat(tvCena2.getText().toString()); 
```

它应该工作。

# javascript - ExtJS MVC 停止工作

> ID：14441573
> 
> 赞同：1
> 
> 时间：2013-01-21T15:12:27.443
> 
> 标签：javascript, extjs, extjs4.1, extjs-mvc

我在使用 ExtJS MVC 时遇到问题，我不确定发生了什么，因为直到最近我还没有遇到任何问题，我的主应用程序看起来像这样

```
this.sApp = Ext.create('Ext.app.Application', {
        name: 'FileBrowser',
        appFolder: 'fileBrowserApp',
        controllers: ['BrowserController'],
        requires: ['Dashboard.Library'],
        dependencies: {
            css: [],
            js: [] 
```

无论如何，由于某种原因，应用程序正在错误的位置寻找控制器，而不是`fileBrowserApp/controller/BrowserController' it tries to go to 'FileBrowser/controller/BrowserController.js`由于某种原因它不再识别该`appFolder`属性，有人知道为什么吗？我正在使用 ExtJs 4.1。

编辑：让我尝试提出一个更具体的问题，为什么要`Ext.app.Application`尝试将`name`放入应用程序路径而不是`appFolder`? 我认为这不应该发生，是否有另一个可能导致这种情况的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:23:06.320

用于`Ext.application( config );`创建您的应用程序。由于普通类没有[appFolder](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-cfg-appFolder)属性（也没有控制器属性）。除非您有自己的实现，否则依赖关系不存在。

**更新：**

如果是这个问题，您需要参考应用程序，您可以像这样设置它：

```
var context= this;
Ext.create('Ext.app.Application', {
    name: 'FileBrowser',
    appFolder: 'fileBrowserApp',
    controllers: ['BrowserController'],
    requires: ['Dashboard.Library'],
    dependencies: {
        css: [],
        js: []
    }
    init: function() {
        context.sApp = this;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:26:53.040

我能够通过添加以下内容创建解决方法来解决此问题：

```
 init: function () {
            Ext.Loader.setPath('FileBrowser', '/fullPath/fileBrowserApp');
        }, 
```

仍然不确定，为什么上面的原始方式停止工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:06:57.310

您可以通过在 App.JS 中添加代码来更新路径

```
Ext.Loader.setConfig({
    enabled: true,
    setPath: {
        'FileBrowser': '/fullPath/fileBrowserApp'
    }
}); 
```

# android - How can I add an image with HTML.fromHtml

> ID：14441576
> 
> 赞同：1
> 
> 时间：2013-01-21T15:12:31.827
> 
> 标签：android

I am using the method HTML.fromHtml in android to show some about text in my app. Is it possible to add an image into my about text and if so how?

Here is my activity where the aboutText will be started

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate( savedInstanceState );

    setContentView(R.layout.activity_information);

    int versionNumber = 0;
    String versionName = "";

    try{
        PackageInfo pInfo = getPackageManager().getPackageInfo( getPackageName(), 0 );
        versionNumber = pInfo.versionCode;
        versionName = pInfo.versionName;
    } catch (NameNotFoundException e){
        Log.e( TAG, "error while extracting version name and version number" + e.getMessage() );
    }

    TextView about = (TextView)findViewById( R.id.about_text_view );
    Spanned aboutText = Html.fromHtml( "<h1> PDiX Attach, Version " + versionName + "</h1>"
                                         + getString( R.string.about_text ));

    about.setText( aboutText );

} 
```

And the resours R.id.about_text looks like this:

```
 <b>Requirements:</b>
        <br/>The application supports Android Devices with Version 2.2 or higher.
        <br/>HERE I WANT TO ADD AN IMAGE<br/>

        </body>

        ]]> 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:15:31.920

如果要添加图像，则应使用 WebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:09:02.133

我将在这里猜测一下，并假设现在您知道应该使用 WebView 来显示带有本地图像的 HTML。我猜您需要知道的是如何将图像滑入 HTML 字符串。我是这里的新手，所以我不知道我的解决方案是否是最好的，但对于它的价值，这就是我所做的。简而言之，我将位图图像转换为 Base64 字符串。

```
import android.graphics.Bitmap;
import java.io.ByteArrayOutputStream;
import android.util.Base64;

...

    Bitmap image = [insert appropriate code here];
    String encodedImage = null;
    if ( image != null ) {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        image.compress(Bitmap.CompressFormat.PNG, 100, baos); // PNG preserves transparancy 
        byte[] byteArrayImage = baos.toByteArray();
        encodedImage = Base64.encodeToString(byteArrayImage, Base64.DEFAULT);
        String imageHTML = "<img src='data:image/jpg;base64," + 
            encodedImage + "'/>";
    } 
```

我希望这有帮助。（作为附言，我感谢所有在网上论坛上回答此类问题的人。你们的耐心和善意帮助我学到了很多东西。）

# sql - Compare the value of multiple columns from two different databases

> ID：14441579
> 
> 赞同：0
> 
> 时间：2013-01-21T15:12:39.503
> 
> 标签：sql, sql-server, sql-server-2008

I have two databases `ABC` and `XYZ` with the same table structure, but different data.

I want to compare the values of `col1, col2, col3, col4` from `tbl_123` from both databases, and return an additional column `RESULT` as 1 if values in both tables are same and 0 it they are not.

`col1` is the primary key in both tables, and the other columns are nullable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:30:49.340

```
SELECT ISNULL(T1.col1, T2.col1) AS col1,
       CASE
         WHEN NOT EXISTS(SELECT T1.col2,
                                T1.col3,
                                T1.col4
                         EXCEPT
                         SELECT T2.col2,
                                T2.col3,
                                T2.col4) THEN 1
         ELSE 0
       END                      AS Result,
       T1.col2,
       T2.col2,
       T1.col3,
       T2.col3,
       T1.col4,
       T2.col4
FROM   XYZ.dbo.tbl_123 T1
       FULL OUTER JOIN ABC.dbo.tbl_123 T2
         ON T1.col1 = T2.col1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:25:24.973

假设您认为`NULL`是相同的（而 SQL Server 没有）：

```
SELECT 
  d1.col1, d1.col2, d1.col3, d1.col4,
  d2.col1, d2.col2, d2.col3, d2.col4,
  [RESULT] = CASE 
    WHEN (d1.col2 = d2.col2 OR (d1.col2 IS NULL AND d2.col2 IS NULL))
     AND (d1.col3 = d2.col3 OR (d1.col3 IS NULL AND d2.col3 IS NULL))
     AND (d1.col4 = d2.col4 OR (d1.col4 IS NULL AND d2.col4 IS NULL))
    THEN 1 ELSE 0 END
FROM ABC.dbo.tbl_123 AS d1
FULL OUTER JOIN
XYZ.dbo.tbl_123 AS d2
  ON d1.col1 = d2.col2; 
```

# c++ - 函数模板的隐式实例化

> ID：14441583
> 
> 赞同：3
> 
> 时间：2013-01-21T15:12:48.273
> 
> 标签：c++, templates

我有以下代码，我只是为了练习函数模板而构思的。

```
#include <iostream>

template <typename T>
T fun( const T &t ) { return t; }

struct A {
    int dataf;
    A( int a ) : dataf(a) { std::cout << "birth\n"; }
    friend A fun( const A & );
};

int main(){
    A a( 5 );
    fun( a );   
    return 0;
} 
```

虽然我收到以下错误：

```
code.cc:(.text+0x32): undefined reference to `fun(A const&)'
collect2: ld returned 1 exit status 
```

我很好理解类模板，但我仍然对函数模板感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:13:41.100

将朋友声明更改为：

```
template <class T> friend T fun( const T & ); 
```

或者：

```
friend A fun<A>( const A & ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:19:10.967

在重载解决期间，普通函数优先于函数模板。内部自由友元函数的声明与`A`in 中的调用完全匹配`main`。声明是编译器需要的全部，所以它编译得很好，但是链接器找不到定义，因为你从来没有定义过它。

# ruby-on-rails - Rails controller and action specific titles from application_helper

> ID：14441593
> 
> 赞同：1
> 
> 时间：2013-01-21T15:13:31.323
> 
> 标签：ruby-on-rails, conditional, helper

Each page of my site has a unique title. I'm repeating myself and adding code to multiple pages when I feel I can do this with a layout and helper. I'll show my working code and the solution I'm developing which is failing and I need some help on

Page titles are basically of this form:

```
<title>Company Name - Page Description</title> 
```

Right now my layout does this:

```
<%= content_for?(:page_title) ? yield(:page_title) : default_page_title %> 
```

I have a application helper method like this:

```
def default_page_title
    content_tag(:title, 'My Company Name - the default description here')   
end 
```

then each page has something like this:

```
<% content_for(:page_title) do %>
    <%= content_tag(:title,'My Company Name - Page specific description here') %>
<% end %> 
```

It works but I do not want to add these snippets to the top of every page... I also do not want to repeat "My Company Name - " on each page. I want to develop a solution where the page descriptions are all filled out in an application helper and the application layout selects the right one based on controller and action.

I'm working on a helper like below (failing for various reasons I hope someone can help me with):

```
def page_title
  content_tag(:title, "My Company Name - " + page_description )

  def page_description

    case params[:controller].params[:action]
    while public.index
    'Description for public controller index action'
    while public.contact
    'Description for public controller contact action'
   end
  end
end 
```

This will allow me to make page specific changes to title in the application_helper instead of modifying each page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:27:23.440

我不会推荐这个..我在一些项目中自己做了，但一段时间后最终得到了视图中指定的各个标题。如果您有一些更复杂的表单/工作流程，则不容易识别路径以及相关的操作...

# php - 覆盖块时避免翻译丢失

> ID：14441596
> 
> 赞同：2
> 
> 时间：2013-01-21T15:13:38.817
> 
> 标签：php, magento

如果我重写一个块并且开发者模式处于活动状态，则不再显示标准翻译。如何让 Magento 退回到模块的原始翻译。

这与[Magento 有关：在重写控制器时避免丢失翻译](https://stackoverflow.com/questions/11882584/magento-avoid-loss-of-translations-when-rewriting-controllers)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:14:38.880

可以覆盖用于确定应使用哪些翻译的块中的模块名称：

```
class Acme_GreatModule_Block_Customer_Account_Navigation extends Mage_Customer_Block_Account_Navigation
{
    /**
     * Set the original module name to avoid breaking translations
     */
    public function __construct()
    {
        parent::__construct();
        $this->setModuleName('Mage_Customer');
    }     
... 
```

# visual-studio - Visual Studio 2012 unable to load project with wildcard and property ItemGroup include

> ID：14441597
> 
> 赞同：1
> 
> 时间：2013-01-21T15:13:38.877
> 
> 标签：visual-studio, msbuild, visual-studio-2012

i have a simple .vcxproj File which looks like this:

```
...
<PropertyGroup>
  <MyProjectName>sample_project</MyProjectName>
</PropertyGroup>
...
<ItemGroup>
  <ClCompile Include="..\$(MyProjectName)\*.cpp" />
</ItemGroup>
... 
```

Visual Studio 2012 is unable to load this project and states "...vcxproj : error : Object reference not set to an instance of an object.". Running MSBuild on the command line will build the project just fine as expected, i.e. it will compile all .cpp files in ..\sample_project.

These two variants will work in Visual Studio:

```
<ClCompile Include="..\sample_project\*.cpp" />

<ClCompile Include="..\$(MyProjectName)\main.cpp" /> 
```

Just the combination of a wildcard and a property fails.

Is this a bug in Visual Studio, and if is there a workaround for this? I found some stuff on SO regarding getting advanced wildcards to work in MSBuild, but nothing about that a simple construct such as this - which works in MSBuild without a problem - doesn't work in Visual Studio.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:32:30.553

在丢弃整个项目文件目录并从头开始手动重建后，结果发现 Visual Studio 有问题的文件不是 MSBuild 项目文件本身，而是 .filters 文件。似乎 Visual Studio 中的过滤无法使用这种项目列表。没有 .filters 文件将允许 Visual Studio 打开项目并且一切正常。但是提供任何类型的 .filters 文件，甚至尝试在 IDE 本身中添加过滤器都会导致错误消息，并且 Visual Studio 将拒绝使用该项目，直到过滤器文件被删除并重新启动 IDE。

这个错误有点烦人，我希望我的努力能帮助遇到同样问题的任何人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:57:14.347

尝试这个。

```
<PropertyGroup>
    <Sources>*.c</Sources>
</PropertyGroup>
<ItemGroup>
    <!-- This doesn't work... -->
    <!-- <ClCompile Include="$(Sources)" /> -->
    <!-- ...but this does. -->
    <ClCompile Include="$(Sources);Dummy" Exclude="Dummy" />
</ItemGroup> 
```

# java - Signalling NDK thread from Java

> ID：14441600
> 
> 赞同：0
> 
> 时间：2013-01-21T15:13:46.960
> 
> 标签：java, android, android-ndk

My app is written 99% in C with just some Java helper functions for things not available in the NDK. As a file chooser I'm using a ListActivity that I'm starting like this from the Java side:

```
Intent myIntent = new Intent(this, FileChooser.class);
startActivity(myIntent); 
```

While this ListActivity is running, my NDK thread waits for the user to select a file and close the ListActivity using

```
ALooper_pollAll(); 
```

Whenever an event wakes up my NDK thread, I'm calling the Java side using JNI to check a flag that indicates whether the ListActivity is still open or has been closed by the user. In my ListActivity's onDestroy() method I have the following code:

```
@Override
protected void onDestroy() {    
    super.onDestroy();          
    if(isFinishing()) listActivityDone = true;      
} 
```

Now my problem is that when the user presses the BACK button in the ListActivity, my NDK thread gets woken up correctly but unfortunately, onDestroy() is called *after* my NDK thread has been woken up, thus my NDK thread does not get the correct value of the flag "listActivityDone". When my NDK thread is woken up, "listActivityDone" is still FALSE because onDestroy() is called immediately after my NDK thread gets woken up.

So what I need to do to solve this problem is wake up the NDK thread once again after having set the flag "listActivityDone" to TRUE. Does anybody know how this can be achieved?

Of course, I could call a C function from Java and then call ALooper_wake() but I'm almost sure that there is a nicer version to wake up the NDK thread from the Java side. Any ideas?

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:26:32.583

你能处理`APP_CMD_TERM_WINDOW`正确关闭的命令吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:24:42.567

也许你可以将你的标志移到 onPause、onResume：

```
@Override
protected void onPause() {    
    super.onPause();          
    if(isFinishing()) listActivityDone = true;      
}

@Override
protected void onResume() {    
    super.onResume();          
    if(!isFinishing()) listActivityDone = false;      
} 
```

这样它就被更早地调用了。如果 onPause 不适用于您的特定场景，您也可以考虑将其放入 onStop

# ios - Xcode 无法添加静态库

> ID：14441604
> 
> 赞同：5
> 
> 时间：2013-01-21T15:14:05.227
> 
> 标签：ios, xcode, static-libraries

我创建了一个大型框架，打算在将要创建的几个应用程序中使用它，但是我不知道如何创建和导入静态库。我一直在关注本教程，因为它似乎是我能找到的最新的

[http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)

该教程说在创建静态库后，将 .a 文件与 .h 文件一起复制到文件夹中；

```
Now, just drag this folder into the project and Xcode will set up 
all of the linking automagically. 
```

但是，当我将该文件夹复制到 xCode 中时，该文件夹是蓝色的，我无法导入任何文件

然后我尝试了这个教程

[http://www.blog.montgomerie.net/easy-xcode-static-library-subprojects-and-submodules](http://www.blog.montgomerie.net/easy-xcode-static-library-subprojects-and-submodules)

我设法让它像这样导入示例项目

```
 #import  <SampleSubproject/SampleSubproject.h> 
```

但我无法导入库中的任何其他文件。

我一直在这个时间，我似乎找不到一个简单的简明教程来解释如何正确地实际添加静态库，似乎有很多不同的方法来做到这一点。有人可以告诉我最简单的方法来做到这一点。

另外我听说静态库不能在 iOS 模拟器中编译，这是真的吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:31:28.893

Xcode 4 不会让您将文件文件夹拖入。它只会失败。您应该首先在 Xcode 中创建一个组（Xcode 文件夹），然后您可以通过这种方式拖放文件。

另一种选择是将文件夹复制到项目根文件夹，然后将文件拖放到 Xcode 中并创建对文件的引用，而不是让 Xcode 将它们复制/粘贴到任何感觉的地方。

静态库不是为设备或模拟器编译的。它们在创建或构建时被预编译。引用已内置到您的项目中，但在您编译代码时不会重新构建库。

要考虑的另一件事是，Xcode 4 处理创建静态库的方式大不相同。在 Xcode 3 之前，一个静态库将被编译成 1 个大型通用静态库，可以同时处理设备和模拟器。现在，该默认操作未完成。您仍然可以通过构建脚本执行此操作，该脚本将按照他们需要的方式将它们打包在一起，但这不是默认操作。负责静态库的开发人员必须这样做。因此，如果您以这种方式从 3rd 方开发人员那里获取源代码，请确保您了解该库的构建方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:06:06.993

我终于找到了一个网站，它解释了如何通过使用从终端运行的脚本组合这两个库来为 IOS 设备和模拟器创建一个通用库。

[http://www.nearinfinity.com/blogs/tyler_vernon/2012/07/17/creating-and-using-static-libraries-for-iphone-using-xcode-4.3.html](http://www.nearinfinity.com/blogs/tyler_vernon/2012/07/17/creating-and-using-static-libraries-for-iphone-using-xcode-4.3.html)

希望能帮助任何其他正在做噩梦的人。令人惊讶的是，Apple 是如何创造出本应如此简单、如此困难的东西的！

# scikit-learn - way to have more than one prediction with classifier

> ID：14441608
> 
> 赞同：2
> 
> 时间：2013-01-21T15:14:16.513
> 
> 标签：scikit-learn

I'm using scikit learn for document classification and i would like to know if there is a way to predict more than one classe (with the coresponding probability)

Here is the code i'm using :

```
vectorizer = CountVectorizer(max_df=4000, min_df=4, strip_accents="unicode", analyzer="word", max_features=4000,stop_words=stopwords, charset="utf-8", token_pattern="\w{4,}") 
x1_vect=vectorizer.fit_transform(x1)

clf = OneVsRestClassifier(LinearSVC())
#or
#clf = MultinomialNB()

clf.fit(x1_vect,y1)
prediction = clf.predict(xpred_vect) 
```

I get only on prediction and would like to have more (with corresponding probability)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:01:09.610

`linearSVC`为此`.decision_function()`。其他一些分类器给出 0 到 1 之间的预测`.predict_proba()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:46:52.420

事实上（我回答了我自己的问题），对于一些分类器（我使用的linearSVC），有一种方法叫做

```
clf.decision_function 
```

它给出了“样本的置信度分数，即该样本到超平面的有符号距离”

# python - 使用@abstractproperty 和@abstractmethod 实现/覆盖的实际差异

> ID：14441619
> 
> 赞同：5
> 
> 时间：2013-01-21T15:14:43.073
> 
> 标签：python, properties, abstract, abc

考虑一个带有函数的抽象基类，您希望每个后续子类都覆盖该函数。使用 abc 模块和 ABCMeta；是否使用`@abstractproperty`或`@abstractmethod`实际上强制子类/开发人员实现创建装饰器指定的函数类型？从我的实验中，您可以使用子类中的方法覆盖抽象属性和使用属性的抽象方法。

这个概念不正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:17:40.293

这个概念是正确的；该`ABCMeta`代码不区分 a`abstractproperty`和 a `abstractmethod`。

这两个装饰器都为被装饰的项目添加了一个属性`.__isabstractmethod__`，`ABCMeta`用于将`.__abstractmethods__`属性 (a `frozenset`) 添加到您定义的 ABC。然后，该`object`类型会防止创建任何类的实例，其中列出的任何名称`.__abstractmethods__`都没有具体实现。没有检查那里的功能与属性。

为了显示：

```
>>> from abc import *
>>> class C:
...     __metaclass__ = ABCMeta
...     @abstractmethod
...     def abstract_method(self): pass
...     @abstractproperty
...     def abstract_property(self): return 'foo'
... 
>>> C.__abstractmethods__
frozenset(['abstract_method', 'abstract_property']) 
```

通过在子类中为这些创建新的覆盖，`ABCMeta`该类将使用该属性找到更少的方法或`. __isabstractmethod__`属性，从而使结果`__abstractmethods__`集更小；一旦集合为空，您就可以创建此类子类的实例。

这些检查在[`ABCMeta.__new__`构造函数](http://hg.python.org/cpython/file/2.7/Lib/abc.py#l86)中进行，并且不进行匹配描述符类型的检查：

```
cls = super(ABCMeta, mcls).__new__(mcls, name, bases, namespace)
# Compute set of abstract method names
abstracts = set(name
             for name, value in namespace.items()
             if getattr(value, "__isabstractmethod__", False))
for base in bases:
    for name in getattr(base, "__abstractmethods__", set()):
        value = getattr(cls, name, None)
        if getattr(value, "__isabstractmethod__", False):
            abstracts.add(name)
cls.__abstractmethods__ = frozenset(abstracts) 
```

您必须创建一个`ABCMeta`覆盖该`__new__`方法的子类，并检查基类上命名的任何抽象方法或属性是否确实与非抽象方法或属性匹配`cls`。

# dart - Dart 中的自定义集合？

> ID：14441620
> 
> 赞同：3
> 
> 时间：2013-01-21T15:14:48.313
> 
> 标签：dart

我试图弄清楚如何在 Dart 中创建自定义对象的自定义集合并将 List 作为抽象类我认为除了在自定义集合中“拥有”一个 List 之外别无他法：

```
class MenuItemCollection {

  List<MenuItem> _items;

  MenuItemCollection() {
    _items = new List<MenuItem>();
  }

  List<MenuItem> get items => _items;
} 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:36:55.250

您可以执行以下操作：

```
class MenuItemCollection implements List<MenuItem> {
  final _list = new List<MenuItem>();
  MenuItemCollection();

  noSuchMethod(InvocationMirror invocation) => invocation.invokeOn(_list);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:18:47.510

您可以使用

> 列表<E>
> 
> 队列<E>
> 
> 设置<E>

或者只是一个数组`E[]`

最好的方法是使用 Collection 框架（所以前 3 个选项）。但如果你愿意，你甚至可以制作一个递归数组。

# c++ - 多维网格使用什么数据结构？(c++)

> ID：14441624
> 
> 赞同：7
> 
> 时间：2013-01-21T15:15:08.343
> 
> 标签：c++, testing, data-structures

我需要编写一个测试平台来测试特定的算法。该系统应该可以通过输入和 3 维来定义 - 类似于片上网络，它具有节点和链接元素来连接它们。由于节点之间的维度和链接，我在确定要使用的数据结构方面遇到了一些困难——像 array[x][y][z] 这样的 3 维数组很难作为指针处理，在添加链接时有缺点连接节点（在结构中留下几个空值孔）。二叉搜索树很难实现，因为它是网格类型。出于这个原因，我考虑过做一个链接更容易实现的链接列表。（最终的测试平台应该类似于下面的演示文稿）其中每个链接也被映射下来，因为它们包含通信时间表

```
01-------02-------03
| \      | \      | \
|  10----|--11----|--12
|  | \   |  | \   |  | \
|  |  19-|--|--20-|--|--21
04-------05-------06 |  |
| \   |  | \|  |  | \|  |
|  13----|--14----|--15 |
|  | \|  |  | \|  |  | \|
|  |  22-|--|--23-|--|--24
07-------08-------09 |  |
  \|  |    \|  |    \|  |
   16-------17-------18 |
     \|       \|       \|
      25-------26-------27 
```

你们中的任何人都可以就c ++中哪种类型的结构适合这种任务提供一些帮助。给定 x、y 和 z 的维度参数，完成的程序应该能够生成这样的结构。

目前粗略的轮廓应该是这样的

```
>class Node{
>  public:
>   Link* north;
>   Link* east;
>   Link* south;
>   Link* west;
>   Link* up;
>   Link* down;
>   //will contain a node specific scheduler
>}
>
>class Link{
>
>   Node* A;
>   Node* B;
>   //will contain a link specific scheduler
>} 
```

编辑 22.01.2013

首先，它是一个模拟三维网络片上多处理器系统的测试平台。该系统必须完成的任务是能够测试某些算法以帮助将任务映射到这些节点（每个节点都连接到一个处理器内核）。鉴于此，内存消耗可能不是问题，因为它仅用于测试，正如我所说，因此系统必须同时具有节点和链接，因为它们都不能被两个事件使用同时（链接上的通信将阻塞所有其他通信等，这就是我写类类型节点/链接将在其中包含调度程序的原因）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T15:47:28.623

这在很大程度上取决于您将在该结构上执行**什么样的操作。**你必须做*搜索*吗？如果是这样，是什么类型的：基于价值的还是基于位置的？您是否必须对其执行*转换*？您是否必须按顺序重复访问其所有元素？您是否必须根据元素在网格中的*位置访问元素？*你的结构是*稀疏*的还是*密集的*？

此外，您想尽量减少*创建*时间、*搜索*时间、*导航*时间或*转换*时间吗？这一切都为做出决定提供了基本信息。

我**不会**寻求基于节点和链接的解决方案，因为它是：

1.  *在内存消耗*方面很昂贵（由于额外的链接指针）；
2.  *在复杂性*方面很昂贵（导航所有节点需要跟踪所有链接，因此没有随机访问），并且；
3.  *在数据局部性*方面代价高昂（节点将被单独分配并分布在不同地址的堆中，这将产生许多缓存未命中并减慢您的程序）；
4.  *容易出错*（弄乱链接很容易，特别是如果您使用原始指针并且不想为智能指针的内存开销付费）

在不太了解您的要求的情况下，我可能会建议您查看[Boost.MultiArray](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/user.html)。

如果您想自己做事，那么（同样，在不太了解您的要求的情况下）我建议您使用 a `vector<vector<vector<double>>>`，它相对简单，没有固定大小并允许您在运行时调整大小，保证您O(1) 通过下标运算符访问以及数据的*某些*局部性（这里有几个向量，所以只要从*一个*向量访问数据就可以了）。

一个普通的 C 风格的多维数组也是一种可能，但它本质上是不安全的，如果我是你，这将使它成为最后的选择（另外，如果你的结构很大，分配一个连续的内存块可能是不可能的） .

# twitter-bootstrap - 在引导程序上使用 unicode 时出错

> ID：14441638
> 
> 赞同：0
> 
> 时间：2013-01-21T15:15:46.033
> 
> 标签：twitter-bootstrap

我有一种情况，引导程序没有正确读取 unicode，而只是 html/css 正在按原样显示 unicode。

![以上为错误，以下为预期结果][1]

发生了什么？应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:36:38.503

您的页面标题中的代码是否至少包含以下内容？

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>....</title>
</head> 
```

# delphi - 我们可以在运行时使用 dcu（Delphi 编译单元）吗？

> ID：14441648
> 
> 赞同：2
> 
> 时间：2013-01-21T15:15:55.113
> 
> 标签：delphi, dll, bpl, dcu

我们可以使用 dcu 像 dll 这样的运行时吗？例如，显示在 dcu 文件中编译的表格。我有这个问题，因为我想开发可插入的应用程序。作为 Delphi 程序员，据我所知，我只有两个选项可以做到这一点，基于 dll 或基于 bpl。我喜欢基于 dll 的，因为它不依赖于 delphi 版本，但是.. 将表单保存到几个 dll 中，使每个 dll 的大小都很大，并且它的总大小比单个 .exe 大得多。使用 bpl，它取决于编译 bpl 和 exe 的 Delphi 版本。

或者有人可以解释一个技巧或策略，以便使保存表单的.dll 变得尽可能小？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:23:17.557

不，您不能直接从运行时访问 DCU 文件:(

将 Delphi 表单存储在 DLL 中是很常见的做法，Google 应该能够提供很多示例。

[Delphi Dll - 一个 dll 中的多个表单/单元](https://stackoverflow.com/questions/11601716/delphi-dll-more-than-one-form-unit-in-one-dll)

[http://www.link-rank.com/dll.htm](http://www.link-rank.com/dll.htm)

[http://en.allexperts.com/q/Delphi-1595/2008/6/Call-procedure-DLL-Form.htm](http://en.allexperts.com/q/Delphi-1595/2008/6/Call-procedure-DLL-Form.htm)

[http://www.blitzbasic.com/Community/posts.php?topic=54261](http://www.blitzbasic.com/Community/posts.php?topic=54261)

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:58:01.463

DCU 只是编译单元（因此得名），它们用于通过链接器构建 exe/dll。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:19:58.277

据我所知，您无法在运行时访问 .dcu-s。更好地使用 DLL。

# jquery - 仅使用 jQuery 验证密码验证特定密码字段

> ID：14441650
> 
> 赞同：1
> 
> 时间：2013-01-21T15:16:07.810
> 
> 标签：jquery, passwords, jquery-validate

尝试使用 和 进行密码`password`更改`new_password`页面`confirm_password`。

我有两个问题：

1.  密码验证器强度字段是由所有三个密码字段的输入触发的，而我只希望它应用于`new_password`用户选择新密码的字段。
2.  验证不会附加文本错误消息，它会更改要检查或未检查的类，因此会显示叉号或勾号，但不会向用户显示字段验证失败的原因。

我正在使用 jQuery 1.8.3，`jquery.validate`来自`jquery.validate.password`bassistance。

任何想法都非常感激。

下面的 HTML 和 jQuery：

```
<form novalidate="novalidate" method="POST" action="/frontend_dev.php/profile/change-password" name="change_account_data_form" id="change_account_password_form">

                    <table cellspacing="0">
                        <tbody><tr>
                            <td colspan="3">
                                                                </td>
                        </tr>
                      <tr>
                        <td><label for="current_password">Current password:</label></td>
                        <td><input style="display: none;" name="change_password[password]" id="password" class="text" type="password"><input class="text" type="text"></td>
                        <td></td>
                      </tr>
                      <tr>
                        <td><label for="password">New password:</label></td>
                        <td><input style="display: none;" name="change_password[new_password]" id="new_password" class="text password" type="password"><input class="text password" type="text"></td>
                        <td><div class="password-meter">
                                                            <div class="password-meter-message"> </div>
                                                            <div class="password-meter-bg">
                                                                    <div class="password-meter-bar"></div>
                                                            </div>
                                                    </div>

                                                        </td>
                      </tr>
                      <tr>
                        <td><label for="password_confirm">Confirm password:</label></td>
                        <td><input style="display: none;" name="change_password[password_confirm]" id="password_confirm" class="text" type="password"><input class="text" type="text"></td>
                        <td></td>
                      </tr>

                    </tbody></table>
        <input name="change_password[id]" value="2" id="change_password_id" type="hidden"><input name="change_password[_csrf_token]" value="66dbd4dc532ad1c9dd668e5e86235136" id="change_password__csrf_token" type="hidden">                       
                <div class="submitBlock">
            <input class="buttonSubmit" value="" type="submit">
                </div>

        </form> 
```

查询：

```
$(document).ready(function() {
// validate signup form on keyup and submit
var validator = $("#change_account_password_form").validate({
        debug:true,
        errorClass: 'jqueryError',
    rules: {

        password: {
            required: true,
            minlength: 8
        },
        new_password: {
            password: "#new_password",
                            minlength: 8
        },
        password_confirm: {
            required: true,
            equalTo: "#new_password"
        }
    },
    messages: {
        password: {
            required: "Enter your current password",
            minlength: jQuery.format("Enter at least {0} characters")
        },
        new_password: {
            required: "Enter your new password",
            minlength: jQuery.format("Enter at least {0} characters")
        },
        password_confirm: {
            required: "Repeat your password",
            minlength: jQuery.format("Enter at least {0} characters"),
            equalTo: "Enter the same password as above"
        }
    },
    // the errorPlacement has to take the table layout into account
    errorPlacement: function(error, element) {
        error.prependTo( element.parent().next() );
    },
    // specifying a submitHandler prevents the default submit, good for the demo
    submitHandler: function() {
        alert("submitted!");
    },
    // set this class to error-labels to indicate valid fields
    success: function(label) {
        // set &nbsp; as text for IE
        label.html("&nbsp;").addClass("jqueryChecked");
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:13:26.883

你有一个问题清单...

1) 您必须通过and not来定位`input`字段。由于您包含括号，因此您必须用引号括起来。`name``id``input` `name`

```
"change_password[password]": {
     required: true,
     minlength: 8
}, 
```

2) 您的目标字段都有`style="display: none;"`，因此它们永远不会被看到、包含数据或被验证。`input`而且您旁边还有另一个，没有任何`name`实际输入数据的位置。这个设置永远不会起作用，我不知道你为什么这样做。

```
<input style="display: none;" name="change_password[password]" id="password" class="text" type="password">
<input class="text" type="text"> 
```

3）您在第二个字段上有一个`rule`调用，但它对应的是. ~~（如果您想使用，~~~~只需保留~~~~第二个字段~~~~......~~**请参阅下面的编辑****^(。1)**`password``input``message``required` `rule`~~`class="password"``input``jquery.validate.password`~~

```
<input class="text password" name="change_password[new_password]" id="new_password" type="password"> 
```

Demo 不包含`jquery.validate.password`仅仅是因为它没有 CDN。但是，[根据此链接，它的用法很简单](http://bassistance.de/jquery-plugins/jquery-plugin-password-validation/)。） **请参阅下面的编辑。¹**

4）在第三个`input`字段上，您有两个规则和三个消息...`minlength`消息是多余的，因为您只需要匹配第二个`input`字段。

5）您不需要`jQuery.format()`围绕`minlength`消息...它们自己会正常工作。

6）你忘了传递`form`给`submitHandler:`函数，像这样：`submitHandler: function(form) {`

**工作演示：http: [//jsfiddle.net/kJxZB/](http://jsfiddle.net/kJxZB/)**

**工作演示#2（见下面的答案编辑）：http: [//jsfiddle.net/4JEUx/](http://jsfiddle.net/4JEUx/)**

```
$(document).ready(function () {
    $("#change_account_password_form").validate({
        errorClass: 'jqueryError',
        rules: {
            "change_password[password]": {
                required: true,
                minlength: 8
            },
            "change_password[new_password]": {
                required: true,
                minlength: 8
            },
            "change_password[password_confirm]": {
                required: true,
                equalTo: "#new_password"
            }
        },
        messages: {
            "change_password[password]": {
                required: "Enter your current password",
                minlength: "Enter at least {0} characters"
            },
            "change_password[new_password]": {
                required: "Enter your new password",
                minlength: "Enter at least {0} characters"
            },
            "change_password[password_confirm]": {
                required: "Repeat your password",
                equalTo: "Enter the same password as above"
            }
        },
        errorPlacement: function (error, element) {
            error.prependTo(element.parent().next());
        },
        submitHandler: function (form) { // for demo
            alert("submitted!"); // for demo
            return false;  // for demo
        },
        success: function (label) {
            // set &nbsp; as text for IE
            label.html("&nbsp;").addClass("jqueryChecked");
        }
    });
}); 
```

**文档： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)**

* * *

**¹编辑：**

这是与上面相同的 Demo，除了`jquery.validate.password`插件的 JavaScript 和 CSS 代码是手动添加到 jsFiddle 中的，因为它不是托管在 CDN 上的。

**演示#2：http: [//jsfiddle.net/4JEUx/](http://jsfiddle.net/4JEUx/)**

为了让密码插件忽略任何`input`带有 的字段`type="password"`，您必须`password: false`在这两个`input`字段上使用作为规则...

```
 rules: {
            "change_password[password]": {
                required: true,
                minlength: 8,
                password: false  // <-- to ignore password plugin
            },
            "change_password[new_password]": {
                required: true,
                minlength: 8,
                password: true  // <-- to use password plugin
            },
            "change_password[password_confirm]": {
                required: true,
                equalTo: "#new_password",
                password: false  // <-- to ignore password plugin
            }
        }, 
```

然后您可以从第二个字段中**删除** ，因为它现在是多余的。`class="password"``input`

# java - 无阻塞获取进程输出

> ID：14441652
> 
> 赞同：3
> 
> 时间：2013-01-21T15:16:15.630
> 
> 标签：java, git, stdout

我想获得一个进程的输出（`Git.exe`确切地说）并将其转换为 String 对象。以前有时我的代码被阻止了。然后我发现这是因为该进程`ErrorStream`有一些输出，我必须手动捕获它（我对此不感兴趣）。我将代码更改为：

```
public static String runProcess(String executable, String parameter) {
    try {
        String path = String.format("%s %s", executable, parameter);
        Process pr = Runtime.getRuntime().exec(path);

        // ignore errors
        StringWriter errors = new StringWriter();
        IOUtils.copy(pr.getErrorStream(), errors);

        StringWriter writer = new StringWriter();
        IOUtils.copy(pr.getInputStream(), writer);

        pr.waitFor();
        return writer.toString();
    } catch (Exception e) {
        return null;
    }
} 
```

现在它工作得很好，但话又说回来，有时它会在这一行再次被阻止： `IOUtils.copy(pr.getErrorStream(), errors);`.

有什么方法可以让我在`git.exe`不碰到块的情况下获得输出？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:03:54.397

使用这篇[漂亮的文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=4)和`StreamGobbler`那里描述的课程（我对其进行了一些修改），我解决了这个问题。我的实现`StreamGobbler`：

```
class StreamGobbler extends Thread {
    InputStream is;
    String output;

    StreamGobbler(InputStream is) {
        this.is = is;
    }

    public String getOutput() {
        return output;
    }

    public void run() {
        try {
            StringWriter writer = new StringWriter();
            IOUtils.copy(is, writer);
            output = writer.toString();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

我的功能是：

```
public static String runProcess(String executable, String parameter) {
    try {
        String path = String.format("%s %s", executable, parameter);
        Process pr = Runtime.getRuntime().exec(path);

        StreamGobbler errorGobbler = new StreamGobbler(pr.getErrorStream());
        StreamGobbler outputGobbler = new StreamGobbler(pr.getInputStream());

        // kick them off concurrently
        errorGobbler.start();
        outputGobbler.start();

        pr.waitFor();
        return outputGobbler.getOutput();
    } catch (Exception e) {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:16:56.787

使用 ProcessBuilder 或 Apache commons-exec。

您发布的代码有错误，这是一个很难解决的话题。

# android - 如何让 google maps api v2 直接进入我的位置

> ID：14441653
> 
> 赞同：6
> 
> 时间：2013-01-21T15:16:17.843
> 
> 标签：android, camera, move, google-maps-android-api-2

我是一个真正的谷歌地图 API 菜鸟，所以任何帮助表示赞赏。我想在这里看到的是，当我打开我的应用程序时，相机需要直接移动到我当前的位置并放置蓝点。我该如何做到这一点？

我制作了一个示例代码，以便每个人都可以理解它并在需要时实现他们的代码：

```
GoogleMap map = ((SupportMapFragment)  getSupportFragmentManager().findFragmentById(R.id.general_map)).getMap();
map.setMapType(GoogleMap.MAP_TYPE_HYBRID);

if( helper.isGPSEnabled() ){
    map.move... // move directly to my current position
} 
```

请帮忙...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-22T15:10:12.043

这就是我能够得到的工作。它显示您当前的位置并在那里放置一个标记。这适用于 Google Maps API v2

```
private void setUpMap() {
    // Enable MyLocation Layer of Google Map
    googleMap.setMyLocationEnabled(true);

    // Get LocationManager object from System Service LOCATION_SERVICE
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    // Create a criteria object to retrieve provider
    Criteria criteria = new Criteria();

    // Get the name of the best provider
    String provider = locationManager.getBestProvider(criteria, true);

    // Get Current Location
    Location myLocation = locationManager.getLastKnownLocation(provider);

    //set map type
    googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

    // Get latitude of the current location
    double latitude = myLocation.getLatitude();

    // Get longitude of the current location
    double longitude = myLocation.getLongitude();

    // Create a LatLng object for the current location
    LatLng latLng = new LatLng(latitude, longitude);      

    // Show the current location in Google Map        
    googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));

    // Zoom in the Google Map
    googleMap.animateCamera(CameraUpdateFactory.zoomTo(20));
    googleMap.addMarker(new MarkerOptions().position(new LatLng(latitude, longitude)).title("You are here!"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:21:38.020

你需要首先确定用户他的位置。之后，您在地图上设置纬度和经度。另外不要忘记设置缩放级别以放大地图。

要确定是否启用了 gps：

[如何确定 Android 设备的 GPS 是否已启用](https://stackoverflow.com/questions/843675/how-do-i-find-out-if-the-gps-of-an-android-device-is-enabled)

[Android - 有没有办法监听 GPS 是否启用或禁用](https://stackoverflow.com/questions/7521509/android-is-there-a-way-to-listen-if-gps-was-enabled-or-disabled)

有关位置策略的更多信息：

[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

# javascript - 如何过滤对象数组？

> ID：14441656
> 
> 赞同：1
> 
> 时间：2013-01-21T15:16:30.950
> 
> 标签：javascript

我有一组从 Web 服务中提取的对象，看起来像这样。

```
{ 
  ArticleID: "ABC123", 
  Region: "US", 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
} 
```

ArticleID、Region 和 PubTypeID 组成一个复合键。数据源是一个表，无法更改，但我需要获取唯一项以显示类似界面的仪表板。所以显示唯一的 ArticleID，但将文章分组在它们之下。界面应该看起来像这样。

```
ArticleID      Status
----------------------
ABC123          Scheduled
    Region:US       Scheduled: 02/02/2013
    Region:JP       Scheduled: 05/02/2013
    Region:OE       Scheduled: 03/02/2013
    Region:EU       Scheduled: 04/02/2013
ABC456          Ready to Schedule          
    Region:US       
    Region:US       
    Region:US       
ABC789          Sent
    Region:EU       Sent On: 01/02/2013
    Region:EU       Sent On: 01/02/2013
    Region:EU       Sent On: 01/02/2013
    Region:EU       Sent On: 01/02/2013 
```

状态由日期决定。我也很困惑，如果一篇文章下的一个项目有日期而一个没有，状态会是什么？

如果数据被规范化，我在这里不会有任何问题，因为我可以进行多项选择并构建输出，但我只有一个平面结果集，所以需要在 Javascript 中进行“选择”。

有人可以帮助我如何在Javascript中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:42:43.430

您可以使用`Array.prototype.filter`, 对所有条目进行排序，因为您知道所有文章 ID（如果不知道，您将不得不遍历输入并收集它们）。

```
var input = [{ 
  ArticleID: "ABC123", 
  Region: "US"
},{ 
  ArticleID: "ABC456", 
  Region: "US"
}];

var regions = ["ABC123","ABC456"];

var articles = [];
regions.forEach(
    function(reg,i){
        articles[i] = input.filter( function(el){ return el.ArticleID == reg} );
    }
);

console.log(regions);
//regions[0] <= array with all articles with regionID "ABC123"
//regions[1] <=                   - " -               "ABC456" 
```

现在`articles`包含一个数组，其中包含按 ArticleID 排序的所有文章。

请注意，这是 IE9+ 代码，为了使其在 IE8 及以下版本中工作，您需要一个 shim [`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)，[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)您可以在相应的 MDN-Articles 中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:13:59.270

我认为您需要重新排列按 ArticleID 排序的数据。并假设您将有很多文章。像这样的迭代可以完成重新安排的任务。然后，您可以轻松地遍历打印有用信息的新对象

```
var x
var y = 0;
var newArray = new Array();
for(key in data){
   x = data[key].articleID; //The value of the key you want to use (ArticleID)
   newArray[x] = newArray[x] || []
   newArray[x][y] = data[key];
   y++
}
console.log(newArray) 
```

[在这里](http://jsfiddle.net/Ltemt/4/)你有一个小提琴。查看生成的对象（使用 chrome 或其他控制台），您将看到数据现在如何按 ArticleID 分组；

编辑：我已经用更干净的版本替换了代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:38:56.017

为了将这些数据构建到您描述的表格中，我将首先组织数据，使其与您想要做的事情相匹配。因此，我不会使用单个对象，而是遍历返回的数据并将其转换为：

```
{ArticleID: "ABC123", 
Status: "Scheduled", 
Articles: { 
  ArticleID: "ABC123", 
  Region: US, 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
  },{ 
  ArticleID: "ABC234", 
  Region: US, 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
  }
} 
```

然后根据这个结构建表。您需要在函数中进行一些计算以确定状态。我对这一点的理解不足以给你一个具体的答案，但看起来所有常见的文章 ID 都具有相同的状态，因此在重组对象时可以忽略这一点，并在构建表时插入。

如果您对服务器端代码有任何控制权，最好在将其传递给客户端之前进行此对象重组工作。

# hadoop - 分布式系统中语义网的推理

> ID：14441660
> 
> 赞同：5
> 
> 时间：2013-01-21T15:16:44.120
> 
> 标签：hadoop, rdf, reasoning

我想在 Hadoop 平台上使用[Web 级并行推理引擎 (WebPIE)推理器。](http://www.few.vu.nl/~jui200/webpie.html)我已经用两个 Ubuntu 虚拟机实现了 Hadoop 结构，并且运行良好。当我想使用 WebPie 对 RDF 文件进行推理时，由于需要序列文件格式，该过程失败。WebPIE[教程](http://www.few.vu.nl/~jui200/webpie.html#tutorial)没有提到将序列文件格式作为 Hadoop 推理的先决条件。为了生成序列文件格式，我编写了以下代码：

```
public static void main(String[] args) {

    FileInputStream fis = null;
    SequenceFile.Writer swriter = null;
    try {

        Configuration conf = new Configuration();

        File outputDirectory = new File("output");
        File inputDirectory = new File("input");
        File[] files = inputDirectory.listFiles();

        for (File inputFile : files) {

            //Input
            fis = new FileInputStream(inputFile);

            byte[] content = new byte[(int) inputFile.length()];
            fis.read(content);

            Text key = new Text(inputFile.getName());
            BytesWritable value = new BytesWritable(content);

            //Output
            Path outputPath = new Path(outputDirectory.getAbsolutePath()+"/"+inputFile.getName());

            FileSystem hdfs = outputPath.getFileSystem(conf);

            FSDataOutputStream dos = hdfs.create(outputPath);

            swriter = SequenceFile.createWriter(conf, dos, Text.class,
                    BytesWritable.class, SequenceFile.CompressionType.BLOCK, new DefaultCodec());

            swriter.append(key, value);

        }

        fis.close();
        swriter.close();

    } catch (IOException e) {

        System.out.println(e.getMessage());
    }

} 
```

此代码使用某些 RDF 文件生成正确的序列文件格式，但不能 100% 正确工作，并且有时会生成损坏的文件。是否有任何解决方案从一开始就可以避免此代码，如果没有，我如何改进此代码以正确使用任何 RDF 文件作为输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T15:38:42.457

**输入数据必须包含 N-Triples 格式的三元组的 gzip 压缩文件，**例如（triplePart1.gz、triplePart2.gz ....），因此我们有： input_triples.tar.gz 包含 N-triples 的压缩文件（ TriplePart1.gz，triplePart2.gz ....）。

1.  解压 tar 文件并将内容复制到 HDFS

    ---/hadoop$ tar zxvf /tmp/input_triples.tar.gz /tmp/input_triples .

    ---/hadoop$ bin/hadoop fs -copyFromLocal /tmp/input-files /input 。

2.  压缩输入数据

    ---/hadoop$ bin/hadoop jar webpie.jar jobs.FilesImportTriples /input /tmp /pool --maptasks 4 --reducetasks 2 --samplingPercentage 10 --samplingThreshold 1000

3.  推理

    ---/hadoop$ bin/hadoop jar webpie.jar jobs.Reasoner /pool --fragment owl --rulesStrategy fixed --reducetasks 2 --samplingPercentage 10 --samplingThreshold 1000

[在这里](http://www.few.vu.nl/~jui200/webpie.html#tutorial)继续:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T13:39:41.287

# java - JVM 的分布式故障安全作业队列

> ID：14441662
> 
> 赞同：0
> 
> 时间：2013-01-21T15:16:54.793
> 
> 标签：java, cluster-computing, akka, failover, job-queue

我需要为分布式 JVM 应用程序实现一个作业队列。

队列必须包含一组必须按顺序执行的作业（即 Java 可运行文件）。将有数百个“作业组”或队列应该在集群上自动并行化。作业队列必须是故障安全的，以便在机器崩溃的情况下，整个应用程序将继续运行。

此外，我不想重新发明 Weel，所以如果已经有一个库或框架可以满足我的要求，我将不胜感激。

问题：我应该使用什么技术？akka合适[吗](http://akka.io)，还有其他库可以推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:24:59.707

在过去，jGroups 或 ZooKeeper 是标准方法。但是我发现 Akka 更灵活，并且需要你做更多的工作。

ZooKeeper 对 Akka 的特性之一是状态复制，即当某些作业没有进入队列或在执行作业时进程崩溃时，Akka 不会自动恢复它。然而，这为您提供了巨大的吞吐量，并且还抛弃了对完美世界的任何幻想——我们知道我们并不生活在这个世界中。所以您必须尽早考虑现实世界的烧毁场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:56:14.960

[事件源](https://github.com/eligosource/eventsourced)库的可靠渠道可能会对您有所帮助。Eventsourced 为有状态的 Akka Actor 添加了持久性，并通过通道至少一次传递消息，并允许您从 JVM 崩溃中恢复 Actor 和通道状态。[此示例](https://github.com/eligosource/eventsourced#clustering)展示了如何将库与 akka-cluster 一起使用。`ReliableChannelProps`该示例使用瞬态通道，但您可以使用示例中的[此行将](https://github.com/eligosource/eventsourced/blob/release-0.5-M1/src/test/scala/org/eligosource/eventsourced/example/ClusterExample.scala#L70)其替换为可靠通道。当一个节点上的可靠通道发生故障时，它将在集群中的另一个节点上自动恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:24:06.667

Akka 绝对合适。查看 Akka 的[耐用邮箱](http://doc.akka.io/docs/akka/2.1.0/modules/durable-mailbox.html)来处理您的“故障安全队列”要求。

# google-maps-api-3 - 谷歌地图标记的自定义图标

> ID：14441666
> 
> 赞同：1
> 
> 时间：2013-01-21T15:17:05.260
> 
> 标签：google-maps-api-3, icons, google-maps-markers

以下代码工作：

```
function()
    {
    var Marker = new google.maps.Marker();
    var MarkerOptions = {};
    MarkerOptions.map = my_map;
    MarkerOptions.position = new google.maps.LatLng(0,0);
    MarkerOptions.animation = google.maps.Animation.DROP;
    MarkerOptions.clickable = true;
    MarkerOptions.cursor = 'pointer';

    Marker.smallicon = [{
        anchor:null,
        origin:null,
        scaledSize:null,
        size:new google.maps.Size(20,32),
        url:'http://maps.gstatic.com/mapfiles/markers2/marker_sprite.png'
        }];

    Marker.setOptions(MarkerOptions);
    } 
```

而添加这一行后，控制台拍摄充满错误

```
function()
    {
    var Marker = new google.maps.Marker();
    var MarkerOptions = {};
    MarkerOptions.map = way_map;
    MarkerOptions.position = new google.maps.LatLng(0,0);
    MarkerOptions.animation = google.maps.Animation.DROP;
    MarkerOptions.clickable = true;
    MarkerOptions.cursor = 'pointer';

    Marker.smallicon = [{
        anchor:null,
        origin:null,
        scaledSize:null,
        size:new google.maps.Size(20,32),
        url:'http://maps.gstatic.com/mapfiles/markers2/marker_sprite.png'
        }];

    Marker.setIcon(Marker.smallicon);
    Marker.setOptions(MarkerOptions);
    } 
```

我不太了解它，它可以使用，`google.maps.MarkerImage`但在参考中写入

> 表示标记图标或阴影图像的结构。此类已弃用，取而代之的是 Icon。

所以我尝试使用 Icon，他们已将其从构造函数更改为 Object，因此更改了调用模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:24:34.663

`Marker.smallicon`当前是一个数组，而不是一个`google.maps.Icon`

使用：

```
Marker.setIcon(Marker.smallicon[0]); 
```

或者让它成为一个对象：

```
Marker.smallicon = {
        size:new google.maps.Size(20,32),
        url:'http://maps.gstatic.com/mapfiles/markers2/marker_sprite.png'
        }; 
```

**注意：**您不需要设置 a 的所有选项`google.maps.Icon`，省略您不想设置的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:20:03.117

采用：

```
icon: {url:'http://maps.gstatic.com/mapfiles/markers2/marker_sprite.png'} 
```

代替

```
url:'http://maps.gstatic.com/mapfiles/markers2/marker_sprite.png' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-01T07:27:40.960

我认为这对你来说很好

```
//adapted from http://gmaps-samples-v3.googlecode.com/svn/trunk/overlayview/custommarker.html
function CustomMarker(latlng, map, imageSrc) {
    this.latlng_ = latlng;
    this.imageSrc = imageSrc;
    // Once the LatLng and text are set, add the overlay to the map.  This will
    // trigger a call to panes_changed which should in turn call draw.
    this.setMap(map);
}

CustomMarker.prototype = new google.maps.OverlayView();

CustomMarker.prototype.draw = function () {
    // Check if the div has been created.
    var div = this.div_;
    if (!div) {
        // Create a overlay text DIV
        div = this.div_ = document.createElement('div');
        // Create the DIV representing our CustomMarker
        div.className = "customMarker"

        var img = document.createElement("img");
        img.src = this.imageSrc;
        div.appendChild(img);
        google.maps.event.addDomListener(div, "click", function (event) {
            google.maps.event.trigger(me, "click");
        });

        // Then add the overlay to the DOM
        var panes = this.getPanes();
        panes.overlayImage.appendChild(div);
    }

    // Position the overlay 
    var point = this.getProjection().fromLatLngToDivPixel(this.latlng_);
    if (point) {
        div.style.left = point.x + 'px';
        div.style.top = point.y + 'px';
    }
};

CustomMarker.prototype.remove = function () {
    // Check if the overlay was on the map and needs to be removed.
    if (this.div_) {
        this.div_.parentNode.removeChild(this.div_);
        this.div_ = null;
    }
};

CustomMarker.prototype.getPosition = function () {
    return this.latlng_;
};

var map = new google.maps.Map(document.getElementById("map"), {
    zoom: 17,
    center: new google.maps.LatLng(37.77088429547992, -122.4135623872337),
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

var data = [{
    profileImage: "http://www.gravatar.com/avatar/d735414fa8687e8874783702f6c96fa6?s=90&d=identicon&r=PG",
    pos: [37.77085, -122.41356],
}, {
    profileImage: "http://placekitten.com/90/90",
    pos: [37.77220, -122.41555],
}]

for(var i=0;i<data.length;i++){
new CustomMarker(new google.maps.LatLng(data[i].pos[0],data[i].pos[1]), map,  data[i].profileImage)
}
```

```
.customMarker {
        position:absolute;
        cursor:pointer;
        background:#424242;
        width:48px;
        height:48px;
        /* -width/2 */
        margin-left:-42px;
        /* -height + arrow */
        margin-top:-84px;
        border-radius:24px;
        padding:0px;
    }
    .customMarker:after {
        content:"";
        position: absolute;
        bottom: -13px;
        left: 10px;
        border-width: 18px 14px 0;
        border-style: solid;
        border-color: #424242 transparent;
        display: block;
        width: 0;
    }
    .customMarker img {
        width:36px;
        height:36px;
        margin:6px;
        border-radius:20px;
    }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<div id="map" style="width: 640pxpx; height: 480px;">map div</div>
```

# python - 如何禁用 Gtk 上的所有默认击键

> ID：14441670
> 
> 赞同：1
> 
> 时间：2013-01-21T15:17:09.220
> 
> 标签：python, python-3.x, gtk, gtk3, pygobject

我正在编写一个源代码编辑器，并且我想禁用任何预定义的击键，例如 Ctrl-V 用于粘贴，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:59:55.930

我找到了这样做`True`的方法：从处理`key-press-event`. 任何不计算为 true 的值都会将控制权交还给 Gtk。

在我实现这个编辑器的特定方式`key-press-event`中，顶层 vindow 的信号连接到方法`__key_event_handler`，它基本上过滤所有击键，用 Ctrl 或 Alt 键修改并在处理输入后返回 True，或者只是将控制权传递回给Gtk 否则。这样，我可以管理所有修改过的按键，这些按键是编辑器命令，而不需要处理普通字符的插入。

# verilog - 在 LEX 中，如何解析一些代码直到出现特殊符号？

> ID：14441674
> 
> 赞同：1
> 
> 时间：2013-01-21T15:17:15.973
> 
> 标签：verilog, lex

我想知道在 LEX 中，如果我想解析一些代码直到一个特殊符号。

例如：`$display("Hello World");`

在这里，我想得到`$display("Hello World")`但除了`;`.

我已经尝试过这个：`\$"display".*[^;]`，它似乎没有用。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:42:37.617

`.`匹配任何字符，而 Kleene 星`*`将匹配它之前的许多字符。在这种情况下，您将匹配`display`后面的任何其他字符的列表。这恰好包括您要捕获的位以及分号。

明显的解决方法是删除表达式的那一部分，并将 Kleene 星移动到`[^;]`表达式之后。这将说“匹配任何不是字符的多个实例`;`”。这可能需要围绕子表达式的括号（我不记得价格语法，因为它在词法分析器之间有所不同）。

要么`\$"display"([^;])*`或`\$"display"[^;]*`

# fmdb - 将 Objective C 转换为 Rubymotion

> ID：14441676
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:17:18.637
> 
> 标签：fmdb, rubymotion, sqlcipher

```
SQLCIPHER sqlite encrypted iphone ios converting un-encrypted database to encrypted database
[fmdb open];
       NSString *sel = @"SELECT count(*) FROM sqlite_master";            
       FMResultSet *fmr = [self executeQuery : fmdb : sel];

        if ( [fmr next] ) // unencrypted
        {
            NSLog(@"Encrypting");
            fmdb.key = @"";
            [fmdb rekey : @"somekey"];
        }

- (BOOL)rekey:(NSString*)key {
    #ifdef SQLITE_HAS_CODEC
    if (!key) {
        return NO;
    }

    int rc = sqlite3_rekey(db, [key UTF8String], (int)strlen([key UTF8String]));

    if (rc != SQLITE_OK) {
        NSLog(@"error on rekey: %d", rc);
        NSLog(@"%@", [self lastErrorMessage]);
    }

    return (rc == SQLITE_OK);
    #else
        return NO;
    #endif
   } 
```

我正在尝试将 1)FMDB Pod 2)SQLCipher pod 与 Rubymotion iOS 项目一起使用。

我正在尝试使用 SQLCipher 加密数据库，但 Rubymotion 无法识别 SQLCipher 提供的方法。

我发现了下面提到的一段代码，人们报告说它在 Objective C 和 xcode 中运行。

有人可以将其转换为 Rubymotion 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:26:36.197

我认为您不需要将其转换为 RubyMotion。您可以从 RubyMotion 调用此 FMDB 代码，例如

```
class Database
  def self.connection
    unless @connection
      @connection = FMDatabase.databaseWithPath(db_path)
      @connection.traceExecution = true if $debug
      @connection.open
      @connection.setKey 'MySecretKey'
    end
  end
end 
```

请参阅我在[Using FMDB + SQLCipher with Rubymotion 中的回答？](https://stackoverflow.com/questions/14304871/using-fmdb-sqlcipher-with-rubymotion)

# c++ - 使用 srand 设置随机种子是现代 C++ 吗？

> ID：14441680
> 
> 赞同：15
> 
> 时间：2013-01-21T15:17:29.970
> 
> 标签：c++, random, c++11, srand

对于使用 的代码`std::random_shuffle`，我需要设置一个随机种子，以便生成的伪随机序列在每个程序运行中都不同。

这里的[代码示例](http://www.cplusplus.com/reference/algorithm/random_shuffle/)调用

```
srand ( unsigned ( time (NULL) ) ); 
```

这需要

```
#include <ctime>
#include <cstdlib> 
```

我想知道：由于 C++11 包括对伪随机数生成的重大更新，这仍然是最新的吗？我应该用什么来设置随机种子`std::random_shuffle`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-21T15:19:40.610

[`random_shuffle`](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)除非您提供一个，否则使用实现定义的随机数生成器。所以，不，使用`srand`不一定是正确的。

否则，它会使用您提供的生成器。`rand`如果你想确定这是被使用的，你可以使用。

```
srand(seed);
std::random_shuffle(first, last, [](int n) { return rand() % n; });
// this is a biased generator
// see <http://eternallyconfuzzled.com/arts/jsw_art_rand.aspx> 
```

但是，我建议使用新`<random>`工具而不是 rand()。示例如下。

```
std::default_random_engine gen(seed);

std::shuffle(first, last, gen); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:21:12.963

如果您使用的是 C++11，请考虑使用`std::shuffle`而不是`std::random_shuffle`，并传递一个随机数生成器，如最后一个示例[所示](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T06:00:26.447

如果您真的关心生成随机数的方法的准确性、质量和多样性，我强烈建议您考虑使用著名的`Gnu Scientific Library`( [GSL](http://www.gnu.org/software/gsl/) )

这允许真正的统一生成和最佳的各种算法。见[这里](http://www.gnu.org/software/gsl/manual/html_node/Random-Number-Generation.html)。

特别是[this](http://www.gnu.org/software/gsl/manual/html_node/Sampling-from-a-random-number-generator.html)和[this](http://www.gnu.org/software/gsl/manual/html_node/Random-number-generator-algorithms.html)描述了可用的算法：

```
— gsl_rng_mt19937
— gsl_rng_taus
— gsl_rng_taus2
— gsl_rng_gfsr4
... 
```

**编辑：**考虑到 GSL 的 GPL 特性，[boost::random](http://www.boost.org/doc/libs/1_39_0/libs/random/index.html)也应该是一个不错的选择（但我从未处理过它......）。

# xcode - 加载保存的 UIImage

> ID：14441685
> 
> 赞同：0
> 
> 时间：2013-01-21T15:17:50.973
> 
> 标签：xcode, uiimage

我正在尝试以这种方式保存我的设备的屏幕截图以供以后使用：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
     UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
else
     UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
 UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();                       

//NSString *tmpPngFile = [NSTemporaryDirectory() stringByAppendingPathComponent:@"background55667.png"];
  NSString  *pngPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/background55667.png";
 [UIImagePNGRepresentation(image) writeToFile:pngPath atomically:YES]; 
```

...但我似乎无法打开它并在 UIImageView 中显示它。像这样的东西：

```
NSString *documentsDirectory = [NSHomeDirectory()  stringByAppendingPathComponent:@"Documents"];

// Write out the contents of home directory to console
NSLog(@"Documents directory: %@", [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error]);

UIImage *image = [UIImage imageNamed:....];
backGroundPhoto.image = image; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:57:55.443

`[UIImage imageNamed:]`用于加载已包含在应用程序包中的图像。

假设您的路径是正确的，您可以通过

```
UIImage *image = [UIImage imageWithContentsOfFile: pngPath]; 
```

# multithreading - 这里需要挥发物吗？

> ID：14441692
> 
> 赞同：4
> 
> 时间：2013-01-21T15:18:19.087
> 
> 标签：multithreading, gcc, locking, c99, volatile

我有一个更新结构并禁用中断的功能。

```
bool readBuffer()
{
    __disable_irq();

    rb->reader += 1; // Just an example

    __enable_irq();

    return true;
} 
```

因为中断被禁用，在我更新结构中的值时，另一个中断不可能抢占。

但是我是否也应该将阅读器变量标记为`volatile`？因为理论上另一个中断可以在我进入函数时抢占，但`__disable_irq()`实际上是在之前被调用。当我的功能恢复时，缓存的值`rb->reader`将不正确。`rb->reader`还是编译器（GCC）生成的代码在实际命中该行之前不会缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:41:25.830

指定显式优化障碍可能会更好：

```
bool readBuffer()
{
    __disable_irq();
    asm volatile ("" ::: "memory"); // Some unexpected memory modification
    rb->reader += 1; // Just an example
    __enable_irq();
    return true;
} 
```

如果在某些其他情况下您希望编译器优化`rb->reader`变量，并且将其标记为 volatile 将因此过度，这将是有利可图的。

# css - 页面底部的 CSS 页脚

> ID：14441693
> 
> 赞同：0
> 
> 时间：2013-01-21T15:18:20.943
> 
> 标签：css, css-transitions, footer

我希望页脚留在页面底部。所以我创建了一个 DIV`min-heigt:100%`和一个没有高度设置的 DIV，用于动画 ajax 内容加载：

HTML：

```
<div class="main">
    <div class="header navi>…&lt;/div>
    <div class="animater">
        <!-- content goes here -->
        <div class="footer">
            <!-- footer stuff goes here -->
        </div>
    </div>
</div> 
```

CSS：

```
.main {
    min-height:100%;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}
.header {
    // height, width, margin, position
}
.animater {
    // empty
}
.footer {
    bottom:0px;
    position:absolute;
} 
```

当我加载页面并且内容比我的屏幕小得多时，一切都很完美。页脚按预期位于屏幕底部。

我现在正在`animater`使用 CSS 关键帧制作动画。当 out 动画结束时，我将替换 的内容`animater`并将其重新动画化。当内容再次小于屏幕时，页脚位于我的`animater`. 但是当我“手动”重新加载页面时（这样内容就不会被动画化），页脚的位置是正确的。

因此，无论内容的高度如何，我都需要一个位于内容底部的页脚。我不能给动画师最小高度，因为它不在页面顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:34:02.423

我制作的这个例子显示了让页脚保持下来所需的最小 css。[http://jsfiddle.net/meBv3/](http://jsfiddle.net/meBv3/)

的HTML

```
<div class="wrapper">
<div class="page">
    page here
</div>
<div class="footer">
    Content for  class "footer" Goes Here
</div>
</div> 
```

CSS

```
/* THIS IS THE MIN STYLE NEEDED TO GET THE FOOTER TO STAY DOWN */

html, body{
height:100%;    /* to keep .footer on bottom */
margin:0;   /* to get rid of scroll bar, because (100% + default margin = scroll) */

}
.wrapper {
min-height: 100%;   /* to keep .footer on bottom */
position: relative; /* must be relative or .footer will cover content */
}
.page {
padding-bottom:2.2em;   /* MUST have padding on the bottom => .footer, or .footer will cover content 8*/

}
.footer {
position: absolute; /* to keep .footer on bottom */
bottom: 0px;    /* to keep .footer on bottom */
height:2em; /* height must be smaller then .page's bottom padding */

} 
```

# jquery-ui - 剑道滑块背景颜色？

> ID：14441694
> 
> 赞同：4
> 
> 时间：2013-01-21T15:18:24.553
> 
> 标签：jquery-ui, kendo-ui

我正在使用剑道滑块。我的要求是，对于每个滑块值的更改，我都需要更改剑道滑块的背景颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:55:41.553

如果要更改滑块的背景，可以执行以下操作：

```
$("#slider").kendoSlider({
    orientation: "vertical",
    min: 0,
    max: 100,
    smallStep: 1,
    largeStep: 20,
    showButtons: true,
    change: function (e) {
        var top = $("#slider").closest(".k-slider-wrap");
        if (e.value < 33) {
            $(".k-slider-track", top).css("background-color", "#ff0000");
            $(".k-slider-selection", top).css("background-color", "#ff0000");
        } else if (e.value < 66) {
            $(".k-slider-track", top).css("background-color", "#00ff00");
            $(".k-slider-selection", top).css("background-color", "#00ff00");
        } else {
            $(".k-slider-track", top).css("background-color", "#0000ff");
            $(".k-slider-selection", top).css("background-color", "#0000ff");
        }
    }
}); 
```

我所做的是定义一个滑块，其值介于`0`和之间，`100`并定义`change`处理程序以读取当前值（as `e.value`），并根据值定义幻灯片的背景。

重要的是：

1.  `k-slider-selection`是所选幻灯片部分的 CSS 类。
2.  `k-slider-track`是完整幻灯片的 CSS 类。

例如：如果值为 33，则 0-33 的滑块部分是`k-slider-selection`，而整个范围 (0-100) 是`k-slider-track`

# regex - 移动物品计数器

> ID：14441700
> 
> 赞同：1
> 
> 时间：2013-01-21T15:18:41.923
> 
> 标签：regex, powershell, logfile

我已将其修改为下面更简单的解释，并删除了我以前的版本

下午好

我想知道是否有人可以建议

每天我们都有记录当前日期的日志文件，例如 22012013.txt、23012013.txt 等

我的脚本中有一个移动项 cmdlet，我想记录每天有多少文件被移动到 3 个特定文件夹，并将计数器写入上面提到的日期文本日志

假装这是我的文件夹结构

文件夹1

文件夹 2 文件夹 3

例如，这是我的移动项目的工作方式

我的移动项目将 file1.txt 移动到文件夹 1

文件 2 到文件夹 3

文件 3 到文件夹 1

文件 4 到文件夹 3

文件 5 到文件夹 2

文件 6 到文件夹 1

在日志文件中，我想看看

移动到文件夹 1 = 3 的项目

移动到文件夹 2 的项目 = 1

移动到文件夹 3 = 2 的项目

这就是第二天，那一天的文件移动将记录在当天的新日志文件中，如果可能的话，我希望每个移动项目的增量都增加

希望这是有道理的

问候

巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:04:24.103

这是一个移动文件然后更新日志的函数的示例实现。
毫无疑问，它可以更简洁，但它可以完成工作并且具有合理的可读性。

第一个参数是要移动的文件，第二个是目标文件夹的名称（不能包含空格）。

基本上，将文件移动到指定文件夹后，会抓取日志文件的最后一行并检查它是否包含今天的日期。如果是这样，则在空格处拆分该行，并迭代生成的数组以查找文件夹名称。如果找到，则数组的下一项（即对该文件夹的移动次数）加一。如果未找到，则将文件夹名称附加到该行。然后修改后的行替换文件中的最后一行。如果日志文件的最后一行不包含今天的日期，则会在文件中附加一行，其中包含今天的日期和文件夹名称等。

`@()`用于确保包含的表达式返回一个数组 - 它可以更轻松地将内容作为正确的行添加到文件中。

```
 function Log-Move() {    
   $logfile = 'O:\AutoScan\log.txt'
   $destination = 'O:\AutoScan\'
   $folder = $args[1]    
   Move-Item -ErrorAction Stop $args[0] ( $destination + $folder )        
   $content = @( get-content -path $logfile )
   $line = $content[-1]
   $date = Get-Date -format 'd'    
   if ( $line ) {    
     if ( $line.Contains( $date ) ) {
       $items = $line.split()
       $count = $items.count         
       for ( $i = 0; $i -lt $count; $i++ ) {
         if ( $items[$i] -eq $folder ) {
           $items[$i + 1] = 1 + $items[$i + 1]
           break
         }
       }
       if ( $i -eq $count ) {
         $items += @( $folder, '1' )
       }
       $line = $items -join ' '
       if ( $content.length -gt 1 ) {
         $content = @( $content[0..$($content.length-2)] ) + $line
       } else {
         $content = @( $line )
       } 
     } else {
       $content += $date + ' ' + $folder + ' 1'
     }       
   } else {
     $content = @( $date + ' ' + $folder + ' 1' )
   }
   $content | Set-Content -path $logfile
 } 
```

示例用法

```
Log-Move $newLongFilename Multiples
# log.txt:
# 22/01/2013 Multiples 1

Log-Move $anotherfile Multiples
Log-Move $anotherfile Autosorting
# 22/01/2013 Multiples 2 Autosorting 1 
```

# perl - 如何将顺序数据分组

> ID：14441703
> 
> 赞同：0
> 
> 时间：2013-01-21T15:18:51.260
> 
> 标签：perl

我是 Perl 的新手。感谢任何人都可以在这里给我一些建议和帮助。

我有一个文件：

* * *

```
A1a01   A1a03  
A1a03   A1a0b  
A1a0b   A1a2a  
A1a2a   A1a02  
A1app   A1a06  
Ala06   A1a07  
A1b0v   A1b0c  
Alb0c   Alb55  
A1b55   A1b04  
..      ..  
..      ..  
.  
.  
. 
```

我想将顺序数据提取并打印到不同的组中。从给出的示例中可以看出，这些组是从 A1a01 到 A1a02、A1app 到 A1a07 和 A1b0v 到 A1b04。每组按顺序排列。

到目前为止，我已经尝试了下面的代码，但它无法获得我需要的东西。在比较 column1 和 column2 之后，我才设法打印那些匹配的名称。我不知道如何提取不匹配的名称。（比较column1 2nd name 和column2 1st name of 2 rows data 之后的顺序不是顺序的。）我需要打印每个组的名字和姓氏。

```
use strict;  
use warnings;  

my $i;  
my $j;  
my @column1;  
my @column2;  
my @array1;  
my $lastname;  

@column1=`awk '{print \$1}' saved4`;  
@column2=`awk '{print \$2}' saved4`;  

    for ($i=0;$i<=$#column1;$i++){  
        for ($j=0;$j<=$#column2;$j++){  
                if ($column1[$i]=~ /$column2[$j]/){  

                   push (@array1,$column2[$j]);   
                           }  

        else {  
            $lastname = $column2[$j];  
            }  

            }  
}  

print "$column1[0] @array1 $lastname\n"; 
```

预期的结果是这样的：

```
group1:  
A1a01   A1a03  
A1a03   A1a0b  
A1a0b   A1a2a  
A1a2a   A1a02  

group2:  
A1app   A1a06  
Ala06   A1a07  

group3:  
A1b0v   A1b0c  
Alb0c   Alb55  
A1b55   A1b04 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:14:59.080

这可以通过单线来完成：

```
perl -lane 'print "group".++$i.":" if $a ne $F[0]; print; $a = $F[1];' group.txt 
```

**输出：**

```
group1:
A1a01   A1a03
A1a03   A1a0b
A1a0b   A1a2a
A1a2a   A1a02
group2:
A1app   A1a06
A1a06   A1a07
group3:
A1b0v   A1b0c
A1b0c   A1b55
A1b55   A1b04 
```

**解释：**

*   `-l`处理输入/输出中的换行符
*   `-a`在空格上自动拆分输入，去除多余的空格
*   `-n`从文件中读取标准输入或输入
*   `@F`数组自动拆分元素存储在

基本上这段代码循环文件（或标准输入）中的每一行，如果该行的第一个值不等于前一行的第二个值，则打印一个新的组头，并且计数器加一。

如果您打开了警告，您将收到与此代码有关的两个警告，但由于它们在这里是无害的（首次检查的未初始化警告`$a`和错字警告打开`$i`）我选择不打开警告。

这个单行代码的完整代码是：

```
$/ = "\n";
$\ = "\n";
while (<>) {
    chomp;
    our(@F) = split(' ', $_, 0);
    print 'group' . ++$i . ':' if $a ne $F[0];
    print $_;
    $a = $F[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:47:46.803

```
my %groups = (A1a01 => 1, A1app => 2, A1b0v => 3);

open my $FILE, '<', $ARGV[0] or die "Could not read file $ARGV[0]: $!";

flock $FILE, 2;

while ( <$FILE> ) {
    chomp;

    my @cols = split /\s/;

    print "\nGroup #$groups{ $cols[0] }:\n" if $groups{ $cols[0] };

    print join (' ', @cols), "\n";
}

close $FILE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:48:15.103

```
#!/usr/bin/perl
use warnings;
use strict;

my (@arr1,@arr2);
open my $fh, '<', 'file' or die $!;
while(<$fh>){
        my ($x,$y)= split;
        push @arr1, $x;
        push @arr2, $y;
}
close $fh;

my $cnt=1;
print "Group $cnt \n";
my $i=0;
while (1) {
        if ($arr1[$i+1] eq $arr2[$i]){
                print "$arr1[$i]  $arr2[$i] \n";
        }else{
                print "$arr1[$i]  $arr2[$i] \n";
                print "Group ", ++$cnt , "\n";
        }
        $i++;
        if ($i+1==@arr1){
                print "$arr1[$i]  $arr2[$i] \n";
                last;
        }
} 
```

在运行这个：

```
Group 1
A1a01  A1a03
A1a03  A1a0b
A1a0b  A1a2a
A1a2a  A1a02
Group 2
A1app  A1a06
A1a06  A1a07
Group 3
A1b0v  A1b0c
A1b0c  A1b55
A1b55  A1b04 
```

注意：您的文件不正确，在某些地方，它被指定为“l”，而不是“1”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T15:43:31.500

```
use strict;  
use warnings;  

my $i;  
my $j;  
my @column1;  
my @column2;  
my @array1;  
my $lastname;  

@column1=`awk '{print \$1}' saved4`;  
@column2=`awk '{print \$2}' saved4`;  

chomp @column1;
chomp @column2;

my @allGroups;
my $group = [ "- " . $column1[0] . "    " . $column2[0]];

for ($i = 0; $i <= $#column2; $i++){

    if ($i < $#column1-1) {

      if ($column2[$i]=~ /$column1[$i+1]/) {  

          push (@$group, "- " . $column1[$i+1] . "    " . $column2[$i+1]);

      } else {
          push (@allGroups, $group);
          $group = [ " - " . $column1[$i+1] . "    " . $column2[$i+1]];
      }  
    }  
}
foreach my $arr (@allGroups) {
   print "\n\nNEW GROUP\n";
   print @$arr;
} 
```

输出：

```
NEW GROUP
A1a01    A1a03 A1a03    A1a0b A1a0b    A1a2a A1a2a    A1a02

NEW GROUP
A1app    A1a06 A1a06    A1a07

NEW GROUP
A1b0v    A1b0c A1b0c    Alb55 
```

# javascript - js：克隆对象的复选框没有检查属性？

> ID：14441705
> 
> 赞同：0
> 
> 时间：2013-01-21T15:19:03.400
> 
> 标签：javascript, jquery, checkbox, clone, attr

首先，对不起，我不知道如何以不同的方式提出我的问题......

想象一个包含多个订单项目的客户订单表单。

为了更容易和更快地处理表单，提供了复制订单项目的功能。克隆功能会发生这种情况并且可以正常工作。必须更改克隆对象的某些 onclick 属性。例如：

```
// tr is an tr element of a table
$(":input[type=checkbox]", tr).each(function() {
    $(this).removeAttr("onclick").click(function() {
        func($(this));
    });
}); 
```

功能：

```
function func(chkbx)
{
    if (chkbx.checked) {
        // do stuff...
    } else {
        // do other stuff...
    }
} 
```

现在的问题是：当原始 tr 对象调用该函数时，一切正常，但是当克隆/复制的 tr 调用该函数时，它总是进入 else 分支。

当然，我检查了传递的对象。从原始 tr-object 传递，它是预期的 HTMLInputElement，但从克隆的它是“正常”对象。奇怪的是，当我检查他们是否都有“已检查”属性时，他们都没有...

我只是希望该功能也能对克隆对象正常工作..

我希望有人可以提供帮助，每个人都理解我 :D 谢谢

* * *

更新：问题已解决：

```
$(chkbx).prop("checked") 
```

代替

```
chkbx.checked 
```

但我想知道为什么 attr() 函数确实导致未定义？

# apache - lua 嵌入 html 和 apache

> ID：14441710
> 
> 赞同：3
> 
> 时间：2013-01-21T15:19:15.257
> 
> 标签：apache, lua, mod-lua

阿帕奇有`mod_lua`. 有没有办法让它处理一个带有类似于 php 的标签的 html 页面？

如果没有，还有其他方法吗？（我见过`mod_plua`，但似乎没有太多工作要做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:07:33.590

对于 php 风格的 Lua 编程，你绝对可以使用 mod_pLua。与您最初的陈述相反，它确实有很多工作要做，只需看看它支持的额外功能。mod_lua 以后会不会支持这种编程……谁知道呢：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:56:08.110

我实际上没有尝试过，但[Haserl](http://haserl.sourceforge.net/)是你可能需要的东西。

据报道它正在 lua-users[邮件列表中](http://lua-users.org/lists/lua-l/2006-10/msg00466.html)工作。

> Haserl 是一个小型 cgi 包装器，它允许“PHP”风格的 cgi 编程，但使用 UNIX bash-like shell 或 Lua 作为编程语言。它非常小，因此可以在嵌入式环境中使用，或者像 PHP 这样太大的地方。

# 附言

我没有使用它，所以我不确定它是否有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T15:51:51.757

You need to update your config. In your Apache config, add the following lines of code:

```
AddHandler lua-script .lua
AddHandler lua-script .htm .html 
```

That should set the handler for html files to mod_lua (not tested as I don't use this mod).

# ios - ios检测心率

> ID：14441711
> 
> 赞同：5
> 
> 时间：2013-01-21T15:19:18.483
> 
> 标签：ios

> **可能重复：**
> [使用相机检测心率](https://stackoverflow.com/questions/9274027/detecting-heart-rate-using-the-camera)

我需要与应用程序即时心率相同的功能。

基本流程要求用户：

将食指尖轻轻放在相机镜头上。施加均匀的压力并覆盖整个镜头。保持稳定 10 秒钟，然后获取心率。这可以通过打开闪光灯并观察血液通过食指时光线的变化来实现。

我该如何开始

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:34:29.290

我首先使用 AVFoundation 来打开灯。以下链接帖子中的答案包括如何执行此操作的示例：

[如何打开/关闭 iPhone 相机闪光灯？](https://stackoverflow.com/questions/5882829/how-to-turn-the-iphone-camera-flash-on-off)

然后就检测光线变化而言，您可能可以使用 Brad Larson 的[GPUImage](https://github.com/BradLarson/GPUImage)框架。该框架包括几个有用的功能，您可以使用它们来实现此目的，包括：

1.  GPUImageAverageLuminanceThresholdFilter
2.  GPUImageAverageColor
3.  GPUImageLuminosity

使用上面列出的过滤器，您应该能够测量手指的颜色变化，并监控这些变化发生之间的时间间隔。使用这个框架，您甚至可以为颜色/亮度变化指定任意变化要求。

从那里您所要做的就是将颜色变化之间的时间间隔转换为脉冲。这是如何计算脉冲的示例。

[http://www.wikihow.com/Calculate-Your-Target-Heart-Rate](http://www.wikihow.com/Calculate-Your-Target-Heart-Rate)

# python - 在python中读取复杂的二进制文件

> ID：14441712
> 
> 赞同：0
> 
> 时间：2013-01-21T15:19:18.503
> 
> 标签：python

我对python编程相当陌生，所以请简单回答一下。

我有一个 .raw 文件，它是 2b/2b 复杂的短整数格式。它实际上是一个二维光栅文件。我想阅读和分离真实和复杂的部分。假设栅格是 [MxN] 大小。

如果问题不清楚，请告诉我。

干杯 N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:09:42.377

你可以用`struct`模块来做。这是一个基于您在评论中提到的文件格式信息的简单示例：

```
import struct

def read_complex_array(filename, M, N):
    row_fmt = '={}h'.format(N)  # "=" prefix means integers in native byte-order
    row_len = struct.calcsize(row_fmt)
    result = []
    with open(filename, "rb" ) as input:
        for col in xrange(M):
            reals = struct.unpack(row_fmt, input.read(row_len))
            imags = struct.unpack(row_fmt, input.read(row_len))
            cmplx = [complex(r,i) for r,i in zip(reals, imags)]
            result.append(cmplx)
    return result 
```

这将返回一个复数列表列表，从我运行的一个简单测试的输出中可以看出：

```
[
  [  0.0+  1.0j    1.0+  2.0j    2.0+  3.0j    3.0+  4.0j],
  [256.0+257.0j  257.0+258.0j  258.0+259.0j  259.0+260.0j],
  [512.0+513.0j  513.0+514.0j  514.0+515.0j  515.0+516.0j]
] 
```

Python 中复数的实部和虚部通常都表示为一对机器级双精度浮点数。

您也可以使用该`array`模块。这是使用它的同一件事：

```
import array

def read_complex_array2(filename, M, N):
    result = []
    with open(filename, "rb" ) as input:
        for col in xrange(M):
            reals = array.array('h')
            reals.fromfile(input, N)
            # reals.byteswap()  # if necessary
            imags = array.array('h')
            imags.fromfile(input, N)
            # imags.byteswap()  # if necessary
            cmplx = [complex(r,i) for r,i in zip(reals, imags)]
            result.append(cmplx)
    return result 
```

如您所见，它们非常相似，因此不清楚使用其中一个是否有很大优势。我怀疑`array`基于版本的版本可能会更快，但这必须通过使用一些真实数据实际计时来确定，以便能够确定地说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:22:04.493

看看[Hachoir](https://bitbucket.org/haypo/hachoir/wiki/Home)图书馆。它是为此目的而设计的，并且它的工作非常好。

# html - 为访问的链接设置颜色

> ID：14441715
> 
> 赞同：0
> 
> 时间：2013-01-21T15:19:21.857
> 
> 标签：html, css

我发现了很多关于如何在现代浏览器上访问的帖子不再起作用（其中大多数是相当老的帖子）。

其中之一：[Google chrome a:visited background image not working](https://stackoverflow.com/questions/3788855/google-chrome-avisited-background-image-not-working/3809226#3809226)

这是说该`color`属性虽然有效。好吧，不适合我，我在 Chrome 上进行测试，它什么都不做，IE 可以，但在下一次点击时它会丢失它。

一定有可能……我的意思是，谷歌做到了:)）

有人可以提出任何想法吗？也许我错过了什么。

谢谢！

编辑：这是我正在使用的代码：

```
<asp:Repeater ID="rptArrival" runat="server">
   <ItemTemplate>
      <div class="left">
        <a id="aCityTo" runat="server" OnServerClick="lnkLink_OnCommand" cities='<%# Eval("CityCodeFrom")+"|"+ Eval("CityCodeTo") %>'  >
          <asp:Label runat="server" ID="Label1" Text='<%# Eval("CityNameTo") %>' CssClass="linkButtonBold"></asp:Label>
        </a>
      </div>
   </ItemTemplate>
</asp:Repeater>

.linkButtonBold
{
    font-family: Arial, Helvetica, sans-serif;
    font-style: normal;
    font-size: 12px;
    font-weight: bold;
    color: #829094;
    text-decoration: none;
    cursor: pointer;
}

.linkButtonBold:hover
{
    text-decoration: underline;
}

.linkButtonBold:visited {
    color: red;
} 
```

我也试过没有标签上的类和a：hover，a：visited，也没有。

它是 ASP.Net 和 C#。

感谢您的回复。

编辑：生成的代码：

```
<div class="left">
    <input type="hidden" name="ctl00$ContentPlaceHolder1$rptLowCost$ctl00$rptLowCostDepartures$ctl00$rptArrival$ctl00$hfCityCodeTo" id="ctl00_ContentPlaceHolder1_rptLowCost_ctl00_rptLowCostDepartures_ctl00_rptArrival_ctl00_hfCityCodeTo" value="AMS">                                                               
    <a id="ctl00_ContentPlaceHolder1_rptLowCost_ctl00_rptLowCostDepartures_ctl00_rptArrival_ctl00_aCityTo" cities="CLJ|AMS" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$rptLowCost$ctl00$rptLowCostDepartures$ctl00$rptArrival$ctl00$aCityTo','')">
   <span id="ctl00_ContentPlaceHolder1_rptLowCost_ctl00_rptLowCostDepartures_ctl00_rptArrival_ctl00_Label1">Amsterdam</span>
   </a>
</div> 
```

和班级（我已经取消了标签的班级并用你的css替换了它）。水平菜单中的锚点采用了这种风格，但来自转发器的这些锚点没有：

```
a:visited {
color: purple;
}
a:link {
color: blue;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:24:25.667

真的吗？你在谈论 CSS 伪类吗？这些还没有过时，我们可以看看你的代码吗？

```
a:link {color: blue;}
a:visited {color: purple;}
a:hover {color: red;}
a:active {color: yellow;} 
```

[http://www.w3.org/TR/CSS2/selector.html#link-pseudo-classes](http://www.w3.org/TR/CSS2/selector.html#link-pseudo-classes)

[http://css-tricks.com/snippets/css/link-pseudo-classes-in-order/](http://css-tricks.com/snippets/css/link-pseudo-classes-in-order/)

[https://developer.mozilla.org/en-US/docs/CSS/Pseudo-classes](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-classes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:21:48.453

以下 CSS 应该能够在所有现代浏览器上设置锚标记的样式：

```
a:link {
    color:#222;
}
a:hover {
    color:#000;
}
a:active {
    color:#000;
}
a:visited {
    color:#444;
} 
```

`.link`指定链接颜色，`.hover`鼠标悬停时更改链接颜色，`.active`指定活动链接颜色，并`.visited`指定链接被点击后的颜色。

# c - 内联递归函数

> ID：14441718
> 
> 赞同：2
> 
> 时间：2013-01-21T15:19:28.410
> 
> 标签：c, recursion, inline

在 gcc 生成 asm 代码的阶段，内联函数被其代码替换。

将内联用于递归函数时会发生什么行为

```
inline int fact (int n)
{
    if (n<=1)
        return 1;
    else
        return (n * fact(n-1));
} 
```

`gcc -S`当递归函数带有`inline`前缀和递归函数没有前缀时，我生成了 asm 代码`inline`，我发现这两种情况的 asm 代码是相同的。

你对此有什么解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:20:30.050

请注意，这`inline`只是对编译器可能接受或不接受的编译器的建议。遵守您的建议对编译器没有约束力。即使没有建议，智能编译器也会内联函数。通常，对于递归函数，编译器会做到一定的深度。

> **为什么编译器没有`inline`你的函数？**

对于递归函数，编译器通常会寻找机会执行***[尾调用优化](http://c2.com/cgi/wiki?TailCallOptimization)***。您的函数**不是尾调用 recursive**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T15:21:31.747

是`inline`的：实际上并没有告诉编译器它必须内联函数。它唯一需要的效果是告诉*链接器*该函数可以在多个目标文件中定义。（没有`inline`，那将是链接时错误。）

这允许您将函数定义存在于多个翻译单元中，以便编译器*可以选择*内联函数，而不会产生链接器错误。现代编译器在决定是否内联函数时可能会或*可能不会*考虑关键字的存在。`inline`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:25:25.490

无论如何都必须编译每个内联函数，以防有人需要指向该函数的指针。要检查差异，您应该在这样的地方使用该函数：

```
inline int fact (int n)
{
    if (n<=1)
        return 1;
    else
        return (n * fact(n-1));
}

void main () {
    printf("%d\n", fact(2));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:26:56.190

正如其他人已经说过的，`inline`这只是一个提示，而不是一个指令。编译器对内联函数有最终决定权。如果您想强制内联某些内容，可以使用宏来完成。但就我而言，你不能有递归宏，所以这是一条死胡同。

话虽如此，即使您*可以*强制内联函数，您也应该知道（在任何优化级别）编译器可以将一些递归函数展开为普通的 while 循环，因此您不会在最终程序集中看到任何悖论：生成的循环只会被内联。

# javascript - 使用浏览器/页面滚动条以固定位置滚动 div 内的内容

> ID：14441725
> 
> 赞同：2
> 
> 时间：2013-01-21T15:19:58.833
> 
> 标签：javascript, jquery, css, html

![在此处输入图像描述](../Images/78e633fb948bba2eb9f82346305fb6aa.png)

`position:fixed`我在页面周围都有一些 div 。其中一个 div 的内容稍长。

我的目标是我想使用主浏览器/页面滚动条滚动该框中的内容。**[（这样](http://jsfiddle.net/sBQ3m/10/)****不正常）`overflow:auto`** 这是确切的情况 [http://s7.postimage.org/d6xl1u9mz/sample.jpg](http://s7.postimage.org/d6xl1u9mz/sample.jpg)

有可用的插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:47:58.897

在不了解您的 HTML 的情况下：

```
<body>
    <section id="bodyContent"></section>
    <header></header>
    <section id="lSide"></section>
    <section id="rSide"></section>
</body> 
```

```
#bodyContent {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    min-height: 100%;
    width: 100%;
    padding: 90px 45px 0px 105px;
    background-clip: content-box;
    background-color: #FFFFFF;
}

body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    background-image: url(page_background.jpg);
    background-attachment: fixed;
}
header, #lSide, #rSide {
    position: fixed;
}
header {
    top: 0;
    width: 100%;
    height: 90px;
    background-image: url(page_background.jpg);
    background-attachment: fixed;
}
#lSide {
    left: 0;
    top: 0;
    height: 100%;
    width: 105px;
    padding: 90px 0 0 0;
}
#rSide {
    right: 0;
    top: 0;
    height: 100%;
    width: 45px;
    padding: 90px 0 0 0;
} 
```

这将强制 的内容`#bodyContent`位于各种边框元素之间的开口内，并且会导致任何溢出触发`body`元素上的滚动条，如您所愿。[**JSFiddle**](http://jsfiddle.net/wJmBj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:09:07.627

也许这是可能的。我创建了一个可以解决问题的[**jsFiddle**](http://jsfiddle.net/EAk7y/5/)。它并不完美，但您可以进一步开发它...此外，此代码段仅适用于现代浏览器，但对于较旧的 IE 也很容易修复。核心代码如下。

JavaScript：

```
window.onload = function () {
    var content = document.getElementById('contentwrapper'),
        dimdiv = document.getElementById('scrollingheight'),
        wrapHeight = document.getElementById('fixed').offsetHeight,
        scroller = function () {
            content.style.top = -(document.documentElement.scrollTop || document.body.scrollTop) + 5 + 'px';
            return;
        };
    dimdiv.style.minHeight = (content.scrollHeight - wrapHeight + 2 * 5) + 'px';
    window.addEventListener('scroll', scroller, false);
    return; 
} 
```

CSS：

```
#fixed {
    position: fixed;
    min-width: 300px;
    min-height: 200px;
    max-height: 200px;
    background: #fff;
    left: 150px;
    top: 200px;
    overflow-y: hidden;
    border: 1px solid #000;
}
#contentwrapper {
    max-width: 290px;
    position: absolute;
    top: 5px;
    left: 5px;
}
#scrollingheight {
    position: absolute;
    top: 100%;
    visibility: hidden;
    min-width: 1px;
} 
```

HTML：

```
<div id="scrollingheight"></div>
<div id="fixed">
    <div id="contentwrapper">
        content
    </div>
</div> 
```

请注意，必须修复, but中的*所有*内容。常量与'值有关。`body``#scrollingheight``5``#contentwrapper``top`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:27:45.097

AFAIK**你不能那样做。**
至少不是没有一些邪恶的 JS 诡计。
`Why?`因为您不能强制浏览器的默认滚动条高度（使其更小）包含与`html, body`（文档）完全不同的区域内的某些内容。
我的建议是您构建一个自定义滚动条，计算好`overflow hidden`区域的高度，将其添加到*可滚动比率*计算中。

# svn - 如何在 svn 中弃用目录？

> ID：14441727
> 
> 赞同：4
> 
> 时间：2013-01-21T15:20:03.420
> 
> 标签：svn

是否可以将目录的深度设置为`infinity`to `empty`？

```
$ ls .
Foo/     Bar/ 
```

`Foo/`并且`Bar/`都具有深度`infinity`但`Foo/`已被弃用。我不想删除 Foo 因为它仍然有用。但是 svn 仍然会继续检查 中的更新`Foo/`，这很耗时，因为它是一个大文件夹。所以我想阻止 svn 检查更新 Foo 因为它不会改变，即使这意味着在本地删除它。

因此，如果我执行以下操作：

```
$ rm -fr Foo
$ svn up --depth empty Foo 
```

有用。但是当我这样做时，`svn up`它只是重新下载整个目录......太糟糕了。所以我试试这个：

```
$ rm -fr Foo
$ svn up --set-depth empty Foo 
```

并且 svn 似乎永远卡住了，所以 5-10 分钟后我失去了耐心并终止了进程。

为什么会卡住？难道我做错了什么？有没有其他方法可以得到我正在寻找的东西？

我想过做这样的事情[，](https://stackoverflow.com/questions/10187600/svn-how-to-ignore-a-directory)但是更改属性不会影响其他用户访问存储库吗？我想要一个只影响我自己的本地存储库的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:20:28.677

删除它。它会一直在那里，任何需要它的人都可以从 svn 中得到它。

# r - 将 CSV 从 github 读入 R

> ID：14441729
> 
> 赞同：68
> 
> 时间：2013-01-21T15:20:08.360
> 
> 标签：r, data-manipulation, data-management

我正在尝试将 CSV 从 github 读入 R：

```
latent.growth.data <- read.csv("https://github.com/aronlindberg/latent_growth_classes/blob/master/LGC_data.csv") 
```

但是，这给了我：

```
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") : unsupported URL scheme 
```

我试过`?read.csv`, `?download.file`, `getURL`（只返回奇怪的 HTML），以及[数据导入手册](http://cran.r-project.org/doc/manuals/R-data.html)，但仍然无法理解如何使其工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-21T15:25:17.720

试试这个：

```
library(RCurl)
x <- getURL("https://raw.github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv")
y <- read.csv(text = x) 
```

你有两个问题：

1.  您没有链接到“原始”文本文件，而是 Github 的显示版本（访问 https:\raw.github.com....csv 的 URL 以查看[原始版本](https://raw.github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv)和[显示版本](https://github.com/aronlindberg/latent_growth_classes/blob/master/LGC_data.csv)之间的区别）。
2.  在许多情况下，https 对 R 来说是个问题，因此您需要使用类似的包`RCurl`来解决它。在某些情况下（虽然不是 Github），您可以简单地将 https 替换为 http 并解决问题，因此您始终可以先尝试一下，但我发现使用 RCurl 是可靠的，并且不需要太多额外的输入。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-21T15:25:12.987

从以下文档`url`：

> 请注意，不支持“https://”连接（Windows 上有一些例外）。

所以问题是 R 不允许连接到`https`URL。

您可以`download.file`使用`curl`：

```
download.file("https://raw.github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv", 
    destfile = "/tmp/test.csv", method = "curl") 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-03-03T07:36:09.513

我正在使用 R 3.0.2，这段代码可以完成这项工作。

```
urlfile<-'https://raw.github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv'
dsin<-read.csv(urlfile) 
```

这也是

```
urlfile<-'https://raw.github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv'
dsin<-read.csv(url(urlfile)) 
```

**编辑（会话信息）**

```
R version 3.0.2 (2013-09-25)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Polish_Poland.1250  LC_CTYPE=Polish_Poland.1250   
[3] LC_MONETARY=Polish_Poland.1250 LC_NUMERIC=C                  
[5] LC_TIME=Polish_Poland.1250    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_3.0.2 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-02T07:57:57.010

意识到这个问题已经很老了，谷歌仍然把它报告为最高结果（至少对我来说），所以我决定提供 2015 年的答案。

[正如r-bloggers](http://www.r-bloggers.com/the-curl-package-a-modern-r-interface-to-libcurl/)所描述的，人们现在通常正在迁移到`curl`package（包括 Famous ），它提供了以下非常简单的解决方案：`httr`

```
library(curl)

x <- read.csv( curl("https://raw.githubusercontent.com/trinker/dummy/master/data/gcircles.csv") ) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-05-14T00:28:42.973

以类似于 akhmed 的风格，我想我会更新答案，因为现在你可以只使用 Hadley 的`readr`包。只需注意一件事：您需要将 url 作为**原始**内容（见`//raw.git...`下文）。这是一个例子：

```
library(readr)
data <- read_csv("https://raw.githubusercontent.com/RobertMyles/Bayesian-Ideal-Point-IRT-Models/master/Senate_Example.csv") 
```

瞧！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-25T19:23:23.827

这就是我一直在帮助开发**rio**的目的。它基本上是一个通用的数据导入/导出包，支持 HTTPS/SSL 并从其扩展名中推断文件类型，因此允许您使用一个导入功能基本上读取任何内容：

```
library("rio") 
```

如果您从 Github 获取 CSV 的“原始”网址，则可以将其加载一行`import`：

```
import("https://raw.githubusercontent.com/aronlindberg/latent_growth_classes/master/LGC_data.csv") 
```

结果是一个data.frame：

```
 top100_repository_name   month monthly_increase monthly_begin_at monthly_end_with
1                    Bukkit 2012-03                9              431              440
2                    Bukkit 2012-04               19              438              457
3                    Bukkit 2012-05               19              455              474
4                    Bukkit 2012-06               18              475              493
5                    Bukkit 2012-07               15              492              507
6                    Bukkit 2012-08               50              506              556
... 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-11T16:25:31.633

现在似乎 GitHub 希望你通过他们的 API 来获取内容。我使用[gh](https://github.com/r-lib/gh)包如下：

```
require(gh)

tmp = tempfile()
qurl = 'https://raw.githubusercontent.com/aronlindberg/latent_growth_classes/master/LGC_data.csv'
# download
gh(paste0('GET ', qurl), .destfile = tmp, .overwrite = TRUE)
# read
read.csv(tmp) 
```

重要的部分是您提供个人访问令牌 (PAT)。通过`gh(.token = )`参数，或者像我一样，通过在`~/.Renviron`文件 [1] 中全局设置 PAT。当然，您首先必须在您的[GitHub 帐户](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token)中创建 PAT 。

[1] `~/.Renviron`，我猜是所有[r-lib](https://github.com/r-lib)包首先搜索的，因为[gh](https://github.com/r-lib/gh)是一个。其中的令牌应如下所示：

```
GITHUB_PAT = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" 
```

* * *

您还可以使用[usethis](https://usethis.r-lib.org/)包来设置 PAT。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-26T01:44:00.733

curl 至少对我来说可能无法在 Windows 中工作

这就是在 Windows 中对我有用的

```
download.file("https://github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv", 
    destfile = "/tmp/test.csv",method="wininet") 
```

在 Linux 中

```
download.file("https://github.com/aronlindberg/latent_growth_classes/master/LGC_data.csv", 
    destfile = "/tmp/test.csv",method="curl") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-26T14:13:33.153

一种相当愚蠢的方式......使用剪贴板中的复制/粘贴

```
x <- read.table(file = "clipboard", sep = "t", header=TRUE) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-29T17:09:31.130

正如其他帖子所提到的，只需转到 github 上的原始代码链接即可。

例如：

x <- read.csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2018/2018-04-23/week4_australian_salary.csv")

# python - Python线程通信解决方案

> ID：14441732
> 
> 赞同：2
> 
> 时间：2013-01-21T15:20:20.307
> 
> 标签：python, python-2.7, python-multithreading

我正在编写一个用 Python 编写的非常基本的多线程网络爬虫，并为爬取页面和提取 url 的函数使用 While 循环，如下所示：

```
def crawl():
    while True:
        try:
            p = Page(pool.get(True, 10))
        except Queue.Empty:
            continue

        # then extract urls from a page and put new urls into the queue 
```

（完整的源代码在另一个问题中：[Multi-threaded Python Web Crawler Got Stuck](https://stackoverflow.com/questions/14403907/multi-threaded-python-web-crawler-got-stuck)）

现在理想情况下，我想向 While 循环添加一个条件，以使 while 循环在以下情况下退出：

1.  池（存储 url 的 Queue 对象）为空，并且；

2.  所有线程都在阻塞，等待从队列中获取 url（这意味着没有线程将新 url 放入池中，因此让它们等待没有意义，并且会使我的程序卡住。）

例如，类似：

```
#thread-1.attr == 1 means the thread-1 is blocking. 0 means not blocking

while not (pool.empty() and (thread-1.attr == 1 and thread-2.attr == 1 and ...)):
    #do the crawl stuff 
```

所以我想知道是否有一个线程可以检查其他活动线程在做什么，或者其他活动线程的状态或属性值。

我已经阅读了有关threading.Event()的官方文档，但仍然无法弄清楚。

希望这里有人能给我指路:)

非常感谢！

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:45:04.290

您可以尝试从头开始实现您想要的东西，我现在想到了不同的解决方案：

*   使用[threading.enumerate(](http://docs.python.org/2/library/threading.html#threading.enumerate) ) 来检查是否有线程还活着。
*   尝试实现一个线程池，让您知道哪个线程a仍然活着，哪些线程返回到池中，这也有利于限制爬取第三方网站的线程数（例如，检查[here ）。](http://chrisarndt.de/projects/threadpool/)

如果你不想重新发明轮子，你可以使用现有的实现线程池的库，或者你也可以检查使用绿色线程并提供[线程池的](http://www.gevent.org/gevent.pool.html#gevent.pool.Pool)**gevent**，我已经使用类似的东西实现了类似的东西：

```
while 1:
    try:
        url = queue.get_nowait()
    except Empty:
        # Check that all threads are done.
        if pool.free_count() == pool.size:
            break
    ... 
```

您还可以将哨兵对象写入队列，以标记爬行完成并存在主循环并等待线程完成（例如使用池）。

```
while 1:
    try:
        url = queue.get_nowait()
        # StopIteration mark that no url will be added to the queue anymore.
        if url is StopIteration:
             break
    except Empty:
        continue
    ...
pool.join() 
```

您可以选择自己喜欢的，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:37:30.207

考虑看看这个解决方案：[Web crawler Using Twisted](https://stackoverflow.com/questions/10209229/web-crawler-using-twisted)。正如该问题的答案所说，我还建议您查看[http://scrapy.org/](http://scrapy.org/)

Python 中的多线程（直接使用线程）很讨厌，所以我会避免它并使用某种消息传递或基于反应器的编程。

# matlab - 编写和阅读 Matlab 矩阵

> ID：14441733
> 
> 赞同：1
> 
> 时间：2013-01-21T15:20:23.713
> 
> 标签：matlab, io

我有一个简单的矩阵

```
 A =     
    0.21415   2             3
    5         7.453435      9 
```

我想把它写在一个文件里，然后再读。

我应该使用`save myfile A`和`load`命令还是[`readmtx`](http://www.mathworks.it/it/help/map/ref/readmtx.html)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:24:25.253

不知道你会认为什么是“最好的”，但简单的代码和常见的做法确实只是：

```
A = magic(4)
save filename A
clear
load filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:24:18.050

把事情简单化。使用`save`和`load`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T18:05:16.580

只是一个注释，您可以使用它`save -ascii varname`来获取变量的文本表示。默认值是一个`.mat`更高效但不可读且更难与外部程序交互的文件。

# c++ - OpenSSL Boost context.use_private_key_file 和 context.use_rsa_private_key_file 无异常终止程序

> ID：14441734
> 
> 赞同：4
> 
> 时间：2013-01-21T15:20:24.240
> 
> 标签：c++, c, boost, openssl, boost-asio

我的代码主要基于 boost ssl 示例客户端，但是我已经使它完全同步，但是 boost 中的示例仍然会做同样的事情。

加载 server.pem 后`sslContext.load_verify_file("server.pem");`

我尝试加载客户端密钥和 crt 以供服务器验证，用于双向握手。

```
context_.use_private_key_file("client.key",boost::asio::ssl::context_base::file_format::pem); // also tried use_rsa_private_key_file
context_.use_certificate_file("client.crt",boost::asio::ssl::context_base::file_format::pem); 
```

当调用 use_private_key_file 或 use_rsa_private_key_file 时，当我输入密码时，程序会终止。为什么是这样？- 我的密码是正确的，我已经检查过了`openssl rsa -check -in client.key`

构造函数将是 boost 示例的唯一更改，这就是我将其用于正常 SSL 握手的方式。

```
 server(boost::asio::io_service& io_service, unsigned short port)
        : io_service_(io_service),
                acceptor_(io_service,
                boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port)),
                context_(boost::asio::ssl::context::sslv23)
                {
                        context_.load_verify_file("server.pem");
                        start_accept();
                } 
```

用于两次握手。

```
 server(boost::asio::io_service& io_service, unsigned short port)
        : io_service_(io_service),
                acceptor_(io_service,
                boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port)),
                context_(boost::asio::ssl::context::sslv23)
                {

                        context_.load_verify_file("server.pem");
                        context_.use_private_key_file("client.key",boost::asio::ssl::context_base::file_format::pem); // also tried use_rsa_private_key_file
                        context_.use_certificate_file("client.crt",boost::asio::ssl::context_base::file_format::pem);
                        start_accept();
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:30:30.970

每次使用控制台输入密码时都会失败。但是，当我使用回调`set_password_callback(boost::bind(&get_password, this));`时它工作正常。

# php - PHP格式日期

> ID：14441735
> 
> 赞同：2
> 
> 时间：2013-01-21T15:20:25.807
> 
> 标签：php, date, format, date-format

如何强制日期格式输出：

2012 年 12 月 12 日、2012 年 1 月 10 日、2012 年 1 月 5 日

代替

2012 年 12 月 12 日、2012 年 1 月 10 日、2012 年 1 月 5 日？

我的代码如下：

```
$adatefrom = date_create($_POST['datefrom']);
$adateto = date_create($_POST['adateto']);
$adatefrom = date_format($adatefrom, 'd/m/Y');
$adateto = date_format($adateto, 'd/m/Y'); 
```

请注意，我必须在发布后格式化日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T15:24:19.403

[在这里](http://php.net/manual/en/function.date.php)查看 PHP 内置`date`函数

你会发现你的解决方案就是这么简单：

```
date('j/n/Y',strtotime($_POST['datefrom'])); 
```

需要注意的关键是第一个参数中使用的字符。

*   `j`表示**没有**前导零的日期
*   `n`**表示没有**前导零的月份

您还有许多其他选择，只需阅读文档即可。

*请注意，在 Google 上简单搜索“PHP 日期”会为您找到此解决方案*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:22:11.060

```
$adatefrom = date_create($_POST['datefrom']);
$adateto = date_create($_POST['adateto']);
$adatefrom = date_format($adatefrom, 'j/n/Y');
$adateto = date_format($adateto, 'j/n/Y'); 
```

不客气！;)

# spring - 在Tomcat上集成Jsf（Richfaces）hibernate和spring

> ID：14441737
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:20:32.260
> 
> 标签：spring, hibernate, jsf, richfaces

我将使用这些框架启动一个应用程序，但我不知道选择哪个版本（有或没有 maven）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:23:46.323

选择哪个版本可能不是一个相关的问题，因为有很多版本，并且在每种情况下选择合适的版本确实是独一无二的，因为您必须考虑您已经知道如何使用哪些技术，您可以沿着方式，当然，当前项目的要求是什么。

但是如何引导一个项目确实是一个好问题，因为有太多的选择很容易让人不知所措，而且没有多少好的教程可以让你走上一个足够好的起点，而且你*有从某个地方开始*，这就是我要尝试回答的问题，告诉您创建基于 Maven 的项目的步骤，该项目集成了 Spring、JSF 和 JPA（使用 Hibernate 实现），以 Tomcat 7 为目标。

稍后，您可以调整`pom.xml`文件中的版本号，以尝试其他版本的 Spring、Mojarra、Hibernate 等。

*   安装[Maven](http://apache.maven.org)，如果你还没有
*   创建一个简单的 Maven webapp 项目，使用`archetype:generate`Maven 目标（这可能需要一段时间），在命令行中运行它：

`mvn archetype:generate -B -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DgroupId=PUT_YOUR_BASE_PACKAGE_NAME_HERE -DartifactId=APP_NAME -Dpackage=war`

*   编辑`pom.xml`，添加以下依赖项：

    ```
    <!-- To configure a datasource pool -->
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
        <scope>runtime</scope>
    </dependency>

    <!-- Mojarra -->
    <dependency>
        <groupId>org.glassfish</groupId>
        <artifactId>javax.faces</artifactId>
        <version>2.0.10</version>
        <scope>compile</scope>
    </dependency>

    <!-- Richfaces -->
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-api</artifactId>
        <version>4.2.2.Final</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-impl</artifactId>
        <version>4.2.2.Final</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-api</artifactId>
        <version>4.2.2.Final</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-ui</artifactId>
        <version>4.2.2.Final</version>
        <scope>runtime</scope>
    </dependency>

    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>compile</scope>
        <exclusions>
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>compile</scope>
    </dependency>

    <!-- Hibernate & JPA -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-envers</artifactId>
        <version>3.6.10.Final</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
        <scope>compile</scope>
    </dependency>

    <!-- Logging config, app uses java.util.logging and wrappers for log4j and commons-logging (jcl) -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>1.6.6</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>log4j-over-slf4j</artifactId>
        <version>1.6.6</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.6.6</version>
    </dependency>
    <!-- In-memory DB, for beginning development -->
    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.2.8</version>
        <scope>runtime</scope>
    </dependency> 
    ```

*   `src/main/resources/META-INF/persistence.xml`为 JPA 配置创建一个：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="APP_NAME">
                <!-- Add here your Entity classes, like: -->
                <!-- <class>PUT_YOUR_BASE_PACKAGE_NAME_HERE.BookEntity</class> -->
    </persistence-unit>
    </persistence> 
    ```

*   为 Spring bean 配置创建一个文件`src/main/resources/appContext.xml`，包含以下内容（设置一个带有事务管理的 JPA EMF 和一个内存数据库）：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:lang="http://www.springframework.org/schema/lang" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">
    <context:component-scan base-package="PUT_YOUR_BASE_PACKAGE_NAME_HERE" />

    <!-- sets up transaction management for service beans -->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="APP_NAME" />
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
    </bean>
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
    <tx:annotation-driven transaction-manager="transactionManager" />
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:tempdb" />
        <property name="username" value="sa" />
    </bean>
    <bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="showSql" value="true" />
        <property name="generateDdl" value="true" />
        <property name="databasePlatform" value="org.hibernate.dialect.HSQLDialect" />
    </bean>
    </beans> 
    ```

*   编辑`src/main/webapp/WEB-INF/web.xml`设置 Spring 和 JSF 初始化：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>APP_NAME</display-name>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>

    <!-- JSF Mapping -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <!-- Faces config for development -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.enableMissingResourceLibraryDetection</param-name>
        <param-value>true</param-value>
    </context-param>

    <!-- Spring beans configuration -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath://appContext.xml</param-value>
    </context-param>

    <!-- filter enforcing charset UTF-8 - must be the first in the chain! -->
    <filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>utf-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- listeners do Spring -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    </web-app> 
    ```

*   配置 JSF 以查找 Spring beans，创建`src/main/webapp/WEB-INF/faces-config.xml`具有以下内容的文件：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <faces-config xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd" version="2.0">
            <application>
                <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
            </application>
    </faces-config> 
    ```

*   现在，创建一个 JSF 页面`src/main/webapp/index.xhtml`来测试它：

    ```
    <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
        xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich">
        <h:head>
            <title>Hello, world</title>
        </h:head>
        <h:body>
            <rich:panel header="Hello, World">
            <p>This is a JSF page, testing access to Spring beans.</p>
            <ui:fragment rendered="#{entityManagerFactory != null}">
                EntityManagerFactory bean loaded successfully!
            </ui:fragment>
            <ui:fragment rendered="#{entityManagerFactory == null}">
                EntityManagerFactory didn't loaded successfully! :(
                Check out the logs!
        </ui:fragment>
    </rich:panel>
    </html> 
    ```

*   就是这样，现在生成一个 WAR 文件`mvn package`并在 Tomcat 7 安装中对其进行测试。

之后，您可以尝试将项目导入 Eclipse，添加一些 JPA 实体，创建带有[@Repository](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/stereotype/Repository.html)和[@Transactional](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/transaction/annotation/Transactional.html)注释的 Spring bean以利用事务设施、JSF 页面和使用这些的支持 bean，等等.

**注意：**使用 Maven 3.0.4 和 Tomcat 7.0.27 测试。您可能需要调整您的 Maven 配置，以设置默认编译器设置，请参阅[此问题](https://stackoverflow.com/questions/2531650/default-maven-compiler-setting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T21:12:26.607

提供的答案正是我所追求的，但是，我无法处理 JSF 页面。我将以下内容添加到 web.xml 并请求 index.faces 页面，它运行良好。

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping> 
```

# mysql - 如何选择特定列与另一行的值不同的 SQL 行？

> ID：14441739
> 
> 赞同：0
> 
> 时间：2013-01-21T15:20:38.373
> 
> 标签：mysql

我有一个包含一些列的表格，其中之一是“电子邮件”。我想选择此表中的行，其中“电子邮件”中没有重复值。

意思是如果表是这样的：

```
id - email
10 - hello@hello.com
11 - bro@lift.com
12 - hello@hello.com
13 - hey@hello.com 
```

该查询将仅返回 id 11 和 13，因为 10 和 12 是重复的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:22:31.817

我会推荐使用`JOIN`.

```
SELECT *
FROM tableName
WHERE email IN
    (
        SELECT email
        FROM    tableName
        GROUP BY email
        HAVING COUNT(*) = 1
    ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2705f/3)

或使用`JOIN`

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT email
            FROM    tableName
            GROUP BY email
            HAVING COUNT(*) = 1
        ) b ON a.email = b.email 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2705f/4)

为了获得更好的性能，您使用在列上定义索引`email`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:22:22.463

尝试这个：

```
SELECT *
FROM Emails
WHERE email NOT IN(SELECT email
                   FROM emails
                   GROUP BY email
                   HAVING COUNT(email) > 1); 
```

这会给你：

```
| ID |         EMAIL |
----------------------
| 11 |  bro@lift.com |
| 13 | hey@hello.com | 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2705f/1)

# javascript - 将按钮与键盘关联

> ID：14441741
> 
> 赞同：2
> 
> 时间：2013-01-21T15:20:40.137
> 
> 标签：javascript

我有以下计算器：http: [//jsfiddle.net/4YT3W/](http://jsfiddle.net/4YT3W/)

好的，我不知道这是否可行，但是：当您单击一个按钮时，它会附加一些默认的 CSS。但是当我从键盘上按 1 时，什么也没有发生（这意味着我的 1 按钮没有收到任何按下）.. 那我该怎么做呢？

我尽力解释我想要什么：）

我必须在我拥有的任何按钮上添加功能？

这是输入接受的键（以防您卡住）

```
function onlyNumbers(evt)
{
     var charCode = (evt.which) ? evt.which : event.keyCode

        if ( (charCode >=42) && (charCode <= 57)  ){
            return true;
        }

        if(charCode == 61){
            return true;
        }

         return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:14:06.330

尝试将此添加到您的 javascript 代码中：

```
$(document).keypress(function(event) {
    var n = event.keyCode - 48;
    if (n >=0 && n <= 9) {
        calculator.result.value += n;
    }
}); 
```

您可能想自己添加更多密钥。

[http://jsfiddle.net/LgjLM/](http://jsfiddle.net/LgjLM/)

# iphone - UITableViewCell 的动态高度取决于文本

> ID：14441743
> 
> 赞同：2
> 
> 时间：2013-01-21T15:20:43.507
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个具有正确详细单元格布局的分组表视图。现在我从我的服务器取回了我的数据。有时我会收到一个非常大的文本。所以 tableviewCell 应该高于其他的。你可以在这里看到我的问题的截图。

![在此处输入图像描述](../Images/d88c16b641cb9a36d89ee9a66408eae3.png)

就像您在我的第一个单元格中看到的那样，我有一个非常大的文本。现在我希望单元格的高度随着文本的长度而增长，所以我总是可以看到整个文本而不是'...'这就是我现在在代码中所拥有的。

```
#define PADDING 10.0f
- (CGFloat)tableView:(UITableView *)t heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    Subscription *sub = [_dictTask valueForKeyPath:@"subscription"];

    NSArray *meta = sub.meta.allObjects;

    NSString *text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_value"];
    CGSize textSize = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(self.tableView.frame.size.width - PADDING * 3, 1000.0f)];

    return textSize.height + PADDING * 3;
} 
```

**编辑** 我目前拥有的代码。

```
- (CGFloat)tableView:(UITableView *)t heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    Subscription *sub = [_dictTask valueForKeyPath:@"subscription"];

    NSArray *meta = sub.meta.allObjects;

    NSString *text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_value"];
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:14.0];
    CGSize constraintSize = CGSizeMake(330.0f, 400);  // Make changes in width as per your label requirement.

    CGSize textSize = [text sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return  textSize.height;
} 
```

这就是结果。

![在此处输入图像描述](../Images/2af3daa470b48890646c7d6b72095199.png)

**编辑 CellForRowAtIndexPath**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Subscription *sub = [_dictTask valueForKeyPath:@"subscription"];
    NSArray *meta = sub.meta.allObjects;
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        cell.textLabel.text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_label"];
        cell.detailTextLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.detailTextLabel.numberOfLines = 0;
        cell.detailTextLabel.text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_value"];

        cell.textLabel.textColor = [UIColor colorWithRed:102/255.0
                                               green:102/255.0
                                                blue:102/255.0
                                               alpha:1.0];
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:18];
        return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:44:09.563

您需要`lineBreakMode:UILineBreakModeWordWrap`在代码中使用。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_value"];
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:14.0];
    CGSize constraintSize = CGSizeMake(330.0f, MAXFLOAT);  // Make changes in width as per your label requirement. 

    CGSize textSize = [text sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return  textSize.height;
} 
```

此外，您需要`also in datasource method`像这样设置 detailTextLabel cellForRowAtIndexPath` 的两个属性：

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   cell.detailTextLabel.lineBreakMode = UILineBreakModeWordWrap;
   cell.detailTextLabel.numberOfLines = 0;
 } 
```

*   **numberofLines 属性描述：**

    此属性控制要使用的最大行数，以使标签的文本适合其边界矩形。此属性的默认值为 1。要删除任何最大限​​制并根据需要使用尽可能多的行，请将此属性的值设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:50:01.950

尝试这个：

```
 - (CGFloat)tableView:(UITableView *)t heightForRowAtIndexPath:(NSIndexPath *)indexPath {
            Subscription *sub = [_dictTask valueForKeyPath:@"subscription"];

            NSArray *meta = sub.meta.allObjects;

            NSString *text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_value"];
            UIFont *cellFont = [UIFont fontWithName:@"Helvetica-Bold" size:18.0];
            CGSize constraintSize = CGSizeMake(330.0f, MAXFLOAT);  // Make changes in width as per your label requirement.

            CGSize textSize = [text sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return  textSize.height + 20; } 
```

然后，考虑使用唯一的小区标识符。这里的想法是重用单元格将导致内容的高度不匹配。（有些人不喜欢唯一标识符的想法，但它们可以工作，除非你的表很大，否则它们不会有问题。）因此，试试这个：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Subscription *sub = [_dictTask valueForKeyPath:@"subscription"];
    NSArray *meta = sub.meta.allObjects;

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:[NSString stringWithFormat:@"%i", indexPath.row]];

    if (cell == nil){
        cell.textLabel.text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_label"];
        cell.detailTextLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.detailTextLabel.numberOfLines = 0;
        cell.detailTextLabel.text = [[meta objectAtIndex:indexPath.row]valueForKey:@"sum_value"];

        cell.textLabel.textColor = [UIColor colorWithRed:102/255.0
                                               green:102/255.0
                                                blue:102/255.0
                                               alpha:1.0];
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:18];
}
        return cell;
} 
```

# sql-server - 不同数量的内部连接

> ID：14441744
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:20:44.243
> 
> 标签：sql-server, outer-join

我的 SQL 数据库中有两个相同的表，这些表分别由项目代码和数量组成。

我需要查看两个表中的哪些项目数量不同，哪些项目数量不同

不存在于另一个表中

**我尝试在 ITEMCODE=ITEMCODE AND QTY<>QTY 上使用 FULL OUTER JOIN**

**它不工作**

我得到的结果是这样的：

[http://www.sendspace.com/file/nmb7yu](http://www.sendspace.com/file/nmb7yu)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:32:31.867

```
select *
from table1 a full outer join table2 b 
on a.code = b.code 
where a.qty <> b.qty or a.code is null or b.code is null 
```

我的幸运猜测是您过滤掉了代码列为空的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:33:12.273

尝试这样的事情：

```
SELECT  c.Code ,
        t1.Code ,
        t1.Qty ,
        t2.Code ,
        t2.Qty
FROM    ( SELECT    Code
          FROM      dbo.Table1
          UNION
          SELECT    Code
          FROM      dbo.Table2
        ) c
        LEFT OUTER JOIN dbo.Table1 t1 ON c.Code = t1.Code
        LEFT OUTER JOIN dbo.Table2 t2 ON c.Code = t2.Code
WHERE   t1.Code IS NULL
        OR t2.Code IS NULL
        OR t1.Qty <> t2.Qty 
```

由于您在 WHERE 子句中测试了不等式，因此您隐式只包括两个表中的项目。通过这种方式，您可以包含一个表中的项目，但另一个表中的项目不包括在内，或者数量不同。

# wcf - Sharepoint Webpart 中的 WCF 客户端配置

> ID：14441746
> 
> 赞同：0
> 
> 时间：2013-01-21T15:20:52.307
> 
> 标签：wcf, sharepoint, sharepoint-2010, wcf-client

我有一个调用 WCF 服务的 Sharepoint 2010 webpart。

我创建了一个服务代理并手动编码了端点，见下文。

在传统的 WCF 客户端中，我会使用配置文件进行配置，并在构建部署到不同环境时使用转换。

我将如何通过 Sharepoint webpart 实现相同的目标？我想将配置放在可以针对不同构建配置进行更改的地方。

IE。对于测试期间的本地部署，然后是测试服务器，生产。我们正在尝试尽可能地自动化。

谢谢，蒂姆

**更新：** 我知道您需要将配置数据放在共享点的 web.config 文件中。我正在寻找一种将这些配置设置放入源代码控制的方法，并让它们针对不同的构建和环境自动填充/部署。

> 命名空间 CombinedPortal.WcfClient { 公共类 FrameworkServiceProxy : IFrameworkService { 私有 IFrameworkService _proxy;
> 
> ```
>  public FrameworkServiceProxy()
>     {
>         var endpoint = new EndpointAddress("http://server:1234/FrameworkService.svc");
>         var binding = new WSHttpBinding(SecurityMode.None);
> 
>         _proxy = new ChannelFactory<IFrameworkService>(binding, endpoint).CreateChannel();
>     }
> 
>     public Framework GetCurrentFramework(double uniqueLearnerNumber)
>     {
>         var fw = _proxy.GetCurrentFramework(uniqueLearnerNumber);
>         return fw;
>     }
> } } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:07:57.460

您的代码是在服务器上执行的 C# 代码。

然后，当用户按下 Web 部件上的按钮时，会有一个 POST 返回到执行 C# 代码的 Sharepoint Web 服务器。

因此，使用的是您的 SharePoint 网站的 web.config。

# asp.net-mvc - 用于枚举下拉列表的自定义 MVC 模板

> ID：14441751
> 
> 赞同：4
> 
> 时间：2013-01-21T15:21:05.907
> 
> 标签：asp.net-mvc, razor, twitter-bootstrap

我已经为 EditorFor 和 DisplayFor 辅助方法创建了几个 MVC 模板，以使用 Twitter Bootstrap 框架按照我想要的方式设置样式。我现在有一个适用于我需要的所有位的工作解决方案，但想概括我设置的一个部分以显示状态列表。我有一个州枚举（包含所有美国州的列表），我在用户地址的下拉列表中显示。我使用 [DataType] 属性让 MVC 使用我的 State.cshtml 模板。

```
[Required]
[Display(Name = "State")]
[DataType("State")]
public State State { get; set; } 
```

所以它工作得很好，但我想改变它，以便我可以做一些类似 DataType("Enum") 或其他方式来为所有枚举通用地点击这个模板。

模板如下所示：

```
@using System
@using System.Linq
@using Beno.Web.Helpers
@using TC.Util

@model Beno.Model.Enums.State

<div class="control-group">
    @Html.LabelFor(m => m, new {@class = "control-label{0}".ApplyFormat(ViewData.ModelMetadata.IsRequired ? " required" : "")})
    <div class="controls">
        <div class="input-append">
            @Html.EnumDropDownListFor(m => m)
            <span class="add-on">@(new MvcHtmlString("{0}".ApplyFormat(ViewData.ModelMetadata.IsRequired ? " <i class=\"icon-star\"></i>" : "")))</span>
        </div>
        @Html.ValidationMessageFor(m => m, null, new {@class = "help-inline"})
    </div>
</div> 
```

EnumDropDownListFor 是我之前发布的一个辅助方法，它通常适用于任何枚举。我不知道如何更改此模板以将通用枚举作为模型对象？

**更新：**为了完整起见，我列出了 EnumDropDownListFor 方法：

```
public static MvcHtmlString EnumDropDownListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes = null) where TProperty : struct, IConvertible
{
    if (!typeof(TProperty).IsEnum)
        throw new ArgumentException("TProperty must be an enumerated type");

    var selectedValue = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData).Model.ToString();
    var selectList = new SelectList(from value in EnumHelper.GetValues<TProperty>()
                                    select new SelectListItem
                                                {
                                                    Text = value.ToDescriptionString(),
                                                    Value = value.ToString()
                                                }, "Value", "Text", selectedValue);

    return htmlHelper.DropDownListFor(expression, selectList, htmlAttributes);
} 
```

将模型类型更改为 Enum 会在调用辅助方法的那一行产生以下错误：

```
CS0453: The type 'System.Enum' must be a non-nullable value type in order to use it as parameter 'TProperty' in the generic type or method 'Beno.Web.Helpers.ControlHelper.EnumDropDownListFor<TModel,TProperty>(System.Web.Mvc.HtmlHelper<TModel>, System.Linq.Expressions.Expression<System.Func<TModel,TProperty>>, object)' 
```

然后，如果我删除检查 TProperty 是否为枚举和约束的结构，我会在我试图获取枚举值的行上得到一个编译错误：

```
System.ArgumentException: Type 'Enum' is not an enum 
```

我想知道是否不可能做我在这里尝试的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:23:32.113

你可以只创建一个 EditorTemplate`Enum.cshtml`

您所要做的就是更改这一行：

```
@model Beno.Model.Enums.State 
```

为了这 ：

```
@model System.Enum 
```

然后你就可以使用`Enum`它了。

问题：引擎无法推断项目的基类，因此不会为 TestEnum 分配 Enum 模板，因此您必须显式调用它：

```
@Html.EditorFor(model => model.EnumValue, "Enum") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:27:55.943

我也一直在努力实现这一目标。

您是否希望能够为所有模型中的所有 Enum 类型使用一个模板。这样，您在 EditorTemplates 文件夹中有一个枚举模板，允许您将它们显示为下拉列表。

我一直在关注这篇文章。[http://blogs.msdn.com/b/stuartleeks/archive/2010/05/21/asp-net-mvc-creating-a-dropdownlist-helper-for-enums.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2010/05/21/asp-net-mvc-creating-a-dropdownlist-helper-for-enums.aspx)

您遇到的问题是您的模板在 TModel 和 TProperty 中传递了 System.Enum 的类型

```
Expression<Func<TModel, TProperty>> expression 
```

然后，当您执行以下操作时，TProperty 的类型为 System.Enum 而不是 Beno.Model.Enums.State

```
 EnumHelper.GetValues<TProperty>() 
```

为了解决这个问题，我不会费心去看 TProperty，因为它没有给我正确的类型。

相反，我查看 metadata.ModelType。

```
ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData); 
```

这给了我正确的类型，但你不能在 Covariance Derived 类中使用它们

```
EnumHelper.GetValue<metadata.ModelType> //This does not work. 
```

所以我重写了正文以不使用任何泛型。

```
 public static MvcHtmlString EnumDropDownListFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

        var values = Enum.GetValues(metadata.ModelType);

        List<SelectListItem> items = new List<SelectListItem>();

        foreach (var v in values)
        {
            items.Add(new SelectListItem
            {
                Text = Regex.Replace(v.ToString(), "([A-Z][a-z])", " $1").Trim(),
                Value = v.ToString(),
                Selected = v.Equals(metadata.Model)
            });
        }

        return htmlHelper.DropDownListFor(expression, items);

    } 
```

您可能需要更改方法签名以包含您的 htmlattributes。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:59:29.730

不确定我是否完全理解你的意思，但试试这个：

```
@Html.DropDownListFor(model => model.EnumName, new SelectList(Enum.GetValues(typeof(Namespace.Models.EnumName)))) 
```

EnumName = 您的情况。

我已经使用上面的方法将枚举放入使用 Twitter Bootstrap 的下拉列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T18:00:09.530

正如其他人所展示的那样，编写自定义助手是要走的路。这正是[TwitterBootstrapMVC](https://www.twitterbootstrapmvc.com/)中所做的。在其他助手中，它有一个 helper `DropDownListFromEnumFor(...)`，您可以像这样使用它：

```
@Html.Bootstrap().DropDownListFromEnumFor(m => m.SomeEnum) 
```

或者

```
@Html.Bootstrap().DropDownListFromEnum("SomeEnum") 
```

BMVC 很酷的一点是，您可以使用扩展方法自定义下拉菜单，其中一些用于常规 html，而另一些则特定于 Bootstrap。以下是其中一些：

```
@(f.ControlGroup().DropDownListFromEnumFor(m => m.SomeEnum)
    .Append("something")
    .AppendIcon("glyphicon glyphicon-chevron-right")
    .Class("cool-dd")
    .OptionLabel("-- Select --")
    .Tooltip("cool tooltip")) 
```

哦，是的，上面的示例将生成完整的控制组 - 输入、标签和验证消息。

* * *

免责声明：我是 TwitterBootstrapMVC 的作者

# apache - https 重定向循环，即使使用 X-Forwarded-Proto

> ID：14441752
> 
> 赞同：3
> 
> 时间：2013-01-21T15:21:05.180
> 
> 标签：apache, https, centos, varnish

我们正在构建一个新服务器：Pound -> Varnish -> Apache -> CentOS。

由于 Varnish 在 SSL 中不起作用，我们在磅中将“X-Forwarded-Proto”设置为“https”，如果我们在 https 中，我们正在检测这种方式。

当我们直接访问像[https://example.com](https://example.com)这样的 URL 时，它可以工作，但当我们使用“htaccess”或“PHP”从“http”重定向到“https”时，它就不行了。似乎 X-Forwarded-Proto 没有通过重定向转发。所以我们陷入了无限的重定向循环。

我们找到了一种使用 javascript 执行重定向的方法，但我们更希望有一个服务器端解决方案。

所以我们想知道apache、磅、清漆等是否有改变的设置？

我们尝试了很多解决方案，例如：

```
////////////////
// htaccess
////////////////////
  RewriteCond %{HTTP:X-Forwarded-Proto} !https
  RewriteRule (.*) https://example.com [L,R]

///////////////////
// php 
//////////////////
if(isset($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https'){
    $_SERVER['HTTPS']='on'; 
}

if(!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] != 'on'){
    header('Location: '. 'https://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']);
}

Our pound config look like:

//////////////////
// pound
///////////////
ListenHTTPS

      Address 0.0.0.0 # all interfaces
      Port 443
      AddHeader "X-Forwarded-Proto: https"
      HeadRemove "X-Forwarded-Proto"
      HeadRemove "X-Forwarded-For"
      Cert "/path/to/certificate.pem

      Service
            BackEnd
                  Address 10.0.0.1
                  Port 80
                  Priority 1
            End

      End
End 
```

感谢帮助我们，我们在这个问题上花了很多时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-10T16:21:29.977

如上所述：

> 我们不得不：
> 
> *   放入`RewriteLocation 0`_`ListenHTTPs`
> *   修复配置中的域名问题

```
ListenHTTPS

  ReWriteLocation 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T12:52:25.927

就我而言，Varnish 被配置为规范化 URL 并删除了方案和域：

```
set req.url = regsub(req.url, "^http[s]?://[^/]+", ""); 
```

这样[http://example.com](http://example.com)到[https://example.com的重定向响应将被缓存，而对](https://example.com)[https://example.com](https://example.com)的请求将返回此缓存响应。

删除此规范化或添加

```
hash_data(req.http.Https); 
```

帮助`sub vcl_hash`。

# python - 日期和时间的散点图

> ID：14441754
> 
> 赞同：3
> 
> 时间：2013-01-21T15:21:06.383
> 
> 标签：python, matplotlib

我有一个`datetime.datetime`对象列表，我想在类似于这个的散点图中表示：

[![](../Images/c569bfed4391ce383f37b616c2fdc4c0.png)](https://i.stack.imgur.com/2jiQY.png)
[（来源：[stephenwolfram.com](http://blog.stephenwolfram.com/data/uploads/2012/03/outgoing-mail-diurnal-image.png)）]

我应该如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:27:17.890

```
import pylab

# datetimes = [datetime(...), ...]

pylab.plot([dt.date() for dt in datetimes],
           [dt.hour + dt.minute/60\. for dt in datetimes],
           ',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:47:09.750

您不应该使用绘图，而是将 plot_date 用于日期时间数组！

[http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot_date](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot_date)

# javascript - 多个响应式 video.js 播放器

> ID：14441757
> 
> 赞同：2
> 
> 时间：2013-01-21T15:21:16.707
> 
> 标签：javascript, video, video.js

我正在使用此解决方案[http://daverupert.com/2012/05/making-video-js-fluid-for-rwd/](http://daverupert.com/2012/05/making-video-js-fluid-for-rwd/)来使 videojs 播放器流畅。我的问题是当我有多个视频（每个视频都有一个唯一的 id）时，我不知道如何使它工作。

这是我的开发网站，我有 3 个视频，[http ://tweedee.e-mediaresources.info/](http://tweedee.e-mediaresources.info/)

这是我为播放器提供的代码（来自上面 Dave Rupert 的解决方案）：

```
 <script type="text/javascript">
    // Once the video is ready
    _V_('#my_video_1').ready(function(){

        var myPlayer = this;    // Store the video object
        var aspectRatio = 9/16; // Make up an aspect ratio

        function resizeVideoJS(){
            // Get the parent element's actual width
            var width = document.getElementById(myPlayer.id).parentElement.offsetWidth;
            // Set width to fill parent element, Set height
            myPlayer.width(width).height( width * aspectRatio );
        }

        resizeVideoJS(); // Initialize the function
        window.onresize = resizeVideoJS; // Call the function on resize
    });
    </script> 
```

此代码适用于一个视频，但我如何处理多个 id ？？？正如您在我的开发站点中看到的那样，我只是将上面的脚本复制了 3 次（每次都有不同的 id），这只会导致最后一个视频变得流畅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-25T22:21:57.840

您可以使用 css 而不是 javascript：

```
.wrapper {
    width: 100%;
}  

.video-js {
    padding-top: 55.25%;
}

     <div class="wrapper">                                 
      <video id="video-player" width="auto" height="auto" class="video-js vjs-default-skin vjs-big-play-centered" data-setup="{}">                                         
       </video>                                 
     </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:13:44.280

以下作品。[它确实涉及一些重复，我认为如果您使用 jQuery 的延迟对象](http://api.jquery.com/category/deferred-object/)之类的东西来等待所有视频播放器触发事件​​，我认为您可能可以避免这种情况`ready`，但这比将 resize 方法复制为你目前正在做：

```
<script type="text/javascript">

    var players = ['my_video_1', 'my_video_2', 'my_video_3'];
    var aspectRatio = 9/16;

    // Catch each of the player's ready events and resize them individually
    // jQuery deferred might be a neater way to wait for ready on all components to load and avoid a bit of repetition
    for (var i = 0; i < players.length; i ++) {
        _V_('#' + players[i]).ready(function() {
            resizeVideoJS(this);
        });
    }

    // Loop through all the players and resize them 
    function resizeVideos() {
        for (var i = 0; i < players.length; i ++) {
            var player = _V_('#' + players[i]);
            resizeVideoJS(player);
        }           
    }

    // Resize a single player
    function resizeVideoJS(player){
        // Get the parent element's actual width
        var width = document.getElementById(player.id).parentElement.offsetWidth;
        // Set width to fill parent element, Set height
        player.width(width).height( width * aspectRatio );
    }

    window.onresize = resizeVideos;

</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T18:25:22.390

您每次都覆盖 window.onresize() ，因此只使用最后一个。代替

```
window.onresize = resizeVideoJS 
```

和 ：

```
 window.addEventListener("resize", resizeVideoJS, false); // all browsers except IE before version 9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T06:36:57.747

```
// jQuery deferred might be a neater way to wait for ready 
// on all components to load and avoid a bit of repetition
for (var i = 0; i < players.length; i ++) {
    _V_('#' + players[i]).ready(function() {
        resizeVideoJS(this);
    });
}

// Loop through all the players and resize them 
function resizeVideos() {
    for (var i = 0; i < players.length; i ++) {
        var player = _V_('#' + players[i]);
        resizeVideoJS(player);
    }           
}

// Resize a single player
function resizeVideoJS(player){
    // Get the parent element's actual width
    var width = document.getElementById(player.id).parentElement.offsetWidth;
    // Set width to fill parent element, Set height
    player.width(width).height( width * aspectRatio );
}

window.onresize = resizeVideos; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T21:07:56.840

我将上面 net.uk.sweet 非常有用的答案稍微修改为一个工作脚本，该脚本使用视频 js 处理多个视频播放器 - 这也是响应式的。你可以在这里找到我的文章（也显示了一个例子）= [http://www.andy-howard.com/videojsmultipleresponsivevideos/index.html](http://www.andy-howard.com/videojsmultipleresponsivevideos/index.html)

如果需要，这还包括提供的回调函数。

# php - 为什么我的饼干不会消失？**更新**

> ID：14441758
> 
> 赞同：1
> 
> 时间：2013-01-21T15:21:19.397
> 
> 标签：php, cookies

我正在设置一个身份验证cookie，如下所示：

```
$identifier = $this->createIdentifier($username);
$key = md5(uniqid(rand(), true));
$timeout = time() + 60 * 60 * 24 * 100;

setcookie('auth', "$identifier:$key", $timeout); 
```

注销后，我试图通过这样做使其无效：

```
setcookie('auth', "", time() - 3600); 
```

当我在注销后尝试查看受限页面时，我正在检查 cookie 是否存在：

```
if (isset($_COOKIE['auth'])) {
error_log("COOKIE EXISTS: " . print_r($_COOKIE, true));
} 
```

这是我的注销脚本：

```
if (!isset($_SESSION)) session_start();

$ref="index.php";

if (isset($_SESSION['username'])) {
unset($_SESSION['username']);   

session_unset();
session_destroy();

// remove the auth cookie
setcookie('auth', "", time() - 3600);

}

header("Location: " . $ref);
exit(); 
```

我不应该点击这个代码，但我是。注销后，我看到 cookie 已从浏览器中删除。知道注销后如何再次找到它吗？

**更新** 此代码从另一个检查用户权限等的类中调用。唯一不能使用的文件是从上面一个目录引用它的文件。例如

任何像这样引用它的文件都可以正常工作：

```
<?php include_once('classes/check.class.php'); 
```

任何引用它的文件都不能正常工作：

```
<?php include_once('../classes/check.class.php'); 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:22:38.313

注销用户后，您需要进行重定向以导致新页面加载。由于 cookie 是与页面请求一起发送的，直到发出新请求，这些 cookie 即使在您“删除”它们之后仍然存在。

# android - 如何使用活动中的 InputType 限制 EditText 中的特殊字符？

> ID：14441765
> 
> 赞同：0
> 
> 时间：2013-01-21T15:21:43.853
> 
> 标签：android

我试图限制特殊字符如下：但它不能正常工作。

```
 final EditText editText = new EditText(Settings.this);
    LayoutParams editTextLayoutParams 
    = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    editText.setLayoutParams(editTextLayoutParams);
    editText.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_CLASS_TEXT );//| android.text.InputType.TYPE_CLASS_NUMBER ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:46:23.593

InputType 用于提示 IME 它应该显示为哪种模式（例如电子邮件地址条目、数字条目、字母条目）。即使 IME 模式不提供输入无效字符的方法，用户仍然可以将任何可能的字符粘贴到 EditText 中。

您需要使用 InputFilter，在输入每个字符时清理 EditText 的值。

# extjs - 在主应用程序 ViewPort 加载之前存储加载

> ID：14441769
> 
> 赞同：7
> 
> 时间：2013-01-21T15:22:03.637
> 
> 标签：extjs, extjs4

我遇到了一个问题，我需要在调用 Applications ViewPort 之前加载一个商店。但是当我有

```
autoCreateViewPort : true 
```

我的商店是在 ViewPort 之后加载的，这不起作用。我需要在呈现应用程序 ViewPort 之前加载当前用户模型或存储。由于我的 ViewPort 加载面板使用来自商店的数据。有什么想法可以确保在创建和显示应用程序 ViewPort 之前加载商店吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:36:56.897

您可以插入一个`Ext.onReady`块并在其中

*   创建商店
*   创建一个函数并`Ext.application`在该函数中构建你的
*   将监听器附加到商店的`load`事件，`{ single: true }`上面的选项和函数作为回调

我从未测试过它，但这应该可以。

另一个（也是推荐的）选项是使用您自己的视口并在其中加载商店。在那里，您可以以相同的方式跟踪加载操作。

# mysql - MySQL 多连接/组查询

> ID：14441772
> 
> 赞同：0
> 
> 时间：2013-01-21T15:22:10.967
> 
> 标签：mysql, sql, join

id我有一张这样的桌子

```
|----|-----------|--------|
| ID | Ethnicity | Gender |
| 1  |    2      |   1    |
| 2  |    3      |   1    |
| 3  |    4      |   2    |
|----|-----------|--------|
etc .... 
```

我正在尝试取回一组结果，这些结果按男性（1）和女性（2）显示我的种族

因此，此示例中的结果行将是：

```
Ethnicity    Male    Female
    2         1        0
    3         1        0
    4         0        1 
```

到目前为止，我已经接近我想要的：

```
SELECT ethnicity, 
(SELECT 
        count(id)
    FROM
        table_name
    WHERE
        gender = '2' ) as female,
(SELECT 
        count(id)
    FROM
        table_name
    WHERE
        gender = '1') as male
FROM table_name
GROUP BY ethnicity 
```

这给了我：

```
Ethnicity    Male    Female
2            2        1
3            2        1
4            2        1 
```

但是`count(id)`，如果有意义的话，只需要计算该种族行的adno。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:25:35.487

试试这个：

```
SELECT 
  ethnicity, 
  SUM(CASE WHEN gender = 1 THEN 1 ELSE 0 END) AS female,
  SUM(CASE WHEN gender = 2 THEN 1 ELSE 0 END) AS Male
FROM students
GROUP BY ethnicity; 
```

上述内容几乎适用于任何 SQL 产品，而不仅仅是 MySQL。但是，如果你喜欢，你也可以使用这个版本，它使用 MySQL 将布尔值隐式转换为整数（`true` ->  `1`，`false` ->  `0`）：

```
SELECT 
  ethnicity, 
  SUM(gender = 1) AS female,
  SUM(gender = 2) AS Male
FROM students
GROUP BY ethnicity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:29:48.263

```
SELECT 
  ethnicity, 
  CASE WHEN gender = 1 THEN 1 ELSE 0 END AS Male,
  CASE WHEN gender = 2 THEN 1 ELSE 0 END AS Female
FROM students 
```

# ember.js - 使用 emberjs new-router-V3 和 #with 助手访问在不同路由中定义的事件

> ID：14441775
> 
> 赞同：0
> 
> 时间：2013-01-21T15:22:21.137
> 
> 标签：ember.js, ember-router

我有这个工作**[jsfiddle](http://jsfiddle.net/Qn3ry/1/)**。**EmBlog.PostsEditRoute**有一个**destroyPost 事件**，我想在 EmBlog.PostsShowRoute 的模板 'post/show.hbs' 中使用**动作助手**调用该**事件**。

我正在使用#with 帮助器按照**[此处](https://github.com/emberjs/ember.js/issues/993)**的建议**更改模板中的范围**。它不会破坏对象并且不会引发错误。

```
 <script type="text/x-handlebars" data-template-name="posts/show">
   {{#with EmBlog.PostsEditController}}
      <a href='#' {{action destroyPost this}}> Destroy</a>
   {{/with}}
 </script>

 EmBlog.PostsShowRoute = Ember.Route.extend({

 });

 EmBlog.PostsEditRoute = Ember.Route.extend({
    events: {
      destroyPost: function(context) {
       var post = context.get('content'); 
        post.deleteRecord();
        post.get('store').commit();
        this.transitionTo('posts');
      }
    }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:07:11.490

我认为这基本上是因为`EmBlog.PostsShowRoute`如果您希望它可以在其他 PostsXXX 视图中访问，您必须在 PostsRou​​te 或 PostsRou​​te 中定义您的事件处理程序。有关详细信息，请参阅[http://emberjs.com/guides/templates/actions/](http://emberjs.com/guides/templates/actions/)。

（顺便说一句，这里使用#with 助手似乎是错误的，因为您的参考是关于一些相当古老的东西）。我会简单地做

```
<script type="text/x-handlebars" data-template-name="posts/show">
  <a {{action destroyPost content}}> Destroy</a>
</script> 
```

这是修改后的小提琴：http: [//jsfiddle.net/Qn3ry/4/](http://jsfiddle.net/Qn3ry/4/)

请注意，当您尝试销毁固定装置中的帖子时，它会在您转换到帖子/索引时重新出现。这只是因为 post 在fixtures 中没有被销毁，当进入 PostIndexRoute 时，App.Post.find() 会重新加载它。

# android - Android：画布不缩放

> ID：14441778
> 
> 赞同：3
> 
> 时间：2013-01-21T15:22:27.137
> 
> 标签：android, canvas, bitmap, scale, android-custom-view

我有一个自定义视图，它在 onDraw() 的画布上绘制一些位图。绘图正在工作。看代码片段：

```
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    canvas.save();

    if(appInitialized) {

        hsSide.draw(canvas);
        scaleA.draw(canvas);
        scaleB.draw(canvas);

    }
    canvas.scale(mScaleFactor, mScaleFactor, pivotX, pivotY);
    canvas.restore();
} 
```

我已经实现了一个 ScaleGestureListener，它在屏幕上应用捏缩放时缩放画布。问题是画布没有缩放。如果我在它`canvas.scale(mScaleFactor, mScaleFactor, pivotX, pivotY);`之前`if(appInitialized) {`缩放画布但在它之后绘制即`hsSide.draw(canvas);`不缩放。它按正常比例绘制。以下是绘制方法：

**hsDide.draw：**

```
@Override
public void draw(Canvas canvas) {
    // TODO Auto-generated method stub
    canvas.drawBitmap(mBitmap, canvas.getWidth()/2 - mBitmap.getWidth()/2, 0, null);
} 
```

**scaleA.draw：**

```
@Override
public void draw(Canvas canvas) {
    // TODO Auto-generated method stub
    canvas.drawBitmap(mBitmap, canvas.getWidth()/2 - mBitmap.getWidth()/2, canvas.getHeight()/2 - mBitmap.getHeight()/2, null);
} 
```

**scaleB.draw：**

```
@Override
public void draw(Canvas canvas) {
    // TODO Auto-generated method stub

    canvas.save();
    mMatrix.setRotate(currentAngle, canvas.getWidth()/2, canvas.getHeight()/2);
    canvas.setMatrix(mMatrix);
    canvas.drawBitmap(mBitmap, canvas.getWidth()/2 - mBitmap.getWidth()/2, canvas.getHeight()/2 - mBitmap.getHeight()/2, null);
    canvas.restore();
} 
```

知道我哪里出错了......？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:17:38.633

查看您的代码实际上，您应该在绘制画布之前缩放画布，然后在绘制后恢复它。所以移动你的画布比例如下：

```
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    canvas.save();

   canvas.scale(mScaleFactor, mScaleFactor, pivotX, pivotY); // MOVED HERE.

    if(appInitialized) {

        hsSide.draw(canvas);
        scaleA.draw(canvas);
        scaleB.draw(canvas);

    }

    canvas.restore();
} 
```

然后，您将绘制大小基于画布大小。因此，当您缩放画布时，您仍在将其绘制到其整个大小，然后将其调整回正常大小。因此没有任何效果。

您需要做的是在缩放**之前**获取画布大小，然后也将其传递给您的绘制方法。然后使用这些尺寸在画布上绘制。

# ios - 在iOS中以压缩格式录制wav文件

> ID：14441780
> 
> 赞同：2
> 
> 时间：2013-01-21T15:22:29.810
> 
> 标签：ios

现在我正在使用 AQRecorder 将音频录制为 .wav。我的音频文件描述如下；

```
 mRecordFormat.mFormatID = kAudioFormatLinearPCM;
     mRecordFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;
     mRecordFormat.mSampleRate = 8000.0;
     mRecordFormat.mBitsPerChannel = 16;
     mRecordFormat.mChannelsPerFrame = 1;
     mRecordFormat.mFramesPerPacket = 1;
     mRecordFormat.mBytesPerPacket = 2;
     mRecordFormat.mBytesPerFrame = 2; 
```

我想知道我可以将数据以压缩格式记录到 .wav 如果可以，请告诉我该怎么做。（我不想以 .caf 格式记录文件）

# javascript - 无法使用 Rails 3.0 的最佳就地 gem 编辑记录

> ID：14441783
> 
> 赞同：0
> 
> 时间：2013-01-21T15:22:35.297
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, gem, best-in-place

我正在尝试让[最好的 gem](https://github.com/bernat/best_in_place)在 Rails 3.0 应用程序上工作，但似乎没有任何效果。我无法单击任何对象来编辑它们。

这是我到目前为止所做的（按照上面链接中的 GitHub 说明以及[RailsCast](http://railscasts.com/episodes/302-in-place-editing)：

在我的`Gemfile`：

```
gem 'rails', '3.0.11'
gem 'best_in_place', '~> 0.2.0' 
```

我也跑了`rails g best_in_place:setup`，因为我在 3.0 上，它生成了一个`best_in_place.js`文件到`public/javascripts`.

最后显示要就地编辑的记录：

```
<div class="profileGains">"<%= best_in_place @project, :my_quote %>"</div> 
```

我正在使用 RESTful 路由，所以我`update`对我的项目资源采取了行动。

此时，记录已显示，但我无法单击它（或任何其他记录）。

有什么建议么？我是 JS 的新手，真的被卡住了。

**编辑：**我创建了一个`application.js`文件，在其中添加了以下代码：

```
//= require jquery
//= require jquery.purr
//= require best_in_place

$(document).ready(function() {
  /* Activating Best In Place */
  jQuery(".best_in_place").best_in_place();
}); 
```

我还尝试了 Richlewis 在评论中的建议，以在我的视图中添加脚本标签：

```
<script type="text/javascript" src="/public/javascripts/best_in_place.js"></script> 
```

最后，我尝试在我的布局文件中更改`<%= javascript_include_tag :defaults %>`为 。`<%= javascript_include_tag :all %>``application.html.erb`

再一次，最佳就地不起作用。

**更新：**使用 Chrome 检查元素时，我发现日志中显示此错误：

```
Uncaught TypeError: Object [object Object] has no method 'best_in_place' 
application.js line 7 
```

知道这意味着什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:47:43.200

回答我自己的问题，因为我想通了。该`best_in_place.js`文件未在我的视图中呈现，因为此代码`//= require best_in_place`仅适用于具有资产管道的应用程序。

我必须在我的应用程序布局文件中明确声明该`best_in_place.js`文件。那成功了。

# actionscript-3 - 在 Actionscript 3 中使用 EXIF-AS3 从 Canon EOS D7 读取 EXIF 数据

> ID：14441792
> 
> 赞同：0
> 
> 时间：2013-01-21T15:22:54.790
> 
> 标签：actionscript-3, exif

我在 stackoverflow 上的第一篇文章，我以前多次使用过 EXIF-AS3 类（Adobe Flash CS5 和 AS3），它总是有效，我指的是这个类：

[http://active.tutsplus.com/tutorials/actionscript/quick-tip-use-as3-to-grab-exif-data-from-a-jpg-image/](http://active.tutsplus.com/tutorials/actionscript/quick-tip-use-as3-to-grab-exif-data-from-a-jpg-image/) http://code.google.com/p/ exif-as3/

我遍历 EXIF 数据以查找相机的序列号，但是在新佳能上我似乎无法在任何地方找到此序列号。似乎序列号存储在 MarkerNotes 中，但我不认为班级正在阅读它：

```
if (exifLoader.exif.ifds.primary)
        {
            displayIFD(exifLoader.exif.ifds.primary);
        }
        if (exifLoader.exif.ifds.exif)
        {
            displayIFD(exifLoader.exif.ifds.exif);
        }
        if (exifLoader.exif.ifds.gps)
        {
            displayIFD(exifLoader.exif.ifds.gps);
        }
        if (exifLoader.exif.ifds.interoperability)
        {
            displayIFD(exifLoader.exif.ifds.interoperability);
        }
        if (exifLoader.exif.ifds.thumbnail)
        {
            displayIFD(exifLoader.exif.ifds.thumbnail);
        } 
```

我在这里前进有什么建议或方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:50:24.087

我对 Exif 对象的组成不太熟悉，但我猜如果“MarkerNotes”是元信息的一个属性，它可以像这样访问：

```
if (exifLoader.exif.ifds.markerNotes) {
  displayIFD(exifLoader.exif.ifds.markerNotes);
} 
```

看起来代码正在检查非空值，然后将数据发送到显示传入标签的方法。

# akka - 在 Akka 2.0.x 中重启顶级actor

> ID：14441794
> 
> 赞同：0
> 
> 时间：2013-01-21T15:23:05.623
> 
> 标签：akka

从文档中我了解到向`Kill`演员发送消息将重新启动它，但实际发生的是它只是停止了。

（文档是否过期？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:18:33.957

Kill 是“一条所有 Actor 都会理解的消息，在处理后将使 Actor 抛出一个 ActorKilledException，这将触发监督。”。所以如果被杀死的actor的父actor的supervisor策略是Stop，那么它不会被重启。在 akka 2.1.0 中，您可以配置监护人的主管策略（即：“/user/”），它监督顶级用户创建的演员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:54:07.217

创建一个新的顶级actor，然后在其`preStart`方法中创建旧的顶级actor。这将是主管，可以通过将此代码放入新的顶级参与者中来设置主管策略：

```
override val supervisorStrategy = OneForOneStrategy() {
  case _: Exception => Restart
  case _: Throwable => Escalate
} 
```

消息仍然需要发送给旧的`Kill`顶级参与者。

# powershell - 如何将自定义 PowerShell 模块导入远程会话？

> ID：14441800
> 
> 赞同：39
> 
> 时间：2013-01-21T15:23:32.017
> 
> 标签：powershell, powershell-2.0, powershell-remoting, powershell-3.0

我正在开发一个自定义 PowerShell 模块，我想在与另一台计算机的远程会话的上下文中使用它。以下代码（显然不起作用）解释了我想要实现的目标：

```
import-module .\MyCustomModule.psm1
$session = new-pssession -computerName server01
invoke-command -session $session -scriptblock { 
  <# use function defined in MyCustomModule here #> 
} 
```

**第一个问题是是否有可能实现这种情况？**我的意思是我只希望我的自定义模块物理存在于我的机器上，而不是远程服务器上。

我找到[了这个线程](https://stackoverflow.com/questions/2830827/powershell-remoting-using-imported-module-cmdlets-in-a-remote-pssession)，但我没有管理它工作 - 它不允许创建从远程机器回到本地机器的会话。可能，我遇到了该线程评论中某处提到的配置限制......此外，作者提到了对我的解决方案至关重要的性能影响......

如果有可能，那怎么做？

PowerShell 的版本目前不是一个限制 - 如果该解决方案仅在 PS 3.0 中可用 - 我可以接受这一点。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-15T06:39:06.657

这个问题有一些很好的评论，我花了一些时间研究解决问题的各种方法。

首先，我最初要求的是不可能的。我的意思是，如果你采用模块方式，那么模块应该物理存在于目标机器上，以便能够`Import-Module`进入远程会话。

为了进一步抽象我的问题，我正在尝试为产品部署创建一个可重用的基于 PowerShell 的框架。这将是一种推送方式部署，这意味着我们鼓励人们在本地机器上运行一些脚本以部署到某个远程服务器。就我对该地区的调查而言，有两种可能的方式对常识很友好。

## 模块方法

要遵循的过程：

*   将每个逻辑上不同的功能块放入 PowerShell 模块 ( `*.psm1`)
*   将模块分发到远程机器并扩展`PSModulePath`变量以包含新模块的位置
*   在客户端机器上，创建一个到远程服务器的新会话，然后使用`Invoke-Command -Session $s -ScriptBlock {...}`
*   在脚本块中从`Import-Module CustomModule`- 它会`CustomModule`在远程机器上搜索并且显然会找到它

### 好处

以下是喜欢这种方法的原因：

*   传统模块角色的结果——促进可重用库的创建
*   根据伟大的书[Windows PowerShell in Action](https://rads.stackoverflow.com/amzn/click/com/1935182137)，“模块可用于创建特定于域的应用程序”。据我了解，可以通过结合模块嵌套和混合脚本/二进制模块来暴露特定领域的直观界面来实现。基本上，这是我最看重的基于 PowerShell 的部署框架的目标

### 缺点

以下是需要考虑的重要因素：

*   您必须找到一种将自定义模块传送到远程机器的方法。我玩过[NuGet](http://nuget.codeplex.com/)，但我不确定它是否适合这项任务，但还有其他选项，例如 MSI 安装程序或`xcopy`共享文件夹中的纯文本。此外，交付机制应该支持升级/降级和（最好）多实例安装，但这与我的任务比一般问题更相关

## 脚本方法

要遵循的过程：

*   将每个逻辑上不同的功能放在单独的 PowerShell 脚本 (*.ps1) 中
*   在客户端机器上，创建一个到远程服务器的新会话，并用于`Invoke-Command -Session $s -FilePath .\myscript.ps1`将脚本中定义的函数加载到远程会话
*   使用另一个`Invoke-Command -Session $s -ScriptBlock {...}`并参考您的自定义函数 - 它们将在会话中出现

### 好处

以下是这种方法的优点：

*   这很简单——您不必了解模块特性。只需编写简单的 PowerShell 脚本即可
*   您不必向远程机器交付任何东西 - 这使得解决方案更加简单，并且在维护中更不容易出错

### 缺点

当然，这并不理想：

*   对解决方案的控制较少：例如，如果您将一组函数“导入”到会话中，所有这些函数都被“导入”并且对用户可见，因此没有“封装”等。**我相信很多解决方案可以忍受这一点，所以不要只基于这一点来决定**
*   每个文件中的功能必须是自包含的——从那里任何点源或模块导入都将搜索远程机器，而不是本地机器

最后，我应该说远程机器仍然需要为远程处理做好准备。这就是我的意思：

*   应该将执行策略更改为某些内容，因为它在默认情况下受到限制：`Set-ExecutionPolicy Unrestricted`
*   应启用 PowerShell 远程处理：`Enable-PSRemoting`
*   脚本运行的帐户应添加到远程服务器的本地管理员
*   如果您计划在远程会话中访问文件共享，请确保您了解[多跳身份验证并采取适当的措施](http://www.ravichaganti.com/blog/?p=1230)
*   确保您的防病毒软件是您的朋友，不会将您[送入 PowerShell 地狱](http://mikefrobbins.com/2012/06/21/welcome-to-powershell-hell/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-19T11:07:49.937

这是另一种方法：在远程会话中重新创建模块，而不复制任何文件。

我没有尝试处理模块之间的依赖关系，但这似乎适用于简单的自包含模块。它依赖于本地会话中可用的模块，因为这使得确定导出更容易，但通过一些额外的工作，它也可以与模块文件一起使用。

```
function Import-ModuleRemotely([string] $moduleName,[System.Management.Automation.Runspaces.PSSession] $session)
{
    $localModule = get-module $moduleName;
    if (! $localModule) 
    { 
        write-warning "No local module by that name exists"; 
        return; 
    }
    function Exports([string] $paramName, $dictionary) 
    { 
        if ($dictionary.Keys.Count -gt 0)
        {
            $keys = $dictionary.Keys -join ",";
            return " -$paramName $keys"
        }
    }
    $fns = Exports "Function" $localModule.ExportedFunctions;
    $aliases = Exports "Alias" $localModule.ExportedAliases;
    $cmdlets = Exports "Cmdlet" $localModule.ExportedCmdlets;
    $vars = Exports "Variable" $localModule.ExportedVariables;
    $exports = "Export-ModuleMember $fns $aliases $cmdlets $vars;";

    $moduleString= @"
if (get-module $moduleName)
{
    remove-module $moduleName;
}
New-Module -name $moduleName {
$($localModule.Definition)
$exports;
}  | import-module
"@
    $script = [ScriptBlock]::Create($moduleString);
    invoke-command -session $session -scriptblock $script;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T15:53:18.737

我不相信没有任何“黑客”的盒子就支持这一点。明智的做法可能是将模块放在文件服务器等公共位置，并在需要时将其导入服务器。前任：

```
$session = new-pssession -computerName server01
invoke-command -session $session -scriptblock {
    #Set executionpolicy to bypass warnings IN THIS SESSION ONLY
    Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process
    #Import module from public location
    Import-Module \\fileserver\folders\modulelocation...

    <# use function defined in MyCustomModule here #> 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-21T17:27:09.557

从 PS 5.0 开始，我认为现在有另一种更清洁的方式：

利用 Copy-Item 的 ToSession 参数将本地模块复制到远程机器。

这不涉及以前解决方案的缺点：

*   无需事先将模块复制到远程机器
*   没有共享文件夹或动态重新创建模块：

**示例用法：**

```
$s = New-PSSession MyTargetMachine
Get-Module MyLocalModule | Import-LocalModuleToRemoteSession -Session $s -Force
# Show module is loaded
Invoke-Command $s -ScriptBlock { Get-Module } 
```

**Import-LocalModuleToRemoteSession 函数**

*请注意，它不会加载模块依赖项*

```
<#
    .SYNOPSIS
        Imports a loaded local module into a remote session

    .DESCRIPTION 
        This script copies a module's files loaded on the local machine to a remote session's temporary folder and imports it, before removing the temporary files.

        It does not require any shared folders to be exposed as it uses the default Copy-To -ToSession paramter (added in PS 5.0). 
#>
function Import-LocalModuleToRemoteSession
{
    [CmdletBinding()]
    param(
        # Module to import
        [Parameter(ValueFromPipeline,ValueFromPipelineByPropertyName,Mandatory)]
        [System.Management.Automation.PSModuleInfo]$ModuleInfo,

        # PSSession to import module to
        [Parameter(Mandatory)]
        [System.Management.Automation.Runspaces.PSSession]
        $Session,

        # Override temporary folder location for module to be copied to on remote machine 
        [string]
        $SessionModuleFolder=$null,

        [switch]
        $Force,

        [switch]
        $SkipDeleteModuleAfterImport

    )

    begin{
        function New-TemporaryDirectory {
            $parent = [System.IO.Path]::GetTempPath()
            [string] $name = [System.Guid]::NewGuid()
            New-Item -ItemType Directory -Path (Join-Path $parent $name)
        }
    }

    process{

        if( [string]::IsNullOrWhiteSpace($SessionModuleFolder) ){
            Write-Verbose "Creating temporary module folder"
            $item = Invoke-Command -Session $Session -ScriptBlock ${function:New-TemporaryDirectory} -ErrorAction Stop
            $SessionModuleFolder = $item.FullName
            Write-Verbose "Created temporary folder $SessionModuleFolder"
        }

        $directory = (Join-Path -Path $SessionModuleFolder -ChildPath $ModuleInfo.Name)
        Write-Verbose "Copying module $($ModuleInfo.Name) to remote folder: $directory"
        Copy-Item `
            -ToSession $Session `
            -Recurse `
            -Path $ModuleInfo.ModuleBase `
            -Destination $directory

        Write-Verbose "Importing module on remote session @ $directory "

        try{
            Invoke-Command -Session $Session -ErrorAction Stop -ScriptBlock `
            { 
                Get-ChildItem (Join-Path -Path ${Using:directory} -ChildPath "*.psd1") `
                    | ForEach-Object{ 
                        Write-Debug "Importing module $_"
                        Import-Module -Name $_ #-Force:${Using:Force}
                    }

                    if( -not ${Using:SkipDeleteModuleAfterImport} ){
                        Write-Debug "Deleting temporary module files: $(${Using:directory})"
                        Remove-Item -Force -Recurse ${Using:directory}
                    }
            }
        }
        catch
        {
            Write-Error "Failed to import module on $Session with error: $_"
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-21T15:56:52.703

如何从您的自定义函数中制作脚本块并将其发送到 terget 服务器使用`Invoke-command`

```
Import-module YourModule
$s = [scriptblock]::Create($(get-item Function:\Your-ModuleFunction).Definition)

Invoke-Command -ScriptBlock $s -Computername s1,s2,sn 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-04T20:56:39.720

感谢这个线程它很有帮助......

但我实际上重写了函数。

请注意，这篇文章中的原始函数或这个重写的函数都包含模块清单数据。所以你不能依赖模块上的版本检查。

```
function Import-ModuleRemotely {
    Param (
        [string] $moduleName,
        [System.Management.Automation.Runspaces.PSSession] $session
    )

    Import-Module $moduleName

    $Script = @"
    if (get-module $moduleName)
    {
        remove-module $moduleName;
    }

    New-Module -Name $moduleName { $($(Get-Module $moduleName).Definition) } | Import-Module
"@

    Invoke-Command -Session $Session -ScriptBlock {
        Param($Script)
        . ([ScriptBlock]::Create($Script))
        Get-Module 
    } -ArgumentList $Script
} 
```

# regex - MongoDB 中 $cond 中的“like”或 $regex 查询

> ID：14441801
> 
> 赞同：10
> 
> 时间：2013-01-21T15:23:43.580
> 
> 标签：regex, mongodb, mongodb-query

请通过我的这个问题：
[MongoDB $group and explicit group formation with computed column](https://stackoverflow.com/questions/14213300/mongodb-group-and-explicit-group-formation-with-computed-column)

但这一次，我需要比较字符串，而不是数字。`CASE`查询必须有一个`LIKE`:
`CASE WHEN source LIKE '%Web%' THEN 'Web'`

然后我需要按源分组。如何在 Mongo 中写这个？我正在尝试以下但不确定是否`$regex`支持内部`$cond`。顺便说一句，`$cond`某处是否有有效运算符的列表？看起来`$cond`不是很喜欢我:)

```
db.Twitter.aggregate(
    { $project: { 
        "_id":0,
        "Source": {
            $cond: [
                { $regex:['$source','/.* Android.*/'] },
                'Android', 
                { $cond: [
                    { $eq: ['$source', 'web'] }, 'Web', 'Others'
                ] } 
            ]
        }
    } }
); 
```

我需要在其中写入许多其他值，以进行更深的嵌套。为简洁起见，这只是一个仅包含“Android”和“Web”的示例。我已经尝试过`$eq`和`$regex`。Using`$regex`给出了无效运算符的错误，而 using`$eq`不理解正则表达式并将所有内容放在“其他”下。如果使用正则表达式可以做到这一点，请告诉我如何编写它以进行不区分大小写的匹配。

谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T14:31:39.230

好吧，它似乎仍然没有计划实施:( [https://jira.mongodb.org/browse/SERVER-8892](https://jira.mongodb.org/browse/SERVER-8892)

我正在使用 2.6 并查看了 3.0，但它不存在。

但是，如果您可以将问题投射到稳定的子字符串上，则有一种解决方法。然后你可以 $substr 字段并使用多个嵌套的 $cond。这很尴尬，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T21:52:13.617

也许你可以用 MapReduce 试试。

```
var map = function()
{
    var reg1=new RegExp("(Android)+");
    var reg2=new RegExp("(web)+");

    if (reg1.test(this.source)){
        emit(this._id,'Android');
    }
    else if  (reg2.test(this.source))
    {
        emit(this._id,'web');
    }

}

var reduce = function (key,value){
    var reduced = {
        id:key,
        source:value
    }    
    return reduced;

}

db.Twitter.mapReduce(map,reduce,{out:'map_reduce_result'});

db.map_reduce_result.find(); 
```

您可以使用 JavaScript 正则表达式而不是 MongoDB $regex。

# c# - 自定义下拉列表样式（带有 ASP.NET C# 连接的 CSS/JS）

> ID：14441804
> 
> 赞同：0
> 
> 时间：2013-01-21T15:23:51.207
> 
> 标签：c#, javascript, asp.net, css

目前我正在使用这样的 ASP.net DropdownList：

```
<asp:DropDownList ID="CourseSelectionDropdown" DataTextField="DropdownDisplay" DataValueField="CourseId"
            runat="server" Font-Size="Small" Width="250px" OnSelectedIndexChanged="CourseSelectionDropdown_OnSelectedIndexChanged"
            AutoPostBack="True"> 
```

它看起来相当难看，我想使用类似下面的东西，我将进一步定制（删除图像，并使每个列表项双行 - 很像 facebook 下拉菜单）。

[http://tympanus.net/Tutorials/CustomDropDownListStyling/index2.html#](http://tympanus.net/Tutorials/CustomDropDownListStyling/index2.html#)

我是 ASP.net 的新手，想要一些关于如何将 HTML/JS 列表项与 C# 代码中的方法链接起来的指针。

我在互联网上搜索了两个小时，没有任何具体或易于阅读的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:28:21.117

通常，您只需使用基于 jQuery 的插件，它将您的 SELECT 转换为更复杂的样式化 HTML。

请参阅：[http ://tutorialzine.com/2010/11/better-select-jquery-css3/](http://tutorialzine.com/2010/11/better-select-jquery-css3/)

# matplotlib - pyplot.plot() 修改线条颜色循环

> ID：14441805
> 
> 赞同：2
> 
> 时间：2013-01-21T15:24:01.067
> 
> 标签：matplotlib

我想绘制一些通过测量获得的数据，每个数据都适合。我将在每个图上绘制 6 个测量值，但我希望每个测量数据图都具有与其拟合相同的颜色。从一个测量数据图到下一个我想要 matplotlib 的默认颜色循环。

首先，如果加载的数据如下：

```
import matplotlib.pyplot as plt
import matplotlib as mpl
import numpy as np
data1 = np.genfromtxt('data1.txt')
fit1 = np.genfromtxt('fit1.txt')
... 
```

那么问题来了，我当然可以在rcParams中重新定义颜色序列，如下：

```
ColourSeq = []
ColourSeqOriginal = mpl.rcParams['axes.color_cycle']
for ind in range(len(ColourSeqOriginal)):
    ColourSeq.append(ColourSeqOriginal[ind])
    ColourSeq.append(ColourSeqOriginal[ind])
mpl.rcParams['axes.color_cycle'] = ColourSeq 
```

但这似乎很复杂。

最简单的事情似乎是：

```
plt.figure()
plt.plot(xdata, data1, xdata, fit1, '???')
plt.plot(xdata, data2, xdata, fit2, '???')
plt.plot(xdata, data3, xdata, fit3, '???') 
```

“？？？” 作为命令选项，我不知道是否存在会阻止 plt.plot 增加给定数据的颜色值的命令选项。但是从一次 plt.plot() 调用到下一次，我需要正常的颜色增量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T05:22:19.327

您可以基于每个轴设置颜色循环

```
ax = plt.gca()
ax.set_color_cyle(['r','r','b','b',..]) 
```

一种更清洁的方法是：

```
import itertools
colors_ = ['r','b','g','m','k'] # change to what colors you want

datas = [data1, data2, data3]
fits = [fit1, fit2, fit3]
ax = plt.gca()
for d, f, c in zip(datas, fits, itertools.cycle(colors_)):
    ax.plot(xdata, d, color=c)
    ax.plot(xdata, f, color=c) 
```

这使您可以准确控制使用哪些颜色，如果您决定更改绘制数据和拟合的方式，您只需更改一次，而不是 N 次。您还可以轻松添加额外的列表（如标签列表、标记类型、线条样式等）来控制线条的绘制方式。（那里的 itertools.cycle 是为了确保颜色永远不是限制性的可迭代对象`zip`）。

自动循环对于原型制作很有用，但您应该养成为实际绘图指定颜色的习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:45:16.200

在对 plot() 的一次调用中，没有一个参数`plot()`会强制所有线条使用相同的颜色。防止颜色循环增加的唯一方法是使用`color='x'`.

这是一种可能对您有用的替代方法：

```
ax = plt.gca()
ax.plot(xdata, data1)
ax.plot(xdata, fit1, color=ax.lines[-1].get_color())
ax.plot(xdata, data2)
ax.plot(xdata, fit2, color=ax.lines[-1].get_color())
ax.plot(xdata, data3)
ax.plot(xdata, fit3, color=ax.lines[-1].get_color()) 
```

通过指定`color`拟合线，颜色循环不会在“拟合”数据上增加。

# java - 如何在java中调用另一个类中的字符串

> ID：14441806
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:24:06.177
> 
> 标签：java, string, class

我是一个真正的菜鸟，所以请如果我不问正确的对不起。

所以这里是：

```
 public class carti extends JFrame {
    JTextField txttitlu;
    JTextField txtautor;
    JTextField txtcat;
    JTextField txtedi;
    JTextField txtpret;
    DefaultListModel model;
    JList lista;
    String editura;
    String titlu;
    String autor;
    String categorie; 
```

这是我拥有的主要类函数，在这个类中，我有 4 个 JTextField，它们通过一个按钮插入到 JList 中（这是添加按钮的脚本“称为”adauga”）：

```
 public void Adauga() {

        autor = txtautor.getText().trim();
        titlu = txttitlu.getText().trim();
        categorie = txtcat.getText().trim();
        editura = txtedi.getText().trim();

        if (autor.equals("")) {
            JOptionPane.showMessageDialog(null, "Nu ati completat Titlu!");
            return;
        }
        if (titlu.equals("")) {
            JOptionPane.showMessageDialog(null, "Nu ati completat Autor!");
            return;
        }
        if (categorie.equals("")) {
            JOptionPane.showMessageDialog(null, "Nu ati completat Categorie!");
            return;
        }
        String numeComplet = autor + " / " + titlu + " : " + categorie;
        model.addElement(numeComplet);

    } 
```

所以我想要的是：“Adauga”按钮添加到我的 JList 以显示在我的扩展新类上，该类称为“detalii”（这里是 si 创建的新类的代码（“detalii”） ：

```
public detalii(){

    this.setTitle("Detalii despre Carte");
    setSize(400, 300);
    setResizable(false);
    setLocation(370, 150);
    setLayout(null);
    JLabel lbltitlu= new JLabel("Titlu" +" : "); 
    lbltitlu.setBounds(15, 5, 120, 25);
    this.add(lbltitlu);
    JLabel lblautor= new JLabel("Autor" +" : "); 
    lblautor.setBounds(15, 25, 120, 25);
    this.add(lblautor);
    JLabel lblcategorie= new JLabel("Categorie" +" : "); 
    lblcategorie.setBounds(15, 45, 120, 25);
    this.add(lblcategorie);
    JLabel lbleditura= new JLabel("Editura" +" : "  ); 
    lbleditura.setBounds(15, 65, 120, 25);
    this.add(lbleditura);

} 
```

感谢您的帮助，如果我的解释没有正确完成，我很抱歉，我真的很菜鸟。希望你能理解，不要浪费你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:10:36.780

如果我理解正确，您希望“detalii”类的标签使用“Adauga”方法提供的信息进行更新。我想这样做的一种方法是从“Adauga”方法调用“detalii”中的方法。

这就是我将如何更改“Adauga”：

```
public void Adauga() {

    autor = txtautor.getText().trim();
    titlu = txttitlu.getText().trim();
    categorie = txtcat.getText().trim();
    editura = txtedi.getText().trim();

    if (autor.equals("")) {
        JOptionPane.showMessageDialog(null, "Nu ati completat Titlu!");
        return;
    }
    if (titlu.equals("")) {
        JOptionPane.showMessageDialog(null, "Nu ati completat Autor!");
        return;
    }
    if (categorie.equals("")) {
        JOptionPane.showMessageDialog(null, "Nu ati completat Categorie!");
        return;
    }
    String numeComplet = autor + " / " + titlu + " : " + categorie;
    model.addElement(numeComplet);

    detalii.pushNewInfo(autor, titlu, categorie, editura);  // Add This Line!

} 
```

我会将“detalii”更改为以下内容：

```
private JLabel lbltitlu;
private JLabel lblautor;
private JLabel lbleditura;
private JLabel lblcategorie;

public detalii(){

    this.setTitle("Detalii despre Carte");
    setSize(400, 300);
    setResizable(false);
    setLocation(370, 150);
    setLayout(null);
    lbltitlu= new JLabel("Titlu" +" : "); 
    lbltitlu.setBounds(15, 5, 120, 25);
    this.add(lbltitlu);
    lblautor= new JLabel("Autor" +" : "); 
    lblautor.setBounds(15, 25, 120, 25);
    this.add(lblautor);
    lblcategorie= new JLabel("Categorie" +" : "); 
    lblcategorie.setBounds(15, 45, 120, 25);
    this.add(lblcategorie);
    lbleditura= new JLabel("Editura" +" : "  ); 
    lbleditura.setBounds(15, 65, 120, 25);
    this.add(lbleditura);
}

public void pushNewInfo(String author, String title, 
                        String category, String editor) {
    lblautor.setText("Autor : " + author);
    lbltitlu.setText("Titlu : " + title);
    lblcategorie.setText("Categorie : " + category);
    lbleditura.setText("Editura : " + editor);
} 
```

这可能不是最好的解决方案，但鉴于您提供的信息，这就是我将如何解决您的问题。

# android - 如何迭代大量具有相似名称的资源？

> ID：14441807
> 
> 赞同：1
> 
> 时间：2013-01-21T15:24:10.947
> 
> 标签：android, android-animation

我目前正在尝试启动一个线程，该线程从其资源中获取一个可绘制对象并在一段时间后发布它。然后从资源中获取下一个可绘制对象并从头到尾做同样的事情。

```
 final ImageView zImageView = (ImageView) findViewById(R.id.zzz_animation_view);
    new Thread(new Runnable() {
        public void run() {
            for(int i = 1; i<=510; i++)
            {
                final Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.z_animation0001); // how do I increment this recourse to z_animation0002, 0003, ..., 0510 ?
                zImageView.postDelayed(new Runnable() {
                    public void run() {
                        zImageView.setImageBitmap(bitmap);
                    }
                },200);
            }

        }
    }).start(); 
```

首先。这是解决问题的正确方法吗？可绘制对象太大，我无法使用动画列表，因此我的目标是一次加载一个图像以确保我有足够的内存。其次，如何解决迭代资源的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:47:39.510

您可以使用以下方法按名称获取资源 ID [`Resources.getIdentifier`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier(java.lang.String,%20java.lang.String,%20java.lang.String))：

```
final int current = 5;
final String pattern = "z_animation%04d";
final String name = String.format(pattern, current);
final int id = getResources().getIdentifier(name, "drawable", getPackageName());
final Bitmap bitmap = BitmapFactory.decodeResource(getResources(), id); 
```

此外，[在这里](https://stackoverflow.com/questions/14340372/create-animated-splash-screen-using-frames-on-android/14340906#14340906)您可以找到我对相同问题的答案，代码示例完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:27:10.763

我会将图像放在资产文件夹中并从那里加载它们，如下所述：[https ://xjaphx.wordpress.com/2011/10/02/store-and-use-files-in-assets/](https://xjaphx.wordpress.com/2011/10/02/store-and-use-files-in-assets/)

在资产文件夹中，您只需在文件名中添加一个数字。

# c# - 做直到 var 不为空

> ID：14441809
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:24:16.227
> 
> 标签：c#, .net, while-loop

^(**几年后编辑：**这显然是一种糟糕的方法，在我开始使用 C#/.NET 时。希望这个问题能帮助另一个有同样“问题”的菜鸟。)

这是处理这种情况的最佳方法吗？

```
while(true)
{
    if(Main.ActiveForm != null)
    {
        Main.ActiveForm.Invoke(new MethodInvoker(Main.SomeMethod));
        break;
    }
} 
```

这是在第二个线程上执行的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-21T15:50:59.907

> Is this the best way to approach this scenario?

Just to clarify, the scenario is "I have a property of reference type; as soon as the property is not null I wish to invoke one of its methods", and the technique is "spin up another thread, busy-wait until the value is not null, invoke, and stop waiting".

The answer to your question is *no*, this is not the best way to approach this scenario. **This is a terrible way to solve this problem** for several reasons.

First, the code is simply wrong. **The C# language makes no guarantee that this code works.** If it works, then it is working by accident, and it can stop working at any time.

There are three reasons that this code is wrong.

The first reason it is wrong is because of the way threads work on modern operating systems. It is possible that the two threads are each assigned to their own processor. When a processor accesses memory on a modern machine, it does not go out to main memory every time. Rather, it fetches hundreds or thousands of nearby values into a cache the first time you hit an address. From then on, it accesses the local cache rather than taking the expensive bus ride back to main memory. The implications of that should be obvious: if one thread is writing and another thread is reading, then one thread might be writing to one processor cache and the other might be reading from an entirely different processor cache. They can be inconsistent *forever* if nothing forces them to be consistent, and therefore your loop can run *forever* even if the property has been set on another thread.

(And the "backwards" case is also possible; if the value of the property is *now* null, and was set at some time in the past, then it is possible that the second thread is reading the old, stale value and not the fresh null value. It therefore could decide to not wait at all, and invoke the method on a stale value of the property.)

The second reason this code is wrong is because it has a race condition. Suppose someone assigns the property to non-null on thread one, and then thread two reads it as non-null so you enter the body of the "if", and then thread three assigns it back to null, and then thread two reads it as null and crashes.

The third reason this code is wrong is because the compiler -- either the C# compiler or the jitter -- is permitted to "optimize" it so that it stays in the loop forever without doing the test a second time. The optimizer is allowed to analyze the code and realize that after the first time through the loop, if the test fails then *nothing in the rest of the loop can cause it to succeed*. It is permitted to then skip the test the next time through because it "knows" that it cannot succeed. Remember, the optimizer is permitted to make any optimization *that would be invisible in a single-threaded program*.

The optimizer does not actually make this optimization (to my knowledge) but it is permitted to, and a future version could do so. The optimizer can and does make similar optimizations in similar situations.

In order to make this code correct there must be a *memory barrier* in place. The most common technique for introducing a barrier is to make the access "volatile". The memory barrier forces the processor to abandon its cache and go back to main memory, and discourages the compiler from making aggressive optimizations. Of course, properties may not be volatile, and this technique utterly wrecks performance because it eliminates the one of the most important optimizations in modern processors. You might as well be accessing main memory by carrier pigeon, the cost is so onerous compared to hitting the cache.

Second, the code is bad because you are burning an entire processor sitting there in a tight loop checking a property. Imagine a processor is a car. Maybe your business owns four cars. You are taking one of them and driving it around the block non-stop, at high speed, until the mailman arrives. That is a waste of a valuable resource! It will make the entire machine less responsive, on laptops it will chew through battery like there is no tomorrow, it'll create waste heat, it's just bad.

I note however that at least you are marshalling the cross-thread call back to the UI thread, which is correct.

The best way to solve this problem is to not solve it. If you need something to happen when a property becomes non-null, then the best solution is to handle a change event associated with that property.

If you cannot do that then the best solution is to make the action the responsibility of the property. Change the setter so that it does the action when it is set to non-null.

If you can't make it the responsibility of the property, then make it the responsibility of the user who is setting the property. Require that every time the property be set to non-null, that the action be performed.

If you can't do that then the safest way to solve this problem is to NOT spin up another thread. Instead, spin up a timer that signals the main thread every half second or so, and have the timer event handler do the check and perform the action.

Busy-waiting is almost always the wrong solution.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T15:41:23.487

您需要做的就是将事件处理程序附加到`Activated`表单的事件。在该表单的构造函数中添加以下内容：

```
Activated += SomeMethod; 
```

每当您在之前使用另一个应用程序后重新激活表单时，它就会被触发。

这种方法的主要优点是您避免创建一个新线程只是让它坐在那里做一个旋转等待（使用大量的 CPU 周期）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T15:26:56.120

如果您想使用这种方法，请注意您有一个竞争条件：其他人可能会`Main.ActiveForm`在您的测试和`Invoke()`呼叫之间设置为 null。这将导致异常。

在进行任何测试之前将变量复制到本地，以确保变量不能为空。

```
while(true)
{
    var form = Main.ActiveForm;

    if(form != null)
    {
        form.Invoke(new MethodInvoker(Main.SomeMethod));
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T15:28:28.187

当你使用循环时，你是在浪费 CPU。更好的方法是使用事件：

```
// make event object in some shared place
            var ev = new ManualResetEvent(false);

// do when form loaded
            ev.Set();

// wait in thread
            ev.WaitOne(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T15:25:52.480

利用 ：

```
while(Main.ActiveForm == null) { } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-21T15:28:07.360

我会那样做。

```
while(Main.ActiveForm == null)
{
    //maybe a sleep here ?!
}
Main.ActiveForm.Invoke(new MethodInvoker(Main.SomeMethod)); 
```

# jsf-2 - 转换器是否总是在模型视图更新之前运行？

> ID：14441814
> 
> 赞同：2
> 
> 时间：2013-01-21T15:24:25.813
> 
> 标签：jsf-2

例子：

```
<h:form>
    <h:selectOneMenu value="#{bean.timezone}>
        <f:selectItems value="#{bean.availableTimezones} ... >
        <f:ajax render="currenttime" />
    </h:selectOneMenu>
</h:form>

<h:form id="currenttime">
    <h:outputText value="#{bean.currentTime}" >
        <f:convertDateTime dateStyle="short" type="both" timeZone="#{bean.timezone}" />
    </h:outputText>
</h:form>

<!-- bean.currentTime is of type 'Date' --> 
```

在示例中，更改时区应导致文本`currenttime`显示在正确的时区中。但事实并非如此。

我认为发生这种情况是因为转换器是在“应用请求”阶段计算的，并且所选时区的值是在“更新模型”阶段更新的。

我对吗？我不应该为此使用转换器吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:06:58.410

您的具体问题是因为`<f:convertDateTime>`在视图构建期间初始化而不是在视图渲染期间初始化（[就像 JSTL 等](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)）。实际上，这在更新模型值阶段之前运行很长时间，因此在视图渲染期间转换器不会使用用户提交的时区进行设置。

这个问题与以下答案中的回答基本相同：

*   [如何为数据表的每一行设置转换器属性？](https://stackoverflow.com/questions/7530560/how-to-set-converter-properties-for-each-row-of-a-datatable/7531284#7531284)
*   [数据表中带有时区的 JSF convertDateTime](https://stackoverflow.com/questions/7122460/jsf-convertdatetime-with-timezone-in-datatable/7123153#7123153)

其中一种方法是将转换器实例作为 bean 属性进行管理和绑定。

```
private DateTimeConverter converter;

@PostConstruct
public void init() {
    converter = new DateTimeConverter();
    converter.setDateStyle("short");
    converter.setType("both");
}

public DateTimeConverter getDateTimeConverter() {
    converter.setTimeZone(timezone);
    return converter;
} 
```

和

```
<h:outputText value="#{bean.currentTime}" >
    <f:converter binding="#{bean.dateTimeConverter}" />
</h:outputText> 
```

另一种方法是使用支持转换器属性的渲染时评估的[OmniFaces ：`<o:converter`](http://showcase.omnifaces.org/taghandlers/converter)

```
<h:outputText value="#{bean.currentTime}" >
    <o:converter converterId="javax.faces.DateTime" dateStyle="short" type="both" timeZone="#{bean.timezone}" />
</h:outputText> 
```

# autocomplete - @javascript 黄瓜测试使用 selenium 驱动程序通过，但在使用 poltergiest 时失败

> ID：14441815
> 
> 赞同：7
> 
> 时间：2013-01-21T15:24:27.277
> 
> 标签：autocomplete, cucumber, capybara, phantomjs, poltergeist

我正在尝试测试 jquery UI 自动完成功能，我已经使用 selenium 驱动程序通过了测试。我想切换到 poltergiest 进行一些无头测试，但现在我的测试现在失败了。

由于某种我还没有弄清楚的原因，它似乎没有选择自动完成选项

**步**

```
When /^select contract$/ do
  VCR.use_cassette("contract") do
    selector =
      '.ui-menu-item a:contains("John Smith (123456)")'
    within("div#review") do
      fill_in("contract", with: "john")
    end
    sleep 2
    page.execute_script "$('#{selector}').trigger(\"mouseenter\").click();"

    within("div#myPerformaceReview") do
      find_field("contract").value.should ==
        "John Smith (123456)"
    end
  end
end 
```

使用 Selenium 驱动程序通过了测试，无需对步骤进行任何更改。

关于如何调试它的任何建议？

**版本**

*   硒网络驱动程序（2.27.2）
*   恶作剧 (1.0.2)
*   黄瓜 (1.2.1)
*   黄瓜导轨 (1.0.6)
*   水豚 (1.1.4)
*   幻影 1.8.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T12:27:36.910

我已经设法弄清楚了，似乎 capybara-poltergeist 驱动程序不会触发 jquery-ui 用于显示下拉列表的任何事件。

我在这里找到了答案：[https ://github.com/thoughtbot/capybara-webkit/issues/50](https://github.com/thoughtbot/capybara-webkit/issues/50)

*我在功能/支持*中创建了一个表单助手

 *```
module FormHelper
  def fill_in_autocomplete(selector, value)
    page.execute_script %Q{$('#{selector}').val('#{value}').keydown()}
  end

  def choose_autocomplete(text)
    find('ul.ui-autocomplete').should have_content(text)
    page.execute_script("$('.ui-menu-item:contains(\"#{text}\")').find('a').trigger('mouseenter').click()")
  end
end
World(FormHelper) 
```

然后我使用这些方法填写表格并选择所需的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T06:23:08.237

马丁的回答几乎对我有用，但我发现输入也需要重点关注才能使其发挥作用：

```
module FormHelper
  def fill_in_autocomplete(selector, value)
    page.execute_script %Q{$('#{selector}').focus().val('#{value}').keydown()}
  end

  def choose_autocomplete(text)
    find('ul.ui-autocomplete').should have_content(text)
    page.execute_script("$('.ui-menu-item:contains(\"#{text}\")').find('a').trigger('mouseenter').click()")
  end
end 
```

在同一页面上找到了这个：[https ://github.com/thoughtbot/capybara-webkit/issues/50#issuecomment-4978108](https://github.com/thoughtbot/capybara-webkit/issues/50#issuecomment-4978108)*

# javascript - 如何获取 HTML 元素的开始和结束字符索引？

> ID：14441817
> 
> 赞同：0
> 
> 时间：2013-01-21T15:24:33.447
> 
> 标签：javascript, html

试图弄清楚如何使用 JavaScript 在整个 HTML 文档中获取受元素影响的字符范围。**我只需要 webkit 兼容的代码。**

我在想我只是没有在寻找合适的术语？

这是我将使用的示例：

```
<body>
This is the way we 
<span class="highlight"><img src="image.png" />
search the <span class="heavy">text</span>
</span>, 
search the text, search the text, 
early in the morning!
</body> 
```

如果我通过类高亮获得对跨度的引用......我想知道高亮跨度包含的字符的开始和结束索引，包括它的子跨度中的文本，但当然不是那些是元素声明本身的一部分，例如“<”、“>”或它们之间的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:30:35.310

一种简单的方法是使用[DOM Range](https://developer.mozilla.org/en-US/docs/DOM/range)。这种方法并不完美：偏移量将包括空白文本节点、脚本元素中的文本节点和被 CSS 隐藏的元素中的文本，并且不包括块元素和`<br>`元素隐含的换行符，但可能足以满足您的要求.

演示：http: [//jsfiddle.net/timdown/QhNZ6/](http://jsfiddle.net/timdown/QhNZ6/)

代码：

```
function getOffsetWithinBodyText(node) {
    var range = document.createRange();
    range.selectNodeContents(document.body);
    range.setEndBefore(node);
    var start = range.toString().length;

    return {
        start: start,
        end: start + node.textContent.length
    };
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T15:36:28.793

如果您只想获取该文本：

```
document.querySelectorAll(".highlight")[0].innerText 
```

# iphone - 如何从 plist 加载值？

> ID：14441821
> 
> 赞同：0
> 
> 时间：2013-01-21T15:24:42.070
> 
> 标签：iphone, ios, objective-c, plist

我正在从 plist 加载数据，并试图找出如何访问每个项目的数据。在下面的代码中，我希望能够提取文本的值以及它是检查 = 0 还是检查 = 1

我试过这个：

```
 NSString *dataArray1 = [[dataArray objectAtIndex:1] objectAtIndex:2]; 
```

但想知道这是否是最好的方法

谢谢你的帮助。

```
// load data from a plist file inside our app bundle
NSString *path = [[NSBundle mainBundle] pathForResource:@"Providers" ofType:@"plist"];
dataArray = [NSMutableArray arrayWithContentsOfFile:path];

NSLog(@"data array from offers %@", dataArray); 
```

这是输出：

```
2013-01-21 15:13:34.599 data array from offers (
        {
        checked = 1;
        text = Provider1;
    },
        {
        checked = 1;
        text = Provider2;
    },
        {
        checked = 1;
        text = Provider3;
    },
        {
        checked = 1;
        text = Provider4;
    }
) 
```

所以我希望能够找出每个项目的检查值。Provider4 设置为 1，Provider3 设置为 0 等等......然后使用它来将参数传递给字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:32:02.710

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Providers" ofType:@"plist"];
dataArray = [NSMutableArray arrayWithContentsOfFile:path];
for (NSDictionary *dictionary in dataArray)
  {
  NSString *text = [dictionary valueForKey:@"text"];
  NSNumber *checked = [dictionary valueForKey:@"checked"];
  NSLog(@"%@ checked value is: %@", text, checked);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:30:21.963

像这样的东西，我猜：

```
for (id dict in dataArray)
  int checked = [[(NSDictionary *)dict objectForKey:@"checked"] intValue]; 
```

# android - 在eclipse中运行Android项目

> ID：14441830
> 
> 赞同：0
> 
> 时间：2013-01-21T15:25:02.587
> 
> 标签：android, eclipse

我刚开始使用我的第一个 Android 应用程序。在 Eclipse 中，我创建了一个新项目`Hallo Android`，当我尝试在不进行任何更改的情况下运行时，我收到以下消息：

```
[2013-01-21 16:20:31 - Hallo Android] ------------------------------
    [2013-01-21 16:20:31 - Hallo Android] Android Launch!
    [2013-01-21 16:20:31 - Hallo Android] adb is running normally.
    [2013-01-21 16:20:31 - Hallo Android] Performing com.hurryapp.halloandroid.FirstActivity activity launch
    [2013-01-21 16:20:31 - Hallo Android] Automatic Target Mode: launching new emulator with compatible AVD 'ICS_HVGA'
    [2013-01-21 16:20:31 - Hallo Android] Launching a new emulator with Virtual Device 'ICS_HVGA'
    [2013-01-21 16:20:58 - Emulator] Failed to allocate memory: 8
    [2013-01-21 16:20:58 - Emulator] 
    [2013-01-21 16:20:58 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
    [2013-01-21 16:20:58 - Emulator] Please contact the application's support team for more information. 
```

ADV 正在运行。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:30:17.830

请参考以下线程： [分配内存失败：8](https://stackoverflow.com/questions/7222906/failed-to-allocate-memory-8)

# javascript - IE 在文本框中引起焦点模糊

> ID：14441831
> 
> 赞同：0
> 
> 时间：2013-01-21T15:25:02.957
> 
> 标签：javascript, jquery, internet-explorer, blur

首先，这是我在这里的第一个问题，如果没有正确提问，请见谅。我在办公室开发的 Web 应用程序中有一个错误。该应用程序即将完成，但在 IE < 9 中，一旦您单击它，带有 jQ​​uery 附加的焦点和模糊事件的文本框就会引发模糊事件。您可以在这张图片中看到这一点（只需在文本框中单击）：

[https://www.dropbox.com/s/yn10xfrfxsr38bq/screen.PNG](https://www.dropbox.com/s/yn10xfrfxsr38bq/screen.PNG)

```
$('#divVolee [type="text"]') 
```

没有附加 focusin 或 focus 事件。

应用程序的 URL：

`http://86.126.255.70:2213/Anoxa/`

如果您愿意，可以使用“Demarrer”按钮进入。

我不要求任何人为我编写代码或类似的东西，我只是不知道在代码和网络上搜索了几天后可能导致这种情况的原因。

我尝试过focusin、focus、focusout、blur、直接附加或使用委托，同样的事情。一旦我单击输入字段，它就会引发模糊/聚焦事件。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:55:18.527

我找到了。我开始评论一切，直到找到罪魁祸首：

```
function resizeAccordion() {
    var active = $('#divAccordion').accordion('option', 'active');
    $('#divAccordion').accordion('destroy').accordion({ heightStyle: "fill", active:   active });
}

 var resizeId;
 $(window).resize(function () {
     clearTimeout(resizeId);
     resizeId = setTimeout(resizeAccordion, 600);
 }); 
```

如果用户重新调整浏览器的大小，此代码应该重新调整页面中的手风琴大小并重新排列。不知何故，在 IE<9 中它被无故触发，这导致了模糊事件被触发。经过这么多小时。也许是错误的想法或代码，但我仍然讨厌 IE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:41:00.250

我无法重现此错误（在 IE9 下使用 IE8 模式）。但一个简单的解决方法可能是：（甚至很奇怪）

```
$('#divVolee [type="text"]').focus(function(){
    //>>code for FOCUS here<<
    $(this).blur(blurcallback);
});

function blurcallback()
{
  //>>code for BLUR here<<
  $(this).off('blur');
} 
```

# three.js - 使用 EffectComposer 时未清除画布

> ID：14441836
> 
> 赞同：0
> 
> 时间：2013-01-21T15:25:21.853
> 
> 标签：three.js

直接使用 WebGLRenderer 时，背景会自动清除为白色。但是，当使用 EffectComposer 时，背景会被清除为黑色。

这是一个示例：http: [//jsfiddle.net/wereHamster/Lt2DX/](http://jsfiddle.net/wereHamster/Lt2DX/)。场景显示白色背景上的红色立方体。如果您注释掉第 41 行并取消注释第 42 行（启用 EffectComposer），画布将在黑色背景上显示一个红色立方体。

这是代码：

```
# A simple scene with a red cube in the center.
scene = new THREE.Scene

camera = new THREE.PerspectiveCamera 75, 200/200, 0.01, 1000
camera.position.z = 5
scene.add camera

geometry = new THREE.CubeGeometry 1, 1, 1
material = new THREE.MeshBasicMaterial { color: 0xFF0000 }
scene.add (mesh = new THREE.Mesh geometry, material)

# The barebone WebGL renderer.
renderer = new THREE.WebGLRenderer
renderer.setSize 200, 200
$('body').append renderer.domElement

# Composer with two passes, RenderPass and ShaderPass.
composer   = new THREE.EffectComposer renderer

renderPass = new THREE.RenderPass scene, camera
composer.addPass renderPass

shaderPass = new THREE.ShaderPass THREE.CopyShader
shaderPass.renderToScreen = true
composer.addPass shaderPass

# The main animation loop.
animate = ->
    requestAnimationFrame animate

    mesh.rotation.x += 0.01
    mesh.rotation.y += 0.01

    # If we use the composer to render the scene then the
    # background is black instead of white.

    renderer.render scene, camera
    #composer.render 0.1

animate() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:43:36.377

`THREE.RenderPass`有额外的论点

```
renderPass = new THREE.RenderPass scene, camera, null, new THREE.Color().setHex( 0xffffff ), 0 
```

此外，`renderer`默认情况下，背景是清晰的，而不是白色的。你看到的是体色透出来。

小提琴：http: [//jsfiddle.net/Lt2DX/36/](http://jsfiddle.net/Lt2DX/36/)

# android - 如何开始使用 android-maven-plugin？

> ID：14441841
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:25:38.690
> 
> 标签：android, maven, android-maven-plugin

使用 android-maven-plugin 的第一步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:26:05.897

*1*设置安卓主页

```
export ANDROID_HOME=/your/android-SDK/path 
```

*2*运行

```
mvn archetype:generate -DarchetypeArtifactId=android-with-test 
-DarchetypeGroupId=de.akquinet.android.archetypes -DarchetypeVersion=1.0.9 
-DgroupId=org.me -DartifactId=myAndroidApp -Dplatform=8 
```

[在这里](http://search.maven.org/#search%7Cga%7C1%7Cg:%22de.akquinet.android.archetypes%22) 检查archetypeVersion或寻找其他的。

*3*

编辑 myAndroidApp/pom.xml（父级 pom.xml）设置（最初是无效的）

```
<platform.version> 2.2.1 </platform.version> 
```

在属性部分。请确认platform 8 和platform.version 2.2.1 的对应关系你可以在你的android sdk manager app 中了解到API 8 <-> 2.2，但是必须访问[这里](http://search.maven.org/#search%7Cgav%7C1%7Cg:%22com.google.android%22%20AND%20a:%22android%22)才能看到最终数字是2.2.1。（注意：对于 API 10 <-> 2.3.3）。

*4*

您可以立即开始使用它。在父目录中：

```
mvn clean install 
```

并运行它（在 myAndroidApp/myAndroidApp 目录中）

```
cd myAndroidApp
mvn android:run 
```

确保您启动了手机模拟器或将真实手机（处于调试模式）连接到您的计算机。

希望这可以为您节省整个周末！（对我来说太晚了;-)）

# php - 某些字符无法以 html 形式正确显示

> ID：14441843
> 
> 赞同：0
> 
> 时间：2013-01-21T15:25:41.217
> 
> 标签：php, html

我的 MYSQL 数据库中有所有国家/地区的列表。我在 Html 选择标签中通过 PHP 获取这些国家/地区。但很少有县名显示不正确。我看到有一个 **？**在名称中**标记。**

我设置我的 MYSQL DATABASE **Collat​​ion = urf8_general_ci**
并使用

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta charset="utf-8"> 
```

在我的 html 表单中。

但无法正确看到国家名称。你能修好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:35:36.543

如果您的 MySQL 实例未配置为默认从客户端连接使用 UTF-8 编码，则您需要自己执行此操作。

使用您选择的数据库适配器，将此查询作为第一个查询执行`SET NAMES 'utf8'`，如果您使用的是 PDO，则可以使用该`MYSQL_ATTR_INIT_COMMAND`选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:34:33.407

您可以尝试 mb_convert_encoding。

```
$string = mb_convert_encoding($string, 'UTF-8'); 
```

当我在 oracle 数据库上遇到同样的问题时帮助了我。

# mysql - 在 MySQL 中启用 InnoDB

> ID：14441844
> 
> 赞同：1
> 
> 时间：2013-01-21T15:25:41.597
> 
> 标签：mysql, foreign-keys, innodb

我想在 MySQL 中使用外键。为此，我需要启用 InnoDB 功能。我已经尝试从其官方网站下载最新版本的 MySQL 服务器。我在stackoverflow上遇到了类似的问题，但他们解决了不同的问题。我尝试编辑所有 .ini 文件并通过删除相应属性前面的 # 来启用 InnoDB 属性。然后我重新启动 MySQL 并使用 query/ 从 MySQL 客户端检查 InnoDB 的状态

```
 show engines; 
```

它仍然显示 InnoDB 已禁用

我想知道为 MySQL 启用内置 InnoDB 功能的步骤。以下是我访问的问题的链接： [Ques1](https://stackoverflow.com/questions/4757589/how-to-enable-innodb-in-mysql)

[问题2](https://stackoverflow.com/questions/6855118/how-can-i-install-or-enables-the-innodb-in-mysql)

[MySQL官方论坛](http://forums.mysql.com/read.php?22,121974)

我是 MySQL 的新手。我将非常感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:49:41.233

检查mysql日志文件。可能有一些消息可以解释 InnoDB 无法启动的原因。我想你没有重要的 InnoDB 数据。如果是这样，请尝试删除位于 mysql 数据目录中的**ib_logfile0.xxx**文件和**ibdata ，然后重新启动 mysql 以强制重新创建这些文件。**此外，检查 my.cnf 中的 innodb 变量是否配置正确（例如，我将 innodb_pool... 的内存设置为 1024G 而不是 1024M，这是一个错误）。

# python - CSV 文件中的词汇量

> ID：14441846
> 
> 赞同：0
> 
> 时间：2013-01-21T15:25:44.680
> 
> 标签：python, csv, vocabulary

我有一个 CSV 文件，如下所示：

```
Lorem ipsum dolor sit amet , 12:01
consectetuer adipiscing elit, sed , 12:02 
```

ETC...

这是一个相当大的文件（大约 10,000 行）我想将所有文本行的总词汇量放在一起。也就是说，忽略第二列（时间），将所有内容小写，然后计算不同单词的数量。

问题：1）如何分隔每行中的每个单词 2）如何将所有内容小写并删除非字母字符。

到目前为止，我有以下代码：

```
import csv
with open('/Users/file.csv', 'rb') as file:
    vocabulary = []
    i = 0
    reader = csv.reader(file, delimiter=',')
    for row in reader:
        for word in row:
            if row in vocabulary:
                break
            else:
                vocabulary.append(word)
                i = i +1
print i 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:02:28.847

Python csv 模块是一个很棒的库，但经常将它用于更简单的任务可能是矫枉过正。对我来说，这种特殊情况是一个典型的例子，使用 csv 模块可能会使事情变得过于复杂

大部头书，

*   只是遍历文件，
*   用逗号分割每一行，并提取第一个分割
*   然后在空白处分割剩余部分
*   将每个单词转换为小写
*   去掉所有的标点符号和数字
*   并将结果理解为一组

是一种线性的直接方法

使用以下文件内容运行的示例

```
Lorem Ipsum is simply dummy "text" of the ,0
printing and typesetting; industry. Lorem,1
 Ipsum has been the industry's standard ,2
dummy text ever since the 1500s, when an,3
 unknown printer took a galley of type and,4
 scrambled it to make a type specimen ,5
book. It has survived not only five ,6
centuries, but also the leap into electronic,7
typesetting, remaining essentially unch,8
anged. It was popularised in the 1960s with ,9
the release of Letraset sheets conta,10
ining Lorem Ipsum passages, and more rec,11
ently with desktop publishing software like,12
 !!Aldus PageMaker!! including versions of,13
Lorem Ipsum.,14 
```

* * *

```
>>> from string import digits, punctuation
>>> remove_set = digits + punctuation
>>> with open("test.csv") as fin:
    words = {word.lower().strip(remove_set) for line in fin
         for word in line.rsplit(",",1)[0].split()}

>>> words
set(['and', 'pagemaker', 'passages', 'sheets', 'galley', 'text', 'is', 'in', 'it', 'anged', 'an', 'simply', 'type', 'electronic', 'was', 'publishing', 'also', 'unknown', 'make', 'since', 'when', 'scrambled', 'been', 'desktop', 'to', 'only', 'book', 'typesetting', 'rec', "industry's", 'has', 'ever', 'into', 'more', 'printer', 'centuries', 'dummy', 'with', 'specimen', 'took', 'but', 'standard', 'five', 'survived', 'leap', 'not', 'lorem', 'a', 'ipsum', 'essentially', 'unch', 'conta', 'like', 'ining', 'versions', 'of', 'industry', 'ently', 'remaining', 's', 'printing', 'letraset', 'popularised', 'release', 'including', 'the', 'aldus', 'software']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:39:26.243

你几乎有你需要的东西。缺少的一点是小写转换，可以简单地用`word.lower()`.

您缺少的另一件事是拆分成单词。你应该使用`.split()`这个任务，默认情况下分割每个空白字符，即空格、制表符等。

您将遇到的一个问题是区分文本中的逗号和列分隔逗号。也许不使用 csv-reader 而是简单地读取每一行并删除时间，然后将其拆分为单词。

```
import re

with open('/Users/file.csv', 'rb') as file:
    for line in file:
        line = re.sub(" , [0-2][0-9]:[0-5][0-9]", "", line)
        line = re.sub("[,|!|.|?|\"]", "", line)
        words = [w.lower() for w in line.split()]
        for word in words:
            ... 
```

如果要删除其他字符，请将它们包含在第二个正则表达式中。如果性能对您很重要，您应该在`for`循环之前编译两个正则表达式。

# gnustep - 如何在 OpenBSD 上构建 GNUstep 程序？

> ID：14441852
> 
> 赞同：1
> 
> 时间：2013-01-21T15:26:05.967
> 
> 标签：gnustep, openbsd

我正在尝试在 OpenBSD 上构建一个 GNUStep 程序。我安装了包 gnustep-base 和 gnustep-make。

我的主要.m：

```
#import <Foundation/Foundation.h>

int main(void)
{

    NSLog(@"Hello World!");  
    return 0;
} 
```

GNUmake 文件：

```
include $(GNUSTEP_MAKEFILES)/common.make
TOOL_NAME = main
main_OBJC_FILES = main.m
include $(GNUSTEP_MAKEFILES)/tool.make 
```

然后，我使用初始化 GNUstep 环境

```
. /usr/local/share/GNUstep/Makefiles/GNUstep.sh 
```

然后我运行：

```
make 
```

这不能识别 GNUmakefile。

有人知道我如何在 OpenBSD 上构建 GNUstep 程序吗？在我的 Arch Linux 安装中，类似的过程可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:37:33.407

试试`make -f GNUmakefile`。如果此命令失败，请安装`gmake`并尝试`gmake -f GNUmakefile`.

# knockout.js - Google Chart API 的淘汰赛自定义绑定 - 访问被拒绝

> ID：14441853
> 
> 赞同：2
> 
> 时间：2013-01-21T15:26:07.043
> 
> 标签：knockout.js, google-visualization, custom-binding

几天来，我一直在尝试如何做到这一点，并在谷歌上搜索构建的解决方案，但遗憾的是没有成功。

我正在为定制的电子商务产品构建一个管理部分。此管理区域完全构建为 SPA（单页应用程序），通过 AJAX 调用动态加载“ko”模板及其数据。

现在，手头的问题是我想在这个 ko 模板中包含图表、饼图和其他数据可视化元素（即在仪表板模板中很好地显示在图表上的汇总数据）。

为此，我正在为[Google Chart API](https://developers.google.com/chart/interactive/docs/index)开发一个“KO 自定义绑定”，该 API正在被正确调用。

这是我到目前为止所拥有的，它创建了一个固定的图表（适用于 KO：[this sample](http://jsfiddle.net/YolandaMDavis/Qquse/)）

```
ko.bindingHandlers.googleChart = {
init: function (element, valueAccessor, allBindingsAccesor, viewModel, bindingContext) {

    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(function () {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Year');
        data.addColumn('number', 'Revenue');
        data.addColumn('number', 'Average Revenue');
        data.addRows([
          ['2004', 1000, 630],
          ['2005', 1170, 630],
          ['2006', 660, 630],
          ['2007', 1030, 630]
        ]);

        var options = {
            title: 'Revenue by Year',
            seriesType: "bars",
            series: { 1: { type: "line" } },
            vAxis: {
                title: 'Year',
                titleTextStyle: { color: 'red' }
            },
            colors: ['red', 'black']
        };

        var chart = new google.visualization.ComboChart($(element));
        chart.draw(data, options);
    });
}}; 
```

然后，从模板中，我调用绑定，现在传递“false”，或者来自 viewModel 的任何虚拟 ko.observable。

```
<script type="text/html" id="dashboard-admin-template">
    <div data-bind="googleChart: false"></div>    
</script> 
```

现在，终于（对不起，花了这么长时间），我遇到的问题：

之后，`google.load("visualization", "1", { packages: ["corechart"] });`“元素”内容变得不可访问（无法从我的 IDE 发布捕获，因为我是声誉问题的新手），使回调失败，并且不呈现图表。在调用“google.load”之前，“元素”的内容都在那里，并且可以访问。然后`Javascript runtime error: Access is denied`在回调被调用时得到一个。

希望能得到一些帮助，因为我被困在这个问题上。谢谢！路易斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:43:40.870

让我重申正确的答案。

1.  取出`google.load("visualization"...`自定义绑定代码
2.  避免自己直接调用`google.setOnLoadCallback(function()...`执行内部代码。

这是绑定现在的样子......

```
google.load("visualization", "1", { packages: ["corechart"] });
ko.bindingHandlers.googleChart = {
init: function (element, valueAccessor, allBindingsAccesor, viewModel, bindingContext) {

    //TODO: load & handle visualization data using the 'valueAccessor'

    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Year');
    data.addColumn('number', 'Revenue');
    data.addColumn('number', 'Average Revenue');
    data.addRows([
        ['2004', 1000, 630],
        ['2005', 1170, 630],
        ['2006', 660, 630],
        ['2007', 1030, 630]
    ]);

    var options = {
        title: 'Revenue by Year',
        seriesType: "bars",
        series: { 1: { type: "line" } },
        vAxis: {
            title: 'Year',
            titleTextStyle: { color: 'red' }
        },
        colors: ['red', 'black']
    };

    var chart = new google.visualization.ComboChart(element);
    chart.draw(data, options);
}}; 
```

希望这对从事类似工作的任何人有所帮助！

# bash - 在不退出的情况下运行 bash -c

> ID：14441855
> 
> 赞同：2
> 
> 时间：2013-01-21T15:26:19.467
> 
> 标签：bash, mingw, msys

我正在尝试在其参数中使用命令从 Windows 运行 MinGW 的 MSYS bash，并且可以通过 -c 开关实现。例如：

```
C:\MinGW\msys\1.0> bin\bash -c "times" 
0m0.000s 0m0.046s
0m0.000s 0m0.000s
C:\MinGW\msys\1.0> 
```

使用此命令，bash 将运行、执行 'times' 并退出。

是否可以做同样的事情，但留在 bash 命令行而不是退出它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:32:12.360

尝试：

```
C:\MinGW\msys\1.0> bin\bash -c "times;/c/MinGW/msys/1.0/bin/bash" 
```

# mysql - MYSQL 30天查询

> ID：14441856
> 
> 赞同：0
> 
> 时间：2013-01-21T15:26:22.087
> 
> 标签：mysql

我有这种查询：

```
SELECT COUNT( * ) 
FROM `reportinc` 
WHERE `Data/ora apertura` >=  '21/01/13 00:00:00' 
    AND `Data/ora apertura` <= '21/01/13 18:00:00' 
```

从今天起，我必须在过去的 30 天内重复此查询。如何自动化？

而不是白天：21/01/13 我必须插入诸如 TODAY -1、TODAY -2 等之类的东西，但我自己指定了时间戳。

如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:32:15.780

```
 SELECT    TO_DAYS(NOW()) - TO_DAYS(your_table_column_name) <= 30; 
```

或使用 DATEDIFF

```
mysql> SELECT DATEDIFF('1997-12-31 23:59:59','1997-12-30');
        -> 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:33:40.513

你可以使用`BETWEEN`

```
SELECT COUNT( * ) 
FROM `reportinc`
WHERE `Data/ora apertura` 
BETWEEN 
    CURRENT_DATE - INTERVAL 2 DAY 
AND 
    CURRENT_DATE - INTERVAL 1 DAY + '18:00:00' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:29:02.077

像这样的东西：

```
WHERE `Data/ora apertura` >= CURRENT_DATE - INTERVAL 2 DAY
  AND `Data/ora apertura` <= CURRENT_DATE - INTERVAL 1 DAY
                                          + INTERVAL '18:00:00' HOUR_SECOND 
```

# php - 类'Imagine\\Imagick\\Imagine'找不到 Symfony 2.1

> ID：14441857
> 
> 赞同：0
> 
> 时间：2013-01-21T15:26:24.773
> 
> 标签：php, symfony, symfony-2.1, liipimaginebundle

我想将[LiipImageBundle](https://github.com/liip/LiipImagineBundle/)集成到我的 Symfony 2.1 项目中。

`imagine/Imagine v.0.4.0`我通过composer安装了bundle和bundle。它似乎工作正常，除了修改后的图像没有保存。

国家`error.log`：

`PHP Fatal error: Class 'Imagine\\Imagick\\Imagine' not found in /var/www/app/cache/prod/appProdProjectContainer.php on line 365`

这条线在`appProdProjectContainer.php`状态：

```
protected function getLiipImagineService()
{
    return $this->services['liip_imagine'] = new \Imagine\Imagick\Imagine();
} 
```

我不知道这是否正确。你们知道为什么 PHP 找不到这个类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:42:35.577

您是否将 Imagine 添加到自动加载。如果你还没有，那么你可以这样做：

1.  打开供应商/作曲家/autoload_namespaces.php
2.  添加

    ```
    'Imagine' => $vendorDir .'/imagine/Imagine/lib/',
    'Liip\\ImagineBundle' => $vendorDir . '/liip/imagine-bundle/', 
    ```

# c++ - 如何从 C++ 中的类访问数组？（关闭）

> ID：14441858
> 
> 赞同：0
> 
> 时间：2013-01-21T15:26:25.627
> 
> 标签：c++, arrays, oop, class

我正在为我的类 Vehicle 编写一个复制构造函数，但我无法访问该类在此构造函数中具有的数组。我使用点表示法（vehi.vin）设置了其他值，并且效果很好，正如预期的那样。所以我尝试使用相同的想法 vehi.accessories[0] 访问数组，但这似乎返回一个空值而不是实际存在的字符串。而且我知道当我第一次初始化类时，该数组确实包含正确的值，因为我可以将它们打印出来。所以我的问题是，我怎样才能从一个类中访问一个数组？我使用点表示法错误吗？我不能对数组使用点表示法吗？我只需要一个get方法吗？

代码 -

车辆.cpp

```
Vehicle::Vehicle(const Vehicle& vehi)
{
//get values and set them equal to the local object's attributes
vin = vehi.vin;

for(int i = 0; i < vehi.numAccessories; i++)
{
    //cout << "get here\n";
    accessories[i] = vehi.accessories[i];
    cout << accessories[i] << " " << vehi.accessories[i] << endl;
}
} 
```

配饰如何获得价值：

```
for(int i = 0; i < numAccessories; i++) //loop through file until all accessories for the car have been put into the array
{
        getline(fin, accessories[i]); //put accessory in the next spot in the accessory array
        cout << "Accessory " << (i+1) << ": " << accessories[i] << endl;
} 
```

车辆对象的 main.cpp 声明。构造函数使用传递给它的文件对象读取值。

```
Vehicle temp(fin); 
```

车辆.h

```
private:
    string accessories[50]; //array of accessories stored in string form 
```

编辑：当我尝试直接调用复制构造函数时，它工作正常，但是当调用 printVehicle() 函数时，它似乎到达了那里，但不知何故失败了。下面的代码做了我想要的，并向我展示了复制构造函数工作正常，所以我猜这是从 printVehicle() 调用它的方式

主.cpp：

```
Vehicle test(fin);
test.startAcc();
cout << endl << test.nextAcc() << endl;
Vehicle test2(test);
test2.startAcc();
cout << endl << test2.nextAcc() << endl; 
```

# python - ubuntu 12.04 上的痛饮 + gmp 库 + 编译错误

> ID：14441862
> 
> 赞同：0
> 
> 时间：2013-01-21T15:26:36.707
> 
> 标签：python, swig, gmp

这是我的问题：我必须用 python 调用用 C 编写的算法。我用 swig 来做。

所以我有一个 example.i 文件，看起来像这样

```
%module example
%{
    #include "example.h"
%}
%include "example.h" 
```

我的 example.h 文件非常简单

```
#ifndef EXAMPLE
#define EXAMPLE

#include <gmp.h>

// function that needs gmp library
void myFunction();

#endif 
```

当我必须编译时，我运行

```
swig -python example.i
gcc -fpic -std=c99 -c example.c example_wrap.c -I/usr/include/python2.7/    
gcc -shared example.o example_wrap.o -o -lgmp _example.so 
```

到目前为止一切都很好，但是当我尝试在 python 中导入示例时出现错误 **ImportError: example.so: undefined symbol: __gmpf_cmp**

所以 swig 和 gmp 库之间的链接有问题，但我不知道错误来自哪里。

```
python -V
2.7.3

swig -version
SWIG Version 2.0.4 
```

Ubuntu 12.04

任何帮助将不胜感激。

提前致谢，

胜利者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:18:30.793

您似乎对 -lgmp 标志进行了错误排序，使其位于 -o 和库名称之间。如果你这样做可能会更好：

```
gcc -shared example.o example_wrap.o -lgmp -o _example.so 
```

# django - 问题结合 L10N True w。Django 中的 I18N 错误

> ID：14441863
> 
> 赞同：2
> 
> 时间：2013-01-21T15:26:39.230
> 
> 标签：django, localization, internationalization, locale, default

我有一个广泛的 Django Web 服务，在 20 多个国家/地区使用。

完整的网站是英文的 - 但所有代码都带有“trans”标签，因此将来可以翻译它 - 但现在我想要所有英文*，但*使用区域设置日期/时间/数字格式。

我跟踪所有用户的语言并将他们的语言环境设置为用于 L10N，但在此阶段尚未进行任何翻译。

在我的设置文件中，USE_I18N 和 USE_L10N 现在都是 True。

**问：我怎样才能继续标记所有代码（面向未来）但没有 Django I18N 的东西（所以一切都只是简单的英语），但同时处理 L10N 中的小数、日期和时间？**

我试图将 I18N 更改为 false，但这也会导致日期格式为非 L10N。

使用当前的 I18N 和 L10N True 格式还可以，我的 trans 处理正常**，但**我得到所有 Django 默认翻译都是 I18N，所以例如“搜索”对瑞典人来说将是“sök”，但其他一切都是英文的...... :-(

/ 延斯

# python - 如何为不同语言设置 matplotlib.dates.DateFormatter

> ID：14441864
> 
> 赞同：3
> 
> 时间：2013-01-21T15:26:39.500
> 
> 标签：python, datetime, matplotlib

我试过

```
import locale
locale.setlocale(locale.LC_TIME,'en_US')
tyme = [datetime(2009,10,6,12) + timedelta(hours=6*i) for i in range(5)]
plt.contour(x, tyme, data)
ax=plt.gca()
ax.yaxis.set_major_formatter(matplotlib.dates.DateFormatter('%Hz%d%b')) 
```

但是yaxis标签的绘制不像00Z07Oct而是00Z0710□（可能是在我的语言环境中绘制的，日语，并且字符是乱码。）

另一方面，我尝试过，

```
 import locale
 locale.setlocale(locale.LC_TIME,'en_US')
 print datetime(2009,10,7,0).strftime(''%Hz%d%b) 
```

结果是

```
00z07Oct 
```

这很好用。

如何在不同的语言环境中为英语设置 matplotlib.dates.DateFormatter？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:53:30.497

我怀疑这与 unicode 问题有关，尤其是`matplotlib.cbook.unicode_safe()`. 这个函数实际上是`DateFormatter`在`strftime`. 尝试为所有内容设置本地，看看是否有帮助：

```
locale.setlocale(locale.LC_ALL,'en_US') 
```

如果没有，只需定义一个`DateFormatter`没有`cbook.unicode_safe()`调用的 new ：

```
return cbook.unicode_safe(dt.strftime(fmt)) 
```

取而代之：

```
return dt.strftime(fmt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T10:49:47.757

插入：

```
locale.setlocale(locale.LC_TIME,'en_US') 
```

或者：

```
locale.setlocale(locale.LC_ALL, "en_GB.utf8") 
```

在你的身影里面。

如果这不起作用，请尝试在图之前定义格式。例如

```
import locale
dfmt = dates.DateFormatter('%Hz%d%b')
...
locale.setlocale(locale.LC_ALL, "en_GB.utf8")
ax.yaxis.set_major_formatter(dfmt) 
```

# caroufredsel - 具有可变宽度项目的连续滚动 caroufredsel 代码

> ID：14441866
> 
> 赞同：0
> 
> 时间：2013-01-21T15:26:45.327
> 
> 标签：caroufredsel

我想创建一个连续滚动的代码，其中包含可变宽度的项目。这将用于新闻自动收报机，其中新闻项目根据新闻标题长度的宽度一个接一个地对齐。我需要它们以相等的线性缓动方式以连续的方式连续向左滚动。

这可以通过 caroufredsel 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T20:46:51.230

将持续时间设置为 0.1

```
$("#foo").carouFredSel({ 
    scroll: { 
        duration: 0.1 
    } 
}); 
```

资料来源：http: [//support.dev7studios.com/discussions/caroufredsel/UC-951092](http://support.dev7studios.com/discussions/caroufredsel/UC-951092)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T17:01:20.333

请看一下这个演示：

[http://coolcarousels.frebsite.nl/c/23/](http://coolcarousels.frebsite.nl/c/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:15:28.350

尝试检查这个例子 [http://caroufredsel.dev7studios.com/examples/continuously-scrolling.php](http://caroufredsel.dev7studios.com/examples/continuously-scrolling.php) 我认为你只需要添加 - items: {width: "variable"} - 并且可以工作

# c++ - 使用 memcpy 在 ubuntu 上未定义的引用

> ID：14441872
> 
> 赞同：0
> 
> 时间：2013-01-21T15:27:08.030
> 
> 标签：c++, ubuntu, constants, memcpy

在我的 aData.h 文件中

```
struct AnalysisData

{

    Myuint64 maxRegsNeeded; 
}
static const Myuint64 My_NA_Value_64 = (Myuint64) - 1; 
```

Myuint64 定义如下：

```
typedef unsigned long long Myuint64 
```

如果在`aData.cpp`我制作的文件中：

```
AnalysisData d;
d.maxRegsNeeded = My_NA_Value_64; 
```

它工作正常。但是如果在`aData.cpp`我实现该功能

```
setData(void* pD,size_t s)
{
memcpy(pD,&My_NA_Value_64 ,s);
} 
```

如果我将其实现为：

```
setData(void* pD,size_t s)
    {
    Myuint 64 err = My_NA_Value_64;
    memcpy(pD,&err ,s);
    } 
```

没关系以下代码​​在编译过程中失败，未定义引用`My_NA_Value_64`：

```
AnalysisData d;
setData(&d.maxRegsNeeded,sizeof(d.maxRegsNeeded)); 
```

这是什么原因？如何解决？

# c# - Ninject 和信任级别中等

> ID：14441877
> 
> 赞同：3
> 
> 时间：2013-01-21T15:27:14.903
> 
> 标签：c#, .net, asp.net-mvc, ninject, medium-trust

我正在尝试使用 hostgator 托管我的 asp.net mvc 4 Web 应用程序。手头的问题是我使用的计划仅允许中等信任级别。我的应用程序当前安装了 Ninject MVC 包。

我曾尝试使用 Ninject 主页上的“.NET Framework 4.0 for medium trust environments”版本的 Ninject，但可惜不行。

有什么方法可以让 Ninject 3.0 在中等信任级别下工作？

> 应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。
> 
> System.Security.SecurityException：请求“System.Security.Permissions.SecurityPermission，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”类型的权限失败。

# java - 会话 bean 的替代方案

> ID：14441881
> 
> 赞同：0
> 
> 时间：2013-01-21T15:27:25.123
> 
> 标签：java, spring, session-bean

我有基于 jsp 和 spring mvc 的 web 应用程序，我需要解决这个任务：

用户必须能够使用向导对话框添加主实体的新实例。该向导包括 3 个步骤：

1.  第一步必须有一个允许填写主要实体字段的表单，包括与多对一相关实体的关联（建议使用下拉字段）。表单应包含不同类型的字段：文本、数字、日期、单选按钮等。有些字段应该是必需的，有些则不是。示例：输入姓名、姓氏、出生日期、电话、孩子数量、选择性别（单选按钮）、部门（下拉）等。

2.  在第二步，用户填写其他属性，包括与与当前实体多对多相关的实体的关联。示例：将员工与他拥有的技能相关联（复选框），添加一些注释（文本区域）。

3.  在第三步中，前两步中的所有字段都应显示为只读字段。用户应确认将此数据保存到数据库中。用户确认保存后，应将数据保存到数据库中，并将用户重定向到包含对象列表的页面。

**如何在不使用会话（Http 会话、会话范围）的情况下传输和保存信息？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:41:47.603

您需要跨多个服务器交互保持状态。有几种可能性，一般来说，要保留的状态数据的大小等因素会影响我们的决策。

听起来你这里有几百个字节，所以你并没有特别受到大小的限制——几兆字节会更具挑战性。

第一种可能性，将其全部保存在浏览器中的 JavaScript 变量中，实际上不需要向服务器发送任何内容。这是典型的现代动态 Web UI，服务器提供数据而不是页面。听起来你在一个多页的世界里，所以打折这个选项。

其次，只需将一些数据（可能已加密，在 cookie 中）有效地保存在浏览器中，但它会在页面之间共享。

第三次使用 Http Session 状态 - 你的情况听起来很像典型的会话候选者。为什么要避免它？根据您的服务器的能力，这种方法可能不会提供很好的弹性行为（如果状态在一个服务器实例上，那么会话的所有请求都必须由同一台服务器提供服务）。请注意，HTTP Session 和 EJB Session Bean 不是一回事，HttpSession 的重量更轻。

使用自定义会话“数据库”——字面意思是 SQL 数据库，可能更轻一些。对于较大规模的数据输入案例，用户可能需要 10 分钟来完成许多页面，这可能是最佳选择 - 如果用户需要中断并稍后恢复，则可以保存用户的工作。这是更多的开发工作，您也需要查看家务，但有时它是最好的选择。

总而言之：非常清楚为什么您拒绝“显而易见的”HTTP 会话技术，就简单而言，这就是我要开始的地方。

# java - 通过 @WebFault 注释在 JAX-RS 中映射自定义异常

> ID：14441882
> 
> 赞同：0
> 
> 时间：2013-01-21T15:27:28.377
> 
> 标签：java, json, cxf, jax-rs

我正在使用**JAX-RS** / Apache **CXF**和**JSON开发客户端-服务器应用程序**

我希望**Apache CXF**在两端透明地处理我的异常：这意味着将异常转换为 bean，使用我的 Jackson Serializer (JSON) 对其进行序列化，然后在客户端进行过度处理。

我已经看到了几个关于这个主题的令人困惑的帖子/答案，并想出了使用 @WebFault 注释：

```
@WebFault(name=CODE, faultBean="foo.bar.FaultBean")
public class DuplicateRuleNameFault extends Exception {
   static final public String CODE = "DUPLICATE_RULE_NAME";
   private FaultBean faultBean;

   public DuplicateRuleNameFault(String msg) {
     super(msg);
     this.faultBean = new FaultBean(msg);
   }
   public DuplicateRuleNameFault() {
   }
   public FaultBean getFaultBean() {
     return faultBean;
   }
   public void setFaultBean(FaultBean faultBean) {
     this.faultBean = faultBean;
   }
} 
```

没有成功......目前，CXF似乎很乐意忽略Exception上的注释并将其作为未知异常处理：500状态错误并且在服务器端没有生成响应体。

我必须在我的 Spring 上下文的“”服务器元素中配置一些特定的东西吗？我已经让 Spring 扫描我的 Exception/FaultBean 类（它甚至需要 BTW 吗？）。

如果您能指出一些工作示例，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:45:22.900

`@WebFault's`不是 JAX-RS 规范的一部分。您将需要阅读规范的[第 3.3.4 节](http://download.oracle.com/otn-pub/jcp/jaxrs-1.0-fr-eval-oth-JSpec/jaxrs-1.0-final-spec.pdf?AuthParam=1358782516_4879766fc9a794baaee165542f4097d5)，其中描述了您可以完成您正在尝试做的事情的不同方法。

***选项1***

设计您的资源类以抛出[WebApplicationException 的](http://docs.oracle.com/javaee/6/api/javax/ws/rs/WebApplicationException.html). 将`response`这些异常的属性设置为有效的 JAX-RS 响应，其中包含要发送到客户端的故障 bean。

***选项 2***

定义异常映射提供程序。您可以创建它们的层次结构来处理您的应用程序将抛出的所有常见异常。或者，您可以使用嵌入式 bean 及其异常处理程序创建顶级异常。然后从顶层导出几个特定的​​例外。

```
public abstract class MyApplicationException<T> extends Exception {
    private T faultBean;

    // Constructors, setters/getters
}

@Provider
public class MyApplicationExceptionHandler implements ExceptionMapper<MyApplicationException<?>> {
    // Implementation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:39:45.260

一种方法是使用 javax.ws.rs.core.Response 对象，如下所示：

@得到

@小路（”/”）

公共响应 getBlah()

{

```
try {
    return Response.status(Response.Status.OK)
            .entity(<Object you want to return>).build();
}
catch (final DuplicateRuleNameFault e) {
    return Response.status(Response.Status.BAD_REQUEST)
            .entity(e.getFaultBean().getMsg()).build();
} 
```

}

# python - 在 bottle.py 启动时运行一次函数

> ID：14441884
> 
> 赞同：8
> 
> 时间：2013-01-21T15:27:32.120
> 
> 标签：python, scheduling, bottle

我有一个瓶子应用程序，我最终不想在 apache 上部署（仅供参考，以防这很重要）。现在我需要在瓶子应用程序启动后运行一次函数。我不能将它放入路由函数中，因为即使还没有用户访问该站点，它也必须运行。

有什么最好的做法吗？

该函数启动一个 APScheduler 实例并向其添加一个作业存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T15:13:25.187

这就是我所做的。

```
def initialize():
    //init whatever you need.
if __name__ == '__main__':
    initialize()
    @bottle.run(port='8080', yatta yatta) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-04T14:53:52.120

老实说，您的问题只是同步与异步问题。使用 gevent 轻松转换为微线程，然后分别启动每个微线程。`gevent.sleep`如果您想等待 Web 服务器完成启动， 您甚至可以在函数中或之前添加延迟。

```
import gevent
from gevent import monkey, signal, spawn, joinall
monkey.patch_all()
from gevent.pywsgi import WSGIServer
from bottle import Bottle, get, post, request,  response, template, redirect, hook, abort
import bottle

@get('/')
def mainindex():
    return "Hello World"

def apScheduler():
    print "AFTER SERVER START"

if __name__ == "__main__":
    botapp = bottle.app()
    server = WSGIServer(("0.0.0.0", 80), botapp)
    threads = []
    threads.append(spawn(server.serve_forever))
    threads.append(spawn(apScheduler))
    joinall(threads) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:44:03.573

创建一个 APScheduler[类](http://docs.python.org/2/reference/datamodel.html#new-style-and-classic-classes)。

查看同一个站点中对象使用和创建的示例，因为它太笼统，无法给出一个具体的示例来复制。

我不知道[这](http://packages.python.org/APScheduler/#advanced-python-scheduler)是否有帮助。

```
class Shed(object):
    def __init__(self): # this to start it
        # instruccions here

    def Newshed(self, data):
        # Call from bottle

    # more methods ...

...

# init
aps = Shed() # this activates Shed.__init__()

...

# in the @router
x = aps.Newshed(data)  # or whatever 
```

无论如何，我仍在学习这些东西，这只是一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-30T12:10:49.763

```
import threading
import bottle

def init_app():
    def my_function_on_startup():
        # some code here
        pass
    app = bottle.app()
    t = threading.Thread(target=my_function_on_startup)
    t.daemon = True
    t.start()
    return app

app = init_app()

@app.route("/")
def hello():
    return "App is running"

if __name__ == "__main__":
    bottle.run(app, host='localhost', port=8080, debug=True) 
```

# mysql - 多人加入MYSQL？

> ID：14441888
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:27:54.863
> 
> 标签：mysql, sql, join

```
**Sub Menu**
id|title
1 | Sub A

**Root_Sub**
id|root_id|sub_id
1 |9      |1

**Root Menu**
id|title
9 | Root X 
```

我需要找出子菜单的根菜单的 ID。

为此，我使用：

```
SELECT * FROM sub_menu LEFT JOIN root_sub ON sub_menu.id = root_sub.sub_id 
```

这给了我 '9' 作为 ID。

但我还需要获取根菜单的标题，即获取标题“Root X”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:29:52.427

```
SELECT  a.ID AS subID,
        a.title AS SubTitle,
        c.ID AS RootID,
        c.Title as RootTitle
FROM    sub_Menu a
        INNER JOIN root_sub b
            On a.ID = b.sub_ID
        INNER JOIn root_Menu c
            ON b.root_ID = c.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7ccff/4)

如果所有记录在其他表上至少有一个匹配项，`INNER JOIN`则首选 an 但如果一个为*nullable*，则更`INNER JOIN`改为`LEFT JOIN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:29:43.663

```
SELECT *
FROM sub_menu
LEFT JOIN root_sub ON sub_menu.id = root_sub.sub_id
LEFT JOIN root_menu ON root_sub.root_id = root_menu.id 
```

# javascript - 我将如何创建一个简单的 socket.IO 聊天？

> ID：14441891
> 
> 赞同：1
> 
> 时间：2013-01-21T15:27:57.323
> 
> 标签：javascript, node.js, socket.io

所以我一直在看socket.IO，我偶然发现了一些问题。我正在尝试创建一个基于 WebSocket 的聊天，但似乎我找不到如何创建一个聊天，其中客户端托管在与 socket.io 服务器不同的服务器上。我有一个需要连接到服务器的基于 PHP 的客户端，但我基本上想知道如何连接到外部 socket.IO websocket 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:37:05.510

我会从这个非常棒的[教程](http://vijayannadi.wordpress.com/tutorials/sample-chat-app-using-nodejs-socketio/)开始。

在这行代码：

```
033 socket = io.connect("http://localhost:3000"); 
```

替换为您的服务器地址。

# php - 需要将静态数据存储在 yml 文件中以与数据库同步

> ID：14441892
> 
> 赞同：0
> 
> 时间：2013-01-21T15:27:57.990
> 
> 标签：php, yaml, static-data

我有一组运输代码，希望能够存储在我们的数据库中。将来我将添加到此列表中，因此理想情况下，我希望将它们放在 YML 文件中，我可以添加到该列表中。我希望能够运行一个任务，该任务将使用 YML 数据填充数据库，并在发现某些内容发生变化时更新记录。PHP中是否有任何工具已经为我做到了这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:09:46.720

您有很多选择；

[http://php.net/manual/en/book.yaml.php](http://php.net/manual/en/book.yaml.php)

[http://pecl.php.net/package/yaml](http://pecl.php.net/package/yaml)

[http://code.google.com/p/spyc/](http://code.google.com/p/spyc/)

并且：[PHP YAML 解析器](https://stackoverflow.com/questions/294355/php-yaml-parsers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:45:33.340

看看[Zend_Config](http://framework.zend.com/manual/1.12/en/zend.config.html)，它为 YAML、XML、JSON 和 INI 提供了 Readers 和 Writers。至于更新任务......您必须自己完成，因为任何现有工具都不知道您的数据库结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:54:46.907

我建议你看看[http://www.symfony-project.org/api/1_4/sfYaml](http://www.symfony-project.org/api/1_4/sfYaml)。我已经使用了与整个 Symfony 框架分开的这个类，而且我工作得很好。

# jquery - jQuery UI Sort - 两个列表并防止在原始列表中排序

> ID：14441893
> 
> 赞同：6
> 
> 时间：2013-01-21T15:28:01.477
> 
> 标签：jquery, jquery-ui

我有一个简单的 jquery ui 示例。基本上我必须列出项目，每个项目都是可排序的。我想要完成的是：取消对同一列表的排序。举个例子，如果我单击列表一中位置一的元素，然后将其拖动到位置 6，然后放下。我想防止这种情况发生，但是如果我将元素放在列表二中，那没关系。

我不知道如何指定，以适应我的要求。ConnectWith 似乎还不够：

```
$("#sortable").sortable({
    connectWith: [$('#sortable2')]
});

$("#sortable2").sortable({
    connectWith: [$('#sortable')]
}); 
```

这是示例：

[http://jsfiddle.net/sQeZE/3/](http://jsfiddle.net/sQeZE/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:45:35.203

这可能不是*您*要查找的内容，但您可以绑定到`receive`and`stop`事件（它们按该顺序触发）。 `receive`表示从另一个列表接收到一个列表项。触发此操作时，您可以暂时取消阻止排序。 `stop`尝试始终阻止排序：

```
var blocksort = true;
//Using jQuery 1.6.4, but use `.on` when available
$("#sortable, #sortable2").bind('sortreceive', function () {
    blockSort = false;
}).bind('sortstop', function (e) {
    if (blockSort) {
        e.preventDefault();
    }
    blockSort = true;
}); 
```

[http://jsfiddle.net/sQeZE/5/](http://jsfiddle.net/sQeZE/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:39:24.123

一种选择是将列表的包含限制为另一个列表，如下所示：

```
$("#sortable").sortable({
    connectWith: [$('#sortable2')],
    containment: $('#sortable2') });

$("#sortable2").sortable({
    connectWith: [$('#sortable')],
    containment: $('#sortable') }); 
```

这使得`#sortable`' 的项目只能在`#sortable2`' 列表中排序，反之亦然

# sql - Oracle SQL - 将 oracle sql 中的 id 更新为按顺序排列

> ID：14441897
> 
> 赞同：2
> 
> 时间：2013-01-21T15:28:18.230
> 
> 标签：sql, oracle

我在 Oracle SQL 中有一个表，其 id 以递增的顺序排列，但由于编辑，id 中存在间隙，例如，id 目前类似于

*   22
*   23
*   24
*   32
*   33
*   44
*   ...ETC

我想通过遍历表中的每一行并更新它们来修复这些差距，这样就没有差距了。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:32:54.897

我认为以下内容适用于 Oracle：

```
update (select t.*, row_number() over (order by id) as newid) toupdate
    set id = newid 
```

上面的答案很久以前就被接受了。它不起作用。我认为答案应该有有效的代码，所以：

```
merge into t dest using
       (select t.*, row_number() over (order by id) as newid from t) src
       on (dest.rowid = src.rowid)
   when matched then update set id = newid; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T11:52:06.480

您可以使用单个 SQL 语句执行此操作，如下所示：

```
create table t as
  select rownum * 2 id
  from   dual 
  connect by level <= 10;

update t set id = (
  with tab as (
    select id, rownum r 
    from   (select id from t order by id)
  ) 
  select r from tab where t.id = tab.id
);

select * from t;

        ID
----------
         1 
         2 
         3 
         4 
         5 
         6 
         7 
         8 
         9 
        10 
```

这将导致对其中的每一行进行全面扫描，因此如果“大” `t`，将会非常慢。`t`正如评论者所说，在这样做之前要仔细考虑；有更好的方法来解决这个“问题”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-05T09:01:49.303

使用这个：

```
update mytable set id = ROWNUM; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T07:49:48.390

我认为你应该执行这段代码

```
DECLARE
   CURSOR A
   IS
      SELECT ROWID DD
        FROM YOUR_TABLE;
   B   NUMBER;
BEGIN
   B := 1;
   FOR I IN A
   LOOP
      UPDATE YOUR_TABLE
         SET COLUMN_NAME = B
       WHERE ROWID = I.DD;
      B := B + 1;
   END LOOP;
END; 
```

只需用`COLUMN_NAME`具有错误 ID 的实际列名替换，然后执行此操作并查看准确排序的列值。谢谢

# android - 自定义 EditTextPreference

> ID：14441899
> 
> 赞同：5
> 
> 时间：2013-01-21T15:28:19.950
> 
> 标签：android, preferences, edittextpreference

我想自定义我的`EditTextPreference`，所以我`TextView`在我的左边添加了一个`EditTextPreference`。

这是我的代码：

```
<EditTextPreference
   android:key="alert_planed_edittext_preference"
   android:title="@string/alert_planed_edittext_preference"
   android:summary="@string/alert_planed_summary_edittext_preference"
   android:dialogTitle="@string/alert_planed_dialog_title_edittext_preference" /> 
```

这就是我在我的应用程序中得到的：

![在此处输入图像描述](../Images/46c69e63dc664598d97e08b98a6235a5.png)

我想自定义我的 EditTextPreference，这就是我想要得到的：

![在此处输入图像描述](../Images/27a5811f92f853c54b98bfb827c1e743.png)

我想加右边的号码，可以吗？

当我点击我得到这个对话框：

![在此处输入图像描述](../Images/e4b0a55a7d124e53dd020f198af5a99a.png)

我希望用户只能选择数字，我该怎么做？

编辑：我找到了第二个问题的解决方案：

```
<EditTextPreference
                android:key="alert_planed_edittext_preference"
                android:title="@string/alert_planed_edittext_preference"
                android:summary="@string/alert_planed_summary_edittext_preference"
                android:dialogTitle="@string/alert_planed_dialog_title_edittext_preference"
                android:numeric="integer" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:30:37.580

对于你的第二个问题，为什么你不使用数字选择器而不是这个 edittext ？

示例（来自[android.dev](http://developer.android.com/guide/topics/ui/settings.html)） ![例子](../Images/e1375fbceeb1f339cc8619f183c8850b.png)

和这样的代码：

```
Public class NumberPickerPreference extends DialogPreference {
    public NumberPickerPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        setDialogLayoutResource(R.layout.numberpicker_dialog);
        setPositiveButtonText(android.R.string.ok);
        setNegativeButtonText(android.R.string.cancel);

        setDialogIcon(null);
    }
    ...
} 
```

关于你的第一个问题，我必须实现一个 customPreference。您可以从设置菜单中的[IconPreferenceScreen中获取示例。](http://gitorious.org/0xdroid/packages_apps_settings/blobs/67efa271bbff6f7ab355f8a0f121eca29a4dbec2/src/com/android/settings/IconPreferenceScreen.java)

# android - Titanium CLI 不接受提供的 .keystore 文件

> ID：14441903
> 
> 赞同：1
> 
> 时间：2013-01-21T15:28:37.543
> 
> 标签：android, titanium, appcelerator, titanium-mobile

我正在尝试从 Titanium CLI 为 dist-playstore 构建 android 构建目标集。我正在使用这个命令

```
titanium build -p android -b -d /Users/ajeetpratap005/Documents/Titanium_Studio_Workspace/androidTest 
-f -L androidTest -A /Users/ajeetpratap005/android-sdks 
-K /Users/ajeetpratap005/android-test.keystore 
-T dist-playstore -O /Users/ajeetpratap005/Documents/Titanium_Studio_Workspace/androidTest/dist 
```

它构建成功，但我无法在输出文件夹中获取我的构建。当我检查在 build/android/bin 文件夹中生成的构建时，它使用默认密钥库文件进行签名，该文件存在于 `<titanium mobile SDK location>/3.0.0.G.A/android/dev_keystore`

如何使钛 CLI 获取我的 .keystore 文件并将生产构建转储到命令中提到的输出文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:25:32.377

请参考这份文件

[https://wiki.appcelerator.org/display/guides/Packaging+for+the+Android+Market](https://wiki.appcelerator.org/display/guides/Packaging+for+the+Android+Market)

android 开发者网站上有生成证书密钥文件的说明：http: [//developer.android.com/guide/publishing/app-signing.html#cert](http://developer.android.com/guide/publishing/app-signing.html#cert)

看这个视频更清楚[http://vimeo.com/10278960](http://vimeo.com/10278960)

# python - 在 Django 中解压缩 Zip 文件

> ID：14441912
> 
> 赞同：6
> 
> 时间：2013-01-21T15:29:04.290
> 
> 标签：python, django

我正在尝试使用该`zipfile`库在 Django 中解压缩一个 zip 文件。

这是我的代码：

```
if formtoaddmodel.is_valid():
        content = request.FILES['content']
        unzipped = zipfile.ZipFile(content)
        print unzipped.namelist()
        for libitem in unzipped.namelist():
            filecontent = file(libitem,'wb').write(unzipped.read(libitem)) 
```

这是的输出`print unzipped.namelist()`

```
['FileName1.jpg', 'FileName2.png', '__MACOSX/', '__MACOSX/._FileName2.png'] 
```

我想知道最后两项是什么——它看起来像路径。我不在乎那里 - 那么有什么办法可以过滤掉它们呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:31:48.840

[https://superuser.com/questions/104500/what-is-macosx-folder](https://superuser.com/questions/104500/what-is-macosx-folder)

```
if libitem.startswith('__MACOSX/'):
  continue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:32:22.750

这些文件是 MACS 上的 zip 实用程序添加的标签。您可以假设名称以 '__MACOSX/' 开头

[关联](http://floatingsun.net/2007/02/07/whats-with-__macosx-in-zip-files/)

# java - 在 MongoDB 中查询

> ID：14441914
> 
> 赞同：1
> 
> 时间：2013-01-21T15:29:09.593
> 
> 标签：java, spring, mongodb, spring-data, nosql

我是 MongoDb 的新手。如我所见，如果我想做查询，有两种可能性：BasicDBObject 对象和 Query 对象。什么是可取的？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:03:07.913

您可以使用 BasicDBObject 为您对 mongo 数据库的查询添加条件，就像您在 mongo shell 上使用 json 文档一样。关于“查询对象”，我相信您指的是 QueryBuilder 类（参考：[http](http://api.mongodb.org/java/2.11.0/com/mongodb/QueryBuilder.html) ://api.mongodb.org/java/2.11.0/com/mongodb/QueryBuilder.html ）。它用于以高级方式构建查询。

问候， 莫西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:11:30.710

我认为它甚至不存在 Query 对象。您应该使用 BasicDBObject 来构建您的查询。如果您还没有完成，请查看[java MongoDB 教程。](http://www.mongodb.org/display/DOCS/Java+Tutorial)

# javascript - Javascript 正则表达式匹配在实际页面上失败，但正则表达式测试工作得很好

> ID：14441916
> 
> 赞同：1
> 
> 时间：2013-01-21T15:29:13.027
> 
> 标签：javascript, regex

关于 Javascript 中的正则表达式匹配，我有一个非常具体的问题。我正在尝试匹配一段源代码，更具体地说是这里的一部分：

```
<TD WIDTH=100% ALIGN=right><a href="http://forum.tibia.com/forum/?action=main&amp;sectionid=2">World Boards</a> | <a href="http://forum.tibia.com/forum/?action=board&amp;boardid=106121">Olympa - Trade</a> | <b>Bump when Yasir...</b></TD> 
```

我要匹配`boardid=106121">Olympa - Trade</a>`的部分是，我真正需要的部分是“Olympa”。因此，我使用以下 JS 代码行来获得匹配并返回“Olympa”：

```
var world = document.documentElement.innerHTML.match('/boardid=[0-9]+">([A-Z][a-z]+)( - Trade){0,1}<\/a>/i')[1]; 
```

该`( - Trade)`部分在我的问题中是可选的，因此`{0,1}`在正则表达式中。

也没有更简单的方法可以通过例如 getElementsByTagName 来缩小代码范围，因此搜索完整的源代码是我唯一的选择。

现在有趣的事情来了。我使用了两个在线正则表达式匹配器（其中一个专门用于 JS-regex）来针对完整的源代码测试我的正则表达式。两次，它都有一个匹配项，并完全按照应有的方式返回“Olympa”。但是，当我让 Chrome 在实际页面上包含脚本时，会出现以下错误：

```
Error in event handler for 'undefined': Cannot read property '1' of null TypeError: Cannot read property '1' of null 
```

显然，我的行的第一部分返回“null”，因为它没有找到匹配项，并且采用“null”的 [1] 是行不通的。

我想我可能没有对源代码进行匹配，但是当我让脚本输出`document.documentElement.innerHTML`到控制台时，它会输出完整的源代码。

我看不出这个正则表达式失败的原因，所以我必须忽略一些非常愚蠢的事情。其他人看到问题了吗？

所有帮助表示赞赏，肯尼斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T15:30:39.883

您将正则表达式放在字符串中。它不应该在字符串内。

```
var world = document.documentElement.innerHTML.match(/boardid=[0-9]+">([A-Z][a-z]+)( - Trade){0,1}<\/a>/i)[1]; 
```

另一件事——看起来你有一个*文档对象*，在这种情况下，所有这些 HTML 都已经为你解析好了，你可以利用它而不是重新发明一个脆弱的轮子。

```
var element = document.querySelector('a[href*="boardid="]');
var world = element.textContent; 
```

（这假设您不需要 <=IE8 支持。如果您这样做，还有更好的方法。）

（PS`?`是 . 的简写`{0,1}`。）

# powershell-2.0 - 如何将字节数组转换为 .NET 对象？

> ID：14441919
> 
> 赞同：0
> 
> 时间：2013-01-21T15:29:18.963
> 
> 标签：powershell-2.0

我正在从一个名为 Insert 的 PowerShell 脚本进行 REST 调用，它返回一个字节数组。我想知道如何将此字节数组转换为对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:44:12.487

这是一个起点，将您的字节数组转换为字符串，但它似乎不完整：

```
$a = 60,63,120,109,108,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,101,110,99,111,100,105,110,103,61,34,117,11
6,102,45,56,34,32,115,116,97,110,100,97,108,111,110,101,61,34,121,101,115,34,63 ,62,13,10,60,101,110,116,114,121,32,120,
109,108,58,98,97,115,101,61,34,104,116,116,112,58,47,47,108,111,99,97,108,104,111,115,116,47,82,101,112,111,115,105,116,
111,114,121,47,100,97,116,97,47,70,108,101,120,105,98,108,101,67,111,109,112,117,116,105

( $a | % { -join [char]$_  }  ) -join ''

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<entry xml:base="http://localhost/Repository/data/FlexibleComputi 
```

# c# - 在数据库中添加列然后更新 dbml

> ID：14441920
> 
> 赞同：5
> 
> 时间：2013-01-21T15:29:22.787
> 
> 标签：c#, linq-to-sql

我有一个在数据库中有一个动态表的应用程序。问题是，假设表结构发生了变化，例如添加列，我可以动态更新 dbml 文件吗？所以我不必每次添加列时都修复应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:45:18.267

使用 DBML 和代码生成方法，没有办法让您的应用程序自动利用更改。DBML 会生成需要编译的新代码，这需要 DSL 工具包、Visual Studio 和 .NET SDK 存在。

# ms-access - Microsoft Access 2010：更新查询 - “日期/时间”数据类型的问题

> ID：14441923
> 
> 赞同：1
> 
> 时间：2013-01-21T15:29:37.987
> 
> 标签：ms-access

我无法在线找到答案，并且被以下问题难住了：我正在尝试使用更新查询将日期字段从一个表更新到另一个表。这两个字段具有相同的“日期/时间”数据类型。当我创建更新查询时，它返回空白值....下面的 SQL 代码副本

```
UPDATE [MIDs with comments] INNER JOIN [account status for MIDs with comments table] 
       ON [MIDs with comments].[Merchant Number] = 
          [account status for MIDs with comments table].[Merchant Number] 
SET [MIDs with comments].[Account Open Date] = 
    [account status for MIDs with comments table].[ACCT_OPEN_DT]; 
```

我不确定我在这里做错了什么，因为查询看起来很简单。当我进行常规选择查询时，它返回值没有任何问题..

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:20:35.547

`UPDATE`当您说查询“*返回空白值*”时，我对您的意思感到困惑。`UPDATE`查询不返回值、空白或其他值。

如果您使用 Access 的查询设计器来构建查询，然后切换到数据表视图，则实际上并不会执行查询。要执行它，请单击运行图标（红色感叹号）。

如果这不是解释，我建议您保存查询，然后在“立即”窗口中尝试此操作（您可以使用`Ctrl`+去那里`g`）。

```
DoCmd.SetWarnings True
Set db = CurrentDb()
db.Execute "Your query name here", dbFailOnError
? db.RecordsAffected 
```

如果该`.Execute`行抛出错误，请告诉我们错误消息的全文。

如果没有错误，也许`RecordsAffected`会为零。在这种情况下，我们需要进一步调查以确定为什么没有更新记录。

# c# - 无法将 TuPle 列表绑定到 Razor 中的 DropDownList

> ID：14441924
> 
> 赞同：1
> 
> 时间：2013-01-21T15:29:42.397
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

在 MVC 3 中，我需要将 DropDownList 绑定到元组...我收到以下错误：

你能告诉我在这里做错了什么吗？谢谢

错误

```
DataBinding: 'System.Tuple`2[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]' does not contain a property with the name 'Value'. 
```

剃刀

```
@Html.DropDownListFor(
    x => x.RemindersList,
    new SelectList(Model.RemindersList, "Value", "Text")
) 
```

类（传递给 ViewModel 的实例）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace AshtonEventsMobile
{
    public class Reminders
    {
        public List<Tuple<int, string>> TimeSpanText { get; set; }

        // We are setting the default values using the Costructor
        public Reminders()
        {
            List<Tuple<int, string>> timeSpanText = new List<Tuple<int, string>>();

            Tuple<int, string> reminder0 = new Tuple<int, string>(0, "None");
            timeSpanText.Add(reminder0);

            Tuple<int, string> reminder1 = new Tuple<int, string>(300, "5 minutes before");
            timeSpanText.Add(reminder1);

            Tuple<int, string> reminder2 = new Tuple<int, string>(900, "15 minutes before");
            timeSpanText.Add(reminder2);

            Tuple<int, string> reminder3 = new Tuple<int, string>(1800, "30 minutes before");
            timeSpanText.Add(reminder3);

            Tuple<int, string> reminder4 = new Tuple<int, string>(3600, "1 hour before");
            timeSpanText.Add(reminder4);

            Tuple<int, string> reminder5 = new Tuple<int, string>(7200, "2 hours before");
            timeSpanText.Add(reminder5);

            Tuple<int, string> reminder6 = new Tuple<int, string>(86400, "1 day before");
            timeSpanText.Add(reminder6);

            Tuple<int, string> reminder7 = new Tuple<int, string>(172800, "2 day before");
            timeSpanText.Add(reminder7);

            TimeSpanText = timeSpanText;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:32:14.937

错误总结了它 - 它确实没有名为`Value`. 类型的元组`Tuple<T1, T2>`具有属性`Item1`和`Item2`- 可以在[此处](http://msdn.microsoft.com/en-us/library/dd268536.aspx)找到 MSDN 上的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T15:46:56.580

您可以为此使用集合`SelectListItem`而不是使用元组。

为您的视图模型添加一个新属性以进行提醒

```
public class AddProgramViewModel
{
  //Your other properties here as well

  public string SelectedReminder { set;get;}
  public List<SelectListItem> ReminderList { set;get;}
  public AddProgramViewModel()
  {
     ReminderList=new List<SelectListItem>();
  }
} 
```

现在在您的 GET 操作方法中，对其进行初始化并发送到您的视图。

```
public ActionResult AddProgram()
{
  var vm=new AddProgramViewModel();

  vm.ReminderList.Add(new SelectListItem { Value="0", Text="None"});
  vm.ReminderList.Add(new SelectListItem { Value="300", Text="5 minutes"});
  //Add more as needed
  //(you may get from DB and add instead of hard coding like this)
} 
```

在视图中，它是强类型的`AddProgramViewModel`

```
@model AddProgramViewModel
@using(Html.Beingform())
{
  @Html.DropDownListFor(x => x.SelectedReminder,
                 new SelectList(Model.RemindersList, "Value", "Text"),"select")
  <input type="submit" />
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T06:28:39.930

我有一种方法可以生成月份的 ID 和名称

```
private List<Tuple<int,string>> generateMonths()
    {
        List<Tuple<int, string>> list = new List<Tuple<int, string>>();
        int[] monthids = new int[12] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 };
        string[] monthName = new string[12] { "January", "Februray", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
        for (int i = 0; i < 12; i++)
        {
            list.Add(new Tuple<int, string>(monthids[i], monthName[i]));
        }

        return list;
    } 
```

这是绑定我的下拉列表（asp:dropdownlist）我的方法

> Item1 属性包含月份的 id，Item2 属性包含月份的名称

```
private void bindMonthsDDL()
        {
            var list=generateMonths();

            if (list.Count > 0)
            {
                ddlMonth.DataSource = list;
                ddlMonth.DataTextField = "Item2";
                ddlMonth.DataValueField = "Item1";
            }
            else
            {
                ddlMonth.DataSource = "";

            }
            ddlMonth.DataBind();
        } 
```

# android - 如何将变量的值从一个活动传递到另一个活动

> ID：14441927
> 
> 赞同：1
> 
> 时间：2013-01-21T15:29:46.153
> 
> 标签：android

从 Activity AI 打开 Activity B

```
Intent intent = new Intent(this, className.class);
startActivity(intent ); 
```

然后我必须关闭 Activity B 并将变量值传递给 Activity A。我是否应该使用另一个意图来调用 Activity A 并将变量值传递给

`intent.putExtra(EXTRA_MESSAGE, "message");`?

或者我应该关闭 Activity B`finish();`并以其他方式传递变量值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:33:00.287

使用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)从 Activity A 启动 Activity B 并在 Activity B 中使用`setResult`方法将数据发送回 Activity A 。要在活动 A 中获取数据，您需要覆盖`onActivityResult`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:33:23.860

您可以使用 开始活动`Activity#startActivityForResult (Intent intent, int requestCode)`。

然后确保您覆盖`protected void onActivityResult (int requestCode, int resultCode, Intent data)`.

# jsf - 自定义组件实例化的 PrimeFaces autoComplete 不显示建议

> ID：14441930
> 
> 赞同：3
> 
> 时间：2013-01-21T15:29:56.740
> 
> 标签：jsf, primefaces, custom-component

动态实例化 PF 3.4.2 AutoComplete 组件时出现问题。组件最初呈现正常，其值在部分处理时刷新， **但从**不显示建议。

我正在通过以下方式实例化此控件：

```
 AutoComplete ac = (AutoComplete) context.getApplication().createComponent(AutoComplete.COMPONENT_TYPE);
    final String varName = "p";

    ValueExpression ve = JSFUtils.createValueExpression("#{minContext.selected.sen}"), Sen.Type);
    ac.setValueExpression("value", ve);

    ac.setForceSelection(true);

    ac.setVar(varName);

    ValueExpression itemLabel = JSFUtils.createValueExpression("#{sc:senLibelle(p)}"), String.class);
    ac.setValueExpression("itemLabel", itemLabel);

    ValueExpression itemValue = JSFUtils.createValueExpression("#{" + varName + "}");
    ac.setValueExpression("itemValue", itemValue);

    MethodExpression completeMethod = JSFUtils.createMethodExpression("#{senUtils.completeAllSens}", List.class,new Class[]{String.class});
    ac.setCompleteMethod(completeMethod); 
```

然后使用将其添加到父控件

```
 getChildrens().add(ac); 
```

父组件是 PF PanelGrid 的派生。我成功地使用这种方法来生成各种版本面板，它就像一个魅力。但我不明白为什么它没有自动完成。

父控件如下所示：

```
@FacesComponent(SenatDataTableEntryDetail.SENAT_COMPONENT_TYPE)
public class SenatDataTableEntryDetail extends PanelGrid {

    /** Leaving renderer unchanged, so that PF renderer for PanelGrid is used.
     */
    public static final String SENAT_COMPONENT_FAMILY = "fr.senat.faces.components";
    public static final String SENAT_COMPONENT_TYPE = SENAT_COMPONENT_FAMILY + ".SenatDataTableEntryDetail";

    private enum PropertyKeys { mapper, bean; }

    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        super.encodeBegin(context);
        addDynamicChildren(context);
    }

    @Override
    public boolean getRendersChildren()
    {
        return true;
    }

    ...

    private Boolean isInitialized() {
        return (Boolean)getStateHelper().eval(SENAT_INITIALIZED,false);
    }

    private void setInitialized(Boolean param) {
        getStateHelper().put(SENAT_INITIALIZED, param);
    }

    private void addDynamicChildren(FacesContext context)  throws IOException {
        if(isInitialized()) {
            return;
        }
        setInitialized(true);
        /* components are instiated and added as children only once */
    }    
} 
```

它只是将孩子添加到面板网格中。

自定义组件声明的其他方面（在 taglib 等中）都可以。

问题似乎不在于 EL 表达式、completeMethod 定义等。如果我在我的测试 xhtml 页面中包含具有相同参数的 p:autoComplete 实例，它会按预期工作：

```
 <p:autoComplete value="#{minContext.selected.sen}" forceSelection="true" 
                        var="p" itemLabel="#{sc:senLibelle(p)}" itemValue="#{p}"
                        completeMethod="#{senUtils.completeAllSens}"/> 
```

我注意到 PF AutoComplete 组件有点特殊，因为它在检测到查询时呈现不同。[请参阅http://primefaces.googlecode.com/files/primefaces-3.4.2.zip](http://primefaces.googlecode.com/files/primefaces-3.4.2.zip)中的 AutoCompleteRenderer 源代码。

在“动态实例化”的情况下，不调用该组件的解码方法。我没有找到最后几天的原因，但没有成功。

我期待您就如何检查以纠正这个烦人的“错误”提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:44:11.497

所以，问题出在 id 生成中（见两条评论）。

组件实例化的开始变为：

```
AutoComplete ac = (AutoComplete) context.getApplication().createComponent(AutoComplete.COMPONENT_TYPE);
ac.setParent(this);
ac.setId(...some application specific unique id generation...);

final String varName = "p"; 
```

通过这种方式，命名容器在客户端 ID 生成中得到了适当的考虑。

# android - 无法从 Android SDK 管理器安装/下载 SDK

> ID：14441934
> 
> 赞同：0
> 
> 时间：2013-01-21T15:30:04.800
> 
> 标签：android, eclipse, android-sdk-tools, google-play-services

我正在尝试安装和使用 Google Play 服务中的库，因为我正在按照[此处的步骤操作](http://developer.android.com/google/play-services/setup.html)

但是，我收到这个奇怪的错误，它说找不到文件并且访问被拒绝。

![在此处输入图像描述](../Images/70ec70b4ff61aa3979938fe3b789408b.png)

我什至尝试过更新或下载新的 SDK，似乎我也遇到了这个问题。所以我想知道我是否遗漏了一些阻止我下载 SDK 的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:56:42.097

啊，我多么愚蠢。

这不是由任何防火墙设置/防病毒引起的。

由于该文件夹位于 Program Files 中，请确保您的 Windows 用户帐户具有完全控制访问权限。

这可以在Security下文件夹的属性中设置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:34:07.450

在我看来，是否存在下载问题（防火墙、防病毒软件）、阻止下载或类似用于打开 zip 文件的自动防病毒软件阻止？

Java是否允许使用互联网连接？您是否在防火墙设置中更改了某些内容？您可以尝试将 SDK 管理器添加到防火墙允许列表中吗？

# sql - 从 SQL Server2008 中的存储过程调用批处理文件时查询保持活动状态

> ID：14441935
> 
> 赞同：0
> 
> 时间：2013-01-21T15:30:08.963
> 
> 标签：sql, sql-server-2008, stored-procedures, batch-file, dos

我创建了以下存储过程：

```
CREATE PROCEDURE [dbo].[_StartWebcamStream]
AS

BEGIN
    declare @command varchar(200)
    set @command = 'C:\startStream.bat'
    exec master..xp_cmdshell @command

END 
```

用于执行批处理文件`startStream.bat`。该批次包含以下代码：

```
"C:\Program Files (x86)\VideoLAN\VLC\vlc.exe" -I dummy -vvv rtsp://mycamaddress/live_mpeg4.sdp --network-caching=4096 --sout=#transcode{vcodec=mp4v,fps=15,vb=512,scale=1,height=240,width=320,acodec=mp4a,ab=128,channels=2}:duplicate{dst=http{mux=asf,dst=:11345/},dst=display} :sout-keep} 
```

批处理文件已正确启动，但查询会继续运行，直到 vlc 停止。

我该怎么做才能停止让 vlc 运行的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:16:41.807

* * *

**免责声明：请勿在生产环境中运行这些示例！**

* * *

SQL Server 监视由 xp_cmdshell 生成的所有进程并等待它们完成。看看你可以运行这个语句：

```
EXEC xp_cmdshell 'cmd /C "start cmd /K dir"' 
```

这会启动一个命令 shell，然后再启动另一个命令 shell 来执行 dir 命令。第一个 shell 在生成第二个（/C 开关）后立即终止，而第二个执行“dir”然后不终止（/K 开关）。由于第二个延迟过程，即使 SQL Server 直接启动的进程消失了，查询也不会返回。你甚至不能取消它。即使您在 SSMS 中关闭窗口，请求也会继续运行。你可以检查一下

```
SELECT r.session_id, t.text 
FROM sys.dm_exec_requests r
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t 
```

该`NO_OUTPUT`参数也无济于事：

```
EXEC xp_cmdshell 'cmd /C "start cmd /K dir"', NO_OUTPUT; 
```

您将看到相同的“粘性”行为。

摆脱这些的唯一方法是重新启动计算机或手动终止进程（需要以管理员身份执行任务管理器）。重新启动 SQL Server 服务不会停止生成的进程。

* * *

作为解决方案，您可以使用 SQL 代理。它有一个“操作系统（CmdExec）”步骤类型，您可以使用它来运行您的程序。您可以创建作业，然后使用`sp_start_job`.

无论哪种方式，您的过程实际上都需要在某个时候完成。否则，您将创建一堆从长远来看会导致性能问题的流程“主体”。

# google-app-engine - 从主/从迁移到 HRD 和电子邮件限制为 100/天

> ID：14441936
> 
> 赞同：0
> 
> 时间：2013-01-21T15:30:12.823
> 
> 标签：google-app-engine

大约一周前，我将我的（付费）应用程序从 Master/Slave 迁移到 HRD。从那时起，我的应用程序被限制为每天 100 封电子邮件，并显示“资源当前遇到短期配额限制”的警告。我知道它提到了一个限制，直到第一次成功计费，所以我希望一旦发生这种限制就会消失 - 但可惜它没有！我还填写了“请求额外资源”表格，希望能有所帮助。

有人遇到过从主/从迁移的问题吗？关于我可以联系谁或如何从这个限制中恢复的任何建议？迁移过程相对顺利——除了这个对我的客户产生重大影响的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-29T23:03:34.263

我现在有同样的问题。我昨天刚刚完成 HRD 迁移，直到今天才意识到我的 Mail API 请求失败了，因为我的新 HRD 应用程序上的邮件配额仅为每天 100 封邮件。我以前没有这个限制，我发现尽管迁移成功，但这样的琐事却给我的用户带来了麻烦，这让我感到非常失望。我提交了增加配额的请求，希望我也不必等待一周才能申请。

任何等到最后一分钟才将其应用程序迁移到 HRD 的人请注意：确保您在新应用程序上申请增加邮件配额，因为您的旧设置不会延续，即使您在两个应用程序上都启用了计费。

# sql - 如何在存储过程中删除和插入数据到同一个表中？

> ID：14441949
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:30:48.820
> 
> 标签：sql, oracle

在将数据插入表之前，如何在存储过程中删除表？

```
create or replace procedure proc_test is
begin
delete * from table1

insert into table1
select * from table2
end proc_test; 
```

似乎不起作用，语法有什么问题？错误是

```
ERROR at line 8: PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:

   begin case declare end exception exit for goto if loop mod
   null pragma raise return select update while with

    << close current delete fetch lock insert
   open rollback savepoint set sql execute commit forall merge
   pipe
6\. select * from table1
7\. 
8\. end proc_test; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:49:53.010

啊，问题是缺少分号！这有效

```
create or replace procedure proc_test is
begin
delete * from table1; --semicolon here

insert into table1
select * from table2; --semicolon here
end proc_test; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:34:58.730

不需要`*`in 删除 : `delete from table1`。另外，如果要删除所有记录，请考虑`truncate`（但是，`truncate`是ddl命令，因此您将无法回滚）

# android - JellyBean 之后的活动生命周期行为不同

> ID：14441951
> 
> 赞同：0
> 
> 时间：2013-01-21T15:30:50.133
> 
> 标签：android, android-activity, android-notifications, android-lifecycle, activity-lifecycle

我有以下情况。活动 A 启动活动 B。B 启动一个通知，单击该通知将启动另一个活动 C。现在 Gingerbread 和 ICS 以后的行为有所不同。当我单击通知时，如果是 Gingerbread，则会看到预期的行为，但是当我在单击通知时在 ICS 或 JellyBean 上运行相同的代码时，活动 A 被破坏（调用 OnDestroy）。为什么生命周期行为不同。如何使其在所有设备中以一致的方式运行？请建议。

```
 public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            Log.v("MyLog","Activity A created");
        }

        @Override
        protected void onDestroy() {
            super.onDestroy();
            Log.v("MyLog","Activity A destroyed");

        }
        public void startB(View v)
        {
            Intent intent=new Intent(getApplicationContext(),B.class);
            startActivity(intent);
        }

        protected void onStop()
        {
            super.onStop();
            Log.v("MyLog","Activity A stopped");
        }

        protected void onResume()
        {
            super.onResume();
            Log.v("MyLog","Activity A resumed");
        }

    }
}

public class B extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.b);
        Log.v("MyLog","Activity B created");
    }

    protected void onStop()
    {
        super.onStop();
        Log.v("MyLog","Activity B stopped");
    }

    protected void onResume()
    {
        super.onResume();
        Log.v("MyLog","Activity B resumed");
    }

    public void startNotification(View v)
    {
        NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(getApplicationContext())
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle("My notification")
        .setContentText("Hello World!")
        .setAutoCancel(true);

        // Creates an explicit intent for an Activity in your app
        Intent resultIntent = new Intent(getApplicationContext(), C.class);

        // The stack builder object will contain an artificial back stack for the
        // started Activity.
        // This ensures that navigating backward from the Activity leads out of
        // your application to the Home screen.
        TaskStackBuilder stackBuilder = TaskStackBuilder.create(getApplicationContext());
        // Adds the back stack for the Intent (but not the Intent itself)
        stackBuilder.addParentStack(C.class);
        // Adds the Intent that starts the Activity to the top of the stack
        stackBuilder.addNextIntent(resultIntent);
        PendingIntent resultPendingIntent =
                stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);

        mBuilder.setContentIntent(resultPendingIntent);
        NotificationManager mNotificationManager =
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        // mId allows you to update the notification later on.
        int mId=1;
        mNotificationManager.notify(mId, mBuilder.build());
    }
}

public class C extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.c);
        Log.v("MyLog","Activity C created");
    }
    protected void onStop()
    {
        super.onStop();
        Log.v("MyLog","Activity C stopped");
    }

    protected void onResume()
    {
        super.onResume();
        Log.v("MyLog","Activity C resumed");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:49:44.647

System can terminate activity always when it's needed. Probably it's not exectly difference between Android releases, but differece between different devices / free memory amount of different Android versions runing.

# python - 如何在 setup.py 中执行自定义构建步骤？

> ID：14441955
> 
> 赞同：16
> 
> 时间：2013-01-21T15:31:26.557
> 
> 标签：python, setuptools, distutils

该`distutils`模块允许将资源文件与 Python 模块一起包含和安装。如果在构建过程中应该生成资源文件，如何正确包含它们？

例如，该项目是一个 Web 应用程序，其中包含应编译为 JavaScript 并包含在 Python 包中的 CoffeeScript 源代码。有没有办法将其集成到正常的 sdist/bdist 进程中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-17T21:25:35.433

我花了很长时间才弄清楚这一点，那里的各种建议以各种方式被破坏 - 它们破坏了依赖项的安装，或者它们在 pip 中不起作用等。这是我的解决方案：

在 setup.py 中：

```
from setuptools import setup, find_packages
from setuptools.command.install import install
from distutils.command.install import install as _install

class install_(install):
    # inject your own code into this func as you see fit
    def run(self):
        ret = None
        if self.old_and_unmanageable or self.single_version_externally_managed:
            ret = _install.run(self)
        else:
            caller = sys._getframe(2)
            caller_module = caller.f_globals.get('__name__','')
            caller_name = caller.f_code.co_name

            if caller_module != 'distutils.dist' or caller_name!='run_commands':
                _install.run(self)
            else:
                self.do_egg_install()

        # This is just an example, a post-install hook
        # It's a nice way to get at your installed module though
        import site
        site.addsitedir(self.install_lib)
        sys.path.insert(0, self.install_lib)
        from mymodule import install_hooks
        install_hooks.post_install()
        return ret 
```

然后，在调用 setup 函数时，传递 arg：

```
cmdclass={'install': install_} 
```

您可以使用相同的想法进行构建而不是安装，为自己编写一个装饰器以使其更容易等。这已经通过 pip 进行了测试，并直接调用“python setup.py install”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:21:20.457

最好的方法是编写一个自定义的 build_coffeescript 命令并使其成为 build 的子命令。对类似/重复问题的其他答复中提供了更多详细信息，例如这个：

[https://stackoverflow.com/a/1321345/150999](https://stackoverflow.com/a/1321345/150999)

# asp.net - 显示 System.Web.HttpException 的错误消息：WebMatrix 中超出了最大请求长度

> ID：14441959
> 
> 赞同：1
> 
> 时间：2013-01-21T15:31:39.083
> 
> 标签：asp.net, razor, webmatrix-2

我尝试使用我的 *_PageStart.cshtml* 文件中的 try catch 块来捕获我的 HttpExceptions，并使用[此站点作为参考](http://www.asp.net/web-pages/tutorials/working-with-pages/18-customizing-site-wide-behavior)，但这似乎不起作用。还有其他人有设置最大文件大小错误消息的解决方案吗？我不想简单地增加我在 web.config 中的上传限制，因为我网站的用户不需要上传大于 10MB 的文件，所以这是我的上传限制。我也尝试用我的 global.asax 文件处理它，但没有奏效。

当然，必须有一种方法可以重定向到另一个页面，或者在接收到超出请求限制的文件时简单地显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:45:51.203

我已经通过使用 Global.asax 中的事件处理程序自己解决了这个问题

# ruby - 删除 CSV 文件中的空格

> ID：14441962
> 
> 赞同：18
> 
> 时间：2013-01-21T15:31:54.337
> 
> 标签：ruby, parsing, csv, rake-task

我有一个带有额外空格的字符串：

```
First,Last,Email  ,Mobile Phone ,Company,Title  ,Street,City,State,Zip,Country, Birthday,Gender ,Contact Type 
```

我想解析这一行并删除空格。

我的代码如下所示：

```
namespace :db do
task :populate_contacts_csv => :environment do

require 'csv'

csv_text = File.read('file_upload_example.csv')
  csv = CSV.parse(csv_text, :headers => true)
    csv.each do |row|
      puts "First Name: #{row['First']} \nLast Name: #{row['Last']} \nEmail: #{row['Email']}"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-07T08:44:35.080

```
@prices = CSV.parse(IO.read('prices.csv'), :headers=>true, 
   :header_converters=> lambda {|f| f.strip},
   :converters=> lambda {|f| f ? f.strip : nil}) 
```

The nil test is added to the row but not header converters assuming that the headers are never nil, while the data might be, and nil doesn't have a strip method. I'm really surprised that, AFAIK, :strip is not a pre-defined converter!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T16:06:36.697

你可以`strip`先散列：

```
csv.each do |unstriped_row|
  row = {}
  unstriped_row.each{|k, v| row[k.strip] = v.strip}
  puts "First Name: #{row['First']} \nLast Name: #{row['Last']} \nEmail: #{row['Email']}"
end 
```

编辑也剥离散列键

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T17:14:58.930

CSV 支持[headers](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-i-header_convert)和[fields](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-i-convert)的“转换器” ，它可以让您在数据传递到`each`循环之前进入数据。

编写示例 CSV 文件：

```
csv = "First,Last,Email  ,Mobile Phone ,Company,Title  ,Street,City,State,Zip,Country, Birthday,Gender ,Contact Type
first,last,email  ,mobile phone ,company,title  ,street,city,state,zip,country, birthday,gender ,contact type
"
File.write('file_upload_example.csv', csv) 
```

这是我的做法：

```
require 'csv'
csv = CSV.open('file_upload_example.csv', :headers => true)
[:convert, :header_convert].each { |c| csv.send(c) { |f| f.strip } }

csv.each do |row|
  puts "First Name: #{row['First']} \nLast Name: #{row['Last']} \nEmail: #{row['Email']}"
end 
```

哪个输出：

```
First Name: 'first'
Last Name: 'last'
Email: 'email' 
```

当从文件中读取每个标题和每个字段时，转换器只需从每个标题和每个字段中去除前导和尾随空格。

此外，作为编程设计选择，不要使用以下方法将文件读入内存：

```
csv_text = File.read('file_upload_example.csv') 
```

然后解析它：

```
csv = CSV.parse(csv_text, :headers => true) 
```

然后循环它：

```
csv.each do |row| 
```

Ruby's IO system supports "enumerating" over a file, line by line. Once my code does `CSV.open` the file is readable and the `each` reads each line. The entire file doesn't need to be in memory at once, which isn't scalable (though on new machines it's becoming a lot more reasonable), and, if you test, you'll find that reading a file using `each` is extremely fast, probably equally fast as reading it, parsing it then iterating over the parsed file.

# c - C 语言的 Opencv 库。这条指令究竟是什么 int=pointer==0; ?

> ID：14441969
> 
> 赞同：1
> 
> 时间：2013-01-21T15:32:14.860
> 
> 标签：c, opencv

```
CvMat* nextimg = 0;
int firstframe;

firstframe=nextimg==0; 
```

如果我不输入“==0”，则返回以下警告：

```
[Warning] assignment makes integer from pointer without a cast 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:33:57.247

```
firstframe=nextimg==0; 
```

它正在执行两个操作：

1.  检查是否`nextimg==0`
2.  将布尔结果分配`#1`给`firstframe`

如果删除`==0`, 语句会导致指针被分配给整数，因此会发出警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:34:27.510

它的缩写相当于

```
int firstframe;
if (nextimg == 0) {
    firstframe = 1;
}
else {
    firstframe = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:22:39.727

`firstframe=nextimg==0;`- 这里正在检查`nextimg`它是否等于零。一旦检查完成，返回值将是`TRUE`or `FALSE`。该返回值将被分配给`firstframe`. 没有警告，因为这里分配了条件检查的返回值。

`firstframe=nextimg;`- 这里的值`nextimg`被分配给`firstframe`。分配了 NULL 指针，`nextimg`因此您会收到该警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T17:32:28.893

它等效于以下代码：

```
CvMat* nextimg = NULL;
int firstframe;

firstframe = (nextimg == NULL); 
```

的条件`nextimg == NULL`返回 0 表示假，1 表示真。

# video-streaming - 如何在 Akamai HD 上读取原始文件？

> ID：14441975
> 
> 赞同：3
> 
> 时间：2013-01-21T15:32:34.410
> 
> 标签：video-streaming, akamai

我需要将位于 Akamai HD 服务器上的视频的 Flash 播放器转换为 HTML 5 版本。但是我过去没有与 Akamai 合作，所以我在 Akamai 中完全是新手，开发时间有限。视频已经是 MP4 格式（MP4 容器、H264 视频）。但它作为 FLV 容器访问（它在 Akamai 自动转码）。网址看起来像[http://something.akamaihd.net/file_part_4,3.,2.,mp4.csmil/.....&primaryToken=token](http://something.akamaihd.net/file_part_4,3.,2.,mp4.csmil/.....&primaryToken=token)。我访问原始文件的第一步是什么（我认为有一些 REST API）？除了令牌（与访问 FLV 容器不同），我还需要哪些额外的访问要求？感谢您对我的新手问题的耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:15:19.477

为了访问原始文件，您需要创建另一个配置（例如 Progessive Media Download 配置），该配置将使用与 AkamaiHD 配置相同的来源。如果您有令牌要求，您也必须在新配置中实现令牌逻辑。请注意：令牌不是 HD 配置或任何其他类型配置的要求——它们是您可以在需要时打开的功能。

# php - jquery 结果没有回显到同一页面上的 div

> ID：14441976
> 
> 赞同：0
> 
> 时间：2013-01-21T15:32:43.487
> 
> 标签：php

一直试图弄清楚如何将查询结果回显到 div 中的文本框。我有一个表单（见下文），它确实将结果放在我想要的文本框中，但没有回显到 div（称为“内容”）。经过一些编辑后，我在这里更新了我的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
</head>
<body>
<form id="search" method="post" action="rating.php">Miles <input name="miles" id="miles" type="text" /> <input name="search1" id="search1" class="btnButton" value="Search" type="submit" /></form>
<div id="content"></div>
<script type="text/javasript" src="jquery-1.9.0.min.js"></script>
<script type="text/javascript">// <![CDATA[
$(document).ready(function(){

//jquery click event
$("#search").on("submit", function(e){

   //disable default form submit postpage
   e.preventDefault();

   //make ajax call to the search.php parsing the search textbox value as query string
   $.get("rating.php?miles="+$("#miles").val(), function(result){

        //Result will be dumped in the div
        $("#content").html(result);

       });

   });

});
// ]]></script>
</body>
</html> 
```

英里的值现在传递给 rating.php，我希望它在其中进行查询，然后将结果格式化为显示在 div 中的文本框格式：

```
<?php
$hostname = 'somehost.com';
$username = 'ratetable';
$password = 'mypassword';

$miles = (int) $_POST['miles'];

try 
{
$db = new PDO("mysql:host=$hostname;dbname=ratetable", $username, $password);

foreach($db->query("SELECT * FROM rates WHERE mileage<={$miles} ORDER BY mileage DESC LIMIT 1") as $row) {
 $result= "<input type='text' name='answer' value='" . $row['ratepermile'] . "'>'";
 echo $result;

   }
}         

catch (PDOException $e) {
  echo $e->getMessage();
  throw($e); 
}
?> 
```

结果按照我想要的方式格式化，除了它没有被回显到脚本并放置在结果应该的位置。有没有办法可以使用 div 标签或以其他方式确保它转到特定的 div？

谢谢你的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:53:10.570

首先想到的是：示例中的任何地方都没有包含 jQuery 库。另外，请注意下一行的逗号应该是一个点：

> e,preventDefault();

如果这不是问题，而只是匆忙复制/粘贴的结果，那么确定您的 $.get() 请求会为您提供任何输出吗？

您可能还想更改以下内容：

> $("#search").live("点击", function(e){

类似于：

> $("#search").on("提交", function(e){

因为#search 的引用指向您的表单标签而不是按钮

# php - mysqli结果函数

> ID：14441978
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:32:48.813
> 
> 标签：php, mysqli

所以我们知道没有实际`mysqli result`的，`mysql`所以我处于困境中。我进行了快速搜索，发现了一个可以复制相同效果的函数，但它似乎不起作用。我不确定是我实现错了还是功能不好。

这是脚本

```
<?php
if($_SESSION['aname'] == NULL){
header("Location: index.php?au=login");
}
if(isset($_POST['submit']))
{
    function email_result($res, $row, $field=0) {
        $res->data_seek($row);
        $datarow = $res->fetch_array();
        return $datarow[$field];
    }
    if (get_magic_quotes_gpc())
    {
        $subject = stripslashes($_POST['subject']);
        $message = stripslashes($_POST['message']);
    }
    else
    {
        $subject = $_POST['subject'];
        $message = $_POST['message'];
    }

    $result = $db->query("SELECT `email` FROM `members` WHERE `alert` = '1'");
    $num = $result->num_rows;
    $i=0;
    while($i < $num) 
    {
        $email = email_result($result,$i,"email");
        mail($email, $subject, $message, "From: ".$settings_info['website_name']." Admin<".$settings_info['admin_email'].">");
        echo "Email sent to: ".$email."<br />";
        header("Refresh: 2; url=index.php?au=send_message");
        $i++;
    }
}
else
{
?>
<table align='center'>
    <form method='post' action=''>
        <tr><td>Subject:</td><td><input type='text' name='subject' id='subject' value='' /></td></tr>
        <tr><td>Message: </td><td><textarea name='message' id='home_text' cols='50' rows='15'></textarea></td></tr>
        <tr><td></td><td><input type='submit' name='submit' id='submit' value='Send Message' /></td></tr>
    </form>
</table>
<?php
}
?> 
```

将脚本与 Xampp 一起使用时，它会产生正确的信息，并会回显它已将电子邮件发送出去，即使它实际上并没有发送它们，这意味着它工作正常。所以我可能在我的 PHP 设置中遗漏了一些东西，但我不知道是什么。

所以我的问题是，有没有`mysql_result`比我现在使用的更好的方法来复制，`mysqli`或者我在我这里拥有的当前函数中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:39:47.337

您需要从资源中获取每一行。像这样：

```
$result = $db->query("SELECT `email` FROM `members` WHERE `alert` = '1'");
$num = $result->num_rows;

while($row = $result->fetch_assoc())  //  <-------------here's how to get the data
{
    $email = $row'[email'];
    mail($email, $subject, $message, "From: ".$settings_info['website_name']." Admin<".$settings_info['admin_email'].">");
    echo "Email sent to: ".$email."<br />";
    header("Refresh: 2; url=index.php?au=send_message");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:45:37.553

> 所以我们知道没有实际的 mysqli 结果，因为有 mysql

谁说你的？有。特别是如果您使用的是普通查询（），而不是准备（）/执行（）：

```
// here goes your mysqli result:
$result = $db->query($query);
//now you can iterate over it getting row data
while ($row = $result->fetch_assoc($result)) {
    $email = $row["email"];
    ...
} 
```

请注意，您发送的“刷新”标题与发送的电子邮件一样多。

> 所以我可能在我的 PHP 设置中遗漏了一些东西，但我不知道是什么。

不在 PHP 设置中，而是在代码中。
当您在代码中使用原始 API 函数时（这对我来说很恶心），请始终至少以这种方式运行您的查询

```
$result = $db->query($query) or trigger_error($db->error." [$query]"); 
```

并且您会被告知 yopr 代码或服务器有什么问题或与失败查询相关的任何内容

# c - 常量和指向指针的指针

> ID：14441979
> 
> 赞同：2
> 
> 时间：2013-01-21T15:32:54.533
> 
> 标签：c, pointers, constants

我对`const`关键字感到非常困惑。我有一个接受字符串数组作为输入参数的函数和一个接受可变数量参数的函数。

```
void dtree_joinpaths(char* output_buffer, int count, ...);
void dtree_joinpaths_a(char* output_buffer, int count, const char** paths); 
```

`dtree_joinpaths``dtree_joinpaths_a`在它从参数列表中构建了一个字符串数组之后在内部调用。

```
void dtree_joinpaths(char* output_buffer, int count, ...) {
    int i;
    va_list arg_list;
    va_start(arg_list, count);
    char** paths = malloc(sizeof(char*) * count);
    for (i=0; i < count; i++) {
        paths[i] = va_arg(arg_list, char*);
    }
    va_end(arg_list);
    dtree_joinpaths_a(output_buffer, count, paths);
} 
```

但是`gcc`编译器给了我以下错误信息：

```
src/dtree_path.c: In function 'dtree_joinpaths':
src/dtree_path.c:65: warning: passing argument 3 of 'dtree_joinpaths_a' from incompatible pointer type 
```

当我更改`char** paths = malloc(count);`为 时`const char** paths = malloc(count);`，此错误不再出现。我不明白的是，

1.  我认为指向地址的指针总是可以转换为 const 指针，但不能反过来（这就是imo这里发生的事情）。
2.  这个例子有效：[http ://codepad.org/mcPCMk3f](http://codepad.org/mcPCMk3f)

我做错了什么，或者我的误解在哪里？

* * *

## 编辑

我的目的是使输入数据的内存对于函数不可变。（在这种情况下是`paths`参数）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:56:23.260

原因`char **`->`const char**`是“危险”转换是以下代码：

```
const char immutable[] = "don't modify this";

void get_immutable_str(const char **p) {
    *p = immutable;
    return;
}

int main() {
    char *ptr;
    get_immutable_str(&ptr); // <--- here is the dangerous conversion
    ptr[0] = 0;
} 
```

上面的代码试图修改一个不可修改的对象（ 的全局数组`const char`），这是未定义的行为。此代码中没有其他候选对象可以将某些内容定义为“坏”，因此 const-safety 表明指针转换是坏的。

C 不禁止转换，但`gcc`会警告您它不好。仅供参考，C++ 确实禁止转换，它比 C 具有更严格的 const 安全性。

我会在这个例子中使用字符串文字，除了 C 中的字符串文字一开始是“危险的”——你不能修改它们，但它们的类型是 array-of-`char`而不是 array-of- `const char`。这是出于历史原因。

> 我认为指向地址的指针总是可以转换为 const 指针

指向非 const-T 的指针可以转换为指向 const-T 的指针。`char **`->`const char**`不是该模式的示例，因为 if `T`is `char *`then `const T`is `char * const`， not `const char *`（此时可能值得不再`const`在左侧写 the ：写`char const *`，你不会期望它与`T const`where T is `char *`）。

您可以安全地转换`char **`为`char * const *`, 并且（出于需要比简单规则多一点的原因）您可以安全地转换`char **`为`char const * const *`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:35:27.483

关键是指针不是const。要声明 const 指针，请使用`char *const ptr;`或 声明指向 const 指针的 const 指针，`char *const *const ptr;`. `const char **ptr`是指向指针的指针`const char`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:57:49.047

实际上，如果有一个函数接受 const char** 并且您传递了 char** ，这可能会导致出现问题，反之亦然。

在您的特定情况下，您希望内存是不可变的，但它不是不可变的，并且可能随时更改。在多线程环境中，您会期望此内存是线程安全的，并且只要它位于堆栈或堆中，您就不需要互斥锁来访问它。

所有这些都是为了避免错误，但如果您确定这不会导致错误，您可以简单地将指针转换为 const char** 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:55:57.050

您不能传入`char **`，`const char **`因为*编译器无法保证 const 正确性*。

假设您有以下代码（并且已编译）：

```
void foo(const char **ppc, const char* pc)
{
  *ppc = pc; // Assign const char* to const char*
}

void bar()
{
  const char c = 'x';
  char* pc;

  foo(&pc, &c); // Illegal; converting const char* to const char**. Will set p == &c
  *pc = 'X';    // Ooops! That changed c.
} 
```

有关没有函数调用的相同示例，请参见[此处](http://c-faq.com/ansi/constmismatch.html)。

# jquery - Uploadify 总是遇到错误'test.jpg (79.37KB) - HTTP Error'

> ID：14441991
> 
> 赞同：0
> 
> 时间：2013-01-21T15:33:45.593
> 
> 标签：jquery, file-upload, struts2, uploadify

我正在使用 Uploadify（并使用 Struts2 作为后端）来上传文件，每当我选择一个文件后，a `IO Error`or`HTTP Error`就会发生：

```
test.jpg (79.37KB) - HTTP Error 
```

这是JavaScript代码：

```
$(select).uploadify({
            'uploader' : BASE_PATH + 'js/uploadify-v2.1.4/uploadify.swf',
            'script' : 'attachement/doUploadImage.action?jsessionid='+sessionId,
            'scriptData': {'folder': 'customer'},
            'auto' : true,
            'buttonText': 'Select a image',
            'displayData': 'percentage',
            'fileDesc': 'Support Formats:jpg/gif/jpeg/png/bmp.',
            'fileExt': '*.jpg;*.gif;*.jpeg;*.png;*.bmp',
            'multi': false,
            'cancelImg' : BASE_PATH + 'js/uploadify-v2.1.4/cancel.png',
            'fileDataName': 'uploadFile',
            'onComplete' : function(event, queueID, fileObj, response, data) {
               // Do something
            },
            'onError': function(error) {
            }
        }); 
```

以下是 struts.xml 配置：

```
<package name="attachement" namespace="/attachement" extends="test-default">
        <action name="do*" method="{1}" class="com.test.AttachmentAction">
        </action>
    </package> 
```

以下是 AttachmentAction 中的代码：

```
private String folder;

private File uploadFile;

public void doUploadImage() {
    Upload result = new Upload();

    try {
        log.info("Begin uploading the file " + uploadFile);

        String filePath = IoUtil.saveAttachment(uploadFile, folder);

        result.setSuccess(true);
        result.setFilePath(filePath);
    } catch (Exception e) {
        e.printStackTrace();
        result.setSuccess(false);
        result.setMessage("Error: " + e.getMessage());
    }

    this.outJson(result);
} 
```

以下是firebug下的信息： ![在此处输入图像描述](../Images/268ae5709dc15d9e9241f429a8d0ba51.png)

我不知道是什么导致这个错误发生？任何人都可以给我帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:32:28.237

几天后，这个问题就解决了。根本原因是我的项目没有包含 struts 2 上传功能所依赖的 Apache Jars。

```
commons-fileupload.jar
commons-io.jar 
```

谢谢！

# java - 如何使用 JDBC 处理无法访问的数据库服务器

> ID：14441998
> 
> 赞同：0
> 
> 时间：2013-01-21T15:34:03.900
> 
> 标签：java, database, jdbc

我有一个与数据库服务器通信的 Java 应用程序。自动提交模式需要设置为 false，因此有一个每秒执行一次提交的计划任务：

如果我的应用程序暂时无法访问此类服务器，我会尽量避免数据丢失。

```
 Connection stableConn = ...;
    stableConn.setAutoCommit(false);

    //create the task to commit changes every second:
    commitTask = new Timer("CommitOnDB");
    commitTask.schedule(new TimerTask() {
        @Override
        public void run() {
            boolean exit = false;

            //if the connection to DB is lost, loop until it is re-established:
            while(!exit) {
                try {
                    stableConn.commit();    
                    exit = true;
                } catch (SQLException e) {
                    exit = !"08007".equals(e.getSQLState());
                    log.error("Cannot commit statements due to " + e + ";state=" + e.getSQLState(), e);
                }
            }
        }
    }, 1000, 1000); 
```

当连接断开时，我试图捕获 08007 SQLState，但无论如何，在循环的第二轮，我得到另一个异常，说明连接已经关闭。

此外，我想要一个适用于不同 DBMS 的代码，如 MS SQL Server、MySQL、Oracle 等。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:55:37.247

添加一些这样的检查：

```
if(stableConn.isClosed()) {
    stableConn = getRecoveredConnection();
} 
```

或者

```
if(!SomeHelper.isValid(connection)) {
   ... 
} 
```

实际上，您甚至最好在 catch 或 finally 中执行此操作，因为某些 SQL 异常只是告诉您数据库不喜欢您的操作，而其他（如您的情况）使会话无效。

# php - 如果不在另一个查询中，请选择 ROW

> ID：14441999
> 
> 赞同：0
> 
> 时间：2013-01-21T15:34:07.480
> 
> 标签：php, mysql, sql, web

我有这个查询：

```
query 1 = 
SELECT emp.employeId,emp.nom,emp.prenom,msg.note,msg.quelleDate, emp.remarques, emp.autonome, embauche.actif as embaucheActif, embauche.embId, 'M' as source 
FROM employes emp 
LEFT JOIN messages msg ON msg.employeId = emp.employeId 
LEFT JOIN embauche ON embauche.employeId = emp.employeId 
WHERE emp.actif = 1 
AND msg.quelleDate BETWEEN '2013-01-01' AND '2013-01-31' 

UNION 

SELECT emp.employeId,emp.nom,emp.prenom,msg.note,msg.quelleDate, emp.remarques, emp.autonome, embauche.actif as embaucheActif, embauche.embId, 'A' as source 
FROM employes emp 
LEFT JOIN messagesautre msg ON msg.employeId = emp.employeId 
LEFT JOIN embauche ON embauche.employeId = emp.employeId 
WHERE emp.actif = 1 
AND msg.quelleDate BETWEEN '2013-01-01' AND '2013-01-31' 

ORDER BY nom,prenom,quelleDate 
```

而这个查询

```
query2 = select nom,prenom from employes where actif = 1; 
```

我正在尝试从中获取所有`query2`没有出现的employeeId`query1`

我试过了

```
select employeId,nom,prenom from employes where actif = 1 AND employeId in ( query1 ); 
```

但当然这不起作用，因为`query1`返回超过 1 列

是否可以使用 MySQL 查询来做到这一点？或者我必须编写 PHP 算法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:52:32.393

您在第二个查询中对第一个查询中的表的条件。雇员表中是否有重复的名字和名字？如果没有，您可以在每个`where`子句中添加以下内容：

```
and emp.Active = 1 
```

如果`Actif`和`Active`相同，那么您将永远不会得到任何行。

更通用的方法是在 where 子句中添加以下内容：

```
and not exists (select 1 from employes emp2 where emp2.prenom = emp.prenom and emp2.nom = emp.prenom) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:51:23.820

这样做是否简单：

```
select nom,prenom from employes AS emp 
LEFT JOIN embauche AS emb  
ON emp.employeID = emb.employeID
LEFT JOIN messages AS msg
ON emp.employeID = msg.employeID
where actif <> 1
AND msg.quelleDate NOT BETWEEN '2013-01-01' AND '2013-01-31'; 
```

样本数据：

```
CREATE TABLE employes (
  employeId int auto_increment primary key,
  nom varchar(30),
  prenom varchar(30),
  remarques longtext,
  autonome longtext
  );

CREATE TABLE messages (
  messagesID int auto_increment primary key,
  employeId int,
  quelleDate DATE,
  note longtext

  );

CREATE TABLE embauche(
  embId int auto_increment primary key,
  employeID int,
  actif int
  );

INSERT INTO employes (nom,prenom,remarques,autonome)
VALUES ("hollande", "francois", "24th President of France", "?"),
("Sarkozy", "Nicolas", "23th President of France", "?");

INSERT INTO messages (employeId,quelleDate,note)
VALUES (1, now(),"jlkjlkahkjhkj"),
(2,NOW() - INTERVAL 365 DAY,"jlkjlkahkjkjjhajhjheuioueoijhkj");

INSERT INTO embauche (employeId,actif)
VALUES (2, 2),
(1,1); 
```

[演示 sql 小提琴](http://www.sqlfiddle.com/#!2/84eb5/1)