# StackOverflow 问答 14470000-14470999

# python - 如何让扭曲的任务通过 cilent 的连接发送数据？

> ID：14470000
> 
> 赞同：1
> 
> 时间：2013-01-22T23:34:06.173
> 
> 标签：python, asynchronous, network-programming, twisted

如果我使用 twisted.internet.task.LoopingCall 创建一个循环任务，该任务如何安全地访问客户端的扭曲连接并发送它收集的数据？任务是否在单独的线程中运行，这意味着从任务本身发送数据可能不安全？我可以将任务的引用传递给客户端（LineReceiver 的实例），以便它从中发送数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:05:05.607

不。任务不在不同的线程中运行；有人可能会说这就是首先使用 Twisted 的全部意义所在。您希望能够在任何需要的地方传递对协议对象的引用。

# ruby-on-rails - FactoryGirl表和列同名，无法保存值

> ID：14470001
> 
> 赞同：0
> 
> 时间：2013-01-22T23:34:10.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot

我有一个`Image`名为 :text 列的模型，并且无法使用 FactoryGirl`image`保存该字段。`image`

以下是相关的代码：

```
image_spec.rb:
let(:image) { FactoryGirl.create(:image) }
subject { image }
it { should be_valid }

factories.rb:
factory :image do
    image "123456789.jpg"
end

image.rb:
attr_accessible :image
validates :image, presence: true 
```

当我运行测试时，我得到了错误

```
Failure/Error: let(:image) { FactoryGirl.create(:image) }
 ActiveRecord::RecordInvalid:
   Validation failed: Image can't be blank 
```

对于上述所有三行`image_spec.rb`。

我尝试过使用[FactoryGirl 应用如何初始化名为“序列”的列，](https://stackoverflow.com/questions/12324842/how-to-initialize-a-column-named-sequence-with-factorygirl)但无法正常工作。（我的其他模型的 FactoryGirl 创作工作正常）

如何分配与其表同名的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:35:06.580

试试这个：

```
FactoryGirl.define do
  factory :image do |i|
    i.some_attr 'xxx'
    i.image "123456789.jpg"
  end
end 
```

这样你实际上是在调用图像对象的 image= 方法，工厂女孩认为你正在尝试创建关联的另一种方式

（无论如何，您确实为该列使用了一个令人困惑的名称：P，image_path 或类似的名称会更好）

# python - scipy.optimize.curvefit() - 数组不能包含 infs 或 NaNs

> ID：14470012
> 
> 赞同：14
> 
> 时间：2013-01-22T23:35:13.630
> 
> 标签：python, scipy, curve-fitting

我正在尝试使用 Python 将一些数据拟合到曲线中[`scipy.optimize.curve_fit`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)。我遇到了错误`ValueError: array must not contain infs or NaNs`。

我不相信我的`x`或`y`数据包含 infs 或 NaN：

```
>>> x_array = np.asarray_chkfinite(x_array)
>>> y_array = np.asarray_chkfinite(y_array)
>>> 
```

了解一下 my`x_array`和`y_array`两端的样子（`x_array`是计数和`y_array`分位数）：

```
>>> type(x_array)
<type 'numpy.ndarray'>
>>> type(y_array)
<type 'numpy.ndarray'>
>>> x_array[:5]
array([0, 0, 0, 0, 0])
>>> x_array[-5:]
array([2919, 2965, 3154, 3218, 3461])
>>> y_array[:5]
array([ 0.9999582,  0.9999163,  0.9998745,  0.9998326,  0.9997908])
>>> y_array[-5:]
array([  1.67399000e-04,   1.25549300e-04,   8.36995200e-05,
     4.18497600e-05,  -2.22044600e-16]) 
```

我的功能：

```
>>> def func(x,alpha,beta,b):
...    return ((x/1)**(-alpha) * ((x+1*b)/(1+1*b))**(alpha-beta))
... 
```

我正在执行：

```
>>> popt, pcov = curve_fit(func, x_array, y_array) 
```

导致错误堆栈跟踪：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.py", line 426, in curve_fit
res = leastsq(func, p0, args=args, full_output=1, **kw)
File "/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.py", line 338, in leastsq
cov_x = inv(dot(transpose(R),R))
File "/usr/lib/python2.7/dist-packages/scipy/linalg/basic.py", line 285, in inv
a1 = asarray_chkfinite(a)
File "/usr/lib/python2.7/dist-packages/numpy/lib/function_base.py", line 590, in asarray_chkfinite
"array must not contain infs or NaNs")
ValueError: array must not contain infs or NaNs 
```

我*猜*该错误可能与我的数组无关，而是与 scipy 在中间步骤中创建的数组有关？我已经对相关的 scipy 源文件进行了一些挖掘，但是以这种方式调试问题很快就会变得棘手。有什么明显的我做错了吗？我在其他问题中随便提到过，有时某些初始参数猜测（我目前没有任何明确的猜测）可能会导致这类错误，但即使是这种情况，最好知道`a)`为什么那是以及`b)`如何避免它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T06:02:38.497

***为什么它失败了***

不是您的输入数组包含`nans`or `infs`，而是在某些 X 点和参数的某些值对目标函数的评估导致`nans`or `infs`：换句话说，具有`func(x,alpha,beta,b)`某些 x、alpha、beta 和 b 值的数组给出`nans`或`infs`超过优化例程。

Scipy.optimize 曲线拟合函数使用 Levenberg-Marquardt 算法。它也被称为阻尼最小二乘优化。它是一个迭代过程，每次迭代都会计算最佳函数参数的新估计值。此外，在优化过程中的某个时刻，算法正在探索参数空间中未定义函数的某些区域。

***怎么修***

*1/初步猜测*

参数的初始猜测对于收敛是决定性的。如果初始猜测远非最优解，您更有可能探索目标函数未定义的某些区域。因此，如果您可以更好地了解您的最佳参数是什么，并为您的算法提供这个初始猜测，那么可能会避免在进行过程中出现错误。

*2/型号*

此外，您可以修改模型，使其不返回`nans`. 对于那些未定义`params`原始函数的参数值`func`，您希望目标函数采用巨大的值，或者换句话说， `func(params)`远离要拟合的 Y 值。

此外，在未定义目标函数的点上，您可能会返回一个大浮点数，例如`AVG(Y)*10e5`使用 AVG 平均值（这样您就可以确保比要拟合的 Y 值的平均值大得多）。

***关联***

你可以看看这篇文章：[Fitting data to an equation in python vs gnuplot](https://stackoverflow.com/questions/14322414/fitting-data-to-an-equation-in-python-vs-gnuplot)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T00:11:35.517

您的函数具有负幂 (x^-alpha)，这与 (1/x)^(alpha) 相同。如果 x 永远为 0，您的函数将返回 inf 并且您的曲线拟合操作将中断，我很惊讶没有提前抛出警告/错误，通知您除以 0。

顺便说一句，你为什么要乘以除以 1？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-03T20:00:58.983

**我能够在 python2.7 中重现此错误，如下所示：**

```
from sklearn.decomposition import FastICA
X = load_data.load("stuff")    #this sets X to a 2d numpy array containing 
                               #large positive and negative numbers.
ica = FastICA(whiten=False)

print(np.isnan(X).any())   #this prints False
print(np.isinf(X).any())   #this prints False

ica.fit(X)                 #this produces the error: 
```

**总是会产生错误：**

```
/usr/lib64/python2.7/site-packages/sklearn/decomposition/fastica_.py:58: RuntimeWarning: invalid value encountered in sqrt
  return np.dot(np.dot(u * (1\. / np.sqrt(s)), u.T), W)
Traceback (most recent call last):
  File "main.py", line 43, in <module>
    ica()
  File "main.py", line 18, in ica
    ica.fit(X)
  File "/usr/lib64/python2.7/site-packages/sklearn/decomposition/fastica_.py", line 523, in fit
    self._fit(X, compute_sources=False)
  File "/usr/lib64/python2.7/site-packages/sklearn/decomposition/fastica_.py", line 479, in _fit
    compute_sources=compute_sources, return_n_iter=True)
  File "/usr/lib64/python2.7/site-packages/sklearn/decomposition/fastica_.py", line 335, in fastica
    W, n_iter = _ica_par(X1, **kwargs)
  File "/usr/lib64/python2.7/site-packages/sklearn/decomposition/fastica_.py", line 108, in _ica_par
    - g_wtx[:, np.newaxis] * W)
  File "/usr/lib64/python2.7/site-packages/sklearn/decomposition/fastica_.py", line 55, in _sym_decorrelation
    s, u = linalg.eigh(np.dot(W, W.T))
  File "/usr/lib64/python2.7/site-packages/scipy/linalg/decomp.py", line 297, in eigh
    a1 = asarray_chkfinite(a)
  File "/usr/lib64/python2.7/site-packages/numpy/lib/function_base.py", line 613, in asarray_chkfinite
    "array must not contain infs or NaNs")
ValueError: array must not contain infs or NaNs 
```

## **解决方案：**

```
from sklearn.decomposition import FastICA
X = load_data.load("stuff")    #this sets X to a 2d numpy array containing 
                               #large positive and negative numbers.
ica = FastICA(whiten=False)

#this is a column wise normalization function which flattens the
#two dimensional array from very large and very small numbers to 
#reasonably sized numbers between roughly -1 and 1
X = (X - np.mean(X, axis=0)) / np.std(X, axis=0)

print(np.isnan(X).any())   #this prints False
print(np.isinf(X).any())   #this prints False

ica.fit(X)                 #this works correctly. 
```

## **为什么该规范化步骤可以修复错误？**

我在这里找到了尤里卡时刻：[sklearn 的 PLSRegression: "ValueError: array must not contain infs or NaNs"](https://stackoverflow.com/questions/33447808/sklearns-plsregression-valueerror-array-must-not-contain-infs-or-nans)

我认为正在发生的事情是，numpy 正在被输入巨大的数字和非常小的数字，而在它的小大脑内部，它正在创建 NaN 和 Inf。所以这是sklearn中的一个错误。解决方法是将您的输入数据展平到算法中，以便没有非常大或非常小的数字。

糟糕的sklearn！没有饼干！

# backbone.js - Backbone.js：如何最有效地将共享的 Mustache 模板应用到 View 的 el 中？

> ID：14470014
> 
> 赞同：3
> 
> 时间：2013-01-22T23:35:23.113
> 
> 标签：backbone.js, dry, encapsulation, mustache

Backbone JS 视图非常“有用”，因为它们总是为您创建一个 DOM 节点，带有可配置的标签、id 和类。这是非常好的和包容的，但我发现它造成了一个不幸的情况：**视图创建的 DOM 节点是一个隐藏的模板。**

这对我来说在我们当前的项目中变得很明显，我们在前端和后端之间共享 Mustache 模板。使用 Backbone，当你想要一个看起来像这样的 DOM 时：

```
<section class="note">
  <textarea>
  ...
  </textarea>

  <input type="button" class="save-button" value="Save">
  <input type="button" class="cancel-button" value="Cancel">
</section> 
```

您最终会创建如下所示的模板：

```
<textarea>
{{& content}}
</textarea>

<input type="button" class="save-button" value="Save">
<input type="button" class="cancel-button" value="Cancel"> 
```

但是现在您的模板与 Backbone 视图上的秘密根节点模板相关联，需要在服务器端复制该模板。DRY 封装就这么多！

`setElement()`除了在渲染时使用渲染的模板外，我没有立即看到解决此问题的明显方法，但这会带来其他问题，例如必须在每个`render()`.

你是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:09:21.963

这是一个有趣的问题。我以前从来没有解决过这个特殊问题，但我尝试了一些选项，我想我找到了一个我喜欢的选项。

首先，这是代码：

```
//A base view which assumes the root element of its
//template (string, DOM node or $) as its el.
var RootlessView = Backbone.View.extend({

    //override the view constructor
    constructor: function(options) {

        //template can be provided by constructor argument or
        //as a subclass prototype property
        var template = options.template || this.template;

        //create a detached DOM node out of the template HTML
        var $el = Backbone.$(template).clone()

        //set the view's template to the inner html of the element
        this.template = $el.html(); 

        //set the element to the template root node and empty it
        this.el = $el.empty()[0];

        //call the superclass constructor
        Backbone.View.prototype.constructor.apply(this, arguments);
    }
}); 
```

本质上，您定义了一个基本视图，该视图期望每个派生视图都有一个`template`属性，或者将 a`template`作为选项哈希中的参数。模板可以是字符串、DOM 节点或 jQuery/Zepto 包装的 DOM 节点。视图假定模板的根节点为其`el`，并将`template`属性重新定义为根节点的**内容。**

您可以将其用作普通视图：

```
var View = RootlessView.extend({
    template: templateHtml,
    render: function() {
        this.$el.html(Mustache.render(this.template, this.model));
        return this;
    }
}); 
```

该`el`属性从一开始就可用，并且在重新渲染时不会分离和重新连接。正常`Backbone.View`行为的唯一例外是，如果您定义了`id`、`cssClass`或`tagName`属性或参数，它们将被忽略，因为模板提供了根元素。

这没有经过广泛测试，但似乎通过了最简单的测试用例。我能想到的唯一缺点是`template`html 字符串存储在每个视图实例（而不是原型）上，并且浪费了宝贵的内存字节，但这也不难解决。

这是一个[关于 JSFiddle 的工作演示](http://jsfiddle.net/pkjNA/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:10:22.147

解决方案是将根节点本身（在本例中为您的部分标记）包含在共享基本模板（无子模板）中，然后在实例化时初始化视图的“el”属性：

```
var existingElement = $('section.note')[0];
new View({el: existingElement}) 
```

然后，您可以继续将表单模板照常附加到 el 属性。

# c++ - 如何在 Windows 应用商店应用程序中从 C++ 访问 System.Environment？

> ID：14470016
> 
> 赞同：2
> 
> 时间：2013-01-22T23:35:27.263
> 
> 标签：c++, windows-runtime, c++-cx

我正在尝试调试用 C++ 编写的 Windows (Metro) Store 应用程序中的几个线程之间的死锁，让每个线程在不同点存储它的 ID 会很有帮助，这样我就可以找出每个其他块线程中的哪个线程正在等待。

[.NET for Windows Store 应用程序概述](http://msdn.microsoft.com/en-us/library/windows/apps/br230302)说要使用System 命名空间中的[Environment::CurrentManagedThreadId](http://msdn.microsoft.com/en-us/library/windows/apps/system.environment.currentmanagedthreadid)来访问线程。我原以为我可以简单地写：

```
int threadId = System::Environment::CurrentManagedThreadId; 
```

但是，当我尝试编译 cpp 文件时，Visual Studio 2012 抱怨“'System'：不是类或命名空间名称”。

我是否缺少定义系统命名空间的头文件？我没有看到 System.Environment 或 Environment.CurrentManagedThreadId 网页中列出的任何头文件。

FWIW，Visual Studio 2012 中的对象浏览器向我显示 System.Environment 对象，并且对象浏览器显示它应该具有 CurrentManagedThreadId 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:54:26.777

C++/CX 不针对 .NET。您不能直接从 C++/CX 代码使用 .NET Framework。

您可以使用 Windows API 函数[`GetCurrentThreadId`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183.aspx)来获取当前线程标识符。

# cakephp - CakePHP 会话超时仅在不活动时

> ID：14470018
> 
> 赞同：25
> 
> 时间：2013-01-22T23:35:53.330
> 
> 标签：cakephp, authentication, session-timeout

所以这个问题的关键是如何防止 CakePHP 仅在一段时间不活动后取消对会话的身份验证。

所以，如果用户什么都不做，那么我希望 CakePHP 在 30 分钟后将他们注销。但是，如果用户选择在第 28 分钟不活动时访问页面，那么 CakePHP 应该“重置”它的超时计数器。

这目前没有发生。无论活动如何，CakePHP 在我的核心配置 (app/Config/core.php) 中的指定时间后都会超时。

这是我的配置代码：

```
Configure::write('Session', array(
    'defaults' => 'cake',
    'timeout' => '30'
)); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-21T10:19:12.197

遇到同样的问题后，我发现这是由 Session.cookieTimeout 值引起的。尽管 php 会话仍然有效，但会话 cookie 上的到期日期不会被刷新。

现在这是我的会话配置

```
Configure::write('Session', array(
        'defaults' => 'php',
        'timeout' => 30, // The session will timeout after 30 minutes of inactivity
        'cookieTimeout' => 1440, // The session cookie will live for at most 24 hours, this does not effect session timeouts
        'checkAgent' => false,
        'autoRegenerate' => true, // causes the session expiration time to reset on each page load
    )); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T05:35:38.380

虽然该`timeout`值会在每次网页浏览时重置并因此提供您需要的“不活动超时”，但浏览器的会话 cookie 到期日期保持不变。

因此，如果您在第 28 分钟 + 第 35 分钟刷新，Cake 会话将在内部（内部 = Cake 内部）仍然存在，但浏览器最终会在第 30 分钟后删除会话 cookie。

您可以通过 重置会话 cookie 到期日期`$this->Session->renew()`。或者设置`autoRegenerate = true`和`requestCountdown = 1`蛋糕将在每次浏览量上更新。

（但是，您必须在每次页面查看时重新生成会话，这有点愚蠢。因为，如果没有`renew()`，该`timeout`值将永远不会发挥作用，因为无论有多少活动，cookie 都会在固定日期过期。这似乎就像一个错误，但我还没有研究过解决方法。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T04:03:46.507

我遇到了同样的问题，我使用以下`autoRegenerate`选项修复了它：

```
Configure::write(
    'Session',
    array(
        'defaults' => 'cake',
        'timeout' => '30',
        'autoRegenerate' => true
    )
); 
```

你也可以`$this->Session->renew();`在你的`AppController.php`课堂上使用，但上面的解决方案是我最喜欢的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-06T07:51:13.573

Rob Forrest 的答案是正确的

```
Configure::write('Session', array(
        'defaults' => 'php',
        'timeout' => 30, // The session will timeout after 30 minutes of inactivity
        'cookieTimeout' => 1440
)); 
```

如果您希望会话仅在不活动时过期，则 cookieTimeout 应该大于 timeout 然后您需要将 cookieTimeout 设置为非常大的数字（例如 60*24*10（10 天））

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-20T09:29:31.453

```
 Configure::write('Session', array(
    'defaults' => 'cake',
    'timeout' => 1440, // The session will timeout after 30 minutes of inactivity
    'cookieTimeout' => 1440, // The session cookie will live for at most 24 hours, this does not effect session timeouts
    'checkAgent' => false,
    'autoRegenerate' => true, // causes the session expiration time to reset on each page load
)); 
```

这很有效，尽管会话在几个小时后结束，但它仍然比在几分钟内结束要好。

# html - 缩放时不尊重 CSS 100%

> ID：14470019
> 
> 赞同：3
> 
> 时间：2013-01-22T23:35:55.057
> 
> 标签：html, css

我想在整个屏幕上以 100% 的宽度有一个黄色矩形**#box-over 。**在**Google Chrome**上的默认缩放级别（我没有尝试过所有浏览器）它工作正常，除非我放大超过 300% 左右然后那个黄色框不再是它被剪裁的屏幕的 100% 并且水平滚动条出现在底端。我似乎无法弄清楚如何解决这种行为。

**JSFIDDLE** [http://jsfiddle.net/VySGL/1/](http://jsfiddle.net/VySGL/1/)

**截屏** ![在此处输入图像描述](../Images/7611a659d4d4d0c07be984c18f2c85c7.png)

**来源**

```
 <style type="text/css">
        body {
            padding: 0;
            margin: 0;
            background-color: black;
        }

        #box {
            width: 100%;
            position: relative;
        }

        #box #box-over {
            z-index: 1;
            width: 100%;
            height: 50px;
            background-color: yellow;
            position: absolute;
            top:10px;
            opacity:0.8;

        }           

        #box #box-over .box-column {
            width: 900px;
            margin: 0 auto;
            zoom: 1;
            position: relative;
            height: 50px;
        }
        </style>

    </head>
    <body>

        <div id="box">
            <div id="box-over">
                <div class="box-column">
                </div>
            </div>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:56:50.243

使用 100% 宽度的另一种方法是在 CSS 中将 left 和 right 设置为 0，如下所示......

见[JSFiddle](http://jsfiddle.net/VySGL/4/)

```
#box #box-over {
    z-index: 1;
    left: 0;
    right: 0;
    height: 50px;
    background-color: yellow;
    position: absolute;
    top:10px;
    opacity:0.8;

}           

#box #box-over .box-column {
    left: 0;
    right: 0;
    margin: 0 auto;
    zoom: 1;
    position: absolute;
    height: 50px;
} 
```

使用 left 和 right 属性可确保即使添加填充时也不会超过 100% 的宽度（请参阅[此 JSFiddle](http://jsfiddle.net/VySGL/6/)）。

例如，当您向 div 添加填充时，它将是 100% 加上填充。见[JSFiddle](http://jsfiddle.net/VySGL/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:41:10.350

缩放时，您的内部`900px`div 会溢出外部 div 的宽度。`100%`你可以给`max-width:100%`一个`.box-column`：

```
#box #box-over .box-column {
    [...]
    max-width: 100%;
} 
```

[**小提琴**](http://jsfiddle.net/VySGL/2/)

这将强制内部 div 尊重容器的宽度。

另一种解决方案是将`#box-over`'s设置`overflow`为`hidden`或`scroll`。这样，内部 div`900px`的宽高比仍然相等。

# android - 使用较少内存加密/解密大文件的最佳实践

> ID：14470025
> 
> 赞同：6
> 
> 时间：2013-01-22T23:36:53.113
> 
> 标签：android, encryption, rsa

我想开发一个 Android 应用程序，用于使用 RSA 和一些对称加密算法加密和解密大文件（~500Mb）。我怎样才能做到这一点？在只有几 MB RAM 的设备上使用的最佳解决方案是什么？

问候鲍比

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T23:52:44.920

[CipherInputStream](http://developer.android.com/reference/javax/crypto/CipherInputStream.html)和[CipherOutputStream](http://developer.android.com/reference/javax/crypto/CipherOutputStream.html)允许您使用流进行加密/解密。这应该让您处理大文件大小而不会出现太多内存问题。听起来您已经通过对称和非对称算法的组合[走上了正确的道路，因为单独的 RSA 无法处理大量数据。](https://stackoverflow.com/questions/1199058/how-to-use-rsa-to-encrypt-files-huge-data-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:02:04.257

也许您想考虑将文件分解为较小的数据块并相应地对其进行加密。

请参阅： [使用“灾难恢复”在内存和存储受限的系统上加密和/或解密大文件 (AES)](https://stackoverflow.com/questions/11300128/encrypting-and-or-decrypting-large-files-aes-on-a-memory-and-storage-constrain)

我不确定您的要求，但另一种方式是不要在设备上加密！只需将密钥存储在设备上，您的后端就可以完成繁重的工作，但它需要从设备中获取密钥才能解密，这是您的 Android 应用程序将处理发送部分的地方。

# sql - ActiveRecord：不能在 `where` 子句后使用 `pluck` 与急切加载的关联

> ID：14470027
> 
> 赞同：12
> 
> 时间：2013-01-22T23:37:15.750
> 
> 标签：sql, ruby-on-rails-3, activerecord, arel

我有一个有多个`Post`模型的应用程序，每个模型都有`belongs_to`一个`User`模型。当这些帖子发布时，`PublishedPost`会创建一个模型来表示`belongs_to`相关`Post`模型。

我正在尝试构建一个 ActiveRecord 查询以查找与用户名匹配的已发布帖子，然后获取这些已发布帖子的 ID，但是当我`pluck`在急切加载我的关联和搜索后尝试使用该方法时出现错误他们用`where`方法。

这是我的控制器的（部分）：

```
class PublishedPostsController < ApplicationController

  def index
    ar_query = PublishedPost.order("published_posts.created_at DESC")

      if params[:searchQuery].present?
        search_query = params[:searchQuery]
        ar_query = ar_query.includes(:post => :user)
                           .where("users.name like ?", "%#{search_query}%")
      end

    @found_ids = ar_query.pluck(:id)

  ...

  end

end 
```

调用该`pluck`方法时，我得到以下信息：

```
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'users.name' in 'where clause': SELECT id FROM `published_posts`  WHERE (users.name like '%Andrew%') ORDER BY published_posts.created_at DESC 
```

我可以得到我正在寻找的结果

```
@found_ids = ar_query.select(:id).map{|r| r.id} 
```

但我宁愿使用`pluck`它，因为它似乎是更清洁的方式。不过，我不知道为什么它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T20:18:20.603

您需要并且应该这样做`joins`而不是在`includes`这里。

这两个函数非常相似，只是`joins`查询结果中不返回 from 的数据，而 an 中的数据`includes`是。

在这方面，`includes`并且`pluck`是一种对立的。一个说尽可能把所有数据都还给我，而另一个说只给我一点点。

由于您只需要少量数据，因此您想做`joins`. （奇怪的是，这似乎有点对立仍然有效，但在这种情况下`select`，您需要消除歧义。）`id`

在控制台中尝试一下，您会发现这`includes`会导致查询看起来像这样：`SELECT "posts"."id" as t0_ro, "posts"."text" as t0_r1, "users"."id" as t1_r0, "users"."name" as t1_r1 ...`当您添加一条`pluck`语句时，所有那些疯狂的 tx_ry 列都会消失，并被您指定的任何内容替换。

我希望这会有所帮助，但如果不是，也许这个 RailsCast 可以。它在 5 分钟左右进行解释。

[http://railscasts.com/episodes/181-include-vs-joins](http://railscasts.com/episodes/181-include-vs-joins)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-30T20:44:50.903

如果您通过搜索“rails pluck ambiguous column”来到这里，您可能想知道您可以替换`query.pluck(:id)`为：

```
query.pluck("table_name.id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T22:51:48.370

即使没有 pluck 调用，您的查询也不会像它所写的那样工作。

原因是，您的 WHERE 子句包括引用用户表的文字 SQL，Rails 没有注意到并决定使用多个查询并加入内存（ .preload() ）而不是加入数据库级别（ .eager_load() ）：

```
SELECT * from published_posts WHERE users.name like "pattern" ORDER BY published_posts.created_at DESC
SELECT * from posts WHERE id IN ( a_list_of_all_post_ids_in_publised_posts_returned_above )
SELECT * from users WHERE id IN ( a_list_of_all_user_ids_in_posts_returned_above ) 
```

3 个查询中的第一个失败，这是您得到的错误。

要强制 Rails 在此处使用 JOIN，您应该使用显式的 .eager_load() 而不是 .includes()，或者添加一个 .references() 子句。

除此之外，@Geoff 回答的内容是，您实际上并不需要 .includes() ，而是需要 .joins()。

# java - java中的数字格式

> ID：14470034
> 
> 赞同：1
> 
> 时间：2013-01-22T23:38:13.893
> 
> 标签：java, formatting, string-formatting

有没有办法在java中对String的double格式进行格式化，我希望输出为：

预期输出：

如果 n=12.4 => 12.4
如果 n=12.0 -> 12

我正在使用 String.valueof(n) 并返回 Current output:
if n=12.4 => 12.4
if n=12.0 => 12.0

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T23:41:00.037

您可以使用`DecimalFormat`：

```
System.out.println(new DecimalFormat("0.#").format(12.0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:42:29.480

前段时间我写了这个，效果很好

```
 public static String formattedDouble(double d)
    {
        Long l = (d == Math.floor(d)) ? (long)d : null;
        String str = "";
        if (l == null)
            str += d;
        else
            str += l;
        return str;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:42:32.003

将双精度格式设置为带两位小数的字符串，使用这样的代码

```
String.format("%1$,.2f", doubleValue) 
```

对于 int 使用这个

```
String.format("%d", intValue ); 
```

# excel - 需要帮助excel中的if语句

> ID：14470035
> 
> 赞同：-1
> 
> 时间：2013-01-22T23:38:15.473
> 
> 标签：excel, if-statement

我正在尝试创建一个 if 语句，它将检查主表中某些内容的值，然后根据答案转到第二张表并选择正确的答案。如果我能得到帮助来确定最终包含 abs 函数的值，这也会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:48:22.590

实际上，如果没有像其他论坛那样附加电子表格，很难解释，无论如何，让我们尝试一下。

假设 1）在 sheet2 中，您有一个引用 sheet1 的 A 列的数据列表，并且要检索到 Sheet2 的值在 sheet1 的 B 列中 2）然后输入 vlookup 以从 sheet1 获取数据，因此在单元格 C2 sheet2 使用这个 =vlookup(..................................) 3) 你想检查是否此结果小于 0，然后将其更改为正值，因此使用此函数 =if(vlookup(B2,Sheet1!A:B,2,0)<0,abs(vlookup(B2,Sheet1!A:B,2 ,0)),vlookup(B2,Sheet1!A:B,2,0))

# php - MYSQL 更新使用 sum() 结果跨多个表

> ID：14470041
> 
> 赞同：15
> 
> 时间：2013-01-22T23:38:33.250
> 
> 标签：php, mysql, sql, pdo

这个位工作得很好：

```
 SELECT products_id, sum(attributes_stock) 
 FROM products_attributes 
 GROUP BY products_id 
```

它将`attributes_stock`列中的所有字段组加在一起。

我遇到的问题是让这个结果更新另一个表中的另一个列。

这就是我所拥有的：

```
 UPDATE products, products_attributes 
 SET products.products_quantity = sum(products_attributes.attributes_stock) GROUP BY products_attributes.products_id 
 WHERE products.products_id = products_attributes.products_id 
```

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T23:43:46.537

您不能`group by`在更新语句中使用内部。您需要使用子选择来进行分组。

像这样的东西：

```
UPDATE products p,( SELECT products_id, sum(attributes_stock)  as mysum
                   FROM products_attributes GROUP BY products_id) as s

   SET p.products_quantity = s.mysum
  WHERE p.products_id = s.products_id 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T00:12:35.423

有些人更喜欢连接操作的新式`JOIN ... ON`语法，而不是 WHERE 子句中的逗号运算符和连接谓词：

```
UPDATE products p
  JOIN ( SELECT q.products_id
              , SUM(q.attributes_stock) AS sum_attr
           FROM products_attributes q
          GROUP BY q.products_id
       ) r
    ON r.products_id = p.products_id
   SET p.products_quantity = r.sum_attr 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T23:46:52.593

试试这个：

```
update 
    products, 
    (select 
        products_id, sum(attributes_stock) as sumAttr
     from products_attributes
     group by products_id) as a
set
    products.products_cuantity = a.sumAttr
where
    products.products_id = a.products_id 
```

# ruby - 使用thin时如何选择证书授权文件？

> ID：14470042
> 
> 赞同：1
> 
> 时间：2013-01-22T23:38:34.490
> 
> 标签：ruby, ssl, thin, certificate-authority

我知道我可以选择使用 验证客户端`--ssl-verify`，但是如何指定要使用的 CA 链？我习惯于提供一个文件（比如 curl`--cacert`或 WEBrick 的`:SSLCACertificateFile`），所以我已经准备好了，但我似乎找不到关于如何将它传递给`thin`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:39:05.410

简短的回答：你不能。

长答案：你可以，但你必须更新 EventMachine 的 C++ 扩展来构建 ssl 连接，并通过 EventMachine 和 Thin 更新调用堆栈以传递证书颁发机构文件。

我是如何发现的：源代码！都在github上

*   Thin 的命令行选项被解析为`thin:lib/thin/runner.rb`

    ```
    opts.separator "SSL options:"

    opts.on(      "--ssl", "Enables SSL")                                           { @options[:ssl] = true }
    opts.on(      "--ssl-key-file PATH", "Path to private key")                     { |path| @options[:ssl_key_file] = path }
    opts.on(      "--ssl-cert-file PATH", "Path to certificate")                    { |path| @options[:ssl_cert_file] = path }
    opts.on(      "--ssl-verify", "Enables SSL certificate verification")           { @options[:ssl_verify] = true } 
    ```

*   然后用于创建控制器

    ```
    controller = case
    when cluster? then Controllers::Cluster.new(@options)
    when service? then Controllers::Service.new(@options)
    else               Controllers::Controller.new(@options)
    end 
    ```

*   在`thin:lib/controllers/controller.rb`ssl 选项中被拉回与服务器对象一起存储

    ```
    # ssl support
    if @options[:ssl]
      server.ssl = true
      server.ssl_options = { :private_key_file => @options[:ssl_key_file], :cert_chain_file => @options[:ssl_cert_file], :verify_peer => @options[:ssl_verify] }
    end 
    ```

*   最后用于初始化与客户端的连接

    ```
    def initialize_connection(connection)
      connection.backend                 = self
      connection.app                     = @server.app
      connection.comm_inactivity_timeout = @timeout
      connection.threaded                = @threaded

      if @ssl
        connection.start_tls(@ssl_options)
      end 
    ```

*   这个连接是一个`EventMachine::Connection`，定义在`eventmachine:lib/em/connection.rb`. `EventMachine::Connection#start_tls`将参数传递给`EventMachine::set_tls_parms`.

    ```
    def start_tls args={}
      priv_key, cert_chain, verify_peer = args.values_at(:private_key_file, :cert_chain_file, :verify_peer)

      [priv_key, cert_chain].each do |file|
        next if file.nil? or file.empty?
        raise FileNotFoundException,
        "Could not find #{file} for start_tls" unless File.exists? file
      end 

      EventMachine::set_tls_parms(@signature, priv_key || '', cert_chain || '', verify_peer)
      EventMachine::start_tls @signature
    end 
    ```

*   `EventMachine::set_tls_parms`是 C++ 扩展的一部分，定义`eventmachine:ext/rubymain.cpp`为五参数 C 函数`t_set_tls_parms`

    ```
    rb_define_module_function (EmModule, "set_tls_parms", (VALUE(*)(...))t_set_tls_parms, 4); 
    ```

*   并`t_set_tls_parms`在同一文件中的其他地方定义只是将 ssl 选项传递给`evma_set_tls_parms`.

    ```
    static VALUE t_set_tls_parms (VALUE self, VALUE signature, VALUE privkeyfile, VALUE certchainfile, VALUE verify_peer)
    {
      /* set_tls_parms takes a series of positional arguments for specifying such things
       * as private keys and certificate chains.
       * It's expected that the parameter list will grow as we add more supported features.
       * ALL of these parameters are optional, and can be specified as empty or NULL strings.
       */
      evma_set_tls_parms (NUM2ULONG (signature), StringValuePtr (privkeyfile), StringValuePtr (certchainfile), (verify_peer == Qtrue ? 1 : 0));
      return Qnil;
    } 
    ```

*   vanilla C 函数`evma_set_tls_parms`在`eventmachine:ext/cmain.cpp`. 它将 ssl 选项传递给`EventableDescriptor`'s`SetTlsParms`方法：

    ```
    extern "C" void evma_set_tls_parms (const unsigned long binding, const char *privatekey_filename, const char *certchain_filename, int verify_peer)
    {
      ensure_eventmachine("evma_set_tls_parms");
      EventableDescriptor *ed = dynamic_cast <EventableDescriptor*> (Bindable_t::GetObject (binding));
      if (ed)
        ed->SetTlsParms (privatekey_filename, certchain_filename, (verify_peer == 1 ? true : false));
    } 
    ```

*   该`SetTlsParms`实例方法在 中定义`eventmachine:ed.cpp`，它真正做的只是将 ssl 选项缓存在一些实例变量中。

    ```
    void ConnectionDescriptor::SetTlsParms (const char *privkey_filename, const char *certchain_filename, bool verify_peer)
    {
      #ifdef WITH_SSL
      if (SslBox)
        throw std::runtime_error ("call SetTlsParms before calling StartTls");
      if (privkey_filename && *privkey_filename)
        PrivateKeyFilename = privkey_filename;
      if (certchain_filename && *certchain_filename)
        CertChainFilename = certchain_filename;
      bSslVerifyPeer = verify_peer;
      #endif

      #ifdef WITHOUT_SSL
      throw std::runtime_error ("Encryption not available on this event-machine");
      #endif
    } 
    ```

*   这些实例变量稍后在`StartTls`实例方法中使用（在同一个文件中定义），并传递给初始化一个新的`SslBox_t`

    ```
    void ConnectionDescriptor::StartTls()
    {
      #ifdef WITH_SSL
      if (SslBox)
        throw std::runtime_error ("SSL/TLS already running on connection");

      SslBox = new SslBox_t (bIsServer, PrivateKeyFilename, CertChainFilename, bSslVerifyPeer, GetBinding());
      _DispatchCiphertext();
      #endif 
    ```

*   构造`SslBox_t`函数在 中定义`eventmachine:ext/ssl.cpp`，它使用 ssl 选项来初始化一个新的`SslContext_t`.

    ```
    SslBox_t::SslBox_t (bool is_server, const string &privkeyfile, const string &certchainfile, bool verify_peer, const unsigned long binding):
      bIsServer (is_server),
      bHandshakeCompleted (false),
      bVerifyPeer (verify_peer),
      pSSL (NULL),
      pbioRead (NULL),
      pbioWrite (NULL)
    {
      /* TODO someday: make it possible to re-use SSL contexts so we don't have to create
       * a new one every time we come here.
       */

      Context = new SslContext_t (bIsServer, privkeyfile, certchainfile);
      assert (Context); 
    ```

*   构造`SslContext_t`函数在同一个文件中定义，它使用标准 OpenSSL C 绑定的这些选项：

    ```
    // The SSL_CTX calls here do NOT allocate memory.
    int e;
    if (privkeyfile.length() > 0)
      e = SSL_CTX_use_PrivateKey_file (pCtx, privkeyfile.c_str(), SSL_FILETYPE_PEM);
    else
      e = SSL_CTX_use_PrivateKey (pCtx, DefaultPrivateKey);
    if (e <= 0) ERR_print_errors_fp(stderr);
    assert (e > 0);

    if (certchainfile.length() > 0)
      e = SSL_CTX_use_certificate_chain_file (pCtx, certchainfile.c_str());
    else
      e = SSL_CTX_use_certificate (pCtx, DefaultCertificate);
    if (e <= 0) ERR_print_errors_fp(stderr);
    assert (e > 0); 
    ```

所以现在我们知道了如何使用 ssl 选项。如果调用链被修改为将 CA 文件名连同其余部分一起传递到这一点，例如 as `const string &certauthfile`，我们可以再使用几个 OpenSSL 调用来添加授权文件：

```
if (certauthfile.length() > 0)
  e = SSL_CTX_load_verify_locations(pCtx, certauthfile.c_str(), NULL);
else
  ;// no default necessary
if (e <= 0) ERR_print_errors_fp(stderr);
assert (e > 0); 
```

提交一个补丁来做这件事留给有足够动力的人练习。

# sql-server - 如何从对 OPENROWSET 的动态调用中取回数据？

> ID：14470044
> 
> 赞同：1
> 
> 时间：2013-01-22T23:38:41.347
> 
> 标签：sql-server, tsql, sql-server-2008-r2, openrowset

T-SQL`OPENROWSET()`函数的一个奇怪属性是它不能接受远程执行的“查询”中的参数。为了解决这个问题，我猜你必须创建一个包含`OPENROWSET`调用和参数化查询的长字符串。

鉴于这个限制，我试图让这段代码工作：

```
Declare @DataId int
Declare @RecordType varchar(50)
Declare @Filter varchar(50)

 -- ...

SELECT TOP 1 
    @RecordType = recordType,
    @DataId = DataId
FROM OPENROWSET('SQLNCLI', 
                'Server=MyServer;Trusted_Connection=yes;',
                'SELECT recordType, DataId FROM MyDb..data_lookup
                 WHERE Filter = ''' + @Filter+'''') 
```

这会引发错误

> '+' 附近的语法不正确

现在，鉴于对 OPENROWSET 的限制，这是有道理的。**但是如果我将它转换为 SQL 字符串，我会不会失去设置`@RecordType`和`@DataId`查询结果的能力？**

有没有什么语法糖可以撒在上面来绕过限制并使这项工作按我想要的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:48:31.473

下面是一些动态构建字符串的示例：

[http://support.microsoft.com/kb/314520](http://support.microsoft.com/kb/314520)

您可以先插入表变量，然后从那里提取值。

```
DECLARE @t TABLE (DataID int, RecordType varchar(50))
INSERT INTO @t
exec sp_executeSQL N'your OPENROWSERT query'

SELECT TOP 1 @DataID = DataID, @RecordType = RecordType
FROM @t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:21:13.453

感谢@Stuart，这是我最终使用的代码：

```
Declare @DataId int
Declare @RecordType varchar(50)
Declare @Filter varchar(50)

Declare @query nvarchar(4000)
 -- ...

select @query = N'select top 1 recordType, DataId
                 from openrowset(''SQLNCLI'', 
                                 ''Server=MyServer;Trusted_Connection=yes;'',
                                 ''SELECT recordType, DataId from MyDb..data_lookup
                                  where Filter = ''''' + @Filter+''''''')'
declare @t TABLE (recordType varchar(2), DataId int)

insert into @t
exec sp_executeSQL @Query

select top 1 @RecordType = recordType, @DataId = DataId
from @t 
```

# c# - 在 MVC Asp.net 中呈现部分视图后，是否可以启动 javascript 函数？

> ID：14470046
> 
> 赞同：9
> 
> 时间：2013-01-22T23:38:43.793
> 
> 标签：c#, asp.net-mvc, devexpress, asp.net-mvc-partialview

让我以我对 MVC 非常陌生这一事实作为这个问题的序言。

我有一个实例，我在局部视图中渲染 devexpress 网格。

```
@Html.Partial("MyGridPartial", Model) 
```

在通过此部分视图渲染填充模型的那一刻，我需要启动一个 javascript 函数。我试图通过这个来做到这一点。：

```
settings.ClientSideEvents.EndCallback 
```

我可以做到这一点，但当时我没有填充模型本身，所以它没有用。我想知道是否有人知道踢/附加到部分视图渲染以跳转到一些客户端javascript代码的通用方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T00:47:39.593

如果它是您在服务器上的视图中呈现的 PartialView，那么 Dave 的方法效果最好。只需将您的代码连接到 DOM 就绪事件。

```
$(document).ready(function(){
    //Javascript logic to fire goes here
}); 
```

或者如果您使用速记版本...

```
$(function(){
    //Javascript logic to fire goes here
}); 
```

如果您正在渲染通过 Ajax 加载的局部视图，那么同样的方法将起作用。如果我没记错的话，一旦它附加到 DOM，jQuery 将在通过 Ajax 传递回客户端的 html 中运行 javascript（随意测试一下，我只是凭记忆了解它一旦附加到 DOM 就会触发，但我相信这一点是该`load()`方法的一个特性），假设您要运行的 javascript 在响应中。如果它在发送 Ajax 请求的父页面中，那么您最好将其连接到完整事件。（我在这里填充客户端的参数）

```
$("#wrapperAwaitingContent").load("/Grids/MyGridPartial", {id: null /*parameters*/}, function(text, status, xhr){
    //Javascript logic to fire goes here
}); 
```

对我来说，调用中使用的 url`.load()`是使用服务器上的 UrlHelper 解析的

```
$("#wrapperAwaitingContent").load("@Url.Action("MyGridPartial", "Grids")", {id: null /*parameters*/}, function(text, status, xhr){
    //Javascript logic to fire goes here
}); 
```

您还可以选择使用 Unobtrusive Ajax 执行类似的操作。（我在这里填充服务器端的参数）

```
@Ajax.ActionLink("Load Data", "MyGridPartial", "Grids", new { id = null/*parameters*/ }, new AjaxOptions() { UpdateTargetId = "wrapperAwaitingContent", OnComplete="onCompleteMethodName" }) 
```

除了接收 HTML 的元素和完成时调用的方法之外，您还可以为 AjaxOptions 设置更多属性，但我发现我将重用在共享 javascript 文件中定义的函数并仅在尚未填充它们时填充它们从那里，像这样的东西......

```
$("a[data-ajax='true']").each(function () {
    var ajaxUpdate = $(this).closest("data-ajax-container");
    $(this).attr("data-ajax-update", $(this).attr("data-ajax-update") ? $(this).attr("data-ajax-update") : ajaxUpdate);
    $(this).attr("data-ajax-mode", $(this).attr("data-ajax-mode") ? $(this).attr("data-ajax-mode") : "replace");
    $(this).attr("data-ajax-success", $(this).attr("data-ajax-success") ? $(this).attr("data-ajax-success") : "AjaxSuccess");
    $(this).attr("data-ajax-complete", $(this).attr("data-ajax-complete") ? $(this).attr("data-ajax-complete") : "AjaxComplete");
    $(this).attr("data-ajax-failure", $(this).attr("data-ajax-error") ? $(this).attr("data-ajax-error") : "AjaxError");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T00:04:23.207

如果您将此部分渲染为正在渲染的视图的正常流程的一部分，则答案是否定的。

这样做的原因是在父视图被渲染之前，Partial 被转换为字符串。那时，浏览器还没有看到您的任何标记，也没有读取任何 jscript。

另一方面，如果您在 JQuery Ready 函数中呈现了部分：

`$(document).ready(function() {`

我认为您需要使用 Action Partial（由操作方法调用的 Partial）。Action Partials 可以通过引用 url 在你的 JQuery Ready 函数中调用（安静地）：

```
$('#divMyGridPartial').load('/Grids/MyGridPartial/{id}'); 
```

任何后续的 jscript/jquery 函数都可以在 ready 系列中调用。

Action Partial 的另一个优点是，模型是在 action 方法中形成的，并且可以根据您的需要根据上下文创建（理想情况下关闭传递的 id）。

# mysql - Joomla 网站因 Joomla 核心代码中的 PHP 代码而崩溃

> ID：14470049
> 
> 赞同：0
> 
> 时间：2013-01-22T23:39:10.920
> 
> 标签：mysql, joomla, joomla2.5, joomla-extensions

当我试图将我的 joomla 网站上的内容保存到数据库时，它有时会因这些警告而崩溃……这似乎是 Joomla 核心代码的一部分。它通常可以很好地保存在数据库中，但它最近开始向我抛出这些错误.. 有人可以帮我提供有关如何解决此问题的提示吗？这是我正在从事的一个项目，我想启动很快...当网站的加载速度很慢时似乎会发生...

```
Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/includes/application.php on line 465

Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/libraries/joomla/database/database/mysql.php on line 383

Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/libraries/joomla/database/database/mysql.php on line 383

Warning: Invalid argument supplied for foreach() in /home/content/72/9959172/html/libraries/joomla/database/table.php on line 406 
```

昨天它也给了我这个错误..它从来没有做过什么，但是由于某种原因，当网站加载缓慢时，它会触发错误..我真的很感激有关如何解决这个问题的提示。我无法启动这样的网站。我的主机是 Godaddy，我使用共享主机。

```
Error loading module MySQL server has gone away SQL=SELECT m.id, m.title, m.module, m.position, m.content, m.showtitle, m.params, mm.menuid FROM pwo3d_modules AS m LEFT JOIN pwo3d_modules_menu AS mm ON mm.moduleid = m.id LEFT JOIN pwo3d_extensions AS e ON e.element = m.module AND e.client_id = m.client_id WHERE m.published = 1 AND e.enabled = 1 AND (m.publish_up = '0000-00-00 00:00:00' OR m.publish_up <= '2013-01-22 04:58:42') AND (m.publish_down = '0000-00-00 00:00:00' OR m.publish_down >= '2013-01-22 04:58:42') AND m.access IN (1,1,2,3) AND m.client_id = 0 AND (mm.menuid = 207 OR mm.menuid <= 0) ORDER BY m.position, m.ordering 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:10:35.537

看看服务器日志，你可能内存不足；如果没有，请下载并应用 Joomla 更新以确保您的文件没有损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-27T22:26:37.230

在 Godaddy Cpanel 页面中，进入 PHP 版本，您可以在此处更改 PHP 版本。Joomla 和 Godaddy 的 PHP 版本问题由来已久。这很容易修复。更改生效大约需要 20 - 45 分钟。我更改为 5.5，它现在可以正常工作了。

# ios - 以前发布的获取通知的解决方案（在 NSOperationQueue 完成所有任务上）对我不起作用

> ID：14470052
> 
> 赞同：0
> 
> 时间：2013-01-22T23:39:22.840
> 
> 标签：ios, asynchronous, afnetworking, key-value-observing, nsoperationqueue

[当 NSOperationQueue 完成所有任务时获取通知](https://stackoverflow.com/questions/1049001/get-notification-when-nsoperationqueue-finishes-all-tasks)

我和@porneL 在上面的帖子中发布的问题相同。我尝试了@NickForge 发布的解决方案（获得 57 票），但我显然做错了，因为它对我不起作用。这是问题设置和我的实现：

我需要在启动一组 Web 服务操作之前启动一个微调器，并在它们完成后停止微调器。Web 服务通过一个共享`AFHTTPClient`实例（AFNetworking 包的一部分）调用，该实例将它们添加到其`NSOperationQueue`.

我在 ViewController 中设置了一个观察者，从中开始数据加载。使用上述帖子的答案做到了这一点。我的 VC 中的实现如下所示：

在我的 ViewController 的`init`方法中：

```
//add WelcomeVC as an observer for AFHTTPClient dataloadOps notifications
[[[MyCustomAFHTTPClient sharedClient] operationQueue] addObserver:self forKeyPath:@"DataLoaderEvent" options:0 context:NULL]; 
```

在我的 ViewController 的`observeValueForKeyPath`方法中：

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if( (object == [[MyCustomAFHTTPClient sharedClient] operationQueue])
       && [keyPath isEqualToString:@"DataLoaderEvent"]) {

        if ( [[[MyCustomAFHTTPClient sharedClient] operationQueue] operationCount] == 0) {

            NSLog(@"EUREKA!!! QUEUE IS EMPTY! DATALOAD HAS COMPLETED!");
        }

    }
} 
```

然而，ViewController 的`observeValueForKeyPath`方法永远不会被调用！

非常感谢任何帮助来完成这项工作，这样我就可以完成微调器的实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:55:23.990

operationQueue 是否有一个名为 DataLoaderEvent 的属性？通常人们会监视 NSOperationQueue 的“operationCount”属性。

请参阅[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004592](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004592)

“NSOperationQueue 类是键值编码 (KVC) 和键值观察 (KVO) 兼容的。您可以根据需要观察这些属性来控制应用程序的其他部分。您可以观察的属性包括以下内容：

操作 - 只读属性

operationCount - 只读属性”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T15:56:28.073

试试这个：

```
[operation setCompletionBlock: ^{
    NSLog(@"Finished an image.");
}]; 
```

# ruby-on-rails - Highcharts 不适用于 wicked_pdf

> ID：14470055
> 
> 赞同：6
> 
> 时间：2013-01-22T23:39:34.297
> 
> 标签：ruby-on-rails, web, highcharts, wicked-pdf, lazy-high-charts

我正在尝试使用 Wicked_pdf gem 和 Highcharts 生成 PDF 报告。我已经尝试设置`animation`,`enableMouseTracking`和`shadow`false 。但是当 wkh​​tmltopdf 尝试生成 PDF 文件时，我得到了一个错误。

我真的不知道该怎么做，因为当我对 HTML 执行相同的过程时，Highcharts 会完美呈现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:51:35.390

我通过设置以下选项来修复它：

```
plotOptions:
  line:
    animation: false
    enableMouseTracking: false
    shadow: false 
```

另外，不要忘记包含 JQuery 并内联您的样式和脚本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T06:40:51.323

尝试设置这个：

```
series: { 'enableMouseTracking: false, shadow: false, animation: false' : nil} 
```

这个解决方案对我有用。我有一个 pdf 视图和一个 html 视图，实现的解决方案有：

```
<more highchart options>
...
plotOptions: {
                  line: {
                    marker: {
                      enabled: false
                    },
                    dashStyle: 'ShortDash'
                  },
                  series: { #{request.format == 'pdf' ? 'enableMouseTracking: false, shadow: false, animation: false' : nil} }
                },
...
<more highchart options> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T12:17:34.777

**尝试在[QtWeb 浏览器](http://www.qtweb.net/download.html)中调试。**

**[在此处](http://qtweb.net/pages/ibr9600.html)调试 Qt 中的 javascript 的说明**

*您可能会发现您的 javascript 包含不受支持的语法或关键字，这会导致上述问题。*

wkhtmltopdf 使用的 Qt WebKit 渲染引擎不支持[ES2015](http://www.ecma-international.org/ecma-262/6.0/)，所以你可能有像我这样的简单解决方案，就是替换关键字`let`and `const`。

# iphone - 苹果手机。在实时多人游戏中使用 Open GL ES 而不是 Core Graphics 的好处？

> ID：14470068
> 
> 赞同：0
> 
> 时间：2013-01-22T23:41:50.340
> 
> 标签：iphone, ios, opengl-es, core-graphics, quartz-2d

我正在开发类似游戏的实时多人游戏版本。这就像画一些东西，除了有 4 名玩家而不是回合制。

在这种情况下，在 OpenGL ES vs CoreGraphics (Quatz 2D) 中编写我的绘图算法有什么好处，因为我必须通过网络在 4 个玩家之间共享它？或者就性能而言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:57:26.337

从我自己的游戏开发经验来看……主要原因是性能。简单的 2D 游戏使用核心图形非常慢，使用 OpenGL ES (1.1) 非常快。

图像的定位有很多问题，瓷砖之间有奇怪的线条，但最后我们设法解决了这一切。实际上，我们构建了一个与核心图形非常相似的小型函数库，只是更简单、更快。

此外，OpenGL 的可移植性很简单，Core Graphics 是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:47:12.887

CoreGraphics 仅适用于苹果产品。OpenGL 可能会适应不同的平台。我会说表演也应该更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:47:52.717

核心图形不是为快速、实时的绘图或屏幕更新而设计的。它是为高质量的艺术作品而设计的，而 OpenGL 是为快速性能而设计的，尽管使用 OpenGL 获得高质量的视觉效果可能会更具挑战性。这是性能和渲染视觉质量之间的权衡。

# php - 使用 php 和 mysql 在谷歌地图上使用多标记

> ID：14470069
> 
> 赞同：1
> 
> 时间：2013-01-22T23:41:53.983
> 
> 标签：php, mysql, google-maps

这是我的代码链接访问[https://www.dropbox.com/s/1j0qc2uyp8vm9xj/map_user.php](https://www.dropbox.com/s/1j0qc2uyp8vm9xj/map_user.php)，此代码不起作用。我使用 JSON 在 mysql 中获取数据数组，然后将其回显到 javascript，但是当我尝试运行它时，我只看到一张灰色地图。谁能帮我？

```
<?php
include('lock.php');
include('function/query.php');
?>
<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>USER MAPS AND UPDATES</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
</head> 
<body>
  <div id="map" style="width: 500px; height: 400px;"></div>
  <?php
  $x = 0;
  $query  = "SELECT lat,lng FROM messages WHERE uid_fk='1'";
  $result = mysql_query($query);
  while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
     $data[$x] = array("lat" => $row['lat'], "lng" => $row['lng']);
     $x++;
   }
  ?>
  <script type="text/javascript">
var markers = <?php echo json_encode($data); ?>

function initializeMaps() {
    var myOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
    };
    var map = new google.maps.Map(document.getElementById("map"),myOptions);
    var infowindow = new google.maps.InfoWindow(); 
    var marker, i;
    var bounds = new google.maps.LatLngBounds();

    for (i = 0; i < markers.length; i++) { 
        var pos = new google.maps.LatLng(markers[i][1], markers[i][2]);
        bounds.extend(pos);
        marker = new google.maps.Marker({
            position: pos,
            map: map
        });
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infowindow.setContent(markers[i][0]);
                infowindow.open(map, marker);
            }
        })(marker, i));
    }
    map.fitBounds(bounds);
}
initializeMaps();
  </script>
</body>
</html> 
```

# database - 没有关系的 MS Access 数据库

> ID：14470073
> 
> 赞同：0
> 
> 时间：2013-01-22T23:42:14.530
> 
> 标签：database, data-migration

在处理表之间没有关系的 MS Access 数据库时，任何人都可以推荐一种工具或建议该方法吗？

作为数据迁移项目的一部分，我正在创建数据映射定义规则，但是正确识别要提取的源表/字段变得越来越困难和耗时。

我有许多表，相同的数据出现在不同的地方。此外，由于在输入数据时没有验证规则，因此许多条目包含拼写错误或通常与预期的数据类型不匹配。然而，大多数表已经创建了键（主键和外键）。

我正在寻找一种快速的解决方案来重建数据库 (*.mdb)，理想情况下使用一些软件可以识别所有潜在的数据问题，建议更正，允许调整，最后停止使用数据可以的完全关系数据库很容易被识别，不会散落在各处。我对数据库和 SQL 有一定的了解，但之前没有使用过 Access，所以我试图节省一些时间。而且 - 如果重要的话 - 我根本不关心数据库性能......只关心数据本身。无论如何，我稍后会将其提取到 *.csv 文件中......

评论、建议和/或其他考虑将不胜感激。

提前致谢

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:47:04.713

我不相信有任何软件可以分析 Access 数据库并使用某种人工智能来生成具有良好数据和强关系的新数据库。

不过我的建议是将所有数据导出到 SQL Server（甚至 MySQL），然后在那里使用它。使用真正的查询语言操作数据比尝试在 Access 中清理数据要容易得多。

您可以使用 SQL Server 进行批量更新、比较、连接等。您可以轻松查询架构（编写查询以查看字段是否出现在表中），使用代码更改架构/表定义等。

完成后，您可以使用作业 (SSIS) 将数据导出为 CSV。

（如果您没有/买不起 SQL Server，可以下载 SQL Express。）

# windows - 如何忽略 Windows“调试错误！” 自动化测试中的对话框

> ID：14470074
> 
> 赞同：1
> 
> 时间：2013-01-22T23:42:16.800
> 
> 标签：windows, debugging, automated-tests

我有一个测试套件，它运行带有各种命令行选项的 Windows 可执行文件，以测试可执行文件是否正常工作。在某些测试用例中，这些参数会导致可执行文件严重损坏，并出现以下对话框：

![在此处输入图像描述](../Images/07e7635568c76b6874cba5503c72253b.png)

不幸的是，这个对话框一直存在，直到我手动按下**Abort**、**Retry**或**Ignore**。这使我无法以自动化方式运行这些测试。我尝试通过带有各种 CDB 选项的 Windows CDB 调试器调用可执行文件，但没有成功。

如何防止这些对话框出现或自动继续测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:57:07.360

正如[Microsoft C 运行时库手册页中所述`abort()`](http://msdn.microsoft.com/en-us/library/k089yyh0.aspx)，当您链接到 Microsoft CRT 的调试版本时，会出现此消息框。您可以链接到发布 CRT 以避免该消息，但 Windows 将捕获崩溃（因为 abort() 被 CRT 认为是程序崩溃）并且您会看到 Windows 错误报告消息。

手册页还说您可以使用[Microsoft 扩展`_set_abort_behavior()`功能在代码中禁用消息框。](http://msdn.microsoft.com/en-us/library/e631wekh.aspx)如果你走那条路，你可能想要有一些方法来控制是否启用消息，使用命令行开关或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:39:34.670

从窗口标题可以清楚地看出，您正在测试程序的 Debug 版本。这不是一个好的做法，您没有按照程序在客户机器上运行的方式对其进行测试。Debug 版本适合程序员调试他们的代码。但它偶尔会*隐藏*一个错误。此类错误可能很难诊断，您需要进行测试以清除它们。您没有执行这样的测试。

仅测试发布版本。然后它也自动解决了这个对话框问题，CRT 的发布版本不显示它。

顺便说一句：测试失败。

# c# - InvalidOperationException：集合已修改；指的是哪个集合？

> ID：14470078
> 
> 赞同：2
> 
> 时间：2013-01-22T23:42:31.003
> 
> 标签：c#, .net, multithreading, invoke, invalidoperationexception

我经常发现并没有真正指定导致这种异常的确切集合。这是真的还是应该很明显？也许我只是不明白如何正确解释异常消息..

具体来说，我想知道这个。它指的是什么收藏？

事件委托的参数很简单（对象发送者），引发的事件传递空参数。尽管引发事件的类本身继承了一个列表：

```
public class TimeSerie : List<BarData> 
```

这里是否清楚“集合”是指引发事件的对象，还是可以是另一个对象？可以说是动态更改的方法的事件处理程序集合吗？或者这会产生一个不同的例外吗？

```
 ************** Exception Text **************
System.InvalidOperationException: 
Collection was modified; enumeration operation may not execute.
   at System.Windows.Forms.Control.MarshaledInvoke(Control caller, Delegate method, Object[] args, Boolean synchronous)
   at System.Windows.Forms.Control.Invoke(Delegate method, Object[] args)
   at System.Windows.Forms.Control.Invoke(Delegate method)
   at SomeNameSpace.SomeUserControl.InvokeOnUpdateHistory(Object sender) in D:\SomePath\SomeUserControl.cs:line 5179
   at OtherNameSpace.OtherClass.TimeSerie.HistoryUpdateEventHandler.Invoke(Object sender) 
```

UserControl 中出现异常：

```
 public class SomeUserControl 

    private void InvokeOnUpdate(object sender)
    {
    this.Invoke(new GenericInvoker(Method));   // << Exception here!
    }

    private void Method() {...} 
```

编辑： *添加了一些代码。有点简化，但认为它包括相关位。*

```
private void Method() 
{
            if (this.instrument == null) return;  
            UnRegisterTimeSerieHandlers(this.ts);

            this.ts = instrument.DataSeries.GetTimeSerieByInterval(interval);
            if (ts != null)
            { 
                RegisterTimeseriesHandlers(ts);
                ClearAndLoadAllHistory();
            }
}

    private void UnRegisterTimeSerieHandlers(TimeSerie ts)
    {
        if (ts != null)
        {
            ts.TickUpdate -= InvokeUpdateCurrentBar;
            ts.NewBarUpdate -= InvokeUpdateNewBar;
            ts.HistoryUpdate -= InvokeOnUpdateHistory;
            this.ts = null;
        }
    }

    private void RegisterTimeseriesHandlers(TimeSerie ts)
    {
        ts.TickUpdate += InvokeUpdateCurrentBar;
        ts.NewBarUpdate += InvokeUpdateNewBar;
        ts.HistoryUpdate += InvokeOnUpdateHistory;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:47:11.777

是的，当您使用 Control.Invoke() 时，可能很难诊断异常的原因。问题是当它发生在 UI 线程上时它会捕获异常并将其重新抛出到您的工作线程中。因此，您的工作线程需要知道 Invoke() 的返回值不可用。不可避免的副作用是你失去了告诉你它在哪里爆炸以及它是如何到达那里的Holy Stack Trace。

如果您可以在附加调试器时重现问题，然后使用 Debug + Exceptions，勾选 CLR Exceptions 的 Thrown 复选框。抛出异常时调试器停止，为您提供良好的语句位置和调用堆栈以查看。

如果没有，请考虑改用 Control.BeginInvoke()。这是 Invoke() 的即发即弃版本，因此如果调用的方法抛出异常，则 UI 线程将引发该异常，您将获得准确的堆栈跟踪。

一般来说，您总是希望使用 BeginInvoke()。它不会导致工作线程停止，它避免了许多死锁情况并提供良好的异常反馈。使用 Invoke() 通常是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:59:58.863

看来您正在使用计时器。也许您正在从计时器回调（另一个线程）更改一些集合（更有可能，该集合是 UI 元素的属性）而不使用`Control.Invoke()`调用？

# scripting - WinSCP 命令行被动模式

> ID：14470080
> 
> 赞同：3
> 
> 时间：2013-01-22T23:42:35.467
> 
> 标签：scripting, ftp, winscp, passive-mode

我正在通过命令行调用 WinSCP，但我不知道如何为脚本正确设置被动模式。

这是现在的脚本：

```
 option batch on
 option confirm off

 open ftp://user_and_pass_details:21
 cd /out/

 option transfer binary
 put C:\afile.text

 close
 exit 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:05:35.857

您可以在 open 中指定被动选项：

```
open ftp://user_and_pass_details:21 -passive=on|off 
```

您的完整脚本将变为：

```
 option batch on

 option confirm off

 open ftp://user_and_pass_details:21 -passive=on

 cd /out/

 option transfer binary

 put C:\afile.text

 close

 exit 
```

请参考：[http](http://winscp.net/eng/docs/scriptcommand_open)
://winscp.net/eng/docs/scriptcommand_open （不管怎样，注意默认被​​动模式是主动的：[http](http://winscp.net/eng/docs/ui_login_connection#connection) ://winscp.net/eng/docs/ui_login_connection#connection ）

# jquery - jquery .slideToggle() 水平替代？

> ID：14470081
> 
> 赞同：57
> 
> 时间：2013-01-22T23:42:52.907
> 
> 标签：jquery, html, toggle, slidetoggle

slideToggle 完全符合我的要求，只是我希望幻灯片是水平的。

我现在有一个水平隐藏/显示和点击动画，但我想要切换选项。这样当我点击活动链接时，它会反转播放动画并隐藏自己。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-22T23:50:43.250

您可以使用以下`animate`方法：

```
$('#element').animate({width: 'toggle'}); 
```

[http://jsfiddle.net/7ZBQa/](http://jsfiddle.net/7ZBQa/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:58:43.717

创建了一个小提琴[http://jsfiddle.net/powtac/RqWk2/](http://jsfiddle.net/powtac/RqWk2/)

```
$("div").animate({width: 'toggle'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-13T03:10:26.920

还有另一种方法，使用 jquery ui。请参阅 [api jquery ui](http://api.jqueryui.com/toggle/) ，但它可能并不总是有用，因为它有其故障

在这里[jsfiddle](http://jsfiddle.net/ne0gspzz/4/)看到了故障，它没有顺利移动所有其余元素。我在这里放了代码，但它应该与 jQuery UI 1.10.3 一起使用。

js

```
$( document ).click(function() {
  $( "#toggle" ).toggle('slide');
}); 
```

css

```
.t {
    width: 100px;
    height: 100px;
    background: #ccc;
    display: inline-block;
    float: left;
  } 
```

html

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<p>Click anywhere to toggle the box.</p>
<div id="toggle" class='t'>1</div>
<div id="" class='t'>2</div>
<div class='t'>3</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-26T14:46:03.773

我试过了，效果很好！

html代码：

```
<div class="flip-container" ontouchstart="this.classList.toggle('hover');">
    <div class="flipper">
        <div class="front">
            <!-- front content -->
        </div>
        <div class="back">
            <!-- back content -->
        </div>
    </div>
</div> 
```

CSS /* 悬停时翻转窗格 */ .flip-container:hover .flipper, .flip-container.hover .flipper { transform: rotateY(180deg); }

```
.flip-container, .front, .back {
    width: 320px;
    height: 480px;
}

/* flip speed goes here */
.flipper {
    transition: 0.6s;
    transform-style: preserve-3d;

    position: relative;
}

/* hide back of pane during swap */
.front, .back {
    backface-visibility: hidden;

    position: absolute;
    top: 0;
    left: 0;
}

/* front pane, placed above back */
.front {
    z-index: 2;
    /* for firefox 31 */
    transform: rotateY(0deg);
}

/* back, initially hidden pane */
.back {
    transform: rotateY(180deg);
} 
```

我在引导程序 col-sm-* 中使用它并且效果也很好

```
 <div class="col-sm-4 flip-container" ontouchstart="this.classList.toggle('hover');">
                    <div class="content-box flipper">
                        <div class="content-box-front">
                            <span class="glyphicon glyphicon-envelope content-box-icon"></span>
                            <h4>Share your emotions</h4>
                        </div>
                        <div class="content-box-back">
                            <p>Share emotions with friends, family and teammates.</p>
                            <button>Read more</button>
                        </div>
                    </div>
                </div> 
```

的CSS

```
.content-box
{
    position: relative;
    text-align: center;
    height: 105px;
    width: 100%;
}
.content-box-icon
{
    font-size: 30px;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    text-align: center;
    display: block;
    margin: 5px auto 15px auto;
    color: #fff;
    float: none; 
    background:#25acfd                     
}
.content-box-front
{
    z-index: 2;
    /* for firefox 31 */
    transform: rotateY(0deg);
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 105px;
}
.content-box-back
{
    transform: rotateY(180deg);
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 105px;
}
/* entire container, keeps perspective */
    /* flip the pane when hovered */
    .flip-container:hover .flipper, .flip-container.hover .flipper {
        transform: rotateY(180deg);
    }

/* flip speed goes here */
.flipper {
    transition: 0.6s;
    transform-style: preserve-3d;
    position: relative;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-20T16:23:34.230

如果您希望在两个宽度之间切换，您可以执行以下操作：

```
$('#A').click(function(){
if($(this).width() > 20){
$(this).animate({width: '20px'})
}
else{
$(this).animate({width: '50%'})
}
});
```

```
#A{
  float:left;
  width:50%;
  height:300px;
  background:red;
}
#B{
  min-height:300px;
  background:green;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="A">
</div>
<div id="B">
<span>Some stuff</span>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-01T15:48:06.610

如果你需要它是连续的，你可以设置 setTimeinterval 如下

```
<?php
setInterval(function (){
$('div').animate({width: 'toggle'});
},200);
?> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-12-31T07:13:30.080

**我想要切换高度，所以我使用**了（我在我的项目中使用过）

```
function show_hide(target){
 var x = document.querySelectorAll("." +target);
 var y = $( x ).next()
 $(y).animate({height: 'toggle'});
} 
```

# javascript - 需要 jquery 模态弹出指导。我究竟做错了什么？

> ID：14470088
> 
> 赞同：0
> 
> 时间：2013-01-22T23:43:57.690
> 
> 标签：javascript, jquery, html, popup, modal-dialog

我正在创建一个网站，在该网站的一个页面上（它是 .php）我有两个链接。第一个读取寄存器，下一个读取登录。我正在使用 jquery 创建一个弹出窗口，弹出的表单取决于单击的链接。（我正在尝试这样做但无法做到）。我总共有 2 个文件（logReg.php）和（popup.css）。

当我点击登录时，登录表单会按预期弹出，但是当我点击注册时，什么也没有弹出。如果我颠倒这些，如果我先把jquery代码注册然后......注册框弹出但登录没有。我已经阅读了`click()`函数的 jquery API，但在我看来我做的一切都是正确的，但显然不是。任何帮助将不胜感激。顺便说一句，这段代码不是 100% 我的，我修改了我为单个弹出窗口找到的代码。

logReg.php 的内容

```
<html>
     <head>
          <!-- Typical stuff here. link to the popup.css & jquery.js -->
          <title>MyPage</title>
          <script type="text/javascript">
               $(document).ready(function () {
                    $("a.login-window").click(function () {

                         //Getting the variable's value from a link
                         var loginBox = $(this).attr("href");

                         //fade in the popup
                         $(loginBox).fadeIn(300);

                         //set the center alignment padding
                         var popMargTop = ($(loginBox).height() + 24) / 2;
                         var popMargLeft = ($(loginBox).width() + 24) / 2;

                         $(loginBox).css({
                              'margin-top' : -popMargTop,
                              'margin-left' : -popMargLeft
                         });

                         //Add the mask to body
                         $('body').append('<div id="mask"></div>');
                         $('mask').fadeIn(300);
                         return false;
                    });

                    //When clicking on the button close the pop closed
                    $('a.close, #mask').live('click', function() {
                         $('#mask, .login-popup').fadeOut(300, function() {
                              $('#mask').remove();
                         });
                         return false;
                    });

                    $("a.register-window").click(function () {

                         //Getting the variable's value from a link
                         var registerBox = $(this).attr("href");

                         //fade in the popup
                         $(registerBox).fadeIn(300);

                         //set the center alignment padding
                         var popMargTop = ($(registerBox).height() + 24) / 2;
                         var popMargLeft = ($(registerBox).width() + 24) / 2;

                         $(registerBox).css({
                              'margin-top' : -popMargTop,
                              'margin-left' : -popMargLeft
                         });

                         //Add the mask to body
                         $('body').append('<div id="mask"></div>');
                         $('mask').fadeIn(300);
                         return false;
                    });

                    //When clicking on the button close the pop closed
                    $('a.close, #mask').live('click', function() {
                         $('#mask, .register-popup').fadeOut(300, function() {
                              $('#mask').remove();
                         });
                         return false;
                    });
               });
          </script>
     </head>
     <body>
          <div id="links>
               <a href="#login-box" class="login-window">Login</a>
               <a href="#register-box" class="register-window">Register</a>
          </div>
          <div id="login-box" class="login-popup">
               <form method="post" class="signin" action="">
                    <!-- All form stuff here -->
               </form>
          </div>
          <div id="#register-box" class="register-popup">
               <form method="post" class="signin" action="">
                    <!-- All form stuff here -->
               </form>
          </div>
     </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:52:06.443

*   首先不要使用.live，升级jquery并使用

    ```
    $(document.body).on({event:function(){},...},"selector" 
    ```

*   第二不要使用附加，使用

    ```
    $('<div../>').appendTo($(document.body)); 
    ```

（我相信你的错误来自第二个）

你也可以为你的开箱代码制作一个插件，然后使用.on一次绑定两者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:56:56.403

对于初学者，您在此行缺少双引号：

`<div id="links>`

改成

`<div id="links">`

那应该可以修复您的链接。

然后你应该按照 mikakun 所说的升级 jquery 和使用`.on`，因为最好保持最新状态。

# ios - 如何从包含我的 UIViewController 的 UITableViewController 显示新视图？

> ID：14470093
> 
> 赞同：2
> 
> 时间：2013-01-22T23:44:16.793
> 
> 标签：ios, objective-c, view, properties

我有一个`UITableViewController`内一个`UIViewController`。虽然这个 table viewcontroller 是唯一涉及的，但当用户点击一行时，它可以很好地推送视图。然而，自从我把它移到 中包含的两个之一之后`UIViewController`，行的水龙头突然什么都不做。

我[试过四处寻找](https://stackoverflow.com/questions/9119607/how-can-i-push-a-new-view-controller-from-a-button-within-a-subview-another-vie)，但我不是第一个遇到这个问题的人，但没有一个答案适合我的情况，或者这些问题没有有效的答案。该链接是我找到的最接近的链接，但我没有使用故事板——我使用的是单独的 XIB。

**那么如何从视图控制器中的视图控制器推送新视图？**

回顾一下：

1.  这就是我所拥有的，它可以很好地将用户带到一个新屏幕！

    ```
    // Normal table behavior, as illustrated by [another question][2].

    - (void)tableView:(UITableView *)tableView 
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        SomeView *detailViewController = [[SomeView alloc] initWithNibName:@"SomeView" bundle:nil];

        // Pass the selected object to the new view controller.
        [self.navigationController pushViewController:detailViewController animated:YES];
    } 
    ```

2.  现在我将视图控制器作为视图中的一个属性——上面的代码在 tableviewcontroller 的文件中而不是在“主”视图中，不会导致新屏幕出现了！

* * *

感谢您的评论！这是一些代码来阐明我的情况。

1.  控制器中的控制器。这是我用来测试概念的测试项目中的一个文件。在这种情况下，我在 tableview 控制器中有一个 tableview 控制器。

    ```
    @interface SimpleTableViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

    // This is the controller within the controller
    @property IBOutlet SecondTableViewController *secondTableController;
    @property IBOutlet UITableView *secondTable; 
    ```

2.  我`SecondTableViewController`有这个有趣的一点。

    ```
    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // Navigation logic may go here. Create and push another view controller.

        UIViewController *detailViewController = [[UIViewController alloc] initWithNibName:@"SimpleNonTableViewController" bundle:nil];
        // ...
        // Pass the selected object to the new view controller.
        [manualViewControllerParent.navigationController  pushViewController:detailViewController animated:YES];
    } 
    ```

用户与之交互的视图与`SimpleTableViewController`. 这样，`SecondTableViewController`就是“内”了`SimpleTableViewController`。如果您想了解更多详细信息，请随时发表评论！

* * *

我已将我的测试/概念项目放在 github 上。 [https://github.com/hyliandanny/TableViewCeption](https://github.com/hyliandanny/TableViewCeption)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:23:39.553

您需要使用自定义容器控制器来执行您想要的操作。如果您使用情节提要，这将是最简单的，但您也可以使用 xibs 在代码中完成。外部控制器应该是 UIViewController，而不是表视图控制器。您可以执行以下操作（在外部控制器中）：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    UIViewController *detailViewController = [[UIViewController alloc] initWithNibName:@"SimpleNonTableViewController" bundle:nil];
    [self addChildViewController:detailViewController];
    detailViewController.view.frame = set the frame to what you want;
    [self.view addSubview:detailViewController.view];
    [detailViewController didMoveToParentViewController:self];
} 
```

您应该阅读 Apple 的自定义容器控制器文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:18:16.110

您需要确保：

*   您的`UITableView`委托已连接到您的控制器。否则它不会调用`didSelectRow`. 您可以在 xib 或 viewDidLoad 方法中执行此操作。
*   你的 self.navigationController 不是 nil
*   你的 detailViewController 不是 nil

我也认为你的意思是你`UITableView`的`UIViewController`. `UITableView`只是视图，而`UITableViewController`控制器。您不能在另一个控制器中拥有一个控制器。

# php - 显示来自 2 个表 + zend 框架的数据

> ID：14470094
> 
> 赞同：0
> 
> 时间：2013-01-22T23:44:20.470
> 
> 标签：php, sql, arrays, zend-framework, html-table

我想将数据库中的数据显示到我的 html 表中。（当我点击一个链接时）

表“出生”字段：

*   区
*   1999年
*   2000年
*   2001年
*   2002年
*   2003年
*   2004年
*   2005年
*   2006年
*   2007年
*   2008年
*   2009年

表“死亡”字段：

*   区
*   1999年
*   2000年
*   2001年
*   2002年
*   2003年
*   2004年
*   2005年
*   2006年
*   2007年
*   2008年
*   2009年

我将从我的数据库中获取数据，真正的 ajax 调用在 javascript 中。我链接到我的 indexcontroller 中的一个动作。

Javascript代码：

```
$("#wijken ul li a").click(function(e){

        district = ($(this).text());

        loadTable(district);

      });

function loadTable(district){
    var param1 = district;

    $.ajax({ 
      url: 'index/getdata',         
      type: "POST",             
      data: {param1: param1},                        
      dataType: 'json',                
      success: function(result)          
      {
        var htmlContent = "";

       // HOW CAN I PARSE THE DATA?

        htmlContent += '</tbody></table>';
        $('#tabel').html(htmlContent);

      }, 
      error: function(request, status, error){
          alert(request.responseText);
      }
    });
} 
```

我的索引控制器：

```
public function getdataAction()
    {
        // DISABLE VIEW
        $this->view->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender(true);

        // WIJK CLICKED
        $district = $this->_request->getParam('param1');

        // GET THE BIRTHS/YEAR
        $birthMapper = new Frontoffice_Model_BirthMapper();
        $array = $birthMapper->read($district);

        $this->_response->setBody(json_encode($array));
    } 
```

我的出生地图：

```
public function read($wijk = null)
    {
        $table = $this->_dbTable;

        $columns = array('wijk'         => 'wijk',
                         'year1999'     => 'year1999',
                         'year2000'     => 'year2000',
                         'year2001'     => 'year2001',
                         'year2002'     => 'year2002',
                         'year2003'     => 'year2003',
                         'year2004'     => 'year2004',
                         'year2005'     => 'year2005',
                         'year2006'     => 'year2006',
                         'year2007'     => 'year2007',
                         'year2008'     => 'year2008',
                         'year2009'     => 'year2009',
        );

        $select = $table->select()
                        ->from($table,
                               $columns
                          )
                        ->where('wijk = :wijk')
                        ->bind(array(':wijk' => $wijk))

         ;

        if ($row = $table->fetchRow($select)) {
           return $row->toArray();
       }

        throw  new Exception('The requested Births cannot be found');
    } 
```

现在我可以在我的 javascript 中将 1999 年、2000 年、2001 年、2002 年、2003 年、2004 年、2005 年、2006 年、2007 年、2008 年、2009 年字段作为result.year1999 处理。但是我怎样才能为多个表做到这一点？（在 javascript 和控制器中）

# sql - 加密/解密连接字符串

> ID：14470096
> 
> 赞同：0
> 
> 时间：2013-01-22T23:44:24.577
> 
> 标签：sql, encryption, connection-string

有很多关于加密和解密连接字符串的信息可用。但是，我们需要帮助了解针对我们的情况使用哪种方法。我们有许多连接到 Azure 数据库的平板电脑客户端。我们需要保护所有客户端连接字符串中的用户名和密码。我们不想为每个客户端创建一个密钥，而是为所有客户端创建一个密钥。更好的是，根本没有钥匙。最简单的使用方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:57:05.967

为了让您能够解密连接字符串，您需要将证书与您的应用程序一起分发到您的平板电脑，并且取决于可能很麻烦或完全不可能的目标操作系统。

我的建议是在您的客户和数据库之间放置一个中间层。它可以像您需要的一样薄（例如查看 OData），但会有效地保护您对数据库的访问。

或者，设置一个适当受限的用户，并以明文形式分发连接字符串。

# visual-studio-2010 - 无法在 Visual Studio 2010 中添加 DLL 作为参考

> ID：14470104
> 
> 赞同：0
> 
> 时间：2013-01-22T23:45:15.020
> 
> 标签：visual-studio-2010, sql-server-ce

我无法在 Visual Studio 2010 Professional 中添加 sql compact 作为参考。项目设置配置为使用目标框架“.NET Framework 3.5”。有人会知道为什么吗？

![错误信息](../Images/d013a00ad282d20744196fd70bbc5e11.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:49:48.833

我刚刚意识到我不能将 sqlcecompact35.dll 添加为参考，因为它不是有效的 CLR 程序集。

# bash - 字符串包含在 Bash 中，它是一个目录路径

> ID：14470106
> 
> 赞同：0
> 
> 时间：2013-01-22T23:45:37.257
> 
> 标签：bash, unix

我正在编写一个仅导出已更改文件的 SVN 脚本。在这样做时，我只想导出不包含特定文件的文件。

因此，首先我正在修改[此处](http://www.electrictoolbox.com/subversion-export-changed-files-cli-v2/)找到的脚本。

[我找到了一种使用此处](https://stackoverflow.com/questions/229551/string-contains-in-bash)找到的功能来检查字符串是否包含的方法。

现在，当我尝试运行以下命令时：

```
filename=`echo "$line" |sed "s|$repository||g"`
if [ ! -d $target_directory$filename ] && [[!"$filename" =~ *myfile* ]] ; then

fi 
```

但是我不断收到错误说明：

```
/home/home/myfile: "no such file or directory" 
```

BASH 似乎将 $filename 视为文字。如何获取它以便将其读取为字符串而不是路径？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:20:02.113

您有一些语法问题（[shell 脚本 linter](http://www.whatswrongwithmyscript.com)可以清除这些问题）：

*   您需要在“[[”之后有一个空格，否则它将被解释为命令（给出类似于您发布的错误）。
*   “！”之后需要一个空格，否则它将被视为操作数的一部分。

then 子句中还需要一些东西，但既然你设法运行它，我会假设你只是把它遗漏了。

*   您结合了您发布的子字符串内容的两个不同答案，`[[ $foo == *bar* ]]`并且`[[ $foo =~ .*bar.* ]]`. 第一个使用 glob，第二个使用正则表达式。只需使用`[[ ! $filename == *myfile* ]]`

# visual-studio-2010 - CUDA 5 和 Visual Studio 2010 智能感知错误

> ID：14470108
> 
> 赞同：5
> 
> 时间：2013-01-22T23:45:45.273
> 
> 标签：visual-studio-2010, cuda

我已经安装了 CUDA 5 工具包（似乎可以工作的 32 位和 64 位），并在 VS 2010 中创建了一个 CUDA 运行时项目，它可以正常编译并运行，但在调用 CUDA 函数时出现红线。

这不是什么大问题，但有点烦人，有什么办法可以消除它吗？我猜这是一些项目设置或类似的，但我不知道，谷歌也不知道。

我附上了截图，所以你知道我在说什么。

感谢您阅读本文，我很感激。

凯文

![在此处输入图像描述](../Images/49c3bf618cd55edfe0daacbbed209e5c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:07:49.593

从以上答案的组合（谢谢）我有这个问题的答案，以防万一其他人偶然发现它。

基本上这不是编译错误，甚至根本不是错误。这是智能感知的问题，据我所知，对此无能为力，只能忍受它，或者希望有一天他们能增加一点支持。

<<< >>> 是问题所在，根据有利于 C++ 编译器的智能感知，它不是正确的 C++ 语法。然而，它由 CUDA 编译器编译的代码，intellisense 根本不在乎。

我可能会更深入地了解它，但阅读上面的评论并按照建议搜索这个网站，你就会明白。

# java - 验证保存在 txt 文件 Java 中的用户名和密码

> ID：14470110
> 
> 赞同：2
> 
> 时间：2013-01-22T23:46:13.280
> 
> 标签：java, login

当有人注册时，用户名和密码保存在 .txt 文件中。下面的代码验证每一行以检查文件中是否存在用户名和密码。

但是，我不希望它以这种方式工作，因为它会获得一个带有随机密码的用户名......我需要它来验证每个注册用户的用户名和密码，有什么帮助吗？（我正在使用 NetBeans）

```
public boolean isCustomer(){
    boolean isFound = false;
    String record = null;
    FileReader in = null;
    try{
        in = new FileReader ("login.txt");
        BufferedReader bin = new BufferedReader(in);
        record = new String();
        while ((record = bin.readLine()) != null)
        {
            if (NameTextField.getText().contentEquals(record))
                isFound = true;
            if (jPasswordField.getText().contentEquals(record))
                isFound = true;
        }

    bin.close();
    bin = null;
 }catch(IOException ioe){
    NameTextField.setText("IOProblem");
 }   
  return isFound;
} 
```

* * *

login.txt 看起来像这样（用户名，然后是密码和“$$$”作为分隔符）：

```
Joe

656451asda

$$$

Robert

123456hbb

$$$

Tracey

56464999abc

$$$

Celia

abc1234897

$$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:02:38.607

正如其他答案中所指出的，您应该考虑许多问题：

1.  您不应该存储纯密码。根据密码计算哈希并存储哈希。

2.  如果可能，使用数据库而不是文本文件

3.  如果您不能使用数据库将用户名/密码信息存储在单行文本中。这是一种类似于 Unix 密码文件中使用的格式：

    ```
    joe:fjckdsoij48738423
    marian:fjccoekrnvn3iernci3en
    mrbean:fjd84jfn4u48fu4nf 
    ```

当您想检查密码时（从第 1 点来看密码的哈希值），您可以逐行读取密码文件。在出现第一个 ':' 字符时拆分行以查找用户名和密码。与用户提供的数据进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:50:21.377

这个 ...

```
if (NameTextField.getText().contentEquals(record))
    isFound = true;
if (jPasswordField.getText().contentEquals(record))
    isFound = true; 
```

意味着如果您在文本文件中找到用户名或密码，它将返回 true。我很确定你不想这样做。

最好使用两个标志（例如），您可以根据需要设置它们，`foundUser`然后`foundPassword``return foundUser && foundPassword`

**根据反馈更新**

检查用户名/密码值时，您需要确保您尝试匹配的密码与用户匹配，例如...

```
if (foundUser && jPasswordField.getText().contentEquals(record)) {
    foundPassword = true;
    break; // No need to compare any more details...
} else {
    foundUser = false;
}
if (NameTextField.getText().contentEquals(record)) {
    foundUser = true;
} 
```

**更新**

附带说明一下，您真的不应该使用[`JPasswordField#getText`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html#getText%28%29)它，因为它存在安全风险。您应该使用[`JPassword#getPassword`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html#getPassword%28%29)和使用[`Arrays.equals(char[], char[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28char%5b%5d,%20char%5b%5d%29)来比较它们。

这显然也引发了如何从文本文件中读取数据的问题。

（请注意，在文本文件中包含用户名/密码可能会带来更大的安全风险：P）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:49:26.313

你真的应该为此使用数据库。

如果不是，最好的办法是扫描文件并使用以用户名作为键的 Map。但是，如果您的程序崩溃，您仍然需要相应地更新文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T23:51:59.767

您不能对用户名和密码使用相同的布尔值。一旦找到一个，它将被设置为 true，并且它是否找到另一个都没关系（这是错误的，它们都需要在那里！）。

我会这样设置：

```
private String getUsername(String filename) {
    // 1\. Open up the file.
    // 2\. Return the String.
}

private String getPassword(String filename) {
    // Basically the same, but return the password.
} 
```

然后，在 isCustomer() 你可以这样做：

```
String username = getUsername(filename);
String password = getPassword(filename);
return (username != null) && (password != null); // makes sure they're both there. 
```

（另外，你真的不应该将它存储在未加密的文本文件中。这是一个非常糟糕的主意，如果你想成为一名程序员，你需要学习一些东西。）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-22T23:49:22.730

将用户名和密码放在同一行文本中。

# java - Spring RedirectAttributes：addAttribute() 与 addFlashAttribute()

> ID：14470111
> 
> 赞同：83
> 
> 时间：2013-01-22T23:46:17.087
> 
> 标签：java, spring, spring-mvc

到目前为止，我的理解是关于我们的控制器请求映射方法，我们可以指定*RedirectAttributes*参数并在请求被重定向时使用属性填充它。

*示例*：

```
@RequestMapping(value="/hello", method=GET)
public String hello(RedirectAttributes redirAttr)
{
   // should I use redirAttr.addAttribute() or redirAttr.addFlashAttribute() here ?

   // ...

   return "redirect:/somewhere";
} 
```

然后重定向属性将在它重定向到的目标页面上可用。

但是*RedirectAttributes*类有两种方法：

*   [`addAttribute()`](https://docs.spring.io/spring/docs/5.0.x/javadoc-api/org/springframework/web/servlet/mvc/support/RedirectAttributes.html#addAttribute-java.lang.Object-)
*   [`addFlashAttribute()`](https://docs.spring.io/spring/docs/5.0.x/javadoc-api/org/springframework/web/servlet/mvc/support/RedirectAttributes.html#addFlashAttribute-java.lang.Object-)

已经阅读 Spring 文档有一段时间了，但我有点迷茫。这两者之间的根本*区别*是什么，我应该如何选择使用哪一个？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-23T01:03:35.380

这是**区别**：

*   `addFlashAttribute()`实际上将属性存储在*flashmap* 中（在用户内部维护`session`并在下一个重定向请求得到满足时将其删除）

*   `addAttribute()`本质上是根据您的属性构造*请求参数*，并使用请求参数重定向到所需的页面。

因此，这样做的**好处**是`addFlashAttribute()`您可以在*flash 属性*中存储几乎任何对象（因为它根本没有序列化为请求参数，而是作为对象维护），而`addAttribute()`由于您添加的对象被转换为普通对象请求参数，您仅限于对象类型，如`String`或原语。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-05-31T17:31:08.063

假设您有 2 个控制器。如果您从一个控制器重定向到另一个控制器，则模型对象中的值在另一个控制器中将不可用。因此，如果您想共享模型对象值，那么您必须在第一个控制器中说

```
addFlashAttribute("modelkey", "modelvalue"); 
```

然后第二个控制器的模型现在包含上面的键值对..

第二个问题？`addAttribute`课堂和课堂`addFlashAttribute`有什么区别`RedirectAttributes`

`addAttribute`将值作为请求参数而不是模型传递，因此当您添加一些使用时，`addAttribute`您可以从`request.getParameter`

这是代码。我用来找出发生了什么：

```
@RequestMapping(value = "/rm1", method = RequestMethod.POST)
public String rm1(Model model,RedirectAttributes rm) {
    System.out.println("Entered rm1 method ");

    rm.addFlashAttribute("modelkey", "modelvalue");
    rm.addAttribute("nonflash", "nonflashvalue");
    model.addAttribute("modelkey", "modelvalue");

    return "redirect:/rm2.htm";
}

@RequestMapping(value = "/rm2", method = RequestMethod.GET)
public String rm2(Model model,HttpServletRequest request) {
    System.out.println("Entered rm2 method ");

    Map md = model.asMap();
    for (Object modelKey : md.keySet()) {
        Object modelValue = md.get(modelKey);
        System.out.println(modelKey + " -- " + modelValue);
    }

    System.out.println("=== Request data ===");

    java.util.Enumeration<String> reqEnum = request.getParameterNames();
    while (reqEnum.hasMoreElements()) {
        String s = reqEnum.nextElement();
        System.out.println(s);
        System.out.println("==" + request.getParameter(s));
    }

    return "controller2output";
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-11T19:56:12.417

[Javadoc 描述：](http://docs.spring.io/spring/docs/3.1.4.RELEASE/javadoc-api/org/springframework/web/servlet/FlashMap.html) “FlashMap 为一个请求提供了一种方法来存储打算在另一个 URL 中使用的属性。这在从一个 URL 重定向到另一个 URL 时最常用——例如 Post/Redirect/Get 模式。FlashMap 在重定向（通常在会话中）并在重定向后可用并立即删除。”

# html - 如何在表格的一侧放置滚动条？

> ID：14470112
> 
> 赞同：2
> 
> 时间：2013-01-22T23:46:35.987
> 
> 标签：html, css

我在这里有一个 jsfiddle：http: [//jsfiddle.net/m4HB3/](http://jsfiddle.net/m4HB3/)

我有一个带有固定标题的滚动表，它工作正常。我遇到的问题是滚动条的放置位置，它被放置在最后一列的下方，这导致它占用了最后一列的一些空间，从而使其他列偏离对齐。

我的问题是如何将滚动条剪辑到表格的右侧，这样它就不会影响占用列空间？

下面是示例表的html：

```
<table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="5%" class="questionno">Question No.</th>
        <th width="27%" class="question">Question</th>
        <th width="7%" class="option">Option Type</th>
        <th width="11%" class="image">Image</th>

    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
        <tr class="tableqandarow">
<td width="5%" class="questionno">1</td>
<td width="27%" class="question">What is a RAM?</td>
<td width="7%" class="option">A-E</td>
<td width="11%" class="imagetd"><ul class="qandaul"><li>Lighthouse_4.jpg</li></ul></td>
</tr>
<tr class="tableqandarow">
<td width="5%" class="questionno">2</td>
<td width="27%" class="question">Name 3 car maneuvers you may do in a test?</td>
<td width="7%" class="option">A-F</td>
<td width="11%" class="imagetd"><ul class="qandaul"><li>Tulips_3.jpg</li></ul></td>
</tr>
    </tbody>
    </table>
    </div> 
```

下面是css：

```
#tableqanda_onthefly_container
{
    width:100%;
    overflow-y: scroll;
    overflow-x: hidden;
    max-height:500px;
}

#tableqanda_onthefly
{
    width:100%;
    overflow:scroll;
    clear:both;
}

#tableqanda_onthefly td
{
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
    word-wrap:break-word;
}       

#tableqanda{
    width:100%;
    margin-left:0;
    float:left;
}

#tableqanda td { 
    vertical-align: middle;
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

.tableqandarow{
    border:1px black solid;
    border-collapse:collapse;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:06:43.033

试试这个小提琴：http: [//jsfiddle.net/m4HB3/29/](http://jsfiddle.net/m4HB3/29/)

我只是将您包装到一个ID`table`为 的容器中，从表中删除您的属性并在包含的 div 上设置以下内容（您可以将高度更改为您想要的任何值，我只是将其保留为 75 以进行演示）：`div``container``overflow`

```
#container
{
    height: 75px;
    overflow-x: auto;
} 
```

**编辑：经过一些调整，这就是他想要的[http://jsfiddle.net/m4HB3/37/](http://jsfiddle.net/m4HB3/37/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:10:19.690

不完全解决您的特定目标，但作为一种解决方法，您可以在标题的末尾添加一个额外的 TD 并将其设置为滚动条的宽度。

[http://jsfiddle.net/m4HB3/28/](http://jsfiddle.net/m4HB3/28/)

```
<thead>
    <tr>
        <th width="5%" class="questionno">Question No.</th>
        <th width="27%" class="question">Question</th>
        <th width="7%" class="option">Option Type</th>
        <th width="11%" class="image">Image</th>
        **<th width="8px" class=""></th>**
    </tr>
</thead> 
```

这至少会让它看起来更漂亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T13:09:11.547

[这里](https://stackoverflow.com/questions/17753238/fixed-header-and-scrollable-body)我对 CSS 表格 + 滚动 + 浏览器有一个完整的解释

希望对你有帮助

# haskell - 在 Haskell 函数类型声明中使用 [Char] 而不是 String 是不是一个坏主意

> ID：14470115
> 
> 赞同：4
> 
> 时间：2013-01-22T23:46:45.650
> 
> 标签：haskell, sublimetext2, hlint

我刚刚开始使用“Learn you a Haskell for Great Good”来学习 Haskell。我目前正在阅读“类型和类型类”一章，所以我的知识相当......不存在。我正在使用带有 SublimeHaskell 包的 Sublime Text 2，它在每次保存时构建/检查文件。

问题：我正在尝试像这样进行函数类型声明：

```
funcName :: [Char] -> [Char] 
```

我收到这个警告：

> 警告：使用找到的字符串：[Char] -> [Char] 为什么不使用：String -> String
> 
> 构建失败

你能向我解释一下为什么使用 Char 数组而不是 String 是一个坏主意吗？或者给我一个链接来解释可能的影响等。我已经用谷歌搜索了，但一无所获。

PS 我是一名 C# 开发人员，我了解类 c 语言中 char 数组和字符串之间的区别。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T23:58:02.280

在基础库的某个地方，您会发现这个定义：

```
type String = [Char] 
```

这说的`String`是`[Char]`完全一样的东西。您选择的两者中的哪一个是文档选择。我经常这样定义类型别名：

```
type Domain = ByteString
type UserName = Text 
```

将类型用于文档是一个好主意。

同样作为重要的旁注，`[Char]`不是字符数组的类型，而是字符列表。因为也有实际的数组类型，所以区别很重要！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T23:56:14.177

`String`只不过是 的类型别名`[Char]`，因此两者之间没有实际意义 - 这只是可读性的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T07:51:13.833

您似乎在您的代码上自动运行 HLint，并将任何 HLint 警告视为致命错误。正如[HLint 作者所说](http://neilmitchell.blogspot.co.uk/2009/09/how-i-use-hlint.html)“不要盲目地应用 HLint 的输出”。`String`并且`[Char]`完全一样，正如大家所说，这是一个看起来更好的问题。`String`如果我对要视为一个块的连续字符列表进行操作（大多数情况下），我倾向于使用，并且`[Char]`当字符在运行中组合起来没有意义时（非常罕见）显式使用。HLint 将所有提示分为错误（修复）和警告（思考），因此最好只在错误提示上构建失败。

# ios - 将数据从 UIView Controller textField 传递到单元格上的 TableViewController 标签-Objective c

> ID：14470117
> 
> 赞同：-1
> 
> 时间：2013-01-22T23:46:52.867
> 
> 标签：ios, objective-c

如何将文本字段数据从 UIView 控制器文本字段传递到单元格中的表格视图标签？我想以某种方式将文本字段数据添加到数组中，以便我可以将返回值的行数设置为数组计数。

我在我的模型中添加了一个 NSMutable 数组。

在我的视图控制器中，我正在实现 prepareForSegue 方法

```
 if ([segue.identifier isEqualToString:@"Details"]){

        MileageDetailViewController * mdv = [segue destinationViewController];

        NSString *text;
        startTextField.text = text;
        mdv.label.text = text; 
```

我已经尝试了几种不同的方法。我已经用一个数组完成了这项工作，并尝试将文本对象添加到一个数组中，但也没有显示。最后一种方法是我尝试使用标签并将 textField 中的文本添加到 tableview 标签。

```
 In the tableView I add this code to grab the text from the viewController.

     - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    { 
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return  1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Reuse"];

    UILabel *labe = (UILabel *) [cell viewWithTag:20];

    labe.text = label.text;

    // Configure the cell...

    return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:49:43.610

您需要熟悉 MVC 设计模式。创建一个包含数组的模型类。当文本字段被修改时，更新数组。如果表视图的视图控制器正在观察相同的模型对象（可能使用 KVO），那么它可以在数组更改时自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:36:04.253

下面的代码示例只是为了帮助您入门。但我强烈建议您遵循 Ray Wenderlich 网站 ([链接](http://www.raywenderlich.com)) 上的教程，因为您似乎刚刚开始进行 iOS 开发。

`prepareForSegue:`使用（在代码块中带有注释）在视图控制器之间传递数据：

```
// This will get called before the view appears
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"Details"]) {
        // Get destination view controller
        MileageDetailViewController *vc = [segue destinationViewController];

        // Grab the text field contents and put it into a public property on the new view controller
        vc.myText = self.myTextField.text;
        // NOTE: myText is a public NSString property on your MileageDetailViewController
        // NOTE: self.myTextField is the IBOutlet connected to your Text Field
    }
} 
```

现在使用表格视图进入控制器中的方法：

```
// Load the model required for the view controller
- (void)viewDidLoad {
    [super viewDidLoad];

    // Load your "model" - in this case an array property (called myData) with a single piece of text
    // NOTE: myText CANNOT be nil or an exception will occur
    self.myData = [[NSArray alloc] initWithObjects: self.myText, nil];
}

// UITableViewDataSource
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{ 
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return  [self.myData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath
{
    // NOTE: You must have set the reuse identifier in Interface Builder for this to work
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Reuse"];

    // NOTE: You must have set the tag in Interface Builder for this to work
    UILabel *labe = (UILabel *)[cell viewWithTag:20];

    labe.text = [self.myData objectAtIndex:indexPath.row];

    return cell;
} 
```

希望这可以帮助; iOS 开发很有趣，但是遵循一些教程真的可以帮助你快速上手。

# java - 将 int 变量用于列表展示位置

> ID：14470130
> 
> 赞同：0
> 
> 时间：2013-01-22T23:47:47.863
> 
> 标签：java, list

我不确定我的措辞是否正确。我希望这会更清楚。

```
Integer[] Performed = new Integer[3];  

public String dived(){        
        while (this.numberAttempts<3){
            int n = this.numberAttempts;
            int k = Dive.chosenRandomly();
            this.Performed[n] = k ;
            numberAttempts += 1;
        }
        return null;
    } 
```

我希望将 k（随机数）的值保存在一个列表中，这样我就知道选择了哪些数字。有没有办法让我在 while 循环中将值添加到列表中？

如果我将 [] 中的 n 替换为整数<3，它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:54:53.723

只需使用一些列表，例如 ArrayList 并向其中添加随机整数。

```
List<Integer> Performed = new ArrayList<Integer>();

public String dived(){        
    while (this.numberAttempts<3){
        int n = this.numberAttempts;
        int k = Dive.chosenRandomly();
        this.Performed.add(k) ;
        numberAttempts += 1;
    }
    return null;
} 
```

# breeze - 限制在 Breeze.js 中创建新实体

> ID：14470132
> 
> 赞同：2
> 
> 时间：2013-01-22T23:48:00.190
> 
> 标签：breeze

假设我想使用 Breeze 创建一个 Task 实体（我使用的是 EF），但是因为这是一个*真正的*任务应用程序，所以该任务必须与当前登录的用户相关联。任务具有在保存期间需要填充的 UserId 外键，这就是我被卡住的地方。在大多数客户端应用程序中执行此操作对我来说是一个陌生的概念。我不能很好地在客户端指定 UserId 外键，因为我不希望聪明的用户可能会为另一个用户创建任务。我应该在哪里挂钩到保存过程以使用当前登录的用户（在本例中为 System.Web.HttpContext.Current.User.Identity.Name）填充 UserId FK。

随时向我指出另一个帖子或文档的方向。正如我所说，这对我来说是一个新概念，所以我真的不知道要搜索什么。

对于回答这个问题的人，我全心全意地爱你。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:32:49.587

查看 Breeze 网站上有关[Custom EFContextProvider 的 Save Interceptor](http://www.breezejs.com/documentation/custom-efcontextprovider#SaveInterception)的文档。您将需要创建自己的提供程序并实现 BeforeSaveEntity 方法。在该方法中，您可以像使用 MVC4 一样将任务的 UserId 设置为当前用户。

```
public class TasksContextProvider: EFContextProvider<YourExistingDbContext>  
{

  public override bool BeforeSaveEntity(EntityInfo entityInfo) 
  {
    if (entityInfo.Entity.GetType() == typeof(YourTask)
        && entityInfo.EntityState == EntityState.Added) 
    {
      // add your logic here to set the user and/or do validation
    }
  }

} 
```

# javascript - 在没有jQuery的情况下在div上加载html？

> ID：14470135
> 
> 赞同：0
> 
> 时间：2013-01-22T23:48:51.550
> 
> 标签：javascript

我想加载一个`iframe`只使用javascript的，到目前为止我一直在使用这个：

```
$(".punctis-social-box").html("<iframe></iframe>"); 
```

但由于它是我唯一使用 jQuery 的指令，我不想再依赖 jQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:51:00.157

也许不是最好的开始方式：

```
var elements = document.getElementsByClassName("punctis-social-box");
for (var i = 0; i < elements.length; i++) {
    elements[i].innerHTML = "<iframe></iframe>";
} 
```

或使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)：

```
var elements = document.querySelectorAll(".punctis-social-box");
for (var i = 0; i < elements.length; i++) {
    elements[i].innerHTML = "<iframe></iframe>";
} 
```

为了避免所有*不良做法*^(TM)，您可以使用[`document.createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)而不是显式更改内部 HTML：

```
var element = document.querySelector(".punctis-social-box"),
    iframe = document.createElement("iframe");

while (element.firstChild) {                  // the fastest way
    element.removeChild(element.firstChild);  // to clear the contents
}
element.appendChild(iframe);                  // adding new <iframe> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T23:51:47.800

方法一：

```
var social_boxes = document.getElementsByClassName('punctis-social-box');
social_boxes[0].innerHTML += '<iframe></iframe>'; // add to first element, loop thru "social_boxes" if you want to add iframe to all elements 
```

方法2（更好）：

```
var social_boxes = document.getElementsByClassName('punctis-social-box');
var iframe = document.createElement('iframe');
social_boxes[0].appendChild(iframe); // add to first element, loop thru "social_boxes" if you want to add iframe to all elements 
```

# heroku - Heroku clojure repl 给出 java.lang.RuntimeException: No such var: repl/profile

> ID：14470143
> 
> 赞同：0
> 
> 时间：2013-01-22T23:49:31.537
> 
> 标签：heroku, clojure

我已经运行这个应用程序一段时间了，Web 部件似乎工作正常。repl 也是如此。但是今天早上'heroku run lein repl'返回

> java.lang.RuntimeException：没有这样的变量：repl/profile

我一直要求最低 Leiningen 2.0.0，但如果我在 中删除该要求`project.clj`，repl 将加载 1.7.0 左右的版本。

我注意到最近`leiningen/standalone_repl.clj`在 GitHub 中发生了一些变化，但似乎没有一个可以解释损坏的原因。

在本地运行项目中的 repl 工作正常。创建一个干净的空项目并需要 leiningen 2.0.0 会导致相同的损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:57:30.103

这是一个heroku问题。Leningen 的创建者（和 Heroku 的员工）在 clojure google 群组上[对此发表了评论：](https://groups.google.com/d/topic/clojure/UqRSGWWBtkA/discussion)

> 这是由于 Leiningen 2.0.0 的发布；buildpack 目前通过别名将错误修复反向移植到 repl，这种方式仅在预览版中有效。暂时你可以`lein trampoline repl` 显式使用；明天我会推送一个别名的修复程序。感谢您引起我的注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:34:45.263

我很可能误解了这个问题，如果是这样，请原谅，尽管只是为了澄清一个潜在的误解：除非你正在开发一个 lein 插件，否则你几乎不需要在项目的依赖项中包含 leiningen。

# shopify - Shopify API：创建隐藏的产品变体

> ID：14470148
> 
> 赞同：5
> 
> 时间：2013-01-22T23:50:08.213
> 
> 标签：shopify

是否可以通过 Shopify API 创建未发布/隐藏的产品变体？我知道可以通过`product['published'] = false`在 POST 请求中指定来创建隐藏产品，但我只想创建一个可以添加到购物车的隐藏*变体。*

我正在尝试做的是创建一个“销售”项目，该项目仅适用于具有特定购物车的单个用户。我可以通过 node.js 创建产品变体，并且可以使用 AJAX 将产品实际添加到客户端的购物车中，但我永远无法访问商店的仪表板，因此我无法通过集合屏蔽产品变体，链接选项等。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:52:58.770

在 API 级别隐藏特定变体是不可能的，但您可以通过 Liquid 或客户端代码来实现。

看看[http://apps.shopify.com/quantity-breaks](http://apps.shopify.com/quantity-breaks)如何实现这一点，你应该有一个更好的主意。

# c# - 在另一个表单中发生事件后更新一个表单

> ID：14470150
> 
> 赞同：0
> 
> 时间：2013-01-22T23:50:21.827
> 
> 标签：c#, winforms, message

我正在努力确定根据另一个表单中发生的事件更新一个表单的最佳方法。

例如，我的应用程序有一个表单，它以`ListView`. 我的应用程序还有一个允许用户添加新部件的表单。该应用程序不是`MDI`.

每次从另一个表单插入、更新或删除项目时，更新显示部件列表的表单的最佳选择是什么？

我意识到，如果表单是从第一个表单实例化的，我可以将引用传递给第二个表单，但是，我不希望将表单紧密耦合。我已经尝试过自定义事件，但是我认为这将需要在中间实现一个类来接管表单的实例化，以便它可以访问这两个对象。

我想我可以使用 .NET 内置属性。我最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:58:15.977

如果我们只是谈论两种形式，我会走简单的路线（例如，不要使用工厂类）。

在您的接收者表单中添加一个事件（如`ProductListChanged`）

添加一个全局变量（通过静态类属性（见下文））来保存接收者表单。

```
public class globals {
  public static ProductForm productForm {get;set;}
} 
```

然后，您可以通过全局静态属性引发 ProductListChanged 事件。

# php - MYSQLI 在一段时间内获取新查询

> ID：14470157
> 
> 赞同：6
> 
> 时间：2013-01-22T23:51:24.993
> 
> 标签：php, mysqli, while-loop, sync

我现在只是为了好玩而制作一些网站，但我被困在了一个点上。

我想执行一个小组任务，小组的任何成员都可以开始它。该组的所有人将获得相同数量的金币，经验并共享相同的冷却时间。我的数据库中有 3 个表（我只会显示重要信息）

```
Members:
username, level, experience, playergold

Levels:
level, required_experience

Groups:
leader, member_1, member_2, member_3, last_quest_started, quest_cooldown

Quests:
success_message, failed_message, chance, minimum_experience, maximum_experience, minimum_gold, maximum_gold, cooldown 
```

我想分组更新last_quest_started和quest_cooldown，我想更新每个成员他/她的等级、经验、playergold

所以在得到组员的每个用户名，任务数据后，计算经验和金币。我用它来更新：

```
if($select_members_info_stmt = $mysqli->prepare("SELECT members.username, members.level, members.experience, members.playergold, levels.required_experience FROM members INNER JOIN levels ON members.level = levels.level WHERE ((members.username = ?) OR (members.username = ?) OR (members.username = ?) OR(members.username = ?))"))
{
    $select_members_info_stmt->bind_param('ssss', $leader, $member_1, $member_2, $member_3);
    $select_members_info_stmt->execute();
    $select_members_info_stmt->bind_result($selected_username, $level, $experience, $playergold, $required_experience);
    while($select_members_info_stmt->fetch())
    {
        $now = time();

        if($update_user_stats_stmt = $mysqli->prepare("UPDATE members SET level = ?, experience = ?, playergold = ? WHERE username = ?"))
        {
            $update_user_stats_stmt->bind_param('iiiiis', $new_level, $new_experience, $new_gold, $now, $cooldown, $selected_username);
            $update_user_stats_stmt->execute();
            if($update_user_stats_stmt->affected_rows == 0)
            {
                    echo '<div>Because of a system error it is impossible to perform a task, we apologize for this inconvience. Try again later.</div>';
            }
            $update_user_stats_stmt->close();
        }
        else                                
        {
            printf("Update user stats error: %s<br />", $mysqli->error);
        }
    }
    $select_members_info_stmt->close();
    echo '<div>'.$success_message.'</div><br />';
}
else
{
    printf("Select members info error: %s<br />", $mysqli_error);
} 
```

但我不断得到：

更新用户统计错误：命令不同步；您现在无法运行此命令（4 次，这是我的组已满时的大小。）

我只是找不到解决不同步错误的解决方案，因为我无法关闭 $select_members_info_stmt 因为它会停止获取。

请帮帮我，因为我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T00:14:39.020

你不能这样嵌套`execute()`。

最好的解决方案是将成员列表`array()`一次性扔掉，关闭连接，然后迭代该数组并更新每条记录。

它应该如下所示：

```
$select_members_info_stmt->bind_param('ssss', $leader, $member_1, $member_2, $member_3);
$select_members_info_stmt->execute();
$select_members_info_stmt->bind_result($selected_username, $level, $experience, $playergold, $required_experience);

$members = array();
while($select_members_info_stmt->fetch())
{
    // tossing into the array
    $members[] = array(
        'selected_username' =>$selected_username, 
        'level' => $level, 
        'experience' => $experience, 
        'playergold' => $playergold, 
        'required_experience' => $required_experience
    );
}
$select_members_info_stmt->close();

// Now iterate through the array and update the user stats
foreach ($members as $m) {
    if($update_user_stats_stmt = $mysqli->prepare("UPDATE members SET level = ?, experience = ?, playergold = ? WHERE username = ?"))
    {
        // Note that you need to use $m['selected_username'] here. 
        $update_user_stats_stmt->bind_param('iiiiis', $new_level, $new_experience, $new_gold, $now, $cooldown, $m['selected_username']);
        $update_user_stats_stmt->execute();
        if($update_user_stats_stmt->affected_rows == 0)
        {
                echo '<div>Because of a system error it is impossible to perform a task, we apologize for this inconvience. Try again later.</div>';
        }
        $update_user_stats_stmt->close();
    }
    else                                
    {
        printf("Update user stats error: %s<br />", $mysqli->error);
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T23:52:50.497

您不能在与 mysql 的同一连接上嵌套主动运行的准备好的语句。一旦你调用`execute()`了任何语句，你就不能在同一个连接上运行另一个语句，直到该准备好的语句关闭。一旦开始执行第二个准备好的语句，第一个准备好的语句上的任何提取都将失败。

*每个连接只能在 mysql 服务器上准备和运行一个“实时”语句*

如果你真的需要嵌套你准备好的语句，你可以建立 2 个单独的 mysqli 连接。

# c# - Excel QueryTables.Add 从 URL 逗号分隔

> ID：14470158
> 
> 赞同：0
> 
> 时间：2013-01-22T23:51:31.427
> 
> 标签：c#, excel

我有一个在 http 响应中返回大量逗号分隔数据的服务器。我需要将此数据导入excel。

我通过将内容传递给临时文件然后将临时文件作为 csv 读取来实现这一点，但这个过程似乎效率低下。查询表可以直接从 http 响应中读取，但它将每行数据放入一个单元格中，而不是每个逗号分隔为一个单元格。

是否可以将来自 http 响应的逗号分隔数据直接从 C# excel 加载项读取到 excel 中？

谢谢！

```
 public static void URLtoCSV(string URL, Excel.Worksheet destinationSheet, Excel.Range     destinationRange, int[] columnDataTypes, bool autoFitColumns)
    {
        destinationSheet.QueryTables.Add(
            "URL;" + URL,
        destinationRange, Type.Missing);
        destinationSheet.QueryTables[1].Name = URL;
        destinationSheet.QueryTables[1].FieldNames = true;
        destinationSheet.QueryTables[1].RowNumbers = false;
        destinationSheet.QueryTables[1].FillAdjacentFormulas = false;
        destinationSheet.QueryTables[1].PreserveFormatting = true;
        destinationSheet.QueryTables[1].RefreshOnFileOpen = false;
        destinationSheet.QueryTables[1].RefreshStyle = XlCellInsertionMode.xlInsertDeleteCells;
        destinationSheet.QueryTables[1].SavePassword = false;
        destinationSheet.QueryTables[1].SaveData = true;
        destinationSheet.QueryTables[1].AdjustColumnWidth = true;
        destinationSheet.QueryTables[1].RefreshPeriod = 0;
        destinationSheet.QueryTables[1].Refresh(false);

        if (autoFitColumns == true)
            destinationSheet.QueryTables[1].Destination.EntireColumn.AutoFit();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:14:37.393

比您引用的更简单的解决方案是使用“TEXT”类型而不是 URL。TEXT 支持所有 CSV 导入，包括来自 HTTP 源的导入。URL 似乎被设计为比其他任何东西都更能处理屏幕抓取。

例如在你的情况下：

```
destinationSheet.QueryTables.Add("URL;" + URL, 
```

变成

```
destinationSheet.QueryTables.Add("TEXT;" + URL, 
```

对于那些偶然发现这篇文章并提出相同问题但在 Excel 中使用 VB 脚本的人来说，完整的解决方案如下所示：

```
' Load new data from web
With ActiveSheet.QueryTables.Add(Connection:="TEXT;http://yourdomain.com/csv.php", Destination:=Range("$A$1"))
.TextFileCommaDelimiter = True
.FieldNames = True
.RowNumbers = False
.FillAdjacentFormulas = True
.RefreshOnFileOpen = False
.BackgroundQuery = True
.RefreshStyle = xlOverwriteCells
.SavePassword = False
.SaveData = False
.AdjustColumnWidth = True
.Refresh BackgroundQuery:=False
End With 
```

# c# - 为什么那个按钮不起作用？

> ID：14470164
> 
> 赞同：0
> 
> 时间：2013-01-22T23:51:50.300
> 
> 标签：c#, wpf, wpf-controls

*   当我按下通用按钮时，它会显示带有一组按钮的堆栈面板
*   当我按下这些按钮中的任何一个时，它应该在大空间中显示一个用户控件
*   我的麻烦是，当我按下堆栈面板中的任何按钮时，它不会在空间中显示用户控制 ![在此处输入图像描述](../Images/924e545ba407dc7dc342008521f621af.png)

    ```
    public partial class MainWindow : Window
    {

        GenericName use1 = new GenericName();

        public MainWindow()
        {
          InitializeComponent();
        }

        private void btn_Generic(object sender, RoutedEventArgs e)
        {
          stackPanel1.Visibility = Visibility.Visible;
        }

        private void btn_GeneralInfo(object sender, RoutedEventArgs e)
        {
         Container.Child = use1;
        } 

      }

    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:56:56.497

这五个按钮没有 OnClick 设置为 btn_Generic 即

```
<asp:Button ID="1" runat="server" OnClick="btn_Generic" /> 
```

# jquery - jquery工具幻灯片设置效果

> ID：14470166
> 
> 赞同：0
> 
> 时间：2013-01-22T23:51:53.760
> 
> 标签：jquery, tabs, jquery-tools

您好，我正在使用基于 Jquery 工具的幻灯片，问题是我需要比淡入淡出和幻灯片更多的效果.. 是否有任何列表.. 我真的在文档中搜索，也许我看起来不太好，但实际上我没有找到它.. 在这里是我的代码..但我需要幻灯片向左移动，然后是从右移到中心，我的英语真的很糟糕，如何调用这种效果..它非常非常常见..而且简单我想..我认为实际上那是“幻灯片”运动..

希望任何人都可以帮助我。

```
<script language="JavaScript">
    $(function() {
        $(".slidetabs").tabs(".images > div", {

            // enable "cross-fading" effect
            effect: 'slide',
            fadeOutSpeed: "slow",

            // start from the beginning after the last tab
            rotate: true

            // use the slideshow plugin. It accepts its own configuration
        }).slideshow();
    });
</script> 
```

这张幻灯片的效果：http: [//jquerytools.org/](http://jquerytools.org/)

我在这张幻灯片上需要它：http: [//jquerytools.org/demos/tabs/slideshow.html](http://jquerytools.org/demos/tabs/slideshow.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:56:19.373

您可以在 Jquery UI 幻灯片中设置方向，如下所示

[http://docs.jquery.com/UI/Effects/Slide](http://docs.jquery.com/UI/Effects/Slide)

```
$("div").click(function () {
      $(this).hide("slide", { direction: "down" }, 1000);
}); 
```

# php - 发布具有相同（输入）名称的多个输入文本值

> ID：14470171
> 
> 赞同：0
> 
> 时间：2013-01-22T23:52:31.740
> 
> 标签：php

我正在使用 php`insert`进入[Microsoft SQL](http://php.net/manual/en/book.mssql.php)表，以下是我的代码：

```
$server = "**/**,1433";
$connectionInfo = array( "Database"=>"***", "UID"=>"**", "PWD"=>"******" );
$conn = sqlsrv_connect( $server, $connectionInfo );
if( $conn === false ) {
    die( print_r( sqlsrv_errors(), true));
}
if(!empty($_POST['check_list'])) {
    foreach($_POST['check_list'] as $check) {

$sql = "SELECT Item.HQID, Item.ItemLookupCode, Item.Description, Item.ExtendedDescription, Item.SalePrice, Item.Price, Item.CategoryID FROM Item WHERE Item.HQID = '$check'";
$stmt = sqlsrv_query( $conn, $sql );
if( $stmt === false) {
    die( print_r( sqlsrv_errors(), true) );
}

while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {

 $html_table = '<table border="1" cellspacing="0" cellpadding="2">';

 $html_table .= '<form method="post" action="upload.php"><tr><td width="350" align ="center">' .$row['Description']. '</td><td width="350" align ="center">' .$row['ExtendedDescription']. '</td><td width="130" align="center">' 

.$row['ItemLookupCode']. '<td width="100" align="center">' .$row['SalePrice']. '</td><td width="100" align="center">' .$row['Price']. '</td><td width="200" align="center"><input 

type="text" size="24" name="stitle"></td><td width="100" align="center"><input type="text" size="8" name="wprice"></td><td width="120" align="center"><input type="text" size="10" name="scategory"></td><td width="220" align="center"><input 

type="text" size="28" name="sbody"></td></tr>';
$html_table .= '</table>'; 
echo $html_table;  
}
}
}
}
?>
<input type="submit" value="Upload this page" ></form> 
```

我有一个`<input>`with `name="stitle"`，我希望**PHP**代码从每个中获取值，`<input>`但目前它只从第一个中获取值`<input>`。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:00:15.157

您的帖子格式很糟糕，但我认为您正在寻找数组表示法。

你可以做这样的事情：

```
<input type="text" size="24" name="stitle[]"> 
```

`$_POST`数组字段`stitle`是提交表单后所有值的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:32:28.523

好的，一个简单的表单示例，忽略所有额外的句法标记

```
<pre>
<?php print_r($_POST); ?>
</pre>

<form method="POST" action="">
    <input type="text" size="24" name="stitle[]" />
    <input type="text" size="24" name="stitle[]" />
    <input type="text" size="24" name="stitle[]" />
</form> 
```

现在，您在这三个文本框中输入的任何内容都将被返回，并且可以在“$_POST”变量中访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:47:12.287

如果您不想使用数组样式输入 [] 并且您可以控制字段的数量，那么您还可以执行以下操作：

```
for($f=0; $f < 5; $f++){ 

 echo '<input type="text" name="foo_'.$f.'">';

}

/*-----------server-side------------*/

for($f=0; $f < 5; $f++){ 

 if(isset($_POST['foo_'.$f])){
  //do something
 }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-01T09:07:35.567

您可以将此简单代码用于多个简单输入

```
$stitle=$_POST['stitle'];
for($j=0;$j<count($stitle);$j++)
{
    echo   $stitle[$j]."<br>";
} 
```

# php - PHP 和 MySQL 之间的周差异

> ID：14470175
> 
> 赞同：5
> 
> 时间：2013-01-22T23:52:52.153
> 
> 标签：php, mysql

我有以下查询。

```
SELECT COUNT(*), WEEK(date), YEAR(date) FROM myTable GROUP ON YEAR(date), WEEK(date) 
```

说它产生以下结果

```
32 33 2012
43 34 2012
39 35 2012
17 36 2012 
```

我现在想在 2012 年第 35 周获取所有 39 条记录。但是，我不希望`WEEK(date)=35 AND YEAR(date)=2012`在我的 WHERE 子句中使用它，因为它不使用索引。相反，我希望找到边界并使用条件。我也不想使用 BETWEEN 因为可能会出现舍入错误。

因此，我尝试以下想法，一切都很好，但没有得到 39 条记录。显然 MySQL 和 PHP 对周的处理方式不同。我看到 MySQL WEEK() 使用模式 0、2、4 和 6，它们都返回从星期日开始的一周。理想情况下，我会拥有人们最常用的一个，最重要的是它与DateTime提供的相同。我该怎么做？谢谢

```
$w=35;$y=2012;   //Given
$w=sprintf('%02d',$w);    //Make sure it is two digits
$date = new DateTime($y.'W'.$w);
$d1=$date->format('Y-m-d');
$date->add(new DateInterval('P1W'));
$d2=$date->format('Y-m-d');
$sql='SELECT * FROM myTable WHERE date >= ? AND date < ?'; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T00:01:10.327

关于 MySQL 的工作方式，您走在正确的轨道上，有各种模式用于与周相关的函数，可以产生不同的结果。[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

据我了解，相当于 PHP 日期逻辑的 MySQL 模式是模式 3，即 ISO 星期日期标准[http://en.wikipedia.org/wiki/ISO_week_date](http://en.wikipedia.org/wiki/ISO_week_date)

这有从星期一开始的周数和第 1-53 周。

所以你需要使用`WEEK(date_field, 3)`来获得 PHP 兼容的值。

As an alternate approach, one thing I have found handy in cases where you need the ability to flexibly query on different date ranges or aggregations (Q1- Q4, H1 - H2, etc.), or where you might need to utilize different weeks than PHP supports is to use a date helper table in MySQL (similar to what one may use as a date dimension table in a data warehouse, if you are familiar with that). It can give you a convenient table to join against in order to look up date ranges. Something like this should work:

[http://databobjr.blogspot.com/2012/06/create-date-dimension-table-in-mysql.html](http://databobjr.blogspot.com/2012/06/create-date-dimension-table-in-mysql.html)

# delphi - 枚举 TChromium 中的 DOM 节点

> ID：14470176
> 
> 赞同：8
> 
> 时间：2013-01-22T23:53:16.230
> 
> 标签：delphi, tchromium

我正在尝试使用以下代码（在 XE2 下）枚举 DOM 节点。

我从 SO 中给出的答案中借用了大部分内容，但由于某种原因，它没有做任何事情。

IOW， ProcessDOM() 永远不会被调用。

而且，我束手无策。

有人可以告诉我我在这里做错了什么。

提前致谢。

```
procedure ProcessNode(ANode: ICefDomNode);
var
  Node1: ICefDomNode;
begin
  if Assigned(ANode) then begin
    Node1 := ANode.FirstChild;
    while Assigned(Node1) do begin
      {Do stuff with node}
      ProcessNode(Node1);
      Node1 := Node1.NextSibling;
    end;
  end;
end;

procedure ProcessDOM(const ADocument: ICefDomDocument);
begin
  ProcessNode(ADocument.Body);
end;

procedure TMainForm.Chrome1LoadEnd(Sender: TObject; const ABrowser: ICefABrowser; const AFrame: ICefAFrame; AStatus: Integer);
begin
  if Assigned(AFrame) then AFrame.VisitDomProc(ProcessDOM);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:40:40.450

我遇到了同样的问题，我使用了 dcef3 附带的演示 guiclient。使用以下它可以工作。

```
type TCustomRenderProcessHandler = class(TCefRenderProcessHandlerOwn)
  protected
    function OnProcessMessageReceived(const browser: ICefBrowser; sourceProcess: TCefProcessId; const message: ICefProcessMessage): Boolean; override;
end;

Chromium1.browser.SendProcessMessage(PID_RENDERER, TCefProcessMessageRef.New('visitdom')); 

function TCustomRenderProcessHandler.OnProcessMessageReceived(browser: ICefBrowser; sourceProcess: TCefProcessId; message: ICefProcessMessage): Boolean;
begin 
  if (message.Name = 'visitdom') then begin
    browser.MainFrame.VisitDomProc(
        procedure(const doc: ICefDomDocument) 
        begin
          ProcessNode(Doc.Body);
        end);
    Result := True;
  end; 
end;

initialization
  CefRenderProcessHandler := TCustomRenderProcessHandler.Create; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:49:20.390

You need to add a procedure to the handler. procedure ProcessNode(ANode: ICefDomNode);

Read this: [1](https://stackoverflow.com/questions/14470176/enumerating-dom-nodes-in-tchromium)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T03:11:08.930

正如这篇[博客](http://joelverhagen.com/blog/2013/12/visiting-the-dom-with-cefglue/)所指出的，访问渲染页面的 DOM 时的主要困难是您只能在与该页面的关联渲染器相同的进程中这样做。

您不能从浏览器线程访问 dom，您必须在渲染器线程中进行。

首先，将消息（如访问域）从浏览器进程转发到渲染进程

```
procedure TMainForm.crmLoadEnd(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer);
var
  msg : ICefProcessMessage;
begin
  if IsMain(browser, frame) then
    FLoading := False;

  msg := TCefProcessMessageRef.New('visitdom');
  browser.SendProcessMessage(PID_RENDERER, msg);
end; 
```

其次，创建一个 TCustomRenderProcessHandler 来处理消息，将结果发送回浏览器进程。

```
function TCustomRenderProcessHandler.OnProcessMessageReceived(
  const browser: ICefBrowser; sourceProcess: TCefProcessId;
  const message: ICefProcessMessage): Boolean;
begin
  Result := False;
  if (message.Name = 'visitdom') then
  begin
      browser.MainFrame.VisitDomProc(
        procedure(const doc: ICefDomDocument)
          function ProcessNode(ANode: ICefDomNode) : String;
          var
            Node: ICefDomNode;
          begin
            Result := 'Not Found';
            if Assigned(ANode) then
            begin
              Node := ANode.FirstChild;
              while Assigned(Node) do
              begin
                if Node.ElementTagName='DIV' then
                begin
                  if Node.GetElementAttribute('class')='tv-panels' then
                  begin
                    Result := 'Found';
                    Exit;
                  end;
                end;
                ProcessNode(Node);
                Node := Node.NextSibling;
              end;
            end;
          end;
        var msg : ICefProcessMessage;
        begin
          msg := TCefProcessMessageRef.New('visitdom');
          msg.ArgumentList.SetString(0, processNode(doc.Body));
          browser.SendProcessMessage(PID_BROWSER, msg);
        end);
      Result := True;
  end;
end; 
```

第三，在浏览器进程上，创建一个处理程序来处理从渲染进程发回的消息。

```
procedure TMainForm.crmProcessMessageReceived(Sender: TObject;
  const browser: ICefBrowser; sourceProcess: TCefProcessId;
  const message: ICefProcessMessage; out Result: Boolean);
begin
  Result := False;
  if (message.Name = 'visitdom') then
  begin
    StatusBar.SimpleText := message.ArgumentList.GetString(0);
    Result := True;
  end;
end; 
```

请注意，在调试时，在渲染过程中放置​​断点永远不会起作用。它永远不会到达那里。

# ruby-on-rails-3 - Rails 外国人插件

> ID：14470177
> 
> 赞同：0
> 
> 时间：2013-01-22T23:53:25.003
> 
> 标签：ruby-on-rails-3, foreigner

我的用户表应该有一个 role_id（尚未添加到我的表中）我的角色表使用了默认的主 ID：id

我目前正在尝试使用看起来像的外国人插件......

```
class AddForeignKeyToUserFromRole < ActiveRecord::Migration
  def change
    add_foreign_key( :users,:roles )
  end
end 
```

但我的错误是：Mysql2::Error: Key column 'role_id' doesn't exist in table: ALTER TABLE `users`ADD CONSTRAINT `users_role_id_fk`FOREIGN KEY ( `role_id`) REFERENCES `roles`(id)

到底是怎么回事？？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:56:37.853

`role_id`，就像它说的那样，就像你说的那样？

当表列不存在时，如何在表列上设置外键？

# c++ - wxWidgets（甚至 OOP GUI）多个窗口

> ID：14470189
> 
> 赞同：0
> 
> 时间：2013-01-22T23:55:06.547
> 
> 标签：c++, oop, user-interface, window, wxwidgets

我有点卡住了；关于在 OOP 中生成多个表单。

消息循环大部分时间是（wxWidget的情况）window->show();

```
bool MyApp::OnInit()
{
    MainWindow *oWindow = new MainWindow(wxT("My Window"));
    oWindow->Show(true);

    return true;
} 
```

**其他人有 oWindow->run()，但无论如何我的问题是：**

我创建了第二个线程，其结构与上述函数完全相同，并调用了消息循环方法。问题是窗口突然出现然后消失，这对我来说没有意义。但是，如果我打电话：

```
MainWindow *oWindow = new MainWindow(wxT("My Window"));
        oWindow->Show(true);
MainWindow *oWindow2 = new MainWindow(wxT("My Window"));
        oWindow2->Show(true); 
```

它会起作用，但我不希望这样，因为我需要跟踪我创建的窗口并将它们放在单独的线程上。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:00:24.743

你不能在主线程以外的任何地方运行 wxWidgets 窗口。

*“GUI 调用，例如对 wxWindow 或 wxBitmap 的调用在辅助线程中根本不安全，并且可能会过早结束您的应用程序。这是由于几个原因，包括底层原生 API 和 wxThread 不运行 GUI 的事实事件循环类似于 MFC 等其他 API。”*

[http://docs.wxwidgets.org/2.8/wx_wxthread.html](http://docs.wxwidgets.org/2.8/wx_wxthread.html)

顺便说一句，我无法想象在任何情况下你想做的都是一个好主意。永远***不需要***在多个线程中调整窗口。

Windows 程序是事件驱动的。您可以拥有任意数量的顶级窗口，但应该只有一个事件队列，以便两个窗口上的事件不会最终争用相同的资源。这就是为什么 wxWidgets 会阻止您尝试创建两个都处理 Windows 事件的线程。

# java - 这个 actionPerformed 如何与我的按钮交互？

> ID：14470191
> 
> 赞同：0
> 
> 时间：2013-01-22T23:55:23.370
> 
> 标签：java, swing, button

我试图让用户选择他们想要在我的 GUI 上绘制的形状。我有一系列按钮：圆形、方形和矩形。我的 actionListener 在向我的控制台打印一个字符串时工作，但它不会在我的 GUI 上显示形状。如何使用`actionCommand`在我的面板上绘制该形状。

```
public void paintComponent(Graphics g) {
    g2D = (Graphics2D) g;
    //Rectangle2D rect = new Rectangle2D.Double(x, y, x2-x, y2-y);
    //g2D.draw(rect);
      repaint();
}

public void actionPerformed(ActionEvent arg0) { 
    if(arg0.getActionCommand().equals("Rect")){     
        System.out.println("hello");
        Rectangle2D rect = new Rectangle2D.Double(x, y, x2-x, y2-y);
        g2D.draw(rect); //can only be accessed within paintComponent method
        repaint();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:04:08.077

如果您首先绘制矩形然后要求重新绘制矩形将消失。

您应该将新形状存储在一个临时变量中并在paintComponent 中渲染它。

```
private Rectangle2D temp;

// inside the actionPerformed
    temp = new Rectangle2D.Double(x, y, x2-x, y2-y);
    repaint();

// inside the paintComponent
    if(temp != null) {
        g2D.draw(temp);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T06:54:25.790

使矩形成为局部变量的字段。在 actionPerformed 中创建正确的矩形并调用 repaint()。然后将调用paintComponent()。应该是这样的

```
public void paintComponent(Graphics g) {
    g2D = (Graphics2D) g;
    g2D.draw(rect);
} 
```

# java - org.jboss.weld.exceptions.DeploymentException: WELD-001408 不满足类型的依赖关系

> ID：14470193
> 
> 赞同：0
> 
> 时间：2013-01-22T23:55:24.480
> 
> 标签：java, jboss, jboss7.x

我有一个`LoginCrudService`依赖为

```
 @Inject
    public LoginCrudService(@Nonnull @LoginService final EntityManager entityManager) {
        super(entityManager);
    } 
```

在哪里`@LoginService`正确指向正确的界面

```
@Qualifier
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.CONSTRUCTOR, ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.TYPE})
public @interface LoginService {
} 
```

当我部署它时`JBoss AS 7.1`，我看到

```
org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [EntityManager] with qualifiers [@LoginService] at injection point [[parameter 1] of [constructor] @Inject public com.myorg.bb.persistence.LoginCrudService(EntityManager)]
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:275)
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:244)
    at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:107)
    at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:127)
    at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:346)
    at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:331)
    at org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:366)
    at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:83)
    at org.jboss.as.weld.services.WeldService.start(WeldService.java:76)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Exception 0 : 
```

这个错误是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:00:47.537

我怀疑您的应用程序缺少库。

应该通过检查位于 JBOSS_HOME /standalone/log/server.log 的 JBoss 服务器日志来*发现*异常

# php - Facebook PHP SDK 和 Codeigniter：无法加载配置

> ID：14470194
> 
> 赞同：0
> 
> 时间：2013-01-22T23:55:40.120
> 
> 标签：php, codeigniter, facebook-php-sdk

我的配置/facebook.php

```
$config['appId']        = 'XXXXX';
$config['secret']       = 'XXXX';
$config['fb_access_token'] = 'XXXXXX'; 
```

我的控制器：

```
$this->load->library('Facebook');  
echo $this->config->item('fb_access_token'); 
```

令牌不输出任何内容？但是我知道库正在加载，因为我可以调用 getAppID ok。它似乎没有加载这个配置文件。

还从控制器尝试过这个：

```
$this->config->load("facebook",TRUE);
$config = $this->config->item('facebook');
$this->load->library('facebook', $config); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:21:40.737

加载库的正确方法：

```
$this->config->load('facebook');
$config = array(
               'appId' => $this->config->item('appId'),
               'secret' => $this->config->item('secret'),
);
$this->load->library('facebook', $config); 
```

您只能在之后设置访问令牌：

```
$this->facebook->setAccessToken($this->config->item('fb_access_token')); 
```

# jquery - jQuery 获取元素的 html() 的更新值

> ID：14470199
> 
> 赞同：3
> 
> 时间：2013-01-22T23:56:22.143
> 
> 标签：jquery, tinymce

在下面的代码中，我绑定了 span 的 click 事件，以便它触发 checkTOC 函数。

在该函数中，我将匹配元素的计数存储在 count 变量中。这很好用，只要在页面加载后内容没有改变。但是，count 的值似乎不受#content div 的页面加载更改的影响。

如何更改代码以使计数反映#content html 的更新值？

```
if(typeof jQuery!="undefined")
    {
        jQuery(document).ready(function($)
        {

        var checkTOC = function()
        {
            //find the count of <!--nextpage--> elements
            var count = jQuery('#content').html().split("&lt;!--nextpage--&gt;").length - 1;

            alert(count);//ALWAYS RETURNS THE INITIAL COUNT, REGARDLESS IF ACTUAL COUNT IS CHANGED AFTER PAGE LOAD VIA HTML EDITING

            var pageurl = jQuery("#view-post-btn a").attr("href");
            var htmlStrTOCpre = jQuery("#cb2_customTOC").text();
            var htmlStrTOC  = '<summary>Table of Contents</summary>\n';
            htmlStrTOC += '<ol>\n';
            htmlStrTOC += '    <li><a href="'+pageurl+'">Introduction</a></li>\n';

            for (var i = 2; i < count+2; i++) {
                htmlStrTOC += '    <li><a href="'+pageurl+i+'/">Page'+i+'</a></li>\n';
            }

            htmlStrTOC += '</ol>';

            jQuery("#cb2_customTOC").val(htmlStrTOC);
        }

        jQuery("#cb-toc-click").bind("click", checkTOC);

        });
    } 
```

HTML 代码

```
<span id="cb-toc-click">Paste Table of Contents</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:58:33.213

> alert(count) 总是返回相同的值。与 alert(jQuery('#content').html()) 相同——</p>

`jQuery('#content')`这里的问题是，由于tinymce 在编辑器初始化时创建了一个可内容编辑的 iframe，然后用于编辑内容，因此编辑器内容不在其中。这个内容被写回了几个tinymce事件。

要获取最近的编辑器内容，您应该使用以下内容

```
$(tinymce.get('your_editor_id').getBody()).html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:21:20.240

您可以使用 vanilla JS 或者更确切地说，`#content`递归遍历 DOM 的子节点并检查它们的[`element.nodeType`](https://developer.mozilla.org/it/docs/DOM/element.nodeType)值。如果它等同于`Node.COMMENT_NODE`（或者只是`8`如果您更喜欢幻数；）则意味着您正在处理评论。考虑到这一点，您可以构建任何类型的逻辑：

```
var commentCount = 0;
//anonymous function to be called recursively
(function(D) {
    //if this is a comment, increment the counter
    8===D.nodeType&&commentCount++;
    //call the same function recursively for every child node
    D=D.firstChild;
    while (D) {
        arguments.callee(D);
        D=D.nextSibling;
    }
})(document.getElementById('content'));//start with #content 
```

[摆弄](http://jsfiddle.net/ovfiddle/EuYJK/2/)

话虽如此，我同意这样的评论，即如果您可以控制标记，则有更好的方法来处理任务。

# javascript - 具有现有 id 值的 Knockout Cascading Dropdowns

> ID：14470203
> 
> 赞同：0
> 
> 时间：2013-01-22T23:56:41.340
> 
> 标签：javascript, knockout.js

我有 2 个从可观察数组填充的下拉列表。第二个由第一个结果过滤。这工作正常。即使第二个 id 的值是在绑定之前设置的，绑定似乎会擦除它并且不会再次更改它。

我也不明白为什么它不会显示viewModel的json。

html

```
 <p>
     <label>Serial Number</label>
     <span data-bind="text: PartNumber"></span>
     <span data-bind="text: Revision"></span>
     <span data-bind="text: SequenceNumber"></span>
</p>      

<label>Description</label>        
<input data-bind="value: Description" />

<label>Usage</label>
<select data-bind="options: UsageTypes, optionsText: 'UsedType', optionsValue: 'UsedTypeID', value: UsedTypeID"></select>
<select data-bind="options: UsageFiltered, optionsText: 'UsedOn', optionsValue: 'UsedOnID', optionsCaption: 'select...', value: UsedOnID, visible:UsedTypeID"></select>

<p data-bind="text: ko.toJSON(viewModel)"></p> 
```

javascript

```
var data = {"PartNumber":"SAMPLE123456","Revision":"D","SequenceNumber":"1","SerialNumber":"SAMPLE123456D001","Description":"This is a test","SupplierID":"4","UsedTypeID":"U","UsedOnID":0} ;

var viewModel = ko.mapping.fromJS(data);

viewModel.UsageTypes = ko.observableArray( [{"UsedTypeID":"P","UsedType":"Product"},{"UsedTypeID":"S","UsedType":"Series"},{"UsedTypeID":"U","UsedType":"Unknown"}]);
viewModel.UsagesList = ko.observableArray(
[{"UsedTypeID":"P","UsedType":"Product","UsedonID":14,"UsedOn":"banana"},
 {"UsedTypeID":"P","UsedType":"Product","UsedonID":16,"UsedOn":"kjhkjhkj"},
 {"UsedTypeID":"P","UsedType":"Product","UsedonID":7,"UsedOn":"prod1234"},
 {"UsedTypeID":"P","UsedType":"Product","UsedonID":15,"UsedOn":"things"},
 {"UsedTypeID":"P","UsedType":"Product","UsedonID":20,"UsedOn":"thinkgs2"},
 {"UsedTypeID":"S","UsedType":"Series","UsedonID":17,"UsedOn":";lkgd;ldf"},
 {"UsedTypeID":"S","UsedType":"Series","UsedonID":18,"UsedOn":"df;lkjdflk"},
 {"UsedTypeID":"S","UsedType":"Series","UsedonID":13,"UsedOn":"fdsdfsdf"},
 {"UsedTypeID":"S","UsedType":"Series","UsedonID":12,"UsedOn":"mn,m,m,"},
 {"UsedTypeID":"S","UsedType":"Series","UsedonID":19,"UsedOn":"rubberchicken"},
 {"UsedTypeID":"S","UsedType":"Series","UsedonID":11,"UsedOn":"sdfsdfsdf"},
 {"UsedTypeID":"U","UsedType":"Unknown","UsedonID":0,"UsedOn":"Unknown"}]);

viewModel.UsageFiltered = ko.computed(function(){
    var filter = this.UsedTypeID();
    if (!filter){
        return this.UsagesList();
    } else {
        return ko.utils.arrayFilter(this.UsagesList(), function(item) {
            return filter === item.UsedTypeID    
        }); 
    }
}, viewModel);

ko.applyBindings(viewModel); 
```

[见小提琴](http://jsfiddle.net/jimconstable/5rg6e/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:39:10.787

我添加了一个计算方法，该方法返回 JSON 并将其绑定到段落标记的 HTML，并且它起作用了。

```
<p data-bind="html: jsonText"></p>

viewModel.jsonText = ko.computed(function(){
    return ko.toJSON(viewModel);
}, viewModel); 
```

在这里更新了你的小提琴：

[http://jsfiddle.net/5rg6e/5/](http://jsfiddle.net/5rg6e/5/)

# python - 在 Python 中调用具有混合数据类型参数的子进程

> ID：14470208
> 
> 赞同：3
> 
> 时间：2013-01-22T23:56:59.790
> 
> 标签：python, subprocess

我对如何完成这项工作感到有些困惑。

我需要做的是从 Python 脚本中调用一个外部命令，该命令将几个参数和一个文件名作为输入。

让我们调用我调用的可执行文件“prog”，输入文件“file”，所以命令行（在 Bash 终端中）如下所示：

```
$ prog --{arg1} {arg2} < {file} 
```

上面的 {arg1} 是一个字符串，而 {arg2} 是一个整数。

如果我使用以下内容：

```
#!/usr/bin/python
import subprocess as sbp 
sbp.call(["prog","--{arg1}","{arg2}","<","{file}"]) 
```

结果是“prog”的错误输出，它声称输入丢失 {arg2}

以下会产生一个有趣的错误：

```
#!/usr/bin/python
import subprocess as sbp 
sbp.call(["prog","--{arg1} {arg2} < {file}"]) 
```

所有空格似乎都已从第二个字符串中删除，并在最后附加等号：

```
command not found --{arg1}{arg2}<{file}= 
```

这种行为对我来说似乎没有任何意义，而且从网上找到的 Python 手册页中也没有什么可以参考的。请注意，将 sbp.call 替换为 sbp.Popen 并不能解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:00:21.513

问题是这`< {file}`实际上不是程序的参数，而是 shell 设置重定向的语法。你可以告诉 Python 使用 shell，或者你可以自己设置重定向。

```
from subprocess import *

# have shell interpret redirection
check_call('wc -l < /etc/hosts', shell=True)

# set up redirection in Python
with open('/etc/hosts', 'r') as f:
    check_call(['wc', '-l'], stdin=f.fileno()) 
```

第一种方法的优点是打字更快、更容易。但是，有很多缺点：由于您正在启动外壳，它可能会变慢；它可能是不可移植的，因为它取决于操作系统外壳的语法；当文件名中有空格或其他特殊字符时，它很容易中断。

所以首选第二种方法。

# requirejs - 在 require.js 中以编程方式更新缓存“bust”变量

> ID：14470211
> 
> 赞同：1
> 
> 时间：2013-01-22T23:57:15.373
> 
> 标签：requirejs

我正在尝试更新 require.js 中的 bust 变量，因此浏览器被迫重新获取而不是从缓存中加载资源。我发现这里有几个人问过类似的问题。我正在尝试使用一段简单的代码。

```
<html>
<head>
    <title>jQuery+RequireJS Sample Page</title>
    <!-- This is a special version of jQuery with RequireJS built-in -->

    <script>
    var require = {
        urlArgs : "bust="+getRandom()
    };
    </script>
    <script data-main="scripts/main" src="scripts/require-jquery.js"></script>

    <script>
    function getRandom() {
    var buildNumber;
        $.get("/resource/buildNumber", function(data) {
            buildNumber = data;
        });
        return buildNumber;
    }
    </script>
</head>
<body>
    <h1 id="heading">jQuery+RequireJS Sample Page</h1>
    <p>Look at source or inspect the DOM to see how it works.</p>
</body> 
```

我正在尝试从服务器上的属性文件中获取我的内部版本号的值。但我收到以下错误：

```
Uncaught ReferenceError: getRandom is not defined 
```

所以我尝试了这个：

```
<script data-main="scripts/main" src="scripts/require-jquery.js"></script>
    <script>
    var require = {
        urlArgs : "bust="+getRandom()
    };
    function getRandom() {
        var buildNumber;
        $.get("/resource/buildNumber", function(data) {
            buildNumber = data;
        });
        return buildNumber;
    }
    </script> 
```

但我得到这个错误：

```
Uncaught TypeError: Property 'require' of object [object Object] is not a function 
```

看起来在声明 require-jquery.js 之前就必须设置 bust 变量，但是如何在不访问 jquery 库的情况下访问服务器端 API？我想为每个构建更新 bust 变量。

任何正确方向的指针都将不胜感激。

谢谢。

# python - 有没有办法加快 django 中的身份验证功能？

> ID：14470218
> 
> 赞同：8
> 
> 时间：2013-01-22T23:57:44.390
> 
> 标签：python, mysql, django, performance, apache

我们正在使用 django 为 mysql 制作一个 json webservice 前端。我们在 EC2 实例上运行 apache 和 django，在 RDS 实例上运行 MySQL。我们已经开始使用 apache bench 对性能进行基准测试，并且得到了一些非常糟糕的性能数据。我们还注意到，在运行测试时，我们的 apache/django 实例在非常低的负载下达到 100% 的 cpu 使用率，而 MySQL 实例的 cpu 使用率从未超过 2%。

我们试图理解这一点并隔离问题，所以我们做了几个 ab 测试：

1.  来自 apache 的静态 html 页面请求——~2000 个请求/秒。
2.  在 django 中执行一个小型 python 函数的请求，并且没有数据库交互——~1000 个请求/秒。
3.  执行我们的 django webservice 函数之一的请求，该函数调用身份验证，然后执行非常简单的查询以从表中获取一条记录 - 11 个请求/秒
4.  与 3 相同，但注释了对身份验证的调用 -- 95 个请求/秒。

为什么认证这么慢？是向数据库写入数据，找到十亿位数的 pi，什么？

我们希望在这些函数中保留对身份验证的调用，因为我们不想让任何可以猜到 url 的人都可以使用它们。这里有没有人注意到身份验证很慢，任何人都可以提出一种补救方法它？

非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T05:37:12.283

我不是身份验证和安全方面的专家，但以下是关于为什么会发生这种情况以及如何提高性能的一些想法。

由于密码存储在数据库中，为了使其存储安全，不存储明文密码，而是存储其哈希值。这样，您仍然可以通过将输入密码的计算哈希值与存储在数据库中的哈希值进行比较来验证用户登录。这增加了安全性，因此如果恶意方将获得数据库的副本，解码明文密码的唯一方法是使用彩虹表或进行暴力攻击。

这就是事情变得有趣的地方。根据摩尔定律，计算机正以指数级速度增长，因此计算哈希函数在时间上变得更便宜，尤其是像 md5 或 sha1 这样的快速哈希函数。这带来了一个问题，因为拥有当今可用的所有计算能力以及快速散列函数，黑客可以相对容易地暴力破解散列密码。为了解决这个问题，可以做两件事。一种是多次循环散列函数（散列的输出被反馈到散列中）。然而，这并不是很有效，因为它只会将散列函数的复杂性增加一个常数。这就是为什么首选第二种方法的原因，即使实际的散列函数更复杂且计算成本更高。具有更复杂的功能，计算哈希需要更多时间。即使计算需要一秒钟，对最终用户来说也没什么大不了的，但对于暴力攻击来说却是个大问题，因为必须计算数百万个哈希值。这就是为什么从 Django 1.4 开始，它使用了一个计算量非常大的函数，称为 PBKDF2。

回到你的答案。正是因为这个功能，当您启用身份验证时，您的基准测试数量会急剧下降，而您的 CPU 会上升。

以下是一些可以提高性能的方法。

*   从 Django 1.4 开始，您可以更改默认身份验证功能 ( [docs](https://docs.djangoproject.com/en/1.4/topics/auth/#how-django-stores-passwords) )。如果您不需要太多安全性，您可以将默认函数更改为 SHA1 或 MD5。这应该会提高性能，但请记住，安全性会弱得多。我个人的观点是安全性很重要，值得花额外的时间，但如果它在您的应用程序中没有保证，那么您可能需要考虑这一点。
*   使用会话。昂贵的散列函数仅在初始登录时计算。一旦用户登录，就会为该会话创建一个会话，并将一个带有会话 ID 的 cookie 发送给用户。然后在后续请求中，用户上传一个 cookie，如果会话尚未过期，用户将自动进行身份验证（不要担心安全性，因为会话数据已签名......）。关键是，与计算昂贵的哈希函数相比，验证会话的计算成本要低得多。我猜在 ab 测试中你没有发送会话 cookie。尝试通过发送会话 cookie 来做一些测试，看看它是如何执行的。如果由于您正在制作 JSON API，因此发送 cookie 不是一个真正的选项，然后您可以修改会话后端以通过会话 GET 参数而不是 cookie 接受会话数据。但是不确定这样做的安全后果是什么。
*   切换到 nginx。我不是部署专家，但根据我的经验，与 Apache 相比，nginx 对 Django 更快、更友好。我认为您可能特别感兴趣的一个优势是 nginx 能够拥有多个工作进程以及它能够使用 proxy_pass 来处理对 Django 进程的请求。如果您将有多个工作进程，则可以通过 proxy_pass 将每个工作进程指向一个单独的 Django 进程，这将有效地将多处理添加到 Django。另一种选择是，如果您使用 gevent WSGI 服务器之类的东西，您可以在 Django 进程中创建一个池，这也可能会提高性能。由于您的 CPU 负载已经达到 100%，因此不确定这些是否会显着提高您的性能，但可能需要研究一下。

# powershell - 如何在 PowerShell 的 Get-ChildItem -Exclude cmdlet 中对目录使用通配符

> ID：14470223
> 
> 赞同：13
> 
> 时间：2013-01-22T23:58:05.053
> 
> 标签：powershell, directory, get-childitem

举个简单的例子，假设我有一个文件夹，`Root`，其中包含三个文件夹；文件夹 1、文件夹 2 和文件夹 3。这些文件夹中的每一个（包括`Root`）都有一堆文件，包括 .pdb 文件。我想使用[PowerShell Get-ChildItem cmdlet](http://technet.microsoft.com/en-us/library/hh849800.aspx)返回所有文件夹（包括`Root`）中的所有文件，但 Folder2 中的 .pdb 文件除外。如果我使用：

```
Get-ChildItem -Path C:\Root -Recurse -Exclude *.pdb 
```

然后我取回所有目录中的所有非 .pdb 文件，这与我想要的很接近。所以我假设以下将实现我想要的：

```
Get-ChildItem -Path C:\Root -Recurse -Exclude \*\\Folder2\\*.pdb 
```

但这并不排除 Folder2（或任何其他文件夹）中的任何 pdb 文件。我已经为`-Exclude`过滤器尝试了几种变体，例如`Folder2\\\*.pdb`，但我无法让它工作。事实上，即使使用`\*\\\*.pdb`似乎也无济于事；没有 .pdb 文件从任何文件夹中排除。

所以似乎通配符不能用于目录，只能用于文件名，但我认为我只是做错了什么。我发现[这篇文章解释了通配符和范围运算符](http://technet.microsoft.com/en-us/library/ee692793.aspx)，但不幸的是它没有讨论将它们与目录名称一起使用；只有文件名。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T01:16:28.403

我也没有看到 exclude 参数与目录一起使用。

您可以尝试将管道连接到[Where-Object](http://technet.microsoft.com/en-us/library/hh849715.aspx)。那是，

```
Get-ChildItem -Recurse *.pdb | Where-Object {$_.FullName -notMatch "folder2"} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-02T11:01:53.880

```
 gci "C:\Root" -Recurse | Where-Object {$_.FullName -notlike "*Folder2\*.pdb*"} | Export-CSV "C:\Root\Export.csv" -NoType 
```

尝试，测试和一个班轮:-)。这有效，因为我已复制您的文件夹和文件结构以进行复制。很抱歉，它迟到了几年。

显然，随意调整代码以满足您的需求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T14:31:40.970

OhadH 的答案几乎就在那里。

您可以使用

```
Get-ChildItem -Recurse | Where-Object {$_.FullName -notmatch "folder2" -or $_.Name -notlike "*.pdb" } 
```

或者

```
Get-ChildItem -Recurse | ? {$_.FullName -notlike "*folder2*" -or $_.Name -notlike "*.pdb" } 
```

这取决于您的文件夹 2 所在的位置。但我想你明白了。

我不想这么说，但 PowerShell 不像[Bash](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29)或其他 shell 那样方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T09:12:30.613

使用星号和递归参数：

```
Get-ChildItem -Path "C:\Users\*\AppData\Roaming\Microsoft\"
              -Filter "*config*" -Recurse | Select -ExpandProperty FullName 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T09:56:50.590

这应该适合你：

```
Get-ChildItem -Path C:\Root -Exclude "*\Folder2\*.pdb" -Recurse 
```

# php - cURL 无法在本地服务器中使用客户端证书

> ID：14470225
> 
> 赞同：1
> 
> 时间：2013-01-22T23:58:11.700
> 
> 标签：php, curl, https, xampp, ssl-certificate

我使用 XAMPP 设置了本地服务器。我有两个 PHP 脚本，一个发送者和一个接收者。我正在尝试使用基于 SSL 的 HTTP (HTTPS) 将 XML 文件从发送方发送到接收方。

我创建了一个自签名证书，配置了 XAMPP，并且我在我的发件人上使用了这个代码：

```
<?php
  /*
   * XML Sender/Client.
   */
  // Get our XML. You can declare it here or even load a file.

  $xml = file_get_contents("data.xml");

  // We send XML via CURL using POST with a http header of text/xml.
  $ch = curl_init();

  //curl_setopt($ch, CURLOPT_SSLVERSION,3);

  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);

  curl_setopt($ch, CURLOPT_CAINFO,  getcwd().'ipm.crt');
  curl_setopt($ch, CURLOPT_SSLCERT, getcwd().'ipm.pem');

  curl_setopt($ch, CURLOPT_SSLCERTPASSWD,'pass');

  //i use this line only for debugging through fiddler. Must delete after done with debugging.
  curl_setopt($ch, CURLOPT_PROXY, '127.0.0.1:8888');

  // set URL and other appropriate options
  curl_setopt($ch, CURLOPT_URL, "https://ipv4.fiddler/iPM/receiver.php");
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
  curl_setopt($ch, CURLOPT_REFERER, 'https://ipv4.fiddler/iPM/receiver.php');
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $ch_result = curl_exec($ch);
  echo "Result = ".$ch_result;

  echo 'Curl error: ' . curl_error($ch);

  curl_close($ch);
  // Print CURL result.
?> 
```

但是我总是得到这个错误：`Curl error: unable to use client certificate (no key found or wrong pass phrase?)`

我可能会做错什么？密码是这个词`pass`。

我通过以下方式创建了我的 .crt：

```
openssl req -config openssl.cnf -new -out ipm.csr -keyout ipm.pem

openssl rsa -in ipm.pem -out ipm.key

openssl x509 -in ipm.csr -out ipm.crt -req -signkey ipm.key -days 365 
```

我不想把`SSL_VERIFYPEER`and`SSL_VERIFYHOST`设置为假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T14:24:18.290

尝试像这样交换文件：

```
curl_setopt($ch, CURLOPT_CAINFO, getcwd().'ipm.pem');
curl_setopt($ch, CURLOPT_SSLCERT, getcwd().'ipm.crt'); 
```

我怀疑你把它们弄错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T13:18:51.373

我认为您已经解决了问题，但我可以看到两个问题：

1.  您忘记了 and 之间的`getcwd()`斜线`filename`：
    `curl_setopt($ch, CURLOPT_CAINFO, getcwd().'/ipm.crt');`
    `curl_setopt($ch, CURLOPT_SSLCERT, getcwd().'/ipm.pem');`
2.  `@donparalias`如前所述，您需要附加一个密钥文件

# html - 使用最小宽度和最大宽度缩放 CSS Tile Grid

> ID：14470228
> 
> 赞同：0
> 
> 时间：2013-01-22T23:58:39.377
> 
> 标签：html, css

我试图弄清楚如何在 CSS 中使用不小于 200 像素但不大于 400 像素的图块制作网格。但我希望它们在这些百分比之间进行缩放，现在它们保持在 400 的最大值，如果你缩小窗口，它们就会下降到下一行。我宁愿让它们都缩小到 350 像素并且仍然合适，或者 300 像素而不是仅仅环绕。提前谢谢。

```
<html>
<head>
    <title></title>
    <style type="text/css">

    .boxes{
        min-width: 200px;
        max-width: 400px;
        width: auto;
        height: 200px;
        background-color: #dedede;
        float: left;
        margin-right: 20px;     
        margin-bottom: 20px;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        -khtml-border-radius: 5px;
        border-radius: 5px;
        padding: 15px;

    }
    </style>
</head>
<body>

<div class="boxes">Aenean malesuada feugiat scelerisque. Aliquam ultricies sem nunc, id tempus est. Donec et dui sem. Donec et diam nunc. Nullam vel pulvinar dui. In aliquet feugiat magna vel eleifend. Suspendisse fermentum tincidunt urna, ut sagittis enim blandit non. In placerat, libero et convallis molestie, eros ipsum imperdiet nisi, quis cursus mi dolor eu elit.</div>
<div class="boxes">Aenean malesuada feugiat scelerisque. Aliquam ultricies sem nunc, id tempus est. Donec et dui sem. Donec et diam nunc. Nullam vel pulvinar dui. In aliquet feugiat magna vel eleifend. Suspendisse fermentum tincidunt urna, ut sagittis enim blandit non. In placerat, libero et convallis molestie, eros ipsum imperdiet nisi, quis cursus mi dolor eu elit.</div>
<div class="boxes">Aenean malesuada feugiat scelerisque. Aliquam ultricies sem nunc, id tempus est. Donec et dui sem. Donec et diam nunc. Nullam vel pulvinar dui. In aliquet feugiat magna vel eleifend. Suspendisse fermentum tincidunt urna, ut sagittis enim blandit non. In placerat, libero et convallis molestie, eros ipsum imperdiet nisi, quis cursus mi dolor eu elit.</div>
<div class="boxes">Aenean malesuada feugiat scelerisque. Aliquam ultricies sem nunc, id tempus est. Donec et dui sem. Donec et diam nunc. Nullam vel pulvinar dui. In aliquet feugiat magna vel eleifend. Suspendisse fermentum tincidunt urna, ut sagittis enim blandit non. In placerat, libero et convallis molestie, eros ipsum imperdiet nisi, quis cursus mi dolor eu elit.</div>
<div class="boxes">Aenean malesuada feugiat scelerisque. Aliquam ultricies sem nunc, id tempus est. Donec et dui sem. Donec et diam nunc. Nullam vel pulvinar dui. In aliquet feugiat magna vel eleifend. Suspendisse fermentum tincidunt urna, ut sagittis enim blandit non. In placerat, libero et convallis molestie, eros ipsum imperdiet nisi, quis cursus mi dolor eu elit.</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:28:10.267

将您的盒子包装在一个父 div 中，并`display: table`在父级和`display: table-cell`子级上使用。

像这样：

```
.boxes {
  max-width: 400px;
  min-width: 200px;
  width: auto;
  height: 200px;
  background-color: #dedede;
  margin-right: 20px;
  margin-bottom: 20px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  border-radius: 5px;
  padding: 15px;
  display: table-cell;
}
.boxes-parent {
  display: table;
  border-spacing: 15px; /* for spacing boxes apart */
} 
```

# java - 以前选择的 JTable 单元格在按键时触发编辑器，即使明确取消选择也是如此

> ID：14470230
> 
> 赞同：2
> 
> 时间：2013-01-22T23:58:46.040
> 
> 标签：java, swing, user-interface, jtable, listener

按照[这里的](https://sites.google.com/site/drjohnbmatthews/table)[垃圾神](https://stackoverflow.com/users/230513/trashgod)出色的例子，我整理了一个小演示，它以一种可能令人费解的方式完成了一项简单的任务。下面显示的 GUI 显示一列代表真/假值的图标。如果您单击一个图标，它会将值更改为与之相反的值。很像一个复选框，但外观不同，而且可扩展性更强（例如，我将来可以将其更改为循环遍历十几个符号，而不仅仅是两个布尔符号）。

![在此处输入图像描述](../Images/fe7699e4ca5e9f1b4c5b4e185eeb89bd.png)

我通过使用自定义编辑器来做到这一点，该编辑器是 JComponent 的虚拟扩展。不过，您甚至都看不到这个虚拟组件，因为一旦它接收到一个`MousePressed`事件，它就会导致编辑器`fireEditingStopped()`. 它工作得很好，除了我发现的一个奇怪的错误。如果您单击一个符号来更改它，然后将鼠标移动到屏幕上的其他位置并按下键盘键，它会在最后一个单击的单元格中弹出虚拟编辑器（这实际上是空白单元格），它会一直停留在那里，直到您将鼠标移入单元格或单击其他单元格。

作为对此的 hacky 修复，我在渲染器中添加了一行，它在渲染后总是取消选择整个表格。这很好用，我已经验证了整个表确实被取消了。但是，尽管如此，如果您按下键盘键，它**仍会**为最后编辑的单元格执行编辑器。如何防止这种行为？我的应用程序中有其他键盘侦听器，如果未选择任何单元格，我认为不应执行任何编辑器。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.imageio.ImageIO;
import javax.swing.AbstractCellEditor;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;

public class JTableBooleanIcons {

    private JFrame frame;
    private DefaultTableModel tableModel;
    private JTable table;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    JTableBooleanIcons window = new JTableBooleanIcons();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public JTableBooleanIcons() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        tableModel = new DefaultTableModel(new Object[]{"Words", "Pictures"},0);
        table = new JTable(tableModel);
        table.setRowHeight(40);
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});

        frame.getContentPane().add(table, BorderLayout.CENTER);

        table.getColumn("Pictures").setCellRenderer(new BooleanIconRenderer());
        table.getColumn("Pictures").setCellEditor(new BooleanIconEditor());

    }

    @SuppressWarnings("serial")
    private class BooleanIconRenderer extends DefaultTableCellRenderer implements TableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
                                                                        boolean hasFocus, int row, int col) {
            String iconFilename = null;
            if ((boolean) value) {
                iconFilename = "yes.png";
                value = true;
            } else {
                iconFilename = "no.png";
                value = false;
            }
            try {
                setIcon(new ImageIcon(ImageIO.read(BooleanIconRenderer.class.getResourceAsStream(iconFilename))));
            } catch (Exception e) {
                System.err.println("Failed to load the icon.");
            }
            if (isSelected) {
                this.setBackground(Color.white);
            } else {
                this.setBackground(Color.white);
            }
            table.getSelectionModel().clearSelection();
            return this;
        }
    }

    @SuppressWarnings("serial")
    private class BooleanIconEditor extends AbstractCellEditor implements TableCellEditor, MouseListener {

        private BooleanComponent boolComp;

        public BooleanIconEditor() {
            boolComp = new BooleanComponent(false);
            boolComp.addMouseListener(this);
        }

        @Override
        public Object getCellEditorValue() {
            return boolComp.getValue();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table,
                Object value, boolean isSelected, int row, int column) {
            boolComp.setValue(! (boolean) value);
            return boolComp;
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            this.fireEditingStopped();
        }

        @Override
        public void mousePressed(MouseEvent e) {
            this.fireEditingStopped();

        }

        @Override
        public void mouseReleased(MouseEvent e) {
            this.fireEditingStopped();
        }

        @Override
        public void mouseEntered(MouseEvent e) {
            this.fireEditingStopped();
        }

        @Override
        public void mouseExited(MouseEvent e) {
            this.fireEditingStopped();
        }

    }

    @SuppressWarnings("serial")
    private class BooleanComponent extends JComponent {
        private boolean value;

        public BooleanComponent(boolean value) {
            this.value = value;
        }

        public boolean getValue() {
            return value;
        }

        public void setValue(boolean value) {
            this.value = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:32:26.433

您的问题的原因是您实际上没有在编辑器中渲染任何内容。您依赖于用户只会“单击”单元格以更改其值的事实。我认为这有点短视，但是，这是你的程序。

要立即修复它，只需添加...

```
@Override
public boolean isCellEditable(EventObject e) {
    return (e instanceof MouseEvent);
} 
```

给你`BooleanIconEditor`。

在旁注中。

在您的单元格渲染器中，您不应该加载图像。这些应该作为构造函数的一部分预先缓存，或者更好的是，作为`static`字段变量。您可能正在这样做，但以防万一。

**更新**

当我谈到这个话题时。您应该避免从渲染器中更改表格的状态。这真的很不安全，并且可能会导致您陷入无限循环，因为表格会一次又一次地尝试重新渲染您所做的更改......

如果您真的想隐藏选择（我不确定您为什么要隐藏），您可以设置表格的选择以匹配表格背景颜色或使其成为透明颜色。不要忘记更改选择前景；）

**更新#2**

键盘支持的例子;) - 无法抗拒......

```
public class JTableBooleanIcons {

    private JFrame frame;
    private DefaultTableModel tableModel;
    private JTable table;
    private ImageIcon yesIcon;
    private ImageIcon noIcon;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    JTableBooleanIcons window = new JTableBooleanIcons();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public JTableBooleanIcons() {
        try {
            yesIcon = (new ImageIcon(ImageIO.read(BooleanIconRenderer.class.getResourceAsStream("/yes.png"))));
            noIcon = (new ImageIcon(ImageIO.read(BooleanIconRenderer.class.getResourceAsStream("/no.png"))));
        } catch (Exception e) {
            e.printStackTrace();
        }
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        tableModel = new DefaultTableModel(new Object[]{"Words", "Pictures"}, 0);
        table = new JTable(tableModel);
        table.setRowHeight(40);
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});
        tableModel.addRow(new Object[]{"click icon to change", false});
        tableModel.addRow(new Object[]{"click icon to change", true});

        frame.getContentPane().add(table, BorderLayout.CENTER);

        table.getColumn("Pictures").setCellRenderer(new BooleanIconRenderer());
        table.getColumn("Pictures").setCellEditor(new BooleanIconEditor());

    }

    @SuppressWarnings("serial")
    private class BooleanIconRenderer extends DefaultTableCellRenderer implements TableCellRenderer {

        public BooleanIconRenderer() {
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
                boolean hasFocus, int row, int col) {
            super.getTableCellRendererComponent(table, null, isSelected, hasFocus, row, col);
            if ((boolean) value) {
                setIcon(yesIcon);
            } else {
                setIcon(noIcon);
            }
            return this;
        }
    }

    @SuppressWarnings("serial")
    private class BooleanIconEditor extends AbstractCellEditor implements TableCellEditor, MouseListener {

        private BooleanComponent boolComp;
        private boolean isMouseEvent;

        public BooleanIconEditor() {
            boolComp = new BooleanComponent(false);
            boolComp.addMouseListener(this);
            InputMap im = boolComp.getInputMap(JComponent.WHEN_FOCUSED);
            ActionMap am = boolComp.getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0), "click");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "click");

            am.put("click", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Clicked");
                    boolComp.setValue(!boolComp.getValue());
                }
            });

        }

        @Override
        public boolean isCellEditable(EventObject e) {
            isMouseEvent = e instanceof MouseEvent;
            return true; //(e instanceof MouseEvent);
        }

        @Override
        public Object getCellEditorValue() {
            return boolComp.getValue();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table,
                Object value, boolean isSelected, int row, int column) {
            boolean state = (boolean) value;
            if (isMouseEvent) {
                state = !state;
            }
            boolComp.setValue(state);
            boolComp.setOpaque(isSelected);
            boolComp.setBackground(table.getSelectionBackground());
            return boolComp;
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            this.fireEditingStopped();
        }

        @Override
        public void mousePressed(MouseEvent e) {
            this.fireEditingStopped();

        }

        @Override
        public void mouseReleased(MouseEvent e) {
            this.fireEditingStopped();
        }

        @Override
        public void mouseEntered(MouseEvent e) {
            this.fireEditingStopped();
        }

        @Override
        public void mouseExited(MouseEvent e) {
            this.fireEditingStopped();
        }
    }

    @SuppressWarnings("serial")
    private class BooleanComponent extends JLabel {

        private boolean value;

        public BooleanComponent(boolean value) {
            this.value = value;
        }

        public boolean getValue() {
            return value;
        }

        public void setValue(boolean value) {
            this.value = value;
            if (value) {
                setIcon(yesIcon);
            } else{
                setIcon(noIcon);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:19:06.600

虽然@Mad 的[回答](https://stackoverflow.com/a/14470545/230513)显示了如何实现鼠标处理和键绑定，但另一种方法是使用`JToggleButton`、 的父级`JCheckBox`和合适的`Icon`. 切换按钮已经知道如何显示选择`Icon`和处理事件。修改后`ValueRenderer`如下图；`ValueEditor`不变；文本是可选的。

![图片](../Images/0e906e88863a298ea010350d84ec9296.png)

```
private static class ValueRenderer extends JToggleButton
    implements TableCellRenderer {

    private static final Color hilite = new Color(0xE8E8E8);
    private static final Icon YES = UIManager.getIcon("InternalFrame.maximizeIcon");
    private static final Icon NO = UIManager.getIcon("InternalFrame.closeIcon");

    public ValueRenderer() {
        this.setOpaque(true);
        this.setIcon(NO);
        this.setSelectedIcon(YES);
    }
    ...
} 
```

# ruby-on-rails-3 - 用 class 和 simple_forms 覆盖引导程序

> ID：14470231
> 
> 赞同：1
> 
> 时间：2013-01-22T23:58:48.600
> 
> 标签：ruby-on-rails-3, css, twitter-bootstrap, simple-form

我有以下 CSS 类：

```
.table-price-item {
  vertical-align: middle;
  margin-bottom: 10px;
  font-size: 0.875em;
  padding-right: 5px;
} 
```

以及 simple_forms 中的以下输入：

```
 <%= f.input :price, :input_html => { :class => "table-price-item" }, 
    :label => false, :as => :string, :readonly => true %> 
```

当表单呈现时，我得到了这个

```
<input class="string optional readonly table-price-item" ... 
```

table-price-item 没有被应用，因为它被以下内容覆盖：

```
textarea, input[type="text"], input[type="password"], input[type="datetime"], 
input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], 
input[type="week"], input[type="number"], input[type="email"], input[type="url"], 
input[type="search"], input[type="tel"], input[type="color"], .uneditable-input 
```

从引导程序。我怎样才能让它覆盖最后一个？

顺便说一句，table-price-item 也适用于 select2 和该表单上的其他项目。

css 的链接顺序：

```
<link href="/assets/bootstrap.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/select2.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:16:14.793

终于找到了解决办法。

由于在引导程序中对这些类进行了更详细的描述，因此它们被覆盖了。

解决此问题的一种方法是添加 !important

```
.table-price-item {
  vertical-align: middle !important;
  margin-bottom: 10px !important;
  font-size: 0.875em !important;
  padding-right: 5px !important;
} 
```

然后他们会获得优先权并被申请！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:27:32.197

在 Bootstrap CSS 之后包含您的自定义 CSS，它将覆盖这些样式。

# javascript - 以保证的顺序使用 javascript 打开窗口

> ID：14470232
> 
> 赞同：1
> 
> 时间：2013-01-22T23:58:50.487
> 
> 标签：javascript, jquery

我有在自己的窗口中打开 URL 列表的 javascript。我可以为每个窗口使用 window.open，但问题是有时浏览器并不总是按照我要求的打开顺序打开窗口，尤其是当有大量 URL 时。这些 URL 不在我的域中，所以我不能等待来自孩子的 onLoad 事件。在我打开下一个窗口之前，有什么方法可以确定子窗口是否打开？作为最后的手段，我想我可以在每次打开之间创建一个等待时间，但这更像是一种黑客行为，会减慢一切速度，虽然可能会使正确的订单更有可能，但它不能保证。例如：

```
<script type='text/javascript'>
var urls = new Array();
urls[0] = 'http://www.yahoo.com';
urls[1] = 'http://www.google.com';
urls[2] = 'http://www.facebook.com';

$(document).ready(function() {
    for (i=0; i<urls.length; i++) {
        window.open(urls[i]);
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:06:48.733

好吧，我想通了。无法查看远程 URL 中的子窗口是否打开。确实如此。但是，如果您在域中打开一个文件，该文件的唯一工作就是提醒父级它已打开，然后重定向到远程 URL，这样就可以了。像这样的东西：

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type='text/javascript'>
var urls = new Array();
urls[0] = 'http://www.yahoo.com';
urls[1] = 'http://www.google.com';
urls[2] = 'http://www.facebook.com';
urls[3] = 'http://www.linkedin.com';
urls[4] = 'http://www.twitter.com';
$(document).ready(function() {
    var interval = null;
    function doNext(i) {
        if (i < urls.length) {
            // console.log("Doing: " + i);
            childWin = window.open('tst2.jsp?i=' + i + '&url=' + urls[i]);
            interval = setInterval(function() {waitForIt(i);}, 1000);
            waitForIt(i);
        }
    }

    function waitForIt(i) {
        if (document.getElementById("urls" + i).checked == false) {
            // console.log('wait for: ' + i);
        } else {
            clearInterval(interval);
            if (i < urls.length) {
                doNext(i+1);
            }
        }
    }

    doNext(0);
});
</script>
<input type="checkbox" id="urls0">http://www.yahoo.com<br>
<input type="checkbox" id="urls1">http://www.google.com<br>
<input type="checkbox" id="urls2">http://www.facebook.com<br>
<input type="checkbox" id="urls3">http://www.linkedin.com<br>
<input type="checkbox" id="urls4">http://www.twitter.com<br> 
```

然后，在 tst2.jsp 中，如下所示：

```
<script>
opener.document.getElementById("urls" + <%=request.getParameter("i")%>).checked = true;
// console.log("Set variable");
window.location = '<%= request.getParameter("url") %>';
</script> 
```

另外，请注意，您可以打开的窗口数量取决于浏览器。Firefox 可以配置为任何东西。看起来 Chrome 仅限于 20。我不确定 IE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:04:11.430

您可以打开的窗口数量可能有限，它们可能在多次调用后被重用。

`open()`应该是一个阻塞调用，所以它总是等到浏览器至少打开一个新窗口，然后再继续下一个。

您可以尝试添加一个随机参数作为要打开的第二个参数，以防止浏览器重用已分配默认名称的窗口。

```
// No guarantee that the name generated is unique, but if that's your only problem
// you should be OK
window.open(urls[i], "name" + new Date() + Math.random() ); 
```

# python - python循环异常

> ID：14470233
> 
> 赞同：3
> 
> 时间：2013-01-22T23:58:54.170
> 
> 标签：python, exception, python-2.7, while-loop

嘿，我是 python 的新手，我需要一些帮助。我写下了以下代码：

```
 try:
  it = iter(cmLines)
  line=it.next()
  while (line):
    if ("INFERNAL1/a" in line) or ("HMMER3/f" in line) :
      title = line
      line = it.next()
      if word2(line) in namesList: //if second word in line is in list
        output.write(title)
        output.write(line)
        line = it.next()
        while ("//" not in line):
          output.write(line)
          line = it.next()
        output.write(line)
    line = it.next()
except Exception as e:
  print "Loop exited becuase:"
  print type(e)
  print "at " + line
finally:
  output.close() 
```

1.  当循环结束时，它总是抛出一个异常，通知循环停止。即使它没有提前终止。我该如何阻止它？

2.  有没有更好的方法来编写我的代码？更时尚的东西。我有一个包含大量信息的大文件，我试图只捕获我需要的信息。每条信息的格式如下：

    ```
    Infernal1/a ...
    Name someSpecificName
    ...
    ...
    ...
    ...
    // 
    ```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:03:20.917

RocketDonkey 的回答很到位。由于您迭代方式的复杂性，没有简单的方法可以使用`for`循环执行此操作，因此您需要显式处理`StopIteration`.

但是，如果您重新考虑一下这个问题，还有其他方法可以解决这个问题。例如，一个普通的状态机：

```
try:
    state = 0
    for line in cmLines:
        if state == 0:
            if "INFERNAL1/a" in line or "HMMER3/f" in line:
                title = line
                state = 1
        elif state == 1:
            if word2(line) in NamesList:
                output.write(title)
                output.write(line)
                state = 2
            else:
                state = 0
        elif state == 2:
            output.write(line)
            if '//' in line:
                state = 0
except Exception as e:
    print "Loop exited becuase:"
    print type(e)
    print "at " + line
finally:
    output.close() 
```

或者，您可以编写一个生成器函数，委托给子生成器（`yield from foo()`如果您在 3.3 中，则通过，`for x in foo(): yield x`如果不是，则通过）或各种其他可能性，特别是如果您在更高级别重新考虑您的问题。

这可能不是你想在这里做的，但通常至少值得考虑“我可以把这个`while`循环和两个显式`next`调用变成一个`for`循环吗？”，即使答案是“不，不是不做事可读性较差。”

作为旁注，您可以通过将`try`/替换`finally`为`with`语句来简化事情。而不是这个：

```
output = open('foo', 'w')
try:
    blah blah
finally:
    output.close() 
```

你可以这样做：

```
with open('foo', 'w') as output:
    blah blah 
```

或者，如果`output`不是普通文件，您仍然可以将最后四行替换为：

```
with contextlib.closing(output):
    blah blah 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:05:42.823

当你打电话`line = it.next()`时，当没有任何东西时`StopIteration`会引发异常：

```
>>> l = [1, 2, 3]
>>> i = iter(l)
>>> i.next()
1
>>> i.next()
2
>>> i.next()
3
>>> i.next()
Traceback (most recent call last):
  File "<ipython-input-6-e590fe0d22f8>", line 1, in <module>
    i.next()
StopIteration 
```

每次都会在您的代码中发生这种情况，因为您是在块的末尾调用它，因此在循环有机会返回并发现它`line`是空的之前引发异常。作为创可贴修复，您可以执行以下操作，在其中捕获`StopIteration`异常并将其传递出去（因为这表明它已完成）：

```
# Your code...
except StopIteration:
    pass
except Exception as e:
  print "Loop exited becuase:"
  print type(e)
  print "at " + line
finally:
  output.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:46:35.670

我喜欢[Parser Combinators](http://en.wikipedia.org/wiki/Parser_combinators)，因为它们导致了更具声明性的编程风格。

以[Parcon](http://blog.parcon.opengroove.org/)库为例：

```
from string import letters, digits
from parcon import (Word, Except, Exact, OneOrMore,
                    CharNotIn, Literal, End, concat)

alphanum = letters + digits

UntilNewline = Exact(OneOrMore(CharNotIn('\n')) + '\n')[concat]
Heading1 = Word(alphanum + '/')
Heading2 = Word(alphanum + '.')
Name = 'Name' + UntilNewline
Line = Except(UntilNewline, Literal('//'))
Lines = OneOrMore(Line)
Block = Heading1['hleft'] + Heading2['hright'] + Name['name'] + Lines['lines'] + '//'
Blocks = OneOrMore(Block[dict]) + End() 
```

然后，使用[Alex Martelli 的`Bunch`](http://code.activestate.com/recipes/52308-the-simple-but-handy-collector-of-a-bunch-of-named/)课程：

```
class Bunch(object):
    def __init__(self, **kwds):
        self.__dict__.update(kwds)

names = 'John', 'Jane'
for block in Blocks.parse_string(config):
    b = Bunch(**block)
    if b.name in names and b.hleft.upper() in ("INFERNAL1/A', 'HMMER3/F"):
        print ' '.join((b.hleft, b.hright))
        print 'Name', b.name
        print '\n'.join(b.lines) 
```

鉴于此文件：

```
Infernal1/a ...
Name John
...
...
...
...
//
SomeHeader/a ...
Name Jane
...
...
...
...
//
HMMER3/f ...
Name Jane
...
...
...
...
//
Infernal1/a ...
Name Billy Bob
...
...
...
...
// 
```

结果是：

```
Infernal1/a ...
Name John
...
...
...
...
HMMER3/f ...
Name Jane
...
...
...
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T06:21:58.130

***1/ 无异常处理***

为避免处理异常`StopIteration`，您应该查看处理序列的 Pythonic 方式（正如 Abarnert 提到的那样）：

```
it = iter(cmLines)
for line in it:
    # do 
```

***2/ 捕捉信息***

此外，您可以尝试使用正则表达式来捕捉您的信息模式。您确实知道第一行的确切表达式。然后你想捕捉名字并将其与一些可接受的名字列表进行比较。最后，您正在寻找 next `//`。您可以构建一个包含换行符的正则表达式，并使用一个组来捕获您要检查的名称，

> (...)
> 
> 匹配括号内的任何正则表达式，并**指示组的开始和结束**；组的内容可以在执行匹配后检索，并且可以稍后在字符串中使用 \number 特殊序列进行匹配，如下所述。要匹配文字 '(' 或 ')'，请使用 ( 或 )，或将它们包含在字符类中：[(] [)]。

这是一个关于 Python doc 中正则表达式使用组的示例

```
>>> m = re.match(r"(\w+) (\w+)", "Isaac Newton, physicist")
>>> m.group(0)       # The entire match
'Isaac Newton'
>>> m.group(1)       # The first parenthesized subgroup.
'Isaac'
>>> m.group(2)       # The second parenthesized subgroup.
'Newton'
>>> m.group(1, 2)    # Multiple arguments give us a tuple.
('Isaac', 'Newton') 
```

更多关于正则[表达式](http://docs.python.org/2/library/re.html)。

***关联***

迭代器 next() 在 Python 中引发异常：[https ://softwareengineering.stackexchange.com/questions/112463/why-do-iterators-in-python-raise-an-exception](https://softwareengineering.stackexchange.com/questions/112463/why-do-iterators-in-python-raise-an-exception)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:04:27.597

`StopIteration`您可以明确忽略：

```
 try:
     # parse file
     it = iter(cmLines)
     for line in it:
         # here `line = next(it)` might raise StopIteration
 except StopIteration:
     pass
 except Exception as e:
     # handle exception 
```

或者打电话`line = next(it, None)`查一下`None`。

为了分离关注点，您可以将代码分成两部分：

*   将输入拆分为记录：

```
from collections import deque
from itertools import chain, dropwhile, takewhile

def getrecords(lines):
    it = iter(lines)
    headers = "INFERNAL1/a", "HMMER3/f"
    while True:
        it = chain([next(it)], it) # force StopIteration at the end
        it = dropwhile(lambda line: not line.startswith(headers), it)
        record = takewhile(lambda line: not line.starswith("//"), it)
        yield record
        consume(record) # make sure each record is read to the end

def consume(iterable):
    deque(iterable, maxlen=0) 
```

*   输出您感兴趣的记录：

```
from contextlib import closing

with closing(output):
    for record in getrecords(cmLines):
        title, line = next(record, ""), next(record, "")
        if word2(line) in namesList:
           for line in chain([title, line], record):
               output.write(line) 
```

# c++ - 使用 for_each ，用字符串复制

> ID：14470234
> 
> 赞同：2
> 
> 时间：2013-01-22T23:58:57.303
> 
> 标签：c++, string, stl, iterator

我的程序有些问题，也许有人可以帮助我。所以：

```
int main() {
    std::string col = "maly tekst"
    for_each(/* FILL IN #2*/ f());
    copy(/*FILL IN #3*/);
    std::cout << col; } 
```

输出应该是： TSKET YLAM
我知道我需要使用 Functor 所以我做了这样的事情：

```
#include <iostream>
#include <string>
#include <algorithm>
class f{
public:
void operator() (char &k)const
{
   k = toupper(k);
}
};
int main(){
std::string col = "maly tekst";
for_each(col.begin(),col.end(),f());
copy(col.rbegin(),col.rend(),back_inserter(col));
std::cout << col << std::endl;
} 
```

但是现在当我运行它时它会返回：

```
MALY TEKSTTSKET YLAM 
```

有人可以指出我正确的方式，或者帮助我使用这个示例程序吗？

谢谢

E: 忘了补充，我只能在 main 中使用这个功能，我不能添加任何新的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:03:33.723

```
std::for_each(col.begin(),col.end(),f()); // as before
std::reverse(col.begin(), col.end()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:03:23.683

如果不能使用 std::copy ，则不能使用`std::reverse`. 要打印 col `reverse order`，另一种解决方法是直接复制`col`到`stream iterator`。

```
for_each(col.begin(),col.end(),f());
std::copy(col.rbegin(), col.rend(), std::ostream_iterator<char>(std::cout, "")); 
```

# hlsl - 在 DirectX 中使用像素着色器渲染圆形

> ID：14470235
> 
> 赞同：3
> 
> 时间：2013-01-22T23:59:08.040
> 
> 标签：hlsl, directx-9, pixel-shader

我想使用用 HLSL 编写的像素着色器在三角形对上渲染一个圆圈。这里有一些伪代码，但是我在实现它时又遇到了一个问题[。](http://missingbytes.blogspot.com/2012/05/circles_12.html)这将在 Windows RT 上运行，因此我仅限于 Direct3D v11 API 的 DirectX 9.3 成员。

着色器的一般形状是什么？例如，应该将哪些参数传递给 main 方法？

任何建议或工作代码将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:36:54.843

您应该使用纹理坐标作为输入来渲染参数圆。

[这是](https://gamedev.stackexchange.com/q/34582/288)我问的一个关于在 HLSL 中渲染的圆的抗锯齿的问题。这是该问题的代码，稍作更改以使使用`TEXCOORD0`更加清晰：

```
float4 PixelShaderFunction(float2 texCoord : TEXCOORD0) : COLOR0
{
    float dist = texCoord.x * texCoord.x
               + texCoord.y * texCoord.y;
    if(dist < 1)
        return float4(0, 0, 0, 1);
    else
        return float4(1, 1, 1, 1);
} 
```

它使用圆的公式*r² = x² + y²*。它使用半径平方的常数`1`（即：半径为 1 的圆，以纹理坐标测量）。圆圈内的所有点都涂成黑色，圆圈外的点涂成白色。

要使用它，请提供纹理坐标在 [-1, 1] 范围内的三角形。如果您想使用更传统的 [0, 1]，则必须在着色器中包含一些代码来缩放和偏移坐标，否则您将获得四分之一圆。

启动并运行此功能后，您可以尝试添加其他功能（例如：根据我的链接问题进行抗锯齿）。

# jquery - jquery验证服务器端检查

> ID：14470240
> 
> 赞同：1
> 
> 时间：2013-01-22T23:59:27.820
> 
> 标签：jquery, validation, asp.net-mvc-4

我有一个表单帖子，它执行一些服务器端验证检查，其中之一是数据库查找，如果数据库检查失败，我将视图模型返回到表单（带有验证错误）。

告诉 jQuery 验证为失败的字段设置规则的最佳方法是什么，该规则将在客户端返回 false（因此显示错误消息/css），直到下一次提交并在服务器端检查？

欢迎任何想法

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T00:07:36.617

使用以下框架/类/片段/提示之一：

*   [http://www.junnark.com/blog/detail/using-jquery-validation-with-aspnet-web-forms](http://www.junnark.com/blog/detail/using-jquery-validation-with-aspnet-web-forms)
*   [http://encosia.com/using-jquery-validation-with-asp-net-webforms/](http://encosia.com/using-jquery-validation-with-asp-net-webforms/)
*   [http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)
*   [http://haacked.com/archive/2008/11/21/combining-jquery-form-validation-and-ajax-submission-with-asp.net.aspx](http://haacked.com/archive/2008/11/21/combining-jquery-form-validation-and-ajax-submission-with-asp.net.aspx)
*   [http://develoq.net/2011/asp-net-mvc-3-remote-validation-with-jquery/](http://develoq.net/2011/asp-net-mvc-3-remote-validation-with-jquery/)

# c# - 具有 128 位键的基于时间的字典/哈希表，即超时字典中的值

> ID：14470241
> 
> 赞同：2
> 
> 时间：2013-01-22T23:59:29.813
> 
> 标签：c#, .net, events, time, temporal

我需要制作一个不会无限增长的基于时间的字典哈希表。

“基于时间”的意思是，如果我要在 X 时间添加一个字典，我希望该项目在 X+Y 时间不存在。Y 为超时时间。

我愿意将时间存储在字典中或作为键或值中的结构。

语境：

我得到了我们正在使用的库调用的“回调”，它为我提供了 4 条信息（时间、键、值、操作类型）。

operationType 可以是 start 或 end （还有其他的，但没关系）。

因此，如果我在 X 之后的 Y 时间段内结束，我很乐意使用这些有用的信息。否则我可以丢弃它。

问题：

这基本上是一个定时器线程，它每隔 Y 间隔清理一次字典，并且主线程不断从回调中将内容添加到这个字典中吗？

我使用 Dictionary 来做到这一点，没有计时器，即使我删除了我能够“加入”的元素，它似乎也在无限增长。

另外，是否有某种 .NET 库可以做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:32:35.830

您可以通过使用优先级队列（或仅最小堆）和关联的字典来消除定期扫描整个集合的麻烦。不幸的是，.NET Framework 不包含优先级队列集合，但有一些可用。不久前我发布了一个[简单的二进制堆](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=789)。

这里的想法是，当您添加一个项目时，您将它添加到字典和堆中。如果你想通过它的键来查找一个项目，你可以在字典中查找它。如果要从堆中删除第一项，请从堆中获取它，然后使用键（它是数据的一部分）将其从字典中删除。

美妙之处在于，您不必扫描整个字典来确定需要删除哪些字典，而是可以查看堆的顶部：

```
while (heap.Count > 0 && heap.Peek().ExpirationTime < time)
{
    var item = heap.RemoveRoot();
    dictionary.Remove(item.Key);
} 
```

这种方法的主要缺点是它需要更多的内存，因为你有字典条目的开销。

# html - 响应式设计的相对定位

> ID：14470244
> 
> 赞同：1
> 
> 时间：2013-01-22T23:59:36.977
> 
> 标签：html, css, responsive-design

我试图一个接一个地定位一个 div，当 div 相对定位时很容易实现，但我希望每个 div 都适合浏览器的大小。
我使用这种方法非常粗略地实现了它：

```
<div id="container">
<div id="test-1" style="background: url(../images/background-v2.jpg)"></div>
<div id="test-2" style="background: url(../images/background-v2.jpg)"></div>
</div> 
```

CSS：

```
#test-1 {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#test-2 {
    position: absolute;
    top: 101%;
    left: 0px;
    width: 100%;
    height: 100%;
    background: no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

所以#test-1 缩放以适应浏览器的大小，然后当你缩小时#test-2 也适合浏览器的大小，依此类推。但是我通过绝对定位它们并从顶部设置 #test-2 101% 来实现这些目标，我不想每次添加另一个 div 时都这样做，因此我希望它们相对定位同时仍然保留浏览器背景图像的比例。如果那是可能的？它可能需要jQuery吗？
我完全被这个难住了！

这些背景图像还有其他一些我无法弄清楚的东西，因为它们嵌套在 div 中，当浏览器尺寸低于大约 750px 宽度时，背景图像变得固定，无论如何它们可以始终保持居中到浏览器，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:31:22.853

我没有使用背景图片，因为我不确定你在用它们做什么，但这里有一个使用 jQuery 解决大小问题的解决方案：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
        <style>
            .fill-browser{
                width:100%;
            }
        </style>
        <!-- uncomment the line below to include jquery, I had to comment it out for stackoverflow -->
        <!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script-->
        <script>
            $(function() {
                Resize();
            });

            //Every resize of window
            $(window).resize(function() {
                Resize();
            });

            //Dynamically assign height
            function Resize() {
                // Handler for .ready() called.
                var windowHeight = $(window).height() + 'px';
                $('.fill-browser').css('height', windowHeight);
            }
        </script>
    </head>

    <body>
        <div class="fill-browser" style="background-color:#aa0000;"></div>
        <div class="fill-browser" style="background-color:#00aa00;"></div>
        <div class="fill-browser" style="background-color:#0000aa;"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:16:49.000

您可能还想查看 - [http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/) 这是一个 jQuery 插件，可以轻松拉伸背景图像。

# excel - 当光标停留在更新的 Excel 单元格时，VBA 代码不运行

> ID：14470249
> 
> 赞同：0
> 
> 时间：2013-01-22T23:59:58.720
> 
> 标签：excel, vba

我想在打开 Excel 工作簿 20 秒后显示一条消息。代码是：

```
//ThisWorkbook
Private Sub Workbook_Open()
    SetTimer
End Sub

//Module1
Public Sub SetTimer()
    Application.OnTime Now + TimeValue("00:00:20"), "ShowMsg"
End Sub

Public Sub ShowMsg()
    MsgBox ("my message")
End Sub 
```

如您所见，代码非常简单，当用户不更新工作表或离开更新/聚焦单元格时它可以工作。但是，如果光标停留在单元格上，则消息将永远不会显示。当单元格具有焦点或正在更新时，它会显示控件不会返回到 VBA 代码。对这个问题有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:09:11.387

这是一个解决方法：

```
Sub main()

    Dim start As Single

    start = Timer

    Do
        DoEvents
    Loop Until Timer > (start + 20) '20 seconds
    MsgBox "hello"

End Sub 
```

**编辑。进一步问题的代码：**

在名为 Module1 的模块中，输入以下代码：

```
Public start As Single

Sub main2()

    start = Timer

    Do
        DoEvents
    Loop Until Timer > (start + 20) '20 seconds
    MsgBox "hello"

End Sub 
```

在您的 ThisWorkbook 对象中（从 Project Explorer 的对象列表中双击 ThisWorkbook），输入以下代码：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    Module1.start = Module1.start + 5
End Sub 
```

每次更改工作簿中任何工作表中的任何单元格时，都会向计时器添加另外 5 秒。

# php - 根据所选项目更改表单操作

> ID：14470258
> 
> 赞同：2
> 
> 时间：2013-01-23T00:00:17.263
> 
> 标签：php, javascript, html

我是 html 新手，但我需要使这段代码功能正常：

```
 <form method="get" action="http://cat.opal-libraries.org/search~S9/X">
     <p>
     <select name="searchtype">
    <option value="X" selected="selected">Keyword</option>
    <option value="t">Title</option>
    <option value="a">Author</option>
    <option value="d">Subject</option>
    </select>
    <input class="textfield" name=" " style="width: 200px;" type="text">
    <input class="button" value="Search" type="submit"> 
```

我希望能够选择说一个标题，然后输入一个标题，然后点击搜索，让它像我在这个页面中输入它一样工作 [http://cat.opal-libraries.org/search/t](http://cat.opal-libraries.org/search/t) 我将不胜感激关于这样做的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:07:36.407

很抱歉没有回答，但正如我所提到的，您的问题的答案太长了，不适合 Stack Overflow。

[我建议您通过遵循这样的 PHP 教程](http://www.phpfreaks.com/tutorial/simple-sql-search)来弄脏您的手。

* * *

附带说明一下，您的 HTML 无效。您在第 1 行和第 2 行打开`<form>`并`<p>`标记，并没有关闭它们。从语义上讲，将这些表单元素放在一个段落中有点奇怪。这不是一个段落的真正作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:09:35.190

问题非常广泛，因为有很多方法可以解决它。如果您想按标题搜索，下面是您的代码的简单编辑，它可以工作：

```
<form method="get" action="http://cat.opal-libraries.org/search/t">   
  <input class="textfield" name="SEARCH" style="width: 200px;" type="text">
  <input class="button" value="Search" type="submit">
</form> 
```

我所做的是修复您的 URL 并为输入命名。您可能想了解`<form method="get"`工作原理，然后您可能会弄清楚如何按不同的字段进行搜索。

**更新以包含完整代码。**如果您阅读这些项目以了解其工作方式/原因，那就太好了。基本上，当他们选择新的搜索类型时，您需要更改表单的操作（即您丢失的部分）。我还添加了“searchscope”字段并将其设置为 28，因为他们的网站正在这样做。我不知道那是做什么的。

这假设您正在引用 jQuery。相关文档[jQuery attr()](http://api.jquery.com/attr/)和[jQuery change()](http://api.jquery.com/change/)。

```
<form id="searchForm" method="get" action="http://cat.opal-libraries.org/search/X">  
    <select id="searchType">
    <option value="X" selected="selected">Keyword</option>
    <option value="t">Title</option>
    <option value="a">Author</option>
    <option value="d">Subject</option>
    </select>
  <input class="textfield" name="SEARCH" style="width: 200px;" type="text">
  <input name="searchscope" type="hidden" value="28">
  <input class="button" value="Search" type="submit">
</form>

<script>
    $("#searchType").change(function () {
        var newPath ="http://cat.opal-libraries.org/search/" + $("#searchType").val();
        $("#searchForm").attr("action", newPath);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:43:21.170

看起来您引用的搜索引擎为每个“搜索类型”使用了一个单独的端点，这实际上使得使用 Javascript 和对您的表单进行一些更改相对容易。

1.  `name`将上的属性更改`<select>`为 an `id`，以便它实际上不会发送到搜索引擎。
2.  将文本字段的属性更改`name`为“SEARCH”，以便*将*其发送并识别为搜索字符串。
3.  向 sel 添加一个 on-change 监听器，它会根据需要修改表单的 action 属性。如果您使用的是 JQuery，那可能看起来像这样：

    ```
    var base = "http://cat.opal-libraries.org/search/";
    $("#searchtype").change(function() {
      $(that).closest("form").attr("action", base + $(that).val());
    }); 
    ```

# javascript - 通过可重新排序的表行传递表单数据

> ID：14470266
> 
> 赞同：0
> 
> 时间：2013-01-23T00:00:51.493
> 
> 标签：javascript, html, forms, drag-and-drop

我正在尝试创建一个允许发生一些不同事情的表单。用户将能够添加/删除行，并单击以编辑文本和每一行。每行有两列，一个“标题”和一个“条目”——例如，一个标题可能是“名称”，一个条目可能是“John Doe”。我计划使用 Javascript 来处理添加和删除表格行，并单击以编辑标题和条目。我在下面包含了我的想法的模型：

![表格/表格样机](../Images/02b27c6d2b79c4882fab5270838d6439.png)

我遇到的问题是如何使用 POST 通过表单从表中传递数据。这甚至可能吗？我需要传递以下信息：总行数、行的顺序/位置、“标题”文本和“条目”。对此的任何帮助将不胜感激，我很难过！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:04:47.643

在不知道确切结构的情况下，解决此问题的一种可能方法是在每一行上都有一个隐藏字段，该字段将 id 存储在带有 name 的输入中`title[]`。

检索 POST 时，应该以正确的顺序传递一个数组，其中包含值。

# java - 使用 ResponseBody 下载弹簧文件

> ID：14470270
> 
> 赞同：2
> 
> 时间：2013-01-23T00:01:44.803
> 
> 标签：java, spring

您好，我正在尝试创建一个允许我托管任何类型文件的应用程序。为了做到这一点，我正在执行以下魔术：

```
@RequestMapping(value = "/files/{file_name}", method = RequestMethod.GET)
    @ResponseBody
    public FileSystemResource 
    getFile(
            @PathVariable("file_name") String fileName) {
        System.out.println(fileName);
        String filePath = "./files/";
        return new FileSystemResource(new File(filePath+fileName)); 
    } 
```

但是这种方法带来了三个不必要的问题：

1.  一些随机数据正在附加到文件中

2.  该文件在浏览器窗口中打开而不是下载 - 我试图使用类似的东西来破解它

    产生=“应用程序/八位字节流”

    但它只导致406错误。

3.  test.txt 被截断为测试，我找到了一个解决方法，为应用程序提供 test.txt/ 作为文件名，但它看起来有点乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:18:18.040

如[弹簧手册所述](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)

> 与@RequestBody 一样，Spring 使用 HttpMessageConverter 将返回的对象转换为响应正文

我认为您的问题是 spring 没有附带 HttpMessageConverter 而不是可以处理 FileSystemResource。

[此处提供了内置 HttpMessageConverter 的列表](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/remoting.html#rest-message-conversion)。我建议您尝试以某种方式将您的响应转换为字节数组，也许它会选择 ByteArrayHttpMessageConverter 并帮助解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:51:52.300

我使用这样的代码返回图像

```
@RequestMapping(value = "/image/{id}", method = RequestMethod.GET)
public String getImage(... HttpServletResponse response) {
      response.setContentType(image/png);
      (response.getOutputStream()).write(imageByteArray);
} 
```

我认为您必须定义正确的 mime 类型并将数据发送到响应。

# python - 重新排列来自多个数据文件的数据

> ID：14470274
> 
> 赞同：4
> 
> 时间：2013-01-23T00:02:47.940
> 
> 标签：python, perl, bash, awk, fortran

我有 40,000 个数据文件。每个文件在单列中包含 1445 行浮点数。现在我需要以不同的顺序重新排列数据。

每个数据文件的第一个数字需要收集并转储到一个新文件中（比如说 abc1.dat）。此特定文件 (abc1.dat) 将包含 40,000 个数字。

每个数据文件中的第二个数字需要被提取并转储到另一个新文件中（比如 abc2.dat）。这个新文件也将包含 40,000 个数字。但每个数据文件中只有第二个数字。

在此操作结束时，我应该有 1445 个文件（abc1.dat、abc2.dat、...abc40000.dat），每个文件包含 40,000 个数据。

如何做到这一点？（使用 Linux Ubuntu 11.10 - 64 位）

感谢任何帮助。提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:10:47.370

40,000 * 1445 不算多，应该能塞进内存。因此，在 Perl（未经测试）中：

```
#!/usr/bin/perl
use strict;
use warnings;

my @nums;
# Reading:
for my $file (0 .. 40_000) {
    open my $IN, '<', "file-$file" or die $!;
    while (<$IN>) {
        chomp;
        $nums[$file][$.-1] = $_;
    }
}

# Writing:
for my $line (0 .. 1444) {
    open my $OUT, '>', "abc$line.dat" or die $!;
    for my $file (0 .. 40_000) {
        print $OUT $nums[$file][$line], "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T00:16:48.187

如果您可以一次打开所有 1445 个输出文件，这很容易：

```
paths = ['abc{}.dat'.format(i) for i in range(1445)]
files = [open(path, 'w') for path in paths]
for inpath in ('input{}.dat'.format(i) for i in range(40000)):
    with infile as open(inpath, 'r') as infile:
        for linenum, line in enumerate(infile):
            files[linenum].write(line)
for f in files:
    f.close() 
```

如果您可以将所有内容都放入内存（听起来这应该是大约 0.5-5.0 GB 的数据，这对于具有 8GB RAM 的 64 位机器来说可能没问题……），您可以这样做：

```
data = [[] for _ in range(1445)]
for inpath in ('input{}.dat'.format(i) for i in range(40000)):
    with infile as open(inpath, 'r') as infile:
        for linenum, line in enumerate(infile):
            data[linenum].append(line)
for i, contents in enumerate(data):
    with open('abc{}.dat'.format(i), 'w') as outfile:
        outfile.write(''.join(contents) 
```

如果这些都不合适，您可能需要某种混合。例如，如果您一次可以处理 250 个文件，则执行 6 个批处理，并跳过`batchnum`每个`infile`.

如果批处理解决方案太慢，则在每个文件中的每个批处理结束时， stash `infile.tell()`，当您再次回到文件时，使用`infile.seek()`回到那里。像这样的东西：

```
seekpoints = [0 for _ in range(40000)]
for batch in range(6):
    start = batch * 250
    stop = min(start + 250, 1445)
    paths = ['abc{}.dat'.format(i) for i in range(start, stop)]
    files = [open(path, 'w') for path in paths]
    for infilenum, inpath in enumerate('input{}.dat'.format(i) for i in range(40000)):
        with infile as open(inpath, 'r') as infile:
            infile.seek(seekpoints[infilenum])
            for linenum, line in enumerate(infile):
                files[linenum].write(line)
            seekpoints[infilenum] = infile.tell()
    for f in files:
        f.close() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T00:38:56.603

你应该能够摆脱这样的单线：

```
perl -nwe 'open my $fh, ">>", "abc${.}.dat" or die $!; 
           print $fh $_; close ARGV if eof;' input*.dat 
```

它将为输入文件的每一行打开一个新的输出文件。输出文件将根据输入文件的当前行号命名。最后，我们需要显式关闭 ARGV 文件句柄以重置行号变量`$.`。

您可以使用 glob 或 perl（如果您愿意）来控制输入文件的顺序。我选择了通用 glob，因为您没有指定行应按特定顺序排列。

效率方面，我认为为每一行打开一个新文件不会过于耗时，因为 perl 在文件操作方面相当快。

请注意，您不需要关闭输出文件句柄，因为它会在超出范围时自动关闭。另请注意，它不会关心您的文件大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T01:04:17.830

重击：

```
cat file1 file2 ... file40000 | split -n r/1445 -d - outputprefix 
```

假设所有文件正好有 1445 行，写入 outputprefix0000、outputprefix0001、... outputprefix1444。

有点慢，但它有效:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T00:33:17.553

创建文件后，运行大约需要 4 分钟，并在我的笔记本电脑上使用了 3.6GB 的 RAM。如果您的机器中有 8GB 的​​ RAM，那应该没问题。

```
#!/usr/bin/env python2.7

import random

NUMFILES = 40000
NUMLINES = 1445

# create test files
for i in range(1, NUMFILES + 1):
    with open('abc%s.dat' % i, 'w') as f:
        for j in range(NUMLINES):
            f.write('%f\n' % random.random())

data = []

# load all data into memory
for i in range(1, NUMFILES + 1):
    print i
    with open('abc%s.dat' % i) as f:
        lines = f.readlines()
        data.append(lines)

# write it back out
for j in range(len(data[0])):
    with open('new_abc%s.dat' % (j + 1), 'w') as f:
        for i in range(len(data)):
            f.write(data[i][j]) 
```

我将所有内容都保存为字符串，以避免在反序列化然后重新序列化浮点数时出现精度错误。

* * *

您是否需要可以定期运行的更快、更少资源密集型的东西，或者这是一次性的转换？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T16:24:43.580

出于完整性考虑，因为 [fortran] 标签是 Fortran 中迟来的示例。它一个一个地打开文件并将所有数据存储在内存中。

```
program copy
  implicit none

  character(1024) :: filename
  integer :: i, unit, infiles, outfiles
  parameter (infiles = 40000, outfiles = 1445)
  real :: data(infiles, outfiles)

  do i = 1, infiles
    write(filename, '("path/to/file", I0, ".dat")') i
    open(newunit = unit, file = filename, action = 'read')
    read(unit, *) data(i,:)
    close(unit)
  enddo

  do i = 1, outfiles
    write(filename, '("path/to/abc", I0, ".dat")') i
    open(newunit = unit, file = filename, action = 'write')
    write(unit, '(G0)') data(:,i)
    close(unit)
  enddo
end program 
```

注意：它可能会很慢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T00:56:53.750

在 awk 中，非常简单：

```
awk '{print >> "abc" FNR ".dat}' files* 
```

我不确定 awk 是否能够处理 40,000 个打开的文件句柄。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-23T06:03:34.767

以下适用于solaris。

```
nawk '{x="abc"FNR".txt";print $1>x}' file1 file2 
```

你无论如何都可以这样做：

```
nawk '{x="abc"FNR".txt";print $1>x}' file* 
```

用于引用所有 40k 文件

# twitter - Twitter4J 400 "{"errors":[{"message":"Bad Authentication data","code":215}]}

> ID：14470275
> 
> 赞同：1
> 
> 时间：2013-01-23T00:02:48.280
> 
> 标签：twitter, twitter-oauth, twitter4j

我开始使用 twitter4J 3.0.4-SNAPSHOT 但使用简单代码时出现错误：

```
 Twitter twitter = TwitterFactory.getSingleton();
        try {
            Status status = twitter.updateStatus("test");
        } catch (TwitterException e) {
            e.printStackTrace();
        } 
```

OAuth 设置（consumerKey、consumerSecret、accessToken 和 accessTokenSecret）写在类路径中的 twitter4j.properties 中，并且这些值被粗暴地读取，因为当我明确设置它们时，就像`twitter.setOAuthConsumer(...)`我被告知它们已经设置一样。在代码中明确设置它们并不会改变这种情况。

我能做些什么？这些值只是错误的还是其他原因？
我试了几次都没有结果...

这是标题信息。

```
[Wed Jan 23 08:41:51 JST 2013]debug: true
[Wed Jan 23 08:41:51 JST 2013]userAgent: twitter4j http://twitter4j.org/ /3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)
[Wed Jan 23 08:41:51 JST 2013]user: null
[Wed Jan 23 08:41:51 JST 2013]password: null
[Wed Jan 23 08:41:51 JST 2013]useSSL: false
[Wed Jan 23 08:41:51 JST 2013]prettyDebug: false
[Wed Jan 23 08:41:51 JST 2013]gzipEnabled: true
[Wed Jan 23 08:41:51 JST 2013]httpProxyHost: null
[Wed Jan 23 08:41:51 JST 2013]httpProxyUser: null
[Wed Jan 23 08:41:51 JST 2013]httpProxyPassword: null
[Wed Jan 23 08:41:51 JST 2013]httpProxyPort: -1
[Wed Jan 23 08:41:51 JST 2013]httpConnectionTimeout: 20000
[Wed Jan 23 08:41:51 JST 2013]httpReadTimeout: 120000
[Wed Jan 23 08:41:51 JST 2013]httpStreamingReadTimeout: 40000
[Wed Jan 23 08:41:51 JST 2013]httpRetryCount: 0
[Wed Jan 23 08:41:51 JST 2013]httpRetryIntervalSeconds: 5
[Wed Jan 23 08:41:51 JST 2013]maxTotalConnections: 20
[Wed Jan 23 08:41:51 JST 2013]defaultMaxPerRoute: 2
[Wed Jan 23 08:41:51 JST 2013]oAuthConsumerKey: u3T6gYq17fBjQ1xrnm8g
[Wed Jan 23 08:41:51 JST 2013]oAuthConsumerSecret: *******************************************
[Wed Jan 23 08:41:51 JST 2013]oAuthAccessToken: 6588392-YmeaLWSLJcDqswQDL8sdqrnoBcbr0Ht7CSLYDiRmpg 
[Wed Jan 23 08:41:51 JST 2013]oAuthAccessTokenSecret: ******************************************
[Wed Jan 23 08:41:51 JST 2013]oAuthRequestTokenURL: http://api.twitter.com/oauth/request_token
[Wed Jan 23 08:41:51 JST 2013]oAuthAuthorizationURL: http://api.twitter.com/oauth/authorize
[Wed Jan 23 08:41:51 JST 2013]oAuthAccessTokenURL: http://api.twitter.com/oauth/access_token
[Wed Jan 23 08:41:51 JST 2013]oAuthAuthenticationURL: http://api.twitter.com/oauth/authenticate
[Wed Jan 23 08:41:51 JST 2013]restBaseURL: http://api.twitter.com/1.1/
[Wed Jan 23 08:41:51 JST 2013]streamBaseURL: https://stream.twitter.com/1.1/
[Wed Jan 23 08:41:51 JST 2013]userStreamBaseURL: https://userstream.twitter.com/1.1/
[Wed Jan 23 08:41:51 JST 2013]siteStreamBaseURL: https://sitestream.twitter.com/1.1/
[Wed Jan 23 08:41:51 JST 2013]dispatcherImpl: twitter4j.internal.async.DispatcherImpl
[Wed Jan 23 08:41:51 JST 2013]loggerFactory: null
[Wed Jan 23 08:41:51 JST 2013]asyncNumThreads: 1
[Wed Jan 23 08:41:51 JST 2013]contributingTo: -1
[Wed Jan 23 08:41:51 JST 2013]includeRTsEnabled: true
[Wed Jan 23 08:41:51 JST 2013]includeEntitiesEnabled: true
[Wed Jan 23 08:41:51 JST 2013]includeMyRetweetEnabled: true
[Wed Jan 23 08:41:51 JST 2013]jsonStoreEnabled: false
[Wed Jan 23 08:41:51 JST 2013]mbeanEnabled: false
[Wed Jan 23 08:41:51 JST 2013]userStreamRepliesAllEnabled: false
[Wed Jan 23 08:41:51 JST 2013]stallWarningsEnabled: true
[Wed Jan 23 08:41:51 JST 2013]mediaProvider: TWITTER
[Wed Jan 23 08:41:51 JST 2013]mediaProviderAPIKey: null
[Wed Jan 23 08:41:51 JST 2013]mediaProviderParameters: null
[Wed Jan 23 08:41:51 JST 2013]clientVersion: 3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)
[Wed Jan 23 08:41:51 JST 2013]clientURL: http://twitter4j.org/en/twitter4j-3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3).xml
[Wed Jan 23 08:41:51 JST 2013]DALVIK: twitter4j.dalvik
[Wed Jan 23 08:41:51 JST 2013]GAE: twitter4j.gae
[Wed Jan 23 08:41:51 JST 2013]DEFAULT_OAUTH_REQUEST_TOKEN_URL: http://api.twitter.com/oauth/request_token
[Wed Jan 23 08:41:51 JST 2013]DEFAULT_OAUTH_AUTHORIZATION_URL: http://api.twitter.com/oauth/authorize
[Wed Jan 23 08:41:51 JST 2013]DEFAULT_OAUTH_ACCESS_TOKEN_URL: http://api.twitter.com/oauth/access_token
[Wed Jan 23 08:41:51 JST 2013]DEFAULT_OAUTH_AUTHENTICATION_URL: http://api.twitter.com/oauth/authenticate
[Wed Jan 23 08:41:51 JST 2013]DEFAULT_REST_BASE_URL: http://api.twitter.com/1.1/
[Wed Jan 23 08:41:52 JST 2013]DEFAULT_STREAM_BASE_URL: https://stream.twitter.com/1.1/
[Wed Jan 23 08:41:52 JST 2013]DEFAULT_USER_STREAM_BASE_URL: https://userstream.twitter.com/1.1/
[Wed Jan 23 08:41:52 JST 2013]DEFAULT_SITE_STREAM_BASE_URL: https://sitestream.twitter.com/1.1/
[Wed Jan 23 08:41:52 JST 2013]IS_DALVIK: false
[Wed Jan 23 08:41:52 JST 2013]IS_GAE: false
[Wed Jan 23 08:41:52 JST 2013]serialVersionUID: -6610497517837844232
[Wed Jan 23 08:41:52 JST 2013]dalvikDetected: false
[Wed Jan 23 08:41:52 JST 2013]gaeDetected: false
[Wed Jan 23 08:41:52 JST 2013]requestHeaders: {X-Twitter-Client-URL=http://twitter4j.org/en/twitter4j-3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3).xml, X-Twitter-Client=Twitter4J, Accept-Encoding=gzip, User-Agent=twitter4j http://twitter4j.org/ /3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3), X-Twitter-Client-Version=3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)}
[Wed Jan 23 08:41:52 JST 2013]instances: [ConfigurationBase{debug=true, userAgent='twitter4j http://twitter4j.org/ /3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)', user='null', password='null', useSSL=false, prettyDebug=false, gzipEnabled=true, httpProxyHost='null', httpProxyUser='null', httpProxyPassword='null', httpProxyPort=-1, httpConnectionTimeout=20000, httpReadTimeout=120000, httpStreamingReadTimeout=40000, httpRetryCount=0, httpRetryIntervalSeconds=5, maxTotalConnections=20, defaultMaxPerRoute=2, oAuthConsumerKey='u3T6gYq17fBjQ1xrnm8g', oAuthConsumerSecret='5GLiKBRtILkqIWAA305yJk6lfF4PEdqtzW0ZOKOo1i8', oAuthAccessToken='6588392-YmeaLWSLJcDqswQDL8sdqrnoBcbr0Ht7CSLYDiRmpg ', oAuthAccessTokenSecret='EaMAvSCrQl7qOwJkABZyKCLcabZZ5INd0KB1JKqEes', oAuthRequestTokenURL='http://api.twitter.com/oauth/request_token', oAuthAuthorizationURL='http://api.twitter.com/oauth/authorize', oAuthAccessTokenURL='http://api.twitter.com/oauth/access_token', oAuthAuthenticationURL='http://api.twitter.com/oauth/authenticate', restBaseURL='http://api.twitter.com/1.1/', streamBaseURL='https://stream.twitter.com/1.1/', userStreamBaseURL='https://userstream.twitter.com/1.1/', siteStreamBaseURL='https://sitestream.twitter.com/1.1/', dispatcherImpl='twitter4j.internal.async.DispatcherImpl', loggerFactory='null', asyncNumThreads=1, contributingTo=-1, includeRTsEnabled=true, includeEntitiesEnabled=true, includeMyRetweetEnabled=true, jsonStoreEnabled=false, mbeanEnabled=false, userStreamRepliesAllEnabled=false, stallWarningsEnabled=true, mediaProvider='TWITTER', mediaProviderAPIKey='null', mediaProviderParameters=null, clientVersion='3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)', clientURL='http://twitter4j.org/en/twitter4j-3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3).xml', IS_DALVIK=false, IS_GAE=false, requestHeaders={X-Twitter-Client-URL=http://twitter4j.org/en/twitter4j-3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3).xml, X-Twitter-Client=Twitter4J, Accept-Encoding=gzip, User-Agent=twitter4j http://twitter4j.org/ /3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3), X-Twitter-Client-Version=3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)}}]
[Wed Jan 23 08:41:52 JST 2013]Request: 
[Wed Jan 23 08:41:52 JST 2013]POST http://api.twitter.com/1.1/statuses/update.json
[Wed Jan 23 08:41:52 JST 2013]OAuth base string: POST&http%3A%2F%2Fapi.twitter.com%2F1.1%2Fstatuses%2Fupdate.json&include_entities%3D1%26include_rts%3D1%26oauth_consumer_key%3Du3T6gYq17fBjQ1xrnm8g%26oauth_nonce%3D3206276498%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1358898112%26oauth_token%3D6588392-YmeaLWSLJcDqswQDL8sdqrnoBcbr0Ht7CSLYDiRmpg%2520%26oauth_version%3D1.0%26status%3Dtest
[Wed Jan 23 08:41:52 JST 2013]OAuth signature: ppnBeFh/FkC257KfuAseMUSz2yE=
[Wed Jan 23 08:41:52 JST 2013]Authorization: ***********************************************************************************************************************************************************************************************************************************************************************************
[Wed Jan 23 08:41:52 JST 2013]X-Twitter-Client-URL: http://twitter4j.org/en/twitter4j-3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3).xml
[Wed Jan 23 08:41:52 JST 2013]X-Twitter-Client: Twitter4J
[Wed Jan 23 08:41:52 JST 2013]Accept-Encoding: gzip
[Wed Jan 23 08:41:52 JST 2013]User-Agent: twitter4j http://twitter4j.org/ /3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)
[Wed Jan 23 08:41:52 JST 2013]X-Twitter-Client-Version: 3.0.4-SNAPSHOT(build: 741de654255dfd4f0b154533bbb4fa76a88f6ab3)
[Wed Jan 23 08:41:52 JST 2013]Post Params: status=test&include_entities=1&include_rts=1
[Wed Jan 23 08:41:52 JST 2013]Response: 
[Wed Jan 23 08:41:52 JST 2013]HTTP/1.1 400 Bad Request
[Wed Jan 23 08:41:52 JST 2013]Date: Tue, 22 Jan 2013 23:41:52 UTC
[Wed Jan 23 08:41:52 JST 2013]Content-Length: 86
[Wed Jan 23 08:41:52 JST 2013]Content-Encoding: gzip
[Wed Jan 23 08:41:52 JST 2013]Content-Type: application/json; charset=utf-8
[Wed Jan 23 08:41:52 JST 2013]Server: tfe
[Wed Jan 23 08:41:52 JST 2013]{"errors":[{"message":"Bad Authentication data","code":215}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:37:17.660

问题已经解决了。
我将代码更改为

```
 Twitter twitter = new TwitterFactory().getInstance(); 
```

并成功地在我的时间线中发布了一条消息。

# c# - 为什么 C# 对于未分配的局部变量不默认为 null？

> ID：14470277
> 
> 赞同：8
> 
> 时间：2013-01-23T00:03:11.150
> 
> 标签：c#

说我有这样的事情：

```
public IOrder SomeMethodOnAnOrderClass()
{
   IOrder myOrder = null;

   if (SomeOtherOrder != null)
   {
       myOrder = SomeOtherOrder.MethodThatCreatesACopy();        
   }

   return myOrder;
} 
```

为什么 C# 的制造者需要明确的`myOrder`to集`null`？

是否有过您希望将其保留为未分配的情况？

设置为 null 是否有与之相关的成本？这样您就不想总是将未分配的变量设置为空？（即使它们后来被设置为其他东西。）

或者是否需要确保你已经“点缀了你所有的 i 并越过了你所有的 t”？

还是有其他原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T00:06:21.597

它们*确实*默认为，`null`或者更准确地说，您的对象默认为返回的值`default(T)`，这对于值类型是不同的。

这是一个特点。程序员使用未初始化的变量会导致各种各样的错误。并非所有语言都为您提供此类明确定义的行为（您知道自己是谁……）。

显然你还没有经历过。高兴并接受编译器正在帮助您编写更好的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T00:25:19.793

在[为什么局部变量肯定在不可访问的语句中分配？](http://blogs.msdn.com/b/ericlippert/archive/2012/03/05/why-are-local-variables-definitely-assigned-in-unreachable-statements.aspx)（感谢 MiMo 的链接） Eric Lippert 说：

> 我们想让这个非法的原因并不像许多人认为的那样，因为局部变量将被初始化为垃圾，我们想保护你免受垃圾的影响。事实上，我们确实会自动将本地变量初始化为其默认值。（尽管 C 和 C++ 编程语言不会，并且会很乐意让您从未初始化的本地读取垃圾。）相反，这是因为这样的代码路径的存在可能是一个错误，我们想把你扔进质量坑；您应该努力编写该错误。

据我了解，如果没有为局部变量赋值，这并不意味着开发人员确实想要从中`default(T)`读取。这意味着（在大多数情况下）开发人员可能错过了它并忘记了初始化它。那是一个错误，然后是开发人员有意识地想要初始化一个局部变量`default(T)`而只声明它的情况。

# gradle - 如何让 gradle 中的 JavaExec 任务的类任务依赖于另一个任务？

> ID：14470280
> 
> 赞同：0
> 
> 时间：2013-01-23T00:03:38.990
> 
> 标签：gradle

这甚至可能吗？我有类似的东西：

```
task taskB(dependsOn: taskA) {
    // Do stuff.
}

task taskA {
    // Do stuff.
}

task runClass(dependsOn: 'classes', type: JavaExec) {
    main = 'com.some.package.MainClass'
    classpath = some.classpath
} 
```

我想在 JavaExec 任务`taskB`之前运行。`classes`我该怎么办？将其更改为`dependsOn: ['taskB', 'classes']`似乎没有帮助 - 它仍然`classes`首先。

**编辑：**

添加`classes.dependsOn taskB`似乎有效。不过，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:54:40.870

在 Gradle 中，`foo.dependsOn(bar, baz)`相当于`foo.dependsOn(bar); foo.dependsOn(baz)`. 它并不*暗示*`bar`and之间的任何顺序`baz`，就像在 Ant 中那样（具有*软依赖*特性）。

您能否阐明什么是什么`taskB`，以及为什么您认为它需要先运行`classes`？

编辑：

根据您在下面的评论，我会做类似的事情：

```
sourceSets.main.resources.srcDir "build/taskB" // output dir of taskB
processResources.dependsOn(taskB) 
```

当然，这可以通过多种方式进行改进，但它得到了正确的基础。

# c# - 是否可以使用 C# 交互模式？

> ID：14470284
> 
> 赞同：1
> 
> 时间：2013-01-23T00:03:58.013
> 
> 标签：c#

我想知道是否有任何 IDE 允许我在 Python 等交互式模型中使用 C#？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:17:45.030

[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)（用于 C# 和 VB 的下一代编译器/语言服务）带有一个 C# 交互窗口。与即时窗口不同，它不需要调试上下文。

VS2012有一个CTP可用，你可以试试。

免责声明：我在 Roslyn 工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T00:13:05.163

Visual Studio 中的[即时窗口](http://msdn.microsoft.com/en-us/library/f177hahy%28v=vs.110%29.aspx)本质上是一个[REPL](http://en.wikipedia.org/wiki/REPL)。

这有点 hacky，但是您可以通过创建一个带有空程序的控制台项目轻松地跳进去：

```
using System.Diagnostics;

class Program
{
    public static void Main(string[] args)
    {
        // The program will stop here.
        // Open up the immediate window and play around!
        Debugger.Break();
    }
} 
```

`Ctrl`您可以使用++打开即时`Alt`窗口`I`。

# python - 在 OS X 上的 tkinter 中进行右键单击操作时禁用粘贴突出显示的文本

> ID：14470286
> 
> 赞同：3
> 
> 时间：2013-01-23T00:04:08.373
> 
> 标签：python, tkinter

似乎每次突出显示小部件中的所有文本时，右键单击小部件都会粘贴突出显示的文本。

复制： - 复制文本或条目小部件中的所有文本 - 右键单击​​突出显示的文本中间 - 突出显示的文本粘贴到您右键单击的位置。

有想法该怎么解决这个吗？它类似于著名的突出显示和中键单击以将突出显示的文本粘贴到任何 linux 框的行为。

值得注意的是，右键单击按钮的键符是`<Button-2>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:36:21.890

我在 .bind_class() 方法中触发的函数内部使用 .selection_clear() 方法找到了解决方案。

```
frame.bind_class("Text", sequence='<Button-2>', func=self.contextMenuPopup)

def contextMenuPopup:
    # do stuff here ...
    contextOfWidget.selection_clear()
    return 
```

希望这对将来的某人有所帮助。

# java - Java字体：特定字符的宽度使用了多少像素

> ID：14470288
> 
> 赞同：3
> 
> 时间：2013-01-23T00:04:10.717
> 
> 标签：java

我需要找出java中特定字符的宽度使用了多少像素-例如，字符'3'和'1'的宽度（以像素为单位）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:08:35.220

在图形中，您有 FontMetrics 可以使用方法为您提供答案[`stringWidth`](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html#stringWidth%28java.lang.String%29)，如下所示：

```
FontMetrics metrics = g.getFontMetrics(font);
int width = metrics.stringWidth("3"); 
```

# sublimetext2 - Sublime Text 2 许可 - Sublime Text 2

> ID：14470296
> 
> 赞同：2
> 
> 时间：2013-01-23T00:05:03.103
> 
> 标签：sublimetext2

如果您不许可您的 Sublime Text 2 软件试用版会怎样？它要求我许可该软件，然后我关闭该弹出窗口并且没有任何反应。我不想非法使用该软件，仍然使用它是否安全，或者如果我付不起钱，我应该停止使用它吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T00:12:44.543

您可以在没有许可证的情况下无限期使用 ST2。这只是 X 次保存后出现的弹出屏幕。如果您喜欢它并且负担得起许可证，我建议您购买许可证，但继续使用该软件不是必需的。

# android - PullToRefresh 是否与 FragmentPagerAdapter 一起使用？

> ID：14470299
> 
> 赞同：5
> 
> 时间：2013-01-23T00:05:11.793
> 
> 标签：android, viewpagerindicator, pull-to-refresh

**图书馆：**

*   [https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)
*   [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

在示例中`PullToRefreshListInViewPagerActivity`仅适用于 PageAdapter。

我找不到一种方法来使用它`FragmentPageAdapter`。

**样本：**

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ptr_list_in_vp);

        mViewPager = (ViewPager) findViewById(R.id.vp_list);
        mViewPager.setAdapter(new ListViewPagerAdapter());
    }

    private class ListViewPagerAdapter extends PagerAdapter {

        @Override
        public View instantiateItem(ViewGroup container, int position) {
            Context context = container.getContext();

            PullToRefreshListView plv = (PullToRefreshListView) LayoutInflater.from(context).inflate(
                    R.layout.layout_listview_in_viewpager, container, false);

            ListAdapter adapter = new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1,
                    Arrays.asList(STRINGS));
            plv.setAdapter(adapter);

            plv.setOnRefreshListener(PullToRefreshListInViewPagerActivity.this);

            // Now just add ListView to ViewPager and return it
            container.addView(plv, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

            return plv;
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            container.removeView((View) object);
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view == object;
        }

        @Override
        public int getCount() {
            return 3;
        }

    }

    @Override
    public void onRefresh(PullToRefreshBase<ListView> refreshView) {
        new GetDataTask(refreshView).execute();
    }

    private static class GetDataTask extends AsyncTask<Void, Void, Void> {

        PullToRefreshBase<?> mRefreshedView;

        public GetDataTask(PullToRefreshBase<?> refreshedView) {
            mRefreshedView = refreshedView;
        }

        @Override
        protected Void doInBackground(Void... params) {
            // Simulates a background job.
            try {
                Thread.sleep(4000);
            } catch (InterruptedException e) {
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            mRefreshedView.onRefreshComplete();
            super.onPostExecute(result);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:13:40.710

您可以将 ListFragment 添加到 FragmentPageAdapter（或 FragmentStatePageAdapter）并在其上添加 Pull-To-Refresh 功能。

Android-PullToRefresh 存储库有一个关于[ListFragment](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/extras/PullToRefreshListFragment/src/com/handmark/pulltorefresh/extras/listfragment/PullToRefreshBaseListFragment.java)的示例。

Android 开发者网站上有一个关于如何制作[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)或[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)的示例代码。

也可以看看我的测试项目：[https ://github.com/caiguanhao/FSPAtest](https://github.com/caiguanhao/FSPAtest)

# twitter-bootstrap - Bootstrap 工具提示导致网格布局中的表单元素折叠间距

> ID：14470306
> 
> 赞同：3
> 
> 时间：2013-01-23T00:06:02.537
> 
> 标签：twitter-bootstrap, tooltip

我有一个问题，引导工具提示导致我的输入字段上的间距折叠。标记是：

```
<form>
  <div class="controls controls-row">
    <input class="span4" data-original-title="Default tooltip" rel="tooltip" type="text" placeholder=".span4">
    <input class="span1" data-original-title="Default tooltip" rel="tooltip" type="text" placeholder=".span1">
  </div>
</form> 
```

我只是使用默认的接线：

```
$('[rel="tooltip"]').tooltip(); 
```

我在这里创建了一个 jsFiddle 来显示问题：http: [//jsfiddle.net/bAaQP/2/](http://jsfiddle.net/bAaQP/2/)

请注意，当输入获得焦点时，它会折叠控件右侧的空白。

我只是使用 Bootstrap 2.2.2 中的示例网格表单。表单元素具有相对跨度大小设置，并包含在用控件行类装饰的 div 中。

我也尝试过使用最新版本的 Bootstrap-tooltip.js，但它仍然显示相同的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T04:56:25.010

**编辑：自**[2.3.0 版](https://github.com/twitter/bootstrap/blob/master/CHANGELOG.md#230-february-7-2013)以来， Bootstrap 已`container`为工具提示和弹出框添加了一个选项，可解决此问题。

用法：

```
$('[rel="tooltip"]').tooltip({
    container: '.controls'
}); 
```

* * *

这似乎是 Bootstrap 中一个有点模糊的错误。

当工具提示出现在两个跨度之间时，它会取消此 CSS 样式（bootstrap.css 的第 1319 行）：

```
.controls-row [class*="span"] + [class*="span"] {
    margin-left: 20px;
} 
```

留下`margin-left: 0`，导致空白跳跃。这是一个使用工具提示“单击”触发器的[jsFiddle](http://jsfiddle.net/bAaQP/4/)，因此您可以使用您选择的检查员观察此行为。

您可以根据自己的目的添加以下 CSS 作为 hack 修复：

```
.controls-row [class*="span"] + .tooltip + [class*="span"] {
    margin-left: 20px;
} 
```

更好的解决方案：[打开一个问题](https://github.com/twitter/bootstrap/issues/new)来报告错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:23:20.183

这**不是 Bootstrap 中的错误**，有一个简单的解决方案。只需在创建[工具提示](http://twitter.github.io/bootstrap/javascript.html#tooltips)时传入容器选项：

```
$(".my-input").tooltip({
...
container: "body"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:03:34.073

今天使用弹出框时我遇到了类似的问题。@Sara 的回答非常有帮助（如果我有声誉，我会对此发表评论）但我必须将 .tooltip 更改为 .popover 并将 margin-left 值更改为 22px 以使其看起来正确。

```
.controls-row [class*="span"] + .popover + [class*="span"] {
    margin-left: 22px;
} 
```

# sql - 如何与 SQL 中的单个撇号进行比较以查看列是否以撇号开头？

> ID：14470308
> 
> 赞同：1
> 
> 时间：2013-01-23T00:06:15.627
> 
> 标签：sql, sql-server-2008

基本上，当且仅当它作为撇号时，我试图修剪最左边的字符。

我的脚本如下

```
Identifier =
    CASE
        WHEN LEFT(Identifier, 1) = '' -- I think this is wrong
            THEN RIGHT(Identifier, LEN(Identifier) - 1) ELSE Identifier
        END, 
```

我想要做的是删除第一个字符当且仅当它是撇号但我不知道如何与单引号进行比较。

这是在 SQL Server 2008 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:07:43.383

试试这个：

```
LEFT(Identifier, 1) = '''' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:07:58.953

试试这个：

```
when left(identifier, 1) = '''' 
```

# mysql - Puppet 确保在 MySQL 之前进行 apt-get 更新

> ID：14470312
> 
> 赞同：2
> 
> 时间：2013-01-23T00:06:48.123
> 
> 标签：mysql, puppet, vagrant

[我正在使用来自https://github.com/puppetlabs/puppetlabs-mysql](https://github.com/puppetlabs/puppetlabs-mysql)的 Puppet 模块，由于某种原因，它不断产生有关 apt-get 更新的错误。

可以在[此处](https://gist.github.com/4600183)找到确切的错误消息。

出于某种奇怪的原因，MySQL 类在执行其他任何操作之前以及执行我的 apt-get update 命令之前首先执行。

有没有办法确保命令`apt-update`在我的 MySQL 模块之前运行？

[在这里](https://gist.github.com/4600205)你可以找到我当前的 default.pp 清单

我尝试了各种方法来确保首先执行 apt-update 命令，但似乎没有任何效果。在第 148 行，我尝试了以下代码，

`package { 'mysql': ensure => "installed", require => Exec['apt-update'], }`

但这并没有解决我的问题。

没有关于如何解决这个问题的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:41:43.673

为了确保 apt-get update 在 Puppet 配置之前发生，我在定义 Puppet 之前将以下命令放在了我的 Vagrantfile 中。

`config.vm.provision :shell, :inline => "apt-get update --fix-missing"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:02:50.533

它可能就像删除“已安装”周围的引号一样简单，或者如果已经安装了 mysql，您可能需要确保最新以更新 mysql：

```
package { 'mysql': 
  ensure  => latest, 
  require => Exec['apt-update'], 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T15:06:52.900

您必须在 puppet 中设置执行顺序。如果您使用 puppet mysql 模块，它带有不同的类。这些是（现在）：

```
**Public classes**
mysql::server: Installs and configures MySQL.
mysql::server::account_security: Deletes default MySQL accounts.
mysql::server::monitor: Sets up a monitoring user.
mysql::server::mysqltuner: Installs MySQL tuner script.
mysql::server::backup: Sets up MySQL backups via cron.
mysql::bindings: Installs various MySQL language bindings.
mysql::client: Installs MySQL client (for non-servers). 
```

因此，要将 APT 模块设置为首先设置您正在使用的所有 mysql 模块类的执行顺序。例如：

```
Class['apt'] -> Class['mysql::server'] -> Class['mysql::client'] -> Class['mysql::bindings'] 
```

现在，你的 puppet 脚本中所有与 sql 相关的东西都将在 apt 之后执行。

# paypal - Paypal IPN：为什么每次付款都必须验证？

> ID：14470313
> 
> 赞同：1
> 
> 时间：2013-01-23T00:06:52.373
> 
> 标签：paypal, paypal-ipn

我在我的页面上使用贝宝作为付款方式。我正在使用 IPN。

问题是：每次付款时，我都必须在 Paypal 上手动批准它。因此，Paypal 总是向我的听众发回“待处理”。在我手动批准它后，它会向我的听众发送“完成”。

我已经在沙盒中测试了很长时间，它就像一个魅力。但是为什么我必须在实时模式下手动批准呢？我的脚本不会那样工作。

帮助表示赞赏:)

图片：

[![贝宝 ipn](../Images/f71e9cf4336887fc904710e4b8b08b45.png)](https://i.stack.imgur.com/KjWuR.jpg)

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:50:23.660

这可能是您必须联系 Paypal 或您的个人资料下的配置设置。我每天都会收到订单，而不必“批准”订单。也许您正在沙箱中测试电子支票付款方式。

# javascript - javascript 似乎没有从 rails 源获取数据

> ID：14470314
> 
> 赞同：3
> 
> 时间：2013-01-23T00:06:59.373
> 
> 标签：javascript, ruby-on-rails, polling, ajax-polling

我正在使用 dataTables 来显示一个漂亮的表格来显示各种信息。javascript 成功地将轮询请求发送到数据库/网络服务器，但是 javascript 似乎没有获取任何当前数据。

这是我的控制器

```
class CommentsController < ApplicationController
  before_filter :authenticate_user!
  before_filter :get_current_user

  # GET /comments
  # GET /comments.json

  def get_current_user
    @user=current_user
  end

  def index
    @comments = @user.comments

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @comments }
    end
  end 
```

看法：

```
<h1>Listing comments</h1>

<table id="comments_id" class="display">
<thead>
  <tr>
    <th>String</th>
    <th>secondString</th>
    <th></th>
    <th></th>
  </tr>
</thead>
<tbody>
</tbody>
</table>

<br />

<%= link_to 'New Comment', new_comment_path %>
<h1>Listing comments</h1>

<table id="comments_id" class="display">
<thead>
  <tr>
    <th>State</th>
    <th>Environment</th>
    <th>dns</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
</thead>
<tbody>
</tbody>
</table>

<br />

<%= link_to 'New Comment', new_comment_path %>
<h1>Listing comments</h1>

<table id="comments_id" class="display">
<thead>
  <tr>
    <th>State</th>
    <th>Environment</th>
    <th>dns</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
</thead>
<tbody>
</tbody>
</table>

<br />

<%= link_to 'New Comment', new_comment_path %> 
```

评论.js：

```
function InitOverviewDataTable()
{
  oOverviewTable =$('#desktops_id').dataTable(
  {
    "bPaginate": true,
    "bJQueryUI": true,  // ThemeRoller-stöd
    "bLengthChange": false,
    "bFilter": false,
    "bSort": false,
    "bInfo": true,
    "bAutoWidth": true,
    "bProcessing": true,
    "iDisplayLength": 10,
    "sAjaxSource": 'desktops'
  });
}

function RefreshTable(tableId, urlData)
{
  $.getJSON(urlData, null, function( json )
  {
    table = $(tableId).dataTable();
    oSettings = table.fnSettings();

    table.fnClearTable(this);

    for (var i=0; i<json.aaData.length; i++)
    {
      table.oApi._fnAddData(oSettings, json.aaData[i]);
    }

    oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
    table.fnDraw();
  });
}

function AutoReload()
{
  RefreshTable('#desktops_id', 'desktops');

  setTimeout(function(){AutoReload();}, 3000);
}

$(document).ready(function () {
  InitOverviewDataTable();
  setTimeout(function(){AutoReload();}, 3000);
}); 
```

我看到在数据库端推送了正确的查询：

```
Started GET "/comments" for 127.0.0.1 at 2013-01-22 18:46:16 -0500
Processing by CommentsController#index as JSON
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Comment Load (0.4ms)  SELECT "comments".* FROM "comments" WHERE "comments"."user_id" = 1
Completed 200 OK in 6ms (Views: 3.2ms | ActiveRecord: 0.9ms) 
```

但是，在 Firefox 的 Web 控制台上，我看到它在轮询时没有检索到任何数据......并且当 dataTable 卡在“加载数据”时

```
[19:04:37.395] GET http://localhost:3000/comments?_=1358899476292 [HTTP/1.1 200 OK  38ms]
[19:04:39.344] GET http://localhost:3000/comments [HTTP/1.1 304 Not Modified  15ms]
[19:04:42.360] GET http://localhost:3000/comments [HTTP/1.1 304 Not Modified  18ms] 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T10:36:44.613

问题是来自服务器的 JSON 数据没有键值，`aaData`因为您正在序列化`ActiveRecord`对象。

我通常会更改您使用 DataTable 插件的方式，因为看起来您正在使用内部 API（例如`_fnAddData`），这有点讨厌。

相反，我会推荐 Ryan Bates 在其**[RailsCast #340](http://railscasts.com/episodes/340-datatables)** on Datatables 中展示的方法。这种方式对我来说非常有效，我从来没有遇到过问题。

# php - 如何为列表中的每个元素放置项目符号

> ID：14470316
> 
> 赞同：0
> 
> 时间：2013-01-23T00:07:09.317
> 
> 标签：php, html

```
echo '<td width="11%" class="imagetd">';
if (empty($arrImageFile[$key])) {
    echo '&nbsp;';
} else {
    echo '<ul class="qandaul"><li>';
    echo htmlspecialchars(is_array($arrImageFile[$key]) ? implode("\n", $arrImageFile[$key]) : $arrImageFile[$key]);
    echo '</li></ul>';
}
echo '</td>'; 
```

在上面的代码中，我有一些图像名称，现在每个图像名称都由换行符分隔，但我遇到的问题是它没有为插入换行符中的每个图像文件名显示一个项目符号。它只为第一个图像名称显示一个项目符号点，就是这样。在上面的示例中，如何为每个图像名称插入一个项目符号？

**更新**

CSS是否在下面生效：

`ul, ul li { margin: 0; padding: 0; } ul { margin-left: 1.3em; }`

下面指的是胡安的回答，我想确保它是正确的，因为它不起作用：

```
echo '<td width="11%" class="imagetd">';
if (is_array($arrImageFile[$key]) {
    foreach($arrImageFile[$key]  as $img)  {
        if (empty($arrImageFile[$key])) {
            echo '&nbsp;';
        } else {
            echo '<ul class="qandaul"><li>';
            echo '<li>' . htmlspecialchars($img) . '</li>'
        }
    }          
    echo '</li></ul>';
}
echo '</td>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:11:21.427

您将所有图像文件放入`<li>`. `<li>`为每个图像创建一个单独的

```
echo '<ul class="qandaul>';
if (empty($arrImageFile[$key])) {
    echo '<li>&nbsp;</li>';
} else {
    if (is_array($arrImageFile[$key]) {
        foreach($arrImageFile[$key] as $img)  {
            echo '<li>' . htmlspecialchars($img) . '</li>';
        }
    } else {
        echo '<li>' . htmlspecialchars($arrImageFile[$key]) . '</li>';
    }
}
echo '</ul>'; 
```

或者您可以使用其他人建议的数组内爆技巧。我倾向于认为这不太可读。

```
echo implode("</li>\n<li>", array_map(function($item){
    return htmlspecialchars($item);
},  $arrImageFile[$key])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:11:25.613

而不是`implode("\n", $arrImageFile[$key])`，

使用`implode("</li>\n<li>", $arrImageFile[$key])`，

关键是您需要`li`为一张图片创建一张。

```
echo '<td width="11%" class="imagetd">';
if (empty($arrImageFile[$key])) {
    echo '&nbsp;';
} else {
    echo '<ul class="qandaul"><li>';
    echo htmlspecialchars(is_array($arrImageFile[$key]) ? implode("</li>\n<li>", $arrImageFile[$key]) : $arrImageFile[$key]);
    echo '</li></ul>';
}
echo '</td>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:11:28.963

这是因为所有东西都包装在一个`<li>`标签中。`echo '<ul class="qandaul"><li>';`

把每一个放在它自己的`<li>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T00:11:48.420

html 中的一个指向列表标记是：

```
<ul>
    <li>First</li>
    <li>Second</li>
    <li>Third</li>
</ul> 
```

所以你必须用 "</li><li>" 内爆或使用 for 循环（或 foreach）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T00:11:49.790

要点取决于您的 CSS 样式，请检查 CSS 样式对 ul 和类 qandaul 的说明。

# android - 如何在后台线程处于活动状态时保持动画运行？

> ID：14470321
> 
> 赞同：1
> 
> 时间：2013-01-23T00:07:39.697
> 
> 标签：android, multithreading, android-animation

我有一个应用程序需要在开始时使用 svg-android 的变体将大量 SVG 转换为 Drawable。

我遇到的问题是转换是相当密集的处理器，所以如果我在 UI 线程上运行它，一切都会在它发生时暂停 10 秒左右。我尝试将转换移动到后台线程，但这会导致一些奇怪，因为在所有 Drawable 完成之前，依赖于 Drawable 数组的其他一些方法会触发。我尝试了几种不同的方法来制作加载动画，但是在后台进程处于活动状态时它们不会动画。

这是我的相关代码：

```
//get and resize SVGs
new Thread(new Runnable(){
    public void run(){
       for (int i=0;i<drawablesArray.length;i++){
            SVG vector = SVGParser.getSVGFromResources(getResources(),resourceArray[i]);
            Drawable drawable = new PictureDrawable(vector.resizePicture(height,width); //resize picture is a custom function in SVG-Android
            drawablesArray[i]=drawable;
        }
    }
}).start();

while(drawablesArray[20]==null){
    loadingView.animate().setDuration(100).rotationBy(25);
} 
```

使用该代码，它将成功阻止后面的方法触发，直到后台进程完成，但`while`循环中的动画永远不会真正播放。我也尝试过使用一个不确定`ProgressBar`的加载视图，无论有没有`while`循环（改变为实际上不做任何事情），它会一直动画，直到后台线程启动，此时它会冻结。

如果我将那里的动画代码从`while`循环中取出，动画将在后台线程完成*后*触发，而不是与后台线程同时触发。

如何在后台线程运行时保持动画继续运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:17:00.103

> 使用该代码，它将成功阻止后面的方法触发，直到后台进程完成，但 while 循环中的动画永远不会真正播放。

您在`while`循环中绑定了主应用程序线程。在此期间，您的 UI 将被冻结，就像您在主应用程序线程上完成了 SVG 工作一样。

> 我还尝试使用不确定的 ProgressBar 来加载视图，无论有没有 while 循环（更改为实际上不做任何事情），它都会动画直到后台线程启动，此时它将冻结。

据推测，那是因为您将主应用程序线程与您的循环捆绑在一起`while`，尽管我不太确定这一点，因为我们没有此代码。

> 如何在后台线程运行时保持动画继续运行？

您首先要摆脱`while`循环。

`ProgressBar`在后台工作正在进行时，只需让一个可见 - 稍后，一旦你开始工作，你就可以尝试其他解决方案。将 切换`Thread`到`AsyncTask`，然后在`onPostExecute()`中`AsyncTask`，隐藏`ProgressBar`并执行您需要对转换后的 SVG 执行的任何操作。

# sorting - 将文件移动到同名文件夹

> ID：14470322
> 
> 赞同：1
> 
> 时间：2013-01-23T00:07:40.757
> 
> 标签：sorting, batch-file, cmd

我有 1000 个带有后缀`-PRO1`和`-PPR2`（每个 1000 个）的文件，所以我有 1000 个具有相同名称但没有后缀的文件夹...

例如，我有一个名为的文件夹`Abstract_Colorful`，我有文件`Abstract_Colorful-PRO1`等等`Abstract_Colorful-PPR2`......

我想做一个能够自动移动所有文件的批处理，我有这个代码（来自另一篇文章）

```
@echo off 
setlocal enabledelayedexpansion
pushd "C:\Folders\"
for %%a in (*) do (
  set fldr=%%~na
  set fldr=!fldr:~0,4!
  md "!fldr!"
  move "%%a" "!fldr!"
)
popd
pause
exit 
```

但它的作用是，如果文件有超过 4 个字符，它会创建一个带有前 4 个字符的文件夹......我想要做的是批处理识别文件名并停在`-`并移动到文件夹......

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:16:34.287

```
@echo off
pushd "C:\Folders"
rem Process all files in this folder separating the names at "-"
for /F "tokens=1* delims=-" %%a in ('dir /B *.*') do (
   rem At this point %%a have the name before the "-" and %%b the rest after "-"
   rem Create the folder, if not exists
   if not exist "%%a" md "%%a"
   rem Move the file there
   move "%%a-%%b" "%%a"
)
popd 
```

# .htaccess - .htaccess 301 从旧网址重定向到 SEO 友好

> ID：14470326
> 
> 赞同：0
> 
> 时间：2013-01-23T00:08:12.167
> 
> 标签：.htaccess, redirect, rewrite, friendly-url

我有这样的链接：

```
www.site.com/page.php?p=1 
```

需要将其重写为 htaccess 中的友好 URL

```
RewriteRule ^home$ page.php?p=1 
```

它有效，但现在我有两个内容相同的活动链接。

尝试将 301 重定向从旧链接添加到新链接，但陷入循环。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:46:56.500

尝试匹配实际请求，以便您的规则不会循环：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /page\.php\?p=1(&|\ |^)([^\ ]*)
RewriteRule ^page\.php$ /home?%3 [L,R=301]

# then your internal rewrite
RewriteRule ^home$ page.php?p=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T02:24:34.673

我发现在这些情况下防止循环的另一种快速而肮脏的方法是添加一个查询字符串，然后检查它在重定向中是否存在。

```
RewriteCond %{QUERY_STRING} ^p=1
RewriteCond %{QUERY_STRING} !foo=bar
RewriteRule ^page\.php$ /home [NC,R=301,L]
RewriteRule ^home$ page.php?p=1&foo=bar [NC,L] 
```

在这个网站上找到：http: [//answers.oreilly.com/topic/542-how-to-properly-redirect-for-maximum-seo/](http://answers.oreilly.com/topic/542-how-to-properly-redirect-for-maximum-seo/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:49:54.427

去掉页面上的重定向，在htaccess中处理。

```
RewriteRule ^page\.php\?p=1$ /home [L,R=301] 
```

这将重定向到 /home 并停止您现在拥有的重定向循环。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-24T14:07:35.557

> 重定向 301 /page.php?p=1 www.yourwebsite.com/home?p=1 RewriteRule ^home?p=1$ /page.php?p=1

# c# - WebBrowser 禁用/删除持久性 cookie

> ID：14470330
> 
> 赞同：0
> 
> 时间：2013-01-23T00:08:49.853
> 
> 标签：c#, cookies, browser

好吧，我在执行 wb.Dispose() 后显示“Windows 安全警告 - Cookie”的 cookie 出现问题。

![在此处输入图像描述](../Images/ad00390cc9d72d533433cc33c0ffc5ba.png)

**我的代码**

```
string url = "myweb.com";
WebBrowser wb = new WebBrowser();
wb.Navigate(url);
while (wb.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }
//Fill a form
//Invoke Button
wb.Dispose(); 
```

**问题：** 我不想使用那个 cookie，我只想以最快的方式跳过它，这样这个消息就不会弹出。

**试过了**

1）我尝试将IE设置更改为“覆盖自动cookie处理”并将第一方+第三方cookie设置为“阻止”

2)

```
webBrowser.Navigate("javascript:void((function(){var a,b,c,e,f;f=0;a=document.cookie.split('; ');for(e=0;e<a.length&&a[e];e++){f++;for(b='.'+location.host;b;b=b.replace(/^(?:%5C.|[^%5C.]+)/,'')){for(c=location.pathname;c;c=c.replace(/.$/,'')){document.cookie=(a[e]+'; domain='+b+'; path='+c+'; expires='+new Date((new Date()).getTime()-1e11).toGMTString());}}}})())")` 
```

3) 更改本地策略**将安全设置检查功能关闭**为已启用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:39:37.573

我认为您在 cookie 的高级设置中选择了“覆盖自动 cookie 处理”模式。您可以在“Internet 选项”->“隐私”->“高级”中进行检查。[在 Internet Explorer 9 中管理 Cookie](http://seo.gotwebhost.com/managing-cookies-in-internet-explorer-9/)有帮助

# jsf - primefaces自动完成，如何从数据库查询转换对象列表

> ID：14470339
> 
> 赞同：1
> 
> 时间：2013-01-23T00:10:19.350
> 
> 标签：jsf, autocomplete, primefaces, converter, pojo

我有我的自动完成组件连接到我的托管 bean，然后连接到我的服务层并从数据库中获取列表。我正在尝试参考展示和我在网上找到的任何其他内容，但我无法让我的自动完成功能正常工作。我有一个演员异常，所以看起来我需要一个转换器。但是我在编写转换器时遇到了麻烦。我对一切是如何传递的感到困惑。

```
 <p:autoComplete id="placesSearchBar" value="#{searchBarBean.place}" completeMethod="#{searchBarBean.findSimilarPlaces}"
                        var="Place" itemLabel="#{Place.name}" itemValue="#{Place}" converter="PlaceConverter" />

        public class SearchBarBean 
    {
        private Place place;
        private SearchQueryService searchQueryService;
        private Criteria criteria;

        /**
         * @return the place
         */
        public Place getPlace() {
            return place;
        }

        /**
         * @param place the place to set
         */
        public void setPlace(Place place) {
            this.place = place;
        }

        /**
         * @return the searchQueryService
         */
        public SearchQueryService getSearchQueryService() {
            return searchQueryService;
        }

        /**
         * @param searchQueryService the searchQueryService to set
         */
        public void setSearchQueryService(SearchQueryService searchQueryService) {
            this.searchQueryService = searchQueryService;
        }

        /**
         * @return the criteria
         */
        public Criteria getCriteria() {
            return criteria;
        }

        /**
         * @param criteria the criteria to set
         */
        public void setCriteria(Criteria criteria) {
            this.criteria = criteria;
        }

        public List<Place> findSimilarPlaces(String query)
        {
            getCriteria().setName(query);
            List<Place> places = getSearchQueryService().findPlaces(criteria);
            return places;
        }
    }

    public class PlaceConverter implements Converter
{
    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String submittedValue) {
        SearchBarBean searchBarBean = new SearchBarBean();
        return null;
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object value) {
         return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T03:06:03.023

您的转换器必须做两件事：将一个字符串（由您的页面提交）转换为您的 pojo 的实例，并将您的 pojo 的实例转换为字符串，以便它可以显示在您的页面上。

您可以通过在 getAsString 方法中返回主键来实现这一点。然后，在您的 getAsObject 方法中，您将获取包含所选项目主键的字符串，并在数据库中查询相关记录。为此，您必须从转换器访问您的查询服务。试一试，让我知道情况如何。

# c# - 使用动态对象名称或将元素放入字典作为参考？

> ID：14470340
> 
> 赞同：-1
> 
> 时间：2013-01-23T00:10:20.210
> 
> 标签：c#, c#-4.0, object, reference, c#-5.0

我不知道这两种情况是否可能，但让我问你

**情景 1**

```
bool blObject_1=false;
bool blObject_2=false; 
```

以某种方式访问​​这些对象，例如

```
int irParam1=1;
int irParam2=2;

blObject_irParam1=true; // this will reference blObject_1
blObject_irParam2=true; // this will reference blObject_2 
```

好的场景2

编写一个包含对象引用的字典，以便我可以通过键调用并进行修改，例如

```
Dictionary myDic<string,bool> = new Dictionary<string,bool>();
bool blObject_1=false;
bool blObject_2=false;
myDic.add("object1",blObject_1);
myDic.add("object2",blObject_2);

myDic["object1"]=true; // this will actually change blObject_1 
```

c# 4 或 c# 4.5 可能吗？

**我想以某种方式动态访问变量**

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:25:36.893

无法直接对值类型进行动态引用。

这里的典型方法是将值类型（即：`bool`）包装在一个类中，并存储该类。然后，您可以从任何位置访问该课程并更改其成员。

这使您可以拥有可以从多个位置更改的“共享”状态。

# django - Django 中的 PJAX 标头

> ID：14470341
> 
> 赞同：0
> 
> 时间：2013-01-23T00:10:21.507
> 
> 标签：django, jquery, pushstate, pjax

我正在尝试使用 jQuery-pjax 和 django-pjax 对我的一些观点进行 pjaxify。据我了解，每个 pjax 请求都会发送一个额外的 header **`X-PJAX: True`**。但是，即使（我认为）我的 pjax 代码工作正常，我也无法在任何地方找到它。

基本模板**`stock-template.html`**：

```
<ul>
    <li><a data-pjax href="/basic/stock/" id="link-stock-index"></li>
    <li><a data-pjax href="/basic/stock/list/" id="link-stock-list"></li>
</ul> 
```

```
<script type="text/javascript">
$(document).ready(function(){

    if ($.support.pjax) {

      // I have tried the basic way
      // $(document).pjax('a[data-pjax]', '.tab-content)
      // here is a simplified version of using pjax through the click event

      // the container does get updated
      $(document).on('click', 'a[data-pjax]', function(event) {
        var container = $('.tab-content')
        $.pjax.click(event, {container: container})
      })

      // this gets executed
      $(document).on('pjax:complete', console.log('pjaxify complete'))

    }

});
</script> 
```

在模板 1（股票索引）**`stock.html`**和模板 2（股票列表）中**`stock-list.html`** ，我扩展了模板并重用了上面的导航，同时将 a**`<div class="tab-content">`**作为指定容器放入其中。

**网址.py**

```
urlpatterns = patterns('',
    url(r'^$', stock.index, name='index'),
    url(r'^stock/$', stock.index),
    url(r'^stock/list', stock.slist),
) 
```

**视图.py**

```
def index(request):
    context_instance = RequestContext(request, {
        'pjax': request.META.get('HTTP_X_PJAX'), 
    })         
    return TemplateResponse(request, 'basic/stock/stock.html', context_instance)

def slist(request):
    items = Stock.objects.all()
    context_instance = RequestContext(request, {
        'pjax': request.META.get('HTTP_X_PJAX'),
    })
    return TemplateResponse(request, 'basic/stock/stock-list.html', context_instance) 
```

总而言之，我认为我的代码有效，因为 PJAX 脚本被执行`pjax:complete`并被调用。我只想仔细检查标题以确保它是 pjax 而不是 localhost 太快而无法注意到页面刷新。问题是我在 Chrome 或 Firefox 中看不到任何 X-PJAX 标头。

如您所见，我还尝试获取标题并将其发送到模板以显示，但它输出`None`.

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:29:55.927

我的问题很愚蠢。PJAX 无法用 template-pjax 交换我的模板，因为我忘记在 pjax 模板中加载 i18n。但我非常感谢@Sean Hogan 关于检查网络面板的提示。

# jquery - jQuery中多个子函数的格式化

> ID：14470344
> 
> 赞同：0
> 
> 时间：2013-01-23T00:10:45.937
> 
> 标签：jquery, jquery-plugins

我正在使用 jQuery 过滤插件[Filtrify](http://luis-almeida.github.com/filtrify/)并且难以添加多个子功能。

在我尝试添加两个回调之前它工作正常。这是我最好的尝试！

```
var ft = $.filtrify("container", "searchbox", {
    close : true,
    callback : { 
        function() {
            destroyPagination();
            setPagination();
        }, 
        function() {
            if ( mismatch.length ) $("div#reset").show();
            else $("div#reset").hide();
        }
    }
}); 
```

我在 Stack Overflow、Filtrify 文档和其他在线网站上四处寻找，但我找不到任何具有多个子功能（如上述代码）的信息或示例。

非常感谢，如果我有错误的术语，请随时更改我的问题标题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:18:40.410

这将基于插件的设计。如果插件本身不允许多个回调（这个不允许），那么你不能使用它们。

相反，只需使用一个回调。回调具有三个参数，包括匹配和不匹配列表，并在每次添加或删除标签时触发。

# ruby-on-rails - 删除用户后如何使其返回“未找到用户”？

> ID：14470347
> 
> 赞同：0
> 
> 时间：2013-01-23T00:10:47.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这个`models/comment.rb` 但是当用户被删除时它返回错误。
删除用户后如何使其返回“未找到用户”？

**模型/comment.rb**

```
 def self.last_comment_nickname
    order("id").last.user.profile.nickname
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:45:10.400

使用[andand 宝石](http://andand.rubyforge.org/)：

```
def self.last_comment_nickname
  order("id").last.user.andand.profile.andand.nickname || "Not Found User"
end 
```

或者只是写代码；老实说，如果您不确定如何检查 null 的值，恐怕只是告诉您从长远来看弊大于利。

尽管我可能会将配置文件方法委托给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:46:16.100

```
def self.last_comment_nickname
  user = order("id").last.user
  user.present? ? user.profile.nickname : "Not Found User"
end 
```

# php - 上传的带有空格的文件使 is_resource() 失败 - php

> ID：14470352
> 
> 赞同：0
> 
> 时间：2013-01-23T00:11:21.773
> 
> 标签：php, file-upload

我有一个脚本检查文件是否存在：

```
function fileExists($url) {
    $fh = fopen($url, 'r');
    if (is_resource($fh)) {
        fclose($fh);
        return true;
    }
    return false;
} 
```

一切正常，直到我尝试上传名称包含空格的文件。调用`$url`文件的url，当我把它放在浏览器中时，它会正确显示文件，但`is_resource($fh)`总是返回false。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:14:49.300

在`$fh = fopen($url, 'r');`添加之前：

```
$parts = pathinfo($url);
$url   = $parts['dirname'].'/'.rawurlencode($parts['basename']); 
```

顺便说一句，有一个[PHP 错误](https://bugs.php.net/bug.php?id=16510&edit=1)...

# php - 从等级计算星星（5-1 和 1-5）

> ID：14470357
> 
> 赞同：1
> 
> 时间：2013-01-23T00:11:43.300
> 
> 标签：php, math

我有从 1 到 5 的等级，其中 1 是最好的，5 是最差的（但不仅仅是像 1 这样的整数，还有 1.14 等等）。我想计算每个等级有多少颗星（5 颗星是最好的，1 颗星是最差的 - 当然 3 颗会保持 3 颗 - 但其余的？）我用谷歌搜索得到结果，但我没有找到任何有用的. 也许我是只见树木不见森林，我不知道。基本上这将是我猜的相反数字？我想在 PHP 中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:15:15.853

我认为非常简单：

```
$new_grade = 6 - $old_grade; 
```

或者对于更通用的解决方案：

```
$new_grade = $grade_max + $grade_min - $old_grade; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:15:23.863

星 = 6 - 等级

所以：

```
5 → 1  
4 → 2  
3 → 3  
2 → 4   
1 → 5 
```

# c# - 调用存储过程的计算列

> ID：14470361
> 
> 赞同：0
> 
> 时间：2013-01-23T00:12:12.440
> 
> 标签：c#, datagridview

我希望你能帮忙。

当该列`datagridview`的数据应来自`storedProcedure`. 它只是随 that 返回的一个值`sp`。我不确定这是否可能，或者我应该在字符串中包含一个`sql`执行该任务的函数？`sql`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:37:33.860

如何以编程方式执行此操作.. 例如，您单击显示加载的按钮.. 这是加载存储过程的典型代码示例.. 您可以将代码移动到 page_load 而不是 Button1_click.. 我只是发布重要的代码片段..

```
public partial class WebForm4 : System.Web.UI.Page {
SqlConnection sqlcon = new SqlConnection("Data Source=Local-host;Initial 
                                      Catalog=HRM_Login;Integrated Security=True");
        SqlCommand sqlcmd = new SqlCommand();
        SqlDataAdapter sqladp = new SqlDataAdapter();
        DataSet ds = new DataSet();

    protected void Button1_Click(object sender, EventArgs e)
            {
                Label2.Visible = true;
                GridView1.Visible = true;

                sqlcmd.Connection = sqlcon;
                sqlcmd.CommandText = "GetStudentName";
                sqlcmd.CommandType = CommandType.StoredProcedure;
                sqlcmd.Parameters.Add(new SqlParameter("@Studentid", SqlDbType.Int)).Value 
                                          = Int32.Parse(txt_studentid.Text);
                sqladp.SelectCommand = sqlcmd;
                sqladp.Fill(ds);
                GridView1.DataSource = ds.Tables[0];
                GridView1.DataBind();
            }
    }

well u can try
GridView1.DataSource = ds; instead of GridView1.DataSource = ds.Tables[0]; 
```

# javascript - Javascript - 检查一个数字是否更接近 2 个变量

> ID：14470362
> 
> 赞同：1
> 
> 时间：2013-01-23T00:12:14.927
> 
> 标签：javascript

我有 12 个不同的数字存储在变量中，如下所示：

```
var span1 = 8.333333333;
var span2 = 16.66666667;
var span3 = 25;
var span4 = 33.33333333;
var span5 = 41.66666667;
var span6 = 50;
var span7 = 58.33333333;
var span8 = 66.66666667;
var span9 = 75;
var span10 = 83.33333333;
var span11 = 91.66666667;
var span12 = 100; 
```

我有一个函数，它将 div 的宽度与其父宽度进行比较，并以百分比形式返回一个值（减去 % 符号），例如`48.5586`. 我希望该函数检查结果最接近哪些跨度变量。例如，`48.5586`将返回`"span6"`，因为它比 41.666667 更接近 50。

真的不知道从哪里开始，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T00:19:42.917

由于每个跨度都比前一个跨度多 8 1/3 %，这只是`100/12`，因此您应该能够使用一个公式来计算出您需要的跨度类。

我制定了以下内容：

```
function spanClass(percentWidth) {
    return 'span' + Math.round(percentWidth / (100/12));
} 
```

这给出`span6`了 48.5586。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T00:16:07.213

通过取输入数字与每个变量值之间差异的[绝对值的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/abs)[最小值](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/min)，可以找到最小的差异。

也就是说，您应该真正使用适当的数据结构，如对象或数组，将这些字符串映射到数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:29:40.830

将值放入数组中，然后您可以根据值之间的差异对数组进行排序。最小的差异是数组中的第一个，所以这是最接近的值：

```
var spans = [
    { span: 1, value: 8.333333333 },
    { span: 2, value: 16.66666667 },
    { span: 3, value: 25 },
    { span: 4, value: 33.33333333 },
    { span: 5, value: 41.66666667 },
    { span: 6, value: 50 },
    { span: 7, value: 58.33333333 },
    { span: 8, value: 66.66666667 },
    { span: 9, value: 75 },
    { span: 10, value: 83.33333333 },
    { span: 11, value: 91.66666667 },
    { span: 12, value: 100 }
];

var value = 48.5586;

spans.sort(function(x, y){
    var a = Math.abs(value - x.value);
    var b = Math.abs(value - y.value);
    return a == b ? 0 : a < b ? -1 : 1;
});

alert(spans[0].span); 
```

演示：http: [//jsfiddle.net/Guffa/77Rf9/](http://jsfiddle.net/Guffa/77Rf9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T00:30:15.853

最好有数组。在我的代码中，我还将您的变量转换为数组，然后进行处理。eval 不好，不应该使用

[http://codebins.com/bin/4ldqp6b](http://codebins.com/bin/4ldqp6b)

```
var span1 = 8.333333333;
var span2 = 16.66666667;
var span3 = 25;
var span4 = 33.33333333;
var span5 = 41.66666667;
var span6 = 50;
var span7 = 58.33333333;
var span8 = 66.66666667;
var span9 = 75;
var span10 = 83.33333333;
var span11 = 91.66666667;
var span12 = 100;

var arr = [];
for (var i = 0; i < 12; i++) {
    eval('arr[' + i + '] = span' + (i + 1));
}

function closestTo(arr, val) {
    var closest = 10000,
        ind = -1,
        diff = 10000; // some random number
    for (var i = 0; i < arr.length; i++) {
        var tmp = Math.abs(val - arr[i]);
        if (diff > tmp) {
            diff = tmp;
            closest = arr[i];
            ind = i;
        }
    }
    alert("Closesnt Number: " + closest + "\nClosest Index:" + ind + "\nclosest variable: span" + (ind + 1))
}

closestTo(arr, 50.12) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T00:31:01.797

在 JavaScript 中实现最接近的函数。将所有跨度移动到一个对象中，以便更轻松地对其进行迭代。只需枚举所有跨度并保留最接近的跨度。

```
var spans = {
  span1: 8.333333333,
  span2: 16.66666667,
  span3: 25,
  span4: 33.33333333,
  span5: 41.66666667,
  span6: 50,
  span7: 58.33333333,
  span8: 66.66666667,
  span9: 75,
  span10: 83.33333333,
  span11: 91.66666667,
  span12: 100
};

function closest(value) {
  var delta
    , lastMatch;

  Object.keys(spans).forEach(function (span) {
    var thisDelta;
    if (!delta) {
      lastMatch = span;
      delta = Math.abs(value - spans[span]);
    } else {
      thisDelta = Math.abs(value - spans[span]);
      if (thisDelta < delta) {
        lastMatch = span;
        delta = thisDelta;
      }
    }
  });
  return lastMatch;
}

var result = closest(48.5586);

console.log(result); 
```

这是一个有效的[Codepen](http://codepen.io/anon/pen/Fslam)示例。

# xcode - 在 OS X Cocoa 中将 NSButton 添加到 CALayer

> ID：14470367
> 
> 赞同：0
> 
> 时间：2013-01-23T00:12:58.387
> 
> 标签：xcode, macos, cocoa, core-animation, calayer

我有一个包含 CAlayer 的图层托管视图，在这种情况下显示一个漂亮的蓝色不透明矩形。我想要做的是在图层顶部添加一个 NSButton ，以便它位于上方并在动画时与蓝色矩形一起移动。

到目前为止，我的尝试如下：

在@interface

```
IBOutlet NSButton* firstButton; 
```

在@实现中

```
[layer addSublayer:[firstButton layer]];
firstButton.layer.position=NSMakePoint(0, 80.); 
```

这成功地移动了屏幕上按钮的位置，但*不会*移动按钮的“命中目标”。

根据[此处在 Apple Mailing Lists 上](http://lists.apple.com/archives/cocoa-dev/2008/Nov/msg00898.html)提出的类似问题，解决方案似乎是在按钮上使用 setFrameOrigin: 移动 NSButton。这似乎对我不起作用，因为它改变了显示按钮的位置以及“命中目标”。我似乎无法独立移动命中目标。

或者：我是不是走错了路？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:41:54.430

不幸的是，您无法通过操作图层来移动按钮（包括命中目标）。这是非常不幸的，但是您将不得不在按钮本身的框架上使用动画代理，而不是尝试直接修改图层。

# javascript - 在 coffeescript 项目的 git 存储库中排除 .js 文件

> ID：14470370
> 
> 赞同：1
> 
> 时间：2013-01-23T00:13:13.357
> 
> 标签：javascript, git, coffeescript

处理咖啡脚本项目的开发团队是否会从他们的 git 存储库中排除已编译的 .js 文件，并仅跟踪 .coffee 文件，同时期望开发人员在测试时将 .coffee 文件编译为 js？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:31:24.697

如果我是你，我会排除它们。它们是构建工件。

有一个生成 js 的完整构建任务

当您进行与咖啡脚本无关的简单更改时，您的开发人员可以运行不包括构建 js 的增量任务，因为它使用已经存在的构建工件。

# shell - 从劣质 shell 运行 emacs lisp 命令

> ID：14470371
> 
> 赞同：4
> 
> 时间：2013-01-23T00:13:27.983
> 
> 标签：shell, emacs, command, elisp

如何从劣质 shell 以编程方式调用 emacs lisp 函数？

例如，我在一个使用一些 emacs 识别并尝试自动扩展的字符的 shell 中，所以我想运行这个命令`(setq comint-input-autoexpand nil)`来将它应用到我所在的 shell。

我现在可以通过在 shell 中输入命令的文本并在其上运行类似的东西来做到这一点`eval-region`，但我希望我的 shell 能够自己调用这个命令。

* * *

感谢回复的人，但我的问题似乎不清楚。我可以通过输入一个 elisp 表达式、选择它并在其上调用“eval-region”来完成我想要的，但这需要手动输入。我想要的是一种自动化的方法，这样我的 shell 就可以向 emacs 发送一个命令来更改它自己的设置。

“emacsclient”的建议似乎是在正确的方向，但我担心 Windows 不完全支持它的选项，并且不清楚这样的命令会影响我调用它的缓冲区，因为我会通过外部“壳”命令。

我想要的是某种转义序列，它向 emacs 发出信号“这个 elisp 表达式是给你的”。我猜可能有一种方法可以打开一个到 emacs 的套接字并以这种方式发送命令，但我仍然有选择应用命令的缓冲区的问题。同样，这在 Windows 中可能更困难/不可能，所以我现在将依赖绑定到键序列的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:24:26.433

听起来你在找`M-x eval-expression`，默认绑定到 M-: （Alt+冒号，即 Alt+Shift+分号）。表达式会在调用时所处的任何上下文中进行评估`eval-expression`，因此如果表达式设置了缓冲区局部变量，它将为您当前的缓冲区设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:22:43.870

您可以使用 emacsclient 来执行此操作。您需要将 emacs 作为服务器启动，或者`(server-start)`在您的`.emacs`或通过将 emacs 作为后台进程启动`--daemon`.

您可以像这样在 shell 中评估 elisp 代码：

```
emacsclient --eval '(setq comint-input-autoexpand nil)' 
```

# java - 在 Java 中使用带有多个变量的 printf

> ID：14470372
> 
> 赞同：-1
> 
> 时间：2013-01-23T00:13:43.850
> 
> 标签：java, printf

每当我使用它时，它只会打印出前两个变量。

这是我的代码：
`out.printf("%9d %s%n", jobs.new, jobs.old, jobs.all, jobs.welcome, allnames);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:16:08.527

您需要所有变量的占位符。
`out.printf("%9d %9d %9d %9d %s%n", jobs.new, jobs.old, jobs.all, jobs.welcome, allnames);`

# maven - 如何根据 maven shade 插件的顶级依赖项排除？

> ID：14470373
> 
> 赞同：1
> 
> 时间：2013-01-23T00:13:45.407
> 
> 标签：maven, maven-shade-plugin

我有一个要从胖 jar 中排除的依赖项，并且该依赖项有很多传递依赖项。是否可以在我的 pom 文件中设置一些配置，以便将依赖项及其所有传递依赖项从胖 jar 中排除，而不列出这些依赖项中的每一个？

# image - 带有 Image Magick 的不可读图像（透明度？）

> ID：14470374
> 
> 赞同：0
> 
> 时间：2013-01-23T00:13:47.030
> 
> 标签：image, image-processing, imagemagick, transparency

我的目标是改变精灵的组织以供游戏阅读。我实现了几个命令：

```
convert skin.png -resize 133% skin-resize.png
convert skin-resize.png -crop 128x128+0+0 skin-resize-crop1.png
convert skin-resize.png -crop 128x128+128+0 skin-resize-crop2.png
convert skin-resize-crop2.png skin-resize-crop1.png +append montage.png
convert montage.png -background transparent -extent 256x256 -quality 0 montage_extend.png 
```

精灵的新组织对我来说看起来不错，但是图像不再被我的游戏识别，那么我用windows软件打开它就没有问题了。我注意到，如果我用 Photoshop 打开图像，然后我备份图像，无需任何修改，图像就可以被我的游戏识别。我在 2 张图片上制作了“识别 -verbose”以查看差异，这是我注意到的：

使用 imagemagick 6.8.1-9 (windows 7) 生成的 montage_extend.png

```
Alpha: none   #00000000
Rendering intent: Perceptual
Gamma: 0.45455
Chromaticity:
  red primary: (0.64,0.33)
  green primary: (0.3,0.6)
  blue primary: (0.15,0.06)
  white point: (0.3127,0.329)
Interlace: None
Background color: black
Border color: srgba(223,223,223,1)
Matte color: grey74
Transparent color: none
Compose: Over
Page geometry: 680x340+256+0
Origin geometry: +256+0
Dispose: Undefined
Iterations: 0
Compression: Zip
Orientation: Undefined
Properties:
  date:create: 2013-01-22T23:43:59+01:00
  date:modify: 2013-01-23T00:29:50+01:00
  png:bKGD                 : chunk was found (see Background color, above)
  png:cHRM                 : chunk was found (see Chromaticity, above)
  png:gAMA                 : gamma=0.45454544 (See Gamma, above)
  png:IHDR.bit_depth       : 8
  png:IHDR.color_type      : 6 (RGBA)
  png:IHDR.interlace_method: 0 (Not interlaced)
  png:IHDR.width,height    : 256, 256
  png:oFFs                 : x_off=256, y_off=0
  png:pHYs                 : x_res=7873, y_res=7873, units=1
  png:sRGB                 : intent=0 (Perceptual Intent)
  png:text                 : 2 tEXt/zTXt/iTXt chunks were found
  png:vpAg                 : width=680, height=340
  signature: c9aee1b8c3e1b8111a19eb1ec2a50b675eec067688f74363730c58857ea9c724
Artifacts:
  filename: montage_extend.png 
```

montage_extend-ps.png（用photoshop保存的图像）

```
Alpha: srgba(255,255,255,0)   #FFFFFF00
Rendering intent: Perceptual
Gamma: 0.454545
Chromaticity:
  red primary: (0.63999,0.33001)
  green primary: (0.3,0.6)
  blue primary: (0.15,0.05999)
  white point: (0.31269,0.32899)
Interlace: None
Background color: white
Border color: srgba(223,223,223,1)
Matte color: grey74
Transparent color: none
Compose: Over
Page geometry: 256x256+0+0
Dispose: Undefined
Iterations: 0
Compression: Zip
Orientation: Undefined
Properties:
  date:create: 2013-01-23T00:30:40+01:00
  date:modify: 2013-01-23T00:30:42+01:00
  png:cHRM                 : chunk was found (see Chromaticity, above)
  png:IHDR.bit_depth       : 8
  png:IHDR.color_type      : 6 (RGBA)
  png:IHDR.interlace_method: 0 (Not interlaced)
  png:IHDR.width,height    : 256, 256
  png:pHYs                 : x_res=7873, y_res=7873, units=1
  signature: c121d0c36e1dca7f55fb4bd04f140614aa34210dab19c6f6d5031f63d0be4978
Artifacts:
  filename: montage_extend-ps.png 
```

透明度看起来不同，但我不知道如何使用 Image Magick 转换我的图像以获得相同的结果。

PS：对不起我的英语：s

# ios - iPhone SDK：电子邮件应用程序源代码

> ID：14470375
> 
> 赞同：-2
> 
> 时间：2013-01-23T00:13:50.320
> 
> 标签：ios, email, ios4

我想制作一个电子邮件应用程序，但我想知道是否已经有一个应用程序提供了他们的源代码，这样我就可以抢占先机。就像将电子邮件放在表格视图中并从服务器检索它们的简单概念一样。如果那里有什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:01:47.177

如果您进行谷歌搜索，您应该能够找到您要查找的内容。这是我找到的一些。

[http://mobile.tutsplus.com/tutorials/iphone/mfmailcomposeviewcontroller/](http://mobile.tutsplus.com/tutorials/iphone/mfmailcomposeviewcontroller/)

[http://m.youtube.com/#/watch?v=ECkJh2mnFc8&desktop_uri=%2Fwatch%3Fv%3DECkJh2mnFc8](http://m.youtube.com/#/watch?v=ECkJh2mnFc8&desktop_uri=%2Fwatch%3Fv%3DECkJh2mnFc8)

令人讨厌的柠檬水滴非常好。

# google-chrome - Chrome 的 Canvas 错误是否存在使用 lineTo 丢失像素的解决方法

> ID：14470377
> 
> 赞同：0
> 
> 时间：2013-01-23T00:14:02.317
> 
> 标签：google-chrome, canvas, html5-canvas

Chrome 的 Canvas 实现中存在一个已知错误，其中对 lineTo 的连续调用有时会在角落放置像素：http: [//jsfiddle.net/rPJBr/2/](http://jsfiddle.net/rPJBr/2/)

```
var cx = document.getElementById('c').getContext('2d');
cx.beginPath();
cx.moveTo(200.5, 200.5);
cx.lineTo(200.5, 100.5);
cx.lineTo(100.5, 100.5);
cx.stroke(); 
```

这是win7上chrome 24上行为的图像和放大图

![缺少角像素再现](../Images/5608686fb513a440c68a182b62d3a9d4.png)

该错误已记录在这里：[http ://code.google.com/p/chromium/issues/detail?id=137465](http://code.google.com/p/chromium/issues/detail?id=137465)

此错误是否有已知的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T19:20:43.167

```
if(windows.chrome) {
    var p = CanvasRenderingContext2D.prototype;
    p.origLineTo = p.lineTo;
    p.lineTo = function(x, y) {
        this.fillRect(x - 0.5, y - 0.5, 1, 1);
        return this.origLineTo(x, y);
    };
    p.origMoveTo = p.moveTo;
    p.moveTo = function(x, y) {
        this.fillRect(x - 0.5, y - 0.5, 1, 1);
        return this.origMoveTo(x, y);
    };
} 
```

# joomla - 使用 JQuery Masonry 将 AdSense 注入 Joomla 模板

> ID：14470380
> 
> 赞同：0
> 
> 时间：2013-01-23T00:14:32.563
> 
> 标签：joomla, adsense, jquery-masonry

我知道 JoomlArt JA Wall 模板，但它似乎不符合我们的用例，因为我们需要在提要中包含作为 Adsense 横幅的图块。我已经阅读了 JQuery Masonry 并看到它使用了无限滚动功能。

是否可以使用 Masonry 创建一个 Joomla 模板，该模板也将采用 Adsense 横幅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:43:39.893

当然可以，只要确保将您选择的砌体类添加到每个元素即可；取决于你想要对齐什么样的元素：模块？博客项目？这应该相当容易；如果你想在整个页面中应用砌体，只要确保你没有将模块和博客项目包含在它们自己的 div 组中。

# powershell - Powershell v2 和 v3 挂起使用 group-object 和 import-csv

> ID：14470382
> 
> 赞同：0
> 
> 时间：2013-01-23T00:14:41.157
> 
> 标签：powershell, grouping

当我使用这行脚本时，它似乎使 powershell 的 ISE 崩溃。如果我删除文件的前 25 行以外的所有行，我可以毫无问题地计算它们。但是，读取整个文件 90,000 行将导致 powershell ISE 永远不会完成命令，然后如果我按下停止按钮，ISE 将永远不会响应（尽管我可以关闭应用程序）。

```
import-CSV C:\CONVERT\DataOutput.csv -Delimiter '|' | group-object 'Person ID'
| measure-Object 'Name' 
```

我注意到，当我运行 import-csv 命令时，私有工作集内存会爬升到大约 2.9 GB。我已经查看了命令选项，但没有看到以不同方式处理内存中对象的方法，import-csv 将自行完成，但与 Group-object & measure 结合运行时不会目的。提前感谢任何想法或问题，以帮助我找到路径！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:07:06.560

如果您删除测量对象怎么办，它会一直运行吗？性能提示，尝试将 -noelement 开关添加到 group-object，它应该会提高执行并减少内存消耗。

# dynamics-crm-2011 - Dynamics CRM - 从 MSBUILD 中剔除新的组织、构建/部署插件 - 问题

> ID：14470385
> 
> 赞同：0
> 
> 时间：2013-01-23T00:15:13.133
> 
> 标签：dynamics-crm-2011, msbuild-task

我在部署、导出和导入到另一个盒子时遇到运行时异常...... CRM 解决方案。例外是：

`System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'`

它仅在我使用 MSBUILD 脚本执行此操作时发生。当我手动使用 VS (2010) 执行此操作时，一切都很好。所以，第一个嫌疑人是我的剧本。我的脚本使用 MSBUILD 自定义任务，灵感来自[http://fczaja.blogspot.com/2012/07/continuous-integration-with-crm.html](http://fczaja.blogspot.com/2012/07/continuous-integration-with-crm.html)。

我的感觉是问题可能出在 Export 步骤上 - 它使用`Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy`, up-cast to `IOrganizationService.Execute`, 传递一个`ExportSolutionRequest`对象。我们只设置`SolutionName`和`Managed`属性。也许我们错过了另一个财产？

我试图缩小它的根本原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:39:36.840

您是否有机会在插件程序集中使用 ILMerge？

如果是这样，我怀疑这是您的参考程序集的问题，可能在构建服务器上有.NET 4.5，但在您手动构建它的机器上没有。

如果确实如此，这些链接将进一步解释：http: [//www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45- Beta-assemblies-targeting-Net-40.aspx](http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx)

根本的解决方法是将您的 ILMerge 参考程序集更改为 -/targetplatform:"v4,C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0"

# java - 用 XML 中的对象填充数组

> ID：14470391
> 
> 赞同：0
> 
> 时间：2013-01-23T00:15:33.260
> 
> 标签：java

我有一个 XML 文件，我正在尝试读取并转换为对象。我想转换并将所有位置放入一个填充有 Location 对象的数组中，这些对象由电影 ID、日期和数量定义。

这是我的 XML 文件：

这是我扫描位置 XML 部分的代码：

```
 public void findLocations() throws ParseException {

    NodeList nList = document.getElementsByTagName("location");
    Location[] locations = new Location[nList.getLength()];
    for (int temp = 0; temp < nList.getLength(); temp++) {
        Node nNode = nList.item(temp);

        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
           Element eElement = (Element) nNode;
              locations[temp] = new Location(getTagValue("filmid", eElement), dateChanger(getTagValue("date", eElement)), getTagValue("amount", eElement));
         System.out.println(locations[temp].getAmount()); //Outputs the good values.
        }

    }
 System.out.println(locations[0].getAmount()); //Output : 5$
 System.out.println(locations[1].getAmount()); //Output : 5$
 System.out.println(locations[2].getAmount()); //Output : 5$
}

private static String getTagValue(String sTag, Element eElement) {

    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
    Node nValue = (Node) nlList.item(0);
    return nValue.getNodeValue();
} 
```

问题似乎是我的数组在同一个位置被填充了 3 次，最后一个位置被填充了 3 次。否则，物体的形状很好，所以我想我做对了那部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:23:36.603

您可以改用 XPath...

```
public class TestXML03 {

    public static void main(String[] args) {

        try {
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            factory.setNamespaceAware(false);
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document xmlDoc = builder.parse(new File("Test.xml"));

            Node root = xmlDoc.getDocumentElement();

            XPathFactory xFactory = XPathFactory.newInstance();
            XPath xPath = xFactory.newXPath();

            XPathExpression xExpress = xPath.compile("/file/location");
            NodeList nodes = (NodeList) xExpress.evaluate(root, XPathConstants.NODESET);

            System.out.println("Found " + nodes.getLength() + " location nodes");
            System.out.println("");

            for (int index = 0; index < nodes.getLength(); index++) {
                Node node = nodes.item(index);
                xExpress = xPath.compile("filmid");
                Node filmIDNode = (Node) xExpress.evaluate(node, XPathConstants.NODE);
                System.out.println(filmIDNode.getNodeName() + " = " + filmIDNode.getTextContent());

                xExpress = xPath.compile("date");
                Node dateNode = (Node) xExpress.evaluate(node, XPathConstants.NODE);
                System.out.println(dateNode.getNodeName() + " = " + dateNode.getTextContent());

                xExpress = xPath.compile("amount");
                Node amountNode = (Node) xExpress.evaluate(node, XPathConstants.NODE);
                System.out.println(amountNode.getNodeName() + " = " + amountNode.getTextContent());

                System.out.println("");
            }

        } catch (Exception exp) {
            exp.printStackTrace();
        }
    }
} 
```

哪个输出...

```
Found 3 location nodes

filmid = 100
date = 2013-01-11
amount = 4.00$

filmid = 200
date = 2013-01-13
amount = 9.00$

filmid = 334
date = 2013-01-23
amount = 5.00$ 
```

**反馈后更新**

该类`Location`维护`static`对其类字段的引用，这意味着更改该字段的值将更改该类的所有实例。

删除`static`引用，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:50:12.630

您的来源运行良好。只需将源代码修改为输出标签，如下所示。

```
public static void findLocations(Document document) throws ParseException {
    NodeList nList = document.getElementsByTagName("location");
    Location[] locations = new Location[nList.getLength()];
    for (int temp = 0; temp < nList.getLength(); temp++) {
        Node nNode = nList.item(temp);

        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
            Element eElement = (Element) nNode;
            System.out.println(getTagValue("filmid", eElement));
            System.out.println(getTagValue("date", eElement));
            System.out.println(getTagValue("amount", eElement));
            System.out.println();
        }
    }
} 
```

我得到了正确的输出

```
100
2013-01-11
4.00$

200
2013-01-13
9.00$

334
2013-01-23
5.00$ 
```

检查您的 XML 输入是否正确。

# c - 如何在 C 中执行 ls *.txt

> ID：14470392
> 
> 赞同：2
> 
> 时间：2013-01-23T00:15:42.803
> 
> 标签：c, shell, wildcard, ls, execvp

我在执行 *.txt 通配符时遇到问题，并且阅读此线程 - [C 中的 exec() 任何命令](https://stackoverflow.com/questions/8089351/exec-any-command-in-c)- 表明由于“通配符”问题，这很困难。有什么简单的方法可以解决这个问题吗？

这是我正在尝试做的事情：

```
char * array[] = {"ls", "*.txt", (char *) NULL };
execvp("ls", array); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:17:27.213

你可以使用系统命令：

```
system("ls *.txt"); 
```

让 shell 为你做 globbing。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:30:00.947

为了回答这个问题，您必须了解在您输入`ls *.txt`终端（模拟器）时发生了什么。键入命令时`ls *.txt`，它正在由[`shell`](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29). 然后`shell`执行目录列表并将目录中的文件名与`*.txt`模式匹配。只有在完成上述所有操作后，才`shell`准备所有文件名作为参数并生成一个新进程，将这些文件名作为`argv`数组传递给[`execvp`](http://www.kernel.org/doc/man-pages/online/pages/man3/exec.3.html)调用。

为了自己组装类似的东西，请查看以下 Q/A：

*   [如何在C程序中列出目录中的文件？](https://stackoverflow.com/questions/4204666/how-to-list-files-in-a-directory-in-a-c-program)
*   用于[`fnmatch()`](http://www.kernel.org/doc/man-pages/online/pages/man3/fnmatch.3.html)将文件名与类似 shell 的通配符模式匹配。
*   从匹配的文件名中准备参数列表，并使用[`vfork()`](http://www.kernel.org/doc/man-pages/online/pages/man2/vfork.2.html)其中一个[`exec(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/exec.3.html)函数来运行另一个程序。

或者，您可以使用[`system()`](http://www.kernel.org/doc/man-pages/online/pages/man3/system.3.html)@manu-fatto 建议的功能。但是这个函数会做一些不同的事情——它实际上会运行`shell`程序来评估`ls *.txt`语句，而语句又会执行类似于我上面描述的步骤。它可能效率较低，并且可能会引入安全漏洞（有关更多详细信息，请参见手册页，安全风险在*NOTES*部分中说明，并建议在某些情况下不要使用上述功能）。

希望能帮助到你。祝你好运！

# facebook-like - Facebook Like“对象无效值”和 URL 无法解析

> ID：14470393
> 
> 赞同：0
> 
> 时间：2013-01-23T00:15:46.927
> 
> 标签：facebook-like, url-parsing

当我在 facebook
[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.dreampiece.com.au%2Findex.php进行 OG 检查时出现此错误%3Fmain_page%3Dproduct_info%26cPath%3D2_7%26products_id%3D459](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.dreampiece.com.au%2Findex.php%3Fmain_page%3Dproduct_info%26cPath%3D2_7%26products_id%3D459)

> 'product' 类型的 URL 'http://www.dreampiece.com.au/index.php?main_page=product_info&cPath=2_7&products_id=459' 对象无效，因为属性 'og:url' 的给定值 '' 不能被解析为类型'url'。

这是我的页面来源，

```
<meta property="og:type" content="product" />
<meta property="og:url" content="" />
<meta property="og:description" content="&nbsp; &nbsp; &nbsp; &nbsp; Product Details:    Total Qty: One Pc Materials: Alloy Electroplate &amp; Rhinestones Size: Pendant - 2.5 cm x 1.6 cm; Length&nbsp;-&nbsp;40.6 cm (Ext 7.2 cm) Country of Origin: Japan Colour:&nbsp;Golden&nbsp;" />
<meta property="og:site_name" content="DreamPiece Accessories" />
<meta property="fb:admins" content="120867161308451" />
<meta property="og:image" content="http://www.dreampiece.com.au/images/Products/m02040.jpg" /> 
```

它可能是由空白 og:url 引起的吗？我正在使用如下代码，

```
<meta property="og:url" content="<?php echo $canonicalLink; ?>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:19:50.720

是的，这就是导致它的原因-您确定您的代码实际上在那里输出了一个值吗？`og:url`如果 Facebook 的爬虫在元标记中没有显示任何内容，几乎可以肯定不是

# powershell - powershell 获取新窗口的句柄

> ID：14470397
> 
> 赞同：1
> 
> 时间：2013-01-23T00:16:26.637
> 
> 标签：powershell

我们正在尝试使用 Powershell 来自动化我们网站上的一些测试。当我们在打开一个新标签的锚点上发出点击事件时，我们遇到了一个问题。我们需要处理新选项卡，然后通过单击新选项卡上的打印按钮继续处理。使用 Powershell 怎么能做到这一点？

```
set-executionpolicy remotesigned
$ie = new-object -com "InternetExplorer.Application"
$ie.navigate("xxxxx.com")
$ie.visible = $true
$doc = $ie.document
While ($ie.Busy) {Sleep 10}
$doc -eq $null
$tb1 = $doc.getElementByID("username")
$tb2 = $doc.getElementByID("password")
$tb1.value = "xxxxxxxxxxx"
$tb2.value = "xxxxxxxxxxx"
$btn =  $ie.document.getelementsbytagname("input")|where{$_.name -eq "Submit"} 
$btn.click()
$ie.navigate("xxxxx.com/admin/reports.html#")
$link = $ie.Document.getElementsByTagName('A') | where-object {$_.innerText -eq 'All Photos'}
$link.click()

<<<<<<<<<<< it's here where a new tab is open and we need to get a handle on the new page to be able to click the print button >>>>>>>>>>>

$popupHandle = $ie.openwindow.winrefs[$targetName]
$btn =  $popupHandle.document.getelementsbytagname("input")|where{$_.name -eq "print"}
$btn.click() 
```

我们是 Powershell 的新手，因此我们将不胜感激。

谢谢理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:31:42.510

尝试使用**$ie.navigate2**和**0x0800**打开新选项卡，将其放入新的前台选项卡中。这将自动将您集中在新选项卡上，让您可以抓住打印按钮。

例如

```
# Setting page to new foreground tab here
$newTabPage = $ie.navigate2("www.xxxx.com",0x0800) 
```

同样，您可以使用**0x1000**在新的背景选项卡中打开页面，这将打开新选项卡但不会自动将其聚焦。

```
# Setting page to new background tab here
$newTabPage = $ie.navigate2("www.xxxx.com",0x1000) 
```

# java - 使用单个数字移动 4 位

> ID：14470398
> 
> 赞同：0
> 
> 时间：2013-01-23T00:16:35.480
> 
> 标签：java, bit-manipulation, bitmask

我必须编写一个将整数作为参数（0、1、2 或 3）的方法。我必须使用它来创建一个带有 0 的位掩码。因此，如果参数为 0，则位掩码将为`FFF0`1: `FF0F`、 2: `F0FF`、 3: `0FFF`。我试图不对其进行硬编码。

我已经尝试过，但它只能部分工作：

```
int bob = 0xFFFF;
int multi = 2;

multi = multi << param; 
```

这适用于 1 和 2，即使是那些，它也可以`0xFF00`, 和`0xF000`.

我也试图不使用乘法（这会使它更容易，所以我不想使用它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:20:04.963

我会说：

```
0xFFFF - (0xF << (param * 4)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:20:30.267

像这样的东西：

```
bitmask = 0xFFFF;
bitmaskmask = 0xF;
bitmaskmask = bitmaskmask << parameter * 4;
bitmask = bitmask ^ bitmaskmask; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:24:43.163

给定您的输入，您可以使用按位异或运算来实现您正在寻找的内容，如下所示：

```
xorMask = 0x000F << (4*multi) ;
result = bob ^ xorMask ; 
```

这将在 16 位值的适当部分创建一个具有 1 位的 XOR 掩码，然后将其与输入异或到 0 输出中的那些位。

# android - 在 google play store 中查询应用程序的版本？

> ID：14470402
> 
> 赞同：20
> 
> 时间：2013-01-23T00:17:08.467
> 
> 标签：android, google-play

有没有一种方法可以在不需要用户凭据的情况下查询应用程序版本的 Play 商店。我知道这个非官方的 API：

[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

但我不想依赖用户凭据——我也可以通过 chrome 以隐身模式访问 google play 网站——所以它必须以某种方式成为可能。但我没有办法，我不想回退到刮;-)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T22:36:26.547

通过 G+ 找到了合适的 API：这是 API：[https ://androidquery.appspot.com](https://androidquery.appspot.com)

示例调用：[https ://androidquery.appspot.com/api/market?app=org.ligi.fast](https://androidquery.appspot.com/api/market?app=org.ligi.fast)

这个包装器/代码：[https ://github.com/androidquery/androidquery](https://github.com/androidquery/androidquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:20:29.647

Google Play 不提供任何用于检索元数据的官方 API。[但是，您可以在http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)查看非官方 API 。

具体来说，请查看 Wiki 页面[HowToSearchApps](http://code.google.com/p/android-market-api/wiki/HowToSearchApps)。对查询的响应包含版本信息：

**您的查询将类似于：**

```
String query = "maps";
AppsRequest appsRequest = AppsRequest.newBuilder()
                                .setQuery(query)
                                .setStartIndex(0).setEntriesCount(10)
                                .setWithExtendedInfo(true)
                                .build();

session.append(appsRequest, new Callback<AppsResponse>() {
         @Override
         public void onResult(ResponseContext context, AppsResponse response) {
                  // Your code here
                  // response.getApp(0).getCreator() ...
                  // see AppsResponse class definition for more infos
         }
}); 
```

**您的回复将采用以下格式：**

```
{
  "app": [
    {
      "rating": "4.642857142857143",
      "title": "Ruboto IRB",
      "ratingsCount": 14,
      "creator": "Jan Berkel",
      "appType": "APPLICATION",
      "id": "9089465703133677000",
      "packageName": "org.jruby.ruboto.irb",
      "version": "0.1",
      "versionCode": 1,
      "creatorId": "\"Jan Berkel\"",
      "ExtendedInfo": {
        "category": "Tools",
        "permissionId": [
... 
```

**然后当然你可以使用 JSON Parser 或进行字符串搜索。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T06:45:59.747

另请查看： [www.playstoreapi.com](http://www.playstoreapi.com)

它是非官方的，但易于使用（非商业用途免费）。您可以获取有关应用程序的数据、搜索 Play 商店并获取热门图表数据。从他们的文档部分：

节点.js：

```
var request     = require('request');
var apiKey      = 'wij5czxu3mxkzkt9'; // your API key
var packageName = 'com.whatsapp';     // package Name, e.g. com.whatsapp for WhatsApp

var url = 'http://api.playstoreapi.com/v1.1/apps/' + packageName + '?key=' + apiKey;

request({
    url: url,
    json: true
    }, function (error, response, body) {
    if (!error && response.statusCode === 200) {
        console.log(body) // Print the json response
    }
}); 
```

HTML/JS：

```
<html>
<head>
<body>
<p></p>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

  <script>

  var apiKey = 'wij5czxu3mxkzkt9'; // your API key
  var app    = 'com.whatsapp';     // package com.whatsapp for WhatsApp

  var url = 'http://api.playstoreapi.com/v1.1/apps/' + app + '?key=' + apiKey;

  $.getJSON(url).done(function(appDetails) {
    $('p:last').html(JSON.stringify(appDetails));
  });

  </script>
</body>
</head>
<html> 
```

Python：

```
import urllib2
import json

packageName = 'com.whatsapp'      # package com.whatsapp for WhatsApp
apiKey      = 'wij5czxu3mxkzkt9'  # your API key

url = 'http://api.playstoreapi.com/v1.1/apps/{0}?key={1}'

response = urllib2.urlopen(url.format(packageName, apiKey))

data = json.load(response)   
print data 
```

C# .NET：

```
string apiKey = "wij5czxu3mxkzkt9"; // your API key
string app    = "com.whatsapp";     // package com.whatsapp for WhatsApp

string url = "http://api.playstoreapi.com/v1.1/apps/{0}?key={1}";

using (var webClient = new System.Net.WebClient()) {
    string jsonString = webClient.DownloadString(string.Format(url, app, apiKey));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-01T15:11:00.523

请记住，如今许多应用程序都在运行多个版本。对于只有一个版本的应用程序，您可以尝试[42matters Lookup API](https://42matters.com/api/lookup?utm_source=stackoverflow.com&utm_medium=Referral&utm_campaign=36359819)，它应该为您提供正确的版本。

# symfony - Symfony 2 共享主机？

> ID：14470403
> 
> 赞同：2
> 
> 时间：2013-01-23T00:17:09.867
> 
> 标签：symfony, deployment, hosting, shared

我正在 Symfony 2 中开发我的应用程序，我牢记的一件事是 symfony 2 有很多要求。我知道在我的电脑上工作。但我从未尝试将我的应用程序部署在共享主机中。不是我想要框架的所有功能，我只需要应用程序工作，缓存也工作。

1.  我是否需要一个特殊的共享主机，或者它可以在任何拥有（当然）PHP 和我正在使用的数据库引擎的主机中运行？
2.  如果我这样做，我可以使用哪个共享主机？
3.  如果我不这样做，我需要特殊配置吗？

先谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T03:06:34.163

这些是运行 symfony2 的要求

[http://symfony.com/doc/2.0/reference/requirements.html](http://symfony.com/doc/2.0/reference/requirements.html)

看看它并与您的托管服务提供商进行比较，看看它们是否匹配。他们中的大多数人应该匹配，否则给支持团队打个电话，他们会看的。

通常大多数托管公司都有 symfony2 作为插件可用，所以我认为他们可能有所有要求，但请您与他们确认。像上帝一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:13:06.280

对于 CLI 与 Apache 使用单独 php 版本的共享托管服务器，您还需要谨慎。如果是这种情况，即使您可以通过 ssh 运行部分应用程序，您也可能无法通过 http 运行大部分 Symfony2 应用程序。

我认为您最好为 Symfony2 开发投资一个便宜的 VPS，因为它可以提供更大的灵活性并最终为您节省更多时间。现在很多 vps 几乎和共享主机一样便宜。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-03-23T11:38:48.840

好吧，毫无疑问，Symfony 需要很多先决条件。特别是在共享托管方面。我练习了 Cloudways 的自我管理的云托管服务。之所以如此，是因为他们提供了流行的 php 框架作为一键式应用程序安装，此外，我在博客上找到了云服务器上 symfony 的安装过程。只需按照简单的步骤，symfony 3 就安装在我的服务器上。

# ios - UIActivityController + UIDocumentInteraction

> ID：14470407
> 
> 赞同：0
> 
> 时间：2013-01-23T00:17:27.710
> 
> 标签：ios, uiactivity

我在我的应用程序中创建了一个 UIActivictyController，但我想提供在 Dropbox、页面和其他安装的程序中打开的选项。

我知道 UIDocumentInteractionController 提供了这个选项，但是我如何在 UIActivityController 中提供这个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:12:35.143

使用 UIDocumentInteractionController，ios 为您提供了一个类似于 UIActivityController 的界面，但还根据文件扩展名启用了在应用程序中打开选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:07:15.017

[REActivityViewController](https://github.com/romaonthego/REActivityViewController)可能是您正在寻找的。它还允许彩色图标图像:)

# jquery - Jquery droppable不要删除元素

> ID：14470408
> 
> 赞同：1
> 
> 时间：2013-01-23T00:17:39.227
> 
> 标签：jquery, html, jquery-ui

我正在尝试使用Jquery ui来模拟拖放，拖放时如何不从原始列表中删除项目？在这种情况下，我想将项目保留在画廊中，但将其克隆到垃圾箱中。

Jsbin 示例[http://jsbin.com/igevut/1/edit](http://jsbin.com/igevut/1/edit)

```
 $trash.droppable({
      accept: "#gallery > li",
      activeClass: "ui-state-highlight",
      drop: function( event, ui ) {
        deleteImage( ui.draggable );
      }
    });

function deleteImage( $item ) {
      $item.fadeOut(function() {
        var $list = $( "ul", $trash ).length ?
          $( "ul", $trash ) :
          $( "<ul class='gallery ui-helper-reset'/>" ).appendTo( $trash );

        $item.find( "a.ui-icon-trash" ).remove();
        $item.append( recycle_icon ).appendTo( $list ).fadeIn(function() {
          $item
            .animate({ width: "48px" })
            .find( "img" )
              .animate({ height: "36px" });
        });
      });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:20:18.583

只需在函数`$item = $item.clone()`的开头添加即可。`deleteImage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:36:24.443

您可以使用一种方法返回一个助手，该助手将充当可拖动对象的克隆对象。

```
 $( "li", $gallery ).draggable({
      cancel: "a.ui-icon", // clicking an icon won't initiate dragging
      revert: "invalid", // when not dropped, the item will revert back to its initial position
      containment: "document",
      helper: getHelper,
      cursor: "move"
    });

function getHelper(event){

  // return html for the helper
} 
```

有关示例，请参见链接[http://shyalika.com/create_drag_and_drop_example](http://shyalika.com/create_drag_and_drop_example)

# objective-c - NSCollectionView 实现

> ID：14470411
> 
> 赞同：0
> 
> 时间：2013-01-23T00:18:04.160
> 
> 标签：objective-c, cocoa, key-value-observing, key-value-coding, nscollectionview

我查看了[文档](https://developer.apple.com/library/mac/#DOCUMENTATION/Cocoa/Conceptual/CollectionViews/Introduction/Introduction.html)，但仍然没有成功实现 CollectionView。这就是我所拥有的。

我的 KVO/KVC 兼容 NSMutableArray。

```
#import <Foundation/Foundation.h>
#import "ProjectModel.h"

@interface KVOMutableArray : NSMutableArray

@property NSMutableArray* projectModelArray;

- (id)init;
- (void)insertObject:(ProjectModel *)p inProjectModelArrayAtIndex:(NSUInteger)index;
- (void)removeObjectFromProjectModelArrayAtIndex:(NSUInteger)index;
- (void)setProjectModelArray:(NSMutableArray *)a;
- (NSArray*)projectModelArray;

@end 
```

ProjectModel.h 文件：

```
#import <Foundation/Foundation.h>

@interface ProjectModel : NSObject {
    NSString *applicationName;
    NSString *projectPath;
    NSImage  *image;
}

@property(retain, readwrite) NSImage  *image;
@property(retain, readwrite) NSString *applicationName;
@property(retain, readwrite) NSString *projectPath;
@end 
```

项目模型.m：

```
#import "ProjectModel.h"

@implementation ProjectModel

@synthesize image;
@synthesize projectPath;
@synthesize applicationName;

- (id)init {
    self = [super init];
    image = [NSImage imageNamed:@"xcodeproject.png"];
    return self;
}

@end 
```

我还放入`@property KVOMutableArray *projectsManager;`了我的 AppDelegate.h 文件和

```
projectsManager = [[KVOMutableArray alloc] init];
ProjectModel *pm1 = [[ProjectModel alloc] init];
pm1.projectPath = @"path here";
pm1.applicationName = @"Crittercism Example App";
[projectsManager addObject: pm1]; 
```

在我的 awakeFromNib 方法中。我得到以下异常，然后它终止：

```
[<NSCollectionViewItem 0x1001c2eb0> addObserver:<NSAutounbinderObservance 0x1001e2a20> forKeyPath:@"representedObject.applicationName" options:0x0 context:0x103111690] was sent to an object that is not KVC-compliant for the "representedObject" property. 
```

不知道是什么问题。感谢任何帮助我知道我在这里写了很多。

![笔尖文件](../Images/6a3d3fc47eec8045bc1470a589d41377.png)

**编辑** ——问题似乎是它找不到代表对象.图像或任何其他属性。我怎样才能解决这个问题？

![在此处输入图像描述](../Images/23bd008cb2addfdde0dcfbaebdf13a5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:20:30.690

在我实现了这些方法之后它就起作用了（结果文档谎称只需要他们在那里建议的 4 种方法）：

```
#import <Foundation/Foundation.h>
#import "ProjectModel.h"

@interface KVOMutableArray : NSMutableArray {
    NSMutableArray *projectModelArray;
}
@property (readonly, copy) NSMutableArray* projectModelArray;

- (id)init;
- (void)insertObject:(ProjectModel *)p;
- (void)insertObject:(id)p inProjectModelArrayAtIndex:(NSUInteger )index;
- (void)removeObjectFromProjectModelArrayAtIndex:(NSUInteger)index;
- (void)setProjectModelArray:(NSMutableArray *)array;
- (NSUInteger)countOfProjectModelArray;
- (id)objectInProjectModelArrayAtIndex:(NSUInteger)index;
- (void)insertProjectModelArray:(NSArray *)array atIndexes:(NSIndexSet *) indexes;
- (NSArray *)projectModelArrayAtIndexes:(NSIndexSet *)indexes;
- (NSArray*)projectModelArray;
- (void)removeProjectModelArrayAtIndexes:(NSIndexSet *)indexes;
- (NSUInteger)count;
- (void)insertObject:(id)object atIndex:(NSUInteger)index;

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:30:37.370

将阵列控制器的模式`Class`和类名设置为`ProjectModel`

# android - Android - 强制停止谷歌框架

> ID：14470418
> 
> 赞同：-1
> 
> 时间：2013-01-23T00:18:44.773
> 
> 标签：android, frameworks, kill

我的 C2DM 连接有一些问题，要解决它，我需要强制停止“Google 服务框架”。

我想自动化它，所以我有两个问题。

1 - 是否可以将一些 Java 代码或终端命令写入我的应用程序重现：设置 > 应用程序 > 全部 > Google 服务框架 > 强制停止？

（我有苏）

只是杀死进程会做到这一点吗？

2 - 谷歌服务框架的包名是什么？com.google...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:27:08.987

# GSF 包是 com.google.android.gsf

***在亚行上：***

这是诀窍

```
adb shell ps | grep com.google.android.gsf | awk '{print $2}' | xargs adb shell kill 
```

***在 Java 中：***

我要使用 kill 命令四处走动，但是 shell 命令运行代码是完美的。

```
 String killer = "ps | grep com.google.android.gsf | awk '{print $2}' | xargs kill"
 Process p = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(p.getOutputStream());            
        os.writeBytes(killer+"\n");           
        os.writeBytes("exit\n");  
        os.flush(); 
```

杀死 GSF 玩得开心！

# android - PKCS10CertificationRequestBuilder 在 org.bouncycastle.pkcs 中生成无效的 PKCS10CertificationRequest

> ID：14470423
> 
> 赞同：3
> 
> 时间：2013-01-23T00:19:31.080
> 
> 标签：android, x509certificate, bouncycastle, pki, jce

我正在尝试使用 Spongy Castle (v1.47) 创建 PKCS10 认证请求。Spongy Castle 的行为方式与 Bouncy Castle 完全相同，但更适合移植到 Android 上。

David Hook 在第 6 章中描述的用 Java 开始密码学中描述的旧（弃用）方法工作得很好：

```
package chapter6;

import java.io.OutputStreamWriter;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.Security;
import java.util.Vector;
import javax.security.auth.x500.X500Principal;
import org.spongycastle.asn1.DEROctetString;
import org.spongycastle.asn1.DERSet;
import org.spongycastle.asn1.pkcs.Attribute;
import org.spongycastle.asn1.pkcs.PKCSObjectIdentifiers;
import org.spongycastle.asn1.x509.GeneralName;
import org.spongycastle.asn1.x509.GeneralNames;
import org.spongycastle.asn1.x509.X509Extension;
import org.spongycastle.asn1.x509.X509Extensions;
import org.spongycastle.jce.PKCS10CertificationRequest;
import org.spongycastle.openssl.PEMWriter;
import org.spongycastle.jce.provider.BouncyCastleProvider;

/**
 * Generation of a basic PKCS #10 request with an extension.
 */
public class PKCS10ExtensionExample {
  static {
    BouncyCastleProvider prov = new org.spongycastle.jce.provider.BouncyCastleProvider();
    Security.addProvider(prov);
  }

  public static PKCS10CertificationRequest generateRequest( KeyPair pair) throws Exception {
    // create a SubjectAlternativeName extension value
    GeneralNames subjectAltName = new GeneralNames(new GeneralName(GeneralName.rfc822Name, "test@test.test"));

    // create the extensions object and add it as an attribute
    Vector oids = new Vector();
    Vector values = new Vector();
    oids.add(X509Extensions.SubjectAlternativeName);
    values.add(new X509Extension(false, new DEROctetString(subjectAltName)));
    X509Extensions extensions = new X509Extensions(oids, values);
    Attribute attribute = new Attribute(PKCSObjectIdentifiers.pkcs_9_at_extensionRequest, new DERSet(extensions));

    return new PKCS10CertificationRequest(
           "SHA256withRSA",
           new X500Principal("CN=Requested Test Certificate"),
           pair.getPublic(),
           new DERSet(attribute),
           pair.getPrivate());
  }

  public static void main(String[] args) throws Exception {
    // create the keys
    KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "SC");
    kpGen.initialize(1024, Utils.createFixedRandom());
    KeyPair pair = kpGen.generateKeyPair();
    PKCS10CertificationRequest request = generateRequest(pair);
    PEMWriter pemWrt = new PEMWriter(new OutputStreamWriter(System.out));
    pemWrt.writeObject(request);
    pemWrt.close();
  }
} 
```

小型 java 程序打印出以下内容：

```
-----BEGIN CERTIFICATE REQUEST-----
MIIBkDCB+gIBADAlMSMwIQYDVQQDExpSZXF1ZXN0ZWQgVGVzdCBDZXJ0aWZpY2F0
ZTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAm38mHcNo+YDhe1/XHRa1Cifj
EUwH6SQfqKQcY0sO4gGTVL/U5kBx/y0gIptrnGgUYgfwqptWoKHIqd4PGAuzHfwI
QrTfnYtLnN3dBdnOx/1mZuJ/fCD48H45sTVCcXbypxdwns2PZwgh1rt+jb7TJQii
5TteCLvzzb7FVb/Oc6MCAwEAAaAsMCoGCSqGSIb3DQEJDjEdMBswGQYDVR0RBBIw
EIEOdGVzdEB0ZXN0LnRlc3QwDQYJKoZIhvcNAQELBQADgYEAJexpAYF6RvbYGiNS
kyaF1H8TpDOHaAuIvS4G2Kqw9xXJHYEDiNsQxMc4gWdx6ZNDzc1JYqFBaEV+c/zt
pRPLTRxTi841tLBUAzX7eFQ5EtLwJrKLlHCMXxg3DwcrPjRwidcE87Nl/sOyeT4K
btCXzqpLtklJi/giBl/4L+lQunU=
-----END CERTIFICATE REQUEST----- 
```

问题是与此同时（这本书是 2005 年出版的），大多数此类都被标记为 deprecated。创建证书签名请求的新方法是使用工厂模式：

```
package chapter6;

import java.io.OutputStreamWriter;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.Security;
import java.util.Vector;

import org.spongycastle.asn1.DERPrintableString;
import org.spongycastle.asn1.pkcs.PKCSObjectIdentifiers;
import org.spongycastle.asn1.x500.X500Name;
import org.spongycastle.asn1.x509.ExtendedKeyUsage;
import org.spongycastle.asn1.x509.KeyPurposeId;
import org.spongycastle.asn1.x509.KeyUsage;
import org.spongycastle.asn1.x509.SubjectPublicKeyInfo;
import org.spongycastle.asn1.x509.X509Extension;
import org.spongycastle.jce.provider.BouncyCastleProvider;
import org.spongycastle.openssl.PEMWriter;
import org.spongycastle.operator.ContentSigner;
import org.spongycastle.operator.ContentVerifierProvider;
import org.spongycastle.operator.jcajce.JcaContentSignerBuilder;
import org.spongycastle.operator.jcajce.JcaContentVerifierProviderBuilder;
import org.spongycastle.pkcs.PKCS10CertificationRequest;
import org.spongycastle.pkcs.PKCS10CertificationRequestBuilder;

/**
 * Generation of a basic PKCS #10 request with an extension.
 */
public class PKCS10ExtensionExampleNew {
  static {
    BouncyCastleProvider prov = new org.spongycastle.jce.provider.BouncyCastleProvider();
    Security.addProvider(prov);
  }

  public static PKCS10CertificationRequest generateRequest(KeyPair pair) throws Exception {
    SubjectPublicKeyInfo publicKeyInfo = SubjectPublicKeyInfo.getInstance(pair.getPublic().getEncoded());
    X500Name subject = new X500Name("CN=Requested Test Certificate");
    PKCS10CertificationRequestBuilder certificationRequestBuilder = new PKCS10CertificationRequestBuilder(subject, publicKeyInfo);

    certificationRequestBuilder.addAttribute(X509Extension.keyUsage, 
        new KeyUsage(KeyUsage.digitalSignature | KeyUsage.keyEncipherment | KeyUsage.dataEncipherment | KeyUsage.keyAgreement));

    Vector<KeyPurposeId> ekUsages = new Vector<KeyPurposeId>();
    ekUsages.add(KeyPurposeId.id_kp_clientAuth);
    ekUsages.add(KeyPurposeId.id_kp_serverAuth);
    certificationRequestBuilder.addAttribute(X509Extension.extendedKeyUsage, new ExtendedKeyUsage(ekUsages));

    JcaContentSignerBuilder contentSignerBuilder = new JcaContentSignerBuilder("SHA1WithRSAEncryption");
    contentSignerBuilder.setProvider("SC");
    ContentSigner contentSigner = contentSignerBuilder.build(pair.getPrivate());

    DERPrintableString password = new DERPrintableString("secret123");
    certificationRequestBuilder.addAttribute(PKCSObjectIdentifiers.pkcs_9_at_challengePassword, password);

    PKCS10CertificationRequest certificationRequest = certificationRequestBuilder.build(contentSigner);

    JcaContentVerifierProviderBuilder contentVerifierProviderBuilder = new JcaContentVerifierProviderBuilder();
    ContentVerifierProvider contentVerifierProvider = contentVerifierProviderBuilder.build(pair.getPublic());
    System.out.println("isSignatureValid? " + certificationRequest.isSignatureValid(contentVerifierProvider));
    System.out.println(certificationRequest.getSubject());
    return certificationRequest;
  }

  public static void main(String[] args) throws Exception {
    // create the keys
    KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "SC");
    kpGen.initialize(1024, Utils.createFixedRandom());
    KeyPair pair = kpGen.generateKeyPair();
    PKCS10CertificationRequest request = generateRequest(pair);
    PEMWriter pemWrt = new PEMWriter(new OutputStreamWriter(System.out));
    pemWrt.writeObject(request);
    pemWrt.close();
  }
} 
```

证书请求未正确构建，因为它在 PEM 生成上失败：

```
isSignatureValid? true
CN=Requested Test Certificate
Exception in thread "main" org.spongycastle.util.io.pem.PemGenerationException: unknown object passed - can't encode.
  at org.spongycastle.openssl.MiscPEMGenerator.createPemObject(MiscPEMGenerator.java:208)
  at org.spongycastle.openssl.MiscPEMGenerator.generate(MiscPEMGenerator.java:333)
  at org.spongycastle.util.io.pem.PemWriter.writeObject(PemWriter.java:76)
  at org.spongycastle.openssl.PEMWriter.writeObject(PEMWriter.java:45)
  at be.boeboe.spongycastle.chapter6.PKCS10ExtensionExampleNew.main(PKCS10ExtensionExampleNew.java:71) 
```

任何人都知道为什么第二次创建请求的尝试失败了？我以旧方式和新方式创建了 X509V3Certificate 证书，并且在那里没有问题，但是将这些差异放在此处显示的差异旁边，并没有让我更明智。

任何帮助表示赞赏。

宝博

# visual-studio - Visual Studio Sourcesafe 6.0 *.js 文件类型更改默认编辑器

> ID：14470425
> 
> 赞同：0
> 
> 时间：2013-01-23T00:19:48.680
> 
> 标签：visual-studio, editor, visual-sourcesafe

我正在使用 Microsoft Visual Studio Sourcesafe 6.0。
编辑`*.js(JavaScript)`文件类型时，默认的文本编辑器是`notepad.exe`，但我想使用另一个文本编辑器。

如何更改`*.js`文件类型默认文本编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:41:28.347

默认情况下，您可以使用记事本查看 JavaScript 源代码。要更改它，请按照下列步骤操作：

1.  退出 Internet Explorer（如果它正在运行）。

2.  双击我的电脑。

3.  在视图菜单上，单击选项（或文件夹选项）。

4.  单击文件类型选项卡。在注册的文件类型框中，找到 JavaScript，单击它，然后单击编辑。然后选择您的编辑器。

    注意：如果它不起作用，您可能需要在命令末尾键入一个空格和 %1。例如，如果您想使用记事本作为您的默认 HTML 编辑器，请键入以下命令：`c:\windows\notepad.exe "%1"`

5.  确定，单击关闭，然后再次单击关闭。

参考： http: [//support.microsoft.com/kb/163606/en-us](http://support.microsoft.com/kb/163606/en-us)

它真的有效吗？我不知道。但是请尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:41:17.420

这可以通过 Visual SourceSafe Explorer 中的 Tools->Options 菜单轻松完成。[如何：更改默认编辑器](http://msdn.microsoft.com/en-us/library/w8y215wa%28v=vs.80%29.aspx)

# class - 在vba中传递类变量

> ID：14470427
> 
> 赞同：0
> 
> 时间：2013-01-23T00:19:54.467
> 
> 标签：class, variables, excel, global-variables, vba

我知道有一种方法可以像这样在 vb.net 中传递类变量：

模块模块1

```
Sub Main()

    ' Declare an instance of the class and assign a value to its field. 
    ***Dim c1 As Class1 = New Class1()***
    c1.Field = 5
    Console.WriteLine(c1.Field)
    ' Output: 5 

    ' ByVal does not prevent changing the value of a field or property.
    ChangeFieldValue(***c1***)
    Console.WriteLine(***c1.Field***)
    ' Output: 500 

    ' ByVal does prevent changing the value of c1 itself. 
    ChangeClassReference(c1)
    Console.WriteLine(c1.Field)
    ' Output: 500

    Console.ReadKey()
End Sub 

Public Sub ChangeFieldValue(***ByVal cls As Class1***)
    cls.Field = 500
End Sub 

Public Sub ChangeClassReference(***ByVal cls As Class1***)
    cls = New Class1()
    cls.Field = 1000
End Sub 

Public Class Class1
    Public Field As Integer 
End Class 
```

端模块

但是，当我尝试在 vba 中模拟相同的过程时，它不起作用。是否可以在 vba 中进行（用于 Excel）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:46:42.533

试试下面的。

```
Sub Main()

    Dim c1 As New Class1
    c1.Field = 5
    Debug.Print c1.Field

    changeFieldValue c1
    Debug.Print c1.Field

    changeClassReference c1
    Debug.Print c1.Field

End Sub

Public Sub changeClassReference(cls As Class1)

    Set cls = New Class1
    cls.Field = 1000

End Sub

Public Sub changeFieldValue(cls As Class1)

    cls.Field = 500

End Sub 
```

您需要使用以下代码添加一个新的类模块：

```
Public Field As Long 
```

# php - 大量页面通过 .htaccess 和数据库查询重定向

> ID：14470433
> 
> 赞同：0
> 
> 时间：2013-01-23T00:20:20.837
> 
> 标签：php, apache, .htaccess, redirect

如何将输入输入到域（请求的 URL）并将其放入我自己的 php 文件（它将执行 db 查询，然后将用户重定向到正确的位置？

我们基本上有 1500 多个页面要重定向。并且 URL 结构并不完全相同，无法进行简单的 .htaccess 重定向。

如果我们可以让它在 .php 文件中读取它，我想我可以轻松地在其中制作一个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:43:58.997

您必须捕获 URL 路径，重定向到您的 PHP 脚本并将路径添加为查询字符串

```
RewriteEngine On
RewriteRule .* /script.php?$0 [QSA] 
```

这会将所有请求重定向到`script.php`URL 路径作为第一个`$_GET`参数。原始查询字符串（如果有`[QSA]`）将作为第二个和后续`$_GET`参数附加 ()。

# php - PHP舍入功能不适用于舍入

> ID：14470437
> 
> 赞同：0
> 
> 时间：2013-01-23T00:20:45.367
> 
> 标签：php

对于下面的代码，有时**$endorsepoints**的值不是整数。我希望它根据正常的数学规则四舍五入，向上或向下。

然后，我想将四舍五入的数字输入到两个 MySQL 表中，**评论**和**提交**。

我希望按照正常的数学规则将数字向上或向下舍入。

当数字应该被四舍五入时（即 5203.25），正确的四舍五入的数字（即 5203.00）被添加到**comment****和**submit中。

 **当数字应该四舍五入时（即 5151.74），正确的四舍五入数字（即 5152.00）被添加到 submit**中**。但是，在这种情况下，将向下舍入的数字（即 5151.00）添加到**comment**。在这种情况下，如何使四舍五入的数字**发表评论**？

```
 $endorsepoints = $endorsepoints * .01;

    $endorsepoints2 = ( $endorsepoints <= 10 ) ? 10 : $endorsepoints;

    $endorsepoints2 = round($endorsepoints2);

    $query1 = sprintf("INSERT INTO comment VALUES (NULL, %d, %d, '%s', %d, NULL)", $uid, $submissionid, $comment, $endorsepoints2);

    mysql_query($query1) or die(mysql_error());

    $query2 = sprintf("UPDATE submission SET points = (points + '$endorsepoints2') WHERE submissionid = '$submissionid'");

    mysql_query($query2) or die(mysql_error()); 
```

编辑：我希望始终将相同的数字插入两个表中。我的问题是：为什么不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:32:37.617

```
$endorsepoints3 = $endorsepoints2;
$endorsepoints2 = round($endorsepoints2);

if($endorsepoints3 > $endorsepoints2) {
    //rounded down
} else {
    //rounded uo
} 
```

无论如何，我不确定你是否在问这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:33:03.440

首先，round() 函数将始终正确舍入，即 2.4 变为 2，2.6 变为 3，您是否正在寻找 floor() 和 ceil() 以及 number_format() 以四舍五入到最低或最高，得到小数“并且知道关于它”？

此后它就像使用 if/else 根据结果匹配运行查询一样简单 <==>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T00:57:34.980

使用`ceil()`而不是`round()`

它只四舍五入**

# ruby-on-rails - 使用 Rails 服务器进行 AngularJS 模板翻译的方法

> ID：14470441
> 
> 赞同：8
> 
> 时间：2013-01-23T00:21:06.540
> 
> 标签：ruby-on-rails, internationalization, angularjs, translation

我需要使用 AngularJS 前端和 Ruby on Rails 服务器来实现具有多语言支持的应用程序。我正在寻找一种合理的方法来以多种语言呈现翻译后的模板。我想出了一个我希望得到反馈的方法。

在 Angular 路由定义中，将模板属性设置为仅具有 ng-include 的 html 部分，其中 src 属性值由控制器设置。需要这种方法来动态修改要从服务器获取的模板的路径；它在这里描述： [AngularJS - How to use $routeParams in generate the templateUrl?](https://stackoverflow.com/questions/11534710/angularjs-how-to-use-routeparams-in-generating-the-templateurl)

所以 Angular 路由配置看起来像：

```
angular.module('myApp', []).
    config(function ($routeProvider) {
        $routeProvider.when('/sites/new', {
            template: '<div ng-include src="templateUrl"></div>',
            controller: 'RouteController'
        });
    }); 
```

控制器看起来像：

```
// Set a prefix on the URL path, something like “es”
function RouteController($scope, $routeParams) {
    $scope.templateUrl = $routeParams.locale + "/template/sites/site";
} 
```

这里`$routeParams.locale`用于设置语言环境，但可以是用户操作设置的变量。动态修改模板 URL 路径以添加语言环境前缀的方法似乎有点复杂，但我不知道其他方法。

在 Rails 端，在 routes.rb 中，添加一个路由：

```
match '/:locale/template/*template' => 'template#get' 
```

该路由使用路由通配符，因此该`params[:template]`值可以是多级路径。该`TemplateController#get`操作仅呈现由`params[:template]` 模板控制器代码确定的部分，如下所示：

```
class TemplateController < ApplicationController
    layout false
    caches_page :get

    def get
        render(template: "template/#{params[:template]}")
    end
end 
```

Rails I18n 对翻译的支持用于 erb 模板中，根据 locale 参数进行翻译。在生产中，缓存将被打开。这将避免产生翻译开销。URL 路径的语言环境前缀将导致每个语言的翻译模板集被缓存。

这种方法尽可能地将翻译处理推送到服务器端。

这种方法有什么基本问题吗？

能不能做得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T10:17:36.290

您可能对[angular-translate](http://pascalprecht.github.io/angular-translate/)模块感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:24:25.673

我们使用 i18next JQuery 插件[http://i18next.com/](http://i18next.com/)在 AngularJS 中实现了客户端国际化，并创建了一个名为 i18n 的过滤器。

当您初始化 Angular 应用程序时，您会初始化 i18n 插件，您可以在其中提供一个模式来定位包含标签的文件，并在模板中将此用作绑定标签和值的示例。

`{{'mynamespace:labels.firstname' | i18n}}`

其中“mynamespace”用于在逻辑上分隔您的标签，并用于定位带有标签的 JSON 文件。在 json 文件中，您可以拥有一个或多个带有标签作为属性的 JSON 对象。在上面的示例中，如果您提供了模式，则名为 mynamespace-i18n-en-US.js 的文件`__ns-i18n-__lng__.js`

翻译必须在服务器上进行是否有原因？

您真的需要翻译整个模板吗？

# php - 无法上传图片

> ID：14470444
> 
> 赞同：-1
> 
> 时间：2013-01-23T00:21:39.487
> 
> 标签：php

我试图使用下面的代码上传图片，但它显示：

`Parse error: syntax error, unexpected ';' in C:\xampp\htdocs\upload3.php on line 57`

这是我在第 57 行的内容：

```
if ($file_size &amp;lt;= 0)
        HandleError('File size outside allowed lower bound'); // Validate its a MIME Images (Take note that not all MIME is the same across different browser, especially when its zip file) 
```

当我从下面的代码中删除上面的行时，我进入`No Session was found.`屏幕，没有其他内容出现。有人有什么主意吗？

```
<?php
#check for session
if (isset($_POST['PHPSESSID']))
    session_id($_POST['PHPSESSID']);
else if (isset($_GET['PHPSESSID']))
    session_id($_GET['PHPSESSID']);
else
{
    HandleError('No Session was found.');
}

session_start();
// Check post_max_size (http://us3.php.net/manual/en/features.file-upload.php#73762)
$POST_MAX_SIZE = ini_get('post_max_size');
$unit = strtoupper(substr($POST_MAX_SIZE, -1));
$multiplier = ($unit == 'M' ? 1048576 : ($unit == 'K' ? 1024 : ($unit == 'G' ? 1073741824 : 1)));

if ((int)$_SERVER['CONTENT_LENGTH'] > $multiplier*(int)$POST_MAX_SIZE && $POST_MAX_SIZE)
    HandleError('POST exceeded maximum allowed size.');

// Settings
$save_path = getcwd() . '/pictures/';  // The path were we will save the file (getcwd() may not be reliable and should be tested in your environment)
$upload_name = 'file';  // change this accordingly
$max_file_size_in_bytes = 2097152;  // 2MB in bytes
$whitelist = array('jpg', 'png', 'gif', 'jpeg'); // Allowed file extensions
$backlist = array('php', 'php3', 'php4', 'phtml','exe'); // Restrict file extensions
$valid_chars_regex = 'A-Za-z0-9_-\s '; // Characters allowed in the file name (in a Regular Expression format)

// Other variables     
$MAX_FILENAME_LENGTH = 260;
$file_name = '';
$file_extension = '';
$uploadErrors = array(
    0=>'There is no error, the file uploaded with success',
    1=>'The uploaded file exceeds the upload_max_filesize directive in php.ini',
    2=>'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form',
    3=>'The uploaded file was only partially uploaded',
    4=>'No file was uploaded',
    6=>'Missing a temporary folder'
);

// Validate the upload
if (!isset($_FILES[$upload_name]))
    HandleError('No upload found in \$_FILES for ' . $upload_name);
else if (isset($_FILES[$upload_name]['error']) && $_FILES[$upload_name]['error'] != 0)
    HandleError($uploadErrors[$_FILES[$upload_name]['error']]);
else if (!isset($_FILES[$upload_name]['tmp_name']) || !@is_uploaded_file($_FILES[$upload_name]['tmp_name']))
    HandleError('Upload failed is_uploaded_file test.');
else if (!isset($_FILES[$upload_name]['name']))
    HandleError('File has no name.');

// Validate the file size (Warning: the largest files supported by this code is 2MB)
$file_size = @filesize($_FILES[$upload_name]['tmp_name']);
if (!$file_size || $file_size > $max_file_size_in_bytes)
    HandleError('File exceeds the maximum allowed size');

if ($file_size &amp;lt;= 0)
    HandleError('File size outside allowed lower bound'); // Validate its a MIME Images (Take note that not all MIME is the same across different browser, especially when its zip file)
if(!eregi('image/', $_FILES[$upload_name]['type']))
    HandleError('Please upload a valid file!'); // Validate that it is an image

$imageinfo = getimagesize($_FILES[$upload_name]['tmp_name']);
if($imageinfo['mime'] != 'image/gif' && $imageinfo['mime'] != 'image/jpeg' && $imageinfo['mime'] != 'image/png' && isset($imageinfo))
    HandleError('Sorry, we only accept GIF and JPEG images');

// Validate file name (for our purposes we'll just remove invalid characters)
$file_name = preg_replace('/[^'.$valid_chars_regex.']|\.+$/i', '', strtolower(basename($_FILES[$upload_name]['name'])));
if (strlen($file_name) == 0 || strlen($file_name) > $MAX_FILENAME_LENGTH)
    HandleError('Invalid file name');

// Validate that we won't over-write an existing file
if (file_exists($save_path . $file_name))
    HandleError('File with this name already exists');

// Validate file extension
if(!in_array(end(explode('.', $file_name)), $whitelist))
    HandleError('Invalid file extension');
if(in_array(end(explode('.', $file_name)), $backlist))
    HandleError('Invalid file extension');

// Rename the file to be saved 
$file_name = md5($file_name. time());

// Verify! Upload the file
if (!@move_uploaded_file($_FILES[$upload_name]['tmp_name'], $save_path.$file_name)) 
    HandleError('File could not be saved.');

exit(0);

/* Handles the error output. */
function HandleError($message) {
    echo $message;
    exit(0);
}

?>
<form action="" method="post" enctype="multipart/form-data">
        <label for="file">Filename:</label>
        <input type="file" name="file" id="file"><br>
        <input type="submit" name="submit" value="Submit">
    </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:24:01.767

应该`<=`不是`&amp;lt;=`

# database - 索引和磁盘寻道如何配合得很好？

> ID：14470446
> 
> 赞同：0
> 
> 时间：2013-01-23T00:21:51.340
> 
> 标签：database

我还有[一个问题](https://stackoverflow.com/questions/14469806/how-do-indexes-work-in-a-database-mysql-or-sql-server)，但我会更具体。

我看到，选择一百万行桌子时，<1秒。我不明白的是它如何使用索引来做到这一点。搜索似乎需要 10 毫秒，因此要成功 1 秒，它必须执行 <100 次搜索。如果每行有一个索引条目，那么 1M 行至少有 1K 块来存储索引（如果每行 8 字节（32 位索引值 + 32 键偏移量），实际上它更高）。然后我们需要实际前往行并收集数据。数据库如何保持低搜索并尽可能快地提取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:29:18.840

一种方法是所谓的“聚集索引”，其中表的行根据聚集索引的排序进行物理排序。然后，当您想沿索引字段读取一系列值时，您会找到第一个，并且您可以一次读取所有值而无需额外的 IO。

还：

1）读取索引时，会一次性读入一大块索引。如果下降 B 树（或沿着底部的孩子移动，一旦你找到你的范围）将你移动到另一个已经读入内存的节点，你已经保存了一个 IO。

2) 如果 SQL 服务器在统计上期望检索的记录数量如此之多，以至于从索引到底层行的随机访问要求将需要如此多的 IO 操作，以至于执行表扫描会更快，那么它会改为进行表扫描。您可以使用 SQL Server 或 PostgreSQL 中的查询计划器来查看这一点。但对于小范围，索引通常更好，查询计划将反映这一点。

# postgresql - PostgreSQL - 添加组角色后密码验证失败

> ID：14470448
> 
> 赞同：4
> 
> 时间：2013-01-23T00:21:59.333
> 
> 标签：postgresql

我对 PostreSQL 很陌生。我整个上午都在试图让用户登录正常工作，现在我非常沮丧！

所以，我有一个 PostGIS 数据库，版本 9.2，作为 OpenGeo 软件套件的一部分。我可以使用 postgres 用户访问数据库，但希望创建一个可以访问数据库的组角色和用户，以便它可以在该数据库中创建表和更新/选择/删除等。

我可以创建一个有效的用户，并且可以使用该用户登录。我可以创建一个组角色并为该角色分配权限。然后我可以将用户添加到组角色，然后就不能再登录了！

甚至当我将用户 postgres 添加到组时，该用户无法登录。我删除了该组，但仍然无法登录。

现在，我经常使用 pg_hba.conf。而且我现在可以以 postgres 身份登录，但前提是启用了“信任”，并且我无法使用任何软件（例如 PGAdminIII）登录。

最好能获得一些关于出了什么问题的建议，并再次启用经过身份验证的登录。

pg_hba：

```
Code:
# Database administrative login by Unix domain socket
local   all             postgres                                trust
local all gisadmin trust

# TYPE  DATABASE        USER            ADDRESS                 METHOD
local   all         opengeo                           md5
local   all         opengeo                           md5

# "local" is for Unix domain socket connections only
local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host all gisadmin localhost trust

# IPv6 local connections:
host    all             all             ::1/128                 md5
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            md5
#host    replication     postgres        ::1/128                 md5 
```

最后一点，我希望能够通过 SSH 隧道登录。我最初可以使用“postgres”用户来执行此操作，但现在我从组中添加和删除了该用户，我不能。

编辑：错误消息...

如果我使用正确的密码在 PGAdmin 中通过 SSH 隧道登录，我会收到错误“致命：用户密码验证失败...”

如果我尝试在没有密码的情况下通过 PGAdmin 中的 SSH 隧道登录，同时设置了信任选项，我会收到错误消息：“连接到服务器时出错：fe_sendauth：未提供密码”。

第一个错误在本地登录时仍然发生，仅通过 SSH 和 psql，但第二个错误消失了，我可以登录。

\du+ 的输出： ![在此处输入图像描述](../Images/262864c54a1a2a6a363a17d815428fb5.png)

\dg+ 的输出 ![在此处输入图像描述](../Images/7f44464c7191c58eaf6a786ef3344051.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T00:28:21.943

我认为这种行为可能与 pgAdminIII 有关，因为我遇到了类似的问题，而且似乎每次我使用 pgAIII 作为 postgres 连接到我的数据库并查看用户属性中的定义选项卡时，“到期日期”的复选框已选中，并将 1/1/1970 或 31/12/1969 设置为到期日期。Daniel 提出的解决方案有效，因此很明显问题出在密码过期上。

如您在更改日志中所见，似乎此错误已在 pgAdmin 1.16.2 中得到纠正：

[http://www.pgadmin.org/development/changelog.php](http://www.pgadmin.org/development/changelog.php)

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T18:53:04.100

在`\du+`输出中，*Password valid until 1970-01-01 00:00:00+00...*看起来很可疑。严格来说， 和 的密码`gisadmin`不再`postgisrw`有效`postgres`，这可以解释为什么这些帐户基于密码的身份验证方法会失败。

您可以尝试`ALTER USER username valid until 'infinity'`使用这些帐户，看看是否能解决问题。

此外，当通过 SSH 隧道连接到 PG 时，请注意以`pg_hba.conf`开头的条目`host`将被忽略。这些条目只考虑与 Unix 域套接字的连接。有时用户会将其与从`localhost`自身到自身的连接相混淆。

# .net - 在 WPF 中缓存大量实体

> ID：14470457
> 
> 赞同：4
> 
> 时间：2013-01-23T00:23:16.603
> 
> 标签：.net, wpf, entity-framework, caching

我正在用 WPF 编写一个应用程序。我正在使用 Entity Framework 5，想知道您是否可以就如何处理以下情况给我建议。

我基本上只有三个表：

项目 {ID，名称}

属性 {ID、名称、类型}

AttributeValue {ItemID, AttributeID, 值}

我们的客户想要为他的物品添加属性，这似乎工作得很好。现在他可以添加属性并为他的项目分配值。第一个问题：你认为这是好的设计吗？

现在的问题是如何在 WPF DataGrid 中显示项目并将所有属性显示为列。这就是我们现在所拥有的：

我们以编程方式生成列：

```
foreach (var attribute in db.Attributes)
{
    datagrid.Columns.Add(new DataGridTextColumn
    {
        Header = attribute.Name,
        Binding = new Binding { Path = new PropertyPath(string.Format("[{0}]", attribute.ID)) }
    });
} 
```

这工作正常。现在的问题是如何在 Items-Class 中实现索引器。我们有一个选项在处理大量数据时会变得非常慢（20.000 个项目，400 个属性，每个项目都有 100 个值）：

```
public AttributeValue this[int i]
{
    get
    {
        return AttributeValues.FirstOrDefault(aa => aa.AttributID == i);
    }
} 
```

就像我说的，这行得通，但它会变慢。而不是总是查询属性值，我想在显示之前缓存所有内容：

```
var items = db.Items.AsNoTracking().ToArray();
CachedValues.Values = new Dictionary<int, Dictionary<int, AttributeValue>>(items.Length);
foreach (var item in items)
{
    var attributevalues = db.AttributeValue.AsNoTracking().Where(w => w.ArtikelID == item.ID).ToArray();
    CachedValues.Values[item.ID] = new Dictionary<int, AttributeValue>(attributevalues.Length);
    foreach (var value in attributevalues)
    {
        CachedValues.Values[item.ID][value.AttributeID] = value;
    }
} 
```

我使用静态类作为缓存：

```
public static class CachedValues
{
    public static Dictionary<int, Dictionary<int, ArtikelAttribut>> Values;
} 
```

然后在 Items-Class 中，我可以访问缓存：

```
public AttributeValue this[int i]
{
    get
    {
        AttributeValue val = null;
        CachedValues.Values[ID].TryGetValue(i, out val);
        return val;
    }
} 
```

显然，初始化缓存需要一些时间（15 秒），但速度要快得多。按数据网格中的属性对项目进行排序只需一秒钟。使用另一种方法需要很长时间。

我对解决方案不满意，您有什么建议吗？我会欣赏任何形式的批评（我知道两者都不是好的解决方案）。

谢谢，

托马斯

**编辑**

为了让第一个问题更清楚，一个小例子：

项目：Item1，Item2，Item3，... 属性：宽度，高度，速度，... AttributeValues：（Item1，宽度，100），（Item1，Height，200），（Item2，Width，100），（Item3 , 身高, 200), (Item3,Speed,40)

所以这是一个经典的多对多关系。一个属性可能出现在 0-many Items 中，并且 Item 可能有 0-many 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:15:41.333

您的数据模型是一个非常通用的解决方案，并且有支持和反对它的论据，但如果没有更多背景很难判断，所以我将跳过这部分问题。

我可能会像您一样实现类似的缓存，但稍作修改。

*   我不会使用全局静态缓存，而是每个实体一个字典，只缓存该实体的属性值。这样，如果实体超出范围，您不必关心从全局缓存中删除条目，因为缓存会与实体一起进行垃圾收集。

*   我不会预先填充字典，而是首先尝试从缓存中获取值，如果它不存在，则搜索属性值列表并按需更新缓存。如果应用程序表现良好并且不会一次访问所有值 - 例如，因为在任何时候只有一些数据在网格中可见，而其他行不可见 - 这可以在延长的时间段内无缝分布缓存填充过程并使其不被用户注意到。

最后的想法 - 20,000 个项目，每个项目有 400 个属性？哪个用户应该能够使用一次显示多达 8,000,000 个值的应用程序？也许您还应该考虑重新设计用户界面和交互逻辑——没有人需要并且可以同时处理这么多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:47:12.533

回答您的第一个问题：为什么不合并 Attribute 和 AttributeValue？一个 AttributeValue 可以有更多的属性吗？我猜它是可以有多个属性的项目。

项目 {ID，名称}

属性 {ID、ItemID、名称、类型、值}

* * *

我试图给你写一个回答你的问题，但是当我深入研究你的问题时，我开始不确定你在做什么。您是否尝试在数据库中创建动态表？*

这是我的其余答案：

* * *

你需要弄清楚你的性能瓶颈在哪里。它是检索数据还是显示数据。

15 秒对于显示的数据来说听起来很长。恕我直言，它不应该超过 1 到 2 秒。

**这里有几个提示：**

DataGrid 是一个重量级的控件，可以做很多事情。我建议您将 ListView 与 GridView 一起使用，并根据您必须具备的任何要求自定义您。

ListView 默认是虚拟化的。在 4.0 中，如果您应用分组虚拟化将被禁用。在 4.5 中可以应用带有分组的虚拟化。

使用 SQL Profiler 优化数据库查询。查看执行了哪些查询。如果执行大量查询，这可能会导致性能下降。在 EF 中进行预加载（使用 .Include）可以帮助加快速度。记住正确的索引。

评论 Ladislav Mmka 的评论并不是全部真相。WPF 控件不支持数据虚拟化（仅在显示时获取数据）。它们仅支持所有数据都存在的普通虚拟化，但仅呈现项目的可见部分。两者差别很大。有一些解决方案试图在 WPF 中进行数据虚拟化。

# java - 我如何知道点击了哪个列表项？

> ID：14470460
> 
> 赞同：-1
> 
> 时间：2013-01-23T00:23:35.313
> 
> 标签：java, android

我有一个`ListView`装满物品。我想设置一个`onClickListener`以显示有关单击的项目的详细信息。如何确定在 中单击了哪个项目`onClickListener`？,`View`或`v`有很多可用的方法，我已经查看过并且没有看到任何与单击对象有关的内容。

```
 //populate the activity list
    ListView teamsListView = (ListView) activity.findViewById(R.id.teamsListView);
    ArrayList<HashMap<String, String>> listData = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> listItem;
    for (TeamSet teamSet : response.getTeamSetList()) {
        listItem = new HashMap<String, String>();
            listItem.put("name", teamSet.getName());
            //listItem.put("teamCount", Integer.toString(teamSet.getTeams().size()));

        listData.add(listItem);
    }
    teamsListView.setAdapter(
            new SimpleAdapter(
                    context,
                    listData,
                    R.layout.teams_list_row,
                    new String[]{"name"},
                    new int[]{R.id.teamsTeamListName}
            )
    );

    //show details on a team
    TextView team = (TextView) activity.findViewById(R.id.teamsTeamListName);
    team.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //how do I know which item was clicked?  I want to load more details on the item...
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:27:25.000

您使用 OnItemClickListener 而不是 onCLickListener

**你做这样的事情：**

```
final ListView lv = (ListView) findViewById(R.id.ListView01);

lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
        String selectedFromList =(String) (lv.getItemAtPosition(myItemInt));

      }                 
}); 
```

希望这有帮助。

# iphone - 在 cocos2d 中（安全地）访问当前场景的最佳方法是什么？

> ID：14470470
> 
> 赞同：0
> 
> 时间：2013-01-23T00:24:36.230
> 
> 标签：iphone, objective-c, cocos2d-iphone

我在读Learn Cocos2d 2；并偶然发现了这个问题：在游戏场景中，场景层次结构下可能有数千个实体，所有这些实体可能都想与最顶层的场景对象对话。Learn Cocos2d 2 的作者建议使用这样的全局变量

```
static GameLayer* sharedGameLayer;
+(GameLayer*) sharedGameLayer
{
    NSAssert(sharedGameLayer != nil, @"GameScene instance not yet initialized!");
    return sharedGameLayer;
}

+(id) scene
{
    CCScene *scene = [CCScene node];
    GameLayer *layer = [GameLayer node];
    [scene addChild: layer];
    InputLayer* inputLayer = [InputLayer node];
    [scene addChild:inputLayer z:1 tag:GameSceneLayerTagInput];
    return scene;
} 
```

我个人认为这种方法不可靠：想象一个玩家实体想知道来自场景中另一层的触摸输入，所以它调用 sharedGameLayer 并假设它是它实际驻留在其中的父级，然后从那里开始工作。但怎么能这么确定呢？如果这个 sharedGameLayer 是其他人分配的另一个实例怎么办？当然在 cocos2d 中一次只能有一个场景，所以这种方法可能在大部分时间都可以正常工作，没有任何问题。但从设计的角度来看，我仍然觉得缺乏这种方法。

我想过两种选择：

1.  使用正确的（旧）委托方法。在每个级别分配正确的委托/委托人关系。然而，这意味着数千行可能重复的代码，从我的角度来看并不整洁

2.  使用 NSNotification（或 KVO？）从子级广播消息，并让父级做出相应的响应。但这是否意味着系统不必要的开销

在这一点上我很迷茫，有人可以告诉我有经验的程序员可能会使用的一般习语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:12:36.327

You may want to read my "[Strategies for accessing other nodes in the hierarchy](http://www.learn-cocos2d.com/2012/09/strategies-accessing-cocos2d-nodes-scene-hierarchy/)" guide. Plenty of options to choose from with pros and cons.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:13:34.830

在大多数情况下，您的 s 树的叶子`CCNode`，例如您提到的“玩家实体”，只要包含`CCScene`在`CCDirector`s 的场景堆栈中，就会持续存在。一旦这个场景被弹出，它将收到一条`dealloc`消息，因此`removeAll`(its) `Children`。这反过来将`dealloc`这些孩子，包括你的“玩家实体”。您的“玩家实体”将收到的最后一条消息是，`dealloc`在此期间所有父节点仍处于活动状态（尽管正在被破坏），因此永远不会出现子节点请求无效的情况`sharedGameLayer`. 但是，如果您想将任何孩子带到另一个场景中，则必须在很多方面都非常小心，如果不是绝对必要的话，这几乎没有什么值得鼓励的。例如，必须改进您的特定代码块，以便在场景不再处于活动状态`sharedGameLayer`时返回，并且您的“玩家实体”可能想要检查此返回值。`nil`

简短的回答是，只要您不在场景堆栈中移动节点，上面显示的代码就是安全的。单个节点有许多替代方法可以了解游戏的“图形”，包括each的`parent`属性`CCNode`和.`runningScene``CCDirector`

# ruby-on-rails - 我是否总是需要添加“if something”以避免出现“nil”错误？

> ID：14470472
> 
> 赞同：0
> 
> 时间：2013-01-23T00:24:49.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我总是需要添加`if @user`这个吗？

在模式 1 中，它没有，`if @user`所以当用户被删除时它返回“nil”错误。

在模式 2 中，它不会返回 'nil' 错误，但是在这些东西的每一行都添加它太烦人了：（

没有任何聪明的方法来解决这种“零”错误吗？我只想在删除用户时显示“[未找到用户]”。

**查看/posts/show.html.erb**

```
#Pattern 1
<%= display_nickname(@user.nickname) %>

#Pattern 2
<%= display_nickname(@user.nickname) if @user %> 
```

**application_helper.rb**

```
def display_nickname(nickname)
    if !nickname.nil?
        return nickname
    end
    "[Not Found User]"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:31:06.703

在许多（但不是全部）情况下，您可以使用 ActiveSupport 的“尝试”方法。

```
foo = Foo.find(1)
foo.bar.try(:some_method) 
```

在示例中，如果 bar 为 nil，则 some_method 也将返回 nil。

所以你可以这样做：

```
@user.try(:nickname) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:29:01.657

你可以这样写你的助手：

```
def display_nickname(user)
    user.try(:nickname) || "[Not Found User]"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T02:25:16.490

关于什么

```
def display_nickname(user)
  "#{user.try(:nickname)}"
end 
```

或者

```
def display_nickname(user)
  user ? user.nickname : ''
end 
```

如果用户为零，两者都会打印''，我会选择第二个

# javascript - jquery 问题：如何中断和重置 setinterval？

> ID：14470473
> 
> 赞同：0
> 
> 时间：2013-01-23T00:24:59.403
> 
> 标签：javascript, jquery, jquery-ui

我使用 jquery 创建了一个图像循环，它工作正常。这是我的代码。

```
$(document).ready(function(){
    $('.images').hide();    
    $('#image1').show('slide', {direction: 'right'}, 500);
    $('#image1').delay(2000).hide('slide', {direction: 'left'}, 500);
    var sc = $('#image img').size();
    var count = 2;
    setInterval(function(){
        $('#image'+count).show('slide', {direction: 'right'}, 500);
        $('#image'+count).delay(2000).hide('slide', {direction: 'left'}, 500);
        if(count == sc){
            count = 1;
        }else{
            count = count + 1;
        }
    }, 3000);

    $('.name').click(function(){
        var name = $(this).attr('id');
        name = name.replace('name', '');
        count = name;
    });
}); 
```

这是html代码。

```
 <div id="image">
                        <img class="images" id="image1" alt="Image loop" src="image1.jpg" width="550px" height="400px"/>
                        <img class="images" id="image2" alt="Image loop" src="image2.jpg" width="550px" height="400px"/>
                        <img class="images" id="image3" alt="Image loop" src="image3.jpg" width="550px" height="400px"/>
                        <img class="images" id="image4" alt="Image loop" src="image4.jpg" width="550px" height="400px"/>
                        <img class="images" id="image5" alt="Image loop" src="image5.jpg" width="550px" height="400px"/>
                    </div>
                    <div id="name">
                        <div class="name" id="name1">
                            <img src="image1.jpg" width="80px" height="80px"/>
                        </div>
                        <div class="name" id="name2">
                            <img src="image2.jpg" width="80px" height="80px"/>
                        </div>
                        <div class="name" id="name3">
                            <img src="image3.jpg" width="80px" height="80px"/>
                        </div>
                        <div class="name" id="name4">
                            <img src="image4.jpg" width="80px" height="80px"/>
                        </div>
                        <div class="name" id="name5">
                            <img src="image5.jpg" width="80px" height="80px"/>
                        </div> 
```

css 控制右侧的名称集。我的想法是，点击右边的小图，立即切换用户选择的图片。 ![在此处输入图像描述](../Images/f951569993c3f9f807e18585f339717e.png) 它似乎有点工作。setInterval 仍在运行，循环被破坏。我该如何正确处理这个问题？[这是jsfiddle链接。](http://jsfiddle.net/C2p3H/)谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:26:25.467

您可以停止`setInterval`运行`clearInterval`。具体来说，您需要在 的返回值上调用它`setInterval`。

```
var interval = setInterval(...
clearInterval(interval); 
```

编辑：这并不直接适用于您的问题。您可以做的只是创建一个单独的函数来回调`setInterval`. 然后，还调用该函数作为对 click 事件的回调的一部分。是否要清除间隔（停止动画）取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:33:33.483

这是一个简单的工作示例

```
var interval;
var times;

function doSomething() {
    if (times == 100) {
        // Unset the interval:
        clearInterval(interval);
    } else {
        alert("Hey");
        times++;
    }
}

// Initialize interval:
interval = setInterval(doSomething, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T01:34:40.930

出现问题是因为您在单击处理程序中将*count的类型从数字更改为字符串 - 当您将**name*分配给*count*时。我已经编辑了您的代码以包含 parseInt。

```
 $('.name').click(function(){
    var name = $(this).attr('id');
    name = name.replace('name', '');
    count = parseInt(name, 10);  
}); 
```

# shopify - 我可以在我的商店安装我自己的证书吗？

> ID：14470478
> 
> 赞同：3
> 
> 时间：2013-01-23T00:25:53.703
> 
> 标签：shopify

根据我找到的文档，我认为答案是否定的，但我想我会在这里问一下。我们正在将我们的商店转移到一个自定义域，并希望整个网站（不仅仅是结帐体验）都是 SSL。有没有办法安装我们自己的证书来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:50:44.233

尚无法在 Shopify 中使用您自己的 SSL 证书。[但是，当使用https://YOUR-STORE.myshopify.com](https://YOUR-STORE.myshopify.com)的 URL 集时，您的整个站点都支持 SSL/https 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:38:40.677

除了证书的成本以及在 https 下运行整个站点的 cpu 和网络成本之外，我不明白为什么你不能。这是有关此主题的帖子，其中包含更多信息：[在整个站点上使用 SSL](https://stackoverflow.com/questions/4515283/using-ssl-across-entire-site)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:47:26.560

Shopify 是一个托管平台。为您的商店购买 SSL 证书是浪费金钱。你不能使用它。您的域名对此的影响为零。

# big-o - Big Oh 符号 - 推送和弹出

> ID：14470485
> 
> 赞同：0
> 
> 时间：2013-01-23T00:26:30.767
> 
> 标签：big-o

我想我至少开始理解大哦符号背后的理论，即它是一种衡量函数速度增长速度的方法。换句话说，大 O 量化了算法的效率。但它的实现是另一回事。

例如，在最好的情况下，push 和 pull 操作将是 O(1)，因为从堆栈中删除或添加到堆栈所需的步骤数将是固定的。不管值是多少，过程都是一样的。

我试图设想一系列事件（例如 push 和 pop）如何将性能从 O(1) 降低到 O(n^2)。如果我有一个 n/2 容量的数组，n 个 push 和 pop 操作，以及一个在满或半满时容量加倍或减半的动态数组，这些操作发生的顺序怎么可能影响速度哪个程序完成？由于 push 和 pop 在堆栈的顶部元素上工作，我无法看到效率如何从常数变为 O(n^2)。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:43:27.997

您假设动态数组非常智能地执行其调整大小操作。但是，如果不是这种情况，您最终可能会得到 O(n^2) 运行时：假设数组在满时不会使其大小加倍，而只是将大小调整为 size+1。另外，假设它从大小 1 开始。您将在 O(1) 中插入第一个元素。插入第二个元素时，需要将数组大小调整为 2，要求它复制前一个值。插入元素 k 时，它当前的大小为 k-1，需要调整大小为 k，导致需要复制 k-1 个元素，依此类推。

因此，对于插入 n 个元素，您最终会复制数组 n-1 次：O(n) 调整大小。复制操作也线性依赖于 n，因为插入的元素越多，需要复制的越多：每次调整大小 O(n) 份。这导致 O(n*n) = O(n^2) 作为其运行时复杂度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:46:32.760

如果我将堆栈实现为（比如说）一个链表，那么推送和弹出将始终是恒定时间（即 O(1)）。

我不会为堆栈选择动态数组实现，除非运行时对我来说不是问题，我碰巧有一个已构建好的动态数组可供使用，而且我没有更有效的堆栈实现方便。但是，如果我确实使用了一个在它变满或半空时向上或向下调整大小的数组，它的运行时间将是 O(1) 而推送和弹出的数量足够低，不会触发调整大小和 O(n ) 当有调整大小时（因此总体 O(n)）。

我想不出用作堆栈的动态数组可以提供与 O(n^2) 一样糟糕的性能的情况，除非其实现中存在错误。

# mongodb - mongodb: create a top-level index for a nested document instead of having to index each individual sublevel?

> ID：14470486
> 
> 赞同：3
> 
> 时间：2013-01-23T00:26:33.617
> 
> 标签：mongodb

This question is about how I can use indexes in MongoDB to look something up in nested documents, without having to index each individual sublevel. I have a collection "test" in MongoDB which basically goes something like this:

```
{
"_id" : ObjectId("50fdd7d71d41c82875a5b6c1"),
"othercol" : "bladiebla",
"scenario" : {
        "1" : { [1,2,3] },
        "2" : { [4,5,6] }
}} 
```

Scenario has multiple keys, each document can have any subset of the scenarios (i.e. from none to a subset to all). Also: Scenario can't be an array because i need it as a dictionary in Python. I created an index on the "scenario" field.
My issue is that i want to select on the collection, filtering for documents that have a certain value. So this works fine functionally:

```
db.test.find({"scenario.1": {$exists: true}}) 
```

However, it won't use any index i've put on scenario. Only if i put an index on the "scenario.1" an index is used. But I can have thousands (or more) scenarios (and the collection itself has 100.000s of records), so i would prefer not to!
So i tried alternatives:

```
db.test.find({"scenario": "1"}) 
```

This will use the index on scenario, but won't return results. Making scenario an array still gives the same index issue.

Is my question clear? Can anyone give a pointer on how I could achieve the best performance here?

P.s. I have seen this: [How to Create a nested index in MongoDB?](https://stackoverflow.com/questions/9730136/how-to-create-a-nested-index-in-mongodb) but that solution is not possible in my case (due to the amount of scenarios)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:04:59.760

Putting an [index on a subobject](http://docs.mongodb.org/manual/core/indexes/#indexes-on-sub-documents) like `scenario` is useless in this case as it would only be used when you're filtering on complete `scenario` objects rather than individual fields (think of it as a binary blob comparison).

You either need to add an index on each of your possible fields (`"scenario.1"`, `"sceanario.2"`, etc.) or rework your schema to get rid of the dynamic keys by doing something like this:

```
{
"_id" : ObjectId("50fdd7d71d41c82875a5b6c1"),
"othercol" : "bladiebla",
"scenario" : [
    { id: "1", value: [1,2,3] },
    { id: "2", value: [4,5,6] }
}} 
```

Then you can add a single index to `scenario.id` to support the queries you need to perform.

I know you said you need `scenario` to be a dict and not an array, but I don't see how you have much choice.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T07:50:53.290

Johnny HK's answer is a nice explained answer and should be used in general cases. I will just suggest a workaround for you to solve your issue if you have to have many scenarios and don't need complex querying. Instead of keeping values under scenario field, just hold the id of the scenario under that field, and hold the values as another field in the document and use the scenario id as the key of this field.

Example:

```
{
"_id" : ObjectId("50fdd7d71d41c82875a5b6c1"),
"othercol" : "bladiebla",
"scenario" : [ "1", "2"],
"scenario_1": [1,2,3],
"scenario_2": [4,5,6]
}} 
```

With this schema you can use index on scenario to find specific scenarios. But if you need to query for specific scenario values, you again need to have an index on each scenario value field i.e scenario_1, scenario_2, etc.. If you need to have indexes for each field, then don't change your original schema and use sparse indexes for each nested field and that might help reduce the size of your indexes.

# .net - EF 5 无法验证模型的兼容性

> ID：14470488
> 
> 赞同：4
> 
> 时间：2013-01-23T00:26:50.177
> 
> 标签：.net, entity-framework

我对 ASP .Net 编程完全陌生，最近在尝试使用 EF 5 Model First 时遇到了这个异常

```
Unable to verify the compatibility of the model because the DbContext instance was not created using Code First patterns. Unable to verify the compatibility of DbContext instances created from an ObjectContext or using an EDMX file. 
```

我正在使用 Visual Studio 2012，我的解决方案项目有 2 个项目，一个用于数据模型 (EF5)，另一个用于 Web 应用程序 (ASP.NET MVC 4)。

如果有人发出此错误可以帮助我。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:17:33.393

抱歉迟到了，我从一个月前就找到了答案，但忘了编辑我的帖子。

解决方案（为我工作，希望你们）：

运行包管理器控制台（我认为是工具 > 库包管理器，我的视觉工作室是法语）并启动这些命令：

```
Enable-Migrations -EnableAutomaticMigrations -ProjectName <projectName>
Update-Database -Force -Verbose -ProjectName <projectName> 
```

通常它可以解决问题

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T19:40:46.260

我得到了同样的错误。要修复它，我必须从 DataModel 项目的 web.config 文件中删除数据库连接字符串，并将其添加到 Web 应用程序的 web.config 文件中。而已！:)

当我第一次创建 DataModel 项目时，我正在设计模型图并生成 sql。在这个过程中，我添加了 db 连接字符串来运行生成的 sql 脚本。

创建使用 DataModel 项目的 Web 应用程序后，我忘记了删除连接字符串 DataModel。

# iphone - 现代 Objective-C 代码 - 最低 iOS 要求

> ID：14470496
> 
> 赞同：1
> 
> 时间：2013-01-23T00:27:19.747
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我可以在 iOS 5.0 上运行 Modern Objective-C 代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T00:30:05.193

您可以使用[本指南](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html#//apple_ref/doc/uid/TP40012243)来确定哪些语言功能在哪些平台上可用。

# html - CSS 下拉菜单大小问题

> ID：14470498
> 
> 赞同：1
> 
> 时间：2013-01-23T00:27:24.987
> 
> 标签：html, css

我的 CSS 下拉菜单有一个简单的问题，我想让下拉菜单与它们上方的按钮长度相等。请参见下面的示例，我只想将块拉伸到上述块的长度。

*新用户，无法上传图片*

如果您使用我的[jsFiddle 链接](http://jsfiddle.net/QZWj3/1/)，您可以看到我的代码并实时编辑它。无论如何，我都会发布代码以防万一。*注意*我只是在这里发布 CSS 样式表，因为 HTML 不是问题的一部分。

```
/* Dropdown Menu */

#nav {
float: right;
width: 600px;
height: 90px;
margin: 0 auto;
padding-top: 65px;
}

#nav ul {
  font-family: Arial, Verdana;
  font-size: 14px;
  margin: 0;
  padding: 0;
  list-style: none;
  float: right;
}
#nav ul li {
  display: block;
  position: relative;
  float: left;
}
#nav li ul { display: none; }
#nav ul li a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background:  #3636FE;
  margin-left: 1px;
  white-space: nowrap;
}
#nav ul li a:hover { background: #3636FE; }
#nav li:hover ul {
  display: block;
  position: absolute;
}
#nav li:hover li {
  float: none;
  font-size: 11px;
}
#nav li:hover a { background: #3636FE; }
#nav li:hover li a:hover { background: #6868FE; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:32:54.787

固定的。（至少对于 Chrome+Firefox+IE9）

[http://jsfiddle.net/QZWj3/4/](http://jsfiddle.net/QZWj3/4/)

您必须添加`width: 100%`到**#nav li:hover ul**和**#nav li:hover li**

# google-maps-api-3 - 使用 google.visualization.Query 时 Fusion 表失败（test1 成功但类似的 test2 失败）

> ID：14470503
> 
> 赞同：0
> 
> 时间：2013-01-23T00:28:35.540
> 
> 标签：google-maps-api-3, google-fusion-tables

下面的代码用于使 google-fusion-table 与 markercluster 一起工作。（参考：[http](http://www.cs.gsu.edu/~ashrestha2/vis/prjmap2.html) ://www.cs.gsu.edu/~ashrestha2/vis/prjmap2.html 非常感谢作者） 但是，当我尝试按照上面链接中的示例进行操作时，我测试成功了1 但在测试 2 中失败。测试 1 使用了两列的融合表，测试 2 使用了三列的融合表。我不知道为什么我失败了，因为我只为测试 2 添加了一列。

```
google.load('visualization', '1.0', {"callback":initialize});   
//var tableid = '1_6G1c1l7glLHRuOU7uvH8oONbObDf_cOtZS21Rc', atlcenter = new google.maps.LatLng(33.755711,-84.388372);    //test1_success
var tableid = '1IagEEylcnbuPygCES70ipnvb9q0C5OgmGPNyx9o1', atlcenter = new google.maps.LatLng(33.755711,-84.388372); //test2_fail

var mapMain, markers, dataTable = null, mc = null;

function initialize() {     
    mapMain = new google.maps.Map(document.getElementById('map-canvas'), {
        center: atlcenter,
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    mc = new MarkerClusterer(mapMain);
    queryMap("select * from "+tableid);
}

function queryMap(queryText){
    mc.clearMarkers(); markers=[];
    var tmp = 'http://www.google.com/fusiontables/gvizdata?tq='+encodeURIComponent(queryText);
    var query = new google.visualization.Query(tmp); 
    query.send(handleQueryResponse); 
}

function handleQueryResponse(response){
    dataTable = response.getDataTable();
    alert(response.isError()); 
    for(var i=0; i< dataTable.getNumberOfRows();i++){           
        var hrefval = dataTable.getValue(i,0).toString();
        var arr = dataTable.getValue(i,1).toString().split(" ");            
        var latlng = new google.maps.LatLng(arr[0], arr[1]);        
        var marker = new google.maps.Marker({
            position: latlng,
            map:mapMain
        });     
        markers.push(marker);   
    }
    mc.addMarkers(markers);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:55:18.970

此加密 ID 无效：1IagEEylcnbuPygCES70ipnvb9q0C5OgmGPNyx9o1

[https://www.google.com/fusiontables/DataSource?docid=1IagEEylcnbuPygCES70ipnvb9q0C5OgmGPNyx9o1](https://www.google.com/fusiontables/DataSource?docid=1IagEEylcnbuPygCES70ipnvb9q0C5OgmGPNyx9o1)

# python - Python：如何使用 BeautifulSoup 从 HTML 页面中提取 URL？

> ID：14470504
> 
> 赞同：5
> 
> 时间：2013-01-23T00:28:39.987
> 
> 标签：python, beautifulsoup

我有一个包含多个 div 的 HTML 页面，例如

```
<div class="article-additional-info">
A peculiar situation arose in the Supreme Court on Tuesday when two lawyers claimed to be the representative of one of the six accused in the December 16 gangrape case who has sought shifting of t...
<a class="more" href="http://www.thehindu.com/news/national/gangrape-case-two-lawyers-claim-to-be-engaged-by-accused/article4332680.ece">
<span class="arrows">»</span>
</a>
</div>

<div class="article-additional-info">
Power consumers in the city will have to brace for spending more on their monthly bills as all three power distribution companies – the Anil Ambani-owned BRPL and BYPL and the Tatas-owned Tata Powe...
<a class="more" href="http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece">
<a class="commentsCount" href="http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece#comments">
</div> 
```

我需要获得`<a href=>`所有 div 的价值，`article-additional-info` 我是 BeautifulSoup 的新手

所以我需要网址

```
"http://www.thehindu.com/news/national/gangrape-case-two-lawyers-claim-to-be-engaged-by-accused/article4332680.ece"
"http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece" 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T00:34:55.537

根据您的标准，它返回三个 URL（不是两个） - 您想过滤掉第三个吗？

基本思想是遍历 HTML，只提取类中的那些元素，然后遍历该类中的所有链接，提取实际链接：

```
In [1]: from bs4 import BeautifulSoup

In [2]: html = # your HTML

In [3]: soup = BeautifulSoup(html)

In [4]: for item in soup.find_all(attrs={'class': 'article-additional-info'}):
   ...:     for link in item.find_all('a'):
   ...:         print link.get('href')
   ...:         
http://www.thehindu.com/news/national/gangrape-case-two-lawyers-claim-to-be-engaged-by-accused/article4332680.ece
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece#comments 
```

这将您的搜索限制为仅具有 class 标记的那些元素`article-additional-info`，并且在其中查找所有锚 ( `a`) 标记并获取它们相应的`href`链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T04:08:40.897

使用文档后，我按照以下方式进行操作，谢谢大家的回答，我很感激

```
>>> import urllib2
>>> f = urllib2.urlopen('http://www.thehindu.com/news/cities/delhi/?union=citynews')
>>> soup = BeautifulSoup(f.fp)
>>> for link in soup.select('.article-additional-info'):
...   print link.find('a').attrs['href']
... 
http://www.thehindu.com/news/cities/Delhi/airport-metro-express-is-back/article4335059.ece
http://www.thehindu.com/news/cities/Delhi/91-more-illegal-colonies-to-be-regularised/article4335069.ece
http://www.thehindu.com/news/national/gangrape-case-two-lawyers-claim-to-be-engaged-by-accused/article4332680.ece
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece
http://www.thehindu.com/news/cities/Delhi/nurses-women-groups-demand-safety-audit-of-workplaces/article4331470.ece
http://www.thehindu.com/news/cities/Delhi/delhi-bpl-families-to-get-12-subsidised-lpg-cylinders/article4328990.ece
http://www.thehindu.com/news/cities/Delhi/shias-condemn-violence-against-religious-minorities/article4328276.ece
http://www.thehindu.com/news/cities/Delhi/new-archbishop-of-delhi-takes-over/article4328284.ece
http://www.thehindu.com/news/cities/Delhi/delhi-metro-to-construct-subway-without-disrupting-traffic/article4328290.ece
http://www.thehindu.com/life-and-style/Food/going-for-the-kill-in-patparganj/article4323210.ece
http://www.thehindu.com/news/cities/Delhi/fire-at-janpath-bhavan/article4335068.ece
http://www.thehindu.com/news/cities/Delhi/fiveyearold-girl-killed-as-school-van-overturns/article4335065.ece
http://www.thehindu.com/news/cities/Delhi/real-life-stories-of-real-women/article4331483.ece
http://www.thehindu.com/news/cities/Delhi/women-councillors-allege-harassment-by-male-councillors-of-rival-parties/article4331471.ece
http://www.thehindu.com/news/cities/Delhi/airport-metro-resumes-today/article4331467.ece
http://www.thehindu.com/news/national/hearing-today-on-plea-to-shift-trial/article4328415.ece
http://www.thehindu.com/news/cities/Delhi/protestors-demand-change-in-attitude-of-men-towards-women/article4328277.ece
http://www.thehindu.com/news/cities/Delhi/bjp-promises-5-lakh-houses-for-poor-on-interestfree-loans/article4328280.ece
http://www.thehindu.com/life-and-style/metroplus/papad-bidi-and-a-dacoit/article4323219.ece
http://www.thehindu.com/life-and-style/Food/gharana-of-food-not-just-music/article4323212.ece
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T00:38:20.753

```
from bs4 import BeautifulSoup as BS
html = # Your HTML
soup = BS(html)
for text in soup.find_all('div', class_='article-additional-info'):
    for links in text.find_all('a'):
        print links.get('href') 
```

哪个打印：

```
http://www.thehindu.com/news/national/gangrape-case-two-lawyers-claim-to-be-engaged-by-accused/article4332680.ece    
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece    
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece#comments 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T11:05:16.777

```
In [4]: for item in soup.find_all(attrs={'class': 'article-additional-info'}):
...:     for link in item.find_all('a'):
...:         print link.get('href')
...: 
http://www.thehindu.com/news/national/gangrape-case-two-lawyers-claim-to-be-engaged-by-accused/article4332680.ece    
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece    
http://www.thehindu.com/news/cities/Delhi/power-discoms-demand-yet-another-hike-in-charges/article4331482.ece#comments 
```

# regex - 删除尾随时重定向的有趣之处？

> ID：14470505
> 
> 赞同：0
> 
> 时间：2013-01-23T00:28:50.107
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

所以我一直在努力摆脱尾随？在 url 上以避免 SEO 重复。基本上我有一个像

www.example.com/some/thing?

我需要将其重定向到

www.example.com/some/thing

我的 htaccess 上有以下内容：

```
# Remove trailing ?
RewriteCond %{REQUEST_METHOD} (GET) [NC]
RewriteCond %{THE_REQUEST} \?\ HTTP [NC] 
#RewriteRule ([a-zA-Z0-9-/.=&:?]*)\?$ $1 [R=301,L]
RewriteRule ^(.*)$ $1 [r=301,l] 
```

我使用测试仪在第 4 行测试了我的正则表达式，它与整个 url 完美配合。然后我操纵了 htacces 来尝试查看变量 THE_REQUEST 返回的内容，我注意到我的代码正在运行，但是出了点问题。这就是我使用上面的代码在 rewrite.log 中得到的：

```
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (2) init rewrite engine with requested uri /some/thing
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (3) applying pattern '^(.*)$' to uri '/some/thing'
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (4) RewriteCond: input='GET' pattern='(GET)' [NC] => matched
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (4) RewriteCond: input='GET /some/thing? HTTP/1.1' pattern='\?\ HTTP' [NC] => matched
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (2) rewrite '/some/thing' -> '/some/thing'
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (2) explicitly forcing redirect with http://www.example.com/some/thing
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (1) escaping http://www.example.com/some/thing for redirect
127.0.0.1 - - [22/Jan/2013:16:08:09 --0800] [www.example.com/sid#2cb480][rid#eb90f8/initial] (1) redirect to http://www.example.com/some/thing? [REDIRECT/301] 
```

根据我对日志的理解，它正在正确重定向，但由于某种原因，它在重定向时在重写后的末尾附加了问号。关于发生了什么以及如何解决这个问题的任何想法？

此外，当我通过取消注释第 4 行和注释第 5 行来“解除”它时，apache 不遵循规则，因为它是针对 /some/string 而不是针对整个 url (URI+QUERY) 进行测试。如何让 apache 检查 RewriteRule 上的整个 url 而不仅仅是 URI？

注意：网址是动态的，所以我不能硬编码重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:58:15.997

来自[RewriteRule 指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

> **修改查询字符串**
> ...
> 当您想删除现有查询字符串时，只用问号结束替换字符串。
> ...

所以你必须附加一个`?`

```
RewriteRule .* http://www.example.com/$0? [R,L] 
```

永远不要在启用的情况下进行测试`301`，请参阅此答案[调试 .htaccess 重写规则的提示](https://stackoverflow.com/a/9204355/1741542)

# c++ - 用于重建的存储效率最高的八叉树结构是什么？

> ID：14470507
> 
> 赞同：2
> 
> 时间：2013-01-23T00:29:10.987
> 
> 标签：c++, algorithm, memory, tree, octree

我编写了一个完整的八叉树实现，没有对 3D 重建进行太多优化，但是，树结构包含太多指针，不能支持超过 256^3 个体素。

从理论上讲，对于非树结构，如果我使用`vector<bool>`每个体素使用约 1 位的 a，这将更容易接受，因为非树结构可以支持 2k^3 和 8GB 内存。

然而，优化的八叉树结构应该能够做到等于或比这更好，因为：

1.  它不应该存储每个体素，因为*冷凝*可以允许压缩附近的相同值体素。

2.  它不应该使用太多的指针，因为指针本身已经使用了大量的字节。

3.  八叉树必须具有相当低的*节点/体素比率*。

对于完整的八叉树，节点数可以计算为`(s^3 -1) / 7`。是`s`体积分辨率，它是 2 的幂。例如，如果`s = 4`，我需要`1 + 8 = 9`八叉树中的节点来表示 4x4x4 体素网格。

有谁知道符合这些规范的 C++ 八叉树实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T12:33:45.753

我认为八叉树是可行的方法，但只有在需要时才应构建子节点（至少设置一个体素）。此外，应该使用压缩。通常相邻的体素具有相同的值，因此 RLE 压缩似乎效果很好。这在本论文[http://www.terathon.com/voxels/中有解释](http://www.terathon.com/voxels/)

# matlab - (0.3)^3 == (0.3)*(0.3)*(0.3) 在matlab中返回false？

> ID：14470510
> 
> 赞同：19
> 
> 时间：2013-01-23T00:29:16.237
> 
> 标签：matlab, floating-point

我试图了解 MATLAB 中基本算术运算的舍入误差，我遇到了以下奇怪的例子。

```
(0.3)^3 == (0.3)*(0.3)*(0.3)

ans = 0 
```

我想确切地知道左侧是如何计算的。[MATLAB 文档](http://www.mathworks.com/help/matlab/ref/arithmeticoperators.html)建议对于整数幂，使用“平方求幂”算法。

“矩阵幂。X^p 是 X 的幂 p，如果 p 是标量。如果 p 是整数，则幂通过重复平方计算。”

所以我假设`(0.3)^3`并且`(0.3)*(0.3)^2`会返回相同的值。但这种情况并非如此。如何解释舍入误差的差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T00:50:14.777

我对 MATLAB 一无所知，但我在 Ruby 中尝试过：

```
irb> 0.3 ** 3
  => 0.026999999999999996
irb> 0.3 * 0.3 * 0.3
  => 0.027 
```

根据[Ruby 源代码](https://github.com/ruby/ruby/blob/trunk/numeric.c#L974)，如果左侧操作数是浮点数，则求幂运算符将右侧操作数转换为浮点数，然后调用标准 C 函数[`pow()`](http://www.cplusplus.com/reference/cmath/pow/)。该函数的`float`变体`pow()`必须实现更复杂的算法来处理非整数指数，这将使用导致舍入误差的操作。也许 MATLAB 的工作原理类似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T04:12:08.100

有趣的是，标量`^`似乎是使用实现的，`pow`而矩阵`^`是使用平方和乘法实现的。以机智：

```
octave:13> format hex
octave:14> 0.3^3
ans = 3f9ba5e353f7ced8
octave:15> 0.3*0.3*0.3
ans = 3f9ba5e353f7ced9
octave:20> [0.3 0;0 0.3]^3
ans =

  3f9ba5e353f7ced9  0000000000000000
  0000000000000000  3f9ba5e353f7ced9

octave:21> [0.3 0;0 0.3] * [0.3 0;0 0.3] * [0.3 0;0 0.3]
ans =

  3f9ba5e353f7ced9  0000000000000000
  0000000000000000  3f9ba5e353f7ced9 
```

这可以通过在 gdb 下运行 octave 并在`pow`.

在 matlab 中可能也是如此，但我无法真正验证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T02:05:16.800

这是一个小测试程序，它遵循`pow()`来自`Source/Intel/xmm_power.c`Apple 的系统[`Libm-2026`](http://www.opensource.apple.com/tarballs/Libm/Libm-2026.tar.gz)在这种情况下所做的事情：

```
#include <stdio.h>
int main() {
    // basically lines 1130-1157 of xmm_power.c, modified a bit to remove
    // irrelevant things

    double x = .3;
    int i = 3;

    //calculate ix = f**i
    long double ix = 1.0, lx = (long double) x;

    //calculate x**i by doing lots of multiplication
    int mask = 1;

    //for each of the bits set in i, multiply ix by x**(2**bit_position)
    while(i != 0)
    {
        if( i & mask )
        {
            ix *= lx;
            i -= mask;
        }
        mask += mask;
        lx *= lx; // In double this might overflow spuriously, but not in long double
    }

    printf("%.40f\n", (double) ix);
} 
```

这打印出来，这与我在 Matlab 和Python 中`0.0269999999999999962252417162744677625597`得到的结果一致（我们知道[后者只是调用这个代码](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/floatobject.c#l911)）。相比之下，对我来说 gets ，如果你只是要求打印到那么多小数位，这与你得到的结果是一样的，所以大概是最接近的双精度数。`.3 ^ 3``.3 ** 3``.3 * .3 * .3``0.0269999999999999996946886682280819513835``0.027`

于是就有了算法。我们可以准确地跟踪每一步设置的值，但如果使用不同的算法，它会舍入到一个非常小的数字也就不足为奇了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T05:59:42.970

感谢@Dougal，我发现了这个：

```
#include <stdio.h>
int main() {
  double x = 0.3;
  printf("%.40f\n", (x*x*x));

  long double y = 0.3;
  printf("%.40f\n", (double)(y*y*y));
} 
```

这使：

```
0.0269999999999999996946886682280819513835
0.0269999999999999962252417162744677625597 
```

这种情况很奇怪，因为使用更多位数的计算会产生最差的结果。这是因为无论如何初始数字 0.3 都是用几位数字近似的，因此我们从一个相对“大”的错误开始。在这种特殊情况下，发生的情况是，用少量数字计算会产生另一个“大”错误，但符号相反……因此补偿了最初的错误。相反，具有更多数字的计算会产生第二个较小的错误，但第一个仍然存在。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-01-23T00:36:10.583

阅读 Goldberg 的[“What Every Computer Scientist Should Know About Floating-Point Arithmetic”](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)（这是 Oracle 的再版）。明白吧。浮点数**不是**微积分的实数。抱歉，没有可用的 TL;DR 版本。

# javascript - Javascript运行代码一次

> ID：14470516
> 
> 赞同：12
> 
> 时间：2013-01-23T00:29:58.407
> 
> 标签：javascript

我只希望我的 JavaScript 运行一次，**但**我无法控制 JavaScript 文件执行的次数。基本上我正在将一个小的 JS 片段写入 CMS，而 CMS 实际上会调用它 5-10 次。所以像这样的解决方案：

```
function never_called_again(args) {
  // do some stuff
  never_called_again = function (new_args) {
   // do nothing
  }
}
never_called_again(); 
```

似乎不起作用，因为一旦我的代码片段从顶部再次运行，该函数就会重新声明，并重新评估“做一些事情”。也许我只是做得不好，我对 JS 不是很好。我正在考虑在全局变量上使用类似 try-catch 的东西，比如

```
if (code_happened == undefined) {
    \\ run code
     code_happened = true;
} 
```

编辑：有一个一致的状态，例如，如果我设置一个变量，我可以在我的代码片段再次运行时看到。但是在我访问它之前必须声明它，我不知道怎么说'这个变量是否存在'

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T00:37:48.803

试试这个：

```
var doneTheStuff;
function whatever() {
  if (!doneTheStuff) {
    doneTheStuff = true;
    // do the stuff
  }
} 
```

冗余变量声明不会影响变量的值。一旦其中一个函数将变量设置为`true`，其他函数将不会做任何事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T00:42:29.333

```
if (typeof code_happened === 'undefined') {
  window.code_happened = true;
  // Your code here.
} 
```

该`typeof`检查让您了解全局尚未声明的事实。您也可以这样做，`if (!window.code_happened)`因为未定义属性不会禁止属性访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T00:32:21.763

使用闭包，并设置一个标志。如果标志是`true`，则返回：

```
if ( ! window.never_called_again  ) {
    window.never_called_again = (function () {
        var ran = false;
        return function (args) {
            if ( ran ) return;
            ran = true;
            // Do stuff
        };
    }());
} 
```

这是小提琴：http: [//jsfiddle.net/U2NCs/](http://jsfiddle.net/U2NCs/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-24T08:20:22.473

使用 jQuery，函数 .one() 可能有用：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

W3School 示例在这里：[http ://www.w3schools.com/jquery/event_one.asp](http://www.w3schools.com/jquery/event_one.asp)

# forms - 由于某种原因，在提交表单后不会发生此 PHP

> ID：14470521
> 
> 赞同：0
> 
> 时间：2013-01-23T00:30:16.660
> 
> 标签：forms, if-statement

我有以下 HTML +javascript 表单：

```
<script>
window.addEventListener("load", function() {
var form = document.getElementById("myform");
var link = document.getElementById("submit-link");
link.addEventListener("click", function(event) {

    event.preventDefault();
    form.submit();

}, false);
}, false);
</script>

<form action="" method="post" id="myform">
<a id="submit-link" href="http://www.google.com">Submit</a>
</form> 
```

以下 CSS 代码用于设计：

```
.ssd {
border: none;
background-color: transparent;
padding: 0;
cursor: pointer;
font-size:89%;
display:inline;
text-decoration: underline; 
color: #00c;  
} 
```

而这个 PHP 代码：

```
if(isset($_POST['myform'])){
$xmla = new SimpleXMLElement('passwords/' . views . '.xml', 0, true);
$plus = $xmla->goodx;
$result = $plus + 1;
$xmla->goodx = $result;
$xmla->asXML('passwords/' . views . '.xml');

} 
```

现在，每次用户单击值“Click”时，XML 文件都应该更新数据，然后重定向到 google.com。它可以工作，但是当用户将鼠标放在链接上时，他会看到我网站的 URL，而不是谷歌的。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:32:38.313

使用 action="" 并重定向到正确的 google.com 页面。查看 google.com URL 以了解其工作原理。

**编辑：**

要在每个浏览器中查看链接，您需要使用链接并使用 JavaScript 发布表单：

```
<script>
window.addEventListener("load", function() {
    var form = document.getElementById("myform");
    var link = document.getElementById("submit-link");
    link.addEventListener("click", function(event) {
        event.preventDefault();
        form.submit();
    }, false);
}, false);
</script>

<form action="" method="post" id="myform">
    <a id="submit-link" href="http://www.google.com">Submit</a>
</form> 
```

这样，用户将看到 google 链接并将其发布到您的 PHP 脚本。

# xml - CKEditor 用于 XML？

> ID：14470526
> 
> 赞同：1
> 
> 时间：2013-01-23T00:30:43.077
> 
> 标签：xml, ckeditor

我目前正在尝试使用 CKEditor 添加 XML 条目。我修改了示例插件的代码：

```
CKEDITOR.dialog.add( 'abbrDialog', function( editor ) {
return {
    title: 'Abbreviation Properties',
    minWidth: 400,
    minHeight: 200,
    contents: [
        {
            id: 'tab-basic',
            label: 'Basic Settings',
            elements: [
                {
                    type: 'text',
                    id: 'abbr',
                    label: 'Title',
                    validate: CKEDITOR.dialog.validate.notEmpty( "Title cannot be empty" )
                },
                {
                    type: 'text',
                    id: 'title',
                    label: 'Price',
                    validate: CKEDITOR.dialog.validate.notEmpty( "Price cannot be empty" )
                }    
            ]
        },
        {
            id: 'tab-adv',
            label: 'Advanced Settings',
            elements: [
                {
                    type: 'text',
                    id: 'id',
                    label: 'Id'
                }
            ]
        }
    ],          
    onOk: function() {
        var dialog = this;

        var abbr = editor.document.createElement( 'abbr' );
        abbr.setAttribute( 'title', dialog.getValueOf( 'tab-basic', 'title' ) );
        abbr.setText( dialog.getValueOf( 'tab-basic', 'abbr' ) );

        var id = dialog.getValueOf( 'tab-adv', 'id' );
        if ( id )
            abbr.setAttribute( 'id', id );

        editor.insertElement( abbr );
    }
}; 
```

});

但是，当我再次单击编辑器以添加更多项目时，标签变成嵌套的，例如 . 这是不希望的。如何限制另一个标签内没有任何标签？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:40:07.013

这将检索插入符号下的元素：

```
var selectedElement = editor.getSelection().getStartElement(); 
```

有了这个，您可以检索特定类型的最接近的上升：

```
selectedElement.getAscendant( 'abbr', 1 ); 
```

基本上，当有一个时，不要插入任何东西和/或更新`selectedElement`新的属性、属性等。

* * *

顺便说一句：如果您希望进行更具体的过滤，这将为您提供一个可迭代的父元素数组（朝向 DOM 根）：

```
selectedElement.getParents(); 
```

# system-verilog - 如何避免最后的断言（如果我理解正确的话）

> ID：14470529
> 
> 赞同：1
> 
> 时间：2013-01-23T00:30:51.063
> 
> 标签：system-verilog, assertions, frequency-analysis, system-verilog-assertions

我正在关注[http://verificationguild.com/modules.php?name=Forums&file=viewtopic&p=5019](http://verificationguild.com/modules.php?name=Forums&file=viewtopic&p=5019)来检查特定信号的周期。该方法效果很好，但是在模拟的最后，如果断言被posedge（活动边缘）踢出，它基本上会失败，因为没有下一个边缘。

请考虑以下示例：测试台时钟以 2MHz 运行，更新时钟（我已经写过断言）以 5Hz（周期 200ms）运行以进行特定测试。假设模拟运行了 500 毫秒，断言在 400 毫秒时被踢失败。

我应该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T18:33:47.560

您需要禁用该`assert_report_incompletes`变量。创建一个名为的文件`irun_variables.tcl`，其中包含：

```
set assert_report_incompletes 0
run 
```

`-input irun_variables.tcl`然后使用该选项启动 irun 。这将使不完整的断言不会被标记为失败。

# google-apps-script - 空值作为字符串“null”从 listBox 传递，没有选择

> ID：14470530
> 
> 赞同：0
> 
> 时间：2013-01-23T00:30:59.363
> 
> 标签：google-apps-script

我正在检查用户是否从列表框中进行选择。看来，如果未进行选择，则传递给服务器处理程序的值是“null”而不是 null。这是否按预期工作？

此代码正确测试 selectList 列表框中没有选择。

```
 Logger.log("e.parameter.selectList"+e.parameter.selectList)
if (e.parameter.selectList === "null") {
 error = true;
 errortext = "no valid region selected";
 Logger.log('error')
} 
```

我期望

```
 if (!e.parameter.selectList )... to work 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:01:56.457

是的，这是众所周知的。处理程序中的所有值都作为字符串返回（但 dateBox 值除外，但我不确定）。例如，复选框值返回“真”/“假”而不是真/假（布尔值）。您必须首先解析这些字符串以获取所需形式的值。我通常使用`Utilities.jsonParse(stringValue)`

# php - PHP创建MySQL数据库？

> ID：14470541
> 
> 赞同：-3
> 
> 时间：2013-01-23T00:32:06.193
> 
> 标签：php, html, mysql, forms

我现在正在学习 PHP 和 MySQL。我创建了一个简单的 HTML 表单和 PHP 脚本来生成 MySQL 数据库，但是当我测试它时，它不起作用。提交表单后，我收到“服务器错误。网站在检索*[http://www.xxxxx.com/php/createDB.php](http://www.xxxxx.com/php/createDB.php)**时遇到错误。可能因维护而关闭或配置错误。* ”

我的 HTML 表单如下：

```
<body>
<h2>Please enter the following information to create a new database.</h2>
<form action="createDB.php" method="post">
Server Name: <input type="text" name="servername">
Database Name: <input type="text" name="databasename">
User Name: <input type="text" name="username">
Password: <input type="text" name="password">
<input type="submit" value="submit">
</form>
</body> 
```

我的 PHP 脚本如下：

```
<?php
$server = $_POST['servername'];
$dbname = $_POST['databasename'];
$user = $_POST['username'];
$pwd = $_POST['password'];

$con = mysql_connect($server,$user,$pwd);
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
if (mysql_query("CREATE DATABASE" $dbname,$con))
{
echo "Database " .$dbname ." created!";
}
else
{
echo "Error creating database: " . mysql_error();
}
mysql_close($con);
?> 
```

这有什么问题吗？

谢谢。

hc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:45:03.873

您的 PHP 脚本存在错误，因此 PHP 无法解析它。

错误 ：

```
if (mysql_query("CREATE DATABASE" $dbname,$con)) 
```

试试这个来修复它（不要忘记 DATABASE 和 " 之间的空格）：

```
if (mysql_query("CREATE DATABASE " . $dbname,$con)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:54:44.397

尝试这样的事情，它对我有用，我也在我的本地主机中进行了测试。

```
<form action="createDB.php" method="post">
    Server Name: <input type="text" name="servername">
    Database Name: <input type="text" name="databasename">
    User Name: <input type="text" name="username">
    Password: <input type="text" name="password">
    <input type="submit" value="submit" name="send">
</form> 
```

**PHP 脚本**

```
<?php
  if(isset($_REQUEST['send']))
  {
    $server = $_POST['servername'];
    $dbname = $_POST['databasename'];
    $user = $_POST['username'];
    $pwd = $_POST['password'];

    $con = mysql_connect($server,$user,$pwd);
    if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
    if (mysql_query("CREATE DATABASE " . $dbname,$con))
    {
    echo "Database " .$dbname ." created!";
    }
    else
    {
    echo "Error creating database: " . mysql_error();
    }
    mysql_close($con);
  }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:59:34.337

许多 PHP 程序员仍然没有使用 Try Catch，在代码中实现优雅的异常处理总是一个好主意，好处有两个：更容易根据发回的堆栈跟踪调试代码以及​​在您可以提供的前端向您的用户发送有意义的消息和/或在更高级别以编程方式采取行动。

话虽如此，我不记得我最后一次看到手卷 MySql 连接代码是什么时候了，猜测是框架时代。

# jquery - 有人指点我一个不错的缩略图图像选择器吗？

> ID：14470542
> 
> 赞同：0
> 
> 时间：2013-01-23T00:32:07.993
> 
> 标签：jquery, overlay, thumbnails

我有一个包含图像的 div。单击它们时，它们会填充表格单元格。我正在寻找一种可以用来弹出/覆盖这些缩略图选择的东西。可以将 div 用作图像选择器吗？我见过很多画廊类型的，但没有一个只是缩略图大小。欢迎任何想法。PS很难创建其中之一吗？我对此有点时间压力。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:05:57.997

您只需将一个类添加到`div`要变成对话框的类（模态、覆盖等）。然后根据需要添加适当的 CSS 到位置。

[http://jsfiddle.net/cwjtQ/](http://jsfiddle.net/cwjtQ/)

下面是一些用于将窗口定位在浏览器窗口中心的 CSS 示例：

```
.dialog {
    background: #ccc;
    position: absolute;
    height: 500px;
    top: 50%;
    left: 50%;
    margin: -250px 0 0 -250px;
    width: 500px;
    z-index: 9999;
    overflow-y: scroll;
} 
```

# crash - Erlang 崩溃（必须是 ejabberd）：为什么以及如何调试日志文件？

> ID：14470543
> 
> 赞同：4
> 
> 时间：2013-01-23T00:32:10.293
> 
> 标签：crash, erlang, ejabberd, crash-reports

每天我的服务器上都有一个新的 Erlang 崩溃报告。由于 ejabberd 是我使用的唯一 Erlang 的东西，这一定是崩溃的原因。

日志文件 ( `erl_crash.dump`) 有将近 9,000 行，所以我不知道如何调试它。但是当我在该日志文件中搜索“ejabberd”时，出现了 5 次——每一次出现都与“ejabberdctl”有关。

我正在通过 PHP 脚本 ( `exec()`) 处理 ejabberdctl 以编程方式创建用户。这可能是崩溃的原因（不知何故）？

在`/var/log/ejabberd`目录中，我在`erlang.log`和中发现了一些错误`ejabberd.log`。但我真的不知道如何解决它们：

```
=ERROR REPORT====
Mnesia('ejabberd@MYHOST'): ** ERROR ** (core dumped to file: "/var/lib/ejabberd/MnesiaCore.ejabberd@MYHOST_...")
 ** FATAL ** mnesia_monitor crashed: {badarg,
                                      [{ets,lookup,
                                        [mnesia_decision,
                                         'ejabberdctl@MYHOST']},
                                       {mnesia_recover,has_mnesia_down,1},
                                       {mnesia_monitor,handle_info,2},
                                       {gen_server,handle_msg,5},
                                       {proc_lib,init_p_do_apply,3}]} state: {state,
                                                                              <0.65.0>,
                                                                              [],
                                                                              [],
                                                                              true,
                                                                              [],
                                                                              undefined,
                                                                              []}

=ERROR REPORT====
Mnesia('ejabberd@MYHOST'): ** WARNING ** Mnesia is overloaded: {dump_log,
                                                                           time_threshold}

=CRASH REPORT====
  crasher:
    initial call: ejabberd_listener:init/3
    pid: <0.366.0>
    registered_name: []
    exception exit: {timeout,
                        {gen_server,call,
                            [<0.682.0>,{become_controller,<0.685.0>}]}}
      in function  gen_server:call/2
      in call from ejabberd_listener:accept/3
    ancestors: [ejabberd_listeners,ejabberd_sup,<0.39.0>]
    messages: [{#Ref<0.0.0.11304>,ok}]
    links: [#Port<0.2761>,<0.274.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2584
    stack_size: 24
    reductions: 20938
  neighbours: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:11:34.020

该`erl_crash.dump`文件包含 Erlang VM 崩溃时几乎所有内容的状态。有一个分析它的工具，只是：

1.  启动一个 Erlang shell 并启动 webtool：

    ```
    somebody@somehost> erl
    Erlang R15B02 (erts-5.9.2) [source] [smp:2:2] [async-threads:0] [kernel-poll:false]

    Eshell V5.9.2  (abort with ^G)
    1> webtool:start().
    WebTool is available at http://localhost:8888/
    Or  http://127.0.0.1:8888/
    {ok,<0.35.0>}
    2> 
    ```

2.  使用浏览器导航到上面给出的地址，然后单击*WebTool* -> *Start Tools* -> *CrashDumpViewer* -> *Start*，然后单击*CrashDumpViewer* -> *Load Crashdump*。

3.  在*一般信息*中查找*标语*。这是崩溃的总结原因。

**   查找状态不是*Waiting*的进程。当 Erlang VM 崩溃时，这些进程正在做某事，它们可能是源头。* 

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T20:18:06.713

您只能执行一次 ejabberdctl。从您的 PHP 执行两次将在节点命名和您看到的崩溃中产生冲突。

不要从代码中使用 ejabberdctl，而是依赖 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T05:58:35.790

他们有机会成为两次字符串 ejabberd 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T22:53:18.997

你有 erlang.log 日志文件吗？如果是这样，您应该在那里找到有关崩溃的好信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T22:30:10.143

您可以使用 ssh 端口转发将 webtool 导出到本地计算机，您可以在其中将浏览器指向它。将其暴露给整个互联网可能是一个严重的安全错误。*

# c# - 设置简单的 ASP.NET MVC 路由

> ID：14470553
> 
> 赞同：1
> 
> 时间：2013-01-23T00:33:05.873
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在使用[ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework) 4 并试图编写一个非常基本的路线，但它不起作用并且对此感到非常沮丧！

我希望 URL [http://www.mywebsite.com/my-page](http://www.mywebsite.com/my-page)触发名为*Page*的控制器和操作方法*Index*。

除此之外，我没有其他路线设置：

```
RouteTable.Routes.MapRoute(
    name: "Default",
    url: "my-page",
    defaults: new { controller = "Page", action = "Index" }
); 
```

我的设置是否有问题或者我哪里出错了？

我得到的错误是：

> 找不到路径“/my-page”的控制器或未实现 IController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:32:40.993

主要问题是您试图覆盖默认路由。在 MVC4 中，路由在 App_Start/RouteConfig.cs 中定义。“默认”路由应该是 LAST 路由：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

然后，对于您的特定路线，在默认路线之前使用以下内容：

```
 routes.MapRoute(
            name: "MyPage",
            url: "my-page",
            defaults: new { controller = "Page", action = "Index" }
        ); 
```

最后，确保您有一个控制器 PageController.cs，其中包含一个操作 Index 和一个 View Views/Page/Index.cshtml：

```
public class PageController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

# java - 在java中同时读取和写入文件

> ID：14470557
> 
> 赞同：10
> 
> 时间：2013-01-23T00:33:15.640
> 
> 标签：java, file, file-io, overwrite, read-write

我正在逐行读取文件，并且我正在尝试这样做，以便如果我到达符合我的特定参数的行（在我的情况下，如果它以某个单词开头），我可以覆盖该行。

我当前的代码：

```
try {
    FileInputStream fis = new FileInputStream(myFile);
    DataInputStream in = new DataInputStream(fis);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String line;

    while ((line = br.readLine()) != null) {
        System.out.println(line);
            if (line.startsWith("word")) {
                // replace line code here
            }
    }
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

...对象在`myFile`哪里`File`。

与往常一样，非常感谢任何帮助、示例或建议。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T00:46:20.657

[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)似乎很合适。它的 javadoc 说：

> 此类的实例支持读取和写入随机访问文件。随机访问文件的行为类似于存储在文件系统中的大型字节数组。有一种游标，或隐含数组的索引，称为文件指针；输入操作从文件指针开始读取字节，并将文件指针推进超过读取的字节。如果随机存取文件是以读/写模式创建的，那么输出操作也是可用的；输出操作从文件指针开始写入字节，并将文件指针前进到写入的字节。写入隐含数组当前末尾的输出操作会导致数组被扩展。文件指针可以通过 getFilePointer 方法读取并通过 seek 方法设置。

也就是说，由于文本文件是一种顺序文件格式，如果不移动所有后续字符，就不能用不同长度的行替换一行，因此替换行通常相当于读取和写入整个文件。如果您写入单独的文件并在完成后重命名输出文件，这可能更容易完成。如果出现问题，这也更加强大，因为可以简单地使用初始文件的内容重试。RandomAccessFile 的唯一优点是您不需要临时输出文件的磁盘空间，并且由于更好的访问局部性，可能会从磁盘中获得更好的性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T00:41:24.437

您最好的选择可能是将文件读入内存（类似于 a `StringBuilder`）并将您希望输出文件看起来像的内容写入`StringBuilder`. 完全读完文件后，您需要将文件的内容写入`StringBuilder`文件。

如果文件太大而无法在内存中完成此操作，您始终可以逐行读取文件的内容并将它们写入临时文件而不是`StringBuilder`. 完成后，您可以删除旧文件并将临时文件移至其位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-03T14:05:48.440

一个老问题，最近在研究这个。分享经验

```
import java.nio.charset.Charset;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public static void updateFile(Path file) {

    // Get all the lines
    try (Stream<String> stream = Files.lines(file,StandardCharsets.UTF_8)) {
        // Do the replace operation
        List<String> list = stream.map(line -> line.replaceAll("test", "new")).collect(Collectors.toList());
        // Write the content back
        Files.write(file, list, StandardCharsets.UTF_8);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# knockout.js - 淘汰自定义绑定以从其他可观察对象更新可观察对象

> ID：14470559
> 
> 赞同：0
> 
> 时间：2013-01-23T00:33:19.637
> 
> 标签：knockout.js, custom-binding

我有两个具有相同选项的选择输入，并且在第一个选择中更改值应该禁用第二个（包括）选择一个中的所有先前选项，并将第二个选择的值设置为第一个下一个值。我在[这里](http://jsfiddle.net/juvastyle/9gGjq/)设置了一个工作小提琴。

```
<select data-bind="options: selectList, value: firstSelect"></select>
<select data-bind="options: selectList, value: secondSelect, minVal: firstSelect"></select> 
```

我创建了自定义绑定处理程序：

```
ko.bindingHandlers.minVal = {
    update: function (element, valueAccessor) {
        var firstValue = ko.utils.unwrapObservable(valueAccessor());
        var firstNext=null;
        $(element).children().each(function () {
            var $this = $(this);
            if ($this.val() <= firstValue) {
                $this.attr('disabled', 'disabled');
            } else {
                if (firstNext==undefined){
                    firstNext=$this.val();
                }                
            }
        });
        $(element).val(firstNext).trigger('change');
    }
}; 
```

并且如果您更改第一个选择它会在第二个中禁用所有先前的选项，并将第二个的值设置为第一个下一个值，但问题是当用户想要在第二个更改值时，由于更新而无法执行from custom binding 总是根据 first 设置值。所以我的问题是如何在自定义绑定中知道如何更新值，从更改 valueAccessor() 可观察或通过更改第二个选择手动更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:47:59.527

我认为问题在于触发更改事件。

我采用了一种稍微不同的方法将数组切片为计算值并将第二个列表绑定到该值。

html:

```
<select data-bind="options: selectList, value: firstSelect"></select>
<select data-bind="options: secondSelectList, value: secondSelect"></select> 
```

Javascript：

```
ViewModel = function () {
    var self = this;
    self.firstSelect = ko.observable();
    self.secondSelect = ko.observable();
    self.selectList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    self.secondSelectList = ko.computed(function(){
        return self.selectList.slice(self.firstSelect(), self.selectList.length);
    }, self);
};

var vm = new ViewModel();
ko.applyBindings(vm); 
```

在这里提琴：

[http://jsfiddle.net/QDpPk/](http://jsfiddle.net/QDpPk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:44:55.340

我找到了解决方案，这是纯粹的逻辑问题。在更新值之前询问新值（手动选择表单更改选择选项）是否大于应从自定义绑定中选择的值，您将能够将值更改为您想要的值。

```
if (firstNext >= $(element).val()) {
    $(element).val(firstNext);
    $(element).change();
} 
```

这是更新的小提琴：http: [//jsfiddle.net/9gGjq/4/](http://jsfiddle.net/9gGjq/4/)

# c++ - 键值数据结构在 O(1) 中搜索键并在 O(1) 中获取最大值

> ID：14470562
> 
> 赞同：4
> 
> 时间：2013-01-23T00:33:32.253
> 
> 标签：c++, boost, data-structures, stl, bimap

我需要实现一个键值数据结构，在 O(lgn) 或 O(1)中搜索唯一**键并在 O(1) 中获取****最大值**。我在考虑

```
boost::bimap< unordered_set_of<key> ,multiset_of<value> > 
```

请注意，我的键值数据集中没有重复键。但是，两个键可能具有相同的值。因此我使用 multiset 来存储值。

我需要经常插入/删除/更新键值对

听起来怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:14:40.800

这取决于你想做什么。所以很明显，您想将它用于一些获取最大值的迭代构造。

*问题 1：您是否也通过它们的***键**访问元素？

*   如果**是**，我可以为您想出两种解决方案：

    1.  使用`boost::bimap`- 具有对数运行时的简单、经过测试的解决方案。

    2.  创建一个自定义容器，其中包含一个`std::map`（或更快的按键访问`std::unordered_map`）和一个堆实现（例如`std::priority_queue<std::map<key, value>::iterator>`+ 自定义比较器），使它们保持同步等。这是困难的方法，但可能更快。两者上的大多数操作都是 O(logn) （插入、get&pop max、按键获取、删除），但常数有时很重要。虽然您使用`std::unordered_map`按键操作的访问将是 O(1)。

        您可能还想为新容器编写测试，并针对您最常使用的操作对其进行优化。

*   如果**否**，您实际上只是使用使用最大值的元素进行访问

    *问题2：*您是随机插入/删除/更新元素，还是先将所有元素放入一轮，然后逐个删除？

    *   用于随机插入/删除/更新使用`std::priority_queue<std::pair<value, key>>`

    *   如果您先放入元素，然后将它们一个一个删除，请在第一次删除操作之前使用 and`std::vector<std::pair<value, key>>`和it 。`std::sort()`不要实际删除元素，只需对其进行迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:06:58.983

您可以使用 a`std::map`和 a构建它`std::set`。

1.  一张地图来保存实际值，即`std::map<key, value> m;`. 这是存储您的值的地方。将元素插入地图是 O(log n)。

2.  一组指向地图的迭代器；该集合按相应映射条目的值排序，即`std::set<std::map<key, value>::iterator, CompareBySecondField> s;`类似于（未经测试）：

    ```
    template <class It>
    struct CompareBySecondField : std::binary_function<It, It, bool> {
        bool operator() ( const T &lhs, const T &rhs ) const {
            return lhs->second > rhs->second;
        }
    }; 
    ```

    然后，您可以使用 获取具有最大值的映射条目的迭代器`*s.begin();`。

这很容易构建，但是您必须确保在添加/删除元素时更新两个容器。

# python - mongoengine中的双向关系

> ID：14470565
> 
> 赞同：1
> 
> 时间：2013-01-23T00:33:38.123
> 
> 标签：python, django, mongoengine

我需要在 Mongoengine 中使用双向关系，如下所示。

```
from mongoengine import *

class Notification(Document):
    desc = StringField()
    from_user = ReferenceField('User')

class User(Document):
    Name = StringField()
    notifications = ListField(EmbeddedDocumentField(Notification)) 
```

我知道当类尚未定义时，我们可以将单引号类名放在那里。

```
from_user = ReferenceField('User') 
```

但是，我们在这里遇到了问题。似乎在运行时它将我们的类解释为 mongoengine.django.auth.user 而不是我们的自定义用户类。（这正是我的猜测，但在调试模式下的运行时我发现它误解为 mongoengine.django.auth.user 尽管集合中的记录应该属于自定义用户类）

那么有什么方法可以让我在那里指定一个完全限定的类名吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:54:15.330

在这种情况下，您需要在 Notification 类之后声明 User 类。

内部 mongoengine 使用类注册表，通过 Document 元类填充。不幸的是，命名空间与 java 世界中的命名空间不同（我从没想过我会这么说！）据我所知，它不可能确定一个类的完整位置名称，例如：myapp.models.User

你在使用 django User 类吗？以及另一个用户类 - 这将导致注册表问题，因为目前每个名称只能有一个类。

# c++ - 如何在boost使用BFS中遍历图

> ID：14470566
> 
> 赞同：8
> 
> 时间：2013-01-23T00:33:54.647
> 
> 标签：c++, boost, breadth-first-search, boost-graph

我在编译一个非常简单的图形的 BFS 时遇到问题。无论我做什么，我都会收到关于不匹配的方法调用的各种编译器消息（我已经尝试过`boost::visitor`和扩展`boost::default_bfs_visitor`等）

```
#include <stdint.h>
#include <iostream>
#include <vector>
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/breadth_first_search.hpp>

int main() {
  typedef boost::adjacency_list<boost::vecS, boost::hash_setS, boost::undirectedS, uint32_t, uint32_t, boost::no_property> graph_t;
  graph_t graph(4);
  graph_t::vertex_descriptor a = boost::vertex(0, graph);
  graph_t::vertex_descriptor b = boost::vertex(1, graph);
  graph_t::vertex_descriptor c = boost::vertex(2, graph);
  graph_t::vertex_descriptor d = boost::vertex(3, graph);
  graph[a] = 0;
  graph[b] = 1;
  graph[c] = 2;
  graph[d] = 3;
  std::pair<graph_t::edge_descriptor, bool> result = boost::add_edge(a, b, 0, graph);
  result = boost::add_edge(a, c, 1, graph);
  result = boost::add_edge(c, b, 2, graph);
  class {
  public:
    void initialize_vertex(const graph_t::vertex_descriptor &s, graph_t &g) {
      std::cout << "Initialize: " << g[s] << std::endl;
    }
    void discover_vertex(const graph_t::vertex_descriptor &s, graph_t &g) {
      std::cout << "Discover: " << g[s] << std::endl;
    }
    void examine_vertex(const graph_t::vertex_descriptor &s, graph_t &g) {
      std::cout << "Examine vertex: " << g[s] << std::endl;
    }
    void examine_edge(const graph_t::edge_descriptor &e, graph_t &g) {
      std::cout << "Examine edge: " << g[e] << std::endl;
    }
    void tree_edge(const graph_t::edge_descriptor &e, graph_t &g) {
      std::cout << "Tree edge: " << g[e] << std::endl;
    }
    void non_tree_edge(const graph_t::edge_descriptor &e, graph_t &g) {
      std::cout << "Non-Tree edge: " << g[e] << std::endl;
    }
    void gray_target(const graph_t::edge_descriptor &e, graph_t &g) {
      std::cout << "Gray target: " << g[e] << std::endl;
    }
    void black_target(const graph_t::edge_descriptor &e, graph_t &g) {
      std::cout << "Black target: " << g[e] << std::endl;
    }
    void finish_vertex(const graph_t::vertex_descriptor &s, graph_t &g) {
      std::cout << "Finish vertex: " << g[s] << std::endl;
    }
  } bfs_visitor;
  boost::breadth_first_search(graph, a, bfs_visitor);
  return 0;
} 
```

如何使用 访问图表`bfs_visitor`？

PS。我已经看过并编译了[“如何创建 C++ Boost 无向图并以深度优先搜索 (DFS) 顺序遍历它？”](https://stackoverflow.com/questions/14126/how-to-create-a-c-boost-undirected-graph-and-traverse-it-in-depth-first-search) 但这没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T07:30:33.607

您可以[在此处](http://www.boost.org/libs/graph/doc/breadth_first_search.html)查看 的重载列表`breadth_first_search`。如果您不想指定需要使用命名参数版本的每个参数。它看起来像这样：

```
breadth_first_search(graph, a, boost::visitor(bfs_visitor)); 
```

`vecS`如果您在图形定义中用作 VertexList 存储，或者您已经构造并初始化了内部 vertex_index 属性映射，这将按原样工作。由于您正在使用`hash_setS`，您需要将调用更改为：

```
breath_first_search(graph, a, boost::visitor(bfs_visitor).vertex_index_map(my_index_map)); 
```

您已经在 uint32_t 捆绑属性中使用了索引映射。您可以使用`get(boost::vertex_bundle, graph)`它来访问它。

您的访客也有问题。您应该从中派生它，`boost::default_bfs_visitor`并且`graph_t`您的成员函数的参数需要是 const 限定的。

完整代码：

```
#include <stdint.h>
#include <iostream>
#include <vector>
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/breadth_first_search.hpp>

typedef boost::adjacency_list<boost::vecS, boost::hash_setS, boost::undirectedS, uint32_t, uint32_t, boost::no_property> graph_t;

struct my_visitor : boost::default_bfs_visitor{

    void initialize_vertex(const graph_t::vertex_descriptor &s, const graph_t &g) const {
      std::cout << "Initialize: " << g[s] << std::endl;
    }
    void discover_vertex(const graph_t::vertex_descriptor &s, const graph_t &g) const {
      std::cout << "Discover: " << g[s] << std::endl;
    }
    void examine_vertex(const graph_t::vertex_descriptor &s, const graph_t &g) const {
      std::cout << "Examine vertex: " << g[s] << std::endl;
    }
    void examine_edge(const graph_t::edge_descriptor &e, const graph_t &g) const {
      std::cout << "Examine edge: " << g[e] << std::endl;
    }
    void tree_edge(const graph_t::edge_descriptor &e, const graph_t &g) const {
      std::cout << "Tree edge: " << g[e] << std::endl;
    }
    void non_tree_edge(const graph_t::edge_descriptor &e, const graph_t &g) const {
      std::cout << "Non-Tree edge: " << g[e] << std::endl;
    }
    void gray_target(const graph_t::edge_descriptor &e, const graph_t &g) const {
      std::cout << "Gray target: " << g[e] << std::endl;
    }
    void black_target(const graph_t::edge_descriptor &e, const graph_t &g) const {
      std::cout << "Black target: " << g[e] << std::endl;
    }
    void finish_vertex(const graph_t::vertex_descriptor &s, const graph_t &g) const {
      std::cout << "Finish vertex: " << g[s] << std::endl;
    }
  };

int main() {
  graph_t graph(4);
  graph_t::vertex_descriptor a = boost::vertex(0, graph);
  graph_t::vertex_descriptor b = boost::vertex(1, graph);
  graph_t::vertex_descriptor c = boost::vertex(2, graph);
  graph_t::vertex_descriptor d = boost::vertex(3, graph);
  graph[a] = 0;
  graph[b] = 1;
  graph[c] = 2;
  graph[d] = 3;
  std::pair<graph_t::edge_descriptor, bool> result = boost::add_edge(a, b, 0, graph);
  result = boost::add_edge(a, c, 1, graph);
  result = boost::add_edge(c, b, 2, graph);

  my_visitor vis;

  breadth_first_search(graph, a, boost::visitor(vis).vertex_index_map(get(boost::vertex_bundle,graph)));
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-04T10:36:46.603

我遇到了同样的问题，但与 user1252091 提供的答案相比，我的顶点类型是一个不包含可用于创建 vertex_index_map 的整数的结构，因此该行

```
breadth_first_search(graph, a, boost::visitor(vis).vertex_index_map(get(boost::vertex_bundle,graph))); 
```

在我的情况下不起作用。最终我想出了如何创建一个外部 vertex_index_map （也感谢[这个答案](https://stackoverflow.com/a/7257966/779446)）并将其传递给 breadth_first_search 函数。这是一个工作示例，以防它帮助其他人：

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/visitors.hpp>
#include <boost/graph/breadth_first_search.hpp>
#include <iostream>

struct Person
{
    std::string Name;
    unsigned int YearBorn;
};

typedef boost::adjacency_list <boost::vecS, boost::hash_setS, boost::bidirectionalS, Person, boost::no_property > FamilyTree;
typedef boost::graph_traits<FamilyTree>::vertex_descriptor  Vertex;
typedef boost::graph_traits<FamilyTree>::edge_descriptor    Edge;

template <class Graph>
class BfsVisitor : public boost::default_bfs_visitor
{
public:
    typedef typename boost::graph_traits<Graph>::vertex_descriptor VertexDescriptor;
    typedef typename boost::graph_traits<Graph>::edge_descriptor   EdgeDescriptor;

    BfsVisitor(std::vector<VertexDescriptor>& nodesVisited)
    : m_nodesVisited(nodesVisited){}

    void tree_edge(EdgeDescriptor e, const Graph& g) const
    {
        VertexDescriptor u = source(e, g);
        VertexDescriptor v = target(e, g);
        m_nodesVisited.push_back(v);
    }

private:
    std::vector<VertexDescriptor>& m_nodesVisited;
};

const Person Abe_Simpson        {"Abe_Simpson", 0};
const Person Mona_Simpson       { "Mona_Simpson", 0};
const Person Herb_Simpson       { "Herb_Simpson", 0};
const Person Homer_Simpson      { "Homer_Simpson", 0};

const Person Clancy_Bouvier     { "Clancy_Bouvier", 0};
const Person Jacqueline_Bouvier { "Jacqueline_Bouvier", 0};
const Person Marge_Bouvier      { "Marge_Bouvier", 0};
const Person Patty_Bouvier      { "Patty_Bouvier", 0};
const Person Selma_Bouvier      { "Selma_Bouvier", 0};

const Person Bart_Simpson       { "Bart_Simpson", 0};
const Person Lisa_Simpson       { "Lisa_Simpson", 0};
const Person Maggie_Simpson     { "Maggie_Simpson", 0};
const Person Ling_Bouvier       { "Ling_Bouvier", 0};

int main(void)
{
    std::cout << __FUNCTION__ << "\n";

    FamilyTree g;

    // nodes
    auto v_Abe_Simpson = boost::add_vertex(Abe_Simpson,g);
    auto v_Mona_Simpson = boost::add_vertex(Mona_Simpson,g);
    auto v_Herb_Simpson = boost::add_vertex(Herb_Simpson,g);
    auto v_Homer_Simpson = boost::add_vertex(Homer_Simpson,g);

    auto v_Clancy_Bouvier = boost::add_vertex(Clancy_Bouvier,g);
    auto v_Jacqueline_Bouvier = boost::add_vertex(Jacqueline_Bouvier,g);
    auto v_Marge_Bouvier = boost::add_vertex(Marge_Bouvier,g);
    auto v_Patty_Bouvier = boost::add_vertex(Patty_Bouvier,g);
    auto v_Selma_Bouvier = boost::add_vertex(Selma_Bouvier,g);

    auto v_Bart_Simpson = boost::add_vertex(Bart_Simpson,g);
    auto v_Lisa_Simpson = boost::add_vertex(Lisa_Simpson,g);
    auto v_Maggie_Simpson = boost::add_vertex(Maggie_Simpson,g);
    auto v_Ling_Bouvier = boost::add_vertex(Ling_Bouvier,g);

    // connections
    boost::add_edge(v_Abe_Simpson, v_Herb_Simpson, g);
    boost::add_edge(v_Abe_Simpson, v_Homer_Simpson, g);
    boost::add_edge(v_Mona_Simpson, v_Herb_Simpson, g);
    boost::add_edge(v_Mona_Simpson, v_Homer_Simpson, g);

    boost::add_edge(v_Clancy_Bouvier, v_Marge_Bouvier, g);
    boost::add_edge(v_Clancy_Bouvier, v_Patty_Bouvier, g);
    boost::add_edge(v_Clancy_Bouvier, v_Selma_Bouvier, g);
    boost::add_edge(v_Jacqueline_Bouvier, v_Marge_Bouvier, g);
    boost::add_edge(v_Jacqueline_Bouvier, v_Patty_Bouvier, g);
    boost::add_edge(v_Jacqueline_Bouvier, v_Selma_Bouvier, g);

    boost::add_edge(v_Homer_Simpson, v_Bart_Simpson, g);
    boost::add_edge(v_Homer_Simpson, v_Lisa_Simpson, g);
    boost::add_edge(v_Homer_Simpson, v_Maggie_Simpson, g);
    boost::add_edge(v_Marge_Bouvier, v_Bart_Simpson, g);
    boost::add_edge(v_Marge_Bouvier, v_Lisa_Simpson, g);
    boost::add_edge(v_Marge_Bouvier, v_Maggie_Simpson, g);

    boost::add_edge(v_Selma_Bouvier, v_Ling_Bouvier, g);

    typedef std::map<Vertex, size_t>IndexMap;
    IndexMap mapIndex;
    boost::associative_property_map<IndexMap> propmapIndex(mapIndex);
    size_t i=0;
    FamilyTree::vertex_iterator vi, vi_end;
    for (boost::tie(vi, vi_end) = boost::vertices(g); vi != vi_end; ++vi)
    {
        boost::put(propmapIndex, *vi, i++);
    }

    for (boost::tie(vi, vi_end) = boost::vertices(g); vi != vi_end; ++vi)
    {
        Vertex vParent = *vi;

        std::vector<Vertex> vertexDescriptors;
        BfsVisitor<FamilyTree> bfsVisitor(vertexDescriptors);
        breadth_first_search(g, vParent, visitor(bfsVisitor).vertex_index_map(propmapIndex));

        std::cout << "\nDecendants of " << g[vParent].Name << ":\n";
        for (auto v : vertexDescriptors)
        {   
            Person p = g[v];
            std::cout << p.Name << "\n";
        }   
    }

    getchar();
    return 0;
} 
```

# php - 在PHP中计算字符串中的字符

> ID：14470569
> 
> 赞同：1
> 
> 时间：2013-01-23T00:34:37.023
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中获取字符串的确切长度？](https://stackoverflow.com/questions/7914779/how-can-i-get-the-exact-length-of-a-string-in-php)

PHP中计算字符串中有多少个字符的最佳方法是什么？

我进行了网络搜索，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T00:35:22.043

使用[`mb_strlen`](http://php.net/manual/en/function.mb-strlen.php)：

```
$count = mb_strlen( $string ); 
```

你也可以使用[`strlen`](http://php.net/manual/en/function.strlen.php)，但你要求最好的方法；）

# c - OpenGL 总初学者和 2D 动画项目？

> ID：14470575
> 
> 赞同：0
> 
> 时间：2013-01-23T00:35:21.447
> 
> 标签：c, opengl, animation, 2d

我已经安装了 GLUT 和 Visual Studio 2010，并找到了一些关于 OpenGL 基础知识 (www.opengl-tutorial.org) 和 2D 图形编程的教程。我有 C 方面的高级知识，但没有图形编程经验......

对于项目（天文学 - 时间尺度），我必须在窗口中心创建一个对象，并使其他 5 个对象（圆、点...）相对于某些方程围绕中心对象旋转（我可以实现它们并求解）。方程用于计算这 5 个对象的坐标，所有方程都有**参数 t**（作为时间）。为了创建动画，我将**通过一些步骤将参数 t 从 0 更改为 2pi，**并在不同的时刻获取坐标。如果任务是打印对象的新坐标，这对我来说很容易，但问题是如何制作图形动画。我可以使用 OpenGL 的一些功能进行旋转/平移吗？**如何使物体移动到所需位置，坐标由方程确定？**或者我可以每毫秒在新坐标中重绘对象？我想到的第一件事是绘制所有对象，计算新坐标，清除屏幕并在新坐标中绘制所有对象并无限重复......（这将是原始的，但会工作吗？）

这是该对象的屏幕截图 - [http://i.snag.gy/ht7tG.jpg](http://i.snag.gy/ht7tG.jpg)。我的问题是如何通过每一步计算对象的新坐标并将它们移动到新位置来制作动画。我可以用 OpenGL 的基础知识和 C 和几何的良好知识来做到这一点吗？从什么开始的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:47:40.400

> 我想到的第一件事是绘制所有对象，计算新坐标，清除屏幕并在新坐标中绘制所有对象并无限重复......（这将是原始的，但会工作吗？）

这正是它的工作原理。使用 GLUT，您可以设置一个显示函数，当 GLUT 认为是时候绘制新帧时调用该函数。在此函数中，清除屏幕、绘制对象并将其刷新到屏幕上。然后只需指示 GLUT 绘制另一帧，您就可以制作动画了！

可能想要跟踪帧之间的时间，以便您可以流畅地制作动画，但我相信您可以弄清楚这部分。

OpenGL 实际上只是一个绘图库。它不做动画，这取决于你来实现。清除/绘制/刷新是它常用的方法。

*注意：我的意思是“flush” `glFlush()`，尽管多缓冲区模式下的 GLUT 需要`glutSwapBuffers()`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:49:10.660

红皮书解释了绘制模型的正确方法，可以先平移、旋转、缩放等：[http ://www.glprogramming.com/red/chapter03.html](http://www.glprogramming.com/red/chapter03.html)

基本上，您加载身份，执行变换/旋转/缩放（您首先想要的那个很重要 - 这本书再次解释了它），绘制模型，就好像它在正常比例的原点上一样，它将被放置在新的位置。然后您可以加载身份并继续下一个。动画的每一帧，你 glClear() 并重新计算/重绘一切。（这听起来很昂贵，但通常你可以在两次抽签之间缓存的东西不多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:45:14.050

> 或者我可以每毫秒在新坐标中重绘对象？我想到的第一件事是绘制所有对象，计算新坐标，清除屏幕并在新坐标中绘制所有对象并无限重复..

这确实是要走的路。我进一步建议您不要像 OpenGL 3/4 方式那样使用着色器和顶点缓冲区。最简单的方法称为“即时模式”，OpenGL 3/4 已弃用，但在 1/2/3 中可用。这简单：

```
glPushMatrix(); //save modelview matrix
  glTranslatef(obj->x, obj->y, obj->z); //move origin to object center
  glBegin(GL_TRIANGLES); //start drawing triangles
    glColor3f(1.0f, 0.0f, 0.0f); //a nice red one
    glVertex3f(0.0, +0.6f, 0.0f);
    glVertex3f(-0.4f, 0.0f, 0.0f);
    glVertex3f(+0.4f, 0.0f, 0.0f); //almost equilateral
  glEnd();
glPopMatrix(); //restore modelview matrix/origin 
```

一定要查看辅助库`glu`（对于设置相机/投影矩阵很有用）和`glut`（应该很容易设置窗口和基本控件和绘图）。

设置它（显示一个旋转的三角形）可能比弄清楚如何使用它需要更长的时间。事实上，这里[有一些代码可以帮助您入门](https://gist.github.com/4600974)。您的第一个挑战可能是设置沿 Z 轴投影的 2D 正交投影矩阵，因此您可以使用 2D 函数 ( `glVertex2`)。

# node.js - 控制台和从 HTTP 接口登录 Node.js

> ID：14470579
> 
> 赞同：0
> 
> 时间：2013-01-23T00:35:58.177
> 
> 标签：node.js, console

我有一个需要回答的难题，我见过一些项目，其中应用程序在浏览器中运行套接字，该套接字具有类似控制台的格式，用户可以为他们的 node.js 模块运行...

如果从 Web 端实际调用函数或脚本是不可能的，我认为只在窗口中查看控制台日志会很不错。

如果可以分享任何建议，那将是惊人的！

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:40:07.680

是的，有几个项目可以做到这一点。 [温热](http://people.apache.org/~pmuellr/weinre/docs/latest/)非常常用。您可以查看它的源代码以了解它是如何实现的。

如果我要从头开始构建它，我会使用[Socket.IO](http://socket.io/)。发送命令，返回结果。

# python - 如何验证跨外键的唯一性约束（django）

> ID：14470585
> 
> 赞同：21
> 
> 时间：2013-01-23T00:36:46.693
> 
> 标签：python, django, django-models

我有以下（简化的）数据结构：

```
Site
-> Zone
   -> Room
      -> name 
```

我希望每个房间的名称对于每个站点都是唯一的。

我知道，如果我只是想要每个区域的唯一性，我可以这样做：

```
class Room(models.Model):
    zone = models.ForeignKey(Zone)
    name = models.CharField(max_length=255) 

    class Meta:
        unique_together = ('name', 'zone') 
```

但我不能做我真正想做的事，那就是：

```
class Room(models.Model):
    zone = models.ForeignKey(Zone)
    name = models.CharField(max_length=255) 

    class Meta:
        unique_together = ('name', 'zone__site') 
```

[按照这个问题](https://stackoverflow.com/questions/4440010/django-unique-together-with-foreign-keys)的建议，我尝试添加一个 validate_unique 方法：

```
class Room(models.Model):
    zone = models.ForeignKey(Zone)
    name = models.CharField(max_length=255) 

    def validate_unique(self, exclude=None):
        qs = Room.objects.filter(name=self.name)
        if qs.filter(zone__site=self.zone__site).exists():
            raise ValidationError('Name must be unique per site')

        models.Model.validate_unique(self, exclude=exclude) 
```

但我一定误解了 validate_unique 的要点/实现，因为当我保存 Room 对象时它没有被调用。

实施此检查的正确方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T01:25:24.427

保存模型时不会自行调用方法。一种方法是使用自定义保存方法，该方法在保存模型时调用 validate_unique 方法：

```
class Room(models.Model):
    zone = models.ForeignKey(Zone)
    name = models.CharField(max_length=255) 

    def validate_unique(self, exclude=None):
        qs = Room.objects.filter(name=self.name)
        if qs.filter(zone__site=self.zone__site).exists():
            raise ValidationError('Name must be unique per site')

    def save(self, *args, **kwargs):

        self.validate_unique()

        super(Room, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-27T11:33:22.977

```
class Room(models.Model):
    zone = models.ForeignKey(Zone)
    name = models.CharField(max_length=255)

    def validate_unique(self, *args, **kwargs):
        super(Room, self).validate_unique(*args, **kwargs)
        qs = Room.objects.filter(name=self.name)
        if qs.filter(zone__site=self.zone__site).exists():
            raise ValidationError({'name':['Name must be unique per site',]}) 
```

我需要制作类似的程序。有效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-23T04:11:26.483

Django [Validation objects](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#validating-objects)文档解释了验证中涉及的步骤，包括这个片段

> 请注意，调用模型的 save() 方法时不会自动调用 full_clean()

如果模型实例是由于使用 a 而创建的`ModelForm`，则验证将在验证表单时进行。

在如何处理验证方面有一些选择。

1.  `full_clean()`在保存之前手动调用模型实例。
2.  覆盖`save()`模型的方法以在每次保存时执行验证。您可以在此处选择应进行多少验证，无论您想要完全验证还是仅进行唯一性检查。

    ```
    class Room(models.Model):
        def save(self, *args, **kwargs):
            self.full_clean()
            super(Room, self).save(*args, **kwargs) 
    ```

3.  使用 Django [pre_save](https://docs.djangoproject.com/en/dev/ref/signals/#pre-save)信号处理程序，它将在保存之前自动执行验证。这提供了一种非常简单的方法来在现有模型上添加验证，而无需任何额外的模型代码。

    ```
    # In your models.py
    from django.db.models.signals import pre_save

    def validate_model_signal_handler(sender, **kwargs):
        """
        Signal handler to validate a model before it is saved to database.
        """
        # Ignore raw saves.
        if not kwargs.get('raw', False):
            kwargs['instance'].full_clean()

    pre_save.connect(validate_model_signal_handler,
      sender=Room,
      dispatch_uid='validate_model_room') 
    ```

# c# - Response.Redirect(URL, false) - 重定向后事件管理

> ID：14470588
> 
> 赞同：6
> 
> 时间：2013-01-23T00:37:25.723
> 
> 标签：c#, asp.net, session, response.redirect

> **可能重复：**
> [Response.Redirect 导致 System.Threading.ThreadAbortException](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception)

ASP/C#.NET（Web 表单，不是 MVC）

更新：刚刚找到一个相关的帖子（可能是重复的）：[为什么 Response.Redirect 会导致 System.Threading.ThreadAbortException？](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception)

~ ~ ~

经过一番研究，我了解到，一般来说，在使用 Response.Redirect() 时，最好将第二个参数传递 FALSE，以避免 System.Threading.ThreadAbortException。（[http://blogs.msdn.com/b/tmarq/archive/2009/06/25/correct-use-of-system-web-httpresponse-redirect.aspx](http://blogs.msdn.com/b/tmarq/archive/2009/06/25/correct-use-of-system-web-httpresponse-redirect.aspx)）

我的问题是，“当为第二个参数传递 false 时，是否有推荐的方法（模式）来管理（即跳过）重定向后触发的页面事件中的处理？”

当我在 Page_Load() 中检查和重定向过期会话时，这对我来说主要是一个问题。每次重定向时都必须设置一个“_Redirected”标志，然后在每个事件的顶部检查该标志，这似乎非常乏味。过去我不必担心这一点，因为我总是将 TRUE 传递给第二个参数，不知道更好。

下面是一些代码，显示了我不想做的事情（在处理每个事件之前检查 _Redirected）。也许我正在寻找的是更好的会话过期处理模式。

任何有关如何改进此处理的建议将不胜感激。

```
private bool _Redirected = false;    

protected void Page_Load(object sender, EventArgs e)
{
  if (Session["key"] == null)
  {
    Response.Redirect("SessionExpired.aspx", false);
    Context.ApplicationInstance.CompleteRequest();

    _Redirected = true;
  }       
}

protected void Page_PreRender(object sender, EventArgs e)
{
  if (!_Redirected)
  {
    // do Page_PreRender() stuff...
  }
}

protected void Button1_Click(object sender, EventArgs e)
{
  if (!_Redirected)
  {
    // do Button1_Click() stuff...

    Response.Redirect("Button1Page.aspx", false);
    Context.ApplicationInstance.CompleteRequest();

    _Redirected = true;
  }
}

protected void Button2_Click(object sender, EventArgs e)
{
  if (!_Redirected)
  {
    // do Button2_Click() stuff...

    Response.Redirect("Button2Page.aspx", false);
    Context.ApplicationInstance.CompleteRequest();

    _Redirected = true;
  }
} 
```

~ ~ ~

[01/24/2013] 响应[https://stackoverflow.com/users/2424/chris-lively](https://stackoverflow.com/users/2424/chris-lively)（谢谢，顺便说一句），这里是简化的代码，我相信它与您测试的类似。我仍然看到 Button1_Click() 在 Response.Redirect(url, false) 和 Page_Load() 中的 .CompleteRequest() 之后在回发时执行。

```
protected void Page_Load(object sender, EventArgs e)
{
  if (this.IsPostBack)
  {
    Response.Redirect("Redirect.aspx", false);
    Context.ApplicationInstance.CompleteRequest();
  }
}

protected void Button1_Click(object sender, EventArgs e)
{
  Response.Write("Button1 clicked!");
} 
```

对我在更新中提到的类似帖子的此响应[https://stackoverflow.com/a/12957854/1530187](https://stackoverflow.com/a/12957854/1530187)证实了这种行为。

知道我做错了什么会导致页面在重定向后继续执行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T00:45:39.807

您引用了一篇相当不错的文章，但您的代码并未反映作者建议的“正确”执行此操作的方法。即：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (Session["key"] == null)
  {
    Response.Redirect("SessionExpired.aspx", false);
    Context.ApplicationInstance.CompleteRequest();
  }       
} 
```

***更新***
我整理了一个非常简单的示例应用程序。它只有两个表单页。
第一页上有一个按钮，它做了一个 response.write。我在这条线上放了一个断点。在 page_load 方法中，我放置了一个重定向，然后立即调用`CompleteRequest`. 如果页面回发，则设置为发生此重定向。

第二页所做的只是发出“你好”

然后我运行了应用程序，它调出了第一个表单。我点击了按钮。断点从未被击中，它被重定向。这正是我所期望的。即 page_load 方法捕获回发，执行重定向并立即完成请求，无需进一步处理页面。

这意味着绝对没有理由将`if (!_Redirected)`代码放在每次按钮单击中。您需要做的就是复制/粘贴我在此答案顶部的代码。它将阻止调用这些点击。

# java - Firefox Selenium 驱动程序无法任意加载

> ID：14470591
> 
> 赞同：0
> 
> 时间：2013-01-23T00:37:35.693
> 
> 标签：java, firefox, selenium

我有这个代码来创建我的网络驱动程序。
现在，如果我逐个创建驱动程序，则此代码可以正常工作
。在多个线程上创建这些驱动程序时会出现问题。

```
public static WebDriver getConfiguredWebDriver(.....)
  WebDriver driver = null;
  DesiredCapabilities cap = new DesiredCapabilities();
  if(ffp != null) {
    ffp.setPreference("general.useragent.override", getRandomizedUASettings(rand, UserAgentList));
  }
  driver = new FirefoxDriver(null, ffp, cap);
  //driver = new FirefoxDriver(); also gives an error of the same kind during multithreading
  return driver;
} 
```

它给了我这个错误

“Thread-4”org.openqa.selenium.WebDriverException：无法连接到端口 7057 上的二进制 FirefoxBinary(C:\Program Files (x86)\Mozilla Firefox\firefox.exe)；进程输出如下：null 构建信息：版本：'2.28.0'，修订：'18309'，时间：'2012-12-11 20:21:45' 系统信息：os.name：'Windows 7'，os.拱门：'amd64'，os.version：'6.1'，java.version：'1.6.0_26'

线程代码是

```
while(...) {
  ....... //
  FirefoxProfile ffp = new FirefoxProfile();
  DataEntryThread t = new DataEntryThread(parentFrame, lead, new ProxySettings(proxySettings), ffp, UserAgentList);
  t.start();
  ....... //
} 
```

错误随机出现在任何线程上，甚至出现在端口号上。这里有什么问题？如何实现在不同线程上加载多个 firefox 驱动程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:04:56.813

我找到了解决这个问题的方法..只需修改上述代码的一部分

```
boolean driverCreated = false;
int retryCnt = 3;
int count = 0;
while(!driverCreated && count < retryCnt) {
  try {
    driver = new FirefoxDriver(null, ffp, cap);
    driverCreated = true;
    System.out.println("Driver Created");
  } catch (Exception e) {
    retryCnt++;
  }
}
if(driverCreated == false) { return null; } 
```

基本上，我认为使用不同线程加载的驱动程序正在同时访问相同的 firefox 二进制文件，这会产生错误，但我仍然不确定。

# c# - Awesomium WebSessions 是否共享磁盘缓存？

> ID：14470594
> 
> 赞同：0
> 
> 时间：2013-01-23T00:38:19.783
> 
> 标签：c#, winforms, awesomium

使用 Awesomium.NET 1.7 RC3，如果我像这样在我的应用程序中创建 a`WebSession`和 a `WebView`：

```
var webSession = 
    WebCore.CreateWebSession("C:\\AwCache", new WebPreferences{...});
var webView = 
    WebCore.CreateWebView(500, 500, webSession); 
```

...然后**退出**应用程序，下次我的应用程序启动并为缓存创建`WebSession`使用相同位置的缓存数据（图像、css 等）是否可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:02:58.343

我相信缓存仍然可用。虽然我在缓存方面的大部分经验都在 Awesomium 1.6.6 中，并且是通过`WebCoreConfig.UserDataPath`在调用时设置属性来完成的`WebCore.Initialize()`，但一些测试表明它仍然可用。

如果您查看第一次运行代码并访问网页时创建的文件（我选择 Flickr 只是为了页面上有合理数量的图像），您会看到在您的 AwCache 文件夹中，还有另一个文件夹称为“缓存”。该文件夹包含 4 个“data_X”文件、一个索引文件和一些“f_XXXXXX”文件。另一件值得注意的事情是在第一次运行应用程序时生成这些文件的速度有多快。当您重新运行应用程序时，只要您访问相同的 URL，就不会创建新文件，但 data_X 文件、索引文件和可能几个 f_X 文件的时间戳会得到更新，但许多 f_X 文件保持不变。文件更改也很快发生。

我相信 f_X 文件是该站点的实际缓存项目，因为访问不同的站点会导致 f_X 文件的数量增加，而重新访问同一站点则不会。

显然，这远不是一个实际的答案，但基于这些观察，我认为缓存被维护似乎很明显。最后一件，如果您查看 Awesomium 1.7[文档](http://awesomium.com/docs/1_7_rc3/sharp_api/)，`CreateWebSession(WebPreferences)`以粗体指定它是内存缓存，而`CreateWebSession(string, WebPreferences)`您调用的方法则没有。

# ruby-on-rails - Emberjs 配置 Assetfile 以扫描嵌套的 Template 文件夹

> ID：14470596
> 
> 赞同：0
> 
> 时间：2013-01-23T00:38:21.717
> 
> 标签：ruby-on-rails, ruby, ember.js

我需要在服务器启动时扫描并编译一个嵌套的模板文件夹。为此，我正在使用 ember-skeleton。Assetfile 中的以下例程可以很好地完成扫描和编译把手文件的工作，只要它们都在模板文件夹中。

```
 match 'templates/**/*.handlebars' do
    filter HandlebarsFilter
    filter TemplateFilter,
    #filter LoaderFilter,
      :module_id_generator => proc { |input|
        #input.path.sub(/^templates\//, "#{APPNAME}/~templates/").sub(/\.handlebars$/, '')
        input.path.sub(/^templates\//, "").sub(/\.handlebars$/, '')
      }
    if ENV['RAKEP_MODE'] == 'production'
      uglify {|input| input}
    end
    concat 'app.js'
  end 
```

我的文件列表越来越大，我想将文件分类到文件夹中，例如

```
templates/products/
templates/products/index.handlebars
templates/products/new.handlebars                  
templates/products/edit.handlebars                  

templates/files/
templates/files/index.handlebars
templates/files/new.handlebars
templates/files/edit.handlebars 
```

我想修改上面列出的代码，以便能够更深入地扫描车把文件，并对条目执行过滤器。对于熟悉 Ruby 或 Rails 的人来说，这应该很容易。

我尝试了以下没有运气，也有人可以告诉我如何调试这样的例程，我试图`print input`在例程中做一个，但是服务器在我身上崩溃了:)

```
 match 'templates/**/**/*.handlebars' do 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:18:32.827

原来`match 'templates/**/*.handlebars' do`已经在处理嵌套文件夹的扫描并且不需要修改它，我所要做的就是在我的模板名称中反映层次结构

```
templateName: "product/index" 
```

# jquery - JQuery 如果不在悬停区域

> ID：14470600
> 
> 赞同：0
> 
> 时间：2013-01-23T00:38:35.903
> 
> 标签：jquery, jquery-animate, jquery-hover

嗨，

我对**JQuery hover()**有疑问。

当我将鼠标悬停在 上时`.sectionUpImage`，它会触发动画。问题是当我离开那个区域时，动画仍在运行，它会一直运行到它完成，然后它会恢复到原始状态。

所以问题是当我不悬停**.sectionUpImage**时，我希望动画**停止**并返回到它的**原始状态**。

代码：

```
$(document).ready(function(){

    $('.sectionUpImage').hover(function(){

        $('.sectionUp').animate({"height": "+=314px"}, "slow");

    },function(){

        $('.sectionUp').animate({"height": "-=314px"}, "slow");

    });

}); 
```

如何应用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:40:00.207

添加停止（）；

```
 $('.sectionUp').stop().animate({"height": "+=314px"}, "slow"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T00:44:25.587

Adam 很擅长使用`stop()`来阻止动画继续播放。但是，由于您使用的是相对高度，您会遇到根据半动画元素的当前高度计算新高度的问题。两种解决方法：

一：切换到绝对高度。您当前的 jQuery 将完美运行。就像是：

```
$(document).ready(function(){
    $('.sectionUpImage').hover(function(){
        $('.sectionUp').animate({"height": "314px"}, "slow");
    },function(){
        $('.sectionUp').animate({"height": "0px"}, "slow");
    });
}); 
```

二：使用`stop( false, true )`。这将在开始新动画之前将中断的动画跳转到其最终状态。这可能看起来有点刺耳，但至少可以防止任何不正确的最终高度。

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# django - 调试 = 真正的 Django

> ID：14470601
> 
> 赞同：33
> 
> 时间：2013-01-23T00:38:40.240
> 
> 标签：django

在生产环境中，为什么我听到有人说离开 DEBUG = True 有潜在危险？

有人可能利用此安全问题在我的服务器上执行恶意任务的一个示例是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-23T00:42:21.163

[https://docs.djangoproject.com/en/dev/ref/settings/#debug](https://docs.djangoproject.com/en/dev/ref/settings/#debug)

“永远不要在启用调试的情况下将站点部署到生产环境中。

你抓到了吗？切勿在启用调试的情况下将站点部署到生产环境中。

调试模式的主要功能之一是显示详细的错误页面。如果您的应用在 DEBUG 为 True 时引发异常，Django 将显示详细的回溯，包括有关您的环境的大量元数据，例如所有当前定义的 Django 设置（来自 settings.py）。”

基本上，这是一个巨大的安全漏洞。

它也浪费了大量的内存：

“同样重要的是要记住，当打开 DEBUG 运行时，Django 会记住它执行的每个 SQL 查询。这在调试时很有用，但它会迅速消耗生产服务器上的内存。”

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-23T00:46:40.447

Django 尽最大努力混淆调试页面中的安全信息，但它并不完美。

默认情况下，任何包含 KEY（从 Django 1.4 开始）、SECRET 等的设置都会自动替换为***。但是，如果有人决定发挥创意并将 SECRET 称为 SECURE_STR 或其他名称，它将显示为纯文本！你想要那个吗？此外，对于某人轻松侵入您的服务器来说，这只是更多的素材。

# c# - mvc 路由的本地化

> ID：14470606
> 
> 赞同：0
> 
> 时间：2013-01-23T00:39:12.240
> 
> 标签：c#, asp.net-mvc, localization, asp.net-mvc-4, asp.net-mvc-routing

任何人都可以推荐一个管理路线本地化的 MVC 库吗？

例如，作为 url [http://www.mywebsite.com/controller-english/action-english](http://www.mywebsite.com/controller-english/action-english)和[http://www.mywebsite.com/controller-french/controller-french](http://www.mywebsite.com/controller-french/controller-french)应该都路由到相同的控制器操作。如果它是法语 url，文化是这样设置的，对于英语版本也是如此。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:47:56.050

我以前从未本地化过路由，但这个 NuGet 项目可能会有所帮助：[AttributeRouting](http://nuget.org/packages/AttributeRouting)。我认为您可以只对一种语言使用普通路由，然后为其他语言添加路由属性。您可能必须对您支持的语言进行硬编码，但它应该可以工作。

# ruby-on-rails - 使用 Security Extension for Devise (RoR) 注册时出现两次错误“邮件已被接收”

> ID：14470607
> 
> 赞同：5
> 
> 时间：2013-01-23T00:39:17.783
> 
> 标签：ruby-on-rails, devise

我正在使用带有安全扩展的设计来验证强密码。

当我尝试使用已接收的电子邮件注册帐户时，我在错误哈希中两次收到错误“电子邮件已被接收”。

我的用户模型如下所示：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  # :trackable deleted
  devise :database_authenticatable, :registerable, :secure_validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :firstname, :lastname, :password, :password_confirmation, :remember_me
end 
```

如果没有安全扩展（`:validatable`而不是`:secure_validatable`），我只会收到一次错误。

我究竟做错了什么？

* * *

PS奖金问题：

我如何首先防止出现某些错误？我是否必须操纵设计的 RegistrationsController 或者是否有此选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:32:58.713

有同样的问题。

检查这是否有帮助：[https ://groups.google.com/forum/?fromgroups=#!topic/plataformatec-devise/S0nxv7BK10M](https://groups.google.com/forum/?fromgroups=#!topic/plataformatec-devise/S0nxv7BK10M)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T12:19:57.807

发生这种情况的真正原因是 devise_security_extension 两次定义了电子邮件唯一性验证器。

第一次是为默认登录字段定义唯一性验证器。第二次是为电子邮件字段定义唯一性验证器。

当您的默认登录字段是电子邮件时（这很常见），验证器会被定义两次。

我通过将以下代码放入初始化程序文件来解决此问题。当电子邮件是您的登录属性时，它可以防止创建不必要的验证器。

```
module Devise
  module Models
    module SecureValidatable
      module ClassMethods
        private

        def has_uniqueness_validation_of_login?
          return true if login_attribute == :email
          super
        end
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-10T07:47:42.677

您可能还激活了 :validatable 模块。如果您在设计设置中提到它， :secure_validatable 会跳过那些基本检查（电子邮件：存在、唯一性和密码：存在）并且它只显示一次错误。

设计：database_authenticable，：registerable，：secure_validatable，：validatable

# android - 让客户端服务器在 android 中工作，我应该使用不同的 IP 地址吗？

> ID：14470608
> 
> 赞同：0
> 
> 时间：2013-01-23T00:39:29.260
> 
> 标签：android, sockets, networking, client

我正在使用从网站获得的以下代码在 android 中设置客户端服务器。一台 Android 平板电脑正在运行服务器代码，而另一台 Android 平板电脑正在运行客户端代码。该代码已完全粘贴，并且应该像对其他人一样有效，但是我无法让它在我的情况下工作。两台平板电脑都连接到wifi

人们告诉我为什么它不起作用有两个原因。提到的一个原因是我必须在我的路由器上设置端口转发，另一个经常提到的原因是我必须在服务器代码中设置不同的 IP 地址。但是我不知道要设置什么IP地址。

有任何想法吗？

服务器代码

```
 public class ServerActivity extends Activity {

private TextView serverStatus;

// default ip
public static String SERVERIP = "10.0.2.15";

// designate a port
public static final int SERVERPORT = 8080;

private Handler handler = new Handler();

private ServerSocket serverSocket;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.server);
    serverStatus = (TextView) findViewById(R.id.server_status);

    SERVERIP = getLocalIpAddress();

    Thread fst = new Thread(new ServerThread());
    fst.start();
}

public class ServerThread implements Runnable {

    public void run() {
        try {
            if (SERVERIP != null) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Listening on IP: " + SERVERIP);
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);
                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Connected.");
                        }
                    });

                    try {
                        BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                        String line = null;
                        while ((line = in.readLine()) != null) {
                            Log.d("ServerActivity", line);
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    // do whatever you want to the front end
                                    // this is where you can be creative
                                }
                            });
                        }
                        break;
                    } catch (Exception e) {
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                            }
                        });
                        e.printStackTrace();
                    }
                }
            } else {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Couldn't detect internet connection.");
                    }
                });
            }
        } catch (Exception e) {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    serverStatus.setText("Error");
                }
            });
            e.printStackTrace();
        }
    }
}

// gets the ip address of your phone's network
private String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) { return inetAddress.getHostAddress().toString(); }
            }
        }
    } catch (SocketException ex) {
        Log.e("ServerActivity", ex.toString());
    }
    return null;
}

@Override
protected void onStop() {
    super.onStop();
    try {
         // make sure you close the socket upon exiting
         serverSocket.close();
     } catch (IOException e) {
         e.printStackTrace();
     }
}

 } 
```

客户代码

```
public class ClientActivity extends Activity {

    private EditText serverIp;

    private Button connectPhones;

    private String serverIpAddress = "";

    private boolean connected = false;

    private Handler handler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.client);

        serverIp = (EditText) findViewById(R.id.server_ip);
        connectPhones = (Button) findViewById(R.id.connect_phones);
        connectPhones.setOnClickListener(connectListener);
    }

    private OnClickListener connectListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (!connected) {
                serverIpAddress = serverIp.getText().toString();
                if (!serverIpAddress.equals("")) {
                    Thread cThread = new Thread(new ClientThread());
                    cThread.start();
                }
            }
        }
    };

    public class ClientThread implements Runnable {

        public void run() {
            try {
                InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
                Log.d("ClientActivity", "C: Connecting...");
                Socket socket = new Socket(serverAddr, ServerActivity.SERVERPORT);
                connected = true;
                while (connected) {
                    try {
                        Log.d("ClientActivity", "C: Sending command.");
                        PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                    .getOutputStream())), true);
                            // where you issue the commands
                            out.println("Hey Server!");
                            Log.d("ClientActivity", "C: Sent.");
                    } catch (Exception e) {
                        Log.e("ClientActivity", "S: Error", e);
                    }
                }
                socket.close();
                Log.d("ClientActivity", "C: Closed.");
            } catch (Exception e) {
                Log.e("ClientActivity", "C: Error", e);
                connected = false;
            }
        }
    }
     } 
```

日志输出

```
01-22 18:37:40.100: E/ClientActivity(19568): C: Error
01-22 18:37:40.100: E/ClientActivity(19568): java.net.ConnectException: failed to connect to /10.0.2.15 (port 8080): connect failed: EHOSTUNREACH (No route to host)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connect(IoBridge.java:114)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.Socket.startupSocket(Socket.java:566)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.net.Socket.<init>(Socket.java:225)
01-22 18:37:40.100: E/ClientActivity(19568):    at com.example.client.ClientActivity$ClientThread.run(ClientActivity.java:60)
01-22 18:37:40.100: E/ClientActivity(19568):    at java.lang.Thread.run(Thread.java:856)
01-22 18:37:40.100: E/ClientActivity(19568): Caused by: libcore.io.ErrnoException: connect failed: EHOSTUNREACH (No route to host)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.Posix.connect(Native Method)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
01-22 18:37:40.100: E/ClientActivity(19568):    at libcore.io.IoBridge.connect(IoBridge.java:112) 
```

# cuda - 无论如何可以避免cuda分析中的这种序列化行为？

> ID：14470609
> 
> 赞同：0
> 
> 时间：2013-01-23T00:39:31.967
> 
> 标签：cuda, nvvp

根据[CUDA 流不重叠](https://stackoverflow.com/questions/6070392/cuda-streams-not-overlapping)，“分析器将序列化流以获取准确的时序数据”。现在的问题是，是否有办法避免在 cuda 分析（比如 nvvp）中出现这种序列化行为？我正在使用 Fermin M2090 和 cuda-4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:45:49.033

Visual Profiler 5.0（包括 nvprof 和 CUPTI）和 Nsight Visual Studio Edition 2.0 及更高版本（>2 年）支持 Fermi 和 Kepler 设备的并发内核跟踪。

# ios - GCDAsyncUDPSocket 源地址返回 null

> ID：14470613
> 
> 赞同：2
> 
> 时间：2013-01-23T00:40:08.233
> 
> 标签：ios, objective-c, udp, gcdasyncsocket

google代码问题镜像：[https ://groups.google.com/forum/#!topic/cocoaasyncsocket/grhjZSMLr3U](https://groups.google.com/forum/#!topic/cocoaasyncsocket/grhjZSMLr3U)

这是我正在读取响应的代码：

```
- (void)init {
    udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *error = nil;
    if (![udpSocket bindToPort:UDP_PORT error:&error]) { //not connecting to host
        return;
    }
    if (![udpSocket beginReceiving:&error]) {
        return;
    }
}

- (void)udpSocket:(GCDAsyncUdpSocket *)sock
   didReceiveData:(NSData *)data
      fromAddress:(NSData *)address
withFilterContext:(id)filterContext
{
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"got data from broadcast: %@",msg);

    NSString *src = [[NSString alloc] initWithData:address encoding:NSUTF8StringEncoding];
    NSLog(@"got src from broadcast: %@",src); 
} 
```

这是发送 udp bcast 的代码：

```
- (void)send {
    [udpSocket enableBroadcast:YES error:nil];
    [udpSocket sendData:[self pack:@"134.71.146.49"] toHost:UDP_BCAST_ADDR port:UDP_PORT withTimeout:-1 tag:UDP_BROADCAST_SEND];
} 
```

port 和 bcast addr 分别是 55555 和 255.255.255.255。

控制台输出：

```
got data from broadcast: 134.71.146.49
got src from broadcast: (null)

got data from broadcast: 134.71.146.49
got src from broadcast: (null) 
```

十六进制：

```
 data:     <3133342e 37312e31 34362e34 39>
 address:  <1002d903 864793dd 00000000 00000000> 
```

**为什么这里的源地址为空？或者为什么它格式不正确？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-23T21:13:03.720

返回给你的地址字段实际上是一个扁平化为 NSData 对象的 sockaddr_in 结构。

这是结构：

```
struct sockaddr_in {
    __uint8_t   sin_len;
    sa_family_t sin_family;
    in_port_t   sin_port;
    struct  in_addr sin_addr;
    char        sin_zero[8];
}; 
```

您可以从地址对象的显示中看到，第一个字段 sin_len 是 0x10 或 16 个字节。这就是 sockaddr_in 结构的长度。您可以使用它来判断地址对象是指 IPv4 对象还是 IPv6 对象。IPv6 对象将使用 sockaddr_in6 结构并具有更长的长度。

您可以将该 NSData 对象复制到 sockaddr_in 结构中，或者只提取正确偏移量（4 到 7）的字节以获得看起来更熟悉的 4 字节源地址。

# git - 之前分支或标记，或者在成功 git pull 后准备潜在的构建失败？

> ID：14470618
> 
> 赞同：2
> 
> 时间：2013-01-23T00:40:50.693
> 
> 标签：git, undo

假设我有一个应用程序在 Git 拉取成功后构建失败（例如编译失败）。我怎样才能“取消”合并并恢复到以前的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:14:44.697

正如 vonbrand 所指出的，您可以看到最近的 reflog 条目：

```
git reflog 
```

一旦你知道大约有多远，比如说 10 次提交，你就会发出一个*交互式*rebase 命令，就像 Steven Penny 指出的那样：

```
git rebase -i HEAD~3 
```

这会调出一个编辑器。在其中，您可以选择完全删除提交或对每个提交执行其他操作。您在编辑器中删除的每一行都将被删除。内联的 Git 注释非常有用，但这很重要，请记住我在这里提到过。它看起来像这样，可能混合了好的和坏的提交：

```
pick 8042b55 Added important file
pick 3459cce Add junk files
pick cb2e26d Adding another change I want to keep
pick b00221f Add stuff I won't want to keep in the file.

# Rebase b0fd283..b00221f onto b0fd283
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted. 
```

请记住将您的更改推送到服务器。'git pull' 将失败，直到你这样做。

这是一个半危险的命令，您可以在 rebase 成功强制将更改推送到原点后使用：

```
git push -f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:48:39.653

我更喜欢使用`git rebase`这项工作，因为会弹出一个不错的列表，我可以在其中选择要摆脱的提交。选择要列出的提交数量，然后像这样调用

```
git rebase -i HEAD~3 
```

样品清单

```
pick aa28ba7 Sanity check for RtmpSrv port
pick c26c541 RtmpSrv version option
pick 58d6909 Better URL decoding support 
```

然后 git 将删除您删除的任何行的提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:54:15.347

看一下`git reflog`，它记录了对存储库所做的更改。如果你最后一次搞砸了，你想回到`HEAD@{1}`.

最好找出*为什么*它不再构建。也许上游对 Makefile 中的依赖关系不小心，并且您正在尝试将旧对象与新编译的对象结合起来。做一个完整的清洁，通常`make clobber`或`make distclean`或一些这样的，甚至是严厉的`git clean`。

无论如何，我会尝试为您免费获得的代码回馈一些东西，即使它只是一份详细的错误报告。

# javascript - django 修改模板中的请求参数

> ID：14470619
> 
> 赞同：1
> 
> 时间：2013-01-23T00:41:00.023
> 
> 标签：javascript, ajax, django, django-templates, django-views

所以我写了一个返回查询结果的应用程序。假设查询 URL 是`/query/?A=a&B=b`

现在我想在我的结果页面中添加一个“排序依据”按钮，以允许用户按时间或类型对结果进行排序。本质上只允许用户访问`/query/?A=a&B=b&sorted=time`或`/query/?A=a&B=b&sorted=type`

`sorted=`最简单的方法是在当前 URL 之后追加。例如`<a href = "{{ request.get_full_path }}&sorted=time">`但问题是，如果用户首先按时间排序，然后按类型排序，您将拥有`/query/?A=a&B=b&sorted=type&sorted=time`

我想我可以做一些花哨的字符串操作，但我不知道我是否可以用 django 模板语言来做，我想有更好的方法来做。应该有一个地方我可以修改 GET 请求并让页面刷新。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:16:57.167

具有相同名称的两个`GET`变量是不明确的。您可以为不同类型的排序定义不同的变量。排序有两个选项，根据上下文升序或降序，您还需要这些值，以便用户可以返回默认排序。

```
/query/?A=a&B=b&sort_type=asc&sort_time=desc 
```

然后在视图中：

```
sort_type = request.GET.get('sort_type', '')
sort_time = request.GET.get('sort_time', '')

qs = MyModel.objects.all()

if sort_type:
    if sort_type == 'asc':
        qs = qs.order_by('type')
    elif sort_type == 'desc':
        qs = qs.order_by('-type')

# same goes with sort_time
# ...
# pass sort_type and sort_type or all get variables in the context to generate url in template 
```

现在在模板中：

```
<a href = "{{ request.get_full_path }}?&sort_time={{sort_time}}&sort_type={{sort_type}}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:07:49.617

您可能想查看[django-tables2 的解决方案](https://github.com/bradleyayers/django-tables2/blob/master/django_tables2/templatetags/django_tables2.py#L125)（如果您在表格中显示此数据，您可能只想查看一般的 django-tables2）。

# wpf - ItemsControl 与其项目源不一致 - 发生在嵌套的 ListView 中

> ID：14470621
> 
> 赞同：1
> 
> 时间：2013-01-23T00:41:08.157
> 
> 标签：wpf, xaml, mvvm

此给定页面显示特定州的所有城市。我在 ListView 中显示 ListView。外部 ListView 显示城市列表。内部 ListView 显示附加到每个特定城市的所有注释。

一切正常加载。我可以添加一个注释，它被添加到数据库中。但是，添加注释后，点击 NotesListView 中的滚动条会导致异常：

> ItemsControl 与其项目源不一致

我理解这个问题......附在 ListView 上的笔记列表变得不同步，在我向 viewmodel 中的 city.Notes 属性添加一个笔记后......但是我如何强制这个 ListView 刷新？

这是我的 XAML（为简洁而编辑）：

```
<ListView x:Name="CityListView" ItemsSource="{Binding CityDetails, Mode=OneWay}">
<!--City Name and other city details. go here-->
   <ListView  x:Name="NotesListView" ItemsSource="{Binding Notes}">
    <TextBlock Text="{Binding Path=Note}" />
</ListView>
<StackPanel>
  <TextBlock Text="Add Note:" />
  <TextBox Text="{Binding Path=DataContext.Note, RelativeSource={RelativeSource AncestorType=UserControl}}" />
  <Button Content="ADD NOTE" Command="{Binding Path=DataContext.AddNoteCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" />

</StackPanel>
</ListView> 
```

* * *

这是 ViewModel 中与 AddNoteCommand 挂钩的 AddNote() 方法：

```
Protected _stateService As IStateService
Protected _state As State

Protected Sub OnAddNote(city As City)
        Dim note As Note = Nothing

        If Not String.IsNullOrWhiteSpace(Me.Note) Then
            note = New Note() With {
                .Note = Me.Note,
                .NoteDate = DateTime.Now,
            }

            city.Notes.Add(note)

            _stateService.SaveExistingState(_state)
            ' this saves the note, since _state contains:
            ' Property Cities As ICollection(Of City)
            ' and the city object passed into this method belongs to that collection...

            RaisePropertyChanged(Function() city.Notes)
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-12T08:52:48.650

In C# I solved this with:

```
Dispatcher.CurrentDispatcher.Invoke(
    new Action<Note>(item => city.Notes.Add(item)),
    DispatcherPriority.Background,
    note); 
```

# javascript - Web 字体性能 - Boot.getFont

> ID：14470622
> 
> 赞同：0
> 
> 时间：2013-01-23T00:41:10.053
> 
> 标签：javascript, fonts

我在[这里](http://www.artzstudio.com/2012/02/)阅读了有关 Web 字体性能的文章，开发人员“ **arztstudio ”在 JavaScript 中制作了一个名为**[Boot.getFont](http://www.artzstudio.com/2012/02/)的字体加载器。

Github：[https ://github.com/artzstudio/Boot](https://github.com/artzstudio/Boot)

好吧，我没有测试它，但他的图表显示他的加载器是在放置系统字体之后。

如果您能分享您的知识并发表一些关于 Web 字体性能的评论，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T10:21:43.473

[Google Developers 网站](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/webfont-optimization?hl=en)上有一些关于 Web 字体性能的精彩文章。

我最喜欢的一篇关于 Web 字体和性能的文章也在 Filament Group 网站上，标题为“[我们如何负责任地使用 Web 字体，或者，避免使用@font-face-palm](http://www.filamentgroup.com/lab/font-loading.html) ”，我建议您阅读一下。

如果您希望异步加载 Web 字体，请查看这个[Github 存储库](https://github.com/typekit/webfontloader)。它是一个 Web 字体加载器，可在通过 @font-face 使用链接字体时为您提供更多控制。

最后，如果您对 Web 性能文章列表感兴趣，请查看此站点[deanhume.github.io/typography](http://deanhume.github.io/typography/font-performance.html)。我尝试定期更新！

# php - 在 xampp、windows 中启用 curl

> ID：14470626
> 
> 赞同：1
> 
> 时间：2013-01-23T00:41:37.437
> 
> 标签：php, curl, xampp

尝试在 Windows 环境中启用 xampp 3.0.12 中的 curl。

更新了`php.ini`php文件夹中的启用curl，文件夹中没有`php.ini`文件`apache/bin`。

`phpinfo()`说：

*   加载的配置文件：`C:\xampp\php\php.ini`
*   卷曲支持：enbaled
*   卷曲信息：7.24.0

当我尝试运行`http_get()`命令 php 说：

> 致命错误：调用未定义函数 http_get()

多次重新启动 windows 和 xampp 以更新更改。

将不胜感激一些建议，因为我在网上搜索了类似的主题，但无法获得任何进一步的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:44:45.273

请注意，该函数`http_get()`属于[pecl http](http://php.net/manual/de/http.install.php)扩展而不属于 curl 扩展。请参阅 curl 扩展的[文档](http://php.net/manual/en/book.curl.php)以了解如何使用它通过 http 检索文档。您还会在[stackoverflow上找到很多帖子](https://stackoverflow.com/search?q=php%20curl)

另请注意，该函数[`file_get_contents()`](http://php.net/manual/de/function.file-get-contents.php)可用于以非常简单的方式通过 http 获取文档。尽管它是有限的，但它适用于许多情况。要检索页面，您可以发出：

```
file_get_contents('http://www.server.com/page.html'); 
```

# c# - 编辑器模板和显示模板的区别

> ID：14470627
> 
> 赞同：2
> 
> 时间：2013-01-23T00:41:41.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在使用一个 mvc 4 应用程序并且对某些东西有些困惑。

编辑器模板和显示模板有什么区别？有人可以向我解释一下应该在哪里包含什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:49:46.547

当你有一个类型时，你可以使用编辑器和显示模板控制它在浏览器上的显示方式。

编辑器模板允许您控制类型在表单上的显示方式（例如，如果您希望它显示为文本框、复选框或其他方式）。显示模板允许您控制在列出非表单内容（例如列表页）时该类型的显示方式。

您可以拥有自己复杂类型的编辑器/控件模板。这是 Dalsoft 的链接，可以帮助您 - [http://www.dalsoft.co.uk/blog/index.php/2010/04/26/mvc-2-templates/](http://www.dalsoft.co.uk/blog/index.php/2010/04/26/mvc-2-templates/)

# html - Div 向左浮动，Div 容器不增加大小

> ID：14470632
> 
> 赞同：0
> 
> 时间：2013-01-23T00:42:02.883
> 
> 标签：html, css-float, clearfix

我想在一个容器 div 中制作两个 div，一个向左浮动，一个向右浮动。左侧 div 包含新闻日期、标题和新闻内容，右侧 div 包含一个下拉按钮和框，其中包含与新闻帖子相关的媒体。

这是

问题是newsleft和newsright是浮动的，并且页面内容没有增加它的高度，我不想手动将高度放在CSS文档中：S有没有人可以帮助我？

谢谢，o0 Will Ryan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:43:41.263

浮动元素从常规流中移除。因此，父容器无法计算内容的高度。为了解决这个问题，我们需要清除浮动，这实际上意味着它将被放回流程中。

Nicholas Gallagher 做了一个巧妙的 clearfix 小技巧。基本上，您只需将类添加到父元素，所有包含的浮点数都将被清除。

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

```
 /**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:43:48.823

将溢出设置为隐藏在包含 div 的样式中，然后容器将增加其大小以适合子项。

# cocoa - OpenGL 纹理绑定失败

> ID：14470633
> 
> 赞同：0
> 
> 时间：2013-01-23T00:42:10.883
> 
> 标签：cocoa, opengl

我正在尝试启动并运行我的第一个阴影贴图（从[这里开始](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-16-shadow-mapping/ "这里")），但我遇到了一个非常奇怪的问题。这是导致错误的代码：

```
@interface HSOpenGLView() {
    GLuint shadowFramebuffer;
    GLuint shadowTexture;
}

@end

@implementation HSOpenGLView

- (void) drawRect:(NSRect)dirtyRect {

}

#pragma mark - Init

- (void) prepareOpenGL {
    [super prepareOpenGL];

    glEnable(GL_TEXTURE_2D);

    glGenFramebuffers(1, &shadowFramebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, shadowFramebuffer);

    // Depth texture. Slower than a depth buffer, but you can sample it later in your shader
    glGenTextures(1, &shadowTexture);
    glBindTexture(GL_TEXTURE_2D, shadowTexture);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT16, 1024, 1024, 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    //glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, shadowTexture, 0);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, shadowTexture, 0);
    //glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, shadowTexture);

    glDrawBuffer(GL_NONE); // No color buffer is drawn to.

    // Always check that our framebuffer is ok
    if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
        NSLog(@"Failed to create the shadow framebuffer! %u", glGetError());
    }
} 
```

此类是“NSOpenGLView”的子类。当它打印错误号时，结果是“0”。可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:22:34.957

`glReadBuffer(GL_NONE)`在您呼叫 之后添加呼叫`glDrawBuffer(GL_NONE)`。您需要指出您的 FBO 也没有用于读取操作的颜色缓冲区源。

# c - 在 C 中完全更改文件内容的最佳方法是什么？

> ID：14470641
> 
> 赞同：0
> 
> 时间：2013-01-23T00:42:55.517
> 
> 标签：c, file

我正在寻找更快的方法来完全更改文件的内容。例子后面就清楚了：

**一个.txt**：

> 我是一个非常长（也许不会太长）的文件。我很确定我可以更长。

运行程序后，根据用户的输入，它应该变成例如：

**用户输入**：

> 你好！

然后我尝试使用`fwrite`. 问题是文件的其余部分仍然存在，所以我有类似的东西：

**一个.txt**：

> 嗨！ma 非常非常长（可能不会太长）的文件。我很确定我可以更长

经过一些研究，这是我所做的：

```
FILE
    *a;

char
    buffer[500];

a = fopen("a.txt", "r");
    fread(buffer, sizeof(char), 500, a);

    printf("%s\n", buffer);

a = freopen("a.txt", "w", a);

    scanf("%s", buffer);

            // rewind(a);
            // fwrite(buffer, sizeof(char), strlen(buffer), a);

    fwrite(buffer, sizeof(char), 10, a);
    fclose(a); 
```

虽然它有效，但我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:48:32.763

“w”标志应该创建一个文件，如果存在则截断任何现有内容。这就是你需要的。

我以前没有使用`freopen()`过，但怀疑这与问题有关。我会尝试简单地关闭输入文件`fclose()`，然后再次使用`fopen()`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:51:41.623

您可以在截断文件`ftruncate()`后使用 POSIX 函数。`fwrite()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:15:19.600

我不知道使用便携式 C 的更好方法。

您的实施存在一些小问题。

您不会检查可能发生的任何错误，这在现实世界中很重要。特别是`freopen`可能会返回`NULL`错误，如果您将其分配给您的原始指针，您将失去`fclose`对该文件的能力。

您还应该记住，普通的 C 字符串以 0 字节结尾，但`fread`读取的是原始字节，因此您应该为该零字节保留空间并提供它。 `scanf`将写入零字节，因此您可以使用`strlen`来确定`fwrite`要写入的字节数，而不是硬编码 10。

finally`scanf`很容易模拟东西，但是如果用户提供超过 499 个字节，那么你现在拥有它的方式会导致缓冲区溢出，这可能会导致非常糟糕的事情。

# spring - Spring单元测试和对象重新注入

> ID：14470642
> 
> 赞同：2
> 
> 时间：2013-01-23T00:43:06.207
> 
> 标签：spring, unit-testing

在 Spring 中，在对象上运行一堆测试方法但在每次新测试方法调用之前重置/重新注入对象的最佳方法是什么？我尝试在下面的代码中执行此操作，但使用我当前的逻辑，该对象仅被创建和注入一次。

```
package com.bidtracker;

import org.junit.Test;
import org.junit.runner.RunWith;

import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.is;

import com.bidtracker.iface.BidTracker;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class BidTrackerTest {

    @Autowired
    BidTracker tracker;

    @Test
    public void shouldReturnHighestBidAmount1(){

    tracker.bidOnItem("itemB", "user1", 105);
    assertThat(tracker.getHighestBid("itemB").getAmount(),is(Integer.valueOf(105)));
    }

    @Test
    public void shouldReturnHighestBidAmount2(){

    tracker.bidOnItem("itemB", "user1", 39); 
    tracker.bidOnItem("itemB", "user1", 50); 

    assertThat(tracker.getHighestBid("itemB").getAmount(),is(Integer.valueOf(50)));

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:45:07.760

JUnit 有[`@Before`](http://junit.sourceforge.net/javadoc/org/junit/Before.html)注解，你可以在每次测试之前使用它来做任何初始化。

不过，我对你的情况很好奇。这是来自`@Test`文档：

> Test 注释告诉 JUnit，它所附加的公共 void 方法可以作为测试用例运行。为了运行该方法，JUnit 首先构造一个新的类实例，然后调用带注释的方法。测试抛出的任何异常都会被 JUnit 报告为失败。如果没有抛出异常，则假定测试成功。

我猜这个问题是bean是一个单例。它实际上再次被注入，但如果它被修改过，你使用的是相同的东西。您可以尝试[@DirtiesContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/annotation/DirtiesContext.html)注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:58:26.123

这里的问题是 Spring 测试支持默认缓存应用程序上下文，如果键的元素匹配（上下文名称、活动配置文件等），将重用缓存的上下文。要让 Spring 从缓存中删除上下文，您可以使用`@DirtiesContext`注释标记测试（在方法级别或测试类级别）。

# .htaccess - .htaccess 将 url 从子域重写到主域

> ID：14470644
> 
> 赞同：0
> 
> 时间：2013-01-23T00:43:23.820
> 
> 标签：.htaccess, redirect

我有一个类似的域：this.that.com（也可以从:) that.com/this 访问

我想做的是让服务器将所有请求从上述两个网址传输到：this.com

我需要它，所以如果我输入 this.that.com，它会自动转移到 this.com

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:49:56.143

要将所有请求重定向到`this.com`，匹配所有内容，这还不是`this.com`

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^this\.com$
RewriteRule .* http://this.com/$0 [R,L] 
```

如果您想重定向到主页，请忽略 URL 路径

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^this\.com$
RewriteRule .* http://this.com/ [R,L] 
```

如果一切正常，您可以切换到`R=301`重定向。

# jquery - 按下按钮重置页面

> ID：14470645
> 
> 赞同：0
> 
> 时间：2013-01-23T00:43:25.333
> 
> 标签：jquery, html, twitter-bootstrap

我知道这很简单，但我无法弄清楚当按下按钮时页面不会跳到顶部。我正在使用一些 jquery 在按下按钮时使图片淡入和淡出，但这会使页面跳到顶部！

我也在使用 twitter 引导程序

请在此处查看源代码，看看您是否能找到问题所在，我将不胜感激！

编辑：忘记来源！！！

[http://schechterbusiness.info/](http://schechterbusiness.info/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:53:06.303

*   显然`click me!`按钮不起作用并将您带到顶部，因为它们没有事件
*   将属性分配给按钮，而不是`id="fryLink"`div`id="benderLink"`

**编辑：**

我现在看到按钮正在工作，但页面跳转到顶部，所以你需要做的是替换：

```
...').click(function() { 
```

到：

```
...').click(function(e) {
   e.preventDefault(); 
```

并为 img 添加容器，例如：

```
<div id="container">
   <img id="img" src="" />
</div>
<style> #container { height: 300px; } </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T00:09:56.693

I had a similar issue and found that it disappeared by changing the button type: In Chrome at least type="submit" seems to reset the whole page when pressed whereas type="button" does not.

# c# - 带参数的 ASP.NET 报告

> ID：14470646
> 
> 赞同：1
> 
> 时间：2013-01-23T00:43:26.770
> 
> 标签：c#, asp.net, reporting-services

我有一个名为“Graph”的存储过程，它应该获取参数@Material 的值，并且我在 ASP.NET 中创建了一个报告，该报告应该使用来自存储过程的数据显示一个图表。

但是，当我尝试加载报告时，我得到：

> 报告处理过程中发生错误。无法创建到数据源“PhilipsMaterialsDataSet”的连接。ObjectDataSource“ObjectDataSource1”找不到没有参数的非泛型方法“GetData”。

我尝试了不同的解决方案，但都没有奏效。另外，我不确定是否应该在 ASP 代码中声明参数。

（顺便说一句，GetData 在这里无法识别，因为它有一个参数（@Material-来自存储过程），并且由于某种原因，它在没有任何参数的情况下被调用）

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Microsoft.Reporting.WebForms;

public partial class StatisticsPage : System.Web.UI.Page
{
    string Connectionstring = "server=(local)\\SQLEXPRESS;database=PhilipsMaterials;Integrated Security=SSPI";
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

        }

    }

   protected void btndisplay_Click(object sender, EventArgs e)
    {
        BindReport();
    }
    private void BindReport()
    {
        SSRSReport report = new SSRSReport();
        SqlParameter[] sqlParams = new SqlParameter[] {
         new SqlParameter("@Material","453567068441")

      };
        string ReportDataSource = "DataSet1";
        bool bind = report.CreateReport(Connectionstring, "graph", sqlParams, ref ReportViewer1, ReportDataSource);
        if (bind)
        {
            ReportViewer1.Visible = true;
        }
    }
}

public class SSRSReport
{

       public SSRSReport()
       {
              //
              // TODO: Add constructor logic here
              //
       }
    public bool CreateReport(String Connectionstring,string StoreProcedureName ,SqlParameter[] Parameter,ref  Microsoft.Reporting.WebForms.ReportViewer ReportViewer,string ReportDataSource)
    {
        bool reportbind = false;
        using (SqlConnection con = new SqlConnection(Connectionstring))
        {

            SqlCommand com = new SqlCommand();
            com.Connection = con;
            com.CommandType = CommandType.StoredProcedure;
            com.CommandText = StoreProcedureName;
            com.Parameters.AddRange(Parameter);
            DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter(com);
            da.Fill(ds);
            ReportDataSource datasource = new ReportDataSource(ReportDataSource, ds.Tables[0]);
            if ( ds.Tables[0].Rows.Count > 0)
            {
                ReportViewer.LocalReport.DataSources.Clear();
                ReportViewer.LocalReport.DataSources.Add(datasource);

                //This is another solution I tried:

                //List<ReportParameter> lstReportParameters = new List<ReportParameter>();
                //ReportParameter objReportParameter = new ReportParameter("Material", "453567068441");
                //lstReportParameters.Add(objReportParameter);
                //ReportViewer.LocalReport.SetParameters(lstReportParameters);
               // ReportViewer.ServerReport.Refresh();

                reportbind = true;
            }                       
        }
       return  reportbind;
    }

} 
```

ASP 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="StatisticsPage.aspx.cs" Inherits="StatisticsPage" %>

<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Test SSRS</title>
</head>
<body>
      <form id="form1" runat="server">
    <div>

    </div>
        <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" Font-Size="8pt" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Height="610px" Width="1179px" ShowParameterPrompts="true">
            <LocalReport ReportPath="Report.rdlc" >
                <DataSources>
                    <rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="DataSet1" />
                </DataSources>
            </LocalReport>
        </rsweb:ReportViewer>
        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetData" TypeName="PhilipsMaterialsDataSetTableAdapters.GraphTableAdapter" >
        </asp:ObjectDataSource>
          <asp:ScriptManager ID="ScriptManager1" runat="server">
          </asp:ScriptManager>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:01:51.280

```
public DataSet CreateReport(String Connectionstring,string StoreProcedureName ,SqlParameter[] Parameter,ref  Microsoft.Reporting.WebForms.ReportViewer ReportViewer,string ReportDataSource) {

//return the dataset

}

<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
   SelectMethod="CreateReport" TypeName="SqlHelper" /> 
```

您可以尝试将您的方法返回值更改为 DataSet.. 并在代码隐藏中尝试将数据绑定到该方法..

也许它可能工作..

# macos - 在 CFAttributedString 中设置删除线属性

> ID：14470650
> 
> 赞同：1
> 
> 时间：2013-01-23T00:43:50.233
> 
> 标签：macos, core-text, core-foundation, nsattributedstring

我正在使用一个主要是 C++ 中的 CoreFoundation 的代码库。我不想在尚未使用它们的源文件中引入 Foundation 对象。

我想在不首先创建 NSAttributedString 的情况下使用 NSStrikethroughStyleAttribute 创建一个 CFAttributedString。我知道它们是免费桥接的，但如果可能的话，我更愿意让这个源文件没有 obj-c。

那么，有没有办法在不通过 Foundation 的情况下创建一个带有删除线属性的 CFAttributedString，如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:53:51.510

我在这里假设这`CFAttributedString`最终将由 AppKit 呈现。如果您使用 CoreText 进行渲染，那么您将不得不自己实现删除线，因为 CoreText 没有它的属性（有一个带有一些示例代码的[Cocoanetics 帖子）。](http://www.cocoanetics.com/2011/01/befriending-core-text/)

因此，假设字符串是由您的应用程序的一部分使用 obj-c 渲染的，那么您真正想要的是以某种方式仅将常量公开`NSStrikethroughStyleAttributeName`给您的 C 代码。

最简单的方法可能就是将其添加到文件的顶部：

```
export CFStringRef NSStrikethroughStyleAttributeName; 
```

# sql - 用于推断函数依赖关系的反身性公理

> ID：14470654
> 
> 赞同：5
> 
> 时间：2013-01-23T00:44:37.463
> 
> 标签：sql, database, relational-database, functional-dependencies

如您所知，有 3 个[Armstrong 公理](http://en.wikipedia.org/wiki/Armstrong%27s_axioms)可用于推断关系数据库的所有功能依赖关系。（X、Y 和 Z 是一组属性）

1.  **自反性**：*如果 X ⊆ Y，则 Y → X*
2.  **增强**：*如果 X → Y，那么对于任何 Z，XZ → YZ*
3.  **传递性**：*如果 X → Y 和 Y → Z，则 X → Z*

例如，如果我们有这样的模式，我理解增强和传递性：

> SOME_SCHEMA(a, b, c, d)

具有这样的功能依赖：

> 1.  a → b
> 2.  b → c

通过使用增强，我们可以得到*ac → bc*或通过使用传递性，我们可以得到*a → c*等等，但是我不确定如何使用自反性公理推断更多的函数依赖关系？某个属性是某个其他属性的子集究竟意味着什么？

你能给我看一个使用我的模式或创建你自己的模式的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T05:40:41.370

传递性规则也可以这样表述：

```
A1, A2, …, An → Ai 
```

其中 i 是 1 到 n 之间的任意数。我认为这个规则的定义更清晰一些。A1 是 A1 到 An 的子集，因此您可以推断出上述依赖关系。

这些类型的依赖被称为琐碎依赖。最简单的形式是：

```
A → A 
```

如您所见，A 是 A 的子集，因此通过自反性的定义，我们可以推断出上述依赖关系。

这确实不是一个很有用的公理，前两个公理本身都不是很有用，但是为了形式而存在，所以我们可以得到最后一个公理，它非常有用。

要使用您的示例，我们可以说以下内容。鉴于我们有表格：

```
SOME_SCHEMA(a, b, c, d) 
```

我们可以推断出这样的依赖关系：

```
a, b, c, d → a
a, b, c, d → a, c 
```

以及更多相同性质的依赖项。

顺便说一句，这里有一些很好的幻灯片，它们很好地解释了函数依赖关系。还有一些关于阿姆斯特朗规则的幻灯片。在学习这些东西时，我发现这些很有帮助：[Functional Dependency Slides](http://www.cs.washington.edu/education/courses/cse344/12au/lectures/lecture16-design-theory.pdf)

# sbcl - 恢复#中的0

> ID：14470657
> 
> 赞同：0
> 
> 时间：2013-01-23T00:44:46.520
> 
> 标签：sbcl

在我的 Debian wheezy 上使用 SBCL：

1) Alsaplayer 播放 CD 音频： * (run-program "/usr/bin/alsaplayer" '("-q" "CD.cdda") :wait nil)

```
#<SB-IMPL::PROCESS 7199 :RUNNING> 
```

2) ps 告诉我音频 CD 正在播放： (EXITED 0) * (run-program "/bin/ps" '("-C" "alsaplayer"))

```
#<SB-IMPL::PROCESS :EXITED 0> 
```

问题：我想恢复第 2) 部分中的值 0，但假设我将 2) 的结果放在变量 var0 中。

```
* (type-of var0)

SB-IMPL::PROCESS 
```

我想知道是否有直接的方法来获得 0 ？为了恢复它，我做了：

```
*(setf str0 (format nil "~a" var0))

"#<PROCESS :EXITED 0>"

* (aref str0 18)
#\0 
```

但它似乎不是很聪明？

提前感谢您提供任何线索。

杰拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:02:25.673

尝试

```
(sb-ext:process-exit-code var0) 
```

它在 SBCL 手册中。

# html - XML 处理器是否适用 我刚刚编写了一个 XSL-T 文件，它将一些 WSDL 文件转换为 HTML 文档。现在我想知道是否可以直接在 WSDL 文件中使用如下处理指令： 这在我测试过的任何浏览 问问题 问问题 2013-01-23T00:44:58.123 39 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我刚刚编写了一个 XSL-T 文件，它将一些 WSDL 文件转换为 HTML 文档。现在我想知道是否可以直接在 WSDL 文件中使用如下处理指令： 这在我测试过的任何浏览器中都能完美运行。但我很好奇实际上想要使用 WSDL 作为服务描述（例如 SOAP 客户端库）的 XML 处理器现在是否也将文档转换为 HTML——这会导致 WSDL 不可用。 有谁知道这是否安全，或者是否有一些 XML 处理器标准定义了如何处理 xml-stylesheet 处理指令？ 您的 PHP 脚本存在错误，因此 PHP 无法解析它。 错误 ： if (mysql_query("CREATE DATABASE" $dbname,$con)) 试试这个来修复它（不要忘记 DATABASE 和 " 之间的空格）： if (mysql_query("CREATE DATABASE " . $dbname,$con)) htmlxmlwsdlxslt-1.0 4 0 回答 0 Related 2 c# - Richtextbox 到 iTextSharp 1 amazon-ec2 - 亚马逊 EC2 负载平衡 - 如何部署 Web 应用程序？ 1 python - 在 sqlalchemy 中清理对象的优雅方式？ 1 android - Android 加速模拟器不断重启 2 c# - 从 JavaScript 将项目添加到 C# 字典 2 sqlite - 从 sqlite 表中填充列表的动作脚本 3 asp.net-mvc-3 - 谷歌地图未在部分视图中显示 3 java - 为什么我们需要一个静态锁来同步 system.out.println()？ 1 php - 通过下载链接提供下载文件的最佳方法是什么？ 1 facebook - Facebook 连接，自动提示登录 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14470659
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, xml, wsdl, xslt-1.0

我刚刚编写了一个 XSL-T 文件，它将一些 WSDL 文件转换为 HTML 文档。现在我想知道是否可以直接在 WSDL 文件中使用如下处理指令：

```
<?xml-stylesheet type="text/xsl" href="./transform.xsl"?> 
```

这在我测试过的任何浏览器中都能完美运行。但我很好奇实际上想要使用 WSDL 作为服务描述（例如 SOAP 客户端库）的 XML 处理器现在是否也将文档转换为 HTML——这会导致 WSDL 不可用。

有谁知道这是否安全，或者是否有一些 XML 处理器标准定义了如何处理 xml-stylesheet 处理指令？

# image - 我在 matlab 中有 100 张名为 m1-m100 的图像。你如何创建一个调整每个图像大小的循环？

> ID：14470663
> 
> 赞同：1
> 
> 时间：2013-01-23T00:45:09.707
> 
> 标签：image, matlab, loops, matrix, image-resizing

我现在拥有的脚本会带入我目录中的所有照片，并将它们保存在我的工作空间中，为 m1、m2、m3 ...... m100，因为我有 100 张图像。继承人的代码：

```
A=dir; 
for n=3:length(A)   %it starts with 3 because the first 2 entries in the dir are . and ..
eval(['m' num2str(n) '=imread(A(n).name);']);
end 
```

又好又简单！但是，我现在想查看每个图像并调整它们的大小，但我现在必须手动完成，我想知道是否有人知道如何创建一个循环遍历所有图像矩阵的函数（首先是 m1，然后m2 等）并调整每个的大小。它们都需要是第一张图像的大小。这是我到目前为止所拥有的，但这需要很长时间，我希望将来能加载更多图像：

```
[a b c]=size(m1);
p1=m1
p2 = imresize(m2, [a b]);
p3 = imresize(m3, [a b]);
p4 = imresize(m4, [a b]);
p5 = imresize(m5, [a b]); 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:51:02.640

您可以使用单元格数组轻松完成，如下所示

```
A=dir; 
img = cell(length(A)-2,1);
img_rz = cell(length(A)-2,1);
for n=3:length(A)   
    img{n} = imread(A(n).name);
    img_rz{n} = imresize(img{n},[a b]);
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:53:03.970

你可以用你自己的代码来做：（几乎）

```
A=dir; 
a= ...; b= ...;
for n=3:length(A)   %it starts with 3 because the first 2 entries in the dir are . and ..
eval(['mresized' num2str(n) '=imresize(imread(A(n).name),[a b]);']);
end 
```

# c++ - 从 IE 9 拖放到我的应用程序中

> ID：14470665
> 
> 赞同：3
> 
> 时间：2013-01-23T00:45:20.487
> 
> 标签：c++, internet-explorer, winapi, user-interface, drag-and-drop

这是一个奇怪的问题，让我试着解释一下。我在支持拖放的 c++/MFC 中编写了一个（基于对话框的）应用程序。

我在 Windows 7 上使用默认主题进行以下测试。我的应用程序正在屏幕上运行。它不是一个顶部窗口（在它的 z 顺序中），或者换句话说，它被它上面的其他窗口遮住了。

如果我开始从 Chrome 或 Firefox 网络浏览器中拖动链接或仅选择文本，首先进入任务栏上我的应用程序图标，图标闪烁并且我的应用程序在屏幕上弹出（通过接收顶部 z 顺序）所以我然后可以拖放到我的应用程序中。一切正常。

如果我在 IE 9（版本 9.0.8112，更新版本 9.0.12）中执行相同操作，则首先将选定的文本或链接拖到我的应用程序的任务栏图标以使我的应用程序成为顶部窗口（按 z 顺序），应用程序图标继续闪烁，但它从未像 Chrome 或 FF 那样显示在屏幕上，因此我不得不放弃我的拖放操作。

知道为什么 IE 会发生这种情况，是否有办法解决它？

**编辑：**下面是关于我的评论的代码示例：

```
HRESULT __stdcall DragEnter(IDataObject* pDataObject, DWORD grfKeyState, POINTL pt, DWORD* pdwEffect)
{
    //IDropTarget::DragEnter
    m_fAllowDrop = QueryDataObject(pDataObject);

    if(m_fAllowDrop)
    {
        //SUCCESS
        // get the dropeffect based on keyboard state
    }
    else
    {
        //FAILURE
        *pdwEffect = DROPEFFECT_NONE;
    }

    return S_OK;
}

BOOL QueryDataObject(IDataObject* pDataObject, int* pnOutDataType)
{
    static FORMATETC fmtetc_file = {CF_HDROP, 0, DVASPECT_CONTENT, -1, TYMED_HGLOBAL};
    static FORMATETC fmtetc_txt = {CF_UNICODETEXT, 0, DVASPECT_CONTENT, -1, TYMED_HGLOBAL};

    BOOL bRes = FALSE;
    HRESULT hr;

    //See if our data type
    hr = pDataObject->QueryGetData(&fmtetc_file);
    if(hr == S_OK)
    {
        bRes = TRUE;
    }

    //In my case hr is E_FAIL or 0x80004005

    hr = pDataObject->QueryGetData(&fmtetc_txt);
    if(hr == S_OK)
    {
        bRes = TRUE;
    }

    //In my case hr is E_FAIL or 0x80004005

    return bRes;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T01:07:09.263

作为其沙盒的一部分，以防止对机器进行未经授权的更改，Internet Explorer 以比其他应用程序更低的 UIPI（用户界面特权隔离）完整性级别运行。因此，默认情况下它没有访问您的应用程序的权限，这更有可能以中等或高 UIPI 完整性级别运行（取决于它是否提升了 UAC）。闪烁的任务栏按钮意味着某些东西正试图将您的应用程序带到前台，但没有权限这样做（请参阅文档[`SetForegroundWindow()`](http://msdn.microsoft.com/en-us/library/ms633539.aspx)更多细节）。UIPI 不允许低完整性进程向高完整性进程发送窗口消息，除非接收进程明确告诉 UIPI 允许。Chrome 和 FireFox 可能运行在与您的应用程序相同的完整性级别。为了支持从 Internet Explorer 拖放，调用[`ChangeWindowMessageFilter()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632675.aspx)或[`ChangeWindowMessageFilterEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd388202.aspx)让您的应用程序接收来自低完整性进程的 、 和 (0x0049)`WM_DROPFILES`消息`WM_COPYDATA`。`WM_COPYGLOBALDATA`

**更新：**看起来 Internet Explorer 在保护模式下运行时特别对拖放操作施加了额外的限制：

[如何处理来自低完整性 Internet Explorer 的拖放](http://us.generation-nt.com/answer/how-handle-drag-drop-low-integrity-internet-explorer-help-187625691.html)

[了解和在保护模式下工作 Internet Explorer - 允许在应用程序中进行拖放操作](http://msdn.microsoft.com/en-us/library/bb250462.aspx#wpm_addya)

# android - 加速Android中每隔几秒更新一次的SurfaceView

> ID：14470667
> 
> 赞同：0
> 
> 时间：2013-01-23T00:45:39.887
> 
> 标签：android, 2d, surfaceview

当您`SurfaceView`在 Android 中使用 s 时，尤其是在将它们设置为布局的一部分时（通过将 s 添加`SurfaceView`到布局 XML 中），性能是一个至关重要的方面。

就我而言，它`View`每隔几秒更新一次（包含扑克游戏中的扑克牌，具有一些效果和触摸事件的移动），并且由于它是更大布局的一部分，我遇到的问题是这`SurfaceView`会减慢其余部分我`Activity`的用户界面，即其余的`Activity`冻结一小段时间，然后它被更新，因此没有显示一小段时间。

```
public class MySurface extends SurfaceView implements SurfaceHolder.Callback {
    ...
} 
```

在其`onDraw()`方法中，有一些`Bitmap`s 被绘制到黑色背景上。在该类内部，启动了一个线程，该线程不断调用`View`'s`onDraw()`方法：

```
import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class SurfaceThread extends Thread {

    private SurfaceHolder mSurfaceHolder;
    private MySurface mSurface;
    private boolean mRunning = false;

    public HandThread(SurfaceHolder surfaceHolder, MySurface surface) {
        mSurfaceHolder = surfaceHolder;
        mSurface = surface;
    }

    public SurfaceHolder getSurfaceHolder() {
        return mSurfaceHolder;
    }

    public void setRunning(boolean run) {
        mRunning = run;
    }

    @Override
    public void run() {
        Canvas c;
        while (mRunning) {
            c = null;
            try {
                c = mSurfaceHolder.lockCanvas(null);
                synchronized (mSurfaceHolder) {
                    if (c != null) {
                        mSurface.onDraw(c);
                    }
                }
            }
            finally { // when exception is thrown above we may not leave the surface in an inconsistent state
                if (c != null) {
                    mSurfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }

} 
```

`Activity`不幸的是，这会不时减慢我的速度，这意味着大约有冻结。经常是 0.5 秒。

有没有可能加快速度？我试图放弃`Thread`and`invalidate()`每次调用`onTouchEvent()`，但这也不起作用。

我认为必须有一种方法来提高性能，因为它`SurfaceView`的更新频率很低。有几秒钟没有任何反应，但是当用户触摸 时`View`，东西会四处移动，直到手指抬起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:54:24.753

您需要分析真正导致这些停顿的原因。[跟踪](http://developer.android.com/tools/debugging/debugging-tracing.html)典型运行并查看实际占用 CPU 时间的内容。很有可能，某些事情导致 UI 冻结，您正在做很多应该[移动到另一个线程](http://android-developers.blogspot.com/2009/05/painless-threading.html)的工作。

您还希望避免不必要的工作。您肯定要查看的内容是确保在后台循环中（包括对 的调用`onDraw`）尽可能避免创建新对象。这将减少垃圾收集，这也可能导致打嗝。如果可能的话，还要避免或最小化在此处加载位图。

# ruby-on-rails - 在与 FactoryGirl 的挂钩中使用关联

> ID：14470668
> 
> 赞同：1
> 
> 时间：2013-01-23T00:45:40.477
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, factory-bot

我在 FactoryGirl 遇到了困难，也许你可以帮我解决。代码是这样的：

```
class Bet
  belongs_to :market
  belongs_to :option
  has_one :market, :through => :option
  has_one :event, :through => :market   

  before_validation :set_event_date

  scope :by_event_date, order(arel_table[:event_date].desc) 

  def set_event_date
    self.event_date = event.date
  end
end 
```

我需要在 Bet 中实现 event_date 属性，因为如果`by_event_date`没有实现，范围成本太高。当我运行时问题就来了`FactoryGirl.create :bet`。钩子被执行，但`bet.event`为 nil，因此引发异常。无论如何配置 FactoryGirl 以真正创建关联的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:19:55.213

你的工厂代码是什么？你可以做类似的事情

```
FactoryGirl.define do
  factory :event do
    #something
  end

  factory :bet do
    #something
    event
  end
end 
```

这应该为您创建一个事件

您还可以使用 factorygirl 回调对其进行一些自定义

```
FactoryGirl.define do
  factory :event do
    #something
  end

  factory :bet do
    #something
    after_build do |bet| #for newer version it is after(:build) do |bet|...
      bet.event = Factory.build(:event)
    end
  end
end 
```

当记录被保存时，事件将被保存到

编辑：然后尝试分配市场

```
FactoryGirl.define do
  factory :event do
    #something
  end

  factory :market do
    event
  end

  factory :bet do
    #something
    market
  end
end 
```

# android - Android：尝试创建自定义对话框

> ID：14470674
> 
> 赞同：1
> 
> 时间：2013-01-23T00:46:22.923
> 
> 标签：android

我正在尝试创建一个自定义对话框。当我调用该`setOnClickListner`方法时，我得到一个“类型视图中的方法 setOnClickListner 不适用于参数”。我也收到一条错误消息：

```
public void onClick(View v) 
```

说“新的 OnClickListener(){} 类型的方法 onClick(View) 必须覆盖或实现超类型方法”。代码：

```
void ReStartsFamilyFriend()
{
    // custom dialog
    // custom dialog
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.gameover);
    dialog.setTitle("Title...");

    // set the custom dialog components - text, image and button

    Button dialogButton = (Button) dialog.findViewById(R.id.butPlay);
    // if button is clicked, close the custom dialog

        //on this line below get the error "The method setOnClickListener(View.OnClickListener) in the type View is not applicable for the arguments "
    dialogButton.setOnClickListener(new OnClickListener() {
        @Override
        /*On the line below I get the error
        "The method onClick(View) of type new OnClickListener(){} must override or implement a supertype 
        method"*/
        public void onClick(View v) {
            dialog.dismiss();
        }
    });
    dialog.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:20:05.110

我觉得您要做的只是使用警报对话框上的按钮以外的其他按钮来解除警报。您最好的选择是使用 VVVVVVVVVVVVVVVVVv

```
 dialog.setPositiveButton (CharSequence btnText, new DialogInterface.OnClickListener listener{

    @Override
    onClick(DialogInterface dialogInter, int whichBtn){
        dialog.dismiss();
    }
    }); 
```

如果您使用 alertDialog.builder，则无需在视图中放置按钮。
在这里查看[链接](http://developer.android.com/reference/android/app/AlertDialog.html)

# jquery - jQuery validate() 适用于 jsfiddle，但不适用于服务器？

> ID：14470676
> 
> 赞同：0
> 
> 时间：2013-01-23T00:46:34.320
> 
> 标签：jquery, html, validation

我对使用 jQuery 的 validate() 很陌生，所以也许我遗漏了一些明显的东西。

当我将表单/验证函数粘贴到 jsfiddle 时，它​​会正确验证。可以在[http://jsfiddle.net/AmLcV/6/](http://jsfiddle.net/AmLcV/6/)看到。

但是在我的实时网页上，无论如何，表单总是提交。这是在[http://students.cse.unt.edu/~haw0038/4890/index.php](http://students.cse.unt.edu/~haw0038/4890/index.php)。

HTML：

```
<form id="form1" method="post" action="javascript:alert('form submitted')">
  <p>&bull; Which version would you like to run?<br/>
    <input id="variables" type="radio" name="version" value="variables" />
    <label for="variables">Individual Variables</label><br/>
    <input id="array" type="radio" name="version" value="array" />
    <label for="array">Array Representation</label>
  </p>
  <p>&bull; Would you like to find the largest, or smallest number?<br/>
    <input id="large" type="radio" name="type" value="large" />
    <label for="large">Largest</label><br/>
    <input id="small" type="radio" name="type" value="small" />
    <label for="small">Smallest</label>
  </p>
  <p>&bull; Use random numbers, or input your own?<br/>

    <input id="random" type="radio" name="numSelect" value="random" />
    <label for="random">Generate random numbers for me</label><br/>
    <input type="text" name="nums" id="nums" value="How many? (2 to 10)" disabled="disabled"/><br/><br/>

    <input id="userDef" type="radio" name="numSelect" value="userDef"/>
    <label for="userDef">I want to use my own numbers</label><br/>
    <input id="userNums" type="text" name="userNums" disabled="disabled"/><br/><br/>

    <input type="submit" name="submit" value="Start the Simulation!" />
  </p> 
</form> 
```

JS：

```
$(function(){

  $('#form1').validate({
      rules:{
      version: "required",
      type: "required",
      numSelect: "required",
      userNums: "required"
    }
  });
}); 
```

任何想法为什么会发生这种情况？我不知道我在这里缺少什么，或者是什么导致了它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:54:19.923

您的服务器上没有包含 valdiate 插件，请添加此行并查看。

```
<script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script> 
```

在 JSFiddle 中，这个脚本被添加到管理资源下。

使用 firebug 调试 javascript 非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:54:23.330

在 jsfiddle 上有`jQuery Validation Plugin 1.9.0`包含的插件。

# ios - OAL简单的音频通道

> ID：14470679
> 
> 赞同：0
> 
> 时间：2013-01-23T00:46:54.253
> 
> 标签：ios, objective-c, openal, pitch, pitch-shifting

我正在使用 OALSimpleAudio，我的应用程序中有一组声音在播放，我试图将这组声音分组到一个“通道”中，然后通过该特定通道影响组的音高。

-(IBAction)sample001 {

```
self.sourceSample001 = [[OALSimpleAudio sharedInstance] playEffect:sound001]; 
```

}

-(IBAction)sample002 {

```
self.sourceSample002 = [[OALSimpleAudio sharedInstance] playEffect:sound002]; 
```

}

我需要将这两种声音都放入 1 个单声道中，这样我才能做这样的事情。**也许？**

-(IBAction)channel1 {

```
self.channel = [[OALSimpleAudio sharedInstance] pitch:2.0f]; 
```

}

如果可能的话，我想改变同时播放的两个声音的音高吗？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:26:52.387

知道了。

_channelSource.pitch = 1.0;

如果有人需要帮助 - 事先添加低于分数。:)

# java - 如果找不到匹配项，Ant ReplaceRegexp 任务会失败吗？

> ID：14470681
> 
> 赞同：2
> 
> 时间：2013-01-23T00:47:08.263
> 
> 标签：java, ant

Ant 的[Replace](http://ant.apache.org/manual/Tasks/replace.html)任务有一个不错的选项，称为`failOnNoReplacements`. [ReplaceRegexp](http://ant.apache.org/manual/Tasks/replaceregexp.html)支持这样的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:08:40.637

看起来答案是否定的，该任务没有这样的选项。一方面，它没有记录在案。

其次，如果你浏览源码，[http://svn.apache.org/repos/asf/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/optional/ReplaceRegExp.java](http://svn.apache.org/repos/asf/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/optional/ReplaceRegExp.java)，你会看到类中没有这样的属性。看起来任务引发的唯一异常是使用无效参数调用它时。

# python - SQLAlchemy 双向关系关联代理

> ID：14470688
> 
> 赞同：8
> 
> 时间：2013-01-23T00:47:38.220
> 
> 标签：python, sqlalchemy

**更新：**

对于遇到此问题的任何人，使用[最新的 SQLAlchemy](http://www.sqlalchemy.org/trac/changeset/f4f5206907a9/) ，此行为已得到修复。

**原始问题：**

我在获取关联代理以正确更新时遇到问题。

在此处使用示例模型：http: [//docs.sqlalchemy.org/en/rel_0_7/orm/extensions/associationproxy.html#simplifying-association-objects](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/associationproxy.html#simplifying-association-objects)

但是用这一行改变 UserKeyword ：

```
keyword = relationship("Keyword", backref=backref("user_keywords", cascade="all, delete-orphan")) 
```

并将其添加到关键字：

```
users = association_proxy('user_keywords', 'user') 
```

所以一个关键字实例有一个用户列表。

以下按预期工作：

```
>>> rory = User("rory")
>>> session.add(rory)
>>> chicken = Keyword('chicken')
>>> session.add(chicken)
>>> rory.keywords.append(chicken)
>>> chicken.users
[<__main__.User object at 0x1f1c0d0>]
>>> chicken.user_keywords
[<__main__.UserKeyword object at 0x1f1c450>] 
```

但是移除会做一些奇怪的事情。从关联代理列表中删除，如下所示：

```
>>> rory.keywords.remove(chicken) 
```

在 SA 尝试将外键列之一设置为空时导致完整性错误。

这样做：

```
>>> rory.user_keywords.remove(rory.user_keywords[0]) 
```

结果如下：

```
>>> chicken.users
[None] 
```

我错过了一些明显的东西，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T01:45:06.547

`UserKeyword`要求它同时与 a`Keyword`和a 相关联`User`才能持久化。当您将它与 a`User`和相关联`Keyword`，但随后将其从`User.user_keywords`集合中删除时，它仍与`Keyword`.

```
>>> rory.keywords.remove(chicken)

# empty as we expect
>>> rory.user_keywords
[]   

# but the other side, still populated.  UserKeyword 
# has no User, but still has Keyword
>>> chicken.user_keywords
[<__main__.UserKeyword object at 0x101748d10>]

# but the User on that UserKeyword is None
>>> chicken.user_keywords[0].user is None
True

# hence accessing the "association" gives us None
# as well
>>> chicken.users
[None] 
```

因此，如果我们现在要刷新（）这个，你已经`UserKeyword`准备好一个对象，但它上面没有`User`，所以你会得到 NULL 错误。在 INSERT 时，对象不被视为“孤儿”，除非它不与任何`Keyword.user_keywords` *或* `User.user_keywords`集合相关联。只有当您说`del chicken.user_keywords[0]`或等效时，您才会看到没有生成任何 INSERT 并且`UserKeyword`对象被遗忘。

如果您在将对象从“rory”中删除之前将其刷新到数据库中，那么情况就会发生变化。现在`UserKeyword`是持久的，当你从“rory.keywords”中删除“chicken”时，会触发一个“delete-orphan”事件，该事件*确实*删除了`UserKeyword`，即使它仍然与`Keyword`对象相关联：

```
rory.keywords.append(chicken)

session.flush()

rory.keywords.remove(chicken)

session.flush() 
```

你会看到 SQL：

```
INSERT INTO "user" (name) VALUES (%(name)s) RETURNING "user".id
{'name': 'rory'}

INSERT INTO keyword (keyword) VALUES (%(keyword)s) RETURNING keyword.id
{'keyword': 'chicken'}

INSERT INTO user_keyword (user_id, keyword_id, special_key) VALUES (%(user_id)s, %(keyword_id)s, %(special_key)s)
{'keyword_id': 1, 'special_key': None, 'user_id': 1}

DELETE FROM user_keyword WHERE user_keyword.user_id = %(user_id)s AND user_keyword.keyword_id = %(keyword_id)s
{'keyword_id': 1, 'user_id': 1} 
```

现在一个有理智的人会问，“这不是不一致吗？” 此刻我会说，“绝对”。我需要查看测试用例以了解这种行为差异的基本原理是什么，我已经在代码中确定了它为什么会以这种方式发生，并且我很确定在考虑“孤儿”的方式上存在这种差异“未决”与“持久”对象是有意的，但在这种特殊的排列中显然会产生奇怪的结果。如果我能找到一个可行的，我可能会为此在 0.8 中进行更改。

编辑：[http](http://www.sqlalchemy.org/trac/ticket/2655) ://www.sqlalchemy.org/trac/ticket/2655总结了我将不得不考虑的问题。有一个专门针对这种行为的测试，需要追溯到它的起源。

# http - 我可以将来自通过 HTTPS 提供的页面的未加密流量的域列入白名单吗？

> ID：14470689
> 
> 赞同：1
> 
> 时间：2013-01-23T00:47:38.853
> 
> 标签：http, google-chrome, https, cross-domain

我有一个内部 Web 应用程序，旨在与在客户端计算机上本地运行的服务器协同工作。（出于好奇：本地服务器用于使用客户端机器的 GPG 密钥解密从服务器检索到的数据。）

内部 Web 应用程序通过 HTTPS 提供服务，而本地应用程序可通过 localhost 访问。过去，我可以毫无问题地从页面向 localhost 发出未加密的 AJAX 请求；但似乎最近 Chrome 已更新为禁止从通过 HTTPS 提供的页面向任何目的地发出 HTTP 请求。

我知道在绝大多数情况下，来自通过 HTTPS 提供的页面的 HTTP 请求构成安全漏洞。但是，由于在这种情况下我可以完全控制端点（即 localhost），所以在我看来，即使通过 HTTPS 提供了主机页面，向该目标发出 HTTP 请求仍然是完全安全的。

这可能吗？以某种方式将 localhost 列入白名单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:28:09.110

[由于您可以同时控制客户端和服务器，这听起来像是跨域资源共享](http://www.w3.org/TR/cors/)(CORS)的理想选择。服务器必须设置一些响应标头才能访问客户端。您可以在这里了解更多信息：http: [//www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

# c# - Monodevelop 库/文件夹

> ID：14470692
> 
> 赞同：0
> 
> 时间：2013-01-23T00:47:45.447
> 
> 标签：c#, android, monodevelop, libs

我有一个来自 github 的 .jar 文件，并被要求将其放在我的 Android 应用程序的 libs/ 文件夹中。我正在为 Android 使用 MonoDevelop，但我在任何地方都看不到 libs/ 文件夹。我看到在 Eclipse 中，在选项下，可以为 .jar 文件添加路径。MonoDevelop 有同样的事情吗？我可以请一些帮助来正确设置这个 .jar 文件吗？

**编辑**

这是我要使用的 jar：http: [//loopj.com/android-smart-image-view/](http://loopj.com/android-smart-image-view/)我正在寻求一些帮助，以便为 Android 的 MonoDevelop 设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:10:39.063

要回答您的问题：

该`libs/`文件夹是 Eclipse 下的普通 Java JAR 文件所在的位置，用于面向 Android 平台的 Java。您必须将 Java 代码转换为等效的 C# 以供 Android 的 Mono 环境使用。

这称为*移植*，如果没有帮助，请尝试在那里寻找类似的库。

# rabbitmq - 同一主机上有多个节点？

> ID：14470693
> 
> 赞同：2
> 
> 时间：2013-01-23T00:47:54.530
> 
> 标签：rabbitmq

我一直在关注关于[集群](http://www.rabbitmq.com/clustering.html)的 RabbitMQ 指南，我使用的是 RabbitMQ 2.8.7 版，并且我正在尝试在同一主机上启动 2 个节点。我使用以下命令以相同的方式启动两个节点...

```
RABBITMQ_NODE_PORT=5674 RABBITMQ_PID_FILE='/var/log/rabbitmq/rabbit-disc' RABBITMQ_NODENAME=rabbit-disc rabbitmq-server -detached

RABBITMQ_NODE_PORT=5673 RABBITMQ_PID_FILE='/var/log/rabbitmq/rabbit-ram' RABBITMQ_NODENAME=rabbit-ram rabbitmq-server -detached 
```

然后，我尝试使用以下命令将第二个节点添加到第一个节点的集群中，方法是停止它...

```
sudo rabbitmqctl -n rabbit-ram stop_app 
```

然而，与其停止它，不如简单地挂起......

```
Stopping node 'rabbit-ram@test-01' ... 
```

它永远不会完成停止节点。我已经查看了日志文件和 pid 输出本身，当我尝试停止或发出任何命令时，既没有抛出任何错误，也没有提供关于进程锁定原因的任何提示。

我还尝试为启动命令中的其他参数提供完全不同的值，包括`RABBITMQ_MNESIA_BASE`认为可能存在一些锁定问题，但这并不能解决任何问题。

我已经安装了以下插件：

```
 [e] amqp_client                       2.8.7
 [e] erlando                           2.8.7
 [e] mochiweb                          2.3.1-rmq2.8.7-gitd541e9a
 [E] rabbitmq_management               2.8.7
 [e] rabbitmq_management_agent         2.8.7
 [e] rabbitmq_mochiweb                 2.8.7
 [E] rabbitmq_shovel                   2.8.7
 [E] rabbitmq_shovel_management        2.8.7
 [e] webmachine                        1.9.1-rmq2.8.7-git52e62bc 
```

任何有关找出锁定发生原因以及如何克服锁定的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:51:15.083

似乎运行`rabbitmq_management`插件及其依赖项会导致问题。在禁用它的情况下运行多个节点不是问题，但是当我自己启用它时，它也会启用以下所有...

```
* mochiweb-2.3.1-rmq2.8.7-gitd541e9a
* rabbitmq_management_agent-2.8.7
* rabbitmq_mochiweb-2.8.7
* webmachine-1.9.1-rmq2.8.7-git52e62bc 
```

这些似乎正在引起冲突。我假设因为他们的 web 视图正在尝试在每个节点上启动，而它已经被原始节点占用。我可以挖掘配置以拥有多个 web 视图，但这不是必需的。在我的第一个节点启动后禁用这些插件对我来说已经足够了。

# jquery - 使用 jquery 将html 更改为...

> ID：14470695
> 
> 赞同：1
> 
> 时间：2013-01-23T00:47:57.733
> 
> 标签：jquery, jsp

*免责声明：HTML、JQuery、Ajax 技能水平——垃圾。一直是个厚客户。*

我有一个表格，允许用户输入客户代码和电子邮件地址。我想在客户代码有效时显示客户的姓名。我将通过 Ajax 和 Spring MVC 来实现这一点，但作为第一步，我想我会使用 jquery 函数在客户代码下的表中添加一行。但是，我无法让它工作。

这是我的 JSP：

```
<%@include file="/common/header.jsp" %>
<h1>
    <a href="/customerEmailList.do"><spring:message code="customer.email.title"/></a>
    <span class="breadcrumb"><spring:message code="ui.breadcrumb.separator"/></span>
    <spring:message code="action.add"/>
</h1>
<form:form action="customerEmailAdd.do" commandName="customerEmailEntry">
    <table>
        <tr>
            <td colspan="3"><form:errors cssClass="error"/></td>
        </tr>
        <tr>
            <td><spring:message code="customer.email.code"/> <span class="mandatory">*</span></td>
            <td><form:input id="customerCode" path="customerCode" maxlength="8" size="10"/></td>
            <td><form:errors path="customerCode" cssClass="error"/></td>
        </tr>
        <span id="identifiedCustomer">
        </span>
        <tr>
            <td><spring:message code="customer.email.edit.field"/> <span class="mandatory">*</span></td>
            <td><form:input path="emailAddress" maxlength="255" size="50"/></td>
            <td><form:errors path="emailAddress" cssClass="error"/></td>
        </tr>
        <tr>
            <td colspan="3">
                <hr/>
            </td>
        </tr>
        <tr>
            <td colspan="3" align="right">
                <input type="submit" class="green-button" value="<spring:message code="button.save"/>"/>
            </td>
        </tr>
    </table>
</form:form>

<script type="text/javascript">
    $ ( document ).ready ( function () {
        $ ( '#identifiedCustomer' ).html ( '<tr><td>Hello, world</td></tr>' );
    } );    
</script>

<%@include file="/common/footer.jsp" %> 
```

jquery (1.8.3) 正在通过公共标头拉入。

当表单加载时，会显示文本*Hello, world*，但它不是新的表格行。它出现在桌子前面。我原以为它会在字段行`customerCode`和`emailAddress`字段行之间创建一个新行。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:49:37.150

而不是使用`.html`使用`.replaceWith`

`.html`更改跨度的内容，但不删除它们。表格中间的跨度和它自己的跨度`<tr>`是无效的。 `.replaceWith`将创建一个新元素并`<span>`从 DOM 中删除。

但是，根据 DOM 的结构方式，这可能会导致问题，因为跨度从无效点开始。为什么不直接使用`<tr id="identifiedCustomer">`而不是`<span>`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:50:02.597

你不能只在 a`span`中间有 a `table`。那是无效的 HTML。您必须使用 a`tr`代替：

```
<tr>
    <td><spring:message code="customer.email.code"/> <span class="mandatory">*</span></td>
    <td><form:input id="customerCode" path="customerCode" maxlength="8" size="10"/></td>
    <td><form:errors path="customerCode" cssClass="error"/></td>
</tr>
<tr id="identifiedCustomer"></tr>
<tr>
    <td><spring:message code="customer.email.edit.field"/> <span class="mandatory">*</span></td>
    <td><form:input path="emailAddress" maxlength="255" size="50"/></td>
    <td><form:errors path="emailAddress" cssClass="error"/></td>
</tr> 
```

**jQuery：**

```
$(document).ready ( function () {
    $('#identifiedCustomer').html('<td>Hello, world</td>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:53:00.763

你想做的是

```
$('table tbody').append('<tr><td>Hello, world</td></tr>'); 
```

这将选择表的 tbody 并将新行附加到末尾。

理想情况下，您会向表中添加一个 ID，这样您就不会最终向页面上的每个表添加新行。

# ios - SoundCloud iOS SDK 找不到所有头文件。libSoundCloudUI/CocoaSoundCloudUI

> ID：14470698
> 
> 赞同：2
> 
> 时间：2013-01-23T00:48:22.473
> 
> 标签：ios, soundcloud

在过去的一周里，我花了几个小时试图弄清楚为什么 SoundCloud 突然停止在我正在开发的应用程序中工作。考虑到它可能与文件位置有关，我完全删除了它并重新添加了子模块。然后重新添加，没有工作。然后重新添加。然后搜索。然后什么都没有。

我已经尝试重新添加 SoundCloud 子模块，并按照 SoundCloud 站点上的说明到 T，但仍然出现编译器错误接连出现错误，警告接连出现警告。我按照说明添加链接器标志，并包含所需的框架和依赖项。我完全不知道为什么我会丢失文件错误。

更改标头搜索路径（在我的项目文件或 libSoundCloudUI 中）只会改变找不到的文件，当我设法让 SoundCloud 与我的程序一起编译时，每当我将更改提交到我的 Git 存储库时，子模块迷路了，下一个打开项目的人没有代码，因此让我重新开始。将标头搜索路径直接指向源代码不起作用，即使它是递归的。

会发生什么？不管我做什么，特别是 CocoaSoundCloudUI

我遇到的一些错误：

```
Use of undeclared identifier: 'kTermsofService' (This has a few other keys that aren't being found)
Header file not found: <insert random file include in headers and in source folder> 
```

如果我的应用不需要 SoundCloud 支持，我早就放弃了。这真是一场噩梦——任何帮助都会让我的生活变得更轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:38:59.010

嗨，肖恩·迈克尔·多里安，

事实上，我们最近更新了`CocoaSoundCloudAPI`，`CocoaSoundCloudUI`根据您的错误消息，您还没有更新**两个**存储库，即您需要运行

`git submodule update --init --recursive`.

如果您通常遇到子模块问题，我建议您切换到[CocoaPods](http://cocoapods.org)，它可以轻松管理您的库依赖项。

我们还提供了一个[Demo Xcode 项目](https://github.com/soundcloud/CocoaSoundCloudDemo/tree/feature/demo-proj-with-cocoapods)来检查这样的设置。

这应该可以帮助您解决问题，让我知道您是否遗漏了任何内容。

# php - php会话不会从一页延续到下一页

> ID：14470711
> 
> 赞同：0
> 
> 时间：2013-01-23T00:50:09.923
> 
> 标签：php, session

我以前在共享主机上使用过会话，它们非常简单。我现在正在使用 Amazon 并在 php.ini 中使用以下配置的 linux 服务器。问题是会话变量不会从一页继续到下一页：

```
session

Session Support enabled
Registered save handlers    files user memcached
Registered serializer handlers  php php_binary

Directive   Local Value Master Value
session.auto_start  Off Off
session.bug_compat_42   Off Off
session.bug_compat_warn Off Off
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly On  On
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  1000    1000
session.gc_maxlifetime  604800  604800
session.gc_probability  1   1
session.hash_bits_per_character 5   5
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /var/lib/php/session    /var/lib/php/session
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0 
```

示例页面：[http ://www.datingjapan.co/index.php](http://www.datingjapan.co/index.php)

代码：index.php

```
<?php
session_start();
error_reporting(E_ALL & ~E_NOTICE);
$_SESSION['domain'] = 'www.datinggirls.co';
print_r($_SESSION);
?>

<h1>This is the HTML</h1>
<a href="page.php">Visit W3Schools</a> 
```

页面.php

```
<?php
session_start();
$_SESSION['page2'] = 'page-two-data';
print_r($_SESSION);
?>

<h1>This is page 2</h2>
<a href="index.php">Visit Home Page</a> 
```

有什么建议...？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:54:09.950

如果您使用多台服务器，它们将各自拥有自己的会话存储。您应该查看亚马逊支持论坛上有关在服务器之间同步会话存储的帖子。

编辑：这是关于 SO 的一篇这样的帖子：[如何使用 Amazon Web Services (AWS) 同步会话？](https://stackoverflow.com/questions/10715461/how-to-synchronize-sessions-using-amazon-web-services-aws)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:57:21.850

每次我 ping 您的域 www.datingjapan.co 时，它都会给我一个不同的 IP。

您的共享主机是否在多个云实例上？大概。

然后 PHP 会话文件可以本地存储在显示页面“索引”的第一台服务器上。当您加载第二页时，您在另一台服务器上......

我同意彼得的观点，请查看亚马逊常见问题解答或有关您的会话存储如何同步（或不同步）的支持。

# ios - 开发推送与分发推送

> ID：14470718
> 
> 赞同：2
> 
> 时间：2013-01-23T00:50:23.160
> 
> 标签：ios, cocoa-touch, apple-push-notifications

我们的推送服务在这里遇到了一些问题。我们的应用程序已经在 AppStore 上架了一段时间，我们想第一次尝试我们的 Push。不发送给所有人，只发送给我的设备。

我们按照[本指南](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12/)进行了所有设置，并且在开发过程中运行良好。后来，当应用在 AppStore 上发布时，我们对分发做了同样的事情。（也许不是这个顺序）

无论如何，我们在推送上线后从未真正测试过推送（我们的服务是一种新闻服务，应该在我们选择时向所有设备发送通知）。我运行了一个调试程序，将我的设备令牌注册到与其他设备不同的 sql 表中，然后直接从 appstore 重新下载了应用程序。我没有收到注册通知的提示，但我知道我是第一次这样做，我什至可以在“设置”中看到它。

我使用我们的 .php 网站向表中的“所有”设备（目前只有我的设备）发送消息，但我什么也没做。我在我的 iPad 上下载了相同的应用程序，令牌被添加到数据库中，发送了一条新消息，但他们都没有收到它。

我们将我同事的令牌添加到同一个数据库中，他从 AppStore 下载了应用程序，将消息发送到新表中的所有设备（现在是三个设备），只有他收到了消息。

他的手机可能包含一些早期的重要配置文件，但这一切都在生产中，应该没什么可说的，对吧？

我现在不知道该怎么做。我认为我的 iPhone 和 iPad 都被推送服务损坏或忽略了，或者我同事的手机是唯一会从该服务收到通知的设备..？

当我使用 .php-code`fwrite`并将通知发送到 gateway.push.apple.com 时，它返回它已成功将消息发送到所有设备（但即使应用程序已从设备中删除也是如此。 )

我自己从我的机器上新创建的请求/密钥/配置文件等创建了 .pem 文件。

我们的推送服务没有发送到我的设备是否有原因？还是到目前为止只属于他？它与证书、配置文件、密钥等有什么关系吗？

**编辑**

我们现在一直在尝试很多东西，而且它`kind of works now`，但我不知道发生了什么，以及它现在是如何工作的。

**我们做了什么：** 我的同事打开了他的 XCode 项目，将所有内容都设置为 Release，然后按下 Build。他给我发了 AppName.app，我把它拖到了 iTunes，并告诉它安装那个应用程序。（现在 AppStore 版本和 Xcode 版本之间的唯一区别是 DeviceTokens 应该注册在另一个表中，正如我之前提到的）。当我启动应用程序时，我注意到注册了第四个令牌。我的意思是我的设备的 deviceToken 已经改变了。我知道这种情况时有发生，但这应该不是问题。当我尝试使用新应用程序发送通知并注册新令牌时，我收到了它。如果我卸载他发给我的版本，然后重新下载 AppStore 版本，并向新设备令牌发送通知，我现在会收到它。

如何？

如果我用旧表交叉检查新表中的设备令牌，它们都在两者上。我最初用来获取我的设备令牌的方法是在其中某处使用不同的 url 构建我的项目，并且我必须先删除 AppStore 版本。运行这个“新”xcode-version 时，它会吐出一个从未在 AppStore-version 中注册过的新令牌，因此当我尝试重新安装 AppStore-version 并仅向该令牌发送通知时，它从未通过 -因为“当前” deviceToken 隐藏在原始表中，而不是新表中。

**新问题：**

为什么我的 deviceToken 会从一个版本更改为另一个版本？

为了更清楚地了解我认为发生的事情：

```
1\. AppStore-app launch - Table.regDeviceToken = 111;
2\. AppStore-app launch2- Tabke.regDeviceToken = 222; //(it updated itself)
3\. Xcode launch - Table2.regDeviceToken = 111; //This is the Token I found and used
4\. AppStore-app lauch4 - Table1.regDeviceToken = 222 //This is hidden from me, I thought it would be 111.
5\. Send push to Table2.DeviceToken=111; //Which does not work
6\. Send push to Table.DeviceToken = 222; //Which works 
```

因此，在 Xcode 中启动应用程序时，我得到了 OLD DeviceToken。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:51:32.297

好的，在由于这个问题而头疼之后，我终于找到了答案。我们的服务一直正常运行。

当我使用我的 Xcode 项目获取我的设备令牌时，我得到了一个为**Development**制作的设备令牌。**然后，当我尝试使用我们的AppStore-app**向该令牌发送推送通知时，它没有通过。

当我从同事那里得到**AppName.app文件时，它显然处于****生产/发布**模式，因此为数据库提供了不同的**deviceToken**。

**底线：** 应用程序为**Debug和****Release**提供不同的deviceToken 。

# ruby-on-rails - 从爆发的战争开始 sidekiq

> ID：14470721
> 
> 赞同：1
> 
> 时间：2013-01-23T00:50:32.547
> 
> 标签：ruby-on-rails, deployment, jruby, warbler, sidekiq

我们当前的生产部署使用jenkins 将warble 生成的war 文件部署到Tomcat。整个事情就像一个魅力。然而，我遇到的问题是如何通过“bundle exec sidekiq [options]”在这台机器上启动 sidekiq 的工作人员。理想情况下，我希望避免在这台机器上设置一个完整的单独的 ruby​​ 环境来执行此操作，但无论哪种方式正常运行，sidekiq 都需要访问已爆炸/已安装的应用程序环境等。

有没有一种公认的方式来做这样的事情？有没有更好的方法在像这样的情况下启动 sidekiq ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:37:30.523

[这个](https://github.com/kares/jruby-rack-worker)项目可能会有所帮助。它允许您将任何可能是 rake 任务的内容打包到 jar 文件中。他们的文档有一些关于莺使用的具体说明。看一看！

有关如何从命令行外部运行 Sidekiq 的说明，请从项目根目录运行类似以下内容：

`cat $(bundle show sidekiq)/bin/sidekiq`

你应该看到一些行：

```
cli = Sidekiq::CLI.instance
cli.parse
cli.run 
```

如果您阅读 CLI 类，您会注意到 parse 将 ARGV 作为默认参数，但您可以使用自己的参数覆盖它：

```
cli.parse "-q myqueue -e production".split(' ') 
```

# wait - 木偶如何让木偶等待几秒钟

> ID：14470724
> 
> 赞同：11
> 
> 时间：2013-01-23T00:51:07.580
> 
> 标签：wait, puppet

我想运行一个网络服务并等待几秒钟后得到结果。

在 puppet 中实现等待的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T03:00:14.173

您可以将 linux sleep 命令与 exec 一起使用，并将其暂存为在 Web 服务之后运行。就像是 ：

```
exec { 'wait_for_my_web_service' :
  require => Service["my_web_service"],
  command => "sleep 10 && /run/my/command/to/get/results/from/the/web/service",
  path => "/usr/bin:/bin",
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-23T06:58:24.763

我对仅本地等待 + 可配置重试的看法。

```
define wait_for_port ( $protocol = 'tcp', $retry = 10 ) {
  $port = $title
  exec { "wait-for-port${port}":
    command  => "until fuser ${port}/${protocol}; do i=\$[i+1]; [ \$i -gt ${retry} ] && break || sleep 1; done",
    provider => 'shell',
  }
}

wait_for_port { '3000': } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T14:46:44.427

我有一个执行 DSC 资源的类，但需要等待 20 秒才能执行它。因此，我在 dsc 资源之前使用了一个依赖于 Powershell 的 exec 资源：

```
$command = 'Start-Sleep -Seconds 20'
exec { 'wait_time':
    command   => $command,
    provider  => powershell,
    timeout   => 0,
    tries     => 3,
    try_sleep => 10
} 
```

当然，您可以省略或更改 try 和 try_sleep 参数。

# c# - 快速缩放/裁剪位图图像流以在 WPF 中显示

> ID：14470726
> 
> 赞同：2
> 
> 时间：2013-01-23T00:51:37.473
> 
> 标签：c#, .net, wpf, windows, video-capture

### 问题：

什么是缩放和/或裁剪从 a 提供的`WritableBitmap`用于在 UI 中显示的位图的快速方法？

### 要求：

1.  CPU使用率低
2.  处理大图像（5 兆像素，大约 2500x2000 像素）
3.  调整大小和/或裁剪到与显示位图的 UI 元素相同的分辨率/区域。
4.  使用 WPF

具体来说，它必须允许 14FPS 5 兆像素的相机图像流全速显示在 WPF UI 元素中。

### 更新：

我已经能够通过`Canvas`使用`ImageBrush`如下方式绘制到控件来加快绘图速度，`m_bitmap`我的`WriteableBitmap`:

```
ImageBrush brush = new ImageBrush();
brush.ImageSource = m_bitmap;
brush.Stretch = Stretch.Uniform;
canvas.Background = brush; 
```

我现在能够获得完整的 14FPS，尽管它仍然使用大约 20% 的 CPU，所以我不确定如果我添加另一个或两个摄像头（计划是运行 4 个左右）它的性能如何。

我认为可能会减慢绘图速度的另一件事是图像采用单色 Gray8 格式，而不是标准的 RGB32（或者它是 WPF 的 bgra32？）格式。如果我理解正确，则必须将图像转换为要显示的标准格式，这会大大增加每一帧的绘制时间。

### 一些背景：

我目前正在使用 5 兆像素、14 FPS 的摄像机，并试图让帧全速渲染到屏幕上。我想使用 WPF 来做到这一点。

我目前在 WinForms 中有一个针对未缩放图像全速运行的示例，但是（正如我所料）如果我将`pictureBox.SizeMode = Zoom;`. 该示例直接从相机流中读取原始数据到缓冲区，然后将数据从缓冲区复制到设置到`PictureBox`控件的位图中。复制算法使用 LockBits 来加快速度。

我将该示例转换为 WPF，使用对象重写部分`Bitmap`以使用`WritableBitmap`对象和`Image`控件而不是`PictureBox`. 不幸的是，这无法以任何合适的速率（缩放或未缩放）将流渲染到屏幕上。两者都有显着的 CPU 负载和非常缓慢的更新。

关闭渲染到屏幕时的性能非常好。它能够以全速和分辨率处理图像流，同时使用大约 3% 的 CPU 和不到 100MB 的内存。

*注意：当我说关闭屏幕渲染时，WritableBitmap 仍在不断更新，只是没有设置为 Image 控件。*

我已经看到很多关于在 WPF 中获得快速位图更新的讨论，但未能使其以合理的速度/cpu 负载工作。另外，我希望以可以看到整个图像的方式缩放图像。

我想关键在于需要完成的某种缩放/裁剪组合，以便 WPF 不会尝试渲染（缓存？）所有 500 万像素，而只会渲染屏幕上的像素，并且仅以当前屏幕分辨率. 我想/希望这可以相当容易地完成，并且不会对内存或 CPU 造成太大影响，但目前不知道该怎么做。我找到了`DecodePixelWidth`and`DecodePixelHeight`属性，但这些仅适用于将图像从文件加载到`BitmapImage`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:42:36.230

你看过下面的帖子吗？

[调整 WritableBitmap 的大小](https://stackoverflow.com/questions/3300986/resizing-the-writablebitmap)

如果它不能解决您的问题，我还有更多问题要问您：

你的图像分辨率是多少？你的 UI 元素的大小是不变的吗？它的大小是多少？

* * *

编辑：编辑后，我注意到您想以 Gray8 PixelFormat 显示 BitmapImage，为什么不尝试在创建 BitmapImage (m_bitmap) 时设置此属性？m_bitmap.Format = PixelFormat.Gray8; // 无法测试

我敢肯定，在没有获得任何质量的情况下，采用 8 位/像素并将每个像素所需的位数乘以 4 会减慢您的应用程序的速度。尤其是因为您可以在每像素 8 位的图像上运行这些操作，但您可以在每像素 32 位的图像上运行这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:40:35.343

虽然它的界面有点过时，但我相信***convert***（参见[http://en.wikipedia.org/wiki/ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)）非常常用（实际上可能是行业标准）。

***编辑：*** StackOverflow 有大约 2,300 个问题标记为`imagemagick` [here](https://stackoverflow.com/questions/tagged/imagemagick)。例如参见[ImageMagick convert 中的 sample/resample/scale/resize/adaptive-resize/thumbnail 运算符有什么区别？](https://stackoverflow.com/q/8517304/318716)

[https://apple.stackexchange.com/a/41531](https://apple.stackexchange.com/a/41531)的 OP决定使用 ImageMagick。[在 PHP 中对 Efficient JPEG Image Resizing](https://stackoverflow.com/q/12661/318716)的公认答案也建议使用 ImageMagick，获得 19 票。

但是，我不知道 ImageMagick 是否能够满足您对*14FPS, 5 Megapixels*的要求。

[对 Linux 上实时图像处理工具推荐](https://stackoverflow.com/q/3461031/318716)的唯一答案是 fork [graphicsmagick](http://www.graphicsmagick.org/)，它似乎也可用于 Windows。

# android - Android Datepicker 显示日历而不是年份

> ID：14470730
> 
> 赞同：2
> 
> 时间：2013-01-23T00:52:07.183
> 
> 标签：android, android-layout

遇到 Datepicker 的问题 - 不确定我是否误解了它应该如何使用。在图形布局编辑器中，我添加了一个 Datepicker 并将该布局添加到我的活动中。当我运行应用程序时，月份和日期显示正常，但我看到的不是年份，而是日历，我不知道为什么。有任何想法吗？

[点击查看问题截图](http://screencast.com/t/hgDU3jbmwhs)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout>

public class BirthdayActivity extends Activity {    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_birthday);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T01:01:30.107

默认情况下显示。您可以使用以下方法将其设置为 false：

```
setCalendarViewShown(boolean shown) 
```

第一行[文档](http://developer.android.com/reference/android/widget/DatePicker.html#getCalendarView%28%29)：

> 此类是用于选择日期的小部件。日期可以通过年、月、日微调器或[CalendarView](http://developer.android.com/reference/android/widget/CalendarView.html)来选择。还有另一个相关[的帖子](https://stackoverflow.com/questions/9462448/how-to-turn-off-calendarview-in-a-datepicker)。

# ubuntu - ubuntu 12.04 的 switch2osm 教程出现问题

> ID：14470731
> 
> 赞同：0
> 
> 时间：2013-01-23T00:52:13.843
> 
> 标签：ubuntu, openstreetmap, mapnik

我正在遵循[本指南](http://switch2osm.org/serving-tiles/manually-building-a-tile-server-12-04/)，但是当我到达启动 tileserver 的部分时，会发生错误。

我在终端上执行了命令`renderd -f -c /usr/local/etc/renderd.conf`，但出现以下消息：

> “renderd [16156]：加载地图层‘默认’时出错：XML 文档格式不正确：未定义实体‘数据源设置’（在文件‘/path/to/mapnik-style/osm.xml’中遇到’在第 4060 行）”

我还是决定启动服务器`sudo /etc/init.d/apache2 restart`

一切顺利，没有致命错误。

我去 localhost/osm_tiles2/0/0/0.png 看看它是否有效，会发生什么：

> 未找到 在此服务器上未找到请求的 URL /osm_tiles2/0/0/0.png。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T12:32:48.390

如果你从一个包中安装了 osm2pgsql，你的导入风格可能已经过时了。[通过将其下载](https://github.com/openstreetmap/osm2pgsql/blob/master/default.style)到 mapnik-stylesheets 目录并将 --style（或 -S）选项添加到 osm2pgsql 命令以指向此最新文件，确保您拥有并使用最新版本。（根据需要调整目录。）

```
osm2pgsql --style ~/mapnik-stylesheets/default.style --database gis --username gisuser --slim planet-latest.osm.pbf 
```

# html - 使用 clojurescript 在 HTML 页面上渲染 Three.js 场景

> ID：14470732
> 
> 赞同：9
> 
> 时间：2013-01-23T00:52:23.227
> 
> 标签：html, three.js, clojurescript

我正在尝试在clojurescript 中实现为three.js[创建场景示例。](http://mrdoob.github.com/three.js/docs/55/#Manual/Introduction/Creating_a_scene)

我没有做动画，只想显示静态场景（绿色块）。

问题似乎出在调用渲染场景的这个函数中。

```
 (defn ^:export draw []
      (.render renderer scene camera)
    ) 
```

这就是从 HTML 调用的内容。

```
 %script{:type => "text/javascript"}
      three.demo.draw(); 
```

例如，当我让它在文档正文中打印出“HELLO”时，它会查看并运行绘图功能。

```
 (.write js/document "HELLO") 
```

我不知道出了什么问题，页面上的所有其他内容都已呈现。

在这个 HTML 文件中，我有

```
<script src='https://raw.github.com/mrdoob/three.js/master/build/three.js'></script>
<script src='js/main.js' type='text/javascript'></script>
<script type='text/javascript'>goog.require('main')</script> 
```

和

```
<script type='text/javascript'>
  three.demo.draw();
</script> 
```

下面是 main.js 的结尾，它是从 clojurescript 文件创建的 Javascript。

```
 goog.provide("three.demo");
    goog.require("cljs.core");
    goog.require("goog.dom");
    three.demo.scene = new THREE.Scene;
    three.demo.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1E3);
    three.demo.renderer = new THREE.WebGLRenderer;
    three.demo.renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(three.demo.renderer.domElement);
    three.demo.geometry = new THREE.CubeGeometry(1, 1, 1);
    three.demo.material = new THREE.MeshBasicMaterial(cljs.core.ObjMap.fromObject(["\ufdd0'color"], {"\ufdd0'color":255}));
    three.demo.cube = new THREE.Mesh(three.demo.geometry, three.demo.material);
    three.demo.scene.add(three.demo.cube);
    three.demo.camera.position.setZ(5);
    three.demo.draw = function draw() {
      three.demo.renderer.render(three.demo.scene, three.demo.camera);
      return document.write("HELLO")
    };
    goog.exportSymbol("three.demo.draw", three.demo.draw); 
```

在 project.clj 文件中的 :cljsbuild 下有

```
 :foreign-libs [{:file "https://raw.github.com/mrdoob/three.js/master/build/three.js"
                    :provides ["three"]}] 
```

我尝试了 :externs 和 :foreign-libs ，但似乎都不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-29T10:05:33.510

[创建场景](http://mrdoob.github.io/three.js/docs/#Manual/Introduction/Creating_a_scene)代码的直接翻译是：

```
(defn ^:export example []
  (let [scene (js/THREE.Scene.)
        width (.-innerWidth js/window)
        height (.-innerHeight js/window)
        camera (js/THREE.PerspectiveCamera. 75 (/ width height) 0.1 1000 )
        renderer (js/THREE.CanvasRenderer.)
        geometry (js/THREE.CubeGeometry. 1 1 1)
        material (js/THREE.MeshBasicMaterial. (clj->js {:color 0x00ff00}))
        cube (js/THREE.Mesh. geometry material)
        render (fn cb []
                   (js/requestAnimationFrame cb) 
                   (set! (.-x (.-rotation cube))  (+ 0.1 (.-x (.-rotation cube))) )
                   (set! (.-y (.-rotation cube))  (+ 0.1 (.-y (.-rotation cube))) )
                   (.render renderer scene camera)
                 ) 
        ]
    (.setSize renderer width height)
    (.appendChild js/document.body (.-domElement renderer) )
    (.add scene cube)
    (set! (.-z (.-position camera))  5)
    (render)
    )
  ) 
```

这不是使用`:foreign-libs`and `:require`; 它使用直接的 JS 互操作并假定之前加载了 three.js。它可能可以以更好的方式完成，但这是一个有效的一对一翻译。

# php - php 代码 - 试图循环数组

> ID：14470733
> 
> 赞同：1
> 
> 时间：2013-01-23T00:52:32.107
> 
> 标签：php

在循环浏览一些数据时，我注意到一些奇怪的行为。我确定这很简单，但我似乎无法找到错误。我有以下逻辑：

```
 <?php
            print 'dumping data : <BR>';
            var_dump($portvlan);
            print '<BR>';
            print 'looping through data: <BR>';
                foreach ($portvlan as $vlandetail){
                    echo 'Vlanid: '.$vlandetail['VlanId'].'<BR>';
                    echo 'Name: '.$vlandetail['Name'].'<BR>';
                    echo 'Mode: '.$vlandetail['Mode'].'<BR>';
                }
            ?> 
```

这是我得到的输出：

```
dumping data :
array(3) { ["VlanId"]=> string(2) "33" ["Name"]=> string(6) "USR_33" ["Mode"]=> string(6) "Access" }
looping through data:
Vlanid: 3
Name: 3
Mode: 3
Vlanid: U
Name: U
Mode: U
Vlanid: A
Name: A
Mode: A 
```

我期望看到它打印一行包含 3 个单元格的行，其值如下：33、USR_33、Access。

你能告诉我哪里出错了吗？谢谢。

**编辑 1**

当 $portvlan 数组有多个条目时，此逻辑可以正常工作。例如，在另一组数据上，var_dump 给出以下结果：

```
array(6) { [0]=> array(3) { ["VlanId"]=> string(1) "1" ["Name"]=> string(1) "1" ["Mode"]=> string(5) "Trunk" } [1]=> array(3) { ["VlanId"]=> int(2) ["Name"]=> int(2) ["Mode"]=> string(5) "Trunk" } [2]=> array(3) { ["VlanId"]=> int(3) ["Name"]=> int(3) ["Mode"]=> string(5) "Trunk" } [3]=> array(3) { ["VlanId"]=> int(4) ["Name"]=> int(4) ["Mode"]=> string(5) "Trunk" } [4]=> array(3) { ["VlanId"]=> int(5) ["Name"]=> int(5) ["Mode"]=> string(5) "Trunk" } [5]=> array(3) { ["VlanId"]=> string(2) "33" ["Name"]=> string(2) "33" ["Mode"]=> string(5) "Trunk" } } 
```

并且循环逻辑工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:54:27.480

`$vlandetail`将在循环的每次迭代中填充来自数组的不同项目。您不应该将其`$vlandetail`视为数组。直接用就行了。

要获取数组条目的键名，您必须将循环结构更改为：

```
foreach ($portvlan as $key => $vlandetail) {
     echo $key . ': ' . $vlandetail . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:28:15.123

你怎么得到你的`$portvlan`？

如果你可以知道 is`$portvlan`不是一个数组`$vlandetail`，你可以简单地这样做，

```
$portvlan = array($portvlan);
// start loop 
```

或者您可以在循环之前执行此操作，以确保`$portvlan`数字数组由`$vlandetail`

```
$portvlan = (isset($portvlan[0]))?$portvlan:array($portvlan);
// start loop 
```

# python - Python 正则表达式标记

> ID：14470735
> 
> 赞同：0
> 
> 时间：2013-01-23T00:52:43.603
> 
> 标签：python, regex

我试图弄清楚如何在 Python 中使用正则表达式来提取字符串中的某些 URL。例如，我可能有 'blahblahblah (a href="example.com")'。在这种情况下，我想提取所有“example.com”链接。我怎样才能做到这一点，而不是仅仅拆分字符串？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:04:00.563

有一个很棒的模块，叫做 BeautifulSoup（链接：[http](http://www.crummy.com/software/BeautifulSoup/) ://www.crummy.com/software/BeautifulSoup/ ），它非常适合解析 HTML。您应该使用它而不是使用正则表达式从 HTML 获取信息。这是 BeautifulSoup 的示例：

```
>>> from bs4 import BeautifulSoup
>>> html = """<p> some <a href="http://link.com">HTML</a> and <a href="http://second.com">another link</a></p>"""
>>> soup = BeautifulSoup(html)
>>> mylist = soup.find_all('a')
>>> for link in mylist:
...    print link['href']
http://link.com
http://second.com 
```

这是文档的链接，非常容易理解：[http ://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:44:50.850

*不要使用正则表达式：*

这就是为什么在处理 HTML 或 XML（或 URL）时[不应该首先考虑正则表达式的原因。](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)

*如果您仍然想使用正则表达式，*

您可以找到几种可以完成这项工作的模式，以及几种获取您希望找到的字符串的方法。

这些模式可以完成工作：

`r'\(a href="(.*?)"\)'`

`r'\(a href="(.*)"\)'`

`r'\(a href="(+*)"\)'`

**1\. re.findall()**

```
re.findall(pattern, string, flags=0) 
```

> 返回字符串中模式的所有非重叠匹配，作为字符串列表。从左到右扫描字符串，并按找到的顺序返回匹配项。如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。空匹配包含在结果中，除非它们触及另一个匹配的开始。

```
import re
st = 'blahblahblah (a href="example.com") another bla <a href="polymer.edu">'
re.findall(r'\(a href="(+*)"\)',s) 
```

**2\. re.search()**

`re.search(pattern, string, flags=0)`

> 扫描字符串以查找正则表达式模式产生匹配的位置，并返回相应的 MatchObject 实例。

然后，`re.group()`通过小组进行。例如，使用 regex `r'\(a href="(.+?(.).+?)"\)'`，也可以在这里工作，你有几个封闭的组：组 0 匹配整个模式，组 1 匹配用括号括起来的第一个封闭子模式，`(.+?(.).+?)`

**仅在查找第一次出现的模式时**使用搜索。以你的例子，这将是

```
>>> st = 'blahblahblah (a href="example.com") another bla (a href="polymer.edu")'
>>> m=re.search(r'\(a href="(.+?(.).+?)"\)', st)
>>> m.group(1)
'example.com' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:33:14.870

正则表达式是非常强大的工具，但它们可能并非在所有情况下都是您的工具（正如其他人已经建议的那样）。也就是说，这是控制台中的一个最小示例，它根据请求使用正则表达式：

```
>>> import re
>>> s = 'blahblahblah (a href="example.com") another bla <a href="subdomain.example2.net">'
>>> re.findall(r'a href="(.*?)"', s)
['example.com', 'subdomain.example2.net'] 
```

专注于`r'a href="(.*?)"'`。在英语中，它翻译为：“找到一个以 开头的字符串`a href="`，然后将结果保存为任何字符，直到您点击下一个`"`。语法是：

*   意思是`()`“只在这里保存东西”
*   意思是`.`“任何字符”
*   意思是`*`“任意次数”
*   意思是`?`“非贪婪”或其他术语：找到满足要求的最短字符串（尝试不带问号，你会看到会发生什么）。

！

# android - 是否可以检测到蜂窝网络在 Android 中是否可用？

> ID：14470740
> 
> 赞同：3
> 
> 时间：2013-01-23T00:53:14.200
> 
> 标签：android, telephonymanager

我创建了一个可以通过单击按钮发送短信的应用程序，但奇怪的问题是，当没有覆盖范围时，应用程序强制关闭或不发送任何信息。所以我想检查一下是否有蜂窝网络覆盖，如果可以，我可以发送短信，否则请重试！

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:02:32.600

如果你的意思是“缺乏覆盖”，没有连接，你可以检查一下：http: [//developer.android.com/reference/android/net/ConnectivityManager.html#EXTRA_EXTRA_INFO](http://developer.android.com/reference/android/net/ConnectivityManager.html#EXTRA_EXTRA_INFO)

检查：EXTRA_NO_CONNECTIVITY

如果您在谈论信号强度，那么....您也可以将其用作参考：

[http://developer.android.com/reference/android/telephony/SignalStrength.html](http://developer.android.com/reference/android/telephony/SignalStrength.html)

# php - 从 mysql 获取最后 30 条记录，但不是最后 1 条

> ID：14470741
> 
> 赞同：1
> 
> 时间：2013-01-23T00:53:22.387
> 
> 标签：php, mysql, sql

我一直试图弄清楚/搜索如何做到这一点，但失败了。

我有以 id 作为主键和自动增量的表，以及一个计算成员点击次数的列点击器。我想要做的是平均最后 30 条记录的“点击者”的值，除了最后的最后 1

```
SELECT AVG(clickers) AS avgClickers FROM sitelogs_daily_stats ORDER BY id DESC LIMIT 30 
```

但是此代码包含最后的记录。我想跳过那个。

任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:54:36.737

将其包装在派生查询中：

```
SELECT 
    AVG(clickers) as avgClickers
FROM 
    (
        SELECT clickers 
        FROM sitelogs_daily_stats 
        ORDER BY id DESC 
        LIMIT 1,29
    ) AS t1 
```

请注意，在派生查询中，我们选择感兴趣的记录，然后在外部查询中对它们进行平均。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:03:47.600

```
SELECT AVG(clickers) AS avgClickers
FROM sitelogs_daily_stats
WHERE id BETWEEN
    (SELECT MAX(id)
     FROM sitelogs_daily_stats) - 29 AND
    (SELECT MAX(id)
     FROM sitelogs_daily_stats) - 1 
```

# javascript - 在另一个 HTML 元素中将标题属性显示为字符串

> ID：14470742
> 
> 赞同：0
> 
> 时间：2013-01-23T00:53:31.707
> 
> 标签：javascript, attributes, title

整天都在尝试一切以使这个工作没有运气。

我想将元素中的 title 属性`li`用作完全独立元素内的字符串`span`。

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function(){

    });
</script>
<div id="slider">
  <ul>
    <li class="slide" title="Careers">
        <img src="large-image-1.jpg" alt="Large Image 1" /> </li>
  </ul>
</div>
<div id="slide-thumbs">
  <ul>
    <li><img src="thumb-image-1.jpg" alt="Thumbnail for Large Image 1" />
        <span class="thumb-caption"><!-- need title attribute above reading "Careers" to go here --></span>
  </ul>
</div> 
```

我觉得我在这里错过了一些简单的东西。我只能使用 Javascript 来处理我正在使用的脚本。PHP 不是一个选项。任何帮助将不胜感激。

谢谢你，贾斯汀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:56:13.647

```
var title = $('.slide').attr('title');
$('span').html(title); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:10:26.900

JS 应该可以正常工作，但需要考虑的是您可以使用纯 CSS 来执行此操作并避免额外的标记。只需使用伪元素显示标题属性并将其放置在您喜欢的位置：

```
.slide:before {
    content: attr(title);
    position: absolute;
    display: block;
} 
```

由于标题已经显示在页面上，并且除此之外您没有生成任何其他内容，因此没有理由使用额外的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:13:27.813

如果有不止一张幻灯片，最好使用：

```
$('.thumb-caption').each(function(i) {
    $(this).html($('.slide').eq(i).attr('title'));
}); 
```

# javascript - 如何使宽度和高度画布等于 Iphone 中的浏览器大小

> ID：14470749
> 
> 赞同：0
> 
> 时间：2013-01-23T00:54:13.190
> 
> 标签：javascript, html

我在 Iphone 浏览器中遇到与宽度和高度画布有关的问题。在第一次加载中，我试图使此代码使画布的宽度和高度成为整页。如果在纵向模式下第一次加载，但在横向模式下不加载，则大小如预期的那样大。有没有另一种方法可以同时获取纵向和横向的全尺寸。

```
 var context = document.getElementById("myCanvas").getContext("2d");
     var canvasImage = document.getElementById("myCanvas"),
         canvasMessage = document.getElementById("myCanvas2"),
         canvasImage.width = window.innerWidth;
         canvasImage.height = window.innerHeight; // on portrait it give 1091 but not in                                 landscape
         canvasMessage.width = window.innerWidth;
         canvasMessage.height = window.innerHeight; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:48:20.953

它可能会帮助您将其包含在您的 HTML 页面中

```
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"  /> 
```

# javascript - 如何捕捉访问者在页面上的时间

> ID：14470756
> 
> 赞同：0
> 
> 时间：2013-01-23T00:54:30.230
> 
> 标签：javascript, analytics

我想跟踪访问者阅读页面的时间。如果他们关闭标签或最小化窗口，则在他们再次查看标签之前，时间不应计入页面上的时间。

我认为 javascript 和服务器端工作的某种组合将是必要的。

我正在努力解决的几个问题：

1.  将此信息存储在数据库中的最佳方式是什么？
2.  我如何使用 Javascript 以合理的准确度捕获页面上的时间？我是否存储“页面加载”、“用户空闲”、“用户返回”、“页面卸载”等事件，然后单独处理数据库中的所有事件以得出页面时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-04T01:25:43.870

我在一个小型 JavaScript 库中做了一些工作，该库可以计算用户在网页上停留的时间。它还有一个额外的好处，那就是更准确（虽然不是很完美）跟踪用户实际与页面交互的时间。它忽略了用户切换到不同选项卡、闲置、最小化浏览器等的时间。建议的谷歌分析方法有一个缺点（据我了解），它仅在您的域处理新请求时检查。它将先前的请求时间与新的请求时间进行比较，并将其称为“在您的网页上花费的时间”。它实际上并不知道是否有人正在查看您的页面，是否已最小化浏览器，自上次加载您的页面后是否已将选项卡切换到 3 个不同的网页等。

[https://github.com/jasonzissman/TimeMe.js](https://github.com/jasonzissman/TimeMe.js)

其用法示例：

**在加载您的页面时：**

```
document.onload = function() {
  TimeMe.setIdleDurationInSeconds(30);
  TimeMe.setCurrentPageName("my-home-page");
  TimeMe.initialize();  
} 
```

**检索在页面上花费的时间，并在用户离开您的页面时将其发送到您的服务器：**

```
window.onbeforeunload = function (event) {
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("POST","ENTER_URL_HERE",false);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    var timeSpentOnPage = TimeMe.getTimeOnCurrentPageInSeconds();
    xmlhttp.send(timeSpentOnPage);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:13:21.743

首先，您需要检测用户何时离开选项卡或处于非活动状态。发生这种情况时，启动计时器，当他们回来时，停止计时器。由于阻塞，使用 setTimeout/setInterval 计算时间可能不准确，因此我根据日期时间的实际差异为自己制作了一个准确的 javascript 计时器：[https ://gist.github.com/4600726](https://gist.github.com/4600726)

所以你的代码看起来像这样：

```
timer = new Timer;

window.addEventListener('focus', function() {
    timer.start();
}, false);

window.addEventListener('blur', function() {
    timer.stop();
    // send timer.msecs() to the server maybe??
    // if so, also call timer.reset();
}, false);

window.addEventListener('beforeunload', function() {
    timer.stop();
    // send timer.msecs() to the server via jquery post, or better yet websocket
}, false); 
```

然后您可以使用 timer.secs() 获取经过的时间。我想这取决于您希望向服务器发送信息的频率。你可以在模糊上做到这一点。

另一种选择可能是规定没有鼠标悬停意味着不活动。启动计时器，然后执行 setTimeout，然后在窗口的 mousemove 事件上取消 setTimeout 并启动另一个 setTimeout，然后停止计时器。

至于将数据发送到服务器，我可能会选择在模糊上发送它，当然还有在卸载之前发送。我首选的方法是使用[socket.io](http://socket.io/)，因为它速度快且始终连接，因此您可以使用它来实时跟踪大量用户事件，但您可以只对服务器进行 ajax 调用。如果您只是将它们作为迷你用户会话发送，{ user: *userId* , page: *pageId* , elapsedTime: *msecs* } 那么您可以在进行分析时在服务器端聚合数据。

# microsoft-sync-framework - 合并同步框架 2.1 范围

> ID：14470760
> 
> 赞同：0
> 
> 时间：2013-01-23T00:54:42.740
> 
> 标签：microsoft-sync-framework

我使用 SqlSyncScopeProvisioning 创建 ScopeA ScopeB 和 ScopeC。每个对应一个表，TableA TableB TableC。没有过滤器，所有数据都在服务器之间正确同步。

我现在想清理范围并有一个范围来覆盖所有表，而不是 3 个范围。我们称它为 ScopeAll。

如果我提供包含 TableA TableB TableC 的 ScopeAll，它是否会从 ScopeA ScopeB ScopeC 复制现有知识数据，以便不需要全部复制初始数据并再次同步？

之后，我将取消配置 ScopeA ScopeB 和 ScopeC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:39:07.217

不，它不会复制同步知识。范围不关心数据库中的任何其他范围。

# java - Properties.loadFromXML() 和 Properties.storeToXML() 方法的目的是什么？

> ID：14470763
> 
> 赞同：2
> 
> 时间：2013-01-23T00:55:46.543
> 
> 标签：java, xml, properties

我正在设计一个处理属性文件的简单库。

我注意到自 JRE 1.5 以来，该类[`Properties`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html)定义了如下方法：

```
public synchronized void loadFromXML(InputStream in)
public void storeToXML(OutputStream os, String comment) 
```

我质疑这是对此类 API 的真正增强。自 JRE 1.5 以来，属性文件一直是基于文本的文件，并且新引入的 XML 格式没有向功能添加任何内容，除了可以使用不同的格式，即

1.  更详细
2.  更复杂（理解、改变、解析）
3.  效率更低（它在内部使用 dom 来解析为 hastable：它消耗更多内存，在实现中需要辅助类，并且很可能也更慢）
4.  更脆弱（xml 需要转义字符 <>&"' 而属性只需要转义反斜杠，因为它还支持 Java 反斜杠转义）
5.  它破坏了使用它的程序的向后兼容性，因为运行 JDK 1.4 的用户将无法读取 xml 属性。（好吧，谁在乎……）

所以我无法理解 Sun 的工程师添加此功能的原因。

问题是：

> 有没有人发现使用基于 XML 的属性文件优于传统的基于文本的属性文件？

我需要评估这个问题，因为我不想在我之前引用的*简单库中添加无用的功能。*

> 您是否曾经在 Java 属性文件上使用过基于 XML 的属性文件？为什么？

注意：可以对 Log4J xml 文件格式提出同样的问题，但至少 Log4J xml 格式增加了嵌套能力和某种有意义的语法，我明白这一点。但是对于属性的这种 xml 格式，我没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:39:41.890

如果停留在 Java 环境中，使用 Java 属性文件效果很好。即使您希望其他编程语言与您的库进行交互，您也可以使用“常规”属性文件。但是，对于分层数据，XML 是标准。您可能希望支持此更改的原因（可能也是 Sun 包含它的原因）是其他编程语言具有用于解析 XML 文件以获取分层数据的大量库。

我回答的原因是因为我之前确实使用过这个功能！但不是一个很好的理由。在我现在正在处理的一个程序中，我发现将一组数据保存在属性对象中是最简单的，然后我将对象输出到 XML，以便以后可以由 Python 读取。目前，数据在 Python 脚本中被进一步操作，并且更多的子元素被添加到 XML 文件中。如果不能轻松地输出到 XML，这将更加痛苦。如果我有时间，我不会费心输出到 XML。我使用接收 XML 的 Python 代码的主要原因是因为其他人编写了它，我暂时使用它，直到我有时间重新评估我的程序的那个部分并重新编码它。

所以使用 XML 是有原因的！这不是一个好人，但这是一个原因。
我想还有其他类似的情况，其中将属性作为 XML 输出有助于与其他语言的兼容性，因为大多数语言都有一个健壮的 XML 解析库，并且它可以更容易地操作分层数据。而在科学编程中，你似乎很少能坚持使用一种语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:05:50.047

几点：

*   您可以使用标准的跨平台工具来创建它
*   您无需担心转义和字符编码的特殊性，因为您可以使用标准工具，这实际上使其更加健壮。旧的属性文件格式指定得很差。
*   标准的跨平台工具可以使用这些数据。
*   对于大多数使用 Java 的应用程序，一点启动时间不会产生太大影响（特别是考虑到系统其余部分的启动时间）。
*   Java SE 1.6 即将结束其生命周期。Pre-1.5 与 Java SE（或 EE）并不是特别相关。

但是不，我从未见过它实际使用过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T21:48:06.317

由于编码，Afaik 鼓励使用 XML 格式：（按规范）对于纯文件（我建议您[http://mojo.codehaus.org/native2ascii-maven-plugin/](http://mojo.codehaus.org/native2ascii-maven-plugin/)）严格使用 ASCII，UTF-8（默认）对于[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html)中所述的 XML 属性文件

编辑：对不起：ISO-8859-1 for property plain files

# java - 创建文件夹、创建文件、打印 logcat、发送电子邮件

> ID：14470765
> 
> 赞同：0
> 
> 时间：2013-01-23T00:55:54.860
> 
> 标签：java, android, eclipse

我对 Android 开发还是很陌生，所以如果我的问题看起来很愚蠢，我提前道歉。

在我的应用程序中，我有一个按钮。单击按钮时，它会尝试查看应用程序在内部存储中是否有自己的文件夹，如果没有，它会创建一个文件夹，然后创建一个名为 output.txt 的文件，然后将系统信息写入 output.txt，然后它尝试将所有包含“SIP_MESSAGE”的行从 logcat 写入 output.txt，然后通过电子邮件发送默认电子邮件地址。

* * *

## *编辑*

经过几天的辛勤工作，我设法把它们放在一起。请详细阅读下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:01:32.730

经过几天的研究和无数次的猜测和检查，我终于弄清楚了一切。我想花时间解释一切，以防万一有人遇到这个问题并遇到与我相同的问题。希望您正在寻找的一切都在这里，并且我给出了比您（和我）之前访问过的 100 个其他站点更好的解释。

第一个主题是内部和外部存储之间的区别（这不是 sdcard 和 not sdcard 之间的区别）。

内部存储是除了您的应用程序之外没有人可以看到或访问的东西。如果您在内部存储上创建文件或文件夹，则无法使用文件浏览器（除非您的 root）或您的计算机来查看您创建的内容，从您的应用程序外部完全无法访问它。

公用文件夹，例如 Documents/Downloads/Music/Ringtones/etc。从技术上讲，在您的外部存储上。您需要权限才能对其进行写入和读取。这就是我感到困惑的地方。我认为只有 sdcard 才算作外部存储，外部存储是您可以从计算机或文件浏览器手动获取的东西，无论它是否在 sdcard 上。

要在内部或外部存储上创建文件，您不需要使用 mkDir()。任何说你这样做的人都过于复杂化了事情。实际上，您可以仅通过代码在系统上的任何位置创建任何文本文件：

```
PrintWriter osw = new PrintWriter(Environment.getExternalStoragePublicDirectory(DOWNLOAD_SERVICE).toString() + "/output.txt"); 
```

这会在下载目录中创建一个文本文件，无论它是否首先存在。您还可以使用 getDataDirectory() 或您要创建文件的任何其他位置。

下一个 Logcat，就像其他人指出的那样，我试图在创建 logcat 时读取它。logcat 没有尽头，所以实际上，我的应用程序挂起，因为它一直在寻找更多可写的内容。解决这个问题的一个简单方法是使用 logcat 的 -d 功能。它所做的只是将所有内容都带到输入 -d 的位置（这正是我想要的），然后它停止，然后您可以将其放入缓冲区并获得输出而不会挂起。

最后，将文件附加到电子邮件意图。这个很棘手，因为有几个不同的领域最终给我带来了问题。简而言之，如果您收到错误“无法显示附件”，这意味着以下两种情况之一 - 1.) 您正在尝试从内部存储器附加文件（请记住，不允许其他程序访问内存，甚至是 gmail) 或 2.) 您没有使用 getAbsolutePath()。我发现很多人说你不能使用 uri.parse() 附加文件，而你必须使用 uri.fromFile()，这是错误的，我将向你展示如何附加文件而不是获取错误。

我希望这段代码对你有帮助，我希望你不要花费我 1/10 的时间来试图弄清楚这些东西。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.util.Calendar;

import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button mailb = (Button)findViewById(R.id.bmail);
    final TextView confirmation = (TextView)findViewById(R.id.Confirmation);
    mailb.setOnClickListener(new View.OnClickListener() {   
    @Override

    public void onClick(View v) {
        try {     
            PrintWriter osw = new PrintWriter(Environment.getExternalStoragePublicDirectory(DOWNLOAD_SERVICE).toString() + "/output.txt"); //This creates a file in my public download directory
               osw.println("Output Log: Report Tool");
               osw.println("Date: " + java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime())); 
               osw.println("------------------------------------");
               osw.println("Manufacturer: " + android.os.Build.MANUFACTURER);
               osw.println("Model: " + android.os.Build.MODEL);
               osw.println("Serial: " + android.os.Build.SERIAL);
               osw.println("BootLoader: " + android.os.Build.BOOTLOADER);
               osw.println("Build ID: " + android.os.Build.FINGERPRINT);
               osw.println("------------------------------------");
              try { 
                  Process p = Runtime.getRuntime().exec("logcat -d -v long"); //This gets the dump of everything up to the button press
                  BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
                  String line = null;
                  while ((line = reader.readLine()) != null) {
                    if(line.toString().contains("SIP_MESSAGE")){ //This parses out everything but SIP Messages
                    osw.println(line); }}}
              catch (IOException e1) {confirmation.setText(e1.getMessage()); }

               osw.flush();
               osw.close();

        } catch(Exception e){ confirmation.setText(e.getMessage()); }

        String attach = Environment.getExternalStoragePublicDirectory(DOWNLOAD_SERVICE).getAbsolutePath() + "/output.txt"; //This is where you need to use the absolute path!!
        Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("message/rfc822");
        i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"MyEmail@Email.com"});
        i.putExtra(Intent.EXTRA_SUBJECT, "Error Report.");
        i.putExtra(Intent.EXTRA_TEXT   , "Please see the attached file...");
        i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + attach)); //This is where you attach the file 
        try {
            startActivity(Intent.createChooser(i, "Send mail..."));}
        catch (android.content.ActivityNotFoundException ex) {
            confirmation.setText("There is no Email Client installed on this device.");}                
    }
});
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

最后，我为此使用的权限是 READ_LOGS、WRITE_EXTERNAL、READ_EXTERNAL。

我希望你喜欢，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:18:24.943

***哎呀！说话太快了，你的意思是内部的。***

您为什么不尝试将文件直接写入您的应用程序目录而不是创建文件夹。首先检查它是否有效。

***为此，您可以这样做：***

```
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

***这就是你要找的：***

```
File outputDir = new File(Environment.getExternalStorageDirectory()
            + "/farmer survey");
    outputDir.mkdirs();
    File outputFile = new File(outputDir, "something.csv");
    try {

        FileOutputStream fos = new FileOutputStream(outputFile);
        PrintWriter pw = new PrintWriter(fos);

        pw.println(text);
        pw.close();

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

***您还需要添加此权限：***

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:57:13.103

对于电子邮件部分，您是否打算自动发送？

如果是这样，我认为它不能在后台轻松完成。最好的办法是调用 Gmail 应用程序，并将 output.txt 作为附件附加。随后，您需要手动发送它。

否则编码可能会很长，请参见此处：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

或者另一种方式是通过短信发送出去，这可以在后台完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T02:25:58.843

您的清单中有 android.permission.READ_LOGS 权限吗？

# mysql - 两个mysql用户可以同名数据库吗

> ID：14470766
> 
> 赞同：2
> 
> 时间：2013-01-23T00:55:55.797
> 
> 标签：mysql, database

我想导入一个与现有数据库同名的数据库。

如果我使用不同的mysql用户会有什么问题吗？*覆盖* perharps ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:57:35.757

不可以。您只能拥有一个具有任何给定名称的 MySQL 数据库——您需要更改一个（或两个！）数据库的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T00:58:39.900

两个不同的数据库必须有两个不同的名称；MySQL 无法通过名称区分它们。例如，网络托管服务的一种常见做法是在数据库名称前加上用户名，因此数据库将被称为：

```
CREATE DATABASE user1_dbname
CREATE DATABASE user2_dbname 
```

MySQL*可以*将每个用户对一个数据库中的表的权限分开，这样就可以`user1`只访问一组特定的表，也`user2`可以访问另一组表，但这很难管理。真的，它们应该单独命名。

```
/* Separate SELECT permissions for user1 and user2 by table */
GRANT SELECT ON shared_dbname.user1table1,shared_dbname.user1table2 TO user1@localhost
GRANT SELECT ON shared_dbname.user2table1,shared_dbname.user2table2 TO user2@localhost 
```

# facebook-like - 如何居中 fb:like

> ID：14470767
> 
> 赞同：0
> 
> 时间：2013-01-23T00:56:00.263
> 
> 标签：facebook-like

我用这个fb like标签

```
<fb:like href="http://www.facebook.com/favoritebibleverses" send="false" width="300" height="30" show_faces="false" font="" ></fb:like> 
```

我想集中它的内容。

我已经尝试过这些，但没有任何工作正常

```
<fb:like href="http://www.facebook.com/favoritebibleverses" send="false" width="300" height="30" show_faces="false" font="" text-align="center" ></fb:like>

<fb:like href="http://www.facebook.com/favoritebibleverses" send="false" width="300" height="30" show_faces="false" font="" style='text-align:center;' ></fb:like> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:57:48.293

您需要将代码封装在 a`div`中才能正常工作。居中`div`，其中包含的内容将因此居中。我相信 fb:like 会导致`iframe`创建一个对象，从而防止它在没有周围的情况下居中`div`。

或者，您也可以使用`<center></center>`标签来使内容居中。

# c# - c# wpf应用程序中的时钟

> ID：14470768
> 
> 赞同：0
> 
> 时间：2013-01-23T00:56:10.327
> 
> 标签：c#, wpf, wpf-controls

*   我正在开发 c# wpf 应用程序，我想在我的应用程序中添加一个时钟：
*   如何在我的应用程序中制作那个时钟？
*   如何使我的应用程序时钟不链接到 Windows 时钟？
*   如何在我的应用程序中以不同样式显示时钟？
*   如何使它包含日历，时区...等..并通过我的应用程序本身修改这些东西？
*   我可以将数据库中的时间戳链接到应用程序时钟吗？如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:28:01.643

制作这样的时钟会很容易。

这是一个帮助您入门的小示例

xml:

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="143" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <StackPanel>
            <TextBlock Text="{Binding CurrentTime}" />
            <ComboBox ItemsSource="{Binding TimeZones}" SelectedItem="{Binding SelectedTimeZone}" />
        </StackPanel>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private string _currenttime;
    private TimeZoneInfo _selectedTimeZone;

    public MainWindow()
    {
        InitializeComponent();
        DispatcherTimer timer = new DispatcherTimer(DispatcherPriority.Background);
        timer.Interval = TimeSpan.FromSeconds(1);
        timer.IsEnabled = true;
        timer.Tick += (s, e) =>
            {
                UpdateTime();
            };
    }

    public List<TimeZoneInfo> TimeZones
    {
        get { return TimeZoneInfo.GetSystemTimeZones().ToList(); }
    }

    public string CurrentTime
    {
        get { return _currenttime; }
        set { _currenttime = value; OnPropertyChanged("CurrentTime"); }
    }

    public TimeZoneInfo SelectedTimeZone
    {
        get { return _selectedTimeZone; }
        set 
        { 
            _selectedTimeZone = value;
            OnPropertyChanged("SelectedTimeZone");
            UpdateTime();
        }
    }

    private void UpdateTime()
    {
        CurrentTime = SelectedTimeZone == null
               ? DateTime.Now.ToLongTimeString()
               : DateTime.UtcNow.AddHours(SelectedTimeZone.BaseUtcOffset.TotalHours).ToLongTimeString();
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

钟：

![在此处输入图像描述](../Images/4944c27b27003af33cc19407cbaf696b.png)

# vb.net - Windows 窗体关闭后删除的窗体数据

> ID：14470771
> 
> 赞同：0
> 
> 时间：2013-01-23T00:56:19.813
> 
> 标签：vb.net, winforms, .net-4.0

我有一个辅助表单，我可以在其中输入数据，然后在关闭表单并返回使用主表单之前将其保存。当我重新打开附属表格时，我看不到我之前输入的数据的变化。谁能告诉我我错在哪里？

```
 MainForm.vb
    Public Class Maincls
    oTestObj as New Testcls
    oTestObj.XYZ = "XYZ"

    Private Sub SoftwareSettingsToolStripMenuItem_Click(sender As System.Object, e As System.EventArgs) Handles SoftwareSettingsToolStripMenuItem.Click

    Testcls.tbXYZ.Text = oTestObj.m_XYZ
    Testcls.Show()
    End Sub
    End Class

    Form_Testcls.vb
    Public Class Testcls

    Structure Params
    Dim m_XYZ as String
    End Structure
    Dim oParams as Params

    Public Sub New ()
    InitializeComponent()
    End Sub

    Private Sub btnOK_Click(sender As System.Object, e As System.EventArgs) Handles btnOK.Click
    XYZ = tbXYZ.Text
    Me.Hide()
    End Sub

    Public Property XYZ() As String
            Get
                Return Me.oparams.m_XYZ
            End Get
            Set(ByVal value As String)
                Me.oparams.m_XYZ = value
            End Set
       End Property
    End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T12:05:17.583

我认为在 Windows 表单中，解决此问题的方法是创建一个静态类并根据您的要求添加属性。然后在关闭表单时填充这些静态属性。现在您可以使用静态数据成员中设置的值，除非您在任何其他事件上更改它们。

编辑：在 vb.net 中，静态实际上是`NonInheritable`

# c# - 在语音识别引擎处理流时写入流

> ID：14470774
> 
> 赞同：1
> 
> 时间：2013-01-23T00:56:48.570
> 
> 标签：c#, .net, multithreading, stream, speech-recognition

我正在使用 C# 和 .Net 4.5

我有一个 MemoryStream，我将它提供给 Microsoft 语音识别引擎，但如果无法识别该流。

问题是流是由另一个线程编写的，而语音识别访问它，因为我将 Stream.synchronized(stream) 对象交给语音识别访问本身不是问题，它是线程安全的。我认为位置指针有问题。当然，指针位于线程 1 写入流的新写入数据的末尾。所以线程 1 总是写入指针并将指针推到末尾，结果是指针总是指向流中的最后一个元素。识别引擎线程 2 认为没有什么新内容要读取，因为指针位于末尾。

image 唯一的解决方案是编写一个从流类派生的新类，该类具有两个单独的位置指针。一个用于写作，一个用于阅读。

还有其他解决方案吗？

问候，

最大限度

编辑：一些代码：

(Sre 线程)

```
SpeechAudioFormatInfo info = new SpeechAudioFormatInfo(16000, AudioBitsPerSample.Sixteen, AudioChannel.Mono);
sre.SetInputToAudioStream(stream, info);
sre.RecognizeAsync(RecognizeMode.Multiple); 
```

（UDP 线程）

```
test.Write(messagePart, 0, messagePart.Length);
        test.Flush(); 
```

# html - 并非所有图像都显示在 HTML 电子邮件中

> ID：14470777
> 
> 赞同：0
> 
> 时间：2013-01-23T00:57:04.060
> 
> 标签：html, email, newsletter, electronic-direct-mail

我有一个 html 电子邮件，在本地查看时可以在我的浏览器中完美显示，但是当我将其发送到 gmail/hotmail/yahoo 并选择“显示图像”时，它不会显示所有图像。

要下载的图像总量在 0.8 MB 区域内。

在仅显示部分图像而不是全部图像时，任何人都可以提出建议吗？是因为要下载的所有图像的总大小吗？如何确保显示所有图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:42:49.353

查看 html 电子邮件源（或 webversion 源）并将每个图像链接 url 复制并粘贴到浏览器中以查看它是否显示。如果不显示，则图像链接显然是错误的。

例如，如果您已将图像上传到像 Mailchimp 这样的 ESP，我会跟进他们了解图像未显示的原因。通常，他们会为图片创建一个 url，因此他们可以控制图片不显示的原因。

# node.js - 函数和module.exports错误问题NODE.js

> ID：14470779
> 
> 赞同：0
> 
> 时间：2013-01-23T00:57:17.713
> 
> 标签：node.js, function, random

:)

我有一个简单的答案供你们像往常一样回答。我是函数的新手，我看了一些关于将函数导出到另一个 node.js 应用程序的教程，

我试图为外部模块生成一些随机数。

这就是我的设置。

（index.js 文件）

* * *

```
 function randNumb(topnumber) {
 var randnumber=Math.floor(Math.random()*topnumber)
 }

 module.exports.randNumb(); 
```

（运行.js）

* * *

```
 var index = require("./run.js");

  console.log(randnumber); 
```

我的问题是当我运行 index.js 文件时，我从控制台收到此错误。

```
TypeError: Object #<Object> has no method 'randNumb'
    at Object.<anonymous> (C:\Users\Christopher Allen\Desktop\Node Dev Essential
     s - Random Number\index.js:8:16)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我一开始就运行了 run.js，这就是我得到的。

```
 ReferenceError: randNumb is not defined
    at Object.<anonymous> (C:\Users\Christopher Allen\Desktop\Node Dev Essential
    s - Random Number\run.js:3:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T04:09:32.490

在 randNum 函数中，不要忘记：

```
return randnumber; 
```

同样在 index.js 中，像这样导出函数：

```
exports.randNumb = randNumb; 
```

在 run.js 中像这样调用它：

```
console.log(randNumber(10)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:59:09.923

您根本没有导出 var。

你的 index.js 应该是：

```
function randNumb(topnumber) {
   return Math.floor(Math.random()*topnumber)
}
module.exports.randnumber = randNumb(10); //replace 10 with any other number... 
```

run.js 应该是：

```
var index = require("./run.js");
console.log(index.randnumber); 
```

# css - IE8：字体，TTF 文件大小限制？

> ID：14470780
> 
> 赞同：0
> 
> 时间：2013-01-23T00:57:21.710
> 
> 标签：css, internet-explorer, web, font-face

IE8 对将加载的字体文件的大小有大小限制吗？例如，以下代码似乎不适用于某些字体（尤其是超过 2MB 的字体），但适用于较小的字体：

```
<!DOCTYPE html>
<html>
<HEAD>
<style type="text/css"> 
@font-face {
    font-family: 'Symbola'; 
    src: url('Symbola.ttf');
    }
.bars { font-family: 'Symbola'; }
</style>
</HEAD>
<body>
<div class="bars">
&#x23F3;
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:46:50.677

IE 8 不支持`@font-face`. 如果它似乎对某些字体这样做，原因是您的计算机将命名字体作为已安装的字体。所以重要的不是大小，而是格式。

使用例如[Fontsquirrel @font-face 生成器](http://www.fontsquirrel.com/fontface/generator)来生成不同的字体格式，以实现跨浏览器功能。

# jquery - 在媒体查询 jquery 从侧边栏中删除 div

> ID：14470784
> 
> 赞同：0
> 
> 时间：2013-01-23T00:57:38.560
> 
> 标签：jquery, css

当最大宽度为 959px 时，我正在使用 jquery 从原始位置删除两个 div **.twitter**和**.email**，并将这两个 div 放在 div **#maininner**之后。

当最大宽度大于 959px 时，我希望这两个 div 回到原来的位置：它们都在自己的 div 类**.grid-box.width100.grid-v**中，它们在**#sidebar-a**中。

问题是#sidebar-a里面有多个.grid-box.width100.grid-v。如何让两个 div .twitter 和 .email 进入它们被删除的两个空 .grid-box.width100.grid-v ？

注意：我无法在多个 div 类 .grid-box.width100.grid-v 上放置单独的类。

```
$.onMediaQuery('(max-width: 959px)', {
        valid: function() {
        $("#sidebar-a ").remove().insertBefore($("#maininner"));    
        $(".twitter").remove().insertAfter($("#maininner"));
        $(".email").remove().insertAfter(("#maininner"));

        },

        invalid: function() {
        $("#sidebar-a").remove().insertAfter($("#maininner"));
        $(".twitter").remove().appendTo($(".grid-box.width100.grid-v"));
        $(".email").remove().appendTo($(".grid-box.width100.grid-v"));

        }
    }); 
```

提前感谢您的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:05:34.550

我认为最好的方法是使用`$.clone()`以克隆`.twitter`and`.email`值。然后隐藏原件。如果宽度发生变化，请重新评估当前宽度，然后相应地更改可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:43:15.927

当您可以为此使用简单的 css 规则时，为什么要使用 jQuery，请注意，只需将其添加到您的 css 文件中即可实现：

```
@media screen and (max-width: 959px) {
    .twitter,.email{
        display: none;
    }
} 
```

您可以根据屏幕大小隐藏或显示内容，而不是删除和附加内容。

# iphone - GPUImage 的 GPUImageOpacityFilter 未按预期运行，不会更改 Alpha 通道

> ID：14470786
> 
> 赞同：3
> 
> 时间：2013-01-23T00:58:12.017
> 
> 标签：iphone, ios, objective-c, opengl-es, gpuimage

我正在尝试`Overlay Blend`使用相机提要的输出来制作库存图像，其中库存图像的不透明度小于 100%。我想我可以`GPUImageOpacityFilter`在过滤器堆栈中放置一个，一切都会好起来的：

1.  GPUImageVideoCamera -> MY_GPUImageOverlayBlendFilter
2.  GPUImagePicture -> GPUImageOpacityFilter (Opacity 0.1f) -> MY_GPUImageOverlayBlendFilter
3.  MY_GPUImageOverlayBlendFilter -> GPUImageView

但这导致的结果不是将 GPUImagePicture 的 0.1f alpha 版本混合到 GPUImageVideoCamera 中，而是导致 GPUImagePicture 的颜色/对比度变柔和并混合。所以我做了一些搜索，并根据一个建议尝试从 GPUImageOpacity 过滤器中获取 UIImage`imageFromCurrentlyProcessedOutput`并将其发送到 BlendFilter：

1.  GPUImagePicture -> MY_GPUImageOpacityFilter (Opacity 0.1f)
2.  **[MY_GPUImageOpacityFilter imageFromCurrentlyProcessedOutput]** -> MY_alphaedImage
3.  GPUImagePicture (MY_alphaedImage) -> MY_GPUImageOverlayBlendFilter
4.  GPUImageVideoCamera -> MY_GPUImageOverlayBlendFilter
5.  MY_GPUImageOverlayBlendFilter -> GPUImageView

这完全符合我的预期。那么，为什么我必须这样做，这不`imageFromCurrentlyProcessedOutput`应该只是顺其自然吗？以下是上述两种场景的代码片段：

**第一：**

```
//Create the GPUPicture
UIImage *image = [UIImage imageNamed:@"someFile"];
GPUImagePicture *textureImage = [[[GPUImagePicture alloc] initWithImage:image] autorelease];

//Create the Opacity filter w/0.5 opacity
GPUImageOpacityFilter *opacityFilter = [[[GPUImageOpacityFilter alloc] init] autorelease];
opacityFilter.opacity = 0.5f
[textureImage addTarget:opacityFilter];

//Create the blendFilter
GPUImageFilter *blendFilter = [[[GPUImageOverlayBlendFilter alloc] init] autorelease];

//Point the cameraDevice's output at the blendFilter
[self._videoCameraDevice addTarget:blendFilter];

//Point the opacityFilter's output at the blendFilter
[opacityFilter addTarget:blendFilter];

[textureImage processImage];

//Point the output of the blendFilter at our previewView
GPUImageView *filterView = (GPUImageView *)self.previewImageView;
[blendFilter addTarget:filterView]; 
```

**第二个：**

```
//Create the GPUPicture
UIImage *image = [UIImage imageNamed:@"someFile"];
GPUImagePicture *textureImage = [[[GPUImagePicture alloc] initWithImage:image] autorelease];

//Create the Opacity filter w/0.5 opacity
GPUImageOpacityFilter *opacityFilter = [[[GPUImageOpacityFilter alloc] init] autorelease];
opacityFilter.opacity = 0.5f
[textureImage addTarget:opacityFilter];

//Process the image so we get a UIImage with 0.5 opacity of the original
[textureImage processImage];
UIImage *processedImage = [opacityFilter imageFromCurrentlyProcessedOutput];
GPUImagePicture *processedTextureImage = [[[GPUImagePicture alloc] initWithImage:processedImage] autorelease];

//Create the blendFilter
GPUImageFilter *blendFilter = [[[GPUImageOverlayBlendFilter alloc] init] autorelease];

//Point the cameraDevice's output at the blendFilter
[self._videoCameraDevice addTarget:blendFilter];

//Point the opacityFilter's output at the blendFilter
[processedTextureImage addTarget:blendFilter];

[processedTextureImage processImage];

//Point the output of the blendFilter at our previewView
GPUImageView *filterView = (GPUImageView *)self.previewImageView;
[blendFilter addTarget:filterView]; 
```

# cakephp - 在 cakephp 1.2 中使用抽象模型

> ID：14470787
> 
> 赞同：0
> 
> 时间：2013-01-23T00:58:24.933
> 
> 标签：cakephp, abstract, cakephp-1.2, cakephp-model

我正在开发一个基于 cakephp 1.2.2 的项目。我有以下情况。我有一些具有以下层次结构的模型类

```
Human_Abstract extends AppModel {
    var $table = 'livingBeing';
}

Man extends from Human_Abstract...
Woman extends from Human_Abstract... 
```

假设所有这些模型都需要使用同一张桌子，我该怎么做？因为我尝试过使用 var $table = 'livingBeing';

但如果我尝试

```
$man = new Man();
$man->findAll(...); 
```

findAll 方法使用

```
Man.fields 
```

并且不使用

```
LivingBeing.id 
```

那么......我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:22:47.023

```
var $useTable = 'living_being'; 
```

# javascript - 我应该在多大程度上强制 DOM 元素的 ID 的唯一性？

> ID：14470789
> 
> 赞同：0
> 
> 时间：2013-01-23T00:58:38.490
> 
> 标签：javascript, jquery, html, asp.net-mvc-3, dom

我遇到的问题有两种可能的解决方案。我不确定哪个解决方案“更正确”。

我有一个在页面上方打开的模式对话框。此对话框包含一个 ID 为“foo”的元素。

现在，这本身根本不是问题。但是，非对话框页面有多个选项卡。这些其他选项卡之一，在某些内容的深处，也有一个 ID“foo”。这会导致奇怪的间歇性问题，具体取决于遍历 DOM 树时首先遇到的“foo”。

不幸的是，这两个值都以完全相同的方式呈现完全相同的信息。唯一的区别是一个被托管在对话框中。使用了相同的模型——因此我的 ViewModel 生成了相同的 ID。

我可以做以下两件事之一：

*   显式覆盖这些 ID 创建方法之一，以确保对话框中生成的 ID 与非对话框中生成的 ID 相比是唯一的。
*   将我的 jQuery 搜索选择器修改为仅从对话框的表单向内读取——确保对话框不会捕获意外的 DOM 元素。

看起来第二个想法是一个更好的做法。我遍历的 DOM 节点更少，也不需要破解任何东西。但是，对于不知情的开发人员，由于没有从正确的区域开始搜索，仍然可能会意外地重新引入这个问题。

不过，同样的问题也适用于我们的应用程序的任何开发人员。他们需要明确知道要覆盖 ViewModel 的 ID 创建，这样它就不会创建相同的 ID。

如果以不同的形式封装重复的 ID，是否可以接受？对 ID 唯一性的期望在哪里不再有意义？

ID 是通过 MVC 的 EditorFor HTML Helper 生成的。我可以通过生成特定于表单的 ID 的方式覆盖它，但这显然不是 MVC 的意图。

```
<%= Html.EditorFor(model => model.CustomerDisplayName) %> 
```

**更新：**看来我应该强制执行 ID 的唯一性。但是，ASP.NET MVC3 似乎没有提供一种简单的方法来确保 ID 对 DOM 是唯一的。我可以在表单的 ID 上附加，但这会产生巨大的 ID.. 不确定这是否是最好的调用。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T01:05:39.203

> 如果以不同的形式封装重复的 ID，是否可以接受？

这是不可接受的，ID 应该是唯一的。否则您的文件无效。

> 对 ID 唯一性的期望在哪里不再有意义？

对 ID 唯一性的期望**永远不会**停止。每个元素都有一个唯一的 ID 是规范的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T20:19:40.573

对于您的问题“*我应该在多大程度上强制执行 DOM 元素的 ID 的唯一性？* ”，我大胆地回答“**您不应该强制执行唯一 ID** ”。

“亵渎神明！”，我听到法利赛人大喊大叫，大力挥舞着W3C圣经。但我生活在现实世界中。

**1.这是不可能的。**
创建一个保证 ID 唯一性的大型网站几乎是不可能的。现代网站由不相关的组件组装而成，无论是插件、广告、小部件，应有尽有。所有人都使用自己的一组 ID，而不知道页面上是否存在其他 ID。从技术上讲，唯一 ID 只能通过使用某种 GUID 来强制执行。当然，您可以使用类名或父 ID 对您的 ID 进行限定、前缀或后缀，并将其变成一个长的分层组合 ID。事实上，这种做法并没有那么糟糕。但不会有任何保证。底线。

**2\. 这不是你的错。**
跟着我重复：“这不是我的错……这不是我的错……”。我发现 W3C 团队保持这种过于简单的教条活着，而不看现实世界，这在智力上很懒惰和令人沮丧。他们是否建议如何执行此规则？当然不是——这不是他们的工作。他们只写规格。但是，如果没有人遵守法律，要么我们所有人都是邪恶的，注定要失败……要么是法律本身有错。所以，再一次，跟着我重复一遍：“这不是我的错……这不是我的错……”。

**3\. 有点创意，也许吧？**
难道真的没有办法调整这个死板的规则，想出一个切实可行的解决方案吗？在规范中还是在浏览器中实现？“id 范围”的一种形式？命名空间？

**4\. 达尔文说“为了生存，你需要适应。”**
在现实世界中生存的唯一方法是适应现实世界，尽管它的所有缺陷。一些生存建议（正如其他人已经建议的那样）：

*   您制作的 ID 越独特，出错的可能性就越小。
*   搜索 ID 时，假设您的页面上可能存在重复项。因此，尽可能限制您的搜索。

现在用石头砸我，我敢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T01:03:06.427

您可以控制 ID 吗？如果你这样做了，也许 ID 不是最“正确”的方法。如果您改用类，则：

```
$("#DialogID .foo") 
```

将选择它而不会`foo`成为重复 ID。上面的选择器会将搜索限制在指定的对话框内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T01:10:55.257

您应该 100% 强制执行 ID 唯一性

DOM 要求 ID 在其中是唯一的，否则它是无效的，并且正如您所发现的，如果您违反该要求，您会得到奇怪的，有时是间歇性的错误。

正如您所提到的，您可以引入一些基于上下文更改 ID 的方法，或者您可以采用组合类的方法，例如`<div class="main foo">`，`<div class="dialog foo">`您可以在哪里使用选择器来查找“div.main.foo”或“div.dialog.foo”——或者只使用“div.foo”来获取两者

# html - HTML Bootstrap 表单并且未与中心对齐

> ID：14470791
> 
> 赞同：0
> 
> 时间：2013-01-23T00:58:42.997
> 
> 标签：html, css, forms, twitter-bootstrap

我正在为网站制作一个简单的登录页面，但我的表单不会与中心对齐。如果您看一下[这里，](http://homegrowndevelopment.com/)您会发现它略微向右偏移。我已经尝试在表单周围添加一个容器 div，并且将其设置为一个带有 margin:0 auto 的块，但没有任何变化。我还尝试设置 class="span6 offset 3" 以将其对齐在中心，但仍然存在小偏移。我有一种感觉，其他 div 中的所有 div 都在建立某种边距，但我似乎无法弄清楚如何解决它。这是我的 HTML 代码：

```
<div class="row">
        <div class="span3"></div><!--/.span3-->
        <div class="span6">
            <div class="well span6" align="center">
                <form id="contact-form" name="contact-form" method="post" action="form-processing.php">
                    <input class="span6" name="Name" id="Fname" type="text" placeholder="Your name" required>
                    <input class="span6" name="Email" id="Email" type="email" placeholder="Your email" required>
                    <input class="span6" name="Message" id="Message" type="text" rows="3" placeholder="What's on your mind?" required><br>
                    <button type="submit" class="btn btn-primary" id="button">Submit</button>
                    <button type="reset" class="btn">Clear</button>
                </form>
            </div><!--/.well span6-->
        </div><!--/.span6-->
        <div class="span3"></div><!--/.span3-->
    </div><!--/.row--> 
```

这是我的非引导 CSS 代码：

```
h1 {font-family: marvel, serif; color:#060; font-size:90px; -webkit-text-stroke: 1px white;}
h2 {font-family: marvel, serif; color:#CCC; font-size:50px; -webkit-text-stroke: 1px black;}
p {color:white; font-size:20px;}
body{
    padding: 40px;
    margin:0 auto;
    background-image: url(../img/background.jpg);
    background-repeat: repeat;
    background-position: center center;
}
.welcome {padding:30px 0 0 0;}
#Message {overflow:hidden;}
.well {margin:0 auto;}
.navbar-fixed-top,.navbar-fixed-bottom{position:fixed} 
```

如果你能弄清楚问题是什么，我会给你烤一个馅饼之类的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:24:48.547

我建议不要编辑引导 css，而是像上面所做的那样包含你自己的 css。为您想要居中的特定创建一个 id，然后填充它直到它工作。看起来引导 css 干扰了您自己的 css 导致问题。它现在可以工作，所以如果您认为将来想要进行更改时只记住您自己的 css 很重要。最后一件事，打开引导页面，它可以让您在将跨度和行包含在页面中之前了解它们的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:53:45.107

这是我输入的新代码，与之前的代码几乎相同，但省略了 span6 类。现在一切都安排得很好。

```
<div class="row">
    <div class="span3"></div><!--/.span3-->
    <div class="well span6" align="center">
        <form id="contact-form" name="contact-form" method="post" action="form-processing.php">
            <input class="span6" name="Name" id="Fname" type="text" placeholder="Your name" required>
            <input class="span6" name="Email" id="Email" type="email" placeholder="Your email" required>
            <textarea class="span6" name="Message" id="Message" type="text" rows="3" placeholder="What's on your mind?" required></textarea><br>
            <button type="submit" class="btn btn-primary" id="button">Submit</button>
            <button type="reset" class="btn">Clear</button>
        </form>
    </div><!--/.well span6-->
    <div class="span3"></div><!--/.span3-->
 </div><!--/.row--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:21:06.217

看起来你的“好”类上的填充正在为引导程序的 span6 类增加宽度。

您可以通过添加“box-sizing:border-box;”来采用 box-sizing 路线。到您的井类或通过定位该特定 div 并将宽度从 570px（引导程序的 span6 宽度）减少到 532px（左右填充 19px）。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T18:25:27.433

请记住，对于引导程序，有一个“-offset-”类，它在对齐项目时非常有用。例如，您可以使用“col-md-12 col-md-offset-2”或 span6“col-lg-6 col-lg-offset-3”。

# scheme - 将文件夹与方案一起使用

> ID：14470792
> 
> 赞同：2
> 
> 时间：2013-01-23T00:59:33.573
> 
> 标签：scheme

如果我有一个程序清单。怎么能用`foldr`next来电？Like (new abs) => (new (abs x)) 注意：`foldr`应该返回一个过程。

我有

```
 (define next 
    (lambda (ls)
      (foldr (lambda (x) x) (lambda (x) x) ls))) 
```

但这给出了一个错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:10:58.283

传递给的第一个过程`foldr`必须有两个参数，如下所示：

```
(define next
  (lambda (ls)
    (foldr (lambda (x a) <???>) ; It's not clear what do you want to do inside
           (lambda (x) x)       ; this is the identity function, what's it for?
           ls))) 
```

只是要清楚：

*   to的第一个参数`foldr`是要执行的过程，它接收两个参数：第一个是列表中的当前值，第二个是到目前为止的累积值
*   to的第二个参数`foldr`是初始值，你在传递身份函数很可疑，我敢打赌这是不对的
*   第三个参数to`foldr`是要处理的列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:11:53.227

foldr 的第二个参数应该是结果的初始值，通常是一个空列表。

# c++ - 如何将多个 directx LP3DXMESH 组合成 1 个网格以进行快速渲染？

> ID：14470794
> 
> 赞同：0
> 
> 时间：2013-01-23T00:59:50.780
> 
> 标签：c++, directx, mesh

我读到将网格组合成一个网格并渲染速度要快得多，因为您一次发送所有数据。我使用的是directx9.0c，固定函数，c++。我有很多 LP3DXMESH，我想合并并一次发送来绘制。

我用谷歌搜索答案，我得到垃圾结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:02:10.603

要将多个网格合并为一个，非常简单，只需满足以下几个条件即可。

您的所有网格必须具有相同的顶点大小/布局（或[声明](http://msdn.microsoft.com/en-us/library/windows/desktop/bb206335%28v=vs.85%29.aspx)）

鉴于此，假设您有 3 个模型： 模型 1 有 10 个顶点和 21 个索引 模型 2 有 20 个顶点和 30 个索引 模型 3 有 25 个顶点和 45 个索引

创建一个能够容纳所有数据的顶点缓冲区（例如：10+20+25 个顶点）

将模型 1、模型 2 和模型 3 中的每个顶点复制到这个新的顶点缓冲区中。

以与顶点缓冲区相同的方式创建索引缓冲区（例如：21 + 30 + 45 个索引）

现在对于模型一，只需复制索引。

对于模型 2，您需要复制索引，但将 10 添加到每个索引（第一个顶点缓冲区的大小）。

对于模型 3，您执行与第二个相同的操作，但需要添加 10 + 20（每个先前大小的总和）。

使用新缓冲区创建网格。

关于一些考虑：

*   如果您不经常绘制模型（例如，每个绘制 3 个网格），那几乎不会给您带来任何好处。
*   如果您的每个模型都需要使用不同的转换（也经常更改）来绘制，那么您还需要在 cpu 中转换顶点（这会给您带来潜在的性能损失），或者在您的模型中添加一些额外的数据（就像只是一个 ID），并使用任何形式的查找（数组或纹理查找很常见）在 vertexshader 中进行转换。
*   在某些情况下使用这种技术实际上可能很好（比如多次重复同一个对象），但看起来不像您的用例。

# c# - 在c#中将整个xml文件复制到其他xml中

> ID：14470795
> 
> 赞同：1
> 
> 时间：2013-01-23T01:00:09.577
> 
> 标签：c#, xml, xml-parsing

我有这个 xml 文件： http: [//www.studiovincent.net/list.xml](http://www.studiovincent.net/list.xml)

我需要将整个内容复制到其他 xml 文件中。

我试过这段代码：

```
string sourcefile = "http://www.studiovincent.net/list.xml";
string destinationfile = "test.xml";
System.IO.File.Copy(sourcefile, destinationfile); 
```

但不起作用，因为我收到此错误：不支持 URI 格式。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:05:24.413

`File.Copy()`不支持该`http://`协议，因此出现`URI formats are not supported`错误。

您可以通过将页面内容读入字符串，然后将其写入文件来解决此问题。

```
WebClient client = new WebClient();
string contents = client.DownloadString("http://www.studiovincent.net/list.xml");

// write contents to test.xml
System.IO.File.WriteAllText ("test.xml", contents); 
```

*请注意，如果它不存在`WriteAllText()`将创建，如果存在则覆盖它。`test.xml`您还需要将上述代码包装在一个`try / catch`块中并捕获和处理适当的异常。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T01:10:09.157

我建议使用`WebClient.DownloadFile`. 下载字符串然后保存它可能会导致字符集映射出现问题。

```
WebClient client = new WebClient();
client.DownloadFile("http://www.studiovincent.net/list.xml", "test.xml"); 
```

这会直接复制文件，而不是将数据转换为字符串，这可能会进行一些字符串转换（例如，文件是 Unicode，并`WebClient`认为它是 UTF-8）然后复制到文件。

# html - Webkit边框半径结合css3 translate3D出血

> ID：14470796
> 
> 赞同：9
> 
> 时间：2013-01-23T01:00:12.547
> 
> 标签：html, webkit, css, flexslider

我在基于 Webkit 的浏览器上遇到一个问题，如果我将边框半径添加到 div，然后将 -moz-translate3d 应用于 ul 内部（这是因为在原始示例中我使用的是 flexslider 幻灯片），边框半径不适用并通过容器流血。

为了清楚地理解我在说什么，这里有一个关于这个问题的小提琴例子。如果我删除 translate3d 属性，则会应用边框半径。

HTML：

```
<div class="wrapper">
    <ul>
        <li>
            <div class="caption"><p>Test</p></div>
        </li>
        <li>
            <div class="caption"><p>Test</p></div>
        </li>
        <li>
            <div class="caption"><p>Test</p></div>
        </li>
        <li>
            <div class="caption"><p>Test</p></div>
        </li>
    </ul>
</div> 
```

CSS：

```
.wrapper {
    border-radius: 20px;
    position: relative;
    width: 500px;
    height: 200px;
    overflow: hidden;
}

.caption {
    position: absolute;
    bottom: 0;
    left: 0;
    background-color: rgba(0,0,0,0.8);
    padding: 2rem;
    -webkit-box-sizing: border-box;
    width: 100%;
    height: 3rem;
    color: #fff;
}

ul {
    width: 800%;
    -webkit-transform: translate3d(-500px, 0, 0); 
}

li {
    float: left;
    width: 500px;
    height: 200px;
    background-color: #000;
    position: relative;
}

.caption p {
    color: #fff;
} 
```

[http://jsfiddle.net/R5L3K/12/](http://jsfiddle.net/R5L3K/12/)

在 Mac 和 Windows 上的 Chrome 最新版本上对其进行了测试。

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T09:48:36.047

我以前回答过这个问题。这是一个 webkit 错误。

将此代码添加到您要添加边框半径的同一选择器中

```
-webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC); 
```

[http://jsfiddle.net/R5L3K/14/](http://jsfiddle.net/R5L3K/14/)

旧答案源 [flexslider border-radius 不会在 Chrome、Safari 中包装图像，但会在 Firefox 中](https://stackoverflow.com/questions/13476942/flexslider-border-radius-does-not-wrap-image-in-chrome-safari-but-will-in-fire/13477255#13477255)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T22:01:16.540

血止住了，太好了！我将它用于一个盒子，我正在使用 :before 添加一个箭头。但是，这似乎以某种方式神奇地使 :before 标签中的箭头消失了。有没有什么办法解决这一问题？

```
span {
position: relative;
border-radius: 5px;
-webkit-mask-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
}

span:before {
content: '';
width: 0;
height: 0;
top: 29px;
right: 100%;
visibility: hidden;
position: absolute;
border-width: 9px; /* 0.8em */
border-style: solid;
border-color: transparent rgba(000,000,000,0.85) transparent transparent;
} 
```

# ios - viewDidUnload 弃用和向后兼容性

> ID：14470798
> 
> 赞同：3
> 
> 时间：2013-01-23T01:01:08.813
> 
> 标签：ios, objective-c, memory-management

注意：我看到有人在这方面提出了一些问题，但似乎没有一个能够澄清我的疑问。

在 iOS6 之前，所有网点、图像和声音等大量资源都设置`nil`为`viewDidUnload`. 在 iOS6 之后，由于不再卸载视图，因此不再是这种情况。系统调用`didReceiveMemoryWarning`，这是放置此类资源中和的新推荐位置。

那么如果代码需要支持iOS4以上的一切呢？在运行 iOS 4 和 5 的设备上，`viewDidUnload`仍会被调用。而在运行 iOS6 的设备中，只会`didReceiveMemoryWarning`被调用。

这是否意味着我必须在两个地方复制代码？在这两个地方调用一个通用方法是一个好方法吗？请就行业中如何处理此问题提供您的意见或方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T01:21:22.880

是的，如果您支持 6.0 之前的 iOS 版本，您应该删除任何依赖于视图及其控件的`viewDidUnload`. 这是设备上运行的 iOS 的一项功能。显然，如果设备运行的是 6.0 或更高版本，则视图不会被卸载。无论如何，您应该清除`didReceiveMemoryWarning`.

您不应该在这两种方法中复制代码，因为这是不必要的。在 中执行与视图相关的清理`viewDidUnload`和与缓存相关的清除`didReceiveMemoryWarning`。而且，最重要的是，不要将特定于视图的清理从`viewDidUnload`（例如设置`IBOutlet`对 的引用`nil`，Interface Builder 用来添加到我们代码中的东西）复制到`didReceiveMemoryWarning`. 如果这样做，并且在 iOS 6 中收到内存警告，您将丢失`IBOutlet`未删除的视图的引用。

请参阅[iOS 6 - viewDidUnload 迁移到 didReceiveMemoryWarning？](https://stackoverflow.com/questions/12674268/ios-6-viewdidunload-migrate-to-didreceivememorywarning/12676743#12676743)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:05:39.283

`didReceiveMemoryWarning`可在 iOS 2.0 及更高版本中[使用](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/didReceiveMemoryWarning)，那么为什么不将它从 移动`viewDidUnload`到`didReceiveMemoryWarning`为所有人？

# c - 在 BLAS 库中调用 DDOT 函数

> ID：14470799
> 
> 赞同：1
> 
> 时间：2013-01-23T01:01:27.570
> 
> 标签：c, blas

我通过包含 BLAS 库在我的代码中调用 BLAS 函数，而我的代码显然是有问题的，因为编译器会吐出错误：*“ddot 未在此范围内声明。”*

```
#include <stdio.h>
#include <stdlib.h>
#include <blas.h>

int main()
{
        double  m[10],n[10];
        int i;
        int result;

        printf("Enter the elements into first vector.\n");
        for(i=0;i<10;i++)
        scanf("%lf",&m[i]);

        printf("Enter the elements into second vector.\n");
        for(i=0;i<10;i++)
        scanf("%lf",&n[i]);

        result = ddot(m,n);
        printf("The result is %d\n",result);

        return 0;
} 
```

关于如何正确修复此代码的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:44:59.893

从 C 调用时，函数名必须是`cblas_ddot()`（C 调用约定）或`ddot_`（fortran 调用约定；注意结尾的下划线。）

您缺少一些函数参数。尝试

```
result = cblas_ddot(10, m, 1, n, 1); 
```

或等效地

```
int len = 10, incm = 1, incn = 1;
// ...
result = ddot_(&len, m, &incm, n, &incn); 
```

此外， ddot 返回一个双精度值，但您将结果分配给一个 int。

# php - Codeigniter中Helper的作用

> ID：14470803
> 
> 赞同：0
> 
> 时间：2013-01-23T01:02:03.693
> 
> 标签：php, codeigniter, function

我有：

```
 function fetchlinks(){
    ## include the simpledom helper #########################################################
    $this->load->helper('simpledom');
    $this->simpledom->file_get_html("http://www.thesite.net/thesitepath");
        ############################################################################################  
        $htmlToSearch = file_get_html("http://www.thesite.net/thesitepath");
        foreach($htmlToSearch->find('a') as $element){
            echo "<h1 style='color:red; '>".$element->href."</h1> <br />";
        }    
    } 
```

我在这里调用并使用该函数：

```
$this->load->helper('simpledom');
$this->simpledom->file_get_html("http://www.thesite.net/thesitepath"); 
```

然后我如何*在*我的`foreach{}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:07:17.550

辅助函数只是声明的函数，如果需要它们会被加载。它们不是 CI 实例的属性。

请参阅[此处的文档。](http://ellislab.com/codeigniter/user-guide/general/helpers.html)

# android - 使用android编程的套接字，端口转发？

> ID：14470806
> 
> 赞同：0
> 
> 时间：2013-01-23T01:02:13.647
> 
> 标签：android, sockets, port

如果我从一部 Android 手机向另一部发送消息，并且两部 Android 手机都连接到 wifi，使用套接字编程是否需要在路由器上设置端口转发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:09:10.987

# 不

如果他们在同一个 WiFi/网络上。

## 如果两部手机在不同的网络上

需要进行端口转发。通常中间有一个路由器。

***常见用例：***

*   您正在访问不公开可见的计算机上的常用端口。例如：您正在托管一个网络服务器，因此使用了端口 80，但您还想在不同的机器上使用相同的端口。然后你会说转发端口 8080 并将其映射到另一台计算机的端口 80。
*   您有一个防火墙/代理，它只允许在几个端口范围内进行通信。

# backbone.js - Backbonejs 搜索集合与模型与对象默认

> ID：14470807
> 
> 赞同：1
> 
> 时间：2013-01-23T01:02:20.953
> 
> 标签：backbone.js, collections

我有一个这样的模型

```
var myModel = Backbone.Model.extend({
  defaults: {
      a: '',
      b: '',
      c: ''
  }
}); 
```

我的集合`myCollection`填充了数据，`c`值是对象列表。

我试图弄清楚如何在其中查找一个值`myCollection`，使其与我的模型中的项目匹配，`c`并在找到匹配项时返回该模型？

中的值`c`是对象，例如

```
"c": {"1": {}, "2": {}, "3": {}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:09:18.187

使用该[`find()`](http://underscorejs.org/#find)函数迭代集合并返回与您的条件匹配的第一个模型。像这样的东西：

```
result = myCollection.find(function (model) {
  return model.get("c").indexOf(5) != -1;
}); 
```

或者使用[`filter()`](http://underscorejs.org/#filter)代替`find()`, 来获取*所有*通过条件的模型。

# html - CSS 导航错误

> ID：14470808
> 
> 赞同：2
> 
> 时间：2013-01-23T01:02:25.173
> 
> 标签：html, css

我无法创建水平导航。我的问题是当我想弄乱 UL 和 UL 列表项的边距和填充时。

这些是我遇到的问题：

1.  当我尝试更改 -top 和 -bottom 属性时，似乎我几乎无法获得 UL 的 margin-top 以将列表项向下移动。

2.  当我使用 margin 和 padding 的 -right 和 -left 属性时，我会发现导航中出现了垃圾。我已经尝试改变宽度来克服这个问题，但它没有帮助。

**下面提供的 HTML 和 CSS 代码：**

```
<div id="HorizNav">
  <ul>
    <li><a href="#">Link #1</a></li>
    <li><a href="#">Link #2</a></li>
    <li><a href="#">Link #3</a></li>
    <li><a href="#">Link #4</a></li>
  <ul>
</div>

#HorizNav ul {
  float: right;
  text-Align: left;
  width: 660px;

  background: #ff0000;
  color: #fff;
  font-size: 1.5em;

  padding-top: 0px; padding-bottom: 0px;
  padding-left: 5px; padding-right: 5px;
}

#HorizNav ul li { display: inline; }

#HorizNav ul li a {
  text-decoration: none;
  background-color: #0000ff;
  color: #fff;
} 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:17:33.160

你没有结束`ul`标签。第二个`<ul>`应该是`</ul>`

我想你正在寻找`box-sizing: border-box;`.

```
#HorizNav ul {
    ...
    box-sizing: border-box;
    ms-box-sizing: border-box;
    webkit-box-sizing: border-box;
    moz-box-sizing: border-box;
   ...
} 
```

[演示](http://jsbin.com/epipof/1/edit)

# ruby-on-rails - 为什么 Pik 不安装 Ruby？

> ID：14470811
> 
> 赞同：4
> 
> 时间：2013-01-23T01:02:29.513
> 
> 标签：ruby-on-rails, ruby, pik

在尝试从这里安装 Ruby on Rails 失败后：[http](http://railsinstaller.org/) ://railsinstaller.org/ ，我现在尝试手动安装。

我想我会先安装 Pik，然后在命令提示符下点击“pik install ruby​​”。看起来，没有什么比这更简单的了。但是，我收到消息“找不到 Ruby”。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T06:15:06.613

虽然`pik`gem 不再维护，`pik`但从[这里开始](https://github.com/vertiginous/pik)仍然是在 Windows 上管理多个 ruby​​ 版本的最佳方式。（请有人再写一个。或者说服 Gordon Thiesfeld 让其他人来管理它。）

设置`pik`很痛苦（您需要手动安装 ruby​​ 版本，所需`devkit`的 s 然后告诉`pik`使用它们）。

如果您不需要多个 ruby​​ 版本，我建议您使用[这里](http://rubyinstaller.org/downloads/)的优秀安装程序并使用`gem install rails`来获取您的 windows，ruby on rails 修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T19:35:55.707

似乎 Pik 无法自动安装 Ruby。它只是红宝石版本的经理。为了在 Windows 上安装 Ruby，需要使用 RubyInstaller for Windows [http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)然后添加 C:\Ruby193\bin （或任何其他安装 ruby​​ 的路径）

# php - 如何使用 PHP 在另一个文件夹中创建文件夹

> ID：14470814
> 
> 赞同：-4
> 
> 时间：2013-01-23T01:02:47.920
> 
> 标签：php, mkdir

好的，所以基本上 Ilm 想看看是否有一种方法可以使用 PHP 在 Web 服务器上的另一个文件夹中创建文件夹。例如，我有 domain.com/script/testdir，所以我在 domain.com/script 文件夹中放置了一个脚本，名为 create_dir.php。每次我访问这个网页时，我希望它创建 testfolder，然后是 testfolder1，然后是 testfolder2，每次我刷新并访问 testdir 文件夹内的同一页面，所以在这个网站上刷新 10 次后，我可以在 testdir 中 cd 并查看 testfolder到 testfolder9 表示 10 个不同的文件夹。我似乎无法弄清楚如何做到这一点。我想最终在那里创建文件，但有没有办法可以设置它？任何帮助将不胜感激。我尝试了很多东西，我放弃了。如果有人可以给我一些帮助或向我展示如何完成这项工作的确切代码，因为我完全无能为力，我放弃了。我真的很感谢你们的帮助，你们都摇滚。请记住，我不希望它在一个中创建 dir1-10，而是每次 T 访问该页面时，所以如果我这样做 10,000,000 次，它将创建 10,000,000 个文件夹。

或者，如果甚至有办法将文件夹的名称设置为当前日期和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:13:45.990

```
function makeDirFromDate($path)
{
    $date = date('Y-m-d-H-i-s.u');

    if (!mkdir($path . '/' . $date, 0, TRUE))
        return FALSE;

    return TRUE
} 
```

这应该允许您以您想要的方式制作文件夹。只需给它路径，`/domain.com/script/testdir/`它就会使用年、月、日、小时、分钟、秒和微秒为您创建子目录。如果您同时运行两个测试，微秒就在那里，它不会创建两个具有相同名称的文件夹（这显然不起作用。）所以它可以防止这种冲突。

如果您真的想要，您也可以更改日期参数，所以也可以更改正斜杠。这将做的是，为日期创建子目录，看起来像这样。

`domain.com/script/testdir/2013/01/22/20/15/30/9876543`

# html - 链接之间的 br 标记不起作用

> ID：14470815
> 
> 赞同：1
> 
> 时间：2013-01-23T01:03:01.913
> 
> 标签：html, css, css-float

![在此处输入图像描述](../Images/9c9f4b0b5cceaa995a674cd413398ef6.png)如何使多维数据集中的链接分成两行我尝试在多维数据集中的两个单词之间给出 br 标签

[http://jsfiddle.net/VXXPC/23/embedded/result/](http://jsfiddle.net/VXXPC/23/embedded/result/)

```
<div style="height: 65px;">
          <div style="padding-bottom:14px;">
            <nav style="margin-left: 362px;">
                <a class="soCube" href="/html/">Customer Profile</a>
                <a class="poCube" href="/css/">SO</a>
                <a class="bomCube" href="/js/">Quote</a>
                <a class="rmaCube" href="/jquery/">Invoices</a>
                <a class="onOrderCube" href="/html/">Credit Memo</a>
                <a class="onHandCube" href="/html/">RMA</a>
                <a class="allocatedCube" href="/html/">Open AR</a>
                <a class="shippedCube" href="/html/">Payment</a>
            </nav>
          </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T01:32:43.560

稍微改变一下并将其放入列表中怎么样？

```
<div class="container">
    <div style="height: 100px;">
        <div style="padding-bottom:14px;">
            <nav style="margin-left: 10px;">
                <ul>
                    <li class="soCube"><a href="/html/">Customer<br>Profile</a></li>
                    <li class="poCube"><a href="/css/">SO</a></li>
                    <li class="bomCube"><a href="/js/">Quote</a></li>
                    <li class="rmaCube"><a href="/jquery/">Invoices</a></li>
                    <li class="onOrderCube"><a href="/html/">Credit<br>Memo</a></li>
                    <li class="onHandCube"><a href="/html/">RMA</a></li>
                    <li class="allocatedCube"><a href="/html/">Open<br>AR</a></li>
                    <li class="shippedCube"><a href="/html/">Payment</a></li>
                </ul>
            </nav>
        </div>
    </div>
</div> 
```

然后造型：

```
nav li{
display: table;
float:left;
margin-right: 10px;
height: 60px;
}

nav a{
    display: table-cell;
    vertical-align: middle;
    padding: 10px;
    font-family: verdana;
    font-size: 11px;
    color: white;    
}
nav {
  padding-bottom: 5px;
  padding-top: 5px;

}
.soCube{
  color: white;
  background-color: #999933;
}
.poCube{
  color: white;
  background-color: #669900;
}
.bomCube{
  color: white;
  background-color: #cc3300;
}
.rmaCube{
  color: white;
  background-color: #e8690b;
}

.onOrderCube{
  color: white;
  background-color: #663366;
}
.onHandCube{
  color:white;
  background-color: #669900;
}
.allocatedCube{
  color:white;
  background-color: #cc3300;
}
.shippedCube{
  color:white;
  background-color: #009999;
}
.costCube{
  color:white;
  background-color: #3366cc;
}
.priceCube{
  color: white;
  background-color: #ff6600;
} 
```

我修改了你的一些尺寸，所以我可以更好地调整它，但你可以理解。

**这是小提琴** [JsFiddle](http://jsfiddle.net/VXXPC/61/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:16:51.217

**建议一**：

1）您必须将链接的显示属性更改为`inline-block`

```
nav a {
    display: inline-block;
    *zoom: 1; /* if IE 6, 7 support required */
    *display: inline; /* if IE 6, 7 support required */
    color: gray;
    font-family: verdana;
    font-size: 11px;
    padding: 5px;
} 
```

2）从周围的父母中删除您的内联样式。

```
<div class="container">
    <div style="height: 65px;"> 
```

*[我建议使用 classes 将所有 CSS 移动到外部文件中](http://csswizardry.com/2012/10/a-classless-class-on-using-more-classes-in-your-html/)。*

3）然后`br`再次使用您的 -tag 。

**建议二**：

1）将你的锚包裹在`div`容器中。

```
<style>
    cube-wrapper-outer {
        margin-left: 362px;
    }
    cube-wrapper-inner {
        padding-bottom: 14px; /* instead of heaving the padding on a parent container */
    }

<nav class="cube-wrapper-outer">
    <div class="cube-wrapper-inner">
        <a class="soCube" href="/html/">Customer Profile</a>
        <a class="poCube" href="/css/">SO</a>
        <a class="bomCube" href="/js/">Quote</a>
        <a class="rmaCube" href="/jquery/">Invoices</a>
    </div>
    <div class="cube-wrapper-inner">
        <a class="onOrderCube" href="/html/">Credit Memo</a>
        <a class="onHandCube" href="/html/">RMA</a>
        <a class="allocatedCube" href="/html/">Open AR</a>
        <a class="shippedCube" href="/html/">Payment</a>
    </div>
</nav> 
```

2）再次，从周围的父母中删除您的内联样式。

```
<div class="container">
    <div style="height: 65px;"> 
```

希望能解决你的问题:)

# php - 如何均匀地旋转变量，除非它们是空白的

> ID：14470817
> 
> 赞同：0
> 
> 时间：2013-01-23T01:03:10.493
> 
> 标签：php, hyperlink, rotation

我知道如何编写旋转器，但我怎样才能制作一个跳过传递空 $stuff_link 变量的旋转器？

我有 4 个链接变量，如下所示，但有时它们是空白的。所以我需要做的是使用旋转器在 4 个变量之间旋转，但如果说 $stuff_link 是空白跳过它。

```
$stuff_link
$stuff_link2 
$stuff_link3
$stuff_link4 
```

下面的代码是我将它放在里面的地方。

```
if(percentChance(35) && $stuff_status == 1)
{

    rotator goes here       
} 
```

下面是 percentChance 的函数

```
function percentChance($chance){
// Notice we go from 0-99 - therefore a 100% $chance is always larger
$randPercent = mt_rand(0,99);
 return $chance > $randPercent;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:26:56.197

根据我从问题中可以理解的情况，您需要一个类似于以下的功能：

```
function isEmpty($link) {
    return ($link == NULL || $link == "");            
}

if (!isEmpty($stuff_link))
{
    // Only enters if not empty
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:52:42.637

您使用 4 个变量和最后一个没有数字的变量让事情变得有点有趣。如果您必须按原样使用它们，则可以这样做：

```
$stuffs = array('', '2', '3', '4'); // Array of possible variable endings
$random = array_rand($stuffs); // Pick one
$selected = $stuffs[$random]; // Get the ending

// Check if the variable is empty, if not pick another
while (empty(${'stuff_link'.$selected})) {
    $random = array_rand($stuffs);
    $selected = $stuffs[$random];
}

// Output
echo ${'stuff_link'.$selected}; 
```

如果您可以将变量移动到数组中，那么生活会变得更轻松：

```
// Example array
$stuff_link = array();
$stuff_link[] = 'stuff 1';
$stuff_link[]  = '';
$stuff_link[] = 'stuff 3';
$stuff_link[] = 'stuff 4';

shuffle($stuff_link); // mix them up

// Keep shuffling until the first value is not empty
while (empty($stuff_link[0])) {
    shuffle($stuff_link);
}

// Output
echo $stuff_link[0]; 
```

# powershell - 在引号中的字符串中转义@ powershell

> ID：14470820
> 
> 赞同：1
> 
> 时间：2013-01-23T01:03:19.000
> 
> 标签：powershell, curl, escaping, powershell-3.0

我正在尝试使用 powershell 运行 curl 命令，如下所示：

`$command=".\curl.exe -k -X POST --data @login.txt -H ""Content-Type:application/json;charset=utf-8"" https://myserversfqdn:4443/ControlPoint/api/v1/login"`

`$res= Invoke-Expression $command`

它给了我一个错误，说喷溅运算符@不能用于引用表达式中的变量..所以我在@login.txt之前添加了一个反引号..

`$command=".\curl.exe -k -X POST --data '@login.txt -H ""Content-Type:application/json;charset=utf-8"" https://myserversfqdn:4443/ControlPoint/api/v1/login"`

`$res= Invoke-Expression $command`

现在它给了我一个错误，说表达式缺少终止符'（反引号）。我不知道如何在这个命令中传递@字符？非常感谢任何指导

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:33:53.763

看起来您更像是使用单引号字符`'`而不是反引号：

> `

（请注意，反引号通常与 ~ 字符在同一个键上。）

但是您已经完成了答案的一半，您还可以将整个参数用单引号括起来，以将其作为未解析的字符串传递：

```
$command=".\curl.exe -k -X POST --data '@login.txt' -H ""Content-Type:application/json;charset=utf-8"" https://myserversfqdn:4443/ControlPoint/api/v1/login" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:56:32.310

您是否简单地尝试过：

```
.\curl.exe -k -X POST --data `@login.txt -H "Content-Type:application/json;charset=utf-8" https://myserversfqdn:4443/ControlPoint/api/v1/login 
```

# javascript - 滑动重复的背景图像

> ID：14470822
> 
> 赞同：0
> 
> 时间：2013-01-23T01:03:23.007
> 
> 标签：javascript, jquery

我有一个带有一堆徽标的背景图像，我想逐渐向左滑动以模拟股票行情。我知道有插件可以滑动多个图像，但这在我的场景中效果最好。

我将如何逐步添加新类，如下所示：

```
<div class="background-slider-start"></div>

.background-slider-start {
    background: url('my-image.png') repeat-x 0 0;
}
.background-slider-end {
    background: url('my-image.png') repeat-x -5000px 0;
}

$('.background-slider-start).addClass('background-slider-end', 30000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:07:25.253

`addClass`不接受持续时间，您可以尝试使用 CSS3 过渡：

```
.background-slider-start {
    background: url('my-image.png') repeat-x 0 0;
    -webkit-transition: background 30s;
    -moz-transition: background 30s;
    -o-transition: background 30s;
    transition: background 30s;
} 
```

```
setInterval(function(){
    $('.background-slider-start').toggleClass('background-slider-end');
}, 30000); 
```

# objective-c - 获取 x 轴上的触摸点的简单方法，Cocoa Touch

> ID：14470826
> 
> 赞同：0
> 
> 时间：2013-01-23T01:03:47.857
> 
> 标签：objective-c, cocoa-touch, touch, uistoryboard

看起来这应该很简单，但显然并非如此。

我正在使用 Storyboard，我的第一个视图控制器定义为`LogbookFirstViewController`.

此控制器的内容位于`UIControl`. 这样我就可以检测到水龙头。

但是，我看不到确定用户何时开始在屏幕上滑动的简单方法。我想要做的就是触摸 x 坐标。基本上跟踪它。

我掉了一个`UIPanGestureRecognizer`inside `LogbookFirstViewController`，并附上了它的出口：

在`.h`

```
@property (assign) IBOutlet UIGestureRecognizer *gestureRecognizer; 
```

当然，我然后合成它并设置委托：

在`.m`

```
[gestureRecognizer setDelegate:self];

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touchLoc = [touches anyObject];
    CGPoint beginCenter = self.view.center;
    CGPoint touchPoint = [touchLoc locationInView:self.view];

    deltaX = touchPoint.x - beginCenter.x;
    deltaY = touchPoint.y - beginCenter.y;
    NSLog(@"X = %f & Y = %f", deltaX, deltaY);
}

- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
    UITouch * touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self.view];

    // Set the correct center when touched
    touchPoint.x -= deltaX;
    touchPoint.y -= deltaY;

    self.view.center = touchPoint;
} 
```

但是，这无济于事。它甚至检测不到`-(void)touchesBegan`

我错过了什么？先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:42:30.080

这些方法不是委托方法，它们仅用于子类化`UIGestureRecognizer`。

通常，您实例化一个手势识别器并指定一个选择器（一种方法）以在识别该手势时调用，然后将其分配给一个视图，例如：

```
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
[self.view addGestureRecognizer:pan] 
```

然后在您的`pan`方法中，您可以从手势中查询信息：

```
- (void)pan:(UIPanGestureRecognizer *)gesture
{
    // get information from the gesture object
} 
```

我从来没有用 StoryBoard 做过，但我想如果你的视图控制器中已经有一个属性，你可以调用`addTarget:action:`它并将它附加到视图控制器`viewDidLoad`方法中的视图。

# php - 键值对比较

> ID：14470828
> 
> 赞同：0
> 
> 时间：2013-01-23T01:04:09.563
> 
> 标签：php, mysql, sql, wordpress

```
SELECT wposts.*, wpostmeta.*
    FROM $wpdb->posts wposts, $wpdb->postmeta wpostmeta, $wpdb->postmeta wpostmeta2, $wpdb->postmeta wpostmeta3
    WHERE wposts.ID = wpostmeta.post_id
        AND wposts.ID = wpostmeta2.post_id
        AND wposts.ID = wpostmeta3.post_id
        AND wpostmeta.meta_key = 'listing_subtype'
            AND wpostmeta.meta_value = '$search_home_type'
        AND wpostmeta2.meta_key = 'district'
            AND wpostmeta2.meta_value = '$search_district'
        AND wpostmeta3.meta_key = 'price_current'
            AND wpostmeta3.meta_value IS >= '$search_price_min' AND <= '$search_price_max'
        AND wposts.post_status = 'publish'
        AND wposts.post_type = 'vreb_property'
    ORDER BY wposts.post_date DESC 
```

该行`AND wpostmeta3.meta_value IS >= '$search_price_min' AND <= '$search_price_max'`试图确保**meta_key**的**meta_value 大于** `price_current`和`$search_price_min`小于`$search_price_max`

这行不通...

```
[You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '<= '100000' AND wposts.post_status = 'publish' AND wposts.post_type = 'vreb_' at line 11] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:17:43.910

```
AND <= '$search_price_max' 
```

应该是`<=`什么？您错过了该运算符的论点：这就是错误。

可能你的意思是：

```
AND wpostmeta3.meta_value <= '$search_price_max' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:18:52.460

```
AND wpostmeta3.meta_value IS >= '$search_price_min' AND <= '$search_price_max' 
```

需要是

```
AND wpostmeta3.meta_value >= '$search_price_min'
AND wpostmeta3.meta_value <= '$search_price_max' 
```

# javascript - 是否应该使用 IIFE 或对象属性来创建静态变量？

> ID：14470831
> 
> 赞同：1
> 
> 时间：2013-01-23T01:04:19.120
> 
> 标签：javascript

有时当我需要一个静态变量时，我会使用并立即调用函数表达式 (IIFE) - example1。

```
(function(){
    var private_statik = 'hi',
        publik = {};
    return publik;
}()) 
```

其他时候，我只是将它们作为属性添加到需要它们的函数中-example2。

```
function foo () {
}
foo.statik = 'hello'; 
```

Example1 很好，因为我得到了封装（隐私）的好处。示例 2 很好，因为它很简单，并且没有自动执行的开销。

还有其他需要考虑的事情吗？

我拥有的特定案例是换页器 - `sFlipPage()`. 我想将所有 DOM 元素缓存在一个静态位置，以便它们在每次调用时都可用，并且每次调用函数时都不必从 DOM 中提取它们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:05:09.213

主要区别在于隐私和执行顺序。使用 IIFE，您可以将静态变量设为私有。使用普通功能，您不能。为了鼓励良好的 OO 设计（封装），我建议默认使用 IIFE。

权衡是立即调用 IIFE，而不仅仅是在您需要该特定对象时。

# c++ - C++ const 编译器优化

> ID：14470832
> 
> 赞同：0
> 
> 时间：2013-01-23T01:04:26.083
> 
> 标签：c++, constants, compiler-optimization

假设我有以下代码：

```
int foo () {
    int const x = 0;
    return x;
} 
```

编译器是否允许将 x 移动到全局范围？

在下面的场景中呢？`res2`可能因优化而异？

```
std::set<int const *> addrs;

int foo () {
    int const x = 0;
    addrs.insert(&x);
    return addrs.size();
}

void bar () {
    int res1 = foo();
    int res2 = foo();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:21:13.950

不，编译器不能在全局范围内移动它，因为变量没有在全局范围内声明。范围与存储不同。范围表示可以从哪里访问变量 - 将其移动到全局范围意味着可以从任何地方访问它，这里不是这种情况。

程序的第二部分表现出**未定义的行为**。`addrs`函数退出后包含悬空指针。因为`std::set`在插入时比较现有指针，所以这是非法的。所以我会说是的，`res2`可能会有所不同，但因为UB，而不是你怀疑的原因。

# image - 从 Web 浏览器截取其他窗口

> ID：14470833
> 
> 赞同：0
> 
> 时间：2013-01-23T01:04:55.330
> 
> 标签：image, google-chrome, web, screenshot

我想创建一个 Web 应用程序，允许用户截取外部应用程序窗口，然后对图像进行一些处理。具体上下文 - 我希望该应用程序截取视频游戏加载屏幕，然后加载有用的赛前信息，以便在加载时为玩家提供即将到来的游戏的战略概要。但是我希望应用程序从浏览器运行，但游戏是外部 Windows 应用程序。我知道如何进行图像处理，以及将图像导入网络应用程序后如何加载信息，但不知道轻松抓取屏幕截图的最佳方法。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:16:35.930

我不认为这是可能的，因为能够捕获 Google Chrome 之外的应用程序的屏幕截图所涉及的安全风险，例如私人文档、电子邮件等。

存在的最接近的东西是`chrome.tabs.captureVisibleTab`，但它只允许您捕获当前选项卡的屏幕截图。

# javascript - Javascript window.location.href.indexOf 是 A 而不是 B

> ID：14470836
> 
> 赞同：2
> 
> 时间：2013-01-23T01:05:19.407
> 
> 标签：javascript

当 url 包含 gender=men&dir= 时，我正在使用以下内容进行 somting

```
if(window.location.href.indexOf("gender=men&dir=") > -1) {

      } 
```

现在我需要说 url 包含 gender=men&dir= 而不是 &dir=Schoenen 做某事

我正在尝试这只是它不起作用

```
if(window.location.href.indexOf("gender=men&dir=" || !"&dir=Schoenen") > -1) {

      } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T01:09:29.203

您必须调用`indexOf`两次：

```
var hasGender = window.location.href.indexOf("gender=men&dir=") != -1;
var hasDir = window.location.href.indexOf("&dir=Schoenen") != -1;

if ( hasGender && ! hasDir ) {
    // Do whatever you want...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-27T15:35:39.237

`||`不能这样使用。

您需要说明`window.location.href.indexOf`两次：

```
if (window.location.href.indexOf("gender=men&dir=") > -1) &&
    window.location.href.indexOf("&dir=Schoenen") == -1) {

}

// > -1 is if found
// == -1 is if not found 
```

如果要将 AND ( `&&`) 更改为 OR ( `||`)，则需要替换`&&`into `||`。

# python - Python 如何处理具有多个条件的布尔值？

> ID：14470841
> 
> 赞同：0
> 
> 时间：2013-01-23T01:05:45.677
> 
> 标签：python, performance, if-statement, python-2.7, return

如果我有一个基于两个或多个条件返回布尔值的函数，Python 会检查每个条件吗？

更具体地说，这是一个理论函数：

```
def f(x, y):
    return x < y and f2(x, y) == 1 
```

如果`f2`需要一段时间来执行，我应该改成`f`这个吗？

```
def f(x, y):
    if x >= y: return False
    return f2(x, y) == 1 
```

如果由于前面的向上`x`而大于或等于，Python 会自动返回 False吗？ 两者中哪个更快，为什么？`y``and`

我的问题同样适用于`or`语句，如果第一个条件为真，它会继续评估下一个条件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T01:08:17.363

来自[文档](http://docs.python.org/2/tutorial/datastructures.html#more-on-conditions)：“布尔运算符`and`和`or`所谓的短路运算符：它们的参数从左到右进行评估，一旦确定结果，评估就会停止。”

# jquery - Jquery addRemove 类 - If 语句

> ID：14470844
> 
> 赞同：0
> 
> 时间：2013-01-23T01:06:05.350
> 
> 标签：jquery, addclass, removeclass

当我为 jQuery 单击 Toggle 时，我需要删除 .hidesome 并将其更改为 .show ，反之亦然。

无法得到这个......它已经搜索了 4 个小时。

```
<a href="#" class="button">Toggle</a>
<div class="signatureContain">
<div class="signature hidesome">
    When the button above is pressed you should see the rest<br />
    "the rest"
</div>
</div>

<a href="#" class="button">Toggle</a>
<div class="signatureContain">
<div class="signature hidesome">
    When the button above is pressed you should see the rest<br />
    "the rest"
</div>
</div>

('.signatureContain').live('click',function(){
      if ($(this).hasClass('hidesome'))
      {
         $(this).removeClass('hidesome');
         $(this).addClass('show');
      } else
      {
         $(this).removeClass('show')
         $(this).addClass('hidesome');
      }
});

.hidesome{ height:20px;overflow:hidden}
.show{ height:auto } 
```

[http://jsfiddle.net/w3Hg3/](http://jsfiddle.net/w3Hg3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:14:20.610

您可以使用`.toggleClass`，但我认为您对代码的其余部分有点偏离。而不是绑定到`.signatureContain`您可能想要绑定`.button`并找到*兄弟姐妹* `.signatureContain`，然后是它的`.signature`孩子。您还缺少`$`. 我在这里修复了所有这些：

[http://jsfiddle.net/w3Hg3/3/](http://jsfiddle.net/w3Hg3/3/)

`.toggleClass`版本：http: [//jsfiddle.net/w3Hg3/5/](http://jsfiddle.net/w3Hg3/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:11:45.787

使用[toggleClass](http://api.jquery.com/toggleClass/)方法。

```
$('.signatureContain').on('click', function(event){
    $(this).toggleClass("hidesome show");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:24:55.467

请记住将事件侦听器设置为按钮而不是容器 .signatureContain

```
$('a.button').on('click',function(){
    $(this).next('.signatureContain').children('.signature').toggleClass('show');
}); 
```

.on 的性能比 live 好：[http ://www.jquery4u.com/jquery-functions/on-vs-live-review/](http://www.jquery4u.com/jquery-functions/on-vs-live-review/)

通过使用孩子，您可以比使用查找更具体。

演示：http: [//jsfiddle.net/3H4ym/](http://jsfiddle.net/3H4ym/)

# django-admin - Django admin 将两个表合并为一页

> ID：14470845
> 
> 赞同：2
> 
> 时间：2013-01-23T01:06:14.923
> 
> 标签：django-admin

我有几个模型希望在单个管理页面中显示。这是我的模型：

```
class Server(models.Model):
    type = models.CharField(max_length=44, choices=TYPES)
    number = models.CharField(max_length=3)
    environment = models.CharField(max_length=7, choices=ENVIRONMENTS)
    location = models.CharField(max_length=3, choices=LOCATONS)
    cpu = models.PositiveSmallIntegerField()
    ram = models.PositiveIntegerField()
    os = models.CharField(max_length=24, choices=OSs, default='CentOS 6.3')
    eth0_ip = models.IPAddressField(unique=True)
    eth0_mac = models.CharField(max_length=17, unique=True, null=True,
                           blank=True)
    confluence_page = models.URLField(null=True, blank=True)

    class Meta:
        abstract = True

    def __unicode__(self):
        return "%s%s.%s" % (self.type, self.number, self.environment)

class Real(Server):
    manufacturer = models.CharField(max_length=20, choices=MANUFACTURERS_REAL)
    rack = models.CharField(max_length=6, null=True, blank=True)
    rack_u = models.PositiveSmallIntegerField(null=True, blank=True)
    serial_num = models.CharField(max_length=8, unique=True, null=True,
                              blank=True)

class Virtual(Server):
    manufacturer = models.CharField(max_length=20,
                                choices=MANUFACTURERS_VIRTUAL)
    host_id = models.ForeignKey(Real) 
```

我想知道是否无论如何我可以创建/扩展/任何允许查看两个数据库中所有对象的管理界面。例如，我可以进入管理员，然后当我单击应用程序名称时，我会获得两个数据库的 change_list，当我选择一个特定对象时，比如一个虚拟，我将获得管理界面来创建或更改一个虚拟对象。

如果我不清楚，请告诉我，我会尽我所能以不同的方式更清楚地解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-11T15:53:44.137

如果您要显示的父模型类型有一个公共外键，则 Django 管理内联将帮助您：

[https://docs.djangoproject.com/en/1.8/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin](https://docs.djangoproject.com/en/1.8/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin)

在您的实例中，由于 Real 是 Server 的子级，您可以为 Real 构建一个带有内联的管理页面，以在管理中查看该服务器的所有虚拟对象。

# sphinx - 如何配置 Sphinx 以忽略搜索结果中的括号？

> ID：14470846
> 
> 赞同：0
> 
> 时间：2013-01-23T01:06:47.037
> 
> 标签：sphinx, thinking-sphinx

以便搜索“示例”返回“（示例）”

我试图将括号 UTF 代码放在 ignore_chars 中，但这不起作用。

当前配置如下：

```
production:
  version: 1.10-beta
  wordforms: lib/wordforms.txt
  stopwords: lib/stopwords.txt 
  charset_table: "0..9, a..z, _, U+023, A..Z->a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F"
  ignore_chars: "U+0027, U+0028"
  morphology: stem_en 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:31:24.467

charset_table 中未列出的所有字符都被视为分隔符。因此，由于您的字符集表中没有它们，它们永远不会被索引为单词的一部分。

所以无论如何它都会起作用。你一定有别的问题。

注意，圆括号是十六进制 28 和 29。27 是单引号。

# c++ - 除非已经转义，否则如何替换所有出现的字符串或字符？

> ID：14470856
> 
> 赞同：5
> 
> 时间：2013-01-23T01:08:05.147
> 
> 标签：c++, string, boost

是否有一种很好且优雅的方式（可能使用 boost::algorithm::replace？）来替换字符串中所有出现的字符 - 除非前面有反斜杠？

以便

```
std::string s1("hello 'world'");
my_replace(s1, "'", "''"); // s1 becomes "hello ''world''"

std::string s2("hello \\'world'"); // note: only a single backslash in the string
my_replace(s2, "'", "''"); // s2 becomes "hello \\'world''" 
```

使用 boost::regex，这可以使用：

```
std::string my_replace (std::string s, std::string search, std::string format) {
  boost::regex e("([^\\\\])" + search);
  return boost::regex_replace(s, e, "\\1" + format);
} 
```

但由于性能原因，我不喜欢使用 boost::regex。boost::algorithm::replace 看起来很合适，但我不知道具体如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:35:25.967

这是一个完成这项工作的简单算法：

```
#include <iostream>
#include <string>

using namespace std;

string replace(char c, string replacement, string s)
{
    string chars = string("\\") + c;

    size_t pos = s.find_first_of(chars);
    while (pos != string::npos)
    {
        char& ch = s[pos];    
        if (ch == '\\')
        {
            pos = s.find_first_of(chars, pos + 2);
        }
        else if (ch == c)
        {
            s.replace(pos, 1, replacement);
            pos = s.find_first_of(chars, pos + replacement.length());
        }
    }

    return s;
}

int main()
{
    cout << replace('\'', "''", "hello \\'world'");
} 
```

**更新：**

按照@BenVoigt 的建议，我重新制定了算法以避免就地操作。这应该会带来进一步的性能改进：

```
string replace(char c, string replacement, string const& s)
{
    string result;
    size_t searchStartPos = 0;

    string chars = string("\\") + c;
    size_t pos = s.find_first_of(chars);
    while (pos != string::npos)
    {
        result += s.substr(searchStartPos, pos - searchStartPos);
        if (s[pos] == '\\')
        {
            result += string("\\") + c;
            searchStartPos = pos + 2;
        }
        else if (s[pos] == c)
        {
            result += replacement;
            searchStartPos = pos + 1;
        }

        pos = s.find_first_of(chars, searchStartPos);
    }

    return result;
} 
```

# python - 如何使用 django 收集媒体？

> ID：14470859
> 
> 赞同：0
> 
> 时间：2013-01-23T01:08:35.787
> 
> 标签：python, django, django-staticfiles

我刚刚从[http://djangosnippets.org/snippets/1068/](http://djangosnippets.org/snippets/1068/)下载了 collectmedia 片段，但我不确定如何使用它。

我必须把它放在哪里，我该如何称呼它？

我现在有：

```
- project
    - manage.py
    - mysite
- app
- management
    - commands
    - __init__.py
        - collectmedia.py
        - __init__.py 
```

collectmedia 在我运行 ./manage.py -h 时出现，但当我尝试使用以下命令运行它时：

```
./manage.py collectmedia 
```

我收到此错误：

```
AttributeError: 'module' object has no attribute 'Command' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:25:03.327

复制文件并将其放在如下文件夹中：

```
-- your app /
---- management /
------- commands /
---------- __init__.py
---------- collectmedia.py 
```

跑

```
./manage.py collectmedia 
```

另请注意：

```
This command includes an interactive mode (-i or --interactive) and a dry run mode (-n or --dry-run) for previewing what will happen. See manage.py help collectmedia for more options. 
```

# django - django 社交身份验证和电子邮件身份验证

> ID：14470861
> 
> 赞同：1
> 
> 时间：2013-01-23T01:08:42.307
> 
> 标签：django, authentication, django-socialauth

我正在寻找使用 django 或 facebook 进行身份验证的方法。

Django 社交身份验证适用于 facebook 身份验证。但我需要电子邮件身份验证。

（在我的网站中，用户可以选择 auth with email 或 auth with facebook ）

是否可以？如果可能的话，我该怎么做？

有没有示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:14:46.117

检查这个： [在 Django 中使用电子邮件地址登录](http://justcramer.com/2008/08/23/logging-in-with-email-addresses-in-django/)

还有这个：[Django 电子邮件身份验证](http://www.micahcarrick.com/django-email-authentication.html)

# php - CakePHP Parent_ID 名称

> ID：14470864
> 
> 赞同：1
> 
> 时间：2013-01-23T01:09:12.937
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-1.2

我的数据库

学生桌

```
ID    NAME     PARENT_ID (VARCHAR)
1     JOHN     NULL
2     MATT     NULL
3     PETER    1,2 
```

在表格列表中显示

```
ID    NAME     MENTOR NAME
1     JOHN     NULL
2     MATT     NULL
3     PETER    JOHN, MATT 
```

在为每个循环创建一个在表格上显示数据列表时，如何显示“John and Matt 而不是“1,2”？

我在 $belongTo 的 Student Class 中有一个 StudentExtra 来显示导师姓名。但是，此方法仅显示一个导师姓名。

模型

```
class Student extends AppModel
{
// Mainly for PHP4 users
var $name = 'Student';
var $hasMany = array('Order','Test'); 

var $belongsTo = array
(
'StudentExtra'=>array
(
   'className'  => 'Student',
   'foreignKey' => 'parent_id'
),'School','Classroom'
); 
```

控制器

```
 $this->paginate = array(
            'limit' => 10,
        'order' => array('Student.name' => 'ASC'));

    $this->set('students', $this->paginate('Student')); 
```

看法

```
<table>
<?php foreach ($students as $student){ ?>
<tr> 
<td>
<?php $student['Student']['id'] ?>
</td>
</tr>
<tr> 
<td>
<?php $student['Student']['name'] ?>
</td>
</tr>
<tr> 
<td>
<?php $student['Student']['parent_id'] ?>
</td>
</tr>
<?php } ?>
</table> 
```

**结果**

```
 Array
 (
  [0] => Array
    (
        [Student] => Array
            (
                [id] => 1190
                [customers_gender] => M
                [resumetest] => 
                [created] => 2013-04-01 19:29:08
                [modified] => 2013-04-01 19:29:08
                [customers_name] => aaa aaa
                [customers_dob] => 1970-01-01
                [customers_roles] => student
                [customers_types] => student
                [customers_parent_id] => 1055,1056
                [school_id] => 40
                [classroom_id] => 96
            )

        [StudentExtra] => Array
            (
                [id] => 1055
                [customers_gender] => F
                [created] => 2013-03-28 11:14:25
                [modified] => 2013-03-28 11:14:25
                [customers_name] => Mich
                [customers_dob] => 1970-01-01
                [customers_roles] => teacher
                [customers_types] => teacher
                [customers_parent_id] => 
                [school_id] => 40
                [classroom_id] => 96
            )

        [School] => Array
            (
                [id] => 40
                [name] => Primary School
                [description] => 
                [created] => 2013-03-28 10:47:05
                [modified] => 2013-03-28 10:47:05
            )

        [Classroom] => Array
            (
                [id] => 96
                [name] => 30G
                [year_level] => 3
                [description] => 
                [created] => 2013-03-28 10:58:25
                [modified] => 2013-03-28 10:58:25
                [school_id] => 40
            )

        [Order] => Array
            (
            )

        [Test] => Array
            (
            )

    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:27:58.797

其他 cakephp 方式如下。

您还可以将关联设置为**Student 模型**，如下所示。

在**学生模型**中添加以下代码

```
var $belongsTo = array
(
    'StudentExtra'=>array
    (
       'className'  => 'Student',
       'foreignKey' => 'parent_id'
    )
);
```

**在控制器中**

```
$this->set('students', $this->paginate('Student'));
```

现在只需`pr($students); exit();`在视图中或控制器功能的末尾做一个测试结果。

**您将看到 StudentExtra 的额外附加记录数组，这就是您所需要的。**

现在在视图文件中显示如下。

```
<table>
    <?php foreach ($students as $student){ ?>
    <tr> 
        <td>
            <?php $student['Student']['id'] ?>
        </td>
    </tr>
    <tr> 
        <td>
            <?php $student['Student']['name'] ?>
        </td>
    </tr>
    <tr> 
        <td>
            <?php $student['StudentExtra']['name'] ?>
        </td>
    </tr>
    <?php } ?>
</table>
```

**回答 更新响应代码**

```
$this->paginate = array
(
    'joins'=>array
    (
        array
        (
            'table'=>'students',
            'alias'=>'StudentExtra',
            'type' =>'inner',
            'conditions' =>array('StudentExtra.id IN (Student.parent_id)')
        )
    ),
    'limit'=> 10,
    'order' => array('Student.name' => 'ASC')
);

$this->set('students', $this->paginate('Student'));
debug($this->paginate('Student'));
exit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:26:29.383

创建学生模型：

```
class Students extends AppModel {

    public $useTable = false;

    public function getParentName($id) {
        $id = (int) $id;
        $sql = "
            SELECT NAME FROM `students` WHERE ID = (
                SELECT PARENT_ID FROM `students` WHERE ID = $id
            )
        ");
        return $this->query($sql);
    }

} 
```

然后在你的控制器中：

```
$this->Students->getParentName(2); // in this case for Peter 
```

# python - Python 编辑器与终端。终端在输入期间需要在文件名上加上引号

> ID：14470867
> 
> 赞同：0
> 
> 时间：2013-01-23T01:09:20.327
> 
> 标签：python, input, terminal, quotations

```
def openFileReadRobust():

source = None
while not source:                  # still no successfully opened file
  filename = input('What is the filename? ')
  try:
    source = open(filename)
  except IOError:
    print ('Sorry. Unable to open file',filename)
  return source        

lineList=openFileReadRobust().readlines()
print(lineList) 
```

当我在 python 编辑器中尝试这个时，
当我输入一个有效的文件名时它会打印我的列表

```
Enter name of file: file.txt

 ['a1,2,3,4\n', 'b1,2,3,4\n'] 
```

但是当我使用终端时，它会让我在文件名周围加上引号。例如，如果我在终端中输入 file.txt 它会说

```
NameError: name 'file' is not defined 
```

没有 .txt 扩展名

有没有办法让终端接受不带引号的 file.txt？

# r - 每行的data.table函数太慢

> ID：14470869
> 
> 赞同：5
> 
> 时间：2013-01-23T01:09:21.840
> 
> 标签：r, data.table

我需要计算每行的加权平均值（6M+ 行），但这需要很长时间。带权重的列是字符域，所以不能直接使用 weighted.mean。

后台数据：

```
library(data.table)
library(stringr)
values <- c(1,2,3,4)
grp <- c("a", "a", "b", "b")
weights <- c("{10,0,0,0}", "{0,10,0,0}", "{10,10,0,0}", "{0,0,10,0}")
DF <- data.frame(cbind(grp, weights))
DT <- data.table(DF)

string.weighted.mean <- function(weights.x) {
  tmp.1 <- na.omit(as.numeric(unlist(str_split(string=weights.x, pattern="[^0-9]+"))))
  tmp.2 <- weighted.mean(x=values, w=tmp.1)
} 
```

以下是如何使用 data.frames 完成（太慢）：

```
DF$wm <- mapply(string.weighted.mean, DF$weights) 
```

这可以完成工作，但太慢了（小时）：

```
DT[, wm:=mapply(string.weighted.mean, weights)] 
```

如何改写最后一行以加快速度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T01:23:59.103

```
DT[, rowid := 1:nrow(DT)]
setkey(DT, rowid)
DT[, wm :={
    weighted.mean(x=values, w=na.omit(as.numeric(unlist(str_split(string=weights, pattern="[^0-9]+")))))     
}, by=rowid] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T05:17:37.187

由于该组似乎与加权平均值的计算没有任何关系，因此我尝试将问题简化一点。

```
 values <- seq(4)

# A function to compute a string of length 4 with random weights 0 or 10
     tstwts <- function()
     {
         w <- sample( c(0, 10), 4, replace = TRUE )
         paste0( "{", paste(w, collapse = ","), "}" )
     }

# Generate 100K strings and put them into a vector
     u <- replicate( 1e5, tstwts() )
     head(u)   # Check
     table(u)

# Function to compute a weighted mean from a string using values 
# as an assumed external numeric vector 'values' of the same length as
# the weights
    f <- function(x)
         {
             valstr <- gsub( "[\\{\\}]", "", x )
             wts <- as.numeric( unlist( strsplit(valstr, ",") ) )
             sum(wts * values) / sum(wts) 
         }

# Execute the function f recursively on the vector of weights u
    v <- sapply(u, f)

# Some checks:
    head(v)
    table(v) 
```

在我的系统上，重复 10 万次，

```
> system.time(sapply(u, f))
   user  system elapsed 
   3.79    0.00    3.83 
```

这个（无组）的数据表版本将是

```
DT <- data.table( weights = u )
DT[, wt.mean := lapply(weights, f)] )
head(DT)
dim(DT) 
```

在我的系统上，这需要

> system.time( DT[, wt.mean := lapply( weights, f )] ) 用户系统经过 3.62 0.03 3.69

因此，在与我的系统相当的系统（Win7、2.8GHz 双核芯片、8GB RAM）上，预计每百万次观察大约有 35-40 秒。YMMV。

# kendo-ui - kendoUI 网格弹出编辑模板验证未选择模型验证规则

> ID：14470875
> 
> 赞同：2
> 
> 时间：2013-01-23T01:09:38.407
> 
> 标签：kendo-ui

当您在未使用模板的网格中单击编辑时，您为 schema.Model 定义的验证规则将正确应用。但是，如果您使用自定义模板，则不会应用 schema.Model 验证规则。

我怀疑答案是因为我使用的是自定义弹出编辑模板以便我可以有一个下拉列表，所以我必须手动指定每个 html 输入字段的规则，例如 required。我希望这不是真的，并且定义 schema.Model 的相同规则也适用于编辑器模板。

知道答案的请留言，谢谢！担

@Daniel 这是我的代码，用于获取模型中定义的验证属性并将它们添加到 DOM

```
/**
 * Sets label,input html5 attributes and css based on the validation attributes of the
 * model for the given dataSource
 * @param {Object} myDs    dataSource that contains the Model Schema used for validation.
 */
function addValidationAttributes(myDs) {

    var myFields
    //Pass in DS or pass in model from grid
    if (myDs.options) {
        myFields = myDS.options.schema.model.fields
    } else//model
    {
        myFields = myDs.fields
    }

    $.each(myFields, function(fieldName) {
        //Add validation attributes
        if (this.validation) {
            $('#' + fieldName).attr(this.validation);
            //Set label to required if field is required
            if (this.validation.required) {
                $('label[for=' + fieldName + ']').addClass('required');
                $('#' + fieldName).attr('title', "required");
                //Check if KendoUI widget because it creates an extra span
                if ($('#' + fieldName).is('[data-role]')) {
                    $('.k-widget').after('<span class="k-invalid-msg" data-for="' + fieldName + '"></span>');
                } else {
                    $('#' + fieldName).after('<span class="k-invalid-msg" data-for="' + fieldName + '"></span>');
                }
            }
        } else//optional
        {
            //Non requried fields set to optional exclude KEY ID STAMP
            if (fieldName !== '__KEY' && fieldName !== '__STAMP' && fieldName !== 'ID') {
                //Check if KendoUI widget because it creates an extra span
                if ($('#' + fieldName).is('[data-role]')) {
                    $('.k-widget').after('<span class="optional" data-for="' + fieldName + '"></span>');
                } else {
                    $('#' + fieldName).after('<span class="optional" data-for="' + fieldName + '"></span>');
                }
            }
        }

    });
} 
```

另外，以防万一您需要它，我设置了一个在必填字段的标签之前添加 * 的类，并在每个不需要的字段之后添加文本“可选”的类。KEY、ID 和 STAMP 是在我的模型中定义的字段，但我没有将它们放在表单上，​​因此您可以根据需要排除或不排除实体键字段。

他们来了

```
.required:before {
    content: "*";
    color: red
}

.optional:after {
    content: " (optional)";
    color: #777;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:56:22.750

`required`在您的输入元素中使用

```
<input type="text" class="k-input k-textbox" name="Name" data-bind="value:Name" required> 
```

# unix - 从文件中获取模式，与另一个文件的列进行比较，打印匹配行，使用 awk

> ID：14470879
> 
> 赞同：7
> 
> 时间：2013-01-23T01:09:58.450
> 
> 标签：unix, sed, awk, grep

我基本上想结合

```
grep -f 
```

和

```
awk '{ if($2=="this is where I'd like to input a file of fixed string patterns") print $0}' 
```

也就是说，我想使用模式输入文件（文件 2）搜索文件（文件 1）的特定列。如果简单地找到匹配项：

```
> outputfile.txt 
```

从上一篇文章来看，这条 awk 行非常接近：

```
awk 'NR==FNR{a[$0]=1;next} {n=0;for(i in a){if($0~i){n=1}}} n' file1 file2 
```

*取自[使用 ack 或 awk 或比 grep 更好的方式从另一个文件中获取模式？](https://stackoverflow.com/questions/9936962/obtain-patterns-in-one-file-from-another-using-ack-or-awk-or-better-way-than-gre)*

但它不会搜索文件 1 的特定列。我也对其他工具持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:37:34.477

您找到的示例确实与您想要的非常接近，唯一的区别是您不想匹配整行（`$0`）。

将其修改为如下内容：

```
awk 'NR==FNR { pats[$0]=1; next } { for(p in pats) if($2 ~ p) { print $0; break } }' patterns file 
```

如果您只需要固定字符串匹配，请改用该`index()`函数，即替换`$2 ~ p`为`index($2, p)`.

您还可以提供列号作为 awk 的参数，例如：

```
awk -v col=$col 'NR==FNR { pats[$0]=1; next } { for(p in pats) if($col ~ p) { print $0; break } }' patterns file 
```

### 编辑 - 整个字段匹配

您可以使用操作员完成此`==`操作：

```
awk -v col=$col 'NR==FNR { pats[$0]=1; next } { for(p in pats) if($col == p) { print $0; break } }' patterns file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T01:49:33.147

这是使用`awk`：

```
awk 'BEGIN { while(getline l < "patterns.txt") PATS[l] } $2 in PATS' file2 
```

`file1`您正在搜索的文件在哪里，并且`patterns.txt`是每个文件具有一个精确模式的文件。隐式`{print}`已被省略，但您可以添加它并在那里做任何您喜欢的事情。

`$2 in PATS`如果第二列恰好是模式之一，则条件为真。

如果`patterns.txt`要被视为正则表达式匹配，请将其修改为

```
ok=0;{for (p in PATS) if ($2 ~ p) ok=1}; ok 
```

因此，例如，要`$2`针对 中的所有正则表达式进行测试，如果第二列匹配`patterns.txt`，则打印 **第三列：**

```
awk 'BEGIN { while(getline l < "patterns.txt") PATS[l] } 
     ok=0;{for (p in PATS) if ($2 ~ p) ok=1}; ok 
    {print $3}' < file2 
```

这是`perl`. 与`awk`版本类似，只是它使用正则表达式而不是字段。

```
perl -ne 'BEGIN{open $pf, "<patterns.txt"; %P=map{chomp;$_=>1}<$pf>} 
   /^\s*([^\s]+)\s+([^\s]+).*$/ and exists $P{$2} and print' < file2 
```

把它分开：

```
BEGIN{
  open $pf, "<patterns.txt"; 
  %P = map {chomp;$_=>1} <$pf>;
} 
```

将您的模式文件读入 has`%P`以便快速查找。

```
/^\s*([^\s]+)\s+([^\s]+).*$/ and  # extract your fields into $1, $2, etc
exists $P{$2} and                 # See if your field is in the patterns hash
print;                            # just print the line (you could also 
                                  # print anything else; print "$1\n"; etc) 
```

如果您的输入文件是制表符分隔的（并且当您*知道*字段之间只有一个制表符时），它会稍微短一些。*这是一个将模式与第5*列匹配的示例：

```
 perl -F"\t" -ane '
    BEGIN{open $pf, "<patterns.txt"; %P=map{chomp;$_=>1}<$pf>} 
    exists $P{$F[4]} and print ' file2 
```

这要归功于 perl 的`-F`运算符，它告诉 perl 根据分隔符（`\t`在本例中）自动拆分为列。请注意，由于从`perl`开始的`0`数组`$F[4]`是第 5 个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:08:42.677

我不太确定在这种情况下列的区别在哪一部分起作用。您是否处理某种 csv 文件？您是否处理正则表达式列表文件中的列分隔符？如果文件中没有由某些分隔符分隔的不同列，则可以使用`grep`：

```
grep -o -f file2 file1 
```

如果列是一个问题，可能是这样的：

```
grep -o "[^,]*" file1 | grep -f file2 
```

分隔符在哪里`,`。

# wcf - 启用传输安全性后，Mono WCF 客户端无法与 .NET WCF 服务器通信

> ID：14470887
> 
> 赞同：4
> 
> 时间：2013-01-23T01:11:03.130
> 
> 标签：wcf, mono, net.tcp

这是我运行 WCF 主机的方式：

```
var baseAddress = new Uri("net.tcp://localhost:2222/blah");

var binding = new NetTcpBinding();
binding.Security.Mode = SecurityMode.Transport;

var sh = new ServiceHost(typeof(MyServiceImpl), baseAddress);
sh.AddServiceEndpoint(typeof(IMyService), binding, baseAddress);
sh.Open(); 
```

这是我的客户：

```
Uri uri = new Uri("net.tcp://localhost:2222/blah");
var address = new EndpointAddress(uri);
var binding = new NetTcpBinding();
binding.Security.Mode = SecurityMode.Transport;
var client = new MyServiceClient(binding, address);
client.Open(); 
```

当我使用 Mono 2.10 运行时执行客户端和服务器时，一切正常。但是当服务器在 .NET 4.0 上运行时，我得到一个`System.IO.IOException: Read failure ---> System.Exception: An existing connection was forcibly closed by the remote host`. 我还验证了`binding.Security.Mode = SecurityMode.None`一切正常。我是否有可能以某种方式使这两个运行时与正常工作的安全性互操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:36:44.400

不幸的是，对`NetTcpBinding`Mono 的支持非常有限，并且不支持任何类型的安全性。

如果你只看[NetTcpBinding.cs](https://github.com/mono/mono/blob/master/mcs/class/System.ServiceModel/System.ServiceModel/NetTcpBinding.cs#L232)的来源，可能看起来确实如此，但如果你看实际的绑定元素，你会发现很多方法没有实现。

实际上，几天前我在开发新的 WCF 配置系统时遇到了同样的问题，想开始`NetTcpBinding`使用安全性，当我调查它为什么不起作用时，我意识到没有实现太多，所以它是让它工作可能是一项更大的任务。

另请注意，默认情况下，`NetTcpBinding`使用`WindowsStreamSecurityBindingElement`- 不幸的是，我找不到任何关于底层传输机制的文档。

如果您使用的是 .NET 4.5，请使用`BasicHttpBinding`或新的（它也将很快在 MonoTouch 中可用）。`BasicHttpsBinding`

# list - number_in_month 练习（SML 列表迭代）

> ID：14470895
> 
> 赞同：2
> 
> 时间：2013-01-23T01:12:14.757
> 
> 标签：list, date, iteration, sml

我需要获取日期列表和月份列表，并计算列出的任何月份中的日期总数。因此返回一个整数

我有一个先前定义的`number_in_month`函数，它接收日期列表和一个月，并返回该月的日期数量。它已经过测试并且可以正常工作。我用它作为后一个功能的基础。我已经多次跟踪该`number_in_months`功能，我似乎无法找出问题所在，但它根本没有产生正确的答案

```
fun number_in_month (datelist : (int*int*int)list, month : int)  = 

let
fun count(x : int , datelist : (int*int*int)list)=
if null (tl datelist)
then x
else if #2(hd datelist) = month
then count(x+1, tl datelist)
else count(x, tl datelist)

in

if #2(hd datelist) = month
then count(1, datelist)
else count(0, datelist)

end 
```

```
fun number_in_months (datelist : (int*int*int)list, monthlist : (int)list)=
let 
fun count(x : int, monthlist : (int)list)=
if null (tl monthlist)
then x
else count((x + number_in_month(datelist, hd monthlist)), tl monthlist) 

in
count (( number_in_month(datelist, hd monthlist), tl monthlist))
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T01:41:21.173

正如您所说，您只需要使用之前的功能即可`number_in_month`。记住这`number_in_month`需要一个日期列表和一个月份，并返回日期列表中匹配的月份数。因此，所有需要创建`number_in_months`的是调用`number_in_month`新月份列表中的每个元素，并检查原始日期列表。

这样的解决方案可能看起来像

```
fun number_in_months (dates, months) =
    if null months then
      0
    else
      number_in_month(dates, hd months) + number_in_months(dates, tl months) 
```

但是，当您使用模式匹配时，您可以将其缩短并使其更具可读性

```
fun number_in_months (dates, []) = 0
  | number_in_months (dates, d::ds) =
      number_in_month(dates, d) + number_in_months(dates, ds) 
```

绝对没有理由创建一个`count`带有“状态”的函数。这似乎是你的当务之急，在玩 :) 以这个简单的函数为例，它将对列表的所有元素求和

```
fun sum [] = 0
  | sum (x::xs) = x + sum xs 
```

甚至创建一个长度函数（实际上类似于您的计数函数）

```
fun length [] = 0
  | length (x::xs) = 1 + length xs 
```

[我鼓励你去阅读这些问题](https://stackoverflow.com/search?q=%5Bsml%5D%20number_in_month%20is:question)及其答案，而不是重复很多已经提到过很多次的好东西。

**更新**

我还想向您展示如何以更好的方式格式化您的代码

```
fun number_in_month (datelist : (int*int*int) list, month : int)  =
    let
      fun count (x : int , datelist : (int*int*int) list) =
          if null (tl datelist)
          then x
          else if #2(hd datelist) = month
            then count (x+1, tl datelist)
            else count (x, tl datelist)
    in
      if #2(hd datelist) = month
      then count (1, datelist)
      else count (0, datelist)
    end

fun number_in_months (datelist : (int*int*int) list, monthlist : int list)=
    let
      fun count (x : int, monthlist : int list)=
          if null (tl monthlist)
          then x
          else count (x + number_in_month(datelist, hd monthlist), tl monthlist)
    in
      count (number_in_month (datelist, hd monthlist), tl monthlist)
    end 
```

如何格式化嵌套的 if 始终是我来自哪里的一场争论。我个人避免使用它们，而是使用用例，但我想您将来会倾向于使用它。

但是，我还发现了您的计数功能中的错误。当您测试您的第二个参数（在您的两个计数函数中）是否是空列表时`null`，您在参数的尾部执行此操作，如果参数实际上是空列表，则会失败

```
- null (tl []);

uncaught exception Empty 
```

例如这个输入

```
- number_in_months ([(1,1,1)], [1]);

uncaught exception Empty 
```

同样，您的逻辑也是错误的，因为您正在测试等于`number_in_month`的头部，但是在任何一种情况下，您的 to 都使用整个 of而不是它的尾巴。这被认为是下面不应该返回 2 作为结果`datelist``month``count``datelist`

```
- number_in_month([(1,1,1), (2,2,2), (3,3,3)], 1);
val it = 2 : int 
```

此错误是使`number_in_month`函数不引发异常的唯一原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T08:46:05.933

您的代码的问题是，如果它与月份匹配，则您没有计算最后日期。此代码工作正常。

```
fun number_in_month (datelist : (int*int*int) list, month : int)  =
    let
      fun count (x : int , datelist : (int*int*int) list) =
          if null (tl datelist)
          then 
              if #2(hd datelist) <> month
                      then x
                     else x+1
         else if #2(hd datelist) = month
            then count (x+1, tl datelist)
            else count (x, tl datelist)
    in
          count (0, datelist)
    end 
```

# android - Android - v4 PagerTabStrip 导致 IllegalStateException - 必须以精确的宽度测量

> ID：14470896
> 
> 赞同：1
> 
> 时间：2013-01-23T01:12:18.860
> 
> 标签：android, android-viewpager

< 编辑 >

1.  一个新的观察 - 我已经尝试了与独立 Activity 和 AppWidget 配置视图相同的 ViewPager - 它经常作为配置视图崩溃，而作为一个简单的活动始终运行良好。

2.  另一个观察 - 如果配置布局是 ViewPager 作为根，没有发生崩溃。如果 ViewPager 嵌入在 FlowLayout 或 RelativeLayout - 它经常崩溃。

</ 编辑 >

我在我的 AppWidget 配置 xml 中使用 v4 ViewPager 和 PagerTabStrip，它在大多数情况下都能正常工作。

但是，当加载视图时涉及一些处理时，我会收到此错误（应用程序崩溃）：

```
 java.lang.IllegalStateException: Must measure with an exact width
    at android.support.v4.view.PagerTitleStrip.onMeasure(PagerTitleStrip.java:428)
    at android.view.View.measure(View.java:8335)
    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1350)
    at android.view.View.measure(View.java:8335)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
    ...etc... 
```

来自 android.support.v4.view.PagerTitleStrip.onMeasure() 的代码片段 -

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    final int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    //...

    if (widthMode != MeasureSpec.EXACTLY) {
        throw new IllegalStateException("Must measure with an exact width");
    }
    //...
} 
```

我怎么能控制宽度模式？

上面的所有堆栈都发生在我的代码之外。

在我的代码中，我试图排除许多因素，最终我可能设法找出根本原因：

当我为每个片段（X30 片段）添加 5 milis 睡眠的模拟“工作”时，我得到了上述错误，并且在删除它时 - 错误似乎消失了。尝试将工作移至 onCreate() - 没有任何区别

```
public static class TestFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.splash, container, false);
        try {
            Thread.sleep(5); // << mock work causes quite consistent error
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.i(TAG, "..onCreateView");

        return v;
    }
} 
```

我在我的真实适配器的片段上所做的实际工作是最小的，并且无法避免（设置初始值，稍后在后台线程中填充数据）。所以我不知道我还能推迟多少后台线程。

有人对此有经验吗？知道为什么会发生上述错误，以及是否可以避免它？

供参考（不确定是否相关）：

```
<LinearLayout ...>
<android.support.v4.view.ViewPager
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    android:id="@+id/aw_pager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0"
    android:background="@drawable/dialog_full_holo_dark"
    android:fadingEdge="horizontal"
    android:fadingEdgeLength="40dp" >

    <android.support.v4.view.PagerTabStrip
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top" />
</android.support.v4.view.ViewPager>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:38:04.783

终于解决了！（为此浪费了 2 天）：就是这条线：

```
 android:background="@drawable/dialog_full_holo_dark" 
```

我将其替换为：

```
 android:background="@color/black" 
```

问题就消失了。
错误中没有任何内容表明这一点，而且它不是确定性的。通过消除解决了困难的方法 - 添加代码>测试>再次...

这很可能是 Android 代码中的错误，可能是视图布局管理中的一些竞争条件。

希望我为在这里碰到的开发人员节省了 2 天的时间。

**[更新]**

在另一个项目中，我通过`ViewPager`用`FrameLayout`. 我将所需的背景设置为`FrameLayout`, 并设置`@color/transparent`为`ViewPager`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T07:20:00.160

这非常简单且有效：

```
public class PagerTabStripBugfix extends PagerTabStrip {

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(
                MeasureSpec.makeMeasureSpec(MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.EXACTLY), 
                heightMeasureSpec);
    }    

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T21:19:02.183

我也遇到了这个问题，我通过简单地添加以下行来解决它：

```
xmlns:tools="http://schemas.android.com/tools" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-21T23:29:35.090

当我添加`android.support.v4.view.PagerTitleStrip`和 时发生了这个错误`actionbarsherlock`。我通过添加`android:layout_gravity="top"`到该标签中解决了这个问题。

# assembly - 反汇编包含大数据或被压缩的文件

> ID：14470900
> 
> 赞同：0
> 
> 时间：2013-01-23T01:12:57.523
> 
> 标签：assembly, x86, exe, disassembly, ollydbg

这是我试图弄清楚如何分解 exe 的第四天。

仍然没有运气，文件在运行后立即给出调试器错误。我正在使用 OllyDBG，似乎文件被压缩或包含大量数据。我认为这只是为了调试保护，但是我无法让它工作。

我正在努力学习汇编，这是我在测试应用程序方面取得的“新水平”成就。我只想在文件 exe 中将一个文本更改为另一个文本。所以这是一个可变的变化。即使里面有简单的数字变化，我也会感到满意。只是想知道如何。

该文件在打开后最初会运行其他 exe，但这不是我想要触摸或编辑的任何内容。

这是文件的打开方式：

```
00401000 >/$ 68 01504400    PUSH tryme.00445001
00401005  |. E8 01000000    CALL tryme.0040100B
0040100A  \. C3             RETN
0040100B   $ C3             RETN
0040100C     A9             DB A9
0040100D     FE             DB FE
0040100E     39             DB 39                                    ;  CHAR '9'
0040100F     B1             DB B1
00401010     30             DB 30                                    ;  CHAR '0'
00401011     D8             DB D8
00401012     BB             DB BB
00401013     A6             DB A6
00401014     45             DB 45                                    ;  CHAR 'E'
00401015     23             DB 23                                    ;  CHAR '#'
00401016     92             DB 92
00401017     AC             DB AC
00401018     3D             DB 3D                                    ;  CHAR '='
00401019     B3             DB B3
0040101A     9C             DB 9C
0040101B     8C             DB 8C
0040101C     90             NOP
0040101D     0E             DB 0E
0040101E     26             DB 26                                    ;  CHAR '&'
0040101F     3B             DB 3B                                    ;  CHAR ';'
00401020     D3             DB D3
00401021     48             DB 48                                    ;  CHAR 'H'
00401022     49             DB 49                                    ;  CHAR 'I'
00401023     70             DB 70                                    ;  CHAR 'p'
00401024     88             DB 88
00401025     07             DB 07
00401026     78             DB 78                                    ;  CHAR 'x'
00401027     36             DB 36                                    ;  CHAR '6'
00401028     7C             DB 7C                                    ;  CHAR '|'
00401029     88             DB 88 
```

在此之下有许多 DB 调用，我尝试每隔一个 RETN 设置断点，但没有调用它们。有人可以给我一个提示，如何处理这种 exe 文件？

感谢您的时间，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T01:59:11.033

[udis86 反汇编程序库](http://udis86.sourceforge.net/)有一个非常有用且方便的反汇编程序，称为`udcli`.

例如，我为理解您的代码所做的工作：

首先，将所有十六进制代码字节复制到一个 ASCII 文件中。我复制了你的 OllyDbg 输出，然后用 Vim 切断了除二进制代码之外的所有内容，生成了一个像这样的文本文件（比如说`hexcode.txt`）：

```
68 01 50 44 00 E8 01 00 00 00 C3 C3 A9 FE 39 B1 30 D8 BB A6 45 23 92 AC 3D B3 9C 8C 90 0E 26 3B D3 48 49 70 88 07 78 36 7C 88 
```

然后想知道这是 16 位、32 位还是 64 位 Intel 代码……通常你可以看到并感觉到代码是否看起来很奇怪，在这种情况下，要么是错误的处理器、错误的处理器模式，要么是代码可能被加密或者它可能是数据而不是代码。

让我们试试它是否是 16 位代码：

在 Linux 控制台中，`$ cat hexcode.txt | udcli -x -16`

```
0000000000000000 680150           push word 0x5001        
0000000000000003 44               inc sp                  
0000000000000004 00e8             add al, ch              
0000000000000006 0100             add [bx+si], ax         
0000000000000008 0000             add [bx+si], al         
000000000000000a c3               ret                     
000000000000000b c3               ret                     
000000000000000c a9fe39           test ax, 0x39fe         
000000000000000f b130             mov cl, 0x30            
0000000000000011 d8bba645         fdivr dword [bp+di+0x45a6]
0000000000000015 2392ac3d         and dx, [bp+si+0x3dac]  
0000000000000019 b39c             mov bl, 0x9c            
000000000000001b 8c900e26         mov [bx+si+0x260e], ss  
000000000000001f 3bd3             cmp dx, bx              
0000000000000021 48               dec ax                  
0000000000000022 49               dec cx                  
0000000000000023 7088             jo 0xffffffffffffffad   
0000000000000025 07               pop es                  
0000000000000026 7836             js 0x5e                 
0000000000000028 7c88             jl 0xffffffffffffffb2 
```

嗯。已经开始了`inc sp`，很奇怪的指令。结论：不是 16 位代码。

也许它是 32 位代码？

`$ cat hexcode.txt | udcli -x -32`

```
0000000000000000 6801504400       push dword 0x445001     
0000000000000005 e801000000       call dword 0xb          
000000000000000a c3               ret                     
000000000000000b c3               ret                     
000000000000000c a9fe39b130       test eax, 0x30b139fe    
0000000000000011 d8bba6452392     fdivr dword [ebx+0x922345a6]
0000000000000017 ac               lodsb                   
0000000000000018 3db39c8c90       cmp eax, 0x908c9cb3     
000000000000001d 0e               push cs                 
000000000000001e 263bd3           cmp edx, ebx            
0000000000000021 48               dec eax                 
0000000000000022 49               dec ecx                 
0000000000000023 7088             jo 0xffffffffffffffad   
0000000000000025 07               pop es                  
0000000000000026 7836             js 0x5e                 
0000000000000028 7c88             jl 0xffffffffffffffb2 
```

这看起来已经更好了。首先，您可以在`0x445001`. 由于它在 a之后紧跟 a`dword`之前被推送，因此可能是after实际上从堆栈中弹出值并跳转到. 另一方面，如果有混淆代码的意图，则调用的函数可能会修改压入堆栈的值，因此after不会跳转到，而是跳转到其他地方。因此，在存储的堆栈地址处设置另一个断点。在函数调用之前应该指向 value ，所以在那里设置断点。它也可以在函数内部设置，但在这种情况下，地址将是`call dword 0xb``ret``ret``call 0xb``0x445001``cs:0x445001``call dword 0xb``0x445001``ret``call dword 0xb``0x445001``0x445001``call dword 0xb` `[ss:esp]``0x445001``[ss:esp+4]`（`[ss:esp]`保存返回地址）。`call dword 0xb`所以我会先尝试设置这两个断点，然后在函数内部单步跟踪代码。

最后一个想法：如果这是 64 位代码怎么办？

`$ cat hexcode.txt | udcli -x -64`

```
0000000000000000 6801504400       push dword 0x445001     
0000000000000005 e801000000       call dword 0xb          
000000000000000a c3               ret                     
000000000000000b c3               ret                     
000000000000000c a9fe39b130       test eax, 0x30b139fe    
0000000000000011 d8bba6452392     fdivr dword [rbx-0x6ddcba5a]
0000000000000017 ac               lodsb                   
0000000000000018 3db39c8c90       cmp eax, 0x908c9cb3     
000000000000001d 0e               invalid                 
000000000000001e 263bd3           cmp edx, ebx            
0000000000000021 48497088         jo 0xffffffffffffffad   
0000000000000025 07               invalid                 
0000000000000026 7836             js 0x5e                 
0000000000000028 7c88             jl 0xffffffffffffffb2 
```

以与 32 位代码相同的方式开始，但后来出现了无效指令，因此可能不是 64 位代码（除非代码挂钩无效操作码异常处理程序`int 6`），或者从不执行该代码。

# javascript - 从 Javascript 使用 Firefox 开发者工具栏

> ID：14470903
> 
> 赞同：2
> 
> 时间：2013-01-23T01:13:00.043
> 
> 标签：javascript, firefox, bookmarklet

我使用 Firefox 开发者工具栏来截取屏幕截图（它非常方便），但是有没有办法从 Javascript 触发这个功能？（具体来说，来自书签？）

# c# - FilterControlNodesFactory() 方法在 devexpress 12.2 版本中不起作用

> ID：14470908
> 
> 赞同：0
> 
> 时间：2013-01-23T01:13:28.500
> 
> 标签：c#, winforms, devexpress

我正在将 devexpress 10.1 升级到 12.2 版本，并且正在使用以下代码。但是在 12.2 版本中，`FilterControlNodesFactory()`方法不能采用 0 参数。
如何解决这个问题？

```
public DevExpressFilterToSQL(CriteriaOperator Criteria)
{
    _criteria = Criteria;
    _head = (Node) CriteriaToTreeProcessor.GetTree(
        new FilterControlNodesFactory(), Criteria, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:15:26.653

找到了一个临时解决方案：

```
//...
_head = (Node) CriteriaToTreeProcessor.GetTree(
    new FilterControlNodesFactory(
        new WinFilterTreeNodeModel(new FilterControl())), Criteria, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:38:34.880

据我所知，`FilterControlNodesFactory`该类不打算在[FilterControl](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsFilterControltopic)内部代码之外的任何地方使用。
因此，最好的解决方案是停止使用此类并查看后续线程中描述的方法： [如何为 FilterControlNodesFactory() 参数创建类型模型的对象](http://www.devexpress.com/Support/Center/p/Q359692.aspx)

# html - 树浮动 div 高度 100%，一个固定宽度 - 中间覆盖

> ID：14470911
> 
> 赞同：0
> 
> 时间：2013-01-23T01:13:35.410
> 
> 标签：html, css, alignment

我想在中心有一个固定宽度（1000px）的 div，一个 div 向左浮动并填充背景，另一个填充右侧的背景。都有 100% 的高度。

```
<div id="left">
</div>
<div id="right">
</div>
<div id="main">
   Text
</div> 
```

的CSS：

```
html, body{
height:100%;
min-height:100%;
width:100%;

padding:0;
margin:0;
}

#left{
position: relative;
width:50%;
height:100%;
top:0;
left:-500px;
float:left;
}
#right{
position:relative;
width:50%;
height:100%;
top:0;
right:-500px;
float:right;
}

#main{
width: 1000px;
margin:auto;
} 
```

问题是内容突破了中间 div。它仍然在 div 中，但在其他 div 之下。

我该如何解决它，内容显示在中间 div 的顶部？

为了更好的想象：[http ://codepen.io/anon/pen/eluGt](http://codepen.io/anon/pen/eluGt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:27:24.967

试试这个......我认为这是你所追求的

```
 <!DOCTYPE html>
 <html>
      <head>
       <title>Failing Divs</title>
     </head>
    <body>
        <div id="left">
        </div>
      <div id="main">
          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
        </div>
        <div id="right">
        </div>

   </body>
</html> 
```

...

```
html, body{
    height:100%;
    min-height:100%;
    width:100%;

    padding:0;
    margin:0;
}

p{
 padding:5px; 
}

#left{
    float:left;
    width:25%;
    height:100%;
    background: black;
}
#right{
    float:left;
    width:25%;
    height:100%;
    background: blue;
}

#main{
    float:left;
    width: 50%;
    height:100%;
    margin:auto;
    background: gray;
} 
```

# wpf - 有没有办法使用 ItemsSource 集合中的索引来绑定项目高度？

> ID：14470918
> 
> 赞同：0
> 
> 时间：2013-01-23T01:14:27.087
> 
> 标签：wpf, xaml, .net-4.0

我有一个 WPF 控件，它有一个绑定到可观察集合的列表框。

集合变化很大，因此跟踪其项目索引有点痛苦。

我需要列表框中的项目根据它们在屏幕上的位置/索引而具有不同的高度。

```
Items[0].Height = 30; 
Items[1].Height = 25;
Items[2...n].Height = 20; 
```

所以项目的高度不依赖于数据。

我不想将 dep 属性添加到数据项并尝试计算集合中的数据项索引。

**我想让列表框项目知道它们在列表框 ItemSource 中的索引。**

*PS我可以忍受任何项目控制（不一定是列表框）*

**可以吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:46:29.243

只要您不使用交替行样式，就可以为此劫持交替索引。这是一个简单的示例，它只显示索引以及每个项目的 ToString：

```
<ListBox AlternationCount="99999" ItemsSource="{Binding Items}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=(ItemsControl.AlternationIndex)}"/>
                <TextBlock Text="{Binding}"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# javascript - 动态 document.getElementById()

> ID：14470924
> 
> 赞同：0
> 
> 时间：2013-01-23T01:15:08.483
> 
> 标签：javascript, html, getelementbyid

我有一个饼图类型的东西，我需要根据单击的链接来改变它的值（请参阅下面的链接并单击按钮 70 以了解我的意思）

[http://fifamatchgenerator.com/dev/piechart/examples/](http://fifamatchgenerator.com/dev/piechart/examples/)

这是使它工作的代码：

```
$('.updateEasyPieChart').on('click', function(e) {
    e.preventDefault();
    $('.percentage, .percentage-light').each(function() {
        var newValue = document.getElementById(1).innerHTML;
        $(this).data('easyPieChart').update(newValue);
        $('span', this).text(newValue); 
```

从页面上的`(1)`顺序链接之一获取 ID 1：

```
<li><a href="#" id="1" class="button updateEasyPieChart">70</a></li>
<li><a href="#" id="2" class="button updateEasyPieChart">60</a></li>
<li><a href="#" id="3" class="button updateEasyPieChart">50</a></li> 
```

它显然只适用于第一个链接，因为它只调用该 ID。现在这是我需要帮助的地方。如果您理解我的意思，我需要 document.get 中的该值由单击的链接的 id 定义。因此，当单击 id 为 2 的第二个链接时，我需要将其传递给`document.get`and `update`。这听起来很简单，但我的 javascript 技能根本不足以自己解决。我已经进行了大量的谷歌搜索，但似乎找不到任何有用或有效的东西。我并不是真的在找人为我做这件事，只是为我指明正确的方向！

ps饼图代码我从一个网站得到......但是改变值的代码（有点）是我和一个朋友写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:17:50.920

`this`将引用被单击的元素。

```
var newValue = this.innerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:32:54.397

此代码对于无序列表中的任意数量的链接都是动态的。它将从内部 html 中获取数字并更新饼图。您可能不得不修补更新饼图部分，因为我还没有看到所有代码:)

这是从您的代码中复制的列表

*   70*   60*   50

这是将点击函数绑定到无序列表中的每个锚标记的代码。

```
 $('#myUnorderedList li a').click(function() {

            var newValue = $(this).html();

            $('.percentage, .percentage-light').each(function() {

            $(this).data('easyPieChart').update(newValue);
            $('span', this).text(newValue);
          });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:39:07.083

不幸的是，我现在无法实际测试这个，但试试这个：

创建一个返回点击目标的函数：

```
function getTarget(e) {
    var result = null;
    if (typeof e != "undefined") {
        if (typeof e.target != "undefined") {
            result = e.target;
        }
        else if (typeof e.srcElement != "undefined") {
            result = e.srcElement;
        }
    }
    return result;
} 
```

因为有人可能会在 IE 中运行它，所以您应该包括：

```
var ie = document.all; 
```

然后像这样调用 getTarget 函数：

```
selectedElement = getTarget(ie ? event : e); 
```

然后，您可以通过以下方式更改您的值：

```
var newValue = selectedElement.innerHTML; 
```

# java - 在 Java 中将对象映射到整数 - 使用数组还是映射？

> ID：14470927
> 
> 赞同：3
> 
> 时间：2013-01-23T01:15:14.727
> 
> 标签：java, arrays, performance, map, integer

我有需要映射到整数（或原始整数）的对象。

所以例如

```
Object[] objects = new Object[X];
objects[2]=o1;
objects[34]=o2;
objects[126]=o3;
... 
```

所以我有一个从 0 到 X 的键范围，但只需要几个（比如说 20 个）映射对。（映射只做一次，不会改变）

使用 Map （以及哪种实现最适合）而不是大多数未使用的“大”数组会是（性能和内存使用虎钳）更好的主意。

在开发过程中，所需的范围实际上可能会扩大 - 所以如果它只对非常大的 X 很重要，那对我来说仍然很有趣。（目前 X 是 256 - 非常小）

总结一下：我想有效地将​​数字映射到 Java 中的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:22:57.793

使用地图。

性能差异应该可以忽略不计。假设当您说“性能”时，您指的是查找（正如您所说的映射只完成一次并且不会改变），使用直接数组查找性能会更好。使用数组，您的预期查找将是`O(1)`. 如果您有一张地图并且使用整数作为键，那么您的查找应该是`O(1)`预期的情况和`O(n)`最坏的情况。鉴于您提到的配对数量很少（20），性能差异不会很大。

但是，Map 的内存使用会明显更好，因为 Array 将是稀疏填充的。

**更新**

感谢所有提供意见和反馈并帮助我学习的人。@JohnnyO 说数组查找是正确的`O(1)`，我根据他的反馈更正了我的帖子。我一直在想 ArrayList。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:08:36.213

您是否使用最快的可能性（数组）或`HashMap`取决于您的应用程序。您每秒有数百万次计算（数组访问）吗？是的，然后取数组，并花费 1k 的内存。
或者拿地图。
但是如果 x 很大，还有第三种解决方案：这个解决方案几乎和 map 一样快（也许更快），但使用的空间更少：
使用 int 的排序数组作为对象数组的索引：

```
int[] idx ={2, 34, 126}
Object[] objs = {o1, o2, o3}; 
```

Idx 必须按升序排序。现在获取键 34 的对象：

```
int pos= Arrays.binsearch(34, idx); // params might be wrong, please correct
Object o = objs[pos]; 
```

但是这我只会将它用于具有最小存储空间要求的大量对象，其中对象在运行时不会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T01:20:56.977

我会使用 a`Map`因为这确实是它的用途。除此之外，使用 a`Map`可能会使您的代码在未来更容易更新和管理。至于您应该使用哪种实现，在我看来 a[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)就足够了，尽管如果您想按顺序保留整数键，您可能还需要考虑 a [`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T01:22:29.520

阵列显然会给你最快的访问，但如果你有这样的差距，你会浪费相当多的空间。

如果您正在寻找一种灵活的数据结构，它将键（例如整数）与值相关联，其中范围内可能存在间隙，并且您以后可能会增加它，我想不出比这更合适的了一张地图。如果您确切知道您计划插入多少元素，您可能需要研究 HashMap 等实现的构造函数参数，它可以让您调整底层存储的大小，以减少空间和减少冲突。

Map 的另一个结果是，如果您需要使用它执行其他面向集合的任务，您将获得更丰富的 API。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T01:27:38.370

正如您所说，地图是做到这一点的好方法。我通常使用哈希映射，因为它非常快。虽然不如数组快。如果每个值只有一个键，您甚至可能想要使用 HashSet，因为它可以确保每个键只使用一个值。

android API 有一个叫做 SparseIntArray 的东西，它应该有更好的性能，但我在标准的 java API 中没有看到它。

如果性能真的很重要，您可能会发现 trove 库具有适当的稀疏数组或映射。当您使用原语时，它只会更快（在您的情况下是这样）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T01:29:22.907

你真正想要的是一个 SparseArray。它是法线贴图和数组之间的折衷。

如果您正在为 Android 开发，那么您可以使用一个（请参见下面的链接）。否则，您可能会找到可用的实现。

[http://developer.android.com/reference/android/util/SparseArray.html](http://developer.android.com/reference/android/util/SparseArray.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T01:24:21.747

我会推荐一张地图，原因有一个：可变长度。跟踪您需要映射的对象可能会变得相当乏味。使用`HashMap`或类似的实现将保证您的映射对象始终具有足够的容量。除此之外，使用 Map 更有意义，因为这是设计的目的，使您的代码对其他人更具可读性。我想原始数组会占用更少的内存，但实际上地图的开销对于您所说的比例来说并不是很重要。

# ruby - 一个 Time 对象被转换为 epoch 并返回在 Ruby 中失去它的毫秒数

> ID：14470932
> 
> 赞同：-1
> 
> 时间：2013-01-23T01:15:54.103
> 
> 标签：ruby, time, milliseconds

我似乎在 Ruby 中发现了一个错误，但我不确定，所以我将其发布在这里。

我有一个 Rails 应用程序，它在给定时间戳之后获取最新对象，这是页面上显示的最后一个对象的时间戳。

但由于某种原因，它总是返回最后一个重复的对象。一段时间后，我们决定将其转换为 epoch，但它不起作用。

在试图找到问题可能出在哪里之后，我想出了给定的代码：

```
require 'date'
DateTime.strptime("1358895408.915", "%s").strftime("%s")
# => "1358895408" 
```

这不应该工作吗？我错过了什么吗？如何安全地解析时间并保持毫秒不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:42:22.463

（根据 Andrew Marshall 的建议编辑）

使用`Time.at`. 这将保留毫秒。它需要一个数字而不是一个字符串。

```
Time.at(BigDecimal.new('1358895408.915'))
.strftime("%s.%L")
# => "1358895408.915" 
```

# jquery - 使用 jQuery 切换关闭打开的部分

> ID：14470938
> 
> 赞同：1
> 
> 时间：2013-01-23T01:16:56.273
> 
> 标签：jquery, togglebutton

我的垂直菜单需要帮助。这就是我现在拥有的：http: [//jsfiddle.net/x4NbH/](http://jsfiddle.net/x4NbH/)

我想要做的是，如果我有一个`<ul>`打开并单击以打开菜单的另一部分，我希望打开`<ul>`关闭并打开新的。例如“item-1”是打开的，我点击“item-2”，这会关闭“item-1”并打开“item-2”。

HTML：

```
<div class="menu-item">
<h4 id="item-1"><a href="#">Item 1</a></h4>
<ul id="item-1">
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
</ul>
</div>

<div class="menu-item">
<h4 id="item-2"><a href="#">Item 2</a></h4>
<ul id="item-2">
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
</ul>
</div>

<div class="menu-item">
<h4 id="item-3"><a href="#">Item 3</a></h4>
<ul id="item-3">
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
</ul>
</div> 
```

CSS：

```
.menu-item h4 {
    margin: 0px;
    padding: 0px;
}
.menu-item ul {
    margin: 0px;
    padding: 0px 5px;
    display: none;
} 
```

JavaScript：

```
$( "h4#item-1" ).click(function() {
    $( "ul#item-1" ).toggle( "blind", 1000 );
});

$( "h4#item-2" ).click(function() {
    $( "ul#item-2" ).toggle( "blind", 1000 );
});

$( "h4#item-3" ).click(function() {
    $( "ul#item-3" ).toggle( "blind", 1000 );
}); 
```

我怎样才能以简单的方式实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T01:25:01.940

ID 必须是唯一的，您可以使用类来代替，试试这个：

```
var $ul = $('ul');
$( "h4" ).click(function() {
    $ul.hide("blind", 1000);
    $(this).next().show( "blind", 1000);
}); 
```

[http://jsfiddle.net/zaZLj/](http://jsfiddle.net/zaZLj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T01:29:03.327

尝试这个：

```
$('h4').click(function(){
   $(this).closest('div').find('ul').show('blind',1000);
   $(this).closest('div').siblings().find('ul').hide('blind',1000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T01:51:32.377

这不像上面的 Nikko Reyes 示例那样巧妙，但它可以在您提供的代码中工作，以显示`complete`与 toggle 和`.not()`jQuery 命令一起使用的函数。我知道我做得更好，但我只工作了 8 个多小时；) jsFiddle 的东西在这里：http: [//jsfiddle.net/jtMaY/17/](http://jsfiddle.net/jtMaY/17/)

```
$( "h4#item-1" ).click(function() {
    $( "ul#item-1" ).toggle( "blind", 1000,
        function () { $( "ul" ).not("#item-1").hide(); }
    );
});

$( "h4#item-2" ).click(function() {
    $( "ul#item-2" ).toggle( "blind", 1000,
        function () { $( "ul" ).not("#item-2").hide(); }
    );
});

$( "h4#item-3" ).click(function() {
    $( "ul#item-3" ).toggle( "blind", 1000,
       function () { $( "ul" ).not("#item-3").hide(); }
    );
}); 
```

# android - Android drawArc 带阴影

> ID：14470946
> 
> 赞同：1
> 
> 时间：2013-01-23T01:17:47.373
> 
> 标签：android, android-canvas, android-ui

我有一个问题，当我绘制弧线时，没有绘制阴影层。这是我的`Paint`对象：

```
circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
circlePaint.setStrokeWidth(strokeWidth);
circlePaint.setColor(Color.WHITE);
circlePaint.setStyle(Paint.Style.STROKE);
circlePaint.setShadowLayer(shadowRadius, 0, shadowOffset, 0xFF000000); 
```

并在`onDraw()`：

```
canvas.drawArc(rect, 0, 180, false, circlePaint); 
```

我有一种感觉 shadowLayer 只是被忽略了。有没有其他方法可以在椭圆周围绘制阴影？问题是，椭圆得到了调整大小（因为高度变大了），所以我不能只使用 Ninepatch。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:09:36.307

`Paint.setShadowLayer`如果启用了硬件加速，则仅适用于文本。要解决此问题，您只需为此特定视图禁用硬件加速即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:59:43.437

如果您想保持视图硬件加速，您可以将带有阴影层的弧线绘制到屏幕外位图中，然后将该位图绘制到您的画布上。

# javascript - 如何在 SpringSource Tool Suite / Eclipse 中运行 javascript 项目？

> ID：14470949
> 
> 赞同：2
> 
> 时间：2013-01-23T01:18:06.110
> 
> 标签：javascript, springsource, tcserver

我正在使用 STSS 3.1（GGTS 版本）。我在 STS 中创建了一个小型 JavaScript 项目，并希望使用内部 vFabric tc 服务器运行它。服务器报告它正确启动，并且主页（显示一堆与服务器相关的帮助链接）正确显示。

但我看不到如何加载我的应用程序 .html 文件。当我输入它的路径时，我得到一个 404 错误。

我在 STS 帮助中找不到有关如何执行此操作的任何文档；我确定我错过了一些简单的东西，但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T01:58:27.297

以下是我使用 STS 3.4.0.RELEASE 的方法：

1.  打开 vFabric 服务器属性，例如在服务器视图中双击它

2.  转到模块选项卡

3.  单击“添加外部 Web 模块...”

4.  对于“文档库”，浏览到包含 yourindex.html 的目录。

5.  对于“路径”，输入您想要的任何路径，例如“/YourProject”

6.  取消选中“启用自动重新加载”

7.  保存服务器属性

8.  启动服务器并浏览到`localhost:8080/YourProject/yourindex.html`

# powershell - PowerShell：如何捕获（或抑制）写主机

> ID：14470953
> 
> 赞同：5
> 
> 时间：2013-01-23T01:18:41.023
> 
> 标签：powershell

我有一个脚本调用“a.ps1”：

```
write-host "hello host"
"output object" 
```

我想调用脚本并获取输出对象，但我也希望标准输出被抑制：

```
$result = .\a.ps1
# Don't want anything printed to the console here 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T07:03:07.387

确实没有简单的方法可以做到这一点。

一种解决方法是通过定义具有相同名称的函数来覆盖 Write-Host 的默认行为：

```
function global:Write-Host() {} 
```

这是非常灵活的。它适用于我上面的简单示例。但是，由于某些未知原因，它不适用于我想要应用的实际情况（可能是因为被调用的脚本已签名并且出于安全原因，它不允许调用者任意更改行为）。

我尝试的另一种方法是通过以下方式修改底层控制台的标准输出：

```
$stringWriter = New-Object System.IO.StringWriter
[System.Console]::SetOut($stringWriter)
[System.Console]::WriteLine("HI") # Outputs to $stringWriter
Write-Host("HI") # STILL OUTPUTS TO HOST :( 
```

但正如你所看到的，它仍然不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:47:56.993

输出对象 ie `"output object`" 输出到`standard output`。所以我不认为你想抑制标准输出。如果你不希望任何东西打印到控制台不要使用`Write-Host`，因为它会绕过所有流（stdout、stderr、警告、详细, 调试) 并直接显示到主机。目前我知道没有简单的机制可以重定向主机输出。

顺便说一句，如果您不想稍后看到它显示，为什么需要将“hello host”写入控制台？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:31:08.713

好的，我做了一点挖掘。您可以使用：

[以下链接](https://stackoverflow.com/questions/5588689/redirect-write-host-statements-to-file/5590764#5590764)

并做：

```
$result = .\1.ps1 | Select-WriteHost -Quiet
$result[1] 
```

然后选择变量中的第二个对象：

[另一种解释](http://byteonmyside.wordpress.com/2012/04/25/how-to-capture-or-redirect-write-host-output-in-powershell/)

您还可以以一种不会将 Write-Host 更改为 Write-Output 的方式更改脚本，而只是“删除”Write-Host。

完毕...

```
function Remove-WriteHost
{
   [CmdletBinding(DefaultParameterSetName = 'FromPipeline')]
   param(
     [Parameter(ValueFromPipeline = $true, ParameterSetName = 'FromPipeline')]
     [object] $InputObject,

     [Parameter(Mandatory = $true, ParameterSetName = 'FromScriptblock', Position = 0)]
     [ScriptBlock] $ScriptBlock
   )

   begin
   {
     function Cleanup
     {
       # Clear out our proxy version of Write-Host
       remove-item function:\write-host -ea 0
     }

     function ReplaceWriteHost([string] $Scope)
     {
         Invoke-Expression "function ${scope}:Write-Host { }"
     }

     Cleanup

     # If we are running at the end of a pipeline, need to
     # immediately inject our version into global scope,
     # so that everybody else in the pipeline uses it.
     #
     # This works great, but it is dangerous if we don't
     # clean up properly.
     if($pscmdlet.ParameterSetName -eq 'FromPipeline')
     {
        ReplaceWriteHost -Scope 'global'
     }
   }

   process
   {
      # If a scriptblock was passed to us, then we can declare
      # our version as local scope and let the runtime take it
      # out of scope for us. It is much safer, but it won't
      # work in the pipeline scenario.
      #
      # The scriptblock will inherit our version automatically
      # as it's in a child scope.
      if($pscmdlet.ParameterSetName -eq 'FromScriptBlock')
      {
        . ReplaceWriteHost -Scope 'local'
        & $scriptblock
      }
      else
      {
         # In a pipeline scenario, just pass input along
         $InputObject
      }
   }

   end
   {
      Cleanup
   }
}
$result = .\1.ps1 | Remove-WriteHost 
```

感谢“latkin”的原始功能:)

# javascript - 调整矩形 HTML5 画布的大小

> ID：14470956
> 
> 赞同：12
> 
> 时间：2013-01-23T01:19:08.870
> 
> 标签：javascript, html, canvas, html5-canvas

我有一些函数可以在画布元素上绘制矩形。绘制元素时，我希望能够通过拖动它的角来调整它的大小。

```
var canvas = document.getElementById('canvas'),
  ctx = canvas.getContext('2d'),
  rect = {},
  drag = false;

function init() {
  canvas.addEventListener('mousedown', mouseDown, false);
  canvas.addEventListener('mouseup', mouseUp, false);
  canvas.addEventListener('mousemove', mouseMove, false);
}

function mouseDown(e) {
  rect.startX = e.pageX - this.offsetLeft;
  rect.startY = e.pageY - this.offsetTop;
  drag = true;
}

function mouseUp() {
  drag = false;
}

function mouseMove(e) {
  if (drag) {
    rect.w = (e.pageX - this.offsetLeft) - rect.startX;
    rect.h = (e.pageY - this.offsetTop) - rect.startY;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    draw();
  }
}

function draw() {
  ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
}

init();
```

```
<canvas id="canvas" width="500" height="500"></canvas>
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T01:36:44.690

确保使用某种阈值来检查角上的拖动，使用`closeEnough`变量来保持此阈值，然后通过查看角点和鼠标点之间的差值的绝对值是否小于阈值来检查角。除此之外，还有很多案例需要处理。[这是它的一个jsFiddle](http://jsfiddle.net/Cpvxf/128/)

```
var canvas = document.getElementById('canvas'),
    ctx = canvas.getContext('2d'),
    rect = {},
    drag = false,
    mouseX, 
    mouseY,
    closeEnough = 10,
    dragTL=dragBL=dragTR=dragBR=false;

function init() {
  canvas.addEventListener('mousedown', mouseDown, false);
  canvas.addEventListener('mouseup', mouseUp, false);
  canvas.addEventListener('mousemove', mouseMove, false);
}

function mouseDown(e) {
  mouseX = e.pageX - this.offsetLeft;
  mouseY = e.pageY - this.offsetTop;

  // if there isn't a rect yet
  if(rect.w === undefined){
    rect.startX = mouseY;
    rect.startY = mouseX;
    dragBR = true;
  }

  // if there is, check which corner
  //   (if any) was clicked
  //
  // 4 cases:
  // 1\. top left
  else if( checkCloseEnough(mouseX, rect.startX) && checkCloseEnough(mouseY, rect.startY) ){
    dragTL = true;
  }
  // 2\. top right
  else if( checkCloseEnough(mouseX, rect.startX+rect.w) && checkCloseEnough(mouseY, rect.startY) ){
    dragTR = true;

  }
  // 3\. bottom left
  else if( checkCloseEnough(mouseX, rect.startX) && checkCloseEnough(mouseY, rect.startY+rect.h) ){
    dragBL = true;

  }
  // 4\. bottom right
  else if( checkCloseEnough(mouseX, rect.startX+rect.w) && checkCloseEnough(mouseY, rect.startY+rect.h) ){
    dragBR = true;

  }
  // (5.) none of them
  else {
    // handle not resizing
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);
  draw();

}

function checkCloseEnough(p1, p2){
  return Math.abs(p1-p2)<closeEnough;
}
function mouseUp() {
  dragTL = dragTR = dragBL = dragBR = false;
}

function mouseMove(e) {
  mouseX = e.pageX - this.offsetLeft;
  mouseY = e.pageY - this.offsetTop;
  if(dragTL){
    rect.w += rect.startX-mouseX;
    rect.h += rect.startY-mouseY;
    rect.startX = mouseX;
    rect.startY = mouseY;
  } else if(dragTR) {
    rect.w = Math.abs(rect.startX-mouseX);
    rect.h += rect.startY-mouseY;
    rect.startY = mouseY;
  } else if(dragBL) {
    rect.w += rect.startX-mouseX;
    rect.h = Math.abs(rect.startY-mouseY);
    rect.startX = mouseX;  
  } else if(dragBR) {
    rect.w = Math.abs(rect.startX-mouseX);
    rect.h = Math.abs(rect.startY-mouseY);
  }
    ctx.clearRect(0,0,canvas.width,canvas.height);
    draw();
}

function draw() {
  ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
}

init(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-23T02:16:04.200

做一个手柄系统：当鼠标移动时，获取到每个角的距离以获取光标附近的第一个角，然后保存它并根据它调整矩形的大小。

这是一个说明它的 JSfiddle：http: [//jsfiddle.net/BaliBalo/9HXMG/](http://jsfiddle.net/BaliBalo/9HXMG/)

```
function getHandle(mouse) {
    if (dist(mouse, point(rect.x, rect.y)) <= handlesSize) return 'topleft';
    if (dist(mouse, point(rect.x + rect.w, rect.y)) <= handlesSize) return 'topright';
    if (dist(mouse, point(rect.x, rect.y + rect.h)) <= handlesSize) return 'bottomleft';
    if (dist(mouse, point(rect.x + rect.w, rect.y + rect.h)) <= handlesSize) return 'bottomright';
    if (dist(mouse, point(rect.x + rect.w / 2, rect.y)) <= handlesSize) return 'top';
    if (dist(mouse, point(rect.x, rect.y + rect.h / 2)) <= handlesSize) return 'left';
    if (dist(mouse, point(rect.x + rect.w / 2, rect.y + rect.h)) <= handlesSize) return 'bottom';
    if (dist(mouse, point(rect.x + rect.w, rect.y + rect.h / 2)) <= handlesSize) return 'right';
    return false;
} 
```

# php - 如何从数据库中找到今天和其他日期之间的月份差异？

> ID：14470957
> 
> 赞同：0
> 
> 时间：2013-01-23T01:19:13.027
> 
> 标签：php, mysql, sql

我将今天的日期存储在变量 $today=date("Ymd"); 和其他变量，它是从 mysql 数据库中获取的日期。$date2=(行['date2']);

我尝试过使用 date_diff：

```
$diff=$today-$date2; 
```

但是 $today 是字符串，我找不到解决方案。我试过 $today=newDateTime (date("Ymd")); 并得到一个错误： 类 DateTime 的对象无法转换为 Int

应该提到，在我得到一个月后，我需要将它们存储在一个变量中并与其他变量相乘。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:33:25.080

我猜你想要这个：

```
SELECT TIMESTAMPDIFF(MONTH, CURDATE(), DB_FIELD) 
```

例子

```
SELECT TIMESTAMPDIFF(MONTH, CURDATE(), '2012-01-01') 
```

返回**-12**，因为该日期是 12 个月前

手册页：[TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:19:19.310

尝试这个。

```
<?php
     $date1 = date(strtotime('2013-01-23'));
     $date2 = date(strtotime('2013-05-31'));
     $difference = $date2 - $date1;
     $months = floor($difference / 86400 / 30 );
     echo $months;
?>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:25:06.827

为什么不使用`CURDATE()`？查询应该是这样的

```
SELECT DATEDIFF(CURDATE(), date2) 
```

*   [日期差异](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)
*   [CURDATE()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_curdate)

# angularjs - 使用 BASE 标签和 HTML5Mode 时如何在 Angular 中设置根路径？

> ID：14470959
> 
> 赞同：8
> 
> 时间：2013-01-23T01:19:50.463
> 
> 标签：angularjs

鉴于我在目录中的 Angular 应用程序的基本示例，将应用`<base href="/test/">`程序发送回主（或根）路径的最佳方法是什么？菜单片段（如下）中的所有链接都有效，但是，“主页”链接会导致 IE`HomeCtrl`在后续请求中重新加载应用程序（具体而言）。

**应用程序.js**

```
var basic = '<h1>{{title}}</h1><p>{{body}}</p>';

var app = angular.module('website', []);

app.config( function($routeProvider, $locationProvider) {
    $routeProvider.
        when('/', { template: basic, controller: HomeCtrl }).
        when('/about', { template: basic, controller: AboutCtrl }).
        when('/experiments', { template: basic, controller: ExperimentsCtrl }).
        when('/:alias', { template: basic, controller: PageCtrl, resolve: { alias: resolveAlias } }).
        otherwise({ redirectTo: '/' });

    $locationProvider.html5Mode('true');
} ); 
```

**菜单.html**

```
<base href="/test/">
....
<div id="menu">
    <a href="./" class="btn">Home</a>
    <a href="./about" class="btn">About</a>
    <a href="./experiments" class="btn">Experiments</a>
    <a href="./unicorn" class="btn">Unicorn</a>
</div> 
```

**更新**

对根的每个请求，在 IE9 中，都会重新运行 JS 文件，然后触发两次路由事件。

```
LOG: MainCtrl Loaded!
LOG: routeChangeStart[object Arguments]
LOG: routeChangeSuccess[object Arguments]
LOG: routeChangeStart[object Arguments]
LOG: routeChangeSuccess[object Arguments]
LOG: HomeCtrl Called! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T14:41:24.260

从文档：

```
redirectTo – {(string|function())=} – value to update $location path with and trigger route redirection. 
```

所以浏览器重定向是你调用的函数的一部分。

代替：

```
{ redirectTo: '/' } 
```

尝试使用与主路由相同的方法：

```
{ template: basic, controller: HomeCtrl } 
```

我没有尝试过这个，因为我现在还不能这样做，但如果它有效，请告诉我。

# objective-c-blocks - 子类化 Objective-C Block 会有用吗？

> ID：14470960
> 
> 赞同：1
> 
> 时间：2013-01-23T01:20:04.297
> 
> 标签：objective-c-blocks

我只是在幻想如何让 Block 对象也成为委托，例如 UIAlertView。这有点奇怪，我承认。但是是否可以向 Block 对象添加方法？您可以访问方法中捕获的变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T08:03:33.133

不。块文字有一个运行时类，它是实现定义的，由编译器决定。您无法控制块对象具有的类；因此，您不能使其成为自定义子类的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:30:21.250

使用[REKit](https://github.com/zuccoi/REKit)，您可以在调用委托方法时创建要执行的块。它不限于`UIAlertView`. 您可以对采用委托模式的所有实例使用 REKit。请参阅 REKit 的“[委托本身](https://github.com/zuccoi/REKit#delegate-itself)”示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T15:38:13.963

我的回答是肯定的，但与 UIAlertView 无关。

想象一个类提供一个块作为网络会话完成处理程序。现在你需要继承这个类，并且（除其他外）向处理程序添加一些东西。

您必须复制原始处理程序并添加您的代码。代码重复是一种不好的代码气味。但我不知道子类化块的方法。:(

# ruby-on-rails - 如何验证用户是否已经注册？

> ID：14470961
> 
> 赞同：0
> 
> 时间：2013-01-23T01:20:11.147
> 
> 标签：ruby-on-rails

首先，感谢大家花时间阅读这篇文章。非常非常感谢提前。

我目前正在为课程建立一个小型注册系统。我在我的注册控制器中使用“validates :user_id, :uniqueness => {:scope => :occurrence_id}”来阻止用户通过模型注册两次相同的事件。我想通过灰色的“注册”按钮将此扩展到我的视图。

我认为最好的方法是在发生模型中编写一个方法，如下所示：

```
def already_registered?(user)
  if user.id == self.registrations.find()
    false
  else
    true
  end
end 
```

现在我确定这是行不通的。如果当前用户没有注册一个事件，我如何搜索？

模型/注册.rb

```
class Registration < ActiveRecord::Base

  belongs_to :user
  belongs_to :occurrence

 attr_accessible :occurrence_id, :registration_date, :user_id, :occurrence, :user

 validates :user_id, :uniqueness => {:scope => :occurrence_id}

end 
```

模型/occurrence.rb

```
class Occurrence < ActiveRecord::Base

  belongs_to :course
  belongs_to :location
  has_many :registrations
  has_many :users, :through => :registrations

  validates :price, :presence => true

  attr_accessible :course_id, :datetime_end, :datetime_start, :location_id, :price, :teacher_id, :class_size

  def remaining_seats
    self.class_size - self.registrations.count
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:33:15.183

我不确定我是否真的理解您的问题，但请尝试

```
def already_registered?(ocurrence)
  self.registrations.where(:ocurrence => ocurrence).any?
end 
```

你用它来称呼它

```
current_user.already_registered?(current_ocurrence) 
```

# javascript - 在输入键上移动到表格中的下一个单元格

> ID：14470963
> 
> 赞同：2
> 
> 时间：2013-01-23T01:20:36.560
> 
> 标签：javascript, jquery

我正在尝试创建一个表单，如果您在序列列上按回车键，则下面的单元格将被选中。有人可以为这项任务解决正确的 jquery 公式吗？

我在尝试

```
$('.serial').keypress(function(e) {
    console.log(this);
    if (e.which == 13) {
        $(this).nextAll('#serial').first().focus();
        e.preventDefault();
    }
}); 
```

[http://jsfiddle.net/tYFcH/4/](http://jsfiddle.net/tYFcH/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:31:29.333

*假设您想在任何*输入中按回车键时移动到下面的单元格，请使用以下命令：

```
$('table input').keypress(function(e) {
    if (e.keyCode == 13) {
        var $this = $(this),
            index = $this.closest('td').index();

        $this.closest('tr').next().find('td').eq(index).find('input').focus();
        e.preventDefault();
    }
}); 
```

这是你的小提琴：http: [//jsfiddle.net/tYFcH/13/](http://jsfiddle.net/tYFcH/13/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T01:22:47.090

```
$('.serial').keypress(function(e) {
    console.log(this);
    if (e.which == 13) {
        $(this).closest('tr').next().find('input.serial').focus();
        e.preventDefault();
    }
}); 
```

[http://jsfiddle.net/tYFcH/6/](http://jsfiddle.net/tYFcH/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:44:24.313

next-in-dom 插件就是为此目的而编写的。*免责声明：我写的*

[http://techfoobar.com/jquery-next-in-dom/](http://techfoobar.com/jquery-next-in-dom/)

```
$('.serial').keypress(function(e) {
    if (e.which == 13) {
        $(this).nextInDOM('.serial').focus();
    }
}); 
```

# c# - 在我的游戏中玩家和怪物一起错过

> ID：14470965
> 
> 赞同：0
> 
> 时间：2013-01-23T01:21:12.097
> 
> 标签：c#, math, random

在我的 C# 游戏 TextQuest 中，战斗系统正在进行中，我遇到了一个问题。如果玩家错过了怪物也错过了（总是同时）。这是使用的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        Monster_Class mc = new Monster_Class();
        Account_Class ac = new Account_Class();
        if (hitOrMiss())
        {
            int hit = -1;
            hit = mc.hitAmount(ac.getAtk(Properties.Settings.Default.CurrentUser), mc.getDef(monster));
            mhealth -= hit;
            if (hit == -1)
            {
                setText("You missed.");
            }
            else
            {
                setText("You hit " + hit + ".");
            }
            monsterHit();
            update();
        }
        else
        {
            setText("You missed.");
            monsterHit();
        }
    }

private void monsterHit()
{
    Monster_Class mc = new Monster_Class();
    Account_Class ac = new Account_Class();
    if (hitOrMiss())
    {
        int hit = -1;
        hit = mc.hitAmount(mc.getAtk(monster), ac.getDef(Properties.Settings.Default.CurrentUser));
        phealth -= hit;
        if (hit == -1)
        {
            addText(monster + " missed.");
        }
        else
        {
            addText(monster + " hit " + hit + ".");
        }
    }
    else
    {
        addText(monster + " missed.");
    }
}

private bool hitOrMiss()
{
    bool hit = true;
    Random rand = new Random();
    if (rand.Next(101) < 15)
    {
        hit = false;
    }
    return hit;
}

public int hitAmount(int Atk, int Def)
{
    int hit = -1;
    Random rand = new Random();
    int deturm = rand.Next(6);
    try
    {
        hit = ((Atk + deturm * 3) / Def + 1) / 2;
        if (hit == 0)
        {
            hit = 1;
        }
    }
    catch { }
    return hit;
} 
```

另外，如果您对造成的伤害量有更好的想法，请告诉我。因为我只是把数字和符号放在一起

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:25:39.833

您不想每次需要随机数时都创建一个新的 Random 对象。否则我怀疑你会得到相同的号码！定义一个全局 Random 对象一次，并在每个随机数请求中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:31:11.953

作为一个侧面提示，我会稍微改变设计，例如：

```
bool hitOrMiss(Entity attacker, Entity defender)
{
  // do your calcs
}

int doAttack(Entity attacker, Entity defender)
{
  if (hitOrMiss(attacker, defender)) {
    // calculate damage
    return dmg;
  }
  else
    return 0;
}

private void attachPhase(object sender, EventArgs e)
{
  Player player = ...
  Monster monster = ...

  int playerDmg = doAttack(player, monster);
  int monsterDmg = doAttack(monster, player);

  if (playerDmg > 0) {

  }

  if (monsterDmg > 0) {

  }
} 
```

# regex - 排除一组字符内的表达式

> ID：14470966
> 
> 赞同：1
> 
> 时间：2013-01-23T01:21:12.113
> 
> 标签：regex, preg-match

如何编写匹配任何这些字符的正则表达式

```
[a-z.' ] 
```

但不包括这个表达式

```
(?:bl(?: |\. |\.)ah) 
```

?

表达式可能出现 {0,} 次，出现在字符串的开头、中间或结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:39:49.150

使用负面的展望：

```
^(?!.*bl[. ]*ah)[a-z.' ]* 
```

如果您想对“blah”中的最大干预字符数持怀疑态度：

```
 ^(?!.*bl[. ]{,2}ah)[a-z.' ]* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:58:45.520

除非我遗漏任何东西，否则以下模式应该匹配。你可能想用边界字符包裹“blah”——`\bblah\b`

```
(?<=^|[^a-z.' ]|blah)(?:(?!blah)[a-z.' ])+ 
```

与您的主要模式（需要避免`bl ah`,`bl. ah`和`bl.ah`）一样

```
~
    (?<=^|[^a-z.' ]|bl[. ]ah|bl\.\ ah)
    (?:(?!bl(?:\ |\.\ ?)ah)[a-z.' ])+
~ix 
```

向后看的坏事是，您需要声明精确的长度。因此，您需要在后视中明确写出您想要（或不想要）的内容。

# java - 让 JInternalFrame 出现的问题

> ID：14470969
> 
> 赞同：1
> 
> 时间：2013-01-23T01:21:30.707
> 
> 标签：java, swing, jframe, jinternalframe, jdesktoppane

所以，在这一点上，我只是一个简单的，里面`JFrame`有一个简单的。`JPanel`（也就是说，它`contentPane`是 a `JPanel`。） 中有一个菜单栏，其中`JFrame`有一个按钮，可以将当前转换`JFrame`为 a `JInternalFrame`- 它将`JFrame`'s`contentPane`设置为预先存在的，并将内部的 's`JDesktopPane`移动到新创建的 - 并创建一个第二个里面有一个新的。这是我的代码：`JPanel``JFrame``JInternalFrame``JInternalFrame``JPanel`

```
if(ae.getActionCommand().equals("newWindow"))
{
    if(jdp.getComponentCount() > 0)//jdp is the pre-existing JDesktopPane
    {
        //All of the code in this if statement works fine. It's the else in which I am getting problems.
        DefaultInternalFrame dif = new DefaultInternalFrame();//DefaultInternalFrame is an extension of JInternalFrame which is literally nothing more than a JInternalFrame right now.
        jdp.add(dif);
        dif.setContentPane(new DefaultPanel());//Much like DefaultInternalFrame, DefaultPanel is just an extension of JPanel which I plan on adding to, but have not yet.
        dif.setVisible(true);
        dif.moveToFront();
    }else
    {
        //Again, this is where I'm having issues..
        DefaultPanel dp = (DefaultPanel)baseFrame.getContentPane();
        jdp.setVisible(true);
        baseFrame.setContentPane(jdp);
        DefaultInternalFrame dif = new DefaultInternalFrame();
        jdp.add(dif);
        dif.setContentPane(dp);
        dif.setVisible(true);
        dif.moveToFront();

        DefaultInternalFrame dif2 = new DefaultInternalFrame();
        jdp.add(dif2);
        dif2.setContentPane(new DefaultPanel());
        dif2.setVisible(true);
        dif2.moveToFront();
    }
    arrangeHorizontally();//This takes care of resizing and relocating the JInternalFrames. (It is definitely not the problem.)
} 
```

我遇到的问题是，它似乎`JDesktopPane`正在获得更高的优先级。也就是说，在这段代码执行后，我看不到两个`JInternalFrames`，我看到`JDesktopPane`. 这不是因为`JInternalFrame`. 我已经进行了广泛的检查（通过在`arrangeHorizontally()`方法之后打印大小和位置。）所以，我很茫然。有什么帮助吗？

SSCCE：

```
private static JFrame f;
private static JDesktopPane desktop;
public static void main(String[] args) throws InterruptedException
{
    desktop = new JDesktopPane();

    f = new JFrame("Test");
    f.setPreferredSize(new Dimension(500,500));
    f.setContentPane(new JPanel());

    f.pack();
    f.setVisible(true);

    Thread.sleep(4000); //Just so you can see the before/after

    JPanel panel = (JPanel)f.getContentPane();

    desktop.setVisible(true);
    f.setContentPane(desktop);

    JInternalFrame inFrame = new JInternalFrame("1");
    desktop.add(inFrame);
    inFrame.setContentPane(panel);
    inFrame.setPreferredSize(new Dimension(200,200));//Just some random size; doesn't matter.
    inFrame.pack();
    inFrame.setVisible(true);

    JInternalFrame inFrame2 = new JInternalFrame("2");
    desktop.add(inFrame2);
    inFrame2.setContentPane(new JPanel());
    inFrame2.setPerferedSize(new Dimension(200,200));
    inFrame2.pack();
    inFrame2.setVisible(true);
} 
```

那应该可以工作.. 好的，SSCCE 实际上可以正常工作.. 这让我想知道，为什么原来的工作不正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:21:02.897

内容窗格中的更改可能不足以让框架自行更新（您认为它会，但干草）。

在您的切换代码中，尝试`validate`从框架中添加调用...

```
//Again, this is where I'm having issues..
DefaultPanel dp = (DefaultPanel)baseFrame.getContentPane();
jdp.setVisible(true);
baseFrame.setContentPane(jdp);
DefaultInternalFrame dif = new DefaultInternalFrame();
jdp.add(dif);
dif.setContentPane(dp);
dif.setVisible(true);
dif.moveToFront();

DefaultInternalFrame dif2 = new DefaultInternalFrame();
jdp.add(dif2);
dif2.setContentPane(new DefaultPanel());
dif2.setVisible(true);
dif2.moveToFront();

baseFrame.validate(); // <-- Call me 
```

您可能还需要致电`repaint`，但看看这能带给您什么。

# iphone - 如果我在 appstore 中按设备对我的应用收费，我应该选择什么？

> ID：14470970
> 
> 赞同：0
> 
> 时间：2013-01-23T01:21:32.250
> 
> 标签：iphone, app-store

我的应用程序仅适用于 iPad。这些天我需要将我的应用程序发布到应用程序商店进行销售。该应用程序按设备收费，每台设备都被视为用户。在应用商店，我可以注册两种类型的产品： 1、非消耗品：购买一次，但适用于用户的所有设备。2、Non-Renewable订阅：按时长购买，但适用于用户的所有设备。

没有产品类型与我当前的应用程序充电模式匹配（安装我的应用程序的每台设备都必须收费）。我能怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:58:07.510

您可以通过应用内购买来做到这一点。因此，该应用程序基本上是免费下载的，但要使用您需要进行应用内购买的功能。您不应该在这里使用 Consumable，因为如果购买许可证并卸载应用程序（或获得新设备），他将不得不再次购买它，尽管他只使用一台设备。所以我会将应用内购买设置为非消耗品，但会跟踪购买。

要跟踪购买，您需要一个服务器，并且您需要生成某种 UDID（设备的唯一 ID）并将其链接到用户帐户。当用户现在点击（我已经购买或购买应用内购买）时，您首先像往常一样询问 Apple Store 应用内购买，但在此成功后询问您的服务器他是否需要购买另一个许可证或如果他想将许可证移至此设备或其他适合您的许可模式的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:25:47.277

我不相信你能做到这一点。用户必须能够在 Apple 允许他们安装的任何设备上进行安装。同时安装的总数可能有限制（5 个？），但想法是一个 Apple ID 拥有您的程序的一个副本，并且可以在他们的任何设备上运行它。

# javascript - javascript中的单加号运算符

> ID：14470973
> 
> 赞同：25
> 
> 时间：2013-01-23T01:21:45.623
> 
> 标签：javascript

刚刚在下划线的来源中看到了这一点：

```
if (obj.length === +obj.length) {
    ...
} 
```

做什么的`plus`？我以前从未见过这个。

它在开发人员中被认为是一种好的做法吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-23T01:22:10.367

加号将字符串转换为浮点数。您提供的代码等效于以下内容：

```
if ( obj.length === Number(obj.length) ) {
    // ...
} 
```

# configuration - 为什么 NLog 在 Server 2008 R2 上找不到我的日志目标？

> ID：14470976
> 
> 赞同：1
> 
> 时间：2013-01-23T01:22:37.853
> 
> 标签：configuration, nlog

我在运行使用 NLog 的程序时遇到问题。我在初始化过程中遇到异常，其结尾为：

> ---> NLogConfigurationException：加载配置时发生异常 ...
> ---> System.ArgumentException：找不到目标：'ColoredConsole'

我也有[完整的异常文本](http://pastebin.ubuntu.com/1561296/)。

我相当确定这不是我的配置问题，因为a）我可以在其他机器上使用相同的配置而不会出现问题，并且b）我将它削减到我能做到的最愚蠢的配置，但我仍然看到问题：

**NLog配置：**

```
<configSections>
  <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
</configSections>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <target name="console" xsi:type="ColoredConsole" layout="test" />
  </targets>
  <rules>
    <logger name="*" minlevel="Trace" writeTo="console" />
  </rules>
</nlog> 
```

我还尝试了其他目标类型，包括**Console**和**File**，结果相同。

它只是这台机器的事实表明存在权限问题，但我尝试在我能想到的任何地方提供权限和管理员权限，我尝试将它作为不同的帐户从不同的目录运行——所有这些都没有任何改变。系统正在运行 Server 2008 R2，fwiw。

我可能错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:23:10.083

Server 2008 R2 附带 .NET 3.5 SP1，但默认情况下未启用。然而，显然 .NET 2*是*默认启用的，这就是为什么我能够执行我的一些 .NET 代码而不会收到[更神秘的错误](https://stackoverflow.com/questions/6498703/kernelbase-dll-error-running-c-sharp-app-on-windows-server-2008-r2)。

[通过“添加功能”对话框启用 .NET 3.5](http://blogs.msdn.com/b/vijaysk/archive/2009/08/16/you-must-use-the-role-management-tool-to-install-or-configure-microsoft-net-framework-3-5.aspx)允许 NLog 成功运行。

# android - Implementing Samsung Galaxy Note S-Pen AirView previews in app

> ID：14470980
> 
> 赞同：3
> 
> 时间：2013-01-23T01:22:59.517
> 
> 标签：android, samsung-mobile

Is there a way to implement the Samsung S-Pen AirView previews, like in the Samsung Note's stock email app or in mini-windows menu bar buttons, in my own app? Is there an API? Thank you very much.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:58:34.473

Yes, you probably want to start by checking out the [S Pen Sdk](http://developer.samsung.com/s-pen-sdk) with the related documents and tutorials.

# javascript - 无法让无限滚动工作。（jQuery插件）

> ID：14470982
> 
> 赞同：1
> 
> 时间：2013-01-23T01:23:09.347
> 
> 标签：javascript, jquery, infinite-scroll

我正在尝试使用 jQuery 插件[Infinite-Scroll](https://github.com/paulirish/infinite-scroll)但没有成功。我的问题是插件不起作用，什么也没有发生，甚至是控制台错误，一切看起来都很好。我需要使用这个，因为我将使用另一个插件（[jQuery Masonry](http://masonry.desandro.com/)），它支持并推荐 Infinite-Scroll。我很容易让 Masonry 工作，但不是 Infinite-Scroll。

所以我开始在一个测试页面中单独测试 Infinite-Scroll，但什么也没有。有什么帮助吗？

**测试.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>Infinite-Scroll Test</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="jquery.infinitescroll.min.js"></script>
    <style>
    #container {
        width: 600px;
        margin: 30px auto;
    }

    .element {
        background: #666;
        width: 100px;
        height: 500px;
        margin: 5px;
        float: left;
    }
    </style>
</head>
<body>

    <script>
    $(function() {
        var $container = $('#container');
        $container.infinitescroll({
            navSelector  : '#page-nav',    // selector for the paged navigation 
            nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
            itemSelector : '.element',     // selector for all items you'll retrieve
            loading: {
                finishedMsg: 'No more pages to load.',
                img: 'http://i.imgur.com/6RMhx.gif'
            }
        });
    });
    </script>

    <div id="container">
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
        <div class="element">
            test
        </div>
    </div>

    <nav id="page-nav">
      <a href="next.html"></a>
    </nav>

</body>
</html> 
```

**下一个.html**

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div id="container">
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
        <div class="element">
            new one
        </div>
    </div>
</body>
</html> 
```

# .net - 使用 dbContext.savechanges() 等待任务“迷路”

> ID：14470983
> 
> 赞同：1
> 
> 时间：2013-01-23T01:23:20.733
> 
> 标签：.net, vb.net, entity-framework, task-parallel-library

Task.Run()/Task.Factory.StartNew() 偶尔会遇到类似的问题，所以我认为必须有一些非常基本的东西，我不了解它的使用（对于那些喜欢花括号的人） ，我很抱歉不得不混淆VB）：

我有一个带有以下代码的异步方法：

```
 Try
        Using context As New ECOSSContext

            context.Meters.Attach(entity)

            Await Task.Run(Sub() _
                               context.SaveChanges() _
                               )

            'ANY CODE HERE NEVER GETS FIRED

        End Using

        Return True

    Catch ex As Exception
        Return False
    End Try 
```

它是从同步方法调用的，如下所示：

```
Dim result = ModelService.MeterResolution.SaveMeter(data).Result 
```

据我*了解*，这应该等到 SaveMeter() 方法返回结果。我之前布置的异步方法应该在 Task.Run 行上等待，直到它返回，然后继续（因此等待）。相反，一旦命中 Await 行，调用堆栈似乎就退出了。SaveChanges() 成功，但我无法告知客户这一事实。

我在不同的应用程序中相对频繁地使用 TPL 并且没有遇到这些问题，但是没有我需要使用的 context.SaveChanges() 之类的方法。

任何建议表示赞赏。我希望我不只是误读了文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:44:54.333

问题实际上是由于您使用`Result`. 从同步代码调用`async`代码可能非常棘手。

我在我的博客上解释了[这个僵局的全部原因](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。简而言之，有一个“上下文”默认保存在每个开头`await`并用于恢复该方法。

因此，如果在 UI 或 ASP.NET 上下文中调用此方法，则在`await`完成时，该`async`方法会尝试重新进入该上下文以继续执行。不幸的是，使用`Result`(or `Wait`) 的代码将阻塞该上下文中的线程，因此该`async`方法无法完成。

避免这种情况的准则是：

1.  `ConfigureAwait(continueOnCapturedContext: false)`尽可能多地使用。这使您的`async`方法能够继续执行而无需重新进入上下文。
2.  `async`一路使用。使用`await`代替`Result`or `Wait`。

# c - 我在哪里可以找到 C 中 unix 的头文件

> ID：14470985
> 
> 赞同：1
> 
> 时间：2013-01-23T01:23:28.273
> 
> 标签：c, unix, header-files

我在哪里可以找到我在 unixOS 上的 C 头文件。请给我您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:26:29.693

GCC 在几个不同的地方寻找标题。在一个普通的 Unix 系统上，如果你没有另外指示它，它会寻找用 #include 请求的头文件：

```
 /usr/local/include
 libdir/gcc/target/version/include
 /usr/target/include
 /usr/include 
```

# c++ - 在 C++ 中删除嵌套映射中的条目

> ID：14470989
> 
> 赞同：0
> 
> 时间：2013-01-23T01:23:52.747
> 
> 标签：c++, map

我有一张地图声明为

```
std::map< std::string, std::map<int,std::list<pointers*> > myMap; // in c++. 
```

我可以知道为了删除此地图中的条目，调用 myMap.erase(entryToBeDeleted) 是否足够？或者我应该去遍历子地图以先删除所有内容，然后再删除条目？

补充一点，内部映射是一个以 int 为键、指针列表为值的映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:41:48.230

如果您从外部映射中删除条目，它将主动从内部映射中删除对象。删除`outer[i]`将销毁（即调用析构函数） for `outer[i].first`and `outer[i].second`，这意味着将为该元素调用内部映射的析构函数。调用内部映射的析构函数将迭代地调用其中所有元素/对象（键和值）的析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:30:25.683

擦除功能应该足够了，因为它用于删除条目。

如果您有任何疑问，请参考此[http://www.cplusplus.com/reference/map/map/erase/](http://www.cplusplus.com/reference/map/map/erase/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:31:39.100

这取决于嵌套映射的真实类型，如果它包含原始指针，则您有责任遍历嵌套映射的每个项目以释放​​内存。否则，`myMap.erase(entryToBeDeleted)`就足够了。

**编辑：**

由于您的嵌套映射具有指针列表，因此您需要遍历每个嵌套映射内的每个列表以删除指针。

更好的方法是使用智能指针：

```
std::map< std::string, std::map<int,std::list<std::unique_ptr<pointers> > > myMap; 
```

当您删除嵌套映射时，指针将被自动释放。

# c# - System.InvalidCastException 将 WMI 对象添加到 Dictionary

> ID：14470992
> 
> 赞同：0
> 
> 时间：2013-01-23T01:24:11.360
> 
> 标签：c#, binding, dictionary, combobox, wmi

我有两个问题：

首先，我正在努力将一些 WMI 对象添加到字典中。目前，每当我尝试添加所需的值时，我都会得到`System.InvalidCastException: Specified cast is not valid.`如何纠正这个问题？

其次，将这些 WMI 对象/值添加到我的字典后，如何将我的字典绑定到 WPF 组合框？我希望能够绑定字典值，在这种情况下绑定`NetConnectionID`到组合框下拉列表，同时在`Index`选择对应值时从我的字典中返回。

这是我的代码：

```
class NetworkInterfaces
{
    public Dictionary<int, string> GetNetworkAdapters()
    {
        Dictionary<int, string> Adapters = new Dictionary<int, string>(); 

        try
        {
            ManagementObjectSearcher searcher = new ManagementObjectSearcher
                ("SELECT Index,NetConnectionID FROM Win32_NetworkAdapter");
            ManagementObjectCollection data = searcher.Get();
            foreach (ManagementObject item in data)
                Adapters.Add((int)item["Index"], (string)item["NetConnectionID"]);

            return Adapters;
        }
        catch (Exception ex)
        {
            Console.WriteLine("ERROR: " + ex);
        }

        return null;
    }
}

. . . .

    private void NetworkAdapters()
    {
        NetworkInterfaces NICInfo = new NetworkInterfaces();
        Dictionary<int, string> Adapters = NICInfo.GetNetworkAdapters();

        if (Adapters != null)
        {                
            cmbNetworkAdapters.ItemsSource = Adapters;
            cmbNetworkAdapters.DisplayMemberPath = "Value";
        }
    }

    private void cmbNetworkAdapters_DropDownOpened(object sender, EventArgs e)
    {
        cmbNetworkAdapters.DisplayMemberPath = "Key";
    }

    private void cmbNetworkAdapters_DropDownClosed(object sender, EventArgs e)
    {
        cmbNetworkAdapters.DisplayMemberPath = "Value";
    } 
```

错误详情：

```
System.InvalidCastException was caught
  HResult=-2147467262
  Message=Specified cast is not valid.
  Source=MyProject
  StackTrace:
       at MyProject.NetworkInterfaces.GetNetworkAdapters() in h:\_Storage\Projects\MyProject\MyProject\NetworkInterfaces.cs:line 28
  InnerException: 
```

# jquery - 自定义缩略图寻呼机影响页面上的所有滑块 - Bx-Slider v4

> ID：14470994
> 
> 赞同：0
> 
> 时间：2013-01-23T01:24:13.813
> 
> 标签：jquery, jquery-plugins, custom-controls, thumbnails, bxslider

我最近建立了一个站点，该站点通过类名在 div 上多次调用 bx-slider。使用普通寻呼机工作正常，但在使用带有缩略图的自定义寻呼机时出现错误。似乎在打开“pagerCustom”选项的情况下导航滑块会影响页面上的所有滑块。

这是一个简化的测试用例供您查看：[http ://codepen.io/DavidVII/full/jhoIc](http://codepen.io/DavidVII/full/jhoIc)

单击缩略图并查看两个滑块的变化情况。

如果您想分叉我的 CodePen，请在此处查看此链接：http: [//codepen.io/DavidVII/pen/jhoIc](http://codepen.io/DavidVII/pen/jhoIc)

我在插件 github 页面上提出了一个新问题，但我想我会在这里发帖，因为我在 stackoverflow 上一直很幸运。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T09:47:53.813

这是因为您已经用一个类初始化了两个滑块。它应该用两个单独的类来完成，比如`.bxslider1`和`.bxslider2`

```
<div class="container">
  <ul class="bxslider1">
    <li><img src="http://bxslider.com/images/730_200/tree_root.jpg" /></li>
    <li><img src="http://bxslider.com/images/730_200/houses.jpg" /></li>
    <li><img src="http://bxslider.com/images/730_200/hill_fence.jpg" /></li>
  </ul>
  <ul class="bxslider2">
    <li><img src="http://bxslider.com/images/730_200/tree_root.jpg" /></li>
    <li><img src="http://bxslider.com/images/730_200/houses.jpg" /></li>
    <li><img src="http://bxslider.com/images/730_200/hill_fence.jpg" /></li>
  </ul>
</div>
<script>
    $('.bxslider1').bxSlider();
    $('.bxslider2').bxSlider();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T18:08:07.853

对于碰巧遇到此问题的任何人，这是我的实际答案。Codepen 示例[在这里](http://codepen.io/DavidVII/pen/zKCcB)。

这是完成这项工作所需的 JS：

```
var sliderSets = $('.sliderWrap');

function initSliders(targetSlider, targetPager) {
  $(targetSlider).bxSlider({
    pagerCustom: targetPager
  });
}

$(sliderSets).each(function() {
  var targetSlider = "#" + $(this).children('.bxslider').attr('id');
  var targetPager = "#" + $(this).children('.bx-pager').attr('id');

  initSliders(targetSlider, targetPager);
}); 
```

我本质上是用我的目标 CSS 类遍历所有元素并调用`.bxSlider`它的方法。

请注意，此代码来自 2 年前，因此 BxSlider 代码可能已更改。我正在回答这个问题，因为 2 年前我提出这个解决方案时从未发布过实际答案。

# jquery - 具有奇怪 JSON 格式的 AJAX 响应

> ID：14470995
> 
> 赞同：0
> 
> 时间：2013-01-23T01:24:16.847
> 
> 标签：jquery, json

您好，我有一个 PHP 脚本，它从一个表中查找用户的所有电话号码，然后根据该电话号码列表在另一个表中查找他的信息。

PHP 脚本：

```
$intUserID = $_POST['intUserID_PHP']; //This is the user ID 
$arrayUserPhoneNumbers = $_POST['arrayUserPhoneNumbers'];//this is an array of all the user's phone numbers.
  try {     
        $DBC  = new PDO("pgsql:host=$host;port=$port;dbname=$dbname;user=$user;           password=$password");//All my DB connection is well set.
        $query1 = "SELECT phones FROM usersphones WHERE id=".$intUserID;
        $sth = $DBC->prepare($query1);
        $sth->execute();
        $result = $sth->fetchAll();
        $i = 0;
           foreach ($result as $data) {
             $query2 = "SELECT txtshare,dtzserver,adress,issue FROM tbluserinfo WHERE  phone='".$data['phones']."'";
             $sth = $DBC->prepare($query2);
             $sth->execute();
             $result2 = $sth->fetchAll();
             echo json_encode($result2);
             $i++;  
           }    
}           
catch(PDOException $e) {
     echo 'Error';   
} 
```

这是我正在使用的 JQuery 代码：

```
$.ajax({
    type: "POST",
    url: "getinfo.php",              
    dataType:'json',
    data: {arrayUserPhoneNumbers : arrayUserPhoneNumbers,intUserID : intUserID},
success: function(data) {
}
}); 
```

我的问题是：我得到了很多行，这只是最后一个，我从我的 firebug 控制台得到的 JSON 结果是：

```
[
    {
        "txtshare": "F",
        "0": "F",
        "dtzserver": "2013-01-05 00:32:55.311037+00",
        "1": "2013-01-05 00:32:55.311037+00",
        "phone": "+33522988655",
        "2": "+33522988655",
        "issue": "Lost my smartphone",
        "3": "Lost my smartphone"
    }
] 
```

我的 JSON 是有效的，但我不知道为什么在这个结果中有重复数据的“0”、“1”、“2”和“3”索引？在我的表中，我只有 txtshare、dtzserver、电话和问题字段。我希望它是这样的：

```
[
        {
            "txtshare": "F",
            "dtzserver": "2013-01-05 00:32:55.311037+00",
            "phone": "+33522988655",
            "issue": "Lost my smartphone",
        }
 ] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:08:32.510

您可能会看到返回的 JSON 包含键 => 值对和数组索引格式，因此您可以从中选择任何 1。访问： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
echo "Sequential array".PHP_EOL;
$sequential = array("foo", "bar", "baz", "blong");
var_dump(
 $sequential,
 json_encode($sequential)
);

echo PHP_EOL."Non-sequential array".PHP_EOL;
$nonsequential = array(1=>"foo", 2=>"bar", 3=>"baz", 4=>"blong");
var_dump(
 $nonsequential,
 json_encode($nonsequential)
);

echo PHP_EOL."Sequential array with one key unset".PHP_EOL;
unset($sequential[1]);
var_dump(
 $sequential,
 json_encode($sequential)
); 
```

输出：

顺序数组array(4) { [0]=> string(3) "foo" [1]=> string(3) "bar" [2]=> string(3) "baz" [3]=> string( 5) "blong" } 字符串(27) "["foo","bar","baz","blong"]"

非序列数组array(4) { [1]=> string(3) "foo" [2]=> string(3) "bar" [3]=> string(3) "baz" [4]=>字符串(5) "blong" } 字符串(43) "{"1":"foo","2":"bar","3":"baz","4":"blong"}"

一键序列数组 unset array(3) { [0]=> string(3) "foo" [2]=> string(3) "baz" [3]=> string(5) "blong" } string( 33) "{"0":"foo","2":"baz","3":"blong"}"

# vb.net - 比较数据库中的值

> ID：14470998
> 
> 赞同：0
> 
> 时间：2013-01-23T01:24:45.560
> 
> 标签：vb.net, ms-access

任何想法如何编写代码以使用访问数据库在 vb.net 中比较实际值和用户输入值。我使用 If 语句，但效果不佳。例如

```
Table A
type=APW
Bin=1
actual value = 36.00

user input 1
type=APW
Bin=1
value=39.00
status=fail

user input 
type=APW
Bin=3
value=36.00
status=non 
```

谁能给我一些想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:27:39.120

这个小样本，在这里下载源：[http ://www.2shared.com/file/1DPE8mRo/Access.html](http://www.2shared.com/file/1DPE8mRo/Access.html)

```
Imports System.Data.OleDb
Imports System.IO

Public Class Form1
Private Function GetCon() As String
    Return "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\IT\Documents\Demo.accdb" ' Your Location Database
End Function
Private Function Compare2Value(ByVal bin As Integer, ByVal val As Double) As String
    Dim status As String
    Dim con As New OleDbConnection(GetCon)
    Dim cmd As New OleDbCommand

    If con.State = ConnectionState.Closed Then

        cmd.Connection = con
        con.Open()
        cmd.CommandText = "SELECT BIN,VALUENAME FROM TYPE WHERE TYPEID=@ID"
        cmd.Parameters.Add("@ID", OleDbType.VarChar, 5)
        cmd.Parameters("@ID").Value = txttype.Text
        Dim da As New OleDbDataAdapter(cmd)
        Dim ds As New DataSet
        da.Fill(ds, "type")
        If ds.Tables(0).Rows(0)("BIN") = bin And ds.Tables(0).Rows(0)("VALUENAME") = val Then
            status = "OK"
        Else
            status = "FAIL"
        End If
    End If
    Return status
End Function

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    MsgBox(Compare2Value(txtbin.Text, txtvalue.Text))
End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:34:02.583

使用查询例如

```
Private Sub Compare2Value(ByVal 1Value As String,ByVal 2Value as String)
dim cmd as new  SqlCommand
dim ds as new dataset
cmd.Connection=GetConnection()
cmd.CommandText="SELECT bin,value FROM TableA WHERE type=@type"
cmd.Parameters.Add("@type",SQLDbType.Varchar,5)
cmd.Parameters("@type").Value=TypeText
cmd.ExecuteReader()
dim da as new SqlDataAdpter(cmd)
da.Fill(ds,"dsname")
If ds.Tables(0).Rows()("bin")=1Value  and  ds.Tables(0).Rows()("value")=2Value Then 
   Status ="OK"
else
   Status ="FAIL"
end If
End Sub 
```

如何使用：Compare2Value(Bin,Value)

抱歉，如果使用记事本编辑器出现任何错误，此基本逻辑将与数据库进行比较