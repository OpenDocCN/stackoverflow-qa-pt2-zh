# StackOverflow 问答 12942000-12942999

# view - Flex 拆分视图导航器不工作：-S

> ID：12942000
> 
> 赞同：0
> 
> 时间：2012-10-17T19:35:35.097
> 
> 标签：view, flex4, split, flashbuilder4

我已经在 Flex 中开发移动应用程序很长时间了，这个问题真的很烦人。我有一个要与拆分视图导航一起使用的应用程序。因此，当应用程序处于横向时，菜单将位于分屏的左侧，而在纵向时，它将显示为顶部的按钮。

我已经完成了确切的步骤，因为我知道他们如何实现这一点。以下是我的默认包文件中的内容：

```
<s:states>
        <s:State name="portrait"/>
        <s:State name="landscape"/>
    </s:states> 

    <s:SplitViewNavigator id="svn" width="100%" height="100%" autoHideFirstViewNavigator="true">
        <s:ViewNavigator id="leftNav" width="310" height="100%" firstView="views.Menu"/>
        <s:ViewNavigator id="rightNav" width="100%" height="100%" firstView="views.Home">
            <s:actionContent.portrait>
            <s:Button id="NavButton" label="Menu" fontSize="15" click="svn.showFirstViewNavigatorInPopUp(NavButton)"/>
            </s:actionContent.portrait>         
        </s:ViewNavigator>
    </s:SplitViewNavigator> 
```

但是，当我使用此代码并且应用程序处于横向时，我仍然可以在顶部的右侧窗格中看到菜单按钮，更奇怪的是，如果我在横向时单击此按钮，右侧部分将展开以填充屏幕并且菜单将进入弹出框。

有什么我在这里遗漏的东西还是我必须设置的其他东西，因为我尝试了大约 20 种不同的方法，但没有运气，而且非常令人沮丧？提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:49:08.540

我知道这是一个老问题，但这是很多人都会遇到的事情！

所以解决方案实际上非常简单，只需添加`visible.landscape="false"`到您的按钮就完成了，所以您最终会得到这样的按钮标签：

```
<s:Button visible.landscape="false" id="NavButton" label="Menu" fontSize="15" click="svn.showFirstViewNavigatorInPopUp(NavButton)"/> 
```

我在您的评论中看到，当设备旋转发生变化时，状态正在发生变化，但是如果由于某种原因这不起作用，您可以向您的应用程序（或视图）添加一个调整大小事件处理程序，然后执行类似的操作

```
protected function resizeHandler(event:ResizeEvent):void
{
   if( width > height ){
      currentState = "landscape";
   }else{
      currentState = "portrait";
   }
} 
```

我再次知道您可能已经解决了这个问题，但也许它会帮助其他人！

# vba - 带有选择框 Outlook vba 的弹出窗口

> ID：12942002
> 
> 赞同：0
> 
> 时间：2012-10-17T19:35:40.557
> 
> 标签：vba, outlook

如何使用 Outlook vba 制作带有几个选择框（下拉菜单）的弹出窗口。我需要使用选择框中选择的值来填充网站上的选择框（已经使用此脚本填充了一些文本字段）

我的脚本处理当前选定的邮件项并启动 IE 并预填充 2 个文本字段和一个带有发件人姓名、主题和电子邮件正文的文本区域...现在我希望它填充几个选择框并提交表单，以便您只是再也看不到IE了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:43:11.670

您必须制作一个用户表单。

在 VBE 中，插入一个用户窗体。添加所需的控件和所需的任何代码。

只需从您现有的代码中启动用户表单。像这样`[UserformName].Show`UserformName 将替换为实际名称......通常是 UserForm1。

# php - 显示您关注的人的所有帖子

> ID：12942009
> 
> 赞同：1
> 
> 时间：2012-10-17T19:35:56.860
> 
> 标签：php, mysql

我有 2 张桌子，`t_feed`并且`t_follow`.

`t_feed`有 -

*   饲料ID
*   用户身份
*   帖子

`t_follow`有 -

*   关注ID
*   用户身份
*   下列的

我将如何显示某人关注的所有用户的所有帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:40:57.120

```
$query="select* from t_follow INNER JOIN t_feed on t_follow.userid=t_feed.userid where userid=".$userid; 
```

这里 $userid 是当前用户的用户 ID。传递此查询以接收输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:41:33.403

如果您为此使用 MySQL 数据库，您可以查看 Tizag 关于 MySQL 连接的教程：[http](http://www.tizag.com/mysqlTutorial/mysqljoins.php) ://www.tizag.com/mysqlTutorial/mysqljoins.php ：

```
$query = "select feedID, posts from t_follow INNER JOIN t_feed on t_follow.userid = t_feed.userid where userid=".$userid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:40:38.347

使用`JOIN`：

```
SELECT t_feed.posts FROM t_feed JOIN t_follow ON t_feed.userID = t_follow.following; 
```

# java - 在本地定义数组并将参数传递给其他方法时遇到问题

> ID：12942010
> 
> 赞同：1
> 
> 时间：2012-10-17T19:36:01.570
> 
> 标签：java, arrays, sorting, methods, parameters

我的任务是编写一个 Java 类，它创建一个整数数组，用值填充它，打印未排序的值，按升序对值进行排序，最后打印排序后的值。

在大多数情况下，我已经做到了，我的输出很好。但是，我无法在 main() 中本地定义数组，并将其作为参数传递给其他方法。我尝试将其定义为无法完成的类的静态成员。

谁能帮我吗？我需要在 main() 中定义数组并将其作为参数传递给方法。但是，尽管进行了不懈的研究，我还是无法弄清楚。

这是我到目前为止所拥有的。

```
public class ArraySort {
private static Object sc;
       int[] array;

// creates question and int for user input
/**
 *
 */
public void fillArray() {
    Scanner keyboardScanner = new Scanner(System.in);
    System.out.println("Enter the size of the array (3 to 10): ");
    int n = keyboardScanner.nextInt();
    array = new int[n];

    // creates new question by including int 
    System.out.println("Enter " + n + " values" );

    // creates for loop for repeating question based on array size 
    for (int i=0; i<n; i++) {
        System.out.println("Enter value for element " + i + ": ");
    array[i] = keyboardScanner.nextInt();
    }
}

// prints i in the for loop
public void printArray(String msg) {
    System.out.println(msg);
    for (int i=0; i<array.length; i++) {
        System.out.println(array[i]);
    }
}

//  defines method
public void sortArray() {
    // sets up to output in ascending order
    for (int i=0; i<array.length; i++) {
        for (int j=i+1; j<array.length; j++) {
            if (array[i] > array[j]) {
                int temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
    }
}

// main output and visual layout
public static void main(String[] args) {
    ArraySort arraySort = new ArraySort();
    arraySort.fillArray();

    System.out.println();
    arraySort.printArray("The unsorted values... ");
    arraySort.sortArray();
    System.out.println();
    arraySort.printArray("The sorted values... ");

    // Keep console window alive until 'enter' pressed (if needed).
    System.out.println();
    System.out.println("Done - press enter key to end program");

 }
} 
```

我没有错误，我只需要有关如何在 main() 中本地定义数组的帮助

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:40:09.893

从类中删除`int[] array;`声明。将其添加到 main 方法中：

```
int[] array = new int[n]; 
```

`int[] array`并为每个需要访问它的方法添加一个参数。例如：

```
public void printArray(String msg, int[] array) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:40:12.953

您说过您*需要在 main() 中定义数组并将其作为参数传递给方法*。如果是这样，那么您将需要更改这些方法，例如：

```
public void printArray(String msg, int[] argsArray)

public void sortArray(int[] array) 
```

`fillArray`是不同的，因为您在方法中根据用户输入的大小创建数组，所以您不能简单地将数组作为参数传递。您可以返回新数组：

```
public int[] fillArray()
{
    int[] array;
    // ...

    return array;
} 
```

但是，如果您只是想测试您的课程，请注意您可以`ArraySort.array`从 访问该字段`main`：您可以将该字段设置为您在 中创建的数组`main`。

所以主要是：

```
ArraySort arraySort = new ArraySort();
arraySort.array = new int[]{ 5, 4, 3, 6, 7};

// and remove the fillArray call 
// ... 
```

请注意，如果您想这样设置`array`，那么您还应该删除`fillArray`调用，该调用尝试根据用户输入的值设置数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:40:28.083

您可以`array` `locally`在您的`main`方法中声明您的。并将其作为 a 传递`parameter`给`method`您正在调用的对象。

因为当您将数组作为参数传递给另一个方法时，它的引用将被复制到参数中。因此，您对方法中传递的数组所做的任何更改都会反映在`main()`原始数组中的方法中。尝试使用这个。我不认为你会遇到任何问题。

**更新**：-好的，这是修改后的代码：-

```
import java.util.Scanner;

public class ArraySort {
private static Object sc;    
private static Scanner keyboardScanner = new Scanner(System.in);

// creates question and int for user input
/**
 *
 */
public void fillArray(int[] array) {

    // creates for loop for repeating question based on array size 
    for (int i=0; i<array.length; i++) {
        System.out.println("Enter value for element " + i + ": ");
        array[i] = keyboardScanner.nextInt();
    }
}

// prints i in the for loop
public void printArray(String msg, int[] argsArray) {
    System.out.println(msg);
    for (int i=0; i<argsArray.length; i++) {
        System.out.println(argsArray[i]);
    }
}

//  defines method
public void sortArray(int[] array) {
    // sets up to output in ascending order
    for (int i=0; i<array.length; i++) {
        for (int j=i+1; j<array.length; j++) {
            if (array[i] > array[j]) {
                int temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
    }

}

// main output and visual layout
public static void main(String[] args) {

    System.out.println("Enter the size of the array (3 to 10): ");
    int n = keyboardScanner.nextInt();

    int[] array = new int[n];

    ArraySort arraySort = new ArraySort();
    arraySort.fillArray(array);

    System.out.println();
    //I still get an error saying " cannot find symbol"
    arraySort.printArray("The unsorted values... ", array);
    //same here
    arraySort.sortArray(array);

    System.out.println();
    //and here
    arraySort.printArray("The sorted values... ", array);

    // Keep console window alive until 'enter' pressed (if needed).
    System.out.println();
    System.out.println("Done - press enter key to end program");

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:43:15.710

更新`public void printArray(String msg) {`并`public void sortArray() {`接受`int []`为

```
 / prints i in the for loop
 public void printArray(String msg, int[] argsArray) {
    System.out.println(msg);
    for (int i=0; i<argsArray.length; i++) {
        System.out.println(argsArray[i]);
    }
 }

 //  defines method
 public void sortArray(int[] argsArray) {
   // sets up to output in ascending order
   for (int i=0; i<argsArray.length; i++) {
    for (int j=i+1; j<argsArray.length; j++) {
        if (argsArray[i] > argsArray[j]) {
            int temp = argsArray[i];
            argsArray[i] = argsArray[j];
            argsArray[j] = temp;
        }
      }
   }
 } 
```

你可能想留`array = new int[n];`在`fillArray`当地：

```
 int[] array = new int[n]; 
```

并将其从类变量声明中删除。

# java - 获取 cdi 托管 bean 的真实类名

> ID：12942011
> 
> 赞同：4
> 
> 时间：2012-10-17T19:36:04.517
> 
> 标签：java, cdi

有没有办法获取 CDI 托管实例的真实类名？我需要真实的类名来匹配它，但是在调用 getClass 方法时我得到了客户端焊接代理名称。非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-20T12:29:56.433

尽管距离最初的问题已经过去了五年，但这可能会帮助可能遇到同样问题的人。您可以使用反射获取真实的类名。

```
bean.getClass().getSuperclass().getName() 
```

与焊接一起使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:08:00.443

据我所知，没有可靠的方法来掌握代理背后的真实课程。事实上，毕竟可能没有真正的班级。我最终做的是检查类名字符串以查看它是否与 Weld 附加到类名的疯狂字符串匹配。如果不是，那么你正在处理真正的类。但如果是，则获取代理的超类。那就是您要寻找的课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:27:24.530

您必须查看 Weld 实现，看看如果您 getInvocationHandler 然后调用该方法，InvocationHandler 是否会真正将其提供给您。

# asp.net-mvc - MVC 4 DomainRoute to Area 使用来自 RouteTable 的错误实例

> ID：12942021
> 
> 赞同：1
> 
> 时间：2012-10-17T19:36:26.343
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我有一个 ASP.NET MVC 4 应用程序，其中有两个区域：

*   后台
*   注册

我有一个名为的类`DomainRoute`，可以将整个子域路由到一个区域：

```
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using System.Web.Mvc;
using System.Web.Routing;

namespace Admin.Web.PresentationLogic
{
    /// <summary>
    /// DomainRoute is an extension of the default Route, that makes it possible to route domains and subdomains the specific controllers.
    /// </summary>
    public class DomainRoute : Route
    {
        private string _subDomain;

        private string[] _namespaces;

        /// <summary>
        /// Initializes a new instance of the <see cref="DomainRoute"/> class.
        /// </summary>
        /// <param name="subDomain">The sub domain.</param>
        /// <param name="url">The URL format.</param>
        /// <param name="defaults">The defaults.</param>
        public DomainRoute(string subDomain, string url, RouteValueDictionary defaults)
            : base(url, defaults, new MvcRouteHandler())
        {
            this._subDomain = subDomain;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="DomainRoute" /> class.
        /// </summary>
        /// <param name="subDomain">The sub domain.</param>
        /// <param name="url">The URL format.</param>
        /// <param name="defaults">The defaults.</param>
        /// <param name="namespaces">The namespaces.</param>
        public DomainRoute(string subDomain, string url, RouteValueDictionary defaults, string[] namespaces)
            : base(url, defaults, new MvcRouteHandler())
        {
            this._subDomain = subDomain;
            this._namespaces = namespaces;
        }

        /// <summary>
        /// Returns information about the requested route.
        /// </summary>
        /// <param name="httpContext">An object that encapsulates information about the HTTP request.</param>
        /// <returns>
        /// An object that contains the values from the route definition.
        /// </returns>
        public override RouteData GetRouteData(System.Web.HttpContextBase httpContext)
        {
            // Request information
            string requestDomain = httpContext.Request.Headers["HOST"];

            if (!string.IsNullOrEmpty(requestDomain))
            {
                if (requestDomain.IndexOf(":") > 0)
                {
                    requestDomain = requestDomain.Substring(0, requestDomain.IndexOf(":"));
                }
            }
            else
            {
                requestDomain = httpContext.Request.Url.Host;
            }

            var index = requestDomain.IndexOf(".");

            if (index < 0)
            {
                return RouteTable.Routes["Default"].GetRouteData(httpContext);
            }

            var subDomain = requestDomain.Substring(0, index);

            if (!String.IsNullOrWhiteSpace(subDomain))
            {
                if (this._subDomain.Equals(subDomain, StringComparison.InvariantCultureIgnoreCase))
                {
                    RouteData data = new RouteData(this, this.RouteHandler);

                    // Add defaults first 
                    if (Defaults != null)
                    {
                        foreach (KeyValuePair<string, object> item in Defaults)
                        {
                            data.Values[item.Key] = item.Value;
                        }
                    }

                    var pathRegex = this.CreateRegex(Url);
                    var requestPath = httpContext.Request.AppRelativeCurrentExecutionFilePath.Substring(2) + httpContext.Request.PathInfo;

                    // Match domain and route
                    Match pathMatch = pathRegex.Match(requestPath);

                    // Iterate matching path groups 
                    for (int i = 1; i < pathMatch.Groups.Count; i++)
                    {
                        Group group = pathMatch.Groups[i];
                        if (group.Success)
                        {
                            string key = pathRegex.GroupNameFromNumber(i);
                            if (!string.IsNullOrEmpty(key) && !char.IsNumber(key, 0))
                            {
                                if (!string.IsNullOrEmpty(group.Value))
                                {
                                    data.Values[key] = group.Value;
                                }
                            }
                        }
                    }

                    if (!data.Values.ContainsKey("action"))
                    {
                        data.Values.Add("action", "Index");
                    }

                    data.DataTokens["Namespaces"] = this._namespaces;
                    data.DataTokens["area"] = data.Values["area"] ?? this._subDomain;

                    return data;
                }
            }

            return RouteTable.Routes["Default"].GetRouteData(httpContext);
        }

        /// <summary>
        /// Creates the regex.
        /// </summary>
        /// <param name="source">The source.</param>
        /// <returns>Returns the Regex for the source.</returns>
        private Regex CreateRegex(string source)
        {
            // Perform replacements
            source = source.Replace("/", @"\/?");
            source = source.Replace(".", @"\.?");
            source = source.Replace("-", @"\-?");
            source = source.Replace("{", @"(?<");
            source = source.Replace("}", @">([a-zA-Z0-9_]*))");

            return new Regex("^" + source + "$");
        }
    }
} 
```

当我注册区域时，我这样做：

```
context.Routes.Add("Signup_default", 
    new DomainRoute("signup", "{controller}/{action}/{id}", 
    new RouteValueDictionary(new { area = "Signup", controller = "Home", action = "Index", id = UrlParameter.Optional }), 
    new string[] { "Admin.Web.Areas.Signup.Controllers" })); 
```

因此，问题与`DomainRoute`'`GetRouteData`方法的执行方式有关。

每当我尝试访问该类`signup.localhost`的实例时，就是我在注册 Backstage 区域时使用的实例。`DomainRoute`

我尝试禁用后台区域，然后注册区域工作。

它使用的实例`DomainRoute`首先出现在`RouteTable`.

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:55:20.517

我错过了`RouteCollection`.

在逐步调试到 .Net 源代码后，我意识到在我的 .Net 中`DomainRoute`，如果子域不匹配，我应该返回而不是返回默认路由数据`null`。

这就是 ASP.NET Routing 确定使用哪个路由的方式——通过调用`GetRouteData`并`HttpContext`让特定路由确定“我是否匹配`HttpContext`？”

# c++ - 输入/输出到 QLabel？

> ID：12942025
> 
> 赞同：0
> 
> 时间：2012-10-17T19:01:46.933
> 
> 标签：c++, qt

我希望将键盘输入发送到 QLabel。但我不想只是将文本作为 label->setText("") 放入其中，而是希望看到键盘上的每个字母都立即出现在标签中。有任何想法吗？我只需要有人指出我正确的方向。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:43:58.277

这是直接不可能的。但是您可以创建一个继承`QLabel`并重新实现的类`keyPressEvent`来手动处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:46:05.163

您可以使用 QLineEdit 并将其设为只读并使用样式表来隐藏边框等...

在这里查看样式表信息

[Qt 样式表](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html)

# c++ - C++ 中的 STL 列表指针

> ID：12942026
> 
> 赞同：0
> 
> 时间：2012-10-17T19:36:37.053
> 
> 标签：c++, list, pointers, std, bad-alloc

如何通过取消引用 List 指针来访问 C++ 中的列表？

执行以下操作时出现 bad_alloc 错误：

```
 List My_List = *ls; 
```

`ls`是一个`List*`。在代码之前，我有：

```
List* ls = & Temp_List; 
```

我将 的值`ls`用作整数。我通过不同的功能传递它。现在我想将它转换回`List*`并取消引用它，我得到了错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:19:07.953

如果你在堆栈上分配列表，它的地址可能会改变。但是如果你在堆上分配它，你不会丢失指向列表的指针（new 或 malloc）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:29:22.967

试试这个，看看，

```
List *My_List = ls; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:26:44.517

实际上，您确实在这段代码中取消了对列表指针的引用：`*ls;`

然后您在此代码中的堆栈上**创建了**`List My_List`新的列表对象：并 在这段代码中将您的列表**复制**到此列表中： `<newly created list> = <your list reference>`

（呵呵。在应用取消引用运算符后，您将获得引用。这对您来说是 c++）

在这个复制过程中你可能会得到 std::bad_alloc 因为复制列表涉及内存分配，并且可能你的原始列表被破坏，因此指向原始列表的指针指向一些随机垃圾，并且基于这个垃圾程序确定它应该有多少内存分配用于列表复制。因此，请确保您的原始列表仍然有效。

或者像这样修复你的代码：`List& My_List = *ls`然后在某个地方发生崩溃。

# objective-c - 我想在 Obj C 中读取类型为“t = 10”的字符串，并获取字符的值和整数的值。最好的方法是什么？

> ID：12942029
> 
> 赞同：0
> 
> 时间：2012-10-17T19:36:46.090
> 
> 标签：objective-c, string

我想在 Obj C 中读取类型为“t = 10”的字符串，并获取字符的值和整数的值。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:45:18.340

您可以为此使用 NSScanner：

```
NSScanner *scn = [NSScanner scannerWithString:@"t = 10"];
NSString *theChar;
[scn scanUpToString:@" = " intoString:&theChar];
[scn scanString:@" = " intoString:NULL];
int n;
[scn scanInt:&n]; 
```

这里`theChar`将包含一个`NSString`包含 char 的对象，`n`并将包含整数的数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:31:17.543

您可以将字符串转换为 NSArray

```
// separate the string to array by the = sign
NSArray *myArray = [myString componentsSeparatedByString:@"="]

// get the character
NSString *character = [myArray ObjectAtIndex:0];
// remove the whitespaces from the character
character = [character stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];

// get the value
NSString *value= [myArray ObjectAtIndex:1];
// remove the whitespaces from the value
value= [value stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:40:40.920

看看[strtok](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtok_r.html)，它是 C 标准库的一部分。这有点复杂，但应该为您完成大部分工作。

,`"t"`和是文档所称的“令牌”，而空格是“分隔符” `"="`。`"10"`

如果您不关心`"="`，您也可以`strtok`将其视为分隔符。

# egit - 尝试安装 JGit 来安装 EGit 并出现错误需要包 org.kohsuke.args4

> ID：12942038
> 
> 赞同：1
> 
> 时间：2012-10-17T19:37:14.380
> 
> 标签：egit, jgit

尝试安装 JGit 来安装 EGit 并出现错误：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Eclipse JGit Command Line Interface 2.1.0.201209190230-r (org.eclipse.jgit.pgm.feature.group 2.1.0.201209190230-r)
  Missing requirement: JGit Command Line Interface 2.1.0.201209190230-r (org.eclipse.jgit.pgm 2.1.0.201209190230-r) requires 'package org.kohsuke.args4j [2.0.12,2.1.0)' but it could not be found
  Cannot satisfy dependency:
    From: Eclipse JGit Command Line Interface 2.1.0.201209190230-r (org.eclipse.jgit.pgm.feature.group 2.1.0.201209190230-r)
    To: org.eclipse.jgit.pgm [2.1.0.201209190230-r] 
```

～～～**更新**～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~
我给了它新的更新站点，它说已经安装了EGit

所以然后我去卸载它，只有 ~6 个 Egit 条目中的一个在选择时启用了卸载按钮。*（为什么不让我卸载它们？ - ed）*我卸载了那个，希望它可以管理卸载所有条目。*（为什么“安装新软件”选项旁边没有“卸载软件”选项？-ed）*

然后我尝试再次安装 EGit，并说不需要安装一些插件，因为它们已经安装*（为什么不让我重写它？-ed）*。所以它让我继续基于已经安装的其他插件。

我按照建议重新启动。

我现在收到此警报并且无法打开 Flash Builder (Eclipse)。

```
Cannot complete the request.  See the error log for details.
"Eclipse EGit" will be ignored because it is already installed. 
```

日志包含以下信息：

```
!SESSION 2012-10-17 16:38:16.346 -----------------------------------------------
eclipse.buildId=I20100608-0911
java.version=1.6.0_35
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86, WS=cocoa, NL=en_US
Framework arguments:  -keyring /Users/me/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86 -keyring /Users/me/.eclipse_keyring -consoleLog -showlocation

!ENTRY org.eclipse.osgi 4 0 2012-10-17 16:38:16.892
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

*我认识的另一位开发人员说他尝试了几天来安装 EGit，但没有成功。这是正常的吗？*

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:53:59.640

您是否使用了 http://download.eclipse.org/egit/updates 存储库？这似乎不完整，请参阅此错误报告：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392087) ://bugs.eclipse.org/bugs/show_bug.cgi?id=392087 。

如果您想安装 EGit，只需使用此存储库：http: [//download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/) 它包含最新版本的 EGit (2.1) 以及所有必要的依赖项（包括 JGit）。

# android - 插入或替换 2 个唯一值

> ID：12942040
> 
> 赞同：0
> 
> 时间：2012-10-17T19:37:21.747
> 
> 标签：android, sqlite

我在 android 应用程序中使用 sqlite，我想通过 2 个唯一的行值在表中插入。例如：

```
id| column1 | column2 | column3|
1\.   1              2     3  
2\.   2              3     4 
```

唯一列 - COLUMN1 和 COLUMN2

```
 INSERT OR REPLACE INTO HISTORY (id, column1, column2, column3) VALUES (null, 2, 3, 6); 
```

但是这个查询不应该工作，因为第一个和第二个值在表中不是唯一的

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:01:49.197

如果我理解您的问题，只需在构建表时使用[`UNIQUE`约束：](http://www.w3schools.com/sql/sql_unique.asp)

```
CREATE TABLE History (
    _id INTEGER PRIMARY KEY,
    column1 INTEGER,
    column2 INTEGER,
    column3 INTEGER,
    UNIQUE (column1, column2)); 
```

然后，如果您尝试以下`INSERT`语句：

```
INSERT INTO History (column1, column2, column3) VALUES (2, 3, 0);
INSERT INTO History (column1, column2, column3) VALUES (2, 3, 6); 
```

第二个将失败，因为`column1`并且`column2`已经存在。

了解如果您`INSERT OR REPLACE`在我的示例中使用，第二个语句将替换第一个语句（不抛出异常）。

* * *

> 但是我怎样才能为现有的表添加独特的？

通常，您会使用`ALTER TABLE`向现有表添加约束，但 SQLite 不允许这样做...但是您可以解决此限制：

```
CREATE UNIQUE INDEX name ON History(column1, column2); 
```

# bash - 管道 | 重定向<>优先级

> ID：12942042
> 
> 赞同：26
> 
> 时间：2012-10-17T19:37:26.000
> 
> 标签：bash, unix, redirect, command, pipe

我想弄清楚什么时候做管道 | 或重定向 < > 在命令中优先？

这是我的想法，但需要确认它是如何工作的。

示例 1：

```
sort < names | head
The pipe runs first:  names|head   then it sorts what is returned from names|head 
```

示例 2：

```
ls | sort > out.txt
This one seems straight forward by testing, ls|sort then redirects to out.txt 
```

示例 3：

```
Fill in the blank?  Can you have both a < and a > with a | ??? 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-17T19:45:40.193

在句法分组方面，`>`具有`<`较高的优先级；也就是说，这两个命令是等价的：

```
sort < names | head
( sort < names ) | head 
```

就像这两个：

```
ls | sort > out.txt
ls | ( sort > out.txt ) 
```

但就顺序而言，`|`是先执行的；所以，这个命令：

```
cat in.txt > out1.txt | cat > out2.txt 
```

将填充`out1.txt`，而不是`out2.txt`，因为`> out1.txt`是在*之后*执行的`|`，因此会*取代*它（因此没有输出通过管道输出到`cat > out2.txt`）。

同样，这个命令：

```
cat < in1.txt | cat < in2.txt 
```

将打印`in2.txt`, 不是`in1.txt`, 因为在`< in2.txt`之后执行*,*因此`|`取代*它*(所以没有输入从 管道输入`cat < in1.txt`).

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-17T20:07:48.237

来自`man bash`（与其他引文一样）：

```
SHELL GRAMMAR
   Simple Commands
       A simple command is a sequence of optional variable assignments followed by
       blank-separated words and redirections, and terminated  by  a  control
       operator. The first word specifies the command to be executed, and is
       passed as argument zero.  The remaining words are passed as arguments
       to the invoked command.

       The return value of a simple command is its exit status, or 128+n if
       the command is terminated by signal n.

   Pipelines
       A pipeline is a sequence of one or more commands separated by one of
       the control operators | or |&.  The format for a pipeline is:

              [time [-p]] [ ! ] command [ [|⎪|&] command2 ... ] 
```

换句话说，一个（简单）命令可以有任意数量的重定向；您也可以将其用作管道的一部分。或者，换一种说法，重定向比管道绑定得更紧密。

有几种方法可以解决这个问题（尽管它们很少是必要的或美观的）：

`1.`您可以制作一个“复合命令”并重定向到它：

```
 Compound Commands
   A compound command is one of the following:

   (list)  list is executed in a subshell environment (see
           COMMAND EXECUTION ENVIRONMENT below).  Variable
           assignments  and  builtin  commands  that  affect  the
           shell's environment do not remain in effect after the
           command completes.  The return status is the exit status of list.

   { list; }
          list  is  simply  executed  in the current shell environment.  list
          must be terminated with a newline or semicolon.  This is known as a
          group command. The return status is the exit status of list.  Note
          that unlike the metacharacters ( and ), { and } are reserved words
          and must occur where a reserved word is permitted to be recognized.
          Since they do not cause a word break, they must be separated from
          list by whitespace or another shell metacharacter. 
```

所以：

```
$ echo foo > input
$ { cat | sed 's/^/I saw a line: /'; } < input
I saw a line: foo 
```

`2.`您可以使用“进程替换”重定向到管道：

```
Process Substitution
   Process  substitution  is  supported on systems that support named pipes
   (FIFOs) or the /dev/fd method of naming open files.  It takes the form of
   <(list) or >(list).  The process list is run with its input or output
   connected to a FIFO or some file in /dev/fd.  The name of this file is
   passed as  an  argument  to  the  current  command  as the result of the
   expansion.  If the >(list) form is used, writing to the file will provide
   input for list.  If the <(list) form is used, the file passed as an argument
   should be read to obtain the output of list. 
```

所以：

```
 rici@...$ cat > >(sed 's/^/I saw a line: /') < <(echo foo; echo bar)
 I saw a line: foo
 rici@...$ I saw a line: bar 
```

（为什么提示在输出终止之前出现，以及如何处理它留作练习）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-18T03:34:13.410

这几乎是我在阅读后所理解的（包括[ruakh](https://stackoverflow.com/users/978917/ruakh)的回答）

首先，如果多次重定向，所有的重定向都会执行，但是只有最后一次的重定向才会生效（假设前面的重定向都没有出错）

*   eg`cat < in1.txt < in2.txt`等价于`cat < in2.txt`, 除非`in1.txt`在这种情况下不存在此命令将失败（因为`< in1.txt`首先执行）

*   类似地， with `cat in.txt > out1.txt > out2.txt`, only`out2.txt`将包含 的内容`out2.txt`，但因为`> out1.txt`首先执行，`out1.txt`如果它不存在则将被创建。

管道所做的是将`stdout`上一个命令的连接到`stdin`下一个命令的连接，并且该连接位于任何其他重定向之前（来自[Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Pipelines)）。

所以你可以想到

```
cat in1.txt > out1.txt | cat > out2.txt 
```

作为

```
cat in1.txt > pipe > out1.txt; cat < pipe > out2.txt 
```

并且应用前面提到的多重重定向规则，我们可以将其简化为

```
cat in1.txt > out1.txt; cat < pipe > out2.txt 
```

**结果**： 的内容`in1.txt`被复制到`out1.txt`，因为没有写入任何内容`pipe`

* * *

使用 [ruak][3] 的另一个例子，

```
cat < in1.txt | cat < in2.txt 
```

大致相当于

```
cat > pipe < in1.txt; cat < pipe < in2.txt 
```

这实际上是

```
cat > pipe < in1.txt; cat < in2.txt 
```

**结果**：这一次向 写入了一些东西`pipe`，但是由于第二次`cat`读取的`in2.txt`不是`pipe`，所以只有 的内容`in2.txt`被打印出来。如果 位于`pipe`同一侧（`>`或`<`）重定向的中间，它将被引入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-20T20:56:47.333

将数据放在您喜欢的任何地方有点不正统，但完全合法，`<`所以我更喜欢这个，因为它更好地说明了从左到右的数据流：

```
<input.txt sort | head >output.txt 
```

唯一不能做到这一点的是内置控制结构命令（`for`, `if`, `while`）。

```
# Unfortunately, NOT LEGAL
<input.txt  while read line; do ...; done 
```

请注意，所有这些都是等效的命令，但为避免混淆，您应该只使用第一个或最后一个：

```
<input.txt grep -l foobar
grep <input.txt -l foobar
grep -l <input.txt foobar
grep -l foobar <input.txt 
```

因为文件名必须总是紧跟在重定向操作符之后，所以我更喜欢省略`<`文件名和文件名之间的可选空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T19:42:06.293

更正：

示例 1：

```
sort < names | head 
```

在这种情况下，输入重定向首先运行（名称已排序），然后将其结果通过管道传送到 head。

一般来说，您可以从左到右阅读。标准成语的工作方式如下：

*   使用输入重定向“<”告诉程序从文件而不是标准输入中读取
*   使用输出重定向“>”告诉程序输出到文件而不是标准输出
*   使用管道“program_a | program_b”将通常由 program_a 输出的所有内容带到 stdout，并将其全部直接提供给 program_b，就好像它是从 stdin 读取的一样。

# c# - NH 3.3.1 + Castle.Windsor 3.0 + WCF 有没有办法让它们一起工作？

> ID：12942044
> 
> 赞同：1
> 
> 时间：2012-10-17T19:37:35.087
> 
> 标签：c#, wcf, nhibernate, castle-windsor, integration

## 在我当前的项目中，我使用 NH 3.0 + CW 2.5.2 + NHIntegrationFacility 1.1 + WCF，现在我需要迁移到最新的 NH 3.3.1。但我看到自 2.0RC（支持 NH3.1）版本以来不支持 NHIntegrationFacility。

更新：谢谢大家的回复。是否有一些替代的 DI 框架可以与 NH、WCF 一起使用，具有简单的 AOP 和 DI 能力并且具有积极的开发能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:21:33.560

德克，这是不可能的！但是当您发表评论时，我尝试删除对这个程序集的依赖并通过经典方法（NHibernate.Cdg.Configuration）配置 NHibernate，并使用 wcf 工具简单地注册 ISession：Component.For().LifeStyle.PerWcfOperation().UsingFactoryMethod （会话‌​Factory.OpenSession）。没有完美的项目工作完美。谢谢你，伙计！:)

# asp.net - VB.NET 应用程序块

> ID：12942045
> 
> 赞同：2
> 
> 时间：2012-10-17T19:37:42.180
> 
> 标签：asp.net, vb.net

对 ASP.NET/VB.NET 应用程序使用 ApplicationBlocks（[Microsoft 应用程序块的介绍和概述）有什么限制？](http://www.4guysfromrolla.com/articles/062503-1.aspx)我发现很多网站都在谈论好处，例如将数据层与 Web 层分离，但我找不到讨论这些限制的网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:10:35.580

我不认为你真的能得到一个简单的缺点列表。Microsoft Enterprise Library 是一个很好的库，文档齐全，内容丰富且具有大量功能。

您应该将您的问题更改为“*我什么时候**不需要**使用它？* ”。当然，每个块都应该重复这个问题。我会试着总结一下。

对于每个块，当您不需要它的复杂性时，您应该考虑不要使用该库。功能并非没有成本，最明显的是**复杂性**（首先是部署和配置）。如果您必须记录并且您的用户必须更改应用程序的配置，您可能需要提供一些工具或大量文档。复杂性也可以隐藏在代码中，即使 EL 设计人员试图让一切变得简单，它也不能像原始解决方案那样简单。

第二个重要的缺点显然是**速度**。抽象层不可能是免费的，你会为此付出速度成本。在某些情况下，您可能不关心（例如简单的日志记录），但在其他情况下可能会出现问题（所以答案再次是“它取决于”）。例如，想一想 Unity Application Block：您将获得注入的所有力量，但您将为此付出巨大的代价。

那么什么时候应该使用呢？在我看来，这个库的一个重要目标是你不需要一起使用它。您可以在需要时选择所需的块。例如，使用日志记录和异常处理非常常见，但您可能一生都不需要 Unity。数据访问应用程序块是 ADO 之上的一个非常薄的层，它简化了许多常见任务，但您没有获得您所拥有的抽象级别，例如使用 LINQ to SQL 或实体（嘿，不要忘记它们有非常不同的用途) 并且您应该考虑仅在其他所有内容都无法满足您的需要时才使用它。

因此，最后，在我看来，您应该考虑每个块并**仅在**您**确实需要**企业级库附带的所有复杂性时才使用它。它不是为小型单用户应用程序设计的（即使有时您可能会发现某些应用程序块可能非常适合特定任务）。它的缺点不小：复杂性和速度不容忽视（无论是短期解决方案还是长期维护计划）。此外，如果您真的需要它的所有功能，您会发现它不像“即用型”解决方案那么容易，要拥有控制权，您需要编写更多代码。

# python - django 无休止的分页（推特风格）不起作用 - .endless_more 类不在 html 中但在 js 中使用

> ID：12942047
> 
> 赞同：0
> 
> 时间：2012-10-17T19:37:48.137
> 
> 标签：python, django, django-pagination

我正在使用`django endless pagination`。它工作正常，只显示底部的数字。

但是，我尝试将 twitter 风格融入其中：

[http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#pagination-on-scroll](http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#pagination-on-scroll)

我完全按照但没有工作。

当我查看 js 代码时，我看到它们 `.endless_more`在`js`类中使用过，但生成的 html 文件只有两个链接类：

```
1)endless_page_current
2)endless_page_link 
```

但他们用`a.endless_more`在`js`.

你能告诉我正确的实施方法吗？

谢谢

意见：

```
from endless_pagination.decorators import page_template
@page_template("my_index_page.html")
def myview(request,template='my_index.html', extra_context=None):
  data = {}
 if extra_context is not None:
     data.update(extra_context)

 myobj = Myobj.objects.all()
 data['myobj'] = myobj
 return render_to_response(template, data, context_instance=RequestContext(request)) 
```

模板 ：

my_index.html

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="{{ STATIC_URL }}js/endless.js"></script>
<script src="{{ STATIC_URL }}js/endless_on_scroll.js"></script>
 {% include page_template %} 
```

my_index_page.html

```
 {% load templatetags %}
<center>
<div>
{% load endless %}
{% paginate myobj %}
{% for obj in myobj %}

 {{  obj.name }}

 {% endfor %}

 {% show_pages %}

  </div> 
 <center> 
```

在这里，我认真地相信我需要添加一些类，比如 django-endless-documentation 错过的 endless_more 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:17:57.227

我在我的门户上使用它，你的代码看起来很好，你只是错过了一件事

```
{% show_more %} 
```

这就是真正启用 twitter 风格的无限分页的原因

在这里编辑：

你可能也想添加这个：

```
<script type="text/javascript" charset="utf-8">
    var endless_on_scroll_margin = 20;
</script> 
```

其中“20”是触发滚动的像素数（从页面底部开始）

您可能想尝试不止一种价值，直到获得适合您项目的完美价值

看[这里](http://django-endless-pagination.readthedocs.org/en/latest/templatetags_reference.html#show-more)和[这里](http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#pagination-on-scroll)

# java - 安卓登录mysql

> ID：12942048
> 
> 赞同：0
> 
> 时间：2012-10-17T19:37:54.433
> 
> 标签：java, php, android, mysql, parsing

我在一个应用程序中工作，我看到了该指南：[http](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/) ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/我让它工作我的应用程序...现在登录部分是这样的：

```
public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;
TextView testo;
// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmail);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);
    testo = (TextView) findViewById(R.id.testo);

    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            Log.d("Button", "Login");
            JSONObject json = userFunction.loginUser(email, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();

                    }else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

    // Link to Register Screen
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
                    RegisterActivity.class);
            startActivity(i);
            finish();
        }
    });
}
} 
```

json解析器是：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);            
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

和数据库处理程序：

```
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "android_api";

// Login table name
private static final String TABLE_LOGIN = "login";

// Login Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_EMAIL = "email";
private static final String KEY_UID = "uid";
private static final String KEY_CREATED_AT = "created_at";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
            + KEY_ID + " INTEGER PRIMARY KEY,"
            + KEY_NAME + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE,"
            + KEY_UID + " TEXT,"
            + KEY_CREATED_AT + " TEXT" + ")";
    db.execSQL(CREATE_LOGIN_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

    // Create tables again
    onCreate(db);
}

/**
 * Storing user details in database
 * */
public void addUser(String name, String email, String uid, String created_at) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_UID, uid); // Email
    values.put(KEY_CREATED_AT, created_at); // Created At

    // Inserting Row
    db.insert(TABLE_LOGIN, null, values);
    db.close(); // Closing database connection
}

/**
 * Getting user data from database
 * */
public HashMap<String, String> getUserDetails(){
    HashMap<String,String> user = new HashMap<String,String>();
    String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    // Move to first row
    cursor.moveToFirst();
    if(cursor.getCount() > 0){
        user.put("name", cursor.getString(1));
        user.put("email", cursor.getString(2));
        user.put("uid", cursor.getString(3));
        user.put("created_at", cursor.getString(4));
    }
    cursor.close();
    db.close();
    // return user
    return user;
}

/**
 * Getting user login status
 * return true if rows are there in table
 * */
public int getRowCount() {
    String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    db.close();
    cursor.close();

    // return row count
    return rowCount;
}

/**
 * Re crate database
 * Delete all tables and create them again
 * */
public void resetTables(){
    SQLiteDatabase db = this.getWritableDatabase();
    // Delete All Rows
    db.delete(TABLE_LOGIN, null, null);
    db.close();
}

} 
```

现在我想在文本视图中输入登录用户的用户名，但我不知道该怎么做......我必须使用解析器？我必须阅读 sqlite 数据库？有人能帮我吗？谢谢，我是这方面的新手...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:39:27.480

您可以通过将用户名传递给`DashboardActivity`. `startActivity(dashboard);`您必须在`LoginActivity`班级中的行之前添加以下行。

```
dashboard.putExtra("username", json_user.getString(KEY_NAME)); 
```

此行将用户名传递给您的`DashboardActivity`.

然后，在`onCreate`您的方法中，`DashboardActivity`我们将获取用户名并将其放在名为`username`（字符串）的变量中，代码如下：

```
Intent intent = getIntent();
String username = "";

if(intent != null) {
    username = intent.getStringExtra(name);
} 
```

# php - PHP中是否有更优雅的方式来解析这个xpath对象？

> ID：12942050
> 
> 赞同：2
> 
> 时间：2012-10-17T19:38:02.440
> 
> 标签：php, xpath

我正在解析从 Google Map API V3 返回的 XML。这是返回的典型 XML：

```
<?xml version="1.0" encoding="UTF-8" ?>
<kml xmlns="http://earth.google.com/kml/2.0"><Response>
  <name>40.74445606,-73.97495072</name>
  <Status>
    <code>200</code>
    <request>geocode</request>
  </Status>
  <Placemark id="p1">
    <address>317 E 34th St, New York, NY 10016, USA</address>
    <AddressDetails Accuracy="8" xmlns="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0"><Country><CountryNameCode>US</CountryNameCode><CountryName>USA</CountryName><AdministrativeArea><AdministrativeAreaName>NY</AdministrativeAreaName><Locality><LocalityName>New York</LocalityName><Thoroughfare><ThoroughfareName>317 E 34th St</ThoroughfareName></Thoroughfare><PostalCode><PostalCodeNumber>10016</PostalCodeNumber></PostalCode></Locality></AdministrativeArea></Country></AddressDetails>
    <ExtendedData>
      <LatLonBox north="40.7458050" south="40.7431070" east="-73.9736017" west="-73.9762997" />
    </ExtendedData>
    <Point><coordinates>-73.9749507,40.7444560,0</coordinates></Point>
  </Placemark>
</Response></kml> 
```

这是我用来解析它的 PHP 代码片段：

```
$xml = new SimpleXMLElement($url, null, true);
$xml->registerXPathNamespace('http', 'http://earth.google.com/kml/2.0');
$LatLonBox_result = $xml->xpath('//http:LatLonBox');

echo "North: " . $LatLonBox_result[0]["north"] . "\n";
echo "South: " . $LatLonBox_result[0]["south"] . "\n";
echo "East: " . $LatLonBox_result[0]["east"] . "\n";
echo "West: " . $LatLonBox_result[0]["west"] . "\n";

var_dump($LatLonBox_result); 
```

这是编辑后的输出：

```
North: 40.7458050
South: 40.7431070
East: -73.9736017
West: -73.9762997
array(1) {
  [0]=>
  object(SimpleXMLElement)#10 (1) {
    ["@attributes"]=>
    array(4) {
      ["north"]=>
      string(10) "40.7458050"
      ["south"]=>
      string(10) "40.7431070"
      ["east"]=>
      string(11) "-73.9736017"
      ["west"]=>
      string(11) "-73.9762997"
    }
  }
} 
```

在我看来，使用 $LatLonBox_result[0]["north"] 看起来很难看。这就是使用 xpath 时的情况吗？我期待返回值可能类似于 $LatLonBox_result["north"] 并且没有数组的第一个维度。或者这种方法是错误的？如果有更好的方法可以做到这一点，请不吝赐教。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:41:36.943

`SimpleXMLElement::xpath`*总是*返回一个**数组**（实际上您正在获取它的第一个元素）以及找到的结果（无论它们只有一个或多个），或者`FALSE`在错误的情况下。

我认为你的代码很好，除了不是很健壮。你最好先检查结果，`empty($result)`然后再用它做任何其他事情。

```
$LatLonBox_result = $xml->xpath('//http:LatLonBox');

if (!empty($LatLonBox_result)) {
    echo "North: " . $LatLonBox_result[0]["north"] . "\n";
    echo "South: " . $LatLonBox_result[0]["south"] . "\n";
    echo "East: " . $LatLonBox_result[0]["east"] . "\n";
    echo "West: " . $LatLonBox_result[0]["west"] . "\n";
} 
```

# javascript - 我可以使用 /^USA$/ 进行精确匹配吗？安全吗？有更好的主意吗？

> ID：12942052
> 
> 赞同：0
> 
> 时间：2012-10-17T19:38:07.583
> 
> 标签：javascript, word

我有 my_text_field 的 my_string （但它是隐藏的），例如 FRANCE USA_ILANDS GERMANY （每个国家/地区/单词之间的空格.....实际上，所有这些国家/地区名称都是 my_form 上的文本字段/下拉列表/复选框的名称) 就像这样，我正在连接大约 200 个国家/地区，嗯。

现在，我想在 my_string 中搜索一个匹配项，例如，我正在寻找一个美国匹配项，所以我把下面的 JS 放在了下面，

```
var myCountryName = /USA/; 

var returnValue = my_text_field.search(myCountryName);

if(returnValue != -1){; // This Country/field/object is found in the my_text_field, hence greyed out with readOnly
this.ui.oneOfChild.border.fill.color.value = "192,192,192";
this.access = "readOnly";
}; 
```

我期望返回值应该是假的。

但是，它的到来是真的！

[https://stackoverflow.com/questions/447250/matching-exact-string-with-j avascript](https://stackoverflow.com/questions/447250/matching-exact-string-with-j%20avascript)

我正在遵循第一个建议的选项，例如 var r = /^a$/ 它对我来说很有效

请。让我知道这是安全的吗？好？推荐吗？或任何其他帮助找出完全匹配的词？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:43:25.903

用于[`\b`](http://www.w3schools.com/jsref/jsref_regexp_begin.asp)检查每一侧的[单词边界。](http://www.w3schools.com/jsref/jsref_regexp_begin.asp)

```
/\bUSA\b/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:46:05.790

如果您想知道美国是否存在，那么为什么不使用：

```
my_text_field = ' '+my_text_field+' ';
my_text_field.indexOf(' '+myCountryName+' '); 
```

除非我错过了什么。

# apache - 不确定将重写规则放入 httpd.conf 是否正确

> ID：12942054
> 
> 赞同：1
> 
> 时间：2012-10-17T19:38:14.200
> 
> 标签：apache, rewrite

我正在尝试确定是否访问此网址：

[http://www.mydomain.com/bob](http://www.mydomain.com/bob)

我被带到

[http://www.mydomain.com/bob/](http://www.mydomain.com/bob/)

我知道我可以创建一个名为 bob.php 的 php 文件，该文件重定向到文件夹 /bob/ 但是我想学习使用 apache 重写规则来做到这一点。

我尝试了以下规则：

重写规则 ^bob$ /bob/ [L]

并将其放入 /etc/apache2/httpd.conf

但这似乎不起作用。任何关于错误的指针将不胜感激。提前致谢。

# facebook-graph-api - 如何将 facebook 图表搜索的结果限制为状态更新？

> ID：12942056
> 
> 赞同：0
> 
> 时间：2012-10-17T19:38:20.920
> 
> 标签：facebook-graph-api

以下查询将获取有关“投资”一词的所有公开帖子。

```
https:graph.facebook.com/search?q=invested&type=post&fields=id,type,message 
```

然而，只有大约一半拥有`type=status`. 其余的是链接视频和图片。替换 type=status 无效。

[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)似乎提供了一个解决方案，但我对它的第一个解释是不正确的。

```
https:graph.facebook.com/search?q=invested&type=post&fields=id,type(status),message 
```

仅获取状态消息的正确方法是什么？

在你说之前，我知道我可以在最后过滤它们，但我正在研究这个解决方案，因为它会更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:10:47.957

我不相信现场扩张会在这里奏效。如果有办法过滤特定类型的子字段，使用字段扩展我还没有找到。

[流](https://developers.facebook.com/docs/reference/fql/stream/)表的 FQL 查询是具有神秘[CONTAINS()](http://facebook.stackoverflow.com/questions/12630401/documentation-for-contains-in-fql)运算符的作业的工具。状态更新是类型 46。

```
https://graph.facebook.com/fql?q=SELECT post_id, type, message FROM stream 
    WHERE CONTAINS('invested') AND type=46 
```

如果您想获取所有有消息的帖子，无论类型如何，您都可以替换`type=46`为`strlen(message)>0`

# php - 创建具有多个文本区域的 wordpress 小部件

> ID：12942060
> 
> 赞同：4
> 
> 时间：2012-10-17T19:38:29.767
> 
> 标签：php, javascript, jquery, wordpress

```
class ad_widget extends WP_Widget {
function __construct() {
    $widget_ops = array( 'classname' => 'ad-widget-container', 'description' => __( ' Ad WIDGET' ) );
    parent::__construct( 'ad-widget', __( 'Ad widget', 'test' ), $widget_ops );
}
function widget( $args, $instance ) {
    extract( $args, EXTR_SKIP );
    $title = empty( $instance['title'] ) ? '' : apply_filters( 'widget_title', $instance['title'] );
    $text = empty( $instance['text'] ) ? '' : apply_filters( 'widget_text', $instance['text'] );
    echo $args['before_widget'];
    if ( $title )
        echo $args['before_title'] . $title . $args['after_title'];

    echo '<div class="cutom-widget">';
       echo $text;
    echo '</div>';
    echo $args['after_widget'];
}
function update( $new_instance, $old_instance ) {
    $instance = $old_instance;
    $instance['title'] = strip_tags($new_instance['title']);
    $instance['text'] =  $new_instance['text'];
    return $instance;
}    
function form( $instance ) {
    $instance = wp_parse_args( (array) $instance, array( 'title' => '' ) );
    $title = esc_attr( $instance['title'] ); 
    $text = esc_textarea($instance['text']); ?>
    <p>
       <label for="<?php echo $this->get_field_id( 'title' ); ?>"><?php _e( 'Title:', 'test' ); ?></label>
        <input class="widefat" id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" type="text" value="<?php echo $title; ?>" />
        <textarea class="widefat" rows="16" cols="20" id="<?php echo $this->get_field_id('text'); ?>" name="<?php echo $this->get_field_name('text'); ?>"><?php echo $text; ?></textarea>
    *<a>Add more text area</a>
    <a>delete text area </a>*
    </p><?php
} 
```

这是一个带有文本框和文本区域的简单小部件。当我单击“添加更多文本区域”时，它会添加一个具有不同 ID 的文本区域并保存不同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-11T06:36:56.970

我猜你必须使用JS来做到这一点。

1.  在最后一个 textarea 上放置或附加一个按钮
2.  单击按钮将添加另一个带有适当标记的文本区域
3.  获取该值并附加到小部件表单上

# php - Jquery 脚本重置我的表单

> ID：12942062
> 
> 赞同：0
> 
> 时间：2012-10-17T19:38:59.540
> 
> 标签：php, jquery, javascript-events

我有一个页面，我单击链接并使用此代码更改 div 的内容。`page1.php`我用（这是一个带有一些下拉列表的表格）填写该内容。

当我尝试单击下拉列表时，它会重置它。当我尝试从下拉列表中选择某些内容时，如何停止休息？

```
<script type="text/javascript">
  $(function(){ 

    $('#page1').click(function(){
       pageUrl = 'page1.php';
       LoadingPages(pageUrl);
     })

     function LoadingPages(pageUrl){
       $('#content').load(pageUrl);
     }

     int = setInterval(function(){
       LoadingPages(pageUrl)
     },5000);
  });
</script> 
```

HTML [[（取自评论）](https://stackoverflow.com/questions/12942062/jquery-script-reset-my-form#comment17541945_12942062)]

```
<a href="#" id="page1">something</a> 
<div id="content"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:53:05.930

正如suresh.g所提到的，即使您单击任何内部元素，在元素上使用 onClick 也会被触发。解决方法是在内部元素上设置一个操作，您希望被单击并停止它们在 DOM 树中向上传播的事件。因此，它将触发内部事件并阻止它移动外语，这会阻止您的#content onclick。代码是这样的：

```
$("#some_inner_element").bind('click', function(e){
    // Do your magic
    e.preventDefault();
    e.stopPropagation();
    e.stopImmediatePropagation();

}); 
```

# php - $_SERVER['REMOTE_USER'] 可以被欺骗吗？

> ID：12942065
> 
> 赞同：7
> 
> 时间：2012-10-17T19:39:19.783
> 
> 标签：php, security, cgi

我有一种情况，我正在打开基于 $_SERVER['REMOTE_USER'] 变量的文件。我不认为这是欺骗性的，但只想确认一下。我不想让自己容易受到任意文件的读取：

```
 <?
      $user = $_SERVER['REMOTE_USER'];
      $fp = fopen("./$user.png","r");
   ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:41:48.783

是的，该用户名是远程用户指定的任何内容。

您还需要验证密码。如果密码是由您的服务器而不是您的应用程序验证的，那么您可能没问题。

# php - Facebook 图形 API 提要权限

> ID：12942069
> 
> 赞同：0
> 
> 时间：2012-10-17T19:39:34.437
> 
> 标签：php, facebook, facebook-graph-api, facebook-apps

我正在尝试创建一个需要阅读用户新闻提要的 Facebook 应用程序。在我的应用程序中，我使用：

```
 https://graph.facebook.com/me/feed?access_token=XXXXXXXXXXX 
```

当我转到直接链接和通过应用程序时，我得到 2 个不同的结果。我知道这是由于我的帖子的权限。我的问题是，我需要添加什么权限才能`App->Settings->Permissions`让应用程序拥有对提要帖子的完全访问权限？

如果有任何改变，我正在使用 PHP SDK。我这样称呼 Graph：

```
$feed = $facebook->api('/me/feed', array('access_token' => $facebook->getAccessToken(),'limit'=>200)); 
```

谢谢你，很抱歉这个菜鸟问题，我是 Facebook 应用程序的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-26T03:56:27.527

您需要 user_posts 权限。

> 提供对个人时间轴上帖子的访问权限。包括他们自己的帖子、他们被标记的帖子，以及其他人在他们的时间线上发布的帖子。

你可以看到它：[https ://developers.facebook.com/docs/facebook-login/permissions/#reference-user_posts](https://developers.facebook.com/docs/facebook-login/permissions/#reference-user_posts)

# ruby-on-rails - 从 Restful 资源到 Ruby 对象的 XML 性能注意事项

> ID：12942071
> 
> 赞同：2
> 
> 时间：2012-10-17T19:39:36.507
> 
> 标签：ruby-on-rails, rest

我正在查看以下 URL，以了解流行的 ruby​​ gem 如何映射将 XML 返回到 ruby​​ 对象的 Restful 端点：

```
https://github.com/tapajos/highrise/blob/master/lib/highrise/base.rb 
```

我看到他们正在使用 ActiveResource::Base，它在幕后神奇地做到了这一点。

因此，您可以从 URI 中获取某种 xml，例如：

```
<person>
  <id type="integer">1</id>
  <first-name>John</first-name>
  <last-name>Doe</last-name>
  <title>Stand-in</title>
  <background>A popular guy for random data</background>
  <linkedin_url>http://us.linkedin.com/in/john-doe</linkedin_url>
  <company-id type="integer">5</company-id>
  <company-name>Doe Inc.</company-name>
  <created-at type="datetime">2007-02-27T03:11:52Z</created-at>
  <updated-at type="datetime">2007-03-10T15:11:52Z</updated-at>
  <visible-to>Everyone</visible-to>
..
</person> 
```

所以使用 ActiveResource，它只是将它映射到一个 ruby​​ 对象或返回一个哈希？

它返回的对象的定义在哪里？

就像标签资源代码在这里：[https ://github.com/tapajos/highrise/blob/master/lib/highrise/tag.rb](https://github.com/tapajos/highrise/blob/master/lib/highrise/tag.rb)

```
module Highrise
  class Tag < Base  
    def ==(object)
      (object.instance_of?(self.class) && object.id == self.id && object.name == self.name)
    end
  end
end 
```

此外，如果性能是一个大问题，是否还会使用 activeresource 或者是否有更快的方法来解析 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:32:04.843

ActiveResource 正在处理所有的 XML 转换。您会注意到 /lib/highrise/base.rb 中的格式设置为 XML。查看 ActiveResource 文档：[http ://api.rubyonrails.org/classes/ActiveResource/Base.html#method-c-format-3D](http://api.rubyonrails.org/classes/ActiveResource/Base.html#method-c-format-3D)

> 设置从 mime 类型引用发送和接收属性的格式
> 
> Person.format = ActiveResource::Formats::XmlFormat
> 
> Person.find(1) # => GET /people/1.xml

ActiveResource 本身负责将任何 RESTful 资源映射到模型。因此 highrise gem 指向 highrise 中的 RESTful 资源，ActiveResource 将其转换为 rails 模型。

# java - Java Jar 包：它们是否/可以包含所有非 JDK 库？

> ID：12942073
> 
> 赞同：1
> 
> 时间：2012-10-17T19:39:58.630
> 
> 标签：java, jar, build-system

> **可能重复：**
> [是否可以使用自定义清单文件创建一个包含项目类和项目依赖项的“超级”jar 作为 jars？](https://stackoverflow.com/questions/1832853/is-it-possible-to-create-an-uber-jar-containing-the-project-classes-and-the-pr)

我正在研究多平台部署。在 Perl 和 Python 等语言中总是令人沮丧的关键事情之一是部署第三方库和第二方库。

我想知道 java 构建过程是否允许将程序使用的*所有*非 JRE 库打包到 jar 中，以便可以将其部署到任何地方而无需安装到任何其他目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:11:10.197

我认为您正在寻找类似 fatjar 或 uberjar 的东西。

这是构建过程中的一个步骤，它解压缩所有依赖项并将它们打包到一个大 jar 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:44:37.343

不，jar 文件不应该包含其他 jar 文件。这样做是可能的，但只能使用使一切变得更加复杂的自定义类加载器。为什么不将 jar 及其所有依赖项压缩在一起：

```
myApp.zip
  |_bin
  |  |_ start.bat
  |  |_ start.sh
  |
  |_lib
     |_myApp.jar
     |_other.jar
     |_other2.jar 
```

# java - 菜单和复合图案

> ID：12942077
> 
> 赞同：1
> 
> 时间：2012-10-17T19:40:12.563
> 
> 标签：java, swing, design-patterns

我正在尝试尝试复合模式以创建菜单栏。
这是代码：

```
 public class TestMenu {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        MenuComponent openMenu = new MyMenu("Open Menu");
        MenuComponent openMenuItem1 = new MyMenuItem("Open Menu Item 1");
        MenuComponent openMenuItem2 = new MyMenuItem("Open Menu Item 2");
        openMenu.addMenu(openMenuItem1);
        openMenu.addMenu(openMenuItem2);
        MenuComponent exitMenuItem = new MyMenuItem("Exit Menu");

        MenuComponent mainMenu = new MyMenu("Main");
        mainMenu.addMenu(openMenu);
        mainMenu.addMenu(exitMenuItem);

        TestMenuFrame frame = new TestMenuFrame();
        frame.getMyMenuBar().addMainMenu(mainMenu);
        frame.setVisible(true);
    }
} 
```

```
 public class MenuBar extends JComponent {

    public MenuBar() {
        setLayout(new FlowLayout(FlowLayout.LEFT, 2, 2));

    }

    void addMainMenu(MenuComponent mainMenu) {
        JButton btn = new JButton(mainMenu.getName());
        final JPopupMenu popupMenu = new JPopupMenu();
        Iterator<MenuComponent> iterator = mainMenu.iterator();
        if (iterator != null) {
            while (iterator.hasNext()) {
                MenuComponent menuComponent = iterator.next();
                JMenuItem item = new JMenuItem(menuComponent.getName());
                popupMenu.add(item);
            }
        }
        btn.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                JButton btn = (JButton) e.getSource();
                popupMenu.show(e.getComponent(), e.getX(), e.getY());
            }
        });
        add(btn);
    }
} 
```

```
 public abstract class MenuComponent {

    protected String name;

    public MenuComponent(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public abstract void addMenu(MenuComponent menu);

    public abstract Iterator<MenuComponent> iterator();

} 
```

```
 public class MyMenu extends MenuComponent {

    private List<MenuComponent> listMenu = new ArrayList<>();

    public MyMenu(String name) {
        super(name);
    }

    @Override
    public void addMenu(MenuComponent menu) {
        listMenu.add(menu);
    }

    @Override
    public Iterator<MenuComponent> iterator() {
        return listMenu.iterator();
    }
} 
```

```
 public class MyMenuItem extends MenuComponent {

    public MyMenuItem(String name) {
        super(name);
    }

    @Override
    public void addMenu(MenuComponent menu) {
//        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public Iterator<MenuComponent> iterator() {
//        throw new UnsupportedOperationException("Not supported yet.");
        return null;
    }
} 
```

问题是当我启动应用程序时子菜单没有显示，在这个测试示例中我只能看到打开菜单和退出菜单。我可以使用复合模式的变体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:45:11.327

当然你的子菜单没有显示。以下循环

```
while (iterator.hasNext()) {
  MenuComponent menuComponent = iterator.next();
  JMenuItem item = new JMenuItem(menuComponent.getName());
  popupMenu.add(item);
} 
```

只深一层。您不考虑变量`menuComponent`也有非空`Iterator`的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:38:28.270

我使用 2 种单独的方法让它工作，但如果有人有更好的我总是接受它。
例如，只需使用一种方法，因为两种方法几乎都做同样的事情。

```
 public class MenuBar extends JComponent {

            public MenuBar() {
                setLayout(new FlowLayout(FlowLayout.LEFT, 2, 2));

            }

            void addMainMenu(MenuComponent mainMenu) {
                JButton btn = new JButton(mainMenu.getName());
                final JPopupMenu popupMenu = new JPopupMenu();
                addPopupMenus(mainMenu);
                btn.addMouseListener(new MouseAdapter() {
                    @Override
                    public void mouseClicked(MouseEvent e) {
                        JButton btn = (JButton) e.getSource();
                        popupMenu.show(e.getComponent(), e.getX(), e.getY());
                    }
                });
                add(btn);
            }

    private void addPopupMenus(final MenuComponent menu) {
                final Iterator<MenuComponent> iterator = menu.iterator();
                JMenuItem main;
                while (iterator.hasNext()) {
                    final MenuComponent abstractMenu = iterator.next();
                    if (abstractMenu.iterator().hasNext()) {
                        main = new JMenu(abstractMenu.getMenuName());
                    } else {
                        main = new JMenuItem(abstractMenu.getMenuName());
                    }
                    addPopupMenus(abstractMenu, main);
                    popupMenu.add(main);
                }
            }

            private void addPopupMenus(MenuComponent menu, JMenuItem jMenuItem) {
                final Iterator<MenuComponent> iterator = menu.iterator();
                JMenuItem main;
                while (iterator.hasNext()) {
                    final MenuComponent abstractMenu = iterator.next();
                    if (abstractMenu.iterator().hasNext()) {
                        main = new JMenu(abstractMenu.getMenuName());
                        addPopupMenus(abstractMenu, main);
                    } else {
                        main = new JMenuItem(abstractMenu.getMenuName());
                    }
                    jMenuItem.add(main);
                }
            }
        }

    }
} 
```

# python - 如何在 python 中使用 IO-WARRIOR-Library “iowkit.dll”？

> ID：12942082
> 
> 赞同：2
> 
> 时间：2012-10-17T19:40:28.973
> 
> 标签：python

我正在尝试使用 IO-Warrior 库“iowkit.dll”。我想使用 ctypes 使用 Python 访问 iowkit.dll 的方法。但它一直有效，直到现在根本没有方法。特别是，我对“IowKitWrite”和“IowKitRead”方法有困难。

有人可以帮助我还是在某个地方有 IO-Warrior 的 Python 示例？

谢谢

# objective-c - Objective-c 语法混乱

> ID：12942083
> 
> 赞同：1
> 
> 时间：2012-10-17T19:40:31.377
> 
> 标签：objective-c, ios, syntax

谁能告诉我两者的区别

```
NSString* string; 
```

和

```
NSString* string = [NSString string]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:44:53.277

就像在 C 中一样，

```
NSString *string; 
```

声明变量（指针）`string`但不给它任何值。这意味着在初始化变量之前，您不能使用该变量，例如通过执行`string = @"foo";`.

笔记：

*   如果这是一个实例变量，它实际上会被自动初始化——到`nil`.
*   如果您在代码中的某处使用变量而没有在*每个可能的分支*（`if`条件等）中初始化它，那么编译器会抱怨。为避免这种情况，您可以将其设置为空字符串或`nil`开始。

* * *

线

```
NSString *string = [NSString string]; 
```

使用[类的](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/string)[`+string`方法`NSString`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/string)创建一个空字符串。你也可以使用`@""`.

（进一步说明：我建议使用`NSString *string`而不是，`NSString* string`因为前者隐藏了语法特质：`NSString *string1, *string2;`是在一行上声明多个指针变量的正确方法。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:43:45.247

## NSString *字符串；

第一个您刚刚声明将有一个`NSString`名为的变量`string`，但不会对其进行初始化。

当您希望字符串包含由某个条件确定的一系列值中的一个时，您可能会这样做：

```
NSString *string;

if (condition) {
    string = @"This condition";
} else {
    string = @"That condition";
} 
```

## NSString *string = [NSString 字符串];

第二次您执行上述所有操作，以及将`string`变量初始化为空字符串的附加步骤。

当您希望字符串包含特定的单个值时，您可以这样做：

```
NSString *string = @"There are no conditions" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:44:25.323

```
NSString *string; 
```

创建一个指针，但不创建一个字符串对象（实例）。根据编译器选项的位置，它可能会初始化为 nil 或不初始化。换句话说，它为指向`NSString`机器人无`NSString`对象的指针创建了一个位置（内存存储）。

```
NSString *string = [NSString string]; 
```

创建一个空字符串对象（实例）和一个指向它的指针。

# php - 依赖于语言环境的 PHP 函数

> ID：12942088
> 
> 赞同：0
> 
> 时间：2012-10-17T19:40:38.710
> 
> 标签：php, hosting, locale

我正在将一个 PHP 网站移动到一个不幸的是不支持该网站广泛使用的 ru_RU.cp1251 语言环境的主机。我能看到的解决问题的唯一方法是重构代码，使其变得独立于语言环境。有没有办法安全地做到这一点？例如，是否有可以依赖于当前语言环境的所有原生 PHP 函数的列表？

# c# - 将我的 LINQ-to-SQL 对象转换为模型对象的好方法是什么？

> ID：12942101
> 
> 赞同：2
> 
> 时间：2012-10-17T19:41:18.413
> 
> 标签：c#, asp.net-mvc, sql-server-2008, linq-to-sql

当我使用 LINQ-to-SQL 使用以下简单的方法从我的 MSSQL 数据库中提取内容时，我一直注意到：

```
 public IEnumerable<Contact> GetAll()
    {
        var Contacts = from c in _context.Contacts
                      select new Models.Contact
                      {
                          ContactID = c.ContactID,
                          FirstName = c.FirstName,
                          LastName = c.LastName,
                          Email = c.Email,
                          Phone = c.Phone,
                          Address1 = c.Address1,
                          Address2 = c.Address2,
                          City = c.City,
                          State = c.State,
                          Zip = c.Zip,
                          HighImportance = (bool)c.HighImportance,
                          PrimaryContact = (bool)c.PrimaryContact,
                          OfficeLocation = c.OfficeLocation
                      };
        return Contacts;
    } 
```

我对要填充的 OfficeLocations 表有一个复杂的对象（外键引用）。如果我这样做：

```
_context.OfficeLocations.SingleOrDefault(ol => ol.OfficeLocationID == c.OfficeLocationID); 
```

然后这将返回由我的 DBML 生成的类型。到目前为止，我一直在使用类似的东西：

```
OfficeLocation = new OfficeLocation
            {
                OfficeLocationID = c.OfficeLocationID,
                Name = c.OfficeLocation.Name,
                Phone = c.OfficeLocation.Phone
            } 
```

但我觉得应该有更好的方法来做到这一点，也许是通过在我的 DBML 数据对象上使用扩展方法或其他方式？

任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:49:34.513

您应该检查[AutoMapper](http://automapper.codeplex.com/)。这是一个非常好的库，可以帮助您在应用程序中设置对象之间的映射。例如，您可能有域实体和一层 DTO；然后您可以使用 AutoMapper 从您的实体映射到相应的 DTO，我认为这是您想要做的。

# ajax - ColdFusion 通过 ajax 发送加密的表单数据

> ID：12942102
> 
> 赞同：0
> 
> 时间：2012-10-17T19:41:20.397
> 
> 标签：ajax, encryption, encoding, coldfusion, decoding

所以我有一个字符串，我需要在表单中的隐藏元素中进行编码，并在提交后对其进行解码：

```
<input type="hidden" class="secret_number" value="#encrypt(0, 'foo')#"> 
```

所以在 html 中，这看起来很糟糕，就像

```
$&(A$4!v 
```

这会导致 URL 出现错误，因此我将其放在 URLEncodedFormat 中。所以最终版本看起来是这样的：%25%28%25%5F%23WLT%20%0A，这很好。如果您对此进行解码和解密，它会恢复到应有的状态。

但是提交后是这样的：

```
%&#x28;%_#WLT 
```

由于分号，解码时出现了哪些错误。

值得注意的是，在提交时，这是通过 ajax 调用运行的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:16:31.283

试试这个以获得更友好的 URL 编码

```
<input type="hidden" class="secret_number" value="#encrypt(string=0, key='foo', encoding='HEX')#"> 
```

我还要注意，如果您在这种情况下关心安全性，请不要使用默认的 CFMX_COMPAT 算法。

```
<input type="hidden" class="secret_number" value="#encrypt(0, 'foo','AES/CBC/PKCS5Padding','HEX')#"> 
```

也不要将密钥硬编码到代码中。

我假设您这样做只是为了获得正确的编码与实际安全性。

# c# - 如何根据设置的其他字段显示工具提示？

> ID：12942110
> 
> 赞同：1
> 
> 时间：2012-10-17T19:41:59.570
> 
> 标签：c#, wpf, tooltip

这是我的代码：

```
public string Units
    {
        get { return (string)GetValue(UnitsProperty); }
        set { SetValue(UnitsToolTipVisibility, Visibility.Visible);
                SetValue(UnitsProperty, value); }
    }
    public static readonly DependencyProperty UnitsProperty = DependencyProperty.Register("Units", typeof(string), typeof(UserInputOutput));
    public static readonly DependencyProperty UnitsToolTipVisibility = DependencyProperty.Register("UnitsToolTipVisibility", typeof(Visibility), typeof(UserInputOutput), new UIPropertyMetadata(Visibility.Visible)); 
```

我的目标：当 Units 变量设置时，我希望 UserControl 的这个实例的工具提示变得可见。

我想我会以错误的方式解决这个问题。我有很多很多 UserControl 实例。当一个实例设置了 Units 字符串时，该实例的工具提示应该是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:52:41.627

在 XAML 中使用触发器会更容易。那么你就可以彻底摆脱了`UnitsToolTipVisibilityProperty`。

```
<ToolTip>
   <ToolTip.Resources>
      <Style TargetType="ToolTip">
         <Style.Triggers>
              <!-- hide tooltip when no unit set -->
              <DataTrigger Binding="{Binding Units}" Value="{x:Null}">
                  <Setter Property="Visibility" Value="Collapsed" />
              </DataTrigger>
          </Style.Triggers>
       </Style>
    </ToolTip.Resources?
</ToolTip> 
```

# c# - 使用列表 或 var 关键字的区别

> ID：12942111
> 
> 赞同：0
> 
> 时间：2012-10-17T19:42:03.563
> 
> 标签：c#, resharper, var

> **可能重复：**
> [C# 'var' 与特定类型的性能](https://stackoverflow.com/questions/356846/c-sharp-var-vs-specific-type-performance)

当我写下面的代码时：

```
List<string> list = new List<string>(); 
```

resharper 想要将其转换为

```
var list = new List<string>(); 
```

为什么？有什么不同？是不是更容易理解？我想不是。

使用`var`RAM 的成本高于其他成本。不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T19:43:27.393

他们是一样的。`var`是隐式类型的。

如果您将鼠标悬停`var`在 Visual Studio 中的关键字上，它将向您显示对象的类型 - 在本例中为`List<string>`. 的用途`var`只是为了清理代码——你已经知道你正在创建一个类型的对象`List<string>`，所以有些人认为键入是多余的：

```
List<string> list = new List<string>(); 
```

没有性能差异，因为编译器已经知道对象是什么类型。主要使用 var 个人偏好 - 如果您愿意，您可以使用它并且不会影响性能。

Eric Lippert 有一篇关于`var` [这里](http://blogs.msdn.com/b/ericlippert/archive/2011/04/20/uses-and-misuses-of-implicit-typing.aspx)的很棒的博客文章。

我认为你很困惑`var`and `dynamic`，这是两个完全不同的东西。该`dynamic`类型是一种允许您在运行时为其分配不同类型的值的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T19:46:05.653

```
var list = new List<int>(); 
```

编译器使用右手的返回类型来确定列表的类型。在这种情况下`List<string>`。所以没有区别。只是更短的方法来初始化你的变量。

请注意，声明字段时不能使用 var。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:44:25.083

完全没有区别。唯一值得注意的是该`var`关键字不会创建动态对象。它仍然是一个强类型对象，但编译器可以从变量声明语句的右操作数推断出类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:46:48.353

这背后的原因是，如果您使用“var”，则更容易重构。例如，如果您从方法返回类型“Foo”，然后将其转换为返回接口，则无需更改任何客户端代码 - 新类型将被推断并正确使用。

# entity-framework - 在 SQL Azure 联合中的单个事务中保存到多个数据库

> ID：12942116
> 
> 赞同：0
> 
> 时间：2012-10-17T19:42:14.150
> 
> 标签：entity-framework, azure-sql-database

我需要在**单个事务**中保存到两个不同的 SQL Azure 联合数据库，以便在出现故障时回滚所有更改。现在，我有两个独立的代码块，它们彼此独立地进行交易。我尝试使用 TransactionScope，但显然 SQL Azure 不支持它。

```
 using (EVENTContext dc = new EVENTContext(
GetConnectionString(1)))
    {
        string federationCmdText = @"USE FEDERATION [fed] ([dist] = '"+ GetDist(1) +"') WITH FILTERING = OFF, RESET";
        ((IObjectContextAdapter)dc).ObjectContext.Connection.Open();
        dc.Database.ExecuteSqlCommand(federationCmdText);
        dc.EVENTS.Add(e);
        dc.SaveChanges();
    }

    using (EVENTContext dc = new EVENTContext(
GetConnectionString(2)))
    {
        string federationCmdText = @"USE FEDERATION [fed] ([dist] = '"+ GetDist(2) +"') WITH FILTERING = OFF, RESET";
        ((IObjectContextAdapter)dc).ObjectContext.Connection.Open();
        dc.Database.ExecuteSqlCommand(federationCmdText);
        dc.EVENTS.Add(e2);
        dc.SaveChanges();
    } 
```

如何在单个事务中保存到多个数据库？我最近开始阅读有关工作单元的内容，但我不确定这是否是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:22:45.270

不幸的是，你不能；不支持。您可以做的最接近的事情是将记录存储在挂起状态（在为此目的添加的列中），如果两者都提交，则将记录状态更改为活动（或类似的东西）。换句话说，您需要自己管理并将这些操作视为长期运行的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:49:12.603

好的，在考虑了一段时间后回答我自己的问题。这是我将尝试做的事情：

1) 为每个用户操作（无论它是什么）生成一个操作 ID，并将其写入根数据库中的表中

2) 将此操作 ID 附加到每一行，以便我可以跟踪为哪个操作添加了哪些行

3）分别提交到每个数据库

4）从根数据库表中删除动作ID

所有这些步骤都将是一个用户操作的一部分，如果在一个步骤中引发异常，则不会执行以下步骤。

在应用程序端，然后我检查从联合表返回的任何内容的操作 ID 是否出现在根数据库表中。如果是这样，则提交更改时出错。如果没有，那就是一次成功的交易。

最后，我可以运行一个辅助角色，它会定期从根数据库表中获取一个操作 ID，并清理具有该操作 ID 的所有行，并在将它们全部删除后，也删除该操作 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T06:20:35.617

连接到 Azure SQL DB 时，过去不支持 TransactionScope。您要么有单独的上下文独立提交（如在您的代码示例中），要么您必须如上所述实现自己的补偿逻辑。两者都不再需要，因为 Azure DB 现在支持 TransactionScope。请参阅[Sql Azure 中的 TransactionScope()](https://stackoverflow.com/questions/2604941/transactionscope-in-sql-azure)。

# ios - iOS的bringSubviewToFront阻塞UIView动画

> ID：12942126
> 
> 赞同：10
> 
> 时间：2012-10-17T19:42:47.787
> 
> 标签：ios, uiview, uiviewanimation

我有一个带有一堆 UIImageViews 的 ViewController，我需要将它们发送到前面并动画到视图的中心。

我曾尝试在投射 UIView 动画之前调用bringSubviewToFront，似乎正在发生的事情是视图被发送到堆栈的顶部，但动画没有发生（即使完成处理程序日志显示好像动画确实发生了）。

我第二次按下触发动画的按钮（考虑到这次视图已经在顶部索引，动画按原样发生）

这是我的代码：

```
- (void)beginAnimationWithSelectedCountry:(UIView *)countryView
{
    if (!countryView) return;

    [self.view bringSubviewToFront:countryView];
    [UIView animateWithDuration:0.6f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        countryView.center = CGPointMake(self.view.center.x, self.view.center.y);
    } completion:^(BOOL finished) {
        NSLog(@"Animation complete");
    }];
} 
```

有什么想法吗？我已经在这里待了好几个小时了>.<

谢谢

编辑：如果我注释掉bringSubviewToFront 代码与动画完美执行（除了视图在其他一些视图下），所以我很确定问题出在以下行：

```
[self.view bringSubviewToFront:countryView]; 
```

这是我目前所拥有的截图，可能会更清楚地说明这个问题： [http ://d.pr/i/PKoa](http://d.pr/i/PKoa)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-22T20:23:24.407

称呼：

`[self.view layoutSubviews];`

紧接着：

`[self.view bringSubviewToFront:countryView];`

它会解决你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T15:59:04.260

你打电话时

```
[self.view bringSubviewToFront:countryView]; 
```

您触发了一个新的视图布局事件。您可以通过在控制器上的“viewDidLayoutSubviews”中设置断点来检查这一点。

我有一个类似的问题：我自己在“viewDidLayoutSubviews”方法中的代码通过重置我试图动画的对象的帧取消了我的动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:59:18.707

尝试添加`UIViewAnimationOptionAllowAnimatedContent`选项。我几乎可以肯定这是此选项的一种情况，但如果不是，请使用其他选项。您还可以尝试安排一个块在下一个 runloop 上执行您的动画，我发现这对动画来说是一种祝福。

# function - How to define a variadic function

> ID：12942127
> 
> 赞同：11
> 
> 时间：2012-10-17T19:42:50.483
> 
> 标签：function, scheme, arguments, variadic-functions, chicken-scheme

I'm looking for something similar to Javascript's `arguments` array:

```
function parent(){
  child.apply(this.arguments);
} 
```

I'm aware of the dot notation for variable argument lengths and also scheme's `apply` function.

This doesn't seem to work as the dot is taken to be the first argument:

```
(define (parent .) 
          (list .))

(parent 1 3 4 6 7)
Error: bad argument count - received 5 but expected 1: #<procedure (array arg-list)> 
```

This works but isn't ideal. I'd like to call the function without the extra syntax to define the args list:

```
(define (parent args-list)
     (apply list args-list))

(parent 1 3 4 6 7)
Error: bad argument count - received 5 but expected 1: #<procedure (array args-list)>

(parent `(1 3 4 6 7))
(1 3 4 6 7) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T19:47:52.923

The correct syntax is:

```
(define (parent . args-list)
    <do something with args-list>) 
```

Use it like this:

```
(parent 1 2 3 4 5) 
```

Inside the procedure, all the arguments will be bound to a list named `args-list`. In the above snippet, `args-list` will have `'(1 2 3 4 5)` as its value. This is an example of how variadic functions work in Scheme.

For the sake of completeness, the same mechanism can be used for anonymous functions, too (notice that `args-list` is *not* surrounded by parenthesis):

```
((lambda args-list <do something with args-list>) 1 2 3 4 5) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T19:47:31.123

You want:

```
(define (parent . args) 
   args) ; args is a list 
```

Which is infact the 'default' implementation of `list`.

```
(define (list . x) x) 
```

The error message when applying `(define (parent . ) ...)` seems wrong, also, the code should not have compiled in the first place as it is invalid syntax. Might imply a bug with the version of Chicken Scheme you are using.

# haskell - EclipseFP 自动完成（智能感知）缺少项目

> ID：12942128
> 
> 赞同：3
> 
> 时间：2012-10-17T19:42:55.483
> 
> 标签：haskell, eclipse-fp

我正在尝试使用 Eclipse 和 EclipseFP 插件在 Haskell 中使用[Fay](http://fay-lang.org)开发一个简单的应用程序。

由于某种原因，Fay 模块没有出现在 IDE 的自动完成中。例如，如果我键入`import.`并点击 ctrl-space，则会出现一个模块列表，但其中没有一个`Language.Fay.*`模块。

`fay`列在`build-depends`我的项目`.cabal`文件的部分中，并且源代码使用 GHC 编译得非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:06:10.877

在我的机器上运行良好（我知道名言）。此功能由 scion-browser 提供，因此如果您打开 Haskell Browser 透视图，您应该会看到 fay 出现在 Packages 视图中，单击它会显示包。如果您在 Packages 视图中看不到任何内容，即 scion-browser 未工作或未安装，请检查首选项中的路径是否正确。如果您看到其他软件包但没有看到，您是否重新启动了 EclipseFP？我认为 scion-browser 应该在您安装新软件包时自动更新，但也许出了点问题。底线：它应该可以工作，但可能 EclipseFP 中的配置问题是罪魁祸首。

# javascript - 未从 iframe 中的输入字段触发 onChanged 事件

> ID：12942129
> 
> 赞同：1
> 
> 时间：2012-10-17T19:43:06.210
> 
> 标签：javascript, iframe, dom-events, onchange

`onChange`我有一个表单，它通过监听所有表单字段的事件来跟踪它的脏状态。如果表单是脏的，当用户尝试离开页面或尝试选择另一个项目时，会警告用户未保存的更改。

这适用于“普通页面”中的表单。

这种形式也用在 iframe 中。当更改第一个输入字段的值，然后跳转到表单中的另一个字段时，`onChange`事件按预期触发并且表单被设置为脏。但是当只更改一个输入字段并且您单击 iframe 之外的任意位置时，*不会*触发`onChange`更改输入字段的事件。当 iframe 失去焦点时，似乎输入字段并没有真正失去焦点。

 *如何确保`onChange`在 iframe 外部单击时触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:53:22.513

您可能必须检查是否触发了 iframe 的 window.blur 事件，然后检查是否使用 JS 触发 onchange 事件

[如何以编程方式强制输入上的 onchange 事件？](https://stackoverflow.com/questions/136617/how-do-i-programatically-force-an-onchange-event-on-an-input)*

# java - 如何在 iText 生成的 PDF 中将图像添加到我的标题？

> ID：12942133
> 
> 赞同：5
> 
> 时间：2012-10-17T19:43:17.600
> 
> 标签：java, itext

我正在使用 iText 生成 PDF。我创建了一个自定义 PdfPageEventHelper 来为每个页面添加页眉（和页脚）。

我的问题是我不知道如何添加图像，所以它显示在“标题框”中。我只知道如何将图像添加到文档内容本身（如果有意义的话）。

这是一些代码片段...

```
public static void main(String[] args) {
  Rectangle headerBox = new Rectangle(36, 54, 559, 788);
  /* ... */
  Document document = new Document(PageSize.A4, 36, 36, 154, 54);
  PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(FILENAME));
  HeaderFooter event = new HeaderFooter();
  writer.setBoxSize("headerBox", headerBox);
  writer.setPageEvent(event);
  document.open();
  addContent();
  document.close();
}

static class HeaderFooter extends PdfPageEventHelper {

  public void onEndPage(PdfWriter writer, Document document) {
    Rectangle rect = writer.getBoxSize("headerBox");
    // add header text
    ColumnText.showTextAligned(writer.getDirectContent(),
      Element.ALIGN_RIGHT, new Phrase("Hello", fontHeader1),
      rect.getLeft(), rect.getTop(), 0);

    // add header image
    try {
      Image img = Image.getInstance("c:/mylogo.PNG");
      img.scaleToFit(100,100);
      document.add(img);
    } catch (Exception x) {
      x.printStackTrace();
    }

  }

} 
```

非常感谢任何有关将图像添加到标题的适当方式的建议！

抢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T06:25:40.677

你犯了两个重大错误。

1.  您正在为每个新页面创建对象的新实例。这将导致 PDF 膨胀，因为图像字节的添加次数与页面一样多。请在方法之外创建`Image`对象`onEndPage()`，然后重用它。这样，图像字节只会被添加到 PDF 中一次。
2.  如文档所述，作为参数`Document`传递给`onEndPage()`方法的参数应被视为只读参数。禁止向其添加内容。它与您使用创建的对象不同`new Document(PageSize.A4, 36, 36, 154, 54)`。实际上，它是由实例`PdfDocument`在内部创建的类的`PdfWriter`实例。要添加图像，您需要`PdfContentByte`从作者那里获取 ，然后使用`addImage()`.

通过阅读文档可以轻松避免此类错误。[通过阅读我的iText in Action](http://itextpdf.com/book/)书，您可以节省大量时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:34:25.957

你能试一下吗

```
img.setAbsolutePosition(10, 10);
writer.getDirectContent().addImage(img); 
```

代替

```
document.add(img); 
```

里面`onPageEnd`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T10:43:58.180

我已经为图像设置了绝对位置和对齐方式（在这种情况下，我将图像放在标题中）

```
 try {
        Image img = Image.getInstance("url/logo.png");
        img.scaleToFit(100,100);  
        img.setAbsolutePosition((rect.getLeft() + rect.getRight()) / 2 - 45, rect.getTop() - 50);
        img.setAlignment(Element.ALIGN_CENTER);          
        writer.getDirectContent().addImage(img);
      } catch (Exception x) {
        x.printStackTrace();
      } 
```

我还调整了文档边距，以便在文档的页眉和页脚中有分隔空间。

```
document.setMargins(20, 20, 100, 100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T07:23:48.450

在页面顶部添加图像的通用解决方案。我们也可以通过将图像放置在顶部来做到这一点。它可能会解决您的要求

```
public static void main(String[] args) throws MalformedURLException, IOException, DocumentException {
      Document document = new Document();
        try {
            PdfWriter.getInstance(document,
                    new FileOutputStream("HelloWorld.pdf"));
            document.open();

            //
            // Scale the image to a certain percentage
            //
            String filename = "image.jpg";
            Image image = Image.getInstance(filename);
            image = Image.getInstance(filename);
            image.scalePercent(200f);
            image.setAbsolutePosition(0, (float) (PageSize.A4.getHeight() - 20.0));
            System.out.println(image.getScaledHeight());
            document.add(image);

            //
            // Scales the image so that it fits a certain width and
            // height
            //
            image.scaleToFit(100f, 200f);
            document.add(image);
            document.add(new Chunk("This is chunk 3\. "));
            System.out.println("created");
        } catch (DocumentException | IOException e) {
            e.printStackTrace();
        } finally {
            document.close();
        }
} 
```

}

# c# - 在 Web 和桌面应用程序之间共享对象列表

> ID：12942138
> 
> 赞同：2
> 
> 时间：2012-10-17T19:43:29.653
> 
> 标签：c#, asp.net, .net

我想 `List<MyObject>`在 Web 和桌面应用程序之间共享对象列表。我有 ASP.NET MVC 应用程序，它将新对象放入该列表和桌面应用程序，它将读取这些对象，修改它们并放回列表，然后 ASP.NET MVC 将获取更改的对象。简而言之，对象队列。在应用程序之间共享此类列表的最简单和最快的方法是什么？我不想使用 Windows Communication Foundation 或其他大型框架，也不想添加会带来复杂性的另一层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:47:48.317

由于您可以在两个不同的应用程序（我假设在两台不同的机器上）之间共享数据的唯一方法是序列化数据然后发送它，那么使用像 WCF 这样的远程处理库是您唯一的办法。您还可以使用比 WCF 简单得多的 XML Web 服务（asmx 文件）。

如果这两个应用程序共享同一台机器，那就会带来更多机会。主要使用两者之间的共享资源。这里有几个想法：

*   将列表序列化为 XML 文件并将其保存在共享位置，并让两个应用程序都可以访问它。您需要考虑同步和类似的事情（两个应用程序都试图访问文件）。
*   使用数据库存储列表并让两个应用程序连接到它。

更多细节将取决于应用程序和数据的性质，但我认为这是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:56:39.490

asmx webservice 是最好的方法，你只需在你的桌面应用程序中调用 web 服务，比如

使用 youapp.yourwebservice；

之后，您可以轻松使用任何对象 Web 服务，当您调用 Web 服务时，它会自动创建一个引用 .cs 文件，其中包含类及其方法。

# php - 如何让管理员忽略 symfony 2 中的空字段？

> ID：12942141
> 
> 赞同：0
> 
> 时间：2012-10-17T19:43:40.833
> 
> 标签：php, symfony, symfony-forms, symfony-2.1, admin-generator

我目前正在努力使用 Symfony 2 AdminGenerator。我尝试制作一个基本的管理员用户管理表单，其中包括编辑用户数据。在那里我有字段电子邮件、密码和 isActive。问题是密码即使为空也会被保存，这不是我想要的。

仅在输入任何内容时才需要考虑密码，否则应将其忽略并且不应填充此字段。

提前谢谢你，因为我在 Symfony 2 中没有找到关于这个问题的 AG 信息，Boyan。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:18:49.940

这是我的想法：

```
class UserController extends Controller
{
    public function editAction($id) {
        $em = $this->getDoctrine()->getManager();
        $user = $em->getRepository('AcmeDemoBundle:User')->find($id);
        if (!$user) {
            throw $this->createNotFoundException();
        }
        $request = $this->getRequest();

        if ('POST' === $request->getMethod()) {
            $oldPassword = $user->getPassword();
            $form->bindRequest($request);
            if ($form->isValid()) {
                if ($user->getPassword() === '' || $user->getPassword() === null) {
                    $user->setPassword($oldPassword);
                } else {
                    // Encode password
                }
                $em->flush();
            }
        }
    }
} 
```

在将请求绑定到表单之前，将密码保存在临时变量中。然后检查新密码是否为 null 或 '' 或其他任何内容，要么用旧密码替换它，要么对其进行编码。我不确定您的管理生成器的外观，但这将是解决此问题的一种方法。

您还可以查看 FOSUserBundle。FOSUserBundle:user 使用一个属性 plainPassword，当通过 FOSUserBundle/UserManager 更新用户时，它会被编码并替换真实密码，如果它不为空的话。

**更新**：该操作显然缺少某些部分，例如成功编辑后重定向和呈现表单......只是一个快速破解来说明我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:35:57.660

希望这对您有所帮助，两个月后:) 最好的方法是将实现 EventSubscriberInterface 的类绑定到表单对象中的预绑定事件。使用这种方法，您不必编辑管理生成器的控制器。

[Suscriber Listener Ignore Empty fields](http://www.rjguevara.com/2013/02/symfony-2-ignorar-campos-vacios-en.html)，链接是西班牙语的，不过我可以翻译给你，基本上你创建一个实现EventSubscriberInterface接口的类，博文给你这个类：

```
namespace Acme\TestBundle\Admin;

use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormFactoryInterface;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class IgnoreBlankFieldListener implements EventSubscriberInterface
{
    private $factory;
    private $name;

    public function __construct(FormFactoryInterface $factory, $name)
    {
        $this->factory = $factory;
        $this->name = $name;
}

public static function isNotEmpty($var )
{
    if(is_array($var))
    {
        $notempty = false;

        foreach( $var as $v )
        {
            $notempty = $notempty || !IgnoreBlankFieldListener::isNotEmpty($v);
        }

        return $notempty;
    }
    else
        return !empty ($var);
}

public static function isEmpty( $var )
{

    return IgnoreBlankFieldListener::isNotEmpty($var);
}

public function preBind(FormEvent $event){
    $data = $event->getData();
    $data_name = $data[$this->name];

    if( IgnoreBlankFieldListener::isEmpty($data_name) )
    {
       $form = $event->getForm();
       unset( $data[$this->name] );
       $event->setData($data);
       $form->remove($this->name);
    }
}

public static function getSubscribedEvents() {

        return array(FormEvents::PRE_BIND => 'preBind');
    }
} 
```

然后，将此类订阅到表单中，在 ClassType 定义的 buildForm 部分中执行此操作：

```
public function buildForm(FormBuilder $builder, array $options)
{
 //initial code
 //
$subscriber = new IgnoreBlankFieldListener($builder->getFormFactory(), 'password');

$builder->addEventSubscriber($subscriber);

} 
```

[Symfony 文档](http://symfony.com/doc/2.0/cookbook/form/dynamic_form_modification.html)中的更多信息

# jquery - Jquery .remove 不起作用（对我来说......）

> ID：12942146
> 
> 赞同：0
> 
> 时间：2012-10-17T19:43:54.680
> 
> 标签：jquery, checkbox

我在这里尝试让复选框在选中时附加一个 div，并在取消选中时删除相同的 div。我相信问题出在调用 .remove() 时。我只是不知道问题是什么。非常感谢你的帮助！

```
 $(document).ready(function(){
         $('.checked_locations').click(function(){
            if ($(this).is(':checked'))
            {
                var value = $(this).val();
                $('#locations_filter').append("<div id='hidden_"+value+"'><input type='hidden' name='loc_filter[]' value='"+value+"' /></div>");
            }
            else
            {
                //alert('not checked');
                $('#locations_filter #hidden_'+value).remove(); 
            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:46:20.863

`value`在您的 else 语句中未定义。将它的声明移到 if 语句之外。

```
$(document).ready(function() {
    $('.checked_locations').click(function() {
        var value = $(this).val();
        if ($(this).is(':checked')) {
            $('#locations_filter').append("<div id='hidden_" + value + "'><input type='hidden' name='loc_filter[]' value='" + value + "' /></div>");
        }
        else {
            //alert('not checked');
            $('#hidden_' + value).remove();
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T19:46:55.303

您正在尝试将 value 变量从不同的块引用到您首次定义它的位置：它超出了范围。您需要移出`var value = $(this).val();`if 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:48:12.107

只需使用以下代码：

```
$('#hidden_'+value).remove(); 
```

元素 id 必须是唯一的，因此您将引用一个唯一的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:48:46.233

```
else
{
    var value = $(this).val();
    $('#locations_filter #hidden_'+value).remove(); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T20:03:56.997

一种更优雅的方式来做你想做的事：

```
$(document).ready(function(){
     var element;
     $('.checked_locations').click(function(){
        if ($(this).is(':checked'))
        {
            var value = $(this).val();
            element= $('#locations_filter').append("<div id='hidden_"+value+"'><input type='hidden' name='loc_filter[]' value='"+value+"' /></div>");
        }
        else
        {
            //alert('not checked');
            element.remove(); 
        }
    });

}); 
```

这是一个[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)，它是动态语言中一种非常强大的技术。如果您打算在 javascript 中进行认真的开发，那么学习它会很好。

# python - 如何使用 scipy/numpy 或 sympy 执行非线性优化？

> ID：12942153
> 
> 赞同：8
> 
> 时间：2012-10-17T19:44:13.807
> 
> 标签：python, numpy, scipy, sympy

我正在尝试在 Python 中找到以下方程组的最佳解决方案：

```
(x-x1)^2 + (y-y1)^2 - r1^2 = 0
(x-x2)^2 + (y-y2)^2 - r2^2 = 0
(x-x3)^2 + (y-y3)^2 - r3^2 = 0 
```

给定点 (x,y) 和半径 (r) 的值：

```
x1, y1, r1 = (0, 0, 0.88)
x2, y2, r2 = (2, 0, 1)
x3, y3, r3 = (0, 2, 0.75) 
```

找到点 (x,y) 的最佳解决方案的最佳方法是什么使用上面的示例，它将是：
~ (1, 1)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T20:55:29.957

如果我正确理解您的问题，我*认为*这就是您所追求的：

```
from scipy.optimize import minimize
import numpy as np

def f(coord,x,y,r):
    return np.sum( ((coord[0] - x)**2) + ((coord[1] - y)**2) - (r**2) )

x = np.array([0,   2,  0])
y = np.array([0,   0,  2])
r = np.array([.88, 1, .75])

# initial (bad) guess at (x,y) values
initial_guess = np.array([100,100])

res = minimize(f,initial_guess,args = [x,y,r]) 
```

产生：

```
>>> print res.x
[ 0.66666666  0.66666666] 
```

您也可以尝试最小二乘法，它需要一个返回向量的目标函数。它想要最小化这个向量的平方和。使用最小二乘法，您的目标函数将如下所示：

```
def f2(coord,args):
    x,y,r = args
    # notice that we're returning a vector of dimension 3
    return ((coord[0]-x)**2) + ((coord[1] - y)**2) - (r**2) 
```

你会像这样最小化它：

```
from scipy.optimize import leastsq
res = leastsq(f2,initial_guess,args = [x,y,r]) 
```

产生：

```
>>> print res[0]
>>> [ 0.77961518  0.85811473] 
```

这与使用`minimize`和重写原始目标函数基本相同：

```
def f(coord,x,y,r):
    vec = ((coord[0]-x)**2) + ((coord[1] - y)**2) - (r**2)
    # return the sum of the squares of the vector
    return np.sum(vec**2) 
```

这产生：

```
>>> print res.x
>>> [ 0.77958326  0.8580965 ] 
```

请注意，`args`与 的处理方式略有不同`leastsq`，并且两个函数返回的数据结构也不同。[`scipy.optimize.minimize`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize)有关详细信息，请参阅文档[`scipy.optimize.leastsq`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.leastsq.html#scipy.optimize.leastsq)。

有关更多优化选项，请参阅[`scipy.optimize`](http://docs.scipy.org/doc/scipy/reference/optimize.html)文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-02T20:23:19.100

我注意到接受的解决方案中的代码不再起作用......我认为`scipy.optimize`自从发布答案以来可能已经改变了它的界面。我可能是错的。无论如何，我支持使用算法的建议`scipy.optimize`，并且接受的答案确实展示了如何（或者如果界面发生了变化，则曾经做过）。

我在这里添加了一个额外的答案，纯粹是为了建议一个使用`scipy.optimize`核心算法的替代包，但对于约束优化来说更加健壮。包是`mystic`. 其中一项重大改进是`mystic`提供了受限的**全局**优化。

首先，这是您的示例，与方式非常相似`scipy.optimize.minimize`，但使用了全局优化器。

```
from mystic import reduced

@reduced(lambda x,y: abs(x)+abs(y)) #choice changes answer
def objective(x, a, b, c):
  x,y = x
  eqns = (\
    (x - a[0])**2 + (y - b[0])**2 - c[0]**2,
    (x - a[1])**2 + (y - b[1])**2 - c[1]**2,
    (x - a[2])**2 + (y - b[2])**2 - c[2]**2)
  return eqns

bounds = [(None,None),(None,None)] #unnecessary

a = (0,2,0)
b = (0,0,2)
c = (.88,1,.75)
args = a,b,c

from mystic.solvers import diffev2
from mystic.monitors import VerboseMonitor
mon = VerboseMonitor(10)

result = diffev2(objective, args=args, x0=bounds, bounds=bounds, npop=40, \ 
                 ftol=1e-8, disp=False, full_output=True, itermon=mon)

print result[0]
print result[1] 
```

结果如下所示：

```
Generation 0 has Chi-Squared: 38868.949133
Generation 10 has Chi-Squared: 2777.470642
Generation 20 has Chi-Squared: 12.808055
Generation 30 has Chi-Squared: 3.764840
Generation 40 has Chi-Squared: 2.996441
Generation 50 has Chi-Squared: 2.996441
Generation 60 has Chi-Squared: 2.996440
Generation 70 has Chi-Squared: 2.996433
Generation 80 has Chi-Squared: 2.996433
Generation 90 has Chi-Squared: 2.996433
STOP("VTRChangeOverGeneration with {'gtol': 1e-06, 'target': 0.0, 'generations': 30, 'ftol': 1e-08}")
[ 0.66667151  0.66666422]
2.99643333334 
```

如前所述，in 的选择`lambda`会`reduced`影响优化器找到的点，因为方程没有实际的解。

`mystic`还提供将符号方程转换为函数的能力，其中生成的函数可以用作目标或惩罚函数。这是同样的问题，但使用方程作为惩罚而不是目标。

```
def objective(x):
    return 0.0

equations = """
(x0 - 0)**2 + (x1 - 0)**2 - .88**2 == 0
(x0 - 2)**2 + (x1 - 0)**2 - 1**2 == 0
(x0 - 0)**2 + (x1 - 2)**2 - .75**2 == 0
"""

bounds = [(None,None),(None,None)] #unnecessary

from mystic.symbolic import generate_penalty, generate_conditions
from mystic.solvers import diffev2

pf = generate_penalty(generate_conditions(equations), k=1e12)

result = diffev2(objective, x0=bounds, bounds=bounds, penalty=pf, \
                 npop=40, gtol=50, disp=False, full_output=True)

print result[0]
print result[1] 
```

结果：

```
[ 0.77958328  0.8580965 ]
3.6473132399e+12 
```

结果与以前不同，因为应用的惩罚与我们之前应用的不同`reduced`。在`mystic`中，您可以选择要应用的惩罚。

有人指出，方程没有解。您可以从上面的结果中看到，结果受到了严重的惩罚，因此这很好地表明了没有解决方案。但是，`mystic`有另一种方法可以在没有解决方案的情况下看到。而不是应用一个更传统的`penalty`，它惩罚违反约束的解决方案......`mystic`提供了一个`constraint`，它本质上是一个内核转换，它删除了所有不满足常量的潜在解决方案。

```
def objective(x):
    return 0.0

equations = """
(x0 - 0)**2 + (x1 - 0)**2 - .88**2 == 0
(x0 - 2)**2 + (x1 - 0)**2 - 1**2 == 0
(x0 - 0)**2 + (x1 - 2)**2 - .75**2 == 0
"""

bounds = [(None,None),(None,None)] #unnecessary

from mystic.symbolic import generate_constraint, generate_solvers, simplify
from mystic.symbolic import generate_penalty, generate_conditions    
from mystic.solvers import diffev2

cf = generate_constraint(generate_solvers(simplify(equations)))

result = diffev2(objective, x0=bounds, bounds=bounds, \
                 constraints=cf, \
                 npop=40, gtol=50, disp=False, full_output=True)

print result[0]
print result[1] 
```

结果：

```
[          nan  657.17740835]
0.0 
```

本质`nan`上表明没有有效的解决方案。

仅供参考，我是作者，所以我有一些偏见。但是，`mystic`它的存在时间几乎与`scipy.optimize`. 关键是，如果您需要一个更灵活、更强大的约束非线性优化器，我建议`mystic`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T21:30:04.147

这些方程可以看作是描述二维空间中三个圆圆周上的所有点。解决方案将是圆圈截取的点。

它们的圆的半径之和小于它们的中心之间的距离，所以圆不重叠。我在下面绘制了圆圈以按比例缩放： ![几何解](../Images/4dad8ac0d7a068fd9cf90729018cec9a.png)

没有满足这个方程组的点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T07:30:16.910

我通过以下方式制作了一个示例脚本。请注意，最后一行将找到最佳解决方案 (a,b)：

```
import numpy as np
import scipy as scp
import sympy as smp
from scipy.optimize import minimize

a,b = smp.symbols('a b')
x_ar, y_ar = np.random.random(3), np.random.random(3)
x = np.array(smp.symbols('x0:%d'%np.shape(x_ar)[0]))
y = np.array(smp.symbols('y0:%d'%np.shape(x_ar)[0]))
func = np.sum(a**2+b**2-x*(a+b)+2*y)
print func
my_func = smp.lambdify((x,y), func)
print 1.0/3*my_func(x_ar,y_ar)
ab = smp.lambdify((a,b),my_func(x_ar,x_ar))
print ab(1,2)

def ab_v(x):
   return ab(*tuple(x))

print ab_v((1,2))

minimize(ab_v,(0.1,0.1)) 
```

输出是：

```
3*a**2 + 3*b**2 - x0*(a + b) - x1*(a + b) - x2*(a + b) + 2*y0 + 2*y1 + 2*y2
1.0*a**2 - 0.739792011558683*a + 1.0*b**2 - 0.739792011558683*b    +0.67394435712335

12.7806239653
12.7806239653
Out[33]:
  status: 0
 success: True
 njev: 3
 nfev: 12
 hess_inv: array([[1, 0],
   [0, 1]])
 fun: 3.6178137388030356
 x: array([ 0.36989601,  0.36989601])
 message: 'Optimization terminated successfully.'
 jac: array([  5.96046448e-08,   5.96046448e-08]) 
```

# ios - iOS 应用内购买：多个帐户

> ID：12942155
> 
> 赞同：1
> 
> 时间：2012-10-17T19:44:20.420
> 
> 标签：ios, in-app-purchase

我有一个单一的 iOS 应用程序的概念，多个独立的供应商可以在其中提供他们的商品。因此，最终用户可以在应用程序中购买东西，但他购买的东西将由不同的供应商提供。理想情况下，应用程序的配置方式是，当用户从提供商 A 购买东西时，该提供商会收到钱，而不是我，即应用程序的开发者和提交者。用户还可以选择提供商 B 的产品，然后提供商 B 将获得用户为特定应用内购买支付的钱。显然，优势在于，我不必处理收集所有资金，然后将正确的金额转移给各个提供商。并且必须证明这些个人提供者我给了他们应得的份额。这是一个直接的方案，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:52:41.360

**我有一个单一的 iOS 应用程序的概念，多个独立的供应商可以在其中提供他们的商品。**

从字面上看，您确实需要阅读应用内购买服务条款。您不得通过 IAP 提供实物商品。

# python - Blender的“罗技G25赛车轮”python api？

> ID：12942159
> 
> 赞同：1
> 
> 时间：2012-10-17T19:44:39.990
> 
> 标签：python, blender, bulletphysics, logitech

我正在使用 python 脚本在 Blender 中进行汽车模拟项目。

到目前为止，我可以使用简单的键盘传感器控制我的车辆（汽车），但现在我想使用“Logitech G25 赛车方向盘”设备来控制我的汽车。我在谷歌上搜索了“Logitech G25 赛车轮 python api”，但没有找到任何东西。

有没有朋友可以帮助我或可以发布“罗技G25赛车轮python api”的链接？

> 操作系统/平台：Windows 7、2GB Ram、双核处理器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:32:15.647

正如 jsbueno 所提到的，您不需要为您的特定设备提供 API。只要您能找到一个可以与通用游戏手柄或操纵杆驱动程序交互的设备，就足够了。

我发现了一些您可能感兴趣的选项，但由于不熟悉 Blender，我不确定您能否轻松地将它们集成到您的项目中。他们是：

*   [pygame](http://www.pygame.org/news.html)有一个[操纵杆 API](http://www.pygame.org/docs/ref/joystick.html)
*   [Python 计算机图形工具包](http://cgkit.sourceforge.net/)也有一个[操纵杆 API](http://cgkit.sourceforge.net/doc2/joystick.html)
*   我找不到太多的文档，但[pyglet](http://code.google.com/p/pyglet/)似乎[支持 DirectInput](http://code.google.com/p/pyglet/source/browse/pyglet/input/directinput.py?r=381fcdbf382c51035f3ba8ac097f06fde4010d71)
*   还有[DirectPython](http://directpython.sourceforge.net/)及其表面上维护得更好的继任者 DirectPython11（也从该页面链接），但似乎都没有太多文档

不幸的是，没有什么让我觉得特别容易使用并且非常适合您的特定需求，但是这些项目中的一个至少可以作为一个有用的起点。

# android - 对 Android 操作栏不太满意...如何减小它的大小

> ID：12942160
> 
> 赞同：4
> 
> 时间：2012-10-17T19:44:42.940
> 
> 标签：android, android-actionbar

我不太喜欢 Android 提出的新的 Action Bar——而且显然迫使我在更高的 API 级别中使用。但是，由于它看起来我被它困住了——我没有更多的菜单按钮，我需要我失去的功能，我想尽量减少烦恼因素。

谁能告诉我如何不显示图标/徽标？压制标题很容易，但徽标仍然太多 - 并且提供零帮助。

另外，谁能告诉我如何降低酒吧的高度？目前，它大约是 1/4 英寸（对于公制类型来说大约是半厘米），但这很容易达到所需大小的两倍——尤其是如果我可以放弃图形的话。

最后，在我的屏幕左侧和第一个菜单项之间有一个很大的空白区域。如果我的五个菜单项适合显示屏，这不会打扰，但自然不会。有人知道如何鼓励我的软件将菜单项向左推一点以使其适合吗？

谢谢，
R。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T19:49:32.343

您可以使用[`getActionBar().setDisplayShowHomeEnabled(false)`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowHomeEnabled(boolean))摆脱按钮。

至于Action Bar的高度，我不相信不设置新主题就可以改变。在Android中`Theme.Holo`，它有一个属性[`<item name="actionBarSize">56.0dip</item>`](http://developer.android.com/reference/android/R.attr.html#actionBarSize)。如果您将该主题扩展到您自己的主题中，您*应该*能够更改此设置。（请记住，这可能会贬低用户体验，因为人们期望它具有一定的大小。）

至于你的最后一个问题，我相信图标间距是固定的。你能准确地说明“一个巨大的空白空间”是什么意思吗？它们应该均匀地分布在整个酒吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:53:15.117

为什么不简单地隐藏操作栏并在活动布局中提供自己的菜单？在我看来，您想在圆盘中放入一个正方形...

只需将 ActionBar 用于它的用途。如果您不喜欢它，请将其隐藏并自行控制。

我的意思是，没有标题，没有左侧图标，......那么使用它有什么意义呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:52:09.393

您实际上*可以*删除操作栏：

```
ActionBar actionBar = getActionBar();
actionBar.hide(); 
```

# android - Android xml - 首选项 - 更改颜色

> ID：12942165
> 
> 赞同：0
> 
> 时间：2012-10-17T19:44:57.770
> 
> 标签：android

欢迎。

我有一个偏好列表，并且有我想使用“颜色选择器”AmbilWarna 的“更改背景颜色”。我知道如何实现它。但是您单击以打开对话框的首选项如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:46:53.330

对于一个简单的对话框，它将是`List Preference`

# google-app-engine - 更新子模型时更新 ComputedProperty 成本最低的方法？

> ID：12942166
> 
> 赞同：0
> 
> 时间：2012-10-17T19:44:58.580
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我有一个结构如下的父子关系的数据模型：

```
Container
  Metric
    Value 
```

这些模型中的每一个都有一个“状态”字段，但只有 Value 模型允许在该字段上输入；其他模型的 ComputedProperty 会根据其祖先值模型中的“状态”字段而变化。就目前而言，当直接读取模型时（就像@property 行为一样），我会在父级上获得当前结果，但是当模型是查询的一部分时，结果会过时。

所以当子模型的状态更新时，我需要更新父模型的“状态”字段。我知道我可以`_post_put_hook()`在 Value 模型中添加一个，并且`put()`只要它更新就只添加所有的父母，但这似乎很昂贵。

*   有没有办法让父母“看”孩子？
*   在“状态”属性上查询父母是否有更便宜的解决方法？（所以我不必使用 ComputedProperty）
*   我使用的模型太多了吗？我是否应该将它们作为 StructuredProperties 混合在一起，以便一个 put() 放置所有内容？（虽然我也遇到了问题，在孩子之前更新父母的状态）
*   还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:06:57.340

对于索引，您可以获得最终的一致性，这意味着它们通常会在一秒钟左右更新，但不能保证。

使用您当前的设计（取决于您的一致性要求），您可能必须以事务方式进行状态更新，可能使用 _pre_put_hook（希望它能够让您开始事务）。这是 3 次写入，但如果您必须更新实体组中的 3 个嵌套实体，则无法解决此问题。

我认为没有任何类型的“监视”或自动事件/触发器处理可用。

如果这始终是 1:1 关系，则将其制成一个始终具有状态的单个对象可能是有意义的。潜在的缺点是每次更新时都必须写回所有内容，这对于大对象来说开销更大。优点是能够查询任何属性。

如果您需要查询每个级别的状态和其他属性，您需要在任何地方使用状态，否则您可以将状态移动到必须可用于查询的实体。

如果您只查询状态而不查询 Container 或 Metric 的其他属性，您可以执行类似的操作

```
[value_key.parent().parent().get() for value_key in Value.query().get(keys_only=True)] 
```

从值查询中获取容器列表。

# javascript - 在angularjs中使用来自rest服务的JSON对象

> ID：12942173
> 
> 赞同：7
> 
> 时间：2012-10-17T19:45:11.840
> 
> 标签：javascript, json, rest, angularjs

我有一个休息服务返回一个数字的 JSON

```
{"uptime":"44"} 
```

在网址下可用：

```
http://localhost/uptime 
```

我想使用angularJS在页面上显示这个值。

我写了一个资源来从这个 rest url 获取数据：

```
angular.module('utilService', ['ngResource']).
factory('UtilService', function($resource) {
    var UtilService = $resource('/uptime', { },
        {
            'get' : { method: 'GET', params: { format: '.json' } , isArray : false }
        }
    )

    UtilService.loadUptime = function(cb) {
        return UtilService.get();
    }

    return UtilService;
}); 
```

但是当我在Controller中使用它时：

```
angular.module('log', ['logService', 'utilService']);

function UptimeCtrl($scope, UtilService) {
    var time = UtilService.loadUptime();
    $scope.uptime = time;
} 
```

我在页面上看到的只是 {"uptime":"44"}

我想我需要将接收到的对象提取/转换为 JSON 并获取它的“正常运行时间”属性。但我尝试了 JSON.parse, time.uptime, time['uptime'] 并没有成功。

我要么在做完全错误的事情，要么在这里遗漏了一些基本问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:01:50.660

`$resource`只会返回服务器返回的任何对象，在使用 $resource. 但即使不解析数据，您也应该能够显示您需要的内容。以您的代码示例为例，`{{uptime.uptime}}`模板中的表达式应该可以解决问题。

# java - 在 Windows 8 平板电脑上运行 java swing 应用程序

> ID：12942178
> 
> 赞同：9
> 
> 时间：2012-10-17T19:45:39.490
> 
> 标签：java, swing, windows-8

我有一个**java swing**应用程序，它在 windows 7 计算机上运行良好，我相信它应该在 windows 8 计算机上运行（对吗？）

我将如何移植此应用程序以使其在 Windows 8 平板电脑上运行，如 Microsoft Surface 平板电脑，可以在 Windows 8 平板电脑上运行摇摆应用程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T19:48:47.747

据我所知，为 Windows 8 创建 Metro 风格应用程序的唯一方法是使用 WinRT，目前唯一支持的环境是 .NET，因此目前 Swing 应用程序只能在 Windows 8 的桌面应用程序中运行，但它们不是“应用程序”，它们没有无缝集成到操作系统中，也无法通过 Microsoft Store 进行部署。

如果正如您在评论中所说，您不想将应用程序作为真正的应用程序运行，而只是想通过经典桌面运行应用程序，那么购买一台装有 Windows 8 pro 的平板电脑就足够了，您将能够以“传统”模式运行应用程序（通过桌面的旧方式）...

# c# - FormatterGenerator 抛出异常

> ID：12942181
> 
> 赞同：0
> 
> 时间：2012-10-17T19:45:44.817
> 
> 标签：c#, asp.net, dotnetnuke

DotNetNuke 页面上有一个线程描述[了](http://www.dotnetnuke.com/Resources/Forums/forumid/107/postid/458730/scope/posts.aspx)正在处理的错误，尽管这些解决方案都没有帮助并且线程似乎已经死了。

我发现在尝试访问站点设置或单击您的登录名以转到个人资料时，该错误最常发生。

错误如下：

发生严重错误。'FormatterGenerator' 的类型初始值设定项引发了异常。

![格式化生成器](../Images/524faf2b5ec2b4105681aae57da2de97.png)

# if-statement - 确定光标是否在 Raphael.js 中的某个元素上方

> ID：12942189
> 
> 赞同：1
> 
> 时间：2012-10-17T19:46:06.470
> 
> 标签：if-statement, hover, raphael

如何判断您的光标是否位于 Raphael.js 中的某个元素上？

```
if(mouse_is_over){
   //do this 
}
else{   
   //do this 
} 
```

理想情况下，我想测试鼠标是否在我命名为“c”的圆圈上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:33:20.207

我强烈建议使用 Raphael 的[Element.data](http://raphaeljs.com/reference.html#Element.data)方法将您的私有、特定于圆圈的数据与每个项目相关联，然后在悬停处理程序中对这些数据进行操作（手动检测与 getElementByPoint 的交集在鼠标悬停处理程序中可能很昂贵）。你可以存储任何东西`data`：

```
var circle = paper.circle( ... );
circle.data( 'name', "My name is Jonas." ); // store a string!
circle.data( 'dataset', { ... } );          // store an object literal!
circle.data( 'click_handler', function()
    {
        console.log("Store a handler function!" );
    } ); 
```

此时，游戏变得非常容易。无论您使用 Raphael 的内置悬停处理...

```
circle.hover( function()
    {
        console.log("Just moved over '" + this.data("name") + "'" );
    }, function()
    {
        console.log("Just moved out of '" + this.data("name") + "'" );
    } ); 
```

...或鼠标悬停事件，例如，由 jQuery...

```
//  Don't forget to translate page coordinates relative to the paper!
var element = paper.getElementByPoint( x, y );
if ( element && element.data("name") == "c" )
{
    // bah, humbug
} 
```

...逻辑是一样的。只需查询您与元素关联的应用程序数据并做您的事情。

我碰巧已经有一个可怕的小脚本，可以在随机位置为圆圈设置动画，我[对其进行了改装](http://voidblossom.com/tests/circleHover.php)以适应您的场景。

# javascript - Javascript增加事件索引

> ID：12942190
> 
> 赞同：1
> 
> 时间：2012-10-17T19:46:07.170
> 
> 标签：javascript, arrays, indexing, increment, quartz-composer

我试图找出一种基于事件（例如鼠标左键单击点击区域）来增加数组索引的方法。下面的代码将所有内容设置为零，并在单击鼠标时将相应的索引短暂更改为 1，但一旦释放鼠标，则更改回 0。我想要发生的是每次索引值增加时，它都会存储其当前值而不是切换到 0。到最后，数组应该是混合数字。任何人都可以提供和帮助吗？我在 Quartz Composer 环境中工作，但仍在 javascript 补丁中。

```
function (__structure out) main (__structure Pos, __boolean Left, __number X, 
          __number Y, __number W, __number H, __number ShiftX, __number ShiftY) {

    if (!_testMode) {
        len = Pos.length;
        Hits = new Array()
            for (i = 0; i < len; i++) {
                Hits[i] = 0 
            }
            for (j = 0; j < len; j++) {
                if (Pos[j][1] >= (X-(W/2)) && Pos[j][1] <= (X +(W/2)) && 
                    Pos[j][0] >= (Y-(H/2)) && Pos[j][0] <= (Y +(H/2)) && Left) { 
                Hits[j]++
                }
            }

    result = new Object();
    result.out = Hits;
    return result;
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:52:18.850

我不知道 Quartz Composer，但我确实知道您的代码有什么问题。每次触发此事件时，您确实将数组中的所有值设置回 0。

因此，您应该将以下代码**行从您的方法**中取出并放到更全局的范围内（在当前类中或在真正的全局范围内）。

```
Hits = new Array()
for (i=0;i<len;i++){
    Hits[i] = 0
} 
```

所以`Hits`应该是一个非本地数组，每个`Hits[i]`to的初始化`0`应该只做一次；在执行开始时。

# django - Django 详细请求日志记录

> ID：12942195
> 
> 赞同：12
> 
> 时间：2012-10-17T19:46:30.043
> 
> 标签：django, logging

[问题与此](https://stackoverflow.com/questions/11336672/the-logs-of-post-get-requests-from-django-application-on-apache)大致相同，但是我希望 django 将其详细的请求信息记录到我的`logging.FileHandler`- 即，而不必查看我的网络服务器日志。我尝试设置默认记录器`django.requests`以将 4xx 和 5xx 请求信息以外的内容写入处理程序，但未能成功。

因此，在浏览文档并摆弄记录器和级别之后，我得出的结论是 django 实际上并没有制作很多日志语句 - 所以我希望确认 django 不会在内部记录非错误场景要求。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T20:05:40.047

我不能说我进行了详尽的搜索，但从`django/core/handlers/base.py`django 1.4.1 中我可以看到，`django.request`记录器确实仅用于警告和错误条件（4xx/5xx）。

也就是说，编写可以为您进行各种日志记录的中间件是微不足道的。让你开始的一些非常简单的事情可能只是：

```
from time import time
from logging import getLogger

class LoggingMiddleware(object):
    def __init__(self):
        # arguably poor taste to use django's logger
        self.logger = getLogger('django.request')

    def process_request(self, request):
        request.timer = time()
        return None

    def process_response(self, request, response):
        self.logger.info(
            '[%s] %s (%.1fs)',
            response.status_code,
            request.get_full_path(),
            time() - request.timer
        )
        return response 
```

# android - 在 Android 上使用 MediaCodec API 解码 AAC

> ID：12942201
> 
> 赞同：12
> 
> 时间：2012-10-17T19:46:59.653
> 
> 标签：android, aac

我正在尝试使用 Android 上的 MediaCodec API 来解码 AAC 流。（它是原始 AAC。）我尝试使用 MediaFormat.createAudioFormat() 创建要传递给 MediaCodec.configure() 的格式对象，但在使用 AAC (audio/mp4a-latm) 时我不断收到错误消息。（虽然它适用于 MP3（音频/mpeg）......）

最后，我为 AAC 文件创建了一个 MediaExtractor，并查看了它生成的格式对象。我看到它包含一个 ByteBuffer 的键“csd-0”，它由两个字节组成，两个字节的值都是 0x12。如果我在用于配置 AAC 编解码器的格式对象中包含该键和值，则一切正常。

有谁知道发生了什么？该文档指出我不应该配置该密钥。有没有人有指向 MediaCodec 示例的指针来解码 AAC 文件而不使用 MediaExtractor 生成格式对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T03:55:10.910

是的，编解码器配置 2 个字节是您收到的初始值。是的，它是原始的 aac 数据块。您可以看到我在编码时如何得出以下格式。我最初尝试遵循文档，该文档说它们是 latm 格式，并尝试对其进行解析。然后我在 android 文档上发现了一些“差异”，说输出确实是原始块。那时知道，这只是为我的需要选择一个容器的问题。特别是，我需要 adts 容器而不是 flv 或 mp4。

将有效负载数据复制到一个对您的容器足够大的数组中，只需添加您的位。因此，在互联网上搜索我的解决方案后，我生成了以下代码：

```
profile = (configParams[0]>>3)&0x1f;

frequency_index = (this.configParams[0]&0x7) <<1 | (this.configParams[1]>>7) &0x1;

channel_config = (this.configParams[1]>>3) &0xf;

int finallength = encoded_length + 7;       
ENCodedByteArray[0] = (byte) 0xff;
ENCodedByteArray[1] = (byte) 0xf1;
ENCodedByteArray[2] = (byte) ( ((profile - 1) << 6) + (frequency_index << 2) +(channel_config >> 2));
ENCodedByteArray[3] = (byte) (((channel_config & 0x3) << 6) + (finallength >> 11));
ENCodedByteArray[4] = (byte)( (finallength & 0x7ff) >> 3);
ENCodedByteArray[5] = (byte) (((finallength & 7) << 5) + 0x1f) ;
ENCodedByteArray[6] = (byte) 0xfc; 
```

使用这样的东西：

```
byte chunkADTS[]=new byte[info.size + 7];
fillInADTSHeader(chunkADTS,info.size);
outputBuffers[bR].get(chunkADTS,7,info.size);
buffer.pushData(chunkADTS); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T03:10:46.343

我用下面的代码，加上去掉ADTS头的ES，它可以正常工作，但我真的不知道为什么要设置“csd-0”，否则编解码器会出错

```
 decoder = MediaCodec.createDecoderByType("audio/mp4a-latm");
      mMediaFormat = MediaFormat.createAudioFormat("audio/mp4a-latm", 44100,2);
      byte[] bytes = new byte[]{(byte) 0x12, (byte)0x12};
      ByteBuffer bb = ByteBuffer.wrap(bytes);
      mMediaFormat.setByteBuffer("csd-0", bb); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-01T18:49:48.607

在我测试的少数设备上解码/播放 AAC 内容没有问题。我的方法是首先使用 MediaExtractor 来设置数据源，然后初始化 MediaFormat，最后在循环中完成工作，其中缓冲区从 MediaCodec 传入/传出。对于我使用 null 的表面，因为这只是一个音频播放器，所以没有什么可以显示的。

# android - 在 Broadcastreceiver 中访问 SQL

> ID：12942202
> 
> 赞同：4
> 
> 时间：2012-10-17T19:47:13.130
> 
> 标签：android, sql, broadcastreceiver

在 a`BroadcastReceiver`中，我收到拨出电话的号码。

我想将此电话号码与我存储在 SQL 数据库中的号码进行比较。

可悲的是，我无法访问`BroadcastReceiver`我的数据库。在其他活动中它工作正常。

这是代码`BroadcastReceiver`：

```
 public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        //[ getting "string phonenumber" (works)]

        mySQLiteAdapter = new SQLiteAdapter(context); 
        mySQLiteAdapter.openToRead();
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        Cursor cursor = sqLiteDatabase.rawQuery("SELECT * FROM MYDATABASE_TABLE =" +    potatos, null);

        if(cursor.getCount() > 0) {

            cursor.moveToFirst();
            while(!cursor.isAfterLast()) {
                cursor.moveToNext();
            }
        }
    }
} 
```

代码在`SQLiteAdapter`

```
public SQLiteAdapter openToRead() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    return this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:57:30.130

确保您使用的是`Context`in`onReceive(...)`方法而不是 NOT `this`。

这样做的原因是它`this`不是`Context`在 a 中`BroadcastReceiver`，您需要一个来访问您的数据库。它在 an 内工作，`Activity`因为 an`Activity`是`Context`

此外，请确保修复不正确且将失败的查询。

```
Cursor cursor = sqLiteDatabase.rawQuery("SELECT * FROM " + MYDATABASE_TABLE + " where " + KEY_CONTENT1 + "=" + phonenumber, null); 
```

其中 KEY_CONTENT1 是 MYDATABASE_TABLE 中电话号码字段的常量。

```
SQLiteAdapter mySQLiteAdapter;
@Override
public void onReceive(Context context, Intent intent) {
    mySQLiteAdapter = new SQLiteAdapter(context); 
    mySQLiteAdapter.openToRead();
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();

    Cursor cursor = sqLiteDatabase.rawQuery("SELECT * FROM " + MYDATABASE_TABLE + " where " + KEY_CONTENT1 + "=" + phonenumber, null);
} 
```

# linux - 将输出转换为 Excel 工作表的脚本

> ID：12942209
> 
> 赞同：0
> 
> 时间：2012-10-17T19:47:35.137
> 
> 标签：linux, excel, bash

我有包含以下数据的文件：

```
-------------------[ server10 ]-------------------
user1
user2
user99
user100
-------------------[ server20 ]-------------------
user1
user2
user10
user4
-------------------[ server30 ]-------------------
user10
user30
user40 
```

我想将此输出转换为 Excel 表，以便我可以将 ti 提交给我的管理层。知道怎么做吗？？？

我希望在 Excel 工作表中输出以下格式：

```
Hostname            users
server10            user1
                    user2
                    user99
                    user100
server20            user2
                    user10
                    user4 
...
... 
```

直到这里“大卫”帮助我使用 Python (openpyxl)。但是在这里我有一个新列（上次登录时间），我想在 excel 中添加它，所以这里是示例。

```
 -------------------[ server10 ]-------------------
    user1
    never
    user2
    Oct 17, 2011
    user99
    Jan 01, 2007
    user100
    Feb 02, 2010
    -------------------[ server20 ]-------------------
    user1
    never
    user2
    never
    user10
    jul 17, 2001
    user4
    Dec 25, 1999
    -------------------[ server30 ]-------------------
    user10
    Aug 10, 2012
    user30
    never
    user40
    never 
```

在excel中它会像。

```
 Hostname            users           Last logon
    server10            user1            never
                        user2            Oct 17, 2011
                        user99           ...
                        user100          ...
    server20            user2
                        user10
                        user4 
    ...
    ... 
```

注意：这里的用户名可能不同，我给了你示例 userX，但它会是 spatel、jim、eric 等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:19:42.753

另一种选择是`openpyxl`在 python 中使用该模块：

```
from openpyxl import Workbook
import fileinput
import re

wb = Workbook()
ws = wb.get_active_sheet()

servercol = 0
usercol = 1
lastlogoncol = 2
currentrow = 1

# write column headers
ws.cell(row=0, column=servercol).value = 'server'
ws.cell(row=0, column=usercol).value = 'user'
ws.cell(row=0, column=lastlogoncol).value = 'last logon'

# process each line and copy to spreadsheet
for line in fileinput.input("somedata.txt"):
    # user regex to extract server from line
    m = re.match("^[-\[\s]+(?P<server>server\d+)[-\]\s]+$", line)
    n = re.match("^\s+user\d+", line)
    # if server match then write to server column
    if(m):
        c = ws.cell(row = currentrow, column = servercol)
        c.value = m.group('server')
    # elif user match, then write to user column
    elif(n):
        c = ws.cell(row = currentrow, column = usercol)
        c.value = line
    # else write to last logon column
    else:
        c = ws.cell(row = currentrow, column = lastlogoncol)
        c.value = line
        currentrow = currentrow + 1

wb.save('mydata.xlsx') 
```

**注意：** 这有点脆弱，因为它依赖于始终遵循“用户”记录和“最后登录”记录的内联数据。如果不遵循此模式，则该过程将失败。例如，如果您有两个连续的用户记录，中间没有“上次登录”记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:12:15.270

我认为最简单的方法是使用 CSV（逗号分隔值）格式。这个想法是像这样重新格式化你的输出：

```
server 10 , user 1
 , user 2
 , user 3
 , user 4
server 20, user 1
, user 2
, user 3
etc. 
```

然后将 CSV 文件导入 excel，选择“CSV”，然后选择“格式化”并确保值用逗号分隔。让我们在下文中调用 tocsv.sh 脚本：

```
#!/bin/bash 
cat $1 | while read line
do
    user=''
    # if the line starts with ----, remove ---[ and ]----
    testServer=$(sed -n '/---/p' <<< $line)
    if [ -n "$testServer" ]; then
    server=$(sed '/----/ s/-*\[// ; s/\]-*//' <<< $line)
    user=''
    else 
    user=$line
    fi

    if [  -n "$user" ]; then
    echo $server ", "$user
    server=''
    fi

done 
```

如果 dataserver.txt 是数据的文本文件，那么您可以： `./tocsv.sh dataserver.txt > dataserver.csv` 并且您可以将 dataserver.csv 导入 Excel。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:09:07.113

此解决方案假定您希望数据的每一行占据同一列中的一个单元格。

1.  如果您还没有这样做，请将您的数据保存为文本 (*.txt) 文件。
2.  启动 Excel
3.  从“文件”选项卡或菜单中选择“打开”（取决于版本）
4.  项目清单
5.  在“打开”对话框中，找到下拉菜单并选择“文本文件”选项
6.  使用对话框控件导航到包含文本文件中数据的目录
7.  选择文本文件并单击打开按钮，这将启动导入向导
8.  在第一个屏幕上，选择“分隔”，然后单击下一步
9.  在第二个屏幕上单击下一步
10.  在最后一个屏幕上单击完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:07:41.813

Python中有一些现有的库可以帮助您解决这个问题：

[http://www.python-excel.org/](http://www.python-excel.org/)

我不知道任何用于生成 excel 文件的简单 shell 脚本解决方案。

# html - 如何使 DIV 中的子元素占据容器的全部大小

> ID：12942210
> 
> 赞同：1
> 
> 时间：2012-10-17T19:47:44.133
> 
> 标签：html, css

我有一个输入元素，我希望它占据父 DIV 的完整大小。我如何实现这一目标？我试过`width 100%`了，但它不起作用。我面临的问题是父母有蓝色背景，孩子有黄色背景。结果，我可以在边缘看到一些蓝色轮廓。我该如何摆脱它。

我为子元素添加了一个类。像这样的东西：

```
.input-editable { background-color: some-color; width: 100%; } 
```

这个元素被包裹在一个 div 中。该 DIV 具有在边缘可见的背景颜色集。我不希望这种情况发生。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:54:52.497

只需制作`input`一个块元素，它就会起作用 -[**演示**](http://jsfiddle.net/JgXrT/)

```
.div input {
    display: block;
    width: 100%;
    border: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:55:43.450

试试下面的代码：（http://jsfiddle.net/MUDey/）

```
<!doctype html>
<html>
<head>
    <style>
        *{padding:0;margin:0;}
        #parent { width: 75%; height: auto; background-color: Blue; }
        .input-editable {
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div id="parent">
        <input type="text" class="input-editable" value="Show us your HTML" />

    </div>
</body>
</html> 
```

请发布您的 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:04:12.837

我想你要找的是

```
display: block;
width: 100%; 
```

这将使您的输入元素跨越父元素的整个宽度。

[http://jsfiddle.net/pTQWM/](http://jsfiddle.net/pTQWM/)

请注意，如果您在输入元素上有填充，则最好也使用它：

```
box-sizing: border-box; 
```

# c# - MVC4 控制器/路由不工作

> ID：12942218
> 
> 赞同：1
> 
> 时间：2012-10-17T19:48:12.397
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我的访问控制器：

```
public ActionResult Index(Visits visits, int? id)
{
    ....
    return View(v);
} 
```

这是我的路线配置

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", 
                        id = UrlParameter.Optional }
    );
}

Works: http://localhost:49225/Visits
Does not work: http://localhost:49225/Visits/123 
```

自定义路由是什么（并强制它是一个整数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:12:42.443

您需要添加一条新路线才能使其正常工作。

目前，这将起作用：

```
/Visits/Index/123 
```

我相信您需要添加以下内容：

```
routes.MapRoute(
    name: "VisitsDefault",
    url: "Visits/{id}",
    defaults: new { controller = "Visits", action = "Index", 
                    id = UrlParameter.Optional }
); 
```

这是假设您已经有一个用于访问的模型绑定器。

# datetime - 如果日期时间字段为空，如何隐藏面板

> ID：12942222
> 
> 赞同：0
> 
> 时间：2012-10-17T19:48:44.153
> 
> 标签：datetime, xpages

我有一个计算字段，它显示来自文档数据源 #{doc.LastEditedAt} 的日期时间值

computedField 被一个面板包围，如果 LastEditedAt 字段为空，我想通过将 render 属性设置为 false 来隐藏面板，该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T06:45:27.813

我同意 Per 的评论：这“听起来”是一个简单的问题，所以我将给出一个简单的答案。如何设置呈现为：

```
#{javascript:doc.getFirstItem("LastEditedAt").getDateTimeValue() != null} 
```

您可能还想通过检查该字段是否可用来扩展它。

# php - 在仍然允许 html 的同时删除 XSS 攻击？

> ID：12942225
> 
> 赞同：4
> 
> 时间：2012-10-17T19:48:51.783
> 
> 标签：php, xss

好的，现在我进退两难了，我需要允许用户插入原始 HTML，但也要阻止所有 JS - 不仅仅是脚本标签，还有来自 href 等。目前，我所知道的是

```
htmlspecialchars($string, ENT_QUOTES, 'UTF-8'); 
```

但这也会将有效标签转换为编码字符。如果我使用striptags，它也不起作用，因为它***会删除***标签！（我知道你可以允许标签，但问题是如果我允许任何标签，比如`<a></a>`人们可以向其中添加恶意 JS。

我可以做些什么来允许 html 标签但没有 XSS 注入？我已经计划了一个功能：`xss()`并用它设置了我的网站模板。它返回转义的字符串。（我只需要*逃跑*的帮助:)）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:06:42.497

相关：[防止 XSS 但仍允许 PHP 中的一些 HTML](https://stackoverflow.com/questions/3847631/preventing-xss-but-still-allowing-some-html-in-php?rq=1)

[HTMLPurifier Docs](http://htmlpurifier.org/docs)中的示例代码：

```
require_once '/path/to/HTMLPurifier.auto.php';

$config = HTMLPurifier_Config::createDefault();
$purifier = new HTMLPurifier($config);
$clean_html = $purifier->purify($dirty_html); 
```

您可以将该代码用作`xss(...)`方法中的参考。

# javascript - 从 iframe 中检索 PDF

> ID：12942226
> 
> 赞同：3
> 
> 时间：2012-10-17T19:48:51.907
> 
> 标签：javascript, jquery, asp.net, pdf, iframe

是否可以从 iframe 中检索 PDF 并将其提交回服务器？

我的用例是向用户显示一个 PDF 表单，并让他们在填写后提交表单。我还没有发现任何迹象表明这是可能的，但我目前仍然充满希望。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:55:05.790

您可以在生成 PDF 时在其内部添加一个提交按钮，并以与处理 HTML 表单相同的方式处理来自您的 PDF 表单的数据。

为了实现这一点，您需要在 PDF 表单中添加按钮注释，并为其附加“提交表单”操作。有关详细信息，请参阅第 8 章 - Adob​​e的[PDF 参考文档的](http://www.adobe.com/devnet/pdf/pdf_reference_archive.html)*交互式表单*。

然后，您可以创建一个处理来自 PDF 表单的输入的 asp.net 页面。请注意，可以在 asp.net`Request`对象中使用 PDF 表单的字段名称来收集数据。

如果您想提交整个文件，可以通过在需要添加到 PDF 文件的“提交表单”操作中设置一个标志来实现，但我一般不建议这样做，因为它会消耗更多来自您的服务器的带宽。

# eclipse - Flash Builder 是独立的 Eclipse Indigo 还是 Helios

> ID：12942228
> 
> 赞同：1
> 
> 时间：2012-10-17T19:49:03.670
> 
> 标签：eclipse, flash-builder

我安装了 Flash Builder 4.6，并且正在尝试安装 Eclipse Marketplace Client。它为我提供了 Indigo 和 Helios 的更新位置。Flash Builder 4.6 是基于哪个 Eclipse 构建的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:01:18.393

Flash Builder 4.6 在 Eclipse Indigo 上运行，但仍支持将 Helios 作为插件。

```
Eclipse Platform
Version: 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f
Build id: I20110613-1736 
```

[Flash Builder 4.6 发行说明](http://helpx.adobe.com/flash-builder/release-note/flash-builder-4-6-release.html)状态：

> Flash Builder 4.6 支持作为插件安装到现有 Eclipse 实例
> 
> *PC：（*注意：您的 Eclipse 副本必须是 32 位版本 3.6/3.6.1/3.6.2/3.7，并且必须包含一个名为“dropins”的文件夹）
> 
> *Mac：（*注意：您的 Eclipse 必须是 3.6/3.6.1/3.6.2/3.7 版本，32 位，Cocoa，包含一个名为“dropins”的文件夹）。

[根据 Flash Builder 4.6 中的新增功能，Flash](http://www.adobe.com/devnet/flash-builder/articles/whatsnew-flashbuilder-46.html) Builder 4.6 更新到 Eclipse 3.7

> 当您安装 Flash Builder 4.6 时，您会注意到其中包含 Eclipse 3.7 的更新版本。但是，Flash Builder 4.6 仍然支持 Eclipse 3.6 作为插件，以防您还没有准备好升级。

# javascript - 多个按键在左侧和空格上不起作用？

> ID：12942229
> 
> 赞同：1
> 
> 时间：2012-10-17T19:49:17.760
> 
> 标签：javascript, javascript-events

当我同时按下左箭头和空格时，我有一个奇怪的问题。为什么空格不起作用？我这里试了一下[http://jsfiddle.net/vor0nwe/mkHsU/](http://jsfiddle.net/vor0nwe/mkHsU/)也有同样的问题，大家可以试试！如果你按向上、向左箭头和 ctrl 就可以了！左 + 上 + g 不！这发生在Firefox，Chrome等......为什么？

很可能是键盘故障（见正确答案）！我尝试在 txt 文档中按左（按住）和右移（按住）和 x... x 没有出现[http://xahlee.blogspot.it/2010/06/keyboard-key-ghosting.html](http://xahlee.blogspot.it/2010/06/keyboard-key-ghosting.html)我的键盘是罗技 200 :-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:53:48.033

这实际上可能是您的键盘，这是一种称为“键幻影”的现象，某些组合键在某些键盘上不起作用。

# ruby-on-rails - 缓存 Memcache 中的 caches_action 片段和文件系统中的资产

> ID：12942231
> 
> 赞同：1
> 
> 时间：2012-10-17T19:49:27.040
> 
> 标签：ruby-on-rails, caching

在 Heroku、Dalli gem 和 Memcachier 上使用 Rails 3.1.1。

我正在尝试解决[密钥从 Memcachier 消失](https://stackoverflow.com/questions/12926781/cached-fragment-does-not-stay-in-memcachier-cache)的问题，为了做到这一点，我想确保只有我的 caches_action 中的内容会缓存在 memcache 中。我希望我的资产（jpg 等）被缓存在其他地方。

我相信这与[这个问题](https://stackoverflow.com/questions/6962896/how-do-i-prevent-rails-3-1-from-caching-static-assets-to-rails-cache)是同一个问题，但是当我这样做时，即添加

```
config.action_dispatch.rack_cache = {
  :metastore    => Dalli::Client.new,
  :entitystore  => 'file:tmp/cache/rack/body',
  :allow_reload => false
} 
```

对于我的production.rb，它似乎并没有做任何事情。

我的**production.rb**完整：

```
MyDemoApp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to Rails.root.join("public/assets")
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  config.cache_store = :dalli_store 

  config.action_dispatch.rack_cache = {
    :metastore    => Dalli::Client.new,
    :entitystore  => 'file:tmp/cache/rack/body',
    :allow_reload => false
  }  

  # Set expire header of 30 days for static files
  config.static_cache_control = "public, max-age=2592000" 

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify
end 
```

缓存资产工作正常（获取缓存新鲜响应）和缓存操作如下：

```
 caches_action :show, :layout => false, :expires_in => 3.days 
```

还会在 Rails 缓存中创建一个缓存条目（尽管它们会在一段时间后消失）。

**我现在的问题是**：如果可能的话，我怎样才能做到只有我的 caches_action 片段最终出现在我的 Memcache（而不是我的资产）中？

一个额外的问题是，您在我的 production.rb 中看到任何不寻常的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:01:45.457

我使用 gem 'asset_sync' 将我的所有资产移到 Amamzon S3

请参阅[此处的说明](https://github.com/rumblelabs/asset_sync)

您将获得三个优势：

*   您的资产由亚马逊提供，因此页面加载速度更快
*   您在 Heroku 上的 slug 尺寸更小，应该更高效
*   您的资产将不再在 memecahce

我所有的资产每三个月花费我大约 20 美分在亚马逊上托管

# c# - WCF - “由于身份验证失败，无法满足对安全令牌的请求”

> ID：12942239
> 
> 赞同：4
> 
> 时间：2012-10-17T19:50:23.857
> 
> 标签：c#, vb.net, wcf, visual-studio, web-services

我创建了一个 WCF 服务并将其托管在 IIS7/Windows Server 2008 中。我正在尝试在我的应用程序中使用该服务......当我从 Visual Studio（调试）运行应用程序时，我可以调用该服务和所有内容按预期工作，但是，当我尝试从已发布的应用程序调用服务时，我收到上述错误。

这是服务的 web.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <connectionStrings>
    ...
    </connectionStrings>

    <system.web>
        <compilation debug="false" />
    </system.web>

    <runtime>
        <generatePublisherEvidence enabled="false"/>
    </runtime>    
    <system.serviceModel>               
        <services>            
            <service name="SVCLIB.SERVICE1">
                <endpoint address="" binding="wsHttpBinding" contract="SVCLIB.SERVICE1">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:8732/Design_Time_Addresses/SVCLIB/SERVICE1/" />
                    </baseAddresses>
                </host>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                </behavior>
            </serviceBehaviors>
        </behaviors>        
    </system.serviceModel>
</configuration> 
```

在客户端：

```
 SERVICE1.SERVICE1Client objService = new SERVICE1Client();

  objService.ClientCredentials.Windows.ClientCredential.UserName = "UserName";
  objService.ClientCredentials.Windows.ClientCredential.Password = "Password";

  objService.GetData();
  objService.Close(); 
```

它在 VS 中调试应用程序时有效，但在运行已发布的应用程序时无效。

错误：

> 由于身份验证失败，无法满足对安全令牌的请求

我在 Stack Overflow 和其他网站上看过很多帖子，但到目前为止没有一个对我有帮助。

谢谢！

** 编辑：

这是在客户端的 web.config 上：

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_SERVICE1" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
              algorithmSuite="Default" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://server.samedomain.com:8000/SVCLIB.SERVICE1.svc"
        binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_SERVICE1"
        contract="SERVICE1.ISERVICE1" name="WSHttpBinding_ISERVICE1">
      </endpoint>
    </client>
  </system.serviceModel> 
```

尝试了gmail用户的建议和下面的链接......但仍然有同样的问题。同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:44:12.247

我仍然不知道问题是什么。但是现在我[用 Windows Authentication 切换到 basicHttpBinding](http://msdn.microsoft.com/en-us/library/ff648505.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:02:41.807

我不确定，但请尝试在已发布的环境中评论以下行

```
<identity>
     <dns value="localhost" />
</identity>
<host>
    <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/SVCLIB/SERVICE1/" />
    </baseAddresses>
</host> 
```

# android - 你如何在谷歌地图上放置图钉？

> ID：12942240
> 
> 赞同：0
> 
> 时间：2012-10-17T19:50:29.990
> 
> 标签：android

有没有办法在 android 谷歌地图上标记某些位置，比如如何在 iPhone 苹果地图上放置图钉，如果是这样，你能告诉我或告诉我如何。我是 android 开发的新手，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:52:23.123

是的，您使用 [GeoPoint](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint&ei=Mgx_UMvFOIXriAfc_ICoDg&usg=AFQjCNE9Ge6XUQq7rQeNUDrHGFYchWRN-w&sig2=D2GmRJjkir5NBfPLwj8WVQ)。查看本教程以获取有关制作地图应用程序的帮助。[教程](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=https://developers.google.com/maps/documentation/android/hello-mapview&ei=Nwx_UNOxAqiSiAfBxoAQ&usg=AFQjCNEfQhQMJEv3LSLy872-2zBlvQ4INA&sig2=QTwtOWhzcYbB-6wmptoaxQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:27:58.947

值得庆幸的是，在地图上放置指针相当容易。基本上，您从一个非常基本的应用程序开始。不是扩展`Activity`，而是扩展`MapActivity`。然后，您可以在[此处](https://developers.google.com/maps/documentation/android/hello-mapview)开始本教程以创建基本 GUI。

不幸的是，建立并运行地图需要一些工作。在您看到地图之前，您需要一个 Google Maps API 密钥。文档中对此进行了解释，但可能会有些混乱。 [这](http://blog.simplyadvanced.net/developers-how-to-get-the-androidgoogle-maps-api-key/)是一个很棒的教程，解释了如何获取 API 密钥。

获得密钥后，您可以启动教程中的示例代码。确保您有数据连接，否则您将看不到地图图块。此外，请确保您在 AndroidManifest.xml 文件中具有 Internet 权限。您还需要将新的 API 密钥粘贴到`MapView`XML 代码中。本教程很好地解释了所有这些。

完成所有设置后，向地图添加地理坐标就很容易了。我可以在这里解释一下，但谷歌在这个问题上做得很好。按照他们关于如何创建`ItemizedOverlay`课程的说明进行操作。然后找到你家的坐标什么的，在地图上看到。

祝你好运！

# c++ - VS2010 - 关于资源相对路径 - 在哪里声明变量

> ID：12942243
> 
> 赞同：0
> 
> 时间：2012-10-17T19:50:36.260
> 
> 标签：c++, visual-studio-2010

我正在尝试构建一个 cpp 项目。在项目资源部分有一个资源，其相对路径类似于

```
$(QPID_BUILD_ROOT)\src\windows\resources\org.apache.qpid.messaging.rc 
```

我想在哪里定义这个变量？我的意思是 VS2010 从哪里读取这个变量值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:08:00.057

这些是**环境变量**。您可以仅为用户设置它们，也可以为整个系统设置它们。您还可以设置您想要的“临时”，例如（假设您的 Visual Studio 安装在*c:\Program Files\Microsoft Visual Studio 10*并且您想要**x86 构建环境**）：

1.  去`start`
2.  类型`cmd.exe`
3.  在命令提示符处：

    "c:\Program Files\Microsoft Visual Studio 10\VC\vcvarsall.bat" x86

4.  `set QPID_BUILD_ROOT=[some path]`

5.  启动 Visual Studio IDE：`devenv` 在 Visual Studio IDE 中，您可以使用下拉列表（例如在 VC++ 目录之一上）并单击***Edit***。在对话框窗口中单击***宏***- 这将显示 Visual Studio 当前可用的所有变量（包括上面的一组）。

当然你不必设置整个构建环境（如图**3**所示），这一步只需要输入**devenv**而不是在**5中输入****devenv.exe**的整个路径即可。

 **我假设您知道如何为用户或整个系统设置环境变量，并且您知道您需要（至少）再次启动任何应用程序（甚至登录/注销或重新启动）以便该应用程序继承那些新的变量。**

# php - 将函数转换为codeigniter

> ID：12942248
> 
> 赞同：2
> 
> 时间：2012-10-17T19:51:19.130
> 
> 标签：php, codeigniter, codeigniter-2

所以我一般来说是codeigniter和MVC的新手。我有一个要转换的应用程序，我想知道处理这种类型的函数的最佳方法是什么，特别是在视图中。

我有一个类别表，如下表所示：

```
cat_id | parent_id | catname
------------------------------
1       0           this category
2       1           that category 
```

给定一个 cat_id 的函数会吐出一个带有链接的格式化字符串。我知道在视图之前我不应该处理 URL 项，所以我不确定是否在 CI 中重写它如何处理视图中的结果数组。

想法？原函数如下：

```
 function createPath($id, $category_tbl, $except = null) {
    $s = "SELECT * FROM ".$category_tbl." WHERE cat_id = $id";
    $r = mysql_query($s);
    $row = mysql_fetch_array($r);
    if($row['parent_id'] == 0) {
        $name = $row['catname'];
        if(!empty($except) && $except == $row['cat_id']) {
            return "<a href='index.php'>Admin</a> &raquo; ".$name."";
        }
        //return "<a href='index.php'>Admin</a> &raquo; <a href='index.php?folder_id=$id'>".$name."</a> &raquo; ";
        return "<a href='category.php?catid=$id&category=".$row['slugname']."'>".$name."</a> &raquo; ";
    } else {
        if(!empty($except) && $except == $row['cat_id']) {
            $name = $row['catname'];
            return createPath($row['parent_id'],$category_tbl, false). " $name";
        } 
        $name = $row['catname'];
        return createPath($row['parent_id'],$category_tbl, false). " <a href='category.php?catid=$id&category=".$row['slugname']."'>".$name."</a> &raquo;";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:22:03.437

我冒昧地快速（我的意思是*快速*）将您的函数转换为库。

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Path {

    function __construct()
    {
        $_CI =& get_instance();
    }

    function create($id, $category_tbl, $except = NULL)
    {
        $_CI->db->from($category_tbl);
        $_CI->db->where('cat_id', $id);
        $query = $_CI->db->get();

        if ($query->num_rows() > 0)
        {
            $row = $query->row();

            if($row->parent_id == 0)
            {
                $name = $row->catname;

                if(!empty($except) && $except == $row->cat_id) {
                    return "<a href='index.php'>Admin</a> &raquo; ".$name."";
                }

                return "<a href='category.php?catid=$id&category=".$row->slugname."'>".$name."</a> &raquo; ";
            }
            else
            {
                if(!empty($except) && $except == $row->cat_id) {
                    $name = $row->catname;
                return $this->create($row->parent_id, $category_tbl, FALSE). " $name";
                }

                $name = $row->catname;
                return $this->create($row->parent_id, $category_tbl, FALSE). " <a href='category.php?catid=$id&category=".$row->slugname."'>".$name."</a> &raquo;";
            }

        }

        return NULL;
    }
}

/* End of file Path.php */
/* Location: ./application/libraries/Path.php */ 
```

调用它：

```
$this->load->library('path');
$this->path->create($id, $category_tbl, $except); 
```

我没有测试它，所以那里可能会有一些错误，但我认为这应该让球滚动起来？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:03:40.980

以codeingiter框架的方式来做............

1.  在模型中编写查询函数
2.  然后在控制器函数中调用您的模型并将结果集保存在数组中
3.  然后将保存的数组传递给查看
4.  在视图中，您解析该数组并显示您想要的方式

    公共函数 abc(参数列表)

    {

    ```
     $xyz=$this->model->function_name_in_model(arguemnts);
     $model=array();
     $model['content']=$xyz;
     $this->load->view('view_file_name',$model); 
    ```

    }

在模型页面中编写模型函数并在视图文件中使用传递的数组......

控制器................

```
public function createpath($id)

{
   $result = $this->model->getResult($id);

   $model = array();
   $model['content'] = $result;
   $this->load->view('view_file_name_path',$model);

} 
```

模型...................

```
public function getResult($id) 

{
   $query_str="SELECT * FROM ".$category_tbl." WHERE cat_id = $id";

    //echo $query_str;exit;
    $res=$this->db->query($query_str);
    if($res->num_rows()>0){
        return $res->result("array");
    }

    return array();

} 
```

查看文件.......................在查看文件中的代码中将 $row 替换为 $content 我假设您的代码没有错误

```
if($row['parent_id'] == 0) {
    $name = $row['catname'];
    if(!empty($except) && $except == $row['cat_id']) {
        return "<a href='index.php'>Admin</a> &raquo; ".$name."";
    }
    //return "<a href='index.php'>Admin</a> &raquo; <a href='index.php?folder_id=$id'>".$name."</a> &raquo; ";
    return "<a href='category.php?catid=$id&category=".$row['slugname']."'>".$name."</a> &raquo; ";
} else {
    if(!empty($except) && $except == $row['cat_id']) {
        $name = $row['catname'];
        return createPath($row['parent_id'],$category_tbl, false). " $name";
    } 
    $name = $row['catname'];
    return createPath($row['parent_id'],$category_tbl, false). " <a href='category.php?catid=$id&category=".$row['slugname']."'>".$name."</a> &raquo;";
} 
```

# r - 跨多个“区域”的 R 优化

> ID：12942254
> 
> 赞同：2
> 
> 时间：2012-10-17T19:51:56.137
> 
> 标签：r

我正在建立一个具有多个区域和船队的渔业的生物经济模型。我需要在目标函数中添加一个成本函数。成本函数导数为：

```
dvcost<-(maxeff/(maxeff-(total f))*k*(f/total f)-ln(1-((total f)/maxeff))*k*maxeff/(total f)*(1-(f/total f)) 
```

其中：对于每个车队，f 是目标函数最小化的特定区域的努力，总 f 是特定车队跨区域的努力总和。k 和 maxeff 是参数。

我的问题是：如何将此成本函数应用于我的问题？我已经有了总 f（在代码中是“f”），但是我需要找到目标函数正在处理的区域的 f。

任何建议都非常感谢。谢谢！

完整代码如下： ***CODE***

```
nfleets<-2
nareas<-2
M<-1
M<-array(M,dim=c(nfleets,nareas))
N<-1000
cost<-c(30,30)
cost<-array(cost,dim=c(nfleets,nareas))
Price<-2
Price<-array(Price,dim=c(nfleets,nareas))
q<-array(0.1,dim=c(nfleets,nareas))
f<-1
f<-array(f,dim=c(nfleets,nareas))
init.eff<-array(3,dim=c(nfleets,nareas))
OF<-array(c(q*f), dim=c(nfleets, nareas))

Catch<-array(0,dim=c(nfleets, nareas))

obj<-function(f){
    f <- array(f, dim=c(nfleets, nareas)) 
    F <- q*f
    Z <- M+sum(F)
    S <- exp(-Z)
    Catch<- N*F/Z*(1-S)
    Tot.Catch <- sum(Catch)
    NR<-array(0,dim=c(nfleets,nareas))
    NR<-Price*Catch - f*cost
    d.NR<-array(0,dim=c(nfleets,nareas))
    f <- apply(f, 1, sum)
    d.NR<- N*q/Z*(1-S-F/Z+F/Z*S+F*S)*Price - cost
    return(sum(d.NR*d.NR))
}
zero.bnd <-  rep.int(0, length(f))
opt.eff  <- optim( init.eff, obj, method="Nelder-Mead" ) 
```

# database - 如何计算非结构化数据的行大小？

> ID：12942260
> 
> 赞同：1
> 
> 时间：2012-10-17T19:52:08.460
> 
> 标签：database, size, row, storage

在经典 RDBMS 中，通过添加表中定义的每个字段的最大大小来计算最大行大小相对容易。该值乘以预测的行数将给出不包括索引、日志等的最大表大小。

今天，在以结构化方式存储非结构化数据的时代，很难判断最佳表大小是多少。

有没有办法在没有样本数据负载的情况下计算或预测表甚至数据库增长和存储需求？

您计算非结构化数据库的行大小和规划存储容量的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:58:47.897

这几乎是一样的。找出您需要保留的平均数据大小，并将其与您估计的每个时间单位的事务数相乘。

数据库引擎可能会以指数方式分配数据文件块（首先是 16mb，然后是 32mb 等），因此您需要了解 dbms 引擎的工作原理，以将数据大小转换为物理存储空间大小。

# java - spring messages.properties 使用变量名

> ID：12942264
> 
> 赞同：1
> 
> 时间：2012-10-17T19:52:19.250
> 
> 标签：java, spring

在使用 messages.properties 文件覆盖 Spring 的默认消息时，有没有办法使用标题而不是变量名？

例如，我用这个

```
typeMismatch.java.lang.Integer={0} must be a number. 
```

创建错误消息“名字必须是数字。”，但我更喜欢可读性，例如“名字必须是数字。”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:11:18.870

您可以为特定类的特定字段自定义属性。假设您的模型属性名为*foo*并且它有一个名为*firstName*的属性，那么您可以使用以下方法为该特定字段声明自定义错误消息：

```
typeMismatch.foo.firstName=First Name must be a number 
```

您可以查看[此页面](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/validation/DefaultMessageCodesResolver.html)以获取更多信息。

# jquery - 在 Javascript 中设置 iframe `src` 会在 Internet Explorer 中引发“权限被拒绝”错误

> ID：12942265
> 
> 赞同：3
> 
> 时间：2012-10-17T19:52:21.610
> 
> 标签：jquery, internet-explorer, iframe, xss

我在一个页面上有 4 个 iframe，当每个 iframe 加载时，我都将它们`src`设置为`""`（空）。单击页面集中的不同链接将`src`使用 jQuery 指向不同的 URL。这在 FF、Chrome、Safari 等中运行良好，但 IE 给了我：

" `Permission Denied - jquery.js?1350498802, line 103 character 430`"

从我发现这是因为如果一个安全特性 IE 来防止 XSS 攻击。问题是我在 iframe 中加载的页面与它们正在加载的页面位于不同的域中。我无权访问 iframe 从中获取它们的域中的代码`src`，所以无论如何我可以加载这些页面而不会出现此错误？

如果需要，我可以发布代码，但没有什么复杂的，它是一个空 iframe，直到单击链接，此时 iframe`src`使用`$("#iframe").attr("src", link);`.

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:56:23.123

不要使用 jQuery 来执行这个简单的任务，而是使用 HTML。

```
<a target="myIframe" href="http://www.google.com">Google</a>
<iframe id="myIframe" src="about:blank"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:57:53.570

您的问题可能与此有关。仔细检查您设置 iframe url 的方式

[使用 javascript 在 ie 中更改 iframe 源](https://stackoverflow.com/questions/700499/change-iframe-source-in-ie-using-javascript)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:58:30.000

通常为了解决这个跨域问题，您可以创建所谓的代理页面。基本上，您所做的就是将`src`iframe 设置为您自己域中的页面（例如，我们称之为`proxyFrame.php`）。

在代码中，`proxyFrame.php`您将从要在 iframe 中加载的实际页面中获取内容。在 php 中，您可以使用`file_get_contents()`.

您没有指定您使用的是哪种后端代码，但我很确定任何语言都会有类似的方式从 URL 中获取内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T17:34:54.477

我最终将其更改为`src`我们需要的域并删除了所有设置`src`为的语句`""`，从而解决了问题。谢谢各位的帮助！

# mysql - MySQL - 计算存储数据的 3D 距离？

> ID：12942267
> 
> 赞同：0
> 
> 时间：2012-10-17T19:52:26.257
> 
> 标签：mysql, 3d, game-engine

全部-

我只是好奇，我试图基本上计算到我在数据库中的多个位置的距离，并且想知道这是否可以在查询中完成？

我可能有 7-9 百万行位置（x、y、z、大陆）并且基本上想要执行如下查询：

`positions`从距离选择`my_table`（x，y，z，new_x，new_y，new_z）< 500；

这似乎遥不可及吗？还是我必须把所有数据都记录下来 + 用 PHP 进行计算？我只看到它使用 GEO 数据与 3D 坐标完成。

提前致谢！〜乔什

# django - Python 模块在 Web 应用程序中的行为如何？

> ID：12942274
> 
> 赞同：0
> 
> 时间：2012-10-17T19:52:52.590
> 
> 标签：django, python-module

更具体地说，我创建了一个自定义 Redis 模块：`MyRedis`

我的Redis.py

```
import redis
r = redis.StrictRedis(host='localhost', port=6379, db=0)

def get_func(k):
    """ A custom get function """
    return r.get(k)

# ...
# more functions ...
# ... 
```

请注意，连接是在加载模块时建立的。
我的问题是：
这是编写模块的正确方法，还是应该*在每个函数*`r = redis.StrictRedis(...)`中包含连接建立行，如下所示：

 *```
def get_func(k):
    """ A custom get function """
    r = redis.StrictRedis(host='localhost', port=6379, db=0)
    return r.get(k) 
```

在 Web 应用程序中，一个模块是否只加载一次，就像在“常规”后端应用程序中一样？还是每个连接加载一次？
如果它只加载一次，这意味着如果 Redis 服务器由于某种原因崩溃，一旦它再次启动将没有连接，这表明第二个片段是正确的。
那么 python 模块在 Web 应用程序中是如何表现的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:16:22.127

但是 SAPI 的行为。如果它是 CGI，它会为每个请求加载。对于 mod_wsgi，它为每个进程加载一次。对于其他人，请参阅他们的文档。*

# java - Java 中的对象问题

> ID：12942279
> 
> 赞同：1
> 
> 时间：2012-10-17T19:53:07.257
> 
> 标签：java, swing, events, graphics, awt

我正在尝试在画布上实现形状的拖动功能。我的`Shape`类继承自`JPanel`.

当我单击一个形状，拖动它并松开鼠标按钮时，绝对没有任何反应。它只是保持在原来的位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:27:20.107

你需要一些基本的东西：

1.  形状本身的字段（您已经拥有）
2.  跟踪形状内点击偏移量的字段（已有）
3.  跟踪您是否正在拖动的字段
4.  覆盖`paintComponent`绘制形状的方法
5.  A`MouseListener`并`MouseMotionListener`添加到面板中（`MouseAdapter`这两个都做）

这是一个基本的工作示例。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DrawTest extends JPanel{

    //Shape doesn't have a location field - you'd have to keep track of  
    //this yourself if you're set on using the shape interface
    private Rectangle shape = new Rectangle(100, 100);
    // The location within the shape you clicked
    private int xOffset = 0; 
    private int yOffset = 0;
    // To indicate dragging is happening
    boolean isDragging = false;

    public DrawTest(){
        MouseAdapter listener = new MouseAdapter() {

            @Override
            public void mousePressed(MouseEvent e) {
                // Starts dragging and calculates offset
                if(shape.contains(e.getPoint())){
                    isDragging = true;
                    xOffset = e.getPoint().x - shape.x;
                    yOffset = e.getPoint().y - shape.y;
                }
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                // Ends dragging
                isDragging = false;
            }

            @Override
            public void mouseDragged(MouseEvent e) {
                // Moves the shape - doesn't actually need to be a method
                // but is because you had it as one
                if(isDragging){
                    moveShape(e);
                }
            }

            private void moveShape(MouseEvent e) {
                Point newLocation = e.getPoint();
                newLocation.x -= xOffset;
                newLocation.y -= yOffset;
                shape.setLocation(newLocation);
                repaint();
            }
        };

        //Add a mouse mostion listener (for dragging) and regular listener (for clicking)
        addMouseListener(listener);
        addMouseMotionListener(listener);
    }

    // So we have a play area to work with
    public Dimension getPreferredSize(){
        return new Dimension(400,300);
    }

    //Paints the shape
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.clearRect(0,0,getWidth(), getHeight());
        g.fillRect(shape.x, shape.y, shape.width, shape.height);
    }

    public static void main(String[] args)
    {

        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new DrawTest());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T20:28:14.457

尝试了一个简单的小例子

拖动矩形将使其随光标移动，它还会检查边界，因此不能将矩形拖出屏幕：

![在此处输入图像描述](../Images/4a211fa4f9681174c06da4c1871cb54d.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ShapeMover {

    public ShapeMover() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Shape Mover");
        initComponents(frame);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String s[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ShapeMover();
            }
        });

    }

    private void initComponents(JFrame frame) {
        frame.getContentPane().add(new DragPanel());
    }
}

class DragPanel extends JPanel {

    Rectangle rect = new Rectangle(0, 0, 100, 50);
    int preX, preY;
    boolean isFirstTime = true;
    Rectangle area;
    boolean pressOut = false;
    private Dimension dim = new Dimension(400, 300);

    public DragPanel() {
        setBackground(Color.white);
        addMouseMotionListener(new MyMouseAdapter());
        addMouseListener(new MyMouseAdapter());
    }

    @Override
    public Dimension getPreferredSize() {
        return dim;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        if (isFirstTime) {
            area = new Rectangle(dim);
            rect.setLocation(50, 50);
            isFirstTime = false;
        }

        g2d.setColor(Color.black);
        g2d.fill(rect);
    }

    boolean checkRect() {
        if (area == null) {
            return false;
        }

        if (area.contains(rect.x, rect.y, 100, 50)) {
            return true;
        }
        int new_x = rect.x;
        int new_y = rect.y;

        if ((rect.x + 100) > area.getWidth()) {
            new_x = (int) area.getWidth() - 99;
        }
        if (rect.x < 0) {
            new_x = -1;
        }
        if ((rect.y + 50) > area.getHeight()) {
            new_y = (int) area.getHeight() - 49;
        }
        if (rect.y < 0) {
            new_y = -1;
        }
        rect.setLocation(new_x, new_y);
        return false;
    }

    private class MyMouseAdapter extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            preX = rect.x - e.getX();
            preY = rect.y - e.getY();

            if (rect.contains(e.getX(), e.getY())) {
                updateLocation(e);
            } else {
                pressOut = true;
            }
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            if (!pressOut) {
                updateLocation(e);
            } else {
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            if (rect.contains(e.getX(), e.getY())) {
                updateLocation(e);
            } else {
                pressOut = false;
            }
        }

        public void updateLocation(MouseEvent e) {
            rect.setLocation(preX + e.getX(), preY + e.getY());
            checkRect();

            repaint();
        }
    }
} 
```

**参考：**

*   [http://www.java2s.com/Code/Java/Event/MoveShapewithmouse.htm](http://www.java2s.com/Code/Java/Event/MoveShapewithmouse.htm)

# c# - 无法通过 MVC3 .net 连接到托管的 SQL Server 2008 数据库

> ID：12942287
> 
> 赞同：1
> 
> 时间：2012-10-17T19:53:53.993
> 
> 标签：c#, .net, sql, asp.net-mvc-3

在过去的几周里，我遇到了这个问题，虽然我学到了很多东西，但我仍然没有设法找到解决方案。

基本上我得到的错误是：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

堆栈跟踪：

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6351920
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +6366506
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +180
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +6366917
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6366793
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +352
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +831
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +49
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6368598
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +78
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +2194
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +89
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6372110
   System.Data.SqlClient.SqlConnection.Open() +300
   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +132
   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +3981391
   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +10513049
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +44

[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +11121429
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +239
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +61
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +221
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +442
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +25
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +89
   System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() +21
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +382
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +80
   _2ndBrain.Controllers.BrainController.Index() in c:\users\apis\documents\visual studio 2010\Projects\2ndBrain\2ndBrain\Controllers\BrainController.cs:22
   lambda_method(Closure , ControllerBase , Object[] ) +79
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +264
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +129
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +826266
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +314
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +825488
   System.Web.Mvc.Controller.ExecuteCore() +159
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +335
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +62
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +54
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

我可以使用带有连接字符串的 SSMS 连接到该数据库：

```
<add name="ApplicationServices" connectionString="Data Source=sql7.hostinguk.net;Integrated Security=False;Database=orchard_chris;User Id=*****;Password=*******;" providerName="SqlServer" /> 
```

此外，orchard 能够使用相同的凭据连接到数据库，所以我不明白为什么我的自定义构建的应用程序无法连接。

感谢您的帮助，克里斯·史蒂文斯

编辑：

仍在寻求有关此问题的帮助。我不认为这是连接字符串问题，因为我可以通过 IIS 和 SSMS 连接到数据库。

我还问了我的托管服务提供商可能是什么问题，有人回复我说：

> 如果您正在使用的用户详细信息正在工作，那么您拥有的字符串应该没问题。如果详细信息正确，最常见的原因是您在设置成员资格提供程序时没有指定连接字符串名称，这意味着它们默认为机器字符串。检查您拥有的所有提供程序是否引用了正确的字符串名称。

我不确定这意味着什么，这可能是解决方案吗？

编辑2：

此外，我已经确认了下面的 1,2 和 3。我不确定如何检查 4 和 5。

*   确保您的服务器名称正确，例如，名称没有拼写错误。
*   确保您的实例名称正确，并且您的目标机器上实际上存在这样的实例。[更新：某些应用程序将 \ 转换为 . 如果您不确定您的应用程序，请在连接字符串中同时尝试 Server\Instance 和 Server\Instance]
*   确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。
*   确保 SQL Browser 服务正在服务器上运行。
*   如果服务器上启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。

此外，我已确认服务器已配置为允许远程连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:15:51.980

你没有得到`DbProvider`喜欢的服务器的响应。三重检查服务器名称、用户名和密码。

尝试从

`providerName="SqlServer"`

到

`providerName="System.Data.SqlClient"`

另请查看是否`ProviderIncompatibleException`有`InnerException`可能提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:16:14.867

一定要检查 InnerException。

我的是`Login failed for user 'IIS APPPOOL\\dev.XXXXXXXX.com'`- 很容易修复

没有帮助的可怕例外`The provider did not return a ProviderManifestToken string`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T09:05:28.013

所以一段时间后回到这个，希望我能帮助别人。原来我的代码中有一个流氓 DbContext : base("UnicornsDatabase") 我忘记了。

在这种情况下，“UnicornsDatabase”连接字符串要么不存在，要么转到不存在的数据库。

实在是太傻了。谢谢你的帮助。

# fitnesse - 在 FitNesse - 有没有办法以编程方式查看测试是否失败/通过

> ID：12942293
> 
> 赞同：0
> 
> 时间：2012-10-17T19:54:24.647
> 
> 标签：fitnesse

在我的 CI 服务器中，我正在实现一些日志记录/审计功能 - 在每次 Fit 测试运行后，在 TearDown 页面中，我将一些内容记录到 DB - 测试名称、时间戳、一些变量；如果测试失败或通过，我还想记录 - 似乎在 FitNess 中找不到任何可以提供帮助的全局变量。谁能给我一些想法如何做到这一点？

谢谢！O。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:08:44.170

TearDown 不知道测试是通过还是失败。这只有在测试完成后 FitNesse 才知道。您可以做的是将最后一次执行作为 XML 运行，然后对其进行解析。这是来自 ANT 的片段，它会做类似的事情。

```
<!--Then run the page history responder to get the latest run of fitnesse in xml format-->
        <java classpath="${toString:compile.classpath};build\classes" fork="true" jar="javalib/fitnesse.jar" maxmemory="256m" output="${fitnesse.output.file}.temp">
            <arg value="-c" />
            <arg value="${fitnesseSuite}?pageHistory&amp;resultDate=latest&amp;format=xml" />
            <arg value="-p" />
            <arg value="${fitnesse_port}" />
        </java> 
```

一个问题是，在您获取它之后，您必须从创建的临时文件中删除 http 标头。但是一旦你这样做了，你就可以将测试结果数据用于你的数据库。您还可以创建 junit 样式的结果。查看有关转换为 junit 的示例：[http](http://whotestedthis.squarespace.com/journal/2012/1/26/transforming-fitnesse-results-to-junit.html) ://whotestedthis.squarespace.com/journal/2012/1/26/transforming-fitnesse-results-to-junit.html （无耻的自我提升）。

# c# - Vb.Net 中 var 关键字的等效项

> ID：12942295
> 
> 赞同：-2
> 
> 时间：2012-10-17T19:54:37.177
> 
> 标签：c#, vb.net

> **可能重复：**
> [VB.NET 等效于 C# var 关键字](https://stackoverflow.com/questions/2478552/vb-net-equivalent-to-c-sharp-var-keyword)

我正在做 C# 现在我想了解 VB.Net，我想要与此等效的：

```
var result = loginForm.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:56:09.203

只需在`Dim`没有类型指示符的情况下使用。

```
Dim result = loginForm.ShowDialog() 
```

# php - curl_setopt 相当于 exec('curl -k ...')

> ID：12942297
> 
> 赞同：2
> 
> 时间：2012-10-17T19:54:45.040
> 
> 标签：php, curl

我正在尝试复制此命令的功能：

```
exec('curl -k -d "pameters=here" https://apiurlhere.com', $output); 
```

使用 curl_exec()：

```
$url =  'https://apiurlhere.com?parameters=here';
$ci = curl_init();
curl_setopt($ci, CURLOPT_POST, TRUE);
curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ci, CURLOPT_URL, $url);
$response = curl_exec($ci);
curl_close ($ci);
print_r($response); 
```

我一直在尝试在文档（http://php.net/manual/en/function.curl-setopt.php）中找到的不同选项，并认为它是 CURLOPT_SSL_VERIFYPEER，但它仍然失败（响应返回为空）。

我发布到的 URL 使用 SNI，当 SSL 证书返回的主机名与预期不同时，这会导致 cURL 失败。

是否有相当于 -k 的 curl_setopt？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:19:21.417

`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE)`相当于`-k`命令行（你不应该真正使用它，因为它使连接容易受到 MITM 攻击）。

您的问题是您假设这`-d "pameters=here"`相当于将这些参数放在 URL 查询中，如下所示`https://apiurlhere.com?parameters=here`。

情况并非如此，请参阅以下文档`-d`：

> (HTTP) 将 POST 请求中的指定数据发送到 HTTP 服务器，就像浏览器在用户填写 HTML 表单并按下提交按钮时所做的一样。这将导致 curl 使用内容类型 application/x-www-form-urlencoded 将数据传递给服务器。

您可能应该`POSTFIELDS`为此使用：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array("parameters" => "here")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:58:06.457

试试看：

```
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
 curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
```

见[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

# c# - Windows 身份验证到 Sql Server 身份验证

> ID：12942301
> 
> 赞同：2
> 
> 时间：2012-10-17T19:55:04.353
> 
> 标签：c#, sql-server-2005

我有一个现有的 SQL Server 2005，目前我在 Windows 身份验证中使用，数据库名称是 Restaurant。我知道如何将现有的 SQL Server 从 Windows Auth 更改为 SQL Server Auth，但它不会锁定数据库。有什么方法可以将我当前的 SQL Server 更改为 SQL Server 身份验证，就像有人试图打开 Restaurant(DB) 一样，它会要求进行身份验证。还请告诉我连接字符串需要什么。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:03:01.130

SQL Server 识别两种安全模式：

1.  Windows 身份验证
2.  SQL Server 和 Windows 身份验证

如果您想`SQL Server Authentication`在已安装的数据库上启用以允许自定义用户名和密码，那么您必须 -

1.  启用 SQL Server 身份验证
2.  创建新用户帐户或使用现有`sa`用户帐户
3.  设置账号密码

**启用 SQL Server 身份验证模式 -**

1.  在 SQL Server Management Studio 对象资源管理器中，右键单击服务器，然后单击“属性”。
2.  在“安全”页面的“服务器身份验证”下，选择新的服务器身份验证模式，然后单击“确定”。
3.  在 SQL Server Management Studio 对话框中，单击确定以确认重新启动 SQL Server 的要求。
4.  在对象资源管理器中，右键单击您的服务器，然后单击重新启动。如果 SQL Server 代理正在运行，它也必须重新启动。

创建新登录 ID - 请参阅[创建登录](http://msdn.microsoft.com/en-us/library/aa337562.aspx)

**禁用 BUILTIN 帐户的 Windows 身份验证登录**-

一旦您以`sa`（系统管理员）身份登录并使用密码（记住密码，因为您要禁用 Windows 身份验证`Default Logins`），请按照以下步骤操作 -

1.  打开 SQL Server 管理工作室
2.  展开节点以显示您的 SQL Server 实例
3.  展开`Security`节点并展开`Logins`
4.  右键单击`BUILTIN\Administraors`OR`BUILTIN\Users`并选择`Properties`
5.  `Status`从左窗格转到。
6.  检查`Disabled`下`Login`

管理员组中的任何人现在都无法访问您的 SQL Server。

参考[MSDN 线程](http://social.msdn.microsoft.com/Forums/en/sqlsecurity/thread/cc3339b8-24f4-4e5a-ae2f-fd491e93864d)。

**编辑：**

使用现有登录帐户`sa`-

```
ALTER LOGIN sa ENABLE ;
GO
ALTER LOGIN sa WITH PASSWORD = '<enterStrongPasswordHere>' ;
GO 
```

连接字符串 -

```
Server=SERVER\SERVER_INSTANCE;Database=Restaurant;User Id=sa;
Password=password; 
```

参考 - [Sql Server 2005 的连接字符串](http://www.connectionstrings.com/sql-server-2005)

我建议创建一个新帐户，而不是`sa`设置其密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-19T08:04:36.520

```
use [master]
GO

ALTER LOGIN [username] WITH PASSWORD='yourpassword', CHECK_POLICY=OFF
GO

ALTER LOGIN [username] ENABLE
GO 
```

# java - 为网站创建 .jar 文件

> ID：12942304
> 
> 赞同：2
> 
> 时间：2012-10-17T19:55:18.147
> 
> 标签：java, jar, applet, executable-jar

我已经将 test.jar 文件和 Applet1.html 文件都放在了 Web 服务器上。test.jar 在我的本地计算机上完美地自行运行，但是当放置在服务器上时它根本不运行，并且出现以下错误：

```
Application Error
RuntimeException
java.lang.reflect.InvocationTargetException 
```

调用 test.jar 的 HTML

```
<applet 
code="MainClass.class" 
width="400" height="400" 
archive="test.jar"
alt="Error Loading Applet?!" >
</applet> 
```

非常基本的小程序（hello world）工作正常，但是当我用它制作一个 .jar 时它不起作用。

此链接[使用了两个文件](https://www.dropbox.com/sh/xdnmgnff07z8x4x/gOZTceMZJD)：

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:36:19.350

```
MainClass cannot be cast to java.applet.Applet 
```

在`MainClass`家里运行良好的不是小程序。双击 Jar 会启动一个名为“Java Game”的框架。

[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接直接启动框架。

# sql - SQL select max(date) 和对应的值

> ID：12942306
> 
> 赞同：19
> 
> 时间：2012-10-17T19:55:24.807
> 
> 标签：sql, sql-server, sql-server-2000

> **可能重复：**
> [如何获取包含最大值的表的记录？](https://stackoverflow.com/questions/376518/how-to-get-the-record-of-a-table-who-contains-the-maximum-value)

我有一个聚合查询，如下所示：

```
SELECT TrainingID, Max(CompletedDate) as CompletedDate, Max(Notes) as Notes     --This will only return the longest notes entry
FROM HR_EmployeeTrainings ET
WHERE (ET.AvantiRecID IS NULL OR ET.AvantiRecID = @avantiRecID)
GROUP BY AvantiRecID, TrainingID 
```

哪个有效，并且大部分时间都返回正确的数据，但我注意到了一个问题。返回的 Notes 字段不一定与 max(completedDate) 来自的记录匹配。相反，它将是字符串最长的那个？还是 ASCII 值最高的那个？如果两条记录之间存在关联，SQL Server 会做什么？我什至不确定。我想要得到的是 max(completedDate) 记录中的 notes 字段。我该怎么做呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-17T20:01:24.657

您可以使用子查询。子查询将获得`Max(CompletedDate)`. 然后，您获取此值并再次加入您的表以检索与该日期关联的注释：

```
select ET1.TrainingID,
  ET1.CompletedDate,
  ET1.Notes
from HR_EmployeeTrainings ET1
inner join
(
  select Max(CompletedDate) CompletedDate, TrainingID
  from HR_EmployeeTrainings
  --where AvantiRecID IS NULL OR AvantiRecID = @avantiRecID
  group by TrainingID
) ET2
  on ET1.TrainingID = ET2.TrainingID
  and ET1.CompletedDate = ET2.CompletedDate
where ET1.AvantiRecID IS NULL OR ET1.AvantiRecID = @avantiRecID 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T20:03:16.473

啊，是的，这就是它在 SQL 中的意图。您分别获得每列的最大值。似乎您想从具有最大日期的行中返回值，因此您必须选择具有最大日期的行。我更喜欢使用子选择来执行此操作，因为查询保持紧凑易于阅读。

```
SELECT TrainingID, CompletedDate, Notes
FROM HR_EmployeeTrainings ET 
WHERE (ET.AvantiRecID IS NULL OR ET.AvantiRecID = @avantiRecID) 
AND CompletedDate in 
   (Select Max(CompletedDate) from HR_EmployeeTrainings B
    where B.TrainingID = ET.TrainingID) 
```

如果您还想通过 AntiRecID 进行匹配，您也应该将其包含在子选择中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T20:01:12.860

没有简单的方法可以做到这一点，但这样的事情会起作用：

```
SELECT ET.TrainingID, 
  ET.CompletedDate, 
  ET.Notes
FROM 
HR_EmployeeTrainings ET
inner join
(
  select TrainingID, Max(CompletedDate) as CompletedDate
  FROM HR_EmployeeTrainings
  WHERE (ET.AvantiRecID IS NULL OR ET.AvantiRecID = @avantiRecID)
  GROUP BY AvantiRecID, TrainingID  
) ET2 
  on ET.TrainingID = ET2.TrainingID
  and ET.CompletedDate = ET2.CompletedDate 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T20:02:57.207

每个 MAX 函数都是单独评估的。因此 MAX(CompletedDate) 将返回最新的 CompletedDate 列的值，而 MAX(Notes) 将返回最大值（即按字母顺序排列的最高值）。

您需要以不同的方式构建查询以获得所需的内容。这个问题其实已经被问过好几次了，我就不重复了：

[如何在包含最大值的表中找到记录？](https://stackoverflow.com/questions/376518/how-to-get-the-record-of-a-table-who-contains-the-maximum-value)

[在 SQL 中查找具有最大值的记录](https://stackoverflow.com/questions/8720418/finding-the-record-with-maximum-value-in-sql)

# css - 减少 Bootstrap 表单组件之间的高度

> ID：12942310
> 
> 赞同：4
> 
> 时间：2012-10-17T19:55:44.120
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 及其表单组件：

[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

如何减少两个组件之间的垂直距离并使它们更小？

示例：在上面的链接中，在“验证状态”中，如何减少“输入有警告”行和“输入有错误”行之间的差距，以及如何减少文本输入的高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:13:00.180

如果要将标签移动到更靠近输入的位置，则需要更改宽度。

```
.form-horizontal .control-label {
    width:160px;
} 
```

要更改输入的高度，您需要更改此选择器的“高度”属性。

```
select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
   height:20px;
} 
```

要减少行之间的高度，您需要更改行的边距。

```
.form-horizontal .control-group {
    margin-bottom:20px;
} 
```

这些是 bootstrap.css 中使用的默认样式。如果你想覆盖这些，我建议在你的页面上设置一个顶级类。这样您就可以覆盖默认值而无需重写 bootstrap.css 文件...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T20:14:23.860

对于表单验证，在 CSS 中更改此规则

```
.form-horizontal .control-group {
  margin-bottom: 20px;
} 
```

要找到这些，请在 Chrome（或带有 Firebug 的 Firefox）中右键单击上面该链接中的元素。从列表中选择检查元素。然后在打开的属性检查器中（在元素选项卡中将鼠标悬停在项目上，直到找到显示要更改的属性的项目。在这种情况下，它是具有“控制组警告”类的潜水单击该元素并在检查器的右侧，它将向您显示相关的 CSS 规则。然后您可以搜索您的 CSS 并修复规则。您也可以在检查器中实际更改它并在您正在检查的页面上实时查看结果。

# c# - 从 C# 后面的代码向 WEB API 函数发送数据

> ID：12942316
> 
> 赞同：1
> 
> 时间：2012-10-17T19:56:08.533
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我创建了 Web API 服务。我要做的是从按钮单击后面的代码中调用该 API 函数，即 SaveSession(string data)，并将整个表单集合数据作为字符串格式的参数传递。当我通过 webclient.uploadstring(url,string); 调用 api 的 uri 时 它正在调用 Web 服务，但未传递参数。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:54:04.993

代替使用接受字符串的控制器操作方法，您可以改为读取发布到控制器的 form-url-encoded 内容。

在下面的示例中，SessionController 公开了一个 SaveSession() 方法，该方法接受表单 URL 编码内容的 POST，然后将会话数据作为 KeyValuePair 实例的集合读取。

示例客户端构建一个键值对列表，然后使用 HttpClient 实例将 FormUrlEncodedContent 发布到 Web API 控制器方法。

**会话控制器示例：**

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.IO;
using System.Net;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Web;
using System.Web.Http;

namespace MvcApplication1.Controllers
{
    public class SessionController : ApiController
    {
        /// <summary>
        /// Saves specified the session data.
        /// </summary>
        /// <returns>
        /// A <see cref="HttpResponseMessage"/> that represents the response to the requested operation.
        /// </returns>
        [HttpPost()]
        public HttpResponseMessage SaveSession()
        {
            // Ensure content is form-url-encoded
            if(!IsFormUrlEncodedContent(this.Request.Content))
            {
                return this.Request.CreateResponse(HttpStatusCode.BadRequest);
            }

            // Read content as a collection of key value pairs
            foreach (var parameter in ReadAsFormUrlEncodedContentAsync(this.Request.Content).Result)
            {
                var key     = parameter.Key;
                var value   = parameter.Value;

                if(!String.IsNullOrEmpty(key))
                {
                    // Do some work to persist session data here
                }
            }

            return this.Request.CreateResponse(HttpStatusCode.OK);
        }

        /// <summary>
        /// Determines whether the specified content is form URL encoded content.
        /// </summary>
        /// <param name="content">
        /// The type that the <see cref="IsFormUrlEncodedContent(HttpContent)"/> method operates on.
        /// </param>
        /// <returns>
        /// <see langword="true"/> if the specified content is form URL encoded content; otherwise, <see langword="false"/>.
        /// </returns>
        public static bool IsFormUrlEncodedContent(HttpContent content)
        {
            if (content == null || content.Headers == null)
            {
                return false;
            }

            return String.Equals(
                content.Headers.ContentType.MediaType, 
                FormUrlEncodedMediaTypeFormatter.DefaultMediaType.MediaType, 
                StringComparison.OrdinalIgnoreCase
            );
        }

        /// <summary>
        /// Write the HTTP content to a collection of name/value pairs as an asynchronous operation.
        /// </summary>
        /// <param name="content">
        /// The type that the <see cref="ReadAsFormUrlEncodedContentAsync(HttpContent)"/> method operates on.
        /// </param>
        /// <returns>The <see cref="Task"/> object representing the asynchronous operation.</returns>
        /// <remarks>
        /// The <see cref="ReadAsFormUrlEncodedContentAsync(HttpContent, CancellationToken)"/> method 
        /// uses the <see cref="Encoding.UTF8"/> format (or the character encoding of the document, if specified) 
        /// to parse the content. URL-encoded characters are decoded and multiple occurrences of the same form 
        /// parameter are listed as a single entry with a comma separating each value.
        /// </remarks>
        public static Task<IEnumerable<KeyValuePair<string, string>>> ReadAsFormUrlEncodedContentAsync(HttpContent content)
        {
            return ReadAsFormUrlEncodedContentAsync(content, CancellationToken.None);
        }

        /// <summary>
        /// Write the HTTP content to a collection of name/value pairs as an asynchronous operation.
        /// </summary>
        /// <param name="content">
        /// The type that the <see cref="ReadAsFormUrlEncodedContentAsync(HttpContent, CancellationToken)"/> method operates on.
        /// </param>
        /// <param name="cancellationToken">
        /// The cancellation token used to propagate notification that the operation should be canceled.
        /// </param>
        /// <returns>The <see cref="Task"/> object representing the asynchronous operation.</returns>
        /// <remarks>
        /// The <see cref="ReadAsFormUrlEncodedContentAsync(HttpContent, CancellationToken)"/> method 
        /// uses the <see cref="Encoding.UTF8"/> format (or the character encoding of the document, if specified) 
        /// to parse the content. URL-encoded characters are decoded and multiple occurrences of the same form 
        /// parameter are listed as a single entry with a comma separating each value.
        /// </remarks>
        public static Task<IEnumerable<KeyValuePair<string, string>>> ReadAsFormUrlEncodedContentAsync(HttpContent content, CancellationToken cancellationToken)
        {
            return Task.Factory.StartNew<IEnumerable<KeyValuePair<string, string>>>(
                (object state) =>
                {
                    var result  = new List<KeyValuePair<string, string>>();

                    var httpContent = state as HttpContent;

                    if (httpContent != null)
                    {
                        var encoding    = Encoding.UTF8;
                        var charSet     = httpContent.Headers.ContentType.CharSet;

                        if (!String.IsNullOrEmpty(charSet))
                        {
                            try
                            {
                                encoding    = Encoding.GetEncoding(charSet);
                            }
                            catch (ArgumentException)
                            {
                                encoding    = Encoding.UTF8;
                            }
                        }

                        NameValueCollection parameters = null;

                        using (var reader = new StreamReader(httpContent.ReadAsStreamAsync().Result, encoding))
                        {
                            parameters = HttpUtility.ParseQueryString(reader.ReadToEnd(), encoding);
                        }

                        if (parameters != null)
                        {
                            foreach(var key in parameters.AllKeys)
                            {
                                result.Add(
                                    new KeyValuePair<string, string>(key, parameters[key])
                                );
                            }
                        }
                    }

                    return result;
                },
                content,
                cancellationToken
            );
        }
    }
} 
```

**调用客户端示例：**

```
using System;
using System.Collections.Generic;
using System.Net.Http;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var client = new HttpClient())
            {
                // Initialize HTTP client
                client.BaseAddress  = new Uri("http://localhost:26242/api/", UriKind.Absolute);
                client.Timeout      = TimeSpan.FromSeconds(10);

                // Build session data to send
                var values          = new List<KeyValuePair<string, string>>();

                values.Add(new KeyValuePair<string, string>("Item1", "Value1"));
                values.Add(new KeyValuePair<string, string>("Item2", "Value2"));
                values.Add(new KeyValuePair<string, string>("Item3", "Value3"));

                // Send session data via POST using form-url-encoded content
                using (var content = new FormUrlEncodedContent(values))
                {
                    using (var response = client.PostAsync("session", content).Result)
                    {
                        Console.WriteLine(response.StatusCode);
                    }
                }
            }
        }
    }
} 
```

我通常将*IsFormUrlEncodedContent*和*ReadAsFormUrlEncodedContentAsync*方法作为 HttpContent 的扩展方法，但出于本示例的目的将它们放置在控制器中。

# php - 如何根据我的数据在 PHP 中创建这个 JSON 结构？

> ID：12942321
> 
> 赞同：1
> 
> 时间：2012-10-17T19:56:32.917
> 
> 标签：php, mysql, json

我在使用 PHP( `fetch_assoc`) 获取的 MySQL 数据库中有多个时间序列。

每个系列的 X 轴相同，但 Y 轴不同。

**X 轴**：*日期*时间（POSIX 值）。

**Y轴**：

```
air_temperature
dew_point_temperature
sea_level_pressure
wind_direction
wind_speed_rate
sky_condition_total_coverage_code
liquid_precipitation_depth_dimension_one_hr
liquid_precipitation_depth_dimension_six_hr 
```

我需要以特定的 JSON 结构输出这些数据。这是正确最终结果的示例：

```
{ "firstRow" : { "beginTime" : "2012-10-09 00:00:01",
      "endTime" : "2012-10-10 00:00:00",
      "tMax" : "56.0",
      "tMean" : "52.5",
      "tMin" : "49.0"
    },
  "interval" : "daily",
  "lastRow" : { "beginTime" : "2012-10-15 00:00:01",
      "endTime" : "2012-10-16 00:00:00",
      "tMax" : "72.0",
      "tMean" : "64.0",
      "tMin" : "56.0"
    },
  "series" : [ { "color" : "#FFAE28",
        "data" : [ [ 1349740801000,
              56
            ],
            [ 1349827201000,
              60
            ],
            [ 1349913601000,
              69
            ],
            [ 1350000001000,
              61
            ],
            [ 1350086401000,
              57
            ],
            [ 1350172801000,
              56
            ],
            [ 1350259201000,
              72
            ]
          ],
        "name" : "Maximum Temperature (ºF)",
        "type" : "spline",
        "yAxis" : 0,
        "zIndex" : 100
      },
      { "color" : "#4bf827",
        "data" : [ [ 1349740801000,
              52.5
            ],
            [ 1349827201000,
              56
            ],
            [ 1349913601000,
              59
            ],
            [ 1350000001000,
              55.5
            ],
            [ 1350086401000,
              49.5
            ],
            [ 1350172801000,
              49.5
            ],
            [ 1350259201000,
              64
            ]
          ],
        "name" : "Mean Temperature (ºF)",
        "type" : "spline",
        "yAxis" : 0,
        "zIndex" : 100
      },
      { "color" : "#2dc1f0",
        "data" : [ [ 1349740801000,
              49
            ],
            [ 1349827201000,
              52
            ],
            [ 1349913601000,
              49
            ],
            [ 1350000001000,
              50
            ],
            [ 1350086401000,
              42
            ],
            [ 1350172801000,
              43
            ],
            [ 1350259201000,
              56
            ]
          ],
        "name" : "Minimum Temperature (ºF)",
        "type" : "spline",
        "yAxis" : 0,
        "zIndex" : 100
      }
    ],
  "title" : "New York Laguardia Arpt: Daily Temperature",
  "xAxis" : { "max" : 1350259201000,
      "maxZoom" : 604800000,
      "min" : 1349740801000
    },
  "yAxis" : { "endOnTick" : false,
      "gridLineColor" : "#777",
      "gridLineWidth" : 1,
      "labels" : { "enabled" : true,
          "style" : { "color" : "#eee" }
        },
      "lineWidth" : 0,
      "max" : null,
      "maxPadding" : 0,
      "min" : null,
      "opposite" : false,
      "startOnTick" : true,
      "tickInterval" : null,
      "title" : { "style" : { "color" : "#eee" },
          "text" : "Degrees (Fahrenheit)"
        }
    }
} 
```

对此的一些帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:25:34.163

您需要将数据库中的数据获取到与您想要的 javascript 表示具有相同结构的 php 数组中。然后您可以使用`json_encode($arr_data)`创建 javascript 表示。

换句话说，您的 $arr_data 必须与此类似：

```
$arr_data = array(
  "firstRow" => array(
                  "beginTime" => "2012-10-09 00:00:01",
                  "endTime" => "2012-10-10 00:00:00",
                  "tMax" => "56.0",
                  "tMean" => "52.5",
                  "tMin" => "49.0"
                 ),
  "interval" => "daily",
  "lastRow" => array(
                 "beginTime" => "2012-10-15 00:00:01",
                 "endTime" => "2012-10-16 00:00:00",
                 "tMax" => "72.0",
                 "tMean" => "64.0",
                 "tMin" => "56.0"
               ),
   "series" => array(
      array(
        "color" => "#FFAE28",
        "data" => array(
                    array(1349740801000, 56),
                    array(1349827201000, 60),
                    etc...
                  ),
        "name" => "Maximum Temperature (ºF)",
        "type" => "spline",
        etc....
      )
    )
); 
```

所以，你必须编写一个循环来创建这个 php 数组，可能是这样的（取决于你的 db 字段）：

```
if ($result = $mysqli->query($query)) {
  $arr_data = array();
  $i = 0;
  while ($row = $result->fetch_assoc()) {
    $arr_firstRow = array();
    $arr_firstRow["beginTime"] = $row["beginTime"];
    $arr_firstRow["endTime"] = $row["endTime"];
    etc...
    $arr_data[$i]["firstRow"] = $arr_firstRow;
    $arr_data[$i]["interval"] = $row["interval"];
    etc...
    $i++;
  }
} 
```

然后，您可以使用`json_encode($arr_data)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:58:31.777

看看[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)/[`json_decode`](http://www.php.net/manual/en/function.json-decode.php)因为它会做你正在寻找的东西。

翻译：

*   JSON=>PHP
    `json_decode`数据和 PHP 将使用相同的大纲创建结构。
*   PHP=>JSON 使用 PHP 对象创建结构，然后调用`json_encode`以输出信息。

如果在编码之前需要进行一些操作，则必须这样做。从您问题的措辞来看，数据库不是直接一对一的 JSON 转换（因此您需要先使用数据创建结构，然后将该结构传递给编码器）。

# python - Python：行拆分值错误？

> ID：12942327
> 
> 赞同：0
> 
> 时间：2012-10-17T19:57:04.863
> 
> 标签：python

我正在使用 Python 2.7.3 顺便说一句

大家好，

我有一个小问题。问题是我一直遇到下面的星号线问题。（对不起，对 Python 有点陌生）

所以这是我到目前为止的代码：

```
with open('parsedChr','w') as fout, open('heartLungClassU.gtf','r') as filein:

    average = 0
    difference = 0
    position = ''
    bp = 0

    for line in filein:
      **chrom,cuff,exon,start,end,dot,sign,dots,gene,tranid,exonid,rest = line.split('\t',11)**
      ## notice 12 variables here so I tried to unpack with value 11

    ##more code after 
```

我不断收到此错误：

```
Traceback (most recent call last):
  File "parse.py", line 11, in <module>
    chrom,cuff,exon,start,end,dot,sign,dots,gene,tranid,exonid,rest = line.split('\t',11)
ValueError: need more than 9 values to unpack 
```

我不明白为什么——请注意，我将行分成 12 个变量。为什么 python 会抱怨需要 9 个以上的值来解包？我之前有过代码，我必须拆分为 6 个变量，因此在 line.split 中使用了 5 个（据我理解，5 个被分成 6 个部分），但我不明白为什么类似的逻辑在这里不起作用。

编辑：这是文件的一部分：

```
chr1    Cufflinks   exon    14765607    14765689    .   +   .   gene_id "XLOC_000018";  transcript_id   "TCONS_00001260";   exon_number "1";    oId "CUFF.68.1";    class_code  "u";    tss_id  "TSS40";
chr1    Cufflinks   exon    14766604    14767199    .   +   .   gene_id "XLOC_000018";  transcript_id   "TCONS_00001260";   exon_number "2";    oId "CUFF.68.1";    class_code  "u";    tss_id  "TSS40";
chr1    Cufflinks   exon    21156530    21156632    .   +   .   gene_id "XLOC_000028";  transcript_id   "TCONS_00002433";   exon_number "1";    oId "CUFF.88.1";    class_code  "u";    tss_id  "TSS69"; 
```

编辑：嗯。弄清楚了。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:02:29.710

要查看错误所在的确切行号，请执行以下操作：

```
for i, line in enumerate(filein):
    try:
        chrom,cuff,exon,start,end,dot,sign,dots,gene,tranid,exonid,rest = line.split('\t',11)
    except ValueError:
        print "ValueError on line", i+1
        print "line", repr(line)
        raise 
```

在您的评论中，您提供了指向您的文本文件的[链接。](http://dl.dropbox.com/u/108419362/file.gtf)我没有找到少于 11 个选项卡的任何行：

```
>>> for i, line in enumerate(urllib.urlopen('http://dl.dropbox.com/u/108419362/file.gtf')):
...     if line.count('\t') < 11:
...         print i+1, repr(line)
...         break
...
>>> 
```

仔细检查您是否真的打开了您认为正在打开的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:59:39.123

这意味着您的行不包含足够的（在这种情况下至少 9 个）制表符字符，因此`split()`call 将使用拆分值填充所有变量。

以下代码将产生相同的错误：

```
s = 'a b'
x, y, z = s.split(' ') # the result is ('a', 'b') but we have 3 variables
                       # on the left side of the expression. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T20:00:15.757

这意味着该行仅拆分为 9 个值：

例子：

```
>>> a,b,c='foo bar'.split()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: need more than 2 values to unpack 
```

您可以添加一个`if`条件来处理此问题：

```
if len(line.split('\t'))>=11: 
```

# c++ - 无法在 Windows 对话框上显示其他 unicode 东亚语言

> ID：12942337
> 
> 赞同：0
> 
> 时间：2012-10-17T19:57:42.243
> 
> 标签：c++, c, windows, winapi

我使用[DialogBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452%28v=vs.85%29.aspx) API 在我的应用程序中显示一个对话框。在 DLGPROC 过程回调的 WM_INITDIALOG 消息处理中，我可以在调试器中看到文本字符串是正确的 Unicode，并且[SetDlgItemText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645521%28v=vs.85%29.aspx)用于在对话框中的 Rich Edit 控件上设置文本。但是，当我尝试使用 GetDlgItemText API 从对话框中获取文本时，这些字符都是问号。

我的项目被编译为 Unicode。而且我还使用了 spy++，它显示 Windows Proc 是 Unicode。

我正在使用英语语言环境在 Windows 7 上测试中文，所以我还为我的机器安装了中文语言包，它也没有帮助。

我无法解释我在这里看到的。如果有人能对此或如何进一步调试有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:52:39.400

事实证明，这是由于那里的 RichEdit 控件。如果我只使用文本框，中文字符将与其他英文字符一起正确显示。所以在做了一些阅读之后，特别是[这个](https://stackoverflow.com/questions/1782409/unicode-rtf-text-in-richedit)，我做了一些尝试，我得到了它的工作。所以基本上我不应该使用 SetDlgItemText，而是应该使用以下代码（其中 m_strDisplay 是在富编辑上显示的文本）：

```
::SendMessage(hWndText, EM_AUTOURLDETECT, TRUE, NULL);
SETTEXTEX TextInfo = {0};
TextInfo.flags = ST_DEFAULT|SF_UNICODE;
TextInfo.codepage = 1200;
SendMessage(hWndText, EM_SETTEXTEX, (WPARAM)&TextInfo, (LPARAM)(LPCTSTR)m_strDisplay); 
```

在 RichEdit 控件上设置文本。

# ant - 依次调用 2 个 ivy 文件

> ID：12942341
> 
> 赞同：0
> 
> 时间：2012-10-17T19:57:54.903
> 
> 标签：ant, ivy, ant-contrib

我试图一个接一个地调用 2 检索。

当我的 ivy_portlet.xml 存在时，不会执行第二个调用。

当我的 ivy_portlet.xml 不存在时，第二个调用检索 ivy.xml 的内容

当有 2 个文件时，只执行第一个文件。

我错过了什么？

```
 <if>
        <available file="${basedir}/ivy_portlet.xml" />
        <then>
            <echo message="Getting runtime portlet dependencies using Ivy project's configuration" />
            <ivy:retrieve pattern="${project.lib.dir}/[conf]/[artifact]-[revision](-[classifier]).[ext]" file="${basedir}/ivy_portlet.xml"/>
        </then>
    </if>
    <if>
        <available file="${basedir}/ivy.xml" />
        <then>
            <echo message="Getting deps using Ivy project's configuration" />
            <ivy:retrieve pattern="${project.lib.dir}/[conf]/[artifact]-[revision](-[classifier]).[ext]" file="${basedir}/ivy.xml"/>
        </then>
    </if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:26:19.817

ant 代码看起来不错，我什至在本地对其进行了测试（没有 ivy 检索任务）并执行了两个 if 语句。当两个文件都存在并且第一次常春藤检索触发时，检索是否成功完成而没有错误或失败？也许它因故障而短路。在这里查看日志可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:26:40.727

这是诀窍：

当使用与 ivy.xml 不同的文件名时，必须调用 resolve。

```
<ivy:resolve file="${rpm.homedir}/Builder/ivy_portlet.xml"/> 
```

# php - 使用 jQuery 检索的隐藏数据

> ID：12942344
> 
> 赞同：0
> 
> 时间：2012-10-17T19:58:17.977
> 
> 标签：php, jquery

我有一个 PHP 文档，我在其中输出一些数据。我想让这些数据不可见，并使用 jQuery 来检索它的不同部分。

问题是，如果我在同一页面上输出数据，查看页面源时是否可以使其不可见？还是我需要将它放在一个单独的页面上并使用 AJAX 检索并显示在我的演示页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:00:58.347

如果您已将这些信息发送给客户，则您无法对客户完全隐藏某些内容。如果您希望它出现在客户端的屏幕上，该客户端将始终可以访问它。您可以使用 AJAX 请求从另一个来源检索信息，但如果客户愿意，他们仍然可以手动发出相同的请求，并检索相同的数据。

如果要隐藏数据，请不要将其发送给客户端。

如果您的真正意思是您不希望它引起客户的注意，那么请按照 Marc B 的建议将其存储在 javascript 中，直到需要放置在页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:01:16.847

您可以将数据存储在隐藏字段中..这将仅在标记中可见..

但是，如果您在谈论安全性时不希望显示数据，除非请求，否则最好将其存储在服务器上并通过发送 ajax 请求来检索它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T20:08:48.123

这一切都取决于结构html。您可以根据需要使用 jquery .show() 和 .hide()。

例如，如果您收到：

```
<span id="first">Hello world 1</span>
<span id="second">Hello world 2</span>

<script>

//you handle it as you like
$("#first").show();
$("#second").hide();

//or

$("#first").hide();
$("#second").show();

<script> 
```

# recommendation-engine - 带有推荐提要的“赞”框

> ID：12942347
> 
> 赞同：1
> 
> 时间：2012-10-17T19:58:38.987
> 
> 标签：recommendation-engine, facebook-likebox

我想使用类似框或其他东西来显示我的页面时间轴上给出的建议。它在墙上显示评论，但似乎没有插件来显示时间线上特别提示的任何“建议”。我查看了建议框，但这并不是我在这种情况下所想象的那样

# c++ - 是否可以将前导零存储在 int 中？

> ID：12942348
> 
> 赞同：5
> 
> 时间：2012-10-17T19:58:39.470
> 
> 标签：c++

我有一个编程任务，我需要加密一个 4 位整数，由用户输入。我已将 int 拆分为四个单独的值，并且加密和解密功能起作用。我的问题是当我将四个单独的整数重新组合在一起时，一些数字加密为零（例如 in:1234 out:0189），我想将输出存储到一个 int 中以用于其他函数。

现在我有一个半生不熟的解决方案，如果第一个 int 为 0，则首先打印 0。

```
void joinInt(){
    if(int1 == 0) {cout << 0;}
    joined = int1 * 1000;
    joined += int2 * 100;
    joined += int3 * 10;
    joined += int4;
    cout << joined << endl;
    } 
```

我的目标是返回joined（前导零），而不仅仅是在函数中打印它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:04:34.337

做这个：

```
#include <iomanip>
#include <iostream>

std::cout << std::setfill('0') << std::setw(4) << joined << std::endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:05:30.143

An`int`包含一个数字。它不包含任何特定的表示信息，例如它是从包含一个前导零还是两个的文本中输入的，或者它是用十六进制、八进制还是鸡划痕编写的，或者即使它是通过添加一堆数字来计算的。它只是一个值。

如果要显示`int`带有前导零的 an，则必须以这种方式显式转换它：

```
char buf [20];
snprintf (buf, sizeof buf, "%04d", myint);  // output base 10, + leading zeros
                                           // for a field width of 4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T20:03:49.660

这应该可以解决问题。

```
cout << setw(4) << setfill('0') << joined << endl; 
```

为了使用这些操纵器，您需要：

```
#include <iomanip> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T20:32:42.997

int 基本上存储前导零。您遇到的问题是您没有打印那里的前导零。

另一种不同的方法是创建一个函数，该函数将接受四个 int 值和一个字符串，然后返回一个带有数字的字符串。

使用这种方法，您将拥有一个具有非常好的凝聚力、无副作用、可在您需要完成类似操作的地方重复使用的辅助函数。

例如：

```
char *joinedIntString (char *pBuff, int int1, int int2, int int3, int int4)
{
    pBuff[0] = (int1 % 10) + '0';
    pBuff[1] = (int2 % 10) + '0';
    pBuff[2] = (int3 % 10) + '0';
    pBuff[3] = (int4 % 10) + '0';
    pBuff[4] = 0;                    // end of string needed.
    return pBuff;
} 
```

然后在需要打印值的地方，您可以使用参数和提供的字符缓冲区调用函数，然后只打印字符缓冲区。

使用这种方法，如果你有一些不合理的数字最终有多个前导零，你将得到所有的零。

或者您可能想要一个将四个 int 组合成一个 int 的函数，然后是另一个将组合 int 与前导零打印的函数。

```
int createJoinedInt (int int1, int int2, int int3, int int4)
{
    return (int1 % 10) * 1000 + (int2 % 10) * 100 + (int 3 % 10) * 10 + (int4 % 10);
}

char *joinedIntString (char *pBuff, int joinedInt)
{
    pBuff[0] = ((joinedInt / 1000) % 10) + '0';
    pBuff[1] = ((joinedInt / 100) % 10) + '0';
    pBuff[2] = ((joinedInt / 10) % 10) + '0';
    pBuff[3] = (joinedInt % 10) + '0';
    pBuff[4] = 0;                    // end of string needed.
    return pBuff;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T20:05:28.890

C++ 存储`int`为二进制数。但是所有 IO 都是字符串。因此，要显示 an`int`必须有从 an`int`到字符串的转换。在转换过程中，您可以从显示的数字中设置 with。使用流操纵器`setw`并`setfill`为此目的。

# jquery - 将页面插入 div 发布时 Internet Explorer 背景消失

> ID：12942349
> 
> 赞同：0
> 
> 时间：2012-10-17T19:58:44.563
> 
> 标签：jquery, internet-explorer, background-image

这是 IE 中的一个特定问题。

我正在尝试将 html 插入到 div 中，使用 div 就像 iframe 一样，它实际上可以这样工作

```
 $(document).ready(function() {
         $('#main_content').slideUp();
            $.post('main/main.html', function(data) {
                $('#main_content').html(data);
                $('#main_content').slideDown(800);
            });
        }); 
```

但问题是当它使这一行 $('#main_content').html(data); 如果我评论这条线，背景看起来不错！

任何想法？

身体在这里

```
<body> <div id="allcontent" class="allcontent" align="center">    <div id="content" class="content_Style" style="position:relative; width:964px;">
    <div id="banner_div" class="banner_div_Style"  onclick="changeFrame('main/main.html'); movebackward ()"></div>

    <div id="menu_text_content">...</div>

    <div id="basemenu_content" class="basemenu_content_Style" align="center">
        <img alt="MENU" src="images/webbase-menu1.png" width="964" height="73" style="position: absolute;" />
    </div>
    <div id="calle_content" class="calle_contect_Style" align="center">
        <img alt="CONTENT" src="images/web-callev3.png" width="964" height="584" />
    </div>

    <div id="calle_botton_content" class="calle_botton_contect_Style" align="center">
        <img alt="CONTENT" src="images/web-callebajav3.png" width="964" height="496" style="filter:alpha(opacity=40)" />
        <div id="foot" class="foot_Style" >
            <img src="images/copyright.png" width="239" height="23" alt="Copyrights Mind Bright Productions, LLC" />        
        </div>
    </div>

    <div id="main_content" class="main_content_Style">...</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:17:51.620

按照 jtheman 所说的解决问题，但只需使用

```
$('#main_content').load('main/main.html'); 
```

在 main.html 页面中，我将其取出所有 html、head 和 body 定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:16:10.893

我想您的问题是您将完整的 html 放入 div 中。那就是将第二个 html 结构放入 html 页面，这肯定会导致意想不到的结果，例如背景。尝试只加载页面的正文部分：

```
 $(document).ready(function() {
     $('#main_content').slideUp();
     $('#main_content').load('main/main.html body');
     $('#main_content').slideDown(800);
    }); 
```

# django - django 在 vi rtualenv 中与 pydev

> ID：12942350
> 
> 赞同：3
> 
> 时间：2012-10-17T19:59:02.590
> 
> 标签：django, pydev, virtualenv

mac ox 8.2、eclipse juno、python 2.7、django 1.4.1、pydev 2.7.1.2012100913

我对 python/django 比较陌生，我正试图让它在虚拟环境中与 pydev 一起工作。我设置了安装django的虚拟环境并成功创建并启动了一个django项目。之后，我决定使用我最喜欢的编辑器 eclipse。

我创建了一个新的 pydev/django 项目，配置并选择了一个新的解释器（来自 virtualenv）并使用它，我还在解释器库中包含了 virtualenv/lib/python2.7/site-packages/django。但是，在进入下一个对话框后，我收到一条错误消息“找不到 Django”

我查看了文档，但还没有找到任何解决方案。

我还想知道工作环境（或实际代码）是否需要位于 virtualenv 目录的子目录中）以及是否必须激活 virtualenv（我想是这样），尝试了所有这些选项，但还没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:02:49.820

据我所知，您不需要在解释器库中安装 django（即 virtualenv/lib/python2.7/site-packages/django）。在那里有站点包（即 virtualenv/lib/python2.7/site-packages）应该足以让您的解释器找到任何 django.* 包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T16:31:38.197

把它放在你的解释器库中：

```
virtualenv/lib/python2.7/site-packages/django 
```

将不起作用，因为没有`virtualenv/lib/python2.7/site-packages/django/django`（是的，两次），这转化为以下内容：

```
export PYTHONPATH=<...virtualenv>/lib/python2.7/site-packages/django:$PYTHONPATH
python -c 'import django' 
```

失败并`ImportError`显示消息。您需要提供父目录。

```
virtualenv/lib/python2.7/site-packages 
```

这转化为以下内容：

```
export PYTHONPATH=<...virtualenv>/lib/python2.7/site-packages:$PYTHONPATH
python -c 'import django' 
```

.

# css - 如何使用填充将背景图像定位在表格单元格内

> ID：12942356
> 
> 赞同：1
> 
> 时间：2012-10-17T19:59:28.247
> 
> 标签：css

在应用程序中，我有几列可以包含内联可编辑值。对于这些单元格，我想显示一个铅笔图标：

```
td.editable
{
    padding-right: 20px;
    background-image: url(pencil.png);
    background-repeat: no-repeat;
    background-position: center right;
} 
```

这个 CSS 几乎很好，除了......我想在单元格边框和图像之间有一个 2px 的空间。是否可以使用背景图片和 CSS 来实现？如果没有，我该如何实现？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:03:47.527

只需使用 2px 透明边框重新保存 BG 图像，并使输入高 4px 以适应新高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:01:43.167

将 background-position 属性与 x% y% 一起使用。

[http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:02:25.890

试试这个：

```
table { border-spacing: 2px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:08:44.410

最简单的方法？在您的 pencil.png 右侧添加 2 个像素。您可以随意使用背景位置，但不值得付出努力。

# c# - C# 属性文件系统

> ID：12942358
> 
> 赞同：0
> 
> 时间：2012-10-17T19:59:38.537
> 
> 标签：c#, asp.net, filesystems

```
 DirectoryInfo directory;
 public string Name {
            get { return this.directory.Name; }
            set { this.directory.Name = value; }
        } 
```

你好。我在 c# 中有这段代码。它不起作用我收到此错误：

> *属性或索引器 System.Io.FileSystemInfo.Name 不能分配给 - 它是只读的。*

我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:00:49.800

正如编译器所说，`DirectoryInfo`的继承`Name`属性是只读的。表述`this.directory.Name = value;`错误；您不能分配给只读属性。

要使您的类的`Name`属性为只读，只需完全删除 setter。如果您希望该属性是可写的，那么您需要弄清楚写入您的`Name`属性意味着什么，并执行任何必要的逻辑来适当地转换对象的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:01:01.670

我能想到三种可能：

*   完全删除 setter，使其成为只读属性
*   更改 的值`directory`以引用指定目录
*   （奇怪而危险！）重命名文件系统上的目录，使其名称现在与指定的一样

在不知道您的财产真正要代表什么的情况下，很难真正说出这些选项中的哪一个是合适的（如果有的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:01:56.917

`DirectoryInfo.Name`是只读的，不能修改。您应该将其从代码中删除。然而，如果你想改变一个目录的名字，你可以这样写：

```
System.IO.Directory.Move("oldDirName", "newDirName"); 
```

# android - AsyncTask - 扩展和 doInBackground 需要哪些参数？

> ID：12942361
> 
> 赞同：3
> 
> 时间：2012-10-17T19:59:48.647
> 
> 标签：android, android-asynctask

这段使用 AsyncTask 的代码有什么问题？特别是： - 我需要在 fetchSchools 中放入哪些参数 - 我需要在 doInBackground 中放入哪些参数？

我发现了很多“有用”的示例，但它们都在这些参数中使用伪代码，并且没有解释我实际需要放在那里的内容。

“我得到 Eclipse 错误，方法 fetchSchools 必须实现继承的抽象方法 AsynchTask...”

我不需要传递任何东西，我希望它返回一个字符串。

```
public class fetchSchools extends AsyncTask<Void, Void, String> {

public String doInBackground(String retval) {
       StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();

        HttpGet httpGet = new HttpGet("http://www.domain/schools.php");
        try 
     {
          HttpResponse response = client.execute(httpGet);
          StatusLine statusLine = response.getStatusLine();
          int statusCode = statusLine.getStatusCode();
          if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String
     line;

            int a=0;
            while ((line = reader.readLine()) != null) {
              builder.append(line);
            Log.i(MainActivity.class.getName(), "Reading in: " + a +" : "+ line);
            a++;
            }
          } else {
            Log.e(MainActivity.class.toString(), "Failed to download file");
          }
        } catch (ClientProtocolException e) {
          e.printStackTrace();
        } catch (IOException e)
     {
          e.printStackTrace();
        }

        return builder.toString(); 
}

protected void onPostExecute() {
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T20:03:59.533

你给了 doInBackground 一个字符串参数，所以异步任务的第一个参数必须是字符串而不是无效的。

```
AsyncTask<String , Void, String> { 
```

如果您不想传递参数，请不要将参数传递给 doInBackground 函数。

检查此页面以获取异步任务参考：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

asynctask 的第一个参数进入 doInBackground 函数，第二个进入 onprogressUpdate 函数，第三个参数 foes 进入 onpostexecute 函数。

我想你想这样做：

```
 public class fetchSchools extends AsyncTask<Void, Void, String> {
    @Override
    protected String doInBackground(Void... arg0) {
      StringBuilder builder = new StringBuilder();
      HttpClient client = new DefaultHttpClient();
      // ...

     return builder.toString();
    }
    protected void onPostExecute(String retval) 
    {

    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:06:54.523

> 我不需要传递任何东西，我希望它返回一个字符串。

然后

```
public class fetchSchools extends AsyncTask<Void, Void, String> {
  @Override
  protected String doInBackground(Void... params) {
    // ...
  }
} 
```

# cordova - jquery-mobile 和 phonegap 中的语言切换

> ID：12942363
> 
> 赞同：0
> 
> 时间：2012-10-17T19:59:59.377
> 
> 标签：cordova, jquery-mobile

我正在使用 jquery-mobile 和 phonegap 编写一个应用程序，并尝试使其成为多种语言。现在，我可以让它工作，除了两个外部页面。它适用于所有内部页面，例如 . 但是两个外部页面不起作用。我的 javascript 包含在 index.html 中，其中包含所有内部页面。我怎么解决这个问题。任何建议都是很大的帮助。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:35:07.507

我认为处理此问题的最佳方法是将一些代码绑定到“pageload”事件，然后检测外部页面的 ID，并在显示页面之前运行任何必要的操作。

如果我没记错的话，这应该有效：

```
$("[data-role=page]").live("pageload", function(event,data) {
    if (this.attr("id") == "externalPageId") {
        // perform necessary operations
    }         
}); 
```

# python - 在python中检测像素化图像

> ID：12942365
> 
> 赞同：5
> 
> 时间：2012-10-17T20:00:08.357
> 
> 标签：python, image, pixel

我正在尝试确定图像是否为平方（像素化）。

我听说过 numpy 或 scipy 的 2D Fourrier 变换，但它有点复杂。

目标是确定由于这样的不良压缩导致的平方区域的数量（img a）：

![](../Images/91e9bd32faa2cdb4a5a6cb4fd6de62f2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:35:35.633

我不知道这是否可行 - 但是，您可以尝试让最近的邻居围绕一个像素。像素化方块将是区域周围 RGB 值的可见跳跃。

您可以找到图像中每个像素的最近邻居，例如

```
def get_neighbors(x,y, img):
    ops = [-1, 0, +1]
    pixels = []
    for opy in ops:
        for opx in ops:
            try:
                pixels.append(img[x+opx][y+opy])
            except:
                pass
    return pixels 
```

这将为您提供源图像区域中最近的像素。

要使用它，你会做类似的事情

```
def detect_pixellated(fp):
    img = misc.imread(fp)
    width, height = np.shape(img)[0:2]

    # Pixel change to detect edge
    threshold = 20

    for x in range(width):
        for y in range(height):
            neighbors = get_neighbors(x, y, img)

            # Neighbors come in this order:
            #  6   7   8
            #  3   4   5
            #  0   1   2

            center = neighbor[4]
            del neighbor[4]

            for neighbor in neighbors:
                diffs = map(operator.abs, map(operator.sub, neighbor, center))
                possibleEdge = all(diff > threshold for diff in diffs) 
```

经过进一步思考，使用 OpenCV 并进行边缘检测并获取轮廓尺寸。这将更容易和更强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T09:13:47.713

If you scan through lines of it it's abit easier because then you deal with linear graphs instead of 2d image graphs, which is always simpler.

Solution:

scan a line across the pixels, put the line in an array if it is faster to access for computations, and then run algorithms on the line(s) to determine the blockiness:

1/ run through every pixel in your line and compare it to the previous pixel by substracting the value between the two pixels. make an array of previous pixel values. if large jumps in pixel values are at regular invervals, it's blocky. if there are large jumps in values combined with small jumps in values, it's blocky... you can assume that if there are many equal pixel differences, it's blocky, especially if you repeat the analysis twice at 2 and 4 neighbour pixel intervals, and on multiple lines.

you can also make graphs of pixel differences between pixels 3-5-10 pixels apart, to have additional information on gradient changes of sampled lines of pics. if the ratio of pixel differences of neighbour pixels and 5th neighbour pixels is similar, it also indicates unsmooth colors.

there can be many algorythms, including fast fourrier on a linear graph, same as audio, that you would use on line(s) from the pic, that is simpler than a 2d image algorythm.

# php - 通过 post 变量传递代码？

> ID：12942368
> 
> 赞同：0
> 
> 时间：2012-10-17T20:00:16.863
> 
> 标签：php, file

我正在编写一个小型模板编辑器，我遇到的问题是代码不断转换为其他字符，例如：

```
&lt;?php

$hello = "hello";

?&gt; 
```

并将其准确写入文件，我想编写实际代码，php 和 html。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:02:09.920

在这种特定情况下，您应该通过`html_entity_decode`函数运行文件的内容。

> [文档](http://il.php.net/manual/en/function.htmlspecialchars.php)中的描述-
> 将特殊字符转换为 HTML 实体

```
$str = '&lt;?php';
echo html_entity_decode($str); 
```

输出 -`<?php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:02:14.880

您的问题是您的 PHP 正在调用[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php). 这会将可能存在问题的字符（例如`<>`）转换为其 HTML 安全版本。您可以通过删除`htmlspecialchars()`函数（不推荐，因为它可能是有原因的）或调用[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php)要保存到文件的代码来解决此问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T20:08:26.597

我不一定推荐使用 html_entity_decode。仅通过反转编码来修复错误编码的文本通常是一个坏主意。相反，首先要弄清楚为什么它的编码不正确。

# c - C中的指针和循环

> ID：12942369
> 
> 赞同：9
> 
> 时间：2012-10-17T20:00:23.950
> 
> 标签：c, pointers, loops

请知道我对 C 和一般指针还是很陌生......**这是一个类，所以我不要求明确的代码**，只是帮助*理解*这些概念。

我正在尝试创建一个循环以将随机值分配给结构中的 int。当我将值分配给指针或数组的当前迭代时，就会出现问题。

```
struct student{
    int id;
    int score;
};

struct student* allocate(){
    /*Allocate memory for ten students*/
    int ROSTER_SIZE = 10;
    struct student *roster = malloc(ROSTER_SIZE * sizeof(struct student));

    /*return the pointer*/
    return roster;
}

void generate(struct student* students){
    /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0 and 100*/
    int i = 0;

    for (i = 0; i < 10; ++i) {
        students[i]->id = i + 1;
        students[i]->score = rand()%101;
} 
```

现在，根据我的理解，这很可能是不正确的，我应该能够`students[i]`为每次迭代分配值，但 VS 2010 告诉我“表达式必须具有指针类型”。不是已经是指针了吗？它作为指针传递给函数，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T20:01:46.463

改变：

```
students[i]->id = i + 1;
students[i]->score = rand()%101; 
```

到：

```
students[i].id = i + 1;
students[i].score = rand()%101; 
```

原因：`students`是一个指向数组的指针`struct student`。`students[i]`是一个实际的`struct student`. 请注意，`students[i]`实际上等同于`*(students + i)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T20:02:49.740

student 是一个指针，但是当您对其进行索引时，您指的是结构的实际实例，因此您需要使用`.`而不是`->`访问该结构中的字段

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T20:03:41.750

> 它不是 (students[i]) 已经是一个指针吗？

不。在你取消引用它之后（记住：在指针上使用数组订阅语法`ptr[index]`意味着`*(ptr + index)`！），它将是一个普通的结构，你应该使用`.`字段成员访问器语法而不是*指向结构*`->`的指针：

 *```
students[i].id = i + 1; 
```

等应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T20:09:01.547

保罗的回答将解决您的问题。但既然你要求理解这个概念......

基本上，您所做的是在堆上动态分配数据数组。现在students*确实是*一个指向堆上Student数组的指针。但是，当您将其称为 student[index] 时，您实际上是在做这样的事情

```
*(students + index) 
```

您指的是位于 (students + index) 位置的 Student 实例。请注意，它已经被取消引用，因此您已经直接引用了该实例。因此，当你写 students[index]->id 时，它与

```
*(students + index)->id 
```

您现在应该清楚这根本不是正确的语法。你应该改为写

```
students[index].id 
```

这相当于

```
(*(students + index)).id 
```

这实际上意味着：您正在通过内存中的 index * sizeof(Student) 字节递增名为 students 的指针，并访问其 id 字段。*

# javascript - jQuery 使用 $(this) 选择器更改单击按钮的值

> ID：12942372
> 
> 赞同：2
> 
> 时间：2012-10-17T20:00:46.897
> 
> 标签：javascript, jquery, html

我正在尝试在单击按钮时更新按钮的文本。我有许多具有相同类但没有 id 的按钮。为什么[这](http://jsfiddle.net/qU5tR/7/)不起作用？

```
<input type="button" class="add-button" value="Default" />
<input type="button" class="add-button" value="Default" />
<input type="button" class="add-button" value="Default" />
<input type="button" class="add-button" value="Default" />

$(document).ready(function() {
    $('.add-button').click(function() {
        alert('clicked');
        $(this).html('Changed');
    });
});​ 
```

警报已触发，但按钮未更改。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T20:02:16.923

用于. `this.value`_ `input`见下文，

```
$(document).ready(function() {
    $('.add-button').click(function() {
        alert('clicked');
        this.value = 'Changed';
    });
});​ 
```

**演示：http:** [//jsfiddle.net/qU5tR/10/](http://jsfiddle.net/qU5tR/10/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:02:47.613

试试这个

```
 $(this).val("changed"); 
```

`html()`只替换`innerHtml`. 它不会更改按钮值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T20:02:19.300

你想改变它的价值，而不是 html。它没有 html 子级。

```
$(this).val('Changed'); 
```

或者

```
this.value = "Changed"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T20:03:01.160

我想你需要的是

```
$(this).val('Changed'); 
```

代替

```
$(this).html('Changed'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T20:03:09.470

这些是没有 innerHTML 的输入按钮，要设置按钮文本，您必须设置按钮的 value 属性或 value 属性。

```
$(this).attr('value', 'Changed'); /* Change value attribute */
// or this.value = 'Changed';     /* Change value property */ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T20:02:24.227

### 正确的方法：

您正在尝试更改该值，因此请使用以下[`.val()`](http://api.jquery.com/val/)方法：

```
 $(this).val('Changed'); 
```

你也可以简单地使用`this.value = 'Changed';`, 因为`value`它是一个跨浏览器的 DOM 属性，甚至是[`.prop()`](http://api.jquery.com/prop/)方法：

```
$(this).prop('value', 'Changed'); 
```

### 为什么它不起作用：

`.html()`改变元素的内容，`input`元素可以没有内容，它没有结束标签。它可以与一个`<button>`元素一起使用，它有一个结束标签和内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T20:02:32.147

更改值而不是 html。表单字段的 jQuery 内容可以通过 val 更改。

```
$(document).ready(function() {
    $('.add-button').click(function() {
        alert('clicked');
        $(this).val('Changed'); // or this.value == 'Changed';
    });
});​ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-17T20:04:27.847

尝试

```
this.value = 'changed' ; 
```

这比`$(this).val('changed');`

[小提琴](http://jsfiddle.net/sushanth009/3z3Th/2/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-17T20:01:59.630

试试`.attr()`方法：

```
$(document).ready(function() {
    $('.add-button').click(function() {
        alert('clicked');
        $(this).attr( 'value', 'NEW_TEXT');
    });
});​ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-17T20:04:41.827

因为您的按钮不包含任何 html。所以你可以改变它或设置它。你需要的是：

```
$(this).val("Changed"); 
```

# data-binding - Windows Phone 应用程序：在包含在 ListBox 中的 UserControl 中绑定数据

> ID：12942376
> 
> 赞同：1
> 
> 时间：2012-10-17T20:00:58.700
> 
> 标签：data-binding, user-controls, listbox, windows-phone

我有一个“AddressListBox”列表框，其中包含“AddressDetails”用户控件项，如下面的 .xaml 文件提取所示。Addresses 集合定义为

ObservableCollection< 地址 > 地址

Street、Number、PostCode、City 是 Address 类的属性。当我使用如下所示的“{Binding property}”语法时，绑定失败。当我在注释掉的代码中使用“虚拟”字符串时，绑定成功。我也尝试过“{Binding Path=property}”语法但没有成功。你能建议我应该使用什么语法来绑定用户控件中的数据吗？

```
 <ListBox x:Name="AddressListBox"

                 DataContext="{StaticResource dataSettings}" ItemsSource="{Binding Path=Addresses, Mode=TwoWay}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <!--
                    <usercontrols:AddressDetails AddressRoad="dummy" AddressNumber="dummy2" AddressPostCode="dummy3" AddressCity="dummy4">
                    </usercontrols:AddressDetails>
                    -->

                    <usercontrols:AddressDetails AddressRoad="{Binding Street}" AddressNumber="{Binding Number}" AddressPostCode="{Binding PostCode}" AddressCity="{Binding City}">
                    </usercontrols:AddressDetails>

                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:57:57.730

您需要将用户控件上的数据上下文设置为这样的项目。

`<usercontrols:AddressDetails DataContext={Binding} ... </usercontrols:AddressDetails>`

现在您的其他绑定应该可以正常工作，因为它们与项目相关。

# matlab - 在有限域域中找到方程 Ax = B 的 x

> ID：12942380
> 
> 赞同：0
> 
> 时间：2012-10-17T20:01:02.223
> 
> 标签：matlab, algebra

根据有关[Galois Field Computations](http://www.mathworks.com/help/comm/ug/error-detection-and-correction.html#fp5602)的 matlab 文档，“如果 A 不是正方形，MATLAB 会尝试找到一个特定的解决方案。如果 A'*A 或 A*A' 是奇异数组，或者 A 是表示过度确定的系统，尝试可能会失败。”

我的 A 矩阵的尺寸为 1X2，我从 GF(2^2) 中选择的任何组合都会导致 A'*A 或 A*A' 为单数。有没有办法在这里计算 x ？

例如 Ax = B, A = [3 2], x = [1;3] 和 B = 2。现在如何找回 x？

# python - 在 Python 上的 Ubuntu 中查找函数声明

> ID：12942381
> 
> 赞同：-2
> 
> 时间：2012-10-17T20:01:05.177
> 
> 标签：python, graph-tool

我有一个模糊定义的模块类 Graph 的函数，我称之为 gt（它是图形工具）。所以我声明 g = gt.graph() 然后想使用 g.degree_property_map 但不知道如何。因此，我想查看代码 g.degree_property_map 或在这种情况下仅定义函数的位置。我怎么能找到那个？我正在使用虚拟机上的命令行。

谢谢

作为参考，有问题的库是 graph-tool - [http://projects.skewed.de/graph-tool/](http://projects.skewed.de/graph-tool/)

另外，我目前正在使用 from graph_tool.all import * 导入它。这当然有点问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:06:29.470

你可以使用`inspect.getsource(gt.Graph.degree_property_map)`. （你必须`import inspect`。）

当然，你传入的内容`getsource()`会根据你导入的方式而改变`Graph`。所以如果你用过`from graphtools.all import *`，你只需要用`inspect.getsource(Graph.degree_property_map)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:09:00.013

如果您打开交互式 python（`python`在命令行上键入并按 ENTER），您应该能够运行命令`help(<graph's module name>)`，然后，在`FILE`生成的帮助文档部分下，您应该看到您感兴趣的代码的绝对路径在。

例如，我刚刚跑了：

```
import numpy
help(numpy)

# Returned documentation containing:
# FILE
# /usr/lib/python2.7/dist-packages/numpy/__init__.py 
```

还，

```
import my_module # A module I just created that contains the "Line" class
help(my_module)

# Returned documentation containing:
# FILE
# /home/<my user name>/Programming/Python/my_module.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:17:00.380

如果它是普通函数（不是内置函数、ufunc 等），您可以尝试使用该`func_code`属性

例如：

```
>>> inspect.iscode
<function iscode at 0x02EAEF30>
>>> inspect.iscode.func_code
<code object iscode at 02EB2B60, file "C:\Python27\lib\inspect.py", line 209> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:35:00.540

没关系，我只是做了帮助（graph_tool）并手动跳过了代码。不过感谢您的帮助！

# android - 在多项选择测试应用程序中使用不使用任何适配器的新内容刷新视图

> ID：12942386
> 
> 赞同：1
> 
> 时间：2012-10-17T20:01:17.340
> 
> 标签：android, android-layout, view, android-activity, multiple-choice

我是 Android 应用程序创建世界的新手。

我正在创建一个应用程序，其中有多项选择题。并且，它可能是 25、50 或 100，具体取决于用户的选择。现在在一个活动中，会有一个带有 4 个选项的问题以及下一个/上一个按钮来导航到下一个或上一个问题。如何实现下一个/上一个按钮功能，该功能将在同一活动中显示下一个/上一个问题，只是用新问题或以前回答的问题更新内容？任何帮助，将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:07:20.763

一种简单的方法（尽管在其他人看来可能不是最好的）是定义一个带有 TextView 问题的 Activity 和带有 RadioButtons 答案的 RadioGroup 。（当然还有按钮。）

然后，每当按下其中一个按钮时，动态更改 TextView 的内容以便出现正确的问题，并更改单选按钮的内容以便出现可能的答案。存储用户按下其中一个按钮时选择的任何 RadioButton。

您可以将问题和答案存储在数据库中。然后，`onClickListener()`分配给按钮的按钮应获取数据库中的下一条记录并使用`yourTextView.setText(theQuestionFromTheDB)`. 答案也一样。要存储选择的答案，您可以使用

```
int selectedId = radioSexGroup.getCheckedRadioButtonId(); 
```

然后将该值写入数据库。

除了数据库，您还可以在代码中像数组一样使用 collectiosn，但我认为最初阅读所有问题会有点痛苦。当然，这取决于您从哪里得到问题。如果它是一个原始的 .txt 文件或您想要动态读取到您的应用程序中的东西，那么数组或 ArrayList 并不是那么糟糕。

有关如何在活动 UI 中添加和使用 RadioButtons 的示例，[请单击此处](http://www.mkyong.com/android/android-radio-buttons-example/)。

# haskell - Haskell 中的 Lambda 演算：有什么方法可以检查 Church 数字的类型吗？

> ID：12942397
> 
> 赞同：17
> 
> 时间：2012-10-17T20:01:51.137
> 
> 标签：haskell, lambda-calculus, church-encoding

我在 Haskell 中玩一些 lambda 演算的东西，特别是教堂数字。我定义了以下内容：

```
let zero = (\f z -> z)
let one = (\f z -> f z)
let two = (\f z -> f (f z))
let iszero = (\n -> n (\x -> (\x y -> y)) (\x y -> x))
let mult = (\m n -> (\s z -> m (\x -> n s x) z)) 
```

这有效：

```
:t (\n -> (iszero n) one (mult one one)) 
```

发生检查失败：

```
:t (\n -> (iszero n) one (mult n one)) 
```

我玩过我的常量`iszero`，`mult`它们似乎是正确的。有什么方法可以使这个可打字吗？我不认为我在做什么太疯狂了，但也许我做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T20:15:45.960

在顶层查看时，您的定义是正确的，它们的类型也是正确的。问题在于，在第二个示例中，您`n`以两种不同的方式使用了不同的类型——或者更确切地说，它们的类型无法统一，并且尝试这样做会产生无限类型。类似的用法`one`可以正常工作，因为每种用法都独立地专门用于不同的类型。

为了以一种直接的方式进行这项工作，您需要更高级别的多态性。教堂数字的正确类型是`(forall a. (a -> a) -> a -> a)`，但无法推断出更高级别的类型，并且需要 GHC 扩展，例如`RankNTypes`. 如果您启用适当的扩展（我认为在这种情况下您只需要 rank-2）并为您的定义提供显式类型，它们应该可以在不更改实际实现的情况下工作。

请注意，使用更高级别的多态类型存在（或至少存在）一些限制。但是，您可以将教堂数字包裹在类似的东西中`newtype ChurchNum = ChurchNum (forall a. (a -> a) -> a -> a)`，这样也可以给它们一个`Num`实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T20:26:34.147

让我们添加一些类型签名：

```
type Nat a = (a -> a) -> a -> a

zero :: Nat a
zero = (\f z -> z)

one :: Nat a
one = (\f z -> f z)

two :: Nat a
two = (\f z -> f (f z))

iszero :: Nat (a -> a -> a) -> a -> a -> a
iszero = (\n -> n (\x -> (\x y -> y)) (\x y -> x))

mult :: Nat a -> Nat a -> Nat a
mult = (\m n -> (\s z -> m (\x -> n s x) z)) 
```

如您所见，除了`iszero`.

让我们看看你的表达会发生什么：

```
*Main> :t (\n -> (iszero n) one n)
<interactive>:1:23:
    Occurs check: cannot construct the infinite type:
      a0
      =
      ((a0 -> a0) -> a0 -> a0)
      -> ((a0 -> a0) -> a0 -> a0) -> (a0 -> a0) -> a0 -> a0
    Expected type: Nat a0
      Actual type: Nat (Nat a0 -> Nat a0 -> Nat a0)
    In the third argument of `iszero', namely `(mult n one)'
    In the expression: (iszero n) one (mult n one) 
```

看看错误如何使用我们的`Nat`别名！

我们实际上可以使用更简单的表达式得到类似的错误`\n -> (iszero n) one n`。这就是问题所在。既然我们在打电话`iszero n`，我们就必须有`n :: Nat (b -> b -> b)`。此外，由于`iszero`s 类型，第二个和第三个参数，`n`并且`one`，必须具有类型`b`。现在我们有两个关于 类型的方程`n`：

```
n :: Nat (b -> b -> b)
n :: b 
```

这是不可调和的。真可惜。

# android - 是否可以向 Android listactivity 添加另一个视图？

> ID：12942420
> 
> 赞同：0
> 
> 时间：2012-10-17T20:02:37.360
> 
> 标签：android, geometry, listactivity

我想在我的列表活动中添加一个等待圈。我在这篇文章中使用了答案： [Using the "animated circle" in an ImageView while loading stuff](https://stackoverflow.com/questions/5442183/using-the-animated-circle-in-an-imageview-while-loading-stuff)

但是我认为我必须添加等待圈布局的 setContentView 才能使用 findViewById。问题是我不知道我是否可以在同一个活动中使用两次 setContentView。

现在，当我尝试它时，我收到一个错误，我最常使用 setContentView 和我想要使用的列表视图布局的 id。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview);}

    public void showCallList() // show call list on screen
{
    getListView().setVisibility(View.GONE);
    findViewById(R.loadingPanel).setVisibility(View.VISIBLE);
    CallListArrayAdapter adapter = new CallListArrayAdapter(this,
            arrayListCalls);
    setListAdapter(adapter);
    findViewById(R.id.loadingPanel).setVisibility(View.GONE);
    getListView().setVisibility(View.VISIBLE);
} 
```

我得到的例外是：

> E/AndroidRuntime(4320)：原因：java.lang.RuntimeException：您的内容必须有一个 id 属性为 'android.R.id.list' 的 ListView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:08:27.393

您不能再次调用 setContentView。相反，您应该将附加布局添加到还包含 ListView 的主 XML 中。然后你可以在那里找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:09:22.027

实际上，您不需要 ListActivity 来拥有 ListView。您也可以将普通的 Activity 与普通的 layout.xml 一起使用，然后`<ListView>`在其中放置一个以及您想要的所有其他视图。

而不是`getListView()`由 ListActivity 定义的 ，使用`findViewById()`您在 layout.xml 中提供的 ListView 的普通 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:13:54.207

如果您尝试呈现自己的自定义视图（动画圈），并将其添加到您必须使用 addContentView（视图视图，ViewGroup.LayoutParams 参数）的活动中，它会为活动添加额外的内容视图。在活动中的任何现有视图之后添加 - 不会删除现有视图。这些是参数： view 要显示的所需内容。params 视图的布局参数。

但是正确的方法（当然取决于您要加载的数据量）是使用 AsyncTask ，它可以正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。异步任务由在后台线程上运行的计算定义，其结果在 UI 线程上发布。异步任务由 3 个通用类型定义，称为 Params、Progress 和 Result，以及 4 个步骤，称为 onPreExecute、doInBackground、onProgressUpdate 和 onPostExecute。例如，您可以在 onPreExecute 方法上调用进度对话框（功能作为您的等待圈）并在 doInBackground 方法中列出您的文件。祝你好运！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:14:37.540

是的，它可以很容易地完成。

像创建普通活动一样创建布局 xml，并在此活动中创建一个空的列表视图`android:id=@android:id/list`。

当您启动 ListActivity 时，将 ContentView 设置为您的自定义布局。将`ListActivity`自动找到带有 id 的 listView `android:id/list`，并将该 listview 用于所有与列表相关的功能。

ListActivity 中的相关文本：

> ListActivity 有一个默认布局，它由屏幕中央的单个全屏列表组成。但是，如果您愿意，您可以通过在 onCreate() 中使用 setContentView() 设置您自己的视图布局来自定义屏幕布局。为此，您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）

# javascript - javascript在字符串中添加回车以提高可读性

> ID：12942421
> 
> 赞同：4
> 
> 时间：2012-10-17T20:02:37.940
> 
> 标签：javascript, string

我想知道这是否可行，如果可以，我有一个长字符串，出于可维护性和可读性的目的，我想将换行符放入代码中，如下所示：

```
slices += 
    '<div 
        class="'+settings.sliceClass+'"
        style="
            width:' + slicewidth + 'px;
            height:' + sliceheight + 'px;
            left:' + left + 'px;
            top:' + top + 'px;
    "><img src="'+slide.properties.src+'"
        style="
            position: relative;
            left:' + -left + 'px;
            top:' + -top + 'px;
            width:' + Math.round(slide.properties.image.width * slide.properties.scale.width) + 'px;
            height:' + Math.round(slide.properties.image.height * slide.properties.scale.height) + 'px;
    ">
    </img></div>'
); 
```

我不希望这些换行符出现在 HTML 输出中。

但是，这会返回一个`SyntaxError: Unexpected EOF`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:05:38.627

只需在中断每一行之前添加一个反斜杠：

```
var str = "sfdsadadadas\
           asdasdasdasdasd\
           sdfsdfsfsd"; 
```

请记住，每个反斜杠和下一行（缩进）内容之间的空格**将**是字符串的一部分。`<pre>`除非您使用预先格式化的文本（如标签中的内容），否则这对 HTML 输出应该不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T20:08:50.047

不，字符串不能包含未转义的换行符，只能包含续行符，这意味着您可以在输出字符串中获得缩进空格。规范的操作部分是[第 7.8.4 节](http://es5.github.com/#x7.8.4)：

> ```
> SingleStringCharacter ::
>     SourceCharacter but not single-quote or backslash or LineTerminator
>   | \ EscapeSequence
>   | LineContinuation 
> ```

“but not ... or LineTerminator”部分表示字符串不能包含换行符，但“| LineContinuation”表示 \ *<LineTerminator>*是可以的。读入*LineContinuation*的字符串值表明它对整个引用字符串的字符串值没有贡献，并且不会占用任何前导空格。

你可以做

```
slices += 
    ['<div', 
       ' class="', settings.sliceClass, '"',
       ' style="',
     ...
    ].join(''); 
```

使每一行成为数组中的元素，并加入空字符串。

如果您稍后更改代码以执行更复杂`+`的数字操作而不仅仅是`-left`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:06:59.050

修改代码：。

```
slices +=       '<div'+
            'class="'+settings.sliceClass+'"'+
            ..... 
```

或者你可以求助于数组

```
 var temp = [
            '<div',
             'class="'+settings.sliceClass+'"',
            ...

           '</img></div>'
  ];
slices  += temp.join(""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:08:19.843

我认为问题是由于使用`'`（单引号）并在其中`"`包含（双引号）。所以我会尽量逃避你的报价，喜欢这样：

```
var component = "<div class=\"rounded-border\">" +
    "<p>Sample Content here " + dynamicValue + "</p>" +
    "</div>"; 
```

ps 注意`+`操作符的使用，这个非常有用，保证下一行数据不变，否则可能会有回车或空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T20:08:57.283

```
 slices += 
      '<div' +
          'class="'+settings.sliceClass+'"' +
          'style="' +
              'width:' + slicewidth + 'px;' +
              'height:' + sliceheight + 'px;' +
              'left:' + left + 'px;' +
              'top:' + top + 'px;' +
      '">' +
        '<img src="'+slide.properties.src+'"' +
          'style="' +
            'position: relative;' +
              'left:' + -left + 'px;' +
              'top:' + -top + 'px;' +
              'width:' + Math.round(slide.properties.image.width * slide.properties.scale.width) + 'px;' +
              'height:' + Math.round(slide.properties.image.height * slide.properties.scale.height) + 'px;' +
        '" />' +
      '</div>'; 
```

# c++ - 在 C++ 中读取文本文件

> ID：12942428
> 
> 赞同：-2
> 
> 时间：2012-10-17T20:02:53.947
> 
> 标签：c++

> **可能重复：**
> [链接：致命错误 LNK1123：转换为 COFF 期间失败：安装 VS2012 发布预览后文件无效或损坏](https://stackoverflow.com/questions/10888391/link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-invalid-or-c)

我正在尝试通过 windows32 控制台应用程序读取 c++ Visual Studio 2010 中的文本文件。当使用 fstream 尝试读取文本文件时，我收到 lnk 1123 错误，表示转换为 COFF 失败并且文件无效或损坏。我知道该文件只是一个带有数字列表的简单文本文件。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:40:35.860

`COFF`（Common Object File Format）是Visual Studio生成的对象文件的格式，您尝试打开的文件将在您成功创建输出并运行后在运行时打开，因此它与链接器和错误无关。尝试重建您的程序，可能您的某些目标文件无效！

# perforce - 在 perforce 中删除变更列表

> ID：12942432
> 
> 赞同：1
> 
> 时间：2012-10-17T20:03:06.067
> 
> 标签：perforce

我正在使用 P4V 客户端，想知道是否有办法删除您提交的更改列表，而不会以任何方式影响您当前的工作目录。我在提交中犯了一个错误，遗漏了一些东西，我希望它从服务器上消失。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:56:21.680

您可以回滚文件，提交，然后制作正确的更改列表。从技术上讲，这仍然会保留旧的变更列表，但会创建您修复错误的历史。

我相信 Perforce 在哲学上反对删除变更列表，尽管可能有一种我不知道的方法。

# java - 安装 Hadoop 时出错

> ID：12942435
> 
> 赞同：0
> 
> 时间：2012-10-17T20:03:20.060
> 
> 标签：java, hadoop, windows-xp, cygwin

我正在尝试学习 hadoop，我正在按照[http://v-lad.org/Tutorials/Hadoop/12%20-%20format%20the%20namendoe.html](http://v-lad.org/Tutorials/Hadoop/12%20-%20format%20the%20namendoe.html)上的安装步骤进行操作。但是我收到以下错误，我不知道为什么它无法在类路径中找到 PlatformName。我也担心“cygpath：无法转换空路径”。谁能让我知道我收到此错误的原因可能是什么。

谢谢

```
V6X5932@MC1BCCNU2320D09 ~/hadoop-0.22.0
$ bin/hadoop namenode -format
cygpath: can't convert empty path
Error: Could not find or load main class org.apache.hadoop.util.PlatformName
cygpath: can't convert empty path
cygpath: can't convert empty path
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.

cygpath: can't convert empty path
Error: Could not find or load main class org.apache.hadoop.util.PlatformName
cygpath: can't convert empty path
cygpath: can't convert empty path
12/10/17 15:49:03 INFO namenode.NameNode: STARTUP_MSG:
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = MC1BCCNU2320D09/40.9.146.66
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 0.22.0
STARTUP_MSG:   classpath = C:\cygwin\home\V6X5932\hadoop-                                   
Re-format filesystem in \tmp\hadoop-V6X5932\dfs\name ? (Y or N) N
Format aborted in \tmp\hadoop-V6X5932\dfs\name
12/10/17 15:52:10 INFO namenode.NameNode: SHUTDOWN_MSG:
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at MC1BCCNU2320D09/40.9.146.66
************************************************************/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:23:32.447

尝试使用[Cloudera VM](https://ccp.cloudera.com/display/SUPPORT/Downloads)进行 Hadoop 集群设置。这是一个现成的设置，因此人们可以花时间学习 Hadoop，而不是设置它的先决条件。当我遇到类似情况并且不得不切换到 Cloudera VM 时，我想学习 Apache Hive。

# html - 如何从 HTML 输入类型“文件”或任何其他方式获取文件夹目录？

> ID：12942436
> 
> 赞同：79
> 
> 时间：2012-10-17T20:03:22.527
> 
> 标签：html, file, input, directory

所以我有一个带有类型的基本表单输入，`"file"`但是我希望用户能够选择文件夹位置而不是文件。

如何获取此输入以选择文件夹而不是文件，或者有其他方法吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-05-27T14:03:18.870

也偶然发现了这个页面，然后发现只用 javascript 就可以做到这一点（没有像 ActiveX 或 Flash 这样的插件）

基本上，他们添加了对文件输入元素“webkitdirectory”的新属性的支持。你可以像这样使用它：

`<input type="file" id="ctrl" webkitdirectory directory multiple/>`

它允许您选择目录。对于支持多个文件选择但不支持目录选择的浏览器，multiple 属性是一个很好的后备选项。

当您选择一个目录时，文件可通过控件的 dom 对象 (document.getElementById('ctrl')) 获得，就像它们具有多个属性一样。浏览器将所选目录中的所有文件递归地添加到该列表中。

您也可以添加目录属性，以防它在某个时候标准化（找不到任何相关信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:06:02.527

您很可能正在考虑使用 flash/silverlight/activeX 控件。`<input type="file" />`控件不处理。

如果您不介意用户选择文件作为获取其目录的一种方式，您可以绑定到该控件的`change`事件，然后剥离文件名部分并将路径保存在某处 - 但这与它所获得的一样好。

请记住，网页旨在与服务器交互。为远程服务器提供本地目录没有什么是“典型的”（服务器无法访问它，为什么要请求它？）；然而，文件是选择性传递信息的一种手段。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2017-03-21T06:29:24.897

尽管这是一个老问题，但这可能会对某人有所帮助。

我们可以在使用“多个”浏览文件时选择多个文件

```
<input type="file" name="datafile" size="40"  multiple> 
```

# powershell - 如何将powershell与Intersystems Cache一起使用？

> ID：12942444
> 
> 赞同：1
> 
> 时间：2012-10-17T20:03:53.467
> 
> 标签：powershell, intersystems-cache

我想使用 powershell 作为 Intersystems 的控制台/终端的替代品。有没有办法使用 powershell 连接到缓存并对服务器发出缓存命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:33:43.340

缓存终端只是一个 telnet 会话，因此您可以从 powershell 使用 telnet。

您还可以通过任何方式连接到缓存来执行您自己的读取评估打印循环以进行评估步骤。尽管您的连接方法可能使 break 语句难以正常工作或 write 语句（或任何其他使用设备的语句）难以正常工作。

您也可以在另一个进程中打开终端并使用[DDE](http://training.intersystems.com/tutorials/DocBook.UI.Page.cls?KEY=GTER_advanced_topics)从 power shell 驱动终端，但这开始变得愚蠢。

# c++ - QThread finished() 信号永远不会发出

> ID：12942461
> 
> 赞同：3
> 
> 时间：2012-10-17T20:05:05.163
> 
> 标签：c++, qt, qthread

所以我有一个有 2 个插槽的工作类：StartWork() 和 StopWork()，StartWork() 运行一个无限循环（它只是不停地读取和读取相机输入），而 StopWork() 方法只是设置一个布尔值变量为假（因此 StartWork() 内的循环停止）。

根据 QThread 文档，现在使用它们的最佳方法不是通过子类化，而是将工作人员移动到线程中，这就是我所做的。问题是，来自线程的started() 信号被调用，但finished() 信号永远不会被调用。

工人阶级插槽：

> 无效的开始工作（）{运行=真；while(running){ 做工作；}}
> 
> 无效停止工作（）{运行=假；}

QThread初始化和信号/槽连接：

```
thread = new QThread();
worker = new Worker();
worker.moveToThread(thread);

QObject::connect(thread, SIGNAL(started()), worker, SLOT(StartWork()));
QObject::connect(thread, SIGNAL(finished()), worker, SLOT(StopWork())); 
```

在我的 QPushButton 上我这样做：

```
if(pushStartStop->text().toLower() == "start")
{
    pushStartStop->setText("Stop");
    thread->start();
}
else
{
    pushStartStop->setText("Start");
    thread->quit();
} 
```

thread->start() 工作正常，StartWork() 被调用，一切都很漂亮（GUI 运行没有块等）。

但是 thread->quit() 没有做任何事情，它被调用（因为按钮改变了文本）但就是这样。如果我只是调用 worker->StopWork() 它可以工作，但是我无法再次启动它。

我试过用 thread->exit(); 但结果是一样的。我也知道子类化的作品，但它看起来更丑陋，根据最近的 Qt 文档，子类化不再是最佳的。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:07:55.377

你有一个永远的循环：

```
void StartWork()
{
    running = true;
    while(running)
    {
        do work;
    }
} 
```

这个函数会循环，所以线程的事件循环在发出之后就被阻塞了`started()`。因此，`finished()`不能发射。

**解决方案1：**

添加功能

```
void DoWork()
{
    if(running)
    {
        do work
    }
} 
```

给工人，改变

```
void StartWork()
{
    running = true;
} 
```

然后，只需连接`DoWork`到线程中的计时器。

**解决方案2：**

改变功能

```
void StartWork()
{
    running = true;
    while(running)
    {
        do work;
        QCoreApplication::processEvents();
    }
} 
```

使用此解决方案，您将不得不在工作人员停止其工作时重新启动线程（`StopWork()`将强制此函数完成，因此事件循环将没有要处理的事件并且线程将完成）。

# ios - 使用 NSURLConnection 上传时将进度设置为 UIProgressView

> ID：12942464
> 
> 赞同：3
> 
> 时间：2012-10-17T20:05:24.383
> 
> 标签：ios, ios5, ios6, nsurlconnection, nsurlconnectiondelegate

我正在尝试刷新 UIProgressView 中的进度条以获取带有`NSURLConnection`. 目标是在上传图片时刷新进度条。经过几次搜索，我设法使用`didSendBodyData`我的连接委托来检查进度，如下所示：

```
- (void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite
{
    if([self.delegate respondsToSelector:@selector(progressView)])
    {
        self.delegate.progressView.progress = (totalBytesWritten / totalBytesExpectedToWrite) * 100.0;
    }
} 
```

一切正常，但问题是这个方法只被调用一次......所以酒吧在 0% 停留片刻，然后立即进入 100% 没有中间。我尝试（在 iPhone 上使用 iOS6 开发者工具）将我的连接设置为慢速边缘连接，以判断是否只是我的上传速度太快，但不，上传需要一段时间为 0，然后立即转到 100%该方法只被调用一次......

请问有什么想法吗？谢谢 ！我不知道如何解决这个问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:10:26.843

您**真的应该阅读有关数值类型的 C 教程。**推测`totalBytesWritten`和`totalBytesExpectedToWrite`都是整数类型，因此将它们相除会导致截断——也就是说，结果的小数部分将消失。除非结果为 100%，否则积分部分始终为 0，因此所有这些除法将导致零。尝试将一个或两个变量转换为`float`或`double`以获得合理的结果。

此外，`UIProgressView`默认情况下不接受 0 到 100 之间的值，而是 0 到 1 之间的值。总而言之，你应该写

```
self.delegate.progressView.progress = ((float)totalBytesWritten / totalBytesExpectedToWrite); 
```

它应该可以正常工作。

**编辑：**问题是您尝试上传的数据太小，不需要分解成更小的块，因此只需要调用一次此方法。如果您提供大量数据，则只能分块发送，因此将多次调用进度处理程序回调。

# php - 如何在每个数字都有相应的权重（点）的多项选择类型考试中计算总分？

> ID：12942479
> 
> 赞同：2
> 
> 时间：2012-10-17T20:06:12.650
> 
> 标签：php, mysql

我在数据库中有一个带有对应点的答案键，例如，

```
number  answer   points
  1       A         2
  2       A         3
  3       B         2
  4       B         3 
```

现在，当我输入并检查学生的答案时，

```
number  answer
   1      A
   2      A
   3      C
   4      D 
```

我希望系统将学生的分数返回给我，即 5/10。

我的问题是我不知道如何获取并获得答案键和学生答案匹配的这些点的总数。这是我到目前为止所尝试的。

```
for ($i=1; $i<=$num; $i++) {            
$answer = $_POST['answer'][($i+1)-1]; //this is the student answer
$result = mysql_query("SELECT * FROM paper WHERE sy='$sy' and sem='$sem' and test_name='$test_name' and id='$i' and subject='$subject'");
$qry = mysql_fetch_array($result);
$ans = $qry['answer']; //this is the answer key

if ($answer == $ans){
$resultA = mysql_query("SELECT SUM(points) FROM paper WHERE sy='$sy' and sem='$sem' and test_name='$test_name' and id='$i' and answer='$answer' and subject='$subject'");
$qryA = mysql_fetch_array($resultA);
$score = $qry['SUM(points)']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:09:42.513

您的架构不包含学生 ID，因此我没有考虑到这一点：

```
select sum(points) as Score
from answerkey k
inner join answers a on k.number = a.number
where k.answer = a.answer 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/06699/3)

使用学生证，您可以这样做`GROUP BY`：

```
select a.student_id, sum(points) as Score
from answerkey k
left outer join answers a on k.number = a.number
where k.answer = a.answer
group by a.student_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:13:21.920

```
WITH
    test_answer (number, answer, points) AS (VALUES
        (1, 'A', 2),
        (2, 'A', 3),
        (3, 'B', 2),
        (4, 'B', 3)),

    student_answer (number, answer) AS (VALUES
        (1, 'A'),
        (2, 'A'),
        (3, 'C'),
        (4, 'D'))

SELECT
    SUM(ta.points) AS score,
    (SELECT SUM(points) FROM test_answer) AS total_possible_score

FROM student_answer sa

INNER JOIN test_answer ta
    ON sa.number = ta.number
   AND sa.answer = ta.answer; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:13:30.587

SQL查询可以做到这一点..

```
SELECT SUM(k.points) AS TOTAL FROM k.key,s.answers WHERE s.answer = k.answer; 
```

其中：k.key 是您的答案键，s.answers 是您学生的测试。您可以添加其他逻辑以将其限制为一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:11:05.017

你真的应该首先展示你尝试过的东西，并解释你的问题......但是，无法抗拒这个问题：

```
SELECT
    SUM(k.Points) As Score 
FROM Answers a 
JOIN AnswerScoreKey k 
ON k.Number = a.Number AND k.Answer = a.Answer 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T22:47:19.253

我终于明白了！我刚改成`[($i+1)-1]`.`[$i-1]`

# pdf - 在 PDF 文档的每个现有页面之间插入空白页

> ID：12942486
> 
> 赞同：13
> 
> 时间：2012-10-17T20:06:38.033
> 
> 标签：pdf, pdftk

我有一个 PDF，我想要一种快速的方法来每隔一页插入一个空白页（最后除外）。例如，我的 PDF 有页面

```
1: A
2: B
3: C
4: D 
```

它应该看起来像：

```
1: A
2: empty
3: B
4: empty
5: C
6: empty
7: D 
```

有没有简单的脚本方法可以做到这一点？我想过使用 pdftk，但我不知道它是否是最简单的方法......我正在运行 Windows 7。

到目前为止感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-30T07:51:16.753

也有审稿的想法。这是完整的脚本。

```
#!/bin/bash

if [ $# -ne 1 ]
then
  echo "Usage example: ./bashscript src.pdf"
  exit $E_BADARGS
else
  NUM=$(pdftk $1 dump_data | grep 'NumberOfPages' | awk '{split($0,a,": "); print a[2]}')
  COMMSTR=''

  for i in $(seq 1 $NUM);
  do
    COMMSTR="$COMMSTR A$i B1 " 
  done
  $(echo "" | ps2pdf -sPAPERSIZE=a4 - pageblanche.pdf)
  $(pdftk A=$1 B=pageblanche.pdf cat $COMMSTR output 'mod_'$1)
  (pdfnup 'mod_'$1 --nup 2x1 --landscape --outfile 'print_'$1)
  $(rm pageblanche.pdf && rm 'mod_'$1)

fi

#for f in *.pdf; do ./bashscript.sh $f; done 2> /dev/null 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T08:14:51.803

使用 pdftk 唯一困难的部分是输入所有内容。对于后代（例如，如果某人的页面数量很少并且想要这样做）这是使用 pdftk 的方法（以 3 页为例）。

1.  安装 pdftk [http://www.pdflabs.com/docs/install-pdftk/](http://www.pdflabs.com/docs/install-pdftk/)

做这个：

```
pdftk A=notblank.pdf B=blank.pdf cat A1-1 B1-1 A2-2 B1-1 A3-3 output combined.pdf 
```

如果你想在每 3 页的末尾有一个空白页，它会是这样的：

```
pdftk A=notblank.pdf B=blank.pdf cat A1-3 B1-1 A4-6 B1-1 A7-9 output combined.pdf 
```

如果您碰巧在最后想要一个空白页，只需添加另一个 B1-1。此外，您需要使用空白 PDF，当然这适用于非空白页面，您可以弄乱数字并使用超过 2 个 pdf。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T00:11:05.217

在 Windows 中，您可以使用**java**可执行文件，例如

**Multivalent**（最新的免费版本，包含来自以下链接的工具，当前托管在 sourceforge 上本身没有工具；它们已被删除）

*   [https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html](https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html)

> java -cp \path...to\Multivalent.jar tool.pdf.Impose -verbose -dim 1x1 -layout "1,b" file.pdf

Multivalent为原始文件名添加**-up后缀**

这将在pdf的任何页面之后添加一个空白页面， **但是......也在最后一页之后！**

由于这是您不想要的，因此您需要在调用**Multivalent后执行一些其他任务**

> 这是通用模式，您可以使用它来自动化整个过程，将这些进一步的任务放在批处理文件中

**1.还原pdf页面（最后一页成为第一页）**

```
pdftk *-up.pdf cat end-1 output reverted.pdf 
```

**2.在输出文件中剪掉你不想要的*最后一个空白页（现在是你的 REVERTED pdf 的第一页）***

```
pdftk reverted.pdf cat 2-end output reverted2.pdf 
```

**3.再次将页面顺序还原为pdf以获得原始（1,2,3等...）页面顺序**

```
pdftk reverted2.pdf  cat end-1 output originalfilename-up.pdf 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T09:40:30.650

好的，我自己使用 PHP 和 FPDI/FPDF 完成了：

```
<?php
error_reporting(E_ALL);
require_once('fpdi/fpdf.php');
require_once('fpdi/fpdi.php');

// Format für die einzelnen Folien:
$format = 'L';  // Entweder '' (horizontal) oder 'L' (Landscape!)

// Verzeichnis lesen
foreach(glob('infiles/*.pdf') as $file)
{
    $filename = basename($file);
    $fileout = 'outfiles/' . $filename;

    // Ausgabe-PDF
    $out = new FPDI();

    // Vorhandenes PDF einlesen
    $pagecount = $out->setSourceFile($file);

    // Alle Seiten nacheinander importieren
    for($i = 1; $i <= $pagecount; $i++)
    {
        // Importiere Seite
        $tpl = $out->importPage($i); // , '/MediaBox'

        // Vorhandene Seite
        $out->addPage($format);
        $out->useTemplate($tpl);

        if($i < $pagecount)
        {
            // Leere Seite anfügen (nur nicht am Ende)
            $out->addPage($format);
        }
    }

    $out->Output($fileout);
} 
```

子目录“infiles”中的所有文件都将插入空白页面并保存到具有相同文件名的“outfiles”！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-11T13:11:07.253

我只是在使用 pdftk，但我想你可以使用 shuffle 选项。如果你有n页的notblank.pdf（n有点大），创建一个包含1个空白页的文件blank.pdf（大小可以用PhotoShop或PowerPoint控制），然后是批处理文件（比如n = 10）

```
@echo off
setlocal enabledelayedexpansion
set "str="
for /l %%n in (1,1,10) do (set "str=!str! A" )
pdftk A=blank.pdf cat %str% output blank10.pdf
pdftk A=notblank.pdf B=blank10.pdf shuffle A B output blanknot.pdf 
```

基本上完成了这项工作。它首先使用 1-page blank.pdf 创建一个 10-page blank10.pdf，然后使用原始 notblank.pdf 随机播放

ps 我发现使用 multistamp 命令会产生一个更简单的解决方案。假设我们现在有原始的 n 页 notblank.pdf 和 1 页空白.pdf（确保背景确实是白色而不是透明），那么以下命令就足够了

```
pdftk notblank.pdf multistamp blank.pdf output stamped.pdf
pdftk A=notblank.pdf B=stamped.pdf shuffle A B output zebra.pdf 
```

输出文件 zebra.pdf 的末尾还有一个空白页，很容易摆脱

```
pdftk A=zebra.pdf cat A1-r2 output zebra1.pdf 
```

然后删除最后一个空白页。不过，输出文件的大小大约大两倍。

我是 pdftk 的新手，这是我的第一篇文章。如果我做任何愚蠢的事情，请纠正我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-21T21:51:57.297

如果您的系统上有乳胶，那么以下脚本可能很有用：

```
#!/bin/sh

mkdir /tmp/$$
cp $1 /tmp/$$
d=`pwd`
cd /tmp/$$
pdftk $1 burst
echo "\\documentclass[12pt]{article}" > blank.tex
echo "\\\\begin{document}" >> blank.tex
echo "\\mbox{}" >> blank.tex
echo "\\end{document}" >> blank.tex
pdflatex blank
for i in pg*.pdf; do echo -n " blank.pdf $i " >> list; done
pdftk `cat list` cat output withblanks.$1
cd $d
cp /tmp/$$/withblanks.$1 . 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-23T17:39:04.623

pdfjam 和 exiftool 的使用方式与 pdftk 类似。您需要创建自己`blank.pdf`的以下内容才能工作：

```
NUM=$(exiftool -T -PageCount input.pdf)
PDFJAM_ARG=""
for i in $(seq 1 ${NUM}); do
  PDFJAM_ARG="${PDFJAM_ARG} input.pdf $i blank.pdf 1 ";
done
pdfjam -o output.pdf --fitpaper true ${PDFJAM_ARG} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-27T18:01:17.553

这里有一个带有批处理脚本的解决方案来获取pdf的页数，通过命令和ImageMagick创建一个blank.pdf并自动绑定它们。

对于windows下的批处理文件。

```
@echo off
SetLocal EnableDelayedExpansion

:: get the number of pages
    :: extract info with pdftk
    pdftk output.pdf dump_data | grep NumberOfPages > temp
    set /p pages=<temp
    :: get only the real number
    set pages2=!pages:NumberOfPages: =!
    del temp

:: Prepare the string sequence to merge 
FOR /L %%p IN (1, 1, !pages2!) DO (
    if %%p==1 (
        set list=A1 B1
    ) else (
        set list=!list! A%%p B1 
    )
)

:: create a blank pdf
magick convert xc:none -page A4 blank.pdf

pdftk A=output.pdf B=blank.pdf cat %list% output combined.pdf

del blank.pdf 
```

# sql - 如何使用 alembic 工具创建“视图迁移”脚本

> ID：12942496
> 
> 赞同：5
> 
> 时间：2012-10-17T20:07:16.710
> 
> 标签：sql, sqlalchemy, alembic

有人知道如何使用 create_view 函数使用 alembic 升级函数创建视图吗？例如，我们有：

```
CREATE VIEW myview AS
SELECT column_name(s)
FROM table_name
 WHERE condition 
```

现在我们要在 alembic 升级函数脚本中定义一个视图来创建“myview”。如何意识到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-18T14:37:39.077

我知道，这个问题太老了，当时可能不存在这种可能性。[但是，对于现在提出这个问题的所有人来说：食谱](https://alembic.sqlalchemy.org/en/latest/cookbook.html#replaceable-objects)中现在描述了一种可能性。

`op.create_view`它通过为您提供额外的操作（如、`op.drop_view`或）利用创建、删除和替换对象（如视图和存储过程） `op.replace_view(myview, replaces="3f2ab897a.myview")`。存储过程也是如此，也可以扩展为例如用户定义的函数。

视图定义如下：

```
myview = ReplaceableObject('myview',
    """
    SELECT * FROM mytable
    """
) 
```

当然，所有这些也可以通过简单的`op.execute`语句来完成，但是在这种情况下，alembic 会处理`DROP VIEW`,`CREATE VIEW`和`ALTER VIEW`命令。

# php - 使用 ajax() 或 jQuery.getJSON 和 jquery 将对象的 php 数组传递给外部 javascript 文件？

> ID：12942500
> 
> 赞同：0
> 
> 时间：2012-10-17T20:07:29.253
> 
> 标签：php, jquery, mysql, ajax, json

这已经被问了很多，但我有点不能单独做，php新手和jquery平庸。所以，这是我的 php 文件

```
<?

            include("dbinfo.inc.php");

mysql_connect($host,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT ID, NAME FROM sets";
$result=mysql_query($query);

 while ( $results[] = mysql_fetch_object ( $result ) );
     array_pop ( $results );

$cards = json_encode($results);

echo $cards;
mysql_close();

?> 
```

这是生成的 json 的样子：

```
[{"ID":"1","NAME":"Abundant Growth"},{"ID":"2","NAME":"Aggravate"},{"ID":"3","NAME":"Alchemist's Apprentice"},{"ID":"4","NAME":"Alchemist's Refuge"},{"ID":"5","NAME":"Amass the Components"},.... 
```

出于某种原因，我想将我的 js 代码放在单独的 js 文件中。我尝试使用以下代码访问数据：

```
var Sets = new Array();

 jQuery.getJSON("php/mainDB.php", function(data) {
Sets=data
    }) 
```

我希望 Sets 将被定义为一个对象数组（与 Sets 得到的相同=请帮我修复我的代码，并请发布代码示例。我不介意使用 $.ajax() 得到答案也回答。将来可能会有所帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T17:59:55.557

我怀疑它与异步加载有关。我会在 getJSON 调用中定义 Sets 变量：

```
jQuery.getJSON("php/mainDB.php", function(data) {
var Sets = new Array();
Sets=data;
alert(Sets[0].NAME);
}) 
```

（在此处查看类似问题：[jquery .getJSON() 中的持久性](https://stackoverflow.com/questions/6222237/persistence-within-jquery-getjson?rq=1)）

# java - 如何将函数作为 Java 中 JTextField 的输入？

> ID：12942501
> 
> 赞同：2
> 
> 时间：2012-10-17T20:07:29.810
> 
> 标签：java, input, jtextfield, differential-equations

我正在尝试编写一个 java 程序，它采用两个方程 f(x) 和 g(x) 作为 JTextFields 中用户的输入。但是，我无法弄清楚我应该如何获取字符串输入并将其转换为可行的方程式。有人可以帮我吗？我实在想不通。

如果有人想知道，我正在尝试从用户输入中绘制欧拉法，但要做到这一点，我需要输入一个初始点和一个 h 值，这很容易，然后我需要这两个方程 f(x) 和g(x) 来自形成系统 F(x) 的用户输入。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:37:00.763

取自[Java Notes 6.0](http://math.hws.edu/javanotes/)网站，它适用于类似的问题：

```
 /*
      An object belonging to the class Expr is a mathematical expression that
      can involve:

              -- real numbers such as 2.7, 3, and 12.7e-12
              -- the variable x
              -- arithmetic operators  +,  -,  *,  /,  and  ^ , where
                 the last of these represents raising to a power
              -- the mathematical functions sin, cos, tan, sec, csc, cot,
                 arcsin, arccos, arctan, exp, ln, log2, log10, abs, and sqrt,
                 where ln is the natural log, log2 is the log to the base 2,
                 log10 is the log to the base 10, abs is absolute value,
                 and sqrt is the square root
              -- parentheses

       Some examples would be:   x^2 + x + 1
                                 sin(2.3*x-7.1) - cos(7.1*x-2.3)
                                 x - 1
                                 42
                                 exp(x^2) - 1

       The trigonometric functions work with radians, not degrees.  The parameter
       of a function must be enclosed in parentheses, so that "sin x" is NOT allowed.

       An Expr is constructed from a String that contains its definition.  If an
       error is found in this definition, the constructor will throw an
       IllegalArgumentException with a message that describes the error and
       the position of the error in the string.  After an Expr has been
       constructed, its defining string can be retrieved using the
       method getDefinition().

       The main operation on an Expr object is to find its value, given
       a value for the variable x.  The value is computed by the value() method.
       If the expression is undefined at the given value of x, then the
       number returned by value() method will be the special "non-a-number number",
       Double.NaN.  (The boolean-valued function Double.isNaN(v) can be used to
       test whether the double value v is the special NaN value.  For technical
       reasons, you can't just use the == operator to test for this value.)

   */

  public class Expr {

     //----------------- public interface ---------------------------------------

      /**
       * Construct an expression, given its definition as a string.
      * This will throw an IllegalArgumentException if the string
      * does not contain a legal expression.
       */
     public Expr(String definition) {
        parse(definition);
     }

     /**
      * Computes the value of this expression, when the variable x
      * has a specified value.  If the expression is undefined
       * for the specified value of x, then Double.NaN is returned.
      * @param x the value to be used for the variable x in the expression
      * @return the computed value of the expression
      */
     public double value(double x) {
        return eval(x);
     }

     /**
      * Return the original definition string of this expression.  This
      *  is the same string that was provided in the constructor.
      */
     public String toString() {
        return definition;
     }

     //------------------- private implementation details ----------------------------------

     private String definition;  // The original definition of the expression,
                                 // as passed to the constructor.

     private byte[] code;        // A translated version of the expression, containing
                                 //   stack operations that compute the value of the expression.

     private double[] stack;     // A stack to be used during the evaluation of the expression.

     private double[] constants; // An array containing all the constants found in the expression.

     private static final byte  // values for code array; values >= 0 are indices into constants array
              PLUS = -1,   MINUS = -2,   TIMES = -3,   DIVIDE = -4,  POWER = -5,
              SIN = -6,    COS = -7,     TAN = -8,     COT = -9,     SEC = -10,
              CSC = -11,   ARCSIN = -12, ARCCOS = -13, ARCTAN = -14, EXP = -15,    
              LN = -16,    LOG10 = -17,  LOG2 = -18,   ABS = -19,   SQRT = -20,
              UNARYMINUS = -21, VARIABLE = -22;

     private static String[] functionNames =  {  // names of standard functions, used during parsing
               "sin", "cos", "tan", "cot", "sec",
               "csc", "arcsin", "arccos", "arctan", "exp",
               "ln", "log10", "log2", "abs", "sqrt" };

     private double eval(double variable) { // evaluate this expression for this value of the variable
        try {
           int top = 0;
           for (int i = 0; i < codeSize; i++) {
              if (code[i] >= 0)
                 stack[top++] = constants[code[i]];
              else if (code[i] >= POWER) {
                 double y = stack[--top];
                 double x = stack[--top];
                 double ans = Double.NaN;
                 switch (code[i]) {
                 case PLUS:    ans = x + y;  break;
                 case MINUS:   ans = x - y;  break;
                 case TIMES:   ans = x * y;  break;
                 case DIVIDE:  ans = x / y;  break;
                 case POWER:   ans = Math.pow(x,y);  break;
                 }
                 if (Double.isNaN(ans))
                    return ans;
                 stack[top++] = ans;
              }
              else if (code[i] == VARIABLE) {
                 stack[top++] = variable;
              }
              else {
                 double x = stack[--top];
                 double ans = Double.NaN;
                 switch (code[i]) {
                 case SIN: ans = Math.sin(x);  break;
                 case COS: ans = Math.cos(x);  break;
                 case TAN: ans = Math.tan(x);  break;
                 case COT: ans = Math.cos(x)/Math.sin(x);  break;
                 case SEC: ans = 1.0/Math.cos(x);  break;
                 case CSC: ans = 1.0/Math.sin(x);  break;
                 case ARCSIN: if (Math.abs(x) <= 1.0) ans = Math.asin(x);  break;
                 case ARCCOS: if (Math.abs(x) <= 1.0) ans = Math.acos(x);  break;
                 case ARCTAN: ans = Math.atan(x);  break;
                 case EXP: ans = Math.exp(x);  break;
                 case LN: if (x > 0.0) ans = Math.log(x);  break;
                 case LOG2: if (x > 0.0) ans = Math.log(x)/Math.log(2);  break;
                 case LOG10: if (x > 0.0) ans = Math.log(x)/Math.log(10);  break;
                 case ABS: ans = Math.abs(x);  break;
                 case SQRT: if (x >= 0.0) ans = Math.sqrt(x);  break;
                 case UNARYMINUS: ans = -x; break;
                 }
                 if (Double.isNaN(ans))
                    return ans;
                 stack[top++] = ans;

              }
           }
        }
        catch (Exception e) {
           return Double.NaN;
        }
        if (Double.isInfinite(stack[0]))
           return Double.NaN;
        else
           return stack[0];               
     }      

     private int pos = 0, constantCt = 0, codeSize = 0;  // data for use during parsing

     private void error(String message) {  // called when an error occurs during parsing
        throw new IllegalArgumentException("Parse error:  " + message + "  (Position in data = " + pos + ".)");
     }

     private int computeStackUsage() {  // call after code[] is computed
        int s = 0;   // stack size after each operation
        int max = 0; // maximum stack size seen
        for (int i = 0; i < codeSize; i++) {
           if (code[i] >= 0 || code[i] == VARIABLE) {
              s++;
              if (s > max)
                 max = s;
           }
           else if (code[i] >= POWER)
              s--;
        }
        return max;
     }

     private void parse(String definition) { // Parse the definition and produce all
                                            // the data that represents the expression
                                            // internally;  can throw IllegalArgumentException
        if (definition == null || definition.trim().equals(""))
           error("No data provided to Expr constructor");
        this.definition = definition;
        code = new byte[definition.length()];
        constants = new double[definition.length()];
        parseExpression();
        skip();
        if (next() != 0)
           error("Extra data found after the end of the expression.");
        int stackSize = computeStackUsage();
        stack = new double[stackSize];
        byte[] c = new byte[codeSize];
        System.arraycopy(code,0,c,0,codeSize);
        code = c;
        double[] A = new double[constantCt];
        System.arraycopy(constants,0,A,0,constantCt);
        constants = A;
     }

     private char next() {  // return next char in data or 0 if data is all used up
        if (pos >= definition.length())
           return 0;
        else
           return definition.charAt(pos);
     }       

     private void skip() {  // skip over white space in data
        while(Character.isWhitespace(next()))
           pos++;
     }

     // remaining routines do a standard recursive parse of the expression

     private void parseExpression() {
        boolean neg = false;
        skip();
        if (next() == '+' || next() == '-') {
           neg = (next() == '-');
           pos++;
           skip();
        }
        parseTerm();
        if (neg)
           code[codeSize++] = UNARYMINUS;
        skip();
        while (next() == '+' || next() == '-') {
           char op = next();
           pos++;
           parseTerm();
           code[codeSize++] = (op == '+')? PLUS : MINUS;
           skip();
        }
     }

     private void parseTerm() {
        parseFactor();
        skip();
        while (next() == '*' || next() == '/') {
           char op = next();
           pos++;
           parseFactor();
           code[codeSize++] = (op == '*')? TIMES : DIVIDE;
           skip();
        }
     }

     private void parseFactor() {
        parsePrimary();
        skip();
        while (next() == '^') {
           pos++;
           parsePrimary();
           code[codeSize++] = POWER;
           skip();
        }
     }

     private void parsePrimary() {
        skip();
        char ch = next();
        if (ch == 'x' || ch == 'X') {
           pos++;
           code[codeSize++] = VARIABLE;
        }
        else if (Character.isLetter(ch))
           parseWord();
        else if (Character.isDigit(ch) || ch == '.')
           parseNumber();
        else if (ch == '(') {
           pos++;
           parseExpression();
           skip();
           if (next() != ')')
              error("Exprected a right parenthesis.");
           pos++;
        }
        else if (ch == ')')
           error("Unmatched right parenthesis.");
        else if (ch == '+' || ch == '-' || ch == '*' || ch == '/' || ch == '^')
           error("Operator '" + ch + "' found in an unexpected position.");
        else if (ch == 0)
           error("Unexpected end of data in the middle of an expression.");
        else
           error("Illegal character '" + ch + "' found in data.");
     }

     private void parseWord() {
        String w = "";
        while (Character.isLetterOrDigit(next())) {
           w += next();
           pos++;
        }
        w = w.toLowerCase();
        for (int i = 0; i < functionNames.length; i++) {
           if (w.equals(functionNames[i])) {
              skip();
              if (next() != '(')
                    error("Function name '" + w + "' must be followed by its parameter in parentheses.");
              pos++;
              parseExpression();
              skip();
              if (next() != ')')
                 error("Missing right parenthesis after parameter of function '" + w + "'.");
              pos++;
              code[codeSize++] = (byte)(SIN - i);
              return;
           }
        }
        error("Unknown word '" + w + "' found in data.");
     }

     private void parseNumber() {
        String w = "";
        while (Character.isDigit(next())) {
           w += next();
           pos++;
        }
        if (next() == '.') {
           w += next();
           pos++;
           while (Character.isDigit(next())) {
              w += next();
              pos++;
           }          
        }
        if (w.equals("."))
           error("Illegal number found, consisting of decimal point only.");
        if (next() == 'E' || next() == 'e') {
           w += next();
           pos++;
           if (next() == '+' || next() == '-') {
              w += next();
              pos++;
           }
           if (! Character.isDigit(next()))
              error("Illegal number found, with no digits in its exponent.");
           while (Character.isDigit(next())) {
              w += next();
              pos++;
           }
        }
        double d = Double.NaN;
        try {
           d = Double.valueOf(w).doubleValue();
        }
        catch (Exception e) {
        }
        if (Double.isNaN(d))
           error("Illegal number '" + w + "' found in data.");
        code[codeSize++] = (byte)constantCt;
        constants[constantCt++] = d;
     }

  } // end class Expr 
```

# php - Zend Framework 2 中的 OAuth

> ID：12942503
> 
> 赞同：9
> 
> 时间：2012-10-17T20:07:40.853
> 
> 标签：php, zend-framework2, zend-framework-modules

我目前正在基于新版本 2.0.2 开发我的第一个 ZF 应用程序。（我没有ZF1的经验）

现在我需要使用 OAuth 进行身份验证，我想知道是否已经有 ZF2 的实现。我知道有一个 ZF1 模块。

如果没有，你会推荐什么。使用 PHP 的原生 OAuth 支持？

谢谢你的帮助！罗伯托

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T23:07:18.413

ZF2 已经有一个官方的 OAuth 包。[您可以在ZF2 Packages](http://packages.zendframework.com/)网站上找到一些信息。

[如果您使用作曲家，您可以按照在此处](http://framework.zend.com/downloads/composer)设置作曲家的说明添加以下内容来安装该软件包。

对于需要的包，只需输入：

```
"require": {
    "zendframework/zendoauth": "2.0.*"
}, 
```

然后运行：

```
php composer.phar install 
```

它将安装 oauth 包。

还有看起来不错的[ReverseOAuth2库。](https://github.com/silvester/ReverseOAuth2)我发现在社区支持的站点[modules.zendframework.com](http://modules.zendframework.com/)上。

如果要直接下载，可以在写这篇文章的时候找到稳定版：[https ://packages.zendframework.com/composer/zendframework-zendoauth-2.0.2-release-2.0.2-91b73f.zip](https://packages.zendframework.com/composer/zendframework-zendoauth-2.0.2-release-2.0.2-91b73f.zip)

希望有帮助。

# ruby-on-rails - 为什么使用 set_trace_func 在某些地方有效，但在其他地方会导致意外返回（LocalJumpError）？

> ID：12942505
> 
> 赞同：6
> 
> 时间：2012-10-17T20:07:42.930
> 
> 标签：ruby-on-rails, ruby, autoload

以下是我正在处理的 gem 中代码的通用部分：

```
module SomeModule
  class << self
    attr_accessor :procedure

    def log_events(*args)
      args.flatten!
      if args.size == 1
        eval "set_trace_func proc {|event, file, line, id, binding, classname| begin; SomeModule.procedure.call(event, file, line, id, binding, classname) if event == #{args[0].inspect}; rescue SystemExit, Interrupt; raise; rescue Exception; end}"
      elsif args.size > 1
        eval "set_trace_func proc {|event, file, line, id, binding, classname| begin; SomeModule.procedure.call(event, file, line, id, binding, classname) if #{args.inspect}.include?(event); rescue SystemExit, Interrupt; raise; rescue Exception; end}"
      else
        # ...
      end
    end
  end
end

SomeModule.procedure = lambda {|event, file, line, id, binding, classname| puts "#{event} #{file}.#{line} #{binding} #{classname} #{id}"} 
```

当我然后打电话时：

```
SomeModule.log_events 'call', 'return' 
```

就在我的 Rails 应用程序中的配置块之前`config/environments/development.rb`，它工作正常并继续工作。

但是，当我`app/controllers/application_controller.rb`在类定义的上方或下方调用它时，Rails 在 activesupport-3.2.8/lib/active_support/dependencies.rb:469 中的自动加载期间由于意外返回 (LocalJumpError) 而死机。

这是日志：

```
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb.30 #<Binding:0x007ff7b1403d40> Rails::Initializable::Initializer run
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb.54 #<Binding:0x007ff7b14039a8> Rails::Initializable run_initializers
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application.rb.136 #<Binding:0x007ff7b1403728> Rails::Application initialize!
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/railtie/configurable.rb.30 #<Binding:0x007ff7b1403480> Rails::Railtie::Configurable::ClassMethods method_missing
call /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb.275 #<Binding:0x007ff7b1402aa8> ActiveSupport::Dependencies::Blamable blame_file!
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb.277 #<Binding:0x007ff7b1402440> ActiveSupport::Dependencies::Blamable blame_file!
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb.233 #<Binding:0x007ff7b1401a40> ActiveSupport::Dependencies::Loadable load_dependency
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb.251 #<Binding:0x007ff7b1409790> ActiveSupport::Dependencies::Loadable require
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/builder.rb.51 #<Binding:0x007ff7b14093f8> Rack::Builder initialize
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/builder.rb.40 #<Binding:0x007ff7b1408ac0> Rack::Builder parse_file
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb.200 #<Binding:0x007ff7b1408840> Rack::Server app
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands/server.rb.46 #<Binding:0x007ff7b1408598> Rails::Server app
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb.301 #<Binding:0x007ff7b14082f0> Rack::Server wrapped_app
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb.252 #<Binding:0x007ff7b1408048> Rack::Server start
call /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb.179 #<Binding:0x007ff7b1407c88> Rack::Server options
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb.181 #<Binding:0x007ff7b14078f0> Rack::Server options
Exiting
return /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands/server.rb.74 #<Binding:0x007ff7b1406ec8> Rails::Server start
/path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:469:in `load': unexpected return (LocalJumpError)
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:469:in `block in load_file'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:639:in `new_constants_in'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:468:in `load_file'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:353:in `require_or_load'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:502:in `load_missing_constant'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:192:in `block in const_missing'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `each'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `const_missing'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/base_controller/menu.rb:2:in `<module:ActiveAdmin>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/base_controller/menu.rb:1:in `<top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/base_controller.rb:2:in `<top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/resource_controller/actions.rb:2:in `<module:ActiveAdmin>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/resource_controller/actions.rb:1:in `<top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/resource_controller.rb:2:in `<top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/batch_actions.rb:7:in `block in <top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/event.rb:25:in `call'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/event.rb:25:in `block in dispatch'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/event.rb:24:in `each'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/event.rb:24:in `dispatch'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/application.rb:179:in `load!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/application.rb:205:in `routes'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin.rb:79:in `routes'
  from /path/to/git/some_app_gemset/config/routes.rb:2:in `block in <top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:260:in `draw'
  from /path/to/git/some_app_gemset/config/routes.rb:1:in `<top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `each'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `load_paths'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:16:in `reload!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application.rb:108:in `reload_routes!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/reloader.rb:34:in `reload!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activeadmin-0.5.0/lib/active_admin/reloader.rb:61:in `block in attach!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:429:in `_run__1105766863370890952__prepare__156232144867029268__callbacks'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
  from /path/to/git/some_app_gemset/config/environment.rb:5:in `<top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /path/to/git/some_app_gemset/config.ru:4:in `block in <main>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
  from /path/to/git/some_app_gemset/config.ru:1:in `new'
  from /path/to/git/some_app_gemset/config.ru:1:in `<main>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
  from /path/to/.rvm/gems/ruby-1.9.3-p194@some_app_gemset/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
  from script/rails:6:in `require'
  from script/rails:6:in `<main>' 
```

知道我做错了什么，或者如何确定这种 set_trace_func 的使用何时何地应该起作用？

# c - 仅使用 Win32 的 Windows 应用程序能否通过 Windows 应用商店认证？

> ID：12942509
> 
> 赞同：-2
> 
> 时间：2012-10-17T20:08:08.223
> 
> 标签：c, winapi, com, windows-store-apps

**如果 Windows 应用程序仅**使用[允许的 Win32 子集](http://msdn.microsoft.com/en-us/windows/apps/br205757.aspx)并且用[纯 C](https://stackoverflow.com/a/946294/193892)编写，它是否可以通过 Windows 应用商店的认证？

[[有关的](https://stackoverflow.com/questions/12909139/can-windows-store-applications-be-built-with-mingw#comment17509787_12909139)]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:12:32.490

不可以。除其他原因外，Windows 应用商店应用程序必须具有用户界面，并且可从 Windows 应用商店应用程序调用的 Win32 API 不包括构建用户界面所需的功能。

您当然可以使用 C 构建 Windows 应用商店应用程序，尽管这样做听起来并不有趣。

# java - 使用 solrj 将新的 FieldType(java 类对象) 添加到 solr schema.xml -

> ID：12942510
> 
> 赞同：1
> 
> 时间：2012-10-17T20:08:09.577
> 
> 标签：java, solrj

`schema.xml`我在 solr文件中添加了一个新的 fieldType，如下所示：

```
fieldType class="myJavaClass" name="myClass" 
```

但是当我运行 solr 时，它会抛出一个错误，说它是未定义的 - 这个新类还需要在哪里定义才能让 solr 知道呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:05:14.727

（从评论中复制，因为它被发现是一个解决方案）

问题可能有多种原因 - 可能找不到该类，它可能没有扩展正确的类，它可能没有扩展 org.apache.solr.schema.FieldType，它可能没有公共零参数构造函数。我建议发布完整的错误消息（如果有更好的堆栈跟踪），也许还有一些来自您的字段类型类的代码。

# c# - MVC 多页表单丢失会话

> ID：12942511
> 
> 赞同：2
> 
> 时间：2012-10-17T20:08:13.617
> 
> 标签：c#, asp.net-mvc-3, forms, session, tempdata

我有一个用于收集潜在客户的多页表单。我们称之为活动的同一表单有多个版本。有些活动是 3 页表单，有些是 2 页，有些是 1 页。它们都共享相同的潜在客户模型和活动控制器等。有一个用于控制活动流程的操作，以及一个用于将所有潜在客户信息提交到数据库的单独操作。

我无法在本地重现此内容，并且已进行检查以确保用户无法跳过页面。会话模式是 InProc。

这在存储会话中的值的每个 POST 操作之后运行：

```
 protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        base.OnActionExecuted(filterContext);

        if (this.Request.RequestType == System.Net.WebRequestMethods.Http.Post && this._Lead != null)
            ParentStore.Lead = this._Lead;
    } 
```

这是控制器中的 Lead 属性：

```
 private Lead _Lead;

    /// <summary>
    /// Gets the session stored Lead model.
    /// </summary>
    /// <value>The Lead model stored in session.</value>
    protected Lead Lead
    {
        get
        {
            if (this._Lead == null)
                this._Lead = ParentStore.Lead;

            return this._Lead;
        }
    } 
```

父存储类：

```
public static class ParentStore
{
    internal static Lead Lead
    {
        get { return SessionStore.Get<Lead>(Constants.Session.Lead, new Lead()); }
        set { SessionStore.Set(Constants.Session.Lead, value); }
    } 
```

广告系列 POST 操作：

```
 [HttpPost]
    public virtual ActionResult Campaign(Lead lead, string campaign, int page)
    {
        if (this.Session.IsNewSession)
            return RedirectToAction("Campaign", new { campaign = campaign, page = 0 });

        if (ModelState.IsValid == false)
            return View(GetCampaignView(campaign, page), this.Lead);

        TrackLead(this.Lead, campaign, page, LeadType.Shared);

        return RedirectToAction("Campaign", new { campaign = campaign, page = ++page });
    } 
```

问题发生在上述操作之间，在执行以下提交操作之前：

```
 [HttpPost]
    public virtual ActionResult Submit(Lead lead, string campaign, int page)
    {
        if (this.Session.IsNewSession || this.Lead.Submitted || !this.LeadExists)
            return RedirectToAction("Campaign", new { campaign = campaign, page = 0 });

        lead.AddCustomQuestions();
        MergeLead(campaign, lead, this.AdditionalQuestionsType, false);

        if (ModelState.IsValid == false)
            return View(GetCampaignView(campaign, page), this.Lead);

        var sharedLead = this.Lead.ToSharedLead(Request.Form.ToQueryString(false)); //Error occurs here and sends me an email with whatever values are in the form collection.
        EAUtility.ProcessLeadProxy.SubmitSharedLead(sharedLead);
        this.Lead.Submitted = true;
        VisitorTracker.DisplayConfirmationPixel = true;

        TrackLead(this.Lead, campaign, page, LeadType.Shared);

        return RedirectToAction(this.ConfirmationView);
    } 
```

我们网站的每位访问者都会获得一个唯一的 GUID visitorID。但是，当这些错误发生时，Campaign POST 和 Submit POST 之间存在不同的 visitorID。因为我们在活动期间通过 TrackLead() 方法跟踪每个表单提交并提交操作，所以我可以看到会话在调用之间丢失，尽管 OnActionExecuted 在每次 POST 后触发并将表单存储在会话中。

因此，当出现错误时，我们会在一个visitorID 下获得一半的表单，而在另一个visitorID 下获得表单的其余部分。幸运的是，我们使用第三方服务，每次表单值更改时都会发送一个 API 调用，并使用它自己的 ID。这些 ID 在表格的前半部分和表格的其余部分之间是一致的，这是我可以从丢失的会话问题中保存线索的唯一方法。

我还应该注意，这在 99% 的情况下都可以正常工作。

**编辑：** 我已经修改了我的代码以将我的主要对象显式存储在 TempData 中，并使用 TempData.Keep() 方法在后续请求之间保留该对象。我只将此行为部署到我的 3 个站点中的 1 个，但到目前为止一切都很好。

我还尝试在控制器操作中直接将我的主要对象存储在 Session 中，即，

```
Session.Add("lead", this._Lead); 
```

它使用 HTTPSessionStateBase，试图绕过包装类，而不是使用 HTTPSessionState 的 HttpContext.Current.Session。正如预期的那样，此修改对这个问题没有任何影响。

**编辑#2：** 今天早上检查我的电子邮件，尽管我将我的主要模型保存在 TempData 中，但我注意到两个会话错误。某些事情导致会话清除，很可能是某种应用程序池回收，但我还没有弄清楚。我可能会开始在 SQL Server 中存储会话...

SessionStore.cs 代码按请求：

```
public static class SessionStore
{
    private static HttpSessionState Session
    {
        get { return HttpContext.Current.Session; }
    }

    public static T Get<T>(object name, T defaultValue)
    {
        var key = name.ToString();
        return SessionStore.Session.ContainsKey(key) ? (T)Session[key] : defaultValue;
    }

    public static void Set(object name, object value)
    {
        SessionStore.Session.Add(name.ToString(), value);
    }
} 
```

# c - C 读取（从标准输入）在 0x1a 字符处停止

> ID：12942518
> 
> 赞同：2
> 
> 时间：2012-10-17T20:08:29.123
> 
> 标签：c, io, stdin

目前我正在为原始数据（如 jpg 等）实施 Burrows-Wheeler 变换（和逆变换）。在对文本文件等普通数据进行测试时，不会出现任何问题。但是在读取 jpg 文件时，例如它会在字符 0x1a 即替代字符处停止读取。我一直在互联网上搜索不采用操作系统相关代码但没有结果的解决方案......我想以二进制模式在标准输入中读取，但我猜这并不容易。有没有什么简单的方法可以解决这个问题？

代码：

```
buffer = (unsigned char*) calloc(block_size+1,sizeof(unsigned char));
length = fread((unsigned char*) buffer, 1, block_size, stdin);
if(length == 0){
    // file is empty
}else{
    b_length = length;
    while(length == b_length){
        buffer[block_size] = '\0';
        encodeBlock(buffer,length);
        length = fread((unsigned char*) buffer, 1, block_size, stdin);      
    }
    if(length != 0){            
        buffer[length] = '\0';
        encodeBlock(buffer,length);
    }
}
free(buffer); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:26:10.823

正如您所注意到的，您正在以 ASCII 模式读取数据，`stdin`并且它遇到了 SUB 字符（替换，又名`CTRL`+ `Z`，又名 DOS End-of-File）。

[`setmode`](http://msdn.microsoft.com/en-us/library/tw4k6df8.aspx)您必须在 Windows 上使用 while 将模式更改为二进制：

```
#if defined(WIN32)
#include <io.h>
#include <fcntl.h>
#endif /* defined(WIN32) */

/* ... */

#if defined(WIN32)
_setmode(_fileno(stdin), _O_BINARY);
#endif /* defined(WIN32) */ 
```

在 Windows 以外的平台上，您不会在模式上遇到这种区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T20:25:55.277

如果没有操作系统依赖性，您将无法做到这一点。C 语言规范说 (7.19.3)

> 在程序启动时，预定义了三个文本流...

`stdin`是一个文本流。根据您的操作系统，可能有一些方法可以更改现有流的模式或访问低级流数据，但您声称您不需要任何特定于操作系统的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T20:25:07.813

您可以使用[`_setmode`](http://msdn.microsoft.com/en-us/library/aa298581%28VS.60%29.aspx)将标准输入转换为二进制模式。

还有[`freopen`](http://msdn.microsoft.com/en-us/library/wk2h68td%28v=vs.80%29.aspx)- 看到[这个 SO question](https://stackoverflow.com/questions/1598985/c-read-binary-stdin)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T20:16:46.460

用于**[`read()`](http://linux.die.net/man/2/read)**读入数据。
由于您有兴趣从 获取数据**`stdin`**，请使用

**`fd = fcntl(STDIN_FILENO, F_DUPFD, 0);`**

获得**`fd`**的**`stdin`**。

更多信息[在这里](http://gsp.com/cgi-bin/man.cgi?section=4&topic=stdin)。

这个问题与[Windows 将`0x1a`aka`CTRL+Z`视为**`EOF`**](http://www.go4expert.com/forums/showthread.php?t=3229). 正如 Earlz 指出的那样，以二进制模式打开它可以在 Windows 上修复此问题，并且也可以在 linux 上运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T20:10:08.537

您必须将文件作为二进制文件打开。

使用类似于

```
fopen("file", "rb"); 
```

# winforms - 在 Winform 中为 SqlConnection 设置全局的最佳方法

> ID：12942519
> 
> 赞同：0
> 
> 时间：2012-10-17T20:08:35.787
> 
> 标签：winforms, c#-4.0, sqlconnection

我想创建一个连接到数据库来做事的winform。它必须在打开时连接，然后根据用户单击的内容进行查询。我不是 100% 确定最好的课程是在加载时打开连接并使该连接能够从所有不同的类访问。我已经进行了测试运行以使连接正常工作，当用户单击按钮然后进行查询时打开数据库连接，但我想将数据库连接的打开移动到 InitializeComponent() 部分，然后从组件只需调用已经建立的连接。

我已经进行了设置，以便逐案运行，但有没有更好的方法来做到这一点？我是这样做的，只有你可以/应该这样做？

这是测试

Form1.Designer.cs

```
namespace end_of_day
{
    using System.Data.SqlClient;
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.button1 = new System.Windows.Forms.Button();
            this.label1 = new System.Windows.Forms.Label();
            this.button2 = new System.Windows.Forms.Button();
            this.button3 = new System.Windows.Forms.Button();
            this.button4 = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(78, 411);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(147, 64);
            this.button1.TabIndex = 0;
            this.button1.Text = "Test";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Location = new System.Drawing.Point(13, 13);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(199, 13);
            this.label1.TabIndex = 1;
            this.label1.Text = "ERROR: didn\'t connect to the database.";
            // 
            // button4
            // 
            this.button4.Location = new System.Drawing.Point(78, 201);
            this.button4.Name = "button4";
            this.button4.Size = new System.Drawing.Size(147, 64);
            this.button4.TabIndex = 4;
            this.button4.Text = "Print Out of Stock";
            this.button4.UseVisualStyleBackColor = true;
            this.button4.Click += new System.EventHandler(this.button4_Click);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(306, 523);
            this.Controls.Add(this.button4);
            this.Controls.Add(this.button3);
            this.Controls.Add(this.button2);
            this.Controls.Add(this.label1);
            this.Controls.Add(this.button1);
            this.Name = "Form1";
            this.Text = "End of day";
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.Button button1;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.Button button4;
        // NOTE I NEED TO BE ABLE TO CHANGE THE LABEL FROM OTHER CLASSES FIX THIS SOMEHOW
    }
} 
```

Form1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Net.Mail;

namespace end_of_day
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            SqlConnection myConnection = queries.create_concection();
            try
            {
                SqlDataReader myReader = null;
                SqlCommand myCommand = new SqlCommand("SELECT TOP 100000 ItemName,Price,In_Stock,Vendor_Part_Num FROM Inventory",
                                                         myConnection);
                myReader = myCommand.ExecuteReader();

                String mess = "";
                int i = 0;
                while (myReader.Read())
                {
                    if (i < 10)
                    {

                        mess += myReader["ItemName"].ToString();
                        mess += myReader["Price"].ToString();
                        mess += "\r\n";
                    }
                    i++;
                }
            }
            catch (Exception er)
            {

                DialogResult dlgRes = MessageBox.Show(er.ToString(), "Error",  MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question); 

            }

        }

        private void button4_Click(object sender, EventArgs e)
        {
            SqlConnection myConnection = queries.create_concection();

            DialogResult dlgRes = MessageBox.Show("Exculde Videos?",
                 "Options",
                MessageBoxButtons.YesNoCancel,
                 MessageBoxIcon.Question);

            String SQL_op = "";
            if (dlgRes == DialogResult.Yes)
            {
                SQL_op = "AND NOT Dept_ID = 'video'";
            }

            try
            {

                SqlDataReader myReader = null;
                SqlCommand myCommand = new SqlCommand("SELECT TOP 100000 ItemName,Price,In_Stock,Vendor_Part_Num FROM Inventory WHERE In_Stock<1 AND NOT Dept_ID = '006' "+ SQL_op+" ORDER BY Dept_ID",
                                                         myConnection);
                myReader = myCommand.ExecuteReader();

                String mess = "";
                int i = 0;
                while (myReader.Read())
                {
                    if (i < 10)
                    {

                        mess += myReader["ItemName"].ToString();
                        mess += myReader["Price"].ToString();
                        mess += "\r\n";
                    }
                    i++;
                }

                dlgRes = MessageBox.Show("Had " + i + "items including: \r\n" + mess,
                 "Confirm Document Close",
                MessageBoxButtons.YesNoCancel,
                 MessageBoxIcon.Question);

            }
            catch (Exception er)
            {

                dlgRes = MessageBox.Show(er.ToString(), "Error", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question);

            }
        }
    }
} 
```

查询.cs

```
using System;
using System.Collections.Generic;
using System.Xml;
using System.Linq;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Web;

namespace end_of_day
{
    public class queries
    {
        public static SqlConnection create_concection()
        {
            Boolean hasConection =true;
            SqlConnection myConnection = new SqlConnection(
                "Data Source=localhost\\SQLEXPRESS;" +
                "Trusted_Connection=true;" +

                "Initial Catalog=TESTDB; " +
                "connection timeout=30"
            );
            try
            {
                myConnection.Open();
            }

                catch (Exception er)
                {
                    hasConection = false;
                    DialogResult dlgRes = MessageBox.Show(er.ToString(), "Error", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question);
                }

            if (hasConection) {
                // THIS SHOULD CHANGE THE LABEL OF THE MAIN FORM
                //Form1 form = new Form1();
                //form.MyMessage = "made it"; 
            }
            return myConnection;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:13:45.220

> 它必须在打开时连接，然后根据用户单击的内容进行查询。...我已经设置了它，以便逐案运行，但有没有更好的方法来做到这一点？

**绝对**有更好的方法。表单加载时不要打开连接，并保持打开状态***。***

您应该始终遵循的经验法则是仅在需要时打开连接，并在使用完毕后立即关闭它。这意味着实际上您在需要运行查询之前不会打开它，尽可能接近实际查询执行，然后在查询完成后立即关闭连接。

> 我不是 100% 确定最好的课程是在加载时打开连接并使该连接能够从所有不同的类访问

您要问的是如何设计您的应用程序，而您将得到的常见答案是使用 n 层设计。您应该阅读[多层架构](https://en.wikipedia.org/wiki/Multitier_architecture)。

# jquery - UI 可排序列表的动画过渡

> ID：12942520
> 
> 赞同：3
> 
> 时间：2012-10-17T20:08:36.813
> 
> 标签：jquery, animation, user-interface, jquery-ui-sortable, transition

我正在使用一个**`jQueryUI`可排序的列表**，并希望在`li`我向上或向下拖动元素时在 s 左右移动时为过渡设置动画。正如**Apple**在他们的*iPod 应用程序*中重新排列播放列表的歌曲时所做的那样。

这可能吗？我已经搜索了几个小时，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:58:10.847

我已将 user1754406 在[github](https://gist.github.com/801570)上找到的代码放入 jsfiddle，这正是我想要的：

[http://jsfiddle.net/samjones00/AbpJF/](http://jsfiddle.net/samjones00/AbpJF/3/)

> `Too much code to paste, please see the code on jsfiddle`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:21:43.913

还原选项是我想要的。

[http://api.jqueryui.com/sortable/#option-revert](http://api.jqueryui.com/sortable/#option-revert)

jQuery 文档写得非常好，看起来他们正在使它变得更好。他们的方法也非常健壮，通常至少有一些你可以利用的回调事件来执行一些事情。确保你总是先看那里！

哦，如果您需要它，您的代码会添加如下选项：

```
$( "#sortable" ).sortable({
     revert:300,
     //other options you need go here, comma separated
}); 
```

# ms-access-2007 - MS Access 2007 - 选择多条记录并将值分配给字段

> ID：12942523
> 
> 赞同：0
> 
> 时间：2012-10-17T20:08:41.353
> 
> 标签：ms-access-2007

我正在使用多项目表格列出没有分配技术人员的案例（记录）（也许我应该使用数据表来列出记录？）。

我希望用户从下拉字段中选择一个技术人员，该字段从员工表中获取其值（我可以这样做）。然后我希望用户选择多个案例（记录），以便在所有选定的案例中将该一位技术人员分配给技术人员字段。

基本上，我试图让用户不必从每个传入的案例请求中分配技术人员。我希望他们“批量”为多个案例分配技术。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:36:13.640

好的，所以我做了更多的研究。这可能不是最好的答案，但它现在有效。

1.  我创建了一个多项目表单。
2.  我添加了一个未绑定的保管箱，其中列出了表中的员工
3.  我在详细信息部分（对于每条记录）添加了一个按钮，代码如下：

    Me.Technician = 我.Choose_Technician

现在，用户可以从下拉列表中选择一名技术人员，然后单击按钮将该技术人员分配给记录/案例文件。

如果您只有几个记录/案例文件要分配，这是一个简单的解决方案。如果传入的案例文件数量增加，则必须有一种方法可以使用 shift 键选择多个记录。我会继续研究这个。

# java - 数组中的空指针异常

> ID：12942535
> 
> 赞同：1
> 
> 时间：2012-10-17T20:09:17.050
> 
> 标签：java

我从这段代码中得到一个空异常错误，我不确定是什么原因造成的。数组 itemcatalog 已填充 i = 0 到 8。我是 java 新手，因此将不胜感激。错误消息指向 while 语句的行。谢谢

```
public class ItemCatalog {

   private static ItemCatalog instance = new ItemCatalog(); 
   private Item itemCatalog[] = new Item[9];

   private ItemCatalog(){
   };

   public static synchronized ItemCatalog getInstance() {
   return instance;
   }

   public void populateCatalog()
   {  
      itemCatalog[0] = new Item("bb","Baked Beans",new BigDecimal("0.35"));
      itemCatalog[1] = new Item("cf","Cornflakes",new BigDecimal("1.00"));
      itemCatalog[2] = new Item("s0","Sugar",new BigDecimal("0.50"));
      itemCatalog[3] = new Item("tb","Tea Bags",new BigDecimal("1.15"));
      itemCatalog[4] = new Item("ic","Instant Coffee",new BigDecimal("2.50"));
      itemCatalog[5] = new Item("b0","Bread",new BigDecimal("0.50"));
      itemCatalog[6] = new Item("s0","Sausages",new BigDecimal("1.30"));
      itemCatalog[7] = new Item("e0","Eggs",new BigDecimal("0.75"));
      itemCatalog[8] = new Item("m0","Milk",new BigDecimal("0.65"));
   }

   public BigDecimal getPrice(String itemCode)
   {  

      int i = 0;
      while (!itemCode.equals(itemCatalog[i].getItemCode()))
      {
        i++;
      }
      BigDecimal itemPrice = itemCatalog[i].getItemprice();
   return itemPrice;
   }
} 
```

我解决了这个问题。我在给出空异常错误的主类中填充目录。我改为在 jframe 中实例化它并且它可以工作。下面的代码解决了这个问题，但这是填充目录的最佳位置吗？

```
private void saleButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           

        String itemCode = this.itemCodeinput.getText();
        int itemQuantity =Integer.parseInt(this.itemQuantityinput.getText());

        ItemCatalog catalog = ItemCatalog.getInstance();

        catalog.populateCatalog(); 
        BigDecimal price = catalog.getPrice(itemCode);
        itemCostoutput.setText(price.toString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:13:24.760

如果您的 itemCode 与 itemCatalog 中的任何条目都不匹配，那么最终

```
 while (!itemCode.equals(itemCatalog[i].getItemCode()))
  {
      i++;
  } 
```

将 i 增加到 11，在这种情况下 itemCatalog[11] 为空或超出范围。

如果添加，您应该使用 for 循环遍历 itemCatalog：

```
for (int i = 0; i < itemCatalog.length; i++) {
    if (itemCode.equals(itemCatalog[i].getItemCode()) {
        return (BigDecimal) itemCatalog[i].getItemprice();
    }
}

return null // you can change this from null to a flag 
            // value for not finding the item. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:14:52.153

你如何结束你的循环？似乎循环将继续进行，直到 i 是 10。那么你将超过限制。

除非这是必须使用数组的 uni 分配，否则我还建议使用地图，而不是数组。这样，无论您的收藏有 100,000 个条目还是 10 个条目，您的查找都将是同一时间。

您还将降低 NPE 或 ArrayOutOfBounds 异常的风险

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

添加对象时，使用项目代码作为键。然后通过键查找。

使用地图的代价是增加了内存使用量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:15:02.203

从评论中，很明显设计不合理。

这是一个可能的解决方案：

```
public BigDecimal getPrice(String itemCode) {  
      for (int i=0; i<itemCatalog.length; i++) { // not going outside the array
          if (itemCatalog[i].getItemCode().equals(itemCode)) { // inversing the test to avoid npe if itemCode is null
             return itemCatalog[i].getItemprice();
          }
      }
      return null; // default value
} 
```

这假设您的数组正确填充了具有 itemCode 的 itemCatalogs。

# c++ - 未定义符号 std::__throw_bad_function_call

> ID：12942538
> 
> 赞同：1
> 
> 时间：2012-10-17T20:09:19.000
> 
> 标签：c++, stl, linker, g++

我正在使用 g++ 在 Eclipse CDT 中构建 C++ 代码，但出现以下链接器错误：

```
Undefined symbols for architecture x86_64:
  "std::__throw_bad_function_call()", referenced from:
      std::function<void (graphics::RenderingContext*)>::operator()(graphics::RenderingContext*) const in GameWindow.o 
```

我`std::function`在一个名为 GameWindow 的类中有成员。

有什么我必须链接到的东西才能获得`std::function`用于正确链接的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:42:47.867

原来我的 lib 路径没有为 g++ 正确设置。

为了后代：我使用 gcc 4.7 进行编译，因为我需要 C++11 功能。XCode（在 OS X Mountain Lion 上）附带 gcc 4.2，所以我通过 Homebrew 安装了 gcc 4.7。

为了让 Eclipse 使用 gcc 4.7 进行编译，我必须在项目设置中更改编译器和链接器的路径以对应于通过 Homebrew 新安装的版本。但是，我的项目设置中仍然有 gcc 4.2 stdlibc++ 的旧库路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:45:20.010

如果这是您唯一的错误，为什么您不尝试在自己的代码中实现该功能？就像是：

```
namespace std {
    void __throw_bad_function_call() {throw bad_function_call("invalid function called");}
} 
```

# android - DatePicker 在尝试使用时不起作用

> ID：12942543
> 
> 赞同：11
> 
> 时间：2012-10-17T20:09:39.780
> 
> 标签：android, datepicker

> **可能重复：**
> [找不到 Android CalendarView 类](https://stackoverflow.com/questions/11365959/android-calendarview-class-cannot-be-found)

我尝试在我的布局中放置一个日期选择器，但它只显示：`DatePicker`

和这个错误： `The following classes could not be found: - DatePicker (Change to android.widget.DatePicker, Fix Build Path, Edit XML)`我不知道这是什么，因为我的应用程序中已经有一个 DatePicker 并且它工作正常只是不知道为什么这个现在不起作用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:ignore="HardcodedText" >

    <TextView
        android:id="@+id/tvNomeR"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

    <TextView
        android:id="@+id/tvDataR"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

    <TextView
        android:id="@+id/tvMensagemR"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

    <DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/bAdiarR" 
            android:layout_width="0dp" 
            android:layout_height="wrap_content" 
            android:layout_weight="1" 
            android:text="Adiar" />

        <Button
            android:id="@+id/bResponderR"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Responder" />

    </LinearLayout >

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-17T20:29:32.750

我在图形布局中看到您在谈论什么，但这不会影响您的应用程序。此错误仅意味着 Eclipse 无法为您的布局构建 DatePicker 的预览。我敢打赌，如果你运行你的应用程序，它会显示得很好。

![截屏](../Images/029727ac9971251c530ce488df91285d.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-27T15:26:45.830

（正如在[这个类似问题](https://stackoverflow.com/questions/11365959/android-calendarview-class-cannot-be-found)中回答的那样）

您应该更改 api eclipse 用于以图形方式显示您的布局。您可以在右上角的图形视图中使用带有 android 徽标的按钮执行此操作。API 16 可能会出现一些问题，因此请尝试切换到 15 或 14。（加载和刷新需要一些时间）

# c++ - 使 std::vector 分配对齐的内存

> ID：12942548
> 
> 赞同：58
> 
> 时间：2012-10-17T20:09:56.703
> 
> 标签：c++, memory-management, memory-alignment, allocator

是否可以使`std::vector`自定义结构分配对齐的内存以使用 SIMD 指令进行进一步处理？如果有可能，有`Allocator`没有人碰巧有这样一个他可以共享的分配器？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-17T20:16:30.237

**编辑：**我删除了`std::allocator`GManNickG 建议的继承，并使对齐参数成为编译时的东西。

我最近写了这段代码。它没有像我希望的那样经过测试，所以继续并报告错误。:-)

```
enum class Alignment : size_t
{
    Normal = sizeof(void*),
    SSE    = 16,
    AVX    = 32,
};

namespace detail {
    void* allocate_aligned_memory(size_t align, size_t size);
    void deallocate_aligned_memory(void* ptr) noexcept;
}

template <typename T, Alignment Align = Alignment::AVX>
class AlignedAllocator;

template <Alignment Align>
class AlignedAllocator<void, Align>
{
public:
    typedef void*             pointer;
    typedef const void*       const_pointer;
    typedef void              value_type;

    template <class U> struct rebind { typedef AlignedAllocator<U, Align> other; };
};

template <typename T, Alignment Align>
class AlignedAllocator
{
public:
    typedef T         value_type;
    typedef T*        pointer;
    typedef const T*  const_pointer;
    typedef T&        reference;
    typedef const T&  const_reference;
    typedef size_t    size_type;
    typedef ptrdiff_t difference_type;

    typedef std::true_type propagate_on_container_move_assignment;

    template <class U>
    struct rebind { typedef AlignedAllocator<U, Align> other; };

public:
    AlignedAllocator() noexcept
    {}

    template <class U>
    AlignedAllocator(const AlignedAllocator<U, Align>&) noexcept
    {}

    size_type
    max_size() const noexcept
    { return (size_type(~0) - size_type(Align)) / sizeof(T); }

    pointer
    address(reference x) const noexcept
    { return std::addressof(x); }

    const_pointer
    address(const_reference x) const noexcept
    { return std::addressof(x); }

    pointer
    allocate(size_type n, typename AlignedAllocator<void, Align>::const_pointer = 0)
    {
        const size_type alignment = static_cast<size_type>( Align );
        void* ptr = detail::allocate_aligned_memory(alignment , n * sizeof(T));
        if (ptr == nullptr) {
            throw std::bad_alloc();
        }

        return reinterpret_cast<pointer>(ptr);
    }

    void
    deallocate(pointer p, size_type) noexcept
    { return detail::deallocate_aligned_memory(p); }

    template <class U, class ...Args>
    void
    construct(U* p, Args&&... args)
    { ::new(reinterpret_cast<void*>(p)) U(std::forward<Args>(args)...); }

    void
    destroy(pointer p)
    { p->~T(); }
};

template <typename T, Alignment Align>
class AlignedAllocator<const T, Align>
{
public:
    typedef T         value_type;
    typedef const T*  pointer;
    typedef const T*  const_pointer;
    typedef const T&  reference;
    typedef const T&  const_reference;
    typedef size_t    size_type;
    typedef ptrdiff_t difference_type;

    typedef std::true_type propagate_on_container_move_assignment;

    template <class U>
    struct rebind { typedef AlignedAllocator<U, Align> other; };

public:
    AlignedAllocator() noexcept
    {}

    template <class U>
    AlignedAllocator(const AlignedAllocator<U, Align>&) noexcept
    {}

    size_type
    max_size() const noexcept
    { return (size_type(~0) - size_type(Align)) / sizeof(T); }

    const_pointer
    address(const_reference x) const noexcept
    { return std::addressof(x); }

    pointer
    allocate(size_type n, typename AlignedAllocator<void, Align>::const_pointer = 0)
    {
        const size_type alignment = static_cast<size_type>( Align );
        void* ptr = detail::allocate_aligned_memory(alignment , n * sizeof(T));
        if (ptr == nullptr) {
            throw std::bad_alloc();
        }

        return reinterpret_cast<pointer>(ptr);
    }

    void
    deallocate(pointer p, size_type) noexcept
    { return detail::deallocate_aligned_memory(p); }

    template <class U, class ...Args>
    void
    construct(U* p, Args&&... args)
    { ::new(reinterpret_cast<void*>(p)) U(std::forward<Args>(args)...); }

    void
    destroy(pointer p)
    { p->~T(); }
};

template <typename T, Alignment TAlign, typename U, Alignment UAlign>
inline
bool
operator== (const AlignedAllocator<T,TAlign>&, const AlignedAllocator<U, UAlign>&) noexcept
{ return TAlign == UAlign; }

template <typename T, Alignment TAlign, typename U, Alignment UAlign>
inline
bool
operator!= (const AlignedAllocator<T,TAlign>&, const AlignedAllocator<U, UAlign>&) noexcept
{ return TAlign != UAlign; } 
```

实际分配调用的实现仅是 posix，但您可以轻松扩展。

```
void*
detail::allocate_aligned_memory(size_t align, size_t size)
{
    assert(align >= sizeof(void*));
    assert(nail::is_power_of_two(align));

    if (size == 0) {
        return nullptr;
    }

    void* ptr = nullptr;
    int rc = posix_memalign(&ptr, align, size);

    if (rc != 0) {
        return nullptr;
    }

    return ptr;
}

void
detail::deallocate_aligned_memory(void *ptr) noexcept
{
    return free(ptr);
} 
```

需要 C++11，顺便说一句。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-23T08:11:49.647

在即将发布的 1.56 版本中，Boost 库将包含 Boost.Align。在它提供的其他内存对齐帮助器中`boost::alignment::aligned_allocator`，它可以用来替代`std::allocator`并允许您指定对齐方式。请参阅[https://boostorg.github.io/align/上的文档](https://boostorg.github.io/align/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T20:16:39.117

是的，这应该是可能的。如果你把这个问题放在谷歌上，那么你会得到很多示例代码，下面是一些有希望的结果：

[https://bitbucket.org/marten/alignedallocator/wiki/Home](https://bitbucket.org/marten/alignedallocator/wiki/Home)

[http://code.google.com/p/mastermind-strategy/source/browse/trunk/src/util/aligned_allocator.hpp?r=167](http://code.google.com/p/mastermind-strategy/source/browse/trunk/src/util/aligned_allocator.hpp?r=167)

[https://gist.github.com/1471329](https://gist.github.com/1471329)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-09-11T12:46:03.943

从 C++17 开始，只需使用`std::vector<__m256i>`or 与任何其他对齐类型。有对齐的版本`operator new`，它被用于`std::allocator`对齐的类型（以及普通`new`的表达式，所以从 C++17 开始 new`__m256i[N]`也是安全的）。

@MarcGlisse 有一条评论说这个，使它成为一个答案，使其更加明显。

# hibernate - 自动确认多对一持久的外键约束

> ID：12942549
> 
> 赞同：1
> 
> 时间：2012-10-17T20:10:06.253
> 
> 标签：hibernate

这类似于这里的问题：

[使用外键字段的最佳实践](https://stackoverflow.com/questions/12347759/best-practice-for-working-with-foreign-key-fields)

但我想知道是否有任何方法可以自动执行这种逻辑。当我在“多”表中保留一条新记录时，该记录在“一”表中有一个外键，我希望休眠自动加载引用的实体并检查它是否存在，并访问该实体的字段（用于验证目的）。

有什么方法可以通过注释来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:49:35.843

这就是您在持久化 Many 时默认执行的操作：

```
One one = (One) session.get(One.class, oneId); // get the one entity from the database
Many many = new Many();
many.setOne(one);
session.save(many); 
```

如果您只需要一个引用，而不实际从数据库加载它，请使用`session.load()`而不是`session.get()`.

无论您做什么，只有数据库才能保证数据的一致性（因为另一个事务可以在您加载并附加到多个事务后删除它），因此您需要在数据库中进行外键约束。

# c++ - 尝试将 C++ 项目转换为与 CLR 兼容的静态库

> ID：12942553
> 
> 赞同：1
> 
> 时间：2012-10-17T20:10:14.723
> 
> 标签：c++, clr

因此，我成功地使用 /clr 标志将我正在开发的项目编译为 .lib。我现在正在努力为它创建一个 CLR 类库包装器，以允许我将它与 .NET 一起使用。

尝试编译 CLR 类库时出现以下错误：

```
Renderer.obj : error LNK2028: unresolved token (0A000017) "public: __thiscall cMain::cMain(void)" (??0cMain@@$$FQAE@XZ) referenced in function "private: void __clrcall Renderer::GraphicsBox::NewGraphicsBox(int,int,int,int)" (?NewGraphicsBox@GraphicsBox@Renderer@@$$FA$AAMXHHHH@Z)

Renderer.obj : error LNK2019: unresolved external symbol "public: __thiscall cMain::cMain(void)" (??0cMain@@$$FQAE@XZ) referenced in function "private: void __clrcall Renderer::GraphicsBox::NewGraphicsBox(int,int,int,int)" (?NewGraphicsBox@GraphicsBox@Renderer@@$$FA$AAMXHHHH@Z) 
```

我已将相关条目添加到包含目录，以及相关条目到 lib 目录。

代码如下所示：

标准数据文件

```
#pragma once

#include "cMain.h" 
```

渲染器.h

```
#pragma once

#include "Stdafx.h"

using namespace System;

namespace Renderer {

    public ref class GraphicsBox
    {
        GraphicsBox();
        ~GraphicsBox();

        void NewGraphicsBox(System::Int32 scrw, System::Int32 scrh, System::Int32 posx, System::Int32 posy);
        // TODO: Add your methods for this class here.
    };
} 
```

渲染器.cpp

```
#include "stdafx.h"

#include "Renderer.h"

pragma comment(lib "DX11test.lib")

using namespace Renderer;

GraphicsBox::GraphicsBox()
{

}

GraphicsBox::~GraphicsBox()
{

}

void GraphicsBox::NewGraphicsBox(System::Int32 scrw, System::Int32 scrh, System::Int32 posx, System::Int32 posy)
{
    cMain *base;

    bool result;

    base = new cMain;
    if (!base)
    {
        throw runtime_error("Failed at base = cMain");
    }
} 
```

我要参考的课程：

cMain.h

```
#ifndef _CMAIN_H_
#define _CMAIN_H_

#define WIN32_LEAN_AND_MEAN
#include <Windows.h>
#include <vector>
#include <map>
#include <string>

#include "InputHandler.h"
#include "cGraphics.h"
#include "cVehicleObject.h"
#include "cVehicleModel.h"
#include "cTerrainModel.h"
#include "cLight.h"

using namespace std;

public class cMain
{
public:
    cMain();
    cMain(const cMain& other);
    ~cMain();

    bool Initialize(int scrWidth, int scrHeight);
    void Shutdown();
    void Run();

    LRESULT CALLBACK MessageHandler(HWND hwnd, UINT umessage, WPARAM wparam, LPARAM lparam);
private:
    bool Frame();
    void InitializeWindows(int& scrw, int& scrh);
    void CreateNewWindow(int& scrw, int& scrh, int posx, int posy);
    void ShutdownWindows();

    void ErrorDump(vector<string> errors, string filename);
    void ErrorDump(string error, string filename);

    bool SetUpLights();
    bool SetUpObjects();

    LPCWSTR m_applicationName;
    HINSTANCE m_hinstance;
    HWND m_hwnd;

    InputHandler* m_input;
    cGraphics* m_graphics;

    cObject::GameObjects m_gameObjects;

    vector<cLight> m_lights;
};

static LRESULT CALLBACK WndProc(HWND hwnd, UINT umessage, WPARAM wparam, LPARAM lparam);
static cMain* ApplicationHandle = 0;

#endif 
```

我的直觉告诉我，这与在我试图设置为 lib 的项目中使用 Windows API 有关，但我缺乏将事物链接在一起的经验，所以老实说我不知道​​。

我想将整个事情转换为完全对 CLR 友好，我不想不遗余力。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:43:45.970

链接器错误与程序的包含路径无关，它与函数的实现有关。在您发布的示例中，我没有看到`cMain.cpp`，所以您可能忘记实施它或者您只是忘记实施`cMain::cMain()`

# java - 当用户按下返回键时可以停止线程吗？

> ID：12942554
> 
> 赞同：3
> 
> 时间：2012-10-17T20:10:14.863
> 
> 标签：java, android, multithreading

我有一种从互联网下载图像并将其存储在位图上的方法。在下载图像时，它会显示一个加载对话框。该方法工作正常，但我想将功能添加到我的应用程序中以停止线程（因此停止下载）并在用户按下手机上的返回键时关闭对话框。

```
public static void getRemoteImage(final String url, final Handler handler) {
        Thread thread = new Thread(){ 
            public void run() {
                try {
                    Looper.prepare();
                    handler.sendEmptyMessage(Util.SHOW_LOADING_DIALOG);
                    final URL aURL = new URL(url);
                    final URLConnection conn = aURL.openConnection();
                    conn.connect();
                    final BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
                    image = BitmapFactory.decodeStream(bis);
                    bis.close();
                    handler.sendEmptyMessage(Util.HIDE_LOADING_DIALOG); 
                    Looper.loop();  
                }catch (Exception e) {e.printStackTrace();}
            }
        };
        thread.start();
    } 
```

当用户在我的活动上按后退键时，如何添加停止线程的功能？我在谷歌上找不到路

编辑：这是我尝试使用 Ovidiu 答案，但它不起作用:(

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
         if (keyCode == KeyEvent.KEYCODE_BACK) {
              dialogHandler.sendEmptyMessage(Util.HIDE_DIALOG);
              task.cancel(true);
              return true;            
          }
       return super.onKeyDown(keyCode, event);
    }

    private class DownloadTask extends AsyncTask{       
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            //INITIALIZATIONS
        }

        @Override
        protected Object doInBackground(Object... params) {
            try {
                dialogHandler.sendEmptyMessage(Util.SHOW_DIALOG);
                final URL aURL = new URL(url);
                final URLConnection conn = aURL.openConnection();
                conn.connect();
                final BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
                image = BitmapFactory.decodeStream(bis);
                bis.close();
                dialogHandler.sendEmptyMessage(Util.HIDE_DIALOG);   
            }catch (Exception e) {e.printStackTrace();}
            return null;
        }

        @Override
        protected void onCancelled(){
            super.onCancelled();
            System.out.println("Task cancelled");
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T20:14:01.153

1.  你应该使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

2.  要停止它，您应该使用生命周期方法，`Activity`例如.`onStop()``onDestroy()``cancel()``AsyncTask`

3.  为了不重新发明轮子，您可能应该使用一些可以做到这一点（加载远程图像）的库，例如[Ignition](https://github.com/kaeppler/ignition)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:03:24.653

关于在活动中管理 AsyncTask 的一般建议。

```
public class MyActivity extends Activity {

  // Restore the task we kept alive 
  public void onCreate(Bundle savedInstanceState) {
    myTask = (MyTask) getLastNonConfigurationInstance();
    if (myTask!=null) myTask.connect(this);
  }

  // Keep the task alive on screen rotation for example 
  public Object onRetainNonConfigurationInstance() {
    myTask.disconnect();
    return myTask;
  }

  // Kill the task when we stop. If you wanna keep the task alive, you don't kill it here. 
  protected void onStop() {
    killTask();
    super.onStop();
  }

  // Disconnect the task from this activity and cancel it if needed
  private void killTask() {
    if (myTask!=null) {
      myTask.cancel(true);
      myTask.disconnect();
      myTask = null;
    }
  }

  // Kill task if running, create new one, link it to us and run it
  private void launchTask() {
    killTask();
    myTask = new MyTask();
    myTask.connect(this).execute();
  }

  void handleTaskCancelled() {
    Toast.makeText(this, "Task cancelled", Toast.LENGTH_SHORT).show();
  }

  void handleTaskCompleted(String result) {
    Toast.makeText(this, "Task done: " + result, Toast.LENGTH_SHORT).show();
  }

  private MyTask myTask;
} 
```

// 可以是独立类，也可以是活动的**静态**内部类

```
public class MyTask extends AsyncTask<Void, Void, String> {

  @Override
  protected void onPostExecute(String result){
    if (activityRef.get()!=null) {
      activityRef.get().handleTaskCompleted(result);
    }
  }

  @Override
  protected void onCancelled(){
    if (activityRef.get()!=null) {
      activityRef.get().handleTaskCancelled();
    }
  }

  public MyTask connect(MyActivity a) {
    activityRef = new WeakReference<MyActivity>(a);
  }

  public void disconnect() {
    activityRef.clear();
  }

  // Never keep a strong reference to an activity, you might leak memory
  WeakReference<MyActivity> activityRef = new WeakReference<MyActivity>(null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:13:00.320

由于大部分长时间的工作都是通过一次调用完成的`BitmapFactory.decodeStream(bis);`，因此无论如何您都无法真正立即停止线程......

一些可能的方法是（像使用线程一样做，但这在 AsyncTask 中会更好，这实际上是将 run() 代码放入 doInBackground() 函数）：

```
public class ImageThread extends Thread {
  Bitmap image = null;

  public void run() {
    // 1\. download the stream to a byte[]
    while data available in input stream
      read a few bytes and store them
      if (isInterrupted()) cleanUpAndExit();
    endwhile

    // 2\. Create bitmap from data
    image = BitmapFactory.decodeByteArray(...)
  }  
} 
```

[BitmapFactory.decodeByteArray](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int%29)

哦。还有缺少的一点……然后你需要重写活动的onBackPressed，或者活动的onStop方法来插入取消线程的代码：`imageThread.interrupt();`

# cordova - 外部 PDF 在 phonegap 应用程序中不刷新。

> ID：12942555
> 
> 赞同：1
> 
> 时间：2012-10-17T20:10:17.297
> 
> 标签：cordova, phonegap-plugins

我希望今天使用 Phonegap 发布我的第一个应用程序，但我发现了一个大问题 - 我在 Mac 上使用 Childbrowser。

我的应用程序旨在加载外部 PDF。但是我注意到，在打开我的应用程序并查看内容后，当我断开与互联网的连接时，仍然可以看到内容。这意味着如果外部 PDF 更新我的应用程序将不会显示它们。

我不认为是 Childbrowser 导致了我的问题，因为非 Childbrowser 页面也不会刷新。

有针对这个的解决方法吗？

非常感谢。

# jquery - 如何通过jquery根据div内的字符串获取输入

> ID：12942556
> 
> 赞同：1
> 
> 时间：2012-10-17T20:10:24.677
> 
> 标签：jquery, jquery-selectors

> **可能重复：**
> [如果元素包含某些文本](https://stackoverflow.com/questions/10329477/if-element-contains-certain-text)

我有这个**（更新的）** html：

```
<div>
    <div class="checkBox">
        <input type="checkbox" name="toppings" class="NS" value="n"  />
    </div>
    No Sauce                    
</div>

<div>
    <div class="checkBox">
        <input type="checkbox" name="toppings" class="NC" value="x"  />
    </div>
    No Cheese                    
</div>

<div>
    <div class="checkBox checkBoxSelected">
        <input type="checkbox" name="toppings" class="no_submit" checked="checked" value=""  />
    </div>
    Regular Cheese                    
</div>

<div>
    <div class="checkBox">
        <input type="checkbox" name="toppings" class="no_submit" value=""  />
    </div>
    Regular Sauce                    
</div> 
```

我如何（通过 jquery）获取包含文本“Regular Cheese”的 div 内的输入类型？

我知道我可以得到这样的所有复选框：

```
$("input.no_submit:checkbox") 
```

而且我知道，如果我想影响项目的父 div，我可以这样做：

```
$("input.no_submit:checkbox").parent("div").removeClass("checkBoxSelected"); 
```

我可以得到这样的实际文本：

```
​var myText = $("div").text(); 
```

但我不知道如何组合它们，以便我可以设置一个指向嵌套 div 内的实际输入元素的 var，该嵌套 div 本身位于无类 div 内，其文本是特定字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:14:18.383

或者这里有点不同的演示：http: `:)` [//jsfiddle.net/NBGBP/](http://jsfiddle.net/NBGBP/)

希望能满足需求！

**代码**

```
$(document).ready(function() {
    $('.no_submit').click(function() {

        if ($(this).is(':checked')){
            alert('Div text ==> ' + $(this).parents('div').text());   
        }

    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:18:58.427

您可以使用 :contains() 进行过滤以查找“Regular Cheese”文本。将其分离为过滤器而不是执行 div:contains 将是一个更快的选择器。然后，您想要找到父 div 中的输入并打印出它的类型。

```
$("div").filter(":contains('Regular Cheese')")
    .find("input.no_submit").prop("type"); 
```

[http://jsfiddle.net/ZeSdV/1/](http://jsfiddle.net/ZeSdV/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:14:13.023

尝试这个

```
$('div:contains("Regular Cheese") input.no_submit') 
```

参考：

包含 - [http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

演示：http: [//jsfiddle.net/Fs9tK/](http://jsfiddle.net/Fs9tK/)

# javascript - 更改部分 php 表单选择选项的颜色

> ID：12942558
> 
> 赞同：1
> 
> 时间：2012-10-17T20:10:31.633
> 
> 标签：javascript, css

我需要将表单选择选项标签中的部分文本设置为不同的颜色以帮助它脱颖而出。例如，任何带有 a 的东西`()`都必须是红色的。这甚至有可能吗？

```
<select id="product" name="product" onchange="calculatetotal();">
    <option value="5">1-4 years ($5)</option>
    <option value="10">5-9 years ($10)</option>
    <option value="15">10+ years ($15)</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:23:01.733

好的，所以我为你做了一些东西，经过测试并运行`Firefox 15.1`得很好，但你肯定会遇到跨浏览器的麻烦：[**我的小提琴**](http://jsfiddle.net/khN72/)

HTML

```
<select id="product" name="product" onchange="calculatetotal();">
    <option value="5" class="red">1-4 years</option>
    <option value="10" class="red">5-9 years</option>
    <option value="15" class="red">10+ years</option>
</select> 
```

CSS

```
option.red:nth-child(1):after{
    content: "($5)";
    color: red;
}

option.red:nth-child(2):after{
    content: "($10)";
    color: red;
}

option.red:nth-child(3):after{
    content: "($15)";
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:15:15.897

使用 JQuery，尝试：

```
$("select option:contains('(')").css("color", "red"); 
```

这是示例代码：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<select id="product" name="product" onchange="calculatetotal();">                   
    <option value="5">0-1 years</option>
    <option value="5">1-4 years ($5)</option>
    <option value="10">5-9 years ($10)</option>
    <option value="15">10+ years ($15)</option>
</select>

<script>
$("select option:contains('(')").css("color", "red");
</script>

</body>
</html> 
```

扩展上面外星人先生的回答：

```
<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    option:after{
    content: attr(data-price);
    color: red;
    }
  </style>

  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<select id="product" name="product" onchange="calculatetotal();">                   
    <option value="0" data-price="">0-1 years</option>
    <option value="5" data-price=" ($5)">1-4 years</option>
    <option value="10" data-price=" ($10)">5-9 years</option>
    <option value="15" data-price=" ($15)">10+ years</option>
</select>

</body>
</html> 
```

我不确定您是否只能将“（）”内的内容变为红色。您可以通过默认包含它来使第一个“（”变为黑色，但我无法在保持价格为红色的同时再次将最后一个“）”变为黑色。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:15:49.560

如果你想为整行设置样式，你可以在 CSS 中实现。

如果您只想对文本的一部分进行样式设置，则不能这样做。您将需要使用[自定义控件](http://www.onextrapixel.com/2012/06/20/create-a-custom-select-box-with-jquery/)。

# iphone - 使用前需要在iOS中声明方法吗？

> ID：12942563
> 
> 赞同：1
> 
> 时间：2012-10-17T20:10:39.230
> 
> 标签：iphone, ios, methods, prototype, declaration

> **可能重复：**
> [Objective-C：我应该声明私有方法吗？](https://stackoverflow.com/questions/6767129/objective-c-should-i-declare-private-methods)

在Objective-C中，我认为您必须在调用它之前声明一个方法，或者至少方法实现必须在文件中调用该方法之前。但似乎您可以调用一个方法，而无需在 .h 或类扩展中声明任何原型，并且无论顺序如何。

我认为以下会有问题，但它工作正常，所以我只是想知道是否需要在你的类扩展中声明“私有”方法？

```
- (id)init
{
    self = [super init];
    if (self) {
        [self methodA];
    }
    return self;
}

- (void)methodA
{
    NSLog(@"method A");
    [self methodB];
}

- (void)methodB
{
    NSLog(@"method B");
} 
```

# css - 当表单在 jQuery 验证插件中有效时，如何设置错误样式（具有良好的填充）并使错误容器消失？

> ID：12942564
> 
> 赞同：0
> 
> 时间：2012-10-17T20:10:50.797
> 
> 标签：css, jquery-validate

很长一段时间以来，我都在尝试制作漂亮的错误表单，但我错过了一些东西。一些我想将我所有的错误使用来自[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation)放在某个错误容器中，然后在表单有效时隐藏它。

当然，我想让我的表单看起来不错，所以我需要为元素添加填充。

如果我将填充添加到错误容器中，我会遇到这种情况：当字段有效时，然后变为有效时，我将有线条，它具有容器填充的宽度。这是屏幕截图：

![](../Images/c4e25ea60ea646625f7a82898a2d7843.png)

这是CSS：

```
 #messageBox1{
display:none;
padding-top: 10px;
padding-bottom: 10px;    
width:305px;
background-color: rgb(242, 222, 222);
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
 } 
```

视图中的 HTML：

和js代码：

```
 $(".login").validate({
    rules: {

        "user[email]":{
            email: true,
            required: true
        },
         'user[password]': {
            required: true,
            minlength: 6,
            remote: {
             url: url_name.concat("checkpass"),
            type: "get",
            data: {
              email: function() { return $("#user_email").val(); 
              }
            }

          }
        }
    },
    messages: {
    "user[email]": {
    remote: "You entered wrong email",
    required: "Your email is required"
    },
    'user[password]':{
    required: "Password is required",
    minlength: "Your password is too short",
    remote: "Your password is incorrect"
      }
    },
    errorContainer: "#messageBox1",
     errorLabelContainer: "#messageBox1",
     wrapper: "li"

 }) 
```

有没有可能让这个愚蠢的虫子从我的生活中消失？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:18:24.623

将填充添加到 li 元素本身而不是框。

```
#messageBox1 li{padding: 5px 0;}
#messageBox1 li:first-child{padding: 10px 0 0 0;}
#messageBox1 li:last-child{padding: 0 0 10px 0;} 
```

[http://jsfiddle.net/calder12/Vn69J/](http://jsfiddle.net/calder12/Vn69J/)

好的，如何将成功添加到验证功能，如果我没看错，它会在错误之后发生，然后是有效响应。

```
rules: {

    "user[email]":{
        email: true,
        required: true
    },
     'user[password]': {
        required: true,
        minlength: 6,
        remote: {
         url: url_name.concat("checkpass"),
        type: "get",
        data: {
          email: function() { return $("#user_email").val(); 
          }
        }

      }
    }
},
messages: {
"user[email]": {
remote: "You entered wrong email",
required: "Your email is required"
},
'user[password]':{
required: "Password is required",
minlength: "Your password is too short",
remote: "Your password is incorrect"
  }
},
errorContainer: "#messageBox1",
 errorLabelContainer: "#messageBox1",
 wrapper: "li"

},
success: function() {
 $('#messageBox1').css('display', 'none');
}) 
```

# javascript - 是否可以分叉子进程并等待它们在 Node/JS 中返回？

> ID：12942568
> 
> 赞同：4
> 
> 时间：2012-10-17T20:10:59.300
> 
> 标签：javascript, node.js

我必须多次进行某个计算。我想将它拆分为多个核心，所以我想使用 child_process.fork()，然后将工作的一部分传递给每个孩子。

这工作正常，除了我的主要进程（执行 fork() 的那个）在 fork()ing 之后继续运行，并且在孩子们完成工作时已经终止。

我真正想做的是等待孩子们完成后再继续执行。

我在 Node.js 中找不到任何好的方法来做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:20:55.180

如果您通过 生成一个新的*V8*进程`.fork()`，它会返回一个`child`实现通信层的新对象。例如

```
var cp    = require( 'child_process' ),
    proc  = cp.fork( '/myfile.js' );

proc.on('message', function( msg ) {
    // continue whatever you want here
}); 
```

`/myfile.js`当您完成工作时，您只需在您内部发送一个事件

```
process.send({ custom: 'message' }); 
```

* * *

请注意，此方法确实会生成一个新的 V8 实例，它会占用大量内存。所以你应该非常周到地使用它。也许您甚至不需要那样做，也许有一个更“类似节点”的解决方案（`process.nextTick`用于计算大量数据）。

# php - iOS / Xcode / Objective C / PHP / Rest - iPhone 使用 PHP 脚本进行身份验证

> ID：12942572
> 
> 赞同：-2
> 
> 时间：2012-10-17T20:11:09.530
> 
> 标签：php, objective-c, ios, rest

我正在慢慢学习如何为我的网站开发 iPhone 应用程序……我已经阅读了很多教程，也阅读了很多关于苹果开发者部分的内容。

当我开始时，我问了一个问题'与我的 Web 应用程序交互的最佳方式是什么'，我得到了 RESTful 服务的答案，所以我在我的 php 应用程序上安装了 restful，这一切都很好，我对此很满意。

我的网络应用程序是一个会员系统，我希望人们在他们的 iphone 上使用当前的网络应用程序进行身份验证，如果他们有一个帐户，很好，让他们进入，如果他们没有，然后显示错误消息。

不过，我有点困惑，我想知道是否有人可以帮助我。

我不希望任何人能够查看来自 restful 服务的响应，所以我认为我实现了密钥，现在，系统上的每个用户是否需要他们自己的密钥才能让他们的 iphone 应用程序访问 rest api，如果是这样，怎么做如果他们首先需要密钥，我会运行身份验证？

或者，应用程序是否只需要一个密钥来访问 api，然后通过用户身份验证完成其他所有操作......如果是这样，那么一个密钥肯定不会那么难破解，人们是否可以拆卸应用程序显示访问 api 的 api 密钥？

对此的任何想法将不胜感激......甚至是人们如何处理 php 和 ios 中的身份验证和休息服务的示例。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:22:27.180

创建您的密钥、sha1 或任何您喜欢的算法。确保您的 Web 服务只能通过 https 访问，然后将密钥嵌入到您的请求标头中。是的 ASIHTTPRequest 已贬值，但 AFNetworking 是一个很好的替代品[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)。在您的 PHP 方面，首先确保您的标头中的 auth 密钥有效，如果是，则进一步验证通过 POST 传递的用户名和密码。这应该可以帮助您，如果您仍然需要帮助，我可以明天发布代码...

* * *

## 更新 - 在下面添加代码

尝试这个...

```
// setup httpClient
NSURL *baseURL = [NSURL URLWithString:@"https://www.yourWebsite.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];  
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

// setup required wsapi parameters
NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
[parameters setObject:username_ forKey:@"username"];
[parameters setObject:password_ forKey:@"password"];
request = [httpClient requestWithMethod:@"POST" path:@"/path/to/your/webservice/authFile.php" parameters:parameters];

// setup request headers
[request setValue:@"68489233957fd9028kd9adf40119c1c93a98c00b80h94lk2jsdo9234720" forHTTPHeaderField:@"wsapiAccessToken"];  

// setup request operation blocks
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSDictionary *dictionary = [json_ parseJSONResponse:operation.responseData];

    // do something with your response here...
    }  

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    // handle error

}];

[operation start]; 
```

在您的服务器端使用 PHP 使用类似的东西...

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'].'/wsapi/functions/authFunctions.php');

if(accessTokenIsValid())
{
    if((isset($_POST['username'])) && (isset($_POST['password'])))
    {
        // validate passed username and password and do whatever else you need to do.
        // be sure to respond back with something so that your app can do something 
        // useful with the response like give access to the app on success or show 
        // an error message on failure
    }
    else
    {
        $responseArray = array('authResponse'=>'__PARAMSERROR__');
        echo json_encode($responseArray);
        exit;
    }
}
else
{
    $responseArray = array('authResponse'=>'__AUTHERROR__');
    echo json_encode($responseArray);
    exit;
} 
```

?>

请注意，我在这里使用了一个名为的函数`accessTokenIsValid`，如下所示。

```
function getWsapiAccessToken()
{
    $tokenString = "Some string here";
    // add some salt if you like - make this harder to guess
    return sha1($tokenString);
}
function accessTokenIsValid() 
{
    if( $_SERVER['HTTP_WSAPIACCESSTOKEN'] == getWsapiAccessToken() )
    {
            return true;
    }
    else
    {
            return false;
    }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:25:06.423

就个人而言，我可能会构建一个身份验证服务。有了这个，用户可以使用用户/密码或您拥有的任何身份验证标准来调用身份验证服务。然后，您可以授权或拒绝用户访问 REST 服务。如果通过身份验证，您将在应用程序中将令牌传回给调用者。对主要 REST API 的后续调用将需要包含此身份验证令牌，您将在决定是否通过 REST 服务提供响应之前针对用户当前有效的令牌进行身份验证。

# actionscript-3 - DatagramSocket bind() 和 connect() 的区别？

> ID：12942574
> 
> 赞同：7
> 
> 时间：2012-10-17T20:11:14.927
> 
> 标签：actionscript-3

我阅读了[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/DatagramSocket.html)，但不清楚`bind()`和`connect()`方法之间的区别。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T18:07:05.343

`bind()`使套接字**侦听**特定接口/端口上的传入请求。换句话说，它被服务器用来响应传入的请求。只有一个套接字可以绑定一个端口。

`connect()`导致套接字**连接**到由不同套接字服务的地址/端口。换句话说，它被客户端用来**连接**到服务器。多个客户端可以连接到一个端口。**注意：使用 UDP（数据报）套接字时不需要 connect()，只有 TCP/IP。UDP 是一种广播协议，connect() 甚至不需要套接字正在监听另一端。**

像这样的东西（改编自文档并且未经测试）应该发送和接收消息“你好，萝卜！” 在端口 12345 上对其自身：

```
package
{
    import flash.events.DatagramSocketEvent;
    import flash.net.DatagramSocket;

    public class TestClass
    {
        private var serverSocket:DatagramSocket = new DatagramSocket();
        private var clientSocket:DatagramSocket = new DatagramSocket();

        public function TestClass():void
        {
            this.serverSocket.bind(12345, "127.0.0.1");
            this.serverSocket.addEventListener(DatagramSocketDataEvent.DATA, dataReceived);
            this.serverSocket.receive();

            send("Hello, turnip!");
        }

        public function sendData(message:String):void
        {
            var data:ByteArray = new ByteArray();
            data.writeUTFBytes(message);

            try
            {
                clientSocket.send(data, 0, 0, "127.0.0.1", 12345);
                trace("sending:  " + message);
            }
            catch (error:Error)
            {
                trace(error.message);
            }
        }

        private function dataReceived(e:DatagramSocketDataEvent):void
        {
            var data:String = e.data.readUTFBytes(e.data.bytesAvailable);
            trace("received: " + data);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T00:05:57.603

1.  Bind 用于通过系统将特定端口分配给套接字，并且在第一个进程释放它之前，其他进程不能使用该特定端口。它通常用于服务器端。

2.  监听和绑定是不一样的，listen 把socket 放到监听状态，换句话说，服务器socket 说我现在正在监听传入的客户端连接。

3.  客户端使用 Connect 连接到侦听服务器套接字。

4.  最后，当客户端在侦听状态下想要连接到它时，服务器套接字会使用accept。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T16:05:19.240

对此的简单解释是：假设您已经创建了服务器和客户端套接字，`serverSock`并且`clientSock`

当你说的时候`serverSock.bind((localhost,portnumber))`，它意味着必须在唯一端口' '`serverSock`上寻址' '`localhost``portnumber`

而如果您说`clientSock.connect((localhost, portnumber))`在客户端，这意味着我们告诉客户端使用主机名与服务器连接 ' `localhost`' （可以是服务器 IP 地址）并`portnumber`使用`clientSock`套接字在端口 ' ' 连接。

# matlab - Matlab 7.0.4 神经网络工具教程

> ID：12942576
> 
> 赞同：0
> 
> 时间：2012-10-17T20:11:39.327
> 
> 标签：matlab

有人可以向我提供有关如何在 Windows 上的 MATLAB 7.0.4 中使用名为“nntool”的 GUI 神经网络工具的教程链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:19:22.627

不完全确定您要做什么，希望[这](http://www.scribd.com/doc/54929963/9/Using-%E2%80%9Cnntool%E2%80%9DGUI)会有所帮助。

# javascript - Javascript TinyMCE 和 Tinybox2

> ID：12942577
> 
> 赞同：1
> 
> 时间：2012-10-17T20:11:53.520
> 
> 标签：javascript, tinymce, modalpopup

我正在使用 [tinyMCE][1] 和 [tinybox2][2] 我可以让两者独立工作，但我想要实现的是我点击编辑按钮 tinybox2 在页面上打开带有相关 id 字符串的 url链接打开了这个带有更新表单的tinyMCE，但我不明白为什么tinymce不会在弹出窗口中加载。

有没有办法让 javascript 进入这个 tinybox 的弹出窗口？或者为什么阻止更多的javascript加载？

感谢您的帮助：D

到目前为止，我已经这样做了：

1.  `<script type="text/javascript" src="js/jquery-1.8.2.js"></script>`
2.  通过 $.ajax() 获取 test.php 内容；-*不知道这个*-
3.  `<p><a class="Forumusername" onclick="TINY.box.show({url:'test.php',width:750,height:300})">CLICK ME</a>`
4.  使用 tinyMCE.init 调用重新初始化 TinyMCE 编辑器。-*我也不知道如何实现*-

已编辑链接，但问题已得到解答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:39:06.993

我不擅长更新旧代码，所以我会完全重写它。这是我的两个文件的内容`test.php`和`edit.php`：

测试.php

```
<!doctype html>

<link rel="stylesheet" href="js/tinybox2/style.css" type="text/css" />

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="js/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript" src="js/tinybox2/tinybox.js"></script>

<script type="text/javascript">
$(function(){
    $('#open_editor').click(function(){
        $.get(this.href).done(function(html){
            TINY.box.show({ 
                html: html,
                width: 500, 
                height: 400, 
                openjs: function(){
                    tinyMCE.init({ mode: 'textareas', theme: 'advanced' });
                }
            });
        });
        return false;
    });
    tinyMCE.init({ mode: 'textareas', theme: 'advanced' });
});
</script>

<a id="open_editor" href="edit.php">Open editor</a>

<textarea></textarea> 
```

编辑.php

```
<textarea name="body" rows="10" cols="50"></textarea> 
```

在运行之前更正样式表和脚本的路径`test.php`。

这些脚本经过检查和测试。

# c# - 将 SQLDateTime DayTicks 转换回 DateTime 值

> ID：12942580
> 
> 赞同：1
> 
> 时间：2012-10-17T20:12:14.303
> 
> 标签：c#, sqldatetime

我有一个日期值作为整数存储在使用 SQLDateTime DayTicks 函数创建的数据库中。如何将该整数值反向工程回 DateTime 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:24:20.970

您将丢失日期的时间部分，除非您也有 timeTicks 在某处浮动。这会将 dayTicks 转换回 DateTime：

```
SqlDateTime sdt = new SqlDateTime(dayTicks, 0);
DateTime dt = sdt.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:13:22.643

试试这个：

```
DateTime result = new DateTime(ticks); 
```

有一个 DateTime 构造函数的重载，它采用刻度数。

# javascript - 从桌面 Chrome IndexedDB 与从 android Chrome IndexedDB 中删除记录

> ID：12942581
> 
> 赞同：0
> 
> 时间：2012-10-17T20:12:21.100
> 
> 标签：javascript, android, google-chrome, crud, indexeddb

我正在尝试使用以下代码从 IndexedDB 中删除记录：

```
DB.indexedDB.IDBTransaction.READ_WRITE="readwrite";
window.indexedDB =  window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB;

if ('webkitIndexedDB' in window) {
        window.IDBTransaction = window.webkitIDBTransaction;
        window.IDBKeyRange = window.webkitIDBKeyRange;
        DB.indexedDB.IDBTransaction.READ_WRITE=IDBTransaction.READ_WRITE;
    }

DB.indexedDB.idelete = function( storeName, indexValue, index, keyPathfield ){
    var db = DB.indexedDB.db;
    var transaction = db.transaction([storeName], DB.indexedDB.IDBTransaction.READ_WRITE);
    var store = transaction.objectStore(storeName);
    var sindex = store.index(index);

    sindex.get(indexValue).onsuccess = function (event){
        store.delete(event.target.result[keyPathfield]).onsuccess = function(event) {
            document.getElementById("result").innerHTML+="deleted<br>";
            };
        }
} 
```

它调用`onsuccess`但是当我添加一个相同的新记录`indexValue`并再次调用`idelete`并使用以下代码搜索记录时：

```
DB.indexedDB.readAll=function(storeName, index){
    var results=document.getElementById("result");
    var db = DB.indexedDB.db;
    var transaction = db.transaction([storeName]);
    var store = transaction.objectStore(storeName);
    var key = IDBKeyRange.lowerBound(0);
    var cursor = store.openCursor(key);
    var x=0;

    cursor.onsuccess = function(event){
        var result = event.target.result;
        if(result)
        {
            x++;
            var charx=x.toString();
            results.innerHTML+=charx+result.value[index]+"<br>";
            result.continue();
        }
        else 
        return;
} 
```

如果我使用的是 Windows Chrome，记录会被正确删除。但是如果我使用的是Android Chrome M18.1版本，`readAll`仍然可以找到该记录但`idelete`无法删除它，因为它实际上已被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:56:09.583

如何只打开键光标而不是实际检索它。

```
sindex.openKeyCursor(indexValue).onsuccess = function (event){
    var cursor = event.target.result;
    if (cursor) {
      // cursor.delete(); 
      var key = cursor.key;
      var primaryKey = cursor.primaryKey;

      store.delete(primaryKey).onsuccess = function(event) {
        document.getElementById("result").innerHTML+= key + ' (' + primaryKey + ") deleted<br>";
        };
      }
    } else {
      document.getElementById("result").innerHTML+= indexValue + ' not found.<br>";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:53:23.267

这里的问题是一次有多个事务在进行中——我可以说这是因为 idelete() 不会返回它创建的事务，所以无法保证 readAll() 在 idelete() 之后执行。

相反，您需要让 ielete() 返回事务，然后处理它：

```
foo = idelete(....).oncomplete = function() { readAll()...} 
```

我认为它恰好在android中工作的事实只是chrome实现的侥幸（这是android上的单进程，所以事件往往在那里更连续地运行）

# qt - 在 emacs 中为 Qt 自动完成

> ID：12942591
> 
> 赞同：7
> 
> 时间：2012-10-17T20:12:56.623
> 
> 标签：qt, emacs, autocomplete, qt4

我已经沉迷于 emacs 并且一直在使用它。现在，我已经启动了 Qt4 。我被迫转向 Qt Creator，因为它在 Qt 中编写程序时需要它的自动完成功能，因为其中大量使用了预定义的函数。

但问题是我不想离开emacs。有没有办法在 emacs 中获得接近 Qt Creator 的自动完成功能。

我已经安装了 CEDET-1.1，在那里我发现了 c++ 的文本文件，其中包含所有常用的 c++ 关键字。一种方法是在该文件中添加 Qt 类和函数名称，这为我提供了一个非常基本的 Qt 自动完成功能。但是我可以获得更好的自动完成功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T08:26:57.480

不要再使用 cedet，它又大又慢。

我建议您使用[https://github.com/brianjcj/auto-complete-clang](https://github.com/brianjcj/auto-complete-clang)，它轻量级且易于使用。您需要做的就是学习和配置自动完成和 yasnippet。

# c# - c#正则表达式模式查找数字

> ID：12942594
> 
> 赞同：-4
> 
> 时间：2012-10-17T20:13:05.837
> 
> 标签：c#, regex, expression

我正在尝试制作一个正确的正则表达式模式来在它之前**和/或**之后找到我的数字**4**有字母和数字and （并且只有第一个字母可以是大写字母，**如果存在**的话）。但不是只有数字，即使它们是 4 和 6！如果我发现我想用其他符号替换它，请保持不变！**`a-z``4``6``A-Z`**`4``ч`****

 ****例子：

> abs4 4ao 4epa4 a46 E4a 4e ne4es6（全部正确）
> 
> 4 a41 4a7 456 **46** **64** **44** **e4A** （全错）

这段代码几乎可以工作

`string replaced4 = Regex.Replace(richTextBox3.Text, "([A-Z]?[a-z]+)4([a-z46]*)|([A-Z]?[a-z46]*)4([a-z]+)", "$1ч$2");`

当此代码不起作用时，有两个例外。

1\. 如果 4 是第一个符号

2\. 如果 4 是最后一个符号

问题就在这里，`"$1ч$2"`但我不知道如何修复它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:59:42.593

手动检查其中是否有 4 ( `myString.Contains('4')`)，然后使用：

```
[A-Za-z46][a-z46]+ 
```

* * *

```
if (RegEx.IsMatch(myString, "[A-Za-z46][a-z46]+"))
{
  myString = myString.Replace("4", "$1ч$2"); // If there's not actually a 4, it won't do anything.
} 
```****

# objective-c - 如何阻止 UIPanGestureRecognizer 识别水龙头

> ID：12942601
> 
> 赞同：1
> 
> 时间：2012-10-17T20:13:26.613
> 
> 标签：objective-c, ios, uigesturerecognizer, segue

在我的 iPhone 应用程序的一个 UIViewControllers 上，我连接了一个 UIPanGestureRecognizer，以便当用户向左或向右滑动时，应用程序前进或返回一个屏幕。然而，问题是当用户在屏幕上点击（而不是滑动）时，它仍然会前进。我怎样才能阻止这种情况发生。我在下面粘贴了相关代码：

```
-(void) addGestureRecognizer
{
    UIPanGestureRecognizer *pan;
    pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRecognized:)];
    [pan setMinimumNumberOfTouches:1];
    [self.view addGestureRecognizer:pan];
}

-(void) swipeRecognized: (UIPanGestureRecognizer  *) recognizer
{
    if(recognizer.state != UIGestureRecognizerStateBegan) return;
    CGPoint velocity = [recognizer velocityInView:self.view];
    if(velocity.x > 0)
    {
        [self.navigationController popViewControllerAnimated:YES];
    }
    else
    {
        @try
        {
            [self performSegueWithIdentifier:NEXT_STEP_SEGUE sender:self];
        }
        @catch (NSException *exception)
        {
            //Silently die...muhaha
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:15:50.373

我建议使用`UISwipeGestureRecognizer`滑动。你用平底锅有什么特别的原因吗？

使用 a`UISwipeGestureRecognizer`您可以指定它应该识别手势的方向。

使用适当的手势对您的用户也更好。这样，他们就会有宾至如归的感觉：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:08:01.083

您应该`UISwipeGestureRecognizer`按照 fguchelaar 的建议使用 a ，或者使用该`translationInView:`方法来确定用户实际移动了手指的距离（对于轻击，应该接近于零）。

如果状态不是（方法中的第一行），您也不应该提前返回`UIGestureRecognizerStateBegan`，否则您的方法只会在手势开始时被调用一次，而不是在手势期间调用。如果那是您真正想要的，`UISwipeGestureRecognizer`那么您只需要一个。平移手势识别器的好处主要在于您可以跟踪用户的手指并提供直接反馈（例如在手指仍然向下时移动视图）。

# windows - ATA 命令设备识别

> ID：12942606
> 
> 赞同：0
> 
> 时间：2012-10-17T20:13:41.583
> 
> 标签：windows, solid-state-drive, ata

我正在尝试使用 ATA_PASS_THROUGH_EX 识别设备。

当我看到输出缓冲区时，它包含所有无效数据。有人可以帮我做错什么吗？

```
#include <Windows.h>
#include <ntddscsi.h>
#include <iostream>

void main() {
    WCHAR *fileName = (WCHAR * ) "\\.\PhysicalDrive0";
    HANDLE handle = CreateFile(
       fileName, 
       GENERIC_READ | GENERIC_WRITE, //IOCTL_ATA_PASS_THROUGH requires read-write
       FILE_SHARE_READ, 
       NULL,            //no security attributes
       OPEN_EXISTING,
       0,              //flags and attributes
       NULL             //no template file
    );

    ATA_PASS_THROUGH_EX inputBuffer;
    inputBuffer.Length = sizeof(ATA_PASS_THROUGH_EX);
    inputBuffer.AtaFlags = ATA_FLAGS_DATA_IN;
    inputBuffer.DataTransferLength = 0;
    inputBuffer.DataBufferOffset = 0;

    IDEREGS *ir  = (IDEREGS *) inputBuffer.CurrentTaskFile;
    ir->bCommandReg = 0xEC; //identify device
    ir->bSectorCountReg = 1;

    unsigned int inputBufferSize = sizeof(ATA_PASS_THROUGH_EX);

    UINT8 outputBuffer[512];
    UINT32 outputBufferSize = 512;
    LPDWORD bytesReturned = 0;

    DeviceIoControl( handle, IOCTL_ATA_PASS_THROUGH_DIRECT, &inputBuffer,    inputBufferSize, &outputBuffer, outputBufferSize, bytesReturned, NULL);

    DWORD error = GetLastError();

    std::cout << outputBuffer << std::endl;
    system("pause");
} 
```

更新：当我检查错误值时，它是 5，这意味着它是访问冲突。我在管理员模式下运行。难道我做错了什么？

-缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:46:32.983

我使用如下代码完成了这项工作：

```
int foo()
{
    int iRet( 0 );

    // Open handle to disk.
    HANDLE hDevice( ::CreateFileW( L"\\\\.\\PhysicalDrive0", GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL ) );
    if( hDevice == INVALID_HANDLE_VALUE )
    {
        std::wcout << L"CreateFileW( " << sPath << L" ) failed.  LastError: " << GetLastError() << std::endl;
        return -1;
    }

    //
    // Use IOCTL_ATA_PASS_THROUGH
    //
    std::vector< UCHAR > vBuffer( sizeof( ATA_PASS_THROUGH_EX ) + sizeof( IDENTIFY_DEVICE_DATA ), 0 );
    PATA_PASS_THROUGH_EX pATARequest( reinterpret_cast< PATA_PASS_THROUGH_EX >( &vBuffer[0] ) );
    pATARequest->AtaFlags = ATA_FLAGS_DATA_IN | ATA_FLAGS_DRDY_REQUIRED;
    pATARequest->Length = sizeof( ATA_PASS_THROUGH_EX );
    pATARequest->DataBufferOffset = sizeof( ATA_PASS_THROUGH_EX );
    pATARequest->DataTransferLength = sizeof( IDENTIFY_DEVICE_DATA );
    pATARequest->TimeOutValue = 2;
    pATARequest->CurrentTaskFile[6] = ID_CMD;

    ULONG ulBytesRead;
    if( DeviceIoControl( hDevice, IOCTL_ATA_PASS_THROUGH, 
        &vBuffer[0], ULONG( vBuffer.size() ),
        &vBuffer[0], ULONG( vBuffer.size() ),
        &ulBytesRead, NULL ) == FALSE )
    {
        std::cout << "DeviceIoControl(IOCTL_ATA_PASS_THROUGH) failed.  LastError: " << GetLastError() << std::endl;
        iRet = -1;
    }
    else
    {
        // Fetch identity blob from output buffer.
        PIDENTIFY_DEVICE_DATA pIdentityBlob( reinterpret_cast< PIDENTIFY_DEVICE_DATA >( &vBuffer[ sizeof( ATA_PASS_THROUGH_EX ) ] ) );
    }

    CloseHandle( hDevice );

    return iRet;
} 
```

**请注意，这必须从管理员帐户或提升的上下文中运行。**

# django - GeoDjango：地理查询导致分段错误

> ID：12942608
> 
> 赞同：0
> 
> 时间：2012-10-17T20:13:44.963
> 
> 标签：django, segmentation-fault, geodjango, spatialite, django-dev-server

在带有 SpatiaLite 的 Django 开发服务器上，我正在尝试进行基本的地理查询：

```
Location.objects.filter(geom__within=loc.geom) 
```

这会导致 a`Segmentation error`和服务器死亡。`loc`是`Location`模型的一个实例：

```
from django.contrib.gis.db import models

class Location(models.Model):
    geom = models.GeometryField()

    objects = models.GeoManager() 
```

你认为可能有什么问题？

# javascript - 完成后无法禁用引导按钮

> ID：12942618
> 
> 赞同：3
> 
> 时间：2012-10-17T20:14:19.463
> 
> 标签：javascript, twitter-bootstrap

这很简单：在元素 el 上调用 bootstrap button('complete') 之后，

```
el.attr('disabled', 'disabled');​ 
```

和

```
el.addClass('disabled');​ 
```

没有效果

这是 jsfiddle [http://jsfiddle.net/D2RLR/2732/](http://jsfiddle.net/D2RLR/2732/)

这就是我所期望的（它与“加载”一起使用的jsfiddle）：http: [//jsfiddle.net/xgKZd/](http://jsfiddle.net/xgKZd/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T21:18:06.487

这似乎只是一个时间问题：如果您在设置`disabled`类和属性之前“等待”，它会起作用：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/D2RLR/2736/)

该插件使用 0 超时（查看源以获取更多信息），但它似乎“花费”了更多时间。只需添加一些延迟或自己制作按钮效果，以便您可以控制操作的顺序。

```
setTimeout(function() { $('#bton').button('complete'); }, 2000);

setTimeout(function() { $('#bton').attr('disabled', 'disabled').addClass('disabled'); }, 4000); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T20:27:55.157

我遇到了同样的问题，想分享一个替代解决方案。您可以更改加载文本数据属性值。所以如果你有一个按钮：

`<button id='myButton' data-loading-text="Loading..." type="submit">Save</button>`

并且您最初做某事并想要显示“正在加载...”消息

```
$('#myButton').button('loading'); 
```

然后当你都完成后，你可以做这样的事情：

```
$('#myButton').data('loading-text','Done!').button('loading'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T11:34:25.443

@Sherbrow 是对的，但您无需等待 2 秒即可禁用按钮。因为`.button`' 的 setState 方法正在使用 setTimeout （签出[源代码](https://github.com/twbs/bootstrap/blob/v2.3.2/js/bootstrap-button.js#L46)）处理类，所以你只需要做类似的事情，例如：

```
var $btn = $('#btn');
$btn.button('complete');
setTimeout(function(){ 
    $btn.attr('disabled', 'disabled').addClass('disabled'); 
}, 0); 
```

# azure - Azure SDK 1.7 中的 RelayConfigurationInstaller.exe 工具在哪里？

> ID：12942625
> 
> 赞同：0
> 
> 时间：2012-10-17T20:14:48.100
> 
> 标签：azure, machine.config, azureservicebus, azure-sdk-.net

我似乎在 2012 年 6 月 SDK 版本中找不到Azure服务[总线](http://www.microsoft.com/en-us/download/details.aspx?id=29988)**中继配置工具**。当[WCF](https://stackoverflow.com/a/12314895/175679)扩展未正确安装在.`RelayConfigurationInstaller.exe``machine.config`

这是错误消息：

> *为 system.serviceModel/bindings 创建配置节处理程序时出错：无法加载文件或程序集 'Microsoft.ServiceBus，Version=1.6.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。*

我正在尝试从**Azure SDK 1.6**（*2011 年 11 月*）升级到**Azure SDK 1.7**（*2012 年 6 月*）并收到此消息。安装程序似乎没有自动将我的`machine.config`设置从 1.6 升级到 1.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:45:33.910

如发行说明中所述，一个关键建议是`app.config`用于这些条目，而不是`machine.config`. 从 SDK1.6 开始，所有后续 Azure SDK 都可以并排安装。因此，您可以保持安装 SDK 1.6，然后添加 SDK 1.7。中的条目`machine.config`不支持这一点，因此如果我们继续使用该方法，该框上的所有应用程序将使用 1.6 或自动升级到 1.7。因此，建议更改`app.config`为这些条目开始使用文件，让您根据每个项目决定在 SDK 版本之间移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:18:08.100

根据[MSDN Release Notes](http://msdn.microsoft.com/en-us/library/windowsazure/hh667331.aspx)，该工具`RelayConfigurationInstaller.exe`已在 Azure SDK 1.7 中弃用：

### 来自 MSDN：

> ***SDK 不再附带 RelayConfigurationInstaller.exe**工具。此工具使您能够添加配置文件中支持服务总线绑定所需的 Machine.config 设置。现在添加这些绑定的推荐方法是通过安装 NuGet 包来添加对服务总线的引用。NuGet 将正确的条目添加到配置文件中。有关详细信息，请参阅 NuGet 库。*

我猜您需要**手动更新**您的`machine.config`以将所有引用更改`Microsoft.ServiceBus, Version=1.6.0.0`为`Microsoft.ServiceBus, Version=1.7.0.0`.

或者 - 您可以完全从 中删除扩展`machine.config`，但您必须使用服务总线扩展将它们添加到现有应用程序中。

# objective-c - 可可sqlite db文件

> ID：12942627
> 
> 赞同：0
> 
> 时间：2012-10-17T20:14:54.963
> 
> 标签：objective-c, cocoa, sqlite

我在理解以下代码不起作用的原因时遇到了一些麻烦：

```
sqlite3_stmt *statement5;

NSString *databasePath2 = @"default-gameData.db";
NSInteger speed_int = 0;

const char *dbPath2 = [databasePath2 UTF8String];

if(sqlite3_open(dbPath2, &db)==SQLITE_OK){
    NSString *getspeeds = @"SELECT * FROM planeInfo";
    NSLog(@"%@",getspeeds);
    const char *getspeed_stmt = [getspeeds UTF8String];

    if(sqlite3_prepare_v2(db, getspeed_stmt, -1, &statement5, nil)==SQLITE_OK){

        NSLog(@"%d",sqlite3_step(statement5));

        NSString *org_plane_info_id = [[NSString alloc] init];

        while(sqlite3_step(statement5) == SQLITE_ROW){
            if((const char*)sqlite3_column_text(statement5, 1)==NULL){
                org_plane_info_id = @"no";
            }
            else{
                org_plane_info_id = [[NSString alloc] initWithUTF8String:(const char*)sqlite3_column_text(statement5, 1)];
            }
            NSLog(@"%@",org_plane_info_id);
            if(org_plane_info_id==plane_info_id){
                NSString *speed = [[NSString alloc] initWithUTF8String:(const char*)sqlite3_column_text(statement5, 2)];
                NSLog(@"%@",speed);
                speed_int = [speed integerValue];

                return speed_int;
            }
        }
    }
}
if(speed_int==0){
    return 0;
}
sqlite3_close(db); 
```

我发现问题的根源是数据库路径，该文件存储在 .h 和 .m 文件所在的位置，所以我认为这是我出错的地方，但我必须做些什么才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:17:08.613

Cocoa/Foundation 不知道你的文件在哪里。您需要告诉它它在应用程序包中。

```
NSString *databasePath2 = [[NSBundle mainBundle] pathForResource:@"default-gameData" ofType:@"db"]; 
```

# javascript - 代码适用于 jsfiddle 但不适用于我的网站

> ID：12942633
> 
> 赞同：3
> 
> 时间：2012-10-17T20:15:21.177
> 
> 标签：javascript, jsfiddle

这里是 jsfiddle CSS、Javascript 和 HTML 的三个部分，所以应该有一种方法来创建一个包含三个部分的 HTML 文件，即在此处放置 CSS 代码、在此处放置 HTML 和在此处放置 Javascript。它还没有工作，但目前我有

```
<html>
<head>
<title>Some Title</title>
<style type="text/css" media="screen">

<!-- CSS Section From JSfiddle Goes Here -->

</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js">           </script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

// Javascript Section From JSfiddle Goes Here

});
</script>
</head>
<body>

<!-- HTML Section From JSfiddle Goes Here -->

</body>
</html> 
```

看起来这将是一件容易做的事情，就像它可以自动化一样，或者可以吗？似乎很多人发现 JSfiddle 上的示例没有帮助，因为 JSfiddle 发生了一些他们没有与我们分享的魔法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:19:52.663

你可以很容易地做到这一点。保存您的小提琴，然后单击共享按钮。获取全屏编辑 URL 并将其粘贴到新选项卡中。右键单击示例所在的主要区域并查看源代码。保存它，你就有了一个工作副本。

# javascript - javascript和Dom和对象初始化

> ID：12942635
> 
> 赞同：2
> 
> 时间：2012-10-17T20:15:31.050
> 
> 标签：javascript, dom, getelementbyid

> **可能重复：**
> [IE/Chrome：这里是 DOM 树元素全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)
> [可通过 ID 访问的元素](https://stackoverflow.com/questions/12663981/element-accessible-with-id)

我尝试了这段预计不会工作的代码：

```
<html> 
<head>
<script>
function change() {
    alert("changing !!"+dummy);
    dummy.innerHTML="hello !!";
}
</script>
</head>
<body>
    <div id="dummy" onclick="change();" > nothing good here !! </div>
</body>
</html> 
```

它似乎工作正常（ff16，ie8，chrome），而`dummy`没有像它应该通过a那样初始化这`document.getElementByID('dummy');`是一个html5功能还是只是一个边缘效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:17:45.933

现在所有浏览器都为 dom 中存在的每个 id 创建全局变量。看[我的问题](https://stackoverflow.com/questions/12663981/element-accessible-with-id)

```
dummy == document.getElemetById('dummy') // true 
```

# css - 在一页布局上页面滚动时，Divs 的高度越来越大

> ID：12942643
> 
> 赞同：0
> 
> 时间：2012-10-17T20:16:03.873
> 
> 标签：css, html, height

我目前正在为我的 Web Class 创建一个网站。

这是托管在我的 Dropbox 公共文件夹中的文件的链接：

[https://dl.dropbox.com/u/66340864/hollywoodsite/index.html](https://dl.dropbox.com/u/66340864/hollywoodsite/index.html)

我希望你可以从那里查看我的代码。如果你不能让我知道，我会想办法缩小范围并把它放在这里。

我正在尝试做一个单页布局，我基本上只是将部分堆叠在一起，我想让每个部分填满屏幕的整个空间。

问题出现在“策略”和“联系方式”部分的底部。它们的高度异常长，我无法确定问题所在。有人可以指出我正确的方向。

请原谅代码编写。我知道我有很多事情要清理和工作。

谢谢你所有的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:57:45.570

您将部分设置为 100% 高度，因此如果您的页面将随着内容而增长，那么 100% 将逐渐变大 - 有意义吗？

如果您希望每个部分都是浏览器窗口高度的 100%，那么您需要添加的是：

```
html, body{
    width:100%;
    height:100%;
} 
```

那么 body 中直接子元素的所有百分比高度将指浏览器的高度而不是内容的高度。快乐黑客！

# c# - 如何从 Windows 服务调用 WebAPI

> ID：12942644
> 
> 赞同：11
> 
> 时间：2012-10-17T20:16:06.960
> 
> 标签：c#, .net, asp.net-mvc, windows-services, asp.net-web-api

我有一个用 Windows 服务编写的应用程序，这个应用程序需要调用一个用 Asp.Net MVC 4 WebAPi 编写的 WebAPI。WebAPI 中的此方法返回原始类型的 DTO，例如：

```
class ImportResultDTO {
   public bool Success { get; set; }
   public string[] Messages { get; set; }
} 
```

在我的 webapi 中

```
public ImportResultDTO Get(int clientId) {
   // process.. and create the dto result.
   return dto;
} 
```

我的问题是，如何从 Windows 服务调用 webApi？我有我的 URL 和参数值，但我不知道如何调用以及如何将 xml 结果反序列化到 DTO。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T21:25:15.923

您可以使用[System.Net.Http.HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)。您显然需要在下面的示例中编辑假基地址和请求 URI，但这也显示了检查响应状态的基本方法。

```
// Create an HttpClient instance
HttpClient client = new HttpClient();
client.BaseAddress = new Uri("http://localhost:8888/");

// Usage
HttpResponseMessage response = client.GetAsync("api/importresults/1").Result;
if (response.IsSuccessStatusCode)
{
    var dto = response.Content.ReadAsAsync<ImportResultDTO>().Result;
}
else
{
    Console.WriteLine("{0} ({1})", (int)response.StatusCode, response.ReasonPhrase);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T21:28:33.963

您可以将此 NuGet 包[Microsoft ASP.NET Web API 客户端库](http://nuget.org/packages/Microsoft.AspNet.WebApi.Client/4.0.20710.0)安装到您的 Windows 服务项目。

下面是一个简单的代码片段，演示了如何使用 HttpClient：

```
 var client = new HttpClient();
        var response = client.GetAsync(uriOfYourService).Result;
        var content = response.Content.ReadAsAsync<ImportResultDTO>().Result; 
```

（为了简单起见，我在这里调用 .Result() ......）

有关 HttpClient 的更多示例，请查看： [ASP.NET Web API 和 HttpClient 示例列表。](http://blogs.msdn.com/b/webdev/archive/2012/08/26/asp-net-web-api-and-httpclient-samples.aspx)

# c# - 在 VB.Net 中需要 C# 代码的等价物

> ID：12942649
> 
> 赞同：-5
> 
> 时间：2012-10-17T20:16:18.437
> 
> 标签：c#, vb.net

我正在做 C# 现在我想了解 VB.Net，我想要与此等效的：

```
Hide();
using (login loginForm = new login())
{
    var result = loginForm.ShowDialog();
    if (result == DialogResult.OK)
    {
        Show();
    }
    else
    {
        Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:18:12.577

```
Hide()
Using loginForm As New login()
    Dim result = loginForm.ShowDialog()
    If result = DialogResult.OK Then
        Show()
    Else
        Close()
    End If
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:20:24.070

你自己尝试了什么？只需在 MSDN 上查找每一件事（[Using 语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)，[If 语句](http://msdn.microsoft.com/en-us/library/752y8abs.aspx)，...）并查看 VB 中的代码示例。

无论如何，这是转换后的代码：

```
Hide()

Using loginForm As New login()
    Dim result = loginForm.ShowDialog()
    If result = DialogResult.OK Then
        Show()
    Else
        Close()
    End If
End Using 
```

# ruby-on-rails-3 - rails accept_nested_attributes_for - 错误：Mysql2::Error: Unknown column 'offers.' 在“where子句”中

> ID：12942650
> 
> 赞同：0
> 
> 时间：2012-10-17T20:16:20.893
> 
> 标签：ruby-on-rails-3, forms, nested-attributes

代码是：

```
class Client < ActiveRecord::Base
  ...
  has_one :offer, :dependent => :destroy
  accepts_nested_attributes_for :offer
  ...
end

class Offer < ActiveRecord::Base
  ...
  belongs_to :client
  ...
end

<%= simple_form_for [:admin, @client], :html=>  {:multipart => true } do |f| %>
..some input fields
<%= f.simple_fields_for :offer, @client.new_record? ? Offer.new : ""  do |o| %>
..some input fields 
```

这适用于新条目，但不会更新。

> 错误：Mysql2::Error: Unknown column 'offers.' 在“where 子句”中：DELETE FROM `offers`WHERE `offers`.`` = 718

当我将客户端模型更改为：

```
accepts_nested_attributes_for :offer, :reject_if => lambda {|a| a[:name].blank?} 
```

错误消息消失了，它更新了客户表，但不更新报价表。

这是有效的：

```
 has_one :offer, :dependent => :destroy
  accepts_nested_attributes_for :offer, allow_destroy: true

  belongs_to :client

  <%= f.simple_fields_for :offer, @client.new_record? ? Offer.new : @client.offer  do |o| %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:38:27.750

首先，它不适用于更新似乎是合乎逻辑的，就像你正在做的那样：

```
<%= f.simple_fields_for :offer, @client.new_record? ? Offer.new : ""  do |o| %> 
```

的简单字段将尝试为“”创建字段，而它应该使用 offer 对象。你可以用（可能有更好的方法来解决这个问题，这只是一个解决方案，而不是解决方案）

```
<%= f.simple_fields_for :offer, @client.offer.new_record? ? Offer.new : @client.offer  do |o| %> 
```

编辑：我认为最好只在不存在的情况下构建报价，所以它看起来像这样：

```
<% @client.build_offer if @client.offer.new_record? %>
<%= f.simple_fields_for :offer do |o| %> 
```

# windows-7 - Windows 7 上的 OpenCL、AMD Radeon、Visual Studio 2010 - 如何开始？

> ID：12942666
> 
> 赞同：2
> 
> 时间：2012-10-17T20:16:57.783
> 
> 标签：windows-7, opencl, amd-processor

我是 OpenCL 的新手，我想开始学习如何编写将在我的视频卡 (AMD Radeon 6970) 上运行的程序。我已经安装了 AMD 的 app SDK，这是我需要开始的吗？

我尝试构建他们包含的示例解决方案，但我得到了：

> 错误 C1083：无法打开包含文件：'d3dx10.h'：没有这样的文件或目录 c:\users\...\simpledx10\SimpleDX10.hpp

我认为这是因为我安装了 DX11。我想我会自己做一个简单的程序来开始，但在搜索 Stack Overflow 和谷歌之后，我无法弄清楚我需要什么才能让它工作。

是否有任何有用的指南可供初学者使用 AMD 显卡让 OpenCL 在 Windows 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:40:13.860

一个好的起点是从 OpenCL 书籍样本开始。如果您不介意使用 cmake 生成您的项目构建基础架构，那么[这个](https://code.google.com/p/opencl-book-samples/source/browse/trunk/cmake/FindOpenCL.cmake)CMakeLists 应该就可以了。

如果您想要有关如何构建和运行示例 OpenCL 应用程序的分步教程，那么我将再次向您指出[此处](https://code.google.com/p/opencl-book-samples/wiki/Installation)的辅助 OpenCL 书籍资源之一。

我也在使用 cmake 来构建我的 OpenCL 程序，但是我使用的 CMakeLists.txt 文件很长而且有点扭曲，因为它支持多个编译器/平台，它只会让你感到困惑。

希望这可以帮助您构建您的第一个 OpenCL 应用程序。如果不问更多，我会尽力回答。

# ios - 如何在不编写自己的应用程序的情况下向 iOS 发送推送通知？

> ID：12942668
> 
> 赞同：22
> 
> 时间：2012-10-17T20:17:01.597
> 
> 标签：ios, push-notification, apple-push-notifications

我想向基于 iOS 的设备发送推送通知，但我不想编写自己的应用程序。根据我目前收集到的信息，要使用 Apple 推送通知服务发送推送通知，我需要使用用于签署应用程序的 SSL 证书。

基本上，我正在寻找的是 iOS 的[Notify My Android](https://www.notifymyandroid.com/)等价物，这是一个安装在 Android 设备上的应用程序，它有一个带有用于发送通知的简单[HTTP API的 Web 服务。](https://www.notifymyandroid.com/api.jsp)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T21:16:22.237

你可以试试 ：

*   棚车：http : [//boxcar.io/](http://boxcar.io/)
*   推覆：[https ://pushover.net/](https://pushover.net/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-27T07:45:28.820

使用[https://pushed.co/](https://pushed.co/)

无需开发自己的应用即可发送推送通知 Pushed 允许您向 iO、Android 和桌面（Chrome、Firefox 和 Safari）设备发送实时推送通知。

（刚刚找到它，也找到了你的问题。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T20:21:58.250

这在 iOS 下是不可能的。您只能将推送通知发送到特定（您自己的）应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T20:48:54.897

当您为应用程序设置推送通知时，Apple 对使用非常严格。您只能向该特定应用发送推送通知，并且只能从您的开发者帐户和个人资料发送。

由于这些限制，没有办法为此使用第三方程序，所以不，**这是不可能的**。

有关更多信息，请查看有关推送通知的[Apple 文档。](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-11T01:42:26.920

一个选项可以是让您的用户安装电报应用程序并让他们与您的机器人交谈。该机器人可以向个人用户推送通知，甚至可以监听命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-07T01:31:49.310

你有没有找到任何可以做你之后的应用程序？如果没有，请查看 Mac App Store 或网站[http://www.abdullahselek.com/2013/08/08/easyapn/](http://www.abdullahselek.com/2013/08/08/easyapn/)上的 EasyAPN 。

它是一个应用程序，您可以在其中放入令牌和有效负载并按发送（它会检测存储在您可以选择的钥匙链中的证书）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-01T15:37:27.887

正如@yinkou 和@DGund 所指出的，这些推送通知平台（Pusher、Boxcar.io、pushover.net）都不能绕过 Apple 推送通知规则，即拥有一个注册的应用程序。

所以答案是肯定的。如果没有自己的应用程序，您将无法发送 iOS 推送通知。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-16T16:16:36.133

您也可以使用[PushBullet](https://www.pushbullet.com/)（具有 Web API）或[IFTTT](https://ifttt.com)（似乎没有公共 API，但有许多其他触发器）来执行此操作。

# javascript - 如何允许用户使用 JS SDK 取消对我的画布应用程序的授权？

> ID：12942670
> 
> 赞同：0
> 
> 时间：2012-10-17T20:17:03.060
> 
> 标签：javascript, facebook, facebook-javascript-sdk

> **可能重复：**
> [Facebook API SDK 撤销访问](https://stackoverflow.com/questions/9050190/facebook-api-sdk-revoke-access)

任何人都可以提供代码片段以使用 JS SDK 取消授权（或撤销访问令牌）我的画布应用程序吗？

我按照[这个相关问题](https://stackoverflow.com/questions/9050190/facebook-api-sdk-revoke-access)中的链接尝试了很多事情，但是文档令人困惑，并且我不断收到错误消息。

**我当前的代码：**

```
$('#deAuth_button').click( function(){
    var user_id = ____user_id____,
        ap_id = ____app_id____,
        req_id = ap_id + '_' + user_id;

     FB.api(req_id, 'delete', function(response) {
        console.log(response); 
       // error (#200) The user hasn't authorized the application to perform this action
    });
}); 
```

**相关链接**：

*   [https://developers.facebook.com/docs/requests/#delete_requests](https://developers.facebook.com/docs/requests/#delete_requests)
*   [[SO] Facebook API SDK 撤销访问权限](https://stackoverflow.com/questions/9050190/facebook-api-sdk-revoke-access)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:25:24.277

嗯，我整理好了。我当然变得太复杂了。 [另一个问题](https://stackoverflow.com/questions/9050190/facebook-api-sdk-revoke-access)实际上确实有答案，我一开始只是错误地应用它。我还将我的代码片段添加到该问题中。

**工作代码：**

```
$('#deAuth_button').click( function(){
     FB.api('/me/permissions', 'delete', function(response) {
        console.log(response); // true
    });
}); 
```

# php - 结合PHP和MYSQL使用javascript函数和变量

> ID：12942677
> 
> 赞同：0
> 
> 时间：2012-10-17T20:17:42.417
> 
> 标签：php, javascript, mysql

在我的页面上，我有一个搜索结果，其中包含一个用户列表，每个用户后面都有一个“ **addfriend** ”按钮。每行包含一个**username**和**userID**。同时，请求搜索结果的用户 ID 存储在 Session 变量中。

当点击 addfriend-botton 时，应该会发生以下 2 件事：

1.  存储用户 ID和**$_SESSION['userID']****是**一个描述关系的 MySQL 表。
***   不要**刷新**页面（这是我的问题的核心），但要保持专注并将按钮的状态更改为例如“好友请求发送”。我正在考虑 GetElementByID().style 方法。**

 **我在想这个：

```
<a href="#" onClick="addFriend('<? echo $_SESSION['userID'];?>','<? echo $rij['userID']; ?>')"> 
```

它调用了**javascript函数addfriend**

我希望能像这样抓住这两个 ID：

```
<script>
function addfriend(id1, id2)
{
    //server side php code where I use value of 
    //the client-side javascript variables: +id1+ and +id2+ .
}
</script> 
```

这是可能的还是我想错了？关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:47:22.070

您的方式是正确的，在您的 addFriend() 函数中，您可以调用一个 php 文件（通过 AJAX）并发送 IDS 而无需刷新页面。我认为在这种情况下你最好使用 Jquery，如下所示：

```
<script>
function addfriend(id1, id2)
{
   $.ajax({
        type: 'POST',
        url: 'yourPHPfile.php',
        data: { your_id_1:id1, your_id_2:id2 },
        success: function(data){
                    if(data){
                       alert('Done!');
                    }
        },
        dataType: 'text'
    });
}
</script> 
```

在您的 PHP 文件中，您可以执行以下操作：

```
<?php
    //receive Ids
    $id1 = $_POST['your_id_1'];
    $id2 = $_POST['your_id_2'];

    //do something here

    echo "OK!";
<? 
```

要完成这项工作，您需要下载 jQuery 插件并将其添加到您的页面中，而不是添加到 head 标签中

```
<head>
     <script type="text/javascript" src="jquery.js"></script>          
</head> 
```

干得好，不要放弃！（：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:25:07.007

您可以使用 AJAX（异步 JavaScript 和 XML）来做到这一点，这实际上只是一个花哨的术语，用于“使用 JavaScript 将内容发送到服务器并获得响应，而无需重新加载页面”。AJAX 没有什么特别之处。它只涉及使用普通的旧 JavaScript 发送 HTTP 请求。

查看[jQuery](http://www.jquery.com)，这是一个为您处理大部分技术内容的 JavaScript 库。具体来说，查看它[的 post()](http://api.jquery.com/jQuery.post/)函数，它允许您使用 $_POST 系统变量将数据发送到 PHP 脚本。该页面上有很多清晰的示例。

请注意，您*不需要*jQuery 来使用 AJAX；jQuery 只是一个让事情变得更简单的库。如果您真的想了解 AJAX 的 JavaScript 方面是如何工作的，请尝试遵循众多教程之一，例如[Mozilla 的](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)或[这个](http://www.h3xed.com/programming/beginner-ajax-guide-get-and-post-examples)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T20:20:22.107

[AJAX](http://www.w3schools.com/ajax/default.asp)是您正在寻找的答案。

听起来您已经对此有了基本的了解，但需要澄清的是，Javascript 在客户端执行，而 PHP 在服务器端执行。因此，您必须回调您的服务器才能与 PHP/MySQL 进行交互。

AJAX 的目的是在不需要页面刷新的情况下做到这一点。**

# internet-explorer - 动态更改选项时如何解决 IE 选择问题

> ID：12942681
> 
> 赞同：64
> 
> 时间：2012-10-17T20:18:05.743
> 
> 标签：internet-explorer, angularjs, html-select

我有一组选择，它们都有相同的选项。然后我通过过滤器运行这些选项，以便在不同选择中选择的任何选项都不会显示在选择中。请参阅[此 jsFiddle](http://jsfiddle.net/H48sP/1/)（在非 IE 浏览器中）以了解我的意思。基本上我阻止在选择中多次选择相同的选项

现在，我所做的在 IE 中存在问题。在 IE 中打开那个小提琴（我只在 IE9 中尝试过，但我猜以前的版本也有同样的问题）。将最后一个选择更改为 AAA。请注意其他 3 个选择如何全部更改了它们显示的内容。它们的模型没有改变，而是在选项改变时，即某种方式窒息。

我的问题是首先，我在这个功能上做错了吗？同样的代码在 Chrome 和 FF 中完全符合我的要求，但我是否在做一些我不应该做的事情？其次，我怎样才能在 IE 中解决这个问题？我尝试了一些可以清除并重新设置模型的超时，但明显的事情发生了变化。我想知道是否有一个好的、干净的、低影响的解决方法。

任何帮助将非常感激。谢谢。

**- 更新 -**

这已在 Angular 本身中使用[AS Ranjan 的解决方案在](https://stackoverflow.com/a/25310374/1014979)[1.3.3 版中](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#133-undersea-arithmetic-2014-11-17)[修复](https://github.com/angular/angular.js/commit/6604c2361427fba8c43a39dc2e92197390dfbdbe)。请参阅 1.3.3 的新小提琴：http: [//jsfiddle.net/m2ytyapv/](http://jsfiddle.net/m2ytyapv/)

```
//dummy code so I can post the edit 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-14T12:41:22.673

前几天晚上我遇到了同样的问题，在抛出了我能想到的一切之后，我得出的结论是，IE 只是不想在使用选择时处理更新过滤器。

我的解决方案是将您的选择更改为如下所示：

```
 <select class="selectList" ng-repeat="currId in selectedIds" ng-model="selectedIds[$index]"  ng-options="currOption.id as currOption.value for currOption in myObj | myfilter:selectedIds:$index" data-ng-change="fixIE()"></select> 
```

他们现在有一个班级和一个 ng-change 。然后在您的控制器中执行以下有趣的代码：

```
$scope.fixIE = function(){
    //code to check if IE so the other browsers don't get this ugly hack.
    var selectLists = document.querySelectorAll(".selectList");
    for(var x = 0;x  < selectLists.length; x++){
        selectLists[x].parentNode.insertBefore(selectLists[x], selectLists[x]);
    }       
}; 
```

它所做的是将元素从 DOM 中分离出来并将它们替换到相同的位置。这是一个工作小提琴**[jsFiddle](http://jsfiddle.net/H48sP/32/)**

我尝试过的其他一些不涉及 javascript 的解决方案是切换选择的显示/可见性之类的。移动他们的 zIndex。唯一确定修复它的是这段代码。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-30T01:59:22.053

我有解决办法。

我们必须添加和删除选项列表才能触发 IE8 中的渲染。

[http://kkurni.blogspot.com.au/2013/10/angularjs-ng-option-with-ie8.html](http://kkurni.blogspot.com.au/2013/10/angularjs-ng-option-with-ie8.html)

* * *

```
/**
 * Fix for IE select menus getting stuck when their underlying list changes.
 * Original code: http://kkurni.blogspot.com.au/2013/10/angularjs-ng-option-with-ie8.html
 * 
 * Set the `ie-select-fix` attribute to the model expression that should trigger the list to re-render.
 * 
 * @example <select ng-model="modelValue" ie-select-fix="itemList" ng-options="item.label for item in itemList">
 */
app.directive('ieSelectFix', ['$document',
        function($document) {

            return {
                restrict: 'A',
                require: 'ngModel',
                link: function(scope, element, attributes, ngModelCtrl) {
                    var isIE = $document[0] && $document[0].attachEvent;
                    if (!isIE) return;

                    var control = element[0];
                    //to fix IE8 issue with parent and detail controller, we need to depend on the parent controller
                    scope.$watch(attributes.ieSelectFix, function() {
                        // setTimeout is needed starting from angular 1.3+
                        setTimeout(function() {
                            //this will add and remove the options to trigger the rendering in IE8
                            var option = document.createElement("option");
                            control.add(option,null);
                            control.remove(control.options.length-1);
                        }, 0);
                    });
                }
            }
        }
    ]); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-14T18:25:35.117

我终于想出了一个适合我需要的解决方案。基本上似乎正在发生的事情是所选索引处的选项文本指向曾经位于该位置的旧字符串。我相信更改此文本会更新字符串和/或引用。我做了这样的事情：

```
angular.forEach($("select"), function (currSelect) {
     currSelect.options[currSelect.selectedIndex].text += " ";
}); 
```

这是更新的小提琴：http: [//jsfiddle.net/H48sP/35/](http://jsfiddle.net/H48sP/35/)

在我的应用程序中，我有一个指令，这些选择在哪里，所以我这样做`element.find("select")`而不是`$("select")`限制元素选择的范围。文本被强制刷新，因此在所有摘要循环运行后正确显示。

如果您遇到同样的问题，您可能需要`$timeout`在小提琴中添加一个like，和/或如果这成为问题，您可能需要稍后删除添加到选项文本的额外空间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-14T14:16:56.420

在 angular.js 中 selectDirective 的渲染函数中添加几行以下位置（以粗体标记为 **）对我来说效果很好。我正在寻找除了修补 angularJS 或下面给出的 forEach 之外是否还有其他可能的解决方案？

```
 if (existingOption.label !== option.label) {
              lastElement.text(existingOption.label = option.label);
              **lastElement.attr('label', existingOption.label);**
            } 
```

和

```
 (element = optionTemplate.clone())
                  .val(option.id)
                  .attr('selected', option.selected)
                  .text(option.label);
              **element.attr('label', option.label);** 
```

问题是如果标签在 IE 中为空，则 HTMLOptionElement 的标签属性与文本属性不同。

这可以通过在屏幕加载后添加以下代码并查看 FF 和 IE 的 Web 控制台来查看差异来验证。如果您取消注释标签设置为文本的最后一行，它可以正常工作。或者如上所述修补 angular.js。

```
// This is an IE fix for not updating the section of dropdowns which has ng-options with filters
angular.forEach($("select"), function (currSelect) {
    console.log("1.text ", currSelect.options[currSelect.selectedIndex].text);
    console.log("1.label ", currSelect.options[currSelect.selectedIndex].label);
    //console.log("1.innerHTML ", currSelect.options[currSelect.selectedIndex].innerHTML);
    //console.log("1.textContent ", currSelect.options[currSelect.selectedIndex].textContent);
    //console.log("1.cN.data ", currSelect.options[currSelect.selectedIndex].childNodes[0].data);
    //console.log("1.cN.nodeValue ", currSelect.options[currSelect.selectedIndex].childNodes[0].nodeValue);
    //console.log("1.cN.textContent ", currSelect.options[currSelect.selectedIndex].childNodes[0].textContent);
    //console.log("1.cN.wholeText ", currSelect.options[currSelect.selectedIndex].childNodes[0].wholeText);
    //console.log("1\. ", currSelect.options[currSelect.selectedIndex], "\n");

    //currSelect.options[currSelect.selectedIndex].label = "xyz";
    //currSelect.options[currSelect.selectedIndex].label = currSelect.options[currSelect.selectedIndex].text;
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-09T20:26:30.203

问题似乎与过滤器返回的选项的顺序有关。当您将最后一个选项更改为 时`A`，其他选择选项会更改。似乎对 IE 造成问题的是所选选项更改了位置。在第一个选择框中`C`按以下顺序从选项中选择：`A, B, C, D`。选中的选项是**第三个选项**。当您将第四个选择框从更改`G`为 时`A`，过滤器会将第一个框中的选项更改为`B, C, D, G`。所选选项现在是**第二个选项**，这会导致 IE 出现问题。这可能是 Angular 中的错误，也可能是 IE 中的一些奇怪行为。通过确保所选元素始终是过滤选项中的第一个选项，我创建了一个解决此问题的分支：

```
 var newOptions = [],selected;
    angular.forEach(allOptions, function (currentOption) {
        if (!isIdInUse(selectedIds, currentOption.id)){
            newOptions.push(currentOption);
        }else if(currentOption.id == selectedIds[parseInt(index)]){
            selected = currentOption;
        }
    });
    if(selected){newOptions.unshift(selected);} 
```

[http://jsfiddle.net/XhxSD/](http://jsfiddle.net/XhxSD/)（旧）

更新：

我做了一些调试，发现在 IE 中导致问题的行，但我不明白为什么。它看起来确实像一个渲染错误或其他东西。我创建了另一个不需要重新排列选项的解决方法——它是一个监视选择元素变化的指令。如果检测到更改，它会附加一个选项并立即将其删除：

```
.directive('ieSelectFix',function($timeout){
  return {
    require:'select',
    link: function (scope, element) {
      var isIE = document.attachEvent;

      if(isIE){
        $timeout(function(){
          var index = element.prop('selectedIndex'), children = element.children().length;
          scope.$watch(function(){
            if(index !== element.prop('selectedIndex') || children !== element.children().length){
              index = element.prop('selectedIndex');
              children = element.children().length;
              var tmp =angular.element('<option></option>');
              element.append(tmp);
              tmp.remove();
            }
          })

        });
      }
    }
  }
}); 
```

只需添加 ie-select-fix 来选择 ng-repeats 中的元素：

```
<div ng-app="myApp" ng-controller="MyCtrl">
  <select ie-select-fix ng-repeat="currId in selectedIds" ng-model="selectedIds[$index]"  ng-options="currOption.id as currOption.value for currOption in myObj | myfilter:selectedIds:$index"></select><br>
  {{selectedIds}}
</div> 
```

[http://jsfiddle.net/VgpyZ/](http://jsfiddle.net/VgpyZ/)（新）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-16T13:26:24.337

我在 IE 中发现了与 select 相同的错误。这个错误是克隆 DOM 节点的结果。

如果你实例化一个 SELECT 像（jQuery 风格）：

```
$select = $template.clone(); 
```

然后做：

```
$select.html('<option>111</option>'); 
```

你会得到上面描述的错误..

但是，如果你实例化

```
$select = $('< div />').html( $template ).html(); 
```

没有发生错误:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-30T14:09:00.873

哦，我要去地狱寻求以下建议......！

我尝试了这些建议，但没有一个对我有用。

我实际上是在使用 Angular 来填充选择控件，每个控件都有多个选项。

```
<select class="cssMultipleSelect" multiple="multiple" ...> 
```

有时，Angular 会填充这些控件，新数据会出现，但在 IE 中，您无法上下滚动来查看所有选项。

但是，如果你按 F12，修改宽度，然后将其恢复到原来的宽度，那么 IE 会重新焕发活力，你可以在值列表中上下滚动。

所以，我的解决方案是在 Angular 完成填充控件后一秒钟左右调用它：

```
function RefreshMultipleSelectControls()
{
    //  A dodgy fix to an IE11 issue.
    setTimeout(function () {
        $(".cssMultipleSelect").width("");
    }, 1500);
    setTimeout(function () {
        $(".cssMultipleSelect").width(298);
    }, 1600);
} 
```

（我告诉过你这是一个狡猾的修复..）

另一件事：请记住，在 IE11 中，`navigator.appName`现在将返回`NETSCAPE`（而不是`MSIE`or `Microsoft Internet Explorer`）......所以当您测试您的代码是在 IE 上还是在体面的浏览器上运行时要小心。

你被警告了..!!

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T17:20:57.780

似乎ie9的索引有问题。以第二个示例并将其更改为以下代码即可：

```
 var hwcalcModule = angular.module('ie9select', []);

  function AnimalCtrl($scope) {
    $scope.categories = [{
        name: "Cats",
        kinds: ["Lion", "Leopard", "Puma"]
    }, {
        name: "Dogs",
        kinds: ["Chihua-Hua", " Yorkshire Terrier", "Pitbull"]
    }];

  $scope.animals = [{
      category: $scope.categories[1],
      kind: $scope.categories[1].kinds[1]
  }];

  $scope.changeCategory = function (animal) {
      console.log(animal.category.name);
      var name = animal.category.name;
      var index = 0;
       angular.forEach($scope.categories, function (currentOption) {
           console.log(currentOption.name);
          if (name == currentOption.name)
          {
              console.log(index);
              $scope.animals = [{
                  category: $scope.categories[index],
                  kind: $scope.categories[index].kinds[0]
              }];
           }
           index++;
       });
  }
} 
```

[http://jsfiddle.net/seoservice/nFp62/10/](http://jsfiddle.net/seoservice/nFp62/10/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-05T11:44:37.213

根据 [Mathew Berg](https://stackoverflow.com/a/16543440/922929)的回答，我将其修改为使用 AngularJS 指令：

```
angular.module('select',[]).directive("select", function() {
    return {
      restrict: "E",
      require: "?ngModel",
      scope: false,
      link: function (scope, element, attrs, ngModel) {

        if (!ngModel) {
          return;
        }

        element.bind("change", function() {
            //Fix for IE9 where it is not able to properly handle dropdown value change
            //The fix is to rip out the dropdown from DOM and add it back at the same location
            if (isIE9){
                this.parentNode.insertBefore(this, this);   //this rips the elements out of the DOM and replace it into the same location.
            }
        })
      }
   }
}); 
```

这样，修复适用于`select`项目中的所有元素，您不必更改任何现有的 HTML 标记。我还使用以下方法来检测 IE 版本以将`isIE9`变量设置为`true`：

```
var Browser = {
    IsIE: function () {
        return navigator.appVersion.indexOf("MSIE") != -1;
    },
    Navigator: navigator.appVersion,
    Version: function() {
        var version = 999; // we assume a sane browser
        if (navigator.appVersion.indexOf("MSIE") != -1)
            // bah, IE again, lets downgrade version number
            version = parseFloat(navigator.appVersion.split("MSIE")[1]);
        return version;
    }
};

var oldIE = false;      //Global Variable
var isIE9 = false;      //Global Variable
if (Browser.IsIE && Browser.Version() <= 8) {
    oldIE = true;
}

if (Browser.IsIE && Browser.Version() == 9) {
    isIE9 = true;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-18T23:37:39.907

我不得不将 scope.$watch 更改为 scope.$watchCollection 以使上述@kkurni 解决方案适用于 IE9。只是想帮助其他在 IE9 中仍然存在问题的人，以便在更改时呈现选择选项。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-13T20:02:59.443

如果您更改某些属性，渲染会更新和同步。一个无害的变化可能是将`selectedIndex`属性设置为它自己的值：

```
function fixIEselect() {
    for (var nForm = 0; nForm < document.forms.length; ++nForm) {
        var form = document.forms[nForm];
        var children = form.children;
        for (var nChild = 0; nChild < children.length; ++nChild) {
            var child = children.item(nChild);
            if (child.tagName == "SELECT") {
                alert("Fixed: " + child.name);
                child.selectedIndex = child.selectedIndex; // dummy nop but not
            }
        }
    }
}

fixIEselect(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-15T22:19:31.990

添加动态选项后，执行控制重新渲染的成本较低。因此，您可以重置导致控件呈现的 CSS 样式，而不是在下拉列表中插入/删除虚拟元素，例如

```
selElement.style.zoom = selElement.style.zoom ? "" : 1; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-25T13:20:57.360

我有一个解决 IE 选项列表问题的方法

修复前：[http ://plnkr.co/edit/NGwG1LUVk3ctGOsX15KI?p=preview](http://plnkr.co/edit/NGwG1LUVk3ctGOsX15KI?p=preview)

修复后：[http ://plnkr.co/edit/a7CGJavo2m2Tc73VR28i?p=preview](http://plnkr.co/edit/a7CGJavo2m2Tc73VR28i?p=preview)

```
$("select").click(function(){
  $(this).append('<option></option>');
   $(this).find('option:last').remove();

}); 
```

我刚刚为 dom 添加了虚拟选项以重新呈现选择并将其删除。让我知道它对你有用

# dotnetnuke - DNN 模块在视图模式下不包含 css/js

> ID：12942682
> 
> 赞同：2
> 
> 时间：2012-10-17T20:18:07.017
> 
> 标签：dotnetnuke, dotnetnuke-6

我有一个我编写的 DNN 模块，其中包括 jquery fancybox 插件的 css/js，如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="View.ascx.cs" Inherits="DotNetNuke.Modules.WebPortfolio.View" %>
<%@ Register TagPrefix="dnn" Namespace="DotNetNuke.Web.Client.ClientResourceManagement" Assembly="DotNetNuke.Web.Client" %>

<dnn:DnnCssInclude runat="server" priority="10" FilePath="DesktopModules/WebPortfolio/Scripts/Fancybox/jquery.fancybox.css" />
<dnn:DnnJsInclude runat="server" priority="10" FilePath="DesktopModules/WebPortfolio/Scripts/Fancybox/jquery.fancybox.pack.js" /> 
```

当我处于编辑模式时，一切都很好，花花公子，但是当我切换到查看模式时，css 和 js 不包括在内。这看起来相当简单，所以我想我错过了一些东西，但是什么？为什么脚本没有在查看模式下加载？

DNN 版本为 6.2.4

编辑：我昨晚和今天早上一直在与这个作斗争。该脚本每次在编辑模式下加载，但在查看模式或注销时，它可能加载一次或两次，然后加载失败。有趣的是，我在模块的视图控件中添加了服务器端时间戳，并禁用了所有缓存（浏览器、DNN 主机设置），并且文件仍在缓存中。这发生在我的本地机器（IIS Express）和我们的登台服务器（IIS 7.5）上。

如果我反弹 Web 服务器并清除 Portals/0/Cache 目录，脚本偶尔会在第一次加载，但之后会失败。我终于求助于客户端检查，它在必要时动态加载脚本，但这绕过了客户端资源管理 API 的优点，所以我真的很想找出一个合适的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:53:50.673

这听起来像是我刚刚记录的一个问题 ( [DNN-20363](http://support.dotnetnuke.com/Default.aspx?p=2&i=23063) )，其中在缓存模块时不包括使用客户端资源管理框架注册的资源。当模块启用模块缓存时，我遇到了这个问题。您的模块是否在其模块定义中设置了默认缓存时间？您可以尝试将其关闭，然后添加一个新实例（以确保缓存设置本身不会被缓存）。

# sql-server - 水平数据转换成垂直

> ID：12942687
> 
> 赞同：2
> 
> 时间：2012-10-17T20:18:29.970
> 
> 标签：sql-server, sql-server-2008, import-from-excel

我有水平表（Table1），我需要将其转换为（Table2）

**表格1：**

```
CEO     SALESMAN    PRODUCT(1)  PRODUCT(2)  PRODUCT(3)  PRODUCT(4)  PRODUCT(5)  ... PRODUCT(N)
------  ----------  ----------  ----------  ----------  ----------  ----------      ----------
MIKE    ANDERSON    76787,00    19388,00    0,00        2723,00     217,00          6581,00
JOHN    ANGELA      0,00        0,00        73088,00    0,00        0,00            0,00
JACK    JEFF        24716,00    0,00        2995,00     0,00        0,00            0,00
STUART  MICHAEL     0,00        23338,00    42656,00    0,00        0,00            0,00 
```

**表2：**

```
CEO     SALESMAN    PRODUCTS    VALUE
------- ----------- ----------  --------
MIKE    ANDERSON    PRODUCT(1)  76787,00
JOHN    ANGELA      PRODUCT(1)  0,00
JACK    JEFF        PRODUCT(1)  24716,00
STUART  MICHAEL     PRODUCT(1)  0,00
MIKE    ANDERSON    PRODUCT(2)  19388,00
JOHN    ANGELA      PRODUCT(2)  0,00
JACK    JEFF        PRODUCT(2)  0,00
STUART  MICHAEL     PRODUCT(2)  23338,00
MIKE    ANDERSON    PRODUCT(3)  0,00
JOHN    ANGELA      PRODUCT(3)  73088,00
JACK    JEFF        PRODUCT(3)  2995,00
STUART  MICHAEL     PRODUCT(3)  42656,00
MIKE    ANDERSON    PRODUCT(4)  2723,00
JOHN    ANGELA      PRODUCT(4)  0,00
JACK    JEFF        PRODUCT(4)  0,00
STUART  MICHAEL     PRODUCT(4)  0,00
MIKE    ANDERSON    PRODUCT(5)  217,00
JOHN    ANGELA      PRODUCT(5)  0,00
JACK    JEFF        PRODUCT(5)  0,00
STUART  MICHAEL     PRODUCT(5)  0,00
MIKE    ANDERSON    ...     ...
JOHN    ANGELA      ...     ...
JACK    JEFF        ...     ...
STUART  MICHAEL     ...     ...
MIKE    ANDERSON    PRODUCT(N)  6581,00
JOHN    ANGELA      PRODUCT(N)  0,00
JACK    JEFF        PRODUCT(N)  0,00
STUART  MICHAEL     PRODUCT(N)  0,00 
```

到目前为止，我尝试将 BULK INSERT Table1 插入临时表，然后使用这些数据，直到我得到我想要的。问题是 PRODUCT() 列中的 N 是可变的，因此我无法创建具有固定列的临时表，并且我需要一个动态查询，以某种方式可以读取产品列的数量并使用它。

**批量插入**

```
BULK INSERT #temp
FROM '\\path\file.csv'
WITH
(
FIRSTROW = 1,
FIELDTERMINATOR= ';',
ROWTERMINATOR = '\n',
CODEPAGE='RAW'
); 
```

**临时表：**

```
CREATE TABLE    #temp(
col1    varchar(100)    null,
col2    varchar(100)    null,
col3    varchar(100)    null,
col4    varchar(100)    null,
col5    varchar(100)    null,
...
col397  varchar(100)    null,
col398  varchar(100)    null,
col399  varchar(100)    null,
col400  varchar(100)    null
) 
```

当我运行 BULK INSERT 时，我收到此错误：

```
Msg 4832, Level 16, State 1, Line 1
Bulk load: An unexpected end of file was encountered in the data file.
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "BULK" for linked server "(null)" reported an error. The provider did not give any information about the error.
Msg 7330, Level 16, State 2, Line 1
Cannot fetch a row from OLE DB provider "BULK" for linked server "(null)". 
```

发生这种情况是因为我创建了一个具有固定 400 列的临时表，并且有 127 个产品列。

我试图避免这样的事情：

```
DECLARE @NUM_ROWS INT

SET     @NUM_ROWS = 123

IF @NUM_ROWS = 1
BEGIN
CREATE TABLE    #temp(
col1    varchar(100)    null
)
END

IF @NUM_ROWS = 2
BEGIN
CREATE TABLE    #temp(
col1    varchar(100)    null,
col2    varchar(100)    null,
)
END

...

IF @NUM_ROWS = 400
BEGIN
CREATE TABLE    #temp(
col1    varchar(100)    null,
col2    varchar(100)    null,
...
col4    varchar(100)    null,
)
END

BULK INSERT #temp
FROM '\\path\file.csv'
WITH
(
FIRSTROW = 1,
FIELDTERMINATOR= ';',
ROWTERMINATOR = '\n',
CODEPAGE='RAW'
); 
```

**@NUM_ROWS**将是我将创建临时表的列数。

有谁知道我可以将此 .csv 文件动态导入 SQL Server 的方法吗？动态我的意思是创建一个临时表，其中包含我批量插入的 PRODUCTS 列数。或者一种解决方法来避免我在上面发布的那个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:45:53.877

如果您将 CSV 打开到 Excel 中，然后再次将其另存为 CSV，那么它将格式化为具有固定数量的列。

您可以使用循环和动态 SQL 创建临时表

```
declare @sql nvarchar(max), @numcols int = 8

select @sql = ''
declare @i int = 1

select @sql = @sql + ', c' + convert(varchar(5), number) + ' varchar(10) ' 
from master..spt_values 
where type='p' and number between 1 and @numcols

select @sql = 'create table ##temp (' + substring(@sql, 3, len(@sql)) + ')'
select @sql

exec sp_executeSQl @sql

BULK INSERT ##temp  
FROM '\\path\file.csv'  
WITH  
(  
FIRSTROW = 1,  
FIELDTERMINATOR= ';',  
ROWTERMINATOR = '\n',  
CODEPAGE='RAW'  
); 
```

从那里您只需应用[Unpivot](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)将表格从列转换为行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:16:16.197

这是一种有点手动的方法：

1.  使用 Excel 打开 .csv 文件
2.  将 400 个列名添加到第一行。当然，它们不必是字段的*实际*名称。只是占位符。这样，当您重新保存文件时，该文件将有 400 列。（我称之为手动方法，但您可以使用 VBA 脚本自动执行此操作）

从这里开始，一切都是 SQL：

1.  使用标准的批量插入，将其导入到具有 400 列的临时表中。
2.  使用以下方法将数据插入 table2：

> ```
> Insert into Table2
> Select CEO, Salesmen, 1 as ProductNum, [Product(1)] from Table1 where [Product(1)] is not null
> union
> Select CEO, Salesmen, 2 as ProductNum, [Product(2)] from Table1 where [Product(2)] is not null
> ...
> union
> Select CEO, Salesmen, 400 as ProductNum, [Product(400)] from Table1 where [Product(400)] is not null 
> ```

当然，这 400 行会很丑，但你可以很容易地阅读它并从 1 数到 400。

# string - 理解 Matlab 中字符串表示的数据类型

> ID：12942688
> 
> 赞同：0
> 
> 时间：2012-10-17T20:18:30.050
> 
> 标签：string, matlab

我有一个类似的字符串**`'12,23,43,erogol,bla,3.4'`**，我想解析它并查看该字符串中的值类型。例如，如果我将该字符串提供给函数，我希望有一个类似于`output=["integer,integer,integer,string,string,double"]`函数返回的向量。

我怎么能在matlab中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:31:53.910

使用正则表达式可以很容易地做到这一点。

```
input = '-12,12,0,erogol,bla,3.4,-3.4'; 
```

*   首先将字符串替换为“字符串”。
*   接下来抓双打
*   最后捕捉整数：

例子：

```
 output = regexprep(input, '[a-zA-Z]*', 'string');
  output = regexprep(output, '[-]*[0-9]*[.][0-9]*', 'double');
  output = regexprep(output, '[-]*[0-9]*', 'integer'); 
```

输出现在包含``integer,integer,integer,string,string,double,double'`

您可以使用以下方法将其拆分为单元数组：

```
varTypes = regexp(output, ',', 'split'); 
```

# python - Python字符串与不同大小写和浮点数的比较

> ID：12942690
> 
> 赞同：4
> 
> 时间：2012-10-17T20:18:38.863
> 
> 标签：python

为什么python给出这样的输出：

```
>>> 'apple' > 'T'
True
>>> 'apple' > 't'
False 
```

这两种情况都应该是真的。对吧？

编辑：

我得到了 ASCII 表的想法。谢谢！

现在怎么样。11.1 是否被视为“11.1”？

```
>>> 'apple' > 11.1
True 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:19:39.347

因为`a`在`T`ASCII 字符集中之后，但在`t`.

这些字母的十进制 ASCII 编码：

*   `T`是84。
*   `a`是 97。
*   `t`是 116。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T20:26:15.000

这里的关键见解是字符串比较不基于字母顺序或任何自然顺序进行比较，而是根据 ASCII 中字符的顺序进行比较。[您可以在ASCII 表](http://www.asciitable.com/)中看到此顺序。

Python 将比较每个字符串中的第一个字符，如果相同则继续下一个。它将这样做直到字符不同，或者一个字符串用完（在这种情况下，较长的字符串将被认为更大）。

正如 cdhowie 所指出的，十进制 ASCII 编码`T`是84、97`a`和`t`116。因此：

```
>>> 'T' < 'a' < 't'
True 
```

展示我们的第二点：

```
>>> "apple" > "a"
True 
```

要获得更自然的比较，请参阅：[Python 是否具有用于字符串自然排序的内置函数？](https://stackoverflow.com/questions/4836710/does-python-have-a-built-in-function-for-string-natural-sort)

要回答您在编辑中添加的问题：

~~简单的答案是“是”。正在执行`11.1`to的转换。`'11.1'`~~

~~更复杂的答案涉及如何在 python 中实现精确比较。[如果 Python 对象实现了比较魔术方法](http://www.rafekettler.com/magicmethods.html#comparisons)，则可以比较它们。在该链接中，您可以阅读大量关于 python 内部的内容。~~

正如@glibdup 指出的那样，上述内容不正确。在 python 中，不同的类型是[根据它们的类型名称进行比较的](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)。所以，因为`'str' > 'float'`任何字符串都将大于任何浮点数。或者，任何元组都将大于任何字符串。

# android - 带有 cookie 的 Android WebView HTML

> ID：12942692
> 
> 赞同：0
> 
> 时间：2012-10-17T20:18:49.143
> 
> 标签：android, html, cookies, webview

我正在尝试将 HTML 数据从`WebView`. 我已经看到这样做了一千次，我什至自己也得到了它。但是，我的新项目导致了一个有趣的情况：我需要通过 a 登录到一个站点`WebView`，*然后*拉取 HTML。显然，该`Socket`方法不起作用，因为要返回网页，您需要 cookie 进行身份验证。我也尝试过这个`JavascriptInterface`技巧，但这也没有用。我在想实现这一目标的最佳方法是使用`HttpGet`with `CookieManager`? 有谁知道我如何`WebView`使用 auth cookie 获取原始 HTML 代码？谢谢！

编辑：我做了一些 JS 注入，但没有看到任何 cookie……所以这可能不是 cookie 问题？但是您被重定向到的链接是通用的，例如`mainPage?a=1`和`infoPage`. 您不能简单地将链接复制/粘贴到另一个浏览器中，您*必须*登录才能查看这些链接。对于那些是网络专家的人来说，您可能知道一个简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:32:24.703

`WebView`并不是真正用于获取 HTML 以供编程使用，其想法是它只是指向 URL 的直接窗口以供用户交互。

为了得到你想要的，你可以使用 a`java.net.HttpURLConnection`和 a `CookieManager`，它在 Android 上对我来说效果很好，并且在 Android SDK 文档中建议：

```
// in an activity's onCreate:
cookieManager = new CookieManager();
CookieHandler.setDefault(cookieManager);

// later on
void getAPage(URL url) {
   HttpURLConnection huc = (HttpURLConnection) url.openConnection();

   System.out.println("hello from huc, response code is: " + huc.getResponseCode());

   // huc.getInputStream() gives you the content.
} 
```

这`CookieManager`将在应用程序的整个生命周期中保留所有 cookie，而无需您做任何额外的事情。你也可以发帖`HttpURLConnection`。

# android - DatePicker 在选择日期后更改视图

> ID：12942696
> 
> 赞同：2
> 
> 时间：2012-10-17T20:18:59.450
> 
> 标签：android, android-datepicker

我有一个按钮可以拉出 DatePicker 片段，但我不知道如何根据选择的日期更改视图。我将 onDateSet 方法放在我的 main.java 中，这是调用片段的活动，目的是更改此方法中的视图，但是当日期更改时它什么也不做，我不确定我做错了什么。

```
public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub
    } 
```

我的 MainScreen.java 是

```
public class MainScreen extends FragmentActivity implements DatePickerDialog.OnDateSetListener {

    static final int DATE_DIALOG_ID = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_screen);
    }

    public void showDatePickerDialog(View v) {
        DatePickerFragment newFragment = new DatePickerFragment();
        newFragment.show(getFragmentManager(), "datePicker");
    }

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {

        Intent intent = new Intent(this, January_1.class);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:34:25.193

您应该`onDateSet()`在 DatePickerFragement 中使用监听器：

```
public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        Activity activity = getActivity();
        Intent intent = new Intent(activity, January_1.class);
        activity.startActivity(intent);
    }
} 
```

* * *

**从评论中添加**

`monthOfYear`从[文档](http://developer.android.com/reference/android/app/DatePickerDialog.OnDateSetListener.html)中，您使用了错误的索引：

> *monthOfYear为与*[Calendar](http://developer.android.com/reference/java/util/Calendar.html) 兼容而设置的月份 (0-11) 。

所以一月是`0`，二月是`1`，等等......
为了避免混淆，我建议使用 Calendar 类中的月份名称和 switch 语句：

```
Intent intent;
switch(monthOfYear) {
case Calendar.JANUARY:
    intent = new Intent(activity, January_1.class);
    break;
case Calendar.FEBRUARY:
    // etc...
}
activity.startActivity(intent); 
```

# c# - 以 json 形式返回对象

> ID：12942699
> 
> 赞同：0
> 
> 时间：2012-10-17T20:19:15.277
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有这堂课。

```
public class SDS
{
    public Guid A { get; set; }

    public Guid B { get; set; }

    public String C { get; set; }
} 
```

我像这样返回json

```
public HttpResponseMessage Val()
        {

                SDS svr = new SDS();
                svr.A = ...
                svr.B = ...
                svr.C = ...

    return Request.CreateResponse(HttpStatusCode.OK, json_serializer.Serialize(svr), "application/json");
} 
```

在客户端我像这样使用jquery

```
var obj = jQuery.parseJSON(jqXHR.responseText); 
```

问题是返回的 json 是这样的，我无法迭代这些值或通过索引访问元素：

```
{"A":"3a9779fe-9c92-4208-b34d-5113e0548d50","B":"206575a5-8a90-4a13-89ec-910e5a9a35a1","C":"Meta"} 
```

为了解决这个问题，我必须这样做，这很有效：

```
obj = jQuery.parseJSON('{"List":[' + obj + ']}'); 
```

**我的问题是有没有办法在类上使用一个属性，以便它返回一个我可以使用的 json？**

```
[SomeAttribute name="List"]
public class SDS
{
    public Guid A { get; set; }

    public Guid B { get; set; }

    public String C { get; set; }
} 
```

…………

**更新2：**

**这个问题仍然悬而未决，因为所提供的答案都无法产生修复。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:22:09.173

您可以[`JsonResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult%28v=vs.108%29.aspx)通过调用[`Json()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.json%28v=vs.108%29.aspx)您的操作方法返回 a 。

```
public ActionResult Get(int id)
{
    var item = ...
    return Json(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:38:25.873

返回的 JSON 是正确的，不要更改控制器中的任何内容

..但是在你的 JS 循环中使用 for in 循环的对象

```
for(var propertyName in obj){
     ...
} 
```

propertyName 为您提供 A、B 和 C 以及...

```
var value = obj[propertyName] 
```

给你价值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:23:06.440

您是否尝试使用[System.Web.Mvc.JsonResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult%28v=vs.108%29.aspx)的 JsonResult ？

```
public JsonResult Val()  {} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:23:20.310

好吧，您返回的是单个对象，而不是列表，但您可以这样做：

```
public HttpResponseMessage Val()
{

    SDS svr = new SDS();
    svr.A = ...
    svr.B = ...
    svr.C = ...

    var list = new {List = new [] {svr}};

    return Request.CreateResponse(HttpStatusCode.OK, json_serializer.Serialize(svr), "application/json");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-27T17:13:48.540

添加 ApiController 并使用 System.Web.Http；

# objective-c - 如何转换 CoreData 的对象？

> ID：12942701
> 
> 赞同：2
> 
> 时间：2012-10-17T20:19:20.047
> 
> 标签：objective-c, core-data-migration, nscoding

我有一个自定义类，比如 Person 类，它实现了 NSCoding 协议。我曾经使用以下方法保存应用程序的数据：

```
[NSKeyedArchiver archiveRootObject:{an array containing my Person objects} toFile:pathToSave]; 
```

现在我想切换到 CoreData 和 Cocoa 绑定。我想我知道 CoreData 的基础知识，但我不知道如何将旧的未归档数组导入 CoreData....

有人可以帮我解决这个问题或给我发一个教程链接吗？

非常感谢！缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:25:59.160

AFAIK 无法自动将归档对象转换为 Core Data。

这篇文章是你应该做的一个好的开始：

[http://www.mentalfaculty.com/mentalfaculty/Blog/Entries/2010/4/17_Keyed-Archiving_to_Core_Data_Migration.html](http://www.mentalfaculty.com/mentalfaculty/Blog/Entries/2010/4/17_Keyed-Archiving_to_Core_Data_Migration.html)

简而言之，您将用子类替换`<NSCoding>`兼容的子`NSManagedObject`类并手动进行迁移。

# jquery - 根据 URL 追加到无序列表

> ID：12942708
> 
> 赞同：0
> 
> 时间：2012-10-17T20:19:57.237
> 
> 标签：jquery, url, append

我想根据 URL 附加到一个无序列表。因此，如果我在 mysite.com/es/instructions 上，它会将“seleccionar”附加到无序列表的顶部，如果我在 mysite.com/instructions，它会将“Select”附加到无序列表的顶部。

这是我开始的并且工作正常：

```
$("ul.gallery").prepend('<li class="gallery-item"><a href="#">Select</a></li>'); 
```

这是我尝试根据 url 追加的地方：

```
$(function(){
var url = location.pathname;
if(url.indexOf('es') > -1){
    $("ul.gallery").prepend('<li class="gallery-item"><a href="#">Selecctioner</a></li>');
 } 
 else if (url.indexOf('') > -1) { 
   $("ul.gallery").prepend('<li class="gallery-item"><a href="#">Select</a></li>'); 
 }  
}); 
```

关于为什么这不起作用的任何想法。我什至放了一个警报而不是前置语句，以查看它是否有效并且确实有效。

这是HTML：

```
<ul id="gallery-1" class="gallery list columns_3 ">
 <li class="gallery-item"> <a href="/instructions_en.pdf" title="English" class="gallery-icon"> English </a></li>
 <li class="gallery-item"> <a href="/instructions_en.pdf" title="French" class="gallery-icon"> Spanish </a></li>
 <li class="gallery-item gallery-endcol"> <a href="/instructions_en.pdf" title="German" class="gallery-icon"> German </a></li>
</ul> 
```

应该发生的是 jquery 脚本根据它们所在的 URL 将“Select”或“Selectioner”添加到列表的顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:24:21.827

这种方法怎么样：

```
$(function() {
    $('ul.gallery').prepend(function() {
        return ~location.pathname.indexOf('/es')
            ? '<li class="gallery-item"><a href="#">Selecctioner</a></li>'
            : '<li class="gallery-item"><a href="#">Select</a></li>';
    })
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:04:44.553

好的，我的原始脚本正在运行，我的问题是我上面的脚本将我的列表变成了一个下拉框。我不得不将该代码移到最后，因此它最后运行。有用。这是将其更改为我需要移到最后的下拉列表的代码，仅供参考：

```
$(document).ready(function(){

var $listItems = $('.gallery li');
var $select = $("<select id='new-menu'>");

$.each($listItems, function(idx,obj){
  var $option = $("<option>"+ $(obj).text() +"</option>").val( $(obj).find('a').attr('href') );
  if ( $(obj).hasClass('active') ){
    $option.attr('selected', 'selected');
  }
  $select.append($option);
})

$('.gallery').after($select);
$('.gallery').remove();

// Go to page on select.

$('#new-menu').change(function(){
  var selected = $(this).find('option:selected');
  //alert('Going to: '+ selected.val());
  window.location.href = selected.val();
});

}); 
```

# iphone - iOS：如何为导航栏中的按钮添加边框图像？

> ID：12942710
> 
> 赞同：1
> 
> 时间：2012-10-17T20:19:58.520
> 
> 标签：iphone, ios, ipad

我想在我的导航栏中添加一个条形按钮项，并为其提供一些看起来像垂直线的边框图像（在下图中以红色圈出）...

![在此处输入图像描述](../Images/e82864b8e9707e7477cdc271c6122896.png)

barbutton 项目的背景将被清除，因为我正在单独设置整个导航栏的背景图像。文本将是动态的，因此我不能将文本或线条烘焙到背景图像中，然后为栏按钮项设置该背景图像。我只需要在栏按钮项的任一侧添加这些垂直线图像。

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:24:52.113

您可以使用可拉伸的 UIImage 作为 UIButton 的背景，然后使用 UIButton 作为自定义视图初始化条形按钮项：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage *bgImg = [[UIImage imageNamed:@"ButtonBorder.png"]
    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)]; // or whatever size suits your needs
[btn setBackgroundImage:bgImg forState:UIControlStateNormal];

UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:btn]; 
```

等等

# django - Django：一次调用使用两个 url 模式/函数

> ID：12942713
> 
> 赞同：0
> 
> 时间：2012-10-17T20:20:15.413
> 
> 标签：django, django-urls

我有以下 urlpatterns，按此顺序：

```
 url(r'^([^//]*)/forum/topics/$', showThreadTopics),
 url(r'^([^//]*)/$', redirectFrontPage) 
```

我去：

```
http://localhost:8000/xxx/forum/topics/ 
```

调用 showThreadTopics 并正确显示页面。但是，我碰巧在redirectFrontPage 中设置了一个断点，看到这个函数也被调用了。每次都会发生这种情况，我可以从中打印语句。它对最终结果没有影响，并且在 Firebug 中查看时不会导致任何明显的网络活动。showThreadTopics 没有什么特别之处。它只是获取一些数据并呈现它们。实际上，redirectFrontPage 是用我的任何网址调用的。

这怎么可能呢？我该如何避免呢？我有最后一个 urlpattern 因为如果有人输入

```
www.mysite.com/users_site_name 
```

然后我想将它重定向到

```
www.mysite.com/users_site_name/home 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:36:36.907

我猜想页面上对 CSS、JS 或图像文件之类的静态引用被该 URL 截获，因为它捕获了以前没有被其他任何东西捕获的所有内容。它甚至可能是浏览器对网站图标的自动请求。

# java - 解锁时锁定屏幕上的 SlidingTab 会振动 - 无论触觉反馈的全局设置如何

> ID：12942715
> 
> 赞同：1
> 
> 时间：2012-10-17T20:20:21.843
> 
> 标签：java, android, android-source, lockscreen

在简单的锁定屏幕上解锁我的 android 2.3.3 手机时，一旦触摸滑块就会振动，当滑块完全拉到另一侧时，它会振动第二次。

我发现它有点烦人，所以我想我可以在设置中以某种方式将其关闭，因为我可以关闭任何其他振动。

在这种情况下，实际上有两个类别可能有意义：

1) 声音设置/常规/使用个别设置振动：（始终、从不、仅在静音模式下、仅在不处于静音模式时）2) 声音设置/反馈/触觉反馈（开/关）

我不得不发现，这些设置都不会影响上面提到的解锁动作。

所以我在谷歌上搜索并发现了一些关于这个事实的评论，即在设置中无法轻松关闭振动。

例如 [http://code.google.com/p/android/issues/detail?id=34040](http://code.google.com/p/android/issues/detail?id=34040)

现在我很好奇，我试图更深入地研究 android 源代码并在这里找到滑块的源代码：[https ://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/内部/小部件/SlidingTab.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/widget/SlidingTab.java)

看：

```
vibrate(VIBRATE_SHORT); 
```

和：

```
vibrate(VIBRATE_LONG); 
```

在我看来，无论设置如何，都会调用振动动作。

现在我有一些问题：

1.  解锁的振动不应该考虑上面1）或2）的设置吗？

2.  这将如何添加到源代码中，以及如何将此更改应用于 android 源存储库，以便一段时间后可以将其迁移到下一个 android 中（如果在那里使用了滑动选项卡）

3.  是否可以单独更新文件 SlidingTab.java 并在我的根设备上对其进行测试，或者是否有必要为整个 android 系统进行完整的制作并用新系统刷新我的手机以查看它是否有效?

4.  我发现其他手机也有同样的滑盖，解锁时没有震动。在我发现证明它无法关闭源代码中的振动之后，我一无所知。

谢谢你跟我分享你的知识

尼尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:33:56.610

1.  可以考虑也可以不考虑。
2.  这里不确定。
3.  如果您完全需要更改锁定屏幕，您可以找到各种实现。如果您需要更改默认锁定屏幕，则需要构建整个系统。
4.  每家公司都为手机定制安卓系统。因此，某些滑块可能没有振动。或者手机可能没有硬件。

# c# - 读取另一个进程正在使用的日志文件

> ID：12942717
> 
> 赞同：24
> 
> 时间：2012-10-17T20:20:25.210
> 
> 标签：c#, file, remote-desktop

**目标**

我想在我的 GUI 上按下一个按钮并从远程机器读取 seclog.log 文件（赛门铁克 AV 日志），并将日志内容显示到我的应用程序中的富文本框中。

**有用的东西**

除了读取日志文件之外的所有内容

**错误信息**

```
System.IO.IOException was unhandled
Message=The process cannot access the file '\\HOSTNAME\C$\Program Files (x86)\Symantec\Symantec Endpoint Protection\seclog.log' because it is being used by another process.
Source=mscorlib 
```

**代码**

```
//possible seclog paths
        String seclogPath1 = @"\\\\" + target + "\\C$\\Program Files (x86)\\Symantec\\Symantec Endpoint Protection\\seclog.log";
        String seclogPath2 = @"\\\\" + target + "\\C$\\Program Files\\Symantec\\Symantec Endpoint Protection\\seclog.log";

        //if seclog exists
        if (File.Exists(seclogPath1))
        {
            //output.AppendText("file exists at " + seclogPath1);
            //var seclogContent = File.Open(seclogPath1, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

            Stream stream = File.OpenRead(seclogPath1);
            StreamReader streamReader = new StreamReader(stream);
            string str = streamReader.ReadToEnd();
            output.AppendText(str);
            streamReader.Close();
            stream.Close();

        } 
```

**我尝试过的事情**

[文件正被另一个进程使用](https://stackoverflow.com/questions/3737444/file-is-being-used-by-another-process)

[C#进程无法访问文件'''，因为它正被另一个进程使用](https://stackoverflow.com/questions/3803929/c-sharp-the-process-cannot-access-the-file-because-it-is-being-used-by-anoth)

谷歌搜索问题

以多种方式使用文件流

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-17T20:24:12.490

```
//possible seclog paths
String seclogPath1 = @"\\\\" + target + "\\C$\\Program Files (x86)\\Symantec\\Symantec Endpoint Protection\\seclog.log";
String seclogPath2 = @"\\\\" + target + "\\C$\\Program Files\\Symantec\\Symantec Endpoint Protection\\seclog.log";

//if seclog exists
if (File.Exists(seclogPath1))
{
    //output.AppendText("file exists at " + seclogPath1);
    //var seclogContent = File.Open(seclogPath1, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

    Stream stream = File.Open(seclogPath1, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    //File.OpenRead(seclogPath1);
    StreamReader streamReader = new StreamReader(stream);
    string str = streamReader.ReadToEnd();
    output.AppendText(str);
    streamReader.Close();
    stream.Close();

} 
```

**我必须改变什么**

我必须创建一个读写文件流

**原始代码**

```
Stream stream = File.OpenRead(seclogPath1);
StreamReader streamReader = new StreamReader(stream); 
```

**新代码**

```
Stream stream = File.Open(seclogPath1, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
//File.OpenRead(seclogPath1);
StreamReader streamReader = new StreamReader(stream); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-17T00:29:16.637

```
using (StreamReader sr = new StreamReader(filePath, true))
{
   sr.Close(); //This is mandatory
   //Do your file operation
} 
```

# javascript - 类型错误：canvas.getContext 不是函数

> ID：12942722
> 
> 赞同：2
> 
> 时间：2012-10-17T20:20:45.137
> 
> 标签：javascript, canvas

我正在尝试使用 canvas 元素在 Javascript 中为跟随光标的球设置动画。我将对我的画布对象的引用传递给名为 followMouse 的函数，但是当我尝试获取它的上下文时，萤火虫给了我这个错误：

> 类型错误：canvas.getContext 不是函数

当我将画布引用记录到控制台时，它会显示画布元素。我不知道为什么我无法在函数中获取上下文。有谁知道发生了什么？

这是我的代码：

```
function drawCircle(x, y, canvas) {
    var context = canvas.getContext('2d');
    context.beginPath();
    context.arc(x, y, 40, 0, 2 * Math.PI);
    context.fill(); 
}

function followMouse(canvas, mousePos) {
    var context = canvas.getContext("2d");
    console.log(canvas);
    context.clearRect(0, 0, 700, 700);
    var xPos = xPos + (mousePos.x - xPos) / 100;
    var yPos = yPos + (mousePos.y - yPos) / 100;
    drawCircle(xPos, yPos, canvas);
    window.requestAnimFrame(followMouse, canvas);
}

window.onload = function() {
    var canvas = document.getElementById("main");

    var mousePos = {
        x: 0,
        y: 0
    };

    canvas.addEventListener('mousemove', function(evt) {
           var pos = getMousePos(canvas, evt);
           mousePos.x = pos.x;
           mousePos.y = pos.y;
    }, false);

    followMouse(canvas, mousePos);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:30:32.553

您的线路`window.requestAnimFrame(followMouse, canvas);`调用`followMouse(timestamp)`，其中时间戳是在被触发时传递给回调的*数字*[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)。这导致调用`timestamp.getContext`，这显然是无效的。

相反，将您的调用包装在一个匿名函数中：

```
window.requestAnimFrame(function() { followMouse(canvas, mousePos) }, canvas); 
```

# android - TableRow 的视图禁用 TableRow 的 onClickListener

> ID：12942723
> 
> 赞同：0
> 
> 时间：2012-10-17T20:20:45.653
> 
> 标签：android, onclicklistener, tablerow

我正在将 tableRow 动态添加到 tableLayout 中。

然后，我将 TextViews 添加到 TableRows 中，然后，我必须单击 tableRow 的角以获取 TableRow 的 onClickListener。那是因为它实际上是在获取 TableRow 的内部视图的 onClickListener。（textview 的 onclickListener）

我的代码：

```
Cursor resultado = dh.fetchAllFornecedores();//buscando no banco
    resultado.moveToFirst();
    for(int i=0;i<resultado.getCount();i++){

        TableRow tr= (TableRow) getLayoutInflater().inflate(R.layout.tablerowfornecedor, null);
        HorizontalScrollView hsc= (HorizontalScrollView)tr.getChildAt(0);
        LinearLayout linearl= (LinearLayout)hsc.getChildAt(0);
        tr.setClickable(true);
        tr.setOnClickListener(this);

       for(int j=0;j<linearl.getChildCount();j++){ //para cada textfild dos Fornecedores
                TextView textv=(TextView)linearl.getChildAt(j);
                textv.setClickable(false);
                textv=(TextView)linearl.getChildAt(j);

                if(j==0)textv.setText(resultado.getString(resultado.getColumnIndex("nome")));               
                else if(j==1)textv.setText(resultado.getString(resultado.getColumnIndex("doc1")));
                else if(j==2)textv.setText(resultado.getString(resultado.getColumnIndex("rua"))+", "+(resultado.getString(resultado.getColumnIndex("numero"))));
                else if(j==3)textv.setText(resultado.getString(resultado.getColumnIndex("id_fornecedor")));
            }
       tl.addView(tr,tlp);
       trs.add(tr);
       resultado.moveToNext();

    } 
```

dh 是我的数据库类。

如何“禁用”对 TableRow 内部视图的单击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:13:27.183

您可以使用：

`Activity.dispatchTouchEvent(MotionEvent)`（对于家长活动）

或者：

`ViewGroup.onInterceptTouchEvent(MotionEvent)`（用于父布局）

在将运动事件发送给他们的孩子之前拦截它们。

# asp.net-mvc - 使用 ASP MVC 嵌入表单

> ID：12942726
> 
> 赞同：0
> 
> 时间：2012-10-17T20:21:13.510
> 
> 标签：asp.net-mvc

我有一种表格，需要与一种方法和一个控制器一起使用。然后，在其中，我需要在不同的控制器中添加一个从完全不同的方法中提取的表单。

第一种形式是这样开始的：

```
using (Html.BeginForm("Create", "Post", FormMethod.Post, new { id = "post-box-form",   enctype = "multipart/form-data" })) 
```

第二种形式是这样开始的：

```
using (Html.BeginForm("AddGroupAttachment", "Group", new { id = Model.ID }, FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

我收到一个运行时异常，提示“无法对空引用执行运行时绑定”

我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:25:34.337

不能嵌套表格。

文档：[http ://www.w3.org/MarkUp/html3/forms.html](http://www.w3.org/MarkUp/html3/forms.html)

> 请注意，您不允许嵌套 FORM 元素！

将您的内部形式移动到主要形式之外的某个地方。这样做应该没有任何问题，因为您仍然只是`Model`在声明中访问您的变量。

# apache-flex - Flex Datagrid ItemRenderer

> ID：12942729
> 
> 赞同：0
> 
> 时间：2012-10-17T20:21:23.540
> 
> 标签：apache-flex, datagrid, flash-builder, itemrenderer

我正在使用 Flash Builder 4.6 创建接下来 12 小时的计划。行包含员工，列代表小时数。我想要一个所有单元格都可以使用的 GridItemRenderer 来适当地显示信息。

我目前正在 GridColumn 中设置一个 GridItemRenderer 来尝试完成此操作。我可以让它识别与行相关的数据，但我无法让渲染器识别它正在应用的列，因此我可以计算当前单元格是否在当前员工的开始/结束时间之间。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:14:40.573

在您的项目渲染器中使用“列”属性。

```
 override public function set data(value:Object):void {
    if( value != null ) {
      super.data = value;

      if( column.dataField == "col1" ) {
        myLabel.text = data.col1;
      } else {
        myLabel.text = data.col2;
      }
    }
  } 
```

我从中找到了答案：

[Flex：在自定义 itemrenderer 中为 spark datagrid 获取列索引](https://stackoverflow.com/questions/8876526/flex-get-column-index-in-custom-itemrenderer-for-spark-datagrid)

并测试，没问题。

# jquery - 从表单发布在 iframe 上打开 fancybox

> ID：12942735
> 
> 赞同：0
> 
> 时间：2012-10-17T20:21:45.307
> 
> 标签：jquery, fancybox, fancybox-2

我有一个表单（它只是电子商务购物车的模拟器 html 中的一个表单，因为我还没有实现购物车。它只是输入 SKU、名称、价格、数量等并发布到结帐屏幕）我想当我点击一个按钮时，页面将它的信息发布到一个fancybox，我可以在其中导航。

到目前为止，我设法使用 Garland 在此[问题](https://stackoverflow.com/questions/969522/open-fancybox-or-equiv-from-form-input-type-submit "问题")上的帖子让结帐（登录屏幕）的fancybox 第一页收到帖子，但是每当我继续流程，登录系统时，它就会在主窗口中打开。

我遇到的问题是我似乎无法在 iframe 上打开 fancybox，因此登录后我失去了控制，关闭了 fancybox。

我的部分html：

```
<form target="Popup" action="../Account/LogOn" method="post" name="form1" id="form1"> 
    <div style="float: left; width: 500px; left: 50%; top: 20px; margin-left: -250px; position: absolute;">
        <div style="float: left; width: 100%; height: auto; margin-top:20px; text-align:center">
            .
            .
            .
            <input type="button" value="regular purchase" onclick="javascript: SendForm();" style="width:150px; height:30px; font-family: Trebuchet MS, Verdana, Helvetica, Sans-Serif; font-size: 10pt; vertical-align: middle" /> 
            <input type="submit" value="lightbox purchase" style="width:180px; height:30px; font-family: Trebuchet MS, Verdana, Helvetica, Sans-Serif; font-size: 10pt; vertical-align: middle" />
        </div>
    </div>
</form> 
```

我的代码：

```
$("#form1").ajaxForm({
        success: function (responseText) {
            $.fancybox({
                type: 'iframe',
                content: responseText,
                fitToView: false,
                width: '70%',
                height: '70%',
                autoSize: true,
                closeClick: false,
                openEffect: 'elastic',
                closeEffect: 'fade',
                helpers: { overlay: { css: { 'background': 'rgba(0, 0, 0, 0.65)' } } },
                afterClose: function () {
                    location.reload();
                    return;
                }
            });
        }
    }); 
```

此代码打开一个包含登录页面和所有内容的花式框，但不在 iframe 内，只是普通的 div。任何人都有解决此问题的想法？

不幸的是，我没有向你们展示它的链接，因为我仍处于早期开发阶段，到目前为止，它都是 localhost。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:06:02.663

正如我在之前的评论中推荐的那样，基于[这个例子](http://jsfiddle.net/qVrLr/)，使用fancybox的回调创建`iframe`你的参数内部，比如：`success``afterShow`

```
success: function(responseText) {
  $.fancybox.open({
    content   : '<iframe id="myFrame" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" src="about:blank"></iframe>',
    width     : '70%',
    height    : '70%',
 // fitToView: false, 
    autoSize: false,
    closeClick: false,
    openEffect: 'elastic',
    closeEffect: 'fade',
    helpers: { overlay: { css: { 'background': 'rgba(0, 0, 0, 0.65)' } } },
    afterShow : function() {
      var oIframe = document.getElementById('myFrame');
      var iframeDoc = (oIframe.contentWindow.document || oIframe.contentDocument );
      iframeDoc.open(); 
      iframeDoc.write(responseText);
      iframeDoc.close();
    },
    afterClose: function () {
      location.reload();
      return;
    }
  }); // fancybox
} // success 
```

请参阅实施的[工作演示](http://www.picssel.com/playground/jquery/wrapContentIframe_19oct12.html#login_form_ajax)。提交表单后（也在花式框内），`responseText`现在在一个内`iframe`（我在响应中包含了一些链接，以便您可以继续在花式框内导航）

# jquery - jQuery .hide .show 在动画期间创建了一些奇怪的行为

> ID：12942737
> 
> 赞同：1
> 
> 时间：2012-10-17T20:21:50.497
> 
> 标签：jquery, css, html

我遇到了以下代码的问题，它创建了一些奇怪的动画，其中一个在动画期间将内容降低了大约 1em，然后在停止时将其重新移动。存档页面上的另一个导致奇怪的震动效果。

```
 jQuery(document).ready(function() {
      jQuery(".hide").hide();
      //toggle the componenet with class msg_body
      jQuery(".show").click(function()
      {
        jQuery(this).next(".hide").slideToggle(500);
      });
    }); 
```

[http://msc-media.co.uk/about/](http://msc-media.co.uk/about/)

点击关于页面底部的“待办事项”

[http://msc-media.co.uk/tag/france/](http://msc-media.co.uk/tag/france/)

点击任何一天 - 在 div 展开之前奇怪的晃动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:45:14.627

当 jQuery 开始显示和隐藏元素（在您的示例中为`.hide`）时，它会自动为其添加一些 CSS 样式，包括`overflow: hidden`. 这就是导致跳跃的原因；在您的示例中，`.hide`包含 a `ul`，由于它没有样式，因此采用浏览器的样式 a `margin-top: 1em`。当父容器获得 时`overflow: hidden`，它会改变围绕这些默认边距流动的方式。

您最简单的选择是`margin: 0`在内部设置`ul`，但您也可以`overflow: hidden`默认设置在容器元素上以消除跳转，然后相应地设置样式。

# java - 将类重构到一个单独的项目中

> ID：12942739
> 
> 赞同：2
> 
> 时间：2012-10-17T20:21:56.693
> 
> 标签：java, refactoring

我打算从一个 Java 项目中提取几个类和包并将它们放入另一个（将有一个可分发的 jar）。这并不太难，但当然，如此大的重构会产生后果。即原始项目中有许多类是我要提取的类的子类。进行这种重构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:27:53.857

您可以创建单独的项目，主项目将具有所有这些项目的依赖项。因此，在您的 IDE 中，您可以轻松地浏览源代码。

在构建应用程序时，每个依赖项都可以构建到 a`jar`中，并且主应用程序将与其类路径中的所有依赖项 jar 捆绑在一起。

让我们以使用插件的 Web 应用程序为例，以及使用存储在名为 common-plugins 的项目中的通用类、实用程序等的插件。

```
project/webapp: having dependency on plugin1, plugin2 and common-plugin
project/plugin1: having dependency on common-plugins
project/plugin2: having dependency on common-plugins
project/common-plugins: having no dependencies 
```

在构建项目时，您可以将插件和通用插件构建到 jar 中，与您的 Web 应用程序捆绑在一起

```
project/webapp.war/WEB-INF/lib/plugin1.jar
project/webapp.war/WEB-INF/lib/plugin2.jar
project/webapp.war/WEB-INF/lib/common-plugins.jar 
```

这样，在您的 IDE 中，我将以 eclipse 为例，您将拥有一个包含 4 个项目的工作区，这些项目具有如上所述的依赖关系。在使用 maven、ant、ivy 或您想要的构建时，您将构建 webapp 项目所依赖的 3 个项目，然后捆绑整个东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:50:35.713

所以基本上这就是我所做的：

1.  创建一个新项目

2.  将旧项目中的适当类复制到新项目中的新包中，重新配置直到一切构建完成

3.  单独测试该项目并将其构建到 jar 中

4.  添加jar作为依赖

5.  从原始项目中删除类

6.  手动将旧包中的所有导入更改为新包

我真正想要的是某种自动化或简化步骤 6 的方法，以确保我没有破坏任何东西，但我不确定它是否存在于大量查找/替换之外。

# c - 在 C 程序中以 f 为双精度后缀

> ID：12942747
> 
> 赞同：0
> 
> 时间：2012-10-17T20:22:16.317
> 
> 标签：c, floating-point, double

> **可能重复：**
> [浮点值上的“f”后缀？](https://stackoverflow.com/questions/5026570/suffix-of-f-on-float-value)

是否有不同的后缀可用于 double 类型，或者“f”是否适用于两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:24:53.070

未修饰的浮点字面量（如`1.5`具有 type `double`）。后缀`f`构成类型`float`（如`1.5f`），并`L`构成类型（`long double`如`1.5L`）。

# ruby - 你如何在没有 ruby gems 的情况下启动 ruby 1.9

> ID：12942748
> 
> 赞同：6
> 
> 时间：2012-10-17T20:22:17.443
> 
> 标签：ruby, ruby-1.9

我希望我的应用程序*不能*使用任何已安装的 gem。是否有 ruby​​ 1.9 启动参数或以编程方式执行此操作的方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T20:36:25.223

```
ruby --disable-gems 
```

是 MRI (1.9) 命令行参数。“它会阻止将 gem 安装目录添加到默认加载路径”。（Ruby 编程语言，第 391 页）

编辑 25-10-2012：Ruby 核心在评论中与@rogerdpack 有相同的想法，并添加了更详细的`ruby --help`参数。[红宝石改版！](http://bugs.ruby-lang.org/issues/7184)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:27:16.857

查看[ruby​​gems 配置文件](http://docs.rubygems.org/read/chapter/11#page54)，我会尝试破解`gempath`或`gemhome`查看您是否可以覆盖（而不仅仅是附加到）默认值。

例如，如果设置`gempath`为空或指向`/dev/null`，阻止使用系统 gem，那么这就是要走的路。

正如我所看到的，这样做的主要优点是您的反rubygems 配置文件可以作为启动参数（因此未编码）传递给ruby 1.9，有据可查，并签入您的存储库。

当然，所有这些都忽略了 ruby​​gems 是 ruby​​ 1.9 标准库的一部分 - 因此，如果 ruby​​ 无法访问其 gem，它可能会窒息而死，这取决于 ruby​​ 的基本安装有多少需要 gem 功能。YMMV。

# jaxb - Karaf 的 Moxy 错误

> ID：12942750
> 
> 赞同：4
> 
> 时间：2012-10-17T20:22:34.693
> 
> 标签：jaxb, eclipselink, moxy, apache-karaf

我在保险丝 ESB 下使用 MOXy（基于 karaf），我转换`org.eclipse.persistence.jar`为一个包，我在保险丝 ESB 下部署了这个包，我得到了这个错误

```
Error : "org.apache.cxf.interceptor.Fault: property "eclipselink-oxm-xml" is not supported" 
```

当尝试创建`JAXBContext`我的代码的新实例时，尝试将 Java 模型转换为 XML，并且模型部署在 fuse ESB 下的单独包中，我`jaxb.properties`在模型的同一包中添加了文件

**注意：**当从主类中的主方法运行时，相同的代码可以成功运行而没有问题。

以下是我的代码，错误发生在**第 6 行**。

```
 Map<String, Source> metadataSourceMap = new HashMap<String, Source>();      
    InputStream is = getClass().getClassLoader().getResourceAsStream
            ("com/syngenta/mint/security/service/transformation/User.xml");             

    metadataSourceMap.put("com.syngenta.mint.security.model",new StreamSource(is));

    1\. Map<String, Object> properties = new HashMap<String, Object>();
    2\. properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY,
            metadataSourceMap);
    3\. properties.put("javax.xml.bind.context.factory",
                 "org.eclipse.persistence.jaxb.JAXBContextFactory");

    4\. Class[] classes = new Class[1];
    5\. classes[0] = User.class;

    6\. JAXBContext jc = JAXBContext.newInstance(classes, properties); 
```

任何的想法？

**更新**

**堆栈跟踪：**

```
org.apache.cxf.interceptor.Fault: property "eclipselink.oxm.metadata-source" is not supported
    at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:155)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:121)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:167)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:94)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:94)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:344)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:310)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:943)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:879)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.Server.handle(Server.java:349)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:919)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:582)[73:org.eclipse.jetty.http:7.5.4.v20111024]
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)[73:org.eclipse.jetty.http:7.5.4.v20111024]
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:51)[72:org.eclipse.jetty.server:7.5.4.v20111024]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)[68:org.eclipse.jetty.io:7.5.4.v20111024]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)[68:org.eclipse.jetty.io:7.5.4.v20111024]
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)[76:org.eclipse.jetty.util:7.5.4.v20111024]
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)[76:org.eclipse.jetty.util:7.5.4.v20111024]
    at java.lang.Thread.run(Thread.java:619)[:1.6.0_12]
Caused by: javax.xml.bind.JAXBException: property "eclipselink.oxm.metadata-source" is not supported
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:118)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:202)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_12]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_12]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_12]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_12]
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:143)[:2.0.0.fuse-70-084]
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:269)[:2.0.0.fuse-70-084]
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:412)[:2.0.0.fuse-70-084]
    at com.syngenta.transport1.security.transformation.Transformer.fromJavaToXML(Transformer.java:72)[311:com.syngenta.transport1.security.transformation:1.0.0.SNAPSHOT]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_12]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_12]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_12]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_12]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:58)
    at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:62)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invokeUnprivileged(ServiceTCCLInterceptor.java:56)
    at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:39)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.osgi.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:59)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$FixedChainStaticTargetInterceptor.intercept(Cglib2AopProxy.java:572)
    at com.syngenta.transport1.security.transformation.Transformer$$EnhancerByCGLIB$$1aed98eb.fromJavaToXML(<generated>)
    at com.syngenta.transport1.security.restservice.UserRestService.handleGetUserRequest(UserRestService.java:53)[310:com.syngenta.transport1.security.restservice:1.0.0.SNAPSHOT]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_12]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_12]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_12]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_12]
    at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:173)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:89)[131:org.apache.cxf.bundle:2.5.0.fuse-70-084]
    ... 25 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:47:51.957

您可以从以下位置下载我们预先构建的 OSGi 包，而不是将 eclipselink.jar 转换为包：

**EclipseLink 2.4.1 捆绑包**

*   [http://www.eclipse.org/downloads/download.php?file=/rt/eclipselink/releases/2.4.1/eclipselink-plugins-2.4.1.v20121003-ad44345.zip](http://www.eclipse.org/downloads/download.php?file=/rt/eclipselink/releases/2.4.1/eclipselink-plugins-2.4.1.v20121003-ad44345.zip)

对于[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)，您将需要以下捆绑包：

*   org.eclipse.persistence.moxy_2.4.1.v20121003-ad44345.jar
*   org.eclipse.persistence.core_2.4.1.v20121003-ad44345.jar
*   org.eclipse.persistence.asm_3.3.1.v201206041142.jar

如果您使用 MOXy 的 JSON 绑定（请参阅：[http](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html) ://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html ），您还需要以下捆绑包：

*   org.eclipse.persistence.antlr_3.2.0.v201206041011.jar

**更新#1**

在 OSGi 环境中，您需要确保导入 MOXy 包或`org.eclipse.persistence.jaxb`包。

> 我的代码中的另一个问题在第 2 行，我发现 JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY 在您在回答中提到的 Eclipse 包中已弃用，是否有任何替代品？

我们引入了新类，以便更容易找到 、 和 上`JAXBContext`的`Marshaller`属性`Unmarshaller`。这些类称为`JAXBContextProperties`、`MarshallerProperties`和 ，`UnmarshallerProperties`并且可以在`org.eclipse.persistence.jaxb`包中找到。

*   以下： `JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY`
*   替换为： `JAXBContextProperties.OXM_METADATA_SOURCE`

**更新#2**

我没有使用过 Karaf，但下面是一个我可以在 Eclipse Equinox 中运行的 OSGi 示例：

***例子/Activator.java***

我发现您需要`JAXBContext`使用上下文路径创建。这允许您传入一个`ClassLoader`. 此类加载器需要了解 EclipseLink JAXB (MOXy) 实现。我还包含了一个指定 MOXy 的外部映射文档的示例。

```
package example;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;
import org.osgi.framework.*;

public class Activator implements BundleActivator {

    private static BundleContext context;

    static BundleContext getContext() {
        return context;
    }

    public void start(BundleContext bundleContext) throws Exception {
        Activator.context = bundleContext;

        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE,
                "example/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance("example",
                Customer.class.getClassLoader(), properties);

        Customer customer = new Customer();
        customer.setName("Jane Doe");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

    public void stop(BundleContext bundleContext) throws Exception {
        Activator.context = null;
    }

} 
```

***示例/jaxb.in​​dex***

从上下文路径创建一个`JAXBContext`时，您需要包含一个`jaxb.index`在上下文路径中调用的文件，其中包含一个回车分隔的短类名称列表。

```
Customer 
```

***示例/jaxb.properties***

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

***示例/oxm.xml***

下面是一个示例 MOXy 映射文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="example">
    <java-types>
        <java-type name="Customer">
            <xml-root-element/>
             <java-attributes>
                <xml-element java-attribute="name" xml-path="personal-info/name/text()"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

***元信息/清单.MF***

以下是清单的示例。在此示例中，我使用了捆绑导入：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Example
Bundle-SymbolicName: Example
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: example.Activator
Import-Package: org.osgi.framework;version="1.3.0"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Require-Bundle: org.eclipse.persistence.antlr,
 org.eclipse.persistence.asm,
 org.eclipse.persistence.core,
 org.eclipse.persistence.moxy,
 javax.xml.bind 
```

***输出***

下面是运行的输出`Activator`：

```
<?xml version="1.0" encoding="UTF-8"?>
<customer>
   <personal-info>
      <name>Jane Doe</name>
   </personal-info>
</customer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:29:35.273

**问题已通过替换这段代码解决**

```
Map<String, Source> metadataSourceMap = new HashMap<String, Source>();      
InputStream is = getClass().getClassLoader().getResourceAsStream("com/syngenta/mint/security/service/transformation/User.xml");               metadataSourceMap.put("com.syngenta.mint.security.model",new StreamSource(is));
Map<String, Object> properties = new HashMap<String, Object>();
properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY,metadataSourceMap);
        properties.put("javax.xml.bind.context.factory","org.eclipse.persistence.jaxb.JAXBContextFactory"); 
```

**和**

```
InputStream is = getClass().getClassLoader().getResourceAsStream("com/syngenta/mint/security/service/transformation/User.xml");    
Map<String, Object> properties = new HashMap<String, Object>();
properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, is); 
```

# .net - 获取“创建者所有者”名称以添加访问规则

> ID：12942752
> 
> 赞同：0
> 
> 时间：2012-10-17T20:22:44.257
> 
> 标签：.net, access-rights

我有一个程序，我在其中执行以下操作

```
 oFolderACL.AddAccessRule(New Security.AccessControl.FileSystemAccessRule(strDomaine & "\" & oUtilisateur.UserName, oAccessControl, Security.AccessControl.InheritanceFlags.ContainerInherit Or Security.AccessControl.InheritanceFlags.ObjectInherit, Security.AccessControl.PropagationFlags.None, oAccessType)) 
```

我希望能够对组 CREATOR OWNER 做同样的事情。唯一的问题是，根据我所做的计算机，名称可以更改，因此我不能使用名称本身。.NET 中有没有办法检索该组的名称（或身份引用）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:55:02.353

您可以使用 SID 获取 CREATOR OWNER 的身份参考：

```
IdentityReference identityReference = new SecurityIdentifier("S-1-3-0"); 
```

这里列出了其他“众所周知的”SID：

[http://support.microsoft.com/kb/243330](http://support.microsoft.com/kb/243330)

# google-apps-script - 谷歌电子表格：在脚本中查询

> ID：12942754
> 
> 赞同：0
> 
> 时间：2012-10-17T20:22:46.923
> 
> 标签：google-apps-script, google-sheets

嗨，我的问题是：我正在使用谷歌的电子表格。我想将查询插入脚本。可能吗？

我需要创建一个电子表格，在其中运行查询以创建效果“明信片”（人名和不同年份的薪水）。

我只为一个男人在一个牢房里做这件事：

```
 query(sheet1!1:100; "select I, J,K, G, sum(H), F, L where B contains """&A6&""" group by B,I, J, K, G, F, L ") 
```

"""&A6&""" 是我在其中输入名称的单元格。

我需要在一个脚本中为我所有的同事 (30) 做这件事。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:03:09.037

我可能会误解您的问题，但假设您在 A6:A35 中有 30 个条目（没有空格），您可以返回 B 列包含这 30 个名称中的任何一个的所有数据：

`=QUERY(sheet1!1:100;"select I, J, K, G, sum(H), F, L where B matches '.*"&JOIN(".*|.*";A6:A35)&".*' group by B, I, J, K, G, F, L")`

# html - div 似乎没有内容，因为嵌套的 div 是浮动的

> ID：12942755
> 
> 赞同：0
> 
> 时间：2012-10-17T20:23:00.777
> 
> 标签：html, overflow

我有一个容器，里面有几个浮动的 div。我希望 div 伸展到其内容的完整高度。

我尝试添加`overflow:visible`到容器中以使其扩展，还添加了 a`clear`但似乎都不起作用。

[此处](http://www.rubytuesdaycreative.co.uk/testsite/snood.html)提供实时站点链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:28:52.200

您需要在 div 中放置未浮动的内容并清除它。

```
<div class="magical-div>
   <div class="float1"> content </div>
   <div class="float2"> content </div>
   <div style="display:block;clear:both;">&nbsp;</div>
</div> 
```

# coldfusion - ColdFusion URL 查询和使用

> ID：12942757
> 
> 赞同：0
> 
> 时间：2012-10-17T20:23:01.907
> 
> 标签：coldfusion

我正在寻找使用“虚荣”网址重定向到登录页面，上面有公司徽标。

URL 类似于：`companyname.domain.com`

首先，我需要查询请求的 URL 以查看“companyname”是否存在，然后要么

1.  提供自定义登录页面（如果存在）-或-
2.  如果没有，则显示错误页面。

真正的目的地实际上是`www.domain.com/folder/`. 但同样，我需要在整个应用程序中显示“虚荣”URL。例子：

```
 companyname.domain.com/clients/?id=somevariable&... 
```

我知道我可能可以通过一段时间的反复试验来弄清楚。但作为一名自学成才的 CF-er，我想就完成这项任务的“正确方式”获得一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:13:36.780

这就是我最终做我正在寻找的事情的方式。感谢所有的投入。

首先，我向 domain.com 区域添加了一条 DNS A 记录，如下所示： * site-ip-address-here

```
<cfscript> 
    siteDomainName = cgi.http_host;
    if (ListLen(siteDomainName, '.') gt 2) {
        siteDomainName = ListFirst(siteDomainName,'.');
    }
</cfscript>

<cfif siteDomainName NEQ "www">

    <cfquery name="qUrl" datasource="#dsn#">
        SELECT id, pre
        FROM table
        WHERE pre = <cfqueryparam value="#siteDomainName#" cfsqltype="cf_sql_varchar">
    </cfquery>

    <cfif qUrl.recordCount GT 0>
        <cflocation url="/folder/" addtoken="false">
    <cfelse>
        <cflocation url="http://www.domain.com/error.cfm" addtoken="false">
    </cfif>

</cfif> 
```

如果有人对如何做得更好有任何意见，我一直在寻找新的东西。

# solr - Solr Query 只匹配精确

> ID：12942758
> 
> 赞同：0
> 
> 时间：2012-10-17T20:23:02.277
> 
> 标签：solr

如果我搜索`"Movies 10"`它会找到名称为`Movies 10`

如果我搜索`Movies 10`它不会返回任何文件。

以下是我的架构：

```
<?xml version="1.0" encoding="UTF-8" ?>
<schema name="entertainment" version="1.0">
    <types>
        <!-- The StrField type is not analyzed, but indexed/stored verbatim. -->
        <fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
        <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
        <fieldType name="uuid" class="solr.UUIDField" indexed="true"/>
        <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
                <tokenizer class="solr.StandardTokenizerFactory"/>
                <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
                <!-- in this example, we will only use synonyms at query time
                 <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
                 -->
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
            <analyzer type="query">
                <tokenizer class="solr.StandardTokenizerFactory"/>
                <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
                <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
        </fieldType>
    </types>

    <fields>
        <field name="uid" type="uuid" indexed="true" stored="true" default="NEW" />
        <field name="type" type="string" indexed="true" stored="true" required="true" />
        <field name="name" type="string" indexed="true" stored="true" required="true" />
        <field name="description" type="string" indexed="true" stored="true" required="false" />       
        <dynamicField name="movie_*" type="string" indexed="true" stored="true" />
        <dynamicField name="movie_review_*" type="string" indexed="true" stored="true" />
        <dynamicField name="movie_trailer_*" type="string" indexed="true" stored="true" />
        <dynamicField name="theater_*" type="string" indexed="true" stored="true" />
    </fields>

    <!-- Field to use to determine and enforce document uniqueness. 
     Unless this field is marked with required="false", it will be a required field
     -->
    <uniqueKey>uid</uniqueKey>

    <!-- field for the QueryParser to use when an explicit fieldname is absent -->
    <defaultSearchField>name</defaultSearchField>
    <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
    <solrQueryParser defaultOperator="OR"/>
</schema> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:37:34.690

要获得这种搜索行为，您需要更改`name`要使用的 fieldType`text_general`以便对值进行标记。通过`name`当前定义为字符串 fieldType，只会返回完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:31:39.973

逐字搜索字符串，因为您的 text_general 映射到 solr.TextField 与 Tokeniser 更适合。

# python - 以 32 位模式打开的脚本？

> ID：12942762
> 
> 赞同：3
> 
> 时间：2012-10-17T20:23:11.513
> 
> 标签：python, py2app

我正在用 wxpython 制作一个 mac 应用程序，当我将它与 py2app 捆绑在一起时，我收到“没有适当的 64 位架构”消息。这可以通过在“获取信息”面板中选中“以 32 位模式打开”来解决，但这对于使用该应用程序的人来说不是很方便。即使 Python 的默认值是 64 位，我是否可以在脚本中添加一行以使其以 32 位运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T01:18:44.423

您可以使用以下命令创建仅 32 位版本的应用程序`ditto`：

```
ditto --rsrc --arch i386 dist/MyApp.app dist/MyApp-32.app 
```

`MyApp-32.app`将是一个仅以 32 位模式启动的应用程序包。作为一个很好的奖励，`ditto`完全去掉了 64 位架构，只剩下一个更小的应用程序包（在我的测试中大约是一半大小）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:39:22.003

```
$ export VERSIONER_PYTHON_PREFER_32_BIT=yes 
```

当你安装你的程序。这将以 32 位启动 python。

这必须在具有可选超级用户权限的 bash 终端中运行。

## `start_your_program.sh`

```
export VERSIONER_PYTHON_PREFER_32_BIT=yes
./main.py 
```

# windows-8 - Windows 8 的 VS 2012 速成版中的应用程序部署失败

> ID：12942768
> 
> 赞同：1
> 
> 时间：2012-10-17T20:23:48.810
> 
> 标签：windows-8, visual-studio-2012

我正在尝试在 Windows 8 的 Visual Studio 2012 Express Edition 上运行 Windows 8 示例应用程序。我使用 VS 的 Web 安装程序并使用 Windows 8 发布预览版 8400。

即使应用程序构建成功，我也会收到此消息：错误：DEP0800：所需的框架“F:\Program Files\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\Microsoft.WinJS.1.0\1.0\Microsoft.WinJS.1.0\. appx”安装失败。Windows 无法安装包 Microsoft.WinJS.1.0，因为此包需要更高的 Windows 版本。该软件包要求 Windows 版本 6.2 和 AppModel 版本 1，而当前的 Windows 版本是 6.2 和 AppModel 版本 0。 App4

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:17:47.883

Visual Studio 2012 发布版本（[在此处下载](http://www.microsoft.com/visualstudio/eng/downloads)）将仅适用于 Windows 8 的 RTM 版本，该版本于 10 月 26 日正式发布，但[现在提供 90 天试用版](http://msdn.microsoft.com/en-us/windows/apps/br229516.aspx)。

Windows 8 Release Preview 仅与 Visual Studio 2012 RC 兼容，我认为它会在 Windows 8 GA 之前可用，但[我拥有的链接现在](http://www.microsoft.com/en-us/download/details.aspx?id=29917)似乎已损坏。您也许可以在某处找到缓存的副本。

# c++ - 如何在 qtextedit 中获取列号？

> ID：12942769
> 
> 赞同：0
> 
> 时间：2012-10-17T20:23:57.257
> 
> 标签：c++, qt, user-interface, qtextedit, qtextcursor

我可以在 QTextEdit 中获取光标的行号。但无法获取列号信息。（注意：我在获取行号信息时使用 QTextBlock。）是否有一种简单的方法来获取列号？我该怎么办？尽管我[在这里](https://stackoverflow.com/questions/1849558/how-do-i-use-qtextblock)和[这里](http://doc.qt.digia.com/stable/qtextblock.html)阅读，但 QTextBlock 类仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:36:07.097

这是我对问题的解决方案：

```
QTextCursor cursor = ui.textEdit->textCursor();
int y = cursor.blockNumber() + 1;
int x = cursor.columnNumber() + 1; 
```

# iis-7.5 - 两个匹配服务器上的 Web Deploy 2.0 中可用选项的差异

> ID：12942774
> 
> 赞同：3
> 
> 时间：2012-10-17T20:24:12.400
> 
> 标签：iis-7.5, webdeploy

IIS 7.5 安装在安装了 Web Deploy 2.0 的两台服务器（均为 Windows Server 2008 R2）上（使我能够从 Visual Studio 2010 发布。）直接从 VS 发布需要在服务器上运行 Web 管理服务。我已经发布到第一台服务器几个月了，没问题。第二台服务器刚刚启动（不是由我启动的），但据我所知，它拥有所有相同版本的组件（操作系统、IIS、Web 部署）。但是，在第二台服务器上没有安装 Web 管理服务。有一个关键区别：

第一个服务器上可用的 Web Deploy 2.0 选项： ![第一个服务器上可用的 Web Deploy 2.0 选项](../Images/9fa3533d2a4ab4380c710ec3f232b526.png)

第二台服务器上可用的 Web Deploy 2.0 选项： ![第二台服务器上可用的 Web Deploy 2.0 选项](../Images/d08e4e2a1f79df2303dfbb3a1067e278.png)

为什么两者有区别？

（跟进：我尝试了 Web Deploy 3.0 安装程序并遇到了与上面的第二台服务器完全相同的对话框，除了它说的是“3.0”而不是“2.0”。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:56:21.040

验证在您的新服务器上安装了正确的 IIS 角色。在服务器管理器控制台的 Web 服务器 (IIS) 下，验证是否安装了以下角色：

*   管理工具
    *   IIS 管理控制台
    *   IIS 管理脚本和工具
    *   管理服务

然后尝试重新运行 Web Deploy 安装程序。我想你会发现你得到了你想要的选择。

# ruby-on-rails - 巫术无法登录RSpec

> ID：12942780
> 
> 赞同：0
> 
> 时间：2012-10-17T20:24:31.813
> 
> 标签：ruby-on-rails, rspec, sorcery

我有一个使用 Sorcery（或尝试使用它）的应用程序，我正在为它编写规范：

```
context "successfull attempts to log in" do
  let(:attr) { attributes_for(:credentials) }

  before(:each) do
    @user = create(:user, attr)
  end

  it "should log the user in" do
    post :create, attr.merge(remember_me: false)
    controller.should be_logged_in
  end
end 
```

这是 FactoryGirl 工厂：

```
FactoryGirl.define do
  factory :user do
    email                 Faker::Internet.safe_email
    password              "password"
    password_confirmation { |u| u.password }
    client_id             1
  end

  factory :credentials, class: User do
    email       "user@example.com"
    password    "password"
  end
end 
```

这是控制器动作：

```
class SessionsController < ApplicationController
  # ...
  def create
    login(params[:email], params[:email], params[:remember_me])
    flash.now[:error] = "Invalid email/password combination"
    render :new
  end
end 
```

错误消息如下：

```
1) SessionsController POST 'create' successfull attempts to log in should log the user in
     Failure/Error: controller.should be_logged_in
       expected logged_in? to return true, got false
     # ./spec/controllers/sessions_controller_spec.rb:54:in `block (4 levels) in <top (required)>' 
```

由于某种原因，规范不断失败。谁能给我解释一下为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:13:52.370

您的控制器使用电子邮件作为用户名和密码，这看起来像是复制和粘贴错误。那是对的吗？

# vim - ZSH - 在 Vim / MacVim 中正确的 Shell 输入/输出

> ID：12942781
> 
> 赞同：8
> 
> 时间：2012-10-17T20:24:43.233
> 
> 标签：vim, zsh, macvim

这个问题是关于在*Mac OS X上使用**MacVim*和*ZSH*的。

 *我正在使用 ZSH shell，它被配置为使用彩色提示，并且一切都与 ZSH 本身配合得很好。

但是，当我使用 Vim (usin: ) 将此 shell 设置为我的默认值时`set shell=zsh\ -li`，vim 在输入或输出文本时会给我以下符号：

```
[35mnikhgupta[00m at [[33mMacbookPro[00m in [01;32m~[00m [00m 
```

虽然它应该简单地说：

```
nikhgupta at MacbookPro in ~ 
```

当我输入一些文本时，我得到相同的奇怪符号，可能是因为我正在为我的 ZSH shell 使用动态语法突出显示。我推断这些符号是颜色代码？

有人可以帮助我如何丢弃这些颜色代码并在 Vim shell 中简单地输出文本吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:18:07.310

`:shell`从 MacVim执行时， 的值`$TERM`设置为`dumb`. 您可以使用它来相应地设置您的 ZSH 环境。

不过，我不熟悉`zsh`，因此您将自己编写正确的条件块。在`bash`中，它看起来像这样：

```
if [ $TERM == 'dumb' ];
  then
    echo 'Special setup for MacVim'
fi 
```

实际上，这个问题困扰了我一段时间，所以我只是写了这个供我自己使用（in `bash`）：

```
if [ $TERM == 'dumb' ];
  then
    # no colors
    export PS1="\n\w\n\u $ "
  else
    # colors
    export PS1="\n\[\033[32m\]\w\n\[\033[1;31m\]\[\033[1;36m\]\u\[\033[0m\] $ \[\033[0m\]"
fi 
```*

# maven - “mvn clean generate-sources”无法解析依赖关系

> ID：12942782
> 
> 赞同：3
> 
> 时间：2012-10-17T20:24:43.823
> 
> 标签：maven

那里

我遇到了一个奇怪的问题。我有一个用 Maven 构建的多模块企业项目。我像这样设置项目层次结构

```
parentPom
   --MyEar (packaging ear)
   --MyUtilJar (packaging jar)
   --MyEJB (packing ejb)
   --MyWeb (packaging war) 
```

在 MyEJB 项目中，`pom.xml`实际上是将 apt 插件绑定到 generate-sources 阶段以生成一些 java 代码。MyEJB 依赖于 MyUtilJar 项目。

我的问题是，当我执行 mvn clean compile 时，一切正常。但是，如果我改为执行 mvn clean generate-sources ，它会抛出错误，抱怨它无法解决 artifact 的依赖关系`mygroup:MyUtilJar:jar:1.0`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:26:58.820

为了使生成源工作，您需要在存储库中拥有所有依赖项 - 您的本地依赖项或远程依赖项。仅将依赖项放在需要它的文件夹附近是行不通的。

尝试构建和安装 until 将其放入本地存储库，然后运行 ​​generate-sources。

# ios - 在 iPhone 和 Android 应用程序上实施密码重置方法？

> ID：12942791
> 
> 赞同：0
> 
> 时间：2012-10-17T20:25:12.123
> 
> 标签：ios

我无法找到一种方法为用户提供我的应用程序的重置密码方法。

与这个[问题](https://stackoverflow.com/q/6500214/945831)不同，我不想在本地管理它，而是更喜欢通过某种与我的服务器的连接来验证用户。

我应该通过电子邮件验证用户吗？通过向他发送包含以下密钥的链接：

```
http://www.myweb.com/inc/mobile/activate.php?email=pepe%40hotmail.com&key=252b6a8e98b8109cda4f53500a419b62 
```

我不确定如何在不使用任何 webView 的情况下完成这项工作。

或者也许最好的方法是通过电子邮件向他们发送一个指向他们可以重置密码的网站的链接（如在 Path 中）。

拜托，有人能指出我正确的方向吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:13:13.733

最安全的方法是让您的应用与网站联系，并让您的网站向用户发送一封包含密码重置链接的电子邮件。在您的应用程序中提供一个 GUI 告诉用户检查他的电子邮件以获取密码重置说明似乎相当普遍。

这样，如果冒名顶替者可以访问应用程序，他可能无法访问电子邮件或可能不知道您网站的凭据。

您的 GUI 可以本地完成，也可以使用 webView 完成。我不确定您为什么无论如何都试图避免使用 webView，但这不是必需的。

# jquery - 编写此 jQuery 选择器的更好方法

> ID：12942792
> 
> 赞同：1
> 
> 时间：2012-10-17T20:25:22.897
> 
> 标签：jquery, selector

编写这个 jQuery 选择器的更好方法是什么：

```
// this is called when .nextButton is invoked.
$(this).parent('.question').children('.options').children('.options > li').children('.selected').parent('li').attr('id')); 
```

HTML：

```
 <div class="question" id="question1">
      <p>What is your age:</p>
      <ul class="options question1Options">
        <li id="q1-1"><div class="radio"></div>10-20.</li>
        <li id="q1-2"><div class="radio"></div>21-30.</li>
        <li id="q1-3"><div class="radio"></div>31-40.</li>
      </ul>
      <div class="nextButton"></div>
    </div> 
```

当用户单击其中一个 li 时，它将添加一个选定的类（如单选按钮，只选择一个）。我正在尝试获取所选收音机/li 的 id。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:29:40.777

试试这个

```
$(this).closest('div.question').find('.radio.selected').closest('li').attr('id'); 
```

[小提琴](http://jsfiddle.net/sushanth009/Eee6t/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:27:51.847

减少代码：

```
$(this).siblings('.options').find('.selected').parent('li').attr('id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:40:40.783

如果我正确理解您的意图：

```
$('.radio').on('click',function(e) {
    $(this).closest('li').toggleClass('selected').siblings().removeClass('selected');
}); 
```

[http://jsfiddle.net/mblase75/edKM6/](http://jsfiddle.net/mblase75/edKM6/)

# javascript - 将纯字符串日期转换为所需格式以及两个日期之间的差异

> ID：12942801
> 
> 赞同：0
> 
> 时间：2012-10-17T20:26:02.777
> 
> 标签：javascript

我从 XML 获取日期，但日期是纯字符串格式。我想创建与今天的日期和时间以及我从 xml 获得的日期和时间的差异。

例如，我以这种格式 (2012-10-17T08:15:19.500-05:00) 将日期作为纯字符串获取。现在，当我与当前日期和时间相比时，我需要显示类似“2:hr”的内容,32 分钟”。

任何帮助/建议都是很好的输入。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:32:30.450

这应该有效：

```
var myDate = new Date( '2012-10-17T08:15:19.500-05:00' ),
    newDate = new Date(); 
```

解析日期时，浏览器结果可能会有所不同。我在[这里有一个测试小提琴](http://jsfiddle.net/kboucher/MgdQa/)。

获取日期之间的差异：`var diff = myDate - newDate;`并将其转换回有用的东西：[将以秒为单位的时间间隔转换为更易于阅读的形式](https://stackoverflow.com/questions/8211744/convert-milliseconds-or-seconds-into-human-readable-form)

# javascript - jQuery .on / .off 事件处理、顺序和正确删除

> ID：12942803
> 
> 赞同：2
> 
> 时间：2012-10-17T20:26:07.083
> 
> 标签：javascript, javascript-events, jquery

**jsFiddle：http: [//jsfiddle.net/fThMa/2/](http://jsfiddle.net/fThMa/2/)**

在注释/渲染文本字段内单击，然后双击下面的 4 个 TD 中的任何一个，将适当的 HTML 实体插入注释/渲染文本字段，甚至删除突出显示的文本并插入到当前光标位置。

应该发生的是：单击注释，然后双击一个实体，然后再次双击一个实体。结果应该是 1 个实体插入到光标所在的注释文本字段中，并且进一步的双击事件停止。

问题是，如果有人在没有 dblclick 实体 TD 的情况下单击注释/渲染文本字段之外，则永远不会删除该 dblclick 事件处理程序。只有在他们双击一个实体并插入该实体之前，才会删除 dblclick 事件处理程序。

另一个错误是，每次 note/rend 获得焦点时，都会创建并附加一个新的事件处理程序，因此如果我多次单击 note/rend 然后双击一个实体，则每次我最初单击时都会插入该实体注意/撕裂。

让它只触发一次并且只创建一个事件处理程序的最佳方法是什么？

将 .off 移到 .on 之外会在 .on 设置后立即删除它，绝不会让 .on 中的函数运行。

```
(function ($, undefined) {
        $.fn.getText = function() {
            var elem = $(this).get(0);
            var posStart = 0;

            if('selectionStart' in elem) {
                if (elem.selectionStart > elem.selectionEnd) {
                    posEnd = elem.selectionStart;
                    posStart = elem.selectionEnd;
                } else {
                    posEnd = elem.selectionEnd;
                    posStart = elem.selectionStart;
                }
                if (posStart != posEnd) {
                    $(elem).val($(elem).val().substring(0, posStart) + $(elem).val().substring(posEnd));
                }
            }
            return posStart;
        }
    })(jQuery);

    $(document).ready(function() {
        $("#attributes table tr td").on("blur", "input", function(event) {
            var elem = $(this);
            $("#entities table").one("dblclick", "tr", function(event) {
                var cursorPos = $(elem).getText();
                var entity = $(this).children(":first").children(":first").val();
                var beg = $(elem).val().substring(0, cursorPos);
                var end = $(elem).val().substring(cursorPos);
                $(elem).val(beg + entity + end);
                $("#entities table").off("dblclick", "tr");
            });
        });
    });​

<div id="attributes">
  <table>
    <form>
      <tr>
        <td><p>note</p></td>
        <td><input id="note" name="note" type="text" value="note"></td>
      </tr>
    </form>
    <form>
      <tr>
        <td><p>rend</p></td>
        <td><input id="rent" name="rend" type="text" value="rend"></td>
      </tr>
    </form>
  </table>
</div>
<div id="entities">
  <table>
    <form>
      <tr>
        <td><input id="ent1-val" hidden="true" type="text" value="&amp;lt;"></td>
        <td><input id="ent1-vis" type="text" value="<"></td>
        <td><input id="ent1-name" type="text" value="Less Than"></td>
      </tr>
    </form>
    <form>
      <tr>
        <td><input id="ent2-val" hidden="true" type="text" value="&amp;gt;"></td>
        <td><input id="ent2-vis" type="text" value=">"></td>
        <td><input id="ent2-name" type="text" value="Greater Than"></td>
      <tr>
    </form>
  </table>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:49:19.727

我建议在触发绑定它的事件时取消绑定该事件，防止双击事件被绑定两次。您可能还想在 n 秒后取消绑定，或者可能在单击页面上的其他位置之后取消绑定。

```
$("#entities table").off("dblclick","tr")
                    .on("dblclick", "tr",
                           function() {
                               //do stuff 
                           }); 
```

# python - 从非常大的文件中删除稀有词

> ID：12942806
> 
> 赞同：1
> 
> 时间：2012-10-17T20:26:10.093
> 
> 标签：python, linux, file, unix, words

给定一个非常大的文本文件，我想删除文件中只出现一次的所有单词。有什么简单有效的方法吗？

此致，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:33:29.553

您必须通过文件执行 2 次：

在通道 1 中：

*   使用单词作为键并将它们的出现作为值来构建字典（即每次阅读一个单词时，将其在字典中的值加 1）
*   然后预处理列表以删除所有值大于 1 的键。这现在是您的“黑名单”

在通道 2 中：

*   再次通读文件并删除黑名单中匹配的任何单词。

运行：

*   两遍中读取文件的线性时间。
*   将每个单词添加到字典中需要 O(1) 时间/在 pass 1 中增加其值。
*   将字典预处理到黑名单需要 O(n)。
*   在第 2 遍中查找黑名单需要 O(1)。

O(n) 复杂度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:03:34.610

2 passes through the file are definitely necessary. However, if the rare words are truly rare then you can skip tokenizing large sections of the file on the second pass. First do a word by word pass through the file and build a dictionary that contains the found location for words encountered once or a placeholder value for words encountered twice.

```
MULTI_WORD = -1
word_locations = {}

for pos, word in tokenize(input_file):
    if word not in word_locations:
        word_locations[word] = pos
    else:
        word_locations[word] = MULTI_WORD 
```

Then you can filter out the positions where you need to do edits and do a plain copy on the rest:

```
edit_points = [(pos, len(word)) for word, pos in word_locations.iteritems()
                                if pos != MULTI_WORD]

start_pos = 0
for end_pos, edit_length in edit_points:
    input_file.seek(start_pos)
    output_file.write(input_file.read(end_pos - start_pos))
    start_pos = end_pos + edit_length
input_file.seek(start_pos)
output_file.write(input_file.read()) 
```

You might want a couple of more optimizations, like a block wise copy procedure to save on memory overhead and special case for no edit points.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:28:24.667

如果没有具体的代码可以参考，很难知道，但是一个好的起点可能是[Python 的自然语言工具包](http://nltk.org/)。

# objective-c - 谁知道为什么iOS Simulator Retina 4英寸会出现黑区？

> ID：12942809
> 
> 赞同：0
> 
> 时间：2012-10-17T20:26:20.353
> 
> 标签：objective-c

当我在 iOS 模拟器 Retina 3.5 英寸中进行测试时，它运行良好。但在 Retina 4 英寸时，会出现如下图所示的黑色区域。

我不知道这个原因...

你能给我一些想法吗？

以下是 AppDelegate.h & m

```
#import <UIKit/UIKit.h>
#import "MenuViewCon.h"

@class TestViewCon;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) TestViewCon *viewController;

@end

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[TestViewCon alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];

    } else {
        self.viewController = [[[TestViewCon alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    }

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

接下来是TestViewCon.h & m

```
#import <Foundation/Foundation.h>
@interface TestViewCon : UIViewController
@end

#import "TestViewCon.h"    
@implementation TestViewCon {
}

- (void)viewDidLoad {
    UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 100)] autorelease];
    label.text = @"Retina 4 inch testing";
    [label sizeToFit];
    [self.view addSubview:label];
}
@end 
```

![在此处输入图像描述](../Images/3079a5f9cd40b1aad19644b62d09b7a7.png) ![在此处输入图像描述](../Images/72920a99be376e2cbb05869ff5b57989.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:29:05.583

这是因为您的应用程序以信箱方式运行。
看来，您的项目中不支持 iphone 5。

为此，您需要在项目中添加一个 Default-568h@2x.png 图像并将其设置为 iPhone 5 的启动图像。

# c# - 使用 ffmpeg-Sharp 时出错

> ID：12942811
> 
> 赞同：1
> 
> 时间：2012-10-17T20:26:35.223
> 
> 标签：c#, ffmpeg

为什么这段代码会抛出一个**`MarshalDirectiveException`**？
Obs：我正在使用[ffmpeg-Sharp](http://code.google.com/p/ffmpeg-sharp/)

> 无法封送“返回值”：指针无法引用封送的结构。请改用 ByRef。

```
class Program
{
    unsafe static void Main(string[] args)
    {
        AVCodecContext* ctx = 
                 FFmpeg.avcodec_alloc_context();
    }
} 
```

# php - 将 JSON 中的信息编组到 MVC 模型类中

> ID：12942815
> 
> 赞同：0
> 
> 时间：2012-10-17T20:26:52.773
> 
> 标签：php, json, model-view-controller, kohana

> **可能重复：**
> [PHP MVC - 将 JSON 转换为模型数据](https://stackoverflow.com/questions/12902971/php-mvc-convert-json-to-model-data)

有没有一种简单的方法可以使用普通 PHP、PHP 库或 Kohana 轻松地将 json 编码对象中的信息编组到 Kohana MVC 模型对象中？json_encoded 对象与模型对象具有相同的字段，但没有任何功能。有没有一种普遍接受的方法来避免这种愚蠢的舞蹈？

感觉就像我一直在编写代码以使用以下代码移动数据：

```
$array = json_decode(returnsObject());
$model = Model::factory("model");
$model->field1 = $array['field1'];
$model->field2 = $array['field2'];
..... 
```

现在显然我有这个方法，但似乎没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:43:36.007

这是简单的方法。

MVC 设计模式中的控制器**只**负责从用户请求中提取数据并将其传递给模型层和当前视图。您的代码示例实际上是控制器操作的几乎可以接受的实现......当然，如果您忽略工厂方法反模式并将[域对象](http://c2.com/cgi/wiki?DomainObject)称为“模型”。

您可以扩展[`Request`](https://github.com/kohana/core/blob/3.2/master/classes/kohana/request.php)类并在返回之前添加从 JSON 字符串中提取数据的方法，但这会违反[*单一责任原则*](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

# c# - 读取文本文件后重写

> ID：12942818
> 
> 赞同：2
> 
> 时间：2012-10-17T20:27:09.653
> 
> 标签：c#, text, text-files

我有一个文件存储在我的应用程序目录中，他有一些站点列表。我读它没有任何问题，但是当我想写它时，我得到了

```
System.ArgumentException: Stream is not writeable 
```

这就是我访问文件的方式：

```
 FileStream theTextFileStream = new FileStream(Environment.CurrentDirectory + "/fourmlinks.txt",FileMode.OpenOrCreate); 
```

这是让我期待的功能：

```
public static void WriteNewTextToFile(string text, FileStream theFile)
    {
        string fileText = GetAllTextFromFile(theFile);
        ArrayList fileLIst = populateListFromText(fileText);

        using (StreamWriter fileWriter = new StreamWriter(theFile))
        {
            fileWriter.Write(String.Empty);
            for (int i = 0; i < fileLIst.Count; i++)
            {
                fileWriter.WriteLine(fileLIst[i].ToString());        
            }
        }
    } 
```

该函数读取旧文本和新文本并将其添加到数组中。然后我从所有东西中清除文件，并用我制作的 arry 中的新旧数据重写它。

我不知道这是否会有所帮助，但这是文件属性：

```
Build Action: None
Copy To Out Put Directory: Copy always 
```

为什么我不能重写文件？

这是我用来读取文件内容的函数：

```
public static string GetAllTextFromFile(FileStream theFile)
    {
        string fileText = "";

        using (theFile)
        {
            using (StreamReader stream = new StreamReader(theFile))
            {
                string currentLine = "";
                while ((currentLine = stream.ReadLine()) != null)
                {
                    fileText += currentLine + "\n";
                }

            }
        }

        return fileText;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:42:29.380

您必须使用读/写文件访问作为`third`参数 -

```
FileStream theTextFileStream = new FileStream(Environment.CurrentDirectory + "/fourmlinks.txt",FileMode.OpenOrCreate, FileAccess.ReadWrite
); 
```

重要 - 删除`using(theFile)`声明：

```
public static string GetAllTextFromFile(FileStream theFile)
{
        string fileText = "";

        using (StreamReader stream = new StreamReader(theFile))
        {
            string currentLine = "";
            while ((currentLine = stream.ReadLine()) != null)
            {
                fileText += currentLine + "\n";
            }

        }

    return fileText;

} 
```

不要`using`在您的情况下使用构造，因为它会关闭基础流，因为在您的情况下您必须手动`open`和`close` `stream`对象。

这也将允许您写入文件。

有关更多信息，请参阅以下链接 -

*   [文件流构造函数](http://msdn.microsoft.com/en-us/library/tyhc0kft.aspx)
*   [文件访问枚举](http://msdn.microsoft.com/en-us/library/4z36sx0f.aspx)

# c# - 向 TextBlock 显示类属性

> ID：12942821
> 
> 赞同：0
> 
> 时间：2012-10-17T20:27:17.800
> 
> 标签：c#, xaml, microsoft-metro

我有一个名为 UserIdentity 的类

```
class UserIdentity
{
    public string Name {get; set;}
    public string Gender {get; set;}
    public string Age {get; set;}
    public string Department {get;set;}

} 
```

我试图有一个按钮来保存用户数据，

```
 private void UserID_Save_Click(object sender, RoutedEventArgs e)
    {
        UserIdentity user = new UserIdentity()
        {
            Name = textUserName.Text,
            Age = textUserAge.Text,
            Gender = textUserGender.Text,
            Department = textUserDepartment.Text

        };
    } 
```

当我直接从文本框表单显示用户数据时，它工作得很好，

```
 private void ShowUser_Click(object sender, RoutedEventArgs e)
    {

        DisplayName.Text = textUserName.Text,
        DisplayAge.Text = textUserAge.Text,
        DisplayGender.Text = textUserGender.Text,
        DisplayDepartment.Text = textUserDepartment.Text,

    } 
```

但我试图显示来自对象的用户数据，但它给了我“名称'用户'在当前上下文中不存在”

```
 private void ShowUser_Click(object sender, RoutedEventArgs e)
    {

        DisplayName.Text = user.Name;
        DisplayAge.Text = user.Age;
        DisplayGender.Text =  user.Gender;
        DisplayDepartment.Text =  user.Department;

    } 
```

这也不起作用

```
 private void ShowUser_Click(object sender, RoutedEventArgs e)
    {

        DisplayName.Text = UserIdentity.Name;
        DisplayAge.Text = UserIdentity.Age;
        DisplayGender.Text =  UserIdentity.Gender;
        DisplayDepartment.Text =  UserIdentity.Department;

    } 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:31:24.587

将用户带到全局：

```
 UserIdentity user;
private void UserID_Save_Click(object sender, RoutedEventArgs e)
    {
        user = new UserIdentity()
        {
            Name = textUserName.Text,
            Age = textUserAge.Text,
            Gender = textUserGender.Text,
            Department = textUserDepartment.Text

        };
    } 
```

# javascript - 停止一个 Jquery/Javascript 计时器

> ID：12942824
> 
> 赞同：0
> 
> 时间：2012-10-17T20:27:21.780
> 
> 标签：javascript, jquery

我知道这不会那么困难，但我发誓我找不到直接的答案。我有以下启动计时器的 javascript/jquery 函数：

```
function startTimer() { (function ($) {
    //timer for the box
    window.timer = window.setInterval(function() {
       $(".region-brand-window").timer();
    }, 10000);

    jQuery.fn.timer = function() {
       changeBrandOnTimer();
    }
})(jQuery); } 
```

我该如何阻止这件事？我不是说暂停。我的意思是从另一个功能关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:29:21.493

```
clearInterval(window.timer); 
```

应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:29:34.827

要取消间隔，您可以使用：

```
clearInterval(window.timer); 
```

仅供参考，如果是超时，您将以`clearTimeout()`相同的方式使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:29:25.363

使用[window.clearInterval(intervalID)](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)

```
window.clearInterval(window.timer) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T20:31:24.310

每当您想停止计时器时，请调用 stopTimer。

```
 function startTimer() { (function ($) {
        //timer for the box
        window.timer = window.setInterval(function() {
           $(".region-brand-window").timer();
        }, 10000);

        jQuery.fn.timer = function() {
           changeBrandOnTimer();
        }
    })(jQuery); } 

   function stopTimer(){
           clearInterval(timer );
   } 
```

# php - Linux PDF to HTML + Image Map + jpeg 图像文件

> ID：12942827
> 
> 赞同：0
> 
> 时间：2012-10-17T20:27:29.087
> 
> 标签：php, html, linux, pdf, jpeg

我想要的是一种使用图像映射（超链接）将 PDF 文件解析为 HTML 的方法，并且图像必须为 jpg 格式。

我有一个杂志阅读器，我需要每个超链接的图像和位置、href 和大小。

解决方案需要运行到 linux 服务器上。

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:35:44.100

您应该查看[pdf2html 项目](http://pdftohtml.sourceforge.net/)或[pdf2htmlEX](https://github.com/coolwanglu/pdf2htmlEX)。

这也需要一些调整才能将 png 转换为 jpg。

这很简单：

```
convert foo.png foo.jpg 
```

使用 ImageMagick 工具。

请参阅[自述文件](ftp://atrey.karlin.mff.cuni.cz/pub/local/clock/pdf2html/pdf2html-1.4/README)。

# asp.net - ASPxClientListBox 丢失值，无法选择第一项

> ID：12942828
> 
> 赞同：1
> 
> 时间：2012-10-17T20:27:30.257
> 
> 标签：asp.net, c#-4.0, callback, devexpress, servercontrols

在服务器控件上，我有一个在客户端上动态填充的 DevExpress [ASPxClientListBox](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsScriptsASPxClientListBoxMembersTopicAll)。服务器不需要知道任何关于它的信息，但它是在服务器上初始化的。通常这个服务器控件没有任何问题......但是，如果我将它放在 ASPxCallbackPanel 中，它将在第一个页面加载时工作，但是，在回调之后，如果 ListBox 的客户端选择索引更改事件被触发，则所选项目尽管键或“文本”完好无损，但值会丢失并且“未定义”。

附带说明...回调后无法选择 ListBox 中的第一项...我的意思是第一项在鼠标悬停或鼠标单击时未突出显示。

稍微相关但不是我需要的链接：

[http://www.devexpress.com/Support/Center/p/Q312536.aspx](http://www.devexpress.com/Support/Center/p/Q312536.aspx)

我有另一个链接谈到“无法选择第一项”问题，并说它与在建立控制层次结构之前添加项目有关，因此解决方案是在 ListBox 客户端 Init 事件中添加项目与 page_load 事件相反。我在初始化 ListBox 之后添加项目，所以我不认为这是一个解决方案......而且我现在无论如何都找不到链接......

编辑：我刚刚再次找到其他链接：http: [//www.devexpress.com/Support/Center/p/Q367021.aspx](http://www.devexpress.com/Support/Center/p/Q367021.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T07:27:54.483

您提供的第二个链接解决了部分问题。发生的事情是……

> ...加载页面时立即调用此函数。但是，ASPxListBox 层次结构还没有准备好。调用getList函数的正确方法是处理ASPxClientListBox事件...

长话短说，如果您在加载时运行类似以下的内容，将无法正确执行...

```
yourListbox.AddItem("Test1"); 
yourListbox.AddItem("Test2"); 
yourListbox.AddItem("Test3"); 
yourListbox.AddItem("Test4"); 
```

...但以下应该工作...

```
s.Properties.ClientSideEvents.Init = 
@"function(s, e) { yourListbox.AddItem('Test1'); yourListbox.AddItem('Test2'); yourListbox.AddItem('Test3'); yourListbox.AddItem('Test4'); }"; 
```

我猜第一个选定项目问题可能是出于相同或相似的原因而发生的。

# php - 来自多个数组的 PHP 表单组结果

> ID：12942835
> 
> 赞同：2
> 
> 时间：2012-10-17T20:28:00.747
> 
> 标签：php, arrays

我有一个 php 表单，允许用户添加三个字段（已安装项目、描述和数量）的多个副本。每个字段的结果都被捕获在一个数组中。

我正在通过电子邮件表格发送结果。目前我将其设置为以下内容：

```
$email_body = "Date: $date \n".
   "Installed Items: \n" . implode("\n", $_POST['installed']) . "\n" .
   "Installed Description: \n" . implode("\n", $_POST['installed-description']) . "\n" .
   "Installed Quantity: \n" . implode("\n", $_POST['installed-quantity']) . "\n"; 
```

它在电子邮件中显示如下：

已安装项目：

```
Item 1
Item 2
Item 3 
```

安装说明：

```
Description 1
Description 2
Description 3 
```

安装数量：

```
Quantity 1
Quantity 2
Quantity 3 
```

我希望它显示如下：

```
Item 1
Description 1
Quantity 1

Item 2
Description 2
Quantity 2

etc... 
```

任何帮助将不胜感激（而且，我对 PHP 很陌生，所以请原谅这个问题的菜鸟）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:38:31.910

在这种情况下，我建议使用`for`循环：

```
for($i = 0; $i < COUNT($_POST['installed']);$i++)
{
   $msg .= 'Item '.$i.'\n';
   $msg .=  $_POST['installed'][$i].'\n';
   $msg .=  $_POST['installed-description'][$i].'\n';
   $msg .=  $_POST['installed-quantity'][$i].'\n';
   $msg .= '\n'; //extra space between the items
} 
```

# ruby-on-rails - RubyOnRails：如何在 Rails 控制台中使用辅助方法？

> ID：12942836
> 
> 赞同：8
> 
> 时间：2012-10-17T20:28:03.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, irb, actionviewhelper

我的设置可能有问题：

```
irb(main):001:0> truncate("Once upon a time in a world far far away", :length => 17)
NoMethodError: undefined method `truncate' for main:Object
        from (irb):1
        from /usr/lib64/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
        from /usr/lib64/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
        from /usr/lib64/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

看起来我不能使用任何文本助手（在 irb 和 rails 控制台中）。

我应该检查什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T20:31:18.113

`helper`Rails 控制台通过变量公开辅助方法。因此，请改用这个：

```
helper.truncate("Once upon a time in a world far far away", :length => 17) 
```

更多信息，请阅读[37signals.com 上的这篇文章](http://37signals.com/svn/posts/3176-three-quick-rails-console-tips)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-09T15:31:57.203

在 Rails 控制台中输入以下行

`include ActionView::Helpers`

现在您的助手可以在整个 Rails 控制台会话期间访问，您可以继续...</p>

`truncate("Once upon a time in a world far far away", :length => 17)`

# android - 安卓键盘锁

> ID：12942844
> 
> 赞同：4
> 
> 时间：2012-10-17T20:28:46.773
> 
> 标签：android, keyguardlock

我正在开发一个应用程序，它将替换 android 设备的默认锁定屏幕（滑动解锁）。我已通过禁用键盘保护管理器并使用广播接收器显示我的活动来成功完成此操作，以实现屏幕关闭和屏幕开启意图。现在，问题是当我出于任何原因再次设置默认屏幕锁定时，我的应用程序不会禁用键盘保护，除非我强制关闭它并再次启动它。

```
 km = (KeyguardManager) getApplicationContext().getSystemService(Context.KEYGUARD_SERVICE);
      if( km.inKeyguardRestrictedInputMode()) {
       //it is locked
          km = (KeyguardManager) getApplicationContext().getSystemService(KEYGUARD_SERVICE);
      kl=km.newKeyguardLock("com.example.helloworld.MainActivity");
      kl.disableKeyguard();
      } else {
          Intent i = getIntent();
          i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
          getApplicationContext().startActivity(i);
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:39:29.410

您不能用用户应用程序替换锁定屏幕。您所做的任何事情都是 hack，可能会或可能不会在某些设备上运行，并且可能会随着新版本的发布而中断。您可以创建一些看起来像屏幕锁定的东西，但它不会像屏幕锁定一样工作。此外，在最新版本的 Android（后 ICS）中，解锁屏幕会做一些额外的事情，比如解锁凭证存储，这是您的应用不可能做到的（因为它没有系统权限）。

如果你真的想更换屏幕锁定，你需要构建自己的Android ROM，修改/更换库存的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-08T15:49:50.470

接受的答案可能已过时。

*   现在可以使用[设备管理员](http://developer.android.com/guide/topics/admin/device-admin.html)来创建和删除设备密码。
*   [可以使用FLAG_SHOW_WHEN_LOCKED](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED)将应用程序放置*在*当前锁定屏幕上方（[另一个答案](https://stackoverflow.com/questions/3629179/android-activity-over-default-lock-screen/5727133#5727133)中的完整说明）
*   可以使用[FLAG_DISMISS_KEYGUARD解除键盘保护](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_DISMISS_KEYGUARD)

因此，理论上可以使用应用程序生成的密码（提供真正的安全性）来保护实际的锁屏，在 android 锁屏上方浮动自定义锁屏，并且 - 当提供正确的密码时 - 解锁和关闭真正的锁屏。最后，您将使用接收器来恢复或清除相关事件（如 SCREEN_OFF 或 SCREEN_ON）的密码——如果尚未达到超时，后者可以自动清除密码。

**FWIW，我不推荐这种方法，因为崩溃或卸载会使用户的设备被他们不知道的密码锁定。**

# c - 如何在 C (unix) 中读取 mp3 文件标签？

> ID：12942845
> 
> 赞同：1
> 
> 时间：2012-10-17T20:28:49.727
> 
> 标签：c, unix, mp3

我想从 mp3 文件中读取 mp3 标签：D 并将其保存到 txt 文件中。但是我的代码不起作用:(我的意思是我在我的 mp3 文件中设置正确位置时遇到了一些问题，请看一下:(为什么它不想工作？)。我必须自己做，没有额外的库。

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/types.h>

int getFileSize(const char *filename)
{
    struct stat st;
    if (stat(filename, &st) == 0)
        return st.st_size;
    return -1;
}

int main(int argc, char **argv)
{
    char *infile = "in.mp3", *outfile = "out.txt";
    int infd, bytes_read = 0, buffsize = 255;
    char buffer[255];

                infd = open(infile, O_RDONLY);
                if (infd == -1)
                    return -1;

                int outfd = open(outfile, O_WRONLY | O_TRUNC, S_IRUSR | S_IWUSR);
                if (outfd == -1)
                    return -1;

                    if(lseek(infd, -128, SEEK_END) < 0)
                        return -1;

                for(;;)
                {
                    bytes_read = read(infd, buffer, buffsize);
                    if (bytes_read > 0)
                    {
                        write(outfd, buffer, bytes_read);

                    }
                    else
                    {
                        if (bytes_read == 0)
                        {
                            if (close(infd) < 0)
                                return -1;
                            break;
                        }
                        else if (bytes_read == -1)
                        {
                            break;
                            return -1;
                        }
                    }
                }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:09:18.433

解决此问题的一种方法：

您需要根据您使用的 ID3 版本扫描文件（问题没有指定 Steven 指出的特定版本），找到整个标签或标签头并从那里解码。

对于**ID3v2**，标头序列为 10 字节，如下所示（来自 ID3v2 规范）：

```
 ID3v2/file identifier      "ID3"
 ID3v2 version              $04 00
 ID3v2 flags                %abcd0000
 ID3v2 size             4 * %0xxxxxxx 
```

我的建议是，在[这里](http://id3.org/id3v2.4.0-structure)查看 ID3v2 的规范。检查第 3.1 章，因为部分工作正在进行背景研究。

对于**ID3v1 ，请**[在此处](http://id3.org/ID3v1)查看概述规范。解码该信息非常容易，并且完全按照您对问题的评论中的说明进行操作。查看您的代码，这可能是您想要做的（在文件末尾跳转到 128 个字节并从那里开始读取）。

在将解码器扔给它之前，请确保您有一个正确标记的文件并确定您使用的标记版本。

# git - 尝试在 Git 中设置 SVN 存储库

> ID：12942856
> 
> 赞同：5
> 
> 时间：2012-10-17T20:29:23.887
> 
> 标签：git, svn, repository

我们正在测试使用 git 作为存储库系统，而不是我们的普通 svn。我们总是需要一个 svn 存储库。在 svn 中，我们将此存储库与 svn propset 链接为 svn:externals。这确保了该特定的、大量使用的存储库实际上只有一个全局副本。

现在我们有了 git 存储库，我想以与使用 svn:externals 基本相同的方式将 SVN 存储库链接到它。我在某种程度上成功地做到了这一点。我是git新手，请原谅任何无知。

在纯 git repo（我通过 克隆`git clone gitmaster@address.org:mygitrepo`）中，我使用了：

```
git svn clone svn+ssh://svnowner@hostname.org/path/to/mysvnrepo mysvnrepo 
```

获取另一个 svn 存储库的副本。这很好用，我可以`git svn rebase`在 mysvnrepo 目录中获得对 SVN 存储库的新修订，并通过`git svn dcommit`.

要将它与我使用的主 git 存储库结合起来：

```
git add mysvnrepo
git commit mysvnrepo
git push 
```

我遇到的问题是，如果我现在将 git repo 克隆到其他地方（再次使用`git clone gitmaster@address.org:mygitrepo`），当我获得包含所有文件的 mysvnrepo 目录时，我无法与 SVN repo 交互。在 git svn rebase 之后出现错误：“无法从工作树历史记录中确定上游 SVN 信息”。可能相关的是，当我在别处克隆它时，mysvnrepo 目录中没有 .git 文件夹（这是 svn 信息存储在原始仓库中的位置）。

我已经对这个问题进行了一些搜索，但是所有对它的引用似乎首先让 svn repo 工作有问题，而我的问题是让它为另一个用户工作。

也许我的问题是如何成功地将 svn 存储库添加/提交/推送到 git 存储库？即是：`git add mysvnrepo; git commit mysvnrepot; git push`; 正确的方法是什么？

编辑：改进以提供更多上下文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:46:39.387

看起来您正在尝试做的是将一个 git 存储库包含在另一个存储库中，就像使用`svn:externals`. 恰好是包含的存储库是用`git svn`;创建的。这不会真正影响您如何将该存储库包含在另一个存储库中。

您需要将要包含在其他地方的 git 存储库公开可用。然后，您可以使用[git submodule](http://git-scm.com/book/en/Git-Tools-Submodules)或[git subtree](http://apenwarr.ca/log/?m=200904#30)包含它。两者都不完全一样`svn:externals`；`git subtree`但是，对于 git 存储库的其他用户来说，可能对初学者更友好。

根据您使用的语言和软件是什么，您还可以考虑简单地为频繁使用的存储库创建一个单独的 git 存储库，并将其构建为自己的独立库、jar 文件或您拥有的文件。

仅当您计划完全切换到 git 时，上述方法才有效。如果您的某些团队打算继续在 SVN 中工作一段时间，`git substree`或者`git submodule`不会为您工作。

相反，请查看[这个问题](https://stackoverflow.com/questions/350651/how-do-i-keep-an-svnexternal-up-to-date-using-git-svn)以模拟 svn:externals with `git svn`。

[要为每个人设置 git 使用，请按照git svn](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)手册页中“基本示例”下的最后一个示例进行操作。然后每个人都可以在`git clone`本地运行一些命令，而不是执行完整的`git svn clone`.

# c# - 无法在客户端呈现 Json 字符串

> ID：12942858
> 
> 赞同：0
> 
> 时间：2012-10-17T20:29:26.970
> 
> 标签：c#, asp.net, json, jquery, json.net

ascx.cs

```
protected string BindData()
   {
    List<Product> products = product.GetRepeaterData(prod);
    string json = JsonConvert.SerializeObject(products);
     return json;
   } 
```

ascx

```
 <script type="text/javascript" language="javascript">
function doSomething() {

    $.ajax({
        type: "POST",
        url: "/ProgramListSimple.aspx/BindData",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            alert(msg);
        }
    });
 }; 
```

我看不到任何警报..我不知道 ajax 函数是否正在做它应该做的事情..此代码用于用户控制而不是在 aspx 页面上，这有关系吗？在调试时，我可以看到 json 字符串中的序列化数据。只是它没有在客户端渲染..从早上开始就开始工作，现在我需要一些帮助..任何示例或任何文档也可能有用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:31:27.207

您必须使用该`d`物业

```
alert(msg.d); 
```

如果您使用 Chrome 或 Firefox 进行调试，请使用以下命令检查 JavaScript 对象：

```
console.log("%o", msg); 
```

在 Chrome 中按`Ctrl`++`Shift`显示`J`开发者控制台

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:16:15.253

我创建了一个新的 aspx 页面。将逻辑后面的所有代码从 ascx.cs 转移到 aspx.cs。刚刚使用ajax回调从我的ascx页面调用了aspx页面的url

```
 type: "GET",
        url:'<%=VirtualPathUtility.ToAbsolute("~/ProgramListSimpledetail.aspx") %>',
        data: dataObject,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) 
```

我只是添加了一小部分修复程序，这对于它的工作非常重要，除此之外，还有很多东西被添加以使 ascx 页面继承 apsx 页面的属性....但我认为这主要是与我的代码有关...所以我希望这对将来的某人有所帮助...感谢所有尝试做出贡献的人..

# sencha-architect - 浏览器和主页图标标签的应用程序标题

> ID：12942863
> 
> 赞同：0
> 
> 时间：2012-10-17T20:29:40.730
> 
> 标签：sencha-architect

我正在使用 sencha touch 2 和 sencha 建筑师。我找不到用于更改应用程序在浏览器中显示时使用的应用程序标题或 iO 上主页图标标签的 GUI 路径。

无论如何，如果我更改 app.html 中的标题标签，sencha 架构师会使用默认标题覆盖文件。Sencha touch 2 是一个非常强大的产品，但文档对我来说有点混乱。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:19:15.540

在项目检查器中选择“应用程序”。在配置面板中更改应用程序的“名称”。

# netbeans - Jar 文件不起作用

> ID：12942864
> 
> 赞同：0
> 
> 时间：2012-10-17T20:30:06.397
> 
> 标签：netbeans, jar, java

我不确定以前是否有人问过这样的问题。我的问题是卸载旧的 32 位 JRE6 和 JDK6 并安装新的 64 JRE7 和 JDK7 后，我的 jar 文件无法正常工作。我正在使用 Netbeans 7.1。

1.  使用 Netbeans 中的“运行”按钮从 Netbeans 运行程序有效。
2.  使用命令行运行 jar 文件是可行的。
3.  使用双击运行 jar 文件不起作用。

为了避免混淆，我已经将 jar 文件设置为使用 javaw.exe 打开，我的 jar 文件过去可以通过双击来工作，现在单击 jar 文件后没有任何反应。我已经尝试过重新安装解决方案，但你可以猜到没有用。

我希望我能找到一个令人满意的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:34:27.807

你在`windows`吗？如果是，则在命令窗口中尝试以下操作：

```
start /b <jar file> 
```

我假设 jar 文件“执行”但出现错误。以上应该可以帮助您识别错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:50:57.060

我也遇到过同样的问题。当您没有清理安装最新版本的 java 并且文件关联未正确设置以反映较新的 javaw.exe 时，会发生这种情况

在您的命令提示符下键入 -

```
C:\Documents and Settings\XYZ>assoc .jar
.jar=jarfile 
```

然后将您的 jarfile 关联到 jre7 的 javaw.exe-

```
C:\Documents and Settings\XYZ>ftype jarfile="C:\Program Files\Java\jre7\bin\javaw.exe" -jar "%1" %* 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T21:11:40.543

好的问题解决了，我使用[了 jarfix](http://www.softpedia.com/progDownload/Jarfix-Download-79716.html)。

# java - 简单的 XML 序列化器无法满足元素

> ID：12942866
> 
> 赞同：5
> 
> 时间：2012-10-17T20:30:09.420
> 
> 标签：java, android, xml, parsing, serialization

我是这个简单 XML 序列化程序的新手，我想解析 IGN 新闻提要。问题是我收到以下错误：

```
Unable to satisfy @org.simpleframework.xml.Element(data=true, name=description, required=true, type=void) on field 'description' private java.lang.String org.android.entities.Channel.description for class org.android.entities.Channel at line 2 
```

xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" media="screen" href="/~d/styles/rss2full.xsl"?><?xml-stylesheet type="text/css" media="screen" href="http://feeds.ign.com/~d/styles/itemcontent.css"?><rss xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:feedburner="http://rssnamespace.org/feedburner/ext/1.0" version="2.0">
   <channel>
      <title>IGN All</title>
      <description>The latest IGN news, reviews and videos about video games, movies, TV, tech and comics</description>
      <link>http://pipes.yahoo.com/pipes/pipe.info?_id=5985e93c1e0bc73949d56890f4462756</link>
      <atom:link rel="next" href="http://pipes.yahoo.com/pipes/pipe.run?_id=5985e93c1e0bc73949d56890f4462756&amp;_render=rss&amp;page=2" />
      <pubDate>Wed, 17 Oct 2012 20:05:24 +0000</pubDate>
      <generator>http://pipes.yahoo.com/pipes/</generator>
      <atom10:link xmlns:atom10="http://www.w3.org/2005/Atom" rel="self" type="application/rss+xml" href="http://feeds.ign.com/ign/all" /><feedburner:info uri="ign/all" /><atom10:link xmlns:atom10="http://www.w3.org/2005/Atom" rel="hub" href="http://pubsubhubbub.appspot.com/" /><feedburner:feedFlare href="http://add.my.yahoo.com/rss?url=http%3A%2F%2Ffeeds.ign.com%2Fign%2Fall" src="http://us.i1.yimg.com/us.yimg.com/i/us/my/addtomyyahoo4.gif">Subscribe with My Yahoo!</feedburner:feedFlare><feedburner:feedFlare href="http://fusion.google.com/add?feedurl=http%3A%2F%2Ffeeds.ign.com%2Fign%2Fall" src="http://buttons.googlesyndication.com/fusion/add.gif">Subscribe with Google</feedburner:feedFlare><item>
         <title>Young Justice: "Before the Dawn" Review</title>
         <link>http://feeds.ign.com/~r/ign/all/~3/-l_luafUGXM/young-justice-before-the-dawn-review</link>
         <description>DC Nation has been pulled for now, but we've seen the one last episode of Young Justice that sneaked through: "Before the Dawn" reviewed!</description>
         <guid isPermaLink="false">507deab69e4e6be8947d4a79</guid>
         <pubDate>Wed, 17 Oct 2012 19:32:42 +0000</pubDate>
         <content:encoded><![CDATA[<p><strong>Full superhero sidekick spoilers follow.</strong>
</p><p>Have you heard the news, folks? <a rel="nofollow" target="_blank" href="http://www.ign.com/articles/2012/10/15/new-young-jusice-green-lantern-episodes-abruptly-pushed-to-2013">Cartoon Network abruptly pulled its DC Nation block of programming</a> -- which includes Young Justice and Green Lantern: The Animated Series -- this past weekend, leaving fans confused (and then angry) by the sudden, unexplained move. But what seems to have been an eleventh-hour decision means that the episodes that were originally scheduled to air on Saturday were still made available on iTunes for legal purchase (probably because someone forgot to pull them too). Which means we have this one last review for you before yet another Young Justice hiatus begins…
</p><p><a rel="nofollow" target="_blank" href="http://www.ign.com/articles/2012/10/17/young-justice-before-the-dawn-review">Continue reading&hellip;</a></p>]]></content:encoded>
         <media:content height="341" type="image/jpeg" url="http://oyster.ignimgs.com/wordpress/stg.ign.com/2012/10/robin_batgirl_young_justice.jpg" width="610" />
      <feedburner:origLink>http://feeds.ign.com/~r/ign/articles/~3/ts68IIyx4XI/young-justice-before-the-dawn-review</feedburner:origLink></item>
...
</channel>
</rss><!-- fe1.yql.bf1.yahoo.com compressed/chunked Wed Oct 17 20:05:23 UTC 2012 --> 
```

所以解析器说问题出在“通道”标签中的“描述”标签中。而且我真的不知道我做错了什么。这是我的频道类：

```
package org.android.entities;

import java.io.Serializable;
import java.util.List;

import org.simpleframework.xml.Element;
import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Root;

    @Root public class Channel implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = -6866019353714061968L;

    public Channel() {
        // TODO Auto-generated constructor stub
    }

    @Element
    private String title;

    @Element
    private String description;

    @Element
    private String link;

    @Element
    private String pubDate;

    @ElementList
    private List<Item> item;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    public String getPubDate() {
        return pubDate;
    }

    public void setPubDate(String pubDate) {
        this.pubDate = pubDate;
    }

    public List<Item> getNews() {
        return item;
    }

    public void setNews(List<Item> news) {
        this.item = news;
    }
} 
```

这是我执行反序列化的方法：

```
private void getFromCache() {
        Serializer serializer = new Persister();
        try {
            data = serializer.read(Channel.class, destinationFile, false);
        } catch (Exception e) {
            Log.e(TAG, e.getMessage());
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:58:37.030

现在回答我自己的问题。我玩了一点，问题就像 Nathan Villaescusa 建议忽略 RSS 标签。看起来您必须创建一个必须是 xml 文件的根元素的类（在本例中为 RSS 类，并且它只有一个称为 Channel 的元素）。我没有找到可以忽略该元素并直接跳转到频道标签的解决方案。谢谢你的帮助 ：）

# php - 从 .txt 文件中提取数据 (PHP)

> ID：12942868
> 
> 赞同：1
> 
> 时间：2012-10-17T20:30:28.267
> 
> 标签：php, parsing

使用 PHP，是否有更好的方法可以在不使用 strpos 和 substr PHP 函数的情况下从文本文件中提取适当的信息位？

我需要提取“Course xxx”、No 和 Ref

示例：主题为“课程 1....”的记录结果将是：

*   课程 1
*   8415
*   152

**示例 .txt 文件：**

```
Name: Dave
Age: 15
Subject: Course 1 (No: 8415, Ref: #152#)
Description:

Description 1

Name: John
Age: 28
Subject: Course 2 (No: 646544, Ref: #325#)
Description:

Description 1

Name: Steve
Age: 22
Subject: Course 3 (No: 545, Ref: #451#)
Description:

Description 1 
```

编辑：注意到我不需要提取所有数据，但所有数据仍将在文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:05:14.610

```
if(preg_match_all('~'.
    'Name:\\s*(?<Name>.+?)\r?\n'. // Name
    'Age:\\s*(?<Age>[0-9]+)\r?\n'. // Age
    'Subject:\\s*(?<Subject>.+?)\\s*\\('. // Subject
        'No:\\s*(?<No>[0-9]+)\\s*,'. // No
        '\\s*Ref:\\s*#(?<Ref>[0-9]+)#'. // Ref
    '\\)\r?\n'. // /Subject
    'Description:\\s*(?<Description>.+?)\r?\n'. // Description
'~si', $AccountDump, $Matches)){
    $Names = $Matches['Name'];
    $Ages = $Matches['Age'];
    $Subjects = $Matches['Subject'];
    $Nos = $Matches['No'];
    $Refs = $Matches['Ref'];
    $Descriptions = $Matches['Description'];
    $Accounts = array();
    foreach($Names as $Key => $Name){
        $Accounts[$Key] = array_map('trim', array(
            'Name'              => $Name,
            'Age'               => $Ages[$Key],
            'Subject'           => $Subjects[$Key],
            'No'                => $Nos[$Key],
            'Ref'               => $Refs[$Key],
            'Description'       => $Descriptions[$Key],
        ));
    }
    // Got them!
    var_dump($Accounts);
} 
```

在名为**$AccountDump**的变量中加载文本。

玩得开心。在您的样品上进行了测试，它可以工作。我已经拆分了 RegExp，因此您可以根据需要对其进行跟踪。

*希望它有效！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:46:58.767

您可能需要为此使用正则表达式。它会变得有点复杂，但不会像`strpos`and那样糟糕`substr`。

作为起点，这是一个匹配名称：值对的正则表达式 -

```
$matches = array();
preg_match_all('/^([^\s:]+):\s*(.+)$/m', $data, $matches);

print_r($matches); 
```

编辑：我很好奇并完成了正则表达式，这里是完整的 -

```
preg_match_all('/^([^\s:]+):\s*(.+?)(?:\s*\(([^\s:]+):\s*(.+),\s*([^\s:]+):\s*(.+)\))?$/m', $data, $matches); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:02:09.593

你可以有

```
$data = file_get_contents("log.txt");
$data = array_chunk(array_filter(array_map("trim",explode(chr(13).chr(10).chr(13), $data))),2);
$lists = array();

foreach ( $data as $value ) {
    $list = array();
    foreach ( explode("\n", implode("", $value)) as $item ) {
        list($key, $value) = explode(":", $item);
        $list[trim($key)] = trim($value);
    }
    $lists[] = $list;
}
var_dump($lists); 
```

输出

```
array
  0 => 
    array
      'Name' => string 'Dave' (length=4)
      'Age' => string '15' (length=2)
      'Subject' => string 'Course 1 (No' (length=12)
      'Description' => string 'Description 1' (length=13)
  1 => 
    array
      'Name' => string 'John' (length=4)
      'Age' => string '28' (length=2)
      'Subject' => string 'Course 2 (No' (length=12)
      'Description' => string 'Description 1' (length=13)
  2 => 
    array
      'Name' => string 'Steve' (length=5)
      'Age' => string '22' (length=2)
      'Subject' => string 'Course 3 (No' (length=12)
      'Description' => string 'Description 1' (length=13) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T20:35:56.547

看看这两个 PHP 函数：

[preg_replace](http://www.php.net/manual/en/function.preg-replace.php)

[preg_match_all](http://www.php.net/manual/en/function.preg-match-all.php)

# c# - 导出到 excel 给我复选框而不是字符串

> ID：12942871
> 
> 赞同：2
> 
> 时间：2012-10-17T20:30:35.300
> 
> 标签：c#, asp.net-mvc, linq, datagrid, export-to-excel

所以我正在将数据源导出到 excel，但我打开文件我看到该列有复选框而不是值 true 或 false。我该如何解决这个问题，确实，我想把刺痛“活跃”或“不活跃”取决于价值。我怎样才能做到这一点？

我也想要电话号码的字符串格式

和我的模型代码

```
 public string MobileNumber { get; set; }
  public bool? IsActive { get; set; } 
```

我该如何改变才能拥有我想要的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:03:19.620

修改您的模型以返回 IsActive 属性的字符串（或者有两个，一个带有布尔值，另一个带有字符串）。然后在 Linq 查询中返回字符串值。像这样的东西：

```
from x in someTable
select new Model
    {
     .
     .
     .
     IsActive = (isActive ? "True" : "False");
     .
     .
    } 
```

# set - 谷歌网络字体自定义字符集

> ID：12942873
> 
> 赞同：4
> 
> 时间：2012-10-17T20:30:49.953
> 
> 标签：set, character, google-webfonts

我尝试优化 Google 网络字体查询，以包括基本的拉丁语集 + 一些对我的母语（捷克语）至关重要的拉丁语 ext 字符。

[https://developers.google.com/webfonts/docs/getting_started?hl=cs#Quick_Start](https://developers.google.com/webfonts/docs/getting_started?hl=cs#Quick_Start)

上面的链接表明我可以修改查询以仅包含一些字符以使其显着更轻。所以我尝试了这些字符：

aábcčdďeéěfghchiíjklmnňoópqrřsštťuúůvwxyýzžAÁBCČDĎEÉĚFGHChIÍJKLMNŇOÓPQRŘSŠTŤUÚŮVWXYÝZŽ.,?!;/-_:"'|()[]ˇ+*@#$%^&¨®°©

查询看起来像这样（因为所有“不寻常的”字符都必须被 html 转义）：

[http://fonts.googleapis.com/css?family=Open+Sans:300&%20a%C3%A1bc%C4%8Dd%C4%8Fe%C3%A9%C4%9Bfghchi%C3%ADjklmn%C5%88o% C3%B3pqr%C5%99s%C5%A1t%C5%A5u%C3%BA%C5%AFvwxy%C3%BDz%C5%BEA%C3%81BC%C4%8CD%C4%8EE%C3%89%C4% 9AFGHChI%C3%8DJKLMN%C5%87O%C3%93PQR%C5%98S%C5%A0T%C5%A4U%C3%9A%C5%AEVWXY%C3%9DZ%C5%BD.,#](http://fonts.googleapis.com/css?family=Open+Sans:300&%20a%C3%A1bc%C4%8Dd%C4%8Fe%C3%A9%C4%9Bfghchi%C3%ADjklmn%C5%88o%C3%B3pqr%C5%99s%C5%A1t%C5%A5u%C3%BA%C5%AFvwxy%C3%BDz%C5%BEA%C3%81BC%C4%8CD%C4%8EE%C3%89%C4%9AFGHChI%C3%8DJKLMN%C5%87O%C3%93PQR%C5%98S%C5%A0T%C5%A4U%C3%9A%C5%AEVWXY%C3%9DZ%C5%BD.,#) $%^&¨® °©

最终结果看起来很正常，它只有 23KB 而不是标准的 45KB（带有完整的拉丁 ext 字符集）。问题是在某些计算机上，某些字符未正确加载 - 它们以 Arial 呈现（例如，单词“ODPOVĚDI”中的“Ě”）。任何人都可以帮助我哪里可能出现问题，或者我下次看到它时如何追踪它？或者仅仅是因为这个功能在谷歌网络字体中处于测试阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T11:23:24.453

这意味着您使用的简单字体不支持您选择的字符。我正面临这个问题并试图找到一些解决方案，但目前没有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:05:28.573

这听起来很像一个测试版“功能”（即错误）。通常，测试版软件是您应该仅用于帮助测试和改进开发中的软件的东西，因此您应该报告此错误并避免在生产中使用测试版软件。

该错误可能与 Google 为不同浏览器提供的不同字体格式有关。这可以很好地解释为什么它适用于某些浏览器而不适用于其他浏览器。

如今，23KB 和 45KB 之间的差异几乎可以忽略不计。单个图像通常对加载时间的影响更大，常用的 JavaScript 库可能需要数百 KB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T14:41:26.777

您必须为字体选择拉丁扩展选项以支持您的语言字符集。有一个选项可以过滤可用的字体，只有在谷歌字体网站中扩展了拉丁文......

# c# - 使用 BindingSource 在数据库中保存更改

> ID：12942874
> 
> 赞同：3
> 
> 时间：2012-10-17T20:30:55.977
> 
> 标签：c#, sql, ado.net

我像这样从数据库中检索数据：

```
OleDbDataAdapter dataAdapter 
            = new OleDbDataAdapter("SELECT * "
              + " FROM myTab1, myTab2"
              + " WHERE myTab1.col1 = myTab2.col3"
              , connection);//OleDbConnection connection = new OleDbConnection();
DataTable dataTable = new DataTable("myDataTable");
BindingSource bindingSource = new BindingSource();
bindingSource.DataSource = dataTable;
dataAdapter.Fill(dataTable); 
```

然后我用`bindingSource`它来访问我程序中的数据，一切都很完美。但是在我进行了所有更改之后`bindingSource`，我需要将它们保存到数据库中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:41:24.877

`Update()`好吧，通常你会调用`DataAdapter`：

```
dataAdapter.Update(dataTable); 
```

但由于您的查询“连接”了两个表，因此可能并不那么容易。如果您将`SELECT`查询转换为正确的连接，则可能有可能：

```
 "SELECT * "
+ "FROM myTab1 "
+ "JOIN myTab2 ON myTab1.col1 = myTab2.col3" 
```

其他一些选择：

*   编写一条 UPDATE 语句，将正确的值放入正确的表中并设置您`dataAdapter`的`UpdateStatement`
*   使用单独的表（每个基表一个）填充数据集并加入您的应用程序

来自 MSDN 的更多信息：

[http://msdn.microsoft.com/en-us/library/xzb1zw3x(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xzb1zw3x(v=vs.80).aspx)

# php - 如何将表单文本字段捕获为数组，如单选组

> ID：12942875
> 
> 赞同：-3
> 
> 时间：2012-10-17T20:31:09.690
> 
> 标签：php, arrays, forms

我希望我能正确地提出这个问题，如果没有，请指导我如何修复它。我已经把它作为一个帖子删除了一次......

我的目标是提交一个带有一个下拉列表的表单，其中包含 100、200、300 之类的数字（您要订购多少件 T 恤）......然后根据从下拉列表中选择的内容，有一系列文本框（用于放置号码）必须加起来等于您要从下拉列表中订购的选定衬衫数量。

我的想法是在一个数组中捕获所有这些文本字段，并将它们发送到要添加的函数......

有人可以帮助我吗？

这是我知道不起作用的表单代码，但我希望它能够工作......

```
<form>

  <label>
    <input type="checkbox" name="PoloDesign" value="100" id="PoloDesign_0" />
    100</label>
  <br />
  <label>
    <input type="checkbox" name="PoloDesign" value="200" id="PoloDesign_1" />
    200</label>
  <br />
  <label>
    <input type="checkbox" name="PoloDesign" value="300" id="PoloDesign_2" />
    300</label>
  <br />

  <input type="text" name="name[1]" id="name1" value="{$name1}"/>
  <input type="text" name="name[1]" id="name2" value="{$name2}"/>
  <input type="text" name="name[1]" id="name3" value="{$name3}"/>
  <input type="text" name="name[1]" id="name4" value="{$name4}"/>
  <input type="text" name="name[1]" id="name5" value="{$name5}"/>
  <input type="text" name="name[1]" id="name6" value="{$name6}"/>
  <input type="text" name="name[1]" id="name7" value="{$name7}"/>

  <input type="submit" value="submit"/>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:33:56.860

只需更改每个

```
name="name[1]" 
```

至

```
name="name[]" 
```

然后这些字段被发布为一个数组，您可以在 PHP 中迭代

```
if (is_array($_POST['name']):
    foreach ($_POST['name'] as $key=>$field):
        // do something here
         $yourKey = $key +1;
         $yourValue = $field; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:47:24.690

我稍微更改了您的代码并尝试使用正则表达式使其工作：

```
<?php
  $name_array = preg_grep('/name[1-9]*/', $_GET);
?> 
```

因此，基本上它会检查所有提交的变量，并从所有以开头名称和结尾数字的变量创建数组。因此，表单部分应更改为如下所示：

```
<input type="text" name="name1" id="name1" value="{$name1}"/>
<input type="text" name="name2" id="name2" value="{$name2}"/>
<input type="text" name="name3" id="name3" value="{$name3}"/>
<input type="text" name="name4" id="name4" value="{$name4}"/>
<input type="text" name="name5" id="name5" value="{$name5}"/>
<input type="text" name="name6" id="name6" value="{$name6}"/>
<input type="text" name="name7" id="name7" value="{$name7}"/> 
```

我在 Apache2 和 PHP 5.3 上测试过

# c - 什么是“__maybe_unused”？

> ID：12942877
> 
> 赞同：19
> 
> 时间：2012-10-17T20:31:13.293
> 
> 标签：c, linux-kernel

在查看 Linux 内核时，我注意到以下行：

```
static void *malloc(size_t size) __maybe_unused; 
```

在 Linux v3.2 /arch/frv/kernel/gdb_stub.c 中。我以前没见过`__maybe_unused`用过的。它是特定于 Linux 内核的吗？还是在 C 规范中定义？它到底是做什么的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T20:36:04.913

里面有宏`include/linux/compiler-gcc.h`的定义：`__maybe_unused`

```
#define __maybe_unused  __attribute__((unused)) 
```

在`gcc`手册中，您有`unused`函数属性的文档：

> 未使用的“附加到函数的此属性意味着该函数可能未被使用。GCC 不会为此函数产生警告。”

[http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

对于变量：

> 未使用“附加到变量的此属性意味着该变量可能未使用。GCC 不会对此变量产生警告。”

[http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T20:35:14.323

从[引入该属性的提交中：](https://github.com/torvalds/linux/commit/0d7ebbbc6eaa5539f78ab20ed6ff1725a4e332ef)

> __maybe_unused 被定义为 __attribute__((unused)) 用于函数和变量使用，如果它可能由于预处理器宏的评估而未被引用。如果函数的实际定义依赖于预处理器宏，则函数原型应标记为 __maybe_unused。

# windows - 从 Windows 静态库中去除一些公共符号

> ID：12942878
> 
> 赞同：0
> 
> 时间：2012-10-17T20:31:14.177
> 
> 标签：windows, static-libraries

我们希望生成 Windows 静态库，这些库仅具有用于记录的 API 函数的公共符号。我们想去掉所有其他符号。

这对于 *NIX 库来说很容易；您可以使用`strip(1)`实用程序并指定`--keep-symbol=foo`，甚至可以将整个符号列表放入文件中并指定文件。

我们如何为 Windows 库做到这一点？

更详细一点：假设我们正在创建一个库，它是由多个 .C 文件构建的。

`util.c`定义函数`util_foo()`和`util_bar()`。 `math.c`定义`some_math_func()`. 然后`lib.c`定义函数`api_func_0()`和`api_func_1()`。API 函数调用实用程序和数学函数，因此这些函数不得声明为静态的。当我们编译每个 .c 文件时，公共符号都在目标文件中，然后当我们链接目标文件以创建库时，链接器将使所有公共符号可见。一旦链接器生成了静态库，我们只需要符号`api_func_0`和`api_func_1`可见的。

# eclipse - Eclipse WTP - 为项目指定部署文件夹

> ID：12942881
> 
> 赞同：1
> 
> 时间：2012-10-17T20:31:15.240
> 
> 标签：eclipse, eclipse-wtp

我正在为我的 java web 项目使用 Eclipse WTP 插件。我正在通过服务器视图部署项目。现在，我想知道是否可以指定部署文件夹的名称，默认情况下，所有文件都被放置到与项目同名的文件夹中。这是可配置的吗？这可以在不修改项目名称的情况下完成吗？

例如：我在 Eclipse MyCompanyProject 中有项目名称，在部署它时，我会在 webapps\MyCompanyProject 中获得包含二进制文件和其他资源的文件夹。但我想将它部署到 webapps\projectA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:03:08.237

好的，应该修改文件 org.eclipse.wst.common.component 以实现这一点。

线路：

```
<wb-module deploy-name="projectA">
...
<property name="context-root" value="projectA"/> 
```

此更改将反映在 server.xml 中：

```
<Context docBase="MyCompanyProject" path="/projectA" reloadable="true"/> 
```

解决...

# git - 扁平化 Git 树并解决合并冲突到 svn dcommit

> ID：12942888
> 
> 赞同：1
> 
> 时间：2012-10-17T20:31:34.090
> 
> 标签：git, svn

所以我有一个分支，其中有很多可以解决冲突的合并。因此，简单地重新调整历史以展平历史是不合时宜的。

我需要展平历史记录，以便可以通过 dcommit 将其提交给 svn（也可以接受其他方法，例如第三方工具）。不幸的是，我需要保持实际的提交。

有没有办法让树变平，在这种情况下它是线性的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:49:53.173

好吧，在我有时间的时候，我无法想出一种直接做到这一点的方法。我能够使用 Github [https://github.com/blog/1178-collaborating-on-github-with-subversion](https://github.com/blog/1178-collaborating-on-github-with-subversion)来拉取一个 svn 友好的版本，然后在现有的 svn repo 之上重新设置它。

# objective-c - 如何将字符添加到已经存在的字符串？

> ID：12942889
> 
> 赞同：2
> 
> 时间：2012-10-17T20:31:33.527
> 
> 标签：objective-c, ios, xcode, nsstring, nsmutablestring

当我做：

```
NSString x = @"test" 
```

如何编辑它以使其成为“测试”？

当我说：

```
NSMutableString x = [[NSMutableString alloc] initWithString:@"test"]; 
```

有一个错误说：

Initializer 元素不是编译时常量。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:34:17.707

声明时`NSMutableString`，您错过了星号：

```
NSMutableString *x = [[NSMutableString alloc] initWithString:@"test"];
// Here --------^ 
```

手里拿着一个可变字符串，你可以做

```
[x appendString:@"ing"]; 
```

使`x`平等`testing`。

您不必通过可变字符串 - 这也可以：

```
NSString *testing = [NSString stringWithFormat:@"%@ing", test]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T20:35:13.243

您需要将您的`NSString`or声明`NSMutableString`为`*x`. 这些是指向对象的指针。

在代码中更改字符串非常简单，例如：

```
NSString *test = @"Test";
test = [test stringByAppendingString:@"ing"]; 
```

现在in 的值`test`将是`Testing`。

有很多很棒的`NSString`方法，包括实例方法和类方法，用于操作和处理字符串。查看文档以获取完整列表！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T22:20:05.573

如果要向现有的 NSString 添加多个或单个字符串，请使用以下命令

```
NSString *x =  [NSString stringWithFormat:@"%@%@", @"test",@"ing"]; 
```

# python - 如何从 Django GeoIP 中的纬度和经度获取地址？

> ID：12942894
> 
> 赞同：7
> 
> 时间：2012-10-17T20:32:14.637
> 
> 标签：python, django, geolocation

我在他们的 API 中看不到任何执行此操作的内容： [https ://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/#geoip-api](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/#geoip-api)

还是我应该只使用 Google API 进行反向地理编码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T18:20:34.340

解决方案 - 调用此 URL 并解析它的 JSON。

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=%f,%f&sensor=false 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-21T05:19:59.083

使用 geopy，它可以处理多个地理编码器，包括 googlev3。

```
from geopy.geocoders import GoogleV3
geolocator = GoogleV3()
location = geolocator.reverse("52.509669, 13.376294")
print(location.address)
>>> Potsdamer Platz, Mitte, Berlin, 10117, Deutschland, European Union 
```

使用 pip 安装：

```
pip install geopy 
```

在以下位置找到信息：[https ://github.com/geopy/geopy](https://github.com/geopy/geopy)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T04:08:38.320

您可以使用地图 API。我已经包含了一个片段，我用它来计算使用 Postgis 和 Django 转换为 PointField 的马拉松起点。这应该会让你上路。

```
import requests

def geocode(data):
    url_list = []
    for item in data:
        address = ('%s+%s' % (item.city, item.country)).replace(' ', '+')
        url = 'http://maps.googleapis.com/maps/api/geocode/json?address=%s&sensor=false' % address
        url_list.append([item.pk, url])

    json_results = []
    for url in url_list:
        r = requests.get(url[1])
        json_results.append([url[0], r.json])

    result_list = []
    for result in json_results:
        if result[1]['status'] == 'OK':
            lat = float(result[1]['results'][0]['geometry']['location']['lat'])
            lng = float(result[1]['results'][0]['geometry']['location']['lng'])
            marathon = Marathon.objects.get(pk=result[0])
            marathon.point = GEOSGeometry('POINT(%s %s)' % (lng, lat))
            marathon.save()

    return result_list 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-02T11:59:52.227

@rawsix 的答案对于 django 用户来说似乎很聪明。但是请注意，返回的位置`geolocator.reverse(query)`是一个列表，而不是一个`Location`对象；因此尝试从中检索属性`address`会导致错误。

通常，该列表中的第一项具有最接近的地址信息。所以你可以简单地做：

```
 location = location[0]
 address = location.address 
```

此外，您可以使用元组，而不是将字符串纬度和经度传递给 reverse 方法，并且它必须`latitude`是`longitude`. 你可以做：

```
 from geopy.geocoders import GoogleV3()
 geocoder = GoogleV3()
 location_list = geocoder.reverse((latitude, longitude))
 location = location_list[0]
 address = location.address 
```

# perl - 在 Perl 中用哈希引用替换哈希？

> ID：12942895
> 
> 赞同：1
> 
> 时间：2012-10-17T20:32:17.663
> 
> 标签：perl

我有一个子例程，它获取一个哈希引用作为参数。

我可以通过引用来操作单个哈希值。我想替换参考点所在的整个散列，以便该散列引用的任何地方都可以看到更改。

```
sub replace{
    my $hashref = shift;

    # can manipulate hash here
    $hashref->{key} = "newValue";

    # how to replace replace the hash here by a new hash
    $newHashRef = {
        key  => "value",
        key2 => "value2",
    };
} 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:35:38.700

```
%$hashref = (
    key => "value",
    key2 => "value2",
); 
```

`%$hashref`表示“`$hashref`引用的哈希”，并且分配给该哈希会替换其内容，就像不涉及引用一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:36:11.090

只需分配给取消引用的哈希：

```
my $hashref = shift;
%$hashref = (); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:36:18.423

要替换引用哈希的内容：

```
sub replace{
    my $hashref = shift;
    %$hashref = ( key1 => "value1", key2 => "value2" );
} 
```

（如果`%hash`是hash，简称`%{ $hashref }`hash ref `%$hashref`。）

要替换引用本身：

```
sub replace{
    $_[0] = { key1 => "value1", key2 => "value2" };
} 
```

# .htaccess - 如何编写特定于给定子域的 htaccess 规则？- 避免索引某些文件

> ID：12942902
> 
> 赞同：0
> 
> 时间：2012-10-17T20:32:51.527
> 
> 标签：.htaccess, seo, noindex

我的 .htaccess 文件中有以下内容：

```
Options +FollowSymlinks
#+FollowSymLinks must be enabled for any rules to work, this is a security 
#requirement of the rewrite engine. Normally it's enabled in the root and we 
#shouldn't have to add it, but it doesn't hurt to do so.

RewriteEngine on
#Apache scans all incoming URL requests, checks for matches in our #.htaccess file 
#and rewrites those matching URLs to whatever we specify.

#allow blank referrers.
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?site.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?site.dev [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?dev.site.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

site.com 是生产站点。

site.dev 是一个本地主机开发环境。

dev.site.com 是我们进行现场测试的子域。

我知道这将避免网站被索引：

```
Header set X-Robots-Tag "noindex, nofollow" 
```

*参看*。[http://yoast.com/prevent-site-being-indexed/](http://yoast.com/prevent-site-being-indexed/)

然而，我的问题可能相当简单：

有没有办法只在 dev.site.com 上应用这条线，这样它就不会被索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:41:54.723

> 有没有办法只在 dev.site.com 上应用这条线，这样它就不会被索引？

是的，您需要将该`Header`行放在 vhost 配置中`dev.site.com`。您无法`Header set`从 htaccess 文件中将主机检查绑定到指令。

另一种可能性是，如果您想通过用户代理阻止机器人，您可以删除`Header set`并添加一些规则：

```
# request is for http://dev.site.com
RewriteCond %{HTTP_HOST} ^dev.site.com$ [NC]
# user-agent is a search engine bot
RewriteCond %{HTTP_USER_AGENT} (Googlebot|yahoo|msnbot) [NC]
# return forbidden
RewriteRule ^ - [L,F] 
```

请注意，用户代理列表并不完整。您可以尝试浏览[大量用户代理列表](http://www.user-agents.org/)并查找所有索引机器人，或者至少查找更受欢迎的机器人。

# php - 根据 Liskov 替换原则，是否允许子类具有公共方法？

> ID：12942903
> 
> 赞同：1
> 
> 时间：2012-10-17T20:32:53.337
> 
> 标签：php, oop, inheritance, solid-principles, liskov-substitution-principle

考虑以下类层次结构：

```
Abstract class Printer{
    public print(){
        //code to handle printing
    }
}

class LaserPrinter extends Printer{
    private $file;
    public setFile($file){
        $this->file = $file; 
    }
}

class InkJetPrinter extends Printer{
    private $document;
    public setDocument($document){
        $this->document= $document; 
    }
}

class ClientClass{
    private $filesToPrint=array();
    public __construct(InkJetPrinter $inkJetPrinter, LaserPrinter $laserPrinter){   //I was hoping to apply Dependency Inversion here by defining both inputs as type Printer instead
         //constructor stuff    
    }

    public function startPrinting(){
         //some logic to extract the $files and $documents from $this->filesToPrint
         //...
         $this->inkJetPrinter->setDocument($document);//<---Things got messy here
         $this->laserPrinter->setFile($file);//<---and here too
         //...
    }
} 
```

现在这个类`LaserPrinter`不能被它的父类替换，`Printer`因为`Printer`它没有`setFile`方法。
这是否意味着他的等级制度违反了 Liskov 替代原则？不允许子类有自己的公共方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:56:16.490

反过来 - 为了满足 Liskov 替换原则，您应该能够在使用父类的任何地方使用子类。在您的示例中，您应该能够在需要类型对象的地方使用`LaserPrinter`对象或`InkJetPrinter`对象`Printer`。因此，子类拥有哪些自己的公共方法并不重要。

这也为您提供了满足开放/封闭原则的途径 - 您可以创建新打印机，从而扩展模块（使用您的打印机）的行为，而无需修改该模块。

更新：您当前的代码中没有关于 LSP 的内容。您的 PrinterNetwork 正在使用子类来打印文件。相反，它应该使用父类。我不知道php，但它应该看起来像：

```
class PrinterNetwork{
    private $filesToPrint=array();
    public __construct(Printer $printer){
         //constructor stuff    
    }

    public function startPrinting(){
         //foreach file in $this->filesToPrint
         $this->printer->print($file);
         //...
    }
} 
```

您可以使用 InkJetPrinter 或 LaserPrinter 初始化网络。您的代码不应取决于打印机的类型。他们俩都应该毫无问题地替代父母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:02:34.553

**首先，我假设您在该代码中有继承，尽管我看不到任何暗示 LaserPrinter 或 InkJetPrinter 从打印机继承的东西。**

不，它没有违反 Liskov 原则，因为子类在用作打印机时需要正常运行。

可能引发您的问题的一点是这些类也应该使用依赖倒置，因此应该将完全构造的 LaserPrinter 传递给任何使用打印机的东西。在您那里的示例中，创建 LaserPrinter 后文件可以更改吗？

如果文件不需要更改，那么您可能希望在 LaserPrinter 的构造函数中传递它。如果文件可以更改，那么您需要：在 LaserPrinter 中创建文件名或创建一个创建文件名的新类，然后在 LaserPrinter 中注入该类。

您可能想了解[Open/Closed](http://en.wikipedia.org/wiki/Open/closed_principle)和[Dependency Inversion](http://en.wikipedia.org/wiki/Dependency_inversion_principle)原则，因为我认为它们与您的问题密切相关。

* * *

### 编辑

再次查看代码后，我发现有些奇怪。`Printer.print()`应该接收一个描述打印内容的参数。让`LaserPrinter`or`InkJetPrinter`引用他们需要从实例变量打印的内容看起来是错误的。

例如，您不说：*打印机，这里有一个文档……现在打印它*。

它更像是*打印机，既然您已完全配置并运行，请打印此文档*

看起来您已经有一个对象来表示您要打印的内容（封装了文档和文件）。您可以传递该对象并拥有类似`print(jobDetail)`.

# c# - 计算十六进制字符串的补码校验和

> ID：12942904
> 
> 赞同：4
> 
> 时间：2012-10-17T20:33:01.820
> 
> 标签：c#, twos-complement

我有一个字符串“0AAE0000463130004144430000”，我需要计算构成该字符串的十六进制字节的二进制补码校验和。

上面示例字符串的公式是

1.  将值相加：0A + AE + 00 + 00 + 46 + 31 + 30 + 00 + 41 + 44 + 43 + 00 + 00 = 27（丢弃溢出）
2.  从 0x100 = 0xD9 中减去结果

D9 是此示例的正确校验和，但我无法从 C# 中的字符串中解析出两位十六进制值。我当前的代码如下：

```
string output = "0AAE0000463130004144430000";
long checksum = 0;
char[] outputBytes = output.TrimStart(':').ToCharArray();

foreach (var outputByte in outputBytes)
{
    checksum += Convert.ToInt32(outputByte);
    checksum = checksum & 0xFF;
}

checksum = 256 - checksum; 
```

但是，据我所知，这是对 ASCII 值求和，并对每个单独的字符进行求和。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T20:42:10.407

您可以使用`SoapHexBinary`System.Runtime.Remoting.Metadata.W3cXsd2001 中的类。

`soapHexBinary.Value`属性将返回一个字节数组

```
string hexString = "0AAE0000463130004144430000";
byte[] buf = SoapHexBinary.Parse(hexString).Value;

int chkSum = buf.Aggregate(0, (s, b) => s += b) & 0xff;
chkSum = (0x100 - chkSum) & 0xff;

var str = chkSum.ToString("X2"); // <-- D9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:42:04.993

试试这个。使用 SubString 一次抓取两个字符，并使用 int.Parse 和 NumberStyles.AllowHexSpecifier 将这对字符读取为十六进制值。

```
string output = "0AAE0000463130004144430000";
int checksum = 0;

// You'll need to add error checking that the string only contains [0-9A-F], 
// is an even number of characters, etc.
for(int i = 0; i < output.length; i+=2)
{
   int value = int.Parse(output.SubString(i, 2), NumberStyles.AllowHexSpecifier);
   checksum = (checksum + value) & 0xFF;
}

checksum = 256 - checksum; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T17:39:18.913

如果您想包含`System.Runtime.Remoting.Metadata.W3cXsd2001`命名空间，则接受的答案有效。

如果您不想包含命名空间，以下代码将返回正确的结果。这个例子和上面例子的区别在于`& 0xFF`返回值的附加值。没有这个，在计算全零校验和时，您将得到不正确的结果。

```
public static class ExtensionMethods
{
    public static string MicrochipDataString(this string input)
    {
        int TwosComplement(string s)
        {
            if (s.Length % 2 != 0)
                throw new FormatException(nameof(input));

            var checksum = 0;

            for (var i = 0; i < s.Length; i += 2)
            {
                var value = int.Parse(s.Substring(i, 2), NumberStyles.AllowHexSpecifier);

                checksum = (checksum + value) & 0xFF;
            }

            return 256 - checksum & 0xFF;
        }

        return string.Concat(":", input, TwosComplement(input).ToString("X2"));
    }
} 
```

# mysql - MySQL推送更改

> ID：12942905
> 
> 赞同：0
> 
> 时间：2012-10-17T20:33:06.487
> 
> 标签：mysql, replication

我希望能够将一堆 mysql 表复制到自定义服务。

现在，我最好的想法是在每个表上创建一个插入后触发器，并将这些推送到一个“缓存”表，我的自定义服务将轮询该表以获取更新的行。

上面的问题是这意味着我必须定期轮询。我想知道是否有办法让mysql将更新推送到我的服务。我能想到的最好方法是触发器是否可以支持除了更新其他表之外的操作，例如执行 POST（据我所知，这是不可能的）。

我很确定有办法让 mysql 以某种方式将二进制日志推送给我，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:04:09.077

您可以扩展引擎以从您的函数运行系统代码。这是[一个概述](http://bernardodamele.blogspot.com/2009/01/command-execution-with-mysql-udf.html)。

考虑到这项工作（设置和维护），轮询脚本看起来还不错。

# jquery - 如何在恢复可拖动的 jQuery UI 时删除动画？

> ID：12942906
> 
> 赞同：16
> 
> 时间：2012-10-17T20:33:08.783
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我尝试谷歌搜索并找不到这个，但我想这是一个相当简单的任务。当您在此示例中从左侧下降到右侧时，我试图摆脱还原动画（注意，我想保留还原动作，只想删除它还原的动画）：[http://jsfiddle .net/2fsVZ/](http://jsfiddle.net/2fsVZ/)

这是我正在寻找的长短：

下面是我正在使用的 JavaScript - 我如何告诉它不要为还原设置动画？

```
 $( ".before .left-side>div" ).draggable({ revert: true}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-17T20:36:37.603

您只需要将 revertDuration 设置为 0。

```
$( ".before .left-side>div" ).draggable({
    revert: true,
    revertDuration: 0
}); 
```

[http://jsfiddle.net/2fsVZ/2/](http://jsfiddle.net/2fsVZ/2/)

[http://docs.jquery.com/UI/Draggable#option-revertDuration](http://docs.jquery.com/UI/Draggable#option-revertDuration)

# github - Octopress、github pages、CNAME域和google网站搜索

> ID：12942911
> 
> 赞同：3
> 
> 时间：2012-10-17T20:33:43.977
> 
> 标签：github, google-search, octopress

我的[博客](http://www.convalesco.org)成功转移到了[octopress](http://octopress.org)和github-pages。我的问题是该网站的搜索使用[谷歌搜索](https://encrypted.google.com/search?q=test&q=site%3awww.convalesco.org)，但如您所见，“搜索”的结果指向旧的（wordpress）链接。现在这些链接具有更改结构，遵循默认的 octopress 结构。

我不明白为什么会这样。谷歌是否有可能将旧链接存储在它的数据库中（我的博客是某些搜索的第一页，但每月仅收集 3.000 次点击……按照互联网的标准来看并不多），这会随着时间而改变，或者是我能以某种方式改变的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:43:03.727

1.您可以等待谷歌抓取并重新索引您的页面，也可以使用 URL Removal Request 工具加快从索引中删除旧页面的速度。 [http://www.google.com/support/webmasters/bin/answer.py?answer=61062](http://www.google.com/support/webmasters/bin/answer.py?answer=61062)
根据该页面，删除过程“通常需要 3-5 个工作日”。

考虑提交站点地图： [http ://www.google.com/support/webmasters/bin/answer.py?answer=40318](http://www.google.com/support/webmasters/bin/answer.py?answer=40318)
[点击此处](https://www.google.com/webmasters/tools/submit-url)重新提交站点地图。

有关站点地图的更多信息：
[http ://www.google.com/support/webmasters/bin/answer.py?answer=34575](http://www.google.com/support/webmasters/bin/answer.py?answer=34575) [http://www.google.com/support/webmasters/bin/topic.py?topic= 8467](http://www.google.com/support/webmasters/bin/topic.py?topic=8467) [http://www.google.com/support/webmasters/bin/topic.py?topic=8477](http://www.google.com/support/webmasters/bin/topic.py?topic=8477) [https://www.google.com/webmasters/tools/docs/en/protocol.html](https://www.google.com/webmasters/tools/docs/en/protocol.html)

2.也许您的公司可能会考虑使用 Google Mini？您可以将 Mini 设置为每晚甚至“连续”抓取网站。

[http://www.google.com/enterprise/mini/](http://www.google.com/enterprise/mini/)

根据美国定价页面，Mini 目前的起价为 1995 美元，可获得 50,000 个文档的许可证，并提供一年的支持。

这里是 Google Mini 讨论组： [http ://groups.google.com/group/Google-Mini](http://groups.google.com/group/Google-Mini) [http://www.google.com/enterprise/hosted_vs_appliance.html](http://www.google.com/enterprise/hosted_vs_appliance.html) （点击：“显示所有描述”） [http:// /www.google.com/support/mini/（Google](http://www.google.com/support/mini/) Mini 详细常见问题解答）

# c - 了解来自多个进程的并发文件写入

> ID：12942915
> 
> 赞同：18
> 
> 时间：2012-10-17T20:33:53.523
> 
> 标签：c, unix, file-io, operating-system, mpi

从这里开始：[文件附加在 UNIX 中是原子的吗](https://stackoverflow.com/questions/1154446/is-file-append-atomic-in-unix/ "文件附加在 UNIX 中是原子的吗")

考虑多个进程打开同一个文件并附加到它的情况。O_APPEND 保证寻找到文件末尾然后开始写操作是原子的。因此，多个进程可以附加到同一个文件，只要每个写入大小 <= PIPE_BUF，任何进程都不会覆盖任何其他进程的写入。

我编写了一个测试程序，其中多个进程打开并写入同一个文件（`write(2)`）。我确保每个写入大小 > PIPE_BUF (4k)。我期待看到进程覆盖其他人的数据的情况。但这不会发生。我测试了不同的写入大小。这只是运气还是没有发生这种情况的原因？我的最终目标是了解附加到同一文件的多个进程是否需要协调它们的写入。

这是完整的程序。每个进程创建一个 int 缓冲区，用它的 填充所有值`rank`，打开一个文件并写入它。

规格：OpenMPI 1.4.3 on Opensuse 11.3 64-bit

编译为：mpicc -O3 test.c，运行为：mpirun -np 8 ./a.out

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>

int 
main(int argc, char** argv) {
    int rank, size, i, bufsize = 134217728, fd, status = 0, bytes_written, tmp_bytes_written;
    int* buf;
    char* filename = "/tmp/testfile.out";

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    buf = (int*) malloc (bufsize * sizeof(int));   
    if(buf == NULL) {
        status = -1;
        perror("Could not malloc");
        goto finalize;
    }
    for(i=0; i<bufsize; i++) 
        buf[i] = rank;

    if(-1 == (fd = open(filename, O_APPEND|O_WRONLY, S_IWUSR))) {
        perror("Cant open file");
        status = -1;
        goto end;
        exit(-1);
    }

    bytes_written = 0;
    if(bufsize != (tmp_bytes_written = write(fd, buf, bufsize))) {
        perror("Error during write");
        printf("ret value: %d\n", tmp_bytes_written);
        status = -1;
        goto close;
    }

close:
    if(-1 == close(fd)) {
        perror("Error during close");
        status = -1;
    }
end:
    free(buf);
finalize:
    MPI_Finalize();
    return status;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T21:10:27.830

小于的写入原子性`PIPE_BUF`仅适用于管道和 FIFO。对于文件写入，POSIX 说：

> 本卷 POSIX.1-2008 未指定从多个进程并发写入文件的行为。应用程序应该使用某种形式的并发控制。

...这意味着您只能靠自己 - 不同的 UNIX-like 将提供不同的保证。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-07T22:45:35.837

首先，Windows 上的 O_APPEND 或等效的 FILE_APPEND_DATA 意味着最大文件范围（文件“长度”）的增量在并发写入者下是**原子**的，并且不只是 PIPE_BUF。POSIX 保证了这一点，Linux、FreeBSD、OS X 和 Windows 都正确实现了它。Samba 也正确实现了它，v5 之前的 NFS 没有，因为它缺乏自动附加的有线格式功能。因此，如果您以仅附加方式打开文件，*则并发写入不会在任何主要操作系统上相互撕裂，*除非涉及 NFS。

这并没有说明读取是否会看到撕裂的写入，并且在那个 POSIX 上说以下关于 read() 和 write() 对常规文件的原子性：

> 以下所有函数在对常规文件或符号链接进行操作时，在 POSIX.1-2008 中指定的效果中相互之间应是原子的... [许多函数] ... read() ... write( ) ... 如果两个线程各自调用这些函数之一，则每个调用要么看到另一个调用的所有指定效果，要么一个都看不到。[[资源]](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_09_07)

和

> 写入可以相对于其他读取和写入进行序列化。如果可以（通过任何方式）证明文件数据的 read() 发生在数据的 write() 之后，则它必须反映 write()，即使调用是由不同的进程进行的。[[资源]](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)

但反过来：

> 本卷 POSIX.1-2008 未指定从多个进程并发写入文件的行为。应用程序应该使用某种形式的并发控制。[[资源]](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)

对所有这三个要求的安全解释表明，在同一文件中与范围重叠的所有写入必须相对于彼此进行序列化，并且对于读取，使得撕裂的写入永远不会出现在读者面前。

一个不太安全但仍然允许的解释可能是读取和写入仅在同一进程内的线程之间相互序列化，而进程之间的写入仅相对于读取进行序列化（即在线程之间存在顺序一致的 i/o 顺序）一个进程，但进程之间的 i/o 只是获取-释放）。

当然，仅仅因为标准需要这些语义并不意味着实现符合要求，尽管事实上带有 ZFS 的 FreeBSD 表现完美，最近带有 NTFS 的 Windows (10.0.14393) 表现完美，如果 O_DIRECT 开启，最近带有 ext4 的 Linux 表现正确. [如果您想了解有关主要操作系统和文件系统是否符合标准的更多详细信息，请参阅此答案](https://stackoverflow.com/a/35258623/805579)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-17T21:11:10.480

这不是运气，从某种意义上说，如果您深入研究内核，您可能可以证明在您的特定情况下，永远不会发生一个进程`write`与另一个进程交错的情况。我假设：

*   您没有达到任何文件大小限制
*   您没有填充创建测试文件的文件系统
*   该文件是一个常规文件（不是套接字、管道或其他东西）
*   文件系统是本地的
*   缓冲区不跨越多个虚拟内存映射（这个是众所周知的，因为它是`malloc()`ed，它把它放在堆上，它是连续的。
*   `write()`进程在忙碌时不会被中断、发出信号或跟踪。
*   没有磁盘 I/O 错误、RAM 故障或任何其他异常情况。
*   （也许是其他人）

您可能确实会发现，如果所有这些假设都成立，那么您碰巧使用的操作系统的内核总是通过`write()`对以下文件的单个原子连续写入来完成单个系统调用。

这并不意味着你可以指望这总是正确的。你永远不知道什么时候它可能不是真的：

*   该程序在不同的操作系统上运行
*   文件移动到 NFS 文件系统
*   进程在进程中收到信号`write()`并`write()`返回部分结果（比请求的字节少）。不确定 POSIX 是否真的允许这种情况发生，但我进行了防御性编程！
*   ETC...

因此，您的实验无法证明您可以依靠非交错写入。

# git - git如何比较文件？

> ID：12942918
> 
> 赞同：3
> 
> 时间：2012-10-17T20:34:04.363
> 
> 标签：git, merge, word-diff

我将 git 与我的乳胶文件一起使用。我几乎没有冲突，因为段落很长，很难找到有什么区别，所以我很好奇 git 是如何比较文件的？如果存在，有没有办法按字符打开比较字符？对于乳胶，它会很棒:) 我不喜欢在新行中写每个句子，这在乳胶中是可能的并且不会破坏整个段落，但它很难看。

当我们有：

```
It's realy simple sentenec 
```

当 Person#1 将其更改为：

```
It's a really simple sentenec 
```

同时 Person#2 将其更改为：

```
It's a really simple sentence. 
```

存在冲突，应该解决，因为这些更改是或可能是不相交的。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:38:04.207

Git逐行比较。

如果要逐个字符比较，可以执行以下命令：

```
git diff --word-diff-regex=. 
```

# eclipse - WSO2 Developer Studio 2.1.0（以前的 Carbon Studio）插件导致 Eclipse 加载挂起

> ID：12942920
> 
> 赞同：0
> 
> 时间：2012-10-17T20:34:15.427
> 
> 标签：eclipse, wso2, wso2developerstudio

我正在尝试将新的 WSO2 Developer Studio 2.1.0 安装到 Eclipse 中。它似乎安装成功，但是当我尝试启动 Eclipse 时，它​​永远挂起（例如 > 30 分钟）并显示消息“Loading Workbench”。在一次尝试中（离开它大约 45 分钟后），它实际上已经调出 Eclipse 主窗口，但它挂在那里并显示“Marketplace DND Initialization”消息。Eclipse 进程稳定地使用了我大约 25% 的 CPU。

我的 Eclipse 工作区/.metadata/.log 文件中有一个错误：
!ENTRY org.eclipse.ui.navigator 4 0 2012-10-17 11:20:18.303
!MESSAGE 一个扩展已经存在，ID 为“org.eclipse. ui.navigator.resourceContent”。
每次尝试加载 Eclipse 时，都会出现大约 20 次，所有这些都发生在启动加载后的最初几秒钟内。

我遵循了 WSO2 Developer Studio 安装指南 (http://dist.wso2.org/products/developer-studio/2.1.0/docs/install_guide.html)。我不清楚先决条件。它说“Eclipse WTP 3.1.0 或更高版本”，但这似乎来自旧的 Eclipse 版本（Galileo），所以我并不担心。我的 Eclipse About 屏幕显示 WTP 1.0。另一个先决条件是 Carbon Server。我已经在运行最新的 BPS 服务器（测试版），其中包括 Carbon，所以我并不担心。可以肯定的是，我后来安装了最新的独立“Carbon Server”，但这没有任何帮助。

我还尝试将 eclipse.ini 中的内存设置从默认值增加 50%（到 XXMaxPermSize：384，-Xmx768m）。没有帮助。

这是我的系统：
64 位笔记本电脑上的 MS-Windows 7 Enterprise适用于 Java EE 开发人员的
Java 1.6
Eclipse IDE，Indigo 3.7，32 位。版本 1.4.0.20110615-0550
（相关） Eclipse 功能：
WTP 版本：1.0.0.v201104180000-797B1CcNBHGC_DRAwXT3B
Subclipse 1.6.x
Aptana Studio 3.0.4 MS Windows x86 “Eclipse 插件版本”。版本：3.0.4.201108101432-7E37B7HFEHCdSHSV5R_IyJetqA_B
CollabNet 合并客户端 2.2.4

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:39:36.220

嗨，我遇到了同样的问题，尤其是嵌套的 WSO2 项目/多模块 Maven 项目。对我的 Eclipse 项目资源管理器设置稍作改动就为我解决了这个问题。

我做了什么：

1.  在 Eclipse Project Exlporer 上打开 View Customization 菜单（视图菜单栏中的三角形）
2.  单击“自定义视图...”
3.  未选中“隐藏 WSO2 注册表资源冲突项”和“隐藏嵌套项目”
4.  点击“确定”申请

结果，所有嵌套文件夹都将以平面布局显示（与多模块 Maven 项目的 m2e-Integration 一样），但 IDE 现在速度更快，CPU 消耗更少，并且不再在保存时冻结。

我的环境看起来像：

*   操作系统：Windows 7 64 位
*   Eclipse Indigo 服务版本 2（内部版本：20120216-1857）
*   Eclipse WTP 3.40
*   Java JDK 1.6.0_31（32 位）
*   WSO2 开发者工作室 2.1.0
*   M2E-集成 1.2.0.20120903-1050
*   M2E-WTP 0.17.0.20121108-1856

希望能帮助到你

**编辑：**对不起，我忘了提到在全新安装 WSO2 Developer Studio 2.1.0 之后，我必须先完成 Harshana 的步骤。我的 JVM 使用 -Xms512m -Xmx1384m 参数化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:06:38.247

您能否在启动 Eclipse 实例之前尝试清理您的 System Temp 文件夹并查看是否有改进？

请在安装 Developer Studio 后使用新的 Eclipse 工作区。

我们在过去和以上 2 个过程中多次看到这种行为，增加内存有助于解决问题。

希望这可以帮助！

谢谢并恭祝安康，

哈沙娜

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T17:13:09.793

开发者工作室 3.5 beta 2 发布。它改进了许多错误修复。 [http://devamanthrils.wordpress.com/2014/01/14/developer-studio-3-5-0-beta-2-released/](http://devamanthrils.wordpress.com/2014/01/14/developer-studio-3-5-0-beta-2-released/)

# grails - 可以从 Grails 控制器获取，但我得到一个 404 的 POST

> ID：12942926
> 
> 赞同：0
> 
> 时间：2012-10-17T20:34:40.497
> 
> 标签：grails, prototype

我将我的 url 映射设置为接收 GET 和 POST 请求。我正在使用原型 AJAX。这是我的功能：

```
 function savePrefs(){
        var user = document.getElementById('username').innerHTML;
        var bounds = window.map.getExtent();
        var Lat = bounds.left + (bounds.right - bounds.left) / 2;
        var Long = bounds.bottom + (bounds.top - bounds.bottom) / 2;
        var Zoom = window.map.getZoom();
        var json = new Object;
        var url = "Prefs";
        json.username = user;
        json.lat = Lat;
        json.long = Long;
        json.Zoom = Zoom;
        json = JSON.stringify(json);
        alert(json);
        new Ajax.Request(url, {
            method:'post',
            contentType:'application/json',
            postBody:json,
            asynchronous:true,
            onSuccess: function (req) {
                alert(req);
            }

        });        } 
```

我在控制台中不断收到 404 错误。但是当我加载页面时，我做了一个 GET 请求，它响应良好。有任何想法吗？

# python - 使用 Rpy2 执行 r-script 并将结果写入 csv 文件时丢失记录

> ID：12942931
> 
> 赞同：0
> 
> 时间：2012-10-17T20:35:07.190
> 
> 标签：python, django, rpy2

使用 Rpy2 执行 r-script 并且脚本具有将分析结果写入 csv 文件的功能时，我一直遇到输出文件中缺少记录的问题。请参阅下面的源代码。

例如，我的源文件（f2）中有 785 条记录，经过分析，输出文件（已处理）中应该有 785 条文件。但是，我在输出文件中得到的记录更少。当我直接在 R 中运行 r-script 时没有这样的问题。有人知道什么是冷错了吗？谢谢。

```
def make_standardization(filename,outdata):
traindata = os.path.join(settings.MEDIA_ROOT, "default_predict_train.csv") 
testdata = os.path.join(settings.MEDIA_ROOT, filename) 

robjects.r.assign("f1",traindata)
robjects.r.assign("f2",testdata)
robjects.r.assign("processed", outdata)

robjects.r("""
    train.dta=read.csv(f1,header=T)
    test.dta=read.csv(f2,header=T)

    train.h=train.dta[,c(1:2)]
    train.x=train.dta[,-c(1:2)]
    train.colnames=sub("PFGE.XbaI.","",colnames(train.x))
    train.colnames=as.numeric(train.colnames)

    test.h=test.dta[,c(1:2)]
    test.x=test.dta[,-c(1:2)]
    test.x=t(t(test.x))
    temp=matrix(as.numeric(test.x),nrow=nrow(test.x),ncol=ncol(test.x))
    colnames(temp)=colnames(test.x)
    test.x=temp
    test.x[is.na(test.x)]=0.5
    test.colnames=sub("PFGE.XbaI.","",colnames(test.x))
    test.colnames=as.numeric(test.colnames)

    temp=matrix(0,nrow=nrow(test.x),ncol=ncol(train.x))
    colnames(temp)=colnames(train.x)
    rownames(temp)=rownames(test.x)

    for(i in 1:ncol(train.x)){

        if(i == 1) {
            index=which( test.colnames > (train.colnames[i]+train.colnames[i+1])/2    )
            if(length(index)==1){
                temp[,i]=test.x[,index]
            }else{
                temp[,i]=1*(rowSums(test.x[,index])>0)
            }
        }

        if(i == ncol(train.x)) {
            index=which( test.colnames <= (train.colnames[i]+train.colnames[i-1])/2    )
            if(length(index)==1){
                temp[,i]=test.x[,index]
            }else{
                temp[,i]=1*(rowSums(test.x[,index])>0)
            }
        }        

        if(i >1 && i< ncol(train.x)){
            index=which( test.colnames > (train.colnames[i]+train.colnames[i+1])/2  & test.colnames <= (train.colnames[i]+train.colnames[i-1])/2    )
            if(length(index)==1){
                temp[,i]=test.x[,index]
            }else{
                temp[,i]=1*(rowSums(test.x[,index])>0)
            }            
        }            

    }

    test.x=cbind(test.h,temp)

    write.csv(test.x,processed)

""") 
```

# javascript - 如何在函数对象中调用原型函数它 b

> ID：12942954
> 
> 赞同：1
> 
> 时间：2012-10-17T20:36:22.193
> 
> 标签：javascript

```
var func_obj = function() {
    console.log('wat');
    this.my_proto_method();
};

func_obj.prototype.my_proto_method = function() {
    console.log('how do I programming');
};

​func_obj();​ 
```

我试图让上面的代码工作。从我读过的内容来看，这应该可以，不确定我在这里做错了什么。[还在这里](http://jsfiddle.net/mateuszwijas/DBYfy/)设置一个小提琴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:38:06.873

要访问原型对象/方法，`this`您必须创建 func_obj 的新实例。如果你想访问带有实例的原型方法，那么你必须使用原型属性 as `func_obj.prototype.my_proto_method()`。

```
var func_obj = function() {
    console.log('wat');
    this.my_proto_method();
   // if called without new then access prototype as : func_obj.prototype.my_proto_method()
};

func_obj.prototype.my_proto_method = function() {
    console.log('how do I programming');
};

​new func_obj();​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:38:22.477

您需要在对 func_obj 的调用前加上新前缀：

```
var func_obj = function() {
    console.log('wat');
    this.my_proto_method();
};

func_obj.prototype.my_proto_method = function() {
    console.log('how do I programming');
};

​var foo = new func_obj();​ 
```

# google-groups - 谷歌群组 API

> ID：12942960
> 
> 赞同：2
> 
> 时间：2012-10-17T20:36:37.720
> 
> 标签：google-groups, google-groups-api

一个澄清和建议问题 - [https://developers.google.com/apps-script/service_groups](https://developers.google.com/apps-script/service_groups)是完整的 Google Groups API 页面吗？我已经通读了它，但无法破译该 API 是否允许我从另一个站点插入它并根据需要从组中删除/添加用户。我可能只是被有大量可用示例的 Google Maps API 宠坏了，但这可能吗？我想与公共和私人团体互动。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:59:05.513

不，您链接到的页面是 Google 的云脚本解决方案 Apps Script 中的 Google Groups 服务。您可以通过多种方式使用 Apps 脚本，但该代码必须在 Google 的编辑器中编写，并且不能直接从您的网页运行。

# java - 如何获取 TCP 连接状态？

> ID：12942961
> 
> 赞同：-1
> 
> 时间：2012-10-17T20:36:41.400
> 
> 标签：java, network-programming, intrusion-detection

我使用 JPcap 来捕获数据包。我不知道如何通过这些捕获的数据包获取连接标志的 TCP 状态？

```
Ex: OTH, REJ, RSTO, RSTOS0, RSTR, S0, S1, S2, S3, SF, SH 
```

我正在构建入侵检测系统。？

目前正在为直播系统提取 KDD CUP 99 数据集的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:45:40.180

我不知道“OTH、REJ、RSTO、RSTOS0、RSTR、S0、S1、S2、S3、SF、SH”是什么，但 TCP 段中唯一影响连接状态的是 TCP 控制位 SYN、ACK、FIN 和 RST。请参阅[RFC 793](http://www.ietf.org/rfc/rfc793.txt) &ff 的 #3.4。完整的描述。

# php - 按钮 onClick 不重定向

> ID：12942964
> 
> 赞同：-1
> 
> 时间：2012-10-17T20:37:13.320
> 
> 标签：php, javascript, redirect

所以..我有这个完全倒退的项目，但基本上我必须提供一个工作表单，添加一些 item_ID 的数量，然后重定向到我使用的框架的购物车页面。

当然，我不只是给我的框架换皮，并为他定制它的功能。这家伙有一些他“自己写”的破解的 php 页面，他坚持将表格硬编码到其中。

无论如何，我有一个表单可以在操作中提交给我的 cart.php

```
<form name="orderform" method="post"     action="http://s429036015.onlinehome.us/cart.php" id="orderform">
    <input type="hidden" name="mode" value="add" />
    <input type="hidden" name="productid" value="140" />
    <input type="hidden" name="cat" value="" />
    <input type="hidden" name="page" value="" />
    Qty <input type="text" id="product_avail" name="amount" />      
   <button class="button main-button list-button add-to-cart-button" type="submit" title="" onClick="location.href='cart.php'">
    <span class="button-right"><span class="button-left">Add to cart</span></span>
  </button>       
</form> 
```

上面的表单正确提交，输入数量，会话存储数据并且商品在购物车中就好了....但是，那个`onclick`事件`<button>`不起作用！

我什至试过这个

```
<button class="button main-button list-button add-to-cart-button" type="submit" title="" onClick="GotoPage(); return:true;"> 
```

在表单之前使用此脚本

```
<script type="text/javascript">
  function GotoPage() {
    window.location = "http://s429036015.onlinehome.us/cart.php";
  }
</script> 
```

有人有想法么？使我抓狂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:42:22.227

在 PHP 中，处理表单中的数据后，试试这个：

```
header('location: http://s429036015.onlinehome.us/cart.php'); 
```

# mysql - mysql锁定错误或错误？

> ID：12942967
> 
> 赞同：6
> 
> 时间：2012-10-17T20:37:25.860
> 
> 标签：mysql, locking

开始了：

```
mysql> LOCK TABLES radcheck WRITE;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT * FROM radcheck WHERE id NOT IN (
    ->     SELECT id FROM (
    ->         SELECT id FROM radcheck  WHERE attribute = 'Password' GROUP BY UserName HAVING COUNT(*) > 1
    ->      ) AS c
    -> );
ERROR 1100 (HY000): Table 'radcheck' was not locked with LOCK TABLES 
```

怎么回事？

编辑

```
SET AUTOCOMMIT = 0
    -> ;
Query OK, 0 rows affected (0.00 sec)

mysql> LOCK TABLES radcheck WRITE;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT * FROM radcheck WHERE id NOT IN ( SELECT id FROM radcheck  WHERE attribute = 'Password' GROUP BY UserName HAVING COUNT(*) > 1 );
ERROR 1100 (HY000): Table 'radcheck' was not locked with LOCK TABLES

mysql> LOCK TABLES radcheck READ;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT * FROM radcheck WHERE id NOT IN ( SELECT id FROM radcheck  WHERE attribute = 'Password' GROUP BY UserName HAVING COUNT(*) > 1 );
ERROR 1100 (HY000): Table 'radcheck' was not locked with LOCK TABLES 
```

pd：如果我不锁定表，查询工作正常。pd：这只是简化问题的一个例子……在现实生活中是一个删除……

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T20:50:11.743

当您使用锁定表时，您需要锁定查询中的所有表。当您使用子查询时，它会创建一个表。而且您没有锁定它。因此，您会遇到错误。

参考： [http ://dev.mysql.com/doc/refman/5.0/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)

给内表一个别名

测试样品：

```
lock tables products as p1 write, products as p2 write ;
select product_id  from products as p1
where product_id  not in ( 
select product_id from products p2 where product_id in (1,2)
) 
```

可能你需要这样做：

```
lock tables radcheck as r1 write, radcheck as r2 write ;

 SELECT * FROM radcheck r1 WHERE id NOT IN (
SELECT id FROM (
  SELECT id FROM radcheck r2 WHERE attribute = 'Password' GROUP BY UserName HAVING COUNT(*) > 1) AS c
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:42:00.773

可能您有 autocommit = 1 并在提交后释放表。

尝试：

```
SET AUTOCOMMIT = 0 
```

在开始您的交易之前。

[http://dev.mysql.com/doc/refman/5.0/es/innodb-and-autocommit.html](http://dev.mysql.com/doc/refman/5.0/es/innodb-and-autocommit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:45:39.013

您正在为`WRITE`. 您需要在`READ`使用时锁定表，因为`SELECT`它只是从表中读取。

但是，您不应该真正锁定表，因为这会阻止并发。

**编辑**

您还需要使用别名，因为您在查询中两次使用同一个表。

IE

```
LOCK TABLES radcheck AS read1 READ, radcheck AS read2 READ;
SELECT * 
FROM radcheck AS read1
WHERE id NOT IN
   (
       SELECT id FROM radcheck AS read2
       WHERE attribute = 'Password'
       GROUP BY UserName
       HAVING COUNT(*) > 1
   ); 
```

# c - 将超级终端上显示的数组值（来自微控制器）存储到 PC 中的 excel 表中

> ID：12942968
> 
> 赞同：1
> 
> 时间：2012-10-17T20:37:26.127
> 
> 标签：c, windows-7, embedded

我想将超级终端上显示的数组值（来自微控制器）保存到 PC 中的 excel 表中，并在此处发布相同的问题，但没有结论

[如何从 PC 的超级终端中检索数据](https://stackoverflow.com/questions/6922608/how-to-retrieve-data-from-pcs-hyperterminal)

谁能指导我这件事。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:54:57.780

您应该能够告诉超级终端将会话记录到文件中。使用 .csv 的扩展名或稍后重命名可能会有所帮助。

在文本编辑器中打开文件并删除任何无关的开始/结束数据。您可能需要运行一两个查找/替换来修复分隔符

在 Excel 中打开 .csv 文件并使用字段分隔符设置，直到您的数据接近所需列。

一个名为 sed 的命令行实用程序可以帮助您自动修改分隔符；它是类 unix 操作系统的标准，但可用于 Windows（即使是独立形式）。它有一个学习曲线，但它非常擅长这种类型的事情。

# javascript - 使用 IFrame 的响应式设计测试面临 IE7 和 IE8 的问题

> ID：12942970
> 
> 赞同：1
> 
> 时间：2012-10-17T20:37:27.760
> 
> 标签：javascript, iframe, cross-browser, internet-explorer-7, responsive-design

我正在尝试创建一个接受网站 URL 并水平显示所有显示尺寸的页面。

像这样的东西：http: [//dfcb.github.com/Responsivator/](http://dfcb.github.com/Responsivator/) 或者像这样的东西：http: [//mattkersley.com/responsive/](http://mattkersley.com/responsive/)

在这两个网站中，他们都使用 iframe 以指定宽度加载内容，然后他们正在为不同设备播放宽度和高度，它在除 IE7 和 IE8 之外的所有浏览器中都能正常工作我想知道如何让它在 IE 7 上工作和 8\. 应该有某种方式或其他方式。

我在某处读到[http://www.ehow.com/how_8123203_use-iframes-ie8.html](http://www.ehow.com/how_8123203_use-iframes-ie8.html)您可以使用 P3P 标头，但我不确定。

语言不是问题。但我只是希望它可以在每个浏览器上运行。我开发了一个测试页面并保持在线：[http ://sentimentanalysis.comeze.com/responsiate/](http://sentimentanalysis.comeze.com/responsiate/)

如果您仔细观察，它在 chrome、ff、IE 9 上运行良好，但在 IE7 和 8 上运行非常奇怪，如何让它看起来一样？是否可以？

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:50:09.887

## 响应式设计在 IE7 和 8 中不起作用。

使用如下方法：

```
@media only screen and (max-width: 768px){} 
```

不要在 IE7 或 IE8 中工作，解决这个问题的唯一方法是客户端 Chrome 框架。

## 移动标头（非响应式媒体查询）

您可以发送假装的移动标头，仅此而已。这需要花很多时间才能让服务器误以为你在移动设备上，但这需要做很多事情。您的服务器将不得不请求页面及其所有资产（图像、样式和脚本），并且它不会显示站点的真正响应式设计：如果目标有一个完整的移动站点，则只有完整的移动站点。

# hadoop - hadoop 1.0.3 包含哪些hdfs 版本？

> ID：12942975
> 
> 赞同：0
> 
> 时间：2012-10-17T20:37:56.987
> 
> 标签：hadoop, mapreduce, hdfs

我看到 hadoop 分为三个分支，发行说明包含指向 HDFS 版本的 HDFS 修复。有谁知道我可以明确找到答案的网站：

hadoop 1.0.3 包含 HDFS X 和 MapReduce Y 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:00:42.147

据我了解，包括 HDFS 和 MapReduce 在内的所有三个分支都打包到一个 hadoop 版本中，适用于 HDFS 或 MapReduce 的任何补丁都是完整版本的补丁。尝试将其可视化为由多个组件组成的单个实体。因此，没有针对 HDFS 和 MapReduce 的特定版本。它们与单个 hadoop 版本相关联。因此，当我们谈论 HDFS 版本时，它与 hadoop 的版本号相同。

# zope - 如何在 zope 中安装 MySQLDb 适配器？

> ID：12942978
> 
> 赞同：0
> 
> 时间：2012-10-17T20:38:09.227
> 
> 标签：zope

我正在尝试在 zope 中安装 MySQLDB 适配器。我有一个带雪豹的 mac book pro。我已经从[http://old.zope.org/Members/adustman/Products/MySQLdb/下载了“MySQL-python-1.2.0。](http://old.zope.org/Members/adustman/Products/MySQLdb/)

我提取了文件，`/usr/local/zope/lib/python/products` 然后将目录更改为它：

```
cd MySQL-python-1.2.0 
```

我输入：

```
sudo /Users/dkar/Desktop/zope/bin/python setup.py build 
sudo /User/dkar/Desktop/zope/bin/python setup.py install 
```

我收到此错误：

```
 Traceback (most recent call last):
   File "setup.py", line 34, in ?
  mysqlstatic = eval(os.getenv('mysqlstatic', 'False'))
  File "<string>", line 0, in ?
  NameError: name 'False' is not defined 
```

我在 setup.py 中看到了第 0 行和第 34 行，但我不知道该怎么办。有什么建议该怎么做吗？我是这些东西的新手，我不知道如何解决这个问题。如果您不理解某些部分，请告诉我，我会尽力解释得更好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-06T18:03:32.757

使用的环境：

*   Debian 2.6.32-5-amd64
*   克隆 4.3.10
*   MySQL 服务器 5.1.49-3
*   Python-MySQL 1.2.3
*   ZMySQLDA

一步步...

1.  安装克隆
2.  安装 MySQL，在这个例子中我安装使用`apt-get install mysql-server`
3.  安装另一个依赖项`apt-get install libmysqlclient-dev`
4.  编辑鸡蛋中的 base.cfg 或 buildout.cfg 添加：

`eggs = MySQL_python`

5.  在底部的 buildout.cfg 中添加：

`[zmysqlda] recipe = collective.recipe.zmysqlda target = ${buildout:directory}/products`

6.  运行构建`bin/buildout -v`
7.  在第 92 行编辑 DABase.py 和文件 DA.py 第 96 行

其中有：`from ImageFile import ImageFile` 更改为：`from App.ImageFile import ImageFile`

8.  创建脚本请求的文件夹：

`mkdir -p /{buildout_folder}/buildout-cache/eggs/Zope2-2.13.12-py2.6.egg/Shared/DC/ZRDB/www`

9.  将不存在的图标放入文件夹 `wget http://old.zope.org/Documentation/Guides/ZSQL-HTML/DBAdapterFolder_icon.gif`

10.  再次运行构建。

11.  在zope界面管理中添加Z MySQL数据库连接

12.  输入数据库连接字符串：

希望对你有帮助！

我从我的帖子中提取了这本食谱：http: [//julianoaraujo.objectis.net/blog/pzp/400320287](http://julianoaraujo.objectis.net/blog/pzp/400320287)，它是巴西葡萄牙语的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:09:33.433

我不知道是什么导致您收到奇怪的错误，所以我不确定我的回答是否会对您有所帮助。我在安装 mySQLdb 时也遇到了麻烦。我发现必须在您的系统上安装 mysql，即使您不打算将它与 mySQLdb 一起使用（也许您只想将它​​与远程连接一起使用）。

在构建和安装之前，您必须编辑 site.cfg 并设置 mysql_config 的路径（在我的 mac 上是：/usr/local/mysql/bin/mysql_config）。然后做一个符号链接，这样你的mysql客户端就会被找到：

```
sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib 
```

希望有帮助:)

# c++ - C++ 中包含子类的基本抽象类数组

> ID：12942979
> 
> 赞同：0
> 
> 时间：2012-10-17T20:38:11.090
> 
> 标签：c++, class, inheritance, abstract

所以我有一个顶级课程，可以说：

```
//Top.h
#pragma once
#include <string>
using std::string;

class Top
{
    protected:
        string name;
    public:
        virtual string GetName() = 0;
} 
```

这个类不会有任何对象 Top 实例化，这就是它是一个抽象类的原因。我也有两个中产阶级，比如说：

```
//MiddleA.h
#pragma once
#include "Top.h"

class MiddleA : public Top
{
    protected:
        int value;
    public:
        MiddleA(string, int);
        string GetName();
        int GetValue();
}

//MiddleB.h
class MiddleB : public Top
{
    protected:
        double factorial;
    public:
        MiddleB(string, double);
        string GetName();
        double GetFactorial();
        double Calculate(int);
} 
```

现在，我需要的是一个数组或任何东西，它可以包含多个 MiddleA、MiddleB 类型的对象或从这两个类继承的任何类。有没有办法在 C++ 中做到这一点？

**编辑：**在受保护部分添加默认构造函数并使用 Top 的向量或数组是否“可以接受”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:47:35.240

使用 C++ 的指针和数组：

```
typedef std::array<std::unique_ptr<Top>,3> Tops;
Tops tops =
{{
    new MiddleA( "Kuku", 1337 ),
    new MiddleB( "Hoi", 42.0 ),
    new MiddleC()
}}; 
```

只有你必须在你的 Top 上有虚拟析构函数。如果没有虚拟析构函数，您只能使用 shared_ptr，当对象被销毁时，其他人将导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:41:56.837

是的。你可以这样做。

```
Top* array[3] = { new Top(parms), new MiddleA(params), new MiddleB(params) }; 
```

但您将只能调用 GetName() 函数。您将无法调用其他方法。

# iphone - 访问/参考 imageView.image 以稍后替换它

> ID：12942987
> 
> 赞同：0
> 
> 时间：2012-10-17T20:38:36.997
> 
> 标签：iphone, objective-c, xcode, ipad

好吧，最近几天这让我发疯了。我希望这是一个简单的解决方法。我正在尝试访问我的 UIImageView.image，以便稍后替换它。

这里只有所需的代码：

### 每次用户单击其库中的照片时，我首先创建一个 imageView。

```
// .h
@property (strong,nonatomic) UIImage *doneImage;
@property (strong,nonatomic) UIImageView *editImage;

// .m
@synthesize doneImage;
@synthesize editImage;

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
UIImage *originalImage = [info objectForKey:UIImagePickerControllerOriginalImage];
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(xCoordinate, yCoordinate, widthOfImage, heightOfImage)];
imgView.image = originalImage;
imgView.userInteractionEnabled = YES;
[self.mainView addSubview:imgView];

// I add gestures
longPress = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(handleLongPress:)];
longPress.minimumPressDuration = 1;
longPress.numberOfTouchesRequired = 1;
[imgView addGestureRecognizer:longPress];
} 
```

### 当有人点击其中一张图片时，会弹出

```
- (void)handleLongPress:(UILongPressGestureRecognizer *)recognizer {

editImage = (UIImageView*)recognizer.view; // I declare what editImage is and now have access to what imageView is being interacted with.
doneImage = editImage.image; // I then get the image of that for later use.

if(UIGestureRecognizerStateBegan == recognizer.state) {

        popoverEditor = [[UIPopoverController alloc] initWithContentViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"popupEditor"]];
[popoverEditor presentPopoverFromRect:editImage.bounds inView:editImage permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

### 这会弹出一个带有 4 个按钮的菜单。然后我有一个 IBAction 试图启动编辑部分。

```
- (IBAction)effectsEditorButton:(id)sender { 

// editImage is my imageView

if (editImage == nil) {
    NSLog(@"imageView was nil wtf");
} else {
    [self performSelector:@selector(editImageWithEffects:)];
   }
} 
```

### 我的图像视图始终为零。我需要以某种方式获得对它的引用。我已经尝试过标签，但一旦达到这一点，我似乎无法让它们保持其价值。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:08:44.163

您是否遗漏了代码？根据您在此处的内容，editImage 将始终为 null，因为它没有在任何地方声明（也许在 Interface Builder 中我们看不到某些东西？）。

您需要一种从弹出窗口链接回视图控制器的方法。流行的方法是在从弹出框控制器返回时使用完成块，或者将“主”VC 设置为弹出框上的弱属性。

# c# - C# 是否可以更改获取锁的优先级？

> ID：12942998
> 
> 赞同：9
> 
> 时间：2012-10-17T20:39:24.193
> 
> 标签：c#, multithreading

如果有多个线程都在等待同一个锁，是否可以让主线程在获取锁时具有更高的优先级。这意味着如果工作线程`lock`在主线程之前执行语句，则主线程将在已经等待它的其他线程之前获得锁。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:43:54.513

不，该`lock`语句映射到`System.Threading.Monitor.Enter()`( [MSDN](http://msdn.microsoft.com/en-us/library/dd289498.aspx) ) 并且没有接受优先级参数的重载。

我能想到的最接近的东西是 ReaderWriterLock(Slim) 但我会认真重新考虑导致此请求的设计。可能有更好的方法来实现你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T21:17:01.353

通过本机锁定语句，没有。如果您愿意花费时间和精力来开发它，当然可以通过您自己的自定义锁定机制。

这是我的解决方案草案。它可能有效，也可能无效，也可能不是超级高效，但它至少是一个起点：

```
public class Lock
{
    bool locked = false;

    private object key = new object();
    SortedDictionary<int, Queue<ManualResetEvent>> notifiers =
        new SortedDictionary<int, Queue<ManualResetEvent>>();

    ManualResetEvent specialNotifier = null;

    public void Lock()
    {
        lock (key)
        {
            if (locked)
            {
                ManualResetEvent notifier = new ManualResetEvent(false);

                int priority = getPriorityForThread();

                Queue<ManualResetEvent> queue = notifiers[priority];
                if (queue == null)
                {
                    queue = new Queue<ManualResetEvent>();
                    notifiers[priority] = queue;
                }

                queue.Enqueue(notifier);

                notifier.WaitOne();
            }
            else
            {
                locked = true;
            }
        }
    }

    private static int getPriorityForThread()
    {
        return 0;
    }

    public void Release()
    {
        lock (key)
        {
            foreach (var queue in notifiers.Values)
            {
                if (queue.Any())
                {
                    var notifier = queue.Dequeue();
                    notifier.Set();
                    return;
                }
            }
            locked = false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-01T15:51:04.623

这是另一个解决方案。我有很多行，但很简单。该函数`DoSomethingSingle`一次只能调用一个线程，带有`highPriority`标志的线程将获得优先权。

```
 static int numWaiting = 0;
    static object single = new object();

    ResultType DoSomething(string[] argList, bool highPriority = false)
    {
        try
        {
            if (highPriority)
            {
                Interlocked.Increment(ref numWaiting);
            }

            for (;;)
            {
                lock (single)
                {
                    if (highPriority || numWaiting == 0)
                    {
                        return DoSomethingSingle(argList);
                    }
                }
                // Sleep gives other threads a chance to enter the lock
                Thread.Sleep(0);
            }
        }
        finally
        {
            if (highPriority)
            {
                Interlocked.Decrement(ref numWaiting);
            }
        }
    } 
```

这允许两个优先级。保证只有在没有高优先级线程等待时，低优先级线程才能访问资源。

**编辑：**更改为联锁 incr/dec